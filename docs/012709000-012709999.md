# StackOverflow 问答 12709000-12709999

# transactions - Rest Easy PreProcessInterceptor 通过数据库对用户进行身份验证

> ID：12709001
> 
> 赞同：1
> 
> 时间：2012-10-03T12:57:28.800
> 
> 标签：transactions, resteasy

我用 RestEasy 设计了一个应用程序。我基本上使用 PreProcessInterceptor 来拦截所有请求并从数据库验证用户。验证成功后，请求将转到相应的服务 api。所以我的问题是正确的方法有一个 PreProcessInterceptor 拦截器，它与数据库交互以在一个事务中验证用户并再次调用服务 api，这反过来将有一个或多个不同的数据库事务用于业务目的。因此，理想情况下，对于每个具有 2 个不同事务的请求，至少会有 2 个数据库命中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:02:10.143

如果您的应用程序的用户很少，请务必继续。但既然你问我猜不是这样的。

我不建议您按照您建议的方式设计应用程序。我建议您使用适当的安全框架，例如[apache shiro](http://shiro.apache.org/)。Shiro 具有开箱即用的良好[缓存功能。](http://shiro.apache.org/caching.html)

# javascript - CSS 中的 .closest()

> ID：12709004
> 
> 赞同：9
> 
> 时间：2012-10-03T12:57:36.913
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

我可以通过使用隐藏以这种方式显示的 DOM 树`.closest()`。

```
<div class='parent'>
  <!-- some html code -->
  <div class='child'>
  </div>
  <!-- some html code -->
<div>

$('.child').closest('parent').hide(); 
```

仅仅使用CSS就可以得到同样的效果吗？
如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:18:55.847

当前不存在可以选择前一个元素或父元素的选择器。

[目前正在开发](http://dev.w3.org/csswg/selectors4/#subject)一个 4 级选择器。

所以在未来，你也许可以做这样的事情：

```
!.parent > .child { display: none; } 
```

但在那之前，你必须坚持

```
$('.child').parent(); 
```

在 jQuery 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:09:24.367

不[。你自己看看](http://www.w3.org/TR/css3-selectors/#selectors)，CSS3 中不存在这样的选择器，[CSS2 中也不](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)存在。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-10-03T13:01:18.837

或许可以使用这个

```
.child:parent .parent{display:none;} 
```

[http://css-tricks.com/parent-selectors-in-css/](http://css-tricks.com/parent-selectors-in-css/)

# c - 函数调用，栈

> ID：12709005
> 
> 赞同：1
> 
> 时间：2012-10-03T12:57:40.280
> 
> 标签：c, stack

所以我不知道为什么，但我了解到当你调用一个函数并向它传递一个参数时，它会在堆栈（处理器？）上处理它。

有人可以解释一下吗？

那么它如何改变变量、内存块等的值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:34:44.587

堆栈在大多数情况下用于将参数传递给函数。使用它的原因是您不必绑定到固定的内存位置（用于参数）以使您的函数正常运行。如果您有可以从固定内存中获取参数的函数，那么您可能只有在内存空闲时才能运行它，并且您只能运行它的一个实例。Stack 让您可以随时将参数存储到程序的当前上下文中。在 x86 处理器上，有一个寄存器指向堆栈的末尾，另一个寄存器指向堆栈的开头。这些实际上只是您希望堆栈驻留的主内存的地址。

有 PUSH 指令将堆栈结束寄存器移动到下一个位置并将指定的数据（可以是来自其他寄存器的值或在某个地址或直接值）存储到堆栈结束寄存器指向的地址。另一条指令是 POP，反之亦然。这样，如果您坚持计划并跟踪您推送到堆栈的内容，您可以让您的函数在任何上下文中工作。

还有一些其他较少使用的选项来传递参数，例如通过寄存器，例如由 bios 中断使用。如果您想了解更多信息，我建议您阅读有关“调用约定”的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:03:03.400

不能保证参数在堆栈上传递，它取决于体系结构和编译器。

至于值和内存是如何改变的——当您调用一个必须进行调用者看到的更改的函数时，您提供的不是实际值，而是该值的（指向）地址，这是正常的。只要函数知道正确的内存位置，它就可以进行这些更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:49:28.150

让我们从这个假设你有一个函数开始

```
int foo(int value) {
   int a = 10;
   return a;
} 
```

因此，每当进行函数调用时，操作系统都需要一些内存空间来分配在这种情况下函数的局部变量以及`int a`在这种情况下传递给函数的参数`int value`。通过在堆栈上分配内存来满足此内存要求。堆栈只不过是分配给每个进程的内存区域，它实际上表现为堆栈数据结构（LIFO）。

现在问题出现了，当进行函数调用时，所有东西都存储在堆栈中。压入堆栈的第一件事是以相反的顺序传递给函数的参数（如果超过一个）。2\. 然后是调用这个函数的函数的返回地址（因为一旦这个函数`foo`完成执行它应该返回到代码中调用它的地方） 3\. 最后被调用函数的局部变量被压入堆栈.

一旦被调用函数完成执行代码，它就会返回到先前存储在堆栈中的返回地址，因此我们说函数调用完成或返回。在这种情况下，该函数有一个返回值，它将返回给被调用函数。然后该空间可以自由使用，并且可以在随后的函数调用中被覆盖。

（现在，如果您连接 dotes，您可以理解为什么函数中的局部变量（自动变量）的作用域仅限于函数调用的生命周期（您问了一个与关闭的作用域相关的 SO 问题），因为一旦调用返回内存为这些语言环境变量分配的空间已经消失（它仍然存在，但是一旦函数返回就无法访问它们），因此`int a`在这种情况下这些自动变量的寿命会限制到`foo()`返回到被调用函数。

旁注：：我已经阅读了您在 SO 中发布的许多问题。我猜你正在尝试学习 C 以及底层硬件和操作系统的基本工作，而它们之间的混淆正在杀死你。除了这个问题的答案之外，我建议您阅读和理解一些指示，这将使您对所面临的问题有很多深入的了解。

1.  对于 C 参考 K&R，这是最好的书。
2.  在开始阅读有关操作系统概念的一点点（内存处理，特别是虚拟内存）
3.  尝试从广义上想象一个系统的工作方式，例如不同组件的交互方式。
4.  了解内存相关内容和系统内部的一些很好的链接[http://duartes.org/gustavo/blog/best-of](http://duartes.org/gustavo/blog/best-of)

如果您想深入了解函数调用的堆栈空间，请尝试此链接[http://www.binarypirates.in/2011/02/17/understanding-function-stack-in-c/](http://www.binarypirates.in/2011/02/17/understanding-function-stack-in-c/)

希望这可以帮助

# jquery - 谷歌地图 v3 markerwithlabel jquery 旋转图标

> ID：12709007
> 
> 赞同：3
> 
> 时间：2012-10-03T12:57:41.707
> 
> 标签：jquery, google-maps-api-3

是否可以获取markerwithlabel 实用程序库对象的labelClass，然后使用jquery rotate 来旋转它？

我一直在尝试这样的事情，但无法让它工作......：

```
var markerx = new MarkerWithLabel({
        position: new google.maps.LatLng(0.0),
        draggable: false,
        raiseOnDrag: false,
        map: map,
        labelContent: "some chat",
        labelAnchor: new google.maps.Point(30, 20),
        labelClass: "labels", // the CSS class for the label
        labelStyle: {opacity: 1.0},
        icon: "/assets/swell_arrow.png",
        visible: true
       });
  $(document).ready(function()
        {
            $('.labels').rotate(30);
        }); 
```

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:28:15.137

这就是我所做的：

```
var iconLabel = document.createElement("img");
    iconLabel.src = ImageFiles+"/icons/"+icn+"f.png";
    iconLabel.setAttribute("id","img"+$i);

var marker = new MarkerWithLabel({
    position: point,
    icon: Icons["blank"],
    shadow: Icons["blank"],
    draggable: false,
    map: theMap.map,
    flat: true,
    optimized: false,
    visible: true,
    labelContent: iconLabel , 
    labelAnchor: new google.maps.Point(16,16), 
    labelClass: "labels", 
    labelVisible: true,
    labelStyle: {opacity: 0.75}
});

Markers.length++;
Markers[$i] = marker;
Markers[$i].iLabel = iconLabel; 
```

然后当我想旋转时：

```
var tID = Markers[theIDX].iLabel.getAttribute("id");
$("#"+tID).rotate(parseFloat(heading)); 
```

它旋转 labelContent 属性，而不是 Class。

--山姆

# sql - 确定 SELECT 是等价的

> ID：12709014
> 
> 赞同：0
> 
> 时间：2012-10-03T12:57:56.760
> 
> 标签：sql, sql-server-2008, tsql

你能帮我确定这两个 SELECT 是否等效？

```
SELECT sd.SESSION_DATA_ID
FROM SessionData sd
WHERE sd.DEVICE_TYPE = 'TRAC'
    AND (EXISTS
          (SELECT sr.ID
           FROM SessionResult sr
           LEFT JOIN BarcodeValues bv ON 
                sr.BARCODE_VALUE_0 = bv.ID AND 
                sr.SESSION_DATA_ID = sd.SESSION_DATA_ID AND
                sr.EVENT_NAME = 'Multi Full Cntr'
           WHERE
             bv.ENCRYPTED_VALUE LIKE '' OR bv.ENCRYPTED_VALUE IS NULL))

SELECT
    DISTINCT sd.SESSION_DATA_ID
FROM SessionData sd
LEFT JOIN SessionResult sr ON sd.SESSION_DATA_ID = sr.SESSION_DATA_ID
LEFT JOIN BarcodeValues bv ON bv.ID = sr.BARCODE_VALUE_0
WHERE
    sd.DEVICE_TYPE = 'TRAC' AND
    (sr.EVENT_NAME = 'Multi Full Cntr' AND
    bv.ENCRYPTED_VALUE LIKE '' OR bv.ENCRYPTED_VALUE IS NULL) OR
    sr.EVENT_NAME is NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:04:23.560

不，他们不是。由于添加了 JOIN，第二个会为每个匹配生成多行。您正试图通过添加 DISTINCT 来撤消此操作，但这并不相同。*如果*SessionData.SESSION_DATA_ID 是唯一键，则*结果*可能匹配，但不是同一个*查询*，因为结果与第一个查询匹配的事实是实际值（唯一性）而不是固有属性的*副作用*请求（查询）。QED。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T13:18:59.723

这使它与众不同

或 sr.EVENT_NAME 为 NULL

首先将不匹配 sr.EVENT_NAME 为 NULL
第二个将匹配 sr.EVENT_NAME 为 NULL

第二个将在两种情况下
匹配 - sd.SESSION_DATA_ID = sr.SESSION_DATA_ID 不匹配
- sd.SESSION_DATA_ID = sr.SESSION_DATA_ID 和 sr.EVENT_NAME 匹配为 NULL

我怀疑第一个选择没有做你认为它正在做的事情
WHERE 中的 OR IS NULL 将返回连接不匹配
的行以下不等价

```
SELECT sr.ID
FROM SessionResult sr
LEFT JOIN BarcodeValues bv 
  ON  sr.BARCODE_VALUE_0 = bv.ID 
 AND  sr.SESSION_DATA_ID = sd.SESSION_DATA_ID 
 AND  sr.EVENT_NAME = 'Multi Full Cntr'
WHERE bv.ENCRYPTED_VALUE LIKE '' OR bv.ENCRYPTED_VALUE IS NULL

SELECT sr.ID
FROM SessionResult sr
JOIN BarcodeValues bv 
  ON  sr.BARCODE_VALUE_0 = bv.ID 
 AND  sr.SESSION_DATA_ID = sd.SESSION_DATA_ID 
 AND  sr.EVENT_NAME = 'Multi Full Cntr'
 AND (bv.ENCRYPTED_VALUE LIKE '' OR bv.ENCRYPTED_VALUE IS NULL) 
```

我怀疑这就是你的意思/想要的是：

```
SELECT distinct sd.SESSION_DATA_ID
FROM SessionData sd
JOIN SessionResult sr 
  ON sd.SESSION_DATA_ID = sr.SESSION_DATA_ID 
 AND(sr.EVENT_NAME = 'Multi Full Cntr' or sr.EVENT_NAME is NULL)
JOIN BarcodeValues bv 
  ON bv.ID = sr.BARCODE_VALUE_0
 AND(bv.ENCRYPTED_VALUE = '' OR bv.ENCRYPTED_VALUE IS NULL) 
WHERE sd.DEVICE_TYPE = 'TRAC' 
```

AND 在 OR 之前处理

[运算符优先级 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms190276.aspx)

```
 select 'yes' 
  where 1 = 0 and 0 = 1 or 1 = 1 
```

# javafx-2 - 节点 - 选择要出现的层 JavaFX2

> ID：12709016
> 
> 赞同：1
> 
> 时间：2012-10-03T12:58:06.333
> 
> 标签：javafx-2, javafx

我希望能够选择节点出现的层并在整个程序过程中更改它。

我知道最后添加的节点出现在前一个节点的顶​​部。

在 swing 中，我使用 JLayeredPane 及其方法 setLayout(JComponent, integer)。int 越高，组件在屏幕上显示的级别就越高。

有没有类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:09:00.903

我认为您可以通过组合使用子节点的 z 顺序索引

```
Node node = pane.getChildren().get(index);
Node node = pane.getChildren().remove(index);
pane.getChildren().add(newIndex, node); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T11:16:16.183

已经完成了一个布局来完成这项工作：[StackPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/StackPane.html)。

JavaFX 教程有一[章专门介绍它](http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm#sthref10)。

不同的窗格是堆叠的，但如果不透明度未设置为 100 %，它们都是可见的。

# php - PHP WHILE LOOP 直到有人插入游戏

> ID：12709019
> 
> 赞同：0
> 
> 时间：2012-10-03T12:58:13.813
> 
> 标签：php, loops, while-loop

我现在使用 YII FRAMEWORK，我有点用 PHP 开发这个游戏。

我想知道我想解决的问题的正确代码是什么。

我尝试使用 if-else 你我认为 while 循环将是答案。

我有这个数据库名称，我的游戏名称上`gameWaiting`有这个`button``createGame`

因此，当玩家单击按钮时`createGame`，它现在将插入数据库。

虽然它在数据库中的命名`gameWaiting`意味着该玩家正在等待另一个玩家。

然后当另一个玩家点击 createGame 这个玩家会自动加载游戏。

但是我怎样才能循环我的代码来等待另一个玩家......

这是正确的代码吗？

```
$game = mysql_query( "SELECT * FROM game " );
while( $game_is_not_empty_loop > empty($game) ){
  // CODES HERE
} 
```

我尝试使用`if else`，但它停止等待游戏。我也尝试设置 sleep(30) 所以它会等待另一个玩家，但我想这没有用......

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:14:20.070

while 循环是不可能的。我有这样的类型已经创建了一个游戏。要解决这个问题，您需要创建一个算法，并且需要管理高度优化的数据字段来查找谁是等待玩家，谁是第二玩家。这太复杂了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:14:39.303

不，你的代码是错误的。您只查询一次数据库，并且您永远不会知道之后创建的游戏。

所以第一个解决方案是不断查询数据库，直到找到游戏。

不要这样做！它可能会杀死您的数据库。

寻找另一个是进程间通信的，或者不经常查询数据库。每 10 秒可能没问题，甚至更少。

# java - Java中实参和形参的区别

> ID：12709026
> 
> 赞同：46
> 
> 时间：2012-10-03T12:58:27.270
> 
> 标签：java, parameters, arguments

> **可能重复：**
> [参数和参数之间有什么区别？](https://stackoverflow.com/questions/156767/whats-the-difference-between-an-argument-and-a-parameter)

我正在处理一些面试问题。对于这个问题，我无法给出一个可靠的答案：

Java中参数和参数之间的区别？
它们有何不同？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-03T13:00:49.140

通常，参数是出现在方法定义中的参数。参数是在运行时传递给方法的实例。

您可以在此处查看说明：[http ://en.wikipedia.org/wiki/Parameter_(computer_programming)#Parameters_and_arguments](http://en.wikipedia.org/wiki/Parameter_(computer_programming)#Parameters_and_arguments)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-03T13:31:29.300

术语参数是指方法/函数声明或定义中方法/函数名称后面的括号内的任何声明；术语参数是指方法/函数调用的括号内的任何表达式。IE

1.  函数/方法定义中使用的参数。
2.  函数/方法调用中使用的参数。

请查看以下示例以更好地理解：

```
package com.stackoverflow.works;

public class ArithmeticOperations {

    public static int add(int x, int y) { //x, y are parameters here
        return x + y;
    }

    public static void main(String[] args) {
        int x = 10;
        int y = 20;
        int sum = add(x, y); //x, y are arguments here
        System.out.println("SUM IS: " +sum);
    }

} 
```

谢谢！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-03T12:59:47.600

他们不是。它们完全一样。

但是，也有人说参数是方法签名中的占位符：

```
public void doMethod(String s, int i) {
  ..
} 
```

String s 和 int i 有时被称为参数。参数是实际值/引用：

```
myClassReference.doMethod("someString", 25); 
```

"someString" 和 25 有时被称为参数。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-03T13:17:55.533

有不同的观点。一是它们是相同的。但在实践中，我们需要区分形式参数（方法头中的声明）和实际参数（在调用点传递的值）。虽然短语“形式参数”和“实际参数”很常见，但不使用“形式参数”和“实际参数”。这是因为“参数”主要用于表示“实际参数”。因此，有人坚持“参数”只能表示“形式参数”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T13:02:52.923

在java中，参数有两种类型，隐式参数和显式参数。显式参数是传递给方法的参数。方法的隐式参数是调用该方法的实例。参数只是两种类型的参数之一。

# java - 没有“抽象”的Java中的运行时多态性？

> ID：12709033
> 
> 赞同：0
> 
> 时间：2012-10-03T12:58:55.443
> 
> 标签：java, polymorphism, abstract, dynamic-binding

我正在阅读官方的 Oracle 教程，其中介绍了多态性的概念，并以 3 个类的类层次结构为例；自行车是超类，MountainBike 和 RoadBike 是 2 个子类。

它显示了 2 个子类如何通过声明不同版本的方式覆盖在 Bicycle 中声明的方法“printDescription”。

最后，在最后，本教程提到 Java 虚拟机 (JVM) 为每个变量中引用的对象调用适当的方法。

但是，关于多态性的教程没有提到“抽象”类和方法的概念。除非将 Bicycle 中的 printDescription() 声明为“抽象”，否则如何实现运行时多态性？我的意思是，给定这个例子，编译器基于什么提示决定不在编译时将方法调用绑定到引用类型，并认为它应该留给 JVM 在运行时处理？

下面是使用的示例：

```
public class Bicycle {
    public int cadence;
    public int gear;
    public int speed;

    public Bicycle(int startCadence, int startSpeed, int startGear) {
      gear = startGear;
      cadence = startCadence;
      speed = startSpeed;
    }

    public void setCadence(int newValue) {
      cadence = newValue;
    }

    public void setGear(int newValue) {
      gear = newValue;
    }

    public void applyBrake(int decrement) {
      speed -= decrement;
    }

    public void speedUp(int increment) {
      speed += increment;
    }

    public void printDescription(){
        System.out.println("\nBike is " + "in gear " + this.gear
         + " with a cadence of " + this.cadence +
         " and travelling at a speed of " + this.speed + ". ");
    }

}

public class MountainBike extends Bicycle {
  private String suspension;

  public MountainBike(
           int startCadence,
           int startSpeed,
           int startGear,
           String suspensionType){
    super(startCadence,
          startSpeed,
          startGear);
    this.setSuspension(suspensionType);
  }

  public String getSuspension(){
    return this.suspension;
  }

  public void setSuspension(String suspensionType) {
    this.suspension = suspensionType;
  }

  public void printDescription() {
    super.printDescription();
    System.out.println("The " + "MountainBike has a" +
        getSuspension() + " suspension.");
  }

}

public class RoadBike extends Bicycle{

  private int tireWidth;

  public RoadBike(int startCadence,
                int startSpeed,
                int startGear,
                int newTireWidth){
    super(startCadence,
          startSpeed,
          startGear);
    this.setTireWidth(newTireWidth);
  }

  public int getTireWidth(){
    return this.tireWidth;
  }

  public void setTireWidth(int newTireWidth){
    this.tireWidth = newTireWidth;
  }

  public void printDescription(){
    super.printDescription();
    System.out.println("The RoadBike"
        " has " + getTireWidth() +
        " MM tires.");
  }
}

public class TestBikes {
    public static void main(String[] args){
        Bicycle bike01, bike02, bike03;

      bike01 = new Bicycle(20, 10, 1);
      bike02 = new MountainBike(20, 10, 5, "Dual");
      bike03 = new RoadBike(40, 20, 8, 23);

      bike01.printDescription();
      bike02.printDescription();
      bike03.printDescription();
      }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:02:50.090

> 除非将 Bicycle 中的 printDescription() 声明为“抽象”，否则如何实现运行时多态性？

为什么你会认为抽象类会改变任何东西？抽象类做两件主要的事情

1.  允许程序员声明一个自身不能被实例化的类，强制子类化，并且
2.  允许程序员通过声明方法抽象来强制子类提供方法的实现。

请注意，第 2 点并不意味着除非在基类上将方法声明为抽象，否则多态将不起作用。相反，它为开发人员提供了**强制**子类提供实现的机会，这在不涉及任何抽象使用的子类化场景中是不需要的。

就是这样。换句话说，抽象的概念补充了 Java 的多态性——它是一种语言特性，但与 Java 在运行时调用方法时使用的动态调度没有任何关系。任何时候在实例上调用方法时，都会使用运行时实例的类型来确定要使用的方法实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:02:50.777

在 Java 中，所有方法都在运行时绑定（这就是您可以在 C++ 中声明一个虚拟方法）。

所以JVM总是可以正确地分派方法。

实际上，Java 中的方法绑定永远不可能是静态的，因为您总是在处理对对象的引用（不能在堆栈上分配对象，如 C++）。这实际上强制 JVM 始终检查对象引用的运行时类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T13:03:24.273

`virtual`是许多语言中的关键字，表示“此方法可以被子类覆盖”。Java 没有该关键字，而是*所有非静态成员方法都是虚拟的并且可以覆盖*。

`abstract`与 virtual 相同，只是它告诉编译器基类没有该方法的定义。如果基类没有执行有用的功能，它有时很有用，但它绝不需要能够覆盖基类方法。

在您的情况下， printDescription 方法对基类有一个有用的定义，因此无需将其声明为抽象的。默认情况下它是虚拟的，因此可以被子类覆盖，因此不需要关键字来表明这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T13:01:56.693

无需声明该方法抽象。在运行时多态中，根据基类引用指向的类实例调用适当的派生类方法。

**考虑以下示例：-**

```
class A {
    public void doSomething() {

    }
}

class B extends A {
    public void doSomething() {
         System.out.println("In B")
    }
}

public class Test {
    public static void main(String args[]) {
          A obj = new B();   // Base class reference and derived class object.

          obj.doSomething();  // Calls derived class B's method and prints `In B`
    }
} 
```

**引用您阅读的声明：-**

> 本教程提到 Java 虚拟机 (JVM) 为每个变量中引用的对象调用适当的方法。

为了证明上述陈述的合理性，请参见上面的示例。在那里调用您的 B 类方法，因为您的基类引用`obj`指向派生类`B's`实例。

始终在编译时检查指向对象的引用类型，而在运行时检查该引用指向的对象类型。

因此，将在运行时**决定**调用哪个**方法****。**. **无论**您的**基类方法`abstract`**是否是**，**都会调用适当的派生类方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T13:04:53.350

这不是 C++。在 Java 中，您总是知道每个实例的真实类，因此，当`printDescription()`被调用时，将使用该类的定义。但是，您只能使用对实例的引用中可用的方法（因此，如果您`getMPH()`在类中定义一个方法`RoadBike`并使用变量处理该类的实例，`Bike`如果您打算使用它，编译器将出错） .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T13:14:49.447

我认为这段代码：

```
bike01 = new Bicycle(20, 10, 1);       
bike02 = new MountainBike(20, 10, 5, "Dual");       
bike03 = new RoadBike(40, 20, 8, 23);        
bike01.printDescription();       
bike02.printDescription();       
bike03.printDescription(); 
```

不是运行时多态性的最佳示例，因为即使在编译时所有事实（要调用的方法）都是已知的。但是，如果您将其更改为：

```
Random r = new Random();

if(r.nextInt(2)%2==0)
{
    bike01 = new Bicycle(20, 10, 1)
}
else
{
    bike01 = new MountainBike(20, 10, 5, "Dual");
}

// only at run-time the right function to call is known

bike01.printDescription(); 
```

...

# php - PHP PDO导致没有来自mysql的数据

> ID：12709034
> 
> 赞同：0
> 
> 时间：2012-10-03T12:58:58.193
> 
> 标签：php, mysql

您好我目前正在结合使用 php 5.3 和 mysql 服务器 5.1.61。我目前正在尝试做一个登录脚本，但我遇到了我没有得到任何结果数据和错误消息的问题。处理登录的函数如下：

```
 public function doLogin($username,$pw)
    {
        $db=new incdb();
        $row['name']=':username';
        $row['value']=$username;
        $row['type']=PDO::PARAM_STR;
        $parameters[]=$row;
        $row['name'] = ':password';
        $row['value'] = $pw;
        $row['type'] = PDO::PARAM_STR;
        $parameters[] = $row;
        $query=$db->execSql('SELECT * FROM tbUser WHERE '
                        .'username=:username AND password=MD5(:password)',$parameters);
        unset($parameters);
        unset($db);
        $data=$query->fetch();
        if (isset($data) && is_array($data))
        {
            $_SESSION['loggedIn']=$data['id'];
            $_SESSION['loggedInData']=$data;
            return 1;
        }
        else
        {
            echo 'error';
            return 0;
        }
} 
```

incdb类有execSql函数如下：

```
 public function execSql($sql, $parameters)
{
    $query=$this->pdo->prepare($sql);

    foreach ($parameters as $param)
    {
        $query->bindParam($param['name'], $param['value'], $param['type']);
    }
    $query->execute();

    return $query;
} 
```

有人可以告诉我我在这里做错了什么吗？（我对使用 php PDO 比较陌生......过去我总是直接使用 mysql 函数）。肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:08:28.237

我认为您不能将参数绑定为函数的参数。

像这样更改您的代码：

```
$row['name'] = ':password';
$row['value'] = MD5($pw);
$row['type'] = PDO::PARAM_STR; 
```

你的问题是这样的：

```
$query=$db->execSql(
  'SELECT * FROM tbUser WHERE '
   .'username=:username AND password=:password', $parameters); 
```

请记住，根据数据库的字符集，用户名比较可能区分大小写！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:17:20.460

我认为你传递了错误的参数，你传递了一个位置为 0 的数组。你只需要传递一个带有值的关联数组。例如

```
array('username' => 'mjuarez') 
```

# vb.net - vb.net 中的 request.querystring

> ID：12709035
> 
> 赞同：2
> 
> 时间：2012-10-03T12:58:59.910
> 
> 标签：vb.net, json, request.querystring

我有这个需要解码的网址：

```
http://gistest:54321/default.aspx?data=%7B%22id%22:%2269403%22,%22longitude%22:%22-143.406417%22,%22latitude%22:%2232.785834%22,%22timestamp%22:%2223-10%2010:12%22%7D 
```

**此代码每次都会更改**

我使用这段代码：

```
<%Response.Write(Request.QueryString.Item("data") )%><br/>
<%Response.Write(Request.QueryString.Item("id") )%><br/>
<%Response.Write(Request.QueryString.Item("longitude") )%><br/>
<%Response.Write(Request.QueryString.Item("latitude") )%><br/>
<%Response.Write(Request.QueryString.Item("timestamp") )%><br/> 
```

但我只把它作为输出，也许有一个选项可以检查数据是否不为空，然后我 request.querystring 数据中的其他部分：

```
{"id"="69403","longitude"="-143.406417","latitude"="32.785834","timestamp"="23-10 10:12"} 
```

这是从

> <%Response.Write(Request.QueryString.Item("data") )%>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:32:35.567

我认为您遇到的问题是您发布的 URL 中只有一个查询字符串参数，即`data`. 其余信息编码在`data`查询字符串值中。存储在其中的值`data`几乎看起来像一个[JSON](http://www.json.org/) /Javascript 对象，除了`=`属性名称和值之间有一个 in 而不是`:`.

因此，基本上您将无法使用`Request.QueryString`来获取 、 、 等的值`id`。`longitude`我`latitude`认为您的选择是编写一些代码来解析您`data`自己的值，或者替换为`=`并`:`使用 JSON 解析器用于 .NET（即，`JavascriptSerializer`类或`JSON.net`)。

就个人而言，我会在代码隐藏中编写一个方法，该方法将返回一个`Dictionary(Of String, Object)`. 在那种方法中，我只需将 each 更改`"="`为 a `":"`，然后使用`JavaScriptSerializer`.NET 提供的来解析字符串。我现在手头没有 ASP.NET 实例，但是我在 LinqPad 中放置的以下示例应该可以说明这个想法：

```
Sub Main
        Dim url = "http://gistest:54321/default.aspx?data=%7B%22id%22=%2269403%22,%22longitude%22=%22-143.406417%22,%22latitude%22=%2232.785834%22,%22timestamp%22=%2223-10%2010:12%22%7D"
        Dim uri = New Uri(url)
        Dim data = System.Web.HttpUtility.ParseQueryString(uri.Query)("data")
        Dim o = ParseData(data)
        Console.WriteLine(o("id"))
        Console.WriteLine(o("longitude"))
        Console.WriteLine(o("latitude"))
        Console.WriteLine(o("timestamp"))
End Sub

Function ParseData(data As String) As Dictionary(Of String, Object)
    Dim js = new System.Web.Script.Serialization.JavaScriptSerializer()
    Dim o = js.DeserializeObject(data.Replace("""=""", """:"""))
    ParseData = DirectCast(o, Dictionary(Of String, Object))
End Function 
```

关于这种方法需要注意的一点是，我希望 url 的格式与您发布的格式相同。您可能需要修改此方法以使其更健壮地处理不同的输入。

如果您将该`ParseData`函数放入您的代码隐藏中，那么您的首页中类似以下代码的内容*应该*会为您提供您正在寻找的输出（再次抱歉，我现在没有要测试的 ASP.NET 实例）：

```
<%
    Dim o = ParseData(Request.QueryString.Item("data"))
    Response.Write(o("id"))
    Response.Write("<br />")
    Response.Write(o("longitude"))
    Response.Write("<br />")
    Response.Write(o("latitude"))
    Response.Write("<br />")
    Response.Write(o("timestamp"))
    Response.Write("<br />")
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:24:40.430

我真的希望我正确理解了这个问题。我假设您需要名为 Data 的查询字符串键中每个键的值？为此，我使用了以下代码：

```
 Dim values() As String = Server.UrlDecode(Request.QueryString("data")).Replace("{", "").Replace("}", "").Split(New Char() {","}, StringSplitOptions.RemoveEmptyEntries)
    For Each value As String In values
        Dim keyValue() As String = value.Split(New Char() {":"}, StringSplitOptions.RemoveEmptyEntries)
        Response.Write(keyValue(0).Replace("""", "") & " : " & keyValue(1).Replace("""", "") & "<br/>")
    Next 
```

简而言之，我解码 QueryString("data")，替换大括号并使用逗号作为第一个拆分字符将字符串拆分为一个数组。然后我们最终得到一个包含以下格式“id”：“649403”的值的数组。

此后，我遍历这些值并根据分号 (:) 字符为每个值拆分最后一次。

使用此方法，您可以动态构建和操作数据。

**代码编辑**

我将所有“：”的引用替换为“=”，以确保正确检索时间戳，然后根据 = 拆分键值。如有必要，您可以使用选择案例将变量分配给值。（显然，请确保您的变量未在 select 中声明，因为它不会在正确的范围内供以后使用！）

```
If Request.QueryString("data") IsNot Nothing Then
    Dim values() As String = Request.QueryString("data").Replace("{", "").Replace("}", "").Replace(""":""", """=""").Split(New Char() {","}, StringSplitOptions.RemoveEmptyEntries)
    For Each value As String In values
        Dim keyValue() As String = value.Split(New Char() {"="}, StringSplitOptions.RemoveEmptyEntries)
        Response.Write(keyValue(0).Replace("""", "") & " : " & keyValue(1).Replace("""", "") & "<br/>")

        Select Case keyValue(0).ToLower()
            Case "id"
                Dim id As String = keyValue(1)
        End Select
    Next
End If 
```

**反射编辑**

创建对象的实例，然后检索其所有属性（Dim properties() As PropertyInfo = myObj.GetType().GetProperties()）。遍历属性并设置名称等于键的值。不要忘记导入 System.Reflection 库。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim data As String = "%7B%22id%22:%2269403%22,%22longitude%22:%22-143.406417%22,%22latitude%22:%2232.785834%22,%22timestamp%22:%2223-10%2010:12%22%7D"
    If data IsNot Nothing Then

        Dim myObj As New MyObject
        Dim properties() As PropertyInfo = myObj.GetType().GetProperties()
        Dim values() As String = Server.UrlDecode(data).Replace("{", "").Replace("}", "").Replace(""":""", """=""").Split(New Char() {","}, StringSplitOptions.RemoveEmptyEntries)
        For Each value As String In values
            Dim keyValue() As String = value.Split(New Char() {"="}, StringSplitOptions.RemoveEmptyEntries)
            For Each prop As PropertyInfo In properties
                If prop.Name.ToLower = keyValue(0).ToLower.Replace("""", "") Then
                    prop.SetValue(myObj, keyValue(1), Nothing)
                End If
            Next
        Next

        myObj.Save()
    End If
End Sub

Public Class MyObject
    Private _ID As String
    Private _Longitude As String
    Private _Latitude As String
    Private _Timestamp As String

    Public Property ID As String
        Get
            Return _ID
        End Get
        Set(value As String)
            _ID = value
        End Set
    End Property

    Public Property Longitude As String
        Get
            Return _Longitude
        End Get
        Set(value As String)
            _Longitude = value
        End Set
    End Property

    Public Property Latitude As String
        Get
            Return _Latitude
        End Get
        Set(value As String)
            _Latitude = value
        End Set
    End Property

    Public Property Timestamp As String
        Get
            Return _Timestamp
        End Get
        Set(value As String)
            _Timestamp = value
        End Set
    End Property

    Public Sub Save()
        'Save logic here
    End Sub
End Class 
```

# actionscript-3 - AS3 - 根据数组长度创建具有可自定义行和列值的网格？

> ID：12709038
> 
> 赞同：0
> 
> 时间：2012-10-03T12:59:12.650
> 
> 标签：actionscript-3, layout, grid, grid-layout

我正在开发一个布局插件，以将添加到**父**对象的所有项目以网格形式放置。我希望能够设置列、行、填充值。我将所有子对象推入一个数组，然后用**for**循环循环这些对象。我已经尝试使用双循环来检查对象需要放置的位置，但这总是给我**索引超出范围的**错误。目前我正在使用此代码来设置我的网格形成：

```
 var COLUMNS:int = vars.columns;
    var PADDING:Number = 10;

    for(var i:int = 0; i < childs.length; i++)
    {
        childs[i].x = (i % COLUMNS) * (childs[i].width + PADDING);
        childs[i].y = int(i / COLUMNS) * (childs[i].height + PADDING);
    } 
```

下面是我如何使用这个插件的一个例子： **注意：Draw 对象只返回一个尺寸为 150x150 的精灵**

```
 var container:Sprite = new Sprite();
    var obj1:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:Constants.GREEN});
    var obj2:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:0x2C2C2C});
    var obj3:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:Constants.BLACK});
    var obj4:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:Constants.GREEN});
    var obj5:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:Constants.GREEN});
    var obj6:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:0x2C2C2C});
    var obj7:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:Constants.BLACK});
    var obj8:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:Constants.GREEN});
    var obj9:Draw = new Draw({x:0 ,y:0 ,width:_width,height:_height, color:Constants.GREEN});

    addChild(container);
    container.addChild(obj1);
    container.addChild(obj2);
    container.addChild(obj3);
    container.addChild(obj4);
    container.addChild(obj5);
    container.addChild(obj6);
    container.addChild(obj7);
    container.addChild(obj9);

    Layout.setLayout(new GridLayout(container, {columns:4, rows:10, spacing:2})); 
```

任何人都知道如何使用**固定的列、行、间距创建更好的网格循环，其中所有对象都由较早填充的数组检索？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:47:12.343

我找到了如何完成这项工作！对于感兴趣的人：

**1) 绘制网格前检查**

```
 var cols:int = vars.columns;
    var rows:int = vars.rows;
    var spacing:int = vars.spacing;

    if((cols * rows) >= childs.length) {
        drawComplexGrid(rows, cols, spacing);
    } else {
        var val:int = Math.max(rows, cols);
        drawComplexGrid(val,(childs.length/val), spacing);
    } 
```

**2）实际绘制网格并检查数组是否为空（数组子元素已经填充了一些“绘制”对象**

```
private function drawComplexGrid(rows:int, cols:int, spacing:int):void
{
    for (var py:int = 0; py <rows; py++)
    {
        for (var px:int = 0; px <cols; px++)
        {
            if(childs.length > 0)
            {
                var child:* = childs.shift();

                child.x = (child.width + spacing) * px;
                child.y = (child.height + spacing) * py;

            } else {
                break;
            }

        }
    }
} 
```

# android - 我怎样才能有更多描述性的方向然后“未知道路”到Android中的“未知道路”

> ID：12709040
> 
> 赞同：1
> 
> 时间：2012-10-03T12:59:15.530
> 
> 标签：android, android-intent, maps, directions

我在地图上有物品，我想为这些物品指明方向。对于每张地图，我都有一个标题和一个地理点（纬度、经度）。我知道我可以使用以下方式发送路线意图：

```
Uri uri= Uri.parse( "http://maps.google.com/maps?saddr=" + currentLocation.getLatitude() + "," + currentLocation.getLongitude() + "&daddr="+mapItem.lat + "," + mapItem.lon );
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
mActivity.startActivity(intent); 
```

除了方向在“未知道路”和“未知道路”之间之外，这非常有效。我想知道是否可以传递地图项的标题以及“当前位置”，以便路线活动更具描述性。

目标是从“当前位置”到“白宫”的方向

# ios - UITableViewCell 旁边的 UISliderCell

> ID：12709042
> 
> 赞同：1
> 
> 时间：2012-10-03T12:59:18.563
> 
> 标签：ios, uitableview, positioning, uislider

我是 iOS 开发的初学者，我必须在同一个 UITableViewCell 中放置一个标签（左侧）、一个字幕（右侧）和一个中间的滑块。目前，标签和副标题位于滑块上方的单元格中。有什么办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:05:45.650

是的，您在使用 StoryBoards 吗？如果是这样，将单元格样式更改为自定义，然后将其他元素拖动到您想要的单元格中。

确保设置单元标识符名称

可以确保您稍后在 cellForRowAtIndexPath 中设置标签值以获取它们

例子：

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:"stateCell" forIndexPath:indexPath];

    UILabel *stateLabel = (UILabel *)[cell viewWithTag:1000];

    StateProvince *myState = [self.states objectAtIndex:indexPath.row];

    stateLabel.text = myState.label；}

# php - 按名称连接两个表以获取下拉列表

> ID：12709046
> 
> 赞同：1
> 
> 时间：2012-10-03T12:59:24.230
> 
> 标签：php, mysql, sql, join

我有一个脚本正在阅读我的车轮品牌。如果我选择一个轮子，它会显示该品牌的所有轮子...

但是因为我做了 GROUP BY merk_naam 所以在我的下拉列表中不会有 100 个相同的品牌，我不能全部展示它们......

有人可以帮我解决以下问题：

我现在有两张桌子：

表 1：it_merken

[表格1](http://imageshack.us/photo/my-images/525/table1d.png/)

表 2：it_merken2

[表 2](http://imageshack.us/photo/my-images/24/table1r.jpg/)

我想要下拉列表中的merk_naam

但是当我这样做时，在这个例子中我得到了很多像 AS 2 一样的双倍......

我想在一个查询中加入表 1 和表 2 的 merk_naam ......

我想不通怎么...

有人可以帮帮我吗？

这是我现在使用 GROUP BY 上的课程：

```
<?php

class merken extends connect
{   
    /**
     * Merken lijst
     * 
     * @param object
     */
    private $merkenlijst;

    /**
     * Vraag merken op uit database
     *
     * @param int $id
     * @return array
     */
    public function getMerken($database, $id = NULL)
    {
        $sql = "SELECT merk_code, merk_logo, merk_naam, wiel_foto, wiel_nummer, wiel_info FROM ".$database."_merken";
        if(!empty($id))
        {
            $sql .= " WHERE merk_code=:id"; 
        }
        else
        {
            $sql .= " GROUP BY merk_naam";
        }
        try
        {
            $stmt = $this->db->prepare($sql);
            if(!empty($id)){ $stmt->bindParam(":id", $id, PDO::PARAM_STR); }
            $stmt->execute();
            $this->merkenlijst = $stmt->fetchAll(PDO::FETCH_OBJ);
            $stmt->closeCursor();

            return $this->merkenlijst;
        }
        catch (Exception $e)
        {
            die ( $e->getMessage() );
        }
    }

    /**
     * Maak een database object en sla de data op
     *
     * @param object $dbo
     * @return void
     */
    public function __construct($dbo = NULL)
    {
        /*
         * Roep de parent constructor aan om te controleren op
         * een database object
         */
        parent::__construct($dbo);
    }
}

?> 
```

这在我的下拉列表中给了我每个品牌一次，但是当我什么都不选择时，我想显示所有品牌，因为我现在使用 GROUP BY，所以在提交后我只能看到每个品牌一个轮子。

这是我的 PHP 和 HTML：

```
<div class="bandwielkolom">
                        <form name="wielenzoeken" action="index.php?lang=<?php echo $lang; ?>&amp;p=<?php echo $_GET['p']; ?>#keuze" method="post">
                            <table class="wielentabel">
                                <tr>
                                    <th colspan="2"><?php echo $searchwheelsbybrand; ?><a name="wiel"></a></th>
                                </tr>
                                <tr>
                                    <td><?php echo $brand; ?>:</td>
                                    <td>
                                        <select name="wiel_merk" onchange="enable()">
                                            <option value="0">- <?php echo $brand; ?> -</option>
<?php
    $merken = $merkclass->getMerken($website, $merk);
    foreach($merken as $merk)
    {
        echo "\t\t\t\t\t\t\t\t\t\t\t<option value=\"".$merk->merk_code."\"";
        if(isset($_GET['search']) && $_GET['search'] == "wiel" && isset($_GET['merk']) && $_GET['merk'] != "0" || isset($_POST['wiel_submit']) && $_POST['wiel_merk'] != "0") { echo " selected=\"selected\""; }
        echo ">".$merk->merk_naam."</option>\n";
    }
?>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                    <td><input type="submit" name="wiel_submit" value="<?php echo $search; ?>"/></td>
                                </tr>
                                <tr>
                                    <td colspan="2">&nbsp;</td>
                                </tr>
                                <tr>
                                    <td colspan="2">&nbsp;</td>
                                </tr>
                            </table>
                        </form>
                        </div>
                    </div>
                    <div class="clearboth"></div>
                    <div id="main-right">             

<?php
foreach($teksten as $tekst)
{
    ?>
                    <h1><strong><?php echo $tekst->tekst_header; ?></strong></h1>
                    <?php echo $tekst->tekst_content."\n"; ?>
                    <?php
                        if(!empty($tekst->tekst_img))
    {
?>
                                                <div class="imgcontainer">
                        <div class="imgcontent">
                            <img src="<?php echo $tekst->tekst_img; ?>" class="content_image" alt="<?php echo $tekst->tekst_header; ?>" />
                        </div>
                    </div>
<?php
    }
?>

<?php
}

?>
</div>
</div>
                    <div class="clearboth"></div>
                    <div id="main-left">
                    <ul class="wheels">
<?php
if(isset($_POST['wiel_submit']) && $_POST['wiel_submit'] == $search || isset($_GET['merk']))
{
    $merk = NULL;
    if(isset($_POST['wiel_submit']) && $_POST['wiel_submit'] == $search)
    {
            echo "\t\t\t\t\t<h2>".$brandselection."</h2>
\t\t\t\t\t<br />\n";
        $merk = $_POST['wiel_merk'];
    }
?>
<?php

    $merken = $merkclass->getMerken($website, $merk);
        foreach($merken as $merk)
    {
?>
                                            <li><span class="title"><?php echo $merk->wiel_info; ?></span>
                            <a href="http://www.website.nl/website/images/w3/<?php echo $merk->wiel_foto; ?>" class="preview" title="Fotonummer: <?php echo $merk->wiel_foto;  ?>">
                                <img src="http://www.website.nl/website/images/w3/<?php echo $merk->wiel_foto; ?>" alt="Fotonummer: <?php echo $merk->wiel_foto; ?>" class="wheelImg"/>
                            </a>
                            <span class="descr">
                            <img src="http://www.website.net/preview/bnet/logos/<?php echo str_replace(".png", "_100.png", $merk->merk_logo); ?>" style="padding-left:45px;" width="100" class="logo-merk" alt="<?php echo $merk->merk_naam; ?>"/>
                            </span>
                                </li>                         
<?php
    }
?>
</ul>
<?php
}
?>
        </div> 
```

欢迎任何帮助，因为我无法弄清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:25:05.557

由于 SQL 中的某些字段不匹配，因此您获得了双打，因此您获得了每个字段的记录。

# c# - 为什么数据包发送不发送数据（与我的世界服务器握手）？

> ID：12709049
> 
> 赞同：2
> 
> 时间：2012-10-03T12:59:40.230
> 
> 标签：c#, sockets, packet, minecraft

我正在尝试使用数据包在 c# 中制作一个 Minecraft 假客户端，也就是 Minecraft 聊天机器人。我已经尝试了很多不同的方法来实现这一点，但没有运气。

每次我发送一个数据包时，它都不会发送任何数据（使用数据包嗅探器）。虽然数据包嗅探器说数据包的总大小是：190 字节。大小为：17 字节。

这是我的代码：

```
 static TcpClient client = new TcpClient();
    static void Main(string[] args)
    {
        Console.WriteLine("Start GATHERING INFO.....");

        Console.Write("Write a ip: ");
        IPAddress ip = IPAddress.Parse("192.168.178.11");
        try
        {
            ip = IPAddress.Parse(Console.ReadLine());
        }
        catch
        {
            Console.Write("\nUnknown/Wrong ip entered redirecting to :  127.0.0.1 (AKA Localhost)");
            ip = IPAddress.Parse("192.168.178.11");
        }
        Console.Write("\nWrite a port: ");
        int port = int.Parse(Console.ReadLine());

        Console.WriteLine("Connecting.....");

        try
        {
            client.Connect(ip, port);
            client.NoDelay = false;
            Console.WriteLine("Connection succesfull!");
        }catch
        {
            Console.WriteLine("--== ERROR WHILE TRYING TO CONNECT PLEASE RESTART PROGRAM ==--");
            Console.ReadKey();
            client.Close();
            Main(args);
        }

        Stream stream = client.GetStream();

        Console.Write("Please enter a username: ");
        string usrn = Console.ReadLine();
        Console.Write("\n");

        byte[] data = new byte[3 + usrn.Length*2];
        data[0] = (byte)2;
        data[1] = (byte)29;
        gb(usrn).CopyTo(data, 2);

        stream.Write(data, 0, data.Length);

        Console.ReadKey();

    }

    public static byte[] gb(String str)
    {
        return System.Text.ASCIIEncoding.ASCII.GetBytes(str);
    } 
```

以下是数据包的外观：

[http://www.wiki.vg/Protocol#Handshake_.280x02.29](http://www.wiki.vg/Protocol#Handshake_.280x02.29)

我忽略了服务器主机和服务器端口，因为其他机器人没有使用它。（虽然他们没有工作：/

以下是原始客户端数据包的内容：

'显示奇怪的 goto：[https](https://dl.dropbox.com/u/32828727/packetsocketsminecraft.txt) ://dl.dropbox.com/u/32828727/packetsocketsminecraft.txt '

timboiscool9（我的用户名）192.168.178.1（服务器ip）

在那之后还有更多，但这就是我需要的。

我对套接字和 tcpclients 相当陌生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:24:58.987

我清理了你的代码：

```
 static void Main(string[] args)
    {
        bool keepTrying = true;
        while (keepTrying)
        {
            Console.Write("Enter server IP Address: ");
            IPAddress ip;
            if(!IPAddress.TryParse(Console.ReadLine(), out ip))
            {
                Console.WriteLine("Invalid ip entered, defaulting to 192.168.178.11");
                ip = IPAddress.Parse("192.168.178.11");
            }

            Console.Write("Enter server port: ");
            Int16 port;
            if(!Int16.TryParse(Console.ReadLine(), out port))
            {
                Console.WriteLine("Invalid port entered, defaulting to 1234");
                port = 1234;
            }

            Console.WriteLine("Connecting.....");

            try
            {
                TcpClient client = new TcpClient();
                client.Connect(new IPEndPoint(ip, port));
                client.NoDelay = false;
                Console.WriteLine("Connection succesfull!");

                List<byte> data = new List<byte>() { 2, 29 };
                Console.Write("Please enter a username: ");
                byte[] userName = ASCIIEncoding.ASCII.GetBytes(Console.ReadLine());
                data.AddRange(userName);

                using (var stream = client.GetStream())
                {
                    stream.Write(data.ToArray(), 0, data.Count);
                    Console.Write("Data sent!");
                }
                keepTrying = false;
            }
            catch
            {
                Console.WriteLine("--== ERROR CONNECTING ==--");
                Console.WriteLine();
            }
        }
    } 
```

至于您最初的问题，我们需要更多信息。你说数据包嗅探器没有显示数据，但你说数据有大小。那么您是否看到数据？你确定服务器已经启动了吗？我发布的代码对我有用，这意味着它连接到我本地系统上的服务器并发送字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:00:25.763

这有点老了，但我还是会看看我是否可以帮助你。

Minecraft 协议相当复杂，如果不实现绝大多数协议，您将无法连接到 Minecraft 服务器。可以在[此处](http://wiki.vg)找到协议详细信息。

我建议你考虑走不同的路线。由于 Minecraft 的复杂性，我会避免自己实现它。幸运的是，我是 Minecraft 爱好者，我已经为你完成了大部分工作。我建议你看看[Craft.Net](https://github.com/SirCmpwn/Craft.Net)库。它包含一个完整的协议实现，并且从中制作一个聊天机器人将是微不足道的。事实上，[这里有](https://github.com/SirCmpwn/ExampleGraphicalClient)一个使用 Craft.Net 的示例聊天程序供您细读。

# vba - 如何替换列中的所有错误值

> ID：12709054
> 
> 赞同：1
> 
> 时间：2012-10-03T12:59:52.090
> 
> 标签：vba, excel

我有一个使用索引和匹配函数填充的列，当找不到该值时，它会导致 N/A 值。我希望能够用特殊值替换列中的所有此类错误值。我想在 VBA 代码中执行此操作。有什么帮助吗？

我不想用 IF 逻辑重写函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:11:43.227

你真的可以在没有 VBA 的情况下做到这一点，方法如下：

`IFERROR(myIndexMatchFormula,"special value")`

如果您真的需要 VBA 解决方案，请尝试以下方法。它将找到您范围内的所有错误单元格并替换为您选择的内容。没有`If`语句，没有循环！

```
Option Explicit

Sub replaceErrors()

Dim rng As Range

On Error Resume Next

Set rng = Range("A1:A10").SpecialCells(xlCellTypeFormulas, 16) ' -> replace with your specific range

rng.Value = "special values" '-> place what you want here

On Error GoTo 0

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:12:26.987

`Columns("E").SpecialCells(xlCellTypeFormulas, xlErrors).Value = ""` 例如，可以替换 E 列中的所有错误。然而，不幸的是，如果 specialcells 什么也没找到，它总是会抛出一个错误，所以你*必须*通过一些来捕获这个错误`on error ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:06:06.647

如果`r`是需要检查的范围，您可以随时使用以下内容来识别单元格中的值是否为“N/A”

```
If r.Value = CVErr(xlErrNA) Then
    ... ' do something
Else
    ... ' do something else
Endif 
```

# php - 使用下拉框优化结果

> ID：12709058
> 
> 赞同：0
> 
> 时间：2012-10-03T13:00:10.160
> 
> 标签：php

我想使用下拉框细化 mysql 查询的结果......现场网站在这里： [http ://www.halfwayenterprises.com/search/tyrell.php](http://www.halfwayenterprises.com/search/tyrell.php)

```
 <form name="doublecombo" action="" method="POST">

    <label for="status">Status:</label>

<label for="current">
<input class="radio_style" id="current" checked="checked" name="status" type="radio" value="current">
Current
</label>

<label for="obsolete">
<input class="radio_style" id="obsolete" name="status" type="radio" value="obsolete">
Obsolete
</label>

<label for="both">
<input class="radio_style" id="both" name="status" type="radio" value="both">
ALL
</label>

<br /><br />

<select name="category" size="1" onChange="redirect(this.options.selectedIndex)">
<option value="null">Category</option>
<option value="asset management">Asset Management</option>
<option value="budget">Budget/Finance</option>
<option value="central office">Central Office</option>
<option value="disposal">Disposal</option>
</select>

<select name="subcategory">
<option value="null">Sub-Category</option>
<option value="Portfolio">Portfolio</option>
<option value="Pricing">Pricing</option>
<option value="Valuation">Valuation</option>

<option value="Disposal">Disposal</option>

</select>
<input name="submitted" type="submit" value="GO">

<br />

Seach for: <input type="text" name="find" /> in 
<Select NAME="field">
<Option id="title" VALUE="title">Title</option>
<Option id="poc" VALUE="poc">POC</option>
<Option id="purpose" VALUE="purpose">Purpose</option>

</Select>

<input type="hidden" name="searching" value="yes" />

<input name="submitted" type="submit" value="GO">

</form>

<select name="filter1">
<option value="az">Sort by A-Z</option>
<option value="date">Sort by Date</option>
</select>

<select name="filter2">
<option value="office">Sort by Office</option>
<option value="p">P</option>
<option value="pt">PT</option>
<option value="pf">PF</option>
</select>

<select name="filter3">
<option value="mandatory">Mandatory</option>
<option value="nonmandatory">Non-Mandatory</option>
<option value="combined">Combined</option>
</select>

</form>

</p>

<script>
<!--

/*
Double Combo Script Credit
By JavaScript Kit (www.javascriptkit.com)
Over 200+ free JavaScripts here!
*/

var groups=document.doublecombo.category.options.length
var group=new Array(groups)
for (i=0; i<groups; i++)
group[i]=new Array()

group[0][0]=new Option("Sub Category")

group[1][0]=new Option("Portfolio")
group[1][1]=new Option("Pricing")
group[1][2]=new Option("Valuation")

group[3][0]=new Option("Central Office")
group[4][0]=new Option("Disposal")

var temp=document.doublecombo.subcategory

function redirect(x){
for (m=temp.options.length-1;m>0;m--)
temp.options[m]=null
for (i=0;i<group[x].length;i++){
temp.options[i]=new Option(group[x][i].text,group[x][i].value)
}
temp.options[0].selected=true
}

function go(){
location=temp.options[temp.selectedIndex].value
}
//-->
</script>

<?

mysql_connect("localhost", "name", "pasword") or die(mysql_error()); 
mysql_select_db("db") or die(mysql_error()); 

if(isset($_POST["submitted"])){

$status = $_POST['status'];

$category = $_POST['category'];
$subcategory = $_POST['subcategory'];

echo '<div class="status_div">';

if($status=='current')

{
echo "<h2>Results</h2><p>";

$res = mysql_query("SELECT * FROM material WHERE status='$status' AND category='$category' AND subcategory='$subcategory' ORDER BY `documentid` ASC");

while ($row = mysql_fetch_assoc($res)) {

echo '<div class="current">';

echo $row ['documentid'].' - '.$row['category'].' - '.$row['title'].' - '.$row['status'];

echo '</div>';

echo '<br>';

}

} if ($status=='obsolete')

{
echo "<h2>Results</h2><p>";
$res = mysql_query("SELECT * FROM material WHERE status='$status' AND category='$category' ORDER BY `documentid` ASC ");

while ($row = mysql_fetch_assoc($res)) {

echo $row ['documentid'].' - '.$row['category'].' - '.$row['title'].' - '.$row['status'];

echo '<br>';

} 

} if ($status=='both')  

{

echo "<h2>Results</h2><p>";
$res = mysql_query("SELECT * FROM material WHERE status1='both' AND category='$category' ORDER BY `documentid` ASC");

while ($row = mysql_fetch_assoc($res)) {
echo '<div class="">';

echo $row ['documentid'].' - '.$row['category'].' - '.$row['title'].' - '.$row['status'];

echo '</div>';

echo '<br>';

} 

}

echo '</div>';

}

$field = @$_POST['field'] ;
$find = @$_POST['find'] ;
$searching = @$_POST['searching'] ;
$status = $_POST['status'];

//This is only displayed if they have submitted the form 
if ($searching =="yes") 
{ 
echo "<h2></h2><p>"; 

//If they did not enter a search term we give them an error 
if ($find == "") 
{ 

echo "<a href='tyrell.htm'>Return</a>";
exit; 
} 

// We preform a bit of filtering 
$find = strtoupper($find); 
$find = strip_tags($find); 
$find = trim ($find); 

//Now we search for our search term, in the field the user specified 

if($status=='current'){

$data = mysql_query("SELECT * FROM material WHERE status='$status' AND lower($field) LIKE'%$find%' LIMIT 0,30");

while ($row = mysql_fetch_assoc($data)) {

echo '<div class="current">';

echo $row ['documentid'].' - '.$row['category'].' - '.$row['title'].' - '.$row['status'];

echo '</div>';

echo '<br>';

}

}

if ($status=='obsolete'){

$data = mysql_query("SELECT * FROM material WHERE status='$status' AND lower($field) LIKE'%$find%' LIMIT 0,30");

while ($row = mysql_fetch_assoc($data)) {

echo '<div class="obsolete">';

echo $row ['documentid'].' - '.$row['category'].' - '.$row['title'].' - '.$row['status'];

echo '</div>';

echo '<br>';

} 

} if ($status=='both'){

$data = mysql_query("SELECT * FROM material WHERE status1='both' AND lower($field) LIKE'%$find%' LIMIT 0,30");

while ($row = mysql_fetch_assoc($data)) {

echo '<div class="">';

echo $row ['documentid'].' - '.$row['category'].' - '.$row['title'].' - '.$row['status'];

echo '</div>';

echo '<br>';

} 

}

//This counts the number or results - and if there wasn't any it gives them a little message explaining that 
$anymatches=mysql_num_rows($data); 
if ($anymatches == 0) 
{ 
echo "Sorry, but we can not find an entry to match your query<br><br>"; 
} 

//And we remind them what they searched for 
echo "<b>Searched For:</b> " .$find; 
} 

?>

<p align="center"><font face="arial" size="-2">This free script provided by</font><br>
<font face="arial, helvetica" size="-2"><a href="http://javascriptkit.com">JavaScript
Kit</a></font></p>'
</body>
</html> 
```

我想不出如何在没有提交按钮的情况下使用下拉菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:15:18.730

我想我知道您需要什么...使用 jquery 在您的页面上提交表单。

像这样的东西...

```
$("submitted").click(function() {

    var url = "file.php";

    $.ajax({
           type: "POST",
           url: url,
           data: $("doublecombo").serialize(), // serializes the form's elements.
           success: function(data)
           {
               // populate box or div with your result
           }
         });

    return false; // avoid reload.
}); 
```

//PHP部分

```
 if($_POST['someField']){

    $result = //Do query and staff and return any type of resposne you will handle in ajax success

    echo $result;
    exit;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:08:34.650

您可以使用 JavaScript 来操作下拉列表的内容。您需要做的就是在单选按钮上绑定单击，当其中一个被单击时，使用 Ajax 调用从 SQL 数据库中检索信息并修改选择框的内容。

*编辑*

以下是您可以添加到页面的一些代码：

```
$('form[name=doublecombo] input').change(function() {

    $('form[name=doublecombo]').submit();
}); 
```

请注意，这`change`可能不起作用。如果没有，请尝试`click`改用。

# actionscript-3 - 字符串比较闪存 AS3

> ID：12709059
> 
> 赞同：-1
> 
> 时间：2012-10-03T13:00:10.647
> 
> 标签：actionscript-3, flash, flash-cs5

我在 UI 中有一个输入文本字段。

当用户键入“GIRAFFEEE”、“GIRAFEAAA”或“GIRAFFE123”并提交时。分数值应为 0。但它返回 1。

如何正确比较区分大小写的字符串？

```
qns1 = qns1_txt.text.toLowerCase();
qns1Ans = "giraffe"
//.toLowerCase();
if (qns1 == qns1Ans)
{
    score = 1;
}
else
{
    score = 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:26:00.570

如果您测试以下内容：

```
var correct:String = "giraffe";
var userAns:String = "giraffeaaaa";

trace(correct == userAns);//false - as expected 
```

这意味着字符串比较有效:)

我假设您的测试代码位于文本字段的 CHANGE 事件中，这可能会导致误报，因为用户可能会键入正确答案的一部分，我认为您应该执行一个功能：

```
function validate()
{
    qns1 = qns1_txt.text.toLowerCase();
    qns1Ans = "giraffe"

    score = 0;
    if(qns1 == qns1Ans)
    {
        score = 1;
    }
} 
```

并在用户点击提交时调用它，您还可以比较字符串的长度，但等号运算符就可以了。

# python - 带有 if 但没有 else 的 Python lambda

> ID：12709062
> 
> 赞同：50
> 
> 时间：2012-10-03T13:00:18.090
> 
> 标签：python, lambda, inline-if

我正在编写一些 lambda 函数，但无法弄清楚。有没有办法`lambda x: x if (x<3)`在python中有类似的东西？`lambda a,b: a if (a > b) else b`工作正常。到目前为止`lambda x: x < 3 and x or None`似乎是我发现的最接近的。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-03T13:05:54.687

与任何函数一样，lambda 必须有返回值。

`lambda x: x if (x<3)`不起作用，因为它没有指定如果没有返回什么`x<3`。默认情况下函数 return `None`，所以你可以这样做

```
lambda x: x if (x<3) else None 
```

* * *

但也许您正在寻找的是带有`if`条件的列表理解。例如：

```
In [21]: data = [1, 2, 5, 10, -1]

In [22]: [x for x in data if x < 3]
Out[22]: [1, 2, -1] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-10T19:17:08.627

我发现这`filter`正是我在 python 2 中寻找的东西：

```
>>> data = [1, 2, 5, 10, -1]
>>> filter(lambda x: x < 3, data)
[1, 2, -1] 
```

[2.x](https://docs.python.org/2/library/functions.html#filter)和[3.x](https://docs.python.org/3/library/functions.html#filter)的实现不同：2.x 提供列表，3.x 提供迭代器。在 3.x 中使用[列表推导](https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)可能会更简洁：

```
>>> data = [1, 2, 5, 10, -1]
>>> [filter(lambda x: x < 3, data)]
[1, 2, -1] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-03T13:04:48.093

有什么问题`lambda x: x if x < 3 else None`？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-07T23:51:53.563

您始终可以尝试调用“过滤器”进行条件检查。从根本上说，`map()`必须处理每次出现的迭代，所以它不能挑选。但过滤器可能有助于缩小选择范围。例如，我创建了一个从 1 到 19 的列表，但想创建一个只有偶数平方的元**组。**

```
x = list(range(1,20))

y = tuple(map(lambda n: n**2, filter(lambda n: n%2==0,x)))

print (y) 
```

# function - Haskell 使用 map 和组合函数

> ID：12709063
> 
> 赞同：0
> 
> 时间：2012-10-03T13:00:33.813
> 
> 标签：function, haskell, map, functional-programming, composition

好吧，即使我知道它在做什么，我也无法弄清楚这个...

```
let t = ["APE", "MONKEY", "DONKEY"] 
```

现在考虑三种情况：

```
map (length.group) t
(map length.group) t
map (map length.group) t 
```

这将返回以下三个答案：

```
[3,6,6]
[1,1,1]
[[1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1]] 
```

现在，有人可以向我详细解释发生了什么。这个问题的一个关键部分是，我假设 map 需要一个列表来处理，并且例如在第三种情况下我没有看到两个 map 被传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:09:25.190

```
map (length.group) t 
```

这组成了函数`length`和`group`。结果是一个函数，它接受一个列表（字符串）并返回该列表中“组”的数量（其中组是相同字符重复 1 次或多次的序列，因此“abc”包含 3 个组，因此“aabbcc”）。

然后将此函数应用于`t`using中的每个字符串`map`。

```
(map length.group) t 
```

这里函数`map length`（获取列表列表中每个子列表的长度）与函数`group`组合，组合函数应用于`t`. 换句话说，它与`map length (group t)`.

```
map (map length.group) t 
```

这里函数`map length . group`应用于 中的每个字符串`t`，即针对中`map length (group str)`的每个字符串计算。`str``t`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:11:30.887

尝试`length.`从所有案例中删除“”，看看是否有助于回答您的问题。它会简化问题，答案可能会更好地向您展示正在发生的事情。

或者，考虑到第三个，它变成

```
map (map length.group) ["APE", "MONKEY", "DONKEY"]
--make parse order explicit
map ((map length) . group) ["APE", "MONKEY", "DONKEY"]
--do mapping
[((map length) . group) "APE", ((map length) . group) "MONKEY", ((map length) . group) "DONKEY"]
--use (f.g) x == f (g x)
[(map length) (group "APE"), ...]
[(map length) ["A", "P", "E"], ...]
[[1, 1, 1], ...] 
```

还可以尝试使用“EEL”或“BEE”或“LLAMA”等动物来查看最终结果中除 1 以外的任何内容。

# sql - SQL 通过泛型关系选择表

> ID：12709070
> 
> 赞同：1
> 
> 时间：2012-10-03T13:01:03.203
> 
> 标签：sql, sql-server

在关系数据库中，我有三个表。使用 SQL Server。

```
person(id, type)
student(id, person_id, type, student specific fields)
teacher(id, person_id, type, teacher specific fields) 
```

学生和老师都是人，因此学生和老师都会在个人和学生表中都有记录。学生和老师对人有外键。学生和老师有不同的领域定义，因此联合将不起作用。

现在我有了这个人的 id，根据这个人是学生还是老师，我想从相关表（不是人）中选择 *。

例如，如果此人是学生，我希望我的查询选择学生表。

我可以想到一些低效的方法，但我正在寻找最佳的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:03:43.137

我建议一个 UNION

```
 SELECT student.* 
 FROM student
 WHERE person_id= @id
 UNION
 SELECT teacher.* 
 FROM teacher
 WHERE person_id= @id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:45:57.270

```
if exists(select person_id from student where person_id = @id)
select * from student where person_id = @id
else
if exists(select person_id from teacher where person_id = @id)
select * from teacher where person_id = @id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:46:25.943

如果您的 RDBMS 是`SQLServer`，那么我将按照 podiluska 的联合线抽象一个视图，将 Student 和 Teacher 中的特定字段映射到通用名称，并在无法映射的情况下使用 NULL 填充

并假设学生和教师从人继承（即两者都是 0..1 到 1 与人），那么他们可以共享相同的主键，即不需要教师和学生的新代理键。

我假设这`person.type`决定了这个人是学生（S）还是教师（T）。

```
CREATE VIEW SubClassesOfPerson AS
   SELECT p.id as PersonId, 
          p.name as PersonName, 
          p.OtherBaseFieldsHere, 
          s.SomeStudentSpecificField AS MappedField1,
          s.SomeStudentSpecificFieldX AS MappedFieldX,
          s.SomeStudentSpecificField as MappedFieldForStudentOnly,
          NULL as MappedFieldForTeacherOnly -- Pad this because it can't be mapped
   FROM person p 
      INNER JOIN student s
      on s.person_id = p.id AND p.type = 'S'

   UNION

   SELECT p.id as PersonId, 
          p.name as PersonName, 
          p.OtherBaseFieldsHere, 
          t.SomeTeacherSpecificField AS MappedField1,
          t.SomeTeacherSpecificFieldX AS MappedFieldX,
          NULL as MappedFieldForStudentOnly,  -- Pad this because it can't be mapped
          t.SomeTeacherSpecificField as MappedFieldForTeacherOnly
   FROM person p 
      INNER JOIN teacher t
      on t.person_id = p.id AND p.type = 'T' 
```

# typescript - 你如何在 TypeScript 的“window”上显式设置一个新属性？

> ID：12709074
> 
> 赞同：975
> 
> 时间：2012-10-03T13:01:15.793
> 
> 标签：typescript

我通过显式设置属性为我的对象设置全局命名空间`window`。

```
window.MyNamespace = window.MyNamespace || {}; 
```

TypeScript 强调`MyNamespace`并抱怨：

> “窗口”类型的值上不存在属性“MyNamespace”任何“

`MyNamespace`我可以通过声明为环境变量并删除显式性来使代码工作，`window`但我不想这样做。

```
declare var MyNamespace: any;

MyNamespace = MyNamespace || {}; 
```

我怎样才能`window`留在那里并让 TypeScript 开心呢？

作为旁注，我发现 TypeScript 抱怨特别有趣，因为它告诉我那`window`是`any`绝对可以包含任何东西的类型。

* * *

## 回答 #1

> 赞同：1128
> 
> 时间：2012-10-03T13:46:44.400

我刚刚在[另一个 Stack Overflow question's answer](https://stackoverflow.com/a/12703866/31308)中找到了答案。

```
declare global {
    interface Window { MyNamespace: any; }
}

window.MyNamespace = window.MyNamespace || {}; 
```

基本上，您需要扩展现有`window`接口来告诉它您的新属性。

* * *

## 回答 #2

> 赞同：515
> 
> 时间：2015-06-09T19:18:26.133

要保持动态，只需使用：

```
(<any>window).MyNamespace 
```

请注意，这可能不适用于 TSX，因为编译器可能认为`<any>`是 TSX 元素。查看[此答案](https://stackoverflow.com/a/38964459/1250319)以了解与 TSX 兼容的类型断言。

* * *

## 回答 #3

> 赞同：267
> 
> 时间：2016-08-15T23:25:22.107

使用 Svelte 还是 TSX？其他答案都不适合我。

这是我所做的：

```
(window as any).MyNamespace 
```

* * *

## 回答 #4

> 赞同：223
> 
> 时间：2012-11-20T19:36:21.393

***从 TypeScript ^3.4.3 开始，此解决方案不再有效***

或者...

你可以输入：

```
window['MyNamespace'] 
```

而且您不会收到编译错误，它的工作方式与输入相同`window.MyNamespace`。

* * *

## 回答 #5

> 赞同：110
> 
> 时间：2017-07-27T13:28:39.760

全局变量是“邪恶的” :) 我认为获得可移植性的最佳方法是：

首先你导出界面：（例如，*./custom.window.ts*）

```
export interface CustomWindow extends Window {
    customAttribute: any;
} 
```

二、你进口

```
import {CustomWindow} from './custom.window.ts'; 
```

三、用CustomWindow强制转换全局变量window：

```
declare let window: CustomWindow; 
```

*这样，如果您将它与窗口*对象的现有属性一起使用，则在不同的 IDE 中也没有红线，所以最后尝试：

```
window.customAttribute = 'works';
window.location.href = '/works'; 
```

使用 TypeScript 2.4.x 和最新版本进行测试！

* * *

## 回答 #6

> 赞同：81
> 
> 时间：2013-08-27T21:22:53.927

接受的答案是我以前使用的答案，但是使用 TypeScript 0.9.* 它不再有效。接口的新定义`Window`似乎完全取代了内置定义，而不是对其进行扩充。

我已经开始这样做了：

```
interface MyWindow extends Window {
    myFunction(): void;
}

declare var window: MyWindow; 
```

**更新：**使用 TypeScript 0.9.5，接受的答案再次起作用。

* * *

## 回答 #7

> 赞同：79
> 
> 时间：2017-03-21T13:38:46.957

对于那些使用**Angular CLI**的人来说，这很简单：

文件*src/polyfills.ts*

```
declare global {
  interface Window {
    myCustomFn: () => void;
  }
} 
```

文件*my-custom-utils.ts*

```
window.myCustomFn = function () {
  ...
}; 
```

如果您使用的是[IntelliJ IDEA](https://en.wikipedia.org/wiki/IntelliJ_IDEA)，您还需要在 IDE 中更改以下设置，然后才能使用新的[polyfill](https://en.wikipedia.org/wiki/Polyfill_(programming))：

```
> File
> Settings
> Languages & Frameworks
> TypeScript
> check 'Use TypeScript Service'. 
```

* * *

## 回答 #8

> 赞同：59
> 
> 时间：2016-10-23T15:24:04.003

如果需要`window`使用需要使用的自定义类型来扩展对象`import`，可以使用以下方法：

**窗口.d.ts**

```
import MyInterface from './MyInterface';

declare global {
    interface Window {
        propName: MyInterface
    }
} 
```

请参阅手册的“声明合并”部分中的[全局增强](https://www.typescriptlang.org/docs/handbook/declaration-merging.html#global-augmentation)。

* * *

## 回答 #9

> 赞同：44
> 
> 时间：2017-05-19T03:26:24.543

大多数其他答案并不完美。

*   其中一些只是抑制了 show 的类型推断。
*   其他一些只关心全局变量作为命名空间，而不是接口/类

今天早上我也遇到了类似的问题。我在 Stack Overflow 上尝试了很多“解决方案”，但没有一个绝对不会产生类型错误，并且在 IDE（[WebStorm](https://en.wikipedia.org/wiki/JetBrains#WebStorm)或[Visual Studio Code](https://en.wikipedia.org/wiki/Visual_Studio_Code)）中启用了触发类型跳转。

最后，来自*[允许将模块定义声明为全局变量 #3180](https://github.com/Microsoft/TypeScript/issues/3180#issuecomment-102523512)*

我找到了一个合理的解决方案来**为作为接口/类和命名空间的全局变量附加类型**。

示例如下：

```
// typings.d.ts
declare interface Window {
    myNamespace?: MyNamespace & typeof MyNamespace
}

declare interface MyNamespace {
    somemethod?()
}

declare namespace MyNamespace {
    // ...
} 
```

上面的代码将命名空间`MyNamespace`和接口的类型`MyNamespace`合并到全局变量`myNamespace`（*window*的属性）中。

* * *

## 回答 #10

> 赞同：40
> 
> 时间：2020-01-09T19:50:47.813

创建一个名为 的文件`global.d.ts`，例如 ，`/src/@types/global.d.ts`然后定义一个接口，如：

```
interface Window {
  myLib: any
} 
```

参考：*[全球 .d.ts](https://www.typescriptlang.org/docs/handbook/declaration-files/templates/global-d-ts.html)*

* * *

## 回答 #11

> 赞同：35
> 
> 时间：2018-06-06T13:13:12.333

我不需要经常这样做。我遇到的唯一情况是使用[Redux DevTools](https://github.com/zalmoxisus/redux-devtools-extension)和中间件。

我只是做了：

```
const composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose; 
```

或者你可以这样做：

`let myWindow = window as any;`

进而`myWindow.myProp = 'my value';`

* * *

## 回答 #12

> 赞同：19
> 
> 时间：2017-03-16T17:38:24.857

在找到答案后，我认为此页面可能会有所帮助：

*[全局增强](https://www.typescriptlang.org/docs/handbook/declaration-merging.html#global-augmentation)*

我不确定声明合并的历史，但它解释了为什么以下可以工作。

```
declare global {
    interface Window { MyNamespace: any; }
}

window.MyNamespace = window.MyNamespace || {}; 
```

* * *

## 回答 #13

> 赞同：16
> 
> 时间：2019-06-18T19:01:08.130

TypeScript 不对字符串属性执行类型检查。

```
window["newProperty"] = customObj; 
```

理想情况下，应该避免全局变量场景。我有时用它来调试浏览器控制台中的对象。

* * *

## 回答 #14

> 赞同：16
> 
> 时间：2021-02-24T11:59:40.153

从 3.4 版开始，TypeScript 已支持`globalThis`. 请参阅*[globalThis 的类型检查](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-4.html#type-checking-for-globalthis)*。

*从上面的链接*：

```
// in a global file:
var abc = 100;
// Refers to 'abc' from above.
globalThis.abc = 200;
window.abc = 300; // window object can also be used. 
```

[操场](https://www.typescriptlang.org/play?ts=4.3.5#code/G4QwTgBCBGDGEF4IEYAMqDcAoA5gGwHtoQ8AVACwEsBnAOhniQCZ1sB3SgOwBMC364iCAGZWWLEA)

“全局”文件是没有任何导入/导出语句的文件。所以声明`var abc;`可以写成*.d.ts*。

* * *

## 回答 #15

> 赞同：15
> 
> 时间：2020-03-04T02:51:37.437

使用 create-react-app v3.3 我发现实现这一点的最简单方法是扩展`Window`自动生成的类型`react-app-env.d.ts`：

```
interface Window {
    MyNamespace: any;
} 
```

* * *

## 回答 #16

> 赞同：14
> 
> 时间：2016-11-19T21:31:52.870

如果您使用的是[TypeScript 定义管理器](https://github.com/typings/typings)，请按照以下步骤操作！

```
npm install typings --global 
```

创建`typings/custom/window.d.ts`：

```
interface Window {
  MyNamespace: any;
}

declare var window: Window; 
```

安装您的自定义类型：

```
typings install file:typings/custom/window.d.ts --save --global 
```

完毕！用它！TypeScript 不会再抱怨了：

```
window.MyNamespace = window.MyNamespace || {}; 
```

* * *

## 回答 #17

> 赞同：14
> 
> 时间：2019-02-12T21:50:41.787

如果您使用的是 TypeScript 3.x，则可以省略`declare global`其他答案中的部分，而只需使用：

```
interface Window {
  someValue: string
  another: boolean
} 
```

在使用 TypeScript 3.3、[Webpack](https://en.wikipedia.org/wiki/Webpack)和[TSLint](https://palantir.github.io/tslint/)时，这对我有用。

* * *

## 回答 #18

> 赞同：13
> 
> 时间：2020-07-13T04:07:43.447

使用

```
window["MyNamespace"] = window["MyNamespace"] || {}; 
```

应该没问题，因为它使用的是字符串属性，但是如果你真的想要一个单独的窗口并组织你的代码，你可以**扩展**窗口对象：

```
interface MyNamespacedWindow extends Window {
    MyNamespace: object;
}

declare var window: MyNamespacedWindow; 
```

* * *

## 回答 #19

> 赞同：10
> 
> 时间：2019-05-31T22:41:02.710

首先，您需要在当前范围内声明窗口对象。因为 TypeScript 想知道对象的类型。由于*窗口*对象是在其他地方定义的，因此您不能重新定义它。

但是你可以声明如下：

```
declare var window: any; 
```

这不会重新定义 window 对象，也不会创建另一个具有 name 的变量`window`。这意味着*窗口*是在其他地方定义的，您只是在当前范围内引用它。

然后您可以简单地通过以下方式引用您的 MyNamespace 对象：

```
window.MyNamespace 
```

`window`或者您可以简单地通过以下方式在对象上设置新属性：

```
window.MyNamespace = MyObject 
```

现在 TypeScript 不会抱怨了。

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2017-04-20T15:50:22.427

供参考（这是正确答案）：

在`.d.ts`定义文件中

```
type MyGlobalFunctionType = (name: string) => void 
```

如果您在浏览器中工作，您可以通过重新打开 Window 的界面将成员添加到浏览器的窗口上下文中：

```
interface Window {
  myGlobalFunction: MyGlobalFunctionType
} 
```

Node.js 的想法相同：

```
declare module NodeJS {
  interface Global {
    myGlobalFunction: MyGlobalFunctionType
  }
} 
```

现在您声明根变量（实际上将存在于窗口或全局上）：

```
declare const myGlobalFunction: MyGlobalFunctionType; 
```

然后在一个常规`.ts`文件中，但作为副作用导入，您实际上实现了它：

```
global/* or window */.myGlobalFunction = function (name: string) {
  console.log("Hey !", name);
}; 
```

最后在代码库的其他地方使用它，其中之一是：

```
global/* or window */.myGlobalFunction("Kevin");

myGlobalFunction("Kevin"); 
```

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2018-11-12T07:29:48.543

创建一个扩展 Window 的自定义接口，并将您的自定义属性添加为可选。

然后，让 customWindow 使用自定义界面，但重视与原始窗口。

它适用于 TypeScript 3.1.3。

```
interface ICustomWindow extends Window {
  MyNamespace?: any
}

const customWindow:ICustomWindow = window;

customWindow.MyNamespace = customWindow.MyNamespace {} 
```

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2019-02-13T00:15:34.730

对于那些想要在`window`对象上设置计算或动态属性的人，您会发现使用该方法是不可能的`declare global`。澄清这个用例

```
window[DynamicObject.key] // Element implicitly has an 'any' type because type Window has no index signature 
```

你可能会尝试做这样的事情

```
declare global {
  interface Window {
    [DyanmicObject.key]: string; // error RIP
  }
} 
```

以上会出错。这是因为在 TypeScript 中，接口不能很好地处理计算属性，并且会抛出类似的错误

```
A computed property name in an interface must directly refer to a built-in symbol 
```

为了解决这个问题，你可以接受casting `window`to的建议，`<any>`这样你就可以做到

```
(window as any)[DynamicObject.key] 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2018-08-01T11:29:02.267

我今天想在 Angular (6) 库中使用它，我花了一段时间才让它按预期工作。

为了让我的库使用声明，我必须使用`d.ts`文件的扩展名来声明全局对象的新属性。

所以最后，该文件最终得到如下内容：

`/path-to-angular-workspace/angular-workspace/projects/angular-library/src/globals.d.ts`

一旦创建，不要忘记在你的`public_api.ts`.

那是为我做的。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2022-01-11T16:32:33.607

# 完整和简短的答案

## 1-将`typeRoots`属性添加到`tsconfig.json`：

```
{
  "compilerOptions": {
    ...
    "typeRoots": ["src/@types", "node_modules/@types"]
    ...
  }
} 
```

## 2- 扩展`Window`型

```
// file: src/@types/global.d.ts

declare global {
    interface Window { customProperty: <type>; }
} 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2022-01-16T07:47:20.917

```
(window as { test: string } & Window & typeof globalThis).test = `Hello World`; 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2022-01-27T03:44:28.973

```
// In typings.d.ts(is Global)
export declare global {
    interface Window {
        __PUBLIC__: string;
    }
} 
```

[![在此处输入图像描述](../Images/57976da34f2e13b4feb743f3768dc73a.png)](https://i.stack.imgur.com/9DPDK.png)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-11-06T07:20:41.460

TypeScript 会阻止在未分配具有所需属性或已分配给 的类型的情况下访问对象`any`，因此您可以使用可选链接：

```
window?.MyNamespace =  'value' 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2022-02-09T10:21:03.883

我使用没有声明。我的示例如下所示：

[![在此处输入图像描述](../Images/78e26e10c3f8848c9f3d6db51753e93e.png)](https://i.stack.imgur.com/qG8yc.png)

# android - Android listview edittext 内容不可见

> ID：12709078
> 
> 赞同：1
> 
> 时间：2012-10-03T13:01:22.613
> 
> 标签：android

在我的 android 应用程序中，我动态创建了编辑文本并加载到列表视图中。问题是我无法在使用键盘输入文本时查看编辑文本内容。键盘隐藏输入的内容...

# web-services - 无法确定哪种 Amazon Web 服务适合我们的业务？

> ID：12709083
> 
> 赞同：-1
> 
> 时间：2012-10-03T13:01:45.167
> 
> 标签：web-services, web, amazon-s3, amazon-ec2, rds

**我们的业务需求：**

1.  想要启动一个基于 java 的 Web 服务
2.  Web 应用程序需要一个 mySQL 数据库
3.  我们需要为 10 个不同的 cuatomer 安全地运行相同的 Web 服务

**我们的计划：**

1.  将去 EC2 服务
2.  我们将使用一些具有 java / 数据库和 Web 服务器的应用程序堆栈

问题：

1.  对于上述服务，我们是否需要 EC2/RDS 和 S3 这三种服务？
2.  我们能否准备好满足所有需求的 Linux 映像并将其上传并在 S3 上调优？

请帮助我们提供您宝贵的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:09:36.203

对于上述 3 个要求，您可以只使用 EC2 来实现具有 Java Web 服务器（Tomcat 等）的 Linux 实例和 MySQL 的 RDS（这两者现在都是免费试用的一部分）。

如果您需要文件存储，则只需要 S2。

您不能预先使实例离线，您需要使它们生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:16:44.037

你的问题有点含糊。您可以在 1 个 EC2 实例上执行所有这些操作，具体取决于负载。您可以在单个 linux 实例上安装 Java 和 MySQL。天气这是否适合您，取决于应用程序。load，您使用的 ec2 实例的大小。很多东西。

至于创建自己的 linux 映像，是的，你可以这样做，网上有很多文章详细说明了这一点，快速谷歌搜索出现了这个[http://computeretal.blogspot.com/2010/05/create-amazon- machine-image-from.html](http://computeretal.blogspot.com/2010/05/create-amazon-machine-image-from.html)

祝你好运！

# sql - 用 2 个子查询做数学

> ID：12709089
> 
> 赞同：1
> 
> 时间：2012-10-03T13:02:02.810
> 
> 标签：sql, informix

我有两个子查询都计算总和。我想用两个 Querys 的结果做一个 Artithmetic Minus(-) 。例如 Query1: 400 Query2: 300 结果应该是 100。

明显一个基本的- 在查询中不起作用。减号在集合上用作减号。我该如何解决这个问题？你有什么想法？

```
SELECT CustumersNo FROM Custumers WHERE
(
SELECT SUM(value) FROM roe WHERE roe.credit = Custumers.CustumersNo 
-
SELECT SUM(value) FROM roe WHERE roe.debit = Custumers.CustumersNo
)
> 500 
```

使用 Informix - 抱歉错过了这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:11:10.153

像你尝试过的东西应该可以工作。这可能是语法问题，并且可能取决于您使用的 SQL 类型。但是，这样的方法会更有效：

**更新：**我看到您遇到了空值问题，因此我对其进行了更新以正确处理空值。

```
select CustumersNo from (
    select CustumersNo, 
           sum(coalesce(roecredit.value,0)) - sum(coalesce(roedebit.value,0)) 
               as balance 
        FROM Custumers 
        join roe roecredit on roe.credit = Custumers.CustumersNo 
        join roe roedebit on roe.debit = Custumers.CustumersNo 
        group by CustumersNo
    )
    where balance > 500 
```

*警告：我没有专门使用 Informix 的经验。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:27:49.473

要使原始语法正常工作，您需要将子选择括在括号中：

```
SELECT CustumersNo
  FROM Custumers
 WHERE ((SELECT SUM(value) FROM roe WHERE roe.credit = Custumers.CustumersNo) 
        -
        (SELECT SUM(value) FROM roe WHERE roe.debit  = Custumers.CustumersNo)
       ) > 500 
```

请注意，聚合被定义为忽略它们在标准 SQL 中聚合的值中的空值。但是，空行集的 SUM 为 NULL，而不是零。

您可以创造性地设计方法来始终为`roe`表中列出的每个客户提供价值，例如：

```
SELECT CustomersNo
  FROM (SELECT CustomersNo, SUM(value) AS net_credit
          FROM (SELECT credit AS CustomersNo, +value
                UNION
                SELECT debit  AS CustomersNo, -value
               ) AS x
         GROUP BY CustomersNo
       ) AS y
 WHERE net_credit > 500; 
```

如果您愿意，也可以使用适当的 HAVING 子句来做到这一点。请注意，这可以避免有贷方分录但没有借方分录的客户出现问题，反之亦然；所有存在的条目都会得到适当的处理。

* * *

您对“客户”的拼写错误（或非正统拼写）几乎与“客户”一样好。

# c# - 如何使用 C# Microsoft.Office.Interop.Excel 以正确的格式导出数据表并在 Excel 中写入文本？

> ID：12709092
> 
> 赞同：2
> 
> 时间：2012-10-03T13:02:07.790
> 
> 标签：c#, datatable, formatting, export-to-excel

我正在使用此功能将数据表导出到 excel 中。

```
 protected void ExportExcel(System.Data.DataTable dt) 
    { 
         if (dt == null||dt.Rows.Count==0) return; 
         Microsoft.Office.Interop.Excel.Application xlApp = 
new Microsoft.Office.Interop.Excel.Application(); 

 if (xlApp == null) 
 { 
     return; 
 } 
 System.Globalization.CultureInfo CurrentCI = 
System.Threading.Thread.CurrentThread.CurrentCulture; 
 System.Threading.Thread.CurrentThread.CurrentCulture = 
    new System.Globalization.CultureInfo("en-US"); 
 Microsoft.Office.Interop.Excel.Workbooks workbooks = xlApp.Workbooks; 
 Microsoft.Office.Interop.Excel.Workbook workbook = 
 workbooks.Add(Microsoft.Office.Interop.Excel.XlWBATemplate.xlWBATWorksheet); 
 Microsoft.Office.Interop.Excel.Worksheet worksheet = 
(Microsoft.Office.Interop.Excel.Worksheet)workbook.Worksheets[1]; 
 Microsoft.Office.Interop.Excel.Range range; 
 long totalCount = dt.Rows.Count; 
 long rowRead = 0; 
 float percent = 0; 
 for (int i = 0; i < dt.Columns.Count; i++) 
 { 
     worksheet.Cells[1, i + 1] = dt.Columns[i].ColumnName; 
     range = (Microsoft.Office.Interop.Excel.Range)worksheet.Cells[1, i + 1]; 
     range.Interior.ColorIndex = 15; 
     range.Font.Bold = true; 

 } 

 for (int r = 0; r < dt.Rows.Count; r++) 
 { 
     for (int i = 0; i < dt.Columns.Count; i++) 
     { 
         worksheet.Cells[r + 2, i + 1] = dt.Rows[r][i].ToString(); 
     } 
     rowRead++; 
     percent = ((float)(100 * rowRead)) / totalCount; 
 }

 xlApp.Visible = true;
} 
```

![结果图像](../Images/46fd25dbb4527126d87b6d24d4f913f8.png)

正如您在生成的 excel 图像中看到的那样，列的格式不正确，即列大小不适应数据绑定项。如何使excel单元格根据数据表自动调整？

而且我还想添加一些文本，可能是标题，例如“System.DateTime.Now”或“数据表名称”。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T13:08:58.470

您应该能够像这样格式化列：

```
Microsoft.Office.Interop.Excel.Range columns = worksheet.UsedRange.Columns;
columns.AutoFit(); 
```

您可以插入一个新行并将当前日期作为标题，如下所示：

```
worksheet.Rows[1].Insert();
Excel.Range newRow = worksheet.Rows[1];
Excel.Range newCell = newRow.Cells[1];
newCell.Value = DateTime.Now.ToString("yyyy-MM-dd"); 
```

还要将此添加到您的 using 语句中，这样您就无需在每次使用 Excel 对象时都使用完全限定名称：

```
using Excel = Microsoft.Office.Interop.Excel; 
```

另外，我已经整理了你的方法，通过添加一些 using 语句来减少混乱，删除一些不必要的强制转换和对应用程序对象进行不必要的 null 检查，就在它被分配之后：

```
using Excel = Microsoft.Office.Interop.Excel;
using System.Globalization;
using System.Threading;
using System.Data;

protected void ExportExcel(DataTable dt)
{
    if (dt == null || dt.Rows.Count == 0) return;

    var xlApp = new Excel.Application();
    //Is this used?
    CultureInfo CurrentCI = Thread.CurrentThread.CurrentCulture;

    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");

    Excel.Workbooks workbooks = xlApp.Workbooks;

    Excel.Range range

    Excel.Workbook workbook = workbooks.Add();
    Excel.Worksheet worksheet = workbook.Worksheets[1];

    long totalCount = dt.Rows.Count;
    long rowRead = 0;
    float percent = 0;

    for (var i = 0; i < dt.Columns.Count; i++)
    {
        worksheet.Cells[1, i + 1] = dt.Columns[i].ColumnName;

        range = worksheet.Cells[1, i + 1];
        range.Interior.ColorIndex = 15;
        range.Font.Bold = true;
    }

    for (var r = 0; r < dt.Rows.Count; r++)
    {
        for (var i = 0; i < dt.Columns.Count; i++)
        {
            worksheet.Cells[r + 2, i + 1] = dt.Rows[r][i].ToString();
        }

        rowRead++;

        //is this used?
        percent = ((float)(100 * rowRead)) / totalCount;
    }    

    Microsoft.Office.Interop.Excel.Range columns = worksheet.UsedRange.Columns;
    columns.AutoFit();

    worksheet.Rows[1].Insert();
    Excel.Range newRow = worksheet.Rows[1];
    Excel.Range newCell = newRow.Cells[1];
    newCell.Value = DateTime.Now.ToString("yyyy-MM-dd");

    xlApp.Visible = true;
} 
```

# java - 为什么我在启动 GUI 时会收到 NullPointerException？

> ID：12709096
> 
> 赞同：0
> 
> 时间：2012-10-03T13:02:21.827
> 
> 标签：java, swing, exception, user-interface, nullpointerexception

我为我的 CRUD 程序编写了一个 gui，当我想运行它时，我得到：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at gui.guimain$1.run(guimain.java:477)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:597)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

这就是 NPE 来自的代码：

```
public static void main(String[] args){
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run(){
                maingui.showStart();// thats the line with the Exception
        }
    });
} 
```

这就是 showStart() 方法：

```
public void showStart(){
    mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainFrame.getContentPane().removeAll();
    tabstructure.removeAll();
    Produkt filter=new Produkt();

    JPanel P=new JPanel();
    P=Produktgui(0, filter);
    JPanel R=new JPanel();
    R=Billgui(0);
    JPanel nR=new JPanel();
    nR=Billgui(0);

    tabstructure.addTab("e", P);
    tabstructure.addTab("Bills", R);
    tabstructure.addTab("Pay bill", nR);
    mainFrame.getContentPane().add(tabstructure);
    mainFrame.validate();
    mainFrame.repaint();
    mainFrame.pack();
    mainFrame.setVisible(true);
} 
```

为什么我得到一个`NullPointerException`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T13:06:05.453

您将必须创建一个`MainGui`.

```
public static void main(String[] args) {
    final MainGui maingui = new MainGui();
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run(){
                maingui.showStart();// thats the line with the Exception
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T13:05:06.690

因为你调用方法的东西是`null`.

仔细查看错误信息。它说异常发生在第 477 行`guimain.java`。

那时，`maingui`是`null`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-03T13:06:15.573

您必须先实例化对象，然后才能对其调用方法。在这种情况下，`maingui`尚未实例化。

```
public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            MainGUI maingui = new MainGUI();
            maingui.showStart();
        }
    });
} 
```

# ios - 在 Xcode 4.5 中查找 CDVViewController.m 的位置

> ID：12709102
> 
> 赞同：0
> 
> 时间：2012-10-03T13:02:45.193
> 
> 标签：ios, cordova, xcode4

这可能是一个非常愚蠢的问题，但是是的......基本上我想修复 iPhone 5 闪屏错误，我找到了应该修复的内容：

[iPhone 5 闪屏显示不正确 - Phonegap](https://stackoverflow.com/questions/12450603/iphone-5-splashscreen-not-displaying-correctly-phonegap)

我的问题是在我的项目中找不到 CDVViewController.m 或 CordovaLib。我可以找到 CDVViewController.h。我认为它必须在那里，因为应用程序有效。它究竟在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:52:45.053

为了解决这个问题，请在您的项目构建设置中检查您的项目“有效架构”（如果有，请删除 armv6）并且“仅构建活动架构”应设置为“是”（至少用于调试）。

西里尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:33:02.810

假设您使用的是 Cordova 2.0 或 2.1。它位于 CordovaLib 子项目 > Classes > Cleaver > CDVViewController.m 下

如果您看不到 CordovaLib，您可能使用的是旧版本，应该升级到最新版本（当前为 2.1）。

# c# - 当文本框不再具有焦点时如何验证它？

> ID：12709103
> 
> 赞同：0
> 
> 时间：2012-10-03T13:02:46.327
> 
> 标签：c#, validation

我想在取消选择文本框时验证我的文本框。

[它应该以与Google 的 Create Account page](https://accounts.google.com/SignUp)相同的方式验证文本框的值。

如果文本框值通过验证，则应继续进行，否则应显示如下消息：`This value is not valid`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:06:54.193

Validation 和 LostFocus 的事件可以在这里。这是一些验证文本框值的代码 [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.lostfocus.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.lostfocus.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:03:26.050

如果它是桌面应用程序/WinForms，你可以使用 Suspitsyn Kirill 所说的，而对于网络应用程序，它会非常接近。文本框具有焦点等事件处理程序。使用后面的代码可以分配事件将执行的操作。

不记得确切的 C# 但它应该是

```
private void textBox1_LostFocus(object sender, System.EventArgs e)
{
    textBox1_Validating() 
} 
```

在元素上添加 lostfocus 以指向此方法。

您也可以使用 javascript 相同的概念来做到这一点。

# iphone - 通过使用低分辨率图像然后交换高分辨率图像来加速 UIImagePickerController

> ID：12709111
> 
> 赞同：1
> 
> 时间：2012-10-03T13:03:07.290
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

有一个很棒的 wiki 关于[从相机选择器加载图像](https://stackoverflow.com/questions/1282830/uiimagepickercontroller-uiimage-memory-and-more)。这让我意识到以全分辨率拍摄图像的成本。

目前，当一张照片被选中时，我推送一个新的视图控制器并以全分辨率显示图像。推动视图是一种非常缓慢且不稳定的体验（大约 1 fps！），我想平滑它。与在 Instagram 上挑选照片相比，我注意到他们使用的是低分辨率图像，然后换成了完整图像。（我需要完整的 res 图像，因为用户应该能够缩放和平移）

我想要的想法是这样的：

```
- (void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingMediaWithInfo:(NSDictionary *)info 
{

    UIImage* fullImage = [info objectForKey:UIImagePickerControllerOriginalImage];

    // Push a view controller and give it the image.....
}

- (void) viewDidLoad {

    CGSize smallerImageSize = _imageView.bounds;
    UIImage* smallerImage = [MyHelper quickAndDirtyImageResize:_fullImage     
                                                        toSize:smallerImageSize];

    // Set the low res image for now... then later swap in the high res
    _imageView.image = smallerImage;

    // Swap in high res image async
    // This is the part im unsure about... Im sure UIKit isn't thread-safe!
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, NULL), ^{
        _imageView.image = _fullImage;
    });
} 
```

我认为 UIImage 在使用之前不是内存映射的。因此，它不会减慢速度，直到将其提供给 imageView。它是否正确？

我认为图像解码已经由系统异步完成，但是，它仍然会在加载时大大减慢手机的速度。

有没有办法执行在非常低优先级的背景队列中显示图像所需的一些工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T11:23:57.713

您正在尝试以最复杂的方式做事:) 为什么不在推送视图控制器之前准备小图像并将其传递给他们？看看这段代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingMediaWithInfo:(NSDictionary *)info 
{

    UIImage *fullImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    UIImage *smallImage = [fullImage imageScaledToSize:self.view.bounds];

    // Push a view controller and give it BOTH images
}

// And in your pushed view controller

- (void)viewDidLoad
{
    _imageView.image = self.smallImage;
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    _imageView.image = self.fullImage;
} 
```

主要是`viewDidAppear:`在动画完成后立即调用它，因此您可以在此处切换图像而无需担心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:25:20.800

除了安德烈的回答，不要使用`imageScaledToSize`，使用`CGImageSourceCreateThumbnailAtIndex`。事实上，很可能（我很确定是这种情况）相册中使用的任何图像都已经有缩略图。因此，与其打扰图像本身，不如抓取现有的缩略图并显示它，然后使用 Andrey 的代码切换到主图像。这样你在动画期间做的工作尽可能少。

调用`CGImageSourceCreateThumbnailAtIndex`将返回缩略图图像，无论它已经存在还是需要生成。所以它使用起来非常安全，而且可能至少和`imageScaledToSize`.

您可以在 Apple 文档中找到完整的代码示例以使用它，无需在此处复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:58:20.853

您是否尝试过使用 ALAssetsLibrary 加载该图像的缩略图，而不是尝试以全分辨率加载图像？它也比调整大小更快。

# caching - Drupal 7 缓存我的表单并打印旧的缓存字段（Varnish/Memcache）

> ID：12709116
> 
> 赞同：1
> 
> 时间：2012-10-03T13:03:36.090
> 
> 标签：caching, drupal-7, memcached, varnish

我有一个名为 drupal_get_form 的 profile2 表单——尽管在编辑和保存之后，这些字段仍然会显示一段时间的旧信息。我怎样才能在这里关闭缓存？我正在使用 memcache/varnish/apc 顺便说一句。

我也在其他地方打印这些字段并遇到同样的问题。我宁愿这对于这些字段/表单来说是动态和新鲜的。关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:34:02.217

可能您需要从 memcache 中排除 cache_form ：

```
$conf['cache_class_cache_form'] = 'DrupalDatabaseCache'; 
```

在您的 settings.php 文件中

# objective-c - 使用带有情节提要的 instantiateViewControllerWithIdentifier 传递属性值

> ID：12709117
> 
> 赞同：3
> 
> 时间：2012-10-03T13:03:39.460
> 
> 标签：objective-c, ios, xcode

抱歉，如果我的术语有点偏离目标 C 的新手！我正在尝试将一个值从一个 UIViewController 类传递给另一个。我正在使用故事板。我可以使用以下代码显示第二个 ViewController：

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [mainStoryboard instantiateViewControllerWithIdentifier:@"FormView"];
[self presentModalViewController:vc animated:YES]; 
```

这很好用。在我的第二个 ViewController 的 (FormView) 头文件中，我设置了一个属性，如下所示：

```
@interface FormController : UIViewController {
NSString *selectedBooking;
}
@property (nonatomic, retain) NSString *selectedBooking;
@end 
```

如何将值从我的第一个控制器“传递”到第二个控制器？据我了解，我必须像这样设置属性：

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [mainStoryboard instantiateViewControllerWithIdentifier:@"FormView"];
vc.selectedBooking = @"test";
[self presentModalViewController:vc animated:YES]; 
```

这给了我错误：在“UIViewController”类型的对象上找不到属性“selectedBooking”。

设置属性的正确方法是什么？还有什么我应该使用的东西，而不是 instantiateViewControllerWithIdentifier？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T13:06:45.837

你需要投射它。

IE

```
FormController *fc = (FormController*)[mainStoryboard instantiateViewControllerWithIdentifier:@"FormView"];
fc.selectedBooking = @"test";
[self presentModalViewController:fc animated:YES]; 
```

那么您的其余代码将起作用：D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-01T10:22:39.150

以防万一您不想导入该类`FormController`并继续使用它，您可以执行以下操作。真的很方便：

```
UIStoryboard *mainStoryboard = ..
UIViewController *vc = ... 
```

> [vc setvalue:@"test" ForKey:@"selectedBooking"]; //使用KVC

```
[self presentModalViewController:vc animated:YES]; 
```

注意：这仅适用于属性。

# javascript - $tree.tree 不是函数

> ID：12709120
> 
> 赞同：2
> 
> 时间：2012-10-03T13:03:54.083
> 
> 标签：javascript, jquery, plone

我正在使用名为`collective.virtualtreecategories`. 但是，我不断收到一个奇怪的 javascript 错误，并且无法显示树。

在浏览器的错误控制台上，我得到以下信息：

```
$tree.tree is not a function 
```

这是产生错误的代码部分：

```
$tree.tree({
    data: {
        type: "json",
        url: "@@vtc-categories-tree.json",
        async: false
    },
    lang: {
        new_node: "New category"
    },
    rules: {
        deletable: ["folder"],
        renameable: ["folder"],
        draggable: "none",
        droppable: "none",
    },
    callback: {
        beforechange: function(node, tree_obj) {
            return before_change_node()
        },
        onselect: function(node, tree_obj) {
            node_selected(node)
        },
        oncreate: function(node) {
            jq(node).attr('rel', 'folder')
        },
        onrename: function(node, lang, tree_obj, rb) {
            old_id = node.id // may be undefined (new node)
            new_name = jq(node).children("a:visible").text();
            // shared code. Server determines if creating/renaming by the old_name value
            jq.ajax({
                type: 'POST',
                url: "vtc-category-added-renamed",
                data: {
                    'category_path': selected_category(node),
                    'old_id': old_id,
                    'new_name': new_name
                },
                success: function(data) {
                    jq.jGrowl(data.msg, {
                        life: 1500
                    });
                    // set/change node id
                    if (data.result) {
                        node.id = data.new_id
                    }
                },
                dataType: 'json',
                traditional: true
            })
        },
        beforedelete: function(node, tree_obj) {
            jq.ajax({
                type: 'POST',
                url: "vtc-category-removed",
                data: {
                    'category_path': selected_category(node)
                },
                success: function(data) {
                    jq.jGrowl(data.msg, {
                        life: 3000
                    });
                },
                dataType: 'json',
                traditional: true
            });
            return true;
        }
    }
});​ 
```

完整的代码清单可以在[这里找到](https://github.com/collective/collective.virtualtreecategories/blob/master/src/collective/virtualtreecategories/browser/resources/virtualtreecategories-controlpanel.js)

有人可以帮我解决这个问题吗？

**更新：** 我也许应该补充一点，这是以前在不同的环境中工作的。现在，我刚刚重新创建了项目，这就是我得到这个错误的时候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:15:47.750

据我所知，您的代码`$tree`不是函数，它是第 89 行的元素 `var $tree = jq('ul#VTCTree');`

因此我假设`.tree()`是一个 JQuery 小部件并且没有按预期工作？

刚刚看到一些评论和更新。您是否检查了树插件/小部件的路径/文件包含？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:36:32.690

> 在浏览器的错误控制台上，我得到以下信息：

如果您的浏览器是 Internet Explorer，则此处的额外逗号

`droppable: "none",`

是一个广为人知的问题。

对于 Firefox 来说不是问题，但会产生意想不到的结果，例如以下数组中的 3 个元素。但长度 = 4

`myArr = [1,2,3,,]`

另外，请检查此[https://stackoverflow.com/a/5139232/982924](https://stackoverflow.com/a/5139232/982924)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-02T16:29:38.760

我遇到了同样的问题，即使我加载了 jquery 并加载了 jquery.filetree.min 插件。我错过了也是必需的 jquery UI js。

# java - JOGL 2.0 和 GLUT

> ID：12709129
> 
> 赞同：1
> 
> 时间：2012-10-03T13:04:28.210
> 
> 标签：java, opengl, glut, jogl

我正在尝试使用 GLUT。问题是我没有“com.sun.opengl.util.*”类，所以现在我根本不能使用它。

是否有可能将 JOGL 与 GLUT 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:24:23.337

您的课程大约是 JOGL 版本，而不是 JOGL2。

com.sun 现在是 com.jogamp 因为 JOGL 现在由 JogAmp 社区管理，而不是 Sun。

# java - java - 如何在java中使用DOM解析器解析xml标签？

> ID：12709145
> 
> 赞同：0
> 
> 时间：2012-10-03T13:05:19.663
> 
> 标签：java, xml, dom, xml-parsing

我将使用 DOM 解析器在 java 中解析以下 xml 文件，但没有获取从我的 xml 文件中检索某些标签的信息，所以请帮我解决这个问题。

```
<policy name="DayCapturePolicy" type="capture">
<starttime>9:00:00 AM</starttime>
<endtime>9:00:00 PM</endtime>
<event name="NEW_APP_INSTALLED">
 <eventFilter selectedAppName="Alarm"/> 
   <eventParam>selectedAppName</eventParam>
  <eventParam>selectedAppVersion</eventParam>
  <eventParam>appPackageName</eventParam>
  <eventParam>appDirPath</eventParam>
</event>
</policy> 
```

我想知道我应该如何从上面的 xml 文件中解析事件过滤器标记的值？我还想知道我应该如何从 eventParam 标记中检索所有值。我能够检索第一个标记 ieselectedAppName 的值但无法解析salectedAppVersion.appPackageName,appDirPath.的值提前谢谢

我曾尝试使用此代码进行解析。

```
 NodeList nodeList = document.getElementsByTagName("policy");
    Log.d("Reminder", "Number of Policies : "+nodeList.getLength());
    for(int i=0;i<nodeList.getLength();i++){
        Log.d("Reminder", "In 1");
        //PolicyInfo policyInfo = new PolicyInfo();
        Node node = nodeList.item(i);
        NamedNodeMap namedNodeMap = node.getAttributes();
        String policyName = namedNodeMap.getNamedItem("name").getNodeValue();
        String policyType = namedNodeMap.getNamedItem("type").getNodeValue();
        if (node.getNodeType() == Node.ELEMENT_NODE) {

              Element eElement = (Element) node;
              Log.d("startTime  : " ,""+ getTagValue("starttime", eElement));
              Log.d("endtime  : " ,""+ getTagValue("endtime", eElement));
              NodeList nList = document.getElementsByTagName("event");
              for(int j=0;i<nList.getLength();i++){
                    Log.d("Reminder", "In 1");
                    //PolicyInfo policyInfo = new PolicyInfo();
                    Node innerNode = nList.item(i);
                    NamedNodeMap innerNamedNodeMap = innerNode.getAttributes();
                    String eventName = innerNamedNodeMap.getNamedItem("name").getNodeValue();
                    Log.d("innerNode", eventName);
                    if(innerNode.getNodeType()== Node.ELEMENT_NODE){
                         Element innerElement = (Element) innerNode;
                         Log.d("eventParam  : " ,""+ getTagValue("eventParam", innerElement));
                         Log.d("eventFilter  : " ,""+ getTagValue("eventFilter", innerElement));
                         //Log.d("endtime  : " ,""+ getTagValue("endtime", eElement));
                    }
              //System.out.println("starttime : " + getTagValue("starttime", eElement));
             // System.out.println("endtime: " + getTagValue("endtime", eElement));
              //System.out.println("Nick Name : " + getTagValue("nickname", eElement));
              //System.out.println("Salary : " + getTagValue("salary", eElement));

           }
        }

private static String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

    Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:41:24.390

我建议您改用 XPath 表达式，这要容易得多。由于您已经`Document`创建了一个 XPath：

```
XPathFactory xPathFactory = XPathFactory.newInstance();
XPath xPath = xPathFactory.newXPath();
XPathExpression expr = xPath.compile("/policy/event/eventFilter/@selectedAppName");

NodeList nl = (NodeList) expr.evaluate(doc , XPathConstants.NODESET);

for (int i = 0; i < nl.getLength(); i++) {
    Node node = nl.item(i);
    System.out.println(node.getTextContent());
} 
```

那将打印

```
Alarm 
```

要将`<eventParam>`xpath 表达式的所有开关转换为`/policy/event/eventParam`.

那将打印

```
selectedAppName
selectedAppVersion
appPackageName
appDirPath 
```

* * *

链接到 oracle xpath javadoc：[http ://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/package-summary.html](http://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/package-summary.html)

# wpf - 按需填充上下文菜单

> ID：12709147
> 
> 赞同：1
> 
> 时间：2012-10-03T13:05:29.850
> 
> 标签：wpf, mvvm, contextmenu, prism, blend

我有一个实体视图模型。由于 UI 中可能有许多实体，因此我使用了 DataTemplate 来表示实体视图模型。容器控件的 ItemTemplate 属性使用此数据模板来呈现实体。请注意，这不是传统的 ListView/ListBox 控件。它是一个图形控件，其边和节点由数据模板表示。这就是说，每个节点都是不同的类型，当用户右键单击时，模板的上下文菜单将绑定到视图模型提供的集合。以下代码工作正常：

```
<DataTemplate DataType="{x:Type model:Person}">
        <Border Style="{StaticResource NodeBorderStyle}" MinWidth="200">

            <Border.ContextMenu>
                <ContextMenu ItemsSource="{Binding ContextOperations}">
                    <ContextMenu.ItemContainerStyle>
                        <Style TargetType="MenuItem">                             
                            <Setter Property="Command" Value="{Binding PlacementTarget.DataContext.HandleContextOperationCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"/>
                            <Setter Property="CommandParameter" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=Header}"/>
                        </Style>
                    </ContextMenu.ItemContainerStyle>
                </ContextMenu>
            </Border.ContextMenu>
....................
  </Border >
</DataTemplate> 
```

这有一个限制，在`ContextOperations`初始化视图模型时必须填充（ObservableCollection）属性。可能有许多节点，因此在加载时为所有节点存储上下文菜单项可能是一个巨大的内存问题。我希望当用户右键单击实体（模板）时，`ContextOperations`填充视图模型的属性，然后呈现上下文菜单。此 DataTemplate 保存在资源文件中。任何指导将不胜感激。谢谢你。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:21:42.780

处理数据模板边框上的 MouseRightButtonUp 事件并像这样创建上下文菜单运行时：

```
private void borderMouseRightButtonUp(object sender, MouseButtonEventArgs e)
{
    OpenContextMenu(sender as ComboBox);
}

private void OpenContextMenu(FrameworkElement element)
{
    if (element.ContextMenu == null)
    {
        ContextMenu c = new ContextMenu();
        //Load the ContextOperations from ViewModel 
        //based on the Framework element datacontext
        ContextOperations.ToList().ForEach(co => c.Items.Add(new MenuItem()
        { 
           //Create your menu item
        }));

        element.ContextMenu = c;

    }

    element.ContextMenu.PlacementTarget = element;
    element.ContextMenu.IsOpen = true;

} 
```

并从 XAML 中删除 contextmenu 的定义。

# javascript - 全局变量未在堆栈中传递 - IE8

> ID：12709149
> 
> 赞同：0
> 
> 时间：2012-10-03T13:05:38.333
> 
> 标签：javascript, internet-explorer, internet-explorer-8, global-variables, eval

我正在开发一个在 Internet Explorer 中中断的遗留应用程序。它有以下代码：

脚本 1： `/* Call script 2 */; x.a(b)`

脚本 2： `eval(script3)`

脚本 3： `var x = x || {}; x.a = function(){ ... }`

在 Firefox 中，这按预期工作。

然而，在 Internet Explorer 中，它会因为说“x 未定义”而失败（这被大大简化了）。我将它追溯到代码中的这一点，并注意到它`x`在脚本 3 中定义，但随后在堆栈中返回到脚本 2，它失去了它的可用性/范围（我通过将 console.log 语句放在两者中进行测试 - IE 是脚本 3 中的那个没问题，但脚本 2 中的那个崩溃了）。

Internet Explorer 和/或该`eval()`功能会导致这种情况发生，我有哪些解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:14:15.590

为什么不设置一个测试并亲自看看呢？

这是一个：http: [//jsfiddle.net/Y3bf5/](http://jsfiddle.net/Y3bf5/)

它似乎在 IE7+ 中运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:38:28.547

您可能希望将 Script 3 更改为`var x; x = x || {}; x.a = function(){ ... }`
This mayve 由于在这种情况下声明变量**x**之前变量的抢占式使用而导致。 **变量 x 在脚本 2**
中不可用的事实是因为该方法突然失败并出现“ **x 未定义**” 实际上我只从引用**脚本 3** 的代码中理解了一点点 如果我能瞥见它，那么我可能比现在对你有更好的帮助。 希望这可以帮助**`eval()`**

# c# - 在 C# 项目中使用 C++ dll 函数提高性能

> ID：12709153
> 
> 赞同：2
> 
> 时间：2012-10-03T13:05:59.160
> 
> 标签：c#, c++, performance, image-processing, dllimport

多年来，一直听说 C++ 速度很快，因此，它非常适合图像处理，例如。

如果我正在用 C# 开发一个需要进行一些图像处理的系统并且我想提高你的性能，那么最好的方法是什么？

1 - 全部在 C# 中完成，并执行“非托管”所包含的图像处理功能

2 - 在 C++ 中编写处理图像的函数并将此函数导入我的 C# 代码？

另一个问题？

哪一个提高了性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:44:21.530

它是 C++ 到 C# 调用和 IL 代码到机器代码生成之间的权衡。

1.  C# 生成 IL 代码，该代码将在运行时转换为机器代码。机器代码生成会产生一些成本。
2.  在 C# 中，您可以调用 C++ DLL 的方法。加载 C++ 方法并调用它会产生一些成本。

现在您需要比较 1 和 2 的成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:34:43.353

我不知道你需要做什么样的图像处理操作，但如果你想获得很好的性能，你可以考虑使用CUDA或OpenCL（在显卡上编程）

# dreamweaver - Dreamweaver CS6 - 默认 HTML5 新文档代码修改

> ID：12709154
> 
> 赞同：2
> 
> 时间：2012-10-03T13:05:59.580
> 
> 标签：dreamweaver

我想在 Dreamweaver CS6 中设置我的“Default.html”文件以获得附加代码。更具体地说，我希望新的 HTML5 文档有额外的 3 行代码。

我一直在到处寻找，以找出如何在没有成功的情况下做到这一点。我得到的最接近的是这里（对于 Dreamweaver MX）：[http ://www.sitepoint.com/customize-dreamweaver-needs/](http://www.sitepoint.com/customize-dreamweaver-needs/)

当我查看“文档类型”...我没有“新文档”文件夹... AppData\Roaming\Adobe\Dreamweaver CS6\en_US\Configuration\DocumentTypes

您能否指出我在哪里以及如何编辑默认的 HTML5 新文档？

我有 Adob​​e Dreamweaver CS6（版本 12.0 build 5842）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:21:43.230

**C:\Program Files (x86)\Adobe\Adobe Dreamweaver CS6\configuration\DocumentTypes\MMDocumentTypeDeclarations.xml**

这是存储 DOCTYPE 标头的地方。

**C:\Program Files (x86)\Adobe\Adobe Dreamweaver CS6\configuration\DocumentTypes\NewDocuments\Default.html**

这是存储 Default.html 的地方，编辑它可能会做你想要的

# vim - Vim 和 Clojure，我可以将 Slimv 或 VimClojure 与 ritz 或其他 REPL 一起使用吗？

> ID：12709160
> 
> 赞同：1
> 
> 时间：2012-10-03T13:06:22.937
> 
> 标签：vim, clojure, slimv, vimclojure

我可以成功配置两者`Slimv`，`VimClojure`但我想知道是否可以将其中任何一个设置为与任何`swank server`（`ritz`例如）一起使用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:47:12.483

理论上 Slimv 可以连接到任何 swank 服务器，但目前还没有针对 ritz-swank 的自动检测。因此，如果您想使用 ritz，那么您需要手动启动 swank 服务器，或者为 Slimv 定义启动 swank 服务器的 shell 命令，例如通过在 .vimrc 中添加类似的行（假设您通过 Leiningen 在 Linux 上运行 ritz ):

`let g:slimv_swank_clojure = '! xterm -e lein ritz 4005 &'`

最近版本的 ritz-swank 有一些协议更改，所以我建议您从[存储库](https://bitbucket.org/kovisoft/slimv)中获取最新的 Slimv 版本，它添加了一个新功能“异常中断”。

你当然也可以通过 swank-clojure 使用`lein swank`，Slimv 可以自动检测并为你运行它。

我是 Slimv 的作者，我打算增加对 ritz 的支持，因为现在 swank-clojure 似乎已经被抛弃了。如果您对 Slimv 有任何问题，请随时与我联系。

编辑：我现在为 ritz-swank 添加了一个简单的自动检测：如果 Slimv 找到`~/.lein/plugins/lein-ritz*.jar`，那么它可以通过按 启动 ritz-swank `,c`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:30:19.713

这里还有一个 nREPL 选项： [https ://github.com/tpope/vim-foreplay](https://github.com/tpope/vim-foreplay)

VimClojure 的创建者建议暂时将其用于 nREPL - [https://groups.google.com/d/msg/vimclojure/B-UU8qctd5A/nHXJiGMkXJsJ](https://groups.google.com/d/msg/vimclojure/B-UU8qctd5A/nHXJiGMkXJsJ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T06:04:46.633

VimClojure 不使用 swank 作为后端，因此您不能将它与 swank 服务器一起使用。

# android - ScrollView 背景剪裁

> ID：12709163
> 
> 赞同：2
> 
> 时间：2012-10-03T13:06:31.623
> 
> 标签：android, android-layout, android-widget

我已将这个问题发布到官方 Android 开发者论坛，但到目前为止还没有收到任何回复。我有一个可绘制对象，它定义了一个视图周围的黑色边框，我经常在当前应用程序中将其用作背景。但是，我遇到了 ScrollView 的问题，因为我想要某种“浮动可滚动窗口”，其中 ScrollView 具有上述黑色边框背景和内部视图。问题是，ScrollView 不会将黑色边框剪裁到其内容上，所以当内容小于 ScrollView 的大小时，一切都很好，但是当不是时，您会看到内容仅被 View 的绘图区域剪裁，绘图在 ScrollView 的黑色边框之上，看起来不太好。我尝试使用以下 XML 属性无济于事。

```
android:clipChildren="true"
android:clipToPadding="true"
android:fillViewport="true" 
```

关于我如何解决这个问题的任何想法？

谢谢。

# java - router.attach(String, Class ) 无法正常工作

> ID：12709164
> 
> 赞同：2
> 
> 时间：2012-10-03T13:06:32.333
> 
> 标签：java

好的，自从我最初的问题问题发布以来，我已经取得了一些进展。这是新的场景

```
 Server server = new Server(Protocol.HTTP, 8182, new TestServerApplication());
  server.start()

  Here's the code that's in the client
  ClientResource clientResource = new ClientResource(
            "http://localhost:8182/contacts/123"); 
```

**以下代码不起作用**

```
router.attach("/contacts/123", ContactServerResource.class);
 Exception in thread "main" Not Found (404) - Not Found 
```

**以下代码不起作用**

```
router.attach("/contacts/123", ContactServerResource.class, Router.MODE_BEST_MATCH);
 Exception in thread "main" Not Found (404) - Not Found 
```

*****使用 attachDefault 会导致调用被正确处理

```
// success!
router.attachDefault(ContactServerResource.class); 
```

我也尝试了一些不同的东西，而不是使用服务器。

```
Component component = new Component();

// Add a new HTTP server listening on port 8182.
component.getServers().add(Protocol.HTTP, 8182);

// Attach the sample application.
component.getDefaultHost().attach("/contacts/123",
        new TestServerApplication());

component.start(); 
```

在这种情况下`router.attach("/contacts/123", ContactServerResource.class)`仍然被调用，它仍然无法工作。你必须`attachDefault()`让它工作

我想不出还有什么可以尝试的。有人有什么想法吗？谢谢你

# delphi - 对角笔刷样式给了我黑色区域

> ID：12709166
> 
> 赞同：2
> 
> 时间：2012-10-03T13:06:44.020
> 
> 标签：delphi, canvas, styles, brush

我想用这个代码在画布上画一个对角线：

```
InFlateRect(r, -1, -1);
Canvas.Brush.Color := clYellow;
Canvas.Brush.Style := bsFDiagonal;
Canvas.Pen.Color := clRed;
//Pen.Style := psClear;
Canvas.Rectangle(r); 
```

但结果是一个黑匣子。

如果我删除样式更改，我得到一个正常的纯黄色区域。

为什么这个代码的矩形是黑色的？

感谢每一个建议

* * *

抱歉缺少信息，我扩展了它：此过程使用 TMetaFileCanvas 进行绘制。在正常形式上，我可以绘制任何画笔样式，例如 TShape ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:58:13.580

```
procedure TForm4.FormPaint(Sender: TObject);
var
  R: TRect;
begin
  R := ClientRect;
  InflateRect(R, -10, -10);
  Canvas.Brush.Color := clYellow;
  Canvas.Brush.Style := bsFDiagonal;
  Canvas.Pen.Color := clRed;
  Canvas.Rectangle(R);
end; 
```

产生结果

![截屏](../Images/37651e27406dd3f5412e034671382396.png)

（不要忘记`Invalidate`在表格中`OnResize`。）

请注意，该区域用对角黄线填充。这确实是`bsFDiagonal`画笔样式的作用。

![截屏](../Images/3c2107e8a1e3a0a2e14ef5212038a4e2.png)

从你的问题的措辞（“我想画一个对角线十字架[...]”），我怀疑你实际上想要别的东西，即矩形内的一个大十字架。这是使用标准刷子根本无法实现的。相反，您必须手动绘制它：

```
procedure TForm4.FormPaint(Sender: TObject);
var
  R: TRect;
begin
  R := ClientRect;
  InflateRect(R, -10, -10);
  Canvas.Brush.Color := clWhite;
  Canvas.Brush.Style := bsSolid;
  Canvas.Pen.Color := clRed;
  Canvas.Rectangle(R);
  Canvas.MoveTo(10, 10);
  Canvas.LineTo(R.Right, R.Bottom);
  Canvas.MoveTo(10, R.Bottom);
  Canvas.LineTo(R.Right, 10);
end; 
```

![截屏](../Images/5d6d3d679fb748e032c0ec29e835e4c3.png)

# objective-c - 如何在使用保存的 .png 文件创建 PDF 文件时插入分页符？

> ID：12709175
> 
> 赞同：1
> 
> 时间：2012-10-03T13:07:12.603
> 
> 标签：objective-c, ios, xcode4, pdf-generation

我正在使用从 webView 以编程方式拍摄的屏幕截图创建 pdf 文件。

但主要问题是下面的代码不会插入分页符，它只会创建整个页面。

请告诉我如何在 pdf 中插入 pageBreak 或创建多个页面。

```
- (void) drawPdf
{
    CGSize pageSize = CGSizeMake(612, webViewHeight);
    NSString *fileName = @"Demo.pdf";
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

    UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);
    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

    // Mark the beginning of a new page.
    //UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

    double currentHeight = 0.0;

    for (int index = 1; index <= imageName ; index++)
    {

        NSString *pngPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.png", index]];
        UIImage *pngImage = [UIImage imageWithContentsOfFile:pngPath];

        [pngImage drawInRect:CGRectMake(0, currentHeight, pageSize.width, pngImage.size.height)];        
        currentHeight += pngImage.size.height;

    }
UIGraphicsEndPDFContext();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:38:44.860

```
- (void) drawPdf
{
    CGSize pageSize = CGSizeMake(612, webViewHeight);
    NSString *fileName = @"Demo.pdf";
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

    UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);

    // Mark the beginning of a new page.
    //UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

    double currentHeight = 0.0;

    for (int index = 1; index <= imageName ; index++)
    {
      UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);
     //Above line would work to make page break

        NSString *pngPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.png", index]];
        UIImage *pngImage = [UIImage imageWithContentsOfFile:pngPath];

        [pngImage drawInRect:CGRectMake(0, 0, pageSize.width, pngImage.size.height)];        
        currentHeight += pngImage.size.height;

    }
UIGraphicsEndPDFContext();

} 
```

# iphone - 完成后，editButtonItem 标题重置为默认值

> ID：12709176
> 
> 赞同：0
> 
> 时间：2012-10-03T13:07:16.473
> 
> 标签：iphone, objective-c, ios, uitableview, uinavigationcontroller

我有一个`UINavigationController`，`UITableView`我正在使用它`editButtonItem`来编辑`UITableView`.

这是代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.editButtonItem.title = @"تحرير";
    self.navigationItem.rightBarButtonItem = self.editButtonItem;
} 
```

首次启动时，编辑按钮的标题会根据需要显示。但是当我点击它时，表格视图会进入编辑模式并`Done`显示出来。当我点击时`Done`，标题重置为默认值`Edit`。

我是否必须在每个切换中设置标题：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated; 
```

或者有没有更好的方法来做到这一点？我还想在编辑模式下更改“完成”文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:10:24.423

是的，如果你想要自定义标题，你必须这样做

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:14:15.267

在 .h 文件中像下面这样取一个`UIBarButtonItem`..

```
UIBarButtonItem *btnSave; 
```

之后在 .m 文件中

```
-(void)viewWillAppear:(BOOL)animated
{
    btnSave = [[UIBarButtonItem alloc]init];
    btnSave.target = self;
    btnSave.action = @selector(btnEdit_Click:);
    btnSave.title = @"Edit";// here give title which you want...
    self.navigationController.topViewController.navigationItem.rightBarButtonItem = btnSave;
}

-(IBAction)btnEdit_Click:(id)sender
{
        if ([btnSave.title isEqualToString:@"Edit"]) {
              ///something do here and also change the title of button here
             [btnSave setTitle:@"Save"];// just for an example

        }
        else {
              ///something do here and also change the title of button here
              [btnSave setTitle:@"Edit"];//just for an example
        }
} 
```

我希望这可以帮助你...

:)

# php - 成功执行 php 脚本的批处理脚本代码和设置到底是什么

> ID：12709178
> 
> 赞同：0
> 
> 时间：2012-10-03T13:07:18.980
> 
> 标签：php, batch-file, path, cron

我有一个连接到数据库并进行插入/更新的 php 脚本，显然，如果我使用浏览器运行脚本，它会成功执行，将其移入生产中不会发生这种情况。

我想问一下如何使用批处理脚本调用 php.exe，然后运行我创建的 php 脚本来执行插入/更新。

我有 ff: 设置

我正在使用带有ff的xampp：

webdirectory/cronjobs/cronjob.php -> 插入和更新 webdirectory/cronjobs/runscript.bat -> 将运行 cronjob.php

```
runscript.bat
@echo off
php.exe -f ../webdirectory/cronjobs/cronjob.php

cronjob.php

include_once('../db/dbcon.php');
$test = $db->run();
.... insert/update codes 
```

此外，当我尝试使用 Win7 的命令行直接运行批处理脚本时，使用***drive:>/xampp/php/php.exe -f drive:>xampp/htdocs/webdirectory/cronjobs/cronjob.php***

我得到了 ff: 错误；

```
Warning: include_once(): Failed opening '../webdirectory/db/dbcon.php' for inclusion (include_path='.; E:\xampp\php\PEAR') in E:\xammp\htdocs\webdirectory\db\dbcon.php on line xx 
```

我猜相对文件路径失败了；后续问题，这是否意味着我必须编辑脚本文件并将路径设置为绝对路径？我应该使用**e:/xampp/htdocs/webdirectory/db/dbcon.php**而不是使用**../webdirectory/db/dbcon.php**？在我看来是件坏事...

 **有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:12:32.797

将目录更改为脚本的位置，以使所有相对路径在从脚本目录外部执行时都能正常工作

**cronjob.php**

```
chdir(__DIR__);
include_once('../db/dbcon.php'); 
```**

# c# - 从工作线程调用 MainThread 上的事件

> ID：12709183
> 
> 赞同：1
> 
> 时间：2012-10-03T13:07:35.060
> 
> 标签：c#, multithreading, thread-safety

我无法从主线程中的辅助线程调用事件。事件处理程序不在主线程上执行。谁能给我一些关于我做错了什么的指示。

谢谢

```
namespace ThreadSyncExample
{
  class Program
  {
    static void Main(string[] args)
    {
      Console.WriteLine("MainThread: " + System.Threading.Thread.CurrentThread.ManagedThreadId);

      Execute execThe = new Execute();
      execThe.FinishedThread += (src, arg) =>
      {
        //This shoould be executed on MainThread right?
        Console.WriteLine("Thread Id: " + System.Threading.Thread.CurrentThread.ManagedThreadId);
      };

      execThe.Run();
      Console.ReadKey();
    }

  }

  class Execute
  {
    public void Run()
    {
      Thread exec = new Thread(() =>
      {
        Console.WriteLine("Worker Thread : " + System.Threading.Thread.CurrentThread.ManagedThreadId);
        OnFinishedThread();
      });

      exec.Start();
    }

    public event EventHandler FinishedThread;
    protected virtual void OnFinishedThread()
    {
      if (null != FinishedThread)
      {
        EventArgs args = new EventArgs();
        FinishedThread(this, EventArgs.Empty);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:18:25.857

C# 事件基本上只是一个易于使用的委托集合，“触发”一个事件只会导致运行时循环遍历所有委托并一次触发一个。

因此，您的 OnFinishedThread 事件处理程序将在 Worker 线程上被调用。

如果你想让你的事件在主线程上，你必须这样`Invoke()`做。

**编辑 ：**

您似乎无权访问表单或 WPF（因此您无权访问`Invoke()`任何一个）

因此，您必须通过线程同步过程手动编组对主线程的调用。一般是痛。

可能最简单的解决方案是简单地使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，因为这样您不再需要手动编组对主线程的调用。

```
var worker = new BackgroundWorker();
worker.DoWork += (sender, e) =>
{
    // call the XYZ function
    e.Result = XYZ();
};
worker.RunWorkerCompleted += (sender, e) =>
{
    // use the result of the XYZ function:
    var result = e.Result;
    // Here you can safely manipulate the GUI controls
};
worker.RunWorkerAsync(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:19:06.153

FinishedThread() 事件处理程序将在执行 Execute.Run() 的同一线程上执行。仅仅因为您在 main() 中定义了 FinishedThread 事件处理程序的主体，并不意味着 main() 以某种方式定义了它的执行上下文。

您可以使用一些机制来执行线程编组：

1.  使用 system.windows.forms.control 并使用 Invoke 方法将函数调用编组回创建控件的线程。在后台，这将使用 Windows 消息循环的功能来处理实际的 marshal
2.  使用同步原语手动处理编组。

与其重复已经说明的内容，不如查看此答案以获取有关编组的更多信息：

[手动编组到线程](https://stackoverflow.com/questions/1038518/marshall-to-a-thread-manually)

# sql - scala正则表达式提取sql语句中的字段子句

> ID：12709192
> 
> 赞同：2
> 
> 时间：2012-10-03T13:08:05.283
> 
> 标签：sql, regex

我想开发一个简单的函数来替换sql语句中的fields子句

像这样的东西

```
replaceFields("select  * from x", "f1")
// should return "select f1 from x"

replaceFields("select top 10 *   FROM x", "f1")
// should return "select top 10 f1   FROM x"

replaceFields("select top 10 f3, f4    FROM x", "f1, f2")
// should return "select top 10 f1, f2    FROM x" 
```

我知道这应该很简单，但我尝试了几个正则表达式，但我似乎找不到它

```
"select * from".replaceFirst("""select (\w+) from""", "count(*)")
// returns "select * from"

"select * from".replaceFirst("""select(\b(.*))\bfrom""", "count(*)")
// returns "count(*)" 
```

但它没有用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:08:54.000

多亏了 gabber 的帮助，以及（不是）一点点正则表达式的挣扎，我找到了这个解决方案：

```
def replaceFields(sql: String, fields: String): String = {
  val parseSql = """(?imx)                #insensitive case, multiline, whitespaces and comments
    (^ select \s+ #(?:top \s+ \d+ \s+)?)  #m1: select clause and optional clauses
      (?:top \s+ \d+ \s+)?                #  top x clause (ignored match)
      (?:(?:distinct|all) \s+)?           #  distinct | all clause (ignored match)
    )
    (.+?)                                 #m2: the field clause I'm looking for, non greedy to leave spaces to match3
    (\s+ from \s+ .* $)                   #m3: the rest of the sql sentence, greedy spaces
  """.r
  val replace = "$1%s$3".format(fields)   // replace match2 with new fields
  parseSql.replaceFirstIn(sql, replace)
} 
```

这使：

```
scala> replaceFields("select * from x", "count(*)")
res1: String = select count(*) from x

scala> replaceFields("select top 24 f1, f2 from x", "f3, f4, f5")
res2: String = select top 24 f3, f4, f5 from x

scala> replaceFields("select  f1  from x", " f2,  f3 ")
res3: String = select   f2,  f3   from x

scala> replaceFields("select top 23 distinct f1, f2 from x", "f3, f4, f5")
res0: String = select top 23 distinct f3, f4, f5 from x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:19:15.937

您正确替换

```
select(\b(.*))\bfrom 
```

如果您只想替换两者之间的部分，`select`并且`from`您不应该在要替换的字符串中包含这些部分。尝试

```
(?<=select\b)(.*?) from 
```

并将其替换为

```
count(*) from 
```

编辑：

您似乎想替换表中的列列表。

假设每个列名都在`TOP`您可以在 select 语句之后找到的关键字列表之后，并带有相关参数，我创建了这个正则表达式

```
(([^\s]+,\s+)*([^\s]+)\s+)from 
```

它基于这样的原则，即列名（您要替换的）是前面的*标记*（允许我使用这个词），`from`或者它与其他标记用逗号分隔。

然后以这种方式管理案件

```
token token, token FROM
      ^this is the starting point of substitution

token FROM
^this is the starting point 
```

用你想要的替换第一组，你就可以了。[在这里](http://rubular.com/r/WEoFI8Enut)测试

# python - 在 Python 中完全覆盖属性访问的正确方法？

> ID：12709194
> 
> 赞同：2
> 
> 时间：2012-10-03T13:08:17.110
> 
> 标签：python, descriptor

这个幼稚的类试图模仿基本 python 对象的属性访问。`dict`并`cls`显式存储属性和类。效果是访问`.x`实例将返回`dict[x]`，或者如果失败，则返回`cls.x`。就像普通物体一样。

```
class Instance(object):
    __slots__ = ["dict", "cls"]
    def __getattribute__(self, key):
        try:
            return self.dict[key]
        except KeyError:
            return getattr(self.cls, key)
    def __setattr__(self, key, value):
        if key == "__class__":
            self.cls = value
        else:
            self.dict[key] = value 
```

但它远没有那么简单。一个明显的问题是完全无视描述符。想象一下它`cls`有属性。Doing`Instance.some_property = 10`应该访问 中定义的属性`cls`，但会愉快地设置`some_property`为 中的属性`dict`。

然后是绑定`cls`到实例的方法的问题`Instance`，可能还有更多我什至不知道的问题。

似乎有很多细节可以让上述类尽可能接近python对象，而我迄今为止阅读的描述符文档并没有明确说明如何获得，简单地说，一切都是正确的。

我要的是实现完全替代 python 属性访问的参考。也就是说，上面的类，但是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:12:00.610

好吧，我需要这个答案，所以我必须进行研究。以下代码涵盖以下内容：

*   在设置和获取属性时，数据描述符优先。
*   非数据描述符被正确调用`__getattribute__`

下面的代码中可能有拼写错误，因为我必须从内部项目中翻译它。而且我不确定它是否 100% 像 python 对象，所以如果有人能发现错误，那就太好了。

```
_sentinel = object()

def find_classattr(cls, key):
  for base in cls.__mro__: # Using __mro__ for speed.
    try: return base.__dict__[key]
    except KeyError: pass
  return _sentinel

class Instance(object):
  __slots__ = ["dict", "cls"]
  def __init__(self, d, cls):
    object.__setattr__(self, "dict", d)
    object.__setattr__(self, "cls", cls)
  def __getattribute__(self, key):
    d = object.__getattribute__(self, "dict")
    cls = object.__getattribute__(self, "cls")
    if key == "__class__":
      return cls
    # Data descriptors in the class, defined by presence of '__set__',
    # overrides any other kind of attribute access.
    cls_attr = find_classattr(cls, key)
    if hasattr(cls_attr, '__set__'):
      return cls_attr.__get__(self, cls)
    # Next in order of precedence are instance attributes.
    try:
      return d[key]
    except KeyError:
      # Finally class attributes, that may or may not be non-data descriptors.
      if hasattr(cls_attr, "__get__"):
        return cls_attr.__get__(self, cls)
      if cls_attr is not _sentinel:
        return cls_attr

    raise AttributeError("'{}' object has no attribute '{}'".format(
      getattr(cls, '__name__', "?"), key))
  def __setattr__(self, key, value):
    d = object.__getattribute__(self, "dict")
    cls = object.__getattribute__(self, "cls")
    if key == "__class__":
      object.__setattr__(self, "cls", value)
      return

    # Again, data descriptors override instance attributes.
    cls_attr = find_classattr(cls, key)
    if hasattr(cls_attr, '__set__'):
      cls_attr.__set__(self, value)
    else:
      d[key] = value 
```

有趣的是我意识到我在几年前写过完全相同的东西，但是描述符协议太神秘了，我从那以后就忘记了。

编辑：修复了使用`getattr`在类上查找属性会在类级别调用它的描述符（即没有实例）的错误。将其替换为直接查看`__dict__`基础的方法。

# grails - Grails App 无法部署到 Heroku？

> ID：12709195
> 
> 赞同：0
> 
> 时间：2012-10-03T13:08:21.317
> 
> 标签：grails, plugins, heroku

我开发了一个 Grails 应用程序，并多次将其部署到 Heroku，没有出现任何问题。但是，就在最近，我更改了解决方案，以使用我称为“插件”的文件夹中的插件。然后，我基本上将以下代码添加到 BuildConfig 中，以便在应用程序中包含这些插件：

```
grails.plugin.location.'spring-security-ui'="plugins/grails-spring-security-ui" 
```

现在，当我将 delpoy 运行到 Heroku 时，出现以下错误：

```
|Generating plugin.xml for inline plugin
       Error |
       Error executing script War: java.lang.NullPointerException: Cannot get property 'file' on null object (Use --stacktrace to see the full trace)
 !     Failed to build app
 !     Heroku push rejected, failed to compile Grails app 
```

我认为这是由于我通过新方法添加到解决方案中的新插件。谁能告诉我我是否遗漏了什么或出了什么问题？

我也在本地对此进行了测试并且运行良好：-S

谢谢

编辑 1……

我试图在本地构建 WAR 文件，我得到以下信息：

```
Building WAR file.....
| Error Exception occurred trigger event [CreateWarStart]: /home/admin/workspace/APP_NAME/grails-app/migrations does not exist. (Use --stacktrace to see the full trace)
| Done creating WAR target/APP_NAME-0.1.war 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:58:04.660

尝试`grails war`在本地查看是否可以重现该问题。

这可能与2.0.4 中修复的[GRAILS-9006](http://jira.grails.org/browse/GRAILS-9006)有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:25:21.210

通过尝试多种不同的方法，我发现 Heroku 在处理 Grails 中的本地插件方面很垃圾。所以我搬到了[Jelastic](http://jelastic.com/)并像做梦一样奔跑:-)

谢谢您的帮助！！

# sql - 左外连接和按问题分组

> ID：12709198
> 
> 赞同：0
> 
> 时间：2012-10-03T13:08:28.313
> 
> 标签：sql

我写了一个查询。此查询总和来自 2 个不同的表的字段。并按主表 id 字段分组。但是第二个左外连接没有分组，给了我不同的结果。

```
SELECT s.*,
       f.firma_adi,
       sum(sd.fiyat) AS konak,
       sum(ss.fiyat) AS sponsor
FROM   fuar_sozlesme1 s
       INNER JOIN fuar_firma_2012 f
         ON ( s.cari = f.cari )
       LEFT OUTER JOIN fuar_sozlesme1_detay sd
         ON ( sd.sozlesme_id = s.id )
       LEFT OUTER JOIN fuar_sozlesme1_sponsor ss
         ON ( ss.sozlesme_id = s.id )
GROUP  BY s.id
ORDER  BY s.id DESC 
```

我知道，这真的很复杂，但我坚持这个问题。我的问题是：为什么 second`left outer join`不是正确 sum of field 。如果我删除第二个`left outer join`或第一个，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:56:45.010

问题是您的数据有多个维度，并且行数成倍增加超出了您的预期。我建议您在不使用 group by 的情况下对一个 id 运行查询，以查看连接产生了哪些行。

解决此问题的一种方法是使用相关子查询：

```
select s.*, f.firma_adi,
       (select SUM(sd.fiyat)
        from fuar_sozlesme1_detay fd
        where sd.sozlesme_id = s.id
       ) as konak,
       (select SUM(ss.fiyat)
        from fuar_sozlesme1_sponsor ss
        where (ss.sozlesme_id = s.id)
       ) as sponsor
from fuar_sozlesme1 s inner join
     fuar_firma_2012 f
     on (s.cari = f.cari)
order by s.id DESC 
```

顺便说一句，您似乎使用 MySQL（因为您的查询不能用任何其他方言解析）。您应该使用您正在使用的数据库版本标记您的问题。

# matlab - 旋转图像后保留大小

> ID：12709203
> 
> 赞同：0
> 
> 时间：2012-10-03T13:08:36.283
> 
> 标签：matlab, image-processing

我有一个二值图像 lu，当我旋转图像时，图像 lu 的大小会发生变化，但我需要保留图像的大小：

```
m=2048;
n=3072;
ODcenter =1.0e+03 *[2.0345    0.9985]
OD=ODcenter ;
X=zeros(m,n); %% m,n is size of image
t = 0:.1:2*pi;
ODradius = norm(ODcenter(2) - ODcenter(1)) / 2;
xm2 = round(2*ODradius*cos(t)+OD(1));
ym2 = round(2*ODradius*sin(t)+OD(2));

 imCircleAlphaData2 = roipoly(X,xm2,ym2);
 figure; imshow(imCircleAlphaData2);
 lu=imCircleAlphaData2;

mask1 = true(size(lu));  %# Create a matrix of true values the same size

mask1(ODcenter(2):end,:) = false;   %# Set the lower half to false
lu(~mask1) = 0;  %# Set all elements in lu corresponding to mask 1==0

mask2 = true(size(lu));
mask2(:,ODcenter(1):end) = false;   %# Set the right of the upper half to false
lu(~mask2) = 0;  %# Set all elements in lu corresponding mask 2==0
figure;
imshow(lu); % shows left upper

lurot= imrotate(lu,45);
 figure,imshow(lurot) 
```

lurot 和 lu 的大小不同。即使旋转后图像的某些部分会被裁剪，我如何保留图像的大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:13:18.110

基本上，您有两个使用 Matlab 的选项[`imrotate`](http://www.mathworks.com/help/images/ref/imrotate.html)：

*   使用`crop`which 将使输出图像与输入图像大小相同，裁剪旋转图像以使其适合
*   使用`loose`它将使输出图像足够大以包含整个原始旋转图像。通常，这会使输出图像大于输入图像。

```
lurot= imrotate(lu,45,'nearest','crop'); 
```

# ruby-on-rails - NoMethodError：nil:NilClass 的未定义方法“每个”

> ID：12709204
> 
> 赞同：0
> 
> 时间：2012-10-03T13:08:44.097
> 
> 标签：ruby-on-rails

我正在尝试按照教程在此处搜索和购买 Twilio 电话号码 --> http://www.twilio.com/docs/howto/search-and-buy

现在，我要做的就是列出可用的电话号码。现在我有一个 find_numbers 控制器，带有 new、create、destroy。

新动作有用户填写的参数，创建动作呈现节目，节目应该把它们放在一起，并列出数字。

但是，使用我拥有的代码，我得到了错误

```
NoMethodError in Find_numbers#create

Showing C:/Sites/dct/app/views/find_numbers/show.html.erb where line #1 raised:

undefined method `each' for nil:NilClass 
```

我认为这是因为我的 @numbers 变量返回 nil，因为搜索参数设置不正确。

这是我对新行动的看法：

```
<div class="container">
 <div class="row">
  <div class="span6 offset3">
    <%= form_tag("/find_numbers", :method => "post" ) do %>

      <%= label_tag(:in_postal_code, "Near US postal code (e.g. 94117):") %>
      <%= text_field_tag(:in_postal_code) %>

      <%= label_tag(:near_number, "Near this other number (e.g. +4156562345)") %>
      <%= text_field_tag(:near_number) %>

      <%= label_tag(:contains, "Matching this pattern (e.g. 415***EPIC):") %>
      <%= text_field_tag(:contains) %>  

      <%= submit_tag("Search", :class => "btn btn-large btn-primary") %>

    <% end %>
  </div>
 </div>
</div> 
```

这是 find_numbers 控制器

```
class FindNumbersController < ApplicationController

    def new
        @user = current_user
    end

    def create
        @user = current_user
        render 'find_numbers/show'
    end

    def show
        @user = current_user
        client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)

        search_params = {}
          %w[in_postal_code near_number contains].each do |p|
            search_params[p] = params[p] unless params[p].nil? || params[p].empty?
        end

        local_numbers = client.account.available_phone_numbers.get('US').local
        @numbers = local_numbers.list(search_params)    

    end

end 
```

这就是展示视图

```
<%= number.friendly_name %>
<%= number.phone_number %> 
```

从今天早上（中国时间）开始，我离答案越来越近了，但仍在兜圈子！非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:12:01.120

您可能想了解更多有关 Rails 的信息。我以前入门的书是[http://pragprog.com/book/rails4/agile-web-development-with-rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)

您现在所做的似乎与 rails 的设计工作方式背道而驰，但您可以在 create 操作中添加以下内容：

```
@user = current_user
client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)

search_params = {}
  %w[in_postal_code near_number contains].each do |p|
    search_params[p] = params[p] unless params[p].nil? || params[p].empty?
  end

local_numbers = client.account.available_phone_numbers.get('US').local
@numbers = local_numbers.list(search_params)
render 'find_numbers/show' 
```

还要记住你有对象 @numbers 所以在你的显示视图中你必须做一个每个循环，比如：

```
<% @numbers.each do |number| %>
  <%= number.friendly_name %>
  <%= number.phone_number %>
<% end %> 
```

我对 Twilio 一无所知，因此无法检查您对他们 API 的使用情况。

# string - 拆分字符串并存储在lua中的数组中

> ID：12709205
> 
> 赞同：7
> 
> 时间：2012-10-03T13:08:44.200
> 
> 标签：string, lua, split

我需要拆分一个字符串并将其存储在一个数组中。在这里我使用了 string.gmatch 方法，它精确地分割了字符，但我的问题是如何存储在数组中？这是我的脚本。我的示例字符串格式：touchedSpriteName = Sprite,10,rose

```
objProp = {}
for key, value in string.gmatch(touchedSpriteName,"%w+") do 
objProp[key] = value
print ( objProp[2] )
end 
```

如果我 print(objProp) 它给出了准确的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:19:56.950

您的表达式只返回一个值。您的文字将以键结尾，而值将保持为空。您应该重写循环以迭代一个项目，如下所示：

```
objProp = { }
touchedSpriteName = "touchedSpriteName = Sprite,10,rose"
index = 1

for value in string.gmatch(touchedSpriteName, "%w+") do 
    objProp[index] = value
    index = index + 1
end

print(objProp[2]) 
```

这会打印`Sprite`（ideone 上的演示[链接）。](http://ideone.com/EKZje)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T08:32:34.577

这是一个很好的函数，可以将字符串分解为数组。（参数是`divider`和`string`）

```
-- Source: http://lua-users.org/wiki/MakingLuaLikePhp
-- Credit: http://richard.warburton.it/
function explode(div,str)
    if (div=='') then return false end
    local pos,arr = 0,{}
    for st,sp in function() return string.find(str,div,pos,true) end do
        table.insert(arr,string.sub(str,pos,st-1))
        pos = sp + 1
    end
    table.insert(arr,string.sub(str,pos))
    return arr
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-21T04:57:55.587

这是我制作的一个功能：

```
function split(str, character)
  result = {}

  index = 1
  for s in string.gmatch(str, "[^"..character.."]+") do
    result[index] = s
    index = index + 1
  end

  return result
end 
```

你可以称之为：

```
split("dog,cat,rat", ",") 
```

# android - 不知道如何从服务更新小部件

> ID：12709206
> 
> 赞同：0
> 
> 时间：2012-10-03T13:08:43.657
> 
> 标签：android, android-widget, background-music, android-music-player

我一直在尝试为我的音乐应用程序制作一个小部件。该应用程序具有处理媒体播放器的服务，以便我可以“最小化”应用程序并继续听音乐。我知道我需要从服务更新小部件，但我发现的所有示例都希望我在每次更新时启动一个新服务，这不是我想要的。

任何帮助表示赞赏！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:18:29.023

你也可以在没有服务的情况下做到这一点。建议使用该服务，因为如果您的更新花费太多时间，android 可能会关闭它并给出应用程序无响应 (ANR) 错误消息。这些情况就像您发送 Web 服务请求时一样。否则，您可以使用您的自定义 AppWidgetProvider 来更新您的小部件（无需提供服务），使用 RemoteViews（与您在服务中执行的方式相同）。有关如何执行此操作的更多信息，请参阅[此](http://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider)

# vim - Vim 复制并粘贴文本到同一行

> ID：12709213
> 
> 赞同：2
> 
> 时间：2012-10-03T13:08:59.870
> 
> 标签：vim

我有一个输入文本如下 -

```
(command (and (A B C) ))
(command (and (D E F) ))
(command (and (G H I) ))
...
... 
```

我想在同一行复制和粘贴部分文本

```
(command (and (A B C) (A B C)))
(command (and (D E F) (D E F)))
(command (and (G H I) (G H I)))
...
... 
```

是否可以使用 VI Editor 自动完成？

**更新**：我想我错过了一个重要的点，即值 A、B、C ... I ... 可以具有可变长度。我只是将它们用作符号。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:25:26.960

### 如果所有行的长度和格式与您的示例中的相同：

将光标放在括号上或内部的任何位置`(A B C)`：

`v``a``(``Ctrl`+`v`

现在您已`(A B C)`选择并处于块选择模式。使用任何机制来阻止选择向下。如果是几行，你可以向下移动。如果它很多，您可以添加计数，或使用搜索 ( `/`) 或文件结尾`Shift`+ `g`。

一旦你选择了所有：

`y``/``)``Enter``p`

这将拉动（y）整个块，移动到关闭的括号，然后将块粘贴到它之后（p）。

### 如果线条的长度不同或无法合理选择为块

您可以使用模式替换。这特定于您的示例，我们正在寻找`(A B C)`其中 A、B 和 C 是包含在括号中并用空格分隔的大写字母的模式。我们取该模式的匹配加上后面的空格，并将其替换为该模式的匹配，一个空格，然后再次匹配该模式。

```
:%s/\(([A-Z] [A-Z] [A-Z])\) /\1 \1/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:13:55.360

（这些在 vim 中对我有用）

**使用块选择：**

```
14l<C-v>jj6ly7lp 
```

**使用宏（如果长度不同）：**

使用以下命令记录宏：

```
qqf(;vf)y;pj0q 
```

然后根据需要重复：

```
100@q 
```

适用于 100 行的文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:17:22.510

是的，在 vim 中有几种方法可以做到这一点（就像大多数事情一样）。我可能会选择一个快速宏：转到第一行并`qa`从正常模式点击开始录制名为“a”的宏。现在手动对该行进行编辑。当然你会希望操作是通用的，所以不要只输入值，使用 yank 和 put 来复制它。编辑完成后，退出到正常模式并按 j 向下移动到下一行（这将设置您在下一行运行宏）。`q`再次点击停止录制，然后键入`@a`以在下一行执行宏，然后再次点击以在下一行运行它，等等。或者，一旦你这样做`@a`一次，你可以`@@`再次运行相同的宏。你也可以提供一个计数`@@`来做几次。

或者，您可以使用该`:s`命令执行正则表达式，但这取决于您的行的实际外观以及您对正则表达式的使用程度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T13:31:54.837

我结合了 bmearns 和 Kev 给出的技术。

所以我所做的如下

1.  开始录制宏`q`。
2.  /( 找到左括号，所以它转到第二个。
3.  n 转到第三个。
4.  v 标记视觉块
5.  /) 搜索括号的结尾
6.  y 复制视觉块
7.  n 转到下一个 ) 括号
8.  一次箭头键转到右括号旁边
9.  p 粘贴视觉块
10.  向下箭头键转到下一行。
11.  Home键转到下一行的第一个位置。
12.  `q`停止录制宏
13.  @a 对所有行执行相同的操作。

它工作得很好！非常感谢你们！

# c++ - 如何删除slist中的字符串

> ID：12709216
> 
> 赞同：-3
> 
> 时间：2012-10-03T13:09:12.907
> 
> 标签：c++

我是 STL 的新手，在 slist 中遇到问题。我有一个 slistalist。我需要从这个 slist 中删除字符串的最后一个条目假设“版本”。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:51:35.893

因为`std::slist<T>`您不能删除迭代器直接指向的元素。您需要找到它之前的元素。要找到要擦除的第一个元素，我将使用`std::adjacent_find()`并忽略谓词中的第一个参数：

```
void erase_value(T const& value, std::slist<T>& l) {
    auto it = std::adjacent_find(l.begin(), l.end(),
        [=](T const&, T const& v) {
            return v == value;
        });
    if (it != l.end()) {
        l.erase_after(it);
    }
} 
```

要删除最后一个元素，您需要继续查找，记住以前找到的元素，然后删除最后一个找到的元素。也就是说，找到第一个元素，然后，虽然可能有更多，但继续寻找。

# jquery - Jquery Fancy Box 加载问题 AJAX 响应

> ID：12709221
> 
> 赞同：0
> 
> 时间：2012-10-03T13:09:32.497
> 
> 标签：jquery, fancybox

在我下面的代码中，单击链接时它不会在 AJAX 响应之后加载花哨的框。

`<a>`标签的id是动态生成的。

但是，当我第二次单击相同的链接时，它会加载，但 AJAX 功能也会被调用。

```
$(document).ready(function()
{

   $(".cont").live('click',function(e)
    {
        //Cancel the default action (navigation) of the click.
        e.preventDefault();

        var contentId = $(this).attr('id');

        $('#apps').load('/app/get-app-details', function(){
            $("#"+contentId).fancybox();
        });

    });

  });

<a class="cont" href="#device_detection" id="apps_<?= $regUsers->id; ?>"> Click to view apps</a> 
```

请给我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T10:19:57.250

这是有效的。可能其他人有用

```
 $(".cont").live("click",function() {

      link=($(this).attr('href'));

            $.fancybox({
            'width'                : '1000',
            'href'                 : link,
            'height'            : '750',
            'autoScale'         : false,
            'transitionIn'        : 'none',
            'transitionOut'        : 'none',
            'type'                : 'iframe'
            }); 

      return false; // don't follow the link!
           }); 
```

Live 已被最新的 jquery 弃用。因此您可以使用

```
$("body").on("click",".cont",function() {

      link=($(this).attr('href'));

            $.fancybox({
            'width'                : '1000',
            'href'                 : link,
            'height'            : '750',
            'autoScale'         : false,
            'transitionIn'        : 'none',
            'transitionOut'        : 'none',
            'type'                : 'iframe'
            }); 

      event.preventDefault(); // don't follow the link!
           }); 
```

# wpf - WPF Designer vs Qt Designer 和 Widget Parenting

> ID：12709223
> 
> 赞同：2
> 
> 时间：2012-10-03T13:09:41.023
> 
> 标签：wpf, qt, widget, designer

我是一位经验丰富的 C++/Qt 开发人员，但也是新手 C#/WPF 开发人员，我想知道我是否缺少 Visual Studio 2010 WPF 设计器的某些内容。

在 Qt 中，所有小部件都有父级。我发现这个概念在以编程方式构建 GUI 和在设计器中都非常有用。根据我对 Qt 设计器的记忆（不幸的是，我的新公司不支持 Qt），您可以轻松地拖动小部件并正确地重新设置它们的父级。如果设计师不知何故感到困惑，那么您可以在属性框中将父级重置为您需要的任何内容。我发现 WPF 中的类似想法很难执行。

在 Visual Studio 设计器中，当我拖动小部件时，它们有时只会获得正确的父级。通常情况下，我必须转到 xaml 并将我正在编写的小部件剪切并粘贴到 xaml 的不同部分，以便它获得正确的父级。我知道 xaml 的 DOM 树与小部件父树很好地平行，但我发现这在 Qt 中更加明确。

所以，我的问题是：这种在 WPF xaml 中重新做父母的剪切和粘贴方法是您能做的最好的，还是我缺少一些不错的设计师提示和技巧？

注意：这个问题显然不适用于以编程方式构建 GUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:15:42.520

根据我的经验，这归结为 VS2010 中缺少设计师。就我个人而言，我使用 WPF 设计器作为 GUI 外观的视图，然后手动编写大部分 XAML 代码。我几乎从不真正在设计器中做任何事情，例如拖动元素等。

为了回答您的问题，您提到的 xaml 方法中的剪切粘贴在我的经验中是“重新培养”元素的最有效方法。

# matlab - 将函数作为参数传递给另一个函数

> ID：12709226
> 
> 赞同：1
> 
> 时间：2012-10-03T13:09:53.473
> 
> 标签：matlab

我看到一个函数像

```
sigma = 3*e-2
svmTrain(...,@(X,y)gaussianKernel(X,y,sigma),...); 
```

这样的函数传递是怎么回事，有人能解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:14:07.233

该语法通过将这个现有函数的第三个参数具体绑定为 value 来`@(X,y) gaussianKernel(X, y, sigma)`创建一个[匿名函数](http://www.mathworks.com/products/matlab/examples.html?file=/products/demos/shipping/matlab/anondemo.html)。`guassianKernel(X, y, s)``sigma`

如果你检查`svmTrain`函数签名，你会看到它允许传入一个函数，这就是这个匿名函数的去向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:14:49.467

这里发生了两件事：

首先是函数传递。例如，您`foo`的代码中有一个函数，并且您想将它作为参数传递。在这种情况下，您使用`@`运算符。

```
function MainScript
    goo(@foo);     
end

function goo(fHandle)
    fHandle();
end

function foo
    disp('Hello world!');
end 
```

第二个是匿名函数。匿名函数与其他所有函数非常相似，不同之处在于它是在运行时定义的，没有名称，并且它将传递给它的变量的本地副本绑定到自身。（有关更多信息，请参阅[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)）。例如：

```
 function MainScript
     foo = @() (disp('Hello world!'));
     goo(@foo);   
 end 
```

# javascript - 如何从 modalPopUpExtender 中选择的下拉列表值加载 RadEditor 内容

> ID：12709229
> 
> 赞同：1
> 
> 时间：2012-10-03T13:10:01.637
> 
> 标签：javascript, asp.net, .net, ajaxcontroltoolkit

我正在使用带有 AjaxControlToolkit 的 Visual Studio 2005 我有一个带有 ModalPopupExtender 的 aspx 页面。我有两个 DropDownList，当用户从第一个 DropDownList 中选择值时，第二次加载并且用户可以从第二个 DropDownList 中选择值。The thing is, that when second value is selected, I have to load the content of a RadEditor (from oracle 11g table) what i'm trying to do is to be able to keep the value, index of the second DropDownList, to load radEditor 内容，但每次实际页面时，modalPopUpupExtender 在 postBack 我都会丢失第二个 DropDownList 值。我尝试使用 WebService，然后能够加载 RadEditor 内容，我尝试了 CascadingDropDown 的 BehaviorID 属性，但我无法调用 webMethod 来加载 RadEditor 内容，我不知道如何获取第二个 DropDownList 的值。这是我的 aspx 代码：

```
<ajaxToolkit:ModalPopupExtender ID="mpeLstCandidat" runat="server" TargetControlID="btnLstCandidat"
                PopupControlID="pnlLstCandidat" BackgroundCssClass="modalBackground" DropShadow="True"
                CancelControlID="ibFermerpnlLstCandidat" Enabled="True" DynamicServicePath="" />
            <asp:Button ID="btnAssignerLettre" runat="server" Style="display: none" meta:resourcekey="Button8Resource1" />
            <ajaxToolkit:ModalPopupExtender ID="mpeAssignerModeleLettre" BehaviorID="mpeLettreBehavior"
                runat="server" TargetControlID="btnAssignerLettre" PopupControlID="plnAssignerLettre"
                BackgroundCssClass="modalBackground" DropShadow="True" PopupDragHandleControlID="pnlDrag"
                DynamicServicePath="" Enabled="True" />
            <asp:Panel ID="plnAssignerLettre" runat="server" Style="display: none" CssClass="modalPopup"
                Width="900px" EnableViewState="false">
                <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
                    <ContentTemplate>
                        <ajaxToolkit:TabContainer ID="TC_LettreCand" runat="server" ActiveTabIndex="0">
                            <ajaxToolkit:TabPanel ID="TP_ListeLettreCand" runat="server" HeaderText="TP_TableReference">
                                <HeaderTemplate>
                                    Liste&nbsp;
                                </HeaderTemplate>
                            </ajaxToolkit:TabPanel>
                            <ajaxToolkit:TabPanel ID="TP_Formulaire" runat="server" HeaderText="TP_LettreCand">
                                <HeaderTemplate>
                                    Formulaire&nbsp;
                                </HeaderTemplate>
                                <ContentTemplate>
                                    <asp:FormView ID="fvLettreCand" runat="server" Width="100%" HorizontalAlign="Justify"
                                        AllowPaging="True" DataKeyNames="ModeleLettreID" CssClass="SkinCJM" meta:resourcekey="fvTraitementResource1">
                                        <InsertItemTemplate>
                                            <table border="0" cellpadding="0" cellspacing="0" style="width: 100%">                                                   <%--------------------------CascadingDropDow Liste utilisant des WebServices--%>
                                                    <td align="left" style="width: 20%" class="css_detailViewHeaderStyle">
                                                        <asp:Label ID="Label13" runat="server" SkinID="skin_lblform" Text="Type :"></asp:Label>
                                                    </td>
                                                    <td align="left" style="width: 80%" class="css_detailViewHeaderStyle">
                                                        <asp:DropDownList ID="ddl_TypeLettreListe" runat="server" />
                                                        <ajaxToolkit:CascadingDropDown ID="ccd1_Type" runat="server" ServicePath="ModeleLettre_WebService.asmx"
                                                            ServiceMethod="ChercherTypesLettre" TargetControlID="ddl_TypeLettreListe" Category="Type"
                                                            PromptText="--Choisir type--" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="left" style="width: 20%" class="css_detailViewHeaderStyle">
                                                        <asp:Label ID="Label14" runat="server" SkinID="skin_lblform" Text="Modele :"></asp:Label>
                                                    </td>
                                                    <td align="left" style="width: 80%" class="css_detailViewHeaderStyle">
                                                        <asp:UpdatePanel ID="tt" runat="server">
                                                            <ContentTemplate>
                                                                <asp:DropDownList ID="ddl_modLettreListe" runat="server" Enabled="false" OnDataBinding="onDatabinding_Modlettre"
                                                                    AutoPostBack="true">
                                                                </asp:DropDownList>
                                                                <ajaxToolkit:CascadingDropDown ID="CascadingDropDown1" runat="server" ServicePath="ModeleLettre_WebService.asmx"
                                                                    ServiceMethod="GetModForType" TargetControlID="ddl_modLettreListe" ParentControlID="ddl_TypeLettreListe"
                                                                    Category="Modele" PromptText="--Choisir modèle--" UseContextKey="true" LoadingText="...chargement"
                                                                    BehaviorID="BehIDAssignerLettre" />
                                                            </ContentTemplate>
                                                        </asp:UpdatePanel>

                                                        <script type="text/javascript">

                                                                 function pageLoad(sender, args){
                                                                   if($get("ctl00_ContentPlaceHolder1_plnAssignerLettre") != null ){
                                                                    var sel = $get("ctl00_ContentPlaceHolder1_TC_LettreCand_TP_Formulaire_fvLettreCand_ddl_modLettreListe");
                                                                    var sv = sel.options[sel.selectedIndex].value;
                                                                    var test = "test"
                                                                    alert(sv);
                                                                    if ($get("ctl00_ContentPlaceHolder1_TC_LettreCand_TP_Formulaire_fvLettreCand_ddl_modLettreListe") != null) {

                                                                           var Mycdd = $find("BehIDAssignerLettre");  
                                                                         alert("après l'appele de behavior");
                                                                         alert(sel);
                                                                         alert(sv);
                                                                         alert(document.getElementById('<%=  fvLettreCand.clientID %>'));

                                                                  } }
                                                                 }

                                                                 function onPopulated(sv, forme)  
                                                                 {  
                                                                   ModeleLettre_WebService.GetContenuLettre(sv, forme, OnComplete, OnError, OnTimeOut);
                                                                 } 

                                                                 function OnComplete(arg)
                                                                 {
                                                                    alert(arg);
                                                                 }

                                                                 function OnTimeOut(arg)
                                                                 {
                                                                    alert("timeOut has occured");
                                                                 }

                                                                 function OnError(arg)
                                                                 {
                                                                    alert("error has occured: " + arg._message);
                                                                 }
                                                        </script>

                                                    </td>
                                                </tr>
 <tr>
                                                    <td align="left" style="width: 12%" class="css_detailViewHeaderStyle" valign="top">
                                                        <asp:Label ID="LbContenu" runat="server" SkinID="skin_lblform" Text="Contenu :"></asp:Label></td>
                                                    <td align="left" style="width: 70%" class="css_detailViewHeaderStyle">
                                                        <telerik:RadEditor ID="reContenu" runat="server" EditModes="Design, Html" EnableTheming="True"
                                                            Width="100%" Language="fr-FR" Content='<%# Bind("Contenu") %>'>
                                                            <CssFiles>
                                                                <telerik:EditorCssFile Value="~/App_Themes/ThemeCJM/HTMLEditor.css" />
                                                            </CssFiles>
                                                            <Tools>
                                                                <telerik:EditorToolGroup>
                                                                    <telerik:EditorTool Name="Bold" />
                                                                    <telerik:EditorTool Name="Italic" />
                                                                    <telerik:EditorTool Name="Underline" />
                                                                    <telerik:EditorTool Name="ForeColor" />
                                                                    <telerik:EditorSeparator />
                                                                    <telerik:EditorTool Name="JustifyLeft" />
                                                                    <telerik:EditorTool Name="JustifyCenter" />
                                                                    <telerik:EditorTool Name="JustifyRight" />
                                                                    <telerik:EditorTool Name="JustifyFull" />
                                                                    <telerik:EditorTool Name="JustifyNone" />
                                                                    <telerik:EditorSeparator />
                                                                    <telerik:EditorTool Name="Indent" />
                                                                    <telerik:EditorTool Name="Outdent" />
                                                                </telerik:EditorToolGroup>
                                                                <telerik:EditorToolGroup>
                                                                    <telerik:EditorTool Name="Undo" />
                                                                    <telerik:EditorTool Name="Redo" />
                                                                    <telerik:EditorTool Name="Copy" />
                                                                    <telerik:EditorTool Name="Cut" />
                                                                    <telerik:EditorTool Name="Paste" />
                                                                    <telerik:EditorTool Name="PasteFromWord" />
                                                                </telerik:EditorToolGroup>
                                                                <telerik:EditorToolGroup>
                                                                    <telerik:EditorTool Name="InsertLink" />
                                                                    <telerik:EditorTool Name="InsertImage" />
                                                                </telerik:EditorToolGroup>
                                                            </Tools>
                                                            <Content>
                                                            </Content>
                                                        </telerik:RadEditor>
                                                    </td>
                                                </tr> 
```

# git - Git：重复的签名人行

> ID：12709230
> 
> 赞同：2
> 
> 时间：2012-10-03T13:10:05.293
> 
> 标签：git, githooks

我有一个新的 git 存储库，只有两次提交，一次推送到 GitHub。然后我做了

```
chmod -R a+x * .* 
```

使我的所有文件都可执行。然后我还删除了一个文件，但是当我尝试

```
git commit -m "Removing file" 
```

我“突然”收到以下错误消息

```
Duplicate Signed-off-by lines. 
```

我根本没有使用 Signed-off-by 功能。

当两个第一个提交没有任何问题进行时，为什么会突然发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:23:58.270

好的，以下链接使我走上了正轨：

[http://willnorris.com/2009/02/git-duplicate-signed-off-by-lines](http://willnorris.com/2009/02/git-duplicate-signed-off-by-lines)

我意识到我的本地 .git 文件夹中的默认示例挂钩文件中有一个错误：

```
.git/hooks/commit-msg 
```

因此，在我运行以下命令（再次禁用该文件）后，我的问题消失了

```
chmod a-x .git/hooks/commit-msg 
```

干杯!

# javascript - 通过 for 循环发送信息

> ID：12709235
> 
> 赞同：1
> 
> 时间：2012-10-03T13:10:31.487
> 
> 标签：javascript, html, for-loop

目前我正在制作另一个 html5/javascript 广告。这个使用来自 cookie 的多个数据。为了正确渲染所有内容，我制作了一个 for 循环来获取信息，然后将其发送到另一个函数。

我的问题是它第一次加载太快，所以它跳过了图像。每次我必须刷新广告才能正确显示。到目前为止，我使用的所有 onload 函数都失败了（发送错误的数据，什么都没有或只有 1 个）。

这是项目的相关部分：

```
for (var i=0; i < 3; i++){
   pT.push("pT"+[i]);
   pM.push("pM"+[i]);
   ctx.push("ctxP"+[i]);
   cvs.push("cvsP"+[i]);

   cvs[i] = document.getElementById('canvas'+[i]);
   ctx[i] = cvs[i].getContext('2d');

   pT[i] =  new Image();
   pT[i].onload = function(){
       console.log("pT: "+ this.height);
   }
   pT[i].src = data.products[i].imageUrl;

   pM[i] =  new Image();
   pM[i].onload = function(){
       console.log("pM: "+ this.height);
   }
   pM[i].src = data.products[i].imageUrl;

   testing(pT[i], pM[i]);
}

function testing(pThumb, pMain){
   console.log(pThumb.height);
} 
```

我想要的是一种方法，以便在所有内容加载完成后发送所有信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:16:29.550

```
pT[i].onload = function() { 
    alert("Image is Loaded, do you thing on the image here");
}

otherFunction(pT,pM);
function otherFunction(pT,pM) {
    console.log(pT,pM);
}

pT[i] =  new Image();
pT[i].onload = function(){
   pM[i] =  new Image();
   pM[i].onload = function(){
       console.log("pM: "+ this.height);
       testing(pT[i], pM[i]);
   }
} 
pT[i].src = data.products[i].imageUrl;
pM[i].src = data.products[i].imageUrl; // this is very ugly but you'll be sure to call your function when both image are ready. Since i'm not the best with Canvas, I will accept any edit for a better code. 
```

# ssis - 包中的更新语句如何执行？

> ID：12709238
> 
> 赞同：0
> 
> 时间：2012-10-03T13:10:54.600
> 
> 标签：ssis

在 SSIS 包中，如果我在一个步骤中有多个 Update 语句，它们如何顺序或并行执行？

——金贾尔。

# amazon-ec2 - 再次：从 EC2 实例发送邮件（通过 php）

> ID：12709239
> 
> 赞同：3
> 
> 时间：2012-10-03T13:10:57.447
> 
> 标签：amazon-ec2, postfix-mta, php, amazon-ses

我已经看到很多关于使用 php 的邮件功能从亚马逊 EC2 实例发送邮件的问题的讨论。没有任何建议对我有用。

这是我的设置：

*   我有 ubuntu EC2 实例。
*   我按照亚马逊 SES 上的步骤使用为我创建的凭据安装后缀。我尝试了 stunnel 和直接方法。
*   我使用 swiftmail transport 根据[this](https://stackoverflow.com/questions/5294825/php-ec2-implementing-ses-help)发送我的邮件。发送邮件的传输函数返回 0 已投递。
*   我单独使用了php邮件，它返回true。但是，即使是垃圾邮件，也不会发送任何邮件。

顺便说一句，我没有使用 SES 的生产服务。限制对我来说很好，我只想让它工作。

我怀疑我的身份验证不正确，我不明白为什么。我尝试远程登录 ...amazonaws.com 25 并且它已连接。但是当我在 telnet 中尝试命令 Mail From: ... 时，它说需要身份验证。

我已经想到了一个替代方案：sendgrid。对我来说太贵了。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:21:17.167

下面是我如何使用 Sendgrid 通过 PHP 从 EC2 实例发送邮件：

1.  注册一个 Sendgrid 帐户。您将收到用于发送电子邮件的用户名和密码。此外，Sendgrid 将手动验证您的帐户（可能是为了防止垃圾邮件）。
2.  在 ubuntu 中安装 PHP curl 库：`sudo apt-get install php5-curl`.
3.  使用此 PHP 代码发送电子邮件：

    ```
    $url = 'http://sendgrid.com/';
    $user = 'sendgrid_user';
    $pass = 'sendgrid_password'; 

    $params = array(
        'api_user'  => $user,
        'api_key'   => $pass,
        'to'        => $dest_addr,
        'subject'   => $subject,
        'html'      => $body,
        //'text'      => 'testing body',
        'from'      => $from_addr,
      );

    $request =  $url.'api/mail.send.json';

    $session = curl_init($request);
    // Tell curl to use HTTP POST
    curl_setopt ($session, CURLOPT_POST, true);
    // Tell curl that this is the body of the POST
    curl_setopt ($session, CURLOPT_POSTFIELDS, $params);
    // Tell curl not to return headers, but do return the response
    curl_setopt($session, CURLOPT_HEADER, false);
    curl_setopt($session, CURLOPT_RETURNTRANSFER, true);

    // obtain response
    $response = curl_exec($session);

    //If the result is {"message":"success"}, then the mail is sent.  
    curl_close($session); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:58:30.150

postfix 的一种替代方法是使用“simple smtp”（[ssmtp](http://www.techrepublic.com/blog/security/use-ssmtp-to-send-e-mail-simply-and-securely/440)），它将提供其他程序/框架可能使用的工作*发送邮件。*在此示例中，ssmtp 将通过 gmail 帐户发送电子邮件。

1.  如果您还没有 gmail 帐户，请先打开一个
2.  确保您**绝对没有**安装并发邮件应用程序，如 xmail 或 postfix，否则会干扰
3.  然后安装 ssmtp ：`sudo apt-get install ssmtp`
4.  然后编辑`/etc/ssmtp/ssmtp.conf`（见下文）
5.  然后编辑`/etc/ssmtp/revaliases`（见下文）
6.  然后测试：`echo message content | sendmail -v test@something.com`
7.  （可选）如果它不起作用，请查看日志：`ll /var/log/mail.*`和`cat ...`

*ssmtp.conf*的内容应该是：（取自我的 puppet 模块，用您的数据替换 <%= %> 部分）

```
root=<%= email %>
mailhub=smtp.googlemail.com:465
AuthUser=<%= email %>
AuthPass=<%= password %>
FromLineOverride=YES
UseTLS=YES 
```

*警告：conf 文件应该有 unix eols。*

*重命名*的内容应该是：

```
root:<%= email %>:smtp.googlemail.com:465 
```

这种技术非常简单，但我想如果您需要发送数百封电子邮件，它就无法扩展。

另一个很好的链接（法语）：[http ://doc.ubuntu-fr.org/ssmtp](http://doc.ubuntu-fr.org/ssmtp)

# windows-runtime - Windows 商店应用游戏

> ID：12709244
> 
> 赞同：3
> 
> 时间：2012-10-03T13:11:24.287
> 
> 标签：windows-runtime, windows-store-apps

我想创建简单的 2D 游戏（触摸/点击获胜），并且我有使用 WP7 的 C# 和 XNA 的经验。

但是现在在 W8 没有 XNA afaik。

我必须为这款游戏使用哪些技术？我想在桌面 W8 和 WinRT 上运行它。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:14:35.433

如果游戏在图形上足够简单——您可以在 Windows Phone 上使用 Silverlight，在 Windows 8 上使用 XAML，这样您就可以共享大量代码。另一种选择是在 Windows Phone 上使用 XNA，在 Windows 8 上使用[MonoGame。MonoGame](http://monogame.codeplex.com/)是 XNA 的开源版本。否则 - 在 Windows 上，您可以使用 DirectX 和 C++ 或使用 SharpDX 和 C#，但这些在 WP7 上不可用。他们可能只会在 WP8 上。最后 - Unity3D 支持即将推出，但尚未提供最终版本。

# ruby-on-rails - 如何将时间字段解析为小时、分钟和秒？

> ID：12709245
> 
> 赞同：2
> 
> 时间：2012-10-03T13:11:24.787
> 
> 标签：ruby-on-rails, ruby

如何将我的`start_at`列解析为小时、分钟和秒的三个不同字段，而不仅仅是一个？

**注意**：我想将其保留为一列，而不是制作三个不同的列。

这是我的代码：

桌子：

```
class CreateTimers < ActiveRecord::Migration
  def change
    create_table :timers do |t|
      t.time :start_at

      t.timestamps
    end
  end
end 
```

形式：

```
<%= form_for(@timer) do |f| %>

  <div class="form-inputs">
    <%= f.text_field :start_at %>
  </div>

  <div class="form-actions">
    <%= f.submit 'Start', :class => 'btn-primary span3' %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:21:14.693

如果您只想将时间分成三个单独的输入，您可以使用[`time_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select)帮助程序。

否则使用该`strftime`方法；检查[http://strfti.me](http://strfti.me)以获得更多帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:48:59.237

你没有说你的时间值是什么格式的。因为用户喜欢与众不同，如果你给他们一个自由格式的文本字段，你会得到不同格式的数据，所以你必须变通。

您可以尝试使用 DateTime 的[`parse`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-parse)方法，它为格式提供了一些灵活性。

```
DateTime.parse('2001-02-03T04:05:06+07:00')
#=> #<DateTime: 2001-02-03T04:05:06+07:00 ...>

DateTime.parse('20010203T040506+0700')
#=> #<DateTime: 2001-02-03T04:05:06+07:00 ...>

DateTime.parse('3rd Feb 2001 04:05:06 PM')
#=> #<DateTime: 2001-02-03T16:05:06+00:00 ...> 
```

还有[Chronic](http://chronic.rubyforge.org/) gem，它允许输入值的方式更加灵活。

一旦有了 DateTime 或 Time 值，就可以使用该对象的方法来获取小时、分钟和秒字段：

```
now = Time.now # => 2012-10-03 07:50:26 -0700
now.hour       # => 7
now.min        # => 50
now.sec        # => 26 
```

或者：

```
require 'date'
now = DateTime.now # => #<DateTime: 2012-10-03T07:52:53-07:00 ((2456204j,53573s,622304000n),-25200s,2299161j)>
now.hour # => 7
now.min  # => 52
now.sec  # => 53 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:22:04.980

```
start_at.strftime("%H %M %S") 
```

更详细的文档位于：[http ://www.ruby-doc.org/core-1.9.3/Time.html](http://www.ruby-doc.org/core-1.9.3/Time.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T13:18:21.767

例如

```
start_at - 2011-04-26 04:14:56 UTC 
```

用了几个小时：

```
start_at.strftime("%H") = "04" 
```

分钟：

```
start_at.strftime("%M") = "14" 
```

几秒钟：

```
start_at.strftime("%S") = "26" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T13:20:38.793

查看`strftime`http://www.ruby-doc.org/core-1.9.3/Time.html [_](http://www.ruby-doc.org/core-1.9.3/Time.html)

# regex - Apache2：重写查询字符串

> ID：12709250
> 
> 赞同：1
> 
> 时间：2012-10-03T13:11:45.487
> 
> 标签：regex, mod-rewrite, apache2

我有以下网址：

[http://www.mysite.com/blog.php](http://www.mysite.com/blog.php)

我希望它重写为：

[http://www.mysite.com/index.php?goto=blog](http://www.mysite.com/index.php?goto=blog)

如何在 Apache2 中做到这一点？

我见过很多反其道而行之的例子……

提前谢谢了，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:17:54.360

如果您想将所有 .php 重写为索引，您应该这样做：

```
RewriteRule ^(.*).php$ index.php?goto=$1 [L,QSA] 
```

如果您只想重写一些文件：

```
RewriteRule ^(blog.php|other_file.php)/(.*)?$ index.php?goto=$1/$2 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:23:06.473

试试这个（未经测试）：

```
^/(.*)\.php$ /index.php?goto=$1 
```

这甚至适用于其他页面，不仅适用于 blog.php。看看[文档](http://httpd.apache.org/docs/2.2/rewrite/intro.html)。

# android - Android 选择自定义字体

> ID：12709254
> 
> 赞同：4
> 
> 时间：2012-10-03T13:12:06.447
> 
> 标签：android, fonts

如何赋予用户选择字体的能力？在“首选项”中，我想更改字体和字体列表。

我以这种方式设置了字体：

```
mTimerLabel = (TextView)findViewById(R.id.label); 
Typeface typeface = Typeface.createFromAsset(getAssets(), "Fonts/digital-7i.ttf");
mTimerLabel.setTypeface(typeface); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:25:01.977

您已经描述了在 textView 中更改字体的正确模型。我无法理解你所面临的问题。调用 textView 的首选项，选择字体（或其 id）并设置它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:33:15.460

您必须将 ttf 存储在您的资产文件夹中。此外，AFAIK 你不能用大写字符命名任何文件夹——就像你在`Fonts`. 其余的方法都很好。您可能希望使用 Logcat 检查您存储在首选项中的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:37:20.367

将字体名称（即 digital-7i.ttf）存储在首选项中，当用户选择任何字体时，您可以从首选项中替换名称并像这样使用您的代码。

```
SharedPreferences Settings = getSharedPreferences(
            "<PREF_NAME>", MODE_PRIVATE);
    fontName = Settings.getString("<KEY>", "digital-7i.ttf");

mTimerLabel = (TextView)findViewById(R.id.label); 
Typeface typeface = Typeface.createFromAsset(getAssets(), "Fonts/"+fontName);
mTimerLabel.setTypeface(typeface); 
```

# android - 如何将图标包/模板包中的图标导入/添加到我的 android 应用程序中？

> ID：12709255
> 
> 赞同：3
> 
> 时间：2012-10-03T13:12:17.220
> 
> 标签：android, android-layout

我已经从这里下载了图标包和模板包：http: [//developer.android.com/guide/practices/ui_guidelines/icon_design.html#templatespack](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html#templatespack) 和图标包和其他东西从这里：[http://developer .android.com/design/downloads/index.html](http://developer.android.com/design/downloads/index.html)。

我不知道如何将它们放入我的应用程序中。它在代码中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:22:39.630

您可以将它们放在您的内部`res/drawable`并在您的应用程序中使用它们。您可以将它们放在您的 xml 文件中，也可以以编程方式添加它们。

一旦进入`drawable`，就可以通过`@drawable/resourcename`xml 文件访问它们。例如，

```
android:background="@drawable/image1" 
```

当以编程方式执行此操作时，我们所做的是设置一个`imageview`并将可绘制资源加载到图像视图中。

```
ImageView iv = (ImageView)findViewById(R.id.imageView1);  
iv.setImageDrawable(image);//where image is a drawable object 
```

[这](http://developer.android.com/guide/topics/resources/drawable-resource.html)将是一个很好的阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:18:07.727

它必须在`res/`您的项目的文件夹中。

将它们全部放在项目的可绘制文件夹中，然后可以使用`R.drawable.file_name`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:19:28.497

如果你想设置你的APP的启动图标，你应该把你的图标放在res/drawable-ldpi、-mdpi、-hdpi或-xhdpi中。

然后在 res 文件夹中创建一个名为 drawable 的文件夹并在其中添加图像。然后你可以通过调用从 XML 中使用它们：android:src"@drawable/imagename.png" 或以编程方式 getDrawable( *drawable ID* )。您也可以将图片放入资产中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T15:08:45.620

右键单击该`res/`文件夹并转到`new->other`.

展开 Android 文件夹并单击 android 图标集，然后单击下一步并一直按照向导进行操作。

然后你可以进行清理和重建，它们应该可用！

# c - 阅读 C 中的按键；例如：方向键、回车键

> ID：12709256
> 
> 赞同：1
> 
> 时间：2012-10-03T13:12:19.983
> 
> 标签：c, events, key, sdl, keylistener

我知道如何使用事件来测试何时按下某个键，但在 CI 中从未发现如何做到这一点。

我真正想要的是一个“KeyListener”，它监听、`Up`和箭头键。我需要它在*Linux*中工作，所以没有 Windows 库。而且，如果可能的话，不使用 3rd 方库对我来说是最好的选择。`Down``Left``Right`

 *我想要的伪代码：

```
int main() {

    // key listener {
    // if(key == up) { // do something }
    // if(key == down) { // do something }
    // if(key == left) { // do something }
    // if(key == right) { // do something }
    // }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:19:12.203

也可以使用 SDL 来读取键盘。

```
 SDL_Event event;
  .
  .
  /* Poll for events. SDL_PollEvent() returns 0 when there are no  */
  /* more events on the event queue, our while loop will exit when */
  /* that occurs.                                                  */
  while( SDL_PollEvent( &event ) ){
    /* We are only worried about SDL_KEYDOWN and SDL_KEYUP events */
    switch( event.type ){
      case SDL_KEYDOWN:
        printf( "Key press detected\n" );

        if (event.key.keysym.sym==SDLK_UP) 
            printf( "It was the UP key\n" );

        break;
      case SDL_KEYUP:
        printf( "Key release detected\n" );
        break;

      default:
        break;
    }
  }
  .
  . 
```

来源：[http ://www.libsdl.org/docs/html/guideinputkeyboard.html](http://www.libsdl.org/docs/html/guideinputkeyboard.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-04T00:16:42.170

这是基于我在此处的其他答案的技巧：[Capture characters from standard input without waiting for enter to be press](https://stackoverflow.com/a/70979820/4561887)。我使用 C 或 C++ 中的 bash 系统调用来读取和解析箭头按键。箭头键按 3 个字符输入，所以我一次解析 3 个字符并找出它是哪个箭头键。

无需按 Enter。按下箭头键后会立即检测到它们。

**read_arrow_keypresses_system_call.c：**

```
#include <stdbool.h> // For `true` (`1`) and `false` (`0`) macros in C
#include <stdint.h>  // For `uint8_t`, `int8_t`, etc.
#include <stdio.h>   // For `printf()`
#include <stdlib.h>

#define BUFSIZE 32

typedef enum arrowKey_e
{
    ARROWKEY_UNKNOWN = 0,
    ARROWKEY_UP,
    ARROWKEY_DOWN,
    ARROWKEY_LEFT,
    ARROWKEY_RIGHT,
} arrowKey_t;

// Modeled after my answer here: https://stackoverflow.com/a/54728664/4561887
const char* arrowKeyGetName(arrowKey_t arrowKey)
{
    const char* arrowKeyName = "TBD";

    switch (arrowKey)
    {
        case ARROWKEY_UNKNOWN:
            arrowKeyName = "ARROWKEY_UNKNOWN";
            break;
        case ARROWKEY_UP:
            arrowKeyName = "ARROWKEY_UP";
            break;
        case ARROWKEY_DOWN:
            arrowKeyName = "ARROWKEY_DOWN";
            break;
        case ARROWKEY_LEFT:
            arrowKeyName = "ARROWKEY_LEFT";
            break;
        case ARROWKEY_RIGHT:
            arrowKeyName = "ARROWKEY_RIGHT";
            break;
    }

    return arrowKeyName;
}

// Read a keyboard key press and return the character pressed, or a negative
// number in the event of an error.
// NB: for help reading output from system calls, see here:
//  1\. https://stackoverflow.com/a/28971647/4561887
//  2\. https://stackoverflow.com/a/18297075/4561887
arrowKey_t readArrowKeyPress()
{
    arrowKey_t arrowKeyPressed = ARROWKEY_UNKNOWN;

    // This bash cmd is from my answer here:
    // https://stackoverflow.com/a/70979348/4561887
    // `-n3` here means to read 3 chars at once, since an arrow key press
    // comes in as 3 chars.
    // The `-t .01` forces a timeout of that many seconds, which means the loop
    // interval will be this fast.
    const char* cmd = "bash -c 'read -s -t .1 -n3 c && printf \"%s\" \"$c\"'";
    FILE *fp = popen(cmd, "r");
    if (fp == NULL)
    {
        printf("\nError opening pipe!\n");
        return arrowKeyPressed;
    }

    char buf[BUFSIZE] = {0};
    char* retval1 = fgets(buf, BUFSIZE, fp);
    if (retval1 == NULL)
    {
        // printf("\nFailed to read cmd response.\n");
        // Timeout occured; just exit.
        return arrowKeyPressed;
    }

    // See meaning of this return value here:
    // https://stackoverflow.com/questions/43116/how-can-i-run-an-external-program-from-c-and-parse-its-output/28971647#comment60311936_28971647
    int retval2 = pclose(fp);
    if (retval2 == -1)
    {
        printf("\nError obtaining the cmd's exit status code.\n");
        return arrowKeyPressed;
    }
    else if (retval2 != 0)
    {
        printf("\nCommand exited with exit status code %i.\n", retval2);
        return arrowKeyPressed;
    }

    // Map the readings to arrow keys
    if ((buf[0] == 27) && (buf[1] == 91) && (buf[2] == 65))
    {
        arrowKeyPressed = ARROWKEY_UP;
    }
    else if ((buf[0] == 27) && (buf[1] == 91) && (buf[2] == 66))
    {
        arrowKeyPressed = ARROWKEY_DOWN;
    }
    else if ((buf[0] == 27) && (buf[1] == 91) && (buf[2] == 67))
    {
        arrowKeyPressed = ARROWKEY_RIGHT;
    }
    else if ((buf[0] == 27) && (buf[1] == 91) && (buf[2] == 68))
    {
        arrowKeyPressed = ARROWKEY_LEFT;
    }

    return arrowKeyPressed;
}

// int main(int argc, char *argv[])  // alternative prototype
int main()
{
    printf("Press any arrow key. Press Ctrl + C to quit.\n");
    fflush(stdout);

    while (true)
    {
        arrowKey_t arrowKeyPressed = readArrowKeyPress();
        if (arrowKeyPressed == ARROWKEY_UNKNOWN)
        {
            continue;
        }
        printf("Key pressed = %s\n", arrowKeyGetName(arrowKeyPressed));
    }

    return 0;
} 
```

示例构建和运行输出：

```
eRCaGuy_hello_world/c$ gcc -Wall -Wextra -Werror -O3 -std=gnu17 read_arrow_keypresses_system_call.c -o bin/a && bin/a
Press any arrow key. Press Ctrl + C to quit.
Key pressed = ARROWKEY_DOWN
Key pressed = ARROWKEY_UP
Key pressed = ARROWKEY_LEFT
Key pressed = ARROWKEY_RIGHT
Key pressed = ARROWKEY_UP
Key pressed = ARROWKEY_DOWN
Key pressed = ARROWKEY_LEFT
Key pressed = ARROWKEY_RIGHT
Key pressed = ARROWKEY_UP
Key pressed = ARROWKEY_DOWN
Key pressed = ARROWKEY_LEFT
Key pressed = ARROWKEY_RIGHT 
```*

# magnolia - 木兰面包屑

> ID：12709268
> 
> 赞同：0
> 
> 时间：2012-10-03T13:13:07.897
> 
> 标签：magnolia

我是 Magnolia 的新手，正在尝试为站点配置面包屑。我查看了文档，但它非常有限。

```
<div id="breadcrumb">
     <h5>${i18n['nav.selected']}</h5>
     <ol>
       [#list model.breadcrumb as item]
           [#if item_has_next]
               <li><a href="${item.href}">${item.navigationTitle}</a></li>
           [#else]
               <li><strong>${item.navigationTitle}</strong></li>
           [/#if]
       [/#list]
     </ol> 
</div> 
```

我找到了上面呈现面包屑的脚本，但在配置方面遇到了困难。如果可能的话，你能给我一个例子（带图片）吗？

非常感谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:26:01.273

我不确定您是否需要为您的网站配置面包屑。

如果您使用 STK（标准模板工具包）页面模板，例如`stkArticle`、`stkSection`等，那么您将免费获得面包屑路径。

我所做的是扩展 STK 模板，然后覆盖该`areas/main/templateScript`值以指向我自己的 freemarker 脚本。然后脚本如下所示：

```
    <div id="main" 角色="main">
        [@cms.area name="breadcrumb" content=content/]
        [@cms.area name="intro" content=content/]
        [@cms.area name="opener"/]
        [@cms.area name="内容"/]

        <!-- 在此处添加您的具体内容 -->
    </div>

```

希望这可以帮助。

# c# - 锁定并不能防止 InvalidOperationException：对象当前正在其他地方使用

> ID：12709270
> 
> 赞同：2
> 
> 时间：2012-10-03T13:13:17.313
> 
> 标签：c#, bitmap, locking, invalidoperationexception

我的印象是`lock()`会阻止多个线程同时访问一个对象。

但是，以下代码仍然经常抛出 InvalidOperationException（对象当前在别处使用）：

```
lock (this)
{
    localCopy = (Bitmap)this.bm.Clone();
    int x, y;
    float pX = this.p.x;
    int width = localCopy.Width;
    x = (int)Math.Round((double)(pX * (float)width));
    if (x >= localCopy.Width) x = localCopy.Width - 1;
    y = (int)Math.Round((double)(this.p.y * (float)localCopy.Height));
    if (y >= localCopy.Height) y = localCopy.Height - 1;
    colourPixel = localCopy.GetPixel(x, y);
} 
```

需要注意的一些事项：

*   我拆分了计算`x`以隔离异常的原因。它似乎来自访问位图。
*   我尝试创建位图的本地副本，但这只会导致相同的异常。我已经尝试过`Clone()`并创建一个新的位图。两者都不起作用。
*   我已经尝试锁定`this`（如所见）和位图对象。两者都不起作用。

我是否试图以`lock()`我不应该的方式使用？我误解了它的目的吗？我怎样才能防止`InvalidOperationException`s？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:47:16.827

可能尝试使用对象来锁定目的而不是锁定“this”。

类级别变量

```
private static object syncRoot = new Object(); 
```

当你使用

```
lock (syncRoot)
{
....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:08:56.920

我最终明白了这一点。我将锁移到位图属性的 getter/setter 方法中，并实现了“深拷贝”方法以尽快释放该属性。

```
private static object syncRoot = new Object();
private Bitmap _bm;
private Bitmap bm
{
    get
    {
        lock (syncRoot)
            return this._bm.DeepClone();
    }
    set
    {
        lock (syncRoot)
        {
            this._bm = value.DeepClone();
        }
    }
} 
```

DeepClone() 扩展方法是从[另一个问题的答案中](https://stackoverflow.com/a/1213649/50151)抄袭而来的：

```
public static T DeepClone<T>(this T a)
{
    using (MemoryStream stream = new MemoryStream())
    {
        BinaryFormatter formatter = new BinaryFormatter();
        formatter.Serialize(stream, a);
        stream.Position = 0;
        return (T)formatter.Deserialize(stream);
    }
} 
```

# php - 从记录中插入 html

> ID：12709272
> 
> 赞同：0
> 
> 时间：2012-10-03T13:13:28.090
> 
> 标签：php, sql, recordset

好的，请原谅我的愚蠢，但我对此很陌生。我有一个记录集，其中包含 html 标签和带有描述的格式，例如：

```
<P style="TEXT-INDENT: -18pt; MARGIN: 0cm 0cm 0pt 36pt; mso-add-space: auto; mso-list: l0 level1 lfo1" class=MsoListParagraphCxSpFirst>
<SPAN style="FONT-FAMILY: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol"><SPAN style="mso-list: Ignore">·
<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN> <FONT face=Calibri>
Bundle Includes
<?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /> <o:p></o:p></FONT></P> 
 <P style="TEXT-INDENT: -18pt; MARGIN: 0cm 0cm 0pt 72pt; mso-add-space: auto; mso-list: l0 level2 lfo1" class=MsoListParagraphCxSpMiddle>
 <SPAN style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Courier New'">
 <SPAN style="mso-list: Ignore">o
 <SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp; </SPAN></SPAN></SPAN>
<FONT face=Calibri>2 Year Extended Warranty For Toshiba 1 Year Notebook (Inc. Courier Pickup / Return Service) , Suitable for Satellite Pro C665, L730, L750, L770, P770, S750<o:p></o:p></FONT></P>
   <P style="TEXT-INDENT: -18pt; MARGIN: 0cm 0cm 0pt 72pt; mso-add-space: auto; mso-list: l0 level2 lfo1" class=MsoListParagraphCxSpMiddle>
  <SPAN style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Courier New'">
  <SPAN style="mso-list: Ignore">o
  <SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp; </SPAN></SPAN></SPAN>
   <FONT face=Calibri>Toshiba 75W ACAdaptor 3pin19V<o:p></o:p></FONT></P> 
   <P style="TEXT-INDENT: -18pt; MARGIN: 0cm 0cm 0pt 72pt; mso-add-space: auto; mso-list: l0 level2 lfo1" class=MsoListParagraphCxSpMiddle>
   <SPAN style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Courier New'">
    <SPAN style="mso-list: Ignore">o
   <SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp; </SPAN></SPAN></SPAN>
   <FONT face=Calibri>BitDefender Internet Security 2012 OEM<o:p></o:p></FONT></P>  <P style="TEXT-INDENT: -18pt; MARGIN: 0cm 0cm 0pt 72pt; mso-add-space: auto; mso-list: l0 level2 lfo1" class=MsoListParagraphCxSpLast> <SPAN style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Courier New'"><SPAN style="mso-list: Ignore">o<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp; </SPAN></SPAN></SPAN><FONT face=Calibri>Everki 16" Advance Compact Bag<o:p></o:p></FONT></P> 
```

现在我需要将其插入到 .php 页面中以使用格式编写描述。当我插入它时，它只是作为原始 html 出现。

这对某人来说很简单，所以你的帮助会很重要

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:28:32.993

您保存在数据库中的 HTML 代码很可能已对其 HTML 实体进行了编码。尝试调用`$myHTML = html_entity_decode($myHTMLFromDatabase)`您的数据。`urldecode()`使用and确保没有任何内容被转义`stripslashes()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:21:28.103

以格式保存 HTML 数据`Serialize`，同时使用它来显示`Unserialize`它。

参考：- [http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

[http://php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

# jquery - 访问框架集元素

> ID：12709273
> 
> 赞同：1
> 
> 时间：2012-10-03T13:13:30.977
> 
> 标签：jquery

搜索了与这个问题相关的网站，但没有找到我要找的东西。

我有一个带有两个子框架的框架集。
我在左框架中有一个链接列表，在右框架中有一个 id 为“myDiv”的 div。

使用 jQuery，当我将鼠标悬停在左侧名称中的链接上时，如何使用 .load() 方法加载右侧框架中的“myDiv”？

提前致谢。

# flash - 如何使用 FDT 在移动设备上测试 AIR 应用程序？

> ID：12709275
> 
> 赞同：0
> 
> 时间：2012-10-03T13:13:32.133
> 
> 标签：flash, air, fdt

遵循 FDT 教程，一切都很好，直到我尝试在设备上测试项目。

我可以在外部窗口中运行 swf，它是教程中的 .SWF，它可以生成随机颜色的圆圈。它有效。（本教程未能声明“大小”变量，可能会使人感到困惑。）

但是，我似乎无法弄清楚如何在设备上运行该项目，因为教程人员单击的图标（最初创建项目时）与我在我的 FDT 版本中的图标不同。此外，当他选择“运行方式”时，他可以选择他的设备，而我没有这些选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:34:27.097

我刚刚写了一篇关于如何使用 FDT 5.6 AIR for iOS 项目模板的教程。希望足够详细，可以使您走上正确的道路。

链接在这里：

[.SWFGEEK - 使用 FDT 5.6 AIR for iOS 项目模板](http://www.swfgeek.net/2012/10/17/using-fdt-5-6-air-for-ios-project-template/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:18:52.490

该网站上的教程已经过时，这就是为什么它看起来有点混乱。

要在设备上进行测试，您只需运行“FDT AIR 应用程序”配置，选择平台，如果是移动平台（例如 Android 或 iOS），您将看到在设备上进行测试的选项。

![在此处输入图像描述](../Images/63c5c05aca5daceb5e22c5609a7bebef.png)

下一个屏幕弹出...... ![在此处输入图像描述](../Images/ee1877655f0c0a71905f2e0049f3f0bd.png)

# c# - 为什么不在 C# 中使用静态析构函数

> ID：12709276
> 
> 赞同：2
> 
> 时间：2012-10-03T13:13:40.970
> 
> 标签：c#

我很想知道为什么 C# 中不允许使用静态析构函数。请注意，我不认为它们以任何其他语言存在。

我可以上一堂这样的课。

```
 class A
 {
      static A()
      {
         // here I can load a resource that will be avaliable for all instances 
         // of this class.
      }
 } 
```

当应用程序结束时，我可能需要释放资源。

因此，静态析构函数的语义可能如下：在应用程序结束时调用，用于包含它并在应用程序中初始化的类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:17:44.453

您的语义是一种可能的语义，但我想您还没有检查它对语言的所有影响。在我所知道的大多数（或多或少）动态语言中，破坏是一个看起来要复杂得多的话题。当不再引用该类时，为什么不调用析构函数？或者如果程序集被卸载？应该以什么顺序调用析构函数？...？

如果您只想在应用程序结束时执行一些代码，请查看 .Net 文档。有更简单、更可靠的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T13:23:23.450

> 因此，静态析构函数的语义可能如下： - 在应用程序结束时调用，在包含它的类上调用并在应用程序中充电。

您的语义依赖于您的程序在执行结束时执行特定操作，这比仅在进程正常执行结束时运行的一段代码更难正确处理。

考虑事务或文件管理操作。您必须手动处理进程的崩溃和意外终止，并尝试在下次运行时恢复，因此使用静态析构函数不会有太大帮助。.NET 托管世界倾向于[使用](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)模式而不是那种模式。现在，如果您对此有严重问题，请尝试将事件处理程序附加到`DomainUnloaded`事件上`AppDomain`并在那里执行清理。

您还可以尝试使用*单例*处理方式：

```
class A : IDisposable
{
    public static A Instance {get; private set;}

    public static A()
    {
        Instance=new A();
    }

    public void MethodA() {...}

    public void Dispose()
    {
        //...
    }

    ~A()
    {
        // Release your hard resources here
    }
} 
```

然后，使用安全的方法：

```
A.Instance.MethodA(); 
```

# nosql - Cassandra 列键自动递增

> ID：12709277
> 
> 赞同：19
> 
> 时间：2012-10-03T13:13:44.303
> 
> 标签：nosql, cassandra

我正在尝试了解 Cassandra 以及如何构建我的*列族 (CF)*，但这非常困难，因为我习惯了关系数据库。

例如，如果我创建简单的`users`CF 并尝试插入新行，如何像在 MySQL 中一样创建增量键？

我看到了很多示例，您只需输入用户名而不是唯一 ID，这会有点道理，但是如果我希望用户拥有重复的用户名怎么办？

另外，当我了解 cassandra 不支持运营商时，我该如何进行搜索`>`，所以类似的东西`select * from users where something > something2`不起作用。

也许最重要的问题是分组呢？我是否需要检索所有数据，然后使用我使用的任何语言对其进行过滤？我认为这会大大降低我的系统速度。

所以基本上我需要一些简短的解释如何开始使用 Cassanda。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T14:17:28.557

你的问题很笼统，但让我试一试。首先，您需要根据查询对数据进行建模。使用 RDBMS，您可以以某种规范化形式对数据进行建模，然后针对您的特定查询进行优化。Cassandra 无法做到这一点。您必须按照您打算读取的方式写入数据。这通常意味着以不止一种方式编写它。一般来说，如果您想有效地使用 Cassandra，它有助于完全摆脱您的 RDBMS 思维。

关于键：

*   它们在 Cassandra 中用作跨环的分布单位。因此，您的密钥将被散列并在环中分配一个“所有者”。使用 RandomPartitioner 保证均匀分布

*   假设您使用 RandomPartitioner（您应该），键没有排序。这意味着您不能要求一系列密钥。但是，您可以在单个查询中请求键列表。

*   键在某些模型中是相关的，而在其他模型中则不相关。如果您的模型需要按键查询，您可以使用您的应用程序知道的任何唯一值（例如 UUID）。有时键是标记值，例如表示一天开始的 Unix 纪元。这使您可以交给 Cassandra 一堆已知键，然后获得按列排序的一系列数据（见下文）。

关于查询谓词：

*   假设您正确建模以回答您的查询，您可以获得一系列数据。

*   由于列是按排序顺序写入的，因此您可以使用切片查询（非常快）查询从 A 列到 n 列的范围。您还可以使用复合列来稍微抽象一下这种机制。

*   您可以在基数较低的列上使用二级索引——这为您提供了按值查询的功能。

*   您可以创建自己的索引，其中数据按您需要的方式排序。

关于分组：

我想你指的是创建聚合。如果您需要实时数据，您将需要使用一些外部机制（如[Storm](https://github.com/nathanmarz/storm)）来跟踪数据并不断将相关聚合更新到 CF 中。如果您在批处理过程中创建聚合，Cassandra 与 Hadoop 具有出色的集成，允许您使用 Pig、Hive 或直接使用您选择的语言编写 map/reduce 作业。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T16:13:29.210

对于你的第一个问题：

> 我可以像在mysql中那样制作增量密钥吗

不，不是真的——不是 Cassandra 本地人。 [如何在 Cassandra 中创建自动增量 ID——](https://stackoverflow.com/questions/3935915/how-to-create-auto-increment-ids-in-cassandra)您可以在此处查看更多信息： [http ://srinathsview.blogspot.ch/2012/04/generating-distributed-sequence-number.html](http://srinathsview.blogspot.ch/2012/04/generating-distributed-sequence-number.html)

您的第二个问题更多关于您如何存储和建模 Cassandra 数据。

查看 stackoverflow 的搜索选项。很多有趣的问题！

1.  [从 MySQL 切换到 Cassandra - 优点/缺点？](https://stackoverflow.com/questions/2332113/switching-from-mysql-to-cassandra-pros-cons)
2.  [卡桑德拉数据模型](https://stackoverflow.com/questions/8466553/cassandra-data-model?rq=1)
3.  [Cassandra/NoSQL 新手：正确的建模方式？](https://stackoverflow.com/questions/10132766/cassandra-nosql-newbie-the-right-way-to-model?rq=1)
4.  [Apache Cassandra 架构设计](https://stackoverflow.com/questions/10838896/apache-cassandra-schema-design)
5.  [Apache Cassandra 的知识源](https://stackoverflow.com/questions/7820987/knowledge-sources-for-apache-cassandra)

最重要的是，[什么时候不使用 Cassandra？](https://stackoverflow.com/questions/2634955/when-not-to-use-cassandra)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:59:32.750

您可能想查看 PlayOrm。虽然我同意你需要打破 RDBMS 思维，但有时将主键作为用户 ID 是错误的选择。有时这是正确的选择（取决于您的要求）。

PlayOrm 是 noSQL 和关系概念的混合体，因为您需要两者，并且您可以使用连接和所有内容执行 Scalable-SQL。您只需要对您认为会增长到数十亿/万亿行的表进行分区，然后就可以查询这些分区。即使使用 CQL，您也需要对表进行分区。你可以根据什么来划分？对于某些用例来说，时间是好的。其他的可以由客户端分区，因为每个客户端实际上都是你的 noSQL 集群中的一个小型数据库。

就密钥而言，PlayOrm 会生成唯一的“集群”密钥，即主机名-uniqueidinThatHost，基本上类似于 TimeUUID，只是在我们在 a1、a2、a3 等集群中使用主机名时更短且更具可读性。

# nsis - 下拉菜单中项目之间的额外换行符

> ID：12709278
> 
> 赞同：1
> 
> 时间：2012-10-03T13:13:44.127
> 
> 标签：nsis

我正在使用 nsis 安装程序创建安装程序。在那个安装程序中，我需要放置一个用于货币选择的下拉菜单。

我使用的文本文件没有被正确插入，我用来分隔货币的换行符实际上在安装程序中使用了一个字符，而对于许可证页面，我对我使用的文本文件使用相同的扩展名我放在那里，它在那里工作正常。

如何过滤掉那些多余的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:25:18.090

如果没有示例文件，我不得不猜测实际问题是什么，希望它只是换行符：

```
Page custom mycustompage

!include nsDialogs.nsh
!include TextFunc.nsh

Function mycustompage
nsDialogs::Create 1018
Pop $0

; I don't have a list of things so I generate one on the fly for this example:
!tempfile MYLIST
!appendfile "${MYLIST}" "Foo$\r"
!appendfile "${MYLIST}" "Bar$\r$\n"
!appendfile "${MYLIST}" "Baz$\n"
File "/oname=$pluginsdir\thelist.txt" "${MYLIST}" ; include list in installer
!delfile "${MYLIST}"

${NSD_CreateDropList} 10u 10u 50% 100% ""
Pop $0

FileOpen $1 "$pluginsdir\thelist.txt" r
loop:
    FileRead $1 $2
    IfErrors endloop
    ${TrimNewLines} $2 $2
    StrCmp $2 "" loop ; skip empty line
    ${NSD_CB_AddString} $0 $2
    goto loop
endloop:

nsDialogs::Show
FunctionEnd 
```

# android - Android - 使用客户端证书通过 ws-security 访问 SOAP 服务

> ID：12709280
> 
> 赞同：0
> 
> 时间：2012-10-03T13:13:51.117
> 
> 标签：android, soap

Android - 使用客户端 x509 证书通过 ws-security 访问 SOAP 服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:24:16.113

尝试查看[http://code.google.com/p/ksoap2-android/](http://code.google.com/p/ksoap2-android/)这只是我知道我们可以用来与 Web 服务交互的一个库

为了处理安全问题，也许您应该扩展`HttpTransportSE`类并配置您的证书

# ruby-on-rails - 如何避免 Cucumber 中的步骤定义不明确？

> ID：12709284
> 
> 赞同：3
> 
> 时间：2012-10-03T13:14:08.320
> 
> 标签：ruby-on-rails, ruby, testing, cucumber, bdd

我遇到了模棱两可的步骤定义错误。以下场景存在于不同的功能文件中，并且具有相同的步骤：`Then I should see my profile page`. 我该如何避免这种情况发生？

```
# authentication.feature
Scenario: Successful sign in
  Given I visit the sign in page
  When I submit valid sign in information
  Then I should see my profile page

# signing_up.feature
Scenario: Successful sign up
  Given I visit the sign up page
  When I submit valid information
  Then I should see my profile page

# authentication_steps.rb
...
Then /^I should see my profile page$/ do
  page.current_path.should == user_path(@user)
end

# signing_up.feature
...
Then /^I should see my profile page$/ do
  page.current_path.should == user_path(@user)
end 
```

我也遇到了错误消息这个问题：

```
Scenario: Unsuccessful sign up
  ...
  Then I should see an error message

Scenario: Unsuccessful login
  ...
  Then I should see an error message 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:34:23.327

为什么不只保留 authentication_steps.rb 中的那个？我认为您可以使用任何功能文件中的所有步骤

# javascript - 使用 jquery 在每秒内重新加载一个 url

> ID：12709290
> 
> 赞同：1
> 
> 时间：2012-10-03T13:14:31.463
> 
> 标签：javascript, jquery

我想用 jquery 每秒重新加载一个 url，我尝试如下代码，这个代码只重新加载一次 url。我该怎么办？

```
<a href="http://myweb.com/" id="thisLink"></a>

setInterval(window.location = $('#thisLink').attr('href'), 1000); 
```

**演示：http:** [//jsfiddle.net/QBMLm/](http://jsfiddle.net/QBMLm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:18:34.927

如果它是您的页面，您可以在 head 中使用它：

```
<meta http-equiv="refresh" content="1;url=/"> 
```

当然，这只适用于它嵌入的页面，并且不会继续重新加载其他一些外部站点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:19:12.873

`setInterval`在浏览器重新加载之间不是持久的。此外，它需要一个函数作为第一个参数。您可以尝试以下方法：

```
setTimeout(function() {
    window.location = $('#thisLink').attr('href');
}, 1000); 
```

它会在重定向前等待 1 秒。如果您要重定向到的页面具有相同的代码，它将执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:16:47.330

一旦你重新加载 url（`window.location`更改），它的上下文（和范围）就`setInterval`变得毫无意义（页面被丢弃并加载下一个页面）。然后重新加载并`setInterval`重新分配脚本。

哦，从语法上讲，该代码是无效的。您可能希望将`window.location`部分包装在 a 中`function(){}`，例如

```
setInterval(function(){
  window.location = $('#thisLink').attr('href')
}, 1000); 
```

否则它实际上不是以间隔方式执行，而是立即执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T13:16:57.060

它只重新加载一次，因为一旦你改变`window.location`你离开你的页面。

您需要在新命名窗口中打开链接或将*子页面*嵌入iframe。

```
setInterval(function() {
    window.open($('#thisLink').attr('href'), 'mywindow', '');
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T13:17:32.160

看看这些可能对你有帮助：

[JS setInterval 只执行一次](https://stackoverflow.com/questions/7746505/js-setinterval-executes-only-once) [setInterval 和 jQuery.html 只更新一次？](https://stackoverflow.com/questions/5412591/setinterval-with-jquery-html-only-updates-once) [http://www.google.com/search?q=jquery+setinterval+only+running+once&aq=0&oq=jquery+setinterval+only+running+once&sugexp=chrome,mod=1&sourceid=chrome&ie=UTF-8](http://www.google.com/search?q=jquery+setinterval+only+running+once&aq=0&oq=jquery+setinterval+only+running+once&sugexp=chrome,mod=1&sourceid=chrome&ie=UTF-8)

# javascript - 如果 id 匹配，则删除标签但保留文本

> ID：12709293
> 
> 赞同：1
> 
> 时间：2012-10-03T13:14:39.497
> 
> 标签：javascript, dom

我有一个荧光笔功能，可以将匹配的单词格式化为带有黄色 bg-color 的锚，我需要一个函数来删除下一次搜索的锚元素。

第一个匹配词的标记如下所示：

```
<a id="searchword1" class="searchword" style="background-color: yellow; text-decoration: none; color: black;">my text</a> 
```

我需要删除锚点，但将我的文本留在那里。我的文档中还有其他我不想干涉的锚点。我需要在纯 Javascript（没有 jQuery）中执行此操作。

*   附加要求：删除标签后不要创建新行，保持原样。

感谢**enhzflep**，到目前为止的代码：

```
for (z=0;z<szam;z++){
    var removal = parent.frames['pagina'].document.getElementById("searchword"+z);
    var highlightedText = removal.innerHTML.toLowerCase;
    removeh(removal,highlightedText,doc);
    }

function removeh(node,high,doc) {
doc = typeof(doc) != 'undefined' ? doc : document;
    if (node.hasChildNodes) {
        var hi_cn;
        for (hi_cn=0;hi_cn<node.childNodes.length;hi_cn++) {
            removeh(node.childNodes[hi_cn],high,doc);           
        }
    }
        //1\. Get element containing text
    if (node.nodeType == 3) {
    tempnode = node.nodeValue.toLowerCase();
    if (tempnode.indexOf(high) != -1) {
    nv = node.nodeValue;
    nv = node.nodeValue;
    ni = tempnode.indexOf(high);
        //2\. Get the text it contains
    before = doc.createTextNode(nv.substr(0,ni));
    dochighVal = nv.substr(ni,high.length);
    after = doc.createTextNode(nv.substr(ni+high.length));
        //3\. Get the highlighted element's parent
    var daddy = node.parentNode;
        //4\. Create a text node:
    var newNode = document.createTextNode(dochighVal);
        //5\. Insert it into the document before the link
    daddy.insertBefore(before, node);
    daddy.insertBefore(newNode, node);
    daddy.insertBefore(after, node);
        //6\. Remove the link element
    daddy.removeChild(node);
    }
    }
} 
```

其中 num 是匹配单词的数量。

出于某种原因，这不起作用，请帮忙，我也会接受解决这个小问题的答案。

两个答案的方法是正确的，但它仍然有问题，因为它将结果文本与新行分开。这使得荧光笔功能将“我的单词”作为单独的临时节点值获取，并且无法突出显示 /my.word/ 的匹配项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:29:10.007

如果我理解正确，您希望将其转为：

```
<a id="searchword1" class="searchword" style="background-color: yellow; text-decoration: none; color: black;">my text</a> 
```

进入这个：

```
my text 
```

如果是这样的话，那就很容易了。

就目前而言，看起来您正在要求您显示的元素的子元素（该元素没有任何子元素，除了文本节点。我希望您的脚本被第 2 行冲洗 - 当它试图生一个不存在的孩子）

```
 //1\. Get element containing text

    var element = document.getElementById('searchWord1');

 //2\. Get the text it contains

     var highlightedText = element.innerHTML;

//3\. Get the highlighted element's parent

    var parent = element.parentNode;

//4\. Create a text node:

    var newNode = document.createTextNode(highlightedText);

//5\. Insert it into the document before the link

    parent.insertBefore(newNode, element);

//6\. Remove the link element

   parent.removeChild(element); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:38:27.460

如果您使用的是 jQuery，那将是简单的[**DEMO**](http://jsbin.com/ohohod/1/edit)

```
$('#searchword1').contents().unwrap(); 
```

但是，如果您只想为此使用 js，则[链接](https://stackoverflow.com/questions/4232961/jquery-remove-a-tag-but-keep-innerhtml)上有[user113716的解决方案](https://stackoverflow.com/users/113716/user113716)

[**演示**](http://jsbin.com/iheyer/1/edit)

```
var b= document.getElementsByClassName('searchword');

while(b.length) {
    var parent = b[ 0 ].parentNode;
    while( b[ 0 ].firstChild ) {
        parent.insertBefore(  b[ 0 ].firstChild, b[ 0 ] );
    }
     parent.removeChild( b[ 0 ] );
} 
```

# xml - 对多个 xml 文件应用替换列表

> ID：12709300
> 
> 赞同：1
> 
> 时间：2012-10-03T13:15:00.823
> 
> 标签：xml, macros, replace

我需要下一个案例的解决方案。我有一个 60.000 个单词的列表，我需要用相同的单词但用变音符号替换它们。

例如：“catre” -> “către”

这个列表我必须将它应用于一堆 xml 文件（大约 20.000）。我找到的唯一解决方案是在记事本++中创建一个包含所有单词的宏，并在几个文件上进行替换，但宏包含大约 390.000 行，它似乎不起作用。

有没有解决这个问题的方法，一个脚本，一个程序，什么的？

谢谢

# php - 从 Magento 主页单击子类别时，在新的或现有的 phtml 页面上显示子类别的所有产品

> ID：12709305
> 
> 赞同：1
> 
> 时间：2012-10-03T13:15:36.280
> 
> 标签：php, magento, magento-1.5, magento-1.6, magento-1.7

我已经在主页（left.phtml）中显示了所有父类别和子类别。

我希望每个子类别都是一个链接，该链接指向应列出该子类别产品的页面。

现在没有任何工作。

```
 <?php $children = Mage::getModel('catalog/category')->getCategories($id); ?>
   <ul
   <?php foreach ($children as $category) { ?>  
   <li>
    <a href="<?php echo Mage::getModel("catalog/category")->load($category->getId())->getUrl() ?>"><?php echo $category->getName() ?></a> (<?php echo $category->getProductCount() ?>)</li>
  <?php     } ?>
  </ul>
  <?php } ?> 
```

单击子类别时，会出现找不到页面错误。getProductCount 中也没有显示任何内容。`<a href="">`应该在子类别中给出什么链接或者这个链接应该被重定向到哪里？从哪个 phtml 页面显示结果。

我发现了很多关于带有类别和子类别的展示产品的帖子和文章。但是找不到我的问题的解决方案（可能是缺乏搜索技巧）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:40:19.573

```
Mage::getUrl('catalog/category/view', array('id', $category->getId())); 
```

此代码未经测试，但我相信它会返回正确的 url。如果没有，请发布您看到的网址。

# mysql - 将表中的大列拆分为另一个较小列的表MYSQL

> ID：12709307
> 
> 赞同：1
> 
> 时间：2012-10-03T13:15:42.897
> 
> 标签：mysql, sql-update, where, clause

我一直在努力将一个表中的一个大列（170 万行）拆分成另一个表中的 24 个小得多的列。

表格来自：“postcodes”，其中包含要拆分的列“postcode”和一个自动递增的“id”列

& 表格是：“postcodes_spit”，其中包含 24 列，称为“postcode **n ”（在****n**中插入 1-24 ）；-)

我可以在 24 列的第一列中很好地插入：

```
INSERT INTO postcodes_split (postcodes1)
SELECT postcode 
FROM postcodes 
WHERE (id <= 72974); 
```

但随后的 INSERTS 当然不会从其他列的第 0 行开始。

我尝试改用 UPDATE ，但语法错误，我似乎无法正确：

```
UPDATE postcodes_split 
SET postcodes2 = postcode FROM postcodes 
WHERE id FROM postcodes BETWEEN 72975 AND 145948 
```

希望可以有人帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:29:42.247

请停下来重新考虑一下你在做什么。这真的有必要吗？像这样以宽格式存储的数据是各地 SQL 程序员的祸根。这不是正确的做法！

但是，假设您仍然继续：

每个`INSERT`语句都会创建一个新行。因此，最好的方法是在一个命令中一次插入所有 24 列。做这样的事情：

```
INSERT INTO postcodes_split (postcodes1,postcodes2,postcodes3,...)
    SELECT p1.postcode, p2.postcode, p3.postcode...
         FROM postcodes p1 WHERE (id <= 72974)
         join postcodes p2 on p2.id = p1.id + 72974
         join postcodes p3 on p3.id = p1.id + 145948
         ... 
```

您的确切数学可能会有所不同，具体取决于 id 是基于 0 还是基于 1。

同样，不要这样做（但我想你的老板可能会告诉你这样做；在这种情况下，玩得开心！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:08:26.737

这是一个未经测试的想法，我只建议这样的一次性操作：

```
 UPDATE postcodes_split pcs, postcodes pc
 SET pcs.postcodes2 = pc.postcode
 WHERE pcs.id = pc.id - 72974 
```

# iphone - iPhone 应用程序图标提交

> ID：12709310
> 
> 赞同：0
> 
> 时间：2012-10-03T13:16:03.923
> 
> 标签：iphone, icons, submission

我已经提交了我的 iPhone 应用程序以供批准并上传了我的图标。

现在，我感觉我的图标上的角不是正确的形状。当我在 iTunes Connect 中上传我的应用程序时，我注意到了这一点，它显示了我的图标，后面有一个预制的阴影，看起来我的角落看起来很紧。

[请参阅此处](http://i.imgur.com/HO1Gh.png)的图像。放大它以获得更好的外观。

你看到我图标的一角，然后是更远的阴影，在它下面。以前有人经历过吗？如果我离开它会看起来很有趣吗？把那个空间涂黑？还是会保持透明？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:14:59.080

iTunes Connect 有一段时间出现此问题，但它不会影响主要产品，请注意，您可以在上传的版本详细信息页面中检查正确的图标，它应该正确显示“大应用程序图标”

# css - CSS：多行文本的背景颜色？

> ID：12709313
> 
> 赞同：14
> 
> 时间：2012-10-03T13:16:13.330
> 
> 标签：css

您是否有在多行文本上添加“背景颜色”属性的想法，有两个困难：

*   背景必须在每行的最后一个单词之后停止
*   没有背景的每行之间没有空格

例子 ：

![在此处输入图像描述](../Images/dfef4372cf0099942df69511d088dbc9.png)

谢谢 ！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T13:21:31.340

我想这就是你要找的东西：http: [//jsfiddle.net/9BTYQ/1/](http://jsfiddle.net/9BTYQ/1/)

```
span {
    color: white;
    background-color: #343132;
    box-shadow: 0.5em 0 0 #343132,-0.5em 0 0 #343132;
}

div {
    width: 100px;
}
```

```
<div>
    <span>Do you have an idea to add a background-color property on a multi-line text, with two difficulties:</span>
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-09T13:47:25.203

@gabitzish 所示的`box-shadow`解决方案在 IE11 和 FF34+（09-2014 发布）中停止正常工作。

您也可以添加`box-decoration-break:clone;`使其在 IE11 和 FF34+ 中工作：

```
p {
    display: inline;
    padding: 0.5em 0em;
    background-color: #FFAA3B;
    box-shadow: 1em 0 0 #FFAA3B, -1em 0 0 #FFAA3B;
    box-decoration-break: clone;
} 
```

可在具有适当前缀的 Webkit、Firefox、IE9+ 中使用。

演示：http: [//jsfiddle.net/cLh0onv3/1/](http://jsfiddle.net/cLh0onv3/1/)

注意：已经在[别处](https://stackoverflow.com/a/18221393/1585841)说明了这一点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-05T22:25:24.693

我发现这个解决方案可以很好地结合 box-shadow 方法和`<p>`元素周围的`<span>`元素上的一些相应填充

```
p {
  display:block;
  padding:0 10px;
  font-size:2em;
}

span {
  color: white;
  background:#333;
  box-shadow: 0 0 0 10px #222;
  padding:0;
  line-height:1.5;
} 
```

[http://jsfiddle.net/tsoligo/mMg4B/](http://jsfiddle.net/tsoligo/mMg4B/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-09T16:24:11.297

只需将显示框类型更改为内联：

```
p {
  display: inline;
} 
```

```
body {
  width: 170px;
}
p {
  display: inline;
  background: black;
  color: white;
}
```

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
```

如果每行之间有空格，则设置`font-size`等于`line-height`​​ ，或 vv

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T13:27:36.920

使用纯 CSS 使其完美是困难的，并且只有在某些条件下才能实现。例如，如果您使用中断并将行高设置为大，您会看到两者之间的间隙。那么两侧的填充物呢？

此外，您将需要跨度，这只会使您的标记变得丑陋。

幸运的是 Sam Croft 想出了一个简单的 jQuery 插件来解决这个问题。它快速、轻便并且在大多数情况下都可以工作。

文章：[http ://samcroft.co.uk/2011/jquery-plugin-for-inline-text-backgrounds/](http://samcroft.co.uk/2011/jquery-plugin-for-inline-text-backgrounds/)

演示：[http ://samcroft.co.uk/demos/inline-backgrounds/](http://samcroft.co.uk/demos/inline-backgrounds/)

来源：[https ://github.com/samcroft/css-inline-backgrounds/blob/master/inline-backgrounds.js](https://github.com/samcroft/css-inline-backgrounds/blob/master/inline-backgrounds.js)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T13:22:18.157

`<span>`这是和`<p>`标签之间的区别之一。

```
<span style="background:black; color:white;">
Lorem Ipsum is simply dummy text of the<br>
printing and typesetting industry.<br>
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,
<br> when an unknown printer took a galley of type
<br> and scrambled it to make a type specimen book.</span> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-08T09:54:57.387

**这个`box-shadow`例子很好用：**

HTML

```
<p class="title step-1">
    <span class="highlight">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit, qui suscipit error quasi tempore magni sit nostrum aliquam soluta vel. Dolorem, reprehenderit sint molestiae in est perspiciatis quas accusantium commodi. </span>
</p> 
```

CSS

```
.title {
  font: 20px/1.25 Ubuntu, sans-serif;
  text-transform: uppercase;
  margin-bottom: 1rem;
  line-height: 45px;
  display: inline-block;
  width: 300px;
}
.title .highlight {
  display: inline;
  background: #ee4035;
  color: white;
  padding: 0.5rem;
  padding-left: 0;
  padding-right: 0;
}
.title.step-1 .highlight {
  box-shadow: 10px 0 0 #ee4035, -10px 0 0 #ee4035;
} 
```

**JSFiddle：http:** [//jsfiddle.net/verber/WmRT3/](http://jsfiddle.net/verber/WmRT3/)

PS 但不是在 IE8 中...

# asp.net - 如何使用正则表达式 Visual Studio 快速查找和替换？

> ID：12709314
> 
> 赞同：0
> 
> 时间：2012-10-03T13:16:18.210
> 
> 标签：asp.net, regex, visual-studio-2010, replace

我如何在这种情况下使用正则表达式？

我想找到这个：

```
<asp:Literal ID="Literal2" Text="<%$ Resources: Resource, Admin_HeaderInfo%>" runat="server" />
<asp:Literal ID="Literal3" Text="<%$ Resources: Resource, Admin_ContentInfo%>" runat="server" />
..
.. 
```

并想更换

```
<%= GetTranslate("Admin_HeaderInfo"); %>
<%= GetTranslate("Admin_ContentInfo"); %>
..
.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:26:01.950

寻找：

`<asp:Literal ID=".+?" Text="<%\$ Resources: Resource, (.+?)%>" runat="server" />`

用。。。来代替

```
<%= GetTranslate("$1"); %> 
```

# objective-c - 隐藏动画模式 UIView？

> ID：12709317
> 
> 赞同：1
> 
> 时间：2012-10-03T13:16:23.937
> 
> 标签：objective-c, ios, uitableview, animation

我需要以模态方式呈现然后关闭 UITableView。它应该从顶部到按钮进行动画处理。但它不应该覆盖整个屏幕，它会从导航栏下方滑入并在到达标签栏之前停止。

所以我不能使用`presentViewController:animated:completion:`它的视图控制器。我需要将其作为视图层次结构的一部分进行操作。问题是，当这个表视图不可见时，它应该在哪里。我将从哪里制作动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:57:47.920

您可以将 UITableView 放在 UIView 中并使用 animateWithDuration。例如（使用一些组成的尺寸）：

```
[subMenuView setFrame:CGRectMake(5,-400, 310, 400)];

[UIView animateWithDuration:0.8f
                      delay:0.0f
                    options:UIViewAnimationOptionTransitionCurlDown
                 animations:^{
                     [subMenuView setFrame:CGRectMake(5,0,310,400)];
                 }
                 completion:^ (BOOL finished) 
                 {
                     if (finished) 
                     {
                         //animation has finished, you can do something here, even another nested animation
                     }
                 }]; 
```

如果你想然后将它向上滑动，请执行相反的操作...

# mysql - 查询中的行需要一个序列号

> ID：12709320
> 
> 赞同：0
> 
> 时间：2012-10-03T13:16:30.700
> 
> 标签：mysql, sql-order-by

> **可能重复：**
> [MySQL 查询中的每一行都需要一个序列号](https://stackoverflow.com/questions/12707646/need-a-sequence-number-for-every-row-in-mysql-query)

所以我发现这个很有用：

```
SELECT (@row:=@row+1) AS ROW, ID  
FROM TableA ,(SELECT @row := 0) r   
ORDER BY ID DESC 
```

我的表看起来更像这样：

```
SELECT (@row:=@row+1) AS ROW, ID , ColA, ColB, ColC
FROM TableA 
JOIN TableB on TableB.ID = TableA.ID
JOIN TableC on TableC.ID = TableA.ID 
,(SELECT @row := 0) r   
ORDER BY ID DESC 
```

@row:=@row+1 效果很好，但我得到了按 ID 排序的行。

所以我得到更像这样的东西：

```
ROW  | ID  
3      15  
2      10  
1      2 
```

我追求的是：

```
ROW  | ID  
1      15  
2      10  
3      2 
```

注意：我注意到`if I remove the JOINs I DO get the requested result`（其中`ROW`是每行的序号，无论 ID 的 ORDER BY 是什么）

基本上似乎在 ORDER BY 发生之前评估了行号。我需要在给出行后进行 ORDER BY。

关于我如何实现这一目标的任何想法，以及 JOINS 做了什么弄乱了它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:18:04.320

> 我需要在给出行后进行 ORDER BY。

然后试试这个：

```
SELECT *
FROM
(
   SELECT (@row:=@row+1) AS ROW, ID , ColA, ColB, ColC
    FROM TableA 
    JOIN TableB on TableB.ID = TableA.ID
    JOIN TableC on TableC.ID = TableA.ID 
    ,(SELECT @row := 0) r 
) t
ORDER BY ROW ASC 
```

# linux - 在 Linux 上记录 RS232 而无需等待换行符

> ID：12709326
> 
> 赞同：4
> 
> 时间：2012-10-03T13:16:55.547
> 
> 标签：linux, logging, serial-port

我试图将来自 RS232 的数据记录到带有 cat 的文件中：

```
cat /dev/ttyS0 > rs232.log 
```

结果是我的文件中除了最后一行之外的所有内容。

通过打印到标准输出，我发现，只有当 cat 获得换行符（'\n'）时，它才会写入输出。我发现了同样的情况：

```
dd bs=1 if=/dev/ttyS0 of=rs232.log 
```

阅读后[如何在不等待 Perl 换行符的情况下立即打印文本？](https://stackoverflow.com/questions/2434363/how-can-i-print-text-immediately-without-waiting-for-a-newline-in-perl)我开始思考，这是否可能是 Linux-Kernel 或 coreutils 包的缓冲问题。

根据 TJD 的评论，我用 C 编写了自己的程序，但仍然遇到同样的问题：

```
#include <stdio.h>
#include <stdlib.h>
int main(int argc, char* args[])
{
    char buffer;
    FILE* serial;
    serial = fopen(args[1],"r");
    while(1)
    {
        buffer = fgetc(serial);
        printf("%c",buffer);
    }
} 
```

根据我自己的 C 代码的结果，这似乎是与 Linux 内核相关的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T15:28:53.250

您正在打开 TTY。当该 TTY 处于熟（又名规范）模式时，它会执行行处理（例如，退格从缓冲区中删除前一个字符）。您需要将 TTY 置于原始模式，以便在每个字节到达时获取每个字节，而不是等待行尾。

从[页面](http://www.kernel.org/doc/man-pages/online/pages/man3/tcflush.3.html)：[_`man`](http://www.kernel.org/doc/man-pages/online/pages/man3/tcflush.3.html)

> ## 规范和非规范模式
> 
> c_lflag 中的 ICANON 规范标志的设置决定了终端是在规范模式（ICANON 设置）还是非规范模式（ICANON 未设置）下运行。默认情况下，设置 ICANON。
> 
> 在规范模式下：
> 
> *   输入是逐行提供的。输入行分隔符（NL、EOL、EOL2；或在行首的 EOF）时，输入行可用。除了 EOF 的情况外，行分隔符包含在 read(2) 返回的缓冲区中。
>     
>     
> *   启用行编辑（ERASE、KILL；如果设置了 IEXTEN 标志：WERASE、REPRINT、LNEXT）。read(2) 最多返回一行输入；如果 read(2) 请求的字节数少于当前输入行中可用的字节数，则只读取请求的字节数，剩余的字符将可用于未来的 read(2)。
>     
>     
> 
> 在非规范模式下，输入立即可用（用户无需键入行分隔符），并且行编辑被禁用。

最简单的方法就是调用`cfmakeraw`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:49:23.113

这行得通吗？

```
perl -e 'open(IN, "/dev/ttyS0") || die; while (sysread(IN, $c, 1)) { print "$c" }' 
```

这确实有效：

```
$ echo -n ccc|perl -e 'while (sysread(STDIN, $c, 1)) { print "$c" } '
ccc$ 
```

# javascript - 函数作为另一个函数中的方法

> ID：12709330
> 
> 赞同：2
> 
> 时间：2012-10-03T13:17:02.040
> 
> 标签：javascript, function, methods, nested

我正在尝试从在线教程中学习 JS - [http://ejohn.org/apps/learn/#33](http://ejohn.org/apps/learn/#33)，你可以在那里测试 JS 代码。我试图将嵌套函数理解为其他函数内部的方法以及“this”关键字当时引用的内容。为什么如果我从下面添加上面的站点代码 - 它不起作用？有人可以解释 JS 的那个方面吗？

```
function Ninja(name){
  this.name = name;
  this.changeName = function(newname) {
    this.name = newname;
    this.anotherFunction = function(newname2) {
      this.name2 = newname2;
    }
  }
}

var ninja = new Ninja("John");
assert( ninja.name == "John", "The name has been set on initialization" );

// ninja.anotherFunction("Luken");
// ninja.changeName.anotherFunction("Luken");
// Why both above functions doesn't work?

assert(ninja.name2, "It works?");

ninja.changeName("Bob");
assert( ninja.name == "Bob", "The name was successfully changed." ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:25:09.620

的值`this`是在调用函数时确定的，而不是在定义时确定的。所以在你的代码中，你必须有不同的值`this`： 当`ninja.changeName()`被调用时，你没有为 指定一个值`this`，所以它要么是未定义的，要么是现在的任何值。

`new`另一方面，操作符在调用函数之前确实设置`this`了`Ninja`。

您需要做的是“保存” `this`inside of的值，`Ninja`以便内部函数继续使用它（而不是在`this`调用它们时可能存在的任何随机值）。这样做比听起来更简单：

```
function Ninja(name){
  this.name = name;

  var self = this; // Create a hidden reference to "this" that is only visible in
                   // any functions defined before we return

  self.changeName = function(newname) {
    self.name = newname;
    self.anotherFunction = function(newname2) {
      self.name2 = newname2;
    }
  }
} 
```

这是因为 JavaScript 在定义函数时保留了上下文（= 所有可访问变量）的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:32:47.110

这很简单：

```
function Ninja(name)
{//this points to Ninja object inside constructor scope
    this.name = name;
    this.changeName = function(newname)
    {//method of Ninja, this points to context object, ie Ninja
        this.name = newname;//accesses the name property of Ninja
        this.anotherFunction = function(newname2)
        {//defines new method for this ==> Ninja object
            this.name2 = newname2;//context object is Ninja
        };
    };
}
var foo = new Ninja('foobar');
foo.name;//foobar
foo.changeName;//function, is defined in constructor
typeof foo.anotherFunction//undefined because it's assigned when the changeName method is called!
foo.changeName('Me');
foo.name;//Me
foo.anotherFunction('You');//works: changeName was called, and assigned anotherFunction to foo (instance of Ninja)
foo.name2;//You 
```

发生了什么：简单，通过调用 changeName 方法，`anotherFunction`定义并分配给`this`. 当时`this`引用了该对象，因此该方法被分配给调用该方法`Ninja`的实例。在调用该方法之前，该方法根本不存在。`Ninja``changeName``changeName``anotherFunction`

虽然这可能看起来无用或愚蠢，但它确实是有道理的。您需要记住的是，函数/方法本质上是独立的对象。在这段代码中，它们恰好被定义为属性/方法，但它们不需要这样使用。回到上面的代码：

```
foo.name;//Me
bar = {};//some object
foo.changeName.apply(bar,['You']);
foo.name;//Me, nothing has changed, the changeName method was applied to the bar object
bar.name;//You, in the apply call, this pointed to bar, not foo
typeof bar.anotherFunction;//function
//You could even create the anotherFunction globally:
//  JUST TO SHOW YOU CAN, THIS IS DANGEROUS
//  ONLY USE THIS IF YOU KNOW WHAT THE POSSIBLE CONSEQUESES ARE!
foo.changeName.call();//in global scope
typeof antoherFunction;//function ==> this function is now globally available 
```

该`changeName`方法可以应用于*任何*对象，添加新方法，更改/添加某些属性到该特定实例。

# ruby-on-rails - Rails - 动态构建深度嵌套的对象 (Cocoon / nested_form)

> ID：12709331
> 
> 赞同：21
> 
> 时间：2012-10-03T13:17:02.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, cocoon-gem

我目前有一个深度嵌套的复杂表单，我正在使用[Cocoon](https://github.com/nathanvda/cocoon) gem 来根据需要动态添加部分（例如，如果用户想要在销售表单中添加另一辆车）。代码如下所示：

```
<%= sale.fields_for :sale_vehicles do |sale_vehicles_builder| %>
    <%= render :partial => "sale_vehicles/form", :locals => {:f => sale_vehicles_builder, :form_actions_visible => false} %>    
<% end -%>
<div class="add-field-links">
    <%= link_to_add_association '<i></i> Add Vehicle'.html_safe, sale, :sale_vehicles, :partial => 'sale_vehicles/form', :render_options => {:locals => {:form_actions_visible => 'false', :show_features => true, :fieldset_label => 'Vehicle Details'}}, :class => 'btn' %>
</div> 
```

这对于第一级嵌套非常有效 -`sale_vehicle`对象由 Cocoon 正确构建，并且表单按预期呈现。

当有另一层嵌套时问题就来了 -`sale_vehicle`部分看起来像这样：

```
<%= f.fields_for :vehicle do |vehicle_builder| %>
    <%= render :partial => "vehicles/form", :locals => {:f => vehicle_builder, :f_parent => f, :form_actions_visible => false, :show_features => true, :fieldset_label => 'Vehicle Details'} %>
<% end -%> 
```

的部分`vehicle`渲染没有字段，因为没有`sale_vehicle.vehicle`构建对象。

因此，我需要做的是与主对象一起构建嵌套对象（Cocoon 目前不构建任何嵌套对象），但如何最好地做到这一点？有没有办法从帮助代码中选择嵌套表单以便构建它们？

Cocoon 目前构建的主要对象是这样的：

```
if  instance.collection?
    f.object.send(association).build
else
    f.object.send("build_#{association}")
end 
```

如果我可以执行以下操作，它将使事情变得简单而简单，但是我不确定如何获得`f.children`-有没有办法从父表单构建器访问嵌套表单构建器？

```
f.children.each do |child|
    child.object.build
end 
```

任何帮助都可以得到这个工作，或者建议另一种动态构建这些对象的方法。

谢谢！

编辑：可能值得一提的是，这个问题似乎与上面提到的 Cocoon gem 以及 Ryan Bates 的[nested_form](https://github.com/ryanb/nested_form) gem 有关。[Cocoon gem 的问题 #91](https://github.com/nathanvda/cocoon/issues/91)似乎与此问题相同，但 dnagir 建议的解决方法（委托构建对象）在这种情况下并不理想，因为这会导致其他表单出现问题。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-05T23:31:30.053

我可以在您的第二个嵌套表单中看到没有`link_to_add_association`.

在 cocoon 内部，`link_to_add_association`当用户想要动态添加它时，它会构建一个新元素。

或者，您是否暗示一旦`sale_vehicle`构建了 a ，它应该自动包含 a `vehicle`？我会假设用户必须选择出售的车辆？

我有一个演示双嵌套表单的[测试项目](https://github.com/nathanvda/cocoon_simple_form_demo)：一个项目有任务，可以有子任务。

但也许这与你想做的事情关系不够好？

你没有展示你的模型，但如果我理解正确，关系是

```
sale 
  has_many :sale_vehicles
sale_vehicle
  has_one :vehicle (has_many?) 
```

因此，如果您有一个`sale_vehicle`可以有. 这就是茧可以做得很好的事情。另一方面，如果您希望在 cocoon 动态创建 a 时也创建 a ，我会看到一些不同的选项。`vehicle``sale_vehicle``sale``vehicle``sale_vehicle``vehicle`

### 利用`after_initialize`

不能说我是这个的真正粉丝，但在你的`after_initialize`回调中`sale_vehicle`，你总是可以构建所需的`vehicle`模型。

我在这里假设，由于您`sale_Vehicle`的模型无效/没有`vehicle`模型就无法存在，因此模型有责任在构建时立即创建嵌套模型。

请注意，这`after_initialize`是为*每个*对象创建执行的，因此这可能会很昂贵。但这可能是一个快速的解决方案。如果您拒绝空的嵌套模型，这应该可以工作。

### 使用装饰器/演示器

对于用户来说，`sale_vehicle`and`vehicle`似乎是一个对象，所以为什么不创建一个由 sale_vehicle 和 vehicle 组成的装饰器，它以一个（嵌套）形式呈现，当保存它时，装饰器知道它需要保存到正确的楷模。

注意：对此有不同的术语。装饰器通常只用一些视图方法扩展一个类，但它也可以是不同模型的组合。替代术语：演示者、视图模型。

无论如何，装饰者/演示者的功能是为您的用户抽象出底层数据模型。因此，无论出于何种原因，您都需要将单个实体拆分为两个数据库模型（例如，限制列数，保持模型可读，...），但对于用户来说，它仍然是单个实体。因此，将其“呈现”为一个。

### 允许 cocoon 调用自定义`build`方法

不确定我是否喜欢这个，但这绝对是一种可能性。如果“嵌套模型”不是 ActiveRecord::Association，它已经被支持，所以添加它应该不会太难。但我对这个添加犹豫不决。所有这些选项使它变得更加复杂。

### 编辑：最简单的修复

在您的部分内部，只需构建所需的子对象。这必须在 the 之前发生`fields_for`，然后你就可以开始了。就像是

```
<% f.object.build_vehicle %>
<%= f.fields_for :vehicle do |vehicle_builder| %>
    <%= render :partial => "vehicles/form", :locals => {:f => vehicle_builder, :f_parent => f, :form_actions_visible => false, :show_features => true, :fieldset_label => 'Vehicle Details'} %>
<% end -%> 
```

### 结论

我个人非常喜欢装饰器方法，但它可能有点重。只需在渲染调用之前构建对象`fields_for`，这样您就可以始终确定至少有一个。

我很想听听你的想法。

希望这可以帮助。

# android - 从 Goggles 获取回调

> ID：12709332
> 
> 赞同：1
> 
> 时间：2012-10-03T13:17:04.937
> 
> 标签：android, android-intent, ocr, zxing, google-goggles

我知道没有用于谷歌切换的 API。但是它听 com.google.zxing.client.android.SCAN
所以用

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
startActivity(intent); 
```

我可以打开护目镜应用程序。我的问题是，
可以在我的应用程序中获得回调吗？
我想处理文本结果。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:22:23.450

`startActivityForResult` 使用Then启动 Scan 活动`onActivityResult`以接收结果。

请参阅[https://stackoverflow.com/a/5604598/630668](https://stackoverflow.com/a/5604598/630668) 和[http://campevans.net/getting-zxing-into-an-existing-android-applic](http://campevans.net/getting-zxing-into-an-existing-android-applic)

# c# - 如何在 C# 中创建自己的动态类型或动态对象？

> ID：12709333
> 
> 赞同：174
> 
> 时间：2012-10-03T13:17:17.060
> 
> 标签：c#, dynamic, viewbag

例如，类的[ViewBag](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.viewbag%28v=vs.98%29.aspx)属性，`ControllerBase`我们可以动态获取/设置值并向该对象添加任意数量的附加字段或属性，这很酷。我想使用类似的东西，超越 MVC 应用程序和`Controller`其他类应用类型。当我尝试创建[动态](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28dynamic_CSharpKeyword%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)对象并设置它的属性时，如下所示：

```
1\. dynamic MyDynamic = new { A="a" };
2\. MyDynamic.A = "asd";
3\. Console.WriteLine(MyDynamic.A); 
```

我有`RuntimeBinderException`消息**Property or indexer '<>f__AnonymousType0.A' cannot be assigned to - 它在第 2 行只读**。另外我建议这不是我要找的。也许有一些课程可以让我做类似的事情：

```
??? MyDynamic = new ???();
MyDynamic.A = "A";
MyDynamic.B = "B";
MyDynamic.C = DateTime.Now;
MyDynamic.TheAnswerToLifeTheUniverseAndEverything = 42; 
```

具有动态添加和设置属性。

* * *

## 回答 #1

> 赞同：340
> 
> 时间：2012-10-03T13:21:31.423

```
dynamic MyDynamic = new System.Dynamic.ExpandoObject();
MyDynamic.A = "A";
MyDynamic.B = "B";
MyDynamic.C = "C";
MyDynamic.Number = 12;
MyDynamic.MyMethod = new Func<int>(() => 
{ 
    return 55; 
});
Console.WriteLine(MyDynamic.MyMethod()); 
```

阅读有关[ExpandoObject 类](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)的更多信息和更多示例：表示一个对象，其成员可以在运行时动态添加和删除。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-08-29T14:58:04.510

我最近需要更进一步，即根据用户定义的条目在动态对象中添加属性，使其自身动态化。此处的示例以及[Microsoft 的 ExpandoObject 文档](https://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)中的示例并未专门解决动态添加属性的问题，但可以从您枚举和删除属性的方式中推测出来。无论如何，我认为这可能对某人有帮助。这是一个非常简化的版本，说明如何将真正的动态属性添加到 ExpandoObject（忽略关键字和其他处理）：

```
 // my pretend dataset
        List<string> fields = new List<string>();
        // my 'columns'
        fields.Add("this_thing");
        fields.Add("that_thing");
        fields.Add("the_other");

        dynamic exo = new System.Dynamic.ExpandoObject();

        foreach (string field in fields)
        {
            ((IDictionary<String, Object>)exo).Add(field, field + "_data");
        }

        // output - from Json.Net NuGet package
        textBox1.Text = Newtonsoft.Json.JsonConvert.SerializeObject(exo); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-10-03T13:21:20.440

`ExpandoObject`是你在找什么。

```
dynamic MyDynamic = new ExpandoObject(); // note, the type MUST be dynamic to use dynamic invoking.
MyDynamic.A = "A";
MyDynamic.B = "B";
MyDynamic.C = "C";
MyDynamic.TheAnswerToLifeTheUniverseAndEverything = 42; 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2019-10-17T15:19:05.597

```
dynamic myDynamic = new { PropertyOne = true, PropertyTwo = false}; 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2019-11-19T12:42:38.963

```
 var data = new { studentId = 1, StudentName = "abc" }; 
```

**或存在价值**

```
 var data = new { studentId, StudentName }; 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-10-03T13:55:52.210

您可以使用命名空间`ExpandoObject Class`中的哪个`System.Dynamic`。

```
dynamic MyDynamic = new ExpandoObject();
MyDynamic.A = "A";
MyDynamic.B = "B";
MyDynamic.C = "C";
MyDynamic.SomeProperty = SomeValue
MyDynamic.number = 10;
MyDynamic.Increment = (Action)(() => { MyDynamic.number++; }); 
```

更多信息可以在 [ExpandoObject MSDN找到](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-10-03T13:23:17.930

```
dynamic MyDynamic = new ExpandoObject(); 
```

# debian - Debian - 如何在单独的目录中构建？

> ID：12709334
> 
> 赞同：2
> 
> 时间：2012-10-03T13:17:18.260
> 
> 标签：debian, packaging

我想在 debian 上分发一个专门的 GCC。由于 GCC 要求将其构建在与源目录不同的目录中，并且两者都不是另一个目录的子目录（AFAIK），因此标准的 debian/rules 文件将不起作用，因为它将构建目录作为源的子目录目录。我查看了 debian 的 GCC 规则文件，它对于我的需要来说过于复杂了。

所以我的问题是：如何让 debhelper 使用包目录中的源代码和构建目录？默认情况下，package_dir==src_dir。我怎样才能得到这个布局：

```
package/
   src/
      configure, ...
   build/
      libgcc/, ... 
   debian/
      control, ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:50:11.873

这显然在很大程度上取决于您的 debian/规则。一个好的开始

```
#!/usr/bin/make -f
%:
     dh $@ --builddirectory=build 
```

或者，您可以完全（或部分）覆盖 auto_build 目标以满足您的需求：

```
override_dh_auto_build:
     #build gcc as it is supposed to be built 
```

当然，您可以检查一下 gcc 维护人员是如何做到的...

# c# - 如何在 JSON.NET 中反序列化具有不固定名称的 json 数组

> ID：12709348
> 
> 赞同：0
> 
> 时间：2012-10-03T13:18:14.140
> 
> 标签：c#, json.net

我有一个关于如何反序列化具有未固定名称的 json 数组的问题，例如我有一个如下所示的 json 字符串。

```
[
  {
    "37414": "MP",
    "weight": 1000
  },
  {
    "21253": "Develper",
    "weight": 424
  },
  {
    "66344": "APP",
    "weight": 1158
  },
  {
    "1622": "API",
    "weight": 164
  }
] 
```

我还定义了一个类，如下所示，并希望使用 JSON.NET 将 json 字符串反序列化为**UserTag**对象。或者我应该更改类定义。

```
public class UserTag
{
    // "37414"
    public long Id { get; set; }

    // MP
    public string Name { get; set; }

    // 424
    public long Weight { get; set; }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:27:51.517

您是否使用正确的 json 格式？

我认为你应该使用：

```
[
  {
    "Id" :37414,
    "Name" : "MP",
    "Weight": 1000
  },
  {
    "Id" :21253,
    "Name" : "Develper",
    "Weight": 424
  },
  {
    "Id": 66344,
    "Name" : "APP",
    "Weight": 1158
  }
] 
```

它将反序列化为：

```
public class UserTag
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Weight { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:54:59.683

```
var result = JsonConvert.DeserializeObject<List<Dictionary<string, string>>>(json);

foreach (var item in result)
{
    foreach (var kv in item)
    {
        Console.WriteLine(kv.Key + ": " + kv.Value);
    }
} 
```

# javascript - IE 中的 onChange 函数后图像不显示

> ID：12709350
> 
> 赞同：0
> 
> 时间：2012-10-03T13:18:16.837
> 
> 标签：javascript, forms, select, html

基本上，我制作了一个功能，可以根据用户从下拉菜单中选择的选项来选择要显示的某个图像，这在 Chrome 和 Firefox 上效果很好！但不幸的是不是IE。我不知道为什么，并会感谢任何人在这件事上的智慧。

CSS：

```
 #texture img {
        width: 395px;
        height: 288px;
        border: 1px solid #3d3d3d;
    } 
```

JavaScript：

```
 function newTexture() {
            var textureName = '<img src="'+document.worktopForm.worktopColour.value+'.jpg">';
            document.getElementById("texture").innerHTML = textureName;     
    } 
```

HTML：

```
<form name="worktopForm">
    <select name="worktopColour" onChange="newTexture();">
        <option value="none" selected></option>
        <option value="starGalaxy">Star Galaxy(Band One)</option>
        <option value="seravalle">Seravalle(Band Two)</option>
        <option value="balmoralFineGrain">Balmoral Fine Grain(Band Three)</option>
        <option value="nutYellow">Nut Yellow(Band Four)</option>
       </select>

    <div id="texture"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:36:48.467

IE 仅在元素失去焦点时触发 onchange 事件，直到您单击按钮、制表符或单击屏幕上的某个位置...我更喜欢您使用 jquery 或其他一些库进行事件处理...

试试这个....给选择框一个ID....说“worktopColour”....

```
<script type="text/javascript">
$(function(){
$("#worktopColour").bind(($.browser.msie ? "click" : "change"), function() {
    var textureName = '<img src="'+document.worktopForm.worktopColour.value+'.jpg">';
        document.getElementById("texture").innerHTML = textureName;
});
});
</script> 
```

# java - Apache Httpclient 在目的地正常之前发布数据

> ID：12709351
> 
> 赞同：0
> 
> 时间：2012-10-03T13:18:20.243
> 
> 标签：java, apache-httpclient-4.x, apache-commons-httpclient

有时 httpclient 在服务器接受之前尝试将 http 发布到服务器。我不知道会发生哪种情况，但由于此问题发布失败。为什么客户会这样？

这是日志的一部分；

```
DEBUG org.apache.http.wire - >> "POST       /destination-path[\r][\n]"
DEBUG org.apache.http.wire - >> "Content-Length: 594[\r][\n]"
DEBUG org.apache.http.wire - >> "Content-Type: application/json[\r][\n]"
DEBUG org.apache.http.wire - >> "Host: url:port[\r][\n]"
DEBUG org.apache.http.wire - >> "Connection: Keep-Alive[\r][\n]"
DEBUG org.apache.http.wire - >> "Expect: 100-continue[\r][\n]"
DEBUG org.apache.http.wire - >> "[\r][\n]"
DEBUG org.apache.http.headers - >> POST /destination-path HTTP/1.1
DEBUG org.apache.http.headers - >> Content-Length: 594
DEBUG org.apache.http.headers - >> Content-Type: application/json
DEBUG org.apache.http.headers - >> Host: url:port
DEBUG org.apache.http.headers - >> Connection: Keep-Alive
DEBUG org.apache.http.headers - >> Expect: 100-continue
DEBUG org.apache.http.wire - >> "data:mydata" 
```

“>>”表示此日志中的传出操作。这意味着客户端正在向服务器发送握手请求。最后一条语句，正在尝试发送数据。但它应该等待服务器对此连接的响应。通常，此问题发生在初始连接时。尝试此失败的连接后的连接是成功的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:43:00.493

RFC 2616 第 8.2.3 节：

```
 Because of the presence of older implementations, the protocol allows
   ambiguous situations in which a client may send "Expect: 100-
   continue" without receiving either a 417 (Expectation Failed) status
   or a 100 (Continue) status. Therefore, when a client sends this
   header field to an origin server (possibly via a proxy) from which it
   has never seen a 100 (Continue) status, the client SHOULD NOT wait
   for an indefinite period before sending the request body. 
```

当使用“期望：继续”握手时，Apache HttpClient 在发送请求正文之前等待 2000 毫秒以获得 4xx 或 100 状态。可以使用“http.protocol.wait-for-continue”参数来指定不同的值。

# c# - Bitmap.Clone() 和 new Bitmap(Bitmap) 有什么区别？

> ID：12709360
> 
> 赞同：75
> 
> 时间：2012-10-03T13:18:49.773
> 
> 标签：c#, bitmap, clone

据我所知，复制位图有两种方法。

**位图.Clone()**

```
Bitmap A = new Bitmap("somefile.png");
Bitmap B = (Bitmap)A.Clone(); 
```

**新位图（）**

```
Bitmap A = new Bitmap("somefile.png");
Bitmap B = new Bitmap(A); 
```

这些方法有何不同？我对内存和线程方面的差异特别感兴趣。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-12-18T15:15:29.037

Reading the previous answers, I got worried that the pixel data would be shared between cloned instances of Bitmap. So I performed some tests to find out the differences between `Bitmap.Clone()` and `new Bitmap()`.

`Bitmap.Clone()` keeps the original file locked:

```
 Bitmap original = new Bitmap("Test.jpg");
  Bitmap clone = (Bitmap) original.Clone();
  original.Dispose();
  File.Delete("Test.jpg"); // Will throw System.IO.IOException 
```

Using `new Bitmap(original)` instead will unlock the file after `original.Dispose()`, and the exception will not be thrown. Using the `Graphics` class to modify the clone (created with `.Clone()`) will not modify the original:

```
 Bitmap original = new Bitmap("Test.jpg");
  Bitmap clone = (Bitmap) original.Clone();
  Graphics gfx = Graphics.FromImage(clone);
  gfx.Clear(Brushes.Magenta);
  Color c = original.GetPixel(0, 0); // Will not equal Magenta unless present in the original 
```

Similarly, using the `LockBits` method yields different memory blocks for the original and clone:

```
 Bitmap original = new Bitmap("Test.jpg");
  Bitmap clone = (Bitmap) original.Clone();
  BitmapData odata = original.LockBits(new Rectangle(0, 0, original.Width, original.Height), ImageLockMode.ReadWrite, original.PixelFormat);
  BitmapData cdata = clone.LockBits(new Rectangle(0, 0, clone.Width, clone.Height), ImageLockMode.ReadWrite, clone.PixelFormat);
  Assert.AreNotEqual(odata.Scan0, cdata.Scan0); 
```

The results are the same with both `object ICloneable.Clone()` and `Bitmap Bitmap.Clone(Rectangle, PixelFormat)`.

Next, I tried some simple benchmarks using the following code.

Storing 50 copies in the list took 6.2 seconds and resulted in 1.7 GB memory usage (the original image is 24 bpp and 3456 x 2400 pixels = 25 MB):

```
 Bitmap original = new Bitmap("Test.jpg");
  long mem1 = Process.GetCurrentProcess().PrivateMemorySize64;
  Stopwatch timer = Stopwatch.StartNew();

  List<Bitmap> list = new List<Bitmap>();
  Random rnd = new Random();
  for(int i = 0; i < 50; i++)
  {
    list.Add(new Bitmap(original));
  }

  long mem2 = Process.GetCurrentProcess().PrivateMemorySize64;
  Debug.WriteLine("ElapsedMilliseconds: " + timer.ElapsedMilliseconds);
  Debug.WriteLine("PrivateMemorySize64: " + (mem2 - mem1)); 
```

Using `Clone()` instead I could store 1 000 000 copies in the list during 0.7 seconds and using 0.9 GB. As expected, `Clone()` is very light-weight in comparison to `new Bitmap()`:

```
 for(int i = 0; i < 1000000; i++)
  {
    list.Add((Bitmap) original.Clone());
  } 
```

Clones using the `Clone()` method are copy-on-write. Here I change one random pixel to a random color on the clone. This operation seems to trigger a copy of all pixel data from the original, because we're now back at 7.8 seconds and 1.6 GB:

```
 Random rnd = new Random();
  for(int i = 0; i < 50; i++)
  {
    Bitmap clone = (Bitmap) original.Clone();
    clone.SetPixel(rnd.Next(clone.Width), rnd.Next(clone.Height), Color.FromArgb(rnd.Next(0x1000000)));
    list.Add(clone);
  } 
```

Just creating a `Graphics` object from the image will not trigger the copy:

```
 for(int i = 0; i < 50; i++)
  {
    Bitmap clone = (Bitmap) original.Clone();
    Graphics.FromImage(clone).Dispose();
    list.Add(clone);
  } 
```

You have to draw something using the `Graphics` object in order to trigger the copy. Finally, using `LockBits` on the other hand, will copy the data even if `ImageLockMode.ReadOnly` is specified:

```
 for(int i = 0; i < 50; i++)
  {
    Bitmap clone = (Bitmap) original.Clone();
    BitmapData data = clone.LockBits(new Rectangle(0, 0, clone.Width, clone.Height), ImageLockMode.ReadOnly, clone.PixelFormat);
    clone.UnlockBits(data);
    list.Add(clone);
  } 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-10-03T13:34:54.150

这是“深”和“浅”副本之间的共同区别，也是几乎不推荐使用的 IClonable 接口的问题。Clone() 方法创建一个新的位图对象，但像素数据与原始位图对象共享。Bitmap(Image) 构造函数还创建了一个新的 Bitmap 对象，但它拥有自己的像素数据副本。

SO上有很多关于Clone()的问题，程序员希望它避免位图的典型问题，即加载它的文件的锁定。它没有。一个可能的实际用法是避免在传递的位图上不恰当地调用 Dispose() 的库方法出现问题。

利用像素格式转换或裁剪选项，重载可能很有用。

# iphone - 使用 Interface Builder 将 TTImageView 添加到 XIB

> ID：12709365
> 
> 赞同：0
> 
> 时间：2012-10-03T13:18:57.750
> 
> 标签：iphone, objective-c, ios, interface-builder, three20

我正在尝试通过添加常规控件然后在身份检查器中将其类名更改为来添加`TTImageView`到文件，但它无法识别类，不断将类名恢复为. 我已将框架正确添加到我的项目中，我应该如何添加using ？`XIB``UIImageView``TTImageView``TTImageView``IB``UIImageView``Three20``TTImageView``IB`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:21:25.303

`TTImageView`源自`UIView`not `UIImageView`。

`UIView`如果要将其设置为 ，则必须在 XIB 中使用`TTImageView`.

看[这里](http://api.three20.info/interface_t_t_image_view.php)

# powershell - 从 powershell 访问私有成员

> ID：12709369
> 
> 赞同：7
> 
> 时间：2012-10-03T13:19:10.603
> 
> 标签：powershell

我试图让 Uri 停止编码'/' 如此处所述： [GETting a URL with an url-encoded slash](https://stackoverflow.com/questions/781205/getting-a-url-with-an-url-encoded-slash)

但是如何在 powershell 中实现相同的功能？

我正在尝试遵循访问私有财产并更改其价值的路线，但我无法让它发挥作用。

`[Uri].GetProperties([System.Reflection.BindingFlags]::NonPublic)`- 不返回任何内容

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-29T13:11:07.930

这是适用于 PowerShell 的有效解决方案：

```
$uri = [Uri]"http://example.com/%2F"
# access the .PathAndQuery field to initialize the Uri object
$pathAndQuery = $uri.PathAndQuery
$flagsField = $uri.GetType().GetField("m_Flags", [Reflection.BindingFlags]::NonPublic -bor [Reflection.BindingFlags]::Instance)
$flagsValue = [UInt64]$flagsField.GetValue($uri)
# remove flags Flags.PathNotCanonical and Flags.QueryNotCanonical
$flagsValue = [UInt64]($flagsValue -band (-bnot 0x30));
$flagsField.SetValue($uri, $flagsValue)
Write-Host $uri.AbsoluteUri 
```

感谢 google-api-dotnet-client [path](https://code.google.com/p/google-api-dotnet-client/issues/attachmentText?id=273&aid=2730000000&name=UriFactory.Modify%20patch&token=EJWVESGIeGM5_FrgW9E2a3r6gE0:1361351962225) :-) 请注意，与 .net 2.0 存在一些差异，我的代码适用于 > .net 2.0（对于 <= 2.0 版本，`flagsValue`对象的类型将`[Int32]`是`[Uint64]`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:13:37.660

以其他帖子为您所需要的，您想要这个：

```
$uri = [uri]"http://example.com/%2F"
$f = [uri].getfield("m_Flags", "nonpublic,instance")
$v = [int]($f.getvalue($uri))
$f.setvalue($uri, [uint64]($v -band (-bnot 0x30))) 
```

PowerShell`-bnot`和`-band`按位运算符不适用于任何大于以上的类型，`[int]`因此我向下转换`[int]`为在上述情况下不会溢出的类型（这意味着`[int]::maxvalue`不存在超出的标志值。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:34:51.017

试试这个（就像在你的链接中一样）：

```
$uri.GetType().GetField("m_Flags", [System.Reflection.BindingFlags]::Instance -bor `
 [System.Reflection.BindingFlags]::NonPublic) 
```

获取非公共属性：

```
$uri.GetType().GetProperties( [System.Reflection.BindingFlags]::Instance -bor `
[System.Reflection.BindingFlags]::NonPublic ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T13:46:40.367

```
$uri.GetType().GetProperties('Instance,NonPublic') 
```

# database-design - 应用单表继承

> ID：12709371
> 
> 赞同：0
> 
> 时间：2012-10-03T13:19:11.890
> 
> 标签：database-design, single-table-inheritance

从[那个](https://stackoverflow.com/questions/12661637/mvc-design-convention-cruding-inherited-models)问题：

![数据库结构](../Images/b27c64803fc134b1e9e3a3b595838564.png)

总结：

*   我的 CRUD 是：客户、员工和分支机构。
*   `Customer`s 和`Employee`s 与一`Person`、一`Individual`（与个人相关的字段）和一`User`（用于登录目的）相关联。所以`Individual`s 和`User`s 总是与一个人`Customer`或`Employee`人有关。
*   `Branch`es 与一`Person`和一相关联`Company`（与公司人员相关的字段）。所以`Company`s 总是与一个`Branch`人有关。他们没有用户，因为他们隶属于该数据库所代表的公司——他们的员工可以在应用程序中进行身份验证。
*   一个`Employee`属于一个`Branch`。A`Branch`有零个或多个`Employee`s。*（是的，图表不正确，对不起！）*
*   目前我正在使用一个位来区分`Employee`角色 - 我的员工拥有操作和管理权限。角色权限进入代码本身，在这里您可以意识到客户也有自己的角色......有什么建议可以实施更好（和简单）的方式来管理客户和员工的角色吗？

我应该如何更改*错误*的 3NF 结构以实现设计良好的单表继承，以便更好地使用 MVC 模式？

我试着简化了一下，现在我完成了这个新结构：

![新的数据库结构](../Images/1103089ab047f3eb5a1629260a483951.png)

我还能改进吗？在哪里？你会如何建模？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:08:40.773

仅当您具有正常-低基数（唯一性较少/重复次数较多）时，才值得为城市创建一个新表。因此，根据您的用户，您将不得不自己决定。另一方面，您可以拆分地址表和电话号码表。

根据您存储的有关员工和客户的信息类型，您可以只有一个字段来指示此人是员工还是客户，或者可以有两个单独的表。

如果我们谈论角色，它们通常表示员工的权限/职位/可访问性。即常规，P/T，经理。您可以为每个组/角色开发内容的访问级别和可见性。

从 Person 中取出所有个人详细信息并将它们存储在新表中。（只是好奇......你真的需要`nickname`字段吗？磁盘 I/O 是任何应用程序的最大瓶颈之一）将个人详细信息与专业详细信息和 ID 分开。

说到Branch，你确定任何时候都只有一个联系人吗？通常，在商业世界中并非如此。但是一个分支机构/人在任何给定时间都只有一个地址，所以在这里你单独的地址表会很有帮助。

一般来说，很难提出一个结构。一个好的设计总是基于业务规则。

# android - Android Spinner 的外观和感觉就像 ICS

> ID：12709374
> 
> 赞同：1
> 
> 时间：2012-10-03T13:19:13.170
> 
> 标签：android

我喜欢 Android ICS 中 Spinner 的外观和感觉。我至少支持 android 2.1，所以我希望 Spinner 在 Android 2.1 上具有 ICS 外观。这可能吗。

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:28:31.937

是的，这是可能的。您可以为 Spinner 制作自定义样式，并将可绘制对象设置为 ICS 的微调器样式。您可以在此处找到 9-patch 可绘制对象：

编辑：项目被移动： [https ://github.com/Prototik/HoloEverywhere/tree/master/library/res/drawable-mdpi](https://github.com/Prototik/HoloEverywhere/tree/master/library/res/drawable-mdpi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:22:24.480

您可以使用 Android 支持库来做到这一点。下载任何支持库并包含在您的项目构建路径中。

# html - html中不寻常的空格

> ID：12709378
> 
> 赞同：3
> 
> 时间：2012-10-03T13:19:35.687
> 
> 标签：html, list

我在 html 中使用空格字符在我的文本中给出常规空格，但有趣的是，有些文本仍然没有常规空格。请看一看，

```
<ul style="margin-left:40px;background-color:#6CF ;padding-left:20px;padding-right:10px;padding-top:10px;padding-bottom:10px; font-size:12px;" >
<li>CS-103  &nbsp;&nbsp; Programming Languages</li>
<li>EL-133  &nbsp;&nbsp; Electronics-I</li>
<li>MT-111  &nbsp;&nbsp; Calculus</li>
<li>CY-105  &nbsp;&nbsp; Applied Chemistry</li>
<li>PH-121  &nbsp;&nbsp; Applied Physics</li>
<li>HS-105  &nbsp;&nbsp; Pakistan Studies | HS-127 Pakistan Studies(for Foreigners)</li>
</ul> 
```

这是它的外观，

*   CS-103 编程语言*   EL-133 电子产品-I*   MT-111 微积分*   CY-105 应用化学*   PH-121 应用物理学*   HS-105 巴基斯坦研究 | HS-127 巴基斯坦研究（外国人）

请帮助使所有列表元素看起来相同。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T13:20:56.473

文本确实有常规空格。问题是您使用的字体不是固定宽度，并且课程类型/编号的长度会使其脱落。

用一张桌子来做这样的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T13:39:26.390

根据其语义值，您还可以使用定义列表。

HTML：

```
<dl>
    <dt>CS-103</dt>
        <dd>Programming Languages</dd>
    <dt>EL-133</dt>
        <dd>Electronics-I</dd>
    <dt>MT-111</dt>
        <dd>Calculus</dd>
    <dt>CY-105</dt>
        <dd>Applied Chemistry</dd>
    <dt>PH-121</dt>
        <dd>Applied Physics</dd>
    <dt>HS-105</dt>
        <dd>Pakistan Studies | HS-127 Pakistan Studies (for Foreigners)</dd>
</dl>​ 
```

CSS：

```
dl {
    overflow: hidden;
    }

dt {
    float: left;
    width: 80px
    } 
```

[http://jsfiddle.net/SVdTt/](http://jsfiddle.net/SVdTt/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T13:40:32.337

Brad 关于使用非单一字体时间距不一致的反馈是正确的（并且`\t`在 html 中没有用于制表的符号），但是在此处使用[定义列表](http://www.w3.org/TR/html-markup/dl.html)并应用一些样式可能更合适。

语义完美契合（*术语名称* `dt`后跟其*描述* `dd`）：

```
<dl>
  <dt>CS-103</dt><dd>Programming Languages</dd>
  <dt>EL-133</dt><dd>Electronics-I</dd>
  ...
</dl>​ 
```

[摆弄](http://jsfiddle.net/ovfiddle/WDVeP/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T13:20:31.870

如果我理解正确，您将需要为它们选择等宽字体以使其看起来相同。

# java - java.nio.* 中的 getLastModifiedTime() 方法示例。

> ID：12709382
> 
> 赞同：4
> 
> 时间：2012-10-03T13:19:47.367
> 
> 标签：java

在 Java 1.7 中，我读到有直接方法可以获取文件的最后修改时间，但我不知道应该将哪些值传递给 LinkOptions 的参数。我很欣赏最简单的例子。谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T13:23:02.343

```
Path file = ...
BasicFileAttributes attrs = Files.readAttributes(file, BasicFileAttributes.class);
FileTime time = attrs.lastModifiedTime(); 
```

Java 文档[BasicFileAttributes#lastModifiedTime](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/BasicFileAttributes.html#lastModifiedTime%28%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-23T19:05:33.963

或直接：

```
File file = new File(...);
FileTime time = Files.getLastModifiedTime(file.toPath()); 
```

# java - 带有过滤器的 Spring MVC 和 RequestMapping

> ID：12709384
> 
> 赞同：3
> 
> 时间：2012-10-03T13:19:56.913
> 
> 标签：java, spring-mvc, url-mapping

我在使用 url 映射时遇到问题，并认为有人可以帮助我 :-)

我的 Spring MVC 应用程序有一个 dispatcherServler 的映射如下：

```
<servlet-mapping>
    <servlet-name>dispatcherServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

然后我有一个控制器 servlet，其方法注释如下：

```
MyServlet {
....myMethod    
@RequestMapping(value = "/qwert/request", method = RequestMethod.POST) 
```

总而言之，我有一个带有映射的 DelegatingFilterProxy：

```
<filter-mapping>
    <filter-name>myFilter</filter-name>
    <url-pattern>/qwert/request</url-pattern>
</filter-mapping> 
```

其目标是拦截所有指向上述 MyServlet 方法的请求。

该应用程序对于典型的请求**localhost:port/MyApp/qwert/request**运行良好，这意味着过滤器正在拦截请求并执行其业务。

问题是像这样的请求**localhost:port/MyApp/qwert/request.do**直接进入 Servlet (MyServlet) 方法而不通过过滤器。我的@RequestMapping 不是/qwert/request.do，请求如何最终到达servlet？

有谁知道如何在不将我的 dispatcherServlet 映射更改为 *.do 之类的东西并相应地进行其他更改的情况下解决这个问题。

我希望我的应用程序在**localhost:port/MyApp/qwert/request**而不是**localhost:port/MyApp/qwert/request.whatever**下提供请求，并且我无法将过滤器映射更改为 /* 因为还有其他不需要的方法过滤器干预。

谢谢

更新1：

是的，我尝试引入过滤器的 url 模式，例如 /qwert/request.*，但在这种情况下，过滤器不会拦截任何请求。localhost:port/MyApp/qwert/request 和 localhost:port/MyApp/qwert/request.whatever 都不是（作为普通呼叫者应该使用的第一个）

**解决方案**

最后我发现了问题所在，@Jhonathan 为我指出了正确的方向

我必须定义一个 RequestMappingHandlerMapping 而不是 DefaultAnnotationHandlerMapping

```
@Bean
public RequestMappingHandlerMapping requestMappingHandlerMapping() {
    RequestMappingHandlerMapping mapping = new RequestMappingHandlerMapping();      
    // no dot like names will be matched
    mapping.setUseSuffixPatternMatch(false);
    // no trailing slash will be matched
    mapping.setUseTrailingSlashMatch(false);
    return mapping;
} 
```

这样就成功了，我现在可以在内部看到该模式不会像我在开头提到的那样处理“错误”请求。

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:32:48.627

## 第一个问题

我的@RequestMapping 不是/qwert/request.do，请求如何最终到达servlet？

Spring 默认取

```
/qwert/request.do 
/qwert/request.whatever
/qwert/request.* 
```

喜欢

```
/qwert/request 
```

因此，您的`@RequestMapping(value = "/qwert/request", method = RequestMethod.POST)`要求。更改您的 DefaultAnnotationHandlerMapping 以更改此默认选项：

```
 <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
     <property name="useDefaultSuffixPattern" value="false" />
 </bean> 
```

**来自春天源：**

setUseDefaultSuffixPattern

公共无效 setUseDefaultSuffixPattern（布尔值 useDefaultSuffixPattern）

*设置是否使用默认后缀模式注册路径：即“/users”是否应该注册为“/users.* ”和“/users/”。默认为“真”。如果您打算严格解释 @RequestMapping 路径，请关闭此约定。请注意，包含“.xxx”后缀或以“/”结尾的路径在任何情况下都不会使用默认后缀模式进行转换。*

# javascript - 居中背景图像 javascript 滑块

> ID：12709385
> 
> 赞同：1
> 
> 时间：2012-10-03T13:20:03.043
> 
> 标签：javascript, html, css

我已经启动并运行了它，并且想知道您是否可以在中心而不是左侧开始图像。似乎我是否操纵了它没有居中的 css，所以想知道它是否需要 javascript 中的某些东西。或者实际上甚至可以在图像中选择一个特定的起点。我的 javascript 知识虽然不是最丰富的......

这就是我要说的

[http://jsfiddle.net/ARTsinn/MvRdD/890/](http://jsfiddle.net/ARTsinn/MvRdD/890/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:28:41.530

您可以使用 jQuery`scrollLeft()`函数 onload 将容器滚动到中心。试试这个：

```
var center = $('#content').width()/2 - scrollWrapper.width()/2
scrollWrapper.scrollLeft(center); 
```

演示：http: [//jsfiddle.net/MvRdD/922/](http://jsfiddle.net/MvRdD/922/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:06:34.880

以下将使图像居中，没有可见的滚动条：

```
newleft =$('body').width()/2 - $('#content').width()/2;
$('#content').offset({left: newleft}); 
```

不幸的是，它并不完美，因为它不允许您通过按“左”按钮滚动到最左边的部分，我正在尝试看看这是否可以改进，但尽管如此，这对您摆弄它很有用。

看[**演示**](http://jsfiddle.net/gnel/zMxz9/)

# crystal-reports - 生成水晶报表

> ID：12709393
> 
> 赞同：2
> 
> 时间：2012-10-03T13:20:36.857
> 
> 标签：crystal-reports

我想生成一个具有 2*M 列和 N 行的 Crystal Report。M 由用户确定。这 2*M 列将具有来自 sql 数据库单列的值。我正在触发 M SQL 查询，其中每个查询将从单个列中获取 2*N 值。

如何生成水晶报表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:57:06.090

创建您的报告（按用户 ID 分组，按日期和时间排序，以便您拥有按时间排序的用户的所有 I 和 O）

**添加两个参数**StartDate 和 EndDate

使用`Record - Selection Formula`然后拖动您的元素（或键入文本），以便您拥有：

```
{Comand.Date}>={?StartDate} AND   {Comand.Date}<{?EndDate} 
```

请注意，用户输入的日期将为 00.00.00，而数据库中记录的日期有时间。您必须将 1 天添加到 EndDate 才能拥有`<=`而不是`<`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:12:35.437

创建水晶报表时，标签报表有一个选项。您可以通过参数传递 M 并创建 2*m 和 N 报告。

# jquery - 部分更新后重新绑定/初始化循环脚本

> ID：12709397
> 
> 赞同：0
> 
> 时间：2012-10-03T13:20:53.463
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我使用 jquery 循环插件在我的页面上制作一些幻灯片。

```
$(document).ready(function() {

  $('#slideshow').cycle({
    fx:      'fade', 
    speed:    300, 
    timeout:  5000 
  });

 ... 
```

但我也想对 div 容器进行一些部分更新，以确保这些新评论进入轮换状态

```
 setInterval(function() {
  $("#update1").load(location.href+" #update1>*","");
  }, 30000); 
```

但是在这样做之后，循环停止工作。我怀疑我必须将循环重新绑定到一个事件，但我无法弄清楚哪个以及如何

我的 HTML 看起来像这样

```
 <div id="update1">

        <div id="slideshow" class="slide_container">

        </div>

      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:26:04.927

答案就在这里

[jquery .live on load 事件](https://stackoverflow.com/questions/2548479/jquery-live-on-load-event)

需要将函数调用绑定到部分更新

```
$("#update1").load(location.href+" #update1>*",function(){
    LoadSlideShow();  
    });
  }, 30000); 
```

# batch-file - 如何搜索文件夹名称和删除子文件夹，但不搜索文件夹

> ID：12709398
> 
> 赞同：2
> 
> 时间：2012-10-03T13:20:54.103
> 
> 标签：batch-file, search, cmd, directory, delete-file

我需要一个批处理文件，提示用户输入文件路径以及文件夹名称中的前 3 个字母。然后批处理将删除具有这三个字母的文件夹中的所有文件夹和文件，但保留以这三个字母开头的文件夹。我有一个批处理文件，可以删除文件夹和子文件夹中的所有文件，但我也需要它来删除子文件夹。这是我删除所有文件的代码：

```
@echo off
set /p filepath=Path to Main Directory: 
set /p string=First Letters of Sub-Folders to be Cleansed: 
FOR /D %%G in ("%filepath%\%string%*") DO del "%%G\*.*" /q /s
echo Done
pause 
```

然后我尝试了很多不同的方法来删除`%%G`. 我得到了它命名`%%G`这里的子文件夹的地方：

```
@echo off
set /p filepath=Path to Main Directory: 
set /p string=First Letters of Sub-Folders to be Cleansed:
FOR /D %%G in ("%filepath%\%string%*") DO for /r /d %%i in (%%G\*) do del "%%G\*.*" /q && echo %%i
echo Done
pause 
```

但是当我尝试 `&& rd /s /q %%i`在最后添加时，它说找不到文件和路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:40:59.963

无需递归查找“exp1”文件夹中的文件夹。您可以简单地使用 FOR /D 列出子文件夹，然后使用 RD /Q /S 删除以每个子文件夹为根的整个文件夹层次结构。此外，由于无论如何都将删除所有子文件夹，因此无需执行递归文件删除。

```
@echo off
set /p filepath=Path to Main Directory:
set /p string=First Letters of Sub-Folders to be Cleansed:
for /d %%G in ("%filepath%\%string%*") do (
  del "%%G\*" /q
  for /d %%F in ("%%G\*") do rd /s /q "%%F"
)
echo Done
pause 
```

# byte - 哪个字节是位？

> ID：12709400
> 
> 赞同：1
> 
> 时间：2012-10-03T13:20:58.890
> 
> 标签：byte, bits

有点奇怪，但这里......

如何在数学上确定某个位在哪个字节中？

例如，如果我有一个 32 位字，则有四个 8 位字节。我想知道某个位在这四个字节中的哪一个。因此以一些随机位为例，第 7 位在第一个字节中，第 12 位在第二个字节中，19 在第三个字节中，依此类推。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:23:37.680

如果您从零开始对位和字节进行编号，则使用整数除法除以八应该可以解决问题：

```
 7 / 8 = 0 // Bit #7 is in byte #0
19 / 8 = 2 // Bit #19 is in byte #2 
```

# java - 如何避免这种情况？

> ID：12709403
> 
> 赞同：0
> 
> 时间：2012-10-03T13:21:06.863
> 
> 标签：java, quartz-scheduler, jobs

我有一个相同的软件，在两台服务器上运行。这个软件中的每一个都在特定时间运行 Quartz 午餐，一个要执行的工作。假设两台服务器的时钟同步，这两个工作将同时开始做同样的事情......我怎样才能做到只有一个工作运行而另一个不运行？

我也有一个数据库，我的第一个想法是制作一个表格，在作业开始时在其中插入一行，并验证当天是否有记录（如果有，则跳过作业执行......）但同样，如果服务器上的时钟完全同步，那么两个应用程序将同时写入和检查，使这种机制毫无用处。

我还可以实施什么其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:25:42.127

[*集群他们！*](https://web.archive.org/web/20190201203417/http://www.quartz-scheduler.org:80/documentation/quartz-2.x/configuration/ConfigJDBCJobStoreClustering)

[![石英簇](../Images/d6f94abc055777dccdc5e9e57ed2f09f.png)](https://i.stack.imgur.com/lHuMl.png)
[（来源：[quartz-scheduler.org](http://quartz-scheduler.org/images/documentation/2.x/quartz_cluster.png)）]

基本上，您的两个 Quartz 调度程序都使用相同的数据库进行同步，并且只会在一台（空闲）机器上运行作业。

> 但同样，如果服务器上的时钟完全同步，那么两个应用程序将同时写入和检查，使得这种机制毫无用处。

这正是 Quartz 所做的！然而，它使用了一些数据库锁定/事务机制，因此当一个实例获取新作业时，第二个实例必须等待。

* * *

> 假设两台服务器的时钟同步

它们必须具有同步时钟才能在集群中运行：

> 永远不要在单独的机器上运行集群，除非它们的时钟使用某种形式的时间同步服务同步

# ios - NSFileManager 创建文件夹层次结构 & 不保存 plist [打开]

> ID：12709405
> 
> 赞同：0
> 
> 时间：2012-10-03T13:21:10.800
> 
> 标签：ios, plist, nsfilemanager, nsdocumentdirectory

问题出现在设备上而不是模拟器上。

```
 NSError *error;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Plist1.plist"]; 

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSLog(@"documentsDirectory  --- %@", documentsDirectory);
    NSLog(@"path --- %@", path);
    @try
    {
        if (![fileManager fileExistsAtPath:path])
        {
            [fileManager copyItemAtPath:documentsDirectory toPath:path error:&error];
        }
    }
    @catch (NSException *exception)
    {
        NSLog(@" [exception description] -- %@", [exception description]);
    }
    @finally {

    }

    [dictEmot writeToFile:path atomically:YES];

    // To verify
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];
    NSLog(@"[dict allKeys] My plist ----- %@", [dict allKeys]); 
```

以上是我为在文档目录中保存两个 plist 文件而编写的代码。我用来保存第二个 plist 的方法相同。

```
[self savePlist:plist1];
[self savePlist:plist2]; 
```

我的问题是，每当我尝试保存第二个 plist 时，它会在文档目录中创建文件夹层次结构，并且也不会保存我的 plist2 文件及其内容。

一旦完成第二个方法调用，我的应用程序文档目录如下所示，

```
Documents
 -> plist1
   -> plist1
      .
      .
      .
     -> plist1
       -> plist1
other files 
```

我也在主线程上做，但结果相同。

它甚至没有打印异常。

*   我的错误是什么？

    ## - 为什么它创建层次结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:44:00.467

我对 iOS 了解不多，但我认为您的问题在于`stringByAppendingPathComponent:@"Plist1.plist"`检查您的文档，因为我对 Appending 这个词很怀疑，即使您在将文件名的值硬编码到 Plist1.plist 时发送新文件名...

我仍然不确定，因为我已经很长时间没有进行 iOS 编码了。

# iphone - 我可以使用 MDM 服务器来管理 Ad-Hoc iOS 应用程序吗？

> ID：12709408
> 
> 赞同：1
> 
> 时间：2012-10-03T13:21:23.277
> 
> 标签：iphone, ios, xcode, deployment

我们正在研究使用 MDM 服务器管理 iOS 设备的可能性。我们还计划在不久的将来加入 iOS 开发者企业计划。目前我们正在使用 Ad-Hoc 配置。是否可以将 Ad-Hoc 与 MDM 一起使用？例如，我们需要设置试用 MDM 服务器以了解哪种方法更好，但我们是否需要 Enterprise 程序？文档中提到了 Enterprise in-house 和 AppStore，但没有提到 Ad-Hoc 分发（例如管理这 100 个允许的设备） 在此先感谢 Victor

# architecture - 管道和过滤器架构

> ID：12709409
> 
> 赞同：0
> 
> 时间：2012-10-03T13:21:24.450
> 
> 标签：architecture, semantic-analysis

我正在阅读面向模式的软件架构中的管道和过滤器架构模式。在这里我不必知道编译器设计，但作者给出了编译器设计的例子。我遵循了大部分内容，但我很难理解以下内容。

在编译器设计中，我们有不同的阶段，如扫描器、解析器、语义分析、中间代码生成和后端（MIPS 后端、英特尔后端......）。

这里作者提到了前端阶段，解析器，语义分析，中间代码生成。后端是 MIPS 后端。

以下是文本片段

我们决定不显式地构造抽象语法树，将其从解析器传递到语义分析器。相反，我们将对语义分析器（sa）和代码生成器（cg）的调用嵌入到 yacc 的语法规则中：

```
addexpr  : team
         | addexpr '+' term
           { sa.checkCompat($1,$3); cg.genAdd($1,$3);}
         | addexpr '-' term
           { sa.checkCompat($1,$3); cg.genSub($1,$3);} 
```

我对上述文本的问题 1\. 作者所说的“不明确地构造抽象树”是什么意思？2.我只需要了解上面的语法规则它是做什么的？因为我不是设计语言，所以我必须了解模式。如果我对上面的例子有很好的理解，我可以有效地遵循模式吗？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:20:52.690

我认为 Morten Jensen 回答了有关语法解释的问题。另外，我猜：

*   sa.checkCompat 指的是 - 语义分析器，检查两个操作数的兼容性
*   cg.genAdd 是指 - 代码生成器，生成代码以添加两个操作数

作者指出的主要内容是对编译的“下一个”阶段、SA 和 CG 的调用是在 Parsing 阶段中调用的。换句话说，它不会等到整个 Parser 树生成“之前”才进行语义分析和代码生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:15:26.403

我相信@MortenJensen 回答了你的第一个问题。

如果你做过一些 Web 开发，可能你已经知道什么是管道。想象一下您在 Web 服务器上的请求处理。有一行独立的模块解析它们的输入（这是一行中前一个模块的输出），最后一个生成输出 http 响应。（tcp包转化为http请求，http请求转化为服务器对象，请求被解析并创建响应服务器对象，对象呈现为html，html包装成http响应，被包装到tcp包中）。

关于编译器也是如此。它获取您的源代码，经过几次后续转换，您将获得一个可执行文件。这是流水线模式的一个很好的示例，但可能没有这样的细节会分散你对主要问题的注意力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:52:50.307

这个例子看起来像来自像 yacc-lex/bison-flex 这样的词法解析器的语法规则。像您所描述的规则是一种分层语法规则，例如[BNF](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)。

您发布的“代码”告诉了一种称为“addexpr”的表达式的语法规则。

```
addexpr := term | addexpr + term | addexpr - term 
```

内容如下：

add-expression 是一个 term 或另一个 add-expression + term 或另一个 add-expression - term。

您可以使用这些递归语法规则来构建语言表示。代码`{ sa.checkCompat($1,$3); cg.genAdd($1,$3);}`看起来像是在对 $1 和 $3 进行输入验证 - 如在参数 1 和 3 中，“X + Y”中的 $1 将是 'X'、$2='+' 和 $3='Y'。调用`cg.genAdd`可能是一个函数调用，它将“add”表达式添加到您的抽象语法树中。

这意味着您在解析源代码时一次生成一个元素的抽象语法树。

# validation - jQuery 验证未捕获的 TypeError：无法读取 null 的属性“nodeName”

> ID：12709418
> 
> 赞同：32
> 
> 时间：2012-10-03T13:21:32.953
> 
> 标签：validation, jquery-validate

我有以下代码：

```
$(document).ready
(
    function ()
    {
        $.validator.addMethod(
        "lessThan",
        function (value, element, param)
        {
            // bind to the blur event of the target in order to revalidate whenever the target field is updated            
            var target = $(param)
            .unbind(".validate-lessThan")
            .bind
            (
                "blur.validate-lessThan",
                function ()
                {
                    $(element).valid();
                }
            );
            return parseFloat(value) <= parseFloat(target.val());
        },
        "Valoarea trebuie sa fie mai mica sau egala decat valoarea initiala"
        );
    }
);

$('#gvListDetaliiElemTranAdaugare input[name$=Valoare]').each
    (
        function (index, domEle)
        {
            $(this).rules
            (
                "add"
                , {

                    required: true,
                    minlength: 1,
                    range: [0.1, Number.MAX_VALUE],
                    lessThan: '#ListaDetaliiElemTranModelAdaugare_' + index + '__ValoareRamasa',
                    messages:
                    {
                        required: "Valoarea este necesara!",
                        minlength: "Valoarea este necesara!",
                        range: "Valoarea este necesara!",
                        lessThan: "Valoarea trebuie sa fie mai mica sau egala cu " + $('#ListaDetaliiElemTranModelAdaugare_' + index + '__ValoareRamasa').val()

                    }
                }
            );
        }
    ); 
```

代码失败然后它到达 $(this).rules() with: `Uncaught TypeError: Cannot read property 'nodeName' of null`。返回的html`$('#gvListDetaliiElemTranAdaugare input[name$=Valoare]')`是：

```
[
<input data-type=​"decimal" id=​"ListaDetaliiElemTranModelAdaugare_0__Valoare" name=​"ListaDetaliiElemTranModelAdaugare[0]​.Valoare" onchange=​"OnValoareChange($(this)​.val()​, 18590 , 0)​" type=​"text" value=​"0.00000000000">​
, 
<input data-type=​"decimal" id=​"ListaDetaliiElemTranModelAdaugare_1__Valoare" name=​"ListaDetaliiElemTranModelAdaugare[1]​.Valoare" onchange=​"OnValoareChange($(this)​.val()​, 22972 , 1)​" type=​"text" value=​"0.00000000000">​
, 
<input data-type=​"decimal" id=​"ListaDetaliiElemTranModelAdaugare_2__Valoare" name=​"ListaDetaliiElemTranModelAdaugare[2]​.Valoare" onchange=​"OnValoareChange($(this)​.val()​, 23036 , 2)​" type=​"text" value=​"0.00000000000">​
, 
<input data-type=​"decimal" id=​"ListaDetaliiElemTranModelAdaugare_3__Valoare" name=​"ListaDetaliiElemTranModelAdaugare[3]​.Valoare" onchange=​"OnValoareChange($(this)​.val()​, 23038 , 3)​" type=​"text" value=​"0.00000000000">​
, 
<input data-type=​"decimal" id=​"ListaDetaliiElemTranModelAdaugare_4__Valoare" name=​"ListaDetaliiElemTranModelAdaugare[4]​.Valoare" onchange=​"OnValoareChange($(this)​.val()​, 425306 , 4)​" type=​"text" value=​"0.00000000000">​
, 
<input data-type=​"decimal" id=​"ListaDetaliiElemTranModelAdaugare_5__Valoare" name=​"ListaDetaliiElemTranModelAdaugare[5]​.Valoare" onchange=​"OnValoareChange($(this)​.val()​, 425308 , 5)​" type=​"text" value=​"0.00000000000">​
, 
<input data-type=​"decimal" id=​"ListaDetaliiElemTranModelAdaugare_6__Valoare" name=​"ListaDetaliiElemTranModelAdaugare[6]​.Valoare" onchange=​"OnValoareChange($(this)​.val()​, 425309 , 6)​" type=​"text" value=​"0.00000000000">​
, 
<input data-type=​"decimal" id=​"ListaDetaliiElemTranModelAdaugare_7__Valoare" name=​"ListaDetaliiElemTranModelAdaugare[7]​.Valoare" onchange=​"OnValoareChange($(this)​.val()​, 425310 , 7)​" type=​"text" value=​"0.00000000000">​
] 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-10-05T08:28:45.057

我发现了问题。

问题是我试图验证的 HTML 不包含在`<form>...</form>`标签中。

一旦我这样做了，我就有了一个**`context`**不为空的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-17T09:29:18.600

出现问题是因为我试图在创建 HTML 元素之前绑定它。

我的脚本是在 HTML 之上加载的，它需要在我的 HTML 代码的底部加载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-09T12:03:11.903

我在 Backbone 项目中遇到了这个问题：我的视图包含一个输入并被重新渲染。以下是发生的情况（复选框示例）：

*   第一次渲染发生；
*   应用 jquery.validate，在输入上添加事件 onClick；
*   查看重新渲染，原始输入消失但 jquery.validate 仍然绑定到它。

解决方案是更新输入而不是完全重新渲染它。这是实现的一个想法：

```
var MyView = Backbone.View.extend({
    render: function(){
        if(this.rendered){
            this.update();
            return;
        }
        this.rendered = true;

        this.$el.html(tpl(this.model.toJSON()));
        return this;
    },
    update: function(){
        this.$el.find('input[type="checkbox"]').prop('checked', this.model.get('checked'));
        return this;
    }
}); 
```

这样您就不必更改任何现有的调用 render() 的代码，只需确保 update() 使您的 HTML 保持同步，就可以开始了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-05T16:14:49.897

当我在升级到 Bootstrap 4 后遇到类似错误时，我找到了这个答案`nodeName`。问题是选项卡没有`nav`和`nav-tab`类；将这些添加到`<ul>`元素中解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-10T13:36:46.130

摘自官方文档：

***要求验证父表单，即首先调用 $( "form" ).validate()***

更多关于...[规则](https://jqueryvalidation.org/rules/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-19T05:57:40.663

当“”中的标签数量与该部分`<th>`中的数量不匹配时，我遇到了这个问题`<tfoot>`

```
<thead>
    <tr>
        <th></th>
        <th>Subject Areas</th>
        <th></th>
        <th>Option(s)</th>
    <tr>
</thead>

<tbody></tbody>

<tfoot>
    <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
</tfoot> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-31T15:36:20.763

我遇到了这个问题，这是因为面板位于 [data-role="page"] 元素之外。

# visual-studio - 用于 Visual Studio 2012 项目的 Mercurial .hgignore

> ID：12709422
> 
> 赞同：37
> 
> 时间：2012-10-03T13:22:00.363
> 
> 标签：visual-studio, visual-studio-2012, mercurial, hgignore

我目前使用[Visual Studio 2010](https://gist.github.com/4690206)的类似问题的答案作为我的 go to hgignore 文件。VS2012 中是否包含任何值得注意的附加功能？

* * *

以下是来自许多不同来源的编译列表。要点[在这里](https://gist.github.com/4690206)。

我发现从VS2010升级的项目有很多不需要的备份和升级日志文件。

```
# use glob syntax
syntax: glob

*.obj
*.pdb
*.user
*.aps
*.pch
*.vspscc
*.vssscc
*_i.c
*_p.c
*.ncb
*.suo
*.tlb
*.tlh
*.bak
*.[Cc]ache
*.ilk
*.log
*.lib
*.sbr
*.scc
[Bb]in
[Dd]ebug*/
obj/
[Rr]elease*/
_ReSharper*/
[Tt]humbs.db
[Tt]est[Rr]esult*
[Bb]uild[Ll]og.*
*.[Pp]ublish.xml
*.resharper

# For projects upgraded from VS2010
[Bb]ackup/
_UpgradeReport_Files/
UpgradeLog.*

*.opensdf
*.sdf
ipch/
x64/ 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-19T19:31:38.547

通过从这个关于 Visual Studio 2010 的先前答案中提取，从[这个问题中的](https://stackoverflow.com/questions/4095696/mercurial-hgignore-for-visual-studio-2010-projects/4095783#4095783)[这个](https://stackoverflow.com/questions/12709422/mercurial-hgignore-for-visual-studio-2012-projects/12719725#12719725)响应中提取，以及[这个](https://stackoverflow.com/questions/12709422/mercurial-hgignore-for-visual-studio-2012-projects/12981198#comment20947977_12981198)精彩的引文中，我编译了这个清单：

```
############################################################
## Visual Studio 2012
############################################################
syntax: glob

## User-specific files

*.suo
*.user
*.sln.docstates

## Build results

[Dd]ebug/
[Rr]elease/
x64/
build/
[Bb]in/
[Oo]bj/

## MSTest test Results

[Tt]est[Rr]esult*/
[Bb]uild[Ll]og.*
*_i.c
*_p.c
*.ilk
*.meta
*.obj
*.pch
*.pdb
*.pgc
*.pgd
*.rsp
*.sbr
*.tlb
*.tli
*.tlh
*.tmp
*.tmp_proj
*.log
*.vspscc
*.vssscc
.builds
*.pidb
*.scc

## Visual C++ cache files

ipch/
*.aps
*.ncb
*.opensdf
*.sdf
*.cachefile

## Visual Studio profiler

*.psess
*.vsp
*.vspx

## Guidance Automation Toolkit

*.gpState

## ReSharper Ignores

_ReSharper*/
*.[Rr]e[Ss]harper

## TeamCity Ignores
_TeamCity*

## DotCover Ignores

*.dotCover

## NCrunch Ignores

*.ncrunch*
.*crunch*.local.xml

## Installshield output folder
[Ee]xpress/

## DocProject Ignores

DocProject/buildhelp/
DocProject/Help/*.HxT
DocProject/Help/*.HxC
DocProject/Help/*.hhc
DocProject/Help/*.hhk
DocProject/Help/*.hhp
DocProject/Help/Html2
DocProject/Help/html

## Click-Once Ignores

publish/

## Publish Web Output

*.Publish.xml
*.pubxml

## Windows Azure Build Ignores

csx
*.build.csdef

## Windows Store Ignores

AppPackages/

## RIA/Silverlight projects

Generated_Code/

## SQL Server Ignores

App_Data/*.mdf
App_Data/*.ldf

## Backup & Report Files when converting a solution
## Not required, we have mercurial!

_UpgradeReport_Files/
Backup*/
UpgradeLog*.XML
UpgradeLog*.htm

## NuGet
packages/

## Miscellaneous Ignores

sql/
*.Cache
ClientBin/
[Ss]tyle[Cc]op.*
~$*
*~
*.dbmdl
*.[Pp]ublish.xml
*.pfx
*.publishsettings

## Windows Ignores

$RECYCLE.BIN/
Thumbs.db
ehthumbs.db
Desktop.ini 
```

这目前在我的存储库中运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T03:01:22.723

我通常边走边构建它们，但这是我目前用于相当复杂项目的一个很好的起点。该`ipch/`目录是VS2012中唯一的新东西。

```
ipch/
x64/
*Debug/
*Release/
TestResults/
*sdf
*.suo
*.user 
```

`*Debug/`并`*Release`处理以 . 为目标的设备驱动程序，`Win7 Release`例如。如果需要，可以单独列出和`*.opensdf`文件。`*.sdf`

# jfreechart - 在 jfreechart 的分组堆叠条形图中分别为每个条形着色

> ID：12709424
> 
> 赞同：0
> 
> 时间：2012-10-03T13:22:10.450
> 
> 标签：jfreechart, bar-chart

在 jfreechart 中，我有一个渲染器，例如

```
GroupedStackedBarRenderer renderer = new GroupedStackedBarRenderer(); 
```

在我的示例中，我有 4 组，每组 5 个堆叠条（每个堆叠 2 个条），总共 40 个条。

我使用了类似的结构

```
renderer.setSeriesPaint(0 + 2 * (length * s + g), <color for this bar>);
renderer.setSeriesPaint(1 + 2 * (length * s + g), <color for this bar>); 
```

为了单独为每个条着色，其中 g 表示组，“长度”是组的数量，s 是组内堆叠的条数。

不幸的是，这不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:42:22.183

您应该能够通过覆盖创建任何您想要的配色方案`getItemPaint()`，如本[例](https://stackoverflow.com/a/8002959/230513)所示。注意使用`StandardXYBarPainter`. 打印出一些值可能会有所帮助，如此[处所示](https://stackoverflow.com/a/5481556/230513)。如果没有，请编辑您的问题以包含显示您的方法的[sscce 。](http://sscce.org/)

# asp.net - .ASPXAUTH cookie 在会话结束时过期

> ID：12709425
> 
> 赞同：5
> 
> 时间：2012-10-03T13:22:10.817
> 
> 标签：asp.net, session, authentication, cookies

我使用带有身份验证控件（登录，注销，...）的 asp.net 的通用身份验证基础结构

我的配置：

```
<authentication mode="Forms">
   <forms loginUrl="~/Administrators/Login.aspx" timeout="500000" />
</authentication> 
```

我希望看到 .ASPXAUTH cookie 将在明年到期，我不应该一次又一次地输入 login\passw

但我看到这个 cookie 总是在会话结束时过期。我怎样才能改变这种行为？

**编辑**

确定我使用checkox“记住我”。我认为 asp.net 应该创建持久 cookie

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:48:37.333

如果要创建持久性 cookie，请使用：

[FormsAuthentication.SetAuthCookie 方法](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie%28v=vs.100%29.aspx)

```
FormsAuthentication.SetAuthCookie(userName, createPersistentCookie) 
```

**createPersistentCookie** : true 创建一个持久cookie（跨浏览器会话保存的cookie）；否则为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:37:44.817

您必须创建一个持久性 cookie。如果您使用 ASP.NET 的默认登录控件，将[DisplayRememberMe](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.displayrememberme%28v=vs.110%29.aspx)属性设置为 true，则用户可以选择记住他的登录信息，并且将创建持久 cookie。

```
<asp:Login id="Login1" runat="server" 
    DisplayRememberMe = "True">
</asp:Login> 
```

# c# - PdfTable：最后一个单元格不可见

> ID：12709428
> 
> 赞同：2
> 
> 时间：2012-10-03T13:22:16.120
> 
> 标签：c#, .net, itextsharp

我通过以下方式使用 PdfPTable

```
var myTable = new PdfPTable( 3 );

foreach(var nextString in myStrings)
{

var nextCell = new PdfPCell( new Phrase( nextString, smallFont ) );
nextCell.Border = Rectangle.NO_BORDER;
nextCell.AddCell(nextCell);
}

pdfDocument.Add(myTable); 
```

一切都是完美的，然后总细胞数乘以列数 (3)。但是当我想创建一个有 3 列但有 4 个单元格的表格时 - 最后一行是不可见的。

如何解决这样的问题？

itextsharp 5.3.3.0

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T22:47:44.340

为了解决这个问题和其他问题，我建议使用该`PdfPTable`方法`CompleteRow()`。

这将确保任何不完整的行都添加了额外的单元格以使它们完整，以便它们显示在生成的 PDF 中。

通常，不完整的行将是一个逻辑错误，但是通过使用`CompleteRow()`，您可以轻松识别出这些错误的位置并进行更正。

就你的例子而言：

```
var myTable = new PdfPTable( 3 );

foreach(var nextString in myStrings)
{
    var nextCell = new PdfPCell( new Phrase( nextString, smallFont ) );
    nextCell.Border = Rectangle.NO_BORDER;
    nextCell.AddCell(nextCell);
}

myTable.CompleteRow();

pdfDocument.Add(myTable); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:37:59.397

您可以填充最后一行直到填满，也可以将其设置`ColumnSpan`为占用空白空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:35:28.173

最后一行不可见，因为最后一行不完整。在您有 3 列和 4 个单元格的情况下，您需要再添加 2 个空单元格以使最后一行完整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-15T05:44:46.680

该`CompleteRow()`方法会做的事情。这会在 PDF 的末尾添加一个空单元格，但您会注意到它显示一个带边框的空单元格。因此，为了避免这种行为，您必须`DefaultCell.Border = Rectangle.NO_BORDER`在调用`CompleteRow()`方法之前进行设置。

```
var myTable = new PdfPTable( 3 );

foreach(var nextString in myStrings)
{

    var nextCell = new PdfPCell( new Phrase( nextString, smallFont ) );
    nextCell.Border = Rectangle.NO_BORDER;
    nextCell.AddCell(nextCell);
}
myTable.DefaultCell.Border = Rectangle.NO_BORDER;
myTable.CompleteRow();

pdfDocument.Add(myTable); 
```

# objective-c - 是否可以以非编程方式查看核心数据表中的条目？

> ID：12709433
> 
> 赞同：0
> 
> 时间：2012-10-03T13:22:23.140
> 
> 标签：objective-c, xcode, cocoa, core-data

我一直在研究一些关于使用 Core Data 的教程，我看到的内容包括在 *.xcdatamodeld 中设置 Core Data 的实体和属性，然后通过应用程序的视图实际使用数据本身`NSManagedObjectContext`以及所有相关编码。

我想知道是否有一种方法可以查看数据（从 Xcode 中），而不必建立一个完整的视图来做到这一点？我正在快速浏览 Apple 文档，那里的所有内容似乎也都包含用于访问数据的所有代码，但我没有看到任何建议仅查看表格的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:07:55.053

转到 Xcode 的管理器，选择设备选项卡，选择您正在使用的设备，单击“应用程序”选项卡，然后下载您尝试从中查看数据的应用程序的数据。您可以找到 .sqlite 文件并自己查看数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:24:06.860

使用 SQL 应用程序并检查数据库。

# selenium - 如何在运行 Selenium Webdriver (Java) 测试用例时获得一致的结果？

> ID：12709444
> 
> 赞同：4
> 
> 时间：2012-10-03T13:22:59.863
> 
> 标签：selenium, automated-tests, selenium-webdriver

在运行 Selenium WebDriver 测试用例时，我想要一个一致的输出。

我在一个 java 类中有 30 多个测试用例。当我运行它时，我在不同的方法中遇到错误。例如。有时它在第 12 次测试用例中失败，有时在第 8 次测试中失败，有时在第二种方法中失败，有时都运行没有任何错误。我确信所有的测试用例都是正确的。

它测试非常快。我认为这将是问题所在。所以我加了

```
new FireFoxDriver().manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS); 
```

虽然不一致

谁能尽快帮助我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T18:40:31.313

我强烈反对 Arran 的说法，即 UI 测试非常不可靠。绝对不必如此。学习解决两个主要问题的可靠方法通常可以解决很多问题。

间歇性故障最常见的原因是围绕动态内容的同步问题，或者定位器不够灵活，无法处理不断变化的条件。

例如，您正在从网格/表格中提取一行，并且您的定位器是基于位置的。（第 3 行，第 5 个单元格）一次运行的排序顺序不同，因此测试中断。像 ASP.NET 这样的一些服务器端技术会生成可以变化的动态 ID，所以这是另一个问题。

我鼓励您仔细评估您的定位器/选择器，看看它们是否可靠。避免使用硬连线的 xpath，尽可能使用 ID——但要确保它们不是动态 ID，如果它们是，则适当地处理它们。

您提到您尝试过使用隐式等待。确保您了解隐式等待和显式等待之间的区别。[（在 Selenium 文档中](http://seleniumhq.org/docs/04_webdriver_advanced.html)阅读更多内容。）您可能需要明确等待脚本中后续步骤的确切条件。不要重复不要在测试中使用 Thread.Sleep 或类似的手动延迟，除非在特殊情况下。WebDriver's Wait 是一种更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-12T13:11:28.357

我发现 Selenium 测试经常失败，因为页面元素没有正确加载，*即使你设置了隐式等待*。如果测试在同一点莫名其妙地失败，这对我有用。试试这个（我的代码是 C#，但你可以用其他语言来做）：

在测试初始化​​设置等待：

globalWait = new WebDriverWait(驱动程序，TimeSpan.FromSeconds(20));

然后在加载麻烦的页面时调用等待： globalWait.Until(ExpectedConditions.ElementIsVisible(By.Id("myPageElement")));

这会强制等待，直到元素可见。它为我解决了很多问题。我经常将 id 设置为页脚元素，或者如果它是 AJAX 页面，则设置为 AJAX 检索到的元素之一。这可确保页面已正确加载。

另一种技术是为登录和注销编写一个通用例程，如果您正在执行大量复杂的测试，请登录，进行一些测试，注销，然后登录并进行更多测试。这似乎可以减少 Selenium 中的虚假错误。

我的 C# 登录例程：

```
private void Login()
{
    driver.Navigate().GoToUrl(base_url + "/login");
    globalWait.Until(ExpectedConditions.ElementIsVisible(By.Id("username")));
    driver.FindElement(By.Id("username")).SendKeys(username);
    // clear IE password autocomplete
    driver.FindElement(By.Id("password")).Clear();
    driver.FindElement(By.Id("password")).SendKeys(password);
    driver.FindElement(By.Id("btn_login")).Click();
} 
```

我的注销程序：

```
private void LogOut()
{
    driver.FindElement(By.Id("lnkMenuLogout")).Click();
} 
```

使用它们的测试：

```
[TestMethod]
public void EditAccount()
{
    Login();

    // navigate to account page
    driver.FindElement(By.Id("ulMenu")).FindElement(By.Id("lnkMenuAccount")).Click();
    Assert.IsTrue(driver.FindElement(By.Id("headName")).Displayed, "Player name not displayed");

    string playerChangeName = "Test" + DateTime.Now.ToString("yyyyMMddHHmmss");

    driver.FindElement(By.Id("butEditName")).Click();
    driver.FindElement(By.Id("surname")).Clear();
    driver.FindElement(By.Id("surname")).SendKeys(playerChangeName);
    driver.FindElement(By.Id("butSaveName")).Click();
    driver.Navigate().Refresh();

    // check that edit worked
    Assert.IsTrue(driver.FindElement(By.Id("headName")).Displayed, "Player name not displayed after change");
    IWebElement element = driver.FindElement(By.Id("headName"));
    string playerName = element.Text;
    StringAssert.Contains(playerName,playerChangeName,"Player name has not been changed");

    LogOut();
} 
```

不过，我的最终结论是，目前，Selenium 仍然有些“脆弱”。我目前正在尝试使用 PhantomJS，但这似乎并没有更好。硒是我们拥有的最好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T19:13:43.790

我对您的最佳答案是添加“可靠性和恢复代码”。

例如，也许您的测试试图点击某些东西，但无论出于何种原因，该 web 元素都会随机失效。因此，添加捕获 StaleElementExceptions 的代码并在真正失败之前最多重试 5 次。

或者，有时页面加载速度太慢，并且在 Selenium 认为完成之前内容尚未更新（AJAX 功能）。这会导致检查失败，但在查看屏幕截图时，页面实际上是正确的，因为这一切都发生在不到 0.2 秒的时间内。因此，在使用 assert 调用之前添加一个 selenium wait 等待内容更新。

这实际上为您提供了更可靠的结果，因为您的测试代码现在知道如何使用 selenium 框架处理常见情况。

希望这可以帮助！

# date - 除了 Unix 时间戳之外什么都没有，如何找到最近的上周一？

> ID：12709450
> 
> 赞同：0
> 
> 时间：2012-10-03T13:23:14.243
> 
> 标签：date, language-agnostic, timestamp, utc, unix-timestamp

在给定 Unix 时间戳的情况下，我如何才能找到最靠近它的星期一 0:00 的时间戳。

```
mondaybefore = findit(some_random_timestamp) 
```

我无法访问日历信息，只能访问 Unix 时间戳，即 UTC。根据[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601) ，星期一假定为星期一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:40:36.493

在 Python 中，解决方案如下所示：

```
def find_nearest_previous_monday(t):
    r = (t  - (t % WEEK)) - (3 * DAY)
    if (t - r) >= WEEK:
        r += WEEK

    return r 
```

在 C 中，像这样：

```
time_t find_nearest_previous_monday(const time_t t)
{
    time_t r;

    r = (t - (t % WEEK)) - (3 * DAY)
    if (t - r) >= WEEK {
        r += WEEK;
    }

    return r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:27:27.383

我认为您必须使用适当的日期库。“星期一”的概念是特定于日历的，会因夏令时而有所不同（假设您想要那个星期一的特定时间），并且可能因您的时区而异（严格来说，UNIX 时间戳应该基于 UTC） .

我想如果你想要一个简单的实现，你可以从已知的星期一（午夜）减去感兴趣的时间戳，然后整数除以 86,400（= 24 * 60 * 60）。如果结果值为 0，则您找到了星期一。但这仅在 UTC 时区有效，不会针对夏令时进行调整。

# ios6 - 在 iOS6 中哪里可以取消注册成为 NotificationCentre 的观察者？

> ID：12709459
> 
> 赞同：1
> 
> 时间：2012-10-03T13:23:59.080
> 
> 标签：ios6, nsnotificationcenter

在 iOS5 之前，大多数人都是在 dealloc 中完成的。通过 iOS5，该功能迁移到 viewDidUnload。现在 viewDidUnload 已被弃用并且永远不会被调用，看来我们将不得不找到新的位置来取消注册我们的观察者。

问题是，在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:29:15.857

从 Apple 文档中，视图不再被卸载。

> 在 iOS 6 之前，当发生内存不足警告时，如果 UIViewController 类知道以后可以重新加载或重新创建它们，它会清除其视图。如果发生这种情况，它还会调用 viewWillUnload 和 viewDidUnload 方法，让您的代码有机会放弃与视图层次结构关联的任何对象的所有权，包括从 nib 文件加载的对象、在 viewDidLoad 方法中创建的对象以及创建的对象在运行时懒惰地添加到视图层次结构中。在 iOS 6 上，视图永远不会被清除，并且这些方法永远不会被调用。如果您的视图控制器需要在内存不足时执行特定任务，它应该覆盖 didReceiveMemoryWarning 方法。

因此，您将取消注册命令放入`-(void)dealloc`or `-(void)didReceiveMemoryWarning`。即使在 Arc `-(void)dealloc`get's call 中，您也无法调用`[super dealloc]`.

# java - GWT 中的并发节省

> ID：12709462
> 
> 赞同：2
> 
> 时间：2012-10-03T13:24:06.753
> 
> 标签：java, gwt

再会！

我试图在 GWT 2.4 中实现并发保存。有一个用户案例：

1.  用户 John 和 Jim 打开一个实体进行编辑
2.  John 保存他的更改。一切正常。
3.  Jim 保存他的更改。系统询问是否覆盖

    一种。Jim 不想覆盖，系统只是刷新页面上的实体

    湾。否则，如果 Jim 想要保存他的更改，则必须保留更改并且 John 的更改将被销毁。（仅留在更改历史中）

所以我对3.b有问题。

```
public void save(MyEntityProxy entity){
    MyRequest rContext = (MyRequest) driver.flush();
    MyProxy myEntity = (MyProxy) rContext.edit(entity);
    entitySave(rContext, (MyProxy) myEntity, false);
}

private void entitySave(MyRequest rContext, final MyProxy myEntity, boolean overwrite){
    GWT.log("SAVE ENTITY WITH NAME = " + myEntity.getName());
    rContext.persist(myEntity, entityVersion, overwrite)
    .fire(new Receiver<MyProxy>() {
        @Override
        public void onSuccess(MyProxy response) {
            goToModel();
        }
        @Override
        public void onFailure(ServerFailure error) {
            if(isConcurency(error)){
                entitySave((MyRequest)getNewRequestContext(), myEntity,true);
            }
        }
    });
}

/*This is a method from MyService for persisting*/
public MyProxy persist(MyProxy entity, Long version, boolean overwrite) {
    LOG.info("PERSISTS ENTITY  NAME=" + entity.getName());
    if(!overwrite && !checkVersionChanged(entity, version)){    
      System.out.println("RAISE CHANGED_BY_OTHER EXCEPTION");
      throw new RuntimeException(CHANGED_BY_OTHER.name());              
    }
    entity = getEntityManager().merge(entity);
    getEntityManager().flush();
    return entity;
} 
```

isConcurrency 是一种检查并发问题的方法，当用户在对话框中选择“覆盖”点时返回 true。

GWT 日志：

```
SAVE ENTITY WITH NAME = John //There is John changed name of entity
SAVE ENTITY WITH NAME = Jim  //There is John changed name of entity
SAVE ENTITY WITH NAME = Jim  //There is John overwrites entity 
```

服务器日志：

```
[INFO] PERSISTS ENTITY NAME=Jim //There is John changed name of entity
[INFO] SAVE ENTITY NAME=Jim     //Persisting of John's changes. Here John finished his work
[INFO] PERSISTS ENTITY NAME=John //There is Jim changed name of entity
[INFO] RAISE CHANGED_BY_OTHER EXCEPTION   //Exception raises and dialog shows for Jim
[INFO] PERSISTS ENTITY NAME=John //Second iteration of saving. Look at the name!. 
```

我不明白发生了什么。当 Jim 覆盖他的更改时，在客户端层一切都是正确的，但服务器层使用以前用户保存的数据。

有谁知道在这种情况下如何正确覆盖更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:09:13.560

当您保存以覆盖时，您将编辑与第一次发送相同的实体，然后该实体已被冻结*，*然后*与*`RequestContext`. 因此，当您将实体传递给新创建的`RequestContext`时，它会隐含地`edit()`s 它，并且由于没有对其应用任何更改，因此它会在`fire()`d 时向服务器发送一个空差异。因此要求服务器 1) 从数据库加载实体，2) 应用差异（即，什么都不做，因为差异是空的），然后 3) 保存实体，此时实体尚未修改最后坚持。

理想情况下，您希望与`edit()`第一个请求中的实体相同，并对其重新应用相同的更改，因此您将完全相同的差异发送到服务器。不幸的是，没有简单的方法来做到这一点（嗯，这取决于您将编辑过的数据放入代理中的人）。

请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=5794](http://code.google.com/p/google-web-toolkit/issues/detail?id=5794)和[http://code.google.com/p/google-web-toolkit/issues/detail?id =6046](http://code.google.com/p/google-web-toolkit/issues/detail?id=6046)

虽然很明显，RequestFactory 不是为这些用例量身定制的，它更多的是关于*保存而不询问*，您的应用程序提供了一种*撤消*更改的方法（例如登录服务器并分配一个 ID）。

# android - 安卓代码错误

> ID：12709465
> 
> 赞同：-8
> 
> 时间：2012-10-03T13:24:30.940
> 
> 标签：android

> **可能重复：**
> [AsyncTask 和 Looper.prepare() 错误](https://stackoverflow.com/questions/4187960/asynctask-and-looper-prepare-error)

```
10-03 18:38:32.041: E/Trace(685): error opening trace file: No such file or directory (2)
10-03 18:39:30.731: E/AndroidRuntime(685): FATAL EXCEPTION: AsyncTask #1
10-03 18:39:30.731: E/AndroidRuntime(685): java.lang.RuntimeException: An error occured while executing doInBackground()
10-03 18:39:30.731: E/AndroidRuntime(685):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
10-03 18:39:30.731: E/AndroidRuntime(685):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-03 18:39:30.731: E/AndroidRuntime(685):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-03 18:39:30.731: E/AndroidRuntime(685):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-03 18:39:30.731: E/AndroidRuntime(685):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-03 18:39:30.731: E/AndroidRuntime(685):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-03 18:39:30.731: E/AndroidRuntime(685):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-03 18:39:30.731: E/AndroidRuntime(685):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-03 18:39:30.731: E/AndroidRuntime(685):  at java.lang.Thread.run(Thread.java:856)
10-03 18:39:30.731: E/AndroidRuntime(685): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
10-03 18:39:30.731: E/AndroidRuntime(685):  at android.os.Handler.<init>(Handler.java:121)
10-03 18:39:30.731: E/AndroidRuntime(685):  at android.widget.Toast$TN.<init>(Toast.java:322)
10-03 18:39:30.731: E/AndroidRuntime(685):  at android.widget.Toast.<init>(Toast.java:91)
10-03 18:39:30.731: E/AndroidRuntime(685):  at android.widget.Toast.makeText(Toast.java:238)
10-03 18:39:30.731: E/AndroidRuntime(685):  at com.example.annapurna.DisplayContri$CreateContribution.doInBackground(DisplayContri.java:95)
10-03 18:39:30.731: E/AndroidRuntime(685):  at com.example.annapurna.DisplayContri$CreateContribution.doInBackground(DisplayContri.java:1)
10-03 18:39:30.731: E/AndroidRuntime(685):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-03 18:39:30.731: E/AndroidRuntime(685):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-03 18:39:30.731: E/AndroidRuntime(685):  ... 5 more
10-03 18:39:32.461: E/WindowManager(685): Activity com.example.annapurna.DisplayContri has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4100b318 that was originally added here
10-03 18:39:32.461: E/WindowManager(685): android.view.WindowLeaked: Activity com.example.annapurna.DisplayContri has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4100b318 that was originally added here
10-03 18:39:32.461: E/WindowManager(685):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
10-03 18:39:32.461: E/WindowManager(685):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
10-03 18:39:32.461: E/WindowManager(685):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
10-03 18:39:32.461: E/WindowManager(685):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
10-03 18:39:32.461: E/WindowManager(685):   at android.view.Window$LocalWindowManager.addView(Window.java:547)
10-03 18:39:32.461: E/WindowManager(685):   at android.app.Dialog.show(Dialog.java:277)
10-03 18:39:32.461: E/WindowManager(685):   at com.example.annapurna.DisplayContri$CreateContribution.onPreExecute(DisplayContri.java:82)
10-03 18:39:32.461: E/WindowManager(685):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
10-03 18:39:32.461: E/WindowManager(685):   at android.os.AsyncTask.execute(AsyncTask.java:534)
10-03 18:39:32.461: E/WindowManager(685):   at com.example.annapurna.DisplayContri$1.onClick(DisplayContri.java:60)
10-03 18:39:32.461: E/WindowManager(685):   at android.view.View.performClick(View.java:4084)
10-03 18:39:32.461: E/WindowManager(685):   at android.view.View$PerformClick.run(View.java:16966)
10-03 18:39:32.461: E/WindowManager(685):   at android.os.Handler.handleCallback(Handler.java:615)
10-03 18:39:32.461: E/WindowManager(685):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-03 18:39:32.461: E/WindowManager(685):   at android.os.Looper.loop(Looper.java:137)
10-03 18:39:32.461: E/WindowManager(685):   at android.app.ActivityThread.main(ActivityThread.java:4745)
10-03 18:39:32.461: E/WindowManager(685):   at java.lang.reflect.Method.invokeNative(Native Method)
10-03 18:39:32.461: E/WindowManager(685):   at java.lang.reflect.Method.invoke(Method.java:511)
10-03 18:39:32.461: E/WindowManager(685):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-03 18:39:32.461: E/WindowManager(685):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-03 18:39:32.461: E/WindowManager(685):   at dalvik.system.NativeStart.main(Native Method)
10-03 18:44:31.601: E/Trace(712): error opening trace file: No such file or directory (2)
10-03 18:50:53.220: E/AndroidRuntime(712): FATAL EXCEPTION: AsyncTask #1
10-03 18:50:53.220: E/AndroidRuntime(712): java.lang.RuntimeException: An error occured while executing doInBackground()
10-03 18:50:53.220: E/AndroidRuntime(712):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
10-03 18:50:53.220: E/AndroidRuntime(712):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-03 18:50:53.220: E/AndroidRuntime(712):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-03 18:50:53.220: E/AndroidRuntime(712):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-03 18:50:53.220: E/AndroidRuntime(712):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-03 18:50:53.220: E/AndroidRuntime(712):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-03 18:50:53.220: E/AndroidRuntime(712):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-03 18:50:53.220: E/AndroidRuntime(712):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-03 18:50:53.220: E/AndroidRuntime(712):  at java.lang.Thread.run(Thread.java:856)
10-03 18:50:53.220: E/AndroidRuntime(712): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
10-03 18:50:53.220: E/AndroidRuntime(712):  at android.os.Handler.<init>(Handler.java:121)
10-03 18:50:53.220: E/AndroidRuntime(712):  at android.widget.Toast$TN.<init>(Toast.java:322)
10-03 18:50:53.220: E/AndroidRuntime(712):  at android.widget.Toast.<init>(Toast.java:91)
10-03 18:50:53.220: E/AndroidRuntime(712):  at android.widget.Toast.makeText(Toast.java:238)
10-03 18:50:53.220: E/AndroidRuntime(712):  at com.example.annapurna.DisplayContri$CreateContribution.doInBackground(DisplayContri.java:95)
10-03 18:50:53.220: E/AndroidRuntime(712):  at com.example.annapurna.DisplayContri$CreateContribution.doInBackground(DisplayContri.java:1)
10-03 18:50:53.220: E/AndroidRuntime(712):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-03 18:50:53.220: E/AndroidRuntime(712):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-03 18:50:53.220: E/AndroidRuntime(712):  ... 5 more
10-03 18:50:54.580: E/WindowManager(712): Activity com.example.annapurna.DisplayContri has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4100a568 that was originally added here
10-03 18:50:54.580: E/WindowManager(712): android.view.WindowLeaked: Activity com.example.annapurna.DisplayContri has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4100a568 that was originally added here
10-03 18:50:54.580: E/WindowManager(712):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
10-03 18:50:54.580: E/WindowManager(712):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
10-03 18:50:54.580: E/WindowManager(712):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
10-03 18:50:54.580: E/WindowManager(712):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
10-03 18:50:54.580: E/WindowManager(712):   at android.view.Window$LocalWindowManager.addView(Window.java:547)
10-03 18:50:54.580: E/WindowManager(712):   at android.app.Dialog.show(Dialog.java:277)
10-03 18:50:54.580: E/WindowManager(712):   at com.example.annapurna.DisplayContri$CreateContribution.onPreExecute(DisplayContri.java:82)
10-03 18:50:54.580: E/WindowManager(712):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
10-03 18:50:54.580: E/WindowManager(712):   at android.os.AsyncTask.execute(AsyncTask.java:534)
10-03 18:50:54.580: E/WindowManager(712):   at com.example.annapurna.DisplayContri$1.onClick(DisplayContri.java:60)
10-03 18:50:54.580: E/WindowManager(712):   at android.view.View.performClick(View.java:4084)
10-03 18:50:54.580: E/WindowManager(712):   at android.view.View$PerformClick.run(View.java:16966)
10-03 18:50:54.580: E/WindowManager(712):   at android.os.Handler.handleCallback(Handler.java:615)
10-03 18:50:54.580: E/WindowManager(712):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-03 18:50:54.580: E/WindowManager(712):   at android.os.Looper.loop(Looper.java:137)
10-03 18:50:54.580: E/WindowManager(712):   at android.app.ActivityThread.main(ActivityThread.java:4745)
10-03 18:50:54.580: E/WindowManager(712):   at java.lang.reflect.Method.invokeNative(Native Method)
10-03 18:50:54.580: E/WindowManager(712):   at java.lang.reflect.Method.invoke(Method.java:511)
10-03 18:50:54.580: E/WindowManager(712):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-03 18:50:54.580: E/WindowManager(712):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-03 18:50:54.580: E/WindowManager(712):   at dalvik.system.NativeStart.main(Native Method)
10-03 18:50:57.681: E/Trace(732): error opening trace file: No such file or directory (2) 
```

这里给出了发生错误的程序代码 -

```
 package com.example.annapurna;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
public class DisplayContri extends Activity {
    // Progress Dialog
        private ProgressDialog pDialog;

        JSONParser jsonParser = new JSONParser();
        EditText editText1;
        //EditText  text2;
       //EditText  text3;

        // url to create new product
        private static String url_create_product = "http://10.0.2.2/annapurna_connect/userold.php";

        // JSON Node names
        private static final String TAG_SUCCESS = "success";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_contri);

        //Edit text
        editText1 = (EditText) findViewById(R.id.editText1);
        //text2 = (EditText) findViewById(R.id.editText2);
        //text3 = (EditText) findViewById(R.id.editText3);

        //Create Button
        Button button1 = (Button) findViewById(R.id.button1);

        //button click event
        button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // Creating new Contribution entry in background thread
                new CreateContribution().execute("");

            }
        });
    }

    /**
     * Background Async Task to Create new product
     * */
    class CreateContribution extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(DisplayContri.this);
            pDialog.setMessage("Creating Product..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();

        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) 
        {

            String name = editText1.getText().toString();
            //String age = (text2.getText().toString());
            //String id = (text3.getText().toString());
            Toast toast2=Toast.makeText(getApplicationContext(), "Error2", Toast.LENGTH_LONG);//This is where the error shows  
             toast2.show(); 
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name", name));
            //params.add(new BasicNameValuePair("age", age));
            //params.add(new BasicNameValuePair("id", id));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product
                    Intent i = new Intent(getApplicationContext(), Annapurna.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_display_contri, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }
    public void contributor(View view) {
        Intent intent = new Intent(this, Contributor.class);

        startActivity(intent);
    }

   } 
```

有一个用于连接的 Jsonparsor.java 类。在上面的代码中，doInBackground方法（）没有执行，我通过添加toast测试了应用程序，我发现它没有进入doInBackground方法并执行到preexecute（）的最后结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:29:05.557

您正在尝试从 AsyncTask 的 doInBackground() 更新 UI。

这是不可能的。

如果您有任何 Toast 或您尝试从 doInBackground() 到 UI 的任何其他更新，请确保删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:27:54.667

检查您是否在主线程以外的线程上创建 AsyncTask。

# asp.net - 调用从 .aspx .cs 到 .aspx 的方法

> ID：12709466
> 
> 赞同：-2
> 
> 时间：2012-10-03T13:24:37.073
> 
> 标签：asp.net, .aspxauth

> **可能重复：**
> [来自 javascript 的 Asp.net 代码隐藏？](https://stackoverflow.com/questions/6136274/asp-net-codebehind-from-javascript)

Expert.please 给我一个调用 .aspx 页面内的函数（方法）的示例，该页面是用 .aspx.cs 页面编写的。请使用 javascript 调用该函数..给我完整的代码，只有它对我真正有帮助。 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:27:24.760

看到这个：

[http://www.xdevsoftware.com/blog/post/Call-WebMethod-from-Javascript-in-ASPNET.aspx](http://www.xdevsoftware.com/blog/post/Call-WebMethod-from-Javascript-in-ASPNET.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:28:04.687

请参阅[http://aspalliance.com/1922_PageMethods_In_ASPNET_AJAX.2](http://aspalliance.com/1922_PageMethods_In_ASPNET_AJAX.2) ......

# c++ - c++ 指向字符串数组的指针

> ID：12709467
> 
> 赞同：0
> 
> 时间：2012-10-03T13:24:39.737
> 
> 标签：c++, pointers, compiler-errors, malloc

看看这段代码：我试图从控制台读取一些字符串并将它们存储在一个动态数组中。

```
int Doctor::addPatients()
{
  string* names = NULL;
  int num;
  cout << "how many patients are to be added? ";
  cin >> num;
  numPatients=num;
  names = new string[numPatients];
  for(int i=0;i++;i<numPatients){
    cout << "enter the next patient's name: ";
    cin.clear();
    cin >> names[i];
  }
  patients = names; //patients is a private member variable of class Doctor
} 
```

当我执行此代码时，我收到以下错误：

```
malloc: *** error for object 0x10c100898: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
Abort trap: 6 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:25:59.980

你没有初始化整数 i

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T13:29:52.393

```
for(int i=0;i++;i<numPatients)  // Condition is the second expression in for syntax 
```

语法错误。

```
for(int i=0;i<numPatients; i++) 
```

你用的是什么编译器？您应该得到一个编译错误而不是运行时错误。你还写了一个复制构造函数吗？有关更多信息，请参阅[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。为了简化工作，请使用`std::vector<std::string>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:28:50.210

在 for 语句中，`for(int i;i++;i<numPatients)`

`i`应该初始化为 0 并且条件应该是第二个参数正确的格式应该是 -

```
for(int i=0;i<numPatients;i++) 
```

`cin`不是获取字符串输入的好方法。cin 只读取直到它看到空格字符（空格、换行符、制表符..）或者使用 getline 函数 -

句法：

```
getline(cin,names[i]) 
```

# ruby-on-rails - Rails 中非 ActiveRecord 模型的数据库查询

> ID：12709468
> 
> 赞同：1
> 
> 时间：2012-10-03T13:24:45.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3, hstore

在使用 Rails 3.2 和 Postgres hstore 构建应用程序时，我遇到了非 ActiveRecord 模型的问题（目前使用 ActiveAttr，但可以使用其他选项）。简而言之，我需要查询数据库以检索 hstore 中的一组键。据我所知，这只能通过直接的、非 ActiveRecord::Query 语句来实现。

我当前的代码如下所示：

```
def self.keys(query)
  # FIXME Need to determine how to sanitize input
  sql = "SELECT DISTINCT key FROM ( SELECT skeys(data) AS key from \"products\" ) AS keys"
  if(query && !query.empty?)
    sql += " WHERE lower(key) LIKE '%#{query.downcase}%'"
  end
  ActiveRecord::Base.connection.select_values(sql)
end 
```

这有效，但不会清理 input `query`。如果我尝试创建一个数组并将关键行更改为`sql += " WHERE lower(key) LIKE ?"`我的日志中出现此错误：

```
Could not log "sql.active_record" event. NoMethodError: undefined method `squeeze' for #<Array:0x007fd9968704e8>
TypeError: wrong argument type Array (expected String): ["SELECT DISTINCT key FROM ( SELECT skeys(data) AS key from \"products\" ) AS keys WHERE lower(key) LIKE ?", "%o%"] 
```

是否可以在外部调用适当的清理方法，或者至少在我的模型中执行相同的逻辑？

# wpf - wpf中选择不同的问题

> ID：12709478
> 
> 赞同：0
> 
> 时间：2012-10-03T13:25:10.780
> 
> 标签：wpf, database

我有一个 WPF 应用程序，当我运行 Select distinct query 时出现错误

`Failed to enable constraints. One or more rows contain values violating non-null, unique, or foreign-key constraints.`

.cs 代码：

```
 Saman.DatabaseDataSet databaseDataSet = ((Saman.DatabaseDataSet)(this.FindResource("databaseDataSet")));
            // Load data into the table Employee. You can modify this code as needed.
            Saman.DatabaseDataSetTableAdapters.PartsTableAdapter databaseDataSetPartsTableAdapter = new Saman.DatabaseDataSetTableAdapters.PartsTableAdapter();
            databaseDataSetPartsTableAdapter.FillBy(databaseDataSet.Parts);

            System.Windows.Data.CollectionViewSource partsViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("partsViewSource")));
            partsViewSource.View.MoveCurrentToFirst(); 
```

查询是

```
Select DISTINCT Category from Parts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:45:02.757

我认为这可能与您的数据表有关，请检查您的 xsd 文件，尤其是 Parts TableAdapter

# scala - 使用 SerialVersionUID 在 Scala 中实现 Externalizable

> ID：12709479
> 
> 赞同：1
> 
> 时间：2012-10-03T13:25:12.017
> 
> 标签：scala, tomcat7, squeryl

我有一个部署到 Tomcat 7 的应用程序，目前集群在两个节点之间。当容器尝试反序列化已更改的类时，我遇到了一个小问题。读写方法应该优雅地处理这个问题，所以我认为这不是问题。尽我所能告诉设置`serialVersionUID`应该可以解决问题，但是在我的代码中，我将其指定为`-1`并且在该值下方的错误中似乎被忽略了。

例外：

> java.io.InvalidClassException：common.user.User；本地类不兼容：st ream classdesc serialVersionUID = 1828770465826288626，本地类serialVersion UID = 6192552274218063887

类定义的相关部分：

```
case class User(
    var id: Long = 0l) extends SerialVersionUID(-1l) with KeyedEntity[Long] with Externalizable {

  def readExternal(in: ObjectInput) {
    id = in.readLong()
  }

  def writeExternal(out: ObjectOutput) {
    out.writeLong(id)
  }
} 
```

我还尝试使用以下内容而不是扩展抽象类（根据：[http](http://www.scala-lang.org/node/259) ://www.scala-lang.org/node/259 ）

```
private val serialVersionUID = -1l 
```

我得到相同的结果。在如何使用 Scala 正确地外部化一个类时，我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:33:54.140

检查[SerialVersionUID](http://www.scala-lang.org/api/current/index.html#scala.SerialVersionUID)的文档，它是一个注释，所以你应该`@SerialVersionUID(123)`在类声明之前使用。

进行中：

```
@SerialVersionUID(123)
case class User(
    var id: Long = 0l) extends KeyedEntity[Long] with Externalizable {
     ...
} 
```

# java - Android：自定义设计控件的选择器 (xml) 文件的存储位置

> ID：12709480
> 
> 赞同：18
> 
> 时间：2012-10-03T13:25:12.323
> 
> 标签：java, android

我尝试制作自定义 LinearLayout 和 Button 样式。

我只是想知道在哪里放置我的 Selector xml 文件？

```
<selector     xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <shape>
        <gradient 
            android:angle="90"  
            android:startColor="#534E4E"
            android:endColor="#000000"
            android:type="linear" />

    </shape>
</item> 
```

在我的单声道项目中，我将文件放在可绘制文件夹中，但在我的 Java（本机）开发中，我不知道也许我错过了存储文件的基本知识，但仍然不知道将选择器放在哪里，因为最新的 Eclipse 插件有 4 个可绘制对象（-ldpi、-hdpi、mdpi 和 xhdpi）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-03T13:29:47.507

在 res/ 目录中创建一个 drawable/ 文件夹，并在其中添加 selector.xml 文件。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-06-16T09:49:37.717

将其放在所有可绘制文件夹中，以便图像在不同尺寸的手机中进行调整。这对我有用。

# php - PHP通过exec运行linux“less”命令-二进制文件警告

> ID：12709486
> 
> 赞同：1
> 
> 时间：2012-10-03T13:25:34.710
> 
> 标签：php, linux, pdf, less-unix

我必须将一些 PDF 文件转换为 TXT。我最终得到了“less”命令，因为例如 pdftotext 在 PDF 中的表格存在一些问题。问题是，当我从 exec 函数（或 shell_exec/system）运行命令时，不仅仅是显示信息，选择的 PDF 是二进制文件，结果文件只是 TXT，其中包含 PDF 数据。但是当我在终端正常做同样的事情时，一切都很好。我也尝试以 www_data 用户身份登录并以该用户身份运行命令，但也没有问题。

命令：

```
$ less /var/www/original.pdf > /var/www/new.txt 
```

PHP代码：

```
exec("less -f /var/www/original.pdf > /var/www/new.txt 2>&1"); 
```

PHP 执行的结果：

```
"/var/www/original.pdf" may be a binary file.  See it anyway? 
```

exec 命令中的“-f”选项在那里，因为这样你就不需要按“y”来表示“是的，无论如何我都想看到它”。

`set | grep less`产量：

```
LESSCLOSE='/usr/bin/lesspipe %s %s'
LESSOPEN='| /usr/bin/lesspipe %s'
            Lossless LZW RLE Zip' -- "$cur" ));
                _apport_parameterless
                _apport_parameterless
                _apport_parameterless
                _apport_parameterless
_apport_parameterless () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:28:18.590

根据我的阅读，您的控制台能够显示 PDF 文件，`less`因为您安装了输入预处理器，例如`lesspipe`或`lessfile`. 使用这些预处理器的方法`less`是读取一个名为 LESSOPEN 的环境变量，它指向`lesspipe`and`lessfile`脚本。

您的网络服务器可能有一种方法，通过环境变量和 shell 命令，可能能够复制此行为，以便您`less`正确解析 PDF 的调用。

我的建议是调用 bash 脚本为您进行转换，而不是`less`直接调用。这样，您的 bash 脚本将能够设置适当的环境变量并执行适当的命令来将您的 PDF 文件转换为可读的输出。

以下是如何执行此操作的示例：

```
#!/bin/bash

eval $(lesspipe)
less $1 > $2 2>&1 
```

然后，从 PHP 调用该脚本，如下所示：

```
exec("/path/to/your/script/script.sh /var/www/original.pdf /var/www/new.txt"); 
```

如果它不起作用，请尝试更改`eval $(lesspipe)`为`eval $(lessfile)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:36:07.983

首先，less 是一个读取文本流的交互式程序。在这种情况下，您应该`cat`改用。由于 PDF 是二进制格式，而不是基于文本的格式，因此这或当然也不起作用。

为什么不使用 pdf 到文本转换器之类的`pdftotext`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:14:42.100

PHP 代码是如何执行的？当您使用浏览器点击它时，是在命令行上，通过`php file.php`还是通过 Web 服务器`http://servername/something/file.php`？

一种猜测是，`less`您在命令行上执行的操作与`less`运行 PHP 代码时执行的操作不同。

# java - 通过控制器将数据从模型传递到视图

> ID：12709488
> 
> 赞同：0
> 
> 时间：2012-10-03T13:25:42.530
> 
> 标签：java, android

我正在尝试在我的 android whack-a-mole 游戏中创建一个 MVC 模式。

我正在通过内部类线程在模型中生成痣位置，并希望最终将其传递给视图，以便为它生成一个精灵。

如何为我的视图创建一种方式来不断接收从我的模型生成的痣位置？

我在下面编辑了我的代码以捕获它们背后的要点。

**模型 ：**

```
public class GameModel{
   public GameModel(){
      spawner = new MoleSpawner();
      spawner.start();
   }
.
.
.
   private class MoleSpawner extends Thread{
      private int location;
      public void run() {
          location = new Random().nextInt(20);
          try{
             sleep (1000);
          } catch (InterruptedException ex){
             ex.printStackTrace();
          }
      }
   }
} 
```

**看法：**

```
public GameView{
.
.
.
  public void createMoleSprite(int newlocation){
     //create sprites here
     //newlocation should come from the MODEL
     //this method must be triggered everytime the MODEL creates a new location
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:34:41.173

实现这一点的方法之一是使用处理程序。

它可能更复杂，但我会给你一个简单的例子来说明如何实现它。

在您的游戏正在运行的 Activity 中，通过使用获取它的 Handler

```
Handler mHandler = new Handler(); 
```

然后，当您实例化模型时，将 mHandler 对象以及对您的活动的引用传递给它。在您的模型中，每当您需要生成新的痣时，请执行

```
 mHandler.post(new Runnable() {

   gameActivity.spawnNewMoleAt(location);

 }); 
```

这可能会变得更加复杂，特别是如果您控制动态生成鼹鼠的速率，但您可以在此基础上进行构建。

[你可以在这里](http://www.vogella.com/articles/AndroidPerformance/article.html)找到关于处理程序的好教程。

# ruby-on-rails - 在 mixin 模块中状态 Active Record 关联是一种有效的方法吗？

> ID：12709492
> 
> 赞同：3
> 
> 时间：2012-10-03T13:25:50.893
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, mixins

我正在使用 Ruby on Rails v3.2.2，我想知道它是否是在 mixin 模块中声明[Active Record 关联的](http://guides.rubyonrails.org/association_basics.html)*有效*方法。*为什么？*

 *更多的：

1.  这种方法的优点和缺点是什么？
2.  有什么需要注意的吗？
3.  有什么处方可以做到吗？

* * *

*注意*：我想干燥（不要重复自己）我的代码，因为与我的 Active Record 关联相关的语句对于多个模型是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:49:20.803

你可以做到，但你必须注意在一个`included do...end`街区内做到这一点。

在我看来，即使它不是为了 DRY 而只是为了封装行为，将模型的代码分成独立的模块也是非常值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:46:04.997

去做吧！关于你的问题：

*   关于1：最大的好处是你有一个干净的代码库，没有重复的代码；我能想到的最大缺点是，对于查看您的代码的人来说，它可能不会立即显而易见。

*   关于 3：您必须在`included`回调中定义关联或为其使用新`ActiveSupport::Concern`扩展。

例子：

```
# using the standard include callback
module LocationAwareness

  def self.included(base)
    base.has_one :location
  end
end 
```

或者

```
# using ActiveSupport::Concern
module LocationAwareness
  extend ActiveSupport::Concern

  included do
    base.has_one :location
  end
end 
```

然后你可以像这样在你的模型中使用它：

```
class Person < ActiveRecord::Base
  include LocationAwareness
end

class Gig < ActiveRecord::Base
  include LocationAwareness
end

#... 
```

如果你有更多的共享行为而不是“仅仅”关联，那么这种方法当然会开始变得更有意义......*

# mysql - MySQL查询特定顺序和限制

> ID：12709499
> 
> 赞同：1
> 
> 时间：2012-10-03T13:26:02.530
> 
> 标签：mysql, database, sql-order-by, limit

假设我有以下表结构：

```
Field1 Field2 Field3
val1   valb_1 date
val1   valb_2 date
val1   valb_3 date
val2   valb_4 date
val3   valb_5 date 
```

我将如何限制 Field1 中最多 5 个不同的值，其中字段可能填充与示例建议的完全相同的值 "val1" ，以及 Field2 中的最多 200 个值，其中字段始终不同价值。按日期顺序排序。

还有如何使其尽可能等同于 Field1 的限制 5，例如 200 限制：50 属于 val1，100 属于 val2，100 属于 field1 的 val3，即 250，val 2 中有 100 和在 val 3 中为 100，理想情况下，200 限制是在 val1 中选择 50，在 val 2 和 3 中选择 75。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:03:06.853

我不完全确定你想要实现什么，但这样想：

是否可以通过 3 个不同的查询来解决，并将结果与​​ UNION 放在一起？

或者您所说的这些限制是否相关，因此如果对于字段 1 的 5 个值，它们与字段 2 中的 200 个不同值一起出现。

```
CREATE VIEW F1LIMIT5  as SELECT DISTINCT Field1 from MYTABLE limit 5;
CREATE VIEW F2LIMIT200 as SELECT DISTINCT Field2 from MYTABLE limit 200;
SELECT * from MYTABLE where Field1 in (SELECT * FROM F1LIMIT5) and Field2 in (SELECT * FROM F2LIMIT200) order by Field3 desc ; 
```

但这可能会给您超过 200 条记录。你可以在最后添加一个 LIMIT 200 来做到这一点，但我什至不确定它是否是你想要的。该技术是将事情分解成小步骤，然后在此基础上进行构建。我发现使用视图比复杂的查询要好，因为您可以一路测试每个部分，以确保得到您想要的

# c++ - 由于标头包含导致代码执行速度变慢

> ID：12709500
> 
> 赞同：3
> 
> 时间：2012-10-03T13:26:01.953
> 
> 标签：c++, linker, profiling, compiler-optimization

我们这里有一个非常大的程序，它混合了 C++ 和 FORTRAN（对不起）。我的一次签入导致整个应用程序的速度急剧下降（即两倍或更多）——即使在不受我的更改影响的代码区域也是如此。

事实：

1.  几乎每个模块都减慢了相似的速度——即使是那些不使用我的代码的模块。

2.  可执行文件大约大 6%。

3.  签入之间的元数据未更改。

4.  IDE/编译器是发布模式下的 VS2010。

5.  一些 .lib 文件的大小增加了一倍或三倍。

我查看了一个大小增加了两倍的 .lib 文件，但只有两个变化：

a) 我已经包含了一个很大的头文件，该头文件又包含许多其他头文件——其中一些包含中等复杂的内联代码。“其他包含目录”已从无或一变为大约 7 个，因为每个头文件#includes 一个或多个其他头文件。

b) 我从这个头文件中调用了 4 个函数，但是在运行速度变慢的过程中没有调用这些函数（即它们的*执行*不会减慢代码的速度，但可以想象它们的*包含）。*

尽管在论坛中搜索是否包含头文件会减慢*执行*速度（与编译相反），但我找不到一篇相关的文章。我的问题是：

**? #inclusion 是否包含*任何*形式的标头（声明或内联）会减慢代码*执行*速度？**

**? *包含内联*代码与执行速度是否存在定性或定量差异（我知道“内联”只是对编译器的建议）？**

**? .lib 大小、.exe 大小和执行速度之间的相关性是什么（我预计这里会有很多不同和矛盾的相关性）？**

**? 重构一些头文件以使其不需要包含其他头文件（通过将这些包含放入 .cpp 文件中，从而减少我的“其他包含目录”）会改善我的情况，你认为吗？**

我想最后一个问题是问题的核心，因为这需要付出很多努力......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:59:22.783

> #inclusion 是否包含任何形式的标头（声明或内联）会减慢代码执行速度？

添加未使用的声明或添加未使用的内联定义不会减慢执行速度。但是，我可以想象有几件事情会减慢执行速度：

*   一些#define 阻止了由另一个标题提供的常用函数的优化内联或宏变体。
*   一些常用操作的重载，可能来自标准库，效率低于默认值。

> 包含内联代码与执行速度是否存在定性或定量差异（我知道“内联”只是对编译器的建议）？

好吧，如果代码不可用，就不能内联。如果是，那它可以。通常编译器可以估计内联会节省多少，如果没有帮助就不会内联，但有时它可能会猜错。在这种情况下，结果将与通常情况下略有帮助的情况大不相同。

> .lib 大小、.exe 大小和执行速度之间的相关性是什么（我预计这里会有很多不同和矛盾的相关性）？

情况完全不同。内联会增加代码大小，但可以在每个调用站点上节省大量工作。但是更大的代码会占用更多的缓存，这会减慢它的速度。

> 重构一些头文件以使其不需要包含其他头文件（通过将这些包含放入 .cpp 文件中，从而减少我的“其他包含目录”）会改善我的情况，你认为吗？

它可能会也可能不会。视实际原因而定。

我建议你真的应该试着找出原因。它几乎肯定是由某些特定的代码引起的，而不是包含的代码量。所以回到更改之前的修订版并一点一点地添加包含的内容。首先单独包含最里面的标题，然后逐个添加使用它们的标题等等。当您到达使事情变得更糟的特定标头时，请尝试注释掉它的某些部分，直到将其缩小到特定声明或其中的几个。

还要取出一些您观察到性能下降的功能。如果您缩小范围但仍然看不到可能出现的问题，那么您将拥有一些其他人可以重现该问题的内容，因此您可以将其用作新问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:29:34.593

更改头文件不会更改执行时间，除非您意外地将构建 DEBUG 或其他诊断代码的内容包含到生成的二进制文件中。

那将是我的猜测，尤其是。考虑到输出文件大小的变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:42:39.970

你在用 COM 吗？您的包含文件是否将 STA 更改为 MTA 或反之亦然？您的包含文件现在是否拉入在您进行动态链接（lib pragma）之前的库中？是否包含不再拉入库并且您的代码不再动态链接？我重复史蒂夫的，是否包含调试库？

DUMPBIN 可能会为您提供有关实际构建的内容的更多见解。将结果与旧版本进行比较，看看是否有任何主要的突出之处。

附加编辑：检查测试机器上的内存使用情况，检查分页活动，以防您的较大 exe 越过阈值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T14:19:52.013

一次盲拍：

可能是缓存问题。内联函数和将“死”代码添加到库中会导致代码更大，并且会增加程序执行期间的缓存未命中量。

您可以通过简单地监控进程执行期间缓存未命中的数量来查看这是否是正确的路径。

* * *

关于你的评论：

6% 是多少？

如果您的 L1 缓存溢出（据我所知，即使在现代处理器上，它的大小也大约为 32K），您会将 L1 访问换成 L2 访问，这会慢约 2 倍。如果溢出 L2 缓存（范围从 256K 到 2M）并开始访问 L3，则获取页面的速度会再降低 5 倍（您可以查看[这个问题](https://stackoverflow.com/questions/4087280/approximate-cost-to-access-various-caches-and-main-memory)，它给出了核心 i7 的数据）。

以下是关于[wikipedia](https://en.wikipedia.org/wiki/CPU_cache#Cache_miss)上缓存未命中的一般说明。

再一次，要查看这是否真的是问题，您应该监控进程在执行期间命中的缓存未命中次数（我认为如果您使用的是 Windows，[进程资源](http://technet.microsoft.com/en-us/sysinternals/bb896653)管理器会向您显示这一点，或者如果您使用的是 linux ，则为[perf ）](https://stackoverflow.com/questions/10082517)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T13:36:28.883

*   #inclusion 是否包含任何形式的标头（声明或内联）会减慢代码执行速度？好吧，如果您的应用必须

    这只改变了代码出现的地方，所以我相信它不会改变任何东西。（如果你只是将一个函数向上移动三行，你的代码不会变得更快/更慢，对吗？）

*   包含内联代码与执行速度是否存在定性或定量差异（我知道“内联”只是对编译器的建议）

    也许。如果比较内联函数和非内联函数，内联函数可能会更快，因为它的代码只会被复制粘贴到适当的位置，而普通函数会在函数调用上浪费一些时间。

*   .lib 大小、.exe 大小和执行速度之间的相关性是什么（我预计这里会有很多不同和矛盾的相关性）

    虽然我可以想象一个较大的文件会减慢速度的假设情况，但我会冒险说大多数时候没有相关性。

您的可执行文件可能更大，因为您可能已经覆盖了一些影响执行的宏（例如取消定义旨在排除某些代码的定义）。这也可能导致性能下降（即，您不希望执行某些代码，但由于意外的宏重新定义它确实如此）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T18:08:39.657

猜测不太可能发现问题。诊断就会发现。如果减速是两倍，这意味着较慢的代码花费了 50% 的时间来做一些以前没有做的不必要的事情。这将很容易找到。

[*这*](https://stackoverflow.com/a/378024/23771)是我使用的方法，因为它确实找到了问题。 [*这是*](https://stackoverflow.com/a/927773/23771)一个例子，[*这里*](https://scicomp.stackexchange.com/a/2719/1262)有很多原因。

*我建议您首先在未*优化的代码中诊断问题。然后，当您清除问题时，打开优化器并让它完成它的工作。很有可能代码包含您可以修复而优化器无法修复的重大问题。不管优化器做什么，它都不会让你更容易找到只有你能解决的问题。

# javascript - 如果弹出窗口比原始页面长，fancybox 不会在页面底部显示覆盖

> ID：12709502
> 
> 赞同：0
> 
> 时间：2012-10-03T13:26:15.633
> 
> 标签：javascript, jquery, fancybox

我在一个网站上使用 Fancybox，一切都很顺利，除了一种情况......

如果页面适合单个屏幕并且弹出窗口大于一个屏幕，则覆盖仅显示原始单个屏幕的高度，并且下面的所有内容都没有溢出。

因此，在生成弹出窗口之前，似乎覆盖在页面高度的 100% 处应用。那么，一旦弹出窗口被渲染，是否有重新生成覆盖？或任何其他修复它的方法。

不幸的是，这是一个内部项目，所以我无法发送链接，但希望我的描述是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:31:15.433

您很可能正在使用 fancybox v1.3.4 或更低版本，因为此行为（错误）不会出现在 v2.x 中。

最快的解决方法是在加载您的 fancybox CSS 文件之后添加一个 CSS 内联声明。这应该可以解决问题：

```
<style type="text/css">
 #fancybox-overlay { position: fixed !important; }
</style> 
```

# rvm - RVM 不会切换到 OS X 系统 ruby

> ID：12709503
> 
> 赞同：3
> 
> 时间：2012-10-03T13:26:26.600
> 
> 标签：rvm

我在 Mac OS X 10.8.1 上，我安装了 rvm stable（运行后将`rvm implode`其清除），然后安装 1.9.3。但是，不可能切换回系统 ruby​​。

```
rvm use system
# -> Now using system ruby.
ruby -v
# -> ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.0]
/usr/bin/ruby -v
# -> ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
echo $PATH
# -> /Users/agnoster/.rvm/gems/ruby-1.9.3-p194/bin:/Users/agnoster/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/agnoster/.rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/sbin:/bin:/sbin:/usr/local/n/current/bin:/Users/agnoster/.yadr/bin:/Users/agnoster/.yadr/bin/yadr:/Users/agnoster/.rvm/bin
type rvm | head -n1
# rvm is a shell function 
```

这不会打扰我，除了它也不会安装新的 1.8.7 并且我有一些我想再次测试 1.8.7 的 gem。Travis 在这里很好，但我更希望能够在本地运行 1.8.7。

看起来 rvm 只是懦弱地拒绝修复路径。如果我手动从 PATH 中删除所有与 .rvm-1.9.3 相关的东西，如果可行的话。为什么 rvm 自己不这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:58:41.613

您在 zsh 上发现了重置错误`PATH`- 这应该报告为错误：[https ://github.com/wayneeseguin/rvm/issues](https://github.com/wayneeseguin/rvm/issues)

# mysql - mysql ，从选择结果更新

> ID：12709504
> 
> 赞同：0
> 
> 时间：2012-10-03T13:26:29.597
> 
> 标签：mysql

我正在尝试执行类似的操作：

```
 UPDATE page_results
          SET cache_valid=0
          WHERE link_id IN (SELECT  DISTINCT  l.link_id
          FROM link_results AS l
          INNER JOIN page_results AS p ON p.link_id=p.link_id 
          WHERE has_no_robots=0 AND cache_valid=1 AND cache_to_expire=1 AND status_code!='404' AND  href!='' AND anchor_match!='' AND nofollow=0) 
```

基本上，我想更新从派生表中获取的所有结果。

我的另一个解决方案是：

```
 UPDATE (SELECT  DISTINCT  l.link_id
          FROM link_results AS l
          INNER JOIN page_results AS p ON p.link_id=p.link_id 
          WHERE has_no_robots=0 AND cache_valid=1 AND cache_to_expire=1 AND status_code!='404' AND  href!='' AND anchor_match!='' AND nofollow=0) 
          SET cache_valid=0 
```

但这也不起作用..有没有办法实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:30:10.190

这是执行此操作的正确语法：

```
UPDATE page_results t1
INNER JOIN link_results AS l ON t1.link_id = l.link_id 
SET t1.cache_valid = 0
WHERE t1.has_no_robots   = 0 
  AND t1.cache_valid     = 1 
  AND t1.cache_to_expire = 1 
  AND t1.status_code    != '404' 
  AND t1.href!           = '' 
  AND t1.anchor_match   != '' 
  AND t1.nofollow        = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:30:09.880

这是因为`p.link_id=p.link_id` join 子句条件错误，试试这个查询：

```
 UPDATE page_results p
         INNER JOIN link_results l
             ON p.link_id = l.link_id
  SET   p.cache_valid = 0
  WHERE has_no_robots = 0 AND
        cache_valid = 1 AND 
        cache_to_expire = 1 AND
        status_code != '404' AND
        href != '' AND
        anchor_match != '' AND
        nofollow = 0; 
```

# javascript - Coldfusion分页和搜索

> ID：12709505
> 
> 赞同：0
> 
> 时间：2012-10-03T13:26:38.840
> 
> 标签：javascript, coldfusion

我在 ColdFusion 页面上有以下代码。此页面显示来自以下查询的数据，每页有 25 条记录，分页。现在我需要提供一个文本框和搜索按钮，以便用户可以输入 positionid 并点击搜索....我在这里遇到的问题是，如果 positionid 在例如第 7 页中，如何显示第 n 页200 页。请指教。谢谢

```
<cfquery name="qry_postn_detail" datasource="mbtran">
    select distinct position_id,schedule_group,accrual_profile,pay_rule_name,rest_days
    from kronos_if.position_detail  
    order by position_id 
</cfquery>

<cfset perpage = 25>

<cfparam name="url.start" default="1">
<cfif not isNumeric(url.start) or url.start lt 1 or url.start gt qry_postn_detail.recordCount or round(url.start) neq url.start>
    <cfset url.start = 1>
</cfif>

<cfset totalPages = ceiling(qry_postn_detail.recordCount / perpage)>
<cfset thisPage = ceiling(url.start / perpage)>

<cfset thisPage = Int(start / 25) + 1>

Page<cfoutput>
<cfloop from="1" to="#totalPages#" index="i">
    <cfif i is thisPage>
        #i#
    <cfelse>
        <cfif totalPages lte 5 or i is 1 or i is totalPages or (i gt thisPage - 3 and i lt thisPage + 3) or ((thisPage is 1 or thisPage is 2) and i lt 6) >
            <a href="?start=#(i*25)-24#">#i#</a>
        <cfelse>
            <cfif i is 2 or i is totalPages - 1>
                ...
            </cfif>
        </cfif>
     </cfif>
 </cfloop>
 </cfoutput> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:21:54.473

根据您的评论，我认为您需要做的就是在提交搜索表单时在查询中包含搜索参数。然后查询结果将只包含与他们搜索的内容匹配的记录，并且您的分页代码仍将像以前一样工作，但这次仅适用于匹配的记录。

所以你的查询看起来像：

```
<cfquery name="qry_postn_detail" datasource="mbtran">
    select distinct position_id,schedule_group,accrual_profile,pay_rule_name,rest_days
    from kronos_if.position_detail 
    <cfif IsDefined("form.searchfield") AND IsValid("integer", form.searchfield)>
        where position_id = <cfqueryparam cfsqltype="cf_sql_integer" value="#form.searchfield#">
    </cfif>
    order by position_id 
</cfquery> 
```

注意：我假设 position_id 是您表中的整数。您需要根据实际类型适当地更改 cfqueryparam 类型和验证逻辑。

**以下评论中发布的新问题的更新**

这是一个快速简单的示例，说明如何使用 JavaScript 跳转到特定页面。您提到您已经有一个`select`带有页码的框。您需要做的就是将`onChange`事件处理程序添加到您的`select`标签并调用一个 JavaScript 函数，该函数将重新加载页面，并将所选值附加到 url。

你的`select`会看起来像这样：

```
<select name="page" onChange="jump(this.value);">
    <option value="101">101</option>
    <option value="102">102</option>
    <option value="103">103</option>
    <option value="104">104</option>
</select> 
```

一个简单的 JavaScript 示例如下所示：

```
<script language="JavaScript">
    function jump(pagenum) {
        document.location.href("?start="+pagenum);
    }
</script> 
```

*请记住验证/清理任何和所有传递给您的 ColdFusion 页面的值。*

# jquery - 为什么 jquery .height() 在 chrome 上得到不同的结果？

> ID：12709506
> 
> 赞同：7
> 
> 时间：2012-10-03T13:26:40.237
> 
> 标签：jquery

这是 chrome 如何显示 div 的宽度和高度：

![在此处输入图像描述](../Images/d2168c144f7a73f367ac32d3cea336d7.png)

这是正确的，实际上高度是 1466。但是，如果我这样做：

```
$(document).ready(function () {
    console.log($('#container-altezza-fisso').height());
}); 
```

它打印 1418。它没有任何填充/边距。为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T13:29:34.690

那是因为在 DOMReady 上有些图像没有完全加载。您应该调用窗口负载的高度。

```
$(window).load(function(){
    console.log($('#container-altezza-fisso').height());
}) 
```

您还可以使用`outerHeight`：

> 获取匹配元素集中第一个元素的当前计算高度，包括填充、边框和可选的边距。如果在一组空元素上调用，则返回值的整数（不带“px”）表示形式或 null。

```
console.log($('#container-altezza-fisso').outerHeight()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:29:00.047

使用`outerHeight()`填充来获取高度。使用`outerHeight(true)`填充+边距获取高度。

[这是文档的链接。](http://api.jquery.com/outerHeight/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T13:29:40.420

`.height()`将为您获取元素的高度，`.outerHeight()`将返回包括填充、边距和边框的高度。

# android - 我已经获得了 4.0.3 的 android 源代码，从那时起我已经将 repo 更新为 4.0.4 。我怎样才能使用 4.0.3 代码呢？

> ID：12709508
> 
> 赞同：0
> 
> 时间：2012-10-03T13:27:02.780
> 
> 标签：android, git, repository, downgrade

我想将 repoy 设置为在整个代码库中仅显示 4.0.3 中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:06:29.350

感谢大家的帮助，尤其是 buzeeg 和 R0MANARMY，终于搞定了。android 的标签在[https://android.googlesource.com/platform/manifest.git](https://android.googlesource.com/platform/manifest.git)中列出 ，如果您已经拥有它，实际切换到该标签的命令是 repo start --all 只添加 --all如果你想改变整个源。如果您只想更改它，请指定特定的包名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:35:00.330

使用**git hist**查找带有旧代码的 repo 的哈希值。然后使用带有此哈希的**git checkout**在您的文件夹中拥有旧版本的存储库。

# android - Twitter URL 未在我的 android 应用程序的 webview 中加载

> ID：12709509
> 
> 赞同：2
> 
> 时间：2012-10-03T13:27:04.867
> 
> 标签：android, twitter

我在我的 android 应用程序中使用 twitter api 在此当我第一次登录 twitter 时，只有当我第二次尝试共享图像时我的 twitter url 加载到 webview 中，url 没有加载 webview 显示为空白。

```
private void setUpWebView(String murl) {
    mWebView = new WebView(getContext());
    mWebView.setVerticalScrollBarEnabled(false);
    mWebView.setHorizontalScrollBarEnabled(false);
    mWebView.setWebViewClient(new TwitterWebViewClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setDomStorageEnabled(true);
    System.out.println("Url is ---->" + murl);
    mWebView.setVisibility(View.VISIBLE);
    mWebView.loadUrl(murl);
    mWebView.requestFocus();
    System.out.println("URL Finished");
    mWebView.setLayoutParams(FILL);
    mContent.addView(mWebView);
} 
```

在上面的murl中，我可以获得不同的访问令牌来第二次共享图像，但是那个url没有加载到web视图中我做了什么错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:46:43.990

出于某种原因，如果某些设置被激活，Twitter 不会在 WebView 中加载。在制作我的 WebView twitter 应用程序时，我自己也遇到了同样的问题。

我无法告诉您为什么会这样，但只能说它很可能是您的设置之一。

编辑：此代码适用于我：

```
 web.setWebViewClient(webView);  
    web.getSettings().setJavaScriptEnabled(true);
    web.getSettings().setDomStorageEnabled(true);
    web.getSettings().setSavePassword(true);
    web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

        web.loadUrl("http://www.twitter.com"); 
```

# linux - Shell 脚本正在复制父目录中的每个文件

> ID：12709510
> 
> 赞同：1
> 
> 时间：2012-10-03T13:27:11.717
> 
> 标签：linux, bash, shell, unix, aix

我正在尝试将 $CurrentFile 从 $CurrentDir 复制到 $CurrentBackup。我遇到的问题是这个文件从父目录复制每个 $CurrentFile 。例如，

假设输入是这样的

```
CurrentDir=/home/usr/logs
CurrentFile='SystemOut_*'
CurrentDay=6
CurrentBackup=/backup 
```

但是，此命令会将每个 $CurrentFile 从 /home/usr/Serverinf 复制到 $CurrentBackup...

```
find . $CurrentDir . -type f -name $CurrentFile -mtime +$CurrentDay -exec cp {} $CurrentBackup \; 
```

我不确定我做错了什么......谁能告诉我我做错了什么？如果我不能使用这个命令，你能告诉我这个替代命令吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:43:00.447

$CurrentDir 前后有多余的点。这将使它在实际当前目录中查找除 $CurrentDir 之外的文件。

此外，在可能包含通配符的任何变量周围使用双引号也很重要。

```
find $CurrentDir -type f -name "$CurrentFile" -mtime +$CurrentDay -exec cp {} $CurrentBackup \; 
```

更好的是，除非您明确需要将其扩展到多个参数，否则请在所有变量周围加上双引号：

```
find "$CurrentDir" -type f -name "$CurrentFile" -mtime +"$CurrentDay" -exec cp {} "$CurrentBackup" \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:51:02.597

据我所知，问题是多余的点：

```
find . $CurrentDir . -type f -name $CurrentFile -mtime +$CurrentDay -exec cp {} $CurrentBackup \;

     -             - 
```

你告诉 find 在当前目录中搜索*和* `$CurrentDir`. 去掉点并使用双引号来防止 shell 在`find`看到它们之前扩展名称。

```
find "$CurrentDir" -type f -name "$CurrentFile" -mtime "+$CurrentDay" -exec cp {} "$CurrentBackup" \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:07:13.057

是的，正如 Vaughn Cato 所指出的，您的问题归结为双引号，以防止 bash 进行文件名扩展。执行以下两个命令时，请查看输出差异：

```
echo $CurrentFile
echo "$CurrentFile" 
```

通常，双引号 shell 变量是个好主意。

# android - Android从网页中提取数据

> ID：12709515
> 
> 赞同：0
> 
> 时间：2012-10-03T13:27:26.817
> 
> 标签：android, web-scraping, extract

我在编写代码时遇到了一些困难。

我想使用网页中的数据。例如变量“TEST”。

这些数据将显示在我智能手机上的 textview 中。

这是网页代码：

```
"<meta http-equiv=\"refresh\" content=\"3;url=http://172.30.7.185\">\
<HTML><HEAD></HEAD><BODY>\
<h1>TEST Web Server</h1>\
<a href=/><button type=\"button\">Reload</button></a>\
<script src=/s></script>\
<script>document.write(TEST)</script>\
</BODY></HTML>\
"; 
```

变量“TEST”包含例如“42”。

目前我可以用我的智能手机阅读网页的源代码。但我看不到如何从变量（TEST）中提取值（42）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T08:26:26.427

使用 jsoup ( [http://jsoup.org/](http://jsoup.org/) )。它是一个类似 jQuery 的 Java 解析器，如果你知道 CSS，使用起来非常简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:03:07.943

您基本上试图解析网页本身？

可以使用简单的 java 代码轻松完成。

在此代码中，您试图获取标签之间的文本。您可以使用函数 line.indexOf();

基本上创建一个字符串行；把它放在整个 html 源代码标签中并解析它。

让我知道这是否有帮助。

# windows-services - 无法从 Windows 服务回收 Sitecore CMS 项目

> ID：12709519
> 
> 赞同：1
> 
> 时间：2012-10-03T13:27:43.253
> 
> 标签：windows-services, sitecore, recycle

我正在使用 Windows 服务，它对 Sitecore 项目（非活动或旧产品）进行清理工作，当我试图删除它们时，我不能。

```
if (qItem != null)
{
 qItem.Recycle();
} 
```

相关 StackTrace 是：

```
Message: Object reference not set to an instance of an object.
StackTrace:   at Sitecore.Tasks.ItemEventHandler.OnItemDeleted(Object sender, EventArgs args)
   at Sitecore.Events.Event.EventSubscribers.RaiseEvent(String eventName, Object[] parameters, EventResult result)
   at Sitecore.Events.Event.EventSubscribers.RaiseEvent(String eventName, Object[] parameters)
   at Sitecore.Events.Event.RaiseEvent(String eventName, Object[] parameters)
   at Sitecore.Events.Event.RaiseItemDeleted(Object sender, ItemDeletedEventArgs args)
   at Sitecore.Events.Event.DataEngine_ItemDeleted(Object sender, ExecutedEventArgs`1 e)
   at System.EventHandler`1.Invoke(Object sender, TEventArgs e)
   at Sitecore.Data.Engines.EngineCommand`2.RaiseExecuted()
   at Sitecore.Data.Engines.DataEngine.RaiseDeletedItem(Item item, ID parentId, Boolean result)
   at Sitecore.Data.Archiving.Archive.NotifyItemDeleted(Item item, ID parentId)
   at Sitecore.Data.Archiving.SqlArchive.DoArchiveItems(IEnumerable`1 items, Guid archivalId)
   at Sitecore.Data.Archiving.SqlArchive.DoArchiveItems(IEnumerable`1 items, Guid archivalId)
   at Sitecore.Data.Archiving.SqlArchive.ArchiveItem(Item item)
   at Sitecore.Data.Items.Item.Recycle() 
```

我再次提到，仅当我从 Windows 服务回收项目时才会收到此错误。Web 应用程序中的相同回收工作正常。

在 Web 应用程序中，我登录到 sitecore，用户是管理员，所以他有一些权限。

在 Windows 服务中，用户 (Sitecore.Context.User) 是`"default\Anonymous"`.

为了绕过安全检查，我在 SecurityDisabler 中使用了 Recycle 调用，但没有结果。

我是否需要从我的 Windows 服务登录到 Sitecore？如果是，我该怎么做？

还是有另一种方法可以从非 Web 应用程序中回收/删除 Sitecore 项目？

下面是运行并抛出拒绝访问异常的代码（它不在 SecurityDisabler 上下文中运行）：

![直接回收项目，而不是在安全禁用程序内。](../Images/9c9e4a9cd642ba86e4c4132af430ad6c.png) 这是在 SecurityDisabler 上下文中回收项目的代码。现在没有拒绝访问异常，但是“对象引用未设置为实例”异常。

![在 SecurityDisabler 上下文中回收项目](../Images/68c8af662a7bd91b123834b183ac8117.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:57:55.103

在反射器中`Sitecore.Tasks.ItemEventHandler.OnItemDeleted`查看引发异常的方法 ()，您的 null 引用似乎很可能是 TaskDatabase。

```
protected void OnItemDeleted(object sender, EventArgs args)
{
    Item item = Event.ExtractParameter(args, 0) as Item;
    Error.AssertNotNull(item, "No item in parameters");
    using (new SecurityDisabler())
    {
        Globals.TaskDatabase.RemoveItemTasks(item);
    }
} 
```

我假设对于您的 Windows 服务，您有一个带有精简 Sitecore 配置的 App.config。您应该确保该`/sitecore/configuration/TaskDatabase`元素在您的 Sitecore 配置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:09:37.107

当我们安装 Sitecore 实例时，我们会获得一个 Web 服务，该服务与 Sitecore 应用程序在同一域下公开

[http://sitedomain.com/sitecore/shell/webservice/service.asmx](http://sitedomain.com/sitecore/shell/webservice/service.asmx)

该服务具有使用 Sitecore API 所需的所有方法。

它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-03T19:12:00.310

**对于使用Sitecore APIs**的独立服务，我遇到了非常相似的问题。

我正在使用**BucketManager**来同步一个项目存储桶，它最终调用了与`item.Delete()`Recycle 调用相同的方法，因此我的堆栈跟踪将我带到了相同的位置。

**TaskDatabase**是在我使用的文件中定义的`web.config`，但我决定`Load()`永远不会调用 Globals 上的方法，因此我从未使用 Config 中的任何内容初始化 Task Database 字段。

在我调用删除的对象的构造函数中，我包含了以下行：

```
Sitecore.Globals.Load(); 
```

这解决了我的问题。

# java - 来自服务器的响应代码

> ID：12709524
> 
> 赞同：0
> 
> 时间：2012-10-03T13:27:54.273
> 
> 标签：java

```
public static boolean testConnection() {
    try {
        // TODO add your handling code here:
        System.setProperty("http.proxyHost", "some proxy name");
        System.setProperty("http.proxyPort", "some port");
        URL a = new URL("http://" + Variables.serverName + ":" +           Variables.serverPort      + "/DeviceCloud");
        urlString = a.toExternalForm()+"/";
        System.out.println(urlString);
        System.out.println("http://" + Variables.serverName + ":" + Variables.serverPort + "/DeviceCloud");
        URLConnection conn = a.openConnection();
        int respCode = ((HttpURLConnection) conn).getResponseCode();
        System.out.println(respCode);
        if (respCode >= 500) {
            return false;
        } else {
            return true;
        }
    } catch (Exception ex) {
        return false;
    }
} 
```

如果服务器可达，它工作正常。但是，如果服务器无法访问意味着它需要很长时间。它没有显示任何输出。但实际上服务器机器也在从客户端ping。什么是获得状态的正确解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:33:21.350

您可以使用[setConnectTimeout()](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#setConnectTimeout%28int%29)方法设置超时：

```
try {
    HttpURLConnection httpconn = (HttpURLConnection) a.openConnection();
    httpconn.setConnectTimeout(10000); //10 seconds timeout

    return (httpconn.getResponseCode() == HttpURLConnection.HTTP_OK);
} catch (SocketTimeoutException e) {
    // You can get an output here if it timed out
    return false;
} 
```

# jquery - jQM在关闭对话框或导航回来时，再次触发事件

> ID：12709525
> 
> 赞同：1
> 
> 时间：2012-10-03T13:27:56.520
> 
> 标签：jquery, events, jquery-mobile, triggers

我正在使用 jQuery Mobile 制作移动应用程序。进展顺利，但有一个主要问题我无法解决。

我有几个页面（数据角色=页面）的单个 index.html。因为我传递参数，所以我在我的 javascript 中使用点击事件调用这些页面。这些页面由从 json 文件（基于参数）创建（live pagebeforeshow）的列表视图组成。例如，在类别页面上，您单击某个类别，它的 ID 被传递到下一页，该页面在新列表中显示该类别的子类别。

现在奇怪的是，当我单击后退按钮或关闭对话框时，通常（并非总是）打开该页面或该对话框的单击事件会再次自动触发。例如，您单击列表中的一个项目。点击事件触发一个对话框弹出。您关闭对话框，列表（上一页）被重新加载并立即再次弹出对话框，好像单击事件再次被触发......非常奇怪。

我没有任何线索。

这是我用来告诉浏览器获取 json 并显示我需要的内容的事件示例。

```
$('#dialog_zin_nl').live('pagebeforeshow', function(event, data) { 
```

*这里是这个页面上必须发生的所有代码，比如获取正确的 json 内容并将其附加到 html...

之后（在这个'pagebeforeshow'内）我声明我的按钮点击事件是这样的

```
$("#execute_sub_rubriek").on("click", ".selected_zin_nl", function(event){
                    var selected_zin_nl  = $(this).attr('selected-zin-nl');
                    $.mobile.changePage( "#dialog_zin_nl?current_rubriek=" + current_rubriek_id + "&current_sub_rubriek=" + current_sub_rubriek_id + "&current_zin=" + selected_zin_nl + "", { role: "dialog"} );
                  }); 
```

如果有人遇到过同样的问题或知道出了什么问题。请解释一下。

谢谢！

*编辑*如果我使用 pageinit 我没有这个问题。虽然我不能使用 pageinit，因为当用户选择另一个类别时，必须刷新页面的内容。

我的一个想法：如果页面被后退按钮调用，是否可以调用 pageinit，如果页面被另一个按钮调用，是否可以调用 pagebeforeshow？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:57:10.613

您`on`在事件中添加了一个侦听器，`pagebeforeshow`并且由于`pageshow`在您导航回页面时触发，它将添加**第二个** `on`侦听器，这就是您的代码行为异常的原因。

您需要将您的代码`pageinit`和`pageshow`代码分开，仔细考虑 pageinit 应该只初始化一个页面，每次查看页面时都会调用 pageshow，因此如果您有动态内容，您应该在那里刷新您的 DOM，但将您的`on`侦听器附加到您`pageinit`的发生一次。

这是一个类似问题的链接，它突出了我们如何在 jQM 网站上清理我们的 JS：[https](https://stackoverflow.com/a/9368352/737023) ://stackoverflow.com/a/9368352/737023 - 如果你以这种方式组织它，它会更有意义 - 特别是跟踪什么时候开火，什么时候开火。

# user-interface - 在 Windows 7 中更改复制 UI

> ID：12709529
> 
> 赞同：1
> 
> 时间：2012-10-03T13:28:12.650
> 
> 标签：user-interface, windows-7, copy, windows-shell

我想更改复制或移动文件/文件夹时显示的默认 UI。我查找并找到了 ICopyHook 但它仅验证是否允许操作。我想在操作发生时制作自己的 UI（复制窗口）。

我认为编写一个 shell 扩展可能会奏效，但我不知道如何编写一个，但最重要的是将它挂在哪里？

所以最后的问题是：在哪里挂钩 Windows Shell 来替换文件复制窗口？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:17:47.097

您调用该`IFileOperation::SetProgressDialog`方法为特定的`IFileOperation`. 这仅自定义`IFileOperation`您调用它的对象。不影响其他人的`IFileOperation`。他们可以选择他们希望他们的进步如何出现。

# ios - tableview 的 UX 问题：iOS6 中的 didHighlightRowAtIndexPath

> ID：12709531
> 
> 赞同：1
> 
> 时间：2012-10-03T13:28:18.943
> 
> 标签：ios, uitableview, ios6

在 iOS6 中使用 tableviews 时，我遇到了一些奇怪的行为。我看到他们已经添加了[tableview:didHighlightRowAtIndexPath:](http://conix.dyndns.org/ios_6.0/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3adidHighlightRowAtIndexPath%3a)但它似乎导致了一些用户体验问题，这表明无法选择一行（用户可能需要触摸该行几次）。

当用户只是磨损一个表格视图或轻轻滑动时，行不再被选中（通过`tableview:didSelectRowAtIndexPath:`但`tableview:didHighlightRowAtIndexPath:`被调用）。

有没有人遇到过类似的问题并找到任何解决方法？我正在尝试使用标志，然后`tableview:didSelectRowAtIndexPath`从`tableview:didHighlightRowAtIndexPath`. 或者简单地`tableview:didHighlightRowAtIndexPath`用于 iOS6 和`tableview:didSelectRowAtIndexPath`较低版本作为行选择回调。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:21:31.157

我最终引入了新的方法和标志。这似乎是一个干净的解决方案，适用于 iOS6 和较低版本。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (!_isFromHighlight)
    {
        [self selectRowAtIndexPath:indexPath];
    }
    _isFromHighlight=NO;
}

-(void)tableView:(UITableView *)tableView didHighlightRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self selectRowAtIndexPath:indexPath];
    _isFromHighlight=YES;
} 
```

# c# - 是否可以将批处理写入 C# 编译器？

> ID：12709533
> 
> 赞同：1
> 
> 时间：2012-10-03T13:28:24.823
> 
> 标签：c#, batch-file

有人可以告诉我，是否可以将批处理写入 c# 编译器？
为此需要或推荐什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:31:21.517

是的，您可以使用程序集命名空间和 csharppprovider 命名空间。链接在这里：[MSDN](https://stackoverflow.com/questions/12680576/can-someone-explain-me-the-functionality-of-the-assembly-class-to-me)

# testing - 如何在同一窗口中继续新的测试执行但使用新类？

> ID：12709535
> 
> 赞同：0
> 
> 时间：2012-10-03T13:28:25.367
> 
> 标签：testing, junit, selenium-webdriver

我在 selenium webdriver 中进行了测试，在 Internet Explorer 中使用 junit 运行它。所以我为ie创建了webdriver：

```
System.setProperty("webdriver.ie.driver", "IEDriverServer.exe");
        InternetExplorerDriver driver = new InternetExplorerDriver(); 
```

我需要继续我的测试，但使用另一个类。所有操作都在与第一次测试相同的窗口中执行，因此我不需要创建新的 ie 驱动程序。如何继续执行测试？我尝试在第二次测试中创建新的 webdriver，例如

```
InternetExplorerDriver excep1; 
```

但是在运行第一类测试后，java.lang.NullPointerException 失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:02:53.507

我找到了使用 Singleton 解决问题的合适方法。我只需要创建包含我的实例的新类

```
public class Browser{

    private static InternetExplorerDriver driver;

    private void InternetExplorerDriver(){
    }

    public static InternetExplorerDriver getInstance(){
            if (driver == null){
                driver = new InternetExplorerDriver();
            }
            return driver;
    } 
```

}

并将 Browser.getInstance() 放在我需要驱动程序的每个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T07:38:25.187

您可以在主类中将驱动程序对象设为静态，以便所有其他对象都可以使用相同的实例。

```
public class MainClass {
  public static void main(String[] args) {
    public static InternetExplorerDriver driver = new InternetExplorerDriver();        

    //works as same as above example
    TestCaseClass1 tc1=new TestCaseClass1();
    TestCaseClass2 tc2=new TestCaseClass2();
    tc1.t1ExecutionMethod();
    tc2.t2ExecutionMethod();

  }
} 
```

在您的 TestCase 类（即 TestCaseClass1 、 TestCaseClass2 等）中，按如下方式初始化您的驱动程序，

```
InternetExplorerDriver driver = MainClass.driver; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:34:19.703

您需要创建一个 InternetExplorerDriver，然后将相同的实例传递给两个类。

由于您传递了相同的实例，因此第二个类将从另一个停止的点继续。

例如（我没有运行代码，所以它可能有错误）。

```
public class Main {
  public static void main(String[] args) {
    InternetExplorerDriver driver = new InternetExplorerDriver();
    Class1 class1 = new Class1(driver);
    Class2 class2 = new Class2(driver);
    class1.run();
    class2.run();
  }
} 
```

# java - 使用独立部署 jar 的 PersistenceUnit

> ID：12709537
> 
> 赞同：0
> 
> 时间：2012-10-03T13:28:28.600
> 
> 标签：java, jpa, deployment, jboss, java-ee-6

> **可能重复：**
> [在 .ear 文件中的组件之间共享持久性单元](https://stackoverflow.com/questions/4073635/sharing-a-persistence-unit-across-components-in-a-ear-file)

我有一个包含 JPA 实体和 persistence.xml 文件的项目。我将它们打包成一个 jar 文件并部署到一个应用服务器（JBoss 7.1）。

我有另一个项目，一个 Web 应用程序，它有一个会话 bean，我想在那里使用这个持久性单元（通过注入）。

但是我得到一个例外：

```
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011047: Component class com.mypackage.MyService for component MyService has errors: 
JBAS011440: Can't find a persistence unit named my_pu in deployment "mywebapp.war" 
```

我试图在战争的 manifest.mf 中添加 PU 的 jar 作为依赖项，但没有任何成功。

你知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:08:47.393

一种选择是使用 JBoss 模块，但我们没有直接的方法来实现 JPA。请参阅 JBoss 社区中的[问题](https://issues.jboss.org/browse/AS7-1769)。另一种选择是使用 OSGI 来实现这一点。

# standards - SMBIOS 中的披萨盒和午餐盒

> ID：12709541
> 
> 赞同：2
> 
> 时间：2012-10-03T13:28:34.603
> 
> 标签：standards, bios

[SMBIOS 规范](http://dmtf.org/sites/default/files/standards/documents/DSP0134_2.7.1.pdf)将披萨盒 (05h) 和午餐盒 (10h) 列为系统机箱或机箱类型的含义。其他的东西是有道理的，但这些没有。真的有与这些类型相对应的机箱类型吗？如果是这样，有人可以为他们指出例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:03:58.797

[比萨盒外形](http://en.wikipedia.org/wiki/Pizza_box_form_factor "比萨盒外形")或[午餐盒](http://en.wikipedia.org/wiki/Small_form_factor#Lunch_Box)外形是计算机或网络交换机的一种外壳。这种类型的箱子往往又宽又平，通常是一个或两个机架单元（1U 或 2U、1¾ 或 3½ 英寸、4.4 或 8.9 厘米）高，因此类似于披萨外卖箱。

# php - 为什么迭代 ArrayIterator 以无限循环结束？

> ID：12709548
> 
> 赞同：3
> 
> 时间：2012-10-03T13:28:52.247
> 
> 标签：php, infinite-loop, arrayiterator

我的代码中的数组很大，所以我将它粘贴到 pastebin 中。[http://pastebin.com/6tviT2Xj](http://pastebin.com/6tviT2Xj)

我不明白为什么我会陷入无限循环

这个脚本的逻辑是：

```
$it = new ArrayIterator($options);
while($it->valid()) {
    print $it->key();
    print $it->current();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T13:31:57.737

因为您永远不会在迭代器中移动（[使用 ArrayIterator::next()](http://www.php.net/manual/en/arrayiterator.next.php)）。

```
while ($it->valid()) {
    ...
    $it->next();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T13:32:05.697

你应该使用 `$it->next();`，否则你将永远在同一个键上循环

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T13:33:46.780

您正在迭代当前元素，您需要`$it->next();`指向/转到下一个元素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T13:33:10.223

主要问题不是`$it->next();`在你的使用中，但仍然有很多没有给你想要的输出，因为如果你运行`print $it->current();`它只会返回`Array`，因为你不能输出数组信息`print`。

你应该使用`RecursiveArrayIterator`and`RecursiveIteratorIterator`因为你正在处理多维数组

要获取所有值，请尝试：

```
$it = new RecursiveIteratorIterator(new RecursiveArrayIterator($options));
foreach ( $it as $key => $val ) {
    echo $key . ":" . $val . "\n";
} 
```

查看完整演示：[http ://codepad.viper-7.com/UqF18q](http://codepad.viper-7.com/UqF18q)

# java - 使用 Java 进行语音采样

> ID：12709549
> 
> 赞同：2
> 
> 时间：2012-10-03T13:28:52.933
> 
> 标签：java, voice-recognition, sampling

我正在尝试开发一个应用程序来记录语音并相应地绘制图表。

以下是我期待的输出。

当用户 1 录制声音说“你好”时，系统应该生成一个图说“图 A”。现在，当 User2 录制与“Hello”相同的声音时，系统应该生成“Graph B”，即（Graph A != Graph B）。现在 User1 再次录制与“Hello”相同的声音，系统应该生成相同的图形“Graph A”。

我为此使用了 java 采样算法，但是第二次录制的声音总是比以前录制的有所不同（可能是因为背景噪音、语音的自然变化或其他因素）。

我的问题是 1\. 它真的可行吗？2\. 有没有JAVA内置的库来实现输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:36:03.020

我在玩一些简单的声音压缩/识别库，我遇到了这个

[http://code.google.com/p/musicg-sound-api/downloads/list](http://code.google.com/p/musicg-sound-api/downloads/list)

您可以将声音录制为 wav 格式，然后比较两个（或多个）wav 文件以获得相似度（%）

# textbox - 如何使用 libgdx 创建自定义文本框？

> ID：12709560
> 
> 赞同：0
> 
> 时间：2012-10-03T13:29:37.287
> 
> 标签：textbox, libgdx

我正在尝试在我的应用程序中使用libgdx在从触摸中获取的特定位置创建背景透明且浅色的气泡/云/框（如漫画中所写的文本）的文本框用户（有点像 Facebook 标签或用户可见的诺基亚 Lumia 城市镜头标签，但它应该具有与黑色背景不同的 textBox 透明背景）。有没有办法在 libgdx 中实现这种文本框？还是可以通过创建我自己的 skin.json 来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:05:29.600

您正在寻找的类是[TextButton](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/ui/TextButton.html)，它可以让您应用自己的背景和文本。

你应该创建自己的透明背景（最好是 9 补丁）和字体（字体是可选的，你可以使用 libgdx 的默认值，也许对你来说就足够了）

获得资源后，您就可以创建自定义 TextButton。本[教程](http://code.google.com/p/libgdx/wiki/GraphicsSkin)将帮助您继续学习，它包含您需要的所有信息。

# charts - 使用 amCharts 对齐中心图

> ID：12709565
> 
> 赞同：0
> 
> 时间：2012-10-03T13:29:42.980
> 
> 标签：charts, amcharts

![在此处输入图像描述](../Images/31385c52aaad03f914a286d03ccb2dcb.png)

我有这个由引擎 amCharts 构建的图表，我有 3 个类型字段和 3 个图表

*   黄色
*   绿色
*   蓝色的

    ```
     var graph1 = new AmCharts.AmGraph();
     graph1.type = "column";
     graph1.valueField = "yellow";
     chart.addGraph(graph1);

     var graph2 = new AmCharts.AmGraph();
     graph2.type = "column";
     graph2.valueField = "yellow";
     chart.addGraph(graph2);

     var graph3 = new AmCharts.AmGraph();
     graph3.type = "column";
     graph3.valueField = "yellow";
     chart.addGraph(graph3); 
    ```

如您所见，我没有 3 月和 5 月的黄色数据，也没有 5 月的绿色数据。

我希望每个月的列都像下一个一样对齐中心

![在此处输入图像描述](../Images/9068679c94bf1302122d7ccf61b50fc9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-01T14:39:33.807

您可以像这样更改 css 文件中的 x 值 .amcharts-graph-column-element { x: 0.3 }

# mysql - 从 MySQL 表中提取统计信息的问题

> ID：12709573
> 
> 赞同：0
> 
> 时间：2012-10-03T13:30:21.483
> 
> 标签：mysql, database

我在为会议创建一些统计数据时遇到问题，其中所有访客每次进入和离开大楼时都会被扫描。我使用了 mySQL，'stats' 表如下所示：

```
id(int) | accesscode(text) | in(datetime) | out(datetime) 
```

并在同一张表中包含来自 3 个不同日期的统计信息。我想得到这样的统计数据：

```
accesscode(text) first_entry(datetime) last_exit(datetime) no_of_exits(int) time_in day(int ex:1,2,3) 
```

这将为按天定义的每个访问代码生成三个条目。

我尝试了几次，但实际上我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:01:13.997

```
 SELECT accesscode,
        MIN(`in`) as first_in,
        MAX(`out`) as last_out,
        count(*) as exit_count,
        sum(UNIX_TIMESTAMP(`out`) - UNIX_TIMESTAMP(`in`)) as seconds_attended
 FROM my_table
 GROUP BY accesscode 
```

# oracle - 闰年的months_between

> ID：12709577
> 
> 赞同：1
> 
> 时间：2012-10-03T13:30:35.917
> 
> 标签：oracle, date-arithmetic

当我找到 28-FEB-11 和 29-FEB-12 之间的月份时，oracle 中的months_between 函数返回12。实际上它应该是12.096。此函数不适用于闰年。

在 28-FEB-11 和 29-FEB-12 之间，为 1 年（12 个月）零 1 天。

```
 select months_between('28-FEB-12', '28-FEB-11') from dual; -- 12
      **select months_between('29-FEB-12', '28-FEB-11') from dual; -- 12**
      select months_between('28-FEB-12', '27-FEB-11') from dual; -- 12.0322
      select months_between('27-FEB-12', '28-FEB-11') from dual; -- 11.9677 
```

这是甲骨文的错误吗？？？

-维什瓦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:34:01.407

从[Oracle 文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions102.htm#i78039)：

> MONTHS_BETWEEN 返回日期 date1 和 date2 之间的月数。如果 date1 晚于 date2，则结果为正。如果 date1 早于 date2，则结果是否定的。如果 date1 和 date2 是一个月中的同一天或两个月的最后一天，则结果始终为整数。否则，Oracle 数据库会根据 31 天的月份计算结果的小数部分，并考虑时间组件 date1 和 date2 的差异。

因此，它遵循记录在案的行为。这不是你所期望的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T18:05:30.053

这不是一个错误，因为 ORACLE 这么说，这是一个由人驱动的逻辑错误（并且记录为正确的东西），这更糟。

如果一月和二月的最后几天之间的差异正好是 1 个月（29 天），那怎么办？请看下面：

```
MONTHS_BETWEEN('29-FEB-12','31-JAN-12')
1 
```

多出一天（30 天），月差小于 1。请参见下文：

```
MONTHS_BETWEEN('29-FEB-12','30-JAN-12')
.967741935 
```

错误的。这一点都不对！

另一方面，SQL Server 可以正确处理此问题：

```
select DATEDIFF(MM,'29-FEB-12','30-JAN-12')
select DATEDIFF(MM,'29-FEB-12','31-JAN-12') 
```

两者都是 1

# javascript - javascript 的 Date() 方法在传递时间戳时会在结果中添加一天

> ID：12709580
> 
> 赞同：0
> 
> 时间：2012-10-03T13:30:45.780
> 
> 标签：javascript, date, datetime-format

我正在尝试从我拥有的时间戳中获取日期（类似于格式 : `2012-08-31T18:30:00`，来自日期选择器）

```
 var value = "2012-08-31T18:30:00";

   var date = new Date(value); 
```

这个（日期）的结果是：`Sat Sep 01 2012 00:00:00 GMT+0530 (India Standard Time)`

这里`Date()`的功能是在给定日期上添加一天。我已经尝试过不同的输入，但总是在添加一天后得到结果。我也尝试过谷歌搜索并搜索堆栈溢出，但无法得到有效答案。谁能告诉我为什么会这样以及如何解决这个问题？

谢谢，里斯万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:37:59.973

这是您当地的时区，它正在贬低价值。[您可以在此处](http://www.timeanddate.com/time/aboututc.html)找到有关 UTC的更多信息。

> 返回的值[`toUTCString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toUTCString)是 UTC 时区的美式英语可读字符串。返回值的格式可能因平台而异。最常见的返回值是 RFC-1123 格式的日期戳，它是 RFC-822 日期戳的略微更新版本。

```
var value = "2012-08-31T18:30:00";
var date = new Date(value);
date = date.toUTCString() 
```

**[例子](http://jsfiddle.net/LHvf4/)**

**编辑**：

我可以从您发布的评论中收集到的信息，您可能正在寻找更像**[这个示例](http://jsfiddle.net/LHvf4/2/)**的内容：

```
var value = "2012-08-31T18:30:00"; //string value
var dateTime = value.split("T"); //split on T

var date = dateTime[0]; 
date = new Date(date); //set the date

var time = dateTime[1];
time = time.split(":"); //get the time into an array

//use set hours to set the time to 18:30:00:00 (hh:mm:ss:mm)
date.setHours(time[0], time[1], time[2], 0)

console.log(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:35:05.603

“2012-08-31T18:30:00”指的是格林威治标准时间 (GMT) / UTC。

```
"2012-08-31T18:30:00" + India (UTC+5:30) = Sat Sep 01 2012 00:00:00 GMT+0530 (India Standard Time) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:35:58.717

因为时间戳的值是GMT，并且`Date()`返回本地时间戳。

用于`date.toGMTString()`将其保持为 GMT 格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T13:36:52.250

`Sat Sep 01 2012 00:00:00 GMT+0530` 格林威治标准时间 + **5h30**

它实际上是`2012-08-31T18:30:00`加上**5h30**

# javascript - 如何在点击时替换图像，淘汰赛？

> ID：12709584
> 
> 赞同：3
> 
> 时间：2012-10-03T13:30:52.313
> 
> 标签：javascript, jquery, knockout.js

如果有人可以提供帮助，我会很高兴=）我希望我的图像在我点击它时改变

.html 文件：

```
<a href="#" data-bind="click: $root.markCompleted"><img class = "check" src = 'bee-icon-gray.jpg' width = '25px' height = '23px'/></a> 
```

.js 文件

```
 function AppViewModel() {
            var self = this;
            self.tasks = ko.observableArray([]);

      self.markCompleted = function(task) {
                task.status('completed');
                }
} 
```

所以我想在我点击它时替换`bee-icon-gray.jpg`图像，`bee-icon-colored.jpg`如果我每次点击时都可以切换图像，那将是完美的！我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-13T06:52:17.013

在一个普通的网页中，确实使用 jquery 选择器是最好的，但是因为您正在构建一个带有淘汰赛的 SPA，所以在您的视图模型中混合 jquery 选择是一个禁忌。

所以，结束响应：

```
<a href="#" data-bind="click: $root.markCompleted"><img class = "check" data-bind='attr: {src: imageSrc}' width = '25px' height = '23px'/></a> 
```

在您的视图模型中：

```
function AppViewModel() {
    var self = this;
    self.imageSrc = 'initialImage';
    self.tasks = ko.observableArray([]);
    self.markCompleted = function(task) {
        task.status('completed');
        self.imageSrc('newImage');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:34:51.843

试试下面的代码，它可能会帮助你。

```
 $('.check').click(function(){
      $(this).attr('src','newimagesrc');
    }); 
```

# wordpress - 如何防止抓取我博客的更新？

> ID：12709585
> 
> 赞同：3
> 
> 时间：2012-10-03T13:31:10.160
> 
> 标签：wordpress, web-scraping, clone

我有一个自托管的 wordpress 博客，正如几乎预期的那样，我发现有另一个博客在抓取我的内容，发布了我自己帖子的完美副本（文本、图像不是热链接但被提取并重新上传到克隆的服务器、html 布局内帖子）有几个小时的延迟。

但是我必须承认，当我在谷歌搜索与我的帖子相关的关键字时，我很生气，抓取克隆总是排在第一位。

所以，我在这里，欢迎建议，你知道如何防止我的网站被成功抓取吗？

技术精度：

*   克隆博客似乎是自托管的，我也是，我在 debian+webmin+virtualmin dedi
*   我的 RSS 提要已经被“阅读更多”中途切断了。嘿，我只是想我应该发布一个帖子，同时给它分配一个日期，比如 2001-01-01，看看它是否出现在克隆博客上，这样可以知道我的 RSS 是否仍然被用作“嘿，现在是刮痧时间！”
*   我的日志在合法流量中找不到刮板，要么无法识别，要么在合法流量的洪流中丢失
*   我已经 htaccess-banned 和 iptables-banned 克隆的 .com 域，但我的内容仍然被克隆
*   克隆网站使用反向代理，所以我无法追踪它的托管位置以及应该阻止哪些实际 IP（好吧，除非我 iptables-ignore-ban 一半欧洲禁止其数据存储设施的整个 IP 范围，但我有点不情愿！）
*   我相信这不是手工制作的，克隆已经运行了两年，每天都没有失败
*   只有我的新帖子被克隆，而不是我网站的其余部分（不是侧边栏，不是 wordpress 页面，而不是 wordpress 帖子，不是单个页面），所以设置一个 jail.html 来记录谁打开它页面不会工作，没有蜜罐
*   当我的帖子包含指向我网站另一个页面的内部链接时，克隆上的帖子不会被重写，仍然会指向我自己的网站

我很乐意为这个问题提供帮助和建议。没有被克隆，而是在我是原始发布者时失去了该机器人的流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T18:40:19.420

尽管这是一个有点旧的帖子，但我认为如果其他人看到帖子并有同样的问题，我仍然会有所帮助。既然您已经从混合中消除了 RSS 提要，并且您非常确信这不是手动操作，那么您需要更好地阻止他们正在使用的机器人。

首先，我建议在您的 IPTables 中禁止代理服务器。您可以从[Maxmind](http://www.maxmind.com)获取已知代理服务器地址的列表。这应该会限制他们匿名化自己的能力。

其次，让他们更难刮会很好。您可以通过以下几种方式之一完成此操作。您可以在 javascript 中渲染部分或全部网站。如果不出意外，您至少可以在 javascript 中呈现链接。这将使他们更难刮你。或者，您可以将内容放在页面内的 iframe 中。这也将使爬行和刮擦变得更加困难。

综上所述，如果他们真的想要您的内容，他们将很容易通过这些陷阱。老实说，与网络爬虫作斗争是一场军备竞赛。你不能设置任何静态陷阱来阻止他们，相反，你必须不断发展你的战术。

为了充分披露，我是[Distil Networks](http://www.distilnetworks.com)的联合创始人，我们提供反抓取解决方案即服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:56:12.630

你最终无法真正阻止它们，但你也许能够找到它们并惹恼它们。尝试将请求 IP 隐藏在 HTML 注释或白底白字文本中，或者就在某个不碍事的地方，然后查看副本上显示的 IP。如果需要，您还可以尝试通过将文本转换为十六进制字符串或其他内容来混淆该文本，这样对于不知道或使其看起来像错误代码的人来说不太明显，这样他们就不会明白什么你正在做的。

不过，最后，我不确定它会为你买多少。如果他们真的不专心，与其关闭它们并提醒人们注意你关注它们的事实，你可以在他们的一个 IP 出现时喂他们胡言乱语或其他任何东西。这可能很有趣，并且通过将示例文本放入马尔可夫链来制作一个乱码生成器并不难。

编辑：哦，如果页面没有重写太多，你也许可以添加一些内联 JS 以使它们链接到你，如果它们不剥离的话。比如说，一个横幅只在他们不在您的网站时才会显示，提供指向您文章的原始链接并建议人们阅读该链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T19:17:52.913

您愿意关闭您的 RSS Feed 吗？如果是这样，你可以做类似的事情

```
function fb_disable_feed() {
wp_die( __('No feed available,please visit our <a href="'. get_bloginfo('url') .'">homepage</a>!') );
}
add_action('do_feed', 'fb_disable_feed', 1);
add_action('do_feed_rdf', 'fb_disable_feed', 1);
add_action('do_feed_rss', 'fb_disable_feed', 1);
add_action('do_feed_rss2', 'fb_disable_feed', 1);
add_action('do_feed_atom', 'fb_disable_feed', 1); 
```

这意味着如果您转到提要页面，它只会`wp_die()`在第二行返回消息。我们将它用于带有 if 语句的 WP 软件的“免费”版本，因此他们无法连接到他们的 RSS 提要以链接到他们的主要网站，这对我们来说是一个追加销售的机会，它运作良好是我的观点，哈哈。

# android - 键盘覆盖的edittext打字内的Listview

> ID：12709589
> 
> 赞同：0
> 
> 时间：2012-10-03T13:31:25.430
> 
> 标签：android, android-layout

列表视图内容有编辑文本和文本视图。在键入列表视图编辑文本的底部时动态加载列表视图内容，未显示填充的编辑文本。虚拟键盘覆盖编辑文本。

我也在活动中使用了这段代码：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS); 
```

我在清单文件中使用了adjustpan，resize，statevisible，但没有任何改变。但它会在4.0以下完美运行。

customlist.xml 为

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"   android:layout_weight="1" 
    android:layout_height="match_parent" >

    <View
        android:id="@+id/view"
        android:layout_width="2dp"
        android:layout_height="fill_parent"
        android:layout_centerInParent="true"
        android:background="@android:color/transparent" />

    <EditText 
        android:id="@+id/textView21"
        android:layout_width="341dp"
        android:layout_height="60dp"
         android:layout_alignParentBottom="true"
        android:layout_weight="1" 
        android:layout_centerVertical="true"
        android:layout_marginRight="20dp"
        android:layout_toRightOf="@+id/view"
        android:background="@drawable/txt1"
        android:hint="Enter Value"
        android:layout_marginBottom="8dp"  
        android:layout_marginTop="8dp"  android:imeOptions="flagNoExtractUi"
        android:focusable="true" 
        android:paddingLeft="10dp" android:paddingRight="5dp"
        android:paddingTop="5dp"  android:singleLine="true"
        android:paddingBottom="5dp"
        android:textSize="25dp"
        android:textColor="@color/app_text_color"
         />

    <TextView
        android:id="@+id/textView1" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="20dp"
        android:layout_toLeftOf="@+id/view"
        android:paddingBottom="5dp"
        android:paddingLeft="10dp"
        android:paddingTop="5dp"   android:textSize="25dp"
        android:text="Large ryw4rtb "
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/app_text_color"
       />

</RelativeLayout> 
```

和 main.xml 作为

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_marginBottom="5dp" android:id="@+id/sceen"
    android:background="@drawable/full_bg"
    android:orientation="vertical" >

    <include
        android:id="@+id/titleLayout"
        layout="@layout/title" />

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/left"
            android:layout_width="326dp"
            android:layout_height="fill_parent"
            android:background="@drawable/left_bg" >

            <ListView 
                android:id="@+id/list"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:layout_marginTop="20dp"
                android:background="@drawable/left_table_bg"
                android:cacheColorHint="#00000000"
                android:transcriptMode="alwaysScroll"
                android:layout_weight="1"
                android:divider="@drawable/left_table_line"
                android:paddingLeft="5dp"
                android:paddingRight="5dp" >
            </ListView>
        </LinearLayout>

        <RelativeLayout
            android:id="@+id/lay_healthy"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginBottom="5dp"
            android:background="@drawable/right_side_bg" >
 <RelativeLayout
            android:id="@+id/lay_healthy1"   android:layout_above="@+id/btn"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
             >

            <ListView
                android:id="@+id/listView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"

                android:layout_weight="1" 
                android:layout_alignParentTop="true"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/available_right_bg"
                android:cacheColorHint="#00000000"
                android:padding="20dp" />

             <ListView
                android:id="@+id/listView2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"

                android:layout_alignParentTop="true"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/available_right_bg"
                android:cacheColorHint="#00000000"
                android:padding="20dp"
                android:visibility="gone" />

             <ListView
                android:id="@+id/listView3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"

                android:layout_alignParentTop="true"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/available_right_bg"
                android:cacheColorHint="#00000000"
                android:padding="20dp"
                android:visibility="gone" />
           </RelativeLayout> 

        <RelativeLayout
                android:id="@+id/btn" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_above="@+id/btn1" 
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="20dp"
                android:layout_marginTop="10dp" >

                <Button 
                    android:id="@+id/button1"
                    android:layout_width="200dp"
                    android:layout_height="57dp"
                    android:layout_alignParentLeft="true"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="160dp"
                    android:background="@drawable/bt_submit" />

                <Button
                    android:id="@+id/button2"
                    android:layout_width="200dp"
                    android:layout_height="57dp"
                    android:layout_alignParentRight="true"
                    android:layout_marginBottom="10dp"
                    android:layout_marginRight="160dp"
                    android:background="@drawable/bt_reset" />
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/btn1"
                android:layout_width="fill_parent"
                android:layout_height="20dp"
                android:layout_alignParentBottom="true" >
            </RelativeLayout>
              </RelativeLayout>
    </LinearLayout>

</LinearLayout> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:56:05.543

除了`EditText`你正在填写的，你肯定会有其他的视图，比如 a `Header`or `Button`etc..，

所以，

**跟踪软键盘是否打开并使这些视图可见性消失并在软键盘被解除/隐藏时使它们可见**

没有直接的方法来跟踪显示/隐藏的软键盘，因此使用我在我的应用程序中使用的这段代码：

```
//your_button is the layout of your button view or a header view. if its just a view cast it to

//appropriate Class
final LinearLayout your_button = (LinearLayout) findViewById(R.id.your_button);
//activityRootView is the Layout you are using for the Activity
final View activityRootView = findViewById(R.id.layout_parent);
activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
public void onGlobalLayout() {
    int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight();
    if (heightDiff > 100) { // if more than 100 pixels, its probably a keyboard...

    your_button.setVisibility(Visibility.GONE);
    }else{

    your_button.setVisibility(Visibility.VISIBLE);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:54:35.327

尝试在声明活动的清单中添加它。

```
 <activity android:name=".YourActivity"
     android:windowSoftInputMode="stateHidden"/> 
```

# android - Android - 你能优化你的视图，这样它们就不会通过 performTraversals 来制作一些视图吗？

> ID：12709590
> 
> 赞同：1
> 
> 时间：2012-10-03T13:31:26.767
> 
> 标签：android, view

例如，当您将某些视图设置为 GONE 时，Android 会检查您的所有视图，试图确定它是否应该调整大小/移动或其他。

我想在某项活动中获得很多观点（我有我的理由，我知道这很糟糕；）），并且我希望它们彼此分离。有没有办法做到这一点？否则，您会制作一些小的、不相关的视图 GONE，并且应用程序会因为进行不必要的执行遍历而滞后。

有没有办法优化视图的架构以确保这一点？

在此先感谢，丹

# javascript - 使用 jquery.ui.sortable 更新列表

> ID：12709594
> 
> 赞同：0
> 
> 时间：2012-10-03T13:31:35.893
> 
> 标签：javascript, jquery, jquery-ui, sorting

我有一个编号的列表。
在对项目进行排序时，我需要更新一个与列表中的位置相对应的数字。

这是我的代码：

```
$(".sortable").sortable({
    stop: function(event, ui) {
        var prevPos = ui.item.find('.position').text();
        var newPos  = ui.item.index() + 1
        ui.item.find('.position').text(newPos);
        console.log(prevPos);
    }
}); 
```

我的问题是我应该如何更新其他项目？
例如，当我将罗伯特从 3dt 移到 1st 时？

你可以在这个链接看到演示：http: [//jsfiddle.net/UAcC7/106/](http://jsfiddle.net/UAcC7/106/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:34:55.213

像这样的东西怎么样：

```
$(".sortable").sortable({
    stop: function(event, ui) {
        $('.sortable li').each(function(i) {
            $(this).find('span').text(++i);
        });
    }
}); 
```

您每次都会更新所有项目，即使是理论上不需要的项目。但是，我认为无论如何它会更快，因为您不需要遍历 DOM 并进行索引计算等。

[http://jsfiddle.net/UAcC7/107/](http://jsfiddle.net/UAcC7/107/)

# struts2 - 使用struts2迭代器或初始化arraylist

> ID：12709596
> 
> 赞同：1
> 
> 时间：2012-10-03T13:31:39.783
> 
> 标签：struts2

我有一个清单。用户可以添加 n 个项目编号和描述。

他将首先添加，然后添加第二个将按添加更多按钮。

我正在调用将数据存储在数组中的操作类并重定向回页面以获取下一条记录。

当我使用迭代器时，文本框会再次添加。

如果我不使用迭代器，我的数组列表每次访问动作类时都会被初始化。

我不能让它成为静态的。如果有人可以帮助我不每次都初始化数组列表或使用迭代器而不重复文本字段，这将很有帮助。

```
<table>
  <tr align="center">
    <s:iterator value="preAdviceDetailsDO" id="preAdviceDetailsDO" status="outerStat">
      <s:if test="#outerStat.may be some useful word like even odd first == true">
        <td style="background: #CCCCCC">
          <s:textfield value="%{itemNumber}" name="preAdviceDetailsDO[%{#outerStat.index}].itemNumber" onblur="checkBarcode();"/>
        </td>

        <td style="background: #CCCCCC">
          <s:textfield value="%{itemDescription}" name="preAdviceDetailsDO[%{#outerStat.index}].itemDescription"/>
        </td>
      </s:if>
    </s:iterator>
  </tr>     
</table>
<input type="button" value="Add More" onclick="addRow()" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:11:49.153

感谢戴夫牛顿编辑。MohanaRao SV，我发现它的解决方案实际上是一个调整。我在上面的代码中面临的问题是：

当用户第一次看到表单时，他会看到两个文本字段。他将输入详细信息并添加另一条记录他将按下添加按钮。这次增加了arraylist。所以表单上的文本字段将增加到四个。这是两个较早的一个和新的两个文本字段。依此类推......

所以现在我所做的是在 if 条件下我正在检查索引是否是最后一个然后我正在显示字段，在其他部分我正在编写相同的代码来添加文本字段，但我已经设置了 css 属性 display:none。

如果我不写 else 部分，arraylist 会正确递增，但不会保留 arraylist 中的详细信息。

所以现在只显示所需的文本字段。

# android - 如何知道用户是否在没有字段侦听器的情况下进行了输入？

> ID：12709597
> 
> 赞同：0
> 
> 时间：2012-10-03T13:31:39.207
> 
> 标签：android, android-edittext

我有一个 20 的活动`EditTexts`。如果输入了任何内容，我想显示一条消息。有没有办法知道是否提供了输入（数据已更改），而不是为每个字段附加 20 个侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:45:55.870

这是一个基类的示例，它负责通知子类是否`EditText`正在使用它们的任何小部件（如果存在）。根据您在用户输入内容时要执行的操作，您可能需要更改我的示例以适合您的特定情况。

您将继承的基本活动：

```
public abstract class BaseTextWatcherActivity extends Activity {

    private TextWatcher mInputObserver = new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            onInputChange(s.toString());
        }
    };
    private boolean mOptimize = false; 

    @Override
    public void setContentView(int layoutResID) {
        View content = getLayoutInflater().inflate(layoutResID, null);
        initInputsObservers((ViewGroup) content);
        mOptimize = true;
        super.setContentView(content);
    }

    @Override
    public void setContentView(View view) {
        if (view instanceof EditText) {
            ((EditText) view).addTextChangedListener(mInputObserver);
        } else if (view instanceof ViewGroup && !mOptimize) {
            initInputsObservers((ViewGroup) view);
            mOptimize = false;
        }
        super.setContentView(view);
    }

    /**
     * Implement this method to allow your activities to get notified when one
     * of their {@link EditText} widgets receives input from the user.
     * 
     * @param s the string that was entered by the user in one of the EditTexts.
     */
    public abstract void onInputChange(String s);

    /**
     * This will recursively go through the entire content view and add a
     * {@link TextWatcher} to every EditText widget found.
     * 
     * @param root
     *            the content view
     */
    private void initInputsObservers(ViewGroup root) {
        final int count = root.getChildCount();
        for (int i = 0; i < count; i++) {
            final View child = root.getChildAt(i);
            if (child instanceof EditText) {
                ((EditText) child).addTextChangedListener(mInputObserver);
            } else if (child instanceof ViewGroup) {
                initInputsObservers((ViewGroup) child);
            }
        }
    }

} 
```

然后，您在活动中所要做的就是实现`onInputchange`回调，让您知道用户`EditTexts`在当前布局之一中输入了某些内容。您可能希望查看活动类中的关键事件回调以获得更简单的内容，但如果我没记错的话，这些事件是由`TextView`/`EditText`小部件消耗的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:59:22.660

让您的 TextViews 都调用[addTextChangedListener()](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)给他们您的 Activity 作为参数（this）。让您的 Activity 实现[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)并覆盖 afterTextChanged()。每当其中一个 TextView 更改时，将调用 afterTextChanged()。这是您的代码应该是什么样子的想法

```
public class YouActivity extends Activity implements TextWatcher{

@Override
public void onCreate(Bundle savedInstanceState)
{
 [...]

 textView1.addTextChangedListener(this);
 textView2.addTextChangedListener(this);
 [...]
}

@Override
public void afterTextChanged (Editable s)
{
  //do something
}

} 
```

# android - MAT (Eclipse Memory Analyzer) - how to view bitmaps from memory dump

> ID：12709603
> 
> 赞同：48
> 
> 时间：2012-10-03T13:32:08.563
> 
> 标签：android, bitmap, memory-dump, hprof, eclipse-memory-analyzer

I'm analyzing memory usage of my Android app with help of [Eclipse Memory Analyzer](http://www.eclipse.org/mat/) (also known as MAT). Sometimes I can find strange instances of `android.graphics.Bitmap` class, utilizing big portion of heap. Problem is what I can't find source of this bitmaps, no *filename*, no *resourceID*, nothing. All information what I can find for bitmap is following: ![bitmap_info](../Images/56e3cfbc8bbd26d537b4ad3e578dbf1b.png)

There is a field `mBuffer` with array of image pixels, I assume. But it's in some internal Android format, not PNG.

**Question**: how can I view image represented by this bitmap from memory dump?

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-10-03T13:32:08.563

I have found a way to view such bitmaps:

*   First, you need to download and install [GIMP](http://www.gimp.org/downloads/)
*   Next, find your `Bitmap` object in MAT, right-click on `mBuffer` field, in the popup menu choose *"Copy"* -> *"Save Value To File"* menu item and save value of this array to some file
*   give extension `.data` to that file
*   launch GIMP, choose *"File"* -> *"Open"*, select your `.data` file and click *Open* button
*   *"Load Image from Raw Data"* dialog will appear. Here you need to set correct parameters for your bitmap
*   first, choose *"Image type"* as *"RGB Alpha"* (most Android resources have this image type, but you may need to experiment with other image types)
*   second, set correct *Width* and *Height* for your bitmap (correct dimensions can be found in the memory dump)

At that point you should already observe preview of original image. If you didn't, you can try to change some other parameters in *"Load Image from Raw Data"* dialog.

NOTE: to get a width and height of image you can look at `mWidth` and `mHeight` fields in MAT in attributes section as shown in image in question.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-09T07:08:04.783

You can convert memory dumps from MAT to png using with [ImageMagick](http://www.imagemagick.org/script/index.php) on command line.

In `MAT` for related `Bitmap` object right click `mBuffer` field and select "Copy" -> "Save Value To File", name the file with an `.rgba` extension.

You need to note bitmap width and height from `mWidth` and `mHeight` fields, which you can see in Bitmap object.

Having `ImageMagick` command line tools installed (for Ubuntu `apt-get install imagemagick`), you issue `convert` command with the following parameters.

```
convert -size 'width'x'height' -depth 8 filename.rgba filename.png 
```

For example

```
 convert -size 680x1209 -depth 8 phone_decor.rgba phone_decor.png 
```

You can check generated png file via [eog](http://en.wikipedia.org/wiki/Eye_of_GNOME), like `eog phone_decor.rgba` on `Ubuntu` easily.

# wpf - 数据库的构建动作

> ID：12709605
> 
> 赞同：1
> 
> 时间：2012-10-03T13:32:15.993
> 
> 标签：wpf, database, build-process

我有一个 WPF 应用程序。我的问题是在我的情况下，数据库的构建操作应该是什么。我有一个数据库，但是每次构建解决方案时，都会删除数据库条目并创建一个新数据库。我应该为我的数据库保留什么构建操作来克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:16:56.713

您如何删除所有数据库数据？那么你的数据会发生什么？在实时系统中可能吗？

为了克服这个问题，您应该将您的数据库更改作为数据库脚本来跟踪。这意味着通过任何数据库更改，您应该将其相关脚本保留在源代码管理中的某个位置。脚本应该是可追踪的。这意味着如果您想从版本 A 迁移到版本 D，您应该知道应该为 DB 迁移执行哪些脚本。

这是我们在项目中使用的解决方案。

1.  每个开发人员都在源代码控制中保留一个脚本，用于任何数据库更改。
2.  脚本编号为 SVN 修订号，例如 2835.sql。
3.  在构建应用程序时，所有脚本都会复制到应用程序安装程序。但是，通过比较当前安装的版本和新版本，安装程序知道应该执行哪些脚本。
4.  使用这种方式，迁移变得容易。

# java - 如何在两个文档之间匹配一个单词或 2,3,4,5-连续单词？

> ID：12709607
> 
> 赞同：0
> 
> 时间：2012-10-03T13:32:15.120
> 
> 标签：java, text, matching

我有两个文本文档，想要获得两个文档之间的单词匹配。单词可以匹配任何地方——例如，doc1的word#5可以匹配doc2的word#3和word#67；然后 doc1 的 word#23 可以再次匹配 doc2 的 word#3 和 word#67 - 所以我想要所有匹配项。此外，除了一个单词匹配之外，我还希望在两个文档之间获得连续的多个（2 个单词、3 个单词 ....15 个单词等）单词匹配。我应该如何在 Java 中解决这个问题？我一直在研究正则表达式，但仍然不相信确切的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:51:46.250

首先，您需要将文档分成 n 个单词的字符串（1 个单词、2 个单词、3 个单词、...、n 个单词）——这些字符串称为 n-gram。参考[这里](https://stackoverflow.com/questions/3656762/n-gram-generation-from-a-sentence)。

其次，从文档 A 创建一组 n-gram。然后，对于文档 B 中的每个 n-gram，检查它是否在集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:52:34.923

我建议您为每个文档维护一个单词树集，遍历第一个树集并检查匹配项与第二个应该完成您的任务。

对于多个单词部分使用相同的技巧只得到两个单词组，例如

```
word1 word2 word3 yay! 
```

将`word1 word2`其放入树集中，然后进行`word2 word3`相同的操作。您可以使用正则表达式来删除标点符号，因此该算法应包括三个步骤：

1.  从标点符号中清除文件
2.  “索引”单词和连续单词组
3.  比较阶段

关于第 1 点要小心，因为例如这些短语是相同的：

> 我吃了，猫没吃，我吃了
> 
> 我吃了猫，不是吗？做过！

# mercurial - Mercurial，本地克隆

> ID：12709610
> 
> 赞同：1
> 
> 时间：2012-10-03T13:32:39.787
> 
> 标签：mercurial

我已经设法通过 TortoiseHG gui 在本地克隆了我的存储库。我想知道的是如何通过命令提示符执行此操作。在 TortoiseHG 的克隆窗口中，有一个 Hg 命令行，其中包含以下内容：

> hg clone --verbose -- C:...\Mercurial Demo\Shared C:...\Mercurial Demo\Bob

我尝试将其复制到命令提示符中，但它不起作用。它指出克隆命令应遵循以下结构：

> hg 克隆 [选项]... 源 [目标]
> 
> hg clone help 也没有任何帮助。

如果有人能告诉我一个应该如何做的例子，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:34:57.990

我最大的怀疑是路径中有空格，所以 Mercurial 看到了太多的选择。尝试将路径括在引号中。

# excel - IF 语句，这是不正确的 可能需要 SUMIF 或其他类型的公式才能工作

> ID：12709614
> 
> 赞同：0
> 
> 时间：2012-10-03T13:32:52.100
> 
> 标签：excel, excel-formula

我在第一列中有一个天数列表。

根据第一列中的天数，我想给每一行一个状态，即如果单元格 A2 的值为 5 天，在 B2 中我希望状态为“少于 10 天”。

*   如果 A1 的值为 15，则 A2 将更新为“10-20 天”的值。
*   如果 A1 的值为 35，则 A2 将更新为“30-60 天”的值，依此类推。

我需要 5 个分组，即“少于 10 天”、“10-20”、“20-30”、“30-60”和“大于 60 天”

我可以在第一列的电子表格中有许多值，因此需要使用一些公式将它们放入分组桶中。目前我正在使用下面的，但似乎没有工作。

我下面的公式仅部分有效，即获取第一个两个条件，但无法计算第三个或第四个或第五个条件。

有任何想法吗？

我目前使用的公式是：

```
=IF(A19<10,"Less Than 10 days",IF(10<A19>20,"10-20 Days", IF(20<A19>30,"20-30 Days",IF(A19>30,"Greater Than 30 Days","Greater than 60 Days")))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:43:34.593

```
=IF(A19<10,"Less Than 10 days",IF(A19<20,"10-20 Days", IF(A19<30,"20-30 Days",IF(A19<60,"Greater Than 30 Days","Greater than 60 Days")))) 
```

我变了：

*   使所有逻辑运算符更清晰
*   在最后一条语句中将“30”更改为“60”（以匹配您的文本实际内容）

遵循语句的逻辑 - 对于第一个 if 语句，如果它不小于 10 天，它会检查它是否小于 20 天，然后是 30 天，等等。你不需要 10 - 20 范围 - 你已经在处理`<10`第一个声明的所有值`IF`。类似地，20-30 之间的值由`<30`相应`IF`语句的部分处理。

# sql - SQL 触发器输出

> ID：12709617
> 
> 赞同：1
> 
> 时间：2012-10-03T13:32:59.130
> 
> 标签：sql, triggers

我执行以下触发器：

```
ALTER TRIGGER [dbo].[TestTrigger] ON [dbo].[TestTable] 
after update as
    Declare @Name As varchar(30)
    update TestTable set [Name] = 'Rob Stanfield'
    select @Name = [Name] from inserted
    print @Name
GO 
```

我正在执行的插入语句是：

```
INSERT INTO TestTable (name) VALUES ('Ed Watkins') 
```

输出如下：

```
(1 row(s) affected)
Ed Watkins
(1 row(s) affected) 
```

我希望输出是：

```
(1 row(s) affected)
Rob Stanfield

(1 row(s) affected) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:39:57.697

`Inserted`将是`TestTable`触发器运行之前更改的行的副本，因此其中 name 的值仍然是 Ed Watkins。

我不确定您为什么要这样做，但您必须查询刚刚更新的表才能在触发器中获取刚刚更新的新值：

```
ALTER TRIGGER [dbo].[TestTrigger] ON [dbo].[TestTable] 
after update as
    Declare @Name As varchar(30)
    update TestTable set [Name] = 'Rob Stanfield'
    select @Name = [Name] from TestTable 
    print @Name
GO 
```

你真的在寻找[`instead of insert`](http://msdn.microsoft.com/en-us/library/ms175089%28v=sql.105%29.aspx)触发器吗？

# iphone - 如何创建一个segue，使用另一个模型对象执行到同一视图的转换？

> ID：12709618
> 
> 赞同：1
> 
> 时间：2012-10-03T13:33:00.967
> 
> 标签：iphone, xcode, ios5

我正在编写一个 iOS / CocoaTouch 应用程序，我面临以下问题：

*   我有一个详细视图（考虑一个给定对象的概述）
*   此详细视图可以呈现其他元素
*   任何这些其他元素都可以在这个完全相同的细节视图中查看（我的意思是，这个视图/视图控制器的另一个实例使用查看的对象模型。

我唯一的问题是我无法在情节提要编辑器中创建从视图到同一视图的转场。因此，我根本无法创建 segue，无法分配标识符，因此无法从代码中触发它。

有什么办法可以实现吗？这就像一个详细视图推送另一个一样简单，每个视图控制器都有一个专用的视图控制器实例和各自的对象模型。

非常感谢，我到处找，找不到任何与此相关的话题。克里斯托夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:45:51.400

Segues 在视图控制器之间，而不是视图之间（即使视图可以充当触发器）。如果您想要一个新视图控制器的转场，请在情节提要中创建它的新实例，将其标识分配给与原始细节相同的类，然后定义转场。

如果您只是想更改在单个视图控制器中显示的视图，那么有选择地设置视图隐藏和不隐藏可以工作......或添加/删除子视图。

# sql-server-2008-r2 - 以最快最可靠的方式比较两张表

> ID：12709620
> 
> 赞同：0
> 
> 时间：2012-10-03T13:33:11.827
> 
> 标签：sql-server-2008-r2, sql-update

我有两个表，它们有很多列，而这些列在很多情况下都有空值。

比较两个表数据的最佳方法是什么？

我正在使用以下方式：

```
UPADTE TableB
SET Col1 = A.Col1
FROM TableA A INNER JOIN TableB B
ON A.Col2 = B.Col2 AND A.Col3 = B.Col3 .... A.Col47 = B.Col47 
```

不知何故，我也可以写这个，但你知道 SQL Server 不能说 NULL = NULL 并且当我在所有列上保留 ISNULL 函数时，查询需要 20-30 分钟。

有什么方法可以更快更准确地完成相同的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:03:04.557

> > [...]SQL Server 不能说 NULL = NULL，当我在所有列上保留 ISNULL 函数时，查询需要 20-30 分钟。

这并不完全正确。出于此比较的目的，您可以[将 ansi_nulls 设置为关闭。](http://msdn.microsoft.com/en-us/library/ms188048.aspx)请注意，此功能可能在未来的 SQL Server 版本中不可用，但至少在 2012 年之前它仍然存在。

```
set ansi_nulls on
select 1 where 1 != null    -- returns nothing
select 1 where null = null  -- returns nothing
select 1 where null != null -- returns nothing

set ansi_nulls off
select 1 where 1 != null    -- returns 1
select 1 where null = null  -- returns 1
select 1 where null != null -- returns nothing 
```

如果这不能解决您的性能问题，您可能需要研究索引或更好的硬件以使查询运行得更快，或者退后一步重新分析正在发生的事情，然后重构解决方案。乍一看，这似乎是一个不寻常的操作（在非常相似的表之间复制数据，但仅在所有这些数据的匹配上），但提供准确的表定义、要求和示例可能会有很长的路要走帮助他人了解可以改变的地方。

# objective-c - 自定义 tableView：角半径，减小宽度和阴影

> ID：12709623
> 
> 赞同：5
> 
> 时间：2012-10-03T13:33:15.760
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

这就是我想要做的：

![在此处输入图像描述](../Images/b51e314f559ad99993cc9f8159d54609.png)

如您所见，我想：

1.  减小 tableView 的宽度（我希望侧面的边距比分组的 tableView 提供的更多）

2.  角半径（比分组 tableView 的默认值更大的半径）

3.  在桌子周围投下阴影，最后一个单元格下方有一个特殊的阴影

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:39:10.773

您可以通过自己“绘制”单元格的 backgroundView 来做到这一点。

我建议将图像用作背景（如果单元格的高度相同）。

你需要三张图片。

顶部圆角的“顶部”图像。一个“底部”图像，底角是圆形的，阴影是你想要的。还有一个没有圆角的“中间”图像。

如果单元格中没有任何纹理或渐变，那么您可以使用可拉伸图像来减少它们的内存占用。

然后我将子类化 UITableViewCell 并覆盖 backgroundView 以添加 UIImageView。我还将提供一个访问器方法来更改单元格的类型（顶部、中间、底部）。

然后每个单元格可以具有 UIImage 的三个 placeHolder 属性（topImage、bottomImage 和 middleImage）。当单元格的类型改变时，这些可以被访问（使用惰性实例化来确保它们只在需要时加载一次），然后将 backgroundVIew 图像设置为所需的图像。

像这样的东西...

在 UITableViewCell 子类中定义一个类型枚举...

```
typedef enum {
    CellTypeTop,
    CellTypeMiddle,
    CellTypeBottom
} cellType; 
```

然后类型的属性...

```
@property (nonatomic) cellType cellType 
```

然后在.m ...

定义更多内部属性...

```
@property UIImageView *bgImageView;
@property UIImage *topImage;
@property UIImage *middleImage;
@property UIImage *bottomImage; 
```

然后添加 imageView（仅一次）...

```
- (void)awakeFromNib //or in the init depends how you are initialising the cell
{
    self.bgImageView = [[UIImageView alloc] initWithFrame:blah];

    [self.backgroundView addSubView:self.bgImageView];
} 
```

现在当类型改变时......

```
- (void)setCellType:(cellType)cellType
{
    switch(cellType) {
        case CellTypeTop:
            self.bgImageView.image = self.topImage;
            break;
        case CellTypeMiddle:
            self.bgImageView.image = self.middleImage;
            break;
        case CellTypeBottom:
            self.bgImageView.image = self.bottomImage;
            break;
    }
} 
```

最后是图像的懒惰实例化......

```
- (UIImage *)topImage
{
    if (_topImage == nil) {
        _topImage = [UIImage imageNamed:@"topImage"];
        //alternatively...
        _topImage = [[UIImage imageNamed:@"topImage"] stretchableImageWith...
    }

    return _topImage;
} 
```

现在对其他图像重复这些。

这将比使用 CALayer 替代方案更高效（在很长的路上），尤其是在使用可拉伸图像时，内存占用非常小。

其他几位用户表示，这对性能、内存、设计等都不利，但它确实是为 UserExperience 获得最佳性能的最佳方式，而不是 CALayers。是的，它会比 CALayers 使用更多的内存，但只是很小的一部分，并且它会达到一个限制，因为只创建了几个可出队的单元格。

几个链接解释了在滚动视图中使用 CALayers 时的性能问题......

[http://www.quora.com/iOS-Development/What-is-the-best-way-to-optimize-the-performance-of-a-non-paging-but-view-recycling-UIScrollView-involving-加载潜在缓存和显示捆绑图像](http://www.quora.com/iOS-Development/What-is-the-best-way-to-optimize-the-performance-of-a-non-paging-but-view-recycling-UIScrollView-involving-loading-potentially-caching-and-displaying-bundled-images)

[加载了 3 个视图控制器的滚动视图性能不佳，使用 CALayer 绘制](https://stackoverflow.com/questions/5195150/bad-performance-on-scroll-view-loaded-with-3-view-controllers-drawn-with-calaye)

::EDIT:: 编辑回答迈克尔的问题。

1.  在情节提要中创建一个 UITableViewController（重命名检查器中的类，使其与您的子类 UITableViewController 匹配 - 我将其称为 MyTableViewController）。

2.  在代码（即.h 和.m）中创建UITableViewCell 的子类（我将调用我的MyTableViewCell）。

3.  将上面的代码添加到您的 MyTableViewCell.h 文件中，以处理属性和类型以及 imageViews。

4.  在情节提要中，选择 TableViewController 中的单元格并将类重命名为 MyTableViewCell。还要在其上设置重用标识符。

5.  在 MyTableViewController 代码中，您将需要这样的函数...

    ```
    -(UITableViewCell*)tableView:(UITabelView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
    {
        MyTableViewCell *cell = [tableView dequeueCellWithReuseIdentifier:@"Cell"];

        cell.cellType = CellTypeTop; //or whichever it needs to be
        cell.textLabel.text = @"Blah";

        return cell;
    } 
    ```

哦，另一件事，在情节提要中，您将能够按照您希望的方式布局您的单元格并链接所有标签和图像视图等...确保将 IBOutlet 添加到 UIImageView 以便您可以将其链接到故事板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:49:21.073

确保你已经`#import <QuartzCore/QuartzCore.h>`导入，然后你就可以开始访问 UITableView 的图层了。

```
 UITableView *yourTable =  [[UITableView alloc] initWithStyle:UITableViewStyleGrouped];

  [[yourTable layer] setCornerRadius:10.0f];
  [[yourTable layer] setShadowColor:[[UIColor blackColor] CGColor]];
  [[yourTable layer] setShadowOffset:CGSizeMake([CALayer ShadowOffSetWidthWithFloat:10.0f], [CALayer ShadowOffSetWidthWithFloat:10.0f])];
  [[yourTable layer] setShadowOpacity:[CALayer ShadowOpacity:1]];
  [[yourTable layer] setMasksToBounds:NO];
  UIBezierPath *path = [UIBezierPAth bezierPathWithRect:yourTable.bounds];
  [[yourTable layer] setShadowPath:[path CGPath]]; 
```

这将为您的表格视图添加阴影效果，阴影不会被遮蔽到 的边界`UITableView`，`setCornerRadius`您可以将表格的角设置为您想要的任何内容。你也可以`frame`通过`UITableView`做设置

```
 [yourTable setFrame:CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height)]; 
```

**编辑**

正如另一位用户试图指出的那样`CALayer`非常慢，事实并非如此

[引入CALayer](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)是为了帮助解决围绕动画的性能问题。请阅读文档。直接加载图像似乎是个好主意，但从长远来看会占用更多内存。请这个[关于](https://stackoverflow.com/questions/4610329/iphone-loading-png-to-uiimage-takes-up-more-memory-than-png-binary-size)图像内存分配的问题。如您所见，它可能看起来更快，但它占用了`2.25 MByte of memory`每张图片，在加载每张图片多次后，您的应用程序将开始变慢。

# c++ - 初始化为“float[10][10]”的数组是否已经为 SIMD/SSE 对齐内存？

> ID：12709631
> 
> 赞同：2
> 
> 时间：2012-10-03T13:33:41.470
> 
> 标签：c++, sse, simd

我需要使用 SIMD/Intel SSE 优化我的矩阵乘法。给出的示例代码如下所示：

```
*x = (float*)memalign(16, size * sizeof(float)); 
```

但是，我使用的是 C++，`[found that][1]`而不是`malloc`（在执行 SIMD 之前），我应该使用`new`. 现在，我正在通过 SIMD/SSE 进一步优化，所以我需要对齐内存，所以问题是：我需要`memalign`/`_aligned_malloc`或者我的数组声明为

```
static float m1[SIZE][SIZE]; 
```

已经对齐了？（`SIZE`是一个整数）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:41:52.560

通常，它们不会是 16 字节对齐的，尽管 C++ 规范中没有任何内容可以阻止编译器在 16 字节边界上对齐这样的数组。根据您使用的编译器，通常有一种特定于编译器的方式来请求数组在 16 字节边界上对齐。例如，对于`gcc`，您将使用：

```
static float m1[SIZE][SIZE] __attribute__((aligned(16))); 
```

或者，您可以使用平台上可用的`posix_memalign()`、`memalign()`或其他对齐分配 API 来获取具有所需对齐的内存块。作为最坏的情况，您甚至可以使用标准分配内存`malloc()`，`operator new`然后自己处理对齐调整。

# java - 遵循官方 solr 教程时出错

> ID：12709632
> 
> 赞同：2
> 
> 时间：2012-10-03T13:33:42.827
> 
> 标签：java, apache, solr, lucene

我正在关注[这个 solr 教程](http://lucene.apache.org/solr/api-3_6_1/doc-files/tutorial.html)。

我成功地按照“更新数据”部分的步骤进行操作。在本教程的这一部分，建议我查看链接中的统计信息页面：

```
http://localhost:8983/solr/admin/stats.jsp 
```

当我单击此链接时，我会在浏览器中看到：

> HTTP 错误 500 访问 /solr/admin/stats.jsp 时出现问题。原因：未配置 JSP 支持 Powered by Jetty://

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:59:00.970

对于我安装的 solr 4.1 多核，以下链接有效：/solr//admin/mbeans?stats=true

# css - CSS浮动问题：块被“推”下来？

> ID：12709635
> 
> 赞同：0
> 
> 时间：2012-10-03T13:33:48.860
> 
> 标签：css, image, layout

我正在制作一个简单的布局作为网站的一部分。它有多个块，每个块都有相似的内容。这是html/css：

```
<html>
    <head>
        <style> 
            .content {
                width: 900px;
                display: block;
                overflow: hidden;
                padding: 10px;
                background: #fea;
                margin: 20px;
            }
            h2, p {
                display: block;
                width: 580px;
            }
            img {
                background: white;
                padding: 5px;
                width: 270px;
                height: 330px;
            }
            h2, p, img {
                display:block;
                float: left;
                margin-left: 10px;
                margin-right: 10px;
            }

        </style>
    </head>
    <body>
        <div class='content'>
            <img class='auto' src='img/test.jpg' alt='test image' />
            <h2>Title one</h2>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
                sed do eiusmod tempor <em>incididunt</em> ut labore et dolore magna aliqua. 
                Ut enim ad minim veniam, quis nostrud exercitation. 
            </p>
            <p>
                ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                Duis aute irure dolor in reprehenderit in voluptate velit 
                esse cillum dolore eu fugiat nulla pariatur. 
                Excepteur sint occaecat cupidatat non proident, 
                sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
        </div>
        <div class='content'>
            <h2>Title two</h2>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
                sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
                Ut enim ad minim veniam, quis nostrud exercitation. 
            </p>
            <p>
                ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                Duis aute irure dolor in reprehenderit in voluptate velit 
                esse cillum dolore eu fugiat nulla pariatur. 
                Excepteur sint occaecat <a href='#'>cupidatat non proident</a>, 
                sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
            <img class='auto' src='img/test.jpg' alt='test image' />
        </div>
    </body>
</html> 
```

第二张图片的显示低于预期。是什么原因造成的，有没有办法解决它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:51:37.293

您的图像以及段落和 用`h2`定义`float: left`。由于两者`p`都`h2`具有固定宽度，因此您不能将其中两个放在一行中（580px*2 > 900px），因此它们会换行。

但是，图像将适合段落（或标题）旁边，因此它将以相同的高度显示。

要在标题右侧显示图像，您必须将图像的浮动样式交换为“float：right”并将图像放在`h2`标签之前。

你可以在这里找到一个（清理过的）小提琴：

[http://jsfiddle.net/Xmujr/](http://jsfiddle.net/Xmujr/)

我删除了大部分浮动指令，因为除了图像之外的任何东西都不需要它们。我还在图像中添加了一个类（左/右），以明确图像的显示位置。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:44:51.790

`<h2>`在里面添加第二张图片，`<div class="content">`样式如下：

```
<div class='content'>
 <img class='auto' src='img/test.jpg' alt='test image' style="float:right;"/>
 <h2>Title two</h2>

 <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
    Ut enim ad minim veniam, quis nostrud exercitation. 
 </p>

 <p>
    ullamco laboris nisi ut aliquip ex ea commodo consequat. 
    Duis aute irure dolor in reprehenderit in voluptate velit 
    esse cillum dolore eu fugiat nulla pariatur. 
    Excepteur sint occaecat <a href='#'>cupidatat non proident</a>, 
    sunt in culpa qui officia deserunt mollit anim id est laborum.
 </p>
</div> 
```

**编辑**
或者您可以使用 css 类来实现相同的目的：
检查下面代码中的`to_right`和`to_left`css 类。

```
<html>
<head>
<style> 
     .content {
       width: 900px;
       display: block;
       overflow: hidden;
       padding: 10px;
       background: #fea;
       margin: 20px;
     }
     h2, p {
       display: block;
       width: 580px;
     }
     img {
       background: white;
       padding: 5px;
       width: 270px;
       height: 330px;
     }
     .to_right{float:right;}
     .to_left {float:left;}

     h2, p, img {
       display:block;  
       margin-left: 10px;
       margin-right: 10px;
     }

     </style>
     </head>
     <body>

     <div class='content'>

         <img src='img/test.jpg' alt='test image' class="auto to_left"/>

         <h2>Title one</h2>

         <p>
             Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
             sed do eiusmod tempor <em>incididunt</em> ut labore et dolore magna                        aliqua. 
             Ut enim ad minim veniam, quis nostrud exercitation. 
         </p>

         <p>
             ullamco laboris nisi ut aliquip ex ea commodo consequat. 
             Duis aute irure dolor in reprehenderit in voluptate velit 
             esse cillum dolore eu fugiat nulla pariatur. 
         Excepteur sint occaecat cupidatat non proident, 
         sunt in culpa qui officia deserunt mollit anim id est laborum.
     </p>

     </div>

     <div class='content'>
        <img src='img/test.jpg' alt='test image' class="auto to_right"/>
         <h2>Title two</h2>

         <p>
             Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
             sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
             Ut enim ad minim veniam, quis nostrud exercitation. 
         </p>

         <p>
             ullamco laboris nisi ut aliquip ex ea commodo consequat. 
             Duis aute irure dolor in reprehenderit in voluptate velit 
             esse cillum dolore eu fugiat nulla pariatur. 
             Excepteur sint occaecat <a href='#'>cupidatat non proident</a>, 
             sunt in culpa qui officia deserunt mollit anim id est laborum.
         </p>

     </div>
     </body></html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:39:36.610

调整你的html...

```
 <html>
 <head>
 <style> 

.content {
width: 900px;
display: block;
overflow: hidden;
padding: 10px;
background: #fea;
margin: 20px;
}
h2, p {
 display: block;
 width: 580px;
 }
  img {
   background: white;
   padding: 5px;
   width: 270px;
   height: 330px;
     }
 h2, p, img {
 display:block;
 float: left;
 margin-left: 10px;
 margin-right: 10px;
 }

 </style>
 </head>
 <body>

 <div class='content'>

<img class='auto' src='img/test.jpg' alt='test image' />

<h2>Title one</h2>

<p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
    sed do eiusmod tempor <em>incididunt</em> ut labore et dolore magna aliqua. 
    Ut enim ad minim veniam, quis nostrud exercitation. 
</p>

<p>
    ullamco laboris nisi ut aliquip ex ea commodo consequat. 
    Duis aute irure dolor in reprehenderit in voluptate velit 
    esse cillum dolore eu fugiat nulla pariatur. 
Excepteur sint occaecat cupidatat non proident, 
sunt in culpa qui officia deserunt mollit anim id est laborum.
 </p>

  </div>

  <div class='content'>
 <img class='auto' src='img/test.jpg' alt='test image' />
 <h2>Title two</h2>

<p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
    Ut enim ad minim veniam, quis nostrud exercitation. 
</p>

 <p>
    ullamco laboris nisi ut aliquip ex ea commodo consequat. 
    Duis aute irure dolor in reprehenderit in voluptate velit 
    esse cillum dolore eu fugiat nulla pariatur. 
    Excepteur sint occaecat <a href='#'>cupidatat non proident</a>, 
    sunt in culpa qui officia deserunt mollit anim id est laborum.
 </p>

 </div>

 </body></html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T13:39:54.333

您应该对`float`文本和图像使用 CSS：

```
<html> 
<head> 
<style>  

.left {
float:left;
}

.right {
float:right;
}

.content { 
  width: 900px; 
  display: block; 
  overflow: hidden; 
  padding: 10px; 
  background: #fea; 
  margin: 20px; 
} 
h2, p { 
  display: block; 
  width: 580px; 
} 
img { 
  background: white; 
  padding: 5px; 
  width: 270px; 
  height: 330px; 
} 
h2, p, img { 
  display:block; 
  float: left; 
  margin-left: 10px; 
  margin-right: 10px; 
} 

</style> 
</head> 
<body> 

<div class='content'> 

    <div class="left">
    <img class='auto' src='img/test.jpg' alt='test image' /> 
    </div>

    <div class="right">
    <h2>Title one</h2> 

    <p> 
        Lorem ipsum dolor sit amet, consectetur adipisicing elit,  
        sed do eiusmod tempor <em>incididunt</em> ut labore et dolore magna aliqua.  
        Ut enim ad minim veniam, quis nostrud exercitation.  
    </p> 

    <p> 
        ullamco laboris nisi ut aliquip ex ea commodo consequat.  
        Duis aute irure dolor in reprehenderit in voluptate velit  
        esse cillum dolore eu fugiat nulla pariatur.  
    Excepteur sint occaecat cupidatat non proident,  
    sunt in culpa qui officia deserunt mollit anim id est laborum. 
</p>
</div> 

</div> 

<div class='content'> 

    <div class="right">
    <img class='auto' src='img/test.jpg' alt='test image' />
    </div>

    <div class="left">
    <h2>Title two</h2> 

    <p> 
        Lorem ipsum dolor sit amet, consectetur adipisicing elit,  
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.  
        Ut enim ad minim veniam, quis nostrud exercitation.  
    </p> 

    <p> 
        ullamco laboris nisi ut aliquip ex ea commodo consequat.  
        Duis aute irure dolor in reprehenderit in voluptate velit  
        esse cillum dolore eu fugiat nulla pariatur.  
        Excepteur sint occaecat <a href='#'>cupidatat non proident</a>,  
        sunt in culpa qui officia deserunt mollit anim id est laborum. 
    </p> 
 </div>

</div> 

</body></html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T13:37:13.980

尝试将 img 标签放在 p 元素上方的第二个 div 中。

# c++ - 有没有办法将寄存器的值直接写入文件？

> ID：12709643
> 
> 赞同：-2
> 
> 时间：2012-10-03T13:34:12.093
> 
> 标签：c++, assembly, file-io, inline-assembly, cpu-registers

我正在尝试制作将余数除以分母作为以十为底的分数的东西。

因为我~~担心~~不喜欢未对齐的内存访问，所以我使用一个寄存器来缓冲最后八个计算数字。

但是，我找不到将缓冲区直接写入输出的任何方法。

我知道我可以将缓冲区移动到内存中并写入，但我不想这样做。

有没有办法将寄存器的值直接写入文件？

我在 64 位 Ubuntu 上使用带有 gcc-4.7 的 C++ 中的内联汇编。

**编辑：**

我很抱歉问了这样一个非常愚蠢的问题。

我正在玩内联汇编，并试图有效地将我生成的输出逐字节写入输出。我尝试通过将生成的字节转移到单个寄存器中，将该寄存器存储在内存中并将该内存地址处的 8 个字节写入输出（尽管我不确定这是否与字节序兼容）。

当我问这个问题时，我想到的是以某种方式省略了“将该寄存器存储在内存中”。最后，我只是将寄存器存储到一个缓冲区，每次它包含 8 个字节，当缓冲区被填满时，我一次打印整个缓冲区而不是 8 个字节。

我希望这能澄清我看似奇怪的问题背后的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:39:11.930

“有没有办法将寄存器的值直接写入文件？”

不。

“因为我担心未对齐的内存访问，所以我使用一个寄存器来缓冲最后八个计算数字。”

**你不能在假设计算机是敌对的情况下编写计算机程序。**为了编写程序，您必须假设计算机以常规且可预测的方式运行。

在您的情况下，您必须以无法进行非对齐访问的方式编写程序。由于您是用汇编程序编写的，因此这是您的责任，而不是编译器的责任。

# entity-framework - 使用 |DataDirectory| 时出现“不支持 URI 格式”异常 在实体框架连接字符串中

> ID：12709644
> 
> 赞同：2
> 
> 时间：2012-10-03T13:34:16.300
> 
> 标签：entity-framework, connection-string, datadirectory

我在 Visual Studio 2012 中有一个单元测试项目，我在其中存储 SQL Server 2012 的 AdventureWorks MDF 文件（该文件名为 AdventureWorks2012_Data.mdf）。在 Visual Studio Server Explorer 中，我可以在数据连接中添加 MDF 并浏览数据库。右键单击 $/Data Connections/AsventureWorks2012_Data.mdf 并选择属性使我可以访问连接字符串，如下所示：

数据源=(LocalDB)\v11.0;AttachDbFilename=C:\Projects\Common\Source\Framework\Framework.Data.Tests\AdventureWorks2012_Data.mdf;Integrated Security=True;Connect Timeout=30

我将其复制到 app.config 文件中的实体框架连接字符串中，如下所示：

```
<!-- Works :-) -->
<connectionStrings>
  <add name="AdventureWorksEntities" 
       connectionString="metadata=res://*/Repository2Tests.AdventureWorks.csdl|res://*/Repository2Tests.AdventureWorks.ssdl|res://*/Repository2Tests.AdventureWorks.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Projects\Common\Source\Framework\Framework.Data.Tests\AdventureWorks2012_Data.mdf;Integrated Security=True;Connect Timeout=30App=EntityFramework&quot;" 
       providerName="System.Data.EntityClient" />
</connectionStrings> 
```

请注意，AttachDbFilename 包含 MDF 文件的完整路径：C:\Projects\Common\Source\Framework\Framework.Data.Tests\AdventureWorks2012_Data.mdf

当我运行单元测试时，一切都按预期进行。

我将 AttachDbFilename 更改为 |DataDirectory|\AdventureWorks2012_Data.mdf，如“ [ADO.NET Entity Framework Connection Strings](http://msdn.microsoft.com/en-us/library/cc716756%28v=vs.100%29.aspx) ”中所述，并按照“ [ADO.NET |DataDirectory| where is thisdocumented?](https://stackoverflow.com/questions/1409358/ado-net-datadirectory-where-is-this-documented) ”中所述设置 DataDirectory，以便我的连接字符串现在如下：

```
<!-- Doesn't work :-( -->
<connectionStrings>
  <add name="AdventureWorksEntities" 
       connectionString="metadata=res://*/Repository2Tests.AdventureWorks.csdl|res://*/Repository2Tests.AdventureWorks.ssdl|res://*/Repository2Tests.AdventureWorks.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\AdventureWorks2012_Data.mdf;Integrated Security=True;Connect Timeout=30;App=EntityFramework&quot;" 
       providerName="System.Data.EntityClient" />
</connectionStrings> 
```

使用 |DataDirectory| 的变化 导致以下运行时错误：

```
System.Data.EntityException: The underlying provider failed on ConnectionString. ---> System.ArgumentException: URI formats are not supported.
HResult: -2147024809
at System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength)
at System.IO.Path.GetFullPath(String path)
at System.Data.Common.ADP.GetFullPath(String filename)
at System.Data.Common.DbConnectionOptions.ExpandDataDirectory(String keyword, String value, String& datadir)
at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString)
at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous)
at System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(DbConnectionPoolKey key, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions)
at System.Data.SqlClient.SqlConnection.ConnectionString_Set(DbConnectionPoolKey key)
at System.Data.SqlClient.SqlConnection.set_ConnectionString(String value)
at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
--- End of inner exception stack trace ---
HResult: -2146233087
at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
at System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name, ConnectionStringSettingsCollection connectionStrings)
at System.Data.Entity.Internal.LazyInternalConnection.Initialize()
at System.Data.Entity.Internal.LazyInternalConnection.get_ConnectionHasModel()
at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
at System.Data.Entity.Internal.Linq.InternalSet`1.Create() 
```

我已经对此进行了几天的研究，并尝试了无数种变化，但均未成功。我什至调试了 Microsoft 代码，但通过编译器优化，我无法在堆栈上看到任何调试信息。

有没有人遇到过这个特定问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:47:21.350

当我开始向 Microsoft 提交错误报告并着手复制步骤时，我终于解决了这个问题。

长话短说，问题出在设置 DataDirectory 的代码中：

```
AppDomain.CurrentDomain.SetData("DataDirectory", dataDirectory); 
```

问题是我的 dataDirectory 变量被初始化为`file://C:/myfolder/etc/`而不是`C:\myfolder\etc\`. 我更正了负责该问题的代码，问题得到解决。顺便说一句，我使用的代码是：

```
// in the test assembly initializer
String dataDirectory = AppDomain.CurrentDomain.GetApplicationPath();
AppDomain.CurrentDomain.SetData("DataDirectory", dataDirectory);

// GetApplicationPath calls into the following extension method
/// <summary>
/// Defines a set of extension methods on <see cref="AppDomain"/> objects.
/// </summary>
public static class AppDomainExtensions
{
    /// <summary>
    /// Gets the application path (works for both ASP.NET and unit tests).
    /// </summary>
    /// <returns></returns>
    public static string GetApplicationPath(this AppDomain appDomain)
    {
        string binPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
        return binPath.Substring(0, binPath.LastIndexOf("bin", StringComparison.InvariantCultureIgnoreCase));
    }
} 
```

# java - 从 ArrayList 获得无效值 >

> ID：12709655
> 
> 赞同：0
> 
> 时间：2012-10-03T13:34:50.357
> 
> 标签：java, android, listview, android-listview

我在`ListView`. 我的代码如下。

```
 final ArrayList<HashMap<String, String>> placesListItems = new ArrayList<HashMap<String, String>>();

        runOnUiThread(new Runnable() {
            public void run() {
                try {
                    HashMap<String, String> map = new HashMap<String, String>();

                    for (int i = 0; i < dealList.size(); i++) {
                        map.put(DealItem.DEAL_ID, dealList.get(i).deal_id);
                        map.put(DealItem.DEAL_NAME, dealList.get(i).deal_name);
                        System.out.println("DEAL NAME = "+dealList.get(i).deal_name);
                        placesListItems.add(map);

                    }

                    new PlacesMapActivity(SinglePlaceActivity.this, lon, lat, name, add);

                    ListView lv = (ListView) findViewById(R.id.listView);
                    simpleAdapter = new SimpleAdapter(SinglePlaceActivity.this, placesListItems, R.layout.list_item_deal, new String[] {
                            DealItem.DEAL_ID, DealItem.DEAL_NAME }, new int[] { R.id.reference, R.id.name });
                    lv.setAdapter(simpleAdapter); 
```

当我运行此代码时，我得到这样的答案

```
 10-03 18:37:29.429: I/System.out(3957): DEAL NAME = Sinbad Cafe
  10-03 18:37:52.369: I/System.out(3957): DEAL NAME = Coffee,Tea, Hot Milk
  10-03 18:37:55.189: I/System.out(3957): DEAL NAME = Httpss 
```

但我不明白为什么我在`ListView`

如下所示：

```
 Httpss
  Httpss
  Httpss 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:38:03.127

同一张地图被多次添加到列表中。

尝试将新的 HashMap<...>-line 移动到 for 循环中：

```
 for (int i = 0; i < dealList.size(); i++) {
         -->        HashMap<String, String> map = new HashMap<String, String>();
                    map.put(DealItem.DEAL_ID, dealList.get(i).deal_id);
                    map.put(DealItem.DEAL_NAME, dealList.get(i).deal_name);
                    System.out.println("DEAL NAME = "+dealList.get(i).deal_name);
                    placesListItems.add(map);

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:40:03.567

```
 +-------- HashMap<String, String> map = new HashMap<String, String>();
   |
   |            for (int i = 0; i < dealList.size(); i++) {
   +--------------->  
                    map.put(DealItem.DEAL_ID, dealList.get(i).deal_id);
                    map.put(DealItem.DEAL_NAME, dealList.get(i).deal_name);
                    System.out.println("DEAL NAME = "+dealList.get(i).deal_name);
                    placesListItems.add(map);

                } 
```

由于您在循环之外进行了“HashMap”初始化，因此您实际上是在覆盖相同的哈希图并将其放回数组列表中。

尝试**将您的 HashMap 初始化移动**到 for-loop 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:40:25.217

使用以下代码更改代码它将解决您的错误.....

```
 try {

                for (int i = 0; i < dealList.size(); i++) {
                 HashMap<String, String> map = new HashMap<String, String>();
                    map.put(DealItem.DEAL_ID, dealList.get(i).deal_id);
                    map.put(DealItem.DEAL_NAME, dealList.get(i).deal_name);
                    System.out.println("DEAL NAME = "+dealList.get(i).deal_name);
                    placesListItems.add(map);

      } 
```

# c - C语言-（编译运行但命令（cmd.exe）不出现

> ID：12709657
> 
> 赞同：0
> 
> 时间：2012-10-03T13:34:52.213
> 
> 标签：c, cmd

我正在练习 C，但我遇到了问题。

我正在使用 wxDev C++ 并且我运行了文件（它说编译并运行良好）但问题是结果根本没有出现（命令提示符（cmd.exe）没有出现）。

我目前正在使用 MacBookPro（作为训练营）使用 Windows 7。

解决这个问题的潜在解决方案是什么？

非常感谢

例如，即使是这个简单的代码

```
int main(void){
    printf("Hello, world");
    getch();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:44:07.090

getch() 函数在将控制权返回给程序之前等待您按下某个键。在您键入 1 个字符之前，该程序不会完成执行。

请参阅[http://www.programmingsimplified.com/c/conio.h/getch](http://www.programmingsimplified.com/c/conio.h/getch)，其中显示了与您的程序类似的程序。

# php - 数据更新 - SQL 语法错误

> ID：12709662
> 
> 赞同：-1
> 
> 时间：2012-10-03T13:35:00.773
> 
> 标签：php, mysql

我无法更改表中的数据..

```
 UPDATE users
    SET  mem_expire = 2111-10-10 00:00:00
    WHERE  mem_expire = 0000-00-00 00:00:00; 
```

**MySql错误：**

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '00:00:00 WHERE mem_expire = 0000-00-00 00:00:00' 附近使用正确的语法

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:36:16.633

尝试：

```
UPDATE users 
SET  mem_expire = '2111-10-10 00:00:00' 
WHERE  mem_expire = '0000-00-00 00:00:00'; 
```

您需要添加 ' (plings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:36:25.527

日期字符串文字必须被引号包围，如下所示：

```
 UPDATE users
 SET  mem_expire = '2111-10-10 00:00:00'
 WHERE  mem_expire = '0000-00-00 00:00:00'; 
```

# php - 更改 SELECT 中的 MySQL DB 列值

> ID：12709663
> 
> 赞同：0
> 
> 时间：2012-10-03T13:35:01.340
> 
> 标签：php, mysql, sql

我有一个 MySQL DB，其列的值有时为“-1”，如何在 SELECT 期间将其更改为“0”而不对结果执行 foreach 循环。基本上，如果 DB 值为 -1，我希望“显示”值为 0。如果 DB 值是其他任何值，则应不加修改地显示。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:36:48.640

您可以使用`case`语法：

```
select case 
       when col = -1 then 0
       else col
       end case
from Tab 
```

或者

```
 select case col
           when -1 then 0
           else col
           end case
    from Tab 
```

[这里](http://dev.mysql.com/doc/refman/5.0/en/case.html)有更多信息。

或者`if construct`

```
select if(col=-1,0,col)
from Tab 
```

[这里](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)有更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:41:31.503

App.net 上的一位朋友插话道：

```
SELECT IF(mycol=-1, 0, mycol) 
```

这似乎是一种享受。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:40:47.990

或“IF”标量函数用于更短的语法

```
SELECT IF (col = -1, 0, col)
FROM Tab 
```

[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T13:42:56.870

然后 case 语句的另一个选项是 IF 函数，如下所示

```
//IF(expr,if_true_expr,if_false_expr)
SELECT IF(column = -1, 0, column) AS state FROM table 
```

# bash - 从对应值列表中替换一列的值

> ID：12709671
> 
> 赞同：0
> 
> 时间：2012-10-03T13:35:27.840
> 
> 标签：bash, sed, awk, grep

我想用*B.txt*中给出的列表以相应的顺序替换文件输入*A.txt的一列中的条目*

 *例如

*A.txt*是**制表符分隔**但在一列中的值由逗号分隔需要更改该列值的条目之一说`P=`

```
1 X y Z Q=Alpha,P=beta,O=Theta
2 x a b Q=Alpha,P=beta,O=Theta
3 y b c Q=Alpha,P=beta,O=Theta
4 a b c Q=Alpha,P=beta,O=Theta
5 x y z Q=Alpha,P=beta,O=Theta 
```

*B.txt*是

```
1 gamma
2 alpha
3 alpha
4 gamma
5 alpha 
```

现在读取*A.txt*中的每个条目并替换为*B.txt*`P=`中的相应行值

 *输出：

```
1 X y Z Q=Alpha,P=gamma,O=Theta
2 x a b Q=Alpha,P=alpha,O=Theta
3 y b c Q=Alpha,P=alpha,O=Theta
4 a b c Q=Alpha,P=gamma,O=Theta
5 x y z Q=Alpha,P=alpha,O=Theta 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:19:09.350

你可以 sed 给你写一个 sed 脚本，例如：

```
sed 's:^:/^:; s: :\\b/s/P=[^,]+/P=:; s:$:/:' B.txt 
```

输出：

```
/^1\b/s/P=[^,]+/P=gamma/
/^2\b/s/P=[^,]+/P=alpha/
/^3\b/s/P=[^,]+/P=alpha/
/^4\b/s/P=[^,]+/P=gamma/
/^5\b/s/P=[^,]+/P=alpha/ 
```

将其通过管道传输到第二个 sed：

```
sed 's:^:/^:; s: :\\b/s/P=[^,]+/P=:; s:$:/:' B.txt | sed -r -f - A.txt 
```

输出：

```
1 X y Z Q=Alpha,P=gamma,O=Theta
2 x a b Q=Alpha,P=alpha,O=Theta
3 y b c Q=Alpha,P=alpha,O=Theta
4 a b c Q=Alpha,P=gamma,O=Theta
5 x y z Q=Alpha,P=alpha,O=Theta 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:42:03.043

假设 A.txt 和 B.txt 在第一列排序，您可以先将`join`这两个文件排序，然后使用以下命令在指定字段内执行替换`sed`：

例如：

```
join -t $'\t' -j 1 A.txt B.txt | sed 's/,P=.*,\(.*\)\t\(.*\)/,P=\2,\1/g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:22:03.657

另一种解决方案：

```
awk '{getline b < "B.txt" split(b, a, FS)} -F "," {sub(/beta/, a[2]); print}' A.txt 
```**

# android - HTML5 中的应用程序缓存在 Android PhoneGap 应用程序中不起作用

> ID：12709673
> 
> 赞同：1
> 
> 时间：2012-10-03T13:35:34.683
> 
> 标签：android, html, cordova, android-browser, application-cache

我正在尝试将 HTML5 中的应用程序缓存用于 Android PhoneGap 应用程序，但这不起作用，ApplicationCahce 事件感觉不到。

```
function logEvent(event) {
        console.log(event.type);
    }

    window.applicationCache.addEventListener('checking', logEvent, false);
    window.applicationCache.addEventListener('noupdate', logEvent, false);
    window.applicationCache.addEventListener('downloading', logEvent, false);
    window.applicationCache.addEventListener('progress', logEvent, false);
    window.applicationCache.addEventListener('cached', logEvent, false);
    window.applicationCache.addEventListener('updateready', logEvent, false);
    window.applicationCache.addEventListener('obsolete', logEvent, false);
    window.applicationCache.addEventListener('error', logEvent, false); 
```

此外，此代码在 iOS PhoneGap 和 Android 浏览器中运行，此链接用于支持的平台。 [Application Cahce 支持的平台](http://mobilehtml5.org/)

因此，任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T14:27:54.940

我相信默认情况下 WebView 中未启用应用程序缓存。您需要做的是在扩展 DroidGap 调用的 Java 类中：

```
this.appView.getSettings().setAppCacheEnabled(true); 
```

在您的 onCreate() 方法中。

您可能还需要致电：

```
this.appView.getSettings().setAppCacheMaxSize(sizeInBytes);
this.appView.getSettings().setAppCachePath(pathToCacheDir); 
```

请注意，在调用 setAppCachePath() 之前，缓存目录必须存在。

继续阅读...

[http://developer.android.com/reference/android/webkit/WebSettings.html#setAppCacheEnabled(boolean](http://developer.android.com/reference/android/webkit/WebSettings.html#setAppCacheEnabled(boolean) ) [http://developer.android.com/reference/android/webkit/WebSettings.html#setAppCacheMaxSize(long](http://developer.android.com/reference/android/webkit/WebSettings.html#setAppCacheMaxSize(long) ) [http: //developer.android.com/reference/android/webkit/WebSettings.html#setAppCachePath(java.lang.String](http://developer.android.com/reference/android/webkit/WebSettings.html#setAppCachePath(java.lang.String) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:56:00.140

对于 pathToCacheDir，使用：

```
String pathToCacheDir = this.getApplicationContext().getCacheDir().getAbsolutePath() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T06:33:25.763

您是否设置了正确的 mime 类型？起初我像thie一样使用'.txt'：

```
<!DOCTYPE html>
<html manifest="cache.txt">
<head> 
```

它在 iOS、Chrome 中运行良好，但在 Android 中无法运行！

当我设置正确的 mime-type 时，效果很好~

在 tomcat 中，默认扩展名是 '.appcache'，默认 mime-type 是：

```
<mime-mapping>
    <extension>appcache</extension>
    <mime-type>text/cache-manifest</mime-type>
</mime-mapping> 
```

# android-layout - 尝试将 ImageView 向右对齐时，屏幕右侧出现奇怪的填充

> ID：12709676
> 
> 赞同：1
> 
> 时间：2012-10-03T13:35:46.087
> 
> 标签：android-layout

我将 ImageView 的 layout_gravity 设置为“右”并尝试将 0px 填充静态分配给所有四个边缘，但我仍然在屏幕右侧得到奇怪的大约 10px“填充”。此问题仅发生在横向。在垂直方向上，图像正确缩放并且没有发生填充。

XML 文件如下所示：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:padding="0px"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

<SurfaceView
  android:id="@+id/surfaceview"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_gravity="center"
/>

<ImageView 
  android:id="@+id/img1"
  android:src="@drawable/testimage"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_gravity="right"
/>    
</FrameLayout> 
```

图像尺寸为 720x405，我的设备屏幕为 800x480。

# excel - Excel - 如何使用 OFFSET 向数组公式添加错误处理

> ID：12709682
> 
> 赞同：0
> 
> 时间：2012-10-03T13:36:12.557
> 
> 标签：excel, vba

我根据使用 OFFSET 和 MATCH 的查找填充了许多列。我想添加错误处理，以便在每一列中显示适当的值 - 我如何在 Excel 和 Excel VBA 中执行此操作？

以下是我使用的公式的详细信息：

我将此公式作为整个范围 B2:E100 的数组公式输入

=OFFSET(CustomerMaster!$A1,MATCH(A2,customerNumberList,0)-1,2,1,4)

我使用 A2 列中的 customerNumber 在另一张表 CustomerMaster 中获取与客户相关的 4 列。

现在，如果出现错误，我希望所有 4 个单元格都有一些值，例如“未知”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:34:24.123

类似于以下内容

```
=IFERROR(OFFSET(CustomerMaster!$A1,MATCH(A2,customerNumberList,0)-1,2,1,4),"Unknown") 
```

将工作（至少如果你有 Excel 2007 或更高版本）。

# jquery - jQuery jsonp ajax 请求的查询字符串中的下划线是什么？

> ID：12709686
> 
> 赞同：17
> 
> 时间：2012-10-03T13:36:21.377
> 
> 标签：jquery, jsonp

当我查看来自 jsonp 请求（下面的客户端代码）的查询字符串时，有 2 个对象，一个需要在响应中使用的“回调”字符串（因此客户端代码指向成功处理程序）和一个带有关键`_`...这个下划线是干什么用的？我在任何文档中都找不到对此的任何引用，它似乎是某种类型的。

我认为它可能用于指向错误处理程序（在其上，与回调结合，或替换回调字符串中下划线后的数字），但它似乎不是。

```
url = 'http://localhost:11767/Handlers/MyHandler.ashx'; 
```

...

```
$.ajax({
    url: url,
    dataType: "jsonp",
    error: function (jqXHR, textStatus, errorThrown) {
        //...
    },
    success : function(d) {
        //...
    }
}); 
```

或者

```
 $.getJSON(url + "?callback=?", function(d) {
    }).success(function(d) {
        //...
    }).error(function(jqXHR, textStatus, errorThrown) {
        //...
    }).complete(function(d) {
        //...
    }); 
```

旁注以防万一这有助于任何人阅读：因为这是一个 jsonp 请求，只有在客户端发生异常时才会触发错误，例如超时或响应格式有问题（即不使用回调），为了克服这个问题，我总是在处理程序中记录并吞下异常，但给出一个标准的响应对象（所有响应都由它组成），它具有异常的状态属性和消息属性。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-03T18:26:42.090

您所指的数字是请求的日期时间戳。获取号码并使用浏览器的 JavaScript 控制台并输入：`alert(new Date(/*insert number here*/))`

您将收到带有日期/时间的警报。

编辑：

[这是jQuery.ajax](http://api.jquery.com/jQuery.ajax/)文档中关于 ajax 请求的片段：

> **cache**
> 默认值：true，对于 dataType 'script' 和 'jsonp'
> 为 false 如果设置为 false，它将强制浏览器不缓存请求的页面。将缓存设置为 false 还会将查询字符串参数 附加`"_=[TIMESTAMP]"`到 URL。

# google-maps - 如何使用 StyledMapType 添加多种样式的谷歌地图？

> ID：12709691
> 
> 赞同：4
> 
> 时间：2012-10-03T13:36:31.090
> 
> 标签：google-maps, google-maps-styled

[按照Google 的说明](https://developers.google.com/maps/documentation/javascript/styling#creating_a_styledmaptype)，我在 Google 地图中添加了一种额外的样式。但是，我没有成功添加一种以上的样式。这可以实现吗？如果是这样，怎么做？这是一个示例： http: [//jsfiddle.net/mikegoodstadt/A9zwa/3/](http://jsfiddle.net/mikegoodstadt/A9zwa/3/) 非常感谢您的任何建议，迈克

```
 var geocoder;
  var map;
  var MAPTYPE_1;
  var MAPTYPE_2;

  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlngLondon = new google.maps.LatLng(51.507335, -0.127683);
    var latlngMarrakech = new google.maps.LatLng(34.02590, -6.83640);

    var style1 = [
     {
       "stylers": [
         { "visibility": "on" },
         { "weight": 0.9 },
         { "gamma": 0.99 },
         { "lightness": -4 },
         { "hue": "#ffc300" },
         { "saturation": -14 }
       ]
     }
    ];
    var style2 = [
     {
       "stylers": [
         { "visibility": "on" },
         { "weight": 0.9 },
         { "gamma": 0.99 },
         { "lightness": -4 },
         { "hue": "#ff6e00" },
         { "saturation": -14 }
       ]
     }
    ];

    var mapOptions = {
      zoom: 12,
      center: latlngLondon,
      mapTypeControl: 1,
      panControl: 0,
      streetViewControl: 0,
      zoomControl: 0,
      mapTypeControlOptions: {
        mapTypeIds: [google.maps.MapTypeId.ROADMAP, MAPTYPE_1, MAPTYPE_2]
      },
    };

    map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);

    var mapType1 = new google.maps.StyledMapType(style1, {name: 'London'});
    var mapType2 = new google.maps.StyledMapType(style2, {name: 'Marrakech'});

    map.mapTypes.set(MAPTYPE_1, mapType1);
    map.mapTypes.set(MAPTYPE_2, mapType2);

  }

  function codeAddress() {
    var address = document.getElementById("search-address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Buscedad sin exito: " + status);
      }
    });
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:28:54.753

您需要声明/设置 setMapTypeIDs

```
 map.mapTypes.set('MAPTYPE_1', mapType1);
 map.setMapTypeId('MAPTYPE_1');

 map.mapTypes.set('MAPTYPE_2', mapType2);
 map.setMapTypeId('MAPTYPE_2'); 
```

# model - magento 模型正确放置方法

> ID：12709693
> 
> 赞同：2
> 
> 时间：2012-10-03T13:36:36.417
> 
> 标签：model, magento-1.7, magento

`model`我的问题是关于目录树内的正确使用和代码放置。我已经阅读了很多，但无法得出结论。以下是我检查过的一些链接：

*   [SQL 到 Magento 模型的理解](https://stackoverflow.com/questions/11169169/sql-to-magento-model-understanding)
*   [Magento 模型和 ORM 基础知识](http://alanstorm.com/magento_models_orm)
*   [各种数据收集](http://alanstorm.com/magento_collections)
*   以及该网站[codemagento.com上的几篇文章](http://codemagento.com/)

我有几个表及其相应的模型，其中包含资源和集合，例如：

```
magento
.
.
Model
  ├───Resource 
  │      ├─ first_model
  │      │           └─ collection.php
  │      ├─ second_model
  │      │           └─ collection.php
  │      ├─ first_model.php
  │      └─ second_model.php
  ├─ first_model.php
  └─ second_model.php 
```

所以，我的问题是：我想知道我必须在哪里编写我的方法。在位于*Model*文件夹中的 php 文件上，在*Resource*文件夹中或在*collection.php*文件中的 php 文件上？我正在研究我已安装的不同插件以找到一种模式，但我不明白该放在哪里。也许是微不足道的，遵循某种模式，但我无法通过谷歌搜索发现或找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:34:09.220

关于这个问题可能有几种观点，我不确定我的观点是否正确。但由于目前还没有人给出答案，我想即使是这样的意见也总比没有好。

因此，对于大多数模型，您有 3 个模型类。例如，让我们假设您有一个博客扩展，我们正在谈论模型文章：

1.  *集合*（**Yaroslav_Blog_Model_Resource_Article_Collection**类）最容易描述。您应该将所有应该适用于多篇文章的方法都放在这里，尤其是 SQL 表中的数据。例如：按日期排序文章的方法，或按作者过滤文章的其他方法等。

2.  *资源模型*（**Yaroslav_Blog_Model_Resource_Article**类） 该模型适用于单篇文章的 SQL 数据。例如，检查文章 url 键是否唯一的方法或类似的方法。任何适用于 SQL 级别数据的东西。

3.  *主模型*（**Yaroslav_Blog_Model_Article**类）。简而言之，您将其他所有内容都放在这里。该模型是最高抽象层，其职责是业务逻辑。你写了一个方法，生成带有文章的 RSS 提要？它的位置在这里（或者可能在控制器中）。一种写这篇文章读者的日志的方法？又是在这里。

所以简单地说：**除非你直接使用 SQL 查询，否则将你的方法放在主模型**中。我希望这是有道理的。

# jquery - jQuery 覆盖问题

> ID：12709696
> 
> 赞同：0
> 
> 时间：2012-10-03T13:36:41.893
> 
> 标签：jquery

以下代码允许我在单击#boxclose_4 时关闭覆盖，但是我也希望能够在覆盖之外单击以将其关闭。

```
 $('#boxclose_4').click(function(){
          box_4.animate({'top':'-400px'},500,function(){
             overlay2.fadeOut(1000);
               });
    }); 
```

如果我在 box_4 下降时添加 body ('#boxclose_4, body')，则覆盖消失并迅速出现。

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:01:52.180

您想将其添加`.overlay`为事件，而不是`body`

```
$('#boxclose_4, .overlay').click(function(){
      box_4.animate({'top':'-400px'},500,function(){
         overlay2.fadeOut(1000);
           });
}); 
```

[http://jsfiddle.net/YxhWx/1/](http://jsfiddle.net/YxhWx/1/)

# python - OR 运算符比较 None 和 bool

> ID：12709698
> 
> 赞同：1
> 
> 时间：2012-10-03T13:36:47.307
> 
> 标签：python

我在我的一个函数中发现了一个特定的错误，其中用于按位比较 OR 的 args 的顺序似乎很重要：

```
In: None or False
Out: False

In: False or None
Out: None 
```

使用 Python 2.7.2 和 IPython 0.10.2 对此进行了检查。

我可以确保，如果一个元素是无，确保他是比较的第一个参数，就像这样

```
if a==None:
    a or b
else:
    b or a 
```

但是谁能解释一下为什么在 OR 比较中更改顺序会影响输出？这是 Python 特有的吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T13:38:11.677

从输入`help("or")`：

> 该表达式`x or y`首先计算*x*；如果*x*为真，则返回其值；否则，评估*y*并返回结果值。

在`None or False`中，None 不正确，因此返回 False。

在`False or None`中，False 不正确，因此返回 None。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:44:36.847

帝斯曼已经解释了`or`运营商的工作。您是否期望结果是布尔值，所以`None or False`还是`False or None`总是`False`？如果是这样，那么您需要明确说明并使用其中`bool(None or False)`之一，或者如果您有很多要检查的，那么`any([None, False])`等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:57:03.650

我从未见过逻辑运算符的顺序`or`无关紧要的语言，除非你见过*这样*的语言，否则 python 的行为是正常的。

`or`从左到右处理语句，直到其中一个为真（或到达结尾）。

`and`从左到右处理语句，直到其中一个为 False（或到达结尾）。

按位或运算符（在 Python 中，与大多数语言一样）是管道“|”。

# java - 如何制作电子邮件文本框格式

> ID：12709702
> 
> 赞同：-6
> 
> 时间：2012-10-03T13:36:54.480
> 
> 标签：java

我有一个应用程序，它有一个带有所有相关文本框和组合框和按钮的注册框架。现在我的问题是，当我在电子邮件文本框中输入电子邮件时，它保存在我的数据库中，不管我输入了什么废话。我想确保用户输入正确格式的电子邮件，例如“example@blhablha.com”，即使此电子邮件不存在，但至少看起来像是使用 java 的电子邮件地址。

提前高度感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:39:08.357

验证电子邮件地址确实很复杂，您仍然可以在网上找到一堆正则表达式来检查某些重要的事情，例如这个`^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$`。不幸的是，我认为没有*最终*的正则表达式可以捕捉到您在电子邮件地址中可以找到的所有“无意义”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:39:47.717

您需要查看 javascript 电子邮件验证，请尝试遵循此[http://www.4guysfromrolla.com/webtech/052899-1.shtml](http://www.4guysfromrolla.com/webtech/052899-1.shtml)

# eclipse - 带有 Vim 的 Mac 上的 Team Foundation 服务器

> ID：12709703
> 
> 赞同：2
> 
> 时间：2012-10-03T13:36:55.380
> 
> 标签：eclipse, macos, vim, tfs

我在 Mac 上使用 Vim 进行前端开发，最近受雇于使用 Team Foundation Server 作为版本控制系统的公司。

我不想不得不切换到在 Windows 上使用 Visual Studio，因为我已经习惯了 Vim 和 Mac。

我发现[了这一点](http://www.microsoft.com/en-us/download/details.aspx?id=4240)，并希望这将是一个可能的解决方案。我仍然想避免在 Eclipse 中编辑代码。但是我不介意打开 Eclipse 来做版本控制。

我对 Eclipse 和 Team Foundation Server（一般不是 VCS）非常不熟悉，我需要一些关于如何实际使用它的建议。我能够连接到服务器并找到我必须处理的项目，但是从这里我迷路了。[这](http://cl.ly/image/3u0M1Q2N0L1x)是我被困在的窗口。

任何有类似情况的人可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:35:19.483

我认为您已经完成了艰难的工作，首先您应该能够安全地忽略工作项并构建“文件夹”，除非有人明确告诉您使用工作项，此时他们可以向您展示您需要知道的内容与 Visual Studio 中的工作方式完全相同。

如果您双击 Source Control 文件夹，它将打开一个新窗口，其中将显示源“树”。为了能够获取、签出源文件并将源文件添加到树中，您需要[设置一个工作区](http://msdn.microsoft.com/en-us/library/gg490753%28v=vs.100%29.aspx)。完成此操作后，您可以获取代码并签出。

随处使用 Team Explorer 您还可以选择在 Mac 终端中使用[tf 命令行。](http://msdn.microsoft.com/en-us/library/hh873092.aspx)这将消除对日食的需要。（我假设作为 Vim 用户你不害怕使用终端）

另一种选择可能是[svnBridge](http://svnbridge.codeplex.com/)但是我认为如果您使用的是 Mac，则需要服务器版本，这需要在 TFS 应用程序服务器中安装一个站点，这可能不是一个选项。

最后[，TFS 现在提供与 GIT 集成的支持](http://blogs.msdn.com/b/bharry/archive/2012/08/13/announcing-git-integration-with-tfs.aspx)。

# javascript - 什么时候在 JavaScript 函数的末尾添加 return 是合适的？

> ID：12709710
> 
> 赞同：4
> 
> 时间：2012-10-03T13:37:21.207
> 
> 标签：javascript, jquery

我看到一些开发人员在他们的 JavaScript 函数的末尾放置了一个 return，如下所示：

```
$(".items").each(function(){
    mthis = $(this);
    var xposition = some .x() position value;
    if(xposition < 0){
        mthis.remove();
        return;
    }
}); 
```

还需要退货吗？我知道`return false`提前取消了循环，我知道`return x`，返回一个值，但是刚刚返回？？？这意味着什么？

抱歉 - 我忘了在代码的最后加上 end }。返回是在 if 条件下。

* * *

**新更新 - 刚刚发现循环的目的是取消进入循环的第 n 个 .item。所以 return false 是我对简单 return 的替代；（这意味着无论如何都是未定义的）。感谢大家的帮助！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:42:24.343

在函数结束时返回而不继续它并没有真正做任何事情。然而，返回“this”允许方法链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:46:51.577

您的示例特定于如何`jQuery.each`处理循环函数的返回值。从文档：

> 通过使回调函数返回 false，我们可以在特定迭代中打破 $.each() 循环。返回非 false 与 for 循环中的 continue 语句相同；它将立即跳到下一次迭代。

所以你有了它，返回任何东西都`false`没有区别，它只会继续下一次迭代。`false`，但是，打破了循环。

请注意，`return;`与 完全相同`return undefined;`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:51:37.217

问题是你的开括号和闭`{ }`括号没有对齐，所以根据哪个是正确的，这会有所不同。如果 if 的右大括号在 return 之后，那么这将像`continue`常规 for 循环中的 a 一样。

```
$(".items").each(function(){
    mthis = $(this);
    var xposition = some .x() position value;
    if (xposition < 0) {
        mthis.remove();
        return;
    }
} 
```

事实证明，`continue`for 循环末尾的 a 也是隐式的，所以这并没有真正起到作用。

当然，如果您的问题更具理论性，答案是通常它不会产生影响：

```
function doSomething() {
    alert("Hello, world");
    return; //purely a matter of preference
} 
```

`return`在这里，由于位于代码块的末尾，即使没有直接调用 ，该方法也会隐式返回；在某些情况下，它可以用作指示您处于函数末尾的指示符，特别是在有很多嵌套的情况下。如果不是在底部，那肯定会有所作为，因为之后`return;`不会执行任何操作。否则，差异纯粹是风格上的。为您节省了几个字符，当然可以将其排除在外！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T13:52:21.003

退货行为；函数中的任何地方都与代码到达函数末尾时完全相同，调用者收到未定义。

在该代码中，它与条件一起使用。我不得不假设您没有显示完整的代码。

此方法通常用于在不满足前提条件时跳转到函数的末尾，因为它可能比五个缩进更具可读性，每个缩进都有另一个条件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T13:39:42.367

这只是一种结束函数执行的方法，而不必选择适当的返回值。在函数结束时，它真的没有什么区别。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T13:42:22.673

就像`return false`，它会提前取消块（在本例中为函数）。返回值将是`undefined`.

在函数的末尾，它相当于根本不使用 return 语句，但是您的示例在我看来不像函数的结尾。

**编辑：**只是为了让它更清楚一点：这个特定的 return 语句位于周围`if`子句的末尾，而不是整个函数。换句话说，`if`子句的条件指定了函数应该中途终止的情况。

**编辑2：**通过“函数”，我指的是内部的匿名函数。`return;`, 等价于`return undefined;`, 确实会导致`jQuery.each()`继续下一项。（此外，我似乎误认为函数中有更多代码；鉴于 OP 对代码示例的编辑，它确实看起来像一个毫无意义的返回语句。）

# django - Django：在运行时将参数传递给 ModelField

> ID：12709712
> 
> 赞同：0
> 
> 时间：2012-10-03T13:37:23.693
> 
> 标签：django, django-models

我对 Python + Django 还很陌生，我遇到了以下问题。我创建了一个自定义 ModelField，例如：

```
class MyField(models.TextField):

    def __init__(self, *args, **kwargs):
        super(MyField, self).__init__(*args, **kwargs)

    def pre_save(self, model_instance, add):
        # custom operations here
        # need access to variable xyz 
```

使用此字段的模型如下所示：

```
 class MyModel(models.Model):
     my_field = MyField()

     def __init__(self, model, xyz, *args, **kwargs):
         self.instance = model
         # how to pass xyz to ModelField before pre_save gets called?
         self.xyz = xyz 

     def save(self, *args, **kwargs):
         if self.instance:
             self.my_field = self.instance 
```

问：就像评论中所说的那样，有没有办法在运行时将变量传递给 ModelField 实例，最好是在调用 my_field.pre_save() 之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:16:10.007

你不需要做任何事情来传递`xyz`变量——它是模型上的一个实例变量，所以它已经存在于`model_instance`传递给的变量中`pre_save()`

```
class MyField(models.TextField):

    def pre_save(self, model_instance, add):
        ...
        # Access model_instance.xyz here
        ...
        # Call the superclass in case it has work to do
        return super(MyField, self).pre_save(model_instance, add) 
```

# facebook - ASP Classic：无需登录即可自动发布 twitter 和 facebook

> ID：12709714
> 
> 赞同：3
> 
> 时间：2012-10-03T13:37:35.577
> 
> 标签：facebook, twitter, asp-classic, posting

在工作中我有一个任务（顺便说一句，我们必须使用 ASP Classic）：当用户发布博客时，应该在用户的 Facebook 时间线和他的推特上自动发布指向该博客的链接。我让一切正常，但有一个问题：用户需要登录才能发帖。如果他已登录，我已经进行了检查，如果没有，他必须登录。但我需要避免登录步骤并使其自动（通过将用户的用户名和密码作为发送到 twitter/facebook 的数据的一部分发送）或类似的东西），但我无法弄清楚如何做到这一点，或者它是否有可能。

有任何想法吗？非常感谢任何帮助。

PS：对于 twitter 部分，我使用了[http://scottdesapio.com/VBScriptOAuth/](http://scottdesapio.com/VBScriptOAuth/) 对于 facebook 部分，我使用了以下组合：[http ://snipplr.com/view/61108/facebook-app-login--authorization-entirely -客户端/](http://snipplr.com/view/61108/facebook-app-login--authorization-entirely-clientside/)

一切正常，但是否可以自动化用户的登录部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T07:00:04.280

如果我没有错，那么您在 facebook 中为当前浏览器登录的用户未授权您的应用程序。

我认为您应该尝试使用谷歌搜索“如何授权用户进入应用程序”。或者

如果你不介意我给你直接的 URL 去你的应用程序的设置页面： [https://developers.facebook.com/apps](https://developers.facebook.com/apps)然后去你的应用程序然后从左侧栏去角色和然后从页面顶部单击测试用户选项卡，然后单击添加按钮，它将弹出一个弹出窗口来添加用户。

在应用程序中，您必须添加测试用户以进行测试，并且必须为添加的测试用户登录，因此添加的用户将获得该应用程序的授权，您将能够进行测试。

谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:30:17.163

最后我设法使这两件事自动化...... Twitter的问题是我没有在会话中存储请求令牌，这就是为什么我得到“无法验证你”错误。不记得我在 Facebook 上做错了什么（一些同事帮了我），但我想我没有发出正确的 http 请求……所以答案是：是的，可以自动发布到 Twitter 和没有用户登录的 Facebook。

# .net - 带有 PostgreSQL 的实体框架 5.0

> ID：12709718
> 
> 赞同：8
> 
> 时间：2012-10-03T13:37:57.230
> 
> 标签：.net, entity-framework, postgresql

我想将 Entity-Framework 5.0 用作带有 PostgreSql 数据库的 O/R 映射器。我已经阅读了很多 HowTos，但我仍然卡住了。也许我不明白 EF 背后的全部想法。

**我想要的是：**

*   我想自己写代码。然后将一些属性添加到属性和类中，以告诉 EF 如何映射对象（就像我对 NHibernate 所做的那样）。
*   我不想从我的模型生成数据库 - 我只想使用现有的。

**示例模型：**

```
[Table("device")]
public class Device
{
    [Key]
    public int Id { get; set; }

    [StringLength(255)]
    public string Identifier { get; set; }
}

[Table("customer")]
public class Customer
{
    public Customer()
    {
        this.Devices = new List<Device>();
    }

    [Key]
    public int Id { get; set; }

    [StringLength(255)]
    public string Name { get; set; }

    // attribute required?
    public List<Device> Devices { get; set; }
} 
```

**我做了什么：**

*   写了上面的代码
*   创建了一个 DatabaseContext 类
*   在 app.config 中添加了 DbProviderFactories 和 connectionStrings
*   用 EdmGen.exe 工具生成 ssdl、msl、csdl 文件并复制到项目中（这些文件在 bin 文件夹中也有）

**数据库上下文：**

```
public class DatabaseContext : DbContext
{
    static DatabaseContext()
    {
        Database.SetInitializer<DatabaseContext>(null);
    }

    public DatabaseContext()
        : base("PostgreSQL")
    {

    }

    public DbSet<Customer> Customers { get; set; }
    public DbSet<Device> Devices { get; set; }
} 
```

**应用程序配置：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>

  <system.data>
    <DbProviderFactories>
      <remove invariant="Npgsql" />
      <add name="Npgsql Data Provider" invariant="Npgsql" support="FF" description=".Net Framework Data Provider for Postgresql Server" type="Npgsql.NpgsqlFactory, Npgsql, Version=2.0.12.0, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7" />
    </DbProviderFactories>
  </system.data>

  <connectionStrings>
    <add name="PostGreSQL" 
         providerName="System.Data.EntityClient" 
         connectionString="metadata=.;provider=Npgsql;provider connection string=&quot;Server=asdf;Port=5432;User Id=asdf;Password=asdf;Database=asdf;enlist=true&quot;" />
  </connectionStrings>

</configuration> 
```

**测试：**

```
using (DatabaseContext context = new DatabaseContext())
{
    if (context.Database.Exists())
    {
        Console.WriteLine("yep");
    }
    else
    {
        Console.WriteLine("nope");
    }

    foreach (Customer c in context.Customers)
    {
        Console.WriteLine("Name={0}", c.Name);
    }
}

Console.ReadLine(); 
```

**输出和错误：**

“是的” .. 这意味着数据库存在。但是当访问 context.Customers 属性时，我得到以下异常：

```
The entity type Customer is not part of the model for the current context. 
```

**堆栈跟踪：**

```
at System.Data.Entity.Internal.InternalContext.UpdateEntitySetMappingsForType(Type entityType)
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
   at EF5.Program.Main(String[] args) in c:\Users\tba\Documents\Visual Studio 2012\Projects\EF5\EF5\Program.cs:line 26
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

**我不明白的是：**

*   如果 DataAnnoations 可用，ssdl、msl、csdl 文件有什么用？
*   为什么 Customer 类不是当前上下文模型的一部分？

当使用 EdmGen.exe 工具时，它还会生成一个包含 ObjectContext 和实体类的 ObjectLayer.cs 文件。问题在于，实体类派生自 EntityObject。如果我想将实体类用作业务类，这是一个严重的问题，因为这些类不能从任何其他类派生。

此外，我不明白为什么它会生成一个 ObjectContext.. 我发现的每一个 HowTo 都使用 DbContext 类。

**EdmGen 工具生成的实体客户类：**

```
/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmEntityTypeAttribute(NamespaceName="EF5", Name="Customer")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class Customer : EntityObject 
```

我很困惑 ：-）

**编辑：**

*   我没有使用 ObjectLayer.cs 文件！由于我上面提到的继承问题，我也不想使用它。部分 Customer 类只是显示 EdmGen 工具生成内容的示例。
*   当我删除 csdl、msl 和 ssdl 文件时，我收到以下错误：

    ```
    At least one SSDL artifact is required for creating StoreItemCollection. 
    ```

*   当我从 app.config 中的 connectionString 属性中删除 metadata 关键字时，我收到以下错误：

    ```
    Some required information is missing from the connection string. The 'metadata' keyword is always required. 
    ```

**解决方案：**

我终于弄清楚它是如何工作的。app.config 中的 connectionString 错误。正确的连接字符串：

```
<connectionStrings>
    <add name="PostgreSQL"
        connectionString="Server=asdf;Port=5432;User Id=asdf;Password=asdf;Database=asdf;"
         providerName="Npgsql" />
</connectionStrings> 
```

我从 connectionString 中删除了元数据、提供程序和提供程序连接字符串属性。就像[Brice](https://stackoverflow.com/users/475031/brice)所说，元数据文件不是必需的，所以我只是删除了它们。

Device 和 Customer 类的 Table-Attribute 也需要指定**schema**。像这样：

```
[Table("customer", Schema="public")]
public class Customer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:29:12.200

您不应该生成 ssdl、msl、csdl 文件。仅当您要使用设计器时才需要这些文件。删除这些文件和生成的 ObjectLayer.cs。

您也不应该使用 EntityClient 连接字符串。将您的连接字符串更新为以下内容。

```
<connectionStrings>
  <add name="PostGreSQL"
       providerName="Npgsql"
       connectionString="Server=asdf;Port=5432;User Id=asdf;Password=asdf;Database=asdf;enlist=true" />
</connectionStrings> 
```

# android - SDL 初始化失败，原因是：ubuntu 12.04 LTS 中没有可用的视频设备

> ID：12709719
> 
> 赞同：1
> 
> 时间：2012-10-03T13:37:57.077
> 
> 标签：android, eclipse, ubuntu-12.04, avd

我最近将我的 ubuntu 10.04 LTS 升级到了 ubuntu 12.04 LTS。

AVD 之后在我的日食中停止工作。

错误信息：

```
[2012-10-03 16:16:11 - xyzapp] Android Launch!
[2012-10-03 16:16:11 - xyzapp] adb is running normally.
[2012-10-03 16:16:11 - xyzapp] Performing com.xyz.XYZSampleActivity activity launch
[2012-10-03 16:16:11 - xyzapp] Automatic Target Mode: Preferred AVD 'test' is not available. Launching new emulator.
[2012-10-03 16:16:11 - xyzapp] Launching a new emulator with Virtual Device 'test'
[2012-10-03 16:16:11 - Emulator] SDL init failure, reason is: No available video device 
```

[我在这篇文章](https://stackoverflow.com/questions/4841908/sdl-init-failure-reason-is-no-available-video-device)中尝试了一个答案

> sudo apt-get install libsdl1.2debian:i386

但我无法成功。

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Note, selecting 'libsdl1.2debian-oss:i386' for regex 'libsdl1.2debian'
Note, selecting 'libsdl1.2debian-alsa:i386' for regex 'libsdl1.2debian'
Note, selecting 'libsdl1.2debian-arts:i386' for regex 'libsdl1.2debian'
Note, selecting 'libsdl1.2debian-pulseaudio:i386' for regex 'libsdl1.2debian'
Note, selecting 'libsdl1.2debian-all:i386' for regex 'libsdl1.2debian'
Note, selecting 'libsdl1.2debian-esd:i386' for regex 'libsdl1.2debian'
Note, selecting 'libsdl1.2debian-nas:i386' for regex 'libsdl1.2debian'
The following packages were automatically installed and are no longer required:
  lib32bz2-1.0 cups-pk-helper libdb5.1-java-gcj libnet-daemon-perl libswscale0 libpam-winbind libktnef4 ttf-umefont tracker-miner-fs guile-1.6 libgraphicsmagick3 realpath libdb4.7-java gnome-exe-thumbnailer libkxmlrpcclient4 libpolkit-qt-1-0 libaqbanking29-plugins-qt
  appmenu-gtk tracker lib32ncurses5 libxine1-x tracker-utils kpackagekit untex libaqbanking29-plugins libmodplug0c2 libdb4.7-java-gcj lib32tinfo5 g++-4.4 openoffice.org-l10n-en-gb packagekit-backend-aptcc libasm2-java tracker-gui libboost-program-options1.40.0 kdelibs5
  libdbi-perl libaqofxconnect5 libctemplate0 libmagick++2 libiso9660-7 guile-1.6-libs libtracker-extract-0.14-0 libcapi20-3 wv libexiv2-6 libtrackerclient0 libdvbpsi5 libmysqlclient16 libsyndication4 libtracker-gtk0 libguile-ltdl-1 libc6-i386 kdesudo libdb5.1-java
  libcommons-collections-java lib32gcc1 appmenu-qt libx264-85 gir1.2-gconf-2.0 lib32asound2 lib32nss-mdns wine-gecko1.4 libqgpgme1 libwv-1.2-3 libwv-1.2-4 virtuoso-nepomuk libreadline5 ttf-symbol-replacement appmenu-gtk3 libmatroska0 libkrossui4 tracker-miner-evolution
  libiptcdata0 libdbd-mysql-perl libpostproc51 tracker-extract libxine1-console libaqhbci17 libgwenhywfar47 libwildmidi0 openoffice.org-l10n-common libkblog4 libzip1 install-package libzip2 libqt4-assistant gdebi-kde libxine1-misc-plugins libplrpc-perl libkimproxy4
  kdepimlibs5 update-manager-kde libattica0 guile-1.6-slib libsoundtouch1c2 libtracker-miner-0.14-0 libmpg123-0 libid3tag0 lib32z1 kdebase-runtime lib32stdc++6 odt2txt winbind libservlet2.4-java-gcj fonts-droid libaqbanking-plugins-libgwenhywfar47 libtracker-sparql-0.14-0
  libaxis-java-gcj libaqbanking29 python-pysqlite2 libebml0 gir1.2-panelapplet-4.0 libmpcdec3 libxine1-bin libkutils4 libqbanking8 ttf-droid libxine1-ffmpeg libgpgme++2 libstdc++6-4.4-dev packagekit-backend-apt libxine1
Use 'apt-get autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T06:47:58.653

问题在于我的 apt-get 存储库。这就是我为使其正常工作所做的工作。

*   我将站点**http://archive.canonical.com/**添加到存储库列表中。

*   我更新了apt-get。

*   我安装了**libsdl1.2debian:i386**。

> ```
> sudo apt-add-repository "deb http://archive.canonical.com/ $(lsb_release -sc) partner"    
> sudo apt-get update    
> sudo apt-get install libsdl1.2debian:i386 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-13T23:25:52.577

指定`-no-window`选项解决了我同样的问题。

`emulator -avd <avd_name> -no-window`

根据[从命令行控制模拟器](https://developer.android.com/studio/run/emulator-commandline.html)的文档：

> -无窗| 禁用模拟器图形窗口显示。

# jquery - Jquery Masking UI问题

> ID：12709724
> 
> 赞同：1
> 
> 时间：2012-10-03T13:38:06.543
> 
> 标签：jquery, jquery-ui

我实际上需要使用格式化文本在我的 UI 中显示 SSN。所以我想知道我们可以在上面应用 jquery 掩码方法。因为我只听说我们可以在输入类型上应用掩码。所以请回复我。这对我有很大帮助。

感谢 Ankit

# iphone - 应用程序不会在 iPhone 模拟器上旋转

> ID：12709731
> 
> 赞同：1
> 
> 时间：2012-10-03T13:38:17.620
> 
> 标签：iphone, objective-c, ios, xcode, simulator

我想用 iPhone 5 分辨率测试我的应用程序，所以我正在使用模拟器。我的应用在支持的设备方向中有纵向和 2 个横向方向，并且允许旋转的 viewControllers 已`shouldAutorotateToInterfaceOrientation`设置为 YES。然而，当我在模拟器中旋转设备时，它不会像在设备上那样旋转。现在我只是在使用标准的 iPhone 4 模拟器。

编辑：这是我设置 VC 的代码。

```
UIViewController *vc = [[UIViewController alloc] init];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:vc];
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window makeKeyAndVisible];
    [self.window addSubview:self.navigationController.view];

self.loadingWood = [[UIImageView alloc] init];
[vc.view addSubview:self.loadingWood]; 
```

然后不久之后：

```
self.timeline = [[JTimelineViewController alloc] init];
[self.navigationController setViewControllers:[NSArray arrayWithObject:self.timeline]]; 
```

这对于应用程序启动时的视觉效果是必要的。

编辑2：

我现在有这个工作。我现在面临的问题是，尽管我的一个视图控制器说明了这一点，但它仍然会在 iPhone 模拟器上进行任何旋转时旋转：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);

} 
```

编辑 3：我的手机正在运行 iOS5。模拟器运行iOS6。这是一个可能的原因。删除横向左和横向右作为支持的方向意味着根本没有模拟器旋转，但我的 iOS5 iPhone 4 继续正常旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:48:49.967

我过去不得不处理类似的事情。发生的事情是只有应用程序的主视图控制器接收旋转通知和委托调用。有一些例外，比如 UINavigationController，会将这些事件传递给它们当前的视图控制器。

因此，例如，如果您的 AppDelegate 类加载了一个视图控制器并且该视图控制器推送了第二个视图控制器，则该第二个视图控制器将不会收到旋转通知。

我建议您使用 UINavigationController 将 UIViewControllers 推送到显示器上，因为 UINavigationController 会传递旋转委托调用和通知。

*编辑*

在 Xcode 的首选项中，在下载选项卡下，您可以选择下载以前的模拟器，iOS 5 和 iOS 5.1。下载这些并将您的目标 iOS 版本设置为 5.0（或 5.1），然后从设备列表中选择正确的模拟器。看看您是否遇到与 iOS 6 模拟器相同的问题。如果你明白了，那么 iOS 5 和 iOS 6 处理 UINav 的方式肯定是不同的。

`setViewControllers`此外，使用和之间的区别在于`pushViewController`将`pushViewController`视图控制器添加为父视图控制器的子视图，这使其响应委托调用，包括旋转。从 iOS 5 开始，每个 UIViewController 现在都有一个方法，该方法`addChildViewController`为类提供该功能`UIViewController`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:44:13.060

确保您正在设置根视图控制器，如下所示：

```
 self.window.rootViewController = self.navigationController; 
```

# android - 水平滚动视图内的 ViewPager

> ID：12709738
> 
> 赞同：0
> 
> 时间：2012-10-03T13:38:37.953
> 
> 标签：android, android-viewpager, horizontalscrollview

我在 Horizo​​ntalScrollView 中有 ViewPager。当我在第一页时，我想将运动事件从 ViewPager 发送到 Horizo​​ntalScrollView

```
private final SimpleOnGestureListener viewPagerListener = new SimpleOnGestureListener() {

    @Override
    public boolean onScroll(final MotionEvent e1, final MotionEvent e2,
            final float distanceX, final float distanceY) {

        final RevealControl reveal = (RevealControl) getActivity()
                .findViewById(R.id.revealView);

        if (viewPager.getCurrentItem() == 0 && distanceX < 0) {
            return reveal.dispatchTouchEvent(e2);
        }

        return super.onScroll(e1, e2, distanceX, distanceY);
    }
}; 
```

我得到了上面的功能，但有时我的 scrollView 滚动很多。也许还有其他方式来调度我的事件。

# javascript - Javascript - 将变量添加到代码字符串

> ID：12709741
> 
> 赞同：0
> 
> 时间：2012-10-03T13:38:45.923
> 
> 标签：javascript

我意识到我对 javascript 的使用有多糟糕 :(

我有这个：

```
function getUrlVars() {
var vars = {};
var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,     
function(m,key,value) {
    vars[key] = value;
});
return vars;
}

var theidis = getUrlVars()["id"]; 
```

和

```
$.tzPOST = function(action,data,callback){
$.post('php/ajax.php?id='+theidis,'&action='+action,data,callback,'json');
}

$.tzGET = function(action,data,callback){
$.get('php/ajax.php?id='+theidis,'&action='+action,data,callback,'json');
} 
```

第一个正确获取 ?id=value 参数。我用警报（theidis）进行了测试。

我想做一件简单的事情-如果这很愚蠢，对不起-.-我已经这样做了很长时间，以至于我开始监督事情了。

我希望将 ?id=value 添加到 php/ajax.php 中。我尝试了上述方法，但似乎不起作用。我也尝试添加它。

先感谢您。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:41:40.417

您的`$.get`电话指定

```
'php/ajax.php?id='+theidis, '&action='+action, data ... 
```

看起来您正在传递数据两次。要么`&action='+action`应该是你的数据参数，要么`data`. 您是要将该`&action`部分连接到 URL 中吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:55:33.340

你可能的意思是：

```
$.tzGET = function(action,data,callback){
    $.get('php/ajax.php?id='+theidis + '&action='+action,data,callback,'json');
} 
```

改签`,`就`+`签。

注意！：`data`如果您将字符串连接到 URL 的查询字符串，则应为 null。

# iphone - iPhone 4 和 5 不同的分辨率：问题

> ID：12709743
> 
> 赞同：2
> 
> 时间：2012-10-03T13:38:56.017
> 
> 标签：iphone, xcode, ios-simulator, resolution

对不起，也许是因为我不是英语，我不知道，但我找不到任何资源来回答几个问题；也许我使用的词不正确..

我想了解更多有关 iPhone 4 和 5 不同分辨率的信息。

首先：如果我开发一个针对 iPhone 4 分辨率优化的应用程序，我如何告诉我的 iPhone 模拟器模拟“信箱”图形？我想看看它的外观，但我还没有 iPhone 5

第二：如果我为 iPhone 5 分辨率设计应用程序，iPhone 4 上会发生什么？我的意思是，iPhone 4 用户看到了什么？

你能推荐我一些文章或类似的东西来了解更多关于这些问题的信息吗？谢谢

***编辑***

我做对了！

使应用程序在 IOS 6 + iPhone 5 上以信箱模式运行的唯一因素是启动屏幕的 Default-568h@2x.png 文件的存在。

我重新启动 iPhone5 和 Xcode，清理项目并再次编译。有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:45:12.323

第一：每种 iPhone 类型都有不同的模拟器。要在它们之间进行更改，请打开模拟器。转到硬件菜单栏项，然后在设备下更改您想要的。

![在此处输入图像描述](../Images/3e69d2c272991453d4581b756ce83b65.png)

第二：您应该设计可缩放的界面，但是您可以确定是否有更大的屏幕并更改它在 iPhone 5 上的外观。如果您使用标准组件，Xcode 将尝试升级所有内容以使其看起来正确。但是，您应该进行测试以确保它在每台设备上看起来都符合您的要求。

# html - 聊天框中的 css

> ID：12709744
> 
> 赞同：0
> 
> 时间：2012-10-03T13:38:56.327
> 
> 标签：html, css

我有一个聊天程序，我的目标是，当有人键入并发送文本时，我希望文本从底部显示。像任何其他聊天框架一样。为此，我编写了以下 html/css 结构。当有人发送文本时，这里的“li”标签是动态创建的。

问题：

问题是如果我从“.chatbox ul”中删除“height:100%”，则聊天框中的文本从底部开始。但在那种情况下，我看不到任何滚动条。但我需要看到一个滚动条。而且，如果我在“.chatbox ul”中保留“height:100%”，我会看到一个滚动条，但聊天框中的文本从顶部开始。

我的目标是有一个滚动条，文本也应该从底部开始。我将如何实现这一点..？？任何帮助家伙？

```
<div class="chatBox">
<ul id="messages" class="chatText">
    <li>
    <div class="chatterName">maverick </div>
    <div class="chatterMessage"> hi</div>
    <div class="clear"></div>
    </li>

    <li>
    <div class="chatterName">johny</div>
    <div class="chatterMessage"> hello</div>
    <div class="clear"></div>
    </li>
</ul> 
```

CSS：

```
.chatBox
{
background-image: url('../images/DefaultitemBg.gif');
font-family: Verdana;
font-size: 14px;
color: #333333;
border: 1px double #FFFFFF;
padding: 5px;
margin: 10px;
width:76%;
height:600px;
position:relative;
border: 1px solid #E9E9E9;
overflow:auto;
float:left;

}
.chatBox ul
{
list-style-type: none;
padding: 0px;
margin: 0px;
position:absolute;
overflow:auto;
bottom:0;
height:100%;
}
.chatBox ul li
{
border-bottom-style: solid;
border-bottom-width: 1px;
border-bottom-color: #F2F2F2;
margin-bottom: 0px;
}
.chatterName
{
width: 120px;
background-color: #EEEEEE;
color: #333333;
float: left;
border-right-style: solid;
border-right-width: 1px;
border-right-color: #CCCCCC;
height: 30px;
border-bottom-style: solid;
border-bottom-width: 1px;
border-bottom-color: #E6E6E6;
}
.chatterMessage
{
width: 91%;
padding-left:4px;
color: #333333;
float:left;
min-height:30px;
border-bottom-style: solid;
border-bottom-width: 1px;
border-bottom-color: #EFEFEF;
}
.chatText
{
bottom: 0;
left: 0;
border-top-style: 0;
border-right-style: 0;
border-bottom-style: 1;
border-left-style: 0;
border-bottom-width: 1px;
border-bottom-color: #E6E6E6;

width:100%; 
```

}

编辑：

[在这里看到它](http://screencast.com/t/uXT0rfhue6U7)

如果你仔细看，你会注意到当我在聊天框中输入文本时，从顶部开始，以前的文本正在消失。我想要的是一个滚动条，以便用户可以看到以前的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:47:10.950

您可以使用 javascript 滚动到底部：

```
document.getElementById('messages').innerHTML += '<li>'+your message here+'</li>'
window.scrollTo(0, document.body.scrollHeight) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:28:54.223

这应该解决它：

使用`max-height`而不是`height`

```
.chatBox ul
{
list-style-type: none;
padding: 0px;
margin: 0px;
position:absolute;
overflow:auto;
bottom:0;
max-height: 100%;
/*height:100%;*/
} 
```

工作示例：http: [//jsfiddle.net/pt43J/1/](http://jsfiddle.net/pt43J/1/)

# javascript - AngularJS路由在IE7中不起作用

> ID：12709745
> 
> 赞同：20
> 
> 时间：2012-10-03T13:38:57.880
> 
> 标签：javascript, internet-explorer-7, angularjs

我一直在按照教程在我的应用程序中实现路由

[http://docs.angularjs.org/tutorial/step_07](http://docs.angularjs.org/tutorial/step_07)

我无法让我的版本在 IE7 中运行，并且在花了一段时间试图找出我错过/做错了什么之后，我注意到该示例不起作用。

[http://angular.github.com/angular-phonecat/step-7/app/](http://angular.github.com/angular-phonecat/step-7/app/)

有谁知道如何让它工作？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-15T07:41:28.760

好的，我遇到了同样的问题，所以我开始了赏金，但在那之后我找到了可行的解决方案（至少对我来说）：

*   使用 HTML5 垫片
*   使用 JSON2.js
*   将所有这些属性添加到您的 html 节点：

    class="ng-app:myapp" id="ng-app" ng-app="myapp" xmlns:ng="http://angularjs.org"

（其中*myapp*实际上是您的应用名称）

回顾一下，这是我的 IE7/8/9 工作 HTML 页面：

```
<!DOCTYPE html>
<html lang="en" class="ng-app:myapp" id="ng-app" ng-app="myapp" xmlns:ng="http://angularjs.org">
  <head>
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lte IE 8]>
      <script>
        document.createElement('ng-include');
        document.createElement('ng-pluralize');
        document.createElement('ng-view');
        document.createElement('ng:include');
        document.createElement('ng:pluralize');
        document.createElement('ng:view');
      </script>
    <![endif]-->
    <!--[if lt IE 8]>
      <script src="js/json2.js"></script>
    <![endif]-->
  </head>
  <body>
    <div ng-view></div>
  </body>
</html> 
```

# c# - 如何将长 HTML 文件拆分为单独的相互链接的页面，例如第 1 页、第 2 页、第 3 页

> ID：12709752
> 
> 赞同：1
> 
> 时间：2012-10-03T13:39:17.257
> 
> 标签：c#, javascript, jquery, webforms

如果 div 标签的高度超过 700 像素，我需要根据条件将大型 HTML 页面拆分为多个页面。

我还可以根据字数拆分页面。

以下示例根据 HTML 标签拆分页面，而我需要根据 div 高度或否来实现相同。字数

示例[http://spility.sourceforge.net/](http://splity.sourceforge.net/)

我需要使用 c# 为 asp.net 执行此操作。我将不胜感激指向正确方向的指针，因为到目前为止我找不到与此相关的太多内容

![在此处输入图像描述](../Images/191ac91e36b4699608f474d74fcbc679.png)

信息：-我将文章存储为富文本，并在数据库字段中包含所有 HTML 标记，因此我正在寻找一种方法来使用 jquery 打破页面，如果 div 高度达到某个高度并打破它，如上图所示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:54:34.983

这可能会让你开始：

```
$.ajax({
    url: 'page.html',
    dataType: 'html',
    success: function(data){
        var $html = $(data);

        var $articles = $html.find('div.article'); //find the divs that you want to make use of

        $articles.each(function(){
            if($(this).height() > 200) //filter the articles based on your conditions
                //do stuff with the filetered alticles
        });
    }
}); 
```

# google-drive-api - 从 DocumentsList API V3 迁移到 Drive SDK

> ID：12709753
> 
> 赞同：1
> 
> 时间：2012-10-03T13:39:20.083
> 
> 标签：google-drive-api

我才知道[DocumentsList API](https://developers.google.com/google-apps/documents-list/)已被弃用。所以我想将我的应用程序迁移到云端硬盘并看到了[这个页面](https://developers.google.com/drive/migration#migrating_from_the_documents_list_api)。我主要使用[https://docs.google.com/feeds/default/private/full/](https://docs.google.com/feeds/default/private/full/)之类的网址。那么用像这样的新网址替换它们就足够了[https://www.googleapis.com/drive/v2/files/](https://www.googleapis.com/drive/v2/files/)？

只是想确认是我需要照顾的一切，还是我错过了任何东西。我的应用程序使用 OAuth2 进行授权。我也需要改变那里的任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:40:55.837

如果您自己构建请求，则必须替换 URL，但还要考虑来自 Drive API 的响应将是 JSON 格式的，而不是像 Documents List API 中那样的 XML 格式。

如果您使用的是 Google 提供的客户端库之一，则必须开始使用更新的客户端库，您可以从[https://developers.google.com/drive/downloads](https://developers.google.com/drive/downloads)下载。

迁移指南主要是将 Documents List API 的方法映射到 Drive API 的方法的指南，应该用作了解可用内容和位置的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:41:11.700

Oauth 2.0 很好。您甚至可以使用与 Documents List v3 相同的令牌。

# git - TortoiseGit 克隆远程分支

> ID：12709754
> 
> 赞同：7
> 
> 时间：2012-10-03T13:39:24.123
> 
> 标签：git, tortoisegit

我最近开始使用 Git（长期使用 Subversion 用户）时正在尝试与 Git 达成协议，但我找不到使用 TortoiseGit 克隆远程分支的方法。

我创建了一个推送到 GitHub 的本地分支，但是当我尝试克隆（签出）这个远程分支时，我找不到任何方法来做到这一点。

我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T20:56:51.090

正如 linquize 所说，这个功能不是由 TortoiseGit 直接提供的。如果你真的想使用它，你可以：

*   克隆分支所属的仓库（右键菜单-> Git Clone...）。这也将检查由克隆创建的工作副本到 HEAD

![TortoiseGit 克隆窗口](../Images/02b1b313cddcc84cdf4a3406a159d52d.png)

*   将工作副本从 HEAD 切换到所需的分支/标签（右键菜单 -> TortoiseGit -> Switch/Checkout）

![TortoiseGit 切换窗口](../Images/b643c56e725ed3b4c7479e83c9f3d049.png)

这将比从命令行花费更长的时间，因为初始克隆命令意味着结帐到头，然后您必须切换回您想要的分支/标签。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-19T20:54:52.110

它在 Git 克隆窗口中可用： [![在此处输入图像描述](../Images/1e1b9900448a8c9226c2775fcae85b0e.png)](https://i.stack.imgur.com/7NQRg.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-26T19:20:04.990

（这是从 TortoiseGit v1.8.3.0 开始的。）

首先在 TortoiseGit 上下文菜单中执行“Git -> Git Sync”。（注意：您可能需要在`Shift`右键单击时按住不放，具体取决于您将 Git Sync 设置为如何在上下文菜单中显示。）

左下角会有一个按钮，叫做“远程更新”。这样做，它将拉下本地存储库中不存在的所有新远程分支。

![远程更新](../Images/950206a690bcef5140d24807f0e9ef54.png)

之后，您应该可以正常执行“Git -> Git Checkout”，并且您想要的分支将显示在列表中。

我应该注意，这个相同的过程可以用来通知 TortoiseGit 已经在远程存储库中创建的新分支，无论你最初是否创建了它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T13:56:13.843

不幸的是，当前的 TortoiseGit (TortoiseGit 1.7.13.0) 无法克隆特定的分支。您可以提出功能请求。

解决方法：

1.  使用手动 Git 命令，例如：`git clone --recursive --branch 2.x-1.0`
2.  使用另一个 Git GUI，例如 SmartGit

另一种方法是克隆所有分支然后删除不需要的分支，但这也不是一个好的解决方案，特别是如果您有许多带有许多标签（和不同文件名）的分支，但这是迄今为止的解决方法，直到 TortoiseGit 提供它。我选择使用命令行手动克隆一个分支。这个问题只发生在 Windows 用户身上，因为 Linux 的 Git 版本已经提供了`--branch`选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-29T18:05:23.163

关于此的更新：

如果你只需要一个特定的分支，你现在可以直接 SVN 结帐它。复制分支的树 URL，即`https://github.com/USERNAME/REPONAME/tree/BRANCHNAME`替换`tree`为`branches`，这样你就得到了`https://github.com/USERNAME/REPONAME/branches/BRANCHNAME`.

此 URL 可用于签出特定分支。

# asp.net - 如何解决 Web.config 中的以下错误

> ID：12709759
> 
> 赞同：2
> 
> 时间：2012-10-03T13:39:38.887
> 
> 标签：asp.net

这是运行时发生的错误

```
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

Source Error: 

Line 25:             ASP.NET to identify an incoming user. 
Line 26:         -->
Line 27:        <authentication mode="Forms"/>
Line 28:        <!--
Line 29:             The <customErrors> section enables configuration 

Source File: F:\Final Event Management\event management\web.config    Line: 27 
```

它是产生错误的编码

```
<?xml version="1.0"?>

<configuration>
    <appSettings/>
    <connectionStrings/>
    <system.web>

        <compilation debug="true" targetFramework="4.0">
        </compilation>

        <authentication mode="Forms"/>

        <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/></system.web>

</configuration> 
```

请解决这个问题............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:43:08.320

创建一个虚拟目录，看看是否能解决问题：

[如何：在 Visual Studio 中创建 IIS 虚拟目录](http://msdn.microsoft.com/en-us/library/d6cw6cfs%28v=vs.100%29.aspx)

右键单击解决方案资源管理器窗口中的项目节点，然后选择属性，然后选择 Web 选项卡，您应该会看到一个为您的站点创建虚拟目录的按钮。

# sql - 自动根据范围选择值并触发电子邮件

> ID：12709761
> 
> 赞同：0
> 
> 时间：2012-10-03T13:39:45.760
> 
> 标签：sql, sql-server, tsql, triggers, jobs

要查询数据范围的表：

```
Id  Variance
1     2
2     17
3     7
4     4
5     20
6     1
7     111
8     8
9     18
10    67 
```

另一张桌子

```
 Freq    StartRange   EndRange
H   10         7
H   8          8
H   6          20 
```

第一个表中的数据通过 SSIS 包每 30 分钟加载一次。

现在，我希望在方差列中的数据落在 StartRange 和 EndRange 中时触发电子邮件中的警报。

```
CREATE PROCEDURE [dbo].[SP_Email] @Start varchar(50),@End varchar(50),@Date datetime
AS
BEGIN
DECLARE @xml NVARCHAR(MAX)
DECLARE @body NVARCHAR(MAX)

SET @xml = CAST(( SELECT [SlNo] AS 'td','',[date] AS 'td','',
   [lag] AS 'td','', Percent AS 'td'
FROM  TestTbl 
WHERE(percent >= @Start AND percent < @End)
AND CAST(CONVERT(VARCHAR,curDate,106) AS DATETIME) = CAST(@Date AS DATETIME)
ORDER BY SlNo 
FOR XML PATH('tr'), ELEMENTS ) AS NVARCHAR(MAX))

SET @body ='<html><body><H3>Report</H3>
<table border = 1> 
<tr>
<th> SlNo </th> <th> date </th> <th> lag </th> <th> Percent </th></tr>'    

SET @body = @body + @xml +'</table></body></html>'

EXEC msdb.dbo.sp_send_dbmail
@profile_name = 'Alert', 
@body = @body,
@body_format ='HTML',
@recipients = 'abc@gmail.com'
@subject = 'Report';
END 
```

请提出一个可以帮助我在 SQL Server 2005 中进行设置的过程。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:50:03.943

这可以通过[SQL Server 代理作业](http://msdn.microsoft.com/en-us/library/ms190268.aspx)来完成：

```
EXEC dbo.sp_add_job
    @job_name = N'Variance Check',
    @notify_email_operator_name='you@your.domain',
    @notify_level_email=2; -- Only notify you when YourStoredProceedure fails
GO
EXEC sp_add_jobstep
    @job_name = N'Variance Check',
    @step_name = N'Check the variance',
    @subsystem = N'TSQL',
    @command = N'EXEC YourStoredProceedure', 
    @retry_attempts = 1,
    @retry_interval = 5 ;
GO
EXEC dbo.sp_add_schedule
    @schedule_name = N'EveryThirtyMinutes',
    @freq_type = 4, -- Daily
    @freq_subday_type = 0x4, -- Minutes
    @freq_subday_interval = 30, 
    @active_start_time = NULL; -- Start right away
USE msdb ;
GO
EXEC sp_attach_schedule
   @job_name = N'Variance Check',
   @schedule_name = N'EveryThirtyMinutes';
GO
EXEC dbo.sp_add_jobserver
    @job_name = N'Variance Check';
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:50:28.820

解决此问题的一种方法是通过触发器。但是，我不建议通过触发器发送电子邮件。

相反，在 T1 中加载数据的过程中添加一个步骤。在这一步之后，调用一个存储过程来查找满足条件的行并发送相应的电子邮件。

然而，很难确切地说出条件是什么。你的第二张桌子有三个范围。目前尚不清楚哪个应用于哪一行。

# asp.net-mvc - Get error message from a custom redirect error page

> ID：12709764
> 
> 赞同：0
> 
> 时间：2012-10-03T13:39:53.160
> 
> 标签：asp.net-mvc

I have something like this:

```
public ActionResult Index(int id)
{
    if (UserHasPermission())
    {
        return View()
    }

    throw new HttpException(403, "You do not have permission");
} 
```

and in my web.config I set this:

```
<customErrors mode="On">
  <error statusCode="403" redirect="/Error/403" />
</customErrors> 
```

I want to know how to get this message 'You do not have permission' when the redirect to Error/403 is done.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:59:15.007

They are just the redirects to a given url and sends it the Url that caused the error. It does not, however, store any information, it's simply a url redirection.

More details here: [Custom Error Page - Throw HttpException and have custom error page show message](http://forums.asp.net/t/1822665.aspx/1)

# c++ - boost::asio 暂停时抛出异常

> ID：12709769
> 
> 赞同：1
> 
> 时间：2012-10-03T13:40:18.693
> 
> 标签：c++, xcode, exception, boost-asio, breakpoints

我有一个程序用于`boost::asio`连接到远程机器，然后反复打印它收到的任何内容。问题是，每当我暂停它或在它运行时对断点进行任何更改时，都会从内部某处抛出异常`read_until()`。为什么会发生这种情况，我应该怎么做？

这是在运行 OS X 10.8.2 和 Xcode 4.4.1 和 Apple clang 4.0 的 Mac 上。暂停程序后引发异常时的堆栈跟踪：

```
* thread #1: tid = 0x1d07, 0x00007fff86bc9d46 libsystem_kernel.dylib`__kill + 10, stop reason = signal SIGABRT
    frame #0: 0x00007fff86bc9d46 libsystem_kernel.dylib`__kill + 10
    frame #1: 0x00007fff8ec40df0 libsystem_c.dylib`abort + 177
    frame #2: 0x00007fff8c49ca17 libc++abi.dylib`abort_message + 257
    frame #3: 0x00007fff8c49a3c6 libc++abi.dylib`default_terminate() + 28
    frame #4: 0x00007fff8d05e887 libobjc.A.dylib`_objc_terminate() + 111
    frame #5: 0x00007fff8c49a3f5 libc++abi.dylib`safe_handler_caller(void (*)()) + 8
    frame #6: 0x00007fff8c49a450 libc++abi.dylib`std::terminate() + 16
    frame #7: 0x00007fff8c49b5b7 libc++abi.dylib`__cxa_throw + 111
    frame #8: 0x00000001000043df test`void boost::throw_exception<boost::system::system_error>(boost::system::system_error const&) + 111 at throw_exception.hpp:66
    frame #9: 0x0000000100004304 test`boost::asio::detail::do_throw_error(boost::system::error_code const&, char const*) + 68 at throw_error.ipp:38
    frame #10: 0x0000000100004272 test`boost::asio::detail::throw_error(boost::system::error_code const&, char const*) + 50 at throw_error.hpp:42
    frame #11: 0x0000000100002479 test`unsigned long boost::asio::read_until<boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >, std::allocator<char> >(boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >&, boost::asio::basic_streambuf<std::allocator<char> >&, std::string const&) + 73 at read_until.hpp:98
    frame #12: 0x00000001000012c5 test`main + 581 at main.cpp:21
    frame #13: 0x00007fff8983e7e1 libdyld.dylib`start + 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:42:24.797

当你暂停你的程序时，实际的暂停是通过向它发送一个 POSIX 信号 ( `SIGSTOP`) 来完成的。这样做的影响之一是系统调用（例如`read()`Boost 将在内部使用的）返回错误，`EINTR`. 这将触发`read_until`的错误处理代码，如您所见，它会引发异常。

If you want to handle this properly, you probably want to use the overload that takes a `boost::system::error_code` parameter, check `.value()` against `EINTR` (defined in `errno.h`), and retry your read.

This would look something like

```
boost::system::error_code error;
boost::asio::streambuf message;
do {
    boost::asio::read(socket, message, boost::asio::transfer_exactly(body_size), error);
} while (error.value() == EINTR); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:22:21.177

`read_until()`有一个会在错误时引发异常的覆盖，如果你没有捕捉到这个，那么你会看到这种行为。如果您正在使用`boost::asio`不接受 a 的覆盖`boost::system::error_code&`，那么为了安全起见，您应该将这些调用包装在一个`try`可以捕获的块中`const boost::system::error_code&`。在异常处理程序中，您应该检查异常以了解失败的根本原因是什么。

```
try
{
   boost::asio::read_until(...);
}

catch(const boost::system::error_code& err)
{
   // read_until(...) failed, the reason is
   // contained in err
} 
```

# sockets - 如何将套接字绑定到多个接口

> ID：12709771
> 
> 赞同：27
> 
> 时间：2012-10-03T13:40:19.787
> 
> 标签：sockets, interface, bind

在互联网上搜索了几个小时后，我仍然无法找到我的问题的答案。

我的任务是创建一个服务器，它接受来自可变数量接口的套接字（在配置文件中作为`eth0, eth1, etc.`）。

最简单的方法是什么？有没有办法将一个套接字绑定到多个接口？我还没有找到一种方法来做到这一点。
或者，我是否必须使用`INADDR_ANY`并以某种方式找出发送数据包的接口？

有没有另一种方法来处理这个问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-03T13:50:08.377

您可以使用 将*一个*套接字连接到*所有*接口，或者创建*多个套接字*并将每个套接字绑定到所需接口的*IP 地址*。无论如何，请在套接字上设置选项。[`bind(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/bind.2.html) **[`INADDR_ANY`](http://www.kernel.org/doc/man-pages/online/pages/man7/ip.7.html)**[`SO_REUSEADDR`](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)****

# c# - 在权限有限的代码中使用 reg.exe

> ID：12709776
> 
> 赞同：1
> 
> 时间：2012-10-03T13:40:30.853
> 
> 标签：c#, permissions, registry

我需要在受限用户下获取已安装的软件列表。

我使用这段代码：

```
string fullString = string.Format("EXPORT \"{0}\\{1}\" \"{2}\" /y", hiveString, keyPath, Path.GetTempFileName());
Log(fullString);
var p = Process.Start(new ProcessStartInfo("reg.exe", fullString) {RedirectStandardOutput = true, UseShellExecute = false,WorkingDirectory = Directory.GetCurrentDirectory()});
Log("Output: " + p.StandardOutput.ReadToEnd());
p.WaitForExit(); 
```

在我的开发机器上，我看到正常输出：

> *操作成功完成*

无论我使用什么帐户 - 管理员或受限用户。

然后我在受限用户下在 Windows XP 上运行了这个应用程序。并在日志中查看下一个：

> “输出： ”

空行，是的。

当我在 cmd 中运行类似的查询时 - 它工作正常。我无法理解，我做错了什么。

为什么`reg.exe`什么都不写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:45:03.557

没有管理员权限就**不能**调用 reg.exe。至少不会，除非您使用的是 Windows Millennium（这就是它甚至没有出现在 MSFT 网站上的原因）。想象一下，如果可能的话，人们能做些什么……

# sql - SQL查询将两个表中的两列合并到结果表的一列中？

> ID：12709782
> 
> 赞同：4
> 
> 时间：2012-10-03T13:41:00.370
> 
> 标签：sql, select, db2

我有以下表格：

T1

```
 ID 
  1
  2
  3 
```

T2

```
ID  SERVICE
1   PSTN
1   ADSL
3   ADSL 
```

T3

```
ID   DEV
1    3G
3    2G 
```

我想作为输出

```
ID  SERVICE/DEV
1      PSTN
1      ADSL
1      3G
2
3      ADSL
3     2G 
```

这个怎么合并？

我不能用经典`LEFT OUTER JOIN`。

一个 id 的输出表中的总数应该是摘要，`T2+T3 (FOR ID=1 2+1=3)`但`ID=2`它也应该存在于表输出中，第二列为空白。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T13:48:43.643

您可以简单地将两个表的结果专门组合在一起，`T2`并在子查询中`T3`使用，然后将其与using连接起来。尝试这个，`union``T1``LEFT JOIN`

```
SELECT t1.ID, b.Service
FROM T1 LEFT JOIN
    (
        SELECT ID, Service FROM T2
        UNION ALL
        SELECT ID, Dev AS Service FROM T3
    ) b ON t1.ID = b.ID 
```

此外，`COALESCE`如果要自定义具有`null`值的列，则可以使用。所以在下面的例子中，由于`2`没有*service*，它将显示`-none-`而不是`null`

```
SELECT t1.ID, COALESCE(b.Service, '-none-') Service
FROM T1 LEFT JOIN
    (
        SELECT ID, Service FROM T2
        UNION ALL
        SELECT ID, Dev AS Service FROM T3
    ) b ON t1.ID = b.ID 
```

# [请参阅 SQLFiddle 演示](http://sqlfiddle.com/#!2/52b2e/13)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:54:22.490

你可以试试这个。

```
SELECT T1.ID, service "SERVICE/DEV"
FROM T1, T2
WHERE T1.ID = T2.ID(+)
UNION
SELECT T1.ID, dev "service/dev"
FROM T1, T3 
WHERE T1.ID = T3.ID(+); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:47:47.527

你想要联合/联合吗？

```
select *
from ((select id, service
       from t2
      ) union all
      (select id, service
       from t3
      ) union all
      (select id, NULL as service
       from t1
       where t1.id not in (select id from t2) and
             t1.id not in (select id from t3)
      )
     ) t 
```

`NOT IN`in`WHERE`子句可能不是最有效的方法。但这就是你想要的结果吗？

# html - 如果容器溢出，则换到下一列

> ID：12709783
> 
> 赞同：0
> 
> 时间：2012-10-03T13:41:23.297
> 
> 标签：html, css

如果内容溢出容器，我想实现以下布局：

![在此处输入图像描述](../Images/aea4e7c467e7da7b20b03a5a0b51459e.png)

所以说如果容器的高度是 400px，如果内容流过它会创建一个新列。

我创建了一个初学者小提琴 - [http://jsfiddle.net/Gkzc8](http://jsfiddle.net/Gkzc8)。红色框代表容器及其高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:46:20.730

[**JSFiddle**](http://jsfiddle.net/Gkzc8/4/)

使用 CSS3`multi-column`

```
#miked {height:400px; background-color:rgba(255,0,0,0.3); -moz-column-count: 3; column-count: 3; /*overflow: hidden*/} 
```

[**多栏**](http://www.quirksmode.org/css/multicolumn.html)阅读[](http://www.quirksmode.org/css/multicolumn.html)

# android - 在不扩展 FragmentActivity 的情况下获取 SupportFragmentManager

> ID：12709788
> 
> 赞同：6
> 
> 时间：2012-10-03T13:41:43.940
> 
> 标签：android, android-fragments, android-fragmentactivity

我想在我的应用程序中使用 Fragments，但我无法扩展 FragmentActivity，因为我的应用程序已经扩展了作为库一部分的活动。由于这意味着我无法调用`getSupportFragmentManager()`，我正在寻找一种解决方法，它允许我使用 Fragments 而无需扩展 FragmentActivity。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:54:01.310

您的库将需要扩展`FragmentActivity`.

我会担心一个图书馆无论如何都要求您使用他们的基本活动。

如前所述（在可能的情况下）获取库源代码并将其作为库项目添加到 Eclipse 并使其活动扩展`FragmentActivity`类。

# data-structures - Patricia Trie 用于快速检索 IPv4 地址和卫星数据

> ID：12709790
> 
> 赞同：2
> 
> 时间：2012-10-03T13:41:46.773
> 
> 标签：data-structures, ip-address, trie, patricia-trie, radix-tree

我正在用 C++ 编写一个程序，该程序需要快速查找和存储 IP 地址（所有 IPv4）。每个 IP 地址都有一个与之关联的数据。如果它已经存在于 trie 中，我打算将 trie 中的 IP 地址数据与新地址数据合并。如果它不存在，我打算将它作为新条目添加到 trie 中。不需要删除 IP 地址。

为了实现这一点，我需要设计一个 Patricia Trie。但是，我无法想象除此之外的设计。我似乎很天真，但我想到的唯一想法是将 IP 地址更改为二进制形式，然后使用 trie。然而，我对**如何**实现这一点一无所知。

如果您能帮我解决这个问题，我将非常感谢您。请注意，我确实在[这里](https://stackoverflow.com/questions/911947/algorithm-steps-to-find-longest-prefix-search-in-patricia-trie)找到了类似的问题。这个问题或更具体的答案超出了我的理解，因为 CPAN 网站中的代码对我来说不够清楚。

另请注意，我的数据是以下格式

> 10.10.100.1：“汤姆”、“杰克”、“史密斯”
> 
> 192.168.12.12：“琼斯”、“莉兹”
> 
> 12.124.2.1：“吉米”，“乔治”
> 
> 10.10.100.1：“迈克”、“哈利”、“詹妮弗”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:10:56.823

我认为您指的是[RadixTree](http://en.wikipedia.org/wiki/Radix_tree)。我有一个在 Java 中的[RadixTrie](https://github.com/phishman3579/java-algorithms-implementation/blob/master/src/com/jwetherell/algorithms/data_structures/RadixTrie.java)实现，如果你想用它作为起点，它是值映射的实际键。它使用[PatriciaTrie](https://github.com/phishman3579/java-algorithms-implementation/blob/master/src/com/jwetherell/algorithms/data_structures/PatriciaTrie.java)作为其支持结构。

使用以下字符串的示例。

1.  10.10.101.2
2.  10.10.100.1
3.  10.10.110.3

**Trie 示例（未压缩）**

```
└── 1
    └── 0
        └── .
            └── 1
                └── 0
                    └── .
                        └── 1
                            ├── 0
                            │   ├── 1
                            │   │   └── .
                            │   │       └── (2) 10.10.101.2
                            │   └── 0
                            │       └── .
                            │           └── (1) 10.10.100.1
                            └── 1
                                └── 0
                                    └── .
                                        └── (3) 10.10.110.3 
```

**帕特里夏特里（压缩）**

```
└── [black] 10.10.1
    ├── [black] 0
    │   ├── [white] (0.1) 00.1
    │   └── [white] (1.2) 01.2
    └── [white] (10.3) 10.10.110.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:06:01.490

Patricia 尝试解决为给定 IP 地址寻找最佳覆盖前缀的问题（例如，路由器使用它们来快速确定 192.168.0.0/16 是 192.168.14.63 的最佳选择）。如果您只是想精确匹配 IP 地址，哈希表是更好的选择。

# javascript - Google Analytics 自定义页面变量未显示在 gif 请求中

> ID：12709794
> 
> 赞同：0
> 
> 时间：2012-10-03T13:42:01.143
> 
> 标签：javascript, google-analytics

所以我在页面上有以下javascript：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '<our account number>']);
_gaq.push('_setCustomVar',1,'page_type','main', 3);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

但是，如果我查看网络流量，我会看到一个对 a 的请求`__utm.gif`，但未`utme`设置参数，正如我所期望的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:44:55.537

您仍然需要方括号：（[google custom vars](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)）

```
 _gaq.push(['_setCustomVar',
      1,                   // This custom var is set to slot #1\.  Required parameter.
      'Items Removed',     // The name acts as a kind of category for the user activity.  Required parameter.
      'Yes',               // This value of the custom variable.  Required parameter.
      2                    // Sets the scope to session-level.  Optional parameter.
   ]); 
```

# java - JAVA 类路径传递文件作为命令行参数

> ID：12709796
> 
> 赞同：0
> 
> 时间：2012-10-03T13:42:07.540
> 
> 标签：java, file, command-line-arguments

我有一个程序位于

说

```
$A430CLASS/com.airbus.adcsip.batch.GlobalReportBatch 
```

**$A430CLASS 是我的类文件所在的路径。**

我想通过 shell 脚本运行它，所以我输入了以下命令：

```
java -classpath $A430CLASS/com.airbus.adcsip.batch.GlobalReportBatch $A430CONF/batch.properties 
```

**$A430CONF 是 batch.properties 文件所在的路径。GlobalReportBatch 是我的类文件名** 如您所见，我想将此 batch.properties 文件作为参数传递给我的 java 程序。但是当我运行我的脚本时，它会尝试替换“。” 在 batch.props 文件到“/”它给了我`NoClassDefFound`错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:47:26.903

您在`-classpath`选项之后放置的必须是目录和 JAR 文件列表，由`:`（在类 Unix 操作系统上）或`;`（在 Windows 上）分隔。

看看你在传递什么：

`-classpath $A430CLASS/com.airbus.adcsip.batch.GlobalReportBatch`

删除和您的班级名称`/`之间的斜线；`$A430CLASS`用空格替换它：

`-classpath $A430CLASS com.airbus.adcsip.batch.GlobalReportBatch`

所以整行变成：

```
java -classpath $A430CLASS com.airbus.adcsip.batch.GlobalReportBatch $A430CONF/batch.properties 
```

# xml - 每年使用 XSLT 循环打印

> ID：12709797
> 
> 赞同：3
> 
> 时间：2012-10-03T13:42:13.670
> 
> 标签：xml, xslt, loops, date-range

我的源文档包含定义范围的两个值（年）。我把它们放在变量`$year1`和`$year2`. 我现在需要打印以在这两个值之间的每一年输出一个 -Element，包括开始和结束年份。我看到了一种使用递归创建循环的方法，但尤其是。看不到如何每次将值增加一。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T04:34:48.153

当必须生成的序列的大小事先不知道且不受限制时，Piez 方法不适用。

在这种情况下，XSLT 解决方案*必须*使用递归。

**这是一个通用的“迭代”模板，它对初始输入执行操作，然后对其结果执行操作，直到指定给定条件**。

这种转换是*尾递归的*，并且可以使用智能 XSLT 处理器在没有堆栈溢出的情况下工作：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output method="text"/>

 <my:action>
   <end>1000000</end>
 </my:action>

 <xsl:variable name="vAction"
      select="document('')/*/my:action"/>

 <xsl:template match="/">
  <xsl:call-template name="iterate">
   <xsl:with-param name="pAction" select="$vAction"/>
   <xsl:with-param name="pInput" select="0"/>
  </xsl:call-template>
 </xsl:template>

 <xsl:template name="iterate">
   <xsl:param name="pAction"/>
   <xsl:param name="pInput"/>

   <xsl:if test="string-length($pInput)">
       <xsl:variable name="vResult">
         <xsl:apply-templates select="$pAction">
           <xsl:with-param name="pInput" select="$pInput"/>
         </xsl:apply-templates>
       </xsl:variable>

       <xsl:copy-of select="$vResult"/>

       <xsl:call-template name="iterate">
         <xsl:with-param name="pAction"
              select="$pAction"/>
         <xsl:with-param name="pInput" select="$vResult"/>
       </xsl:call-template>
   </xsl:if>
 </xsl:template>

 <xsl:template match="my:action">
  <xsl:param name="pInput" select="0"/>

  <xsl:if test="not($pInput >= end)">
   <xsl:value-of select="concat($pInput+1,'&#xA;')"/>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

当将此转换应用于任何 XML 文档（未使用）时，将尾递归优化为迭代的智能 XSLT 处理器会产生所需的结果，而不会发生堆栈溢出。Saxon 6.5.4 就是这种情况，我用它来产生结果。

**问题是并非所有 XSLT 处理器都能识别和优化尾递归。**

**对于这样的处理器，可以使用 DVC 风格的递归**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:call-template name="displayNumbers">
    <xsl:with-param name="pStart" select="1"/>
    <xsl:with-param name="pEnd" select="1000000"/>
  </xsl:call-template>
 </xsl:template>

 <xsl:template name="displayNumbers">
  <xsl:param name="pStart"/>
  <xsl:param name="pEnd"/>

  <xsl:if test="not($pStart > $pEnd)">
   <xsl:choose>
    <xsl:when test="$pStart = $pEnd">
      <xsl:value-of select="$pStart"/>
      <xsl:text>&#xA;</xsl:text>
    </xsl:when>
    <xsl:otherwise>
      <xsl:variable name="vMid" select=
       "floor(($pStart + $pEnd) div 2)"/>
      <xsl:call-template name="displayNumbers">
       <xsl:with-param name="pStart" select="$pStart"/>
       <xsl:with-param name="pEnd" select="$vMid"/>
      </xsl:call-template>
      <xsl:call-template name="displayNumbers">
       <xsl:with-param name="pStart" select="$vMid+1"/>
       <xsl:with-param name="pEnd" select="$pEnd"/>
      </xsl:call-template>
    </xsl:otherwise>
   </xsl:choose>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**使用 MSXML4，此转换会产生正确的结果而不会发生任何崩溃。**

使用此 DVC 转换，最大递归深度仅为 Log2(N)——在本例中为 19。

**我建议使用[FXSL 库](http://fxsl.sf.net)**。它提供了常用高阶函数的 DVC 变体，例如`foldl()`并且`map()`可以生成几乎任何递归算法的 DVC 变体。

**当然，在 XSLT2.0 中可以简单地写**：

```
<xsl:sequence select="1 to 1000000"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:00:26.803

# XSLT 1.0 解决方案

请参阅[Piez 技术](http://www.dpawson.co.uk/xsl/sect2/muench.html#d9945e300)。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
<xsl:variable name="year1" select="2010" />
<xsl:variable name="year2" select="2013" />

<xsl:template match="/">
  <xsl:for-each select="(//node()|//@*)[position() &lt; ($year2 - $year1 + 2)]">
    <xsl:value-of select="concat($year1+position()-1,'&#x0A;')" />
  </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

# XSLT 2.0 解决方案

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
<xsl:variable name="year1" select="2010" />
<xsl:variable name="year2" select="2013" />

<xsl:template match="/">
  <xsl:value-of select="$year1 to $year2" separator="&#x0A;" />
</xsl:template>

</xsl:stylesheet> 
```

## 输出

这两种样式表都将产生产品...

```
2010
2011
2012
2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T07:06:35.383

感谢所有的帮助

我正在使用 xslt 2.0，所以 Dimitris 最后的简短说明已经做到了：

```
<xsl:template name="yearranges">
   <xsl:param name="year1" />
   <xsl:param name="year2" />
   <xsl:for-each select="$year1 to $year2">
      <year>
         <xsl:sequence select="."  />
      </year>
   </xsl:for-each>
</xsl:template> 
```

我每年都必须在 -tag 中打印。那很简单。更棘手的是，年份必须格式化为 xs:integer for xsl:sequence，这是在调用模板中完成的：

```
<xsl:call-template name="yearranges">
   <xsl:with-param name="year1" as="xs:integer" select="xs:integer($year1)" />
   <xsl:with-param name="year2" as="xs:integer" select="xs:integer($year2)" />
</xsl:call-template> 
```

再次感谢奥利弗

# android - 如何解决致命异常：Thread-11

> ID：12709799
> 
> 赞同：4
> 
> 时间：2012-10-03T13:42:15.370
> 
> 标签：android, multithreading, fatal-error

现在我正在开发一个使用异步任务的我面临这个错误，任何人都知道这个..

```
10-03 19:04:55.662: E/AndroidRuntime(1547): FATAL EXCEPTION: Thread-11
10-03 19:04:55.662: E/AndroidRuntime(1547): java.lang.ExceptionInInitializerError
10-03 19:04:55.662: E/AndroidRuntime(1547):     at com.cc.accounts.ChatAccountsFragment.Gtalk_logInComplete(ChatAccountsFragment.java:579)
10-03 19:04:55.662: E/AndroidRuntime(1547):     at com.cc.xmpp.GmailXmppClient.Login(GmailXmppClient.java:92)
10-03 19:04:55.662: E/AndroidRuntime(1547):     at com.cc.accounts.ChatAccountsFragment$5.run(ChatAccountsFragment.java:482)
10-03 19:04:55.662: E/AndroidRuntime(1547):     at java.lang.Thread.run(Thread.java:1096)
10-03 19:04:55.662: E/AndroidRuntime(1547): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
10-03 19:04:55.662: E/AndroidRuntime(1547):     at android.os.Handler.<init>(Handler.java:121)
10-03 19:04:55.662: E/AndroidRuntime(1547):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
10-03 19:04:55.662: E/AndroidRuntime(1547):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
10-03 19:04:55.662: E/AndroidRuntime(1547):     at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
10-03 19:04:55.662: E/AndroidRuntime(1547):     ... 4 more 
```

这是异步任务

```
public void Gtalk_logInComplete(String Uname, XMPPConnection _connection) {
      Log.i(TAG, "Uname" +Uname);
      Uname = current_username;
      _connection = current_connection;
      ForwardAction task = new ForwardAction(); // this is line no 579
      task.execute();    
}

private class ForwardAction extends AsyncTask<Void, Void, Void> {          
    private ArrayList<String> contactJids;
    private GmailXmppClient Gtalk_xmpp_client;
    private ArrayList<String> contactNames;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        show();
    }

    protected Void doInBackground(Void... params) {

 //         new Thread() {
 //             public void run() {

                synchronized (this.contactJids) {
                    Roster roster = this.Gtalk_xmpp_client.getRoster();
                    String file_name;
                    for (RosterEntry entry : roster.getEntries()) {
                        if (entry.getType() == ItemType.to || entry.getType() == ItemType.both) {

                            this.contactJids.add(entry.getUser());
                            this.contactNames.add(entry.getName());                         

                            contact_db.open();
                            boolean yes = contact_db.checkUsername(entry.getUser());
                            Log.i(TAG, "Con=" + yes);
                            if (!yes) {

                                Bitmap buddy_img = buddyImage(entry, current_connection);
                                if (buddy_img != null)
                                    file_name = Store(buddy_img);
                                else
                                    file_name = "";
                                if (entry.getName() == null)
                                    contact_db.createContact(entry.getUser(), entry.getUser(), current_username, file_name, "GOOGLE");
                                else
                                    contact_db.createContact(entry.getName(), entry.getUser(), current_username, file_name, "GOOGLE");
                            } else {
                                Log.i(TAG, "Con=exist");
                            }
                        }
                    }
                } 
    //      }
//      }.start();                      
        contact_db.close();         
        return null;
    }

    protected void onPostExecute(Void aVoid) {          
        super.onPostExecute(aVoid);       
        hide();
    }        
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T18:03:51.547

当您尝试从无法执行的线程更新视图时，会发生此错误。您要么需要更新您的视图，`onPostExecute`要么使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)来更新您的视图。

您可以按如下方式使用 runOnUiThread：

```
runOnUiThread(new Runnable() {
    public void run() {                     
        // your code to update the UI thread here               
    }
}); 
```

# ajax - DIV 中的 Ajax 响应

> ID：12709811
> 
> 赞同：0
> 
> 时间：2012-10-03T13:43:03.043
> 
> 标签：ajax

您好，我想稍微修改以下脚本，以便将响应输出到 div 而不是警报，请参见粗体部分。任何帮助表示赞赏！

```
function processResponse() {
    if (gateway.readyState == 4 && gateway.status == 200) {
        alert("Done loading!\n\nThe response from the PHP script was: "+gateway.responseText);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:44:36.137

如果 div 有一个 id 尝试这样的事情：

```
document.getElementById("divId").innerHTML = gateway.responseText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:47:13.120

```
function processResponse() { 
    if (gateway.readyState == 4 && gateway.status == 200) {
        document.getElementById("yourDiv").innerHTML = "php script was : " + gateway.responseText;
    } 
} 
```

或者如果使用 jquery

```
function processResponse() { 
    if (gateway.readyState == 4 && gateway.status == 200) {
        $("#youdivid").html("php script was : " + gateway.responseText);
    } 
} 
```

# algorithm - 修改欧拉总函数

> ID：12709813
> 
> 赞同：1
> 
> 时间：2012-10-03T13:43:04.520
> 
> 标签：algorithm, math

要计算与 N 互质且小于 N 的整数个数，我们可以简单地计算其[ETF](http://en.wikipedia.org/wiki/Euler%27s_totient_function)。但是，要计算与 N 互质但小于 M 的整数个数，其中 M < N，我们如何修改/计算它？我已经尝试了计算 ETF 的代码，但无法继续如何修改它以获得所需的结果。

代码：

```
int etf(int n) 
{ 
   int result = n; 
   int i;
   for(i=2;i*i <= n;i++) 
   { 

        if (n % i == 0) result -= result / i; 
        while (n % i == 0) n /= i;
   } 
   if (n > 1) result -= result / n; 
   return result; 
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:33:36.627

您需要使用[包含-排除原则](http://en.wikipedia.org/wiki/Inclusion%E2%80%93exclusion_principle)。举个例子：假设你想计算互质为 30 = 2 * 3 * 5 且小于 20 的整数的数量。

首先要注意的是，您可以计算不互质为 30 的数字，然后从总数中减去它们，这要容易得多。2小于20的倍数是20/2=10，3的倍数是20/3=6（占发言权），5的倍数是20/5=4。

但是，请注意，我们多次计算了诸如 6 = 2 * 3 之类的数字，无论是 2 的倍数还是 3 的倍数。为此，我们必须减去每个是两个乘积的倍数的数字素数。

另一方面，这会减去一次不必要的三个素数的倍数的数字-因此您必须将该计数添加到末尾。这样做，交替符号，直到你达到除 N 的素数总数。在这个例子中，答案是

20/1 - 20/2 - 20/3 - 20/5 + 20/2*3 + 20/3*5 + 20/2*5 - 20/2*3*5 = 20 - 10 - 6 - 4 + 3 + 1 + 2 - 0 = 6。

（我们数的数字是 1、7、11、13、17 和 19。）

# sql - SELECT 语句中的列别名不适用于 SQuirrel SQL + Firebird

> ID：12709814
> 
> 赞同：28
> 
> 时间：2012-10-03T13:43:06.000
> 
> 标签：sql, jdbc, firebird, squirrel-sql, jaybird

我尝试使用 SQuirrel SQL 3.4 + Firebird 1.5 + Driver JDBC Jaybird 2.2.[0|1] (JVM 1.7.0_03) 在 SELECT 语句中添加列别名，但不起作用。别名列与列的原始名称一起出现。在另一个工具 (DBExpert) 中，同样的语句可以正常工作。

**语句**：`SELECT column1 AS alias1, column2 FROM table;`
**SquirrelSQL 中的**结果列名称：`column1 - column2`
**DBExpert 中**的结果列名称：`alias1 - column2`

尝试在别名周围添加 ' 和 " ，但也不起作用。

有人有想法吗？

编辑：我将 JDBC Jaybird 驱动程序更新为 2.2.1 版本（9 月 30 日发布），但问题仍然存在。

**编辑2：问题已解决！**

该问题是由 Squirrel SQL 的默认首选项引起的。

要修复它，请转到“文件”->“全局首选项”，在“数据类型控件”选项卡中找到“常规（适用于所有类型）”并标记组合框“在结果标题中使用列标签而不是列名”。

见截图： http://i1-win.softpedia-static.com/screenshots/SQuirrel-SQL-Client_4.png? [1345342622](http://i1-win.softpedia-static.com/screenshots/SQuirrel-SQL-Client_4.png?1345342622)

享受。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-04T09:27:43.447

问题是由于 JDBC 规范中的混淆（至少从历史上看）以及 Jaybird 在结果集元数据中报告为 columnNames 和 columnLabels 的内容方面发生了变化。据我所知，在 JDBC 2.0 和更早版本中，columnName 和 columnLabel 之间的区别没有得到很好的定义，因此在几乎所有情况下都`getColumnName()`返回相同的值`getColumnLabel()`（即，如果指定了 AS 别名）。

使用 JDBC 3.0 进行了更清晰的区分：`columnName`是表中基础列的名称（如果有），`columnLabel`是 AS 别名（如果指定），否则`columnName`. Jaybird 2.1.6 和更早版本曾经为`getColumnLabel()`and `getColumnName()`（即`columnLabel`）返回相同的值，这在 Jaybird 2.2 中进行了更改。

显然 Squirrel 默认使用不符合 JDBC 的选项`columnName`，而不是`columnLabel`. 正如您已经发现的那样：有一个选项可以让它使用`columnLabel`。另一个选择是使用 Jaybird 2.2.1 或更高版本并添加连接属性`columnLabelForName=true`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-02T19:50:04.330

在 Squirrel 中，这需要设置：

> 文件 > 全局首选项 > 数据类型控件 > 检查：**在结果标题中使用列标签而不是列名**

# ms-access - 保存空白记录

> ID：12709819
> 
> 赞同：1
> 
> 时间：2012-10-03T13:43:26.867
> 
> 标签：ms-access, ms-access-2010

保存后，我正在尝试获取新记录的 ID。因为我需要它来保存未绑定到记录的控件。

所以我这样做了。

```
Private Sub cmdSave_Click()

 If IsNull(SalesCallID) Then
    DoCmd.DoMenuItem acFormBar, acRecordsMenu, acSaveRecord, , acMenuVer70
    SalesCallID.Requery
    MsgBox SalesCallID
 End If 
```

`SalesCallID`是一个绑定在记录 id 上的文本框。所以如果是`null`，我保存并更新它。
但是如果这个人只改变了未绑定的控件，它就不会保存。那我就拿不到身份证了。

我试图像这样将表单设置为脏，`Me.Dirty = true` 但它不起作用。

我可以在`open form`活动中在评论字段中插入一个空格......但是有没有更优雅的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:06:48.373

在大多数情况下，更新日期很有用，您可以包含一个并使用保存按钮通过代码更新它。您必须至少完成一个表字段才能获取新记录，除非您想通过sql或记录集添加记录，这可能会导致更多问题。如果您正在寻找小提琴，默认值将不起作用，您需要类似：

```
Me.txtCreateBy = "Marc" 
```

# graph - 如何在 Gnuplot 中创建蜘蛛图？

> ID：12709820
> 
> 赞同：7
> 
> 时间：2012-10-03T13:43:27.460
> 
> 标签：graph, plot, gnuplot

我想使用 Gnuplot 制作一个蜘蛛（又名雷达/星）图，其中不同的轴具有独立的比例。我可以使用 OriginPro（商业）制作这样的图，但使用 Gnuplot 我只能设置具有统一比例的雷达图。

（csv 文件）数据集如下所示（第一行是列标签）：

```
# FEATURE, Product_A, Product_B, Product_C, Product_D
attribute_1, 2, 10, 7, 3.5
attribute_2, 1, 0.5, 3,4
attribute_3, 37, 58, 49, 72
attribute_4, 1985, 1992, 2006, 2010
attribute_5, 0.1, 0.5, 0.3, 0.8 
```

我正在寻找的情节是这个：[https](https://www.dropbox.com/s/uvqubzqvm6puhb8/spider.pdf) ://www.dropbox.com/s/uvqubzqvm6puhb8/spider.pdf - 正如您所看到的，每个轴代表不同的属性，并且有自己的比例。

我猜 Gnuplot 的起始代码是：

```
set polar
set grid polar
set angles degrees
set size square
set style data filledcurves 
```

但我不知道如何进行。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:36:55.190

这是一个黑客尝试..

```
set nokey
set polar
set grid polar
set angles degrees
set size square
set style data lines
a1=0
a2=30
a3=100
a4=200
a5=300
set arrow nohead from 0,0 to first 10*cos(a1) , 10*sin(a1)
set arrow nohead from 0,0 to first 10*cos(a2) , 10*sin(a2)
set arrow nohead from 0,0 to first 10*cos(a3) , 10*sin(a3)
set arrow nohead from 0,0 to first 10*cos(a4) , 10*sin(a4)
set arrow nohead from 0,0 to first 10*cos(a5) , 10*sin(a5)
set xrange [-10:10]
set yrange [-10:10]
plot '-' using ($1==1?a1:($1==2?a2:($1==3?a3:($1==4?a4:($1==5?a5:$1))))):2 lt 2
1 4
2 8
3 6
4 9
5 5
1 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-11T21:12:03.807

这是从我的收藏中提取的“蜘蛛图”的建议。由于它使用数据块中的数据而不是文件中的数据（因为更容易解决某些行，例如 via `$Data[1]`），因此，它**需要 gnuplot >=5.2.0**。实际数据在 中`$Data`，范围和自定义偏移调整的一些设置在`$Settings`. `$Data`如果您在和中添加更多行，则会自动调整轴数`$Settings`。数据需要用空格隔开，因为gnuplot函数`word(string,number)`是用来提取一些值的。

我希望它或多或少是不言自明的。欢迎评论、报告错误或改进。

**代码：**

```
### spider plot/chart with gnuplot 
# also known as: radar chart, web chart, star chart, cobweb chart, 
#                radar plot,  web plot,  star plot,  cobweb plot,  etc. ...
reset session
set size square
unset tics
set angles degree
set key top left

# Data
$Data <<EOD
SpiderData     "Product A"  "Product B"  "Product C"  "Product D"
Colors                red        green         blue       violet
"attribute 1"           2           10            7          3.5
"attribute 2"           1          0.5            3            4
"attribute 3"          37           58           49           72
"attribute 4"        1985         1992         2006         2010
"attribute 5"         0.1          0.5          0.3          0.8
EOD
HeaderLines = 2

# Settings for scale and offset adjustments
# axis min max tics axisLabelXoff axisLabelYoff ticLabelXoff ticLabelYoff
$Settings <<EOD
1     0    12  6  0.00 -0.02 -0.05  0.00
2     0     6  6  0.00  0.05  0.00  0.05
3    30    90  6  0.00  0.00  0.05  0.03
4  1980  2016  6  0.00  0.00  0.09 -0.02
5     0   1.2  6  0.00  0.05  0.00 -0.05
EOD

# General settings
DataColCount = words($Data[1])-1
AxesCount = |$Data|-HeaderLines
AngleOffset = 90
Max = 1
d=0.1*Max
Direction = -1   # counterclockwise=1, clockwise = -1

# Tic settings
TicCount = 6
TicValue(axis,i) = real(i)*(word($Settings[axis],3)-word($Settings[axis],2)) \
          / word($Settings[axis],4)+word($Settings[axis],2)
TicLabelPosX(axis,i) = PosX(axis,i/TicCount) + word($Settings[axis],7)
TicLabelPosY(axis,i) = PosY(axis,i/TicCount) + word($Settings[axis],8)
TicLen = 0.03
TicdX(axis,i) = 0.5*TicLen*cos(alpha(axis)-90)
TicdY(axis,i) = 0.5*TicLen*sin(alpha(axis)-90)

# Functions
alpha(axis) = (axis-1)*Direction*360.0/AxesCount+AngleOffset
PosX(axis,R) = R*cos(alpha(axis))
PosY(axis,R) = R*sin(alpha(axis))
Scale(axis,value) = real(value-word($Settings[axis],2))/(word($Settings[axis],3)-word($Settings[axis],2))

# Spider settings
set style arrow 1 dt 1 lw 1.0 lc -1 head     # style for axes
set style arrow 2 dt 2 lw 0.5 lc -1 nohead   # style for weblines
set style arrow 3 dt 1 lw 1 lc -1 nohead     # style for axis tics
set samples AxesCount
set isosamples TicCount
set urange[1:AxesCount]
set vrange[1:TicCount]
do for [i=1:DataColCount] {                  # set linetypes/colors
    set linetype i lc rgb word($Data[2],i+1)
}
set style fill transparent solid 0.2

set xrange[-Max-4*d:Max+4*d]
set yrange[-Max-4*d:Max+4*d]
plot \
    '+' u (0):(0):(PosX($0,Max+d)):(PosY($0,Max+d)) w vec as 1 not, \
    $Data u (PosX($0+1,Max+2*d)+word($Settings[$0+1],5)): \
        (PosY($0+1,Max+2*d)+word($Settings[$0+1],6)):1 every ::HeaderLines w labels center enhanced not, \
    '++' u (PosX($1,$2/TicCount)):(PosY($1,$2/TicCount)): \
        (PosX($1+1,$2/TicCount)-PosX($1,$2/TicCount)):  \
        (PosY($1+1,$2/TicCount)-PosY($1,$2/TicCount)) w vec as 2 not, \
    '++' u (PosX($1,$2/TicCount)-TicdX($1,$2/TicCount)): \
        (PosY($1,$2/TicCount)-TicdY($1,$2/TicCount)): \
        (2*TicdX($1,$2/TicCount)):(2*TicdY($1,$2/TicCount)) \
        w vec as 3 not, \
    for [i=1:DataColCount] $Data u (PosX($0+1,Scale($0+1,column(i+1)))): \
        (PosY($0+1,Scale($0+1,column(i+1)))) every ::HeaderLines w filledcurves lt i title word($Data[1],i+1), \
    '++' u (TicLabelPosX($1,$2)):(TicLabelPosY($1,$2)): \
        (sprintf("%g",TicValue($1,$2))) w labels font ",8" not
### end of code 
```

**结果：**

[![在此处输入图像描述](../Images/aa79e182f274a3e327b1bacfbebc0ce5.png)](https://i.stack.imgur.com/gzEFd.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T18:26:47.730

@george 的回答帮助我弄清楚如何重新排列数据集，以便从中挑选相应的属性数据。因为我还在为不同的蜘蛛轴寻找不同的范围比例，除了@george 的建议，我认为对常见的 [0:1] 范围进行特定于轴的归一化可以解决问题。然后主要修改与命令的`using`字段有关`plot`。

代码相当长，我相信它可以优化。它也可以合并到一个脚本或一个简单的 C 代码中，以便让用户决定轴的数量（属性的数量），以及每个特定轴的不同范围（最小值、最大值）。

以下示例针对 5 个属性比较 2 个产品。这里显示了[绘图结果图像](https://www.dropbox.com/s/7fqzelbfu0ldvfd/gnu-spider.pdf)：

```
set nokey
set polar
set angles degrees
npoints = 5
a1 = 360/npoints*1
a2= 360/npoints*2
a3= 360/npoints*3
a4= 360/npoints*4
a5= 360/npoints*5
set grid polar 360.
set size square
set style data lines
unset border
set arrow nohead from 0,0 to first 1*cos(a1) , 1*sin(a1)
set arrow nohead from 0,0 to first 1*cos(a2) , 1*sin(a2)
set arrow nohead from 0,0 to first 1*cos(a3) , 1*sin(a3)
set arrow nohead from 0,0 to first 1*cos(a4) , 1*sin(a4)
set arrow nohead from 0,0 to first 1*cos(a5) , 1*sin(a5)
a1_max = 10
a2_max = 5
a3_max = 100
a4_max = 2020
a5_max = 1
a1_min = 0
a2_min = 0
a3_min = 50
a4_min = 1980
a5_min = 0
set label "(0:10)" at cos(a1),sin(a1) center offset char 1,1
set label "(0:5)" at cos(a2),sin(a2) center offset char -1,1
set label "(50:100)" at cos(a3),sin(a3) center offset char -1,-1
set label "(1980:2020)" at cos(a4),sin(a4) center offset char 0,-1
set label "(0:1)" at cos(a5),sin(a5) center offset char 3,0
set xrange [-1:1]
set yrange [-1:1]
unset xtics
unset ytics
set rrange [0:1]
set rtics (""0,""0.25,""0.5,""0.75,""1)

plot '-' using ($1==1?a1:($1==2?a2:($1==3?a3:($1==4?a4:($1==5?a5:$1))))):($1==1?(($2-a1_min)/(a1_max-a1_min)):($1==2?(($2-a2_min)/(a2_max-a2_min)):($1==3?(($2-a3_min)/(a3_max-a3_min)):($1==4?(($2-a4_min)/(a4_max-a4_min)):($1==5?(($2-a5_min)/(a5_max-a5_min)):$1))))) w l
1 8
2 3
3 67
4 2000
5 0.2
1 8

plot '-' using ($1==1?a1:($1==2?a2:($1==3?a3:($1==4?a4:($1==5?a5:$1))))):($1==1?(($2-a1_min)/(a1_max-a1_min)):($1==2?(($2-a2_min)/(a2_max-a2_min)):($1==3?(($2-a3_min)/(a3_max-a3_min)):($1==4?(($2-a4_min)/(a4_max-a4_min)):($1==5?(($2-a5_min)/(a5_max-a5_min)):$1))))) w l
1 6
2 1.5
3 85
4 2010
5 0.5
1 6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-10T16:28:18.873

以下 repo 显示了一个具有均匀比例的蜘蛛图。[https://github.com/orey/gnuplot-radarchart](https://github.com/orey/gnuplot-radarchart)

对于您的特定情况，我会：-创建将所有数据标准化以适合图表比例的函数，-隐藏 tge 标准比例，-使用箭头作为轴，-为您的特定比例添加带有标签的点并将它们与您的数据功能。

我认为可以在 repo 中找到灵感。

# javascript - 需要 JQuery 复古工程协助

> ID：12709824
> 
> 赞同：0
> 
> 时间：2012-10-03T13:43:35.907
> 
> 标签：javascript, jquery, html, ajax, blackberry

我有以下代码

```
function dbFaultgo() {

        var f = element('faultForm');
        var headcode = f.elements['headcode'].value;
        var location = f.elements['location'].value;
        var detail = f.elements['detail'].value;
        var image = f.elements['image'].value;
        var fullname = f.elements['fullname'].value;
        var mobilenumber = f.elements['mobilenumber'].value;
        $('#loadingmessage').show();  // show the loading message.
        $.ajax({
            type: 'POST',
            url: 'http://(url removed)/save.php',
            data: { 
                headcode:headcode,
                location:location,
                injuryreport:detail,
                image:image,
                fullname:fullname,
                mobilenumber:mobilenumber
            },
            //change the url for your project
            success: function(data){
                $('#loadingmessage').hide();  // hide the loading message.
                alert('Your comment was successfully added');
                changePage ('page_05.html?v=1')

            },
            error: function(){
                $('#loadingmessage').hide();  // hide the loading message.
                alert('There was an error adding your comment');
            }
        });

        return false; 
```

};

这非常适合几乎所有智能手机......除了我需要它在运行 OS5 的 Blackberry Bold 上工作，它不允许 Ajax，因为它不兼容。

是否有与上述功能的 OS5 blackberryies（想想 HTML4、IE8）兼容的旧 Javascript 格式，还是我需要使用某种第三方 javascript 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:25:47.313

不是使用 Ajax，而是使用传统的 HTML 表单和 POST 将用户带到“您的评论已添加”页面？根据您的应用程序，它会导致用户体验的轻微下降。

# android - 在 Android 中使用 webView 浏览网站

> ID：12709825
> 
> 赞同：1
> 
> 时间：2012-10-03T13:43:45.850
> 
> 标签：android, webview

我已经用我的`WebView`. 但是当我点击那个网站的任何链接时，控制权已经从我的浏览器转移`WebView`到了Android内置浏览器。我想用我的`WebView`.

我想从我的网站下载书。对我来说非常重要的另一项任务是，当我从我的网站下载一本书时，它会为我的软件（android 部分）提供密码。我该怎么做才能从`WebView`.

这个问题对我完成我的项目非常重要。等待您的回复...

webView 的代码如下：

```
wv = (WebView) findViewById(R.id.mainwebview);
WebSettings ws = wv.getSettings();
ws.setBuiltInZoomControls(true);
wv.loadUrl("http://m.feedbooks.com/store");
wv.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:51:38.230

看看 WebViewClient [1](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)

您可以覆盖 shouldOverrideUrlLoading(WebView view, String url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:52:28.137

```
wv.setWebViewClient(new WebViewClient() {

                    @Override
                    public boolean shouldOverrideUrlLoading(WebView view,String url) {
                        view.loadUrl(url);
                        return true;
                    }

                });
                wv.loadUrl(url); 
```

上面的代码可以帮助你用你的 webview 显示网站

# jquery - 在表单提交上使用 ajax 在 Rails 3.2 中渲染多个部分

> ID：12709829
> 
> 赞同：1
> 
> 时间：2012-10-03T13:43:56.990
> 
> 标签：jquery, ruby-on-rails, ajax, jquery-ui, ruby-on-rails-3.2

我正在提交一个表单以在 Rails 中使用 ajax 创建一个对象。然后我将此对象附加到列表中，它就像一个魅力。

在 Create.js.erb 中：

```
$('#step_items').prepend($('<%= escape_javascript(render('shared/step_item'))     %>').fadeIn("slow")); 
```

但是，当我创建新的步骤对象时，我也在创建一个新的活动对象。我想将步骤添加到步骤列表并将活动添加到活动列表。渲染两个部分...

我尝试简单地添加到 create.js.erb：

```
 $('#activity_items').prepend($('<%= escape_javascript(render('shared/activity_item_in_goal')) %>').fadeIn("slow")); 
```

这吐出了错误：

```
ActionController::RoutingError (No route matches [GET] "/tasks/..."): 
```

从 create.js.erb 渲染两个部分的最佳方法是什么？我正在阅读您可以通过 RJS 或自定义 ajax 调用来完成它，但无法弄清楚。谁能提供清晰的示例代码？

# wordpress - Wordpress - GD 星级评级 - 在 wp_insert_post 之后设置评级

> ID：12709830
> 
> 赞同：0
> 
> 时间：2012-10-03T13:44:03.917
> 
> 标签：wordpress, rating

在此之后是否可以对新帖子（使用管理员帐户）进行评分？

```
$post_id = wp_insert_post( $my_post, $wp_error ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:08:47.397

根据Wordpress 支持论坛的[这篇文章](http://wordpress.org/support/topic/rating-programmatically-a-new-article-with-gd-star-rating)，你应该做的是这样的：

```
function set_rating($post_id, $vote) {  // $vote = 0..10
  $admin = get_user_by('login', 'admin');
  if ($admin !== false) {
    $ip = $_SERVER['SERVER_ADDR'];
    $ua = $_SERVER['HTTP_USER_AGENT'];
    gdsrBlgDB::save_vote($post_id, $admin->ID, $ip, $ua, $vote);
  }
  return $admin;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:47:31.363

发生这种情况后，您需要添加一个钩子。先写一个函数，然后这个：

```
add_action('wp_insert_post', 'set_star_rating');
function set_star_rating() {
    global $post;
    $post = ...
} 
```

`save_posts`在您保存帖子时还会发生钩子，并且有更好的[文档记录](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T13:46:31.263

这对于基于 GD Star Rating Plugin 进行一些自定义开发可能很有用。找到我的功能来“保存喜欢的帖子”，获取“帖子的点赞数”和“检查当前用户是否喜欢帖子”。这也适用于自定义帖子类型。

```
/**
 * Function to save post like
 * @param type $post_id
 * @param type $user_id 
 */
function save_post_like($post_id, $user_id) {

    $ip = $_SERVER['SERVER_ADDR'];
    $ua = $_SERVER['HTTP_USER_AGENT'];

    if(has_user_liked_post($post_id) == 0)
        gdsrBlgDB::save_vote_thumb($post_id, $user_id, $ip, $ua, 1);

}

/**
 * Function to check if user like the post
 * @global type $wpdb
 * @global type $table_prefix
 * @param type $post_id
 * @return type 
 */
function has_user_liked_post($post_id) {

    global $wpdb, $table_prefix;

    $userdata = wp_get_current_user();
    $user_id = is_object($userdata) ? $userdata->ID : 0;

    $sql = "SELECT * FROM " . $table_prefix . "gdsr_votes_log WHERE vote_type = 'artthumb' AND id = " . $post_id . " AND user_id = " . $user_id;
    $results = $wpdb->get_row($sql, OBJECT);

    if (count($results))
        return 1;
    else
        return 0;
}

/**
 * Function to get total Likes of a Post
 * @global type $wpdb
 * @global type $table_prefix
 * @param type $post_id
 * @return type 
 */
function get_post_like_count($post_id) {

    global $wpdb, $table_prefix;

    $sql = "SELECT * FROM " . $table_prefix . "gdsr_data_article WHERE post_id = " . $post_id;
    $results = $wpdb->get_row($sql, OBJECT);

    if (count($results))
        return $results->user_recc_plus;
    else
        return 0;
} 
```

# c - 包含一个或两个字符或给定三进制字符串的连续子字符串

> ID：12709833
> 
> 赞同：-2
> 
> 时间：2012-10-03T13:44:15.933
> 
> 标签：c, string, ternary

面试的一个问题是：给定一个三元字符串，找出只包含给定三元字符串的一个或两个字符的连续子字符串的数量。三进制字符串是最多由 3 个字符组成的字符串。例如：bcabb 是集合 {a,b,c} 上的三元字符串。上述示例的答案是：b,c,a,b,b,bc,ca,ab,bb 即.,9。

注意：子字符串由开始和结束索引决定，而不是唯一性。

谁能告诉我在这个问题中要遵循什么算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:58:27.640

我无法完全理解您在说什么，但是从示例和描述中我认为答案将是`2 * strlen (string) - 1`。这是因为您有`strlen (string)`多个单长度字符串，以及`strlen (string)`来自给定字符串的 2 个长度子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:59:14.107

这个问题需要一个后缀树。构建树后，您将按级别顺序遍历它。以下代码可以解决问题。它在 Java 中：

包 org.algocode；

导入 java.util.ArrayDeque；导入 java.util.Queue；

公共类 TernaryStringCombinator {

```
private static final int MAX_SIZE = 10000;

public static void main(String[] args) throws Exception {

    // Read the input string.
    String str = "abac";
    if (str == null || str.length() > MAX_SIZE)
        throw new Exception(
                "Error! Input string is either null or greater than maximum allowed "
                        + MAX_SIZE);
    // Create the suffix tree
    SuffixTree st = new SuffixTree(str);
    st.levelOrderTraverse();
    // You deduct one here because you don't want to count the root
    // placeholder node.
    System.out.println("Total nodes in tree " + (st.size() - 1));
    // You deduct one here because you don't want to count the original
    // string.
    System.out.println("Total substrings with only one or two chars "
            + st.size2char());
}

/*
 * A suffix tree is a tree of all possible contagious substrings of a
 * string. It is a kind of a Trie. For example, for a given input string,
 * ABBCD, the tree will store: ABBCD BBCD BCD CD D
 */
private static class SuffixTree {

    private Node root;
    private String s;
    private int size;
    private int size2char;

    SuffixTree(String s_) throws Exception {
        s = s_.toLowerCase();
        size2char = s.length();
        for (int i = 0; i < s.length(); i++)
            insert(s.substring(i));

    }

    private void insert(String value) throws Exception {
        if (root == null) {
            root = new Node();
            size++;
        }
        insert(root, value, 0);

    }

    // This is a recurrsive call to do the insertion
    private void insert(Node node, String value, int index)
            throws Exception {
        Node next = null;
        switch (value.charAt(index)) {
        case 'a':
            if (node.getA() == null)
                createChildLink(node, value.charAt(index));
            next = node.getA();
            break;
        case 'b':
            if (node.getB() == null)
                createChildLink(node, value.charAt(index));
            next = node.getB();
            break;
        case 'c':
            if (node.getC() == null)
                createChildLink(node, value.charAt(index));
            next = node.getC();
            break;
        default:
            throw new Exception("Error! Character is not permitted. "
                    + value);
        }
        if (index < (value.length() - 1)) {
            insert(next, value.substring(index + 1), 0);
        }
    }

    void levelOrderTraverse() {
        if (root == null || root.isLeaf())
            return;
        Queue<Node> q = new ArrayDeque<Node>();
        if (root.getA() != null)
            q.add(root.getA());
        if (root.getB() != null)
            q.add(root.getB());
        if (root.getC() != null)
            q.add(root.getC());
        while (!q.isEmpty()) {
            Node n = (Node) q.poll();
            // Only show if path has a color of 0 (two characters). Also the original
            // string is not counted as a substring.
            if (n.color() == 0) {
                if (n.myPath().length() > 1 && !n.myPath().equalsIgnoreCase(s)) {
                    System.out.println("Two or more char path = "
                            + n.myPath());
                    size2char++;
                }
            }

            if (n.getA() != null)
                q.add(n.getA());
            if (n.getB() != null)
                q.add(n.getB());
            if (n.getC() != null)
                q.add(n.getC());

        }

    }

    Node root() {
        return root;
    }

    int size() {
        return size;
    }

    int size2char() {
        return size2char;
    }

    private void createChildLink(Node parent, char childVal)
            throws Exception {
        Node child = new Node(parent, childVal);
        size++;
        switch (childVal) {

        case 'a':
            parent.setA(child);
            break;
        case 'b':
            parent.setB(child);
            break;
        case 'c':
            parent.setC(child);
            break;
        default:
            throw new Exception("Error! Character is not permitted. "
                    + childVal);
        }

    }

}

/*
 * We will define an inner class to store a suffix tree node. Since it is a
 * ternary string, we will have three child nodes of each string.
 */
private static class Node {
    private Node parent;
    private Node aLink;
    private Node bLink;
    private Node cLink;
    private char value;
    private String path;
    // Color of a path. 0 if only one or two chars. 1 if all three are
    // present in path.
    private int color = 0;

    Node(Node parent_, char value_) {
        value = value_;
        parent = parent_;
        // Eagerly insert path
        path = getPath();
        // Eagerly calculate color. If my parent has a 1, then I will
        // also be 1\. If my parent has 0, then addition of myself can create
        // my color to 0\. This means that if my parent's path already has
        // three
        // characters, then I would be on a three character path.
        if (parent.color() == 1)
            color = 1;
        else
            colormyself();
    }

    Node() {
    };

    void setA(Node aLink_) {
        this.aLink = aLink_;
    }

    void setB(Node bLink_) {
        this.bLink = bLink_;
    }

    void setC(Node cLink_) {
        this.cLink = cLink_;
    }

    Node getParent() {
        return parent;
    }

    Node getA() {
        return aLink;
    }

    Node getB() {
        return bLink;
    }

    Node getC() {
        return cLink;
    }

    char getValue() {
        return value;
    }

    int color() {
        return color;
    }

    // A special method to return combined string of parent
    private String getPath() {
        if (parent == null)
            return null;
        String path = parent.myPath();
        if (path == null)
            return String.valueOf(value);
        StringBuilder stb = new StringBuilder();
        stb.append(path);
        stb.append(value);
        return stb.toString();

    }

    String myPath() {
        return path;
    }

    boolean isLeaf() {
        return aLink == null && bLink == null && cLink == null;
    }

    private void colormyself() {
        boolean sawA = false;
        boolean sawB = false;
        boolean sawC = false;
        for (char c : path.toCharArray()) {
            switch (c) {
            case 'a':
                sawA = true;
                break;
            case 'b':
                sawB = true;
                break;
            case 'c':
                sawC = true;
                break;
            }

            if (sawA && sawB && sawC) {
                color = 1;
                break;
            }

        }

    }

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:58:12.667

假设你的字符串的长度是`n`

所以结果将是：`2*n-1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T06:22:19.373

```
static void ternaryStringSubstring(String A){
        System.out.println("input ternary string :"+A);
        int output = 0;

        for(int i=0;i<A.length();i++){
            String newStr = "";
            for(int j=i+1;j<=A.length();j++){
                newStr = A.substring(i, j);
                boolean isTernary = true;// Keep track of long loop
                List<String> l = new ArrayList<String>();
                for(int k=0;k<newStr.length();k++){
                    String sew = newStr.substring(k, k+1);
                    if(!l.contains(sew)){
                        l.add(sew);
                    }
                    if(l.size()>2){
                        isTernary = false;//In case its a long string, it would break
                        break;
                    }
                }
                if(isTernary){
                    output = output+1;
                }

            }

        }

        System.out.println("output :"+output);

    } 
```

让我知道更优化的解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T19:17:15.490

遍历输入字符串，逐个考虑字符。在每次迭代中，有 10 个计数器来计算不同类型的子字符串。假设您正在考虑一个职位`p`；那么不同类型的子串是：

1.  那些在 position 之前结束的`p`；我叫它`result`，因为当算法停止时，它会包含答案
2.  那些在 position`p`或之后结束，并且只包含 'a' 字符的那些；叫`aa`
3.  那些以 position`p`或更晚结尾，并且只包含 'a' 和 'b' 字符的那些；叫`ab`
4.  与上述类似；叫`ac`
5.  与上述类似；叫`ba`
6.  与上述类似；叫`bb`
7.  与上述类似；叫`bc`
8.  与上述类似；叫`ca`
9.  与上述类似；叫`cb`
10.  与上述类似；叫`cc`

`p`将每个计数器从位置更新为很容易`p+1`，例如，如果位置处的字符`p`是 'a'，则：

*   将所有计数器添加到`result`, 以说明以结尾的所有子字符串`p`
*   有可能继续从 'aaaaa' 到 'aaaaaa'，所以增加计数器`aa`
*   可以将“a”附加到“ba”类型的任何子字符串
*   可以将“a”附加到“ab”类型的任何子字符串，使其成为“ba”，因此将计数器添加`ab`到`ba`
*   可以将“a”附加到“b”类型的任何子字符串，使其成为“ba”，因此将计数器添加`b`到`ba`
*   无法将“a”附加到任何其他子字符串，因此将所有其他计数器设置为零

代码片段：

```
...
int result = 0;
int counters[3][3] = {{0}}; // [0][0] is aa; [0][1] is ab, etc
int L, x, y; // L represents the current Letter; x and y represent other letters
int p; // position in input string

for (p = 0; ; p++)
{
    for (y = 0; y < 3; y++)
        for (x = 0; x < 3; x++)
            result += counters[y][x];
    switch (str[p])
    {
    case 'a': L = 0; x = 1; y = 2; break;
    case 'b': L = 1; x = 2; y = 0; break;
    case 'c': L = 2; x = 0; y = 1; break;
    case '\0': return result;
    default: abort();
    }

    counters[L][L] += 1;
    counters[x][L] += counters[x][x] + counters[L][x];
    counters[y][L] += counters[y][y] + counters[L][y];
    counters[L][x] = 0;
    counters[x][x] = 0;
    counters[y][x] = 0;
    counters[L][y] = 0;
    counters[x][y] = 0;
    counters[y][y] = 0;
} 
```

奇怪的是，此代码为 string 输出 10（而不是 9），为 string 输出`bcabb`18（而不是 17）`abbaccb`。我把它作为一个有趣的练习让你发现缺少哪个子字符串......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-11T19:22:47.123

首先，我可以看到您正在打印重复的元素。我假设字符串的大小是'n'。因此，无论它们是否重复，您都必须打印 n 个元素。两个连续元素的相同保持，因此取'n-1'。到目前为止的总数是'2n-1'。现在搜索 2 个连续元素并为其添加“+2”（前提是前面和后面的字符不为空）。现在搜索 3 个连续元素并总共添加“+3”。重复此操作直到“n”，因为可能有“n”个重复字符。全部添加。希望这可以帮助。

# .net - 如何从 System::IO::MemoryStream 中提取最后 N 个字节？

> ID：12709834
> 
> 赞同：0
> 
> 时间：2012-10-03T13:44:17.267
> 
> 标签：.net, c++-cli, subset, memorystream, extraction

我有一个`System::IO::MemoryStream`从 FTP 客户端添加的内容。如何检索它的最后 N 个字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:47:06.550

如果您知道流的长度，请使用[Seek](http://msdn.microsoft.com/en-us/library/system.io.memorystream.seek.aspx#Y0)方法并阅读..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:48:58.683

使用[Seek](http://msdn.microsoft.com/en-us/library/system.io.memorystream.seek.aspx#Y0)方法`SeekOrigin::End`指定与流末尾的偏移量，然后读取数据。

```
int n = ...;
Stream^ s = ...;

s->Seek(-n, SeekOrigin::End); // minus n because we want n bytes back from the end.
array<Byte>^ data = gcnew array<Byte>(n);
s->Read(data, 0, n); 
```

# ios - iOS CoreData 与自身的反向关系

> ID：12709842
> 
> 赞同：3
> 
> 时间：2012-10-03T13:44:43.063
> 
> 标签：ios, core-data, relationship, inverse

我正在尝试构建一个类似于 Twitter 用户的 CoreData 模型，当用户可以有许多其他用户关注他并且有许多其他用户关注他时。我附上了我尝试使用的模型，但似乎检索追随者变得复杂。处理这种情况的最佳方法是什么？

![在此处输入图像描述](../Images/fe07e3ce4f45fda0c6f6428132afb2ee.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:58:11.677

我认为您需要创建第二个关系 ( `followedBy`) 并使其相反。

# php - 表达式引擎成员字段 - 显示所有字段类型

> ID：12709843
> 
> 赞同：0
> 
> 时间：2012-10-03T13:44:45.470
> 
> 标签：php, codeigniter, expressionengine

嗨，我正在尝试在 EE2 中为我们的成员添加上传字段和单选按钮字段，但是在添加自定义成员字段时，您只能选择文本输入、文本区域或下拉[http://expressionengine.com/user_guide /cp/members/custom_member_fields_edit.html#field-type](http://expressionengine.com/user_guide/cp/members/custom_member_fields_edit.html#field-type)

无论如何都可以访问自定义成员字段的 EE 中的所有字段类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:55:16.280

对于那些比较各种解决方案的人，Focus Lab 写了一篇很棒的博客文章，比较了主要的成员字段类型附加组件： http: [//focuslabllc.com/blog/member-profile-add-ons-in-expressionengine](http://focuslabllc.com/blog/member-profile-add-ons-in-expressionengine)

上面 Derek 的建议中缺少的是 SafeCracker 注册。我自己从未使用过它，但 Justin aka ObjectiveHTML 也是一个很酷/好/有信誉的家伙。

话虽如此，对于 TL;DR 人员来说，Focus Lab 认为 Zoo Visitor 是最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:34:10.723

不是本地的，没有。但是您应该查看两个附加组件，它们都可以为您提供所需的灵活性 - 两者都来自知名的开发人员。

*   [简介：编辑](http://devot-ee.com/add-ons/profileedit)
*   [动物园游客](http://devot-ee.com/add-ons/zoo-visitor)

# iphone - FormSheet UIWebView 内的 HTML 页面缩放到全宽

> ID：12709845
> 
> 赞同：1
> 
> 时间：2012-10-03T13:44:51.397
> 
> 标签：iphone, html, ios, uiwebview

我在 UIWebView 中显示 HMTL 页面。该页面显示为表单内的模式视图控制器。

现在 HTML 具有以下视口选项：

```
<meta name="viewport" content="width=device-width, initial-scale=1,user-scalable = no,maximum-scale=1.0, minimum-scale=1.0" /> 
```

当页面显示时，页面是可滚动的，因为设备宽度似乎被用作宽度而不是 ViewController 的宽度。

我在 iPhone 上使用相同的 HTML，所以我不希望有两个不同的 HTML 文件。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:57:45.770

我设法这样做：

```
// Update the viewport for the iPad
if ($(window).width() > 500) { 
  $('meta[name=viewport]').attr('content','width=500, initial-scale=1,user-scalable = no');
} 
```

# tfs - TFS 合并和分支之间的差异

> ID：12709846
> 
> 赞同：1
> 
> 时间：2012-10-03T13:44:52.107
> 
> 标签：tfs, diff, branching-and-merging

我正在实现一个 TFS 分支结构，其中有一个 MAIN 集成分支、一个包含发布到生产的代码的生产分支和一个开发分支。Dev 和 Prod 都从 Main 分支出来。

任何并发开发都将在从开发分支分支出来的子分支上完成，我希望对常规开发分支所做的任何更改都可以根据需要合并回子分支。我看不到任何自动化合并的方法，但我想到的一件事是有一个每晚或每周的差异过程，它查看两个分支并发送一封电子邮件报告，说明开发分支和每个子分支之间的差异。

有没有人对此有任何想法，是否有任何产品可以用来进行自动差异和报告电子邮件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:30:25.723

这将取决于 DEV 分支的预期稳定性。但是，一个相当简单的解决方案是在 DEV 分支上构建 CI，当它成功时向需要从它转发集成的人发送通知电子邮件。

然而，这对我来说似乎有点 hack，因为这个 CI 构建很可能每天至少触发一次。这意味着电子邮件通知将成为垃圾邮件。为什么不让开发人员在一天开始时做的第一件事就是从父分支向前集成？这使合并保持较小，因此解决冲突应该相当简单。

如果两个分支不断合并，您可能不需要子分支。

无论如何，带有成功电子邮件通知的 CI 构建将满足您的要求。每次分支更改时，都会通知每个人。

# javascript - 点击嵌入式 Youtube 播放器 div

> ID：12709851
> 
> 赞同：0
> 
> 时间：2012-10-03T13:45:09.673
> 
> 标签：javascript, jquery, css

我有一个`div`使用 jQuery 来扩展/收缩的点击。这适用于图像，但不适用于嵌入的 Youtube 视频。有什么方法可以点击`div`包含视频的，以便我可以更改的尺寸`div`？

注意：我打算仅使用它来扩展`div`：一旦`div`扩展，我会让`div`Flash 播放器捕捉到点击，以免干扰视频控件。

[示例小提琴](http://jsfiddle.net/dotancohen/6B3Ay/)。请注意单击`div`包含视频以展开它是多么困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:02:28.770

我在这里创建了一个示例：http: [//jsfiddle.net/RASG/aZvqN/](http://jsfiddle.net/RASG/aZvqN/)

看看你是否想要类似的东西。

如果没有，您将不得不设置一个 jsfiddle 来帮助我们帮助您:)

# python - Python 使用给定窗口运行累积总和

> ID：12709853
> 
> 赞同：8
> 
> 时间：2012-10-03T13:45:12.903
> 
> 标签：python, list, numpy, list-comprehension

我想要做的是生成一个 numpy 数组，它是给定某个窗口的另一个 numpy 数组的累积和。

例如，给定一个数组，`[1,2,3,4,5,6,7,8,9,10,11,12]`假设我想要一个窗口为 3 的累积和。我想要的输出是`[1,3,6,9,12,15,18,21,24,27,30,33]`. 我有一个相对较大的 numpy 数组，想用 400 的窗口做一个累积和。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-03-05T18:19:09.097

这可能是一个更简单的答案，基于减去移位的 cumsums。

```
>>> a = np.array([1,2,3,4,5,6,7,8,9,10,11,12])
>>> b = a.cumsum()
>>> b[3:] = b[3:] - b[:-3]
>>> b
array([ 1,  3,  6,  9, 12, 15, 18, 21, 24, 27, 30, 33]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T17:01:32.283

你应该使用 numpy，除非你真的不关心速度（尽管我更喜欢它）。因此，您可以使用卷积或`stride_tricks`基于方法（这些方法并不明显，但可以很好地解决这些问题）。

例如给定一个这样的函数（你也可以找到更多更好的版本）：

```
def embed(array, dim, lag=1):
    """Create an embedding of array given a resulting dimension and lag.
    The array will be raveled before embedding.
    """
    array = np.asarray(array)
    array = array.ravel()
    new = np.lib.stride_tricks.as_strided(array,
                                     (len(array)-dim*lag+lag, dim),
                                     (array.strides[0], array.strides[0]*lag))
    return new 
```

你可以做：

```
embedded = embed(array, 400)
result = embedded.sum(1) 
```

哪个是内存效率高的（嵌入或任何你称之为的，只会创建一个视图）并且速度很快。当然，另一种方法是使用卷积：

```
np.convolve(array, np.ones(400), mode='valid') 
```

我不知道您是否也想要非完整窗口，这与使用`mode='full'`（默认）进行卷积相同。对于另一种方法，必须以其他方式处理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T13:49:23.877

```
In [42]: lis=[1,2,3,4,5,6,7,8,9,10,11,12]

In [43]: w=3       #window size

In [44]: [sum(lis[i-(w-1):i+1]) if i>(w-1) else sum(lis[:i+1])  for i in range(len(lis))]
Out[44]: [1, 3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33]

In [45]: w=4

In [46]: [sum(lis[i-(w-1):i+1]) if i>(w-1) else sum(lis[:i+1])  for i in range(len(lis))]
Out[46]: [1, 3, 6, 10, 14, 18, 22, 26, 30, 34, 38, 42] 
```

对于 python 2.4 或更低版本，更改三元运算符：

`(falseValue, trueValue)[condition]`代替`trueValue if condition else falseValue`

```
[(sum(lis[:i+1]),sum(lis[i-(w-1):i+1]))[i>(w-1)]  for i in range(len(lis))] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T17:29:56.187

[seberg 的](https://stackoverflow.com/a/12713297/1015178)答案比我的更好，更通用，但请注意，您需要对样本进行零填充以获得所需的结果。

```
import numpy as np
from numpy.lib.stride_tricks import as_strided as ast
samples = 100
window = 3
padding = np.zeros(window - 1)
# zero-pad your samples
a = np.concatenate([padding,np.arange(1,samples + 1)])
newshape = (len(a) - window,window)
newstrides = a.strides * 2
# this gets you a sliding window of size 3, with a step of 1
strided = ast(a,shape = newshape,strides = newstrides)
# get your moving sum
strided.sum(1) 
```

# iphone - 如何使我的界面方向自动旋转为纵向？

> ID：12709857
> 
> 赞同：0
> 
> 时间：2012-10-03T13:45:25.467
> 
> 标签：iphone, ios, xcode, cocoa

我试图让我的一个 xib 文件旋转到纵向，就好像它首先是默认设置一样。

我让我的应用程序只支持横向。在 plist 中，我将“初始界面方向设置为横向（右主页按钮）”，因为大多数应用程序在横向模式下运行。

我在我的实现文件中放置的代码是：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
// Return YES for supported orientations

return interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight; 
```

}

现在，当更改为需要界面处于纵向模式的视图控制器时，我已将此代码放在 xib 文件的实现文件中，以使其进入纵向模式并单独支持纵向模式。因此，即使设备处于横向模式，它仍然会以纵向模式运行视图。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
// Return YES for supported orientations

return interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortrait; 
```

}

虽然这似乎不起作用。它只是保持横向模式并挤压图像视图和我放置在 xib 文件中的其他对象。如何让 xib 旋转到纵向模式？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:28:16.847

我的经验表明，在 plist 文件中设置 UIInterfaceOrientation 没有任何效果。另一方面，您可以通过设置在启动时强制一个方向（例如横向）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft];
    // your stuff
{ 
```

您稍后也可以使用此方法来强制设备的逻辑方向。注意：截至[本文档，这是 Apple 的“官方”方法](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:18:14.250

```
 change your Xib in Landscape Mode only and then click on your project file then target   then select only Landscape mode or Portrait Mode(left/right or both) 
  then go to this method 
I am using Landscape Mode.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  // Return YES for supported orientations
return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

![在此处输入图像描述](../Images/8ee760ac78ce0e371c06e8df460b372c.png)

# java - 在不需要时使用 super 有什么害处吗？

> ID：12709862
> 
> 赞同：9
> 
> 时间：2012-10-03T13:45:50.780
> 
> 标签：java, coding-style

此消息仅适用于 Java。如果方法在超类中，则可以通过两种方式调用该方法：

```
foo();
super.foo(); 
```

总是做后者有什么害处吗？作为一种编码风格，我更喜欢后者，因为方法调用的来源一目了然。在任何情况下“超级”将不存在或不做我认为它会做的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T13:48:03.547

我认为您可能遇到的唯一危害是当您想使用多态性时，因此，如果您调用`foo()`并且某些子类覆盖 foo，那么效果将与调用时不同`super.foo()`，基本上，这取决于您设计代码的方式以及什么目的。

希望这可以说清楚。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T13:51:36.937

作为一般规则，你应该只`super.foo()`在你的类`foo()`方法中使用。否则，通常会违背 OOP 思维。

> 因为一目了然的方法调用来自哪里

在 OOP 中，您不应该想知道方法调用“从何而来”。如果您的程序（或您的想法）依赖于此，那么您就有潜在的麻烦（并且当有人决定覆盖该方法时可能会遇到实际麻烦）。该方法`myobject.foo()`必须从外部看为myobject类的方法；该方法是否实际在其父类的具体类中实现并不重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T13:47:29.897

我会说做前者有更大的危害，因为不清楚它是否是超类的方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-03T13:50:42.220

是的，这基本上打破了继承链。

您不允许继承机制选择要使用的函数，即使在从该函数派生的类中也是如此。

关键`super.foo()`是允许您仅在需要时指定它，并且您知道没有其他行为会是好的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T14:02:08.237

如果您不想明确避免在子类中使用覆盖方法，则不应使用 super。如果以后有人想要覆盖子类中的方法，总是使用 super 可能会导致麻烦。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T13:47:48.720

如果您打算在超类上调用该方法，而不是在`foo()`没有`super.`. 如果有人`foo()`在子类中进行了覆盖，则超级调用确实会调用与以前相同的方法，但`super`现在省略将调用被覆盖的方法。这取决于您对该方法调用的意图。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-03T13:50:57.957

这取决于。

如果`foo()`声明为`final`，则完全没有区别。如果`foo()`未声明为，则子类*可以*覆盖超类中的声明**并**完全改变预期的行为。`final`*`foo()`*

 *如果您创建自己的 class `final`，则可以防止它被子分类，并确保保留原始意图。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-03T13:56:35.483

我会说这可能表明你应该重新考虑你的设计。

如果您总是通过 super.foo() 调用该功能，那么您以后会阻止自己重写该函数，并且如果您不想拥有重写该函数的能力，那么也许您不应该将继承用作方法用于访问此功能。

我听说过的一个设计原则是“优先组合而不是继承”，原因是你的代码通过组合而不是继承变得更加灵活。而且，如果您没有获得继承的积极方面（能够覆盖函数），那么不使用继承可能更明智。*

# facebook - 如何使用 facebook API 获取过去的新闻源？

> ID：12709863
> 
> 赞同：4
> 
> 时间：2012-10-03T13:45:52.947
> 
> 标签：facebook, facebook-graph-api, web-applications

获取新闻源的 API 是：[https](https://graph.facebook.com/me/home?access_token=) ://graph.facebook.com/me/home? access_token= &limit=1000&untill=

它返回带有“下一个”网址的分页提要输出以获取以前的提要。

但是，它会在超过一定时间后停止返回新闻源。因此，几天的新闻提要仅可用于解析。

有没有办法使用 facebook api 获得更多历史新闻源？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:01:58.953

如果您查看[图形 API 文档页面](https://developers.facebook.com/docs/reference/api/)，`/me/home`仅限于 1-2 周的历史记录，并且已属于“我们不关心这个”类别：

> `/me/home`检索新闻提要的过时视图。这是目前已知的问题，我们没有任何近期计划将它们恢复到平价状态。

改为使用`/me/feed`。

您可以使用`since`和`until`参数从用户的提要中获取历史数据。这将为您提供 2012 年 8 月 15 日至 20 日之间出现的帖子。

```
/me/feed?since=2012-08-15&until=2012-08-20 
```

返回的数据`/me/feed/`也是有限的。这些限制没有明确说明，但我从没想过能够通过一次 API 调用访问超过 30 天的帖子。

# string - awk sed - 将文本与文件进行比较，搜索字符串，查找同一文件中的重复实例，在 EOL 处添加一些措辞

> ID：12709865
> 
> 赞同：1
> 
> 时间：2012-10-03T13:46:05.327
> 
> 标签：string, text, sed, awk, compare

我有一个大文本文件，其中包含类似的条目

我的目标是确定是否存在父文件夹，我的意思是，例如 /FS7_100x/FILE04 是否是该文件夹的父文件夹：/FS7_100x/FILE04/BU-D/PROJECT CONTROL OFFICE

这两条路径之间的关系是它们在某些时候共享相同的路径。我为什么要这样做？因为这样做我知道该路径使用的空间是否已经计入父文件夹。

第三个字段填充了文件系统路径，我想将每行上的每个路径与同一个文件、相同的第三个字段进行比较，在路径的末尾添加一个斜杠 /。这意味着：比较：/FS7_100x/FILE04/BU-D/PROJECT CONTROL OFFICE 与 /FS7_100x/FILE04/BU-D/PROJECT CONTROL OFFICE & /FS3_200g/FILE12/BU/AGENCY/GOLDMINE & /FS3_200g/FILE12

例如，我想查找 /FS7_100x/FILE04/ 和 /FS3_200g/FILE12/

文件 1

```
\\FILE04\BUET-PCO;\\SERVER24\OFFICE;/FS7_100x/FILE04/BU-D/PROJECT CONTROL;
\\FILE12\BUAG-GOLDMINE$;\\SERVER24\GOLDMINE;/FS3_200g/FILE12/BU/AGENCY/GOLDMINE;
\\x\a$;\\SERVER24\DFS\somethingelse;/FS3_200g/FILE12;
\\z\o;\\SERVER24\DFS\blah;/FS7_100x/FILE04; 
```

字段用“;”分隔

通过这种方式，我可以确定父文件夹已经列在 file1 上，并且我想在行尾添加一些单词（该行已经包含在另一个行中），例如说：物理路径是 Line 的子文件夹#

所需的输出：

```
\\FILE04\BUET-PCO;\\SERVER24\OFFICE;/FS7_100x/FILE04/BU-D/PROJECT CONTROL;Physical path is a subfolder of Line#4
\\FILE12\BUAG-GOLDMINE$;\\SERVER24\GOLDMINE;/FS3_200g/FILE12/BU/AGENCY/GOLDMINE;Physical path is a subfolder of Line#3
\\x\a$;\\SERVER24\DFS\somethingelse;/FS3_200g/FILE12;
\\z\o;\\SERVER24\DFS\blah;/FS7_100x/FILE04; 
```

我做了什么：

```
setlocal enableextensions 
del lugares.csv
for /f "tokens=1,2,3 delims=;" %%i in (file1.csv) do (
for /f "tokens=*" %%p in ('findstr /N /i /r /C:"%%k/" file1.csv') do (
echo Original %%k;%%i;%%j; --- repeated with Line# %%p >>dupli.txt
)
)
pause 
```

我不想创建一个名为 dupli.txt 的新文件，我希望将所有数据倒入原始文件：file1.csv，因此我的解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:32:07.280

虽然您可以使用`sed`它，但我认为这是为之而生的东西`awk`。

如果您的文本文件很长，那么我认为分两遍执行此操作最有意义，这样您就不必将整个内容加载到内存中。

首先，您会得到一份潜在父母的名单：

```
awk -F\; '{print $3}' file1 > paths.txt 
```

现在您将其读入一个数组，并将其与文件中的其他行进行比较。我调用了文件**`pathrefs.awk`**。命令行将是：

```
awk -f pathrefs.awk paths.txt file1 
```

的内容`pathrefs.awk`是：

```
BEGIN {
        FS=";"
}

# First, process the paths.txt file...
NR==FNR {
        paths[$0"/"]=NR;
        next;
}

# Next, process the second file, using data gathered from the first file.
{
        delete ref;

        # Make a reference list of paths that match the current line's $3
        for (i in paths) {
                if (index($3,i)==1) {
                        ref[paths[i]];
                }
        }

        # If we found anything...
        if (length(ref)) {
                 $0=$0 "Parent:";
        }

        # Show the list.
        for (i in ref) {
                $0=$0 " #" i;
        }
}

# This is short-hand for "print;"
1 
```

这是我使用的示例输入数据：

```
this;abcde;/FS7_100x/FILE04/BU-D/PROJECT CONTROL OFFICE;;;;;;;;;;
that;bcdef;/FS3_200g/FILE12/BU/AGENCY/GOLDMINE;;;;;;;;;;;
foo;cdefg;/FS3_200g/FILE12;;;;;;;;
bar;defgh;/FS7_100x/FILE04;;;;;;;;;;;
baz;efghi;/FS7_100x/FILE04/BU-D;;;;;;;;;;; 
```

这是脚本生成的输出：

```
this;abcde;/FS7_100x/FILE04/BU-D/PROJECT CONTROL OFFICE;;;;;;;;;;Parent: #4 #5
that;bcdef;/FS3_200g/FILE12/BU/AGENCY/GOLDMINE;;;;;;;;;;;Parent: #3
foo;cdefg;/FS3_200g/FILE12;;;;;;;;
bar;defgh;/FS7_100x/FILE04;;;;;;;;;;;
baz;efghi;/FS7_100x/FILE04/BU-D;;;;;;;;;;;Parent: #4 
```

请注意，我已经更改了您在问题中指定的措辞，以便结果在 StackOverflow 上显示得更好。用你喜欢的任何东西代替`"Parent:"`.

如果您认为您可以处理将整个文件加载到内存中的内存要求，那么您可以将整个过程写入单个脚本。到目前为止，我所写的内容描述了您将采用的逻辑。

# php - 如何在 php 类上使用准备好的语句（命名参数）

> ID：12709866
> 
> 赞同：2
> 
> 时间：2012-10-03T13:46:06.903
> 
> 标签：php, class, pdo, prepared-statement, named-parameters

这是我在此的头一篇博文。我在网站上搜索过，但没有匹配项。无论如何，我想知道如何在类上使用命名参数。所以 pdo 基本形式是这样的。

```
$query = $bdd->prepare('SELECT * FROM table WHERE login = :login AND pww = :pww');
$query->execute(array('login' => $login, 'pww' => $pww)); 
```

而且我想将它集成到一个类上，而不管参数的数量如何。目前，我有这个代码

[http://pastebin.com/kKgSkaKt](http://pastebin.com/kKgSkaKt)

对于参数，我使用类似的东西（这是错误的并且容易被注入）

```
require_once 'classes/Mysql.class.php';
$mysql = new Mysql();
$sql = 'SELECT * FROM articles WHERE id = '.$_GET['id'].' LIMIT 1';
$data = $mysql->select($sql); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:44:49.230

所以看来我已经弄清楚了，诀窍是向函数添加一个可选参数，当你需要使用准备好的语句（命名参数）时，你可以使用它。所以功能类似于

```
public function selectAll($reqSelect, $param = null) {
                $result = parent::prepare($reqSelect);
          //Check whether the parameter was passed or not
                if (is_null($param)) {
                    $result->execute();
                    $resultat = $result->fetchAll();
                    return $resultat;
                }else{
          //Binding the parameters
                   $result->execute($param);
                   $resultat = $result->fetchAll();
                    return $resultat;
                }
                $result->closeCursor();
        } 
```

为了应用它，它就像

```
//First param, the SQL. Here we have named parameters, so we need them to get bind
$sql = 'SELECT * FROM articles WHERE publish = :number';
//Second param, the parameters that will get bind with the named ones
    $param = array(':number' => 1);

    $query = $mysql->selectAll($sql, $param);

    foreach ($query as $row) {
        extract($row);
        echo $title . '<br />';
    } 
```

我不知道这是否被认为是最佳实践，安全甚至正确。如果我弄错了，请随时纠正我。

# ios - iOS中的SQLite select语句断言失败

> ID：12709867
> 
> 赞同：2
> 
> 时间：2012-10-03T13:46:08.387
> 
> 标签：ios, select, sqlite

我在这个声明中得到一个断言失败；

```
SELECT keyphrase_id, keyphrase, url, googlename FROM keyphrases left join domains on keyphrases.domain_id = domains.domain_id where domain_id = ? and ifnull(keytime,'') != ? order by keyphrase desc; 
```

我通过一个 SQL 查询检查器运行它，它突出显示了“！=”位，指出它的语法不正确。这对我来说没有意义，因为我以前使用过这个语句；

```
SELECT keyphrase_id, keyphrase, url, googlename FROM keyphrases left join domains on keyphrases.domain_id = domains.domain_id  where ifnull(keytime,'') != ? order by keyphrase desc; 
```

这就是我绑定`where`值的方式；

```
sqlite3_bind_int(selStmt, 1, domain_ID);

sqlite3_bind_text(selStmt, 2, [dateString UTF8String] , -1, SQLITE_TRANSIENT); 
```

我根本无法解决这个问题，这绝对与打开的数据库或执行时的语句等无关，`nil`因为我正在更改的方法的唯一组件是 SQL 语句。

任何人都可以提出任何可能的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:38:21.247

`sqlite3`如果您从任何暗示错误的函数调用中获得返回码，请再次调用[`sqlite3_errmsg`](http://www.sqlite.org/c3ref/errcode.html)并查看错误消息，例如

```
NSLog(@"%s err: %s", __FUNCTION__, sqlite3_errmsg(database)); 
```

这会告诉你出了什么问题。

就个人而言，我会认为从句中的引用`domain_id`是`where`模棱两可的，但`sqlite3_errmsg`会准确地告诉你发生了什么。

# coldfusion - 将 PHP 代码转换为 Coldfusion

> ID：12709868
> 
> 赞同：2
> 
> 时间：2012-10-03T13:46:08.143
> 
> 标签：coldfusion

目前我正在学习一些 Coldfusion 编码，我正在将我的整个旧 PHP 网站转换为时尚的 Coldfusion 代码，但我被几行 PHP 卡住了，我真的不知道我应该如何转换这些将代码行转换为正确的 Coldfusion 代码：

```
function access()   
{   
  $accesscode = $_GET["accesscode"];
  $time = (int)$_GET["time"];        
  $ip = $_GET["ip"];                

  // Time variable must be identical 
  if( time() < $time )  
      {  
      die("Locale time is ". (time()-$time) ."sec. is not correct.");  
      }  

 // Check client IP
  if( $ip <> $_SERVER["REMOTE_ADDR"] )  
      {  
      die("Client IP ".$_SERVER["REMOTE_ADDR"]." is not identical as ".$ip." used."); 
      }  

  // Time > 10 minutes is no access
  for ($c=0;$c<=3;$c++)   
    {   
    $t = substr(strftime("%Y%m%d%H%M", time()-($c*600)),0,11);   
    $hash = md5($ip. "9709f31be0". $t);   
    if( $hash == $accesscode ) return true;  
    }  

return false;  
}  

if (!access())      
{   
  die ("Access denied..");   
}   
Echo "Access approved."; 
```

如果有人可以帮我提供一些关于如何转换这些代码行的提示，我会非常高兴。

非常感谢提前，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:09:27.100

有几种方法可以做到……但我不得不做出一些假设，因为我对 php 不太了解。

```
<cffunction name="access" access="public" returntype="struct">
  <cfargument name="accesscode" type="string" required="yes">
  <cfargument name="time" type="string" required="yes">
  <cfargument name="ip" type="string" required="yes">

  <cfset var temp = StructNew()>
  <cfset temp.time = Now()>
  <cfset temp.errormsg = "">

  <cfif temp.time lt arguments.time>
     <cfset temp.errormsg = "(your error message here)">
  </cfif>

  <cfif cgi.remote_addr neq arguments.ip>
     <cfset temp.errormsg = "(your error message here)">
  </cfif>

  <cfloop index="temp.c" from="0" to="3">
     <!--- not entirely sure what you were doing in here --->
  </cfloop>

  <cfreturn temp>

</cffunction>

<cfset result = access(accesscode="something", time="something", ip="something")>

<cfif result.errormsg neq "">
   <!--- access denied --->
</cfif> 
```

# android - 使用 facebook 登录，用户可以使用位置聊天

> ID：12709869
> 
> 赞同：0
> 
> 时间：2012-10-03T13:46:12.103
> 
> 标签：android, facebook

我正在通过 Q [uickBlox 开发人员（API 文档、代码示例、SDK](http://quickblox.com/developers/Overview#API_User)）.. 我只是想知道是否可以通过 facebook 登录并提取用户信息，然后用户可以进行基于位置的聊天.. 我不想要用户注册..他们应该使用facebook登录并获取他们的信息（姓名，性别，来自fb的性别偏好）..我需要一些建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:02:54.297

是的，有可能：

**IOS：**

1) 通过 Facebook 登录

```
[QBUsers logInWithSocialProvider:@"facebook" delegate:self];

...

// QuickBlox queries delegate
- (void)completedWithResult:(Result *)result{

    // success result
    if(result.success){

        // User Login
        if([result isKindOfClass:QBUUserLogInResult.class]){
            QBUUserLogInResult *res = (QBUUserLogInResult *)result;

            // Your Facebook access token
            NSString *accessToken = res.socialProviderToken;
            NSString *expiresAt = res.socialProviderTokenExpiresAt;

    }else{
        NSLog(@"Errors=%@", result.errors); 
    }
} 
```

2) 检索您的 Facebook 个人资料

```
 NSString *meQuery = [NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=%@", accessToken];

 NSURL *url = [NSURL URLWithString:[meQuery stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
 NSURLRequest *request = [NSURLRequest requestWithURL:url];

 // perform request
 NSURLResponse **response = nil;
 NSError **error = nil;
 NSData *resultData = [NSURLConnection sendSynchronousRequest:request returningResponse:response error:error];

 // set body
 NSString *bodyAsString = [[NSString alloc] initWithData:resultData encoding:NSUTF8StringEncoding];
 SBJsonParser *parser = [[SBJsonParser alloc] init];

 // This is your Facebook profile as dictionary
 NSDictionary *me = [parser objectWithString:bodyAsString];

 [bodyAsString release];
 [parser release]; 
```

3) 基于位置的聊天 - 查看位置示例[http://quickblox.com/developers/SimpleSample-location_users-ios](http://quickblox.com/developers/SimpleSample-location_users-ios) - 这是基于位置的简单聊天，登录后即可

**安卓**

你有没有看到

[地图聊天示例](http://quickblox.com/developers/SuperSample_%28Map_Chat_code_sample%29_Android)？

此示例包含您需要的所有功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:59:33.057

是的，您可以使用 Facebook 帐户登录。阅读 Facebook 集成[链接的官方教程](https://developers.facebook.com/docs/mobile/android/build/)

# database - 可可 c 上的 sqlite3_mutex_enter(v->db->mutex) 可能存在的问题

> ID：12709873
> 
> 赞同：0
> 
> 时间：2012-10-03T13:46:24.210
> 
> 标签：database, sqlite, tags, mutex, rel

我`sqlite3_mutex_enter(v->db->mutex)`对 iOS 应用程序上的错误消息有疑问。案例如下：我开发了一个应用程序，它在启动时在后台对应用程序执行同步。所有调用写入数据库的 SQL 语句都使用 a 进行保护，`NSLOCK`并在完成后解锁。现在的问题是，应用程序用户可以在同步仍在进行时开始使用应用程序。有时我现在确实知道`sqlite3_mutex_enter(v->db->mutex)`在数据库级别上完成了某些事情，有时它可以正常工作。出现这个错误的情况主要是在read语句中。

`sqlite3_mutex_enter(v->db->mutex)`当错误出现时，您有什么想法吗？所有声明都正确完成。真正奇怪的是，即使没有命令告诉数据库连接关闭，SQLITE DB 也会尝试关闭自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:48:49.307

该语句`sqlite3_mutex_enter(v->db->mutex)`仅出现在`sqlite3_reset`. 这个地方的错误很可能是由一个无效的语句指针引起的，可能是一个已经完成的。

# iphone - 为什么表格视图中的标签更改为重用单元格

> ID：12709874
> 
> 赞同：5
> 
> 时间：2012-10-03T13:46:24.947
> 
> 标签：iphone, xcode, ipad, sqlite

我正在创建自定义单元格包含`UILabel`，，`UIImageView`使用常量标签`UILabel`，`UIImageView`使用动态标签，表格有 11 个单元格，前 7 个单元格正确加载，当我更改 1、2 时，8、9、10、11 单元格图像视图发生变化, 3, 4, 分别在表格中的单元格，单元格中的标签也是相同的，我是使用图像来勾选表格中的复选框，`UITapGestureRecognizer`用于更改表格中的图像视图，

我正在使用此代码.....

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier =@"Cell";
    UITableViewCell *cell = [tableview dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] ;
        cell.selectionStyle=UITableViewCellSelectionStyleGray;
        cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
        UIImageView *imageview=[[UIImageView alloc]initWithFrame:CGRectMake(5, 12, 20, 20)];
        imageview.tag=n;
        [cell.contentView addSubview:imageview]; 
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tabimage:)];
        imageview.userInteractionEnabled=YES;
        [imageview addGestureRecognizer:tap];
        imageview.image=[UIImage imageNamed:@"img1.jpeg"];

        UILabel *titleLabel=[[UILabel alloc]initWithFrame:CGRectMake(30, 2, 260,26)];
        titleLabel.tag=222;
        titleLabel.backgroundColor=[UIColor clearColor];
        [cell.contentView addSubview:titleLabel];

        UILabel *dateLabel=[[UILabel alloc]initWithFrame:CGRectMake(30, 31, 260, 13)];
        dateLabel.tag=333;
        dateLabel.font=[UIFont systemFontOfSize:10];
        dateLabel.backgroundColor=[UIColor clearColor];
         [cell.contentView addSubview:dateLabel];
    }
    UIImageView *imageview1=(UIImageView*)[cell.contentView viewWithTag:n];
    if([array containsObject:[NSNumber numberWithInt:imageview1.tag]]) {
       imageview1.image=[UIImage imageNamed:@"img2.jpeg"];  
    } else {
       imageview1.image=[UIImage imageNamed:@"img1.jpeg"];   
    }

    UILabel *titlelable=(UILabel*)[cell.contentView viewWithTag:222];
    titlelable.text=[task objectAtIndex:indexPath.section];
    NSLog(@"%i",indexPath.section);

    UILabel *dateLabel=(UILabel*)[cell.contentView viewWithTag:333];
    dateLabel.text=[date objectAtIndex:indexPath.section];
    n++;
    return  cell;
}

- (void)tabimage:(id)sender {
    UIImageView *iv=(UIImageView *)[sender view];
    int i=iv.tag;
    NSLog(@"------------%i",i);
   if (iv.image==[UIImage imageNamed:@"img1.jpeg"]) {
       iv.image= [UIImage imageNamed:@"img2.jpeg"];
       [array addObject:[NSNumber numberWithInt:i]];
   } else {
      iv.image= [UIImage imageNamed:@"img1.jpeg"];  
      [array removeObject:[NSNumber numberWithInt:i]];
    }
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T15:05:59.120

您应该将您的单元格标识符从静态更改为动态，这将解决您的问题。

你应该替换这个

```
static NSString *CellIdentifier =@"Cell";
UITableViewCell *cell = [tableview dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

有了这个

```
UITableViewCell *cell = [tableview dequeueReusableCellWithIdentifier:[NSString stringWithFormat:@"%d %d"], indexPath.row, indexPath.section]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T14:06:45.067

无论您看到什么问题，使用那个“ `n`”很可能是问题所在。没有充分的理由使用共享变量来标记（和检索）表格视图单元格上的视图。

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`被多次调用，可能同一个cell被调用多次，有时会找到一个cell可以重用，有时不会。

我当然不知道`n`它是什么，以及如何在代码的其他地方使用它，但是在这里每次调用都会更改它，并且在调用此方法时无法做出假设，因此它毫无价值。

您肯定知道每个单元格都有一个带有该标签的图像，但是在第一次运行此方法后是否可以访问它是完全未定义的，因此每次重用您基本上都会得到随机行为（新的单元格或一个重复使用的带有你不知道的标签的标签）。

问自己（或者在另一个问题中问自己）：你想在这里完成什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T11:24:53.583

我正在为我的应用程序获取解决方案，

在我的代码中使用动态单元格标识符

```
NSString *CellIdentifier =[NSString stringWithFormat:@"%i-%i", indexPath.section,indexPath.row]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T06:23:46.803

我建议子类 UITableViewCell 添加所有自定义元素，为其创建设置器。而在 cellForRowAtIndexPath 中，只需调用您的设置器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T06:24:14.283

当您在 if(cell == nil) 块中将标签设置为 imageview 时，意味着将在创建单元格时设置标签。在您的情况下，在通过出列重用这些单元之后创建了 7 个单元。因此，将使用 8 次以前创建的单元格。这就是为什么您的标签与 1,2,3...对于 8,9,10...单元格相同的原因。

好吧，亚历克斯提出了标准的方法来做到这一点。但是如果你还没有使用自定义单元格，你可以试试这个——

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier =@"Cell";
    UITableViewCell *cell = [tableview dequeueReusableCellWithIdentifier:CellIdentifier];
    UIImageView *imageview = nil;    
    if(cell){
        for (UIView *view in cell.contentView.subviews){
            if([view isKindOfClass:[UIImageView class]]){
                    imageview = (UIImageView*)view;
                    break;
            }
        }
    }

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] ;
        cell.selectionStyle=UITableViewCellSelectionStyleGray;
        cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
        imageview=[[UIImageView alloc]initWithFrame:CGRectMake(5, 12, 20, 20)];
        [cell.contentView addSubview:imageview]; 
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tabimage:)];
        imageview.userInteractionEnabled=YES;
        [imageview addGestureRecognizer:tap];
        imageview.image=[UIImage imageNamed:@"img1.jpeg"];

        UILabel *titleLabel=[[UILabel alloc]initWithFrame:CGRectMake(30, 2, 260,26)];
        titleLabel.tag=222;
        titleLabel.backgroundColor=[UIColor clearColor];
        [cell.contentView addSubview:titleLabel];

        UILabel *dateLabel=[[UILabel alloc]initWithFrame:CGRectMake(30, 31, 260, 13)];
        dateLabel.tag=333;
        dateLabel.font=[UIFont systemFontOfSize:10];
        dateLabel.backgroundColor=[UIColor clearColor];
         [cell.contentView addSubview:dateLabel];
    }
    imageview.tag=n;
    if([array containsObject:[NSNumber numberWithInt:imageview.tag]]) {
       imageview.image=[UIImage imageNamed:@"img2.jpeg"];  
    } else {
       imageview.image=[UIImage imageNamed:@"img1.jpeg"];   
    }

    UILabel *titlelable=(UILabel*)[cell.contentView viewWithTag:222];
    titlelable.text=[task objectAtIndex:indexPath.section];
    NSLog(@"%i",indexPath.section);

    UILabel *dateLabel=(UILabel*)[cell.contentView viewWithTag:333];
    dateLabel.text=[date objectAtIndex:indexPath.section];
    n++;
    return  cell;
} 
```

# jquery - 如何将类添加到表中的最后一个 TD，其中是行跨度。使用 jQuery

> ID：12709876
> 
> 赞同：1
> 
> 时间：2012-10-03T13:46:28.220
> 
> 标签：jquery

你好我有这张桌子

```
<table>
<tr>
    <td>n</td>
    <td rowspan=2>n</td>
    <td>n</td>
    <td>n</td>
</tr>
<tr>
    <td rowspan=2>y</td>
    <td>n</td>
    <td rowspan=2>y</td>
</tr>
<tr>
    <td>y</td>
    <td>y</td>
</tr> 
```

我需要按类标记最后一个视觉 TD `.last`。没有行跨度没有问题，我可以使用

```
$('table tr:last td').addClass('last'); 
```

**我需要添加`.last`值`td`y 的类**

一些带有“y”的单元格示例，我想将其标记为女巫类 [http://jsfiddle.net/9gtMa/](http://jsfiddle.net/9gtMa/)

[http://jsfiddle.net/MQh8u/](http://jsfiddle.net/MQh8u/)

[http://jsfiddle.net/zL6Pe/](http://jsfiddle.net/zL6Pe/)

我需要像这样的输出

```
<table>
    <tr>
        <td>n</td>
        <td rowspan=2>n</td>
        <td>n</td>
        <td>n</td>
    </tr>
    <tr>
        <td rowspan=2 class='last'>y</td>
        <td>n</td>
        <td rowspan=2 class='last'>y</td>
    </tr>
    <tr>
        <td class='last'>y</td>
        <td class='last'>y</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:49:08.557

使用多重选择器来获取最后一个`<td>`具有行跨度的选择器`table td[rowspan]:last`，然后`<td>`使用最后一行中的两个 s`table tr:last td`

```
$('table td[rowspan]:last, table tr:last td').addClass('last'); 
```

根据您在[http://jsfiddle.net/qEhng/](http://jsfiddle.net/qEhng/)中的示例，您可以使用 td[rowspan] 找到最大行索引，然后像这样在其上设置类。效率不是很高，但它只会将`.last`类分配给`<td>`具有最高行索引上的行跨度的 s。如果您*只想*分配`.last`到倒数第二行，您可以添加额外的逻辑来检查行索引，但是如果您的行跨度大于 2，这将变得很棘手......

```
$('table tr:last td').addClass('last');
var maxRow = 0;
$('table td[rowspan]').each(function(){
    var row = $(this).parent().parent().children().index($(this).parent());
    if (row>maxRow) maxRow=row;
});
$('table td[rowspan]').each(function(){
    var row = $(this).parent().parent().children().index($(this).parent());
    if (row==maxRow) $(this).addClass('last');
}); 
```

这是仅将`.last`类添加到具有流到最后一行的最大行跨度的 td 的代码 - [http://jsfiddle.net/qEhng/5/](http://jsfiddle.net/qEhng/5/)

```
$('table tr:last td').addClass('last');
var maxRow = 0;
var rowSpan = 0;
$('table td[rowspan]').each(function(){
    var row = $(this).parent().parent().children().index($(this).parent());
    if (row>maxRow){
        maxRow=row;
        rowSpan=0;
    }
    if ($(this).attr('rowspan')>rowSpan) rowSpan = $(this).attr('rowspan');
});
if (maxRow==$('table tr:last td').parent().parent().children().index($('table tr:last td').parent())-(rowSpan-1)){
    $('table td[rowspan]').each(function(){
        var row = $(this).parent().parent().children().index($(this).parent());
        if (row==maxRow && $(this).attr('rowspan')==rowSpan) $(this).addClass('last');
    });
} 
```

如果您想要所有触及最后一行的行（通过或不通过行跨度），那么以下代码将起作用（请参阅[http://jsfiddle.net/zL6Pe/](http://jsfiddle.net/zL6Pe/)）

```
$('table tr:last td').addClass('last');
var rows = $('table tr:last').parent().children().length;
$('table td[rowspan]').each(function(){
   if ($(this).parent().parent().children().index($(this).parent())+parseInt($(this).attr('rowspan'))==rows) $(this).addClass('last');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:05:24.093

我找到了这个解决方案。不在 jsfiddle 示例上工作，我不知道为什么，但它似乎完全可以工作。

```
getOffSet = function(rowSpansPerCol, startIndex){
    var offSet = 0;
    for(i=startIndex;i<rowSpansPerCol.length;i++){
        if(rowSpansPerCol[i]==1){
            return offSet;
        }
        else{
            offSet+1;
        }
    }
    return offSet;
}

markCells = function(table){
    var rows = table.find('tr');
    var columnCount = table.find('tr:first td').size();
    var rowSpansPerCol = new Array();

    rows.each(function(rowIndex) {
        jQuery(this).find('td').each(
                        function(colIndex) {
                            var offset = getOffSet(rowSpansPerCol, colIndex);
                            if ((rowSpansPerCol[colIndex+offset] == null || rowSpansPerCol[colIndex+offset]==1) && (jQuery(this).attr('rowSpan')+rowIndex == rows.size() || rows.size() == rowIndex+1)) {
                                jQuery(this).addClass('last')
                            } else {
                                rowSpansPerCol[colIndex+offset] = jQuery(this).attr('rowSpan');
                            }

                        })
})  
}

markCells(jQuery('table')); 
```

# ruby - NetAddr::Tree 获取 CIDR 列表并合并它们？

> ID：12709881
> 
> 赞同：2
> 
> 时间：2012-10-03T13:46:47.083
> 
> 标签：ruby, cidr

我正在使用 Ruby NetAddr::Tree 类来保存一堆 CIDR 对象，但我需要一种方法来将 CIDR 对象压缩到更大的子网中。

我想要一种获取 IP 的方法，例如：

```
12.26.8.0/21
12.26.16.0/21
12.26.24.0/21
12.26.32.0/21
12.26.40.0/21
12.27.152.0/21 
```

并合并树中的相关地址范围，以便输出如下：

```
12.26.8.0/21
12.26.16.0/20
12.26.32.0/20
12.27.152.0/21 
```

我查看了文档，但找不到任何方法来做到这一点。如果需要，我很高兴不再使用 NEtAddr::Tree，重要的是它需要一个 IP/网络掩码字符串列表，将它们合并并逐行输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:20:28.087

你看过[NetAddr::merge](http://netaddr.rubyforge.org/classes/NetAddr.html#M000004)吗？

从文档：

> 给定 CIDR 地址或 NetAddr::CIDR 对象的列表，以最有效的方式合并（汇总）它们。只有当新创建的超网不会导致“创建”新的 IP 空间时，才会进行汇总。例如，以下块（192.168.0.0/24、192.168.1.0/24 和 192.168.2.0/24）将汇总到 192.168.0.0/23 和 192.168.2.0/24 而不是 192.168.0.0/22

```
require 'netaddr'
require 'pp'

pp NetAddr.merge(
  %w[
    12.26.8.0/21
    12.26.16.0/21
    12.26.24.0/21
    12.26.32.0/21
    12.26.40.0/21
    12.27.152.0/21
  ].map{ |ip| NetAddr::CIDR.create(ip) }
)

=> ["12.26.8.0/21", "12.26.16.0/20", "12.26.32.0/20", "12.27.152.0/21"] 
```

# java - 设置超时时套接字未关闭

> ID：12709882
> 
> 赞同：4
> 
> 时间：2012-10-03T13:46:49.867
> 
> 标签：java, sockets, jakarta-ee, timeout

我是套接字编程的新手，并且有一段代码可以打开一个套接字并写入它。我将套接字的超时设置为一分钟，并希望在达到一定条件后关闭套接字并退出。

满足条件时，我的代码没有关闭套接字：

```
@Override
    public void run() {
        Socket socket =null; 
        PrintWriter writer = null; 
        BufferedReader reader = null;
        String host = ServiceProperties.getInstance().getControllerHost();
        String port = "1234;
        String info="";
        // TODO Auto-generated method stub

        try {   
            socket = new Socket(host, Integer.valueOf(port));
            socket.setSoTimeout(60000);
            writer = new PrintWriter(socket.getOutputStream(), true);
            reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            SampleBean sBean = (SampleBean) (FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("sampleBean"));
            info = ControllerDAO.getInstance().getControllerAndTimeScheduleInfo(sBean.getId());
            writer.println("set TimeSchedule "+ info +" value ["+str+"]");
        }
        catch(UnknownHostException ex) {
            ex.printStackTrace();
        }
        catch(IOException ex) {
            ex.printStackTrace();
        }
        String line="";
        try {
           System.out.println("BEFORE WHILE");
           System.out.println(new SimpleDateFormat("HH:mm:ss").format(Calendar.getInstance().getTime()));
           while((line= reader.readLine())!=null ) {
               System.out.println(line);
               if(line.contains("OK")){
                  System.out.println("line contains OK ");
                  break;
               }
               try {
                Thread.sleep(5000);
               }
               catch(InterruptedException ex) {
                ex.printStackTrace();
               }
            }
            System.out.println("AFTER WHILE");
            System.out.println(new SimpleDateFormat("HH:mm:ss").format(Calendar.getInstance().getTime()));
        }
        catch(IOException ex) {
            ex.printStackTrace();
        }
        try {
            writer.close();
            reader.close();
            socket.close();
        }
        catch(IOException ex) {
            ex.printStackTrace();
        }
    }
});
thread.run(); 
```

输出：

```
//"BEFORE WHILE"
// 14:54:55
// prints line
//               //prints empty line
// now it waits for like 40 seconds 
// line contains OK  //condition met here
// breakoutof the loop
    // "AFTER WHILE"
// 14:55:55 
```

为什么要等待第三次迭代？第三次迭代是当条件满足时，等待大约 40 秒后。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:49:17.983

如果您的请求超时，您需要捕获一个`SocketTimeoutException`（请参阅[文档](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout%28int%29)），然后关闭该捕获中的套接字，因为即使超时，套接字仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:33:54.560

SO_TIMEOUT[不影响](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/SocketOptions.html#SO_TIMEOUT)close()，尝试设置 SO_LINGER。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:50:02.283

这里有一些问题，但我认为主要是你没有正确关闭套接字。这应该在封装套接字`finally`的`try`块中，而不是在它自己的`try`块中。

# javascript - 表单的 JavaScript (jquery) 下拉菜单，不需要重新加载页面（Rails 应用程序）

> ID：12709885
> 
> 赞同：0
> 
> 时间：2012-10-03T13:46:58.640
> 
> 标签：javascript, jquery, ruby-on-rails

我们有三个表单，它们目前是他们自己的页面，但我认为作为下拉菜单会更好。它们每个只有两个字段和一个提交按钮。我希望它在他们单击提交后不会重新加载页面，他们只是继续使用该网站。

一份样本表格：

```
<%= form_for(@app) do |f| %>
  <% if @app.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@app.errors.count, "error") %> prohibited this app from being saved:</h2>
      <ul>
      <% @app.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div>
    <%= f.text_field :url, :class => 'span4', :placeholder => "Paste the URL"  %>
  </div>
  <div>
    <%= f.text_field :description, :class => 'span4', :rows =>1, :placeholder 
      => "Give it a title" %>
  </div>
  <div style="text-align:left">
      <%= f.submit "Submit" %>
  </div>
<% end %> 
```

我想知道将该代码放入页面的 JavaScript 代码。我希望有一个 jquery 插件或类似的插件 - 但我找不到任何搜索 jquery.com 的东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:49:42.507

我不会为您编写代码，但步骤如下：

1.  拦截表单的提交事件。`$('#someForm').submit(function(e){});`

2.  取消默认行为。`e.preventDefault();`

3.  使用 AJAX 通过 JavaScript 而不是重新加载将数据发布到表单。

# asp.net - 如何传递虚拟gridview列 URL 作为查询字符串

> ID：12709886
> 
> 赞同：0
> 
> 时间：2012-10-03T13:47:03.137
> 
> 标签：asp.net

我在 URL 中传递虚拟列的值时遇到问题`<asp:HyperLinkField>`。我在gridview 中的第一列包含从中`<%#Container.DataItemIndex+1>`填充gridview 的值，但是单击我的第二​​列，这是一个超链接字段，我想从生成的第一列传递值`<%#Container.DataItemIndex+1>`。

所以我面临的问题是如何将一个值作为查询字符串传递，该查询字符串没有从数据库中填充，但可以作为gridview中的列使用。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:39:55.363

Assuming I understood your question:

Have you tried binding column 2 to the same field (`DataField`) column1 is so you can use the (same) data any way you want.

Alternatively, perhaps you can (already) use column1 for the same purpose (re: display and link)?

Hth....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:10:34.927

你能粘贴代码，这样我就可以检测到问题并告诉你该怎么做。因为您需要了解的一件事是 gridview 倾向于将单元格逐项列为零索引。因此，如果您的意图是将表格的 ID 告知链接字段按钮，我会建议您使用 LinkBut​​ton。

# xml - 如何通过使用 XSLT 1.0 对 Group 进行求和

> ID：12709888
> 
> 赞同：2
> 
> 时间：2012-10-03T13:47:05.380
> 
> 标签：xml, xslt, xpath, xslt-1.0

我想对每个国家/地区的城市人口进行总和。鉴于下面的示例代码，它不起作用。你能帮我让它工作吗

输入是

```
<cities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org file:/D:/Oracle/JDev11116/jdeveloper/jdev/MyWork/TelenorFTPIssueApp/XSLTGroupProj/MySchema.xsd" xmlns="http://www.example.org">
   <city name="Milano"  country="Italia"      pop="5"/>
   <city name="Paris"   country="France"      pop="7"/>
   <city name="München" country="Deutschland" pop="4"/>
   <city name="Lyon"    country="France"      pop="2"/>
   <city name="Venezia" country="Italia"      pop="1"/>
 </cities> 
```

期望输出是

```
<?xml version = '1.0' encoding = 'UTF-8'?>
<ns1:Out xmlns:ns1="http://www.example.org" >
   <ns1:line>
      <ns1:position>1</ns1:position>
      <ns1:country>Italia</ns1:country>
      <ns1:city>Milano, Venezia</ns1:city>
      <ns1:population>6</ns1:population>
   </ns1:line>
   <ns1:line>
      <ns1:position>2</ns1:position>
      <ns1:country>France</ns1:country>
      <ns1:city>Paris, Lyon</ns1:city>
      <ns1:population>9</ns1:population>
   </ns1:line>
   <ns1:line>
      <ns1:position>3</ns1:position>
      <ns1:country>Deutschland</ns1:country>
      <ns1:city>München</ns1:city>
      <ns1:population>4</ns1:population>
   </ns1:line>
</ns1:Out> 
```

我正在工作的 XSL 是

```
 <xsl:stylesheet version="1.0" xmlns:ns1="http://www.example.org" >
   <xsl:key match="ns1:city" name="count_name" use="@country"/>           
  <xsl:template match="/">
   <ns1:Out>
    <xsl:for-each select="ns1:cities/ns1:city[count(. | key('count_name', @country)[1]) = 1]" >
     <ns1:line>
       <ns1:position>
          <xsl:value-of select="position()"/>
        </ns1:position>
        <ns1:country>
          <xsl:value-of select="@country"/>
        </ns1:country>
        <ns1:city>          
             <xsl:for-each select="key('count_name', @country)">
                  <xsl:value-of select="key('count_name',@city)" separator=", "/>
             </xsl:for-each>
        </ns1:city>
        <ns1:population>
            <xsl:for-each select="key('count_name', @country)"> 
                <xsl:value-of select="sum(key('count_name', @population))"  />
          </xsl:for-each> 
        </ns1:population>
     </ns1:line>
    </xsl:for-each>
   </ns1:Out>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:37:06.507

采用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                xmlns:ns1="http://www.example.org">
  <xsl:output method="xml" indent="yes"/>

  <xsl:key name="k" match="ns1:city" use="@country"/>

  <xsl:template match="ns1:cities">
    <ns1:Out>
      <xsl:apply-templates 
        select="ns1:city[generate-id() = generate-id(key('k', @country))]"/>
    </ns1:Out>
  </xsl:template>

  <xsl:template match="ns1:city">
    <ns1:line>
      <ns1:position>
        <xsl:value-of select="position()"/>
      </ns1:position>
      <ns1:country>
        <xsl:value-of select="@country"/>
      </ns1:country>
      <ns1:city>
        <xsl:for-each select="key('k', @country)">
          <xsl:value-of select="@name"/>
          <xsl:if test="position() != last()">
            <xsl:text>, </xsl:text>
          </xsl:if>
        </xsl:for-each>
      </ns1:city>
      <ns1:population>
        <xsl:value-of select="sum(key('k', @country)/@pop)"/>
      </ns1:population>
    </ns1:line>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

输出：

```
<ns1:Out xmlns:ns1="http://www.example.org">
  <ns1:line>
    <ns1:position>1</ns1:position>
    <ns1:country>Italia</ns1:country>
    <ns1:city>Milano, Venezia</ns1:city>
    <ns1:population>6</ns1:population>
  </ns1:line>
  <ns1:line>
    <ns1:position>2</ns1:position>
    <ns1:country>France</ns1:country>
    <ns1:city>Paris, Lyon</ns1:city>
    <ns1:population>9</ns1:population>
  </ns1:line>
  <ns1:line>
    <ns1:position>3</ns1:position>
    <ns1:country>Deutschland</ns1:country>
    <ns1:city>München</ns1:city>
    <ns1:population>4</ns1:population>
  </ns1:line>
</ns1:Out> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:08:06.337

**一个更具声明性的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ns1="http://www.example.org">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kCityByCountry" match="ns1:city" use="@country"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <ns1:Out xmlns:ns1="http://www.example.org">
   <xsl:apply-templates/>
  </ns1:Out>
 </xsl:template>

 <xsl:template match=
  "ns1:city[generate-id()=generate-id(key('kCityByCountry',@country)[1])]">
  <ns1:line>
    <ns1:position>
      <xsl:number count="ns1:city
             [generate-id()=generate-id(key('kCityByCountry',@country)[1])]"/>
    </ns1:position>
    <ns1:country><xsl:value-of select="@country"/></ns1:country>
    <ns1:city>
     <xsl:for-each select="key('kCityByCountry',@country)">
       <xsl:if test="not(position()=1)">, </xsl:if>
       <xsl:value-of select="@name"/>
     </xsl:for-each>
    </ns1:city>
    <ns1:population><xsl:value-of select=
                "sum(key('kCityByCountry',@country)/@pop)"/></ns1:population>
  </ns1:line>
 </xsl:template>
 <xsl:template match="ns1:city"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<cities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.example.org file:/D:/Oracle/JDev11116/jdeveloper/jdev/MyWork/TelenorFTPIssueApp/XSLTGroupProj/MySchema.xsd"
xmlns="http://www.example.org">
    <city name="Milano"  country="Italia"      pop="5"/>
    <city name="Paris"   country="France"      pop="7"/>
    <city name="München" country="Deutschland" pop="4"/>
    <city name="Lyon"    country="France"      pop="2"/>
    <city name="Venezia" country="Italia"      pop="1"/>
</cities> 
```

**产生了想要的正确结果：**

```
<ns1:Out xmlns:ns1="http://www.example.org">
   <ns1:line>
      <ns1:position>1</ns1:position>
      <ns1:country>Italia</ns1:country>
      <ns1:city>Milano, Venezia</ns1:city>
      <ns1:population>6</ns1:population>
   </ns1:line>
   <ns1:line>
      <ns1:position>2</ns1:position>
      <ns1:country>France</ns1:country>
      <ns1:city>Paris, Lyon</ns1:city>
      <ns1:population>9</ns1:population>
   </ns1:line>
   <ns1:line>
      <ns1:position>3</ns1:position>
      <ns1:country>Deutschland</ns1:country>
      <ns1:city>München</ns1:city>
      <ns1:population>4</ns1:population>
   </ns1:line>
</ns1:Out> 
```

# javascript - Google Drive SDK JavaScript 文件共享对话框给出“拒绝显示文档，因为 X-Frame-Options 禁止显示”

> ID：12709893
> 
> 赞同：1
> 
> 时间：2012-10-03T13:47:16.233
> 
> 标签：javascript, google-drive-api

我正在尝试使用此处描述的 Javascript 代码使用 Google SDK 文件共享对话框：[https ://developers.google.com/drive/manage-sharing](https://developers.google.com/drive/manage-sharing)

我设置了 API 密钥并配置了 Google Drive SDK 面板：[https ://code.google.com/apis/console/](https://code.google.com/apis/console/)

我可以使用 API 密钥和 JavaScript 成功列出存储在 Google Drive 上的文件，但共享代码不起作用。出现一个仅包含加载微调器的对话框，然后显示“抱歉，此时共享不可用”。并且 Chrome Javascript 控制台在 Chrome 中包含错误“拒绝显示文档，因为 X-Frame-Options 禁止显示”。在 Firefox 中，我收到错误：

错误：错误：访问属性“_EmailAc_create”源文件的权限被拒绝：docs.google.com/static/doclist/client/js/1880332762-v2-doclist_share__en_gb.js 行：470

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T09:55:35.517

好吧，因为没有人能给你任何建议，让我至少给你一些低质量的建议。

X-Frame-Options 用于防止对整个服务器的点击劫持攻击，方法是禁止将具有指定标头的任何页面进行 iframe。据我所知，当指定的应用程序作为 chrome web 应用程序安装时，google chrome 会解除此限制，因此您的附带 web 应用程序可能配置不正确。

* * *

此外，从[另一个答案](https://stackoverflow.com/questions/12081816/calling-showsettingsdialog-on-the-google-drive-sdk-throws-a-refused-to-display?rq=1)来看，它显然也可能与您在控制台中的设置有关：

> 你需要确保两件事：
> 
> 1.  您在 Google API 控制台的 Google Drive SDK 设置中设置的“打开方式”URL 必须与您使用共享对话框的页面具有相同的域。
> 2.  目前，您还需要将您的应用程序安装在您的 Google Drive 上，以使可嵌入的小部件工作。

# java - 从互联网保存excel文件

> ID：12709896
> 
> 赞同：1
> 
> 时间：2012-10-03T13:47:27.453
> 
> 标签：java, excel, encoding, selenium, utf-8

我正在尝试使用 Selenium 从站点下载 Excel 文件。

我这样做的方式：

```
 WebElement excelList = driver.findElement(By.xpath("..."));

    excelList.click();

    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);

    String pageSource = driver.getPageSource();
    FileOutputStream fos = new FileOutputStream("d:/load.xls");

    for (int i = 0; i < pageSource.length(); i++) {
        char c = pageSource.charAt(i);

        fos.write((byte) c);
    }

    fos.close(); 
```

页面源字符串长度等于我从该站点手动下载的文件大小。

问题是我保存数据不正确，MS Excel 无法打开保存的文件。

如何正确保存文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:13:43.977

您可以尝试使用`String.getBytes()`将字符重新编码回字节流，但这可能仍然行不通。

基本上，为了将您的 excel 文件的二进制数据保存在字符串中，必须使用字符集对数据进行解码。因为不应将 excel 文件作为纯文本读取，所以可能有很多字节序列不是有效的字符编码。这些字节序列在解码`String`时可能只是表示为“？” （尽管这取决于`Charset`实际使用的那个）。当您尝试使用或任何其他方法重新编码字符时，`String.getBytes()`那些“？” 字符不会被转换回它们的原始字节，而是会被转换为 unicode 问号字符的编码，这对于 excel 文件格式几乎肯定是无效的。

真正的问题是，为什么需要通过 Se 下载这个文件？Se 是关于测试浏览器如何呈现网页的。如果您需要 Excel 文件，为什么不直接从您单击 Se 的链接中获取 href，然后使用`HttpUrlConnection`标准二进制文件简单地下载文件`InputStream`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:34:14.517

我想到了。

我只需要在单击加载文件按钮后从最后一页获取输入流。但是获取页面对象“lastPage()”的方法具有受保护的访问权限。

这是方法：

```
 private static void saveExcelFile(HtmlUnitDriver driver)  {
    Method m = driver.getClass().getDeclaredMethod("lastPage", null);
    m.setAccessible(true);
    Object obj = m.invoke(driver, null);

    Page page = (Page) obj;

    InputStream stream = page.getWebResponse().getContentAsStream();

    FileOutputStream fos = new FileOutputStream("d:/load.xls");

    int c;

    while ((c = stream.read()) != -1) {
        fos.write(c);
    }

    fos.close();
} 
```

# sql - 显示过去一周的数据（十亿行数据库）

> ID：12709898
> 
> 赞同：1
> 
> 时间：2012-10-03T13:47:36.543
> 
> 标签：sql, sql-server, database

我正在使用 ASP.NET 制作一个 Web 应用程序。基本上，我需要显示来自具有十亿行数据库的 SQL Server 的数据。当我查询某些内容时，通常会花费很多时间。例如，我使用以下代码查询上周创建的数据：

```
DECLARE @CurrentDate as DateTime,
        @PastWeek as DateTime;

SET @CurrentDate = GETDATE();
SET @PastWeek = DATEADD(ww, -1, @CurrentDate);      

SELECT [ID]
      ,[TIMESTAMP]
      ,[USERNAME]
      ,[CLIENTNAME]
      ,[COMMAND]
      ,[PATH]
  FROM [P4D] WHERE TIMESTAMP BETWEEN @CurrentDate AND @PastWeek; 
```

20分钟后仍在查询。我认为这需要很长时间，因为它测试每一行是否在时间范围内。

提取过去一周创建的数据的方法是否错误？或者有什么方法可以让查询语句更高效？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:53:52.320

你需要的两件事：

```
SELECT ID 
      ,TIMESTAMP
      ,USERNAME 
      ,CLIENTNAME 
      ,COMMAND
      ,PATH
  FROM P4D (NOLOCK) WHERE TIMESTAMP BETWEEN @CurrentDate AND @PastWeek; 
```

（在您的查询中添加一个 nolock）

并添加一个非聚集索引，`TIMESTAMP`并将选定的列添加`(ID,USERNAME,CLIENTNAME,COMMAND,PATH)`到该索引。

# javascript - JavaScript 检测 Android 浏览器中的选择

> ID：12709903
> 
> 赞同：2
> 
> 时间：2012-10-03T13:47:54.430
> 
> 标签：javascript, selection, detection, android-browser

当用户使用 JavaScript 在 HTML 页面中选择或更改某些文本和元素的选择时，我如何在**Android 浏览器中的****JavaScript**中检测到事件？Android浏览器不会发送触摸端是这种情况吗？除了建立一个计时器还有什么想法吗？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:40:45.097

最近的 WebKit`selectionchange`在`document`. 我不知道您的 Android 浏览器是否足够新，但您可以尝试一下。

```
document.addEventListener("selectionchange", function() {
    alert("Selection changed");
}, false); 
```**

# html - Twitter Bootstrap 行嵌套

> ID：12709905
> 
> 赞同：6
> 
> 时间：2012-10-03T13:48:00.777
> 
> 标签：html, css, twitter-bootstrap, grid, twitter-bootstrap-2

我对 Twitter Bootstrap 和整个网格框架还是个新手，所以如果这看起来是一个非常愚蠢的问题，请多多包涵。

但这是我迄今为止[在 jsFiddle 中](http://jsfiddle.net/mr3Q6/18/)所拥有的。

HTML

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <title>Bootstrap</title>
    <link rel="stylesheet" href="install_files2/css/bootstrap.css" />
    <!-- <link rel="stylesheet" 
          href="install_files/docs/assets/css/bootstrap-responsive.css" /> -->
</head>

<body>
    <div class="container-fluid">
        <div class="row-fluid" style="background-color:;">
            <div class="span2" style="background-color:red;"></div>
            <div class="span2" style="background-color:blue;"></div>
            <div class="span2" style="background-color:red;"></div>
            <div class="span2" style="background-color:blue;"></div>
            <div class="span2" style="background-color:red;"></div>
            <div class="span1" style="background-color:blue;min-height:100px;">
            </div>
            <div class="span1" style="background-color:red;min-height:100px;">
            </div>
            <div class="span2" style="background-color:blue;"></div>
        </div>
     </div>
</body>
</html> 
```

CSS

```
/*!
 * Bootstrap v2.1.1
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
 */

.clearfix {
  *zoom: 1;
}
.clearfix:before,
.clearfix:after {
  display: table;
  content: "";
  line-height: 0;
}
.clearfix:after {
  clear: both;
}
.hide-text {
  font: 0/0 a;
  color: transparent;
  text-shadow: none;
  background-color: transparent;
  border: 0;
}
.input-block-level {
  display: block;
  width: 100%;
  min-height: 30px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
nav,
section {
  display: block;
}
audio,
canvas,
video {
  display: inline-block;
  *display: inline;
  *zoom: 1;
}
audio:not([controls]) {
  display: none;
}
html {
  font-size: 100%;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}
a:focus {
  outline: thin dotted #333;
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
a:hover,
a:active {
  outline: 0;
}
sub,
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
img {
  /* Responsive images (ensure images don't scale beyond their parents) */

  max-width: 100%;
  /* Part 1: Set a maxium relative to the parent */

  width: auto\9;
  /* IE7-8 need help adjusting responsive images */

  height: auto;
  /* Part 2: Scale the height according to the width, */
  /*         otherwise you get stretching */

  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic;
}
#map_canvas img {
  max-width: none;
}
button,
input,
select,
textarea {
  margin: 0;
  font-size: 100%;
  vertical-align: middle;
}
button,
input {
  *overflow: visible;
  line-height: normal;
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  padding: 0;
  border: 0;
}
button,
input[type="button"],
input[type="reset"],
input[type="submit"] {
  cursor: pointer;
  -webkit-appearance: button;
}
input[type="search"] {
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  -webkit-appearance: textfield;
}
input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button {
  -webkit-appearance: none;
}
textarea {
  overflow: auto;
  vertical-align: top;
}
body {
  margin: 0;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 20px;
  color: #333333;
  background-color: #ffffff;
}
a {
  color: #0088cc;
  text-decoration: none;
}
a:hover {
  color: #005580;
  text-decoration: underline;
}
.img-rounded {
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px;
}
.img-polaroid {
  padding: 4px;
  background-color: #fff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
.img-circle {
  -webkit-border-radius: 500px;
  -moz-border-radius: 500px;
  border-radius: 500px;
}
.row {
  margin-left: -20px;
  *zoom: 1;
}
.row:before,
.row:after {
  display: table;
  content: "";
  line-height: 0;
}
.row:after {
  clear: both;
}
[class*="span"] {
  float: left;
  min-height: 1px;
  /*margin-left: 20px;*/
}
.container,
.navbar-static-top .container,
.navbar-fixed-top .container,
.navbar-fixed-bottom .container {
  width: 940px;
}
.span12 {
  width: 940px;
}
.span11 {
  width: 860px;
}
.span10 {
  width: 780px;
}
.span9 {
  width: 700px;
}
.span8 {
  width: 620px;
}
.span7 {
  width: 540px;
}
.span6 {
  width: 460px;
}
.span5 {
  width: 380px;
}
.span4 {
  width: 300px;
}
.span3 {
  width: 220px;
}
.span2 {
  width: 140px;
}
.span1 {
  width: 60px;
}
.offset12 {
  margin-left: 980px;
}
.offset11 {
  margin-left: 900px;
}
.offset10 {
  margin-left: 820px;
}
.offset9 {
  margin-left: 740px;
}
.offset8 {
  margin-left: 660px;
}
.offset7 {
  margin-left: 580px;
}
.offset6 {
  margin-left: 500px;
}
.offset5 {
  margin-left: 420px;
}
.offset4 {
  margin-left: 340px;
}
.offset3 {
  margin-left: 260px;
}
.offset2 {
  margin-left: 180px;
}
.offset1 {
  margin-left: 100px;
}
.row-fluid {
  width: 100%;
  *zoom: 1;
}
.row-fluid:before,
.row-fluid:after {
  display: table;
  content: "";
  line-height: 0;
}
.row-fluid:after {
  clear: both;
}
.row-fluid [class*="span"] {
  display: block;
  width: 100%;
  min-height: 220px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  float: left;
  /*margin-left: 2.127659574468085%;*/
  /**margin-left: 2.074468085106383%;*/
}

@media (min-width: 800px) {
  .row {
    margin-left: -30px;
    *zoom: 1;
  }
  .row:before,
  .row:after {
    display: table;
    content: "";
    line-height: 0;
  }
  .row:after {
    clear: both;
  }
  [class*="span"] {
    float: left;
    min-height: 1px;
    /*margin-left: 30px;*/
  }
  .container,
  .navbar-static-top .container,
  .navbar-fixed-top .container,
  .navbar-fixed-bottom .container {
    width: 1170px;
  }
  .span12 {
    width: 1170px;
  }
  .span11 {
    width: 1070px;
  }
  .span10 {
    width: 970px;
  }
  .span9 {
    width: 870px;
  }
  .span8 {
    width: 770px;
  }
  .span7 {
    width: 670px;
  }
  .span6 {
    width: 570px;
  }
  .span5 {
    width: 470px;
  }
  .span4 {
    width: 370px;
  }
  .span3 {
    width: 270px;
  }
  .span2 {
    width: 170px;
  }
  .span1 {
    width: 70px;
  }
  .offset12 {
    margin-left: 1230px;
  }
  .offset11 {
    margin-left: 1130px;
  }
  .offset10 {
    margin-left: 1030px;
  }
  .offset9 {
    margin-left: 930px;
  }
  .offset8 {
    margin-left: 830px;
  }
  .offset7 {
    margin-left: 730px;
  }
  .offset6 {
    margin-left: 630px;
  }
  .offset5 {
    margin-left: 530px;
  }
  .offset4 {
    margin-left: 430px;
  }
  .offset3 {
    margin-left: 330px;
  }
  .offset2 {
    margin-left: 230px;
  }
  .offset1 {
    margin-left: 130px;
  }
  .row-fluid {
    width: 100%;
    *zoom: 1;
  }
  .row-fluid:before,
  .row-fluid:after {
    display: table;
    content: "";
    line-height: 0;
  }
  .row-fluid:after {
    clear: both;
  }
  .row-fluid [class*="span"] {
    display: block;
    width: 100%;
    min-height: 200px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    float: left;
    /*margin-left: 2.564102564102564%;*/
    /**margin-left: 2.5109110747408616%;*/
  }
  .row-fluid [class*="span"]:first-child {
    margin-left: 0;
  }
  .row-fluid .span12 {
    width: 100%;
    *width: 99.94680851063829%;
  }
  .row-fluid .span11 {
    width: 91.45299145299145%;
    *width: 91.39979996362975%;
  }
  .row-fluid .span10 {
    width: 82.90598290598291%;
    *width: 82.8527914166212%;
  }
  .row-fluid .span9 {
    width: 74.35897435897436%;
    *width: 74.30578286961266%;
  }
  .row-fluid .span8 {
    width: 65.81196581196582%;
    *width: 65.75877432260411%;
  }
  .row-fluid .span7 {
    width: 57.26495726495726%;
    *width: 57.21176577559556%;
  }
  .row-fluid .span6 {
    width: 48.717948717948715%;
    *width: 48.664757228587014%;
  }
  .row-fluid .span5 {
    width: 71.42857142857145%;
    *width: 71.42857142857145%;
  }
  .row-fluid .span4 {
    width: 31.623931623931625%;
    *width: 31.570740134569924%;
  }
  .row-fluid .span3 {
    width: 23.076923076923077%;
    *width: 23.023731587561375%;
  }
  .row-fluid .span2 {
    width: 14.28571428571429%;
    *width: 14.28571428571429%;
  }
  .row-fluid .span1 {
    width: 7.142857142857143%;
    *width: 7.142857142857143%;
  }
  .row-fluid .offset12 {
    margin-left: 105.12820512820512%;
    *margin-left: 105.02182214948171%;
  }
  .row-fluid .offset12:first-child {
    margin-left: 102.56410256410257%;
    *margin-left: 102.45771958537915%;
  }
  .row-fluid .offset11 {
    margin-left: 96.58119658119658%;
    *margin-left: 96.47481360247316%;
  }
  .row-fluid .offset11:first-child {
    margin-left: 94.01709401709402%;
    *margin-left: 93.91071103837061%;
  }
  .row-fluid .offset10 {
    margin-left: 88.03418803418803%;
    *margin-left: 87.92780505546462%;
  }
  .row-fluid .offset10:first-child {
    margin-left: 85.47008547008548%;
    *margin-left: 85.36370249136206%;
  }
  .row-fluid .offset9 {
    margin-left: 79.48717948717949%;
    *margin-left: 79.38079650845607%;
  }
  .row-fluid .offset9:first-child {
    margin-left: 76.92307692307693%;
    *margin-left: 76.81669394435352%;
  }
  .row-fluid .offset8 {
    margin-left: 70.94017094017094%;
    *margin-left: 70.83378796144753%;
  }
  .row-fluid .offset8:first-child {
    margin-left: 68.37606837606839%;
    *margin-left: 68.26968539734497%;
  }
  .row-fluid .offset7 {
    margin-left: 62.393162393162385%;
    *margin-left: 62.28677941443899%;
  }
  .row-fluid .offset7:first-child {
    margin-left: 59.82905982905982%;
    *margin-left: 59.72267685033642%;
  }
  .row-fluid .offset6 {
    margin-left: 53.84615384615384%;
    *margin-left: 53.739770867430444%;
  }
  .row-fluid .offset6:first-child {
    margin-left: 51.28205128205128%;
    *margin-left: 51.175668303327875%;
  }
  .row-fluid .offset5 {
    margin-left: 45.299145299145295%;
    *margin-left: 45.1927623204219%;
  }
  .row-fluid .offset5:first-child {
    margin-left: 42.73504273504273%;
    *margin-left: 42.62865975631933%;
  }
  .row-fluid .offset4 {
    margin-left: 36.75213675213675%;
    *margin-left: 36.645753773413354%;
  }
  .row-fluid .offset4:first-child {
    margin-left: 34.18803418803419%;
    *margin-left: 34.081651209310785%;
  }
  .row-fluid .offset3 {
    margin-left: 28.205128205128204%;
    *margin-left: 28.0987452264048%;
  }
  .row-fluid .offset3:first-child {
    margin-left: 25.641025641025642%;
    *margin-left: 25.53464266230224%;
  }
  .row-fluid .offset2 {
    margin-left: 19.65811965811966%;
    *margin-left: 19.551736679396257%;
  }
  .row-fluid .offset2:first-child {
    margin-left: 17.094017094017094%;
    *margin-left: 16.98763411529369%;
  }
  .row-fluid .offset1 {
    margin-left: 11.11111111111111%;
    *margin-left: 11.004728132387708%;
  }
  .row-fluid .offset1:first-child {
    margin-left: 8.547008547008547%;
    *margin-left: 8.440625568285142%;
  }
  input,
  textarea,
  .uneditable-input {
    margin-left: 0;
  }
  .controls-row [class*="span"] + [class*="span"] {
    margin-left: 30px;
  }
  input.span12, textarea.span12, .uneditable-input.span12 {
    width: 1156px;
  }
  input.span11, textarea.span11, .uneditable-input.span11 {
    width: 1056px;
  }
  input.span10, textarea.span10, .uneditable-input.span10 {
    width: 956px;
  }
  input.span9, textarea.span9, .uneditable-input.span9 {
    width: 856px;
  }
  input.span8, textarea.span8, .uneditable-input.span8 {
    width: 756px;
  }
  input.span7, textarea.span7, .uneditable-input.span7 {
    width: 656px;
  }
  input.span6, textarea.span6, .uneditable-input.span6 {
    width: 556px;
  }
  input.span5, textarea.span5, .uneditable-input.span5 {
    width: 456px;
  }
  input.span4, textarea.span4, .uneditable-input.span4 {
    width: 356px;
  }
  input.span3, textarea.span3, .uneditable-input.span3 {
    width: 256px;
  }
  input.span2, textarea.span2, .uneditable-input.span2 {
    width: 156px;
  }
  input.span1, textarea.span1, .uneditable-input.span1 {
    width: 56px;
  }
  .thumbnails {
    margin-left: -30px;
  }
  .thumbnails > li {
    margin-left: 30px;
  }
  .row-fluid .thumbnails {
    margin-left: 0;
  }
} 
```

我想要实现的是在白色空间中最后一个红色大盒子之后放置 2 个小盒子。我做了一些研究，我读到它需要在一行中嵌套一行，然后放置一列。但这似乎适用于跨度的非流体应用，即固定宽度。然而，我以百分比测量这些框，并且非常不确定如何继续嵌套这些行。有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T13:45:34.900

有几种方法可以做到这一点。一种是这样嵌套它们：（[http://jsfiddle.net/rdTfe/](http://jsfiddle.net/rdTfe/)）

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
       Red area here.
       <div class="row-fluid">
          <div class="span6">
            Small box
          </div>
          <div class="span6">
            Small box
          </div>
       </div>
    </div>
  </div>
</div> 
```

但是，这将扩展红色容器本身。因此，除非我误解了您想要做什么，否则您实际上并不需要嵌套它们。( [http://jsfiddle.net/rdTfe/1/](http://jsfiddle.net/rdTfe/1/) )

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
       Red area here.
    </div>
  </div>
  <div class="row-fluid">
    <div class="span6">
      Small box
    </div>
    <div class="span6">
      Small box
    </div>
  </div>
</div> 
```

以这种方式嵌套它们可以确保所有红色框和其他较小框的左右边缘垂直排列。

**Bootstrap 3 的更新**

上面的例子可以这样写：http: [//jsfiddle.net/9wQ2M/10/](http://jsfiddle.net/9wQ2M/10/)

```
 <div class="row">
    <div class="col-md-12">
       Red area here.
      <div class="col-md-6">
        Small box
      </div>
      <div class="col-md-6">
        Small box
      </div>
    </div>
  </div> 
```

并且没有嵌套...... [http://jsfiddle.net/55z7p/3/](http://jsfiddle.net/55z7p/3/)

```
 <div class="row">
    <div class="col-md-12">
       Red area here.
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      Small box
    </div>
    <div class="col-md-6">
      Small box
    </div>
  </div> 
```

# ruby-on-rails - 安装后如何更新捆绑包--standalone？

> ID：12709908
> 
> 赞同：1
> 
> 时间：2012-10-03T13:48:05.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundler

我有一个带有几个 rails 实例的开发服务器，它使用

```
bundle install --standalone 
```

不确定初始安装是如何完成的，但我的用户没有可用的系统捆绑程序（并且`bundle install --standalone`对我不起作用）。Gemfile 更新后更新包的正确方法是什么？

补充：为了清楚起见，我有工作安装，只是不知道如何更新它。我认为方法是：

```
/var/lib/gems/1.9.1/bin/bundle install --standalone 
```

应该稍后检查一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:26:59.753

根据您的问题，我认为您需要进入并更新您的捆绑器 gem 文件依赖项。

[http://gembundler.com/v1.2/rationale.html](http://gembundler.com/v1.2/rationale.html)

更新依赖项后，确保已安装它们。

[http://gembundler.com/rails3.html](http://gembundler.com/rails3.html)

希望有帮助。

# php - 似乎记住 $_POST 的大表格

> ID：12709910
> 
> 赞同：-1
> 
> 时间：2012-10-03T13:48:09.597
> 
> 标签：php

我有一个用 HTML 编写的大型表单（包含 1,000 多个`input`元素）。我已将表单的操作设置为`update.php`，但遇到了一些奇怪的行为。似乎 $_POST 在某处被重置。

如下`update.php`所示：

```
<?php
empty($_POST);
print_r($_POST);
?> 
```

哪个输出：

```
Array
(
    [date] => 3 October 2012
    [date2] => 
    [to] => 
    [number] => 0005
    [contact] => 
    [address] => 
    [contact_tel] => 
    [contact_fax] => 
    [contact_mob] => 
    [contact_email] => 
    [site_contact] => 
    [site_address] => 
    [site_contact_tel] => 
    [site_contact_fax] => 
    ...
); 
```

奇怪的是它`$_POST['date']`没有任何价值（即它是一个空字段）。即使刷新`update.php`和重新发布表单也没有效果。PHP 报告的值是我第一次提交表单时的原始值。

按预期将操作更改为`$_GET`功能（即在链接中传递了正确的变量），但我无法使用此解决方案，主要是因为 URL 变得太长并导致服务器错误。

有谁为什么会发生这种情况。我会发布我的代码，但它太长了。

**这是表单 HTML 的 PastBin > [http://pastebin.com/rdQujigK](http://pastebin.com/rdQujigK)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:55:56.510

```
[ ... snip ... ]
<!-- Defaults: -->
<input type="text" value="3 October 2012" name="date" id="date" class="default_input" />
[ ... snip ... ] 
```

我休息一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:55:58.823

它正在“默认值”部分中提交：

`<input type="text" value="3 October 2012" name="date" id="date" class="default_input" />`

# ios - CGPDFDocument 和预告片/加密字典

> ID：12709912
> 
> 赞同：2
> 
> 时间：2012-10-03T13:48:17.103
> 
> 标签：ios, security, pdf, permissions, cgpdfdocument

我正在尝试访问预告片中的 /Encrypt 字典以检查 PDF 的权限。CGPDFDocument 只允许访问它看起来的 Info 和 Root（顶级）字典。

**CGPDFDocumentGetCatalog** CGPDFDocumentGetNumberOfPages CGPDFDocumentGetPage CGPDFDocumentGetVersion **CGPDFDocumentGetInfo** CGPDFDocumentGetID

关于如何获得打印和复制之外的文件权限的任何想法？

CGPDFDocumentAllowsCopying CGPDFDocumentAllowsPrinting

# optimization - 使用批处理文件执行多个命令

> ID：12709923
> 
> 赞同：0
> 
> 时间：2012-10-03T13:48:54.843
> 
> 标签：optimization, batch-file, jpeg

我正在使用 jpegtran 将目录中的 jpeg 转换为自身的优化版本。我这样做可能是 10-15 个 jpeg。我已经编写了一个批处理文件，它为每个 jpeg 执行所有命令，但我想知道是否有类似于 bash 脚本的方法，我可以说：

```
jpegtran -optimize -copy none *.jpg optsameasoriginalfilename.jpg 
```

问题是，目标文件不能与正在转换的文件相同，除非它转到不同的目录。

是否有可以为我执行此操作的批处理文件？而不是我进入我制作的批处理文件并手动更改源文件名和目标文件名的所有名称？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:56:44.057

亚历克斯 K. 的回答：

```
FOR %%f IN (*.JPG) DO jpegtran -optimize -copy %%f new_%%f 
```

工作完美。这行代码还运行了最后一个命令两次，产生了最后一个 jpeg 的两个文件，但这是一个简单的删除问题，仍然适合我的需要。

# php - Matt Kruse 的 javascript 日期排序未正确排序

> ID：12709924
> 
> 赞同：1
> 
> 时间：2012-10-03T13:49:02.150
> 
> 标签：php, javascript, tablesorter

嗨：我刚刚注意到一些事情，一个客户注意到了，我无法确定我们的解决方案。

我们使用的是表格/日期排序器 Matt Kruse (javascripttoolbox.com)。

它工作得很好，或者我们认为是这样，但一位客户刚刚注意到，因为日期延长到 2013 年，所以它没有正确排序。请参见下面的示例：

*   2013 年 1 月 9 日
*   2013 年 1 月 10 日
*   2013 年 1 月 11 日
*   2012 年 7 月 17 日
*   2012 年 9 月 19 日
*   2012 年 9 月 25 日
*   2012 年 10 月 3 日
*   2012 年 10 月 5 日
*   2012 年 10 月 8 日
*   2012 年 10 月 8 日

以上是按降序排列的，但它应该选择 2013 年的最高/最近日期并从那里下来。然后到 2012 年，它应该从 10 月开始，并且一直在下降。但正如你所看到的

是否有人熟悉 [Matt Kruse (javascripttoolbox dot com)] 日期排序脚本以及可以/应该调整的内容。我去了他的网站，代码似乎是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:05:12.900

看起来您尝试排序的基础数据是字符串而不是日期。因此排序是按字母顺序排列的。

您应该仔细检查您的数据并确保它是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:34:59.380

您是否为 Date 表标题提供了正确的类名？

如果插件在类名中没有看到“日期”，它将无法正确解析列数据。

```
<th class="table-sortable:date">Date</th> 
```

# jquery - Iviewer - 旋转图像后 chrome 中的工件

> ID：12709927
> 
> 赞同：0
> 
> 时间：2012-10-03T13:49:12.830
> 
> 标签：jquery, css, jquery-ui, google-chrome, jquery-plugins

我正在使用[iviewer](https://github.com/can3p/iviewer)来缩放图像。有一个旋转功能可以在两个方向上旋转图像。

在谷歌浏览器中，当您向任意方向旋转图像，然后尝试放大和缩小时，容器中的空白区域会出现一些边框类型的线条。这是问题的屏幕截图。![在此处输入图像描述](../Images/c2e87246b2646b12031f57fcbe7f034a.png)

您可以打开此插件的[演示页面](http://test.dpetroff.ru/jquery.iviewer/test/)以在 chrome 中查看此行为。

我尝试使用 chrome 的开发工具，但是一旦我打开开发工具窗口，这些线条就会消失。这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:47:02.330

好的，所以我得到了这个插件的[开发者的](https://github.com/can3p)[回复。](https://github.com/can3p/iviewer/issues/33#issuecomment-9115536)这是它的内容。

> 这似乎很像浏览器问题。我会将它报告给 chromium 错误跟踪器，但我认为没有更多的事情要做。当图像具有角度设置的变换值并且正在调整大小时，会出现图像伪影。
> 
> 这是[关于 chrome bug 的链接](https://code.google.com/p/chromium/issues/detail?id=142341)

我希望有一天它会对某人有所帮助

# macos - 当我使用 Xampp for Mac 为本地站点使用虚拟主机时，如何避免 403 错误？

> ID：12709930
> 
> 赞同：0
> 
> 时间：2012-10-03T13:49:18.750
> 
> 标签：macos, permissions, github, xampp, vhosts

我在 Mac (10.6.8) 上使用 GitHub 客户端，以便更轻松地使用托管在 GitHub 上的（第一个）Web 项目。我通常使用Windows。

使用 Xampp 的 vhosts 文件和 hosts 文件，我使用服务器别名运行项目，因此我只需在浏览器中键入 project.git，并在需要时为项目使用绝对路径。

在我的 Windows 机器上，我已对其进行了设置，因此用于在本地为站点提供服务的文件夹与 GitHub 文件夹将其克隆到的文件夹相同。默认情况下，这是我的 Documents 文件夹中的一个文件夹。

在 Windows 上，这工作正常。在 OS X 上，每当我尝试查看页面时，它都会给我一个 403 错误。我已经为我的用户配置文件和文件夹属性中的“每个人”以及它下面的每个文件设置了读取和写入权限。“文件夹”是指项目的根文件夹，例如，其中是第一个索引文件。

我确定主机文件工作正常，我可以使用别名指向 localhost 中的 xampp 等内容，没有问题。

我不知道如何摆脱 403 错误。有什么建议么？

如果你告诉我我正在做的事情是非常错误的，我不会生气。我是 Git 和 GitHub 的新手，对两者的最佳实践都不熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:41:04.237

我终于明白了

我找到了这篇博文：[在 XAMPP for Mac 中创建 Apache 别名](http://www.mauriciomunera.com/?p=127)

我需要做的就是将 Xampp 的 httpd.conf 文件中的用户更改为我的用户名，然后它就可以工作了。该文件位于 /Applications/xampp/etc/httpd.conf

所以它在哪里：`User nobody`它现在说`User davey`

重新启动 xampp，然后繁荣！

# r - 将 S4 调度添加到基本 R S3 通用

> ID：12709933
> 
> 赞同：8
> 
> 时间：2012-10-03T13:49:21.667
> 
> 标签：r, s4

我正在尝试添加一个`merge`需要 S4 的空间方法（因为它在两个不同对象的类型上调度）。

我尝试使用[早期的解决方案](https://stackoverflow.com/questions/12100856/combining-s4-and-s3-methods-in-a-single-function)，如下所示：

```
#' Merge a SpatialPolygonsDataFrame with a data.frame
#' @param SPDF A SpatialPolygonsDataFrame
#' @param df A data.frame
#' @param \dots Parameters to pass to merge.data.frame
#' 
#' @export
#' @docType methods
#' @rdname merge-methods
setGeneric("merge", function(SPDF, df, ...){
  cat("generic dispatch\n")
  standardGeneric("merge")
})
#' @rdname merge-methods
#' @aliases merge,SpatialPolygonsDataFrame,data.frame-method
setMethod("merge",c("SpatialPolygonsDataFrame","data.frame"), function(SPDF,df,...) {
  cat("method dispatch\n")
}) 
```

哪个有效：

```
x <- 1
class(x) <- "SpatialPolygonsDataFrame"
y <- data.frame()
> merge(x,y)
generic dispatch
method dispatch 
```

您将不得不相信我，如果 x 真的是 SPDF 而不是伪造的，那么它不会返回如果您实际运行该代码（或不运行该代码，而只是使用更宽松的通用下面不返回错误）。SPDF 很难创建。

问题是它似乎覆盖了 S3 调度：

```
> merge(y,y)
generic dispatch
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "merge", for signature "data.frame", "data.frame" 
```

我该如何避免呢？我已经尝试从中删除函数定义，`setGeneric`以便它可以简单地读取`setGeneric("merge")`，但这也不起作用。我是否需要以某种方式导入`merge`S3 泛型`base`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T16:19:08.030

发生错误发送是因为泛型的主体不是“标准的”（我认为原因是，因为你做了除了调用以外的事情`standardGeneric("merge")`，你知道你在做什么，所以没有自动默认；也许我是弥补这一点，这确实是一个错误）。解决方案是设置一个允许默认调度的标准泛型

```
setGeneric("merge") 
```

或明确提供标准调度

```
setGeneric("merge", function(x, y, ...) standardGeneric("merge")) 
```

或显式指定默认方法

```
setGeneric("merge", function(x, y, ...){
  cat("generic dispatch\n")
  standardGeneric("merge")
}, useAsDefault=base::merge) 
```

# web-services - 在 JDeveloper 中，如何在从 EJB 生成时覆盖 Web 服务的地址端点？

> ID：12709941
> 
> 赞同：1
> 
> 时间：2012-10-03T13:49:40.483
> 
> 标签：web-services, jdeveloper

我正在使用 JDeveloper (10.1.3.5) 从现有的 EJB 创建 Web 服务。

每次我向 EJB 添加新方法并重新生成 Web 服务时， **{myproject}\src\META-INF\**中生成的 WSDL 总是将端点地址预定义为固定的主机名和端口。

我可以在哪里更改项目配置（或变量）中的这些设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:56:12.857

我认为仅使用 JDeveloper 是不可能的，但是如果您集成了像（Maven 或 Ivy）这样的项目管理工具，您应该能够引入一个插件或脚本，在构建期间更新文件并适应值使用属性或构建配置文件。

# xml - 目标 C：在没有 GameEngine 的情况下使用 TexturePacker 的 spritesheet

> ID：12709943
> 
> 赞同：1
> 
> 时间：2012-10-03T13:49:49.393
> 
> 标签：xml, texturepacker

我想从我用 Texture Packer 创建的 XML 文件中读取几个图像并将它们添加到集合视图中。XML 如下所示：

```
<TextureAtlas imagePath="Level1TextureAtlas.png" width="1024" height="512">
    <sprite n="bild0" x="2" y="424" w="128" h="86"/>

    <sprite n="bild1" x="273" y="135" w="131" h="131"/>
    <sprite n="bild10" x="406" y="106" w="128" h="65"/>
    <sprite n="bild11" x="436" y="303" w="128" h="40"/>
    <sprite n="bild12" x="383" y="414" w="128" h="66"/>
    <sprite n="bild13" x="524" y="2" w="65" h="65"/>
    <sprite n="bild14" x="2" y="149" w="136" h="136"/>
    <sprite n="bild15" x="300" y="346" w="153" h="66"/>
    <sprite n="bild16" x="455" y="345" w="163" h="46"/>
    <sprite n="bild17" x="557" y="69" w="111" h="30"/>
    <sprite n="bild18" x="216" y="415" w="165" h="87"/>
    <sprite n="bild19" x="300" y="268" w="134" h="76"/>
    <sprite n="bild2" x="2" y="287" w="163" h="135"/>
    <sprite n="bild20" x="591" y="2" w="64" h="30"/>
    <sprite n="bild21" x="265" y="2" w="131" h="131"/>
    <sprite n="bild22" x="406" y="173" w="65" h="65"/>
    <sprite n="bild23" x="524" y="69" w="31" h="31"/>
    <sprite n="bild24" x="398" y="2" w="124" h="102"/>
    <sprite n="bild3" x="167" y="282" w="131" h="131"/>
    <sprite n="bild4" x="536" y="102" w="115" h="42"/>
    <sprite n="bild5" x="473" y="173" w="145" h="55"/>
    <sprite n="bild6" x="140" y="149" w="131" h="131"/>
    <sprite n="bild7" x="2" y="2" w="261" h="145"/>
    <sprite n="bild8" x="436" y="240" w="61" h="61"/>
    <sprite n="bild9" x="132" y="424" w="82" h="82"/>
</TextureAtlas> 
```

我在整个网络上搜索了这个，但我找不到任何帮助。谁能告诉我如何遍历 XML 并将图像保存在数组中？

# python - 基于 Clicked 对多个 QpushButton 使用单个 Python Def

> ID：12709945
> 
> 赞同：1
> 
> 时间：2012-10-03T13:50:02.180
> 
> 标签：python, pyqt

我正在做一个带有很多按钮的 GUI。一次有多个选择选项。

我想知道如何为所有按钮连接单个 Python Def，`Clicked()`按钮名称为 arg？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T13:53:31.507

使用 a[`QButtonGroup`](http://doc.qt.digia.com/4.7-snapshot/qbuttongroup.html)及其[`buttonClicked`](http://doc.qt.digia.com/4.7-snapshot/qbuttongroup.html#buttonClicked)信号。你会得到 the`id`或 the`QPushButton`本身。

**编辑**

一个简单的例子：

```
import sys
from PyQt4 import QtGui

class Widget(QtGui.QWidget):
    def __init__(self, parent=None):
        super(Widget, self).__init__(parent)

        # Arrange buttons horizontally
        buttonLayout = QtGui.QHBoxLayout()

        # QButtonGroup to keep track of buttons
        self.buttonGroup = QtGui.QButtonGroup()

        # Connect the 'buttonClicked' signal 'self.setLabel'
        # There are two overloads for 'buttonClicked' signal: QAbstractButton (button itself) or int (id)
        # Specific overload for the signal is selected via [QtGui.QAbstractButton]
        # Clicking any button in the QButtonGroup will send this signal with the button
        self.buttonGroup.buttonClicked[QtGui.QAbstractButton].connect(self.setLabel)

        for i in range(5): # Let's create 5 button
            button = QtGui.QPushButton('%d' % i)     # make a button
            buttonLayout.addWidget(button)           # add to layout
            self.buttonGroup.addButton(button)       # add to QButtonGroup
            #self.buttonGroup.addButton(button, i)    # You can give an 'id' if you like

        self.label = QtGui.QLabel()  # just to write some output

        # lay everything out
        layout = QtGui.QVBoxLayout()
        layout.addLayout(buttonLayout)
        layout.addWidget(self.label)
        self.setLayout(layout)

    def setLabel(self, button):
        # clicking any button will call this slot 
        # 'button' argument will be the button itself
        # so... let's show its text in the label:
        self.label.setText('You clicked button with text "%s"' % button.text())

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    widget = Widget()
    widget.show()
    app.exec_() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:18:54.067

一种简单的方法是创建连接到实际 Qt 事件的小函数——可以是 lambdas 或 functools.partial 返回的对象。这些小函数依次调用您的主回调，传递任意数量的参数：

```
# coding: utf-8

from PyQt4 import QtCore, QtGui

app = QtGui.QApplication([])
window = QtGui.QWidget()
grid = QtGui.QGridLayout()

def callback(button):
   print button

for x in range(10):
   b = QtGui.QPushButton()
   b.setText(unicode(x))
   grid.addWidget(b, 0, x)
   window.connect(b, QtCore.SIGNAL("clicked()"), (lambda y:lambda: callback(y) )(x))
   b.show()

window.setLayout(grid)
window.show()
app.exec_() 
```

请注意，您必须对作为回调的实际 lambda 使用“封闭 lambda”，以便为每个循环迭代“冻结” x 的值。如果连接调用的表达式只是`lambda: callback(x)`, x 将在按键时进行评估时间，因此 `9`在这种情况下，对于所有按钮都是 。

`callback`然而，正如您所要求的那样，主要功能只是一个。

# php - prestashop - 添加新用户或客户的代码

> ID：12709954
> 
> 赞同：1
> 
> 时间：2012-10-03T13:50:24.347
> 
> 标签：php, mysql, prestashop

我正在尝试分析将 Presta 与其他系统集成的 AuthController.php 文件或模块，但它失败了..

您是否有任何解决方案或代码片段可以轻松做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:39:34.007

OK I've got one that's work for me:

```
include '../config/config.inc.php';  // path ti the config file
   $cookie = new Cookie('ps', '', 3600);

Db::getInstance()->Execute("INSERT INTO `ps_customer` VALUES (NULL,$gengre,1,'$tempname','$tempsurname','$email','".md5(_COOKIE_KEY_.$passNew)."',NOW(),NULL,0,NULL,NULL,0,'ba27e0ac14389d8feb89c3c9e7594464',NULL,1,0,0,NOW(),NOW())"); 
```

maybe It can help someone

# c++ - 链接器如何在使用不同编译器编译的动态库中选择动态库

> ID：12709955
> 
> 赞同：0
> 
> 时间：2012-10-03T13:50:23.380
> 
> 标签：c++, linker, dynamic-linking

我有一个 C++ 项目，目前没有链接到任何外部动态库。我正在考虑将来使用一些需要构建的boost库（不是仅标题）。目前，在开发阶段，我使用三个不同的工具链构建我的项目：和`g++`，平台是. 这些编译器，AFAIK，彼此二进制兼容，例如 g++ 编译的应用程序可以使用英特尔 C++ 编译的动态库。`LLVM/Clang++``Intel C++``Linux`

我已经构建了 boost 二进制文件并将它们安装到不同的文件夹中。例如`build_gcc`，`build_icc`。然后我将这些文件夹的路径添加到系统中`LIBRARY_PATH`。问题是：如果我现在使用`g++`or构建我的项目`Intel C++`并链接一些动态库，例如写

```
-lboost_math_tr1 
```

在 中`makefile`，如果来自不同编译器的二进制文件相互兼容，链接器如何决定链接哪个确切的库文件？

这个问题的动机很简单：`Intel C++`是一个优化编译器，所以如果我用它构建东西，我希望它们与用`Intel C++`编译器编译的动态库链接，而不是与用`g++`. 当然，我知道我可以简单地使用多个条件语句`makefile`来为每个使用的工具链设置带有库二进制文件的确切目录，但这有点不方便。我在徘徊，链接器是否足够聪明，可以识别它应该使用哪个确切的共享库文件，或者它只是使用系统中第一个出现的位置`LIBRARY_PATH`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:00:03.260

链接器不会知道。如果第一个找到的库不兼容，它甚至会退出，而不是搜索所有库，直到找到兼容的库。

确认类似：

```
$ cat foo.c
int main() {
  return 0;
}
$ mkdir bar
$ touch bar/libm.so
$ gcc foo.c -o foo -Lbar -lm
/usr/bin/ld: error: b/libm.so: file is empty
collect2: error: ld returned 1 exit status 
```

otoh，动态链接的美妙之处在于能够将 dylib 与更好的交换，而无需重新编译。因此您可以链接到 g++ 版本，但如果性能不佳，请在目标主机上安装 icc 版本（在 g++ 版本之前搜索的位置），您的应用程序将神奇地使用它（只要它们是兼容的）。

您还可以`LD_LIBRARY_PATH`在运行应用程序时使用该变量在非标准位置搜索库：

```
LD_LIBRARY_PATH=/path/to/super/libs/ ./app-dylinked-with-generic-libs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:56:48.240

PATH 环境变量用于查找可执行文件，而不是用于查找库。每个编译器都有一组用于查找库的标准位置，以及使用 -L 显式指定的位置。它不会关心哪个编译器创建了库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:56:58.317

您需要将这些库添加到`$LIBRARY_PATH`（链接）和`$LD_LIBRARY_PATH`（运行时）而不是`$PATH`. 我觉得您可以`Makefile`一次在一个变量中设置这些变量，以决定链接哪个二进制文件。

# ajax - CakePHP 2.x 在弹出窗口中用 ajax 实现编辑表单

> ID：12709956
> 
> 赞同：0
> 
> 时间：2012-10-03T13:50:26.690
> 
> 标签：ajax, jquery, cakephp-2.0

在这里发布之前，我已经阅读了其他帖子并搜索了谷歌。

我在一个视图中有一个 jquery 弹出窗口，我打算在其中显示 EDIT 表单，然后使用 ajax 提交。

更多详细信息

有一个预订控制器。特定日期的预订显示在索引 ctp 的表格中。当用户单击编辑按钮时，会弹出一个 div。现在我需要显示编辑表单并通过 Ajax 提交。

请有人指出我正确的方向，可能是一些帮助或一些教程。

在此先感谢，基兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:54:27.507

您使用的是标准的 CakePHP 编辑方法吗？

如果是这样，一种选择是为编辑功能创建一个元素。在 Views/Reservations 中，如果您的视图是 edit.ctp，那么您在 Views/Elements 中的视图也将是 edit.ctp。或者，您可以在控制器中创建一个新方法，在 Views/Reservations 中创建一个新视图，在 Views/Elements 中创建一个新视图。

然后，在您的弹出窗口中，您应该能够调用元素、编辑表单并提交。

# html - 如何使用 HTML5 在视频中插入图像

> ID：12709958
> 
> 赞同：3
> 
> 时间：2012-10-03T13:50:29.507
> 
> 标签：html, html5-video

我正在考虑一种在播放的 HTML5 视频中插入广告图像的方法。我是 HTML5 的新手。因此，无法真正想出包含此功能的方法。

如果视频长度为 1 分钟。我应该能够在 36 秒处停止视频并显示此图像 5 秒并自动移至视频。

是否有此功能的库或任何其他预建设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:58:56.740

这可以通过 HTML5 Video API 实现。基本上你想要做的是在第 36 秒暂停视频，用图像覆盖它，然后在 5 秒后删除图像并再次播放视频。

这是一个如何执行此操作的示例：

```
var video; // acquire video

function PerformCheck() {
    var curTime = parseInt(video.currentTime, 10);
    if (curTime < 36) {
        setTimeout(PerformCheck, 200);
    } else {
        video.pause();
        PlayCommercial();
    }
}

function PlayCommercial() {
    // TODO: Display image overlay
    setTimeout(ResumeVideo, 5000);
}

function ResumeVideo() {
    // TODO: Remove image overlay
    video.play();
} 
```

因此，对于上面的示例，您在视频启动后开始执行检查。如果用户这样做，则订阅视频事件。

```
video.onplay = PerformCheck(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T14:05:32.917

几乎没有什么是使用 JavaScript 无法完成的。
一些建议：
使用 Javascript 启动计时器 t1(36Sec)，使用`setTimeout();`.
然后，在回调函数中， 1）使用（或）类似方法
暂停视频。 2) 更改 CSS 以显示图像，然后启动第二个计时器 t2(5Sec)，这会将图像的 CSS 更改回不可见/显示：无3) 使用 这只是一个 Kick 启动器 播放/恢复视频。你必须完成剩下的作业！StackOverflow 鼓励您收集所需的信息并至少在某个时候尝试一下 `document.getElementById('myvideotag').pause();`

`document.getElementById('myvideotag').play();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T14:14:27.730

我想通过以下方式解决问题（作为第一次尝试）：

1.  创建一个视频标签，然后使用一些 javascript 代码引用视频标签。
2.  创建一个画布并在其中绘制视频内容，然后创建另一个将保存广告图像的画布。在所需的时间，我们将在第一个画布上绘制第二个画布内容。

代码应如下所示：

```
var startTime = Date.now();
$(function () {
    var canvas = document.getElementById('canvas');
    var canvas2 = document.createElement('canvas');    
    canvas2.setAttribute('id', 'canvas2');
    var ctx = canvas.getContext('2d');
    var ctx2 = canvas2.getContext('2d');
    var img = new Image();
    img.src = "...";
    img.onload = function() {
        ctx2.drawImage(img);
    }

    var video = document.getElementById('video');

    video.addEventListener('play', function () {
        var $this = this; //cache
        (function loop() {
            var currentTime = Date.now() - startTime;
            if (!$this.paused && !$this.ended) {
                if (currentTime > 3600)  {
                    ctx.drawImage(canvas2, 0, canvas.height - 100);
                } else {
                    document.removeElementById('canvas2');
                }                    

                ctx.drawImage($this, 0, 0);
                setTimeout(loop, 1000 / 30); // drawing at 30fps
            }
        })();
    }, 0);
});
​ 
```

[我在html5doctor](http://html5doctor.com/video-canvas-magic/)上找到了一篇关于该过程的很好的详尽解释的文章。但是我没有检查他们的解决方案。提供的解决方案并不完整，我只勾勒出我将如何解决问题的基本想法。

# ios - 关于制作自定义 NSString

> ID：12709959
> 
> 赞同：0
> 
> 时间：2012-10-03T13:50:35.030
> 
> 标签：ios, nsstring, substring

我有很多字符串，例如 3 个：

```
1\. example old
14\. example new
234\. example 45 
```

我想排除第一个数字并做到这一点：

```
example old
example new
example 45 
```

我要做的是：

```
 NSString *fixed1 = [str substringWithRange:NSMakeRange(3, [str length]-3)];
   NSString *fixedStr = [fixed1 stringByReplacingOccurrencesOfString:@". " withString:@""]; 
```

我得到的是：

```
example old
 example new
example 45 
```

问题是“example new”开头的空格。我不知道如何删除它，如果我试试这个：

```
 NSString *fixed1 = [str substringWithRange:NSMakeRange(3, [str length]-3)];
 NSString *fixed2 = [fixed1 stringByReplacingOccurrencesOfString:@". " withString:@""];
 NSString *fixedStr = [fixed2 stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

我懂了：

```
exampleold
examplenew
example45 
```

我为此发疯了，请有人有一个很好的简单想法如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:57:04.783

您可以使用

```
- (NSString *)stringByTrimmingCharactersInSet:(NSCharacterSet *)set 
```

with`[NSCharacterSet whitespaceCharacterSet]`作为参数来去除开头和结尾的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:58:21.903

```
- (NSString *) customizeString:(NSString *)input {
    NSArray *components = [input componentsSepratedByString:@". "];
    return [components objectAtIndex:1];
} 
```

如果您的字符串格式与您在问题中指定的格式相同，则此函数效果很好。但是，将代码放在`try{...}catch(){}`块中以防止任何异常。它只是一个简单的解决方案，但不是膝盖。

# cocoa - NSTextView 报价级别

> ID：12709961
> 
> 赞同：0
> 
> 时间：2012-10-03T13:50:49.690
> 
> 标签：cocoa, webview, nstextview

我在我的项目中使用了 NSTextView 的自定义子类，我想知道是否有人知道在显示被回复的文本时，Apple 的 Mail.app 会以时尚方式在其中显示图形。

像这样：

![文本在每行前面附加一条蓝色垂直线](../Images/45870d0273e32e3e1766aaf6e8519778.png)

我在另一条消息中读到 SO，用于显示邮件的组件可能是 WebView。这对我来说很好，我可以使用它。这是否意味着这条线应该使用 CSS 或类似的东西来绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:11:35.647

Mail 的编辑器*是*一个 WebView。您可以使用 NSTextView 来做到这一点，但需要大量额外的布局和绘图工作。

# file-upload - 在 CakePHP 1.3 中上传多个文件

> ID：12709965
> 
> 赞同：2
> 
> 时间：2012-10-03T13:50:58.603
> 
> 标签：file-upload, cakephp-1.3

我正在使用用 CakePHP 1.3 编写的应用程序（由于对框架核心进行了更改，无法将其移动到 CakePHP 2.0）。我正在尝试升级用于将文件上传到应用程序的表单，并可以一次上传多个文件。我发现设置 'multiple' 选项会让我选择多个文件，但是在传递 'multiple' 或 'multiple'=>'' 作为选项失败时，我认为 CakePHP 1.3 只是忽略它：

```
<?php echo $this -> Form -> input('FManager', array('label' => '', 'type' => 'file', 'multiple'=>"")); ?>

<?php echo $this -> Form -> input('FManager', array('label' => '', 'type' => 'file', 'multiple')); ?> 
```

我尝试在没有表单助手的情况下创建 raw

```
 <input  type="file" multiple="" /> 
```

这使我可以选择多个，因此我只需要根据我将在 $this->data 中从该多个文件输入中获得的内容来修复逻辑。

我仍然想知道是否有可能使它成为 cakephp 方式，如果我在这里犯了一些错误，或者如果有人知道在这种情况下可以帮助我的助手，插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:45:46.303

我遇到了同样的问题，但我确实找到了一种方法，通过在输入名称后添加一个点和一个空格来使多文件类型工作。

> **不工作：**

```
echo $form->input('files', array(
    'label' => 'Files:',
    'type' => 'file',
    'multiple' => 'multiple',
)); 
```

> **在职的：**

```
echo $form->input('files. ', array(
    'label' => 'Files:',,
    'type' => 'file',
    'multiple' => 'multiple',
)); 
```

# mysql - 使用 jsp 和 servlet 和 mysql 对 Web 应用程序进行身份验证

> ID：12709972
> 
> 赞同：1
> 
> 时间：2012-10-03T13:51:20.057
> 
> 标签：mysql, jsp, servlets, login, web

我正在开发一个 Web 应用程序，并且卡在身份验证代码上，我已经在 Eclipse 上使用休眠完成了连接，现在它是关于身份验证，当我提交身份验证时没有任何反应，请帮助我，我是新手。这是 JSP 文件：

```
 <%@ page language="java" contentType="text/html; charset=windows-1256"
pageEncoding="windows-1256"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Survey Project</title>
    <link rel="stylesheet" href="css/screen.css" type="text/css" media="screen" title="default" />
    <!--  jquery core -->
    <script src="js/jquery/jquery-1.4.1.min.js" type="text/javascript"></script>

    <!-- Custom jquery scripts -->
    <script src="js/jquery/custom_jquery.js" type="text/javascript"></script>

     <!-- MUST BE THE LAST SCRIPT IN <HEAD></HEAD></HEAD> png fix -->
     <script src="js/jquery/jquery.pngFix.pack.js" type="text/javascript"></script>
     <script type="text/javascript">
     $(document).ready(function(){
     $(document).pngFix( );
     });
     </script>
     </head>
     <body id="login-bg" >
     <!-- Start: login-holder -->
     <div id="login-holder">

 <!-- start logo -->
 <div id="logo-login"></div>
 <!-- end logo -->

 <div class="clear"></div>
 <form name="form1" method="post" action="../LoginServlet">
 <!--  start loginbox ................................................................................. -->
 <div id="loginbox">

 <!--  start login-inner -->
 <div id="login-inner">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
        <th>Username</th>
        <td><input type="text"  class="login-inp" id="login" /></td>
    </tr>
    <tr>
        <th>Password</th>
        <td><input type="password" value=""  onfocus="this.value=''" class="login-inp" id="pass" /></td>
    </tr>
    <tr>
        <th></th>
        <td><input type="button" class="submit-login" id="submit" /></td>
    </tr>
    </table>
    </div>
    <!--  end login-inner -->
    <div class="clear"></div>
        </div>
  <!--  end loginbox -->
     </form>  
  <!--  start forgotbox ................................................................................... -->
<div id="forgotbox">
    <div id="forgotbox-text">Please send us your email and we'll reset your password.</div>
    <!--  start forgot-inner -->
    <div id="forgot-inner">
    <table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <th>Email address:</th>
        <td><input type="text" value=""   class="login-inp" /></td>
    </tr>
    <tr>
        <th> </th>
        <td><input type="button" class="submit-login"  /></td>
    </tr>
    </table>
    </div>
    <!--  end forgot-inner -->
    <div class="clear"></div>
    <a href="" class="back-login">Back to login</a>
</div>
<!--  end forgotbox -->

    </div>
   <!-- End: login-holder -->
   </body>
   </html> 
```

这是登录的servlet：

```
 package stage.servlet;

    import java.io.IOException;
    import java.io.PrintWriter;
    import java.util.List;

    import javax.servlet.RequestDispatcher;
    import javax.servlet.ServletException;
    import javax.servlet.annotation.WebServlet;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    import stage.Personnel;
    import stage.dao.HibernateSessionFactory;

    import net.sf.hibernate.HibernateException;
    import net.sf.hibernate.Query;
    import net.sf.hibernate.Session;
    import net.sf.hibernate.Transaction;

    @WebServlet(name = "LoginServlet", urlPatterns = {"/LoginServlet"})
    public class LoginServlet extends HttpServlet {

 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException, HibernateException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {

            String login = request.getParameter("login");
            String pass = request.getParameter("pass");

            // creation d'un request dispatcher
            RequestDispatcher rd = null;

            Session s = HibernateSessionFactory.getSessionFactory().openSession();
            Transaction trs = s.beginTransaction();
            Query q = s.createQuery("from personnel where login='"+login+"'");

            List<Personnel> l = q.list();
            if(l.isEmpty())
            {
                 rd = request.getServletContext().getRequestDispatcher("/pages/echec1.jsp");

            }
            else{
                Personnel p = l.get(0);

                if(p.getPassword().equals(pass))
                {

                    request.setAttribute("operation", "affichage");
                    rd = request.getServletContext().getRequestDispatcher("/AdminServlet");

                }   

                else{

                rd = request.getServletContext().getRequestDispatcher("/pages/echec2.jsp");

                }

                rd.forward(request, response);

            }

        }

        finally {            
            out.close();
        }

 }

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /** 
     * Handles the HTTP <code>GET</code> method.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        try {
            processRequest(request, response);
        } catch (HibernateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    /** 
     * Handles the HTTP <code>POST</code> method.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        try {
            processRequest(request, response);
        } catch (HibernateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    /** 
     * Returns a short description of the servlet.
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold> 
```

}

# sql-server - SQL Server 查询空闲超时

> ID：12709973
> 
> 赞同：0
> 
> 时间：2012-10-03T13:51:20.350
> 
> 标签：sql-server

我有一个使用 ASP.NET 和 SQL Server 开发的网站共享托管计划。我为所有 sql 命令设置了 CommandTimeout = 180。现在托管服务提供商说我们的查询运行时间很长/保持活动状态长达 30 分钟。他们建议我们在 SQL 脚本中设置一些 IDLE SESSION TIME OUT。我不知道有这样的事情。我搜索了也没有帮助的网络。**所以请告诉我“SQL脚本中的IDLE SESSION TIME OUT”**到底是什么以及如何设置它。谢谢

# ruby-on-rails-3 - 由于 rvm，rails3 中的问题

> ID：12709976
> 
> 赞同：0
> 
> 时间：2012-10-03T13:51:32.040
> 
> 标签：ruby-on-rails-3, rvm

突然，我的 is rvm 无法正常工作，并向我显示所有 rails 和 rake 命令的此错误。

```
 /home/hb/.rvm/rubies/ruby-1.9.3-                                                                                                 p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': libcrypto.so.1.0.0: cannot open shared object file: No such file or directory - /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-linux/digest/md5.so (LoadError)
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/gems/railties-3.2.8/lib/rails/generators/app_base.rb:1:in `<top (required)>'
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/gems/railties-3.2.8/lib/rails/generators/rails/app/app_generator.rb:1:in `<top (required)>'
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/gems/railties-3.2.8/lib/rails/commands/application.rb:24:in `<top (required)>'
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/gems/railties-3.2.8/lib/rails/cli.rb:15:in `<top (required)>'
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/gems/railties-3.2.8/bin/rails:7:in `<top (required)>'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/bin/rails:19:in `load'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/bin/rails:19:in `<main>'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/bin/ruby_noexec_wrapper:14:in `eval'
from /home/hb/.rvm/gems/ruby-1.9.3-p194@demo/bin/ruby_noexec_wrapper:14:in `<main>' 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:29:17.480

重新安装 1.9.3。在许多情况下都有帮助。rvm 有点像 hack，所以可能有很多原因，尝试重新安装是最不痛苦的。

# internet-explorer - How do I set the homepage in ie from a DOS batch script

> ID：12709980
> 
> 赞同：6
> 
> 时间：2012-10-03T13:51:35.247
> 
> 标签：internet-explorer, batch-file

Is there a way to set the Internet Explorer homepage from a dos batch script.

I'm using: Windows 2008 Server IE 7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:12:37.317

the value for the home page is stored in the registry.

if all you want to do is set the home page, then a `.REG` *file* would be easier:

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main]
"Start Page"="http://www.stackoverflow.com/" 
```

if it's part of an installation, then you an use the `REG` command to access the registry:

```
REG ADD "HKCU\Software\Microsoft\Internet Explorer\Main" /V "Start Page" /D "http://www.stackoverflow.com/" /F 
```

# php - Active Directory 上的 PHP 单点登录

> ID：12709987
> 
> 赞同：2
> 
> 时间：2012-10-03T13:51:44.847
> 
> 标签：php, active-directory, ldap

我知道对此有类似的问题，但我不知道如何继续。我在 Ubuntu 机器上的 Apache 下运行 PHP 应用程序。这个应用程序基本上是一个运行在同一个域下的内网应用程序。用户在 Windows 7 上，他们使用在 ldap 服务器中创建的凭据登录系统。用户使用与登录系统相同的凭据登录 php 应用程序。

我需要在不提示登录表单的情况下为我的应用程序进行单点登录。

有没有办法单点登录？如果是的话，你能帮我看看我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T10:10:12.737

This are some of the link that may be helpful for you.

[http://rashidi.zin.my/geek-talks/2009/06/30/php-mysql-curl-single-sign-on-with-multiple-domains.html](http://rashidi.zin.my/geek-talks/2009/06/30/php-mysql-curl-single-sign-on-with-multiple-domains.html)
[http://www.opengroup.org/security/sso/sso_intro.htm](http://www.opengroup.org/security/sso/sso_intro.htm)
[http://www.authenticationworld.com/Single-Sign-On-Authentication/](http://www.authenticationworld.com/Single-Sign-On-Authentication/)
[http://merbist.com/2012/04/04/building-and-implementing-a-single-sign-on-solution/](http://merbist.com/2012/04/04/building-and-implementing-a-single-sign-on-solution/)
[https://wiki.queensu.ca/display/itsd/Single+Sign-On](https://wiki.queensu.ca/display/itsd/Single+Sign-On)
[https://github.com/jasny/sso#readme](https://github.com/jasny/sso#readme)
[https://lw.microstrategy.com/msdz/MSDL/940/docs/mergedProjects/websdk/topics/sso/SSO_Single_Sign-on.htm](https://lw.microstrategy.com/msdz/MSDL/940/docs/mergedProjects/websdk/topics/sso/SSO_Single_Sign-on.htm)

# html - 不考虑 textarea 的 Padding-bottom

> ID：12709988
> 
> 赞同：9
> 
> 时间：2012-10-03T13:51:45.133
> 
> 标签：html, css, forms

当我为 textarea 设置填充时，乍一看它还可以。但是当我输入超出文本区域高度的内容时（当您开始看到滚动条时），填充底部不再存在。有没有办法解决这个问题？这似乎是一种默认行为。您可以在这里看到一个非常基本的示例：http: [//jsfiddle.net/corinne/LKkky/](http://jsfiddle.net/corinne/LKkky/) PS。使用的浏览器是 Chrome。PS2。刚刚尝试使用 Firefox，实际上填充仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:27:11.407

Chrome、Safari 和 Internet Explorer 呈现文本区域填充的方式与 Firefox 和 Opera 不同。现在他们中的哪一个错误地渲染了textareas？这取决于您要实现的目标，因为实际上他们都没有错误地渲染它，他们都添加了填充，这归结为他们如何解释规范。

没有 CSS 属性可以解决此“问题”，因此解决此“问题”的唯一方法是将容器元素添加到 textarea 并为其提供填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:58:00.813

实际上，它仍然存在；填写文本框内容后，您只需向下滚动即可查看额外的 20px 填充。我可以建议**overflow: hidden**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T14:05:21.657

您可以将样式分配给`font-size: 0;`标签`form`，因为问题是在这样的标签内有一个新行，您需要避免。

完成后，您应该为具有内容的组件分配正确的字体大小，在最简单的情况下是文本区域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-26T13:58:53.943

我现在将我的 textarea 元素包装在一个 div 元素中，然后在其上设置填充和边框。textarea 现在的边框和填充为零。另外，我还隐藏了调整大小手柄。

```
<label for="giftMessage">Add a gift message
    <div class="textAreaWrapper">
        <textarea name="gift_message" class="input-text" id="giftMessage" value="" placeholder="Add your message here"></textarea>
    </div>
</label>
<style>
.textAreaWrapper {
    border:solid 1px #ededed;
    padding:15px;
}
textarea.input-text {
    width: 100%;
    padding: 0;
    border:0;
    resize: none;
    font-size: 16px;
    color:#000000;
    resize: none;
}
</style> 
```

# html - 从经典的 asp 页面中删除 � 字符

> ID：12709991
> 
> 赞同：-3
> 
> 时间：2012-10-03T13:51:51.720
> 
> 标签：html, asp-classic

我创建了一个经典的 asp 页面，并在该页面中从 RSS 提要中阅读。在提要描述中，它显示了此语句。请为此提供任何解决方案。

我想从 Responsorial Psalm�Ps 19:8, 10, 12-13, 14 页中删除这个字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:53:54.597

您可以在 MS word 或其他将 UTF 8 字符转换为这种 ANSI 的编辑器中编辑 asp 页面。请在记事本中打开并通过从下拉菜单中选择**另存为 UTF-8格式**

# java - 在java泛型参数列表中需要帮助

> ID：12709992
> 
> 赞同：0
> 
> 时间：2012-10-03T13:51:54.087
> 
> 标签：java, list, generics

大家好，我对这段代码有疑问：

```
//Class FileManip
public class FileManip{

private HTTPRequest<List<String>> addMe = new HTTPRequest<List<String>>();

    public void openFile(){

            try{
                BufferedReader buff = new BufferedReader(new FileReader("Saturday.txt"));
                try{
                    Double ctr = 0.0;
                    String readHTTPURIFromTxt = buff.readLine();
                    while (readHTTPURIFromTxt!=null){

                        if (!readHTTPURIFromTxt.isEmpty()){
                            addMe.putListHTTPCharTable(parseHTTPReqToCharbyChar(readHTTPURIFromTxt), ctr);
                            ctr++;
                        }
                    readHTTPURIFromTxt = buff.readLine();
                    }
                }

                finally{
                    buff.close();
                }   

            }
            catch(FileNotFoundException e){
                System.out.println("File not found"+e);
            }
            catch(IOException e){
                System.out.println("oist exception");
            }
        }

    public List<String> parseHTTPReqToCharbyChar(String getHTTP){ 
            List<String> parsingReq = new ArrayList<String>();
            String convChar=null;

                for (int x = 0; x<getHTTP.length(); x++){
                    convChar = Character.toString(getHTTP.charAt(x));
                    parsingReq.add(convChar);
                }

            return parsingReq;
        }
}

    //Class HTTPRequest
    public class HTTPRequest<T> {

    private LinkedHashMap<List<T>, Double> tableOfInitProbList = new LinkedHashMap<List<T>, Double>();

    public HTTPRequest(){
        }

    public HTTPRequest(List<T> entry, Double value){
            tableOfInitProbList.put(entry, value);
        }

    public void putListHTTPCharTable(List<T> uri, Double value){
            tableOfInitProbList.put(uri, value);
        }

    } 
```

问题是线路

```
addMe.putListHTTPCharTable(parseHTTPReqToCharbyChar(readHTTPURIFromTxt), ctr); 
```

它在 if 语句中的类 filemanip openfile 方法中。我写了 putListHttpCharTable 来获取 2 个参数 List < T > 和 Double 但是每当我传递返回类型为 List 的参数 parseHTTPReqToCharbyChar(readHTTPURIFromTxt) 时，都会出现编译时错误。它读到

> > HTTPRequest> 类型中的 putListHTTPCharTable(List>, Double) 方法不适用于参数 (List, Double)

我传递了一个具有 List < String > 返回类型的方法，但不知何故，编译器试图将其读取为 List < List < T > > 或 List < List < String > > 而不仅仅是 List < String >。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:57:52.763

因为 ：

```
HTTPRequest<List<String>> 
```

方法 ：

```
T <=> List<String> 
```

所以编译器会看到这个（对于你的“addMe”变量）：

```
//Class HTTPRequest
    public class HTTPRequest<List<String>> {

    private LinkedHashMap<List<List<String>>, Double> tableOfInitProbList = new LinkedHashMap<List<List<String>>, Double>();

    public HTTPRequest(){
        }

    public HTTPRequest(List<List<String>> entry, Double value){
            tableOfInitProbList.put(entry, value);
        }

    public void putListHTTPCharTable(List<List<String>> uri, Double value){
            tableOfInitProbList.put(uri, value);
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:00:31.170

您正在设置`T`为`List<String>`

然后该方法正在寻找一个`List<T>`所以你最终得到`List<List<String>>`

如果您将课程更改为：

```
public class HTTPRequest<T> {

    private LinkedHashMap<T, Double> tableOfInitProbList = new LinkedHashMap<List<T>, Double>();

    public HTTPRequest(){
        }

    public HTTPRequest(T entry, Double value){
            tableOfInitProbList.put(entry, value);
        }

    public void putListHTTPCharTable(T uri, Double value){
            tableOfInitProbList.put(uri, value);
        }

} 
```

或者，如果您只想使用泛型参数指定列表类型，则此声明应该有效：

`private HTTPRequest<String> addMe = new HTTPRequest<String>();`

# asp.net - “ddlCaseFiles”有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值

> ID：12709993
> 
> 赞同：0
> 
> 时间：2012-10-03T13:52:04.487
> 
> 标签：asp.net, stored-procedures, drop-down-menu

我有一个存储过程，它返回一堆 FileId、名称等。我有一个已禁用的 DropDownList，我将 FileID 放在 DropDownList 中，这样它将成为下拉列表中的唯一值。但我一直在标题中遇到这个错误。这就是我所拥有的：

```
try
    {
        conn.Open();
        var reader = cmd.ExecuteReader();
        if (reader.HasRows)
        {
            reader.Read();
            ddlCaseFiles.SelectedValue = reader["FileID"].ToString();//ddl never gets the fileID assigned.
            ddlCaseFiles.Enabled = false;
            txtTimeTrackerDate.Value = reader["TBDate"].ToString();

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:56:47.473

如果您尝试向 ddlCaseFiles 添加新项目，则：

```
ddlCaseFiles.Items.Add(new ListItem(reader["FileID"].ToString())); 
```

检查 ddlCaseFiles 中是否存在该值：

```
if (ddlCaseFiles.Items.FindByValue(reader["FileID"].ToString()) != null)
{
  ddlCaseFiles.SelectedValue = reader["FileID"].ToString();
} 
```

# xcode - XNU 线程状态在 Xcode/Instruments 中进行颜色编码

> ID：12709995
> 
> 赞同：3
> 
> 时间：2012-10-03T13:52:25.703
> 
> 标签：xcode, multithreading, performance, instruments, xnu

我正在使用 Apple Instruments 工具对多线程应用程序进行一些分析，这些工具提供了很多我试图理解的信息。我试图找到一个很好的资源来描述工具中颜色编码的线程状态。我一直在研究 XNU Kernel 文档和书籍，但运气不佳。

有很多黄色和紫色对应于“抢占”和“监督”模式（全彩色图表在附图的右上角弹出中描述）。鉴于我在这些状态中花费了很多时间而不是“运行”状态（蓝色），我特别想知道它们指的是什么，以及是否有可能/希望尽量减少在这些状态中花费的时间.

![在此处输入图像描述](../Images/cf27a255054a956acb89d541bc126c87.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:09:54.173

Preempted = 您的线程是可运行的，并且已经准备好、愿意并且能够执行，但被踢出（上下文切换）以支持其他线程。这意味着您的线程没有在 I/O 或事件上休眠，实际上是在做一些 CPU 密集型的事情。然而，由于量子到期或其他更高优先级的线程，它被强制退出 CPU。

主管 = 您的线程处于内核模式。通常，这意味着内核正在为您的线程进行的系统调用提供服务。

它们都不是严格意义上的坏事，但是：

避免抢占：除了使用您的优先级之外，您在这里无能为力 - 使用负的 nice 值增加您的优先级，或者直接使用 setpriority API。您还可以使用调度策略来提高线程的偏好，并哄骗 Mach 调度程序（线程的底层决策者）将您的线程放在首位，并为它们提供更多的 CPU 时间。

避免主管模式：您可能对系统调用很感兴趣。同样，这不一定是坏事。

希望这可以帮助，

TG

# php - 如何将请求的 url 映射到 php 中的特定另一个 url？

> ID：12709997
> 
> 赞同：0
> 
> 时间：2012-10-03T13:52:27.867
> 
> 标签：php, url, request, url-routing, httprequest

我是 php 的初学者，需要知道如何更改特定页面的 url 假设我有 home.php 并且此页面的 url 是 localhost:8080/webtemp/View/Home.php

我在请求此页面时需要用户，只需键入 ex：http:\webtemp.com

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:57:14.607

如果您想要的是当用户调用[http://webtemp.com](http://webtemp.com)时，您的 index.php 显示来自另一个网络服务器（http://localhost:8080/webtemp/View/Home.php）中运行的另一个 php 的内容，那么您可以加载通过[file_get_contents 功能](http://php.net/manual/en/function.file-get-contents.php)远程内容。但是，您将要做的更像是反向代理，而不是映射 php url。

另一方面，如果您想要的是当用户调用[http://webtemp.com](http://webtemp.com)显示从[http://webtemp.com/webtemp/View/Home.php](http://webtemp.com/webtemp/View/Home.php)生成的内容时，并且您使用的是 Apache，您可以使用访问。放在根目录上的 .htaccess 中：

```
RewriteEngine on
RewriteRule ^$ /webtemp/View/Home.php 
```

如果它不是你想要的，那我就迷路了。请说清楚。

# java - 宁静的网络服务....放置或发布以进行更新

> ID：12709999
> 
> 赞同：3
> 
> 时间：2012-10-03T13:52:35.330
> 
> 标签：java, web-services, rest, amazon-web-services, webservice-client

我有一个宁静的网络服务，我正在为此编写一个新的方法调用。新方法调用的目的是将一个人的状态撤消为“否”。

我必须在请求中发送的只是一个 Person_Id，其状态需要更改为“NO”。

我应该使用 PUT 还是 POST 来执行此操作？

如果我使用 put，我可以只发送 person_id 作为路径参数而不使用任何 xml。 `(like : http://serverName/PersonServices/Person/123456)`在服务层，我有这样的代码。

```
 @PUT
    @Path("/Person/{person_Id}")
    @Consumes("application/xml")
    @Produces("application/xml")
    public JAXBElement<GetUsageTokenType> updateLicenseStatus(
            @PathParam("person_Id") final Long personId) {

            //code to change the status
     } 
```

或者我应该使用 POST 来执行此操作...我是否正确地说如果我使用 POST，我需要发送 xml 格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:58:07.047

如果您查看[哪些 HTTP 方法与哪些 CRUD 方法匹配？](https://stackoverflow.com/questions/6203231/which-http-methods-match-up-to-which-crud-methods)那里显示了映射

```
Create = PUT with a new URI
         POST to a base URI returning a newly created URI  
Read   = GET  
Update = PUT with an existing URI  
Delete = DELETE 
```

如果您阅读每个动词定义的[HTTP RFC ，您就会明白为什么...](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

回应：

> 我可以将 person_id 作为路径参数发送而不使用任何 xml

那么理想情况下你的网址

> `http://serverName/PersonServices/Person/123456`

应该是

> `http://serverName/PersonServices/RevokePerson/123456`

*如果您不想传递任何 XML/JSON/等*，这将有助于可维护性，但是人类可读的 URL 是否是 RESTful 服务的一个特性是一个[llloooonnnggg-running 参数](http://ayende.com/blog/155009/rest-and-urls)

正如评论中提到的那样，RESTful API 应该关注内容而不是操作。请参阅：[为什么在 REST 实现中的 URI 中包含动作动词会违反协议？](https://stackoverflow.com/questions/2173721/why-does-including-an-action-verb-in-the-uri-in-a-rest-implementation-violate-th)例如。

因此，您将一个人传递给一个 URL，并根据 HTTP 动词采取相关的 CRUD 操作。如果您只想传递一个 ID，那么您将不得不猜测当您 PUT 到 ID 时要进行什么更新......除非您知道永远不会有任何其他更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:54:06.170

这取决于你如何实现你的服务器，但是遵循正确的 REST 原则，你会想要使用 PUT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:23:25.600

我建议您`POST`访问以下网址：

`http://serverName/PersonServices/Person/123456`

但是，您不应该 POST 一个空的正文，您的正文应该包含您想要更新的字段，采用标准的 POST 正文参数语法。

例如`status=NO`

对于单个（或多个）字段更新，我认为这是最好的方法。例如，如果您需要更新请求中的几个字段，您可以使用...

`firstName=Jesse&status=YES`

通过这种方式，URL 保持了它们对应于资源的事实（与包含`RevokePerson`或类似路径参数的操作相反）。这通过避免您想要执行的每个操作的一堆不同的 URL 端点，提供了最大的灵活性和最小的 API 污染。