# StackOverflow 问答 14307000-14307999

# ios - 制作类似于新的 Google Maps iOS 应用程序的上滑视图，多个 UIPanGestureRecognizer 的麻烦

> ID：14307000
> 
> 赞同：8
> 
> 时间：2013-01-13T18:59:04.290
> 
> 标签：ios, google-maps, uiscrollview, slideup, uipangesturerecognizer

我正在尝试重现新 iOS Google Maps 应用程序的上滑菜单的行为。

所以基本上这是一个视图，您可以向上滑动平移到某个点或向下滑动到某个点。这个视图也可以像分页滚动视图一样向右和向左滑动。

它应该上下滚动或滑动到一边，但不能同时滚动。

经过大量的研究和测试，我得到了一些接近但并不像需要它那样工作的东西。

我的实现是一个 UIScrollView，其框架为 320x400，内容视图为 960x400，分页滚动。然后我添加了一个处理整个视图向上滑动的 UIPanGestureRecognizer。

这是 PanRecognizer 的 handleTouch IBAction：

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)sender {
NSLog(@"Panning");
    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
        _firstX = [[sender view] center].x;
        _firstY = [[sender view] center].y;
    }
    if (!IS_IPHONE_5) {
        if (_firstY < 216)
            translatedPoint = CGPointMake(_firstX, 216);
        else
            translatedPoint = CGPointMake(_firstX, _firstY+translatedPoint.y);
    }
    else {
        if (_firstY < 307)
            translatedPoint = CGPointMake(_firstX, 307);
        else
            translatedPoint = CGPointMake(_firstX, _firstY+translatedPoint.y);
    }
    [[sender view] setCenter:translatedPoint];
    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {
        CGFloat velocityY = (0.2*[(UIPanGestureRecognizer*)sender velocityInView:self.view].y);

        CGFloat finalX = _firstX;
        CGFloat finalY = translatedPoint.y + velocityY;
        if(finalY < _firstY) {
            if (IS_IPHONE_5)
                finalY = 307;
            else
                finalY = 216;
        }
        else if(finalY > _firstY) {

            if (IS_IPHONE_5)
                finalY = 605;
            else
                finalY = 515;
        }

        CGFloat animationDuration = (ABS(velocityY)*.0002)+.2;
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:animationDuration];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDidStopSelector:@selector(animationDidFinish)];
        [[sender view] setCenter:CGPointMake(finalX, finalY)];
        [UIView commitAnimations];
    }} 
```

所以基本上如果平底锅向上滑动视图而不是向侧面滑动。这个handlePan 方法的问题是我不能让它工作，所以它不允许滚动到一个点以上。这是我想要做的：

```
if (_firstY < 216)
            translatedPoint = CGPointMake(_firstX, 216);
        else
            translatedPoint = CGPointMake(_firstX, _firstY+translatedPoint.y); 
```

最大的问题是 UIScrollView 平移手势识别器与我添加的平移手势识别器同时处理平移。这意味着如果我用手指向上滑动视图并同时将其移动到两侧，则 UIScrollView 会同时向上和向两侧滑动。

如果我尝试仅滑动到两侧并将视图向上移动 1 个像素，则会发生同样的情况，我的平移识别器结束并完全向上滑动视图。

我找到的解决方法是将我的平移识别器设置为要求 UIScrollview 平移识别器无法工作。

```
[_panGestureRecognizer requireGestureRecognizerToFail:    _slideUpScrollView.panGestureRecognizer]; 
```

所以现在当我滑动到两侧时它可以工作并且不会向上移动视图。问题的想法是，只有当您移开手指并且视图没有滚动到两侧时，它才会将自己设置为失败。发生的情况是，您无法再向上平移视图，但如果您在其中向上滑动，则会出现“UIGestureRecognizerStateEnded”，并且向上滑动视图。

我查看了 UIPanGestureRecognizer 主题并查看了一些选项，包括将我的平移识别器子类化以使其仅识别上滑的平移而不是侧面的平移。

你们我认为我使用了正确的策略还是应该换一种方式看待它？

理想的解决方案是，当录制到侧面的幻灯片时，它只会水平移动内容并由 UIScrollView 处理，而当录制水平平移时，它只会垂直平移并由我的 panreconizer 处理。Safari 的水平和垂直滚动行为相同。虽然我没有弄清楚如何实现它。

感谢阅读，让我知道你的想法。如果许多应用程序都有像 Google 地图这样的上滑菜单，那就太好了！

编辑：我的目标是 iOS 6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:44:56.700

好的，我想通了！

我使用了[UIPanGestureRecognizer 中的示例 - 只有垂直或水平](https://stackoverflow.com/questions/7100884/uipangesturerecognizer-only-vertical-or-horizontal)才能将我的平移限制为向上和向下垂直滚动，并在水平平移时将其设置为失败状态。

I also used : [Restricting UIPanGestureRecognizer movement](https://stackoverflow.com/questions/9169949/restricting-uipangesturerecognizer-movement) to block the view from panning to far up or down.

Finally I reversed the requiresToFail to :

```
[_slideUpScrollView.panGestureRecognizer requireGestureRecognizerToFail:_panGestureRecognizer]; 
```

And there it works!

Let me know if you have questions or have improvements to propose!

Thanks!

# php - PHP 无法在写入上下文中使用函数返回值是否有解决方法？

> ID：14307001
> 
> 赞同：1
> 
> 时间：2013-01-13T18:59:11.593
> 
> 标签：php

**我保留了我原来的问题，但想指出我的问题的假设是有缺陷的。阅读更新了解更多**

* * *

我惊讶地发现这在 PHP 中不起作用：

```
$someObjects = array();

function getInstance( $key )
{
    if ( ! $someObjects[$key] )
       $someObjects[$key] = new Object;

    return $someObjects[$key];
}

getInstance( 'mykey' )->property = 33; 
```

最后一行创建了一个致命错误：

```
PHP Fatal error:  Can't use function return value in write context 
```

这是我偶尔在 Actionscript 中使用的一种模式，当您需要显式定义一堆对象（例如在配置文件中）并且您想跳过实例化步骤但又不想处理一堆嵌套数组的混乱。

有什么建议么？

* * *

**更新**

这是阅读回复后的那些*无聊时刻之一。*我的问题错误地认为这`getInstance( 'mykey' )->property = 33`是致命错误的根本原因。

我的示例代码很草率，并且有两个大问题（糟糕）：

1.  没有`global`在函数体中声明
2.  错误地使用`! $array[$key]`而不是`empty($array[$key])`

这些问题也在我的项目代码中，但它们似乎不是致命错误的唯一原因，我已经更改了项目代码，现在我无法弄清楚其他因素是什么（？）。无论如何，我得到了理顺。

在下面的建议之后，这是我的目标语法：

```
class MetaInfo
{
    public $title;
    public $description;
}

/**
 * @param $key string
 * @return MetaInfo
 */
function getMeta( $key )
{
    global $meta;

    if ( empty($meta[$key]) )
        $meta[$key] = new MetaInfo;

    return $meta[$key];
}

getMeta( 'path/to/page' )->title = "Double-check your work before posting"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:11:27.237

这在 PHP [5.0.0](http://3v4l.org/N2jKA)中得到支持，虽然我不知道你是如何让它工作的。`$someObjects`不会在`getInstance()`. 这是我测试过的，它有效：

```
<?php
class Object
{
    public $property;
}

function getInstance( $key )
{
    static $someObjects;
    if ( ! $someObjects[$key] )
       $someObjects[$key] = new Object;

    return $someObjects[$key];
}

echo getInstance( 'mykey' )->property = 33;  // prints 33 as expected 
```

# javascript - 将元素放置在随机位置

> ID：14307012
> 
> 赞同：0
> 
> 时间：2013-01-13T19:00:52.670
> 
> 标签：javascript, html, canvas

我正在尝试使用此代码将元素放置在随机位置，但它只是将元素放置在容器元素的顶部。我究竟做错了什么？

```
 create: function(){

    console.log("cone created");

    var el =  document.createElement('div');
    el.classList.add('cone');

    this.container.appendChild(el);

    this.el = el;

    this.x = Math.random () * canvas.innerWidth + 'px';
    this.y = Math.random () * canvas.innerHeight + 'px';

    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:04:11.463

我假设“画布”不是真正的画布，它只是一个`<div>`.

在这种情况下，您需要做几件事：

*   确保您的容器有`position:relative`
*   确保您的容器的孩子有`position:absolute`
*   添加`el.style.left = this.x; el.style.top = this.y;`以实际定位元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:34:44.417

也许`div`使用内联 css 插入可以处理这个问题。

我写了一个示例：

```
$(document).ready(function() {
  var sqrPixel = 10;

  var posX = 30;
  var posY = 100;

  $('body').append('<div style="background: #ccc; box-shadow: 2px 2px 2px #000; position: absolute; width: ' + sqrPixel + 'px; height: ' + sqrPixel + 'px; left: ' + posX + '; top: ' + posY + ';"></div>');
}); 
```

我将正方形附加到`body`. 如果你想改变它。您可以设置`posX`和`posY`随机。

我知道它看起来有点乱，但至少它对我有用。

# in-app-purchase - Windows Phone 应用内产品购买的到期日期？

> ID：14307014
> 
> 赞同：4
> 
> 时间：2013-01-13T19:01:11.830
> 
> 标签：in-app-purchase, windows-phone-8

是否可以为 Windows Phone 8 应用创建应用内产品购买，该应用会在一段时间后自动过期？使用 Windows Phone 仪表板创建应用内产品时，似乎没有办法设置过期时间（例如 6 个月、15 天等），但另一方面，[ProductLicense 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.productlicense.aspx)包含[ExpirationDate](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.productlicense.expirationdate.aspx) -财产。

该属性只是 Windows 8 应用程序的剩余部分，还是有办法为 Windows Phone 8 应用程序内购买设置到期日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:18:29.670

WP8 不支持 ProductLicense.ExpirationDate。它用于 Win8 API 兼容性。

> **视窗电话 8**
> 
> 此 API 未实现，如果调用将引发异常。

见@http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/windows.applicationmodel.store.productlicense.expirationdate.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.applicationmodel.store.productlicense.expirationdate.aspx)

# c# - LINQ to Entities 无法识别该方法

> ID：14307017
> 
> 赞同：0
> 
> 时间：2013-01-13T19:01:34.350
> 
> 标签：c#, asp.net, linq

编译错误：

> LINQ to Entities 无法识别方法 '<> *f_AnonymousType1 `6[System.String,System.String,System.Collections.Generic.ICollection`1[WcfService1.titleauthor],System.String,System.String,System.DateTime] ElementAt[<>f* _AnonymousType1 `6](System.Linq.IQueryable`1[<>f__AnonymousType1 `6[System.String,System.String,System.Collections.Generic.ICollection`1[WcfService1.titleauthor], System.String,System.String,System.DateTime]], Int32)' 方法，并且此方法不能转换为存储表达式。

我的方法：

```
public PublicationDetail GetPublicationDetails(string PubID)
{
    PublicationDetail pub = null;
    PubsEntities db = new PubsEntities();

    // Get publication details
    var lookup = from entries in db.titles
                 where entries.title_id.Equals(PubID)
                 select new
                 {
                     PubID = entries.title_id,
                     Title = entries.title1,
                     AuthorsListId = entries.titleauthors,
                     Description = entries.notes,
                     Publisher = entries.pub_id,
                     PubDate = entries.pubdate
                 };

    // Get authors list
    var alookup = from authors in db.titleauthors
                  where authors.title_id.Equals(PubID)
                  select new { AuthorID = authors.au_id };

    // Get authors
    List<string> pub_atuhors = new List<string>();
    foreach (var auth in alookup)
    {
        // Get id
        var id = auth.AuthorID;

        var getAuthor = from authors in db.authors
                        where authors.au_id.Equals(id)
                        select new { Author = authors.au_fname + " " + authors.au_lname };

        pub_atuhors.Add(getAuthor.ElementAt(0).Author);
    }

    // Get publisher
    var lookupPublisher = from publishers in db.publishers
                          where publishers.pub_id.Equals(lookup.ElementAt(0).Publisher)
                          select new { PublisherName = publishers.pub_name };

    pub = new PublicationDetail
    {
        PubID = lookup.ElementAt(0).PubID,
        Title = lookup.ElementAt(0).Title,
        Description = lookup.ElementAt(0).Description,
        PubDate = lookup.ElementAt(0).PubDate,
        Publisher = lookupPublisher.ElementAt(0).PublisherName,
        Authors = pub_atuhors
    };

    return pub;
} 
```

错误显示在返回语句之前的最后一行 VS2012 突出显示该方法的以下部分：

```
pub = new PublicationDetail
{
    PubID = lookup.ElementAt(0).PubID,
    Title = lookup.ElementAt(0).Title,
    Description = lookup.ElementAt(0).Description,
    PubDate = lookup.ElementAt(0).PubDate,
    Publisher = lookupPublisher.ElementAt(0).PublisherName,
    Authors = pub_atuhors
}; // <- Error is shown here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:22:03.237

只需将您的变量存储`lookup.ElementAt(0).Publisher`在某个变量中并对其进行操作即可。

喜欢（不检查`null`）：

```
var publisher_id = lookup.First().Publisher;

var lookupPublisher = from publishers in db.publishers
                      where publishers.pub_id == publisher_id
                      select new { PublisherName = publishers.pub_name }; 
```

# windows - Windows 8 / Windows Store 应用程序可以在 Windows Mobile 上运行吗？

> ID：14307027
> 
> 赞同：0
> 
> 时间：2013-01-13T19:02:36.773
> 
> 标签：windows

我是 Windows 商店开发的新手。我有 1 个基本问题。我刚刚在 VS12-> Windows Store 中创建了一个普通的应用程序。我可以在移动设备和 Windows 平板电脑上运行该应用程序吗？我的意思是在 WINDOWS STORE 中开发的任何应用程序，我们可以在移动设备和平板电脑上运行该应用程序吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:48:29.230

不可以。您需要下载 Windows Phone 8 SDK 并创建您的应用程序的 Windows Phone 8 版本，然后将您的手机应用程序发布到应用商店。

如果您的应用程序相对简单，移植它应该不会花费太多时间，但您需要确保您的 UI 设计适合手机 UI 体验。

**[2016-05-03 更新]** 自从我最初回答这个问题以来，情况发生了很大变化。微软正在转向通用 Windows 平台 (UWP) 应用程序，该应用程序将在从手机到平板电脑、笔记本电脑/台式机到 HoloLens 和物联网的所有设备上运行！

欲了解更多信息，请从[这里](https://msdn.microsoft.com/en-us/windows/uwp/get-started/whats-a-uwp?f=255&MSPPError=-2147217396)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:42:26.600

如果你想开发一个针对 Windows Phone 平台的软件，你必须 1：下载 Windows phone SDK（[http://www.microsoft.com/en-us/download/details.aspx?id=35471](http://www.microsoft.com/en-us/download/details.aspx?id=35471)：你下载了帮助您下载 1.6 Go 文件的微型下载器！） 2：您在 VS 2012 中创建了一个仅在 Windows 8 上使用新安装的 Windows Phone 模板的项目。

# .net - Nuget 缺少 Moq .NET 4.5

> ID：14307028
> 
> 赞同：0
> 
> 时间：2013-01-13T19:02:40.240
> 
> 标签：.net, moq, nuget

我正在编写一个 Windows 商店应用程序，但无法包含 Moq Nuget 包，因为它不针对 .NET 4.5。我似乎无法找到更新的源代码来自己构建 Moq 包并以 .NET 4.5 为目标 有没有其他人在“单元测试库（Windows 商店应用程序）中包括 Moq 在内取得了成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:18:51.347

.NET for Windows Store 应用程序缺少用于动态生成程序集的[`System.Reflection.Emit`](http://msdn.microsoft.com/en-au/library/system.reflection.emit.aspx)命名空间，这意味着 Moq 基础的 Castle DynamicProxy 在这些应用程序中不起作用。

但是，Castle DynamicProxy 允许您保存生成的动态程序集，因此您应该能够预先生成它们然后使用它们，有一个具有此功能的 Moq 的[实验性分支](https://github.com/mbrit/moqrt)可能有用。

# algorithm - 算法设计手册的这一部分是怎么说的？我很困惑

> ID：14307029
> 
> 赞同：1
> 
> 时间：2013-01-13T19:02:45.897
> 
> 标签：algorithm, linked-list, complexity-theory, time-complexity

这是在谈论使用链接列表实现字典时来自算法设计手册。

![在此处输入图像描述](../Images/ea28ec65a86e9c235d32dda22d07502f.png)

一方面，部分内容是“在插入时检查是否`last->next`仍然等于 NULL”。为什么我们必须检查它？如果我要插入一个元素，这将如何影响最后一项是否正确指向 NULL？如果我们正在正确地执行我们的实现，不是吗？我们不能说类似的话：

```
last->next = nodeToInsert;
last = last->next; 
```

为什么那行不通？

其次，倒数第二段是否在讨论我们删除单链表中的最后一项并且必须识别新的最后一项的情况？并且我们只是（具有 O(n) 复杂性）遍历到倒数第二个项目并将其设置为最后一个并删除前一个？我们将它与预先存在的删除方法混合在一起，只是添加一个案例来判断它是否是最后一项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:05:59.433

> 为什么我们要检查呢？

因为大概你并不总是在列表的末尾插入，所以`last`并不总是需要更新。

> 第二， ...

是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:14:19.267

请注意，本节讨论的是作为*排序*列表实现的字典。

这意味着插入需要恰好在正确的点发生。您建议的代码添加到列表的末尾：

```
last->next = nodeToInsert;
last = last->next; 
```

这对于未排序的列表是正确的，但对于已排序的列表则不正确。

另请注意，作者使用 last 作为普通链表的附加指针。

我认为您认为 last 是双向链表结构的一部分。如果是这样，那么您应该在插入期间对其进行更新是正确的。但是，由于它是一个独立的指针，需要文中描述的附加代码使其与链表保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T20:04:10.387

```
if(last->next != NULL) {   // insertion occurred at the tail end
    last = nodeToInsert;   // so update tail pointer to point to inserted node
} 
```

尾端插入已经设置`last->next`。不再`NULL`是因为插入。这就是告诉我们`last`需要更新的内容（`last`实际上是现在`lastButOne`）。如果`last->next`仍然`NULL`如此，那么我们不需要做任何事情，因为插入发生在之前的某个地方`last`。你的书的措辞也许有点误导。现在这有意义吗？

# javascript - 让 RequireJS 与 .tpl 一起工作

> ID：14307032
> 
> 赞同：0
> 
> 时间：2013-01-13T19:03:04.033
> 
> 标签：javascript, requirejs

我对 RequireJS 比较陌生，我遇到的问题可能是一个简单的解决方法 - 在大多数情况下，我正在加载 .js 文件，但我的一个文件加载了扩展名为 .tpl 的模板，我不希望它这样做自动附加 .js （并最终尝试加载`mytemplate.tpl.js`）。

有没有一种简单的方法来告诉 RequireJS（仅在一个文件中）不要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:10:25.190

你可以使用`noext`requirejs 插件。

你可以在这里找到它：[https ://github.com/millermedeiros/requirejs-plugins](https://github.com/millermedeiros/requirejs-plugins)

```
require.config({
    paths : {
        //create alias to plugins (not needed if plugins are on the baseUrl)
        noext: 'lib/requirejs-plugins/noext',
    }
});

require([
    noext!pathto/mytemplate.tpl
], ...) 
```

# ruby - update(other_hash) 和 merge(other_hash) 的区别

> ID：14307034
> 
> 赞同：14
> 
> 时间：2013-01-13T19:03:33.073
> 
> 标签：ruby

***更新代码：***

```
irb(main):001:0> h1 = { "a" => 100, "b" => 200 }
=> {"a"=>100, "b"=>200}
irb(main):002:0> h2 = { "b" => 254, "c" => 300 }
=> {"b"=>254, "c"=>300}
irb(main):003:0> h1.update(h2)
=> {"a"=>100, "b"=>254, "c"=>300} 
```

**合并代码：**

```
irb(main):001:0> h1 = { "a" => 100, "b" => 200 }
=> {"a"=>100, "b"=>200}
irb(main):002:0> h2 = { "b" => 254, "c" => 300 }
=> {"b"=>254, "c"=>300}
irb(main):003:0> h1.merge(h2)
=> {"a"=>100, "b"=>254, "c"=>300}
irb(main):004:0> 
```

`merge`我在相同的情况下运行了上述`update`方法`hash`。但是得到了相同的输出。所以我的问题是：是否使用相同`update`的`merge`逻辑？如果不一样，那么输出如何相同？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-13T19:08:33.113

> 是否使用相同`update`的`merge`逻辑？

不，它们不一样。[`update`是 的别名`merge!`](https://ruby-doc.org/core/Hash.html#method-i-update)，它是 的就地变体`merge`。

> 如果不一样，那么输出如何相同？

因为在这两种情况下，您都在使用调用的返回值，但是，`h1`每种情况下的值都不同：

```
h1 = { "a" => 100, "b" => 200 }
h2 = { "b" => 254, "c" => 300 }
h1.update(h2)
h1  #=> { "a" => 100, "b" => 254, "c" => 300 }

h1 = { "a" => 100, "b" => 200 }
h2 = { "b" => 254, "c" => 300 }
h1.merge(h2)
h1  #=> { "a" => 100, "b" => 200 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T19:06:20.057

`Hash#update`是`Hash#merge!` [http://ruby-doc.org/core-1.9.3/Hash.html#method-i-update的别名](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-update)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T19:09:43.447

Hash#update 是 Hash#merge 的别名！

Hash#merge 和 Hash#update 之间的区别在于 Hash#update**就地**更新键/值，而 Hash#merge**返回**更新后的哈希而不触及调用实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-29T17:35:34.940

h1.update(h2) - 更新 h1 实例 - 返回更新后的 h1；h1.merge(h2) - 离开 h1 并创建更新的副本 - 返回 h1 的更新副本（我可以称之为 h3）

# ios - 方向更改后 UITableView 布局中的错误

> ID：14307037
> 
> 赞同：18
> 
> 时间：2013-01-13T19:03:59.453
> 
> 标签：ios, objective-c, xcode, uitableview, autolayout

我有一个基于自动布局（约束）的应用程序，并注意到在方向更改后 tableview 存在问题。重现步骤如下（我有一个非常基本的重现应用程序 - 带有一个表格视图和一个添加新项目的添加按钮）。

1.  将您的应用程序旋转到横向模式，以便 tableview 现在是横向的。
2.  向 tableview 添加项目见下面的[1](https://i.stack.imgur.com/fo4P3.png)
3.  旋转回纵向，tableview 现在将浮动在水平平移上（好像滚动查看器内容大小是横向的），请参阅 [2]

[1](https://i.stack.imgur.com/fo4P3.png)代码添加

```
- (IBAction)onAdd:(id)sender {
    count ++;
    [self.tableView insertRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:count-1 inSection:0]] withRowAnimation:UITableViewRowAnimationBottom];
} 
```

[2] 浮动表格视图

![在此处输入图像描述](../Images/d141397148841137ae1b5521b3bfc8ba.png)

关于如何解决这个问题的任何想法？另外，我如何判断这是已知问题还是我应该向 Apple 报告的问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-20T20:38:43.610

我认为这是一个错误；如果您将项目从自动布局转换并设置适当的调整大小蒙版，一切正常。您应该提交一个错误，特别是因为您有一个可以很好地重现它的简单示例项目。

正如您所怀疑的那样，在您的情况下发生的事情 - 滚动视图的内容视图保持在横向宽度，即使视图本身已调整为纵向，所以您突然获得了水平拖动的能力。

幸运的是，有相当简单的解决方法。我尝试了各种组合`setNeedsLayout`或`setNeedsUpdateConstraints`没有成功，但您可以实现以下两种解决方案之一：

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [self.tableView beginUpdates];
    [self.tableView endUpdates];
} 
```

或者，

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    CGSize contentSize = self.tableView.contentSize;
    contentSize.width = self.tableView.bounds.size.width;
    self.tableView.contentSize = contentSize;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-15T22:33:38.077

我发现上面的答案大部分时间都有效，但并非所有时间都有效。最强大的解决方案是继承 UITableView 并在 layoutSubviews 中设置 contentSize：

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    CGSize contentSize = self.contentSize;
    contentSize.width  = self.bounds.size.width;
    self.contentSize   = contentSize;
} 
```

# c++ - Eclipse + wxWidgets + Boost -- 不显示异常

> ID：14307038
> 
> 赞同：1
> 
> 时间：2013-01-13T19:04:03.277
> 
> 标签：c++, mingw, wxwidgets, eclipse-cdt, boost-serialization

我一直在 Windows 7 x64 下编写一个简单的 GUI 地址簿程序，使用 wxWidgets2.8.12 和 boost::serialization 以及 mingw4.6 和 Eclipse CDT Juno。

在使用 boost::archive::text_iarchive 和 text_oarchive 对文件中的条目进行序列化的功能时，我发现该程序将在启动时停止工作。它会简单地启动然后立即终止。g++ 编译得很好，没有任何东西写入标准输出或标准错误。在使用 gdb 进一步调查该问题后，我发现 boost 库确实引发了异常。

这本身不是问题。问题是这个异常从未显示在任何 Eclipse 的控制台中，所以我什至不知道它存在，直到单步执行整个应用程序。异常本身很容易解决，但由于缺乏输出而被证明是非常有问题的。在调试和发布配置中构建和运行应用程序时没有显示任何内容。

我的问题本质上是这样的：为什么这些库异常没有被输出，我需要做些什么来确保它们的正确显示？经过一段时间的搜索，我还没有找到任何有用的东西，当然，我们将不胜感激。提前感谢任何能够提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:36:05.047

好吧，您可以做一件事，尽管它需要在顶层使用 catch 块或使用`set_unexpected()`类似于以下内容。

```
#include <boost/exception/diagnostic_information.hpp>

...

catch(...)
{
    std::cerr << "Unhandled exception!" << std::endl <<
    boost::current_exception_diagnostic_information();
    return 1; //or whatever...
} 
```

您当然可以在激烈之前过滤掉 boost/std 异常，`catch(...)`但您明白了。

编辑：

您可能看不到异常的另一个原因是，如果在堆栈展开期间（出于某种原因）调用它 - 然后它会调用`terminate`并停止死......

# python - 漂亮的汤检查标签中的标签

> ID：14307042
> 
> 赞同：1
> 
> 时间：2013-01-13T19:04:31.513
> 
> 标签：python, python-3.x, screen-scraping, beautifulsoup, scraper

我正在使用 Beautiful Soup 4 来刮一页。有一段我不想要的文字：

```
<p class="MsoNormal" style="text-align: center"><b>
                            <span lang="EN-US" style="font-family: Arial; color: blue">
                            <font size="4">1 </font></span>
                            <span lang="AR-SA" dir="RTL" style="font-family: Arial; color: blue">
                            <font size="4">&#1600;</font></span><span lang="EN-US" style="font-family: Arial; color: blue"><font size="4"> 
                            с&#1199;р&#1241; фати&#1211;&#1241;</font></span></b></p> 
```

它的独特之处在于它有一个标签。我已经使用 findall() 来获取所有

标签。所以现在我有一个 for 循环，如：

```
for el in doc.findall('p'):
    if el.hasChildTag('b'):
        break; 
```

不幸的是 bs4 没有“hasChildTag”功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T19:17:51.020

也应该可以使用 css 选择器。

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)

```
soup.select("p b") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T19:16:29.933

```
for elem in soup.findAll('p'):
    if elem.findChildren('b'):
        continue #skip the elem with "b", and continue with the loop
    #do stuff with the elem 
```

# mysql - SQL查询 - 如何获取数据作为表中数据不存在的一些值（商品和服务）

> ID：14307043
> 
> 赞同：0
> 
> 时间：2013-01-13T19:04:32.667
> 
> 标签：mysql, sql, sum, percentage

我有表 T1：

```
NAME        GOODS1    .GOODS2  SERVICES
TELENOR       100        0      0
VIP           100       200     350
T-MOBILE      100       100     50 
```

我必须只在两列中得到结果：

```
GOODS      60
SERVICES   40 
```

所以结果是：在第一列中始终作为 GOODS 和 SERVICES 的值（如何将它们作为数据？）在第二列中计算总和的百分比：

```
where SUM(GOODS)=SUM(GOODS1+GOODS2) 
```

和

```
sum(SERVICES)=sum(SERVICES) 
```

所以总金额是`1000`。
货是`600(100+100+200+100+100)`。（所以它是 1000 的 60%）
服务是`350+50=400`- 所以它是 1000 的 40%。

另外如何进行此计算？
非常感谢你！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:14:56.033

```
SELECT 
  'GOODS' AS Name, 
  (SUM(Goods1) + SUM(Goods2)) / (SUM(Goods1) + SUM(Goods2) + SUM(Services)) * 100 AS Total
FROM T1
UNION ALL
SELECT 
  'SERVICES' AS Name, 
  SUM(Services) / (SUM(Goods1) + SUM(Goods2) + SUM(Services)) * 100 AS Total
FROM T1 
```

这会给你：

```
NAME        TOTAL
GOODS       60
SERVICES    40 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:09:38.847

您是否期望总产量为 1000，商品总数为 600，服务总数为 400。

如果是这样，试试这个：

```
SELECT 
  SUM(Goods1) + SUM(Goods2) + SUM(Services) as OverallTotal,
  SUM(Goods1) + SUM(Goods2) as GoodsTotal,
  SUM(Services) as ServicesTotal
FROM T1 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!2/311904/2)。

-编辑

如果您正在考虑将它们作为 2 个不同的行，您可以尝试`UNION`：

```
SELECT 100*GoodsTotal/OverallTotal
FROM (
SELECT 
  SUM(Goods1) + SUM(Goods2) + SUM(Services) as OverallTotal,
  SUM(Goods1) + SUM(Goods2) as GoodsTotal,
  SUM(Services) as ServicesTotal
FROM T1) AS T
UNION
SELECT 100*ServicesTotal/OverallTotal 
FROM (
SELECT 
  SUM(Goods1) + SUM(Goods2) + SUM(Services) as OverallTotal,
  SUM(Goods1) + SUM(Goods2) as GoodsTotal,
  SUM(Services) as ServicesTotal
FROM T1) AS T 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!2/311904/22)。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T19:12:20.860

```
SELECT
    ((TotalGoods * 100)/ Total) as TotalPercentGoods,
    ((TotalServices * 100) / Total) as TotalPercentServices
FROM 
(
    SELECT 
        SUM(Goods1)+SUM(Goods2)+SUM(SERVICES) as Total,
        SUM(Goods1)+SUM(Goods2) as TotalGoods,
        SUM(Services) as TotalServices
    FROM T1 
) as l 
```

[演示](http://sqlfiddle.com/#!2/311904/26)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:34:45.690

这是一种不同的方法：

```
select c.which,
       sum(case when which = 'GOODS' then Goods1 + GOod2
                else Services
           end) / sum(Goods1+Goods2+Services)*100
from table 1 cross join
     (select 'GOODS' as which union all select 'SERVICES' end) c 
```

这应该只需要扫描表一次。

# java - 布局问题上的光标适配器

> ID：14307044
> 
> 赞同：0
> 
> 时间：2013-01-13T19:04:34.290
> 
> 标签：java, android

希望这是一个简单的！

谁能告诉我为什么我的布局显示在我的列表视图中，而不是我实际返回的数据中？

例如，如果我的数据库中有 2 个名为“John”的名称，我从“EditText”发送名称“John”来查询数据库，则会生成正确数量的 listview 单元格，但它会再次显示布局两次而不是返回的详细信息！

列表视图中重复的编辑文本和按钮的输出问题：

我的数据库中有一个叫“Dave”的人，所以它在列表视图中显示了正确的结果编号，即“1”，但问题是它应该显示他们的姓名、联系电话、电子邮件和评论，而不是再次布局！

![一世](../Images/fce976f07f9647e359fbe981947575d7.png)

搜索 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/inputSearchName"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/txtsearch"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Type Name To Search:"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/inputName"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/btnSearchName"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Search" />

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

搜索代码：

```
 search.open();
Cursor cursor = search.searchOnName(searchedName);

startManagingCursor(cursor);

@SuppressWarnings("static-access")
String [] from = new String [] {DBsearchRef.KEY_NAME, DBsearchRef.KEY_TEL, DBsearchRef.KEY_EMAIL, DBsearchRef.KEY_COMMENTS};
int [] to = new int [] {R.id.txtNameList, R.id.txtTelList, R.id.txtEmailList, R.id.txtCommentsList};

@SuppressWarnings("deprecation")

SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.search, cursor, from, to);
searchedListResults.setAdapter(cursorAdapter); 
```

问题是我的“搜索”类布局显示在列表视图中......但由于列表视图是此类的一部分，我认为这将是正确的参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:58:29.767

> 谁能告诉我为什么我的布局显示在我的列表视图中，而不是我实际返回的数据中？

您传递给适配器的 XML 布局，此处：

```
SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.search, cursor, from, to); 
```

是将在每一行中使用的布局。显然您不想使用`search.xml`，只需更改`R.layout.search`为您要使用的布局即可。

* * *

**加法**
试试这个代码，它可能会帮助你理解差异：

```
@SuppressWarnings("deprecation")
SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, 
        android.R.layout.simple_list_item_1, 
        cursor, 
        new String[] {DBsearchRef.KEY_NAME}, 
        new int[] {android.R.id.text1});
searchedListResults.setAdapter(cursorAdapter); 
```

# matlab - 错误：尝试将 SCRIPT 作为函数执行

> ID：14307050
> 
> 赞同：0
> 
> 时间：2013-01-13T19:05:15.000
> 
> 标签：matlab, matlab-deployment

我是 MATLAB 新手，我正在尝试运行[Matlab 帮助](http://www.mathworks.com/help/stats/kmeans.html)中给出的确切代码：[使用 Kmeans 进行基于颜色的分割](http://www.mathworks.com/help/images/examples/color-based-segmentation-using-k-means-clustering.html)。

我需要使用`Kmeans`我的图像，但我不断收到此错误：

> 错误：尝试将 SCRIPT kmeans 作为函数执行

我试图运行的代码是：

```
[cluster_idx cluster_center] = kmeans(ab,nColors,'distance','sqEuclidean','Replicates',5);' 
```

# java - Spring 配置问题 - 无法加载应用程序类

> ID：14307051
> 
> 赞同：0
> 
> 时间：2013-01-13T19:05:15.750
> 
> 标签：java, spring, tomcat, vaadin, web.xml

好吧，我正在尝试将Spring依赖注入添加到我的项目中，自从我将Spring集成所需的所有东西都添加到我的项目中后，Web项目无法部署...为什么我认为它与我的Spring配置有关? 在添加任何 Spring 配置之前，Vaadin gui、servlet 已完美部署，jersey rest web 服务也是如此......

现在我在尝试运行它时遇到了这个错误：

```
 INFO: Initializing Spring root WebApplicationContext
2013-01-13 20:46:27,984 [localhost-startStop-1] INFO  org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
2013-01-13 20:46:28,140 [localhost-startStop-1] INFO  org.springframework.context.support.AbstractApplicationContext - Refreshing Root WebApplicationContext: startup date [Sun Jan 13 20:46:28 EET 2013]; root of context hierarchy
2013-01-13 20:46:28,247 [localhost-startStop-1] INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [com/nortal/pirs/spring/application-context.xml]
2013-01-13 20:46:28,750 [localhost-startStop-1] INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@275d728c: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.config.internalBeanConfigurerAspect,org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor#0,org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
2013-01-13 20:46:28,850 [localhost-startStop-1] INFO  org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 861 ms
Sau 13, 2013 8:46:28 PM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  com.nortal.pirs.webservices
Sau 13, 2013 8:46:29 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.15 10/30/2012 03:41 PM'
Sau 13, 2013 8:46:29 PM com.sun.jersey.server.impl.application.RootResourceUriRules <init>
SEVERE: The ResourceConfig instance does not contain any root resource classes.
Sau 13, 2013 8:46:29 PM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.
    at com.sun.jersey.server.impl.application.RootResourceUriRules.<init>(RootResourceUriRules.java:99)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1300)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:163)
    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:769)
    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:765)
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:765)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:760)
    at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:489)
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:319)
    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Sau 13, 2013 8:46:29 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /PIRS_Fix threw load() exception
com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.
    at com.sun.jersey.server.impl.application.RootResourceUriRules.<init>(RootResourceUriRules.java:99)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1300)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:163)
    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:769)
    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:765)
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:765)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:760)
    at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:489)
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:319)
    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Sau 13, 2013 8:46:29 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Sau 13, 2013 8:46:29 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Sau 13, 2013 8:46:29 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 7132 ms
Sau 13, 2013 8:46:31 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet PirsVaadinFrontend
javax.servlet.ServletException: Failed to load application class: com.nortal.pirs.presentation.vaadin.PirsVaadinController
    at com.vaadin.terminal.gwt.server.ApplicationServlet.init(ApplicationServlet.java:71)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我尝试删除 jersey web service servlet 部分，但它仍然无法加载 vaadin 前端 servlet，如果您需要没有 jersey 的错误，我可以发布它，但我认为没有必要。

我的 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <display-name>PIRS_Web</display-name>

    <!-- Vaadin -->

    <context-param>
        <description>Vaadin production mode</description>
        <param-name>productionMode</param-name>
        <param-value>true</param-value>
    </context-param>

    <servlet>
        <servlet-name>PirsVaadinFrontend</servlet-name>
        <servlet-class>
            com.vaadin.terminal.gwt.server.ApplicationServlet
        </servlet-class>
        <init-param>
            <description>Vaadin application class to start</description>
            <param-name>application</param-name>
            <param-value>
                com.nortal.pirs.presentation.vaadin.PirsVaadinController
            </param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>PirsVaadinFrontend</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <!-- Spring -->

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:com\nortal\pirs\spring\application-context.xml</param-value>
    </context-param>

    <!-- EmailCheck REST web service -->
    <servlet>
        <servlet-name>emailCheckService</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>

        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.nortal.pirs.webservices</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>emailCheckService</servlet-name>
        <url-pattern>/webservices/*</url-pattern>

    </servlet-mapping>

    <!-- General parameters -->
    <!-- <session-config> <session-timeout>240</session-timeout> </session-config> -->

</web-app> 
```

我的 Spring application-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:annotation-config/>

    <!-- Turn on AspectJ @Configurable support -->
    <context:spring-configured />

    <context:component-scan base-package="com.nortal.pirs.test.independent"></context:component-scan>
    <context:component-scan base-package="com.nortal.pirs.businesslogic.logic"></context:component-scan>

    <!-- Turn on @Autowired, @PostConstruct etc support -->
    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor" />
    <bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" />

</beans> 
```

如果我删除 Jersey 部分，我会得到：

```
 2013-01-13 20:35:23,630 [localhost-startStop-1] INFO  org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 741 ms
Sau 13, 2013 8:35:23 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Sau 13, 2013 8:35:23 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Sau 13, 2013 8:35:23 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 6144 ms
Sau 13, 2013 8:35:25 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet PirsVaadinFrontend
javax.servlet.ServletException: Failed to load application class: com.nortal.pirs.presentation.vaadin.PirsVaadinController
    at com.vaadin.terminal.gwt.server.ApplicationServlet.init(ApplicationServlet.java:71)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

网络服务类如下所示：

```
 package com.nortal.pirs.webservices;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Service;

import com.nortal.pirs.businesslogic.factories.ControllerFactoryProvider;
import com.nortal.pirs.businesslogic.interfaces.UserManagerInterface;

@Path("/emailcheck/{emailAddress}")
public class EmailCheckService {

    //@Autowired
    //@Qualifier("UserManager")
    private UserManagerInterface userManager = ControllerFactoryProvider.getInstance().createUserManager();

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public String emailExists(@PathParam("emailAddress") String email) {
        if (userManager.emailExists(email)) {
            return "true";
        } else {
            return "false";
    }
    }

    public void setUserManager(UserManagerInterface userManager) {
        this.userManager = userManager;
    }
} 
```

有人遇到过这种问题吗？我认为这是因为我在配置中添加了 spring，但是即使我删除它似乎也不起作用，实际上 web.xml 中的任何内容现在似乎都不起作用......也许是 Tomcat 的问题？我正在使用在 Eclipse 中配置的 Tomcat 7。我尝试清洁它，但它似乎也没有帮助。我真的很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:46:49.730

Jersey 找不到任何可以作为 Jersey RESTful Web 服务执行的类。

查看：

*   您的 -是否`com.sun.jersey.config.property.packages`缺少`web.xml`- 似乎没问题。
*   param 的值`com.sun.jersey.config.property.packages`是丢失还是无效 - 我无法判断。
*   是否至少有一个 POJO 有一个带有注释的方法`@Path`- 我不知道。
*   如果这个例外的[许多谷歌点击](https://www.google.ch/search?q=com.sun.jersey.api.container.containerexception%3a%20The%20ResourceConfig%20instance%20does%20not%20contain%20any%20root%20resource%20classes.&ie=utf-8&oe=utf-8)可以帮助你进一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:09:58.743

您能否验证您的`Resource`类是否位于`com.nortal.pirs.webservices`web.xml 中定义的这个包 ( ) 中？您的服务器日志表明找不到资源类。假设该包是否包含`Resource`类，服务器日志将显示类列表。我有一个项目同时使用 Spring 和 Jersey 没有问题。

也许，您可能想在 web.xml 中禁用`servlet`和`servlet-mapping`for`PirsVaadinFrontend`并首先调试 Jersey 错误。您在这里有 2 个不同的错误，我不能确定是一个问题导致了另一个问题，还是您有 2 个独立的问题。

# database - 在数据库或系统文件中存储站点联系人和有关信息？

> ID：14307053
> 
> 赞同：0
> 
> 时间：2013-01-13T19:05:43.753
> 
> 标签：database, file-io, database-design, storage

我正在尝试创建一个网站，其中所有者有一个 CMS 页面，他可以在其中插入/编辑他的联系信息和关于信息。

当我想到它时，我发现我将创建一个名为的表，它`info`只有一行，包含`tel`、`facebook`和列。`twitter``E-mail`

将单行仅存储在数据库中是个好主意，还是应该将其存储在系统文件或其他东西中？

我真的需要这方面的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:35:23.787

我有几个建议给你。

首先，我强烈建议在您的代码中创建一个代表您的“数据库”的接口。这样做的好处是您可以随时更改后端的存储。您可能会开始将这些数据存储在文件系统上，然后更改为数据库。无论哪种方式，您的代码都会指向 IRepository 之类的东西。

你会有这样的事情：

公共类 FileRepository : IRepository { } 公共类 MySQLRepository : IRepository { }

这将帮助您保持代码不变，同时让您可以灵活地更改持久化数据的方式。

其次，我会更具描述性地命名您的表格。这是用户信息吗？用户设置？花时间选择一个描述性的名称将对您将来有所帮助。

第三……这可能使这比实际情况更重要，但请考虑您是否想要关系数据库或文档数据库。使用文档数据库，您可以将“用户信息”信息存储在一个文档中。这使得在代码中序列化/反序列化您的对象变得非常容易，而无需进行连接等。例如：

```
 {
   "id" : 123,
   "tel" : "555-1212",
   "facebook" : "bobby123",
   "twitter" : "bobby_is_cool",
   "email" : [ "bobby@yahoo.com", "bobby@gmail.com" ]
} 
```

 `两者都有优点和缺点。如果您想使用关系数据库（SQL Server、MySQL、Oracle），那么只为您认为不会随时间发生太大变化的事物创建字段。如果您想存储设置/用户首选项，有比仅添加字段更好的选项。

希望这是有道理的。`

# jquery - Rails 3.1 应用程序中的 Coffeescript 每次在页面加载时执行

> ID：14307054
> 
> 赞同：0
> 
> 时间：2013-01-13T19:05:46.763
> 
> 标签：jquery, ruby-on-rails, coffeescript

我的咖啡脚本有问题，我正在尝试在 ajax 调用完成后刷新大量值（使用“best_in_place”），并以最整洁的方式执行此操作，我将所有代码放在一个函数中作为回调的一部分被调用。

但是，rails 似乎希望在页面加载时调用此函数，而不是每次都作为回调，这是为什么呢？

```
 jQuery ->
  $('.best_in_place').best_in_place().bind("ajax:success", Statement.update_transactions())

Statement =  
  update_transactions : () ->
    alert('running update');
    $('.category_field').each( ->
      transaction_id = $(this).attr('data-transaction-id')
      $(this).find('.loading-transaction').show();
      $(this).find('.category-detail').hide();
      $(this).load('/transaction/update_category/'+transaction_id, ->
        $(this).find('.loading-transaction').hide();
      );
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:23:54.820

从 Statement.update_transactions() 中删除括号

它们导致立即调用该方法。所以只需使用：

```
$('.best_in_place').best_in_place().bind("ajax:success", Statement.update_transactions) 
```

# .net - 如何使用 LINQ 获得总和

> ID：14307055
> 
> 赞同：-2
> 
> 时间：2013-01-13T19:05:56.287
> 
> 标签：.net, linq

这是我得到的一张桌子：

```
ID  Name        Tid Quality     Quantity

40  903.02481-A.GEO 6   St3s        2   
41  903.02481-A.GEO 6   St3s        1   
42  903.02509-A.GEO 6   ST3S        1   
43  903.02942-A.GEO 6   ST3S        2   
44  903.02942-A.GEO 6   ST3S        4   
45  923.00186-B.GEO 6   ST3S        3   
46  924.03020-B.GEO 6   ST3S        1   
47  924.03021-A.GEO 6   ST3S        1   
48  924.03021-A.GEO 6   ST3S        1   
49  924.04082-C.GEO 6   ST3S        1 
```

我需要的是：

```
40  903.02481-A.GEO 6   St3s        **3**   
42  903.02509-A.GEO 6   ST3S        1   
43  903.02942-A.GEO 6   ST3S        **6**   
45  923.00186-B.GEO 6   ST3S        3   
46  924.03020-B.GEO 6   ST3S        1   
47  924.03021-A.GEO 6   ST3S        **2**   
49  924.04082-C.GEO 6   ST3S        1 
```

如何编写 LINQ 查询来得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:12:18.973

我假设您想要具有相同的`SUM`组：`Quantity``Name`

```
var result = list
     .GroupBy(x => x.Name)
     .Select(g => new {
        ID = g.First().ID,
        Name = g.Key,
        Tid = g.First().Tid,
        Quality = g.First().Quality,    
        Quantity = g.SUm(x => x.Quantity))
     }); 
```

# perl - DBI：quote_identifier 和列

> ID：14307060
> 
> 赞同：3
> 
> 时间：2013-01-13T19:06:34.040
> 
> 标签：perl, dbi

在[DBI/quote_identifier](http://search.cpan.org/~timb/DBI-1.623/DBI.pm#quote_identifier)文档中有两种语法：

```
$sql = $dbh->quote_identifier( $name );
$sql = $dbh->quote_identifier( $catalog, $schema, $table, \%attr ); 
```

这些示例是关于表名的。

`quote_identifier`如果有人像这样引用列，是否有什么要反对的：

```
$sql = $dbh->quote_identifier( undef, $table, $column ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:38:04.233

是的，这很好。`quote_identifier`不能也不会尝试区分表名和列名，而且我知道的每个数据库都有相同的语法。唯一的问题是当你想要像这样的列名时`schema.table.column`，你必须通过多次调用来构建自己`quote_identifier`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T19:39:39.713

没有什么特别的。就试一试吧。这是一个示例： [https ://metacpan.org/source/BEROV/DBIx-Simple-Class-0.991/lib/DBIx/Simple/Class.pm#L305](https://metacpan.org/source/BEROV/DBIx-Simple-Class-0.991/lib/DBIx/Simple/Class.pm#L305)

# process - 简单的vbs进程查询

> ID：14307061
> 
> 赞同：2
> 
> 时间：2013-01-13T19:06:36.053
> 
> 标签：process, vbscript, kill-process

我是 vbs 的新手，但已经用 c、c++ n java 进行过编程。我尝试通过互联网搜索，但我仍然找不到我错在哪里。我正在编写一个脚本来杀死一个名为 rundll 的进程，如果它超过 20% 的 cpu 使用率。

```
Option Explicit
DIM MyPID(5), objProcess, objItems, objitem
DIM XX, I
XX = -1
dim objService
set objService = getobject("winmgmts:")
dim Process
for each Process in objService.InstancesOf("Win32_process")
if Process.Name = "rundll32.exe" Then XX = XX + 1
if Process.Name = "rundll32.exe" Then MyPID(XX) = Process.processid
Next

For I = 0 To 5
Set objProcess = GetObject("winmgmts:{impersonationLevel=impersonate}//localhost")
Set objItems = objProcess.ExecQuery("Select PercentProcessorTime from Win32_PerfFormattedData_PerfProc_Process where IDProcess=" &MyPID(I)& "")
if (IsNull(objItems)) Then
    Wscript.Echo "No process found"
    Exit For
End if
for each objItem in objItems
    if objItems = Null Then
    Wscript.Echo "No process found"
    elseif objItem>20 Then Wscript.Echo "Criminal process found :" & MyPID(I) & " = " & objItem.PercentProcessorTime
    End if
NEXT

NEXT 
```

如果脚本没有找到进程，它应该打印没有找到进程，而不是我现在得到的复杂的空警报

任何帮助将不胜感激，所以建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:30:05.703

不要枚举`PercentProcessorTime`特定的 PID，而是尝试枚举超过阈值的进程，并在它们的名称与条件匹配时终止它们：

```
Set wmi = GetObject("winmgmts://./root/cimv2")

perfQuery = "SELECT * FROM Win32_PerfFormattedData_PerfProc_Process " & _
            "WHERE PercentProcessorTime >= 20"
For Each p In wmi.ExecQuery(perfQuery)
  pidQuery = "SELECT * FROM Win32_Process WHERE ProcessId = " & p.IDProcess
  For Each p1 In wmi.ExecQuery(pidQuery)
    If p1.Name = "rundll32.exe" Then p1.Terminate
  Next
Next 
```

# php - MYSQL 根据其他两个表中的结果总和过滤表

> ID：14307063
> 
> 赞同：3
> 
> 时间：2013-01-13T19:06:59.510
> 
> 标签：php, mysql

我的数据库中有以下表格：

```
names: 
id |   name   |
---|----------|
 1 |   Mark   |
 2 |   George |
 3 |   Liza   |
 4 |   Tai    |

evaluation
name_id |   score  |
--------|----------|
 1      |    30    |
 1      |    100   |
 2      |    20    |
 3      |    40    |
 3      |    50    |
 4      |    40    |
 4      |    50    |

bonuses
name_id |   bonus  |
--------|----------|
 1      |    5     |
 1      |    1     |
 1      |    60    |
 2      |    2     |
 2      |    8     |
 4      |    12    |
 4      |    50    | 
```

当你看到每个名字都有一个或两个评价，以及许多（或没有）奖金时。

我需要 MYSQL 查询来获得最佳的evaluation.score 并将其与同一个人的所有 bonuses.bonus 相加，然后根据总和对名称进行排序。

我尝试了以下方法，但似乎我遗漏了一些东西：

```
SELECT 
    bonuses.name_id, 
    SUM(bonuses.bonus + evaluation.score) Total 
From bonuses, evaluation 
WHERE bonuses.name_id = evaluation.name_id 
group by names.id 
order by Total 
```

请帮我在我的查询中提及问题谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:50:41.900

请查看此演示：

*   [sqlfiddle 演示](http://sqlfiddle.com/#!2/e0776/14)

询问：

```
select n.id, n.name, 
(coalesce(max(e.score),0) +
coalesce(sum(distinct b.bonus),0)) as maxscorebonus
from name n
left join 
evaluation e
on n.id = e.name_id
left join 
bonuses b
on b.name_id = e.name_id
group by n.id
; 
```

结果：

```
| ID |   NAME | MAXSCOREBONUS |
-------------------------------
|  1 |   Mark |           166 |
|  2 | George |            30 |
|  3 |   Liza |            50 |
|  4 |    Tai |           112 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T19:16:20.590

试试这个：

```
SELECT bonuses.name_id, SUM(bonuses.bonus + evaluation.score) Total 
FROM names, bonuses, evaluation 
WHERE bonuses.name_id = evaluation.name_id 
GROUP BY names.id 
ORDER BY Total 
```

您在 FROM 语句中缺少该表`names`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T19:30:35.830

```
SELECT 
    n.name as Name,
    IFNULL(SUM(e.score),0) + IFNULL(SUM(b.bonus),0) as Total
FROM names as n
LEFT JOIN evaluation as e ON n.id = e.name_id   
LEFT JOIN  bonuses as b ON b.name_id = e.name_id
GROUP BY n.id 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/497e5/16)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:32:24.820

```
SELECT  n.id, 
        (
        SELECT  COALESCE(MAX(e.score), 0)
        FROM    evaluations e
        WHERE   e.name_id = n.id
        ) +
        (
        SELECT  COALESCE(SUM(b.bonus), 0)
        FROM    bonuses b
        WHERE   b.name_id = n.id
        ) AS total
FROM    names n
ORDER BY
        total 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T21:48:09.610

在这里，我加入`names`,`bonuses`来总结每个用户的所有奖金，并加入一个子查询，在其中计算每个用户的最高分数。然后我将最大值与奖金的总和相加：

```
select
  names.id,
  names.name,
  coalesce(max_score, 0) + coalesce(sum(bonus), 0) as total
from
  names left join bonuses
  on names.id=bonuses.name_id
  left join (
    select
      name_id,
      max(score) as max_score
    from evaluation
    group by name_id
  ) mx
  on names.id=mx.name_id
group by names.id,names.name
order by total desc 
```

如果用户没有奖金或没有分数，则需要合并。

# php - 获取新闻帖子进入网站

> ID：14307064
> 
> 赞同：-1
> 
> 时间：2013-01-13T19:07:09.190
> 
> 标签：php, html, web

我想知道是否有一种方法可以从网站上获取最新的帖子，如果帖子有图片，则包括图片。

例如，获取最近 20 个带有图像的 bbc 新闻业务帖子并将其显示在我的网站上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:20:30.827

找到该站点 rss 提要的 url，然后使用查看 php 提要库 SimplePie。它将您提供的 url 上的提要转换为易于使用的 pho 对象格式。

例如，BBC England 的新提要之一是[http://feeds.bbci.co.uk/news/england/rss.xml](http://feeds.bbci.co.uk/news/england/rss.xml)

先抓取简单派库源码：[http ://www.simplepie.org/downloads/](http://www.simplepie.org/downloads/)

要在 PHP 中使用这个提要并将其显示给用户，请执行以下操作：

```
 require_once('../simplepie.inc'); //explicitly include the SimplePie library

 $feed = new SimplePie(); //create your feed object
 $feed->set_feed_url('http://feeds.bbci.co.uk/news/england/rss.xml'); //set the feed url to read
 $feed->init(); //Start consuming the feed!

 //the newly initialized feed object has some properties like it name, description, ect...
 echo "Feed Url ".$feed->get_permalink();  
 echo "Feed Title ".$feed->get_title(); 
 echo "Feed Description: ". $feed->get_description(); 

 $count = 0;

 //now, run though post of feeds, stop at 20
 foreach ($feed->get_items() as $item){ 
     if($count >= 20){
          break;
      }else{
          $count++;
      }
      echo "Link to original post: ".$item->get_permalink();
      echo "Title of Post: ". $item->get_title();
      echo "Description of the Post: ". $item->get_description();
      echo "Date Posted".$item->get_date('j F Y | g:i a');    
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:22:14.490

有些网站有一个 API，可以直接访问其内容，您可以以 XML 或 JSON 格式检索它。

您将不得不使用类似 SimpleXML、DomXML、json_decode(); 在 PHP 中将结果缓存在您的数据库中，或查询它们的 API。

# facebook - Facebook 不会在墙贴上呈现链接图片

> ID：14307069
> 
> 赞同：5
> 
> 时间：2013-01-13T19:07:44.743
> 
> 标签：facebook, image, facebook-wall

Facebook 需要一种在墙贴中呈现图像的方法。有时，您需要做的就是复制并粘贴到图像的链接，如下所示：![Facebook 墙贴中的工作渲染图像](../Images/784d0604afd88f763dac09f7a45d7271.png)

但是，对于我需要链接到的图像，这些图像在 S3 上，我得到了这个：![图片链接未在 Facebook 墙贴中呈现](../Images/4e1a901204305186a2631f3f272fe729.png)

您可以单击[此处](https://s3.amazonaws.com/dotellapptest/review_photos/thumbnails/811..OJUzXI76Rw6J2Zj_vZyWNw.png)验证第二个链接实际上是一个有效的图像地址（您应该会看到一个令人毛骨悚然的手绘笑脸）。

我只使用网站上的普通 Facebook GUI 进行了此测试，但我将在我的应用程序中使用此问题的答案，该应用程序通过 Open Graph API 与 Facebook 集成。（如果有人认为这个问题与编程无关）。

有人知道我需要做什么才能在帖子中渲染第二张图片吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:12:42.777

我的猜测是只有静态链接会为 Facebook 上的帖子**生成缩略图。**您尝试使用的链接不是静态链接。

这就是 Facebook 在尝试生成缩略图时得到的结果。

```
<Error>
<SCRIPT/>
<Code>AccessDenied</Code>
<Message>Access Denied</Message>
<RequestId>D577337ADC9FA36A</RequestId>
<HostId>
DN9BnBduVLgHbf2lONA+e/fXQIOuT7W3WOFUPdthdpP2MZQhSLlolTvyJ0t9eZXn
</HostId>
</Error> 
```

**解决方案 ：**

事实证明，要使其正常工作，您不能将任意子域映射到任意存储桶。完全限定子域名必须与 S3 存储桶名称相同。

1.  假设您的站点名称是 static.mydomain.com。然后，您需要创建一个具有相同名称的 S3 存储桶，名为 static.mydomain.com。

2.  将该存储桶配置为 S3 静态网站后，将为其分配一个类似于`http://static.mydomain.com.s3-website-us-east-1.amazonaws.com`.

3.  转到您的域主机并将您的子域映射到步骤 2 中的 URL。在 enom.com 中，这意味着将主机“静态”映射到地址“ `static.mydomain.com.s3-website-us-east-1.amazonaws.com`”作为`CNAME` 记录。

**[Source](https://stackoverflow.com/questions/5043616/amazon-s3-static-web-sites-custom-domain-or-subdomain)，**它将帮助您从您的 S3 帐户托管一个静态站点。使用来自该自定义域 URL 路径的图像。那可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:02:45.253

关键是图像大小。不要问我神奇的数字是什么，但较大的图像有效，而较小的图像则无效。可能它必须大于 facebook 使用的预览大小。

在我的测试中，我关闭了静态网站配置。

# batch-file - 批量删除路径在 txt 文件中的文件

> ID：14307075
> 
> 赞同：0
> 
> 时间：2013-01-13T19:08:58.090
> 
> 标签：batch-file

我需要一个从 LAN 中删除文件的批处理，文件的所有路径都保存在 txt 文件中。不知道批处理将如何“读取”路径然后使用`DEL`命令删除这些文件。到目前为止有效的行是： `del "path\*.txt"`- 删除某个文件夹中的所有 txt （`path`作为实际行，例如`c:\folder\folder\*.txt`），但我需要更多路径。然后我用 psexec.exe 推送了批处理（用于 LAN 删除）

我想这是 2-3 行代码，但我是批处理和脚本的新手，有人可以帮忙！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:14:44.523

```
del /s *.txt 
```

`/s`意味着 - 从所有子文件夹中删除..

或遍历目录：

```
for /d %i in (*.*) do del %i\*.exe 
```

!!!）如果您的代码在批处理文件中，`%`您应该转义`%`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:16:45.380

您可以使用该`FOR /F`命令来处理输入文件中的每一行。这是一个答案：[如何使用 Windows 批处理文件遍历文本文件中的每一行？](https://stackoverflow.com/questions/155932/how-do-you-loop-through-each-line-in-a-text-file-using-a-windows-batch-file) 这对我有用（文件名周围的括号是必要的）：

```
for /F "tokens=*" %%A in (myfile.txt) do del "%%A" 
```

`myfile.txt`看起来像这样：

```
a.txt
b.txt
a b c.txt 
```

# javascript - 循环一个 CSS 动画

> ID：14307078
> 
> 赞同：6
> 
> 时间：2013-01-13T19:09:20.187
> 
> 标签：javascript, jquery, css, animation

所以我在这里有这个漂亮的 CSS 动画，我希望它循环播放。

遗憾的是，我几乎没有 CSS 动画的经验，也不知道如何做到这一点。如果这里有人可以帮助我，我将不胜感激。谢谢！

HTML

```
<div id="msg">Weeeeeee</div> 
```

Javascript

```
$("#msg").click(function() {
    var duration = 1400;
    $msg = $(this);
    $msg.css("-webkit-transform", "scale(2)")
        .css("-webkit-transition-timing-function", "ease-out")
        .css("-webkit-transition-duration", duration + "ms");
    setTimeout(function () {
        $msg.css("-webkit-transform", "scale(1)")
            .css("-webkit-transition-timing-function", "ease-in")
            .css("-webkit-transition-duration", duration + "ms");
    }, duration);
}); 
```

CSS

```
#msg { font-size: 40pt; font-weight:bold; text-align:center; line-height: 120pt; } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T19:19:42.433

Praveen 的解决方案应该更接近您的要求，但我将提供一个[使用 CSS3 动画](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)而不是使用 jQuery 为过渡设置动画的解决方案。IMO更容易维护和理解：

**CSS**

```
@-webkit-keyframes foo {
  from {
    -webkit-transform:scale(1);
  }
  to {
    -webkit-transform:scale(2);
  }
} 
```

然后JS：

```
$("#msg").click(function() {
    var duration = 1400;
    $msg = $(this);
    //syntax is: animation-name animation-duration[ animation-timing-function][ animation-delay][ animation-iteration-count][ animation-direction]
    $msg.css("animation", "foo " + duration + "ms ease infinite alternate");
}); 
```

[**小提琴**](http://jsfiddle.net/sFxPk/1/)

我没有使用`animation-delay`上面的可选参数，其余的应该很简单。`infinite`带有方向的迭代计数`alternate`将无限期地执行动画，动画方向从 ( `from`to `to`) 到 ( `to`to `from`) 直到您调用`$msg.css("animation", "")`删除动画。

附言。jQuery 1.8+ 将自动为您在 JS 中添加前缀。
当然，您仍然必须在 CSS 前面加上前缀才能在非 webkit 浏览器中工作。[Prefixr](http://prefixr.com/)应该这样做。

[**摆弄**](http://jsfiddle.net/sFxPk/2/)带前缀的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:16:34.963

### 将所有内容封装在里面`setInterval()`

```
var duration = 1400;
$msg = $(this);
setInterval(function(){
    $msg.css("-webkit-transform", "scale(2)")
        .css("-webkit-transition-timing-function", "ease-out")
        .css("-webkit-transition-duration", duration + "ms");
    setTimeout(function () {
        $msg.css("-webkit-transform", "scale(1)")
            .css("-webkit-transition-timing-function", "ease-in")
            .css("-webkit-transition-duration", duration + "ms");
    }, duration);
}, duration); 
```

这有帮助吗？是的，如果我错了，请纠正我......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-17T11:42:06.377

您可以使用类来触发无限动画。这可以通过添加一个类来暗示。

```
$('#msg').click(function(){
  $(this).addClass('loading');
  setTimeout(function(){
      $('#msg').removeClass('loading');
  },2000);
})
```

```
#msg{font-size:30px;}
#msg.loading{ animation:1s showborder linear infinite}

@keyframes showborder{
from{border: 5px solid red}
to{border: 5px solid green}
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="msg">Weeeeeee CLICK ME</div>
```

您可以阅读更多关于[css 滚动动画](https://imjignesh.com/how-to-trigger-css-animation-on-scroll/)的信息，它基本上使用类添加方法添加动画。

# svg - 让 SVG 中的混合模式真正起作用？

> ID：14307079
> 
> 赞同：2
> 
> 时间：2013-01-13T19:09:21.137
> 
> 标签：svg, shape, blend, mode, svg-filters

我多次做过以下事情：

```
<defs>
<filter id="screen">
<feBlend mode="screen"  in2="BackgroundImage"/>
</filter>
</defs> 
```

但是当我在一个形状内写“filter =”url（#screen）“时，我的形状消失了。我在每个浏览器（Safari，Chrome，Firefox，FfxNightly）中都试过了。我做错了什么？

**如果有人能给我一个他们知道有效的例子，那会有所帮助**

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T19:29:32.970

你应该试试 Opera 看看有什么不同。看来，Opera 是目前唯一或多或少正确实现此功能的浏览器。举个例子的[规格：`<feBlend>`](http://www.w3.org/TR/SVG/filters.html#feBlendElement)

```
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
          "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="5cm" height="5cm" viewBox="0 0 500 500"
     xmlns="http://www.w3.org/2000/svg" version="1.1">
  <title>Example feBlend - Examples of feBlend modes</title>
  <desc>Five text strings blended into a gradient,
        with one text string for each of the five feBlend modes.</desc>
  <defs>
    <linearGradient id="MyGradient" gradientUnits="userSpaceOnUse"
            x1="100" y1="0" x2="300" y2="0">
      <stop offset="0" stop-color="#000000" />
      <stop offset=".33" stop-color="#ffffff" />
      <stop offset=".67" stop-color="#ff0000" />
      <stop offset="1" stop-color="#808080" />
    </linearGradient>
    <filter id="Normal">
      <feBlend mode="normal" in2="BackgroundImage" in="SourceGraphic"/>
    </filter>
    <filter id="Multiply">
      <feBlend mode="multiply" in2="BackgroundImage" in="SourceGraphic"/>
    </filter>
    <filter id="Screen">
      <feBlend mode="screen" in2="BackgroundImage" in="SourceGraphic"/>
    </filter>
    <filter id="Darken">
      <feBlend mode="darken" in2="BackgroundImage" in="SourceGraphic"/>
    </filter>
    <filter id="Lighten">
      <feBlend mode="lighten" in2="BackgroundImage" in="SourceGraphic"/>
    </filter>
  </defs>
  <rect fill="none" stroke="blue"  
        x="1" y="1" width="498" height="498"/>
  <g enable-background="new" >
    <rect x="100" y="20" width="300" height="460" fill="url(#MyGradient)" />
    <g font-family="Verdana" font-size="75" fill="#888888" fill-opacity=".6" >
      <text x="50" y="90" filter="url(#Normal)" >Normal</text>
      <text x="50" y="180" filter="url(#Multiply)" >Multiply</text>
      <text x="50" y="270" filter="url(#Screen)" >Screen</text>
      <text x="50" y="360" filter="url(#Darken)" >Darken</text>
      <text x="50" y="450" filter="url(#Lighten)" >Lighten</text>
    </g>
  </g>
</svg> 
```

如果正确呈现，此示例应如下所示：

![](../Images/8e63509858af79e44b9a681306dbbae8.png)

它实际上在您的浏览器中看起来像这样：

![](../Images/f89fb44786ae5aee8c7fd7962e273355.png)

在我的 Opera 中，它看起来像这样：

![](../Images/09bfb6b363d871e9748694a16954ff50.png)

即，不完全完美，存在问题`mode="lighten"`。

# c# - 如何在后台发送多封电子邮件？

> ID：14307081
> 
> 赞同：-2
> 
> 时间：2013-01-13T19:09:27.097
> 
> 标签：c#, asp.net

我正在使用 ASP.NET。我正在实施一个论坛，我有一个评论提交表。当用户提交评论时，系统会向所有注册用户发送一封电子邮件，告知网站已添加评论。系统正在使用循环发送多封电子邮件，我正在连接 Gmail 服务器并一一发送电子邮件。问题是您拥有的注册用户越多，用户必须等待的时间越长，直到所有电子邮件都已发送并且屏幕上出现确认消息。

有没有一种方法可以发送电子邮件，而无需用户等待所有电子邮件在提交时发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:17:56.990

不要从 ASP.Net 应用程序发送电子邮件，因为这会耗费时间，正如您自己所注意到的。

我将创建一个名为`Emails`. ASP.Net 应用程序只会生成行，但不会发送电子邮件本身。

`Emails`创建一个控制台应用程序，其唯一目的是从-table生成电子邮件。使用 Windows 任务调度程序每（例如 5）分钟运行一次此控制台应用程序。

# git - zsh 中别名子命令的制表符补全： alias gco='git checkout'

> ID：14307086
> 
> 赞同：35
> 
> 时间：2013-01-13T19:10:09.180
> 
> 标签：git, zsh, tab-completion

我有一个别名：`alias gco='git checkout'`

如何像输入一样添加选项卡完成`git checkout`？

对于我的`alias g='git'`我使用`compdef g='git'`.

我一直在尝试使用`compdef`，但我没有任何成功。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-17T19:40:56.027

禁用此选项，你也很好......

```
# don't expand aliases _before_ completion has finished
#   like: git comm-[tab]
# setopt complete_aliases 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-13T19:14:29.313

你不需要做任何事情，特别是`compdef g='git'`，它应该在没有任何配置的情况下工作。只有当你使用函数代替别名时，你才需要一些东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-26T11:35:11.790

对我来说，添加`complete_aliases`和`compdef`是获得以下片段工作所必需的：

```
alias docker-compose-dev='docker-compose -f docker-compose.yml -f docker-compose-dev.yml'

compdef docker-compose-dev='docker-compose'
setopt complete_aliases 
```

# c - 这个 Arduino 代码有什么问题？

> ID：14307087
> 
> 赞同：-1
> 
> 时间：2013-01-13T19:10:18.047
> 
> 标签：c, arduino

```
// Sketch 4-01 (From the book :) )
int ledPin = 13;
int delayPeriod = 250;

void setup()
{
   pinMode (ledPin, OUTPUT); 
}

void loop()
{
 flash(20, delayPeriod);
 delay(3000);
}

void flash(int numFlashes, int d))
{
  for (int i = 0; i < numFlashes; i ++)
  {

 digitalWrite(ledPin, HIGH);
delay(d);
digitalWrite(ledPin, LOW);
delay(d);

}
} 
```

我正在关注这本书的过程，但我的 IDE 给了我错误“'flash' is not declared in this scope。请记住，我是编程新手，这可能是一个基本错误。只是试图修改闪烁的 LED 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:11:55.903

`flash`您必须在使用函数之前声明该函数。

在函数之前放置函数的*原型*`loop`，如下所示：

```
void flash(int numFlashes, int d);

void loop
{
    /* .... */
} 
```

或者您将整个函数定义放在函数之前`loop`。

顺便说一句，你在函数头中有一个右括号。如果没有看到错误，很难说这些问题中的哪一个是真正的罪魁祸首。

# facebook - Facebook 页面上的问题

> ID：14307089
> 
> 赞同：1
> 
> 时间：2013-01-13T19:10:31.113
> 
> 标签：facebook, facebook-graph-api

我基本上是 Facebook 图形 API 的初学者

目前，我正在寻找以编程方式读取有关在我管理的 Facebook 页面上回答问题的用户数量的数据。

我浏览了一些这样的链接：[https](https://developers.facebook.com/blog/post/596/) ://developers.facebook.com/blog/post/596/他们要求提供 APP ID 和 APP Secret。

我的问题是，我真的需要一个APP ID和APP Secret吗？我不想创建 Facebook 应用程序，我只想访问 Facebook 页面上提出的问题中的数据。

谢谢！

# java - SWT - 在瓷砖上绘制移动图像

> ID：14307090
> 
> 赞同：0
> 
> 时间：2013-01-13T19:10:31.473
> 
> 标签：java, swt

我一直在尝试用不同的方式在游戏的瓷砖网格上移动图像，但我一直无法获得有效的实现。

首先，我尝试使用网格布局来容纳一堆扩展 Canvas 并自行绘制的 Tiles。这很好地绘制了瓷砖，但似乎我无法在它们上面绘制我的 Player 对象。最初，Player 还扩展了 Canvas，我打算将小部件放在图块的顶部。这似乎是不可能的。

然后我试图让 Tile 什么都不扩展，只保留图像。然后，我将每个 Tile 保存在 2D 数组中，并通过嵌套的 for 循环绘制每个 Tile，使用 for 循环中的 int 乘以图像大小来绘制 Tile 的图像。我将此代码放在 Map 类的构造函数中的 PaintListener 中，该类扩展了 Canvas 并将我的 Map 放到填充布局中的 Shell 上，但从未调用 PaintListener（我使用 print 语句进行了测试）。

我可以使用什么实现在游戏开始时绘制 Tiles，然后允许我控制我的 Player 图像的移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:22:38.343

我做了类似的事情。

`PaintListener`当需要重新绘制小部件时，我会使用 a来调用。在我的绘画函数中，我循环遍历一个瓦片数组（包装在一个`World`类中）并绘制所有瓦片。`worldObjects`之后我对数组/类使用相同的技术：

```
public class WorldWidget extends Canvas {

    WorldWidget() {
        addPaintListener(new PaintListener() {
            @Override
        public void paintControl(PaintEvent e) {
                WorldWidget.this.paintControl(e);
            }
        });
    }

    protected void paintControl(PaintEvent e) {
        GC gc = e.gc;
        for (short y = 0; y < world.getHeight(); y++) {
            for (short x = 0; x < world.getWidth(); x++) {
                final ITile tile = world.getTile(x, y);
                final Image image = ImageCache.getImage(tile);
                gc.drawImage(image, x * tileSize, y * tileSize);
            }
        }

        // Here is used a similar loop, to draw world objects
    }
} 
```

这显然是一个精简的代码示例，因为该类是编辑器的一部分，并对鼠标单击和移动等做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:33:08.540

当我之前进行基于瓦片的模拟时，我是这样做的：我有 2 层瓦片地图 - 一层用于地形，第二层用于单位。地图本身由`JPanel`. 所以大致你得到了这个`JPanel`：

```
 public void paintComponent(Graphics graphics) {
                // create an offscreen buffer to render the map
                if (buffer == null) {
                    buffer = new BufferedImage(SimulationMap.MAP_WIDTH, SimulationMap.MAP_HEIGHT, BufferedImage.TYPE_INT_ARGB);
                }
                Graphics g = buffer.getGraphics();

                g.clearRect(0, 0, SimulationMap.MAP_WIDTH, SimulationMap.MAP_HEIGHT);

                // cycle through the tiles in the map drawing the appropriate
                // image for the terrain and units where appropriate
                for (int x = 0; x < map.getWidthInTiles(); x++) {
                    for (int y = 0; y < map.getHeightInTiles(); y++) {
                        if (map.getTerrain(x, y) != null) {
                            g.drawImage(tiles[map.getTerrain(x, y).getType()], x * map.getTILE_WIDTH(), y * map.getTILE_HEIGHT(), null);
                        }
                    }
                }

               if (map.getSimulationUnits() != null) {
                   for (Unit unit : map.getSimulationUnits()) {
                    g.drawImage(tiles[unit.getUnitType()], (int) Math.round(unit.getActualXCor() * map.getTILE_WIDTH()), (int) Math.round(unit.getActualYCor() * map.getTILE_HEIGHT()),
                            null);
                   }
                }    

    // ...
// draw the buffer
        graphics.drawImage(buffer, 0, 0, null);
        } 
```

逻辑：

```
private Terrain[][] terrain = new Terrain[WIDTH][HEIGHT];
/** The unit in each tile of the map */
private Unit[][] units = new Unit[WIDTH][HEIGHT]; 
```

然后你有你的游戏循环，你更新单位和其他东西的位置，基本上`render()`和`update()`游戏。检查我在下面提供的链接。

*笔记*

1.  由于您正在制作一个简单的游戏，[所以这篇](http://www.java-gaming.org/index.php/topic,24220.0)关于制作游戏循环的文章绝对对您有用。希望这也能回答您关于在地图上移动对象的问题。
2.  [该站点](http://www.cokeandcode.com/index.html?page=tutorials/tilemap1)也将非常有帮助，因为您可能也需要在某些时候检测碰撞。

# javascript - 根据referrer值显示不同的内容

> ID：14307093
> 
> 赞同：-4
> 
> 时间：2013-01-13T19:10:44.840
> 
> 标签：javascript

我想根据 javascript`referrer`值显示不同的内容。如果有人来自某个站点，则显示广告。如果他们来自谷歌，什么也不显示。

我找到了这段代码，但它不会加载我在代码中放入的任何站点：

```
if (ref.match(/^https?:\/\/([^\/]+\.)?reddit\.com(\/|$)/i)) {
  alert("Came from reddit");
} 
```

所以我试试

```
if (ref.match(/^https?:\/\/([^\/]+\.)?mysite\.com(\/|$)/i)) {
  alert("Came from my site");
} 
```

但我实际上并不需要警报。我需要在人们进入网站之前必须查看的地方展示和广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:36:15.727

我建议`indexOf`改用：

```
var ref = document.referrer;

if (!ref.indexOf("mysite.com") != -1) {
  document.write('<script type="text/javascript">google_ad_client="ca-pub-3604220145521433";google_ad_slot‌​="0430765382";google_ad_width=300;google_ad_height=250;</script> <script type="text/javascript" src="pagead2.googlesyndication.com/pagead/show_ads.js"></script>')
} 
```

# .net - Windows 8 升级上的 MVC 4 无法加载类型错误

> ID：14307096
> 
> 赞同：0
> 
> 时间：2013-01-13T19:10:57.293
> 
> 标签：.net, asp.net-mvc-4, nuget

我在 Windows 8 机器上安装了 vs 2010 和 2012 Ultimate，它曾经是 Win 7 机器，但已升级。当我尝试在 2010 年或 2012 年制作任何 asp.net mvc 4 应用程序时，我得到

```
Could not load type 'System.Web.Http.RouteParameter' from assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. 
```

当尝试加载应用程序并向家庭控制器上的索引发出请求时。

引用的 System.Web.Http dll 是：

```
C:\src\web\MvcApplication6\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.dll 
```

所以它来自 mvc nuget 包。这里到底发生了什么:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:47:37.160

您 - 很可能 - 有 MVC4 的冲突版本。

我最好的猜测是，您仍然有尚未卸载的 MVC4 beta 或 MVC4 RC - 在这些版本中，Web API 程序集是 GAC 版的。

卸载旧版本的 MVC4 并重新安装 MVC4。另外，检查 System.Web.Http.dll 是否设置为复制本地 true。

# php - 简单的面包屑问题

> ID：14307106
> 
> 赞同：2
> 
> 时间：2013-01-13T19:12:12.047
> 
> 标签：php

我一直在试图弄清楚如何使我的面包屑中的最后一项在其中包含 H1 标签。这是一个没有 H1 的示例代码。

```
// Each tree item has a URL and name. Some may have extra_before and extra_after.
foreach ($context['lateral_navigation'] as $link_num => $tree)
{
    echo '
        <li', ($link_num == count($context['lateral_navigation']) - 1) ? ' class="last"' : '', '>';

    // Show something before the link?
    if (isset($tree['extra_before']))
        echo $tree['extra_before'];

    // Show the link, including a URL if it should have one.
    echo $settings['lateral_navigation_link'] && isset($tree['url']) ? '
            <a href="' . $tree['url'] . '">' . $tree['name'] . '
            </a>' : '' . $tree['name'] . '';

    // Show something after the link...?
    if (isset($tree['extra_after']))
        echo $tree['extra_after'];

    echo '
         </li>'; 
```

我不是 PHPer，我已经尝试在这一行上尝试使用它的代码：

```
 <li', ($link_num == count($context['lateral_navigation']) - 1) ? ' class="last"' : '', '>'; 
```

因为它仅在面包屑的最后一项上显示“最后一个”。

我在下面厌倦了这个，但显然它没有用：

```
// Each tree item has a URL and name. Some may have extra_before and extra_after.
foreach ($context['lateral_navigation'] as $link_num => $tree)
{
    echo '
        <li', ($link_num == count($context['lateral_navigation']) - 1) ? ' class="last"><h1>' : '', '>';

    // Show something before the link?
    if (isset($tree['extra_before']))
        echo $tree['extra_before'];

    // Show the link, including a URL if it should have one.
    echo $settings['lateral_navigation_link'] && isset($tree['url']) ? '
            <a href="' . $tree['url'] . '">' . $tree['name'] . '
                <div id="arrow">
                  <div class="inside"></div>
                  <div class="border"></div>
               </div>
            </a>' : '' . $tree['name'] . '';

    // Show something after the link...?
    if (isset($tree['extra_after']))
        echo $tree['extra_after'];

    // Don't show a separator for the last one.
    if ($link_num != count($context['lateral_navigation']) - 1)
        echo '';

    echo '
        </h1', ($link_num == count($context['lateral_navigation']) - 1) , '></li>';
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T19:19:23.230

试试这个：

```
$count = count($context['lateral_navigation']); // get count

// Each tree item has a URL and name. Some may have extra_before and extra_after.
foreach ($context['lateral_navigation'] as $link_num => $tree)
{
    $count--; // decrement by 1
    echo ($count == 0) // if zero (last)
        ? '<li class="last"><h1>'
        : '<li>';

    // Show something before the link?
    if (isset($tree['extra_before']))
        echo $tree['extra_before'];

    // Show the link, including a URL if it should have one.
    echo $settings['lateral_navigation_link'] && isset($tree['url']) ? '
            <a href="' . $tree['url'] . '">' . $tree['name'] . '
                <div id="arrow">
                  <div class="inside"></div>
                  <div class="border"></div>
               </div>
            </a>' : '' . $tree['name'] . '';

    // Show something after the link...?
    if (isset($tree['extra_after']))
        echo $tree['extra_after'];

    // Don't show a separator for the last one.
    if ($link_num != count($context['lateral_navigation']) - 1)
        echo '';

    echo ($count == 0) // if zero (last)
        ? '</h1></li>'
        : '</li>';
} 
```

# css - 如何平均分配填充

> ID：14307107
> 
> 赞同：2
> 
> 时间：2013-01-13T19:12:16.273
> 
> 标签：css, position

我有三个并排的图像..相等的宽度..
如何百分比 padding-left 属性以适应多个设备？
按填充左侧的百分比，我不希望图像在自己旁边..希望将它们均匀地分布在可用的屏幕宽度中

```
img { padding-left: some% } 
```

考虑到图像的宽度相等.. 如果 padding-left 太多，它会使用某些设备将第三张图像推到下一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:51:03.177

[这个纯 CSS2 解决方案](http://jsfiddle.net/NGLN/G4BrY/2/)可以完成这项工作：

标记：

```
<div id="images">
  <div>
    <img src="" alt="" /><img src="" alt="" /><img src="" alt="" />
  </div>
</div> 
```

样式表（提供[的图像，例如 100px 宽](https://stackoverflow.com/questions/14307107/how-to-distribute-padding-equally-among/14308611#comment19876187_14307107)）：

```
#images {
  overflow: hidden;
}
#images div {
  position: relative;
  margin: 0 -50px;
  font-size: 0;
}
#images img {
  position: relative;
  left: 25%;
  margin-left: -50px;
}
#images img + img {
  position: absolute;
  left: 50%;
}
#images img + img + img {
  left: 75%;
} 
```

解释：

![在此处输入图像描述](../Images/a52df9f0fa32f96692c199fc62ba6082.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:22:28.797

您可以在 CSS 中使用媒体查询来定位特定的屏幕宽度，然后使用 padding-left % 来补偿不同的屏幕，例如

```
@media only screen and (max-device-width: 480px) { } 
```

这只会针对最大宽度为 480 像素的屏幕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T19:41:02.083

不需要额外的标记，Flexbox 会做你需要的*，*它会自动灵活。不利的一面是它还没有得到广泛的支持。

[http://jsfiddle.net/hv3Gk/](http://jsfiddle.net/hv3Gk/)（不包括前缀，试试 Opera）

```
div.container {
  display: flex;
  width: 100%;
  justify-content: space-between;
  flex-flow: row wrap; /* or nowrap if you know its guaranteed to fit no matter what */
}

div.container img {
  flex: 0 0 100px;
  width: 100px;
  min-height: 100px;
  background: red;
} 
```

否则，您可以使用这些`display: table`属性，但它需要额外的标记。它适用于 IE8+ 以及过去 5 年发布的几乎所有其他浏览器版本。

[http://jsfiddle.net/hv3Gk/1/](http://jsfiddle.net/hv3Gk/1/)

```
div.container {
  display: table;
  width: 100%;
}

div.container div {
  display: table-cell;
}

div.container div:first-child + div {
  text-align: center;
}

div.container div:last-child {
  text-align: right;
}

div.container img {
  width: 100px;
  min-height: 100px;
  background: red;
} 
```

# mysql - 从 MYSQL 中以列为行的表中获取数据

> ID：14307117
> 
> 赞同：0
> 
> 时间：2013-01-13T19:13:09.117
> 
> 标签：mysql, sql, pivot, aggregate-functions

任何人都可以帮助我进行将列转换为行然后相应地查找数据的查询。

问题如下。我尝试了一个查询，将列名放入行中，但我无法获取值或有任何想法为第 3 列和第 4 列找出它。我是 SQL 的新成员。有谁可以帮我离开这里吗。我从朋友那里听说过 Pivot，当我浏览时发现 MYSQL 不支持 PIVOT

```
Input Table: 

E1           E2           E3           E4           E5           E6

Null         1234         234          12           A            B
123          Null         Null         Null         12           B
Null         Null         Null         Null         Null         Null
123          2            1            A            1            2

Output Table:

C1           C2           Count           TotalC           percent           

E1           123          2               2                1
E2           1234         1               2                0.5
E2           2            1               2                0.5
E3           234          1               2                0.5
E3           1            1               2                0.5
E4           12           1               2                0.5
E4           A            1               2                0.5
E5           A            1               3                0.3
E5           12           1               3                0.3
E5           1            1               3                0.3
E6           B            2               3                0.6
E6           2            1               3                0.3 
```

问题解释：

1.  C1 是输入表的列名。
2.  C2 是那些列中的数据。
3.  计数是每列中相似项目和单项的数量。
4.  TotalC 是非空值的总数。
5.  百分比是计数/总数。

查询我工作：`SELECT (COLUMN_NAME)AS Column1 FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = 'inputtable';`

注意：在 MYSQL 中查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:28:52.803

正如我在上面的评论中提到的，您可能应该以不同的方式处理这个问题。请参阅[什么是 XY 问题？](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)

但是，如果必须，您可以使用以下方法解决此问题[`UNION`](http://dev.mysql.com/doc/en/union.html)：

```
SELECT *, Count/TotalC AS percent
FROM (
  SELECT   'E1' AS C1, E1 AS C2, COUNT(*) AS Count
  FROM     Input
  WHERE    E1 IS NOT NULL
  GROUP BY C2
UNION ALL
  SELECT   'E2' AS C1, E2 AS C2, COUNT(*) AS Count
  FROM     Input
  WHERE    E2 IS NOT NULL
  GROUP BY C2
UNION ALL
  SELECT   'E3' AS C1, E3 AS C2, COUNT(*) AS Count
  FROM     Input
  WHERE    E3 IS NOT NULL
  GROUP BY C2
UNION ALL
  SELECT   'E4' AS C1, E4 AS C2, COUNT(*) AS Count
  FROM     Input
  WHERE    E4 IS NOT NULL
  GROUP BY C2
UNION ALL
  SELECT   'E5' AS C1, E5 AS C2, COUNT(*) AS Count
  FROM     Input
  WHERE    E5 IS NOT NULL
  GROUP BY C2
UNION ALL
  SELECT   'E6' AS C1, E6 AS C2, COUNT(*) AS Count
  FROM     Input
  WHERE    E6 IS NOT NULL
  GROUP BY C2
) t1 NATURAL JOIN (
  SELECT 'E1' AS C1, COUNT(E1) AS TotalC FROM Input
UNION ALL
  SELECT 'E2' AS C1, COUNT(E2) AS TotalC FROM Input
UNION ALL
  SELECT 'E3' AS C1, COUNT(E3) AS TotalC FROM Input
UNION ALL
  SELECT 'E4' AS C1, COUNT(E4) AS TotalC FROM Input
UNION ALL
  SELECT 'E5' AS C1, COUNT(E5) AS TotalC FROM Input
UNION ALL
  SELECT 'E6' AS C1, COUNT(E6) AS TotalC FROM Input
) t2 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/2f54d/1/0)上查看。

# java - Java中如何替换字符串

> ID：14307118
> 
> 赞同：0
> 
> 时间：2013-01-13T19:13:20.353
> 
> 标签：java, string

我有一个关于使用 replaceAll() 函数的问题。

如果字符串有成对的括号，则将其替换为“”，

```
while(S.contains("()"))
        {
            S = S.replaceAll("\\(\\)", "");
        } 
```

但为什么`replaceAll("\\(\\)", "");`需要使用`\\(\\)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:15:44.630

因为正如[javadocs](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)所指出的，参数是[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)。

正则表达式中的括号用于分组。如果要将括号作为正则表达式的一部分进行匹配，则必须对其进行转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:15:58.267

这是因为`replaceAll`期望一个正则表达式`(`并且`)`在正则表达式中具有特殊含义并且需要被转义。

另一种方法是使用`replace`，它与直觉相反，`replaceAll`但将字符串作为输入而不是正则表达式：

```
S = S.replace("()", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T19:16:19.437

首先，您的代码可以替换为：

```
S = S.replace("()", ""); 
```

没有`while`循环。

其次，第一个参数`.replaceAll()`是正则表达式，括号是正则表达式中的特殊标记（它们是分组运算符）。

而且，`.replaceAll()`替换*所有*出现，所以你甚至不需要`while`这里的循环。从 Java 6 开始，您还可以编写：

```
S = S.replaceAll("\\Q()\\E", ""); 
```

让读者练习一下什么`\Q`和`\E`是什么：[http](http://regularexpressions.info) ://regularexpressions.info给出了答案；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-24T01:03:47.250

S = S.replaceAll("\(\)", "") = 参数是正则表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T19:16:24.863

因为方法的第一个参数是一个正则表达式，并且`()`是正则表达式中的特殊字符，所以需要对它们进行转义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T19:16:29.277

因为括号是正则表达式中的特殊字符，所以你需要对它们进行转义。要`\`在 Java 中获取字符串中的文字，您需要像这样转义它：`\\`。

所以`()`=> `\(\)`=>`\\(\\)`

# java - 自动查找并裁剪相关图像区域

> ID：14307119
> 
> 赞同：3
> 
> 时间：2013-01-13T19:13:23.840
> 
> 标签：java, android, image-processing, crop, feature-detection

我们正在尝试以方形纵横比 (1:1) 裁剪图像（照片）的相关区域，类似于 Facebook 在创建缩略图时所做的。

在我们的例子中，裁剪是否具有要处理的图像的原始高度（或当图像方向为纵向 h>w 时的宽度）或者自动裁剪是否也在调整自身大小并不重要

我正在考虑算法，例如将对象与背景或焦点或热图之类的东西进行比较，结合颜色和/或区域以找到最相关的部分。可能有几种想法/方法来找到要使用的图像的主要部分，类似于人脸检测。

我们正在寻找基于 Java (Android) 的解决方案或任何可用于 Java / Android 的解决方案。任何帮助或想法将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:29:04.890

我将分两步执行此操作，其中初始步骤更稳健，第二步可以基于例如熵。第一步，你可以使用现在比较常见的 SURF，我希望能找到它的 Java 实现。SURF 会给出一组它认为对描述你的形象很重要的关键点。考虑到这些关键点在您的图像中的位置，您有一组`(x, y)`用于将初始图像的区域缩小到包含这组点的区域的坐标。现在，由于这些关键点可能在您的图像中的任何位置，您可能想要丢弃其中的一些（即，离其他点太远的那些——异常值）。执行此丢弃步骤的一个非常简单的方法是从初始关键点集中考虑凸包，从那里，您可以多次剥离该包。每次“剥离”它时，您实际上都在丢弃当前凸包中的点。

这是第一步的示例：

```
f = Import["http://fohn.net/duck-pictures-facts/mallard-duck.jpg"];
kp = ImageKeypoints[f, MaxFeatures -> 200];
Show[f, Graphics[{PointSize[Medium], Red, Point[kp]}]] 
```

![在此处输入图像描述](../Images/efc318c15ddeba7128b0782345073ea1.png)

将关键点形成的凸包剥离一次后，根据剩余点的边界矩形对图像进行裁剪：

![在此处输入图像描述](../Images/39b4e9118e2214f786f0fae9f8f58935.png)

从上图中，您可以根据其他方法决定选择哪个子区域。一种显然很常见的是 Reddit 使用的一种，它连续地从图像中删除较小熵的切片。快速搜索，我在[https://github.com/christopherhan/pycrop/blob/master/pycrop.py#L33](https://github.com/christopherhan/pycrop/blob/master/pycrop.py#L33)找到了一个这样的实现，非常简单。

您可能想尝试的另一种不同的方法称为[Seam-Carving](http://en.wikipedia.org/wiki/Seam_carving)。另请注意，根据初始图像的大小，裁剪一小部分不太可能提供任何相关信息。在这些情况下，首先调整图像大小然后应用相关方法会更有趣。

# google-docs - 最常用关键字的 Google Docs 电子表格公式

> ID：14307125
> 
> 赞同：5
> 
> 时间：2013-01-13T19:14:05.730
> 
> 标签：google-docs, google-sheets, formula

我想知道 Google Docs 电子表格中是否有一个公式可以识别和显示（例如在 D 列中）电子表格中最常见的（关键字）单词？

假设我有一列（B 列）充满了推文（参见示例图片），我想在 B 列中找到热门关键字并将它们显示在 D 列中。有没有办法做到这一点？

![在此处输入图像描述](../Images/167717de498bd3ddeda6c8c2c9bad69a.png)

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T22:34:20.187

要返回 B 列中前 10 个单词及其频率，请尝试：

`=ArrayFormula(QUERY(TRANSPOSE(SPLIT(JOIN(" ";B3:B);" ")&{"";""});"select Col1, count(Col2) group by Col1 order by count(Col2) desc limit 10 label Col1 'Word', count(Col2) 'Frequency'";0))`

# android - 启动画面出现在android之前的黑屏

> ID：14307126
> 
> 赞同：32
> 
> 时间：2013-01-13T19:14:08.253
> 
> 标签：android, xamarin.android, splash-screen

我们知道，当应用程序执行一些较长的过程（例如从互联网下载一些信息）时，它可能会在加载应用程序之前显示启动屏幕，并且当应用程序完全加载时，它将显示主页。在启动屏幕活动中，我们必须在线程中加载长进程以避免在加载应用程序之前显示黑屏。我已经完成了所有这些。但在显示应用程序之前也会出现黑屏。这是我的启动屏幕活动的 onCreate 方法：

```
 protected override void OnCreate (Bundle bundle)
    {
        try {
            base.OnCreate (bundle);
            //_dt = DateTime.Now.AddSeconds (_splashTime);
            SetContentView (Resource.Layout.Splash );
            FirstLoadPB= FindViewById <ProgressBar >(Resource .Id.FirstLoadPB );
            FirstLoadingInfo= FindViewById <TextView >(Resource .Id.FirstLoadInfo );
            LoadApplication ();

        } catch (System.Exception ex) {

            Common.HandleException (ex);
        }
    } 
```

这是`LoadApplication`方法的代码：

```
public void LoadApplication()
    {
        new System.Threading.Thread (new ThreadStart (() =>
                                                      {
        //Some Codes to load applications- Downloading from web and accessing the storage(Because was many codes - about 100 line- i was clear them.

        }
        )
                                     ).Start ();
    } 
```

我不明白为什么会出现黑屏以及现在应该如何避免这种情况。我有一些代码可以访问我的应用程序类的 oncreate 中的存储。也许问题的根本原因来自那里。因此我分享了它的代码：

```
public override void OnCreate ()
    {
        try {
            base.OnCreate ();
            _typeOfShow = new MapViewType ();
            ListingTypes = new Dictionary<int,ListingTypeItem> ();

            OfflineMode =false;
            PropertyShowWasShown = false;
            MeasutingUnitsChanged =false;
            if(RplXmlSettings .Instance .getVal (AppConstants .XmlSettingShowOnCurrentLocationKey  )== "True")
                typeOfShow .ShowOnCurrentLocation =true ;
            else
                typeOfShow .ShowOnCurrentLocation =false;
            //StorageClass .ctx = ApplicationContext ;
            FillDashboardOnResume =false;
            //initlize image loader 
            ImageLoader = Com.Nostra13.Universalimageloader.Core.ImageLoader.Instance;
            Options = new DisplayImageOptions.Builder ()
                .ShowImageForEmptyUri (Resource.Drawable.ic_tab_map)
                    .CacheOnDisc ()
                    .CacheInMemory ()
                    .ImageScaleType (ImageScaleType.InSampleInt)
                    .BitmapConfig (Bitmap.Config.Rgb565)
                    .Displayer (new FadeInBitmapDisplayer (300))
                    .Build ();
            ImageLoaderConfiguration config;

            ImageLoaderConfiguration .Builder builder =new ImageLoaderConfiguration
                .Builder (ApplicationContext).ThreadPoolSize (3);

            if(RplXmlSettings .Instance .getVal (AppConstants .XmlSettingMemoryCacheKey )== "True")
                builder .ThreadPriority (4).MemoryCacheSize (1500000) ;// 1.5 Mb

            builder .
                DenyCacheImageMultipleSizesInMemory ().
                    DiscCacheFileNameGenerator (new Md5FileNameGenerator ()).
                    MemoryCache (new WeakMemoryCache()).
                    DiscCacheSize (15000000);
            config = builder .Build ();
            ImageLoader.Init (config);

        } catch (Exception ex) {
            Common .HandleException (ex);
        }

    } 
```

好的。长话短说。现在的问题是——这个黑屏的根本原因是什么。这是来自启动活动还是来自应用程序类。以及我们如何解决它并避免形式显示这一点？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-13T19:28:10.427

在清单文件中的应用程序标签中添加您正在使用的背景主题，以防止出现黑屏。

主题.xml

```
<resources>
<!-- Base application theme is the default theme. -->
<style name="Theme" parent="android:style/Theme" />

<style name="Theme.MyAppTheme" parent="Theme">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowBackground">@drawable/my_app_background</item>

</style>
</resources> 
```

AndroidManifest.xml

```
....
<application
        android:name="@string/app_name"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.MyAppTheme"
         >
.... 
```

[在这里阅读为什么会出现黑屏](https://plus.google.com/+AndroidDevelopers/posts/VVpjo7KDx4H)![在应用启动时，Android 会显示一个简单的预览窗口（基于您的活动主题）作为对用户操作的即时响应。 然后，一旦完全加载，预览窗口就会与您的实际 UI 交叉淡入淡出。 为确保平滑的视觉过渡，您的活动主题应尽可能与您的完整 UI 匹配。 下图显示了如果处理不当，体验会如何不和谐。](../Images/938c3eeaa5ba229135dd6475893ff5bf.png)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-11-07T02:12:15.950

您看到的这个初始屏幕称为“预览”屏幕。您可以通过在主题中声明它来完全禁用它：

```
android:windowDisablePreview

<style name="Theme.MyTheme" parent="android:style/Theme.Holo">
    <!-- This disables the black preview screen -->
    <item name="android:windowDisablePreview">true</item>
</style> 
```

此处发布了有关如何处理此屏幕的说明：http: [//cyrilmottier.com/2013/01/23/android-app-launching-made-gorgeous/](http://cyrilmottier.com/2013/01/23/android-app-launching-made-gorgeous/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-25T07:58:28.353

将此行添加`AndroidManifest.xml`到启动器活动中：

`android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-16T10:25:30.010

您可以通过将图像转换为画笔（颜色）来解决此错误。

在可绘制文件夹中添加新文件 xml(splash_bg.xml) 文件，如下所示。

```
<?xml version="1.0" encoding="utf-8" ?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
   <item>
      <color android:color="@color/splash_bg_color"/>
   </item>
   <item>
        <bitmap
            android:src="@drawable/splash_screen"
            android:tileMode="disabled"
            android:gravity="center"/>
   </item>
</layer-list> 
```

现在添加一个新样式，并应用 splash_bg.xml 作为背景颜色。

```
<style name="Theme.SplashBg" parent="android:Theme">
    <item name="android:windowBackground">@drawable/splash_bg</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowContentOverlay">@null</item>
</style> 
```

将此新样式应用于您的主启动器活动或启动屏幕。

```
[Activity(Label = "label", MainLauncher = true, Theme = "@style/Theme.SplashBg")]
public class SplashScreenActivity : Activity 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T19:21:56.753

如果您在 onCreate 中调用一些“繁重的代码”，屏幕将显示为黑色，直到加载完成。您可能会考虑使用 AsyncTask 并使 onCreate 句柄 setContentView 等，并使 AsyncTask 句柄“繁重的代码”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-13T19:38:31.337

避免此问题的更好解决方案是使用 AsyncTask，这是我在其中一个 ListActivity 中使用的示例代码：

```
 private class YoutubeTask extends AsyncTask<URL, Integer, String> {
     protected void onPreExecute() {
            super.onPreExecute();
            mLoadingProgress.startAnimation(mDisappear);
        mLoadingProgress.setVisibility(View.GONE);
            showDialogProgress();
    }

     protected String doInBackground(URL... url) {

         youtubeData = VersionParser.readFromUrl(url[0]);;

        try {

            JSONObject jsono = new JSONObject(youtubeData);
            JSONObject feed = jsono.getJSONObject("feed");
            JSONArray entry = feed.getJSONArray("entry");

            for(int i = 0 ; i < entry.length() ; i++ ){

                JSONObject item = entry.getJSONObject(i);

                JSONArray AUTHOR = item.getJSONArray(TAG_AUTHOR);
                JSONObject Author = AUTHOR.getJSONObject(0);
                JSONObject author = Author.getJSONObject("name");
                String author_name = author.getString(TAG_TITRE);

                JSONObject Statistics = item.getJSONObject("yt$statistics");
                String Views = Statistics.getString(TAG_VIEWS);

                JSONObject Media = item.getJSONObject("media$group");

                JSONObject MediaTitle = Media.getJSONObject("media$title");
                String title = MediaTitle.getString(TAG_TITRE);

                JSONObject DURATION = Media.getJSONObject("yt$duration");
                String duration = DURATION.getString(TAG_DURATION);

                JSONArray Thumbinail = Media.getJSONArray("media$thumbnail");
                JSONObject IMAGE = Thumbinail.getJSONObject(0);
                String image = IMAGE.getString(TAG_CONTENT);
                String id = image.substring(22,33);

                 map = new HashMap<String, String>();

                    map.put(TAG_TITRE , title ); 
                    map.put(TAG_ID , id );
                    map.put(TAG_DURATION , duration );
                    map.put(TAG_IMAGE , image);
                    map.put(TAG_VIEWS , Views );
                    map.put(TAG_AUTHOR , author_name);

                   CURRENCY.add(map);
                }

        } catch (JSONException e) {

            e.printStackTrace();
        }
            return null;
        }

     @Override
        protected void onPostExecute(String result) { 

             dismisDialogProgress(); 
             mListView.setVisibility(View.VISIBLE);
            mListView.startAnimation(mAppear);
            mAdapter = new MAdapter(youtubeSearch.this , CURRENCY);
            mListView.setSelector(R.drawable.home_bg);
            mListView.setAdapter(mAdapter);

             } 
    } 
```

在 onCreate Methode 内部实现这个：

```
 @Override

    public void onCreate(Bundle savedInstanceState) {

        if (Build.VERSION.SDK_INT < 11)
        setTheme(android.R.style.Theme_Black_NoTitleBar);
    }
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    new YoutubeTask().execute(new URL("https://gdata.youtube.com/feeds/api/videos?q=Adele&max-results=15&v=2&alt=json"));
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-29T06:21:16.620

仅当您将活动用作启动画面时才会发生这种情况，如果您的应用程序不执行任何后台操作（例如调用 api 之类的东西），则使用 @maulikparmar 方法进行标准启动画面（谷歌推荐的方式）。但是对于活动方法，我只在我的闪屏活动中写了一个注释，这对我很有用

```
@SuppressLint("CustomSplashScreen")
public class SplashScreen extends AppCompatActivity {}
```

并且还在启动屏幕活动的主题（style.xml）中执行 android:windowDisablePreview = true 。

```
 <item name="android:windowDisablePreview">true</item>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-02T14:23:39.973

这里有一些值得深思的地方；也许您的应用程序*根本没有*相当大的初始化延迟；实际上，您可能正在**[等待即时运行服务](https://stackoverflow.com/questions/37126912/why-does-my-app-start-incredibly-slow-10s-at-first-run-showing-only-white-sc)**。

根据我的经验，这种情况的症状是您的应用程序在初始化时显示一个冗长的黑屏，但在调试时您发现您的`Application`/`Activity`的任何`onCreate`方法*都没有被调用*，而它是可见的。

# c# - 如何将所有图像从 c# 中的特定文件夹加载到图像列表中

> ID：14307130
> 
> 赞同：-3
> 
> 时间：2013-01-13T19:14:44.290
> 
> 标签：c#

如何`Images`从 c# 中的特定文件夹将所有内容加载到图像列表中？谢谢！

```
List<Texture2D> images = new List<Texture2D>();
string folderPath = "MyImages/";
for(int i= 0; i<Count; i++) { 
    try{  
        images.Add(Content.Load<Texture2D>(folderPath + i.ToString));}
    catch{break;}
} 
```

这可行，但我需要将文件名转换为 1 到 N。但我必须保留文件名（personImage 的名称）以供将来使用（用于识别输出）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:41:59.713

您可以使用 foreach，在这种情况下：（不要忘记使用 System.IO 添加）

在这里，将文件夹设置为 DirectoryInfo

```
DirectoryInfo directory = new DirectoryInfo(@"C:\"); 
```

要获得正确的文件，您必须指定类型，我使用的是 jpg，但可以是 png、bmp 等。

```
FileInfo[] Archives = directory.GetFiles("*.jpg"); 
```

现在，对于文件夹中的每个存档，它将添加到 imagelist

```
foreach (FileInfo fileinfo in Archives)
{
  imageList.Images.Add(Image.FromFile(fileinfo.FullName));
} 
```

我已经测试过，工作过。好吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:24:37.600

如果你的意思是图像路径，你可以这样尝试：

```
public List<String> GetAllImages(String directory)
{
    return Directory.GetFiles(directory, "*.jpg", SearchOption.AllDirectories).ToList();
} 
```

# java - Tapestry 5 - 在 Java 代码中动态生成 W eb 应用程序上下文文件夹中的文件 URL

> ID：14307134
> 
> 赞同：3
> 
> 时间：2013-01-13T19:15:36.783
> 
> 标签：java, tapestry

我在组件内显示静态图像资产，直到运行时我才知道该图像应该是什么，所以我需要动态生成 URL。这些图像都生活在`webapp/images/`

[我发现的文档](http://tapestry.apache.org/assets.html)对如何处理这个用例不是很清楚，但是在玩了之后我发现我可以在组件模板中动态构建 URL，如下所示：

```
<img src="${context:img/score/overall}/${imageFilename}" /> 
```

然后将显示哪张图片的逻辑放在组件类文件中：

```
public String getImageFilename() {
    // decide which image to display and return the filename
} 
```

所以这可行，但它不是最干净的解决方案。我真的不想将 URL 基连接到模板内的文件名 - 我更愿意在组件类中构造整个 URL，如下所示：

```
<img src="${imageUrl}" /> 
```

和

```
public String getImageURL() {
    // build URL somehow like "context:" + "filePath" in template
} 
```

所以我的问题是：`context: ...`模板中是否有等效的 Java 代码，它只是为我可以将文件路径附加到的 web appl 上下文文件夹生成字符串基本 URL？

通过阅读文档，我可以看到一些明显的 hacky 方法，例如使用所描述的方案手动构建基本 URL，或者`Asset`从 Web 应用程序上下文文件夹中注入已知的静态图像并调用`toClientURL()`以提取基本 URL。但似乎在 Java 中必须有一个很好的内置方法来做到这一点，特别是因为它可以免费用于模板扩展。

但是我可能会谷歌，我似乎无法在任何地方找到如何做到这一点！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T00:50:30.743

我认为这应该对你有用。（免责声明：我没有测试过）

```
@Inject
private AssetSource assetSource;

@Inject
private Locale locale;

public String getImageURL() {
    URL assetUrl = assetSource.getContextAsset("img/score/overall/" + getImageFilename(), locale).toURL();
    return assetUrl.toString();
} 
```

**编辑：**更新以反映霍华德的评论

# iphone - 在 UINavigationBar 上放置一个大徽标作为标题视图 - iOS

> ID：14307148
> 
> 赞同：5
> 
> 时间：2013-01-13T19:17:01.420
> 
> 标签：iphone, ios, ios5, uinavigationbar, customization

我已使用此代码在导航栏上成功添加了我的徽标；

```
UIImage *image = [UIImage imageNamed: @"top-logo"];
UIImageView *imageView = [[UIImageView alloc] initWithImage: image];

self.navigationItem.titleView = imageView; 
```

问题是我的标志的高度是**54 像素**，导航栏默认的高度是**44 像素**。徽标是故意设计为从导航栏底部溢出的，但我必须更改导航栏的边界才能做到这一点，而且我不想超出 Apple 的指南。但是我需要从导航栏溢出导航项的titleView的imageView。

此外，对于我的一个应用程序，我降低了导航栏的高度，当应用程序进入后台并返回时，导航栏的高度开始变得有趣（高度开始恢复正常，导致导航栏中出现黑色背景）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T19:31:03.970

这是一个类似情况的帖子。接受的答案使用 UIButton 而不是 imageview。

来自已接受答案的代码：

```
- (void)viewDidLoad {
  [super viewDidLoad];

  UIButton *logoView = [[[UIButton alloc] initWithFrame:CGRectMake(0,0,85,40)] autorelease];
  [logoView setBackgroundImage:[UIImage imageNamed:@"navBarLogo.png"] forState:UIControlStateNormal];
  [logoView setUserInteractionEnabled:NO];

  self.navigationItem.titleView = logoView;
} 
```

[TTLauncherView导航栏中的图像而不是标题](https://stackoverflow.com/questions/7557164/image-instead-of-title-in-navigation-bar-of-ttlauncherview)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-13T17:55:05.597

首先，在您的 -viewDidLoad 方法中，创建一个适合 NavigationBar 大小的 UIImageView。之后，您将徽标放入该 UIImageView 并将其设置为您的 titleView。代码如下：

```
UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,40,40)];
image.contentMode = UIViewContentModeScaleAspectFit;
[image setImage: [UIImage imageNamed:@"logo"]];
self.navigationItem.titleView = image; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T22:36:03.793

我一直在寻找类似的解决方案，但我尝试了一些不同的方法并且效果很好：

```
-(void)viewDidLoad
{

  [super viewDidLoad];

  //Set the place where you want your logo to appear on your navigation bar (just an example):

  UIImageView* imageView = [[UIImageView alloc] initWithFrame:CGRectMake(130, 20, 50,  54)];
  imageView.image = [UIImage imageNamed:@"yourImage@2x.png"];
  [self.navigationController.view addSubview:imageView];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-28T17:42:24.217

如果您只是在寻找一种将图像添加到导航栏的方法并且您正在使用 Swift，那么这就是您需要的代码：

```
override func viewDidLoad() {
    super.viewDidLoad()

    let imageView = UIImageView(image: UIImage(named: "your_logo"))
    navigationItem.titleView = imageView
} 
```

# android - 如何浏览 Emulator 的 SDCard？

> ID：14307149
> 
> 赞同：0
> 
> 时间：2013-01-13T19:17:03.777
> 
> 标签：android, android-sdcard

我正在尝试从我的模拟器访问 sdcard，但它没有显示任何文件： ![在此处输入图像描述](../Images/dfcd5a4c1e932b7771fe1fdc36f7dfff.png)

如您所见，它似乎是空的。

我试图检查 sdcard 是否已挂载，所以我放了代码来显示 sdcard 上还剩多少 MB，你可以看到调试，说它有 0.24GB 可用空间。

即使我尝试将文件推送到设备，它什么也没做。

发生了什么？我必须从设备上卸载 SD 卡吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:25:05.577

使用这种方式

去`mnt/sdcard`这个位置显示你的`sdcard`

代替 `sdcard`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T19:27:16.580

在 Android 4.2 环境中，对于初始用户帐户，外部存储可以在`/mnt/shell/emulated/0/`.

# jquery - 颜色框边框未正确显示

> ID：14307150
> 
> 赞同：0
> 
> 时间：2013-01-13T19:17:03.650
> 
> 标签：jquery, colorbox

我的颜色框边框未正确显示：

[http://www.mmrempen.com/test/test.html](http://www.mmrempen.com/test/test.html)

（单击其中一个图像条，将弹出视频）

如您所见，边框显示在顶部和左侧，但不在底部或右侧。我尝试更改 css 文件中的边框设置，但没有帮助。

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:26:53.447

试试这个 CSS 修复

对于 div id cboxLoadedContent

```
#cboxLoadedContent {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 5px solid #000000;
    height: 384px;
    width: 689px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T06:33:13.713

检查colorbox css中的图像路径....

因为如果您的页面在外部或根据文件夹结构，您需要输入“../”...

- 希望能帮助你。--- (iminfo.in)

# java - 如何在一行中编写这个匿名方法？

> ID：14307153
> 
> 赞同：0
> 
> 时间：2013-01-13T19:17:19.697
> 
> 标签：java, android, shortcut, anonymous

当我进行方法重载时，我总是碰到这些。如何在一行中编写第二种方法？`View.setText(text)`返回`void`，但我想`TextView`在它执行后返回`setText()`。
注意：我知道我可以“用两条语句来写”。问题是如何将其合二为一。

```
private ViewGroup getExpanableListChild() {
    return (LinearLayout) LayoutInflater.from(this).inflate(
            R.layout.list_checkbox, null);
}

private ViewGroup getExpanableListChild(String text) {
    return ViewUtil.getTextViewFromParent(getExpanableListChild()).setText(
            text);//compile error, can't return void.

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:24:25.163

您可以在这些情况下使用 Builder，但在这种特殊情况下我看不到重点。

例如：

```
return ViewUtil.getTextViewFromParent(getExpanableListChild()) //returns some kind of builder
       .setText(text) // returns builder
       .setColor(someColor) // another example, again returns builder
       .build(); // returns ViewGroup 
```

这与 SDK 中存在的策略相同，您可以在[`AlertDialog.Builder`](https://developer.android.com/reference/android/app/AlertDialog.Builder.html)其中构建`AlertDialog`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:37:56.787

正如其他人所解释的那样，您根本无法做到这一点，而无需更改实现`ViewGroup.setText()`以返回 a`ViewGroup`并将“文本”设置为您传递的任何内容。

这样做将是一种更具功能性的编程风格。Java 在设计上并不是一种自然的函数式语言，而 void 方法基本上是函数式风格的对立面——即它们有副作用（在这种情况下，在 ViewGroup 对象上设置“文本”）。

当调用 void 方法时，有必要进行调用，然后在后续行中对生成的、修改后的对象（在本例中返回它）执行某些操作。这只是命令式编程风格。

# javascript - 如何仅使用 javascript 捕获单击事件对象属性？

> ID：14307155
> 
> 赞同：1
> 
> 时间：2013-01-13T19:17:25.883
> 
> 标签：javascript

我使用 jQuery 编写了以下代码：

```
$('.status-infos').click( function (e) {
    var xx = $(this).attr('data-xx');
    alert(xx);
    return false;
  }); 
```

我们的网站主页将不再使用 jQuery，因此我需要仅使用 javascript 来做类似的事情。

我认为这是获取点击事件的一种方式：

```
document.getElementById('element').onclick = function(e){
  alert('click');
} 
```

但我怎样才能得到 xx 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:20:08.273

您可以使用：

`document.getElementsByClassName('status-infos')`

然后遍历该数组并使用..`onclick = function() {}`

用途：`element.getAttribute()`获取数据属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:21:33.667

现代浏览器的解决方案：

```
var els = document.querySelectorAll(".status-infos");
for (var i = 0; i < els.length; i++) {
    els[i].addEventListener("click", function() {
        var xx = this.getAttribute("data-xx");
        alert(xx);
        return false;
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T19:26:40.437

这是 IE8+ 的完整版本

[演示](http://jsfiddle.net/mplungjan/K9k95/)

```
function getElementsByClassName(className) {
if (document.getElementsByClassName) { 
  return document.getElementsByClassName(className); }
else { return document.querySelectorAll('.' + className); } }

window.onload=function() {
  var statinf = getElementsByClassName("status-infos");
  for (var i=0;i<statinf.length;i++) {
    statinf[i].onclick=function() {
      var xx = this.getAttribute('data-xx');
      alert(xx);
      return false;
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:22:11.963

使用[`addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)or [`attachEvent`(IE)](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)。

```
var elements = document.getElementByClassName('status-infos');

for(var i=0; i < elements.length; i++) {
   elements[i].addEventListener('click', function(e) {
    ...
    });
} 
```

[更多信息](https://stackoverflow.com/questions/3743446/attachevent-versus-addeventlistener)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T19:26:36.307

jQuery 总是让开发者变得懒惰。试试这个代码：

```
/* http://dustindiaz.com/rock-solid-addevent */
function addEvent(obj, type, fn) {
    if (obj.addEventListener) {
        obj.addEventListener(type, fn, false);
        EventCache.add(obj, type, fn);
    }

    else if (obj.attachEvent) {
        obj["e" + type + fn] = fn;
        obj[type + fn] = function() {
            obj["e" + type + fn](window.event);
        }
        obj.attachEvent("on" + type, obj[type + fn]);
        EventCache.add(obj, type, fn);
    }
    else {
        obj["on" + type] = obj["e" + type + fn];
    }
}
var EventCache = function() {
    var listEvents = [];
    return {
        listEvents: listEvents,
        add: function(node, sEventName, fHandler) {
            listEvents.push(arguments);
        },
        flush: function() {
            var i, item;
            for (i = listEvents.length - 1; i >= 0; i = i - 1) {
                item = listEvents[i];
                if (item[0].removeEventListener) {
                    item[0].removeEventListener(item[1], item[2], item[3]);
                };
                if (item[1].substring(0, 2) != "on") {
                    item[1] = "on" + item[1];
                };
                if (item[0].detachEvent) {
                    item[0].detachEvent(item[1], item[2]);
                };
                item[0][item[1]] = null;
            };
        }
    };
}();
/* http://www.dustindiaz.com/getelementsbyclass */
function getElementsByClass(searchClass,node,tag) {
    var classElements = new Array();
    if ( node == null )
        node = document;
    if ( tag == null )
        tag = '*';
    var els = node.getElementsByTagName(tag);
    var elsLen = els.length;
    var pattern = new RegExp("(^|\\s)"+searchClass+"(\\s|$)");
    for (i = 0, j = 0; i < elsLen; i++) {
        if ( pattern.test(els[i].className) ) {
            classElements[j] = els[i];
            j++;
        }
    }
    return classElements;
}
var statuss=getElementsByClass('status-infos');
for (var i=0;i<statuss.length;i++){
addEvent(statuss[i], 'click', function (e) {
    var xx = this.getAttribute('data-xx');
    alert(xx);
    return false;
  });
} 
```

[演示](http://jsfiddle.net/mMhXV/1/show)| [演示源](http://jsfiddle.net/mMhXV/1/)

# html - 重置 Select Dropdown 的默认样式

> ID：14307156
> 
> 赞同：2
> 
> 时间：2013-01-13T19:17:32.300
> 
> 标签：html, css, macos, select

我正在创建一个网站，无论我做什么，当我在我的 Mac 上查看它时，我都无法设置选择下拉菜单的样式。我能做些什么？是否有一个脚本可以重置默认样式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-07-06T12:18:03.940

这对我有用：

```
select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}

select::-ms-expand {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-07-05T16:28:47.153

要重置所有默认值，您可以在代码中简单地添加此 css。

```
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

字体： http: [//meyerweb.com/eric/tools/css/reset/reset.css](http://meyerweb.com/eric/tools/css/reset/reset.css)

# graphics - 如何检查线段和从与水平方向成一定角度的点发出的线射线之间的交点？

> ID：14307158
> 
> 赞同：24
> 
> 时间：2013-01-13T19:17:39.107
> 
> 标签：graphics, geometry

给定一条线段，即两个点 (x1,y1) 和 (x2,y2)，一个点 P(x,y) 和一个角度 theta。我们如何确定这条线段和从 P 发出的与水平面成θ角的线射线是否相交？如果它们相交，如何找到相交点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-14T12:16:16.560

让我们标记点**q** = ( *x1* , *y1* ) 和**q** + **s** = ( *x2* , *y2* )。因此**s** = ( *x2* - *x1* , *y2* - *y1* )。然后问题看起来像这样：

![](../Images/b9df120c7a34ab4595b34913bd92ee90.png)

令**r** = (cos θ, sin θ)。**那么通过p**的射线上的任何点都可以表示为**p** + *t* **r**（对于标量参数 0 ≤ *t*），而线段上的任何点都可以表示为**q** + *u* **s**（对于标量参数 0 ≤ *u* ≤ 1）。

如果我们可以找到*t*和*u*使得**p** + *t* **r** = **q** + *u* **s** ，则两条线相交：

![](../Images/22c5668a3897fb66e44a7081187cf2bf.png)

有关如何找到该点（或确定不存在该点）的信息，请参[见此答案。](https://stackoverflow.com/a/565282/68063)

如果 0 ≤ t 且 0 ≤ u ≤ 1，则您的线段与射线相交。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-21T18:13:28.457

这是其他答案中给出的算法的 C# 代码：

```
 /// <summary>
    /// Returns the distance from the ray origin to the intersection point or null if there is no intersection.
    /// </summary>
    public double? GetRayToLineSegmentIntersection(Point rayOrigin, Vector rayDirection, Point point1, Point point2)
    {
        var v1 = rayOrigin - point1;
        var v2 = point2 - point1;
        var v3 = new Vector(-rayDirection.Y, rayDirection.X);

        var dot = v2 * v3;
        if (Math.Abs(dot) < 0.000001)
            return null;

        var t1 = Vector.CrossProduct(v2, v1) / dot;
        var t2 = (v1 * v3) / dot;

        if (t1 >= 0.0 && (t2 >= 0.0 && t2 <= 1.0))
            return t1;

        return null;
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-12T21:05:35.697

感谢加雷斯的精彩回答。这是用 Python 实现的解决方案。随意删除测试并复制粘贴实际功能。我已经按照这里出现的方法的描述，[https://rootllama.wordpress.com/2014/06/20/ray-line-segment-intersection-test-in-2d/](https://rootllama.wordpress.com/2014/06/20/ray-line-segment-intersection-test-in-2d/)。

```
import numpy as np

def magnitude(vector):
   return np.sqrt(np.dot(np.array(vector),np.array(vector)))

def norm(vector):
   return np.array(vector)/magnitude(np.array(vector))

def lineRayIntersectionPoint(rayOrigin, rayDirection, point1, point2):
    """
    >>> # Line segment
    >>> z1 = (0,0)
    >>> z2 = (10, 10)
    >>>
    >>> # Test ray 1 -- intersecting ray
    >>> r = (0, 5)
    >>> d = norm((1,0))
    >>> len(lineRayIntersectionPoint(r,d,z1,z2)) == 1
    True
    >>> # Test ray 2 -- intersecting ray
    >>> r = (5, 0)
    >>> d = norm((0,1))
    >>> len(lineRayIntersectionPoint(r,d,z1,z2)) == 1
    True
    >>> # Test ray 3 -- intersecting perpendicular ray
    >>> r0 = (0,10)
    >>> r1 = (10,0)
    >>> d = norm(np.array(r1)-np.array(r0))
    >>> len(lineRayIntersectionPoint(r0,d,z1,z2)) == 1
    True
    >>> # Test ray 4 -- intersecting perpendicular ray
    >>> r0 = (0, 10)
    >>> r1 = (10, 0)
    >>> d = norm(np.array(r0)-np.array(r1))
    >>> len(lineRayIntersectionPoint(r1,d,z1,z2)) == 1
    True
    >>> # Test ray 5 -- non intersecting anti-parallel ray
    >>> r = (-2, 0)
    >>> d = norm(np.array(z1)-np.array(z2))
    >>> len(lineRayIntersectionPoint(r,d,z1,z2)) == 0
    True
    >>> # Test ray 6 --intersecting perpendicular ray
    >>> r = (-2, 0)
    >>> d = norm(np.array(z1)-np.array(z2))
    >>> len(lineRayIntersectionPoint(r,d,z1,z2)) == 0
    True
    """
    # Convert to numpy arrays
    rayOrigin = np.array(rayOrigin, dtype=np.float)
    rayDirection = np.array(norm(rayDirection), dtype=np.float)
    point1 = np.array(point1, dtype=np.float)
    point2 = np.array(point2, dtype=np.float)

    # Ray-Line Segment Intersection Test in 2D
    # http://bit.ly/1CoxdrG
    v1 = rayOrigin - point1
    v2 = point2 - point1
    v3 = np.array([-rayDirection[1], rayDirection[0]])
    t1 = np.cross(v2, v1) / np.dot(v2, v3)
    t2 = np.dot(v1, v3) / np.dot(v2, v3)
    if t1 >= 0.0 and t2 >= 0.0 and t2 <= 1.0:
        return [rayOrigin + t1 * rayDirection]
    return []

if __name__ == "__main__":
    import doctest
    doctest.testmod() 
```

# java - 如何加密视频流

> ID：14307162
> 
> 赞同：-1
> 
> 时间：2013-01-13T19:18:09.677
> 
> 标签：java, video, encryption, stream, cypher

> **可能重复：**
> [视频文件加密？](https://stackoverflow.com/questions/9496447/encryption-of-video-files)

我想使用流密码加密视频流并将其发送到客户端 PC，客户端 PC 可以在其中即时播放。

问题：我可以为此目的使用哪些类型的流密码？
我正在使用java进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:51:32.817

通过 SSL 隧道传输流。

如果您使用某种形式的 HTTP 流式传输（例如 HLS），那么制作该 HTTPs 应该是微不足道的。

# javascript - 更改具有相同类的所有元素的背景颜色

> ID：14307163
> 
> 赞同：12
> 
> 时间：2013-01-13T19:18:11.213
> 
> 标签：javascript, html

我有一个链接和一个具有匹配类的表格行。单击链接时，我想更改具有相同类的行的背景颜色。对于每种情况，只有一行具有相同的类。

这是我目前的功能。

```
 <script type="text/javascript">

function check(x) {
    elements = document.getElementsByClassName(x);
    for (var i = 0; i < elements.length; i++) {
        elements[i].bgColor="blue";
    }
}
</script> 
```

这是表格行脚本的一部分：

```
<tr class="alt1 12">
<td width="50" height="55">
<img src="iPhone/statusicon/12.png" alt="" id="forum_statusicon_12" border="0"></td>
<td>
<div class="forumtitle">
<a class="forumtitle 12" href="forumdisplay.php?f=12" action="async" onclick="check(this.className.split(' ')[1])">News and Current Events</a></div>
</td>
<td width="25">
<div class="forumarrow"><img src="iPhone/chevron.png" alt="" border="0"></div>
</td>
</tr> 
```

表格行有两个类，我需要第二个（数字）来解决。当前代码给出错误“指定了无效或非法的字符串”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T19:27:41.217

你有几个错误。您将类与 id 混合在一起，并且该`class`属性实际上是`className`

```
<script type="text/javascript">

function check(x) {
    elements = document.getElementsByClassName(x);
    for (var i = 0; i < elements.length; i++) {
        elements[i].style.backgroundColor="blue";
    }
}

</script>

<a href="#" class="first" onclick="check(this.className)">change first row</a>
<a href="#" class="second" onclick="check(this.className)">change second</a>
<!--        FIX ( id -> class )                FIX ( class -> className ) -->
<table>
<tr class="first">
<td>test1</td>
</tr>

<tr class="second">
<!--FIX ( id -> class ) -->
<td>test2</td>
</tr>
</table> 
```

检查这个[jsfiddle](http://jsfiddle.net/UacXh/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T19:26:42.503

你也可以在没有 jQuery 的情况下使用 querySelectorAll() 轻松完成：

```
<script type="text/javascript">

function check(selector)
{
    var elements = document.querySelectorAll(selector);
    for (var i = 0; i < elements.length; i++) {
        elements[i].style.backgroundColor = "blue";
    }
}
</script>

<a href="#" class="first" onclick="check('.' + this.className)">change first row</a>
<a href="#" id="second" onclick="check('#' + this.id)">change second</a>

<table>
<tr class="first">
    <td>test1</td>
</tr>

<tr id="second">
    <td>test2</td>
</tr> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-13T19:21:22.013

jQuery 简化了它：

```
$(".button").click(function(){
 var class = $(this).attr("data-class");
 var color = $(this).attr("data-color");
 $("."+class).css("background-color",color);
}); 
```

`.button`是要应用到按钮的类，`data-class`为要更改背景颜色的类添加，并且`data-color`是要更改为的颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-16T03:31:44.270

有同样的问题。需要更改纯 js 中所有元素的背景（深色主题）。由于一些奇怪的错误，无法在页面上添加 jQuery（此文档需要“TrustedHTML”分配）

```
elements = document.querySelectorAll("*");
for (var i = 0; i < elements.length; i++) {
    elements[i].style.backgroundColor="#777";
    elements[i].style.color="#ddd";
} 
```

# java - 如何将类的对象文件与源文件链接

> ID：14307165
> 
> 赞同：0
> 
> 时间：2013-01-13T19:18:25.830
> 
> 标签：java, c++, mingw32

我想知道我是否可以在不包括类源文件的情况下将源代码文件与类的目标文件链接和编译。

或者

就像在 Java 中一样，我可以在不提供源代码的情况下将已编译的 *.class 文件和该类的文档提供给朋友，并且他可以根据需要包含该类，而无需知道真正的源代码。

我可以用 C++ 做确切的事情吗？如何 ？

仅供参考：我正在使用 MinGW。

我很新，所以这可能看起来像一个愚蠢的问题（但仍然没有愚蠢的问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:54:37.230

在 C++ 中，您可以只生成可执行文件（Windows 中的 .exe，Linux 中通常没有扩展名）或库文件（.lib 或 .a）或共享库（.dll 或 .so），具体取决于您想要实现的目标.

如果您要提供库，则还必须提供带有类声明的头文件。如果你不想透露太多细节，你可以有一个“实现”类，它只是一个指向头文件中实现的指针，真正的实现只有你作为所有者才能使用来源。

有关更多信息，您应该按照 Thomas Matthews 的建议查找“PIMPL”——它是“指向 IMPlementation 类的指针”的缩写。基本上，您的“公共”类只是一个提供您希望其他人看到的功能的外壳，其中的实现类完成了所有艰苦的工作。

简单的例子

在你的头文件中：

```
// Forward declaration of the implementation class. 
class double_it_impl;

// Class that stores an integer, and doubles it each time you 
// call doubling().
class Public_double_it
{
  public:
    public_double_it(int x);    // COnstructor. 

    int doubling();        // Function d

  private:
     double_it_impl *pImpl;
}; 
```

在您的源头文件或私有头文件中，我们声明了实际的实现：

```
class double_it_impl
{
  public:
    double_it_impl(int x) : m_x = x; {};
    int doubling()  { m_x *= 2; return m_x; }

}

public_double_it::public_double_it(int x)
{
    pImpl = new public_double_it(x);
}

int public_double_it::doubling()
{
   return pImpl->doubling();
} 
```

现在你看不到实现类包含什么或它是如何工作的——当然，这是一个非常琐碎的例子，但我希望它传达了这个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:24:50.637

你可以给他们 *.class 但他们可以被反编译。

大多数库都是使用类和生成的 Javadoc 提供的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T19:52:50.543

您可以将该类编译成库或 dll 或共享库并提供给您的朋友。

他们需要一个定义接口的头文件。

另见 PIMPL 成语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T20:01:47.200

是的，您可以提供已编译的目标文件和文档，其他人可以将 .o（或 .obj）文件链接到他们的代码中。如何做到这一点的确切细节因编译器和开发环境而异。如果您使用的是 g++，您只需使用以下命令行：

```
g++ -c source.cpp 
```

这将创建一个 .o 文件，然后您（或其他任何人）可以将其与其他 .o 文件链接

```
g++ main.o source.o 
```

其他编译器也有类似的选项。阅读帮助文件和其他文档以获取有关如何创建目标文件的说明。

对于大量函数和/或类，您应该考虑创建一个库文件。这些可以静态或动态链接。如果您想了解如何创建自己的库文件，我建议您在 Web 上搜索更多信息。

# tinymce - Plone 4.3b1 中的 TinyMCE 1.3b8 链接？

> ID：14307167
> 
> 赞同：3
> 
> 时间：2013-01-13T19:18:35.223
> 
> 标签：tinymce, plone

我发现自己无法通过 Plone 4.3b1 中的 Products.TinyMCE 版本添加链接（“a”标签）。切换到非可视编辑器并手动添加链接可以正常工作，但使用 TinyMCE 中的链链接图标会弹出一个插入/编辑弹出窗口，该窗口似乎没有任何地方可以输入目标地址。有一个“搜索”文本字段，但在其中输入文本不会启用“确定”按钮。

这是我所看到的屏幕截图： ![截屏](../Images/d367525a257f8556e0fbe2475f79b321.png)

有谁知道这是否是一个已知问题，或者我是否完全错过了如何输入链接，或者对此有任何启示？谢谢。

更新：问题似乎是弹出窗口的选项卡没有隐藏相关的 div。当我使用 Firebug 将 div external_panel 从 class="hide" 切换到 class="show" 时，会出现丢失的材料；我还必须使用 Firebug 从 OK 按钮中删除 disabled="disable" 才能按下它。显示片段的屏幕截图如下。我使用了统一安装程序的 tgz 文件；该安装程序的内容与 Mac 的二进制安装程序之间是否可能存在差异？

问题出现在由执行的普通香草全新安装上

*   - 解压 4.3b1 统一安装程序 tgz 文件，
*   - 从安装程序的目录运行命令 ./install.sh --target=/home/me/P4.3b1
*   - 去 /home/me/P4.3b1/zinstance
*   - 运行命令 bin/instance fg
*   - 在浏览器中访问 localhost:8080，
*   - 创建一个 Plone 实例并以管理员身份登录
*   - 立即去编辑网站的首页。

站点设置页面的版本概览如下：版本概览

*   - 克隆 4.3b1 (4302)
*   - CMF 2.2.7
*   - Zope 2.13.19
*   - Python 2.7.3（默认，2012 年 8 月 1 日，05:16:07）[GCC 4.6.3]
*   - PIL 1.7.7（枕头）

![截屏](../Images/7dd25b8d7ba5996519b86008fad00aee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:43:15.243

我要说的是跨浏览器兼容性问题。它在 Firefox 中看起来像这样并且按预期工作：

![在此处输入图像描述](../Images/c5626453d8e17e6bfc986f3817749780.png)

# r - 带有 gWidget 的多个图形窗口

> ID：14307169
> 
> 赞同：0
> 
> 时间：2013-01-13T19:18:45.357
> 
> 标签：r, gwidgets

包的`ggraphics()`构造函数`gWidgets`打开一个绘图窗口。是否可以打开多个绘图窗口并控制我们在哪个窗口中绘制图形？（帮助`ggraphics()`说：*当存在多个图形设备时，单击一个窗口将使当前设备成为当前设备*。但我想用 R 代码控制当前设备，而不是用鼠标）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:22:28.887

您可以拥有多个`ggraphics`实例，每个实例都有自己的设备编号来执行您想做的所有事情。如果需要，`ggraphicsnotebook`小部件为此打包了一个界面。除了指定当前设备的常用编程方式之外，还有关于单击窗口的内容。

# sql - 选择最大日期

> ID：14307172
> 
> 赞同：0
> 
> 时间：2013-01-13T19:19:03.477
> 
> 标签：sql

我有一个包含 3 列的表：

*   `id (int)`
*   `name (String)`
*   `date_created (Date)`

如何根据`date_created`列选择添加到数据库的姓氏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:20:54.947

SQL 服务器：

```
SELECT TOP 1 name
FROM dbo.TableName
ORDER BY date_created DESC 
```

MySQL：

```
SELECT name
FROM dbo.TableName
ORDER BY date_created DESC
Limit 1 
```

`TOP 1 WITH TIES`如果要在多行具有相同的`date_created`最大值时包含所有数据，则可以在 T-SQL 中使用。在 MySQL 上，您需要使用子查询。[**这是**](http://searchoracle.techtarget.com/answer/TOP-n-WITH-TIES-in-MySQL)一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:22:34.150

试试这个：

```
SELECT name FROM table
WHERE date_created  = (SELECT MAX(date_created) FROM table) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T19:28:59.280

如果你有一个自动递增的（SQL Server 中的身份）id，那么你可以使用它来代替：

```
select name
form table
order by id desc
limit 1 
```

当然，`limit 1`取决于数据库。它将`select top 1`在 SQL Server、`where rownum = 1`Oracle 和`fetch first 1 row`db2 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:29:00.343

您还可以使用子查询：

```
select t1.id, t1.name, t1.date_created
from yourtable t1
inner join
(
  select max(date_created) MaxDate
  from yourtable
) t2
  on t1.date_created = t2.maxdate 
```

这将返回所有具有`max(created_date)`

# php - 更改 Wordpress 中所有 img 标签的 html 结构

> ID：14307173
> 
> 赞同：3
> 
> 时间：2013-01-13T19:19:14.317
> 
> 标签：php, regex, wordpress, function, preg-replace

我有一个 Wordpress 博客，正在尝试实现[foresight.js](https://github.com/adamdbradley/foresight.js)图像脚本。简而言之，我需要针对所有帖子图像，`src, width, & height`用属性交换`data-src, data-width, & data-height`属性。然后我需要复制图像行并将其包装在`<noscript>`标签中。这是我试图让 Wordpress 生成/创建的结构：

```
<img data-src="wordpress/image/url/pic.jpg" data-width="{get width of image with PHP & pass-in that value here} data-height="{get height of image with PHP and pass-in that value here}" class="fs-img">
<noscript>
    <img src="wordpress/image/url/pic.jpg">
</noscript> 
```

[更多信息可以在 foresight.js 的网站上找到](http://www.cdnconnect.com/docs/foresightjs/img-element)。

我已经搜索了 Wordpress 法典，我能找到的最佳途径是使用过滤器（即*'get_image_tag'*和*'image_tag'*）来修改 Wordpress 为每个图像输出的 html。我在想这些选项之一应该可以工作，或者我可以用正则表达式进行一些模式匹配*（我知道，不理想）*，输入 a`preg_replace`然后将其注入`the_content`过滤器。

我已经尝试了其中一些选项，但无法使任何选项起作用。有人可以提供一些帮助吗？

### 'get_image_tag' 尝试：

*在网上找到了这个特定的，但它需要修改以适应我的逻辑（见上面的结构）......无法理解`preg_replace`数组自己在做什么。*

```
<?php function image_tag($html, $id, $alt, $title) {
    return preg_replace(array(
        '/'.str_replace('//','\/\/',get_bloginfo('url')).'/i',
        '/\s+width="\d+"/i',
        '/\s+height="\d+"/i',
        '/alt=""/i'
    ),
    array(
        '',
        '',
        '',
        alt='"' . $title . '"'
    ),
    $html);
}
add_filter('get_image_tag', 'image_tag', 0, 4);
?> 
```

### 另一个“get_image_tag”尝试：

```
<?php function get_image_tag($id, $alt, $title, $align, $size='full') {
    list($width, $height, $type, $attr) = getimagesize($img_src);
    $hwstring = image_hwstring($width, $height);

    $class = 'align' . esc_attr($align) . ' size-' . esc_attr($size) . ' wp-image-' . $id;
    $class = apply_filters('get_image_tag_class', $class, $id, $align, $size);

    $html = '<img src="' . esc_attr($img_src) . '" alt="' . esc_attr($alt) . '" title="' . esc_attr($title).'" data-width="' . $width . '" data-height="' . $height . '" class="' . $class . ' fs-img" />';
    $html = apply_filters( 'get_image_tag', $html, $id, $alt, $title, $align, $size);

    return $html;
}
?> 
```

### 模式匹配尝试：

尝试在这个上创建我自己的正则表达式，但不确定它是否正确。

```
<?php function restructure_imgs($content) {
    global $post;
    $pattern = "/<img(.*?)src=('|\")(.*?).(bmp|gif|jpeg|jpg|png)(|\")(.*?)>/i";

    list($width, $height, $type, $attr) = getimagesize($2$3.$4$5);
    $hwstring = image_hwstring($width, $height);

    $replacement = '<img$1data-src=$2$3.$4$5 title="'.$post->post_title.'" data-width="'.$width.'" data-height="'.$height.'" class="fs-img"$6>';
    $content = preg_replace($pattern, $replacement, $content);
    return $content;
}
add_filter('the_content', 'restructure_imgs');
?> 
```

不幸的是，这些示例中的任何一个都无法正常工作。任何帮助或分享您预先编写的脚本/功能将不胜感激！感谢您帮助学生学习！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:33:32.700

您的方法是*在*页面渲染之前，我认为在 wordpress 中并非不可能，但是您可以在使用 javascript 渲染页面*之后执行相同的操作。*我尝试使用 jQuery 来做到这一点，并且 ti 似乎可以工作：

```
<!-- Example image -->
<img src="http://fotografia.deagostinipassion.com/resources/photos/2/2n/ilCielo.JPG" width="200px" height="300px">

<!-- Import jquery -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>

<script>

$(document).ready(function () {

    $("img").wrap(function() {

        $(this).wrap(function() {

            var newimg = '<img data-src="' + $(this).attr('src') + '" data-width="' + $(this).attr('width') + '" data-height="' + $(this).attr('height') + '" class="fs-img">';
            return newimg;  

        });

        return '<noscript>';
    });

});

</script> 
```

如果您需要更多帮助，请问我。

# jquery - 将 ajax 调用中的值传递给表单提交

> ID：14307175
> 
> 赞同：0
> 
> 时间：2013-01-13T19:19:24.503
> 
> 标签：jquery, ruby-on-rails

我有一个表单，html 元素通过 ajax 调用添加到其中，我希望能够将添加的 html 元素的值传递给表单提交。细节：

我有一个简单的form_for：

```
<%= form_tag(:controller => "operations", :action => "new") do %>
<%= select_tag "operation", options_for_select(%w{a s m d} )%> 
```

根据用户对选择标签的操作，我会

```
$.get(url, params,function(response){
}, 'script')}); 
```

ajax 调用返回一个 html radio_button_tag，即调用的 url 类似于：

```
<div class="modifer">
<%= radio_button_tag elid, 'no' %>
</div> 
```

用户现在可以选择单选按钮，我想将此值作为表单提交的一部分传递。我真的不明白如何将 radio_button_tag (elid) 的值作为表单提交的一部分传递。

希望对此作出一些澄清

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:28:59.577

假设所有表单元素都有一个`name`属性，您可以使用序列化整个表单`$('#formID').serialize()`

API 参考：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

然后，您将使用 ajax 提交：

```
$.post( '/path/to/server/', $('#formID').serialize(), function ( response){
   /* do something with response if needed*/
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T04:08:27.890

您是否将 .modifier div 插入到表单中？如果是这样，它将与表格一起提交。

# mysql - MySQL ID PRIMARY KEY AUTO_INCREMENT 不按顺序排列

> ID：14307179
> 
> 赞同：4
> 
> 时间：2013-01-13T19:20:10.687
> 
> 标签：mysql

我无法让我的数据库保持井井有条 我希望设置为 an 的 ID 字段`INT PRIMARY KEY AUTO_INCREMENT`保持数字顺序。当我删除数据库中的所有条目时，问题就来了。在删除条目之前，一切都按预期顺序排列，在删除而不是按数字顺序从较小的整数开始后，它将始终按降序排列。有人可以解释是什么原因造成的。

```
+----+------------+----------+---------+----------------+-----------+------------+-----------+---------+
| id | employeeID | date     | timeIn  | jobDescription | equipType | unitNumber | unitHours | timeOut |
+----+------------+----------+---------+----------------+-----------+------------+-----------+---------+
|  1 |          2 | 01/13/13 | 1:19 pm | Test1          | Dozer     | 1D         |        98 | 1:20 pm |
|  2 |          2 | 01/13/13 | 1:20 pm | Test2          | Dozer     | 1D         |        98 | 1:20 pm |
+----+------------+----------+---------+----------------+-----------+------------+-----------+---------+ 
```

删除所有行后：

```
+----+------------+----------+---------+----------------+-----------+------------+-----------+---------+
| id | employeeID | date     | timeIn  | jobDescription | equipType | unitNumber | unitHours | timeOut |
+----+------------+----------+---------+----------------+-----------+------------+-----------+---------+
|  4 |          2 | 01/13/13 | 1:22 pm | Test2          | Dozer     | 1D         |        98 | 1:22 pm |
|  3 |          2 | 01/13/13 | 1:22 pm | Test1          | Dozer     | 1D         |        98 | 1:22 pm |
+----+------------+----------+---------+----------------+-----------+------------+-----------+---------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:24:47.330

请记住，如果`ORDER BY`您的查询中没有子句`SELECT`，则顺序实际上是不确定的，您不能也不应该依赖它处于任何特定顺序。

我在这里看到的是`Test2`用 插入的`id=4`，假设您首先插入了该`Test1`行，那么您`auto_increment`的工作正常。

如果你只是做了类似的事情`SELECT * FROM thistable`，不要指望行被排序`id ASC`。添加一个`ORDER BY`明确的子句。

```
SELECT * FROM thistable ORDER BY id ASC 
```

由于这两个新行之间的所有其他列具有相同的值，因此 MySQL 选择在没有显式的情况下排序的任何列`ORDER BY`都没有任何区别。

# c# - 在进程启动之前为其分配优先级

> ID：14307183
> 
> 赞同：0
> 
> 时间：2013-01-13T19:20:48.440
> 
> 标签：c#

我有应该启动的特定数量的进程（C# .exe）。我如何根据它们的优先级启动它们。

我知道 Process.PriorityClass 的东西，但它并不是真的有用，因为它只在进程启动后分配优先级。

我在这里有这段代码（还没有比较优先级）但它不起作用，因为进程没有运行所以我不能为它们分配优先级：

```
Process process1 = new Process();    
Process process2 = new Process();
Process process3 = new Process();

process1.StartInfo.FileName = "proc1";

process2.StartInfo.FileName = "proc2"'

process3.StartInfo.FileName = "proc3";

process1.PriorityClass = ProcessPriorityClass.AboveNormal;

process2.PriorityClass = ProcessPriorityClass.BelowNormal;

process3.PriorityClass = ProcessPriorityClass.High;

process2.Start();

process2.WaitForExit();

process1.Start();

process1.WaitForExit();

process3.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:30:30.133

您可以使用进程文件名创建一个字典，然后使用 Linq 查询通过 ProcessPriorityClass 和 OrderBy 对它们进行排序。然后你只需执行它们迭代列表并使用值分配正确的优先级。

```
public void StartProcessesByPriority(Dictionary<String, ProcessPriorityClass> values)
{
    List<KeyValuePair<String, ProcessPriorityClass>> valuesList = values.ToList();

    valuesList.Sort
    (
        delegate(KeyValuePair<String, ProcessPriorityClass> left, KeyValuePair<String, ProcessPriorityClass> right)
        {
            return left.Value.CompareTo(right.Value);
        }
    );

    foreach (KeyValuePair<String, ProcessPriorityClass> pair in valuesList)
    {
        Process process = new Process();
        process.StartInfo.FileName = pair.Key;
        process.Start();

        process.PriorityClass = pair.Value;

        process.WaitForExit();
    }
} 
```

# clojure - Clojure 的 `core.logic` 中的目标排序

> ID：14307187
> 
> 赞同：7
> 
> 时间：2013-01-13T19:20:56.953
> 
> 标签：clojure, logic-programming, clojure-core.logic

[以下 Clojure 代码](https://gist.github.com/4525736)用于`core.logic`以两种不同的顺序解决具有相同目标的相同逻辑问题。这种排序选择导致一个快速完成而另一个挂起。

```
(use `clojure.core.logic)

;; Runs quickly.  Prints (1 2 3).
(clojure.pprint/pprint (run* [q] (fresh [x] (== x [1,2,3]) 
                                            (membero q x))))

;; Hangs
(clojure.pprint/pprint (run* [q] (fresh [x] (membero q x) 
                                            (== x [1,2,3])))) 
```

是否有避免此问题的通用解决方案或常见做法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T21:01:56.123

以下是我的理解：

使用`core.logic`，您希望尽早减少搜索空间。如果将`membero`约束放在首位，则运行将从搜索空间开始，并在约束`membero`产生的失败时回溯。`==`但是这个`membero`空间是巨大的，因为既不统一`q`也不`x`统一，或者至少是有界的。

但是如果你把`==`约束放在第一位，你直接`x`与统一`[1 2 3]`，现在的搜索空间`membero`显然与 的元素有界限`x`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T23:50:44.937

如果你要使用`membero`这个问题没有通用的解决方案。使用新变量调用`membero`将导致它生成所有（读取、无限）可能的列表，这些列表`q`是其成员。当然，大于 3 的列表不适用 - 但由于您已经使用过`run*`，它会继续盲目地尝试大于 3 的列表，即使每个列表都会失败。

可以使用约束基础结构在更新版本的 core.logic中编写更好的版本`membero`，但是如何做到这一点的细节可能会在未来几个月内发生变化。直到有一个可靠的公共 api 来定义约束，你才会陷入困扰 Prolog 的那种微妙的排序和非终止问题。

# c++ - Libharu 使用 windows.h 创建有关 pngtest.c 的错误

> ID：14307188
> 
> 赞同：1
> 
> 时间：2013-01-13T19:20:57.193
> 
> 标签：c++, windows, winapi, libpng, libharu

[我在这里](https://stackoverflow.com/questions/14303851/cannot-use-libharu-because-cannot-find-the-reference-of-zlib#comment19870745_14303851)问过一个易于解决的 libharu 问题；但不幸的是，当我解决第一个问题时，出现了第二个问题。
我在 Windows 7 中使用带有 GNU GCC C++ 编译器 (MingGW) 的 Codeblocks IDE。我编译了 libharu.a、libpng.a 和 zlib.a，并以正确的顺序将它们链接到我的主项目。因此，它编译得很好并创建了我的 .pdf
但是，当我添加

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
LPSTR lpCmdLine, int nCmdShow)
{
//Insert further code here...
} 
```

在我的代码中，它给出了大量与 libpng 相关的错误，特别是 pngtest.c。当我简单地将“int WINAPI WinMain(...)”与“int main”互换时，一切运行正常（当然，除了它在终端中运行）并创建正确的 .pdf 文件。
我的日志文件：

```
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x13b): undefined reference to `png_get_error_ptr'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x236): undefined reference to `png_create_read_struct'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x256): undefined reference to `png_set_error_fn'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x262): undefined reference to `png_create_info_struct'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x272): undefined reference to `png_create_info_struct'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x293): undefined reference to `png_set_read_fn'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x2b4): undefined reference to `png_set_read_status_fn'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x2c8): undefined reference to `png_read_info'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x314): undefined reference to `png_get_IHDR'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x33c): undefined reference to `png_get_PLTE'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x358): undefined reference to `png_get_rowbytes'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x368): undefined reference to `png_malloc'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x39c): undefined reference to `png_read_rows'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x3b7): undefined reference to `png_read_end'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x3cb): undefined reference to `png_free'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x3ef): undefined reference to `png_destroy_read_struct'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x54c): undefined reference to `png_set_PLTE'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x5a0): undefined reference to `png_set_IHDR'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x5bc): undefined reference to `png_set_read_status_fn'
C:\Libs\libpng-1.5.13\libpng.a(pngtest.o):pngtest.c:(.text+0x11d): undefined reference to `png_error' 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:18:13.807

要在使用 gcc 时删除控制台，只需将 -mwindows 添加到链接器标志。WinMain() 不是必需的。

# vb.net - VB.NET - DocumentText 更新后滚动到 WebBrowser 控件的底部

> ID：14307190
> 
> 赞同：0
> 
> 时间：2013-01-13T19:21:23.140
> 
> 标签：vb.net

因此，我查看了有关 stackoverflow 的其他几篇文章，但似乎没有一篇文章对我有用。我要做的就是让 WebBrowser 控件在我以编程方式更改 webbrowser1.documenttext 属性中的某些内容后自动向下滚动到最底部。

我已经尝试了以下所有方法，但它们都不起作用......我实际上将它们全部放在完全相同的代码行中。

```
 WebBrowser1.ScrollBarsEnabled = True
    WebBrowser1.Document.Body.ScrollIntoView(False)

    WebBrowser1.Document.Window.ScrollTo(New Point(WebBrowser1.Height, WebBrowser1.Height))

    WebBrowser1.Document.Window.ScrollTo(WebBrowser1.Height, WebBrowser1.Height)
    WebBrowser1.AutoScrollOffset = New Point(WebBrowser1.Height, WebBrowser1.Height) 
```

在我的 WebBrowser1 控件中，我所做的一切都是从它开始设置，然后放在最后，在中间，我所做的一切都被复制并粘贴了以下内容......

```
 <html><body>
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   <div style="color: red;">blah blah</div><Br />
   </body></html> 
```

大约 30 次……但我什么也做不了。上面的代码都没有做任何事情。

我错过了什么？

VS 2005 SP1 - VB.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:36:40.687

您的问题可能是您尝试在更新之前访问 DOM。触发代码以在 DocumentCompleted 事件中将正确的元素滚动到视图中，如下所示：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    WebBrowser1.DocumentText = <html><body>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;'>blah blah</div><Br/>
                                   <div style='color: red;' id="lastElement">blah blah</div><Br/>
                                   </body></html>.ToString()
End Sub

Private Sub WebBrowser1_DocumentCompleted(sender As Object, e As WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
    Dim lastGuy= WebBrowser1.Document.GetElementById("lastElement")
    If lastGuy<> Nothing Then
        lastGuy.ScrollIntoView(True)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T10:53:15.637

```
wb1.Navigate("javascript:window.scroll(0,document.body.scrollHeight);") 
```

# .net - 在 Mono 上使用 Z3 托管 API

> ID：14307192
> 
> 赞同：10
> 
> 时间：2013-01-13T19:21:32.247
> 
> 标签：.net, mono, z3

我们有一个使用 Z3 API v4.0 的 .NET 项目。我们希望能够在 Mono 上编译和运行该项目。

该项目使用 MonoDevelop 编译得很好。但是，当我们运行或调试程序时，出现如下异常

```
System.DllNotFoundException: z3.dll
  at (wrapper managed-to-native) Microsoft.Z3.Native/LIB:Z3_mk_context_rc (intptr)
  at Microsoft.Z3.Native.Z3_mk_context_rc (IntPtr a0) [0x00000] in <filename unknown>:0
  at Microsoft.Z3.Context..ctor () [0x00000] in <filename unknown>:0
  at <StartupCode$Nqueens>.$Nqueens..cctor () [0x00000] in /path/to/file:15 
```

如果重要的话，我们使用 Mac OS X 和 Mono 3.0.2/MonoDevelop 3.0.5。

*有人有在 Mono 上使用 Z3 API 的经验吗？*

这听起来像是一个奇怪的想法，但我们的情况描述如下。我们有一门使用 Z3 的课程，所有实验室计算机都安装了 Windows 和 .NET 框架。但是，一些在自己的计算机（Linux、Mac）上工作的学生应该能够编译和运行该项目。

* * *

**概括：**

感谢@Leo 的建议，我可以在 MonoDevelop 下运行该项目，只需进行一些更改：

1）创建一个文件并在标签`App.config`下添加以下信息：`configuration`

```
<dllmap dll="z3.dll" target="libz3.dylib" os="osx" cpu="x86"/> 
```

2）`libz3.dylib`从 Mac OS X 发行版复制（或从源代码构建新版本）并确保在编译项目时将共享库和`Microsoft.Z3.dll`复制到输出文件夹（`bin/Debug`打开模式）。`Debug`为此，我们`ItemGroup`在项目文件中手动添加到标记：

```
<None Include="libz3.dylib">
  <CopyToOutputDirectory>Always</CopyToOutputDirectory>
  <Visible>False</Visible>
</None> 
```

`libz3.so`Linux 上的过程应该类似。

我们用不同的理论尝试了各种例子。到目前为止没有发生错误或异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T19:52:22.677

我们从未考虑过这种情况。我们通常告诉 Linux/OSX 用户使用其他 API：C/C++、Python、OCaml 或 Java。Java API 还不是正式版本的一部分，但它会在 v4.3.2 中。它与 .Net API 非常相似。如果他们正在编写 C# 代码，那么迁移到 Java API 应该很容易。您可以使用以下方式获取当前候选版本的源代码

```
git clone https://git01.codeplex.com/z3 -b rc 
```

它相当稳定。为了编译它，我们使用

```
cd z3
python scripts/mk_make.py
cd build
make 
```

如果您使用 F#，您还可以考虑 Christoph 正在开发的新 OCaml API（`ml-ng`位于[http://z3.codeplex.com](http://z3.codeplex.com)的分支）。它与 .Net API 一样好。

一个更复杂的选择是破解/修改 Z3 make 文件生成器 ( `scripts/mk_util.py`) 以在 Linux 和 OSX 上构建 .Net API。我对 Mono 不熟悉，但应该可以。我猜你必须使用在 Z3 Java API 中使用的相同技巧。需要更改的一件事是要加载的共享库（`libz3.so`在 Linux 和`libz3.dylib`OSX 上）而不是 Z3 DLL。

# ruby-on-rails - 未定义 nil:NilClass 的 total_count 方法

> ID：14307195
> 
> 赞同：-3
> 
> 时间：2013-01-13T19:21:36.427
> 
> 标签：ruby-on-rails, ruby

嗨，我正在尝试使用 total_count 方法来计算我所有的产品并显示数量

```
@products.total_count 
```

这工作得很好，它给了我产品的总数，甚至可以使用搜索结果但是当我点击一个产品时它说

> nil:NilClass 的未定义方法“total_count”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:32:13.103

> 但是，当我单击产品时，它会显示`undefined method`total_count' 为 nil:NilClass`

您将查看`products#show`并通常设置一个`@product`实例变量。正如@99miles 所说，`@products`此时不存在。

[出于性能原因，](http://railscasts.com/episodes/23-counter-cache-column)我建议使用计数器缓存列（在产品上） 。

# c - 如何使用 C 套接字 ping

> ID：14307203
> 
> 赞同：8
> 
> 时间：2013-01-13T19:22:17.847
> 
> 标签：c, windows, sockets, ping, icmp

*   编译器：代码：：块（GNU GCC）
*   平台：Windows(x86)
*   包括：winsock.h winsock2.h（ws2_32 也已链接）

我目前正在尝试编写一个程序，该程序将读取包含 IP 地址列表的文本文件并分别 ping 每个 IP 地址。如果主机响应 ping，则主机的 IP 地址将被复制到用户指定的辅助文件中。毫无疑问，这是我第一次使用 C 的套接字库，我找不到关于如何使用 C 进行 ping 的好教程。根据我对我确实找到的几个教程的理解。我需要在 IP 数据报中包含一个 ICMP 标头，它是一个包含 ICMP 类型、代码和校验和的结构。但是我不知道该怎么做，我应该自己声明结构还是在头文件中声明？我假设它在标题中，但是教程在声明它的确切位置方面相互矛盾。我厌倦了包括 icmp.h 和 netinet/icmp。

```
 struct echo_request
    {
        char type; // Type
        char code; // Code
        short checksum; // Checksum
        short id; // Identification
        short seq; // Sequence
        int time; // Time
        char data[16]; // Data
    }; 
```

我认为我可能能够摆脱它，但我什至无法编译我的程序，因为我的编译器说 in_cksum()(checksum generator) 是未定义的。

总结一下我的问题，我应该包含哪些头文件，如何创建 ping 数据包，我是否使用了正确的校验和生成器功能，是否应该将 ping 定向到端口 80，以及我使用的套接字应该是 RAW 还是 DGRAM？

这是我到目前为止所拥有的，请注意我故意省略了错误检查。

```
 int socket_descriptor = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP);

    struct sockaddr_in address; //Initialize address struct
    memset(&address, 0, sizeof(address)); //Clear address struct

    //Declare address
    address.sin_family = AF_INET;
    address.sin_addr.s_addr = inet_addr(ipaddress);
    address.sin_port = htons(80);

    //Bind socket to address
    bind(socket_descriptor, (struct sockaddr *)&address, sizeof(address));

    //Create packet
    struct echo_request packet; //See above for declaration of struct
    memset(packet.data, 1, 16);
    packet.type = 8; //ECHO_REQUEST
    packet.code = 0;
    packet.time = gettime();
    packet.checksum = 0;
    packet.checksum = in_cksum(packet, sizeof(packet)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T18:55:09.807

如果您不必从头开始执行 ping，并且只需要 Windows 解决方案，我会支持 Anton 对 IcmpSendEcho 的建议。如果一定要实现ping，看[POCO](http://github.com/pocoproject/poco) ICMP包是怎么实现的。它是可移植的代码，在 Windows 上运行良好。

关于具体问题，以下是答案：

> 我应该包含哪些头文件

```
#include <winsock2.h> 
```

> 如何创建 ping 数据包

有关IPv4 数据包的示例，请参阅[ICMPv4PacketImpl::initPacket() 。](https://github.com/pocoproject/poco/blob/poco-1.9.0/Net/src/ICMPv4PacketImpl.cpp#L125-L144)

> 我是否使用正确的校验和生成器功能

不适用于窗户。有关校验和函数的示例，请参见[ICMPPacketImpl::checksum() 。](https://github.com/pocoproject/poco/blob/poco-1.9.0/Net/src/ICMPPacketImpl.cpp#L76-L100)

> 是否应该将 ping 定向到端口 80

不，对于 ICMP，没有端口之类的东西。请参阅[ICMP 是否使用特定端口？](https://learningnetwork.cisco.com/thread/39021)

> 我使用的套接字应该是 RAW 还是 DGRAM

它应该是RAW。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T19:41:22.567

看起来您想要一个真正的解决方案，而不仅仅是为了它而重新实现 PING。

我建议使用 IP 帮助程序（WinXP 之前的系统上的 ICMP.dll），特别是[IcmpSendEcho](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366050%28v=vs.85%29.aspx)（或其增强版本，`IcmpSendEcho2`, `IcmpSendEcho2Ex`，用于异步操作）。

MSDN上有一个“ping”主机的完整示例。这可能是一个很好的起点。

更新：对于 GCC (mingw)，与 -liphlpapi 链接。

# r - 如何在ggplot中反转点大小？

> ID：14307205
> 
> 赞同：11
> 
> 时间：2013-01-13T19:22:28.167
> 
> 标签：r, ggplot2

请帮我解决这个问题。我需要将正值表示为小点，将负值表示为大点。如果我在大小之前使用减号，则点大小是正确的，但图例正在改变：

```
df=data.frame(x=rnorm(20),y=runif(20),z=rnorm(20))
ggplot(df,aes(x=x,y=y))+geom_point(aes(size=-z)) 
```

所以不适合。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T19:38:01.167

一种解决方案是使用`scale_size()`并设置您自己的`breaks`，然后`labels`在相反的方向。更改了`z`值的范围以获得更好的表示。

```
df=data.frame(x=rnorm(20),y=runif(20),z=(-13:6))
ggplot(df,aes(x=x,y=y))+geom_point(aes(size=-z))+
  scale_size("New legend",breaks=c(-10,-5,0,5,10),labels=c(10,5,0,-5,-10)) 
```

![在此处输入图像描述](../Images/4c5657576c37558f0c724f0c7f297b16.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-20T18:52:02.657

有点晚了，但更简单的方法就是添加`trans='reverse'`到 scale_size。

例子：

```
df=data.frame(x=rnorm(20),y=runif(20),z=z=(-13:6))
ggplot(df,aes(x=x,y=y))+
geom_point(aes(size=z)) +
scale_size(trans = 'reverse') 
```

[![具有反向大小比例的示例图](../Images/8890021e7611cc37dc73131e1e677c75.png)](https://i.stack.imgur.com/k469m.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-22T02:08:30.800

虽然这个问题非常古老 - 并且有一个公认的答案 - 来自 baptiste 的评论建议使用`last_plot() + scale_size(range = c(5,1)) + guides(size = guide_legend(reverse=TRUE))`非常优雅和简单。对于我需要产生与 OP 相同结果的数据，这需要零修改。

# r - 传递一个带前导零的数字来运行

> ID：14307207
> 
> 赞同：5
> 
> 时间：2013-01-13T19:22:29.897
> 
> 标签：r

我正在尝试编写一个具有如下参数的函数：

```
myfunction<-function(id){
print(paste(id, ".", "csv", sep=""))
} 
```

当 id 值是这样的 009 时，它会将其打印为 9.csv 而不是 009.csv。

我试过这个：

```
id<-as.character(id) 
```

这是行不通的。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T19:26:48.987

使用例如`sprintf()`：

```
myfunction <- function(id) {
    sprintf("%03d.csv", id)
} 
```

这使

```
R> cat(myfunction(9), "\n")
009.csv 
R> cat(myfunction(199), "\n")
199.csv 
R> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T23:07:29.070

尽管您已经接受了@Dirk 的回答...

问题是您将输入作为数字传递。对于 R，`009`计算结果为`9`：

```
> 009
[1] 9 
```

所以当你跑的时候`myfunction(009)`，它真的跑了`myfunction(9)`。你得到“9.csv”作为你的输出应该不足为奇。

相反，您应该将输入作为字符传递：“009”：

```
> myfunction("009")
[1] "009.csv" 
```

# c# - 树视图项目选择跳转到页面顶部

> ID：14307210
> 
> 赞同：0
> 
> 时间：2013-01-13T19:22:42.103
> 
> 标签：c#, asp.net

当我选择我的 asp.net 树视图复选框节点时，它会自动回发，导致网页跳转到页面顶部。如何防止这种情况发生？我遇到了这个，但它在 vb.net 中。[Vb.net 等价物](http://forums.asp.net/t/1187714.aspx/1)。我正在使用 c#。

**c# 代码**

```
 void TreeViewAddItems_TreeNodeExpanded(object sender, TreeNodeEventArgs e)
        {
             ........
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:48:04.537

如果您想尝试您提到的帖子中的 VB.net 方法，只需`ScriptManager`以相同的方式使用：

```
ScriptManager scriptManager = ScriptManager.GetCurrent(this.Page);
ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType, "selectNode", ("var elem = document.getElementById(\'" 
                + (tree.ClientID + "_SelectedNode\');var node = document.getElementById(elem.value);node.scrollIntoView(true);elem.scrollL" +
                "eft=0;")), true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:41:02.953

这是因为您的代码在服务器上运行，所以当用户单击展开按钮时，它正在发出服务器请求，然后重新呈现页面。页面的重新呈现会导致滚动重置到顶部。我怀疑您是否希望每次用户展开节点时都发出整页请求。您最好使用客户端脚本从服务器请求数据并将其动态放入树中。

# php - 从 PHP 中的套接字流中读取单个字节

> ID：14307213
> 
> 赞同：3
> 
> 时间：2013-01-13T19:22:51.360
> 
> 标签：php, sockets, bytearray, byte

```
$data = socket_read($this->socket, 5);

    $counter = strlen($data); 
    for($i = 0; $i < $counter; ++$i) { 
        $char = (int)$data[$i]; 
        echo "\nByte $i: $char\n"; 
    } 
```

客户端向服务器发送两个字节，即使我读取 5，它仍然只收到 2。问题是字节读取为 0。它没有正确读取它。如何读取实际的字节/字节数组。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:43:20.760

如果客户端只发送两个字节，为什么要五个？尝试使用[`socket_recv()`](http://php.net/manual/en/function.socket-recv.php)来获取读取的字节的显式返回值。

# java - AppEngine：恢复备份后缺少索引

> ID：14307214
> 
> 赞同：1
> 
> 时间：2013-01-13T19:22:55.257
> 
> 标签：java, google-app-engine, indexing, restore

我正在从 Java 应用程序备份到谷歌云存储，然后将我的备份恢复到另一个 Java 应用程序。

一切正常，但索引不会自动重建，因此一些查询失败：

```
Internal Server Error: no matching index found. 
```

我从来没有在原始数据存储上手动创建索引，所以我猜它们是在添加实体时自动创建的，但这不是由备份过程触发的。

假设我知道要索引哪些实体的哪些字段（我可以从原始部署的应用程序中看到它们） -**恢复备份后触发索引创建的最佳方法是**什么？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:43:29.123

[我在这里](https://developers.google.com/appengine/docs/java/config/indexconfig)找到了答案，将 datastore-indexes.xml 添加到应用程序中，重新部署，等待索引建立，现在它正在工作。

我现在担心的是，当我重新部署到生产环境时会发生什么，即使没有必要，它是否会重建我的所有索引？

但这是另一天的问题，我猜......

# mysql - MySQL - Help me construct this query

> ID：14307215
> 
> 赞同：-1
> 
> 时间：2013-01-13T19:22:57.447
> 
> 标签：mysql, sql, relational-database

I have a relational DB that I can't think of how to form this query.

Here's the info

Table1

```
id name
1  Mike

```

Table2

```
id table_1_id value      setting
1  1          something  setting1
2  1          something2  setting2
2  1          something3  setting3

```

Currently, this is my sql query

```
SELECT *  FROM Table1
JOIN Table2 on Table2.table_1_id = Table1.id 
```

What this outputs is something like this

```
id name table_1_id value      setting
1  Mike 1          something1 setting1
1  Mike 1          something2 setting2
1  Mike 1          something3 setting3

```

Is it possible to construct this in such a way to return these results so I can export it to a CSV file?

```
id name table_1_id something1 something2 something3
1  Mike 1          setting1   setting2   setting3

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:27:43.960

```
SELECT
    Table1.*,
    something1Table.setting AS something1,
    something2Table.setting AS something2,
    something3Table.setting AS something3
FROM Table1
JOIN Table2 AS something1Table ON something1Table.table_1_id = Table1.id AND something1Table.value = 'something'
JOIN Table2 AS something2Table ON something2Table.table_1_id = Table1.id AND something2Table.value = 'something2'
JOIN Table2 AS something3Table ON something3Table.table_1_id = Table1.id AND something3Table.value = 'something3' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:26:08.733

You need a conditional aggregation:

```
select table1.id, table1.name,
       max(case when value = 'something1' then setting end) as setting1,
       max(case when value = 'something2' then setting end) as setting2,
       max(case when value = 'something3' then setting end) as setting3
from table1 join
     table2
     on table1.id = table2.id
group by table1.id, table1.name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T19:52:38.397

This type of data transformation is known an a *pivot* but MySQL does not have a pivot function. So you will want to replicate it using an aggregate function with a `CASE` expression.

If you know the the number of values ahead of time, then you can hard-code your query similar to this:

```
select t1.id, 
  t1.name,
  max(case when t2.value = 'something' then t2.setting end) as setting1,
  max(case when t2.value = 'something2' then t2.setting end) as setting2,
  max(case when t2.value = 'something3' then t2.setting end) as setting3
from table1 t1
left join table2 t2
  on t1.id = t2.table_1_id
group by t1.id, t1.name; 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/b8633/6)

But if you have an unknown number of values that you want to transform into columns, then you can use a [prepared statement to generate dynamic sql](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html).

The query would be similar to this:

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when t2.value = ''',
      value,
      ''' then t2.setting end) AS `',
      value, '`'
    )
  ) INTO @sql
FROM  table2;

SET @sql = CONCAT('SELECT t1.id, 
                    t1.name, ', @sql, ' 
                  FROM table1 t1
                  left join table2 t2
                    on t1.id = t2.table_1_id
                  group by t1.id, t1.name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/b8633/7)

The result of both versions is:

```
| ID | NAME | SOMETHING | SOMETHING2 | SOMETHING3 |
---------------------------------------------------
|  1 | Mike |  setting1 |   setting2 |   setting3 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:35:20.440

GROUP_CONCAT may be of use. It doesn't give you exactly what you want, because it would put the concatenated values into a single field. But depending on what you're actually trying to accomplish, perhaps you can work around that. The advantage of the GROUP_CONCAT is that it can handle any number of table2 rows per table1 row, whereas the conditional aggregation above hardwires having three entries (which may well be what you want).

```
SELECT table1.*, 
    GROUP_CONCAT(value) AS value_group,
    GROUP_CONCAT(setting) AS setting_group 
FROM table1
INNER JOIN table2
ON table2.table_1_id = table1.id 
```

returns

```
id,person,value_group,setting_group
1,Mike,"something1,something2,something3","setting1,setting2,setting3" 
```

# r - 在 R 或 winbugs 中绘制拟合值与观察值

> ID：14307216
> 
> 赞同：0
> 
> 时间：2013-01-13T19:23:13.223
> 
> 标签：r, plot, line, winbugs

我想绘制拟合值与观察值，并希望用直线显示拟合优度。但是，我不想使用`abline()`，因为我没有使用`lm`命令计算拟合值，因为我使用的模型`R`不包括在内。我计算了系数并用它们来计算拟合值。那么，我该怎么做才能在 R 或 winbugs 中获得这样的情节？

这就是我想要的

![在此处输入图像描述](../Images/5fa8fa89e95e3e458528b378da40600a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:09:13.817

仍然没有提供数据，但也许这个使用该`curve`函数的简单示例将通知该过程：

```
x <- 1:10
y <- 2+ 3*(1:10) + rnorm(10)
plot(1:10, y)
curve( 2+3*x, 0, 10,  add=TRUE) 
```

![在此处输入图像描述](../Images/c67027fa19942356cc684ae166e3f4fe.png)

新 R 用户请注意。表达式`y_i = 1 - xbeta + delta_i + e_i`在 R 中会失败，部分原因是 x 和 beta 没有被运算符分隔。但是，如果您确实了解 R 的矩阵语法，即使“X”是多维的，它也可能是一个非常紧凑的表达式。所有 htis 都取决于我们迄今为止缺乏的细节。

# php - 使用 php 图像跟踪技巧在电子邮件中显示图像

> ID：14307219
> 
> 赞同：0
> 
> 时间：2013-01-13T19:23:34.837
> 
> 标签：php

我正在创建一个时事通讯系统，它会在打开电子邮件时跟踪所有类型的信息。

我从一个看起来像的图像开始

```
<p><img src="http://xxx.com/newsletterInfo.php?newsletter=12&userid=234" width="314" height="20" alt="Cancel Newsletter Subscription"></p> 
```

然后在 newsletterInfo.php 文件中，我将 url 回显到图像中。

我认为这不是这样做的方式吗？

有人可以指出我的问题在哪里。

谢谢

**更新**

电子邮件的发送：

```
 $name = stripslashes($fetchquery["name"]);
            $email = stripslashes($fetchquery["email"]);

            $content = $_POST["maincontent"];
            $subject = $_POST["subject"];
            $message = "<html><head><title>".$subject."</title></head><body>";
            $message .= str_replace('{name}', $name, $content);
            $message .= '<p><img src="http://xxx.com/newsletterInfo.php?newsletter='.$id.'" width="314" height="20" alt="Cancel Newsletter Subscription"></p>';
            $message .= "</body></html>";

            $headers  = 'MIME-Version: 1.0' . "\r\n";
            $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
            $headers .= 'From: Username <email@here.com>' . "\r\n";

            // Mail it
            mail($email, $subject, $message, $headers); 
```

在信息页面上，我这样做了：

```
if(isset($_GET["newsletter"])) {

    $query = $pdo->prepare("UPDATE newsletter SET opened=`opened` +1 WHERE id=:id");
    $query->execute(array(':id' => $_GET["newsletter"]));
    $query_num = $query->rowCount();

    if($query_num > 0){
        echo 'http://xxx.com/cancel.png';
    } 
```

正如您所看到的，电子邮件使用 mail() 函数发送时事通讯，然后图像在哪里我已经放置了一个 php 文件的 url，在这个文件中询问变量，如果它设置了它然后回显图像 url 然后将数据输入数据库，所有这些都 100% 有效，因为数据库正在更新。

存在的问题是图像已损坏。

如果您右键单击并转到 newsletterInfo.php，则会显示 url。

我认为这根本不是这样做的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:34:50.960

`src`属性应该指向一个图像。您`src`指向包含 URL 的（动态）文本文件，而不是实际图像。`newsletterInfo.php`应该输出一个图像，而不是它的 URL。

可能的解决方案：

1.  最简单的方法：在 内进行重定向`newsletterInfo.php`，如下所示：

    ```
    header('Location: url_to_the_image.jpg'); 
    ```

    （将文件名替换为您当前正在回显的内容并删除该回显）

2.  困难的方法：将图像作为文件打开，发送正确的标题，然后回显图像。（不是一个好主意）

# forms - extjs 表单字段中复杂结构化数据的弹出窗口

> ID：14307220
> 
> 赞同：1
> 
> 时间：2013-01-13T19:23:47.953
> 
> 标签：forms, extjs

我需要构建以下表单域。让我们以在一个表单中我有多个字段的情况为例。其中两个是“姓氏”和“名字”。当这些字段将显示 seperatley 时，我想要一个在完成时显示的单个字段，而不是经典的方式，就像一个文本字段，其值为 e 两个值的串联（即“michael jackson”）。当我单击该字段时，将弹出一个窗口（如选择器日期），其中包含一个包含两个字段的表单。

不幸的是，我不知道从哪里开始：

*   我应该派生什么类
*   我应该如何将值存储在表单中（两个隐藏值或只是字段的序列化值）。

在这个选择器弹出窗口中，我可能有 5-6 个字段的复杂结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:02:38.173

我会扩展 Ext.form.field.Picker。在 createPicker() 方法中，您可以创建所需的任何字段组合和组件。

回复：数据存储，我会序列化一个字段中的值。然后，您可以以相同的方式处理读取和提交（并且您以后可以随时操作数据。

这是我不久前做的一个例子：jsfiddle.net/existdissolve/wMcQk/

# javascript - 从jQuery中获取变量值

> ID：14307233
> 
> 赞同：-5
> 
> 时间：2013-01-13T19:25:12.697
> 
> 标签：javascript, jquery

有什么方法可以提取 jQuery 中使用的变量的值，以便我们可以在 JavaScript 函数中使用它

```
<script>
var val;
$(document).ready(function() {$('.nav a').click(function(event) 
{event.preventDefault();
val=$(this).index();

if(val==0){

$('#hide_main').hide();
$('.main_BSNS').animate({opacity:"show",height:"400px"},'slow')                                             

                    }//if val==0 ends here

                else if(val==1){

                    $('#hide_main').hide();
                    $('.main_ACTNT').animate({opacity:"show",height:"400px"},'slow')                                                

                    }

                else if(val==2){

                    $('#hide_main').hide();
                    $('.main_devp').animate({opacity:"show",height:"400px"},'slow')                                             

                    }

            });

        });
function getCookie(c_name){
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
x=x.replace(/^\s+|\s+$/g,"");
if (x==c_name)
{
return unescape(y);
}
}
}

function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function checkCookie()
{
var username=getCookie("BSNS");
if (username!=null && username!="")
{
$('#hide_main').hide();
$('.main_BSNS').animate({opacity:"show",height:"400px"},'slow')
}

else
{
alert(val);
if (username!=null && username!="")
{
setCookie("BSNS",username,365);
$('#hide_main').hide();
$('.main_BSNS').animate({opacity:"show",height:"400px"},'slow')
}
}
}   
</script> 
```

现在我希望这个 checkCookie() 函数被调用，但警报总是显示一个未定义的值（正如许多用户预测的那样）但我无法找到解决方案并编写这些 cookie ......（最后我至少成功地将我的代码放在这个网站上:-)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:30:52.753

尝试修复 myFunction 后面缺少括号导致的语法错误。然后这将起作用：

```
<input type="button" id="mybutton" value="click me" />

<script>

var x;
$(document).ready(function(e) {
    x=5;
});

function myFunction(){
    alert(x);
}

$('#mybutton').click(myFunction);

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:28:25.477

像这样的东西应该可以工作，`x`只需要是一个全局变量：

```
<script>
var x;
$(document).ready(function(e){    
    x=5;
});

function myFunction(){    
    alert(x);
}

myFunction();
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T19:30:21.867

jQuery 是 Javascript，它只是 Javascript 变量的范围问题。

使变量成为全局变量，然后您也可以从函数中访问它：

```
var x;

$(document).ready(function(e){    
    x = 5;
});

function myFunction() {    
    alert(x);
} 
```

但是，`ready`事件在 entore 文档加载后运行，因此该值仅在事件处理程序运行后可用。如果在此之前调用该函数，变量的值仍然是未定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:26:53.353

这只是 javascript 范围规则。在函数内部定义的 x 在外部不可用。您要么需要将该值传递给 myFunction，要么需要在 myFunction 可以看到的范围内定义 x。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T19:36:22.137

多种方式：

```
var x; // may be initiated with a value
$(document).ready(function(e){    
    x = 5;
}); 
```

或者

```
$(document).ready(function(e){    
    window.x = 5;
}); 
```

然而，ready 事件必须在值在变量中之前触发。如果您直接在代码中请求它，您将得到`undefined`.

我建议在准备好的事件中做**所有事情。**然后你也可以访问你的变量。

```
var x;
$(document).ready(function(e){    
    x=5;
    myFunction(); // call it here or later
});

function myFunction(){    
    alert(x);
} 
```

# email - 服务器以特定时间间隔自动发送邮件

> ID：14307234
> 
> 赞同：-1
> 
> 时间：2013-01-13T19:25:20.280
> 
> 标签：email, c#-4.0, triggers

我正在寻找一些代码，我可以从我的网站发送邮件。

我希望用户在我的网站上注册，能够在用户定义的特定时间自动发送电子邮件。我需要 asp.NET 中的触发机制，以便它触发用户指定的确切日期和时间

除了上述声明之外的任何建议/方法也受到欢迎。

***我已经找到了解决问题的办法，恳请版主删除帖子。谢谢***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:29:25.940

Asp.Net 不是执行计划任务的正确框架。
您*可以*将 Asp.Net 用于允许用户创建“任务”、设置时间间隔甚至电子邮件内容的 Web 界面。
但是 - 发送电子邮件的过程可能应该使用[任务调度程序](http://weblogs.asp.net/jgalloway/archive/2005/10/24/428303.aspx)来完成......

[这是一个帖子](https://stackoverflow.com/questions/390307/windows-service-vs-scheduled-task)，可以为您指明正确的方向...

# python - 更新 SqlAlchemy ORM 中的行

> ID：14307238
> 
> 赞同：10
> 
> 时间：2013-01-13T19:25:47.287
> 
> 标签：python, sqlalchemy

我正在尝试从数据库中获取一行，修改该行并再次保存。
一切都使用 SqlAlchemy

我的代码

```
from sqlalchemy import Column, DateTime, Integer, String, Table, MetaData
from sqlalchemy.orm import mapper
from sqlalchemy import create_engine, orm

metadata = MetaData()

product = Table('product', metadata,
    Column('id', Integer, primary_key=True),
    Column('name', String(1024), nullable=False, unique=True),

)

class Product(object):
    def __init__(self, id, name):
        self.id = id
        self.name = name

mapper(Product, product)

db = create_engine('sqlite:////' + db_path)
sm = orm.sessionmaker(bind=db, autoflush=True, autocommit=True, expire_on_commit=True)
session = orm.scoped_session(sm)

result = session.execute("select * from product where id = :id", {'id': 1}, mapper=Product)
prod = result.fetchone() #there are many products in db so query is ok

prod.name = 'test' #<- here I got AttributeError: 'RowProxy' object has no attribute 'name'

session .add(prod)
session .flush() 
```

不幸的是它不起作用，因为我正在尝试修改 RowProxy 对象。如何以 SqlAlchemy ORM 方式执行我想要的操作（加载、更改和保存（更新）行）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T17:11:46.197

我假设您的意图是使用[Object-Relational API](http://mapfish.org/doc/tutorials/sqlalchemy.html#object-relational-api)。因此，要更新 db 中的行，您需要通过从表记录中加载映射对象并更新对象的属性来执行此操作。

请参阅下面的代码示例。请注意，我添加了用于创建新映射对象并在表中创建第一条记录的示例代码，最后还有用于删除记录的注释代码。

```
from sqlalchemy import Column, DateTime, Integer, String, Table, MetaData
from sqlalchemy.orm import mapper
from sqlalchemy import create_engine, orm

metadata = MetaData()

product = Table('product', metadata,
    Column('id', Integer, primary_key=True),
    Column('name', String(1024), nullable=False, unique=True),

)

class Product(object):
    def __init__(self, id, name):
        self.id = id
        self.name = name
    def __repr__(self):
        return "%s(%r,%r)" % (self.__class__.name,self.id,self.name)

mapper(Product, product)

db = create_engine('sqlite:////temp/test123.db')
metadata.create_all(db)

sm = orm.sessionmaker(bind=db, autoflush=True, autocommit=True, expire_on_commit=True)
session = orm.scoped_session(sm)

#create new Product record:
if session.query(Product).filter(Product.id==1).count()==0:

    new_prod = Product("1","Product1")
    print "Creating new product: %r" % new_prod
    session.add(new_prod)
    session.flush()
else:
    print "product with id 1 already exists: %r" % session.query(Product).filter(Product.id==1).one()

print "loading Product with id=1"
prod = session.query(Product).filter(Product.id==1).one()
print "current name: %s" % prod.name
prod.name = "new name"

print prod

prod.name = 'test'

session.add(prod)
session.flush()

print prod

#session.delete(prod)
#session.flush() 
```

PS SQLAlchemy 还提供[SQL 表达式 API](http://mapfish.org/doc/tutorials/sqlalchemy.html#sql-expression-api)，允许直接处理表记录而无需创建映射对象。在我的实践中，我们在大多数应用程序中都使用了 Object-Relation API，有时当我们需要高效地执行低级数据库操作（例如通过一次查询插入或更新数千条记录）时，我们会使用 SQL 表达式 API。

SQLAlchemy 文档的直接链接：

*   [对象关系教程](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html)
*   [SQL 表达式语言教程](http://docs.sqlalchemy.org/en/rel_0_8/core/tutorial.html)

# iphone - 用 if 语句隐藏状态栏？

> ID：14307240
> 
> 赞同：0
> 
> 时间：2013-01-13T19:25:54.493
> 
> 标签：iphone, ios, cocoa-touch

我的应用程序中有一个二维码阅读器。阅读器扫描代码后，会将应用程序带到调查页面。我正在尝试让调查页面隐藏状态栏。这是我的代码：

```
- (void)zxingController:(ZXingWidgetController*)controller didScanResult:(NSString *)result {

   // self.resultsToDisplay = result;
    if (self.isViewLoaded) {

        [[NSBundle mainBundle] loadNibNamed:@"yellaViewController" owner:self options:nil];
        initWithNibName:@"yellaViewController" bundle:[NSBundle mainBundle]];

        [topImage setImage:[UIImage imageNamed:@"yellalogoREAL.png"]];

        [[UIApplication sharedApplication] setStatusBarHidden:YES];

    } 
```

这对我不起作用，并且状态栏保持可见。我究竟做错了什么？

另外：有没有办法可以使用相同的 if 语句在调查页面上隐藏 tabbarcontroller？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:58:37.877

在 ZxingController 的 viewDidAppear 中：(ZxingWidgetController.m)

```
self.isStatusBarHidden = [[UIApplication sharedApplication] isStatusBarHidden];
if (!isStatusBarHidden)
    [[UIApplication sharedApplication] setStatusBarHidden:YES]; 
```

它缓存了之前的状态栏状态，当你退出 ZxingController 时，在 viewDidDisappear 中：

```
if (!isStatusBarHidden)
    [[UIApplication sharedApplication] setStatusBarHidden:NO]; 
```

由于zxingController中的**viewDidDisappear会在zxingController:didScanResult:之后进入，**
所以你在zxingController:didScanResult:中的setStatusBarHidden是没有用的。

# c# - Linq Navigation Properties complex where ID in (select id from...)

> ID：14307261
> 
> 赞同：5
> 
> 时间：2013-01-13T19:27:58.367
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有两个实体 Candidate 和 CandidateLocation，其中一个 Candidate 可以有多个 CandidateLocation 条目。

CandidateLocation 包含 CandidateId、ISO 国家代码（例如 US、GB）和类型列（1 = 允许，2 = 受限）。

规则规定，如果候选人在 CandidateLocation 表中没有任何“允许”条目，他们可以在任何地方工作。如果他们有一个明确的“允许”位置，他们只能在明确允许的位置工作。他们不能在明确受限的位置工作。

要尝试演示这一点，请参见下图（候选人可以有多个位置，我将其保留为一个以简化插图）

![规则](../Images/f7bdce500b7469dba595d8422025da28.png)

在 SQL 中，实现此目的的一种方法是以下查询

```
SELECT  *
FROM    Candidate
WHERE   Candidate.IsArchived = 0
    AND
        -- Do not inlude restricted locations (RestrictionStatus = 2)
        Candidate.CandidateId NOT IN (SELECT CandidateId FROM CandidateLocation WHERE IsArchived = 0 AND CountryISOCode = @Location AND RestrictionStatus = 2)
    AND
        (
        -- Include Explicit Permitted Locations
        Candidate.CandidateId IN (SELECT CandidateId FROM CandidateLocation WHERE IsArchived = 0 AND CountryISOCode = @Location AND RestrictionStatus = 1)
        OR
        -- Include Candidates with no Explicit Permitted Locations
        Candidate.CandidateId NOT IN (SELECT CandidateId FROM CandidateLocation WHERE IsArchived = 0 AND RestrictionStatus = 1)
        ) 
```

如果有人知道如何使用 linq 和导航属性来实现这一点，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T22:06:23.573

假设您在 Candidates 和 CandidateLocations 之间建立了一对多的关联

```
Context.Candidates.Where(c => c.IsArchived == 0 &&
!c.CandidateLocations.Any(
    l => l.CountryISOCode == location && l.RestrictionStatus == 2) &&
(c.CandidateLocations.Any(
    l => l.CountryISOCode == location && l.RestrictionStatus == 1) ||
!c.CandidateLocations.Any(
    l => l.RestrictionStatus == 1))
); 
```

# javascript - javascript函数绑定到什么对象（它的“this”是什么）？

> ID：14307264
> 
> 赞同：20
> 
> 时间：2013-01-13T19:28:16.397
> 
> 标签：javascript, function, functional-programming, this, ecmascript-5

我知道它在函数内部`this`。

```
var func = function {
    return this.f === arguments.callee; 
    // => true, if bound to some object
    // => false, if is bound to null, because this.f === undefined
}

var f = func; // not bound to anything;

var obj = {};
obj1.f = func; // bound to obj1 if called as obj1.f(), but not bound if called as func()

var bound = f.bind(obj2) // bound to obj2 if called as obj2.f() or as bound() 
```

### 编辑：

你实际上不能调用`obj2.f()`as `f`doesn't become a property of`obj2`

### 编辑结束。

问题是：如何在这个函数之外找到函数绑定的对象？

我想实现这一点：

```
function g(f) {
  if (typeof(f) !== 'function') throw 'error: f should be function';

  if (f.boundto() === obj)
    // this code will run if g(obj1.f) was called
    doSomething(f);

  // ....

  if (f.boundto() === obj2)
    // this code will run if g(obj2.f) or g(bound) was called
    doSomethingElse(f);
} 
```

和部分应用而不更改函数绑定到的对象：

```
function partial(f) {
   return f.bind(f.boundto(), arguments.slice(1));
} 
```

### 共识：

你不能这样做。外卖：使用`bind`并`this`非常小心:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T23:14:28.507

## 部分申请

您可以进行部分应用：

```
// This lets us call the slice method as a function
// on an array-like object.
var slice = Function.prototype.call.bind(Array.prototype.slice);

function partial(f/*, ...args */) {

    if (typeof f != 'function')
        throw new TypeError('Function expected');

    var args = slice(arguments, 1);

    return function(/* ...moreArgs */) {
        return f.apply(this, args.concat(slice(arguments)));
    };

} 
```

* * *

## 这个函数绑定到什么对象？

此外，您的问题的第一部分有一个非常直接的解决方案。不确定这是否适合您，但您可以很容易地在 JS 中进行猴子补丁。猴子修补`bind`是完全可能的。

```
var _bind = Function.prototype.apply.bind(Function.prototype.bind);
Object.defineProperty(Function.prototype, 'bind', {
    value: function(obj) {
        var boundFunction = _bind(this, arguments);
        boundFunction.boundObject = obj;
        return boundFunction;
    }
}); 
```

只需在任何其他脚本运行之前运行它，任何使用 的脚本`bind`，它都会自动`boundObject`向函数添加一个属性：

```
function f() { }
var o = { };
var g = f.bind(o);
g.boundObject === o; // true 
```

（注意：我假设您在上面的 ES5 环境中，因为您使用的是`bind`.）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T20:12:34.617

javascript 中的函数在技术上不受任何约束。它可以被声明为对象的属性，如下所示：

```
var obj = {
    fn: function() {}
}
obj.fn(); 
```

但是，如果您将函数本身放入它自己的变量中，则它不会绑定到任何特定对象。

例如，如果您这样做：

```
var obj = {
    fn: function() {}
}
var func = obj.fn;
func(); 
```

然后，当您调用`func()`which 依次执行该`fn()`函数时，它被调用时将完全没有关联`obj`。将对象与函数关联是由函数的调用者完成的。它不是函数的属性。

如果要使用`fn.bind(obj)`，那将创建一个新函数，该函数只是在内部执行对`obj.fn()`. 它不会神奇地为 javascript 添加任何新功能。事实上，你可以[在 MDN 上](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Polyfill)`.bind()`看到一个 polyfill来了解它是如何工作的。

* * *

如果您希望`this`无论函数如何调用都始终是一个特定对象，那么这不是 javascript 的工作方式。除非函数实际上是一个 shim，它在被调用时强制与硬线对象关联（做什么`.bind()`），否则函数没有硬线关联。关联是由调用者根据调用函数的方式完成的。这与其他一些语言不同。例如，在 C++ 中，如果没有正确的对象在调用时与之关联，就无法调用函数。该语言根本无法解析函数调用，并且您会收到编译错误。

如果您在 javascript 中对类型进行分支，那么您可能没有正确使用该语言的面向对象功能或没有充分发挥您的最大优势。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T20:16:17.447

与其将函数绑定`func`到对象，不如尝试将`func`其视为一个对象，它可以将 obj1 和 obj2 作为其属性？

例如：

```
var func = function {
    this.object; // Could be obj1 or obj2
    return this.f === arguments.callee;
    // => true, if this.object is not null
}

var f = func;

f.object = obj1; // or func.object = obj2; 
```

您还可以编写一个函数来处理对象是 obj1 还是 obj2：

```
function g(f) {
  if (typeof(f) !== 'function') throw 'error: f should be function';

  if (f.object === obj)
    // this code will run if g(f) was called
    doSomething(f);
  if (f.object === obj2)
    // this code will run if g(f) or g(bound) was called
    doSomethingElse(f);
} 
```

原因是您希望将 obj1 和 obj2 视为函数的属性`f`。但是，当您绑定时，您会将函数添加为 obj1 或 obj2 的属性。可以将函数绑定到多个对象，因此寻找绑定函数的一个对象是没有意义的；因为您将函数添加为对象的子集。

在这种情况下，由于您希望将对象视为函数的子集，因此将属性添加到可以保存 obj1 或 obj2 的函数中可能是有意义的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-13T20:21:59.073

如果您是执行绑定的人，您可以在函数中添加一个字段来记录 this 以供以后测试。

```
var that = "hello";
var xyz = function () { console.log(this); }.bind(that);
xyz.that = that;

// xyz is callable as in xyz(), plus you can test xyz.that without calling 
```

# sql - 设置共享公共类型的多对多表

> ID：14307265
> 
> 赞同：0
> 
> 时间：2013-01-13T19:28:16.460
> 
> 标签：sql, sql-server, database-design

我正在准备一个旧版 Microsoft SQL Server 数据库，以便我可以通过诸如实体框架之类的 ORM 进行交互，而我的问题围绕着处理我的一些共享通用类型的多对多关联的设置。具体来说，应该在主类型之间共享一个公共类型，还是每个主类型都有自己的链接表？

例如，这是我编写的一个简单示例，它显示了当前如何设置感兴趣的表：

![遗留多对多](../Images/e110ca1a6560e76a1e2492b27c27b6cb.png)

请注意，有两种类型，`Teachers`和`Students`，两者都可以包含零个、一个或多个`PhoneNumbers`。`Teachers`和两个表`Students`实际上共享一个关联表 ( `PeoplePhoneNumbers`)。该字段`FKID`是 a`TeacherId`或 a `StudentId`。

我认为应该设置的方式是这样的：

![多对多更好？](../Images/27e5b41f36a59e2a6d607b9a8fdd3ed3.png)

这样，`Teachers`表和`Students`表都获得了自己的 PhoneNumbers 表。

我的直觉告诉我第二种方法是正确的方法。这是真的？即使 PhoneNumbers 表包含多个字段怎么办？我的面向对象程序员的大脑告诉我，如果这些表之间的唯一区别是它们链接到哪个主表，那么拥有几个相同的表是错误的，每个表都包含十几个字段？例如：

![冗余表](../Images/1a0047141080d00ea9018816e5086d4d.png)

在这里，我们有两个包含相同信息的表，但唯一的区别是一个表是地址，`Teachers`而另一个表是`Students`。这些对我来说是多余的，它们实际上应该是一个表——但是我失去了数据库约束它们的能力（对吗？），并且当我尝试将 ORM 应用于此时，也让我自己变得更加混乱。

这种类型的公共类型应该合并还是应该为每个主类型保持分离？

***更新***

下面的答案将我引向了以下解决方案，该解决方案基于数据库中的子类表。我最初的问题之一是我有一个在多个其他表之间共享的公用表，因为该实体类型对其他两个表都是通用的。处理这个问题的正确方法是对共享表进行子类化，并从本质上将它们从一个公共父级降级，并将公共数据类型链接到这个新的父级。这是一个示例（请记住，我的实际数据库与教师和学生无关，因此此示例是高度制造的，但概念是有效的）：

![解决方案](../Images/88f02f773844605ad496285a3c9059ce.png)

由于`Teachers`和`Students`都需要，因此解决方案是为表`PhoneNumbers`创建一个超类`Party`、 和 FK 。另请注意，您仍然可以对仅与. 在此示例中，我还对它们进行了子类化和向下一层，并将它们从.`PhoneNumbers``Party``Teachers``Students``Students``PartTimeStudents``Learners`

这个解决方案非常令人满意的地方是我在 ORM 中实现它，例如实体框架。

查询很容易。我可以使用特定电话号码查询所有教师和学生：

```
var partiesWithPhoneNumber = from p in dbContext.Parties
     where p.PhoneNumbers.Where(x => x.PhoneNumber1.Contains(phoneNumber)).Any()
     select p; 
```

进行类似的查询同样容易，但仅适用于仅属于教师的电话号码：

```
var teachersWithPhoneNumber = from t in dbContext.Teachers
  where t.Party.PhoneNumbers.Where(x => x.PhoneNumber1.Contains(phoneNumber)).Any()
  select t; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:29:48.793

我认为您应该研究超类型/子类型模式。添加一个`Party`或`Person`表，其中每个教师或学生都有一行。然后，使用and表`PartyID` 中的 PK 和 FK 返回（但将它们命名为and ）。这在超类型表和每个子类型表之间建立了“一对零或一”的关系。`Teacher``Student``Party``TeacherID``StudentID`

请注意，如果子类型表中有标识列，则需要将其删除。继续创建这些实体时，您首先必须插入超类型，然后在任一子类型中使用该行的 ID。

为了保持一致性，您还必须对其中一个子类型表重新编号，以使其 ID 不会与另一个表冲突。之后，您可以使用`SET IDENTITY_INSERT ON`创建缺少的超类型行。

所有这一切的美妙之处在于，当您有一个必须只允许一种类型的表时，例如`Student`您可以 FK 到该表，但是当您需要一个 FK 时——就像你的`Address`表一样——你可以对`Party`表进行 FK反而。

最后一点是将所有公共列移动到超类型表中，并且仅将列放在它们之间必须不同的子类型中。

您的单`Phone`表现在也很容易链接到`PartyID`。

有关更详细的解释，请参阅[此对类似问题的回答](https://stackoverflow.com/a/2113129/57611)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T21:55:52.433

教师和学生都是更一般概念（人）的子类。如果您创建一个包含为数据库中所有人共享的一般数据的 Person 表，然后创建链接到 Person 并包含任何其他详细信息的 Student 和 Teacher 表，您会发现您有适当的点可以链接到任何其他表。

如果存在对所有人都通用的数据（例如零到多个电话号码），那么您可以链接到 Person 表。当您拥有仅适用于学生的数据时，您可以将其链接到学生 ID。您获得了额外的优势，即学生教师只是一个同时拥有学生和教师记录的人。

一些 ORM 直接支持子类表的概念。LLBLGen 以我描述的方式这样做，因此您可以使您的数据访问代码与更高级别的概念（教师和学生）一起工作，并且将在低级别数据访问代码中代表您管理 Person 表。

**编辑**

对当前图表的一些评论（这可能与所翻译的源域无关，因此建议加一点盐）。

派对、教师和学习者看起来不错。如果您为费率添加开始日期和结束日期，那么薪水看起来不错，这样您就可以跟踪薪水历史记录。另请记住，如果您最终拥有多个具有薪水的实体，则使用 PartyID（而不是 TeacherID）可能是有意义的。

PartyPhoneNumbers 看起来您可以直接将电话号码挂在上面。这取决于您是否希望一次更改多人 (n:m) 的电话号码，或者电话号码是否由每一方独立拥有。（我希望是后者，因为您可能有一个学生是老师的（现实世界）孩子，因此他们共享一个电话号码。我不希望更新学生的电话号码来影响老师，所以连接表在这里看起来很奇怪。）

Learners to PaymentHistory 似乎是正确的，但 Student 与 PartTimeStudents 的差异似乎是人为的。（似乎 PartTimeStudents 更多的是 AttendenceDays，而这又是 LearnerClasses 加入的结果）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T21:03:39.880

您遇到的问题是“一个”关系的示例。一个人是老师或学生（或可能两者兼而有之）。

我认为现有的结构最能捕捉到这些信息。

这个人有一个电话号码。然后，有些人是老师，有些人是学生。每个实体的附加信息存储在教师表或学生表中。常用信息（例如姓名）位于电话表中。

将电话号码分成两个单独的表格是相当混乱的。毕竟，一个电话号码不知道是给学生还是老师。此外，您没有其他电话号码的空间，例如行政人员。对于有时可能会教授或帮助教授课程的学生，您也面临着挑战。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T21:06:59.670

阅读您的问题，您似乎正在要求针对您的情况使用通用数据库架构。我过去见过几个，有些比其他更容易使用。

一种选择是让 Student_Address 表和 Teacher_Address 表都使用相同的 Address 表。这样，如果您有要存储的实体特定字段，您就有了这种能力。但这可能会稍微（尽管不是很明显）难以查询。

另一种选择是您在上面建议的方式——我可能只是在表上添加一个主键。但是，您希望将 PersonTypeId 字段添加到该表（链接到 PersonType 表的 PersonTypeId）。这样您就可以知道每条记录对应的是哪个实体。

我不建议有两个 PhoneNumber 表。我认为您会发现将所有内容都放在同一张表中会更容易维护。我更喜欢将相同的实体放在一起，这意味着 Student 是一个实体，Teachers 是一个实体，PhoneNumbers 是同一个实体。

祝你好运。

# ios - iOS：在录制视频时分析音频以应用图像过滤器

> ID：14307270
> 
> 赞同：4
> 
> 时间：2013-01-13T19:28:47.473
> 
> 标签：ios, objective-c, audio, video, recording

我迫切希望找到以下问题的解决方案：我有一个 iPhone 应用程序：

1.  可以将摄像头和麦克风中的视频和音频录制到视频文件中
2.  实时执行一些音频处理算法（在录制视频时）
3.  将过滤器应用于由后一种算法修改的视频（在录制时）

我已经使用一些库（用于过滤器的 GPUImage 和用于基本音频处理的 AVFoundation）分别完成了所有任务[，](https://github.com/BradLarson/GPUImage)但我无法同时结合音频分析和视频录制，即：它完美地记录了视频文件并正确应用过滤器，但是当我开始录制视频时，音频处理部分就停止了。

我已经尝试过使用 AVAudioSession、AVAudioRecorder 并查看了谷歌和这个页面，但我找不到任何东西。我怀疑它与对音频数据的并发访问有关（视频录制过程由于并发性而停止了音频处理）但无论哪种方式我都不知道如何解决它

有任何想法吗？任何人？提前致谢。

# java - 易失性 jls 示例

> ID：14307277
> 
> 赞同：1
> 
> 时间：2013-01-13T19:29:06.517
> 
> 标签：java, multithreading, concurrency, volatile, jls

[对于 volatile 的每个 JLS 示例，](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#d5e10323)以下代码是否应该在 windows 7 x86 jdk 7（打开 -ea）上抛出 AssertionError ？

```
public class TestVolatile {
static volatile int i = 0;
static volatile int j = 0;

static void one() {
    i++;
    j++;
    assert (i>=j);
//:"one: i=" + i + " j=" + j;
}
static void two() {
    //System.out.println("i=" + i + " j=" + j);
    assert (i<=j);
    /*
    System.out.print("<i=" + i);
    for (int k = 0; k < 1000000; k++);
    System.out.println(", j=" + j+">");
    */
}
public static final int NUM_WORKERS =  4;

public static void main (String [] args) {
    final Worker [] workers = new Worker[NUM_WORKERS];
    final Thread [] workerThreads = new Thread[NUM_WORKERS];

    for (int i = 0; i < NUM_WORKERS; i++) {
        Worker w = new Worker(i);
        workers[i] = w;
        workerThreads[i] = new Thread(w,"workerThread_"+i);
    }

    for (int i = 0; i < NUM_WORKERS; i++) {
        workerThreads[i].start();
    }

}

}

final class Worker implements Runnable {
final int id;
volatile boolean notDone = true;

public Worker(int tid){
    id = tid;
}

@Override
public void run() {
    //System.out.println("worker start:" + id);
    try {
        while (notDone) {
            if (id  <  TestVolatile.NUM_WORKERS - 1) {
                TestVolatile.one();
            } else {
                TestVolatile.two();
            }
        }
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
}
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T19:46:54.290

您有超过 1 个线程正在运行`one`。`i`并且`j`是易变的，因此更改将是可见的，但是`i++`并且`j++`不是原子操作，并且很可能其中一个计数器在某个阶段不会正确递增：

例如，假设 i 为 5，以显示可能引发 AssertionError 的有效线程交错：

*   线程 1：读取 i => 5
*   线程 2：读取 i => 5
*   线程 1: temp = i + 1 => 6
*   线程 2: temp = i + 1 => 6
*   线程 1：写 i = temp => 6
*   线程 2：写 i = temp => 6
*   线程 1：读取 j 并递增 => j = 6
*   线程 2：读取 j 并递增 => j = 7

而且 i 和 j 不同步，您的断言`one`将失败。

但是，尽管存在数据竞争，但程序的运行仍然有可能不会引发断言错误：JLS 不保证您的程序将运行良好，但它也没有说它也不会。

编辑：其中一位编写 JLS 的“线程和锁”部分的人实际上[在他的博客上发表了一篇](http://jeremymanson.blogspot.co.uk/2007/08/volatile-does-not-mean-atomic.html)关于一个非常相似的问题的帖子。评论甚至提到了您在问题中提到的 JLS 部分：JLS 示例中只有一个写作线程。

# php - 用php上传会话不输出

> ID：14307279
> 
> 赞同：0
> 
> 时间：2013-01-13T19:29:26.527
> 
> 标签：php

我想查看存储在上传会话中的数据，但我得到的只是“空”，我是不是走错了路？

```
session_start();
if(isset($_POST['submit'])){
     $target = "test/";
     $target = $target . basename('test') ;
     $file = ($_FILES["uploaded"]["name"]);
     $key = ini_get("session.upload_progress.prefix") . $_POST[ini_get("session.upload_progress.name")];

    var_dump($_SESSION[$key]);

if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)){echo "done";}else echo "error";
} 
```

和html：

```
<form action="upload.php" method="POST" enctype="multipart/form-data">
   <input type="hidden" name="<?php echo ini_get("session.upload_progress.name"); ?>" value="test" />
   <input type="file" name="uploaded" />
   <input type="submit" name='submit' />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:43:22.700

上传完成后，您正在尝试获取上传进度状态。

如果你想让它工作，那么你可以例如将你的表单发送到 iframe 并在上传期间询问服务器，使用 ajax，状态是什么。

我建议将它用作旧浏览器的后备，因为当前浏览器支持 ajax 上传，您可以显示上传进度而无需向服务器发出额外请求并创建一些奇怪的隐藏 iframe；）

# php - 在使用准备的已建立连接中使用 mysqli::prepare？

> ID：14307281
> 
> 赞同：2
> 
> 时间：2013-01-13T19:29:41.027
> 
> 标签：php, mysql, mysqli

快速提问。同时使用`prepare`mysqli中的方法。这是可能的/一个好主意；在同一个mysqli连接中使用它两次？例子：

OOP 分层

```
public function getStuff(){
    $posts=array();
    $query = $this->DBH->prepare('SELECT * FROM table WHERE stuff =?');
    $query->bind_param('s','param');
    $query->execute();
    $query->bind_result($ID,$col1,$col2,$etc);
    while($query->fetch()){
        $posts[]=array('ID'=>$ID,'col1'=>$col1,'extras'=>$this->getExtras($ID));
    }
    $query->close();
    return $posts;
}
private function getExtra($postID){
    $extras=array();
    $query = $this->DBH->prepare('SELECT * FROM anotherTable WHERE moreStuff =?');
    $query->bind_param('s',$postID);
    $query->execute();
    $query->bind_result($ID,$col1,$col2,$etc);
    while($query->fetch()){
        $extras[]=array('ID'=>$ID,'col1'=>$col1,'etc'=>$etc);
    }
    $query->close();
    return $extras;
} 
```

我可能的错误是我使用了相同的变量和相同的数据库连接。我不是 100% 确定这会起作用，因为我已经调用了 $this->DBH，而它已经在父函数中使用了。有没有更好的方法来实现我想要实现的目标，或者我可以使用更好的结构。还是我应该放弃并使用单独的变量？哈哈

希望的结果：

```
$posts=array('ID'=>'column ID number','col1'=>'column1 data', 'extras'=>array('ID'=>'second table\'s ID number','col1'=>'second tables data','etc'=>'etc etc etc')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:42:14.720

在上面的示例中，重要的变量是`$query`. 它们中的每一个都是其自己的方法的局部变量，因此变量本身不会发生冲突。*如果情况合适*，MySQLi 连接`$this->DBH`能够同时处理多个打开语句。

 *您需要谨慎的地方是他们的执行顺序。如果您准备并执行一条语句但不从中获取所有行，则在获取所有行之前您可能无法`prepare()`执行下一条，除非您首先关闭它[`mysqli_stmt::close()`](http://php.net/manual/en/mysqli-stmt.close.php)以释放打开的语句句柄。

例如：

```
// Prepares successfully:
$s1 = $mysqli->prepare("SELECT * FROM t1");
// Also prepares successfully (previous one not executed)
$s2 = $mysqli->prepare("SELECT * FROM t2");

// Then consider:
$s1 = $mysqli->prepare("SELECT id, name FROM t1");
$s1->bind_result($id, $name);
$s1->execute();
// And attempt to prepare another
$s2 = $mysqli->prepare("SELECT id, name FROM t2");
// Fails because $s1 has rows waiting to be fetched.
echo $m->error;
// "Commands out of sync; you can't run this command now" 
```

### 编辑：误读了您的示例...

查看上面的示例，您确实`getExtras()` *在*`getStuff()`从语句中获取时调用。您可能会遇到上述问题。在这种情况下，您的两个操作可能可以用一个来处理`JOIN`，您只需在一个循环中获取即可填充所有变量并根据需要构建输出数组。根据您的需要，这应该是`INNER JOIN`如果相关行预计存在于 中`othertable`，或者`LEFT JOIN`如果相关`othertable`行可能有也可能没有与给定 ID 匹配的行。

```
SELECT 
  maintable.id, 
  maintable.col1,
  othertable.col2,
  othertable.col3
FROM
  maintable
  JOIN othertable ON maintable.id = othertable.id 
```*

# php - 保护应用程序的部分代码源

> ID：14307295
> 
> 赞同：-4
> 
> 时间：2013-01-13T19:32:04.473
> 
> 标签：php, access-control, source-code-protection

我正在开发一个 ERP 应用程序。下个月我将招聘 2 名员工，开发人员。

该应用程序由两部分组成：

1.  系统的核心
2.  模块。

有没有办法“保护”系统的核心以防新员工可能被盗？我不想在几个月后与竞争对手看到我的代码（存在风险）。

本来想通过FTP、SVN工作等来限制访问。但仔细一想，我发现开发者总是有办法知道系统文件的核心（一个简单的显示php目录）或执行一个将重命名的脚本这。php。txt 就可以下载了...

用 Ioncube 对内核进行编码就足够了吗？其他解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T19:41:53.553

这确实是合法的，而不是编程问题。你应该让他们签署保密和非竞争协议，然后收工——提出不必要的复杂解决方案真的没有必要。

> 我曾想过通过 FTP、SVN 工作等来限制访问。但仔细想想，我发现开发人员总是有办法知道系统文件的核心或执行将重命名的脚本。php。txt 就可以下载了...

明显地。意识到人类发明的任何安全措施都可以被另一个人规避。您仍然应该施加此类限制 - 如果他们确实获得了对应用程序核心的访问权限，您可能需要证明这只能通过故意规避安全措施来实现。

坦率地说，始终为员工提供完成工作所需的访问权限，但不能超过这个。

# c# - 使用标准 .NET Framework 的 AOP 类属性的基本实现

> ID：14307298
> 
> 赞同：18
> 
> 时间：2013-01-13T19:32:25.530
> 
> 标签：c#, .net, attributes, aop

> **可能重复：**
> [通过属性的 C# 包装方法](https://stackoverflow.com/questions/2206554/c-sharp-wrap-method-via-attributes)

我想实现这样的功能：

```
[Atomic]
public void Foo()
{           
    /* foo logic */
} 
```

其中`[Atomic]`attribute是一个属性，它将函数逻辑包装在事务范围内：

```
using(var scope = new TransactionScope())
{
    /* foo logic */
    scope.Complete();
} 
```

这样的属性怎么写？

我之前问过基本相同的[问题](https://stackoverflow.com/questions/14294977/attribute-which-wraps-functionality-of-its-decorated-function-within-some-outer)，我知道这可以使用 AOP 来完成，但我没有提到我正在寻找一些最简单的概念验证实现或有用的文章，它们可以帮助我使用纯 .NET 编写它框架（我想使用`RealProxy`和`MarshalByRefObject`类型，我已经阅读过浏览相关的问题）。

我需要完全解决这个显示的例子。这似乎是一件基本的事情，所以我想从头开始学习如何做。它现在不需要安全和灵活。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-13T20:18:58.767

> 这似乎是一个基本的东西......

这是（许多）易于理解概念但根本不易于实现的事物之一。

根据[Oded 的回答](https://stackoverflow.com/a/14307335/234)，.NET 中的属性不*执行任何操作*。它们仅存在以便其他代码（或开发人员）稍后可以查看它们。把它想象成一个花哨的评论。

考虑到这一点，您可以像这样编写属性

```
public class AtomicAttribute : Attribute { } 
```

现在最困难的部分是，您必须编写一些代码来扫描该属性，并更改代码的行为。

鉴于 C# 是一种编译语言，并且鉴于 .NET CLR 的规则，理论上有 3 种方法可以做到这一点

1.  挂钩到 C# 编译器，并使其在看到该属性时输出不同的代码。
    这似乎很好，但现在根本不可能。也许 [Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx) 项目将来可能会允许这样做，但现在，你不能这样做。

2.  *在 C# 编译器将其转换为 MSIL后*，编写将扫描 .NET 程序集的内容，并更改 MSIL。
    这基本上就是[PostSharp](http://www.sharpcrafters.com/postsharp/features)所做的。扫描和重写 MSIL*很难*。有诸如[Mono.Cecil 之](http://www.mono-project.com/Cecil)类的库可以提供帮助，但这仍然是一个非常困难的问题。它也可能会干扰调试器等。

3.  使用 .NET Profiling API 在程序运行时监视程序，每次看到具有该属性的函数调用时，将其重定向到其他包装函数。
    这可能是最简单的选择（尽管仍然*非常困难*），但缺点是您的程序现在*必须*在探查器下运行。这在您的开发 PC 上可能没问题，但如果您尝试部署它会导致大问题。此外，使用这种方法可能会对性能造成很大影响。

在我看来，最好的办法是创建一个设置事务的包装函数，然后将其传递给执行实际工作的 lambda。像这样：

```
public static class Ext 
{
    public static void Atomic(Action action) 
    {
        using(var scope = new TransactionScope()) 
        {
            action();
            scope.Commit();
        }
    }
}

.....

using static Ext; // as of VS2015

public void Foo()
{
    Atomic(() => {
        // foo logic
    }
} 
```

这个花哨的计算机科学术语是[高阶编程](http://en.wikipedia.org/wiki/Higher-order_programming)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-13T19:36:01.500

属性是元数据——仅此*而已*。

有许多工具可以利用此类元数据，但此类工具需要了解该属性。

PostSharp 等 AOP 工具读取此类元数据，以便了解将方面编织到代码中的内容和位置。

简而言之——仅仅写一个`AtomicAttribute`不会给你**任何东西**——你需要通过一个知道这个属性的工具传递编译的程序集并对它做“一些事情”以实现 AOP。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-13T20:12:53.500

这根本不是一件基本的事情。不会因为方法具有属性而运行额外的代码，因此无处放置您的`TransactionScope`代码。

您需要做的是在应用程序启动时使用反射来迭代程序集中每个类的每个方法并找到标有 的方法`AtomicAttribute`，然后围绕该对象编写自定义代理。然后以某种方式让其他一切都调用您的代理而不是真正的实现，也许使用依赖注入框架。

大多数 AOP 框架在构建时执行此操作。例如 PostSharp 在 VisualStudio 构建您的程序集之后运行。它扫描您的程序集并重写 IL 代码以包含代理和 AOP 拦截器。这样，程序集在运行时就已准备就绪，但 IL 已与您最初编写的内容有所不同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-13T20:25:37.067

也许使用 IoC 容器解析所有对象？您可以为您的类型配置拦截器，并在其中检查调用的方法是否用该属性装饰。您可以缓存该信息，这样您就不必对每个方法调用都使用反射。

所以当你这样做时：

```
var something = IoC.Resolve<ISomething>(); 
```

`something`不是您已实现的对象，而是代理。在该代理中，您可以在方法调用之前和之后做任何您想做的事情。

# ios - 将我的 nsstring 转换为 json

> ID：14307300
> 
> 赞同：0
> 
> 时间：2013-01-13T19:32:49.420
> 
> 标签：ios, objective-c, json, parsing

我是 json 新手，很困惑如何做到这一点。我在下面有这个基本信息我需要转换

```
 "trailer":
         "window":"broken"
         "sidesteps":"dent"
    "tractor":
        "window":"craked"
        "sidesteps":"missing"
     "tire":
        "tire1":
            "pressure":"120"
            "rim":"good"
         "tire2":
            "pressure":"120"
            "rim":"good" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:33:41.600

根据您从 textFields 获取的所有值创建一个字典。它看起来像这样，

```
NSDictionary *dictionary = @{@"trailer":@{@"window":@"broken", @"sidesteps":@"missing", @"tractor": @{@"window":@"broken",@"sidesteps":@"missing"}, @"tire":@{@"tire1" : @{@"pressure" : @"120", @"rim":@"good"}}}}; 
```

输出：

```
dictionary =   {
        "trailer": {
            "window": "broken",
            "sidesteps": "missing",
            "tractor": {
                "window": "broken",
                "sidesteps": "missing"
            },
            "tire": {
                "tire1": {
                    "pressure": "120",
                    "rim": "good"
                }
            }
        }
    } 
```

您可以使用`NSMutableDictionary`动态创建类似的结构。您可以创建多个可变字典并将其添加为另一个字典的对象以实现上述结果。

要转换为 JSON 数据，您可以这样做，

```
NSError *error;
NSData *postData = [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONWritingPrettyPrinted error:&error]; 
```

如果要转换成字符串来查看数据，

```
NSString *jsonString = [[NSString alloc] initWithData:postData encoding:NSStringEncodingConversionAllowLossy];
NSLog(@"jsonString = %@", jsonString); 
```

如果您想将此 postbody 设置为 http 请求并将其传递给服务器，您可以将其设置为，

```
[urlRequest setHTTPBody:postData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:25:51.003

假设您知道这不是合法的 JSON，并且它只是一个示意图，它表示一组嵌套的 NSDictionary 对象。外部字典包含键“trailer”、“tractor”和“tire”，每个都对应一个 NSDictionary。"trailer" 的 NSDictionary 有键 "window" 和 "sidesteps"。其他类似，只有“轮胎”有另一层 NSDictionary 嵌套。

至于从文本字段中获取值，这取决于您。你的 UI 设计是什么样的？如果这些是固定字段（键值始终相同），那么您可以让用户填写列表中的多个文本字段。

# java - 虽然循环 int 值不会更新

> ID：14307303
> 
> 赞同：-1
> 
> 时间：2013-01-13T19:33:04.953
> 
> 标签：java, multithreading, while-loop, int

```
public class Loader implements Runnable{
    int players;
    public static void main(String[] args){
        Loader Loader = new Loader();
        Loader.initiate();
    }
    public void initiate(){
        Thread t1 = new Thread(new Loader());
        t1.start();

        while(true){
            players++;
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
    public void run() {
        while(true){
            System.out.println(players);
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

所以当我激活一个线程广播器来广播玩家数量时，我不能添加到玩家的 int 值并让它被广播......

玩家登录时玩家 = 0 --> 玩家++；但是当它广播的玩家数量仍然是0...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:36:57.910

您创建`Loader`该类的两个实例。你执行

```
players++; 
```

在一种情况下，并期望它在另一种情况下也会更新......

代替

```
Thread t1 = new Thread(new Loader()); 
```

和

```
Thread t1 = new Thread(this); 
```

它*可能会*更好......（但我怀疑还有其他一些问题）

**编辑**：正如[Peter Lawrey](https://stackoverflow.com/users/57695/peter-lawrey)所评论的，在您的示例情况`players`中需要声明`volatile`：

```
volatile int players; 
```

两个线程都在使用该变量，编译器/Java VM 不知道这一点，并且可能会缓存`players`可能/将与实际值和预期值混淆的结果（取决于您所在的线程）。将变量声明为易失性，确保它`players`没有被缓存，并且在需要时从内存中获取它的值。

附加：您可能希望使用`synchronize`它来确保只有一个线程同时访问该变量。这也可以防止出现意外值的问题。特别是当多个线程正在*写入*变量时。

# android - 制作一些音频效果并将其存储在媒体播放器中

> ID：14307304
> 
> 赞同：0
> 
> 时间：2013-01-13T19:33:08.010
> 
> 标签：android, echo, android-mediaplayer, effects, soundpool

我需要对存储在设备中的 .3gp 格式的录音列表制作一些音频效果。

我需要的音频效果是添加混响声音或与另一个音频文件与交通或人群的声音混合。

我相信混合录音和音频效果的最佳方法是使用 SoundPool 类。为了制作 SoundPool，我遵循了下一个教程：[在 Android 的 SoundPool 中弄湿你的脚](http://imageshack.us/photo/my-images/339/sinttulohh.jpg/)

对于回声效果，我正在尝试将 audiofx 包与 PresetReverb 和 EnvironmentalReverb 类一起使用，但我的代码没有产生效果：

```
public void playSoundPresetReverb(){

       PresetReverb pReverb  = new PresetReverb(1, 0);
       mp.attachAuxEffect(pReverb.getId());
       pReverb.setPreset(PresetReverb.PRESET_LARGEHALL);
       pReverb.setEnabled(true);

       mp.setAuxEffectSendLevel(1.0f);

    }

public void playSoundEnvironmentReverb(){

       eReverb = new EnvironmentalReverb(0, 0);
       eReverb.setDecayHFRatio((short) 1000);
       eReverb.setDecayTime(1000);
       eReverb.setDensity((short) 1000);
       eReverb.setDiffusion((short) 1000);
       eReverb.setReverbLevel((short) -1000);
       eReverb.setReverbDelay((short) 50);
       eReverb.setEnabled(true);
       //mp.attachAuxEffect(eReverb.getId());
       mp.setAuxEffectSendLevel(1.0f);

    } 
```

但是带有混响的播放声音是没有效果的。我认为效果是在 mp.start(); 之前应用的。但我不知道是否需要为 MediaPlayer 做一些准备工作。

这是活动的 LogCat：

[http://imageshack.us/photo/my-images/339/sinttulohh.jpg/](http://imageshack.us/photo/my-images/339/sinttulohh.jpg/)

我的最后一个问题是效果后如何保存媒体播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:31:10.620

您必须将新对象（混响）与您的媒体播放器会话连接起来。

你可以这样做：

```
eReverb = new EnvironmentalReverb(0, mp.getsessionid()); 
```

// mp 是你的音频播放器对象

问候！

# interface - 使用接口宽度和 $size 的自动 SystemVerilog 可变大小？

> ID：14307306
> 
> 赞同：5
> 
> 时间：2013-01-13T19:33:20.083
> 
> 标签：interface, size, parameterized, system-verilog

我正在尝试在 SystemVerilog 中制作具有标准化内存接口的模块（在我的情况下为 DSP），并希望模块中的变量根据附加接口中的总线宽度自动调整大小。我的理由：通过允许代码自动调整到任何连接的接口，这使得代码更便携，而不是要求 HDL 编码器传入参数来告诉模块将连接到它的所有接口总线的宽度（不是那个这会很糟糕，没有参数它看起来更干净）。

然而，我似乎无法让它发挥作用。这是一个说明问题的示例；Quartus II 12.1 中的以下综合：

```
// Top level module with some 15-bit ports

module top  ( input [14:0] data_in,
              output [14:0] data_out1, data_out2,
                            data_out3, data_out4 );

   test_interface my_interface(); // Initialize the interface
   test_module my_module(.*);     // Initialize & connect module 
endmodule

// Define a simple interface:

interface test_interface ();
   logic [8:0] my_port;
endinterface

// Define the module:

module test_module ( input [14:0] data_in,
                     test_interface my_interface,
                     output [14:0] data_out1, data_out2,
                                   data_out3, data_out4 );

   localparam width1 = $size(data_in);              // should be 15
   localparam width2 = $size(my_interface.my_port); // should be 9

   logic [width1-1:0] auto_sized1;    // gets correct size (14:0)
   logic [width2-1:0] auto_sized2;    // **PROBLEM**: gets size of 0:0!

   always_comb begin
      auto_sized1 = 5;                // ok
      auto_sized2 = 5;                // problem; value now truncated to 1 

      data_out1 = data_in + width1;      // Yields data_in + 15 (ok)
      data_out2 = data_in + width2;      // Yields data_in + 9  (ok...!) 
      data_out3 = data_in + auto_sized1; // Yields data_in + 5  (ok)
      data_out4 = data_in + auto_sized2; // Yields data_in + 1  (problem)
   end
endmodule 
```

请注意，`width2`最终会得到正确的值 (9) - 为时已晚，无法正确设置`auto_sized2`. 我最初认为这`$size`只是在所有变量都分配了宽度之后才进行评估，但这似乎也不是这种情况，因为`$size(data_in)`对于设置`auto_sized1`.

有什么想法吗？同样，这对项目的成功并不重要，我现在主要是好奇！

谢谢 -

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:11:03.903

看起来像一个编译器错误。我可能会在接口定义中使用一个参数。

```
module top  ( input [14:0] data_in,
              output [14:0] data_out1, data_out2,
                            data_out3, data_out4 );

   test_interface #(.port_size(8)) my_interface(); // Initialize the interface
   test_module my_module(.*);     // Initialize & connect module 
endmodule

interface test_interface ();
   parameter port_size = 1;
   logic [port_size-1:0] my_port;
endinterface

module test_module ( input [14:0] data_in,
                     test_interface my_interface,
                     output [14:0] data_out1, data_out2,
                                   data_out3, data_out4 );

   localparam width1 = $size(data_in);
   localparam width2 = my_interface.port_size;
endmodule 
```

# android - HoloEveryWhere：带有 PreferenceFragment 的 ViewPagerIndicator，错误膨胀类

> ID：14307307
> 
> 赞同：0
> 
> 时间：2013-01-13T19:33:39.123
> 
> 标签：android, android-fragmentactivity, viewpagerindicator, android-holo-everywhere

我正在将 HoloEveryWhere 与 ViewPagerIndicator 一起使用，并尝试在`PreferenceFragment`(HoloEveryWhere) 中使用`PreferenceActivity`(HoloEveryWhere) 并且无法修复错误...我必须忽略某些东西

部分日志：

```
01-13 20:10:04.310: E/AndroidRuntime(29939): FATAL EXCEPTION: main
01-13 20:10:04.310: E/AndroidRuntime(29939): android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
01-13 20:10:04.310: E/AndroidRuntime(29939):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at org.holoeverywhere.LayoutInflater.tryCreateView(LayoutInflater.java:357)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at org.holoeverywhere.LayoutInflater.onCreateView(LayoutInflater.java:306)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:285)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at org.holoeverywhere.LayoutInflater.inflate(LayoutInflater.java:270)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at org.holoeverywhere.preference.Preference.onCreateView(Preference.java:535)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at org.holoeverywhere.preference.Preference.getView(Preference.java:425)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at org.holoeverywhere.preference.PreferenceGroupAdapter.getView(PreferenceGroupAdapter.java:160)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at org.holoeverywhere.widget.ListView$ListAdapterWrapper.getView(ListView.java:341)
01-13 20:10:04.310: E/AndroidRuntime(29939):    at android.widget.AbsListView.obtainView(AbsListView.java:2273) 
```

我的`PreferenceActivity`

```
import org.holoeverywhere.app.Fragment;
import org.holoeverywhere.preference.PreferenceActivity;

import android.os.Bundle;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;

import com.viewpagerindicator.TitlePageIndicator;

public class Test extends PreferenceActivity {

    ViewPager Pager;

    enum PageInfo {
        One(R.string.one), Two(R.string.two), Three(R.string.three); 
        int titleResId;

        PageInfo(int titleResId) {
            this.titleResId = titleResId;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        Pager = (ViewPager) findViewById(R.id.pager);
        Pager.setAdapter(new PagerAdapter(getSupportFragmentManager()));
        ((TitlePageIndicator) findViewById(R.id.titles)).setViewPager(Pager);
    }//end method

    class PagerAdapter extends FragmentPagerAdapter {

        public PagerAdapter(FragmentManager fm) {
            super(fm);
        }//end method

        @Override
        public Fragment getItem(int position) {

            if (PageInfo.One.ordinal() == position) {
                return new OneFragment();
            } else if (PageInfo.Two.ordinal() == position) {
                return new TwoFragment();
            } else if (PageInfo.Three.ordinal() == position) {
                return new ThreeFragment();
            }
            return null;
        }//end method

        @Override
        public int getCount() {
            return PageInfo.values().length;
        }//end method

        @Override
        public CharSequence getPageTitle(int position) {
            return Test.this.getString(PageInfo.values()[position].titleResId);
        }//end method
    }//end inner class
}//end class 
```

我的`PreferenceFragment`（简化）：

```
public class OneFragment extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setPreferenceScreen(create());
    }//end method

    private PreferenceScreen create(){
        PreferenceScreen root = getPreferenceManager().createPreferenceScreen(context);

        CheckBoxPreference backup = new CheckBoxPreference(context);
        backup.setKey(Data.BACKUP_ENABLED);
        root.addPreference(backup); 

        return root;
    }//end method   
}//end class 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.viewpagerindicator.TitlePageIndicator
        android:id="@+id/titles"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/abs__background_holo_dark"
        app:footerIndicatorStyle="triangle" />

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <ListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:drawSelectorOnTop="false"
        android:scrollbarAlwaysDrawVerticalTrack="true" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:21:40.830

嗯，想通了……费了不少功夫。

我正在使用这个解决方案：http: [//forum.xda-developers.com/showthread.php?](http://forum.xda-developers.com/showthread.php?t=1363906) t=1363906 对其进行了大量修改以供我使用（自定义首选项）并使其与 HoloEveryWhere 一起使用

解决方案现在看起来像这样：

```
import xxx.xxx.android.preferences.PreferenceFragmentCompat;

import org.holoeverywhere.app.Activity;
import org.holoeverywhere.app.Fragment;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;

import com.viewpagerindicator.TitlePageIndicator;
import com.viewpagerindicator.TitlePageIndicator.IndicatorStyle;

public class Test extends Activity {

    private PreferenceScreensData data;
    private ViewPager Pager;

    enum PageInfo {
        One(R.string.one), Two(R.string.two), Three(R.string.three);
        int titleResId;

        PageInfo(int titleResId) {
            this.titleResId = titleResId;
        }
    }

    public void onCreate(Bundle b) {
        super.onCreate(b);

        setContentView(R.layout.main);

        Pager = (ViewPager) findViewById(R.id.pager);
        Pager.setAdapter(new PagerAdapter(getSupportFragmentManager(), this));
        TitlePageIndicator titleIndicator = (TitlePageIndicator) findViewById(R.id.titles);
        titleIndicator.setViewPager(Pager);
        titleIndicator.setFooterIndicatorStyle(IndicatorStyle.Triangle);
        Pager.setCurrentItem(0);
    }// end method

    class PagerAdapter extends FragmentPagerAdapter {

        PreferenceFragmentCompat[] fragments;
        String[] titles;

        public PagerAdapter(FragmentManager fm, Context context) {
            super(fm);

            data            = new PreferenceScreensData(context);                   
            fragments       = new PreferenceFragmentCompat[3];
            fragments[0]    = new PreferenceFragmentCompat(context, data.getPreferenceScreenOne());         
            fragments[1]    = new PreferenceFragmentCompat(context, data.getPreferenceScreenTwo());
            fragments[2]    = new PreferenceFragmentCompat(context, data.getPreferenceScreenThree());

            titles      = new String[3];
            titles[0]   = context.getString(R.string.one);
            titles[1]   = context.getString(R.string.two);
            titles[2]   = context.getString(R.string.three);
        }//end constructor

        @Override
        public Fragment getItem(int position) {
            return fragments[position];
        }//end method

        @Override
        public int getCount() {
            return fragments.length;
        }//end method

        @Override
        public CharSequence getPageTitle(int position) {
            return Test.this.getString(PageInfo.values()[position].titleResId);
        }// end method
    }// end inner class
}//end class 
```

# rebol - 保护PAREN！当对块运行 reduce 操作时

> ID：14307311
> 
> 赞同：1
> 
> 时间：2013-01-13T19:34:13.710
> 
> 标签：rebol, operator-precedence, dialect

当您使用 REDUCE 时，您基本上是在 DO 方言中操作，其中 PAREN! 组可用于项目的优先级：

```
>> reduce ["Hello" (3 + 4) * 5]
== ["Hello" 35] 
```

在 COMPOSE 方言中，PAREN！用于标出您要使用 DO 方言评估块的哪些部分，不理会其余部分：

```
>> compose ["Hello" (3 + 4) * 5]
== ["Hello" 7 * 5] 
```

但是，如果你想运行 reduce 或 compose 并有一些你想留下的东西作为文字括号，除了`to-paren`一个块之外，还有其他的习惯用法吗？

```
>> reduce ["Hello" (3 + 4) * 5 to-paren ["inside!"]]
== ["Hello" 35 ("inside")] 
```

*旁注：我想知道 LIT-PAREN 会导致什么样的疯狂？*

```
>> reduce ["Hello" (3 + 4) * 5 '("inside!")]
== ["Hello" 35 ("inside")] 
```

*……话说回来，我不知道我想考虑一下。:-)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:33:24.157

实现您想要的更一般的方法是依靠`quote`：

```
>> reduce ["Hello " (3 + 4) * 5 quote ("inside!")]
== ["Hello " 35 ("inside!")] 
```

自 2.7.7 起，QUOTE 在 R3 和 R2 中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T19:40:11.600

另一个成语，是的：

```
>> reduce ["Hello" (3 + 4) * 5 first [("inside!")]]
== ["Hello" 35 ("inside")] 
```

不确定它是否更好，但它是*另*一种动物。

# objective-c - 仅在午夜从 applicationSignifigantTimeChangeNotification 触发选择器

> ID：14307312
> 
> 赞同：0
> 
> 时间：2013-01-13T19:34:13.793
> 
> 标签：objective-c, xcode

我在主视图控制器中添加了一个观察者，以便在触发 applicationsignifiganttimechange 时被调用，但我只希望在午夜发生这种情况。从本质上讲，applicationsignifiganttimechange 发生在时间格式更改和时区更改等时。我需要知道如何将其集中到仅在午夜。

有什么想法吗？

谢谢。

# python - Python：查找文本中的单词列表并返回其索引

> ID：14307313
> 
> 赞同：2
> 
> 时间：2013-01-13T19:34:14.473
> 
> 标签：python, text, word, nltk

我必须以纯文本形式处理文档，查找单词列表并在找到的每个单词周围返回一个文本窗口。我正在使用[NLTK](http://nltk.org/)。

我在 Stack Overflow 上找到了帖子，他们使用正则表达式来查找单词，但没有获取索引，只是打印它们。我不认为使用 RE 是正确的，因为我必须找到特定的词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T20:08:49.400

这就是您要查找的内容：

*   您可以使用 str.index 或 str.find：

文件内容：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin tortor et velit venenatis molestie. Morbi non nibh magna, quis tempor metus. 
Vivamus vehicula velit sit amet neque posuere id hendrerit sem venenatis. Nam vitae felis sem. Mauris ultricies congue mi, eu ornare massa convallis nec. 
Donec volutpat molestie velit, scelerisque porttitor dui suscipit vel. Etiam feugiat feugiat nisl, vitae commodo ligula tristique nec. Fusce bibendum fermentum rutrum.

>>>a = open("file.txt").read()

>>>print a.index("vitae")
232
>>> print a.find("vitae")
232 
```

# - 编辑 -

好的，如果您在多个索引中有相同的单词，请尝试使用生成器，

```
def all_occurences(file, str):
    initial = 0
    while True:
        initial = file.find(str, initial)
        if initial == -1: return
        yield initial
        initial += len(str)

>>>print list(all_occurences(open("file.txt").read(),"vitae"))
[232, 408] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:41:28.043

如果我理解得很好，建立一个位置索引就是你想要的

```
from collections import defaultdict

text = "your text goes here"
pos_index = defaultdict(list)
for pos, term in enumerate(text.split()):
    pos_index[term].append(pos) 
```

现在你有了一个包含每个单词位置的索引。只需按术语查询..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-06T04:45:03.323

试试这个，`log`txt在哪里，是`word_search`你要索引的词`log`

```
 [i for i, item in enumerate(log) if item == word_search] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-04T16:57:02.787

我知道你问这个问题已经有一段时间了，但既然你已经在使用 nltk，我建议你使用它的工具 word_tokenize：

```
text = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit.'
for index, word in enumerate(nltk.word_tokenize(text)):
  print(index, word) 
```

结果将是：

0 Lorem 1 ipsum 2 dolor 3 坐 4 amet 5 , 6 consectetur 7 adipiscing 8 elit 9.

希望能帮助到你 ：）

# ios - 如何使用 StoryBoard 在 NavigationController 和 ViewController 之间传递值？

> ID：14307316
> 
> 赞同：15
> 
> 时间：2013-01-13T19:34:38.083
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

我有一个问题，
下面是我的 StoryBoard，
第一个 Controller 是 a `TabBarController`，
它与 A (ViewController) 有关系。

![如何使用 StoryBoard 在 NavigationController 和 ViewController 之间传递值？](../Images/210cf98ba1cdbb1ba18fb8cde6d7e152.png)
A is a `ViewController`,
B is a `NavigationController`, A 通过`modal`segue将页面更改为 B
C is a `ViewController`, C 将更改为另一个页面`push`所以我需要一个 NavigationController

好的，我想将值从 A 传递到 C，
现在我可以从 A 传递值to B by `prepareForSegue`，
但是，因为 B 和 C 有关系而不是 segue，
所以我不能将值从 B 传递给 C by `prepareForSegue`!!!

如何使用 StoryBoard 在 NavigationController 和 ViewController 之间传递值？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-13T20:10:46.903

故事板图像在这里有点误导。

当您选择 B 时，*实际上*您是在选择 B/C 组合，因为 NavController 的堆栈中始终至少有一个 viewController（即 their`topViewController`和 their `[viewControllers objectAtIndex:0]`）。

所以你确实有直接从 A 到 C 的关系。

您如何访问该控制器取决于您的 segue 是*modal*还是*push*。在您的情况下，它是模态的，但我将描述两者，以便您可以看到区别。

无论哪种情况，要将数据传递给 C，您都需要在其头文件中声明一个属性

```
 @interface CviewController: UIViewContrller
    @property (assign) int dataFromA;
    @end 
```

**推动转场**

在 push segue 中，实际上是 C 是destinationViewController，而不是 B。实际上 push segue 由 B 管理，B 是 A 和 C 的 UINavigationController。push segue 背后的代码是形式
`[self.navigationController pushViewController:otherViewController];`

在 AviewController 的 prepareForSegue 中：

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
        {
         CviewController* controller = segue.destinationViewController;
        [controller setDataFromA:self.data];
    } 
```

在情节提要中，*可以在两个**不*共享公共 UINavigationController 的viewController 之间创建一个 push segue line 。但是，当您运行此程序时，您将收到崩溃错误：

> '找不到用于 segue 'pushC' 的导航控制器。只有当源控制器由 UINavigationController 的实例管理时，才能使用推送 segue。

每个好的 push segue 背后都有一个导航控制器。

**模态序列**

隐藏在模态 Segue 后面的代码是 UIViewController 方法
`- (void)presentViewController:(UIViewController *)viewControllerToPresent`

在 NavController/ViewController 组合的模态 segue 中，目标 viewController 是 segue 线指向的任何内容。如果它指向一个 viewController，那就是 segue.destinationController （并且 UINavigationController 将被忽略，这不是你想要的）；如果它指向一个 UINavigationController，就像在这种情况下，*那*将是它的destinationController。但是访问 viewController 仍然很简单，因为它将是导航控制器的 topViewController。

在 AviewController 的 prepareForSegue 中：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
     CviewController* controller = 
        (CviewController*)[[segue destinationViewController] topViewController];
    [controller setDataFromA:self.data];
} 
```

请注意，在这种情况下，我们必须使用旧式 [[消息传递] 语法]。如果我们使用modern.property.syntax，我们会得到一个编译错误。那是因为程序不知道 desinationViewController 的类型，并且拒绝接受 topViewController 作为未知类型的属性。但是很*高兴*[发送 [真实消息]] 给未知类型。我们还必须 (typecast*) 以避免编译器警告。

# c# - 从隔离存储读取 XML 到 ListBox

> ID：14307321
> 
> 赞同：0
> 
> 时间：2013-01-13T19:34:49.227
> 
> 标签：c#, xml, windows-phone-7, isolatedstorage

我有这段代码可以将 XML 文件从隔离存储读取到 ListBox：

```
using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream("People2.xml", FileMode.Open, isoStore))
            {
                XDocument loadedCustomData = XDocument.Load(isoStream);
                var filteredData = from c in loadedCustomData.Descendants("person")
                                   select new Person()
                                   {
                                       Name = c.Attribute("name").Value,
                                       Beneficiary = c.Attribute("beneficiary").Value,
                                       Price = c.Attribute("price").Value,
                                       Deadline = c.Attribute("deadline").Value,
                                       Index = c.Attribute("index").Value,
                                       Description = c.Attribute("description").Value

                                   };

                listBox.ItemsSource = filteredData;
            }
        } 
```

但是当我对这个 XML 执行它时

```
<?xml version="1.0" encoding="utf-8" ?>
<people>
    <person id="2"
            name="przyklad"
            price="850"
            deadline="22.10.12"
            beneficiary="asdasd"
            description="xxx" />
</people> 
```

我有这个错误：

```
NullReferenceException 
```

在此代码片段中：

```
select new Person()
                               {
                                   Name = c.Attribute("name").Value,
                                   Beneficiary = c.Attribute("beneficiary").Value,
                                   Price = c.Attribute("price").Value,
                                   Deadline = c.Attribute("deadline").Value,
                                   Index = c.Attribute("index").Value,
                                   Description = c.Attribute("description").Value

                               }; 
```

你知道有什么可以帮助的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:48:07.830

```
<?xml version="1.0" encoding="utf-8" ?>
<people>
    <person id="2" name="przyklad" price="850" deadline="22.10.12" beneficiary="asdasd" description="xxx" />
</people> 
```

您的 XML 上没有`index`属性，因此以下行是您异常的原因：

```
Index = c.Attribute("index").Value 
```

# ios - 使用“-webkit-overflow-scrolling: touch”时停止过度滚动？

> ID：14307324
> 
> 赞同：5
> 
> 时间：2013-01-13T19:34:59.640
> 
> 标签：ios, css, mobile-safari

我找到了：

```
-webkit-overflow-scrolling: touch; 
```

css 元素给我们在 ios 上的原生滚动。这对我来说似乎没问题。

但是有没有办法关闭“过度滚动”效果？

例如，当滚动位置 = 0，并且您继续向下拖动时，我的内容的顶部将向下移动，在其上方露出一点空白。当您松开手指时，内容会向上弹回。有没有办法只禁用它的那一部分？

我也从这里读到：

[http://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/](http://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/)

该苹果公司引入了与渲染相关的错误，并修复了以下问题：

```
-webkit-transform: translate3d(0,0,0); 
```

应该修复它。ios6解决了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T17:10:06.513

这似乎有帮助：

[https://github.com/joelambert/ScrollFix](https://github.com/joelambert/ScrollFix)

> ... ScrollFix 通过手动将 scrollTop 值偏移到一个远离任一极端的限制来解决此问题，这会导致浏览器使用橡皮筋而不是将事件向上传递到 DOM 树。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-13T23:19:40.897

您是否尝试过[这篇博](http://www.deadmarshes.com/Blog/20110804114957.html)文中关于关闭弹性滚动的技术？具体来说，对于 iOS，它建议使用以下 JavaScript：

```
document.addEventListener(
  'touchmove',
  function(e) {
    e.preventDefault();
  },
  false
); 
```

# java - 关闭 JFrame 后在 main() 中执行操作

> ID：14307325
> 
> 赞同：1
> 
> 时间：2013-01-13T19:35:09.967
> 
> 标签：java, swing, execution, windowlistener

我很抱歉，因为我相信这个问题已经被问过了，但没有一个答案真正帮助了我。我有一个带有 gui 的类，它包含一个带有多个文本字段和按钮的 JFrame。这是我要开始工作的 main() ：

```
Gui interface1 = new Gui();
interface1.setSize(200,200);
interface1.setVisible(true);
//hold main execution
//wait for the pressed button in gui
//close the jframe
//proceed with main()
call_some_functions(); 
```

我尝试将默认关闭操作设置为 HIDE_ON_CLOSE 但这似乎不是我想要的。我正在使用一个框架，我需要 main() 存活很长时间。基本上，我需要 jframe 在用户输入和更新参数时保留 main()，然后在不终止进程的情况下关闭自身并继续 main()，就好像什么都没发生一样。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T19:46:09.807

使用 a`JDialog`代替`JFrame`并制作`JDialog`模态，使用`JDialog#setModal`to`true`

有关更多信息，请参阅[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:46:44.520

利用 ：

```
frame.setDefaultCloseOperation(frame.HIDE_ON_CLOSE); 
```

例如：

```
import javax.swing.JFrame;
import javax.swing.JTextField;

public class TestFrame {
public static void main(String aa[])
{JFrame frame =new JFrame();
 JTextField field=new JTextField("hello buddy..nuthin happnd");
 frame.setDefaultCloseOperation(frame.HIDE_ON_CLOSE);
 frame.add(field);
 frame.pack();
 frame.setVisible(true);
 } 
```

**根据您的需要更新：**

```
import javax.swing.JFrame;
import javax.swing.JTextField;

public class TestFrame {
public static void main(String aa[])
{
JFrame frame =new JFrame();
JTextField field=new JTextField("hello buddy..nuthin happnd");
 frame.setDefaultCloseOperation(frame.HIDE_ON_CLOSE);
frame.add(field);
frame.pack();
frame.setVisible(true);

 frame. addComponentListener(new java.awt.event.ComponentAdapter() {
        public void componentHidden(java.awt.event.ComponentEvent evt) {
            formComponentHidden(evt);
        }
    });
 }

 private static void formComponentHidden(java.awt.event.ComponentEvent evt) {
   somefunction();
  }
 public static void somefunction()
 {
  System.out.println("hii!! i am hidden!!");

  }
 } 
```

# c++ - 字符指针数组

> ID：14307326
> 
> 赞同：-7
> 
> 时间：2013-01-13T19:35:17.457
> 
> 标签：c++, string, pointers

天哪，我现在很困惑

这里有什么问题，我能做些什么来解决它

**编辑：**天哪，我很抱歉......我现在情绪波动很大，我什至不能问一个问题

我想将 10 个输入的字符字符串分配给一个指针数组。

```
using namespace std;

int main(int argc, char *argv[])
{
    char *mess[10];
    int i = 0;

for (; i < 10; i++)
{                 
    cout << "Enter a string: ";   
    cin.getline(mess[i], 80);
}

for (i = 0; i < 10; i++)
    cout << mess[i];

system("PAUSE");
return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:40:43.213

您想要的可能是以这种方式声明您的数组：

```
char mess[10][80]; 
```

当您从 getline 读取多达 80 个字符时。

您当前的实现构建了一个 10 的数组，`char*`这些数组从未初始化为指向已分配的缓冲区。

一种更安全的方法是使用`std::string`缓冲区大小来为您处理。一个简单的改变：

```
#include <iostream>
#include <string>
using namespace std;

int main(int argc, char *argv[])
{
    std::string mess[10];
    int i = 0;

    for (; i < 10; i++)
    {                 
        cout << "Enter a string: ";   
        cin >> mess[i];
    }

    for (i = 0; i < 10; i++)
        cout << mess[i] << endl; // you probably want to add endl here

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

应该给你你想要的。

**编辑**

如果您绝对需要`char *`（这不是一个好主意），这就是您要寻找的：

```
#include <iostream>
using namespace std;

int main(int argc, char *argv[])
{
    char* mess[10];
    int i = 0;

    for (; i < 10; i++)
    {                 
        cout << "Enter a string: ";   
        mess[i] = new char[80]; // allocate the memory
        cin.getline(mess[i], 80);
    }

    for (i = 0; i < 10; i++)
    {
        cout << mess[i] << endl;
        delete[] mess[i]; // deallocate the memory
    }

    // After deleting the memory, you should NOT access the element as they won't be pointing to valid memory

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T19:43:11.360

您必须首先初始化您在此处声明的指针，`char *mess[10];`以便为它们分配内存。您可以通过使用[new()](http://en.cppreference.com/w/cpp/language/new)表达式来分配请求的内存来做到这一点。

```
char *mess[10];
for (int k=0; k<10; k++)
{
    mess[k]=new char[80];
} 
```

请记住，在使用`new()`函数分配内存后，您必须始终在处理完数据后释放所使用的内存。你可以——**而且你总是应该——使用**[delete()](http://en.cppreference.com/w/cpp/language/delete)表达式释放内存。

```
for (int j=0; j<10; j++)
{
   delete[] mess[j];
} 
```

有关动态分配/解除分配内存的更多信息，您可以参考[此处](http://www.cplusplus.com/doc/tutorial/dynamic/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T19:38:25.513

您分配了 10 个指针，但永远不要将它们初始化为指向 getline 可以读取输入的空间。

# c# - 调试器不会因错误而停止

> ID：14307330
> 
> 赞同：8
> 
> 时间：2013-01-13T19:35:23.853
> 
> 标签：c#, asp.net, asp.net-mvc, debugging

我正在使用 Visual Studio 2012 处理 Asp.net MVC4 项目。

当调试过程中出现错误时，它习惯于在错误上停止。

但是突然间，调试器并没有停止，只是吐出如下错误信息网页。

> “/”应用程序中的服务器错误。
> 
> 字典中不存在给定的键。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Collections.Generic.KeyNotFoundException：字典中不存在给定的键。
> 
> 源错误：...
> 
> 堆栈跟踪： ...

如何设置调试器在错误时停止？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-17T10:59:33.640

我遇到了同样的问题，即使我的调试选项与@John Koerner 相同。我发现并非所有异常类型都默认启用以破坏解决方案。您可以从“**例外设置**”窗口中选择启用哪些。

**VS2015：调试 -> Windows -> 异常设置。**

**VS2012：调试 -> 异常** [更多细节](https://msdn.microsoft.com/en-us/library/ms165012(v=vs.110).aspx)

我启用了整个 CLR 异常集。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T19:44:08.597

确保启用了异常助手：

![在此处输入图像描述](../Images/bd70971fe9e3e78967a7e664d42e8814.png)

# apache - RewriteCond 以任何顺序匹配查询字符串参数

> ID：14307333
> 
> 赞同：13
> 
> 时间：2013-01-13T19:35:49.517
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, url-rewriting

我有一个可能包含三个参数的 URL：

1.  ?category=计算机
2.  &subcategory=笔记本电脑
3.  &product=戴尔灵越-15

我需要 301 将此 URL 重定向到其友好版本：

```
http://store.example.com/computers/laptops/dell-inspiron-15/ 
```

我有这个，但如果查询字符串参数处于任何其他顺序，则无法使其工作：

```
RewriteCond %{QUERY_STRING} ^category=(\w+)&subcategory=(\w+)&product=(\w+) [NC]
RewriteRule ^index\.php$ http://store.example.com/%1/%2/%3/? [R,L] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-13T21:32:56.207

您可以通过多个步骤来实现这一点，方法是检测一个参数，然后转发到下一步，然后重定向到最终目的地

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^category=([^&]+) [NC,OR]
RewriteCond %{QUERY_STRING} &category=([^&]+) [NC]
RewriteRule ^index\.php$ $0/%1

RewriteCond %{QUERY_STRING} ^subcategory=([^&]+) [NC,OR]
RewriteCond %{QUERY_STRING} &subcategory=([^&]+) [NC]
RewriteRule ^index\.php/[^/]+$ $0/%1

RewriteCond %{QUERY_STRING} ^product=([^&]+) [NC,OR]
RewriteCond %{QUERY_STRING} &product=([^&]+) [NC]
RewriteRule ^index\.php/([^/]+/[^/]+)$ http://store.example.com/$1/%1/? [R,L] 
```

* * *

为避免`OR`and 双重条件，您可以使用

```
RewriteCond %{QUERY_STRING} (?:^|&)category=([^&]+) [NC] 
```

正如@TrueBlue 建议的那样。

另一种方法是在*TestString 前面* `QUERY_STRING`加上 &`&`号，并​​始终检查

```
RewriteCond &%{QUERY_STRING} &category=([^&]+) [NC] 
```

* * *

这种技术（为*TestString*加上前缀）也可用于将已经找到的参数传递到下一个[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)。这让我们可以将三个规则简化为一个

```
RewriteCond &%{QUERY_STRING} &category=([^&]+) [NC]
RewriteCond %1!&%{QUERY_STRING} (.+)!.*&subcategory=([^&]+) [NC]
RewriteCond %1/%2!&%{QUERY_STRING} (.+)!.*&product=([^&]+) [NC]
RewriteRule ^index\.php$ http://store.example.com/%1/%2/? [R,L] 
```

`!`仅用于将已找到并重新排序的参数与`QUERY_STRING`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-17T21:47:09.697

我对这种事情采取了一种稍微不同的方法，**利用由 mod_rewrite 设置和读取的 ENV VAR**。我发现像这样按名称引用反向引用更具可读性/可维护性，并且这些 ENV VAR 也可以稍后在请求处理中重用。总的来说，我认为这是一种比这里接受的答案更强大、更灵活的方法。无论如何，它对我来说效果很好。我已经完整地复制了我的要点：

来自[https://gist.github.com/cweekly/5ee064ddd551e1997d4c](https://gist.github.com/cweekly/5ee064ddd551e1997d4c)

```
# Mod_rewrite is great at manipulating HTTP requests.
# Using it to set and read temp env vars is a helpful technique.
#
# This example walks through fixing a query string:
# Extract good query params, discard unwanted ones, reorder good ones, append one new one.
#
# Before: /before?badparam=here&baz=w00t&foo=1&bar=good&mood=bad
# After: /after?foo=1&bar=good&baz=w00t&mood=happy
#
# Storing parts of the request (or anything you want to insert into it) in ENV VARs is convenient.
# Note the special RewriteRule target of "-" which means "no redirect; simply apply side effects"
# This lets you manipulate the request at will over multiple steps.
#
# In a RewriteRule, set custom temp ENV VARs via [E=NAME:value]
# Note it's also possible to set multiple env vars
# like [E=VAR_ONE:hi,E=VAR_TWO:bye]
#
# You can read these values using %{ENV:VAR_NAME}e <- little "e" is not a typo
#
# Tangent:
# Note you can also read these env vars the same way, if you set them via SetEnvIf[NoCase]
# (It won't work to use SetEnv, which runs too early for mod_rewrite to pair with it.)
#
# Regex details:
# (?:) syntax means "match but don't store group in %1 backreference"
#      so (?:^|&) is simply the ^ beginning or an & delimiter
#      (the only 2 possibilities for the start of a qs param)
# ([^&]+) means 1 or more chars that are not an & delimiter

RewriteCond %{QUERY_STRING} (?:^|&)foo=([^&]+)
RewriteRule ^/before - [E=FOO_VAL:%1]

RewriteCond %{QUERY_STRING} (?:^|&)bar=([^&]+)
RewriteRule ^/before - [E=BAR_VAL:%1]

RewriteCond %{QUERY_STRING} (?:^|&)baz=([^&]+)
RewriteRule ^/before - [E=BAZ_VAL:%1]

RewriteRule ^/before /after?foo=%{FOO_VAL}e&bar=%{BAR_VAL}e&baz=%{BAZ_VAL}e&mood=happy [R=301,L] 
```

PS这不是您问题的复制/粘贴解决方案，而是准确显示**如何**处理此类问题。有了这种理解，将其用于您的示例将完全是微不足道的。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-17T07:38:36.893

1）如果您只需要检查所有参数是否都在 url 中：

```
 RewriteCond %{QUERY_STRING} (^|&)category\=computers($|&)
   RewriteCond %{QUERY_STRING} (^|&)subcategory\=laptops($|&)
   RewriteCond %{QUERY_STRING} (^|&)product\=dell\-inspiron\-15($|&)
   RewriteRule ^$ http://store.example.com/computers/laptops/dell-inspiron-15/? [R=301,L] 
```

2）如果您需要精确的参数集：

```
 RewriteCond %{QUERY_STRING} ^&*(?:category\=computers|subcategory\=laptops|product\=dell\-inspiron\-15)(?!.*&\1(?:&|$))(?:&+(category\=computers|subcategory\=laptops|product\=dell\-inspiron\-15)(?!.*&\1(?:&|$))){2}&*$
 RewriteRule ^$ http://store.example.com/computers/laptops/dell-inspiron-15/? [R=301,L] 
```

此规则由[301 重定向生成器生成](https://www.301-redirect.online/htaccess-rewrite-generator)

# css - 在 Google 地图上浮动一个 div

> ID：14307334
> 
> 赞同：1
> 
> 时间：2013-01-13T19:35:50.483
> 
> 标签：css, google-maps, html, shadow

我正在做这个网站，我需要在谷歌地图上放置一些阴影`<div>`以实现阴影效果：

但是，它不起作用。

这就是我的css现在的样子：

```
html { 
height: 100% 
}

body { 
height: 100%; 
margin: 0; 
padding: 0 
}

#map_canvas { 
    height: auto;
    z-index: 1;
}

#topBar {
background-image:url(img/top.jpg);
background-repeat:repeat-x;
height: 100px;
min-height:100px;
-moz-box-shadow: 0px 5px 5px #888;
-webkit-box-shadow: 0px 5px 5px #888;
box-shadow: 0px 5px 5px #888;
z-index:900;
} 
```

如您所见，我正在使用图像来创建阴影。但我的问题是：地图甚至没有加载。如果我放置一个固定高度而不是自动，它会加载。但我没能给出那种阴暗的景象。发生的情况是地图加​​载到带有阴影的 div 的**顶部**。

我已经尝试过这个解决方案，但没有成功：

[如何在谷歌地图上浮动一个 div？](https://stackoverflow.com/questions/6037712/how-to-float-a-div-over-google-maps)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:56:06.237

我认为如果您只是为元素添加一个位置，它将被修复。Z-index 需要一个位置才能工作。

所以把“位置：相对；” 在这两个元素上，你会没事的。

# ios - 在 UIWebView 中居中 PDF

> ID：14307339
> 
> 赞同：2
> 
> 时间：2013-01-13T19:36:09.440
> 
> 标签：ios, pdf, uiwebview

这是我的 PDF 现在加载到 : 时的样子`UIWebView`：（我将蓝色渐变作为`UIWebView`的背景，以便您可以更好地理解我的意思）。

![嗨 StackOverflow！](../Images/1acc171d8fd5d055c5e83605c6bb9f5d.png)

我想将其居中，以使下边距与上边距相同。我将如何使用 PDF（非本地）执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-12T12:48:17.487

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 10 * NSEC_PER_MSEC), dispatch_get_main_queue(), ^{
        CGFloat topInset = floor(([[self webView] frame].size.height - [[[self webView] scrollView] contentSize].height) / 2);
        [[[self webView] scrollView] setContentInset:UIEdgeInsetsMake(topInset, 0, 0, 0)];
        [[[self webView] scrollView] setContentOffset:CGPointMake(0, -topInset) animated:NO];
    });
} 
```

这使用`UIWebView`'s internal `UIScrollView`。内容大小是从滚动视图中获取的，并且是从整个 Web 视图中获取的。这提供了“额外”空间。将其减半并将其用作顶部插图，然后将其居中。您确实需要首先将视图滚动到自己使用的正确位置，`setContentOffset:`因为这似乎是在我们设法设置插图之前在内部设置的。从那时起，一切都应该工作。

不幸的是，这`dispatch_after`是 iOS 8 中的一个要求。`contentSize`如果你在`webViewDidFinishLoad:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T22:28:08.207

我没有使用 iOS 的经验，但是有多种方法可以在 HTML 中垂直居中内容。

一种是[将您的内容包装在一个表格中](http://jsfiddle.net/rTRsV/)。

```
<style>
  html, body, table {
    height: 100%;
  }
  table {
    width: 100%;
  }
  td {
    text-align: center;
    vertical-align: middle;
  }
</style>
<table>
  <tr>
    <td>
      <object .../>
    </td>
  </tr>
</table> 
```

另一种是[将类似表格的样式应用到已经包装你的内容的元素上](http://jsfiddle.net/EEJg3/)。

```
<style>
  html, body {
    height: 100%;
  }
  body {
    display: table;
    width: 100%;
  }
  center {
    display: table-cell;
    vertical-align: middle;
  }
</style>
<center>
  <object .../>
</center> 
```

没有标记的解决方案是[使用 CSS 灵活框](http://jsfiddle.net/qDdQz/)。

```
<style>
  html, body {
    height: 100%;
  }
  body {
    display: -webkit-box;
    -webkit-box-pack: center;
    -webkit-box-align: center;
  }
</style>
<object .../> 
```

# firebase - Firebase 应用的并发用户究竟是如何确定的？

> ID：14307341
> 
> 赞同：13
> 
> 时间：2013-01-13T19:36:16.310
> 
> 标签：firebase

Firebase 应用的并发用户究竟是如何确定的？

在分析面板中，峰值并发用户的数量似乎比我使用我的应用程序打开浏览器窗口的数量要多。

我有点担心将来会在 1000 个并发限制下使用 FB，但也许我高估了我的应用程序的受欢迎程度以及达到该限制的可能性。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T20:21:19.027

并发用户是一次连接到 Firebase 的单个客户端（浏览器选项卡、移动应用程序、Node.js 进程等）。如果您打开了 3 个浏览器选项卡，您应该会看到 3 个并发用户（请注意，我们的分析仪表板中的统计数据有点延迟）。

根据我们的经验，平均而言，1 个并发用户相当于每月对网站的约 1400 次访问。对于大多数应用来说，1000 是一个非常大的并发用户数，而只有不到 1% 的 Firebase 应用能达到这个水平。

请注意，Firebase 能够为超过 1000 个并发用户的应用程序提供支持，因此如果您有一个更大的应用程序（甚至是一个更大的应用程序），这不是问题。

# android - 如何从我的主要活动中调用 ArrayAdapter 对象的函数？

> ID：14307346
> 
> 赞同：0
> 
> 时间：2013-01-13T19:36:42.043
> 
> 标签：android, function, arraylist, android-arrayadapter

我有一个在 ArrayAdapter 中使用的名为 Score 的对象。如何调用其中定义的函数？以下是我的主要活动，包括我要修复的线路。

```
public class ScoreList extends Activity {

    private ListView listViewScore;
    private Context ctx;

    ArrayList<Integer> allScoreChange = new ArrayList<Integer>();
    ArrayList<Integer> allScore = new ArrayList<Integer>(); 

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.score_list);
        ctx = this;
        final List<Score> listScore = new ArrayList<Score>();
        listScore.add(new Score("Player A", "0", "0"));
        listScore.add(new Score("Player B", "0", "0"));
        listScore.add(new Score("Player C", "0", "0"));

        for(int i = 0; i < listScore.size(); i++)
        {
            allScoreChange.set(i,0);
            allScore.set(i,listScore.getScoreTotal(i)); // this is the line I'm working on
        }
    }

} 
```

下面是带有函数的 Score 对象本身。

```
public class Score {

    private String name;
    private String scoreChange;
    private String scoreTotal;

    public Score(String name, String scoreChange, String scoreTotal) {
        super();
        this.name = name;
        this.scoreChange = scoreChange;
        this.scoreTotal = scoreTotal;
    }

    public String getScoreTotal() {
        return scoreTotal;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:39:55.937

> ```
> allScore.set(i,listScore.getScoreTotal(i)); // this is the line I'm working on 
> ```

使用 List 的`get()`方法：

```
allScore.set(i, listScore.get(i).getScoreTotal()); 
```

（从技术上讲，`listScore`是 List 而不是 ArrayAdapter。）

# php - Get Rank In pivot Query 和 Get Id rank in query

> ID：14307347
> 
> 赞同：-1
> 
> 时间：2013-01-13T19:36:46.857
> 
> 标签：php, mysql, pivot, rank

我有一个 mysql 表，如：

样本数据

```
ID STUDENT_ID Branch_id Class_id Exam_id Subject_id Numbers Date
1 653 5 1 1 8 60 2012-01-01
2 653 5 1 1 9 40 2012-01-01
3 653 5 1 1 10 80 2012-01-01
4 653 5 1 1 11 50 2012-01-01
5 653 5 1 1 12 65 2012-01-01
6 653 5 1 1 13 33 2012-01-01
7 653 5 1 1 15 86 2012-01-01
8 222 5 1 1 8 100 2012-01-01
9 222 5 1 1 9 80 2012-01-01
10 222 5 1 1 10 92 2012-01-01
11 222 5 1 1 11 50 2012-01-01
12 222 5 1 1 12 65 2012-01-01
13 222 5 1 1 13 33 2012-01-01
7 222 5 1 1 15 86 2012-01-01

```

即使有两个学生的分数相等，我也需要在课堂上获得学生的排名。例如，如果两名学生在 600 分中获得 600 分，则意味着他们都在第一名。

我搜索了很多网站，发现[这篇文章](http://thinkdiff.net/mysql/how-to-get-rank-using-mysql-query)可以满足我的需要，但在这篇文章中，正确的列已经是总分，但在我的表中，我需要求和（数字），然后根据总分获得学生的排名。

这一切都是在我获取单个学生的结果时发生的。

当我为所有类获取结果时，相同的数据有两件事需要。第一行到列的透视查询以 excel 格式显示结果，因此我使用行到列查询，例如：

```
SELECT m.* 
FROM (
   select student_id, branch_id, class_id, numbers,  exam_id, date
        , sum(numbers*(1-abs(sign(subject_id-1)))) as subs1
        , sum(numbers*(1-abs(sign(subject_id-2)))) as subs2
        , sum(numbers*(1-abs(sign(subject_id-3)))) as subs3
        , sum(numbers*(1-abs(sign(subject_id-4)))) as subs4
        , sum(numbers*(1-abs(sign(subject_id-5)))) as subs5
        , sum(numbers*(1-abs(sign(subject_id-6)))) as subs6 
   from results 
   GROUP BY student_id, branch_id, class_id,  exam_id
   ) m 
where branch_id = '6' 
 and class_id = '1' 
 and exam_id = '1' 
 and YEAR(date) = '2013' 
```

所需的结果在类查询中，例如：

```
ID 姓名 数学 英语 科学 总百分比 位置 排名

```

我通过这个查询得到了很好的结果。但是排名仍然存在问题如何在同一查询中获得学生的排名？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:59:02.557

> 我的问题是如何使用 SUM(numbers) 而不是正确的，因为在帖子查询中正确答案已经相加。

从子查询而不是表中选择。

> 第二个……</p>

我不完全理解你的第二个问题，也没有看到与第一个问题的关系。请写单独的帖子以提出单独的问题。

> ```
> sum(numbers*(1-abs(sign(subject_id-1)))) 
> ```

你可以这样写，`sum(numbers*(subject_id = 1))`因为 MySQL 在评估类似这种比较的布尔运算时使用 0 表示 false 和 1 表示 true。

还有一点需要注意：将`WHERE`条件*移动*到 subquery中会更好`m`。

# xcode - 重命名 Xcode 项目不会更改文件系统项目文件夹名称 - 不是其他 Q 的重做

> ID：14307348
> 
> 赞同：4
> 
> 时间：2013-01-13T19:36:49.513
> 
> 标签：xcode

使用 Xcode 4.5.2

我偶尔想在整个项目中重命名一个项目**，**而**不会**在项目的文件系统中留下明显的以前版本的文件夹名称。

重命名 Xcode 项目的常用指令不能完成此操作。我已经读过它们并做了很多次。他们只走这么远。他们将主目录（与 .xcode.proj 文件处于同一级别）保留为原始项目名称。叫我小气，但我不喜欢这样。所以我努力改变它如下。

我从通常的说明开始，然后尝试在 Xcode 和 Finder 中重命名剩余的原始文件夹名称。结局很糟糕。这是我遵循的步骤。它应该是可重现的。

我们将尝试将名为“JoeSchmoe”的项目更改为“JoeSchmoe_1”。

执行通常的项目重命名程序

1.  创建一个新的 Xcode Utility 项目，命名为：“JoeSchmoe”。使用故事板和 ARC。
2.  构建、运行和测试功能以验证一切正常。这是。停止。
3.  点击 cmd-shift-J
4.  打开右侧的实用程序面板
5.  在身份下，将项目名称更改为“JoeSchmoe_1”。Xcode 会问你，“重命名内容项目项？” 点击“重命名”
6.  建造。它应该成功。它确实如此。

问题

1.  在 Project Navigator 中，请注意项目中的主文件夹仍然命名为“JoeSchmoe”！
2.  将该文件夹的名称更改为 JoeSchmoe_1
3.  建造。它应该成功。它确实如此。我们完成了，对吧？那么让我们看看项目的文件系统。

退出 Xcode

1.  在 Finder 中，打开包含新重命名且正在工作的“JoeSchmoe_1.xcode.proj”的文件夹（其包含的文件夹仍命名为“JoeSchmoe”。现在没关系。我们可以在不影响 Xcode 的情况下将其更改为任何内容，只要它包含.xcode.proj 文件以及相关的文件和目录。我们不理会它。）

2.  在该目录中（与 JoeSchmoe_1.xcode.proj 文件处于同一级别），请注意主项目文件夹仍然命名为“JoeSchmoe”！

3.  将此“JoeSchmoe”文件夹的名称更改为“JoeSchmoe_1”。（我们预计这会破坏项目，因为我们知道 Xcode 仍会寻找“JoeSchmoe”文件夹，因为它并没有为我们改变它。）

启动 Xcode

1.  建造。正如预期的那样，它失败了。
2.  请注意，项目导航器中的所有文件名现在都是红色的，表示未找到文件。（我们预料到了这一点。现在我们要修复它。）

3.  在 Project Navigator 中，选择项目（顶部图标），然后选择 Target -> Build Settings -> Packaging -> Info.plist File。

4.  注意 Info.plist 文件设置行中的文件路径名为：JoeSchmoe/JoeSchmoe_1-Info.plist ！该目录仍然具有旧的项目名称。但是在文件系统中我们只是改变了它。所以让我们把它和文件系统中的一样。

5.  将其名称更改为 JoeSchmoe_1/JoeSchmoe_1-Info.plist

6.  重新验证文件系统中的目录名/文件名是否与 Xcode Packaging -> Info.plist 设置中的相同。

7.  如果是，则项目应该构建。正确的？

8.  它失败。并且所有的项目文件都是红色的（意思是没有找到）。

9.  尝试清理项目（产品菜单 -> 清理），

退出 Xcode，重新启动并构建。

1.  它失败了，和以前一样。

在这一点上，我没有关于它为什么失败的理论，除了假设有一个 Xcode 设置需要在我尚未发现的某个地方进行更改。四处寻找它。我难住了。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T18:21:21.257

重命名项目（包括查找器文件夹）时，我必须更改的最后一件事是“构建设置->前缀标题”下的设置。它仍然指向一个不再存在的 finder 文件夹，编译器会抛出一个找不到文件的错误。

将其更改为新的内部项目文件夹后，一切正常，并且我能够按预期构建项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:18:42.237

由于他们摆脱了 Xcode 3 中的功能来轻松更改您的项目名称，因此手动操作非常麻烦。我在 Mac strore Project Duplicator for Xcode 4 中找到了一个很棒的应用程序，它可以复制您的项目并让您随意命名。我已经使用了一段时间了，从来没有遇到过问题，购买时它只有 1 美元。

GW

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T23:33:11.207

请参阅此答案以手动解决问题

> [重命名 xcode 4 项目和实际文件夹](https://stackoverflow.com/questions/8262613/renaming-xcode-4-project-and-the-actual-folder)

# sql - 如果属性值包含在另一个表中，如何更新表？

> ID：14307352
> 
> 赞同：1
> 
> 时间：2013-01-13T19:37:10.777
> 
> 标签：sql, postgresql, sql-update, exists

我有一个像这样的数据库：

![在此处输入图像描述](../Images/2455365044dd9242acd31adaf8b3cf32.png)

我正在尝试创建一个查询，只要所有这三个属性的值：、、和作为属性值包含在表中，我就可以更新表中的`status`属性值。例如，如果 、 和 属性的值分别为3、4 和 5，则当（且仅当）3、4 和 5 包含在表中时，应该更新表。`incident``tabor_vatrogasci``tabor_policija``tabor_hitna``izvještaj_tabora``oznaka_tabora``tabor_vatrogasci``tabor_policija``tabor_hitna``incident``izvještaj_tabora`

这是我尝试过的，但没有奏效：

```
UPDATE incident SET status='Otvoren' FROM tabor,izvjestaj_tabora
WHERE (incident.tabor_policija=tabor.oznaka
OR incident.tabor_vatrogasci=tabor.oznaka
OR incident.tabor_hitna=tabor.oznaka)
AND izvjestaj_tabora.oznaka_tabora=tabor.oznaka
AND rezultat_izvjestaja='Riješen' AND
((SELECT EXISTS(SELECT DISTINCT oznaka_tabora FROM izvjestaj_tabora)
WHERE oznaka_tabora=incident.tabor_policija) OR tabor_policija=NULL) AND
((SELECT EXISTS(SELECT DISTINCT oznaka_tabora FROM izvjestaj_tabora)
WHERE oznaka_tabora=incident.tabor_vatrogasci) OR tabor_vatrogasci=NULL) AND
((SELECT EXISTS(SELECT DISTINCT oznaka_tabora FROM izvjestaj_tabora)
WHERE oznaka_tabora=incident.tabor_hitna) OR tabor_hitna=NULL); 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:02:23.127

假设`INCIDENT.OZNAKA`是关键，您需要对所有 3 个事件进行评价（我是斯洛文尼亚人，这就是我理解的原因；））

```
UPDATE incident
SET status='Otvoren' 
WHERE oznaka in (
    SELECT DISTINCT i.oznaka
    FROM incident i
        INNER JOIN izvještaj_tabora t1 ON i.tabor_vatrogasci = t1.oznaka_tabora
        INNER JOIN izvještaj_tabora t2 ON i.tabor_policija = t2.oznaka_tabora
        INNER JOIN izvještaj_tabora t3 ON i.tabor_hitna = t3.oznaka_tabora
    WHERE t1.rezultat_izvjestaja='Riješen' AND t2.rezultat_izvjestaja='Riješen' AND t3.rezultat_izvjestaja='Riješen'
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T01:11:46.727

根据您的*描述*，查询应如下所示：

```
UPDATE incident i
SET    status = 'Otvoren'
WHERE (tabor_policija IS NULL OR
       EXISTS ( 
          SELECT 1 FROM izvjestaj_tabora t
          WHERE  t.oznaka_tabora = i.tabor_policija
          )
       )
AND   (tabor_vatrogasci IS NULL OR
       EXISTS ( 
          SELECT 1 FROM izvjestaj_tabora t
          WHERE  t.oznaka_tabora = i.tabor_vatrogasci
          )
       )
AND   (tabor_hitna IS NULL OR
       EXISTS ( 
          SELECT 1 FROM izvjestaj_tabora t
          WHERE  t.oznaka_tabora = i.tabor_hitna
          )
       ) 
```

[我想知道为什么连接表`tabor`与操作无关。]

除其他外，您还成为两个普遍误解的受害者：

1)

```
tabor_policija=NULL 
```

这个表达式**会导致`NULL`**. 由于`NULL`被认为是“未知”，如果将其与任何事物进行比较，结果也是“未知”。我引用[了比较运算符的手册](http://www.postgresql.org/docs/current/interactive/functions-comparison.html)：

> 不要写表达式 = NULL，因为 NULL 不“等于”NULL。（空值表示未知值，不知道两个未知值是否相等。）

2)

```
EXISTS(SELECT DISTINCT oznaka_tabora FROM ...) 
```

在一个[**`EXISTS`**](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)半连接`SELECT`项目中是完全不相关的。（我`SELECT 1`改用）。正如该术语所暗示的，只检查*存在*。表达式返回`TRUE`or `FALSE`，`SELECT`项目被忽略。在那里添加一个`DISTINCT`子句尤其没有意义。

# android - 电子邮件发送程序说明

> ID：14307353
> 
> 赞同：1
> 
> 时间：2013-01-13T19:37:10.887
> 
> 标签：android, email, android-activity, sender

我对 Android 编程比较陌生，但在 Java 和其他编码语言方面有经验。作为我目前正在制作的程序的一部分，我希望能够在按下按钮时发送预定义的电子邮件。我目前正在查看此代码：

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)

我目前能够启动启动 MailSenderActivity.class 的意图。但是，我无法理解如何通过 GmailSender.class 发送电子邮件。我相信我误解了如何使用提供的代码。我是否应该在主页上的代码中创建两个单独的意图来启动两个活动，一个接一个，如下所示？如果没有，我该怎么做？

```
public void SendEmail(View v) {
    Intent i = new Intent(getBaseContext(), MailSenderActivity.class);    
    Intent j = new Intent(getBaseContext(), GMailSender.class);       
    startActivity(i);
} 
```

另外，我想知道代码中为/从、主题、正文等定义的空间。我看到 MailSenderActivity.class 有

```
 try {   
                GMailSender sender = new GMailSender("username@gmail.com", "password");
                sender.sendMail("This is Subject",   
                        "This is Body",   
                        "user@gmail.com",   
                        "user@yahoo.com"); 
```

user@gmail.com 和 user@yahoo.com 都是电子邮件的收件人吗？代码中是否还有其他地方我应该定义电子邮件的内容？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:44:03.220

向下滚动并阅读其余答案，您会看到该`sendMail()`方法提供了所有线索：

```
public synchronized void sendMail(String subject, String body, String sender, String recipients) 
```

所以： `"user@gmail.com"`是发件人（发件人字段）。

`"user@yahoo.com"`是收件人（收件人字段）。您可以用逗号指定更多，例如

```
"user@yahoo.com,user_2@gmail.com" 
```

您还会看到这`GMailSender`只是一个类，而不是一个活动。因此，它**不需要**Intent；只需实例化类。此外，`MailSenderActivity`还有一个代码示例演示了`GMailSender`. 您不必使用它。

例如

```
public void SendMail (View v) {
  try {   
    GMailSender sender = new GMailSender("your_username@gmail.com", "password");
    sender.sendMail("Subject",   
                    "Email body",   
                    "Fromfield@gmail.com",   
                    "toField@example.com");   
  } catch (Exception e) {   
    Log.e("SendMail", e.getMessage(), e);   
  } 
} 
```

还要记住 Java 命名约定规定方法应该以小写字母开头。您应该遵守这些约定并适当地重构您的代码。

# asp.net-mvc-3 - 使用 HTTP Post 在 MVC 中使用 QueryString 参数

> ID：14307354
> 
> 赞同：0
> 
> 时间：2013-01-13T19:37:14.837
> 
> 标签：asp.net-mvc-3, http

我最近在调试一个 ASP.NET MVC 应用程序（Firefox + Firebug），我遇到了一个有趣的（对我来说）场景，所有 GET 请求都按预期传递了查询字符串中的参数，大多数 POST 请求只是在表单中发布输入，但是那里是一些混合了查询字符串参数和表单输入的 POST 请求。

有趣的是，MVC 模型绑定器完全没有问题，可以从查询字符串和发布的参数混合构建模型。它是 ASP.NET MVC 和 HTTP 中有效且可接受的模式，还是更像是模型绑定器的容错实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T19:40:33.757

这是设计使然 - 默认 MVC 模型绑定器将尝试匹配来自 URI（查询字符串和/或路由数据）和正文的模型参数。

当然，您可以实现自己的行为不同的模型绑定器。

顺便说一句，在 ASP.NET Web API 中，这种行为不再是那样，并且 URI 和 body 参数也没有混合。

# c - 跳转到标签时出现分段错误

> ID：14307355
> 
> 赞同：0
> 
> 时间：2013-01-13T19:37:22.437
> 
> 标签：c, gcc, label

嘿，下面的代码让我发疯，当我运行它时给我一个分段错误。注意我在这里使用一流的标签。

```
#include <stdio.h>

main()
{
   static void* array[] = {&&label2, &&label1};
   void* programCount = array;

   goto *programCount++;

   label2: ;
     int b = 100;
     printf("%d\n", b);

   label1: ;
     int b2 = 1000;
     printf("%d\n", b2);
} 
```

我不明白为什么会这样，它编译得很好......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:57:05.737

这个问题指的是 gcc 扩展，[Labels as Values](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html)。

问题中的代码编译得很好，尽管在使用`-Wall -pedantic`. 我想问题出在`void*`指针的分配上。以下代码运行良好：

```
static void* array[] = {&&label2,&&label1};

goto *array[0]; 
```

正如@ouah 所写，您的 void 指针的类型是错误的。当您使用`void**`时，以下内容也有效：

```
void** programCount = array;

goto *programCount[0];
// or goto *programCount[1]; 
```

最后，为了反映您问题中的代码，您还可以使用

```
void** programCount = array;

goto **(++programCount); 
```

跳转到数组中的第二个标签 ( `label1`)。请注意，在评估指针的值之前，您需要使用预增量来增加指针。

**免责声明：**我不赞成`goto`在 C 或 C++ 中使用标签。还有其他语言元素可以为此类问题提供更合适的解决方案，例如@jweyrich 编写了指向函数的数组。由于这是不可移植的，它不应该在现实生活中使用（如果我是代码审查员，它不会通过审查;-)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:58:42.690

的类型`programCount` 不正确，请使用`void **`：

```
void **programCount = array; 
```

那么您需要取消引用`programCount` 两次，例如：

```
goto *programCount[0]; 
```

跳转到标签`label2`，或

```
goto *programCount[1]; 
```

跳转到标签`label1`。

这里的 `&&`操作符是 GNU C[标签地址操作符](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html)。

# facebook - 如何获取到 facebook iFrame url 的直接链接？

> ID：14307356
> 
> 赞同：-2
> 
> 时间：2013-01-13T19:37:37.253
> 
> 标签：facebook, iframe

我有一个应用程序，其网址如下：

```
https://www.facebook.com/Foo/app_123456789 
```

这个应用程序在 iframe 中运行并加载我服务器的一些 url。在开始时，用户会看到类似 [1] 的页面：

```
www.foo.com/index.php 
```

但在应用程序中，您还会获得类似 [2] 的页面：

```
https://foo.com/foo1/test/Tab/New/12345-6789 
```

现在的问题是：是否可以获得一个`facebook.com/...`以 [2] url 开头并直接引导您的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:23:31.237

对的，这是可能的。你可以像这样向你的 URL 添加一个额外的变量：

```
https://www.facebook.com/Foo/app_123456789?app_data=any_string_here 
```

然后，Facebook 会将[`app_data`变量](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)中的任何内容发送到`singed_request`. 因此，您所要做的就是检查它的存在（和值）并相应地重定向用户。

# asp.net-mvc - Ajax.BeginForm 替代 onchange=this.form.submit()

> ID：14307357
> 
> 赞同：0
> 
> 时间：2013-01-13T19:37:39.123
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4, razor-2

我有一张表，每行都有一个 Ajax.BeginForm。这可以很好地将数据传递给控制器​​。

但是，它不会在控制器上触发 Request.IsAjaxRequest() 因为表单 post（感谢 HTX9 指出这一点！）。真正的问题是它返回一个局部视图，而不是在当前视图中更新它。

您可以在下面看到两个字段集。第一个是我要更新的那个，它下面的一个是使用 Ajax.BeginForm 向控制器发送数据的那个。

换句话说：当我在下拉列表中选择某些内容时，它会更新上面的表格，但会在新的局部视图中打开它。

我在 _layout 视图中有不显眼的 ajax js，并且类似的设置可以在应用程序的其他部分中使用，而是使用带有按钮的发布数据。

```
<fieldset>
    <legend>Direktbyten</legend>
    <div id="container-grid2">
        @Html.Partial("_RatingList2", Model.Models2)
    </div>
</fieldset>

<fieldset>
    <legend>Omarkerade byten(@ViewBag.DirectCount)</legend>

    <div id="RatingList">
    <table>
        <thead>
            <tr>
                <td>Se hela</td>
                <td>Hyra</td>
                <td>Rum</td>
                <td>Kvm</td>
                <td>Gata</td>
                <td>Område</td>
                <td>Deras prio</td>
                <td>Totaltvärde</td>
                <td>Min prio</td>
            </tr>

        </thead>
        <tbody>
            @foreach (var item in Model.Models1)
            {
                using (Ajax.BeginForm("UpdateRatingListRow", new AjaxOptions { UpdateTargetId = "container-grid2" }))
                { 

                @Html.Hidden("RatingListId", item.RatingListId)
                <tr>
                    <td>@Html.ActionLink("Till annons", "ViewAd", "Ad", new { id = item.CustomerId }, null)
                    </td>
                    <td>@item.Rent</td>
                    <td>@item.Rooms</td>
                    <td>@item.SquareMeters</td>
                    <td>@item.Street</td>
                    <td>@item.Area</td>
                    <td>@item.TheirRating</td>
                    <td>@item.TotalRating</td>
                    <td>
                     @Html.Raw("<div id='" + item.RatingListId + "'>")
                        <select name="SelectedValue" onchange="this.form.submit();">
                            <option value="0"@if (item.MyRating == "00")
                                             {
                                                 @Html.Raw("selected")
                                             }>Ny</option>
                            <option value="10" @if (item.MyRating == "10")
                                               {
                                                   @Html.Raw("selected")
                                               }>Inget intresse</option>
                            <option value="50"@if (item.MyRating == "50")
                                              {
                                                  @Html.Raw("selected")
                                              }>Svagt intressse</option>
                            <option value="60"@if (item.MyRating == "60")
                                              {
                                                  @Html.Raw("selected")
                                              }>Litet intresse-vill ej ha kontakt</option>
                            <option value="70"@if (item.MyRating == "70")
                                              {
                                                  @Html.Raw("selected")
                                              }>Intresserad-Vill ha kontakt</option>
                            <option value="80"@if (item.MyRating == "80")
                                              {
                                                  @Html.Raw("selected")
                                              }>Varit på visning-Vill gå vidare</option>
                            <option value="90"@if (item.MyRating == "90")
                                              {
                                                  @Html.Raw("selected")
                                              }>Intresserad-Vill ha kontakt</option>
                            <option value="100"@if (item.MyRating == "100")
                                               {
                                                   @Html.Raw("selected")
                                               }>Avvaktar värdar</option>
                        </select>@item.MyRating
                        @Html.Raw("</div>")
                    </td>
                </tr>
                }
            }
        </tbody>
    </table>
</div>

</fieldset> 
```

这是控制器：

```
[HttpPost]
public ActionResult UpdateRatingListRow()
{
   if (Request.IsAjaxRequest())
   {
       //Do stuff, it does not hit this part because of the isAjaxRequest().
       return this.PartialView("_RatingList2", myRatingListMarked);
   }
   return this.PartialView("_RatingList2", null);
} 
```

生成的HTML： ![在此处输入图像描述](../Images/4a272153798210366e61d2e983575dfc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:37:12.437

这是我的“fulhack”（瑞典语中的丑陋黑客），添加了一个带有每个行 ID 的按钮，然后我称之为提交。仍然希望有一个干净的解决方案，而不必重写大量代码。

```
using (Ajax.BeginForm("UpdateRatingListRow", new AjaxOptions { UpdateTargetId = "container-grid2", OnSuccess = "OnSuccess('" + item.RatingListId + "')" }))
{ 
   <input type="submit" id="@item.RatingListId" style="position: absolute; top: -1000px">
   @Html.Hidden("RatingListId", item.RatingListId)
   <tr>
      <td>@Html.ActionLink("Till annons", "ViewAd", "Ad", new { id = item.CustomerId }, null)</td>
      <td>@item.Rent</td>
      <td>@item.Rooms</td>
      <td>@item.SquareMeters</td>
      <td>@item.Street</td>
      <td>@item.Area</td>
      <td>@item.TheirRating</td>
      <td>@item.TotalRating</td>
      <td>@Html.Raw("<div id='" + item.RatingListId + "'>")
        <select name="SelectedValue" onchange="document.getElementById(@item.RatingListId).click();">
          <option value="0"@if (item.MyRating == "00") 
```

# html - 媒体查询下载

> ID：14307359
> 
> 赞同：2
> 
> 时间：2013-01-13T19:37:51.063
> 
> 标签：html, css, media-queries

如果我使用媒体查询根据浏览器大小使用单独的图像定义我的背景，例如：

```
@media (min-width:1440px){div.container{background:URL('bg1440.png');}}
@media (min-width:960px){div.container{background:URL('bg960.png');}}
@media (min-width:480px){div.container{background:URL('bg480.png');}} 
```

这是我的 div 结构：

```
<div class="outerwrap">
  <div class="innerwrap">
    <div class="container"> 
```

容器类是持有背景图像的类。

浏览器会只请求相关图像还是会请求所有图像？

如果我打开浏览器并调整它的大小，比如从 1440 到 960，媒体查询会请求两个相关的图像还是仍然会请求所有图像？

如果它下载所有图像，我应该怎么做才能解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:39:50.197

这取决于浏览器和平台。

目前，[大多数浏览器只会下载需要的背景图片](http://timkadlec.com/2012/04/media-query-asset-downloading-results/)。

请注意，对于其他媒体，行为可能会有所不同（包括不是背景图像的图像）。

# android - GoogleAccountCredential 重用身份验证 - Google 云端硬盘

> ID：14307362
> 
> 赞同：6
> 
> 时间：2013-01-13T19:38:18.793
> 
> 标签：android, oauth-2.0, credentials, google-drive-api

我正在使用此方法对 Google Drive 进行身份验证： [https ://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

选择帐户效果很好。现在我想将用户凭据存储在首选项中。我可以保存帐户名称，然后再恢复它。我想重用凭据以供将来使用。

是否可以使用 Google Play 服务和 GoogleAccountCredential 重新认证？

这是我的场景：

1.  开始活动
2.  搜索已保存的凭据
3.  如果不是 -> 显示帐户选择器（这是有效的）
4.  如果我选择帐户 - 将凭据保存到首选项。

现在我关闭我的应用程序并再次运行。

1.  开始活动
2.  搜索已保存的凭据
3.  是 - 有保存的凭据。我想使用它们。

我正在尝试这样的事情：

```
credential = GoogleAccountCredential.usingOAuth2(GoogleDriveBackup.this, DriveScopes.DRIVE_FILE);

//use saved account (stored[0] is OK)
credential.setSelectedAccountName(stored[0]);
credential.getToken();
service = getDriveService(credential); 
```

在哪里：

```
 private Drive getDriveService(GoogleAccountCredential credential) {
        return new Drive.Builder(AndroidHttp.newCompatibleTransport(), 
new GsonFactory(), credential).build();
      } 
```

这是行不通的。我从 GoogleJsonResponseExcelption 收到 500 个内部服务器错误。使用适用于 Android 的 Google Play 服务的最佳方法是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T14:37:14.373

如果您尝试做的是避免用户必须重新授权您的应用程序，那么您不需要保存凭证对象。您需要做的就是保存用户使用帐户选择器选择的帐户。

下次使用您的应用程序时重新创建凭证对象时，播放服务将知道用户之前已经授予您访问权限，并且您不必显示身份验证意图（在抛出的异常中可用）。

您确实需要为用户提供一种方法来更改他选择的帐户。

# couchdb - 通过 HTTP api 更改 CouchDB 1.2.0 用户的密码

> ID：14307368
> 
> 赞同：0
> 
> 时间：2013-01-13T19:38:34.770
> 
> 标签：couchdb

我正在尝试通过保存带有密码字段的用户文档来更改用户的密码。我在 Futon 中看到创建了新的哈希和盐，我可以独立验证哈希和盐是否与新密码匹配

但是，当我尝试使用新密码时，CouchDB 只会响应旧密码。我尝试通过在 Futon 中编辑文档来手动更改密码，但我得到了相同的行为：哈希和盐更新，但 CouchDB 不响应新密码。

到目前为止，我发现更改密码的唯一方法是使用 Futon 的更改密码工具。是否无法通过 HTTP 更改密码或者我缺少一个步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:51:11.877

阅读：[http ://wiki.apache.org/couchdb/Security_Features_Overview](http://wiki.apache.org/couchdb/Security_Features_Overview)

您可能正在尝试更改管理员的密码。

> 代表服务器管理员的用户文档不需要定义“password_sha”和“salt”属性 - 他们的身份验证凭据存储在 .ini 配置文件中。

**UPD**：您可以通过以下方式更改管理员密码`/_config`API 更改管理员密码：[http ://wiki.apache.org/couchdb/Complete_HTTP_API_Reference#configuration](http://wiki.apache.org/couchdb/Complete_HTTP_API_Reference#configuration)

# css - 如何将高度 px 转换为 % 以便我的页面在调整大小时响应？

> ID：14307371
> 
> 赞同：0
> 
> 时间：2013-01-13T19:39:13.927
> 
> 标签：css, responsive-design

我正在使用 980px 的最大宽度构建响应式网格，以将我的固定 PX 宽度转换为 %，但我不确定我必须做什么才能将 PX 中设置的高度也更新为 %。谁能建议如何实现这一目标？我试图将高度设置为`max-height:300px; height:100%`但没有成功。

**Js 小提琴** [http://jsfiddle.net/5jJQk/](http://jsfiddle.net/5jJQk/)

**示例 CSS**

```
#ctn{
  max-width: 980px; /* 960 */
  width:100%;
  margin: 0 auto;
  clear: left;
  background: #eee;
  padding: 10px;
}

.col{
  background: #b7b7b7;
  max-height: 300px;
  height: 100%;
  margin: 1.041666667%; /* 10/960 */
  float: left;
}

.four{
  width: 31.25%; /* 300/960 */
}

.eight{
  width: 64.583333333%; /* 620/960 */
}

.twelve{
  width: 97.916666667%; /* 940/960 */
  clear: left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:15:39.197

`height`百分比仅在父元素定义了高度时才有效，或者它一直以百分比为单位直到根元素。

看看添加时会发生什么

```
html, body, #ctn { height:100%; } 
```

到你的 CSS。

但是，仅在非常特殊的情况下才需要定义高度。通常，您希望块适应其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:44:37.747

我会研究媒体查询，它们在转换时效果很好。

[http://mediaqueri.es/](http://mediaqueri.es/)

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

我希望这有帮助。

# wordpress - 带有自定义表单字段和电子邮件的 wordpress 插件

> ID：14307378
> 
> 赞同：0
> 
> 时间：2013-01-13T19:39:54.680
> 
> 标签：wordpress, push-notification

我正在创建一个保险公司网站。我想要一个表格，用户可以在其中填写他的详细信息，例如姓名、电子邮件、高级开始日期和结束日期等，系统会自动向高级结束日期剩余 1 个月的用户发送电子邮件。

是否有可以提供此特定功能的插件或我可以自定义以提供此功能的其他类似插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:49:01.190

试试 Dropifi 联系人小部件，[http:](http://wordpress.org/extend/plugins/dropifi-contact-widget/) //wordpress.org/extend/plugins/dropifi-contact-widget/ 。它是高度可定制的，并为自动化任务提供智能规则。你不会接触代码来实现这一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:46:15.680

我使用**快速安全联系表** [http://wordpress.org/extend/plugins/si-contact-form/](http://wordpress.org/extend/plugins/si-contact-form/) 非常好的插件，非常可定制。

# posix - 使用 brk 获取 brk_start

> ID：14307381
> 
> 赞同：0
> 
> 时间：2013-01-13T19:39:59.217
> 
> 标签：posix, init, sbrk, brk

int brk(void *end_data_segment) 手册；说：“brk() 将数据段的结尾设置为 end_data_segment 指定的值”

成功时返回 0，否则返回 -1。

但是如何获得我的中断的初始值（如 sbrk(0)）？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:46:00.543

如手册所述：

> 成功时，brk() 返回零。出错时，返回 -1，并将 errno 设置为 ENOMEM

所以没有办法通过调用来获取初始值`brk`。相反，正如您所注意到的，您应该使用`sbrk(0)`：

> sbrk() 以递增字节递增程序的数据空间。以 0 为增量调用 sbrk() 可用于查找程序中断的当前位置。

当它`brk`已经由`sbrk(0)`. 话虽如此，由于/[`mmap`](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)的某些操作系统的限制，通常使用 use 来满足您的内存分配需求可能会更加谨慎。`brk``sbrk`

# c# - 可取消的远程进程和捕获输出

> ID：14307384
> 
> 赞同：1
> 
> 时间：2013-01-13T19:40:11.260
> 
> 标签：c#, powershell, process, cancellation

我正在尝试通过其 C# API 使用 PowerShell 来执行以下操作：

1.  启动远程进程
2.  终止他们
3.  捕获远程进程的标准和错误输出（不是在进程终止之后，而是在生成该输出时）。
4.  捕获远程进程的退出代码。

我正在使用以下 PowerShell 脚本启动远程进程：

```
$ps = new-object System.Diagnostics.Process
$ps
$ps.StartInfo.Filename = "c:\Echo.exe"
$ps.StartInfo.Arguments = ""
$ps.StartInfo.RedirectStandardOutput = $true
$ps.StartInfo.RedirectStandardError = $true
$ps.StartInfo.UseShellExecute = $false
$ps.start()
$ps.WaitForExit()
$ps.ExitCode 
```

我的原型的 C# 部分如下所示：

```
// Note: in this example the process is started locally
using (Runspace runspace = RunspaceFactory.CreateRunspace(/*_remotePcConnectionInfo*/))
{
    runspace.Open();

    Pipeline pipeline = runspace.CreatePipeline();
    // Scripts.RunExecutable is that script above
    pipeline.Commands.AddScript(Scripts.RunExecutable);

    pipeline.InvokeAsync();

    var process = (Process)pipeline.Output.Read().BaseObject;

    bool started = (bool)pipeline.Output.Read().BaseObject;

    // Not showing the dummy event handlers - they simply do a Console.WriteLine now.
    process.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);
    process.BeginOutputReadLine();

    // Not showing the dummy event handlers - they simply do a Console.WriteLine now.
    process.ErrorDataReceived += new DataReceivedEventHandler(process_ErrorDataReceived);
    process.BeginErrorReadLine();

    int processExitCode = (int) pipeline.Output.Read().BaseObject;
} 
```

这确实捕获了本地运行的进程的输出，但这**也适用于远程进程吗？**（另一个不太重要的问题是：这如何适用于远程进程？.Net Remoting 是否以某种方式参与，我是否获得了 Process 的代理？）**如果没有，有什么方法可以做到这一点？请注意，我需要输出，因为它正在生成，而不是在进程终止之后**。

这不会捕获进程终止。我已经尝试通过先捕获进程 ID 然后从不同的运行空间运行“停止进程”PowerShell 脚本来进行终止。那失败了，因为“管道已经在运行”并且管道无法并行运行......然后我尝试从 C# 调用 process.Kill()，**这适用于我的本地进程，但 SO 报告它不适用于远程进程...**然后我尝试调整我的 PowerShell 脚本，使其包含一个全局变量和一个等待循环，但我从来没有弄清楚如何在管道启动后设置该变量。添加的循环如下所示：

```
while ($ps.HasExited -eq $false -and $global:cancelled -eq $false)
{
    Start-Sleep -seconds 1
}

if ($global:cancelled -eq $true)
{
    $ps.Kill()
} 
```

所以，那也失败了。**关于我的场景的流程终止有什么建议吗？**

**PowerShell 甚至适合这个吗？**（我们强烈反对我们之前尝试使用的 openSSH，因为它存在分叉问题）。

**更新：**我最终做的是调用（通过 C# 启动进程——“powershell”+“-Command ...”）到 powershell.exe，它被告知在远程执行脚本（调用命令）电脑。Powershell 默认捕获远程 PC 上产生的输出，因此我可以轻松获取 Process 实例的这个。当我想取消时，我杀死了本地进程。远程命令的返回码比较棘手。稍后我将发布命令、脚本和 C#-snippet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:15:31.320

从 Process 对象的文档中，它只允许您启动和停止本地进程。因此，如果要启动和停止远程进程，则需要使用 PowerShell 远程处理或 psexec 之类的工具。我看到您的 C# 注释表明您将设置远程运行空间。如果您在每台远程计算机上都安装了 PowerShell v2，启用了远程处理，最好位于域上并拥有适当的管理员凭据，那么这将非常有用。IIRC 设置远程运行空间的 C# 进程必须以管理员身份运行，并且它使用的凭据必须在远程计算机上具有管理员权限（除非您在每台远程计算机上设置了特殊的远程端点）。

如果您在每台远程计算机上都有 PowerShell v2 或 v3 并且可以启用远程处理（只需运行 Enable-PSRemoting -force），那么您应该可以轻松地做您想做的事情。但是，无需下拉即可使用 .NET Process 对象。只需使用 PowerShell cmdlet。将这样的内容放入脚本中，将其添加到您创建的管道中并调用它。

```
$p = Start-Process Echo.exe -Arg "output from echo.exe" -PassThru
$p | Wait-Process -Timeout 3 # 3 seconds
if (!$?) { # Success code $? returns $false if Wait-Process times out
    $p | Stop-Process
} 
```

对于异步支持，请尝试以下方式：

```
$script = {
    $pid
    ipconfig.exe /all
    $LastExitCode
}
$job = Invoke-Command localhost $script -AsJob
do {
    Receive-Job $job
}
while (!(Wait-Job $job -Timeout 1))
Receive-Job $job    
Remove-Job $job 
```

使用返回的 $pid，您可以将其与 WMI 一起使用来查找所有子进程以在必要时杀死它们，如下所示：

```
$childPids = @(Get-WmiObject -Class Win32_Process -Filter "ParentProcessID=$PID" |Select-Object -Property ProcessID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:45:52.390

Powershell Jobs 可以远程执行，并将捕获其输出并将其返回到原始计算机。有了这个，您不必在 C# 中创建远程运行空间，只需创建本地运行空间。

执行此操作的 powershell 脚本如下所示：

```
$job = invoke-command -computername remotecomputer -scriptblock { start-process "C:\Echo.exe" -wait } -asjob
while ( $job.State -eq "Running" ) {
  wait-job -job $job -timeout 1
  receive-job -job $job -keep # print the current output but keep all output for later.
}

receive-job -job $job 
```

如果在输出中也需要退出代码，您可能只需要调整 scriptblock 参数即可`invoke-command`获取退出代码。

# apache - 导航到 URL 中带有加号 (+) 的文件

> ID：14307387
> 
> 赞同：1
> 
> 时间：2013-01-13T19:40:38.107
> 
> 标签：apache, url

尝试导航到包含加号 ( `+`) 符号的文件夹中的图像。文件夹名称是`/html/images/a+b/image.jpg`

这似乎引起了问题，因为我相信浏览器正在用空格（或`%2B`）代替加号。

有没有办法可以使用当前文件夹名称访问该图像？我知道问题出在加号，因为如果我更改文件夹名称并删除加号，`/html/images/ab/image.jpg`它将正确加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:36:18.087

`+`是如何[在 URL 中编码空格字符](https://stackoverflow.com/questions/1634271/url-encoding-the-space-character-or-20)。如果您尝试访问包含文字的文件名，`+`则需要将其编码为`%2B`.

# spring - 找不到 XML 模式命名空间的 Spring NamespaceHandler

> ID：14307389
> 
> 赞同：5
> 
> 时间：2013-01-13T19:41:00.600
> 
> 标签：spring, namespaces, xsd

我遇到了以下问题。我正在尝试使用 Maven 或 Ivy 插件来从 pom.xml 文件生成 deps 并运行 GWT webapp。我已经检查了 100 次 spring-tx 在依赖项中。我正在使用所有 3.1.3 版本的 spring。罐子在类路径上。我手动检查了 maven 依赖库列表（常春藤的 pom.xml*）。我还检查了 META-INF/* 文件是否在 jar 中并且没有损坏。

我没有使用 maven 来构建/运行任何东西，而是使用 eclipse 调试目标来运行 GWT webapp。

我在互联网上看到很多线程，但没有一个能解决我的问题。相关：http: [//jira.codehaus.org/browse/MASSEMBLY-360](http://jira.codehaus.org/browse/MASSEMBLY-360)？

有人可以指出这个问题的任何可能的根本原因吗？

> 违规资源：ServletContext资源[/WEB-INF/applicationContext.xml]；嵌套异常是 org.springframework.beans.factory.parsing.BeanDefinitionParsingException：配置问题：找不到 XML 模式命名空间的 Spring NamespaceHandler [http://www.springframework.org/schema/tx] 违规资源：类路径资源 [应用程序-context/hibernate.xml]：org.springframework.beans.factory.parsing.BeanDefinitionParsingException：配置问题：找不到 XML 模式命名空间的 Spring NamespaceHandler [http://www.springframework.org/schema/tx] 违规资源：类路径资源 [application-context/hibernate.xml]
> 
> ```
>  at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
>   at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
>   at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80) 
> ```

这是我的 Maven pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>UserInterface</groupId>
    <artifactId>UserInterface</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.9.Final</version>
        </dependency>
        <dependency>
            <groupId>com.mchange</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.2-pre8</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>4.1.9.Final</version>
            <exclusions>
                <exclusion>
                    <artifactId>c3p0</artifactId>
                    <groupId>c3p0</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.7</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.1</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>com.amazonaws</groupId>
            <artifactId>aws-java-sdk</artifactId>
            <version>1.3.27</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjweaver</artifactId>
            <version>1.7.1</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.22</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
    </dependencies>
</project> 
```

hibernate.xml 命名空间声明

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/tx
           http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"> 
```

这是抛出异常之前的启动痕迹

```
0    [main] INFO  org.springframework.web.context.ContextLoader  - Root WebApplicationContext: initialization started
48   [main] DEBUG org.springframework.web.context.support.StandardServletEnvironment  - Initializing new StandardServletEnvironment
49   [main] DEBUG org.springframework.web.context.support.StandardServletEnvironment  - Adding [servletConfigInitParams] PropertySource with lowest search precedence
49   [main] DEBUG org.springframework.web.context.support.StandardServletEnvironment  - Adding [servletContextInitParams] PropertySource with lowest search precedence
53   [main] DEBUG org.springframework.web.context.support.StandardServletEnvironment  - Adding [jndiProperties] PropertySource with lowest search precedence
54   [main] DEBUG org.springframework.web.context.support.StandardServletEnvironment  - Adding [systemProperties] PropertySource with lowest search precedence
54   [main] DEBUG org.springframework.web.context.support.StandardServletEnvironment  - Adding [systemEnvironment] PropertySource with lowest search precedence
54   [main] DEBUG org.springframework.web.context.support.StandardServletEnvironment  - Initialized StandardServletEnvironment with PropertySources [servletConfigInitParams,servletContextInitParams,jndiProperties,systemProperties,systemEnvironment]
54   [main] INFO  org.springframework.web.context.support.XmlWebApplicationContext  - Refreshing Root WebApplicationContext: startup date [Sun Jan 13 12:15:43 PST 2013]; root of context hierarchy
57   [main] DEBUG org.springframework.web.context.support.StandardServletEnvironment  - Replacing [servletContextInitParams] PropertySource with [servletContextInitParams]
[WARN] Server class 'org.springframework.asm.ClassVisitor' could not be found in the web app, but was found on the system classpath
   [WARN] Adding classpath entry 'file:/home/parth/.m2/repository/org/springframework/spring-asm/3.1.3.RELEASE/spring-asm-3.1.3.RELEASE.jar' to the web app classpath for this session
   For additional info see: file:/home/parth/apps/gwt-2.4.0/doc/helpInfo/webAppClassPath.html
89   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Initializing new StandardEnvironment
89   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Adding [systemProperties] PropertySource with lowest search precedence
89   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Adding [systemEnvironment] PropertySource with lowest search precedence
89   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Initialized StandardEnvironment with PropertySources [systemProperties,systemEnvironment]
90   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Initializing new StandardEnvironment
90   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Adding [systemProperties] PropertySource with lowest search precedence
90   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Adding [systemEnvironment] PropertySource with lowest search precedence
90   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Initialized StandardEnvironment with PropertySources [systemProperties,systemEnvironment]
96   [main] INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader  - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml]
98   [main] DEBUG org.springframework.beans.factory.xml.DefaultDocumentLoader  - Using JAXP provider [com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl]
119  [main] DEBUG org.springframework.beans.factory.xml.PluggableSchemaResolver  - Loading schema mappings from [META-INF/spring.schemas]
120  [main] DEBUG org.springframework.beans.factory.xml.PluggableSchemaResolver  - Loaded schema mappings: {http://www.springframework.org/schema/context/spring-context-3.1.xsd=org/springframework/context/config/spring-context-3.1.xsd, http://www.springframework.org/schema/lang/spring-lang-2.5.xsd=org/springframework/scripting/config/spring-lang-2.5.xsd, http://www.springframework.org/schema/lang/spring-lang.xsd=org/springframework/scripting/config/spring-lang-3.1.xsd, http://www.springframework.org/schema/context/spring-context-2.5.xsd=org/springframework/context/config/spring-context-2.5.xsd, http://www.springframework.org/schema/cache/spring-cache-3.1.xsd=org/springframework/cache/config/spring-cache-3.1.xsd, http://www.springframework.org/schema/util/spring-util-3.0.xsd=org/springframework/beans/factory/xml/spring-util-3.0.xsd, http://www.springframework.org/schema/context/spring-context.xsd=org/springframework/context/config/spring-context-3.1.xsd, http://www.springframework.org/schema/util/spring-util-2.0.xsd=org/springframework/beans/factory/xml/spring-util-2.0.xsd, http://www.springframework.org/schema/task/spring-task-3.0.xsd=org/springframework/scheduling/config/spring-task-3.0.xsd, http://www.springframework.org/schema/util/spring-util-2.5.xsd=org/springframework/beans/factory/xml/spring-util-2.5.xsd, http://www.springframework.org/schema/tool/spring-tool-3.0.xsd=org/springframework/beans/factory/xml/spring-tool-3.0.xsd, http://www.springframework.org/schema/jee/spring-jee-3.1.xsd=org/springframework/ejb/config/spring-jee-3.1.xsd, http://www.springframework.org/schema/tool/spring-tool-2.0.xsd=org/springframework/beans/factory/xml/spring-tool-2.0.xsd, http://www.springframework.org/schema/context/spring-context-3.0.xsd=org/springframework/context/config/spring-context-3.0.xsd, http://www.springframework.org/schema/task/spring-task.xsd=org/springframework/scheduling/config/spring-task-3.1.xsd, http://www.springframework.org/schema/tool/spring-tool-2.5.xsd=org/springframework/beans/factory/xml/spring-tool-2.5.xsd, http://www.springframework.org/schema/beans/spring-beans-2.0.xsd=org/springframework/beans/factory/xml/spring-beans-2.0.xsd, http://www.springframework.org/schema/beans/spring-beans-3.1.xsd=org/springframework/beans/factory/xml/spring-beans-3.1.xsd, http://www.springframework.org/schema/lang/spring-lang-3.1.xsd=org/springframework/scripting/config/spring-lang-3.1.xsd, http://www.springframework.org/schema/beans/spring-beans.xsd=org/springframework/beans/factory/xml/spring-beans-3.1.xsd, http://www.springframework.org/schema/beans/spring-beans-2.5.xsd=org/springframework/beans/factory/xml/spring-beans-2.5.xsd, http://www.springframework.org/schema/jee/spring-jee.xsd=org/springframework/ejb/config/spring-jee-3.1.xsd, http://www.springframework.org/schema/tool/spring-tool.xsd=org/springframework/beans/factory/xml/spring-tool-3.1.xsd, http://www.springframework.org/schema/cache/spring-cache.xsd=org/springframework/cache/config/spring-cache-3.1.xsd, http://www.springframework.org/schema/jee/spring-jee-3.0.xsd=org/springframework/ejb/config/spring-jee-3.0.xsd, http://www.springframework.org/schema/jee/spring-jee-2.0.xsd=org/springframework/ejb/config/spring-jee-2.0.xsd, http://www.springframework.org/schema/util/spring-util-3.1.xsd=org/springframework/beans/factory/xml/spring-util-3.1.xsd, http://www.springframework.org/schema/jee/spring-jee-2.5.xsd=org/springframework/ejb/config/spring-jee-2.5.xsd, http://www.springframework.org/schema/beans/spring-beans-3.0.xsd=org/springframework/beans/factory/xml/spring-beans-3.0.xsd, http://www.springframework.org/schema/lang/spring-lang-3.0.xsd=org/springframework/scripting/config/spring-lang-3.0.xsd, http://www.springframework.org/schema/task/spring-task-3.1.xsd=org/springframework/scheduling/config/spring-task-3.1.xsd, http://www.springframework.org/schema/tool/spring-tool-3.1.xsd=org/springframework/beans/factory/xml/spring-tool-3.1.xsd, http://www.springframework.org/schema/lang/spring-lang-2.0.xsd=org/springframework/scripting/config/spring-lang-2.0.xsd, http://www.springframework.org/schema/util/spring-util.xsd=org/springframework/beans/factory/xml/spring-util-3.1.xsd}
121  [main] DEBUG org.springframework.beans.factory.xml.PluggableSchemaResolver  - Found XML schema [http://www.springframework.org/schema/beans/spring-beans-3.1.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-3.1.xsd
156  [main] DEBUG org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader  - Loading bean definitions
165  [main] INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader  - Loading XML bean definitions from class path resource [application-context/properties.xml]
[WARN] Server resource 'application-context/properties.xml' could not be found in the web app, but was found on the system classpath
   [WARN] Adding classpath entry 'file:/home/parth/Workspaces/urbanalta/UserInterface/bin/' to the web app classpath for this session
   For additional info see: file:/home/parth/apps/gwt-2.4.0/doc/helpInfo/webAppClassPath.html
167  [main] DEBUG org.springframework.beans.factory.xml.DefaultDocumentLoader  - Using JAXP provider [com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl]
168  [main] DEBUG org.springframework.beans.factory.xml.PluggableSchemaResolver  - Found XML schema [http://www.springframework.org/schema/beans/spring-beans-3.1.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-3.1.xsd
190  [main] DEBUG org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader  - Loading bean definitions
209  [main] DEBUG org.springframework.beans.factory.xml.BeanDefinitionParserDelegate  - Neither XML 'id' nor 'name' specified - using generated bean name [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0]
212  [main] DEBUG org.springframework.beans.factory.xml.XmlBeanDefinitionReader  - Loaded 2 bean definitions from location pattern [classpath:application-context/properties.xml]
212  [main] DEBUG org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader  - Imported 2 bean definitions from URL location [classpath:application-context/properties.xml]
212  [main] INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader  - Loading XML bean definitions from class path resource [application-context/datasource.xml]
214  [main] DEBUG org.springframework.beans.factory.xml.DefaultDocumentLoader  - Using JAXP provider [com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl]
215  [main] DEBUG org.springframework.beans.factory.xml.PluggableSchemaResolver  - Found XML schema [http://www.springframework.org/schema/beans/spring-beans-3.1.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-3.1.xsd
234  [main] DEBUG org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader  - Loading bean definitions
235  [main] DEBUG org.springframework.beans.factory.xml.XmlBeanDefinitionReader  - Loaded 1 bean definitions from location pattern [classpath:application-context/datasource.xml]
235  [main] DEBUG org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader  - Imported 1 bean definitions from URL location [classpath:application-context/datasource.xml]
235  [main] INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader  - Loading XML bean definitions from class path resource [application-context/hibernate.xml]
236  [main] DEBUG org.springframework.beans.factory.xml.DefaultDocumentLoader  - Using JAXP provider [com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl]
238  [main] DEBUG org.springframework.beans.factory.xml.PluggableSchemaResolver  - Found XML schema [http://www.springframework.org/schema/beans/spring-beans-3.1.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-3.1.xsd
564  [main] DEBUG org.springframework.beans.factory.xml.PluggableSchemaResolver  - Found XML schema [http://www.springframework.org/schema/tool/spring-tool-3.1.xsd] in classpath: org/springframework/beans/factory/xml/spring-tool-3.1.xsd
572  [main] DEBUG org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader  - Loading bean definitions
574  [main] DEBUG org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver  - Loaded NamespaceHandler mappings: {http://www.springframework.org/schema/p=org.springframework.beans.factory.xml.SimplePropertyNamespaceHandler, http://www.springframework.org/schema/c=org.springframework.beans.factory.xml.SimpleConstructorNamespaceHandler, http://www.springframework.org/schema/lang=org.springframework.scripting.config.LangNamespaceHandler, http://www.springframework.org/schema/jee=org.springframework.ejb.config.JeeNamespaceHandler, http://www.springframework.org/schema/util=org.springframework.beans.factory.xml.UtilNamespaceHandler, http://www.springframework.org/schema/cache=org.springframework.cache.config.CacheNamespaceHandler, http://www.springframework.org/schema/task=org.springframework.scheduling.config.TaskNamespaceHandler, http://www.springframework.org/schema/context=org.springframework.context.config.ContextNamespaceHandler}
576  [main] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath:application-context/hibernate.xml]
Offending resource: ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/tx]
Offending resource: class path resource [application-context/hibernate.xml] 
```

# android - Android字符串比较不起作用

> ID：14307405
> 
> 赞同：3
> 
> 时间：2013-01-13T19:42:15.193
> 
> 标签：android

我很难使用 Java 比较 Android 中的两个字符串，我正在做的是运行 HTTP 获取请求，该请求返回是或否，并据此决定是否启动新活动。

我正在 Async onPostExecute 方法中执行字符串比较，虽然 HTTP 返回的字符串是 yes，但它对我不起作用。

这是代码

```
 protected void onPostExecute(String result) {
        progressDialog.dismiss();
        if(result.equals("yes"))
        {
            Intent toDashboard = new Intent(LoginActivity.this,Dashboard.class); 
            startActivity(toDashboard);
            Toast.makeText(LoginActivity.this, "It was yes", Toast.LENGTH_LONG).show();
        }
        else
        {
            Toast.makeText(LoginActivity.this, result, Toast.LENGTH_LONG).show();
        }
    } 
```

虽然返回的字符串是 yes，但它仍然会跳过 if 语句并创建一个显示“Yes”的 toast。

我还尝试了一些其他方法来匹配字符串，它们都在这里

```
if(result == "yes")
if(result.toString().equals("yes"))
if(result.contentEquals("yes"))
if(result.equalsIgnoreCase("yes")) 
```

它们都不适合我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T20:58:16.440

结果中可能有一些空白。

尝试修剪它。

```
result.trim().equals("yes") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T04:28:07.050

尝试这个

**str1.toLowerCase().contains(str2.toLowerCase())**

它对我有用

# scala - 运行 akka 演员列表以获取消息列表

> ID：14307406
> 
> 赞同：4
> 
> 时间：2013-01-13T19:42:31.413
> 
> 标签：scala, akka

我是 akka 的新手，我想一次运行一个列表 akka 演员来获取消息列表，例如（我在这里使用 scala）：

输入

```
message_1
message_2
message_3 
```

每条消息的输出：

```
1
2
3 
```

将一次运行 3 个 akka 演员，将列表中的每个参数传递给他们每个人，我想稍后将这些结果用作`List`答案。理想情况下，我正在寻找可以为我提供以下服务的操作：

```
runActorsForListAndWaitForAnswer(messagesList).map(_.toInt()).sum 
```

我不知道这种方法是否存在，但它会有所帮助。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T20:06:43.740

首先，你必须放弃命令式、阻塞式的思维定势。当一切都是异步的时，Akka 的味道最好。你永远不应该阻止，等待另一个演员的回复。相反，您可以获取`Future[T]`对象并对其应用功能。*当*future 完成时，将调用此函数。

让我们举个例子：你有一个`SquareActor`接受 an`Int`并返回它的平方的 a。要求它回复的正确方法是：

```
squareActor ? 9 map {result =>
  println(result)  //81
}
//more code 
```

非常重要：代码块`println`不会阻塞。*更多代码*将立即执行，您的回调方法将在稍后调用。

话虽如此，我们可以开始实施您的用例。如果我理解正确，您有一个演员列表和一个整数列表。您想将每个整数都发送给一个演员。这是一个伪代码：

```
val actors: List[ActorRef] = //...
val numbers: List[Int] = //...
val actorsWithArguments: List[(ActorRef, Int)] = actors zip numbers
val futuresOfAny: List[Future[Any]] = actorsWithArguments map { case (actor, number) => actor ? number}
val futures: List[Future[Int]] = futuresOfAny map {_.mapTo[Int]}
val futureOfAllResults: Future[List[Int]] = Future.sequence(futures)
val future: Future[Int] = futureOfAllResults map { _.sum} 
```

我故意留下显式类型以帮助您遵循代码。让我们一步一步来：

*   `actorsWithArguments`是一个`List`元组。每个项目都包含一对演员和一条消息 - `(actor1, message1)`, `(actor2, message2)`, ...

*   `futuresOfAny`包含调用`Future`结果的列表。返回 a因为：a）结果（尚）未知 b）Akka 不知道结果的类型（回复消息）`actor ? number``?``Future[Any]`

*   `futures`是强类型的，因为我们知道每个回复都是一个`Int`. 我们`mapTo`每个`Future[Any]`人`Future[Int]`

*   `futureOfAllResults``List[Future[Int]]`采用了从 a到的非常棒的转换`Future[List[Int]]`。换句话说，我们只是将未来结果列表转换为包含所有项目的单个未来结果。

*   `future`持有（*将来会持有*）你的结果。

如果您认为这是很多代码，那只是出于教育目的。链接和类型推断可以发挥作用：

```
val future = Future.sequence(actors zip numbers map { case (actor, number) => actor ? number} map { _.mapTo[Int]}) map { _.sum} } 
```

最后你得到了你的结果。好吧，你*将来会得到*。现在，如果您想将该结果发送回另一个演员，您可以说：

```
future map {sum => otherActor ! sum}
//or even...
future map otherActor.! 
```

我**强烈**建议您阅读官方文档中[有关 Futures](http://doc.akka.io/docs/akka/2.1.0/scala/futures.html)的章节，以使这一切更清楚。

# ios - NSNotificationCenter EXC_BAD_ACCESS 使用 addObserver 时？

> ID：14307407
> 
> 赞同：1
> 
> 时间：2013-01-13T19:42:51.977
> 
> 标签：ios, exc-bad-access, sharekit, nsnotificationcenter

我试图弄清楚为什么我的应用程序中的 addObserver 调用在应该调用其选择器时导致 EXC_BAD_ACCESS 。让我再解释一下，我在调用 MFMessageComposeView 的方法中调用 addObserver，然后在第 3 方库 ShareKit 中为“didFinish”通知添加观察者。现在，只要调用 addObserver 的选择器，就会引发 EXC_BAD_ACCESS。如果这有什么不同的话，我的 addObserver 也在一个 NSObject 类中。

这是我用于 addObserver 的代码：

```
 NSString *moredetailedshareText = [NSString stringWithFormat:@"Hey"];
        [SHKTextMessage shareText:moredetailedshareText];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(SHKSharerFinished:) name:@"SHKFinishedCall" object:nil]; 
```

这是 ShareKit 中的 postNotification 调用：

```
- (void)sharerFinishedSending:(SHKSharer *)sharer
{
    NSLog(@"finishedsending");
    [[NSNotificationCenter defaultCenter] postNotificationName:@"SHKFinishedCall" object:sharer];
    if (!sharer.quiet)
        [[SHKActivityIndicator currentIndicator] displayCompleted:SHKLocalizedString(@"Saved!")];
} 
```

这不起作用的原因是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:15:35.257

如果在发布通知时发生崩溃，则解决方案显然是发布的目标。

NSNotificationCenter 不保留注册的观察者。您必须确保观察者在注册时仍然活着，并且在它被释放之前它未注册。

# symfony - Mopa 无法调用 post-install-cmd 脚本

> ID：14307408
> 
> 赞同：4
> 
> 时间：2013-01-13T19:43:03.643
> 
> 标签：symfony, twitter-bootstrap, composer-php

每个人！

我在 Symfony 2.1 中使用 MopaBootstrapBundle。按照文档中的说明，当我调用 composer update 时一切顺利，直到它尝试生成自动加载文件。它应该调用一个脚本，并给出以下错误消息：

```
Class Mopa\BootstrapBundle\Composer\ScriptHandler is not autoloadable, can not call post-install-cmd script 
```

捆绑包已在 AppKernel 中正确注册，我想我必须用 composer 做一些事情来使类可加载，但我不知道是什么或在哪里。有人遇到过这个问题吗？

# wordpress - 在本地服务器上更新 WordPress（最大执行时间）

> ID：14307410
> 
> 赞同：0
> 
> 时间：2013-01-13T19:43:11.180
> 
> 标签：wordpress, local, max, execution

一段时间以来，在尝试更新本地服务器上的不同 WP 安装时，我一直得到“超过 30 秒的最大执行时间”。

我知道我可以通过在 php.ini 中禁用它来解决这个问题。但我想要做的是找到问题并进行一般修复。毕竟这是一个本地服务器，所以这个操作应该只需要几秒钟的时间。

我的本地服务器在 XAMPP 上运行。

来自 WP 管理员的确切消息：

> [从http://wordpress.org/wordpress-3.5-new-bundled.zip](http://wordpress.org/wordpress-3.5-new-bundled.zip)下载更新……</p>
> 
> 致命错误：第 949 行的 E:\Local Server\htdocs\test wp\wp-includes\class-http.php 中的最大执行时间超过 30 秒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T19:50:10.020

暂时增加您可以`ini_set()`在 php 页面中使用的最大执行时间

`ini_set('max_execution_time', 300); //300 seconds = 5 minutes`

否则你需要在 php.ini 中进行

`max_execution_time = 30`

更改值（以秒为单位）或设置为 0 以无限时间并重新启动 Apache 以使设置生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:40:17.583

似乎您无法从服务器打开连接。如果您可以访问 shell，您可以 ping 一个站点，例如：

```
 ping google.com 
```

如果 ping 失败，您很可能处于无法让您出去的防火墙后面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T17:39:06.977

打开`php.ini`文件并替换

```
max_execution_time=valor 
```

和

```
max_execution_time=0 
```

# wufoo - 如何仅将 Wufoo 条目的子集传输到网页？

> ID：14307418
> 
> 赞同：1
> 
> 时间：2013-01-13T19:43:47.693
> 
> 标签：wufoo

我有一个用于潜在客户生成的 Wufoo 表格。我现在希望创建一个潜在客户的公共委员会，但只有一部分信息（目标是通过显示一些信息来让人们有兴趣购买潜在客户）。

因此，我需要确保该网页（将公开访问）只会接收一部分数据。

我尝试使用此处描述的解决方案：

[http://www.wufoo.com/2011/01/24/partygoers/](http://www.wufoo.com/2011/01/24/partygoers/)

这是一个使用 PHP 文件从 Wufoo API 获取数据的 jQuery 插件。尽管在我看来，访问者的浏览器以 JSON 格式接收到完整的数据。

如何仅传输表单条目的子集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:38:02.857

您可以使用 PHP cURL 执行此服务器端，如[Wufoo API 文档中所述](http://help.wufoo.com/articles/en_US/SurveyMonkeyArticleType/Wufoo-REST-API-V3)

我发现请求 JSON 和使用 PHP 更容易`json_decode`

然后从结果数组中选择要输出到页面的数据。

# c - 如何在 C 中的 struct 内创建动态数组？

> ID：14307425
> 
> 赞同：-2
> 
> 时间：2013-01-13T19:44:34.037
> 
> 标签：c, arrays, struct

我目前在带有 C（非 C++）和 OpenGL 的 win7 64 位上使用 VS2008 Express。拥有这个我已经编码了一段时间的软件 3d 引擎，是时候从文件中加载对象了。最大的变化是从结构内的静态数组（完成并除尘）转移到结构内的动态数组（痛苦）。

结构如下：

```
// the structure for handling an object
struct ObjectHolder
{
    int iVertexCount;     //number of vertices of object being loaded 

    //float fVerticeStore[48];  //actual vertex data read from file
                                     //changing to dynamic
                                    //this works but is not scalable

    //my dynamic array test
    float *fpVerticeStore = NULL;   //should be dynamic

}; 
```

好的，那么我有一个在初始化引擎时调用的函数。

1.  它实例化结构
2.  打开保存对象数据的文件
3.  然后将数据读入动态数组
4.  沿途测试任意错误

```
void weLoad_file_objects_to_memory()
{

    int i = 0; 

    ifstream indata; // nuf said

    int num1, num2, num3; // variables to hold vertex data
    char tag[2];          // tag holds the abbreviation of the data type being loaded
                        //such as vc = vertexcount, v = vertex, l = line
                        //mildly similar to .obj format 

    indata.open("construct.dat"); // opens the file

    if(!indata) 
    { // file couldn't be opened
            cerr << "Error: file could not be opened" << endl;
    exit(1);

    }

    struct ObjectHolder weConstructObject;  //struct instantiated here

    indata >> tag;   //tag simply tests for type of data in file

    if ( tag == "vc") 
    {
        indata >> weConstructObject.iVertexCount;

        //set size of dynamic array ie: the Vertex Store 

        //first try using "new" does not work
        //weConstructObject.fpVerticeStore = new int[weConstructObject.iVertexCount]; 

        //second try using malloc does not work
        weConstructObject.fpVerticeStore = (float*) malloc(32 * sizeof(float));
    }
    else
    {
        MessageBox(NULL,"Vertex Count Error!","VERTEX COUNT ERROR",MB_OK|MB_ICONEXCLAMATION);
        //break;
    }

    //read in vertex data from file
    while ( !indata.eof() ) 
    { // keep reading until end-of-file
    indata >> tag >> num1 >> num2 >> num3;

    if (tag == "v") 
    {
        weConstructObject.fpVerticeStore[i++] = float(num1);
        weConstructObject.fpVerticeStore[i++] = float(num2);
        weConstructObject.fpVerticeStore[i++] = float(num3);
    }
    else
    {
        MessageBox(NULL,"Vertex Store Error!","STORE ERROR",MB_OK|MB_ICONEXCLAMATION);
        //break;
    }

}
   indata.close();
   //cout << "End-of-file reached.." << endl;
   //return 0;

} 
```

在关闭发动机时，以下内容适用

```
// Delete all dynamic arrays
delete [] weConstructObject.fpVerticeStore; // When done, free memory pointed to.
weConstructObject.fpVerticeStore = NULL; // Clear to prevent using invalid memory reference. 
```

构造.dat 看起来像

```
vc 16
v -20 0 20
v -10 0 20
... 
```

这个问题有很多版本，非常混乱。我喜欢保持我的代码简单。谁能弄清楚我为什么会出现编译错误？

```
only static const integral data members can be initialized within a class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:05:14.487

您可以在结构中声明一个指针并使用 malloc() 设置其初始大小，然后在从输入文件读取的代码部分中包含一个 if 语句，如果需要，它将 realloc() 。

初始内存分配

```
//When comparing a string to a pointer you MUST use strcmp()
if (strcmp(tag, "vc")==0) 
{
    //You should not need to typecast your pointer as float pointer unless it is
    //declared as something else i.e. char int
    weConstructObject.fpVerticeStore = (float*) malloc(32 * sizeof(float));

    //You should instead allocate your memory this way note that I allocate
    //size+1 the +1 being for the NULL terminating character. So the usable space of
    //in your array is size not size-1.
    int size = 32;
    weConstructObject.fpVerticeStore = malloc(sizeof(float)*size+1)
    if(weConstructObject.fpVerticeStore == NULL)
    {
      //Error
    }
}
else
{
    MessageBox(NULL,"Vertex Count Error!","VERTEXCOUNTERROR",MB_OK|MB_ICONEXCLAMATION);
    //break;
}
int size = 32;
weConstructObject.fpVerticeStore = malloc(sizeof(float)*size+1) 
```

必要时重新分配内存

```
while(!indata.eof())
{
   indata >> tag >> num1 >> num2 >> num3; 
   if(i >= size) //i should represent your current index in the array
   {
     size *= 2;
     float *tmp = realloc(weConstructObject.fpVerticeStore, sizeof(float)*size+1)
     if (tmp == NULL)
     {
        //Error
     }
     else
     {
       weConstructObject.fpVerticeStore = tmp;
       //You should now have size*2 usable space in your array.
     }
   }
   //You don't have to use strcmp() here if you know where the character constant v
   //will be located in your array i.e if (tag[0] == 'v')
   if (strcmp(tag, "v")==0)
   {
     weConstructObject.fpVerticeStore[i++] = float(num1);
     weConstructObject.fpVerticeStore[i++] = float(num2);
     weConstructObject.fpVerticeStore[i++] = float(num3);
   }
   else
   {
     MessageBox(NULL,"Vertex Store Error!","STORE ERROR",MB_OK|MB_ICONEXCLAMATION);
     //break;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:53:29.653

当您在结构中只需要一个动态数组时，您可以选择使用“struct hack”（原始形式或 C99 形式）

```
struct ObjectHolder
{
    int iVertexCount;
    float fpVerticeStore[]; /* use `[1]` for C89/90 */
};

int iVertexCount;
...
struct ObjectHolder *p = malloc(offsetof(ObjectHolder, fpVerticeStore) + 
  iVertexCount * sizeof *p->fpVerticeStore);
p->iVertexCount = iVertexCount;
... 
```

或独立的动态分配数组

```
struct ObjectHolder
{
    int iVertexCount;
    float *fpVerticeStore;
};

ObjectHolder holder;
...
holder.fpVerticeStore = 
  malloc(holder.iVertexCount * sizeof *holder.fpVerticeStore); 
```

请注意，在第一种情况下`ObjectHolder`，必须动态分配整个嵌入数组，这意味着您不能`ObjectHolder`在知道确切的数组大小之前预先创建。`ObjectHolder`在第二种方法中，如何分配自身完全无关紧要。

此外，在第二种方法中，可能根本不需要动态分配，假设它符合您对数组生命周期的要求

```
struct ObjectHolder
{
    int iVertexCount;
    float *fpVerticeStore;
};

ObjectHolder holder;
...
float vertices[holder.iVertexCount];
holder.fpVerticeStore = vertices; 
```

选择更适合您要求的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T19:48:55.197

您至少有一个问题，您的编译器正在抱怨：

```
// the structure for handling an object
struct ObjectHolder
{
    int iVertexCount;     //number of vertices of object being loaded 

    //float fVerticeStore[48];  //actual vertex data read from file
                                     //changing to dynamic
                                    //this works but is not scalable

    //my dynamic array test
    float *fpVerticeStore; // = NULL;   //should be dynamic
    //You cannot initialize inside the definition of the struct.  

};

struct ObjectHolder objHolder;
objHolder.fpVerticeStore = (float*) malloc(32 * sizeof(float)); //allocate memory

// do stuff

free(objHolder.fpVerticeStore); //Free memory 
```

此外，在 C 中，您必须使用`malloc`动态分配内存并`free`再次释放内存。在 C++ 中，您将分别使用`new`和`delete`。

另一个问题是：

```
if (tag == "v") 
```

你有一个`char`数组，所以如果你想检查一个元素的值是什么，你需要索引到数组并进行比较，如下所示：

```
if (tag[0] == 'v') { } 
```

在 C++ 中你永远不会这样做：

```
 while ( !indata.eof() ) 
 { // keep reading until end-of-file
  indata >> tag >> num1 >> num2 >> num3; 
```

相反，你最好这样做：

```
 while ( indata >> tag >> num1 >> num2 >> num3 ) {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:31:36.797

伙计们，非常感谢。我有它的工作。但是我决定使用 AndreyT 的第二个例子。原因是灵活性和独立性。我需要在代码中的另一个位置声明结构，因此需要（正如 AndreyT 所说）一个独立的动态分配数组。

我对 AndreyT 的代码做了一个修复。malloc 会生成错误，因此需要在其前面添加 (float*)。非常感谢 AndreyT 和其他用户的评论。

如果您需要这个有用的功能，这里是可编译的代码：享受吧！

Lee 在 Sourceforge 上的 WorldEngine 项目

```
#include <windows.h>    
//file handler
#include <iostream>
    using std::cerr;
    using std::cout;
    using std::endl;

#include <fstream>
    using std::ifstream;

#include <cstdlib> // for exit function
//end file handler

struct ObjectHolder
{
    int iVertexCount;
    float *fpVerticeStore;
};

ObjectHolder holder;

//float vertices[holder.iVertexCount];

int main(void)
{
    ifstream indata; // nuf said

float num1, num2, num3; // variables to hold vertex data
char tag[2];          // tag holds the abbreviation of the data type being loaded
                    //such as vc = vertexcount, v = vertex, l = line
                    //mildly similar to .obj format 

indata.open("construct.dat"); // opens the file
 if(!indata) 
{ // file couldn't be opened
        cerr << "Error: file could not be opened" << endl;
exit(1);

}
indata >> tag;   //tag simply tests for type of data in file

if (strcmp(tag, "c")==0) 
{
    indata >> holder.iVertexCount;

    //holder.fpVerticeStore = vertices;
    holder.fpVerticeStore = (float*)malloc(holder.iVertexCount * sizeof *holder.fpVerticeStore);
}
else
{
    MessageBox(NULL,LPCSTR("Vertex Count Error!"),LPCSTR("VERTEX COUNT ERROR"),MB_OK|MB_ICONEXCLAMATION);
    //break;
}

 printf("vertex count %d\n", holder.iVertexCount);
int j = 1;
//read in vertex data from file
while ( !indata.eof() ) 
{ // keep reading until end-of-file
    indata >> tag >> num1 >> num2 >> num3;
    int i = 0;
    if (strcmp(tag, "v")==0) 
    {
        printf("vertex %d", j++);

        holder.fpVerticeStore[i++] = num1;
        printf(" %f", holder.fpVerticeStore[i - 1]);

        holder.fpVerticeStore[i++] = num2;
        printf(" %f", holder.fpVerticeStore[i - 1]);

        holder.fpVerticeStore[i++] = num3;
        printf(" %f\n", holder.fpVerticeStore[i - 1]);
    }
    else
    {
        MessageBox(NULL,LPCSTR("Vertex Store Error!"),LPCSTR("STORE ERROR"),MB_OK|MB_ICONEXCLAMATION);
        //break;
    }

}
indata.close();

//return 0;
} 
```

# ios - 所有 UIButtons 的 Ame 方法

> ID：14307433
> 
> 赞同：1
> 
> 时间：2013-01-13T19:45:40.200
> 
> 标签：ios, xcode

我有许多链接到代码的 UIButtons，但我希望有一个适用于所有 UIbuttons 的方法，而无需将该方法连接到按钮，以便在按下每个按钮时播放声音。有没有办法检测何时按下一般 UIbutton？即使没有链接到任何代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T19:54:20.517

正如我在评论中提到的，一种选择是通过子类化`UIButton`. 您可以创建一个子类`UIButton`并实现其`init`方法以添加一个在按下时将播放声音的动作。这就像正常的按钮操作，但目标将是这个自定义子类。

```
- (id)initWithFrame:(CGRect)frame {
    if (self=[super initWithFrame:frame]) {
        [self addTarget:self action:@selector(playSound) forControlEvents:UIControlEventTouchUpInside];
    }
    return self;
}

- (void)playSound {
  //play sound
} 
```

然后使用按钮，

```
CustomButton *aButton = [[CustomButton alloc] initWithFrame:aFrame]; 
```

如果您使用的是 xib 或故事板，您可以将按钮对象的类从 更改`UIButton`为`CustomButton`。

# python - 日期范围和天真的日期时间抛出 Runtimewarning

> ID：14307440
> 
> 赞同：2
> 
> 时间：2013-01-13T19:46:22.377
> 
> 标签：python, django

给定今天过滤 Django 条目的日期范围：

```
today_min = datetime.datetime.combine(timezone.now(), datetime.time.min)
today_max = datetime.datetime.combine(timezone.now(), datetime.time.max)
today_events = Entry.objects.filter(due_date_time__range=(today_min, today_max)) 
```

为了考虑时区支持，我显然使用`timezone.now()`而不是，但我仍然收到错误消息：`datetime.date.today()`

```
RuntimeWarning: DateTimeField received a naive datetime (2013-01-13 00:00:00) while time zone support is active.

RuntimeWarning: DateTimeField received a naive datetime (2013-01-13 23:59:59.999999) while time zone support is active. 
```

我在看什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:01:53.010

根据 Python 3.2 中 datetime 模块的来源， datetime.datetime.combine 的结果是这样构造的：

```
@classmethod
def combine(cls, date, time):
    ...

    return cls(date.year, date.month, date.day,
               time.hour, time.minute, time.second, time.microsecond,
               time.tzinfo) 
```

所以 tzinfo 在这里不被尊重，你使用 combine 函数的方式（如果 Python 2.X 版本的 datetime 以 3.2 版本的方式执行）。

要获得本地化的日期时间对象，Django[文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#usage)建议这样做：

```
from django.utils import timezone
timezone.localtime(timezone.now()) 
```

# .htaccess - htaccess 在 iphone 上重定向太多

> ID：14307441
> 
> 赞同：0
> 
> 时间：2013-01-13T19:46:32.247
> 
> 标签：.htaccess, redirect, mobile, joomla

我的 htaccess 存在问题，导致仅在 safari（iphone）上的 Joomla 网站上重定向过多，在 android 上工作正常，我在另一个不是 joomla 的网站上使用相同的代码，它工作正常。这是重定向的代码。这又是 Joomla。

这是重定向代码：

```
RewriteEngine on
RewriteBase /

# Check if this is the noredirect query string
RewriteCond %{QUERY_STRING} (^|&)m=0(&|$)
# Set a cookie, and skip the next rule
RewriteRule ^ - [CO=mredir:0:http://glotfeltytire.net/]

RewriteCond %{HTTP_HOST} ^glotfeltytire.net
RewriteRule .* - [L]

RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT}  "maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3cs|wap-|wapa|wapi" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "wapp|wapr|webc|winw|winw|xda|xda-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "up.browser|up.link|windowssce|iemobile|mini|mmp" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "symbian|midp|wap|phone|pocket|mobile|pda|psp" [NC]
RewriteCond %{HTTP_USER_AGENT} "iphone|ipod" [NC,OR]

# Check if we're not already on the mobile site
RewriteCond %{HTTP_HOST}          !^m\.
# Can not read and write cookie in same request, must duplicate condition
RewriteCond %{QUERY_STRING} !(^|&)m=0(&|$) 

# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP_COOKIE}        !^.*mredir=0.*$ [NC]

# Now redirect to the mobile site
RewriteRule ^ http://m.glotfeltytire.net [R,L] 
```

这是 Joomla 代码：

```
########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
## This attempts to block the most common type of exploit `attempts` to Joomla!
#
## Deny access to extension xml files (uncomment out to activate)
#<Files ~ "\.xml$">
#Order allow,deny
#Deny from all
#Satisfy all
#</Files>
## End of deny access to extension xml files
# Block out any script trying to set a mosConfig value through the URL
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode data within the URL
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
########## End - Rewrite rules to block out some common exploits

########## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.
#
########## End - Custom redirects

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

# RewriteBase /

########## Begin - Joomla! core SEF Section
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} (/[^.]*|\.(php|html?|feed|pdf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
########## End - Joomla! core SEF Section 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:36:02.987

如果您的移动站点位于以下文件夹中，这是一个很好的解决方案：www.yourdomain.com/m 这个 .htaccess 文件可以在移动站点和完整站点版本之间切换。从移动网站切换到完整的网站版本：`<a href="http://www.yourdomain.com?m=0">Full Website</a>`

```
RewriteEngine on
RewriteBase /
# Check if this is the noredirect query string
RewriteCond %{QUERY_STRING} (^|&)m=0(&|$)
# Set a cookie, and skip the next rule
RewriteRule ^ - [CO=mredir:0:www.yourdomain.com]

# Check if this looks like a mobile device
# (You could add another [OR] to the second one and add in what you
#  had to check, but I believe most mobile devices should send at
#  least one of these headers)
RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT}  "maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3cs|wap-|wapa|wapi" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "wapp|wapr|webc|winw|winw|xda|xda-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "up.browser|up.link|windowssce|iemobile|mini|mmp" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "symbian|midp|wap|phone|pocket|mobile|pda|psp" [NC]
RewriteCond %{HTTP_USER_AGENT} !macintosh [NC]

# Check if we're not already on the mobile site
RewriteCond %{REQUEST_URI} !^/?m/$
# Can not read and write cookie in same request, must duplicate condition
RewriteCond %{QUERY_STRING} !(^|&)m=0(&|$) 

# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP_COOKIE}        !^.*mredir=0.*$ [NC]

# Now redirect to the mobile site
RewriteRule ^ m/ [R,L] 
```

# java - 使用 XMLDecoder 读取文档文件是否安全？

> ID：14307442
> 
> 赞同：6
> 
> 时间：2013-01-13T19:46:35.200
> 
> 标签：java, security, xml-serialization, javabeans, xml-deserialization

将 Java Bean 序列化为 XML似乎是一种非常简洁的方法：来自许多来源的许多类都可以可靠地序列化，只需使用它们的公共接口[`XMLEncoder`](http://docs.oracle.com/javase/7/docs/api/index.html?java/beans/XMLEncoder.html)。[`XMLDecoder`](http://docs.oracle.com/javase/7/docs/api/index.html?java/beans/XMLDecoder.html)甚至在 API 参考的许多地方都建议使用这种方法进行序列化。但是用于此的[XML 语法似乎非常强大。](http://www.oracle.com/technetwork/java/persistence3-139471.html)是否有任何安全机制可以防止来自恶意文档的攻击？或者`XMLDecoder`出于安全原因，是否应该避免在不受信任的文档上使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T19:46:35.200

XML 序列化 bean 的反序列化几乎可以导致 JVM 可以执行的任何操作。给你一个丑陋的例子，考虑下面的文档，它会写一个特定的文件，而不会被问到任何问题：

```
<?xml version="1.0" encoding="UTF-8" ?>
<java version="1.4.0" class="java.beans.XMLDecoder">
  <object class="java.io.PrintWriter">
    <string>/tmp/Hacked.txt</string>
    <void method="println">
      <string>You have been hacked!</string>
    </void>
    <void method="close"/>
  </object>
</java> 
```

这与一个方法大致相同

```
PrintWriter deserialize() {
    PrintWriter obj = new PrintWriter("/tmp/Hacked.txt");
    obj.println("You have been hacked!");
    obj.close();
    return obj;
} 
```

**出于这个原因，我*强烈*建议*不要*简单地使用`XMLDecoder`.**

将文档验证为 XML 语言的定义明确且无害的子集，或者将您自己的格式与[jaxb](/questions/tagged/jaxb "显示标记为“jaxb”的问题")等技术结合使用。或者在严格控制的环境中执行反序列化，使用不允许任何意外操作的安全管理器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-06T15:06:16.987

不，使用绝对不安全。

MvG 提供的示例（在接受的答案中）并没有描绘出全貌。

看看我在[Using XMLDecoder to perform server-side Java Code on an Restlet application (ie Remote Command Execution)](http://blog.diniscruz.com/2013/08/using-xmldecoder-to-execute-server-side.html)博客文章中编写的示例，其中我展示了如何：

*   启动进程，
*   上传类文件，
*   写入服务器端 HTML OutputStream，
*   创建 XSS 和
*   触发远程外壳

全部来自 XMLDecoder 解析的 XML 文件/字符串（在博客文章中显示的示例中，通过 Restlet 的 REST API ObjectRepresentation 类）

# ios - 多个装饰视图添加到 UICollectionView

> ID：14307444
> 
> 赞同：10
> 
> 时间：2013-01-13T19:46:39.450
> 
> 标签：ios, objective-c, ios6, uicollectionview, uicollectionviewlayout

我正在创建一个包含子类的基本集合视图布局`UICollectionViewFlowLayout`。但是，我注意到似乎有几个装饰视图堆叠在一起。

每当用户在最后一部分中选择一个项目时，我都会使用下面的代码添加一个新部分。似乎每当我执行此代码时，都会将装饰视图的一个附加副本添加到每个已经存在的部分。

```
[collectionView performBatchUpdates:^{
    currentModelArrayIndex++;
    [collectionView insertSections:[NSIndexSet indexSetWithIndex:currentModelArrayIndex]];
    [collectionView reloadSections:[NSIndexSet indexSetWithIndex:currentModelArrayIndex-1]];
} completion:^(BOOL finished) {
    [collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:0 inSection:currentModelArrayIndex] atScrollPosition:UICollectionViewScrollPositionTop animated:YES];
}]; 
```

我通过提供我的装饰视图并看到它们堆叠来`alpha`证实了这一点。`0.2f`

![在此处输入图像描述](../Images/5c9e3ee140bb852497d0ff5063b82a34.png)

我还执行了集合视图层次结构的转储，并看到了 10 个`AFDecorationView`我应该只看到 4 个的实例：

```
 | <AFDecorationView: 0x719ee50; baseClass = UICollectionReusableView; frame = (0 65; 768 208.125); alpha = 0; hidden = YES; layer = <CALayer: 0x719eec0>>
   | <AFDecorationView: 0x71ad980; baseClass = UICollectionReusableView; frame = (0 333.125; 768 203.281); alpha = 0; hidden = YES; layer = <CALayer: 0x71adb60>>
   | <AFDecorationView: 0x71afc90; baseClass = UICollectionReusableView; frame = (0 65; 768 208.125); layer = <CALayer: 0x71afd60>>
   | <AFDecorationView: 0xd79ac30; baseClass = UICollectionReusableView; frame = (0 596.406; 768 203.281); alpha = 0; hidden = YES; layer = <CALayer: 0xd79ad00>>
   | <AFDecorationView: 0xd79cf20; baseClass = UICollectionReusableView; frame = (0 333.125; 768 203.281); layer = <CALayer: 0xd79cff0>>
   | <AFDecorationView: 0xd79dac0; baseClass = UICollectionReusableView; frame = (0 65; 768 208.125); layer = <CALayer: 0xd79a980>>
   | <AFDecorationView: 0xd794fd0; baseClass = UICollectionReusableView; frame = (0 859.688; 768 225.938); layer = <CALayer: 0xd7950a0>>
   | <AFDecorationView: 0xd7a1300; baseClass = UICollectionReusableView; frame = (0 596.406; 768 203.281); layer = <CALayer: 0xd7a13d0>></CALayer:>
   | <AFDecorationView: 0xd7a35d0; baseClass = UICollectionReusableView; frame = (0 65; 768 208.125); layer = <CALayer: 0xd794470>>
   | <AFDecorationView: 0xd7a43e0; baseClass = UICollectionReusableView; frame = (0 333.125; 768 203.281); layer = <CALayer: 0xd7a44b0>> 
```

我曾尝试查看[另一个自定义布局示例](https://github.com/mpospese/IntroducingCollectionViews)，但它们似乎也实例化了很多装饰视图实例。这可能是一个错误`UICollecionView`吗？还是由我们决定`layoutAttributesForElementsInRect:`每个部分只添加一次装饰视图布局属性？

自定义布局的装饰相关部分如下所示。

```
@implementation AFCollectionViewFlowLayout

-(id)init
{
    if (!(self = [super init])) return nil;

    [self registerClass:[AFDecorationView class] forDecorationViewOfKind:AFCollectionViewFlowLayoutBackgroundDecoration];

    return self;
}

#pragma mark - Private Helper Methods

-(void)applyLayoutAttributes:(UICollectionViewLayoutAttributes *)attributes
{
    //implemented
}

#pragma mark - Overridden Methods

#pragma mark Cell Layout

-(NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray *attributesArray = [super layoutAttributesForElementsInRect:rect];

    NSMutableArray *newAttributesArray = [NSMutableArray array];

    for (UICollectionViewLayoutAttributes *attributes in attributesArray)
    {
        [self applyLayoutAttributes:attributes];

        if (attributes.indexPath.item == 0)
        {
            UICollectionViewLayoutAttributes *newAttributes = [self layoutAttributesForDecorationViewOfKind:AFCollectionViewFlowLayoutBackgroundDecoration atIndexPath:attributes.indexPath];

            [newAttributesArray addObject:newAttributes];
        }
    }

    attributesArray = [attributesArray arrayByAddingObjectsFromArray:newAttributesArray];

    return attributesArray;
}

#pragma mark Decoration View Layout

-(UICollectionViewLayoutAttributes *)layoutAttributesForDecorationViewOfKind:(NSString *)decorationViewKind atIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes *layoutAttributes = [UICollectionViewLayoutAttributes layoutAttributesForDecorationViewOfKind:decorationViewKind withIndexPath:indexPath];

    if ([decorationViewKind isEqualToString:AFCollectionViewFlowLayoutBackgroundDecoration])
    {
        UICollectionViewLayoutAttributes *tallestCellAttributes;
        NSInteger numberOfCellsInSection = [self.collectionView numberOfItemsInSection:indexPath.section];

        for (NSInteger i = 0; i < numberOfCellsInSection; i++)
        {
            NSIndexPath *cellIndexPath = [NSIndexPath indexPathForItem:i inSection:indexPath.section];

            UICollectionViewLayoutAttributes *cellAttribtes = [self layoutAttributesForItemAtIndexPath:cellIndexPath];

            if (CGRectGetHeight(cellAttribtes.frame) > CGRectGetHeight(tallestCellAttributes.frame))
            {
                tallestCellAttributes = cellAttribtes;
            }
        }

        CGFloat decorationViewHeight = CGRectGetHeight(tallestCellAttributes.frame) + self.headerReferenceSize.height;

        layoutAttributes.size = CGSizeMake([self collectionViewContentSize].width, decorationViewHeight);
        layoutAttributes.center = CGPointMake([self collectionViewContentSize].width / 2.0f, tallestCellAttributes.center.y);
        layoutAttributes.zIndex = -1;
    }

    return layoutAttributes;
}

@end 
```

每个部分我只想要一个装饰视图，所以我将装饰视图添加到第一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:24:49.670

这似乎是`UICollectionView`. 我已经向 Apple 提交了[错误报告](http://openradar.appspot.com/radar?id=2550401)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T13:24:09.013

我有一个类似的问题，但我能够通过手动删除`prepareLayout`自定义布局类中的所有装饰视图来解决它（我在调用之前就这样做了`[super prepareLayout]`）：

```
 // Iterate over all subviews to remove all decoration views 
    for (UIView *view in self.collectionView.subviews) 
    {
        if ([view isKindOfClass:[DecorationView class]])
        {
            [view removeFromSuperview];
        }

    }
    [super prepareLayout]; 
```

# cron - 如何同步不同网络服务器上的目录？Cron 工作？

> ID：14307446
> 
> 赞同：0
> 
> 时间：2013-01-13T19:46:47.843
> 
> 标签：cron, cdn

我计划实现一个 CDN，并且需要将我的主域上的目录与 CDN 上的目录同步。我认为也许 cron-job 可以解决问题，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:09:51.150

虽然不是保持文件夹同步的唯一方法，但我认为 rsync 可能是最基本的方法。类型

```
 crontab -e 
```

这将为当前用户打开 cron 表编辑器。按“a”切换到文本附加模式并输入类似

```
 0 4 */3 * *  /home/me/run-my-rsync.sh >> /home/me/mysync.log 
```

然后按 ESC : x 关闭（vi 是一个值得学习的好编辑器）。这将在每三天的 4:00 运行包含 rsync 命令的 bash 脚本。

`/home/me/run-my-rsync.sh`必须是包含 rsync 命令的现有文件。在这里，也可能有一个非常复杂的脚本，最基本的可能是

```
 #!/bin/bash
 rsync -avz remote.machine.com:cdn /home/me/cdn 
```

这将递归地将所有新的或更改的文件从 remote.machine.com 上的目录 /home/me/cdn 传输到本地计算机上的 /home/me/cdn 目录中。只会传输更改的文件。您的 bash 文件必须是可执行的才能在 cron ( `chmod +x /home/me/run-my-rsync.sh`) 上运行。

当然，这只有在 ssh 守护进程 (sshd) 正在远程机器上运行并且您对其具有访问权限时才有效。例如，为了使 rsync 自动工作，您需要使用[此处](http://www.linuxproblem.org/art_9.html)所述的 SSH 密钥设置正确的身份验证。

我建议首先在两台机器上创建帐户，安装 sshd，检查普通登录是否有效，然后手动尝试您的 rsync 命令是否有效（将询问密码），然后配置为使用 ssh 密钥而不是密码，最后尝试创建 cron 作业。

# sockets - sys/socket.h 网络套接字功能在哪里（以及如何）实现？

> ID：14307449
> 
> 赞同：0
> 
> 时间：2013-01-13T19:47:02.290
> 
> 标签：sockets, network-programming

所以我下载并编译了 FreeBSD Sys/Socket.h 头文件，我注意到它包含套接字函数原型但没有实现。Windows 套接字使用实现这些功能的 DLL，但 Windows 的东西是闭源的。如果我想使用 Linux 做网络程序，在哪里可以找到实现头文件？可以自己写吗？使用网络 I/O 设备需要操作系统调用。所以我的想法是对内核进行系统调用以打开设备并提供要写入帧的内存地址。无需编写全新的设备驱动程序，请注意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:58:26.153

在 Unix 上，套接字函数在[C 库](http://en.wikipedia.org/wiki/Libc)中。这些主要是围绕操作系统[系统调用](http://en.wikipedia.org/wiki/System_call)的瘦包装器。如果您使用的是 Linux，请查找[GLibC](http://en.wikipedia.org/wiki/GNU_C_Library)的源代码。

# c# - 在 c# winform 中打印和制作报告

> ID：14307452
> 
> 赞同：12
> 
> 时间：2013-01-13T19:48:00.247
> 
> 标签：c#, winforms, printing, report

我在 Delphi QuickReport 中使用过创建报告和打印。我可以在 .NET C# 中使用什么来执行此操作？

我在我的项目（Winforms 应用程序）中添加了一些报表元素（Microsoft 报表和 Crystal 报表），但我看到的是我只能从数据库中插入数据。我想要的是使用在运行时创建的对象的值。这是因为我的报告实际上由收据和发票组成。

哪个是满足我需求的最佳工具？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-13T20:17:22.133

您可以使用内置的报告来生成漂亮的报告而不需要数据库。

为您的数据创建一个类，在我的例子中，我将创建一个 person 类：

```
class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
} 
```

*   接下来，我将使用报告向导添加报告（添加新项目 -> 报告 -> 报告向导）。

*   对于数据源，我将选择 Object，然后将其指向我的 Person 类。![来自类的数据源](../Images/b8faf8c51c65956dc1a2ac5ffc1dd9a1.png)

*   为您的详细信息选择您想要的列，为了简单起见，我只是将它们全部拖到值中。

![报告向导字段](../Images/a77d01e71e40dc52b55ed030f0d978b7.png)

*   完成向导的其余部分，只需选择默认值，然后您应该会看到您的报告。

*   现在您可以将 ReportViewer 控件添加到表单并将报表设置为您刚刚创建的报表。这也应该在您的表单上创建一个 PersonBindingSource。

*   将 PersonBindingSource 的数据设置为内存中的列表：

    ```
    BindingList<Person> myPeople = new BindingList<Person>();
    myPeople.Add(new Person() { FirstName = "John" , LastName = "Doe"});
    myPeople.Add(new Person() { FirstName = "Jane" , LastName = "Doe"});
    myPeople.Add(new Person() { FirstName = "Jerry" , LastName = "Smithers" });

    PersonBindingSource.DataSource = myPeople;
    reportViewer1.RefreshReport();
    this.reportViewer1.RefreshReport(); 
    ```

最终报告如下所示：

![总结报告](../Images/7cc87f7fd0695b87b311f62774caf798.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:50:39.077

Crystal Reports 将非常适合您。实际上，您可以在没有数据库的情况下生成报告。看看[这个](http://www.codeproject.com/Articles/16473/Generate-a-Crystal-Reports-report-without-a-databa)项目，它应该让你开始，就像你正在尝试做的一样。

你这对你有帮助！

# ruby - 在Ruby中打印N个元素数组的N个第一个排列的有效方法

> ID：14307465
> 
> 赞同：4
> 
> 时间：2013-01-13T19:49:44.253
> 
> 标签：ruby, memory, permutation, out-of-memory

我需要做的事情非常简单，所以我不需要创建一个复杂的程序，我只需要使用一次，将其结果作为我现在正在工作的真实项目的提要数据。

我需要获得一组 N 个元素的 50 个第一个（或者，更好的是 50 个随机数）组合，从 2 到 50 的每个值都是 N。

在 Ruby 中，从逻辑上讲，将类似于

```
require 'pp'

pp (1..50).to_a.permutation.to_a.first(50) 
```

但遗憾的是，这些程序总是内存不足。事实上，我可以在我的机器上生成的“最大”数字是 10，我需要 50。

我很确定存在其他更有效的方法来实现这一点，但因为我不太了解所涉及的数学，我需要拼命寻求你的帮助。你们中的任何人都知道一些 gem、库，甚至是一种算法，它们以一种不消耗所有内存的方式来做到这一点。慢一点没关系，就像我说的，我只需要生成一次这个东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:51:38.553

使用[`#take`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-take)Enumerable 的方法：

```
pp (1..50).to_a.permutation.take(50) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T21:31:11.793

不要调用`to_a`排列枚举器，只需将其用作枚举器即可：

```
(1..50).to_a.permutation.first(50) 
```

但是如果你想要随机排列，你可以将数组洗牌 50 次：

```
ar = (1..50).to_a
Array.new(50){ar.shuffle} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T20:44:54.797

我认为您将不得不一次迭代并生成一个数组，以防止出现内存问题。例如

```
1.upto(50) do |i|
  store permutions_for i
end

def permutions_for(size)
  #get permutions for the given size
end

def store(arr)
  # print, save to db, whatever, just don't keep it in memory :)
end 
```

# php - 如何在数据库更新时更新 div

> ID：14307471
> 
> 赞同：0
> 
> 时间：2013-01-13T19:50:25.510
> 
> 标签：php, database, html, chat

我制作了一个聊天代码，它是基于成员的，这是代码：

代码可在此处获得：[Chat.php 代码](http://pastebin.com/PKUZJ8LH)

我想要的是`div`每次在数据库中有更新/插入/更改时更新 id 窗口，就好像我每 X 秒更新一次 A）它太快或 B）太慢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:06:26.313

一个解决方案可能是：将您在数据库中最后一次更新时的小时/分钟保存在一个 txt 文件（或类似的文件）中，并将其与访问 jquery 的时间进行比较。如果这两个“时间”不同，请从 DB 获取数据。（我认为这是最快的方法）

# node.js - 用于 node.js 辅助角色的 Azure Memcache Shim

> ID：14307472
> 
> 赞同：0
> 
> 时间：2013-01-13T19:50:28.167
> 
> 标签：node.js, azure, memcached

有一篇很好的文章解释了如何从 node.js Web 角色访问 Azure 缓存（通过 memcache shim）：

[http://blogs.msdn.com/b/silverlining/archive/2013/01/03/november-updates-to-windows-azure-powershell-cmdlets.aspx](http://blogs.msdn.com/b/silverlining/archive/2013/01/03/november-updates-to-windows-azure-powershell-cmdlets.aspx)

但是如何为 node.js 工作角色设置 memcache shim？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:44:41.330

我发现我可以通过[“Memcache Server Gateway”](http://msdn.microsoft.com/en-us/library/windowsazure/hh914167.aspx)（没有垫片）访问缓存。

# android - 扩展 Google Maps Android API v2 以提供平移和缩放事件

> ID：14307476
> 
> 赞同：7
> 
> 时间：2013-01-13T19:50:46.113
> 
> 标签：android, google-maps-android-api-2

如何扩展 Google Maps Android API v2 以检测地图何时被平移或缩放？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T19:54:08.613

添加[`OnCameraChangeListener`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraChangeListener)到您的[`GoogleMap`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap)via `setOnCameraChangeListener()`。

# c# - 如何使按钮/控件尽可能占据最大区域并将字体缩放到该区域？

> ID：14307481
> 
> 赞同：1
> 
> 时间：2013-01-13T19:51:47.950
> 
> 标签：c#, windows-8, winrt-xaml, windows-store-apps

所以我一直在制作一个 Windows Store 应用程序。目前，它只是在一个网格中有一堆按钮。我想让这些按钮（连同它们的字体大小）放大/缩小以适应其整个父级。我试过弄乱[http://code.msdn.microsoft.com/windowsapps/Scaling-sample-cf072f4f](http://code.msdn.microsoft.com/windowsapps/Scaling-sample-cf072f4f)虽然它帮助我做了一些缩放，但它并没有帮助我做我想做的事。我来自 Android 背景，习惯于轻松做到这一点。我可以在 C#/XAML 应用程序上轻松完成此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:06:29.510

您可以使用[Viewbox](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)类。

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <Button Grid.Row="0">
        <Button.Content>
            <Viewbox>
                <TextBlock Text="First button..." />
            </Viewbox>
        </Button.Content>
    </Button>
    <Button Grid.Row="1">
        <Button.Content>
            <Viewbox>
                <TextBlock Text="Second button..." />
            </Viewbox>
        </Button.Content>
    </Button>
    <Button Grid.Row="2">
        <Button.Content>
            <Viewbox>
                <TextBlock Text="Third button..." />
            </Viewbox>
        </Button.Content>
    </Button>        
</Grid> 
```

# matlab - MatLAB：限制图像的强度值

> ID：14307483
> 
> 赞同：0
> 
> 时间：2013-01-13T19:52:14.680
> 
> 标签：matlab

我有大约 200 次 CT 扫描，我需要将它们的强度值限制在 -2048 到 2048 之间。我尝试了 histeq 和 imadjust 但它们不起作用。当我使用 imshow(image, [-2048,2048]) 时，我得到了最好的结果。但我需要保存 this 的结果数据`imshow`。

[`imshow`结果没有显示范围](http://img850.imageshack.us/img850/268/39979786.jpg)

[`imshow`显示范围的结果](http://img820.imageshack.us/img820/3909/76610719.jpg)

我想获得具有显示范围的imshow的输出图像并能够保存它？

最好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:08:39.847

如果您只想以相同的方式限制值的范围，则`imshow`可以编写

```
limits = [-2048 2048];
limitedImage = min(max(originalImage, limits(1)), limits(2)); 
```

这会将所有低于 -2048 的强度设置为 -2048，并将所有高于 2048 的强度设置为 2048。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:46:32.333

您还可以使用一些有限且单调的功能。

例如。我会使用类似的东西`limitedImage = 2048*tanh(originalImage/2048)`

使用它您可以恢复原始图像，并且不会丢失超过 2048 的值的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:35:17.993

As @Jonas suggested, you may want to truncate extreme values. Alternately you can rescale your colors to make sure you always make full use of the entire spectrum (with maximum contrast).

```
scaledImage = zeros(size(originalImage)) % Just for initialization
desiredRange = 2*2048;
currentRange = max(originalImage(:)) - min(originalImage(:)); % You will want to remove NaNs first if they occur
currentMean = mean(originalImage(:))
scaledImage(:) = currentMean + (originalImage(:) - currentMean) * desiredRange /currentRange 
```

This will set all intensities lower than -2048 to -2048, and all intensities above 2048 to 2048.

# android - RoboSpice - 开始不工作

> ID：14307487
> 
> 赞同：3
> 
> 时间：2013-01-13T19:52:31.387
> 
> 标签：android, onresume, onpause, robospice

我设法实现了 robospice 示例（GoogleHttpClientSpiceService）并且它可以工作 - 它成功地进入服务器，获取数据并将其存储在缓存中。如果 Activity 不是 onPause，甚至会显示 toast 并更新 GUI。

我的问题（也是我尝试 robospice 的唯一原因）是，如果 Activity 恢复，它不会再次收到通知。难道我做错了什么？

```
 @Override //THIS IS NOT CALLED ON ACTIVITY RESUME (BECAUSE OF THIS I CANNOT DISMISS DIALOG)
    public void onRequestSuccess( final String result ) {
        Toast.makeText( PrijavaActivity.this, "success", Toast.LENGTH_SHORT ).show();
        Log.w(TAG, "sakses" + result);

        FragmentManager fm = getSupportFragmentManager();
        Fragment fragment = fm.findFragmentByTag("prijavaDialog");
        if(fragment!=null) {
            FragmentTransaction ft = fm.beginTransaction();
            ft.remove(fragment);
            ft.commit();
        }
    } 
```

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:05:25.527

您误解了 RoboSpice。你得到的行为是正确的。

当活动停止（如您所说的非活动状态）时，其所有请求侦听器都将被删除，它们将不会收到通知。

仅当拥有它们的活动仍然存在时，才会通知侦听器。这就是 RoboSpice 的重点：防止监听器或活动的内存泄漏。

如果你想“继续监听”一个请求的结果，即使启动它的活动已经处于非活动状态，那么你必须采用不同的策略。您应该使用更稳定的上下文，如应用程序或服务并启动您的请求表单，或者可能只是监听来自该上下文的请求结果（使用 addListenerIfPending，而不是执行）。

# regex - 使用 diff awk grep 和正则表达式获取 linux 中最近添加的驱动器的名称

> ID：14307489
> 
> 赞同：0
> 
> 时间：2013-01-13T19:52:50.213
> 
> 标签：regex, linux, awk, grep

为了获得刚刚添加到系统中的驱动器的名称，我正在检查**cat** /proc/partitions 在添加驱动器之前和之后创建的两个文件之间的差异。我正在寻找没有分区号数字后缀的驱动器名称。

```
cat /proc/partitions > /mnt/HD_a2/tempFiles/file1
... add some additional drives to the system
cat /proc/partitions > /mnt/HD_a2/tempFiles/file2

diff /mnt/HD_a2/tempFiles/file1 /mnt/HD_a2/tempFiles/file2 
```

当我运行 diff 命令时，它返回：

```
16a17,18
>    8    32    7816704 sdc
>    8    33    7816688 sdc1 
```

当添加 awk 以从以 '>' 为前缀的行上的第 5 列获取值时

```
 diff /mnt/HD_a2/tempFiles/file1 /mnt/HD_a2/tempFiles/file2 |  awk '">" { print $5 }' 
```

回报是：

```
-- blank line is returned here--
sdc
sdc1 
```

为了只返回“sdc”，添加了 grep 命令，

```
diff /mnt/HD_a2/tempFiles/file1 /mnt/HD_a2/tempFiles/file2 |  awk '">" { print $5 }' | grep ^[A-Za-z]+$ 
```

但是当我运行命令行时，我根本没有得到任何输出。

如果 grep 命令被替换为

```
 grep ^[A-Za-z]*$ 
```

return 不包括 sdc1，但仍然在 sdc 之前返回一个空行

我有人可以解释我的语法错误，或者提供更好的方法来获取最近添加的新驱动器的名称，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:59:27.887

```
diff /mnt/HD_a2/tempFiles/file1 /mnt/HD_a2/tempFiles/file2 \
|  awk  '">" && NF>2 && $5 !~ /[0-9]$/{ print $5 }' 
```

输出

```
sdc 
```

NF 表示字段数，您可能希望将其更改为更高的数字，例如 4。您可以使用它来跳过空行或没有足够有价值数据的行。

`$5 !~ /[0-9]$/`说忽略以数字结尾的行。

s 表示在`&&`打印字段之前所有这些条件都必须为真`$5`。

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:00:28.913

您可能想要`/^>/`，而不是`">"`在 awk 脚本的开头。此外，请尝试`grep '^[[:alpha:]]\+$'`跳过空行。

但如果这应该是设备检测的可靠部分，请阅读 udev 脚本。挂钩诸如“块设备已连接”之类的事件并运行自定义脚本是相当容易的。它可能比解析分区文件更简单。

# ruby-on-rails - 使用delayed_job 时如何修复“NilClass# completed after”错误？

> ID：14307492
> 
> 赞同：1
> 
> 时间：2013-01-13T19:52:51.187
> 
> 标签：ruby-on-rails, heroku, delayed-job

我正在使用collectiveidea/delayed_job 来延迟我的课程模型中的makesandwich 方法。它在开发中运行良好，但在生产中运行时会出现以下错误：

```
Worker(host:b75643e6-bc2b-4f9f-97ff-b31aa3c50b0f pid:2)] Starting job worker
[Worker(host:b75643e6-bc2b-4f9f-97ff-b31aa3c50b0f pid:2)] NilClass# completed after 0.0095
[Worker(host:b75643e6-bc2b-4f9f-97ff-b31aa3c50b0f pid:2)] 1 jobs processed at 5.5022 j/s, 0 failed ... 
```

我该如何解决这个问题？

这是我的模型和方法：

```
#encoding: utf-8

class Lesson < ActiveRecord::Base
    attr_accessible :content, :title, :parsed_content, :html_content, :user_id

    serialize :parsed_content, Array
    serialize :html_content, Array
    serialize :pinyin_content, Array
    serialize :defined_content, Array
    serialize :literal_content, Array

    validates :title, :presence => true
    validates :content, :presence => true

    belongs_to :user

    #before_update do |lesson|
    #   lesson.makesandwich
    #end

    after_create do |lesson|
        lesson.makesandwich
    end

    def makesandwich

        require 'rmmseg'
                                                        #require 'to_lang'
        require 'bing_translator'
        require 'ruby-pinyin'

        self.parsed_content = []

        RMMSeg::Dictionary.load_dictionaries

        content             = self.content
        paragraphs          = content.split(/\r\n\r\n/) #convert to array of paragraphs
        self.parsed_content = paragraphs
        paragraphs.each_with_index do |text, ti|

            text = text.gsub("。", "^^.")
            text = text.gsub("？", "~~?")
            text = text.gsub("！", "||!")
            text = text.gsub(":", "：")  #fix missing colons

            text = text.split(/[.?!]/u) #convert to an array
            text.each do |s|
                s.gsub!("^^", "。")
                s.gsub!("~~", "？")
                s.gsub!("||", "！")
                #s.gsub!("———————————",":")
            end

            text.each_with_index do |val, index|
                algor     = RMMSeg::Algorithm.new(text[index])
                splittext = []
                loop do
                    tok = algor.next_token
                    break if tok.nil?
                    tex = tok.text.force_encoding('UTF-8')
                    splittext << tex
                    text[index] = splittext
                end
                paragraphs[ti] = text
            end
        end
        bing                 = BingTranslator.new('8bacb905-c59b-4363-bbf5-89ef2c32c26e', 'g82QvinzO7GhmP7qJQpfxTMXzClSGX3yiPcsedFDXYQ=')
        self.parsed_content  = paragraphs
        textarray            = Marshal.load(Marshal.dump(paragraphs))
        self.defined_content = Marshal.load(Marshal.dump(paragraphs))
        self.literal_content = Marshal.load(Marshal.dump(paragraphs))
        self.pinyin_content  = Marshal.load(Marshal.dump(paragraphs))
        textarray.each_with_index do |paragraph, pi|
            paragraph.each_with_index do |sentence, si|
                sentence.each_with_index do |word, wi|
                    if DictionaryEntry.find_by_simplified(word) != nil
                        self.defined_content[pi][si][wi] = DictionaryEntry.find_by_simplified(word).definition
                        #self.literal_content is down below
                        self.pinyin_content[pi][si][wi]  = DictionaryEntry.find_by_simplified(word).pinyin
                    else
                        self.defined_content[pi][si][wi] = bing.translate(word, :from => 'zh-CHS', :to => 'en')
                        #self.defined_content[pi][si][wi] = word
                        #self.literal_content is down below
                        if PinYin.of_string(word, true).length > 1 #for punctuation
                            self.pinyin_content[pi][si][wi] = PinYin.of_string(word, true).join(" ").downcase
                        else
                            self.pinyin_content[pi][si][wi] = word
                        end
                    end
                end
            end
        end

        #Literal
        literalarray = Marshal.load(Marshal.dump(paragraphs))
        literalarray.each_with_index do |paragraph, pi|
            paragraph.each_with_index do |sentence, si| #iterate array of sentence
                literalarray[pi][si] = []
                sentence.each_with_index do |word, wi| #iterate sentence's array of words
                    entrytobesliced = DictionaryEntry.find_by_simplified(word)
                    slicedentry     = []

                    if entrytobesliced == nil
                        if word.length > 1 && word !~ /\w/ #/^\s*\w\d+\s*$/ #number regex  #for cases where there is no DictionaryEntry
                            split     = []
                            wordarray = word.split("").each_with_index() do |ws, wsi|
                                split << [DictionaryEntry.find_by_simplified(ws).definition]
                            end
                            literalarray[pi][si] << split
                        else
                            literalarray[pi][si] << [word] #in case none of the above work
                        end
                    else
                        entrytobesliced.simplified.each_char do |w|
                            singlechar = DictionaryEntry.find_by_simplified(w)
                            slicedentry << singlechar.definition.split("\", \"")
                        end
                        literalarray[pi][si] << slicedentry
                    end
                    self.literal_content = literalarray #slicedentry #literalarray
                end
            end
        end
        self.save
    end
    handle_asynchronously :makesandwich
end 
```

这是数据库中作业的样子：

```
irb(main):012:0> job
=> #<Delayed::Backend::ActiveRecord::Job id: 5, priority: 0, attempts: 0, handler: "--- !ruby/object:Delayed::PerformableMethod\nattribu...", last_error: nil, run_at: "2013-01-13 19:42:38", locked_at: nil, failed_at: nil, locked_by: nil, queue: nil, created_at: "2013-01-13 19:42:38", updated_at: "2013-01-13 19:42:38"> 
```

这是处理程序：

```
irb(main):011:0> job.handler
=> "--- !ruby/object:Delayed::PerformableMethod\nattributes:\n  id: 14\n  title: test\n  content: ! \"1最初，上帝创造了天地。\\r\\n\\r\\n2大地混沌苍茫，深渊的表面一片黑暗。上帝发出的动力运行在水面上。\\r\\n\\r\\n3上帝说：“要有光。”光就出现了。4上帝看光是好的。上帝把光暗分开了。5上帝称光为“昼”，称暗为“夜”。过了晚上，到了早晨，是第一日。\\r\\n\\r\\n6上帝说：“水和水之间要有天空，把水上下分开。”7于是上帝造出天空把水分开，天空以下有水，天空以上也有水。事就这样成了。8上帝称天空为“天”。过了晚上，到了早晨，是第二日。\\r\\n\\r\\n9上帝说：“天下的水要聚在一处，让陆地露出来。”事就这样成了。10上帝称陆地为“地”，称聚起来的水为“海”。上帝看这是好的。11上帝说：“地要长出青草和结种子的植物，又要长出结果子的树木，各按其类；果子里要有种子，在地上生长。”事就这样成了。12地上长出青草和结种子的植物，各按其类；又长出结果子的树木，果子里都有种子，各按其类。上帝看这是好的。13过了晚上，到了早晨，是第三日。\\r\\n\\r\\n14上帝说：“天空要有光源，可以分昼夜，做记号，定季节、日子、年月。15光源要在天空普照大地。”事就这样成了。16上帝造出两大光源，大的管昼，小的管夜，又造星星。17上帝把光源放在天空，普照大地，18支配昼夜，分开光暗。上帝看这是好的。19过了晚上，到了早晨，是第四日。\\r\\n\\r\\n20上帝说：“水里要涌现成群的活物，地上要有飞禽在天空飞翔。”21于是上帝创造巨大的海兽，使水里涌现各样游动的活物，各按其类；又创造各种有翅膀的飞禽，各按其类。上帝看这是好的。22上帝赐福给这些活物说：“要繁衍增多，充满海洋；飞禽也要在地上增多。”23过了晚上，到了早晨，是第五日。\\r\\n\\r\\n24上帝说：“地要生出活物来，各按其类，就是牲畜、爬行的动物、地上的走兽，各按其类。”事就这样成了。25上帝造出地上的走兽，各按其类；牲畜，各按其类；地上各样爬行的动物，各按其类。上帝看这是好的。\\r\\n\\r\\n26上帝说：“我们要照我们的形像、按我们的样式造人，让他们管理海里的鱼、天上的飞禽、地上的牲畜，以及全地和地上各样爬行的动物。”27于是上帝照自己的形像创造人，就是照上帝的形像把人创造出来。上帝创造了男人和女人。28上帝赐福给他们，对他们说：“要繁衍增多，遍满地面，开拓大地，也要管理海里的鱼、天上的飞禽和地上各样爬行的活物。”\\r\\n\\r\\n29上帝说：“全地上各样结种子的植物和各样结种子的果树，我都赐给你们做食物。30至于地上各样的走兽、天上各样的飞禽、地上各样有生命的爬行动物，我把一切青菜绿叶都赐给它们吃。”事就这样成了。\\r\\n\\r\\n31上帝看他所造的一切，都非常好。过了晚上，到了早晨，是第六日。\"\n  created_at: 2013-01-13 19:42:38.696201148 Z\n  updated_at: 2013-01-13 19:42:38.696201148 Z\n  parsed_content: []\n  html_content: []\n  literal_content: []\n  pinyin_content: []\n  defined_content: []\n  user_id: 1\n" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:14:27.107

它很可能在实际提交到数据库之前被后台作业拾取。尝试将您的回调更改为`after_commit`：

```
after_commit do |lesson|
  lesson.makesandwich
end 
```

您也可以只向它发送您要执行的方法的符号：

```
after_commit :makesandwich 
```

这里有一些资源描述了为什么应该使用 after_commit 而不是 after_save/ceate：

*   [http://rails-bestpractices.com/posts/695-use-after_commit](http://rails-bestpractices.com/posts/695-use-after_commit)
*   [http://alindeman.github.com/2011/10/02/after-save-and-background-jobs.html](http://alindeman.github.com/2011/10/02/after-save-and-background-jobs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:24:27.503

我认为这个问题与：

[使用 Thin 或 Unicorn 在生产中运行延迟作业时，作业处理程序序列化不正确](https://stackoverflow.com/questions/9386491/job-handler-serialization-incorrect-when-running-delayed-job-in-production-with)

我遇到了同样的问题 - 我猜你的宝石没有被很好地锁定（我认为这也是我的问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T05:55:29.157

我可以通过将我的应用程序设置为在 Heroku 上使用 Unicorn 来解决这个问题。（我假设您使用的是 Heroku……至少示例日志是这样的。）我遵循了[Heroku 指南](https://devcenter.heroku.com/articles/rails4-getting-started#webserver)的“Web 服务器”部分。

接下来（我认为这是关键部分）我添加`worker: bundle exec rake jobs:work`到[延迟作业（DJ）](https://devcenter.heroku.com/articles/delayed-job#setting-up-delayed-job)`Procfile`中指定的内容中，并且延迟作业开始按预期工作，没有其他代码更改。

# objective-c - UICollectionView performBatchUpdates：为所有部分设置动画

> ID：14307494
> 
> 赞同：14
> 
> 时间：2013-01-13T19:53:08.187
> 
> 标签：objective-c, ios6, uikit, uicollectionview, uicollectionviewlayout

我正在编写一个自定义`UICollectionViewFlowLayout`，我注意到了这一点`initialLayoutAttributesForAppearingItemAtIndexPath:`，当我在集合视图上`initialLayoutAttributesForAppearingDecorationElementOfKind:atIndexPath:`调用时，所有部分都会调用它。`performBatchUpdates:completion:`结果是*所有*部分都应用了动画，而*不仅仅是*新添加的部分。

```
[collectionView performBatchUpdates:^{
    currentModelArrayIndex++;
    [collectionView insertSections:[NSIndexSet indexSetWithIndex:currentModelArrayIndex]];
    [collectionView reloadSections:[NSIndexSet indexSetWithIndex:currentModelArrayIndex-1]];
} completion:^(BOOL finished) {
    [collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:0 inSection:currentModelArrayIndex] atScrollPosition:UICollectionViewScrollPositionTop animated:YES];
}]; 
```

到目前为止，我尝试的是删除调用来`performBatchUpdates:completion:`代替简单的更新，但是无论如何，已经存在的部分（所有部分）都是动画的。我想出了一个检查解决方案，以确保我*只*更改了最后一部分的布局属性，但感觉很hacky。

```
if (decorationIndexPath.section == [(id<UICollectionViewDataSource>)self.collectionView.delegate numberOfSectionsInCollectionView:self.collectionView] - 1)
{
   layoutAttributes.alpha = 0.0f;
   layoutAttributes.transform3D = CATransform3DMakeTranslation(-CGRectGetWidth(layoutAttributes.frame), 0, 0);
} 
```

这是只为某些部分设置动画的正确方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T23:12:23.600

好的，我有答案了；它并没有比前一个漂亮很多，但它使布局不会接触数据源，所以它更干净。

基本上，我们需要覆盖`prepareForCollectionViewUpdates:`并`finalizeCollectionViewUpdates`跟踪我们正在插入的部分。我有一个可变集，其中包含`NSNumber`我们要插入的部分的实例。

```
-(void)prepareForCollectionViewUpdates:(NSArray *)updateItems
{
    [super prepareForCollectionViewUpdates:updateItems];

    [updateItems enumerateObjectsUsingBlock:^(UICollectionViewUpdateItem *updateItem, NSUInteger idx, BOOL *stop) {
        if (updateItem.updateAction == UICollectionUpdateActionInsert)
        {
            [insertedSectionSet addObject:@(updateItem.indexPathAfterUpdate.section)];
        }
    }];
}

-(void)finalizeCollectionViewUpdates
{
    [super finalizeCollectionViewUpdates];

    [insertedSectionSet removeAllObjects];
} 
```

接下来，在设置项目和装饰视图的初始布局属性时，我检查索引路径的部分是否包含在该集合中。

```
-(UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingDecorationElementOfKind:(NSString *)elementKind atIndexPath:(NSIndexPath *)decorationIndexPath
{
    UICollectionViewLayoutAttributes *layoutAttributes;

    if ([elementKind isEqualToString:AFCollectionViewFlowLayoutBackgroundDecoration])
    {
        if ([insertedSectionSet containsObject:@(decorationIndexPath.section)])
        {
            layoutAttributes = [self layoutAttributesForDecorationViewOfKind:elementKind atIndexPath:decorationIndexPath];
            layoutAttributes.alpha = 0.0f;
            layoutAttributes.transform3D = CATransform3DMakeTranslation(-CGRectGetWidth(layoutAttributes.frame), 0, 0);
        }
    }

    return layoutAttributes;
}

-(UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath
{
    UICollectionViewLayoutAttributes *layoutAttributes;

    if ([insertedSectionSet containsObject:@(itemIndexPath.section)])
    {
        layoutAttributes = [self layoutAttributesForItemAtIndexPath:itemIndexPath];
        layoutAttributes.transform3D = CATransform3DMakeTranslation([self collectionViewContentSize].width, 0, 0);
    }

    return layoutAttributes;
} 
```

`nil`否则我将从这些方法返回，因为`nil`它是默认值。

这还具有更好的旋转动画的额外好处。

# iphone - ALAuthorizationStatus 和处理用户对隐私弹窗的响应

> ID：14307495
> 
> 赞同：1
> 
> 时间：2013-01-13T19:53:31.217
> 
> 标签：iphone, ios6, alassetslibrary

【新手开发者，第一次发帖】

我有一个 iOS 6 应用程序，其中第一个 ViewController 需要访问用户的照片库。我已经看到少量关于如何测试访问 [使用 ALAuthorizationStatus] 的帖子，我能够成功评估，例如，如果权限随后被用户撤销。

但是，我遇到的问题是隐私弹出窗口 [AppName 希望访问您的照片] 的初始处理。当应用程序第一次运行并且在用户单击“确定”或“不允许”之前，测试 [当前在 ViewController 中的 ViewDidLoad 中呈现 CollectionView 中的相机胶卷] 已经评估并失败。

我的工作假设是，这是因为 ALAssetsLibrary 访问是通过块在另一个线程上实现的，但我无法弄清楚影响应用程序照片隐私设置的弹出窗口的处理。

[我已经尝试根据这个](https://stackoverflow.com/questions/13572220/ask-permission-to-access-camera-roll/13572568#13572568)问题在 AppDelegate 中的 didFinishLaunchingWithOptions 中调用访问库，该问题谈到触发隐私设置，但无济于事。

我需要做的——我想！- 是能够以同步方式处理隐私的设置，但我不知道从哪里开始。

指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:35:59.667

[通过此](https://stackoverflow.com/questions/6257250/alassetslibrary-enumerategroupswithtypes-thread-synchronization)问题中提供的解决方案解决。在我的实现中，如果没有正确使用锁定，则在要求用户授权访问资产库的情况下，资产库的枚举将失败。一个症状是用户在按下主页按钮后被询问。

# python - 从列表中删除两个可能值之一 Python

> ID：14307496
> 
> 赞同：1
> 
> 时间：2013-01-13T19:53:31.983
> 
> 标签：python, list

我有一个清单，例如

```
furniture = [desk, Lamp, Chair, shelf] 
```

其中一些被大写是有原因的。此列表的值可能会发生变化，但我想说：

```
furniture.remove(chair) or furniture.remove(Chair) 
```

但是，如果它是一个而不是另一个，它应该会产生一个错误，因为如果 x 不存在于该列表中，那是 list.remove(x) 的结果。我怎样才能绕过这个问题？

要么使用大写，要么删除单个列表中的两种可能性之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:58:28.540

像这样的东西会起作用吗？请注意，它会创建一个新列表，而不是修改您的原始列表：

```
In [4]: furniture = ['desk', 'Lamp', 'Chair', 'shelf']

In [5]: [item for item in furniture if item.lower() != 'chair']
Out[5]: ['desk', 'Lamp', 'shelf'] 
```

或与`capitalize`：

```
In [6]: [item for item in furniture if item.capitalize() != 'Chair']
Out[6]: ['desk', 'Lamp', 'shelf'] 
```

但是正如@mgilson 指出的那样，这将删除列表中的**所有**匹配项，而不仅仅是第一个。他的答案更清晰，但这是一种完全荒谬/不必要的方式，您可以只删除第一场比赛：

```
def first(l, value):
    new_l = [item for item in enumerate(l) if item[1].lower() == value]
    if new_l:
        return min(new_l)[1]
    return

# Original list
furniture = ['desk', 'Lamp', 'chair', 'shelf', 'chair', 'chair', 'Chair', 'Chair']

print 'Original:', furniture
for word in ('chair', 'dogs'):
  f = first(furniture, word)
  if f:
    furniture.remove(f)
  print 'Removing:', word, furniture 
```

输出：

```
Original: ['desk', 'Lamp', 'chair', 'shelf', 'chair', 'chair', 'Chair', 'Chair']
Removing: chair ['desk', 'Lamp', 'shelf', 'chair', 'chair', 'Chair', 'Chair']
Removing: dogs ['desk', 'Lamp', 'shelf', 'chair', 'chair', 'Chair', 'Chair'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T20:00:47.337

我会使用`try`和`except`：

```
try:
   furniture.remove('chair')
except ValueError:
   furniture.remove('Chair') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T19:57:21.233

```
if chair in furniture:
    furniture.remove(chair)
if Chair in furniture:
    furniture.remove(Chair) 
```

# php - 在另一个网页中回显一个 php 变量

> ID：14307499
> 
> 赞同：0
> 
> 时间：2013-01-13T19:53:37.180
> 
> 标签：php, html, iframe, echo

我有一个网络应用程序，在用户执行一项功能后，他们会收到一条通知，告知他们所做的一切是否成功。对于每个函数，我`$message`使用以下代码声明了作为通知回显的变量：

```
if(isset($message)) {
 echo "<div id='notification'>" . $message . "</div>" 
```

我的问题是，出于样式目的，此应用程序需要`iframe`位于 index.php 内部。通知是样式化的`position: absolute; right: 0`，但显然它被限制在框架内，而它需要在框架外，因此它与设计一起流动（在框架外执行）。

我尝试将上面的相同代码与 php 一起使用，`include`但我没有得到任何输出，大概是因为`isset`返回 NULL，因为该函数没有在 index.php 中执行。

所以我的问题是，我可以捕获 php 输出并在 index.php 中回显它，还是在它的框架之外运行一个`iframe`元素 ( `#notification`)。

谢谢。如果有人知道另一种解决方法，那将是受欢迎的。我对 PHP 也比较陌生，所以也欢迎解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:22:45.260

```
<iframe src="put_here_your_iframe_url.php?msg=<?echo urlencode($message);?>" ></iframe> 
```

在 iframe 中

您将使用此行显示消息：

```
echo 'Message: '.urldecode($_GET['msg']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:28:38.440

无法将内容定位在 iframe 边界框之外。

如果 iframe 内容及其父页面都托管在同一个域下，您可以使用简单的 JavaScript 将消息从 iframe 传递到父页面。

父页面：

```
<div id="msg"></div>

<script>
var displayNotification = function( message ){ document.getElementById('msg').innerHTML = message; }
</script> 
```

更改您的 PHP 脚本

```
if(isset($message)) {
echo "<script> top.displayNotification(" . $message . ");</script>"; 
```

# mysql - 存储分配给用户的大约 40 亿 (2^32) 个号码的建议

> ID：14307502
> 
> 赞同：2
> 
> 时间：2013-01-13T19:53:39.703
> 
> 标签：mysql, nosql

我正在研究存储可能是大量数据的策略，我想找到最好的存储技术。我愿意接受任何关于 MySQL、NoSQL、平面文件、任何东西的建议。

我在做什么：

*   我将在一组用户中分配所有 4 字节整数。
*   数字将是 0 到 4,294,967,295，无符号 4 字节整数范围。
*   用户可以拥有数千个这样的号码。
*   期待成千上万的用户，但数百万的可能性很小。
*   数字将在一段时间内分发，而不是一次全部分发
*   使用 AWS、一些服务器和 EBS 卷

我主要关心的是存储空间。我需要在 AWS 上以便宜且大批量的成本来做这件事。

我对数学上的数字分配进行了一些研究，但我发现了太多问题。

要求

*   用于分析和实时数据显示的某些有效检索。不一定要闪电般快速但合理。
*   我需要在两个方向上查找用户 ID -> 号码和号码 -> 用户 ID
*   尽可能少的存储空间。
*   合理的（小于 8 GB）内存使用。
*   必须准确，丢失号码和错误分配的号码不是一种选择。

这是我到目前为止发现的：

存储与 2 字节用户 ID 关联的所有 4 字节数字的下限是 ((4+2) * 2^32 / 1024 / 1024 / 1024) = 24 GB。

Cassandra 是一个键/值对数据库。基于这个[http://www.datastax.com/docs/0.8/cluster_architecture/cluster_planning](http://www.datastax.com/docs/0.8/cluster_architecture/cluster_planning)我计算出，如果我使用每个 4 字节数字作为键和 2 字节用户 ID 作为值，我需要大约 260GB 的存储空间（没有复制）。

Redis 在内存中。我认为这将消除这种可能性，因为在 AWS 上这么多内存会非常昂贵。

我目前正在寻找有关 MySQL 和 Mongo 的类似信息。

这是我的问题。有没有我可以用来确定最佳解决方案的参考资料，或者有没有我没有想到的替代解决方案。

谢谢大家。

更新 - 我添加了一个额外的要求，我需要根据用户 id 和用户 id 来查找数字。此外，Redis 是在内存中的，因此直接实现会使 Redis 比基于磁盘的解决方案更昂贵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:54:37.517

实际上，您只需要存储有用户的号码即可；如果您正在查找未存储的号码，您将得到一个空结果，因此您知道该号码未分配。

对于 MySQL：

```
CREATE TABLE mashup
(
   id       bigint primary key,
   user_id  int,

   index (user_id);
); 
```

主键将确保 'id' 有一个索引；此外，bigint 有更多空间，因此您不会遇到整数溢出等令人讨厌的问题。然后，为每个用户插入一条记录，如下所示：

```
INSERT into mashup VALUES (181870388, 90128); 
```

想知道一个号码是否有用户？

```
SELECT user_id FROM mashup where id=xxxxx; 
```

或者

```
SELECT COUNT(*) FROM mashup where id=xxxxx; 
```

想知道用户有哪些号码？

```
SELECT id FROM mashup WHERE user_id=yyyyy; 
```

美妙之处在于您不会浪费存储所有 40 亿个数字的空间，而只需存储用户条目的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:29:14.653

也许我们的例子可以提供帮助。我们`couchdb`用于存储欧洲一个大国的全套移植电话号码。第一次对此进行索引需要相当多的时间，但随后`map-reduce`会变得非常快。

我们的磁盘使用情况如下：

```
Usage: 8.2 GB
Numbers of documents: 22109793
Average characters per document: 272 
```

希望这对您的选择有所帮助。

# java - 如何在 Eclipse 中重新激活对特定文件的 Android Java 检查？

> ID：14307505
> 
> 赞同：1
> 
> 时间：2013-01-13T19:54:07.833
> 
> 标签：java, android, eclipse, lint

我以前遇到过这个问题并解决了但忘记了如何:(

通常我在 Eclipse（Android 开发工具版）中的 Java 文件会即时检查语法和编译问题——我认为 Lint 可能是工具，不确定——但我添加了一个，但一开始却错误地忘记了指定 .java 扩展名。从那时起，它就没有得到自动检查（仅在保存时）。

在动态编辑期间检查所有其他文件，而不是这个特定的文件。如何让它像其他人一样进行实时检查？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:32:12.250

Eclipse 中的某个地方可能有一些设置，但我已经厌倦了寻找它。我制作了源文件的副本（非常重要！），然后从项目（和磁盘）中删除了原始文件。然后我再次添加它，确保指定.java（以后不要更改），这在项目中形成了一个空白文件。然后我复制了我从第一个转世中保存的源代码，一切又恢复了快乐。

我想如果你向 Eclipse 添加类似“ButtonMgr”的东西，它可以理解不知道如何处理它，如果你稍后将它重命名为“ButtonMgr.java”，它不会自动重置动态语法检查（仅保存时）所以唯一的方法是保存一个副本，杀死原来的，制作一个新的并重新合并保存的代码。但是，如果其他人知道“官方”方式，请发布。

# python - 读取带有标题和数据的csv文件，并转换为xls文件

> ID：14307514
> 
> 赞同：1
> 
> 时间：2013-01-13T19:54:42.633
> 
> 标签：python, csv, xlwt

我有带有 2 行标题、未知行数和列数的 csv 数据文件。例如

```
"x", "y"
"unit x", "unit y"
1, 2
3, 4 
```

我使用以下代码读取 csv 文件并将其写入 xls 文件

```
import csv, xlwt

f = open('example.csv', 'rb')
reader = csv.reader(f)

workbook = xlwt.Workbook()
sheet = workbook.add_sheet("Sheet 1")

for rowi, row in enumerate(reader):
    for coli, value in enumerate(row):
        sheet.write(rowi,coli,value)

workbook.save("example.xls") 
```

问题是它把我所有的数据都写成 xls 中的文本。如何将文本转换为数字？我知道前 2 行是标题，数据从第 3 行开始到最后。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:14:15.247

您可以检查您是否在第 3 行，然后转换`value`为 int。

```
for rowi, row in enumerate(reader):
    for coli, value in enumerate(row):
        if rowi >= 2:
            value = int(value)
        sheet.write(rowi, coli, value) 
```

您也可以尝试将所有值转换为数字。

```
for rowi, row in enumerate(reader):
    for coli, value in enumerate(row):
        try:
            value = int(value)
        except ValueError as e:
            pass
        sheet.write(rowi, coli, value) 
```

# php - 在php中显示文件名发生变化的图片

> ID：14307516
> 
> 赞同：0
> 
> 时间：2013-01-13T19:55:08.830
> 
> 标签：php, database, image

我在显示可以上传到我的网站的图片时遇到问题。在上传过程中，我更改了文件名，将图片存储在文件夹中，并将文件名存储在数据库中。我在下面展示我的代码。非常感谢那些将要看看的人：

上传图片的表格：

```
<form method="post" action="PicPost.php" enctype="multipart/form-data">
 <label for="Pic">Upload your pic: (JPG, JPEG PNG ou GIF  | max. 1 Mo) :</label><br />
     <input type="hidden" name="maxsize" value="1048576" />
     <input type="file" name="Pic" id="Pic" />

 <p>
   <label>Tags
   <input type="text" name="Tags" id="Tags" />
   </label>
   <br />

   <input type="submit" name="submit" value="Submit" />
      </p>
  </form> 
```

PicPost.php中完成上传的代码：

```
 <?php
$maxsize = '1048576';

 if ($_FILES['Pic']['error'] > 0) $erreur = "Error";

 if ($_FILES['Pic']['size'] > $maxsize) $erreur = "The file is too big";

 $extensions_valides = array( 'jpg' , 'jpeg' , 'gif' , 'png' );
 $extension_upload = strtolower(  substr(  strrchr($_FILES['Pic']     ['name'], '.')  ,1)  );
  if ( in_array($extension_upload,$extensions_valides) ) echo "Correct extension";

 $name = md5(uniqid(rand(), true));

 $resultat = move_uploaded_file($_FILES['Pic']['tmp_name'],$name);
 if ($resultat) echo "Upload successful";

 try
 {
 $bdd = new PDO('mysql:host=localhost;dbname=mydb', 'root', '');
 }
 catch (Exception $e)
 {
die('Erreur : ' . $e->getMessage());
 }
 $req = $bdd->prepare('INSERT INTO picdb (Picture, Tags)
 VALUES(?, ?)');
 $req->execute(array($name, $_POST['Tags'])); 
```

通过标签在数据库中搜索图片的代码：

```
<form id="form1" name="form1" method="post" action="SearchPost.php">
<label>
<input type="text" name="Search" id="Search" />
</label>
<label>
<input type="submit" name="Submit" id="Submit" value="Search" />
</label>
</form> 
```

显示 SearchPost.php 中搜索到的图片的代码：

```
try
{
$bdd = new PDO('mysql:host=localhost;dbname=mydb', 'root', '');
}
catch (Exception $e)
{
die('Erreur : ' . $e->getMessage());
}

 $reponse = $bdd->query('SELECT Picture FROM picdb WHERE
 Tags=\''.$_POST['Search'].'\'');

  while ($donnees = $reponse->fetch())

 echo "<img src=".$donnees['Picture']."/>";

 $reponse->closeCursor(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:01:03.557

将新文件名存储在数据库、另一个字段或您已有的字段中。

您正在存储原始文件名

# ruby - Soundcloud Oauth 实施：为什么是哈希参数？

> ID：14307517
> 
> 赞同：2
> 
> 时间：2013-01-13T19:55:19.627
> 
> 标签：ruby, oauth, sinatra, oauth-2.0, soundcloud

关于[https://github.com/sinatra/sinatra/issues/596](https://github.com/sinatra/sinatra/issues/596)，我错误地将其诊断为 sinatra 错误。

我遇到以下问题：我正在使用 Soundcloud OAuth 工作流程在我的项目中实现单点登录。为此，我使用了“soundcloud” gem。因此，在被重定向到 soundcloud 的登录/授权表单并按下“连接”后，我被重定向回我指定为重定向 url 的应用程序中的 URL……但是一些哈希参数落后了！因此，假设我没有被重定向到“http://myapp.com/connect?code=123”，而是被重定向到“http://myapp.com/connect?code=123#access_token=qwerty” ”。由于散列参数不是 HTTP 协议的一部分，它确实对服务器有次要影响，但在客户端上，bleepin 散列参数并没有消失！基本上，在我的重定向端点上，我正在获取 soundcloud 给出的代码，ping Soundcloud 的令牌交换以获得新的访问令牌，将其存储并重定向到我的主页“/”。但是浏览器不会清除重定向时的哈希参数，这意味着我被重定向到“http://myapp.com/#access_token=qwerty”。这很糟糕。是否有解决此问题的方法，或者这是 soundcloud“错误”？（不完全是一个错误，因为它不会破坏任何东西，在那里有那些哈希参数简直是丑陋的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:31:20.810

*[在你链接的那个线程中回答了同样的事情，但会尝试在这里总结一下]*

我能想到的一个原因是确保 JS 交叉兼容的 API。也就是在使用JS对用户进行认证时，读取认证url参数结果的唯一方法是——通过解析`#`URL中的后面的属性。据我所知，这是设计的原因。

是的，有一个解决方法：

实际上，API 服务器还有更多的特性，这些特性还没有在 Ruby 驱动程序中直接实现。调用的结果`client.authorize_url`是这种类型：

```
"https://#{host}#{AUTHORIZE_PATH}?response_type=code_and_token
                                  &client_id=#{client_id}
                                  &redirect_uri=#{URI.escape redirect_uri}
                                  &#{additional_params}"
(Ignore the `additional_params` part for now) 
```

该`response_type`参数也可以采用其他值，但不幸的是，这不是 Ruby API 包装器中现成的功能。可能的值是：

*   `response_type=code`其中嵌入了`code`稍后可用于生成`access_token`用户的。这可以通过`client.exchange_code(:code => params[:code])`API 参考文档中提到的运行来完成。
*   `response_type=token`它嵌入`access_token`并避免了`code`参数。但是，与`code`参数不同的是，`access_token`它不是查询参数，而是以a为前缀，`#`因此，JS是获取该值的唯一方法。

*您可以在此处验证这一点：http: [//developers.soundcloud.com/docs/api/reference#connect](http://developers.soundcloud.com/docs/api/reference#connect)。可以更改的参数之一是`response_type`. 附加参数是`display`,`state`并且`scope`在上面的链接中列出*

# python - 你好世界 Cron 工作不工作

> ID：14307518
> 
> 赞同：8
> 
> 时间：2013-01-13T19:55:44.860
> 
> 标签：python, unix, cron, crontab

我只用了一个小时就学会了[cron](http://en.wikipedia.org/wiki/Cron)作业的工作原理，这就是我迄今为止所做的。我`crontab -e`用来添加我的 cron 命令，即：

`0/1 * * * * /usr/bin/python /home/my_username/hello.py > /home/my_username/log.txt`

`crontab -l`确认我的命令在那里。

你好.py：

```
#!/usr/bin/python
# Hello world python program
print "Hello World!" 
```

但我在日志文件中看不到任何内容。有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:17:04.347

实验表明，这`0/1`似乎是问题所在。

`0/1` *应该*等同于`*`。如果您替换`0/1`为`*`，它应该可以工作。

这是我的实验性 crontab：

```
0/1 * * * * echo 0/1  >> cron0.log
*   * * * * echo star >> cron1.log 
```

这会创建`cron1.log`但不会`cron0.log`。

我将对此进行调查并尝试找出为什么`0/1`不起作用，但现在只需使用`*`它就可以了。

更新：

该`foo/bar`语法特定于 Vixie cron 实现，大多数 Linux 系统和 MacOS X 都使用该语法，但并不通用。

每分钟运行命令的常用方法是仅`*`在第一个字段中指定。要每 5 分钟运行一次命令，*如果*您的 cron 支持，请指定`*/5`.

这是`crontab(5)`手册页的内容：

> 步长值可以与范围结合使用。跟随一个范围，`/<number>`指定跳过该范围内的数字值。例如，`0-23/2`可以在小时字段中使用以指定每隔一小时执行一次命令（V7 标准中的替代方案是`0,2,4,6,8,10,12,14,16,18,20,22`）。星号后也允许执行步骤，因此如果您想说“每两个小时”，只需使用`*/2`.

我什至不确定是什么`0/1`意思。

**更新 2：**

好的，这就是我发现的。

鉴于字段 2 到 5 都是`*`，将第一个字段（指定分钟）设置为`*`会导致作业每分钟运行一次。 `*/2`每 2 分钟`*/3`运行一次，每 3 分钟运行一次。这一切都在预料之中。

将第一个字段设置为 、 或 中的任何一个`0/1`会`0/2`导致`0/3`作业仅在整点运行，即，它等同于`0`。

这不是我从手册页中的描述所期望的。[jgritty 回答](https://stackoverflow.com/a/14307763/827263)中的[维基百科引用](http://en.wikipedia.org/wiki/Cron#cite_ref-8)：

> 某些版本的 cron 可能不接受“/”前面的值，如果它不是一个范围，例如“0”。另一种方法是用星号替换零。

似乎并不完全正确，至少对于我正在使用的 Vixie cron 版本而言；毫无怨言地`0/1`接受了，但这并不意味着我所期望的，而且它似乎并不是特别有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:23:59.060

`0/1`您的 cron 版本的格式似乎错误。

我在[维基百科](http://en.wikipedia.org/wiki/Cron#cite_ref-8)上找到了这个：

> 某些版本的 cron 可能不接受“/”前面的值，如果它不是一个范围，例如“0”。另一种方法是用星号替换零。

所以基思汤普森的回答应该有效，所以应该：

`*/1 * * * *`

# google-apps-script - 用于电子表格的 Google App 脚本

> ID：14307525
> 
> 赞同：1
> 
> 时间：2013-01-13T19:56:51.743
> 
> 标签：google-apps-script

我需要根据其他单元格的值为范围单元格添加背景颜色，但是这个范围有不同的值，例如：

1 X 2 1 XX | 2

在检查值为 2 的 las 单元格时，范围单元格必须是独立的颜色，即只有单元格 3 必须具有绿色背景色，因为与红色的值相同，其他单元格的值相同。

我有这个代码：

```
function test() {
  var libro = SpreadsheetApp.getActiveSpreadsheet();
  var range_input = libro.getRange("B3:E3");
  var target_cell = libro.getRange("G3");

  if (range_input.getValues()==target_cell.getValue()) 
  {
    range_input.setBackgroundColor('#58FA58');    
  }

  else
  {
    range_input.setBackgroundColor('#FA5858')
  }  
} 
```

但问题是这不起作用，因为只有当所有值单元格的值与最后一个单元格的值相同时，该行才为绿色，这意味着尽管单元格 3 具有正确的值，但整行都变为红色。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:43:06.240

`range_input.getValues()`返回 4 个单元格的值数组的数组，同时`target_cell.getValue()`返回 1 个值。

```
function test() {
  var libro = SpreadsheetApp.getActiveSpreadsheet();
  var range_input = libro.getRange("B3:E3");
  var target_cell = libro.getRange("G3").getValue();//Save the value

  //Gets the values of the range ([0] to retrieve just the first row of values)
  var input_values = range_input.getValues()[0];
  //Gets the backgrounds of the range ([0] to retrieve just the first row of values)
  var backgrounds = range_input.getBackgroundColors()[0];

  //Loop through values in the row, checking against the cell.
  for(var i = 0; i < input_values.length; i += 1){
    if(input_values[i] === target_cell) {
      backgrounds[i] = '#58FA58';
    } else {
      backgrounds[i] = '#FA5858';
    }
  }
  //Put the row of backgrounds back in an array to make it 2d and set the backgrounds
  range_input.setBackgroundColors([backgrounds]);
} 
```

# c# - 对类似的测试进行分组：是还是不是？

> ID：14307530
> 
> 赞同：3
> 
> 时间：2013-01-13T19:57:34.347
> 
> 标签：c#, unit-testing

我在某处读到每个测试必须只测试一件事。但是，良好实践手册中是否允许对类似行为进行分组？我目前正在编写一些测试（带有 NUnit 的 C#），下面是我所面临的一个示例：

```
[TearDown]
public void Cleanup()
{
    Hotkeys.UnregisterAllLocals();
    Hotkeys.UnregisterAllGlobals();
}

[Test]
public void KeyOrderDoesNotMatter()
{
    Hotkeys.RegisterGlobal("Ctrl+Alt+P", delegate { });
    Assert.That(Hotkeys.IsRegisteredGlobal("Alt+P+Ctrl"), Is.True);
}

[Test]
public void KeyCaseDoesNotMatter()
{
    Hotkeys.RegisterGlobal("Ctrl+Alt+P", delegate { });
    Assert.That(Hotkeys.IsRegisteredGlobal("ctrl+alt+p"), Is.True);
}

[Test]
public void KeySpacesDoesNotMatter()
{
    Hotkeys.RegisterGlobal("Ctrl+Alt+P", delegate { });
    Assert.That(Hotkeys.IsRegisteredGlobal("Ctrl + Alt + P"), Is.True);
} 
```

分组后，它们将变为：

```
[TearDown]
public void Cleanup()
{
    Hotkeys.UnregisterAllLocals();
    Hotkeys.UnregisterAllGlobals();
}

[Test]
public void KeyIsNotStrict()
{
    // order
    Hotkeys.RegisterGlobal("Ctrl+Alt+A", delegate { });
    Assert.That(Hotkeys.IsRegisteredGlobal("Alt+A+Ctrl"), Is.True);

    // whitespace
    Hotkeys.RegisterGlobal("Ctrl+Alt+B", delegate { });
    Assert.That(Hotkeys.IsRegisteredGlobal("Ctrl + Alt + B"), Is.True);

    // case
    Hotkeys.RegisterGlobal("Ctrl+Alt+C", delegate { });
    Assert.That(Hotkeys.IsRegisteredGlobal("ctrl+alt+c"), Is.True);
} 
```

那么最佳实践是什么（如果存在），为什么？

obs：我对单元测试比较陌生...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T20:01:42.317

最简洁的答案是不。你应该让你的测试尽可能简单。每个测试应该只测试一件事。

有一个用于单元测试的[Arrange-Act-Assert (AAA)模式。](http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/)这表明您应该在测试方法的开头做一些准备（安排），然后执行此测试检查并在方法结束时做出一些断言。

此外，我可能会建议您阅读有关单元测试的[FIRST](http://agileinaflash.blogspot.ru/2009/02/first.html)模式。

**升级版：**

当你让你的测试变得复杂时——当测试变成“红色”时很难识别出什么问题，你知道一些断言失败了，但你必须阅读日志来了解哪一个。此外 - 如果您的复杂测试中的第一个断言失败，您甚至不知道其余的断言是否正常。维护大型单元测试也很困难，您为第一个断言所做的一些工作可能会产生影响下一个断言的副作用。

但是您应该考虑到您对[GRASP](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29)的测试也应该是低耦合/高内聚的，因此，正如@Schwern 在他的回答中提到的那样，如果不同的测试将结束，您不应该仅仅为了最小化断言而编写单独的测试向上测试相同的逻辑事物。开发人员始终可以自行决定在每种特定情况下哪种方式是正确的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T20:13:29.667

*注意：我不是 C# 程序员。*

一方面，你有“在测试中只做一件事”。另一方面，您有[DRY 原则](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。你被问到要违反哪个。这取决于您违反每个规则的严重程度，您从违规中获得多少好处，以及为什么这些规则首先存在。

您的分组解决方案并不理想，因为它仍然会重复。相反，如果您这样做...

```
[TearDown]
public void Cleanup()
{
    Hotkeys.UnregisterAllLocals();
    Hotkeys.UnregisterAllGlobals();
}

[Test]
public void IsRegisteredGlobal_InputNormalization()
{
    Hotkeys.RegisterGlobal("Ctrl+Alt+P", delegate { });

    Assert.IsTrue(Hotkeys.IsRegisteredGlobal("Alt+P+Ctrl"),     "order independent");
    Assert.IsTrue(Hotkeys.IsRegisteredGlobal("ctrl+alt+p"),     "case insensitive");
    Assert.IsTrue(Hotkeys.IsRegisteredGlobal("Ctrl + Alt + P"), "whitespace independent");
} 
```

那么你就不会违反 DRY 并且你几乎不会磨损“在测试中只做一件事”。它仍在做一件“事情”，那件事正在规范化 IsRegisteredGlobal 的输入。

您每次测试只做一件事以隔离它们。这使得测试更容易隔离和调试。这并不意味着每次测试一个*断言。*上面的测试仍然只做一件事，但它以三种非常非常相似的方式进行测试。还行吧。以前您的断言由测试名称解释。现在它们由与每个断言关联的消息来解释。失败的原因仍然很明显，I 在 FIRST。

此外，如果您要为每个方法使用一个断言编写所有测试，并不必要地一遍又一遍地重复相同的代码，那么您不仅违反了 DRY，而且重复的代码可能会开始减慢违反 FIRST 中的 F 的速度。

当您颠倒他们的顺序时，检查是否有`Hotkeys.IsRegisteredGlobal("Alt+P+Ctrl")`可能成为真的？`Hotkeys.IsRegisteredGlobal("ctrl+alt+p")`是的。但在隔离、速度和便利性之间总是需要权衡取舍。如果您怀疑其中一个可能会干扰另一个，您应该隔离它们。我想说，如果你想检查两者之间没有耦合，那么你应该在自己的测试中明确地做到这一点，而不是让每个测试都背负这个负担。

是的，运行代码并对其执行多个断言很好，但请始终记住，这是良好代码和良好测试之间的平衡行为。通常测试会获胜，但不要对此感到愚蠢。

为了紧凑、清晰和可能更好的故障诊断， 我将其切换到`IsTrue`而不是通用的。意味着你直到最后都不知道你在测试什么。你必须阅读整行，看看条件是什么，然后根据你真正测试的内容再次阅读整行。 提前告诉你。 在复杂的断言中可能更具可读性，但在简单的断言中可读性较差。可以酌情使用它们。（*注：Perl 程序员*）`That``Assert.That( thing, condition )``Assert.IsTrue``Assert.That`

 *它还可能产生更好的故障诊断，因为您向 NUnit 提供了有关您的意图的更多信息。不是“这与那个匹配”而是“这是真的”，因此它可以产生更准确和精心制作的断言。尽管 NUnit 也可能足够聪明，可以看到您正在测试`Is.True`并执行此操作。它不疼。*

# c# - 字符串和字符串一样吗？

> ID：14307535
> 
> 赞同：0
> 
> 时间：2013-01-13T19:58:12.803
> 
> 标签：c#, visual-studio

> **可能重复：**
> [字符串和字符串有什么区别？](https://stackoverflow.com/questions/7074/whats-the-difference-between-string-and-string)
> [何时使用 int 与 Int32 或 string 与 String 有什么关系？](https://stackoverflow.com/questions/8747190/when-does-it-matter-whether-you-use-int-versus-int32-or-string-versus-string)

在 Visual Studio 中，当我输入字符串时，它显示了两个建议

![截图](../Images/0287591359b5647d8703e3604d976cdf.png)

“字符串”和“字符串”都一样吗？Visual Studio 对两者显示相同的描述。

那么，如果它们相同，那么需要保留两个执行相同功能的不同事物吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T20:00:33.697

[是的，正如本文](https://stackoverflow.com/questions/7074/whats-the-difference-between-string-and-string)所证实的那样，您使用它在技术上完全没有区别。如答案中所述，如果您使用`string`.

希望这可以为您解决问题！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T20:00:05.327

`string`只不过是 的别名`System.String`。

作为（[见这个答案](https://stackoverflow.com/questions/7074/whats-the-difference-between-string-and-string)`int`）的别名也是如此。`System.Int32`

我也同意使用`String`静态函数调用的一般准则，例如`String.Format`而不是`string.Format`（尽管我更喜欢`string.Empty`），以及使用`string`对象（`string hello = "world";`）。

但是，在这一点上，这完全取决于偏好和约定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T20:02:03.147

[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/362314fe.aspx)也这么说，`string`只是`System.String`. 如果您想查看 C# 中别名类型的完整映射，可以参考此处：[数据类型（C# 与 Java）](http://msdn.microsoft.com/en-us/library/ms228360%28v=vs.90%29.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T20:01:28.327

是的，他们是。`string`只是一个别名`String`：它们具有相同的功能并且它们的工作方式相同......通常我更喜欢使用字符串，因为代码合成器突出显示。但它们是等价的，完全一样`int`是 的别名`Int32`和`long`是 的别名`Int64`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T20:06:03.677

我认为两者都是相同的东西，因为它们都在同一个命名空间中。所以不要混淆。您可以将它们中的任何一个用于字符串表示。

# cucumber - Capybara/Cucumber 对相似标签的模糊匹配

> ID：14307540
> 
> 赞同：3
> 
> 时间：2013-01-13T19:58:34.453
> 
> 标签：cucumber, capybara

我的页面中有此代码

```
 <div>
    <label for="user_password">Heslo</label>
    <br />
    <input id="user_password" name="user[password]" size="30" type="password">
  </div>

  <div>
    <label for="user_password_confirmation">Heslo pro kontrolu</label>
    <br>
    <input id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password">
  </div> 
```

我想在 Cucumber 中使用这些步骤：

```
And I fill in "Heslo" with "NeznameHeslo328"
And I fill in "Heslo pro konrolu" with "NeznameHeslo328" 
```

步骤定义很简单：

```
When /^I fill in "([^"]*)" with "([^"]*)"$/ do |name, text|
  fill_in(name, :with => text)
end 
```

但是 Capybara 提出了**模糊匹配，第一步找到了 2 个匹配字段“Heslo”（Capybara::Ambiguous）** 的元素。

当我将标签中的名称更改`for="user_password_confirmation"`为“ *Hesla pro kontrolu* ”（以及相应的第二步）时，一切正常。

有什么方法可以强制 Capybara 匹配标签中的确切短语？在场景中不使用 css 选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:48:17.000

**更新**

在 Capybara 2.1[中，您可以使用`:exact`选项](https://github.com/jnicklas/capybara#exactness)：

```
fill_in(name, with: 'Heslo', exact: true) 
```

此选项`false`默认设置为

* * *

在 Capybara 的早期版本中，不可能进行精确的字符串匹配。所有匹配都是使用子字符串完成的。您只能使用其他选择器类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:16:26.900

这是我开始使用的。到目前为止它对我有用：

```
Given /^I fill in "([^\"]*)" with "([^\"]*)"$/ do |field_name, text|
  page.find(field_name).set "#{text}"
end 
```

# php - PHP中的电子邮件发送问题

> ID：14307544
> 
> 赞同：1
> 
> 时间：2013-01-13T19:58:54.007
> 
> 标签：php, email, sendmail.exe

我正在尝试通过 php 发送一封电子邮件，在我提出问题之前，我所做的事情是——

1.  我有 Xampp 并打开了 Mercury，我已经创建了 2 个本地用户。
2.  我有 Thunderbird 来接收电子邮件，我已经设置好了。也就是说，我可以毫无问题地从一个本地用户向另一个用户发送电子邮件。
3.  现在我的电子邮件 php 代码很简单

```
`mail('revan@localhost','Hello!','Hello, This is a test!','FROM:sunny@localhost') or die("Email sending failed");` 
```

`?>`

4）现在在我的 php.ini 中，邮件功能看起来像---

```
; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury
SMTP =localhost
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = sunny@localhost

; XAMPP IMPORTANT NOTE (1): If XAMPP is installed in a base directory with spaces (e.g. c:\program filesC:\xampp) fakemail and mailtodisk do not work correctly.
; XAMPP IMPORTANT NOTE (2): In this case please copy the sendmail or mailtodisk folder in your root folder (e.g. C:\sendmail) and use this for sendmail_path.  

; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)
;sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"

; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the C:\xampp\mailoutput folder
;sendmail_path = “\”C:\xampp\sendmail\sendmail.exe\” -t”

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = Off

; Log all mail() calls including the full path of the script, line #, to address and headers
;mail.log = "C:\xampp\php\logs\php_mail.log" 
```

现在的问题是......我没有收到任何错误消息，但我没有收到任何电子邮件。

水星日志

```
T 20130114 003213 50f35170 Connection from 127.0.0.1
T 20130114 003213 50f35170 EHLO we-guess.mozilla.org
T 20130114 003213 50f35170 QUIT
T 20130114 003213 50f35170 Connection closed with 127.0.0.1, 0 sec. elapsed.
T 20130114 003213 50f35171 Connection from 127.0.0.1
T 20130114 003213 50f35171 EHLO we-guess.mozilla.org
T 20130114 003213 50f35171 QUIT
T 20130114 003213 50f35171 Connection closed with 127.0.0.1, 0 sec. elapsed.
T 20130114 003912 50f35393 Connection from 127.0.0.1
T 20130114 003912 50f35393 EHLO we-guess.mozilla.org
T 20130114 003912 50f35393 QUIT
T 20130114 003912 50f35393 Connection closed with 127.0.0.1, 0 sec. elapsed.
T 20130114 003912 50f35394 Connection from 127.0.0.1
T 20130114 003912 50f35394 EHLO we-guess.mozilla.org
T 20130114 003912 50f35394 QUIT
T 20130114 003912 50f35394 Connection closed with 127.0.0.1, 0 sec. elapsed.
T 20130114 003949 50f35395 Connection from 127.0.0.1
T 20130114 003949 50f35396 Connection from 127.0.0.1
T 20130114 003949 50f35395 EHLO we-guess.mozilla.org
T 20130114 003949 50f35395 QUIT
T 20130114 003949 50f35395 Connection closed with 127.0.0.1, 0 sec. elapsed.
T 20130114 003949 50f35396 EHLO we-guess.mozilla.org
T 20130114 003949 50f35396 QUIT
T 20130114 003949 50f35396 Connection closed with 127.0.0.1, 0 sec. elapsed.
T 20130114 004614 50f35397 Connection from 127.0.0.1
T 20130114 004614 50f35397 EHLO [127.0.0.1]
T 20130114 004614 50f35397 MAIL FROM:<sunny@localhost> SIZE=359
T 20130114 004614 50f35397 RCPT TO:<revan@locahost>
T 20130114 004614 50f35397 RSET
T 20130114 004614 50f35397 RSET
T 20130114 004615 50f35397 MAIL FROM:<sunny@localhost> SIZE=359
T 20130114 004615 50f35397 RCPT TO:<revan@locahost>
T 20130114 004615 50f35397 DATA
T 20130114 004615 50f35397 DATA - 12 lines, 361 bytes.
T 20130114 004615 50f35397 QUIT
T 20130114 004615 50f35397 Connection closed with 127.0.0.1, 1 sec. elapsed.
T 20130114 004713 50f35398 Connection from 127.0.0.1
T 20130114 004713 50f35398 EHLO [127.0.0.1]
T 20130114 004713 50f35398 MAIL FROM:<sunny@localhost> SIZE=367
T 20130114 004713 50f35398 RCPT TO:<revan@localhost>
T 20130114 004713 50f35398 RSET
T 20130114 004713 50f35398 RSET
T 20130114 004713 50f35398 MAIL FROM:<sunny@localhost> SIZE=367
T 20130114 004713 50f35398 RCPT TO:<revan@localhost>
T 20130114 004713 50f35398 DATA
T 20130114 004713 50f35398 DATA - 12 lines, 369 bytes.
T 20130114 004713 50f35398 QUIT
T 20130114 004713 50f35398 Connection closed with 127.0.0.1, 0 sec. elapsed.
T 20130114 004750 50f35399 Connection from 127.0.0.1
T 20130114 004750 50f35399 EHLO [127.0.0.1]
T 20130114 004750 50f35399 MAIL FROM:<revan@localhost> SIZE=379
T 20130114 004750 50f35399 RCPT TO:<sunny@localhost>
T 20130114 004750 50f35399 RSET
T 20130114 004750 50f35399 RSET
T 20130114 004750 50f35399 MAIL FROM:<revan@localhost> SIZE=379
T 20130114 004750 50f35399 RCPT TO:<sunny@localhost>
T 20130114 004750 50f35399 DATA
T 20130114 004750 50f35399 DATA - 12 lines, 381 bytes.
T 20130114 004750 50f35399 QUIT
T 20130114 004750 50f35399 Connection closed with 127.0.0.1, 0 sec. elapsed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:27:54.830

尝试这个：

```
$to      = 'your_other_email@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: sunny@example.com' . "\r\n" .
'Reply-To: sunny@example.com' . "\r\n" .
'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers); 
```

查看[更多](http://www.nbilyk.com/sending-mail-from-localhost)

我会避免从本地主机发送到本地主机..

# c# - 在 Windows RT 的 ListView 中显示缩略图

> ID：14307545
> 
> 赞同：0
> 
> 时间：2013-01-13T19:58:57.357
> 
> 标签：c#, windows-runtime

我有一个获取缩略图的代码，看起来像这样

```
public async Task<bool> SetThumbnail(Model.FileInfo Fil)
{
   try
   {
      // Set the File
      var File = await GetStorageFile(Fil);

      // Set the File's thumbnail
      Fil.FileThumbnail = await File.GetThumbnailAsync(Windows.Storage.FileProperties.ThumbnailMode.ListView);

      // Set the File
      Fil.File = File;

      // Return true as it was successfully executed
      return true;
   }
   // Otherwise it was not successful so return false
   catch (Exception e) {
      return false;
   }
} 
```

GetStorageFile 方法如下所示

```
private async Task<StorageFile> GetStorageFile(Model.FileInfo FileInf)
{
   // Create (and open the Folder)
   var Folder = await _Folder.CreateFolderAsync(_FilesFolderName, CreationCollisionOption.OpenIfExists);

   // Get the File
   return await Folder.GetFileAsync(FileInf.ID + "." + FileInf.Extension);
} 
```

第一次效果很好，但是当我第二次显示列表时，缩略图没有出现

当我第二次运行它时，可能出了什么问题？

# mysql - Windows Azure MySQL auto_increment_increment

> ID：14307547
> 
> 赞同：0
> 
> 时间：2013-01-13T19:59:20.570
> 
> 标签：mysql, azure

我在 Windows Azure 上将 MySQL 用于我正在维护的 PHP 应用程序，我注意到 auto_increment 值开始增加 10。我检查了 auto_increment_increment 变量，它设置为 10。将变量设置回 1 将不起作用因为我没有管理员，显然。

这是我每次连接时都可以在 PHP 中解决的问题吗？这会很痛苦，但如果必须这样做以保持我们的人数合理，我会这样做。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:54:19.710

ClearDB 支持 Windows Azure 中的 MySQL。ClearDB FAQ 清楚地说明了这一点。

请参阅[ClearDB 常见问题解答](http://www.cleardb.com/developers/help/faq)。

# c# - 如何安全地从 TableLayoutPanel 中删除控件

> ID：14307550
> 
> 赞同：1
> 
> 时间：2013-01-13T19:59:48.653
> 
> 标签：c#, winforms

我正在使用带有 128 个单元格的 a ，可以使用包含 a和 a`tablelayoutpanel`的面板随机填充这些单元格。在重新填充之前删除所有面板的最佳做法是什么？如果做得不好，会不会有内存泄漏？`picturebox``textbox``picturebox``textbox``tablelayoutpanel`

# c# - 在视图中生成新锚点时，我可以强制 T4MVC 不从当前视图的 URL 中获取参数吗？

> ID：14307556
> 
> 赞同：2
> 
> 时间：2013-01-13T20:00:41.980
> 
> 标签：c#, asp.net, asp.net-mvc, routes, t4mvc

我有一个 ASP.Net MVC4 应用程序，我使用 T4MVC 在我的视图中方便地生成锚元素。像这样的东西：

```
@Html.ActionLink("Application 1", MVC.Application.Overview(1)) 
```

我的 RouteConfig 中有两条路线：

```
routes.MapRouteLowercase(
    name: "DefaultWithId",
    url: "{controller}/{id}/{action}/{subaction}",
    constraints: new { id = @"\d+" },
    defaults: new { subaction = UrlParameter.Optional }
);

routes.MapRouteLowercase(
    name: "Default",
    url: "{controller}/{action}",
    defaults: new { controller = "Home", action = "Index" }
); 
```

我有一个应用程序控制器，其中某些操作需要某个应用程序的 Id，而其他操作不需要 Id，因为它们不是特定于应用程序的（例如显示所有应用程序的页面）。

这些路线在大多数情况下运行良好，生成如下链接：

```
/application/index        <-- Overview of all applications
/application/1/overview   <-- Overview of specific application 
```

当我打开`/application/1/overview`并尝试将锚元素创建回索引操作时，就会出现问题。然后生成的链接结束`/application/1/index`，这不是所需的行为。

如果我错了，请纠正我，但我相信这里发生的是 T4MVC 识别出当前页面的路由中有一个可用的应用程序 ID 并使用该 ID，以便它可以利用该`DefaultWithId`路由，而不是of `Default`, 生成索引操作的 URL。

我当然可以强制一个合适的锚做这样的事情：

```
@Html.RouteLink(
     "All applications", 
     "Default", 
      new { controller = "Application", action = "Index"}) 
```

但这感觉就像我正在治愈症状而不是实际问题。我也失去了对所有锚点进行编译时检查的美感，所以我宁愿做其他事情。

**在视图中生成锚点时，有没有办法强制 T4MVC 忽略当前页面的参数？或者我可以以某种方式修改我的路线以避免这种行为吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:41:38.657

*“T4MVC 识别出当前页面的路由中有一个可用的应用程序 ID 并使用该 ID，因此它可以使用 DefaultWithId 路由而不是 Default 来生成指向 index-action 的 URL”*

T4MVC 没有这样的智能，而是这些智能内置在 MVC 路由系统中。但是许多 T4MVC 用户之前遇到过这种情况。各种参考：

*   [从当前上下文隐含的 T4MVC 可选参数值](https://stackoverflow.com/questions/11566207/t4mvc-optionalparameter-values-implied-from-current-context)
*   [https://t4mvc.codeplex.com/discussions/399824](https://t4mvc.codeplex.com/discussions/399824)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:04:29.027

为什么不将操作方法​​设置为 id 参数为空。像这样：

```
public virtual ActionResult xyz(int? id)
{
  return View();
} 
```

现在，当您需要传递时传递 id，否则离开它。希望它能解决你的问题。

# android - 将视图布局添加到新选项卡？

> ID：14307564
> 
> 赞同：0
> 
> 时间：2013-01-13T20:01:36.157
> 
> 标签：android, android-layout, android-tabhost, android-view

在我的应用程序中，我允许用户创建新选项卡。该选项卡创建良好，但我不知道如何将已创建的布局添加到该新选项卡。

我已经尝试过`setContent(R.layout.layout_browse)`，但这会导致强制关闭，向工厂添加视图并返回它也是如此。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:18:15.047

使用[LayoutInflater](http://developer.android.com/reference/android/view/LayoutInflater.html)

```
 View view = LayoutInflater.from(getBaseContext()).inflate(R.layout.yourxmllayout,
                    null);
            parent.addView(view ); 
```

# objective-c - 在 UIImage 上使用 UIActivityViewController 时，有没有办法指定图像格式？

> ID：14307567
> 
> 赞同：4
> 
> 时间：2013-01-13T20:01:50.140
> 
> 标签：objective-c, ios6, uiimage, uiactivityviewcontroller, uiactivity

操作系统似乎出于未知原因选择使用 PNG 或 JPEG。就我而言，我想要发送一个 JPEG（通过邮件、推特等），但我倾向于得到一个非常大的 PNG。

如果我将 UIActivityItemProvider 子类化并返回一个指向我通过使用 UIImageJPEGRepresentation 将 JPEG 写入磁盘而自己创建的文件的 NSURL，我当然可以获得 JPEG。然而，使用 NSURL 会导致其他问题（其中之一是无法使用 iMessage 作为目标）。有什么方法可以使用 UIImage，但指定您更喜欢某种文件格式？（我很确定答案是否定的，但想检查一下。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-26T11:17:11.523

实际上，它只是`NSData`将 JPEG 表示形式作为活动项传入。

```
NSData *data = UIImageJPEGRepresentation(image, 0.6);
UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:@[data]];
                                                                                 applicationActivities:nil]; 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-16T12:28:53.180

看起来答案确实是否定的。

# c# - 在文件中保存/同步更改的 XML 内容

> ID：14307568
> 
> 赞同：1
> 
> 时间：2013-01-13T20:02:02.927
> 
> 标签：c#, wpf, xaml

我正在使用以下代码在 a 中显示 XML 文件的内容，`ListBox`并在两个`TextBox`es 中显示所选内容。

```
<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="XML_View_Edit.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow"
    Width="500"
    Height="200">
    <Window.Resources>
        <XmlDataProvider x:Key="InventoryData"
                         XPath="Inventory/Books"
                         Source="Data.xml"/>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition
                Height="100" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <ListBox
            Grid.Row="0"
            Name="listBox1" >
            <ListBox.ItemsSource>
                <Binding Source="{StaticResource InventoryData}" XPath="Book"/>
            </ListBox.ItemsSource>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text = "{Binding XPath=Title}" />
                        <TextBlock Text= " - " />
                        <TextBlock Text = "{Binding XPath=Summary}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Grid
            Grid.Row="1"
             DataContext="{Binding ElementName=listBox1, Path=SelectedItem}">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition
                    Width="70" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Label
                Content="Title"
                Grid.Row="0"
                Grid.Column="0"
                Name="label_title" />
            <Label
                Content="Summary"
                Grid.Row="1"
                Grid.Column="0"
                Name="label_summary" />
            <TextBox
                Grid.Column="1"
                Name="textbox_title"
                Text = "{Binding XPath=Title}"
                Grid.Row="0" />
            <TextBox
                Grid.Column="1"
                Name="textbox_summary"
                Text = "{Binding XPath=Summary}"
                Grid.Row="1" />
        </Grid>
    </Grid>
</Window> 
```

用户可以更改`TextBox`es 中的文本，这也与`ListBox`. 但是如何保存/同步 XML 文件中的更改/与 XML 文件同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:27:34.333

在事件处理程序（buttonClick 或 windowClose）中，您可以访问资源：

```
var provider = Resources["inventoryData"] as XmlDataProvider; 
```

并且提供者有一个 Document 属性。我不确定你是否可以覆盖但类似：

```
provider.Document.Save(newFileName); 
```

或者

```
provider.Document.Save(provider.Source.ToString());  // existing file name 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:15:36.090

遵守[有关 XmlDataProvider 使用的专家建议](http://blogs.msdn.com/b/wpfsdk/archive/2007/06/29/expert-advice-on-xmldataprovider-usage.aspx)：

`Q: So two way binding utilizing the XmlDataProvider only works between the target and the "in memory" XML? Is there a way without doing my own XML file serialization to get WPF to write out the in memory XML back to the hard disk? A: Correct. You have to do your own file serialization.`

这和[这](https://stackoverflow.com/questions/11740659/twowaybinding-with-listview-and-xmldataprovider)[也](http://dotnet-experience.blogspot.ru/2011/11/wpf-working-with-xml-and.html)可以帮助你。

# php - 显示用户帐户年龄

> ID：14307571
> 
> 赞同：0
> 
> 时间：2013-01-13T20:02:13.177
> 
> 标签：php, datetime

我想显示我的用户注册年龄（他们注册了多长时间）。我使用这行代码在我的用户控制器中显示注册日期：

```
$D->date_register = pstrftime($this->lang('usr_info_birthdate_dtformat'), $u->reg_date); 
```

这在 HTML 中：

```
<?= $D->date_register ?> 
```

注册日期 (reg_date) 是数据库中的一个 int(10)（unix 时间戳）。我知道我必须从当前时间中减去 reg_date 才能获得帐户年龄，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:42:17.600

[此答案](https://stackoverflow.com/a/3923228/817496)中概述的方法可能是最好的。只需创建两个 DateTime 对象，一个用于 reg_date，一个用于当前时间，对它们进行比较，然后使用生成的对象。

# magento - Magento 不发送 HTTP 404，但在标头响应中发送 HTTP 500，但它不正确

> ID：14307572
> 
> 赞同：0
> 
> 时间：2013-01-13T20:02:13.980
> 
> 标签：magento, url-rewriting

我正在尝试为 SEO 优化 Magento。我已将它包含在 Google 网站管理员工具中，并且我注意到有很多页面被标记为 GWT 为服务器错误，也就是说，主要是 http 500 错误。

所以我做了一些调查，谷歌说的 URL 是 HTTP 500 错误，好吧，我认为它们不应该是。我之所以这么说是因为 Magento 正在调用“哎呀……”的 404.phtml 模板……但是 Google 是对的，发送的标头是 http 500。

我该如何调试呢？有任何想法吗？

非常感谢您的帮助！

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:55:43.570

尝试使用可以模拟 Googlebot 标头的浏览器（例如带有用户代理切换器的 Firefox）访问有问题的页面。这将确保网站的响应与 Google 看到的响应相同。此外，您将需要启用开发人员模式并启用错误报告，您可能希望根据您的 IP 有条件地执行此操作 - 这都可以在*index.php*中完成。

确保您正在查看服务器日志。

# ruby - `Hash#reject!` 和 `Hash#reject` 与 `Hash#delete_if` 有何不同？

> ID：14307573
> 
> 赞同：4
> 
> 时间：2013-01-13T20:02:15.440
> 
> 标签：ruby

`reject!`与Ruby中的 a有何`reject`不同？谁能用简单的代码片段解释它们之间的区别？`delete_if``Hash`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T20:58:10.260

由于其他答案是指`Array#delete_if`而不是`Hash#delete_if`，这似乎是您要问的，我想我应该澄清一下。

正如其他人指出的那样，`reject`不同`reject!`之处在于该`reject!`版本会就地修改哈希，同时`reject`创建一个新的哈希。同时`delete_if`几乎是一样*的*`reject!`。

事实上，对于一个`Array`，`reject!`和`delete_if`是*完全*一样的。

但是，对于 a `Hash`，它们略有不同。`reject!`如果没有进行更改，则返回`nil`，如果进行了更改，则返回哈希。`delete_if`总是返回哈希。

```
hash = {a: 1, b: 2, c: 3}

return_value = hash.delete_if {|k, v| v > 100}
# hash is unchanged, return_value is {a: 1, b: 2, c: 3}

return_value = hash.reject! {|k, v| v > 100}
# hash is unchanged, return_value is nil 
```

因此，如果您想检查删除元素后是否对哈希进行了更改，您可以使用`reject!`并检查返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T20:06:19.340

我想你可以从文档中读到这个：

[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject-21](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject-21)：

> 等效于 Array#delete_if，从 self 中删除块评估为 true 的元素，但如果没有进行任何更改，则返回 nil。每次调用块时数组都会立即更改，而不是在迭代结束后更改。另请参见 Enumerable#reject 和 Array#delete_if。如果没有给出块，则返回一个枚举器。

[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject)：

> 返回一个新数组，其中包含 self 中块不正确的项。另见 Array#delete_if 如果没有给出块，则返回一个枚举器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T20:09:37.060

如果您阅读文档，它会告诉您拒绝！是“等效于 Array#delete_if”

拒绝和拒绝！不同之处在于 bang (reject!) 会导致更改直接发生在您正在使用的数组上，而拒绝将使您正在使用的数组保持不变，但会返回一个新数组。

```
a = [ "a", "b", "c" ]
b = a.reject {|x| x >= "b" }   #=> a is untouched, but b is ["a"]
a.reject! {|x| x >= "b" }   #=> a is now modified and is ["a"] 
```

# arrays - 如何将数组“转换”为列表？

> ID：14307575
> 
> 赞同：-4
> 
> 时间：2013-01-13T20:02:35.127
> 
> 标签：arrays, perl

我需要`cartesian`使用[`List::Gen`](http://search.cpan.org/~asg/List-Gen-0.974/lib/List/Gen.pm). 这个函数需要 LIST 作为第二个参数，但我有一个数组，比如

```
$VAR1 = [
          [
            1,
            2,
            3
          ],
          [
            'a',
            'b',
            'c'
          ],
          [
            'x'
          ]
        ]; 
```

如何将这样的数组“转换”为列表，以便`cartesian`可以使用？在这种情况下，将数组放入列表上下文似乎不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T20:11:47.180

Parens 不会创建列表，它们只是更改优先级。

```
@a = ((1, 2, 3), (7, 8, 9)); 
```

是相同的

```
@a = (1, 2, 3, 7, 8, 9); 
```

`cartesian`显示对数组的引用列表的示例

```
cartesian { $_[0] . $_[1] } [1,2,3], [7,8,9]; 
```

因此，您似乎想要创建一个包含两个元素的数组，每个元素都是对另一个数组的引用。

```
@a = ( [1,2,3], [7,8,9] ); 
```

然后，为了回答您的问题，`@a`在列表上下文中进行评估将返回这两个引用。

```
cartesian { $_[0] . $_[1] } @a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:09:35.597

在你的新问题中，你有

```
$VAR1 = [
      [
        1,
        2,
        3
      ],
      [
        'a',
        'b',
        'c'
      ],
      [
        'x'
      ]
    ]; 
```

尽管您声称它不起作用，但您只需要在列表上下文中评估数组即可。

```
cartesian { ... } @$VAR1; 
```

例如，

```
( cartesian { join '|', @_ } @$VAR1 )->say; 
```

给

```
1|a|x 1|b|x 1|c|x 2|a|x 2|b|x 2|c|x 3|a|x 3|b|x 3|c|x 
```

# ruby-on-rails - 在同一控制器中的方法之间传递实例变量在 Rails 中不起作用

> ID：14307580
> 
> 赞同：1
> 
> 时间：2013-01-13T20:02:54.427
> 
> 标签：ruby-on-rails, ruby

我有一个我正在尝试处理的多阶段表格。后期阶段之一需要使用前一阶段的数据集。我曾认为通过在实例变量中设置我需要的数据，例如

```
@gateway = importer.get_gateway 
```

然后我可以在同一个控制器类的不同控制器方法中访问它，例如

```
Rails.logger.info "populate_devices : gateway is #{@gateway}" 
```

但是，在日志`@gateway`中是`nil`表单提交的下一步。它应该工作吗，或者这不是将数据从一个控制器方法传递到同一控制器类中的另一个方法的正确方法？ `@gateway`在上一步中肯定被设置为不在`nil`，因为我在 UI 上显示了它的一些字段并记录了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T20:27:45.150

我认为您应该将其存储在会话中，因为 Rails 是一种无状态技术。大小有限制，但前提是您选择使用 cookie 会话存储（最多 4k）。

如果您决定使用 ActiveRecord 会话存储或 memcached 存储，则没有限制。它们易于实施且速度快。

# python - 安装新版 Google App Engine SDK 后 Django-nonrel 崩溃

> ID：14307581
> 
> 赞同：0
> 
> 时间：2013-01-13T20:03:07.810
> 
> 标签：python, google-app-engine, django-nonrel

我在本地 UBUNTU 系统中安装了 GAE 1.4，一切正常。我当时得到的唯一警告是“您使用的是旧的 GAE SDK 1.4”。因此，为了摆脱这种情况，我做了以下事情：

1.  我删除了旧版本的 GAE 并安装了 GAE 1.7。除此之外，我还用最新版本更改了我的 djangoappengine 文件夹。
2.  我已将新版本的 GAE 复制到 /usr/local 目录，因为我的 ~/bashrc 文件 PATH 变量指向 GAE 到此目录。

现在，我收到错误

`django.core.exceptions.ImproperlyConfigured: 'djangoappengine.db' isn't an available database backend. Try using django.db.backends.XXX, where XXX is one of: 'dummy', 'mysql', 'oracle', 'postgresql', 'postgresql_psycopg2', 'sqlite3' Error was: No module named utils`

我认为目录结构没有任何问题，因为之前它运行良好。

有人知道吗？

您的帮助将不胜感激。

-苏尼尔

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:34:35.237

您是否在没有更新 django-nonrel 和 djangotoolbox 的情况下更新了 djangoappengine？

虽然我还没有升级到 GAE 1.7.4，但我运行 1.7.2 没有任何问题。我怀疑您的问题与 GAE SDK 无关，而是您的 django-nonrel 安装有不匹配的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:40:02.817

实际上我更改了 /.bashrc 文件中的谷歌应用程序引擎路径并重新启动了系统。它解决了这个问题。我认为由于在 .bashrc 更改后我没有重新启动系统，因此它产生了问题。

# java - 如何在运行时将项目插入 jcombobox 并保存

> ID：14307582
> 
> 赞同：3
> 
> 时间：2013-01-13T20:03:19.227
> 
> 标签：java, swing, actionlistener, jcombobox, comboboxmodel

我需要在运行时将值保存在我的 jcombobox 中。我想要做的是点击一个按钮后，我将它设置为可编辑=真。然后在组合框中键入值，但它不保存。

```
private void btadbknameActionPerformed(java.awt.event.ActionEvent evt) {
  if(evt.getSource()== btadbkname){
    cb_bkname.setEditable(true);
    cb_bkname.getText();
    cb_bkname.addItem(evt);
  }else{
    cb_bkname.setEditable(false);
  }
} 
```

我已经在设计层面上添加了一些元素，但是如果出现一些随机值，它就会受到限制，那么它就是一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:11:33.160

*   因为可以`add`/ `remove Item`(s) to / from the `DefaultComboBoxModel`underlaying `JComboBox`，所以（默认情况下）可以从外部执行相同的操作。

*   您必须使用[`MutableComboBoxMode`](http://docs.oracle.com/javase/7/docs/api/javax/swing/MutableComboBoxModel.html)to `add`/ `remove Item`(s) to / from`JComboBox`触发事件本身（view_to_model）。

*   [这里](https://stackoverflow.com/a/12508002/714968)和[这里](https://stackoverflow.com/a/10203745/714968)`MutableComboBoxModel`有很好的例子。`@Robin`

*   [为了获得更好的帮助，请尽快发布 SSCCE](http://sscce.org/)，供未来的读者使用，否则请搜索`extends AbstractListModel implements MutableComboBoxModel`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T21:53:43.833

它不可能按照您尝试的方式工作。

在单击按钮之前，组合框必须是可编辑的，那么您只需要这一行

```
cb_bkname.addItem(((JTextField)cb_bkname.getEditor().getEditorComponent()).getText()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T22:25:46.503

尝试这个

```
private void btadbknameActionPerformed(java.awt.event.ActionEvent evt) {
      if(evt.getSource()== btadbkname){
        cb_bkname.setEditable(true);
        String newItem=cb_bkname.getText();
        cb_bkname.addItem(newItem);
      }else{
        cb_bkname.setEditable(false);
      }
    } 
```

# html - 跨越单行的锚点

> ID：14307588
> 
> 赞同：0
> 
> 时间：2013-01-13T20:04:03.097
> 
> 标签：html, css

我试图将所有三个跨度都放在一个锚点内，内联。不确定代码中缺少什么：

```
a.facebook-button {
  float: none;
  display: inline-block;
  margin-bottom: 5px;
  left: auto;
  text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.6);
}

.fb-button-left {
  width: 40px;
}

.fb-button-right,
.fb-button-center,
.fb-button-left {
  float: left;
  height: 40px;
  background: url(../img/fb-button.png) left top no-repeat;
}

.fb-button-right {
  width: 6px;
  background-position: 100% -80px;
}

.fb-button-center {
  padding: 0 5px 0 8px;
  line-height: 40px;
  font-size: 16px;
  color: #FFFFFF;
  background-color: #6385ba;
  background-position: left -40px;
  background-repeat: repeat-x;
}

div.socialInvites {
  padding: 20px 20px 0px 20px;
  text-align: center;
  left: auto;
}
```

```
<div class="socialInvites">
  <a href="main/facebook_request" class="facebook-button" id="facebookbutton">
    <span class="fb-button-left"></span>
    <span class="fb-button-center"><strong>Connect</strong> with <strong>Facebook</strong></span>
    <span class="fb-button-right"></span>
  </a>
</div>
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-08-22T15:43:33.280

请尝试添加以下内容：

`display:inline;`

例子：

```
.fb-button-right {
    width: 6px;
    background-position: 100% -80px;
    display:inline;
} 
```

此外，对于`fb-button-center`.

# html - html5地理定位方法来检测坐标是否在区域圈内？

> ID：14307590
> 
> 赞同：1
> 
> 时间：2013-01-13T20:04:11.133
> 
> 标签：html, geolocation, gps

我知道方法 watchPosition() 并检查当前位置和设置到达位置之间的距离是否小于 10 米，这样你就可以弹出一条消息，比如你到家了！

但是……好奇……

是否有可能，是否存在函数，使用选项 r=10 米围绕到达点设置一个圆圈，并让检测当前位置（watchPosition（））是否在其中？

我之所以问，是因为我多次编写了一个包含多行的脚本，后来发现一个包含一两行的函数也有同样的作用......

# codeigniter - 匹配功能不运行

> ID：14307591
> 
> 赞同：0
> 
> 时间：2013-01-13T20:04:10.977
> 
> 标签：codeigniter

我不知道为什么匹配功能不运行。我希望用户介绍一个密码并确认它再次介绍它。问题是，当我使用匹配函数来比较两个密码时，Codeigniter 在引入两个相等后表明密码不相等。

这是代码：

```
public function validacion_registro() 
{
    $this->input->post('correo');
    $this->input->post('usuario');
    $this->input->post('contrasenya');

    $this->form_validation->set_rules('correo','Direcci&oacute;n de correo','trim|required|valid_email|xss_clean');
    $this->form_validation->set_rules('usuario','Nombre de usuario','trim|required|min_length[5]|xss_clean');
    $this->form_validation->set_rules('contrasenya','Contrase&ntilde;a','trim|required|md5|xss_clean|matches[repcontrasenya]');
    $this->form_validation->set_rules('repcontrasenya','Confirmaci&oacute;n de contrase&ntilde;a','trim|required|md5|xss_clean');
    $this->form_validation->set_rules('privacidad','Pol&iacute;tica de privacidad','trim|required|md5|xss_clean');

    if ($this->form_validation->run())
     {
        redirect('anuncios/test');
        echo ("validaci&oacute;n v&aacute;lida");
     }
    else {
            $this->load->view('anuncios/login');
         }  
} 
```

错误在于 contrasenya 和 repcontrasenya 之间的比较。当两者相等时，Codigniter 表示不同。

怎么了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:41:28.530

命令： $this->form_validation->run() 如果没有错误，则返回 true。

修改代码：

```
if ($this->form_validation->run() == FALSE)
{
    redirect('anuncios/test');
    echo ("validaci&oacute;n v&aacute;lida");
}
else 
{
    $this->load->view('anuncios/login');
} 
```

# php - PHP API 使用 node.js (Geddy) 与之交互

> ID：14307592
> 
> 赞同：0
> 
> 时间：2013-01-13T20:04:12.207
> 
> 标签：php, javascript, api, node.js, geddy

我从我的第一个 node.js 应用程序开始，我希望它与我编写的 API 交互，例如，如何使用我的 API 从我的数据库中获取所有帖子，我有一个 get 方法我的 API 可以使用`/posts`或调用`posts/id`。

我将如何使用 node.js 尤其是 Geddy 请求数据？

# html - 全局阻止 Firefox 中的文本选择

> ID：14307593
> 
> 赞同：8
> 
> 时间：2013-01-13T20:04:17.670
> 
> 标签：html, css

我目前正在使用：

```
*{
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

转到[http://jsfiddle.net/KyF5x/](http://jsfiddle.net/KyF5x/)并单击列表下方，看到这突出显示了文本...无法取消突出显示。重新加载页面，现在尝试 ctrl+a，看看这也会突出显示文本。

在 Chrome、Safari 或 IE 10 中不会出现上述情况。

免责声明：我使用的是 Firefox 18

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T20:28:22.143

作为临时答案，解决方法是将 CSS 应用于单个“不可选择”元素。但是我很想看到有人提出一个文档范围的修复。

```
li{
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

见：http: [//jsfiddle.net/KyF5x/1/](http://jsfiddle.net/KyF5x/1/)

在 Web 应用程序领域，而不是典型的网站中，具有文档范围内不可选择的文本的用例更为明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-05T06:13:37.637

作为对 Jack 回答的补充——即使在 2018 年，firefox 也不支持 user-select，但确实支持 moz-user-select。我选择了已接受答案中小提琴的精简版本：

```
/* stop the user selecting page structure with the mouse */
html, body, div, a, i, button, select, option, optgroup, hr, br {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  cursor: default;
} 
```

这是针对我们不使用任何其他元素的 Web 应用程序，所有页面结构都是 div，甚至是标题等，并且我们不想禁止在输入或文本区域中进行选择。

这是我们整个网络 500k 行代码应用程序中唯一必须使用 -moz- 的地方！

# mysql - 为什么 mysql (not in) 比没有子查询快？

> ID：14307598
> 
> 赞同：0
> 
> 时间：2013-01-13T20:05:10.507
> 
> 标签：mysql

我可以编写具有两种不同类型的查询：

```
SELECT * 
FROM `pictures` 
WHERE `field_id` NOT IN (SELECT `field_id` 
                         FROM `table` 
                         WHERE `confirm` = 0) 
```

和

```
SELECT * 
FROM `pictures` 
WHERE `field_id` NOT IN (12,56,435,44,25,52,876,99) 
```

但是第二个例子非常快！
速度更快的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:16:48.867

这是一个良好的性能经验法则：做更少的工作需要更少的时间。

在更简单的示例中，MySQL 引擎只执行 1 个查询：

```
-- Execute the main query (takes time M)
SELECT * 
FROM `pictures` 
WHERE `field_id` NOT IN (12,56,435,44,25,52,876,99) 
```

在更复杂的示例中，MySQL 引擎执行 2 个查询：

```
-- Execute the subquery (takes time S)
SELECT `field_id` FROM `table` WHERE `confirm` = 0;
-- => (12,56,435,44,25,52,876,99)

-- Plug the subquery results into the main query (takes time M)
SELECT * 
FROM `pictures` 
WHERE `field_id` NOT IN (12,56,435,44,25,52,876,99); 
```

更简单的示例`M`总共需要大约时间，而更复杂的示例需要大约 time `S + M`，加上插入所有内容的开销可能更多，并且`S + M`大于`M`.

# ruby-on-rails - Rails 中不同类型的验证

> ID：14307601
> 
> 赞同：0
> 
> 时间：2013-01-13T20:05:20.117
> 
> 标签：ruby-on-rails, validation

我有一个用户模型

有区别吗

```
class User < ActiveRecord::Base
  validates :name, :presence => true
end 
```

和

```
class User < ActiveRecord::Base
  def validate
    errors.add_to_base "name should not be nil" if name.nil?
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:12:10.387

`validates`宏更灵活，因为它还允许您执行以下操作：

```
validates :name, :format => { :with => /\A[a-zA-Z]+\z/,
:message => "Only letters allowed" }, :length => { :in => 6..20 } 
```

当现有验证不存在时，该`validate`方法确实是一种快速简便的自定义验证方法。（当自定义验证变得过于复杂时，您通常应该将它们移动到自定义验证器中并使用`validates`宏）。

[在http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)上查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:08:52.303

是的——第一个将无法保存空字符串，而第二个将允许它。

# html5-video - HTML5 视频文件大小

> ID：14307602
> 
> 赞同：3
> 
> 时间：2013-01-13T20:05:51.630
> 
> 标签：html5-video

我想知道什么大小的文件最适合与 HTML5 视频标签一起使用。我正在为一个朋友建立一个网站，他们给了我一个 80mb 的文件。这个文件太大了吗？什么是合适的尺寸？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T20:17:03.170

对于流媒体电影，建议使用 2.5 Mbit/s 或更高的宽带速度，例如 Apple TV、Google TV 或 Sony TV 蓝光光盘播放器，对于高清内容，建议使用 10 Mbit/s。

以 300 kbit/s 编码的一小时视频（这是截至 2005 年的典型宽带视频，通常以 320 × 240 像素窗口大小编码）将为：（3,600 s × 300,000 bit/s）/（8× 1024×1024）需要大约 128 MB 的存储空间。

希望这可以帮助。:)

我不认为这`80 MB`太大了。请注意，这完全取决于您的互联网速度（平均 2.5 Mbit/s）。像我的一样是 3 Mbit/s，所以如果大多数网络流媒体视频播放得很好。

这取决于您的视频是否为高清。文件的大小并不总是很重要，因为它在视频播放时会缓冲。主要看视频的大小。如上所述，在视频的 SD 中，它适用于大多数互联网连接（平均为 2.5 Mbit/s，有些人像我一样有 3 Mbit/s），而更多高清视频将需要更快的连接，一些更像是 10 Mbit/s（是的，很多！）。请注意，像谷歌新产品谷歌光纤中的光纤这样的新兴技术将允许更高清晰度的视频以很大的流动性播放。（Google Fiber 的连接速度大约是 800 Mbit/s，我相信！如果我错了，请纠正我）

告诉我这是否有帮助。:)

如果有，请单击我的答案旁边的灰色复选标记。:)

# matlab - Matlab中的符号积分

> ID：14307609
> 
> 赞同：3
> 
> 时间：2013-01-13T20:06:37.763
> 
> 标签：matlab, integration, symbolic-computation

我只是想在 matlab 中求解一个方程，但它确实给了我一个警告。 **“无法找到警告显式积分”** 经过一些搜索，人们建议用 Double() 方法包装我的方程，但即使这样，我还是收到了错误的答案（ans=0），我在mathematica/maple 上计算为 4.62240566。

![这是我的方程式](../Images/12f0427b33644e09602b7f1498c7bfbd.png)

我认为它与浮点有关，但我不确定如何修复它

```
syms t
int( (t^2+100)^(-1/2)*exp(-10^-3*(t^2 + 100)^(1/2)),t , 1, Inf) 
   Warning: Explicit integral could not be found. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T21:12:35.290

从这个[http://www.mathworks.nl/help/symbolic/int.html](http://www.mathworks.nl/help/symbolic/int.html)来看，您需要的代码是：

```
int(1/(exp(1000*(t^2 + 100)^(1/2))*(t^2 + 100)^(1/2)), t , 1,Inf) 
```

或者你可以使用

```
t == 1..inf 
```

并在示例中用 like 包装它`vpa`，而不是用`double`.

# javascript - 带有 jQ uery UI 小部件的 Typescript - 实现调用签名

> ID：14307610
> 
> 赞同：5
> 
> 时间：2013-01-13T20:06:39.190
> 
> 标签：javascript, jquery-ui, typescript

我的网站上有很多对话框（登录对话框、注册对话框、联系人对话框等），我正在尝试使用 Typescript 进行建模。

jquery-ui d.ts 文件定义了一个对话框接口，如下所示：

```
interface Dialog extends Widget, DialogOptions, DialogEvents{  } 
```

`DialogOptions`和中的所有`DialogEvents`内容都是可选的，因此那里没有问题，但是 Widget 接口定义了一些我不理解的调用签名：

```
interface Widget {
    (methodName: string): JQuery;
    (options: WidgetOptions): JQuery;
    (options: AccordionOptions): JQuery;
    (optionLiteral: string, optionName: string): any;
    (optionLiteral: string, options: WidgetOptions): any;
    (optionLiteral: string, optionName: string, optionValue: any): JQuery;

    (name: string, prototype: any): JQuery;
    (name: string, base: Function, prototype: any): JQuery;
} 
```

当我尝试在一个类中实现这个接口时：

```
class LoginDialog implements Dialog { 

} 
```

编译器抱怨：

```
Class 'LoginDialog' declares interface 'Dialog' but does not implement it: Type 'Dialog' requires a call signature, but Type 'LoginDialog' lacks one. 
```

我不明白如何实现这些“调用签名”或者他们应该做什么，事实上，我什至不明白调用签名是什么。

编辑：

我发现调用签名的一种有效用例是回叫输入：

```
interface ICallback{
    (param: string) : void;
}

function someMethod(callback: ICallback){
    callback('a string'); //Good
    callback(5);         //Bad 
} 
```

但是，问题仍然存在，因为我找不到多个调用签名的用例，并且仍然不明白如何实现 jquery-ui.d.ts 对话框接口

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:37:32.447

如果您使用的是 jQuery UI，则不需要实现这些接口中的任何一个，因为它们已经在 jQuery UI 中实现了。这些接口只是为您提供类型信息，以使用静态类型调用现有的 jQuery UI 函数。

```
$( "#dialog" ).dialog(); 
```

例如，没有`jquery-ui.d.ts`类型系统就不会知道`dialog()`函数。

# android-ndk - 使用 arm-linux-androideabi-gcc 编译对象的问题

> ID：14307611
> 
> 赞同：10
> 
> 时间：2013-01-13T20:06:41.863
> 
> 标签：android-ndk

背景

*   OSX 是操作系统
*   R8 NDK

我正在尝试使用 Android GCC 编译器编译以下类...

```
#include <stdint.h>
int main (void){
   return 0;
} 
```

我使用以下命令执行...

```
un@un:~/Development/Code/OpenGL$ ~/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc hello.c -o hello 
```

我得到...

```
In file included from hello.c:1:0:
/Users/un/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/include/stdint.h:3:26: fatal error: stdint.h: No such file or directory
compilation terminated. 
```

因此，由于缺乏 gcc 知识（但有一些谷歌能力），我找到了这个并尝试了一下......

```
un@un:~/Development/Code/OpenGL$ ~/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc hello.c -o hello -ffreestanding 
```

我得到...

```
/Users/un/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot open crtbegin_dynamic.o: No such file or directory
/Users/un/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot open crtend_android.o: No such file or directory
/Users/un/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot find -lc
/Users/un/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot find -ldl
collect2: ld returned 1 exit status 
```

有人可以帮我解决我做错的事情吗？我错过了链接还是什么？Android.mk 不是一个选项。

更新这也不起作用...

```
arm-linux-androideabi-gcc hello.c --sysroot=~/Development/Android/android-ndk-r8c/platforms/android-9/arch-arm
/Users/jackiegleason/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot open crtbegin_dynamic.o: No such file or directory
/Users/jackiegleason/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot open crtend_android.o: No such file or directory
/Users/jackiegleason/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot find -lc
/Users/jackiegleason/Development/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot find -ldl
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T22:12:10.857

您必须告诉 GCC 在哪里可以找到 Android 系统文件和标头。要么使用：

1.  `ndk-build`和`Android.mk`一个`BUILD_EXECUTABLE`
2.  或者，`--sysroot`GCC 选项

[1]

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := foo
LOCAL_SRC_FILES := foo.c

include $(BUILD_EXECUTABLE) 
```

[2]

```
# Change `android-9` with the level you target
/path/to/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt\
/darwin-x86/bin/arm-linux-androideabi-gcc\
 --sysroot /path/to/android-ndk-r8c/platforms/android-9/arch-arm/\
  foo.c -o foo

# Or generate a ready-to-use standalone toolchain (better)
/path/to/android-ndk-r8c/build/tools/make-standalone-toolchain.sh \
--platform=android-9 \
--install-dir=/tmp/my-android-toolchain

export SYSROOT=/tmp/my-android-toolchain/sysroot

/path/to/arm-linux-androideabi-gcc --sysroot $SYSROOT foo.c -o foo 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T22:31:41.820

所以，由于我不想使用 Android.mk 文件，我继续创建了一个独立的工具链。这是使用以下方法完成的...

```
/Users/un/Downloads/android-ndk-r8d/build/tools/make-standalone-toolchain.sh --platform=android-9 --install-dir=/tmp/my-toolchain
/tmp/my-toolchain/bin/arm-linux-androideabi-gcc hello.c 
```

我想知道我可以做的 gcc 链接的“替代方案”是什么。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-21T17:50:14.977

这个答案为@deltheil 的答案添加了更多细节。我在尝试编译[I2C 工具](http://dl.lm-sensors.org/i2c-tools)以在 Android 上调试 I2C 总线时遇到了类似的问题。不知何故，在使用 make 文件和尝试不同的选项（包括 --sysroot 和 --dynamic-linker 选项等）挣扎了一天多之后，我终于尝试在 Android AOSP 树中编译它。我使用 Google Nexus-S AOSP 构建了一个我打算在三星 S3 手机上运行的二进制文件。我为 AOSP/external 文件夹中的源创建了一个名为 i2c-tools 的文件夹，并从另一个可执行文件夹 (ping) 复制了 Android.mk、Cleanspec.mk 和 MODULE_LICENCE 并为 i2c-tools 修改了它，如下所示：

```
ifneq ($(TARGET_SIMULATOR), true)

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_SRC_FILES := i2cdetect.c i2cbusses.c

LOCAL_C_INCLUDES := $(KERNEL_HEADERS)
LOCAL_MODULE := i2cdetect
LOCAL_MODULE_TAGS := tests
LOCAL_SHARED_LIBRARIES := libc

include $(BUILD_EXECUTABLE)

endif 
```

然后我就跑了：

```
source build/envsetup.sh
make i2cdetect 
```

从 AOSP 基本文件夹中，瞧，我在 out/target/product/generic/system/bin/ 文件夹中有一个工作可执行文件。请注意，我必须从原始 (i2c-tools)/tools & include 文件夹中复制所有需要的源文件和头文件，并且必须修改一些 #include 以删除现在位于同一位置的头文件的额外路径c源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-20T11:04:36.840

我解决了这个问题，ubuntu 中的默认压缩文件管理器没有提取符号链接，所以我尝试： tar jxf filename.tar.bz2 解压 ndk.tar.bz2 现在它工作正常

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T12:52:05.370

就我而言，我需要一个*.o*文件并且不需要定义*main()*。我必须指定`-c`开关：

```
~/ax/arm-linux-androideabi-g++ --sysroot=~/an/platforms/android-8/arch-arm/ -c dummy.c 
```

其中*~/ax*和*~/an*是链接：

```
ax -> ~/android-ndk-r9d/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/bin/
an -> ~/android-ndk-r9d/ 
```

做了*dummy.o*。

# html - HTML5 布局问题

> ID：14307620
> 
> 赞同：2
> 
> 时间：2013-01-13T20:07:57.377
> 
> 标签：html, css

我已经在布局上工作了一段时间。我决定在 jsFiddle 中创建一个示例。

[http://jsfiddle.net/PSYgU/1/](http://jsfiddle.net/PSYgU/1/)

我遇到的问题是 ASIDE 没有扩展到其父“包装器”的完整高度，仅扩展到视口的高度。ASIDE，也需要能够向右或向左移动。

我对创建此布局的其他方法持开放态度，无需表格。

```
/* PHP option to control the width of all content by wrapper via style */
/* PHP option to control which side to float the sidebar to via style */
<div id="wrapper" style="width:100%;">
    <aside style="float: right;">This Sidebar</aside>
    <header>The Header</header>
    <section>The Main Content Area</section>
    <footer>The Footer</footer>
</div>

html, body {
  min-height: 100%;
  height: 100%;
}
#wrapper {
  margin: 0;
  padding: 0;
  background: brown;
  height: 100%;
}
aside {
  width: 200px;
  background: yellow;
  height: 100%;
}
header {
  height: 150px;
  background: blue;
  width: 100%;
}
section {
  background: red;
  width: 100%;
  height: 100%;
}
footer {
  height: 50px;
  background: green;
  width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:18:00.330

因为您的部分也在 100% 的高度上，并且也位于包装器内，所以它会像侧边栏一样占据包装器的完整高度。

示例：当 body/html 和 wrapper 的高度为 200px 时，元素 wrapper 中任何高度为 100% 的东西的高度将为 200px 如果您在 wrapper 中添加高度为 150px 的标题，则需要将其添加到之前的 200 .

这将导致侧边栏的高度永远不会到达包装器的底部，因为它缺少标题的高度。

解决此问题的方法是使标题和部分一起 100% 高度，如标题 15% 和部分 85%。

这将意味着它们都可以缩放，但侧边栏将始终保持相同的高度。

```
<div id="wrapper">
    <aside style="float: right;">This Sidebar</aside>
    <header>The Header</header>
    <section>The Main Content Area</section>
</div>
<footer>The Footer</footer> 
```

```
    html，正文 {
      最小高度：100%；
      高度：100%；
    }
    #包装器{
      边距：0；
      填充：0；
      背景：棕色；
      高度：100%；
      宽度：100%
    }
    在旁边 {
      宽度：200px；
      背景：黄色；
      高度：100%；
    }
    标题{
      高度：15%；
      背景：蓝色；
      宽度：100%；
    }
    部分 {
      背景：红色；
      宽度：100%；
      高度：85%；
    }
    页脚 {
      高度：50px；
      背景：绿色；
      宽度：100%；
    }

```

# django - 尝试在 Django 模板中访问 ModelForm 字段 modelChoice 选项

> ID：14307622
> 
> 赞同：2
> 
> 时间：2013-01-13T20:08:02.053
> 
> 标签：django, django-forms, django-templates

我正在生成 ModelForms 并希望对它们在我的模板中的输出方式进行一些精细控制。具体来说，我需要在每个选择列表中的每个单选按钮的末尾添加一些标记。

代码：

```
# order-form.html

{% load catname %}
<form id = "order-form">
{% for form in forms %}
<div id="gun-{{ forloop.counter }}">
    {% for field in form.fields %}
        <div id="{{ field }}-item" class="item">
            <h3>{{ field|catname }}</h3>
            {% for choice in form.field.choices %} {# <-- Help me out here #}
                {{ choice.id }}
                {{ choice.title }}
            {% endfor %}
        </div>
    {% endfor %}
{% endfor %}
<button type="submit" id="standard-gun-form-submit">Continue to next step</button>
</form>

# views.py
def get_form(request):
    if request.method == 'POST':
        if request.POST['gun_type'] == 'standard':
            forms = [StandardGunForm(prefix=p) for p in range(0,2)]
            return render_to_response('main/order-form.html', {'forms' : forms,}, RequestContext(request))

# forms.py

class StandardGunForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(StandardGunForm, self).__init__(*args, **kwargs)  
        for field in self.fields: 
            if isinstance(self.fields[field], ModelChoiceField):
                self.fields[field].empty_label = None

    class Meta:
        model = BaseGun
        widgets = {
            'FrameTuning' : RadioSelect(),
            'FrameConnection' : RadioSelect(),
        }
        exclude = ('price') 
```

Endgame：看起来像这样的标记

```
<form id="foo">
<div class="category">
    <div class="item">
        <input type="radio" name="srsbzns" value="1">Option 1</input>
        <img src="http://placekitten.com/150/150">
        <p>Other foo here</p>
    </div>
    <div class="item">
        <input type="radio" name="srsbzns" value="2">Option 2</input>
        <img src="http://placekitten.com/150/150">
        <p>Other foo here</p>
    </div>
    <div class="item">
        <input type="radio" name="srsbzns" value="3">Option 3</input>
        <img src="http://placekitten.com/150/150">
        <p>Other foo here</p>
    </div>  
</div>
</form> 
```

从外壳，这返回我想要的

```
>>> forms = [StandardGunForm(prefix=p) for p in range(0,2)]\
>>> forms[0].fields['frame_tuning'].choices.queryset 
```

我很惊讶这证明如此具有挑战性！

奖励：我启用了 DEBUG = True 和 Django Debug 工具栏。是否可以将变量转储到浏览器，这样我可以在深入研究时看到这些东西的样子？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T21:27:19.760

我不得不做类似的事情，并开始走这条路。我想从 ModelChoiceField 创建表行，其中每列都有模型实例的不同字段（然后我允许通过 JavaScript 过滤表行）。

我在 Django 文档中找不到它，但快速阅读 Django 源代码就可以找到方法。您可以访问查询集以访问模型实例，如下所示：

```
<form action="{% url 'some_view' %}" method="post">
    {% csrf_token %}
    {% if form.non_field_errors %}
        {{ form.non_field_errors }}
    {% endif %}

    {% for field in form %}
        {{ field.label }}

        {% if field.field.choices %}
          {% for model_instance in field.field.choices.queryset %}
            {{ model_instance.id }}
          {% endfor %}
        {% else %}
          {{ field }}
        {% endif %}

        {% if field.errors %}
            {{ field.errors|striptags }}
        {% endif %}

    {% endfor %}

    <button type="submit">Submit</button>
</form> 
```

然而，此时我们已经分解了闪亮的小部件（在我的例子中是 CheckboxSelectMultiple），并且必须使用模板代码重新组装 HTML 表单输入。我发现没有直接的方法可以同时迭代 ModelChoiceField 来访问模型实例字段并获取选项的 HTML 表单标签。

也许有办法，但我放弃了尝试并构建了自己的 HTML 表单，在视图中处理所有 POST 数据。这样就容易多了。ModelForms 真的很好也很方便，但是将它们用于它们不是为它们构建的东西最终会变得更加困难。

我想我会发布这个，以防有人出于其他原因试图这样做。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-22T16:02:03.470

很晚了，但我现在正在阅读，这对我有用

```
{% for field in form %}
  {% for x, y in field.field.choices %}
    {{x}}
    {{y}}
  {% endfor %}
{% endfor %}
```

其中“x”是 id 或代码，“y”是可读值或标题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-25T15:08:49.410

您可以访问每个选项的底层模型实例：

```
{% for choice, label in form.field_name.field.choices %}
    {{ choice.value }}
    {{ choice.instance }} 
    {{ choice.instance.instance_attribute }}
    {{ label }}
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T22:45:59.797

```
{% for choice in form.field.choices %} {# <-- Help me out here #}
            {{ choice.id }}
            {{ choice.title }}
{% endfor %} 
```

看看你在这里做什么，你实际上是在每次在这个循环中尝试访问一个名为“field”的字段，这可能不存在。

您需要获取您正在迭代的字段对象，并访问其上的选择属性。

```
{% for field in form.fields %}
   {% for choice in field.choices %} 
```

# c - 如何在 MacOS X 下使用 GCC 中的内联汇编器调用 write syscall？

> ID：14307623
> 
> 赞同：3
> 
> 时间：2013-01-13T20:08:07.463
> 
> 标签：c, gcc, assembly, system-calls, inline-assembly

系统`write`调用具有以下功能原型：

```
size_t write(int, const void *buf, size_t nbytes); 
```

如何`write`在 MacOS X 下使用 GCC 中的内联汇编程序调用系统调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T20:16:19.903

此类问题的通用解决方案：编写一个简短的测试程序，执行您感兴趣的 write() 调用，然后用于`gcc -S`生成汇编或用于`otool`反汇编二进制文件；找出 write() 调用是如何组装的，并将其转换为适当的内联程序集。

（编辑）要查看实际的系统调用，请按照汇编代码中的库调用。在 的示例中`write()`，遵循间接指令将引导您通过`libSystem.B.dylib`in `_write`，`libsystem_kernel.dylib`您可以使用 反汇编`otool`。

（edit2）下面的完整示例，使用此测试程序`test.c`：

```
#include <stdio.h>
int main(void)
{
    char buf[] = "test\n";
    ssize_t n;
    n = write(2, buf, sizeof(buf));
    return n;
} 
```

编译测试，`-O1 -fverbose-asm`得到简洁易读的机器码：

```
% gcc -O1 -fverbose-asm -o test test.c
% ./test
test 
```

用于在二进制文件`otool`中反汇编：`main()``test`

```
% otool -p _main -tvV test
test:
(__TEXT,__text) section
_main:
0000000100000ef0    pushq   %rbp
0000000100000ef1    movq    %rsp,%rbp
0000000100000ef4    subq    $0x10,%rsp
0000000100000ef8    leaq    0xfa(%rbp),%rsi
0000000100000efc    movb    $0x74,0xfa(%rbp)
0000000100000f00    movb    $0x65,0xfb(%rbp)
0000000100000f04    movb    $0x73,0xfc(%rbp)
0000000100000f08    movb    $0x74,0xfd(%rbp)
0000000100000f0c    movb    $0x0a,0xfe(%rbp)
0000000100000f10    movb    $0x00,0xff(%rbp)
0000000100000f14    movl    $0x00000002,%edi
0000000100000f19    movl    $0x00000006,%edx
0000000100000f1e    xorb    %al,%al
0000000100000f20    callq   0x100000f32 ; symbol stub for: _write
0000000100000f25    addq    $0x10,%rsp
0000000100000f29    popq    %rbp
0000000100000f2a    ret 
```

列出库`test`动态链接到 find `_write`：

```
% otool -L test
test:
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

尝试`_write`定位`libSystem.B.dylib`：

```
% otool -p _write -tvV /usr/lib/libSystem.B.dylib
/usr/lib/libSystem.B.dylib:
(__TEXT,__text) section
Can't find -p symbol: _write 
```

检查以下依赖项`libSystem.B.dylib`：

```
% otool -L /usr/lib/libSystem.B.dylib
/usr/lib/libSystem.B.dylib:
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
    /usr/lib/system/libcache.dylib (compatibility version 1.0.0, current version 47.0.0)
    /usr/lib/system/libcommonCrypto.dylib (compatibility version 1.0.0, current version 55010.0.0)
    /usr/lib/system/libcompiler_rt.dylib (compatibility version 1.0.0, current version 6.0.0)
    /usr/lib/system/libcopyfile.dylib (compatibility version 1.0.0, current version 85.1.0)
    /usr/lib/system/libdispatch.dylib (compatibility version 1.0.0, current version 187.9.0)
    /usr/lib/system/libdnsinfo.dylib (compatibility version 1.0.0, current version 395.11.0)
    /usr/lib/system/libdyld.dylib (compatibility version 1.0.0, current version 195.6.0)
    /usr/lib/system/libkeymgr.dylib (compatibility version 1.0.0, current version 23.0.0)
    /usr/lib/system/liblaunch.dylib (compatibility version 1.0.0, current version 392.38.0)
    /usr/lib/system/libmacho.dylib (compatibility version 1.0.0, current version 800.0.0)
    /usr/lib/system/libmathCommon.A.dylib (compatibility version 1.0.0, current version 2026.0.0)
    /usr/lib/system/libquarantine.dylib (compatibility version 1.0.0, current version 36.6.0)
    /usr/lib/system/libremovefile.dylib (compatibility version 1.0.0, current version 21.1.0)
    /usr/lib/system/libsystem_blocks.dylib (compatibility version 1.0.0, current version 53.0.0)
    /usr/lib/system/libsystem_c.dylib (compatibility version 1.0.0, current version 763.13.0)
    /usr/lib/system/libsystem_dnssd.dylib (compatibility version 1.0.0, current version 1.0.0)
    /usr/lib/system/libsystem_info.dylib (compatibility version 1.0.0, current version 1.0.0)
    /usr/lib/system/libsystem_kernel.dylib (compatibility version 1.0.0, current version 1699.26.8)
    /usr/lib/system/libsystem_network.dylib (compatibility version 1.0.0, current version 1.0.0)
    /usr/lib/system/libsystem_notify.dylib (compatibility version 1.0.0, current version 80.1.0)
    /usr/lib/system/libsystem_sandbox.dylib (compatibility version 1.0.0, current version 1.0.0)
    /usr/lib/system/libunc.dylib (compatibility version 1.0.0, current version 24.0.0)
    /usr/lib/system/libunwind.dylib (compatibility version 1.0.0, current version 30.0.0)
    /usr/lib/system/libxpc.dylib (compatibility version 1.0.0, current version 77.19.0) 
```

猜测`_write`可能包含在`libsystem_kernel.dylib`（或者尝试所有这些）：

```
% otool -p _write -tvV /usr/lib/system/libsystem_kernel.dylib | head -20
(__TEXT,__text) section
_write:
0000000000017fd4    movl    $0x02000004,%eax
0000000000017fd9    movq    %rcx,%r10
0000000000017fdc    syscall
0000000000017fde    jae 0x00017fe5
0000000000017fe0    jmp cerror
0000000000017fe5    ret
0000000000017fe6    nop
0000000000017fe7    nop
[...] 
```

现在我们拥有了构建内联程序集版本所需的所有程序集`test`：

```
#include <stdio.h>
int main(void)
{
    char buf[] = "test\n";
    ssize_t n;
    asm volatile (
        "movl $0x00000002, %%edi\n"  /* first argument */
        "movl $0x00000006, %%edx\n"  /* third argument */
        "movl $0x02000004, %%eax\n"  /* syscall number */
        "syscall\n"
        : "=A"(n)         /* %rax: return value */
        : "S"(buf));      /* %rsi: second argument */
    return n;
} 
```

编译和测试：

```
% gcc -O1 -fverbose-asm -o test-asm test-asm.c
% ./test-asm
test 
```

这似乎行得通。上面的内联汇编不是很精炼；例如，您也可以动态传递第一个和第三个参数，而不是在汇编代码中硬编码它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T20:41:35.707

Linux 解决方案是这样的：

```
.data mytext:
    .ascii "Hello World\n"  
.text 
  _mywrite:
    movl $0x04,         %eax     # Syscall No. 4 = write
    movl $0x01,         %ebx     # File. 1 = stdout 
    movl $mytext,       %ecx
    movl $0x0c,         %edx     # text length (hope I counted correctly)
    int  $0x80                   # Interrupt 0x80 -> make syscall 
```

在 Mac 等其他 Unix 系统上应该类似，但最好检查文档中的系统调用号 (0x04)。

# python - 如何在不添加反斜杠的情况下将 input() 变量编码为字节

> ID：14307624
> 
> 赞同：1
> 
> 时间：2013-01-13T20:08:12.667
> 
> 标签：python, unicode, byte, encode, python-3.3

我需要创建一个字节变量`input()`并将其用于`socket.sendall([bytes])` 但是当我这样做时，`input_var.encode("utf-8")`它会在反斜杠之后添加另一个反斜杠：

1.  这是我的输入变量：

    ```
    "GET / HTTP/1.1\r\n\r\n" 
    ```

2.  这就是我想要的字节变量：

    ```
    "GET / HTTP/1.1\r\n\r\n" 
    ```

3.  但是当我这样做时`encode("utf-8")`，我得到的是：

    ```
    "GET / HTTP/1.1\\r\\n\\r\\n" 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:40:32.383

```
3>> codecs.getdecoder('unicode-escape')('foo\\nbar')[0]
'foo\nbar' 
```

# java - 带有 JavaBean 的 Servlet

> ID：14307633
> 
> 赞同：4
> 
> 时间：2013-01-13T20:09:04.600
> 
> 标签：java, servlets, javabeans

我有一组三个 servlet，每个都有一个带有单选按钮的表单，这些单选按钮将其值传递给下一个 servlet。我要做的是制作一个 JavaBean 类来与 servlet 一起使用，并在从一个 servlet 到另一个 servlet 时保持它们的状态和单选按钮的选择。任何人都可以建议一些JavaBean的示例代码吗？

这是一些第一个 servlet 代码：

（其他两个 servlet 对其他问题有相同的代码）

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet 1</title>");            
        out.println("</head>");
        out.println("<form  id=\"form1\" action = \"Servlet2\" method = \"POST\">");
        out.println("<input type = \"radio\" name = \"Q1\" value = \"Answer 1\"> Answer 1 <br />\n" +
                    "<input type = \"radio\" name = \"Q1\" value = \"Answer 2\"> Answer 2 <br />\n" +
                    "<input type = \"radio\" name = \"Q1\" value = \"Answer 3\"> Answer 3 <br /> <br />");

        out.println("<input type = \"radio\" name = \"Q2\" value = \"Answer 1\"> Answer 1 <br />\n" +
                    "<input type = \"radio\" name = \"Q2\" value = \"Answer 2\"> Answer 2 <br />\n" +
                    "<input type = \"radio\" name = \"Q2\" value = \"Answer 3\"> Answer 3 <br /> <br />");

        out.println("<input type = \"radio\" name = \"Q3\" value = \"Answer 1\"> Answer 1 <br />\n" +
                    "<input type = \"radio\" name = \"Q3\" value = \"Answer 2\"> Answer 2 <br />\n" +
                    "<input type = \"radio\" name = \"Q3\" value = \"Answer 3\"> Answer 3 <br /> <br />");
        out.println("<input type = \"submit\" value = \"Next\">");
        out.println("</body>");
        out.println("</html>");
    } finally {            
        out.close();
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T00:23:01.973

这是一个简单的 JavaBean 类示例：

```
import java.io.Serializable;

public class AnswersBean implements Serializable {

    private static final long serialVersionUID = 1L;

    private String answer1;

    private String answer2;

    private String answer3;

    public String getAnswer1() {
        return answer1;
    }

    public void setAnswer1(String answer1) {
        this.answer1 = answer1;
    }

    public String getAnswer2() {
        return answer2;
    }

    public void setAnswer2(String answer2) {
        this.answer2 = answer2;
    }

    public String getAnswer3() {
        return answer3;
    }

    public void setAnswer3(String answer3) {
        this.answer3 = question3;
    }

} 
```

在您的第二个 Servlet 中，您可以使用所需的信息创建和填充您的 bean：

```
package com.example;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;
import java.io.IOException;

import com.example.AnswersBean;

public class Servlet2 extends HttpServlet {

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
        String answer1 = request.getParameter("Q1");
        String answer2 = request.getParameter("Q2");
        String answer3 = request.getParameter("Q3");

        // you may check if the answers exist and validate them

        AnswersBean answersBean = new AnswersBean();
        answersBean.setAnswer1(answer1);
        answersBean.setAnswer2(answer2);
        answersBean.setAnswer3(answer3);

        // store bean in session
        request.getSession().setAttribute("answers", answersBean);

        // you now can forward to some view, for example some results.jsp
        request.getRequestDispatcher("/results.jsp").forward(request, response);
    }
} 
```

现在在第三个 Servlet 中，您可以检查会话是否包含 bean：

```
package com.example;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;
import java.io.IOException;

import com.example.AnswersBean;

public class Servlet3 extends HttpServlet {

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
        AnswersBean answers = request.getSession().getAttribute("answers");

        if (answers == null) {
            // no bean was set in session
                    // do something
        } else {
            // there is a bean in session
                    // do something
        }

        // you now can forward to some view, for example some foo.jsp
        request.getRequestDispatcher("/foo.jsp").forward(request, response);

        // or do something else
    }
} 
```

[或者，您可以使用表达式语言](https://stackoverflow.com/tags/el/info)(EL) 在某个 JSP 页面中检查 bean，如下所示：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>
<head>
    <title>Answers</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <c:choose>
        <c:when test="${empty answers}">
            <h3>There are currently no answers.</h3>
        </c:when>
        <c:otherwise>
            <h3>First answer:  ${answers.question1}</h3>
            <h3>Second answer: ${answers.question2}</h3> 
            <h3>Third answer:  ${answers.question3}</h3>
        </c:otherwise>
    </c:choose>
</body>
</html> 
```

* * *

**PS**
阅读本文：
[JavaBeans](https://stackoverflow.com/tags/javabeans/info)
[JavaBeans Specification](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)
[Oracle 的 JavaBeans 教程](http://docs.oracle.com/javase/tutorial/javabeans/)

**更新**
我建议你阅读这个关于 Servlet 和 JSP 的流行教程，以进一步提高你的技能：
[Beginning & Intermediate Servlet & JSP Tutorials](http://courses.coreservlets.com/Course-Materials/csajsp2.html)

# android - 如何设置 ListView 项目单击使用开关位置在单独类的视频视图中每行播放一个本地视频文件？

> ID：14307640
> 
> 赞同：1
> 
> 时间：2013-01-13T20:10:37.847
> 
> 标签：android, listview, android-videoview

我有一个从项目名称数组填充的列表视图。它由 List（类）和 list_item（布局）设置。现在，我为列表视图行设置了单击侦听器，以在使用 ClipsActivity (class) activity_clips(layout) 设置的 VideoView 中播放视频。

问题：单击 ListView 中的行时，下一个活动（ClipsActivity）会加载警报“抱歉，无法播放此视频”。我肯定在资产文件夹中有视频文件。我相信 - 问题可能在于字符串从 ClickListener 传递/解析到 videoview 的方式。希望有人在这方面帮助我。

用于 List 类的代码

```
package com.abcdef.list;

//import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
//import android.widget.AdapterView;
//import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
 import android.widget.ListView;
    //import android.widget.TextView;

   public class List extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

// storing string resources into Array
String[] clips_files = getResources().getStringArray(R.array.clips_files);

// Binding resources Array to ListAdapter
this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label, clips_files));
  }   
 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {
super.onListItemClick(l, v, position, id);
change(position);
  }
void change(int position){
Intent intent = new Intent(getApplicationContext(), ClipsActivity.class);
    switch(position){  

    case 0 :
       intent.setData(Uri.parse("file:///android_asset/A1.mp4"));
        break;
    case 1 :
       intent.setData(Uri.parse("file:///android_asset/A2.mp4"));
        break;
    case 2 :
       intent.setData(Uri.parse("file:///android_asset/A3.mp4"));
        break;

    case 3 :
      intent.setData(Uri.parse("file:///android_asset/A4.mp4"));
        break;
    }
        startActivity(intent);
    }  
} 
```

这是用于带有 VideoView 的 ClipsActivity 类的代码

包 com.abcde.list；

```
import android.app.Activity;
import android.content.Context;
import android.content.pm.ActivityInfo;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;
import java.net.URI; 

@SuppressWarnings("unused")

public class ClipsActivity extends Activity  {

VideoView mVideoView;
MediaController mc;
// String uriPath;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_clips);
    final VideoView mVideoView = (VideoView)findViewById(R.id.videoview);
     MediaController mc = new MediaController(this);
     mc.setAnchorView(mVideoView);
     mVideoView.setMediaController(mc);

    mVideoView.setVideoPath((getIntent().getDataString()); 
    mVideoView.start(); 
    mVideoView.setOnCompletionListener(
            new MediaPlayer.OnCompletionListener() {
            public void onCompletion(MediaPlayer mp) {
                mVideoView.start();

             }
            });

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:32:17.953

您必须将视频复制到项目的 res/raw 文件夹中，而不是从资产访问。在 res 文件夹下创建 raw 文件夹。它必须采用受支持的格式（3gp、wmv、mp4），并在其文件名中使用小写字母、数字、下划线和点命名：video_file.mp4。

```
VideoView view = (VideoView)findViewById(R.id.videoView);
String path = "android.resource://" + getPackageName() + "/" + R.raw.video_file;
view.setVideoURI(Uri.parse(path));
view.start(); 
```

# javascript - 使用 jQuery 触发prototype.js 的更改事件

> ID：14307641
> 
> 赞同：2
> 
> 时间：2013-01-13T20:10:44.650
> 
> 标签：javascript, jquery, prototypejs, jquery-events

我正在处理由“更改”事件侦听器激活的长prototype.js 代码，我需要创建一个模拟“更改”事件以激活原型脚本的 jQuery 函数。我怎样才能做到这一点？

注意：`$('select[id="..."]').val(...).trigger('change');`不激活原型脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:10:29.623

jQuery's `.trigger()` only works for event handlers added via jQuery (see: [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/))

> Any event handlers attached with .on() or one of its shortcut methods are triggered when the corresponding event occurs. They can be fired manually, however, with the .trigger() method.

Prototype's `.fire()` only works for custom events (see: [http://api.prototypejs.org/dom/Event/fire/](http://api.prototypejs.org/dom/Event/fire/))

> Fires a custom event of name eventName with element as its target. Custom events must include a colon (:) in their names.

Unfortunately, the only way to do what you're describing is to grab some kind of reference to the "long prototype.js code" and manually call it. (This would depend on what the implementation you are referring to looks like.) It's not possible to fire a true "native" change event using javascript.

# node.js - NodeJS 集群问题

> ID：14307644
> 
> 赞同：0
> 
> 时间：2013-01-13T20:11:21.607
> 
> 标签：node.js, scalability

我正在寻找一种在 NodeJS 中的所有集群实例之间共享相同数据结构（包含函数，因此 JSON 不是一个选项）的方法。我有一个名为“用户”的数据结构，它跟踪用户会话并包含他们可以访问的功能。我需要能够在所有节点进程之间共享这个数据结构，或者我需要一个替代的设计模式。有谁知道这个问题的任何解决方案？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:43:01.200

在 nodejs 上设置正确的 IPC（进程间通信）有多种选择：

*   使用文档/键值存储解决方案，如[Redis](http://redis.org)（键值）或[MongoDB](http://mongodb.org)（NoSQL 文档存储）
*   使用[集群](http://nodejs.org/api/cluster.html)模块的集成 IPC 功能（见[`send`方法](http://nodejs.org/api/cluster.html#cluster_worker_send_message_sendhandle)）

决定哪种解决方案最适合取决于您的要求和项目设置。对于我们的上一个项目，我决定使用这两种方法：

*   用于触发作业并将部分任务分派到不同 nodejs 实例的 IPC
*   Redis 用于集中式会话和 API 令牌管理

如果您使用 Express，我强烈建议您使用 Redis 中间件[connect-redis](https://github.com/visionmedia/connect-redis)。此会话中间件自动处理基于 express 的应用程序的集中式会话管理（这也意味着您可以存储复杂的 JS 对象并可以从所有实例中访问它们）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T15:54:35.480

我意识到这是旧的并且已经回答，但是注意到替代方案可能对其他人有益。处理这种情况的推荐方法是将此数据结构及其功能放在单独的文件中，`require`并在需要时放置。这实际上将引入“代码/函数”，并将数据本身存储（序列化/反序列化）在任何数据存储中。

# java - Java 将项目从一个 ArrayList 克隆到另一个？

> ID：14307647
> 
> 赞同：2
> 
> 时间：2013-01-13T20:11:40.870
> 
> 标签：java, android

我试图将元素从一个 arrayList 复制到另一个，我开始在我的应用程序中遇到错误，我认为问题是我在做浅拷贝。

如何将一个数组中的一项添加到另一个数组中进行深度复制/克隆？

这就是我到目前为止复制元素的方式：

```
public ArrayList<ResolveInfo> myAppsArr = new ArrayList(); 
public ArrayList<ResolveInfo> allAppsArr = new ArrayList(); 

    myAppsArr.add(allAppsArr.get(0)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:14:07.880

> 如何将一个数组中的一项添加到另一个数组中进行深度复制/克隆？

ResolveInfo 有一个[构造函数](http://developer.android.com/reference/android/content/pm/ResolveInfo.html#ResolveInfo%28android.content.pm.ResolveInfo%29)，可以为您创建新的重复对象：

```
myAppsArr.add(new ResolveInfo(allAppsArr.get(0))); 
```

* * *

这个构造函数似乎只在 API 17 中添加，您可以*尝试*通用克隆方法：

```
myAppsArr.add(allAppsArr.get(0).clone()); // No promises, I haven't tested this myself 
```

或者，您可以创建一个手动创建新 ResolveInfo 对象的方法，因为所有成员数据都是公开的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T20:37:00.813

对于所有 android 版本，最简单和最可靠的方法是将 ResolveInfo 序列化到 parcel 并从该 parcel 创建新的 ResolveInfo 实例。

```
ResolveInfo r1 = new ResolveInfo();
Parcel p = Parcel.obtain();
r1.writeToParcel(p, 0);
ResolveInfo r2 = ResolveInfo.CREATOR.createFromParcel(p); 
```

# xna - 从 XNA 应用程序创建实时流

> ID：14307650
> 
> 赞同：0
> 
> 时间：2013-01-13T20:11:57.527
> 
> 标签：xna, http-live-streaming, live-streaming

我想创建一个 XNA 应用程序并有一个带有该应用程序输出的实时流（我可以在单独的 RenderTarget 中渲染所有内容并将其用作源）。

我需要这个，因为该应用程序将显示在一个大型户外显示器上，并且在那里获取实时内容的唯一方法是使用实​​时流媒体。

这可能吗？在实时渲染和实际流式传输并显示在大面板上的内容之间，我应该期待多少延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:47:47.423

你真的需要在你的应用程序中实现它吗？有很多工具可以为您做到这一点。

请参阅建议使用 XSplit 之类的软件的[问题。](https://gaming.stackexchange.com/questions/15997/how-do-i-live-stream-games)

你不必写这个肯定会更容易！

# ios - 制作像设置默认应用程序这样的应用程序 - 我需要无数的视图控制器吗？

> ID：14307652
> 
> 赞同：2
> 
> 时间：2013-01-13T20:12:00.340
> 
> 标签：ios, ios6

我正在我的应用程序中制作一个设置菜单，到目前为止，我正在为每个屏幕制作单独的视图控制器。这是这样做的正确方法吗？它增长得非常快，我不确定它是否是最佳方式。例如，我有：

1.  `UINavigationViewController`这是设置选项卡的主控制器。
2.  在它下面我有`UITableViewController`显示主设置屏幕。
3.  当我单击中间的任何设置单元格时，它会将我发送到它自己的视图控制器。
4.  而且我需要不同的模型来将每个视图控制器设置的每个部分分开，或者我可以将它们填充到一个文件中吗？

由于我有许多可自定义的设置，我真的需要为每个设置按钮单独的视图控制器吗？这看起来过于复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:47:07.123

这在一定程度上取决于您需要的特定设置类型。`UISwitch`对于简单的开/关设置，您可以直接在主程序中使用控件`TableView`（例如，请参阅主设置应用程序中的飞行模式）。

对于任何其他类型的类似设置，您可以使用单个通用视图控制器，该控制器为每个设置传递必要的参数。例如，也许您有五种不同的设置，都涉及从列表中选择一项。这些都可以调用同一个控制器，传递一个选择数组和对参数的引用，而不是重新创建本质上相同的视图五次。

通过这样做并将相关设置分组到一个视图中（同样，请参阅主设置应用程序以获取示例），您应该能够将必要控制器的数量保持在最低限度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:50:21.470

您可以选择，您可以创建多个视图并应用类似导航的推送动画来改变视图。然而，一个更好的方法，以及它们**最终**开始使用的地方，是使用故事板。

故事板是**一个**可以容纳许多视图控制器并且您可以链接交互的文件，根据我的经验，它真的很难使用，但正是您正在寻找的。

# c++ - 涉及限制关键字的编译器错误

> ID：14307653
> 
> 赞同：0
> 
> 时间：2013-01-13T20:12:01.397
> 
> 标签：c++, restrict, restrict-qualifier

> **可能重复：**
> [restrict 关键字在 C++ 中的含义是什么？](https://stackoverflow.com/questions/776283/what-does-the-restrict-keyword-mean-in-c)

我正在尝试在 OS X 10.8.2 上安装[QMCPACK](http://code.google.com/p/qmcpack/)，但遇到很多这样的错误：

```
bspline_base.h:95:17: error: expected ';' at end of declaration list
void *restrict coefs;
              ^
              ; 
```

我不熟悉 restrict 关键字，但我觉得这可能是其他类型的问题，因为这是为其他人编译的流行代码。

这是该代码的完整上下文：

```
typedef struct
{
  spline_code sp_code;
  type_code   t_code;
  void *restrict coefs;
} Bspline; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:15:46.597

`restrict`不是标准*C++中的**关键字*。代码只会在支持扩展的编译器中编译。*`restrict`*

 *`restrict` **是***C99*中的*关键字*。因此，如果您使用*C99*编译器，它会正常工作。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:17:21.550

`restrict`仅在 C 模式下可用。`clang++`将需要`__restrict`- 添加`-Drestrict=__restrict`到编译器标志。***

# c# - 如何对“，”和“。”进行例外处理 在按键事件中？

> ID：14307656
> 
> 赞同：0
> 
> 时间：2013-01-13T20:12:04.643
> 
> 标签：c#

注意：这与例外无关！

我试图让一个文本框接受除符号和标点之外的所有内容......但我需要允许“，”和“。” . 我在用着：

```
if (char.IsPunctuation(e.KeyChar) == true)
{
     e.Handled = true;
}

if (char.IsSymbol(e.KeyChar) == true)
{
     e.Handled = true;
} 
```

无论如何，这两个字符（，和。）有例外吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:15:47.160

首先检查这些字符：

```
if(e.KeyChar != ',' && e.KeyChar != '.')
{
    if (char.IsPunctuation(e.KeyChar))
    {
         e.Handled = true;
    }

    if (char.IsSymbol(e.KeyChar))
    {
         e.Handled = true;
    }
} 
```

关于样式的注意事项：不需要比较布尔值来`true`获取分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T20:14:17.773

尝试这个：

```
if (char.IsPunctuation(e.KeyChar) && e.KeyChar != ',' && e.KeyChar != '.')
{
     e.Handled = true;
}

if (char.IsSymbol(e.KeyChar) && e.KeyChar != ',' && e.KeyChar != '.')
{
     e.Handled = true;
} 
```

或者您可以在所有这些之前简单地检查它：

```
if( e.KeyChar != ',' && e.KeyChar != '.')
{
    if (char.IsPunctuation(e.KeyChar) )
    {
         e.Handled = true;
    }

    if (char.IsSymbol(e.KeyChar) )
    {
         e.Handled = true;
    }
} 
```

它的作用是检查字符是否是标点符号/符号，并且该字符不是“，”或“。”。因此，如果字符是逗号或句点，则 if 语句将不会运行。

# python - 在 Python 中实现 Java 对象创建

> ID：14307657
> 
> 赞同：0
> 
> 时间：2013-01-13T20:12:06.063
> 
> 标签：python, python-2.7

我正在尝试将以下 Java 代码片段转换为 Python。有人可以帮我解决这个问题。我是 Python 新手。

Java 代码：

```
public class Person
{
public static Random r = new Random();
public static final int numFriends = 5;
public static final int numPeople = 100000;
public static final double probInfection = 0.3;
public static int numInfected = 0;

/* Multiple experiments will be conducted the average used to
   compute the expected percentage of people who are infected. */
private static final int numExperiments = 1000;

/* friends of this Person object */
private Person[] friend = new Person[numFriends]; ----- NEED TO REPLICATE THIS IN PYTHON 
private boolean infected;
private int id; 
```

我正在尝试将上面标记行中的相同想法复制到 Python 中。有人可以转换“私人人[]朋友=新人[numFriends];” 在python中实现。我正在寻找代码片段...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:38:12.643

在我看来，您想知道，Python 中固定长度数组的等价物是什么。哪有这回事。您不必也不能像那样预先分配内存。相反，只需使用一个空列表对象。

```
class Person(object):
    def __init__(self, name):
        self.name = name
        self.friends = [] 
```

然后像这样使用它：

```
person = Person("Walter")
person.friends.append(Person("Suzie"))       # add a friend
person.friends.pop(0)                        # remove and get first friend, friends is now empty
person.friends.index(Person("Barbara"))      # -1, Barbara is not one of Walter's friends 
```

它的工作原理本质上类似于 Java 中的 List< T >。

哦，Python 中没有访问修饰符（私有、公共等）。一切都是公开的，可以这么说。

# complexity-theory - 复杂性的平等

> ID：14307658
> 
> 赞同：0
> 
> 时间：2013-01-13T20:12:06.500
> 
> 标签：complexity-theory, big-o

O(nlogn) 也是 O(n^2) 是真的吗，omega(nlogn) 也是 omega(n^2) 也是假的吗谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:15:52.157

`O(n log n)`小于`O(n ^ 2)`：如果将它们相除，则`n log n / n ^ 2 = log n / n = 0`如果`n -> infinity`. 由于它们的比率不会收敛到 1 而是收敛到 0，因此它们不是等效的复杂度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:30:09.447

Ο 是一类具有等效限制行为的函数。函数*g* ‍( *n* ) ∈ Ο( *f* ‍( *n* )) 意味着对于*n* ⟶ ∞，***f*的增长速度不会明显快于*g***。

在这方面， f( *n* ) = *n* ·log *n* ∈ Ο( *n* ² ) 的陈述是正确的，因为*n* ·log *n*的增长速度并不明显快于*n* ²。

但通常，这些符号用于描述最近的界限。因此，如果一个函数在 Ο( *n* ·log *n* ) 中，您将不会使用 Ο( *n* ² ) 来描述其限制行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T20:32:56.480

您可以参考我关于渐近符号的[其他答案。](https://stackoverflow.com/questions/14295113/how-do-i-write-big-o-notations/14295290#14295290)答案是肯定`Ο(nlg(n))⊂Ο(n^2)`的 但不是相反的 ( `Ο(n^2)⊄Ο(nlg(n))`)

`f(x) ∈ Ο(nlg(n))`状态`lim(x->inf) (f(x)/Ο(nlg(n)))`为 const（可能为 0）。对于小欧米茄符号`f(x) ∈ ω(nlg(n))`意味着`lim(x->inf) (f(x)/ω(nlg(n)))`无穷大。（ω称为下界）所以你是对的，`ω(nlg(n))⊄ω(n^2)`

# python - 从 Python 中的多个文本文件中复制列

> ID：14307661
> 
> 赞同：4
> 
> 时间：2013-01-13T20:12:17.190
> 
> 标签：python, csv, file-io

我有大量包含数据的文本文件，这些数据排列成固定数量的行和列，列之间用空格分隔。（如 .csv 但使用空格作为分隔符）。我想从每个文件中提取给定的列，并将其写入一个新的文本文件。

到目前为止，我已经尝试过：

```
results_combined = open('ResultsCombined.txt', 'wb')

def combine_results():
    for num in range(2,10):  
        f = open("result_0."+str(num)+"_.txt", 'rb') # all the text files have similar filename styles
        lines = f.readlines()   # read in the data
        no_lines = len(lines)   # get the number of lines

             for i in range (0,no_lines):
                 column = lines[i].strip().split(" ")

                 results_combined.write(column[5] + " " + '\r\n')

             f.close()

if __name__ == "__main__":
    combine_results() 
```

这会生成一个文本文件，其中包含我想要从单独文件中获取的数据，但作为单列。（即我已经设法将这些列“堆叠”在一起，而不是将它们作为单独的列并排放置）。我觉得我错过了一些明显的东西。

在另一次尝试中，我设法将所有单独的文件写入一个文件，但没有选择我想要的列。

```
import glob

files = [open(f) for f in glob.glob("result_*.txt")]  
fout = open ("ResultsCombined.txt", 'wb')

    for row in range(0,488):
      for f in files:
          fout.write( f.readline().strip() )
          fout.write(' ')
      fout.write('\n')

 fout.close() 
```

我基本上想要的是从每个文件中复制第 5 列（它始终是同一列）并将它们全部写入一个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:12:38.540

如果您不知道文件中的最大行数并且文件是否可以放入内存，那么以下解决方案将起作用：

```
import glob

files = [open(f) for f in glob.glob("*.txt")]

# Given file, Read the 6th column in each line
def readcol5(f):
    return [line.split(' ')[5] for line in f]

filecols = [ readcol5(f) for f in files ]
maxrows = len(max(filecols, key=len))

# Given array, make sure it has maxrows number of elements.
def extendmin(arr):
    diff = maxrows - len(arr)
    arr.extend([''] * diff)
    return arr

filecols = map(extendmin, filecols)

lines = zip(*filecols)
lines = map(lambda x: ','.join(x), lines)
lines = '\n'.join(lines)

fout = open('output.csv', 'wb')
fout.write(lines)
fout.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:57:09.860

或者这个选项（按照你的第二种方法）：

```
import glob

files = [open(f) for f in glob.glob("result_*.txt")]  
fout = open ("ResultsCombined.txt", 'w')

for row in range(0,488):
   for f in files:
       fout.write(f.readline().strip().split(' ')[5])
       fout.write(' ')
   fout.write('\n')

fout.close() 
```

...每个文件使用固定数量的行，但适用于非常多的行，因为它没有将中间值存储在内存中。对于中等数量的行，我希望第一个答案的解决方案运行得更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T20:26:20.053

为什么不将每 5 列的所有条目读入一个列表，并在读入所有文件后，将它们全部写入输出文件？

```
data = [
    [], # entries from first file
    [], # entries from second file
    ...
]

for i in range(number_of_rows):
    outputline = []
    for vals in data:
        outputline.append(vals[i])
    outfile.write(" ".join(outputline)) 
```

# mysql - MySQL 只允许存储日期：如何存储时间？

> ID：14307664
> 
> 赞同：0
> 
> 时间：2013-01-13T20:12:27.633
> 
> 标签：mysql, sql, date

我想在我的表中存储一个完整的日期：年、月、日、小时、分钟。

使用日期类型仅限于年月日。我应该怎么办？我必须提到，我将在完整日期之前从数据库顺序中选择记录，因此将小时和分钟单独存储为字符串可能是一个问题，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:15:11.287

您可以使用 DATETIME 代替 DATE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T17:37:49.570

我花了一段时间才弄清楚这一点，但要在 MySQL 中更改它，您必须转到您希望更改结构的列。将 Type 列从 DATE 更改为 DATETIME。

# java - 平铺地图上的多平铺对象

> ID：14307668
> 
> 赞同：1
> 
> 时间：2013-01-13T20:12:35.107
> 
> 标签：java, slick2d

我正在尝试使用[Tiled](http://www.mapeditor.org/)和 slick2d 编写基于 rts-like-tile 的游戏。

我不知道如何处理多瓷砖对象，如建筑物，如何创建、保存和移动它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:09:08.137

一种解决方案是创建一个平铺层，其中的平铺用作游戏代码的“标记”。这些“标记”从未被绘制。相反，当您初始化游戏时，请浏览平铺地图，每次找到相应的标记时，都会将“new Building()”添加到某种 EntityManager 类中。这样，您可以自己编写类 Building 的代码，而不是完全静态的 tile，您可以像移动任何其他实体一样移动它。这也让您可以将这些建筑物设置为任意大小，而不受任何瓷砖大小的影响。

# ios - 可编程地显示具有透明背景的 UIViewController

> ID：14307671
> 
> 赞同：0
> 
> 时间：2013-01-13T20:12:54.077
> 
> 标签：ios, xcode

我试图在 iPad 上显示我原来的 viewcontorller 中的 UIcontroller，但尺寸更小，以便用户能够与它以及后台的控制器进行交互。这是我的目标，但即使用户无法在后台与控制器交互也没关系，但必须在后台看到控制器。我试过这段代码：

```
controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:controller animated:YES];

    controller.view.layer.cornerRadius = 10; // this value vary as per your desire
    controller.view.clipsToBounds = YES;

    controller.view.frame = CGRectMake(343, 163, 316, 546.5); 
```

这将显示带有设置框架的控制器，但在背景中您看不到另一个控制器，而只是黑色。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:38:50.850

定义使用这个[从其他视图控制器呈现视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)和这个[关于视图控制器](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Introduction.html)

“模态视图的演示样式”部分说明了我认为的问题。

控制器有不同的呈现风格。您可以将属性 - modalPresentationStyle 设置为 UIModalPresentationPageSheet 或 UIModalPresentationFormSheet，以将视图控制器显示在其他之上。

```
controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
controller.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:controller animated:YES]; 
```

另一种方法是使用 UIPopoverController。它设计用于显示并非所有屏幕视图大小的视图。但是其他视图控制器上的触摸会隐藏它。

# mysql - MYSQL group_concat with and IF

> ID：14307672
> 
> 赞同：0
> 
> 时间：2013-01-13T20:13:04.077
> 
> 标签：mysql, group-concat

有一个日期字段，我从我的数据库中取出以下内容；PS 这里是更多使用连接从日期表中获取日期的查询。

```
SELECT event,event_name,
GROUP_CONCAT(DATE_FORMAT(ed.date,'%b %e') ORDER BY ed.date SEPARATOR ',') as date2 
FROM events ev
LEFT JOIN event_dates ed ON ev.eid=ed.eid
WHERE ev.yr='2013' 
GROUP BY ev.eid 
```

这会产生占用大量空间的日期列表。

```
May 16,May 23,May 30,Jun 6,Jun 20 
```

我希望它看起来像

```
 May 16,23,30,Jun 6,20 
```

这是我尝试过的查询。但它不起作用，因为子查询似乎不知道事件 ID。猜测我可能需要将其转换为联接？

```
SELECT DISTINCT ev.event_id, 
GROUP_CONCAT(DISTINCT DATE_FORMAT(race_date,'%a') ORDER BY race_date 
SEPARATOR ',   ')   as date1,

(SELECT GROUP_CONCAT(dm) FROM
 (SELECT CONCAT(
    MONTHNAME(race_date),
    ' ',
    GROUP_CONCAT(DAY(race_date) ORDER BY race_date)
    ) as dm 
FROM event_dates ed1 WHERE ed1.event_id=ev.event_id  
GROUP BY MONTH(race_date))as t) as date2

FROM events ev
JOIN event_dates ed ON ev.event_id = ed.event_id AND ev.race_year = ed.race_year 
GROUP BY event_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:24:52.567

```
SELECT GROUP_CONCAT(d) FROM (
  SELECT    CONCAT(
              MONTHNAME(date),
              ' ',
              GROUP_CONCAT(DAY(date) ORDER BY date)
            ) AS d
  FROM      my_table
  GROUP BY  MONTH(date)
) t 
```

# asp.net - 使用模拟的 IIS 中的长时间延迟

> ID：14307673
> 
> 赞同：1
> 
> 时间：2013-01-13T20:13:05.193
> 
> 标签：asp.net, iis, iis-7, impersonation, visual-foxpro

迁移到 64 位后，我们在 IIS 中遇到了非常奇怪的交替延迟。

我们有一个 Web 服务（使用 AnyCPU 和 .NET 2.0 构建）引用使用 FoxPro 构建的 COM EXE 来访问 MYOB。

Web 服务被配置为模拟特定的用户帐户。

最初我们认为我们遇到的延迟是由于反复通过网络重新加载 MYOB 数据（400MB+），所以我们添加了一些日志来确定，并发现以下内容。

1.  它似乎延迟了第二个请求，第一个请求很快。
2.  在安全事件日志中，我们在客户端发出呼叫后大约 1 秒获得该帐户的事件 ID 4672（特殊权限）。
3.  X 次之后，我们在被调用方法的第一行记录一个调用（在其他所有内容之前，包括 try/catch）

当事情正常时，X 可能是 2-6 秒，而当事情不正常时，X 可能是 7 分钟（通常约为 80 秒）。

关于我可以在哪里寻找更多信息或可能原因的任何建议？

# java - 如何在 Java Gnome/GTK 程序中使用 Glade UI（.glade 文件）？

> ID：14307676
> 
> 赞同：4
> 
> 时间：2013-01-13T20:13:44.830
> 
> 标签：java, ubuntu, user-interface, gtk, glade

我在 Internet 上进行了一项研究，寻找教程/文档来解释我如何在 Java Gnome 项目中使用 Glade 设计的 UI，但没有运气。我已经知道如何使用 Java Gnome/GTK 从代码创建 UI。无论如何，我想使用我在 Java Gnome/Gtk 项目中创建的 Glade UI，但我不知道从哪里开始。请告诉我：

*   我需要安装哪些软件包；

*   如何将我使用 Glade（.glade 文件）创建的 UI 与我的 Java Gnome/Gtk 项目（特别是在 Eclipse 中）集成；

*   并举个例子。

提前致谢。

这就是我的 Glade UI 的外观（只需单击图像即可放大）：

[![在此处输入图像描述](../Images/b410110c9d4713082c2661fccaea39c2.png)](https://i.stack.imgur.com/cgX9C.png)

这是上面 UI 的 XML 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window1">
    <property name="can_focus">False</property>
    <property name="window_position">center</property>
    <child>
      <object class="GtkFixed" id="fixed1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <child>
          <object class="GtkEntry" id="entry1">
            <property name="width_request">162</property>
            <property name="height_request">25</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="halign">start</property>
            <property name="valign">end</property>
            <property name="invisible_char">•&lt;/property>
          </object>
          <packing>
            <property name="x">11</property>
            <property name="y">49</property>
          </packing>
        </child>
        <child>
          <object class="GtkEntry" id="entry2">
            <property name="width_request">162</property>
            <property name="height_request">25</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="halign">start</property>
            <property name="valign">end</property>
            <property name="invisible_char">•&lt;/property>
            <property name="invisible_char_set">True</property>
          </object>
          <packing>
            <property name="x">271</property>
            <property name="y">49</property>
          </packing>
        </child>
        <child>
          <object class="GtkLabel" id="label">
            <property name="height_request">25</property>
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="label" translatable="yes">*</property>
          </object>
          <packing>
            <property name="x">216</property>
            <property name="y">49</property>
          </packing>
        </child>
        <child>
          <object class="GtkButton" id="button">
            <property name="label" translatable="yes">Calculate!!!</property>
            <property name="use_action_appearance">False</property>
            <property name="width_request">84</property>
            <property name="height_request">27</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
            <property name="use_action_appearance">False</property>
          </object>
          <packing>
            <property name="x">181</property>
            <property name="y">93</property>
          </packing>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-27T11:50:13.070

好的，您需要：

*   初始化 GTK 库
*   创建 Builder 对象
*   检索窗口小部件
*   显示窗口小部件

我假设您已经在 Linux 系统中安装了 java-gnome 库并在 eclipse 项目中导入了 jar（项目属性 - java 构建路径 - 添加外部 jars - /usr/share/java/gtk.jar）。

示例代码：

```
Gtk.init(args); //Init library
Builder b = new Builder();  //Create builder
b.addFromFile("filename.glade");  //Load layout from file
Window w = (Window) b.getObject("myWindowName");  //Retrieve an object
w.showAll(); //Show window
Gtk.main(); 
```

这是它应该工作的方式。如果你想在一个对象上设置一个监听器，例如一个按钮，你可以通过之前在窗口中看到的名称来检索对象，然后：

```
button.connect(new Clicked() {

    @Override
    public void onClicked(Button arg0) {
        // Do what you want
    }
}); 
```

它对你有用吗？好吧，这不适合我。问题是我的代码在调用 Builder.addFromFile(filename) 时抛出异常

> java.text.ParseException：无效的对象类型`GtkLabel'

错误与树中的第一个元素有关。经过深入研究，我发现，由于一个已知的错误从未修复，您需要在使用之前预先定义每个小部件：在这种情况下，只需调用

```
 new Label(); 
```

在创建构建器之前。

这显然**不**打算以这种方式工作，并将在未来修复。

关于这个问题的更多信息：

[java-gnome-developer 邮件列表上的线程](https://www.mail-archive.com/java-gnome-developer@lists.sourceforge.net/msg00081.html)

[Java-gnome-hackers 邮件列表上的主题](http://article.gmane.org/gmane.comp.gnome.bindings.java.devel/1606)

希望这可以帮助...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T10:42:49.513

您应该使用[`Builder`](http://java-gnome.sourceforge.net/doc/api/4.1/org/gnome/gtk/Builder.html)该类（自 java-gnome 4.0.20 起可用）。创建它，调用`addFromFile`方法给它你的 glade 文件。然后只需调用`getObject`在 Glade UI 中输入的对象名称即可获取该对象。我认为唯一缺少的是信号连接的东西。原始的[GtkBuilder](http://developer.gnome.org/gtk3/stable/GtkBuilder.html)类（在 C 中）提供了更多，尤其是信号连接功能（`gtk_builder_connect_signals`例如）。因此，如果这些功能在 Java 绑定中不可用，您可能需要手动连接信号。这意味着在“信号”选项卡中设置您要连接的信号，并设置此信号将调用的回调的名称。通过查看它在 python 中是如何完成的，您可以很好地猜测基础知识：

[http://python-gtk-3-tutorial.readthedocs.org/en/latest/builder.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/builder.html)

只需在网上浏览“glade 教程”或“glade gtkbuilder”即可。

# .htaccess - 将所有域的所有站点重定向到新域，而不使用尾随查询字符串

> ID：14307677
> 
> 赞同：2
> 
> 时间：2013-01-13T20:14:04.713
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting

我想将旧域上的所有请求重定向到新域的主页（根站点）。我认为它适用于：

```
RewriteEngine On
RewriteRule ^(.*)$ http://newdomain.com/ [R=301] 
```

（请参阅：[.htaccess 将所有页面重定向到新域](https://stackoverflow.com/questions/1945568/htaccess-redirect-all-pages-to-new-domain)）但是由于一个奇怪的原因，当我尝试例如访问 URL www.olddomain.com/faq/pdf.php?cat=7&id=93&artlang=de 时，我被重定向到www.newdomain.com/?cat=7&id=93&artlang=de。可能是什么问题呢？

过去我遇到了一些问题，因为这个域位于我的新主域的子目录（作为插件域）中，但是在主域的 .htaccess 中，我有一个：

```
RewriteCond %{HTTP_HOST} ^([^.]+\.)*olddomain\.com
RewriteRule .* - [L] 
```

禁用此类错误。还有其他想法吗？我从几个小时开始就在尝试这个。

编辑：当我发现问题是查询字符串时，我已经用谷歌搜索了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:48:30.463

如果要在*没有*路径和查询字符串的情况下重定向到新域，则必须附加一个空查询字符串

```
RewriteEngine On
RewriteRule .* http://newdomain.com/? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T21:39:31.840

`mod_rewrite`*如果未指定查询*字符串，则将查询字符串附加到重写的 URL 。添加一个空的查询字符串来避免问题（添加一个`?`就足够了）：

```
RewriteEngine On
RewriteRule ^(.*)$ http://newdomain.com/? [R=301,L] 
```

另请阅读有关[QSA](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)标志的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T21:22:47.897

更新：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} (?:www\.)?oldomain\.com [NC]
RewriteRule ^(.*)$ http://newdomain.com/?  [R=301,L] 
```

更新为示例，而不是答案。

# sql - Java用当前日期插入sql

> ID：14307680
> 
> 赞同：1
> 
> 时间：2013-01-13T20:14:16.017
> 
> 标签：sql

我有一张桌子`order`叫`userID, itemID , dateOfOrder`

如何插入包含今天日期的行？

我试过例如：

```
INSERT INTO lending 
VALUES(111, 1, SELECT CURDATE()) 
```

但它不起作用。知道什么是正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:17:52.453

问题解决了：

```
INSERT INTO lending VALUES(111, 1, CURDATE()) 
```

代替

```
INSERT INTO lending VALUES(111, 1, **SELECT** CURDATE()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:19:30.997

您没有指定您使用的是哪个[RDBMS](http://en.wikipedia.org/wiki/Comparison_of_relational_database_management_systems)，所以这里有两个主要的： 如果您使用的是 MySql，请查看该[`NOW()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_now)方法。如果您使用的是 Oracle，请查看[`SYSDATE`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions172.htm). 对于其他任何事情，例如 MS SQL，一些快速的谷歌搜索应该可以找到答案。

# php - 如何在没有 MySQL 数据的情况下设置分页

> ID：14307683
> 
> 赞同：-1
> 
> 时间：2013-01-13T20:15:00.443
> 
> 标签：php, pagination

我的任务是列出以文件夹名称及其在服务器上的位置开头的数据（产品详细信息）。不幸的是，没有使用 MySQL 并且它不在我的手中，这给我带来了分页问题......任何帮助将不胜感激。

这是我的代码......这很丑陋，但工作完美......只是它会按原样显示所有结果！

```
<div style="width:750px;">
<?php

$ALL_PARTS = array();

// LOOP THROUGH MEMBERS RESOURCES ROOT FOLDER TO FIND ALL MEMBER RESOURCES FOLDERS

foreach (glob("root_folder/sub_folder/*",GLOB_ONLYDIR) as $ROOT_FOLDERS_PATH) {

// WE CAN NOW FIND ALL RELEVANT FOLDERS CONTAINING THE DATA NEEDED

       foreach (glob("$ROOT_FOLDERS_PATH/offers/*",GLOB_ONLYDIR) as $RESOURCE_FOLDERS_PATH) {

           $FIXED_PRODUCT_CODE = file_get_contents("$RESOURCE_FOLDERS_PATH/fixed-product-code.txt", true);
           $PRODUCT_TITLE = file_get_contents("$RESOURCE_FOLDERS_PATH/product-title.txt", true);
           $PRODUCT_DESCRIPTION = file_get_contents("$RESOURCE_FOLDERS_PATH/product-description.txt", true);

// WE NOW NEED TO RETURN THE PRODUCT IMAGE NAME WHICH IS IN ANOTHER LOCATION
// FIRST CREATE ARRAY OF ITEMS TO FILTER OUT IN RESULT

$ignore = Array(".", "..", "$RESOURCE_FOLDERS_PATH/assets/product_img/index.php", "$RESOURCE_FOLDERS_PATH/assets/product_img/.htaccess");

// GO GET THE IMAGE NAME AND PATH

foreach (glob("$RESOURCE_FOLDERS_PATH/assets/product_img/*") as $GET_IMAGE_NAME) {

// IF WE HAVE AN IMAGE AND PRODUCT CODE, DEFINE OPENING WRAPPER DIV AND THE IMAGE
// THEN DEFINE THE URL TO THE PRODUCT AND CLOSE THE WRAPPER DIV

     if((!in_array($GET_IMAGE_NAME, $ignore)) && (!empty($GET_IMAGE_NAME)) && (!empty($FIXED_PRODUCT_CODE)) ){

         $PART_1 = "<div style='width:355px; margin:0 0 20px 0; padding:10px; float:left; height:130px;'>";
         $PART_2 = "<div style='float:left; height:150px; padding-right:10px;'><img src='" . $GET_IMAGE_NAME . "' width='100' alt='' /></div>";
         $PART_3 = "<div><a href='subscriber_offers.php?product=" . md5($FIXED_PRODUCT_CODE) ."'>" . $PRODUCT_TITLE ."</a><p>" . $PRODUCT_DESCRIPTION  . "</p></div>";
         $PART_4 = "</div>";

     }
}

// PUT DEFINED PARTS TOGETHER 

$ALL_PARTS[$PRODUCT_TITLE] = $PART_1 . $PART_2 . $PART_3 . $PART_4;

    }
}

ksort($ALL_PARTS);

foreach($ALL_PARTS as $PRODUCT){
echo $PRODUCT;
}
?>
</div> 
```

这给了我按字母顺序排列的产品列表。

```
 ksort($ALL_PARTS);

    foreach($ALL_PARTS as $PRODUCT){
    echo $PRODUCT;
} 
```

但是我如何让 $arr 以一种可以通过分页脚本访问的方式包含 $ALL_PARTS 数组的所有数据？

以下只会给我相关循环的最后一次迭代......（显然）

```
$arr = array($PRODUCT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:09:03.227

首先创建可排序数据数组的示例代码，然后使用数组生成 html：

```
<?

// LOOP THROUGH MEMBERS RESOURCES ROOT FOLDER TO FIND ALL MEMBER RESOURCES FOLDERS

$data=array();

foreach (glob("root_folder/sub_folder/*",GLOB_ONLYDIR) as $ROOT_FOLDERS_PATH) {

// WE CAN NOW FIND ALL RELEVANT FOLDERS CONTAINING THE DATA NEEDED

    foreach (glob("$ROOT_FOLDERS_PATH/offers/*",GLOB_ONLYDIR) as $RESOURCE_FOLDERS_PATH) {

        $FIXED_PRODUCT_CODE = file_get_contents("$RESOURCE_FOLDERS_PATH/fixed-product-code.txt", true);
        $PRODUCT_TITLE = file_get_contents("$RESOURCE_FOLDERS_PATH/product-title.txt", true);
        $PRODUCT_DESCRIPTION = file_get_contents("$RESOURCE_FOLDERS_PATH/product-description.txt", true);

        // WE NOW NEED TO RETURN THE PRODUCT IMAGE NAME WHICH IS IN ANOTHER LOCATION
        // FIRST CREATE ARRAY OF ITEMS TO FILTER OUT IN RESULT

        $ignore = Array(".", "..", "$RESOURCE_FOLDERS_PATH/assets/product_img/index.php", "$RESOURCE_FOLDERS_PATH/assets/product_img/.htaccess");

        // GO GET THE IMAGE NAME AND PATH

        foreach (glob("$RESOURCE_FOLDERS_PATH/assets/product_img/*") as $GET_IMAGE_NAME) {

        // IF WE HAVE AN IMAGE AND PRODUCT CODE, DEFINE OPENING WRAPPER DIV AND THE IMAGE
        // THEN DEFINE THE URL TO THE PRODUCT AND CLOSE THE WRAPPER DIV

            if((!in_array($GET_IMAGE_NAME, $ignore)) && (!empty($GET_IMAGE_NAME)) && (!empty($FIXED_PRODUCT_CODE)) ){
                       /* push data to array*/
               $data[]=array( 'title'=> $PRODUCT_TITLE, 'descr'=> $PRODUCT_DESCRIPTION , 'img'=>$GET_IMAGE_NAME, 'code'=>md5($FIXED_PRODUCT_CODE));

            }
        }
    }
}

/* now sort array arbitrarily using "asort()"*/
asort( $data);

/* now create html */
$ALL_PARTS='';
foreach( $data as $row){

    $ALL_PARTS. = "<div style='width:355px; margin:0 0 20px 0; padding:10px; float:left; height:130px;'>";
    $ALL_PARTS. = "<div style='float:left; height:150px; padding-right:10px;'><img src='" . $row['img'] . "' width='100' alt='' /></div>";
    $ALL_PARTS. = "<div><a href='subscriber_offers.php?product=" . $row['code'] ."'>" . $row['title'] ."</a><p>" . $row['descr']  . "</p></div>";
    $ALL_PARTS. = "</div>";

}
echo $ALL_PARTS;

?> 
```

# clojure - 在 Clojure 中循环一个“let”列表？

> ID：14307684
> 
> 赞同：1
> 
> 时间：2013-01-13T20:15:08.433
> 
> 标签：clojure, let

如果我有一个未知数量的参数，我想用“let”相互绑定，例如：

```
let [a "hello" b 55 ] 
```

如果我在函数/宏或类似函数中绑定 let 并且我想遍历列表，我将如何执行此操作？

请注意，在 let 中有 4 个元素，但我只想遍历“键”。一个使用示例可能是检查绑定到键的值是否是像 b 这样的数字，即 55

编辑：作为一个例子：请注意，以下内容非常糟糕，但它只是为了解释问题：

```
(defn func [& arguments] 
 (let [ ~arguments] ((println "omg no way!") (for [x let-list] (number? x (println "roar") ))) 
```

输入：（func [a“你好”b 55]

所以基本上：我想要一个功能：

*   将参数绑定到某种形式的列表，例如：[ab]
*   打印“omg no way！”） - 不应该是循环的一部分，应该只在函数中打印一次
*   某种循环，例如循环通过“let-list”的for循环，所以它会去：“a，是一个数字吗？不，是b数字吗？是的，打印“roar”

输出：omg 没办法咆哮

再一次： **我想知道是否有一种方法可以访问函数内部的关键字。正如 for 循环所示，我想访问每个单独的元素并使用该元素执行操作。**如果我使用 (for [x arguments] 代替，它会给出：omg no way, roar roar (因为 b 绑定到 55 所以它是一个数字但 55 也是一个数字但没有必要使用 55 因为 55 是已经绑定到 b)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:52:59.713

这是一个宏的示例，它采用交替名称和值的列表，将它们绑定在一个 let 中，然后通过引入一个名为“locals”的符号**保存它刚刚创建的绑定映射，该**符号命名一个本地名称映射本地值。

```
(defmacro anaphoric-let [alternating-symbols-and-values & body]
  `(let [~@alternating-symbols-and-values
         names# (quote ~(flatten (partition 1 2 alternating-symbols-and-values)))
         values#  ~(vec (flatten (partition 1 2 alternating-symbols-and-values)))
         ~'locals (zipmap names# values#)]
     ~@body)) 
```

任何名为 withing 的表达式`anaphoric-let`都可以使用`locals`名称中的值。

```
user> (anaphoric-let [a 1 b 2 c 3 d 4] [a locals])
[1 {d 4, c 3, b 2, a 1}] 
```

*在使用 let 定义它们之后*和在正文之前将值保存在映射中对于防止多次执行和其他不卫生宏的罪过很重要。

然后可以使用此地图根据当地人做出决策：

```
user> (anaphoric-let [a 1 b 2 c 3 d 4 e "cat"] 
        (map (fn [[local val]] 
               (str local " is " (if (number? val) val "woof"))) 
              locals))
("e is woof" "d is 4" "c is 3" "b is 2" "a is 1") 
```

或者：

```
user> (anaphoric-let [a 1 b 2 c 3 d 4 e "cat"] 
        (println "omg no way!") 
        (dorun (for [x (vals locals)] 
                 (if (number? x) (println "roar")))))
omg no way!                                                                                                                                                    
roar                                                                                                                                                           
roar                                                                                                                                                           
roar                                                                                                                                                           
roar                                                                                                                                                           
nil 
```

ps: anaphoic 宏是在它创建的代码中引入一个名称的任何宏，该名称在传递给它的代码中不存在。

# ruby-on-rails - 删除嵌套对象

> ID：14307687
> 
> 赞同：0
> 
> 时间：2013-01-13T20:15:17.620
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嗨，我正在努力添加链接以删除嵌套的对象。我有许多像这样嵌套的任务的列表应用程序。

```
resources :lists do
  resource :tasks
end 
```

我已经阅读了这篇[文章](https://stackoverflow.com/questions/5710642/deleting-nested-objects-rails)，但它对我不起作用。我想在下面的代码中删除一个链接

```
 <h4>Tasks</h4>
<% @list.tasks.each do |task| %>
    <%= task.desc %>
    <%= link_to "Delete", list_task_path(list, task), :method => :delete %><br />
<% end %> 
```

但它给了我以下错误

```
undefined local variable or method `list' for #<#<Class:0x007f9adc555db0>:0x007f9adc547828> 
```

编辑：现在刷新页面时出现以下错误

```
No route matches {:action=>"show", :controller=>"tasks", :list_id=>#<List id: 28, name: "Julklappar", user_id: 1, created_at: "2012-12-22 17:40:05", updated_at: "2012-12-22 17:40:05">, :id=>#<Task id: nil, desc: nil, completed: false, list_id: 28, created_at: nil, updated_at: nil>} 
```

耙路线：

```
pierre@ubuntu:~/todolist$ rake routes
              list_tasks GET    /lists/:list_id/tasks(.:format)          tasks#index
                         POST   /lists/:list_id/tasks(.:format)          tasks#create
           new_list_task GET    /lists/:list_id/tasks/new(.:format)      tasks#new
          edit_list_task GET    /lists/:list_id/tasks/:id/edit(.:format) tasks#edit
               list_task GET    /lists/:list_id/tasks/:id(.:format)      tasks#show
                         PUT    /lists/:list_id/tasks/:id(.:format)      tasks#update
                         DELETE /lists/:list_id/tasks/:id(.:format)      tasks#destroy
                   lists GET    /lists(.:format)                         lists#index
                         POST   /lists(.:format)                         lists#create
                new_list GET    /lists/new(.:format)                     lists#new
               edit_list GET    /lists/:id/edit(.:format)                lists#edit
                    list GET    /lists/:id(.:format)                     lists#show
                         PUT    /lists/:id(.:format)                     lists#update
                         DELETE /lists/:id(.:format)                     lists#destroy
        new_user_session GET    /users/sign_in(.:format)                 devise/sessions#new
            user_session POST   /users/sign_in(.:format)                 devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)                devise/sessions#destroy
           user_password POST   /users/password(.:format)                devise/passwords#create
       new_user_password GET    /users/password/new(.:format)            devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)           devise/passwords#edit
                         PUT    /users/password(.:format)                devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                  devise/registrations#cancel
       user_registration POST   /users(.:format)                         devise/registrations#create
   new_user_registration GET    /users/register(.:format)                devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                    devise/registrations#edit
                         PUT    /users(.:format)                         devise/registrations#update
                         DELETE /users(.:format)                         devise/registrations#destroy
                    root        /                                        lists#index 
```

编辑 #2 这是我的列表/show.html.erb 文件

```
<p id="notice"><%= notice %></p>

<h2><%= @list.name %></h2>

    <h4>Tasks</h4>
    <% @list.tasks.each do |task| %>
        <%= task.desc %>
        <%= link_to "Delete", list_task_path(@list, task), :method => :delete %>
    <% end %>

<%= form_for [@list, @task] do |form| %>

    <p><%= form.text_field :desc %> <%= form.submit %></p>

<% end %>

<%= link_to 'Edit', edit_list_path(@list) %> |
<%= link_to 'Back', lists_path %> 
```

列出控制器

```
 def show
    @list = current_user.lists.find(params[:id])
    @task = @list.tasks.new
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:16:17.087

您的链接应该是：

```
<%= link_to "Delete", list_task_path(@list, task), :method => :delete %> 
```

循环时`@list.tasks`，您只是`task`通过本地化`|task|`- 但`@list`始终保持不变`@list`。

另一个问题出在您的控制器中：`@task = @list.tasks.new`-您在此处构建了一个新任务，这是您的表单所必需的。然而，这个任务是新的，这意味着它还没有被保存——你根本无法建立一个链接来删除它，因为它在数据库中还不存在。您可以通过直接在表单中而不是在控制器中构建任务来避免这种情况。

摆脱控制器中的这一行：

```
@task = @list.tasks.new 
```

并将您的表格更改为：

```
<%= form_for [@list, @list.tasks.build] do |form| %> 
```

# c++ - 重复调用 f(T&& t) 形式的函数而不再次使用 std::move(t)？

> ID：14307688
> 
> 赞同：0
> 
> 时间：2013-01-13T20:15:22.253
> 
> 标签：c++

```
#include <iostream>
#include <cstdlib>
#include "A.h"

void second(const A& a)
{
    std::cout << "void second(const A& a)." << std::endl;
}

void second(A&& a)
{
    std::cout << "void second(A&& a)." << std::endl;
}

void first(const A& a)
{
    std::cout << "void first(const A& a)." << std::endl;
    second(a);
}

void first(A&& a)
{
    std::cout << "void first(A&& a)." << std::endl;
    second(a); //Make this call void second(A&& a) without using std::move(a) again?
}

int main()
{
    std::cout << "int main()." << std::endl;

    A a;
    first(std::move(a));

    std::cin.sync();
    std::cin.get();
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:21:35.430

```
second(a); 
```

它不能调用`second(A&&)`，因为它`a`是一个左值（因为它有一个*name*）。

打电话给`second(A&&)`你需要一个右值。因此，您需要转换`a`为右值，为此您必须使用`move`或进行手动显式转换：

```
second(std::move(a));        //invokes second(A&&)
second(static_cast<A&&>(a)); //invokes second(A&&) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:24:10.740

函数内部

```
void first(A&& a) 
```

该参数`a`是一个命名值，因此是一个左值。

无论如何，你真的不希望它在第一次函数调用时被移走，因为如果你想`a`在你的函数中多次使用它会造成很多麻烦。考虑

```
void first(A&& a)
{
    second(a);
    third(a);
    fourth(a);
} 
```

您不希望调用`second`将值从`a`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T20:33:55.000

您是否发现为每个函数编写右值引用重载的过程很乏味，并且正在寻找一种方法来摆脱这种乏味？考虑将您的重载压缩为一个函数，该函数按值获取参数，然后将它们移动到需要去的地方。

所以，换句话说，这两个函数......

```
void foo(X const& x) {
    bar(x);
}
void foo(X&& x) {
    bar(std::move(x));
} 
```

...成为这一功能

```
void foo(X x) {
    bar(std::move(x));
} 
```

每个额外参数的节省（在键入和可维护性方面）成倍增加。有时它会花费额外的移动，但从不需要额外的副本（当然，除非没有移动构造函数）。

# z3 - 使用 def 时未知

> ID：14307692
> 
> 赞同：1
> 
> 时间：2013-01-13T20:15:42.853
> 
> 标签：z3

这个简单的例子为我生成了 UNKNOWN，我想我对 def 有一些不明白的地方。

```
from z3 import *
s = Solver()
def Min(b, r): 
    return If(b, r, 1)
a = Real('a')
b = Bool('b')

s.add(a==0.9)
s.add(a<=Min(b,0.9))

s.check()   
print "Presenting result "
m = s.model()
print "traversing model..."
for d in m.decls():
    print "%s = %s" % (d.name(), m[d]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:39:16.847

你没有犯任何错误。这是 Z3 求解器中的一个问题。您的问题出在称为“差分逻辑”的算术片段中。这个片段中的一个问题，如果算术原子可以写成`x - y <= k`，其中`k`是一个数字。当这个片段中出现问题时，Z3 将使用专门的求解器来解决它。`unknown`但是，当输入问题还包含 if-then-else 项（`If`您的 中的）时，此求解器可能会失败（返回`Min`）。 [该错误已修复](http://z3.codeplex.com/SourceControl/changeset/39d5b850e80a)，将在下一个版本中提供。同时，您可以尝试以下解决方法之一：

*   在调用求解器之前强制 Z3 消除 if-then-else 项。您只需替换`s = Solver()`为`s = Then('elim-term-ite', 'smt').solver()`. [这是rise4fun 上修改后的脚本。](http://rise4fun.com/Z3Py/ruJC)

*   我们可以添加一个不在不同逻辑片段中的冗余断言。示例：`z + w > 2`。[这是rise4fun 上修改后的脚本。](http://rise4fun.com/Z3Py/URlO)

# vim - 禁用“类型：退出 按 Ctrl+C 时退出 Vim 消息

> ID：14307697
> 
> 赞同：2
> 
> 时间：2013-01-13T20:15:58.897
> 
> 标签：vim

我正在开发[一个 Vim 插件](https://github.com/someboddy/vim-erroneous)，它需要运行一个 shell 命令（针对运行编译器和构建系统）并捕获它的输出。我还想在运行时显示命令的 stdout 和 stderr，所以我使用 Ruby 来运行命令（尽管我仍然使用 Vim 的`:echo`命令显示，所以我可以为 stderr 设置高亮显示）

无论如何，我想让用户在中间取消命令。取消程序传统上是用 .Vim 来完成的`Ctrl+C`，而 Vim 允许用户`Ctrl+C`通过抛出 来取消当前正在运行的 vimscript `Vim:Interrupt`。我想使用 Vim 的`:sleep`命令来允许用户按下`Ctrl+C`，如果他们想取消他们正在运行的命令，catch`Vim:Interrupt`并相应地继续。

我的问题是，`Ctrl+C`在非插入模式下按下 Vim 会导致 Vim 显示`Type :quit<Enter> to exit Vim`- 并删除之前回显的任何消息。这对我来说是个问题，因为我想在用户取消显示之前保留命令放在 stdout 和 stderr 中的任何输出（并且可能添加一条命令已取消的消息）。

有什么方法可以暂时禁用此消息并保留用户按下之前回显的任何内容`Ctrl+C`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T21:36:06.823

您可以在映射的左侧添加`<silent>`以隐藏它们通常会在命令行上输出的内容。

在这种情况下，以下映射应该有效（似乎在这里）：

```
nnoremap <C-c> <silent> <C-c> 
```

# stored-procedures - 蟾蜍plsql错误执行存储过程

> ID：14307704
> 
> 赞同：0
> 
> 时间：2013-01-13T20:16:33.203
> 
> 标签：stored-procedures, plsql, toad

没有明显的原因我得到了这个错误：

> *ORA-00942: 表或视图不存在*

调试光标在行中设置：

```
 SELECT AMD.MSG_DATE 
```

从以下存储过程：

```
CREATE OR REPLACE PROCEDURE CTI_MATRIX.AMD_NEEDMSG (v_CRN IN VARCHAR2)
IS

return_flag INTEGER;
row_cnt INTEGER;
number_of_days INTEGER;
var_DATE DATE;

CURSOR ACCNTSEARCH (P_CRN IN VARCHAR2) IS
    SELECT AMD.MSG_DATE    
       FROM TBL_AMD_NEEDMSG AMD
      WHERE AMD.PHONE_NUMBER = P_CRN;

BEGIN

OPEN ACCNTSEARCH(v_CRN);
FETCH ACCNTSEARCH INTO var_DATE;
IF ACCNTSEARCH%NOTFOUND 
THEN
    row_cnt := 0;
ELSE
    row_cnt :=1;
END IF;
CLOSE ACCNTSEARCH;

IF (row_cnt = 0)
THEN
        INSERT INTO TBL_AMD_NEEDMSG (PHONE_NUMBER, MSG_DATE) VALUES (v_CRN , SYSDATE); 
        return_flag := 1;
ELSE
    SELECT SYSDATE-var_DATE INTO number_of_days FROM dual;

     IF (number_of_days>7)
    THEN 
        UPDATE TBL_AMD_NEEDMSG SET MSG_DATE = SYSDATE WHERE PHONE_NUMBER = v_CRN;
        return_flag := 1;
    ELSE
         return_flag := 0;
    END IF;

END IF;    

COMMIT;

dbms_output.put_line('result='||return_flag );    
EXCEPTION
WHEN OTHERS THEN
    ROLLBACK;
    --raise_application_error(-20001,'An error was encountered '||SQLERRM);

END AMD_NEEDMSG;
/ 
```

顺便说一句，存储过程是通过以下调用块调用的：

```
DECLARE 
 V_CRN VARCHAR2(32767);

BEGIN 
 V_CRN := '5457648547567';
 CTI_MATRIX.AMD_NEEDMSG ( V_CRN );
 DBMS_OUTPUT.Put_Line('');

 COMMIT; 
END; 
```

绝对感到困惑，因为表肯定存在并且以下声明：

```
SELECT AMD.MSG_DATE    
       FROM TBL_AMD_NEEDMSG AMD
      WHERE AMD.PHONE_NUMBER =  '85100000000'; 
```

获取没有问题的记录集结果。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:35:03.873

你的方案和 CTI_MATRIX 一样吗？我的意思是你是在 CTI_MATRIX 用户下运行你的选择，因为我看到你在这个方案中创建了存储过程。祝你好运

# java - 泛型类型如何从 spring mobile 传输到 spring mvc 服务器？

> ID：14307713
> 
> 赞同：0
> 
> 时间：2013-01-13T20:17:11.970
> 
> 标签：java, generics, spring-mvc

我在手机上使用 spring mobile 和 spring mvc 3 在 android 应用程序和 java 服务器之间进行通信时遇到问题。

我想将一些通用数据传输到服务器并返回。

在我从客户端发送数据后，应用程序崩溃并出现异常 415：不支持的媒体类型。

我的服务器实现如下所示：

```
@RequestMapping(value = "/restclient/dosomething", method = RequestMethod.POST)
public @ResponseBody Container<A, B, C> getRestTasks(@RequestBody Container<A, B, C> container){

//do something with container

return container;

} 
```

我的客户看起来像这样：

```
public <T> T get(Class<T> gen, String url, Object obj) {

  HttpHeaders requestHeaders = new HttpHeaders();
  requestHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));

  // Create a new RestTemplate instance
  RestTemplate restTemplate = new RestTemplate();
  List<ClientHttpRequestInterceptor> interceptors = new ArrayList<ClientHttpRequestInterceptor>();
  ClientSessionHttpRequestInterceptor interceptor = new ClientSessionHttpRequestInterceptor();

  interceptors.add(interceptor);
  restTemplate.setInterceptors( interceptors);

  restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());

  return gen.cast(restTemplate.postForObject(url, obj, gen));

 } 
```

get 方法是这样调用的：

```
Container<A, B, C> prototype = new Container<X, Y, Z>();

Container<X, Y, Z> container= get(Container.class, url, prototype); 
```

X 是 A 的子类 Y 是 B 的子类 Z 是 C 的子类

我认为在序列化（MappingJacksonHttpMessageConverter）期间类型信息会丢失。

用wireshark跟踪请求我发现X，Y，Z的类型被设置为对象......

我不知道如何解决这个问题......

我将不胜感激任何有用的想法，并为我的英语感到抱歉；-)！

非常感谢，zix

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:21:11.513

这是由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)和作为规范的一部分：

> 如果类型参数是无界的，则将泛型类型中的所有类型参数替换为其边界或 Object。因此，生成的字节码只包含普通的类、接口和方法。

如果您希望为运行时保存类型信息，您可以使用[`TypeLiteral`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/TypeLiteral.html)

# c++ - C ++中的简单取消引用指针问题

> ID：14307716
> 
> 赞同：0
> 
> 时间：2013-01-13T20:17:25.887
> 
> 标签：c++

我在其中使用`qt4`并嵌入了一个 webkit 视图。webkit 对象需要一个`QUrl`包含 url 的对象。我的代码如下所示：

```
QUrl *application = new QUrl();

if (argc < 2) {
  application->setUrl(DEFAULT_PAGE);
}
else {
  application->setUrl(argv[2]);
}
view->load(application);
view->show(); 
```

但是`view->load(application);`在这里失败了，正如`view->load`预期的那样`(const QUrl&)`，我正在通过`(QUrl*&)`

我像这样取消引用应用程序对象：

```
view->load(&application); 
```

但这转化`application`为`(QUrl**)`

我怎样才能转换`application`为`(const QUrl&)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T20:18:32.413

像这样：

```
view->load(*application); 
```

请参阅[取消引用运算符](http://en.wikipedia.org/wiki/Dereference_operator)。

# math - 计算给定方位角、长度和起点的点

> ID：14307721
> 
> 赞同：1
> 
> 时间：2013-01-13T20:18:23.377
> 
> 标签：math, 2d, trigonometry

我正在使用 2d (x,y) 平面。我有相对于北航风格方位的初始点、长度和方位。有人可以帮我计算这条线的终点吗？我看过一些不同的公式，但我的数学不是很好，所以我不确定它们是否正确。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:08:10.923

试试这个

![草图](../Images/a85e5308d6b7c294bbb82732a512d09b.png)

其中`r`是距离和`t`角度（以弧度为单位）。注意`+y`是朝向`North`。

# database - 用户或用户扩展的 Django 所有权外键

> ID：14307726
> 
> 赞同：1
> 
> 时间：2013-01-13T20:18:44.210
> 
> 标签：database, django, django-models, django-authentication, django-users

我对 Django 很陌生，到目前为止，我有一个非常基本的设置，我将一个额外的模型附加到来自 (django.contrib.auth.models) 的默认用户模型。在我的 accounts.models.py 中，我有以下内容：

```
class UserExtension(models.Model):
    user = models.OneToOneField(User, primary_key=True)
    # more code 
```

我还有另一个需要指定所有者的模型。我的问题是：哪种方式更好（更 django-ish、更易读、更高效、更灵活）来表示所有者：

```
class Owned(models.Model):
    # code
    owner = models.ForeignKey(User)
    # more code 
```

或者：

```
class Owned(models.Model)
    # code
    owner = models.ForeignKey(UserExtension)
    # more code 
```

如果您提及这些方法的优缺点，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:57:49.983

我推荐第一个选项。从某种意义上说，用户模型是非平凡模型，拥有的对象在没有用户的情况下不应该存在，但可以在没有 UserExtension 的情况下存在。

还要考虑在 Django 1.5 中，您可以创建自定义用户模型，从而无需 UserExtension 类。有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:57:34.233

考虑使用`UserProfile`任何每个用户的附加信息。查看此[博客](http://www.turnkeylinux.org/blog/django-profile)以了解如何操作。然后，您可以放心，每次创建用户时都会创建 UserProfile 对象。

现在，您是否对 User 或 UserProfile 进行 FK 在逻辑上取决于您在 Owned 中所做的事情。如果 Owned 与用户的数据/字段一起使用，则对用户进行 FK；如果它适用于 UserProfile 的数据，则对 UserProfile 进行 FK。

# menu - onyx.Menu 的 maxHeight 在 enyo 中无法正常工作

> ID：14307729
> 
> 赞同：1
> 
> 时间：2013-01-13T20:19:30.100
> 
> 标签：menu, enyo

嘿，我的 enyo 应用程序中的菜单有问题。基本上， maxHeight 没有做任何事情。我削减了我的代码以强调这个问题：

```
enyo.kind({
name: "App",
fit: true,
components:[
    {kind: "onyx.MenuDecorator", components: [
        {name: "firstMonthContent", content: "Month"},
        {name: "firstMonth", kind: "onyx.Menu", maxHeight: 200, onSelect: "getFirstMonth", components: [
                {value: "0", content: "Jan", classes: "menuItem"},
                {value: "1", content: "Feb", classes: "menuItem"},
                {value: "2", content: "Mar", classes: "menuItem"},
                {value: "3", content: "Apr", classes: "menuItem"},
                {value: "4", content: "May", classes: "menuItem"},
                {value: "5", content: "Jun", classes: "menuItem"},
                {value: "6", content: "Jul", classes: "menuItem"},
                {value: "7", content: "Aug", classes: "menuItem"},
                {value: "8", content: "Sep", classes: "menuItem"},
                {value: "9", content: "Oct", classes: "menuItem"},
                {value: "10", content: "Nov", classes: "menuItem"},
                {value: "11", content: "Dec", classes: "menuItem"},
        ]}
    ]},
],
}); 
```

只是一个基本菜单，除 maxHeight 外，一切正常。问题是，当我将它放入 jsfiddle 时，它​​完全可以正常工作（[http://jsfiddle.net/sqHSL/17/](http://jsfiddle.net/sqHSL/17/)）。我创建了一个新的 enyo 文件，其中只有这个，它仍然会导致这个问题，所以我不知道该怎么做才能修复它。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:52:29.983

无法弄清楚实际原因，但我确实找到了解决方法。

```
 {kind: "onyx.MenuDecorator", maxHeight: "5px", components: [
                    {name: "firstMonthContent", content: "Month"},
                    {name: "firstMonth", kind: "onyx.Menu", onSelect: "getFirstMonth", components: [
                        {name: "menuScroller2", kind: "enyo.Scroller", defaultKind: "onyx.MenuItem", vertical: "auto", classes: "enyo-unselectable", maxHeight: "200px", components: [
                            {value: "0", content: "Jan", classes: "menuItem"},
                            {value: "1", content: "Feb", classes: "menuItem"},
                            {value: "2", content: "Mar", classes: "menuItem"},
                            {value: "3", content: "Apr", classes: "menuItem"},
                            {value: "4", content: "May", classes: "menuItem"},
                            {value: "5", content: "Jun", classes: "menuItem"},
                            {value: "6", content: "Jul", classes: "menuItem"},
                            {value: "7", content: "Aug", classes: "menuItem"},
                            {value: "8", content: "Sep", classes: "menuItem"},
                            {value: "9", content: "Oct", classes: "menuItem"},
                            {value: "10", content: "Nov", classes: "menuItem"},
                            {value: "11", content: "Dec", classes: "menuItem"},
                        ]}
                    ]}
                ]}, 
```

# python - 为什么我的变量没有在我的 python for 循环中定义？

> ID：14307731
> 
> 赞同：0
> 
> 时间：2013-01-13T20:19:39.057
> 
> 标签：python

这是代码：

```
import math
with open("test.stl") as file:
    vertices = [map(float, line.split()[1:4])
                for line in file
                if line.lstrip().startswith('vertex')]

    normals = [map(float, line.split()[2:5])
                for line in file
                if line.lstrip().startswith('facet')]

V=len(vertices)
ordering=[]
N=len(normals)

for i in range(0,N):
    p1=vertices[3*i]
    p2=vertices[3*i+1]
    p3=verticies[3*i+2]
    print p1

    x1=p1[0]
    y1=p1[1]
    z1=p1[2]

    x2=p2[0]
    y2=p2[1]
    z2=p2[2]

    x3=p3[0]
    y3=p3[1]
    z3=p3[2]

    a=[x2-x1,y2-y1,z2-z1]
    b=[x3-x1,y3-y1,z3-z1]

    a1=x2-x1
    a2=y2-y1
    a3=z2-z1
    b1=x3-x1
    b2=y3-y1
    b3=z3-z1

    normal=normals[i]

    cross_vector=[a2*b3-a3*b2,a3*b1-a1*b3,a1*b2-a2*b1]

    if cross_vector==normal:
        ordering.append([i,i+1,i+2])
    else:
        ordering.append([i,i+2,i+1])
print ordering
print cross_vector 
```

如果我尝试在 for 循环中添加 print p1（或任何其他变量，例如 cross_vector），则没有任何错误但没有输出，如果我尝试在 for 循环之外打印它们，则会显示 NameError: name “（变量名）”未定义。因此，如果没有定义这些变量，显然我的排序数组打印为 []（空白）。我该如何改变这一点。变量必须在定义之前声明吗？

编辑：这是运行上述代码时的错误输出：

```
Traceback (most recent call last):
  File "convert.py", line 52, in <module>
    print cross_vector
NameError: name 'cross_vector' is not defined 
```

如上所述，for 循环中定义的任何变量都会发生这种情况，我只是使用 cross_vector 作为示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T20:24:43.230

这一行：

```
vertices = [map(float, line.split()[1:4])
            for line in file
            if line.lstrip().startswith('vertex')] 
```

读取文件中的所有行。在那之后，你在文件的末尾，没有什么要读的了。所以

```
normals = [map(float, line.split()[2:5])
            for line in file
            if line.lstrip().startswith('facet')] 
```

为空 ( `normals == []`)。因此

```
N=len(normals) 
```

设置`N`为 0，意味着这个循环：

```
for i in range(0,N): 
```

永远不会被执行。这就是为什么从内部打印什么都不做的原因——循环没有运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T20:27:17.320

要解决 DSM 诊断的问题，请使用：

```
import math
import itertools
with open("test.stl") as file:
    i1, i2 = itertools.tee(file)
    vertices = [map(float, line.split()[1:4])
                for line in i1
                if line.lstrip().startswith('vertex')]

    normals = [map(float, line.split()[2:5])
                for line in i2
                if line.lstrip().startswith('facet')] 
```

您可能还想尝试删除列表推导，并在整个过程中使用迭代器，以节省大文件的内存。

* * *

### 编辑：

目前，您将整个文件加载到内存中，然后在内存中再创建两个完整大小的列表。相反，您可以以仅根据需要从内存中的文件读取的方式编写它。例如，我们可以用*生成器*推导替换列表推导：

```
import math
import itertools
with open("test.stl") as file:
    i1, i2 = itertools.tee(file)
    vertexIter = (map(float, line.split()[1:4])
                  for line in i1
                  if line.lstrip().startswith('vertex'))

    normalIter = (map(float, line.split()[2:5])
                  for line in i2
                  if line.lstrip().startswith('facet')) 
```

在这里，我们完全避免使用任何内存。

为此，您需要能够从以下位置替换循环：

```
for i in range(0,N):
    p1=vertices[3*i]
    p2=vertices[3*i+1]
    p3=verticies[3*i+2]
    normal = normals[i]

    # processing 
```

对于单个迭代器：

```
for normal, p1, p2, p3 in myMagicIterator:
    # processing 
```

我能想到的一种方法是：

```
myMagicIterator = itertools.izip(
    normalIter,
    itertools.islice(vertexIter, 0, 3),
    itertools.islice(vertexIter, 1, 3),
    itertools.islice(vertexIter, 2, 3)
) 
```

这是迭代器等价于：

```
myNormalList = zip(normals, vertices[0::3], vertices[1::3], vertices[2::3]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T20:25:05.347

在它之外（在 for 循环之前）声明它们，看看会发生什么。即使可以在 for 循环中声明它们，您也可能希望在循环不运行时拥有它们的“默认”值。

如有必要，请尝试发布一个**更小的示例。**

# php - 需要防止 XSS 攻击？

> ID：14307733
> 
> 赞同：0
> 
> 时间：2013-01-13T20:19:49.543
> 
> 标签：php, javascript, xss

我正在开发一个允许用户自定义网页的项目。目前，该用户可以将 HTML 添加到页面。根据我的研究，XSS 攻击似乎通常用于劫持会话/窃取 cookie。我的问题是，如果不允许访问者向这个页面添加任何内容，并且如果自定义页面的用户是唯一可以登录的人，是否有必要防止 XSS 攻击？我的想法是否定的，因为唯一可以窃取的 cookie 是他或她自己的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:27:44.853

Maaaybe，因为听起来你说只有用户 A 可以看到用户 A 提交的 HTML，但你仍然必须小心，因为我们假设用户 A 知道所有数据正在提交到他或她的代表。考虑以下攻击。

1.  诱骗用户 A 访问我的恶意网站。
2.  自动向您的网站提交包含恶意 HTML 的表单。
3.  将用户 A 重定向到您的网站，在那里他们将看到我的恶意 HTML，该 HTML 窃取了他们的 cookie 并将其发送给我。

*如果你实施了阻止我代表用户提交的 CSRF 保护，*也许你会没事，但这仍然有点可怕。*如果用户*需要*能够使用 HTML（但他们通常不需要），请考虑使用[HTML Purifier](http://htmlpurifier.org/)之类的工具，该工具允许已知安全的 HTML，但阻止潜在的恶意 HTML：这样，大多数合法用例可能会得到满足，但即使其他安全系统崩溃，XSS 也几乎是不可能的。它很容易实现，并且为额外的安全级别付出了很小的代价。*

# c# - 实现弹跳球碰撞检测

> ID：14307734
> 
> 赞同：2
> 
> 时间：2013-01-13T20:19:55.967
> 
> 标签：c#, collision-detection

我有一个弹跳球应用程序，我必须扩展它以防止球重叠。

当球与另一个球重叠时，它们应该像在现实生活中一样移开。

![在此处输入图像描述](../Images/09b29b1d5dbf8d4b9b0a2553532e7971.png)

我必须扩展给定的`MoveBall`方法：

```
 private void MoveBall()
    {
        prevX = x;
        prevY = y;
        x += xVelocity;
        y += yVelocity;

        // Is there too closed ball?

        foreach (Ball ball in parentForm.balls)
        {
            distance = Math.Sqrt(Math.Pow((double)(ball.prevX - prevX), 2) + 
                                 Math.Pow((double)(ball.prevY- prevY), 2));
            overlap = ((radius + ball.radius) - distance);// +ball.radius;

            if (ball.id != this.id && 
                ball.id != lastID &&
                overlap > 0)
            {
                lastID = this.id;
                if (xVelocity > 0) // roading right 
                {
                    xVelocity = -xVelocity;
                    x -= xVelocity - ball.xVelocity;
                }
                else if (xVelocity <= 0) // roading left 
                {
                    xVelocity = -xVelocity;
                    x += xVelocity + ball.xVelocity;
                }
                if (yVelocity > 0)
                { // going up
                    yVelocity = -yVelocity;
                    y -= yVelocity - ball.yVelocity;
                }
                else if (yVelocity <= 0) // down
                {
                    yVelocity = -yVelocity;
                    y += yVelocity + ball.yVelocity;
                }

            }
        }

        // ***********************************************
        // ***************** END MY CODE *****************
        if (x > parentForm.Width - 10 - (radius) || x < 0)
        {
            if (x < 0) x = 0;
            if (x > parentForm.Width - 10) x = parentForm.Width - 10 - radius;
            xVelocity = -xVelocity;
        }
        if (y > parentForm.Height - 40 - (radius) || y < 0)
        {
            if (y < 0) y = 0;
            if (y > parentForm.Height - 40) y = parentForm.Height - 40 - (radius);
            yVelocity = -yVelocity;
        }

    } 
```

x,y, xVelocity, yVelocity, radius, prevX, prevY 声明为 int。

重叠，距离加倍。

当 2 个重叠时，它们会卡住。为什么？

不幸的是，我无法上传所有源代码，因为有很多模块。我正在使用 Visual C# Express 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:10:13.483

由于没有明确提出任何问题，我将假设问题“为什么球会粘在一起？”

您只在源代码中显示了一个循环，这还不够；-) 要检查所有可能的冲突，您需要检查 n*(n-1)/2 个可能的冲突。这通常通过两个循环来完成。您必须采取谨慎措施以避免两次处理相同的碰撞。

您的球卡住的原因是您多次处理相同的碰撞。例如两个完全水平碰撞的球：左边的一个球的速度为 5，x 位置为 100。另一个球的位置为 110，速度为 -6。碰撞发生时：

1.  x 设置为 105。
2.  检测到碰撞：x 设置为 104，速度设置为 -5。
3.  另一个 Ball 处理相同的碰撞：
4.  他根据自己的速度移动到位置 104。
5.  碰撞处理：他的速度变为6，位置变为105。

球分别为100和110。并已移至 104 和 105。虽然速度现在指向彼此背离，但后续步骤中的碰撞处理将再次反转它们。所以位置很接近，速度每帧都在改变符号。这些球似乎“粘在一起”。

我希望答案能帮助你理解你的问题。为了更好地实现弹性碰撞（每次碰撞只处理一次），请看这里：[Ball to Ball Collision - Detection and Handling](https://stackoverflow.com/questions/345838/ball-to-ball-collision-detection-and-handling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:43:48.320

当我第一次尝试碰撞检测算法时偶然发现了类似的问题，我将尝试在这里描述我认为的问题。

也许球移动得足够快，以至于在您的代码甚至检测到碰撞之前，它们已经部分地“在”彼此“内部”。当碰撞检测出现并注意到这一点时，它会做它应该做的事情：根据刚刚发生的碰撞的细节改变物体的计划轨迹。问题是，因为这些对象在碰撞检测捕捉到它们之前已经“合并”了，所以它们无法解开，因为碰撞检测再次触发，将它们相互困住。

如果这是问题的根源，那么上面的代码*可能*适用于足够小的速度向量。当然，这不是一个真正的解决方案，但如果它确实适用于非常小的速度，它可能会证实我的假设并且你对如何进行有一些想法。

# vb.net - 如何在第一次执行 vb.net 时重启 PC

> ID：14307736
> 
> 赞同：2
> 
> 时间：2013-01-13T20:20:18.307
> 
> 标签：vb.net

我有一个应用程序在 Windows 中进行了一些更改，其中一些更改需要重新启动 Windows 才能生效。所以，我的问题是：如何仅在第一次执行工具时重新启动计算机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:54:51.547

您可以在注册表中保留重新启动选项。根据您所做的更改类型，使用`HKEY_CURRENT_USER`或`HKEY_LOCAL_MACHINE`\ Software \ your brand \ your program \ 创建一个名为 RestartRequired 的 DWORD 键。

如果您有安装过程，您可以最初创建值为 1 的密钥。然后在关闭并重新启动之前设置为 0。如果你不安装任何东西，你可以检查 RestartRequired=0 是否存在于某个位置的注册表中。如果没有，它将创建此值并开始重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:22:46.467

如果进行了更改，您可以写入文件。然后，如果发生重新启动，您可以检查此文件。

# ruby-on-rails - Rails 3.2.11 第一个测试应用程序——缺少模板

> ID：14307739
> 
> 赞同：0
> 
> 时间：2013-01-13T20:20:35.637
> 
> 标签：ruby-on-rails

我是 ruby​​ on rails Web 编程的新手。今天我尝试建立 Ruby 编程语言和 Rails 框架。Ruby 工作正常，我成功完成了第一个测试类。只有设置我的 Rails 框架才能为我准备一些问题。

我做了一个`test_app`并尝试运行它。

```
rails new test_app
rails s 
```

我意识到路线已被评论`routes.rb`，我取消了评论。我`#root :to => 'welcome#index'`改为`root :to => 'welcome#index'`.

我还意识到我没有该页面的控制器，`welcome/index`我使用`rails g controller Welcome index`.

但它还不行吗？有人有想法吗？

```
Template is missing
Missing template welcome/index, application/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "D:/Davide Giunta/Development/workspace[ruby]/test_app/app/views"

Ruby Version: 1.9.3p368
Gem Version: 1.8.24
Rails Version: 3.2.11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:24:30.570

`rails g controller`只会创建控制器部分，还需要创建对应的视图文件，这种情况下，你要`app/views/welcome/index.html.erb`

使用`scaffold`（仅在学习时）或`resource`用于您的生成器可能会更快。（这些天我通常都是手工制作的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:13:02.897

Jim Deville 的回答是正确的。您需要创建控制器操作的相应视图文件 (action_name.html.erb) 并将其放置到以控制器命名的子目录下的视图目录下。

请在此处查看 Rails 的基础知识[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)。

当您想使用控制器、视图和模型创建动作时，您还应该`rails g scaffold SomeName`使用[http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding](http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding)。

# javascript - 用于 mysql 数据库数据的 html 中的替换字符

> ID：14307746
> 
> 赞同：0
> 
> 时间：2013-01-13T20:21:52.540
> 
> 标签：javascript, html, mysql

我想要做的是将来自 mysql 数据库的数据显示到表单内部。我通过对检索数据的数据库管理器的 ajax 调用获取数据。

*   第一：继承人我的页面的元标记：

    `<meta http-equiv="Content-type" content="text/html; charset=utf-8" />`

    *   第二：我尝试将 ajax 调用中的编码指定为（我使用 jquery）也尝试使用 utf8 作为 scriptCharset 和内容类型字符集：

    ```
    ` $('.btn-group#couleur > button').click(function(){
          $.ajaxSetup({
             async:false,
             scriptCharset: "iso-8859-1",
            contentType:"application/json; charset=iso-8859-1"
          });`
    </li> 
    ```

    *   第三：我的表是用以下 SQL 编码构建的，其他表可以正常工作：`

    ```
    CREATE TABLE IF NOT EXISTS `pays` (
      `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
      `pays` varchar(30) COLLATE latin1_general_ci NOT NULL,
      PRIMARY KEY (`id`)
    ) DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci ;
    ` 
    ```

    *   Final ：这是生成的 html：

    ```
    `<select class="span8" name="pays">
       <option value="11">Chili</option>
       <option value="5">Espagne</option>
       <option value="4">�tats-Unis</option>
       <option value="2">France</option>
       <option value="3">Gr�ce</option>
       <option value="6">Italie</option>
       <option value="9">Nouvelle-Z�lande</option>
       <option value="7">Portugal</option>
    </select>` 
    ```

    任何猜测我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:31:18.407

您来自数据库的编码与 HTML 输出不匹配：您告诉浏览器您编写 UTF-8，但从数据库中获取 latin1/iso-8859-1 并将其直接写入您的 <option> 字段。不行啊

您必须使用像 iconv() 这样的转换函数，这可能在从数据库中获取数据并将其推送到 Ajax 调用的函数中做得最好。由于您没有说出语言是什么，因此您必须自己查找。

注意：为您的 Ajax 调用指定**contentType:"application/json; charset=utf-8"**不会自动转换编码，除非您有一个非常智能的 Ajax 调用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:25:18.247

事实证明，真正的罪魁祸首是从我的 ajax 调用中检索 json 数组时。json 被转储在没有指定任何字符集的空白页面中，默认为 utf8。

我添加了一个标头，以及一些额外的解析来过滤 json，并且我的 json 具有正确的编码。我需要将其设置为 iso-8859-1

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T20:33:58.433

做 JvO 所说的或`utf8_decode('your weird chars')`。不要两者都做！

# android - 使用 Jsoup 解析特定文本

> ID：14307749
> 
> 赞同：0
> 
> 时间：2013-01-13T20:22:15.810
> 
> 标签：android, parsing, html-parsing, jsoup, android-file

`cities.txt`我的res/raw 文件夹中有一个文件。它里面包含以下内容。

```
<div class="state">Alabama</div>
<ul><li><a href="http://auburn.org">auburn</a></li>
<li><a href="http://bham.org">birmingham</a></li> </ul>

<div class="state">Alaska</div>
<ul><li><a href="http://anchorage.org">anchorage</a></li>
<li><a href="http://fairbanks.org">fairbanks</a></li></ul>

<div class="state">Arizona</div>
<ul><li><a href="http://flagstaff.org">flagstaff</a></li>
<li><a href="http://mohave.org">mohave county</a></li></ul> 
```

我想获取**阿拉巴马州**的城市并将其显示在 ListView 上。输出应该是这样的。

**奥本**

**伯明翰**

我当前的代码抓取了所有六个城市并将它们显示在 ListView 上。这是我的代码。

```
package com.example.readfile;

import java.io.InputStream;
import java.util.ArrayList;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import android.app.Activity;
import android.content.res.Resources;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Cities extends Activity {

    ListView listUSCities;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.city_layout);
        listUSCities = (ListView) findViewById(R.id.listcities);

        new MyTask().execute();

    }

    class MyTask extends AsyncTask<Void, Void, ArrayList<String>> {

        ArrayList<String> arr_linkText = new ArrayList<String>();

        @Override
        protected ArrayList<String> doInBackground(Void... params) {

            Document doc;

            try {
                Resources res = getResources();
                InputStream in_s = res.openRawResource(R.raw.cities);

                byte[] b = new byte[in_s.available()];
                in_s.read(b);

                // Parsing using Jsoup starts here
                doc = Jsoup.parse(new String(b));

                // Parsing the states
                Elements links = doc.select("div");
                for (Element link : links) {
                    if (link.text().contains("Alabama")) {

                        // Extracting the cities
                        Elements cities = doc.select("a");
                        for (Element city : cities) {
                            arr_linkText.add(city.text());
                        }

                    }

                }

            } catch (Exception e) {
                // e.printStackTrace();

            }

            return arr_linkText; // << retrun ArrayList from here
        }

        @Override
        protected void onPostExecute(ArrayList<String> result) {
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                    Cities.this, android.R.layout.simple_list_item_1,
                    android.R.id.text1);
            for (String temp_result : result) {

                adapter.add(temp_result);
            }
            listUSCities.setAdapter(adapter);
        }

    }

} 
```

**如何仅提取该指定州的城市？**

**提取城市以优化速度后，如何停止解析文件？**

实际`cities.txt`包含更多信息，我只提供了一个示例。我会感谢你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:28:26.463

```
// Parsing the states
                Elements links = doc.select("div");
                for (Element link : links) {
                    if (link.text().contains("Alabama")) {

        // Extracting the cities
        Elements cities = link.select("a");//<- 'doc' is the whole doc, link is your state.
        for (Element city : cities) {
            arr_linkText.add(city.text());
        }
        break;//breaks off the loop, since you have found what you want.

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:58:18.267

对于 HTML 文档来说，这是一个奇怪的结构。`<div>`仅用于标题，列表本身是关闭的。看到您修剪了实际文档，这可能会或可能不会起作用。您所追求的元素在您之后的`ul`元素中`div`，因此您需要转到下一个兄弟并在那里搜索。`div`这仅在您的和元素之间没有其他元素时才有效`ul`。

```
Elements links = doc.select("div");
for (Element link : links) {
    if (link.text().contains("Alabama")) {
       // Extracting the cities in the list that is next in the DOM
        Elements cities = link.nextElementSibling().select("a");
        for (Element city : cities) {

            arr_linkText.add(city.text());
        }
} 
```

}

# dart - Dart pub publish 在身份验证后给出错误

> ID：14307755
> 
> 赞同：0
> 
> 时间：2013-01-13T20:23:11.240
> 
> 标签：dart, dart-pub

我想把一个小库代码放到 pub.dartlang.org 调用 pub publish 后，它要求我允许访问我的 google 帐户以发送文件。在我允许访问给定的浏览器链接后，它在命令行中给了我这个错误：

```
Waiting for your authorization...
Authorization received, processing...
ProcessException: No such file or directory
Command: curl --dump-header /tmp/temp_dir1_CzMqQG/curl-headers --cacert /home/afsina/apps/dart/dart-sdk/util/pub/curl/ca-certificates.crt --request POST --location --max-redirs 5 --data-binary @- --header accept:  --header user-agent:  --header Content-Type: application/x-www-form-urlencoded; charset=UTF-8 --header content-length: 265 https://accounts.google.com/o/oauth2/token 
```

这是 --verbose 输出

```
Looks great! Are you ready to upload your package (y/n)? y
IO  : Read line: y
FINE: Loading OAuth2 credentials.
IO  : Seeing if file /home/afsina/.pub-cache/credentials.json exists.
IO  : File /home/afsina/.pub-cache/credentials.json does not exist.
FINE: No credentials found at /home/afsina/.pub-cache/credentials.json.
MSG : Pub needs your authorization to upload packages on your behalf.
    | In a web browser, go to https://accounts.google.com/o/oauth2/auth?access_type=offline&approval_prompt=force&response_type=code&client_id=818368855108-8grd2eg9tj9f38os6f1urbcvsq399u8n.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A59097&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email
    | Then click "Allow access".
    | 
    | Waiting for your authorization...
MSG : Authorization received, processing...
FINE: Sending Curl request POST https://accounts.google.com/o/oauth2/token
IO  : Begin create temp directory .
IO  : End create temp directory .
IO  : Spawning curl --dump-header /tmp/temp_dir1_RpLNu6/curl-headers --cacert /home/afsina/apps/dart/dart-sdk/util/pub/curl/ca-certificates.crt --request POST --location --max-redirs 5 --data-binary @- --header accept:  --header user-agent:  --header Content-Type: application/x-www-form-urlencoded; charset=UTF-8 --header content-length: 265 https://accounts.google.com/o/oauth2/token
IO  : Spawning curl --dump-header /tmp/temp_dir1_RpLNu6/curl-headers --cacert /home/afsina/apps/dart/dart-sdk/util/pub/curl/ca-certificates.crt --request POST --location --max-redirs 5 --data-binary @- --header accept:  --header user-agent:  --header Content-Type: application/x-www-form-urlencoded; charset=UTF-8 --header content-length: 265 https://accounts.google.com/o/oauth2/token
ERR : ProcessException: No such file or directory
    |   Command: curl --dump-header /tmp/temp_dir1_RpLNu6/curl-headers --cacert /home/afsina/apps/dart/dart-sdk/util/pub/curl/ca-certificates.crt --request POST --location --max-redirs 5 --data-binary @- --header accept:  --header user-agent:  --header Content-Type: application/x-www-form-urlencoded; charset=UTF-8 --header content-length: 265 https://accounts.google.com/o/oauth2/token 
```

我猜它找不到 ca-certificates.crt 文件，但不知道为什么。

版本信息：Dart SDK 版本 0.2.10.1_r16761 ubuntu linux 12.10 64 位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T22:25:26.033

我的错，这是因为 pub 具有“curl”依赖性。安装 curl 后，我可以发布库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T17:35:21.550

如果您在 Linux 或 Mac 上运行 pub，它将假定 curl 在您的 PATH 中并尝试在没有明确路径的情况下生成它。在 Windows 上，它将使用包含的 curl 二进制文件。我们在这里的假设是大多数 *NIX 用户已经安装了 curl。

无论如何，这种 curl 依赖性应该很快就会消失，但我很高兴你找到了解决方案。

# php - PDO 列何时不存在？

> ID：14307756
> 
> 赞同：1
> 
> 时间：2013-01-13T20:23:11.797
> 
> 标签：php, sql, pdo

我最近将我的网站上传到了我的托管服务提供商，但我遇到了一个非常奇怪的错误。

我已将与在本地计算机上使用的完全相同的数据库导入到 Web 主机，它告诉我：

> 警告：PDOStatement::execute(): SQLSTATE[42S22]: 未找到列：1054 /home/users/xxxxx/html/caketopper.co.uk/public_html/models 中的“字段列表”中的未知列“toppers_types.urlPath” /GalleryModel.php 第 32 行

奇怪的是，该列确实存在，而且我 100% 连接到正确的数据库。

这是有关的SQL：

```
SELECT toppers.name, toppers.urlName, md.description, toppers_images.thumbSrc,
toppers_types.urlPath
FROM toppers_images, toppers_types, toppers
LEFT JOIN meta_descriptions AS md ON md.topperId = toppers.id
WHERE toppers_images.topperId = toppers.id
AND toppers_types.id = toppers.typeId
AND isPrimary = 1 
```

如果我将该 SQL 放入 webhost 上的 phpmyadmin 中，查询将按预期运行并得到结果。

我正在使用 PDO 执行查询：

```
$r = $this->db->prepare($SQL) ;
$r->execute($PDOParams) ;
return $r->fetchAll(PDO::FETCH_OBJ) ; 
```

有没有人遇到过这样的异常？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:07:13.557

Stackoverflow 上有很多此类问题，几乎所有问题都以相同的方式结束：
- 哦，我忘了更新实际的数据库（重命名字段，保存正确的文件等）

字母大小写也可能存在问题（Unix 版本区分大小写，而 Windows 版本不区分大小写）。
无论如何 - 只是测试一切。

使用 PDO 运行此查询并查看结果。

```
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = 'toppers_types' 
```

如果字段不存在 - 检查服务器凭据，
如果存在 - 将其名称复制粘贴到查询中

# powershell - powershell wmi集群资源私有属性

> ID：14307757
> 
> 赞同：0
> 
> 时间：2013-01-13T20:23:13.677
> 
> 标签：powershell, wmi

我对使用 PURE WMI（而不是本机命令行开关）来实现这一目标很感兴趣。

$test=gwmi -q "Select * from MSCluster_resource" -namespace root\mscluster -computername mycluster -Authentication PacketPrivacy

假设我根据索引选择资源

$test[32].privateproperties

所有资源都已获取；设置，我已通过 wbemtest 确认了这一点。但它们是 MSCluster_Property 的一部分。

我如何通过 wmi 设置这些，因为 .privateproperties.put() 不是可用的方法。

我已阅读此内容，但不确定如何将其应用于 powershell。 [http://blogs.msdn.com/b/clustering/archive/2010/07/14/10037894.aspx](http://blogs.msdn.com/b/clustering/archive/2010/07/14/10037894.aspx)

再一次，不要寻找本机命令行开关，也不要使用 mscluster com。我已经用尽了谷歌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:33:52.517

未经测试，但如果您只是分配新值怎么办？还是使用 SetPropertyValue 方法？

```
$test[32].PrivateProperties.SetPropertyValue(string propertyName, System.Object propertyValue) 
```

# asp.net - 实体数据源值检索

> ID：14307758
> 
> 赞同：0
> 
> 时间：2013-01-13T20:23:16.180
> 
> 标签：asp.net, entitydatasource

我在标记中定义了一个实体数据源

```
<asp:EntityDataSource ID="edsFV" runat="server"></asp:EntityDataSource>
            <asp:EntityDataSource ID="eds_fv_singleuserprofile" runat="server"
                    ConnectionString="name=webEntities" DefaultContainerName="webEntities"
                    EnableFlattening="False" EnableUpdate="True" EntitySetName="userprofiles"
                    Where="it.ASPUserId = @SelectedValue" >
                    <WhereParameters>
                        <asp:Parameter DefaultValue="20" Name="SelectedValue" Type="Int32" />
                    </WhereParameters>
            </asp:EntityDataSource> 
```

它要求有关下拉选择的信息。它返回具有 5 个属性的单个项目。我正在尝试访问属性之一，“FullName”以在更新面板中的字段集的图例中使用，此下拉列表正在更改数据，如下所示；

```
<asp:UpdatePanel ID="udpUserProfile" runat="server" >
            <ContentTemplate>
                <fieldset id="singleuserprofile" >
                    <legend>Profile details for <%# I want to databind the "FullName" property value here%></legend>
                       "other code"
                </fieldset>
            </ContentTemplate>
 </asp:UpdatePanel> 
```

我似乎找不到合适的方法来做到这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:08:53.123

虽然我没有找到任何明确说明的内容，但据我了解，数据源仅用于与数据绑定控件交互。从[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms228089%28v=vs.100%29.aspx "使用数据源控件绑定到数据")：

> 数据源控件极大地扩展了 GridView、FormView 和 DetailsView 控件等数据绑定控件的功能。通过协同工作，数据源控件和数据绑定控件使您可以检索、修改、分页、排序和过滤来自不同数据源的数据，而只需很少或根本不需要代码。

您可能应该使用 Entity 查询获取`fieldset`标签的数据，并仅使用`entitydatasource`您的`DetailsView`。

据我所知，您正在使用带有 AutoPostBack 的 DropDownList 来选择`DetailsView`. 如果正如您的评论所暗示的那样，`DetailsView`当您执行部分回发时 没有更新，您应该`.DataBind()`在控件上调用 a 。此外，在这种情况下，使用 a`ControlParameter`而不是 basic`Parameter`可能更合适。

# java - 将 TXT 中的整数升序到数组

> ID：14307760
> 
> 赞同：0
> 
> 时间：2013-01-13T20:23:24.673
> 
> 标签：java, arrays, inputstream, combinatorics, capacity-planning

我的问题是将包含无符号整数的巨大文本文件（UTF-8 -1byte（ANSI））在升序中没有重复项放入数组中。快速地！所以我打算这样做：

```
while(scan.hasNextInt()) x.add(scan.nextInt()); 
```

但是，无论我使用 ArrayList、Vectors 还是包含数百万个整数的文件的普通数组，明智的做法是确定避免以后增加数组大小所需的最大容量。

使用 File.length() 我将获得文件中的位数 + 换行符。

在最坏的情况下，它会从 0 开始，并且在每一行中只增加 1。
我认为最大值。容量可以使用组合数学计算，但我处于死胡同。较小的数字不会被零（002）填充的事实不知何故让我失望。

考虑到第一个 Int 的大小，我认为一个也可以更接近实际数量。

所以我最重要的问题是计算所需的近似 [in O(1)] 最大容量。

此外，考虑到这个相当独特的问题，我问我自己 scan.hasNextInt() 和 scan.nextInt() 是否是最快的，如果通过线程并行化可以更快地加快进程（考虑到从硬盘读取的特性可能不是）。

问候光环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:39:57.783

假设只有一个字节用于分隔两个数字（例如'\n'），我们有

*   10 个数字，1 个数字 -> 20 个字节
*   90 个 2 位数字 -> 270 字节
*   900 个 3 位数字 -> 3600 字节
*   ...你得到了模式

如果您的文件大小现在是 1000 字节，那么您可以拥有的最大值是 10 个 1 位，90 个两位数，剩下 710 个字节用于 3 位数字。710/4 = 177.5，最多有 10+90+177 = 277 个数字。

# android - android上的sqlite错误消息

> ID：14307764
> 
> 赞同：0
> 
> 时间：2013-01-13T20:24:03.657
> 
> 标签：android, sqlite, android-sqlite

我在我的应用程序上使用 SQLite，我正在创建一些表，这里是代码：

```
 db.execSQL("CREATE TABLE IF NOT EXISTS " + GAMES_HISTORY_TABLE+ " (" +
        GAME_KEY + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
        RIGHT_DRILLS + "INTEGER NOT NULL, " + 
        NUM_OF_DRILLS + "INTEGER NOT NULL, " + 
        GAME_DATE + "DATE);"
   ); 
```

这是添加记录的代码：

```
public long addScore(int totalDrills, int numberOfRightDrills) {
    ContentValues cv = new ContentValues();
    cv.put(RIGHT_DRILLS, numberOfRightDrills);
    cv.put(NUM_OF_DRILLS, totalDrills);
    Date date = new Date();
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
    cv.put(GAME_DATE, dateFormat.format(date));
    return dataBase.insert(GAMES_HISTORY_TABLE, null, cv); 
```

}

这是常量变量声明（在我的代码开头）：

```
private static final String GAMES_HISTORY_TABLE = "scoers";
private static final String GAME_KEY = "game_id";
private static final String RIGHT_DRILLS = "number_of_rihgt_drill";
private static final String NUM_OF_DRILLS = "total_drill";
private static final String GAME_DATE = "game_date"; 
```

我在 logCat 中得到了这个异常：

```
01-13 20:13:45.485: D/szipinf(658): Initializing inflate state
01-13 20:13:47.375: D/szipinf(658): Initializing inflate state
01-13 20:13:47.485: I/Database(658): sqlite returned: error code = 1, msg = table scoers has no column named game_date
01-13 20:13:47.495: E/Database(658): Error inserting game_date=13-01-2013 20:13:47 total_drill=4 number_of_rihgt_drill=0
01-13 20:13:47.495: E/Database(658): android.database.sqlite.SQLiteException: table scoers has no column named game_date: , while compiling: INSERT INTO scoers(game_date, total_drill, number_of_rihgt_drill) VALUES(?, ?, ?);
01-13 20:13:47.495: E/Database(658):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
01-13 20:13:47.495: E/Database(658):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
01-13 20:13:47.495: E/Database(658):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
01-13 20:13:47.495: E/Database(658):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
01-13 20:13:47.495: E/Database(658):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
01-13 20:13:47.495: E/Database(658):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
01-13 20:13:47.495: E/Database(658):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1569)
01-13 20:13:47.495: E/Database(658):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
01-13 20:13:47.495: E/Database(658):    at com.simplemathgame.GameDB.addScore(GameDB.java:83)
01-13 20:13:47.495: E/Database(658):    at com.simplemathgame.Results.onCreate(Results.java:99)
01-13 20:13:47.495: E/Database(658):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-13 20:13:47.495: E/Database(658):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-13 20:13:47.495: E/Database(658):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-13 20:13:47.495: E/Database(658):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-13 20:13:47.495: E/Database(658):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-13 20:13:47.495: E/Database(658):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-13 20:13:47.495: E/Database(658):    at android.os.Looper.loop(Looper.java:123)
01-13 20:13:47.495: E/Database(658):    at android.app.ActivityThread.main(ActivityThread.java:3683)
01-13 20:13:47.495: E/Database(658):    at java.lang.reflect.Method.invokeNative(Native Method)
01-13 20:13:47.495: E/Database(658):    at java.lang.reflect.Method.invoke(Method.java:507)
01-13 20:13:47.495: E/Database(658):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-13 20:13:47.495: E/Database(658):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-13 20:13:47.495: E/Database(658):    at dalvik.system.NativeStart.main(Native Method)
01-13 20:13:47.495: I/Database(658): sqlite returned: error code = 1, msg = no such column: sent
01-13 20:13:47.495: W/System.err(658): android.database.sqlite.SQLiteException: no such column: sent: , while compiling: SELECT sent FROM feedback
01-13 20:13:47.495: W/System.err(658):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1235)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1189)
01-13 20:13:47.506: W/System.err(658):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271)
01-13 20:13:47.506: W/System.err(658):  at com.simplemathgame.GameDB.isFeedbackGiven(GameDB.java:117)
01-13 20:13:47.506: W/System.err(658):  at com.simplemathgame.Results.onCreate(Results.java:100)
01-13 20:13:47.506: W/System.err(658):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-13 20:13:47.506: W/System.err(658):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-13 20:13:47.506: W/System.err(658):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-13 20:13:47.506: W/System.err(658):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-13 20:13:47.515: W/System.err(658):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-13 20:13:47.515: W/System.err(658):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-13 20:13:47.515: W/System.err(658):  at android.os.Looper.loop(Looper.java:123)
01-13 20:13:47.515: W/System.err(658):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-13 20:13:47.515: W/System.err(658):  at java.lang.reflect.Method.invokeNative(Native Method)
01-13 20:13:47.515: W/System.err(658):  at java.lang.reflect.Method.invoke(Method.java:507)
01-13 20:13:47.515: W/System.err(658):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-13 20:13:47.515: W/System.err(658):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-13 20:13:47.515: W/System.err(658):  at dalvik.system.NativeStart.main(Native Method)
01-13 20:13:47.525: W/db(658): problem 
```

我试图更改字段的名称和表的名称。我在这个数据库中有另一个表。

我做错什么了？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T20:28:24.123

您需要在表架构中添加三个空格，然后重新构建它：

```
db.execSQL("CREATE TABLE IF NOT EXISTS " + GAMES_HISTORY_TABLE+ " (" +
    GAME_KEY + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
    RIGHT_DRILLS + " INTEGER NOT NULL, " +  /* Add a space before "INTEGER... */
    NUM_OF_DRILLS + " INTEGER NOT NULL, " + /* Add a space before "INTEGER... */ 
    GAME_DATE + " DATE);"                   /* Add a space before "DATE... */
); 
```

（仅供参考，`GAMES_HISTORY_TABLE`显然是`"scoers"`，我认为这是错字。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:30:42.807

不确定这是否是唯一的错误，但是在创建表时常量之后但在恢复字符串之前缺少空格：

```
RIGHT_DRILLS + "INTEGER NOT NULL, " + 
NUM_OF_DRILLS + "INTEGER NOT NULL, " + 
GAME_DATE + "DATE);" 
```

应该：

```
RIGHT_DRILLS + " INTEGER NOT NULL, " + 
NUM_OF_DRILLS + " INTEGER NOT NULL, " + 
GAME_DATE + " DATE);" 
```

# c# - 洗牌列表失去与 mainpage.xaml 的连接

> ID：14307765
> 
> 赞同：2
> 
> 时间：2013-01-13T20:24:07.810
> 
> 标签：c#, windows-phone-7

我的应用程序创建了一个包含 20 个按钮的列表，这些按钮位于 mainpage.xaml：

```
private List<Button> CreateList()
    {
        for (int i = 0; i <= 19; i++)
        {
            string name = string.Format("button{0}", i+1);

            Button buttt = new Button();
            buttt.Name = name;
            buttt.Content = i + 1;
            buttt.Height = 72;
            buttt.HorizontalAlignment = HorizontalAlignment.Left;
            buttt.VerticalAlignment = VerticalAlignment.Top;
            buttt.Width = 88;
            buttt.Click += new RoutedEventHandler(this.button_Click);
            GameGrid.Children.Add(buttt);

            myList.Insert(i, buttt);
        } 
```

现在，如果我尝试打乱这个列表，它似乎失去了与页面上实际按钮的连接。

```
private void Shuffle(List<Button> list)
    {
        //list[1].Content = "DING!";

        Random rand = new Random();
        int n = list.Count;
        while (n > 1)
        {
            n--;
            int k = rand.Next(n + 1);
            Button value = list[k];
            list[k] = list[n];
            list[n] = value;
        }
    } 
```

请注意，如果我取消注释`//list[1].Content = "DING!";`并注释掉此方法的其余部分，则按钮的内容将在屏幕上更改。所以我假设链接在洗牌过程中被破坏了。

所以我的问题是，当我运行此代码时，会显示按钮，但仍按 1 到 20 的顺序排列，而不是像我预期的那样随机洗牌。

谢谢您的帮助！

***编辑：这是克里斯建议的完整代码：***

```
private List<Button> CreateList(List<Marginz> myMargin)
    {
        for (int i = 0; i <= 19; i++)
        {
            string name = string.Format("button{0}", i+1);

            Button buttt = new Button();
            buttt.Name = name;
            buttt.Content = i + 1;
            buttt.Height = 72;
            buttt.HorizontalAlignment = HorizontalAlignment.Left;
            buttt.VerticalAlignment = VerticalAlignment.Top;
            buttt.Width = 88;
            buttt.Click += new RoutedEventHandler(this.button_Click);
            Thickness myThickness = new Thickness();
            myThickness.Left = myMargin[i].left;
            myThickness.Top = myMargin[i].top;
            myThickness.Right = myMargin[i].right;
            myThickness.Bottom = myMargin[1].bottom;
            buttt.Margin = myThickness;
            //GameGrid.Children.Add(buttt);

            myList.Insert(i, buttt);
        }

        return myList;
    } 
```

这就是它的名字：

```
private void EasyButton_Click(object sender, RoutedEventArgs e)
    {
        DifficultyCanvas.Visibility = System.Windows.Visibility.Collapsed;
        ReadyCanvas.Visibility = System.Windows.Visibility.Visible;

        //set difficulty attributes
        difficulty = "Easy";

        var myMarg = CreateMarginList(marg);
        var buttons = CreateList(myMarg);
        Shuffle(buttons);

        foreach (var button in buttons)
        {
            GameGrid.Children.Add(button);
        }
    } 
```

**编辑以获得更多解释：** 关于边距。我创建了一个名为 Marginz 的类：

```
public class Marginz
    {
        public Marginz()
        {
            //Constructor
        }
        public int left { get; set; }
        public int top { get; set; }
        public int right { get; set; }
        public int bottom { get; set; }
    } 
```

“marg”是这种类型的列表：

```
List<Marginz> marg = new List<Marginz>(20); 
```

CreateMarginList() 这样做：

```
public List<Marginz> CreateMarginList(List<Marginz> myMarg)
    {
        Marginz one = new Marginz();
        one.left = 28;
        one.top = 186;
        one.right = 0;
        one.bottom = 0;
        myMarg.Insert(0, one);

        Marginz two = new Marginz();
        two.left = 133;
        two.top = 186;
        two.right = 0;
        two.bottom = 0;
        myMarg.Insert(1, two); 
```

等一直到二十。那么`return myMarg;` 每个 Button 都有一个唯一的边距，将其放置在 Grid 中。

![这就是我现在所拥有的：](../Images/f31edcb636113475bd48f874edbb38bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:37:17.757

洗牌 myList 集合不会改变它们在页面上出现的顺序。这取决于您在 CreateList 方法中将它们添加到 GameGrid 的顺序。您可以做的是全部创建它们，随机播放列表，*然后*将它们添加到子列表中。

所以删除`GameGrid.Children.Add`调用`CreateList`（注意，我有点调整了那里的代码，我假设你没有发布完整的代码）

```
private List<Button> CreateList()
{
    var myList = new List<Button>();

    for (int i = 0; i <= 19; i++)
    {
        string name = string.Format("button{0}", i+1);

        Button buttt = new Button();
        buttt.Name = name;
        buttt.Content = i + 1;
        buttt.Height = 72;
        buttt.HorizontalAlignment = HorizontalAlignment.Left;
        buttt.VerticalAlignment = VerticalAlignment.Top;
        buttt.Width = 88;
        buttt.Click += new RoutedEventHandler(this.button_Click);

        myList.Add(buttt);
    }

    return myList;
} 
```

执行随机播放，然后添加它们：

```
var buttons = CreateList();
Shuffle(buttons);

foreach(var button in buttons)
{
    GameGrid.Children.Add(button);
} 
```

编辑：从您发布的完整代码来看，问题是因为所有按钮都在一个`Grid`控件中，它们的位置由它们所在的行/列*和*它们`Margin`（控制它们在该单元格中的位置）决定。如果您没有明确定义它们的行/列，而您没有，那么它们被假定在第一行/列中。在这种情况下，它们的边距（未洗牌）决定了它们的定位。

我认为在这种情况下，要么用单元格构建网格，要么可能最简单：`myMargin`在创建列表之前简单地打乱列表！这些按钮将按顺序添加，但它们将被赋予随机位置。

```
var myMargin = CreateMargins(); //wherever that's done
Shuffle(myMargin); //you'll have to change the signature to work against List<Thickness> instead
var buttons = CreateList(myMargin); //add back the GameGrid.Children.Add call
//notice, no longer a call to shuffle the buttons 
```

可能不是*最好*的解决方案，但我认为这会给您带来与您想要的相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:49:01.360

你的逻辑有缺陷。您将按钮放在网格中，并用边距定位它们。由于您使用边距来定位它们，因此无论您以何种顺序将它们添加到网格中，它们的位置都不会改变。

几种方法可以做你想做的事情：

*   在按钮列表被洗牌**后**应用边距
*   使用 Stackpanel 而不是网格（并删除边距）
*   按预期使用网格：创建一些行，并将每个按钮分配给一行

    ```
    <Grid>
        <Grid.RowDefinitions>
            <Grid.RowDefinition />
            <Grid.RowDefinition />
            <Grid.RowDefinition />
            etc...
        </Grid.RowDefinitions>
    <Grid> 
    ```

    然后在后面的代码中，设置每个按钮的行：

    ```
    Grid.SetRow(myButton, 1); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T22:06:54.507

您可以只打乱 中按钮的索引`UIElementCollection`，但您可能必须切换网格类型，因为在您的代码中明确设置所有边距将不允许它打乱。

您是否能够使用`StackPanel`或布局您的控件？`WrapPanel``UniformGrid`

示例基于`UniformGrid`（除非您在控件上设置了边距，否则所有网格都相同）。

我知道这不是您当前问题的答案，但它可能会为您指明正确的方向。

```
private void Shuffle(UIElementCollection list)
{
    Random rand = new Random();
    int n = list.Count;
    while (n > 1)
    {
        n--;
        int k = rand.Next(n + 1);
        Button value = list.OfType<Button>().ElementAt(n);
        list.Remove(value);
        list.Insert(k, value);
    }
} 
```

例子：

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="199" Width="206" Name="UI">
    <Grid>
        <UniformGrid Name="GameGrid" Margin="0,48,0,0" Height="112" VerticalAlignment="Top">
            <Button Content="Button 1" />
            <Button Content="Button 2" />
            <Button Content="Button 3" />
            <Button Content="Button 4" />
            <Button Content="Button 5" />
        </UniformGrid>
        <Button Content="Shuffle" Height="23" HorizontalAlignment="Left" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Shuffle(GameGrid.Children);
    }

    private void Shuffle(UIElementCollection list)
    {
        Random rand = new Random();
        int n = list.Count;
        while (n > 1)
        {
            n--;
            int k = rand.Next(n + 1);
            Button value = list.OfType<Button>().ElementAt(n);
            list.Remove(value);
            list.Insert(k, value);
        }
    }
} 
```

# c# - 直接在类上读取属性值（使用此）

> ID：14307767
> 
> 赞同：0
> 
> 时间：2013-01-13T20:24:10.990
> 
> 标签：c#, .net, reflection

我有这样的课程：（我简化了课程以便解释）

```
public class CRecherche
{

    bool m_TestA;
    bool m_TestB;
    bool m_TestC;

    public CRecherche()
    {

    }

    public myFonction()
    { 
        bool bValue = (bool)typeof(CRecherche).GetProperty("m_Test"+"A").GetValue(this,null);
    }
} 
```

我想使用该名称阅读 m_TestA、m_TestB 和 m_TestC。

我努力了 ：

```
(bool)typeof(CRecherche).GetProperty("m_Test"+"A").GetValue(this,null); 
```

但是没有成功。

有人有想法吗？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:30:48.423

这里发生了一些对你不利的事情。首先，您的 variables`m_TestA`等不是*properties*，它们是字段。因此`GetProperty()`，您应该尝试使用，而不是使用`GetField()`：

```
return (bool)typeof(CRecherche)
    .GetField("m_TestA", BindingFlags.NonPublic | BindingFlags.Instance)
    .GetValue(this); 
```

第二个是默认情况下它们具有*私有*可见性，因此您必须通过要求它查找非公共和实例字段来帮助反射器，就像我在上面所做的那样。

# objective-c - 无法访问 firstViewController Var。在第一个和第二个 ViewController 之间交换之后，来自 appdelegate。在那种幻境中

> ID：14307774
> 
> 赞同：1
> 
> 时间：2013-01-13T20:24:43.200
> 
> 标签：objective-c, xcode, viewcontroller, appdelegate

目前我确实有两个 ViewControllers，单独的文件！首先作为主界面，其次作为设置面板！在第一个视图中，我有一个按钮，上面有一个标签。

任务是，当我按下主页按钮时，将* *[onOff.text] (UILabel) * 从 1 更改为 0！*实际上它非常有效！直到，我转到第二个视图（“进行一些更改”）并返回主视图。在此操作（使用 presentViewController）之后，appDelegate 停止影响标签:(

所以***self.viewcontroller.onOff.text=@"O";*** 停止赋值！我将这行代码放入此方法“applicationWillResignActive”中，正如我已经提到的，它完全有效，直到我按下“设置”按钮转到第二个视图，然后“返回”到第一个视图。

实际上我尝试了一些卸载视图的操作，我得到一个提示，当我按下主页按钮调用 applicationWillResignActive 时，它​​会加载第二个视图！在冷杉之上，主要的......

对那种幻影情况有任何帮助会很棒

# git - 提交时修改 XML 文件

> ID：14307778
> 
> 赞同：1
> 
> 时间：2013-01-13T20:25:21.350
> 
> 标签：git

我知道 eclipse 和 netbeans 不支持 git hooks。在提交之前是否有另一种方法可以自动更改 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:09:55.263

您可以尝试声明一个[“干净”脚本](https://stackoverflow.com/questions/2154948/how-can-i-track-system-specific-config-files-in-a-repo-project/2155355#2155355)（一个[gitattribute 过滤器驱动程序](http://git-scm.com/docs/gitattributes)，[在 ProGit 中](http://progit.org/book/ch7-2.html)描述）

![清洁污迹](../Images/e3f1174b06bd55bd4e3f6479d4f76198.png)

这将允许您更改您正在提交的内容。

# javascript - 我的标题标签由于字符串中的 ' 和 " 而分解，我该如何在 javascript 中修复它？

> ID：14307779
> 
> 赞同：0
> 
> 时间：2013-01-13T20:25:29.590
> 
> 标签：javascript, jquery

我的javascript中有这行代码（它的jquery）

```
$('#myobject').append("<img width='225' title='"+addslashes(post.title)+"' src='"+urlvisual+"' />"); 
```

addlashes 函数是从这里关于转义引号的另一篇文章中提取的

```
function addslashes( str ) {
    return (str+'').replace(/([\\"'])/g, "\\$1").replace(/\0/g, "\\0");
} 
```

但结果仍然打破了标题属性，有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T20:30:22.433

因为无论如何我们都在使用 jQuery，所以我们可以使用它们的元素构建语法：

```
$('<img/>', {
    width: 255,
    title: post.title,
    src: urlvisual
}).appendTo('#myobject'); 
```

更简洁的代码，无需转义:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:31:06.543

您必须使用 HTML 实体而不是反斜杠来转义字符串。

双引号：`" => &quot;`

单引号：`' => &#39;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T20:30:35.220

此功能应正常工作：

```
function addslashes( str ) {
    return (str+'').replace(/'/g, "\\'");
} 
```

# c# - ASP.NET MVC 4 - Ajax 表单 - 将值传递给控制器

> ID：14307781
> 
> 赞同：0
> 
> 时间：2013-01-13T20:25:36.953
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4

这是决赛，有效！感谢破坏者鲍勃。

我只需要改变这个：

```
<script>
$(function () {
    $('#formSearch').ajaxForm(function (result) {
        $('#divArefresh').fadeOut('slow').fadeIn("slow").load('/Feed/Search');
    });
});
</script> 
```

进入这个：

```
<script>
$(function () {
    $('#formSearch').ajaxForm(function (result) {
        $('#divArefresh').fadeOut('slow').fadeIn("slow").load(result);
    });
});
</script> 
```

编辑：我认为这是：

```
// In /Feed/Index.cshtml
@using (Html.BeginForm("Search", "Feed", FormMethod.Post, new { id = "formSearch" }))
{ 
        <input type="text" id="search" name="search"  />
        <input type="submit" value="save"/>
}
<script>
$(function () {
    $('#formSearch').ajaxForm(function (result) {
        $('#divArefresh').fadeOut('slow').fadeIn("slow").load('/Feed/Search');
    });
});
</script> 
```

有了这个 ：

```
 // In Controller/Feed/
 public ActionResult Search(string search)
    {
         if (!String.IsNullOrEmpty(search))
                return Content("Variable : " + search);
            else
                return Content(":(");
        return Content("Pas ajax :(");

    } 
```

会做的伎俩，但事实并非如此。它总是显示“:(”。我真的迷路了。

////////////////////

我只是想知道怎么做这个。我尝试了很多方法，但我真的无法做到。很容易理解我想要做什么：

我有一个 div，其中包含我要显示的所有信息：

```
<div id="divArefresh">
    <div id="accordion-container">        
    @foreach (var i in @ViewBag.feedsItem)
    {
     ...  Things ....
     }
    </div>
</div> 
```

我想做一个«搜索功能»，像这样：

```
<!-- le champs de recherche -->
@{var options2 = new AjaxOptions()
{
    Url = Url.Action("Search", "Feed"),
    LoadingElementDuration = 200000,
    OnComplete = "divSearch",
    HttpMethod = "GET"
};  
using (Ajax.BeginForm(options2)) 
{
        <input type="text" name="search" id="search" placeholder="Votre recherche"/>
        <input type="submit" id="submit" value="chercher"/>
}
} 
```

这是我的 « divSearch »

```
function divSearch() {
    $('#divArefresh').fadeOut('slow').fadeIn("slow").load('/Feed/Search');
} 
```

当我提交一些东西时，我的操作很顺利：

```
public ActionResult Search(string search)
    {
        Users user = db.UserProfiles.Find(Session["id"]);
        if (Request.IsAjaxRequest())
        {
            var wordSearched = Request["search"].ToString(); --> NULL
            var feeds = (from u in db.Feed
                         where u.UsersId == user.UsersId
                         select u).ToList(); --> FINE
            var feedsItems = from u in db.FeedsItem
                             where u.Title.Equals(wordSearched)
                             select u;
            ViewBag.feedsItem = feedsItems.ToList();
            return PartialView("Search", feeds);
        }
        return PartialView("Search");

    } 
```

但是这个 ：

```
Request["search"].ToString(); 
```

当我尝试使用调试器时始终为空。甚至 « search » 变量也是空的

如果有人对如何使这项工作有想法......

开23

# java - 在 Mac 上运行带有条件参数的 Java 应用程序

> ID：14307783
> 
> 赞同：0
> 
> 时间：2013-01-13T20:26:01.223
> 
> 标签：java, macos

我编写了一个需要连接到外部 32 位库的 java 应用程序。

在我的 iMac (Intel) 上，我需要使用 -d32 选项启动 jar 文件。

在我的 Powerbook G4 上，它必须在没有 -d32 选项的情况下启动。

我想创建一个在两台 Mac 上运行的 jar 文件包。所以有一些条件需要测试来决定使用或不使用 -d32 选项

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:46:39.657

我终于找到了我的问题的答案：首先，通过双击打开应用程序时，不考虑“-d32”选项。因此在运行 jvm 之前不再需要测试架构。

其实很简单：在 Intel Mac 上，一旦创建了应用程序，打开应用程序的属性，选择“以 32 位模式打开”。就这样 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:03:38.427

查看[System.getProperties()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties)。具体来说`os.arch`。您可以[在此处](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties%28%29)获取支持的密钥列表。

```
String arch = System.getProperty("os.arch");
System.out.println(arch); 
```

在我的系统上，这将输出“amd64”。一旦你知道了拱门，你就可以拆分你的逻辑。如果您使用 Java 7，那么我将打开字符串：

```
String arch = System.getProperty("os.arch");
System.out.println(arch);
switch(arch){
    case "amd64":
         //do logic
         break;
    default:
         //do default logic
         break;
} 
```

# c++ - 等待线程关闭时提高互斥量抛出错误

> ID：14307785
> 
> 赞同：1
> 
> 时间：2013-01-13T20:26:13.197
> 
> 标签：c++, boost, boost-thread

有没有办法让 boost mutex 在任何等待线程上抛出异常？我有一个问题，其中一个对象被删除，但由于软件库的性质，线程可能仍在对象内的互斥锁处等待，并且当互斥锁关闭时抛出一个相当讨厌的异常。我想我可以使用多个互斥计数器，但这可能会导致性能下降。我想要发生的是互斥体在关闭时在等待的任何线程上抛出异常，以便展开堆栈。有没有一种独立于平台的干净方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T23:51:58.763

这种在销毁时抛出的互斥锁的概念似乎是无害的，但是当需要实现它时，它揭示了您对互斥锁的思考方式的缺陷。

让我们看一些示例代码，以了解这种方法的缺陷。

**注意：**请不要***使用***下面的代码，它只会带来无尽的折磨和调试同步问题。

```
class throwing_mutex
{
private:
    mutex m_;
    condition_variable cv_;
    bool destroyed_;
    bool locked_;

public:
    void lock()
    {
        std::unique_lock<std::mutex> lock(m_);
        cv_.wait(lock, [&]() {return !locked_ || destroyed_;}); // Wait until the mutex is unlocked or destroyed.
        if (destroyed_) throw runtime_error("The exception was terminated while waiting.");
        locked_ = true;
    }

    void unlock()
    {
        std::unique_lock<std::mutex> lock(m_);
        locked_ = false;
        lock.unlock();

        cv_.notify_one();
    }

    ~throwing_mutex()
    {
        std::unique_lock<std::mutex> lock(m_);
        destroyed_ = true;
        lock.unlock();

        cv_.notify_all(); // Let all waiters know we are dead.
    }
}; 
```

销毁后，等待的每个人`throwing_mutex`都会抛出异常。但这开辟了一个相当大的竞争条件。

我们已经处理了每个人都在等待互斥锁的情况——他们会安全地抛出。我们没有处理的是有人正在打电话`lock()`但还没有到的情况。当他们终于到了可以调用的地步时`lock()`，`throwing_mutex`已经被销毁了。我们刚刚通过有缺陷的方法引入的错误称为[use-after-free](http://cwe.mitre.org/data/definitions/416.html)。如果我们幸运的话，错误会及早清晰地出现，但有时我们就没有那么幸运了，我们会被折磨数小时或数天。我们的`throwing_mutex`类不可能解决这个问题，任何需要这样一个类的代码都没有经过深思熟虑的所有权语义。

那么，如果不是通过抛出的互斥锁，我们如何解决这个问题呢？我们修复了互斥锁和被它锁定的对象的生命周期。

据推测，这是互斥锁是一个类的成员。如果是这样的话，这意味着延迟销毁，直到依赖该对象的每个人都完成了它。这是通过使用 a 来传达的[`shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)。在不深入了解所有权语义的本质的情况下，这是可以回答的最好问题。希望我已经改变了你对问题的思考方式，足以让你偏离原来的计划，转向更可靠的工作。

# algorithm - 当维基百科说在动态数组末尾插入项目的复杂性是 O(1) 摊销时，它是什么意思？

> ID：14307787
> 
> 赞同：2
> 
> 时间：2013-01-13T20:26:26.293
> 
> 标签：algorithm, data-structures, complexity-theory, time-complexity, dynamic-arrays

[http://en.wikipedia.org/wiki/Dynamic_array#Performance](http://en.wikipedia.org/wiki/Dynamic_array#Performance)

它到底是什么意思？

我认为在最后插入将是 O(n)，因为您必须分配原始数组空间的两倍，然后将所有项目移动到该位置并最后插入项目。这个 O(1) 怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:32:46.783

摊销的 O(1) 效率意味着 n 次插入的运行时间总和将为 O(n)，即使任何单个操作可能需要更长的时间。

由于复制所有内容所需的工作，附加元素可能需要 O(n) 时间，这是绝对正确的。但是，由于数组每次扩展时都会加倍，因此昂贵的加倍步骤发生的频率越来越少。结果，在 n 次插入中完成的总工作是 O(n) 而不是 O(n ² )。

详细说明：假设您要插入总共 n 个元素。调整矢量大小时复制元素的总工作量最多为

> 1 + 2 + 4 + 8 + ... + n ≤ 2n - 1

这是因为首先复制一个元素，然后复制两倍，然后复制两倍，等等，在绝对最坏的情况下复制所有 n 个元素。这个几何级数的总和为 2n - 1，因此在所有复制步骤中最多移动 O(n) 个元素。由于您进行了 n 次插入，并且在所有这些操作中只进行了 O(n) 总工作复制，因此每次操作的摊销效率为 O(1)。这并不是说每个操作都需要 O(1) 时间，而是说 n 个操作总共需要 O(n) 时间。

对于这背后的图形直觉，以及将数组加倍而不是仅仅增加少量的基本原理，您可能需要查看[这些演讲幻灯片](http://www.stanford.edu/class/archive/cs/cs106b/cs106b.1126/lectures/14/Slides14.pdf)。最后的图片可能非常相关。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T20:27:44.973

是的，每个单独的重新分配都是 O(N)。但是在接下来的 N 次插入中，您无需执行任何操作。所以每次插入的“平均”成本是 O(1)。我们说“成本在多个操作中摊销”。

# haskell - 无法让 wxHaskell 在 Mac 上的 ghci 中工作

> ID：14307789
> 
> 赞同：6
> 
> 时间：2013-01-13T20:26:30.257
> 
> 标签：haskell, wxwidgets, macos-carbon, nsundomanager, wxhaskell

我正在尝试使用[function运行](http://www.haskell.org/haskellwiki/WxHaskell/Building_on_MacOS_X#Using_wxHaskell_on_MacOS_X_platforms)[一个示例](http://www.haskell.org/haskellwiki/WxHaskell/Quick_start#Hello_world_in_wxHaskell)。`EnableGUI`

```
% ghci -framework Carbon Main.hs

*Main> enableGUI >> main 
```

这是我得到的，而不是工作程序：

```
2013-01-14 00:21:03.021 ghc[13403:1303] *** Assertion failure in +[NSUndoManager _endTopLevelGroupings], /SourceCache/Foundation/Foundation-945.11/Misc.subproj/NSUndoManager.m:328
2013-01-14 00:21:03.022 ghc[13403:1303] +[NSUndoManager(NSInternal) _endTopLevelGroupings] is only safe to invoke on the main thread.
2013-01-14 00:21:03.024 ghc[13403:1303] (
    0   CoreFoundation                      0x00007fff8c8ea0a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff867243f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff8c8e9ee8 +[NSException raise:format:arguments:] + 104
    3   Foundation                          0x00007fff884966a2 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 189
    4   Foundation                          0x00007fff884fc8b7 +[NSUndoManager(NSPrivate) _endTopLevelGroupings] + 156
    5   AppKit                              0x00007fff8ecb832d -[NSApplication run] + 687
    6   libwx_osx_cocoau_core-2.9.4.0.0.dylib 0x000000010ae64c96 _ZN14wxGUIEventLoop5DoRunEv + 40
    7   libwx_baseu-2.9.4.0.0.dylib         0x000000010b37e0e5 _ZN13wxCFEventLoop3RunEv + 63
    8   libwx_baseu-2.9.4.0.0.dylib         0x000000010b2e91bf _ZN16wxAppConsoleBase8MainLoopEv + 81
    9   libwx_osx_cocoau_core-2.9.4.0.0.dylib 0x000000010ae1b04f _ZN5wxApp5OnRunEv + 29
    10  libwx_baseu-2.9.4.0.0.dylib         0x000000010b32e8d1 _Z7wxEntryRiPPw + 102
    11  libwxc.dylib                        0x000000010bc8a9a4 ELJApp_InitializeC + 116
    12  ???                                 0x000000010beb9702 0x0 + 4494956290
)
2013-01-14 00:21:03.024 ghc[13403:1303] *** Assertion failure in +[NSUndoManager _endTopLevelGroupings], /SourceCache/Foundation/Foundation-945.11/Misc.subproj/NSUndoManager.m:328 
```

当我编译`macosx-app`它时，它运行得相当好，但是，出于显而易见的原因，我真的希望它能够从`ghci`.

我能做些什么？谷歌没有透露`NSUndoManager`与 Haskell 一起使用的神秘问题。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T12:01:43.360

ghci -fno-ghci-沙盒

在 OSX 10.8 上为我工作，wx 0.90.0.1

感谢海因里希：[https ://github.com/jodonoghue/wxHaskell/pull/6](https://github.com/jodonoghue/wxHaskell/pull/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:43:28.477

wxHaskell 已经有一段时间没有在 ghci 中工作了。显然 C++ 内存管理和重用 ghci 中的组件会导致问题。你必须反复重写 main 。:(

[常见问题](http://www.haskell.org/haskellwiki/WxHaskell/FAQ)解答说

> GHCi 不能混合使用静态库和动态库；它将在不久的将来在 wxHaskell 中解决。

# maven - IntelliJ Idea 中“Maven 项目”视图的源代码自动滚动

> ID：14307790
> 
> 赞同：0
> 
> 时间：2013-01-13T20:26:31.737
> 
> 标签：maven, intellij-idea

我是一个非常有经验的`Eclipse`用户，刚刚搬到`IntelliJ Idea`（或至少，试图）。

在`Eclipse`我习惯了项目视图的“*与编辑器链接*”功能。我刚刚发现类似的功能`Idea`被称为“*从源代码自动滚动*”（有点模糊，但可以）。它在“项目”视图中突出显示当前打开的文件。

我们的项目由大约 30 个 Maven 模块组成，所以我想知道“Maven 项目”视图是否有相同的选项。我检查了 Maven 选项，但找不到类似的东西。

**编辑**

看看我的意思，看看这个截图：

![在此处输入图像描述](../Images/eecc37d82d4adb8b411ff7bfa201c943.png)

**项目**视图同步成功，当我编辑*ws-consumer*项目的 pom.xml 时，但是**Maven Projects**中的选择仍然突出显示了以前项目的 pom.xml。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T21:07:03.290

我相信没有这样的功能。[您可以在此处](http://youtrack.jetbrains.com)创建新的增强请求。

`Select Target`您可以使用功能手动跳转到相关项目-`Alt F1`然后`Maven Projects`.

# c# - C# 抽象类实现

> ID：14307791
> 
> 赞同：2
> 
> 时间：2013-01-13T20:26:32.613
> 
> 标签：c#, abstract-class, abstract

我刚开始使用抽象类，想知道我是否以正确的方式使用它们。在我的示例中，我有一个 Windows 窗体应用程序，其中 Form1 是应用程序的主 UI。在 Form1 中，我有一个将调试消息写入富文本框的方法。我目前有一堆不同的类，它们都有相同的方法将消息写回主 UI 富文本框。但是，我想知道将这个功能作为抽象类的一部分是否有意义，只是让我的所有其他类继承这个功能，如下所示？

```
using System;
using System.Windows.Forms;

namespace abstractTest
{
    /// <summary>
    /// Main User Interface
    /// </summary>
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void RTBWriteLine(string message)
        {
            /* Print (append) message to the debug richtextbox */
            this.richTextBox1.AppendText(message + Environment.NewLine);

            /* Select the last entered message */
            this.richTextBox1.Select(richTextBox1.Text.Length, 0);

            /* Scroll to selected message */
            this.richTextBox1.ScrollToCaret();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Class1 c1 = new Class1(this);
            Class2 c2 = new Class2(this);
        }
    }

    public abstract class absTest
    {
        protected Form1 MainUI;

        public virtual void MainRTBWriteLine(string msg)
        {
            if (MainUI != null)
            {
                MainUI.RTBWriteLine(msg);
            }
        }
    }

    public class Class1 : absTest
    {
        public Class1(Form callingForm)
        {
            MainUI = callingForm as Form1;
            MainRTBWriteLine("This is Class1");
        }
    }

    public class Class2 : absTest
    {
        public Class2(Form callingForm)
        {
            MainUI = callingForm as Form1;
            MainRTBWriteLine("This is Class2");
        }
    }
} 
```

编辑：我的主要目标是使 DTBWriteLine（在以某种方式更新主 UI 的许多其他方法中）可用于我的所有类，但只有一个位置的代码。现在，我在我创建的每个类中都复制了以下方法（以及许多其他方法）：

```
public virtual void MainRTBWriteLine(string msg)
{
    if (MainUI != null)
    {
        MainUI.RTBWriteLine(msg);
    }
} 
```

如果把它放在一个抽象类中不是最好的方法，那是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:28:41.393

是的，这个场景是使用抽象类的完美示例。

当您在继承树中共享功能时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:52:18.500

对我来说，您所追求的似乎是一个单独的 DebugLogger 类，它唯一关心的是将调试消息记录到文本框。

然后你的其他类只会将调试日志委托给这个类，而不是继承与它们的主要功能没有太大关系的这个附加功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T20:30:48.260

在这种情况下，抽象类是一种选择，是的。另一种选择（特别是如果您想从其他地方重用相同的功能）是在单独的类中创建一个实用程序方法。继承是实现代码重用的一种方式，但它并不总是最好的选择——仔细考虑这些选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T20:33:04.877

这是有道理的，并用抽象类反映了这个想法。在您的示例中，它还为您提供了一个很好的关注点分离，您的 absTest 实现使您能够在需要时在单个点交换日志记录策略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T20:36:11.893

抽象类被广泛用于实现[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)模式。检查[C# 实现示例](http://www.dofactory.com/Patterns/PatternTemplate.aspx)。

我要补充一点，在您的示例中不必完全使用`abstract`关键字。`absTest`可能并非没有任何危害，并且在构造函数实现`abstract`的情况下它将完全正常工作。`absTest(Form callingForm)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T20:28:26.370

根据文档，抽象类的要点：

> 在类声明中使用 abstract 修饰符来指示一个类仅作为其他类的基类
> 
> *   抽象类不能被实例化。
> *   抽象类可能包含抽象方法和访问器。
> *   不能用sealed修饰符修改抽象类，这意味着该类不能被继承。
> *   从抽象类派生的非抽象类必须包括所有继承的抽象方法和访问器的实际实现。

# rdf - RDF、RDFa、Microformats和Microdata是什么关系

> ID：14307792
> 
> 赞同：27
> 
> 时间：2013-01-13T20:26:44.900
> 
> 标签：rdf, semantic-web, microdata, microformats, rdfa

我做了相当多的研究，但我无法理解这 3 之间的确切关系。另外，现在 W3C 已经正式认可 RDFa，你会推荐它而不是 Microdata，考虑到它匹配 Microdata 的功能等等吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-14T15:07:23.387

<sarcasm>我无法想象你会发现什么如此混乱</sarcasm>（编辑：这些标签以前是不可见的）

非常简短：

*   **微格式**一种将 html 页面用作*人类可读文档*和*机器可读数据*的方法，无需重复（例如，将 CSV 粘贴在 head 元素中）。
*   **RDF**为网络设计的数据模型。无模式，使用 URL 来命名类型和关系。
*   **RDFa**一种在 html 中编码（写入）RDF 的方法，遵循微格式的风格（即最小化重复）。通过向 html 添加一些属性来工作。
*   **微数据**RDFa 的替代品，使用不同的属性和不同的数据模型。

更简单地说，RDF 来自尝试使数据“webby”。甚至还有一个用于浏览 RDF 的前身 MCF 的插件（奇怪的是来自 Apple）。数据模型的设计使您可以编写您想要的内容，而无需与网络上的其他人预先安排如何列名称或关键含义。RDF 是使用 XML 标准编写（序列化）的（尽管还有其他更令人愉悦的格式）。

所以在这个世界上，你可能有一个可读的主页 ( `me.html`) 和一个数据主页 ( `me.rdf`) 供机器挖掘。那些机器不会理解 的含义，但如果他们查找“livesIn” `<p>I live in <a href="http://example.com/Chicago">Chicago</a></p>`，他们可能会使用。`:me ex:livesIn <http://example.com/Chicago>`

微格式还试图使数据成为“webby”，或者应该是网络“data-y”。这里的见解是，在网页中，散文之间有很多数据。如果您有一些提示，机器可以计算出上面的那段 html 基本上是一个地址。这些提示是微格式。通常，他们使用围绕 html 类名的约定来指示内容不仅仅是文本。

所以微格式不需要机器的单独网页。但是由于它们的工作方式，微格式仅涵盖少数类型的数据（地址、朋友链接、位置……）。每个都是需要商定的特定约定。不小心使用它们也可能混合得很糟糕。

RDFa 试图同时获得 RDF 的灵活性和微格式的简单性。微数据是对 RDFa 的回应，但具有不同的数据模型（大致是数组和散列，而不是关系模型）。与微格式不同，它既不规定提供何种信息，也只规定其编码方式。

为了完成缺失的内容，我们现在拥有 schema.org，这是大型搜索引擎（Google、Bing、Yahoo、Yandex）发起的一项用于索引 Web 数据的倡议。schema.org 协调这些含义，以便搜索引擎知道，例如，事件有位置。微数据最初由 schema.org 使用，但现在支持微数据和 RDFa。

这些天我会忽略微格式并去 schema.org。我个人的喜好是 RDFa 编码，但无论是它还是微数据都应该可以正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-03T20:58:03.757

我建议完全忽略语义网。因此，搜索引擎不会向您发送更多访问者。相反，他们将使用组织完善的数据来提供答案，而根本不会向您发送访问者。

今天你可以看到以下“电影框”示例的问题： [https ://www.google.com/search?q=The+Godfather](https://www.google.com/search?q=The+Godfather)

显示 IMDb 和烂番茄评级。维基百科的片段也是如此。对用户好，对那些网站不好。或者您过去和今天访问 IMDb 的频率如何？

不要忘记。显示的数据不仅来自 IMDb 或烂番茄。日期、导演、奖项、音乐、图像等已从其他网站收集。例如，搜索引擎可以轻松地在其数据库中搜索“教父”+“导演”，如果 100 个网站中有 99 个包含名称“弗朗西斯·福特·科波拉”，则无需任何手动交互即可轻松验证答案。

最后，搜索引擎能够在那里构建自己的内容，而无需支付或提及作者。通过语义分类，您可以让他们更轻松。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T02:39:27.327

这三者都是为了让网页内容更具语义化。

rdfa面临许多进入壁垒；它与 xml（rdfa 是基于 xml）在 web 早期所做的相同的成长痛苦，只是可能更重要，因为参与的开发人员较少。

我对 rdfa 知之甚少，无法通过微数据推荐它。我偏向于微数据，因为谷歌、雅虎和微软（现在的必应）联合起来创造了它。rdfa 正在开发中，微格式提案已经完成。此外，微格式已经在网络上大量生产和消费。所以三巨头决定串通一气，想出了微数据。我有点厌倦了，我想是因为我从根本上不明白为什么微格式被抛弃了。听起来像一堆烟雾和镜子。

所以我推荐微格式。他们太容易了。太棒了。您可以使用微数据实现哪些微格式无法实现的目标？

也就是说....我会选择微数据而不是 rdfa，因为它们同样简单。和数据属性远远优于 html 类。实际上，也许这就是最大的好处？数据属性？就像你的研究一样，我已经为微数据背后的原因寻找了很久很久，但我能找到的只是正常的、千篇一律的帖子。

# php - CakePHP hasMany 通过（连接模型）不保存

> ID：14307797
> 
> 赞同：0
> 
> 时间：2013-01-13T20:27:42.717
> 
> 标签：php, cakephp

我有一个 hasMany through （连接模型），它不保存，但是在阅读时，它很自然地工作。

我会尽量提供尽可能多的细节，所以请多多包涵。请注意，我正在尝试保存与大量现有产品配对的新用户，并且我不想在此保存中添加新产品。

数据库表：`users, products, subscribed_users`

连接表的表结构：`id, user_id, product_id, quantity, created, modified`

用户.php

```
public $hasMany = array(
   'SubscribedUser'
); 
```

产品.php

```
public $hasMany = array(
   'SubscribedUser'
); 
```

订阅用户.php

```
class SubscribedUser extends AppModel {
   public $belongsTo = array(
       'User', 'Product'
   );
} 
```

我试图从 UsersController.php 中保存的数据数组

```
Array (
    [User] => Array (
        [username] => asdf
    )
    [SubscribedUser] => Array (
        [0] => Array (
            [product_id] => 50f1ef25-6884-44cf-80e4-bd346f01a4c2
            [count] => 12
        )
        [1] => Array (
            [product_id] => 50f1f1d6-89b4-4ade-961f-c1a06f01a4c2
            [count] => 12
        )
    )
) 
```

使用 $this->User->SubscribedUser->saveAll($data); 我已经正确保存了用户，但是我的 subscribed_users 表只有一行（从我上面的数据可以看出，应该有两行）并且它包含丢失的数据。没有product_id，count数为0。

我不确定我在这里缺少什么。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:33:26.153

问题是我使用的是 $this->User->SubscribedUser->saveAll() 而不是 $this->User->saveAll()

我的问题现在用这个解决方案解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:37:31.827

除非是拼写错误，否则文件名`Users.php`是最明显的错误。

# wordpress - 服务器转移后，Wordpress 网站在 Internet Explorer 中无法正确显示

> ID：14307801
> 
> 赞同：0
> 
> 时间：2013-01-13T20:27:50.350
> 
> 标签：wordpress, internet-explorer, cross-browser, web-testing, server.transfer

我有一个奇怪的问题。

我正在构建的站点在将其传输到另一台服务器后停止在 IE 8/9 中正确显示。我无法弄清楚该网站有什么问题。我开始怀疑它与服务器有关。

有人知道为什么吗？

旧服务器（在 IE 中工作）goo.gl/9XZpD

新服务器（不适用于 IE）goo.gl/S5kZf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:02:24.757

您的页面仍然以：

```
<?

?><!DOCTYPE html> 
```

删除 php 短标签，文件必须像这样开始：

```
<!DOCTYPE html>
<html> 
```

编辑：如果您有权访问您的 php.ini 文件，请查找

```
short_open_tag = Off 
```

将其更改为

```
short_open_tag = On 
```

重启阿帕奇

干杯

达里奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:33:06.377

您在两个字体文件 - eurosti-webfont.woff 和 ufonts.com_eurostile-bold-2-webfont.woff 上遇到 404 错误。看起来他们没有过渡到新服务器。

# ubuntu - 杀死 vncserver 但保持会话打开

> ID：14307802
> 
> 赞同：0
> 
> 时间：2013-01-13T20:27:53.390
> 
> 标签：ubuntu, remote-access, vnc

我的问题是，我想启动一个我只能开始`UI`然后停止`VNC`会话的进程。

通过停止`vncserver`它也会杀死我的子进程。出于安全原因，我不想让服务器只留下 8 个字符的密码。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:43:13.573

我了解到，vnc 并不是 linux 下远程桌面的唯一免费选项。还有xrdp。这实际上效果更好，用户可以使用他们的帐户登录。

```
apt-get install xrdp 
```

# control-flow - 虚拟机中的流控制指令

> ID：14307804
> 
> 赞同：0
> 
> 时间：2013-01-13T20:27:55.653
> 
> 标签：control-flow, vm-implementation

我一直在从头开始实现自己的脚本语言+虚拟机，以进行一个小型实验。脚本阅读器解析脚本并将其转换为运行时引擎将执行的指令流。

一开始我没有考虑它，但现在我想包括流控制（循环、分支等）。我对语言理论并不精通，只是看了一些例子来寻找灵感。

但是 x86 和 java 虚拟机都有大量用于流控制的指令。在 x86 中，有很多指令基于标志的状态和其他指令以一种或另一种方式操纵相关标志的状态进行跳转。在 Java 中似乎有 16 条指令可以进行某种比较和条件跳转。

这可能是有效的或受硬件特定原因的激励，但这不是我想要的。

我正在寻找一种精简、优雅的流控制解决方案，它只需要一些专门的指令，并且实现和维护起来不太复杂。

我非常有信心我可以想出一些可行的方法，但我宁愿提高我的知识而不是重新发明轮子。非常欢迎任何解释或相关材料的链接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:55:07.783

通常，流量控制所需的最小原语是

*   无条件跳转

*   条件跳转

其中，条件跳转是复杂的，至少它需要原子地支持以下内容：

*   测试二进制变量/标志

*   如果设置了标志，则导致指令执行跳转到某个指定位置

*   如果未设置该标志，则允许指令执行继续不间断

然而，对于这样一个原始的条件跳转，您需要将二进制变量/标志设置为可以在您的语言的流控制结构中使用的每种类型的布尔表达式的适当值。

因此，这将导致需要各种复杂度不同的原语来设置二进制变量/标志，或者需要发出复杂的指令序列以获得所需的效果。

另一种选择是引入更复杂的条件跳转原语。

通常会在每个的数量和复杂性之间进行权衡：条件跳转原语；条件（变量/标志）设置原语；发出指令。

# erlang - 如何让erlang在当前目录的子目录中查找模块？

> ID：14307805
> 
> 赞同：2
> 
> 时间：2013-01-13T20:27:57.740
> 
> 标签：erlang

我是 Erlang 的新手，刚刚浏览了一些关于 Erlang 的教程。来自 TDD 背景，我认为我应该遵循 Erlang 中的一些 TDD 原则。我组织了我的代码如下

```
root
|- tests
|   |- name_builder_tests.erl
|- src
|   |- name_builder.erl 
```

`root`我在目录中启动 Erlang shell 。但是我无法从那里编译我的文件，所以每次我对其中一个文件进行更改并且需要编译它们时`erl`，我都必须切换到`tests`或目录。`src`

在编译模块或从特定模块执行函数时，有什么方法可以告诉 shell 在所有子目录中查找模块？我想问的是，如果我的 shell 在`root`目录中，我可以成功执行以下操作

```
c(name_builder).
c(name_builder_tests). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:14:02.417

让我们像这样组织代码。

```
root
|- test
|   |- name_builder_tests.erl
|- src
|   |- name_builder.erl
|- rebar
|- rebar.config 
```

比运行'./rebar compile eunit'。您可以在此处找到钢筋脚本和文档[https://github.com/basho/rebar/wiki](https://github.com/basho/rebar/wiki)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:57:37.947

你也可以使用[Emakefile](http://www.erlang.org/doc/man/make.html#files-2)来告诉编译器在哪里寻找源文件。

在根目录中创建一个名为 Emakefile 的文件，其内容如下

```
{'src/*', [debug_info,
   {i, "src"},
   {i, "include"},     
   {outdir, "ebin"}]}.
{'test/*', [debug_info,
    {i, "src"},
    {i, "include"},
    {i, "test"},        
    {outdir, "ebin"}]}. 
```

现在编译所有模块，使用`erl -make`它将所有`.beam`文件放入`ebin/`目录中。

`erl -pa ebin/`然后通过运行将 ebin 目录添加到 sys 路径的命令来启动 shell

PS 1：我也是一个 erlang 新手，我从[Learn You Some Erlang](http://learnyousomeerlang.com)中学到了这种方法，更准确地说是从[本课](http://learnyousomeerlang.com/designing-a-concurrent-application#lay-them-foundations)

PS 2：如果您正在开发比这更复杂的应用程序，我建议您检查[rebar](https://github.com/rebar/rebar)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T20:43:18.653

进行单元测试时的一种方法是将测试放在与生产代码相同的模块中：

```
-module(my_code).
-export([run/0]).

run() -> ok.

-ifdef(TEST).
-include_lib("eunit/include/eunit.hrl").

run_test() ->
    ?assertEqual(ok, run()).

-endif. 
```

这样，您就可以在附近进行测试。关于代码的可用性，您应该使用“-pa”参数运行 erlang shell 并指定代码的位置：

```
erl -pa src/ 
```

那是因为默认情况下您正在编译会将梁文件与源文件放在同一文件夹中。但我建议使用钢筋之类的东西，因为它会让你的生活更轻松。

HTH，阿林

# python - 使用 Python 和 Pocketsphinx 进行实时识别

> ID：14307816
> 
> 赞同：7
> 
> 时间：2013-01-13T20:28:59.917
> 
> 标签：python, cmusphinx

我最近一直在使用 python 中的袖珍狮身人面像。我已经成功地得到了下面的例子来识别录制的 wav。

```
#!/usr/bin/env python

import sys,os

def decodeSpeech(hmmd,lmdir,dictp,wavfile):

    """

    Decodes a speech file

    """

    try:

        import pocketsphinx as ps

        import sphinxbase

    except:

        print """Pocket sphinx and sphixbase is not installed

        in your system. Please install it with package manager.

        """

    speechRec = ps.Decoder(hmm = hmmd, lm = lmdir, dict = dictp)

    wavFile = file(wavfile,'rb')

    wavFile.seek(44)

    speechRec.decode_raw(wavFile)

    result = speechRec.get_hyp()

    return result[0]

if __name__ == "__main__":

    hmdir = "/home/jaganadhg/Desktop/Docs_New/kgisl/model/hmm/wsj1"

    lmd = "/home/jaganadhg/Desktop/Docs_New/kgisl/model/lm/wsj/wlist5o.3e-7.vp.tg.lm.DMP"

    dictd = "/home/jaganadhg/Desktop/Docs_New/kgisl/model/lm/wsj/wlist5o.dic"

    wavfile = "/home/jaganadhg/Desktop/Docs_New/kgisl/sa1.wav"

    recognised = decodeSpeech(hmdir,lmd,dictd,wavfile)

    print "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%"

    print recognised

    print "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%" 
```

问题是如何通过麦克风进行实时语音识别？在带有 if 语句的 while 循环中，如果从麦克风中识别出一组单词，则可以调用函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T22:37:30.897

实时识别代码[如下](https://github.com/cmusphinx/pocketsphinx/blob/master/swig/python/test/continuous_test.py)：

```
config = Decoder.default_config()
config.set_string('-hmm', path.join(MODELDIR, 'en-us/en-us'))
config.set_string('-lm', path.join(MODELDIR, 'en-us/en-us.lm.bin'))
config.set_string('-dict', path.join(MODELDIR, 'en-us/cmudict-en-us.dict'))
config.set_string('-logfn', '/dev/null')
decoder = Decoder(config)

import pyaudio
p = pyaudio.PyAudio()
stream = p.open(format=pyaudio.paInt16, channels=1, rate=16000, input=True, frames_per_buffer=1024)
stream.start_stream()

in_speech_bf = False
decoder.start_utt()
while True:
    buf = stream.read(1024)
    if buf:
        decoder.process_raw(buf, False, False)
        if decoder.get_in_speech() != in_speech_bf:
            in_speech_bf = decoder.get_in_speech()
            if not in_speech_bf:
                decoder.end_utt()
                print 'Result:', decoder.hyp().hypstr
                decoder.start_utt()
    else:
        break
decoder.end_utt() 
```

您还可以在 pocketsphinx 中使用 gstreamer python 绑定，检查[liveemo.py](https://github.com/cmusphinx/pocketsphinx/blob/master/src/gst-plugin/livedemo.py)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-22T17:52:27.323

试试[这个](http://cmusphinx.sourceforge.net/wiki/gstreamer)。Pocketsphinx 现在是一个 GStreamer 插件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-10T18:04:34.620

这是我在互联网上看到的代码，我已经修改了一些东西来真正听听非常糟糕和慢的词你可以帮我修改它。它是建立在 ubuntu 16.04 LTS 上的 我对编程不太了解 期待帮助

```
 # -*- encoding: utf-8 -*-
    #!/usr/bin/env python

    from pocketsphinx.pocketsphinx import *
    from sphinxbase.sphinxbase import *

    import os
    import pyaudio
    import wave
    import audioop
    from collections import deque
    import time
    import math;import Mic

    """
    Written by Sophie Li, 2016
    http://blog.justsophie.com/python-speech-to-text-with-pocketsphinx/
    """

    class SpeechDetector:
        def __init__(self):
            # Microphone stream config.
            self.CHUNK = 1024  # CHUNKS of bytes to read each time from mic
            self.FORMAT = pyaudio.paInt16
            self.CHANNELS = 1
            self.RATE = 16000

            self.SILENCE_LIMIT = 1  # Silence limit in seconds. The max ammount of seconds where
                               # only silence is recorded. When this time passes the
                               # recording finishes and the file is decoded

            self.PREV_AUDIO = 0.5  # Previous audio (in seconds) to prepend. When noise
                              # is detected, how much of previously recorded audio is
                              # prepended. This helps to prevent chopping the beginning
                              # of the phrase.

            self.THRESHOLD = 4500
            self.num_phrases = -1

            # These will need to be modified according to where the pocketsphinx folder is
            MODELDIR = "/home/l/Desktop/pocketsphinx/model/en-us"

            # Create a decoder with certain model
            config = Decoder.default_config()
            config.set_string('-hmm', os.path.join(MODELDIR, '/home/l/Desktop/pocketsphinx/model/en-us/en-us/'))
            config.set_string('-lm', os.path.join(MODELDIR, '/home/l/Desktop/pocketsphinx/model/en-us/en-us.lm.bin'))
            config.set_string('-dict', os.path.join(MODELDIR, '/home/l/Desktop/pocketsphinx/model/en-us/cmudict-en-us.dict'))
            config.set_string('-keyphrase', 'no one')
            config.set_float('-kws_threshold', 1e+20)

            # Creaders decoder object for streaming data.
            self.decoder = Decoder(config)

        def setup_mic(self, num_samples=50):
            """ Gets average audio intensity of your mic sound. You can use it to get
                average intensities while you're talking and/or silent. The average
                is the avg of the .2 of the largest intensities recorded.
            """
            #print "Getting intensity values from mic."
            p = pyaudio.PyAudio()
            stream = p.open(format=self.FORMAT, 
                            channels=self.CHANNELS,
                            rate=self.RATE, 
                            input=True, 
                            frames_per_buffer=self.CHUNK)

            values = [math.sqrt(abs(audioop.avg(stream.read(self.CHUNK), 4)))
                      for x in range(num_samples)]
            values = sorted(values, reverse=True)
            r = sum(values[:int(num_samples * 0.2)]) / int(num_samples * 0.2)
            #print " Finished "
            #print " Average audio intensity is ", r
            stream.close()
            p.terminate()

            if r < 3000:
                self.THRESHOLD = 3500
            else:
                self.THRESHOLD = r + 100

        def save_speech(self, data, p):
            """
            Saves mic data to temporary WAV file. Returns filename of saved
            file
            """
            filename = 'output_'+str(int(time.time()))
            # writes data to WAV file
            data = ''.join(data)
            wf = wave.open(filename + '.wav', 'wb')
            wf.setnchannels(1)
            wf.setsampwidth(p.get_sample_size(pyaudio.paInt16))
            wf.setframerate(16000)  # TODO make this value a function parameter?
            wf.writeframes(data)
            wf.close()
            return filename + '.wav'

        def decode_phrase(self, wav_file):
            self.decoder.start_utt()
            stream = open(wav_file, "rb")
            while True:
              buf = stream.read(1024)
              if buf:
                self.decoder.process_raw(buf, False, False)
              else:
                break
            self.decoder.end_utt()
            words = []
            [words.append(seg.word) for seg in self.decoder.seg()]
            return words

        def run(self):
            """
            Listens to Microphone, extracts phrases from it and calls pocketsphinx
            to decode the sound
            """
            self.setup_mic()

            #Open stream
            p = pyaudio.PyAudio()
            stream = p.open(format=self.FORMAT, 
                            channels=self.CHANNELS, 
                            rate=self.RATE, 
                            input=True, 
                            frames_per_buffer=self.CHUNK)

            audio2send = []
            cur_data = ''  # current chunk of audio data
            rel = self.RATE/self.CHUNK
            slid_win = deque(maxlen=self.SILENCE_LIMIT * rel)
            #Prepend audio from 0.5 seconds before noise was detected
            prev_audio = deque(maxlen=self.PREV_AUDIO * rel)
            started = False

            while True:
                cur_data = stream.read(self.CHUNK)
                slid_win.append(math.sqrt(abs(audioop.avg(cur_data, 4))))

                if sum([x > self.THRESHOLD for x in slid_win]) > 0:
                    if started == False:
                        print "Bắt đầu ghi âm"
                        started = True
                    audio2send.append(cur_data)

                elif started:
                    print "Hoàn thành ghi âm"
                    filename = self.save_speech(list(prev_audio) + audio2send, p)
                    r = self.decode_phrase(filename)
                    print "RESULT: ", r
# hot word for me " no one" if r.count('one') and r.count("no") > 0 the end programs
                    if r.count("one") > 0 and r.count("no") > 0:
                        Mic.playaudiofromAudio().play("/home/l/Desktop/PROJECT/Audio/beep_hi.wav")
                        os.remove(filename)
                        return
                    # Removes temp audio file
                    os.remove(filename)
                    # Reset all
                    started = False
                    slid_win = deque(maxlen=self.SILENCE_LIMIT * rel)
                    prev_audio = deque(maxlen= 0.5 * rel)
                    audio2send = []
                    print "Chế độ nghe ..."

                else:
                    prev_audio.append(cur_data)

            print "* Hoàn thành nghe"
            stream.close()
            p.terminate() 
```

# java - 防止从 sqlite 数据库 onUpgrade 丢失数据

> ID：14307818
> 
> 赞同：0
> 
> 时间：2013-01-13T20:29:56.027
> 
> 标签：java, android

现在我的 onUpgrade 方法如下所示：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS questions");
    onCreate(db);
} 
```

目前，每当我的应用程序从市场更新时，这都会创建一个新表。

如何防止我的表被删除，并且只在我想要的时候被重新创建或修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:32:28.120

您应该检查数据库版本。`onUpgrade()`仅当当前版本比新版本旧时才执行。检查您的子类的`SQLiteOpenHelper`构造函数是否每次都传递相同的参数（最后一个）。**在您的情况下，如果您的数据库版本保持不变，则不会重新创建数据库**，`onUpgrade(`) 将不会被执行。

```
public DBHelper(Context context) {
      super(context, DB_NAME, null, DB_VERSION);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:38:24.313

> 如何防止我的表被删除，并且只在我想要的时候被重新创建或修改？

删除方法的当前主体`onUpgrade()`并执行更复杂的升级过程：添加表、删除表、更改表等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T03:46:37.620

请参阅此[解决方案](http://blog.arthurassuncao.com/2013/05/android-manter-dados-do-banco-de-dados.html)（葡萄牙语）：

只需使用所有数据（备份）创建临时表，删除/创建其他数据库表并将临时表数据复制（重新插入）到新结构。一个有效的解决方案，但可能并非在所有情况下都有效。

# c - 字符数组中'\0'的意义是什么？

> ID：14307821
> 
> 赞同：2
> 
> 时间：2013-01-13T20:30:12.957
> 
> 标签：c

我知道 C 中的每个字符串都以 '\0' 字符结尾。当我们需要知道字符串何时结束时，它非常有用。但是，我无法理解它在打印字符串和没有它的情况下打印字符串的用途。我有以下代码： -

```
/* Printing out an array of characters */
#include<stdio.h>
#include<conio.h>
int main()
{
    char a[7]={'h','e','l','l','o','!','\0'};
    int i;
    /* Loop where we do not care about the '\0' */ 
    for(i=0;i<7;i++)
    {
        printf("%c",a[i]);
    }
    printf("\n");
    /* Part which prints the entire character array as string */
    printf("%s",a);
    printf("\n");
    /* Loop where we care about the '\0' */
    for(i=0;i<7&&a[i]!='\0';i++)
    {
        printf("%c",a[i]);
    }
} 
```

输出是： -

```
hello!
hello!
hello! 
```

我无法理解其中的区别。有什么解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:33:36.170

在这种情况下：

```
for(i=0;i<7;i++)
{
    printf("%c",a[i]);
} 
```

您循环数次 (7) 然后退出。那是循环的结束条件。它终止，不管别的。

在另一种情况下，您还循环了 7 次，不再循环，您只是添加了另一个条件，这实际上没有任何作用，因为您已经记录了一些事情。如果您执行了以下操作：

```
 int index = 0;
 while (a[index] != '\0') { printf("%c", a[index]); index++; } 
```

现在你将依赖那里的零终止字符，如果它不在字符串中，你的`while`循环将永远持续下去，直到程序崩溃或强制终止它。可能在屏幕上打印垃圾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T20:34:05.843

`\0`不是字符串中数据的一部分。它是字符串结束的指示器。如果不知道字符串的长度，请查找此指示符。在它的帮助下，您可以更换您的循环：

```
for(i=0;i<7&&a[i]!='\0';i++) { ... 
```

和：

```
for(int i=0; a[i]; ++i) { ... 
```

因此，for-loops 和 printf 显示的是相同的字符串。唯一的区别是你如何打印它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T20:31:35.043

`'\0'`不对应于可显示的字符；这就是为什么第一个和最后一个版本看起来是一样的。

第二个版本是相同的，因为在引擎盖下，`printf`它只是迭代直到它到达`'\0'`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T20:35:29.840

终止零字符的目的是终止字符串，即在字符串本身中间接编码字符串长度信息。如果您以某种方式已经知道字符串的长度，则可以编写可以正常工作的代码，而无需依赖终止的零字符。基本上就是这样。

现在，在您的代码示例中，第一个循环做了一些没有多大意义的事情。它从实际长度为 6 的字符串中打印 7 个字符。即它也尝试打印终止零。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T20:40:21.837

当您想从第一个字符到结尾打印字符串时。`\0`当字符串以(Print characters until `\0`)结尾时，不需要知道该字符串的长度。**所以你不需要任何额外的变量来存储 string 的长度**。

事实上，一个字符串可以有许多不同的表示，但最小化消耗的内存（这对 C 设计人员很重要）导致设计人员定义以零结尾的字符串。

每个字符串表示在速度、内存和灵活性之间都有它的权衡。例如，您可以让您的字符串定义与 Pascal 字符串相同，它在数组的第一个元素处存储字符串的长度，但它会导致该字符串的长度有限，但检索字符串的长度比以零结尾的字符串更快（计算每个字符直到`\0`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T20:32:50.103

*我无法理解它在打印字符串和没有它的情况下打印字符串的用途*

通常，您不会像这样逐个字符地打印字符串。您打印整个字符串。在这种情况下，您的 C 库将一直打印到找到零为止。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-13T20:36:41.867

终止零字符的目的是终止字符串，即在字符串本身中间接编码字符串*长度信息。*如果您以某种方式已经知道字符串的长度，则可以编写可以正常工作的代码，而无需依赖终止的零字符。基本上就是这样。

现在，在您的代码示例中，第一个循环做了一些没有多大意义的事情。它从实际长度为 6 的字符串中打印 7 个字符。即它也尝试打印终止零。为什么会这样——我不知道。换句话说，您的代码生成的第一个输出在形式上与其他输出不同，因为它包括在`!`符号后立即打印零字符的效果。在您的平台上，这种效果恰好在屏幕上“不可见”，这就是为什么您可能认为第一个输出与其他输出相同的原因。但是，如果您将输出重定向到一个文件，您将能够看到它实际上是完全不同的。

代码中的其他输出方法只是将字符串输出到（但不包括）终止零字符。最后一个循环具有冗余条件检查，因为您知道循环将在零字符处停止，之前`i`将有机会达到 7。

除此之外，我不知道您可能会问什么“差异”。请澄清你的问题，如果这不能回答它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-13T20:36:43.353

当打印一个可变长度的字符串时，必须有一些“信号”来表明你已经到了结尾。通常，这是 '\0' 字符。大多数 C 标准调用，如 strcpy、strcat、printf 等，都依赖于以零结尾的字符串，因此以 '\0' 字符结尾。这对应于您的第二个示例。

第一个例子是打印一个固定长度的字符串，这种情况很少见。

第三个示例结合了两者，它查找零终止符（'\0' 字符）或最多 7 个字符。例如，这对应于 str **n** cpy 之类的调用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-13T23:04:12.977

在您的循环中，您实际上打印了 nul 字符。通常这不起作用，因为它是非打印、非控制字符。但是`printf("%s",a);`根本不会输出 nul - 它使用它作为哨兵值。所以你循环不等于 %s 格式化输出。

如果您尝试说：

```
char a[] = "123456" ;
char b[]={'h','e','l','l','o','!' } ;  // No terminator
char c[] = "ABCDEF" ;

printf( "%s", a ) ;
printf( "%s", b ) ;
printf( "%s", c ) ; 
```

您*可能*清楚地看到为什么 nul 终止符是必不可少的。就我而言，它输出：

```
123456
hello!╠╠╠╠╠╠╠╠╠╠123456
ABCDEF 
```

您的里程可能会有所不同 - 结果是未定义的行为，但在这种情况下，输出正在运行到相邻的字符串，但编译器在它们之间插入了一些未使用的空间，其中包含“垃圾”。我在未终止的字符串的两侧打包了一个字符串，因为无法知道特定编译器如何在内存中排序数据。顺便说一句，当我将字符串声明为字符串`static`时，字符串 b 的输出没有“运行”。有时周围的“垃圾”可能恰好已经为零。

# javascript - 在 Opera 中保存/更新网页密码

> ID：14307822
> 
> 赞同：1
> 
> 时间：2013-01-13T20:30:18.993
> 
> 标签：javascript, passwords, save, opera

问题：如今的网站广泛使用 JavaScript，这有时使 Opera 难以记住密码。有趣的是，虽然 Opera 仍然可以完成表格，但既不能记住新密码也不能更新现有密码。问题是如果 Opera 忽略这些密码，如何将密码保存到 Opera 中？

仅供参考：我尝试过 Internet Explorer，结果相同。令我惊讶的是，Firefox 设法记住了那个密码，但我仍然更喜欢 Opera。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:30:18.993

## 简而言之，这个想法是用一个更简单的页面替换一个页面。

我有一个密码，很久以前就记住了。幸运的是，网站设计者从未更改过身份验证机制（即表单/字段名称、操作 URL 等）。尽管如此，他们使用 JavaScript 自动完成功能仍然有效。一旦他们更改了网站域，这就带来了挑战。事实证明，Opera 无法在新域上保存密码，但可以在以前的域在线时替换它。后来他们添加了更多的 JavaScript，让 Opera 更难记住。

让我们一一考虑。首先是尝试Opera内置的“[查看源代码](http://help.opera.com/Windows/12.10/en/sourceview.html)”修改授权网页客户端，应用更改并尝试一下。尝试的事情：逐步简化从剥离 JavaScript（例如[onmouseclick()、onkeypress()](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.3)等）和样式（“ [style=...](http://www.w3.org/TR/css-style-attr/) ”、“ [class=...](http://www.w3.org/TR/CSS2/selector.html#class-html) ”等）开始。我第一次设法使用这种技术保存密码。你也可以试试[Opera Dragonfly](http://www.opera.com/dragonfly/)。

可悲的是，这在第二种情况下是没有用的。好吧，这一次的想法还是一样，但我们必须欺骗 Opera。这次我们需要一个至少支持[PHP](http://php.net/)（或您喜欢的脚本语言）的网络服务器。出于安全原因，我**不**建议使用您的网络托管等。我们应该在本地运行服务器。很好的例子是[xampp](http://www.apachefriends.org/en/xampp-windows.html)。首先，我们需要从未经编辑的真实网络服务器下载我们的登录页面（在“查看源代码”进行实验后不要复制粘贴！）。我们不需要资源（样式/脚本），所以不要费心去获取它们。接下来我们需要欺骗 Opera。这很容易。您应该在您的[主机](http://en.wikipedia.org/wiki/Hosts_%28file%29)文件中添加一条记录，将您的网页指向本地主机。像这样的东西：`127.0.0.1 www.example.com`. 查看您的网页源代码，您可能需要添加其他条目，例如`127.0.0.1 login.example.com`. 完成后启动您的本地网络服务器，并确保它侦听 localhost 的 80 端口（如果原始网络服务器在不同的端口上，则为任何其他相应的端口）。服务器成功启动后（请参阅日志以确保），您应该将保存的网页放在本地服务器上与真实 Web 上完全相同的位置。即`login.php`或`auth/some/folder/structure/file.html`。现在，您可以进行与 Opera 内置工具相同的实验并遵循相同的程序。这给我带来了直接的麻烦——Opera 根本拒绝保存密码。即使我尝试过最简单的`<form...></form>`可能的。解决方案是将另一个网页放到表单的“action = ...”属性指向的位置。在我看来，Opera 会忽略表单，除非它们返回带有重定向的 302/301 代码。像这样：

```
<?php
header("HTTP/1.1 301 Moved Permanently"); 
header("Location: www.example.com"); 
?> 
```

首先，我制作了非常简单的表单并保存了密码，但无法在真实站点上使用。所以最好是逐步简化。另一个提示是，如果您尝试替换现有密码，最好先删除旧密码。据我所知 Opera 应该替换现有的密码，但是这个棘手的页面对我不起作用。最后 Opera 放弃并保存了我的新密码。不要忘记停止您的网络服务器并删除主机中的条目。Viola - 密码已保存，自动完成功能正在运行。再次感到舒适。但还有更多。当您用 localhost 替换真实网页时，Opera 会看到这一点并给您警告。我担心这可能会破坏这种方法，但幸运的是它没有。好吧，如果在一些 Opera 更新之后，它将有另一个技巧可以尝试。和之前一样，我们尝试用修改过的页面替换页面。但是这一次我们需要使用一些透明的东西，这样 Opera 就不会注意到任何东西。例如我们可以让 Opera 使用代理并尝试使用[Proxomitron](http://en.wikipedia.org/wiki/Proxomitron)作为代理。您可能已经猜到了，下一步是放置过滤规则，这将替换页面。另一种方法是使用[Squid](http://www.squid-cache.org/)和[SquidGuard](http://www.squidguard.org/)。我想你明白了，我不会对此进行详细介绍。

您可能会问，为什么要为唯一的目标付出如此多的努力 - 将密码输入 Opera，而它自己无法做到这一点。我可以回答这个问题。那是因为我认为 Opera （以我的拙见！）至少对我来说仍然是最好和最方便的浏览器。另一方面，我不喜欢简单的解决方案。我更喜欢解决方案，它可以毫不妥协地解决提出的问题。

# php - 带有上传 PHP 问题的 AJAX/Javascript

> ID：14307829
> 
> 赞同：2
> 
> 时间：2013-01-13T20:30:50.603
> 
> 标签：php, javascript, ajax, upload

我一直在制作一个表单，通过 ajax 上传图像，php 进行上传。对于某些背景，我遇到了一个问题，xhr.readyState 和 .Status 似乎在运行并且 upload.php 似乎在运行（在 safari 中它运行并运行 upload.php 在我看来......我没有使用 ajax/ javascript 调试器太多）但它会运行我的 else 语句（我相信因为它会进入状态 2 和状态 4）然后运行 ​​xhr.responseText。不幸的是，它似乎没有正确运行upload.php（这可能是一个php问题）。我继续用打印语句替换了 php，当运行 alert(xhr.response.Text) 时会出现一个空白的警报语句，我不知道问题出在哪里。下面是我的表单代码、ajax 代码和我试图从中获得响应的 php 代码。

有人看到我遇到的问题吗？我是 AJAX 新手，有一段时间没有使用过 PHP。我正在努力提高我的 ajax/javascript 技能，但在我看来，它似乎并没有正确获得 ajax。

代码

```
> <form action="scripts/upload.php" method="post"
> enctype="multipart/form-data">
>       <label>Select a File to Upload</label> <input id="upload_file" type="file" name="upload_file" /> 
>       <input type="button" onclick="loadFile()" value="Upload"  />    </form> 
```

JAVASCRIPT/AJAX 代码

```
//LOAD IMAGES THROUGH JAVASCRIPT WINDOW.ONLOAD = INIT();

$(document).ready(function() {
  // Handler for .ready() called.

  $('.heading').click(function() {
      if($(this).find('li').is(':visible')) {   
        $(this).find('li').slideUp('slow'); 
    }else {
      $('.heading').find('li').slideUp('slow');
      $(this).find('li').slideDown('slow'); 
    }
  })
});

var xhr = createRequest();

function loadFile() {
//retrieve the FileList object from the referenced element ID
    var myFileList = document.getElementById('upload_file').files;

    //grab the first file object from the filelist
    var myFile = myFileList[0];

    //set some variables containing attributes of file
    var myFileName = myFile.name;
    var myFileSize = myFile.size;
    var myFileType = myFile.type;

    //alert the information gathered and if it is right
    alert("FileName: " + myFileName + "- FileSize: " + myFileSize + " - FileType: " + myFileType);

    //check above by alert if file size is below a certain MB and of image type JPEG, PNG, GIF

    //Let's upload the complete file object
    uploadFile(myFile);
}

function uploadFile(myFileObject) {
    // Open Our formData Object
    var formData = new FormData();

    // Append our file to the formData object
    // Notice the first argument "file" and keep it in mind
    formData.append('my_uploaded_file', myFileObject);

    // Create our XMLHttpRequest Object
    xhr.onreadystatechange = addImage;

    // Open our connection using the POST method
    xhr.open("POST", 'upload.php');
    //Send the proper header information along with the request
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

    // Send the file
    xhr.send(formData);
}

function addImage() {
    if (xhr.readyState === 4 && xhr.status === 200) {
        alert("WIN");
        alert(xhr.responseText);
    } else {
        alert("ERROR ERROR: " + xhr.status);
    }
} 
```

AJAX 请求代码

```
function createRequest() {
  try {
    request = new XMLHttpRequest();
  } catch (tryMS) {
    try {
      request = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (otherMS) {
      try {
        request = new ActiveXObject("Microsoft.XMLHTTP");
      } catch (failed) {
        request = null;
      }
    }
  } 
  return request;
} 
```

PHP代码

```
<?php
    echo "hello";
?>

<?php
/*
define("UPLOAD_DIR", "../images");

if (!empty($_FILES["myFile"])) {
    $myFile = $_FILES["myFile"];

    if ($myFile["error"] !== UPLOAD_ERR_OK) {
        echo "<p>An error occurred.</p>";
        exit;
    }

    // ensure a safe filename
    $name = preg_replace("/[^A-Z0-9._-]/i", "_", $myFile["name"]);

    // don't overwrite an existing file
    $i = 0;
    $parts = pathinfo($name);
    while (file_exists(UPLOAD_DIR . $name)) {
        $i++;
        $name = $parts["filename"] . "-" . $i . "." . $parts["extension"];
    }

    // preserve file from temporary directory
    $success = move_uploaded_file($myFile["tmp_name"],
        UPLOAD_DIR . $name);
    if (!$success) { 
        echo "<p>Unable to save file.</p>";
        exit;
    }

    // set proper permissions on the new file
    chmod(UPLOAD_DIR . $name, 0644);
}
*/
?> 
```

我粘贴了我所有的 PHP 代码，虽然现在我只是使用 echo PHP 代码来获得响应，但我确信我上传的 php 代码有很多事情（除了安全检查）。但是，如果你们能指出我正确的方向或帮助我弄清楚 ajax 调用是否有效或为什么无效。我相信个人只是没有 responseText。这是我第一次使用 Ajax 创建要运行的自己的 PHP 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:36:24.873

在表单的 action 属性中，您有 scripts/upload.php，但 ajax url 是 upload.php。

不要设置内容类型标头，当您将[formdata](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)对象传递给`XMLHttpRequest.send`.

> FormData 对象允许您编译一组键/值对以使用 XMLHttpRequest 发送。它主要用于发送表单数据，但可以独立于表单使用以传输键控数据。**如果表单的编码类型设置为"multipart/form-data"**，则传输的数据与表单的 submit() 方法用于发送数据的格式相同。

# c# - RavenDB 2.0：使用 SpatialGenerate 进行索引会占用所有内存

> ID：14307830
> 
> 赞同：1
> 
> 时间：2013-01-13T20:30:52.533
> 
> 标签：c#, nosql, ravendb, spatial, spatial-index

问题：在提供的代码中，我试图索引~26000 个地理围栏（多边形）。我尝试了许多组合 1）插入数据和 2）为简洁起见，为代码中未显示的数据编制索引。我已经使用预建索引导入了所有数据；导入数据然后制作索引并制作索引并部分导入数据并等待非陈旧索引。在所有情况下，它都会耗尽所有内存并失败（失败是指我等待 30 分钟以完成索引过程）。一个有趣的观察发生在带有预建索引的部分插入中：它总是开始消耗大约 1790 个条目的所有内存。

环境：我在 2 台机器上测试过：1) 4 GB Ram，双核 2.56 CUP 2) 12 GB Ram，i7 CPU。我使用 Visual Studio 2012（这应该不重要）针对 .NET 4.0 和 RavenDB build 2230。这里使用的唯一外部库（RavenDB 客户端库除外）是 NetTopologySuite (NuGet)。

旁注和背景：我正在使用 2 个内存数据结构进行空间计算：一个 KD-Tree 和一个带有静态数据的 R-Tree（无插入/删除/更新）。现在我的项目中添加了一个新步骤，需要每天两次更新/插入一些数据；因此，我寻找替代品以消除这部分的内务负担，并提出了 SQLite R-Tree 模块。它足够快（使用一些并行编程+它是一个主要是只读数据库）。到目前为止，RavenDB 的选择并不多（战略决策等），但我喜欢玩它，结果令人失望。准确地说，我喜欢 RavenDB 960，我真的对 RavenDB 2230 很生气。

我使用了内存树并使用约 3,000,000 个多边形（再次准确地说是“边界框”）测试了 SQLite，但未能将 RavenDB 用于约 26,000 个多边形。我真的希望我做错了什么。

编码：

```
namespace MyApp
{
    static partial class Program
    {
        static void Main(string[] args)
        {
            Initialization();
            InitializeIndexes();

            // MODE 1:
            // OneTimeImport(-1, 1024, true);

            // MODE 2:
            // OneTimeImport(-1, 1024, false);

            // MODE 3:
            // PartialImport(64); and PartialImport(32); and PartialImport(16);
        }

        static void PartialImport(int len)
        {
            bool finished = false;
            int index = 0;

            // read finished from file
            if (finished)
            {
                return;
            }

            // read index from file, if not exists then set it to 0

            index = OneTimeImport(index, len, true);
            if (index == 0)
            {
                finished = true;
            }
            // write index and finished to file
            return;
        }

        static int OneTimeImport(int start, int len, bool waitForIndexing)
        {
            var counter = start < 0 ? 0 : start;

            using (var reader = new StreamReader(@"D:\PATH\DATA.TXT", Encoding.UTF8))
            using (var session = Store.OpenSession())
            {
                session.Advanced.MaxNumberOfRequestsPerSession = int.MaxValue - 1;

                if (len < 0) len = 16;

                IEnumerable<string> lines = null;
                if (start < 0) { lines = reader.Lines(); }
                else { lines = reader.Lines().Skip(start).Take(len); }

                foreach (var line in lines)
                {
                    var parts = line.Split(new string[] { "|" }, StringSplitOptions.None);
                    var lm = new Area();

                    lm.Description = parts[5];
                    var poly = string.Empty;
                    if (!string.IsNullOrWhiteSpace(parts[8]))
                    {
                        try
                        {
                            var list = new List<Coordinate>();
                            var pairs = parts[8].Split(';');

                            foreach (var p in pairs)
                            {
                                var coor = p.Split(',');

                                var lon = coor[0].ToDouble();
                                var lat = coor[1].ToDouble();
                                list.Add(new Coordinate(lon, lat));
                            }

                            if (list.Count > 0)
                            {
                                list.Add(list[0]);

                                var ring = new LinearRing(list.ToArray());
                                poly = new Polygon(ring).ToString();
                            }
                        }
                        catch { } // some logging
                    }
                    lm.Polygon = poly;

                    session.Store(lm);

                    counter++;
                    if (counter % len == 0)
                    {
                        session.SaveChanges();
                        if (waitForIndexing) while (Store.DatabaseCommands.GetStatistics().StaleIndexes.Length > 0) Thread.Sleep(10);
                    }

                    Trace.WriteLine(counter);
                }

                session.SaveChanges();
                if (waitForIndexing) while (Store.DatabaseCommands.GetStatistics().StaleIndexes.Length > 0) Thread.Sleep(500);
            }

            return counter;
        }

        static void Initialization()
        {
            Store = new DocumentStore { ConnectionStringName = "LoxConnectionString" };
            Store.Initialize();
        }

        static void InitializeIndexes()
        {
            IndexCreation.CreateIndexes(typeof(Program).Assembly, Store);
        }

        public static IEnumerable<string> Lines(this StreamReader reader)
        {
            string line = null;
            while ((line = reader.ReadLine()) != null) yield return line;
        }

        public static double ToDouble(this string s)
        {
            double d = 0;
            double.TryParse(s, out d);
            return d;
        }

        public static DocumentStore Store { get; private set; }
    }

    public class Area
    {
        public string Id { get; set; }

        public string Description { get; set; }
        public string Polygon { get; set; }
    }

    public class AreaIndex : AbstractIndexCreationTask<Area>
    {
        public AreaIndex()
        {
            Map = docs => from doc in docs
                          select new
                          {
                              doc.Description,
                              _ = SpatialGenerate("AreaPolygon", doc.Polygon)
                          };
        }
    }
} 
```

# scala - 整数范围的模式匹配

> ID：14307832
> 
> 赞同：5
> 
> 时间：2013-01-13T20:30:59.763
> 
> 标签：scala, pattern-matching

我的函数的目的是将 5 加到一个整数上，只要该整数大于 0 且小于或等于 7。我尝试：

```
val add5Partial : PartialFunction[Int, Int] = {
  case d if (0 < d <= 7) => d + 5;
} 
```

我得到：

```
<console>:8: error: type mismatch;
 found   : Int(7)
 required: Boolean
         case d if (0 < d <= 7) => d + 5; 
```

有小费吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-13T20:33:34.160

Scala 不支持这种开箱即用的语法，因此您必须编写：

```
val partial : Int => Int = {
  case d if (d > 0) && (d <= 7) => d + 5;
} 
```

或者你可以这样做：

```
val partial : Int => Int = {
  case d if 1 to 7 contains d => d + 5;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T20:33:23.177

你不能在一次比较中做到这一点。你需要使用：

```
(d > 0) && (d <= 7) 
```

正如您所做的那样，它将评估一个与布尔值的比较，然后在第二个比较中无法将其用作 int。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-15T00:46:37.060

您可以执行以下任何操作：

```
val f = (n: Int) ⇒ if (n > 0 && n <= 7) n + 5 else n
```

// 或者 ...

```
def f(n: Int) = if (n > 0 && n <= 7) n + 5 else n
```

// 或者 ...

```
def f(n: Int): Int = n match {
    case n if n > 0 && n <= 7 ⇒ n + 5
    case _ ⇒ n
}
```

// 或者（说到...@om-nom-nom 的评论）

```
def f(n: Int) = n match {
    case n if 0 to 7 contains n ⇒ n + 5
    case _ ⇒ n
}
```

# c# - 实体框架：将现有的子 POCO 添加到新的父 POCO，在 DB 中创建新的子

> ID：14307838
> 
> 赞同：8
> 
> 时间：2013-01-13T20:31:29.587
> 
> 标签：c#, .net, entity-framework

我想在断开连接（从上下文）模式下使用实体框架 POCO。在我的场景中，我正在创建一个新的父对象，并希望将现有的子对象附加到它，然后将其保存到数据库中。
下面的代码在保存新的学生记录时不希望地插入新的课程记录，而我希望将现有的课程记录链接到新的学生记录。

我怎样才能在实体框架中做到这一点......

*   对象可以与上下文断开连接。（即在一个上下文中查询，然后在另一个上下文中保存）
*   我不需要从数据库中重新查询子记录，这样我就可以在保存到数据库时将它附加到父记录。当我已经将它作为内存中的对象时，我真的想避免对数据库进行额外的访问。

本页展示了一个数据库图，下面的代码基于[http://entityframeworktutorial.net/EF4_EnvSetup.aspx#.UPMZ4m-UN9Y](http://entityframeworktutorial.net/EF4_EnvSetup.aspx#.UPMZ4m-UN9Y)

```
class Program
{
    static void Main(string[] args)
    {

        //get existing course from db as disconnected object
        var course = Program.getCourse();

        //create new student
        var stud = new Student();
        stud.StudentName = "bob";

        //assign existing course to the student
        stud.Courses.Add(course);

        //save student to db
        using (SchoolDBEntities ctx = new SchoolDBEntities())
        {
            ctx.Students.AddObject(stud);
            ctx.SaveChanges();
        }
    }

    static Course getCourse()
    {
        Course returnCourse = null;

        using (var ctx = new SchoolDBEntities())
        {
            ctx.ContextOptions.LazyLoadingEnabled = false;
            returnCourse = (from s in ctx.Courses
                            select s).SingleOrDefault();
        }

        return returnCourse;
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-13T20:52:46.830

我相信有几种方法可以做到这一点。您可以按照以下方式指定课程实体保持不变而不是添加：

```
ctx.Entry(course).State = EntityState.Unchanged; 
```

或指示您的上下文，您正在使用现有实体：

```
ctx.Courses.Attach(course); 
```

更多信息在这里：http: [//msdn.microsoft.com/en-us/data/jj592676.aspx](http://msdn.microsoft.com/en-us/data/jj592676.aspx)

**编辑**

我的解决方案中有一些正在运行的示例，我验证它们按预期工作。在所有情况下，我们在数据库中都有 ID = 2 和 Name = "Addison Wesley" 的 Publisher 记录（与示例无关，但只是为了很好的衡量）。

**方法 1 - 设置实体状态**

```
using (var context = new Context())
{
    var book = new Book();
    book.Name = "Service Design Patterns";
    book.Publisher = new Publisher() {Id = 2 }; // Only ID is required
    context.Entry(book.Publisher).State = EntityState.Unchanged;
    context.Books.Add(book);
    context.SaveChanges();
} 
```

**方法 2 - 使用 Attach 方法**

```
using (var context = new Context())
{
    var book = new Book();
    book.Name = "Service Design Patterns";                
    book.Publisher = new Publisher() { Id = 2 }; // Only ID is required
    context.Publishers.Attach(book.Publisher);
    context.Books.Add(book);
    context.SaveChanges();
} 
```

**方法 3 - 设置外键值**

```
using (var context = new Context())
{
     var book = new Book();
     book.Name = "Service Design Patterns";
     book.PublisherId = 2; 
     context.Books.Add(book);
     context.SaveChanges();
} 
```

对于最后一种工作方法，我需要添加额外的属性 PublisherId，它必须根据 NavigationPropertyName + 'Id" 约定命名，以便 EF 自动获取：

```
public int PublisherId { get; set; }
public Publisher Publisher { get; set; } 
```

我在这里使用的是 EF5 Code First，但它与 POCO 非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:48:43.390

实体框架不允许跨上下文的关系。

如果您将课程的阅读并将课程与学生联系起来放在同一个 using 语句中，它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-03T14:07:48.967

我还尝试了第二个对我有用的选项。我确实喜欢首先在对象级别发生的父->子关系并保存到数据库。也许我应该删除 EF 生成的实体之间的所有关系并自己手动控制它。

# java - 一个字段上有两个休眠验证器。只需要选择一个

> ID：14307840
> 
> 赞同：0
> 
> 时间：2013-01-13T20:31:52.173
> 
> 标签：java, spring-mvc, hibernate-validator

我有一堂课：

```
public class Foo {
    @Length(min = 6, max = 30)
    @Pattern(regexp = "((?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).*)", message = "{error.password.too_simple}")
    private String password;

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

如您所见，有一个“密码”字段和两个验证注释。但是，在某些情况下，我希望只应用一个，而不是两个。例如：如果我有空字符串：“”我想要，只应用一个限制：第一个（*@Length*），但在我的情况下应用了两个限制。我应该怎么做，我怎样才能在这种情况下只应用一个限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:44:09.183

您可以将约束分配给不同的[验证组](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html/validator-usingvalidator.html#validator-usingvalidator-validationgroups)并使用组序列验证它们，例如通过重新定义[默认组](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html/validator-usingvalidator.html#section-default-group-class)`Foo`序列：

```
public interface EmptyChecks {}

@GroupSequence( { EmptyChecks.class, Foo.class } )
public class Foo {
    @Length(min = 6, max = 30, groups=EmptyChecks.class)
    @Pattern(regexp = "((?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).*)", message = "{error.password.too_simple}")
    private String password;

    //...
} 
```

现在，`@Pattern`只有在约束有效时才会验证`@Length`约束。

您的具体情况也可以通过在约束`^$`的正则表达式中接受一个空值 ( )来解决：`@Password`

```
@Pattern(regexp = "(^$|(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).*)", message = "") 
```

这样，两个约束都将被验证，但只有`@Length`约束会因空输入值而失败。

# java - 对 C++ 中 ptrdiff_t 的使用感到困惑

> ID：14307844
> 
> 赞同：4
> 
> 时间：2013-01-13T20:32:33.097
> 
> 标签：java, c++, porting

我需要用 Java 翻译这行代码，但我不确定如何处理 ptrdiff_t。不知道它在这里做什么。顺便说一下，mask_block 的类型是 size_t。

```
size_t lowest_bit = mask_block & (-(ptrdiff_t)mask_block); 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T21:47:06.073

谨防！这有点神奇！

`( x & ~(x-1) )`返回表达式中的最低设置位。由于整数[的补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示，原始代码的作者决定使用`( x & (-x) )`实际上是相同的。但是（原作者认为）要让你需要使用有符号类型，并且如前所述，是有符号的，是无符号的。`-x``ptrdiff_t``size_t`

由于 Java 没有无符号类型，因此`mask_block`将毫无问题地工作。`int``mask_block & (-mask_block)`

请注意，由于有符号和无符号类型之间的互操作性，强制转换在 C++ 中也是多余的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T20:34:15.940

`ptrdiff_t`是应该用于两个指针之间的（整数）差异的类型。即，一个指针与另一个指针相减的结果。它是一个有符号整数，并且应该足够大以存储最大可能数组的大小（所以在 Java 中，这只是一个`int`，我猜）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T09:28:37.687

`ptrdiff_t`是类型的名称，例如`int`or `::std::string`。C++ 标准承诺这种类型将是一个足够大的整数类型，以容纳您可以减去的任何两个指针之间的差异。当然，减去指针的想法在 Java 中是一个相当陌生的概念。为了能够做到这一点，`ptrdiff_t`必须能够容纳负数。

使用的子表达式`ptrdiff_t`是转换表达式，如 Java 类型转换。然而，与 Java 类型转换不同的是，C++ 类型转换表达式更加危险和丑陋。它们可用于 Java 会拒绝的各种不同类型的转换。有时它们会产生令人惊讶的结果。

在这种情况下，看起来有人需要一个值，它是某种无符号整数（可能是一个`unsigned long`或什么）才能为负数。他们需要把它变成一个有符号的值。`ptrdiff_t`通常是平台支持的最大大小整数。因此，如果您要将任意无符号整数类型转换为有符号整数类型`ptrdiff_t`，那么使用的类型最不可能通过 C++ 相当丑陋的强制转换操作导致某种奇怪的截断或符号更改。

特别是，看起来他们想要的类型是`size_t`，这是 C++ 标准中的另一种类型。它*是*一个无符号类型（就像我猜测的那样），并且保证是一个整数类型，它大到足以容纳内存中任何可能对象的大小。它的大小通常与`ptrdiff_t`.

编写代码的人想要这样做的原因是一个有趣的位操作技巧。为了向您展示诀窍，我将向您展示此表达式如何在多种场景中发挥作用。

假设`mask_block`是 48。假设在这个假设的平台上，`size_t`是 16 位（非常小，但这只是一个示例）。然后在二进制中，`mask_block`看起来像这样：

```
0000 0000 0011 0000 
```

并且`-(ptrdiff_t)mask_block`是-48，看起来像这样：

```
1111 1111 1101 0000 
```

那么，`48 & -48`这是不是：

```
0000 0000 0001 0000 
```

这是 16。请注意，这是 48 中最低设置位的值。让我们试试 50。50 看起来像这样：

```
0000 0000 0011 0010 
```

-50 看起来像这样：

```
1111 1111 1100 1110 
```

所以，`50 & -50`看起来像这样：

```
0000 0000 0000 0010 
```

这是 2。再次注意这是 50 中最低设置位的值。

所以这只是一个技巧来找到`mask`. 变量被调用的事实`lowest_bit`应该是一个线索。:-)

当然，这个技巧并不是完全可移植的。一些 C 和（现在可能是 C++）运行的平台不使用二进制补码表示，这个技巧在这些平台上不起作用。

在 Java 中，您可以这样做`long lowest_bit = mask_block & -mask_block;`并获得相同的效果。Java 保证二进制补码整数，甚至没有无符号整数。所以它应该工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T21:48:43.640

`x & -x`是一种清除所有位的技巧，`x`不包括其最低位。

对于 的所有非零值`x`，它是`1 << lb`，其中`lb`是最低有效位的位置（从 0 开始计数）。

为什么要投到`ptrdiff_t`? 没有进一步的知识，很难说。我什至不确定是否需要演员阵容。[`ptrdiff_t`](http://www.cplusplus.com/reference/cstddef/ptrdiff_t/)保证是有符号整数类型，并且[`size_t`](http://www.cplusplus.com/reference/cstddef/size_t/)始终是无符号整数类型。所以，我猜想 C++ 代码的作者想要确保它是有符号的并且具有与指针相同的大小。只需忽略强制转换，将代码移植到 Java 就足够了，因为在 Java 中，所有整数都是有符号的。

生成的代码也将比原始 C/C++ 版本更可移植，后者假定机器使用[2 的补码](https://en.wikipedia.org/wiki/Two%27s_complement)来表示整数，尽管（至少在理论上）C 或 C++ 标准不能保证。但是，在 Java 中，保证 JVM 必须使用 2 的补码。

# google-chrome - 页面加载时未显示的 SVG 元素不显示

> ID：14307848
> 
> 赞同：0
> 
> 时间：2013-01-13T20:32:51.647
> 
> 标签：google-chrome, svg

我在网页中嵌入了一个 SVG 图像（由 Adob​​e Illustrator CS6 生成的代码）。我已经在[这个 jsFiddle](http://jsfiddle.net/yY7QD/2/)中隔离了 SVG 代码（它也嵌入在下面）。

在 Chrome（但不是 Firefox）中，当 SVG 的底部不在视图中时，它不会呈现。缩小窗口并滚动到 jsFiddle 上 HTML 部分的顶部，然后重新加载以查看我在说什么。单击该部分后，它就会出现。

我能做些什么来解决这个问题？

**编辑：**提交了 WebKit 错误，因为它似乎是一个 WebKit 错误。[查看错误报告](https://bugs.webkit.org/show_bug.cgi?id=106748)

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="690px" height="420px" viewBox="0 43 690 420" enable-background="new 0 43 690 420" xml:space="preserve">
<defs></defs>
<filter id="fullblur" x="0" y="0">
    <feGaussianBlur in="SourceGraphic" stdDeviation="2" />
</filter>

<filter id="halfblur" x="0" y="0">
    <feGaussianBlur in="SourceGraphic" stdDeviation="1" />
</filter>

<filter id="noblur" x="0" y="0">
    <feGaussianBlur in="SourceGraphic" stdDeviation="0" />
</filter>

<!-- BACKGROUND (hidden) -->
<rect y="43" display="none" fill="#D1DBBB" width="690" height="420"/>

<!-- STAGE -->
<ellipse fill="#CC3333" stroke="#000000" cx="339.5" cy="43" rx="169.5" ry="42.5"/>

<!-- SEATS -->
<g>

    <!-- STUDENT SECTIONS -->
    <g id="studhover">
        <g filter="url(#halfblur)" id="studchart" class="chartsection">

        <g id="s1">
                <path class="sFill" fill="#FECB2F" d="M90.75,136c0,2.761,2.239,5,5,5h150c2.761,0,5-2.239,5-5V90.5c0-2.761-2.239-5-5-5h-150
            c-2.761,0-5,2.239-5,5V136z"/>
        <path class="sStroke" fill="none" stroke="#000000" d="M90.75,136c0,2.761,2.239,5,5,5h150c2.761,0,5-2.239,5-5V90.5c0-2.761-2.239-5-5-5h-150
            c-2.761,0-5,2.239-5,5V136z"/>
    </g>

            <g id="s2">
            <path class="sFill" fill="#FECB2F" d="M265.75,150c0,2.761,2.239,5,5,5h150c2.762,0,5-2.239,5-5v-45.5c0-2.761-2.238-5-5-5h-150
        c-2.761,0-5,2.239-5,5V150z"/>
            <path class="sStroke" fill="none" stroke="#000000" d="M265.75,150c0,2.761,2.239,5,5,5h150c2.762,0,5-2.239,5-5v-45.5c0-2.761-2.238-5-5-5h-150
        c-2.761,0-5,2.239-5,5V150z"/>
        </g>

            <g id="s3">
            <path class="sFill" fill="#FECB2F" d="M439.25,136c0,2.761,2.238,5,5,5h150c2.762,0,5-2.239,5-5V90.5c0-2.761-2.238-5-5-5h-150c-2.762,0-5,2.239-5,5V136z"/>
            <path class="sStroke" fill="none" stroke="#000000" d="M439.25,136c0,2.761,2.238,5,5,5h150c2.762,0,5-2.239,5-5V90.5c0-2.761-2.238-5-5-5h-150
            c-2.762,0-5,2.239-5,5V136z"/>
        </g>

            <g id="s4">
            <path class="sFill" fill="#FECB2F" d="M90.75,205.5c0,2.761,2.239,5,5,5h150c2.761,0,5-2.239,5-5V160c0-2.761-2.239-5-5-5h-150
            c-2.761,0-5,2.239-5,5V205.5z"/>
            <path class="sStroke" fill="none" stroke="#000000" d="M90.75,205.5c0,2.761,2.239,5,5,5h150c2.761,0,5-2.239,5-5V160c0-2.761-2.239-5-5-5h-150
            c-2.761,0-5,2.239-5,5V205.5z"/>
            </g>

            <g id="s5">
            <path class="sFill" fill="#FECB2F" d="M265.75,218c0,2.761,2.239,5,5,5h150c2.762,0,5-2.239,5-5v-45.5c0-2.761-2.238-5-5-5h-150
        c-2.761,0-5,2.239-5,5V218z"/>
            <path class="sStroke" fill="none" stroke="#000000" d="M265.75,218c0,2.761,2.239,5,5,5h150c2.762,0,5-2.239,5-5v-45.5c0-2.761-2.238-5-5-5h-150
        c-2.761,0-5,2.239-5,5V218z"/>
        </g>

            <g id="s6">
            <path class="sFill" fill="#FECB2F" d="M439.25,205.5c0,2.761,2.238,5,5,5h150c2.762,0,5-2.239,5-5V160c0-2.761-2.238-5-5-5h-150
        c-2.762,0-5,2.239-5,5V205.5z"/>
            <path class="sStroke" fill="none" stroke="#000000" d="M439.25,205.5c0,2.761,2.238,5,5,5h150c2.762,0,5-2.239,5-5V160c0-2.761-2.238-5-5-5h-150
        c-2.762,0-5,2.239-5,5V205.5z"/>
        </g>

        </g>

        <!-- Filling in the gaps -->
        <g>
            <rect x="251" y="84" fill="transparent" width="15" height="140" id="sVertLine1" />
            <rect x="425" y="84" fill="transparent" width="15" height="140" id="sVertLine2" />

            <rect x="266" y="84" fill="transparent" width="159" height="15" id="sHorizLine1" />
            <rect x="90" y="140" fill="transparent" width="161" height="15" id="sHorizLine2a" />
            <rect x="440" y="140" fill="transparent" width="161" height="15" id="sHorizLine2b" />
            <rect x="266" y="153" fill="transparent" width="161" height="15" id="sHorizLine3" />
            <rect x="90" y="210" fill="transparent" width="161" height="12" id="sHorizLine4a" />
            <rect x="440" y="210" fill="transparent" width="161" height="12" id="sHorizLine4b" />
        </g>

    </g>

    <!-- GUEST SECTIONS -->
    <g id="guesthover">
        <g filter="url(#halfblur)" id="guestchart" class="chartsection">
            <g>
        <path class="gFill" fill="#3333CC" d="M91.5,273c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5v-45.5c0-2.761-2.239-5-5-5h-150
            c-2.761,0-5,2.239-5,5V273z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M91.5,273c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5v-45.5c0-2.761-2.239-5-5-5h-150
            c-2.761,0-5,2.239-5,5V273z"/>
    </g>
            <g>
        <path class="gFill" fill="#3333CC" d="M440,273c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.761-2.238-5-5-5H445c-2.762,0-5,2.239-5,5
            V273z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M440,273c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.761-2.238-5-5-5H445
            c-2.762,0-5,2.239-5,5V273z"/>
    </g>
            <g>
        <path class="gFill" fill="#3333CC" d="M91.5,342.5c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5V297c0-2.762-2.239-5-5-5h-150
            c-2.761,0-5,2.238-5,5V342.5z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M91.5,342.5c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5V297c0-2.762-2.239-5-5-5h-150
            c-2.761,0-5,2.238-5,5V342.5z"/>
    </g>
            <g>
        <path class="gFill" fill="#3333CC" d="M440,342.5c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5V297c0-2.762-2.238-5-5-5H445c-2.762,0-5,2.238-5,5
            V342.5z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M440,342.5c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5V297c0-2.762-2.238-5-5-5H445
            c-2.762,0-5,2.238-5,5V342.5z"/>
    </g>
            <g>
        <path class="gFill" fill="#3333CC" d="M266.5,287c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.761-2.238-5-5-5h-150
            c-2.761,0-5,2.239-5,5V287z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M266.5,287c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.761-2.238-5-5-5h-150
            c-2.761,0-5,2.239-5,5V287z"/>
    </g>
            <g>
        <path class="gFill" fill="#3333CC" d="M266.5,355c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.762-2.238-5-5-5h-150
            c-2.761,0-5,2.238-5,5V355z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M266.5,355c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.762-2.238-5-5-5h-150
            c-2.761,0-5,2.238-5,5V355z"/>
    </g>
            <g>
        <path class="gFill" fill="#3333CC" d="M91.5,410.5c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5V365c0-2.762-2.239-5-5-5h-150
            c-2.761,0-5,2.238-5,5V410.5z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M91.5,410.5c0,2.762,2.239,5,5,5h150c2.761,0,5-2.238,5-5V365c0-2.762-2.239-5-5-5h-150
            c-2.761,0-5,2.238-5,5V410.5z"/>
    </g>
            <g>
        <path class="gFill" fill="#3333CC" d="M440,410.5c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5V365c0-2.762-2.238-5-5-5H445c-2.762,0-5,2.238-5,5
            V410.5z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M440,410.5c0,2.762,2.238,5,5,5h150c2.762,0,5-2.238,5-5V365c0-2.762-2.238-5-5-5H445
            c-2.762,0-5,2.238-5,5V410.5z"/>
    </g>
            <g>
        <path class="gFill" fill="#3333CC" d="M266.5,423c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.762-2.238-5-5-5h-150
            c-2.761,0-5,2.238-5,5V423z"/>
        <path class="gStroke" fill="none" stroke="#000000" d="M266.5,423c0,2.762,2.239,5,5,5h150c2.762,0,5-2.238,5-5v-45.5c0-2.762-2.238-5-5-5h-150
            c-2.761,0-5,2.238-5,5V423z"/>
    </g>
        </g>

        <!-- Filling in the gaps -->
        <g>
            <rect x="251" y="224" fill="transparent" width="15" height="206" id="gVertLine1" />
            <rect x="425" y="224" fill="transparent" width="15" height="206" id="gVertLine2" />

            <rect x="266" y="222" fill="transparent" width="159" height="15" id="gHorizLine1" />
            <rect x="90" y="278" fill="transparent" width="161" height="15" id="gHorizLine2a" />
            <rect x="440" y="278" fill="transparent" width="161" height="15" id="gHorizLine2b" />
            <rect x="266" y="291" fill="transparent" width="161" height="15" id="gHorizLine3" />
            <rect x="90" y="348" fill="transparent" width="161" height="15" id="gHorizLine4a" />
            <rect x="440" y="348" fill="transparent" width="161" height="15" id="gHorizLine4b" />
            <rect x="266" y="360" fill="transparent" width="161" height="15" id="gHorizLine5" />
            <rect x="90" y="417" fill="transparent" width="161" height="13" id="gHorizLine4a" />
            <rect x="440" y="417" fill="transparent" width="161" height="13" id="gHorizLine4b" />
        </g>

    </g>
</g>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:02:17.993

这是由于使用过滤器导致的 Webkit 错误。我删除了`<filter>`部分和`flter="url(...)"`标签以阻止过滤器运行，它现在可以工作了。

# python - Python递归错误，但不使用递归

> ID：14307855
> 
> 赞同：1
> 
> 时间：2013-01-13T20:33:14.907
> 
> 标签：python, recursion, msvcrt

我没有在我的代码中使用递归，所以我不明白为什么我会收到关于递归的错误。..................................................... .........................................................

代码是：

```
from os import system
from time import sleep
import msvcrt 

player_location = [0, 0]
player_dir = [0, 0]
width = int(raw_input('Width:'))
height = int(raw_input('Height:'))

def get_input():
    if msvcrt.kbhit():
        return msvcrt.getch()
    else:
        return ''

def update_screen():
    global player_location
    system('cls')
    for i in range(0, (height-1)):
        if i == player_location[0]:
            print (' ' * (player_location[1] - 1)) + 'X' + (' '*(width*2 - player_location[1] - 1)) + '|'
        else:
            print (' ' * width * 2) + '|'
    print ('-' * width * 2) + '+'

 def get_input():
    global player_dir
    player_dir = [0, 0]
    inp = get_input()
    if inp == 'q':
        exit()
    elif inp == 'w':
        player_dir[0] = -1
    elif inp == 's':
        player_dir[0] = 1
    elif inp == 'd':
        player_dir[1] = 1
    elif inp == 'a':
        player_dir[1] = -1

def actions():
    global player_dir, player_location
    player_location[0] += player_dir[0]
    player_location[1] += player_dir[1]

if __name__ == '__main__':
    while True:
        update_screen()
        sleep(10)
        get_input()
        actions() 
```

错误是这样的：

```
Traceback (most recent call last): 
```

然后这条线很多次：

```
 File "C:\Python\txtpltfrmr.py", line 29, in get_input
    inp = get_input() 
```

然后这一行：

```
RuntimeError: maximum recursion depth exceeded 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T20:34:42.977

```
def get_input():
    if msvcrt.kbhit():
        return msvcrt.getch()
    else:
        return ''

def get_input():
    global player_dir
    player_dir = [0, 0]
    inp = get_input() # INFINITE RECURSION, CALLS ITSELF 
```

有你的问题。`get_input`您有两个使用匹配签名调用的函数。将其中一个重命名，可能是第一个重命名为`get_character`.

# entity-framework - 无法使用实体框架 - 未找到连接字符串

> ID：14307856
> 
> 赞同：0
> 
> 时间：2013-01-13T20:33:15.530
> 
> 标签：entity-framework, connection-string

我正在使用 .NET 4.5 的 VS2012。我正在学习实体框架，但遇到了问题。我将 ADO.NET 实体数据模型添加到我的项目中，并使用向导生成了我的实体。

向导将连接字符串添加到`app.config`文件中：

```
<add name="MalariaEntities" connectionString="metadata=res://*/MalariaEntities.csdl|res://*/MalariaEntities.ssdl|res://*/MalariaEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=OFIR-PC;initial catalog=Malaria;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

在我的项目中，我看到了所有实体，看起来还不错，但是当我尝试执行任何数据库操作时，出现以下错误：

> *在应用程序配置文件中找不到名为“MalariaEntities”的连接字符串。*

例如，我尝试插入简单的行：

```
using (MalariaEntities DB_Context = new MalariaEntities())
{
    MapsMainCategoriesDsc a = new MapsMainCategoriesDsc();
    a.Category = "aa";
    DB_Context.MapsMainCategoriesDsc.Add(a);
    DB_Context.SaveChanges();
} 
```

当调试器到达最后一行时，就会引发异常。可能是什么问题？

向导添加了一个连接字符串，为什么我的项目不能使用它？

谢谢

# google-chrome - Chrome 扩展程序 [DEV] - 是每个帐户或系统范围的扩展程序的 LocalStorage？

> ID：14307865
> 
> 赞同：1
> 
> 时间：2013-01-13T20:34:04.100
> 
> 标签：google-chrome, local-storage, user-accounts

我正在开发一个使用 localStorage 的扩展，我的问题是每台 PC 是否有多个帐户，扩展是每个用户使用单独的存储还是系统/扩展范围？

# c++ - 在 Linux 上自行分发专有软件？

> ID：14307867
> 
> 赞同：1
> 
> 时间：2013-01-13T20:34:06.033
> 
> 标签：c++, linux

> **可能重复：**
> [为 Linux 分发二进制应用程序的最佳方式是什么？](https://stackoverflow.com/questions/1522990/whats-the-best-way-to-distribute-a-binary-application-for-linux)

我们想在 Linux 上发布一个专有游戏。游戏比较简单，有一个用C++编写的自定义引擎。我们一直在 Windows 上使用 MinGW 编译器，并且有人在 Linux 中使用 g++ 编译器进行编程和测试。

该游戏完全使用开源库编写，这些库都是跨平台的。

使适用于 Linux 的程序在所有 Linux 发行版上运行而不需要对其中任何一个进行打包的*推荐方法是什么？*对我来说，理想的方法是将其打包为 .zip 或 tarball 并提供下载，就像 Windows 下与系统库一起使用的良好 ol' .exe 文件一样。

我在 Linux 下玩过的大多数提供此类下载的游戏都提供了一个启动它的 shell 脚本（这本身就是一个兼容性问题！）。我对此没有任何问题，但它*散发*出对用户不友好的味道。此外，许多游戏需要额外的库。例如，流行库的硬件加速新版本 SDL 2.0 尚未在大多数发行版的存储库中可用，但已知有几个游戏使用它，我不得不自己编译它。这更糟。

我想要一个解决方案，客户可以在他们选择的文件管理器中单击二进制文件，它会运行，不需要“apt-getting”或“yumming”必要的库。我不介意打破标准，如果它必须进入 /opt，它会的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T21:26:09.720

> 我想要一个解决方案，客户可以在他们选择的文件管理器中单击二进制文件，它会运行，没有“apt-getting”或“yumming”。我不介意打破标准，如果它必须进入 /opt，它会的。

首先，你要明白，“yumming”和“apt-getting”并不是真正的应用程序（包）的安装程序，它们只是用于查找/下载/更新/跟踪包的前端程序。存储库（来自发行版和您手动添加的其他存储库）。所以，当你说“没有 'apt-getting' 或 'yumming'”时，我们必须假设你的意思是你不想把你的游戏放在存储库上，如果你想让人们付费，这是有道理的获取您的游戏（相对于其他专有但免费的软件，如闪存、图形驱动程序、视频编解码器以及您通常在存储库中找到的其他东西）。

因此，实际上只有两种类型的包管理系统，RPM 和 DEB，它们使用命令行程序，`rpm`并且`dpkg`分别用于实际进行安装。大多数发行版还带有用于这些程序的 GUI 前端（不是 Synaptic 风格的包管理软件（它是 apt-get 或 yum 的 GUI 前端），但更简单一些）。当你双击一个`.deb`或`.rpm`文件时，在大多数发行版上，你会弹出这个 GUI 前端，要求你提供管理员凭据并告诉你所需的依赖项，显然，你将要安装这个包到您的系统上。据我所知，这正是你想要的。因此，您需要提供的是一个`.deb`文件（对于 Debian 发行版）和一个`.rpm`（对于 Red Hat 发行版），对于您的游戏的 32 位和 64 位版本，就像我假设您`.msi`为您的 Windows 版本提供一个文件一样。

至于用户可能难以找到的依赖项。您应该做的是在安装程序的某个目录中包含一些用于这些深奥依赖项的附加（“推荐”版本）包，以便如果无法从发行版的存储库中获取较新版本，则可以从这些脱机包中安装它们。就是这样。

您可以让人们付费以获取游戏的 deb 或 rpm 安装程序，或者包含某种许可证密钥系统来解锁游戏（因此，使 deb/rpm 文件可供下载，并收取密钥费用/代码来解锁它）。

> 对我来说，理想的方法是将其打包为 .zip 或 tarball 并提供下载，就像 Windows 下与系统库一起使用的良好 ol' .exe 文件一样。

理想的？真的！？！是的，如果您所做的只是使用系统库，那么它将起作用。但如果还有更多，那将是一场噩梦（几乎和在 Windows 下一样糟糕，你不依赖安装程序）。

> 该游戏完全使用开源库编写，这些库都是跨平台的。

确保这些开源库都不是 GPL 许可的，因为如果是这样，你就不能让你的游戏成为专有的。您的依赖项必须在 LGPL 或 BSD 或类似许可下获得许可，因此请注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:59:38.767

> 使适用于 Linux 的程序在所有 Linux 发行版上运行而不需要对其中任何一个进行打包的推荐方法是什么？

不*建议*开始。所以你需要一种*不那么不推荐*的方式来做到这一点。我想这意味着生成一个静态链接的二进制文件（无论如何你都需要一个 32 位和一个 64 位版本）。

*推荐*的方法是决定一个分发系统（RPM，DEB，...）并验证对各种目标平台的依赖关系。然后用户可以单击安装程序包 - 就像他/她对 Windows MSI 文件所做的那样 - 并且以后也能够卸载/升级程序。

请注意，在实践中，即使您分发了静态二进制文件，您也必须为目标平台提供测试平台环境，因为您无法避免进行测试。那时，打包 RPM/DEB/etc 并不会真正显着增加时间消耗；另一方面，它会使包更紧凑，更容易下载和安装。

# python - 如何在 Tkinter 中使用 Button 设置功能参数？

> ID：14307868
> 
> 赞同：0
> 
> 时间：2013-01-13T20:34:06.627
> 
> 标签：python, function, button, parameters, tkinter

我想创建一个函数，它将从按钮单击中获取参数。例如：

```
from Tkinter import *

def func(b):
    number = 2*b
    print number
    return

root=Tk()

# By clicking this button I want to set b = 1 and call func

b1 = Button(root,...)
b1.pack()

# By clicking this button I want to set b = 2 and call func

b2 = Button(root,...)
b2.pack()

root.mainloop() 
```

所以点击 b1 后，“number”应该是 2，点击 b2 后，“number”应该是 4。

我希望我能很好地解释我的问题。

感谢您的回答

末日挂载

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T20:40:23.163

这是一种方法

```
from sys import stderr
from Tkinter import *

def func(b):
    number = 2*b
    stderr.write('number=%d\n'%number)
    return

root=Tk()

# By clicking this button I want to set b = 1 and call func

b1 = Button(root,command=lambda : func(1))
b1.pack()

# By clicking this button I want to set b = 2 and call func

b2 = Button(root,command=lambda : func(2))
b2.pack()

root.mainloop() 
```

# iphone - 在 UINavigationBar 中添加带有按钮的子视图不起作用

> ID：14307869
> 
> 赞同：0
> 
> 时间：2013-01-13T20:34:15.267
> 
> 标签：iphone, ios, objective-c, ipad

我有一个 UINavigationController 子类，在 viewDidLoad 我有以下代码：

```
self.containerView_ = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, self.navigationController.navigationBar.frameHeight)];
    [self.containerView_ setBackgroundColor:[UIColor yellowColor]];
    [self.containerView_ setAutoresizingMask:UIViewAutoresizingNone];

    self.profileButton_ = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 30, 30)];
    [self.profileButton_ addTarget:self action:@selector(showProfileView:) forControlEvents:UIControlEventTouchUpInside];
    [self.profileButton_ setCenterY:self.navigationController.navigationBar.frameHeight/2];
    [self.profileButton_ setImage:[UIImage imageNamed:@"profile_icon.png"] forState:UIControlStateNormal];

    self.socialButton_ = [[UIButton alloc] initWithFrame:CGRectMake(self.profileButton_.frameRight + 10, 0, 30, 30)];
    [self.socialButton_ addTarget:self action:@selector(showSocialView:) forControlEvents:UIControlEventTouchUpInside];
    [self.socialButton_ setCenterY:self.profileButton_.centerY];
    [self.socialButton_ setImage:[UIImage imageNamed:@"social_icon.png"] forState:UIControlStateNormal];

    self.notesButton_ = [[UIButton alloc] initWithFrame:CGRectMake(self.socialButton_.frameRight + 10, 0, 30, 30)];
    [self.notesButton_ addTarget:self action:@selector(showNotesView:) forControlEvents:UIControlEventTouchUpInside];
    [self.notesButton_ setCenterY:self.profileButton_.centerY];
    [self.notesButton_ setImage:[UIImage imageNamed:@"notes_icon.png"] forState:UIControlStateNormal];

    [self.containerView_ addSubview:self.profileButton_];
    [self.containerView_ addSubview:self.notesButton_];
    [self.containerView_ addSubview:self.socialButton_];

    [self.navigationBar addSubview:self.containerView_]; 
```

我可以看到 UIButton 但容器背景甚至不是黄色。当我按下按钮时，不会调用 UIButton 的操作。知道这是为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:17:16.320

您正在继承 UINavigationController？

引用 Apple 的话：“这个类不用于子类化。”

调整 UINavController 的常用方法是从包含的 UIViewController 的角度访问导航栏。您可以将目标/操作方法放在 UIViewController 中。

# xcode - 无法在 XCode 的 IOS 设备列表中获取模拟器

> ID：14307871
> 
> 赞同：0
> 
> 时间：2013-01-13T20:34:26.987
> 
> 标签：xcode

OSX 山狮 (10.8.2) XCode 4.4.1

无法获取 XCode 中的 IOS 设备列表（左上角列表）。我记得这是某种 SDK 选择问题。某处，在项目属性中。但无法弄清楚，在新的 OSX 和 XCode 安装中。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:00:10.877

可用的 ios 设备至少取决于几件事

*   您的项目/目标设备设置
    检查您的项目（信息）和目标（摘要）“部署目标”设置。

*   您在首选项 > 下载中安装了哪些模拟器，您可以选择您可能需要的模拟器。

例如，如果您的项目部署目标是 ios6，但您没有安装 iOS6 模拟器，或者未连接 iOS6 设备，则列表中不会出现任何选项。

您还应该升级到 Xcode 4.5.2。我不认为 iOS6 包含在 4.4.1 中

# jakarta-ee - 将 remove() 方法添加到 DAO

> ID：14307873
> 
> 赞同：-1
> 
> 时间：2013-01-13T20:35:16.050
> 
> 标签：jakarta-ee, netbeans, dao, crud

我正在关注[本教程](http://www.developer.com/java/web/integrate-objectdb-into-your-jpa-based-java-web-app.html)，这是经过数周搜索后我在网上找到的使用 JPA 的最简单的 Java EE Web 应用程序，我想向 DAO 添加一个删除方法，但我不知道该怎么做.

这是我添加到 DAO 类的代码：

```
Player player = em.find(Player.class);
em.remove(player); 
```

是否可以添加 CRUD 功能？我想让代码尽可能简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:00:30.207

这当然是可能的，并且您已经拥有该代码的一半，因此创建一个执行此操作的方法应该不难:-) 只需将其放入您的 bean

```
public void removePlayer(Long playerId) {
    Player p = em.find(Player.class, id);
    em.remove(p);
} 
```

尝试阅读一些关于 JPA 的内容，学习起来并不难（除非你真的很深入），而且你在这里问一些你可以在两分钟内用谷歌搜索到的东西:-)

# r - 将多因素方差分析 [TRAMINER] 导出到乳胶

> ID：14307875
> 
> 赞同：3
> 
> 时间：2013-01-13T19:49:42.523
> 
> 标签：r, sequences, anova, traminer

我尝试以乳胶表格的形式导出序列的多因素分析结果。我试图这样做，`xtable()`但 R 说它## Heading ## 不能用这个功能来做......有人会有想法吗？

```
XXX.mfac <- dissmfacw(XXX.dist ~ variable1 + variable2 + variable3, data = XXX, R = 1000)
print(XXX.mfac)
xtable(XXX.mfac) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:06:25.287

您要打印的表格位于元素“mfac”中。因此，您可以使用：

```
xtable(XXX.mfac$mfac)
print(xtable(XXX.mfac$mfac), include.rownames=F) 
```

希望这可以帮助。

# c++ - 位域操作

> ID：14307878
> 
> 赞同：2
> 
> 时间：2013-01-13T20:35:44.217
> 
> 标签：c++, bit-fields

在下面的代码中

```
#include <iostream>

using namespace std;
struct field
{
   unsigned first : 5;
   unsigned second : 9;
};
int main()
{
   union
   {
      field word;
      int i;
   };
   i = 0;
   cout<<"First is : "<<word.first<<" Second is : "<<word.second<<" I is "<<i<<"\n";
   word.first = 2;
   cout<<"First is : "<<word.first<<" Second is : "<<word.second<<" I is "<<i<<"\n";
   return 0;
} 
```

当我初始化 word.first = 2 时，正如预期的那样，它会更新单词的 5 位，并给出所需的输出。'i' 的输出有点令人困惑。当 word.first = 2 时，i 给出的输出为 2，当我执行 word.second = 2 时，i 的输出为 64。由于它们共享相同的内存块，后一种情况下的输出（对于 i）不应该是2？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T20:37:33.190

这个特定的结果是特定于平台的；你应该阅读[*字节序*](http://en.wikipedia.org/wiki/Endianness)。

但是要回答你的问题，不，`word.first`不要`word.second`共享记忆；它们占据不同的位。显然，您平台上的基本表示如下：

```
bit   15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
     |     |         second           |    first     |
     +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
     |<------------------- i ----------------------->| 
```

所以设置`word.second = 2`设置位#6 of `i`, 和 2 ⁶ = 64。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:47:58.593

虽然这取决于您的平台和您的特定编译器，但在您的情况下会发生这种情况：

联合将 int 和 struct 覆盖到同一内存上。现在让我们假设您的 int 大小为 32 位。同样，这取决于多种因素。您的内存布局将如下所示：

```
IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  SSSSSSSSFFFFFF

```

其中**I**代表整数，**S**代表第二个字段，**F**代表结构的第一个字段。请注意，我在左边代表了最重要的位。

当您将整数初始化为零时，所有位都设置为零，因此 first 和 second 也为零。当您将 word.first 设置为 2 时，内存布局变为：

```
000000000000000000000000000000010
IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  SSSSSSSSFFFFFF

```

这导致整数的值为 2。但是，通过将 word.second 的值设置为 2，内存布局变为：

```
000000000000000000000000001000000
IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  SSSSSSSSFFFFFF

```

这为您提供了 64 的整数值。

# ios - iOS：电子邮件发送被冻结

> ID：14307879
> 
> 赞同：1
> 
> 时间：2013-01-13T20:36:05.257
> 
> 标签：ios, email

我正在尝试使用以下代码发送电子邮件 - 我没有收到任何错误，并且电子邮件客户端将加载，但它不会发送电子邮件：

```
- (IBAction)emailButtonPressed {
    MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];

controller.mailComposeDelegate = self;

NSString *docsDir;
NSArray *dirPaths;
sqlite3_stmt    *statement;
// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

// Build the path to the database file
databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"ral.db"]];

const char *dbpath = [databasePath UTF8String];

self.html = [NSMutableString stringWithFormat:@"<html><head></head><body>Key: <table> <tr> <td style='border: solid 1px #f75fea; text-align: center; background-color: #ed9ce6;'>&nbsp;&nbsp;X&nbsp;&nbsp;</td> </tr> </table> Start of Cycle,<table> <tr> <td style='border: solid 1px #f75fea; text-align: center;'>&nbsp;&nbsp;M&nbsp;&nbsp;</td> </tr> </table> Mild Pain, <table>  <tr> <td style='border: solid 1px #f75fea; text-align: center;'>&nbsp;&nbsp;S&nbsp;&nbsp;</td> </tr> </table> Severe Pain<br/><br/><br/><table><tr>"];

int i = 0;

if (sqlite3_open(dbpath, &ral) == SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat: @"SELECT * from DIARY order by _id"];

    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(ral, query_stmt, -1, &statement, NULL) == SQLITE_OK)
    {
        while (sqlite3_step(statement) == SQLITE_ROW)
        {
            if ((i == 14) || (i == 28) || (i == 42) || (i == 56) || (i == 70) || (i == 84) || (i == 98) || (i == 112)) {
                [self.html appendString:@" </tr> <tr> "];
            }

            //create an image view
            NSMutableString *timeStamp = [[NSMutableString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];

            NSString *timeStamp_  = [[NSString stringWithFormat:@"%@", timeStamp] substringToIndex:5];

            NSMutableString *periodStart = [[NSMutableString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 2)];
            NSMutableString *painValue = [[NSMutableString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 3)];
            [self.html appendString:[NSString stringWithFormat:@" <td> <table> <tr> <td style='font-family: arial; color:#777;'> %@ </td> </tr> ", timeStamp_]];

            [self.html appendString:[NSString stringWithFormat:@"<tr> <td style='border: solid 1px #f75fea; text-align: center; background-color: #ed9ce6; width: 20px; height: 20px;font-family: arial; color:#333;'>&nbsp;%@&nbsp;</td> </tr> ", periodStart]];

            [self.html appendString:[NSString stringWithFormat:@"<tr> <td style='border: solid 1px #f75fea; text-align: center; width: 20px; height: 20px;font-family: arial; color:#333;'>&nbsp;%@&nbsp;</td> </tr> </table> </td>", painValue]];

            i = i + 1;
        }
        sqlite3_finalize(statement);
    }
    sqlite3_close(ral);
}
[self.html appendString:@"</table></body></html>"];

NSString *tempHtml = self.html;

[controller setSubject:@"Pain diary"];
[controller setMessageBody:[NSString stringWithFormat: @"%@", tempHtml] isHTML:YES];

// Show email view
Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
if (mailClass != nil) {
    // We must always check whether the current device is configured for sending emails
    if ([mailClass canSendMail]) {
        [self presentModalViewController:controller animated:YES];
    } else {
        //do something
        NSLog(@"cant send mail");
    }
} else {
    //do something
    NSLog(@"class not instantiated");

}
} 
```

谁能明白为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:44:41.183

我意识到我需要从我的代码中捕获发送事件

像这样

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
[self dismissModalViewControllerAnimated:YES];
} 
```

# sml - SML 列表求和

> ID：14307887
> 
> 赞同：2
> 
> 时间：2013-01-13T20:36:49.223
> 
> 标签：sml

我对 SML 很陌生，我正在尝试一个列表练习。目标是总结列表的先前数字并创建一个新列表。例如，输入列表`[1, 4, 6, 9]`将返回`[1, 5, 11, 20]`.

到目前为止，这是我的解决方案，但我认为问题在于我如何定义函数。

```
fun rec sum:int list -> int list = 
    if tl(list) = nil then 
      hd(list)
    else 
      hd :: sum((hd(tail) + hd(tl(list)))::tl(tl(list))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T01:55:51.027

除了您使用 rec 作为函数名之外，您还有一些小问题需要处理。

*   您所做的显式类型注释被视为函数结果的注释。因此，根据您所写的内容，它应该返回一个函数而不是预期的列表。从下面的例子可以清楚地看出这一点：

    ```
    - fun rec_ sum : int list -> int list = raise Domain;
    val rec_ = fn : 'a -> int list -> int list 
    ```

*   当您不对列表中的元素数量进行任何检查时，您应该小心使用 head 和 tail 函数。这可以通过长度函数来完成，或者（甚至更容易并且通常更好）通过模式匹配元素的数量来完成。

*   您的代码包含 sum 作为函数调用和 tail 作为变量。变量 tail 从未定义过，使用 sum 作为函数调用，让我相信您实际上是在使用 rec 作为关键字，但不知道它是什么意思。

    在使用 val 关键字定义函数时，使用关键字 rec。在这种情况下，需要 rec 才能定义递归函数（这并不奇怪）。实际上，关键字 fun 是 val rec 的语法糖（派生形式）。

以下 3 个是如何制作它的示例：

第一个是简单、直接的解决方案。

```
fun sumList1 (x::y::xs) = x :: sumList1 (x+y::xs)
  | sumList1 xs = xs 
```

第二个示例使用了一个辅助函数，并添加了一个参数（累加器）。该列表以相反的顺序构造，以避免使用慢速附加 (@) 运算符。因此，我们在返回之前反转列表：

```
fun sumList2 xs =
    let
      fun sumList' [] acc  = rev acc
        | sumList' [x] acc = rev (x::acc)
        | sumList' (x :: y :: xs) acc = sumList' (y+x :: xs) (x :: acc)
    in
      sumList' xs []
    end 
```

最后一个例子，如果你使用标准的列表函数，展示它是多么的小和容易。这里使用左折叠来遍历所有元素。再次注意，列表是以相反的顺序构造的，因此它作为最后一步被反转：

```
fun sumList3 []      = []
  | sumList3 (x::xs) = rev (foldl (fn (a, b) => hd b + a :: b) [x] xs) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T21:13:43.670

尝试这个 -

```
fun recList ([], index, sum) = []
  | recList (li, index, sum) =
    if index=0 then
        hd li :: recList (tl li, index+1, hd li)
    else
      sum + hd li :: recList (tl li, index+1, sum + hd li)

fun recSum li = recList (li, 0, 0) 
```

在你的情况下 -

```
recSum([1,4,6,9]) ; 
```

会给

```
val it = [1,5,11,20] : int list 
```

也不要`rec`用作有趣的名称 -it 关键字。

# java - apache commons net - completependingcommand 返回 false

> ID：14307898
> 
> 赞同：4
> 
> 时间：2013-01-13T20:38:14.587
> 
> 标签：java, ftp, apache-commons-net

我正在使用 apache commons net 库从 FTP 服务器获取文件。

我不需要下载整个文件，只需读取标题以确定文件大小。我用来执行此操作的库是[元数据提取器](http://drewnoakes.com/code/exif/)

问题是当我调用**client.completePendingCommand()**它总是返回 false - 但是日期变量打印正确。我问过元数据提取器的开发人员，他不知道为什么它返回错误。有人有解释吗？我不确定是否可以忽略错误？

```
FTPClient client = new FTPHTTPClient(proxy settings);
InputStream stream = null;
try {
        client.connect(FTPProperties.getInstance().getProperty("ftp.server"));
        client.login(FTPProperties.getInstance().getProperty("ftp.username"), FTPProperties.getInstance().getProperty("ftp.password"));
        client.enterLocalPassiveMode();

        for (String path : paths) { //paths are the jpeg files to download
            try {
                stream = client.retrieveFileStream(p);

                Metadata metadata = ImageMetadataReader.readMetadata(stream);
                Directory directory = metadata.getDirectory(ExifSubIFDDirectory.class);
                Date date = directory.getDate(ExifSubIFDDirectory.TAG_DATETIME_ORIGINAL);
                System.out.println("DATE " + date);
            } catch (IOException ex) {
                Logger.getLogger(UploadImage.class.getName()).log(Level.SEVERE, null, ex);
            } finally {
                if(stream != null) {
                  stream.close();
                }
                if (in != null) {
                    in.close();
                }
                if (!client.completePendingCommand()) {
                     Logger.getLogger("Error");
                }
            }
        }
    } catch (Exception ex) {
        Logger.getLogger(UploadImage.class.getName()).log(Level.SEVERE, null, ex);
    } finally {
        if (client != null && client.isConnected()) {
            client.disconnect();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:27:22.783

我不认为你做错了什么，我不认为元数据提取器有什么问题。您最好检查您正在检索的流是否可以正确处理，而不是使用 completePendingCommand() 作为成功的指示。如果出现问题，元数据提取器可能已经通过抛出异常来为您执行此操作。

**说明：** completePendingCommand() 验证整个事务是否成功，成功或失败取决于 FTPClients 回复代码在 200 <= replyCode < 300 ( [http://commons.apache.org/proper/commons-net/范围内apidocs/src-html/org/apache/commons/net/ftp/FTPReply.html#line.133](http://commons.apache.org/proper/commons-net/apidocs/src-html/org/apache/commons/net/ftp/FTPReply.html#line.133)）。

我遇到了类似的问题，发现我的 FTPClient 对象的回复代码为 150，这表明根据 FTP 服务器，事务尚未完成。回复代码 150 是肯定的初步回复，但不属于肯定的完成回复（[https://www.rfc-editor.org/rfc/rfc959](https://www.rfc-editor.org/rfc/rfc959)第 37 页）。我的观点是响应仍然是积极的，虽然我认为我已经完成了交易，但 FTP 服务器仍然认为我需要做点什么。这可能是 org.apache.commons.net.ftp.FTPClient 或与之交互的 FTP 服务器的问题。

# java - 多线程基准测试

> ID：14307900
> 
> 赞同：2
> 
> 时间：2013-01-13T20:38:29.247
> 
> 标签：java, multithreading, benchmarking, synchronized

我想测量 2 个线程计数到 1000 需要多长时间。如何对以下代码进行基准测试？

```
public class Main extends Thread {
    public static int number = 0;

    public static void main(String[] args) {

        Thread t1 = new Main();
        Thread t2 = new Main();

        t1.start();
        t2.start();

        try {
            t1.join();
            t2.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void run() {
        for (int i = 0; i <= 1000; i++) {
            increment();
            System.out.println(this.getName() + " " + getNumber());
        }
    }

    public synchronized void increment() {
        number++;
    }

    public synchronized int getNumber() {
        return number;
    }
} 
```

为什么即使我使用`synchronized`关键字我仍然得到以下结果（提取）？

```
Thread-0 9
Thread-0 11
Thread-0 12
Thread-0 13
Thread-1 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:45:46.323

输出不同步。场景是：

1.  Thread-0 单独运行 9 次迭代。
2.  Thread-1 调用 increment 和 getNumber，返回`10`.
3.  Thread-0 再运行三个迭代。
4.  Thread-1 调用 println 与`10`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:47:00.613

你没有同步这个：

```
 for (int i = 0; i <= 1000; i++) {
        increment();
        System.out.println(this.getName() + " " + getNumber());
    } 
```

所以，一个线程可以执行`increment()`，等待下一个线程，然后继续`getValue()`（从而得到你的结果）。鉴于添加值的速度有多快，更改线程会为多次迭代提供其他时间。

做 public static final String LOCK = "lock";

```
synchronized(LOCK) {
   for (int i = 0; i <= 1000; i++) {
        increment();
        System.out.println(this.getName() + " " + getNumber());
    }
} 
```

您不需要`synchronize`方法（正如我在评论中解释的那样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T20:48:05.653

> 为什么即使我使用了 synchronized 关键字，我仍然得到以下结果（提取）？

您同步对`number`变量的访问，但是增量和获取是分开同步的，这也不会使您的`println()`原子化。这个顺序是完全可能的：

```
0 -> inc
1 -> inc
0 -> getnumber
1 -> getnumber
1 -> print
0 -> print 
```

首先，如果要解决“增量和获取”问题，可以使用`AtomicInteger`：

```
private static final AtomicInteger count = new AtomicInteger(0);

// ...

@Override
public void run()
{
    final String me = getName();

    for (int i = 0; i < 1000; i++)
        System.out.println(me + ": " + count.incrementAndGet());
} 
```

但是，即使这样也不能保证打印顺序。使用上面的代码，这种情况仍然是可能的：

```
0 -> inc
0 -> getnumber
1 -> inc
1 -> getnumber
1 -> print
0 -> print 
```

要解决此问题，您需要使用例如 a `ReentrantLock`：

```
private static final Lock lock = new ReentrantLock();
private static int count;

// ...

@Override
public void run()
{
    final String me = getName;

    for (int i = 0; i < 1000; i++) {
        // ALWAYS lock() in front of a try block and unlock() in finally
        lock.lock();
        try {
            count++;
            System.out.println(me + ": " + count);
        finally {
            lock.unlock();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T20:49:02.930

你没有同步。`synchronized`关键字等效于`synchonize (this) {}`但您正在增加一个`static`不包含在您的对象中的数字。您实际上有 2 个对象/线程，并且它们都与自己同步，而不是彼此同步。

要么让你成为财产`volatile`并且根本不同步，要么使用这样的锁定对象：

```
public static int number = 0;
public static final Object lock = new Object();

public void increment() {
    synchronized (lock) {
        number++;
    }
}

public int getNumber() {
    synchronized (lock) {
        return number;
    }
} 
```

# jersey - Jersey 客户端基于表单的身份验证

> ID：14307902
> 
> 赞同：1
> 
> 时间：2013-01-13T20:38:49.377
> 
> 标签：jersey

是否可以使用 Jersey 客户端进行基于表单的身份验证？

# c++ - C++ LLVM 类功能

> ID：14307906
> 
> 赞同：9
> 
> 时间：2013-01-13T20:39:51.777
> 
> 标签：c++, class, llvm

我正在玩 LLVM，但现在我被困在为类生成代码上。

如何使用 LLVM 创建类功能？

*   类运算符是否像函数一样处理？
*   如何处理自动分配（如 C++）？
*   如何通过像 C++ 这样的虚拟继承来支持像 Java 这样的接口？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T21:41:40.623

# 长版

## 一般类行为

一种直接的方法是创建结构，然后将方法建模为常规函数，这些函数接收指向表示包含类的结构的指针——本质上是一个`this`指针——作为第一个参数。分配可以通过分配结构然后在分配的数据上调用特殊的初始化函数（实际上是构造函数）来建模。

继承可以通过构建一个结构来完成，该结构包含一个特殊的“父”字段（或多个字段，用于多重继承），其类型与基类的结构类型相同。

## 多态性

阅读有关虚拟表的信息；我认为他们是最好的起点。你可以发现编译器基本上是：

1.  在内存中创建一个静态表，从函数“名称”映射到它的实现，
2.  添加指向指向此类表的类结构的指针，
3.  每当调用虚拟方法时，将其编译为间接调用，该调用从适当的虚拟表条目中取消引用地址。

# 简洁版本

编写一些使用 C++ 中的类的代码，然后使用 Clang 将其编译为 LLVM IR 并查看生成的代码。

# spring - Spring Batch：重启一个作业，然后自动开始下一个作业

> ID：14307908
> 
> 赞同：4
> 
> 时间：2013-01-13T20:40:07.413
> 
> 标签：spring, spring-batch

我需要创建一个恢复模式。在我的模式中，我只能在给定的时间窗口内启动工作。如果作业失败，它只会在下一个时间窗口重新启动，完成后我想启动为此窗口提前计划的计划作业。作业之间的唯一区别是时间窗口参数。

我考虑将 JobExecutionDecider 与 JobExplorer 结合使用或覆盖 Joblauncher。但一切似乎都太突兀了。

我没有找到一个符合我需要的例子，任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-11T19:46:28.230

只是为了回顾一下根据不完整代码提供的建议实际做了什么。我创建了一个类似于下面的恢复流程。恢复流程包含了我的实际批次，并且只负责为内部作业提供正确的作业参数。它可以是第一次执行时的初始参数，正常执行时的新参数或最后一次执行失败时的旧参数。

```
<batch:job id="recoveryWrapper"
       incrementer="wrapperRunIdIncrementer"
       restartable="true">
    <batch:decision id="recoveryFlowDecision" decider="recoveryFlowDecider">
        <batch:next on="FIRST_RUN" to="defineParametersOnFirstRun" />
        <batch:next on="RECOVER" to="recover.batchJob " />
        <batch:next on="CURRENT" to="current.batchJob " />
    </batch:decision>
    <batch:step id="defineParametersOnFirstRun" next="current.batchJob">
        <batch:tasklet ref="defineParametersOnFirstRunTasklet"/>
    </batch:step>
    <batch:step id="recover.batchJob " next="current.batchJob">
        <batch:job ref="batchJob" job-launcher="jobLauncher"
                            job-parameters-extractor="jobParametersExtractor" />
    </batch:step>
    <batch:step id="current.batchJob" >
       <batch:job ref="batchJob" job-launcher="jobLauncher"
                            job-parameters-extractor="jobParametersExtractor" />
    </batch:step>
</batch:job> 
```

该解决方案的核心是使用**Spring Batch Restart**机制时的**RecoveryFlowDecider**和 **JobParametersExtractor 。**RecoveryFlowDecider 将查询 JobExplorer 和 JobRepository 以了解我们在上次运行中是否失败。它将把最后一次执行放在包装器的执行上下文中，以便稍后在 JobParametersExtractor 中使用。请注意使用 runIdIncremeter 允许重新执行包装作业。

 **```
@Component
 public class RecoveryFlowDecider implements JobExecutionDecider {
        private static final String FIRST_RUN = "FIRST_RUN";
        private static final String CURRENT = "CURRENT";
        private static final String RECOVER = "RECOVER";

        @Autowired
        private JobExplorer jobExplorer;
        @Autowired
        private JobRepository jobRepository;

        @Override
        public FlowExecutionStatus decide(JobExecution jobExecution
                                         ,StepExecution stepExecution) {
            // the wrapper is named as the wrapped job + WRAPPER
            String wrapperJobName = jobExecution.getJobInstance().getJobName();
            String jobName;
             jobName = wrapperJobName.substring(0,wrapperJobName.indexOf(EtlConstants.WRAPPER));
            List<JobInstance> instances = jobExplorer.getJobInstances(jobName, 0, 1);
                JobInstance internalJobInstance = instances.size() > 0 ? instances.get(0) : null;

            if (null == internalJobInstance) {
                return new FlowExecutionStatus(FIRST_RUN);
            }
            JobExecution lastExecution = jobRepository.getLastJobExecution(internalJobInstance.getJobName()
    ,internalJobInstance.getJobParameters());
            //place the last execution on the context (wrapper context to use later)
            jobExecution.getExecutionContext().put(EtlConstants.LAST_EXECUTION, lastExecution);
                ExitStatus exitStatus = lastExecution.getExitStatus();

            if (ExitStatus.FAILED.equals(exitStatus) || ExitStatus.UNKNOWN.equals(exitStatus)) {
                return new FlowExecutionStatus(RECOVER);
            }else if(ExitStatus.COMPLETED.equals(exitStatus)){
                return new FlowExecutionStatus(CURRENT);    
            }
            //We should never get here unless we have a defect
            throw new RuntimeException("Unexpecded batch status: "+exitStatus+" in decider!");

        }

} 
```

然后 JobParametersExtractor 将再次测试上次执行的结果，如果作业失败，它将提供用于执行失败作业的原始参数，从而触发 Spring Bacth 重启机制。否则，它将创建一组新的参数，并将按照他的正常路线执行。

```
 @Component
    public class JobExecutionWindowParametersExtractor implements
            JobParametersExtractor {
        @Override
        public JobParameters getJobParameters(Job job, StepExecution stepExecution) {

            // Read the last execution from the wrapping job
            // in order to build Next Execution Window
            JobExecution lastExecution= (JobExecution) stepExecution.getJobExecution().getExecutionContext().get(EtlConstants.LAST_EXECUTION);;

            if(null!=lastExecution){
                if (ExitStatus.FAILED.equals(lastExecution.getExitStatus())) {
                    JobInstance instance = lastExecution.getJobInstance();
                    JobParameters parameters = instance.getJobParameters();                 
                                return parameters;
                }
            }       
            //We do not have failed execution or have no execution at all we need to create a new execution window
            return buildJobParamaters(lastExecution,stepExecution);
        }
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:32:32.487

你考虑过JobStep吗？也就是说，一个步骤确定是否有任何其他作业要运行。这个值被设置到 StepExecutionContext 中。JobExecutionDecider 然后检查这个值；如果存在，则指向启动 Job 的 JobStep。

这是上面的文档[http://docs.spring.io/spring-batch/reference/htmlsingle/#external-flows](http://docs.spring.io/spring-batch/reference/htmlsingle/#external-flows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:55:55.620

是否有可能以相反的方式做到这一点？

在每个时间窗口中，提交针对该时间窗口的作业。

但是，作业的第一步应该检查上一个时间窗口中的作业是否成功完成。如果之前失败，则提交上一个作业，并等待完成，然后再进入自己的逻辑。**

# cocoa - 使用自动布局来定位 NSWindow

> ID：14307914
> 
> 赞同：1
> 
> 时间：2013-01-13T20:40:40.510
> 
> 标签：cocoa, nswindow, autolayout

是否可以使用自动布局在屏幕上定位窗口？

我想设置约束以相对于 NSStatusItem 定位窗口。我希望窗口在 NSStatusItem 下方居中，但也不能部分在屏幕外。因此，我需要相对于 NSStatusItem 居中的弱约束和保持与屏幕边缘的最小距离的强约束。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T21:14:54.027

自动布局无法定位窗口。布局引擎按窗口工作以在该窗口内布局视图。

幸运的是，这个特殊的布局问题看起来并不太难完成旧方法。假设它适合，则在 NSStatusItem 下方绘制窗口框架。然后检查该框架是否与屏幕边缘相交。如果有，将其向左轻推，直到没有。

# ruby-on-rails - 帐户限制的 HTTP 状态代码和 json 内容？

> ID：14307916
> 
> 赞同：1
> 
> 时间：2013-01-13T20:41:15.817
> 
> 标签：ruby-on-rails, json, api, http-headers

我有可以是免费帐户或付费帐户的用户帐户。免费帐户仅限于创建 5 个资源。用户使用 JSON API 创建这些。如果用户达到了 5 个资源的帐户限制，然后尝试创建另一个资源，我应该如何应对？什么是合适的 HTTP 状态码，json 的内容应该是什么？

另外，这有点不相关，当用户删除单个资源时，JSON 响应内容应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:03:40.870

有一个 HTTP 状态代码 402 代表“需要付款”，这似乎最适合您的情况。401“未经授权”也可能是合适的并且可能被更广泛地使用。在 Wikipedia 上有更多关于[401 和 402 状态码的信息](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)。无论您选择哪种方式，[Rails 都有它们的符号表示](http://www.codyfauser.com/2008/7/4/rails-http-status-code-to-symbol-mapping)。

文章中的大约 402 条：

> 保留供将来使用。最初的意图是这个代码可能会被用作某种形式的数字现金或小额支付计划的一部分，但这并没有发生，而且这个代码通常不被使用。然而，作为其使用示例，如果 MobileMe 帐户拖欠，Apple 的 MobileMe 服务会生成 402 错误。[需要引用] 此外，如果特定 IP 地址提出过多请求，YouTube 会使用此状态，并要求此人输入验证码。

关于何时删除资源，我通常选择 204“No Content”或 200“Ok”

# c++ - Qt Item角色实现

> ID：14307917
> 
> 赞同：2
> 
> 时间：2013-01-13T20:41:25.730
> 
> 标签：c++, qt

Qt Item 角色机制是如何实现的？只是存储在支持角色的类中的某种映射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:10:11.130

项目角色用于检索给定模型索引的不同数据，例如列表模型中的文本、图标、工具提示等。它们的实现方式取决于模型。

QStandardItemModel 确实在内部使用了 QMap（角色到值）。

对于自定义模型，通常使用 if 或 switch 语句为不同的角色返回不同的数据：

```
QVector<SomeObject> m_data;

QVariant SomeListModel::data( const QModelIndex& index, int role ) const {
    const SomeObject& so = m_data[index.row()];
    switch ( role ) {
    case Qt::DisplayRole:
        return so.name();
    case Qt::DecorationRole:
        return so.icon();
    case Qt::ToolTipRole:
        return so.details();
    case SomeObjectRole: // Custom role, SomeObjectRole=Qt::UserRole
        return QVariant::fromValue<SomeObject>( so );
    default:
        break;
    }

    return QVariant();
} 
```

快速的 index() 和 data() 方法对于获得高效的模型很重要，因此要避免映射查找以及与项目数量（此处为 m_data 的大小）相关的其他所有不是 O(1) 的事情。

# android - 为 ListView 编写自定义适配器

> ID：14307924
> 
> 赞同：0
> 
> 时间：2013-01-13T20:41:51.433
> 
> 标签：android, listview, baseadapter

我正在尝试制作项目列表，其中每个项目可能有其他项目与它连接的值。就像是：

*   项目 1
*   **SubItem1.1 - val1
*   **SubItem1.2 - val2
*   第 2 项
*   **SubItem2.1 - val3
*   第 3 项
*   **SubItem3.1 - val4
*   **SubItem3.2 - val5
*   **SubItem3.3 - val6

每个项目可能有动态数量的项目和动态数量的子项目。每个子项始终有一个值。项目、子项目和值是从数据库中找到的，但是有一个计算算法可以为每个项目获取正确的子项目和值，所以我认为我不能直接使用 SimpleCursorAdapter。

我应该如何编写这个适配器以及 xml 文件应该是什么样子。我需要两个带有 ListView 的 xml 文件吗？（因为基本上有两个列表？（一个带有项目，每个带有子项目/值的项目一个列表））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:50:12.947

如果您的数据来自 a `Cursor`，[那么这个实现](https://github.com/monxalo/android-section-adapter)看起来很有趣。否则，[此实现](http://code.google.com/p/android-section-list/)工作正常。

最后，您可以从[RoboSpice 动机回购](https://github.com/octo-online/RoboSpice-samples/tree/master/robospice-motivations)中获得一个：用于更静态的数据集。

您应该非常小心，在您`getView`的方法内部使用回收的视图池并避免实例化太多对象。为了避免使用 instanceof（因为它很昂贵）来测试回收的视图，您必须正确使用`getViewTypeCount`和`getViewType`。

# remote-debugging - 如何设置 Google 的 v8 javascript 独立引擎进行远程调试？

> ID：14307929
> 
> 赞同：6
> 
> 时间：2013-01-13T20:42:25.163
> 
> 标签：remote-debugging, v8, embedded-v8

如何设置/构建/运行 Google 的 V8 引擎，以便我可以调用示例 javascript 文件并看到它逐步解释为 C++ 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:09:51.697

更新：这是过去的样子。

V8 [wiki 页面](http://code.google.com/p/v8/wiki/AddDebuggerSupport)提供了示例“lineprocessor.cc”程序，该程序运行自定义 JavaScript 并说明如何启用这些脚本的调试。

# jquery - IE: SCRIPT5009: 'e' 未定义

> ID：14307930
> 
> 赞同：1
> 
> 时间：2013-01-13T20:42:28.743
> 
> 标签：jquery, internet-explorer

我正在使用[Galleriffic](http://www.twospy.com/galleriffic/)插件，它在 Chrome 和 Firefox 中运行良好，但在 IE 中运行良好并返回**`SCRIPT5009: 'e' is undefined`**。jQuery dodo：

```
// Initialize history plugin.
// The callback is called at once by present location.hash. 
$.historyInit(pageload, "advanced.html");

// set onlick event for buttons using the jQuery 1.3 live method
$("a[rel='history']").live('click', function () {
    if (e.button != 0) return true;

    var hash = this.href;
    hash = hash.replace(/^.*#/, '');

    // moves to a new page. 
    // pageload is called at once. 
    // hash don't contain "#", "?"
    $.historyLoad(hash);

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T20:45:18.977

看起来您缺少事件参数。`e`在函数调用中添加一个。

```
$("a[rel='history']").live('click', function (e) {
if (e.button != 0) return true; 
```

# vba - Access 中的循环表行，使用或不使用 Private Const

> ID：14307931
> 
> 赞同：2
> 
> 时间：2013-01-13T20:42:34.363
> 
> 标签：vba, ms-access, loops

我在这里做一些 VBA 编程，我有`Private Const`两个元素，如下所示：

```
Private Const myList as String = "foo;bar" 
```

然后我有一个这样的循环结构：

```
myTerms = Split(myList,";")
For I = 0 to UBound(myTerms)
   'do stuff in here
Next I 
```

最后，这是新的部分。在 tblWords 中有 100 个不同的行，仅由一个 ID 字段和一个文本字段（例如`tblWords.ID`和）组成`tblWords.Word`。

我的问题是：`Private Const`我如何修改我的循环而不是使用 and 循环两次，以便它循环`tblWords`100 次，每行一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:46:40.860

我想你的意思是

```
Dim rs As DAO.Recordset
Dim db As Database

Set db = CurrentDB
Set rs = db.OpenRecordset("tblWords")

Do While Not rs.EOF
   sid = rs!ID
   sword = rs!word

   ''And to change a word
   rs.Edit
   rs!Word = rs!Word & " edited"
   rs.Update

   rs.MoveNext
Loop 
```

# android - 用于应用程序开发的安卓手机

> ID：14307938
> 
> 赞同：5
> 
> 时间：2013-01-13T20:43:16.813
> 
> 标签：android, android-ndk

我计划将我的几个应用程序从 iPhone 移植到 Android 平台。

我计划在 Android 上从头开始构建这些，因此不需要从 ObjectiveC 到 Java 的可移植工具（如果你知道的话，你可以提一下）。

我是 Android 平台的新手，需要一些关于购买哪款手机进行开发的建议。顺便说一句，我正在开发的新游戏是使用 Corona-SDK 构建的，因此平台也必须支持它。

请帮助我：

1.  哪种设备可以帮助我开发更便携的应用程序（可以在更多设备上运行）？我需要在那里看什么？
2.  寻找哪个操作系统？

价格不是问题。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T20:49:12.147

理论上，您甚至可以在没有 Android 手机的情况下开发 Android 应用程序。有一个模拟器选项可用于调试您的应用程序。以下是有关模拟器的一些信息：

[http://developer.android.com/tools/help/emulator.html](http://developer.android.com/tools/help/emulator.html)

和这里：

[http://developer.android.com/tools/devices/emulator.html](http://developer.android.com/tools/devices/emulator.html)

您说过您正在开发游戏（我相信），因此屏幕上的计算机模拟器并不能真正帮助您很好地测试“游戏”。我真的不明白你的意思

*“哪种设备可以帮助我开发更便携的应用程序（可以在更多设备上运行）？”*

一般来说，任何 Android 应用程序都是可移植的。如果您想要一款可以处理“大型”游戏的手机/设备，请购买双核设备。

如果您正在寻找最受欢迎的 Android 操作系统版本，那么您可以开发您的应用程序以瞄准更多的受众，请查看此处的统计数据：

[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T20:48:38.757

这取决于您将要开发的应用程序的类型。如果您要遵循所有设计指南，通常应该让您的应用程序在 4 英寸手机、7 英寸平板电脑和 10 英寸平板电脑上看起来很棒（这是非常通用的）。所以我建议你从 Nexus 4 -> 7 -> 10 开始购买 Nexus 设备。

关于它们的一个好处是，Android 最新更新总是首先可供他们使用，并且这些设备被广泛使用。您还应该获得一些 2.2 和 2.3 设备；如果它们不是新的，它们将很容易获得，这样做的原因是它们仍然占据着很大的市场份额。

# html - 使用 iframe 进行 ajax 上传

> ID：14307940
> 
> 赞同：0
> 
> 时间：2013-01-13T20:43:20.647
> 
> 标签：html, ajax, forms, iframe

我需要一个信息。如果我有一个表单，用于上传文件并将其定位到 iframe。
然后我使用 Ajax 来获取上传进度。假设只有 2 列的简单布局。

表单位于第 1 列，Iframe 位于第 2 列。我希望仍然能够使用第 1 列。

因此，虽然上传仍在进行中。我可以使用第 1 列显示其他页面内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:50:15.927

可能，使用预构建的解决方案可以解决您的需求并提供更强大的功能。我知道您可以在通过[Uploadify](http://www.uploadify.com/)上传时继续使用页面的其余部分。你可能想调查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:47:11.337

不要做任何事情，因为所有上传过程都必须先完成。您可以在开始上传过程之前在第 1 列中显示信息。您将无法获得任何 POST 支持，因为这将取消上传过程。

Flash/ASP 可能是您的解决方案。

# ruby-on-rails - index.html.erb 中未定义的方法“model_name”

> ID：14307943
> 
> 赞同：1
> 
> 时间：2013-01-13T20:43:51.800
> 
> 标签：ruby-on-rails, methods, controller

我有一个仪表板控制器，在 index 方法中我有 @message = Message.new( Message is my model )...在我的 index.html.erb 我有一个表单

```
<%= form_for @message do |f| %>
    <%= f.text_field :message %><br>
    <%= f.submit "Send" %>
<% end %> 
```

我在“未定义的方法`messages_path'”表单的第一行收到错误...

我的控制器中没有新方法

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:47:05.743

你有`resources :messages`路线`config/routes.rb`吗？当 Rails 尝试从参数的类创建表单的提交路由到`form_for`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:12:57.140

当您没有在 routes.rb 文件中指定相应的路由时会发生该错误，因此只需添加
`resources :messages`

或者如果您想要某些特定方法的显式路由，请将其添加到路由文件中

# orchardcms - 在 Orchard CMS 中使用替代 URL 覆盖内容类型的详细信息模板

> ID：14307947
> 
> 赞同：0
> 
> 时间：2013-01-13T20:43:57.857
> 
> 标签：orchardcms, orchardcms-1.6

有谁知道是否可以使用 url 替代模板覆盖 ContentType 的 DisplayType 模板？例如，是否可以用 Content-url-homepage-Page.Detail.cshtml 覆盖模板：Content-Page.Detail.cshtml？玩了一会儿，好像不是这样。有谁知道我想要实现的目标是否可行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:14:07.797

您可以通过启用“形状跟踪”功能并查看替代列表来查看形状的所有可用替代，例如[http://devhammer.net/blog/Customize-Orchard-CMS-with-Designer-Tools](http://devhammer.net/blog/Customize-Orchard-CMS-with-Designer-Tools)

例如，在主页的主要内容项上，我开箱即用：

```
~/Themes/MyTheme/Views/Content.cshtml
~/Themes/MyTheme/Views/Content-url-homepage.cshtml
~/Themes/MyTheme/Views/Content.Detail.cshtml
~/Themes/MyTheme/Views/Content-Page.cshtml
~/Themes/MyTheme/Views/Content-10.cshtml
~/Themes/MyTheme/Views/Content-Page.Detail.cshtml
~/Themes/MyTheme/Views/Content-10.Detail.cshtml 
```

您的选择是添加或扩展现有的替代工厂，例如 Orchard.DesignerTools.Services.UrlAlternatesFactory 例如

```
// appends [ShapeType]__url__[Url]_[DisplayType] alternates
context.ShapeMetadata.Alternates = _urlAlternates.Value.Select(url => 
    context.ShapeMetadata.Type + "__url__" + url + "_" + 
        context.ShapeMetadata.DisplayType)
        .Union(context.ShapeMetadata.Alternates)
        .ToList(); 
```

这将为您提供备用 ~/Themes/MyTheme/Views/Content-url-homepage.Detail.cshtml

或使用现有的替代品之一，例如

```
~/Themes/MyTheme/Views/Content-10.Detail.cshtml 
```

看起来它可能适合您的目的（对我来说，使用 id 不如使用 url 干净）

我还尝试调整“Url Alternates”功能的功能优先级，以便将 url 替代项附加到所有其他现有替代项，因为它从代码中显示出来是预期的，但据我所知，这不起作用或不是支持的。

# google-apps-script - 失踪 ; 声明之前的 Google Apps 脚本

> ID：14307948
> 
> 赞同：0
> 
> 时间：2013-01-13T20:44:00.100
> 
> 标签：google-apps-script

我是 Javascript 新手，我的错误是 Missing ；在第 25 行的声明之前。

另一个问题是 Java 相关的，而不是 JavaScript 相关的。

这是有问题的代码。

第 24 行函数 emailChecker(){

第 25 行 var readMessages() = DocumentApp.create();

第 26 行 var emailAddress() = Session.getActiveUser().getEmail();

第 27 行 GmailApp.getInboxUnreadCount();

第 28 行 var unreadMessages() = InboxUnreadCount();

第 29 行 GmailApp.sendEmail(emailAddress) （您有 + unreadMessages + 未读消息！）}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:47:45.903

问题出在`var readMessages() = ...`. 当您编写时`var x = something;`，您正在分配`something`给变量`x`。括号用于函数，而不是变量。试试这个：

```
var readMessages = DocumentApp.create(); 
```

# python - Python：句子拆分产生空格

> ID：14307949
> 
> 赞同：0
> 
> 时间：2013-01-13T20:44:06.667
> 
> 标签：python, python-3.x

所以我有一些句子，例如：

```
The window is over there. The lamp is on. The fire is burning. 
```

当我使用 split('.') 拆分它然后用换行符加入它时，它会丢失“。”

然后我尝试了正则表达式，`(?<=\.)\s`但它在第二个和第三个字母的第一个字母之前产生了一个空格：

```
The window is over there.
 The lamp is on.
 The fire is burning. 
```

我不想要那个额外的空间。我想：

```
The window is over there.
The lamp is on.
The fire is burning. 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:49:04.303

```
>>> test = "The window is over there. The lamp is on. The fire is burning."
>>> print test.replace(". ",".\n")
The window is over there.
The lamp is on.
The fire is burning. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T20:50:00.820

```
".\n".join(i.strip() for i in a.split(".")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T20:50:03.110

显然不处理特殊情况（即一段时间后没有空格），为什么不这样做：

```
>>> s = 'The window is over there. The lamp is on. The fire is burning.'
>>> print s.replace('. ', '.\n')
The window is over there.
The lamp is on.
The fire is burning. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T20:59:04.443

有几种处理拆分输入的方法：拆分后剥离、使用正则表达式拆分或使用简单搜索。

第一个选项可能是最直观的：您将字符串拆分为一个点，就像您已经做的那样，然后剥离结果字符串以删除任何空格并恢复尾随点。在 Python 中：

```
sentences = input.split('.')
sentences = [s.strip() + '.' for s in sentences if s]
print sentences.join('\n') 
```

A second and simpler approach is to simple replace '. ' with '.\n':

```
print input.replace('. ', '.\n') 
```

This will work with your input, but will fail if someone uses two spaces to separate sentences (which some people prefer).

The final and most flexible approach is to use a regular expression to split on the combination of a dot and whitespace:

```
import re
sentences = re.split('(?<=\.)\s*', input)
print sentences.join('\n') 
```

Notice the important difference with your regular expression: I used \s* to consume all possible whitespace. This matters in cases where there are two or more spaces, or none at all.

# javascript - 模型 findOne 方法上的 Mongoose TypeError

> ID：14307953
> 
> 赞同：6
> 
> 时间：2013-01-13T20:44:50.527
> 
> 标签：javascript, node.js, mongoose

以下 TypeError 在一些旧代码中出现。

```
TypeError: Object #<Object> has no method 'findOne' 
```

最近受影响的模型定义了两个新的静态方法，这些方法引用了外部模型。在退出新的静态方法后，我能够确定根本原因是外部模型的 require 语句。该模式如下所示：

```
var UserModel = require('./user');

var GroupSchema = new Schema({
    name: String,
    users: [{ type : Schema.ObjectId, ref: 'UserModel'}],
});

GroupSchema.statics.findSomeUsers = function(group, callback) {
    this.find({name : session_user._id}, function(err, groups) {
        UserModel.find({_id : {$in : group.users}}, function(err,patients) {
            // do magic
        });
    });
};

module.exports = mongoose.model('GroupModel', GroupSchema); 
```

应用程序中有一个代码片段调用了导致 TypeError 的 GroupModel.findOne({name:'gogo'})。当我删除 GroupSchema 中 UserModel 的 require 语句时，应用程序代码再次工作。

为什么 Javascript 开始认为 findOne() 是添加了 require 语句的实例方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-13T20:53:54.633

这是已知的 node.js 问题。这意味着您在代码中的某处需要循环，并且 node.js 禁止它。

正确的方法是使用`mongoose.model`方法。因此，`UserModel`您应该使用`mongoose.model('UserModel')`. 因此，何时`findSomeUsers`调用 mondoose 将获取`UserModel`并调用其`find`方法。

```
GroupSchema.statics.findSomeUsers = function(group, callback) {
    this.find({name : session_user._id}, function(err, groups) {
        mongoose.model('UserModel').find({_id : {$in : group.users}}, function(err,patients) {
            // do magic
        });
    });
}; 
```

# ios - CoreText 换行

> ID：14307962
> 
> 赞同：0
> 
> 时间：2013-01-13T20:46:15.457
> 
> 标签：ios, core-text

我正在尝试调整 CoreText 中的段落样式设置，以使线条流畅。我想逐字换行，但它不起作用。

这些是我的设置，我没有粘贴整个代码，因为变量名称是不言自明的并且反映了 iOS 中的设置。

```
_firstLineHeadIndent = 0.0;
_defaultTabInterval = 36.0;
_baseWritingDirection = kCTWritingDirectionNatural;
_alignment = kCTNaturalTextAlignment;
_lineHeightMultiple = 0.0;
_minimumLineHeight = 0.0;
_maximumLineHeight = 10.0;
_paragraphSpacing = 0.0;
_listIndent = 0;
_lineBreakMode = kCTLineBreakByWordWrapping; 
```

我附上截图以更清楚地说明我的意思。

![不灌装线](../Images/5552d446235a84ad85569c9b81c318e7.png)

# c# - Excel趋势线到c#代码错误？

> ID：14307964
> 
> 赞同：1
> 
> 时间：2013-01-13T20:46:35.963
> 
> 标签：c#, excel

我已经转换了以下表达式

![在此处输入图像描述](../Images/99e2f02b01961923a9efba6fd897e83d.png)

到这个函数

```
private double getRisingTemp(double x/*time*/)
{
    double y;
    y = Math.Pow(3 * 10, -12) * Math.Pow(x, 5) - Math.Pow(4 * 10, -9) * Math.Pow(x, 4) + Math.Pow(10, -6) * Math.Pow(x, 3) + 0.0005 * Math.Pow(x, 2) - 0.0302 * x + 23.826;
        return y;
} 
```

但是中的图表`C#`看起来与我在 Excel 中看到的有点不同。只是想确保我的 C# 函数 100% 对应于方程式。

[![在此处输入图像描述](../Images/a628b62ca464ce76a3f84126ae6681db.png)](https://i.stack.imgur.com/wsaIk.png)

![在此处输入图像描述](../Images/fd4054a209252b206283147c76d57e7c.png)

如果功能没问题，那可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:51:34.567

您对 x^4 和 x^5 系数的表达式不正确。`double`只需使用带有科学记数法的内置：

```
y = 3e-12 * Math.Pow(x, 5) - 4e-9 * Math.Pow(x, 4) + 1e-6 * Math.Pow(x, 3) + 0.0005 * Math.Pow(x, 2) - 0.0302 * x + 23.826; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:57:09.810

您需要查看有关 的文档`Math.Pow()`，该文档可在[此处](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)找到。例如，您的第一次转换是错误的：`Math.Pow(3 * 10, -12)`并且不对应于您的：3E-12。什么`3E-12`意思是3乘以10到12。[您可以在此处](https://math.stackexchange.com/questions/6273/what-does-e-mean-in-9-0122222900391e-5)阅读有关此内容的更多信息。

希望这对你有帮助！

# java - 几秒钟后，一个方法需要更长的时间来执行

> ID：14307966
> 
> 赞同：0
> 
> 时间：2013-01-13T20:46:37.463
> 
> 标签：java, optimization, audio, trigonometry

我有这个方法：

```
public double sineWave(double t) 
{
   return amplitude==0?0:Math.sin(t * frequency * Math.PI*2 + phase) * amplitude;
} 
```

它由另一个类中的另一个方法调用以生成简单正弦波的样本，然后将其添加到缓冲区中以发送到声卡。`t`是时候了。出于某种原因，应用程序调用此方法的次数越多，它变得越慢。这没有任何意义，15 秒后它的速度足以使用我的 CPU 的完整内核并使音频结结巴巴。

我 100% 确定是这段代码，因为如果我用 return 0 替换它，运行它所需的时间（用 测量`System.nanotime()`）是恒定的。

为什么会这样？我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T21:21:35.807

从这里的信息 - 虽然不清楚缓冲区有多大，但每次迭代都会增加 t 。假设您的频率非常高，则每次迭代都会增加 Sin() 参数。检查参数是否不断增加到非常高的值。一个快速而肮脏的测试表明，Sin 的性能下降 -

```
public class SinTest {
  public static void main(String args[]) {
    long angle = Long.parseLong(args[0]);
    long startTime = System.nanoTime();
    for(long l=0L; l<=1000000L; l++) {
      Math.sin(angle);
    }
    long estimatedTime = System.nanoTime() - startTime;
    System.out.println(estimatedTime);
  }
}

$ java SinTest 100000
29181000
$ java SinTest 10000000
138598000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:30:27.677

请不要给分，所以解决方案将给出@mk的答案：

```
public double sineWave(double t) 
{
    final double TAU = Math.PI *2;
    double a = t * frequency;
    a -= (long)a;
    return amplitude==0?0:Math.sin(a * TAU + phase) * amplitude;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:44:19.487

我用查找表解决了这个问题：

```
private static final int LUT_SIZE=1000000;
private static double[] sineLookupTable=new double[(int)(Math.PI*2*LUT_SIZE)];
static{
    for(double i=0;i<sineLookupTable.length;i++){
        sineLookupTable[(int)i]=Math.sin(i/(double)LUT_SIZE);
    }

}
private static double sinLUT(double t){
    return sineLookupTable[(int) (((long) Math.floor((t%Math.PI*2)*LUT_SIZE))%sineLookupTable.length)];
}
public double sineWave(double t) {
    return amplitude==0?0:sinLUT(t * frequency * Math.PI*2 + phase) * amplitude;
} 
```

它工作......有点，唯一的问题是我在高频上有很多失真。您可以建议一些插值方法吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-07T17:43:00.327

Java 框架的当前版本将尝试对参数进行 mod-reduce，以`Math.sin`使用数学上完美的值 2π，而不是 value `Math.PI*2`。对于像您这样的代码，这意味着与使用与乘法中使用的相同比例因子（即`Math.PI*2`）执行模归约相比，代码将花费更长的时间并且产生的结果准确度更低。为了获得良好的准确性和速度，您应该在进行乘法之前执行模减少，使用类似的方法：

```
double thisSpin = t * frequency;
thisSpin -= (thisSpin - Math.Floor(thisSpin)) * 8.0; // value of 0-7.9999=one rotation
switch((int)(thisSpin*8.0))
{
  case 0: return  Math.sin(  thisSpin   * (Math.PI/4.0));
  case 1: return  Math.cos((2-thisSpin) * (Math.PI/4.0));
  case 2: return  Math.cos((thisSpin-2) * (Math.PI/4.0));
  case 3: return  Math.sin((4-thisSpin) * (Math.PI/4.0));
  case 4: return -Math.sin((thisSpin-4) * (Math.PI/4.0));
  case 5: return -Math.cos((6-thisSpin) * (Math.PI/4.0));
  case 6: return -Math.cos((thisSpin-6) * (Math.PI/4.0));
  case 7: return -Math.sin((8-thisSpin) * (Math.PI/4.0));
  default: return 0; // Shouldn't be possible, but thisSpin==8 would be congruent to 0
} 
```

这将确保既不`sin`也不`cos`使用大于 π/4 的参数，根据文档，这是 Java 切换到使用缓慢且适得其反的范围缩小的点。

# qt4 - 从 qt4 应用程序中删除填充

> ID：14307969
> 
> 赞同：0
> 
> 时间：2013-01-13T20:46:50.237
> 
> 标签：qt4

我期待完全删除填充：

![webkit qt](../Images/59a2f4203f7465fac589f6a77db9f1d8.png)

`qtwebkit element`看看a和窗户之间那个丑陋的空间。

布局只是一个`vbox`，里面住着`webkit view`，

我试过：

```
vbox->setSpacing(0); 
```

但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:46:17.853

间距是布局中小部件之间的空间。您需要使用`setContentsMargins`方法设置内容边距。边距定义容器边缘和布局内容之间的空间。

# c# - 拦截配置元素集

> ID：14307973
> 
> 赞同：1
> 
> 时间：2013-01-13T20:47:10.713
> 
> 标签：c#, properties, setter, configurationelement

我想在设置另一个属性时设置一个配置元素属性。我用 getsection 加载配置元素，显然没有触发 set 函数。

代码：

```
 [ConfigurationProperty("type", DefaultValue = "String", IsRequired = true)]
    public DbType type
    {
        get
        {
            return (DbType)this["type"];
        }
        set
        {
            this["type"] = value;
            //^-?\d*[0-9]?(|.\d*[0-9]|,\d*[0-9])?$ décimal
            //^-?\d*[0-9]
            tabloidConfigValideur tcv = new tabloidConfigValideur();
            tcv.nom = "autoValideur" + this.valideurs.Count;
            tcv.type = tabloidConfig.validationType.regExp;
            switch(value)
            {
                case DbType.Boolean:
                    this["editeur"] = TemplateType.checkBox;
                    break;
                case DbType.Int16:
                case DbType.Int32:
                case DbType.Int64:
                    tcv.param = @"^-?\d*[0-9]";
                    tcv.message = " doit être un entier";
                    break;
                case DbType.UInt16:
                case DbType.UInt32:
                case DbType.UInt64:
                    tcv.param = @"\d*[0-9]";
                    tcv.message = "doit être un entier sans signe";
                    break;
            }

            if (WebConfigurationManager.AppSettings["valideurAuto"].ToLower()=="oui"&&string.IsNullOrEmpty(tcv.param)) this.valideurs.Add(tcv);
        }
    } 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:07:58.473

感谢所有我找到的解决方案，我从 getsection 加载的配置元素创建了一个中间对象。我现在可以使用另一个属性的集合来修改第二个属性。

# c - scanf 字符串搞砸了

> ID：14307975
> 
> 赞同：0
> 
> 时间：2013-01-13T20:47:11.807
> 
> 标签：c, string, pointers, struct, scanf

```
struct dict {
    int len;
    char (*dict0)[MAX_WORD_LEN+1];
    char (*dict1)[MAX_WORD_LEN+1];
};

/* the memory allocation */
void createDict(struct dict* myDict)
{
    (*myDict).dict0 = malloc((*myDict).len*sizeof(char));
    (*myDict).dict1 = malloc((*myDict).len*sizeof(char));
    if(((*myDict).dict0==0)||((*myDict).dict1==0))
        exit(1);
}

for(int i = 0; i < words; i++)
{
   scanf("%s", p_diction->dict0[i]);
   scanf("%s", p_diction->dict1[i]);
}

for(int i=0; i<words; i++)
{
   printf("%s ", &p_diction->dict0[i]);
   printf("%s\n", &p_diction->dict1[i]);

} 
```

`p_diction`是一个`dict`类型的指针。

我设置`words`为 11 并输入以下内容：

```
one lo
two ba
three li
day night
work eat
great terrible
terrible disaster
A a
start delay
finish never
I you 
```

但是当我`printf`检查字符串时，它们会打印以下内容：

```
one ree
two y
three rk
day eat
work rrible
great terrible
terrible art
A nish
start delay
finish never
I you 
```

关于为什么第一个`scanf`能完美地阅读它，而第二个只是从稍后出现的单词中读取随机内容的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:40:01.300

看起来您正在使用一维数组来保存多个字符串（单词），如果您以表示单词结尾的唯一字符结束每个字符串（单词），这是可能的。但是使用 vanilla 函数 scanf() 和 printf() 是不可能做到这一点的，你必须自己编写。例如，假设您以 @ 结束每个单词。以下循环会将所有单词打印到您的屏幕上。

```
int i = 0;
while((*myDict).dict0[i] != '\0')//While index dose not point to end of array
{
  for(; (*myDict).dict0[i] != '@'; i++)//Print one word a single character at a time
  {
    printf("%c", (*myDict).dict0[i]);
  }
  printf("\n"); i++;//Print a newline after the word and then increase the index by one
                    //so that it does not point to '@'.
} 
```

但是你也可以将你的 dict0 和 dict1 数组变成指针数组，其中每个元素都是一个指向单个单词的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:15:15.800

您正在重新声明 i 并且不需要（对于 printf 循环）。对于第二个循环，我已经存在，因此`i=0`足以“重新初始化”变量。

关于读取循环，`scanf`如果您使用 enter/return 分隔单词，则它是“安全的”。如果你用空格分隔它们，scanf 不是一个好的选择。第二个 scanf 正在寻找该输入/返回，如果您不通过标准输入提供它，它将失败并且它可能会存储垃圾，直到找到输入/返回（\n）。

还有一件事，你是如何声明的`pdiction`？如果你这样做：

```
struct dict *pdiction = malloc(sizeof(struct dict)); 
```

您可以通过以下方式访问其“内部”变量：

```
pdiction->len = 10; /*Setting len to 10*/ 
```

但如果你声明它，在与读/写循环相同的函数中，如下所示：

```
struct dict pdiction; 
```

您可以通过以下方式访问“内部”变量：

```
pdiction.len = 10; 
```

第二种方式是通常如何访问 C 结构。所谓的点符号。第一种方式有点像 C 的演变：使用“在字段中指向的”作为指向结构的指针是如此普遍，以至于 C 为您提供了一种更好/更容易/更易读的方式：箭头符号。我在第一种情况下写的内容与以下内容完全相同：

```
(*pdiction).len = 10; /*The (structure) pointed by pdiction in the field len*/ 
```

所以要小心。

最后，我认为您是故意这样做的，但是 printf 可能正在打印内存地址而不是实际的字符串，因为您使用的是内存地址“选择器”与符号。

[编辑] - 看到您的编辑后，我可以看到一个可能的错误。如果在您的结构中您已使用静态值声明了字符串：

```
char (*dict0)[MAX_WORD_LEN+1];
char (*dict1)[MAX_WORD_LEN+1]; 
```

您不需要为它们“重新分配”空间。您需要的是有一个字符串向量或一个字典向量。访问`pdiction->dict[i]`只是一个字符。如果你想要一个向量，你需要改变你的分配。

我会通过仅在结构中声明指针并稍后进行向量分配而不是拥有dicts（structs）的向量来做到这一点。

您可以通过将结构更改为此：

```
struct dict {
    int len;
    char **dict0;
    char **dict1;
}; 
```

然后你必须在函数中分配你的向量：

```
pdiciton->dict0 = malloc(NUMBER_OF WORDS * sizeof (char*));
for(i=0;i<NUMBER_OF_WORDS;i++)
   pdiction->dict0[i] = malloc(MAXIMUM_SIZE_OF_A_WORD*sizeof(char)); 
```

dict1 也一样。这可能看起来很奇怪，但如果你仔细想想，这实际上是一个逻辑：如果一个字符串是一个字符向量，那么一个字符串向量就是一个字符矩阵。

不过，scanf 的问题似乎是一样的：使用 enter/return 是安全的，但不是空格。尝试使用 enter/return next 而不是空格插入所有数据，看看它是否有效。

希望这可以帮助。

# c++ - freeglut/glu 3d 绘图

> ID：14307976
> 
> 赞同：0
> 
> 时间：2013-01-13T20:47:17.973
> 
> 标签：c++, opengl, 3d, freeglut

我正在尝试在房间底部绘制一个蓝色四边形。

这是我一直在尝试使用的代码，但没有四边形，只有绿色清晰的颜色。

```
#include <iostream>
#include <vector>
#include <cmath>
#include <GL/glu.h>
#include <GL/freeglut.h>
bool keystates[256];
bool speckeystates[256];
// manage key events
void keys(unsigned char key, int x, int y) {
     keystates[key]=true;
}
void keyup(unsigned char key, int x, int y) {
     keystates[key]=false;
}
void skeys(int key, int x, int y) {
     speckeystates[key]=true;
}
void skeyup(int key, int x, int y) {
     speckeystates[key]=false;
}
void draw(void) {
     glLoadIdentity();
     glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
     gluLookAt(0,0,0,640,480,640,0,1,0); // from near-top-left to far-bottom-right, floor should be visible
     glBegin(GL_QUADS);
     glColor3ub(15,15,255); // visible blue color
     glVertex3i(0,480,0); // draw quad across bottom
     glVertex3i(640,480,0);
     glVertex3i(640,480,640);
     glVertex3i(0,480,640);
     glEnd();
     glFlush(); // flush drawing
     glutSwapBuffers(); // swap the buffers
     glutPostRedisplay();
}
int main(int argc, char** argv) {
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize(640,480);
    glutInitWindowPosition(0,0);
    glutCreateWindow("Window!"); // init window stuff
    glutDisplayFunc(draw); // our frame/draw event
    glutKeyboardFunc(keys);
    glutKeyboardUpFunc(keyup);
    glutSpecialFunc(skeys);
    glutSpecialUpFunc(skeyup); // init key event stuff
    glEnable(GL_DEPTH_TEST); // init opengl stuff
    glClearColor(0.2f,0.3f,0.2f,1.0f);
    gluPerspective(45.0,640/480,0,640); // x: 0-640 y: 0-480 z: 0-640
    glDepthFunc(GL_LEQUAL);
    glutMainLoop(); // begin the loop
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:30:02.630

我将回答您的问题，但首先我建议您尝试忘记 glBegin 函数以及 glVertex/color 等。从绘图调用（例如数据传输）开始，这是一个非常过时的 API从 RAM 到图形内存）比渲染本身便宜，所以你发送数据的效率低下并不重要，因为它花费了显卡更多的时间来处理你在最后一帧发送的任何内容，而不是 CPU 和 DMA将数据从一个内存传输到另一个内存。

几年后，情况正好相反，因此标准扩展到包括 VBO，因此您无需通过单独的绘图调用发送每个顶点，但它们保留了立即模式（这是您正在使用的）以实现兼容性原因。

现在立即模式（终于）被弃用了，所以使用它是个坏主意，你可以在[这里找到一些关于新 API 的不错的教程](http://arcsynthesis.org/gltut/)

无论如何，您的问题是您设置相机的方式，您站在点 0,0,0 并查看 640,480,640 点，这意味着顶点将以错误的顺序定义，导致它们被剔除，要么更改 glulookat调用并反转目标和眼睛位置，或更改剔除模式

# java - Mailer 插件抛出 NullPointerException

> ID：14307978
> 
> 赞同：4
> 
> 时间：2013-01-13T20:47:27.663
> 
> 标签：java, playframework, playframework-2.1

当我尝试使用[此处](https://github.com/typesafehub/play-plugins/tree/master/mailer#using-it-from-java)解释的 Mailer 插件（版本 2.1-SNAPSHOT）时，一切似乎都很好，这意味着所有依赖项都已解决并且没有编译错误。

但是，当执行此代码时

```
MailerAPI mail = play.Play.application().plugin(MailerPlugin.class).email(); 
```

我在这条线上得到一个 NullPointerException 。生成异常是因为调用`plugin`返回`null`。

关于这里发生了什么的任何提示？

我正在使用 Play 2.1-RC2，该应用程序是用 Java 编写的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T07:17:29.780

如评论中所述，请检查您是否添加`1500:com.typesafe.plugin.CommonsMailerPlugin`到您`conf/play.plugins`的插件中，以便按照[文档](https://github.com/typesafehub/play-plugins/tree/master/mailer)中的说明注册插件。

我认为 Play 应该抛出一个明确的消息而不是`NullPointerException`.

# python - 在 python 中显示来自模块的“打印”命令

> ID：14307984
> 
> 赞同：0
> 
> 时间：2013-01-13T20:47:54.150
> 
> 标签：python, module

我有两个 python 脚本，我们称它们为 **file1.py**和**file2.py**，其中我有不同的功能，假设**function11**和**function12**在**file1**中。我需要在我的**file2.py**函数中使用这些函数：**function21**。

现在的问题是我有一个简单的错误，但我需要对变量进行“打印”，以确切了解为什么会出现这些错误。但是错误是从**file1**的一个功能（我从**file2**使用的）发送的。当我添加一些打印时，结果不会出现在终端中。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:16:23.147

我不确定你的脚本是什么样的，但你可以尝试这样的事情（如果你不只是在寻找调试器）：

文件1.py

```
def function11(arg1, arg2):
    try:
        # try something with arg1, arg2 <---- throws error
        . . .
        # return something
    except:
        return arg1, arg2

def function12(arg3):
    # try something else
    . . .
    return something 
```

文件2.py

```
from file1 import *

def function21():
    try:
        # the following function should normally throw an error, but you have to be sure 
        # the result arg1, arg2 from function11 (in file1) still throws
        # an error and does not look like the expected result
        f = function11(arg1, arg2) 
        . . .
        return something
    except:     # <---- if function imported from file1.py throws error, you want to print variables instead.
        print arg1, arg2 
```

# qt - 如果窗口容器更改其大小，如何自动调整按钮大小

> ID：14307988
> 
> 赞同：2
> 
> 时间：2013-01-13T20:48:12.873
> 
> 标签：qt, qt4, qt5, qpushbutton, qsizepolicy

我有一个窗口和一堆按钮。这个窗口将是我的“主菜单”。放置按钮后，我希望将这些按钮固定到此窗口的大小。因此，如果窗口改变了他的（例如由用户），他们应该填充窗口并改变它们的大小。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:21:33.207

您应该将您的按钮放在一个布局中（例如参见`QGridLayout`或`QVBoxLayout`）。

示例（假设这`window`是您的窗口，并且`button`是您的按钮）：

```
QVBoxLayout* layout = new QVBoxLayout;
layout->addWidget(button);
window->setLayout(layout); 
```

这将使按钮水平扩展。您是否希望它们也垂直扩展，您需要更改按钮的垂直大小策略，因为按钮的默认垂直策略是不占用比其首选大小更多的空间。

```
button->setSizePolicy(QSizePolicy::Minimum, QSizePolicy::Minimum); 
```

# php - 如何确定 mysql 数据库中的链接是否有效？

> ID：14307989
> 
> 赞同：0
> 
> 时间：2013-01-13T20:48:13.663
> 
> 标签：php, mysql

海量新手，非常感谢任何帮助。

我有一个 mysql 数据库，其中包含大约 30,000 个条目，每个条目都有一个指向 .jpg 格式的缩略图的链接。

我试图弄清楚是否有任何方法可以通过 mysql 数据库并验证每个链接是否仍然有效 - 也就是 .jpg 文件是否在它应该在的位置？

所以每个条目都有一个 id、name、thumb（这是一个 url）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:09:17.287

[SQL小提琴](http://www.sqlfiddle.com/#!2/3be30/6)

```
SELECT * from table_name where SUBSTRING(url, -3, 3) = 'jpg'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:00:27.843

对于链接，执行查询以获取所有链接，例如：

```
SELECT DISTINCT url FROM your_stuff; 
```

你没有提到你的数据库的确切性质，但类似的东西应该可以工作。

然后循环遍历它，并为每一个使用 cURL 之类的东西来执行 HEAD 请求 - 这比通常的 GET 请求更好，因为它是相同的，除了服务器不应该返回实际文件，所以你不必下载每个图像只是为了看看它们是否在那里。只需执行 HEAD 请求，并确认服务器以状态 200 响应。

[这个问题更多地涉及 cURL 中的 HEAD 请求](https://stackoverflow.com/questions/1378915/header-only-retrieval-in-php-via-curl)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T21:07:13.857

考虑到您的问题中的这一行：“每个都带有指向 .jpg 格式的缩略图的链接。”

您也可以尝试`regexp`: 结尾`.jpg`

```
SELECT DISTINCT url_column as regex_u, id 
    FROM your_table
    where url_column regexp '\(.jpg)$'; 
```

即使有`like`：`contains`jpg

```
 SELECT DISTINCT url_column as like_u, id 
    FROM your_table
    where url_column like '%.jpg%'; 
```

另一个带有instr：

```
 SELECT DISTINCT url_column as instr_u , id
    FROM your_table
    where instr(url_column, '.jpg') > 0; 
```

如果你想匹配一个整体`ulr`

```
 SELECT DISTINCT url_column as url_u, id 
    FROM your_table
    where url_column regexp '^(https?://|www\\.)[\.A-Za-z0-9/_\-]+\\.(jpg)$'
    ; 
```

另一个使用`Right`：

```
 SELECT DISTINCT url_column as right_u, id 
    FROM your_table
    where Right(url_column,4) = '.jpg'; 
```

请检查`explain plan`最有效的解决方案。`LIKE`似乎需要的时间最长。

*   ## [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/11b56/1)

# php - 有什么方法可以将 CHttpException 传递给 HTML 消息字符串？

> ID：14307992
> 
> 赞同：3
> 
> 时间：2013-01-13T20:48:17.857
> 
> 标签：php, yii

我正在使用 CHttpException(404, $message) 行处理 404，$message 变量是一个 HTML 字符串，用于实现一些样式。但是 CHttpException() 对我的 $message 进行编码，将 HTML 呈现为无用的转义字符串。为了输出 HTML，有什么办法可以绕过 CHttpException 的字符串编码？

```
/**
* From PostsController.php
*/

// ...

public function actionCategory($id)
{

   $categoryModel = Categories::model()->findByAttributes(array('idCategory'=>$id));

    if($categoryModel===null){

        $message = "<div class=\"alert alert-danger\">Page Not Found</div>";
        throw new CHttpException(404, $message);
            return;
        }

    // ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T21:15:09.187

`CHttpException`不编码任何东西。默认情况下，消息被编码在错误视图中`protected/views/site/error.php`- 我想您只需在该视图中更改它（或者如果您确实更改了您的自定义错误视图）。只有你应该知道 yii 抛出的标准错误不是为 HTML 准备的，所以你应该找到一些方法来区分你的代码抛出的 CHttpException 和 Yii 抛出的。

# vim - 如何在不离开插入模式的情况下向上/向下滚动？

> ID：14307993
> 
> 赞同：5
> 
> 时间：2013-01-13T20:48:19.153
> 
> 标签：vim

在 Vim 正常模式下，您可以按`ctrl`+`e`和`ctrl`+`y`分别向下和向上滚动。我正在尝试制作一个键绑定，让我也可以从插入模式执行此操作。这就是我所拥有的：

```
" Scroll up and down while in insert mode.
inoremap <C-e> <C-o><C-e>
inoremap <C-y> <C-o><C-y> 
```

这按预期工作，但它有一个很大的缺陷。它**离开插入模式**，滚动，然后重新进入插入模式。这与撤消、重复命令等有关，我希望能够在不离开插入模式的情况下上下滚动。想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T20:55:18.577

你可以看一下`:h i_CTRL-X_CTRL-E`，这是一个内置的插入模式滚动映射：

```
 *i_CTRL-X_CTRL-E*
CTRL-X CTRL-E       scroll window one line up.
        When doing completion look here: |complete_CTRL-E|

                    *i_CTRL-X_CTRL-Y*
CTRL-X CTRL-Y       scroll window one line down.
        When doing completion look here: |complete_CTRL-Y| 
```

所以在你的情况下，这可能会奏效：

```
inoremap <C-e> <C-x><C-e>
inoremap <C-y> <C-x><C-y> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T21:21:27.833

undojoin 修复了它的撤消部分：

```
ino <C-E> <Space><BS><ESC><C-E>:undojoin<CR>gi 
```

该`<Space><BS>`序列确保有一个撤消块可以加入。

令人惊讶的是（对我来说）这对破损没有帮助`.`，所以这可能会让你像现在一样烦人......

# c++ - 什么时候应该在 C++ 中使用文字类？

> ID：14307996
> 
> 赞同：14
> 
> 时间：2013-01-13T20:48:27.190
> 
> 标签：c++, class, c++11, constexpr

有人可以告诉我*C++*什么时候需要*文字类*吗？*我对constexpr*构造函数和 constexpr 成员 感到有些困惑，我看不出重点是什么。我想看看它的一些实际用途。

 **另外我想知道一个*集合*成员函数是否需要是*constexpr*，即：

```
constexpr void set_num(int a) { num = a; } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T01:01:22.480

在 C++03 中，此对象具有*动态初始化*

```
struct Data {
  int i;
  int j;
};
Data init_data();  // calculate something
const Data data = init_data(); 
```

即当程序启动时，在`main`运行之前，将调用该函数并初始化对象。

在 C++11 中，对象可以有*常量初始化，**静态初始化*的一种形式，这意味着它的值是在编译时设置的，并且在程序开始之前被初始化。这对于避免[静态初始化顺序失败](http://www.parashift.com/c++-faq/static-init-order.html)等非常有用。为了确保类型得到*常量初始化*，它必须由常量表达式初始化，因此必须有一个`constexpr`构造函数，并且在完整表达式中调用的任何函数都必须是`constexpr`函数。

该类型`Data`是微不足道的，所以它的隐式声明的构造函数是`constexpr`构造函数，所以为了使全局`data`进行*常量初始化*，我们只需要做`init_data()`一个`constexpr`函数：

```
struct Data {
  int i;
  int j;
};
constexpr Data init_data();  // calculate something
constexpr Data data = init_data(); 
```

*文字类型*的优点是此类类型可以在其他常量表达式中使用，即在需要编译时常量的上下文中。所以现在我们将`data`对象作为编译时常量，我们可以在其他常量表达式中使用它，例如初始化其他编译时常量：

```
const int i = ::data.i; 
```

我们可以将`Data`类型用于具有类内初始化程序的静态数据成员：

```
struct MoreData {
  static constexpr Data zerozero = Data{};  // OK, Data is a literal type
}; 
```

如果`Data`不是文字类型，我们将不得不编写：

```
struct MoreData {
  static const Data zerozero;
};

// in moredata.cc
const Data MoreData::zerozero = Data{}; 
```

然后只看到标头的代码不知道它的值，`MoreData::zerozero`也不能在编译时优化中使用它。

所以“文字类型”规则的优点是它们允许您定义可以在常量表达式中使用的新类类型。在 C++03 中，只有极少数类型（例如整数）可以用于常量表达式，例如整数字面量，例如`1`or`0x23`或整数类型的编译时常量。在 C++11 中，您可以编写自己的类型，这些类型在其构造函数中具有中等复杂的逻辑（可以在`constexpr`函数中表示的任何内容），但仍可用作编译时常量。

> 另外我想知道一个集合成员函数是否需要是 constexpr，即

`constexpr`成员函数是成员函数的一种特殊情况，`const`因此它不能修改`-mutable`该类型的（非）成员。修改对象的 setter 函数不能是 const。

要成为文字类型，类必须遵循一些规则，包括至少有一个`constexpr`构造函数。这并不意味着该类型的所有对象都*必须*是`constexpr`常量，它只是意味着该类型的对象*可以*是`constexpr`常量，如果它们被声明为常量并使用类的`constexpr`构造函数之一进行初始化。再次使用该`Data`示例，程序中的大多数对象都不是常量：

```
Data d = { 0, 1 };
d.i = d.i + 5; 
```

因此，如果您添加了一个 setter，一个修改对象的函数，那么只有在该类型的非常量对象上使用它才有意义，并且像任何其他修改类型的函数一样，它不应该是

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T23:28:37.027

constexpr 修复了 C++98 中使用数值限制时的问题。在 C++11 之前的表达式，例如

```
std::numeric_limits<short>::max() 
```

不能用作积分常数，虽然它几乎等于宏`INT_MAX`。对于 C++11，这样的表达式被声明为 constexpr，例如，您可以使用它来声明**数组**或**编译时计算（元编程）**：

```
std::array<float,std::numeric_limits<short>::max()> a; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T00:18:14.617

类的一大优势`constexpr`是可以将它们放入 .ro 数据中，这可以减少可执行文件的大小并提高性能。特别是。对于几何类型，例如或类似的“简单”类型，这非常简洁，因为您也可以摆脱“魔术”数字。参见例如[https://www.kdab.com/kdab-contributions-to-qt-5-0-part-4/](https://www.kdab.com/kdab-contributions-to-qt-5-0-part-4/)。**