# StackOverflow 问答 13675000-13675999

# c - 确定子例程参数评估顺序

> ID：13675000
> 
> 赞同：1
> 
> 时间：2012-12-02T23:10:57.500
> 
> 标签：c, subroutine

我正在用 C 编写一个程序，该程序确定评估子例程参数的顺序。

到目前为止，我有以下内容：

```
int i=1;
printf("%d %d %d\n", i++, i++, i); 
```

但我不确定我是否走在正确的道路上，或者用 Ruby 等不同的语言编写会更容易。

如何用 C（或 Ruby）编写一个程序来确定评估子例程参数的顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T23:19:00.997

printf() 函数的参数评估顺序**未指定**。因此，您无法以可移植的方式确定它们的评估顺序。如果这是您想要确定的，那么也许您会选择一种评估顺序*明确*的语言。

此外，当您多次修改而没有中间序列点时，您的代码具有**未定义的行为。**`i`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T23:52:01.227

在不调用未定义行为的情况下执行此操作的一种方法是在评估每个参数时简单地打印一条消息：

```
#include <stdio.h>

static void foo(int a, int b, int c) {}

static int argument(int n)
{
    printf("Argument %d.\n", n);
    return n;
}

int main(void)
{
    foo(argument(0), argument(1), argument(2));
    return 0;
} 
```

但是，这只会向您显示程序的一个特定执行中参数评估的顺序。C 标准未指定参数评估的顺序，并且可能由于各种原因而更改。例如，如果您传递一个函数的简单参数，编译器可能会从后到先评估它们，以便它可以轻松地将它们按照在该平台上调用子例程所需的顺序放入堆栈中。但是假设，使用相同的编译器版本和编译开关，您向函数传递了一些复杂的参数，其中一些具有公共子表达式。编译器可能决定首先评估这些参数，以利用公共子表达式。

编译器甚至可以计算一个参数的一部分，然后是另一个参数的一部分，然后是第一个参数的一部分，然后是第三个参数，然后计算函数调用之前的表达式（假设序列点行为被保留），然后完成第二个参数。

参数评估的顺序不是您可以依赖的。

# html - 在

> ID：13675001
> 
> 赞同：-1
> 
> 时间：2012-12-02T23:10:58.650
> 
> 标签：html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:36:05.577

HTML：

```
<ul id="list">
    <li>
        <a href="#" class="video_trigger">Ethnics</a>
        <video width="320" height="270" controls>
            <!-- your <source> elems here -->
        </video>
    </li>
</ul> 
```

CSS：

```
#list video { display: none; } 
```

JavaScript：

```
$( '#list' ).on( 'click', '.video_trigger', function () {
    $( this ).siblings( 'video' ).show();
}); 
```

因此，您最初使用 CSS 隐藏了 VIDEO 元素。然后，当`.video_trigger`单击锚点时，会显示其对应的 VIDEO 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:18:20.257

这对我来说非常有效。除非我在这里遗漏了什么？

```
<li>
    <a href="http://whatever.com">
        <video width="320" height="270" controls>
            <source src="steve_powell_320_hard.mp4"  type="video/mp4; codecs=avc1.42E01E, mp4a.40.2">
            <source src="steve_powell_320_hard.webm" type="video/webm; codecs=vp8, vorbis">
            <source src="steve_powell_320_hard.ogv"  type="video/ogg; codecs=theora, vorbis">
        </video>
    </a>
</li> 
```

JSfiddle：http: [//jsfiddle.net/SaHku/](http://jsfiddle.net/SaHku/)

请注意点击视频如何打开网址。

编辑

我认为这是真正想要的：

```
<a href="#" onclick="$('#video').show(); $(this).hide();">Show Video!</a>
<div id="video">
    <video width="320" height="270" controls>
        <source src="steve_powell_320_hard.mp4"  type="video/mp4; codecs=avc1.42E01E, mp4a.40.2">
        <source src="steve_powell_320_hard.webm" type="video/webm; codecs=vp8, vorbis">
        <source src="steve_powell_320_hard.ogv"  type="video/ogg; codecs=theora, vorbis">
    </video>
</div>
<script>
$('#video').hide();
</script> 
```

JSfiddle：http: [//jsfiddle.net/fYFvQ/2/](http://jsfiddle.net/fYFvQ/2/)

这是假设你有[jQuery](http://jquery.org "jQuery")

# c# - 在 Winforms 中更改 ListBox 的“选定”颜色？

> ID：13675006
> 
> 赞同：3
> 
> 时间：2012-12-02T23:11:18.813
> 
> 标签：c#, winforms, listbox

`listbox`当您在 Windows 窗体中选择某些内容时，如何更改那种难看的蓝色？我能找到的所有解决方案要么包括重新创建整个控件，要么只使用 WPF。有没有办法在 WinForms 中做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T23:30:01.727

将`DrawMode`您的 listBox 设置为`OwnerDrawFixed`并订阅`DrawItem`事件：

```
private void listBox_DrawItem(object sender, DrawItemEventArgs e)
{
    e.DrawBackground();
    Graphics g = e.Graphics;
    Brush brush = ((e.State & DrawItemState.Selected) == DrawItemState.Selected) ? 
                  Brushes.Red : new SolidBrush(e.BackColor);
    g.FillRectangle(brush, e.Bounds);
    e.Graphics.DrawString(listBox.Items[e.Index].ToString(), e.Font, 
             new SolidBrush(e.ForeColor), e.Bounds, StringFormat.GenericDefault); 
    e.DrawFocusRectangle();            
} 
```

`e.State`您可以通过检查事件参数的属性来确定绘图项的状态。如果状态为`Selected`，则使用您喜欢的任何画笔（例如红色）来填充项目行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T23:18:19.463

在编辑之前..（他询问 ListView 而不是 ListBox）

对象列表视图：

```
ListView1.UseCustomSelectionColors = true;
ListView1.HighlightBackgroundColor = Color.Red; // for example :)
ListView1.UnfocusedHighlightBackgroundColor = Color.Red; 
```

列表显示 ：

```
myitem.BackColor = Color.Red; 
```

# c# - 如何通过单击按钮添加新的 ASP.NET 表行？

> ID：13675015
> 
> 赞同：5
> 
> 时间：2012-12-02T23:11:52.630
> 
> 标签：c#, asp.net

我正在使用 asp.net [ c# ] ..

我的问题是关于添加新行；如果我单击该按钮（就像每次单击该按钮时它都会添加新行）..我认为它很容易做到..但它不存在。有什么东西不见了，我不知道是什么。

我的代码是 [ Default3.aspx ]：

```
<%@ Page Language="C#" AutoEventWireup="true"
    CodeFile="Default3.aspx.cs" Inherits="Default3" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div align="center">     

<asp:Table ID="Table1" runat="server">
    <asp:TableRow>
        <asp:TableCell style="border-style:solid" >
           <asp:Label ID="Label1" runat="server" Text="LABEL = 1 ">
           </asp:Label>
        </asp:TableCell>
        <asp:TableCell style="border-style:solid" >
           <asp:Label ID="Label2" runat="server" Text="LABEL = 2 ">
           </asp:Label>
        </asp:TableCell>
    </asp:TableRow>
    <asp:TableRow>
        <asp:TableCell style="border-style:solid" >
           <asp:Label ID="Label3" runat="server" Text="LABEL = 3 ">
           </asp:Label>
        </asp:TableCell>
        <asp:TableCell style="border-style:solid" >
           <asp:Label ID="Label4" runat="server" Text="LABEL = 4 ">
           </asp:Label>
        </asp:TableCell>
    </asp:TableRow>
</asp:Table>

<asp:Button ID="Button1" runat="server" Text="Add More" 
        onclick="Button1_Click" />
</div>
</form>

</body>
</html> 
```

对于我的 C# [ Default3.aspx.cs ] ：

```
protected void Button1_Click(object sender, EventArgs e)
{

    TableRow NewRow1 = new TableRow();

    //1st cell
    TableCell NewCell1 = new TableCell();
    NewCell1.Style.Add("border-style","solid");

    // new lebel
    Label newLable1 = new Label();
    count = count + 1; // just for change number in label text 
    newLable1.Text = "NewLabel = "+ count;

    // adding lebel into cell
    NewCell1.Controls.Add(newLable1);

    // adding cells to row
    NewRow1.Cells.Add(NewCell1);

    //2ed cell
    TableCell NewCell2 = new TableCell();
    NewCell2.Style.Add("border-style", "solid");

    Label newLable2 = new Label();
    count = count + 1;
    newLable2.Text = "NewLabel = " + count;
    NewCell2.Controls.Add(newLable2);
    NewRow1.Cells.Add(NewCell2);

    //adding row into table
    Table1.Rows.Add(NewRow1);

} 
```

我不知道问题是什么..我什至给每个控件一个ID..我尝试了其他方法但没有奏效..

请如果有人可以帮助我..我觉得错过了一些重要的东西，但我不知道它是什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:59:41.563

您将需要保持控件（表）的状态。

在这里看到一个非常相似的问题的清晰解释 [ASP.NET dynamic created controls and Postback](https://stackoverflow.com/questions/4216329/asp-net-dynamically-created-controls-and-postback)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T08:39:25.737

[如Walid 回答](https://stackoverflow.com/a/13675754/447356)中共享的问题中所述，请按照下列步骤操作：

1.  创建表行的全局列表，例如：

    ```
    List<TableRow> TableRows 
    ```

2.  在按钮中单击将新创建的行添加到列表中：

    ```
    TableRow row1=new TableRow();
    TableRows.add(row1); 
    ```

3.  在该`OnInit`方法中，只需将所有行添加到表中：

    ```
    foreach ( TableRow row in TableRows )
    {
        Table1.Rows.Add(row);
    } 
    ```

它会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:55:39.727

您可以使用以下方法添加行：

```
TableRow row1=new TableRow();
TableRows.add(row1); 
```

但令人担忧的是：

1.  单击按钮，将一行添加到表中。
2.  再次单击相同的按钮，您已经创建的第一行不再存在，因为 ASP.NET 是无状态的。

解决方案：确保每次单击按钮时，您已经创建的行数据都存在。

# java - Linux PC 和 Android 之间的 Wifi 文件传输

> ID：13675016
> 
> 赞同：1
> 
> 时间：2012-12-02T23:11:58.353
> 
> 标签：java, android, linux, ftp, wifi

我正在考虑我的下一个项目，我只是想知道，什么是最简单的实施解决方案。我有一台 linux PC，它生成文件（文本文件、图像），每次创建文件时，PC 都应该通过 Wifi 将其发送到我的 Android 设备。什么可能是最简单的解决方案？FTP？SSH？

我还想要我的自定义 Android 应用程序，所以请不要向我推荐任何现有的 Android 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:07:03.750

在单个文件中有一个 java http 服务器可用，它支持帖子和文件上传：[nanoHTTPd](http://elonen.iki.fi/code/nanohttpd/)。在 Linux 上，您可以简单地使用 curl 将文件推送到任何 http 服务器。如果你需要*找到*你的安卓设备，你可以使用优秀（简单）的[jmDNS](http://jmdns.sourceforge.net/)。

# vim - vim 使用外部文件上的行号突出显示行

> ID：13675019
> 
> 赞同：3
> 
> 时间：2012-12-02T23:12:48.357
> 
> 标签：vim, highlight

我有两个文本文件，一个是我当前正在工作的文件，另一个包含行号列表。我想做的是突出显示第一个文件中行号与后一个文件匹配的行。

例如：

**文件1：**

```
I like eggs
I like meat
I don't like eggplant
My mom likes chocolate
I like chocolate too 
```

**文件2：**

```
2
4 
```

在此示例中，应突出显示这些行：

```
I like meat
My mom likes chocolate 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T08:56:20.083

您可以使用`readfile()`读取行号，然后将它们转换为与这些行号匹配的正则表达式（例如`\%42l`）。突出显示可以通过`:match`或完成`matchadd()`。

这是所有这些都浓缩成一个自定义`:MatchLinesFromFile`命令：

```
":MatchLinesFromFile {file}
"           Read line numbers from {file} and highlight all those
"           lines in the current window.
":MatchLinesFromFile    Remove the highlighting of line numbers.
"
function! s:MatchLinesFromFile( filespec )
    if exists('w:matchLinesId')
        silent! call matchdelete(w:matchLinesId)
        unlet w:matchLinesId
    endif
    if empty(a:filespec)
        return
    endif

    try
        let l:lnums =
        \   filter(
        \   map(
        \       readfile(a:filespec),
        \       'matchstr(v:val, "\\d\\+")'
        \   ),
        \   '! empty(v:val)'
        \)

        let l:pattern = join(
        \   map(l:lnums, '"\\%" . v:val . "l"'),
        \   '\|')

        let w:matchLinesId = matchadd('MatchLines',  l:pattern)
    catch /^Vim\%((\a\+)\)\=:E/
        " v:exception contains what is normally in v:errmsg, but with extra
        " exception source info prepended, which we cut away.
        let v:errmsg = substitute(v:exception, '^Vim\%((\a\+)\)\=:', '', '')
        echohl ErrorMsg
        echomsg v:errmsg
        echohl None
    endtry
endfunction
command! -bar -nargs=? -complete=file MatchLinesFromFile call <SID>MatchLinesFromFile(<q-args>)

highlight def link MatchLines Search 
```

# c - 文件系统性能

> ID：13675026
> 
> 赞同：1
> 
> 时间：2012-12-02T23:14:19.033
> 
> 标签：c, performance, file

我正在尝试探索文件系统性能如何受到应用程序访问特性的显着影响。我想将请求大小从 1KB (1024) 更改为 64KB (65536)。

当我达到 8KB 时，我得到一个写入文件错误。我没有分配足够的空间吗？

```
./test
error writing file (rc = 200704, errno 0) 
```

我在这里调整 1KB - 64KB 大小：

```
request_size = 32*(1<<13); /* 1KB is 1^10 (or 1<<10) */ 
```

所以，这应该是 8kb = 8192

我现在应该请求 4mb 文件吗？我不确定那会是什么转变？

```
int main(int c, char *argv[]) {

    int fd;
    void *buffer, *buffer_aligned;
    int i, rc;
    unsigned long file_size, request_size;
    struct timeval start, stop;
    double seconds;

    /* allocate a 64KB page-aligned buffer */
    buffer = malloc(65536+4096);
    buffer_aligned = buffer+(4096-(((unsigned long)buffer)%4096));

    /* write a 1MB file with 32KB requests  */
    fd = open("foo", O_CREAT|O_RDWR, 0644);
    file_size = 1*(1<<20);  /* 1MB is 2^20 (or 1<<20). 1GB is 2^30 (or 1<<30) */
    request_size = 32*(1<<13); /* 1KB is 1^10 (or 1<<10) */
    gettimeofday(&start, NULL);
    for (i=0; i<file_size/request_size; i++) {
            if ((rc=write(fd, buffer_aligned, request_size))!=request_size) {
                    fprintf(stderr, "error writing file (rc = %i, errno %i)\n", rc, errno);
                    return 1;
            }
    }       
    gettimeofday(&stop, NULL);
    seconds = ((stop.tv_sec*1e6+stop.tv_usec)-(start.tv_sec*1e6+start.tv_usec))/1e6;
    printf("file size is %uMB\n", file_size>>20);
    printf("request size is %uKB\n", request_size>>13);
    printf("elapsed time is %.2lf seconds\n", seconds);
    printf("bandwidth is %.2lf MB/sec\n", file_size/seconds/(1<<20));
    close(fd);

    /* free buffer */
    free(buffer);

    return 0;
} 
```

这不是8KB吗？

```
request_size = 32*(1<<13); /* 1KB is 1^10 (or 1<<10) */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:23:54.613

可能发生的情况是，您在该调用中写入的数据量`write`已经变得太多，以至于无法始终在第一次调用时完全写入。来自 GNU libc 文档`write`：

> 返回值是实际写入的字节数。这可能是大小，但总是可以更小。您的程序应始终在循环中调用 write，迭代直到写入所有数据。

*   [http://www.gnu.org/software/libc/manual/html_node/I_002fO-Primitives.html](http://www.gnu.org/software/libc/manual/html_node/I_002fO-Primitives.html)

（我试图检查其他 libc 实现的文档，但没有一个像 GNU 那样详细描述了这种行为。他们只是说该函数“尝试写入 nbytes 的数据，并返回写入的字节数”。有人提到它取决于文件描述符是否处于非阻塞模式。无论如何，`write`通常直接映射到操作系统调用，因此行为也取决于操作系统。）

所以基本上，你需要在 周围放置一个循环`write`，检查它直到它写入`request_size`字节。就像是：

```
unsigned long data_remaining = request_size;
void *data_offset = buffer_aligned;
while (data_remaining > 0)
{
    rc = write(fd, data_offset, data_remaining);
    if (rc == -1) {
        fprintf(stderr, "error writing file (rc = %i, errno %i)\n", rc, errno);
        return 1;
    }
    data_remaining -= rc;
    data_offset += rc;  /* you don't care about the data being written, so this is kind of unnecessary in your case */
} 
```

# google-app-engine - gdata-python 中的 provisioning_oauth_example：2-legged 和 3-legged 错误

> ID：13675027
> 
> 赞同：1
> 
> 时间：2012-12-02T23:14:22.407
> 
> 标签：google-app-engine, google-api, oauth-2.0, gdata-python-client

我想从 gdata-python-client 库示例中运行[provisionin_oauth_example 。](http://code.google.com/p/gdata-python-client/source/browse/samples/apps/#apps/provisioning_oauth_example)

在进行了一些小改动后，主要是为了使其在 AppEngine 中工作，这就是在本地和 AppEngine 服务器中发生的情况：

如果我使用 OAuth 域密钥：

*   使用**2-legged authorization**，我得到：

    > 未知的授权标头。
    > 
    > 错误 401

*   使用**3-legged authorization**，我可以使用管理员用户列出我的 GApps 域中的所有用户。这是唯一真正有效的东西。

如果我使用 Marketplace 中的 Consumer 密钥和密钥：

*   使用**2-legged authorization**，我得到：

    > 无效的 OAuth 签名
    > 
    > 错误 403

*   通过**3-legged 授权**，我陷入了一个异常：

> ...文件“/base/data/home/apps/s~deimos-intranet/1.363589987091160356/main.py”，第 147 行，在 post scopes=INIT['SCOPES'], oauth_callback=self.request.uri) 文件中“/base/data/home/apps/s~deimos-intranet/1.363589987091160356/gdata/service.py”，第 429 行，在 FetchOAuthRequestToken
> 
> 引发 FetchingOAuthRequestTokenFailed（错误）
> 
> FetchingOAuthRequestTokenFailed: {'status': 400L, 'body': 'signature_invalid\nbase_string:GET&https%3A%2F%2Fwww.google.com%2Faccounts%2FOAuthGetRequestToken&oauth_callback%*XXXXXX*oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1354489805%26oauth .0%26scope%3Dhttps%253A%252F%252Fapps-apis.google.com%252Fa%252Ffeeds\n\n', 'reason': 'Non 200 response on fetch request token'}

有人知道为什么 2-legged 身份验证根本不起作用，为什么 3-legged 不能使用应用程序密钥，即使我已授权访问数据所需的所有提要？

几天前我被抓到了，现在我没有找到任何提示。

太感谢了。

# jquery - Jquery替换列表中选择器后的元素

> ID：13675029
> 
> 赞同：1
> 
> 时间：2012-12-02T23:14:31.250
> 
> 标签：jquery

这可能是一个简单的任务，但我有点坚持这样做。

我有一个具有以下结构的列表：

```
<ul id='index_orders'>
 <li data-role='list-divider'>Awaiting picking</li>
 <li>Blah blah</li>
 <li data-role='list-divider' id='index_orders_ad_divider'>Awaiting delivery</li>
 <li>Blah blah</li>
</ul> 
```

我正在启动 ajax 调用以获取 `<li id='index_orders_ad_divider'>`条目下的等待订单列表。

到目前为止，我已经做到了这一点，但似乎无法弄清楚如何首先删除所有`<li>` 出现在`<li>`id 为“index_orders_ad_divider”之后的所有内容，然后再添加新的内容：

```
 $.getJSON(root_url + $(this).attr('href') + '?callback=?', null, function (d) {
        $("#index_orders_ad_divider").after(d.html);
        $("#index_orders").listview('refresh');
        $("#index_pickedOrders_count").html($("#index_pickedOrders > li").length);
        $.mobile.loading('hide');
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:53:48.587

这是一种方法，不幸的是它需要两个步骤：

```
$.getJSON(root_url + $(this).attr('href') + '?callback=?', null, function (d) {
    // Cache $el since we're using it a couple times.
    var $el = $("#index_orders_ad_divider");

    // Remove all <li>s after this one
    $("#index_orders li:gt(" + $el.index() + ")").remove();

    // Insert the new <li>s after this one.
    $el.after(d.html);

    $("#index_orders").listview('refresh');
    $("#index_pickedOrders_count").html($("#index_pickedOrders > li").length);
    $.mobile.loading('hide');
}); 
```

**示例：http:** [//jsfiddle.net/6zAN7/3/](http://jsfiddle.net/6zAN7/3/)

# jquery - jquery同位素额外空格

> ID：13675030
> 
> 赞同：0
> 
> 时间：2012-12-02T23:14:35.350
> 
> 标签：jquery, asp.net-mvc-3, jquery-isotope

我一直在使用同位素开展一个项目，我必须更改某些内容，因为它正确显示了所有内容，然后我部署了它，它在 .article 类之间添加了所有这些额外的空格。我不知道是什么原因造成的，但我开始拔头发，因为我不知道如何解决这个问题。容器中的文章之间没有元素，但我正在使用 twitter 引导程序，我想知道网格是否会导致这种情况或其他原因？下面是渲染的页面代码（有很多），但文章 div 是我所说的同位素。

这是间距问题的示例：

![http://i.imgur.com/3yw9r.jpg](../Images/49e677b77e06d81ba9bab21b38e70c45.png)

**编辑**

我删除了很多 HTML 以专注于同位素容器 div。谢谢！页：

**编辑 2**

添加同位素代码：

我在页面底部用这三个来称呼它：

```
//isotope
$("#articles").imagesLoaded(IsotopeLoad);
$(".sorter").click(IsotopeSort);

//isotope filtering
$("#filterBtns").children().click(OnFilterChange); 
```

那么这里是那些功能

```
function IsotopeLoad() {
    $("#articles").isotope({
        itemSelector: ".article",
        getSortData: {
            worn: function ($e) {
                return $e.find(".lastWornOn").text();
            },
            purchased: function ($e) {
                return $e.find(".purchasedOn").text();
            }
        }
    });
}

function IsotopeSort() {
    var sortByCode = $(this).parent().find(".sortBy").text();
        var IsAsc = $(this).parent().find(".asc").text();
        $("#articles").isotope({
            sortBy: sortByCode,
            sortAscending: IsAsc
        });
}

function OnFilterChange() {
    //check if first button is active
    if ($(this).hasClass("active")) {
        $(this).removeClass("active");
    }
    else {
        $(this).addClass("active");
    }

    //get filter buttons
    var filters = $("#filterBtns").children(".active");
    var filterString = "";
    //loop through buttons to get filter values in one string
    $(filters).each(function (index, e) {
        filterString = filterString + $(e).val() + ", ";
    });

    if (filterString.substring(filterString.length - 2) == ", ") {
        filterString = filterString.substring(0, filterString.length - 2);
    }

    filterString = $.trim(filterString)
    //apply isotope
    $("#articles").isotope({
        filter: filterString
    });

} 
```

页面代码：

```
<div class="container-fluid">
        <div class="row-fluid">

                <div class="span2">
    <div class="well">
        <div class="btn-group pull-right">
            <a class="btn btn-small dropdown-toggle" data-toggle="dropdown" href="#">Sort <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="#" class="sorter" id="byLastWornDesc">By Last Worn</a><span class="sortBy">worn</span><span class="asc">false</span></li>
                <li><a href="#" class="sorter" id="byLastWornAsc">By First Worn</a><span class="sortBy">worn</span><span class="asc">true</span></li>
                <li><a href="#" class="sorter" id="byPurchasedDesc">By Last Purchased</a><span class="sortBy">purchased</span><span class="asc">false</span></li>
                <li><a href="#" class="sorter" id="byPurchasedAsc">By First Purchased</a><span class="sortBy">purchased</span><span class="asc">true</span></li>
            </ul>
        </div>
        <div class="btn-group btn-group-vertical" id="filterBtns">
                <button type="button" class="btn btn-mini" value=".BCBG">BCBG</button>
                <button type="button" class="btn btn-mini" value=".Bebe">Bebe</button>
        </div>
    </div>
</div>
<div class="span10">
    <div id="articles" style="position: relative; overflow: hidden; height: 750px;" class="isotope">
            <div class="article Dress Sequin Black isotope-item" id="1" rel="tooltip" data-title="Dress Sequin Black" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(0px, 0px, 0px);">
                <img alt="1" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/Black%20and%20sequin%20mini%20dress.jjpgthumb.jpg">
                <span class="hide purchasedOn"></span> <span class="hide lastWornOn"></span>
            </div>
            <div class="article Sweater Tan isotope-item" id="2" rel="tooltip" data-title="Sweater Tan" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(161px, 0px, 0px);">
                <img alt="2" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/bcbg.imageg.net120212114525152thumb.jpg">
                <span class="hide purchasedOn">11/20/2012 12:00:00 AM</span> <span class="hide lastWornOn">11/29/2012 12:00:00 AM</span>
            </div>
            <div class="article Leggings Black isotope-item" id="4" rel="tooltip" data-title="Leggings Black" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(483px, 0px, 0px);">
                <img alt="4" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/bcbg.imageg.net120212115347827thumb.jpg">
                <span class="hide purchasedOn">11/21/2012 12:00:00 AM</span> <span class="hide lastWornOn">12/2/2012 12:00:00 AM</span>
            </div>
            <div class="article Blue Sweater isotope-item" id="5" rel="tooltip" data-title="Blue Sweater" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(805px, 0px, 0px);">
                <img alt="5" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/bcbg.imageg.net120212115533282thumb.jpg">
                <span class="hide purchasedOn">12/1/2012 12:00:00 AM</span> <span class="hide lastWornOn">12/1/2012 12:00:00 AM</span>
            </div>
            <div class="article Untagged isotope-item" id="6" rel="tooltip" data-title="Untagged" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(1127px, 0px, 0px);">
                <img alt="6" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/Black%20and%20Tan%20dressthumb.jpg">
                <span class="hide purchasedOn">12/2/2012 12:00:00 AM</span> <span class="hide lastWornOn">12/2/2012 12:00:00 AM</span>
            </div>
            <div class="article Untagged isotope-item" id="7" rel="tooltip" data-title="Untagged" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(0px, 250px, 0px);">
                <img alt="7" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/Black%20and%20Tan%20lace%20dressthumb.jpg">
                <span class="hide purchasedOn"></span> <span class="hide lastWornOn"></span>
            </div>
            <div class="article Black Lace Romper isotope-item" id="8" rel="tooltip" data-title="Black Lace Romper" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(322px, 250px, 0px);">
                <img alt="8" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/Black%20and%20Tan%20romperthumb.jpg">
                <span class="hide purchasedOn">11/29/2012 12:00:00 AM</span> <span class="hide lastWornOn"></span>
            </div>
            <div class="article White isotope-item" id="10" rel="tooltip" data-title="White" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(644px, 250px, 0px);">
                <img alt="10" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/bcbg.imageg.net120212120238879thumb.jpg">
                <span class="hide purchasedOn">11/22/2012 12:00:00 AM</span> <span class="hide lastWornOn"></span>
            </div>
            <div class="article Dress Green Sequin isotope-item" id="12" rel="tooltip" data-title="Dress Green Sequin" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(966px, 250px, 0px);">
                <img alt="12" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/DSC_0002athumb.jpg">
                <span class="hide purchasedOn">12/1/2012 12:00:00 AM</span> <span class="hide lastWornOn">9/24/2012 12:00:00 AM</span>
            </div>
            <div class="article Black Gunmetal Metallic isotope-item" id="14" rel="tooltip" data-title="Black Gunmetal Metallic" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(1127px, 250px, 0px);">
                <img alt="14" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/EMP1thumb.jpg">
                <span class="hide purchasedOn"></span> <span class="hide lastWornOn"></span>
            </div>
            <div class="article Floral Blue Shirt isotope-item" id="15" rel="tooltip" data-title="Floral Blue Shirt" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(0px, 500px, 0px);">
                <img alt="15" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/DSC_0309athumb.jpg">
                <span class="hide purchasedOn"></span> <span class="hide lastWornOn">9/5/2012 12:00:00 AM</span>
            </div>
            <div class="article White Pants Stripe isotope-item" id="16" rel="tooltip" data-title="White Pants Stripe" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(322px, 500px, 0px);">
                <img alt="16" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/DSC_0430athumb.jpg">
                <span class="hide purchasedOn"></span> <span class="hide lastWornOn">9/1/2012 12:00:00 AM</span>
            </div>
            <div class="article Red Romper isotope-item" id="17" rel="tooltip" data-title="Red Romper" data-original-title="" style="position: absolute; left: 0px; top: 0px; -webkit-transform: translate3d(644px, 500px, 0px);">
                <img alt="17" src="http://e3da8dc1c3cfdf394995-184e01705dd318c162d0284c163588ca.r86.cf1.rackcdn.com/DSC_0055athumb.jpg">
                <span class="hide purchasedOn"></span> <span class="hide lastWornOn">7/3/2012 12:00:00 AM</span>
            </div>
    </div>
   [1]: http://i.stack.imgur.com/QrtOS.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:58:53.270

您需要为列定义宽度。

使用该选项`masonry`并将其设置`columnWidth`为适合图像的内容

```
masonry:{
    columnWidth:200
} 
```

或为`.article`元素指定尺寸。

```
.article{
    width:200px;
} 
```

这将有助于 isotop 计算列的正确宽度..

# php - 使用我的域登录

> ID：13675035
> 
> 赞同：2
> 
> 时间：2012-12-02T23:14:43.823
> 
> 标签：php, api, login

我非常熟悉许多使用谷歌、Facebook 等登录的网站。我很好奇是否有人能指出我如何为其他网站使用我的网站登录的正确方向或如果有一个教程涵盖了像这样的系统中的内容，有人可以将我链接到。我知道它不会像 Google 和 Facebook 那样受欢迎，但它会对我有所帮助，因为我有多个域名。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:24:24.077

有很多方法可以做到这一点，所以这取决于你的选择。例如，您可以创建一个 api，它将创建一个 cookie 并将其保存在一个 db 中，并将其发送到另一个服务器中请求登录的客户端。之后，所有会话检查请求都将通过主（api）服务器处理 - 您将以这种方式处理它，它不会自动处理；）。

# java - JPanel 布局未按预期呈现

> ID：13675036
> 
> 赞同：0
> 
> 时间：2012-12-02T23:14:58.037
> 
> 标签：java, swing, jpanel, layout-manager

我的代码如下。我想要一个网格中的 2 个标签，标签彼此重叠，2 个下拉菜单具有相同的内容。我想要两套这样的。我得到的只是彼此相邻的两个标签和彼此相邻的 2 个下拉列表，前两个标签和下拉列表根本不出现，下拉列表是大写的。没有错误。

```
JPanel grid1 = new JPanel();
            setLayout(new GridLayout(2,1));            
            grid1.add(label1);
            grid1.add(label2);
            add(grid1);
        JPanel grid3 = new JPanel();
            setLayout(new GridLayout(2,1));            
            grid3.add(IHA);
            grid3.add(IVA);
            add(grid3);
        JPanel controlholder1 = new JPanel();
            setLayout(new BorderLayout());
            controlholder1.add(grid1);
            controlholder1.add(grid3);
            add(controlholder1);

        JPanel grid2 = new JPanel();
            setLayout(new GridLayout(2,1));            
            grid2.add(label3);
            grid2.add(label4);
            add(grid2);
        JPanel grid4 = new JPanel();
            setLayout(new GridLayout(2,1));            
            grid4.add(THA);
            grid4.add(TVA);
            add(grid4);     
        JPanel controlholder2 = new JPanel();       
            setLayout(new BorderLayout());
            controlholder2.add(grid2);     
            controlholder2.add(grid4);
            add(controlholder2); 
```

谢谢![输出](../Images/291d318ea4cad589d184f3c0acbea12f.png)

编辑：我在网格布局中有 2 个标签，在另一个网格中有 2 个下拉菜单。我希望这两个都在边框布局中，并且我需要在另一个边框布局中使用其中的 2 个。有些嵌套的东西我没有处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:24:29.853

使用 BorderLayout 在 BorderLayout.NORTH 中添加一个标签和一个列表，在 BorderLayout.SOUTH 中添加另外两个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:29:25.470

我会这样做；

```
public JPanel getSubPanels(stuff_to_add_to_dropdowns, stuff_to_add_to_labels){
    JPanel subPanel = new JPanel();
    subPanel.setLayout(new GridLayout(2,2));
    subPanel.add(new JLabel(stuff_to_add_to_labels.get(0));
    subPanel.add(new JComboBox(stuff_to_add_to_dropdowns.get(0);
    subPanel.add(new JLabel(stuff_to_add_to_labels.get(1));
    subPanel.add(new JComboBox(stuff_to_add_to_dropdowns.get(1);
    return subPanel;
} 
```

并调用它两次将其添加到 BorderLayout.NORTH 和 BorderLayout.SOUTH 到父 JPanel

# forms - 我们需要取消按钮吗？

> ID：13675040
> 
> 赞同：0
> 
> 时间：2012-12-02T23:15:08.533
> 
> 标签：forms, button, user-interface, web

创建表单供用户填写时是否需要`Cancel`按钮？

如果表单在模态对话框或类似对话框中，请确保添加一个取消按钮，但是像编辑页面等，其中`Cancel`按钮的作用就像一个`Back`按钮，添加按钮给用户一个逃生舱口是一个好主意，还是只是使表格复杂化？

Stack Overflow 上的我们显然比普通的 Joe 更精通计算机，所以我们知道只需按下后退按钮，但它是否需要普通用户？尤其是在其他导航选项清晰显示（左侧或顶部导航）的情况下，如下面的 UI 所示。

![在此处输入图像描述](../Images/941789b4868b85f0e16ae5085665c3ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:19:24.047

是的，提供尽可能多的细节是个好主意。在我的 HCI 课程中，我们被告知应该以这样一种方式进行设计，以便任何新人都可以使用您的 UI。基本上一切都应该很容易获得。

一个新人可能会对如何返回是否单击返回按钮会对该表单进行某种处理感到困惑。所以最好提供尽可能多的信息。

# css - css在悬停时显示不同的div

> ID：13675045
> 
> 赞同：0
> 
> 时间：2012-12-02T23:15:58.043
> 
> 标签：css

当悬停不同的 div 但由于某种原因显示错误的 div 时，我试图使 div 可见。您将在下面的链接中看到我的意思。我希望第二个心形图标显示在悬停的框上，而不是旁边的那个。

[http://jsfiddle.net/aaB7t/](http://jsfiddle.net/aaB7t/)

```
.box-product-item:hover + .box-product-item .compare {
    display:  inline-block;
} 
```

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:38:12.967

您需要将您的 css 规则更改为

```
.box-product-item:hover .compare {
    display:  inline-block;
} 
```

摆脱兄弟选择器部分。正如您现在所拥有的那样，它是说`.compare`a 内部的 任何`.box-product-item`本身都紧跟在`.box-product-item`悬停的 a 之前，应该`display: inline-block`。

# list - Scala按属性对元组列表进行排序

> ID：13675046
> 
> 赞同：3
> 
> 时间：2012-12-02T23:16:33.837
> 
> 标签：list, scala, tuples

`List[(String, String)]`我想知道在删除元组中第二个字符串的所有重复项的同时，按字母顺序对元组中的第一个字符串进行排序的简单方法是什么。

感谢您的建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T01:00:52.237

我们可以进行性能测试吗？

```
val items = List("a" -> 0, "b" -> 1, "c" -> 0, "d" -> 0, "e" -> 1)
items.groupBy(_._2).toList
     .sortBy(_._2.head._1)(new Ordering[String]() { 
         override def compare(x: String, y: String) = { -x.compareTo(y) } 
     })
     .map(e => (e._2.head._1 -> e._1)) 
```

结果：

```
List((b,1), (a,0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:43:56.657

对于好奇的人，评论中链接的答案仍然有效。

如果您已经拥有 TreeMap，那么 groupBy 将构建 TreeMap。该行与 idonnie 的行类似，不同之处在于无需再次排序。

```
TreeMap(data: _*) groupBy (_._2) map (p => (p._2.head._1, p._1)) 
```

我不确定为什么它不能从开箱即用的对列表中构建 TreeMap。我正在与感冒药的迷雾作斗争。但是当人们发布这些问题时总是很有趣。

```
package object distinctby {
  import scala.collection.IterableLike
  import scala.collection.generic.CanBuildFrom
  import scala.collection.mutable.{ Set => MutSet }

  implicit class RichCollection[A, Repr](val xs: IterableLike[A, Repr]) extends AnyVal {
    def distinctBy[B, That](f: A => B)(implicit cbf: CanBuildFrom[Repr, A, That]) = {
      val builder = cbf(xs.repr)
      val i = xs.iterator
      val set = MutSet[B]()
      while (i.hasNext) {
        val o = i.next
        val b = f(o)
        if (!set(b)) {
          set += b
          builder += o
        }
      }
      builder.result
    }
  }
}

package distinctby {
  import scala.collection.generic.CanBuildFrom
  import scala.collection.immutable.TreeMap
  object Test extends App {
    val data = List("eins"->"one","un"->"one","zwei"->"two","deux"->"two")
    println(data)
    println(data distinctBy (_._2))
    println(TreeMap((data map (_.swap)): _*))
    println(TreeMap((data.reverse map (_.swap)): _*))
    // groupBy yields a TreeMap of TreeMap, so head is the lexly first
    println(TreeMap(data: _*) groupBy (_._2) map (p => (p._2.head._1, p._1)))
    locally {
      class CBF[A,B](implicit ord: Ordering[A]) 
        extends CanBuildFrom[List[(A, B)], (A,B), TreeMap[A,B]] {
        def apply(from: List[(A,B)]) = TreeMap.newBuilder[A, B](ord)
        def apply() = TreeMap.newBuilder[A, B]
      }
      implicit def cbf[A,B](implicit ord: Ordering[A]) = new CBF[A,B]
      println(data.distinctBy[String, TreeMap[String, String]](_._2)(cbf[String, String]).toSeq)
    }
  }
}

List((eins,one), (un,one), (zwei,two), (deux,two))
List((eins,one), (zwei,two))
Map(one -> un, two -> deux)
Map(one -> eins, two -> zwei)
Map(eins -> one, deux -> two)
ArrayBuffer((eins,one), (zwei,two)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T04:18:17.227

我只会使用 List 的`sorted`方法来对元组进行默认排序。您还可以使用`groupBy`（正如 idonnie 也指出的那样）为每对中的第二个项目获取不同的值。这是一个小例子：

```
scala> val tuples = scala.util.Random.shuffle("abcd".permutations.map{_.splitAt(2)}.toList) // generate some test data
tuples: List[(String, String)] = List((cb,ad), (dc,ab), (ba,dc), (bd,ca), (cb,da), (ca,db), (cd,ba), (cd,ab), (db,ca), (ba,cd), (ac,db), (ac,bd), (ab,cd), (ad,cb), (ca,bd), (bd,ac), (ad,bc), (db,ac), (da,bc), (da,cb), (bc,da), (dc,ba), (ab,dc), (bc,ad))

scala> tuples.sorted.groupBy(_._2).values.map(_.head).toList.sorted
res0: List[(String, String)] = List((ab,cd), (ab,dc), (ac,bd), (ac,db), (ad,bc), (ad,cb), (bc,ad), (bc,da), (bd,ac), (bd,ca), (cd,ab), (cd,ba)) 
```

对我来说，您没有指定特定的方式来选择要保留哪些重复项，这似乎有点奇怪...这应该保留第一个（按第一个字符串排序），这就是我假设您想要的. 如果您不在乎保留哪个，则可以消除对`sorted`. `sorted`如果您将第一次调用更改为to ，这也可能会稍微更有效率`sortBy(_._1)`，但我对您的特定应用程序了解得不够多，不知道这是否会产生任何真正的影响。

# google-analytics - 谷歌标签管理器和谷歌分析转换

> ID：13675047
> 
> 赞同：0
> 
> 时间：2012-12-02T23:16:37.477
> 
> 标签：google-analytics, tracking, google-tag-manager

任何人都有这样的问题，即交易编号是通过 GTM 在 GA 转换结果中唯一错误的问题？

仅包含谢谢（收据）页面的触发规则似乎被忽略了。

转换中的其他值（例如数量和唯一购买量）是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:49:33.380

我将包含规则更改为阻止规则，它现在可以使用。

不知道为什么不遵守 Inlude 规则。

**例如：**

而不是*触发*规则时（页面是感谢页面）

我有*阻止*规则时（页面不是感谢页面）

# ios - iOS：编辑 MKPolygon 的 alpha

> ID：13675059
> 
> 赞同：0
> 
> 时间：2012-12-02T23:18:35.780
> 
> 标签：ios, polygon, alpha

我在我的应用程序中使用了许多 MKPolygon 对象来在其地图视图中显示各种元素。我希望对这些对象的控制更加灵活，并希望能够为特定方法编辑它们的 alpha。据我所知，该类没有 alpha 属性。我能得到的最接近的是使用 MKPolygonView 但我似乎无法让它在临时基础上工作（当按下特定按钮时调用有问题的方法），而且我不确定多个 MKPolygonviews可以在一张地图中使用。

那么我可以做些什么来轻松调整 MKPolygon 实例的 alpha 值呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:20:51.957

alpha 值是`UIColor`类的属性。所以你必须创建一个带有 alpha 分量的颜色并将其分配给`MKPolygonView`.

使用它来创建颜色

```
(UIColor *)colorWithRed:(CGFloat)red green:(CGFloat)green blue:(CGFloat)blue alpha:(CGFloat)alpha; 
```

alpha 值为 0.5 表示 50% 透明。

使用属性

`fillColor`或`strokeColor`从`MKPolygonView`分配颜色。

# java - 有没有办法在堆栈中搜索带有“任何”参数的东西？

> ID：13675060
> 
> 赞同：0
> 
> 时间：2012-12-02T23:18:35.920
> 
> 标签：java, graph, stack

我正在使用堆栈来存储我正在执行的 Graph 实现的边缘。我创建了一个 getEdge(Node u, Node v) 方法，用于搜索特定边并在找到时返回它。我以为我会使用堆栈中包含的 search(obj o) 来搜索 Edge

我面临的问题是 Edge 中包含参数（节点 u、节点 v、字符串类型）。对于字符串参数，我并不特别关心它是什么。它可以是任何字符串，如果找到边缘应该返回它；

```
public Edge getEdge(Node u, Node v)
{
...
    Edge temp = new Edge (u, v, /*here is where the string goes*/);
    return edges.search(temp);
} 
```

再说一次，我不在乎 String 里面存储了什么；我只关心节点 u 和 v 是否连接在堆栈的边缘。有没有办法将字符串值像“any”一样放在Edge中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:23:04.347

在使用类的方法检查对象的相等`Stack.search()`性期间。因此，您必须覆盖此方法，并且在.`Edge``equals()``Edge``String``Edge`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:22:35.173

您可以使用空字符串作为参数**创建一个虚拟 Edge**并搜索它。

这当然假设您的覆盖`equals()`方法不使用字符串。

```
edges.search(new Edge(u,v,"")); 
```

* * *

如果`equals()`确实使用了字符串 - 您可能需要迭代堆栈，类似于：

```
for (Edge e: edges) { 
    if (e.first().equals(u) && e.second().equals(v)) return e;
}
return null; 
```

# jquery - jQuery：使手风琴列表在页面加载时已经扩展了 1 个列表项？

> ID：13675061
> 
> 赞同：1
> 
> 时间：2012-12-02T23:18:36.840
> 
> 标签：jquery

我正在使用以下代码使用 jQuery 显示手风琴菜单。

当前，当页面加载时，每个项目都已关闭（未展开）。我希望列表中的第一项在页面加载时已经展开。这可以使用 jQuery 以某种方式设置吗？

不幸的是，我无法更改 HTML 标记，因为它是动态生成的。

这是我的 HTML：

```
<ul id="menu-classes" class="menu">
<li>
    <h3><a>Item 1</a></h3>
    <div class="sub">
        <p>Some blah blah here.</p>
        <a href="#"><span class="readmorehomebox">read more ›&lt;/span></a>
    </div>
</li>
<li>
    <h3><a>Item 2</a></h3>
    <div class="sub">
        <p>Some blah blah here.</p>
        <a href="#"><span class="readmorehomebox">read more ›&lt;/span></a>
    </div>
</li>
<li>
    <h3><a>Item 3</a></h3>
    <div class="sub">
        <p>Some blah blah here.</p>
        <a href="#"><span class="readmorehomebox">read more ›&lt;/span></a>
    </div>
</li>
</ul> 
```

这是我的 jQuery：

```
 $('#menu-classes h3').click(function(){
    if ($(this).attr('class') != 'active'){
      $('.sub').slideUp();
      $(this).next().slideToggle();
      $('#menu-classes h3').removeClass('active');
      $(this).addClass('active');
    }
  }); 
```

这是我的CSS：

```
.sub {display: none;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:21:35.190

给要展开的元素一个ID，然后在页面加载时模拟点击：

```
$(document).ready(function(){
     $("some selector").click();
}); 
```

此外，它应该在一个`ready`函数中，以便当页面尝试*单击*该元素时该元素将存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T23:21:55.567

在 document.ready 中，只需点击您要打开的那个：

```
$(document).ready(function () {
    $("selector for item you want open").click();
}); 
```

# magento - Magento - 在 Onepage Checkout 上使用 Google checkout 作为选项的风险

> ID：13675062
> 
> 赞同：2
> 
> 时间：2012-12-02T23:18:37.433
> 
> 标签：magento, radio-button, android-pay, google-checkout

最近我玩了 Google Checkout 又名 Google Wallet。我的任务是使其成为 Onepage Checkout 的付款方式步骤中的选项。

我的 Mangento 版本是 CE 1.6.2.0

默认情况下，我们仅在购物车页面上有 Google Checkout 表单，但在 Onepage Checkout 页面上没有。我查看了模块 ( Google Api ) 的管理设置，但没有找到为结帐页面启用它的选项。

我发现，我们在 googlecheckout/form.phtml 中有表单模板，而且似乎计划在结帐页面上工作。

我决定“拍摄”并创建了一个简单的扩展，它重写了 Mage_GoogleCheckout_Model_Payment 所以我改变了

```
protected $_canUseCheckout = false; to protected $_canUseCheckout = true; 
```

瞧，该选项作为付款方式出现在结帐页面上。

我在沙盒模式下做了一些测试订单，一切似乎都很好，产品和运费都是正确的。此外，帐单信息会自动填充到 Google Wallet 页面中，并且无需在 Google Wallet 中再次填充结帐页面的相同信息。

困扰我的是这样一个事实，默认情况下这个“功能”是不可用的，这可能是有原因的，为什么 Magento 核心的人让它以这种方式工作。

基本上我的问题是您认为在结帐页面中使用 Google Checkout 作为选项有任何风险吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T23:32:54.850

根据谷歌政策，这是不允许的。

[http://checkout.google.com/seller/policies.html](http://checkout.google.com/seller/policies.html)

'不要将 Google Checkout 定位或展示为等同于 Visa、MasterCard 等的付款方式。Google Checkout 汇总了现有的付款类型以允许买家和商家进行交易。Google Checkout 不是一种替代或等同于现有付款类型的付款方式，因此不得以此类方式呈现。因此，使用电子商务提供商标准结账流程的买家不应遇到付款字段下拉菜单，其中列出了与 Visa、MasterCard、American Express 等付款类型一起列出的 Google Checkout。相反，买家应该可以选择 Google结帐作为 4b 中要求的独特结帐流程。

# wpf - 将 WPF ContextMenu 子菜单绑定到集合

> ID：13675066
> 
> 赞同：2
> 
> 时间：2012-12-02T23:19:07.483
> 
> 标签：wpf, contextmenu, observablecollection

尝试获取要绑定到 ObservableCollection 的子菜单项列表。

我可以让绑定在顶级菜单上工作。如果我在代码中添加它们，我也可以在子菜单中显示这些项目，我想避免这种情况。

MainWindow.xaml：

```
 <ContextMenu x:Key="tbMenu" >

        <-- Top level menu item -->
        <MenuItem Name="menuLaunchJob" Header="Launch a Job" >
            <-- Display a list of the available jobs in a submenu -->
            <MenuItem.ItemTemplate>    <-- This doesn't work -->
                <DataTemplate>
                    <MenuItem ItemsSource="{Binding}" Header="{Binding jobName}" />
                </DataTemplate>
            </MenuItem.ItemTemplate>
        </MenuItem>

        <-- Top level menu item -->
        <MenuItem Name="menuEditJobs" Header="Edit Jobs" >
    </ContextMenu>

    <!-- Globally declared notify icon -->
    <tb:TaskbarIcon x:Key="StatusIcon" 
                    MenuActivation="LeftOrRightClick" 
                    ContextMenu="{StaticResource tbMenu}" /> 
```

MainWindow.xaml.cs：

```
public partial class MainWindow : Window
{
    private static TaskbarIcon mTaskBar = null;

    public MainWindow()
    {
        JobsClass jc = new JobsClass();

        Environment.CurrentDirectory = System.AppDomain.CurrentDomain.BaseDirectory;
        InitializeComponent();
        mTaskBar = (TaskbarIcon)this.FindResource("StatusIcon");

        // Job sub-menu list is always the 1st item in the main menu
        MenuItem launchJob = (MenuItem)mTaskBar.ContextMenu.Items[0];
        launchJob.DataContext = jc.mJobs;
    }

    public class JobsClass
    {
        private static JobConfig mJobConfig = JobConfig.Instance;
        public ObservableCollection<JobConfig.JobData> mJobs = new ObservableCollection<JobConfig.JobData>();

        public JobsClass()
        {
            mJobConfig.ReadJobs(); 
            foreach (JobConfig.JobData job in mJobConfig.GetJobs())
            {
                mJobs.Add(job);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:48:14.093

试试这个：

```
 <-- Top level menu item -->
    <MenuItem Name="menuLaunchJob" Header="Launch a Job" ItemsSource="{Binding}" DisplayMemberPath="jobName"> 
```

（假设您`{Binding}`设置为您的 ObservableCollection）

# xcode - UITableView 的圆角边框？

> ID：13675067
> 
> 赞同：0
> 
> 时间：2012-12-02T23:19:17.557
> 
> 标签：xcode, uitableview, ios6, container-view

我想在我的 UITableView 周围有一个边框，并让角变圆。我知道这在表格单元格上是可能的，但想知道最好的方法是什么。我正在使用容器视图将表格保存在屏幕的一部分中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:44:12.520

确保您在目标属性页面中链接到 QuartzCore 框架。

在视图控制器上添加：

```
#import <QuartzCore/QuartzCore.h> 
```

然后你可以像这样设置表格视图层的圆角半径：

```
_tableView.layer.cornerRadius = 6.0f; 
```

使用任何适合您的值。

# jdbc - Struts 选择标签 一对

> ID：13675069
> 
> 赞同：0
> 
> 时间：2012-12-02T23:19:57.950
> 
> 标签：jdbc, struts2

使用 Struts2，我必须展示类似

```
<select>
   <option value="1>India</option>
   <option value="2">US</option>
   <option value="3">Mexico</option>
</select> 
```

现在“1,2,3...”和“India, US, Mexico,...”这两个值都将通过 JDBC 连接从数据库中获取。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:20:16.970

如果你有这个课程：

```
class Country {
    private String id;
    private String name;
    ...
} 
```

然后使用 JDBC恢复`Country`数据库中的所有对象：

```
List<Country> countries = CountryDAO.getAllCountries(); 
```

`<s:select>`您可以在带有标签的 jsp 中呈现此列表。

# 行动

```
class Action extends ActionSupport {
    private List<Country> countries;
    ...
    public List<Country> getCountries() {...}
} 
```

# jsp

```
<s:select label="Pets"
   list="countries"
   listKey="id"
   listValue="name"/> 
```

# python - csv 在 python 中的 writerow 大部分时间都不起作用

> ID：13675072
> 
> 赞同：3
> 
> 时间：2012-12-02T23:20:29.273
> 
> 标签：python, csv

我有一些非常简单的代码：

```
import csv
out = csv.writer(open('test.csv', 'wb'), delimiter=",")
out.writerow([u"value1", u"value2", u"value3"]) 
```

它有时有效，但大多数时候无效！我记得我以前使用过 writerow，它工作得很好，我在这里错过了什么？

为了让问题更清楚：尽管上面的代码执行没有任何错误，但 csv 文件仍然是空的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:30:40.980

我将代码修改为如下所示：

```
import csv
f = open('test.csv', 'wb')
out = csv.writer(f, delimiter=",")
out.writerow([u"value1", u"value2", u"value3"])
f.close() 
```

所以我所做的就是将 分开`open('test.csv', 'wb')`并将其分配给`f`，以便我可以`f.close()`在最后使用。它以这种方式完美运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:43:45.607

完成您正在做的事情的一种稍微 Pythonic 的方式是使用[上下文管理器](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)，它由`with`语句指定：

```
In [1]: import csv

In [2]: with open('test.csv', 'wb') as f:
   ...:     writer = csv.writer(f)
   ...:     writer.writerow([u"value1", u"value2", u"value3"]) 
```

当您使用`with`时，除其他外，它可确保在代码退出缩进块时正确关闭文件。此外，在使用`csv`模块时，默认分隔符是`,`，因此您实际上可以从您的`writer`（或`out`在您的情况下）声明中省略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T04:40:57.017

我通过关注如何缩进包含 csv.writer 的块来解决这个问题。我在阅读后进行的其他一些迭代下，将其缩进了更多。

```
with open('retrans.csv') as csvfile:
    file1 = csv.reader(csvfile, delimiter = ',')
    print(file1)

    next(file1)

    count = 0
    for row in file1:
        while count < 1:
            print(row)  
            count +=1

            with open("newfile.csv", 'w', newline = '') as outfile:
                csv_writer = csv.writer(outfile, delimiter = ',')
                for lines in file1:
                    csv_writer.writerow(lines) 
```

# javascript - 设置隐藏表单“值”不支持 jQuery

> ID：13675075
> 
> 赞同：2
> 
> 时间：2012-12-02T23:20:36.740
> 
> 标签：javascript, jquery

我有一个函数，它传入一个名为“targetElement”的 jQuery 对象，这是我需要操作的表单字段。我使用此函数在表单加载后为其设置默认值。在一种形式中，我有三个隐藏的表单元素（又名`<input type="hidden">`），每个元素都分配了一个值，三个中的两个可以正常工作。第三个让我发疯。

这是函数中的代码片段：

```
case "today":
    SetFieldValue (targetElement , Date.today().toString("yyyy-MM-dd HH:mm:ss") );
    console.log ('Setting ' + jQuery(targetElement).attr('id') + ' to "today": ' + Date.today().toString("yyyy-MM-dd HH:mm:ss") );
    break; 
```

SetFieldValue 函数在哪里：

```
function SetFieldValue ( domObject, value ) {
  // as a safety function, check if a string representation of the domObject was passed in and convert it to a jQuery object if it was
  if ( jQuery.type(domObject) === "string") {
    domObject = jQuery(domObject);
  }

  if ( jQuery.inArray (domObject.prop('tagName').toLowerCase(),['input' , 'select' , 'textarea']) >= 0 ) {
    console.log ("setting to value attribute: " + value);
    domObject.attr('value',value);
    console.log ("now set to: " + domObject.attr('value') + "(" + domObject.attr('id') + ")" );
  } else {
    console.log ("setting to html attribute");
    domObject.html( value );
  }
  return domObject;
} 
```

事情就是这样。我在调用 SetFieldValue 之后直接设置了一个调试断点。我输入了“targetElement”，它清楚地表明该值已设置。然而，当我键入对 DOM 字段的 jQuery 引用时，它会显示没有设置值。嗯？

![在此处输入图像描述](../Images/7a1242adf327b4199081683739b46df8.png)

现在有一件事我没有提到......我怀疑它很重要......当我在调试器中输入“targetObject”时，它所做的第一件事就是返回一个空数组：

![在此处输入图像描述](../Images/a0b9974a9685aeaeb83d5bf4cd1335fa.png)

然后一两秒钟后，它自动神奇地扩展为您最初看到的屏幕截图。请帮忙！

## 更新

到目前为止，我非常感谢所有帮助，但我怀疑真正的问题是响应 targetElement（一个 jQuery 对象）的“延迟”暗示的。有关更多详细信息，请参见上文。我还在下面添加了另一个有趣的快照。如果您注意到代码中的 log.console 语句，这将是有意义的：

![在此处输入图像描述](../Images/4fe63fb2eba8f8be80ac0d42961f0335.png)

我试图做的是：

a) 说明我将要设置的值 b) 将值设置为声明的意图 (aka, 2012-12-02 00:00:00) c) 检查它是否已设置 (它有) d) 然后从呼叫路由再次检查（这也确认它已被设置）

在最后一个 log.console（“break”语句）之后的行上，我放置了一个断点，调试器不同意所有控制台消息。奇怪！

## *更新 2*

人们要求提供额外的上下文，准确地说是“代码”。我正在努力寻找一种好方法来提供一个紧凑的代码模块来重现问题，所以我想也许一个简短的截屏视频演示这个问题会有所帮助。这里有两个尝试：

[截屏 1](https://vimeo.com/54816768) [截屏 2](https://vimeo.com/54818500)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:23:53.387

而不是通过jQuery设置value属性，直接引用元素的value属性即可：

```
domObject[0].value = value; 
```

或者，甚至不将其包装在 jQuery 对象中：

```
domObject.value = value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:24:00.790

尝试使用[`.val(value)`](http://api.jquery.com/val)而不是`.attr('value',value)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:39:19.920

我知道我没有为人们提供足够的背景来真正深入研究这个问题，但我最终解决了它。问题是什么？真的很傻……不是一直都这样吗？无论如何，这只是问题'id'中的DOM元素不是唯一的情况。嗯。总是让你陷入困境的那些显而易见的事情会被你忽略。

无论如何，感谢您的耐心和帮助。

# c++ - 在 C++ 中使用 extern "C" 时我到底失去了什么？

> ID：13675079
> 
> 赞同：18
> 
> 时间：2012-12-02T23:20:52.353
> 
> 标签：c++, c, extern, linkage

我正在尝试用 C++ 开发一个动态库，以便由用 IDL（交互式数据语言）编写的现有程序调用。我知道我需要使用 extern "C" 来禁用名称修饰，以便 IDL 可以调用它需要的函数（调用机制的其余部分非常简单）。

但是，我总是对使用我不完全理解的语言特性犹豫不决，所以我的问题是：如果有的话，我会因为恢复到 C 链接而失去 C++ 的哪些特性？我认为命名空间是显而易见的，但它是否也完全禁用了 C++ 的所有其他不错的功能？我还能使用 C++ STL 以及我所依赖的所有各种语言特性（尤其是 C++11 特性）吗？还是我基本上被困在 C 语言中？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-02T23:27:05.607

唯一被删除的是外部可见名称的[*名称修饰*](http://en.wikipedia.org/wiki/Name_mangling)。参数类型以及参数计数的函数重载将因此停止工作。本质上，链接阶段的名称解析回到了普通的旧 C 模式（即一个名称 - 一个条目）。

就实现的内部结构而言，您可以继续使用标准库和 C++11 的所有其他不错的功能。只有外部可见实体的名称由 更改`extern C`。

# ruby-on-rails - 如何读取格式不佳的 Open Graph url

> ID：13675080
> 
> 赞同：0
> 
> 时间：2012-12-02T23:21:11.850
> 
> 标签：ruby-on-rails, facebook-opengraph

我目前在我的`Product`模型中使用以下代码来读取和保存`og:image`零售网站的 s。

```
def photo_from_url(url)
  if !Nokogiri::HTML(open(url)).css("meta[property='og:image']").blank?
    photo_url = Nokogiri::HTML(open(url)).css("meta[property='og:image']").first.attributes["content"]
    self.photo = URI.parse(photo_url)
    self.save
  end
end 
```

虽然这适用于大多数页面，但也有一些`og:image`会返回`bad URI(is not URI?)` 此类链接的示例是 H&M 零售网站上的以下链接格式。

```
http://lp.hm.com/hmprod?set=source[/model/2012/K71 05701 95313 06 0043 0.jpg],rotate[],width[],height[],x[],y[],type[STILL_LIFE_FRONT]&call=url[file:/product/facebook] 
```

显然，这不是一个漂亮的链接（甚至 StackOverflow 的 Markdown 解析器也无法判断它是一个链接......），但当直接粘贴到浏览器中时它确实有效。

我该怎么做才能正确阅读这样的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:36:00.580

哇，这看起来像一个讨厌的 URL。尽管 URL 方案不错，但我建议您只需使用以下方式转义您的 URL [`URI::Escape`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI/Escape.html)：

```
irb(main):001:0> url = "http://lp.hm.com/hmprod?set=source[/model/2012/K71 05701 95313 06 0043 0.jpg],rotate[],width[],height[],x[],y[],type[STILL_LIFE_FRONT]&call=url[file:/product/facebook]"
=> "http://lp.hm.com/hmprod?set=source[/model/2012/K71 05701 95313 06 0043 0.jpg],rotate[],width[],height[],x[],y[],type[STILL_LIFE_FRONT]&call=url[file:/product/facebook]"
irb(main):002:0> uri = URI.escape url
=> "http://lp.hm.com/hmprod?set=source[/model/2012/K71%2005701%2095313%2006%200043%200.jpg],rotate[],width[],height[],x[],y[],type[STILL_LIFE_FRONT]&call=url[file:/product/facebook]"
irb(main):003:0> URI(uri)
=> #<URI::HTTP:0x000000024321d0 URL:http://lp.hm.com/hmprod?set=source[/model/2012/K71%2005701%2095313%2006%200043%200.jpg],rotate[],width[],height[],x[],y[],type[STILL_LIFE_FRONT]&call=url[file:/product/facebook]> 
```

# google-drive-api - Google Drive 发布站点功能的带宽限制？

> ID：13675084
> 
> 赞同：7
> 
> 时间：2012-12-02T23:21:26.283
> 
> 标签：google-drive-api

有谁知道 Google Drive 的新网站发布功能有哪些带宽限制？

[https://developers.google.com/drive/publish-site](https://developers.google.com/drive/publish-site)

如果我通过这些页面提供音乐或其他大文件怎么办？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T14:50:45.517

是的，Google Drive 网站发布功能确实有配额。

虽然我们无法分享实际数字，但请注意，托管在 Google Drive 上的网站将能够处理大量负载，这应该可以满足大多数发布个人内容的用户的需求。

然而，这并不旨在为流量非常大的网站（例如每天数百万次访问）提供资源。此外，目前没有办法增加您的配额。如果您正在为高流量网站寻找专业的解决方案，请查看[Google App Engine](https://developers.google.com/appengine/)。

当配额用完时，`403`将在 24 小时的剩余时间内提供 HTTP 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:03:27.327

根据这个讨论，他们似乎没有对带宽施加限制：[link](https://productforums.google.com/forum/?fromgroups=#!msg/drive/XFi7g-UcG2w/4nwWqWb2bfEJ)

这同样适用于发布功能。看起来他们没有限制与 Dropbox 等服务竞争（确实如此），但显然他们应该采取措施以防滥用。

# c++ - 通过 C 接口分配和释放资源的正确习语

> ID：13675090
> 
> 赞同：1
> 
> 时间：2012-12-02T23:22:07.520
> 
> 标签：c++

通常 C++ 程序必须处理 C 库，这些库提供了用于分配和释放资源的免费函数。为了简化此示例，请考虑两个 C 函数，例如`get_resource()`和`free_resource()`。

考虑一个对象在其生命周期的某个时间点获取任何资源，并在对象被销毁或由于构造过程中的错误而未完全构造时自动释放它。

获得这种自动化的理想/简短/简单的习语是什么？一个想法如下，但它使对象不能正确地默认移动。有没有更好的方法不意味着从析构函数中释放内存或检查构造函数中的错误以进行回滚？

```
struct Object {
    void* my_get_resource() { // might be called from the constructor or any other point
        return get_resource();
    }

    Object() : up(&resource, &del) { 
        resource = my_get_resource();
        /* init all the stuff, but this init might fail at _many_ points */ 
    }
    //~Object() { if (resource) free_resource(resource); } // I don't like: collides with del and is not called if my_get_resource() is called from the constructor and the init process fails for some reasons

private:
    void *resource = nullptr;
    static void del(void ** ) noexcept {
        if (*resource) { free_resource(resource); }
    }
    unique_ptr < void*, decltype(&del) > up; // RAII: almost good, sadly that makes Object not moveable properly without redefining the move constructor properly

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T00:48:36.847

显然你想要一个可移动的 RAII 包装器。

然后只需定义一个移动构造函数并声明一个受保护或私有的复制构造函数和复制赋值运算符。如果您不打算支持当前的 Visual C++，那么您可以将复制构造函数和复制赋值运算符声明为已删除。

这涉及在构造函数中检查错误并在析构函数中进行清理，这与您的要求不一致……

> 有没有更好的方法不意味着从析构函数中释放内存或检查构造函数中的错误以进行回滚？

简而言之，这些要求通常与您发布的代码所示的目标不兼容。

即使您曾经`unique_ptr`完成这项工作，它的工作方式也是通过检查构造函数中的错误并在析构函数中进行清理，这与您的（非常不切实际的）要求直接不一致。

以下是如何开始“手动”做事：

```
bool hopefully( bool const c ) { return c; }
bool throwX( string const& s ) { throw std::runtime_error( s ); }

class Resource
{
private:
    void* pResource;

    Resource( Resource const& );    // Add "= delete" if all compilers support it.
    Resource& operator=( Resource const& ); // Ditto.

public:
    void* theValue() const { return pResource; }  // Use problem-specific name.

    ~Resource()
    {
        if( pResource != 0 )
        {
            ::freeResource( pResource );
        }
    }

    Resource()
        : pResource( ::getResource() )
    {
        hopefully( pResource != 0 )
            || throwX( "Resource::<init>: getResource failed" );
    }

    Resource( Resource&& other )
        : pResource( other.pResource )
    {
        other.pResource = 0;
    }
}; 
```

您可以添加移动赋值运算符。

您可以将事物概括为`Handle`类模板。

* * *

免责声明：未经测试的现成代码，编译器未触及。

# php - 如何使用正则表达式将 HTML 转换为 bbcode？

> ID：13675092
> 
> 赞同：1
> 
> 时间：2012-12-02T23:22:50.097
> 
> 标签：php, regex, preg-replace, preg-match, bbcode

> **可能重复：**
> [bbcode unparser regex help](https://stackoverflow.com/questions/3272439/bbcode-unparser-regex-help)

我想转换这个 HTML 代码

```
<div class="postQuote"> <div class="postQuoteAuthor"><a href="http://www.siteurl.com/profile.php?user=Username">Username</a> wrote...</div> quoted text</div> comment 
```

到 bbcode ..

```
[QUOTE=Username] quoted text [/QUOTE] comment 
```

我不想要关于创建 bbcode 的教程，它已经设置好了，我只想知道如何匹配和替换 .. 使文本与新板兼容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:33:57.800

好吧，通常人们会求助于 preg_replace ......但我更喜欢更长的 stripos() 过程

```
if (($startat = stripos($html,'<div class="postQuote"'))!==false) {

  $startend = stripos($html,'</div', stripos($html,'</div', $startat)+6);

  $start_username_at = stripos($html,'<a', $startat);
  $start_username_end = stripos($html,'</a', $start_username_at);

  $start_comment_at = stripos($html,'</div', $startat)+6;
  $start_comment_end = stripos($html,'</div', $start_comment_at);

  $username = trim(strip_tags(substr($html,$start_username_at,$start_username_end-$start_username_at)));
  $comment = trim(strip_tags(substr($html,$start_comment_at,$start_username_end-$start_comment_at)));
  echo "[QUOTE=Username]".$username."[/QUOTE] ".$comment;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:40:57.850

```
$string = '<div class="postQuote"> <div class="postQuoteAuthor"><a href="http://www.siteurl.com/profile.php?user=Username">Username</a> wrote...</div> quoted text</div> comment ';

$string = preg_replace('|^<div class="postQuote".*user=([^"]+)".+</div>([^<]+)</div>(.+)$|', '[QUOTE=$1] $2 [/QUOTE] $3', $string);

echo $string; // [QUOTE=Username] quoted text [/QUOTE] comment 
```

# opengl - 沿预定义路径移动对象

> ID：13675100
> 
> 赞同：1
> 
> 时间：2012-12-02T23:23:18.490
> 
> 标签：opengl, c++-cli, glulookat

我和几个朋友正在尝试编写一个小的动画片段。所以，我们决定一个好的但仍然有点简单的项目是制作某种恐怖屋之旅，其中“玩家”乘坐手推车穿过废弃的矿井。

由于制作圆和直线有点无聊，我们决定做一个“稍微”更复杂的动作。我们推断我们可以导入一个带有简单顶点条带的 .obj 文件，作为移动的路径。当然，这个对象不会被绘制在屏幕上。因此，我创建了一个 Trayectory 类来处理此路径的导入。这是我用来导入路径的代码：

```
Trayectory::Trayectory(String^ obj)
{
this->vert = gcnew List<Point3D^>();
this->norm = gcnew List<Point3D^>();

StreamReader^ archivo=gcnew StreamReader(obj);

array<String^>^ file = archivo->ReadToEnd()->Split('\n');
archivo->Close();

for each(String^ s in file) {
    array<String^>^ str = s->Split(' ');

    if(str[0]=="v") {
        Point3D^ tmp = gcnew Point3D(Convert::ToSingle(str[1]),Convert::ToSingle(str[2]),Convert::ToSingle(str[3]));
        this->vert->Add(tmp);
    }

    if(str[0]=="vn") {
        Point3D^ tmp = gcnew Point3D(Convert::ToSingle(str[1]),Convert::ToSingle(str[2])+1.0,Convert::ToSingle(str[3]));
        this->norm->Add(tmp);
    }
}
} 
```

但是，我有两个小问题：

1.  由于我使用的是顶点条，我无法为它们分配法线。有没有办法计算与 gluLookAt() 一起使用的法线？
2.  当我渲染对象时，我将它转换为我的顶点列表中的一个顶点，并将它的外观分配给该行中的下一个顶点。然而，这带来了我的 .obj 中的顶点不一定有序的问题。有没有办法订购它们？我推断我可以计算出最接近每个顶点的顶点并进行类似冒泡排序的排序。但它可以更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:55:39.540

1.  vn 只能表示 top => vn 可能是 (0,0,1);在`gluLookAt` `up`向量中用于计算`side`向量: `side=forward X up`.
2.  这可能是合适的方法。不要在运行时设置顺序。

# c# - 使用 kinect sdk beta 编译的应用程序是否仍然适用于新的运行时框架

> ID：13675101
> 
> 赞同：1
> 
> 时间：2012-12-02T23:23:19.400
> 
> 标签：c#, xaml, kinect

我有一个在 kinect sdk beta 中创建的应用程序，我需要在我正在创建的应用程序中执行它。我目前的项目是 sdk beta，但将来整个项目将被移植到最新的 kinect sdk。所以我的问题是：原始应用程序是否仍会被执行并仍然使用最新的 microsoft kinect 框架、驱动程序等运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:47:30.057

当 Kinect for Windows SDK 从 beta（由 Microsoft Research 生产）更改为正式版（由 Microsoft IEB 生产）时，会有几个重大更改，包括命名空间更改。因此，您不能在不先更改代码的情况下简单地将程序集升级到最新版本。

驱动程序也已更新，以反映 API 的变化，以及最新版本中添加的附加功能。所以你需要更新整个包。

但是，Microsoft 保留了可供下载的原始研究 beta 程序集，以防万一这会导致问题，因此您仍然可以在需要时获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:29:22.243

我已经在 BETA SDK 上创建了一个应用程序，它可以与新安装的驱动程序完美运行（只需将 kinect 连接到 USB 端口即可获得）所以我想它们仍然包含在内并且仍然可以完美运行。但是未来是模糊的，因为当 SDK 从 beta 版迁移到正式版​​时，它也移动了“办公室”（从 Microsoft Research 到 Microsoft IEB），并且引入了许多重大更改，包括命名空间，因此尚不清楚它们是否仍将运行

# java - 生成随机数组 int[] 时性能更好

> ID：13675103
> 
> 赞同：6
> 
> 时间：2012-12-02T23:23:28.363
> 
> 标签：java, arrays, performance

我正在制作campare排序算法的程序。我正在使用大量数字。我在创建充满随机数的数组时遇到了性能问题。

有没有办法让它更快？

目前我正在使用：

```
int[] temp = new int[length];      
for(int i = 0; i < temp.length; i++)
{
   temp[i] = generator.nextInt(temp.length * 10);
} 
```

在哪里

```
generator = new Random(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:32:21.730

您可以尝试通过仅计算一次 for-loop 和 newtInt 参数的最大值或直接使用您的`length`变量来加快速度。并且只有一个静态随机生成器。

```
private static final Random GENERATOR = new Random();   

int[] temp = new int[length];      
int tempLen = length * 10;
for(int i = 0; i < length; i++)
{
   temp[i] = GENERATOR.nextInt(tempLen);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:36:06.040

如果您想要更快，您可以编写自己的随机数生成器，它的随机性较小但速度更快。

不幸的是，这是 c 代码，但您可以翻译成 java：取自[http://en.wikipedia.org/wiki/Random_number_generation](http://en.wikipedia.org/wiki/Random_number_generation)

对于您的应用程序，这就足够了。对于密码学不是。

```
m_w = <choose-initializer>;    /* must not be zero */
m_z = <choose-initializer>;    /* must not be zero */

uint get_random()
{
    m_z = 36969 * (m_z & 65535) + (m_z >> 16);
    m_w = 18000 * (m_w & 65535) + (m_w >> 16);
    return (m_z << 16) + m_w;  /* 32-bit result */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T23:47:18.867

您可以尝试使用[Uncommons Math](http://maths.uncommons.org/)库。它宣传了各种随机数生成器，这些生成器是为了实现高性能而实现的`java.util.Random`，除其他外。看看[`XORShiftRNG`](http://maths.uncommons.org/api/org/uncommons/maths/random/XORShiftRNG.html)例如：

> 非常快速的伪随机数生成器。有关说明，请参阅[此页面](http://school.anhb.uwa.edu.au/personalpages/kwessen/shared/Marsaglia03.html)。这个RNG的周期大约是2^160，没有the长[`MersenneTwisterRNG`](http://maths.uncommons.org/api/org/uncommons/maths/random/MersenneTwisterRNG.html)但是比较快。

免责声明：我个人对这个库没有经验，只是在谷歌上找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T23:55:11.510

我看到的是您的瓶颈是重复的 random() 操作。如果您可以将其减少到更少的 random() 操作，您最终将获得更快的性能。

我会生成一个非常大的字符串、字节数组或数字。这将导致仅创建一个大型初始随机数据。将其视为随后使用的数据池。

随后的操作将只遍历它以提取随机数。

这样，您只生成一次随机数据，从而消除了随机数据生成的瓶颈。

确保您使用 psudo random 而不是真正的随机，因为真正的随机肯定会损害您的性能。

# sql - SQL：字段合并

> ID：13675104
> 
> 赞同：0
> 
> 时间：2012-12-02T23:23:42.070
> 
> 标签：sql, sql-server-2008-r2

使用此查询时，我得到了我想要的结果，但我需要合并 Beer.Name 实例。这样，当我想将 CustomerID 和 Beer.Name 合并为单个实体时，我的输出中有多个 Beer.Name 条目及其数量。我该怎么做？

```
SELECT C.CustomerID, Beer.Name,sum (quantitysupplied)as 'Total Quantity'
FROM Customer C
INNER JOIN CustomerOrder
    ON C.CustomerID = CustomerOrder.CustomerID 
INNER JOIN CustomerOrderLine
    ON CustomerOrderLine.CustomerOrderID = CustomerOrder.CustomerOrderID 
INNER JOIN Product
    ON CustomerOrderLine.ProductID =Product.ProductID 
INNER JOIN Beer
    ON Product.BeerID = Beer.BeerID
GROUP BY C.CustomerID, Beer.Name, CustomerType
HAVING CustomerType LIKE 'C' 
```

谢谢你。

这是输出：

```
 CustomerID  Name                           Total Quantity
 ----------- ------------------------------ --------------
  1001        Ale Heads                      11
 1002        Ale Heads                      8
  1003        Ale Heads                      13
  1004        Ale Heads                      3
  1006        Ale Heads                      4
  1007        Ale Heads                      14
  1008        Ale Heads                      4
 1009        Ale Heads                      4 
```

它很长，但它很有代表性，我只想将啤酒名称和客户 ID 的一个实例合并到其他东西中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:19:06.770

这就是你所追求的吗？

```
SELECT CAST(C.CustomerID AS varchar) + ': ' + Beer.Name AS CustomerBeer, Sum(quantitysupplied) AS 'Total Quantity'
FROM etc. 
```

# javascript - 尝试显示数据时出现 Mustache 循环错误

> ID：13675109
> 
> 赞同：6
> 
> 时间：2012-12-02T23:24:12.623
> 
> 标签：javascript, jquery, templates, mustache, templating

我在胡须中循环时遇到问题。基本上一个 usr 有能力为产品添加选项。每个选项可以有超过 1 个选项。他们也走到一起选择名称+价格。我收到以下错误：

未捕获的错误：未打开的部分：选择

我的代码：

```
var choices = new Object();

    $("[name='choice_name']").each(function(){
        var c_name = $(this).val();
        $("[name='choice_price']").each(function(){
            var c_price = $(this).val();
            choices.choice_name = c_name;
            choices.choice_price = c_price;
        });
    });

    console.log(choices);

    var templateData = {
        name: $("[name='option_name']").val(),
        type: $("[name='option_type']").find("option:selected").val(),
        choices: choices
    };

    $.get(default_url+"js_temp/options_widget.html", function(templates){
        $('.current_options').append(Mustache.render(templates, templateData));
    }); 
```

HTML：

```
<div>
  <p class="pull-right"><i class="icon icon-pencil"></i><br /><i class="icon icon-trash"></i></p>
    <p><strong>Option Name:</strong> {{option_name}}</p>
    <p><strong>Option Type:</strong> {{option_type}}</p>
    <hr>
    {{choices}}
    <div class="row-fluid">
      <div class="span7"><p><strong>Choice Name:</strong> {{choice_name}}</p></div>
      <div class="span5"><p><strong>Price:</strong> {{choice_price}}</p></div>
    </div>
    {{/choices}}
</div> 
```

我想我无法为选择对象实现正确的格式。我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T23:28:27.717

循环的语法是`{{#choices}} {{prop}} {{/choices}}`-- 看起来你缺少`#`.

```
{{#choices}}
    <div class="row-fluid">
      <div class="span7"><p><strong>Choice Name:</strong> {{choice_name}}</p></div>
      <div class="span5"><p><strong>Price:</strong> {{choice_price}}</p></div>
    </div>
{{/choices}} 
```

此外，在构造`choices`时，您正在覆盖每个对象——我认为您想将每个对象推送到数组中。试试这个：

```
var choices = [];

$("[name='choice_name']").each(function(){
    var c_name = $(this).val();
    $("[name='choice_price']").each(function(){
        var c_price = $(this).val();
        choices.push({ 
            choice_name: c_name, 
            choice_price: c_price 
        });
    });
}); 
```

见这里：http: [//jsfiddle.net/U6pLT/1/](http://jsfiddle.net/U6pLT/1/)

# math - 给定角度和 x，我如何找到 Y？

> ID：13675113
> 
> 赞同：-2
> 
> 时间：2012-12-02T23:24:29.910
> 
> 标签：math, trigonometry

给定角度和 x，我如何找到 Y？例如，如果角度 = 45 且 x = 480，则 y = 480。我该如何计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:30:07.217

如果它是直角（90 度），您可以使用此公式计算

```
x/y = tan (deg) 
```

从你的问题来看，它似乎是一个正确的角度。

# php - 下拉菜单中未选择任何选项

> ID：13675114
> 
> 赞同：0
> 
> 时间：2012-12-02T23:24:41.250
> 
> 标签：php, javascript, jquery, html

我在[这里有一个应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/example.php)

现在让我们在我的数据库中说它看起来像这样：

课程表：

```
CourseId CourseNo CourseName          Duration
1        INFO101  ICT                 3/4
2        INFO102  Computing           2/3
3        INFO103  Computing Science   3 
```

在课程下拉菜单中，它显示数据库中的课程列表，如下所示：

```
Please Select
INFO101-ICT 
INFO102-Computing
INFO103-Computing Science 
```

在持续时间下拉菜单中，它显示以下持续时间选项：

```
Please Select
1
1/2
2
2/3
3
3/4
4
4/5
5
5/6
6
6/7
7
7/8
8
8/9
9
9/10
10 
```

现在假设在应用程序中发生的是，当您从下拉菜单中选择一门课程时，它应该从持续时间下拉菜单中选择与数据库中属于该课程的持续时间相匹配的持续时间。

因此，例如，如果我从课程`INFO101-ICT`下拉菜单中选择课程，那么它应该`3/4`在持续时间下拉菜单中自动选择持续时间。

但是在应用程序中它没有这样做，当我选择一门课程时，它只是在持续时间下拉菜单中选择一个空白选项。

我的问题是如何根据从课程下拉菜单中选择的课程在持续时间下拉菜单中选择正确的持续时间？

以下是应用程序的完整代码：

```
 <?php

        // connect to the database
        include('connect.php');

        /* check connection */
        if (mysqli_connect_errno()) {
            printf("Connect failed: %s\n", mysqli_connect_error());
            die();
        }

        ?>

        <h1>EDIT COURSE</h1>

        <?php

        $min_year     = 1;
        $max_year     = 10;
        $years        = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
        $durationHTML = '';
        $durationHTML .= '<select name="duration" id="newDuration">' . PHP_EOL;
        $durationHTML .= '<option value="">Please Select</option>' . PHP_EOL;

        foreach ($years as $year) {
            $durationHTML .= "<option>$year</option>" . PHP_EOL;
            if ($year != $max_year) {
                $nextYear = $year + 1;
                $durationHTML .= "<option>$year/$nextYear</option>" . PHP_EOL;
            }
        }
        $durationHTML .= '</select>';

        $newCourseNo = (isset($_POST['CourseNoNew'])) ? $_POST['CourseNoNew'] : '';

        $coursequery = "
        SELECT CourseId, CourseNo, CourseName, Duration
        FROM Course
        ORDER BY CourseNo
        ";

        $courseqrystmt = $mysqli->prepare($coursequery);
        // You only need to call bind_param once

        $courseqrystmt->execute();

        $courseqrystmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName, $dbDuration);

        $courseqrystmt->store_result();

        $coursenum = $courseqrystmt->num_rows();

        $courseHTML = '';

        $courseHTML = '<select name="courses" id="coursesDrop">' . PHP_EOL;
        $courseHTML .= '<option value="">Please Select</option>' . PHP_EOL;

        $courseInfo = array();

        while ($courseqrystmt->fetch()) {
            $courseHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbCourseId, $dbCourseNo, $dbCourseName) . PHP_EOL;

            $courseData               = array();
            $courseData["CourseId"]   = $dbCourseId;
            $courseData["CourseNo"]   = $dbCourseNo;
            $courseData["CourseName"] = $dbCourseName;
            $courseData["Duration"]   = $dbDuration;

            array_push($courseInfo, $courseData);
        }

        $courseHTML .= '</select>';

        $courseform = "
        <form action='" . htmlentities($_SERVER['PHP_SELF']) . "' method='post' id='courseForm'>
        <p><strong>Course:</strong> {$courseHTML} </p>   
        </form>";

        echo $courseform;

        $editcourse = "
        <form id='updateCourseForm'>

        <p><strong>New Course Details:</strong></p>
        <table>
        <tr>
        <th>Duration (Years):</th> 
        <td id='data'>{$durationHTML}</td>
        </tr>
        </table>

        </form>
        ";

        echo $editcourse;

        ?>

        < script type = "text/javascript" > 
$(document).ready(function() {

    var courseinfo = '<?php echo json_encode($courseInfo);?>';

    $('#coursesDrop').change(function() {

        var courseId = $(this).val(),
        coursedata;

        for (var i = 0, l = courseinfo.length; i < l; i++) {
            if (courseinfo[i].CourseId == courseId) {
                coursedata = courseinfo[i];
            }
        }

        var index = $('#newDuration option[value="' + courseinfo.Duration +  '"]').attr('selected','selected');
        alert(courseinfo.Duration);

    });
});
         < /script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:40:16.643

在您的代码中，您有

```
if (courseinfo[i].courseId = courseId) {
  coursedata = courseinfo[i];
} 
```

你的if不好，应该是

```
if (courseinfo[i].courseId == courseId) {
  coursedata = courseinfo[i];
} 
```

然后，要选择，您应该使用

```
$('#newDuration option[value="' + courseData.Duration +  "]').attr("selected","selected"); 
```

您需要删除 $('#newDuration')[0].selectedIndex = index;。你在 for 循环中的比较是 courseId 而你的对象包含 CourseId

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:40:29.020

一个问题是：

```
if (courseinfo[i].courseId = courseId) {
    coursedata = courseinfo[i];
} 
```

应该是这样的：

```
if (courseinfo[i].courseId == courseId) {
    coursedata = courseinfo[i];
} 
```

您需要比较运算符`==`而不是`=`.

另一个问题是以下是文字字符串而不是调用 php 函数：

```
var courseinfo = '<?php=json_encode($courseInfo);?>'; 
```

查看页面源代码，您会看到它`courseinfo`的值是 ，`'<?php=json_encode($courseInfo);?>'`而不是输出`json_encode($courseInfo)`。您需要修复此问题以输出 php.ini 文件。

**编辑 2**

您的代码中还有一些问题。这是可以工作的代码。

**Javascript**

```
var courseinfo = [{"CourseId":1,"CourseNo":"INFO101","CourseName":"Bsc Information Communication Technology","Duration":"3\/4"},{"CourseId":2,"CourseNo":"INFO102","CourseName":"Bsc Computing","Duration":"3\/4"},{"CourseId":8,"CourseNo":"INFO103","CourseName":"Business and Finance","Duration":"3"},{"CourseId":7,"CourseNo":"INFO104","CourseName":"English","Duration":"3\/4"},{"CourseId":9,"CourseNo":"INFO105","CourseName":"Mathematics","Duration":"3\/4"},{"CourseId":10,"CourseNo":"INFO106","CourseName":"Law","Duration":"3"}];

$('#coursesDrop').change(function() {

    var courseId = $(this).val(),
        coursedata, i;

    for (i = 0, l = courseinfo.length; i < l; i++) {
        if (courseinfo[i].CourseId == courseId) {
            coursedata = courseinfo[i];
        }
    }

    var index = $('#newDuration').val(coursedata.Duration);

});​ 
```

**[演示](http://jsfiddle.net/Dd83A/1/)**

这就是问题所在。

您需要删除`courseinfo`数组周围的单引号：

```
var courseinfo = [...]; 
```

您的 if 语句需要正确的大小写来表示它的 variable `courseinfo` `CourseId`。在数组中`CourseId`，这就是`if`比较中需要的内容：

```
if (courseinfo[i].CourseId == courseId) {
    ...
} 
```

用于`coursedata.Duration`设置`#newDuration` `val`.

```
var index = $('#newDuration').val(coursedata.Duration); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T23:45:47.307

尝试：

```
$('#newDuration').val(courseData.Duration); 
```

安装的

```
var index = $('#newDuration option[value="' + courseData.Duration +'"]').index('#newDuration option');
$('#newDuration')[0].selectedIndex = index; 
```

**- - 编辑 - -**

如果`courseinfo`是 JsonString 你应该改变你的代码是这样的：

```
var courseinfoJson = '<?php=json_encode($courseInfo);?>';
var courseinfo = $.parseJSON(courseinfoJson);

 $('#coursesDrop').change(function() {
    var courseId = $(this).val();
    var coursedata;

    for (var i = 0, i = courseinfo.length; i++) {
        if (courseinfo[i]['CourseId'] == courseId) {
            coursedata = courseinfo[i];
        }
    }

    $('#newDuration').val(courseData['Duration']);
} 
```

**- - 编辑 - -**

# c - 从用于写入的 FILE 副本中将数据读入数组

> ID：13675116
> 
> 赞同：-1
> 
> 时间：2012-12-02T23:24:55.993
> 
> 标签：c, file, argv

我的程序中有一个写入 argv[1] 的 FILE 对象

```
tabptr = fopen(argv[1],w+) 
```

我需要从同一个文件中读取，但是我将如何创建一个指向 tabptr 的指针，该指针可以从 argv[1] 读取而不是写入？或者我只是在想这个过程。

```
tabptr = fopen(argv[1],w+)
//tabptr writes to argv[1]...
//time to declare file to read from the same tabptr wrote to
FILE * tabptrStr = tabptr   //how would i make tabptrStr readable?
tabptrStr = fopen(argv[1],"r") //or am i just overthinking this and this will accomplish my goal? 
```

argv[1] 让我感到困惑，我是来自 C++ 的 c 新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:35:31.310

你读和写*都*一样`FILE*`。这是给定的模式[`fopen`](http://linux.die.net/man/3/fopen)，它决定您是否可以读取和/或写入文件。

所以你可以

```
fread(buf, 17, 1, tabptr); 
```

或者

```
fwrite(buf, 17, 1, tabptr); 
```

与 tabptr。

`argv[1]`通常是给程序的参数`main()`

```
int main(int argc, char **argv)
{
...
} 
```

在这种情况下，命名您应该用于读取和写入的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:51:23.517

`argc`是传递给 main 的命令行参数的数量，并且`argv`是指向这些参数的指针数组（argv[0] 是程序名称）。在您的情况下， argv[1] 是为读/写而打开的文件的名称。

to 的第二个参数`fopen`表示文件的打开方式，因此您已经打开了文件进行读写，并且`tabptr`可以用于相同的操作。请注意，`w+`如果文件已存在，则以模式打开将丢弃文件的内容。

# java - hdfs java api的导入问题

> ID：13675118
> 
> 赞同：0
> 
> 时间：2012-12-02T23:25:01.330
> 
> 标签：java, api, hadoop, hdfs

我正在尝试运行此处找到的示例：http: [//thysmichels.com/2012/01/31/java-based-hdfs-api-tutorial/](http://thysmichels.com/2012/01/31/java-based-hdfs-api-tutorial/)

但是当我去编译java程序时，我得到错误说包不存在，例如。

```
error: package org.apache.hadoop.conf does not exist
import org.apache.hadoop.conf.Configuration; 
```

Hadoop 1.0.4 已安装并且工作正常。我看过的每个处理 hdfs 的教程都只是从我之前提供的链接中的一个程序开始，他们没有谈论我需要的任何特殊先决条件。所以我想知道我需要做什么才能编译？我假设我需要编辑我的类路径以指向适当的包，但我不知道它们的位置。

此外，我按照此处的说明在单节点集群上运行 Ubuntu 12.04、Hadoop 1.0.4：http: [//www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-簇/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:21:28.543

我建议您复习一些基本的 java 编译基础知识。

您需要做的不仅仅是`javac HDFSExample.java`- 您需要在类路径中包含一些依赖项 jar。更像的东西`javac -cp hadoop-core-1.0.4.jar HDFSExample.java`

就个人而言，我建议考虑使用构建工具（例如 Maven、Ant）或 IDE，因为当您开始将代码组织成包并依赖多个外部库时，这会让事情变得不那么痛苦。

**编辑**：例如，maven配置很简单（好吧，我不包括其他一些样板pom decalarations..）：

```
<dependencies>
    <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>1.0.4</version>
        <scope>provided</scope>
    </dependency>
<dependency> 
```

然后编译成一个jar：

```
#> mvn jar 
```

# qt - 我应该如何在 QT4 中使用带有 qmake 而没有 cmake 的 PCL

> ID：13675126
> 
> 赞同：3
> 
> 时间：2012-12-02T23:26:03.827
> 
> 标签：qt, qmake, point-cloud-library

我刚开始使用点云库 (plc)，但是在尝试将此库集成到 Windows 下的 QT4 项目中时遇到了很多问题（使用 MSV 2010 编译器）。

主要问题是将 PCL 与 qmake 和 QT4 一起使用。我对这种实现没有太多经验。

我的第一个目标是集成和运行 PCL 可视化器。谢谢你的帮助！帮助我的最好方法是向我展示一个可运行的 *.pro 文件，其中包含所有添加的 PCL 包括以及库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T13:03:59.837

我使用与您相同的平台。但是，我认为最简单的方法是在 Qt creator 中使用 cmake 向导。查看我对类似问题的回答[。](https://stackoverflow.com/questions/16065984/embedding-pcl-viewer-on-a-qt-gui-main-window/22878015#22878015)希望它有助于立即构建 Qt GUI 项目。

# seo - 更改默认 prestashop seo 模板

> ID：13675127
> 
> 赞同：0
> 
> 时间：2012-12-02T23:26:09.803
> 
> 标签：seo, default, product, prestashop

创建产品后，有什么方法可以更改 SEO 短语（元描述、标题、关键字等）的默认结构？可以为每个产品手动更改 Seo 短语 - 但如何更改通用产品 seo 字符串？

我正在使用presta 1.5。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:26:52.607

不确定更改默认短语是什么意思，但是如果您想更改主页的 seo 短语（默认使用），您需要转到 Preferences>Seo & Urls 并在那里进行更改。

如果您出于某种原因需要自定义它们的默认呈现方式，则需要覆盖 classes/Meta.php（在 1.4 中将是 classes/Tools.php），您可以在其中找到方法 getMetaTags()、getProductMetas() , getHomeMetas(), completeMetaTags() 等。

# python - 在正则表达式中转义美元符号不起作用

> ID：13675129
> 
> 赞同：4
> 
> 时间：2012-12-02T23:26:16.650
> 
> 标签：python, regex

在我开始之前，我知道有比正则表达式更好的方法（比如标记器），这不是问题所在。我已经被正则表达式卡住了，它已经可以按我的需要工作了，除了一种特殊情况，这是我需要建议的。

我需要浏览一些类似 JavaScript 的代码，并`new`在每个对象声明前插入关键字。我已经知道需要这个关键字的所有对象的名称，并且我知道在我开始之前它们都不会在代码中包含那个关键字（所以我不需要处理重复的`new`单词或猜测某物是否是一个对象与否。例如，典型的行可能如下所示：

```
foo = Bar() 
```

我已经知道这`Bar`是一个“类”并且需要“新”来进行对象声明。以下正则表达式可以解决问题：

```
for classname in allowed_classes:
    line = re.sub(r'^([^\'"]*(?:([\'"])[^\'"]*\2)*[^\'"]*)\b(%s\s*\()' % classname, r'\1new \3', line) 
```

它就像一个魅力，甚至确保`classname`当它在字符串内时不要触摸（正则表达式的第一部分告诉它事先确保有偶数个引号 - 这有点天真，因为它会与嵌套中断引号，但我不需要处理这种情况）。问题是，类名也可能包含`$`在其中。`$Bar`因此，如果allowed_classes 中存在以下行，则也允许：

```
foo = $Bar() 
```

由于美元符号，上述正则表达式将忽略它。我认为逃避它会起作用，但即使`$Bar`是其中一个类，这个逻辑似乎也对上面的行没有影响：

```
for classname in allowed_classes:
    line = re.sub(r'^([^\'"]*(?:([\'"])[^\'"]*\2)*[^\'"]*)\b(%s\s*\()' % re.escape(classname), r'\1new \3', line) 
```

我也尝试过手动逃避它，`\`但它也没有效果。有人可以解释为什么转换`$`为`\$`不起作用以及可以解决什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T23:39:56.657

您当前的正则表达式不起作用的原因是`\b`您的班级名称之前有一个。 `\b`将匹配单词边界，因此仅在单词字符和非单词字符之间。对于字符串`foo = Bar()`，`\b`将在空格和 之间匹配`B`，但对于`foo = $Bar()`，`\b`空格和 之间不能匹配，`$`因为它们都是非单词字符。

要解决此问题，请更改`\b`为`(?=\b|\B\$)`，这是生成的正则表达式：

```
for classname in allowed_classes:
    line = re.sub(r'^([^\'"]*(?:([\'"])[^\'"]*\2)*[^\'"]*)(?=\b|\B\$)(%s\s*\()' % classname, r'\1new \3', line) 
```

通过使用[前瞻](http://www.regular-expressions.info/lookaround.html)，您可以处理以下两种情况：

*   `classname`不以开头`$`，所以我们在尝试匹配之前想要一个单词边界`classname`，前瞻的`\b`内部处理这个
*   `classname`确实以 开头`$`，所以如果下一个字符是 a`$`我们要匹配。我使用`\B\$`了所以它只会在 之前的字符`$`不是单词字符时匹配，但这可能是不必要的，因为我想不出任何有效的 JS 代码会出现这种情况

# c - pthread_cond_wait 用于 2 个线程

> ID：13675132
> 
> 赞同：9
> 
> 时间：2012-12-02T23:26:34.577
> 
> 标签：c, linux, pthreads

我正在尝试实现`pthread_cond_wait`2 个线程。我的测试代码试图使用两个线程来执行以下场景：

*   线程 B 等待条件
*   线程 A 打印了五次“Hello”
*   线程 A 向线程 B 发出信号
*   线程 A 等待
*   线程 B 打印“再见”
*   线程 B 向线程 A 发出信号
*   循环开始 (x5)

到目前为止，代码打印了五次“Hello”然后卡住了。从我看过的例子来看，我似乎走在正确的轨道上，“锁定互斥锁，等待，由其他线程发出信号，解锁互斥锁，做事，循环”

测试代码：

```
//Import 
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>

//global variables
pthread_cond_t      condA  = PTHREAD_COND_INITIALIZER;
pthread_cond_t      condB  = PTHREAD_COND_INITIALIZER;
pthread_mutex_t     mutex = PTHREAD_MUTEX_INITIALIZER;

void *threadA()
{
    int i = 0, rValue, loopNum;

    while(i<5)
    {
        //unlock mutex
        rValue = pthread_mutex_unlock(&mutex);

        //do stuff
        for(loopNum = 1; loopNum <= 5; loopNum++)
            printf("Hello %d\n", loopNum);

        //signal condition of thread b
        rValue = pthread_cond_signal(&condB);

        //lock mutex
        rValue = pthread_mutex_lock(&mutex);

        //wait for turn
        while( pthread_cond_wait(&condA, &mutex) != 0 )

        i++;
    }

}

void *threadB()
{
    int n = 0, rValue;

    while(n<5)
    {
        //lock mutex
        rValue = pthread_mutex_lock(&mutex);

        //wait for turn
        while( pthread_cond_wait(&condB, &mutex) != 0 )

        //unlock mutex
        rValue = pthread_mutex_unlock(&mutex);

        //do stuff
        printf("Goodbye");

        //signal condition a
        rValue = pthread_cond_signal(&condA);

        n++;        
    }
}

int main(int argc, char *argv[])
{
    //create our threads
    pthread_t a, b;

    pthread_create(&a, NULL, threadA, NULL);
    pthread_create(&b, NULL, threadB, NULL);

    pthread_join(a, NULL);
    pthread_join(b,NULL);
} 
```

非常感谢您提供正确方向的指针，谢谢！（在 Linux 上使用“gcc timeTest.c -o timeTest -lpthread”编译的代码）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-03T00:31:34.903

你有两个问题。首先是您没有`while()`正确使用循环 - 例如，这里：

```
//wait for turn
while( pthread_cond_wait(&condA, &mutex) != 0 )

i++; 
```

循环的主体`while`是语句`i++`- 这将执行`pthread_cond_wait()`，`i++`直到`pthread_cond_wait()`返回错误，所以这本质上是一个无限循环。

第二个是您不能单独使用 pthreads 条件变量 - 它需要与一些实际的共享状态配对（最简单的，这个共享状态可能只是一个受互斥锁保护的标志变量）。该`pthread_cond_wait()`函数用于等待共享状态达到某个值，`pthread_cond_signal()`当线程改变了共享状态时使用该函数。修改您的示例以使用这样的变量：

```
//global variables
/* STATE_A = THREAD A runs next, STATE_B = THREAD B runs next */
enum { STATE_A, STATE_B } state = STATE_A;
pthread_cond_t      condA  = PTHREAD_COND_INITIALIZER;
pthread_cond_t      condB  = PTHREAD_COND_INITIALIZER;
pthread_mutex_t     mutex = PTHREAD_MUTEX_INITIALIZER;

void *threadA()
{
    int i = 0, rValue, loopNum;

    while(i<5)
    {
        /* Wait for state A */
        pthread_mutex_lock(&mutex);
        while (state != STATE_A)
            pthread_cond_wait(&condA, &mutex);
        pthread_mutex_unlock(&mutex);

        //do stuff
        for(loopNum = 1; loopNum <= 5; loopNum++)
            printf("Hello %d\n", loopNum);

        /* Set state to B and wake up thread B */
        pthread_mutex_lock(&mutex);
        state = STATE_B;
        pthread_cond_signal(&condB);
        pthread_mutex_unlock(&mutex);

        i++;
    }

    return 0;
}

void *threadB()
{
    int n = 0, rValue;

    while(n<5)
    {
        /* Wait for state B */
        pthread_mutex_lock(&mutex);
        while (state != STATE_B)
            pthread_cond_wait(&condB, &mutex);
        pthread_mutex_unlock(&mutex);

        //do stuff
        printf("Goodbye\n");

        /* Set state to A and wake up thread A */
        pthread_mutex_lock(&mutex);
        state = STATE_A;
        pthread_cond_signal(&condA);
        pthread_mutex_unlock(&mutex);

        n++;
    }

    return 0;
} 
```

请注意，这里不需要使用两个条件变量`condA`和`condB`- 如果只使用一个条件变量，代码将同样正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T20:08:44.417

当您将花括号添加到 while 循环时，该代码实际上在我的机器上*几乎可以正常工作。*

除了 caf 所说的，在 threadA 已经发送 condB 信号后启动 threadB 时，您将进入无限循环，因此为什么需要在 while 循环中使用共享状态。

您可以使用第 47 行引入人为延迟`usleep(1)`并亲自查看。

# c# - 如何使用 Simple Injector 根据其父级返回实例？

> ID：13675137
> 
> 赞同：1
> 
> 时间：2012-12-02T23:27:28.500
> 
> 标签：c#, dependency-injection, ioc-container, simple-injector

我们一直使用温莎城堡作为我们的 DI 容器，但我们正在寻找替代品。现在我使用了 Simple Injector，到目前为止，它的简单性给我留下了深刻的印象，但我现在遇到的一种情况是，当我们对某些组件使用后期绑定实例化时。

我的第一个问题是，这有可能吗？

温莎就是这样完成的；

```
Container.Register(Component.For<ILogger>()
    .UsingFactoryMethod(
        (kernel, componentModel, context) => new Logger(
            context.Handler.ComponentModel.Implementation.Name)); 
```

有没有办法用简单的注射器做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:06:17.573

使用 Simple Injector，您只需：

1.  使用显式注册 Func 委托`Register<Func<A, B, C>>((a, b) => { ... })`
2.  创建一个接口，例如`ILoggerFactory`，创建一个实现并注册它们。

**更新**

在再次阅读您的问题并查找 Castle's 的定义后`UsingFactoryMethod`，我得出的结论是我误解了您的问题。您正在寻找的是基于其父类型创建一个实例：[基于上下文的注入](http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios#Context_Based_Injection)。

您可以通过实现[基于上下文的注入扩展方法](http://simpleinjector.codeplex.com/wikipage?title=ContextDependentExtensions&referringTitle=Advanced-scenarios)来实现这一点，该方法在 Simple Injector 的文档 wiki 上作为示例给出。

当您将此扩展方法添加到您的项目时，您可以按如下方式进行等效注册：

```
container.RegisterWithContext<ILogger>(context =>
{
    return new Logger(context.ImplementationType.Name);
}); 
```

# mysql - Mysql 触发器 SELECT INTO X

> ID：13675138
> 
> 赞同：0
> 
> 时间：2012-12-02T23:27:40.227
> 
> 标签：mysql, triggers, count

嗨，我有一个表，这里[http://sqlfiddle.com/#!2/5be76/4](http://sqlfiddle.com/#!2/5be76/4)该表包含删除列表和驱动程序。每个删除可以有多个驱动程序，但必须至少有一个。
我正在尝试确定每个移除工作何时有 < 1 个驱动程序。如果他是工作中唯一的人，我将在触发器中使用此信息来停止从驱动程序表中删除驱动程序。

到目前为止有这个，但我似乎计算了所有不包括已删除驱动程序的工作的所有驱动程序。

```
DECLARE x INT;
SELECT COUNT(a.driver_name)
INTO x
FROM drives a
WHERE a.start_time =
        (SELECT b.start_time 
            FROM drives b
            WHERE a.date = b.date
            AND a.driver_name != OLD.driver_name
            ); 
```

# inline - sfs_inode (OS161) 的内联数据扩展

> ID：13675139
> 
> 赞同：1
> 
> 时间：2012-12-02T23:28:02.147
> 
> 标签：inline, inode, os161

嗨，我正在使用 OS161，我正在尝试扩展我的 inode 结构，以便当我写入磁盘时，我将第一块文件数据写入实际的 inode 结构，因为目前它的设置使得大量结构被浪费了。

```
struct sfs_inode {
    u_int32_t sfi_size; /* Size of this file (bytes) */
    u_int16_t sfi_type; /* One of SFS_TYPE_* above */
    u_int16_t sfi_linkcount; /* Number of hard links to this file */
    u_int32_t sfi_direct[SFS_NDIRECT];  /* Direct blocks */
    u_int32_t sfi_indirect; /* Indirect block */
    u_int32_t sfi_waste[128-3-SFS_NDIRECT]; /* unused space */
}; 
```

我想用 char sfi_inlinedata[INLINE_SIZE]; 替换上面的 sfi_waste 这样我的磁盘 io 将始终将第一个 INLINE_SIZE 数据写入/读取到 sfs_inode 结构。以下是我为相关 io 功能工作的来源。我知道我需要在这里更改偏移量映射到 io 函数中实际地址的方式，但是我无法提出具体的解决方案。 [https://github.com/rbui/projectJailBait/blob/master/os161-1.11/kern/fs/sfs/sfs_vnode.c](https://github.com/rbui/projectJailBait/blob/master/os161-1.11/kern/fs/sfs/sfs_vnode.c)

任何帮助将非常感激！

# python - 如何将参数发送到 Qthread

> ID：13675140
> 
> 赞同：1
> 
> 时间：2012-12-02T23:28:03.007
> 
> 标签：python, multithreading, qt, pyqt

我试图将参数发送到不是主线程的 Qthread。我的主线程中有这个对象，我想将它发送到另一个线程：

```
q = Queue() 
```

我想发送`q`到这个线程：

```
class Sender(QtCore.QThread):
def __init__(self,q):
    super(Sender,self).__init__()
    self.q=q
def run(self):

    while True:

        try: line = q.get_nowait()
         # or q.get(timeout=.1)
        except Empty: 
            pass
        else: 
           self.emit(QtCore.SIGNAL('tri()')) 
```

我正在尝试这个：

```
class Sender(QtCore.QThread):
    def __init__(self,q):
        super(Sender,self).__init__()
        self.q=q
self.sender= Sender(q) 
```

但我收到这个错误：

```
QObject::connect: Cannot queue arguments of type 'QTextCursor'
(Make sure 'QTextCursor' is registered using qRegisterMetaType().) 
```

我怎样才能做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:38:19.490

你的子类没有问题，你`QThread`如何设置它来传递一个`Queue`对象。虽然我也建议传递并设置一个可选的父级作为第二个参数。

您最有可能遇到的是将执行 QtGui 操作（与绘图相关）的对象传递到您的线程中。如果是这种情况，则不能调用任何 QtGui 绘图相关的方法。它们都必须在主线程中执行。在其他线程中进行任何数据处理，然后为主线程发出信号以进行小部件更新。

查找您发送到队列中的内容，特别是您在线程内使用它执行的操作，作为错误来源的提示。在某处，您正在使用 a 做某事`QTextCursor`，它试图触发和排队绘制事件。

# azure - Windows Azure 移动服务与 Azure 云服务有何不同？

> ID：13675142
> 
> 赞同：8
> 
> 时间：2012-12-02T23:28:20.667
> 
> 标签：azure, cloud, windows-phone, windows-store-apps, azure-mobile-services

我需要连接到我的 Windows 商店应用程序和 WP8 应用程序之间的中间层（想想 Azure）。Windows Azure 移动服务已作为解决方案提供。

但是我是否对“...MOBILES Services”这个名称读得太多了（因为其中一个不是移动应用程序，而是在台式机、笔记本电脑和平板电脑上运行）？

就我而言，与 Windows Azure 移动服务相比，我使用 Azure 云服务是否更好？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T00:02:38.513

Windows Azure 移动服务是一种在云中为您的移动应用程序和 Windows 8 应用程序获取后端的快速、简单的方法（如果您的 Windows 8 应用程序不一定针对移动设备，这很好）。它包括后端最常需要的东西，例如身份验证、数据库存储和推送通知。这里不需要服务器端开发，您只需请求后端，稍后它就可以使用了；但是，如果您确实需要服务器端逻辑，您可以以 JavaScript 脚本的形式添加它。

或者，您可以使用 Windows Azure 云服务（如计算、存储和 SQL 数据库服务）的组合在云中构建自己的后端。您可以在此级别访问更多功能，但您也在进行自己的开发。您可以根据自己的喜好使用 C#、VB.NET、PHP、Java、Python 等编写服务器端逻辑。

你应该使用哪个？

如果 Windows Azure 移动服务满足您的需求，并且您更愿意专注于您的移动应用程序而不是学习任何特定于云的东西，那么这可能是您的最佳途径。

如果您熟悉 Windows Azure 平台，并且需要与 WAMS 提供的功能不同的功能，那么建议您使用云服务创建自己的后端。

如果您不确定要走哪条路，我建议您先尝试使用 WAMS，因为它上手快速且轻松。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T23:49:22.683

Azure 移动服务旨在帮助您开始存储数据、推送通知和身份验证，无论您可能需要哪些组件。

它抽象了创建数据访问层和 web/wcf 服务以从您的应用程序访问它的需求；它只是用来样板化尽可能多的功能。

然而，这并不意味着它仅适用于移动应用程序，其背后是一个普通的 SQL Azure 数据库和一个您可以从任何基于 .NET 的应用程序中使用的 API。

我的理由是，如果您需要的不仅仅是基本的 CRUD 操作并且不使用身份验证和推送通知，我会推出自己的 API 和 DAL 集并使用云服务。

如果您需要灵活的模式、样板数据访问并希望使用其他一些移动服务，那么它非常适合您。

这是从非 Windows8 或 WP-ASP 应用程序开始使用移动服务的链接：[链接](http://www.strathweb.com/2012/09/using-azure-mobile-services-in-your-web-apps-through-asp-net-web-api/)

# iphone - 使用 pushViewController 到 TableViewController 时的断言错误

> ID：13675151
> 
> 赞同：0
> 
> 时间：2012-12-02T23:29:55.440
> 
> 标签：iphone, ios, segue, pushviewcontroller

我正在尝试使用以下代码以编程方式从视图控制器转换为表视图控制器（与情节提要 segue 相比）：

```
[self.navigationController pushViewController:photosTVC animated:YES]; 
```

但是，加载表格视图控制器时出现“断言错误”；具体来说，在此方法的第二行：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Photo";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
... 
```

表格视图控制器在使用 segue 转换到它时加载得很好，但当我以这种方式转换时就不行了。我可以尝试的任何想法将不胜感激！

谢谢阅读。

编辑：完整的错误文本如下：

-[UITableView dequeueReusableCellWithIdentifier:forIndexPath:] 中的断言失败，/SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:4460

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:30:28.273

如果您使用故事板，则必须使用或为您完成`[tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];`注册才能使用单元格。`registerNib:forCellReuseIdentifier:``registerClass:forCellReuseIdentifier:`

因此，`[tableView dequeueReusableCellWithIdentifier:CellIdentifier]`当您以编程方式执行此方法时，请仅使用此方法，除非有特定原因不这样做。

编辑：

```
UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    // or whatever cell initialisation method you have / created
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
} 
```

# c# - 如何在 CookieContainer 中获取 cookie 信息？（全部，不针对特定域）

> ID：13675154
> 
> 赞同：18
> 
> 时间：2012-12-02T23:30:04.427
> 
> 标签：c#, cookies, .net-4.0, httpwebrequest, httpwebresponse

请看下面的代码：

```
CookieContainer cookieJar = new CookieContainer();
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("http://www.google.com");
request.CookieContainer = cookieJar;

HttpWebResponse response = (HttpWebResponse)request.GetResponse();
int cookieCount = cookieJar.Count; 
```

我怎样才能得到里面的cookies信息`cookieJar`？（所有这些，不只是针对特定域。）
我如何添加或删除 cookie？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-05-27T03:02:42.373

没有一个答案对我有用。这是我对这个问题的谦虚解决方案。

```
public static List<Cookie> List(this CookieContainer container)
{
    var cookies = new List<Cookie>();

    var table = (Hashtable)container.GetType().InvokeMember("m_domainTable",
        BindingFlags.NonPublic |
        BindingFlags.GetField |
        BindingFlags.Instance,
        null,
        container,
        null);

    foreach (string key in table.Keys)
    {
        var item = table[key];
        var items = (ICollection) item.GetType().GetProperty("Values").GetGetMethod().Invoke(item, null);
        foreach (CookieCollection cc in items)
        {
            foreach (Cookie cookie in cc)
            {
                cookies.Add(cookie);
            }
        }
    }

    return cookies;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-28T18:42:45.950

反射可用于获取包含 CookieContainer 对象中所有域键的私有字段，

**问：我如何获得该私有字段的名称？**

答。使用反射器；

它被声明为：

```
private Hashtable m_domainTable; 
```

一旦我们获得私有字段，我们将获得域密钥，然后获取 cookie 是一个简单的迭代。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Net;
using System.Collections;

namespace ConsoleApplication4
{
    static class Program
    {
        private static void Main()
        {
            CookieContainer cookies = new CookieContainer();
            cookies.Add(new Cookie("name1", "value1", "/", "domain1.com"));
            cookies.Add(new Cookie("name2", "value2", "/", "domain2.com"));

            Hashtable table = (Hashtable)cookies.GetType().InvokeMember(
                "m_domainTable",                                                      
                BindingFlags.NonPublic |                                                                           
                BindingFlags.GetField |                                                                     
                BindingFlags.Instance,                                                                      
                null,                                                                            
                cookies,
                new object[]{}
            );

            foreach (var key in table.Keys)
            {
                Uri uri = new Uri(string.Format("http://{0}/", key));

                foreach (Cookie cookie in cookies.GetCookies(uri))
                {
                    Console.WriteLine("Name = {0} ; Value = {1} ; Domain = {2}",
                        cookie.Name, cookie.Value, cookie.Domain);
                }
            }

            Console.Read();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-01T13:59:30.120

感谢 AppDeveloper 的回答，这里有一个稍微修改过的版本作为扩展方法。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Reflection;
using System.Text;

public static class CookieContainerExtension
{
    public static List<Cookie> List(this CookieContainer container)
    {
        var cookies = new List<Cookie>();

        var table = (Hashtable)container.GetType().InvokeMember("m_domainTable",
                                                                BindingFlags.NonPublic |
                                                                BindingFlags.GetField |
                                                                BindingFlags.Instance,
                                                                null,
                                                                container,
                                                                new object[] { });

        foreach (var key in table.Keys)
        {

            Uri uri = null;

            var domain = key as string;

            if (domain == null)
                continue;

            if (domain.StartsWith("."))
                domain = domain.Substring(1);

            var address = string.Format("http://{0}/", domain);

            if (Uri.TryCreate(address, UriKind.RelativeOrAbsolute, out uri) == false)
                continue;

            foreach (Cookie cookie in container.GetCookies(uri))
            {
                cookies.Add(cookie);
            }
        }

        return cookies;
    }
} 
```

要获取列表，只需在 CookieContainer 上调用 List()：

```
CookieContainer cookies = new CookieContainer();
cookies.Add(new Cookie("name1", "value1", "/", "www.domain1.com"));
cookies.Add(new Cookie("name2", "value2", "/", "www.domain2.com"));
List<Cookie> cookieList = cookies.List(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-16T15:06:00.797

PaRiMal RaJ 代码的改进版本。此方法将同时打印 http 和 https cookie。准备将其粘贴到您的班级中。

```
 // Paste this dependencies in your class
    using System;
    using System.Net;
    using System.Linq;
    using System.Reflection;
    using System.Collections;
    using System.Collections.Generic;

    /// <summary>
    /// It prints all cookies in a CookieContainer. Only for testing.
    /// </summary>
    /// <param name="cookieJar">A cookie container</param>
    public void PrintCookies (CookieContainer cookieJar)
    {
        try
        {
            Hashtable table = (Hashtable) cookieJar
                .GetType().InvokeMember("m_domainTable",
                BindingFlags.NonPublic |
                BindingFlags.GetField |
                BindingFlags.Instance,
                null,
                cookieJar,
                new object[] {});

            foreach (var key in table.Keys)
            {
                // Look for http cookies.
                if (cookieJar.GetCookies(
                    new Uri(string.Format("http://{0}/", key))).Count > 0)
                {
                    Console.WriteLine(cookieJar.Count+" HTTP COOKIES FOUND:");
                    Console.WriteLine("----------------------------------");
                    foreach (Cookie cookie in cookieJar.GetCookies(
                        new Uri(string.Format("http://{0}/", key))))
                    {
                        Console.WriteLine(
                            "Name = {0} ; Value = {1} ; Domain = {2}", 
                            cookie.Name, cookie.Value,cookie.Domain);
                    }
                }

                // Look for https cookies
                if (cookieJar.GetCookies(
                    new Uri(string.Format("https://{0}/", key))).Count > 0)
                {
                    Console.WriteLine(cookieJar.Count+" HTTPS COOKIES FOUND:");
                    Console.WriteLine("----------------------------------");
                    foreach (Cookie cookie in cookieJar.GetCookies(
                        new Uri(string.Format("https://{0}/", key))))
                    {
                        Console.WriteLine(
                            "Name = {0} ; Value = {1} ; Domain = {2}", 
                            cookie.Name, cookie.Value,cookie.Domain);
                    }
                }
            }
        }
        catch(Exception e)
        {
            Console.WriteLine (e);
        }
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-26T20:14:38.580

这是一个扩展，它结合了 antfx 的代码和 Adrian Lopez 的同时使用 http 和 https 的想法。对于任何可能觉得它有用的人来说，这只是一个快速修复：

```
public static class CookieContainerExtensions
{
    public static List<Cookie> List(this CookieContainer container)
    {
        var cookies = new List<Cookie>();

        var table = (Hashtable)container.GetType().InvokeMember("m_domainTable",
                                                                BindingFlags.NonPublic |
                                                                BindingFlags.GetField |
                                                                BindingFlags.Instance,
                                                                null,
                                                                container,
                                                                new object[] { });

        foreach (var key in table.Keys)
        {
            var domain = key as string;

            if (domain == null)
                continue;

            if (domain.StartsWith("."))
                domain = domain.Substring(1);

            var httpAddress = string.Format("http://{0}/", domain);
            var httpsAddress = string.Format("https://{0}/", domain);

            if (Uri.TryCreate(httpAddress, UriKind.RelativeOrAbsolute, out var httpUri))
            {
                foreach (Cookie cookie in container.GetCookies(httpUri))
                {
                    cookies.Add(cookie);
                }
            }
            if (Uri.TryCreate(httpsAddress, UriKind.RelativeOrAbsolute, out var httpsUri))
            {
                foreach (Cookie cookie in container.GetCookies(httpsUri))
                {
                    cookies.Add(cookie);
                }
            }
        }

        return cookies;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-23T18:49:25.543

如果你要编写一个 nUnit 测试，它会是这样的：

```
 [Test]
    public void Test()
    {

        CookieContainer cookies = new CookieContainer();
        cookies.Add(new Cookie("name1", "value1", "/", "www.domain1.com"));
        cookies.Add(new Cookie("name2", "value2", "/", "www.domain2.com"));

        Hashtable table = (Hashtable)cookies.GetType().InvokeMember("m_domainTable",
                                                                     BindingFlags.NonPublic |
                                                                     BindingFlags.GetField |
                                                                     BindingFlags.Instance,
                                                                     null,
                                                                     cookies,
                                                                     new object[] { });

        foreach (var key in table.Keys)
        {
            foreach (Cookie cookie in cookies.GetCookies(new Uri(string.Format("http://{0}/", key.ToString().Substring(1,key.ToString().Length - 1)))))
            {
                Assert.That(cookie != null);
                //Console.WriteLine("Name = {0} ; Value = {1} ; Domain = {2}", cookie.Name, cookie.Value,
                //                  cookie.Domain);
            }
        }

    } 
```

# android - Android Http 请求处理程序

> ID：13675156
> 
> 赞同：1
> 
> 时间：2012-12-02T23:30:23.363
> 
> 标签：android, httpclient

我在 Android 上使用代理处理 http 请求时遇到问题。我有一个与服务器联系的 3rd-party 组件，我需要它通过代理进行通信。我无法在系统中设置代理。处理 DefaultHttpClient 的代理应该没问题，但是 3ed-party 组件存在问题，无法访问（没有源代码）并且无法设置代理。

我的问题是：有没有办法只为我的应用程序设置代理？或者有什么方法可以在调用网站时创建 http 请求的侦听器以处理代理设置？还是有其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:29:37.470

即使有，如果第三方组件不是使用系统库，而是他们自己的，它仍然不会拾取它。联系他们并让他们添加代理支持，或者至少说明他们正在使用什么 HTTP 库。

# android - 无法在画布中居中文本

> ID：13675158
> 
> 赞同：0
> 
> 时间：2012-12-02T23:30:41.353
> 
> 标签：android, android-layout

我试图在 TextView 子类的画布中居中文本。它在 Eclipse 中看起来不错，但在设备中却不行：

蚀：

![在此处输入图像描述](../Images/f61c687b329b4db1da296742cfc206d1.png)

设备：

![在此处输入图像描述](../Images/6497cd1b333094a646f390fc6b2b827c.png)

我想以这种方式使文本居中是有原因的。我没有在这里解释（也没有在代码中），因为它不属于问题。

我已经在使用 dips 和 sps。

编码：

```
package com.example.test2;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.TextView;

public class CenterTest extends TextView {
    private Paint paint;
    private Paint paint2;
    private Rect bounds;

    public CenterTest(Context context) {
        super(context);
    }

    public CenterTest(Context context, AttributeSet attrs) {
        super(context, attrs);

        paint = new Paint();
        paint2 = new Paint();
        bounds = new Rect();
    }

    public void draw(Canvas canvas) {
        canvas.save();

        int width = getWidth();
        int height = getHeight();

        //draw background
        paint2.setColor(Color.rgb(0, 0, 0));
        paint.setStyle(Paint.Style.FILL);
        canvas.drawRect(0, 0, width, height, paint2);

        //measure text
        paint.setTextSize(getTextSize());
        paint.getTextBounds(getText().toString(), 0, getText().toString().length(), bounds);
        int textWidth =  bounds.width();
        int textHeight =  bounds.height();

        //center before drawing text
        canvas.translate((width / 2) - (textWidth / 2), 0);
        canvas.translate(0, (height / 2) - (textHeight / 2));

        //let TextView.onDraw() do the rest
        super.onDraw(canvas);

        canvas.restore();
    }
} 
```

XML:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff" 
    >
    <com.example.test2.CenterTest
        android:layout_width="100dip"
        android:layout_height="30dip"
        android:text="label"
        android:textColor="#ffffff"
        android:singleLine="true"
        android:textSize="12sp"
    />
</RelativeLayout> 
```

也许原因在 TextView.onDraw() 的某个地方，但那是 200 多行代码，我现在没有时间......甚至不确定它是否在那里。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:02:30.163

尝试使用 android:gravity="center"

```
<com.example.test2.CenterTest
    android:layout_width="100dip"
    android:layout_height="30dip"
    android:text="label"
    android:textColor="#ffffff"
    android:singleLine="true"
    android:textSize="12sp"
    android:gravity="center"
/> 
```

# html - 在 div 的顶部和底部添加空间

> ID：13675165
> 
> 赞同：6
> 
> 时间：2012-12-02T23:31:19.063
> 
> 标签：html, css

我有这样的`HTML`文件：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Test</title>
        <link type='text/css' href='https://fonts.googleapis.com/css?family=Cantarell:700,400' rel='stylesheet'>
        <link type='text/css' href='https://fonts.googleapis.com/css?family=Play:700,400' rel='stylesheet'>
        <link type="text/css" href="./mycss.css" rel="stylesheet">
    </head>
    <body>
        <div class="page-title">
            <h1>Title</h1>
        </div>
        <div class="page-content">
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <p>Blah Blah Blah</P>
            <div id="nextPage" class="next">
                <a href="https://www.google.com">Next</a>
            </div>
        </div>
    </body>
</html> 
```

由这个 CSS 设置样式：

```
body {
    height: 100%;
    width: 960px;
    min-height: 550px;
    max-height: 1080px;
    margin: 20px 60px 40px 20px;
    padding-left: 10px;
}

.page-title h1 {
    height: 55px;
    font-family: "Play";
    font-size: 38px;
    font-weight: 700;
}

.page-content {
    font-family: "Cantarell";
    font-size: 16px;
    font-weight: 400;
    width: 650px;
    text-align: justify;
}

.next {
    font: 23px "Play";
    position: relative;
    margin-left: 605px;
    margin-bottom: 25px;
} 
```

有没有办法使用跨浏览器兼容在类`CSS`的顶部和底部添加一些空白？此刻，无论我给它的属性多少，“Next”链接和最后一次之间的差距都没有改变，并且链接和页面底部之间的空间很小.`<div>``next``margin-bottom``Blah Blah Blah`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T23:47:58.750

使用 padding-top 和 padding-bottom 创建空白区域。

例如：

```
.next {
    font: 23px "Play";
    position: relative;
    margin-left: 605px;
    padding-top: 300px;
    padding-bottom: 300px;
} 
```

将在“下一个”链接的顶部和下方添加 300 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:41:42.577

尝试....

```
.next {
    font: 23px "Play";
    position: relative;
    clear:both;
    margin-top: 40px;
    margin-left: 605px;
    margin-bottom: 25px;
} 
```

clear both 属性可能会或可能不会与其他内容产生问题，但根据您发布的内容，它可以正常工作。

[**在这里演示**](http://jsfiddle.net/NotInUse/hJXGB/1/)

# c++ - 如何使超链接调用相同的 C++ CGI 进程

> ID：13675171
> 
> 赞同：1
> 
> 时间：2012-12-02T23:31:59.960
> 
> 标签：c++, hyperlink, cgi

所以我的 C++ CGI 程序会生成一些带有多个链接的 html 页面。如何在同一个 C++ 进程中使单击此链接后显示其他页面的内容取决于单击的超链接？

现在我只有一个变体，将有其他 C++ CGI 程序将使用 getenv 读取 URL 参数，并且这个参数对于我的第一页中的每个链接都是不同的。但我相信必须有一种方法可以用一个 C++ 进程来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:58:50.137

您正试图将会话**信息**存储在 CGI 程序的内存中。*CGI 协议本身*不允许这样做。您必须将会话信息存储在其他地方。您的选择是：

*   输出 HTML，您的计算结果嵌入在 URL 中，以便下一次执行将看到这些结果（如果该信息是敏感的，这是一个安全漏洞 - 您可以通过安全加密来克服这个问题）。
*   将结果存储在 C++ 程序内存（文件？）之外。然后输出 cookie 或在 URL 中嵌入会话标识符。在下一次执行中，您使用会话标识符执行查找，然后从您的服务器加载这些结果。您必须注意释放旧数据以避免空间耗尽。
*   将您的 C++ 应用程序变成 Web 服务器！您的 C++ 应用程序将响应 HTTP 请求（它不仅仅是一个 CGI 应用程序）。这可能是矫枉过正，但可能是必要的。我认为有免费的开源库可以帮助您，或者您可以开发一个 Apache (httpd) 模块。

希望这能回答你的问题！

# android - 同时使用多重纹理和 GL_LINES 时的 OpenGL 冲突

> ID：13675172
> 
> 赞同：0
> 
> 时间：2012-12-02T23:32:18.820
> 
> 标签：android, opengl-es

我有一个场景，我想在其中使用多纹理绘制一些对象。我还想只使用 gl.glDrawArrays(GL10.GL_LINES...

但是，每当我在屏幕上添加应用了两种纹理的对象时，所有使用 GL_LINES 或纯色的对象都会褪色。

我尝试制作一个[简单的演示](https://github.com/VoteBrian/MTDemo)，其中所有对象都使用相同的绘制方法（希望我在尝试简化时没有造成更多混乱）。

我在 Model.java 中处理多纹理，相关部分在这里：

```
// Texture 1
gl.glClientActiveTexture(GL10.GL_TEXTURE0);
gl.glActiveTexture(GL10.GL_TEXTURE0);
gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
gl.glBindTexture(GL10.GL_TEXTURE_2D, mTexture[0]);
gl.glTexEnvf(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_MODULATE);
gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, mTexCoordBuffer1);
gl.glEnable(GL10.GL_TEXTURE_2D);

// Texture 2
gl.glClientActiveTexture(GL10.GL_TEXTURE1);
gl.glActiveTexture(GL10.GL_TEXTURE1);
gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
gl.glBindTexture(GL10.GL_TEXTURE_2D, mTexture[1]);
gl.glTexEnvf(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_DECAL);
gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, mTexCoordBuffer2);
gl.glEnable(GL10.GL_TEXTURE_2D); 
```

任何帮助将不胜感激。

注意：如果没有多纹理对象，三角形 1 和 4 上的轮廓是实心的。这就是我希望轮廓显示的方式。 ![使用多重纹理在屏幕上没有对象时显示轮廓](../Images/af98ca4ec8cbf9cc749ebbe8daa17652.png)

注意：对于多纹理对象（三角形 3），三角形 1 和 4 上的轮廓会变淡。 ![当我在屏幕上有一个多纹理对象时，轮廓看起来很褪色](../Images/9d6053f607328755ad40cd9a4be10d26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:55:27.607

[在这个之前的问题](https://stackoverflow.com/questions/9116494/opengl-gl-modulate-and-multitexturing)中找到了一个我认为无关的解决方案。

我不明白为什么，但我需要打电话：

```
gl.glActiveTexture(GL10.GL_TEXTURE0); 
```

在纹理 2 块之后。

# autocomplete - Extjs - 自动完成过滤器 2 属性

> ID：13675174
> 
> 赞同：0
> 
> 时间：2012-12-02T23:32:42.327
> 
> 标签：autocomplete, filter, extjs4.1

按照这个例子[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/forum-search.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/forum-search.html)

我可以在组合框上应用自动完成功能，然后使用 php/postgresql 查询检索名称：

```
{
xtype: 'combo',
store: ds,
hideTrigger:true,
typeAhead: false,
id: 'search_input_text',
width: 187,
queryMode: 'remote',
hideLabel: true,
queryParam: 'query',
displayField: 'first_name',
valueField: 'first_name',

listConfig: {
 loadingText: 'Loading...',              
 getInnerTpl: function() {

    return  '{first_name}';  
                }}
 listeners: {
    buffer: 50,
    change: function() {
      var store = this.store;
      store.clearFilter();
      store.filter({
          property: 'first_name',
          anyMatch: true,
          value   : this.getValue()
      });

    }
  }
} 
```

现在，我需要编辑它以让用户输入学生的名字或姓氏，然后输入的每个名字（名字或姓氏）将显示在组合框中。

因此，我编辑了查询以使其检索名称：

```
SELECT first_name, last_name FROM students WHERE first_name ILIKE '%$query%' OR last_name ILIKE '%$query%' "; 
```

和：

```
displayField: 'first_name'+'last_name',
valueField: 'first_name'+'last_name', 
```

* * *

```
return  '{first_name}'+'{last_name}'; 
```

* * *

```
store.filter({
              property: 'first_name',
              anyMatch: true,
              value   : this.getValue()
          },
{
              property: 'last_name',
              anyMatch: true,
              value   : this.getValue()
          } 
```

但是，它仍然只根据用户类型检索名字，请注意，如果我单独使用它：

```
store.filter({
                  property: 'last_name',
                  anyMatch: true,
                  value   : this.getValue()
              }); 
```

它仅适用于姓氏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:08:28.533

您可以将多个过滤器应用于数据存储，如下所示：

```
var filters = [
  new Ext.util.Filter({
  filterFn: function(item){return item.get('first_name') == this.getValue() || item.get('last_name') == this.getValue();
    }
  })
];

store.filter(filters); 
```

上面的代码块只是关于如何在同一字段中应用多个过滤器的想法。注意双管“||”。您可以根据需要使用“&&”。这就像 SQL 查询。

# .htaccess - 仅针对一个特定文件从 .php URL 重定向

> ID：13675177
> 
> 赞同：1
> 
> 时间：2012-12-02T23:33:01.270
> 
> 标签：.htaccess, mod-rewrite

我刚刚从我的站点中删除了 .php 扩展名，我想将旧 URL 重定向到新 URL。特别是它仅适用于picture.php 文件而不是其他文件。domain.com/picture/$1 和 domain.com/picture.php/$1 的页面相同，并且都可以正常解析，但我需要将所有流量从 .php 扩展名重定向到非 php 版本。

我尝试使用此代码，它似乎可以在我的地址栏中显示新的正确非 .php URL，但它会破坏站点并为所有 /picture 页面显示 404。

重定向匹配 301 ^/picture.php/(.*)$ [http://domain.com/picture/](http://domain.com/picture/) $1

我的重定向规则可能有错误吗？我已经阅读了一些内容，但我对编写规则还是很陌生。有没有更好的方法来做到这一点？

先谢谢了！

-贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:48:15.277

就是这样：

```
<?php
      header( 'Location: http://www.yoursite.com/new_page.html' ) ;
?> 
```

确保在此之前您没有向浏览器发送任何文本，否则它将无法正常工作。您最安全的选择是简单地从页面中删除除重定向代码之外的所有内容。

# objective-c - UIBarButtonItem 发送的动作适用于 iOS 6 但不适用于 iOS 5

> ID：13675179
> 
> 赞同：0
> 
> 时间：2012-12-02T23:33:07.673
> 
> 标签：objective-c, ios, uibarbuttonitem

我要撕毁我的头发，因为我想不出为什么会在 5 而不是 6 上发生这种情况的合乎逻辑的原因。所以基本上，我有一个带有导航栏和取消按钮的模态视图（`UIBarButtonItem`- 没有自定义任何内容它，只是一个标准按钮）在导航栏中。当点击此取消按钮时，我希望模态视图消失。这在 iOS 6 中工作得很好。但对于 iOS 5，它拒绝在我的代码中有它的 3 个地方中的 2 个工作。对我来说奇怪的是它适用于其中一个但不适用于其他两个。

使用情节提要，我右键单击按钮，单击已发送操作下的“选择器”，然后拖动到`IBAction`视图控制器的 .h 文件中的适当方法。通过 Xcode 中的小闪烁动画成功确认了链接。当我在 iOS 6 上运行应用程序（模拟器或设备无关紧要）时，该方法在按钮点击时成功执行并且我的模式视图被关闭。但是，在 iOS 5 上，甚至从未调用过该方法（我在方法内设置了断点以查看它们是否会被命中）。我什至尝试将我的`IBAction`方法中的参数从切换`id`到`UIBarButtonItem *`。不过没有雪茄。

我还尝试以编程方式（在 中`viewDidLoad`）将取消按钮的操作设置为选择器。我什至将目标设定为 VC。又没有雪茄了。这是我当前设置的屏幕截图：

[![请注意 IBAction 方法](../Images/c37cb3fc1a5b962573967ff16ac402b4.png)](https://i.imgur.com/3lVsM.png)

请注意`IBAction`方法。

我错过了文档中的一些神奇条款吗？为了让它在 iOS 5 中运行，我需要做一些非常特别的事情吗？这对我来说确实像是一个错误，但我对这些东西还是很陌生，所以我知道什么。

我正在使用 Xcode 4.5.2 和故事板，并针对 iOS 5 和 iOS 6 进行发布。

感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:52:41.753

**我认为使用GestureRecognizer**可能存在问题，请评论该代码并尝试...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T18:00:06.070

我添加了一个单独`UIView`的位于我的文本字段和按钮下以及导航栏/标题下方。我以编程方式向其中添加了点击手势，这似乎可以识别我的点击和取消按钮的动作。`UIBarButtonItem`如果手势在根视图上，我仍然想知道为什么点击手势会吞噬' 的动作。[这个问题帮助我弄清楚了这一点](https://stackoverflow.com/questions/11253099/uibarbuttonitems-action-is-not-called-when-in-a-view-with-a-uigesturerecognizer)。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T01:28:34.420

you can ***exclude view/control from gesture recognizer*** using following delegate method.

`// UIGestureRecognizerDelegate`

 ````
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    // exclude your view from gesture recognizer
    if(yourView == touch.view)
    {
        return NO;
    }

    // 
    return YES;
} 
````

# javascript - 在 Fusion Tables 和 Google Maps API 中，如何根据下拉菜单选择更改 Tables 图层和地图位置？

> ID：13675187
> 
> 赞同：0
> 
> 时间：2012-12-02T23:34:45.150
> 
> 标签：javascript, google-maps, google-maps-api-3, google-fusion-tables

我正在尝试制作一个使用不同融合表的网站。有一个下拉菜单有几个状态。每个州都有自己的融合表

我想这样当你选择一个州时，地图会加载该州的“融合表”。

我怎么做？

以下是我目前的 JavaScript 代码（文件名是“script.js”）。下面是 HTML 代码。

当我通过下拉列表更改状态时，我希望地图加载下拉列表中状态的 Fusion Table 地图。现在，它不这样做。

```
$(document).ready(function(){
    var states = {
        'Alabama':'3348442',
        'Alaska':'3370522'
    };
    // SECTION 1: ADDING HTML TO DOM
    var bodyDivs = [
        '<div id="map-canvas" />',
        '<div id="address-form-container" />',
        '<div id="state-select-container"><select id="state-select" /></div>'
    ];

    var addressContainer = [
        '<span id="form pretext"> Enter a city name or address </span>',
        '<input id="address" type="textbox" />',
        '<input type="button" value="Search" />'
    ];

    // Append the body to <html>
    $('html').append('<body />');
    for (var i=0; i<bodyDivs.length; i++){
        $('body').append(bodyDivs[i]);
    };

    // Append the address form to <body>
    for (var i=0; i<addressContainer.length; i++){
        $('div#address-form-container').append(addressContainer[i]);
    };

    // Append state names to the body
    for (var state in states){
        $('select').append('<option value='+state+'>'+state+'</option>');
    };
    // DONE ADDING HTML TO DOM

    // SECTION 2: Create the Google map with the coordinates and add the Fusion Tables layer to it. Plus, it zooms and centers to whatever state is selected.
    var geocoder;
    var gmap;
    var locationColumn = "'geometry'";
    var condition = "'Median income (dollars)'>0";
    var selectedState = document.getElementById("state-select").value;
    var tableId = states[selectedState];    
    var mapOptions = {
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    function initialize(){
        geocoder = new google.maps.Geocoder(); // This variables is used to automate zooming and centering in this script
        gmap = new google.maps.Map(document.getElementById("map-canvas"), mapOptions); // Removing this removes the Google Maps layer, but would keep any layers on top of it

        // The Fusion Tables layer variable
        var layer = new google.maps.FusionTablesLayer({
            query: {
                select: locationColumn,
                from: tableId,
                where: condition
            }
        });

        // This code snippet centers and zooms the map to the selected state.
        geocoder.geocode(
            {
                'address':selectedState
            },
            function(results,status){
                var sw = results[0].geometry.viewport.getSouthWest();
                var ne = results[0].geometry.viewport.getNorthEast();
                var bounds = new google.maps.LatLngBounds(sw,ne);

                gmap.fitBounds(bounds)
            }
        );

        layer.setMap(gmap);

        google.maps.event.addDomListener(selectedState,'change',function(){
            updateMap(layer,tableId,locationColumn);
        });         
    }

    // SECTION 3: Find the address once the button is clicked
    $(':button').click(
        function codeAddress(){
            var address = document.getElementById("address").value;

            geocoder.geocode(
                {
                    'address':address
                },
                function(results,status){
                    if(status===google.maps.GeocoderStatus.OK){
                        var addressSW = results[0].geometry.viewport.getSouthWest();
                        var addressNE = results[0].geometry.viewport.getNorthEast();
                        var bounds = new google.maps.LatLngBounds(addressSW,addressNE);

                        gmap.fitBounds(bounds);
                    } else {
                        alert("Couldn't find address for the following reason: " + status + ". Sorry about that. Please try another address.");
                    }
                }
            );
        }
    );

    function updateMap(layer,tableId,locationColumn){
        if (selectedState) {
            tableId = states[selectedState];

            layer.setOptions({
                query: {
                    select: locationColumn,
                    from: tableId,
                    where: condition
                }
            });

            geocoder.geocode(
                {
                    'address':selectedState
                },
                function(results,status){
                    var sw = results[0].geometry.viewport.getSouthWest();
                    var ne = results[0].geometry.viewport.getNorthEast();
                    var bounds = new google.maps.LatLngBounds(sw,ne);

                    gmap.fitBounds(bounds)
                }
            );          
        }
    }

    google.maps.event.addDomListener(window, 'load', initialize);
}); 
```

CSS：

```
#map-canvas {
height: 800px;
width: 1000px; 
```

}

HTML 代码：

```
<html>
    <head>
        <meta charset="utf8">
        <title>TESTING THE MAPS</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="public/js/script.js"></script>
    </head>
</html> 
```

编辑：指向 HTML、CSS 和 JS 文件的链接 ---
[http://speedy.sh/xRkZF/maptest.html](http://speedy.sh/xRkZF/maptest.html)
[http://speedy.sh/zSt5p/script.js](http://speedy.sh/zSt5p/script.js)
[http://speedy.sh/uCPxZ /style.css](http://speedy.sh/uCPxZ/style.css)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:27:07.833

您已硬编码 selectedState，但您需要在下拉列表更改时获取当前值。

将更改侦听器修改为：

```
google.maps.event.addDomListener(document.getElementById('state-select'),
  '改变'，
  功能（）{
        updateMap(layer, this.value ,locationColumn);
    });
```

现在传递给 updateMap 的第二个参数将是下拉列表中的选定状态。还要修改updateMap，把第二个参数的名字改成selectedState：

```
函数 updateMap(layer, **selectedState** ,locationColumn){
  //功能代码可以保持原样
  }

```

现在一切都应该正常了。

# actionscript-3 - 如何在 Flex 4 中缓存加载的 swf 头像

> ID：13675190
> 
> 赞同：3
> 
> 时间：2012-12-02T23:35:40.897
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4, swfloader

我正在使用带有 s:SWFLoader 的自定义渲染器在 s:List 中显示客户端 swf 头像。useVirtualLayout 为“开启”。

当新客户端到达（或离开聊天）时，s:List 将新数据发送到渲染器。

所以渲染器中的 SWFLoader 必须加载新数据。结果我们有闪烁。当 swf 头像消失第二次并再次出现时。

当所有头像都只是图像时，我已经解决了这个问题。我从 Loader 中保存了内容并将其用作 s:Image 的数据源。

但是对于 swf 头像，这种方法不起作用，因为在舞台上添加后我们无法更改 AVM1Movie 的父级（没有尝试过另一个版本，因为我也必须支持这个）。

我查看了 SWFLoader 源代码，发现 Loader 在加载数据之前添加在舞台上。

我还尝试将 swf 加载到 ByteArray 并调用 loadBytes。但是闪烁仍然存在。

我试图将 Loader 作为源返回。

那么在这种情况下你会建议做什么呢？swf 缓存可能吗？

# sql-server - ColdFusion Webservice 显示数据库模式

> ID：13675191
> 
> 赞同：0
> 
> 时间：2012-12-02T23:35:45.217
> 
> 标签：sql-server, web-services, security, coldfusion

我想为底层数据库的一些细节提供 Web 服务。

```
<cffunction name="getDBSchema" output="false" returnType="query" access="remote">

<cfquery name="local.qryPlugin" cachedwithin="#CreateTimeSpan(1,0,0,0)#">
    SELECT column_name, data_type, character_maximum_length, kcu.TABLE_SCHEMA, 
    kcu.table_name,ordinal_position, is_nullable 
    FROM information_schema.COLUMNS kcu
    ORDER BY table_name, ordinal_position
</cfquery>

<cfreturn local.qryPlugin> 
```

我可以担心，即使将 cachedwithin 设置为一天，我仍然可能会太用力地打击数据库。我也担心我正在引入一个漏洞。数据库架构信息本身不是敏感信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:09:12.357

您问了两个具体问题 - 一，是否足够缓存一天，二，这是一个安全问题。

1）缓存一天似乎*绰绰有余*。这是一个令人难以置信的长缓存。不知道为什么你会认为这还不够，但对我来说似乎很棒。

2) 我不是安全专家。您提到这只能通过内部 IP 访问，所以这可能已经足够了，但您可能想问自己为什么要共享这些详细信息？你的用户真的需要这些信息吗？

最后 - 不要忘记 ColdFusion 有一个[<cfdbinfo>](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_d-e_01.html)标签可以做到这一点。显然，您的代码有效，但我只是分享一下，以防您不知道。

# vba - 我可以用 Vim 进行 VBA 编程吗？

> ID：13675192
> 
> 赞同：5
> 
> 时间：2012-12-02T23:35:48.757
> 
> 标签：vba, vim, vim-plugin

我现在的部分工作是在 Microsoft Office 文档中构建一些动态功能。我发现这样做的唯一方法是通过 VBA - 因此，内置于 Office 文档中的 VBA 编辑器。

VBA 编辑器很糟糕。它缺少现代开发环境需要支持的一百万种不同的功能。但最糟糕的是，我是一个铁杆 Vim 爱好者，而且 VBA 编辑器几乎不比记事本好。

那么：有什么方法可以有效地使用 Vim 进行 VBA 编程吗？当我想尝试时，没有将我的代码从不同的窗口复制粘贴到 VBA 编辑器中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:55:24.810

我从未使用过 VBA 编辑器，但这是我用 MS Visual Studio 完成的。（MSVS 的编辑器确实有一些不错的功能，但我仍然更喜欢 vim 进行大多数编辑。）

我在 MSVS 中打开或创建源文件。然后我得到文件的完整路径（通过右键单击选项卡并选择“复制完整路径”），并在不同的窗口中在 vim 中打开相同的文件。

我使用 alt-tab 在 vi​​m 和 MSVS 之间来回切换。当我在 vim 中进行更改时，我使用`:w`编写更改，然后 alt-tab 回到 MSVS。MSVS 编辑器注意到磁盘上的文件已更改并提供读取更新版本。

或者，如果我在 MSVS 中更改文件，我写入文件（文件 > 保存 ...），然后 alt-tab 到 vim 并使用`:e!`将更新的文件读入 vim 缓冲区。

无需复制粘贴代码，因为两个编辑器都在同一个磁盘文件上运行。我只需要*非常*小心，不要在不将文件写入磁盘的情况下对 vim 和 MSVS 进行更改。

它很丑陋，并不适合所有人，但它对我有用。也许它会为你工作。

我使用的是 Cygwin，所以它实际上有点复杂；Cygwin 程序，包括 vim，不能识别 Windows 风格的路径。我可以做这个：

```
vi $(cygpath 'WINDOWS_PATH') 
```

`WINDOWS_PATH`从我从 MSVS 获得的完整路径粘贴在哪里。单引号是防止 shell 解释`\`字符所必需的。如果您使用的是 Windows 本机 vim，则无需执行此步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:25:35.703

这是一个有趣的观点。大约 15 年前我曾短暂使用过 VI，基于此，我认为 VBA 编辑器比 VI（或 VIM？）更适合其用途。VBA 编辑器中是否缺少一项特定功能，从而阻止您有效地使用它来实现其目的（编辑 VBA）？VBA 多年来一直没有得到增强，但事实是它不能被淘汰，因为每个人都觉得它很容易使用。

如果你希望你可以用你喜欢的语言编写一些代码，通过 COM 对象（如果它支持的话）来操作你的 word 文档。然后，您可以从 Word 文档中的简单存根调用您的外部代码。您需要在 Word 文档中绕过一些安全限制。

例如，我可以在 VBScript 或 VBA 或 Powershell 或 .Net 中编写一些代码来操作 word 文档。我可以从一小块 VBA 中调用它（可能附加到标准单词工具栏中的按钮或其他东西）

# c# - XDocument 的简单搜索

> ID：13675198
> 
> 赞同：1
> 
> 时间：2012-12-02T23:36:03.870
> 
> 标签：c#, .net, xml, linq, xpath

假设我想返回具有 XPath "/Tier1/Tier2/Setting[Name=aUniqueName]/theValue" 的值

我正在使用 XDocument，所以我可以使用 linq，但是有没有通过适当的错误检查来获取这个值的捷径？我能想到的就是获取每一层，检查每一层不为空，然后继续下一层并重复 - 这似乎比在 XmlDocument 中使用单行 XPath 更加努力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T23:40:21.980

您可以将 XPath 与`XDocument`. 使用[`XPathSelectElements`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.xpathselectelements%28v=vs.90%29.aspx)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:03:23.807

这是一个 LINQ 查询，它将为您完成：

```
var query =
    from t2 in xd.Root.Elements("Tier2")
    from s in t2.Elements("Setting")
    where s.Attributes("Name").Any(a => a.Value == "aUniqueName")
    select s.Value; 
```

这假设您的文档结构如下所示：

```
<Tier1>
    <Tier2>
        <Setting Name="aUniqueName">theValue</Setting>
    </Tier2>
</Tier1> 
```

# c++ - 实现安全的 nullptr

> ID：13675203
> 
> 赞同：6
> 
> 时间：2012-12-02T23:36:38.697
> 
> 标签：c++, c++11, overriding, final, nullptr

我想让我的代码在旧版 C++（使用“NULL”的 C++ 代码）和新的 C++11 标准（使用“nullptr”的 C++ 代码）上都可编译

我正在使用 GCC，但计划在完成最重要的事情时也为 VS 重新编译整个代码库。

我是否应该期望 GCC 和 VS 都会做类似的事情

```
#define NULL nullptr 
```

还是我自己做更好（当然使用不同的名称，其中 MY_LIB 将被我的库后缀替换）？

```
#ifndef nullptr
    #define MY_LIB_NULL NULL
#else
    #define MY_LIB_NULL nullptr
#endif 
```

我想要实现的是无论是否实现了 C++11 功能都可以编译的代码（而且由于我没有使用模板，所以它们很少）。

例如，关键字“override”和“final”已经完成。

```
MY_LIB_OVERRIDE //macro, defines to "override" if c++11 is present.
MY_LIB_FINAL    //macro, defines to "final" if c++11 is present. 
```

我问这个问题是因为我知道“nullptr”问题有点奇怪，所以也许只是做我已经为覆盖和最终所做的同样的事情，是错误的。需要对此发表意见。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:26:38.000

您可能可以通过以下方式创建`my_nullptr`类型的“假”：`my_nullptr_t`

```
const class my_nullptr_t
{
    public:

        /* Return 0 for any class pointer */
        template<typename T>
        operator T*() const
        {
            return 0;
        }

        /* Return 0 for any member pointer */
        template<typename T, typename U>
        operator T U::*() const
        {
            return 0;
        }

        /* Safe boolean conversion */
        operator void*() const
        {
            return 0;
        }

    private:

        /* Not allowed to get the address */
        void operator&() const;

} my_nullptr = {}; 
```

这适用于 C++03 和 C++11，并且应该始终是安全的，无论实现了哪个 C++11 功能。该解决方案实际上已经在本主题中讨论过，[该主题](https://stackoverflow.com/posts/2419885/edit)提出了`nullptr_t`基于[官方提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2431.pdf)的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:23:33.270

`NULL`是一个扩展为空指针常量的宏。它仍然像以前一样工作。必须与非 C++11 编译器一起使用的代码应使用`NULL`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:44:56.477

我认为以下将起作用：

```
#include <cstddef>

#ifndef MY_LIB_NULL
    #ifndef NULL //check for NULL
        #define MY_LIB_NULL nullptr
    #else
        #define MY_LIB_NULL NULL ///use NULL if present
    #endif
#endif 
```

基本上我检查“NULL”。wich 是一个宏并且可以检查，直到编译器附带该宏（可能是），而不是使用宏有效，当编译器将仅提供“nullptr”并且不再具有 NULL 时使用 nullptr（可能在一个遥远的未来，但似乎我们可以愉快地继续使用 NULL！）

我认为这比重新定义“nullptr”更安全（就像大多数人试图做的那样）

# android - Android：在 PagerTitleStrip 中更改字体

> ID：13675206
> 
> 赞同：2
> 
> 时间：2012-12-02T23:36:57.883
> 
> 标签：android

有人知道怎么做这个吗？PagerTitleStrip 类没有 .setTypeface 方法或任何类似的方法，所以我有点难过。

我发现的另一个回应建议： `You are probably best served copying the PagerTitleStrip code (in your SDK or available online), refactor your fork into your own package, and modify it to suit.`但我不知道如何去做。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-28T18:35:25.237

您不必复制源代码 - 只需子类。请参阅我的答案：[如何更改 pagertitlestrip 的字体](https://stackoverflow.com/questions/12882746/how-to-change-the-font-of-a-pagertitlestrip/17371290#17371290)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-15T05:28:49.833

如果它是自定义字体，请将其放在资产文件夹中并像这样进行更改。

```
 PagerTitleStrip _Title = (PagerTitleStrip)rootView.findViewById(R.id.__Weekly_pager_title_strip);
    Typeface font = Typeface.createFromAsset(getActivity().getAssets(), "Your font.ttf"); 
    for (int counter = 0 ; counter<_Title.getChildCount(); counter++) {

        if (_Title.getChildAt(counter) instanceof TextView) {
            ((TextView)_Title.getChildAt(counter)).setTypeface(font);
            ((TextView)_Title.getChildAt(counter)).setTextSize(25);
        }

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T23:42:43.620

我只是从 AOSP 中复制了源代码，并按照自己的喜好制作了自己的源代码：

该文件可以在 android-sdk/extras/android/support/v4/src/java/android/support/v4/view/PagerTitleStrip.java 中找到

# javascript - 事件侦听器函数在分配时执行？

> ID：13675208
> 
> 赞同：1
> 
> 时间：2012-12-02T23:37:09.787
> 
> 标签：javascript, addeventlistener

我一定在这里遗漏了一些非常简单的东西，但我终其一生都无法弄清楚。为什么下面的页面执行`alert`页面加载，而不是按预期单击按钮？我试图将`clicky()`函数分配给事件侦听器（此分配发生在页面加载时），但实际警报发生在页面加载时（即调用 clicky 函数），并且按钮永远不会获得它的侦听器。我错过了什么？

```
<html>
<head>
<script>

function clicky() {
    alert("clicky");
}

function start() {
    var myButton = document.getElementById("theButton");
    myButton.addEventListener("onclick", clicky(), false);
}

window.onload = start;

</script>
</head>

<body>
<input type="button" id="theButton" value="I'm a button!">
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:45:04.730

在调用 addEventListener 时尝试使用“click”而不是“onclick”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:48:32.107

您正在添加 clicky() 作为侦听器返回的内容，而不是 clicky 本身。clicky() 什么都不返回（未定义），这就是为什么没有附加处理程序的原因。只是去掉括号。

// 编辑：哦，我知道这只是问题的一半。

# c++ - C++ 堆栈推送/打印实现

> ID：13675210
> 
> 赞同：0
> 
> 时间：2012-12-02T23:37:23.917
> 
> 标签：c++, printing, stack, push, implementation

我正在尝试在 C++ 中实现堆栈，但是当我尝试打印堆栈时，它只打印第一个元素而不是整个堆栈。我已经测试过了，我很确定我的 Push 功能是正确的，但我不确定。

```
#include <stdio.h>
#include <stdlib.h>
#include "stack.h"

int main(){

    StackElement *stack = new StackElement();
    stack->data = 20;
    stack->Push(30,stack);
    stack->Push(40,stack);

    stack->Print(stack);

} 
```

* * *

```
#include <stdio.h>
#include <stdlib.h>

class StackElement{

public:

    int data;   
    StackElement* next;     
    StackElement();     
    void StackElement::Push(int value, StackElement *oldElement);   
    void StackElement::Print(StackElement *element); 
};

StackElement::StackElement(){
    next = NULL;
}

void StackElement::Push(int value, StackElement *oldElement){

    StackElement *newElement = new StackElement();                
    newElement->data = value;       
    printf("Element added to stack: %d\n", newElement->data);       
    oldElement->next = newElement;       
}

void StackElement::Print(StackElement *element){

    while(element->next != NULL){       
        printf("%d\n",element->data);       
        element = element->next;    
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:50:56.120

正如@Beta 所述，您的代码不断丢失先前推送的元素，泄漏内存。

我建议将下面的代码与您的代码进行比较。您会看到，我已经将堆栈元素的处理移到了外部，只是为了能够跟踪第一个元素。另外，请注意 main 函数中没有指针。这就是我们对课堂的期望。

Stack_element 确实是一个结构，因为将 Stack_element 本身封装起来并没有多大意义，它只是 Stack 的一个实现细节。

所以这是我的代码来源于你的

```
#include<iostream>

struct Stack_element{
  int data;
  Stack_element*next;
};   

class Stack{
private:
  Stack_element*last_data, first_data;

public:

  Stack():last_data(NULL), first_data(NULL){}  
  void push(int data);
  void print() const;  
};

void Stack::push(int data)
{
  Stack_element*p=new Stack_element();
  p->data=data;
  p->next=NULL;
  if(last_data)
    last_data->next=p;
  else // empty stack
    first_data=p;
  last_data=p;
}

void Stack::print()
{
  for(Stack_element*p=first_data;p;p=p->next)
    std::cout << p->data << std::endl; // ** Do not use printf in c++. Ever. **
} 
```

并在主函数中调用

```
Stack stack;
stack.push(30);
stack.push(40);
stack.print(); 
```

* * *

备注：对于 C++ 打印，您可能想要`ostream& print(ostream& os)`改为，其中

```
std::ostream& Stack::print(std::ostream& os)
{
  for(Stack_element*p=first_data;p;p=p->next)
    os << p->data << std::endl;
  return os;
} 
```

只是为了能写`std::cout << stack.print() << std::endl;`。这样做的好处是您可以轻松地重定向到文件。

```
std::ofstream ofs("yourfile.txt");
ofs << stack.print() << std::endl; // prints to file instead of screen. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:56:37.903

假设这么多工作按计划进行：

```
StackElement *stack = new StackElement();
stack->data = 20;
stack->Push(30,stack); 
```

现在您的数据看起来像`[20]->[30]`

现在你尝试

```
stack->Push(40,stack); 
```

因此，该`Push`方法创建了一个新的`StackElement`，赋予其值 40，并*设置`Stack`为指向它：* `[20]->[40]`。请注意`[30]`已丢失。

然后是`Print`函数：

```
while(element->next != NULL){       
  printf("%d\n",element->data);       
  element = element->next;    
} 
```

如果只有一个元素（其`next`为 NULL），则此函数将退出并且不打印任何内容。如果有两个，这个函数会打印第一个的数据，然后退出。只要`Push`有那个错误，就永远不会超过两个。

# algorithm - 如何按总和枚举集合的所有k组合？

> ID：13675212
> 
> 赞同：2
> 
> 时间：2012-12-02T23:37:46.270
> 
> 标签：algorithm, combinatorics

假设我有一组大小为 n 的有限数值。

**问题：**是否有一种有效的算法来枚举该集合的 k 组合，以便组合 I 先于组合 J 且当且仅当 I 中的元素之和小于或等于 J 中的元素之和？

* * *

显然，可以简单地枚举组合并根据它们的总和对它们进行排序。然而，如果集合很大，所有组合的粗略枚举，更不用说排序，将是不可行的。如果我只对获得按总和排名的前 m << choose(n,k) 个组合感兴趣，是否有可能在宇宙热寂之前获得它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T23:46:22.860

没有以这种方式枚举集合的多项式算法（除非[P=NP](http://en.wikipedia.org/wiki/P_versus_NP_problem)）。

如果有这样的算法（假设为 A），那么我们可以多项式地解决[子集和问题：](http://en.wikipedia.org/wiki/Subset_sum_problem)

1.  运行A
2.  进行二分搜索以找到总和最接近所需数字的子集。

请注意，步骤 1 以多项式方式运行（假设），步骤 2 以`O(log(2^n)) = O(n)`.

**结论**：由于子集和问题是[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)，有效地解决这个问题将证明 P=NP - 因此该问题没有已知的多项式解决方案。

* * *

**编辑：**即使问题是NP-Hard，`m`也可以`O(n+2^m)`通过选择最小的`m`元素，从这些元素中生成所有子集`m`- 并选择其中的最小值来获得“最小”子集`m`。因此，对于相当小的值`m`- 计算它可能是可行的。

# eclipse - Google Cloud Endpoints 的 Eclipse 客户端项目配置

> ID：13675215
> 
> 赞同：1
> 
> 时间：2012-12-02T23:38:21.087
> 
> 标签：eclipse, google-cloud-endpoints, google-plugin-eclipse

构建 Google Cloud Endpoints Android 客户端项目的推荐 Eclipse (4.2) 配置是什么？

运行 Google -> Generate Cloud Endpoint Client Library 在我的服务器项目中生成一个 /libs，其中包含：
commons-logging-1.1.1.jar google-api-client-1.12.0-beta.jar
google-api-client-android- 1.12.0-beta.jar
google-api-client-appengine-1.12.0-beta.jar
google-api-client-java6-1.12.0-beta.jar
google-http-client-1.12.0-beta.jar
google-http-client-android-1.12.0-beta.jar
google-http-client-appengine-1.12.0-beta.jar
google-http-client-gson-1.12.0-beta.jar
google-http-client -jackson-1.12.0-beta.jar
google-http-client-jackson2-1.12.0-beta.jar
google-oauth-client-1.12.0-beta.jar
google-oauth-client-appengine-1.12.0- beta.jar
google-oauth-client-java6-1.12.0-beta.jar
google-oauth-client-jetty-1.12.0-beta.jar
google-oauth-client-servlet-1.12.0-beta.jar
gson-2.1.jar
guava-jdk5-13.0.jar
httpclient-4.0.3.jar
httpcore -4.0.1.jar
jackson-core-2.0.5.jar
jackson-core-asl-1.9.9.jar
jdo2-api-2.3-eb.jar
jetty-6.1.26.jar
jetty-util-6.1.26。 jar
jsr305-1.3.9.jar
transaction-api-1.1.jar
xpp3-1.1.4c.jar

我的客户是否需要包含所有这些 .jar 文件？如果我将它们全部复制到我的 Android 客户端项目的 /libs 文件夹中并执行 Build Path -> Add，我会收到错误消息：

```
Dx trouble processing "javax/xml/namespace/QName.class":

Ill-advised or mistaken usage of a core class (java.* or javax.*)
when not building a core library. 
```

和

```
Dx trouble processing "javax/transaction/HeuristicCommitException.class" 
```

所以我需要从我的客户端 /libs 中手动删除 xpp3-1.1.4c.jar 和 transaction-api-1.1.jar 以进行干净的构建。

这是构建客户项目的“标准”方式吗？如何确定在 Android 上构建所需的 .jar 库是什么？我可以将 Eclipse 配置为仅将这个子集动态导入我的客户端吗？

如果我以后在我的 Server 项目中更新我的 Endpoint 类并重新运行 Generate Cloud Endpoint Client Library，我是否只需将 /com/google/api/services 下生成的源代码复制到我的客户端项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:05:09.460

您只需要在您的 Android 项目中使用这些 jars：

*   google-api-client-1.12.0-beta.jar
*   google-api-client-android-1.12.0-beta.jar
*   google-http-client-1.12.0-beta.jar
*   google-http-client-android-1.12.0-beta.jar
*   google-http-client-gson-1.12.0-beta.jar
*   google-oauth-client-1.12.0-beta.jar
*   gson-2.1.jar
*   番石榴-jdk5-13.0.jar
*   jsr305-1.3.9.jar

包括其他依赖项以在其他环境中运行库。

通常，生成客户端库的运行之间的依赖关系是固定的。但是，生成器将使用最新版本的客户端库，因此如果在后台升级，则依赖项可能也需要升级。

# git - 为什么要使用 .gitignore？

> ID：13675216
> 
> 赞同：22
> 
> 时间：2012-12-02T23:38:56.580
> 
> 标签：git

目前，每当我创建一个我希望 Git 跟踪的文件时，我只需将它添加到索引中。如果我不将它添加到索引中，Git 将不会“看到它”。那么我为什么要使用 .gitignore 文件，而不是不将其添加到索引中呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-02T23:43:10.613

您通常会发现，当您的项目变得更大时，一个一个地添加每个文件会变得乏味。

在 Java 中，您最终可能会得到许多`.class`不想添加到存储库中的文件。同样，您最终可能会`.o`在 C 或`.pyc`Python（例如）中得到许多文件。

在您的文件中拥有像`*.class`, `*.o`,这样的模式可以让您一劳永逸地忽略这些文件。随后的运行（或类似的，如果您使用 GUI）不会告诉您这些是新的、未跟踪的文件，从而让您专注于真正新且明显未跟踪的文件。`*.pyc``.gitignore``git status`

如果您添加整个目录（例如 ），这也很有用`git add myproject`：这可以让您完全忽略一类文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-02T23:41:37.320

它将文件隐藏在`git status`. 尤其是对于大量生成的文件，您真的不希望它们一直出现在那里。它还可以防止您意外添加它们，例如在执行`git add somefolder`.

> gitignore 文件的目的是确保某些未被 git 跟踪的文件保持未被跟踪。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-02T23:41:47.757

> gitignore 文件的目的是确保某些未被 git 跟踪的文件保持未被跟踪。

[http://git-scm.com/docs/gitignore](http://git-scm.com/docs/gitignore)

假设您`git add .`从存储库的根目录运行，并且您没有忽略任何内容。您刚刚将您之前在*精神上*忽略的所有文件添加到索引中。另一个好处是，通过版本控制`.gitignore`，您可以确保其他人不会犯类似的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T23:43:08.850

除了使用方便之外`git commit -a`，它还可以防止意外污染您的存储库或暴露敏感信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T06:31:20.543

是的，为了避免在 GIT 的远程存储库中提交不需要的文件。只需在 .gitignore 文件中提供适当的描述，例如，

如果我想避免带有 pyc 文件或 .class 文件扩展名的文件，那么 *.pyc *.class

我将这两行放在 .gitignore 文件中。将来我不需要为这些永远不会在 GIT 存储库中提交的文件而烦恼。

谢谢！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-31T20:13:47.220

添加每个文件并不乏味。例如，如果你有一堆新的 .java 文件，你可以这样做：

`find . -name \*.java | xargs git add`

当你有很多异常时，将所有可能的异常保存在 .gitignore 中会很乏味。因此，当异常（不应签入的文件模式）很少时，.gitignore 是有意义的，但是有许多文件模式需要检查并且新文件会定期弹出。但是当它是另一种方式时，我认为没有 .gitignore 的生活会更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T23:43:35.747

将某些文件指定到文件中的好处`.gitignore`是您可以**一次提交所有跟踪的文件，**而不必担心意外添加的忽略文件。使用例如以下方式提交文件要快得多：

```
git commit -a 
```

而不是一一添加...

# security - 将 IP-STS JWT 令牌交换为 ACS JWT 令牌

> ID：13675217
> 
> 赞同：0
> 
> 时间：2012-12-02T23:39:04.417
> 
> 标签：security, azure, wif, acs, jwt

我有一个 azure ACS 服务，它信任 IP-STS。
对于活动场景，我首先使用用户名、密码凭据从我的 IP-STS 获取 JWT 令牌。有 Oauth2 端点，一切正常。是否可以将此 IP-STS 令牌“交换”为我的 azure ACS 颁发的 JWT 令牌？如果是这样，是否有执行此操作的代码示例。（更糟糕的是，我所有的代码都在 JavaScript 中（实际上是 TypeScript），但这并不重要）。

更新：我正在使用 ACS OAuth2 草案 13 端点处理您的提示。
我进行如下操作：我要求我的自定义 STS（ThinkTecture STS）给我一个用于“ACS OAuth2 Draft 13 endpoint”领域的 JWT 令牌。这需要 TT STS 中全局的 oAuth 客户端 ID 和机密，我认为它们无关紧要。在 TT STS 管理中，我为此领域配置了一个对称密钥：key1。我收到了 3 部分的 JWT 令牌。令牌上的签名确实是用 key1 进行的。然后，我将这个令牌传递给 ACS，其中客户端 ID 和密钥来自指定的服务标识和参数

```
var form = new FormUrlEncodedContent(new Dictionary<string, string>
{
  { "grant_type", "http://oauth.net/grant_type/jwt/1.0/bearer" },
  { "assertion", rawtoken (the header dot body dot signature form TT STS },
  { "scope", "http://localhost"}
}); 
```

不幸的是，我现在得到 {"error":"invalid_client","error_description":"ACS50027: JWT token is invalid. \r\nTrace ID: b107cda5-393b-4b50-b14a-ebaa0ac41913\r\nTimestamp: 2012-12-05 08:58:10Z"}

我了解 JWT 处于测试阶段，因此 ACS50027 尚未记录。困难的部分是没有已知的调试方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:54:59.780

这绝对是可能的，但我认为现有的任何 ACS 样本都没有这样做，所以你有点处于未知领域。

我推荐的方法是使用 ACS OAuth2 草案 13 端点（如在[此示例](http://msdn.microsoft.com/en-us/library/hh127795.aspx)中，但 JWT 代替 SAML 和 IdP 代替服务身份）。该请求将类似于：

grant_type=http://oauth.net/grant_type/jwt/1.0/bearer&assertion=(JWT)&scope=(RP 领域)。

您需要 JWT 的颁发者来匹配您注册的身份提供者，以及关联的签名密钥，以及通过或更改任何必要声明的规则，并且 RP 具有 JWT 的令牌类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:51:10.387

Ok, I finally found a way to do this. Your hint was crucial for the success. The (very) tricky part is that the IP-STS uses a symmetric key to sign the JWT token. I had to programmatically (using the odata api) insert this key in the ACS backoffice under the Identity provider. (the managament console does not show this key anywhere) Everything is nearly fine. The only trouble is that the ACS copies the audience ("aud") from the original token, while I request a token for a different audience ("scope"). Any ideas there ?

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T06:57:13.967

不，您不能在 ACS 中交换令牌。这样做的唯一可能可行的方法是，如果您能够在 ACS 中将您的 IP-STS 注册为 IdP（如果您的 IP-STS 支持 WS-TRUST 协议，您将能够这样做）。这会让你陷入被动局面。

[唯一可能的活动方案方法是使用带有Service Identities](http://go.microsoft.com/fwlink/?LinkID=196527)的用户名/密码身份验证直接从 ACS 获取 JWT 令牌。在 ACS 中管理服务标识不像管理 ASP.NET Membership 提供程序，但它有一个[管理 API](http://msdn.microsoft.com/en-us/library/windowsazure/gg185972.aspx)。

使用服务标识进行身份验证的可能方法是密码、对称密钥、X.509 证书。因此，如果您对原始 IP-STS 进行了足够多的扭曲，以便在其 JWT 令牌中为您提供一个对称密钥作为声明，您将能够使用使用该对称密钥进行身份验证的服务身份从 ACS 获取 JWT 令牌。

但是，如果您已经拥有一个 JWT 令牌，为什么还需要另一个来自 ACS 的令牌？

**更新**

好吧，声明转换是“被动”模式下的唯一选项。对于活动模式，唯一的方法（我知道）是使用服务标识，因此没有声明转换。

Passive 的问题在于，出于安全原因，ACS 将创建一个隐藏的 POST 表单以将转换后的令牌 POST 提交到您的依赖方应用程序 (RP)。所以没有办法主动获得被动行为。您可以做的只是为了试用，并且由于隐藏形式的被动 POST 而失败：如果您愿意尝试（并且我没有测试并且我完全不知道结果），您可以尝试模拟`wsignin1.0`提供原始 JWT 令牌的操作。您可以查看[WS-Federation Passive Requestor Profile](http://msdn.microsoft.com/en-us/library/bb608217.aspx)的第 3.1 节，了解如何构建登录请求。您还可以使用[Fiddler](http://fiddler2.com/fiddler2/)完全跟踪被动场景的事件链。您将尝试重建的一个是`wsignin1.0`从注册的 IdP 返回到 ACS 的请求。

在某些时候，您将获得结果 HTML，其中包含一个 FORM 元素。该表单将有两个隐藏字段 -`wa`值为`wsignin1.0`并且`wresult`将包含 URL 编码`<t:RequestSecurityTokenResponse xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">....`这就是您想要的。

如果您成功地从您的 IdP 重新创建了对 ACS 的原始登录请求，那么这将起作用。

# ios - 使用异步图像更新表格单元格的设计选项

> ID：13675219
> 
> 赞同：0
> 
> 时间：2012-12-02T23:39:13.530
> 
> 标签：ios, coding-style

我试图找出我在代码设计方面的解决方案。

我有一个表格视图，每个单元格都拥有一个数据模型的实例。对包含数据模型的所有文本数据的 json 进行异步 http 请求。这包含有关所有单元格的信息。当它被检索时，所有的细胞都是用它们的模型创建的。但是，这也包括一个从中检索图像的 url。每个单元格的图像请求在创建/填充表格时异步进行。

当图像返回时，我需要更新单元格的 UIImage 视图。对于以干净的方式执行此操作，我有哪些选择？

我考虑过的事情：将 UIImageView 引用传递到图像请求方法的完成块中，并在收到时更新它。如果稍后更改模型，则视图不会自行更新：\ 为单元格视图订阅有关已更改的模型通知。感觉很不对劲，每个细胞都会捡起来，要检查是不是他们的模型发送的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:52:36.847

您可以使用以下任何一种

1.  [SDWebImage](https://github.com/rs/SDWebImage)
2.  [HJCache](https://github.com/markofjohnson/HJCache)
3.  [三20](https://github.com/facebook/three20)

还有很多..

# javascript - Bootstrap 'Affix' 不会贴在右边

> ID：13675220
> 
> 赞同：1
> 
> 时间：2012-12-02T23:39:38.320
> 
> 标签：javascript, twitter-bootstrap

我在这里创建了一个示例：http: [//jsfiddle.net/Ninjanoel/9GEGU/](http://jsfiddle.net/Ninjanoel/9GEGU/)

基本上，我想在右边贴上一些东西，在这种情况下，红色框，我希望它看起来只是将自己固定在顶部，因为一旦发生正确的页面滚动量，它应该是这样，但每次它'词缀'，它跳到左边，与我在左边已有的内容重叠。

bootstrap 有这么多的文档真是太好了，但不幸的是，我认为我错过了一些关于此的内容。请帮忙。

```
var offsetFn = function() {
   return $('#sidebar').position().top;
}

$(document).ready(function(e) {
  $('#sidebar').affix({
      offset: {top: offsetFn}
  });
});​ 
```

是我在堆栈溢出中发现的一个代码片段，不必猜测顶部偏移值，但即使我给它一个简单的值，当 div 被贴上时，它也会向左跳。

**关于小提琴的注意事项**：它似乎工作得不是很好，至少我的硬盘上的版本向左跳转，但这是我基本上使用的代码，小窗口可能会使事情复杂化，绿色和红色框假设是垂直列

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:54:49.493

为侧边栏创建内部 div。词缀设置`position: fixed`为列，因此使其无法正常工作。

编辑：见[http://jsfiddle.net/9GEGU/2/](http://jsfiddle.net/9GEGU/2/)你的功能是不必要的，只会在FF中引起奇怪的行为，所以删除`{offset: {top: offsetFn}}`. 它看起来一样，但滚动会更流畅。

还将 span5 (290px) 的宽度设置为#sidebar，因为当元素具有时`position: fixed`，它会从文档流中删除并且不受父级宽度的限制。

# wpf - WPF 失败。使用 WPF 页面作为实例

> ID：13675227
> 
> 赞同：0
> 
> 时间：2012-12-02T23:40:17.860
> 
> 标签：wpf, navigation, instance, shared

考虑一个有 2 个页面的 WPF 程序，您可以在它们之间导航。（上传和裁剪）

在第一页中，您使用按钮加载图像，选择图像，您的图像将出现在 WPF Image 控件中。然后，您按下“裁剪”按钮。这会将导航发送到第二页，您可以裁剪图像。

然后，您在第二页中裁剪图像。然后按“下一步”。下一步按钮必须将您重定向到第一页，但请稍等，您加载的图像不再存在于页面中。因为这是一个新的页面。

```
 Dim CropPage As New Crop(Crop_Bmp, Crop_BmpSource)
    Me.NavigationService.Navigate(CropPage) 
```

你可能觉得没问题。因为我们传递了参数，所以我们可以使用该参数重新填充 WPF Image 控件。但是，页面 1 中实际上有 8 个上传面板。因此，其他的很重要。

或者想想我找到的另一种方法。不要使用新的页面实例，而是返回您使用的页面。

```
 Upload.Crop_Bmp = Crop_Bmp
    Upload.Crop_BmpSource = Crop_BmpSource
    Me.NavigationService.GoBack()
    Upload.Crop() 
```

但是在第二个中，它会引发错误。

“对非共享成员的引用需要对象引用。”

然后，回到上传页面，我将变量和函数设为“共享”。但随之而来的是更多的问题。因为您无法编辑局部变量，除非您也将它们设为共享。因此，所有变量和函数都需要“共享”。

我正在寻找几天的解决方案，但我无法摆脱它们。我应该使用什么方法？重定向回来，还是打开一个新实例？

在旧类型的应用程序中，这非常容易。就是这样：

```
 Form1.Crop_Bmp = Crop_Bmp
    Me.Hide()
    Form1.Crop() 
```

它运行良好。因为表单不是 WPF 页面之类的实例。这就是我觉得 WPF 很奇怪的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:48:44.233

我发现这是一种方法。导航到裁剪页面时，我将上传页面作为参数发送到裁剪页面。

```
 Dim CropPage As New Crop(Crop_Bmp, Crop_BmpSource, Me)
    Me.NavigationService.Navigate(CropPage) 
```

然后，在作物：

```
Public Sub New(ByVal Crop_Bitmap_ As Bitmap, ByVal Crop_BitmapSource_ As BitmapSource, ByVal pg As Upload)

    ' This call is required by the designer.
    InitializeComponent()

    UploadPage = pg 
```

然后，在裁剪页面中，我访问了该参数以修改其元素。例如：

```
 Me.NavigationService.Navigate(UploadPage)
    UploadPage.Crop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T16:55:34.317

这听起来像是 Pages 隐喻的一个糟糕的用例。页面用于松散耦合的对等屏幕（例如，每个部门都有一个单独的页面），但您在紧密耦合的父子关系中使用它们。（“裁剪”页面是“上传”页面的子页面）对于您正在做的事情，将裁剪屏幕作为模式对话框启动可能更合适。

如果您想将所有内容保留在同一个窗口中，您可以将两个功能保留在同一个窗口中，并根据需要切换它们的可见性。

# php - 警告：mysql_result()：提供的参数不是第 4 行 (...) 中的有效 MySQL 结果资源

> ID：13675232
> 
> 赞同：3
> 
> 时间：2012-12-02T23:40:42.823
> 
> 标签：php, mysql, function

这是我的片段。

我已经检查了一些与我的错误类似的其他问题，但到目前为止我无法解决它。

```
<?php 
function user_exists ($username) {
$username = sanitize($username);
return (mysql_result(mysql_query("SELECT COUNT(user_id) FROM users WHERE username =  $username"), 0) == 1) ? true : false;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:13:33.680

您应该将代码拆分为更多行以处理这些错误或特殊情况。`mysql_query`如果发生，将返回零到 n 行或错误。因此，返回的*资源*仅在非错误查询中为真。这可用于处理如下情况。

首先构建并执行查询，然后处理*资源*。

```
$query="SELECT COUNT(user_id) FROM users WHERE username = ".$username;
$result = mysql_query($query); 
```

您可以使用以下方法来确定发生错误时发生的情况：

```
if(!$result) die("SELECT failed: ".mysql_error()); 
```

或者这些想法来处理问题

```
if (!$result=mysql_query($query)) {
        return false; // or similar operation
    }

    if (mysql_num_rows($result)!=1){
        return false;
    }else{
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:47:52.580

`mysql_query`如果由于某种原因失败，则在返回 false 时可能会发生这种情况。所以你应该把它分成多个语句并检查返回值

```
$sql = "SELECT COUNT(user_id) FROM users WHERE username =  $username";
$result = mysql_query($sql);
if ($result === false) {
    // error handling
    return false;
}

return (mysql_result($result, 0) == 1) ? true : false; 
```

# c - 如何将静态 printf 与 LEX 解析器一起使用 3 次？

> ID：13675234
> 
> 赞同：0
> 
> 时间：2012-12-02T23:41:06.383
> 
> 标签：c, parsing, lex

我有一些 lex 解析器规则，但我想做这样的事情：

*   电子邮件列表：（这是我想用 printf 输出的静态文本）*john@email.com、jessica@aol.com、mike@yahoo.com*（所有这些都通过 lex 规则）
*   网站列表：*google.com、yahoo.com、stackoverflow.com*（所有这些都通过 lex 规则）
*   公司名单：Apple、Microsoft、Twitter（均通过 lex 规则）

我不知道如何运行 printf 3 次并通过 lex 规则 3 次。

所以应该是：

```
1 printf, 1 lex rules run
1 printf, another lex run
1 printf, another lex run 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:55:01.170

您是否考虑过将每种类型收集到其各自的全局数组中并在完成 yylex() 后打印它们

# java - ActionListener 中的 Paint 方法

> ID：13675239
> 
> 赞同：1
> 
> 时间：2012-12-02T23:41:38.200
> 
> 标签：java, swing, paint, actionlistener, paintcomponent

我正在尝试在 ActionListener 中使用 Java 绘制方法。但是，当将paint 放在ActionListener 中时，我的编译器会抛出错误，并且尽管导入了java.awt.geom.*，但eclipse 根本无法将paint 识别为方法；

```
private class NumHandler implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
              //Draw Ovals
              public void paint (Graphics g)
              {
                   int number;
                   int x = 10;
                   int y = 30;
                   int width = 20;
                   int height = 10;

                   number = Integer.parseInt(numberTF.getText());

                   for (int i = 0; i < number; i++)
                   {
                        g.drawOval(x, y, width, height);

                        x += 5;
                        y += 5;
                        width += 5;
                        height += 5;
                   }
              }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:44:08.303

您的`paint`方法不能在您的`actionPerformed`方法中。它需要作为组件的类成员方法而不是`NumHandler`. 您可以在您的方法中进行一次`repaint()`调用以*请求*执行重绘。`ActionListener`

 *不要在您的方法中放置任何可能导致异常的逻辑`paint`，即：

```
number = Integer.parseInt(numberTF.getText()); 
```

这在方法中做得更好`actionPerformed`。

此外，如果使用 Swing，`paintComponent`则更适合优化油漆性能。请记住调用`super.paintComponent(g);`以重新绘制任何子组件。

请参阅：[在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)*

# jquery - Fabric.js 不在 html5 画布上写文本

> ID：13675250
> 
> 赞同：1
> 
> 时间：2012-12-02T23:43:17.177
> 
> 标签：jquery, html, canvas, fabricjs

好的，这就是正在发生的事情。我在这里有这个使用fabric.js 的页面。得到了所有的问题是changetext（）函数。它不是写到画布上。我知道所有变量都被传递给函数。我知道函数内的代码有效。它只是在函数中不起作用。

```
 <?
    include 'config/config.php';
    ?>
    <!doctype html>
    <html lang="en">
        <head>
            <title>
                About
            </title>
            <meta charset="UTF-8" />
            <link rel="stylesheet" href="css/main.css" type="text/css" />
      <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
            <script src="js/fabric.js"></script>
            <script>
            $(document).ready(function(){
                $("#card-worker-box > div").hide();
                  var canvas = new fabric.Canvas('cardmaker');
                  var font = [          
                  'Delicious',        //0
                  'Quake_Cyr',            //1
                  'OdessaScript_500',     //2
                  'CA_BND_Web_Bold_700',  //3
                  'CrashCTT_400',         //4
                  'DejaVu_Serif_400',     //5
                  'Encient_German_Gothic_400',//6
                  'Globus_500',           //7
                  'Modernist_One_400',    //8
                  'Tallys_400',           //9
                  'Terminator_Cyr',       //10
                  'Times_New_Roman',      //11
                  'Vampire95'             //12
                  ];
                   $('#addBackgroundImage').click(function(){
                        canvas.setBackgroundImage('http://localhost/canvas/images/alabama.png', function() {
                            canvas.renderAll();
                          }); 
                   });
                    $('#addText').click(function () {
                        changetext();

                    });

            function changetext(){ 
                var xPos = document.getElementById('xPos').value;
                var yPos = document.getElementById('yPos').value;
                var color = document.getElementById('color').value;
                var mytext = document.getElementById('mytext').value;
                var textObj = new fabric.Text(mytext, {
                    fontFamily: font[0],
                    left: xPos,
                    top: yPos,
                    fontSize: 12,
                    textAlign: "left",
                    fill: color  // Set text color to red
                });
                canvas.add(textObj);
                canvas.renderAll();
             };

                    $('.toggleWidth').click(function(e) {
                        e.preventDefault();
                        var id = $(this).attr("href");
                        $(id).toggle();
                    });

                    jQuery.fn.extend({
                        slideRight: function() {
                            return this.each(function() {
                                $(this).animate({
                                    width: 'show'
                                });
                            });
                        },
                        slideLeft: function() {
                            return this.each(function() {
                                $(this).animate({
                                    width: 'hide'
                                });
                            });
                        },
                        slideToggleWidth: function() {
                            return this.each(function() {
                                var h = $(this);
                                if (h.css('display') == 'none') {
                                    h.slideRight();
                                } else {
                                    h.slideLeft();
                                }
                            });
                        }
                    });
            });
        </script>

        </head>
        <body>
            <div id="card-control-box">
                <div id="card-control-menu-box">
                    <div id="card-menu">
                        <ul>
                            <li><a href="#canvas-image" class="toggleWidth">Image</a></li>
                            <li><a href="#canvas-text" class="toggleWidth">Text</a></li>
                            <li><a href="#canvas-font" class="toggleWidth">Fonts</a></li>
                        </ul>
                    </div>
                    <div id="card-worker-box">
                        <div id="canvas-image">
                            <h3>Image</h3>
                            <input type="text" name="background-image" />
                            <input type="button" value="add image" name="addBackgroundImage" id="addBackgroundImage" />
                        </div>
                        <div id="canvas-text">
                            <h3>Text</h3>
                            <input type="button" value="add text" name="addText" id="addText"/>
                            <label>Top</label><input type="text" id="xPos" name="xPos" />
                            <label>Left</label><input type="text" id="yPos" name="yPos" />
                            <label>Color</label><input type="text" id="color" name="color" />
                            <label>Text</label><input type="text" id="mytext" name="mytext" />
                        </div>
                        <div id="canvas-font">
                            <h3>Font</h3>
                        </div>
                    </div>
            </div>
                <div id="card-canvas-container">
                    <canvas id="cardmaker" width="500" height="225"></canvas>
                </div>
        </div>
                <div class="clearfix"></div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-03T08:44:43.017

我试过了，我通过这种方式得到了答案。这是我的代码：

```
 $('#addText').click(function () {
                    changetext();

                });

        function changetext(){ 

            var color = document.getElementById('color').value;
            var mytext = document.getElementById('mytext').value;
            var textObj = new fabric.Text(mytext, {

               fontFamily: 'Arial',
               fontSize:30,
                left:10,
               top:10,
               fill:color,
               shadow: 'green -5px -5px 3px',

            });
            canvas.add(textObj);
            canvas.renderAll();
         };

                $('.toggleWidth').click(function(e) {
                    e.preventDefault();
                    var id = $(this).attr("href");
                    $(id).toggle();
                });

                jQuery.fn.extend({
                    slideRight: function() {
                        return this.each(function() {
                            $(this).animate({
                                width: 'show'
                            });
                        });
                    },
                    slideLeft: function() {
                        return this.each(function() {
                            $(this).animate({
                                width: 'hide'
                            });
                        });
                    },
                    slideToggleWidth: function() {
                        return this.each(function() {
                            var h = $(this);
                            if (h.css('display') == 'none') {
                                h.slideRight();
                            } else {
                                h.slideLeft();
                            }
                        });
                    }
                });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:55:25.413

您是否在 JS 中添加了字体库？尝试添加它们。

# java - 为什么我的 JPanel 在 JTable 中听不到鼠标的变化？

> ID：13675251
> 
> 赞同：0
> 
> 时间：2012-12-02T23:43:18.287
> 
> 标签：java, swing, jtable, mouseevent, renderer

这是一个简单的例子，当鼠标进入/退出时，我的 JTable 的内部 JPanels 没有被通知。为什么？

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.table.TableCellRenderer;

import net.miginfocom.layout.CC;
import net.miginfocom.swing.MigLayout;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel(new MigLayout("debug"));

        // JTABLE
        String[] columnNames = {"First Name",
                "Last Name",
                "Sport",
                "# of Years",
                "Vegetarian"};
        Object[][] data = {
                {"Kathy", "Smith",
                 "Snowboarding", new Integer(5), new Boolean(false)},
                {"John", "Doe",
                 "Rowing", new Integer(3), new Boolean(true)},
                {"Sue", "Black",
                 "Knitting", new Integer(2), new Boolean(false)},
                {"Jane", "White",
                 "Speed reading", new Integer(20), new Boolean(true)},
                {"Joe", "Brown",
                 "Pool", new Integer(10), new Boolean(false)}
            };

        JTable table = new JTable(data, columnNames);
        table.setDefaultRenderer(String.class, new TableCellRenderer() {

            @Override
            public Component getTableCellRendererComponent(JTable table, Object value,
                    boolean isSelected, boolean hasFocus, int row, int column) {
                JPanel panel = new JPanel(new MigLayout("fill"));

                JLabel label = new JLabel(value.toString());
                label.setFont(new Font("SansSerif", Font.PLAIN, 13));
                label.setHorizontalAlignment(JLabel.CENTER);
                panel.add(label, new CC().growY());

                final JLabel close = new JLabel(" x ");
                close.setHorizontalAlignment(JLabel.CENTER);
                close.setVerticalAlignment(JLabel.CENTER);
                panel.add(close, new CC().growY().alignX("right"));

                panel.addMouseListener(new MouseAdapter() {

                    @Override
                    public void mouseEntered(MouseEvent event) {
                        System.out.println("CALLED");
                        close.setForeground(Color.red);
                    }

                    @Override
                    public void mouseExited(MouseEvent event) {
                        System.out.println("GRR");
                        close.setForeground(Color.black);
                    }

                });

                return panel;
            }

        });

        panel.add(table, new CC().width("50%"));

        frame.setContentPane(panel);

        frame.pack();
        frame.setVisible(true);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:03:28.490

渲染器组件旨在为每个单元重用，以提高性能。所以 make `panel`, `label`, 和`close`fields 并且只是 do `label.setText(String,valueOf(value))`。

然后将鼠标（运动）侦听器添加到组件通常没有多大意义。而是将它们添加到 JTable 并使用[columnAtPoint](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#columnAtPoint%28java.awt.Point%29)、 rowAtPoint。

# keyboard-shortcuts - 如何在 Pharo / Squeak 中缩进一段代码？

> ID：13675260
> 
> 赞同：3
> 
> 时间：2012-12-02T23:44:53.767
> 
> 标签：keyboard-shortcuts, smalltalk, indentation, pharo, squeak

使用选定的代码块，我尝试通过按 TAB 来缩进它。

我希望代码是*缩进*的。

相反，选定的文本将被**删除**并**替换**为 TAB。

怎么会？还有其他**捷径**吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T23:47:25.273

作为 Pharo/Squeak 的新手，您可能希望通过按 TAB/SHIFT-TAB 来缩进一段代码。

事实证明，这不是**Pharo 1.4** / **Squeak 4.3**的工作方式（但是这**可能会在未来发生变化**，请参阅下面的评论）。

缩进-**右**/缩进-**左**的正确**快捷方式**是：

 ****```
                 缩进（右） 缩进（左）
    Win/Linux: Ctl + Alt + R Ctl + Alt + L
    Mac：Cmd + Shift + R Cmd + Shift + L

```

所以：它是右/左的 R/L。****

# mysql - MySQL：按日期接近分组？

> ID：13675263
> 
> 赞同：1
> 
> 时间：2012-12-02T23:45:21.627
> 
> 标签：mysql, sql, group-by, aggregate-functions

我写了这个查询，它几乎做了我想要的：

```
SELECT * FROM 
(
   SELECT COUNT(*) as cnt,
   lat,
   lon,
   elev, 
   GROUP_CONCAT(CONCAT(usaf,'-',wban))
   FROM `ISH-HISTORY_HASPOS` 
   GROUP BY  lat,lon,elev 
 ) AS x WHERE cnt >=1; 
```

输出：

```
+-----+--------+----------+--------+-------------------------------------------------+
| cnt | lat    | lon      | elev   | GROUP_CONCAT(CONCAT(usaf,'-',wban))                              |
+-----+--------+----------+--------+-------------------------------------------------+
|   4 | 30.478 |  -87.187 | 36     | 722220-13899,722221-13899,722223-13899,999999-13899              |
|   4 | 36.134 |  -80.222 | 295.7  | 723190-93807,723191-93807,723193-93807,999999-93807              |
|   5 | 37.087 |  -84.077 | 369.1  | 723290-03849,723291-03849,723293-03849,724243-03849,999999-03849 |
|   5 | 38.417 | -113.017 | 1534.1 | 745200-23176,745201-23176,999999-23176,724757-23176,724797-23176 |
|   4 | 40.217 |  -76.851 | 105.8  | 999999-14751,725110-14751,725111-14751,725118-14751              |
+-----+--------+----------+--------+-------------------------------------------------+ 
```

这将返回位于相同坐标的站点的串联列表。但是，我只对连接具有相邻日期范围的电台感兴趣。我从 (ISH-HISTORY_HASPOS) 中选择的表有两个日期时间列：“开始”和“结束”。我需要这两列的值在 3 天内彼此满足 GROUP_CONCAT 条件。

**编辑：**为了使站包含在最终结果的 GROUP_CONCAT 中，它必须满足以下条件：

1.  它必须与列表中的另一个站点位于同一位置（按纬度、经度、海拔分组）

2.  它的`end`时间必须在另一个站的`begin`时间的 3 天内，或者它的`begin`时间必须在另一个站的 `end`时间的 3 天内。当我说“另一个车站”时，我指的是位于同一地点的车站（满足#1 的条件）。

我想我将不得不使用子查询，但我似乎无法弄清楚如何去做。一些帮助将不胜感激！查询或存储过程都很好，但 php 解决方案也可以接受。

这是我正在查询的表的转储：[sql dump](http://www.furlender.com/ISH-HISTORY_HASPOS.sql)

结果应该与我的示例相同，但不应该存在非相邻项目（按日期）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:36:27.597

我只有 SQL Server 的访问权限和知识，所以我无法让您的数据正常工作，我不知道 MySQL 是否具有等效功能，但这里是您需要做什么的口头描述。

您需要一个递归语句（在 SQL Server 中使用 CTE）以在 lat、lon、elev 上将表连接到自身，并在 end -3 和 end +3 之间开始。您需要小心不要陷入无限循环 - 我建议您构建一个逗号分隔的列表，列出您访问过的 ID，并随时检查。这很痛苦，但请按照 ID 顺序保留此列表，因为这是您最后需要分组的内容。您还需要跟踪您的深度和原始 ID。

就像是 ...

```
WITH cte(id, idlist, lat, lon, elev, starts, ends)
AS (
SELECT id, CAST(id AS varchar), lat, lon, elev, starts, ends
FROM `ISH-HISTORY_HASPOS`
UNION ALL
SELECT i.id, FunctionToManagetheList(i.idlist, cte.id), lat, lon, elev, starts, ends
FROM `ISH-HISTORY_HASPOS` i
     INNER JOIN
     cte ON i.lat=cte.lat AND 
            i.lon=cte.lon AND 
            i.elev=cte.elev AND
            NOT FunctionToCheckIfTheIDisintheLitst(i.id, cte.idlist)
)
SELECT stuffyouneed
FROM   `ISH-HISTORY_HASPOS` i
       INNER JOIN
       (SELECT id, MAX(depth) AS MaxDepth
       FROM    cte 
       GROUP BY id) cte1 ON i.id=cte.id
       INNER JOIN
       cte cte2 ON cte1.id=cte2.id AND cte1.MaxDepth=cte2.Depth
GROUP BY cte.idlist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:02:02.590

一种解决方案可能是使用子查询来计算彼此相隔 3 天内的站点列表，并将此子查询作为 where 子句添加到主查询中。子查询由一个笛卡尔积组成，用于列出所有可能的站对，第一个条件仅获得结果矩阵的前半部分，两个条件指定时间约束。至于后面的这些条件我只是猜到了，我真的不知道`begin`and`end`字段的度量单位。结果查询可能是这样的：

```
SELECT * FROM (
    SELECT COUNT(*) AS
       cnt,
       lat,
       lon,
       elev,
    GROUP_CONCAT(CONCAT(usaf, '-', wban))  
    FROM ISH-HISTORY_HASPOS  
    WHERE id IN (
        SELECT DISTINCT t1.id  
        FROM ISH-HISTORY_HASPOS t1  
        INNER JOIN ISH-HISTORY_HASPOS t2
           ON t1.lon = t2.lon
           AND t1.lat = t2.lat
           AND t1.elev = t2.elev  
        WHERE t1.id < t2.id
            AND abs(t1.begin - t2.end) < 259200
            AND abs(t1.end - t2.begin) < 259200  
        UNION  
        SELECT DISTINCT t2.id  
        FROM ISH-HISTORY_HASPOS t1  
        INNER JOIN ISH-HISTORY_HASPOS t2
            ON t1.lon = t2.lon
            AND t1.lat = t2.lat
            AND t1.elev = t2.elev  
        WHERE t1.id < t2.id
            AND abs(t1.begin - t2.end) < 259200
            AND abs(t1.end - t2.begin) < 259200
    )
    GROUP BY lat, lon, elev   
) AS x WHERE cnt >= 1; 
```

# windows - 相同的代码作为 Windows 服务运行比 GUI 应用程序慢

> ID：13675264
> 
> 赞同：3
> 
> 时间：2012-12-02T23:45:27.910
> 
> 标签：windows, performance, delphi, windows-services, delphi-2007

我有一些 Delphi 2007 代码在两个不同的应用程序中运行，一个是 GUI 应用程序，另一个是 Windows 服务。奇怪的是，虽然 GUI 应用程序在技术上似乎有更多“要做”，绘制 GUI，计算一些统计数据等等，但 Windows 服务在运行时始终使用更多的 CPU。GUI 应用程序使用大约 3-4% 的 CPU 功率，服务使用在 6-8% 的区域。

当它们一起运行时，两个应用程序的 CPU 负载大约翻了一番。

两个应用程序中的基本代码相同，除了在 Windows 窗体应用程序中添加了 GUI 代码。

这种行为有什么原因吗？Windows 服务应用程序是否有某种固有的开销，或者我是否需要查看代码以在我的书中找到这种意外行为的来源？

# 编辑：

有时间更仔细地查看代码后，我认为下面关于 GUI 应用程序花费一些时间等待重绘，导致 CPU 负载下降的建议可能是不正确的。应用程序都是线程化的，这意味着 GUI 重绘不应影响 CPU 负载。

只是为了确保我首先尝试从应用程序中删除所有 GUI 组件，只留下一个空白表单。这并没有增加程序的 CPU 负载。然后，我在用于更新 UI 的工作线程中删除了所有对 Synchronize 的调用。这具有相同的结果：CPU 负载没有改变。

服务中的代码如下所示：

```
procedure TLsOpcServer.ServiceExecute(Sender: TService);
begin
  // Initialize OPC server as NT Service
  dmEngine.AddToLog( sevInfo, 'Service', 'Name', Sender.Name );
  AddLocalServiceKeysToRegistry( Sender.Name );

  dmEngine.AddToLog( sevInfo, 'Service', 'Execute', 'Started' );
  dmEngine.Start( True );
  //
  while not Terminated do
  begin
    ServiceThread.ProcessRequests( True );
  end;

  dmEngine.Stop;
  dmEngine.AddToLog( sevInfo, 'Service', 'Execute', 'Stopped' );
end; 
```

dmEngine.Start 将启动并注册 OPC 服务器并初始化一个套接字。然后它启动一个线程，对传入的 OPC 信号做一些事情。在 GUI 应用程序的主窗体上的 FormCreate 中进行了完全相同的调用。

我将研究 GUI 应用程序接下来是如何启动的，我没有编写这段代码，所以试图弄清楚它是如何工作的有点冒险:)

# 编辑2

这有点有趣。我分别运行这两个应用程序正好 1 分钟，运行 AQTime 对它们进行基准测试。这是结果中最有趣的部分：

## 在服务中：

*过程名称：* TSignalList::HandleChild

*执行时间：* 20.105963821084

*点击数：* 5961231

## 在 GUI 应用程序中：

*过程名称：* TSignalList::HandleChild

*执行时间：* 7.62424101324976

*命中数：* 6383010

# 编辑 3：

我终于回到了可以继续关注这个问题的位置。我发现两个程序在运行 5 分钟后都具有大致相同的命中数，但在服务中执行时间要长得多。对于 HandleValue，命中计数为 4 300 258，服务中的执行时间为 21.77 秒，而在 GUI 应用程序中，命中计数为 4 254 018，执行时间为 9.75 秒。

代码如下所示：

```
function TSignalList.HandleValue(const Signal: string; var Tag: TTag; const CreateIfNotExist: Boolean):        HandleStatus;
var
  Index: integer;
begin
  result := statusNoSignal;
  Tag := nil;

  if not Assigned( Values ) then
  begin
    Values := TValueStrings.Create;
    Values.CaseSensitive  := defDefaultCase;
    Values.Sorted         := True;
    Values.Duplicates     := dupIgnore;
    Index := -1;  // Garantied no items in list
  end else
  begin
    Index := Values.IndexOf( Signal );
  end;

  if Index = -1 then
  begin
    if CreateIfNotExist then
    begin
      // Value signal does not exist create it
      Tag := TTag.Create;
      if Values.AddObject( Signal, Tag ) > -1 then
      begin
        result := statusAdded;
      end;
    end;
  end else
  begin
    Tag := TTag( Values.Objects[ Index ] );
    result := statusExist;
  end;
end; 
```

两个应用程序进入“CreateIfNotExist”案例的次数完全相同。TValueStrings 是 TStringList 的直接后代，没有任何重载。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T02:01:12.347

您是否定时执行核心功能？如果是这样，您是否测量了差异？我认为，如果您这样做，您不会发现它们之间有太大区别，除非您在该核心功能的代码中添加其他功能，例如更新 GUI。

消耗更少的 CPU 并不意味着它运行得更慢。GUI 应用程序可能会更频繁地等待重绘，这也取决于 GPU（可能还有系统的其他部分）。因此，GUI 应用程序可能会消耗更少的 CPU 功率，因为​​ CPU 正在等待系统的其他部分，然后才能继续执行下一条指令。

# c++ - 预期的 '(' 用于函数式强制转换或类型构造

> ID：13675265
> 
> 赞同：2
> 
> 时间：2012-12-02T23:45:39.317
> 
> 标签：c++

所以我正在尝试创建一个模拟医院病房的教室，但它一直在我的构造函数中给我一个错误。有时没有问题，但随后又回来了....此处的其他用户定义对象包括没有问题的 Patient 类和也没有问题的 LinkedList 模板类。

这是标题

```
class Room
{
public:

    Room();
    Room(int);
    static LinkedList<Room> createRooms();

    Patient patient;
    int roomNumber;

    bool operator==(const Room &other) const; //overload ==
    bool operator!=(const Room &other) const; //overload !=
    void operator=(const Room &other) const; //overload =

}; 
```

和 cpp

```
#include "Room.h"

Room::Room();
Room::Room(int n)
{
    roomNumber= n;
    patient= Patient();
}
LinkedList<Room> Room::createRooms() {
    //create rooms up until ROOMS is reached
    LinkedList<Room> roomList;
    for(int i= 1; i < 11; i++){
        Room room= Room(100+i);
        roomList.push(room);
    }
    return roomList;

}
//Overload ==
bool Room::operator==(const Room &other)const{
    //compare each room's room number field
    return (this->roomNumber == other.roomNumber && this->patient == other.patient);

}
//Overload !=
bool Room::operator!=(const Room &other)const{
    return !(this == &other);
}

void Room::operator=(const Room &other)const{
    this->patient= other.patient;
    this->roomNumber= other.roomNumber;
} 
```

问题出在 Room(int) 构造函数上。Xcode 不断给我一条消息，说 Expected '(' for function-style cast or type construction

我不知道是怎么回事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:52:19.990

您显然忘记包含定义的标题`Patient`：

```
 #include "Patient.h" 
```

或类似的。

还，

```
patient= Patient(); 
```

是多余的，默认情况下该成员`patient`将被值初始化，并且

```
Room::Room(); 
```

不正确-您没有提供实现。

接下来，**您的设计似乎有缺陷**。您似乎暗示患者是房间的一部分，并选择了组合来这样做。但事实并非如此。如果房间是空的怎么办？您当前的设计尚未处理这种情况。

编辑：你的意思是：

```
return !(*this == other); 
```

在你超载到`operator!=`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:54:30.740

这看起来很奇怪：

```
 Room::Room(); 
```

我想你想要这个：

```
 Room::Room() {} 
```

您可能至少应该初始化成员变量，而不是使用空白构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T00:05:03.450

您可以考虑在标头中将以下构造函数更改为“显式”（切勿滥用“显式”，但有时需要）

```
explicit Room(int); 
```

如果你的代码中有一个类同时接受“int”或“const Room&”作为构造函数参数怎么办？

认为：

```
Hospital(int n); //Hospital constructor where n is number of rooms
Hospital(const Room& room); //Hospital constructor, hosptial made initially by only 1 room 
```

在这种情况下，没有显式构造函数

```
Hospital sanGrace(3); 
```

编译器无法判断您是否有意

```
Hospital sanGrace(3); 
```

或者

```
Hospital sanGrace(Room(3)); 
```

用“显式”你被迫写

```
Hospital sanGrace(Room(3)); 
```

如果您想从 3 号房间创建 SanGrace 医院。

这同样适用于患者类别。

# java - 替代Java中的无符号类型

> ID：13675269
> 
> 赞同：3
> 
> 时间：2012-12-02T23:46:01.533
> 
> 标签：java, android, opencv

在 OpenCV 中，使用 Mat 的最快方法是首先将其复制到适当原始类型的数组中，如下所示：

```
byte[][] array = new byte[rows][cols];
for (int i = 0; i < rows; i++) {
    mat.get(i, 0, array[i]);
} 
```

但是，这在具有无符号 Mat 类型（例如 ）的 OpenCV4Android 中不起作用`8U`，因为 Java 缺少无符号类型。我可以在将 256 添加到每个元素的同时复制到下一个更大的原始类型（此处为短）的数组：

```
byte[] buf = new byte[cols];
short[][] array = new short[rows][cols];
for (int i = 0; i < rows; i++) {
    mat.get(i, 0, buf);
    for (int j = 0; j < cols; j++) {
        array[i][j] = (short) (buf[i]+256);
    }
} 
```

有更快的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:36:25.490

实际上可以在提取之前将 Mat 转换为有符号字节：

```
mat.convertTo(mat, CvType.CV_8S); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:17:35.150

虽然 Java 确实不支持无符号原始类型，但只有在对这些值进行实际算术运算时才会有所不同。8 位是 8 位，有符号或无符号。如果您需要用这些值计算某些东西，是的 - 您应该使用更大的类型（实际上是原始类型的两倍）以避免溢出（有符号字节 -127:128，无符号字节：0:255）并且您应该进行一些转换为摆脱“符号部分”（在字节和 0xFF 的情况下）。编辑：这是一个普遍的答案，我没有使用过 OpenCV4Android。虽然在特定情况下，出于内存消耗的原因使用无符号类型可能是有意义的，但我的猜测是库实际上会以平台的正确形式输出您需要的值？

# python - 导入错误？(Python 3.2)

> ID：13675270
> 
> 赞同：3
> 
> 时间：2012-12-02T23:46:10.223
> 
> 标签：python, environment-variables, python-import

我有自己的名为 v_systems 的模块，我正在尝试将该模块导入另一个 python 文件（它也保存在与保存文件 v_systems 相同的目录中）我需要导入它，`import v_systems as vs`或者即使我尝试导入作为`import v_systems`.

但是它给了我一个错误，说没有模块 v_systems 存在。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:05:13.017

它可能不在系统路径中。请执行下列操作：

它需要在`sys.path`. 我所做的是创建了一个名为“Modules”的文件夹（在哪里并不重要），其中有我下载/创建的所有模块。说我把它放进去`C:\Users\USER\Modules`。你也可以把这个模块放在那里。

您需要将路径复制到文件夹。

然后，转到控制面板。单击系统，然后在左侧面板上有一个名为“高级系统设置”的选项。点击那个。在弹出的窗口底部，单击“环境变量”。查看您是否创建了一个名为`PYTHONPATH`. 很可能，你不知道。因此，通过按“NEW”创建一个变量（在第二部分中）。命名它`PYTHONPATH`并为变量值输入文件路径。（对于我的示例，文件路径是`C:\Users\USER\Modules`）。希望这可以帮助 ：）

一旦你到达控制面板中的系统（属性）位置，我插入了如何到达那里的屏幕截图： ![蟒蛇路径](../Images/8ac23dc151c2e8d9ecf24c945ffade9f.png)

# c# - 在具有不同数据库用户的两个数据库之间复制数据

> ID：13675271
> 
> 赞同：0
> 
> 时间：2012-12-02T23:46:18.003
> 
> 标签：c#, sql, sql-server, sql-server-2008

我们在一台 SQL 服务器中设置了三个环境（或数据库）。并且三个不同的登录名/用户被映射到其中的每一个。例如：

环境 (DB) 1 - DBUser 1
环境 (DB) 2 - DBUser 2
环境 (DB) 3 - DBUser 3

显然 DBUser1 无权访问除他的 ENV 之外的任何 ENV。

我有一个要求，我需要从 ENV1 复制一些数据以从代码 (C#) 中说 ENV3。但它不允许我这样做，因为我的主要环境是 ENV1（我的网站默认连接到该环境）并且 DBUSer1 无法访问 ENV3。

一旦我授予 DBUser1 访问 ENV3 的权限，它就可以工作。但后来我失去了拥有不同用户的全部目的。还有其他选择吗？

我正在使用 SQL Server 2008 和 3.5 .Net 框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:45:29.310

[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)似乎是要走的路。感谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:15:40.943

SQL Server 中的用户权限非常精细。

我建议 ENV1 中的存储过程具有 ENV3 的特权，可供 ENV1 用户使用。这可以确保您的权限结构安全，并且 ENV1 用户可访问的代码不需要包含（甚至知道）任何 ENV2 或 ENV3 的凭据。

# c - 逗号分隔 C

> ID：13675273
> 
> 赞同：0
> 
> 时间：2012-12-02T23:46:42.180
> 
> 标签：c

我需要我的程序获取一系列文件名（存储在单个“字符串”中并用逗号分隔）并对其进行操作。

伪代码将是：

```
for each filename in some_string
    open filename
    operate on contents of filename
    close filename 
```

问题是我坚持将 some_string ("filename1,filename2,...,filenamen") 分成 [filename 1]、[filename 2]、... [filename n]。

编辑：澄清一下，保持 some_string 完整并根据需要提取每个文件名似乎更简单，这就是我想要做的。

就目前而言，我的代码非常笨拙（而且非常恶心......）

```
int j = 0;
char *tempS = strdup(filenames);
while (strchr(tempS, ',')) {
    char *ptr = strchr(tempS, ',');
    *ptr++ = '.';
    numFiles++;
}

for (; j < numFiles; j++) {
    char *ptr = strchr(tempS, ',');

    //don't know where to go from here...
    fin = openFile(tempS);
    if (fin != NULL) {
        //do something
    }
    fclose(fin);
} 
```

显然，这还没有完成。我正确地找到了文件的数量，但是在弄清楚如何一次从源字符串中分离一个文件并对其进行操作时，我有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:53:02.520

你可以用[`strtok`](http://linux.die.net/man/3/strtok)这个

```
char *fname = strtok(tempS, ",");
while (fname != NULL) {
    /* process filename */
    fname = strtok(NULL, ",");
} 
```

`strtok`一个一个地传递以逗号分隔的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:51:32.603

通常在 C 中拆分字符串时，使用 C 标准库中的[strok()](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtok.html)函数。

```
#include <string.h>
...
char *token;
char *line = "string1,string2,string3";
char *search = ",";

token = strtok(line, search);

token = strtok(NULL, search); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T03:57:46.950

strtok() 不是多线程安全的。如果这对您很重要，您应该使用 strtok_r()。例如：

```
 char *savedptr = NULL /* to be passed back to strtok_r in follow-on calls */
    char *tempS = strdup( some_string ); /* to keep your original intact */
    char *fname = strtok_r(tempS, ",", savedptr);
    while (fname != NULL) {
        /* process fname ... */
        fname = strtok_r(NULL, ",", savedptr); /* pass savedptr back to strtok_r */
    } 
```

# javascript - 用 ;? 启动所有 javascript 脚本

> ID：13675274
> 
> 赞同：2
> 
> 时间：2012-12-02T23:46:55.387
> 
> 标签：javascript

以分号开头的所有 JS 文件以说明之前包含的任何不良脚本是一种好习惯吗？还是不打扰？

谢谢

`;(function(){ /* my script here */ })();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:53:24.157

*麻烦了，*越来越多的人利用 ASI 的力量来编写无分号的 JavaScript。在无分号的 JS 世界中，这是“规则”，您在原始表达式之前放置一个分号，例如`;()`、 or`;[]`或`;//`，以及之后`'use strict';`并在其他任何地方省略它们。原始表达式不是很常见，除了典型的 IIFE。即使你用分号编写 JS，那个特定的也是安全的，而且做得比坏处多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:53:26.403

相反，启动所有脚本`"use strict";`，在某些浏览器上将使用这些脚本检查您的脚本是否存在一些容易出错的做法，有趣的是，我相信它会产生与`;`关闭之前包含的错误脚本中的任何未完成语句类似的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T23:55:08.097

如果您将大量代码拆分并解耦为几个 javascript 文件，那么前导分号实际上非常有用，您在某些时候将这些文件连接起来创建一个生产文件。

它只会有助于避免结构中的错误，例如

```
(function() {
}()) 
```

如果您的所有文件都包装在这样的结构中，它会在没有任何分号的情况下填充失败，将它们分开。除此之外，这种模式没有太大价值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T23:49:19.087

不是一个好主意：

1.  隐藏错误
2.  东西不会在你的网站上工作，没有明确的说明为什么
3.  没有理由使用错误的脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T23:48:30.880

我通常不打扰，但是，如果你想真正安全，那就去做吧。如果您使用的是其他人的库，我可能会这样做，但话又说回来，这是您的选择。

# ipad - iPad3上的屏幕触摸位置

> ID：13675275
> 
> 赞同：2
> 
> 时间：2012-12-02T23:47:02.663
> 
> 标签：ipad, touch

我正在为 iPhone 和 iPad 编写一个由屏幕触摸控制的 OpenGL 游戏。这是一个通用应用程序，所以我在 touchesBegan 中有代码，可以将任何触摸位置转换为 0.0-1.0 范围（屏幕的一侧到另一侧，这是应用程序的其余部分需要获取触摸信息的方式）。执行此操作的代码是：

```
CGPoint touchLocationPx;
GLFloat xx;

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    touchLocationPx = [touch locationInView:self];    // touchLocationPx.x & .y are in points, not pixels...
    xx = (GLfloat)touchLocationPx.x / (GLfloat)(self.frame.size.width);    // self.frame.size.width is also in points,
                                                                           // so xx is in the range 0.0 to 1.0...

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    // Set xx to a dummy value that will not be processed by the rest of the app...
    xx = -999.999;
} 
```

它依赖于 [touch locationInView:self] 和 self.frame.size.width 总是在相同的单位（点而不是我理解的像素），无论它是非视网膜屏幕，视网膜屏幕与 [UIScreen mainScreen ].scale=2.0，或处于 x1 或 x2 模式的 iPad。（我自己的测试设备是 iPhone 4S，如果我监控屏幕尺寸和触摸位置，它都会按预期以点 (480,320) 报告。但是我听说 iPad3 上的控件没有响应。屏幕尺寸和触摸位置在这台设备上处理方式不同？还是有其他原因导致我的代码无法正确转换触摸位置？（在模拟器上，所有设备类型都可以正常工作，包括视网膜 iPad。我知道模拟器永远不会与真实设备完全匹配，但是像如何报告触摸位置这样基本的东西应该正确地存在。知道为什么真正的设备会失败吗？）

谢谢，

山姆。

# python - Python多线程不起作用

> ID：13675277
> 
> 赞同：0
> 
> 时间：2012-12-02T23:47:12.277
> 
> 标签：python, multithreading, networking, download

请原谅无用的变量名和不必要的臃肿代码，但我只是迅速将它们拼凑在一起，还没有时间优化或整理。

我编写了这个程序，通过解析 URL 的消息日志，转储我和朋友使用网络摄像头照片共享服务 (321cheese.com) 相互发送的所有图像。**问题**是我的多线程似乎不起作用。

在我的代码底部，您会看到我的注释掉的非多线程下载方法，它始终产生正确的结果（在本例中为 121 张照片）。但是当我尝试将此动作发送到新线程时，程序有时会下载 112 张照片，有时会下载 90 张照片，有时会下载 115 张照片等，但从未给出正确的结果。

为什么这会产生问题？我应该限制同时线程的数量（以及如何）？

```
import urllib
import thread

def getName(input):
    l = input.split(".com/")
    m = l[1]
    return m

def parseMessages():
    theFile = open('messages.html', 'r')
    theLines = theFile.readlines()
    theFile.close()
    theNewFile = open('new321.txt','w')
    for z in theLines:
        if "321cheese" in z:
            theNewFile.write(z)
    theNewFile.close()

def downloadImage(inputURL):
    urllib.urlretrieve (inputURL, "./grabNew/" + d)

parseMessages()

f = open('new321.txt', 'r')
lines = f.readlines()
f.close()

g = open('output.txt', 'w')

for x in lines:
  a = x.split("<a href=\"")
  b = a[1].split("\"")
  c = b[0]
  if ".png" in c:
    d = getName(c)
    g.write(c+"\n")
    thread.start_new_thread( downloadImage, (c,) )
    ##downloadImage(c)

g.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:43:52.123

您的代码中有多个问题。

主要问题是`d`多个线程中的全局名称使用。要修复它，请将名称作为参数显式传递给`downloadImage()`.

限制并发下载数量的简单方法（代码方面）是使用[`concurrent.futures`](http://docs.python.org/3/library/concurrent.futures.html)（在 Python 2 上可用[`futures`](http://pypi.python.org/pypi/futures)）或`multiprocessing.Pool`：

```
#!/usr/bin/env python
import urllib
from multiprocessing import Pool
from posixpath import basename
from urllib import unquote
from urlparse import urlsplit

download_dir = "grabNew"

def url2filename(url):
    return basename(unquote(urlsplit(url).path).decode('utf-8'))

def download_image(url):
    filename = None
    try:
        filename = os.path.join(download_dir, url2filename(url))
        return urllib.urlretrieve(url, filename), None
    except Exception as e:
        return (filename, None), e

def main():
    pool = Pool(processes=10)
    for (filename, headers), error in pool.imap_unordered(download_image, get_urls()):
        pass # do something with the downloaded file or handle an error

if __name__ == "__main__":
   main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:05:14.250

你确定你的解析工作正常吗？

此外，您正在启动太多线程。

最后...... python 中的线程是假的！如果您想要真正的并行性，请使用多处理模块，但由于图像可能都来自同一服务器，如果您同时打开一百个与同一服务器的连接，它的防火墙可能会开始丢弃您的连接。

# java - 尝试从文本字段获取数据到输出流以用于 Java 中的聊天程序

> ID：13675278
> 
> 赞同：0
> 
> 时间：2012-12-02T23:47:15.573
> 
> 标签：java, io, network-programming, chat

我正在用 Java 开发一个简单的 GUI 聊天程序。目标是让用户选择是托管服务器还是作为客户端连接。所有这些都有效。我遇到的问题是让客户端或服务器聊天。理想情况下，用户或服务器可以在 textField 中输入并按回车键（或按发送按钮），然后消息将发送到连接的每个客户端。在执行期间，服务器会运行一个无限循环，等待更多的客户端。我遇到的问题有两个：1）我不确定将字符串传递给输入流的方式是否正确，2）我不知道什么时候可以让服务器接收然后重新发送数据，因为它在等待`server.accept()`。

这是运行方法：

```
public void run()
{   
    conversationBox.appendText("Session Start.\n");
    inputBox.requestFocus();

    while (!kill)
    {
        if (isServer)
        {
            conversationBox.appendText("Server starting on port " + port + "\n");
            conversationBox.appendText("Waiting for clients...\n");
            startServer();
        }
        if (isClient)
        {
            conversationBox.appendText("Starting connection to host " + host + " on port " + port + "\n");
            startClient();
        }
    }       

} 
```

这是 startClient 方法：

```
public void startClient()
{
    try
    {
        Socket c = new Socket(host, port);
        in = new Scanner(c.getInputStream());
        out = new PrintWriter(c.getOutputStream());
        while (true)
        {
            if (in.hasNext())
            {
                Chat.conversationBox.appendText("You Said: " + message);
                out.println("Client Said: " + message);
                out.flush();
            }
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

这是 startServer 方法：

```
public void startServer()
    {
        try
        {
            server = new ServerSocket(port);
            while (true)
            {
                s = server.accept();
                conversationBox.appendText("Client connected from " + s.getLocalAddress().getHostName() + "\n");    
            }
        }
        catch (Exception e)
        {
            conversationBox.appendText("An error occurred.\n");
            e.printStackTrace();
            isServer = false;
            reEnableAll();
        }

    } 
```

最后，这是我获取数据并（尝试）将其写入输出流的 actionPerformed 部分：

```
 if (o == sendButton || o == inputBox)
    {
        if(inputBox.getText() != "")
        {
            out.println(inputBox.getText());
            inputBox.setText("");
        }
    } 
```

我想我的问题是：如何重新安排我的方法，以便服务器可以等待来自客户端的文本，然后将其发送回所有客户端？而且，如何将文本从客户端发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:59:46.457

这段代码的问题包括：

1.  您不断创建客户端和服务器。当然，您应该只做一个吗？

2.  您正在事件线程上执行阻塞网络操作，而不是在单独的线程中。

3.  您正在通过 while (true) ... if in.hasNext() 在 EOS 上循环。这应该是 while (in.hasNext()) ...

4.  您正在接受一个套接字，但显然没有对它做任何事情。看起来您一次只能处理一个客户。您应该启动一个新线程来处理每个接受的套接字。

# php - 在第二个页面上使用 jquery 自动提交将数据作为 POST 传递回当前页面

> ID：13675282
> 
> 赞同：0
> 
> 时间：2012-12-02T23:47:28.647
> 
> 标签：php, jquery, forms, submit

我有一个页面显示给定年份的数据。

我想通过下拉菜单向用户提出一个简单的问题，例如“您希望看到哪一年”。

数据集（从数据库调用）由单个变量定义`$year`。

我目前的解决方案是作为用户在表单中提出问题：

```
<form id="year" method="post" action="processing.php">  
    <select name="year" >
        <option value="2011">2011</option>
        <option value="2012" selected>2012</option>
        <option value="2013">2013</option>
    </select>
    <input type="submit" value="View Year" />

</form> 
```

页面 processing.php 有一个由 POST 数据填充的隐藏字段，`$_POST['year']`并自动将其提交回原始页面，原始页面又通过从 processing.php 新接收的 POST 数据定义变量 $year

processing.php 页面上的代码：

```
$year=$_POST['year'];

echo '
<div class="hide" >
    <form id="year" method="post" action="original_page.php">
        <input name="year" value="'.$year.'" />
        <input type="submit" onload="submitForm()" />
    </form>
</div>  

<script>
    function submitForm()
    {
     document.year.submit();
    }
</script>
'; 
```

问题1：这是实现这一目标的明智方式吗，我可以做一些更优雅的事情吗？

问题 2：它不起作用 - 第二页在加载时不会将我转发回第一页，我的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:23:34.227

我认为您正在谈论的*优雅*`AJAX`方法称为. 它将允许您从服务器检索数据，而无需切换页面。

请参阅：[您的代码通过 jQuery $.get 实现 AJAX](http://jsfiddle.net/devlshone/s5kmc/1/)

当然，现在您的`processing.php`脚本将需要检索您要显示的数据并以 HTML 格式返回，以便`$.get`回调可以将其放入**retrieved_contents** div。

# php - 使用 php 变量传递 exec 命令

> ID：13675294
> 
> 赞同：0
> 
> 时间：2012-12-02T23:49:17.907
> 
> 标签：php, shell, unix, exec, shell-exec

我已经搜索并搜索了此问题的答案，但所引用的所有内容都没有关于我的问题的任何有用信息。我正在尝试向我拥有的进程发送终止信号，以使频道跳过当前歌曲。需要运行的命令是：kill -10 PID

请注意：$pid2（下）将保存进程 ID 的真实值

你可以看到我已经拥有的：

```
$pid1 = explode(" ", $pid[0]);
$pid2 = $pid1[3];
$next = shell_exec("kill -10" . "$pid2"); 
```

这是我发现的解决方案，但是在传递 kill 命令时会引发以下错误：

sh：1：语法错误：重定向意外

好心提醒..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:51:33.957

也许你忘记了一个空间？

```
$next = shell_exec("kill -10 " . $pid2); 
```

# python - 如何克服 TypeError: unhashable type: 'list'

> ID：13675296
> 
> 赞同：144
> 
> 时间：2012-12-02T23:49:20.967
> 
> 标签：python, list, dictionary, typeerror

我正在尝试获取如下所示的文件：

```
AAA x 111
AAB x 111
AAA x 112
AAC x 123
... 
```

并使用字典使输出看起来像这样

```
{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...} 
```

这是我尝试过的

```
file = open("filename.txt", "r") 
readline = file.readline().rstrip()
while readline!= "":
    list = []
    list = readline.split(" ")
    j = list.index("x")
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip() 
```

我不断得到一个`TypeError: unhashable type: 'list'`. 我知道字典中的键不能是列表，但我试图将我的值变成列表而不是键。我想知道我是否在某个地方犯了错误。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-03T00:01:40.850

如其他答案所示，错误是由于`k = list[0:j]`，您的密钥被转换为列表。您可以尝试的一件事是修改代码以利用该`split`功能：

```
# Using with ensures that the file is properly closed when you're done
with open('filename.txt', 'rb') as f:
  d = {}
  # Here we use readlines() to split the file into a list where each element is a line
  for line in f.readlines():
    # Now we split the file on `x`, since the part before the x will be
    # the key and the part after the value
    line = line.split('x')
    # Take the line parts and strip out the spaces, assigning them to the variables
    # Once you get a bit more comfortable, this works as well:
    # key, value = [x.strip() for x in line] 
    key = line[0].strip()
    value = line[1].strip()
    # Now we check if the dictionary contains the key; if so, append the new value,
    # and if not, make a new list that contains the current value
    # (For future reference, this is a great place for a defaultdict :)
    if key in d:
      d[key].append(value)
    else:
      d[key] = [value]

print d
# {'AAA': ['111', '112'], 'AAC': ['123'], 'AAB': ['111']} 
```

请注意，如果您使用的是 Python 3.x，则必须稍作调整才能使其正常工作。如果您使用 . 打开文件`rb`，则需要使用`line = line.split(b'x')`（这确保您使用正确类型的字符串拆分字节）。您也可以使用`with open('filename.txt', 'rU') as f:`（甚至`with open('filename.txt', 'r') as f:`）打开文件，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2018-07-16T10:32:40.187

> **注意：** 此答案未明确回答所提出的问题。其他答案做到了。由于问题是特定*于场景*的并且引发的**异常是一般**的，这个答案指向一般情况。

哈希值只是用于在字典查找过程中快速比较字典键的整数。

在内部，`hash()`方法调用`__hash__()`默认为任何对象设置的对象的方法。

### 将*嵌套列表转换为集合*

```
>>> a = [1,2,3,4,[5,6,7],8,9]
>>> set(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list' 
```

发生这种情况是因为列表中的列表是无法散列的列表。这可以通过*将内部嵌套列表转换为 tuple*来解决，

```
>>> set([1, 2, 3, 4, (5, 6, 7), 8, 9])
set([1, 2, 3, 4, 8, 9, (5, 6, 7)]) 
```

### 显式散列*嵌套列表*

```
>>> hash([1, 2, 3, [4, 5,], 6, 7])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list'

>>> hash(tuple([1, 2, 3, [4, 5,], 6, 7]))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list'

>>> hash(tuple([1, 2, 3, tuple([4, 5,]), 6, 7]))
-7943504827826258506 
```

> **避免此错误的解决方案是将列表重构为具有嵌套元组而不是列表。**

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-12-02T23:52:14.453

您正在尝试使用`k`（这是一个列表）作为`d`. 列表是可变的，不能用作字典键。

此外，由于这一行，您永远不会初始化字典中的列表：

```
if k not in d == False: 
```

应该是：

```
if k not in d == True: 
```

实际上应该是：

```
if k not in d: 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-03T02:22:20.700

您收到`unhashable type: 'list'`异常的原因是因为`k = list[0:j]`设置`k`为列表的“切片”，从逻辑上讲，它是另一个列表，通常更短。你需要的是得到列表中的第一项，像这样写`k = list[0]`。从调用返回的列表的第三个元素`v = list[j + 1:]`应该是相同的。`v = list[2]``readline.split(" ")`

我注意到代码还有其他几个可能的问题，我将在其中提到一些。一个重要的问题是您不想（重新）初始化循环`d`中`d = {}`读取的每一行。另一个是，将变量命名为与任何内置类型相同的名称通常不是一个好主意，因为它会阻止您在需要时访问它们中的一个——而且这会让习惯于指定这些标准项目之一的名称。出于这个原因，您应该将变量`list`变量重命名为不同的名称，以避免出现此类问题。

这是您的工作版本，其中包含这些更改，我还替换了`if`您用来检查键是否已经在字典中的语句表达式，现在使用字典的[`setdefault()`](https://docs.python.org/3/library/stdtypes.html#dict.setdefault)方法更简洁地完成相同的事情。

```
d = {}
with open("nameerror.txt", "r") as file:
    line = file.readline().rstrip()
    while line:
        lst = line.split() # Split into sequence like ['AAA', 'x', '111'].
        k, _, v = lst[:3]  # Get first and third items.
        d.setdefault(k, []).append(v)
        line = file.readline().rstrip()

print('d: {}'.format(d)) 
```

输出：

```
d: {'AAA': ['111', '112'], 'AAC': ['123'], 'AAB': ['111']} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-09-04T21:16:22.760

这背后的原因是列表包含值列表。像：

```
a = [[1,2],[1,2],[3,4]] 
```

这不适用于这样的事情：

```
list(set(a)) 
```

要解决此问题，您可以将内部列表转换为元组，例如：

```
a = [(1,2),(1,2),(3,4)] 
```

这会奏效！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T23:55:46.887

`TypeError`发生这种情况是`k`因为它是一个列表，因为它是使用来自另一个列表的切片创建的，带有 line `k = list[0:j]`。这可能应该是类似的`k = ' '.join(list[0:j])`，所以你有一个字符串。

除此之外，`if`正如杰西的回答所指出的那样，您的陈述是不正确的，应该阅读`if k not in d`或`if not k in d`（我更喜欢后者）。

`d = {}`由于您在循环内部，因此您还在每次迭代中清除字典`for`。

请注意，您也不应该使用`list`or`file`作为变量名，因为您将屏蔽内置函数。

以下是我将如何重写您的代码：

```
d = {}
with open("filename.txt", "r") as input_file:
    for line in input_file:
        fields = line.split()
        j = fields.index("x")
        k = " ".join(fields[:j])
        d.setdefault(k, []).append(" ".join(fields[j+1:])) 
```

上面的`dict.setdefault()`方法替换了`if k not in d`代码中的逻辑。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-03T14:59:51.117

```
 python 3.2

    with open("d://test.txt") as f:
              k=(((i.split("\n"))[0].rstrip()).split() for i in f.readlines())
              d={}
              for i,_,v in k:
                      d.setdefault(i,[]).append(v) 
```

# gcc - GCC：为字符串输出定制 printf

> ID：13675300
> 
> 赞同：2
> 
> 时间：2012-12-02T23:49:27.760
> 
> 标签：gcc, printf

GCC[允许定制 printf 说明符。](http://www.gnu.org/software/libc/manual/html_node/Customizing-Printf.html)但是，我看不到如何“教”它接受我的字符串类作为`%s`说明符。我的字符串类是对 char 指针的简单包装，并且只有一个成员变量（char * 数据）并且没有虚函数。因此，可以将它按原样传递给类似 printf 的函数来代替 regular `char *`。问题是在 gcc 静态分析器上阻止我这样做，我必须明确地转换它`const char *`以避免警告或错误。

我的 cstring 看起来像这样：

```
class cstring
{
   cstring() : data(NULL){}
   cstring(const char * str) : data(strdup(str)){}
   cstring(const cstring & str) : data(strdup(str.data)){}
   ~cstring()
   {
        free(data);
   }
   ...
   const char * c_str() const
   {
        return data;
   }

private:
   char * data;
}; 
```

使用 cstring 的示例代码：

```
cstring str("my string");
printf("str: '%s'", str); 
```

在 GCC 上，我收到此错误：
错误：无法通过 '...' 传递非平凡可复制类型 'class cstring' 的对象
错误：格式 '%s' 需要类型为 'char*' 的参数，但参数 1 具有类型'cstring' [-Werror=format]
cc1plus.exe：所有警告都被视为错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:05:03.300

C++ 标准不要求编译器支持这种代码，而且并非所有版本的 gcc 都支持它。（[https://gcc.gnu.org/onlinedocs/gcc/Conditionally-supported-behavior.html](https://gcc.gnu.org/onlinedocs/gcc/Conditionally-supported-behavior.html)建议 gcc-6.0 至少可以 - 一个悬而未决的问题，它是否可以与这里的类一起使用。）

C++11 标准中的相关部分是 5.2.2 第 7 节：

> 当给定参数没有参数时，参数以这样一种方式传递，即接收函数可以通过调用 va_arg 来获取参数的值...传递具有潜在评估的类类型（第 9 条）的参数非平凡的复制构造函数、非平凡的移动构造函数或非平凡的析构函数，没有相应的参数，由实现定义的语义有条件地支持。

（但看好的一面：如果你养成了使用的习惯`c_str`，那么至少你不会在使用时/如果你被绊倒`std::string`。）

# java - 我如何知道 Widget 调用 Handler 或 Event？

> ID：13675306
> 
> 赞同：0
> 
> 时间：2012-12-02T23:49:55.630
> 
> 标签：java, gwt, mvp, gwtp

我在我的项目中使用 GWT-Platform，我想检查一下 Widget 调用了什么 Handler，例如 BlurHandler。

我的问题的原因如下。这个 BlurHandler 由四个 TextField 注册。

```
@Override
public void addFormatTextBoxListener(BlurHandler handler) {
    tbAlt.addBlurHandler(handler);
    tbLat.addBlurHandler(handler);
    tbMedida.addBlurHandler(handler);
    tbLong.addBlurHandler(handler);
} 
```

在我的演示者中，我想找到哪个字段（小部件）失去了焦点（BlurEvent 的结果）。

```
getView().addFormatTextBoxListener(new BlurHandler() {
        @Override
        public void onBlur(BlurEvent event) {
            doFormatTextBox();
        }
    });
private void doFormatTextBox() {
    //who called me???
} 
```

当四个 Widget 之一失去焦点时，将调用 doFormatTextBox 方法。但是什么 Widget 失去了焦点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:53:43.313

重新添加事件 API (http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/Event.html) 它看起来好像接缝`Element e1 = event.getTarget()` 然后做`if (e1.equals(widget1.getElement())){//do stuff...}`应该工作。

这是假设 BlurEvent 扩展`com.google.gwt.user.client.Event`，我不完全确定。

# sql-server - 我如何在 C# .NET 中获得短语的相似性

> ID：13675307
> 
> 赞同：2
> 
> 时间：2012-12-02T23:50:01.163
> 
> 标签：sql-server, visual-studio-2010, c#-4.0

我有一个 sql 数据库，其中包含有关新闻标题的数据。例子：

```
id  title
867 MPE consegue inverter julgamento                                                                                                                                                                                                                                
868 Defensoria P blica realiza licita                                                                                                                                                                                                                                     
869 Prefeitos eleitos de todas as partes do Estado                                                                                                                                                                                                                             
870 Inc ndio deixa 80 pessoas desabrigadas                                                                                                                                                                                                                 
871 Carlos Amastha visita parlamentares                                                                                                                                                                                                                    
872 Defensoria P blica requer anula  o                                                                                                                                                                                                
873 Marcelo Miranda diz que n o possui obriga  o                                                                                                                                                                   
874 Ex-assessor diz que Coimbra lhe deu dois cheques 
```

我需要获取每个标题，看看是否还有其他新闻可以谈论同一主题。

我怎么做？我的平台是 .Net 并使用 sql server 2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:53:19.417

您可能希望在此列和/或表上放置全文索引。这是一个复杂的主题，但您可以从这里开始阅读：http: [//msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

# python - 我不能分开工作，我做错了什么？

> ID：13675308
> 
> 赞同：0
> 
> 时间：2012-12-02T23:50:14.370
> 
> 标签：python, python-3.x, split

这是我到目前为止所做的程序的代码。我正在尝试计算 NBA 球员在一个班级项目中的效率。当我在包含所有统计信息的逗号分隔文件上运行程序时，它不是在每个逗号上拆分，而是创建统计文件整行的列表条目。我得到一个索引超出范围错误，或者它将每个字符视为索引点而不是单独的字段。我对此并不陌生，但似乎应该为文件中由该列表的元素分隔的每一行创建一个列表，因此我得到了一个列表列表。我希望我已经让自己明白了。

这是代码：

```
def get_data_list (file_name):
    data_file = open(file_name, "r")
    data_list = []
    for line_str in data_file:

        # strip end-of-line, split on commas, and append items to list
        line_str.strip()       
        line_str.split(',')

        print(line_str)

        data_list.append(line_str)
        print(data_list)                

file_name1 = input("File name: ")
result_list = get_data_list (file_name1)

print(result_list) 
```

我不知道如何发布数据文件供您查看和尝试，但是任何以逗号分隔的数字文件都应该可以使用。

如果有办法将数据文件或电子邮件发送给您，以便您帮助我，我将很乐意这样做。

玻利弗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:14:29.920

字符串是不可变的对象，这意味着您不能就地更改它们。这意味着，对字符串的任何操作都会返回一个新的。现在看看你的代码：

```
line_str.strip()            # returns a string      
line_str.split(',')         # returns a list of strings
data_list.append(line_str)  # appends original 'line_str' (i.e. the entire line) 
```

您可以通过以下方式解决此问题：

```
stripped = line_str.strip()
data = stripped.split(',')
data_list.append(data) 
```

或连接字符串操作：

```
data = line_str.strip().split(',')
data_list.append(data) 
```

# ruby-on-rails - 资产预编译中的 Rails nested_form 文件错误

> ID：13675309
> 
> 赞同：0
> 
> 时间：2012-12-02T23:50:14.553
> 
> 标签：ruby-on-rails, nested-forms, assets, precompile

Rails 告诉我，我在 application.js 中有一些错误

```
$ rake assets:precompile
/usr/bin/ruby1.8 /usr/local/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
Unexpected token: operator (*=) (line: 12013, col: 1, pos: 341357)

Error
    at new JS_Parse_Error (<eval>:1720:22)
    at js_error (<eval>:1728:15)
    at croak (<eval>:2189:17)
    at token_error (<eval>:2196:17)
    at unexpected (<eval>:2202:17)
    at <eval>:2580:17
    at maybe_unary (<eval>:2665:27)
    at expr_ops (<eval>:2692:32)
    at maybe_conditional (<eval>:2696:28)
    at maybe_assign (<eval>:2720:28)
  (in /home/medy75/Dropbox/Ruby/projectManager_login/ProjectManager/app/assets/javascripts/application.js)
Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/usr/bin/ruby1.8 /usr/local/bin/rake asset...]
Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

我的 aplication.js 看起来像这样：

```
#aplication.js
//= require jquery
//
//= require jquery_ujs
//= require twitter/bootstrap
//
//= require_tree .
//
*= require prototype_nested_form
//
//= require jquery_nested_form
//
//= require bootstrap 
```

当我删除这一行时，它告诉它找不到嵌套的表单文件。

编辑：

当我 //= 需要 jquery_nested_form 时，它会这样做：

```
$ rake assets:precompile
/usr/bin/ruby1.8 /usr/local/bin/rake assets:precompile:all RAILS_ENV=production            RAILS_GROUPS=assets
rake aborted!
couldn't find file 'prototype_nested_form'
  (in             /home/medy75/Dropbox/Ruby/projectManager_login/ProjectManager/app/assets/javascripts/applica    tion.js:21)
Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/usr/bin/ruby1.8 /usr/local/bin/rake asset...]
Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:00:48.773

我很确定你的语法是错误的。看看这篇文章：[Rails 3.1 资产管道和手动订购的 Javascript 需要](https://stackoverflow.com/questions/6149961/rails-3-1-asset-pipeline-and-manually-ordered-javascript-requires)

# javascript - 错误 JavaScript 中的行号

> ID：13675313
> 
> 赞同：0
> 
> 时间：2012-12-02T23:50:46.327
> 
> 标签：javascript, jquery, error-handling

我正在寻找一种在抛出的错误中包含行号的方法，即使我必须手动进行 - IE 在这方面很糟糕。由于代码的大小（在闭包编译器的高级优化模式下约为 180kb），这将非常有用。

所有潜在的错误都已经在 try catch 块中得到了很好的处理，实现了自定义错误以抛出良好的相关消息等。当我正在慢慢准备生产时，我想知道你们中是否有人曾经做过这个错误跟踪以及如何跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:33:52.423

我正在使用此事件来捕获任何 JS 错误并将其记录到数据库表中

```
 //Catch all JQuery errors and log into the DB
    window.onerror = function(msg, url, lineNo){
        //Do what you want with the error including line number 
    }; 
```

# javascript - 调用数组中对象的方法

> ID：13675314
> 
> 赞同：1
> 
> 时间：2012-12-02T23:50:46.287
> 
> 标签：javascript, arrays, object

出于某种原因，当对象位于数组中时，我很难调用我创建的对象的方法。

```
var balls = new Array();

balls[0] = new ball(0);
balls[1] = new ball(1);
balls[2] = new ball(2);

function ball(index)
{
    this.index = index;

    this.draw = function() {
        _canvasContext.drawImage(this.img, this.x, this.y, 30, 30);
    }
}
for (var i=0; i<2; i++) {
    balls[i].draw(); 
```

由于某种原因，无法再访问 .draw 方法？我确定我在这里做错了什么，任何帮助将不胜感激。

# ios - 用于 AIR 3.2 的应用程序不适用于 AIR 3.5

> ID：13675327
> 
> 赞同：1
> 
> 时间：2012-12-02T23:52:20.880
> 
> 标签：ios, actionscript-3, flash, air, null

当我按下以前在 AIR 3.2 SDK 中工作的 flash/air 应用程序中的按钮时出现此错误 - 现在已升级到 AIR 3.5 SDK。非常感谢任何帮助。

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at seed_template_fla::MainTimeline/frame7()[seed_template_fla.MainTimeline::frame7:31]
    at flash.display::MovieClip/gotoAndPlay()
    at seed_template_fla::MainTimeline/gotoPage()    [seed_template_fla.MainTimeline::frame1:20]
    at seed_template_fla::MainTimeline/gotoRepro()    [seed_template_fla.MainTimeline::frame1:12] 
```

我正在使用 Mac 上的 Flash CS6 为 iPhone 创建一个应用程序，并使用 Air 3.5 SDK 导出。我还安装了 AIR 3.5 运行时。

该应用程序目前非常简单。当您使用 gotoAndPlay(frameNr) 函数按下按钮时，它基本上会逐帧移动。框架上有一些十六进制可以在单击时更新数字数组。它们也被切换为可见/不可见。

这曾经使用 AIR 3.2 SDK 完美地工作，但我最近从 adobe 下载了 AIR 3.5 SDK 并通过 flash 添加它（帮助>管理 Air SDK）并将其设置为文件>发布设置>目标中的构建目标。

当我切换回 AIR 3.2 SDK 时，该应用程序再次完美运行。

此外，当我使用 AIR 3.5 SDK 将应用程序上传到运行 IOS 5.1 的 iPhone 4S 时，我只看到一个黑屏，有 5 个加载点在闪烁。这也适用于 AIR 3.2 SDK。

这是第 7 帧的代码 最后一行是第 31 行。

```
stop();
techtitle.text = "Select Trait";
techdesc.text = "Spend points to change core stats and other special abilities";
points.visible = false;
techpoints.visible=false;
pointsbalance.text = myPoints.toString();
btn_tech.visible = false;
curTechSelected = null;

trace("set hexes invisible");
for (var j:int = 0; j <= 67; j++) {
    if (hexStatusb[j] == 1) {
        this["btn_hex_"+j+"b"].visible = false;
    }
}

function onBtnHex37bClick(event:MouseEvent):void
{
    techtitle.text = "tech1";
    techdesc.text = "tech1 description"
    techpoints.text = "-2";
points.visible = true;
techpoints.visible=true;
btn_tech.visible = true;
curTechSelected = btn_hex_37b;
curTechSelectedNr = 37;
curTechPoints = 2;
}

trace(this["btn_hex_37b"]);
btn_hex_37b.addEventListener(MouseEvent.CLICK, onBtnHex37bClick); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:31:31.827

好的 - 所以，在尝试了很多事情之后，我弄清楚了为什么会发生这种情况。

解决方案：在运行 AIR 3.5 SDK 时去掉所有 TFL 文本对象

似乎 TFL 文本库在运行时未正确加载。我没有提到的重要一点是我收到了这条警告消息（类似这里[http://forums.adobe.com/thread/825637](http://forums.adobe.com/thread/825637)）内容不会流式传输...预加载的运行时共享库​​是 textLayout_1.0.0。 05... TFL文本

以及输出中的此警告消息

警告：忽略来自[http://fpdownload.adobe.com/pub/swz/crossdomain.xml](http://fpdownload.adobe.com/pub/swz/crossdomain.xml)的策略文件中的“安全”属性。'secure' 属性只允许在 HTTPS 和套接字策略文件中使用。

只需删除所有 TFLText 对象并将它们更改为经典文本即可使应用程序再次正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:55:11.587

@csomakk 好消息。我找到了答案。您可以在 3.5 和 3.6 中发布并拥有您的 TLF 文本。我在我的博客上发表了一篇文章，详细说明了[如何做到这一点](http://curtismorley.com/2013/03/05/app-used-to-work-with-air-3-2-or-3-4-doesnt-work-with-air-3-5-or-3-6)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:17:14.213

开始：错误消息指出某些东西是空的。这意味着程序不知道在哪里寻找它。当您没有创建对象时，可能会发生这种情况 (btn_hex_37b = new MovieClip()); 或者你甚至没有为它创建一个变量。

在给定的行 (btn_hex_37b.addEventListener(MouseEvent.CLICK, onBtnHex37bClick);) 上，只有 btn_hex_37b 可以为空，因为 onBtnHex37bClick 存在，如果不存在，程序将无法编译。

切换到 AIR 3.5 时出现它的原因可能是它以不同的顺序调用了一些创建函数。转到定义 btn_hex_37b 变量的行。搜索调用的函数。确保在转到 frame7 之前创建了 btn_hex_37b。

此外，如果它不是至关重要的，拥有 onBtn_hex_37bClick，您可以执行以下操作：

```
if(btn_hex_37b){
    btn_hex_37b.addEventListener(MouseEvent.CLICK, onBtnHex37bClick);
} 
```

if 将检查 btn_hex_37b 是否不为空。在 else 方法上，您可以提供一个超时的方法（但这很难看），或者在创建对象后立即提供事件监听器。

希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T11:40:45.710

对于 Flash CS6，复制此 swc：/Applications/Adobe Flash CS6/Common/Configuration/ActionScript 3.0/libs/flash.swc

使用以下步骤进入我的 Flash Builder 项目：http: [//interactivesection.files.wordpress.com/2009/06/include_fl_packages_in_flex_builder-1.jpg](http://interactivesection.files.wordpress.com/2009/06/include_fl_packages_in_flex_builder-1.jpg)

然后使用此链接 [http://curtismorley.com/2013/03/05/app-used-to-work-with-air-3-2-or-3-4-doesnt-work-with-air-3 -5-或-3-6/#comment-241102](http://curtismorley.com/2013/03/05/app-used-to-work-with-air-3-2-or-3-4-doesnt-work-with-air-3-5-or-3-6/#comment-241102)

# java - 将语句和字符串转换为字节

> ID：13675330
> 
> 赞同：2
> 
> 时间：2012-12-02T23:52:36.370
> 
> 标签：java, class, byte, switch-statement

`byte color`必须保持颜色（如红色或绿色）。方法的结果`show()`必须使用开关来分类和描述这种颜色（在不同的变体中，如：红蓝、绿红等）*不能使用枚举

```
public class Candy {

    //fields
    int quantity;
    byte color;
    double price;

    //constructor
    Candy(int quantity, byte color, double price)
    {
        this.quantity = quantity;
        this.color = color;
        this.price = price;
    }

    //this method have to show class fields
        public void show(String colors) 
    {
        switch(color)
        {
        case 1: colors = "red";
        case 2: colors = "green";
        case 3: colors = "blue";
    }

            //tried to convert 
    //String red = "Red";
    //byte[] red1 = red.getBytes();
    //String green = "Green";
    //byte[] green1 =  green.getBytes();

    public static void main(String[] args)
    {
    //program   
    }
} 
```

我走的好吗？如何将字符串保存在字节中？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:17:56.670

switch 不是一个好的选择，因为`break`在每种情况下都需要一个 switch，这使得很多代码做的很少：

```
switch (color) {
   case 1: colors = "red"; break;
   ... etc 
```

此外，有这么多行意味着有更多的错误空间。但更糟糕的是，您实际上是在使用代码来存储数据。

更好的选择是使用 Map 并查找字符串：

```
private static Map<Byte, String> map = new HashMap<Byte, String>() {{
    put(1, "red");
    put(2, "green");
    etc
}}; 
```

然后在你的方法中

```
return map.get(color); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:34:06.157

在一个`byte`中，您可以存储 8 种可能的组合。在我的决定中，我声明第一个位置（字节的二进制表示）是“蓝色”，第二个 - “绿色”，第三个 - “红色”。这意味着如果我们有`001`- 它是蓝色的。如果`101`- 它的红蓝色等等。这是你的`show()`方法：

```
public void show() 
{
    switch (color & 4){
        case 4:
            System.out.print("red ");
        default:
            switch (color & 2){
                case 2:
                    System.out.print("green ");
                default:
                    switch (color & 1){
                        case 1:
                            System.out.print("blue");
                    }
            }
    }
    System.out.println();
} 
```

方法调用：

```
new Candy(1, (byte)7, 10d).show(); //prints "red green blue" 
```

# javascript - ul li a 影响 ul li ul li a

> ID：13675331
> 
> 赞同：0
> 
> 时间：2012-12-02T23:52:37.307
> 
> 标签：javascript, jquery, css, drop-down-menu, menu

如果标题难以理解，让我解释一下...

我有一个 css / jquery 切换菜单。当你按“+”号时，它会变大，当你按“-”号时，它会变小。我在切换/单击时更改了几个元素的填充、边距和高度。菜单顶部充满了链接，然后当您将鼠标悬停在链接上时，它会显示更多子链接。顶部的主要链接使用 css 代码：

```
/*Top level menu link items style*/
.jquerycssmenu ul li a{
    display: block;
    background: none; /*background of tabs (default state)*/
    padding: 5px 18px 32px 18px;
    margin-right: 3px; /*spacing between tabs*/
    color:#fff;
    text-decoration: none;
} 
```

子菜单使用这个 CSS 代码：

```
/* Sub level menu links style */
.jquerycssmenu ul li ul li a{
    font: normal 13px Verdana;
    width: 320px; /*width of sub menus*/
    height:60px;
    background: black;
    color: white;
    margin: 0;
    border-top-width: 0;
    border-bottom: 1px solid #2c2c2c;
    padding:20px 0px 0 20px;
} 
```

我已经设置了 JQuery，所以子菜单填充通过切换缩小......我这样做了：

```
$(document).ready(function(){   
  $('.gh-gallink').toggle(
    function() {
    $('.jquerycssmenu ul li ul li a').animate({
      height: "40px",
      padding: "10px 0px 0 20px"
    }, 100);
    $(this).text('+');
  },

  function() {
    $('.jquerycssmenu ul li ul li a').animate({
      height: "60px",
      padding: "20px 0px 0 20px"
    }, 100);
    $(this).text('-');

  });
}); 
```

这工作得很好！然后我尝试在 JQuery 中输入主菜单 (.jquerycssmenu ul li a) 我这样做了：

```
$(document).ready(function(){   
  $('.gh-gallink').toggle(
    function() {
    $('.jquerycssmenu ul li ul li a').animate({
      height: "40px",
      padding: "10px 0px 0 20px"
    }, 100);
    $('.jquerycssmenu ul li a').animate({
      paddingBottom: "8px"
    }, 100);
    $(this).text('+');
  },

  function() {
    $('.jquerycssmenu ul li ul li a').animate({
      height: "60px",
      padding: "20px 0px 0 20px"
    }, 100);
    $('.jquerycssmenu ul li a').animate({
      paddingBottom: "32px"
    }, 100);
    $(this).text('-');

  });
}); 
```

出于某种原因，`ul li a`（主菜单）会影响`ul li ul li a`（子菜单）。切换菜单后，`padding-bottom`主菜单的子菜单的 ..`32px`什么时候变大`8px`什么时候变小.. 什么时候`padding-bottom`应该`0px`变大`0px`什么时候变小，就像上面列出的一样。

为什么`ul li a`（主菜单链接）会影响`ul li ul li a`（子菜单链接）？以及如何解决这个 CSS / JQuery 问题，以便主菜单链接不会影响子菜单链接。

**只是一个简短的说明：** *我可以成功地编辑`ul li a`代码而不会影响`ul li ul li a`代码..在 CSS 中。只是当我将代码应用到 JQuery 时，事情就搞砸了。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:57:23.837

你应该使用这个：

```
`.jquerycssmenu > ul > li > a` 
```

而不是这个：

```
`.jquerycssmenu ul li a` 
```

下面是对`>`css 选择器的解释：
[“>”（大于号）CSS 选择器是什么意思？](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:57:59.193

选择器`ul li a`匹配标签中标签`<a>`中任何深度的任何标签——即使，例如，实际上是在外部标签内：`<li>``<ul>``<li>``<ol>``<ul>`

```
<ul>
    <li>
        <ol>
            <li><a>Foo</a></li>
        </ol>
    </li>
</ul> 
```

选择器`ul li`对此标记有两个匹配项，因为其中有两个`<li>`标签`<ul>`。但是，要仅选择直接子元素，您可以使用`>`, 即`ul > li`仅选择第一个`<li>`元素而不选择第二个元素，因为该元素不是`<ul>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T23:58:36.617

`p span`表示查找`span`位于元素内的`p`元素，无论它是否是直接后代。

这就是为什么，`ul li a`也影响`a`像这样嵌套的一个：`ul > li > ul > li > a`.

您应该使用子选择器`ul > li > a`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T00:00:11.417

选择器的`ul li a`意思是“an`a`是 an 的后代，`li`它是 a 的后代`ul`。只要 an`a`有一个`li`and`ul`作为祖先，它就会应用。要仅选择直接子代，请使用`>`运算符。所以`.jquerycssmenu > ul > li > a`and `.jquerycssmenu > ul > li > ul > li > a`，或类似的东西。

# regex - 正则表达式匹配所有数字、字母和标点符号？

> ID：13675336
> 
> 赞同：3
> 
> 时间：2012-12-02T23:53:00.257
> 
> 标签：regex, .htaccess

我想要一个可以匹配所有数字、字母和所有标点符号的正则表达式（句号、逗号、问号、感叹号、冒号等）。

字符串必须至少有一个字符长，但可以是任何以上的长度。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:02:28.463

尝试`\\p{Graph}+`或`\\p{Print}+`

```
@Test
public void shouldMatch()
{
    assertTrue("asdf123ASFD!@#$%^&*()".matches("\\p{Graph}+"));
}

@Test
public void shouldMatchWithWhitespaces()
{
    assertTrue("asdf 123 ASFD !@#$%^&*()".matches("[\\p{Graph}\\s]+"));
} 
```

您可以在此处获取更多信息（部分：POSIX 字符类（仅限 US-ASCII））：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:59:45.933

如果我理解得很好，那应该很容易。请试试：

```
([^\s]+) 
```

此正则表达式匹配任何字符的一次或多次出现，但不匹配空格。这是匹配（和重用）任何字符串的最简单方法。也许您已经知道括号在正则表达式中的含义。它们用于反向引用，即稍后重用匹配的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T00:02:53.720

从查看字符类开始

[http://www.regular-expressions.info/charclass.html](http://www.regular-expressions.info/charclass.html)

一个例子：

```
[A-Za-z_0-9]* 
```

将匹配任何带有 ascii 标准字母和下划线的内容。

您可以将所需的标点符号添加到集合中。

您可以使用 \w 匹配任何单词字符，并且根据您使用的正则表达式实现，它也可能匹配 unicode 字符。

另一种方法是决定你不想匹配什么。如果要匹配不是空格的字符串，可以使用

```
\S* 
```

# matlab - 数据分析：获取对应值到另一列

> ID：13675341
> 
> 赞同：1
> 
> 时间：2012-12-02T23:53:27.840
> 
> 标签：matlab, analysis

我在**Matlab**中进行数据分析，我有两列。我正在使用 find(column1>0) 来查找数据集中第一列的正值。现在，我想绘制（column1，column2），但这当然是不可能的，因为大小不一样。问题：

如何为 column1 中的正值获取 column2 中的相应值？比如，如果第 17 行和第 42 行在 column1 中具有正值，我如何在 column2 中找到第 17 行和第 42 行的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:12:49.480

您正在做的事情的术语是[索引](http://www.mathworks.com/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)。您*可以*使用`find`，它会生成线性索引，但在这种情况下您不应该这样做。逻辑索引更合适。

```
index = column1 > 0; #% creates a logical index with true where the  
#% condition is satisfied and false otherwise.

values1 = column1(index);
values2 = column2(index);
#% values1 and values2 will be the same size, since they were indexed the same

plot(values1,values2); #% or however you want to do it. 
```

# tags - 在 Aptana Studio 3 中 ?> 之后的缩进问题

> ID：13675344
> 
> 赞同：1
> 
> 时间：2012-12-02T23:53:48.883
> 
> 标签：tags, pydev

格式在 Aptana studio 3 中给我带来了问题，这就是我想要的。

```
<?php
if (condition) {
    if (condition) {
        if (condition) {
            if (condition) {
            } else {
                if (condition) {                    
                    ?>
                        <!--a block of html code would go here
                        a block of html code would go here
                        a block of html code would go here
                        a block of html code would go here
                        a block of html code would go here
                        -->                 
                    <?php

                }
            }
        }
    }
} else {
}
?> 
```

但是，格式化后，我得到了：

```
<?php
if (condition) {
    if (condition) {
        if (condition) {
            if (condition) {
            } else {
                if (condition) {                    

?>
<!--a block of html code would go here
a block of html code would go here
a block of html code would go here
a block of html code would go here
a block of html code would go here
-->
<?php
}
}
}
}
} else {
}
?> 
```

看起来格式化程序遇到了我从 php 出来输入 html 的问题，但是我不想使用 echo，因为 html 很多。

Netbeans 处理这个罚款。如何在 Aptana Studio 中解决此问题？

谢谢

# codeigniter - Codeigniter“未使用表”，get_where()

> ID：13675345
> 
> 赞同：0
> 
> 时间：2012-12-02T23:53:53.350
> 
> 标签：codeigniter, get, where

所以，我正在尝试创建一个删除帖子的函数，并将值插入名为“removed_post”的表中。现在，我得到了错误：

```
No tables used
SELECT *
Line Number: 330 
```

这是什么原因造成的？我已经用谷歌搜索了很多，并尝试了不同的“答案”，但没有任何成功。

这是我的代码：

```
class Remove extends CI_Controller {

function post($id = null) {

$this->db->get_where('comments', array('id' => $id));
$query = $this->db->get();
$data = array(
'amne_id' => $query->row()->amne_id,
'user_id' => $query->row()->user_id,
'date_created' => $query->row()->date,
            );
 $this->db->insert('removed_post', $data);
 $this->db->delete('comments', array('id' => $id));
 redirect('/');
} 
```

编辑：是的，代码没有优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:55:24.843

```
$this->db->get_where('comments', array('id' => $id));
$query = $this->db->get(); 
```

应该：

```
$query = $this->db->get_where('comments', array('id' => $id)); 
```

在您的代码中，第一个查询已运行，​​但您没有捕获结果。第二行尝试捕获空白查询的结果。`get_where()`调用`get()`你，所以你不必明确地调用它。

**新错误**

```
$row = $query->row();
$data = array(
  'amne_id' => $row->amne_id,
  'user_id' => $row->user_id,
  'date_created' => $row->date,
); 
```

# java - 将字符串转换为字节时 addr 的长度非法

> ID：13675346
> 
> 赞同：0
> 
> 时间：2012-12-02T23:53:57.060
> 
> 标签：java, ping

我正在为一个朋友写一个游戏（我的世界）的模组。要执行 mod 的指定功能，我需要确保在一定时间内可以访问服务器，我使用 InetAddress 来执行此操作，但每次使用命令时都会出现此错误

```
2012-12-02 18:45:53 [INFO] [STDERR] java.net.UnknownHostException: addr is of illegal length
2012-12-02 18:45:53 [INFO] [STDERR]     at java.net.InetAddress.getByAddress(Unknown Source)
2012-12-02 18:45:53 [INFO] [STDERR]     at java.net.InetAddress.getByAddress(Unknown Source)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.CommandServSwitch.processCommand(CommandServSwitch.java:40)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.CommandHandler.executeCommand(CommandHandler.java:81)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.NetServerHandler.handleSlashCommand(NetServerHandler.java:715)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.NetServerHandler.handleChat(NetServerHandler.java:681)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.Packet3Chat.processPacket(Packet3Chat.java:60)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.MemoryConnection.processReadPackets(MemoryConnection.java:79)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.NetServerHandler.networkTick(NetServerHandler.java:82)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.NetworkListenThread.networkTick(NetworkListenThread.java:55)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.IntegratedServerListenThread.networkTick(IntegratedServerListenThread.java:111)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.server.MinecraftServer.updateTimeLightAndEntities(MinecraftServer.java:696)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.server.MinecraftServer.tick(MinecraftServer.java:592)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.IntegratedServer.tick(IntegratedServer.java:110)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:499)
2012-12-02 18:45:53 [INFO] [STDERR]     at net.minecraft.src.ThreadMinecraftServer.run(ThreadMinecraftServer.java:17) 
```

产生此错误的方法（以及您需要知道的所有代码）：

```
 @Override
public void processCommand(ICommandSender var1, String[] var2) {
    if(var2.length < 1 || var2.length > 3) {
            throw new WrongUsageException("command.switch.usage", new Object[0]);
    }
    else {
             servport = Integer.parseInt(var2[1]);

            boolean ping = false;
            try {
                InetAddress IP = InetAddress.getByAddress(var2[0].getBytes());
                ping = IP.isReachable(400);
            } catch(UnknownHostException e) {
                e.printStackTrace();
            } catch(IOException e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:01:34.040

[getByAddress](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29)的文档说：“返回**给定原始 IP 地址**的 InetAddress 对象。参数**按网络字节顺序排列**：地址的最高顺序字节在 getAddress()[0] 中。”

```
 InetAddress IP = InetAddress.getByAddress(var2[0].getBytes()); 
```

这行代码没有任何意义。该字符串不是函数要求的网络字节顺序的原始 IP 地址。否则，它将恰好是四个字节长。

您需要调用[InetAddress.getByName](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29)从文本字符串转换`foo.domain.com`为`1.2.3.4`内部二进制格式。

# objective-c - 更改 Cocoa 中窗口的背景

> ID：13675350
> 
> 赞同：3
> 
> 时间：2012-12-02T23:54:26.950
> 
> 标签：objective-c, macos, cocoa

Objective-C/Cocoa 菜鸟在这里。我想在我正在制作的白色小 Mac 应用程序中制作窗口颜色，而不是默认的浅灰色。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T00:06:32.943

从 AppDelegate 您可以简单地调用该`window`属性

```
self.window.backgroundColor = [NSColor whiteColor]; 
```

否则，您可以从应用程序的任何一点调用

```
[[NSApplication sharedApplication] keyWindow].backgroundColor = [NSColor whiteColor]; 
```

`keyWindow`是当前的“顶部”窗口，如果应用程序很简单，它可能是唯一的窗口。对于需要不同窗口的更复杂的场景，您可以使用

```
[[NSApplication sharedApplication] windows] 
```

这将返回应用程序拥有的所有窗口的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:10:33.067

在 AppDelegate.m 中，您只需添加以下行即可更改窗口颜色：

```
self.window.backgroundColor = [NSColor whiteColor]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T04:33:01.707

在窗口属性中的界面构建器中启用纹理现在您可以使用自己的颜色设置整个窗口。然后你可以设置你的窗口颜色

```
[self.window setBackgroundColor:[NSColor redColor]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T12:48:32.207

试试这个代码，

```
-(void) awakeFromNib
{
    NSColor *red = [NSColor redColor];
    self.view.window.backgroundColor = red;
} 
```

# .htaccess - 删除/重定向部分 url 字符串 (.htaccess)

> ID：13675358
> 
> 赞同：2
> 
> 时间：2012-12-02T23:55:12.150
> 
> 标签：.htaccess, redirect

我有一些重复的网址，其中一些部分我想删除（重定向）。

例如：[http ://www.mydomain.dk/tryksager?pop=0](http://www.mydomain.dk/tryksager?pop=0)

我想删除`?pop=0`和 301 重定向到：[http ://www.mydomain.dk/tryksager](http://www.mydomain.dk/tryksager)

这样 google 就不会使用`?pop=0`. 它需要在包含该`?pop=0`部分的所有页面上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:21:46.837

尝试仅删除查询字符串，如下所示：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^pop.*$ 
RewriteRule (.*)  http://www.mydomain.dk/tryksager? [L] 
```

它可以是`pop`或任何其他标签。不过，定义它很重要。否则它将删除所有查询。

**更新：**

假设`pop`是常数，试试这个：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^pop.*$ 
RewriteRule ^(.*)$   http://www.mydomain.dk/$1? [L] 
```

# jquery-mobile - 在 JQuery Mobile 对话框中选中和取消选中复选框

> ID：13675364
> 
> 赞同：9
> 
> 时间：2012-12-02T23:55:28.547
> 
> 标签：jquery-mobile, checkbox, dialog

我尝试了这段代码来实现我想做的事情。当我在我的普通 HTML 文件中尝试它时它可以工作，但是当我在我的 JQuery Mobile 页面中尝试它时，代码对我来说效果不佳。是否有不同的方法或代码来选择 JQuery Mobile 复选框？

这是我尝试过的代码：

JAVASCRIPT：

```
<script>
function SetAllCheckBoxes(FormName, FieldName, CheckValue)
{
    if(!document.forms[FormName])
        return;
    var objCheckBoxes = document.forms[FormName].elements[FieldName];
    if(!objCheckBoxes)
        return;
    var countCheckBoxes = objCheckBoxes.length;
    if(!countCheckBoxes)
        objCheckBoxes.checked = CheckValue;
    else
        // set the check value for all check boxes
        for(var i = 0; i < countCheckBoxes; i++)
            objCheckBoxes[i].checked = CheckValue;
} 
```

HTML

```
<form method="GET" name="myForm" onsubmit="return false;">
<label for="myCheckbox1">
    <input type="checkbox" name="myCheckbox" value="1" id="myCheckbox1">
    I like Britney Spears 
</label>
<br>

<label for="myCheckbox2"><input type="checkbox" name="myCheckbox" value="2" id="myCheckbox2">
    I like Hillary Duff
</label>
<br>

<label for="myCheckbox3"><input type="checkbox" name="myCheckbox" value="3" id="myCheckbox3">
    I like Mandy Moore 
</label>
<br>

<input type="button" onclick="SetAllCheckBoxes('myForm', 'myCheckbox', true);" value="I like them all!">
&nbsp;&nbsp;
<input type="button" onclick="SetAllCheckBoxes('myForm', 'myCheckbox', false);" value="I don't like any of them!"> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-05T21:53:47.327

我不知道 JQuery Mobile 的复选框在通过 JQuery 或 Javascript 取消选中/选中它们后需要刷新。这是代码：

```
$("input[type='checkbox']").attr("checked",true).checkboxradio("refresh"); 
```

[http://api.jquerymobile.com/checkboxradio/#method-refresh](http://api.jquerymobile.com/checkboxradio/#method-refresh)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T12:47:05.390

尝试这个：

```
function SetAllCheckBoxes(FormName, CheckValue){
    $.each($("#"+FormName+" input[type=checkbox]"), function(){
        $(this).attr("checked",CheckValue).checkboxradio("refresh");
    });
} 
```

我删除了 FieldName 因为你的函数被命名为 SetAllCheckBoxes，只是你的输入字段是一样的。你只需要告诉你的表单是什么以及你的复选框的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-24T11:02:06.413

要在 jquery mobile 中切换/刷新复选框，您需要使用 .prop，而不是 .attr。

`$("input[type='checkbox']").prop("checked",true).checkboxradio("refresh");`

# c# - Desk.com 和 RestSharp (oAuth)

> ID：13675365
> 
> 赞同：1
> 
> 时间：2012-12-02T23:55:29.373
> 
> 标签：c#, oauth, restsharp

这感觉应该很容易，但......它不是。Desk.com 没有库绝对无济于事，而且文档（在我看来）非常薄而且缺乏。

无论如何，我正在尝试使用 RestSharp 做一些简单的事情：抓取最近的案例。我正在使用单一访问令牌方法，因为我们不需要像我们的任何用户一样进行交互。

这是代码：

```
 var client = new RestClient();
        client.Authenticator = RestSharp.Authenticators.OAuth1Authenticator.ForProtectedResource("key","secret","token","token secret");
        client.BaseUrl = "http://xxx.desk.com/api/v1/";

        var request = new RestRequest();
        request.Method = Method.GET;
        request.Resource = "cases.json?count=10&status=new";
        request.RequestFormat = DataFormat.Json;

        var result = client.Execute(request); 
```

结果总是说身份验证请求无效并且未经授权。尝试了一堆不同的组合，查看了作为 RestSharp 库一部分的测试，并阅读了 Desk.com 文档中的每一个字眼。只是不确定接下来要尝试什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:09:00.527

您可能已经知道这一点，但是当您尝试将查询字符串添加到 RestRequest 的资源时，您会收到未经授权的消息。

我遇到了同样的问题。Daniel 的“account/verify_credentials.json”也对我有用，所以我开始怀疑它是否与查询字符串有关。

```
var request = new RestRequest();
request.Method = Method.GET;
request.Resource = "cases.json";
request.RequestFormat = DataFormat.Json;
request.AddParameter("count", 10);
request.AddParameter("status", "new"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:19:04.907

我只想说，在学习了很多关于使 Desk API 与 C# 一起使用的示例之后，您的实际上是*唯一*有效的示例。

我没有使用您在上面指定的资源进行测试，而是将您的代码与“account/verify_credentials.json”资源一起使用。它为我返回一个 OK 响应，因此您的代码可以正常工作。所以，首先......谢谢你:)

其次（对不起，如果我说的很明显），我假设您没有使用您在此处指定的 ("key", "secret", "token", "token secret") 参数，而是使用有效的参数。您很可能会这样做，但也许您可能已经从其他地方找到并复制了那段代码，并且可能错过了填写您的信息。

编辑：自从我第一次回答以来，我已经组装了一个小型（非常小的）SDK，可用于连接和使用 C# 中的 API。你可以在这里获取源代码：http: [//danielsaidi.github.com/desk-csharp-sdk/](http://danielsaidi.github.com/desk-csharp-sdk/)

希望你让它工作。

# java - java摇摆面板问题

> ID：13675368
> 
> 赞同：0
> 
> 时间：2012-12-02T23:55:55.800
> 
> 标签：java, swing, user-interface

我在向我的主 JFrame 添加面板并立即隐藏它时遇到问题，只有在按下按钮时才使其可见。这是我的代码。寻找有关问题所在的任何见解。我尝试添加到面板的标签也没有显示。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package cis2430_a4;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JMenuBar;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.GridLayout;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
/**
 *
 * @author Tristan
 */
public class MainWindow extends JFrame implements ActionListener{
    public static final int WIDTH = 600;
    public static final int HEIGHT = 700;

    private JPanel addPanel;

public MainWindow()
{
    super("Day Planner");
    setSize(WIDTH, HEIGHT);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());

    JLabel intro1 = new JLabel("Welcome to your Day Planner", JLabel.CENTER);
    add(intro1, BorderLayout.NORTH);

    JLabel intro2 = new JLabel("Please choose an option from the menu bar above.", JLabel.CENTER);
    add(intro2, BorderLayout.CENTER);

    JMenu commands = new JMenu("Commands");

    JMenuItem addOption = new JMenuItem("Add");
    addOption.addActionListener(this);
    commands.add(addOption);

    JMenuItem searchOption = new JMenuItem("Search");
    searchOption.addActionListener(this);
    commands.add(searchOption);

    JMenuBar menuBar = new JMenuBar();
    menuBar.add(commands);
    setJMenuBar(menuBar);

    JButton button = new JButton("Add");
    button.addActionListener(this);
    add(button, BorderLayout.SOUTH);

    //add panel
    addPanel = new JPanel();
    addPanel.setLayout(new BorderLayout());
    addPanel.setSize(600,400);
    addPanel.setBackground(Color.CYAN);
    addPanel.add(new JLabel("add panel"), BorderLayout.CENTER);
    add(addPanel, BorderLayout.CENTER);
    addPanel.setVisible(false);

}

 @Override
 public void actionPerformed(ActionEvent ae)
 {
     /*String menuChoice = ae.getActionCommand();

     if (menuChoice.equals("Add")){
         addPanel.setVisible(true);
     }*/
     add(addPanel);
     //addPanel.setVisible(true);
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:09:40.370

我对你的例子没有意见。

你可能想...

1-确保您已在事件调度线程的上下文中启动您的 UI

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
            }

            MainWindow frame = new MainWindow();
            frame.setVisible(true);
        }
    });
} 
```

2- 尝试`repaint`在`addPanel.setVisible(true)`
3- 之后拨打电话-如果这不起作用，请尝试在此`invalidate`之后`addPanel.setVisible(true)`但之前拨打电话。`repaint`

更好的解决方案是使用[卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)来完成这种工作

**更新**

在花了一些时间阅读代码之后，我认为你似乎担心的是你的“介绍”标签没有出现......

这很容易解释。在 a 中的任何给定位置只能存在一个组件`BorderLayout`，因此当您添加 you 时`addPanel`，即使它是不可见的，它也会破坏`intro2`标签（有效地将其从容器中删除）。

下面是一个使用示例`CardLayout`

```
public class CardWindow extends JFrame implements ActionListener {

    public static final int WIDTH = 600;
    public static final int HEIGHT = 700;
    private JPanel addPanel;

    private JPanel cardPane;
    private CardLayout cardLayout;
    private final JLabel intro2;

    public CardWindow() {
        super("Day Planner");
        setSize(WIDTH, HEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        cardPane = new JPanel((cardLayout = new CardLayout()));
        add(cardPane, BorderLayout.CENTER);

        JLabel intro1 = new JLabel("Welcome to your Day Planner", JLabel.CENTER);
        add(intro1, BorderLayout.NORTH);

        intro2 = new JLabel("Please choose an option from the menu bar above.", JLabel.CENTER);
        cardPane.add(intro2, "intro");

        JMenu commands = new JMenu("Commands");

        JMenuItem addOption = new JMenuItem("Add");
        addOption.addActionListener(this);
        commands.add(addOption);

        JMenuItem searchOption = new JMenuItem("Search");
        searchOption.addActionListener(this);
        commands.add(searchOption);

        JMenuBar menuBar = new JMenuBar();
        menuBar.add(commands);
        setJMenuBar(menuBar);

        JButton button = new JButton("Add");
        button.addActionListener(this);
        add(button, BorderLayout.SOUTH);

        //add panel
        addPanel = new JPanel();
        addPanel.setLayout(new BorderLayout());
        addPanel.setSize(600, 400);
        addPanel.setBackground(Color.CYAN);
        addPanel.add(new JLabel("add panel"), BorderLayout.CENTER);
        addPanel.setVisible(false);
        cardPane.add(addPanel, "Add");

        cardLayout.show(cardPane, "intro");

    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        String menuChoice = ae.getActionCommand();
        System.out.println(menuChoice);
        if (menuChoice.equals("Add")) {
            cardLayout.show(cardPane, "Add");
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                CardWindow frame = new CardWindow();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:00:39.933

标签出现是因为您在框架上添加标签后添加了一个面板，所以基本上面板与标签重叠。还可以显示您可以使用的不同面板

```
 panel.setVisible(true); //For the panel you want to show and false for others 
```

或者您可以使用 CardLayout 将面板作为卡片并一次显示其中一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T00:08:31.687

只是稍微编辑了代码，但它似乎工作 -

![在此处输入图像描述](../Images/094af757002b598ebdf927f9916378a3.png)

```
public class MainWindow extends JFrame implements ActionListener{
    public static final int WIDTH = 600;
    public static final int HEIGHT = 700;

    private JPanel addPanel;

    public static void main(String[] args) {
        MainWindow mainWindow = new MainWindow();
        mainWindow.setVisible(true);
    }
public MainWindow()
{
    super("Day Planner");
    setSize(WIDTH, HEIGHT);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());

    JLabel intro1 = new JLabel("Welcome to your Day Planner", JLabel.CENTER);
    add(intro1, BorderLayout.NORTH);

    JLabel intro2 = new JLabel("Please choose an option from the menu bar above.", JLabel.CENTER);
    add(intro2, BorderLayout.CENTER);

    JMenu commands = new JMenu("Commands");

    JMenuItem addOption = new JMenuItem("Add");
    addOption.addActionListener(this);
    commands.add(addOption);

    JMenuItem searchOption = new JMenuItem("Search");
    searchOption.addActionListener(this);
    commands.add(searchOption);

    JMenuBar menuBar = new JMenuBar();
    menuBar.add(commands);
    setJMenuBar(menuBar);

    JButton button = new JButton("Add");
    button.addActionListener(this);
    add(button, BorderLayout.SOUTH);

    //add panel
    addPanel = new JPanel();
    addPanel.setLayout(new BorderLayout());
    addPanel.setSize(600,400);
    addPanel.setBackground(Color.CYAN);
    addPanel.add(new JLabel("add panel"), BorderLayout.CENTER);
    add(addPanel, BorderLayout.CENTER);
    addPanel.setVisible(false);

}

 @Override
 public void actionPerformed(ActionEvent ae)
 {
     String menuChoice = ae.getActionCommand();

     if (menuChoice.equals("Add")){
         addPanel.setVisible(true);
     }
     add(addPanel);
     //addPanel.setVisible(true);
 }
} 
```

# c# - 命名管道的安全性

> ID：13675369
> 
> 赞同：0
> 
> 时间：2012-12-02T23:56:05.047
> 
> 标签：c#, named-pipes

我想知道使用 System.IO.Pipes（没有 WCF）通过命名管道传输数据的安全性如何

是否需要在数据传输后检查例如 md5 总和，或者为它实现事务可能会更好，如果是这样，是否有任何直接的方法，而不使用 P/Invoke 到 TransactNamedPipe（我猜.net 中没有包装器)?

或者也许 TCP 比命名管道更安全？

编辑：

此外：

我真正想到的是如果服务器或客户端崩溃会发生什么 - 那么交付呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:06:26.447

命名管道为您提供

*   在同一/不同机器上的 2 个进程之间使用 ACL（访问控制列表）的通信通道（与 TCP 不同，您需要自己保护对通道的访问）
*   通道名称（类似于 TCP 端口），但对名称数量基本上没有限制
*   使用 trasactions 提供写入+读取操作，该操作将自动成功/失败（使用 TCP，您需要自己实现此类操作）。

两者都可以保证数据的交付。

# r - 使用 xtable 和 tabular.environment 将 \footnote{} 插入标题

> ID：13675380
> 
> 赞同：6
> 
> 时间：2012-12-02T23:58:37.300
> 
> 标签：r, latex, xtable

我可以控制`add.to.row`命令在表输出标题中`xtable`放置一个吗？`\footnote{}``LaTeX`

这就是我得到它的程度。（我想找到一个使用`xtable`而不是'Hmisc'的解决方案）

```
require(xtable)
x <- matrix(rnorm(60), ncol = 10)
x.big <- xtable(x,label='tabbig', caption='Example of longtable')
names(x.big) <- LETTERS[1:10]
print(x.big,tabular.environment='longtable',floating=FALSE, 
      add.to.row = list(pos = list(seq(1,nrow(x.big), by = 2), 0, 1),
      command = c("\\rowcolor[gray]{.95} ", "\\hline \\endhead ", 
      "\\footnote{This is the first footnote that I would like to have 
      in the headder next to `I'.}") ) ) 
```

然后我在一个小的乳胶文件中使用输出。像这样：

```
\documentclass{article}
\usepackage{longtable} 
\usepackage{colortbl} 
\usepackage[landscape]{geometry}

\begin{document}
I
\vspace{100 mm}

% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Sun Dec  2 15:38:26 2012
\begin{longtable}{rrrrrrrrrrr}
  \hline
 & A & B & C & D & E & F & G & H & I & J \\ 
  \hline \endhead  \hline
1 & 0.57 & -0.21 & 1.11 & 0.15 & -0.47 & 0.77 & 0.26 & 2.08 & 0.65 & -1.62 \\ 
   \rowcolor[gray]{.95}  \footnote{This is the first footnote that I would like to have in the headder next to `I'.}2 & -0.45 & -0.06 & 0.13 & 0.20 & 0.26 & 0.48 & 0.07 & 0.45 & -0.51 & 1.26 \\ 
  3 & -0.23 & -0.68 & 0.17 & -0.92 & -0.44 & -0.43 & -0.63 & 1.84 & 0.08 & 1.21 \\ 
   \rowcolor[gray]{.95} 4 & -1.60 & -0.69 & -0.11 & 2.12 & -0.12 & -1.81 & -1.51 & 0.67 & 0.22 & 0.43 \\ 
  5 & -0.26 & 0.14 & 0.86 & -0.78 & -2.04 & 1.17 & -1.48 & -0.38 & 0.80 & 1.49 \\ 
   \rowcolor[gray]{.95} 6 & -0.53 & -0.43 & -0.84 & 0.06 & -0.87 & 1.13 & -0.56 & 0.30 & -0.96 & 1.75 \\ 
   \hline
\hline
\caption{'Example of longtable'}
\label{tabbig}
\end{longtable}

\end{document} 
```

这产生了这个表，

![表01](../Images/ee02a1a48b37763814e63c47650b056f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T01:37:08.740

我认为您不能使用 **add.to.row 参数**来操作标题。

但是为什么不消毒呢？

这是我的解决方案：想法是在标题中放置一个标签（此处为**脚注**）并使用 sanitize 选项进行更改。

```
x <- matrix(rnorm(60), ncol = 10)
x.big <- xtable(x,label='tabbig', caption='Example of longtable')
names(x.big) <- LETTERS[1:10]
names(x.big)[9] <- paste('I','footnote')    # I put the tag on I letter 
print(x.big,tabular.environment='longtable',floating=FALSE,
      sanitize.text.function=function(str)gsub("footnote","\\footnote{my tricky footnote !!}",str,fixed=TRUE)) 
```

您可以通过使用许多标签轻松地将解决方案扩展到许多脚注。

![在此处输入图像描述](../Images/690907c7b8a92ce304019685bd499087.png)

## 更新，多脚注的情况

您可以轻松地将这些相同的技巧用于多个音符，如下所示：

```
names(x.big)[1] <- paste('A','footnote1')    # I put the tag on A letter 
names(x.big)[9] <- paste('I','footnote2')    # I put the tag on I letter 
print(x.big,floating=FALSE,
      sanitize.text.function=function(str){
        str <- gsub("footnote1","\\footnote{my tricky footnote 1 !!}",str,fixed=TRUE)
        str <- gsub("footnote2","\\footnote{my tricky footnote 2 !!}",str,fixed=TRUE)
      }
        ) 
```

这个想法是在正则表达式替换后分配相同的字符串。

# c# - radgridview 的特定子行层次结构

> ID：13675383
> 
> 赞同：0
> 
> 时间：2012-12-02T23:58:50.190
> 
> 标签：c#, winforms, telerik, radgridview

当数据绑定完成时，我想遍历我的 RadGridView 上的行，并为每一行修改显示在其子模板之一上的列（下面的一个层次结构级别）。我试过这个：

```
void rgvQuestions_DataBindingComplete(object sender, GridViewBindingCompleteEventArgs e)
    {
        bool didit = false;
        foreach (var row in rgvQuestions.Rows)
        {
            if (!didit)
                row.ViewInfo.ViewTemplate.ChildGridViewTemplates[1].Columns[0].IsVisible = false;

            didit = true;
        }
    } 
```

但它隐藏了所有子网格视图模板的列，而不仅仅是特定行（在这种情况下为第一行）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:36:21.107

每个 Row 都有一个 ChildRows 集合，其中存储其子行：

```
 foreach (var row in radGridView1.Rows)
 {
     foreach (var childrow in row.ChildRows)
     {
         //do smth
     }
 } 
```

# machine-learning - Weka Experimenter 'Class 属性不是标称的'，但数据是从 Explorer 处理的

> ID：13675384
> 
> 赞同：3
> 
> 时间：2012-12-02T23:58:51.133
> 
> 标签：machine-learning, weka

晚上好，

我正在做一个有监督的分类任务。我有一个大的 arff 文件，其中包含“文本”类格式的数据。只有两个班，E和I。

我可以将这些数据加载到 Weka Explorer 中，应用带有 TF-IDF 的 StringToWordVector，然后使用 LibSVM 对其进行分类并获得结果。但我需要使用 5x2 交叉验证并获得 ROC 曲线下的区域。所以我保存了处理过的数据，打开 Weka Experimenter，加载它，设置为 2 折，5 次迭代，然后将算法设置为 libSVM。

当我转到 RUN 选项卡并按开始时，我收到以下错误：

> 18:31:18：开始
> 
> 18:31:18：类属性不是名义上的！
> 
> 18:31:18：被打断
> 
> 18:31:18：出现 1 个错误

我不知道为什么会发生这种情况，究竟是什么错误，或者如何解决它。我用谷歌搜索了这个错误，但它并没有引导我找到任何解决方案。我不确定我应该从哪里解决这个问题。

我可以返回资源管理器，重新加载该处理过的文件，并对其进行分类而没有任何问题，但我需要在 Experimenter 中进行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-04T14:33:58.007

就我而言，文件中有名义属性。然而，Weka 期望这些是最后的，因为它们指示记录被分配到的类。以下是我如何重新排列数据以使标称值位于最后：

1.  在资源管理器中，打开 arff 文件。
2.  单击“编辑...”，然后找到应该是每条记录的类的列。
3.  右键单击列标题并选择“属性作为类”。
4.  单击“保存...”并在 Experimenter 中使用这个新数据集。

奇迹般有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T11:44:31.263

If your class attribute is numeric (like 0,1) change it to a nominal form like `true`, `false`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T10:47:27.087

StringToWordVector 过滤器将类属性作为其输出数据中的第一个属性。实验者期望数据中的最后一个属性是类。您可以对过滤数据的属性进行重新排序，但最好的（在将过滤器与分类器组合时通常也是正确的方法）是使用 FilteredClassifier 将基本分类器 (LibSVM) 与 StringToWordVector 过滤器一起封装。这应该很好，因为类属性是原始“文本”类数据中的最后一个属性。

# php - 用随机的 2 字字符串命名表中的每一行

> ID：13675388
> 
> 赞同：0
> 
> 时间：2012-12-02T23:59:22.750
> 
> 标签：php, postgresql

我想为我的数据库中的表选择一个简单的命名约定。

这意味着我必须用随机的 2 个单词字符串命名每一行。

例如

身份证名称

1 ROMEL SUMPI

2 博米苏伊莫德

等等，，，，，，，，，

这意味着每个 NAME 列都应该有一个唯一的名称.....

我如何在使用 postgreSQL DB 的 PHP 中做到这一点......

先感谢您，，。，，，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:06:05.877

我怀疑您实际上是指“任意”的唯一名称。简单的方法可能是：

```
INSERT INTO tbl (id, name)
SELECT g, 'name'::text || g || ' surname' || g
FROM   generate_series(1, 1000) g; 
```

.. 生成 1000 个不同的名称 - 根本不是随机的，而是唯一的。

要生成 100 个由 AZ 中包含 3 - 10 个随机字母的两个单词组成的名称：

```
INSERT INTO tbl (id, name)
SELECT g%100
      ,left(string_agg(chr(65 + (random() * 25)::int), ''), 3 + (random() * 7)::int)
       || ' ' ||
       left(string_agg(chr(65 + (random() * 25)::int), ''), 3 + (random() * 7)::int)
FROM   generate_series(1, 1000) g
GROUP  BY 1
ORDER  BY 1; 
```

'A' 的 ASCII 码是 65，'Z' 的一个是 90。幸运的是，它们之间的范围跨越了基本的大写字母。[`ascii()`你可以用函数](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)找出来，它的反面是[`chr()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)：

```
SELECT ascii('A') 
```

第二种方法不能保证唯一性，但只有几百个名字就不太可能出现重复。消除可能的重复项是微不足道的。`SELECT`在您`GROUP BY name`选择的位置添加另一层`min(id)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:07:00.040

听起来您可能想要一对从*字典中随机选择的**单词*。鉴于问题不明确，这很难说。

 *## 随机字典单词

选择随机字典单词的最佳方法可能是在 PHP 端使用为您执行此操作的密码短语生成器。

但是，您可以在 PostgreSQL 中使用每行一个表来执行此`dictionary`操作`word`：

```
SELECT word FROM dictionary ORDER BY random() LIMIT 2; 
```

大字典的性能将非常糟糕。如果字典不改变并且编号中没有间隙的唯一性，它可以更快地完成`word_id`，允许您编写：

```
CREATE OR REPLACE FUNCTION get_random_word() RETURNS text AS $$
SELECT word FROM dictionary 
WHERE word_id = (
  SELECT width_bucket(random(), 0, 1, (SELECT max(word_id) FROM dictionary))
);
$$ LANGUAGE sql;

SELECT get_random_word() || ' ' || get_random_word(); 
```

针对这样的表：

```
CREATE TABLE dictionary(word_id serial primary key, word text UNIQUE NOT NULL); 
```

只有在单词编号中没有间隙并且 if `word_id`is unique 或`PRIMARY KEY`. 它*可以*产生两次相同的单词。如果您想避免这种情况，您将需要递归 CTE 或一些 PL/PgSQL。

## 随机胡言乱语

如果您真的想要真正的随机字符串，Stack Overflow 已经很好地介绍了这一点。请参阅[如何在 PostgreSQL 中创建适合会话 ID 的随机字符串？](https://stackoverflow.com/questions/3970795/how-do-you-create-a-random-string-in-postgresql)除其他外；看看[这个搜索](https://www.google.com/search?q=postgresql+random+string)。

为确保唯一性，只需添加一个`UNIQUE`约束。让您的应用程序测试以查看在您`INSERT`编辑该行时是否引发了 unique_violation，如果发生违规，则使用新的随机 ID 插入它。如果您愿意，您可以使用 PL/PgSQL 帮助程序自动执行此操作，尽管它仍然会受到不同事务中并发插入之间的竞争的影响。*

# ios - 两个 NSString 值的“if”语句不起作用

> ID：13675389
> 
> 赞同：0
> 
> 时间：2012-12-02T23:59:24.163
> 
> 标签：ios, if-statement, nsstring, nsdate

> **可能重复：**
> [如果“a == b”在比较两个 NSString 对象时为假？](https://stackoverflow.com/questions/8598599/if-a-b-is-false-when-comparing-two-nsstring-objects)

在“if”语句中，我比较两个字符串“currentDateString”和“dateCreatedString”，如果为真，则为“Today”，如果为假，则为“dateCreatedString”。尽管在创建新项目时它们应该是相等的，但是 if 语句每次都返回 false 并且当我想要获得“今天”时只给出 currentDateString。

```
- (NSString *)dateCreatedString
{
// Create a NSDateFormatter that will turn a date into a simple date string
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
NSString *dateCreatedString = [dateFormatter stringFromDate:[_detailItem dateCreated]];
return dateCreatedString;
}
- (NSString *)currentDateString
{
// Create a NSDateFormatter that will turn a date into a simple date string
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
NSString *currentDateString = [dateFormatter stringFromDate:[NSDate date]];
return currentDateString;
}
- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
//places "Today" in the dateLabel if the two strings both equal today
if ([self currentDateString] == [self dateCreatedString] || [_detailItem dateCreated] == nil) {
    [_dateTxt setText:@"Today"];
}
else{
    [_dateTxt setText:[self dateCreatedString]];
}
} 
```

**有人可以帮助解释为什么会发生这种情况，以及如何解决它？**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T00:03:58.760

你应该`isEqualToString`用来比较这样的字符串：

```
if ([[self currentDateString] isEqualToString:[self dateCreatedString]]) 
```

使用`==`您正在比较指向字符串对象的指针，这肯定是不一样的。

# xml - 验证 DTD/XML 时缺少必需的空格

> ID：13675391
> 
> 赞同：0
> 
> 时间：2012-12-02T23:59:51.323
> 
> 标签：xml, dtd

我正在使用 w3 学校验证工具用我的 dtd 验证我的 xml 文件。这是我所拥有的，但我缺少必需的空格：

```
<?xml version="1.0" ?> 
<!DOCTYPE COUNTRYINFO
[
<!ELEMENT COUNTRY(NAME, POPULATION, AREA)>
<!ELEMENT NAME(#PCDATA)>
<!ELEMENT POPULATION(#PCDATA)>
<!ELEMENT AREA(#PCDATA)>
]> 
<COUNTRYINFO>
 <COUNTRY>
  <NAME>UNITED STATES</NAME>
  <POPULATION>314867000</POPULATION>
  <AREA>3794101</AREA>
 </COUNTRY>
</COUNTRYINFO> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:18:39.017

两个问题：

1.  `<!ELEMENT COUNTRY`在左括号之前需要有一个空格（也适用于所有其他`<!ELEMENT...`标签。
2.  `<COUNTRYINFO>`需要声明元素

更正的DTD：

```
<!DOCTYPE COUNTRYINFO
[
<!ELEMENT COUNTRYINFO (COUNTRY)>
<!ELEMENT COUNTRY (NAME, POPULATION, AREA)>
<!ELEMENT NAME (#PCDATA)>
<!ELEMENT POPULATION (#PCDATA)>
<!ELEMENT AREA (#PCDATA)>
]> 
```

# ruby-on-rails - 如何在 Rails 生成器中使用 Thor::Shell::Basic？

> ID：13675394
> 
> 赞同：1
> 
> 时间：2012-12-03T00:00:05.980
> 
> 标签：ruby-on-rails, ruby, thor

我正在编写一个 Rails 3.2 生成器，并想使用[Thor::Shell::Basic](https://github.com/wycats/thor/blob/master/lib/thor/shell/basic.rb)实例方法（例如`ask`或`yes?`），就像他们在[官方 Rails 指南中的 Application Templates](http://guides.rubyonrails.org/generators.html#application-templates)一样。

```
module MyNamespace
  class ScaffoldGenerator < Rails::Generators::Base
    source_root File.expand_path('../templates', __FILE__)

    if yes? "Install MyGem?"
      gem 'my_gem'
    end

    run 'bundle install'
  end
end 
```

这会给我一个`NoMethodError: undefined method 'yes?' for MyNamespace::ScaffoldGenerator:Class`.

我想不出一种干净的方法来使这些实例方法可用 - 我已经从`Rails::Generators::Base`.

编辑：

啊，这可能与托尔无关……我收到警告：

`[WARNING] Could not load generator "generators/my_namespace/scaffold/scaffold_generator"`

尽管我使用了生成器来生成生成器，但有些东西没有正确设置......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:41:18.687

哦，是的，它确实与托尔有关。

不要让自己对警告感到困惑。您知道 Rails::Generators 使用 Thor，因此请前往[Thor Wiki](https://github.com/wycats/thor/wiki)并查看[Thor 任务的工作原理](https://github.com/wycats/thor/wiki/Getting-Started)。

rails 生成器执行将调用生成器中的任何方法。所以确保你把你的东西组织成方法：

```
module MyNamespace
  class ScaffoldGenerator < Rails::Generators::Base
    source_root File.expand_path('../templates', __FILE__)

    def install_my_gem
      if yes? "Install MyGem?"
        gem 'my_gem'
      end
    end

    def bundle
      run 'bundle install'
    end
  end
end 
```

请务必将您的生成器放入正确的文件夹结构中，例如`lib/generators/my_namespace/scaffold_generator.rb`.

谢谢你的问题，伙计！

# c# - WP8 + WolframAPI

> ID：13675398
> 
> 赞同：0
> 
> 时间：2012-12-03T00:01:05.483
> 
> 标签：c#, windows-phone-7, windows-phone, windows-phone-8, wolframalpha

我正在尝试在 WP8 应用程序上使用 Wolfram 库，一旦它进入使用它的函数，甚至在它启动该函数之前，我就会收到此错误。

> 程序集 'WolframAPI, Version=1.2.4112.34755, Culture=neutral, PublicKeyToken=null' 中的类型 'WolframAPI.WAResult' 正在尝试实现一个不可访问的接口。

我不确定我是否理解导致此错误的原因，是否有任何问题，或者它是否根本无法在 WP8 中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:30:58.873

> 我不确定我是否理解导致此错误的原因

错误的最后一部分明确说明了导致它的原因：

> 试图实现一个不可访问的接口

简而言之：API 与 WP8 不兼容，并试图使用私有类型的反射，这在 Windows Phone 上是不允许的。

# c - 处理字符串的算法

> ID：13675400
> 
> 赞同：1
> 
> 时间：2012-12-03T00:01:13.330
> 
> 标签：c, string, function, replace, variations

我真的不知道如何实现这个函数：函数应该接受一个指向整数的指针、指向字符串数组的指针和用于进程的字符串。**函数应将交换' ch** '组合的所有变体写入数组' **@** '符号并将整数更改为该数组的大小。有处理示例：

```
choker => {"choker","@oker"}

chocho => {"chocho","@ocho","cho@o","@o@o"}

chachacha => {"chachacha","@achacha","cha@acha","chacha@a","@a@acha","cha@a@a","@acha@a","@a@a@a"} 
```

我正在用 c 标准 99 写这个。所以这是草图：

```
int n;
char **arr;
char *string = "chacha";
func(&n,&arr,string); 
```

和功能草图：

```
int func(int *n,char ***arr, char *string) {

} 
```

所以我认为我需要创建另一个函数，它计算“ch”组合的数量并为此分配内存。我很高兴听到有关此算法的任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:30:16.933

首先，我将创建一个辅助函数，例如 countChs，它只会遍历字符串并返回'ch'-s 的数量。这应该很容易，因为不涉及字符串重叠。

当您有出现次数时，您需要为**2^count strings**分配空间，每个字符串（除了原始字符串）的长度为**strlen(original) - 1**。您还可以将 n 变量更改为等于 2^count。

分配空间后，只需遍历新表中的所有索引并用原始字符串的副本填充它们（strcpy() 或 strncpy() 复制），然后将 'ch' 替换为 '@' （那里是在线准备好的片段的负载，只需寻找“C字符串替换”）。

最后让你的 arr 指针指向新表。不过要小心——如果它以前指向其他数据，你应该考虑释放它，否则你最终会出现内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:30:53.400

如果您想要替换字符串的所有变体，数组大小将包含`2^n`元素。其中`n`- “ch”子串的数量。所以，计算这将是：

```
int i = 0;
int n = 0;
while(string[i] != '\0')
{
    if(string[i] == 'c' && string[i + 1] == 'h')
        n++;

    i++;
} 
```

然后我们可以使用数字的二进制表示。让我们注意，从`0`to递增整数`2^n`，第 i 个数字的二进制表示将告诉我们，哪个“ch”发生要改变。所以：

```
for(long long unsigned int i = 0; i < (1 << n); i++)
{
    long long unsigned int number = i;
    int k = 0;

    while(number > 0)
    {
        if(number % 2 == 1)
            // Replace k-th occurence of "ch"

        number /= 2;
        k++;
    }

    // Add replaced string to array
} 
```

此代码检查二进制表示中的每一位，`number`如果第 k 位为 1，则更改第 k 个出现。更改第 k 个“ch”非常容易，我把它留给你。

此代码仅对出现 64 次或更少的情况有用，因为 unsigned`long long int`只能保存`2^64`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T00:25:17.240

您可以很容易地计算组合的数量：

```
char * tmp = string;
int i;
for(i = 0; *tmp != '\0'; i++){
    if(!(tmp = strstr(tmp, "ch")))
        break;
    tmp += 2; // Skip past the 2 characters "ch"
}

// i contains the number of times ch appears in the string.

int num_combinations = 1 << i;

// num_combinations contains the number of combinations. Since this is 2 to the power of the number of occurrences of "ch" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T00:49:01.777

对于原始问题，您需要解决两个子问题：

*   为变体数组分配空间
*   计算变化

对于第一个问题，您需要找到一个数学函数，该函数`f`采用输入字符串中“ch”出现的次数并返回总变化的数量。根据您的示例`f(1) = 1`：`f(2) = 4`和`f(3) = 8`。这应该让您很好地了解从哪里开始，但重要的是要*证明*您的函数是正确的。归纳法是证明这一点的好方法。

由于您的替换过程可确保结果的长度与原始结果相同，因此您可以为每个单独的结果分配与原始长度相等的空间。

至于第二个问题，最简单的方法是使用递归，就像 nightlytrails 提供的例子一样。

您将需要另一个函数来获取您为结果分配的数组、结果的 a `count`、字符串的当前状态和`index`当前字符串中的 a。

调用时，如果在 之后不再出现“ch”，`index`则将结果保存在数组中的位置`count`和增量处`count`（因此下次您不会覆盖先前的结果）。

如果有任何“ch”超出`index`，则调用此函数两次（重复部分）。其中一个调用使用当前字符串的副本，并且仅将 递增`index`到刚好超出“ch”。另一个调用使用当前字符串的副本，其中“ch”替换为“@”，并将`index`增加到“@”之外。

确保没有内存泄漏。没有`malloc`匹配就不行`free`。使此解决方案起作用后，您可能会注意到它在内存中的作用很松散。它使用的超出了应有的范围。改进算法是读者的练习。

# python - 无法在 Python 中读取 JSON 文件

> ID：13675401
> 
> 赞同：1
> 
> 时间：2012-12-03T00:01:17.047
> 
> 标签：python, json

我试图从 JSON 文件中读取数据，但遇到了奇怪的错误，不知道这意味着什么。我试着用谷歌搜索它，但它没有帮助。我收到以下错误：

```
Traceback (most recent call last):
  File "items_uploader.py", line 40, in <module>
    main()
  File "items_uploader.py", line 16, in main
    LoadItemsData(settings['items_filename'])
  File "items_uploader.py", line 36, in LoadItemsData
    data = json.load(json_data)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 278, in load
    **kw)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 382, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting , delimiter: line 8 column 397 (char 3064) 
```

代码本身非常简单：

```
import socket
import MySQLdb
from ConfigParser import SafeConfigParser
import json
from pprint import pprint

def main():
    settings = GetSettings()
    LoadItemsData(settings['items_filename'])
    return

def GetSettings():
    settings = {}
    parser = SafeConfigParser()
    parser.read('settings.yaml')
    settings['items_filename'] =  parser.get('files', 'items_filename')
    return settings

def LoadItemsData(filename):
    json_data=open(filename)
    data = json.load(json_data)
    return data

if __name__ == '__main__':
    main() 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:01:02.117

确保您的 JSON 数据格式有效，一个额外的字符*会*弄乱 python 解析器。要测试您的 JSON 数据，请转到[此处](http://jsonviewer.stack.hu)，确保您可以以正确的格式查看它。

例如，如果我有

```
JSON_data ='{"c":[{"xy":{"xstart":0,"xend":5,"ystart":1,"yend":5},"names":["D","T","O","H","L","C",],"co":["rgb(0,0,128)"]}],"Values":{"D":["11/30/2012"],"T":["09:44:00"],"O":["5848.40"],"H":["5848.40"],"L":["5847.45"],"C":["5848.40"]}}' 
```

`,`after `C`(here )将`["D","T","O","H","L","C",]`显示错误。因此，请确保您的数据格式正确，并且没有不必要的字符。

希望这可以帮助。

# ruby-on-rails - Ruby on Rails FATAL_ERROR 进程内存不足异常

> ID：13675405
> 
> 赞同：0
> 
> 时间：2012-12-03T00:02:29.120
> 
> 标签：ruby-on-rails

我创建了一个带有用户模型的示例 rails 应用程序。我使用的命令是：

*   `sudo rails new app`
*   `sudo rails generate scaffold User name:string`
*   `sudo rake db:migrate`
*   `sudo rake db:migrate RAILS_ENV=production`
*   `sudo bundle install`
*   `sudo bundle exec rake assets:precompile`
*   `sudo rails server -e production`

当我尝试在生产模式下运行我的应用程序时，出现此错误： http: [//pastebin.com/tNvm9jfm](http://pastebin.com/tNvm9jfm)

我也尝试实时编译（`config.assets.compile = true`）。结果是一样的。

# c++ - 使用 boost::python 从 C++ 创建 python collections.namedtuple

> ID：13675409
> 
> 赞同：4
> 
> 时间：2012-12-03T00:02:37.560
> 
> 标签：c++, python, python-3.x, boost-python

我想`collections.namedtuple`从 boost::python 包装函数返回一个列表，但我不确定如何从 C++ 代码创建这些对象。对于其他一些类型，有一个方便的包装器（例如 dict），它使这很容易，但对于 namedtuple 却没有这样的东西。做这个的最好方式是什么？

dict列表的现有代码：

```
namespace py = boost::python;

struct cacheWrap {
   ...
   py::list getSources() {
      py::list result;
      for (auto& src : srcCache) {  // srcCache is a C++ vector
         // {{{ --> Want to use a namedtuple here instead of dict
         py::dict pysrc;
         pysrc["url"] = src.url;
         pysrc["label"] = src.label;
         result.append(pysrc);
         // }}}
      }
      return result;
   }
   ...
};

BOOST_PYTHON_MODULE(sole) {
   py::class_<cacheWrap,boost::noncopyable>("doc", py::init<std::string>())
      .def("getSources", &cacheWrap::getSources)
   ;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T21:02:53.770

The following code does the job. Better solutions will get the check.

*Do this in ctor to set field sourceInfo:*

```
auto collections = py::import("collections");
auto namedtuple = collections.attr("namedtuple");
py::list fields;
fields.append("url"); 
fields.append("label");
sourceInfo = namedtuple("Source", fields); 
```

*New method:*

```
py::list getSources() {
   py::list result;
   for (auto& src : srcCache)
      result.append(sourceInfo(src.url, src.label));
   return result;
} 
```

# java - 无法理解为什么 jpanel 不渲染

> ID：13675413
> 
> 赞同：0
> 
> 时间：2012-12-03T00:02:55.683
> 
> 标签：java, timer, jpanel

我正在为学校做一个期末项目，但我的代码正在做一些非常奇怪的事情。如果我在课堂上调用一个函数，则会显示 jpanel，但是当我从另一个课堂调用这个函数时，它不会。

**我找到了解决方案..**

调用方法repaint()；创建 2jpanels 后。解决这个问题。

现在......我怎样才能关闭这个问题，或将其标记为已解决？非常感谢所有阅读本文的人。

这是课程。

主班

```
 public class Main {
  public static void main(String[] args) {
  new GameFrame();}
  } 
```

GameFrame 类

```
 public class GameFrame extends JFrame {
  private static final long serialVersionUID = 1L;
  private static final int baseWidth=192,baseHeight=352;
  private JPanel panel;
  private GamePanel gamePanel;

  public GameFrame() {
    panel = (JPanel) this.getContentPane();
    Dimension d = new Dimension(baseWidth, baseHeight);
    panel.setPreferredSize(new Dimension(d));
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.pack();
    this.setTitle("test game..");
    this.setResizable(false);
    this.setLocationRelativeTo(null);
    this.setVisible(true);
    init_panelGame();//this will content the real game panel.
}

private void init_panelGame() {
    gamePanel = new GamePanel(this,scale);
    gamePanel.setVisible(true);
    panel.add(gamePanel);
    this.revalidate();}
     } 
```

游戏面板类

```
 public class GamePanel extends JPanel {
private static final long serialVersionUID = 1L;
private int imgSize = 32;
    public String gameState ="create_row";
private ImagePanel[][] mat_pos = new ImagePanel[6][11];
private Timer tiempo;//changed to a swing timer..

public GamePanel(GameFrame gp,int scale) {
this.setLayout(null);
createRow();//works fine if i call this method from here.
tiempo=new Timer(1000, new ActionListener() {
@Override
public void actionPerformed(ActionEvent arg0) {
    gameFlow();
}});
timerStart();
}

public void gameFlow() {//this is the method call by my timer
if (gameState.equals("create_row"))
    {createRow(); //it doesnt render the created row!! this is my problem!!
     gameState = "move_squares";
 return;}
if (gameState.equals("move_squares"))
    {moveSquares();return;}
}

private void moveSquares() {
int runningSquares = 0;
for (int col=0;col<6;col++)
for(int ren=10;ren>=0;ren--)
    {if (mat_pos[col][ren]!=null)
     if (mat_pos[col][ren].state.equals("running"))
     {runningSquares++;
      mat_pos[col][ren+1]=mat_pos[col][ren];
      mat_pos[col][ren]=null;
      if (ren+1==10 || mat_pos[col][ren+2]!=null)
         mat_pos[col][ren+1].state = "stopped";
      int newX,newY;
      newX = imgSize * col;
      newY = imgSize * (ren+1);
      mat_pos[col][ren+1].setBounds(newX,newY, imgSize,imgSize);
     }
}
if (runningSquares==0)
   {gameState="create_row";
   createRow();}
}
public void createRow() {//create 2 panels and add them to this jpanel.
gameState = "move_squares";
int colorRandom1 = (int) (Math.random()*5);
int colorRandom2 = (int) (Math.random()*5);
ImagePanel t1 = new ImagePanel(colorRandom1);
ImagePanel t2 = new ImagePanel(colorRandom2);
int columna = (int) (Math.random()*5);
mat_pos[columna][0] = t1;
mat_pos[columna+1][0] = t2;
t1.setBounds(columna*imgSize,0,32, 32);
t2.setBounds((columna+1)*imgSize,0,32, 32);
this.add(t1);
this.add(t2);
this.revalidate();
}
public void timerStart(){
    tiempo.start();
}
public void timerStop(){
    tiempo.stop();
}
    } 
```

//最后，图像面板类只创建一个以img为背景的简单面板

```
 public class ImagePanel extends JPanel {
private static final long serialVersionUID = 1L;
public String state = "running";
private Image img;
    private size = 1;

    public ImagePanel(int color) {
    String cad=null;
    this.setVisible(true);
cad = "assets/blue.png";
    this.img = new ImageIcon(cad).getImage();
    crearFondo();
    }

    public void crearFondo() {
    Dimension size = new Dimension(32,32);
    setPreferredSize(size);
    setMinimumSize(size);
    setMaximumSize(size);
    setSize(size);
    setLayout(null);
    }

    public void paintComponent(Graphics g) {
    g.drawImage(img, 0,0, null);
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:30:04.703

首先，如果容器已经附加到组件层次结构并且可见，则通常需要在将内容添加到容器后重新验证。

尝试在您的 createRow 方法中调用 this.add() 之后调用 this.revalidate()。

其次，您似乎正在使用 java.util.Timer。这不会在 EDT 上给您打电话。请改用 javax.swing.Timer 或确保 createRow 切换回 EDT。这可以通过 SwingUtilities.invokeLater(new Runnable() {...}) 来完成。无论我的第一个建议是否有效，您都应该解决这个问题！

如果这不起作用，请提供一个[SSCCE](http://www.sscce.org/)，理想情况下我可以复制粘贴并在我的最后尝试。

# javascript - WebRTC 和 ThreeJS 创建拉丝金属纹理立方体

> ID：13675421
> 
> 赞同：3
> 
> 时间：2012-12-03T00:03:57.820
> 
> 标签：javascript, textures, webgl, three.js, webrtc

我正在尝试将`THREE.ImageUtils.loadTextureCube()`使用实时摄像头的应用应用到旋转的立方体上。

到目前为止，我设法使用我的视频将一个简单的纹理应用于`MeshLambertMaterial`：

```
var geometry = new THREE.CubeGeometry(100, 100, 100, 10, 10, 10);
videoTexture = new THREE.Texture( Video ); // var "Video" is my <video> element
var material = new THREE.MeshLambertMaterial({ map: videoTexture });
Cube = new THREE.Mesh(geometry, material);
Scene.add( Cube ); 
```

没关系，您可以在[http://jmpp.fr/three-camera看到结果](http://jmpp.fr/three-camera)

现在我想使用这个视频流来制作拉丝金属纹理，所以我尝试创建另一种材质：

```
var videoSource = decodeURIComponent(Video.src);
var environment = THREE.ImageUtils.loadTextureCube([videoSource, // left
                                                    videoSource, // right
                                                    videoSource, // top
                                                    videoSource, // bottom
                                                    videoSource, // front
                                                    videoSource]); // back
var material = new THREE.MeshPhongMaterial({ envMap: environment }); 
```

...但它会引发以下错误：

```
blob:http://localhost/dad58cd1-1557-41dd-beed-dbfea4c340db 404 (Not Found) 
```

我猜 loadTextureCube() 正在尝试将 6 个数组参数作为图像获取，但似乎并不喜欢 videoSource。

我从三个开始，想知道是否有办法做到这一点？

谢谢，jmpp

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T02:45:03.887

我可以看到两种方式。首先，如果您只想要相同的图像但具有一些镜面高光/光泽，那么只需更改

```
var material = new THREE.MeshLambertMaterial({ map:texture}); 
```

到

```
var material = new THREE.MeshPhongMaterial({ 
         map: texture , 
         ambient: 0x030303, 
         specular: 0xffffff, 
         shininess: 90
}); 
```

并使用环境光、镜面反射、光泽度设置来找到你喜欢的。

其次，如果您真的想为视频图像本身添加效果，您可以将图像绘制到画布上，操作像素，然后将纹理图像设置为新图像。这也可以通过自定义着色器来完成，避免画布步骤，但是已经有用于将图像过滤器应用于元素的库，所以我会坚持下去。这会像这样工作：你需要一个画布来绘制`<canvas id='testCanvas' width=256 height=256></canvas>`然后用javascript

```
var ctx = document.getElementById('testCanvas').getContext('2d');
texture = new THREE.Texture();

// in the render loop
ctx.drawImage(Video,0,0);
var img = ctx.getImageData(0,0,c.width,c.height);
// do something with the img.data pixels, see 
// this article http://www.html5rocks.com/en/tutorials/canvas/imagefilters/
// then write it back to the texture
texture.image = img;

texture.needsUpdate = true 
```

* * *

## 更新！

实际上，您可以将其作为 envMap 进行，您只需要强制视频为具有相同宽度/高度的 2 的幂。视频以 640x480 的格式流入 chrome，因此您仍然需要绘制画布，但仅用于裁剪/正方形图像。所以我得到了这个工作：

```
 // In the access camera part
 var canvas = document.createElement('canvas')
     canvas.width = 512;
     canvas.height = 512;
 ctx = canvas.getContext('2d');   

 // In render loop 
 ctx.drawImage(Video,0,0, 512, 512);
 img = ctx.getImageData(0,0,512,512);
 // This part is a little different, but env maps have an array 
 // of images instead of just one
 cubeVideo.image = [img,img,img,img,img,img];
 if (Video.readyState === Video.HAVE_ENOUGH_DATA)
     cubeVideo.needsUpdate = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:52:00.717

试试这个：

```
var environment = new THREE.Texture( [ Video, Video, Video, Video, Video, Video ] );
var material = new THREE.MeshPhongMaterial({ envMap: environment });

// in animate()
environment.needsUpdate = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:05:10.207

好的，现在我设法使用 Phong 材料在立方体上获得了闪亮的效果：

```
videoTexture = new THREE.Texture( Video );
var material = new THREE.MeshPhongMaterial({
    map: videoTexture,
    ambient: 0x030303,
    specular: 0xc0c0c0,
    shininess: 25
}); 
```

这看起来还不错。

但似乎 a`THREE.Texture([Video,Video,Video,Video,Video,Video]);`不能作为 envMap 工作。我仍然得到一个黑色立方体。

# php - 在 htaccess 中进行 URL 编码，也许？

> ID：13675424
> 
> 赞同：1
> 
> 时间：2012-12-03T00:04:17.147
> 
> 标签：php, .htaccess, get

考虑以下场景：

我希望能够访问`http://www.example.com/word/hello/`，其中单词`hello`是可变的。所以我开始`.htaccess`配置它。

```
RewriteEngine On
RewriteRule ^word/(.+)/?$ displayword.php?word=$1 [L] 
```

我使用`.+`是因为我还想过滤任何符号，例如`?+-.!;:`等。

我相应地设置了我的 PHP 文件：

```
<?php
echo $_GET['word'];
?> 
```

请记住，这只是一个场景。现在，我访问了这个 URL: `http://www.example.com/word/Are you ok?/`，页面输出了这个：

```
Are you ok 
```

我不知道为什么。但后来我意识到问号符号是 URL 变量的起点。

那么有没有办法对上面示例中的问号进行“url编码”，以便正确显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:15:06.407

我不知道有关 .htaccess 文件的大量信息，但是您可以将 PHP 脚本更改为使用[`$_SERVER['PATH_INFO']`](http://www.php.net/manual/en/reserved.variables.server.php)而不是`$_GET`or `$_REQUEST`。

特别是，[此评论](http://www.php.net/manual/en/reserved.variables.server.php#108329)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:30:23.960

在 HTTP 协议中，“？” 将查询字符串与 URL 的其余部分分开，因此我认为不可能直接在 URL 中使用它。一种解决方案是将问号编码为`%3F`.

然后你可以使用[`string urldecode (string $str)`](http://php.net/manual/en/function.urldecode.php)来解码字符串。

有关其他字符的编码，请参阅此[URL 编码参考](http://www.w3schools.com/tags/ref_urlencode.asp)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T01:32:49.267

不需要编码，试试这个：

```
RewriteEngine On
RewriteRule ^word/([a-zA-Z0-9-=_.?]+)/?$ displayword.php?word=$1 [L] 
```

它将显示`?`在参数和您添加到`[group]`. 不过，我没有测试该规则是否有效，但我想它确实有效。看起来不错，这不是问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T07:38:51.727

将您的代码更改为：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+word/([^/]+) [NC]
RewriteRule ^ index.php?word=%1 [L,QSA] 
```

之所以可行，是因为 RewriteRule 适用于`%{REQUEST_URI}`获取 URI，即问号之前的字符串，`?`但也`%{THE_REQUEST}`适用于包含问号的完整 URL `?`。

# android - 使用 Aysnc 任务更新列表视图图像

> ID：13675426
> 
> 赞同：0
> 
> 时间：2012-12-03T00:04:20.243
> 
> 标签：android, view, android-listview, android-asynctask, android-arrayadapter

我有一个带有图像的自定义列表视图。我需要通过 url 设置图像的来源，但我不希望进程阻塞 UI，所以我使用的是 Async 任务。但是，图像仅设置在列表中的一个图像上，并且显示为幻灯片。

有没有更好的方法来解决这个问题？

这是我的代码：

自定义适配器

```
class MyArrayAdapter extends ArrayAdapter<String> {

    private final Context context;
    private int i = 0;
    Contact[] myContact;
    String imageURL;

    public MyArrayAdapter(Context context, Contact[] contact) {
        super(context, R.layout.custom_list);
        this.context = context;
        this.myContact = contact;
        int s = myContact.length;
        int k = contact.length;
    }

    @Override
       public int getCount() {
           return myContact.length;
       }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        rowView = inflater.inflate(R.layout.custom_list, parent, false);
        TextView contact_first_name = (TextView) rowView
                .findViewById(R.id.first_name);
        TextView contact_last_name = (TextView) rowView
                .findViewById(R.id.last_name);
        imageView = (ImageView) rowView.findViewById(R.id.photo);
        imageURL = myContact[i].getImageUrl();          
        new LoadImageTask().execute(imageURL);

        contact_first_name.setText(myContact[i].getFirstName());
        contact_last_name.setText(myContact[i].getLastName());

        i++;

        return rowView;
    }       
} 
```

异步任务

```
public class LoadImageTask extends AsyncTask<String, Integer, String> {

    Bitmap bitmap;

    @Override
    protected String doInBackground(String... imageURL) {
        // TODO Auto-generated method stub
        try {
              bitmap = BitmapFactory.decodeStream((InputStream)new URL(imageURL[0]).getContent());

            } catch (MalformedURLException e) {
              e.printStackTrace();
            } catch (IOException e) {
              e.printStackTrace();
            }
        return null;
    }

    protected void onPostExecute(String line) {

        try {
            imageView.setImageBitmap(bitmap);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:15:41.293

执行时传递 imageview 对象。
使用 setTag 传递 url。以下将解决您的问题，但我建议您仔细查看本[教程](http://www.androidhive.info/2012/07/android-loading-image-from-url-http/)。它将防止您出现内存不足和性能问题。

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        rowView = inflater.inflate(R.layout.custom_list, parent, false);
        TextView contact_first_name = (TextView) rowView
                .findViewById(R.id.first_name);
        TextView contact_last_name = (TextView) rowView
                .findViewById(R.id.last_name);
        imageView = (ImageView) rowView.findViewById(R.id.photo);
        imageURL = myContact[i].getImageUrl();
        imageView.setTag(imageURL);    // add this      
        new LoadImageTask().execute(imageView); // change here

        contact_first_name.setText(myContact[i].getFirstName());
        contact_last_name.setText(myContact[i].getLastName());

        i++;

        return rowView;
    } 
```

在异步任务中：

```
public class LoadImageTask extends AsyncTask<ImageView, Integer, String> { // change here

    Bitmap bitmap;
   ImageView image = null; // add this

    @Override
    protected String doInBackground(String... imageURL) {
        // TODO Auto-generated method stub
    this.image = imageURL[0]; // add this
        String url = (String) image.getTag(); // add this

        try {
              bitmap = BitmapFactory.decodeStream((InputStream)new URL(url).getContent()); // change here

            } catch (MalformedURLException e) {
              e.printStackTrace();
            } catch (IOException e) {
              e.printStackTrace();
            }
        return null;
    }

    protected void onPostExecute(String line) {

        try {
            image.setImageBitmap(bitmap); // change here
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

这将解决您的问题。

# delphi - StringGrid 的 OnSetEditText 事件有什么作用？

> ID：13675428
> 
> 赞同：2
> 
> 时间：2012-12-03T00:04:32.020
> 
> 标签：delphi, tstringgrid

我认为只要单元格中的文本发生更改，就会触发 OnSetEditText。设置断点并进行试验后，我知道这是错误的 :-) 那么，首先，这个事件*是*什么时候触发的？

其次，如果我想让网格单元格内的文本连续自动调整大小，我应该编写哪个事件来实现这一点（注意：我正在使用 TMS 的字符串网格导数，其中包括一种自动调整行大小的方法；我只需要弄清楚什么时候打电话出去）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T00:07:32.950

`OnSetEditText`每次用户更改就地编辑器控件的内容时都会触发该事件，当然假设该控件是可编辑的 ( `goEditing in Options`)。[文档](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Grids.TCustomDrawGrid.OnSetEditText)、VCL 源代码和黑盒验证都证实了这一点。

# .net - vb .net 自定义控件属性未在运行时保存

> ID：13675429
> 
> 赞同：1
> 
> 时间：2012-12-03T00:04:40.520
> 
> 标签：.net, visual-studio-2010

我声明了一个自定义属性“填充”

```
 Public Overloads Property Padding() As Padding
    Get
        Return (pad)
    End Get
    Set(ByVal Value As Padding)
        pad = Value
        RecalculateCharacterSize()
        Me.Refresh() 
    End Set
End Property 
```

并在设计时工作。但是当我运行表单时，这个属性被重置为 0，当返回到设计编辑器时也为零。与最初的“Padding”属性名称存在冲突，因为如果我更改为“Padding2”可以正常工作（我可以更改我的名字）但最初的名称最适合:)

非常感谢您的建议，我敢肯定这里有一些愚蠢的东西

PS。我用这些装饰，但仍然没有任何效果

```
<EditorBrowsable(EditorBrowsableState.Always), Browsable(True), Bindable(True), _
DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)> _ 
```

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:01:38.147

非常感谢马克，工作:)

```
Public Shadows Property Padding() As Padding
    Get

        Return (pad)
    End Get
    Set(ByVal Value As Padding)
        pad = Value
        MyBase.Padding = pad ' ---> this had to be added 
        RecalculateCharacterSize()
        Me.Refresh()
    End Set
End Property 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:39:16.210

如果您只是想添加到现有的`Padding`属性，请尝试这样的事情。

```
Public Shadows Property Padding() As Padding
    Get
        Return (MyBase.Padding)

    End Get
    Set(ByVal Value As Padding)
        MyBase.Padding = Value
        pad = Value
        RecalculateCharacterSize()
        Me.Refresh()
    End Set
End Property 
```

# java - 将等价图合并在一起

> ID：13675431
> 
> 赞同：0
> 
> 时间：2012-12-03T00:04:48.663
> 
> 标签：java, algorithm, data-structures, hash, graph

我不明白如何让两个图表合并在一起。见下图： ![在此处输入图像描述](../Images/c8d57716561f6ed6db2d3d2e62bdf113.png)

在这里，我想将两个图与根合并为 A 和 E。由于 E 较小，我希望它指向较大图 A 的根。我有一个名为的函数`compressToRoot()`，它接受一个参数，使每个节点介于两者之间它本身和根指向自引用根（例如，compressToRoot(D): D->A, C->A, B->A）。如果我有这个功能，

```
public Equivalence<E> mergeClassesContaining(E a, E b); 
```

我需要首先`compressToRoot(a)`，`compressToRoot(b)`如果它们不属于同一个等价类 - 例如，D 和 F 不同，但 C 和 D 相同。然后，我取较小的（右，EF）并将其根与左侧的较大的根合并，得到右侧的根。然后，我更新左边那个的大小，并从决定大小的地图中删除右边的根，`rootSizeMap`. 我有两个类实例变量，`rootSizeMap`如下`parentMap`所示：

```
 private Map<E,E>       parentMap   = new HashMap<E,E>();  //maps node to parent
 private Map<E,Integer> rootSizeMap = new HashMap<E,Integer>(); //maps node to size of class 
```

如何完成该`mergeClassesContaining(E a, E b)`函数，以便它确定哪个是较小的图形并将其根指向较大的图形？在这种情况下，图根据其中“节点”的数量而变大或变小。例如，左边有 4 个，右边有 2 个。

```
public Equivalence<E> mergeClassesContaining(E a, E b) throws IllegalArgumentException {

    if (!inSameClass(a, b)) { //private function to determine if the given parameters are in the same class.
        //need help here.
        return this;
    }
} 
```

这是 compressToRoot 函数：

```
private E compressToRoot (E e) throws IllegalArgumentException {
   E node;
   ArrayList<E> nodes = new ArrayList<E>();
    while ((node = parentMap.get(e)) != e)  {
        nodes.add(e);
        e = node;
    }

    for (E element : nodes)
        ((ArrayList<E>) parentMap).set((Integer) node, e);

    return e; 
} 
```

完整代码：

```
public class HashEquivalence<E> implements Equivalence<E>  {

public Equivalence<E> addSingletonClass (E e) throws IllegalArgumentException {
  if (parentMap.containsKey(e))
    throw new IllegalArgumentException("HashEquivalence.addSingletonClass: e(" +e+ ") already in an equivalence class");
  parentMap.put(e,e);    //its own parent
  rootSizeMap.put(e,1);  //its equivalence class has 1 value in it
  return this;
}

private E compressToRoot (E e) throws IllegalArgumentException {

   E node;
   ArrayList<E> nodes = new ArrayList<E>();
    while ((node = parentMap.get(e)) != e)  {
        nodes.add(e);
        e = node;
    }

    for (E element : nodes)
        ((ArrayList<E>) parentMap).set((Integer) node, e);

    return e; //Allows method to compile
}

public boolean inSameClass(E a, E b) throws IllegalArgumentException {
  if (!parentMap.containsKey(a))
    throw new IllegalArgumentException("HashEquivalence.inSameClass: a(" +a+ ") not in an equivalence class");
  if (!parentMap.containsKey(b))
    throw new IllegalArgumentException("HashEquivalence.inSameClass: b(" +b+ ") not in an equivalence class");

  return compressToRoot(a) == compressToRoot(b);
}

public Equivalence<E> mergeClassesContaining(E a, E b) throws IllegalArgumentException {

  if (!inSameClass(a,b))

return this; 
  }

public Set<Set<E>> allClasses () {
  Map<E,Set<E>> answerMap = new HashMap<E,Set<E>>();
  for (E e : parentMap.keys()) {
    E root = compressToRoot(e);
    Set<E> s = answerMap.get(root);
    if (s == null)
      answerMap.put(root, s = new HashSet<E>());
    s.add(e);
  }

return new HashSet<Set<E>>(1.0,answerMap.values());
}

public int numberOfClasses ()
{return rootSizeMap.size();}

public int numberOfMembers ()
{return parentMap.size();}

private Map<E,Integer> heights () {
  Map<E,Integer> answer = new HashMap<E,Integer>();
  for (E element : parentMap.keys()) {
    E e = element;
    int depth = 0;
    while (parentMap.get(e) != e) {
      e = parentMap.get(e);
      depth++;
    }
    Integer soFar = answer.get(e);
    if (soFar == null || soFar < depth)
      answer.put(e, depth);
  }
  return answer;
}

public int maxHeight () {
  return Collections.max(heights().values());
}

public void showMaps() {
  System.out.println("parentMap   (as list) = " + new ArrayList<Map.Entry<E,E>>(parentMap.entries()));
  System.out.println("rootSizeMap (as list) = " + new ArrayList<Map.Entry<E,Integer>>(rootSizeMap.entries()));
  System.out.println("heightMap   (as list) = " + new ArrayList<Map.Entry<E,Integer>>(heights().entries()));
  System.out.println("max height of tree    = " + maxHeight());
}

private Map<E,E>       parentMap   = new HashMap<E,E>();
private Map<E,Integer> rootSizeMap = new HashMap<E,Integer>();
} 
```

# java - 为什么如果没有在这个简单项目中启用的注释驱动支持，资源映射就无法工作？

> ID：13675434
> 
> 赞同：2
> 
> 时间：2012-12-03T00:05:11.317
> 
> 标签：java, spring, spring-mvc, annotations

我在 Spring MVC 世界中是个新闻，我有一个答案给你。

我已经通过 STS\Eclipse 中的相关模板项目创建了一个新的 Spring MVC 项目。

好的，它为我创建了一个简单的预配置 Spring MVC 项目。

**该项目通过在servlet-context.xml**文件中使用以下标记配置为**注释驱动：**

 **```
<annotation-driven /> 
```

这个标签是一个帮助标签，它提供了额外的服务，比如消息转换、JSR 303 验证等，这并不是绝对必要的，所以一个简单的控制器工作（我可以将类注释为 @Controller 并指定要由组件扫描的包-扫描标签）

好的...这对我来说很清楚...但是在 STS\Eclipse 创建的示例中，我注意到如果我从我的 servlet-context.xml 文件中删除**注释驱动的标签**，我还必须删除以下内容才能正常工作来自同一配置文件的标记：

```
<resources mapping="/resources/**" location="/resources/" /> 
```

如果我删除了注释驱动标签但我没有删除以前的资源映射标签，当我启动我的应用程序时，这不运行，这不运行并进入错误说我：HTTP 状态 404 - 并在堆栈中跟踪我有：

```
INFO : org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization completed in 1104 ms
dic 03, 2012 12:57:16 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /home/andrea/SpringSource/vfabric-tc-server-developer-2.7.2.RELEASE/base-instance/webapps/ROOT
dic 03, 2012 12:57:16 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /home/andrea/SpringSource/vfabric-tc-server-developer-2.7.2.RELEASE/base-instance/webapps/manager
dic 03, 2012 12:57:16 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
dic 03, 2012 12:57:16 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3144 ms
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/maventestwebapp/] in DispatcherServlet with name 'appServlet' 
```

但是，如果我还删除了以前的资源映射标签，项目运行良好......所以这意味着这一定是问题......似乎没有注释驱动的支持启用资源映射无法工作......

为什么？问题是什么？previus 资源映射标签的确切行为是什么？

太感谢了

安德烈亚

* * *

这是我的**servlet-context.xml**配置文件的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

<!-- Enables the Spring MVC @Controller programming model -->
<!--  <annotation-driven /> -->

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->
<context:component-scan base-package="com.mycompany.maventestwebapp" />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" /> 

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:30:51.283

通过您的日志文件后，资源加载没有任何错误，但控制器显示警告，“WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/maventestwebapp/]在名为“appServlet”的 DispatcherServlet 中”。我认为这是 404 错误的原因。

根据 Spring 规范，<mvc:annotation-driven/> 和 <mvc:resources /> 之间没有关系或依赖关系。

此外，我通过保持 <mvc:resources /> 测试了一个没有 <mvc:annotation-driven/> 的示例应用程序，它运行良好。发布您的 servlet-config 文件以进行进一步调查。**

# design-patterns - 命令模式和责任链

> ID：13675437
> 
> 赞同：2
> 
> 时间：2012-12-03T00:05:36.077
> 
> 标签：design-patterns, command-pattern, chain-of-responsibility

在我的应用程序中，我需要按一定顺序从数据库加载数据，例如加载所有客户，然后加载所有订单并加载产品等。但是，在一两种情况下，订单不同，也需要加载附加数据。

```
abstract Model
{
   public void load(Configuration config) {
      loadCustomers(config);
      loadOrders(config);
      loadProducts(config);
   }
}

ConcereteModel1 extends Model {
   doesn't overload load
}

ConcreteModel2 extends Model {
   public void load(Configuration config) {
      loadProducts(config);
      loadOrders(config);
      loadCustomers(config);
      loadAdditional(config);
   }
} 
```

我最初的想法是我是否可以使用命令模式（使用加载命令方法）来实际加载客户、订单或产品，并使用责任链来捆绑命令。这是一个好方法还是我在这里过度工程？

任何示例代码都会非常有帮助。感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:17:29.790

这听起来像是您的任务的正确选择。或者，您需要为数据加载步骤创建一个基类，并针对特殊情况以不同方式实现它。

这完全取决于确定您有特殊情况的最简单方法是什么。

请参阅代码示例[的责任链描述。](https://stackoverflow.com/questions/13643411/c-sharp-design-pattern-suggestions/13644074#13644074)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T08:50:15.400

我认为你必须注意：

您正在使用**技术方式**（例如命令模式）来隐藏**域规范**（“......但是，在一两种情况下......”）。

我建议开发一个出现第二个的解决方案。

# javascript - 多行字符串连接 - 忽略转义字符

> ID：13675438
> 
> 赞同：0
> 
> 时间：2012-12-03T00:05:37.383
> 
> 标签：javascript, string, special-characters

Javascript 中是否有类似于 C# 中的 @ 的抑制转义字符？我必须像下面那样组装一个刺痛 - 但是我遇到了多行布局和字符串中的一些字符的问题。如何在 Javascript 中连接这样一个字符串？

我尝试在 JAVASCRIPT 中连接我的字符串：

```
 var idfTEXT_ROOM = "
    ! " + this.Name +"
    ! -------------
    Zone,
    " + this.Name + ",           !- Name
    " + this.DirRelNorth + ",    !- Direction of Relative North {deg}
    0,                       !- X Origin {m}
    0,                       !- Y Origin {m}
    0,                       !- Z Origin {m}
    1,                       !- Type
... 
```

当然，它会抛出“Uncaught SyntaxError: Unexpected string”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:15:11.323

*   \ - 常规转义，如果您需要在字符串中加上引号，只需键入 \'
*   \n - 换行
*   \t - 制表符

对于多行字符串，这里有[不同的选项](https://stackoverflow.com/questions/805107/how-to-create-multiline-strings)供您选择。

我总是使用这种方法：

```
'Hello Javascript' + 
'world' +
'!!!' +
... 
```

# graph-algorithm - 设计一种算法来确定有向图是否具有唯一的拓扑排序

> ID：13675439
> 
> 赞同：0
> 
> 时间：2012-12-03T00:05:44.970
> 
> 标签：graph-algorithm

设计一种算法来确定有向图是否具有唯一的拓扑排序......因为我知道有向图具有唯一的拓扑排序当且仅当在拓扑顺序中的每对连续顶点之间存在有向边......但是怎么能我设计了一个算法来确定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:13:34.380

唯一的拓扑排序意味着只有一个子任务序列可以完成整个任务。这意味着没有选择，因此图形应该是一个列表，即一个任务应该依赖于另一个任务，而另一个任务依赖于另一个任务，依此类推。

# python - 如何使用 OpenBSD、Nginx、Python 和 NoSQL

> ID：13675440
> 
> 赞同：1
> 
> 时间：2012-12-03T00:05:56.417
> 
> 标签：python, nginx, nosql, openbsd

我熟悉 LAMP 系统，并且在过去 4 年中主要使用 PHP 进行编程。我正在学习 Python 并玩弄 Nginx。我们正在开发一个项目网站，该网站将处理大量 http 处理请求、流式视频（主要来自 youtube 或 vimeo 等提供商）。我的同事有使用 OpenBSD 的经验，并坚持我们将其用作 linux 的替代品。

*   我们想要使用 OpenBSD 的原因是它以安全着称。
*   我们选择 Python 的原因是它速度快。
*   我们想要使用 Nginx 的原因是，与 Apache 相比，它能够处理更多的 http 请求。
*   我们想要使用 NoSQL 的原因是众所周知，当数据库增长时 MySQL 会出现可伸缩性问题。

我们希望使用尽可能少的硬件尽可能快地加载网页（将使用缓存和 CDN）。这就是为什么我们要使用 ONPN（OpenBSD、Nginx、Python、Nosql）而不是传统的 LAMP（Linux、Apache、Mysql、PHP）。

我们不是一家很大的公司，所以我们使用的是开源技术。任何关于如何使用这些软件作为平台的建议以及提供硬件建议也很感激。也欢迎任何批评。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T00:31:33.877

我的建议——如果你不知道如何使用这些技术——不要这样做。很少有服务器会花费您比掌握您不知道的技术所花费的时间更少的时间。如果你想尝试一下 - 就去做吧。一件一件，而不是一次全部。如何使用它们没有神奇的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:36:42.610

我同意 wdev 的观点，学习这点所花的时间不值得你省下的钱。首先，MySQL 数据库不难扩展。WordPress 使用 MySQL 数据库，一些世界上最大的网站使用 MySQL（google 列表）。我也可以对 linux 和 PHP 说同样的话。

如果您使用最佳实践（CSS sprites）设计您的网站，如果您使用 CDN 和最佳实践（缓存、gzip 等），Apache 与 Nginx 的加载时间不会有很大差异。

我强烈敦促您重新考虑您的决定。他们似乎很不明智。

# .net - .Net 用户范围应用程序设置文件路径问题

> ID：13675445
> 
> 赞同：4
> 
> 时间：2012-12-03T00:06:43.720
> 
> 标签：.net, filepath, isolatedstorage, application-settings

我正在使用 .Net Framework 3.5 及更高版本构建 Windows 窗体应用程序。我在使用用户范围内的应用程序设置时遇到问题。

当我第一次阅读用户范围应用程序设置时，我了解到我的应用程序会将设置与用户相关联。我还从 MSDN 了解到，这些设置将保留在路径下的*user.config*文件中：**%LOCALAPPDATA%\CompanyName\ProductName\ProductVersion这与****Application.LocalUserAppDataPath** 参考 字段返回的确切值相同： [http://msdn。 microsoft.com/en-us/library/8eyb2ct1.aspx](http://msdn.microsoft.com/en-us/library/8eyb2ct1.aspx)

这里的问题是，MSDN 中关于文件路径的所有内容都是完全错误的。实验清楚地表明，文件路径实际上是：**%LOCALAPPDATA%\companyname\appdomainname_eid_hash\verison**

首先，我真的很想知道为什么这么重要的信息在 MSDN 中有错误的合理解释？

其次，这里的问题是我没有在 .Net 中使用部署方法（例如 Windows Installer 或 ClickOnce），我不打算使用它们，也不想使用它们。在这里，我只构建一个版本，他们将版本 exe 文件复制到主机。因为我没有使用安装程序，所以每次我更改程序集（即 exe 文件）的位置时，.Net Framework 都会将该程序集识别为不同的应用程序并为其创建一个具有不同*哈希的新文件夹*和一个新的 user.config 文件。这对我来说当然是一个问题，因为这意味着我正在考虑的不是“用户设置”，而是“用户和程序集设置”，这在逻辑上不适合我。我找不到用户可以将程序集重新定位到任何地方并且仍然可以访问相同设置文件的原因（正如 MSDN 错误地指出的那样！！）

此外，使用IsolatedStorage 时，我也面临同样的问题。同样在IsolatedStorage中，当程序集位于某个位置时，我存储的所有数据都完全无法访问，因为我重新定位exe文件的确切原因与应用程序设置问题中的确切原因相同。

我该如何解决这个问题，或者至少我可以知道带有散列的命名约定在.Net中的起源以及微软在决定相应地考虑exe重定位时可能做了什么推理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-16T19:52:53.050

我不知道为什么 MSDN 上的文档不正确，但您应该确保您正在查看[https://msdn.microsoft.com/en-us/library上的 .net 3.5 文档的正确版本/8eyb2ct1(v=vs.90).aspx](https://msdn.microsoft.com/en-us/library/8eyb2ct1(v=vs.90).aspx)

另外，根据文档：

> 设置文件位置
> 
> app.exe.config 和 user.config 文件的位置将**根据应用程序的安装方式而有所不同。**（我的重点补充）

应用程序设置过程与您正在绕过的部署紧密耦合。即使单击一次，某些部署策略也需要根据您的应用程序以编程方式获取以前的版本设置（[https://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.getpreviousversion(v=vs.90 ).aspx](https://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.getpreviousversion(v=vs.90).aspx) )

如果要求每次更新时都需要手动复制 .exe，那么滚动您自己的用户设置对象并使用序列化可能是更好的选择？然后，您可以将用户范围的设置存储在公共位置，例如公共应用程序文件夹，并在应用程序启动时根据用户反序列化用户设置。

# c# - String.Format 某些参数

> ID：13675449
> 
> 赞同：4
> 
> 时间：2012-12-03T00:07:16.647
> 
> 标签：c#, string, string-formatting

我认为这是一个常见问题，但我似乎在 SO 或谷歌上找不到任何东西。

是否可以仅格式化单个参数。例如，格式化`string foo = "{0} is {1} when {2}";`以使其返回 read `"{0} is cray when {2}"`?

**意图：**
我正在尝试格式化字符串，同时覆盖一个方法，然后在它的基本方法中格式化它

**成功**
感谢[这个答案](https://stackoverflow.com/questions/13675449/string-format-certain-argument/13675506#13675506)，所有答案都有帮助:)。

该单元测试有效：

```
string foo = String.Format("{0} is {1} when {2}", "{0}", "cray", "{2}");
Assert.AreEqual("{0} is cray when {2}", foo);
string bar = string.Format(foo, "this", null, "it works");
Assert.AreEqual("this is cray when it works", bar); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T00:15:35.473

从表面上看你的问题，我想你可以做到以下几点：

```
string foo = String.Format("{0} is {1} when {2}", "{0}", "cray", "{2}"); 
```

也就是说，只需将每个未评估的格式项替换为自身即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:11:19.420

不，这是不可能的。 `String.Format`将尝试替换每个带括号的占位符。如果您没有提供正确数量的参数，则会引发异常。

我不确定您为什么要这样做，但是如果您希望输出看起来像那样，则必须[转义括号](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)：

```
var foo = String.Format("{{0}} is {0} when {{1}}", "cray");
// foo is "{0} is cray when {1}" 
```

也许如果你[告诉我们你到底想做什么](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)，我们就能更好地帮助你。

# forms - 在提交表单之前检查文本区域是否为空白？

> ID：13675453
> 
> 赞同：0
> 
> 时间：2012-12-03T00:07:45.493
> 
> 标签：forms

所以我写了这段代码，以便每次有人点击提交按钮时，一个名为 check 的 JavaScript 函数将查看文本区域是否为空。如果不是，则将提交表单。这是我的代码。为什么它不起作用？

```
<form method=post name='form_post' id='form_post' action='SUBMITIT.PHP'>
<textarea   id=message name=message class=post onfocus=this.className='post_focus';                                      
placeholder='Share your thoughts'  maxlength=500></textarea>
<br>
<button onclick='check()' id=button name=button>Post</button>
</form>

<script type="text/javascript"> 
function check() 
{ 
if(!document.textArea.message.value=="") 
{ 
document.forms["form_post"].submit();
}
} 
</script> 
```

## 谢谢！

编辑：我终于让它工作了。如果您遇到类似问题，这里有一个模板。

```
<!--The form-->
<form action="mypage.php" method="post" name="myForm" id="myForm">
<textarea name=myTextArea id=myTextArea>
</textarea>
</form>
<br>
<button onclick='check()'>
Post
</button>

<!--The script that checks-->
<script type="text/javascript"> 
function check(){ 
String.prototype.trim = function() { return this.replace(/^\s+|\s+$/g, ""); }; 
var textAreaValue=document.getElementById('myTextArea').value; 
var trimmedTextAreaValue=textAreaValue.trim(); 
if(trimmedTextAreaValue!="") { 
document.forms["myForm"].submit(); 
} 
} 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:16:08.337

下面的炒锅，它也擦掉了不必要的空格，表单只有在给定字符时才会提交

```
<form action="yourpage.php" method="post" onsubmit="return check(this)">
    <textarea id="message"></textarea>
    <input type="submit" value="Post" />
</form>
<script>
function check(form){
    if (form.message.value.trim() == ""){
        return false
    }
}
</script> 
```

这是最简单的方法，也是建议的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T10:49:04.217

您可以简单地将“必需”添加到 HTML 中的 textarea 字段。

**注意**：虽然这个问题已经很老了，但我正在为将来的参考添加答案。

# android - 在具有非静态片段的布局上有效地使用布局编辑器

> ID：13675456
> 
> 赞同：6
> 
> 时间：2012-12-03T00:08:28.260
> 
> 标签：android, android-fragments, dynamic, android-context, graphical-layout-editor

凭借所有 Android 开发工具的强大功能，尤其是从版本 21 开始，图形布局编辑器是一个强大的工具，可以对具有每个配置和区域设置的片段的布局进行可视化控制。我知道一个典型`Activity`的布局 XML 将包含静态`fragment`标签，其中包含为布局编辑器嵌入的信息，例如`tools:layout="@layout/book_collection_view_window_list"`.

但是，由于我需要`Fragments`动态替换窗口`fragment`中的 有没有类似的东西或者我可以在这个容器上使用，所以在布局编辑器中不仅仅是黑色的空白，所以我可以利用它会给我的设计和验证功能？`FrameLayout``replace()``tools:layout``tools:context`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T22:06:43.807

根据 的[文档](http://developer.android.com/reference/android/widget/FrameLayout.html#attr_android%3aforeground)，它看起来`FrameLayout`就像您可以在`FrameLayout`标签上使用一个属性来将可绘制对象放在 ViewGroup 的前景中。

您可以在设置视图时使用它来查看 FrameLayout。我经常只是放一个颜色，这样我就可以看到它相对于背景和其他`View`s 的位置。

# python - 如何监控 wx.Panel 何时接收和失去焦点？

> ID：13675457
> 
> 赞同：0
> 
> 时间：2012-12-03T00:08:28.263
> 
> 标签：python, wxpython

我有一个名为`Editor`的类，它是`wx.Panel`. 在任何时间点，只有一个`Editor`实例可以是“活动”实例，我想监视它们何时接收和失去焦点，以便我可以对主菜单进行调整。我该怎么做呢？

* * *

### 我试过的

*   我试图听这个`wx.EVT_ACTIVATE`事件，但它显然只在框架和对话框上触发，而不是面板。
*   所有编辑器都添加到一个`wx.aui.AuiNotebook`实例中，所以我尝试监听该`wx.EVT_NOTEBOOK_PAGE_CHANGED`事件，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:58:28.987

好的，我想通了。面板没有“焦点”方面，因此必须在更高级别实施解决方案。由于我所有的`Editor`实例都是 的成员`wx.aui.AuiNotebook`，我可以监听选项卡的变化来决定编辑器何时失去和接收焦点。

监听`wx.aui.AuiNotebook`页面变化的事件是`wx.aui.EVT_AUINOTEBOOK_PAGE_CHANGED`，并且该事件对象具有属性`Selection`，并`OldSelection`确定哪个选项卡先前处于活动状态，以及哪个选项卡现在处于活动状态：

```
def on_notebook_page_changed(self, event):
    new_page = self.notebook.GetPage(event.Selection)

    if event.OldSelection > -1:
        old_page = self.notebook.GetPage(event.OldSelection)
    else:
        old_page = new_tab

    # ... 
```

# java - NumberFormatException 获得平均值

> ID：13675460
> 
> 赞同：-3
> 
> 时间：2012-12-03T00:08:56.890
> 
> 标签：java, arrays, numberformatexception

设计并实现一个程序，从用户那里读取一系列 10 个整数并打印它们的平均值。将每个输入值作为字符串读取，然后尝试使用 Integer.parseInt 方法将其转换为整数。如果此过程引发 NumberFormatException（意味着输入不是有效数字），则打印相应的错误消息并再次提示输入数字。继续读取值，直到输入 10 个有效整数。

输入 • 用户通过键盘输入的 10 个整数 输出 • 打印数字的平均值 • 错误消息 o 如果输入的内容不是整数 处理 • 导入扫描器类 • 读入每个整数值 o 使用整数转换整数。 parseInt 方法 • 创建异常 o 抛出 NumberFormatException  无效  打印错误消息

所以我目前正在设计这个，我没有从哪里开始编码。如何合并 numberformatexception 和 parseint？

编辑

导入 java.util.Scanner；

公共类 NumAverage {

```
public static void main (String [] args)
{
    //int a,b;
    int[] numbers = new int [10];

    Scanner numreader = new Scanner(System.in);

    try
    {
        System.out.println("Enter 10 num");
        for (int i = 0; i < numbers.length; i++)
            numbers[i] = numreader.nextInt();
            numbers[i] = Integer.parseInt(s)
    }
    catch(NumberFormatException numfo)
    {
        System.out.println(numfo.getMessage() + "cannot be converted to integer");
    } 
```

} }

那么如何从我的数组中获取要解析的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:13:19.073

这是作业吗？

[异常处理](http://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)

[Integer.parseInt(字符串)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:14:28.183

我假设转换部分是让你头疼的部分。

您可以使用一个 `try-catch`子句：

```
int a;
try{
    a = Integer.parseInt(aString);
}
catch(NumberFormatException e){
    System.out.println("An exception has been thrown. " + aString + 
         " is not a valid number");
} 
```

这是接受字符串的部分，尝试将其转换为数字，如果抛出异常，它会捕获它并打印一条消息。`String`如果无法转换为数字，将引发异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T00:14:55.443

如果您有“作家的障碍”，请使用自上而下的抽象编程：

```
REPEAT
    read a string;
    IF converted to an integer THEN
       ...
    ENDIF;
UNtIL ten integers have been read 
```

然后将代码具体化。

# php - 我有一个很长的 934 个条目列表，并希望在 6 个多列菜单中显示它

> ID：13675461
> 
> 赞同：0
> 
> 时间：2012-12-03T00:09:03.460
> 
> 标签：php, css

这是生成列表并查询数据库的 php 代码，我已经有一些 css，但我想将列表分成 6 列，每列 16 行，并在末尾添加更多 ... 链接

```
<?php

$show_manufacturers= true;

// for large lists of manufacturers uncomment this section

/*  if (($_GET['main_page']==FILENAME_DEFAULT and ($_GET['cPath'] == '' or    $_GET['cPath'] == 0)) or  ($request_type == 'SSL')) {
$show_manufacturers= false;
} else {
$show_manufacturers= true;
}
*/ 
```

// 设置为 true 以显示制造商图像代替名称

```
define('DISPLAY_MANUFACTURERS_IMAGES',false);
if ($show_manufacturers) {

// only check products if requested - this may slow down the processing of the    manufacturers sidebox
if (PRODUCTS_MANUFACTURERS_STATUS == '1') {
$manufacturer_sidebox_query = "select distinct m.manufacturers_id, m.manufacturers_name, m.manufacturers_image
                        from " . TABLE_MANUFACTURERS . " m
                        left join " . TABLE_PRODUCTS . " p on m.manufacturers_id = p.manufacturers_id
                        where m.manufacturers_id = p.manufacturers_id and p.products_status= 1
                        order by manufacturers_name";
} else {
$manufacturer_sidebox_query = "select m.manufacturers_id, m.manufacturers_name, m.manufacturers_image
                        from " . TABLE_MANUFACTURERS . " m
                        order by manufacturers_name";
}

$manufacturer_sidebox = $db->Execute($manufacturer_sidebox_query);

if ($manufacturer_sidebox->RecordCount()>0) {
$number_of_rows = $manufacturer_sidebox->RecordCount()+1; 
```

// 显示一个列表

```
$manufacturer_sidebox_array = array();
//      kuroi: commented out to avoid starting list with text scrolling list    entries such as "reset" and "please select"
//    if (!isset($_GET['manufacturers_id']) || $_GET['manufacturers_id'] == '' ) {
//      $manufacturer_sidebox_array[] = array('id' => '', 'text' => PULL_DOWN_ALL);
//    } else {
//      $manufacturer_sidebox_array[] = array('id' => '', 'text' =>  PULL_DOWN_MANUFACTURERS);
//    }

while (!$manufacturer_sidebox->EOF) {
  $manufacturer_sidebox_name = ((strlen($manufacturer_sidebox- >fields['manufacturers_name']) > MAX_DISPLAY_MANUFACTURER_NAME_LEN) ?  substr($manufacturer_sidebox->fields['manufacturers_name'], 0,  MAX_DISPLAY_MANUFACTURER_NAME_LEN) . '..' : $manufacturer_sidebox- >fields['manufacturers_name']);
  $manufacturer_sidebox_image = $manufacturer_sidebox->fields['manufacturers_image'];
  $manufacturer_sidebox_array[] =
    array('id' => $manufacturer_sidebox->fields['manufacturers_id'],
          'text' => DISPLAY_MANUFACTURERS_IMAGES ?
            zen_image(DIR_WS_IMAGES . $manufacturer_sidebox_image,     $manufacturer_sidebox_name) :
            $manufacturer_sidebox_name);
  $manufacturer_sidebox->MoveNext();
}

} 
```

} // **$show_manufacturers 这是我需要进行更改的地方**

```
for ($i=0;$i<sizeof($manufacturer_sidebox_array);$i++) {
      $content = '';
  $content .= '<li ><a class="hide" href="' . zen_href_link(FILENAME_DEFAULT, 'manufacturers_id=' . $manufacturer_sidebox_array[$i]['id']) . '">';
  $content .= $manufacturer_sidebox_array[$i]['text'];
  $content .= '</a></li>' . "\n";
  echo $content;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:36:09.100

如果您正在寻找纯 CSS 解决方案，您有 2 个选项：

使用 CSS3`columns`属性，但它只适用于现代浏览器（有些需要前缀版本）。无论如何，您都可以保证获得 6 列。您的元素将像报纸文章一样呈现（从上到下阅读）。

[http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)

[http://jsfiddle.net/funag/](http://jsfiddle.net/funag/)

使用花车。Float 一直存在，但如果您正在查看可能会自动换行的内容，则可能需要花费更多精力来排列特定的方式。好的一面是，如果您的设备太窄而无法支持 6 列，它会优雅地换行，但对于该宽度而言，多少列是有意义的，而无需滚动。您的元素将像段落一样呈现（从左到右阅读）。

[http://jsfiddle.net/funag/2/](http://jsfiddle.net/funag/2/)

如果你想通过 PHP 分解你的元素，你想要的是模运算符：

```
if ($i % 6 == 0) {
    // insert html tags to force a break
} 
```

# jquery - 如何查看页面上元素的所有事件绑定在哪里？

> ID：13675463
> 
> 赞同：0
> 
> 时间：2012-12-03T00:09:40.247
> 
> 标签：jquery, events

> **可能重复：**
> [使用 jQuery 访问绑定到事件处理程序的函数](https://stackoverflow.com/questions/2388030/accessing-functions-bound-to-event-handlers-with-jquery)

我的页面上有大约 10 个 jQuery 插件。似乎某些元素附加了两个事件，因为一个 ajax 调用可以说当 .change() 在文本框中发生时会触发两个 post 调用。在 Firebug 或除 Firefox 之外的其他工具或浏览器（我没有找到）中，您是否可以看到附加到页面元素的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:32:34.723

Eventbug是[Firebug](https://getfirebug.com/wiki/index.php/Firebug_Extensions#Eventbug)的扩展，它

> 列出按事件类型分组的页面上的所有事件处理程序

# java - DisplayTag：如何迭代地图

> ID：13675464
> 
> 赞同：1
> 
> 时间：2012-12-03T00:10:03.797
> 
> 标签：java, jsp, hashmap, displaytag, stripes

我有一个地图，我想对其进行迭代以填充 DisplayTag 表。我要做的是为每个 Map 条目创建一个单独的列。我的地图如下所示：

```
Map<String, List<String>> testMap = new LinkedHashMap<String, List<String>>();

// please ignore the bad list creation - just using this to get my point across.
testMap.put("Title 1", {"row 1 value", "row 2 value", "row 3 value"});
testMap.put("Title 2", {"row 1 value", "row 2 value", "row 3 value"});
testMap.put("Title 3", {"row 1 value", "row 2 value", "row 3 value"}); 
```

我想最终得到一个表，其中键集（“Title 1”、“Title 2”等）作为我的列标题，关联列表作为我的列数据。这支持吗？

# python - 如何在 python 类中修复我的代码变量？

> ID：13675465
> 
> 赞同：0
> 
> 时间：2012-12-03T00:10:18.533
> 
> 标签：python, class, variables, button, tkinter

```
from tkinter import *

class GameBoard(Frame):
  def __init__(self):
    top = Toplevel()
    Frame.__init__(self)
    self.master.title("test")
    self.grid()
    #button frame
    self.__buttonPane = Frame(self)
    self.__buttonPane.grid()
    #buttons
    self.__buttonA1 = Button(self.__buttonPane,text = "A1",command = self._test("A"))
    self.__buttonA1.grid()

 def _test(self,test):
    if self.__buttonA1["state"] == NORMAL:
       print(test)

def main():
  GameBoard().mainloop()

main() 
```

由于变量，此代码将不起作用，如果我删除变量 test 并制作它

```
from tkinter import *

class GameBoard(Frame):
  def __init__(self):
    top = Toplevel()
    Frame.__init__(self)
    self.master.title("test")
    self.grid()
    #button frame
    self.__buttonPane = Frame(self)
    self.__buttonPane.grid()
    #buttons
    self.__buttonA1 = Button(self.__buttonPane,text = "A1",command = self._test)
    self.__buttonA1.grid()

  def _test(self):
    if self.__buttonA1["state"] == NORMAL:
      print("hi")

def main():
  GameBoard().mainloop()

main() 
```

我将如何修复我的代码以便允许输入变量？这只是我正在做的一个测试，所以我可以让它在更大的代码中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:29:40.303

问题是当你这样做时`command = self._test("A")`，你正在调用函数，并使用返回值（`None`在这种情况下）。

解决方案是使用[`functools.partial()`](http://docs.python.org/3/library/functools.html#functools.partial)，它接受一个函数和一些值，然后为您提供一个新函数，该函数只使用您传递给它的值调用给定函数（以及您在运行它时传递​​的任何其他其他函数）：

```
command = functools.partial(self._test, "A") 
```

您也可以通过使您的函数返回一个函数来手动执行此操作：

```
def _test(self, test):
    def f(self):
        if self.__buttonA1["state"] == NORMAL:
           print(test)
    return f 
```

请注意，这会损害您在其他地方正常通话的能力`_test()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:32:14.780

当你指定`command = self._test`,`self._test`是一个将被调用的函数。`self._test("A")`不是函数，它是对函数的调用（`None`因为定义中没有`return`语句而返回）。

您可以编写'一个函数，该函数调用`self._test("A")`为`lambda: self._test("A")``functools.partial(self._test, "A")``GameBoard.__init__`

```
def _f():
    self._test("A")
self.__buttonA1 = Button(self.__buttonPane,text = "A1",command = _f) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:03:29.337

在为按钮创建处理程序时，最好将按钮本身传递给处理程序。这样，单个处理程序可以处理许多按钮，并且处理程序可以自由检查按钮的所有属性。

这是基于您的代码实现此目的的简单方法：

```
 self.__buttonA1 = Button(self.__buttonPane,text = "A1")
    self.__buttonA1.grid()
    self._connect_button(self.__buttonA1, self._test)
    self.__buttonA2 = Button(self.__buttonPane,text = "A2")
    self.__buttonA2.grid()
    self._connect_button(self.__buttonA2, self._test)

  def _connect_button(self, button, handler):
    button['command'] = lambda: handler(button)

  def _test(self, button=None):
    if button is not None:
      print("test:text:", button["text"])
      print("test:state", button["state"]) 
```

# javascript - setInterval 不能按预期使用计数功能

> ID：13675466
> 
> 赞同：0
> 
> 时间：2012-12-03T00:10:42.710
> 
> 标签：javascript

我知道这可能是一个简单的答案，但我无法将我的函数与`setInterval`. 这是我到目前为止所拥有的：

```
function countUp(n) {
     console.log(n++);
}

setInterval( function() { countUp(10); }, 1000); 
```

如果我将变量移到函数之外并增加该值，它将起作用。但是，我希望能够在调用函数时将数字设置为任何值`countUp`。上面的代码只是保持记录`10`。

**编辑：**

有没有办法将参数传递给该函数并使其与 setInterval 一起工作而无需声明全局变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:14:11.777

您需要在函数的封闭范围内增加一个变量：

```
var n = 10;

function countUp() {
    console.log(n++);
}

setInterval(countUp, 1000); 
```

**更新：**这是一个不涉及全局变量的策略：

```
function countUp(start) {
    return function() {
        console.log(start++)
    }
}
setInterval(countUp(10), 1000); 
```

正如我所指出的，计数器只需要在封闭范围内，而不是全局范围内。所以将它传递给一个可以在闭包中引用它的函数在这里可以正常工作。

# java - 在支持 bean 中创建动态可编辑数据表？

> ID：13675467
> 
> 赞同：1
> 
> 时间：2012-12-03T00:10:49.437
> 
> 标签：java, jsf, primefaces

我正在尝试使用支持 bean 中的输入创建一个数据表，但显然这些值没有更新......

JSF 代码：

```
<h:form id="formTest" >
     <h:panelGroup binding="#{backingAlgoritmo.panelGroup}" />
</h:form> 
```

支持 bean 代码：

```
public HtmlPanelGroup getPanelGroup() {

    panelGroup = new HtmlPanelGroup();

    panelGroup.getChildren().add(getDataTableCromossomos());

    HtmlCommandButton saveButton = new HtmlCommandButton();
    saveButton.setId("save"); 
    saveButton.setValue("Save");
    saveButton.setActionExpression(
            createActionExpression("#{algGeneticoBean.executa()}", null));
    panelGroup.getChildren().add(saveButton);

    return panelGroup;

}

public DataTable getDataTableCromossomos() {
    dataTableCromossomos = new DataTable();
    dataTableCromossomos.setValueExpression("value", createValueExpression("#{algGeneticoBean.algoritmo.populacaoInicial.cromossomos}", List.class));
    dataTableCromossomos.setVar("c");

    if (algGeneticoBean != null) {
        int cont = 0;
        for (int i = 0; i < algGeneticoBean.getQtdGenes(); i++) {
            Column column = new Column();
            dataTableCromossomos.getChildren().add(column);

            HtmlInputText input = new HtmlInputText();
            input.setValueExpression("value", createValueExpression("#{c.genes.get(" + i + ").valorGeneString}", String.class));
            input.setRequired(true);
            input.setSize(2);
            System.out.println("#{c.genes.get(" + i + ").valorGene}");
            column.getChildren().add(input);

        }
    }

    return dataTableCromossomos;
} 
```

创建了dataTable，但是当我提交表单时，bean中的值没有更新

我正在使用 primefaces 3.3.1

任何想法？

非常感谢

# sql - 保证Oracle SQL查询中的顺序

> ID：13675470
> 
> 赞同：2
> 
> 时间：2012-12-03T00:11:01.023
> 
> 标签：sql, oracle, indexing

我正在编写一个查询，以提供大于一个值的下 5 个最小项，即主键（例如 101）。在这种情况下，Id 是 char(19)，Id 是聚集索引。

我对查询的尝试如下：

```
SELECT *
(SELECT *
(SELECT * FROM 
PERSON
ORDER BY ID)
WHERE ID >=  '101')
WHERE rownum <= 5 
```

我要保证返回的 5 个结果是表中大于 101 的 5 个最大的 id，而不是首先遇到的 5 个最大的结果。因此，我在查询中添加了一个 Order by。我知道 rownum 是在 where 子句之后但在 order by 执行之前分配的。

我的查询/逻辑是否正确？我需要 order by 子句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:15:23.330

如果您想要最大的 5 个，则需要按降序排列。您还可以合并两个内部查询：

```
Select
  *
From (
  Select
    * 
  From
    Person
  Where 
    ID >= '101'
  Order By
    ID Desc
  ) a
Where
  rownum <= 5 
```

如果您实际上是指大于 100 的 5 个最小 ID，请坚持使用升序。

在包含数字的字符字段上做大于，可能不会像你期望的那样做，它会按照字母顺序而不是数字顺序。所以 201 将大于 1000000。

[奇怪的排序示例](http://sqlfiddle.com/#!4/d79f1/2)

如果要进行数字比较，则将 where 过滤器更改为`To_Number(ID) >= 101`（或者最好将列更改为数字类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:09:03.810

```
SELECT *
FROM
    ( SELECT *
           , ROW_NUMBER() OVER(ORDER BY ID) AS rn 
      FROM PERSON
      WHERE ID >=  '101'
    ) tmp
WHERE rn <= 5 ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T00:17:22.647

为此，您不需要三个 SELECTS：

```
SELECT * FROM PERSON WHERE ID >= '101' ORDER BY ID DESC 
```

如果需要升序，则将其包装在 WHERE ROWNUM <= 5 的外部 SELECT 和 ORDER BY ID ASC 中。

# testing - 如果用例未通过用例测试会怎样？

> ID：13675471
> 
> 赞同：0
> 
> 时间：2012-12-03T00:11:06.847
> 
> 标签：testing, use-case, rational-unified-process

*我无法在互联网上的任何地方找到这个问题，而且由于我目前正在做我的考试项目，我希望这个问题能得到解答。*

如果用例未能通过 boss/EBP/size 测试，会发生什么情况？你把它扔掉，重写它，它会变成非功能性需求吗？

或者测试是否只是证明用例对项目的其余部分是否具有高业务/风险/架构价值？并且您应该降低测试失败的用例的优先级（如果只有一个测试）？

谢谢你的时间。据我所知，克雷格·拉曼的书并没有真正深入探讨这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:00:06.340

我假设您参考[http://www.craiglarman.com/wiki/downloads/applying_uml/larman-ch6-applying-evolutionary-use-cases.pdf](http://www.craiglarman.com/wiki/downloads/applying_uml/larman-ch6-applying-evolutionary-use-cases.pdf)。

> 它是否成为非功能性需求？

在绝大多数情况下，用例代表功能性需求，因此您不太可能将它们重构为非功能性需求。

如果您可以重写它们并且它们很可能通过测试，那么您可能应该这样做。如果无法实现重写，尝试在其中找到真正的价值；您可能会发现这些信息在后续建模步骤中很有用。如果您没有看到这种情况发生，请将其放入垃圾箱...

> 并且您应该降低测试失败的用例的优先级（如果只有一个测试）？

如果您坚持使用未通过尺寸测试的*游戏板上移动棋子*的示例，您可能最好将其放入活动图中或将其包含在此步骤实际所属的相应用例的文档中。

参考拉曼提到的老板测试，“登录”可能成为其他用例的先决条件。您还可以将几个加入到具有更可衡量价值的用例中。正如作者所提到的，测试可能会失败，但用例仍然是有价值的（请参阅*合理违规*）。

所以至少这是常识所暗示的。RUP 中可能有一些规则（= 不知道），这些规则另有说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T10:28:09.920

如果正在考虑的用例未通过**Boss 测试**（意味着该用例对老板没有价值）

然后它可以作为一个**通用子函数**（因为它是所有其他主要用例的子函数

如果你问我，我不会正式指定任何名称来为用例分配**优先级**，以便考虑对它们进行适当的测试。

这些只是分配给优先级的名称。

# spring - Spring框架web教程404

> ID：13675472
> 
> 赞同：0
> 
> 时间：2012-12-03T00:11:13.940
> 
> 标签：spring, web-applications, http-status-code-404

我刚刚开始学习 spring 框架，老实说，我什至无法完成在这个网站上制作的教程 ： [http](http://www.tutorialspoint.com/spring/spring_mvc_hello_world_example.htm) ://www.tutorialspoint.com/spring/spring_mvc_hello_world_example.htm 也不是这个： [http://www.tutorialspoint .com/spring/spring_mvc_form_handling_example.htm](http://www.tutorialspoint.com/spring/spring_mvc_form_handling_example.htm)

在完成这两个教程后，我得到了同样的错误：

> *HTTP 状态 404 请求的资源不可用。*

我什至在不执行此步骤的情况下尝试了它：“将您的 HelloWeb.war 文件保存在 Tomcat 的 webapps 文件夹中。” 相反，我只是在 Eclipse 中运行它。它没有用。

在过去的几天里，我已经尝试了许多修复，大部分都发布在 stackoverflow 上，但没有一个有效。

我正在使用最新的 spring 库、tomcat 7.0 和最新的 eclipse 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T18:55:09.447

到目前为止我注意到的...

1st - HelloWeb-servlet.xml：我已将 xsd 从 3.0 更改为 3.2（我机器上安装的当前框架版本是 3.2.2，我不知道为什么 3.0 从 Eclipse IDE 返回错误，我也没有决定进一步调查此时此刻

第二 - 本教程建议您创建 Web.xml，但您应该创建 web.xml，我在探索 IDE 时注意到了这一点，并试图查看安装了哪些 servlet，Eclipse 告诉我没有安装 servlet，没有'web .xml' 找到了！

如果您将 WAR 导出到 Tomcat 并访问此链接，该应用程序运行良好

```
http://localhost:8080/HelloWeb/hello 
```

# sql - 引发 SQL ORA-00979 错误

> ID：13675476
> 
> 赞同：2
> 
> 时间：2012-12-03T00:12:08.747
> 
> 标签：sql, oracle, group-by

我正在尝试创建一个查询，该查询返回另一个表中最多次数的事物的名称和国家/地区。

这是结构：

```
ShipModels(mname, type, country, numGuns, gunSize)
Ships(sname, hasModel, launchYear)
Battles(bname, year)
Outcomes(ship, battle, result) 
```

我尝试了很多不同的东西，但无法让它发挥作用。这是我当前的查询：

```
SELECT ship, country
FROM ShipModels, Ships, Outcomes
WHERE hasModel = mname AND ship = sname
GROUP BY ship
HAVING COUNT(ship) >= 
( SELECT COUNT (ship) FROM Outcomes GROUP BY ship); 
```

甲骨文错误：

```
ERROR at line 1:
ORA-00979: not a GROUP BY expression 
```

根据我的阅读，当 SELECT 语句中有聚合函数时会引发此错误，但是......嗯，没有。有什么我想念的吗？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:34:21.287

你包括`country`在`SELECT`：

```
SELECT ship, country 
```

但不在`GROUP BY`. 将该行更改为：

```
GROUP BY ship, country 
```

* * *

当你更正它时，你会遇到另一个错误，因为子查询不是标量，例如不返回单个值：

```
( SELECT COUNT (ship) FROM Outcomes GROUP BY ship) 
```

你可能打算写：

```
( SELECT MAX(cnt)
  FROM
    ( SELECT COUNT(ship) AS cnt FROM Outcomes GROUP BY ship ) t
) 
```

因此，完整的查询将或多或少：

```
SELECT ship, country
FROM ShipModels, Ships, Outcomes
WHERE hasModel = mname AND ship = sname
GROUP BY ship, country
HAVING COUNT(ship) = 
    ( SELECT MAX(cnt)
      FROM
        ( SELECT COUNT(ship) AS cnt FROM Outcomes GROUP BY ship ) t
    ) ; 
```

您也可以使用关键字将其编写得更像您的尝试`ALL`：

```
SELECT ship, country
FROM ShipModels, Ships, Outcomes
WHERE hasModel = mname AND ship = sname
GROUP BY ship, country
HAVING COUNT(ship) >= ALL
    ( SELECT COUNT(ship) AS cnt FROM Outcomes GROUP BY ship ) ; 
```

* * *

如果您使用显式连接的“现代”(SQL-92) 语法也会很好。代替：

```
FROM ShipModels, Ships, Outcomes
WHERE hasModel = mname AND ship = sname 
```

出于各种原因，最好写：

```
FROM ShipModels m
  JOIN Ships s ON s.hasModel = m.mname
  JOIN Outcomes o ON o.ship = s.sname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:17:43.153

问题在于 HAVING 子句中的 count(ship)。我认为这是 select 语句中的聚合函数。

# asp.net - ASP.NET CSHTML - “关键字‘用户’附近的语法不正确。”

> ID：13675477
> 
> 赞同：1
> 
> 时间：2012-12-03T00:12:09.717
> 
> 标签：asp.net, .net, sql, razor, webmatrix

我正在尝试学习如何使用 CSHTML 和 .NET 进行简单的数据库连接和查询输出到网站，但我遇到了数小时的问题，从我的连接字符串到我遇到的实际查询都有问题。请帮助我找到问题并让这个基本查询正常工作。

数据库=Microsft SQL Express
架构= id (int)、用户 (nchar(10))、密码 (char(32))。

**Web.Config 的内容**

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
   <connectionStrings>
   <add name="MyConnectionString"
     connectionString="Data Source=LAPTOP\SQLEXPRESS;Initial Catalog=databasename;Integrated Security=False;User ID=sa;Password=password" />        
</connectionStrings>
<system.web>
   <compilation debug="true" targetFramework="4.0" />
</system.web>
</configuration> 
```

下面是我失败的查询尝试。我尝试使用 w3 学校[http://www.w3schools.com/aspnet/webpages_database.asp](http://www.w3schools.com/aspnet/webpages_database.asp)的示例无济于事。

**ListProducts.cshtml 的内容**

```
@{
var connectionString = "Data Source=LAPTOP\\SQLEXPRESS;Initial Catalog=databasename;    Integrated Security=True";
var providerName = "System.Data.SqlClient";
var db = Database.OpenConnectionString(connectionString, providerName);
var selectQueryString = "SELECT * from user";
}
<html> 
<body> 
<h1>Test</h1> 
<table> 
<tr>
<th>id</th> 
<th>username</th> 
<th>password</th> 
</tr>
@foreach(var row in db.Query(selectQueryString))
{
<tr> 
<td>@row.id</td> 
<td>@row.user</td> 
<td>@row.password</td> 
</tr> 
}
</table> 
</body> 
</html> 
```

每次我跑我都会收到这个错误

```
Server Error in '/' Application.
Incorrect syntax near the keyword 'user'.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Data.SqlClient.SqlException: Incorrect syntax near the keyword 'user'.

Source Error:

Line 14: <th>password</th> 
Line 15: </tr>
Line 16: @foreach(var row in db.Query(selectQueryString))
Line 17: {
Line 18: <tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T01:00:36.927

尝试`user`用方括号括起来：

```
var selectQueryString = "SELECT * from [user]"; 
```

`user`是SQL 中[的保留字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:57:34.477

原来它一定与我的数据库有关。我有一个名为 user 的表，其中有一列也称为 user。我将表用户重命名为用户，更新了代码，现在一切正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T00:27:34.683

猜测问题与数据库（初始目录）有关。

```
Data Source=LAPTOP\\SQLEXPRESS;Initial Catalog=databasename 
```

您的数据库真的命名为“databasename”吗？

# c++ - 制作适用于 C++ 代码的 GUI

> ID：13675480
> 
> 赞同：0
> 
> 时间：2012-12-03T00:12:39.047
> 
> 标签：c++, user-interface, debian

您将如何在 debian linux 系统中制作与我的 C++ 程序一起使用的 GUI，以显示我的 C++ 代码中的变量？我有我的 C++ 程序在循环中，并且在它不断更新时有我想要的 GUI 显示信息。如果有比制作 GUI 更简单的方法来做到这一点，有人知道怎么做吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:17:44.370

C++ 有多种不同的 GUI 框架。查看[Qt](http://qt-project.org/)或这些[GTK](http://developer.gnome.org/gtk-tutorial/2.90/)示例

# google-app-engine - Google App Engine Datastore - 检索数据并传递给模板

> ID：13675489
> 
> 赞同：2
> 
> 时间：2012-12-03T00:13:54.160
> 
> 标签：google-app-engine, google-cloud-datastore

我是初学者，并且正在使用 GAE 数据存储区 - 已检索 main.py 中的值并传递给模板 html。我期待的列表中只有 2 个条目 [maggie u, jerry u]

但是，在我的控制台中，我看到有转义字符——这就是我的 jquery 自动完成功能不起作用的原因吗？我如何摆脱这些转义字符？？？对不起，如果这个问题对你那里有经验的人来说是愚蠢的。非常感谢任何帮助！

这是我的模板 html 文件中的一部分：

```
 var myList = [u&#39;maggie u&#39;, u&#39;jerry u &#39;];
 $(function() {
    $( "#Iname").autocomplete({
        source: myList
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:57:33.907

看起来您将列表作为字符串而不是列表传递。例子

```
my_list = [u'maggie u', u'jerry u']   # a list with two unicode literals 
str(myList)                           # results in : "[u'maggie u', u'jerry u']" 
```

# ruby-on-rails - 从模块中调用实例方法

> ID：13675492
> 
> 赞同：1
> 
> 时间：2012-12-03T00:14:11.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, inheritance

我有几个方法我在几个 ActionMailer 实例中反复调用，我想将它们移动到一个模块中，以便我可以将它们作为一个组包含并干燥。

```
module SendgridSettings
 open_tracking true
 add_filter_setting("subscriptiontrack", "enable", 1)
 add_filter_setting("subscriptiontrack","replace","{{ unsubscribe_url }}")
 uniq_args({'id' => email.id, 'organization_id' => organization.id})
 substitute '{{ person.first_name }}', recipients
 set_credentials(organization)
end 
```

这是相关的邮件代码：

```
class NewChargeMailer < ActionMailer::Base
  def charge_email(recipient, transaction, organization)
  include SendgridSettings 
```

我收到`undefined method`SendgridSettings:Module 的错误 open_tracking'，因为它似乎是在模块上应用方法，而不是在包含它的对象上。

我在网上看到的大多数例子都是关于在模块中定义方法，然后在继承对象中使用它们。我想我正试图做相反的事情，并且无法找到一种方法来做到这一点。这样的事情是否可能，甚至是一个好主意？我并不热衷于使用模块，它似乎是隔离有时需要作为一个组调用的方法的自然方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:30:38.127

您可能需要执行以下操作：

```
module SendgridSettings

  def self.included(base)
    base.class_eval do
      before_filter :default_settings
    end
  end

  def default_settings
    #write your code here
  end

end 
```

这段代码也有可能在模块内工作：

```
::ActionMailer::Base.register_interceptor(self) 
```

你也可以像控制器一样使用 ActionMailer：

```
module ActionMailer
  class Base < AbstractController::Base
    #...
  end
end 
```

资料来源： [Rails 3：尝试使用模块扩展 Action Mailer](https://stackoverflow.com/questions/8328773/rails-3-trying-to-extend-action-mailer-with-a-module) [https://github.com/weppos/actionmailer_with_request/blob/master/lib/actionmailer_with_request.rb](https://github.com/weppos/actionmailer_with_request/blob/master/lib/actionmailer_with_request.rb) [http://railsdispatch.com/posts/actionmailer](http://railsdispatch.com/posts/actionmailer)

# php - 简化目录字符串

> ID：13675495
> 
> 赞同：3
> 
> 时间：2012-12-03T00:14:29.513
> 
> 标签：php, html

采取以下目录结构：

*   家长1
    *   子文件夹
        *   子文件夹 1
        *   子文件夹 2

子文件夹 2 的路径为：

```
Parent/Child folder/Child Folder 2 
```

但是，另一个有效路径也可以是

```
Parent/Child folder/Child Folder 1/../Child Folder 2 
```

有没有办法“简化”路径，或转换路径，例如：

```
Parent/Child folder/Child Folder 1/../Child Folder 2 
```

至

```
Parent/Child folder/Child Folder 2 
```

我试图找到一种从`opendir($directory)`给你的句柄中提取文件名的方法，但我还没有找到一种方法来做到这一点。我也很确定肯定有一些术语或比“简化”更好的措辞，但我不知道要搜索什么。“简化路径” php 并没有太大帮助。

编辑：

我注意到 realpath 给了我完整的完整路径。它并没有给你相对的，如`Parent/Child folder/Child Folder 2`，但这`C:\Path\To\Server\Directory\Parent\Child Folder\Child Folder 2` 有点令人失望，但我可以通过一些字符串操作将它转换回来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:16:10.737

如果路径确实存在，您可以使用它[`realpath()`](http://php.net/manual/en/function.realpath.php)来解析相对路径部分。它还解析符号链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:16:14.740

尝试[`realpath()`](http://us3.php.net/manual/en/function.realpath.php)

```
$path = realpath('Parent/Child folder/Child Folder 1/../Child Folder 2'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T00:16:57.393

尝试使用功能[`realpath()`](http://php.net/manual/en/function.realpath.php)。

# android - com.google.android.apps.genie.geniewidget 是封闭源代码吗？

> ID：13675502
> 
> 赞同：0
> 
> 时间：2012-12-03T00:15:19.857
> 
> 标签：android

我想在 com.google.android.apps.genie.geniewidget 的源代码中检查一些东西，但我在任何地方都找不到。是闭源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:39:58.553

> 是闭源吗？

是的。

# python - 在 Python 中压缩嵌套列表

> ID：13675505
> 
> 赞同：2
> 
> 时间：2012-12-03T00:15:28.200
> 
> 标签：python

假设我有以下两个列表/numpy 数组：

```
List1 = [[1,2,3,4], [10,11,12], ...]
List2 = [[-1,-2-3,-4], [-10,-11,-12], ...] 
```

我想获得一个包含上面嵌套列表压缩的列表：

```
Result = [[(1,-1), (2,-2), (3,-3), (4,-4)], [(10,-10), (11, -11), (12,-12)], ...] 
```

有没有办法用单线（并且以 Pythonic 方式）做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T00:17:22.433

```
l1 = [[1,2,3,4], [10,11,12]]
l2 = [[-1,-2,-3,-4], [-10,-11,-12]]

print [zip(a,b) for a,b in zip(l1,l2)] 
```

```
[[(1, -1), (2, -2), (3, -3), (4, -4)], [(10, -10), (11, -11), (12, - 12)]]

```

# c++ - RPC：当数组太大时，xdr_bytes“无法编码参数”

> ID：13675515
> 
> 赞同：0
> 
> 时间：2012-12-03T00:16:59.027
> 
> 标签：c++, rpc, sunrpc

我试图通过 RPC 发送一个数组，但是当数据数组变得很大时，我收到“RPC：无法编码参数”。根据我所见，不到 10Kb。

这是失败的线路。

```
xdr_bytes (xdrs, (char **)&objp->data, (uint*)&objp->len, objp->len)) 
```

这是被引用的结构。

```
struct dataStruct {
    unsigned int len;
    u_char *data;
}; 
```

有没有办法解决这个错误，或者有另一种方法来发送任意大的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:15:28.093

在检查了其他 RPC 命令的联机帮助页后，我发现了这一点：

“警告：使用 UDP 有其缺点。由于基于 UDP 的 RPC 消息最多只能容纳 8 KB 的编码数据，因此这种传输不能用于需要大参数或返回大结果的过程。”

我确实在使用 UDP，并在切换到 TCP 消息后正确发送到服务器。

# ubuntu - 如何在 Bluefish 文本编辑器中设置通用选项卡大小？

> ID：13675516
> 
> 赞同：2
> 
> 时间：2012-12-03T00:17:18.033
> 
> 标签：ubuntu, text-editor, tab-size

不久前我开始使用 Bluefish 文本编辑器，它有一些非常好的优点，但它最大的烦恼之一是它的默认选项卡大小。

在 Bluefish 中，“制表符宽度”是制表符设置为等于的空格字符数。这不是我要说的。“选项卡大小”是选项卡在屏幕上显示的实际宽度。默认情况下，每当我打开文件时，选项卡的大小都会使选项卡看起来与空格字符（实际上是 ~1.5 个空格字符）大致相同，我无法处理。所以，我通过 Documents->Tab Size->Increase 更改它，直到它对我来说足够大。这一切都很好，但它只会改变这个文件的外观，而它是打开的。

如果我打开另一个文件，或者关闭我刚刚更改的文件并打开另一个文件，它会恢复为与单个空格字符相同的默认设置。

有什么方法可以将 Bluefish 的默认标签大小设置为更大，这样我就不必一直更改它？可能是配置文件中的变量，还是我没有找到的菜单选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-05T18:50:38.023

我知道这是很久以前发布的，但我只是在谷歌上搜索它并且已经四处寻找了很长时间。

在蓝鱼 2.2.6 中：

## 编辑 > 首选项 > 初始文档设置

它位于窗口的底部。

![显示选项卡设置位置的屏幕截图](../Images/4065d403ff5d9f0dca83a5faec5797ce.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T01:48:04.780

附加：如果您的项目和我的一样，不接受更改，那么您可以编辑 .bfproject 文件并更改行：

```
editor_tab_width: <new tab size> 
```

这样可行。

# sas - 如何重复调用 SAS 宏，其中第二个参数是第一个参数 - 和 . 删除？

> ID：13675519
> 
> 赞同：0
> 
> 时间：2012-12-03T00:17:25.917
> 
> 标签：sas, dynamic-variables, sas-macro

我有一个需要两个参数的宏——一个可以包含破折号和句点的字符串，以及一个相同字符串的清理版本，其中任何破折号和句点都被下划线替换。

以下作品：

`%let foo = abc.def;`

`%mymacro(firstpar = &foo, secondpar=%sysfunc(translate(&foo,"__","-.")));`

`%let foo = abc-def;`

`%mymacro(firstpar = &foo, secondpar=%sysfunc(translate(&foo,"__","-.")));`

...但是我如何遍历一长串此类变量？是否有一些标准的习惯用法可以一次将列表的元素分配给一个占位符变量然后评估命令，或者直接将它们替换为命令字符串（但在我明确要求之前不评估它）？

我尝试使用[%DO_WHILE](http://www.sascommunity.org/wiki/Tight_Looping_with_Macro_Arrays)宏库，只要`&foo`s 不包含标点符号，它就可以很好地工作。如果他们这样做了，它就会失败，并且我尝试过的任何引用组合都不能让它发挥作用。

我的实际宏太长且令人费解，无法在此处发布。希望这个一般性问题足够清楚，可以回答：

“重复调用一个宏的推荐策略是什么，它的一次性调用看起来像`%mymacro(firstpar = &foo, secondpar=%sysfunc(translate(&foo,"__","-.")));`，并且你有一个大的值列表`foo`？”

或者换一种说法：“SAS 中最接近 R`parse()`和`deparse()`功能的东西是什么？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:24:02.000

我无法与 R 的解析和解析相关，因为我不熟悉它们。但是，我只需传入第一个参数并在宏中创建第二个宏变量。请参见下文，FIRSTPAR 与您在示例中使用的一样。我包含一个 TRANSLATE 参数，其中包含应替换的字符（默认为“。”）：

```
%macro mymacro(firstpar=,translate=.);

  data _null_;
    firstpar="&firstpar";
    translate="&translate";
    secondpar="&firstpar";
    subi=1;
    do while(length(translate)>=subi);
      secondpar=tranwrd(secondpar,substr(translate,subi,1),"_");
      subi+1;
    end;
    call symput('secondpar',secondpar);
  run;
  %put &secondpar;
%mend mymacro; 
```

替换句点和破折号：

```
%mymacro(firstpar=abc-de-fg.hi-.k,translate=.-) 
```

替换句点、破折号和逗号：

```
%mymacro(firstpar=%str(abc-de,fg.hi,.k),translate=%str(.-,)) 
```

这两个示例将 SECONDPAR 宏变量输出到日志，如下所示：

```
abc_de_fg_hi__k 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:49:07.573

您在这里提到了“列表”，因此该方法将取决于您如何将此列表解析为宏。如果列表已经是可以直接用作宏变量的形式，例如

```
%let foo = abc-def abc-d-af abd-c-dgf; 
```

这里各个参数由空格分隔。宏变量包含所有内容。然后你可以一一提取参数：

```
 %macro mymacro(firstpar = &foo, secondpar=%sysfunc(translate(&foo,"__","-.")));
   %do i = 1 %to %sysfunc(countw(&foo,' '));
          %let p1 = %scan(&foo, &i, ' ');
          %let p2 = %scan(&secondpar, &i, ' ');
          *<original macro statements>*
   %end; 
```

用于`COUNTW`获取参数个数，并`SCAN`获取这些参数。

如果需要先导入列表。还有额外的步骤：

```
 data tmp;
 input foo $;
 datalines;
 abc-def
 abcd-def
 abc-d-af
 ;
 run;

 proc sql noprint;
   select foo into :foo separated by ' ' from tmp;
 quit; 
```

现在列表已存储到`foo`，由空格分隔。然后就可以解析成上面的宏了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:10:33.927

我认为一个简单的问题是，您如何从现有数据中重复调用宏。我会先说，通常你不这样做 - 你通常只是在普通的 SAS 代码中做任何事情。但是你没有给我们任何信息，所以也许你有充分的理由重复调用宏（我有时确实会这样做，尽管通常会试图避免它）。

我会将上面 DavB 的答案合并到这个答案中 - 不要将两个值都作为参数，只使用第一个参数，然后在宏内部将其转换为第二个。

大约有十几种方法可以创建数据驱动的宏调用；这里有三个。

```
%macro foo(param=);
%let second_param=%sysfunc(translate(&param,"___","-.a"));
%put &param &second_param;
%mend foo;

*Method 1: Call Execute.  This puts code in a queue to execute after the data step completes.  
    This has some advantages, namely that you can build code easily and can modify it with data step functions, 
    and some disadvantages, namely that some timing issues (when things happen internal to SAS) exist 
    and can be difficult to remember/work around.  Not used all that often as a result of those timing issues 
    but for simple things can be useful.;
data _null_;
set sashelp.class;
mcall = cats('%foo(param=',name,')');
call execute(mcall);
run;

*Method 2: PROC SQL select into.  This creates a list and stores it in a macro variable.  
    Quick and easy (much shorter code-wise) compared to the other solutions, but has one significant limitation:
    a hard limit to how many total characters can be stored in a macro variable (I forget exactly how much, but around 20,000).
    So if you are calling the macro a thousand or more times this might fail - it writes a warning to the log if so.
    Use NOPRINT with PROC SQL unless you want to see what is generated.;
proc sql;
select cats('%foo(param=',name,')') into :mcalllist separated by ' ' from sashelp.class;
quit;
&mcalllist;

*Method 3: Include file generation.  This creates an actual text file with your code in it, then you include that code.
    In some ways the most transparent - you can easily debug the code - but also a lot of lines of code to write comparatively.
    Does not have the length limitation of the PROC SQL method, although it does have the normal limitations of included code.
    The temp file is written to your WORK directory, so you can navigate to that to see the contents, and/or use a non-TEMP file
    and write it out to a directory of your choosing in order to see it.
;

filename foo temp;
data _null_;
file foo;
set sashelp.class;
mcall = cats('%foo(param=',name,')');
put mcall $;
run;
%include foo; 
```

# android - Android NDK 包括 stl

> ID：13675523
> 
> 赞同：0
> 
> 时间：2012-12-03T00:17:56.040
> 
> 标签：android, android-ndk

嗨，我正在尝试将 STL 包含在我的一个项目中，但它不起作用......我注意到了这个线程

多次看到：

[不能在 Android NDK 中包含像矢量这样的 C++ 标头](https://stackoverflow.com/questions/4893403/cant-include-c-headers-like-vector-in-android-ndk)

但这对我不起作用，这是我的 make 文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

APP_STL := stlport_static
LOCAL_MODULE    := hellostl
LOCAL_SRC_FILES := hellostl.cpp
include $(BUILD_SHARED_LIBRARY) 
```

我也将此添加到我的包含目录 C:\android-ndk\sources\cxx-stl\stlport\stlport

但它仍然不起作用，我总是没有这样的文件或目录

```
#include <vector> 
```

每当我尝试构建

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:21:57.933

`APP_STL := stlport_static`

应该在 Application.mk 中设置，而不是在 Android.mk 中

或者你可以在命令行上设置它，例如

```
ndk-build APP_STL=stlport_static 
```

# android - 通过蓝牙发送对象或两个字符串？

> ID：13675525
> 
> 赞同：1
> 
> 时间：2012-12-03T00:18:15.397
> 
> 标签：android, multithreading, bluetooth

所以我的问题是我创建了两个应用程序，一个用于 android 2.2 手机，一个用于 android 2.3 手机。

这两个应用程序都有一个名为 Address 的类，其中包含两个字符串。

现在的任务是我必须将地址对象从一个应用程序传递到另一个应用程序。我最好的选择是我应该在每个应用程序上使用一个线程，然后相互连接。

我不确定的是，我是否应该将对象作为对象发送，或者我是否应该从发送方的地址一次发送一个两个字符串，并将它们分配给接收方的新地址对象。什么是最简单的解决方案，你们有什么提示我可以在哪里找到类似问题的一些指导，或者你们对我的问题有一些聪明的解决方案吗？

最好的问候 Drakthal

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:01:36.313

为什么不将意图中的数据传递给其他应用程序而不是序列化对象？只需将字符串打包到 Intent 捆绑包的附加组件中即可。然后在另一个应用程序中处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:58:06.767

您可以将对象变成字符串并发送它。[Gson](http://code.google.com/p/google-gson/)可以使这项任务变得非常容易，所以我会试一试。

它很容易使用。反序列化一个对象：

```
Gson gson = new Gson();
MyClass object = gson.fromJson(json, MyClass.class); 
```

序列化一个对象：

```
Gson gson = new Gson();
String objectString= gson.toJson(myObject); 
```

# objective-c - Cocoa 和 OpenGL：绘制立方体失败

> ID：13675528
> 
> 赞同：0
> 
> 时间：2012-12-03T00:18:32.497
> 
> 标签：objective-c, cocoa, opengl, glut, osx-mountain-lion

我正在制作一个简单的应用程序，我应该在其中使用 GLUT 绘制一个立方体。
由于我用纯 C 语言研究过 OpenGL，我很难理解我应该调用哪些函数来初始化上下文，因为我不必再调用像 glutInit 和其他函数这样的函数。
所以我将 NSOpenGLView 子类化，为窗口禁用了一次镜头记忆并编写了以下代码：

```
@implementation MyView

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        NSOpenGLContext* context=[self openGLContext];
        [context makeCurrentContext];
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        gluLookAt(0, 0, -100, 0, 0, 0, 0, 1, 0);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(45, 1, 1, 1000);
        glShadeModel(GL_SMOOTH);
        glMatrixMode(GL_MODELVIEW);
        glEnable(GL_DEPTH_TEST);
    }
    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glColor4f(1, 0, 0, 0);
    glutSolidCube(10);

    glFlush();
} 
```

但似乎我错过了一些东西，因为我看到的是黑色视图而不是立方体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:38:58.440

您需要将 initWithFrame 中的代码移动到 prepareGL。例如

```
- (void)prepareOpenGL {
    NSOpenGLContext *context = [self openGLContext];
    [context makeCurrentContext];
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0, 0, -100, 0, 0, 0, 0, 1, 0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, 1, 1, 1000);
    glShadeModel(GL_SMOOTH);
    glMatrixMode(GL_MODELVIEW);
    glEnable(GL_DEPTH_TEST);
} 
```

# bash - 用于比较的 Shell 脚本算术运算符

> ID：13675531
> 
> 赞同：1
> 
> 时间：2012-12-03T00:18:44.387
> 
> 标签：bash, shell, scripting, comparison, operators

当我遇到算术比较这个问题时，我正在尝试学习 shell 脚本并遵循 tutorialspoint 上的教程。

```
$VAL1=10
$VAL2=20
$VAL3=10

if [ $VAL1 == $VAL2 ]
then
    echo "equal"
else
    echo "not equal"
fi 
```

但我得到了一个`[: ==: unexpected operator`我不确定为什么比较运算符不起作用。我知道我也可以使用理性运算符，但我想知道为什么没有定义'=='。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T00:21:27.177

您想将其更改为：

```
VAL1=10
VAL2=20
VAL3=10

if [ "$VAL1" -eq "$VAL2" ]
then
    echo "equal"
else
    echo "not equal"
fi 
```

**说明：**

*   不要`$`在赋值中添加左值（被赋值的变量）。
*   在测试中始终用双引号将变量括起来。你得到的`[: ==: unexpected operator`错误是因为`VAL1`/`VAL2`之前没有正确分配，你的测试的 ksh 扩展实际上最终解决了这个问题：`if [ == ]`- （但你看到它实际上不是关于`==`未定义的问题）
*   使用以下数字比较而不是`==`符号：
    *   `-eq`(==)
    *   `-ne`(!=)
    *   `-gt`(>)
    *   `-ge`(>=)
    *   `-lt`(<)
    *   `-le`(<=)

# php - 编写更好看、更简洁的代码

> ID：13675532
> 
> 赞同：1
> 
> 时间：2012-12-03T00:18:53.800
> 
> 标签：php

我得到了以下代码片段，它可以工作并完成我需要它做的事情。唯一的问题是我认为它有点“冗长”，可以做一些优化。如果可能的话，有人可以帮助我减少重复性。大部分代码都非常相似......

非常感谢

```
<?php 

// condition = Less Than; More Than; Between
// noofweeks = this is the number of weeks chosen by the user

function fmsSupplements($condition, $conditionWeeks, $noofweeks, $weekno, $weekStartno,      $weekEndno, $basicprice, $supplementAmnt, $supplementType) {

if ($condition== "Between") {
// I need to get the start and end values as the data in this parameter should look like 1-17 
$betweenArray = explode('-',$conditionWeeks);
$startWeek = $betweenArray[0];
$endWeek = $betweenArray[1];
}

if(($condition == "Less Than") && ($noofweeks < $conditionWeeks) && ($supplementType ==    'Subtract') && ($weekno >= $weekStartno && $weekno <= $weekEndno) )  { return $basicprice -  $supplementAmnt; }

elseif(($condition == "Less Than") && ($noofweeks < $conditionWeeks) && ($supplementType == 'Add') && ($weekno >= $weekStartno && $weekno <= $weekEndno) )  { return $basicprice + $supplementAmnt; }

elseif(($condition == "More Than") && ($noofweeks > $conditionWeeks) && ($supplementType == 'Subtract') && ($weekno >= $weekStartno && $weekno <= $weekEndno) )  { return $basicprice - $supplementAmnt; }

elseif(($condition == "More Than") && ($noofweeks > $conditionWeeks) && ($supplementType == 'Add') && ($weekno >= $weekStartno && $weekno <= $weekEndno) )  { return $basicprice + $supplementAmnt; }    

elseif(($condition == "Between") && ($noofweeks >= $startWeek && $noofweeks <= $endWeek) && ($supplementType == 'Add') && ($weekno >= $weekStartno && $weekno <= $weekEndno) )  { return $basicprice + $supplementAmnt; }

elseif(($condition == "Between") && ($noofweeks >= $startWeek && $noofweeks <= $endWeek) && ($supplementType == 'Substract') && ($weekno >= $weekStartno && $weekno <= $weekEndno) )  { return $basicprice - $supplementAmnt; }   

//if no conditions match, just return the unaltered basic price back

else { return $basicprice ;}

;} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:44:37.840

一个 if 列表可以写成一个嵌套的 if。

最重要的变化：

1.  `($weekno >= $weekStartno && $weekno <= $weekEndno)`是所有条件的一部分，所以它在外部 if 中。
2.  `||`如果使用或 ( ) ，则与给定条件字符串匹配的三个不同条件放入 1 。
3.  内部 if 也是单数。`Add`结果是加法。`Subtract`在减法中。

一切都归结为尽可能少地重复条件，尽管您应该记住结构仍然应该是清晰的。在某些情况下，您的方式可能更容易。

```
<?php 

// condition = Less Than; More Than; Between
// noofweeks = this is the number of weeks chosen by the user

function fmsSupplements($condition, $conditionWeeks, $noofweeks, $weekno, $weekStartno, $weekEndno, $basicprice, $supplementAmnt, $supplementType) {
  if ($condition == "Between") {
    // I need to get the start and end values as the data in this parameter should look like 1-17 
    $betweenArray = explode('-',$conditionWeeks);
    $startWeek = $betweenArray[0];
    $endWeek = $betweenArray[1];
  }

  if ($weekno >= $weekStartno && $weekno <= $weekEndno)
  {
    if (($condition == 'Less Than' && $noofweeks < $conditionWeeks) ||
        ($condition == 'More Than' && $noofweeks > $conditionWeeks) ||
        ($condition == 'Between' && $noofweeks >= $startWeek && $noofweeks <= $endWeek))
    {
      // You can use a 'switch' as well, instead of if...elseif.
      if ($supplementType == 'Subtract') {
        return $basicprice - $supplementAmnt;
      } elseif ($supplementType == 'Add' {
        return $basicprice + $supplementAmnt;
      }
    }
  }
  return $basicprice;
} ?> 
```

在不同的设置中，我将中间结果放在单独的变量中，我认为这使它更具可读性。我在这里添加了更多评论，解释了这些决定：

```
function fmsSupplements($condition, $conditionWeeks, $noofweeks, $weekno, $weekStartno, $weekEndno, $basicprice, $supplementAmnt, $supplementType) {

  // Create two 'helper' booleans to make the if condition easier.
  $weekInRange = ($weekno >= $weekStartno && $weekno <= $weekEndno);
  $noOfWeeksInRange = 
      ($condition == 'Less Than' && $noofweeks < $conditionWeeks) ||
      ($condition == 'More Than' && $noofweeks > $conditionWeeks);

  // Alternatively, you can break the single line above up in multiple 
  // lines, which makes debugging easier:
  //$noOfWeeksInRange = ($condition == 'Less Than' && $noofweeks < $conditionWeeks);
  //$noOfWeeksInRange |= ($condition == 'More Than' && $noofweeks > $conditionWeeks);

  if ($condition == "Between") {
    // I need to get the start and end values as the data in this parameter should look like 1-17 
    $betweenArray = explode('-',$conditionWeeks);
    $startWeek = $betweenArray[0];
    $endWeek = $betweenArray[1];
    // Overwrite this variable with the condition that goes with 'Between'.
    // We're already in that if, so we don't need to check 'Condition' again..
    // You could use betweenArray[0] and [1] in the condition below, but using
    // the variables $startWeek and $endWeek does make it more readable.
    $noOfWeeksInRange = ($noofweeks >= $startWeek && $noofweeks <= $endWeek);
  }

  // And not this 'if' is even more readable.
  if ($weeksInRange && $noOfWeeksInRange)
  {
      // You can use a 'switch' as well, instead of if...elseif.
      if ($supplementType == 'Subtract') {
        return $basicprice - $supplementAmnt;
      } elseif ($supplementType == 'Add' {
        return $basicprice + $supplementAmnt;
      }
  }
  return $basicprice;
} ?> 
```

# php - MySQL SELECT COUNT 从 PHP 中的多个表

> ID：13675533
> 
> 赞同：4
> 
> 时间：2012-12-03T00:19:03.777
> 
> 标签：php, mysql

我在不同产品品牌的数据库中有两个表，我试图对其进行计数，以便在描述搜索的情况下结合两者的计数。我到目前为止是这样的：

```
$pages_query = mysql_query ("SELECT COUNT('Product Number') FROM brand1 WHERE description LIKE '%oven%' UNION ALL SELECT COUNT('Product Number') FROM brand2 WHERE description LIKE '%oven%'") ; 
```

当我回应这一点时，它会吐出 60，这只是brand1 表的结果，并且不添加brand2 表中的计数（我认为 UNION ALL 应该这样做还是我有错误？）结束编号应该是 173，因为另一个表有 113 个结果与此查询匹配。

将计数结果添加到一个数字中的最佳方法是哪种？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:23:24.777

A`UNION`应该给你两*行*，一个用于每个单独的计数。如果您想要两者的总和，可以将它们添加到子选择中：

```
SELECT
  /* Add these two counts together and alias as total_count */
  (SELECT COUNT(*) FROM brand1 WHERE description LIKE '%oven%') 
  + (SELECT COUNT(*) FROM brand2 WHERE description LIKE '%oven%) AS total_count 
```

MySQL 对子句的内容或存在是宽松的`FROM`，因此您可以省略它并仅使用`SELECT`.

附带说明一下，*对于*像`brand`. 相反，您可能应该将这些组合成一个*表*，其中有一列标识品牌。如果您现在能够做出这样的改变，它可能会大大简化您的生活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:23:26.453

当您使用 UNION 时，您正在为每个计数创建一行。你必须得到这两行的总和。

顺便说一句，您选择的是 COUNT('Product Number') - 这与 COUNT(1) 的所有意图和目的相同。如果要检查特定列的非空值，则应命名该列。如果`Product Number`是您的列的名称，则应将其封装在反引号 (`) 中。常规单引号 (') 只会定义一个字符串。

```
$sql = "SELECT SUM(rowcount)
        FROM (
            SELECT COUNT(1) AS rowcount 
            FROM brand1 
            WHERE description LIKE '%oven%' 
            UNION ALL 
            SELECT COUNT(1) 
            FROM brand2 
            WHERE description LIKE '%oven%'
        ) AS counts";
$pages_query = mysql_query ($sql) ; 
```

# javascript - 如何从移动浏览器启动应用程序（facebook/twitter/etc），但如果未安装应用程序，则退回到超链接

> ID：13675535
> 
> 赞同：24
> 
> 时间：2012-12-03T00:19:16.223
> 
> 标签：javascript, mobile-browser

我希望可能有某种方法可以检测 uri:scheme 是否在浏览器中的移动设备上注册。

IE：我想检查一下 facebook、twitter、pinterest 应用程序是否已安装并且可以从它们关联的 uri:scheme 启动。

```
if(fb_isInstalled) {
    // href="fb://profile/...."
} else {
    // href="http://m.facebook.com/..."
} 
```

基本上，如果用户安装了 facebook，则启动应用程序，但如果未安装应用程序，则回退到 fb 网站的移动版本。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-03T01:23:31.950

I think I've got a working solution.

```
 <!-- links will work as expected where javascript is disabled-->
 <a class="intent"   
    href="http://facebook.com/someProfile"   
    data-scheme="fb://profile/10000">facebook</a> 
```

And my javascript works like this.
*note: there's a little jQuery mixed in there, but you don't need to use it if you don't want to.*

```
(function () {

    // tries to execute the uri:scheme
    function goToUri(uri, href) {
        var start, end, elapsed;

        // start a timer
        start = new Date().getTime();

        // attempt to redirect to the uri:scheme
        // the lovely thing about javascript is that it's single threadded.
        // if this WORKS, it'll stutter for a split second, causing the timer to be off
        document.location = uri;

        // end timer
        end = new Date().getTime();

        elapsed = (end - start);

        // if there's no elapsed time, then the scheme didn't fire, and we head to the url.
        if (elapsed < 1) {
            document.location = href;
        }
    }

    $('a.intent').on('click', function (event) {
        goToUri($(this).data('scheme'), $(this).attr('href'));
        event.preventDefault();
    });
})(); 
```

I also threw this up as a [gist](https://gist.github.com/ChaseFlorell/5119047) that you can fork and mess with. You can also include the [gist](https://gist.github.com/ChaseFlorell/5119047) in a jsfiddle if you so choose.

* * *

## Edit

[@kmallea](https://github.com/kmallea) forked the gist and radically simplified it. [https://gist.github.com/kmallea/6784568](https://gist.github.com/kmallea/6784568)

```
// tries to execute the uri:scheme
function uriSchemeWithHyperlinkFallback(uri, href) {
    if(!window.open(uri)){
        window.location = href;
    }
} 
```

```
// `intent` is the class we're using to wire this up. Use whatever you like.
$('a.intent').on('click', function (event) {
    uriSchemeWithHyperlinkFallback($(this).data('scheme'), $(this).attr('href'));
    // we don't want the default browser behavior kicking in and screwing everything up.
    event.preventDefault();
}); 
```

# mod-rewrite - 具有多个虚拟主机 url 重定向的 apache httpd mod_proxy 负载平衡

> ID：13675536
> 
> 赞同：3
> 
> 时间：2012-12-03T00:19:38.580
> 
> 标签：mod-rewrite, weblogic, load-balancing, mod-proxy

场景：
OS centos
webserver apache http version 2.2.23
两台weblogic服务器集群
两台webserver

以上是硬件负载平衡器的后面

基本上想做流量的url重定向和负载均衡（不修改会话）

当我输入 agent.abconline.com 它应该被重定向到应用服务器 192.168.0.1:7001/agent staging.abconline.com 应该被重定向到 192.168.0.1;7001/staging

上面说我可以单独使用 mod_rewrite，但是在尝试使用 mod_proxy 和负载平衡时，我无法重定向到所述 URL

以下是配置

```
NameVirtualHost *:80
<VirtualHost *:80>
        ServerName agent.abconline.com
        RewriteEngine On

        <Proxy balancer://agentcluster>
         BalancerMember http://192.168.0.1:7003 route=1 loadfactor=50 retry=60
         BalancerMember http://192.168.0.2:7003 route=1 loadfactor=50 retry=60
        </Proxy>

        # Redirect all non-static requests to agent
        RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_FILENAME} !-f
        RewriteRule ^/(.*)$ balancer://agentcluster%{REQUEST_URI} [P,QSA,L]

        ProxyPass /abc-oper balancer://agentcluster/abc-oper
        ProxyPassReverse /abc-oper balancer://agentcluster/abc-oper
        ProxyPreserveHost on

        SetEnv force-proxy-request-1.0 1
        SetEnv proxy-nokeepalive 1

        <Proxy *>
         Order deny,allow
         Allow from all
        </Proxy>

        ErrorLog /apps/apache/logs/agent.abconline.com.error.log
        CustomLog /apps/apache/logs/agent.abconline.com.access.log combined
        LogLevel debug
</VirtualHost>

<VirtualHost *:80>
        ServerName staging.abconline.com
        RewriteEngine On

        <Proxy balancer://stagingcluster>
         BalancerMember http://192.168.0.1:7003 route=1 loadfactor=50 retry=60
         BalancerMember http://192.168.0.2:7003 route=1 loadfactor=50 retry=60
        </Proxy>

        # Redirect all non-static requests to agent
        RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_FILENAME} !-f
        RewriteRule ^/(.*)$ balancer://stagingcluster%{REQUEST_URI} [P,QSA,L]

        ProxyPass /abc-oper balancer://stagingcluster/abc-oper
        ProxyPassReverse /abc-oper balancer://stagingcluster/abc-oper
        ProxyPreserveHost on

        SetEnv force-proxy-request-1.0 1
        SetEnv proxy-nokeepalive 1

        <Proxy *>
         Order deny,allow
         Allow from all
        </Proxy>

        ErrorLog /apps/apache/logs/staging.abconline.com.error.log
        CustomLog /apps/apache/logs/staging.abconline.com.access.log combined
        LogLevel debug
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:58:30.130

您没有将适当的**/agent**和**/staging**上下文添加到反向代理规则中，并且显然在退出的途中删除了上下文，例如

```
RewriteRule      / balancer://stagingcluster/staging%{REQUEST_URI} [P,QSA,L]
ProxyPassReverse / balancer://stagingcluster/staging

# Possibly also require a:
#ProxyHTMLURLMap balancer://stagingcluster/staging   / 
```

# collections - 骨干js集合问题

> ID：13675539
> 
> 赞同：7
> 
> 时间：2012-12-03T00:20:16.563
> 
> 标签：collections, backbone.js

当我尝试使用主干 js 创建集合集合时遇到了问题。这是代码：

模型和集合：

```
var Track = Backbone.Model.extend({

    defaults : {
      title : ""
    }
})

var TrackCollection = Backbone.Collection.extend({

    model : Track,
})

var Playlist = Backbone.Model.extend({

    defaults : {
        name : "",
        tracks : new TrackCollection,
    }
})

var PlaylistCollection = Backbone.Collection.extend({

    model : Playlist,
}) 
```

创建播放列表集合：

```
var playlists = new PlaylistCollection;

// create and push the first playlist
playlists.push({ name : "classic" });
// create and push a track in the playlist just created
playlists.last().get("tracks").push({ title : "fur elise" });

// create and push the second playlist
playlists.push({ name : "c2c" });
// create and push a track in the playlist just created
playlists.last().get("tracks").push({ title : "fuya" });

// display first playlist
console.log(JSON.stringify(playlists.at(0).toJSON()))
// display second playlist
console.log(JSON.stringify(playlists.at(1).toJSON())) 
```

这是输出：

```
{"name":"classic","tracks":[{"title":"fur elise"},{"title":"fuya"}]}
{"name":"c2c","tracks":[{"title":"fur elise"},{"title":"fuya"}]} 
```

问题是，正如我们在输出中看到的那样，2 个播放列表有 2 个曲目“fur elise”和“fuya”。

所以我的问题是为什么？我应该怎么做才能让“fur elise”只出现在名为“classic”的第一个播放列表中，而“fuya”只出现在名为“c2c”的第二个播放列表中？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T00:37:41.173

我认为您的问题是您的默认`tracks`属性`PlayList`：

```
var Playlist = Backbone.Model.extend({
    defaults : {
        name : "",
        tracks : new TrackCollection,
    }
}); 
```

[`defaults`](http://backbonejs.org/#Model-defaults)创建新实例时，Backbone 将浅拷贝：

> **defaults** `model.defaults or model.defaults()`
> [...]
> *请记住，在 JavaScript 中，对象是通过引用传递的，因此如果您将对象作为默认值包含在内，它将在所有实例之间共享。*

结果是每个`PlayList`使用默认值的实例都将使用与其属性`tracks`完全相同的属性，并且将是.`TrackCollection``tracks``TrackCollection``defaults`

最简单的解决方案是使用函数`defaults`：

```
var Playlist = Backbone.Model.extend({
    defaults : function() {
        return {
            name : "",
            tracks : new TrackCollection,
        };
    }
}); 
```

这样，`defaults`当需要默认值时将调用该函数，并且每次调用您都会在默认属性中`defaults`获得一个全新的。`TrackCollection``tracks`

这是一个快速的经验法则：

> 如果您想在 中放入除字符串、数字或布尔值以外的任何内容`defaults`，请使用`defaults`函数而不是`defaults`对象。

# c# - C# NAudio 轨迹栏

> ID：13675541
> 
> 赞同：0
> 
> 时间：2012-12-03T00:20:39.370
> 
> 标签：c#, duration, naudio, trackbar

我正在使用 NAudio 播放器，*请参阅[http://naudio.codeplex.com/wikipage?title=MP3](http://naudio.codeplex.com/wikipage?title=MP3)*。一切正常，但是当我编写一个显示当前时间和持续时间的轨迹栏时，甚至可以搜索歌曲的任何位置，所以我使用计时器来更新当前时间`mainOutputStream.CurrentTime`，但是格式不好看，然后我像这样重新格式化它：

```
string curTime = mainOutputStream.CurrentTime.ToString();
string[] format = curTime.Split(':');
format[2] = format[2].Remove(2);
curTime = format[1] + format[2]; 
```

但`format[2] = format[2].Remove(2);`总是返回错误。并且似乎没有办法在时间跨度上获得持续时间，但我不喜欢使用 averageBytePerSecond 或类似的东西，所以无论如何可以更简单更好地完成这些工作吗？ *上述参考中的所有变量*

谢谢。

编辑：问题解决了~我用了这个方法：
获取持续时间：

```
string duration = mainOutputStream.TotalTime.ToString("mm\\:ss");
trackPosition.Maximum = (int)mainOutputStream.TotalTime.TotalSeconds; 
```

获取当前时间：

```
string curTime = mainOutputStream.CurrentTime.ToString("mm\\:ss");
trackPosition.Value = (int)mainOutputStream.CurrentTime.TotalSeconds; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:43:00.827

试试这个：

```
string curTimeString = mainOutputStream.CurrentTime.ToString("mm\\:ss");
int curTimeSeconds =  (int)mainOutputStream.CurrentTime.TotalSeconds; 
```

第一个仅格式化为分钟和秒，如果您的音轨较大，则必须添加不同的格式。

更多信息可以在这里找到：[时间跨度格式](https://stackoverflow.com/questions/840120/timespan-formatting)

# jquery - jQuery .animate 在 Chrome 和 Safari 中跳转

> ID：13675544
> 
> 赞同：0
> 
> 时间：2012-12-03T00:20:51.823
> 
> 标签：jquery, jquery-animate

我管理的网站上的 jQuery`.animate`功能存在问题，从第一天起就一直困扰着我，但我还没有找到解决方案（请参阅[http://www.standrewsvoluntedservice.org.uk/find.php](http://www.standrewsvoluntaryservice.org.uk/find.php)）。

单击其中一个彩色链接时，例如“Youth”，我设置了 jQuery，以便所有链接都聚集在页面右侧，并且显示所选链接的内容。在 Firefox 中，这可以按预期工作，但在 IE、Safari 和 Chrome 中，在块到达页面顶部之前会有一个巨大的跳跃，这是应该的。

任何帮助将不胜感激 - 我不是 jQuery 的最佳人选，并且已经多次搜索答案但无济于事！

编辑：控制这个 show-hide-slide 效果的 jQuery 是：

```
<script type="text/javascript">
$(document).ready(function() {
$(".return_project_box").hide();
$('.info_show').click(function(){
    $(".area").hide();
    $(".find_body").delay(200).show();
        $(".project_area_displayer").hide();
        $(".find_body_projects").animate({
            width:"1000px"
            }, 400);
        $(".find_body_projects").removeClass("float_right");
        $(".project_box_constant").removeClass("small_project_box");
        $(".return_project_box").hide();
    var toggle_function = true;
    return false;
});

    var toggle_function = true;
    $('.youth_show').click(function(){
        $(".project_area_displayer").not(".youth").hide();
        $(".find_body").hide();
        if(toggle_function = true)
        {
            $(".youth").delay(200).slideDown();
            $(".find_body_projects").animate({
                width:"185px"
                }, 200);
            $(".find_body_projects").addClass("float_right");
                $(".project_box_constant").addClass("small_project_box");
        }
        $(".return_project_box").show();
        var toggle_function = false;
        $(".information").hide();
        return false;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:12:10.160

啊，好吧，我尝试将此添加为评论，但它太长了。所以我要添加它作为答案。即使它没有具体回答您的问题。

它只是一个简单的例子，说明如何在干燥时做你正在做的事情。这不是复制和粘贴实现，但如果您使用类似的东西，您的问题*应该*会消失。

```
<div id="find_container">
    <div class="find_body_projects float_right">
        <a href="#youth" class="find_item"></a>
        <a href="#youth_special" class="find_item"></a>
        <a href="#adult_special" class="find_item"></a>
    </div>
</div>

<div id="project_content">
    <div id="youth" class="project_item active"></div>
    <div id="youth_special" class="project_item"></div>
    <div id="adult_special" class="project_item"></div>
</div>

<script>
$(function() { // On Doc Ready
    $('.find_item').on('click', function(e) { // Menu item is clicked
        e.preventDefault() // Prevent the default behavior of link
        var $chosen = $($(this).attr('href')) // Find the chosen page by using the href attr
        ,       $current = $('.project_item.active') // Find the currently chosen page by using the `.active` class
        if( !$chosen.length ) return false // Exit if the chosen page doesn't exist
        // Hide the current one
        $current.hide(function() {
            // Show the chosen one
            $chosen.slideDown()
        });
    })
});
</script> 
```

# javascript - 如何使用jquery从html中提取元素？

> ID：13675546
> 
> 赞同：0
> 
> 时间：2012-12-03T00:20:58.437
> 
> 标签：javascript, jquery, html, css, ajax

我有一个弹出窗口，其中列出了用户拥有的各种播放列表。单击时，我试图获取与要添加到适当播放列表的视频相关联的 video_id。我不确定如何实现这一点；用户单击弹出窗口中的链接，应该提取video_id（来自div #add）和选择的播放列表（用户为其生成名称的多个播放列表但只选择了一个）。有什么建议吗？

```
 <script type="text/javascript">
   $(document).ready(function() {
       $("#muncher").click(function(event){
       event.preventDefault();
            $.ajax({
                 type:"POST",
                 url:"/edit_favorites/",
                 data: {
                        'video_add': $('#add').val(), // from form
                        'playlist_selected': $('#').val() //from form
                        },
                 success: function(){

                        $('#muncher').html("Added");

                    }
            });
            return false;
       });

    });
</script>   

<div id = 'muncher'>
    <div id = 'add'>12345</div>
    <a href = "#" id="munch" rel="popover" data-html="true" data-placement="right"  data-content= "<a href= '#'>Favorites</a><br>

                <a href = '#' class = 'Funny'>Funny</a><br>

                <a href = '#' class = 'test'>test</a><br>

                <a href = '#' class = 'test1'>test1</a><br>                     

    " data-original-title="Add to your plate">
            Munch
    </a>    
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:26:43.090

您可以尝试使用[jquery 数据属性](http://api.jquery.com/data/)将 ID 存储在`A`标签中。

或者相反，您可以尝试获取上[一个兄弟](http://api.jquery.com/prev/)，它是被点击的`DIV`标签上方的`A`标签，然后使用 .text() 来获取它的值

此外，您不应该有多个具有相同 ID 的元素吗？听起来您有很多 ID="ADD" 的项目？

在这种情况下，您可能需要从

```
 $('#add').val(), 
```

到

```
 $('#add', $(this)).text(), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:28:40.937

在 HTML 文档中，`.html()`可以用来获取任何元素的内容，[http://api.jquery.com/html/](http://api.jquery.com/html/) 所以试试这个：

```
$('#add').html() 
```

[Daveo](https://stackoverflow.com/users/165839/daveo)是正确的，您需要使 div 的 id 唯一，一种选择是使用播放列表 id 和 add。像`id="add_12345"`

然后，代替`.click`jQuery 方法，在每个 add_[id variable] div 中使用 onclick 内联：

```
<div id="add_12345" onclick="addClick(this);"> 
```

获取id的javascript函数：

```
function addClick(element) {
    id = element.id.slice(element.id.indexOf("_") + 1);
    alert(id);
    //your ajax post code here
} 
```

有几种方法可以处理您要实现的目标，请查看这个非常好的 stackoverflow Q&A 以了解有关此主题的更多信息： [获取触发事件的元素的 ID](https://stackoverflow.com/questions/48239/getting-the-id-of-the-element-that-fired-an-event-using-jquery)

你应该改变你的标记，*[12.2.2 嵌套链接是非法的](http://www.w3.org/TR/html401/struct/links.html#h-12.2.2)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:16:14.323

对您到底要做什么有点困惑。每个视频都是播放列表的孩子吗？如果是这样，请尝试在 onClick 事件中将 this.id 作为参数传递...

```
...click="toPlaylist(this.id)"

function toPlaylist(clicked) {
  var tempVideo = clicked;
  // Get a parent node ID like this...
  var tempList = $(clicked).parentNode.id;
  // Do something else...
  nextAction(tempVideo, tempList);
} 
```

PS：你可能不得不做这样的事情

```
 var tempVideo = '#'+clicked; 
```

...对于变量，我不确定。

希望这会有所帮助。

# ruby - 如何从 sinatra 应用程序中发布的 JSON 中捕获参数哈希

> ID：13675549
> 
> 赞同：5
> 
> 时间：2012-12-03T00:21:21.323
> 
> 标签：ruby, sinatra

我有这个卷曲电话：

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"name":"abc", "orgid":"12", "subject":"my subject"}' http://localhost:3000/mysinatraapp

post '/mysinatraapp' do
unless request.preferred_type.eql? 'text/html'
  # This is not really params hash. It will be a string like "{\"name\"=>\"abc\", \"orgid\"=>\"12\", \"subject\"=>\"my subject\"}"
    params = request.env["rack.input"].read 
    ...
    ...
    halt 400 if params.length == 0
end
  # This does not work
p "hi #{params['name']}"
end 
```

`p "hi #{params['name']}"`失败，因为它不是哈希。我如何使它工作？

我的目标是将发布的 json 作为`params`哈希。这样我就可以`params`像往常一样使用了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T00:27:24.937

您实际上传递的是 Ruby 哈希而不是 JSON 对象。

将 curl 命令更新为如下所示：

```
-d '{"name":"abc","orgid":"12","subject":"my subject"}' 
```

然后在您的 Sinatra 操作中执行以下操作：

```
params = JSON.parse(request.env["rack.input"].read) 
```

确保你`require 'json'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T09:06:25.013

利用

```
require 'json'
params = JSON.parse(request.body.read) 
```

# jquery - HTML 菜单和子菜单显示

> ID：13675550
> 
> 赞同：0
> 
> 时间：2012-12-03T00:21:26.553
> 
> 标签：jquery, html, css, drop-down-menu, submenu

我正在使用基本的 HTML ul/li 列表、基本的 CSS 代码和基本的 jQuery 代码编写菜单导航。我有多个级别的菜单，问题是一旦显示第一级，它就会自动显示它下面的所有级别。查看[链接](http://sites.deyone.com/rudimentaldrumming/menu)以查看是否在行动。SheetMusic & Media 菜单是有问题的。

我需要帮助让所有这些子菜单项默认不显示吗？你们中有人知道我该怎么做吗？

我希望你们中的一个有答案。

摩根肯扬

[这是我在jsFiddle](http://jsfiddle.net/7tWME/1/)中工作的相关代码。

HTML

```
<div id="container">
<ul id="dropdown">
    <li class="mainnav"><a href="#">About</a></li>
    <li class="mainnav"><a href="#">Sheet Music</a>
        <img class="droparrow" src="@ACCOUNTRESOURCES/DropdownTriangle75.png"/>
        <ul>
            <li><a href="#">Solos</a>
                <img class="dropRarrow" src="@ACCOUNTRESOURCES/DropdownRTriangle75.png">
                <ul>
                    <li><a href="#">Solo 1</a></li>
                    <li><a href="#">Solo 2</a></li>
                </ul>
            </li>
            <li><a href="#">Exercises</a>
                <img class="dropRarrow" src="@ACCOUNTRESOURCES/DropdownRTriangle75.png">
                <ul>
                    <li><a href="#">Snare Drum</a></li>
                    <li><a href="#">Tenors</a></li>
                    <li><a href="#">Bass Drum</a></li>
                    <li><a href="#">Various Corps.</a></li>
                    <li><a href="#">Drum Set</a></li>
                </ul>
            </li>
            <li><a href="#">Rudiments</a></li>
        </ul>
    </li>
    <li class="mainnav"><a href="#">Gallery</a></li>
    <li class="mainnav"><a href="#">Media</a>
        <img class="droparrow" src="@ACCOUNTRESOURCES/DropdownTriangle75.png">
        <ul>
            <li><a href="#">Video</a>
                <img class="dropRarrow" src="@ACCOUNTRESOURCES/DropdownRTriangle75.png">
                <ul>
                    <li><a href="#">Solos</a>
                        <img class="dropRarrow" src="@ACCOUNTRESOURCES/DropdownRTriangle75.png">
                        <ul>
                            <li><a href="#">Snare</a></li>
                            <li><a href="#">Tenor</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Ensembles</a></li>
                    <li><a href="#">Rudiments</a></li>
                    <li><a href="#">Miscellaneous</a></li>
                </ul>
            </li>
            <li><a href="#">Audio</a></li>
        </ul>
    </li>
</ul> 
```

CSS

```
 #dropdown  {
        margin:0px 0px 0px 34px; 
        padding:0; 
        list-style:none;
    }
    #dropdown  li {
        float:left;         /* Show list items inline */
        margin: 3px 3px 1px 3px;
        /*padding: 7px 5px 14px 5px;*/
        position:relative; 
        font-size:100%;
    }
    #dropdown  li a {
        display:block;      /* Making sure a element covers whole li area */
        text-decoration:none; /* No underline */
        color:#FFFFFF;
        font-family: Calibri;
        font-size: 16px;
        font-weight: bold;
        padding:1px 7px 1px 7px;
        margin: 26px 0px 0px 7px;
    }
    #dropdown  li a:hover {
        background:rgba(255,255,255,.75);
        color:#000000;
        cursor:pointer;
        text-decoration:none;
        /*margin: 0px 0px 7px 7px;*/
        border-radius:2px;
        -moz-border-radius:25px; /* Firefox 3.6 and earlier */
    }
    /*Second Level */
    #dropdown  ul {
        position:absolute; 
        left:0; 
        display:none;
        margin:-3px 0px 0px 7px; 
        padding:0px 0px 0px 0px; 
        list-style:none;
        background: rgba(255, 255, 255, 0.75);
        border-radius:3px;
        z-index:4;
    }
    #dropdown ul:hover {
        position:absolute; 
        left:0; 
        margin:-3px 0px 0px 7px; 
        padding:0px 0px 0px 0px; 
        list-style:none;
    }
    #dropdown  ul li {
        float:left;
        width:108px;
        height:20px;    
        padding: 0px 0px 0px 0px;
        border-top:none;
    }
    #dropdown  ul li a {
        display:block;      /* Making sure a element covers whole li area */
        width:100px;
        padding: 2px 10px 2px 5px;
        margin: 0px 0px 0px 0px;
        color:#000000;
        text-decoration:none;   
    }

    #dropdown  ul li a:hover {
        padding: 2px 0px 2px 5px;
        margin: 0px 0px 0px 0px;
        color: rgba(255,255,255,1);
        background: rgba(0,0,0,.75);
    }
    /*Third Level    */
    #dropdown ul ul {
        position:absolute;
        display:none;
        left:0;
        padding:0px 0px 0px 0px;
        margin:-22px 0px 0px 118px;
    }
    #dropdown ul ul:hover {
        padding:0px 0px 0px 0px;
        margin:-22px 0px 0px 118px;
    }
    .droparrow {
        margin: 10px 0px 0px 30px;
        display:none;
    }
    .dropRarrow {
        position:absolute;  
        display:none;
        margin: -23px 0px 0px 111px;
    } 
```

jQuery

```
$(document).ready(function () {    
        $('#dropdown li').hover(
            function () {
                $('ul, img', this).show();
            }, 
            function () {
                $('ul, img', this).hide();
            }
        );
    });​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:28:06.710

在您的悬停功能中，您会在其中显示所有 ul 和 img 元素。使用直接子选择器来解决这个问题：

```
$(' > ul, > img', this).show(); 
```

# apache - 不需要的默认重写/别名

> ID：13675553
> 
> 赞同：0
> 
> 时间：2012-12-03T00:21:45.593
> 
> 标签：apache, mod-rewrite, rewrite

在我的机器上，用户页面重定向到/是 userpage.html 或 userpage.php 的别名，即使在我没有设置任何重写规则之前，或者即使我关闭了重写。它一定是我不知道的一些默认设置。

我在 Fedora 上使用 apache，并没有弄乱默认配置，除了打开基于名称的虚拟主机

我得到了一些额外的奇怪结果，也许是相关的。此代码不起作用：

```
RewriteRule userpage/vidnum/(.*)$   userpage.php?vidnum=$1 [NC,L] 
```

这个确实有效：

```
RewriteRule vidnum/(.*)$   userpage.php?vidnum=$1 [NC,L] 
```

由于需要服务器托管灵活性，我编写的所有重写规则都必须存在于 .htaccess 中，顺便说一句。

我的虚拟主机是这样设置的=没什么奇怪的 AFAIK：

```
<VirtualHost *:80>
    ServerAdmin webmaster@keryx.se
    DocumentRoot /home/gunther/arkiv/workspace/webbteknik
    ServerName wt.book
    ErrorLog logs/wt.book-error_log
    CustomLog logs/wt.book-access_log combined
    <Directory /home/gunther/arkiv/workspace/webbteknik>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:34:35.077

感谢一位 Twitter 朋友 (@bjori)，我知道发生了什么。

正是内容协商导致了上述所有情况。

添加：

```
Options -MultiViews 
```

在我的 .htaccess 中解决了这个问题。这使得这个问题成为[mod-rewrite 问题的欺骗：/test/method 被重写为 test.svg/method](https://stackoverflow.com/questions/2360481/mod-rewrite-question-test-method-is-rewritten-to-test-svg-method)

# python - 在 Python 2.7.3 中将 csv 文件附加到一个空列表中-返回一个空列表

> ID：13675556
> 
> 赞同：2
> 
> 时间：2012-12-03T00:22:09.747
> 
> 标签：python, list, csv, append

我正在尝试打开一个 csv 文件并将行附加到列表中。我尝试了一些不同的东西，但我总是得到一个空列表。有什么建议吗？

```
>>> googleData = []   
dataFile = open("googlePrices.csv", 'rU')  
for row in dataFile:   
    googleData.append(row)

>>> googleData
[] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:28:18.513

使用 csvreader [http://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

```
import csv
csvr = csv.reader(open('googlePrices.csv' , 'r'))
for row in csvr:
   .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:17:01.580

一个好的做法是从 CSV 或任何其他文件中读取***每一行。***

一个可能的解决方案可能是这样的：

```
def main():
        with open('sample.csv' , 'r') as f:
                my_list = []
                for line in f.readlines():
                        my_list.append(line)
                print my_list

if __name__ == '__main__':
        main() 
```

***更新 ：***

由于 readlines() 将文件的每一行读入内存，这个答案没有优化..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-05T08:54:33.577

```
googleData = []   
dataFile = open("googlePrices.csv", 'rU')  
for row in dataFile:   
    googleData=googleData.append(panda.Dataframe(row)) 
```

# java - 从文本文件中提取数据元素

> ID：13675559
> 
> 赞同：1
> 
> 时间：2012-12-03T00:22:35.427
> 
> 标签：java

我正在制作一个应用程序，通过每种颜色的最有价值的宝石来组织魔兽世界珠宝制作拍卖数据。为此，我试图将一个 json 数据库解析为一个数组——我知道让我们像 gson api 这样的东西来做这件事很简单，但因为这是一个入门级 java 类的项目，我的教授已经说过我应该使用我们在课堂上学到的东西来导入数据，据说我有以下代码来解析 json 数据并将其打印在屏幕上（仍在解析到数组）[我已经上传了我的 data.json到这里](https://www.dropbox.com/s/oh7wahmcktkpuyv/data.json)并包含我到目前为止的代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class jcFormat {

public static void main(String[] args) {
    try {
        File f = new File("c:\\ProgramData\\jcUtil\\data.json");
        Scanner sc = new Scanner(f);

        List<Auction> ahdata = new ArrayList<Auction>();
        sc.nextLine();//eats line
        sc.nextLine();//eats line
        sc.nextLine();//eats line
        while (sc.hasNextLine()) {
            String line = sc.nextLine();
            String[] details = line.split(",");
            //get item as string
            String itemz = details[1];
            itemz = itemz.substring(7, itemz.length());
            //convert itemz string to item int
            int item = Integer.parseInt(itemz);
            //get buyout as string
            String buyoutz = details[4];
            buyoutz = buyoutz.substring(9, buyoutz.length());
            //convert buyoutz string to buyout int
            int buyout = Integer.parseInt(buyoutz);
            //get quantity as string
            String quantityz = details[5];
            quantityz = quantityz.substring(11, quantityz.length());
            //convert quantityz string to quantity int
            int quantity = Integer.parseInt(quantityz);

            Auction a = new Auction(item, buyout, quantity);
            ahdata.add(a);
        }

        for (Auction a : ahdata) {
            System.out.println(a.toString());
        }

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
}
}

class Auction {

private int item;
private int buyout;
private int quantity;

public Auction(int item, int buyout, int quantity) {
    this.item = item;
    this.buyout = buyout;
    this.quantity = quantity;
}

/**
 * @return the item
 */
public int getItem() {
    return item;
}

/**
 * @param item the item to set
 */
public void setItem(int item) {
    this.item = item;
}

/**
 * @param buyout the buyout to set
 */
public void setBuyout(int buyout) {
    this.buyout = buyout;
}

/**
 * @return the buyout
 */
public int getBuyout() {
    return buyout;
}

/**
 * @return the quantity
 */
public int getQuantity() {
    return quantity;
}

/**
 * @param quantity the quantity to set
 */
public void setQuantity(int quantity) {
    this.quantity = quantity;
}

@Override
public String toString() {
    return this.item + "\t" + this.buyout + "\t" + this.quantity;
}
} 
```

我目前遇到的问题是这个错误：

> 线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：-9 at java.lang.String.substring(String.java:1958) at jcutil.jcFormat.main(jcFormat.java:40) Java 结果: 1

如果我在 data.json 的前 10 行测试我的代码，它工作得很好，所以我试图找出哪些行导致问题，作为一个 java 新手，我的调试技能不是很好所以任何帮助弄清楚为什么我会收到这个错误将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:32:58.460

假设您正在使用 eclipse 在行上放置一个断点

```
buyoutz = buyoutz.substring(9, buyoutz.length()); 
```

并在调试模式下运行应用程序，这将允许您查看问题所在。

# jquery - Rails 运行任务的动态进度条

> ID：13675561
> 
> 赞同：0
> 
> 时间：2012-12-03T00:23:23.107
> 
> 标签：jquery, ruby-on-rails-3, progress-bar, activeadmin

我有一个由浏览器调用的“长”任务。我想做的是创建一个动态进度条，在同一页面或灯箱中显示“幕后”任务的进度（不刷新页面）。

我的想法是使用这样的 JQuery 栏：http: [//docs.jquery.com/UI/API/1.8/Progressbar](http://docs.jquery.com/UI/API/1.8/Progressbar)

我的问题是：

如何从任务（在 lib/ 中）调用 JQuery（或一般视图）来更新栏？

仅供参考，我也使用 ActiveAdmin，这不仅仅是问题，因为它使用预编译视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:24:51.363

我会在控制器中创建一个新的 REST 操作（或理想情况下重用现有的操作）来为进度条提供信息。

而且我还会尝试每隔一段时间使用 JQuery 使用 Ajax 调用控制器。

我认为这种面对进度条实现的方式比从 lib 任务中调用视图更好。

像这样的东西：

```
$(function() {
  setInterval(updateProgressBar, 1000);
});
function updateProgressBar() {
  //Invoke controller with ajax, and update progressBar
} 
```

如果您不喜欢在客户端玩轮询，您可能会在 HTML5 中找到有趣的服务器事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T09:30:52.313

这是不久前的帖子，但如果它对某人有帮助，那么有一个宝石可以做到这一点。它似乎不再被维护，但它是如何实现所请求行为的一个很好的例子：

[https://github.com/d4be4st/progress_job](https://github.com/d4be4st/progress_job)

# javascript - javascript元素显示文件中的人名

> ID：13675567
> 
> 赞同：0
> 
> 时间：2012-12-03T00:23:37.147
> 
> 标签：javascript

晚上好，我正在阅读 javascript 教程并试图弄清楚如何让我的页面显示一个人的姓名以及他在历史上这一天的生日

```
 <script type="text/javascript">
        document.write("Today is <br/>");
        document.write(showDate());
        document.write("Born Today <br/>");
        var name = "mName";
        document.write(dayNumber());
        var day = "showBirthDay";
        document.write(day);

        </script>

        </section> 
```

我不确定如何将这个作为 html 页面的代码链接到 function.js 页面。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:39:31.280

我假设 function.js 是某种类型的 JS 库文件。要将其链接到您的 HTML 页面，请在 <head> 标记之间添加这行代码：

```
<script src="function.js"></script> 
```

# c# - 带有 MenuItems 和单选按钮的 WPF 组合框中显示的文本

> ID：13675570
> 
> 赞同：0
> 
> 时间：2012-12-03T00:24:24.260
> 
> 标签：c#, wpf, combobox

我有一个带有单选按钮和可检查菜单项的组合框。当我选择一个值时，会显示一些单选按钮的文本（包括/排除/忽略）。这似乎是随机的，并不总是发生，而是偶尔发生。

我想要的是a）根本不显示任何文本或b）我可以绑定一个字符串属性，该属性将包含所选内容的一些摘要。与普通组合框不同，此处显示的文本毫无意义，因为我确实选择了一些任意选项组合（不是列表中的单个值）

我试图将 Text / SelecteValue 绑定到一个属性，但这不起作用。

```
<ComboBox Grid.Column="2" HorizontalAlignment="Left" Margin="0,4,0,0" Grid.Row="3" VerticalAlignment="Top" Width="125" SelectedValue="{Binding Settings.NameFilterTrx.Summary, UpdateSourceTrigger=PropertyChanged,  Mode=OneWay}">
  <MenuItem Header="Names with runway" IsCheckable="True" IsChecked="{Binding Settings.NameFilterTrx.NamesWithRunway, UpdateSourceTrigger=PropertyChanged}"/>
  <MenuItem Header="Names with number" IsCheckable="True" IsChecked="{Binding Settings.NameFilterTrxNamesWithNumber, UpdateSourceTrigger=PropertyChanged}"/>
  <MenuItem Header="Filtered elements as comments" IsCheckable="True" IsChecked="{Binding Settings.NameFilterTrx.FilteredAsComments, UpdateSourceTrigger=PropertyChanged}"/>
  <RadioButton GroupName="Group" Content="Exclude" IsChecked="{Binding Settings.NameFilterTrx.ModeExclude, UpdateSourceTrigger=PropertyChanged}" Margin="10,2,0,3"/>
  <RadioButton GroupName="Group" Content="Include" IsChecked="{Binding Settings.NameFilterTrx.ModeInclude, UpdateSourceTrigger=PropertyChanged}" Margin="10,2,0,3"/>
  <RadioButton GroupName="Group" Content="Ignore"  IsChecked="{Binding Settings.NameFilterTrx.ModeIgnore, UpdateSourceTrigger=PropertyChanged}" Margin="10,2,0,3"/>
</ComboBox> 
```

如您所见，文本与所选值不对应。此外，仅随机显示单选按钮的文本，而不是菜单项的任何内容。

![截屏](../Images/8caacbc79b7fb0c050aca415532fea2c.png)

PS：绑定`SelectedValue`是我获得定义值的途径之一。如果试过`Text`了也没有约束力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:09:57.967

我认为您可以使用扩展器来实现您的目标。这个解决方案的问题是，当 Expander 展开时，它可能会改变你的父容器的大小。所以我通常做的是把它放在一个 Grid 中，并指定它跨越几行和几列。然后我将 Expander 的 z-index 设置为一个较大的值。所以展开的 Expander 会覆盖其他控件，不会改变父面板的大小。:)

# javascript - 代码第一次没有正确执行。下次会这样

> ID：13675574
> 
> 赞同：1
> 
> 时间：2012-12-03T00:25:40.973
> 
> 标签：javascript, html

我编写了一些代码来检查数据库中的值是否为空。

这是我的代码：

```
var tabel;
var running = false;
function CheckRunning(tabel){
this.tabel = "tabel"+tabel+"";
var db = window.openDatabase(this.tabel, "1.0", this.tabel, 1000000);
db.transaction(checkrunningDB, checkerrorCB);
console.log(this.running);
return this.running;
}

function checkrunningDB(tx) {
   tx.executeSql('SELECT max(id), sluttime FROM '+this.tabel, [], checkrunningSuccess, checkerrorCB);
}

function checkrunningSuccess(tx, results) {
    if (results.rows.item(0).sluttime != null){
        this.running = false;
    } else{
        this.running = true;
    }
}
function checkerrorCB(err) {
     this.running = false;
    console.log(err);
} 
```

所以我做了一个按钮，运行这个 CheckRunning() 函数。

当我按下它时，我得到了这个（每行代表一个按钮点击）：

```
false
true
true 
true 
true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T00:28:51.317

您的数据库函数正在异步运行。回调 ,`checkrunningSuccess`将在完成后运行，但之后的行`db.transaction(checkrunningDB, checkerrorCB);`可能会在此之前执行。

# python - 绘制高精度数据

> ID：13675577
> 
> 赞同：4
> 
> 时间：2012-12-03T00:26:32.550
> 
> 标签：python, matplotlib

我有一个数组，其中包含作为两个不同数量（alpha 和 eigRange）函数的误差值。

我像这样填充我的数组：

```
 for j in range(n): 
        for i in range(alphaLen):
            alpha = alpha_list[i]
            c = train.eig(xt_, yt_,m-j, m,alpha, "cpu")
            costListTrain[j, i] = cost.err(xt_, xt_, yt_, c)

   normedValues=costListTrain/np.max(costListTrain.ravel()) 
```

在哪里

```
n = 20
alpha_list = [0.0001,0.0003,0.0008,0.001,0.003,0.006,0.01,0.03,0.05] 
```

我的`costListTrain`数组包含一些差异很小的值，例如：

> 2.809458902485728 2.809458905776425 2.809458913576337 2.809459011062461 2.030326752376704 2.030329906064879 2.030337351188699 2.030428976282031 1.919840839066182 1.919846470077076 1.919859731440199 1.920021453630778 1.858436351617677 1.858444223016128 1.858462730482461 1.858687054377165 1.475871326997542 1.475901926855846 1.475973476249240 1.476822830933632 1.475775410801635 1.475806023102173 1.475877601316863 1.476727286424228 1.475774284270633 1.475804896751524 1.475876475382906 1.476726165223209 1.463578292548192 1.463611627166494 1.463689466240788 1.464609083309240 1.462859608038034 1.462893157900139 1.462971489632478 1.463896516033939 1.461912706143012 1.461954067956570 1.462047793798572 1.463079574605320 1.450581041157659 1。452770209885761 1.454835202839513 1.459676311335618 1.450581041157643 1.452770209885764 1.454835202839484 1.459676311335624 1.450581041157651 1.452770209885735 1.454835202839484 1.459676311335610 1.450581041157597 1.452770209885784 1.454835202839503 1.459676311335620 1.450581041157575 1.452770209885757 1.454835202839496 1.459676311335619 1.450581041157716 1.452770209885711 1.454835202839499 1.459676311335613 1.450581041157667 1.452770209885744 1.454835202839509 1.459676311335625 1.450581041157649 1.452770209885750 1.454835202839476 1.459676311335617 1.450581041157655 1.452770209885708 1.454835202839442 1.459676311335622 1.450581041157571 1.452770209885700 1.454835202839498 1.459676311335622450581041157643 1.452770209885764 1.454835202839484 1.459676311335624 1.450581041157651 1.452770209885735 1.454835202839484 1.459676311335610 1.450581041157597 1.452770209885784 1.454835202839503 1.459676311335620 1.450581041157575 1.452770209885757 1.454835202839496 1.459676311335619 1.450581041157716 1.452770209885711 1.454835202839499 1.459676311335613 1.450581041157667 1.452770209885744 1.454835202839509 1.459676311335625 1.450581041157649 1.452770209885750 1.454835202839476 1.459676311335617 1.450581041157655 1.452770209885708 1.454835202839442 1.459676311335622 1.450581041157571 1.452770209885700 1.454835202839498 1.459676311335622450581041157643 1.452770209885764 1.454835202839484 1.459676311335624 1.450581041157651 1.452770209885735 1.454835202839484 1.459676311335610 1.450581041157597 1.452770209885784 1.454835202839503 1.459676311335620 1.450581041157575 1.452770209885757 1.454835202839496 1.459676311335619 1.450581041157716 1.452770209885711 1.454835202839499 1.459676311335613 1.450581041157667 1.452770209885744 1.454835202839509 1.459676311335625 1.450581041157649 1.452770209885750 1.454835202839476 1.459676311335617 1.450581041157655 1.452770209885708 1.454835202839442 1.459676311335622 1.450581041157571 1.452770209885700 1.454835202839498 1.459676311335622454835202839484 1.459676311335610 1.450581041157597 1.452770209885784 1.454835202839503 1.459676311335620 1.450581041157575 1.452770209885757 1.454835202839496 1.459676311335619 1.450581041157716 1.452770209885711 1.454835202839499 1.459676311335613 1.450581041157667 1.452770209885744 1.454835202839509 1.459676311335625 1.450581041157649 1.452770209885750 1.454835202839476 1.459676311335617 1.450581041157655 1.452770209885708 1.454835202839442 1.459676311335622 1.450581041157571 1.452770209885700 1.454835202839498 1.459676311335622454835202839484 1.459676311335610 1.450581041157597 1.452770209885784 1.454835202839503 1.459676311335620 1.450581041157575 1.452770209885757 1.454835202839496 1.459676311335619 1.450581041157716 1.452770209885711 1.454835202839499 1.459676311335613 1.450581041157667 1.452770209885744 1.454835202839509 1.459676311335625 1.450581041157649 1.452770209885750 1.454835202839476 1.459676311335617 1.450581041157655 1.452770209885708 1.454835202839442 1.459676311335622 1.450581041157571 1.452770209885700 1.454835202839498 1.459676311335622452770209885711 1.454835202839499 1.459676311335613 1.450581041157667 1.452770209885744 1.454835202839509 1.459676311335625 1.450581041157649 1.452770209885750 1.454835202839476 1.459676311335617 1.450581041157655 1.452770209885708 1.454835202839442 1.459676311335622 1.450581041157571 1.452770209885700 1.454835202839498 1.459676311335622452770209885711 1.454835202839499 1.459676311335613 1.450581041157667 1.452770209885744 1.454835202839509 1.459676311335625 1.450581041157649 1.452770209885750 1.454835202839476 1.459676311335617 1.450581041157655 1.452770209885708 1.454835202839442 1.459676311335622 1.450581041157571 1.452770209885700 1.454835202839498 1.459676311335622

正如你可以在这里价值非常非常接近！

我试图以在 x、y 轴上有两个量并且误差值由点颜色表示的方式绘制这些数据。

这就是我绘制数据的方式：

```
 alpha_list = np.log(alpha_list)        
    eigenvalues, alphaa  = np.meshgrid(eigRange, alpha_list) 

    vMin = np.min(costListTrain)
    vMax = np.max(costListTrain)

    plt.scatter(x, y, s=70, c=normedValues, vmin=vMin, vmax=vMax, alpha=0.50) 
```

但结果不正确。

*   我试图通过将所有值除以 来标准化我的错误值`max`，但它没有用！

*   我可以使它工作的唯一方法（这是不正确的）是以两种不同的方式标准化我的数据。一个是基于每一列（这意味着因子 1 是恒定的，因子 2 是变化的），另一个是基于行的（意味着因子 2 是恒定的，因子 1 是变化的）。但这并没有真正的意义，因为我需要一个图来显示两个量在误差值上的权衡。

# 更新

这就是我最后一段的意思。基于与特征值对应的每一行的最大值对值进行归一化：

```
maxsEigBasedTrain= np.amax(costListTrain.T,1)[:,np.newaxis]    
maxsEigBasedTest= np.amax(costListTest.T,1)[:,np.newaxis]

normEigCostTrain=costListTrain.T/maxsEigBasedTrain
normEigCostTest=costListTest.T/maxsEigBasedTest 
```

基于与 alpha 对应的每一列的最大值对值进行归一化：

```
maxsAlphaBasedTrain= np.amax(costListTrain,1)[:,np.newaxis]
maxsAlphaBasedTest= np.amax(costListTest,1)[:,np.newaxis]

normAlphaCostTrain=costListTrain/maxsAlphaBasedTrain
normAlphaCostTest=costListTest/maxsAlphaBasedTest 
```

情节1：

![在此处输入图像描述](../Images/132545dd715781aff286253bb121efbf.png)

哪里没有。`eigenvalue = 10`和 alpha 变化（应对应于图 1 的第 10 列）：

![在此处输入图像描述](../Images/a12c31e3c144e60c237f51e0f4da201a.png)

其中`alpha = 0.0001`和特征值发生变化（应对应于 plot1 的第一行）

![在此处输入图像描述](../Images/fa650761f806fee346de84fb0b0d0f16.png)

但正如您所见，结果与图 1 不同！

# 更新：

只是为了澄清更多的东西，这就是我读取数据的方式：

```
from sklearn.datasets.samples_generator import make_regression

rng = np.random.RandomState(0)
diabetes = datasets.load_diabetes()

X_diabetes, y_diabetes = diabetes.data, diabetes.target
X_diabetes=np.c_[np.ones(len(X_diabetes)),X_diabetes]
ind = np.arange(X_diabetes.shape[0])
rng.shuffle(ind)
#===============================================================================
# Split Data 
#===============================================================================
import math
cross= math.ceil(0.7*len(X_diabetes))
ind_train = ind[:cross]
X_train, y_train = X_diabetes[ind_train], y_diabetes[ind_train]

ind_val=ind[cross:]
X_val,y_val=  X_diabetes[ind_val], y_diabetes[ind_val] 
```

[我也在这里](http://www.filesend.net/download.php?f=ae13c85aaadcc1d73d9281b372ae8892)上传了`.csv`文件

`log.csv`包含图 1 标准化之前的原始值

`normalizedLog.csv`对于情节 1

`eigenConst.csv`对于情节 2

`alphaConst.csv`对于情节 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:42:25.787

我想我找到了答案。首先，我的代码中有一个问题。我期待“特征值的编号”对应于行，但在我的 for 循环中它们填充了列。正确的答案是这样的：

```
for i in range(alphaLen):
    for j in range(n): 
        alpha=alpha_list[i]
        c=train.eig(xt_, yt_,m-j,m,alpha,"cpu")
        costListTrain[i,j]=cost.err(xt_,xt_,yt_,c)
        costListTest[i,j]=cost.err(xt_,xv_,yv_,c) 
```

在向朋友和同事提问后，我得到了这个答案：

> 我会假设在默认的 imshow 和您可能想要使用的其他绘图命令上，对您正在绘制的值执行相同大小的间隔。如果您可以将其设置为对数，则应该没问题。理想情况下，我猜，同样的“填充垃圾箱”会证明是最有效的。

对于绘图，我只是从错误中减去`min value`并添加一个小数字，最后获取日志。

```
 temp=costListTrain- costListTrain.min()
 temp+=0.00000001
 extent = [0, 20,alpha_list[0], alpha_list[-1]]

 plt.imshow(np.log(temp),interpolation="nearest",cmap=plt.get_cmap('spectral'), extent =  extent, origin="lower")
 plt.colorbar() 
```

结果是：

![在此处输入图像描述](../Images/7f0940f7119cedc971076d94f1fda632.png)

# java - 使用 JAVA 使用 BouncyCastle 签署 CAdES

> ID：13675583
> 
> 赞同：2
> 
> 时间：2012-12-03T00:26:53.297
> 
> 标签：java, bouncycastle

根据几篇文章，我发现现在可以使用 BouncyCastle 执行 CAdES，但几乎没有关于该主题的任何文档。

对于初学者，我想在具有基于文件的证书的文件上执行没有任何可选签名属性的 CAdES-BES。

* * *

针对皮屑：

我有一些可能有用的东西，你有你的 SignerInformation，你需要扩展它，首先你需要从时间戳创建一个属性，我假设你已经有一个 TimeStampResponse 作为 tspResp

```
TimeStampToken token = tsresp.getTimeStampToken();

Attribute timeStamp = new Attribute(PKCSObjectIdentifiers.id_aa_signatureTimeStampToken, new DERSet(ASN1Object.fromByteArray(token.getEncoded()))); 
```

然后你需要扩展你的 SignerInformation

```
AttributeTable unsigned = signerInformation.getUnsignedAttributes();
Hashtable<ASN1ObjectIdentifier, Attribute> unsignedAttrHash = null;
if (unsigned == null) {
    unsignedAttrHash = new Hashtable<ASN1ObjectIdentifier, Attribute>();
} else {
    unsignedAttrHash = signerInformation.getUnsignedAttributes().toHashtable();
}

unsignedAttrHash.put(PKCSObjectIdentifiers.id_aa_signatureTimeStampToken, signatureTimeStamp);

SignerInformation newsi = SignerInformation.replaceUnsignedAttributes(si, new AttributeTable(
        unsignedAttrHash)); 
```

我想就是这样。

这是我获得 signin-certificate 属性的方式

* * *

```
Attribute signingCertificateAttribute;
MessageDigest dig = MessageDigest.getInstance(DigestAlgorithm().getName(),
    new BouncyCastleProvider());

byte[] certHash = dig.digest(SigningCertificate().getEncoded());

if (DigestAlgorithm() == DigestAlgorithm.SHA1) {
    SigningCertificate sc = new SigningCertificate(new ESSCertID(certHash));

    signingCertificateAttribute = new Attribute(PKCSObjectIdentifiers.id_aa_signingCertificate, new DERSet(sc));

} else {
    ESSCertIDv2 essCert = new ESSCertIDv2(new AlgorithmIdentifier(DigestAlgorithm().getOid()), certHash);
    SigningCertificateV2 scv2 = new SigningCertificateV2(new ESSCertIDv2[] { essCert });

    signingCertificateAttribute =  new Attribute(PKCSObjectIdentifiers.id_aa_signingCertificateV2, new DERSet(scv2));
} 
```

希望能帮助到你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:20:02.860

CAdES 是 CMS（又名 PKCS7）的扩展，可以与 BouncyCastle 一起使用。[RFC5126](https://www.rfc-editor.org/rfc/rfc5126 "RFC5126")包含 CAdES 签名所需的所有内容，此外，我建议在 ASN.1 上查找信息，因为大多数部分都以该格式描述。

我目前正在寻找您正在寻找的相同答案，并发现[David Hook 的《用 Java 开始密码学](https://rads.stackoverflow.com/amzn/click/com/0764596330)》一书提供了您可能需要的大量详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-11T13:59:39.853

有用的代码可以在“ [https://joinup.ec.europa.eu/](https://joinup.ec.europa.eu/) ”上找到

看看[CAdESProfileBES.java](https://joinup.ec.europa.eu/svn/sd-dss/trunk/apps/dss/dss-document/src/main/java/eu/europa/ec/markt/dss/signature/cades/CAdESProfileBES.java)。

[有人在原来的 SD-Digital Signature Service 的 Fork 上](https://github.com/latraccia)放了同样的代码。

# javascript - 将整个 json 文件作为数组加载到变量中

> ID：13675589
> 
> 赞同：0
> 
> 时间：2012-12-03T00:28:21.643
> 
> 标签：javascript, jquery, arrays, json, variables

我想获取一个外部 json 文件（locations.json）并将内容加载到一个变量中。然后我想使用这里提供的信息来使用这个变量：http: [//www.json.org/js.html](http://www.json.org/js.html)

我在尝试将外部 json 加载到变量时遇到了很多麻烦。我已经看过这个（[将 json 加载到变量](https://stackoverflow.com/questions/2177548/load-json-into-variable)中）页面很多，但实际上并没有填充变量。稍后显示变量的内容时，它似乎是空的。

```
$("#testContain").html("<p>" + json + "</p>"); 
```

使用最后一个链接中列出的方法，这将显示“未定义”。

我正在使用的 json 文件如下所示：

```
[{"id":"1","locname":"Dunstable Downs","lat":"51.8646","lng":"-0.536957","address":"Chiltern Gateway Centre","address2":"","city":"","state":"England","postal":"","phone":"","web":"http:\/\/www.nationaltrust.org.uk\/main\/w-dunstabledownscountrysidecentrewhipsnadeestate","hours1":"","hours2":"","hours3":""},
{"id":"2","locname":"West Delta Park","lat":"45.5974","lng":"-122.688","address":"N Broadacre St and N Expo Rd, Portland","address2":"","city":"","state":"OR","postal":"","phone":"","web":"http:\/\/en.wikipedia.org\/wiki\/Delta_Park","hours1":"","hours2":"","hours3":""}] 
```

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:38:42.247

问题是请求是异步的。您*可以*按照您链接到的问题的已接受答案的建议进行同步调用，但这通常不是一个好主意，因为它会在等待响应时完全冻结浏览器。

该变量被分配得很好，但是当您在请求它之后使用它时，您必须确保它是在获得响应之后，而不仅仅是在发送请求之后。在方法的回调中使用值`getJSON`是确保您拥有该值的最简单方法：

```
var my_json;
$.getJSON(my_url, function(json) {
  my_json = json;
  // here you have the value
});
// here you don't have the value, as this happens before the response arrives 
```

# protocol-buffers - 我可以停用所需的 protobuf 字段吗？

> ID：13675590
> 
> 赞同：14
> 
> 时间：2012-12-03T00:28:39.963
> 
> 标签：protocol-buffers, backwards-compatibility

我有一个客户端-服务器应用程序，服务器将 protobuf 格式的序列化对象传输给客户端，我想停用一个`required`字段。不幸的是，我不能同时更改客户端和服务器以使用新`.proto`定义。

如果我将一个`required`字段更改为`optional`，但仅用于*序列化*消息的代码（即*反序列*化代码尚未重建并且仍然认为它是一个`required`字段），我可以继续发布可以反序列化的消息，**只要我填充一个值现在`optional`-场？**

（这样做似乎很好，至少对于我尝试过的一些微不足道的情况（仅使用Java），但我感兴趣的是它是否是一种普遍合理的方法，以及是否有任何边缘情况等我应该担心）。

**动机**：我的目标是停用`required`客户端-服务器应用程序中的一个字段，其中服务器发布由客户端反序列化的消息。我的预期方法是：

1.  `required`将字段更改为`optional`在主干上。
2.  如果需要部署新的服务器代码（用于不相关的功能/修复），*请确保在消息中继续填充可选字段*。
3.  逐步为所有客户部署更新的代码（这需要时间，因为它需要其他团队参与他们自己的发布计划）
4.  确认所有客户端都已更新。
5.  开始停用（即不填充）可选字段。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-03T00:42:03.720

根据[编码格式文档](https://developers.google.com/protocol-buffers/docs/encoding)，是否需要字段并没有编码在序列化字节流本身中。也就是说，**`optional`或者`required`对编码的序列化消息没有影响**。

我已经在实践中确认了这一点，使用 Java 生成的代码，通过将序列化消息写入磁盘并比较输出 - 使用包含所有支持的原始类型以及表示其他类型的字段的消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T00:34:02.167

只要设置了该字段，使用`parseFrom(byte[])`反序列化的方法仍然可以工作，因为 byte[] 将是相同的。

但是，有人会想知道为什么在您准备好允许它成为可选字段之前，您要将字段从必需更改为可选？基本上，您只是在 .proto 文件中将其设为“可选”，但您通过始终填充它来强制要求它。只是一个想法。

# ruby-on-rails-3 - 如何存根部分会话以模拟授权会话？

> ID：13675594
> 
> 赞同：3
> 
> 时间：2012-12-03T00:29:20.613
> 
> 标签：ruby-on-rails-3, rspec, ruby-on-rails-3.2, stub

我的产品控制器上有一个前置过滤器：

```
before_filter :authorize, only: [:create, :edit, :update] 
```

我的`authorize`方法在我的定义`application_controller`为：

```
def authorize
    redirect_to login_url, alert: "Not authorized" if current_user.nil?
end 
```

current_user 定义为：

```
def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
end 
```

**在我的 rspec 中，我正在尝试：**

```
before(:each) do
    session.stub!(:user_id).and_return("admin@email.com")
end 
```

但我仍然收到如下错误：

```
ProductsController PUT update with valid params redirects to the product
     Failure/Error: response.should redirect_to(product)
       Expected response to be a redirect to <http://test.host/products/1> but was a redirect to <http://test.host/login> 
```

. . . 这意味着我的测试在请求时没有登录。

我在这里想念什么？

有没有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T11:43:13.983

考虑到您正在测试控制器，并试图将其集中在控制器上，您可以`current_user`使用真实用户或模拟来存根该方法。

```
before(:each) do
   ApplicationController.any_instance.stub(:current_user).and_return(@user = mock('user'))
end 
```

有了它，您将可以访问`user`模拟以在需要时应用进一步的期望和存根。如果模型妨碍了，请将其更改为真实`User`对象。

# java - 如何让我的 java 聊天客户端和服务器从文本字段交换消息

> ID：13675602
> 
> 赞同：2
> 
> 时间：2012-12-03T00:30:03.907
> 
> 标签：java, io, network-programming, chat

我正在使用看起来像这样的 GUI 用 Ja​​va 编写聊天程序 这个![图形用户界面](../Images/e9d04a5517661873f4edcca176a5c2eb.png)
想法是在一台计算机上启动服务器，在另一台（或多台）计算机上启动客户端（我目前只是在同一台计算机上运行两者）。服务器启动后，客户端输入主机号和端口号并点击连接。到目前为止，所有这些都有效。一旦连接，用户或服务器都可以输入文本字段并点击发送，消息可以发送到服务器，服务器将消息发送给所有客户端。

我的问题是：**如何将文本从客户端发送到服务器，反之亦然？**
我很难理解这是如何工作的。服务器处于一个while循环中并等待更多连接（所有这些都有效），所以我不知道它如何接受文本然后将其推回。

这是整个程序，因此您可以编译它并查看我遇到的问题：

```
import java.awt.*;
import java.applet.*;
import java.awt.event.*;
import java.util.*;
import java.io.*;
import java.lang.*;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketAddress;
import java.io.PrintWriter;
import java.util.Scanner;

public class Chat extends Frame implements Runnable, WindowListener, ActionListener, ItemListener
{   

    int port = 44004;
    String host =  "127.0.0.1";
    //GUI objects
    TextField ipAddressField = new TextField();
    TextField portField = new TextField(""+port); 
    TextField hostField = new TextField(host);
    TextField inputBox = new TextField();
    static TextArea conversationBox = new TextArea();
    Button startServerButton = new Button("Start Server");
    Button sendButton = new Button("Send");
    Button changeHost = new Button("Change Host");
    Button changePort = new Button("Change Port");
    Button connectButton = new Button("Connect");
    Button disconnectButton = new Button("Disconnect");
    Label hostLabel = new Label("Host:");
    Label portLabel = new Label("Port:");
    MenuBar mb = new MenuBar();
    Menu colorMenu = new Menu("Color");
    CheckboxMenuItem redItem = new CheckboxMenuItem("Red");
    CheckboxMenuItem blueItem = new CheckboxMenuItem("Blue");
    CheckboxMenuItem orangeItem = new CheckboxMenuItem("Orange");
    CheckboxMenuItem blackItem = new CheckboxMenuItem("Black");

    //runtime variables
    Color color = Color.red;
    volatile boolean kill = false;
    volatile boolean isServer = false;
    volatile boolean isClient = false;
    String connections[];

    //messaging variables
    String message;
    Scanner in;
    PrintWriter out;

    public static void main(String [] args)
    {
        new Chat();
    }

    ServerSocket server;
    Socket s;
    //gui components

    protected Chat()
    {
        double[] colWeight = {1,1,1,1,1,1};
        double[] rowWeight = {5,1,1,1,1};
        int[] colWidth = {1,1,1,1,1,1};
        int[] rowHeight = {5,1,1,1,1};
        GridBagConstraints c = new GridBagConstraints();
        GridBagLayout gbl = new GridBagLayout();
        gbl.rowHeights = rowHeight;
        gbl.columnWidths = colWidth;
        gbl.columnWeights = colWeight;
        gbl.rowWeights = rowWeight;

        setBounds(100,100,400,600);
        setLayout(gbl);

        //add conversation box
        this.conversationBox.setSize(400, 400);
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 5;
        c.gridheight = 5;
        c.fill = 1;
        c.gridx = 0;
        c.gridy = 0;
        gbl.setConstraints(this.conversationBox, c);

        //input text box
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 4;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 0;
        c.gridy = 5;
        gbl.setConstraints(this.inputBox, c);

        //send button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 4;
        c.gridy = 5;
        gbl.setConstraints(this.sendButton, c);

        //host label
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 0;
        c.gridy = 6;
        gbl.setConstraints(this.hostLabel, c);

        //host input
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 1;
        c.gridy = 6;
        gbl.setConstraints(this.hostField, c);

        //change host button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 3;
        c.gridy = 6;
        gbl.setConstraints(this.changeHost, c);

        //start server button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 4;
        c.gridy = 6;
        gbl.setConstraints(this.startServerButton, c);

        //row
        //port label
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 0;
        c.gridy = 7;
        gbl.setConstraints(this.portLabel, c);

        //port input
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 1;
        c.gridy = 7;
        gbl.setConstraints(this.portField, c);

        //change port button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 3;
        c.gridy = 7;
        gbl.setConstraints(this.changePort, c);

        //connect button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 4;
        c.gridy = 7;
        gbl.setConstraints(this.connectButton, c);

        //disconnect button, shunned in the corner
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 1;
        c.fill = 1;
        c.gridx = 4;
        c.gridy = 8;
        gbl.setConstraints(this.disconnectButton, c);

        mb.add(colorMenu);
        colorMenu.add(redItem);
        colorMenu.add(blueItem);
        colorMenu.add(orangeItem);
        colorMenu.add(blackItem);

        add(this.conversationBox);
        add(this.inputBox);
        add(this.sendButton);
        add(this.hostLabel);
        add(this.hostField);
        add(this.changeHost);
        add(this.startServerButton);
        add(this.portLabel);
        add(this.portField);
        add(this.changePort);
        add(this.connectButton);
        add(this.disconnectButton);

        inputBox.addActionListener(this);
        sendButton.addActionListener(this);
        changeHost.addActionListener(this);
        changePort.addActionListener(this);
        startServerButton.addActionListener(this);
        connectButton.addActionListener(this);
        disconnectButton.addActionListener(this);
        hostField.addActionListener(this);
        portField.addActionListener(this);
        redItem.addItemListener(this);
        blueItem.addItemListener(this);
        orangeItem.addItemListener(this);
        blackItem.addItemListener(this);

        setMenuBar(mb);
        addWindowListener(this);
        setResizable(true);
        pack();
        setVisible(true);

        new Thread(this).start();
    }

    public void run()
    {   
        conversationBox.appendText("Session Start.\n");
        inputBox.requestFocus();

        while (!kill)
        {
            if (isServer)
            {
                conversationBox.appendText("Server starting on port " + port + "\n");
                conversationBox.appendText("Waiting for clients...\n");
                startServer();
            }
            if (isClient)
            {
                conversationBox.appendText("Starting connection to host " + host + " on port " + port + "\n");
                startClient();
            }
        }       

    }

    public void startClient()
    {
        try
        {
            Socket c = new Socket(host, port);
            in = new Scanner(c.getInputStream());
            out = new PrintWriter(c.getOutputStream());
            while (true)
            {
                if (in.hasNext())
                {
                    Chat.conversationBox.appendText("You Said: " + message);
                    out.println("Client Said: " + message);
                    out.flush();
                }
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    public void startServer()
    {
        try
        {
            server = new ServerSocket(port);
            while (true)
            {
                s = server.accept();
                conversationBox.appendText("Client connected from " + s.getLocalAddress().getHostName() + "\n");    
            }
        }
        catch (Exception e)
        {
            conversationBox.appendText("An error occurred.\n");
            e.printStackTrace();
            isServer = false;
            reEnableAll();
        }

    }

    public void actionPerformed(ActionEvent e) throws NumberFormatException
    {
        Object o = e.getSource();

        if (o == sendButton || o == inputBox)
        {
            if(inputBox.getText() != "")
            {
                out.println(inputBox.getText());
                inputBox.setText("");
            }
        }
        if (o == changeHost || o == hostField)
        {
            if (hostField.getText() != "" && hostField.getText() != host)
            {
                host = hostField.getText();
                conversationBox.appendText("Host changed to " + host + "\n");
            }
        }
        if (o == changePort || o == portField)
        {
            if (portField.getText() != "" && Integer.valueOf(portField.getText()) != port)
            {
                try
                {
                    port = Integer.valueOf(portField.getText());
                    conversationBox.appendText("Port changed to " + port + "\n");
                }
                catch(NumberFormatException up)
                {
                    throw up; //blargh enter a real value
                }
            }
        }
        if (o == startServerButton)
        {
            isServer = true;
            isClient = false;
            startServerButton.enable(false);
            connectButton.enable(false);
            changeHost.enable(false);
            changePort.enable(false);
            hostField.enable(false);
            portField.enable(false);
        }
        if (o == connectButton)
        {
            isServer = false;
            isClient = true;
            startServerButton.enable(false);
        }
        inputBox.requestFocus();
    }

    public void reEnableAll()
    {
        startServerButton.enable(true);
        connectButton.enable(true);
        changeHost.enable(true);
        changePort.enable(true);
        hostField.enable(true);
        portField.enable(true);
    }

    public void windowClosing(WindowEvent e)
    {
        removeWindowListener(this);
        inputBox.removeActionListener(this);
        sendButton.removeActionListener(this);
        changeHost.removeActionListener(this);
        changePort.removeActionListener(this);
        startServerButton.removeActionListener(this);
        connectButton.removeActionListener(this);
        disconnectButton.removeActionListener(this);
        dispose();
        System.exit(0);
    }
    public void windowClosed(WindowEvent e){}
    public void windowOpened(WindowEvent e){}
    public void windowActivated(WindowEvent e){}
    public void windowDeactivated(WindowEvent e){}
    public void windowIconified(WindowEvent e){}
    public void windowDeiconified(WindowEvent e){}

    public void itemStateChanged(ItemEvent e)
    {
        Object o = e.getSource();
        if (o == redItem)
        {
            redItem.setState(true);
            blueItem.setState(false);
            orangeItem.setState(false);
            blackItem.setState(false);
            color = Color.red;
        }

        if (o == blueItem)
        {
            redItem.setState(false);
            blueItem.setState(true);
            orangeItem.setState(false);
            blackItem.setState(false);
            color = Color.red;          
        }

        if (o == orangeItem)
        {
            redItem.setState(false);
            blueItem.setState(false);
            orangeItem.setState(true);
            blackItem.setState(false);
            color = Color.red;          
        }

        if (o == blackItem)
        {
            redItem.setState(false);
            blueItem.setState(false);
            orangeItem.setState(false);
            blackItem.setState(true);
            color = Color.red;          
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:39:42.613

我测试了您的代码，我发现在您的 startServer() 函数中，您没有创建 OutputStream 和 InputStream

像这样修改你的`startClient`函数：（创建两个全局变量：`BufferedWriter bw`和`BufferedReader br`，因为我们在你的`actionPerformed`函数中需要它）

```
BufferedWriter bw = null;
BufferedReader br = null;
public void startClient()
{
    try
    {
        Socket c = new Socket(host, port);

        bw = new BufferedWriter(new OutputStreamWriter(c.getOutputStream()));
        br = new BufferedReader(new InputStreamReader(c.getInputStream()));

        char buffer[] = new char[1024];
        while (br.read(buffer) > 0)
        {
            Chat.conversationBox.appendText("You Said: " + new String(buffer));
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

像这样修改你的`startServer`函数：

```
public void startServer()
{
    try
    {
        server = new ServerSocket(port);
        while (true)
        {

            s = server.accept();

            s.getInputStream();

            conversationBox.appendText("Client connected from " + s.getLocalAddress().getHostName() + "\n");

            BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));
            BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));

            char buffer[] = new char[1024];
            conversationBox.appendText("Reading....");
            while(br.read(buffer) > 0)
            {
                conversationBox.appendText("Client Say : " + new String(buffer));
                bw.write(buffer);
                bw.flush();
            }
            conversationBox.appendText("Reading Done....");
        }
    }
    catch (Exception e)
    {
        conversationBox.appendText("An error occurred.\n");
        e.printStackTrace();
        isServer = false;
        reEnableAll();
    }
} 
```

在您的`actionPerformed`函数中，请修改以下代码：

```
 if (o == sendButton || o == inputBox)
    {
        if (inputBox == null)
        {
            System.out.println("NULL");
        }

        if(inputBox.getText() != "")
        {
            //out.println(inputBox.getText());
            //out.flush();

            try
            {
                bw.write(inputBox.getText());
                bw.flush();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            inputBox.setText("");
        }
    } 
```

# javascript - javascript / css 淡出

> ID：13675606
> 
> 赞同：-1
> 
> 时间：2012-12-03T00:30:27.400
> 
> 标签：javascript, html, css

大家好，不确定这是java脚本还是CSS，但我在一个盒子里有一张图片，当用户将鼠标悬停在它上面时，它会改变颜色（其中有4个）。我的问题是我如何得到它，所以当用户将鼠标悬停在一个盒子上时，其他所有东西都会淡出。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="eng" lang="eng">
<head>
<script type="text/javascript" src="jquery-1.8.0.min.js"></script>
<style type="text/css">
.meh1
{
    height: 200px; /*Specify Height*/
    width:  200px; /*Specify Width*/
    border: 3px solid blue; /*Add 1px solid border, use any color you want*/
    text-align:center; /*Align the text to the center*/
}

.meh1:hover
{
    border: 3px solid orange;
}   

.meh2
{
    height: 200px; /*Specify Height*/
    width:  200px; /*Specify Width*/
    border: 3px solid blue; /*Add 1px solid border, use any color you want*/
    text-align:center; /*Align the text to the center*/
}

.meh2:hover
{
    border: 3px solid orange;
}

</style>
<script type="text/javascript">
var $mehs = $('.meh');
$mehs.hover(function(){
$mehs.not(this).fadeTo(200, 0.25);
}, function(){
$mehs.fadeTo(200, 1);
});
 </script>

</head>
<body>

<div id="meh">

    <div class="meh1">
        <img src="cw3.jpg" alt="Name">
    </div>

    <div class="meh2">
        <img src="cw2.jpg" alt="Name">
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:35:21.297

它是 javascript... 最简单的方法是使用 jQuery。（根据你的其他问题，我看到你很熟悉）。

假设所有 div 都有类`meh`：

```
var $mehs = $('.meh');
$mehs.hover(function(){
  $mehs.not(this).fadeTo(200, 0.25);
}, function(){
  $mehs.fadeTo(200, 1);
}); 
```

我使用过`fadeTo()`，因为这将保持您的布局（`fadeOut()`将元素设置为`display:none;`并影响您的页面布局）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:34:22.030

像这样的东西：

```
$(document).ready(function() {
    $(".meh").on('mouseover', function(){
        $("Whatever it is that you want to fade").fadeOut('slow');
    });
}); 
```

# java - 重复字母的Java正则表达式

> ID：13675613
> 
> 赞同：0
> 
> 时间：2012-12-03T00:31:35.280
> 
> 标签：java, regex

我找不到匹配重复字母的正则表达式。我的问题是我想使用正则表达式来过滤垃圾邮件，例如，我想使用正则表达式来检测这些字符串中的“垃圾邮件”和“伟哥”：“xxxSpAmyyy”、“xxxSPAMyyy”、“xxxvI a Gr AA” yyy", "xxxV iiA gR a xxx"

您对我如何以一种好的方式做到这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:36:54.677

喜欢搜索这个？

```
"v.{0,3}i.{0,3}a.{0,3}g.{0,3}r.{0,3}a" 
```

见[模式](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#columnAtPoint%28java.awt.Point%29)

* * *

***代码：***

这会在字符之间留出 0 到 3 个字符的空间。我没有编译以下内容，但它“应该可以工作”。

```
String[] strings = new String[] { ""xxxV iiA gR a xxx"" };
final Pattern spamPattern = makePattern("viagra");
for (String s : strings) {
    boolean isSpam = spamPattern.matcher(s).find();
    if (isSpam) {
        System.out.println("Spam: " + s);
    }
}
...
Pattern makePattern(String cusWord) {
    cusWord = cusWord.toLowerCase();
    StringBuilder sb = new StringBuilder();
    sb.append("(?i)"); // Case-insensitive setting.
    for (int i = 0; i < cusWord.length(); ) {
        int cp = cusWord.codePointAt(i);
        i += Character.charCount(cp);
        if ('o' == cp) {
            sb.append("[o0]");
        } else if ('l' == cp) {
            sb.append("[l1]");
        } else {
            sb.appendCodePoint(cp);
        }
        sb.append(".{0,3}"); // 0 - 3 occurrences of any char.
    }
    return Pattern.compile(sb.toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:40:03.980

这忽略了这种情况，无论它们是一个相邻的，还是它们之间有其他字符，都需要它们

```
"(?i).{0,}v.{0,}i.{0,}a.{0,}g.{0,}r.{0,}a.{0,}" 
```

如果您知道字母之间可以有多少个字符，则可以输入`.{0,max_distance}`而不是`.{0,}`

更新：

它甚至适用于重复，因为我已经尝试过了：

```
 String str = "xxxV iiA gR a xxx";

    if(str.matches("(?i).{0,}v.{0,}i.{0,}a.{0,}g.{0,}r.{0,}a.{0,}")){
        System.out.println("Yes");
    }
    else{
        System.out.println("No");
    } 
```

这打印`Yes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T00:44:25.053

我想，你走错路了。垃圾邮件的过滤与机器学习密切相关。我建议您阅读有关**[贝叶斯垃圾邮件过滤](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)**的信息。

如果您认为，您会收到带有拼写错误的单词（和其他类型的垃圾）的垃圾邮件 - 我建议您不要使用基于整个单词的过滤，而是基于**[n-grams](http://en.wikipedia.org/wiki/N-gram#n-grams_for_approximate_matching)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:42:59.187

您可以尝试使用[积极的前瞻](http://www.regular-expressions.info/lookaround.html)

```
(?=.*v)(?=.*i)(?=.*a)(?=.*g)(?=.*r)(?=.*a).* 
```

编辑：

```
(?=.*v.*i.*a.*g.*r.*a.*).* 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T00:50:54.120

你试过任何正则表达式吗？

像`\w*[sSpPaAmM]+\w*`这样的东西应该可以解决问题

您可以在此站点上测试您的 RE：[http ://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

# sqlite - svn cleanup: sqlite: 数据库磁盘映像格式错误

> ID：13675615
> 
> 赞同：100
> 
> 时间：2012-12-03T00:32:14.960
> 
> 标签：sqlite, svn, tortoisesvn

我试图做 a`svn cleanup`因为我无法在我的工作副本中提交更改，并且我收到以下错误：

> sqllite：数据库磁盘映像格式错误

![清理未能处理以下路径](../Images/290990166c66ca11a4dbac9b301671e4.png)

我现在能做什么？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-08T08:43:03.480

首先，在存储库根目录（作为子文件夹的文件夹）打开`command`/ ：`terminal``.svn`

```
cd /path/to/repository 
```

下载[`sqlite3`](https://www.sqlite.org/download.html)可执行文件并将其放在文件`sqlite3`夹的根目录下。

您对跟踪存储库 ( `/path/to/repository/.svn/wc.db`) 的 sqlite 数据库进行完整性检查：

```
sqlite3 .svn/wc.db "pragma integrity_check" 
```

那应该报告一些错误。

然后，您可以通过执行以下操作来清理它们：

```
sqlite3 .svn/wc.db "reindex nodes"
sqlite3 .svn/wc.db "reindex pristine" 
```

如果在那之后仍然有错误，您仍然可以选择将存储库的新副本检出到临时文件夹并将 .svn 文件夹从新副本复制到旧副本。然后旧副本应该可以再次使用，您可以删除临时文件夹。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-06-18T17:06:18.230

## 完整性检查

```
sqlite3 .svn/wc.db "pragma integrity_check" 
```

## 清理

```
sqlite3 .svn/wc.db "reindex nodes"
sqlite3 .svn/wc.db "reindex pristine" 
```

## 或者

您可以将可以读取的数据库内容转储到备份文件中，然后将其重新放入新的数据库文件中：

```
sqlite3 .svn/wc.db

sqlite> .mode insert
sqlite> .output dump_all.sql
sqlite> .dump
sqlite> .exit

mv .svn/wc.db .svn/wc-corrupt.db
sqlite3 .svn/wc.db

sqlite> .read dump_all.sql
sqlite> .exit 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-05-30T18:52:40.917

SVN 清理不起作用。我本地系统上的 SVN 文件夹已损坏。所以我只是删除了文件夹，重新创建了一个新文件夹，然后从 SVN 更新。这解决了问题！

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-07-12T12:28:40.117

停电后，我遇到了*数据库磁盘映像格式*错误的错误，并且由于违反约束，建议的重新索引节点命令没有解决所有问题。此外， http: [//mail-archives.apache.org/mod_mbox/subversion-users/201111.mbox/%3C874nybhpxi.fsf@stat.home.lan%3E](http://mail-archives.apache.org/mod_mbox/subversion-users/201111.mbox/%3C874nybhpxi.fsf@stat.home.lan%3E)中描述的过程也没有解决问题。

在我的情况下的解决方案：

*   再次将 svn 存储库签出到临时文件夹中
*   复制（即替换）文件“.svn/wc.db”从新结帐到损坏的结帐

如果您的原始 svn checkout 包含许多已修改或未版本化的文件并且您不想切换到新的 svn checkout，这可能很有用。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-07-28T11:30:51.657

我从同行工作人员的目录中复制了 .svn 文件夹，这解决了这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-01-04T05:51:24.303

1.  在另一个地方查看这个 svn
2.  显示隐藏的 .svn 文件
3.  替换wc文件

这对我有用！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-02T07:03:16.913

也许，可能是一个解决方案：

1.  鼠标右键单击项目
2.  团队 -> 断开连接
3.  选择：同时删除...

现在，再次重新连接：

1.  鼠标右键单击项目
2.  团队 -> 分享项目
3.  选择你的`repositorie`：我的`SVN`（其他情况：git等）
4.  选择你的`repositorie`文件夹

**笔记：**

就我而言，我备份了我的文件。（安全的你回来：P）

**编辑：**

我说的是`SVN`插件`Eclipse`:)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-18T16:25:21.573

不要浪费您的时间`checking integrity`或从表中删除数据，`work queue`因为这些是临时解决方案，它会在一段时间后打击您。

只需再做一个`checkout`并将现有的 .svn 文件夹替换为新文件夹即可。做一个`update`，然后它应该很顺利。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-23T10:20:56.330

我解决了我的视觉 svn 服务器 rep-cache.db 损坏问题。

他们是两个解决方案。

停止 Visual SVN 服务器服务。

从 sqllite 网站下载 sqllite3.exe shell 并将其复制到 repo 的 db 文件夹中。

在 repo 的 db 文件夹中的命令提示符处键入以下命令。

-- 第一个解决方案 --

```
sqlite3 rep-cache.db

.clone rep-cache-new.db 
```

按 ctrl+c 退出 sqllite。

```
ren rep-cache.db rep-cache-old.db

ren re-cache-new.db rep-cache.db 
```

-- 第二个解决方案 --

删除 rep-cache.db

```
del rep-cache.db 
```

它将自动创建。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-09-16T08:39:30.977

如果你安装了 Tortoise SVN，请到任务管理器并停止它。然后尝试删除该文件夹。它会起作用的

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-12T21:28:39.310

在我的研究中，我发现了 2 个可行的解决方案。

1.  如果您使用任何类型的连接，ssh、samba、安装、断开/卸载和重新连接/重新安装。再试一次，这通常为我解决了问题。之后，您可以进行 svn cleanup 或继续正常工作（取决于问题出现的时间）。重新启动我的计算机也解决了一次问题......是的，我知道这很愚蠢！

2.  有时要做的就是 rm -rf 您的文件（或者如果您不熟悉该术语，只需删除您的 svn 文件夹），然后再次重新检查您的 svn 存储库。请注意，这并不总能解决问题，您可能还有不想丢失的更改。这就是为什么我使用它作为第二个选项。

希望这对你们有帮助！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-12-03T00:48:51.740

你在颠覆网站上看过[这篇文章吗？](http://subversion.tigris.org/ds/viewMessage.do?dsForumId=1065&dsMessageId=2415693)您还可以尝试按照[此处](http://techblog.dorogin.com/2011/05/sqliteexception-database-disk-image-is.html)所述直接验证和“修复”数据库。（请注意，我不是专家，我只是做了一个快速的谷歌搜索。可能与您的问题完全无关）。

就个人而言，我会尝试再次检查 repo 并重新应用您的更改。不确定在您的情况下这是否可行？

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-03-09T19:21:50.543

我通过删除隐藏的 .svn 文件夹，然后对该文件夹执行签出到相同的 URL 来修复它发生在我身上的一个实例。

这并没有覆盖我修改过的任何文件，只是对所有现有文件进行了版本控制，而不是从服务器获取新副本。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-10T14:17:01.523

根据颠覆清理，标记的答案可能是正确的答案。但是这个错误绝对是一个通用的错误，它把我带到了这个问题页面。

我们的项目有依赖 System.Data.SQLite 并且错误消息是相同的：

> 数据库磁盘映像格式错误

[就我而言，我已经通过SQLiteStudio 3.1.1](https://sqlitestudio.pl/)执行了以下检查脚本和以下内容。

```
pragma integrity_check 
```

（我不知道这些统计数据是否会有所帮助，但无论如何我都会分享它们......）

数据库文件通过内存上的连接日志模式在日常使用中使用了 1.5 年，大小约为 750 MB。每个表大约有 140K 记录，6 个表这么大。

执行**完整性检查**脚本后，执行时间 30 分钟后返回 11 行。

```
wrong # of entries in index sqlite_autoindex_MyTableName_1
wrong # of entries in index MyOtherTableAndOrIndexName_1
wrong # of entries in index sqlite_autoindex_MyOtherTableAndOrIndexName_2
etc... 
```

所有结果都与指标有关。跟进重新构建每个索引，我的问题得到了解决。

```
reindex sqlite_autoindex_MyTableName_1;
reindex MyOtherTableAndOrIndexName_1;
reindex sqlite_autoindex_MyOtherTableAndOrIndexName_2; 
```

重新索引后，完整性检查结果为“ok”。

去年我遇到了这个错误，我从备份中恢复了数据库，然后重新提交了所有更改，这真是一场噩梦......

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-11T05:42:34.840

检查您尝试签出数据的本地机器空间。在我的情况下，我的 c 驱动器没有空间来完成结帐，所以错误来了:)

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-09-10T05:25:55.473

无需担心目录锁定家伙。

只需要做的是，如果未安装 sqllite3，请键入以下命令，

```
>sudo apt-get install sqlite3 
```

通过键入此命令打开 SVN 数据库，

```
>sqlite3 .svn/wc.db 
```

现在你需要做的就是从 SVN DB 中删除锁条目。

> ```
> sqlite>  select * from wc_lock;
> 1|-1           
> sqlite>  delete from wc_lock;
> sqlite>  select * from wc_lock;
> sqlite>  .q 
> ```

过程完成。您可以在您的 SVN 存储库上工作，毫无问题地进行提交、更新、添加、删除操作。

:-)

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2017-08-18T14:30:48.697

在应用程序开发过程中，我发现消息来自频繁且大量的 INSERT 和 UPDATE 操作。确保在一次操作中插入和更新多行或数据。

```
var updateStatementString : String! = ""

for item in cardids {

let newstring = "UPDATE "+TABLE_NAME+" SET pendingImages = '\(pendingImage)\' WHERE cardId = '\(item)\';"
            updateStatementString.append(newstring)

        }

        print(updateStatementString)
        let results = dbManager.sharedInstance.update(updateStatementString: updateStatementString)

        return Int64(results) 
```

* * *

## 回答 #18

> 赞同：-4
> 
> 时间：2014-12-21T16:10:38.960

cd 到包含 .svn 的文件夹

```
rm -rf .svn
svn co http://mon.svn/mondepot/ . --force 
```

# actionscript-3 - setChildIndex 上的索引超出范围？

> ID：13675616
> 
> 赞同：0
> 
> 时间：2012-12-03T00:32:29.130
> 
> 标签：actionscript-3, indexoutofboundsexception

好的，所以我有以下代码...

```
function fire1(e:MouseEvent)
{
    firebb.addChild(fireb);
    fireb.x=firebb.x;
    fireb.y=firebb.y;
    fireb.parent.setChildIndex(fireb, numChildren-1);
    fireb.startDrag();
    pop.play();
} 
```

它应该做的是创建一个 firebb Movieclip 的子项并更改其深度（我使用了一个应该位于所有内容之上的自定义光标……但是当我的游戏到达这一点时，我得到了这个错误。

```
RangeError: Error #2006: The supplied index is out of bounds.
    at flash.display::DisplayObjectContainer/setChildIndex()
    at main_fla::MainTimeline/fire1() 
```

setChildIndex 在之前的帧中工作完美，现在出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:52:11.823

```
fireb.parent.addChild(firWb); 
```

或者

```
fireb.parent.numberChildren -1 
```

# node.js - 组织 expressjs 路线时遇到问题

> ID：13675619
> 
> 赞同：1
> 
> 时间：2012-12-03T00:32:49.463
> 
> 标签：node.js, routes, express

我正在关注这篇[文章](http://dailyjs.com/2012/01/26/effective-node-modules/)，它描述了一种在 express 中组织路线的好方法。但是，当我尝试访问从 main.js 文件中导出的函数时，我遇到了一个问题。curl "localhost/user/username" 时出现 404 错误

```
//the routes section of my my app.js file
app.get('/', routes.index);
app.get('/user/:username', routes.getUser);

//my index.js file
require('./main');
require('./users');

exports.index = function(req, res) {
    res.render('index', {title: 'Express'});
};

//my main.js file

exports.getUser = function(req, res){
        console.log('this is getUser');
        res.end();
}; 
```

----用我的解决方案编辑----

这是我使用的解决方案，也许有人会发现它有用。我也愿意听取有关这是否会在未来给我带来任何问题的建议。

```
//-------The routes in my app.js file now look like this.

require('./routes/index')(app);
require('./routes/main')(app);

//-------In index.js i now have this

module.exports = function(app) {
    app.get('/', function(req,res){
        res.render('index', {title: 'Express'});
    });
};

//-------My main.js now looks like this-------

module.exports = function(app){

    app.get('/user/:username', function(req, res){
            var crawlUser = require('../engine/crawlUser');
            var username = req.params.username;
            crawlUser(username);
            res.end();
    });

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:58:32.067

全局变量是邪恶的，应该不惜一切代价避免。这是我在没有全局变量和没有过多样板代码的情况下组织我的路线的方式。

```
// File Structure

/app.js
/routes
/--index.js
/--main.js
/--users.js

// app.js
var app = require('express');

/* Call Middleware here */

require('routes')(app);
app.listen(3000);

---------------------------------------------

// routes/index.js - This is where I store all my route definitions
// in a long list organized by comments. Allows you to only need to go to
// one place to edit route definitions. 

module.exports = function(app) {

  var main = require('./main');
  app.get('/', main.get);

  var users = require('./users');
  app.get('/users/:param', users.get);

  ...

}

---------------------------------------------

// routes/main.js - Then in each submodule you define each function and attach
// to exports

exports.get = function(req, res, next){
  // Do stuff here
}) 
```

我想这最终是一个偏好问题，但是如果您希望您的代码保持敏捷性并与其他模块一起使用，您应该避免使用全局变量。即使亚历克斯·杨说没关系。=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:37:20.083

这是我使用的解决方案，也许有人会发现它有用。

```
//-------The routes in my app.js file now look like this.

require('./routes/index')(app);
require('./routes/main')(app);

//-------In index.js i now have this

module.exports = function(app) {
    app.get('/', function(req,res){
        res.render('index', {title: 'Express'});
    });
};

//-------My main.js now looks like this-------

module.exports = function(app){

    app.get('/user/:username', function(req, res){
            var crawlUser = require('../engine/crawlUser');
            var username = req.params.username;
            crawlUser(username);
            res.end();
    });

}; 
```

# gcc - 在 LLVM 中未优化的内联 NOP

> ID：13675629
> 
> 赞同：5
> 
> 时间：2012-12-03T00:35:03.373
> 
> 标签：gcc, assembly, arm, llvm

我正在研究使用 GCC 编译内联 ARM 程序集的[概述中的一个示例。](http://www.ethernut.de/en/documents/arm-inline-asm.html)我使用的是 llvm-gcc 4.2.1 而不是 GCC，我正在编译以下 C 代码：

```
#include <stdio.h>
int main(void) {
    printf("Volatile NOP\n");
    asm volatile("mov r0, r0");
    printf("Non-volatile NOP\n");
    asm("mov r0, r0");
    return 0;
} 
```

使用以下命令：

```
llvm-gcc -emit-llvm -c -o compiled.bc input.c
llc -O3 -march=arm -o output.s compiled.bc 
```

我的 output.s ARM ASM 文件如下所示：

```
 .syntax unified
    .eabi_attribute 20, 1
    .eabi_attribute 21, 1
    .eabi_attribute 23, 3
    .eabi_attribute 24, 1
    .eabi_attribute 25, 1
    .file   "compiled.bc"
    .text
    .globl  main
    .align  2
    .type   main,%function
main:                                   @ @main
@ BB#0:                                 @ %entry
    str lr, [sp, #-4]!
    sub sp, sp, #16
    str r0, [sp, #12]
    ldr r0, .LCPI0_0
    str r1, [sp, #8]
    bl  puts
    @APP
    mov r0, r0
    @NO_APP
    ldr r0, .LCPI0_1
    bl  puts
    @APP
    mov r0, r0
    @NO_APP
    mov r0, #0
    str r0, [sp, #4]
    str r0, [sp]
    ldr r0, [sp, #4]
    add sp, sp, #16
    ldr lr, [sp], #4
    bx  lr
@ BB#1:
    .align  2
.LCPI0_0:
    .long   .L.str

    .align  2
.LCPI0_1:
    .long   .L.str1

.Ltmp0:
    .size   main, .Ltmp0-main

    .type   .L.str,%object          @ @.str
    .section    .rodata.str1.1,"aMS",%progbits,1
.L.str:
    .asciz   "Volatile NOP"
    .size   .L.str, 13

    .type   .L.str1,%object         @ @.str1
    .section    .rodata.str1.16,"aMS",%progbits,1
    .align  4
.L.str1:
    .asciz   "Non-volatile NOP"
    .size   .L.str1, 17 
```

这两个 NOP 位于它们各自的 @APP/@NO_APP 对之间。我的期望是，`asm()`由于 -O3 标志，没有 volatile 关键字的语句将被优化不存在，但显然两个内联汇编语句都存在。

为什么该`asm("mov r0, r0")`行没有被识别为 NOP 并被删除？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T01:55:02.623

正如[Mystical](https://stackoverflow.com/users/922184/mysticial)和[Mārtiņš Možeiko](https://stackoverflow.com/users/675078/mrtis-mozeiko)所描述的，编译器不会*优化*代码；即，更改说明。编译器*优化*的是指令的调度时间。当你使用`volatile`时，编译器不会*重新调度*。在您的示例中，*重新安排*将在`printf`.

编译器可能进行的另一个*优化*是让**C**值为您注册。*寄存器分配对优化*非常重要。这不会优化**assembler**，但允许编译器对函数内的其他代码做一些*明智的事情。*

要查看效果`volatile`，这里有一些示例代码，

```
int example(int test, int add)
{
  int v1=5, v2=0;
  int i=0;
  if(test) {
    asm volatile("add %0, %1, #7" : "=r" (v2) : "r" (v2));
    i+= add * v1;
    i+= v2;
  } else {
    asm ("add %0, %1, #7" : "=r" (v2) : "r" (v2));
    i+= add * v1;
    i+= v2;
  }
  return i;
} 
```

这两个分支具有相同的代码，除了`volatile`. `gcc`4.7.2 为 ARM926 生成以下代码，

```
example:
   cmp  r0, #0
   bne  1f           /* branch if test set? */
   add  r1, r1, r1, lsl #2
   add  r0, r0, #7   /* add seven delayed */
   add  r0, r0, r1
   bx   lr
1: mov  r0, #0       /* test set */
   add  r0, r0, #7   /* add seven immediate */
   add  r1, r1, r1, lsl #2
   add  r0, r0, r1
   bx   lr 
```

**注意：**汇编器分支与“C”代码相反。由于管道衬里，某些处理器上的第二个分支较慢。编译器更喜欢

```
 add  r1, r1, r1, lsl #2
   add  r0, r0, r1 
```

不要顺序执行。

Ethernut [ARM 教程](http://www.ethernut.de/en/documents/arm-inline-asm.html)是一个极好的资源。然而，*优化*是一个有点重载的词。编译器不分析汇编器，只分析参数和代码将在哪里**发出**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-18T10:24:50.393

`volatile`如果`asm`语句没有声明输出，则隐含。

# java - 旋转播放器以面对目标 java slick

> ID：13675631
> 
> 赞同：0
> 
> 时间：2012-12-03T00:36:04.527
> 
> 标签：java, rotation, trigonometry, slick2d

所以我目前正在努力学习 slick。在遇到问题之前我做得很好。我一直试图找到一个好小时的答案，但找不到。所以我决定把它贴在这里。

我的问题：我在 800 X 800 网格上有播放器。我试图让玩家直线移动到网格上的某个点。现在我可以让他在 X 上移动，然后转身在 Y 上移动，但我想让他尽快到达那里。所以我想我是否可以从以下点制作一个直角三角形（玩家位置、目标位置和 X、Y 截距，见下图）。

```
My code:
Adj = (int) (TargetX-x); // Get The size of the Adjacent leg.
Opp =   (int) (TargetY-y); // Get the size of the Opposite leg.
OppAdj = Opp/Adj;          //Inverse tan is Opposite/Adjacent
TargetAngle =  Math.abs(Math.atan(Opp/Adj)*100);  //Keep the angle positive, and use inverse tan to get the missing angle. 
```

现在我认为这样做会解决丢失的角度，这样我就可以将玩家旋转那个量，这样玩家就可以直线移动并击中目标。

最终的结果是给我一个 73 度的目标角度，而变量 OppAdj 最终为 1.0。

我的代码有什么问题？

任何帮助表示赞赏！

谢谢，凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:39:08.307

```
OppAdj = Opp/Adj; 
```

那就是问题所在。你应该做这个：

```
OppAdj = (double)(Opp)/Adj; 
```

这样，它将为您`double`提供准确性。顺便一提：

```
TargetAngle =  Math.abs(Math.atan(Opp/Adj)*100); 
```

应该：

```
TargetAngle =  Math.abs(Math.atan(OppAdj)*100); 
```

# php - PHP 形式：电子邮件副本给发件人

> ID：13675633
> 
> 赞同：0
> 
> 时间：2012-12-03T00:36:11.377
> 
> 标签：php, forms, contact

我有一个简单的表格。基本上尝试通过电子邮件复制共享认为这已经足够了。我想将这封电子邮件的副本发送到 $email 变量（是的，可能不需要带斜杠），有什么想法吗？通过谷歌看到一堆帖子，但无法弄清楚；

```
<?php
        $EmailFrom = "admin@test.com";
        $EmailTo  = "admin@test.com";
        $Subject = "Check out this video.";
        $email = !empty($_POST['email']) ? Trim(stripslashes($_POST['email'])) : false; 

        $Body = "Take a look at this; youtubelink...";

        $success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");
        header('Location: /#');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:49:20.917

只需添加另一个 mail(); 功能

```
<?php
        $EmailFrom = "admin@test.com";
        $EmailTo  = "admin@test.com";
        $Subject = "Check out this video.";
        $email = !empty($_POST['email']) ? Trim(stripslashes($_POST['email'])) : false; 

        $BodyReceiver = "Take a look at this; youtubelink...";
        $BodySender = "You sent the following message " . $BodyReceiver . " to " . $EmailTo . ".";

        $successReceiver = mail($EmailTo, $Subject, $BodyReceiver, "From: <$EmailFrom>");
        $successSender = mail($EmailFrom, $Subject, $BodySender, "From: <no-reply@text.com");
        header('Location: /#');
?> 
```

或类似的东西...

正如 bozdoz 建议的那样，您可能会使用密件抄送，但它将是原件的完整副本。您将无法更改发件人电子邮件或按摩（例如“您将以下按摩...发送到...”等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:50:39.997

只需像这样编辑您的脚本，副本将仅在原件将发送：

```
<?php
    $EmailFrom = "admin@test.com";
    $EmailTo  = "admin@test.com";
    $Subject = "Check out this video.";
    $email = !empty($_POST['email']) ? Trim(stripslashes($_POST['email'])) : false; 

    $Body = "Take a look at this; youtubelink...";

    $success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");

    if ($success)
        mail($EmailFrom, $Subject, $Body, "From: <$EmailFrom>");

    header('Location: /#');
?> 
```

# css - jsFiddler 用代码与 Visual Studio 显示一件事

> ID：13675634
> 
> 赞同：0
> 
> 时间：2012-12-03T00:36:15.830
> 
> 标签：css, html

我真的很难过。这种提琴手[测试样式](http://jsfiddle.net/tDD36/1/)（如下所示，因为堆栈溢出不会让我在不自己发布代码的情况下链接到提琴手）按照我在提琴手中寻找的方式工作。然而，在 Visual Web Developer 2010 Express 中使用完全相同的代码，主菜单部分是正确的，但播放器选择部分（下拉和 3 个按钮）没有灰色背景或一些微妙的居中格式。可能有什么区别？

即使我从 VS 启动不同的浏览器也会发生这种情况。谁能将 jsFiddler 代码插入 VS Web Developer 2010 Express 的网页中，看看他们是否看到播放器选择部分中的 BG 不是灰色的？

HTML：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="Scripts/LocalStorageDB.js"></script>
    <script type="text/javascript" src="Scripts/Main.js"></script>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>My Golf Score</title>
    <link rel="stylesheet" type="text/css" href="Style/normalize.css" />
    <link rel="stylesheet" type="text/css" href="Style/Main.css" />
</head>
<body>
    <div id="divMainMenu">
        <input id="btnNewRound" type="button" value="New Round" onclick="return btnNewRound_onclick()" />
        <input id="btnCurrentRound" type="button" value="Current Round" onclick="return btnCurrentRound_onclick()" />
        <input id="btnRoundHistory" type="button" value="Round History" onclick="return btnRoundHistory_onclick()" />
        <input id="btnReports" type="button" value="Reports" onclick="return btnReports_onclick()" />
    </div>
    <div id="divPlayerSelect">
        <div id="divPlayerSelectName">
            Player:
            <select id="lstPlayer">
                <option></option>
            </select>
        </div>
        <div id="divPlayerSelectButtons">
            <input id="btnNewPlayer" type="button" value="New Player" onclick="return btnNewPlayer_onclick()" />
            <input id="btnBackPlayer" type="button" value="Back" onclick="return btnBackPlayer_onclick()" />
            <input id="btnDonePlayer" type="button" value="Done" onclick="return btnDonePlayer_onclick()" />
        </div>
    </div>
</body>
</html> 
```

CSS：

```
html, body 
        {
            text-align: center;
            min-height: 100%;
            position: relative;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        td,th 
        {
         text-align: center;
        }
        #divMainMenu
        {
            margin: auto;
            height: 100%;
            width: 100%;
            display: block;
            background-color: Gray;
            border: 1px solid red
        }
        #divMainMenu input[type="button"]
        {
            display: block;
            width: 70%;
            margin: auto;
            height: 14%;
            margin-bottom: 2.5%;
            padding: 0;
            margin-top: 2.5%;
            font-size: 400%;
        }
        /* START: Player select window*/
        #divPlayerSelect
        {
            border: 10px solid blue;
            background-color: Gray;
            width: 100%;
            height: 100%;
            font-size: 150%;
        }
        #divPlayerSelectName
        {
            border: 1px solid yellow;
            width: 100%;
            font-size: 200%;
            padding-bottom: 5%;
        }
        #divPlayerSelectName select
        {
            width: 50%;
            height: 200%;
            font-size: 85%;
        }
        #divPlayerSelectButtons
        {
            border: 1px solid green;
            height: 100%;
            width: 100%;
        }
        #divPlayerSelectButtons input
        {
            width: 25%;
            height: 15%;
            font-size: 200%;
            margin: 5px;
        }​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:54:41.840

从那个小提琴中脱颖而出的两件事可能是您的项目中没有的：第一，DOCTYPE。您在页面上列出的 DOCTYPE 与小提琴上实际加载的 DOCTYPE 不同，后者是 HTML5 DOCTYPE `<!DOCTYPE html>`，因此请将您当前的 DOCTYPE 切换为那个。反正它好多了。其次是使用工作`normalize.css`表，它会重置页面上的元素，因此请确保您的项目中也包含该工作表。

**编辑**

另一个问题，您的脚本没有在`<head>`标签中加载。

# php - 使用 Jquery Uploader 将 ID 附加到上传的文件

> ID：13675635
> 
> 赞同：0
> 
> 时间：2012-12-03T00:36:26.400
> 
> 标签：php, jquery, uploader

我正在使用 Jquery Uploader [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)将文件上传到网站，它工作正常，但问题是它将所有图像放在同一个文件夹中，我没有想法是什么。我现在设置了以下几行（减去 POST $ID 部分），以便在每次上传时将文件名保存到数据库，上传表单上有一个名为 deviceID 的字段，我要做的是插入数据进入与设备ID对应的字段，但我不确定如何将表单字段数据放入UploadHander.php，因为我不知道jquery如何或是否将此数据提交给上传处理程序，或者我是否需要告诉它.

我不确定这样的东西是否适用于 jquery，因为我不确定它如何与 php 文件交互？

```
$ID = $_POST['equipmentID'];

function add_img($name, $ID)

{

$add_to_db = $this->query("INSERT INTO u5b0y_chronoforms_data_submitusedequipment WHERE equipmentID='$ID'     (photo) VALUES ('".$name."')") or die(mysql_error());

  return $add_to_db;

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:07:40.430

好吧，要知道哪个文件已上传到服务器，您需要在 jquery 上传器的 ajax 发布请求中添加字段，并在注册时在服务器端使用您想要的文件名，或者您可以通过文件的用户 ID 识别文件和您可以使用 $_session vars 来识别另一端的文件，因为脚本知道它应该接收什么图片类型并将其放入正确的文件夹中。

# ios - iOS App 中的汇编代码中的 EXC_BAD_ACCESS

> ID：13675637
> 
> 赞同：1
> 
> 时间：2012-12-03T00:36:48.833
> 
> 标签：ios, c, xcode, assembly, exc-bad-access

我正在尝试在我正在开发的 iOS 应用程序中调试 EXC_BAD_ACCESS 崩溃。基本上，我的代码调用了对应于某个汇编方法的函数 new_dyna_start()。这是相关的汇编代码：

```
.align  4
42430:
.long _translation_cache_iphone

.align  2
.globl  _new_dyna_start
//  .type   new_dyna_start, %function
_new_dyna_start:
ldr r12, .dlptr
mov r0, #0xa4000000
stmia   r12, {r4, r5, r6, r7, r8, r9, sl, fp, lr}
sub fp, r12, #28
add r0, r0, #0x40
bl  _new_recompile_block
ldr r0, [fp, #64]
ldr r10, [fp, #400+36] /* Count */
str r0, [fp, #72]
sub r10, r10, r0
ldr r0, 42430b
ldr pc, [r0] 
```

根据我的（有限）理解，在该方法的第 6 行，它调用了 C 函数 new_recompile_block()。这个方法工作得很好，我知道它完成了，因为在函数结束时我有

```
printf("End of loop"); 
```

然后出现在调试器中。方法完成后，我不完全确定我理解发生了什么，但似乎汇编方法获得了对 C 变量 translation_cache_iphone 的引用。然而，在最后一行应用程序奇怪地崩溃了。此消息出现在 Xcode 中：http: [//imgur.com/dqKo0](http://imgur.com/dqKo0)

但是，如果我单击最后一个调用方法的一侧，我看到它是这样的：http: [//imgur.com/M5h84](http://imgur.com/M5h84)

这似乎支持我的想法，它是导致崩溃的 translation_cache_iphone 变量，因为 EXC_BAD_ACCESS (0x401000) 的内存地址与 translation_cache_iphone 相同。translation_cache_iphone 被声明为：

```
unsigned char* translation_cache_iphone = NULL; 
```

并由以下方式初始化：

```
translation_cache_iphone = (unsigned char *)(((unsigned long) translation_cache_static_iphone + (4096)) & ~(4095)); 
```

我是否正确地假设这是问题所在？问题出在汇编代码中还是 C 代码中？我已经尝试修改两者，但无济于事。上面的汇编代码是原始的。

[这是](https://github.com/iSkythe/N64iOS)Github 上完整源代码的链接。只需使用 Xcode 在 iDevice 上编译和运行，您就会看到我面临的确切问题。这样调试可能更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:54:53.803

最后两条指令形成一个间接跳转，`translation_cache_iphone`因此预期是可执行代码。验证是这种情况以及内存权限是否合适——在许多系统中，数据页默认情况下是不可执行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:56:21.197

> 这似乎支持我的想法，即导致崩溃的是 translation_cache_iphone 变量

是的，我相信这个变量是问题所在。

在您发布的汇编代码中，我可以看到一行可能导致对内存的无效访问，它是：

```
ldr r0, 42430b
ldr pc, [r0] 
```

第一行将数据从标签 42430 加载到寄存器 r0。然后，第二行将 PC（程序计数器）指向 r0 的内容。

在汇编代码的开头，您已声明标签 42430 是什么：

```
42430:
  .long _translation_cache_iphone 
```

然后，当它尝试访问该值并以代码形式执行时，它会崩溃。

# facebook - Facebook FQL 查询 Event_member "Inviter" 和 "Inviter_type"

> ID：13675640
> 
> 赞同：7
> 
> 时间：2012-12-03T00:37:22.050
> 
> 标签：facebook, web-applications, facebook-fql, developer-tools

在[FQL event_member page 的描述中](https://developers.facebook.com/docs/reference/fql/event_member)，它表示该列`inviter`应告知我们在活动中邀请 UID 的用户或页面的 ID，并`inviter_type`应告知我们邀请者是用户还是页面。我在公共活动和我自己创建的活动上都尝试过这些功能，但总是失败。

> "inviter": null 和 "inviter_type": "" 对于每个用户。

这是一个错误，一个不再工作的旧功能，还是一个还不能工作的新功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T23:57:13.190

似乎**只**允许您知道谁邀请**您**以及如何邀请您。

使`inviter`和`inviter_type`属性有用的唯一命令是：

```
select eid, uid, inviter, inviter_type, rsvp_status 
from event_member where eid=EVENT_ID and uid=me() 
```

在这种情况下，您正在寻找邀请您参加您被邀请参加的活动的人！

结果：

```
{
  "data": [
    {
      "eid": 3811052099231, 
      "uid": 1022369839, 
      "inviter": 1406101549, 
      "inviter_type": "user", 
      "rsvp_status": "attending"
    }
  ]
} 
```

# android - 应用程序未在 Galaxy Tab 2 10.1 和 7.0 上显示

> ID：13675642
> 
> 赞同：3
> 
> 时间：2012-12-03T00:37:42.780
> 
> 标签：android, permissions, app-store

我刚刚发布了一个应用程序，但无法通过 Galaxy Tab 2 10.1 和 Tab 2 7.0 上的 Play Store 应用程序下载。但是当侧载时它工作正常。我怀疑权限导致了问题。这是权限列表，您能说出是哪一个导致了问题吗？我怀疑这是 android.permission.READ_PHONE_STATE 因为标签没有电话功能。那是问题吗？谢谢

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />

<!-- Mobclix Required Permissions -->
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<!-- Mobclix Optional Permissions -->
<uses-permission
    android:name="android.permission.ACCESS_FINE_LOCATION"
    android:required="false" />
<uses-permission
    android:name="android.permission.ACCESS_COARSE_LOCATION"
    android:required="false" /> 
```

编辑：这可能不是因为那个权限，因为我看到旧版本的 Galaxy 标签，摩托罗拉 Xoom 和华硕 Transformer 都支持。谢谢雷

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T01:36:43.717

Google Play 过滤通常是暗示硬件功能的权限的结果。

查看与权限相关的文档，[`<uses-feature>`](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)并将`android:required="false"`属性设置添加到任何不需要的功能。

很有可能是相机自动对焦功能导致了问题，但我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:19:11.800

这些元素是否存在于您的 Android 清单中？如果没有，添加这些有帮助吗？

[http://developer.android.com/guide/topics/manifest/compatible-screens-element.html](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)
[http://developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

# php - jQuery Dropdown Menu + PHP - 保持选择

> ID：13675644
> 
> 赞同：0
> 
> 时间：2012-12-03T00:38:02.013
> 
> 标签：php, jquery, forms, drop-down-menu, selected

我在 JS 方面不是很有经验（PHP 是我的强项），所以我需要你的帮助。

我有一个带有 2 个显示隐藏内容的下拉菜单的脚本。我正在使用此示例 [根据 jquery 中的选择下拉 ID 更改内容](https://stackoverflow.com/questions/6315215/change-content-based-on-select-dropdown-id-in-jquery)

当我执行 PHP 脚本时，它会检查错误，如果有错误，它会将用户返回到表单。这样做的问题是它不会显示隐藏的内容。我可以设置某种 PHP 变量并将它们放入 $selected_one = 'selected="selected"' 之类的输入中，下拉菜单将具有正确的选择，但 jQuery 函数不能这样工作。我认为它放置了某种显示和隐藏内容的类。

我不能完全确定发生了什么，所以我需要你的帮助。任何人都可以给我一个提示如何解决这个问题吗？

这是一些使事情可视化的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<style>
.list_publish, .list_news, option_value {
     display: none;   
}
</style>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<body>
<?php
$selected_news = '';
$selected_review = '';
$selected_news_text = '';
$selected_news_video = '';

if(isset($_POST['submit_news_text'])){

    $selected_news = 'selected="selected"';
    $selected_news_text = 'selected="selected"';

    $news_title = $_POST['news_title'];

    // Checks blank forms and return error
    if(empty($news_title)) {
        $error_message = 'This field must not be empty!';
        $proceed = false;
    } else {
        $proceed = true;
    }
}

if($proceed){
    // do stuff
    echo 'do stuff';
} else {
?>
<form method="post" action="<?php $_SERVER['PHP_SELF']; ?>" enctype="multipart/form-data">
    <select class="change_publish" name="publish_type" id="publish_type" style="width: 238px;">
      <option value="publish_type" data-title="choose">Publishing...</option>
      <option value="publish_news" data-title="news" <?php echo $selected_news ?>>Publish News</option>
      <option value="publish_review" data-title="review" <?php echo $selected_review ?>>Publish Review</option>
    </select>
    <div class="list_publish publish_type"> 
    </div>
    <div class="list_publish publish_news"> 
        <select class="change_news" name="news_type" id="news_type" style="width: 238px;">
          <option value="news_type" selected="selected" data-title="choose">News Type</option>
          <option value="news_text" data-title="text" <?php echo $selected_news_text; ?>>Text</option>
          <option value="news_video" data-title="video"<?php echo $selected_news_video; ?>>Video</option>
        </select>
        <div class="list_news news_type">
        </div>
        <div class="list_news news_text">
            <input name="news_title" type="text" id="news_title">
            <input name="submit_news_text" type="submit" value="Publish" id="submit_news_text" />
        </div>
        <div class="list_news news_video">
            > This function is not available at the moment.
        </div>
    </div>
    <div class="list_publish publish_review">
        > This function is not available at the moment.
    </div>
</form>
<?php
    echo $error_message;
}
?>
<script>
// дропдаун меню
$('.change_publish').change(function(){
    var selected = $(this).find(':selected');
    $('.optionvalue').fadeOut(function(){
         $('.optionvalue').html(selected.html()).fadeIn()
             .attr('class', 'optionvalue '+selected.val());   
    });
    var count = $('.list_publish').length;
    $('.list_publish').slideUp(function(){
        if(!--count) {
           $('.'+selected.val()).slideDown();
        }       
    });
});
$('.change_news').change(function(){
    var selected = $(this).find(':selected');
    $('.optionvalue').fadeOut(function(){
         $('.optionvalue').html(selected.html()).fadeIn()
             .attr('class', 'optionvalue '+selected.val());   
    });
    var count = $('.list_news').length;
    $('.list_news').slideUp(function(){
        if(!--count) {
           $('.'+selected.val()).slideDown();
        }       
    });
});
</script>
</body>
</html> 
```

这是一个演示[http://www.demirevdesign.com/public/form.php](http://www.demirevdesign.com/public/form.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:47:08.243

在文档加载时触发更改事件，如下所示：

```
<script>
// дропдаун меню
$('.change_publish').change(function(){
    var selected = $(this).find(':selected');
    $('.optionvalue').fadeOut(function(){
         $('.optionvalue').html(selected.html()).fadeIn()
             .attr('class', 'optionvalue '+selected.val());   
    });
    var count = $('.list_publish').length;
    $('.list_publish').slideUp(function(){
        if(!--count) {
           $('.'+selected.val()).slideDown();
        }       
    });
}).change(); // HERE THE CHANGE

$('.change_news').change(function(){
    var selected = $(this).find(':selected');
    $('.optionvalue').fadeOut(function(){
         $('.optionvalue').html(selected.html()).fadeIn()
             .attr('class', 'optionvalue '+selected.val());   
    });
    var count = $('.list_news').length;
    $('.list_news').slideUp(function(){
        if(!--count) {
           $('.'+selected.val()).slideDown();
        }       
    });
}).change(); // HERE THE CHANGE
</script> 
```

# javascript - 第一个和最后一个元素上 div 的鼠标指针位置中心

> ID：13675645
> 
> 赞同：0
> 
> 时间：2012-12-03T00:38:17.990
> 
> 标签：javascript, jquery

我遇到了这个 jquery 示例，它根据鼠标在 mouseenter 或 mousemove 上的位置向左或向右动画化 div。它使用一个名为 $.throttle 的 jquery 类，它会导致每毫秒执行一次代码。我想知道是否有人新如何将鼠标指针放在第一个和最后一个 div 元素或每个 div 元素上，使其正好位于每个元素的中心，这样您就不必在滚动时将鼠标指针放在边缘左侧或右侧的元素。基本上我希望它有一个不能超过的限制。当您将鼠标指针放在示例上时，您会看到我在说什么单击此处[jsFiddle](http://jsfiddle.net/petersendidit/RkbP6/1/)该示例是在 jquery 1.5 中完成的

HTML

```
<div id="wrapper">
<ul id="scroll-content">
    <li class="item"><img src="http://placehold.it/100x150/09f" /></li>
    <li class="item"><img src="http://placehold.it/100x150/2f2" /></li>
    <li class="item"><img src="http://placehold.it/100x150/234" /></li>
    <li class="item"><img src="http://placehold.it/100x150/342" /></li>
    <li class="item"><img src="http://placehold.it/100x150/312" /></li>
    <li class="item"><img src="http://placehold.it/100x150/131" /></li>
    <li class="item"><img src="http://placehold.it/100x150/111" /></li>
    <li class="item"><img src="http://placehold.it/100x150/222" /></li>
    <li class="item"><img src="http://placehold.it/100x150/333" /></li>
    <li class="item"><img src="http://placehold.it/100x150/122" /></li>
</ul> 
```

CSS：

```
#wrapper {
width: 100%;
height: 170px;
overflow: hidden;
background-color: red;
}
#scroll-content {
width: 1050px;
} 
```

jQuery：

```
$(document).ready(function() {
var wrapper = $('#wrapper'),
    content = $('#scroll-content');

wrapper.bind('mouseenter mousemove', $.throttle(200, mousemove));

function mousemove(e) {
    var wrapper_width = wrapper.outerWidth(),
        content_width = content.outerWidth();
    //calculate new left margin
    var tmp = e.pageX * (content_width - wrapper_width) / wrapper_width;

    content.stop().animate({
        'margin-left': '-' + tmp + 'px'
    }, 'fast', 'easeOutSine');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:21:58.307

我希望理解你：

JS 变化：

```
//exaggerate mouse-x
var exmousex = (e.pageX-100) * 1.3;

//calculate new left margin 
var tmp = exmousex * (content_width - wrapper_width) / wrapper_width;

//LIMITS
if (tmp < 0) tmp = 0;
if (tmp > content_width - wrapper_width -5 ) tmp = content_width - wrapper_width  -5;

content.stop().animate({'left': -tmp}, 'fast', 'easeOutSine'); 
```

CSS 更改：

```
#wrapper {
    position: absolute;
    top:0;
    left:0
}
#scroll-content {
    position: relative;
} 
```

试试：http: [//jsfiddle.net/karacas/RkbP6/181/](http://jsfiddle.net/karacas/RkbP6/181/)

# qt - Qt、QtQuick、QML 和 QtMobility 可以针对的移动操作系统

> ID：13675649
> 
> 赞同：3
> 
> 时间：2012-12-03T00:38:28.537
> 
> 标签：qt, mobile, sdk, qt-mobility, mobile-os

支持基于 QT 的应用程序开发的移动操作系统或平台的数量不断增长。并不是所有的 QT 都是构建应用程序的标准框架，因此 Qt 支持似乎可以分类如下：

1.  Qt 和基于 Qt 的技术（QML、QtQuick、QtMobility）是构建移动应用程序和 SDK 的一部分的推荐方式。
2.  支持 Qt 或 Qt 子集作为开发或移植应用程序的辅助方式，并且 SDK 中支持 QT API 子集。
3.  非官方的第 3 方或开源扩展支持为平台开发基于 Qt 的应用程序。

哪些移动操作系统或 SDK 支持以上述任一方式使用 Qt 开发应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T01:15:45.310

SDK 中完全支持 Qt 的移动操作系统：

*   诺基亚 Symbian 操作系统： http: [//www.developer.nokia.com/Develop/Qt/](http://www.developer.nokia.com/Develop/Qt/)。自从诺基亚停止使用 Symbian，Qt for Symbian[现在是一个社区努力](http://qt-project.org/wiki/Support-for-Symbian)。
*   诺基亚 N9 / MeeGo 1.2 Harmattan：完全支持 Qt。
*   [Mer](http://merproject.org/) (community Meego fork) 和[Sailfish OS](https://sailfishos.org) : Qt/QML 都支持。
*   Canonical 的[Ubuntu Phone](http://developer.ubuntu.com/get-started/gomobile/)使用[Ubuntu QML 工具包](http://developer.ubuntu.com/resources/programming-languages/qml/)和[Qt Creator](http://developer.ubuntu.com/get-started/qt-creator/)进行本地应用程序开发。

支持 QT API 子集的移动操作系统：

*   Blackberry 10 OS 和 SDK：Blackberry 10 SDK 包含[Cascades UI 框架](https://developer.blackberry.com/cascades/reference/qt_index.html)，该框架构建在 Qt 4.8 和 QtMobility 模块的子集之上。可以使用[Qt、QtMobility 和 QML/QtQuick](http://devblog.blackberry.com/2012/05/blackberry-10-cascades-available-now/)创建应用程序。另一种方法是移植使用 QtGui的现有[Qt 应用程序。](https://developer.blackberry.com/cascades/reference/qt_index.html)

Digia、社区驱动（开源）和针对移动操作系统的第 3 方扩展：

*   Android：Digia 的 QT 5 端口（在 2012 年 11 月柏林[Qt Developer Days上进行](https://blog.qt.digia.com/blog/2012/11/20/qt-gearing-up-for-the-future/)[了演示](http://www.youtube.com/watch?v=jRQTzrsNeVk)），预计将于 2013 年底发布。
*   iOS：Digia 的 QtQuick 1.0 端口（由[Qt Developer Days Berlin 于 2012 年 11 月进行](https://blog.qt.digia.com/blog/2012/11/20/qt-gearing-up-for-the-future/)[演示](http://www.youtube.com/watch?v=jRQTzrsNeVk)），预计将于 2013 年底发布。
*   WinRT / Windows 8: ([demoed](http://www.youtube.com/watch?v=jRQTzrsNeVk) by [Qt Developer Days Berlin in Nov 2012](https://blog.qt.digia.com/blog/2012/11/20/qt-gearing-up-for-the-future/)) demo.
*   Qt for Android port [Necessitas](http://necessitas.kde.org/): Has been [donated to the Qt project in Nov 2012](http://blog.qt.digia.com/blog/2012/11/08/necessitas-android-port-contributed-to-the-qt-project/).
*   Qt SDK for iOS devices by [Mediator Software](http://mediator-software.com/): The product website does not contain much information, but there are regular updates on [Twitter Qt4iOS](https://twitter.com/Qt4iOS) (links to apps in Appstore built using QT SDK for iOS are posted on Twitter).

# optimization - 在分支定界算法的早期确定无希望的分支

> ID：13675655
> 
> 赞同：2
> 
> 时间：2012-12-03T00:39:15.873
> 
> 标签：optimization, branching-and-merging, graph-traversal

我必须设计一个分支定界算法，每次都解决笛卡尔平面上图形的最优路径。我已经得到提示，在运行时早期识别无望的分支将复合成一个运行“快一百倍”的程序。我的想法是假设连接到开始/结束节点的最短边将是巡回赛中的第一条或最后一条边，但薄菱形图证明并非如此。有没有人对如何消除这些无望的分支或谈论这个的参考有想法？

基本上，有没有比仅按字典顺序更好地分支到解决方案子集的更好方法，例如。第一个分支包含和排除边缘 ab，第二个分支包含和排除分支 ac

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:48:44.767

最近邻是一种简单的算法。分支定界只是一个优化循环，此外您还需要一个子问题求解器。我认为最近邻也是一种分支定界算法。相反，我会研究单纯形算法。这是一种线性规划算法。也是解决tsp的切割平面算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:57:23.487

所以在你的分支定界算法的某个地方，你查看可能去的地方，然后以某种方式跟踪它们以便以后做。

为了提高效率，您可以做几件事：

1.  写一个更好的绑定计算器。换句话说，想出一个更准确地确定界限的算法。这将减少花在糟糕路径上的时间。
2.  与其使用堆栈来跟踪要做的事情，不如使用队列。不要使用队列，而是使用按边界排序的优先级队列（堆），例如，看起来最好的东西放在堆的顶部，看起来不好的东西放在底部。

# c# - 如何用图像字典填充窗口？

> ID：13675659
> 
> 赞同：0
> 
> 时间：2012-12-03T00:39:51.053
> 
> 标签：c#, winforms, image, dictionary

我有一个带有按钮的 GUI，它将打开一个新窗口。**窗口一打开，我就**需要用我存储在（字符串，位图）字典中的大量图片填充，字符串表示路径名。显然我需要遍历字典，但我不知道使用什么代码来显示图片。无论如何要制作一个循环，自动以设定的尺寸显示图像。

对于我正在寻找的输出的一个很好的例子，在浏览图片文件夹时考虑 Windows 资源管理器缩略图。

我对使用图像或 GUI 知之甚少，因此将不胜感激。

到目前为止，这是我拥有的代码：

```
MyPalletGui.Show();
        PictureBox myPicBox = new PictureBox();
        Dictionary<string,Bitmap> MyPallet = MyImageCollection.ToDictionary();
        int xcor = 0;
        int ycor = 0;
        foreach (Bitmap curtImage in MyPallet.Values){
            xcor += 50;
            ycor += 50;
            myPicBox.Location = new Point(xcor, ycor);
            myPicBox.Width = 50;
            myPicBox.Height = 50;
            myPicBox.Visible = true;
            myPicBox.Image = new Bitmap(curtImage);
            this.MyPalletGui.Controls.Add(myPicBox); 
```

我需要更多地使用 x 和 y 坐标，但上面的代码什么也没显示。

# jquery - 在执行一个动画时禁用 jQuery 中的动画

> ID：13675662
> 
> 赞同：0
> 
> 时间：2012-12-03T00:40:06.867
> 
> 标签：jquery, animation, jquery-animate

我在同一个元素或一组相似元素上应用了多个 jQuery 动画。为了确保同时没有冲突和多个动画，我想确保在动画 A 执行时，应用在同一元素上的其他动画也不应该执行。但是，一旦动画 A 执行完毕，同一元素上的所有其他动画都会再次启用。这适用于单个元素上的所有动画。

我怎样才能确保这一点？

# iphone - CLLocationManager 不调用 didEnterRegion 虽然注册了区域跟踪

> ID：13675670
> 
> 赞同：0
> 
> 时间：2012-12-03T00:43:24.127
> 
> 标签：iphone, ios, mapkit, cllocationmanager

我真的很犹豫是否要发布关于这个主题的第四个问题，但是根据之前的答案对所有内容进行了三次检查，仍然得到不好的结果。

问题：CLLocationManager 在 iOS6 中没有调用**didEnterRegion**。

设置：iOS6。

这是与 CLLocationManager 相关的所有功能的代码

**myMapViewController.h**

```
@interface FirstViewController : UIViewController <UIApplicationDelegate,CLLocationManagerDelegate, MKMapViewDelegate, UISearchBarDelegate,RKObjectLoaderDelegate >
{

    /* variables */

}
@property (strong, nonatomic) CLLocationManager *locationManager; 
```

**myMapViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

  /*  other initialization code */

    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];
    [locationManager setDistanceFilter: kCLLocationAccuracyBest];
    [locationManager setDesiredAccuracy: kCLLocationAccuracyBest];

}

- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects {
  /*  other application code */

     Step* step = [_steps lastObject];    
    CLRegion *tmpReg = [[CLRegion alloc] initCircularRegionWithCenter:step.start_location.coordinate radius:1000 identifier: [step.start_locationLat stringValue] ];
    [locationManager startMonitoringForRegion:tmpReg];
    NSLog(@"Setting region with latitude %f", tmpReg.center.latitude);

}

- (void)locationManager:(CLLocationManager *)manager didStartMonitoringForRegion:(CLRegion *)region{

        NSLog(@"Monitoring region with latitude %f", region.center.latitude);
}

- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region{ 
    NSLog(@"ENTERED REGION!");
    }       
}

- (void) locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region{
    NSLog(@"EXITED REGION!");

}

- (void)locationManager:(CLLocationManager *)manager monitoringDidFailForRegion:(CLRegion *)region withError:(NSError *)error
{
    NSLog(@"Region monitoring failed with error: %@", [error localizedDescription]);
} 
```

应用程序以零警告运行，这是日志：

```
2012-12-02 19:31:41.449 myApp[5695:c07] Setting region with latitude 37.785690
2012-12-02 19:31:41.506 myApp[5695:c07] Monitoring region with latitude 37.785690 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:42:30.573

你没有忘记把 [locationManager startUpdatingLocation]; ??

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:10:48.023

你进入这个地区了吗？您的问题实际上并不是说您正在将设备移入和移出您正在监视的区域，或者通过 Xcode 模拟该移动。

# java - 如何在Java中的包之间传递数据？

> ID：13675672
> 
> 赞同：2
> 
> 时间：2012-12-03T00:43:39.640
> 
> 标签：java, eclipse, class, package, windowbuilder

我正在使用 Eclipse 版本的 Juno。使用 WindowBuilder 创建一个 GUI，其中用户将在 JTextField 中输入一个数字，然后单击一个 JButton。我编写了一个 for 循环来确定用户输入的数字是否为质数。然后，GUI 窗口将显示“输入的数字是/不是素数”行的输出。我将在一个包中编写 GUI 的源代码，而带有 for 循环的类将在另一个包中。这两个包都驻留在同一个 Java 项目中。

我的问题是：如何将包含循环的公共类传递给包含 GUI 源代码的公共类（以便 GUI 可以吐出循环的结果）？除此之外，我在编写代码方面不需要任何帮助。谢谢

这是对第一个答案的回应：

```
package gui;

import java.awt.EventQueue;

import javax.swing.*;

public class GUI {

    private JFrame frame;
    private JTextField txtNumber;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    GUI window = new GUI();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public GUI() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 360, 286);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);

        txtNumber = new JTextField();
        txtNumber.setBounds(134, 13, 182, 22);
        frame.getContentPane().add(txtNumber);
        txtNumber.setColumns(10);

        JLabel lblPrompt = new JLabel("Enter a number");
        lblPrompt.setBounds(25, 16, 97, 16);
        frame.getContentPane().add(lblPrompt);

        JButton btnOK = new JButton("OK");
        btnOK.setBounds(208, 196, 97, 25);
        frame.getContentPane().add(btnOK);

    }
}

package guiDataProcessing;

public class GUIProcessPrime {
    //A loop that checks whether a number is or is not a prime number
    boolean IsOrIsnotPrime(int num) {
        for(int i=2;2*i<num;i++) {
            if(num%i==0)
                return false;
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:14:13.763

在面向对象的编程中，数据采用对象的形式。数据以对象的形式存在，在 JVM 的堆空间中具有一些实例变量值的状态。为了识别对象在内存中的地址，我们使用 java 中的引用变量。因此，在使用该对象的编程过程中，我们使用包含对该对象的引用的引用。假设，如果 A test=new A(); 然后测试指向堆空间中的一些内存，使用一些方法 M1...Mn 实例变量值 v1....vn 类 A 的对象。所以，如果你想在包之间传递数据，那么在其中创建对该对象的引用包级别。因此，如果对象具有像 somepackagename.Test.java 这样的包级别层次结构，则创建该 Test.java 的对象并使用参考测试进行操作。但是，该调用应该在默认、私有、

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:19:49.283

对于另一个包中存在的第二个类，您还必须导入第一个类以供使用。第一堂课将有：

```
package gui; 
```

另一个包中的第二个类将具有以下内容：

```
package gui.otherpackage;
import gui.GUI; //GUI being the name of your first class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T00:51:28.700

您不会在包之间传递数据，而是在对象之间传递数据。包结构与您所询问的内容几乎没有关系。通常，要在对象之间传递数据，一个对象必须具有对另一个对象的引用，并且接收数据的对象必须具有用于接收该数据的公共方法。

# php - PHP localhost 应用程序保护

> ID：13675676
> 
> 赞同：-1
> 
> 时间：2012-12-03T00:44:35.117
> 
> 标签：php, protection

我有连接到 TAX 服务的 POS 应用程序，我们将在 XAMPP 或 Nusphere 平台上分发它。

如何保护我的代码不被编辑或复制？我可以把它藏在 Xampp 之类的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:56:21.677

我正在使用 wamp 和 sqlite 做类似的事情（不同的行业，不是 POS）

我与（由我控制的）网络服务紧密集成，因此虽然人们可以编辑和复制应用程序，但他们仍然需要通过 API 登录才能使用某些功能。如果没有这些功能，该应用程序的使用将受到限制。

虽然这不会阻止人们编辑和复制，但他们仍然需要在我的网络服务上拥有一个帐户，这是我从中收取 $$$ 的地方。

# algorithm - 通过断开的线段的最短路径

> ID：13675678
> 
> 赞同：1
> 
> 时间：2012-12-03T00:44:38.767
> 
> 标签：algorithm, geometry, path-finding

我有一个非常常见的问题，但找不到解决它的名称或算法。

给定欧几里得二维空间中的一组线段，我喜欢找到通过所有线段的最短路径。

例如，绘图机会出现此问题，该绘图机使用笔在纸上绘图，并且必须最大限度地减少绘图对象之间无用的旅行时间。

这个问题的名称是什么？是否有已知的简单近似解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:45:38.327

最小化绘图笔的非绘图行程距离的问题非常接近于以线段端点为顶点并在绘制的线段的两端之间分配成本为 0 的[旅行商问题。](http://en.wikipedia.org/wiki/Travelling_salesman_problem)

与[TSP](http://en.wikipedia.org/wiki/Travelling_salesman_problem)不同，您的问题允许您开始和停止在线段中间绘制线条。[电源图标](http://aux.iconpedia.net/uploads/1432398654659946443.png)上的垂直线 是您想要在两段中绘制一条线的示例，而不是一次绘制一条线。但是，我猜这种情况只会在您开始绘制的位置与您停止绘制的位置不同时出现。如果我的猜测是正确的，那么您通过解决旅行商问题得到的解决方案与最优解决方案的差异最多只有图的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:49:06.530

您必须为此调整 tsp 的解决方案。

你可以通过遗传算法来做到这一点。它不能保证你会得到最好的解决方案，但你通常可以在很短的时间内非常接近它。

您基本上从一组随机解决方案开始。然后，您对每个解决方案进行轻微的随机更改，然后测量行进距离。您保留距离最短的那些。只需重复此过程，直到新一代不提供优化或您的时间用完为止。

# objective-c - 在 c 中更改矩阵的内容

> ID：13675682
> 
> 赞同：0
> 
> 时间：2012-12-03T00:45:38.397
> 
> 标签：objective-c, xcode, matrix

如何在 c 中仅更改矩阵的一部分（我实际上在 Objective-C 中，但在 c 中使用矩阵）。例如：

```
NSInteger tempMapMatrix[100][100] =
   {{0,0,1,1,2,2,1,1,0,2,4,4,4,0,0,1,2,2,1,0,0,0,0,0,0},
    {0,1,1,2,3,2,1,1,4,4,3,4,4,0,0,1,2,2,1,0,0,0,0,0,0},
    {1,1,2,3,3,2,1,4,1,3,3,4,4,0,0,1,2,2,1,0,0,0,0,0,0},
    {1,1,3,3,3,2,4,1,1,1,4,4,4,0,0,1,2,2,1,0,0,0,0,0,0},
    {0,1,1,2,2,2,4,4,4,4,4,4,4,0,0,1,1,1,1,0,0,0,4,4,0},
    {0,0,1,1,2,2,1,0,0,2,3,4,4,0,0,0,0,0,0,0,0,0,4,4,0},
    {4,4,1,1,2,2,1,1,0,1,1,0,4,0,0,0,0,0,0,0,0,0,4,4,4},
    {0,4,1,2,2,2,1,1,0,4,4,4,4,4,4,4,0,0,0,0,1,0,0,0,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,0,4,0,3,3,3,3,3,3,3,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,0,4,4,3,2,2,2,2,2,3,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,0,4,4,3,2,3,3,3,2,3,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,0,4,4,3,2,3,2,2,2,3,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,0,4,3,3,2,3,2,3,3,3,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,4,4,1,2,2,3,2,0,0,0,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,4,3,3,3,3,3,0,0,0,0,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,4,4,0,0,0,0,0,0,0,0,0,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,0,0,1,0,0,0,0,0,0,0,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,0,0,1,0,0,0,1,1,1,0,0},
    {0,1,2,2,2,2,1,1,0,1,2,4,4,0,0,1,0,0,0,0,0,1,1,0,0},
    {0,0,1,2,2,2,1,0,0,0,4,4,4,0,0,1,1,0,0,0,0,0,1,0,0}}; 
```

然后我想改变第一对整数（x和y）：

```
tempMapMatrix[100][100] =
   {{5,5,5,5,5,1,2,3},
    {5,5,5,5,5,1,2,3},
    {5,5,1,1,1,1,2,3},
    {5,5,1,5,5,1,2,3},
    {5,5,1,1,1,1,2,3},
    {5,5,5,5,5,5,5,5},
    {5,5,5,5,5,1,2,3},
    {5,2,2,2,5,1,2,3},
    {5,2,5,2,5,1,2,3},
    {5,2,2,2,5,1,2,3}}; 
```

但我收到一个错误（预期表达式）。我试过了

```
tempMapArray = stuff;
tempMapArray[][] = stuff; 
```

但没有一个工作。

有什么办法可以改变矩阵中的前几个整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:52:05.240

你需要遍历它们，这是 C，你没有语法糖来分配你想要的数组片段。例如，如果您想更改每行的每个第一个元素，您可以执行以下操作：

```
for (int = 0; i < 100; ++i) {
 tempMatrix[i][0] = 5;
} 
```

所以对于每一行的前几行你应该做

```
for (int = 0; i < 100; ++i) {
 tempMatrix[i][0] = 5;
 tempMatrix[i][1] = 5;
} 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:54:27.700

您必须单独访问和更改矩阵中的每个元素。

IE：

```
tempMapMatrix[0][0] = 5;
tempMapMatrix[0][1] = //... 
```

没有办法在 C 中“批量更改”数组（一维或 n 维）的内容。

实现这个效果最简单的方法是写一个for循环，遍历二维数组的内容，在需要的地方插入需要的值。

# windows-phone-8 - 如何在 Windows Phone 8 中更改 TTS 速率

> ID：13675685
> 
> 赞同：0
> 
> 时间：2012-12-03T00:46:28.480
> 
> 标签：windows-phone-8

如何更改 Windows Phone 8 中的语速？我想做这样的事情：

```
SpeechSynthesizer synth = new SpeechSynthesizer();
synth.Rate = -2; 
```

但是，没有像 .NET 4.5 中那样的`Rate`属性。`SpeechSynthesizer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:25:36.570

正如您所注意到的，当在字符串上使用文本到语音时，WP8 上的 TTS 类不支持更改音高、速度、强调、中断或任何其他与发音相关的属性。

如果您想在您的应用程序中对语音进行细粒度控制，您应该使用带有 SSML 的 TTS 而不是纯字符串。在此处查看 WP8 TTS SSML 示例（本节中的第三个示例）@ [http://www.developer.nokia.com/Community/Wiki/What's_new_in_Windows_Phone_8#Speech:_Text-to-Speech](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8#Speech%3a_Text-to-Speech)

[这里](http://www.cepstral.com/support/faq/customization/ssml.html)有一些方便的 SSML 简单示例。这些示例之一可能是您正在寻找的。用元素包装`<speak/>`命令的`"<prosody rate='+0.3'>speaking 30% faster.</prosody>"`内容可能是您需要的。

# c# - 为什么“等待”必须在“异步”方法中？

> ID：13675686
> 
> 赞同：10
> 
> 时间：2012-12-03T00:46:45.503
> 
> 标签：c#, async-await

> **可能重复：**
> [为什么存在 async 关键字](https://stackoverflow.com/questions/9225748/why-does-the-async-keyword-exist)

我有两种方法。一种是普通方法（`MyMethod`），一种是异步方法（`MyMethodAsync`）。我得到一个编译错误。

```
static string MyMethod()
{
    var result = await MyMethodAsync(); // compile error here
    return result;
}

async static Task<string> MyMethodAsync()
{
    /** perform my logic here... **/
    Thread.Sleep(1000);

    return "yes";
} 
```

错误信息是

> 'await' 运算符只能在异步方法中使用。考虑使用“异步”修饰符标记此方法并将其返回类型更改为“任务”。

我很困惑。当我使用`await`关键字时，调用线程将被挂起并等待任务完成。所以一旦`await`被使用，该方法就不再是异步方法了。正确的？

备注：我知道我应该把逻辑`MyMethod`和`MyMethodAsync`调用`MyMethod`来实现我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:45:18.833

关键字的全部意义`async`在于启用`await`关键字。

我收集了一些“为什么关键字会这样工作？” [我的博客上的](http://blog.stephencleary.com/2011/09/async-ctp-why-do-keywords-work-that-way.html)问题。“为什么不能通过存在`async`来推断`await`？”的问题 [Eric Lippert 在他的博客上给出了结论性的](http://blogs.msdn.com/b/ericlippert/archive/2010/11/11/whither-async.aspx)回答。简而言之，有两个原因：向后兼容性和代码可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:55:15.443

有关 async 和 await 如何在内部工作的大量见解，请查看 Jon Skeet 的 EduAsync 博客系列：[msmvps.com/blogs/jon_skeet/archive/tags/Eduasync/default.aspx](http://msmvps.com/blogs/jon_skeet/archive/tags/Eduasync/default.aspx)

这篇 MSDN 文章也解释了它：http: [//msdn.microsoft.com/en-us/library/vstudio/hh156513.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh156513.aspx)

基本上：被 async 关键字修改的方法至少包含一个 await 表达式或语句。该方法同步运行，直到它到达第一个等待表达式，此时它被挂起，直到等待的任务完成。同时，控制权返回给方法的调用者。如果该方法不包含等待表达式或语句，则它会同步执行。

最后，这篇 MSDN 文章： http: [//msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)逐步介绍了一个示例，大约在页面下方的 1/3 处：

# python - 将 Python 脚本作为引导脚本运行时结束？

> ID：13675689
> 
> 赞同：2
> 
> 时间：2012-12-03T00:47:34.600
> 
> 标签：python, debian, boot

我正在使用 Debian，并且我有一个我想在 rc.local 期间运行的 python 脚本，以便它可以在启动时运行。我已经让它与一个旨在运行和终止的测试文件一起工作。

问题是这个文件最终应该使用调度程序无限期地运行。它的工作是进行串行读取，对这些读取进行少量处理，然后插入 MySQL 数据库。但是，如果需要进行更改，我会担心无法取消脚本以进入我的登录提示，因为我无法使用 Ctrl+C (^C) 提前终止测试脚本。

我希望有一些我只是缺少的命令可以完成此任务。我是否缺少另一个可以终止 python 脚本并结束 rc.local 的关键命令？

谢谢。

编辑：另一个可能对我有帮助的解决方案是，是否有办法在启动期间在后台启动 python 脚本。所以它会启动脚本，然后允许登录，同时继续在后台运行脚本。

我开始认为这是不可能完成的事情，因此其他建议来完成与我正在尝试做的事情类似的事情也会有所帮助。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:48:13.217

似乎这只是我的一个愚蠢的错误。

我意识到这样做的重点是允许 python 脚本在引导期间作为后台进程运行，所以我在脚本调用的末尾添加了“&”，就像从 shell 和 viola 运行它时一样，我可以到达按“Enter”提示我的密码。

我想把这个答案放在这里，以防万一这会是一件非常错误的事情，但它完成了我正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:22:47.463

[使用 Debian 在启动时运行脚本](http://www.debian-administration.org/article/Making_scripts_run_at_boot_time_with_Debian)

1.  把你的脚本放在`/etc/init.d/`. 因此，如果您的脚本位于名为 的文件中`my_script`，则它应该位于`/etc/init.d/my_script`.

2.  `update-rc.d my_script defaults`以 root 身份运行。

3.  不要忘记使您的脚本可执行并包含 shebang。这意味着脚本的第一行应该是`#!/usr/bin/python`.

# sql - 同表字段之间的兼容性

> ID：13675690
> 
> 赞同：2
> 
> 时间：2012-12-03T00:48:15.920
> 
> 标签：sql, sql-server

我有商店类型。某些商店类型与其他商店类型不兼容（例如，您不能在食品附近出售汽车零件）。

这是我的表架构：

```
create table TShopCompatibility
(
idshoptype1 int NOT NULL,
idshoptype2 int NOT NULL,
constraint pkSHOPCOMP primary key(idshoptype1,idshoptype2),
constraint fkSHOPCOMP1 foreign key(idshoptype1) references TShopType(idshoptype),
constraint fkSHOPCOMP2 foreign key(idshoptype2) references TShopType(idshoptype),
constraint cSHOPCOMP12 check(idshoptype1>idshoptype2)
) 
```

我有这些值：

```
2 - 1
3  - 1
5  - 1
5  - 2
10  - 9
12  - 11
13  - 10 
```

如何在哪里 id - shoptypes。如何获得与 idshoptype = 2 兼容的商店？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:25:18.577

您需要选择`2`idshoptype1 或 idshoptype2 中存在的商店类型，即

```
SELECT idshoptype1 FROM TShopCompatibility WHERE idshoptype2 = 2
UNION
SELECT idshoptype2 FROM TShopCompatibility WHERE idshoptype1 = 2 
```

然后您可以将此查询的结果与商店表连接以获取商店信息。

# ruby-on-rails-3 - Rails - 自定义列中的模型关系

> ID：13675699
> 
> 赞同：0
> 
> 时间：2012-12-03T00:49:12.460
> 
> 标签：ruby-on-rails-3, model, relationship

有2个模型的例子如下：

模型 1

```
column 1 --- column 2 --- column 3 
id       --- fb_id    --- someOtherThing 
```

模型 2

```
column 1 --- column 2 --- column 3 
id       --- fb_id    --- someOtherThing 
```

例如，fb_id 是大整数的 Facebook ID。

如何构建从第一个模型的第 2 列到第二个模型的第 2 列的关系（例如 belongs_to）？

目前我做了这样的事情：

```
model 1:
belongs_to :model2, :foreign_key => 'fb_id' 
```

但是如何从模型 1（第 2 列）中预先选择必须与第二个模型的列匹配的列？（我认为以这种方式它从模型 1 中获取第 1 列）。

**综合：** 如何创建关系（`belongs_to`或`has_many`）`model1(:fb_id) => model2(:fb_id)`

而**不是** `model1(:id) => model2(:fb_id)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:23:08.747

如果我理解正确，您需要的是检索具有有效关联的记录，对吗？

您可以使用以下方法执行此操作：

```
Model1.joins(:model2 => :fb_id) 
```

这将仅检索具有有效关联的 Model1'！

# java - 灰熊服务器、客户端 javascript 上的 Jersey RESTful Web 服务

> ID：13675700
> 
> 赞同：2
> 
> 时间：2012-12-03T00:49:16.720
> 
> 标签：java, web-services, jersey, grizzly

我是 web 服务编程的新手，我想使用 netbeans 6 创建一个宁静的 web 服务，在 Grizzly 服务器上使用 Jersey，然后是客户端 javascript，以便通过浏览器使用这个 web 服务。所以我开始学习更多关于 RESTful Web 服务的知识，并阅读了很多关于网络的指南，然后我开始通过阅读球衣用户指南[http://jersey.java.net/nonav/documentation/latest/了解更多关于 grizzly 和球衣的知识。索引.html](http://jersey.java.net/nonav/documentation/latest/index.html). 我成功地按照教程创建了 helloword 示例资源。所以我创建了工作所需的所有资源并使用浏览器成功测试......但我仍然感到困惑：特别是我想知道如何创建一个静态主页，用户可以使用它来选择什么是想要的资源。你能给我一些教程或例子吗？谢谢大家！

（此外，我想了解有关 grizzly 服务器和创建 jersey restful web 服务的更多信息，有人可以给我有用的指南或书籍吗？？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:21:13.233

所以，理解 RESTful Web 服务的关键是更透彻地理解 HTTP 协议。这就是它比 SOAP 所代表的 RPC 样式服务更容易（并且通常更可取）的原因。例如，当您下拉一个静态网页时，您可以将其视为仅服务于 GET 请求的有限“网络服务”。为了制作一个“选择资源”的静态网页，您只需要提供相关资源的 URL，只要它们是通过 GET 访问的，因为这与用于检索网页的 HTTP 方法相同（以及因此是 Web 浏览器的默认方法）。如果要访问其他类型的资源，比如发送 POST 请求，可以使用表单；除此之外（使用 PUT、DELETE、HEAD、OPTIONS 等）你

这个领域有很多好书，我发现这些特别有用：

*   [*RESTful Web 服务*](https://rads.stackoverflow.com/amzn/click/com/0596529260)
*   [*RESTful Web 服务手册*](https://rads.stackoverflow.com/amzn/click/com/0596801688)
*   [*带有 Jax-RS 的 RESTful Java*](https://rads.stackoverflow.com/amzn/click/com/0596158041)
*   [*带 REST 的 SOA*](https://rads.stackoverflow.com/amzn/click/com/0137012519)

前两种在理论和实践上接近 REST；他们更多的是关于概念而不是具体的技术。[第三个解决了JSR 311](http://jcp.org/en/jsr/detail?id=311)中定义的 RESTful 服务的 Java 标准，其中 Jersey 是参考实现。最后一本更像是一本“企业”书籍，但它对我来说是有用的，它从设计Web 服务*系统*的方法来看，而不是一次性服务资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:35:37.717

关于 Grizzly，您可以查看 Grizzly 用户指南，特别是[Http Server 框架](http://grizzly.java.net/nonav/docs/docbkx2.2/html/http-server-framework.html)章节。如果您有更多问题，请随时在 Grizzly[邮件列表](http://grizzly.java.net/communicate.html)中提问。

# java - 基本的 XML 解析问题。无法通过 Java XmlStreamReader 方法找到节点名称。有任何想法吗？

> ID：13675702
> 
> 赞同：1
> 
> 时间：2012-12-03T00:49:53.583
> 
> 标签：java, xml, xml-parsing, apex-code

无法解析一些基本的 XML。我在[Apex 语言](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_intro_what_is_apex.htm)中执行此操作，但它在语法上几乎与 Java 相同，在本例中使用[java.xml.stream.XMLStreamReader](http://download.oracle.com/javase/6/docs/api/javax/xml/stream/XMLStreamReader.html)作为其 XML 解析引擎。

问题是：我没有找到任何实际的 XML 节点名称。XmlStreamReader 类中的 getLocalName() 方法在我循环遍历所有节点时始终为所有节点返回 null。

[代码在这里](https://gist.github.com/4191809)

此时非常基本的功能。如果你运行它，你会看到 reader.getLocalName() 总是返回 null，所有附带的方法（getNameSpace()、getLocation()、getPrefix()）也是如此。

任何想法为什么？我坚持以它所在的格式到达的 XML ......所以我必须按原样解析它。我可以使用各种变通方法（正则表达式、计数节点等），但这些方法很混乱且不理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:36:17.380

我已将您的代码重组成一个块，可以在工作台的匿名执行窗口中进行测试。我运行代码，然后过滤执行日志以显示 USER_DEBUG 语句。输出显示了您所期望的节点名称和文本。我认为关键是使用 APEX 方法 hasText() 和 hasName()。

```
 String XML_STR = '<document>' + '<result>success</result>' +'<resultcode>000000</resultcode>' +
'<note></note>' + '<item>' +'<quantity>1</quantity>' +
'<fname>Bob</fname>' +'<lname>Tungsten</lname>' +
'<address>23232 Fleet Street</address>' +'<city>Santa Clara</city>' +
'<state>CA</state>' +'<zip>94105</zip>' +
'<country>United States</country>' +'<email>blahblahblah@blahblahblah.com</email>' +
'<phone>4155555555</phone>' +'</item>' +'</document>';

XmlStreamReader reader = new XmlStreamReader(XML_STR);

while (reader.hasNext()) {
System.debug('$$$ reader.getEventType(): ' + reader.getEventType());
if (reader.hasName()) {
    System.debug('$$$ reader.getLocalName(): ' + reader.getLocalName());
//  System.debug('$$$ reader.getNamespace(): ' + reader.getNamespace());
//  System.debug('$$$ reader.getprefix(): ' + reader.getprefix());  
}
if (reader.hasText()) {
    System.debug('$$$ reader.getText(): ' + reader.getText());
}
System.debug('$$$ Go to next');
reader.next();
} 
```

这是另一个基于 Jon Mountjoy 配方的解决方案 [http://developer.force.com/cookbook/recipe/parsing-xml-using-the-apex-dom-parser](http://developer.force.com/cookbook/recipe/parsing-xml-using-the-apex-dom-parser)

```
private String walkThrough(DOM.XMLNode node) {
  String result = '\n';
  if (node.getNodeType() == DOM.XMLNodeType.COMMENT) {
    return 'Comment (' +  node.getText() + ')';
  }
  if (node.getNodeType() == DOM.XMLNodeType.TEXT) {
    return 'Text (' + node.getText() + ')';
  }
  if (node.getNodeType() == DOM.XMLNodeType.ELEMENT) {
    result += 'Element: ' + node.getName();
    if (node.getText().trim() != '') {
      result += ', text=' + node.getText().trim();
    }
    if (node.getAttributeCount() > 0) { 
      for (Integer i = 0; i< node.getAttributeCount(); i++ ) {
        result += ', attribute #' + i + ':' + node.getAttributeKeyAt(i) + '=' + node.getAttributeValue(node.getAttributeKeyAt(i), node.getAttributeKeyNsAt(i));
      }  
    }
    for (Dom.XMLNode child: node.getChildElements()) {
      result += walkThrough(child);
    }
    return result;
  }
  return '';  //should never reach here 
}

private String parse(String toParse) {
  DOM.Document doc = new DOM.Document();      
  try {
    doc.load(toParse);    
    DOM.XMLNode root = doc.getRootElement();
    return walkThrough(root);

  } catch (System.XMLException e) {  // invalid XML
    return e.getMessage();
  }
}

String XML_STR = '<document>' + '<result>success</result>' +'<resultcode>000000</resultcode>' +
'<note></note>' + '<item>' +'<quantity>1</quantity>' +
'<fname>Bob</fname>' +'<lname>Tungsten</lname>' +
'<address>23232 Fleet Street</address>' +'<city>Santa Clara</city>' +
'<state>CA</state>' +'<zip>94105</zip>' +
'<country>United States</country>' +'<email>blahblahblah@blahblahblah.com</email>' +
'<phone>4155555555</phone>' +'</item>' +'</document>';
System.debug(parse(XML_STR)); 
```

# email - sSMTP 重写电子邮件中的“发件人”字段

> ID：13675703
> 
> 赞同：3
> 
> 时间：2012-12-03T00:50:03.983
> 
> 标签：email, sendmail, ssmtp

我的问题是，每当我的服务器发送电子邮件时，发件人字段都会被覆盖。

`From:`应该：`Web Site Name <admin@mywebsite.com>`

但是电子邮件会发送到以下地址：

`World Wide Web Owner <www@mywebsite.com>`

或者在 SSH 从根目录发送电子邮件时：

`Charlie & <root@mywebsite.com>`

我的`/etc/ssmtp/ssmtp.conf`配置文件内容：

```
root=postmaster@mywebsite.com
mailhub=ssl0.ovh.net:465

rewriteDomain=mywebsite.com
hostname=mywebsite.com
realname = "Web Site Name"

AuthUser=postmaster%mywebsite.com
AuthPass=removed
UseTLS=YES 
```

如何指示 ssmtp 不要更改`From:`电子邮件中的字段？或者只是定义`From:`任何地方？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T01:10:40.720

尝试添加`FromLineOverride=YES`你的*ssmtp.conf*，如果你不设置这个，发件人地址将被覆盖，因为默认值应该设置为“NO”。

*   YES：允许用户指定自己的From：地址
*   NO: 使用系统生成 From: 地址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-01T08:23:51.807

如果您在使用 SSMTP 时遇到问题，请尝试使用 MSMTP（为我工作）

```
cat email.txt | msmtp --account=sender@mail.com --from=sender@mail.com -t adres@mail.com 
```

# java - 设计：确保响应的呈现与响应的清晰分离

> ID：13675708
> 
> 赞同：0
> 
> 时间：2012-12-03T00:51:00.650
> 
> 标签：java, rest, design-patterns, servlets

这是一个设计/模式问题。我有一项服务现在也需要作为 RESTful Web 服务公开。

在现有代码中，我有一个请求的概念，一套可能的服务操作（策略），任何服务操作的返回都是一个响应对象。这种方法将服务的内部工作与表示媒体（自定义 TCP 服务器、HTTP REST、HTTP SOAP 等）分离。

我现在开始实现一个看起来像这样的 MyServiceRESTfulServlet：

```
public void doGet(HttpRequest httpRequest, HttpResponse httpResponse) throws ServletException, IOException {
    try {
        /* Wrap an http servlet request with an adapter which hides all
         * the messy details of an HttpRequest and exposes a nice interface
         * for working with MyService
         */
        IRequest serviceRequest = new MyServiceRESTfulRequest(httpRequest);

        /* There's nothing HTTP related in this part, it's the exact same
         * code you'd find in other presentation formats. A Response has
         * no idea about HTTP, TCP Servers or the like.
         */
        Response serviceResponse = dispatchRequest(serviceRequest);

        /* A static helper which knows the interface of a Response
         * and can translate that into REST-speak for feeding back via
         * an HttpServletResponse.
         */
        renderRESTfulResponse(serviceResponse, httpResponse);
    } catch (Exception e) {
        throw new ServletExcetion(e);   // Caught by a seperate
                                        // RESTfulErrorServlet
                                        // configured in web.xml
                                        // Rendering an appropriate
                                        // response.
    }
} 
```

我的问题是响应可以是目前两种之一：

```
public enum ResponseKind() {
    BINARY, METADATA;
} 
```

对于二进制文件，我的 restful 响应助手将以一种方式呈现，对于元数据，它需要适当地呈现元数据——一个 HTML 表、一个 JSON blob 等。

弄清楚什么类型很容易 - 一个 Response 对象公开一个 getOriginalRequest() ，经过适当的检查后可以转换为一个 MyServiceRESTfulRequest ，它公开一个 .getAcceptablePresentation() - 一个枚举：

```
public enum RESTPresentationKind() {
    HTML, JSON, XML, PROTOBUF_MYSERV_0.1;
} 
```

我怎样才能最好地保持这个渲染代码与 Response 对象分离。毫无疑问，将来可能会有其他类型的反应。照原样，renderRESTfulResponse() 遍历 Request 对象并适当地构建写出数据。它与 Response 接口（我可以接受）非常紧密地耦合，但它也知道要遍历 Request 对象。

我只是不觉得我已经以干净和可维护的方式完成了这一点，因为我拥有这项服务的其余部分。我是每种可能的响应类型和每种可能的响应格式的“特殊外壳”。感觉超级hacky。

给定一个与表示无关的 Request 对象，你能建议任何方法来干净地处理呈现 RESTful 响应吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:41:21.260

为什么不在您的 RepsonseKind 枚举上实现渲染（枚举实际上是类）或完全放弃 ity？当您发现自己试图摆脱 case/switch 语句时，答案通常是组合 + 重载 + 命令模式或访问者模式。

# ti-basic - 在 TI-BASIC 程序中以非评估形式重新评估或存储布尔值

> ID：13675709
> 
> 赞同：2
> 
> 时间：2012-12-03T00:51:11.777
> 
> 标签：ti-basic

我将某个变量的布尔表达式传递给`I`操作的 TI-BASIC 程序`I`，但布尔表达式只计算一次 - 在程序执行开始时。

这是一个示例程序：

```
Prompt J
0 -> I

Lbl 1
1 + I -> I
Disp I

If J
Then
Goto 2

Else
Goto 1
End

Lbl 2
End 
```

（这不是我正在编写的实际程序，它更复杂，因此不能使用 for 循环；上面的程序显然可以用 for 循环更优雅地编写。）

我们`I`从数字 0 开始递增 1。每次递增后，我们检查是否`J`为真，如果是，则停止。

如果我通过`J=I≠5`，程序在打印后停止`1`。

如果我传入`J=I=5`，则不会出现预期结果。**我打算让程序在为真时停止`I=5`，但程序会无限期地继续。**这意味着`J`仅在程序开始时评估。

是否可以**在该循环的每次执行中****重新评估`J`**？

* * *

我假设它`J`被替换为`0`and `1`，一旦它被传入。为了改写我的问题，是否可以将布尔表达式输入/保留为未评估的字符串/文字？然后我会在程序中调用类似的东西`eval(J)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-02T16:30:59.173

您更新中的假设是正确的；J 被一个数值代替。

你改写的问题的答案是肯定的，你可以传递一个表达式，但你必须使用一个函数变量而不是一个真正的变量：

```
Prompt Y1 
```

每当`Y1`被调用时，它都会重新计算，所以如果你存储`I=5`到`Y1`，那么`Y1`当 I≠5 时返回 0，当 I=5 时返回 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T22:39:14.250

我不知道你为什么在这里使用 Lbl/Goto 循环；我建议如果 For 循环对您不起作用，请尝试改用 While 或 Repeat 循环。它们更整洁、更快。

除此之外，

你递增`I`1 并`J≠0`每次检查。`I`并且`J`是完全不同的变量，除非你让它们相互作用，否则它们不会相互作用。如果您的初始输入是`J=0`，那么程序将永远运行。

> 我打算让程序在 I=5 为真时停止，但程序会无限期地继续。

但是代码中没有检查 if 的内容`I=5`。`If I=5`如果你想让这种情况发生，你应该在某个地方放一个。

> 是否可以在该循环的每次执行中重新评估 J ？

是的，但您需要手动告诉计算器这样做。

> 我假设 J 在传入后立即被 0 和 1 替换。

不是这种情况。相反，`If J`您的代码中的 将输出 FALSE if`J=0`和 TRUE 的任何其他值`J`。

此外，您不需要`End`在程序结束时使用；在 TI-BASIC 中，该`End`命令指示代码块的结束，例如`If:Then`条件和//`For`循环。`While``Repeat`

我建议你在这里阅读：http: [//tibasicdev.wikidot.com](http://tibasicdev.wikidot.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T18:23:59.727

```
DelVar IPrompt J 
```

是的，我的意思是不要在那里换行。你不需要一个。相信我。

```
While not(J
I+1->I
Disp I
End 
```

这是您的程序，已优化。你的问题是 J 在你原来的提示之后永远不会改变，所以循环会永远循环下去。是的，您可以在每次迭代中重新评估 J，但如果您希望您的程序正常工作，您确实需要实际执行它。

# c++ - 重新定义“函数名”？

> ID：13675712
> 
> 赞同：-2
> 
> 时间：2012-12-03T00:51:44.350
> 
> 标签：c++

我正在尝试制作一个发生在医院的小游戏。这是代码：

首先是标题：

```
#ifndef Hospital_Patient_h
#define Hospital_Patient_h

class Patient
{
public:
    Patient();
    bool cured();
    bool died();
    bool treatable();
    void treat();
    void untreated();
    char consonant();
    char vowel();
    std::string getName();

    int age;
    int health;
    std::string name;

    bool operator==(const Patient &other)const;

};
#endif 
```

这是cpp：

```
#include <iostream>
#include <string>
#include "Patient.h"
using namespace std;

char CONSONANTS[] = 
{'b','c','d','f','g','h','j','k','l','m','n','p','r','s','t','v','z', '\0'};
char VOWELS[] = 
{'a','e','i','o','u', '\0'};
//generates a patient with initial health, a name, and an age from 10-79
Patient::Patient()
{
    int a= rand() % 80 + 10;
    health= 50;
    name= getName();
    age= a;
}

bool Patient::cured() {
    return health >= 100;
}

bool Patient::died() {
    return health <= 0;
}
//treatable if not dead and not cured
bool Patient::treatable() {  
    return !died() && !cured();
}

void Patient::treat() {
    if(treatable()) health= min(health + 10, 100);
}

void Patient::untreated() {
    if(treatable()) health= max(health - 1, 0);
}   

char Patient::consonant() 
{
    int index = rand() % 17; //CONSONANTS.size();
    return CONSONANTS[index];//rand.nextInt(CONSONANTS.length)];
}

char Patient::vowel() 
{
    int index = rand() % 5; //VOWELS.size();
    return VOWELS[index];//rand.nextInt(VOWELS.length)];
}

//generate a random name
string Patient::getName(){
    string s;
    s+=toupper(consonant());
    s+= vowel();
    s+=consonant();
    s+=vowel();
    if (rand() % 3 == 0) {
        s+=consonant();
    }
    if (rand() % 3 == 0) {
        s+=consonant();
        s+=vowel();
    }
    s+=(' ');
    s+=toupper(consonant());
    s+=vowel();
    if (rand() % 3 == 0) {
        s+=consonant();
    }
    s+=consonant();
    s+=vowel();
    if (rand() % 3 == 0) {
        s+=consonant();
    }
    if (rand() % 3 == 0) {
        s+=consonant();
        s+=vowel();
    }
    return s;
}
//overload ==
bool Patient::operator==(const Patient &other)const{
    //compare each room's room number field
    return (this->age == other.age && this->name == other.name);
} 
```

到目前为止，在每个函数之后，我都收到一个错误，说“函数名称”的重新定义

我也遇到了构造函数和为标题中定义的变量赋值的问题。由于某种原因，标头也不喜欢 std:: ，我知道我永远不应该在标头中使用命名空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:07:17.830

只是一种预感，您已经包含`Patient.cpp`而不是包含`Patient.h`在您的一个文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:02:38.133

尝试添加`#include <string>`到 Patient.h 的最顶部。当我这样做时，它为我编译。

# linq - 使用 3 个表获取分组数据的 LINQ 查询

> ID：13675713
> 
> 赞同：0
> 
> 时间：2012-12-03T00:51:53.210
> 
> 标签：linq, dataset

因此，我正在尝试获取城市列表以及每个城市中最畅销产品的名称。有 3 张桌子，我似乎无法将它们正确分组并计数。

这是我到目前为止所拥有的：

```
var result9 = (from p in shop.Tb_Purchases
               join c in shop.Tb_PreferredCustomer on p.Cust_ID equals c.Cust_ID
               join ap in shop.Tb_AvailableProduct on p.Prod_ID equals ap.Prod_ID
               group ap by new { c.City, ap.Name } into g
               select new { City = g.Key.City, Name = g.Key.Name, NumOf = g.Count() }).ToList(); 
```

这给了我在每个城市销售的每种产品以及销售了多少，但是我只需要一个城市和其中销售最多的一种产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:24:09.493

一种解决方案是仅按城市分组，然后在子查询中查找每个城市的最佳产品。

```
var result9 = (from p in shop.Tb_Purchases
               join c in shop.Tb_PreferredCustomer on p.Cust_ID equals c.Cust_ID
               join ap in shop.Tb_AvailableProduct on p.Prod_ID equals ap.Prod_ID
               group ap by c.City into g
               let largestProductGroup = g.GroupBy(x => x.Name)
                                          .OrderByDescending(x => x.Count())
                                          .First()
               select new
                      {
                         City = g.Key.City,
                         Name = largestProductGroup.Key.Name,
                         NumOf = largestProductGroup.Count()
                      }).ToList(); 
```

# html - 球拍：我如何在 HTML 页面中打印 mysql 结果

> ID：13675716
> 
> 赞同：1
> 
> 时间：2012-12-03T00:52:04.540
> 
> 标签：html, mysql, racket

我正在尝试在 APPLICATION.rkt 中生成的 HTML 页面上打印数据库中的值

但这就是我在执行下面的代码时看到的

```
&createstring;&db-conn;SELECT * from students 
```

这是我要执行的操作：

```
#lang 球拍
（需要分贝）
（需要网络服务器/servlet）
（提供/合同（开始（请求？->。响应？）））

（定义 db-conn
      （虚拟连接
         (lambda () (mysql-connect #:server "localhost"
                 #:端口 8889
                 #:数据库“SOB”
                 #:用户“根”
                 #:密码“root”））））

（定义（开始请求）
  （定义（创建字符串 id 名称 sid）
    (string-append "id 是 "id "and name 是 "name" and sid 是 "sid))
  （响应/xexpr
   '(html
     （头（标题“SOB”））
     （身体
      ,@(map (h1) (map createstring (in-query db-conn "SELECT * from students"))))
     )))

（需要 web-server/servlet-env）
（服务/servlet 启动
               #:启动浏览器？＃F
               ＃：退出？＃F
               #:listen-ip #f
               #:端口 8080
               #:额外文件路径
               （列表（构建路径“/Users/lalith/Documents/LALITH FILES/MDX/SOB/”“htmlfiles”））
               #:servlet 路径
               “/servlets/APPLICATION.rkt”）

```

关于我在做什么 wrnog 有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T01:49:10.233

有几个问题。

首先，使用`quasiquote`（或“反引号”）代替`quote`; 否则你不能用`,@`(ie, `unquote-splicing`) 来逃避它。换句话说，改变

```
'(html ___) 
```

至

```
`(html ___) 
```

然后，在`,@`逃生中，您`map`的 s 是错误的，并且无论如何`map`都无法使用。`in-query`你可能想要这样的东西：

```
,@(for/list ([(id name sid)
              (in-query db-conn "SELECT id, name, sid from students")])
    `(h1 ,(createstring id name sid))) 
```

或类似的东西。（如果您想要的话，上面的代码将为表中的每一行创建一个级别 1 的标题。）

* * *

*编辑回应评论：*它看起来像是`id`数据库中的一个数字列。如果您有最新版本的 Racket，我建议使用`~a`，它类似于`string-append`但会先自动将非字符串值转换为字符串。将定义更改为`createstring`：

```
(define (createstring id name sid)
  (~a "id is " id "and name is " name "and sid is "  sid)) 
```

在旧版本的 Racket（之前`~a`）中，`format`请改用（请参阅文档了解如何）。

# c++ - 将二进制文本读入数组？

> ID：13675719
> 
> 赞同：1
> 
> 时间：2012-12-03T00:52:21.900
> 
> 标签：c++, binaryfiles

我有一个程序需要读取二进制文本。我通过重定向读取二进制文本：

readData 将是我的 Makefile 生成的可执行文件。

示例：readData < binaryText.txt

我想要做的是读取二进制文本，并将二进制文本文件中的每个字符作为字符存储在 char 数组中。二进制文本由 32 组成这是我这样做的尝试......

```
unsigned char * buffer;
char d;
cin.seekg(0, ios::end);
int length = cin.tellg();
cin.seekg(0, ios::beg);
buffer = new unsigned char [length];
while(cin.get(d))
{
  cin.read((char*)&buffer, length);
  cout << buffer[(int)d] << endl;
} 
```

但是，我一直在这方面遇到分段错误。可能有人对如何将二进制文本读入 char 数组有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:07:10.300

最简单的应该是这样的：

```
std::istringstream iss;
iss << std::cin.rdbuf();

// now use iss.str() 
```

或者，全部在一行中：

```
std::string data(static_cast<std::istringstream&>(std::istringstream() << std::cin.rdbuf()).str()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:58:11.490

我更像是 C 程序员而不是 C++，但我认为你应该开始你的 while 循环

```
while(cin.get(&d)){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:10:14.450

像这样的东西应该可以解决问题。您从参数中检索文件名，然后一次性读取整个文件。

```
const char *filename = argv[0];
vector<char> buffer;

// open the stream
std::ifstream is(filename);

// determine the file length
is.seekg(0, ios_base::end);
std::size_t size = is.tellg();
is.seekg(0, std::ios_base::beg);

// make sure we have enough memory space
buffer.reserve(size);
buffer.resize(size, 0);

// load the data
is.read((char *) &buffer[0], size);

// close the file
is.close(); 
```

然后，您只需要遍历`vector`要读取的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-11T05:40:38.233

出现分段错误的原因是您试图使用字符值访问数组变量。

问题：

```
buffer[(int)d] //d is a ASCII character value, and if the value exceeds the array's range, there comes the segfault. 
```

如果你想要的是一个字符数组，你已经从 cin.read()

解决方案：

```
cin.read(reinterpret_cast<char*>(buffer), length); 
```

如果要打印，只需使用 printf

```
printf("%s", buffer); 
```

我使用 reinterpret_cast 是因为它认为转换为有符号字符指针是安全的，因为使用的大多数字符的范围是 0 ~ 127。你应该知道从 128 到 255 的字符值会被错误地转换。

# sql - PostgreSQL和hstore为了做两个键值存储

> ID：13675720
> 
> 赞同：0
> 
> 时间：2012-12-03T00:53:18.283
> 
> 标签：sql, postgresql, hstore

我想创建两个键值存储。一个有一个 url 的键和一个 url 的值，另一个有一个 url（这是其他表的值）和一个分数（整数）。

我试图阅读[hstore 文档](http://www.postgresql.org/docs/current/static/hstore.html)，但我真的找不到如何创建表。

我想将网址表示为字符串。我正在将一个 url 映射到它的“父 url”。分数的概念应该更像一个索引，索引越高，网站越好（根据与其他页面的连接性和访问时间的概念计算）。基本上一些示例数据可能如下所示：

```
key url:    https://maps.google.com/maps?hl=en&tab=wl
parent url: https://www.google.com/

parent url: https://www.google.com/
score: 100

key url: http://www.cracked.com/blog/5-things-you-should-know-before-making-indie-movie/
parent url: http://www.cracked.com/

parent url: http://www.cracked.com/
score: 125 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T03:48:58.807

我看不出你有什么理由想在`hstore`这里使用。

您可以使用一对简单的表格对此进行建模。这是您的数据的简单翻译：

```
CREATE TABLE url_scores(
    parent_url text primary key,
    score integer not null
);

CREATE TABLE url_mappings(
    key_url text not null,
    parent_url text not null references url_scores(parent_url)
);

INSERT INTO url_scores(parent_url, score) VALUES ('https://www.google.com/', 100);
INSERT INTO url_scores(parent_url, score) VALUES ('http://www.cracked.com/', 125);

INSERT INTO url_mappings(key_url, parent_url)
VALUES ('https://maps.google.com/maps?hl=en&tab=wl', 'https://www.google.com/');

INSERT INTO url_mappings(key_url, parent_url)
VALUES ('http://www.cracked.com/blog/5-things-you-should-know-before-making-indie-movie/
', 'http://www.cracked.com/'); 
```

...但是，您可能希望对其进行更多规范化，将 http/https 和域分成几部分，可能使用代理键`url_scores`而不是存储`parent_url`两次，等等。

顺便说一句，关系数据库完全有可能不是您数据的正确存储。很难说不知道你在用它做什么。

无论如何，请阅读 PostgreSQL 教程和一些关于数据库设计的一般信息。

# macos - 具有多个域的 OS X 软件包

> ID：13675724
> 
> 赞同：2
> 
> 时间：2012-12-03T00:54:04.943
> 
> 标签：macos, installation, packagemaker

我希望创建一个 mpkg，将安装目标定位到用户主目录和系统卷（例如，〜/Library/ 和 /Library/ 中的插件）。

我似乎只能做一个或另一个（不能同时做两个）。我也发现几乎没有关于这个主题的文档。安装域似乎被掩盖了。

任何人都可以阐明这一点吗？我一直在尝试在 PackageMaker.app 和 Packages.app 中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:01:46.687

您可能需要一个自定义的 postflight 脚本来处理用户特定的插件。我建议使用[makefile](https://github.com/unixorn/luggage)来滚动您自己的 pkg。

# mingw - 使用 mingw 与浮点数进行 Unit64 乘法

> ID：13675729
> 
> 赞同：2
> 
> 时间：2012-12-03T00:55:40.720
> 
> 标签：mingw, calculator

在执行 unit64 变量与浮点数的乘法时，我观察到 mingw 的奇怪行为。这是编译器的问题吗？

下面是我的代码：

```
#include <iostream>
using namespace std;

int main() {

    uint64_t myvar = 4293057;
    float mycrasher = 1000;
    myvar = myvar*mycrasher;
    cout << "value after mul is "<<myvar << endl; 
    return 0;
} 
```

显示的输出值是 4293057024 而不是 4293057000！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:00:43.987

IEEE754 单精度值（例如您的`float`）只有大约七位十进制精度。除此之外，它是不精确的。您甚至不必将其乘以 1000，将其乘以 10 即可得到`42930568`.

您可以看到以下代码发生了什么：

```
#include <iostream>
int main () {
    float xyzzy = 42930570;
    std::cout.precision (5);
    std::cout << "xyzzy is " << std::fixed <<xyzzy << '\n';
    return 0;
} 
```

输出不那么精确的：

```
42930568.00000 
```

* * *

为了更全面地解释，IEEE754 浮点值的精度受到限制，仅仅是因为它们具有有限数量的可用于该目的的位。单精度值的长度为 32 位，其中 23 位用于小数（其他位用于符号和指数）。这 23 位相当于大约 7 个十进制数字。[你可以在这里](https://stackoverflow.com/questions/3448777/how-to-represent-0-1-in-floating-point-arithmetic-and-decimal/3448855#3448855)找到进一步的分析。

数字 42930570 无法以单个精度值精确表示。您要么得到 is 的位模式`0x4c23c462`，要么得到`42930568`下一个更高`0x4c23c463`的`42930572`.

* * *

他们被转换为`float`而不是的`uint64_t`原因是因为这就是标准所说的。在 C++03 中，“乘法运算符”部分 (5.6) 说：

> 通常的算术转换是在操作数上执行的，并确定结果的类型。

通常的算术转换在第 5 节第 9 段中有详细说明，包括：

*   如果任一操作数是 long double 类型，则另一个应转换为 long double。
*   否则，如果任一操作数为双精度，则另一个应转换为双精度。
*   否则，如果任一操作数为浮点数，则另一个应转换为浮点数。
*   更多处理整数类型的东西（实际上并没有*这么*说，我在解释）。

由于您有 a`float`和 a `uint64_t`，因此上面的第三个要点涵盖了这一点。在“浮点-积分转换”部分（4.9）中，我们看到：

> 整数类型或枚举类型的右值可以转换为浮点类型的右值。如果可能，结果是准确的。否则，它是下一个较低或较高可表示值的实现定义选择。

因此*，这就是*为什么您会看到精度下降的原因。

这在 C++11 中没有改变。措辞发生了变化，并且更加冗长，但这些部分仍然归结为相同的结果。

# regex - VBA：子匹配正则表达式

> ID：13675735
> 
> 赞同：3
> 
> 时间：2012-12-03T00:56:27.603
> 
> 标签：regex, vba

我有以下代码：

```
Dim results(1) As String
Dim RE As Object, REMatches As Object
Set RE = CreateObject("vbscript.regexp")

With RE
    .MultiLine = False
    .Global = True
    .IgnoreCase = True
    .Pattern = "(.*?)(\[(.*)\])?"
End With

Set REMatches = RE.Execute(str)

results(0) = REMatches(0).submatches(0)
results(1) = REMatches(0).submatches(2) 
```

基本上，如果我传入一个字符串“Test”，我希望它返回一个数组，其中第一个元素是 Test，第二个元素是空白。

如果我传入一个字符串“Test [bar]”，第一个元素应该是“Test”，第二个元素应该是“bar”。

我似乎找不到我的正则表达式的任何问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:01:13.107

您需要将字符串锚点的开头和结尾添加到您的正则表达式中：

```
...
.Pattern = "^(.*?)(\[(.*)\])?$"
... 
```

如果没有这些锚点，`.*?`则将始终匹配零个字符，并且由于您的组是可选的，因此它永远不会尝试回溯和匹配更多字符。

# ant - Ant exec 的行为与使用 S3Sync 的命令行不同

> ID：13675737
> 
> 赞同：1
> 
> 时间：2012-12-03T00:56:36.163
> 
> 标签：ant, amazon-s3

我想创建一些 ant 目标来将各种文件上传和下载到 Amazon S3。我一直在命令行中成功使用[S3Sync](http://sprightlysoft.com/S3Sync/)，所以我想我只需将它包装在 Ant exec 中

```
<exec executable="tools/s3sync/S3Sync.exe" failonerror="true" /> 
```

所有配置都在 S3Sync 使用的配置文件中。我想添加一些 args 并在某个时候包含在一个宏定义中，但我在这个例子中保持简单。

不幸的是，exe 似乎不喜欢从 Ant 运行。

```
 [exec]
 [exec] Unhandled Exception: System.IO.IOException: The handle is invalid.
 [exec]
 [exec]    at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
 [exec]    at System.Console.GetBufferInfo(Boolean throwOnNoConsole, Boolean& succeeded)
 [exec]    at System.Console.get_WindowWidth()
 [exec]    at S3Sync.Program.ClearProgressLines()
 [exec]    at S3Sync.Program.WriteConsoleLineClear(String InputLine)
 [exec]    at S3Sync.Program.WriteToLog(String LogLine, Int32 LogLineLevel)
 [exec]    at S3Sync.Program.Main(String[] args) 
```

我尝试设置 dir、spawn、vmlauncher 和其他 exec 属性，但无济于事。

对我接下来可以尝试的事情有什么想法吗？

蚂蚁 1.8.4，Windows 7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:32:53.147

似乎 S3Sync 正在尝试清除进度线，但由于无法访问控制台而失败。有道理，因为在 Ant 下运行时实际上并没有控制台——至少没有可以执行*所有*I/O 命令的控制台。

您是否尝试添加`-ShowTransferProgress false`参数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:31:58.793

这是我的宏定义，供其他任何会发现它们有用的人使用。我的密钥和其他设置在我的 s3Sync.exe.config 中设置

```
<macrodef name="s3upload">
    <attribute name="bucket"/>
    <attribute name="logOnly" default="${s3upload.log.only}"/>
    <attribute name="localFolder"/>
    <sequential>
        <exec executable="${s3sync.exe}" failonerror="true">
            <arg line="-SyncDirection upload"/>
            <arg line="-LogOnlyMode @{logOnly}"/>
            <arg line="-BucketName @{bucket}"/>
            <arg line="-LocalFolderPath @{localFolder}"/>
            <arg line="-ShowTransferProgress false"/>
            <arg line="-UploadHeaders x-amz-acl:public-read"/>
        </exec>
    </sequential>
</macrodef>

<macrodef name="s3download">
    <attribute name="bucket"/>
    <attribute name="logOnly" default="false"/>
    <attribute name="localFolder"/>
    <sequential>
        <exec executable="${s3sync.exe}" failonerror="true">
            <arg line="-SyncDirection download"/>
            <arg line="-LogOnlyMode @{logOnly}"/>
            <arg line="-BucketName @{bucket}"/>
            <arg line="-LocalFolderPath @{localFolder}"/>
            <arg line="-ShowTransferProgress false"/>
        </exec>
    </sequential>
</macrodef> 
```

他们习惯这样

```
<s3download bucket="${s3.logs.bucket}" localFolder="${local.logs.path}" /> 
```

# python - pygame：使用 sprite.RenderPlain 绘制精灵组的顺序

> ID：13675741
> 
> 赞同：4
> 
> 时间：2012-12-03T00:57:54.177
> 
> 标签：python, python-2.7, sprite, pygame

我有一个精灵组，需要按一定的顺序绘制，这样它的精灵就会重叠。

然而，即使使用运算符模块函数 (sorted(self.sprites, key=attrgetter('y','x')) 对组进行排序，顺序也是错误的。

我该如何解决这种行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T01:14:52.343

坦率地说，[你不能](http://www.pygame.org/docs/ref/sprite.html#Group.draw)：

> 该组不以任何顺序保存精灵，因此绘制顺序是任意的。

改用[OrderedUpdates 组](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.OrderedUpdates)：

> 此类派生自`pygame.sprite.RenderUpdates`- 跟踪脏更新的组类。它维护 Sprite 添加到 Group 以进行渲染的顺序。这使得从组中添加和删除 Sprite 比常规组慢一些。

或者，您可以在不同的组中保留不同的精灵“层”，保持组的顺序*正确*。

# java - 使用 Hibernate 构建服务层

> ID：13675742
> 
> 赞同：1
> 
> 时间：2012-12-03T00:58:00.220
> 
> 标签：java, spring, hibernate, service, struts2

我正在使用 Struts2、Hibernate 和 Spring 开发一个中等规模的应用程序来管理 sessionFactory 的生命周期。我的问题是我应该创建一个大型服务类来为我的整个应用程序提供所有服务吗？还是应该为每个模型创建一个服务类？

假设我有一个大型服务类

```
@Transactional
public class Services {
    // So Spring can inject the session factory
    SessionFactory sessionFactory;
    public void setSessionFactory(SessionFactory value) {
        sessionFactory = value;
    }

    // Shortcut for sessionFactory.getCurrentSession()
    public Session sess() {
        return sessionFactory.getCurrentSession();
    }

    public Event getEventById(long id) {
        return (Event) sess().load(Event.class, id);
    }

    public Person getPersonById(long id) {
        return (Person) sess().load(Person.class, id);
    }

    public void deleteEventById(long id) {
        sess().delete(getEventById(id));
    }

    public void deletePersonById(long id) {
        sess().delete(getPersonById(id));
    }

    public void createEvent(String name) {
        Event theEvent = new Event();
        theEvent.setName(name);
        sess().save(theEvent);
    }

    public void createPerson(String name) {
        Person p = new Person();
        p.setName(name);
        sess().save(p);
    }

    @SuppressWarnings("unchecked")
    public List<Event> getEvents() {
        return sess().createQuery("from Event").list();
    }

    @SuppressWarnings("unchecked")
    public List<Person> getPeople() {
        return sess().createQuery("from Person").list();
    }

    public void removePersonFromEvent(int personId, int eventId) {
        getEventById(eventId).getPeople().remove(getPersonById(personId));
    }

    public void addPersonToEvent(int personId, int eventId) {
        getEventById(eventId).getPeople().add(getPersonById(personId));
    }

      .....Some more services methods here
} 
```

最好的方法是什么？整个应用程序的一个大服务类？或每个型号的不同服务等级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:56:39.040

[Martin Fowler 关于企业模式的书](http://www.informit.com/store/patterns-of-enterprise-application-architecture-9780321127426?w_ptgrevartcl=Framework%20Design%20Guidelines%3a%20Domain%20Logic%20Patterns_1398617)有一些关于构建服务层的很好的指导。在[本书的摘录中，](http://www.informit.com/articles/article.aspx?p=1398617&seqNum=4)您可以找到以下内容：

> 对于一个足够小的应用程序，可能只有一个抽象，以应用程序本身命名就足够了。根据我的经验，较大的应用程序被划分为几个“子系统”，每个子系统都包括一个完整的垂直切片，贯穿整个架构层的堆栈。

因此，服务层模式中没有成文法则。在我看来，您不是小型应用程序的情况（您的`Services`类有太多方法），所以一切都归结为识别应用程序上的子系统。这本书还推荐了与市长抽象（可能是`EventService`或`PeopleService`）或应用程序行为（如`EventManagementService`）相关的服务层；最终由您决定项目的最佳代码组织。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:45:49.253

为完整的应用程序创建一个大服务没有任何意义，并且随着应用程序的增长，它会开始产生`readability`同样的问题。`maintenance`

遵循模块化方法总是更好。正如@Asag 所建议的：

为不同的模块创建不同的服务并在那里定义与服务相关的方法。这将帮助您分离功能，也将帮助将来在同一应用程序上工作的任何人。

# c# - C#，使用文件夹中具有相同扩展名的所有文件

> ID：13675743
> 
> 赞同：-1
> 
> 时间：2012-12-03T00:58:10.407
> 
> 标签：c#, file-handling

> **可能重复：**
> [C# 文件按文件名模式存在](https://stackoverflow.com/questions/1199260/c-sharp-file-exists-by-file-name-pattern)

假设我有一个名为documents 的文件夹，该文件夹由pdf、视频、文本、照片等组成……我想做一些只有.doc 扩展名的事情。我唯一能想到的实际上是创建一个将使用 cmd.exe 并在目录中使用 dir 命令的进程，但是我正在寻找更有效的方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:01:32.730

也许您指的是[DirectoryInfo.GetFiles 方法](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getfiles.aspx)：

```
foreach (FileInfo fi in new DirectoryInfo(@"C:\documents").GetFiles().Where(x => x.Extension.ToLower() == ".doc")) {
    Console.WriteLine(fi.Name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:23:03.220

[Directory.EnumerateFiles 方法](http://msdn.microsoft.com/en-us/library/dd383571.aspx)

```
var txtFiles = Directory.EnumerateFiles(sourceDirectory, "*.doc*", SearchOption.AllDirectories);

foreach (string currentFile in txtFiles)
{
    ...
} 
```

如果你想要更高效的东西：

> [http://visuallogparser.codeplex.com/](http://visuallogparser.codeplex.com/)上的好人为我们提供了源代码。

在VS2010中打开[VisualLogParser](http://visuallogparser.codeplex.com/)解决方案，忽略调试提示，解决方案加载后，F5，将combo-box设置为FS（FileSystem），粘贴此查询并按go。

```
SELECT
    ContentPath, [Days (Old)], FileName, [Creation Date Time]
    USING creationtime AS [Creation Date Time],
    TO_DATE([Creation Date Time]) AS Cdate,
    SUB(TO_LOCALTIME(SYSTEM_TIMESTAMP()), Cdate) AS Days,
    DIV(TO_INT(Days),86400) As [Days (Old)],
    EXTRACT_PATH(TO_LOWERCASE(path)) AS ContentPath,
    TO_LOWERCASE(name) AS FileName
FROM 'c:\*.doc' 
WHERE
  (attributes NOT LIKE 'D%')
AND
  ([Days (Old)] >= TO_INT('0'))
ORDER BY [Creation Date Time] DESC 
```

# pandas - 重新采样系列/数据帧，频率锚定到特定时间

> ID：13675749
> 
> 赞同：2
> 
> 时间：2012-12-03T00:58:53.903
> 
> 标签：pandas

我有不均匀的~secondly 数据，其时间序列索引如下所示：

```
import numpy as np
import pandas as pd

dates = [pd.datetime(2012, 2, 5, 17,00,35,327000), pd.datetime(2012, 2, 5, 17,00,37,325000),pd.datetime(2012, 2, 5, 17,00,37,776000),pd.datetime(2012, 2, 5, 17,00,38,233000),pd.datetime(2012, 2, 5, 17,00,40,946000),pd.datetime(2012, 2, 5, 17,00,41,327000),pd.datetime(2012, 2, 5, 17,00,42,06000),pd.datetime(2012, 2, 5, 17,00,44,99000),pd.datetime(2012, 2, 5, 17,00,44,99000),pd.datetime(2012, 2, 5, 17,00,46,289000),pd.datetime(2012, 2, 5, 17,00,49,96000),pd.datetime(2012, 2, 5, 17,00,53,240000)]

inhomogeneous_secondish_series = pd.Series(np.random.randn(len(dates)), name='some_col', index=pd.DatetimeIndex(dates)) 
```

* * *

```
In [26]: inhomogeneous_secondish_series
Out[26]: 
2012-02-05 17:00:35.327000   -0.903398
2012-02-05 17:00:37.325000    0.535798
2012-02-05 17:00:37.776000    0.847231
2012-02-05 17:00:38.233000   -1.280244
2012-02-05 17:00:40.946000    1.330232
2012-02-05 17:00:41.327000    2.287555
2012-02-05 17:00:42.003072   -1.469432
2012-02-05 17:00:44.099000   -1.174953
2012-02-05 17:00:44.099000   -1.020135
2012-02-05 17:00:46.289000   -0.200043
2012-02-05 17:00:49.096000   -0.665699
2012-02-05 17:00:53.240000    0.748638
Name: some_col 
```

我想重新采样说“5s”。通常我会这样做：

```
In [28]: inhomogeneous_secondish_series.resample('5s') 
```

这会产生很好的重新采样的 5 秒数据，锚定到第 0 秒；在结果中，索引中的每个项目将从给定分钟的第 0 秒开始为 5 秒的倍数：

```
2012-02-05 17:00:40   -0.200153
2012-02-05 17:00:45   -0.009347
2012-02-05 17:00:50   -0.432871
2012-02-05 17:00:55    0.748638
Freq: 5S 
```

我将如何将重新采样的数据锚定在**最近**的样本时间附近，所以索引看起来像：

```
...
2012-02-05 17:00:38.240000  (some correct resample value)
2012-02-05 17:00:43.240000  (some correct resample value)
2012-02-05 17:00:48.240000  (some correct resample value)
2012-02-05 17:00:53.240000  (some correct resample value)
Freq: 5S 
```

我希望答案可能在于 resample() 的 loffset 参数，但想知道是否有比在重新采样之前计算 loffset 更简单的方法。我是否必须查看最新的样本，找出它与最近的正常 5s 频率的偏移并将其输入到 loffset 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:50:04.437

`loffset`只需更改标签，而不更改您的数据分组到新频率的方式。所以使用你的例子：

```
max_date = max(dates)
offset = timedelta(seconds=(max_date.second % 5)-5
                , microseconds=max_date.microsecond-1)
inhomogeneous_secondish_series.resample('5s', loffset=offset) 
```

会给你：

```
2012-02-05 17:00:38.239999   -0.200153
2012-02-05 17:00:43.239999   -0.009347
2012-02-05 17:00:48.239999   -0.432871
2012-02-05 17:00:53.239999    0.748638
Freq: 5S 
```

据我了解，这不是您想要的 - 最后一个值应该是数据集中最后两个值的平均值，而不仅仅是最后一个值。

要更改频率的锚定方式，您可以使用`base`. 但是，因为这需要是一个整数，所以您应该使用适当的微秒频率，例如：

```
freq_base = (max_date.second % 5)*1000000 + max_date.microsecond
inhomogeneous_secondish_series.resample('5000000U', base=freq_base) 
```

# jquery - 从ajax post调用加载该屏幕时，我如何返回上一个屏幕

> ID：13675752
> 
> 赞同：1
> 
> 时间：2012-12-03T00:59:11.230
> 
> 标签：jquery, asp.net-mvc

我创建了一个“向导”，用户必须通过 5 个屏幕才能完成

在第 4 步，我有一个页面，用户可以从中从下拉控件中选择 9 个值之一。

我已将 jquery 中下拉菜单的 change() 事件绑定到一个 ajax 帖子，该帖子发布到一个控制器操作，该操作根据用户的选择返回部分视图

在进入向导的第 5 步也是最后一步之前，第 4 步中的数据将由第 3 方服务进行验证。如果该服务不可用，则向用户呈现一个屏幕，其中一个选项是“再试一次”。这就是我的问题所在

我需要返回到第 4 步，并使用用户在第 4 步中填充的内容加载数据，但由于控件是由 ajax 调用中的部分视图呈现的，我不知道如何呈现视图并在没有用户的情况下填充它重新开始并选择其中一个选项，然后重新填充部分视图

编辑：我在模型中有数据。这在 TEMPDATA 中持续存在 这不是问题 问题是重新渲染视图并重新填充

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:44:46.337

找到了一种方法 - 我在控件中放置了一个标志以检测它是“TryAgain”尝试，并将逻辑放置在检测到这一点并“重建”视图的视图中

# mysql - MySql 数据库与 python 的连接

> ID：13675753
> 
> 赞同：0
> 
> 时间：2012-12-03T00:59:19.403
> 
> 标签：mysql, python-2.7, mysql-python

我在尝试使用 python 连接到数据库时遇到问题。它编译没有错误，但它似乎没有做任何事情。我不确定我是否错误地实例化了类或问题可能是什么。有人能指出我正确的方向吗？

```
import _mysql
import MySQLdb

class Operations:
    def open():
        db=_mysql.connect("127.0.0.1","root","admin","test")
        c=db.cursor()

    #deletes the cursor
    def close(self):
        c.close()

        #verifies the credentials and advances
    def login(self):
        print "Welcome to the online bookstore login!"
        x = raw_input('Please enter your user id. ')
        y = raw_input('Please enter your password. ')

        c.execute("""SELECT userid,password FROM members WHERE userid = %s""", (x,))
        z = c.password

        if y == z:
            member_menu()
        else:
            close()

    def new_user(self):
        print "Welcome to the Online book store new user registration page!"
        print "To begin, please enter your first name: "
        fName = raw_input('Please enter your first name: ')
        lName = raw_input('Please enter your last name: ')
        address = raw_input('Please enter your street address: ')
        city = raw_input('Please enter your city: ')
        state = raw_input('Please enter your state: ')
        zip_code = raw_input('Please enter your zip code: ')
        phone = raw_input('Please enter your phone number: ')
        email = raw_input('Please enter your email: ')
        user_ID = raw_input('Please enter your user id: ')
        password = raw_input('Please enter your password: ')

        c.executemany("""INSERT INTO members(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s,) VALUES (fName, lName, address, city, state, zip_code, phone, email, user_id, password,)""")

        print "Your account has been created. returning to the welcome menu. "
        welcome()

    def welcome(self):
        choice = NONE;

        print "**********************************************************************\n"
        print "***\t\t\t\t\t\t\t\t   ***\n"
        print "***\t\tWelcome to the Online Book Store\t\t   ***\n"
        print "***\t\t\t\t\t\t\t\t   ***\n"
        print "**********************************************************************\n"
        print "1\. Member Login\n"
        print "2\. New Member Registration\n"
        print "3\. Quit\n"
        choice = raw_input('Type in your option: ')

        if choice == 1:
            login()
        elif x == 2:
            new_user()
        else:
            close()

    def member_menu(self):
        x = NONE
        print "**********************************************************************\n"
        print "***\t\t\t\t\t\t\t\t   ***\n"
        print "***\t\t   Welcome to the Online Book Store   \t\t   ***\n"
        print "***\t\t\t    Member Menu   \t\t\t   ***\n"
        print "***\t\t\t\t\t\t\t\t   ***\n"
        print "**********************************************************************\n"
        print "1\. Search by Author/Title/Subject\n"
        print "2\. View/Edit Shopping Cart\n"
        print "3\. Check Order Status\n"
        print "4\. One Click Check Out\n"
        print "5\. Logout\n"
        print "Type in your option: "
        x = raw_input('Please enter your choice. ')

        if x == 1:
            close_conn(),
        elif  x == 2:
            close_conn(),
        elif  x ==  3:
            close_conn(),
        elif  x ==  4:
            close_conn(),
        else:
            close_conn()

    def main():
        start = Operations()
        print "Opening conenction to database"
        start.welcome

    if __name__ == '__main__':
        main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:50:59.827

好吧，你的代码有很多问题，我可能会错过其中的一些。

1.  什么都没有发生，因为你的 main() 函数和条件都是类定义的一部分，所以解释器看到的实际上是两个导入和一个类定义。

2.  假设我们取消了 main() 定义和条件的缩进。然后会发生的所有事情就是创建一个操作实例（没有特殊效果，因为您没有定义自定义构造函数）并将“打开与数据库的连接”打印到屏幕上，因为 main() 中的所有最后一行都是得到一个引用 welcome() 方法并忽略它。你需要调用它：start.welcome()

3.  当你调用它时，会出现更多的问题。NameErrors 可能会首先出现，因为您使用的标识符在给定范围内不存在。看来您是 Python 对象模型的新手，并且可能来自采用不同方法的语言，例如 C++。在 Python 中，所有非静态和非类实例方法都将引用它们正在操作的对象作为第一个参数，传统上称为“self”。如果你想访问对象的任何字段，你需要通过'self'来做到这一点，否则它们对解释器是不可见的。例如：您打开一个连接并将光标保持为 c，稍后您可以在其他方法中重用它：

    ```
    def open():
        # ...
        c=db.cursor()
    # ...
    def login(self):
        # ...
        c.execute("...") 
    ```

    这是不正确的，原因有两个：

    *   您的 open() 方法不将 self 作为参数
    *   您将 c 创建为 open() 方法范围内的局部变量，然后尝试在 login() 中访问它，这基本上会导致“赋值前引用”错误。

    为了正确起见，应该这样写：

    ```
    def open(self):
        # ...
        self.c = db.cursor()
    # ...
    def login(self):
        # ...
        self.c.execute("...") 
    ```

    你在很多地方都犯了同样的错误。您需要调用 self.login()、self.new_user()、self.close() 等。

4.  您正在使用 Python 2，至少根据问题的标签，在 Python 2 中声明类时需要记住一件事。存在所谓的旧式和新式类，您想要做的是使用新式的。因此你的类必须从对象继承：

    ```
    class Operations(object):
        # ... 
    ```

    他们最终决定放弃 Python 3 中对旧式类的支持，并且不再需要显式地从 object 继承，但是在 Python 2 中，您需要处理它。

虽然仍然存在一些错误或潜在错误（什么是 close_connection()？），但我认为这足以作为一个良好的开端；）。祝你好运。

# c# - C# 锚点传递值

> ID：13675755
> 
> 赞同：0
> 
> 时间：2012-12-03T01:00:00.097
> 
> 标签：c#, asp.net, anchor

我正在尝试创建一个 A href，它将一个值带到同一页面，它只会填充一个隐藏的文本框。这几乎是评论线程，我想使用回复 A href 来生成它将要回复的回复。有人有什么建议吗？

我已经尝试过，但似乎没有填充文本框，它只是刷新了页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:27:37.827

在链接中使用 javascript：

```
<a href="javascript:_callFunction(this)">Do This</a>

<script type="text/javascript">
  function _callFunction(link) {
     document.getElementById("hiddenID").value = "X";
  }
</script> 
```

# ruby-on-rails - Rails：activeadmin 覆盖创建操作

> ID：13675765
> 
> 赞同：63
> 
> 时间：2012-12-03T01:01:47.570
> 
> 标签：ruby-on-rails, activeadmin, inherited-resources

我有一个 activeadmin 资源，它有一个 belongs_to :user 关系。

当我在活动管理员中创建模型的新实例时，我想将当前登录的用户关联为创建实例的用户（我想这是非常标准的东西）。

所以......我得到了它的工作：

```
controller do
  def create
    @item = Item.new(params[:item])
    @item.user = current_curator
    super
  end 
end 
```

但是 ;) 我只是想知道这是如何工作的？我只是希望将@item 变量分配给用户然后调用 super 会起作用（确实如此）。我也开始浏览宝石，但看不到它实际上是如何工作的。

任何指针都会很棒。我假设这是 InheritedResources 给你的东西？

谢谢！

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2014-04-07T18:33:20.510

我遇到了类似的情况，我真的不需要完全覆盖 create 方法。我真的只想在保存之前注入属性，并且只在创建时注入；与您的示例非常相似。在阅读了 ActiveAdmin 源代码后，我确定我可以用`before_create`它来做我需要的事情：

```
ActiveAdmin.register Product do
  before_create do |product|
    product.creator = current_user
  end
end 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-09T16:13:44.020

另外的选择：

```
def create
  params[:item].merge!({ user_id: current_curator.id })
  create!
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T04:10:58.307

您是正确的活跃管理员使用`InheritedResources`，您可以在[页面](https://github.com/gregbell/active_admin)末尾看到的所有其他工具。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-17T01:47:43.277

As per the AA [source code](https://github.com/activeadmin/active_admin/blob/d25e8d09f723fc3ae55a21cd22bc7c6466ba32f8/spec/unit/resource_controller_spec.rb#L92) this worked for me:

```
controller do
  def call_before_create(offer)
  end
end 
```

# php - 如何防止 CodeIgniter 为每次访问创建会话？

> ID：13675766
> 
> 赞同：1
> 
> 时间：2012-12-03T01:01:47.023
> 
> 标签：php, codeigniter, session, tankauth

我在 CodeIgniter 2.1.3 中使用保存到数据库和 TankAuth 的会话。总体设置是 TankAuth 检查用户是否通过

```
$this->tank_auth->is_logged_in() 
```

这是指库/Tank_auth.php

```
function is_logged_in($activated = TRUE)
{
    return $this->ci->session->userdata('status') === ($activated ? STATUS_ACTIVATED : STATUS_NOT_ACTIVATED);
} 
```

这需要初始化会话类——然后它将在数据库中创建一个新会话。

所以我想知道是否有办法规避这种情况，因为我的数据库中充满了未登录用户的空会话。

关于如何解决这个问题的任何想法/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:50:46.257

您可以做两件事来删除非活动会话：-

1.  每当用户注销时，从数据库中删除其行并调用会话销毁函数，如

    $this->CI->DB_Master->where('session_id', $session['session_id']); $this->CI->DB_Master->delete($this->session_table); $this->sess_destroy();

2.  运行 cron 作业，根据您的数据库数据在每个特定时间间隔后运行，删除与非活动用户对应的行。

# c# - 如何添加注册表项

> ID：13675769
> 
> 赞同：0
> 
> 时间：2012-12-03T01:02:15.747
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0

我正在使用 .net 应用程序。我想将以下注册表项添加到应用程序。

```
HKLM\Software\Business Objects\Suite 11.5\Components\DHTMLViewer\EncodeHTMLForSingleLineFieldObjects 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:19:42.150

Use the Microsoft.Win32.Registry class

```
Registry.SetValue(@"HKLM\Software\Business Objects\Suite 11.5\Components\DHTMLViewer", "EncodeHTMLForSingleLineFieldObjects", "my value");

var value = Registry.GetValue(@"HKLM\Software\Business Objects\Suite 11.5\Components\DHTMLViewer", "EncodeHTMLForSingleLineFieldObjects", null); 
```

# php - 如何使用带有引用的正则表达式拆分数组

> ID：13675771
> 
> 赞同：0
> 
> 时间：2012-12-03T01:02:20.937
> 
> 标签：php, regex, arrays, preg-replace

我需要用逗号分割字符串，但逗号不应该在方括号内。例如字符串：

```
'"f2140202585",true,"some, str","numeric","MegapixNum","","","0.3,16.0","0.3,16","17",2,""' 
```

应该产生这个结果：

```
['"f2140202585"', 'true', '"some, str"', '"numeric"', '"MegapixNum"', '"0.3,16.0"', '"0.3,16"', '"17"', '2', '""'] 
```

我知道为此存在 preg_replace 函数，但我无法弄清楚正则表达式应该是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:22:19.010

I solve it this way:

```
preg_match_all('/("[^"]+?"|[^\,]+)/', $faq, $matches); 
```

# node.js - 在nodejs中将http请求重定向到https

> ID：13675773
> 
> 赞同：2
> 
> 时间：2012-12-03T01:02:35.077
> 
> 标签：node.js, http, redirect, https

我正在尝试将我的 http 页面重定向到 https，我在 stackoverflow [How to force SSL / https in Express.js](https://stackoverflow.com/questions/8605720/how-to-force-ssl-https-in-express-js)中发现了一些讨论。但现在 http = express.createServer() 已被弃用。所以我试图做如下：

```
var http = require("http")
  , https = require("https");

var app = express();

/* If I use below it gives ECONNREFUSED error */
http.get('*', function(req, res) {
  var path = req.headers.host;
  var pos = path.indexOf(':');
  res.redirect('https://' + path.substr(0, pos) + ':' + String(app.get('port')));
});

app.get('/', function(req, res) {
 //Something 
});

https.createServer(options, app).listen(8000, function(){
  console.log("In Https");
});

http.createServer(app).listen(9000, function() {
  console.log("In http");
}); 
```

你能告诉我为什么会出现这个错误吗？（ECONNREFUSED）我应该修改什么才能让它工作，http重定向到https？

问候，-M-

# c# - 子字符串等价于正则表达式

> ID：13675775
> 
> 赞同：1
> 
> 时间：2012-12-03T01:03:07.273
> 
> 标签：c#, regex

好的，我需要一个通用的正则表达式，它会给我从位置 y 开始的字符串中的 x 字符，就像字符串的子字符串函数一样：

input_str.Substring(y,x)

但是作为 C# 正则表达式。

示例：1234567890 子字符串 (5,3) 678

我知道你在想为什么不直接使用 Substring 函数呢？简短的回答是因为这是作为现有函数的数据，在这种情况下，创建一个完全独立的数据解析机制是不优雅的。我们希望在不更改代码的情况下使其正常工作。

我觉得这很明显 - 但我对正则表达式非常缺乏经验。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:06:34.777

`.{y}(.{x}).*`我认为应该这样做，然后只需拉出捕获组。

# jena - 创建个体后保存模型

> ID：13675777
> 
> 赞同：0
> 
> 时间：2012-12-03T01:03:12.513
> 
> 标签：jena, owl, protege

我正在尝试创建个人并将它们保存在 OWL 文件中。OWL 文件是在 Protégé 中创建的。文件大小为 10KB，但在尝试将个体保存在本体中后，代码大小变为 7KB。

然后我尝试使用 Protégé 打开 OWL 文件，但它无法打开。

代码是：

```
String SOURCE = "http://www.semanticweb.org/ontologies/2012/9/untitled-ontology-19";
String NS = SOURCE + "#";

OntModel onto = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM, null);
onto.read("file:/home/tourism.owl", "RDF/XML");

OntClass place = onto.getOntClass(NS+"Mountains");
Individual am1 = onto.createIndividual(NS+Concept1, place);

FileOutputStream output = null;

try  {
  output = new FileOutputStream( "/home/tourism.owl ");     
} catch(Exception e) {}

onto.writeAll(output, "RDF/XML-ABBREV","xmlbase"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:05:16.157

您是否检查过新文件不包含新信息？因为您使用了“RDF/XML-ABBREV”形式，所以它可能以比原始文件更紧凑的形式写出。

PS“xmlbase”应该是一个URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T06:54:54.550

Jena 是纯粹的基于 RDF/XML 的 API，用于访问本体或模型。记下这些事情：在使用 Protege 编辑 OWL 文件后保存它时的格式是什么？是 OWL/XML 还是 RDF/XML？Jena 以 RDF 为中心，可以读取以 RDF/XML 格式编写的 OWL 文件，但无法读取以 OWL/XML 语法（特别是 OWL2 语法）编写的 OWL 文件。类似地，它可以将 Model/OntModel 从内存写入 OWL 文件或 RDF 文件，但始终使用“RDF/XML”语法或“N3”或“RDF/XML-ABBREV”。并且由于您使用的是“RDF/XML-ABBREV”，它以缩写格式列出您的三元组。这可能是您的输出文件大小减小的原因。

# html-table - 将样式插入到 html 表格中

> ID：13675780
> 
> 赞同：0
> 
> 时间：2012-12-03T01:03:18.363
> 
> 标签：html-table, diff, html-safe

我将旧的 html 标记存储在我的数据库中，跟踪更改，然后尝试使用[Differ](https://github.com/pvande/differ)和`:html`格式选项呈现差异。

成功生成以下代码：

```
<table>
...
<tr>
  <th style="width:60px; text-align:left;">
    Owner:
  </th>
  <del class="differ">
    <td>
      &nbsp;<span id="someID">Previous Owner Name</span>
    </td>
  </del>
  <ins class="differ">
    <td>
      &nbsp;<span id="someID">Current Owner Name</span>
    </td>
  </ins>
</tr>
...
</table> 
```

注意`<del>`和`<ins>`标记的元素。

如果我查看源代码，它看起来不错。

但是因为显然这会破坏表格布局，所有浏览器似乎都将这些新元素移动到表格之前。当我检查元素时，我得到以下信息：

```
<del class="differ">   </del>
<ins class="differ">   </ins>
<table>
...
    <tr>
      <th style="width:60px; text-align:left;">
        Owner:
      </th>
        <td>
          &nbsp;<span id="someID">Previous Owner Name</span>
        </td>
        <td>
          &nbsp;<span id="someID">Current Owner Name</span>
        </td>
    </tr>
...
</table> 
```

我尝试编写一个自定义 Rails 视图助手来替换每个`<ins>`和`<del>`，`<span>`但同样的事情发生了。

有没有办法像我尝试做的那样使用元素来设置表格的样式，还是我必须走 dom 并`<td>`使用 javascript 将样式应用于每个适当的样式？一开始我无法替换表格，因为我不控制来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:00:28.927

感谢 David 和 Steve 确认了这个问题，我能够通过将`<ins>`and`<del>`标记转换为类，并在渲染视图之前使用 Nokogiri 将它们应用于每个子元素来解决这个特定情况。

我创建了一个`table_safe`助手，如下所示：

```
 def table_safe(markup)
    parsed = Nokogiri.parse(markup)
    parsed.css('ins').children().each do |el|
      if el['class']
        el['class'] = el['class'] << ' ins'
      else
        el['class'] = 'ins'
      end
    end
    parsed.css('del').children().each do |el|
      if el['class']
        el['class'] = el['class'] << ' del'
      else
        el['class'] = 'del'
      end
    end
    parsed.to_s
  end 
```

这显然可以重构，但它解决了问题。理想情况下，我可以修改[Differ gem](https://github.com/pvande/differ)`:html`中的格式化选项，以便它在第一个嵌套元素本身没有更改的情况下插入标签。我不确定为什么这不是默认功能，但它超出了我的能力范围。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T01:30:27.407

为什么不添加一个 CSS 样式表来将样式类复制`differ`到所有 TD 元素？

```
<link rel="stylesheet" type="text/css" href="some.css" /> 
```

然后在样式表中定义如下：

```
td {
 padding: 15px;
 background-color: gold;
 text: black;
 font-family: Courier, "Courier New", Tahoma, Arial, "Times New Roman";
 border: 1px solid black;
 /* Some other properties here...... */  
} 
```

和一个示例 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>Anything</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="ja.css" />
 </head>

 <body bgcolor="white" text="black">

<table>
<tr>
 <td>A</td>
 <td>B</td>
</tr>

<tr>
 <td>C</td>
 <td>D</td>
</tr>
</table>

 </body>
</html> 
```

工作示例：

[http://pastehtml.com/view/ckdf6rxo3.html](http://pastehtml.com/view/ckdf6rxo3.html)

也许这个 W3Schools 链接会很有用：

[CSS 样式表](http://www.w3schools.com/css/css_table.asp)

# powershell - Windows 中的 Git Shell：补丁的默认字符编码是 UCS-2 Little Endian - 如何在没有 BOM 的情况下将其更改为 ANSI 或 UTF-8？

> ID：13675782
> 
> 赞同：42
> 
> 时间：2012-12-01T22:33:37.363
> 
> 标签：powershell, git, encoding, github

在 Windows 中使用 Git Shell创建**差异补丁时**（当使用[GitHub for Windows](http://windows.github.com/ "适用于 Windows 的 GitHub")时），补丁的**字符编码**将根据 Notepad++为**UCS-2 Little Endian （参见下面的屏幕截图）。**

我怎样才能改变这种行为，并强制 git 在没有 BOM 字符编码的情况下使用 ANSI 或 UTF-8 创建补丁？

这会导致问题，因为 UCS-2 Little Endian 编码补丁无法应用，我必须手动将其转换为 ANSI。如果我不这样做，我会收到***“致命：无法识别的输入”***错误。

[![创建 git 补丁](../Images/7450368691ef0e519a643424900e4fa7.png)](https://i.stack.imgur.com/Cetvd.png)

[![Notepad++ 字符编码截图](../Images/6155dd4d12dc361757661af246856136.png)](https://i.stack.imgur.com/2ayzD.png)

* * *

从那时起，我也意识到我必须在 Notepad++中手动将 EOL 从 Windows 格式 ( `\r\n`) 转换为 UNIX ( )（编辑 > EOL 转换 > UNIX）。`\n`如果我不这样做，我会收到“尾随空格”错误（即使所有空格都被修剪：“TextFX”>“TextFX 编辑”>“修剪尾随空格”）。

因此，我需要执行以下步骤才能应用补丁：

1.  创建补丁（[这是结果](https://i.stack.imgur.com/DyC1W.png)）
2.  [将字符编码转换为 ANSI](https://i.stack.imgur.com/cYuG3.png)
3.  [EOL 转换为 UNIX 格式](https://i.stack.imgur.com/LThP8.png)
4.  应用补丁

请看一下这个截图：

[![使用 Git 在 Windows Powershell 中应用补丁是有问题的](../Images/3194f1de692dfcdfcb5e0c65e9f2f70b.png)](https://i.stack.imgur.com/ADyqO.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-06T20:05:21.243

我不是 Windows 用户，所以对我的回答持保留态度。根据[Windows PowerShell Cookbook](http://web.archive.org/web/20140121133248/http://www.pavleck.net/powershell-cookbook/ch02.html)，PowerShell 对 的输出进行预处理`git diff`，将其分成几行。Cmdlet的文档[`Out-File`](http://technet.microsoft.com/en-us/library/hh849882.aspx)表明，这与没有参数`>`的情况相同。`| Out-File`我们还在[PowerShell 文档](http://technet.microsoft.com/en-us/library/dd347585.aspx)中找到了这条评论：

> 如果您习惯于传统的输出重定向，则使用 Out-File cmdlet 的结果可能不是您所期望的。要了解其行为，您必须了解 Out-File cmdlet 运行的上下文。
> 
> 默认情况下，Out-File cmdlet 创建一个 Unicode 文件。从长远来看，这是最好的默认设置，但这意味着需要 ASCII 文件的工具无法在默认输出格式下正常工作。您可以使用 Encoding 参数将默认输出格式更改为 ASCII：
> 
> [...]
> 
> Out-file 将文件内容格式化为类似于控制台输出。这会导致输出被截断，就像在大多数情况下在控制台窗口中一样。[...]
> 
> 要获得不强制换行以匹配屏幕宽度的输出，可以使用 Width 参数指定线宽。

所以，显然不是 Git 选择了字符编码，而是`Out-File`. 这表明 a) PowerShell 重定向真的应该只用于文本和 b)

```
| Out-File -encoding ASCII -Width 2147483647 my.patch 
```

将避免编码问题。但是，这仍然不能解决 Windows 与 Unix 行尾的问题。有 Cmdlet（请参阅[PowerShell Community Extensions](http://pscx.codeplex.com/)）来转换行尾。

然而，所有这些重新编码并没有增加我对补丁的信心（它本身没有编码，而只是一串字节）。上述[Cookbook](http://web.archive.org/web/20140121133248/http://www.pavleck.net/powershell-cookbook/ch02.html)包含一个脚本 Invoke-BinaryProcess，可用于重定向未修改的命令的输出。

为了回避整个问题，另一种方法是使用`git format-patch`而不是`git diff`. `format-patch`直接写入文件（而不是标准输出），因此不会重新编码其输出。但是，它只能从提交创建补丁，而不是任意差异。

`format-patch`接受一个提交范围（例如`master^10..master^5`）或单个提交（例如 X，表示 X..HEAD）并创建 NNNN-SUBJECT.patch 形式的补丁文件，其中 NNNN 是一个递增的 4 位数字，主题是（损坏的）补丁的主题。可以使用 指定输出目录`-o`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-07-06T07:25:08.327

如果你使用 powershell，你也可以这样做：

```
cmd /c "git diff > patch.diff" 
```

这使得命令通过 CMD 运行，它按原样写入输出文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-05T20:22:03.477

如果这对任何人都有帮助，使用旧的命令提示符而不是 PowerShell 可以完美地工作；它似乎没有受到 PowerShell 中关于字符编码和 EOL 的任何问题的影响。

[![在此处输入图像描述](../Images/1363fb4209332f201b031b78ff15a8aa.png)](https://i.stack.imgur.com/1ehmD.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T04:00:01.313

1.  差异的 Iconv 输出
2.  对于纯 7 位补丁（纯英文），您可以忽略疯狂的 Notepad++ 检测：**补丁内容不包含任何字符集定义**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-18T23:56:59.997

在 powershell 上生成的差异上执行 dos2unix 似乎对我有用。然后我能够`apply`成功进行差异化。

```
dos2unix.exe diff_file
git apply diff_file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-08T13:26:40.483

正如 Lars Noschinski 所说，您需要修复`Out-File`. 您可以使用以下命令设置 Out-File 的 DefaultParameter。

```
$PSDefaultParameterValues['Out-File:Encoding'] = 'ASCII'
$PSDefaultParameterValues['Out-File:Width'] = '2147483647' 
```

设置默认参数后，您可以使用`>`导出补丁文件。

将这两行添加到我的配置文件后，一切都按预期工作。

```
λ git stash show -p > test3
C:\Users\..\Source\.. [master +1 ~0 -0 !]
λ git apply test3
C:\Users\..\Source\.. [master +1 ~2 -0 !] 
```

# c# - 如何实现 RazorViewEngine FindView 缓存

> ID：13675784
> 
> 赞同：3
> 
> 时间：2012-12-03T01:04:01.637
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我正在[继承 RazorViewEngine](http://msdn.microsoft.com/en-us/library/system.web.mvc.razorviewengine%28v=vs.98%29.aspx)并且我正在尝试覆盖 FindView 并且我被你如何使用`ViewLocationCache`.

谁能给我一个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:49:55.893

我终于明白了。这是我的整个实现：

```
public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        //Implement defualt exceptions
        if(controllerContext == null)
            throw new ArgumentNullException("The controllerContext parameter is null");
        if(string.IsNullOrEmpty(viewName))
            throw new ArgumentException("The viewName parameter is null or empty.");

        //Check cache if specified
        if(useCache && this.ViewLocationCache != null){
            string cachedLocation = ViewLocationCache.GetViewLocation(controllerContext.HttpContext, generateCacheKey(controllerContext, viewName));
            if (!string.IsNullOrEmpty(cachedLocation))
                return new ViewEngineResult(CreateView(controllerContext, cachedLocation, masterName), this);
        }

        //Create arguments for location formatting
        string trimmedViewName = string.Empty;
        if (viewName.EndsWith(".cshtml"))
            trimmedViewName = viewName.Remove(viewName.Length - 7);
        else
            trimmedViewName = viewName;
        object[] args = new object[] { trimmedViewName, controllerContext.RouteData.GetRequiredString("controller"), controllerContext.RouteData.GetRequiredString("module") };

        //Attempt to locate file
        List<string> searchedLocations = new List<string>();
        foreach(string location in ViewLocationFormats){
            string formatedLocation = string.Format(location,args);
            searchedLocations.Add(formatedLocation);
            if (FileExists(controllerContext, formatedLocation))
            {
                //File has been found. Add to cache and return view
                if(this.ViewLocationCache != null)
                    ViewLocationCache.InsertViewLocation(controllerContext.HttpContext, generateCacheKey(controllerContext, viewName), formatedLocation);

                return new ViewEngineResult(CreateView(controllerContext, formatedLocation, masterName), this);
            }
        }

        //Couldnt find view, return searched locations
        return new ViewEngineResult(searchedLocations);
    }
    public string generateCacheKey(ControllerContext controllerContext, string viewName)
    {
        return string.Format("{0}|{1}", controllerContext.RouteData.GetRequiredString("module"), viewName);
    } 
```

# c++ - 通过未覆盖的基类从派生类调用函数

> ID：13675785
> 
> 赞同：1
> 
> 时间：2012-12-03T01:04:03.617
> 
> 标签：c++, inheritance

在 C++ 中；

有没有办法通过基类从派生类调用函数，即使函数没有被覆盖？换句话说，我正在使用一个基类，以便在没有提升的情况下拥有异构容器；我想调用一个仅特定于派生类的成员函数...

示例：（我刚刚编写了这段代码，因此可能存在语法错误，但希望您能理解要点）

```
class Vehicle
{
  public:
   virtual void do_vehicle_stuff();
   // virtual void do_car_specific_stuff(); makes no sense here
}

class Car : public Vehicle
{
  public:
   void do_vehicle_stuff();
   void do_car_specific_stuff();
}

Car a,b;

list<Vehicle> vehicle_list;
vehicle_list.push_back(a);
vehicle_list.push_back(b);

vehicle_list.front().do_car_specific_stuff(); 
```

错误：“类车辆”没有名为“do_car_specific_stuff()”的成员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:11:53.853

当您将它们插入列表时，您正在对它们进行切片。在 C++ 中，子类型多态（您正在使用的多态类型）仅通过引用或指针起作用，而不是值。当您将您的`carS`插入其中时，`list`它们将转换为`VehicleS`.

一个例子：

```
Car c;
std::vector<Vehicle> vs;
vs.push_back(c); // slicing happens
vs.front(); // not a car anymore, but just a vehicle,
            // the Car-ness is lost through the copy operation 
```

怎么做：

```
std::vector<std::unique_ptr<Vehicle>> vs;
vs.push_back(new Car());
vs.front(); // actually a Car 
```

在您解决了代码的基本缺陷之后，这可能会对您有所帮助：

```
Vehicle* vehiclep = new Car();
if(auto carp = dynamic_cast<Car*>(vehiclep)) {
  carp->do_car_specific_stuff();
} 
```

这是一项相当昂贵的操作，通常表明设计有异味，因此您可能需要重新考虑您在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:15:12.947

这是一个更合适的设计：

```
struct Vehicle
{
    virtual ~Vehicle() { }

    void do_vehicle_stuff()
    {
        vehicle_impl();
    }

private:
    virtual void vehicle_impl() = 0;
};

struct Car : Vehicle
{
private:
    virtual void vehicle_impl()
    {
        my_vehicle_stuff();
        my_car_specific_stuff();
    }

    void my_vehicle_stuff()      { /* what you had originally */ }
    void my_car_specific_stuff() { /* car-only stuff */ }
};

std::list<std::unique_ptr<Vehicle>> vehicles;

vehicles.emplace_back(new Car);
vehicles.emplace_back(new Motorcycle);
vehicles.emplace_back(new Carriage); 
```

# ruby-on-rails - 回形针投递箱评估 nil.[] 错误

> ID：13675786
> 
> 赞同：1
> 
> 时间：2012-12-03T01:04:10.140
> 
> 标签：ruby-on-rails, paperclip, dropbox-api

只是尝试回形针保管箱，但没有太大成功。这是我所做的。

在我的 Gemfile 中：

```
gem 'paperclip'
gem "paperclip-dropbox" 
```

在 dropbox 上创建了一个应用程序并按照以下说明操作： [https ://github.com/janko-m/paperclip-dropbox](https://github.com/janko-m/paperclip-dropbox)

在我的 dropbox.yml

```
development:
    app_key: APP_KEY
    app_secret: APP_SECRET
    access_token: ACCESS_TOKEN
    access_token_secret: ACCESS_TOKEN_SECRET
    user_id: USER_ID

production:
    app_key: APP_KEY
    app_secret: APP_SECRET
    access_token: ACCESS_TOKEN
    access_token_secret: ACCESS_TOKEN_SECRET
    user_id: USER_ID 
```

在我的用户模型中：

```
has_attached_file :avatar, 
    :styles => {
      thumb: '100x100>',
      square: '200x200#',
      medium: '300x300>' } 
```

在我看来：

```
<%= image_tag @user_profile.avatar.url(:square), :size => '100x100' %> 
```

错误信息：

```
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.[] 
```

指向我的 image_tag 代码行。

请注意，回形针在使用本地文件系统时效果很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:49:11.873

在您的用户模型中为图像大小，尝试擦除大小后面的符号，如 '100x100>' 到 '100x100' ， '200x200#' 到 '200x200'

# c# - 类继承/方法覆盖

> ID：13675787
> 
> 赞同：3
> 
> 时间：2012-12-03T01:04:39.490
> 
> 标签：c#, class, inheritance, overriding

这是我第一次上课，所以请原谅我的无知。

我有一个 Pet 类，它是我的基类。我有两个儿童班，狗和猫。我想要做的是让 Cat 和 Dog 方法通过说“Woof！”来覆盖 Pet 方法。和“喵！” 而不是说话。然后以另一种形式，我必须在按下按钮时打印信息（姓名、颜色和他们说话）。

```
 class Pet
    {
        protected string name, color, food;

        public string Name
        {
            get
            {
                return name;
            }
            set
            {
                name = value;
            }
        }
        public string Color
        {
            get 
            {
                return color;
            }
            set
            {
                color = value;
            }
        }
        public string Food
        {
            get
            {
                return food;
            }
            set
            {
                food = value;
            }
        }
        public void speak(string s)
        {
            s = "Speak";
            MessageBox.Show(s);
        }

        public Pet(string name, string food, string color)
        {
            //Constructor
            this.Food = food;
            this.Name = name;
            this.Color = color;
        }

    class Dog : Pet
    {

        public Dog(string name, string food, string color)
            : base(name, food, color)
        {

        }

        protected override void speak()
        {

        }

    }

} 
```

（省略了猫，因为它几乎和狗一样）

我不断收到错误“错误 1 ​​'Lab12.Cat.speak()': 在覆盖 'public' 继承成员 'Lab12.Pet.speak()' 时无法更改访问修饰符”

我究竟做错了什么？我知道它与某处的保护级别有关，我不断将事情从公共切换到受保护或私有，但它没有解决任何问题。帮忙，有人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:07:26.407

由于 Speak() 最初是公开的，因此您需要保持公开。您“无法更改访问修饰符”（公共与私有）。

此外，您不能覆盖非虚拟或静态方法。**被覆盖的基方法必须是虚拟的、抽象的或覆盖的。**

阅读： http: [//msdn.microsoft.com/en-us/library/ebca9ah3 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ebca9ah3(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:10:39.707

Speak 方法必须在您的基类中是虚拟的才能覆盖

宠物类

```
 public virtual void speak(string s)
  {
      s = "Speak";
      MessageBox.Show(s);
  } 
```

并且您必须使用相同的修饰符（公共）

狗类

```
 public override void speak(string s)
  {
     base.speak(s);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:07:15.073

```
protected override void speak()
    {

    } 
```

很确定这是因为您正在将`public`方法更改`protected`为子类中的方法。

有错误告诉您在覆盖该方法时无法更改访问类型。因此，要解决此问题，只需将方法在`Cat`and中保持为公开`Dog`：

```
public override void speak()
    {

    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-03T01:11:10.580

好吧，您收到该错误的原因是您从父类 Pet 继承了“speak”方法。您已将 speak() 方法声明为公共方法，然后您将继承它并使其受保护。我建议您在继承它并在 Dog、Cat、Monkey 类中覆盖它后将其公开。

# php - 2个日期之间的MySQL搜索

> ID：13675789
> 
> 赞同：1
> 
> 时间：2012-12-03T01:05:31.090
> 
> 标签：php, mysql

我在查询中有一个奇怪的问题，我只是使用 2 个日期进行搜索，我将数据库中的所有日期格式化为 2012-12-02 00:00:00 mysql 格式，但它只是忽略了 AND cslblicstat = '10' AND wcxdate BETWEEN '$date1' AND '$date2' 并给我任何具有匹配类的东西。

```
$user = $session->username;
if(isset($_POST['carrier'])){
$carrier = $_POST['carrier'];
$class[] = $_POST['class'][0];
$date1 = $_POST['date1'];
$date1 = date("Y-m-d 00:01", strtotime($date1));
$date2 = $_POST['date2'];
$date2 = date("Y-m-d 59:59", strtotime($date2));

 foreach( $class as $key){
 $query =   "SELECT * FROM leads WHERE class1 = '$key' OR class2 = '$key' OR class3 = '$key' OR class4 = '$key' OR class5 = '$key' OR class6 = '$key' OR class7 = '$key' OR class8 = '$key' OR class9 = '$key' OR class10 = '$key' OR class11 = '$key' OR class12 = '$key' AND user = '' AND wccompcode = '$carrier' AND cslblicstat = '10' AND wcxdate BETWEEN '$date1' AND '$date2' LIMIT 100";
$sellead = mysql_query($query)or die(mysql_error());
while($leads = mysql_fetch_array($sellead)){

    $arrayl[] = $leads;
    $rowid = $leads['ID'];
    $update = mysql_query("UPDATE leads SET user = '$user' WHERE ID = '$rowid'")or die(mysql_error());

}
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T01:13:36.787

在 SQL 中，`AND`运算符的优先级高于`OR`. 我想您只需要将 ORed 条件放入括号中：

```
SELECT * 
FROM leads
WHERE (class1 = '$key' OR class2 = '$key' OR ... OR class12 = '$key')
  AND user = '' 
  AND wccompcode = '$carrier' 
  AND cslblicstat = '10' 
  AND wcxdate BETWEEN '$date1' 
                  AND '$date2' 
LIMIT 100 
```

如果对运算符的优先级有疑问，请使用括号（或查阅手册）。

您还可以使用以下方式编写该条件`IN`：

```
WHERE '$key' IN (class1, class2, ... , class12)
  AND user = ''
  --- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:14:36.520

在 MySQL 中，AND 在 OR 之前进行评估。所以你的 WHERE 子句相当于这个：

```
SELECT 1 OR 0 AND 0; 
```

结果是真的：

```
+--------------+
| 1 OR 0 AND 0 |
+--------------+
|            1 |
+--------------+ 
```

此外，表达 OR 条件的语法更简单的方法是这样的：

```
WHERE '$key' IN ( class, class2, class3, ... ) AND ... ; 
```

但是，只要您有带有数字的列，它的真正含义是您的架构可以得到改进。

# jquery - 在我的插件中覆盖我的默认参数？

> ID：13675790
> 
> 赞同：0
> 
> 时间：2012-12-03T01:05:44.220
> 
> 标签：jquery, jquery-plugins, plugins

我一直在尝试将我的 carosel 函数转换为插件，我的问题是我希望能够覆盖默认参数，以便可以从另一个 javascript 文件中更改变量。

```
(function($){
$.rjm_carosel = (function(rjm){

    var sums = $(window).width() / 2;
    var animating = false;
    var step = 0;
    var nextStep = 0;
    var prevStep = 0;
    var defaults = {
                    mainContainer: ".container",
                    delay: 15000,
                    slideDuration: 1000,
                    slideEasing: "easeOutQuart",
                    };      

    rjm.reclass_thumb_blocks = function(){

    };

    rjm.slideNext = function(){

    };

    rjm.slideBack = function(){

    };

    rjm.bindBtn = function(){

    };

    rjm.unbindBtn = function(){

    };
    return rjm;

})({});

})(jQuery); 
```

这是我为触发另一个 js 文件中的函数所做的工作：

```
 $.rjm_carosel.unbindBtn();
        $.rjm_carosel.bindBtn();
        $.rjm_carosel.reclass_thumb_blocks(); 
```

**如何将 mainContainer 默认变量覆盖为“.newWrapper”而不是“.container”？**

我希望能够覆盖插件 js 文件之外的默认值，否则它对我没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:15:12.723

Addy Osmani 有一个很好的模板，它演示了如何设置默认值，然后能够覆盖它们。应该正是你所需要的。[这是 Github 上的链接。](https://github.com/addyosmani/jquery-plugin-patterns/blob/master/patterns/jquery.best.options.plugin-boilerplate.js)

这里的广告是 tl;dr：本质上，您设置了一个 var 来扩展默认值：

```
 options = $.extend( {}, $.fn.pluginName.options, options );

    return this.each(function () {

        var elem = $(this);

    });
}; 
```

然后你可以实际设置默认值，以防没有传入：

```
$.fn.pluginName.options = {

    key: "value",
    myMethod: function ( elem, param ) {

    }
}; 
```

覆盖你会使用：

```
$.fn.pluginName.key ='otherval'; 
```

# java - 在同一个活动中管理多个 webview

> ID：13675792
> 
> 赞同：1
> 
> 时间：2012-12-03T01:06:10.690
> 
> 标签：java, android, android-layout

我是 Android 开发的新手，我正在寻找同时管理多个 web 视图的最佳方法。

我的目标是创建一个简单的网络浏览器，其中包含一个小菜单，其中列出了我打开的“选项卡”，并通过用户的选择替换了布局中的内容部分。我不想在平板电脑上有 Chrome 和股票浏览器这样的可见标签。

管理多个视图、在它们之间切换并保持其状态的最佳方法是什么？

我应该使用多个片段（每个片段都包含一个 webview）和 FragmentManager 来替换内容吗？通过删除和添加选定的 webview 手动管理框架布局？

**更新**：

今天玩了Fragment，做了一个快速测试项目。这里有一些代码：我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<FrameLayout android:id="@+id/fff"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

</FrameLayout>

</RelativeLayout> 
```

我的活动：

```
public class MainActivity extends Activity {

    private static final String TAG = "MainActivity";
    private WebFragment f1;
    private WebFragment f2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    f1 = new WebFragment();
    f2 = new WebFragment();

    FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

    fragmentTransaction.add(R.id.fff, f1);
    fragmentTransaction.commit();

    f1.loadUrl("file:///android_asset/home.html");
    f2.loadUrl("file:///android_asset/home.html");

}

private void switchFragment(int id) {
    FragmentTransaction trx = getFragmentManager().beginTransaction();
    if (id == 1) {
        trx.replace(R.id.fff, f1);
    } else if (id == 2) {
        trx.replace(R.id.fff, f2);
    }
    trx.commit();

}
...
} 
```

我的片段：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
    <WebView android:id="@+id/ww"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />
</LinearLayout>

public class WebFragment extends Fragment {
    private static final String TAG = "WebFragment";
    private View v = null;
    private WebView ww;
    private String url = null;;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        Log.d(TAG, "WebFragment onCreateView");

        if (v == null) {
            v = inflater.inflate(R.layout.test_layout, container, false);
            this.ww = (WebView) v.findViewById(R.id.ww);
            // WebView settings here...
            this.ww.setWebViewClient(new WebViewClient());
            if (this.url != null)
                this.ww.loadUrl(url);
        }
        return v;
    }

    public void loadUrl(String url) {
        this.url = url;
        if (this.ww != null)
            this.ww.loadUrl(url);
    }
} 
```

通过使用我的活动菜单，我可以切换到一个或其他片段。显然，我需要某种控制器来管理片段和一个“桥”来填充活动的事件，但这似乎没问题。

可以在内存中保留多个片段（每个片段都包含一个 webview）吗？我需要保留 webview 及其内容，但片段仅在这种情况下用作容器。

仍然对一些意见或建议持开放态度。

再次感谢你的帮助。

# java - 如何从 Sprites(AndEngine) 创建边界

> ID：13675807
> 
> 赞同：-1
> 
> 时间：2012-12-03T01:08:22.627
> 
> 标签：java, android, andengine

所以我有对我的角色来说应该是不可行走的精灵。

问题是我不确定如何做到这一点。

这是我正在尝试的。当从关卡加载精灵时，我将精灵添加到链接列表中。

然后我遍历列表以检测角色是否与任何不可行走的精灵/瓷砖发生碰撞。

我在大约每秒运行的引擎更新线程上执行此操作。

这是我这样做的方法：

```
mScene.registerUpdateHandler(new IUpdateHandler(){

        @Override
        public void onUpdate(float pSecondsElapsed) {

            Iterator<Sprite> wall_collision = unwalkable_Sprites.iterator();

            while(wall_collision.hasNext()){
                Sprite sprite = wall_collision.next();

                if(character_sprite.collidesWith(sprite)){

                }
            }

        }

        @Override
        public void reset() {
            // TODO Auto-generated method stub

        }

    }); 
```

所以问题是当角色与不可行走的瓷砖碰撞时我如何定位角色，这样角色甚至不会越过瓷砖......对用户来说，它应该看起来像一个边界。

有没有人有任何建议或知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:52:06.010

看看这个[例子](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/PhysicsExample.java)

使用与示例中的“地面”相同的代码为您不可行走的瓷砖。你应该使用静态体：

```
this.mPhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false);
final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(0, 0.5f, 0.5f); 
```

在这里，您可以使用 Shape 作为示例或例如 Sprite

`//final Shape yourTile = new Rectangle(0, CAMERA_HEIGHT - 2, CAMERA_WIDTH, 2); Sprite yourTile = new Sprite(...); PhysicsFactory.createBoxBody(this.mPhysicsWorld, yourTile, BodyType.StaticBody, wallFixtureDef);`

在这里你可以找到[AndEngine](https://github.com/nicolasgramlich/AndEnginePhysicsBox2DExtension)的 box2dExtension（它需要使用 Bodies）

对不起我的英语:) 希望这会对你有所帮助。

PS，您不再需要检查此问题的碰撞。

# javascript - 如何在外部javascript函数中制作jquery load()？

> ID：13675813
> 
> 赞同：1
> 
> 时间：2012-12-03T01:09:02.873
> 
> 标签：javascript, jquery

我正在尝试用 javascript 创建自己的工具，这将帮助我将一些 php 函数/文件加载到我的 div 中。

这是我的javascript：

```
$(document).ready(function () {
    $('.btn').click(function() {        
        $('#someid').testit();
        //   $('#someid').load('somefile');  it works
        return false;
    })   
});

function testit() { 
    $(this).load('somefile');
} 
```

还有我的html：

```
<div id="someid"></div>
<form>
    <input type="submit" value="test" class="btn" />
</form> 
```

我无法从外部函数加载资源 - 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:19:30.317

如果你想调用类似的东西：

```
$('#someid').testit(); 
```

然后，您必须创建一个定义方法的 jQuery 插件`testit`。该代码看起来像这样：

```
jQuery.fn.testit = function() {
    return this.load('somefile');
} 
```

然后，只有这样你才能`testit()`像这样使用 jQuery 方法：

```
$('#someid').testit(); 
```

并且，它将在所需的选择器上运行。

这是一些关于编写这样的插件方法的[jQuery 文档。](http://docs.jquery.com/Plugins/Authoring)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:20:37.477

您需要执行以下操作：

```
$.fn.testit = function () {
  return this.load('somefile');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T01:23:26.200

不幸的是，你不能开箱即用地链接这样的函数，你必须将它放入 jquery.fn 原型中才能制作插件。

你可以做的是使用`.each()`选择器上的函数来调用你的函数。

在您的情况下，如果您要调用`$("#someid").each(testit);`jquery，则会在找到的每个元素上调用 testit() 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T01:24:18.260

你可以像这样传递元素......

```
$(document).ready(function () {
    $('.btn').click(function() {        
        testit($('#someid'));
        return false;
    })   
});

function testit(el) { 
    el.load('somefile');
} 
```

或者创建一个 JQuery 插件作为 jfriend00 提及

# performance - 将程序的实际运行时间缩放到理论运行时间

> ID：13675816
> 
> 赞同：0
> 
> 时间：2012-12-03T01:09:16.997
> 
> 标签：performance, big-o, theory

我已经获得了不同输入大小的程序运行时间（CPU 时间）（以秒为单位），我想构建一个图表来显示 CPU 时间和理论运行时间（例如`O(n³)`）。

我应该如何扩展 CPU 时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:10:46.820

CPU 时间和 BigO 表示法是两个不同的东西，因此不应将它们进行比较。

BigO 表示法背后的想法是，它为您提供了一种独立于平台的方法来衡量算法的效率。根据 CPU 的速度、负载等，不同的算法将在不同的时间在不同的 CPU 上运行。因此，CPU 不是一个好的指标。任何算法的问题是它是否尽可能高效地编写。

这就是 BigO 表示法的用武之地。它衡量完成任务所需的操作数量，因此与平台无关。如果您减少完成一项任务所需的操作数量，那么——在其他条件相同的情况下——无论平台如何，您都将提高效率。

因此，计算程序中的操作数并从中推导出 BigO 复杂度。然后你可以根据理论来衡量它。

# flash - Adobe Flash - 选择舞台的特定部分并在物体到达时播放声音

> ID：13675817
> 
> 赞同：0
> 
> 时间：2012-12-03T01:09:21.797
> 
> 标签：flash, select, actionscript, if-statement, adobe

这是问题所在。我对 Flash 有点陌生，但有一些知识，所以我正在尝试创建一个小足球游戏。我有球，控制，舞台（足球场）问题是我想指定舞台的一部分，所以如果我的球进入它会播放一个尖叫“进球！！！”的声音文件 每次球进入拱门......舞台是 800 x 600。

关于我将如何实现这一点的任何想法？任何帮助是极大的赞赏。谢谢！

这是我的代码：

```
 `import flash.display.*;
import flash.events.*;

var begin = new Begin();
var pelota = new Pelota();
var field = new SoccerField();

//Calling methods game
beginGame();

//creating the welcome screen
function beginGame(){
    begin.x = 0;
    begin.y = 0;
    addChild(begin);

    pelota.x = 400;
    pelota.y = 425;
    addChild(pelota);

}

pelota.addEventListener(MouseEvent.CLICK, startGame);

function startGame(event:Event) : void{
    field.x = 400;
    field.y = 300;
    addChild(field);

    pelota.x = 400;
    pelota.y = 300;
    pelota.scaleX = .2;
    pelota.scaleY = .2;
    addChild(pelota);
}

stage.addEventListener(KeyboardEvent.KEY_DOWN, control);

function control (evt:KeyboardEvent) : void 
{
    trace(evt.keyCode);

    if (evt.keyCode == Keyboard.LEFT) 
    {
        pelota.x=pelota.x-5;
        trace('Left!');
    }
    if (evt.keyCode == Keyboard.RIGHT) 
    {
        pelota.x=pelota.x+5;
    } 
    if (evt.keyCode == Keyboard.UP) 
    {
        pelota.y=pelota.y-5;
    } 
    if (evt.keyCode == Keyboard.DOWN) 
    {
        pelota.y=pelota.y+5;

    }
}

<pre><code>` 

            回答 #1

赞同：0

时间：2012-12-03T03:40:12.327

Two ways off the top of my head you could do this (I guessing the goal area is roughly a rectangle shape):

1.) Create the ball and goal as a movie clip/display object then simply do a hitTestObject () method call to check if they 'touch' each other. The actual 'trigger' area of the goal can be smaller then the visual area so that the ball only can touch it if it is visually all the way inside the goal.

2.) This is a circle vs. rectangle collision detection. You could solve the problem through pure math calculations. You should be able to find the actual algorithm by searching and isn't too difficult to write, especially if the goal-rectangle is axis aligned (at 0 or 90 degrees to the stage).

The second method will work faster and probably be more accurate, though the first can be a quick and dirty way of just getting it to work first. Both methods can just return a boolean that when true, you would play the sound. For playing the sound, look up the Sound{} class.

```

# javascript - Javascript - 评估对象创建？

> ID：13675819
> 
> 赞同：3
> 
> 时间：2012-12-03T01:09:24.433
> 
> 标签：javascript, object, eval, duck-typing

我对 JavaScript 还是很陌生（虽然不是编码），所以请随意为我挑选和白痴映射一些东西。

我试图创建一些可以接受用户输入的东西。如果第一个字符是感叹号，它将尝试使用该名称创建一个对象并运行该对象的“action”方法。否则它会像普通文本一样对待它（现在是一个警报）

```
<script type="text/javascript">
function GetInput(input){

    // Trim the spaces off the beginning and end
    input = input.trim();

    if(input.charAt(0) != "!"){
        // Just some normal text
        alert(input);

        return true;
    }

/* Cut off the exclamation point, replace multiple spaces with one,
 * and get the arguments if any. args[0] = the command. */

    var args = input.substr(1).replace(/\s{2,}/g, " ").split(" ");

// Make sure the function is an object with a method named "action"
    if(eval("typeof "+args[0]+";") === "function"
        && eval("typeof "+args[0]+".prototype.action;") === "function"){

        eval("var command = new "+args[0]+"();");

        command.action(args);
    }else{
        alert('"'+args[0]+'" is not a command.');
    }

    return true;
}
</script> 
```

到目前为止，我注意到的唯一问题是 eval 语句。我知道我可以同时使用 switch/case 并抛弃 eval，甚至可以创建一个包含允许函数名称的数组，并在 eval 之前将输入与该数组进行比较，但我确信一定有更好的方法.

我只想能够制作对象和方法而不更新任何东西（我相信这是鸭子打字的主要用途之一？）。没有评估这可能吗？如果没有，是否有一种简单的方法来清理字符串的输入以避免诸如“！`eval(alert('u b haxed'))`”或“！`a;alert('u b haxed')`”之类的事情？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T01:23:31.250

您应该`eval`只使用一次来获取函数，然后在变量中使用它执行所有操作。

```
var args = input.substr(1).split(/\s+/);
var fn = eval(args[0]);
if (typeof fn == 'function' && typeof fn.prototype.action == 'function') {
    var command = new fn();
    command.action(args);
} else {
    alert('"'+args[0]+'" could not be evaluated to a valid command.');
}

return true; 
```

如果这些构造函数是全局变量，您也可以将它们作为`window`对象的属性进行访问：

```
var fn = window[ args[0] ]; 
```

# android - Android 警报对话框生成器

> ID：13675822
> 
> 赞同：6
> 
> 时间：2012-12-03T01:09:59.890
> 
> 标签：android, android-alertdialog, builder

我有一个显示的警报对话框，但无论我做什么，警报对话框都会显示一个空白的标题和消息。图标、正按钮和负按钮显示正确，说明正确。这是我使用的代码片段： 在清单文件中：

```
<uses-sdk
android:minSdkVersion="5"
android:targetSdkVersion="16" /> 
```

在我的代码中，我声明：

```
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface; 
```

我还声明了上下文：

```
final Context context = this; 
```

我将警报放在：

```
public void confirm() {

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);

        // set title

        alertDialogBuilder.setTitle("This is title");
        alertDialogBuilder.setIcon(R.drawable.ic_delete);

        // set dialog message
        alertDialogBuilder
        .setMessage("This is the message")
            .setCancelable(false)
            .setPositiveButton(R.string.yes,new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close
                    // current activity
                    MainActivity.this.finish();
                }
              })
            .setNegativeButton(R.string.no,new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

    // show it
            alertDialog.show();

} 
```

然后我从我需要的地方调用确认，如下所示：

```
confirm(); 
```

警报显示正常。图标已设置 setPositiveButton 很好，包含正确的描述 setNegativeButton 很好，包含正确的描述

标题为空 消息为空

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-29T02:15:59.233

你可以使用

```
 AlertDialog.Builder builder = new AlertDialog.Builder(YourActivity.this);
        builder.setTitle("Modify Customer Details"); 
```

或者

```
 Dialog dialog = new Dialog(YourActivity.this);
        dialog.setTitle("Payment Options"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:21:35.527

Try setting the message and title this way. This from the [developer's guide on Dialogs](http://developer.android.com/guide/topics/ui/dialogs.html)

// 1\. Instantiate an AlertDialog.Builder with its constructor

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity()); 
```

// 2\. Chain together various setter methods to set the dialog characteristics

```
builder.setMessage(R.string.dialog_message)
       .setTitle(R.string.dialog_title); 
```

// 3\. Get the `AlertDialog` from `create()`

```
AlertDialog dialog = builder.create(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:28:54.347

它与您在上下文（“this”）中的主题相关。您需要检查此上下文。或者你应该膨胀你自己的视图，然后调用 setView 把它放进去。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-02T08:03:48.453

请将`alertDialog`创建行更改为：

```
AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this, android.R.style.Theme_Material_Light_Dialog_Alert); 
```

# c# - 如何在多台计算机上运行 C# .exe 文件？

> ID：13675826
> 
> 赞同：6
> 
> 时间：2012-12-03T01:10:45.337
> 
> 标签：c#, exe

我已经`Microsoft Visual Studio 2010`安装在我的电脑上。我使用 C# 编写了一个程序，它在`Debug`目录中创建了一个 .exe 文件。当我双击 .exe 文件时，我可以在我的机器上打开它。但是，如果我复制该 .exe 文件并尝试在另一台计算机上运行它，（没有`Microsoft Visual Studio`）它就不起作用。您能告诉我如何使 .exe 文件在任何计算机上工作吗？或者，如果您知道一个解释它的网站。我很久以前就使用 Winzip 完成了这项工作，并将所有库文件单独包含在 .ext 文件中。但不记得我是怎么做到的了。有谁知道如何将我的所有库文件单独包含在 .exe 文件中。所以我可以在没有这些库文件的计算机上运行它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T01:50:16.083

使用 VS2010 编译的程序可以针对各种 .NET 框架。但是，许多版本的 Windows 并不总是安装最新的 .NET 版本。

通过查看项目属性的“**应用程序**”选项卡，检查程序使用的 .NET Framework 版本。您应该会看到一个**目标框架**下拉列表，它会告诉您其他计算机需要安装哪个版本的框架才能运行您的程序。

您有几个选项可以让您的程序在其他计算机上运行。

1.  使用不同的较低框架编译程序。（*例如*.NET 2 通常在 Windows XP 上可用，而 .NET 4 在此操作系统上并不常见。）这只有在您不使用更高版本的 .NET 的任何功能时才有效。
2.  Install the .NET framework you require on the client machine. Microsoft provides frameworks to download and install from [http://www.microsoft.com/net/download](http://www.microsoft.com/net/download)
3.  Try creating a Windows Installer using the *Setup Project* template. Add a new project to your solution from the *Setup and Deployment* category. After setting up this project, you should have an installer to run on other machines.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:13:11.150

您必须在要运行应用程序的计算机上安装适当版本的 .NET Framework。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:29:31.727

这是你需要做的事情。

1.  检查您的计算机的操作系统版本。如果是 Windows XP，请检查它是否具有 .net framework 3.5 或 4.0。您可以在此处下载[Microsoft .NET Framework 3.5](http://www.microsoft.com/en-us/download/details.aspx?id=21)

2.  尝试进行设置和部署。

    [创建设置和部署项目的分步过程](http://aspalliance.com/622_StepbyStep_Process_of_Creating_a_Setup_and_Deployment_Project)

最好的祝福

# android - 在 MultiAutoCompleteTextView 上应用样式

> ID：13675827
> 
> 赞同：0
> 
> 时间：2012-12-03T01:10:51.740
> 
> 标签：android, android-layout

我正在尝试在 MultiAutocompleteTextView 上应用一种样式，但似乎没有应用该样式。

在 style.xml 我有以下内容（仅显示一部分）：

```
<style name="AppTheme" parent="android:Theme.Light">
    <item name="android:buttonStyle">@style/Button</item>
    <item name="android:imageButtonStyle">@style/ImageButton</item>
    <item name="android:editTextStyle">@style/Edit</item>
    <item name="android:autoCompleteTextViewStyle">@style/AutoCompleteTextView</item>
    <!-- In the line above I tried to set "android:multiAutoCompleteTextViewStyle" but that doesn't seem to work. My guess is that it is because MultiAutoCompleteTextView is a subclass of AutoCompleteTextView -->
</style>

...

<style name="AutoCompleteTextView" parent="@android:style/Widget.AutoCompleteTextView">
    <item name="android:completionHintView">@layout/completion_hint</item>
    <item name="android:background">@drawable/edit</item>
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_marginBottom">5dp</item>
    <item name="android:layout_marginLeft">5dp</item>
    <item name="android:layout_marginRight">5dp</item>
    <item name="android:layout_marginTop">5dp</item>
    <item name="android:ems">10</item>
    <item name="android:gravity">top</item>
    <item name="android:lines">1</item>
    <item name="android:singleLine">true</item>
    <item name="android:textColor">@color/black</item>
</style>` 
```

在我的布局文件中，我有以下内容：

```
<MultiAutoCompleteTextView
    android:id="@+id/multiAutoCompleteTextView1"
    android:visibility="gone" /> 
```

由于主题应用于整个应用程序，因此它也应该应用于 MultiAutocompleteTextView。但是当我尝试执行应用程序时，出现以下错误：

```
12-03 02:00:34.398: E/AndroidRuntime(591): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.myapp/com.example.myapp.MyActivity}: java.lang.RuntimeException: Binary XML file line #37: You must supply a layout_width attribute. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:35:32.643

重写主题或样式时，只能重写样式声明的指定属性。layout_* attr 未在 Widget.AutoCompleteTextView 中声明，您应该为您指定的视图放置 layout_*

# java - 需要帮忙。我需要根据Referer引导传入流量

> ID：13675836
> 
> 赞同：0
> 
> 时间：2012-12-03T01:12:56.393
> 
> 标签：java, javascript, referer

所以这是交易。

我有一个公共页面，我不能仅限于成员，我需要检查传入的引用 URL，如果来自正确的域，则路由流量。所有其他流量，将被路由到场外登录页面。

两家公司之间的电子商务促销，我只想允许那些从批准的网址进来的人。

我会尝试使用 robots.txt 执行此操作，但在这种情况下，我无权访问该文件（感谢我使用的 CMS）。

我几乎被迫用 Java 来做这件事。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:31:47.807

页面 Javascript 中的引用是一种非常不安全的做事方式 - 首先它将是世界可读的。如果安全性不是主要问题，但您想要比 JS 更好的东西，我会前往 Web 服务器并在 .htaccess 或等效[问题 #10171698中执行此操作](https://stackoverflow.com/questions/10171698/htaccess-redirect-based-on-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:17:02.027

从 Java 中使用`String referer = request.getHeader("referer");`where request 是 type 的实例`javax.servlet.http.HttpServletRequest`。

正如其他人所指出的，欺骗引用者是微不足道的，不应该是您唯一的安全形式。

# java - 为字符串生成删除、插入、替换、转位

> ID：13675839
> 
> 赞同：1
> 
> 时间：2012-12-03T01:13:26.663
> 
> 标签：java, algorithm

我正在实施拼写检查算法。我已经构建了一个`Trie`存储我的单词的快速搜索。

当传递给定的输入字符串时，我想做的是为该字符串生成潜在的删除、插入、替换和转置，编辑距离为 1。使用这个超集，我可以尝试在 my 中找到单词`Trie`并提供给用户“你的意思是？” 键入结果。

我在网上看过，大多数解决方案都提到了计算莱文斯坦距离。仅当您已经知道这两个字符串并且想要找到两者之间的编辑距离时，这才有效。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:39:16.023

我会使用 2 pass 算法：

通过 1

查找并计算所有以与要拼写检查的单词相同的字母开头的单词的距离。这会很快。当字符数大于拼写单词长度 + 2（那么这显然是另一个单词）时，您可以停止深度搜索
显示 pass1 的结果，例如将单词标记为红色下划线

Pass 2

查找所有单词并在 length + 3 或 4 时停止更新在 pass 1 中找到的结果

# twitter-bootstrap - AngularJS 模板运行两次

> ID：13675842
> 
> 赞同：2
> 
> 时间：2012-12-03T01:13:52.360
> 
> 标签：twitter-bootstrap, controller, angularjs

我正在使用 Twitter Bootstrap 开发 AngularJS 网络应用程序。模板和控制器运行两次。我不知道他们为什么这样做。

下面是 index.html 文件中的一些代码：

```
<html data-ng-app="app" ng-controller="AppCtrl">    
<div class="container ng-view" data-ng-view></div>

...

<script>
(function (angular) {
"use strict"; // jshint ;_;
// http://coenraets.org/blog/2012/02/sample-application-with-angular-js/
angular.module('app', ['filters', 'angular', 'currency'])
.config(function($routeProvider) {
    var _view_ = 'view/';
    $routeProvider.
        when('/app',                {templateUrl:_view_+'app/index.html',       }).
        when('/account/settings',   {templateUrl:_view_+'app/settings.html',    }).
        when('/profile/:profile_ID', {templateUrl:_view_+'app/profile.html',    controller:ProfilePageCtrl}).
        when('/discuss',            {templateUrl:_view_+'discuss/discuss.html',     controller:DiscussCtrl}).
        when('/',                   {templateUrl:_view_+'page/home.html'        }).
        when('/:page',              {templateUrl:_view_+'page.html',            controller:PageCtrl}).
        otherwise({redirectTo:'/'});
})
... 
```

有人可以提供建议吗？模板和控制器是否应该运行两次？

2012-12-04 更新：我发现模板运行了两次，不管它们是否有控制器。如果模板有控制器，控制器也会运行两次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T14:51:31.413

代替

```
<div class="container ng-view" data-ng-view></div> 
```

和

```
<div class="container ng-view"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:54:27.107

我遇到了类似的问题：我的控制器被调用了两次，我只是在 中声明它们`$routeProvider`，根本没有使用`ng-controller`。事实证明，我正在使用以下方式链接到页面：

```
<a href='#somepage'> 
```

代替

```
<a href='#/somepage'> 
```

当我重写我的链接以`#/`在一开始使用时，它起作用了。我猜 Angular 是“重定向”`#somepage`到`#/somepage`，但两次都调用了控制器。

我看到您已经`#/`在链接的开头使用了，但`<base href="/ ">`顶部也有一个（并且那里也有一个尾随空格）。也许这会让 Angular 感到困惑，它会触发一些不希望的重定向？

# php - WordPress 表格

> ID：13675847
> 
> 赞同：0
> 
> 时间：2012-12-03T01:15:02.427
> 
> 标签：php, wordpress

我想知道是否有可能编写一个从外部服务器提交表单并将提交作为博客文章添加到 wordpress 的 php 文件。该文件应返回一个 post-> ID。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:08:47.647

如果您想在远程服务器上处理表单，您可以通过 XMLRPC 远程将提交添加到 WordPress。

一个例子如下：

```
<?php

class XMLRPClientWordPress
{

    var $XMLRPCURL = "";
    var $UserName  = "";
    var $PassWord = "";

    // constructor
    public function __construct($xmlrpcurl, $username, $password) 
    {
        $this->XMLRPCURL = $xmlrpcurl;
        $this->UserName  = $username;
        $this->PassWord = $password;

    }
    function send_request($requestname, $params) 
    {
        $request = xmlrpc_encode_request($requestname, $params);
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
        curl_setopt($ch, CURLOPT_URL, $this->XMLRPCURL);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_TIMEOUT, 1);
        $results = curl_exec($ch);
        curl_close($ch);
        return $results;
    }

    function create_post($title,$body,$category,$keywords='',$encoding='UTF-8')
    {
        $title = htmlentities($title,ENT_NOQUOTES,$encoding);
        $keywords = htmlentities($keywords,ENT_NOQUOTES,$encoding);

        $content = array(
            'title'=>$title,
            'description'=>$body,
            'mt_allow_comments'=>0,  // 1 to allow comments
            'mt_allow_pings'=>0,  // 1 to allow trackbacks
            'post_type'=>'post',
            'mt_keywords'=>$keywords,
            'categories'=>array($category)
        );
        $params = array(0,$this->UserName,$this->PassWord,$content,true);

        return $this->send_request('metaWeblog.newPost',$params);

    }

    function create_page($title,$body,$encoding='UTF-8')
    {
        $title = htmlentities($title,ENT_NOQUOTES,$encoding);

        $content = array(
            'title'=>$title,
            'description'=>$body
        );
        $params = array(0,$this->UserName,$this->PassWord,$content,true);

        return $this->send_request('wp.newPage',$params);
    }

    function display_authors()
    {
        $params = array(0,$this->UserName,$this->PassWord);
        return $this->send_request('wp.getAuthors',$params);
    }

    function sayHello()
    {
        $params = array();
        return $this->send_request('demo.sayHello',$params);
    }

}

if(trim($_POST['subject'])=='' || trim($_POST['content'])==''){
    die('All fields are required.');
}

$xmlrpc = new XMLRPClientWordPress("http://yoursite.com/xmlrpc.php" , "username" , "password");

$xmlrpc->create_post( mb_convert_encoding(stripslashes($_POST['subject']), 'HTML-ENTITIES', 'UTF-8'), mb_convert_encoding(htmlentities(stripslashes($_POST['content']), ENT_COMPAT, 'UTF-8'), 'HTML-ENTITIES', 'UTF-8'), 1);

echo 'Post successful!';

?> 
```

# macos - 在实施 SharePoint 2010 Intranet 站点时，您希望在 MAC 上适应 Safari 和 Firefox 用户的偏好是什么？

> ID：13675850
> 
> 赞同：2
> 
> 时间：2012-12-03T01:15:20.217
> 
> 标签：macos, sharepoint, firefox

在实施 Intranet SharePoint 2010 站点以最大限度地提高 MAC 上的用户采用率时，您希望在 MAC 上容纳 Safari 和 Firefox 用户吗？请参阅下面的选项

具有以下偏好 a) 使用 AS IS Intranet 区域并与 MAC 用户通信以使用 Safari b) 您是否考虑将 Intranet 区域扩展到匿名访问以接受缺点 c) 其他

请让我知道您的首选策略/解决方案或您自己的 SP 2010 Intranet 实施项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:08:28.697

我不确定您为什么要匿名，用户是外部的、非员工的，而不是 Active Directory 用户吗？如果没有，请不要匿名。

SharePoint 2010 将 Mac 用户视为二等公民，这是一种不错的体验，但无法与 Windows 上的 IE 相比。定制设计可以在一定程度上提高 Mac 的可用性。某些功能，例如数据表视图，需要 IE 来安装 ActiveX 控件。查看我的博客文章，了解有关浏览器支持的更多详细信息：http: [//davidlozzi.com/2012/04/17/sharepoint-browser-support-all-latest-browsers-supported-really/](http://davidlozzi.com/2012/04/17/sharepoint-browser-support-all-latest-browsers-supported-really/)。虽然针对的是 Windows 上的浏览​​器，但我敢打赌你会在 Mac 上看到相同的内容。

SharePoint 2013 非常努力地与 Mac（和其他浏览器）配合使用。也许你应该升级:-p。

# iphone - 如何找出使用的 SEL 名称

> ID：13675856
> 
> 赞同：0
> 
> 时间：2012-12-03T01:15:47.957
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我只是好奇是否有办法动态提取 SEL 名称？

不确定如何提取 SEL，因为它是 typedef 结构。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T01:19:19.460

请详细说明。但是，我相信您正在尝试将 a 转换`SEL`为`NSString`. 如果是这种情况，那么您正在寻找的是：

```
NSString *selectorName = NSStringFromSelector(selector); 
```

# php - 在 PHP 中正确转义 SSH 命令

> ID：13675857
> 
> 赞同：0
> 
> 时间：2012-12-03T01:15:56.363
> 
> 标签：php, shell, ssh, escaping, libssh2

我有一个 SSH 命令，我想在 PHP 中使用 libssh2 执行：

```
sh -c '
  rm -f /tmp/command.log
  sleep 3 &
  screen -p 0 -X stuff "\
script -a -c \"ls -l\" /tmp/command.log; kill -USR1 $!
"
  wait
  cat /tmp/command.log
' 
```

不过，我似乎无法正确地转义它，所以 SSH 完全按照上面的方式接收它。我需要将它用双引号括起来，这样我也可以在其中获取 PHP 变量（ls -l 将变为 $command）。

我努力了：

```
"sh -c '
  rm -f /tmp/command.log
  sleep 3 &
  screen -p 0 -X stuff \"\
script -a -c \\"ls -l\\" /tmp/command.log; kill -USR1 $!
\"
  wait
  cat /tmp/command.log
'" 
```

也：

```
"sh -c '
  rm -f /tmp/command.log
  sleep 3 &
  screen -p 0 -X stuff \"\
script -a -c \\\"ls -l\\\" /tmp/command.log; kill -USR1 $!
\"
  wait
  cat /tmp/command.log
'" 
```

第一个返回 PHP 错误，第二个不运行命令。

整个功能（在摩根王尔德建议的编辑之后）：

```
 function runShellCommand($command, $host, $user, $pass, $port){
        if (!function_exists("ssh2_connect")) die("Fail: function ssh2_connect doesn't exist");
        if(!($con = ssh2_connect($host, $port))){
            return "Unable to establish connection. Is your server offline?";
        } else {
            if(!ssh2_auth_password($con, $user, $pass)) {
                return "Failed to authenticate. Please ensure your server's password matches our records.";
            } else {
                $run = <<<HEREDOC
sh -c '
rm -f /tmp/command.log
sleep 3 &
screen -p 0 -X stuff "\
script -a -c \"touch /root/test234\" /tmp/command.log; kill -USR1 $!
"
wait
cat /tmp/command.log
'
HEREDOC;
                if (!($stream = ssh2_exec($con,  $run ))) {
                    return "Could not run command.";
                } else {
                    stream_set_blocking($stream, true);
                    $data = "";
                    while ($buf = fread($stream,4096)) {
                        $data .= $buf;
                    }
                    fclose($stream);
                    if(empty($data)){
                        return "sh-4.1# $command\n\n";
                    } else {
                        return "sh-4.1# $command\n$data\n";
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:22:25.047

How about using the `HEREDOC` string quoting? I haven't tried it, but it works for other use cases.

```
$command = <<<HEREDOC
sh -c '
rm -f /tmp/command.log
sleep 3 &
screen -p 0 -X stuff "\
script -a -c \"ls -l\" /tmp/command.log; kill -USR1 $!
"
wait
cat /tmp/command.log
'
HEREDOC; 
```

More on that here - [http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:51:21.953

试试[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)。例如。

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

echo $ssh->read('username@username:~$');
$ssh->write("rm -f /tmp/command.log\n");
echo $ssh->read('username@username:~$');
$ssh->write("sleep 3 &\n");
echo $ssh->read('username@username:~$');
$ssh->write("screen -p 0 -X stuff \"\
script -a -c \\\"ls -l\\\" /tmp/command.log; kill -USR1 $!
\"");
...
?> 
```

# ios - 更改 UIBarButtonItem 标题不可能？

> ID：13675859
> 
> 赞同：1
> 
> 时间：2012-12-03T01:16:35.973
> 
> 标签：ios, xcode, ipad, title, uibarbuttonitem

愚蠢的事情，如果满足 for 循环中的某个条件，我正在尝试更改 UIBarButtonItem 上的标题。但是我遇到了麻烦。

我试过了

```
self.barButtonItem.title=@"NewTitle" 
```

和

```
[self.barButtonItem setTitle:@"New Title"]; 
```

之后我什至在视图上做了一个 setNeedsDisplay ，但没有任何运气。顺便说一句，是的，我从 self.navigationBar.items 中获取旧的按钮数组，删除旧按钮并设置新按钮。

如果我改变屏幕方向（翻转 ipad），按钮标题会改变。但除此之外，它保持不变。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-16T16:03:32.363

**问题**

如果您浏览文档，苹果会说：

“您应该在将项目添加到栏之前设置此属性。”

是因为，

```
cancel_btn.title = "something"  // It does not work ! 
```

因为您已经将项目设置为栏。

**解决方案**

```
//
let theTitle = "something"

//
self.navigationItem.leftBarButtonItem = UIBarButtonItem(title: theTitle, style: 
UIBarButtonItemStyle.plain, target: self, action: 
#selector(cancelAction)) 
```

现在你在将项目添加到栏之前设置标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:33:43.820

我为此利用了 的`possibleTitles`属性`UIBarButtonItem`。

创建按钮时试试这个：

```
self.barButtonItem = [[UIBarButtonItem alloc] init...];
self.barButtonItem.possibleTitles = [NSSet setWithObjects:@"Title 1", @"Title 2", nil]; 
```

然后，要更改标题，请执行以下操作：

```
self.barButtonItem.title = @"Title X"; // must be one of the possibleTitles 
```

# wordpress - Galleria 脚本在 IE/Firefox 中不起作用

> ID：13675864
> 
> 赞同：-1
> 
> 时间：2012-12-03T01:17:24.203
> 
> 标签：wordpress, galleria

textafwewaefweweawefweawefwaefwaefawefawe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:09:22.723

当谈到 JS 时，我们都知道 IE 非常挑剔，而 FF 可能也是如此——Chrome 倾向于容忍小东西，但在某种 JS Linter 中仔细查看您的代码总是值得的为了安全。通过 linter 运行脚本表明您在代码的第 33 行缺少分号。您指出我们的两个网站都有同样的问题，所以我不确定它会解决您的问题，但它不会受到伤害，对吧？

尝试使用它，看看它是否有帮助：

```
$(document).ready(function(){
    $('.gallery_demo_unstyled').addClass('gallery_demo'); // adds new class name to maintain degradability
    $('ul.gallery_demo').galleria({
        history   : true, // activates the history object for bookmarking, back-button etc.
        clickNext : true, // helper for making the image clickable
        insert    : '#main_image', // the containing selector for our main image
        onImage   : function(image,caption,thumb) { // let's add some image effects for demonstration purposes
            // fade in the image and caption
            if(! ($.browser.mozilla && navigator.appVersion.indexOf("Win")!=-1) ) { // FF/Win fades large images terribly slow
                image.css('display','none').fadeIn(1000);
            }
            caption.css('display','none').fadeIn(1000);
            // fetch the thumbnail container
            var _li = thumb.parents('li');
            // fade out inactive thumbnail
            _li.siblings().children('img.selected').fadeTo(500,0.3);
            // fade in active thumbnail
            thumb.fadeTo('fast',1).addClass('selected');
            // add a title for the clickable image
            image.attr('title','Next image >>');
        },
        onThumb : function(thumb) { // thumbnail effects goes here
            // fetch the thumbnail container
            var _li = thumb.parents('li');
            // if thumbnail is active, fade all the way.
            var _fadeTo = _li.is('.active') ? '1' : '0.3';
            // fade in the thumbnail when finnished loading
            thumb.css({display:'none',opacity:_fadeTo}).fadeIn(1500);
            // hover effects
            thumb.hover(
                function() { thumb.fadeTo('fast',1); },
                function() { _li.not('.active').children('img').fadeTo('fast',0.3); } // don't fade out if the parent is active
            ); // <-- Added semicolon
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:49:35.667

您网站中的第一件事是包含两个 jquery 文件，请删除“jquery.min.js”文件。

和

转到headre.php 文件并在下面找到包含“jquery.galleria.js”的wp_head() 函数。

“jquery.galleria.js”文件包括以下来自“jquery.js?ver=1.7.2”文件。

# html - CSS3 动画关键帧需要帮助

> ID：13675865
> 
> 赞同：1
> 
> 时间：2012-12-03T01:17:52.513
> 
> 标签：html, css, css-animations

你可以在这里看到我到目前为止所拥有的：http: [//codepen.io/joe/pen/mkjxi](http://codepen.io/joe/pen/mkjxi)

我的目标是让文本行以交错的方式出现，给网站的主页一个很好的效果。

我的问题是文本的底部 3 行最终恢复为白色。我将文本从白色转换为黑色的原因只是因为我无法获得 display:none 或 visibility:hidden; 使用关键帧...

任何帮助是极大的赞赏！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:16:50.000

诀窍是利用`forwards`动画速记属性中的值。这会更改填充模式并在动画运行后保持最后一个关键帧可见。

此外，没有必要使用单独的动画，你可以只用一个。方法如下：

```
<!-- HTML -->

<div class="text1">Expert Electricians.</div>
<div class="text2">Serving all of Los Angeles,</div>
<div class="text3">Ventura and Orange Counties</div>
<div class="text4">For over 20 years</div> 
```

## ​</h2>

```
/* CSS */

div {
    color: #fff;
    text-transform:uppercase;
}
.text1 {
    -webkit-animation:text 2s .5s forwards;
       -moz-animation:text 2s .5s forwards;
         -o-animation:text 2s .5s forwards;
            animation:text 2s .5s forwards;
}
.text2 {

    -webkit-animation:text 2s 1s forwards;
       -moz-animation:text 2s 1s forwards;
         -o-animation:text 2s 1s forwards;
            animation:text 2s 1s forwards;
}
.text3 {

    -webkit-animation:text 2s 1.5s forwards;
       -moz-animation:text 2s 1.5s forwards;
         -o-animation:text 2s 1.5s forwards;
            animation:text 2s 1.5s forwards;
}
.text4 {

    -webkit-animation:text 2s 2s forwards;
       -moz-animation:text 2s 2s forwards;
         -o-animation:text 2s 2s forwards;
            animation:text 2s 2s forwards;
}

@-webkit-keyframes text {
    100%  {color:#000;}
}
@-moz-keyframes text {
    100%  {color:#000;}
}
@-o-keyframes text {
    100%  {color:#000;}
}
@keyframes text {
    100%  {color:#000;}
}​ 
```

这是一个活生生的例子：http: [//jsfiddle.net/joshnh/2Sp48/](http://jsfiddle.net/joshnh/2Sp48/)

# sql - 具有starts_on 和ends_on 最佳查询建议的对象

> ID：13675867
> 
> 赞同：0
> 
> 时间：2012-12-03T01:18:25.817
> 
> 标签：sql, postgresql, datetime, date-range

我需要从具有`starts_on`字段和`ends_on`字段的表中进行选择。
我需要传递开始日期和结束日期来过滤和检索这些对象。

目前它正在工作，我使用以下内容：

```
SELECT * FROM ***
WHERE ((starts_on >= START_DATE AND starts_on <= END_DATE) OR
       (ends_on >= START_DATE AND ends_on <= END_DATE) OR
       (starts_on <= END_DATE AND ends_on >= END_DATE))
ORDER BY starts_on, id 
```

它看起来有点凌乱，但看不到简化它的简单方法。任何的想法？
我使用 postgres 9.1 作为 dbms。

编辑：

```
 starts_on   | timestamp without time zone | 
 ends_on     | timestamp without time zone | 
```

例如：如果一个条目有 starts_on = '2012/02/02' 和 ends_on '2012/02/05' 我想要以下行为：

*   如果我按开始日期 2012/01/01 和结束日期 2012/03/01 过滤，我希望退回该项目
*   如果我按开始日期 2012/02/04 和结束日期 2012/03/01 过滤，我希望退回该项目
*   如果我按开始日期 2012/02/05 和结束日期 2012/03/01 过滤，我希望退回该项目
*   如果我按开始日期 2012/02/04 和结束日期 2012/02/04 过滤，我希望退回该项目
*   如果我按开始日期 2012/02/06 和结束日期 2012/03/01 过滤，我希望不退回该项目
*   如果我按开始日期 2012/01/01 和结束日期 2012/02/01 过滤，我希望不退回该项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:31:43.850

### 询问

如果您希望所有行之间的时间段与`starts_on`and`ends_on`的传递时间段重叠，`START_DATE`并且`END_DATE`“end”总是晚于“start”，并且所有涉及的列都是类型`timestamp`（而不是`time`or `date`），这个更简单的查询确实工作：

```
SELECT *
FROM   tbl
WHERE  starts_on <= END_DATE
AND    ends_on   >= START_DATE
ORDER  BY starts_on, id; 
```

适合稍后澄清的问题。

### 指数

此查询的最佳索引是[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)，例如：

```
CREATE INDEX tbl_range_idx ON tbl (starts_on, ends_on DESC) 
```

几乎也可以使用`DESC / ASC`，因为可以在两个方向上几乎同样好地搜索索引。

我怎么算？

在第一个条件上搜索索引`starts_on <= END_DATE`，符合条件的行在开头。
从那里，Postgres 可以根据`ends_on >= START_DATE`. 排位赛排在第一位。最优指数。

但不要只相信我的话 - 测试性能[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)。运行几次以排除缓存效果。

也有[`OVERLAPS`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html)出于相同目的的操作员。简化了逻辑，但在其他方面并不优越。

PostgreSQL 9.2 中还有新的[`range`类型](http://www.postgresql.org/docs/current/interactive/rangetypes.html)，它们有自己的运算符。但不适用于 9.1。

# mysql - How does "deterministic" affect how MySQL executes a defined function?

> ID：13675868
> 
> 赞同：0
> 
> 时间：2012-12-03T01:18:36.827
> 
> 标签：mysql, database

MySQL has to know the deterministic of a defined function, official document says:

> Several characteristics provide information about the nature of data use by the routine. In MySQL, these characteristics are advisory only.

Does that mean deterministic of a function does not affect how the function is executed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:23:02.123

That sentence to me would imply that they *may* be used by mysql, but mysql also may not.

Still a good idea to use 'deterministic', but you should actually measure to see if the query execution strategy matches your expectations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:08:09.280

如果我不得不猜测，我会说 MySQL 将 DETERMINISTIC 函数视为具有真正的参照完整性。因此，如果使用相同的参数调用函数，它总是会给出相同的结果。这样做的结果是，如果使用相同的参数多次调用一个函数，MySQL 可能会选择重新排序执行以便它只被调用一次，或者它可能会缓存结果。我在谷歌上找不到太多关于 MySQL 在优化确定性函数时所做的事情，但我怀疑它会是我指定的以外的任何东西。

如果你将一个函数标记为 DETERMINISTIC，但它不是，那么 MySQL 可能不会在它应该调用它时调用它，从而导致潜在的错误结果。例如，如果使用值 '3' 调用它可能会产生一次结果 '7'，然后是 '8'，那么如果 MySQL 认为它是 DETERMINISTIC，那么两次都可能得到 '7'。

在任何情况下，如果您的函数是真正确定性的（也就是说，它没有副作用，并且除了传递给它的数据之外不读取任何数据），那么将其标记为 DETERMINISTIC 不会有任何伤害，并且如果优化器是可能会有所帮助足够聪明，可以重新排序执行或减少调用次数。如果您的函数读取或修改数据，或有其他副作用，那么不将其标记为 DETERMINISTIC 肯定是安全的，并且您*可能会*通过将其标记为 DETERMINISTIC 来产生问题，因为 MySQL 可能会选择会导致错误结果的执行计划来自函数。换句话说，不要对 MySQL 撒谎，你会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T23:38:47.257

siride 的回答是我在网上可以找到的关于此问题的最多讨论。但是，如果将 DETERMINISTIC 与 MODIFIES SQL DATA 结合起来会发生什么？并且查询可能在任何一天都是确定性的，但不是在几天之间（例如，它基于一个很少更改的查找表）。

我对此的工作意见是避免使用 DETERMINISTIC，除非 (a) 该函数实际上是数学确定性的（例如返回输入 * 2）或

(b) 我们有性能问题，我们需要尝试 DETERMINISTIC 来加快速度。

否则，为什么要冒着风险让优化器基于我们对它所做的事情的误解而提供错误的结果呢？

# java - Not looping through for loop - Java (android)

> ID：13675872
> 
> 赞同：0
> 
> 时间：2012-12-03T01:19:25.950
> 
> 标签：java, android, for-loop

The program works and comes up. When I click start on the main menu it brings up a question (textview) and 4 answers (buttons). Text is assigned to the textview and the 4 buttons with the for-loop. It is never looping through after clicking a button. Nothing happens when clicking a button.

I have tried putting in a "break" and changing to a while loop and just can't get it working. I think this is a simple fix that I just cannot find.

Any other code structure or advice is appreciated and needed!

```
public class QuestionView extends Activity {

    Quiz quiz = new Quiz();
    ArrayList<Question> queries = quiz.getRandom10();

    int correctAnswers = 0;
    int wrongAnswers = 0;

    int answer = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questionviewmain);

        TextView question = (TextView)findViewById(R.id.question);

        Button answer1 = (Button)findViewById(R.id.answer1);
        Button answer2 = (Button)findViewById(R.id.answer2);
        Button answer3 = (Button)findViewById(R.id.answer3);
        Button answer4 = (Button)findViewById(R.id.answer4);

        for(int i = 0; i < 10; i++) {
            question.setText(queries.get(i).getQuery());
            answer1.setText(queries.get(i).getA1());
            answer2.setText(queries.get(i).getA2());
            answer3.setText(queries.get(i).getA3());
            answer4.setText(queries.get(i).getA4());

            answer = queries.get(i).getCorrectAnswer();

            answer1.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    if(answer == 0) {
                        correctAnswers++;
                    } else {
                        wrongAnswers++;
                    }
                }
            });

            answer2.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    if(answer == 1) {
                        correctAnswers++;
                    } else {
                        wrongAnswers++;
                    }
                }
            });

            answer3.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    if(answer == 2) {
                        correctAnswers++;
                    } else {
                        wrongAnswers++;
                    }
                }
            });

            answer4.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    if(answer == 3) {
                        correctAnswers++;
                    } else {
                        wrongAnswers++;
                    }
                }
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:26:38.947

onCreate 方法仅在创建 Activity 时运行。您要做的是将以下代码分解为一个单独的方法，并从 onClickLiestener() 为不同的按钮调用该方法：

```
question.setText(queries.get(i).getQuery());
answer1.setText(queries.get(i).getA1());
answer2.setText(queries.get(i).getA2());
answer3.setText(queries.get(i).getA3());
answer4.setText(queries.get(i).getA4()); 
```

由于此解决方案不包含循环，因此您必须确保每次点击都会增加索引（在本例中为“i”）。

**编辑：** *建议的解决方案*

```
public class QuestionView extends Activity {

    Quiz quiz = new Quiz();
    ArrayList<Question> queries = quiz.getRandom10();

    int correctAnswers = 0;
    int wrongAnswers = 0;

    int answer = 0;

    int i=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questionviewmain);

        Button answer1 = (Button)findViewById(R.id.answer1);
        Button answer2 = (Button)findViewById(R.id.answer2);
        Button answer3 = (Button)findViewById(R.id.answer3);
        Button answer4 = (Button)findViewById(R.id.answer4);

        answer1.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                if(answer == 0) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
                reloadQuestion();
            }
        });

        answer2.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                if(answer == 1) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
                reloadQuestion();
            }
        });

        answer3.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                if(answer == 2) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
                reloadQuestion();
            }
        });

        answer4.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                if(answer == 3) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
                reloadQuestion();
            }
        });

        reloadQuestion();
    }

    private void reloadQuestion(){
        TextView question = (TextView)findViewById(R.id.question);

        Button answer1 = (Button)findViewById(R.id.answer1);
        Button answer2 = (Button)findViewById(R.id.answer2);
        Button answer3 = (Button)findViewById(R.id.answer3);
        Button answer4 = (Button)findViewById(R.id.answer4);

        question.setText(queries.get(i).getQuery());

        answer1.setText(queries.get(i).getA1());
        answer2.setText(queries.get(i).getA2());
        answer3.setText(queries.get(i).getA3());
        answer4.setText(queries.get(i).getA4());

        answer = queries.get(i).getCorrectAnswer();

        i++;
    }
} 
```

您可能可以用不同的方式优化代码，但这个建议应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:53:24.997

您的程序所做的只是将“查询”ArrayList 中的不同文本分配给一堆 TextView 对象十次。它还一遍又一遍地将相同的 onClickListener 对象分配给相同的 textView 对象。这一切都发生在创建活动时。因此，当您真正能够看到您的活动时，循环结束并且所有 textView 项目都具有最后（第 10 个）值。当您单击该按钮时，程序会完全按照您的要求执行：增加一个计数器。

我相信这不是你的想法。而你真正想做的是：

1.  只创建一个 onClickListener 对象并在 onCreate() 方法中将其分配给所有 textView 项目。
2.  在 onClickListener 中检查被点击的视图（确定点击了哪个 textVIew）并将其与正确答案进行比较。相应地更新计数器。阅读下一组问答数据并更新 UI。

这是我正在谈论的一个例子：

```
public class QuestionView extends Activity {

    Quiz quiz = new Quiz();
    ArrayList<Question> queries = quiz.getRandom10();

    private int correctAnswers;
    private int wrongAnswers;
    private char mCurrentAnswer;
    private char mNextQuestion;

    private View.OnClickListener clickListener = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (v.getId() == getCurrentAnswer()) {
                ++correctAnswers;
            } else {
                ++wrongAnswers;
            }

            readNextQuestion();
        }
    }; 

    private int getCurrentAnswer() {
        return mCurrentAnswer;
    }

    private void readNextQuestion() {
        question.setText(queries.get(mNextQuestion).getQuery());
        answer1.setText(queries.get(mNextQuestion).getA1());
        answer2.setText(queries.get(mNextQuestion).getA2());
        answer3.setText(queries.get(mNextQuestion).getA3());
        answer4.setText(queries.get(mNextQuestion).getA4());

        mCurrentAnswer = queries.get(mNextQuestion).getCorrectAnswer();

        ++mNextQuestion;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questionviewmain);

        TextView question = (TextView)findViewById(R.id.question);

        Button answer1 = (Button)findViewById(R.id.answer1);
        Button answer2 = (Button)findViewById(R.id.answer2);
        Button answer3 = (Button)findViewById(R.id.answer3);
        Button answer4 = (Button)findViewById(R.id.answer4);

        //You can also assign it in the xml (I guess)
        answer1.setId(1);
        answer1.setOnClickListener(clickListener);
        answer2.setId(2);
        answer2.setOnClickListener(clickListener);
        answer3.setId(3);
        answer3.setOnClickListener(clickListener);
        answer4.setId(4);
        answer4.setOnClickListener(clickListener);

        readNextQuestion();
    }
} 
```

# algorithm - Convert Undirected graph to directed graph

> ID：13675873
> 
> 赞同：1
> 
> 时间：2012-12-03T01:19:27.197
> 
> 标签：algorithm, graph, jgrapht

How do you convert (can we convert?) an Undirected graph into a Directed graph. I am using [Jgrapht library](https://github.com/jgrapht/jgrapht)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:26:09.667

这很简单，只需将两个节点 A 和 B 之间的无向边替换为两条有向边即可。一个来自 A-> B，另一个来自 B -> A。

# ruby - ActiveRecord::ConnectionTimeoutError

> ID：13675879
> 
> 赞同：8
> 
> 时间：2012-12-03T01:19:51.550
> 
> 标签：ruby, activerecord

I am getting this error:

```
'could not obtain a database connection within 5 seconds (waited 5.001017 seconds). The max pool size is currently 16; consider increasing it.' 
```

First I got this error, I bumped up the count from 5 to 16\. But it's still happening and i am the only one test out the database. Why is this happening when I am the only user?

I am not on rails btw. I am using:

```
ActiveRecord::Base.establish_connection ({
    :adapter => 'mysql2',
    :database => 'ck',
    :host => 'localhost',
    :username => 'root',
    :password => '',
    :pool => 16,
    }) 
```

and using Sinatra.

Thanks

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T10:02:42.123

正如 Frederick 指出的那样，您需要将打开的 ActiveRecord 连接返回到连接池。

如果您在线程模式下使用瘦服务器，那么您需要将其添加到您的 Sinatra 应用程序中：

```
after do
  ActiveRecord::Base.connection.close
end 
```

...而不是使用 ConnectionManagement 建议。原因是 Thin 将请求处理拆分为 2 个线程，并且关闭 ActiveRecord 连接的线程与打开它的线程不同。由于 ActiveRecord 通过线程 ID 跟踪连接，它会感到困惑并且不会正确返回连接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T02:06:51.167

听起来您没有在请求结束时将连接返回到池。如果不是，那么使用 db 的每个请求都将消耗 1 个连接，最终您将耗尽池并开始收到您描述的错误消息

Active Record 提供了一个机架中间件来处理这个`ActiveRecord::ConnectionAdapters::ConnectionManagement`问题，只要它在中间件链中比访问活动记录的任何东西更早，它就应该处理这些事情。

您也可以自己处理连接管理。[文档](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html)有更多详细信息，但一种方法是将所有数据库访问粘贴在这样的块中

```
ActiveRecord::Base.connection_pool.with_connection do
  ...
end 
```

它会在块的开头检查一个连接，然后再将其签入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T07:11:34.600

最好使用ActiveRecord 提供的[中间件：](https://github.com/rails/rails/blob/8f218266bb4fa4ef2a07904b106c72fda9e182a6/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb#L616)

```
use ActiveRecord::ConnectionAdapters::ConnectionManagement 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T22:27:55.230

正如 Frederick 指出的那样，您需要将打开的 ActiveRecord 连接返回到连接池。

正如 kuwerty 建议的那样，当您使用 Thin 时，`ConnectionManagement`不会将连接返回到池中。我建议不要像 kuwerty 所说的那样关闭当前连接，而是像这样将连接返回到池中。

```
after do
  ActiveRecord::Base.clear_active_connections!
end 
```

对于那些想要重现问题的人，试试[这个例子](https://stackoverflow.com/questions/36697685/how-do-i-reuse-connections-in-activerecord)。

编辑：

我解释了为什么`ActiveRecord::Connectionadapters::ConnectionManagement`在线程模式下使用中间件无法与 Thin 一起使用，您可以在[此处](http://ruslanledesma.com/2016/04/23/release-connections-thin-and-active-record.html)找到。

# c++ - How can I pass values from an array to the constructor? C++

> ID：13675881
> 
> 赞同：0
> 
> 时间：2012-12-03T01:20:20.240
> 
> 标签：c++, arrays, constructor

I've created a program that reads in data from a file and creates objects from them. However their values can vary and thus I made an array that can expand to a definite amount. When I try to pass said through the constructor I run into some trouble. Also I'm not supposed to use vectors which from what I understand would have made this a lot easier.

```
 //bunch of code to read in data from the file similar to this below
        getline (readfile, typea);

                    //code determining what each data type is.          

readMedia >>NSA_Value;
for (int i=0; i<=NSA_Value; i++){
getline(readMedia, supporting_actorsa[i]); //this is the array I'm using that can grow a bit to accommodate.

Vhs initial = Vhs(typea, a, b, c, supporting_actorsa[10]); //the constructor ive removed most of the other things to make it more readable. 
```

This is the cpp file it calls on create the object

```
#include "Vhs.cpp"

Vhs::Vhs (string type, string a1, string b1, string c1, supporting_actorsa1[10])
{
}
Vhs::Vhs(void)
{
}

Vhs::~Vhs(void)
{
} 
```

and this it it's .h file

```
#pragma once
class Vhs
{

public:

    Vhs(void);
    Vhs (string type, string A2, string B2, string C3, string supporting_actorsA3[10]);
~Vhs(void);

}; 
```

all the variables exist, i just removed all the declarations to make things look cleaner. Thanks for any help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:27:57.060

你可以像这样传递一个 C 数组：

```
#include <iostream>
#include <string>
using namespace std;
class Vhs {
public:
    Vhs (string type, string A2, string B2, string C3, 
         string *supporting_actorsA3, int n); 
};  
Vhs::Vhs (string type, string a1, string b1, string c1, 
          string *supporting_actorsa1, int n) {
  for (int i = 0; i < n; i++) {
    cout << supporting_actorsa1[i] << endl;
  }
}

int main()
{
  string supporting_actorsa[1024];
  int num_actors;
  num_actors = 2;
  supporting_actorsa[0] = "1";
  supporting_actorsa[1] = "2";
  Vhs initial = Vhs("typea", "a", "b", "c", supporting_actorsa, 
      num_actors);
    return 0;
} 
```

# ios - Keyboard notifications not firing on device

> ID：13675882
> 
> 赞同：0
> 
> 时间：2012-12-03T01:20:29.770
> 
> 标签：ios, ipad, ios6

There is no problem when running on the simulator, but the notifications are not posting on the devices (iPad 3 and Mini both running iOS 6). If I post the notification myself, the handler gets called. I was wondering if any of you guys have run into this and have any ideas.

Here is the code setting up the handlers:

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iPadEditSetTitleHandleKeyboardDidShowNotification:) name:UIKeyboardDidShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iPadEditSetTitleHandleKeyboardWillShowNotification:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(iPadEditSetTitleHandleKeyboardWillHideNotification:) name:UIKeyboardWillHideNotification object:nil]; 
```

And the definitions of the handlers themselves:

```
- (void)iPadEditSetTitleHandleKeyboardWillHideNotification:(NSNotification *)notification
- (void)iPadEditSetTitleHandleKeyboardWillShowNotification:(NSNotification *)notification
- (void)iPadEditSetTitleHandleKeyboardDidShowNotification:(NSNotification *)notification 
```

Any help is appreciated.

UPDATE:

Started a new project to get everything out of the way here is the view controller, all of it.

```
//
//  DWViewController.m
//  KeyboatdTest
//
//  Created by Dan Wesnor on 12/3/12.
//  Copyright (c) 2012 Dan Wesnor. All rights reserved.
//

#import "DWViewController.h"

@interface DWViewController ()

@end

@implementation DWViewController

- (void)handleKeyboardNotification:(NSNotification *)notification
{
    NSLog(@"%@", notification.name);
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleKeyboardNotification:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleKeyboardNotification:) name:UIKeyboardWillHideNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleKeyboardNotification:) name:UIKeyboardDidShowNotification object:nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

The storyboard contains a single text field. Everything else is the standard single-view app template.

Still no joy. Works as it should in the simulator, but not on the iPad itself. Could it be something to do with provisioning or something outside of the code itself?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:33:07.803

这是一个很好的无证行为。

拆分键盘时不会触发这 3 个通知。但是，似乎在它们通常会触发之前附加 UITextField.inputAccessoryView ，即使键盘被拆分，它们也会触发。所以在收到 UIKeyboardWillChangeFrameNotification 后附加附件视图，其他三个将正常触发。

# java - Android memory leak when using org.apache.commons.io.FileUtils

> ID：13675886
> 
> 赞同：2
> 
> 时间：2012-12-03T01:20:50.630
> 
> 标签：java, android, dalvik

I'm trying to copy all the image files on an SD card (connected to a rooted Android device running 4.0.4) to a Hard Drive connected to the same device. I'm new to Android programming so forgive me if the question's answer is obvious.

I use the following method, which is called from the `onHandleIntent(Intent intent)` of a service, to to the copying:

```
private void copyImages(File sourceDirectory, File destinationDirectory) throws IOException {
    int count = 0;
    IOFileFilter imageFilter = new ImageFilter();
    IOFileFilter visibleDirectoryFilter = new VisibleDirectoryFilter();

    long startTime = System.nanoTime();
    if (sourceDirectory.exists() && destinationDirectory.exists()) {
        Collection<File> fileList = FileUtils.listFiles(sourceDirectory, imageFilter, visibleDirectoryFilter);
        for (File image : fileList) {               
            FileUtils.copyFileToDirectory(image, destinationDirectory);
            count++;
        }
    }

    long totalTime = System.nanoTime() - startTime;
    Toast.makeText(this, count + " files copied in " + (totalTime) + " nanos.", Toast.LENGTH_LONG).show();
} 
```

However, when I run this, after 36 images are copied, I start continuously getting `GC_CONCURRENT freed aK, b% free cK/dK, paused ems+fms` where `a`, `b`, `c` , `d`, `e` and `f` are different numbers. I get this non-stop for a long time (as long as I've waited) without any other images being copied.

I understand (I think I do anyway) that this is because the heap is full and Dalvik is trying to free up memory. But, I'm not sure how I can stop this from happening, the program should be able to copy many more (possibly thousands) images. Perhaps the apache commons FileUtils class is too heavy for Android in which case is there another Android-friendly library for neat file handling or must I write my own simple one? Or maybe I'm going wrong elsewhere.

Any help is much appreciated.

Thanks in advance.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T05:05:07.130

这很可能不是问题。GC 是应用程序处理的正常部分。事实上，我敢打赌，如果您的应用程序正忙于进行缓慢的 IO，那么系统已经决定现在是进行一些清理的好时机。

FileUtils 的源代码当然是开放的。它并不是特别可怕：

[http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/FileUtils.java#FileUtils.doCopyFile%28java.io.File% 2Cjava.io.File%2Cboolean%29](http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/FileUtils.java#FileUtils.doCopyFile%28java.io.File%2Cjava.io.File%2Cboolean%29)

唯一可以说“臃肿”的是创建复制缓冲区。默认为 4K： http: [//grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/IOUtils.java#IOUtils.copyLarge%28java。 io.InputStream%2Cjava.io.OutputStream%29](http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/IOUtils.java#IOUtils.copyLarge%28java.io.InputStream%2Cjava.io.OutputStream%29)

我不会太担心这一点，除非您可以将真正的问题隔离到该代码中。

从性能的角度来看，您可能想要测试 BufferedInputStream/OutputStream 是否在这里提供任何优势。值得怀疑，因为 IOUtils 复制方法也使用了缓冲区。

# php - PHP storing several users in a variable

> ID：13675890
> 
> 赞同：1
> 
> 时间：2012-12-03T01:21:34.110
> 
> 标签：php

I would like to display admin button on the menu only if the `$_SESSION['user']` is equal to say a variable with `$admins` (which I would like to store several values as in several users).

I know I can do this through *SQL*, but I would like to know if this is possible through *PHP* and if so how.

edit: to be more specific I know I can do it by looking up the database for a user matching the admin group, but I do not have this setup.

Even if SQL is the easiest option I really hope there is a way with *PHP*, I was reading about `PHP_AUTH_USER` quite a bit, but I'd like to store several users in a variable, if that is possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:26:29.590

```
$admins = array("username1","username2","username3");
session_start();

if(in_array($_SESSION["user"],$admins))
{
    //do stuff
} 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:26:13.960

听起来您在问哪些替代位置可以存储用户列表，以及他们拥有哪些权限（管理员或非管理员）。

您可以： * 将其硬编码到 PHP 文件中（非常简单！） * 将其放入配置文件中（ini、xml，随你命名）

无论如何..您需要将此列表放在“某处”。它不会留在 PHP 内存中，所以这个地方需要是 PHP 可以从中加载它的地方。

您不能只输入一个变量（如 $_SESSION）并期望留在那里。所以与数据库（确实是一个合乎逻辑的选择）一起，其他两个是您的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:31:40.027

您正在寻找的是一种称为`array`. 您可以在这里找到更多信息：http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

关键是它是`key => value`成对结构的。您绝对应该深入研究这一点，因为作为一种数据类型，数组可以让您实现很多事情，例如`looping through data`，轻松`searching`获取数据，`sorting`它等等。

这是一个适用于几乎任何类型的编程语言的基本概念，所以请帮自己一个忙！

# java - Altering return value of method

> ID：13675895
> 
> 赞同：1
> 
> 时间：2012-12-03T01:22:54.767
> 
> 标签：java, string, if-statement, return

Lets say that I have a method that returns a String. I want to check if the returned String is equal to another String and if they are the same to set the returned String to be just "". How would I go about doing this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:24:54.487

假设“原始”字符串是`str`，“其他”字符串是`anotherStr`：

```
return str.equals(anotherStr) ? "" : str; 
```

请注意，无论如何，如果字符串不同，你必须返回一些东西，我正在返回`str`，但你会知道在这种情况下返回的适当值是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:25:14.350

用于[`String.equals()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equals%28java.lang.Object%29)比较 Java 中的两个字符串。

```
return str.equals("bla") ? "" : str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:25:56.810

像这样设置您的`check()`方法，在其中传入`String`您要检查的内容，并在方法结束时运行它...

```
public String check(String comparison){
    // do some normal processing here, which ends up with a String 'result' that you want to return
    ...

    // Do the check at the end
    if (result.equals(comparison)){
        return "";
    }
    else {
        return result;
    }
} 
```

或者，您可以将检查添加到方法调用本身中，这不需要您更改方法的签名......

```
String result = runMethod();
if (result.equals(comparison)){
    result = "";
} 
```

# css - Twitter Bootstrap Navbar: How to create two separate rows?

> ID：13675896
> 
> 赞同：3
> 
> 时间：2012-12-03T01:22:57.333
> 
> 标签：css, twitter-bootstrap, navbar

I am using Twitter bootstrap to create my fixed navbar up top, and I wanted to mimic something like [Kickstarter's](http://www.kickstarter.com/) navbar, where they create a new line in between 'Discover' and 'great projects.' I've tried using an escape "\n" as well as "< br />" (i realize there's a space in front of br) to create a new line, but it messes up the format of the rest of the navbar, and pushes the logo up. What would be the correct way to create 2 lines, but maintaining the overall height of the navbar?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:59:25.060

```
<ul class="nav">
  <li>
    <a href="#">
      <span class="li-head">Discover</span>
      <span class="li-tail">great projects</span>
    </a>
  </li>
</ul>

.nav li a > span { display:block; } 
```

# vim - 我可以添加到 vimrc 中的哪一行代码 ig命令在vim启动时运行？

> ID：13675902
> 
> 赞同：6
> 
> 时间：2012-12-03T01:23:38.057
> 
> 标签：vim

我是 Vim 新手，很抱歉这个新手问题。我正在使用 vim 插件[vim-indent-guides](https://github.com/nathanaelkane/vim-indent-guides)

切换插件的默认映射是`<leader>ig`. vim 启动时应进行哪些修改以使其处于打开状态

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:07:21.857

听起来像是插件可能在其配置中支持的东西。Vim 插件通常通过放置类似的东西来配置

```
let g:global_variable_for_plugin = 1 
```

在你的`~/.vimrc`.

瞧，来自 vim-indent-guides 文档：

```
Use this option to control whether the plugin is enabled on Vim startup.

Default: 0\. Values: 0 or 1.
>
  let g:indent_guides_enable_on_vim_startup = 0
< 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T04:25:42.537

您需要的是在 vim 启动时运行以下命令

```
:IndentGuidesEnable 
```

其中一种方法是将自动命令添加到您的 .vimrc 中，例如

```
au VimEnter * IndentGuidesEnable 
```

可能还有其他方法，但这对我来说看起来很简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:33:56.630

我不知道为什么默认情况下未启用该插件，但是

```
IndentGuidesEnable 
```

命令似乎就是这样做的。将它添加到您的`~/.vimrc`.

更一般地说，映射只是命令或命令序列的方便快捷方式。您要执行命令，而不是映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T02:35:03.480

我知道这是很久以前的问题，但只是一个更新。所选答案不适用于 Neovim。要解决这个问题，在 .vimrc 中添加：

`autocmd VimEnter * :IndentGuidesEnable`

# c# - Roll a dice function using a timer that animate's a picturebox and returns a random value

> ID：13675904
> 
> 赞同：1
> 
> 时间：2012-12-03T01:24:14.710
> 
> 标签：c#, winforms, timer, wait

I'm trying to build a display for a die roll. What I want to do is flicker images of random faces on the die, then end with the face that shows the number rolled. *After* this happens, I want the function to continue and return the number of the die roll. Here's what I have

```
public int RollDie()
{
    RollNum = dieRoll.Next(1, 7);
    DispCount = 0;
    Timer Time = new Timer();
    Time.Interval = TimerInterval;
    Time.Tick += DisplayRollHandler;
    Time.Start();
    System.Threading.Thread DispThread = new System.Threading.Thread(Time.Start);
    DispThread.Start();
    DispThread.Join();
    return RollNum;
}
private void DisplayRollHandler(object sender, EventArgs evt)
{
    if (DispCount < TargetDispCount)
    {
        Random Nums = new Random();
        Display.BackgroundImage = Faces[Nums.Next(0, 6)];
        DispCount++;
    }
    else
    {
        ((Timer)sender).Stop();
        Display.BackgroundImage = Faces[RollNum - 1];
    }
} 
```

where `dieRoll` is a random object and `Display` is a Panel. The image flicker works, and it does return the number of the roll consistently. Unfortunately, it doesn't wait for the display flicker to finish before continuing, which is a problem when I have automatic messages that pop up after the die is rolled.

I'm a fairly inexperienced programmer, so I'm probably missing a really basic concept. I know that if I could abstract this into a method call, I can wait for a method call to finish, but I can't figure out how to do that without using a `Thread.Sleep` call and freezing the program.

Any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:23:19.463

这个解决方案有一个根本性的错误，即随机化器永远不应该在骰子对象本身内实例化。一个简单的测试将说明原因。只需将另一个骰子对象添加到表单中并同时滚动两者。注意到一些有趣的事情了吗？他们总是一样的！

这是因为，默认情况下，随机化器使用当前时间来播种生成器。在代码的同一部分创建两个（或更多）对象将导致所有骰子对象具有相同的种子，因此每次滚动时的结果都相同。

更好的解决方案是创建一个静态单例类，该类将为您处理所有滚动（随机化）所有骰子。

这是一个简单的示例（使用更通用的 Dice 类）：

```
public static class DiceRoller
{
    private static Random _roller;

    public static void RollDice(Dice dice)
    {
        if (dice.Faces.Count < 1)
            throw new InvalidOperationException("A dice must contain at least 1 side to be rolled.");

        if (_roller == null)
            _roller = new Random();

        int index = _roller.Next(dice.Faces.Count);
        dice.SetFacingIndex(index);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:33:29.360

刚刚写了一个`Dice`小类，它将为您提供所需的值：

```
public class Dice
{
    private Random _Random;
    private BackgroundWorker _Worker;

    /// <summary>
    /// Initializes a new instance of the <see cref="Dice"/> class.
    /// </summary>
    public Dice()
    {
        _Random = new Random();

        InitializeDefaultValues();
        InitializeBackgroundWorker();
    }

    /// <summary>
    /// Occurs when the dice finished rolling.
    /// </summary>
    public event EventHandler Rolled;

    /// <summary>
    /// Occurs while the dice is rolling and the value has changed.
    /// </summary>
    public event EventHandler RollingChanged;

    /// <summary>
    /// Gets or sets the including maximum value that the dice can return.
    /// </summary>
    /// <value>
    /// The maximum value.
    /// </value>
    [DefaultValue(6)]
    public int Maximum { get; set; }

    /// <summary>
    /// Gets or sets the including minimum value that the dice can return.
    /// </summary>
    /// <value>
    /// The minimum.
    /// </value>
    [DefaultValue(1)]
    public int Minimum { get; set; }

    /// <summary>
    /// Gets the result that this dice currently has.
    /// </summary>
    public int Result { get; private set; }

    /// <summary>
    /// Gets or sets the duration of the rolling.
    /// </summary>
    /// <value>
    /// The duration of the rolling.
    /// </value>
    [DefaultValue(typeof(TimeSpan), "00:00:03")]
    public TimeSpan RollingDuration { get; set; }

    /// <summary>
    /// Starts rolling the dice.
    /// </summary>
    public void Roll()
    {
        if (!_Worker.IsBusy)
        {
            CheckParameters();
            _Worker.RunWorkerAsync();
        }
    }

    private void CheckParameters()
    {
        if (Minimum >= Maximum)
        {
            throw new InvalidOperationException("Minimum value must be less than the Maximum value.");
        }

        if (RollingDuration <= TimeSpan.Zero)
        {
            throw new InvalidOperationException("The RollingDuration must be greater zero.");
        }
    }

    private void InitializeBackgroundWorker()
    {
        _Worker = new BackgroundWorker();
        _Worker.WorkerReportsProgress = true;
        _Worker.DoWork += OnWorkerDoWork;
        _Worker.ProgressChanged += OnWorkerProgressChanged;
        _Worker.RunWorkerCompleted += OnWorkerRunWorkerCompleted;
    }

    private void InitializeDefaultValues()
    {
        Minimum = 1;
        Maximum = 6;
        Result = Minimum;
        RollingDuration = TimeSpan.FromSeconds(3);
    }

    private void OnWorkerDoWork(object sender, DoWorkEventArgs e)
    {
        var finishTime = DateTime.UtcNow + RollingDuration;

        while (finishTime > DateTime.UtcNow)
        {
            Result = _Random.Next(Minimum, Maximum + 1);
            _Worker.ReportProgress(0);
            // ToDo: Improve sleep times for more realistic rolling.
            Thread.Sleep(50);
        }
    }

    private void OnWorkerProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        RaiseEvent(RollingChanged);
    }

    private void OnWorkerRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        RaiseEvent(Rolled);
    }

    private void RaiseEvent(EventHandler handler)
    {
        var temp = handler;

        if (temp != null)
        {
            temp(this, EventArgs.Empty);
        }
    }
} 
```

在第一个简单的示例中，我只是将按钮添加到表单 ( `buttonRoll`) 和标签 ( `labelDiceResult`)，并添加了以下代码（不要忘记将初始化方法添加到表单构造函数中）：

```
private void InitializeDice()
{
    _Dice = new Dice();
    _Dice.RollingChanged += OnDiceRollingChanged;
    _Dice.Rolled += OnDiceRolled;
}

void OnDiceRolled(object sender, EventArgs e)
{
    buttonRoll.Enabled = true;
}

void OnDiceRollingChanged(object sender, EventArgs e)
{
    // ToDo: Select desired picture from image list depending on _Dice.Result
    labelDiceResult.Text = _Dice.Result.ToString();
}

private void OnButtonRollClick(object sender, EventArgs e)
{
    buttonRoll.Enabled = false;
    _Dice.Roll();
} 
```

作为最后一步，我可能会`Thread.Sleep(50)`通过使用计算列表来调整调用以随着时间的推移使用不同的值，具体取决于窦的上升部分和所需的持续时间，让骰子随着时间的推移变慢。但我让这部分向读者开放（或下一个问题）。

# python - Python 编程 - numpy polyfit 说 NAN

> ID：13675912
> 
> 赞同：9
> 
> 时间：2012-12-03T01:24:55.270
> 
> 标签：python, numpy, nan

我编写的一个非常简单的代码遇到了一些问题。我有 4 组数据，并且想使用 numpy polyfit 生成多项式最佳拟合线。其中 3 个列表在使用 polyfit 时产生数字，但第三个数据集在使用 polyfit 时产生 NAN。下面是代码和打印出来的。有任何想法吗？

代码：

### 所有的“ind_#”都是数据列表。下面将它们转换为 numpy 数组，然后可以生成多项式最佳拟合线

```
ind_1=np.array(ind_1, np.float)

dep_1=np.array(dep_1, np.float)

x_1=np.arange(min(ind_1)-1, max(ind_1)+1, .01)

ind_2=np.array(ind_2, np.float)

dep_2=np.array(dep_2, np.float)

x_2=np.arange(min(ind_2)-1, max(ind_2)+1, .01)

ind_3=np.array(ind_3, np.float)

dep_3=np.array(dep_3, np.float)

x_3=np.arange(min(ind_3)-1, max(ind_3)+1, .01)

ind_4=np.array(ind_4, np.float)

dep_4=np.array(dep_4, np.float)

x_4=np.arange(min(ind_4)-1, max(ind_4)+1, .01) 
```

### 下面打印出上面生成的数组，以及 polyfit 列表的内容，通常是多项式方程的系数，但对于下面的第三种情况，所有 polyfit 内容都打印为 NAN

```
print(ind_1)

print(dep_1)

print(np.polyfit(ind_1,dep_1,2))

print(ind_2)

print(dep_2)

print(np.polyfit(ind_2,dep_2,2))

print(ind_3)

print(dep_3)

print(np.polyfit(ind_3,dep_3,2))

print(ind_4)

print(dep_4)

print(np.polyfit(ind_4,dep_4,2)) 
```

打印出：

```
[ 1.405  1.871  2.713 ...,  5.367  5.404  2.155]

[ 0.274  0.07   0.043 ...,  0.607  0.614  0.152]

[ 0.01391925 -0.00950728  0.14803846]

[ 0.9760001  2.067      8.8       ...,  1.301      1.625      2.007    ]

[ 0.219      0.05       0.9810001 ...,  0.163      0.161      0.163    ]

[ 0.00886807 -0.00868727  0.17793324]

[ 1.143      0.9120001  2.162     ...,  2.915      2.865      2.739    ]

[ 0.283  0.3    0.27  ...,  0.227  0.213  0.161]

[ nan  nan  nan]

[ 0.167  0.315  1.938 ...,  2.641  1.799  2.719]

[ 0.6810001  0.7140001  0.309     ...,  0.283      0.313      0.251    ]

[ 0.00382331  0.00222269  0.16940372] 
```

为什么第三种情况的 polyfit 常量被列为 NAN？所有数据集的数据类型相同，所有代码一致。请帮忙。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-03T23:27:31.017

刚看了你的资料。发生这种情况是因为您有一个`NaN`in `dep_3`（元素 713）。您可以确保您只在拟合中使用有限值，如下所示：

```
idx = np.isfinite(ind_3) & np.isfinite(dep_3)
print(np.polyfit(ind_3[idx], dep_3[idx], 2)) 
```

至于在大型数据集中查找错误值，numpy 让这变得非常容易。你可以找到这样的索引：

```
print(np.where(~np.isfinite(dep_3))) 
```

# python - 用skype4py发送文件？

> ID：13675914
> 
> 赞同：1
> 
> 时间：2012-12-03T01:25:29.450
> 
> 标签：python, skype4py

我将如何使用 Skype4Py 通过 Skype 发送文件？我浏览了[文档](http://skype4py.sourceforge.net/doc/html/)，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T16:09:40.917

我建议查看[http://skype4py.sourceforge.net/doc/html/Skype4Py.filetransfer-module.html](http://skype4py.sourceforge.net/doc/html/Skype4Py.filetransfer-module.html) 模块以及 [http://skype4py.sourceforge.net/doc/html/Skype4Py。 client.Client-class.html#OpenFileTransferDialog](http://skype4py.sourceforge.net/doc/html/Skype4Py.client.Client-class.html#OpenFileTransferDialog)

注意：我在尝试使用 Skype4Py 使用的客户端类时遇到超时问题，所以如果您能够使用该类，请告诉我您是如何访问它的。

# javascript - 浏览器上的 MSN 聊天？

> ID：13675917
> 
> 赞同：0
> 
> 时间：2012-12-03T01:25:43.473
> 
> 标签：javascript

Microsoft 是否提供任何显示 MSN 状态（在线/离线）的 API？还是允许用户从浏览器与 msn 用户聊天的服务（基于或不基于 iframe）？

我通过谷歌搜索找到了一些东西，但其中大部分已被弃用或不再起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:27:21.960

很可能不是。[微软正计划淘汰 Messenger，转而使用 Skype](http://www.examiner.com/article/say-good-bye-to-msn-messenger)。

# scheduling - NP难但不是NPC

> ID：13675925
> 
> 赞同：1
> 
> 时间：2012-12-03T01:26:39.277
> 
> 标签：scheduling, np-complete, np, np-hard

我见过几个调度问题，说这个问题是 NP 困难的。我的问题是 1）当我们说一个问题是 NP 困难时，这是否意味着它不在 NP 中？因为如果它是 NP，我们说这个问题是 NP 完全的。我知道问题出在 NPC 中，如果 a）在 NP 中 b）在 NP 中很难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:59:34.640

如果一个问题是 NP Hard，它可能在 NP 中（那么它是一个 NP 完全问题），但它也可能不在 NP 中。以下是这些类的维恩图：

![](../Images/58551442269f7938d7e36892595db50a.png)

# python - 为什么这会在 SIGKILL 上立即退出？

> ID：13675929
> 
> 赞同：1
> 
> 时间：2012-12-03T01:27:33.567
> 
> 标签：python, signals, interrupt

当我按下 Ctrl-C 时，以下代码立即终止。

但是，似乎循环应该在 10 秒延迟后退出 - 因为它不会检查状态，`keep_going`直到我们到达循环的顶部。为什么这段代码会立即退出循环？

我如何确保循环在退出之前完成执行？

```
import signal
import time

keep_going = True

def signal_handler(signal, frame):
    global keep_going
    print 'quitting!'
    keep_going = False

signal.signal(signal.SIGINT, signal_handler) 

while keep_going:
    print 'looping...'
    time.sleep(10)
    print 'bye!' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T01:35:37.693

来自[Python 文档](http://docs.python.org/2/library/time.html#time.sleep)：

> 实际的挂起时间可能少于请求的时间，因为任何捕获的信号都会在执行该信号的捕获例程后终止 sleep()。

即循环确实完成了它的执行（正如你可以从`"bye"`信号处理程序之后的输出中看到的那样`"quitting!"`），它只是`sleep`被缩短了。

如果你有比 更重要的东西`sleep`，我相信你会看到你最初想要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:35:05.357

该信号中断睡眠调用，继续循环，条件为 False，因此终止循环。Python 不会恢复睡眠调用。

顺便说一句，Python 解释器通常会捕获 SIGINT 本身，并将其转换为可以捕获的*KeyboardInterrupt异常，而不是使用信号模块。*

# jquery - fadeTo 不会在 IE9 中淡化内部 div

> ID：13675931
> 
> 赞同：2
> 
> 时间：2012-12-03T01:27:38.073
> 
> 标签：jquery, css, internet-explorer, html, fadeto

我在 IE9 和以前的版本中遇到了褪色问题。它适用于 chrome/firefox。提供了一个 jsFiddle 示例。

我正在尝试淡化包含绝对定位的图像和 div 中的文本的 div。所有内容都包含在最初隐藏的外部 div component_statsbox_helper 中。当我尝试淡入这个元素时，图像会很好地淡化，但 div 中的文本会立即显示出来。

[http://jsfiddle.net/25Jbj/51/](http://jsfiddle.net/25Jbj/51/) （在 IE 中试试！）

```
<div id="component_statsbox">
            <div id="component_statsbox_helper" class="hidden">
                <img alt="stats" src="http://www.esus.be/stats.png"></img>
                <div class="stats_inner">
                    Date of birth: <span class="stats_inner_text">test</span><br/>
                    Time of birth: <span class="stats_inner_text">test</span><br/>
                    Place of birth: <span class="stats_inner_text">test2</span><br/>
                    Weight: <span class="stats_inner_text">test3</span><br/>
                    Height: <span class="stats_inner_text">test4</span><br/>
                    Mother: <span class="stats_inner_text">test5</span><br/>
                    Father: <span class="stats_inner_text">test6</span><br/>
                </div>
            </div>
        </div> 
```

jquery代码淡化：

```
jQuery(document).ready(function(){
   jQuery('#link').click(function(){
      jQuery('#component_statsbox_helper').fadeTo(3500, '1');
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:39:18.863

在开始时设置`.state_inner`为`display:none;`，然后您可以同时淡入文本，但作为单独的调用使用`fadeIn()`.

```
jQuery(document).ready(function() {
    jQuery('#link').click(function() {
        jQuery('#component_statsbox_helper').fadeTo(3500, '1');
        $('.stats_inner').fadeIn(3500);
    });
});​ 
```

由于`fadeTo()`和`fadeIn()`是异步的，两条线将同时执行。这应该会给您与以前相同的效果，除了它也适用于 IE9。

### [演示](http://jsfiddle.net/25Jbj/52/)- 在 IE9 中使用图像淡化文本。

# sql - 添加 CASE 语句的结果

> ID：13675933
> 
> 赞同：2
> 
> 时间：2012-12-03T01:28:05.593
> 
> 标签：sql, oracle

我有以下 Oracle SQL 查询。给定一个给定的名字和姓氏，它会以任一顺序查找具有一个名字和另一个名字首字母的所有记录。我创建了`score`列以将可能的匹配项放在结果集的顶部。

```
SELECT
  surname,
  givenname,
  (CASE WHEN surname = 'Smith' THEN 2 ELSE 0)
    + (CASE WHEN givenname = 'John' THEN 1 ELSE 0)
    AS score
FROM person
WHERE (surname = 'Smith' AND givenname LIKE 'J%')
  OR  (surname LIKE 'S%' AND givenname = 'John')
  OR  (surname = 'John' AND givenname LIKE 'S%')
  OR  (surname LIKE 'J%' AND givenname = 'Smith')
ORDER BY
  score DESC,
  surname ASC,
  givenname ASC; 
```

问题是`score`在`+`. IDE 报告：

> 语法错误，预期：
> /
> *
> |

和执行报告：

> SQL 错误：ORA-00905：缺少关键字

我究竟做错了什么？有没有更好的方法来计算分数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T01:32:03.690

您的陈述中缺少以下`END`内容：`CASE`

```
SELECT
  surname,
  givenname,
  (CASE WHEN surname = 'Smith' THEN 2 ELSE 0 END)  -- < add END
    + (CASE WHEN givenname = 'John' THEN 1 ELSE 0 END)  -- < add END
    AS score
FROM person
WHERE (surname = 'Smith' AND givenname LIKE 'J%')
  OR  (surname LIKE 'S%' AND givenname = 'John')
  OR  (surname = 'John' AND givenname LIKE 'S%')
  OR  (surname LIKE 'J%' AND givenname = 'Smith')
ORDER BY
  score DESC,
  surname ASC,
  givenname ASC; 
```

# python - wxPython TypeError: String or Unicode type required 错误

> ID：13675934
> 
> 赞同：2
> 
> 时间：2012-12-03T01:28:07.683
> 
> 标签：python, twitter

我正在用 wxPython 制作一个 twitter python 客户端，但只有一件事不起作用。请帮忙。这是代码的那一部分：

```
getstatus = twitter.Api()
    pullstatus=wx.TextEntryDialog(panel, "Type which users to pull a status from.", 'Twitter Post Reader', 'Person')
    if pullstatus.ShowModal()==wx.ID_OK:
        puller=pullstatus.GetValue()

    get = getstatus.GetUserTimeline(puller)
    wx.StaticText(panel, -1, get, (200,450)) 
```

只有在最后一行，当我输入变量`get`时，它才会引发错误。编辑：我修复了代码。这是我所做的：

```
getstatus = twitter.Api()
    pullstatus=wx.TextEntryDialog(panel, "Type which users to pull a status from.", 'Twitter Post Reader', 'Person')
    if pullstatus.ShowModal()==wx.ID_OK:
        puller=pullstatus.GetValue()

    statusArray = getstatus.GetUserTimeline(puller)
    str_list = []
    for s in statusArray:
        str_list.append(s.text)
    wx.StaticsText(panel, -1, ''.join(str_list), (10,300)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:32:26.877

`GetUserTimeline()`返回状态消息列表，而不是字符串。您需要将所需的帖子转换为字符串才能显示它。

# c# - C# MemoryMappedFile，如何设置进程之间通信的权限？

> ID：13675938
> 
> 赞同：2
> 
> 时间：2012-12-03T01:28:39.387
> 
> 标签：c#, memory-mapped-files

我使用 memorymappedfile，当我在 2 个进程之间进行通信时它可以工作。但是，我设置了一个使用 LOCAL SYSTEM 帐户运行的 Windows 服务，并且我想与在当前登录的域帐户中运行的进程进行通信。

我找到了 accessrule 并尝试了：

```
security.AddAccessRule(new AccessRule<MemoryMappedFileRights>(string.Concat(Environment.MachineName, "\\Administrator"), MemoryMappedFileRights.FullControl, AccessControlType.Allow)); 
```

并且 ：

```
security.AddAccessRule(new AccessRule<MemoryMappedFileRights>("Everyone"), MemoryMappedFileRights.FullControl, AccessControlType.Allow)); 
```

但是没有用，我怎样才能授予每个人和/或匿名登录的完全访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:47:10.743

我找到了！

只需在段名称中输入“Global\”：

"Global\SegmentMemoryName" 并将 AccessRule 设置给每个人，你就完成了！

# git - 如何恢复 git 修剪的远程分支？

> ID：13675940
> 
> 赞同：7
> 
> 时间：2012-12-03T01:28:59.943
> 
> 标签：git

对于通过 删除的远程分支`git prune --all origin`，如何恢复它们？

### 假设

有 100 多个分支机构，由 20 人的团队共享，每个人都在不同的分支机构工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:12:51.023

再次将所有分支推回似乎是最简单的解决方案（如“[设置 git 以拉取和推送所有分支](https://stackoverflow.com/questions/1914579/set-up-git-to-pull-and-push-all-branches)”）
（除非您发现这些分支仍在服务器的 reflog 中引用）

[然后，您可以确保您的本地仓库再次跟踪它们，使用“将所有远程 git 分支作为本地分支跟踪](https://stackoverflow.com/a/6300386/6309)”中的单行代码。

# python - 将字符串转换为字典？

> ID：13675942
> 
> 赞同：25
> 
> 时间：2012-12-03T01:29:04.067
> 
> 标签：python, string, dictionary

我有一个脚本，可以将 dict 更改为字符串并将其保存到文件中。然后我想加载该文件并将其用作字典，但它是一个字符串。有没有类似的东西`int("7")`可以将格式化为 dict ( `{a: 1, b: 2}`) 的字符串更改为 dict ？我试过`dict()`了，但这似乎不是它的作用。我听说过一些涉及 JSON 和 的过程`eval()`，但我真的不明白这是做什么的。该程序加载它保存的相同数据，如果有人编辑它并且它不起作用，那不是我的问题（我不需要任何高级方法来确认 dict 数据或任何东西）。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-03T01:33:05.793

试试这个，这是最安全的方法：

```
import ast
ast.literal_eval("{'x':1, 'y':2}")
=> {'y': 2, 'x': 1} 
```

所有基于的解决方案`eval()`都是危险的，恶意代码可能被注入到字符串中并被执行。

根据[文档](http://docs.python.org/2/library/ast.html#ast.literal_eval)，表达式得到安全评估。另外，根据[源代码](http://hg.python.org/cpython/file/3.2/Lib/ast.py#l39)，`literal_eval`将字符串解析为python AST（源树），并且仅在它是文字时才返回。代码永远不会被执行，只会被解析，所以没有理由让它成为安全风险。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-03T01:32:36.147

这种格式不是 JSON，而是 YAML，您可以使用[PyYAML 对其](http://pyyaml.org/)进行解析：

```
>>> import yaml
>>> s = '{a: 1, b: 2}'
>>> d = yaml.load(s)
>>> d
{'a': 1, 'b': 2}
>>> type(d)
<type 'dict'> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-03T01:31:43.987

`eval`如果您信任输入字符串，则可以使用。

```
>>> a=eval('{"a":1,"b":2}')
>>> a
{'a': 1, 'b': 2} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-03T15:23:26.233

## 序列化

您所说的是[对象序列化](http://en.wikipedia.org/wiki/Serialization)，并且有比滚动您自己的序列化方法更好的方法（尽管您似乎已经提出了 YAML）。这两种方法仍然不如`ast.literal_eval()`方法安全（`pickle`特别是），但在这里绝对应该注意它们。

## JSON

下面是一个使用流行的跨语言格式[JSON](http://docs.python.org/2/library/json.html)做你想做的事的例子：

```
import json

myDict = {'a':1, 'b':2}

# write to the file 'data'
with open('data','w') as f:
    json.dump(myDict, f)

# now we can load it back
with open('data','r') as f:
    myDictLoaded = json.load(f)

print myDictLoaded 
```

### 输出：

```
{u'a': 1, u'b': 2} 
```

## 泡菜

这是第二个使用[pickle](http://docs.python.org/2/library/pickle.html)做同样事情的例子。`pickle`更强大的是它可以序列化所有* python 对象，甚至是您编写的对象。

```
import cPickle as pickle

myDict = {'a':1, 'b':2}

# write to the file 'data'
with open('data','w') as f:
    pickle.dump(myDict, f)

# now we can load it back
with open('data','r') as f:
    myDictLoaded = pickle.load(f)

print myDictLoaded 
```

### 输出：

```
{'a': 1, 'b': 2} 
```

# c# - 如果 URL 在 URL 中附加了“.js”，则呈现不同的视图

> ID：13675943
> 
> 赞同：0
> 
> 时间：2012-12-03T01:29:09.447
> 
> 标签：c#, asp.net-mvc-3, url, view

如果 URL 类似于以下内容，我想呈现一个普通的 HTML 视图：

```
www.foo.com/scripts/view/23123 
```

`Content`如果该 URL 以`.js`扩展名结尾，我想呈现一个视图。

```
www.foo.com/scripts/view/23123.js 
```

* * *

如何在 ASP.Net MVC3 中实现这样的目标？

这是我的控制器代码：

```
public ActionResult View(string id)
{
    var script = scriptRepository.FindById(id);

    if (true) // Help with this conditional.
    {
        return View(script);
    }
    else 
    {
        return Content(script.Content, "text/javascript");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:33:09.793

```
if (Request.Path.EndsWith(".js", StringComparison.OrdinalIgnoreCase)) 
```

还请考虑您可以在 URL 中创建以 .js 结尾的不同路由。

# github - 如何生成我的 github 项目 wiki 的静态副本？

> ID：13675945
> 
> 赞同：2
> 
> 时间：2012-12-03T01:29:25.123
> 
> 标签：github, markdown, wiki, gollum-wiki

我想从 markdown 文件的目录中生成我的 github 项目 wiki 生成的 HTML 的本地静态副本。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-02T08:50:05.253

如今，它适用于：

```
require 'gollum-lib'
wiki = Gollum::Wiki.new("/mywikirepo")
wiki.pages.each{|p| puts p.formatted_data } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:40:21.983

*   在本地克隆您的存储库并获取 wiki 子模块（请参见[此处](https://github.com/blog/699-making-github-more-open-git-backed-wikis)）
*   安装`gollum`和`redcarpet`宝石
*   红宝石：

    ```
    require 'gollum'
    wiki = Gollum::Wiki.new("proj.wiki")
    wiki.pages.each{|p| puts p.formatted_data } 
    ```

# asp.net-mvc - 单元测试和 HttpContext.Current

> ID：13675953
> 
> 赞同：2
> 
> 时间：2012-12-03T01:30:49.083
> 
> 标签：asp.net-mvc, testing

我希望在我参与的项目中使用单元测试。该解决方案有一个 UI 层、一个域逻辑层和数据库基础，所有这些都分离成物理分离的 dll，所以它现在非常标准。

在域层中，我们有一个类使用

```
new HttpContextWrapper(HttpContext.Current) 
```

获取当前请求的上下文以编译动态菜单的 Url。正如预期的那样，在 Web 环境中运行时一切正常，因为始终设置此 HttpContext.Current。

但是，当我对控制器进行单元测试时，我点击了这行代码并获得了 Null 引用异常。

经过一些研究，我有很多文章建议使用 Mock 创建一个 Fake Http Context 并在创建控制器时设置它，如下所示：

```
var httpContext = FakeHttpContext();
ControllerContext context = new ControllerContext(new RequestContext(httpContext, new RouteData()), controller);
controller.ControllerContext = context; 
```

但这仍然没有改变 HttpContxt.Current 并且我仍然得到一个空引用异常。

我在做什么错/如何解决此异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:20:34.533

您可以使用以下代码创建 HttpContext.Current：

```
[SetUp]
public void Test_SetUp()
{
    var context = CreateHttpContext("index.aspx", "http://tempuri.org/index.aspx", null);
    var result = RunInstanceMethod(Thread.CurrentThread, "GetIllogicalCallContext", new object[] { });
    SetPrivateInstanceFieldValue(result, "m_HostContext", context);
} 
```

私有方法：

```
private static HttpContext CreateHttpContext(string fileName, string url, string queryString)
    {
        var sb = new StringBuilder();
        var sw = new StringWriter(sb);
        var hres = new HttpResponse(sw);
        var hreq = new HttpRequest(fileName, url, queryString);
        var httpc = new HttpContext(hreq, hres);
        return httpc;
    }

    private static object RunInstanceMethod(object source, string method, object[] objParams)
    {
        var flags = BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic;
        var type = source.GetType();
        var m = type.GetMethod(method, flags);
        if (m == null)
        {
            throw new ArgumentException(string.Format("There is no method '{0}' for type '{1}'.", method, type));
        }

        var objRet = m.Invoke(source, objParams);
        return objRet;
    }

    public static void SetPrivateInstanceFieldValue(object source, string memberName, object value)
    {
        var field = source.GetType().GetField(memberName, BindingFlags.GetField | BindingFlags.NonPublic | BindingFlags.Instance);
        if (field == null)
        {
            throw new ArgumentException(string.Format("Could not find the private instance field '{0}'", memberName));
        }

        field.SetValue(source, value);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:52:44.733

你看过[MvcContrib TestHelper](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)吗？我从未使用过它，但我看到其他人已经成功使用它。这是一篇包含[更多示例](http://blog.stevehorn.cc/blog/aspnet-mvc-intro-to-mvccontrib.html)的博客文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:19:00.353

您应该`HttpContextBase`在您的域类中使用，我建议将该域类注入您的控制器，因此在单元测试期间，您可以向被测控制器提供一个带有假 httpcontext 的域类实例。

前任。

```
public class DomainClass
{
  private readonly HttpContextBase _httpContextBase;

  // unit testing
  public DomainClass(HttpContextBase httpContextBase)
  {
     _httpContextBase = httpContextBase;
  }

  public DomainClass()
  {
     _httpContextBase = new HttpContextWrapper(HttpContext.Current);
  }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T01:35:13.137

您不能以这种方式使用 HttpContext.Current 。在我之前的一次演出中，为了解决这个问题，我们必须创建一个单独的包装类并访问该属性。

使用静态是单元测试中非常常见的问题。

**根据您的更新请求：**

```
public static class HttpContextContainer
{
     private static HttpContext _ctx;
     public static HttpContext Current 
     {
         get 
         { 
             if (_ctx == null) _ctx = HttpContext.Current;
             return _ctx;
         }
         set
         {
             _ctx = value;
         }
     }
} 
```

然后在您的使用中，您可能会执行以下操作：

```
new HttpContextWrapper(HttpContextContainer.Current) 
```

和：

```
var httpContext = FakeHttpContext();
HttpContextContainer.Current = httpContext;
ControllerContext context = new ControllerContext(new RequestContext(httpContext, new RouteData()), controller);
controller.ControllerContext = context; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T01:46:26.240

> 在域层中，我们有一个使用 new HttpContextWrapper(HttpContext.Current) 的类

我想你可能有设计问题。

为什么领域层需要 GUI 内容的知识？

您可能希望在控制器构造函数上设置一个参数以接受 IHttpContextWrapper，以便可以传入模拟包装器。像这样：

```
public MyController()
  :this(new HttpContextWrapper())
{
  ....
}

public MyController(IHttpContextWrapper contextWrapper)
{
  ....
} 
```

和看起来像的测试

```
var context = new Mock<IHttpContextWrapper>();
// setup context
var controller = new MyController(context.Object);
.... 
```

然后更改您的控制器以传递域层所需的任何信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-06T16:35:58.527

**警示故事**

警惕使用 MS Fakes 来填充`HttpContext.Current { get; }`

调用`HttpContext.Current { set; }`将成功，但设置的值将不可用。

我们有人`[TestInitialize]`在基于 MSTest 的测试中设置了这个。

```
ShimHttpContext.CurrentGet = () => new ShimHttpContext() 
{ 
  SessionGet = () => new ShimHttpSessionState() 
  { 
    ItemGetString = (name) => 
    { 
      return null; 
    } 
  } 
}; 
```

# ruby-on-rails - ActiveRecord::AssociationType 不匹配。has_many 关系

> ID：13675956
> 
> 赞同：2
> 
> 时间：2012-12-03T01:31:07.043
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, has-many

我是以下错误

```
ActiveRecord::AssociationTypeMismatch in ProposalsController#create

User(#78682120) expected, got String(#68929150)
Rails.root: /home/james/app

Application Trace | Framework Trace | Full Trace
app/controllers/proposals_controller.rb:76:in `new'
app/controllers/proposals_controller.rb:76:in `create'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"0qTzQ/KMA2Ch60aajSg265tThfCTBCB7w0rS8nD4Qwg=",
 "proposal"=>{"phones"=>"",
 "broadband"=>"",
 "fixed_line"=>"",
 "group_calling"=>"",
 "frequent_txt"=>"",
 "frequent_data"=>"",
 "type"=>"TelecommunicationsProposal",
 "contact_type"=>"",
 "extra_options"=>"",
 "current_provider"=>"",
 "closing_date"=>"03/12/2012",
 "users"=>["#<User:0x961c9e4>"]},
 "commit"=>"Create Proposal"} 
```

我正在尝试建立一种关系，使用户有很多提案，并且提案可以有很多用户。

我有它可以为每个用户获得建议，但也需要反过来。

提案.rb

```
 class Proposal < ActiveRecord::Base
      has_many :users
    ... 
```

电信提案.rb

```
class TelecommunicationsProposal < Proposal
  belongs_to :users
  after_create :proposal_creation
  ... 
```

ProposalsController.rb 错误在第 76 行中断，这是 Proposal.new 创建

```
 def create
    @proposal = Proposal.new(params[:proposal])

    if current_user
     @user = current_user 
```

来自 app/views/telecommunications_proposal/_form.html.erb 的小节选

```
 <% for user in User.find(:all) %>  
    <div>  
      <%= check_box_tag "proposal[users][]",user%>  
      <%= user.trading_name %>  
    </div>  
<% end %> 
```

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T01:55:44.447

看起来您应该将`id`用户的 传递给`check_box_tag`，而不是记录本身，并`user_ids`在复选框的名称中使用，而不是`users`：

```
<%= check_box_tag "proposal[user_ids][]", user.id %> 
```

参考：

*   [HABTM 复选框](http://railscasts.com/episodes/17-habtm-checkboxes?view=asciicast)
*   [has_many 添加的方法](http://edgeguides.rubyonrails.org/association_basics.html#methods-added-by-has-many)

# html - 选择标签中的向下箭头图标

> ID：13675957
> 
> 赞同：3
> 
> 时间：2012-12-03T01:31:11.003
> 
> 标签：html, html-select

嗨，我想知道我如何输入以下代码：http: [//jsfiddle.net/Torrecilla/Yv6zx/3/](http://jsfiddle.net/Torrecilla/Yv6zx/3/)

这个向右的箭头：[![选择箭头](../Images/82ec83d82d2dcde78183da55458eb466.png)](https://i.stack.imgur.com/lB0BF.png)

可能吗？我想不通

```
<select name="cats" id="cats">
  <option value="">All the Categories</option>
  <option value="">Cat 1</option>
  <option value="">Cat 2</option>
  <option value="">...</option>
</select>​ 
```

CSS

```
body {
    margin-top:20px;
    margin-left:20px;
}
select {
    padding:3px;
    margin: 0;
    border-radius:4px;
    -webkit-box-shadow: 
        0 0px 0 #ccc,
        0 0px #fff inset;
    background: -moz-linear-gradient(top, #FBFBFB 0%, #E9E9E9 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#FBFBFB), color-stop(100%,#E9E9E9));
    color:black;
    border:none;
    outline:none;
    display: inline-block;
    -webkit-appearance:none; 
    cursor:pointer;
    border: 1px solid #ccc;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:03:37.197

对的，这是可能的！尝试这个：

CSS：

```
background: url('http://i45.tinypic.com/309nb74.png') no-repeat right, -moz-linear-gradient(top, #FBFBFB 0%, #E9E9E9 100%);
background: url('http://i45.tinypic.com/309nb74.png') no-repeat right, -webkit-gradient(linear, left top, left bottom, color-stop(0%,#FBFBFB), color-stop(100%,#E9E9E9)); 
```

您将需要调整填充，但您明白了。

演示：

[http://jsfiddle.net/Yv6zx/24/](http://jsfiddle.net/Yv6zx/24/)

# xpages - 需要将 URL 指向 xpages 中选项卡式表的第二个选项卡

> ID：13675959
> 
> 赞同：0
> 
> 时间：2012-12-03T01:31:26.590
> 
> 标签：xpages, lotus-domino, xpages-ssjs

背景：带有选项卡式表（来自容器控件）和多个数据源的 XPage，每个选项卡一个。如果用户刷新页面，我会遇到保存按钮创建重复项的问题。为了解决这个问题，我实现了 Tommy Valand 创建的这个解决方案。 [http://dontpanic82.blogspot.com/2010/06/xpages-avoid-saving-duplicate-documents.html](http://dontpanic82.blogspot.com/2010/06/xpages-avoid-saving-duplicate-documents.html)

问题是，当用户在第二个选项卡上并使用完全刷新保存文档时（由于附件，我必须这样做）。该功能很好用，除了...

问题：重定向总是将用户带到第一个选项卡。对于除第一个选项卡之外的每个选项卡，这显然都是一个问题。

我想知道一种将 URL 直接指向第二个选项卡的方法。我已经尝试修改 Tommy 的代码以包含一个哈希标签，但我无法让它工作。我什至不确定哈希标签是否适用于 xpages。在此先感谢您对此问题的帮助。

```
 function redirectToCurrentDocument( switchMode:boolean, tab){
  try {
    if( typeof currentDocument === 'undefined' || viewScope.stopRedirect ){ return;       }
    // Gets the name of the XPage. E.g. /Person.xsp
    var page = view.getPageName();

    // Finds extra parameters, strips away XPages parameters/trims leading &
    var parameters = context.getUrl().getQueryString().substring(1);
    var extraParameters = parameters.replace( 
     /([&\?^]*_[a-z0-9=]+[&]{0,1})|(action=\w{4}Document[\&]{0,1})|(documentId=[\w]{32}[\&]{0,1})/ig, '').replace( /\&$/, '' );

    // Gets the unid of the current document
    //var unid = currentDocument.getDocument().getUniversalID();
    //var unid = document1.getDocument().getUniversalID();  //changed this line to make work with multiple data sources - SJZ
    var unid = document1.getDocument().getNoteID();  //also changed to use NoteID since it gave runtime errors for new documents - SJZ

    // Sets/changes the action according according to the mode the document is in
    var isEditable = currentDocument.isEditable();
    if( switchMode ){ isEditable = !isEditable; } // false -> true / true -> false

    var action = ( isEditable ) ? 'editDocument' : 'openDocument';

    // Open the current document via a get request
    var redirectUrl = page + '?documentId=' + unid + '&action=' + action;

    if( extraParameters ){ redirectUrl += '&' + extraParameters; }

    print("tab=" + tab)
    if(tab == "Invoices") { redirectUrl += '#tabPanel1'; }
    if(tab == "Credits") { redirectUrl += '#view:_id1:tabPanel2:editPanelCredits'; }
     print(redirectUrl);
    context.redirectToPage( redirectUrl );
  } catch(e){ /* Exception logging */ }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:21:47.597

您不能使用#HashTag，因为服务器永远不会从浏览器接收此信息。

只需修改您的 tabbedPanel 以通过 URL 参数*"tab"*打开选定的选项卡：

```
<xp:tabbedPanel id="tabbedPanel1">
    <xp:this.selectedTab>
        <![CDATA[#{javascript:
            var p = context.getUrlParameter("tab");
            if(  p === "" )
                p = "Invoices";

            return p
        }]]>
    </xp:this.selectedTab>
    <xp:tabPanel label="New Tab" id="Invoices">
        TAB1 Invoices
    </xp:tabPanel>
    <xp:tabPanel label="New Tab2" id="Credits">
        TAB2 Credits
    </xp:tabPanel>
</xp:tabbedPanel> 
```

现在您可以通过使用*http://example.com/db.nsf/Tab.xsp?tab=Credits*打开 XPage 来控制它。

上面的 SSJS 代码现在可以轻松修改为：

```
...
print("tab=" + tab)
redirectUrl += '&tab=' + tab;
print(redirectUrl);
.... 
```

必须以这种方式修改正则表达式：

```
var extraParameters = parameters.replace( 
 /([&\?^]*_[a-z0-9=]+[&]{0,1})|(tab=\w{0,}[\&]{0,1})|(action=\w{4}Document[\&]{0,1})|(documentId=[\w]{32}[\&]{0,1})/ig, '').replace( /\&$/, '' ); 
```

从 URL中删除*tab参数。*

# java - 连接 Oracle 10g 快捷版和 Java

> ID：13675964
> 
> 赞同：0
> 
> 时间：2012-12-03T01:31:52.640
> 
> 标签：java, oracle10g

我想连接Oracle 10g Express Edition和Java，我遵循的步骤是：

使用以下文件配置我的类路径：

C:\oracle\app\oracle\product\10.2.0\server\jdbc\lib\ojdbc14.jar

C:\Program Files\Java\jdk1.7.0_01\bin

C:\oracleexe\app\oracle\product\10.2.0\server\BIN

然后我尝试了以下程序将其与 OCI 驱动程序连接：

```
import  java.sql.*;

public class OracleOCIConnection
{
   public static void main(String args[])
   {
      try
      {
      // load oracle driver
         Class.forName("oracle.jdbc.driver.OracleDriver");
      // connect using Native-API (OCI) driver
         Connection con = DriverManager.getConnection("jdbc:oracle:oci8:@","hr","hr" );
         System.out.println("Connected Successfully To Oracle using OCI driver");
         con.close();
      }
         catch(Exception ex)
         {
            ex.printStackTrace();
         }
   }
} 
```

还有这个使用瘦驱动程序：

```
import  java.sql.*;

public class OracleThinConnection
{
   public static void main(String args[])
   {
      try
      {
      // load oracle driver
         Class.forName("oracle.jdbc.driver.OracleDriver");
      // connect using Thin driver
         Connection con =  DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","hr","hr");
         System.out.println("Connected Successfully To Oracle");
         con.close();
      }
         catch(Exception ex)
         {
            ex.printStackTrace();
         }
   }
} 
```

在这两种情况下，程序都会编译，但引发错误的行是：

Class.forName("oracle.jdbc.driver.OracleDriver");

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:42:55.443

首先，`C:\Program Files\Java\jdk1.7.0_01\bin`从您的类路径中删除。它与它无关。

其次，问题在于您的运行时类路径。请记住，编译时类路径和运行时类路径是两个不同的东西。您是否使用 IDE（例如 Eclipse）来运行它？如果是这样，请检查哪些类路径条目在运行时生效。在 Eclipse 中，您可以通过查看为运行您的应用程序而创建的启动配置来获取此信息（请参阅“类路径”选项卡）。

如果您通过命令行设置类路径，那么里面的空白可能`Program Files`是问题所在。尝试用引号将整个类路径参数括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T12:15:23.510

我正在使用 ojdb6.jar 而不是 ojdbc14.jar 它对我来说很好，这是我的代码

```
try{
            Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
            String dbAddress = "localhost";
            Connection con = DriverManager.getConnection("jdbc:oracle:thin:hr/hr@"+dbAddress+":1521/XE");

            if(!con.isClosed()){
                System.out.println("Connection Successful");
            }else{
                System.out.println("Connection is Closed);
            }
        }
        catch(Exception ex){
            System.out.println("Error :"+ex.getMessage());
        } 
```

# c++ - 带有符号指标的 KNN 搜索

> ID：13675969
> 
> 赞同：2
> 
> 时间：2012-12-03T01:32:33.013
> 
> 标签：c++, algorithm, nearest-neighbor, knn

我正在寻找一个 C++ 库，它允许使用平方伪范数有效地找到点集中一个点的 k 最近邻居：
![在此处输入图像描述](../Images/ea5483cf3425c32f80c88e282641c937.png)

我的第三个坐标在其平方范数中可能有也可能没有减号。或者，我可以考虑一个 4D 空间，其中第三个组件始终具有正号，而第四个组件始终具有负号。

ANN 库的文档表明它可以使用任何“Minkowski”度量。上面的度量是 Minkowski 度量的定义（在[Wolfram Mathworld](http://mathworld.wolfram.com/MinkowskiMetric.html)的意义上，但不是 ANN 的意义上）。然而，ANN 似乎很灵活，似乎只需要一个“+”和“-”运算符（[ANN 文档](http://www.cs.umd.edu/~mount/ANN/Files/1.1.2/ANNmanual_1.1.pdf)，第 14 页），但它们不是按组件定义的，而是全局定义的。

有没有人概括过人工神经网络来处理这种情况？是微不足道的吗？它不会搞砸 kd-tree 吗？是否存在另一个图书馆？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:19:53.113

范数 x ² +y ² -z ²违反了使用 kd-tree 的搜索通常基于的一些假设。其中一个假设是“邻域”（“靠近”）是一些“局部”属性，即给定一个点 P，所有点 Q 的`dist(P,Q) < r`坐标都在 P 的坐标周围的有限范围内。因此，沿着它们的坐标分割点集可以利用坐标进行有效搜索。但是对于上述范数，即使对于`dist([0,0,0],Q) = 0`没有有限框的点 Q 也可以给出；这些点位于一个无限圆锥上。仍然应该可以设计一种利用“锥形”结构的有效搜索算法 - 但 kd-tree 将不起作用。

# ruby - 当我启动 sidekiq 时，cloudfoundry 无法自动配置 MySQL

> ID：13675977
> 
> 赞同：1
> 
> 时间：2012-12-03T01:33:00.793
> 
> 标签：ruby, cloud-foundry

我用来在我的“*新应用程序*`RAILS_ENV=production bundle exec sidekiq`”中启动我的背景作业处理器sidekiq ，它与rails APP相关，它必须访问Rails模型。

 *但它失败了一个错误的mysql连接。Redis连接重新配置好了，但是mysql连接不行。

那么如何解决这个问题呢？

--- 添加了 2012 年 12 月 4 日 ---[在](https://github.com/crhan/hztqsk/tree/cf)分支**cf**
中 使用 repo*

# javascript - ASP.NET 不注入 javascript 函数

> ID：13675980
> 
> 赞同：0
> 
> 时间：2012-12-03T01:33:31.307
> 
> 标签：javascript, asp.net

知道为什么我的函数没有注入网页吗？我很确定我以前做过这个并且它有效，但是当我从 VS 启动并查看页面时，我在任何地方都看不到它。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string deviceID = Guid.NewGuid().ToString();
        string deviceFunction = "function GetDeviceID() { return '" + deviceID + "'; }";

        ClientScript.RegisterClientScriptBlock(GetType(), "DeviceID", deviceFunction, true);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:52:07.503

我能够找到这个问题的答案。原来你*必须*有一个`<from>`标签`runat="server"`才能让它工作。

# c# - C#中的for循环错误

> ID：13675985
> 
> 赞同：-3
> 
> 时间：2012-12-03T01:34:08.557
> 
> 标签：c#

我试图运行这个 for 循环来填充数据网格视图中的某个列，但给出“索引超出范围。必须是非负数并且小于集合的大小。参数名称：索引”的错误

```
 for (int i = 0; i < noofloops; i++)
              {
                  dgroute.Rows[i].Cells[0].Value ="Hey";
              } 
```

我得到了一些新的附加信息......这是我真正想要做的整个代码是我想将 datepicker1 的日期获取到 datepicker2。我减去 date1 和 date2 以获得 2 个日期的差异并循环它以便在 datagridview 中显示 date1 和 date2 之间的所有特定日期

```
 private void btnOK_Click(object sender, EventArgs e)
        {
              DateTime A = dtFrm.Value;
              DateTime B = dtTo.Value;
              TimeSpan ts = B - A;
              int days = ts.Days;

                  for (int i = 0; i < dgroute.Rows.Count; i++)
                  {

                      dgroute.Rows[i].Cells[0].Value ="Hey";

                  }

              }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:39:26.590

考虑：

```
 for (int i = 0; i < noofloops && i < dgroute.Rows.Count; i++)
          {
              dgroute.Rows[i].Cells[0].Value ="Hey";
          } 
```

您很可能在 dgroute.Rows 的末尾进行索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:36:28.410

尝试将循环更改为此：

```
for (int i = 0; i < dgroute.Rows.Count; ++i)
{
    dgroute.Rows[i].Cells[0].Value ="Hey";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:39:02.220

尝试这个

```
for (int i = 0; i < dgroute.Rows.Count -1; ++i)
{
    dgroute.Rows[i].Cells[0].Value ="Hey";
} 
```

# javascript - 将文本字段的值返回给 JavaScript

> ID：13675991
> 
> 赞同：1
> 
> 时间：2012-12-03T01:35:22.013
> 
> 标签：javascript, html, web-applications

我知道这是一个非常基本的问题，但我对（非 HTML）编程非常陌生，并且在学习了 CodeAcademy 上的大部分 JS 曲目之后，我仍然在努力让我学到的任何东西真正发挥作用。

所以我决定设计一个简单的基于 JavaScript 的命令行作为对自己的挑战。当然，我写的第一个实际代码拒绝工作，尽管不断摆弄。

这是HTML（好吧，相关位）：

```
<input type="text" id="commandfield"></input>
<button type="button" onclick="enterCommand()">Enter</button> 
```

这是Javascript：

```
var field = document.getElementById("commandfield");

function enterCommand () {
    var input = field.value;
    alert(input);
} 
```

...并且没有警报显示。我测试了一个纯字符串警报，它运行良好，所以我知道问题出在#commandfield 的获取值上。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:38:43.157

选择函数内的元素：

```
function enterCommand () {
    var field = document.getElementById("commandfield");
    if (field) {
        var input = field.value;
        alert(input);
    }
} 
```

这将选择在事件发生时给定 DOM 状态的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:12:28.630

```
function enterCommand () {
    var field = document.getElementById("commandfield");      
    var input = field.value;
    alert(input);
} 
```

试试这个，我想你把脚本放在 head 标签中，而不是 body 标签的底部。

所以无法获取该节点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:41:05.840

我试过了，这行得通：

```
<script type="text/javascript">
function enterCommand () {
var field = document.getElementById("commandfield");
var input = field.value;
window.alert(input);
}
</script>
<input type="text" name="commandfield" id="commandfield">
<button type="button" onclick="enterCommand()">Enter</button> 
```

# c# - 如何知道特定文本框是否有变化，文本框是在C#中动态创建的

> ID：13675992
> 
> 赞同：2
> 
> 时间：2012-12-03T01:35:23.377
> 
> 标签：c#, winforms, textbox

如果在动态创建的特定文本框中也有更改，我想在其他动态创建的文本框中输入一个值。我怎么可能这样做？

这就是我创建文本框的方式：

```
for (int x = 0; x < dt.Rows.Count; x++)
        {
            TextBox txt = new TextBox();
            txt.Name = dt.Rows[x]["field_name"].ToString();
    txt.Text = txt.Name;
            txt.Width = 200;
            var margintx = txt.Margin;
            margintx.Bottom = 5;
            txt.Margin = margintx;

            flowLayoutPanelText.Controls.Add(txt);
        } 
```

这是它的输出：

![在此处输入图像描述](../Images/222cbcd89eea9363f70070a387481b57.png)

例如，如果我为 Mag Data 输入一个值，它也会将该值传递给 Card Number 和 Exp Date。我怎么可能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:49:27.427

您可以动态地将事件处理程序添加到您的 Dynamic `TextBox's`TextChanged 事件中，并且由于您还使用您的`Field`名称作为您的`TextBox`名称，您可以转换您的事件发送者对象以确定哪个`TextBox`已更改。

```
for (int x = 0; x < dt.Rows.Count; x++)
{
    TextBox txt = new TextBox();
    txt.TextChanged += new EventHandler(txt_TextChanged);
    txt.Name = dt.Rows[x]["field_name"].ToString();
    txt.Text = txt.Name;
    txt.Width = 200;
    var margintx = txt.Margin;
    margintx.Bottom = 5;
    txt.Margin = margintx;
    flowLayoutPanelText.Controls.Add(txt);
}

void txt_TextChanged(object sender, EventArgs e)
{
    TextBox tb = (TextBox)sender;
    if (tb.Name == "Mag Data")
    {
        //Do Stuff Here
    }
} 
```

* * *

您遇到的问题是您的`Name`属性不可访问，`TextBox`即您不能执行“卡号”。文本您需要在控件集合中搜索名为“卡号”的文本框，您可以使用[Controls.Find](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find%28v=vs.100%29.aspx)方法这样做。

IE

```
if (tb.Name == "Mag Data")
{
    Control[] cntrl = Controls.Find("Card Number", true);
    if (cntrl.Length != 0)
    {
        ((TextBox)cntrl[0]).Text = tb.Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:48:26.827

向文本框添加事件处理程序：

```
txt.TextChanged += (sender, args) => {
    // Logic to update other textboxes
}; 
```

# java - 调整多行文本视图的大小以正确大小

> ID：13675998
> 
> 赞同：2
> 
> 时间：2012-12-03T01:35:50.713
> 
> 标签：java, android, android-layout

我有一个 TextView，其文本太大而无法放在一行中，因此它将我的全文显示在不同的行上。但是，TextView 的宽度现在占据了整个屏幕，即使文本本身没有。

例如，假设我的文本是“一些长文本”。Get的显示如下：

一些长
文

我已经使用 wrap_content 定义了 TextView。

```
<TextView 
    android:id="@+id/txtMainText" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Some long text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#000000" /> 
```

我希望 TextView 的宽度是“Some long”的宽度，而不是更宽。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:35:38.007

两种解决方法：

一个是：

设置父布局的 layout_width = wrap_content

另一个是：

在您的代码中测量文本视图的宽度，并设置宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T15:38:46.937

正如@EarlGrey 所说，请参阅[为什么将内容包装在多行 TextView 填充父项中？](https://stackoverflow.com/questions/7439748/why-is-wrap-content-in-multiple-line-textview-filling-parent).

```
public class WrapWidthTextView extends AppCompatTextView {

    public WrapWidthTextView(Context context) {
        super(context);
    }

    public WrapWidthTextView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
    }

    public WrapWidthTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    protected void onMeasure(int widthSpec, int heightSpec) {
        int widthMode = MeasureSpec.getMode(widthSpec);

        // If wrap_content.
        if (widthMode == MeasureSpec.AT_MOST) {
            Layout layout = getLayout();
            if (layout != null) {
                int maxWidth = (int) Math.ceil(getMaxLineWidth(layout)) +
                        getCompoundPaddingLeft() + getCompoundPaddingRight();
                widthSpec = MeasureSpec.makeMeasureSpec(maxWidth, MeasureSpec.AT_MOST);
            }
        }
        super.onMeasure(widthSpec, heightSpec);
    }

    private float getMaxLineWidth(Layout layout) {
        float max_width = 0f;
        int lines = layout.getLineCount();
        for (int i = 0; i < lines; i++) {
            if (layout.getLineWidth(i) > max_width) {
                max_width = layout.getLineWidth(i);
            }
        }
        return max_width;
    }
} 
```

在 XML 中：

```
<com.your_package.WrapWidthTextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ... 
/> 
```

不要忘记重建项目以查看 XML 的变化。