# StackOverflow 问答 12883000-12883999

# listview - JavaFX 2 中的多列（包装）ListView

> ID：12883001
> 
> 赞同：2
> 
> 时间：2012-10-14T14:10:29.027
> 
> 标签：listview, javafx-2, javafx

我正在寻找创建一个 ListView 来填充来自指定目录的许多图像。这一切都很好，但令人讨厌的是，我似乎找不到让 ListView 换行或显示在多列中的方法（目前每行只有一个图像，考虑到没有文本，这很烦人。）

使用 Swing 的 JList，这可以通过 来完成`jList.setLayoutOrientation(JList.HORIZONTAL_WRAP);`，但我在 JavaFX 2 中看不到等效项 - 我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-30T17:20:33.963

由于我遇到了完全相同的问题，因此我也朝这个方向进行了调查。如果您只有很少的项目，TilePane 可能是一个解决方案，但如果您有很多项目，它会变得非常慢并消耗大量资源。（按照设计，TilePane 不支持 UI 虚拟化。也就是说，重用/回收不再在视口中的项目节点。）

因此，我的想法是继承 ListView 并创建一个 WrappedListView，但我偶然发现了一个完美的解决方案：ControlsFX 是 JavaFX 控件的开源集合，它恰好有一个支持虚拟化的 GridView 控件。

**ControlsFX GridView**

![GridView 在行动](../Images/c71a6ae43c8ec87ea54fce5086577830.png)

这是 ControlsFX 中所有控件的概述。 [http://fxexperience.com/controlsfx/features/](http://fxexperience.com/controlsfx/features/)

对于下载库，他们在其开发站点中提供了标准方式，例如 Maven Dependency：[https ://bitbucket.org/controlsfx/controlsfx/](https://bitbucket.org/controlsfx/controlsfx/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T15:42:50.117

`javafx.scene.control.ListView`不支持这样的功能。

鉴于您只是将图像放入其中，您可能只想`TilePane`用来显示它们。

# c# - ASP.NET MVC 3 中的 DropdownList 无法填充数千条记录

> ID：12883005
> 
> 赞同：-2
> 
> 时间：2012-10-14T14:11:15.977
> 
> 标签：c#, asp.net, sql-server

如何使*asp.net mvc 3*中的下拉列表处理数千条记录？

我试图用 10,000 条记录填充它，但它不起作用。相反，它将刷新页面。

顺便说一句，我正在使用 Entity Framework `DBContext`。

需要一些有关如何解决此问题的帮助..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:17:32.560

如果您的下拉列表中有 10k 个项目，最好不要使用下拉列表。使用更快/更精简的东西，例如自动完成框或搜索字段。

# php - 减少 HTML hX 标签的 PHP 代码

> ID：12883009
> 
> 赞同：-4
> 
> 时间：2012-10-14T14:11:37.577
> 
> 标签：php, html

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我正在寻找一个减少 html hx (h1, h2, h3, ..., h6) 标签的 php 函数。

*   h1 变成 h2
*   h2 变成 h3 以此类推
*   ...
*   h6 被 ' ' 取代

你知道这样的功能吗？

这就是我开始剥离 h6 标签的方式：

```
$string = preg_replace('#<(?:/)?\s*h6\s*>#', ' ', $string); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:01:01.553

这是一个 for [`DOM`](http://www.php.net/manual/en/book.dom.php)，它遍历所有映射，然后替换标签或复制子项。

```
<?php

// New tag mappings:
//     null => extract childs and push them into parent contrainer
// Make sure that they are in this order, otherwise they would match wrongly
// between each another
$mapping = array(
    'h6' => null,
    'h5' => 'h6',
    'h4' => 'h5',
    'h3' => 'h4',
    'h2' => 'h3',
    'h1' => 'h2'
);

// Load document
$xml = new DOMDocument();
$xml->loadHTMLFile('http://stackoverflow.com/questions/12883009/php-code-to-decrease-html-hx-tags') or die('Failed to load');

$xPath = new DOMXPath( $xml);

foreach( $mapping as $original => $new){
    // Load nodes
    $nodes = $xPath->query( '//' . $original);

    // This is a critical error and should NEVER happen
    if( $nodes === false){
        die( 'Malformed expression: //' . $original);
    }

    echo $original . ' has nodes: ' . $nodes->length . "\n";

    // Process each node
    foreach( $nodes as $node){
        if( $new == null){
            // Append all the childs before self and remove self afterwards
            foreach( $node->childNodes as $child){
                $node->parentNode->insertBefore( $child->cloneNode( true), $node);
            }
            $node->parentNode->removeChild( $node);

        } else {
            // Create new empty node and push all childrens to it
            $newNode = $xml->createElement( $new);
            foreach( $node->childNodes as $child){
                $newNode->appendChild( $child);
            }
            $node->parentNode->replaceChild( $newNode, $node);
        }
    }
}

echo $xml->saveHTML(); 
```

你也可以做一些[`xPath`优化](http://www.w3schools.com/xpath/xpath_syntax.asp)，比如使用`//*`or`//h3|//h2`和检查[`DOMElement::tagName`](http://www.php.net/manual/en/class.domelement.php#domelement.props.tagname)，但我希望这是直截了当的。

* * *

### 编辑：仅通过节点一次且不关心顺序的解决方案：

```
<?php
// The beginning (everything to the first foreach loop) remains the same
// Load nodes
$nodes = $xPath->query( '//*');

// This is a critical error and should NEVER happen
if( $nodes === false){
    die( 'Malformed expression: //' . $original);
}

// Process each node
foreach( $nodes as $node){
    // Check correct $node class
    if( !($node instanceof DOMElement)){
        continue;
    }
    $tagName = $node->tagName;  

    // Do we have a mapping?
    if( !array_key_exists( $tagName, $mapping)){
        continue;
    }
    $new = $mapping[$tagName];
    echo 'Has element: ' . $tagName . ' => ' . $new . "\n";

    if( $new == null){
        // Append all the childs before self and remove self afterwards
        foreach( $node->childNodes as $child){
            $node->parentNode->insertBefore( $child->cloneNode( true), $node);
        }
        $node->parentNode->removeChild( $node);

    } else {
        // Create new empty node and push all childrens to it
        $newNode = $xml->createElement( $new);
        foreach( $node->childNodes as $child){
            $newNode->appendChild( $child);
        }
        $node->parentNode->replaceChild( $newNode, $node);
    }
}

echo $xml->saveHTML(); 
```

我能想到的最后一个优化是使用：

```
$xPathQuery = '//' . implode( array_keys($mapping), '|//');
$nodes = $xPath->query( $xPathQuery); 
```

# postgresql - 如何在现有数据库中安装 postgresql-contrib 模块？

> ID：12883010
> 
> 赞同：5
> 
> 时间：2012-10-14T14:11:40.010
> 
> 标签：postgresql, module

我`postgresql 9.1.6`在 CentOS 上使用。我想使用二进制文件安装[postgresql-contrib](http://www.postgresql.org/docs/9.1/static/contrib.html)模块，但我在网上找不到。我不确定是否可以在已经安装`postgresql`. 是否有可能做到这一点？

我`postgresql`按以下方式安装：

```
wget http://ftp.postgresql.org/pub/source/v9.1.6/postgresql-9.1.6.tar.gz
tar -xzf postgresql-9.1.6.tar.gz 
cd postgresql-9.1.6./configure --prefix=$HOME
make 
make install 
```

我目前正在使用此安装中的数据库，并且不希望重新安装它（如果可能）。

我知道一旦我安装了这个，我可以通过以下方式使用一个函数：

```
create extension tablefunc ; 
```

编辑：如果我按照[此处](http://www.postgresql.org/docs/9.1/static/contrib.html)的说明进行操作，是否 `gmake`会`gmake install`影响现有数据库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T14:18:43.027

您可能很难找到作为二进制发行版的 contrib 模块；但是，您链接的页面有关于如何构建 contrib 模块的明确说明：

从源代码分发构建时，这些模块不会自动构建。您可以通过运行来构建和安装所有这些

```
gmake
gmake install 
```

在配置的源代码树的 contrib 目录中；或仅构建和安装一个选定的模块，在该模块的子目录中执行相同操作。

或者，您可以尝试使用 yum（软件包是 postgresql-contrib.x86_64），但如果您从源代码安装 Postgres，我无法保证结果。

# iphone - 在 MapView (iOS) 中的两个坐标之间绘制路径

> ID：12883016
> 
> 赞同：1
> 
> 时间：2012-10-14T14:12:58.433
> 
> 标签：iphone, objective-c, ios, cocoa-touch, mapkit

> **可能重复：**
> [在 iPhone MapView 上显示当前位置和所需位置之间的路线](https://stackoverflow.com/questions/8604619/show-route-between-current-and-desired-location-on-iphone-mapview)

我试图在 iOS 中的 MapView 上的两个坐标之间绘制路径，但我不知道如何。我在一个视图中有两个纬度和经度点。

如何绘制这两点之间的路径？我已经附上了这个问题的例子。请帮我。任何教程和代码将不胜感激！

![在此处输入图像描述](../Images/c6a6f047da522b2c44c83f4e43a0ae09.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:29:47.683

一个简单的答案是；你不能。至少，不使用 iOS 的内置 API 方法。

据我到目前为止所见，您有三种选择：

1.  使用提供此类功能的外部库 - 我确信在 GitHub 上可以找到很多。

2.  编译相应的 url 并打开移动 safari，指向带有路线请求的 Google 地图。

3.  使用 iOS 5/6 的内置方法在原生 Maps.app 中打开您的路线

我在应用程序中使用了第三种方法，这种方法效果很好，但也有缺点，即用户在地图中查看路线时必须离开您的应用程序。然而，它确实保持一致，并且不像打开移动 Safari 那样让用户感到不安。

如果您确实找到了在自己的应用程序中执行此操作的方法，我会很想看看您的结果。

# iphone - UITableView 使用 plist 制作一个 pervious 和 next 按钮？

> ID：12883020
> 
> 赞同：2
> 
> 时间：2012-10-14T14:13:24.573
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我使用带有 plist 的 UITableView 来制作表格视图，而不是如何在 DetailView 中制作上一个/下一个按钮（不返回表格视图并按下下一项）？

该程序：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSMutableDictionary *labelDict = [[[NSMutableDictionary alloc]initWithContentsOfFile:[[[NSBundle mainBundle]bundlePath]stringByAppendingPathComponent:@"myData.plist"]] retain];
    cellImages = [[NSMutableArray alloc ] initWithArray:[labelDict objectForKey:@"image"]];
    cellTitles = [[NSMutableArray alloc] initWithArray:[labelDict objectForKey:@"title"]];
    cellSubTitles = [[NSMutableArray alloc] initWithArray:[labelDict objectForKey:@"subtitle"]];

    NSLog(@"%@", [[[NSBundle mainBundle] bundlePath]stringByAppendingPathComponent:@"myData.plist"]);

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    // Configure the cell.

    cell.textLabel.text = [cellTitles objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [cellSubTitles objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:[cellImages objectAtIndex:indexPath.row]];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!self.detailViewController) {
        self.detailViewController = [[[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil] autorelease];
    }

    [self.navigationController pushViewController:self.detailViewController animated:YES];
    self.detailViewController.detailImage.image = [UIImage imageNamed:[cellImages objectAtIndex:indexPath.row]];
    self.detailViewController.detailDescriptionLabel.text = [cellTitles objectAtIndex:indexPath.row];
    self.detailViewController.subTitle.text = [cellSubTitles objectAtIndex:indexPath.row];
    self.detailViewController.title = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:22:43.397

将数据数组和当前索引传递给详细视图控制器。将操作添加到将选择要显示的当前记录的按钮。

# objective-c - 外包代码

> ID：12883021
> 
> 赞同：0
> 
> 时间：2012-10-14T14:13:36.267
> 
> 标签：objective-c

我的 iPhone 游戏有很多**重复代码**（移动图片、添加分数），这使得在每次单击按钮时重复相同的代码时它太大了。

***这是 ViewController.m***

Viewcontroller.h 和 ViewController.m 之间的接口和实现是正确的 - 运行良好

```
- (IBAction)button_xx_pressed:(id)sender
{

    //trying to call the outsourced code
    [self this_is_a_test];  

} 
```

所以我尝试制作外包的重复代码。我不需要返回结果或其他东西的方法或函数。只需执行一些操作，例如 NSLog 输出...（只是一个测试）。或者在原始版本中 - 移动图片，添加分数和其他东西。

***这是外包.h***

```
#import "Outsourcing.m"

@end 
```

***这是外包.m***

```
#import "Outsourcing.h"

- (void)this_is_a_test {

    int test_variable = 999;

    NSLog(@"Give me a test output: = %i", test_variable);

}

@end 
```

这将使我的游戏大小缩小 80% 以上（非常重要）。我有数以千计的重复编程行，目前，我不知道如何处理它。

*实际错误信息：*

Outsourcing.h => 缺少方法声明的上下文

Outsourcing.m => 方法声明缺少上下文 => @end 必须出现在 Objective-C 上下文中

有人对我有任何提示吗？非常感谢...我的游戏其余部分都很好...一切都可以正常运行。我很高兴我让它运行起来（但游戏大小是个问题）。1 或 2 个月前，我以前从未使用过 xcode。我刚刚在VBA方面有一些经验。和我想要的类似。

=> 调用 this_is_a_test

=> 私有子 this_is_a_test()

但似乎我太愚蠢了:-(

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:48:08.420

```
@interface Outsourcing : NSObject

- (void)this_is_a_test;

@end 
```

* * *

```
#import "Outsourcing.h"

@implementation
- (void)this_is_a_test {

    int test_variable = 999;

    NSLog(@"Give me a test output: = %d", test_variable);
}
@end 
```

你在 ViewController 中这样称呼它：

```
#import "Outsourcing.h"

...

- (IBAction)button_xx_pressed:(id)sender
{
    Outsourcing *outsourcing = [[[Outsourcing alloc] init] autorelease];

    //trying to call the outsourced code
    [outsourcing this_is_a_test];  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:49:14.880

你不见了

```
@interface Outsourcing : NSObject 
```

在您的头文件（Outsourcing.h）中。消除：

```
#import "Outsourcing.m" 
```

您导入头文件，而不是源文件....您还缺少：

```
@implementation Outsourcing 
```

在您的 .m 文件中，就在导入声明之后。

# android - 在Android中的谷歌地图上为每个标记“覆盖”提供不同的ID

> ID：12883026
> 
> 赞同：0
> 
> 时间：2012-10-14T14:14:22.863
> 
> 标签：android, google-maps, android-mapview, overlays

我希望地图（地图视图）上的每个标记都具有不同的 ID，以便我可以在运行时将其删除或动态更改其图标。

我们如何做到这一点？

另外，我想要最好的方法在地图上添加许多标记，而不会在移动它时变慢。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:20:24.897

> 我们如何做到这一点？

子类`OverlayItem`化并存储你想要的任何东西，使用它而不是`OverlayItem`你的项目的普通类。例如，[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Maps/ILuvNooYawk)有一个`CustomItem`子类`OverlayItem`，除其他外，它在运行时绘制不同的图标。

> 另外，我想要最好的方法在地图上添加许多标记，而不会在移动它时变慢

不要“添加许多标记”到一个`ItemizedOverlay`, 到它“在移动它时用胶带覆盖它时”的程度。`ItemizedOverlay`专为少量物品而设计。

如果您需要很多项目，您很可能需要创建自己的`Overlay`，您可以更智能地了解在任何给定时间您的项目的哪个子集是相关的。

# windows - 带有 TreeView 的 PropertySheet（使用 WinAPI）

> ID：12883028
> 
> 赞同：1
> 
> 时间：2012-10-14T14:14:35.317
> 
> 标签：windows, winapi, win32gui

在我的 WinAPI 程序中，我使用 PropertySheet 作为设置对话框。我使用带有页面（选项卡）的属性表，即我使用 PSH_PROPSHEETPAGE 标志。但是对于这种类型的属性表，软件现在有太多的参数。所以我想将 PropertySheet 与树视图一起使用：左侧的树视图和树视图中当前选定项目的参数页面 - 右侧。我怎样才能做到这一点？可以为此修改我当前的属性表吗？如何修改？（仅使用 WinAPI，不使用 MFC）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:30:57.473

标准的属性表对你来说已经不够用了，所以你在这里基本上有两个选择。您可以设计一个窗口（模式或无模式，基于或不基于对话框）以在单个视图中托管所有控件，包括树视图，可能还有选项卡控件，并显示/隐藏元素以跟随树视图选择。您会将所有控件移动到此窗口中。

或者，您可以创建一个类似的窗口来托管属性页。在树选择更改时，您将切换属性页，就好像它们被标准属性表中的选项卡选择一样。关键是您可以完整地使用现有页面，使这个新设置窗口模仿标准属性表的行为。这可能是一件更复杂的事情，但应该足够灵活，可以执行一次并接受各种页面，并且您也不需要触摸现有页面代码，使其既适合标准工作表，也适合带有树的自定义工作表。

这两种方法都假设您需要做很多工作，因为您放弃使用标准代码 - 属性表窗口。

# java - 泽西岛制作媒体类型冲突

> ID：12883029
> 
> 赞同：16
> 
> 时间：2012-10-14T14:14:43.910
> 
> 标签：java, jersey, javafx-2

我目前正在试用 Jersey，按照[此](http://netbeans.org/kb/docs/websvc/rest.html)链接在 netbeans 中设置 Web 服务。我有我的实体类和我的 REST 类。它可以从 javafx2 客户端添加、编辑、删除、请求对象（在本例中为用户对象）。

但是，现在我尝试向我的 web 服务添加一个新方法来进行一些简单的身份验证。首先，我在 Users.java 文件中添加了一个新的命名查询 (Users.login)：

```
@NamedQueries({
    @NamedQuery(name = "Users.findAll", query = "SELECT u FROM Users u"),
    @NamedQuery(name = "Users.login", query = "SELECT u FROM Users u WHERE u.username = :username AND u.password = :password"),
    @NamedQuery(name = "Users.findById", query = "SELECT u FROM Users u WHERE u.id = :id"),
    @NamedQuery(name = "Users.findByUserlevel", query = "SELECT u FROM Users u WHERE u.userlevel = :userlevel"),
    @NamedQuery(name = "Users.findByDisabled", query = "SELECT u FROM Users u WHERE u.disabled = :disabled")
}) 
```

之后，我将以下代码添加到我的 UsersFacadeREST.java 文件（由 Netbeans 7.2 生成）：

```
@GET
@Path("{username}/{password}")
@Produces({"application/xml", "application/json"})
public Users login(@PathParam("username") String username, @PathParam("password") String password) {
    return em.createNamedQuery("login", Users.class)
            .setParameter("username", username)
            .setParameter("password", password)
            .getSingleResult();
} 
```

但是，在尝试部署 Web 服务时收到以下错误：

```
SEVERE: Producing media type conflict. The resource methods public entities.Users service.UsersFacadeREST.login(java.lang.String,java.lang.String) and public java.util.List service.UsersFacadeREST.findRange(java.lang.Integer,java.lang.Integer) can produce the same media type 
```

由于我是新手，我不知道为什么 login() 方法会与 findRange() 发生冲突？第一个有 2 个 String 参数并给出一个 Users 对象，第二个有 2 个整数参数并返回一个 List 对象？有什么办法可以解决这个问题，因为我需要将一些自定义查询添加到我的网络服务中......

完成：

```
@GET
@Path("{from}/{to}")
@Produces({"application/xml", "application/json"})
public List<Users> findRange(@PathParam("from") Integer from, @PathParam("to") Integer to) {
    return super.findRange(new int[]{from, to});
} 
```

超类中的代码 (AbstractFacade.java)

```
public List<T> findRange(int[] range) {
    javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
    cq.select(cq.from(entityClass));
    javax.persistence.Query q = getEntityManager().createQuery(cq);
    q.setMaxResults(range[1] - range[0]);
    q.setFirstResult(range[0]);
    return q.getResultList();
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-14T19:50:07.077

问题是，这两种方法都使用匹配相同 URI 的路径模板。`"{a}/{b}"`等价于`"{c}/{d}"`- 以同样的方式`"{username}/{password}"`等价于`"{from}/{to}"`. 而且因为这两种方法也使用相同的媒体类型，所以存在歧义。您可以通过在路径模板中使用正则表达式来解决此问题，使其更加具体。即因为`"{from}/{to}"`应该总是数字，你可以通过改变它来消除歧义，如下所示`"{from: [0-9]+}/{to: [0-9]+}"`：

无论如何，您确定没有用户会从用户名和密码中选择纯数字吗？看起来在您的情况下，为这两个资源中的每一个使用不同的 URI“子空间”会更好。例如：`login/{username}/{password}`和`ranges/{from}/{to}`。

但是，关于设计的几点：

1.  将密码放在 URI 中是一个**非常糟糕的主意。**永远不要这样做！查看一些现有的经过验证的身份验证方案 - 不要试图重新发明轮子。
2.  考虑使用查询参数来指定范围 - 例如，如果您有一些集合资源（如“myapp.com/calendar/events”），您可以使用查询参数对范围进行建模 - 例如“myapp.com/calendar/events?from=xxx&to=yyy .

# android - Admob 横幅未显示但在 logcat 中工作？

> ID：12883030
> 
> 赞同：2
> 
> 时间：2012-10-14T14:14:44.680
> 
> 标签：android

我编写了一个测试应用程序来使用布局文件中的 xml 来实现 admob 横幅。我第一次运行应用程序时，它工作正常，我可以看到横幅。我添加了第二个活动，我能够在活动之间切换，我仍然可以看到横幅。

第二天，我尝试再次运行该应用程序，但横幅未显示。我检查了目录日志，它告诉我广告请求已成功，但由于我的库存为空，因此没有返回任何广告。

我想知道当你在 eclipse 上工作时这是否正常。或者，即使库存中没有广告，横幅仍然会显示。

谢谢，

理查德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:47:41.977

如果您收到此错误，您的代码可能是正确的（您说它之前有效并且您没有更改任何内容）。问题是 AdMob 并不总是有一个广告可以返回到每个请求。您可以启用 `Use keyword-targeted ads and Google certified ad networks (GCANs) to improve fill rate.`AdMob 应用中的设置来提高填充率。

如果您想确保您的代码按预期工作，您可以将 testmode 设置为 true，如果您收到广告，则可以确保您的代码是正确的。

# php - $_GET 的四个变量不适用于 MYSQL

> ID：12883032
> 
> 赞同：0
> 
> 时间：2012-10-14T14:15:10.163
> 
> 标签：php, android, mysql

我试过这个：

```
$result = mysql_query("SELECT * from business WHERE ptype = '".$_GET["ptype"]."' AND state = '".$_GET["state"]."' AND city = '".$_GET["city"]."'") or die(mysql_error()); 
```

但如果我不放 3 个 GET，我会从 MySql 收到一个错误：

> localhost/get_allinfo.php?ptype=PUB&state=Center

然后我得到一个 MySQL 错误

我试过这个：
但是如果我把“状态”放在 URL 中并不重要`$_GET["ptype"]) & (isset($_GET["state"]))`

我只从“ptype”得到结果

```
 if (isset($_GET["ptype"])) {
    $ptype = $_GET["ptype"];
    $result = mysql_query("SELECT * from business WHERE ptype = '$ptype'") or die(mysql_error());

}elseif(isset($_GET["ptype"]) & (isset($_GET["state"]))){
    $ptype = $_GET["ptype"];
    $state = $_GET["state"];
    $result = mysql_query("SELECT * from business WHERE ptype = '$ptype' and WHERE state = '$state") or die(mysql_error());
}else {

    $result = mysql_query("SELECT * FROM `business`") or die(mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:23:35.403

以下是错误的

```
SELECT * from business WHERE ptype = '$ptype' and WHERE state = '$state 
```

它应该是：

```
SELECT * from business WHERE ptype = '$ptype' AND state = '$state' 
```

在 WHERE 上查找文档并在 $state 中添加结束引号

还可以更改 if 条件的位置

```
if(isset($_GET["ptype"]) & (isset($_GET["state"]))){
$ptype = $_GET["ptype"];
$state = $_GET["state"];
$result = mysql_query("SELECT * from business WHERE ptype = '$ptype' AND state = '$state'") or die(mysql_error());
}elseif (isset($_GET["ptype"])) {
$ptype = $_GET["ptype"];
$result = mysql_query("SELECT * from business WHERE ptype = '$ptype'") or die(mysql_error());

}if(isset($_GET["ptype"]) & (isset($_GET["state"]))){
$ptype = $_GET["ptype"];
$state = $_GET["state"];
$result = mysql_query("SELECT * from business WHERE ptype = '$ptype' and WHERE state = '$state") or die(mysql_error());
}else {

$result = mysql_query("SELECT * FROM `business`") or die(mysql_error());
} 
```

您的 ptype 始终设置，这意味着您的控件始终位于第一个 if 语句中。即使设置了状态。

PS。了解 PDO/mysqli，你不会后悔的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:33:54.690

这应该使它更健壮一点：

```
$sql = 'SELECT * from business';
$arrQueryString = array();
if(isset($_GET['ptype'])) $arrQueryString[] = 'ptype="'.$_GET['ptype'].'"';
if(isset($_GET['state'])) $arrQueryString[] = 'state="'.$_GET['state'].'"';
if(isset($_GET['city'])) $arrQueryString[] = 'city="'.$_GET['city'].'"';
$sql .= (count($arrQueryString)) ? ' WHERE '.implode(' AND ',$arrQueryString) : '';
$result = mysql_query($sql) or die(mysql_error()); 
```

# sql-server - 接收（绑定）来自 SQL Server 中单个 proc 的两个选择命令的数据

> ID：12883034
> 
> 赞同：1
> 
> 时间：2012-10-14T14:15:13.220
> 
> 标签：sql-server

```
 create proc [dbo].[SpCateProducts](@cate_id int)
    as
begin
    select sb.subcate_name, sum(p.qty)
    from subcategory sb 
      join product p on p.subcate_id = sb.subcate_id
    where sb.cate_id = @cate_id
    group by sb.subcate_name

        select top 1 pname from product join subcategory
    on product.subcate_id=
    (
        select top 1 subcate_id
        from subcategory
        where cate_id=3
        order by NEWID()
    )
end 
```

但它返回两个表，那么我怎样才能将它绑定到列表视图？

或者有什么方法可以返回一个包含所有这些所需数据行的表？

我的意思是第一个选择命令已经给出了一个 4 行和 4 列的表，那么有没有办法让它包含一个`pname`当前由第二个选择命令返回的列（）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:20:02.847

尝试对两个表使用 with 语句。然后对表使用简单的连接。

# c++ - (C++/WinAPI) 反转 LPSTR

> ID：12883035
> 
> 赞同：2
> 
> 时间：2012-10-14T14:15:18.650
> 
> 标签：c++, winapi, chars, reversing, lpstr

我有一些问题要反转 LPSTR。这是我的功能：

```
LPSTR Reverse(LPSTR a_lpText)
{
   int nTextLength = strlen((char*)a_lpText);
   LPSTR lpReversed = (LPSTR) GlobalAlloc(GPTR, nTextLength + 1);
   for (int i = 0; i < nTextLength; ++i)
      *(lpReversed + i) = (CHAR) *(a_lpText + nTextLength - i);
   return lpReversed;
} 
```

函数，返回未初始化的 LPSTR 或一些奇怪的字符。问题可能在于转换？感谢您的回答！

编辑 1： strcat() 不起作用。我只想逐个字符地复制字符。

编辑2：

```
*(lpReversed + i) = (CHAR) *(a_lpText + nTextLength - i - 1); 
```

冻结整个程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:17:58.713

试试这个）

```
*(lpReversed + i) = (CHAR) *(a_lpText + nTextLength - i - 1); 
```

最好检查 a_lpText 的 NULL 和零长度！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T16:49:35.883

这看起来更像 C 代码而不是 C++，所以我会坚持这种风格。我不明白你为什么要使用`GlobalAlloc`. 你只需要 DDE，我无法想象你在这里使用它。使用`malloc`or`new[]`如果这真的是 C++。

如果您确实在使用需要 的 DDE API `GlobalAlloc`，则将该`GlobalAlloc`部分与字符串反转代码分开。混合这两个问题会导致无法维护的代码。

如果这真的是 C++，那么`std::string`你应该尽可能使用它。

我还认为所有转换和所有非标准 Windows 类型宏都存在很大的混淆。它使代码几乎不可读。

正如 Maximus 所指出的，还有一个索引错误。对于它的价值，我会编写如下函数：

```
char* Reversed(const char* str)
{
   int len = strlen(str);
   char* reversed = (char*) malloc(len+1);
   reversed[len] = 0;//ensure return string has null-terminator
   for (int i = 0; i < len; ++i)
      reversed[len-1-i] = str[i];
   return reversed;
} 
```

您需要的唯一转换是`malloc`. 如果您要使用，`new[]`那么您甚至不需要这样做。在这种情况下，代码将是这样的：

```
char* Reversed(const char* str)
{
   int len = strlen(str);
   char* reversed = new char[len+1];
   reversed[len] = 0;//ensure return string has null-terminator
   for (int i = 0; i < len; ++i)
      reversed[len-1-i] = str[i];
   return reversed;
} 
```

人们应该始终努力编写没有强制转换的代码。

`[]`当可以使用索引运算符时，不要自己进行指针运算。以这种方式阅读要容易得多。

# iphone - 当我的嵌入 youtube 视频完成后，我无法再次播放？

> ID：12883036
> 
> 赞同：0
> 
> 时间：2012-10-14T14:15:19.053
> 
> 标签：iphone, webview, youtube, titanium, embed

我在 Titanium 中有一个工作网络视图，其中包含一个嵌入的 youtube 视频。视频播放不错，我可以停止它，恢复它等等。但是当视频播放到最后，我按“完成”。网页视图变黑并显示以下文字：YouTube。没有其他的。我希望有与播放视频之前相同的拇指和播放按钮。

我的嵌入代码如下所示：

```
html:'<html><head></head><body style="margin:0"> <embed id="yt" src="'+tubeURL+'" type="application/x-shockwave-flash" width="150" height="113"></embed></body></html>', 
```

我已经用谷歌搜索了这个问题好几天了。我希望有人可以在这里帮助我。

干杯

//马丁

编辑：这解决了它。将 &controls=1&rel=0 放在 URL 的末尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:45:13.750

*YouTube 播放器可以使用<iframe>*标签或*<object>*标签嵌入到网页中。

通过将参数附加到 SWF 或 IFrame URL，您可以自定义应用程序中的播放体验。例如，您可以使用 autoplay 参数自动播放视频，或者使用 loop 参数或在您的情况下使用 hide 或 show **controls**使视频重复播放。

**控制**

值：0、1 或 2。默认值为 1。此参数指示是否显示视频播放器控件。对于 AS3 播放器，它还定义了 Flash 播放器何时加载：

*   *controls=0* – 播放器控件不显示在播放器中。对于 AS3 播放器，Flash 播放器会立即加载。
*   *controls=1* – 播放器控件显示在播放器中。对于 AS3 播放器，Flash 播放器会立即加载。
*   *controls=2* – 播放器控件显示在播放器中。对于 AS3 播放器，Flash 播放器在用户启动视频播放后加载。

您的问题的正确答案是***controls=2***。

来源信息：[https ://developers.google.com/youtube/player_parameters#controls](https://developers.google.com/youtube/player_parameters#controls)

# netbeans-7 - 如何在 Net bean 7.2 中安装 Web Preview 插件？

> ID：12883037
> 
> 赞同：2
> 
> 时间：2012-10-14T14:15:21.260
> 
> 标签：netbeans-7, netbeans-plugins

我需要知道如何为 netbeans 7.2 版安装网络预览插件。我找不到默认配置。

# php - PHP EOT 错误信息

> ID：12883038
> 
> 赞同：1
> 
> 时间：2012-10-14T14:15:39.163
> 
> 标签：php, heredoc

当我运行此代码时，我收到一条消息：

```
function print_footer(){
global $file;
echo <<<EOT
<center>
<a href="$file?op=vote"> Vote </a> |
<a href="$file?op=admin"> Admin </a> | 
<hr>
$copy; 2012, Shibbir Ahmed, All Rights Reserved.
</center>
</body>
</html> 
EOT;        
} 
```

**错误信息：**

> 解析错误：语法错误，D:\xampp server\xampp\htdocs\practice\function.php 中出现意外 $end ...

这段 PHP 代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:18:16.773

您在此处发布的代码在结尾后有一堆空格`EOT;`。这在 PHP 语法中是[不允许的：](http://php.net/heredoc)

> 需要注意的是，带有结束标识符的行不能包含其他字符，**可能**除了分号 (;)。这尤其意味着标识符**可能不会缩进**，并且分号之前**或之后可能没有任何空格或制表符。**

发生的情况是 PHP 看不到您的结束说明符，因此它会继续寻找一个，直到它意外到达文件末尾并引发错误。

解决方案是确保您拥有的行上没有空格`EOT;`，无论是之前还是之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:17:36.533

如果您格式化代码的方式可以通过，看起来您在`EOT;`. HEREDOC 的结束标记***必须***是一行的绝对第一件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T14:17:55.280

确保前面没有空格`EOT;`

# php - fancybox jquery 插件打开，但 youtube 视频在背景中仍然可见

> ID：12883040
> 
> 赞同：-1
> 
> 时间：2012-10-14T14:16:44.433
> 
> 标签：php, javascript, jquery, fancybox, fancybox-2

我正在使用 fancybox2 插件。

当我单击图像滑块工作但 youtube 视频在背景中仍然可见时。

包含嵌入视频的 html 代码

```
<iframe width="344" height="229" src="http://www.youtube.com/embed/o6qNGUAciB4" frameborder="0" allowfullscreen=""/> 
```

和javascript代码

```
<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="<?=$this->session->CI->config->config['js_path'];?>/jquery.mousewheel-3.0.6.pack.js"></script>

<!-- Add fancyBox -->
<link rel="stylesheet" href="<?=$this->session->CI->config->config['css_path'];?>/jquery.fancybox.css?v=2.1.1" type="text/css" media="screen" />
<script type="text/javascript" src="<?=$this->session->CI->config->config['js_path'];?>/jquery.fancybox.pack.js?v=2.1.1"></script>

<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="<?=$this->session->CI->config->config['css_path'];?>/jquery.fancybox-buttons.css?v=1.0.4" type="text/css" media="screen" />
<script type="text/javascript" src="<?=$this->session->CI->config->config['js_path'];?>/jquery.fancybox-buttons.js?v=1.0.4"></script>
<script type="text/javascript" src="<?=$this->session->CI->config->config['js_path'];?>/jquery.fancybox-media.js?v=1.0.4"></script>

<link rel="stylesheet" href="<?=$this->session->CI->config->config['css_path'];?>/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
<script type="text/javascript" src="<?=$this->session->CI->config->config['js_path'];?>/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script type="text/javascript">
var j= jQuery.noConflict();
j(document).ready(function() {
    j(".fancybox").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none',
        helpers : { 
               overlay: {
                opacity: 1, // or the opacity you want 
                css: {background: 'white'} // or your preferred hex color value
               } // overlay 
              } // helpers
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:02:54.583

添加`womde=opaque`到您的 youtube 链接 ( `src`) 中，例如：

```
<iframe width="344" height="229" src="http://www.youtube.com/embed/o6qNGUAciB4?wmode=opaque" frameborder="0" allowfullscreen=""></iframe> 
```

（顺便说一句：我个人更喜欢处理链接而不是*文本代码*，因为我可以使用调试工具来帮助找到文本代码可能无法显示的其他可能问题；）

# transition - 将电影作为两个视图控制器之间的过渡 - 将这段代码放在哪里？

> ID：12883041
> 
> 赞同：1
> 
> 时间：2012-10-14T14:16:46.217
> 
> 标签：transition, movie, mpmovieplayer

我的整个目标是在主视图上有一个按钮，当您按下此按钮时，视频播放，当视频播放完毕后，您现在处于第二个视图。快速视频就像是两个 VC 之间的过渡。我的问题是我应该把“播放电影”代码放在哪里。以下是我尝试过的场景和不满意的结果：

Main VC 中的按钮播放电影并打开第二个 VC - 电影播放但第二个视图控制器没有打开，只是返回到主 VC。

Main VC 中的按钮播放电影，moviePlayBackDidFinish 的 NSNotification 打开第二个 VC - 结果与上面相同。

Main VC 中的按钮切换到第二个 VC，电影代码在第二个 VC 的 viewDidLoad 中（也是 viewWillLoad，结果相同） - VC 切换但电影不播放

Main VC 中的按钮切换到第二个 VC，电影代码在第二个 VC 的 viewDidAppear 中 - 第二个 VC 出现然后电影连续播放（不是我想要的）。

设置代码以获得我正在寻找的过渡效果的最佳方法是什么？我应该在两者之间制作第三个视图控制器来播放电影吗？这是我用来播放电影的代码：

```
 //Sets up the movie file to play
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"TransitionMovie" ofType:@"mov"]];
_moviePlayer =  [[MPMoviePlayerViewController alloc]
                 initWithContentURL:url];
//Creates notification observer so it knows when the movie is done playing
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:_moviePlayer];
//Plays the movie
[self presentMoviePlayerViewControllerAnimated:_moviePlayer]; 
```

# jakarta-ee - 记录多个服务器

> ID：12883042
> 
> 赞同：0
> 
> 时间：2012-10-14T14:16:48.370
> 
> 标签：jakarta-ee, logging

我们有一组负载平衡的 j2ee 服务器，其中每台服务器每天生成 >500 MB 的日志。维护服务器日志的最佳方法是什么。

目前我有三个选择。

1.  在每个服务中维护一个单独的日志文件夹
2.  将日志写入数据库
3.  维护一个单独的日志服务器并使用 jms 写入日志

这是这个问题的最佳最优解。

如果您有更多解决方案，请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:00:46.393

最佳解决方案可能是主观的，它实际上取决于您试图通过日志记录实现的目标以及您的环境是如何设置的。首先，我想说的是，无论您选择哪种解决方案，日志记录都不是免费的，因此请始终考虑它将对系统产生的成本/影响。

每个服务器的单独文件夹：

*   如果您使用轮询作为负载平衡策略，那么来自客户端的请求可以记录在不同的服务器上。尝试跨多个服务器整理数据日志条目要困难得多。

写入数据库：

*   这将使事情保持集中
*   可以利用数据库访问控制来授予对日志的访问权限。
*   如果您有大量的并发使用，它可能会给数据库带来大量负载，从而导致争用。

推入 JMS 队列：

*   我认为这是最灵活的选择，也是一个很好的基础。
*   允许您将工作卸载到另一台服务器，您可以花更多时间来解析日志以供将来过滤。
*   可以为所有日志维护一个中心位置
*   允许您从日志记录过程中抽象出持久性机制。这意味着您可以登录到数据库、文件系统、NoSQL DB 或您想要的每个存储。
*   我会尽量减少记录到队列中的内容，而不是过滤队列中的内容，因此在队列之前使用适当的日志记录级别。

# javascript - 从/到透明的动画背景颜色

> ID：12883043
> 
> 赞同：0
> 
> 时间：2012-10-14T14:16:56.153
> 
> 标签：javascript, css

我想让一些文本的背景颜色在悬停时淡入/淡出。由于文本位于图像顶部，因此我希望背景颜色从透明度淡入然后再变回透明。

这是我到目前为止所拥有的：

```
 $('#nav li.menu').hover(
    function () {
        $(this).animate({backgroundColor: "#FFEF00"},300);

    }, 
    function () {
        $("li.menu").animate({backgroundColor: "Transparent"},300);         
    }
); 
```

但是，当我运行此代码时，动画会在开始动画之前将背景颜色变为白色。有谁知道我该如何解决这个问题？

谢谢，乔丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:18:02.840

所有动画属性都应该动画为单个数值，大多数非数字属性不能使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以动画，但背景颜色不能，除非[jQuery.使用Color()](https://github.com/jquery/jquery-color)插件）。除非另有说明，否则属性值被视为像素数。可以在适用的情况下指定单位 em 和 %。

欲了解更多信息，请查看

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

[http://desizntech.info/2009/06/playing-with-jquery-color-plugin-and-color-animation/](http://desizntech.info/2009/06/playing-with-jquery-color-plugin-and-color-animation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:19:59.390

“透明”本身并不意味着什么。颜色由红色、绿色、蓝色和 alpha 定义。由于页面的默认背景颜色是白色，因此“透明”实际上被翻译为“带有 alpha 0 的白色”是有道理的。

尝试使用`rgba()`符号来强制使用特定的“透明”颜色。

```
$("li.menu").animate({backgroundColor:"rgba(0xff,0xef,0,0)"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T14:21:02.483

正如afshin所说，您确实不能通过jquery轻松更改背景颜色。但是，还有另一种方法！将文本放入 div 中，并赋予 div 与背景相同的颜色。（或者应该是什么颜色）

然后，在您的 css 中创建另一个类或 id，并使用 jquery 在悬停时更改类/id。（`.getElement`命令，如果你需要知道）

祝你好运。

# wpf - 使用实体框架从数据库备份/恢复

> ID：12883044
> 
> 赞同：1
> 
> 时间：2012-10-14T14:17:05.573
> 
> 标签：wpf, entity-framework, c#-4.0, backup, restore

如何使用实体框架从数据库备份/恢复？

实体框架 4.0 可以吗？

我正在使用 c#4.0 和 wpf 和 EF4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:34:26.757

假设您有 SQL Express，因此没有 SQL 代理。也许这就是您要使用实体框架导出的原因？你总是可以用 SQL 来做

我刚刚找到了一个链接，它解释了你如何做到这一点，但直到现在这一切都基于我认为你没有 SQL 代理并且你想要进行备份的事实。

[http://www.winblogs.net/index.php/2009/11/22/automating-backup-of-databases-in-sql-20052008-express/](http://www.winblogs.net/index.php/2009/11/22/automating-backup-of-databases-in-sql-20052008-express/)

PS：这个问题之前也有人问过，换个方式看看下面的回答 [https://stackoverflow.com/a/9184833/578552](https://stackoverflow.com/a/9184833/578552)

# opengl - cocos2d - 如何绘制一个水位动态变化的瓶子精灵

> ID：12883045
> 
> 赞同：0
> 
> 时间：2012-10-14T14:17:18.613
> 
> 标签：opengl, cocos2d-iphone, drawing, transparency, sprite

我正在尝试在 cocos2d 中绘制一个（2d）精灵，显示一个瓶子。瓶子应该能够具有动态水位（即瓶子中的水量可以在精灵的生命周期内改变）。

我想知道如何做到这一点。我目前有一个空瓶子的PNG文件。我调整了该 PNG 的 alpha 通道，因此在渲染精灵时，我可以绘制一个蓝色矩形并在其上渲染瓶子纹理。这会给人一种水在瓶子里的印象。

不过，瓶子本身的形状当然不是长方形的，所以可以看到瓶子外面的水。我可以改变瓶子图像，使只有瓶子本身是透明的，并将“外部世界”设置为不透明的颜色和 Alpha 通道值，但这又会阻止“世界背景”在该区域可见。

我根本不知道如何以理智的方式实现这一点。我真的必须读取瓶子图像的每个像素，识别瓶子“内部”的像素，然后逐个像素地绘制水吗？一定有更简单的方法，对吧？;)

此类任务的任何最佳实践？

编辑：见下图，让我更清楚地说，我在说什么;）

[http://i47.tinypic.com/10rqww0.png](http://i47.tinypic.com/10rqww0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:33:52.417

您可以创建具有不同填充水平的瓶子的多个图像，并从中创建一个精灵表。

加载精灵表：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"bottle.plist"]; 
```

要设置水位，您可以使用该`setDisplayFrame`方法更改瓶子的纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:42:59.223

如果您有许多可能的水位，您可以简单地绘制所需大小的 CCLayerColor 或水纹理，然后在上面绘制带有空瓶子的精灵。那么你可以改变你的“水节点”的大小，无论它是 CCLayerColor 实例还是具有一些水纹理的节点。

# java - 当if参数已经在java中设置为true时，为什么if的其他情况不会产生任何错误

> ID：12883046
> 
> 赞同：0
> 
> 时间：2012-10-14T14:17:19.473
> 
> 标签：java, compilation, compiler-errors

当 if 参数为真时，为什么 java 程序在 if else 情况下不会出错。为什么它没有任何例外。例如，这里的method1和method2即使有无法访问的语句也不会产生任何（编译）错误，但是method3会产生编译错误。首先仔细阅读代码并提供答案。

```
 public int method1() {
        if(true) {
            return 1;
        } else {
            return 2;//unreachable statement but doesn't make exception
        }
    }

    public int method2() {
        if(true) {
            return 1;
        } else if (true) {
           return 2;//unreachable statement but doesn't make exception
        } else {
            return 3;//unreachable statement but doesn't make exception
        }
    }

    public int method3() {

        if(true) {
            return 1;
        } else if (true) {
           return 2;//unreachable statement but doesn't make exception
        } else {
            return 3;//unreachable statement but doesn't make exception
        }

        return 3;//unreachable statement but makes exception
    } 
```

java不支持严格编译吗？这个问题背后的原理是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T14:27:06.643

该语言通过为 if-then-else 制作特殊情况来允许*[条件编译](http://en.wikipedia.org/wiki/Conditional_compilation)*。这使得在编译时打开或关闭代码块变得容易。

来自[Java 语言规范关于无法访问语句的部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)：

```
 As an example, the following statement results in a compile-time error:

          while (false) { x=3; }

   because the statement x=3; is not reachable; but the superficially similar case:

          if (false) { x=3; }

   does not result in a compile-time error. 
```

和：

```
 The rationale for this differing treatment is to allow programmers to 
   define "flag variables" such as:

          static final boolean DEBUG = false;

   and then write code such as:

          if (DEBUG) { x=3; }

   The idea is that it should be possible to change the value of DEBUG 
   from false to true or from true to false and then compile the code 
   correctly with no other changes to the program text. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:24:08.347

我会说编译器作者认为第一种情况不值得生成错误，而最后一种情况是。我只能推测他们的想法，但我怀疑虽然他们可以在前两种情况下确定可达性，但不太可能有人会意外编写这样的代码。它更有可能作为调试机制被显式引入。此外，添加评估以检测此类错误（这是一种极端情况）的成本可能不值得。无论如何，这个错误只是烦人，没有帮助。在最后一种情况下，程序员可以很容易地编写这样的代码，而没有意识到最后的语句是不可达的，因此出现了错误。

# java - 枚举和单例 - 顶级与嵌套枚举

> ID：12883051
> 
> 赞同：3
> 
> 时间：2012-10-14T14:17:56.057
> 
> 标签：java, enums, singleton

众所周知，在 java 中创建单例的推荐方法是通过枚举（例如，请参见[此处](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)）

但是（例如在这个[答案](https://stackoverflow.com/a/2639896/281545)中）似乎被认为（由@MikeAdler 在评论中回复我） ***在***单例类中使用枚举是正确的（例如，请参见[此处](https://stackoverflow.com/questions/8027701/singleton-using-enum)的完整示例或给出的代码以下）。我似乎并不真正理解这个的需要/使用 - 有人可以详细说明（最好给出这个成语的正确方言）吗？

```
public class Enclosing {

    private  Enclosing() {}

    static enum Singleton {
        INSTANCE;

        private static final Enclosing  singleton = new Enclosing();

        public Enclosing getSingleton() {
            return singleton;
        }
    }
} 
```

编辑：一个人会得到单身人士`Enclosing.Singleton.INSTANCE.getSingleton();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:33:06.613

当您想对其执行[延迟加载](https://stackoverflow.com/questions/9347961/singleton-lazy-loading-pattern)时，您会嵌套一个 Singleton ，例如出于测试原因：

```
public class Singleton {
    public Enclosing getInstance() {
        return SingletonHolder.INSTANCE;
    }

    static enum SingletonHolder {
        INSTANCE;
    }
} 
```

在此处阅读更多信息：[http ://en.wikipedia.org/wiki/Initialization_on_demand_holder_idiom](http://en.wikipedia.org/wiki/Initialization_on_demand_holder_idiom)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:25:55.327

```
public enum Foo {
   INSTANCE;
} 
```

是获得单例后 java 5 的最简单和最好的方法。您发布的代码只是不必要地复杂，我认为它与仅使用枚举相比没有任何优势。

# c++ - 在 Qt C++ 中读写文件

> ID：12883060
> 
> 赞同：1
> 
> 时间：2012-10-14T14:18:22.707
> 
> 标签：c++, file, qt

我是 Qt 编程的新手。

我正在做一个由一个主屏幕和 3 个窗口组成的程序，它基于驱动由并口控制的卡车无线电。

我的问题是，在第二个窗口中，我输入了某些值，并存储在一个 txt 文件中（我检查并正确存储）。问题是当我进入第三个窗口时，该窗口旨在读取和打印数据生成文件，并没有出现，但直到我离开并重新进入程序。

虽然保存数据后，我关闭了文件，然后我打开它读取它，这就像当时没有关闭，但只有当我退出程序时。

下面附上程序文件。

[关联！](http://www.mediafire.com/file/58z6f856oj91orp/proyecto.rar)

非常感谢你，对不起我的英语！

注意：不要忘记以用户权限进入以运行程序（在 Ubuntu 中工作），因为它处理 PC 端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:31:02.050

从[这个](http://qt-project.org/doc/qt-4.8/mainwindows-application.html)qt 示例：

```
bool MainWindow::saveFile(const QString &fileName)
{
    QFile file(fileName);
    if (!file.open(QFile::WriteOnly | QFile::Text)) 
    {
            QMessageBox::warning(this, tr("Application"),
                          tr("Cannot write file %1:\n%2.")
                          .arg(fileName)
                          .arg(file.errorString()));
        return false;
    }

    QTextStream out(&file);
#ifndef QT_NO_CURSOR
QApplication::setOverrideCursor(Qt::WaitCursor);
#endif
out << textEdit->toPlainText();
#ifndef QT_NO_CURSOR
QApplication::restoreOverrideCursor();
#endif

    setCurrentFile(fileName);
    statusBar()->showMessage(tr("File saved"), 2000);
    return true;
} 
```

您可以定义它并定义一个向用户询问文件名的插槽（QFileDialog 是最快的方法），如果用户接受（不取消保存数据执行），您使用用户文件名调用此方法。你可以删除一些东西，即 statusBar()->showMessage(); 如果你没有状态栏等等......

# php - 辅助类或类别在 PHP 中可用吗？

> ID：12883066
> 
> 赞同：0
> 
> 时间：2012-10-14T14:18:48.580
> 
> 标签：php, oop, helper, objective-c-category

您可以在`Objective-C`其中创建一个类别，该类别允许您向现有类添加额外的功能，例如`NSString`. `Delphi`您可以创建一个 Helper 类，再次允许您向现有类添加功能。`Javascript`您可以在类原型中添加函数。

有类似的东西`PHP`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:44:11.763

我认为[特质](http://php.net/manual/en/language.oop5.traits.php)是你正在寻找的，但它只支持> = 5.4。

# mysql - SQL：计算常见元素

> ID：12883067
> 
> 赞同：4
> 
> 时间：2012-10-14T14:19:01.293
> 
> 标签：mysql, sql, count

我试图想出一个表格来显示表格中常见元素的总数。

例如。我有一个包含值的表 A：

```
colName
=============
a
b
b
c
c
c
d 
```

有什么方法可以得出结果显示：

```
colName totalCount
==================
a        1
b        2
c        3
d        1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:19:42.417

这是一个使用聚合函数`COUNT`和`GROUP BY`子句的简单查询。

```
SELECT   colName, COUNT(colName) totalCount
FROM     tableName
GROUP BY colName 
```

`totalCount`被称为**ALIAS**`COUNT(colName)`

# java - 来自 API 的 Android 搜索建议

> ID：12883071
> 
> 赞同：2
> 
> 时间：2012-10-14T14:19:30.187
> 
> 标签：java, android

我正在尝试创建一个可搜索的活动，该活动从 google 地方 API 获取其结果，我创建了一个内容提供程序并放置了一些代码来执行对 google 的 HTTP 请求并解析结果。

问题是 Web 请求需要异步完成以阻止它阻塞 UI 线程，当它这样做时，内容提供者在 Web 请求完成之前返回 MatrixCursor 使结果在下一次文本框更改时出现文本实际更改的时间。

有没有办法解决？

这是我的搜索内容提供商的代码：

```
 import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.SearchManager;
import android.content.ContentProvider;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.MatrixCursor;
import android.net.Uri;
import android.util.Log;

import com.loopj.android.http.*;

public class LocationsSuggestionProvider extends ContentProvider {
    private static final String[] COLUMNS = {
        "_id", // must include this column
        SearchManager.SUGGEST_COLUMN_TEXT_1};
    public MatrixCursor cursor = new MatrixCursor(COLUMNS);
    public LocationsSuggestionProvider()
    {

```
}
@Override
public int delete(Uri arg0, String arg1, String[] arg2) {
    return 0;
}

@Override
public String getType(Uri uri) {

    return null;
}

@Override
public Uri insert(Uri uri, ContentValues values) {
    return null;
}

@Override
public boolean onCreate() {
    return false;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    if(selectionArgs[0].length() >= 2 && selectionArgs[0].length() < 75)
    {
        AsyncHttpClient client = new AsyncHttpClient();
        try {
            Log.d("Bustimes","https://maps.googleapis.com/maps/api/place/autocomplete/json?input="+ URLEncoder.encode(selectionArgs[0].trim(), "UTF-8") +"&sensor=false&key=AIzaSyCvGtqoDK_SoBWG94CKOjymnOc-dzXr8WA&language=en-GB&components=country:gb");
            client.get("https://maps.googleapis.com/maps/api/place/autocomplete/json?input="+ URLEncoder.encode(selectionArgs[0].trim(), "UTF-8") +"&sensor=false&key=AIzaSyCvGtqoDK_SoBWG94CKOjymnOc-dzXr8WA&language=en-GB&components=country:gb", new AsyncHttpResponseHandler() {
                @Override
                public void onSuccess(String response) {
                    JSONObject jObject = null;
                    try {
                        jObject = new JSONObject(response);

                        JSONArray predictions = jObject.getJSONArray("predictions");
                        for(int i = 0;i < predictions.length(); i++)
                        {
                            JSONObject prediction = predictions.getJSONObject(i);
                            LocationsSuggestionProvider.this.cursor.addRow(new Object[] {i,prediction.getString("description").toString()});
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
    }
    MatrixCursor returnMatrix = cursor;
    cursor = new MatrixCursor(COLUMNS);
    return returnMatrix;
}
@Override
public int update(Uri uri, ContentValues values, String selection,
        String[] selectionArgs) {
    return 0;
} 
```

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T12:10:15.950

事实证明，您不需要异步执行任何这些操作，因为对内容提供者的请求无论如何都不会在 UI 线程上运行。这意味着您可以正常执行 Web 请求而无需异步任务或任何您会做的事情，它会正常工作。

# html - 去解析 HTML 表格

> ID：12883079
> 
> 赞同：8
> 
> 时间：2012-10-14T14:20:08.940
> 
> 标签：html, go, web-scraping

我有一个要解析的 html 表格。类似于以下 [http://sprunge.us/IJUC](http://sprunge.us/IJUC)中的内容 但是，我不确定解析信息的好方法。我见过几个 html 解析器，但它们似乎要求所有东西都有一个特殊的标签供你解析它，就像获取信息一样；但是，我的大部分信息都在`<td></td>`

有没有人建议解析这些信息？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-14T16:13:40.310

无耻插件：我的[goquery](https://github.com/PuerkitoBio/goquery)库。这是 Go 引入的 jQuery 语法（需要 Go 的[实验性 html 包](https://code.google.com/p/go.net/html)，请参阅库自述文件中的说明）。

所以你可以做这样的事情（假设你的 HTML 文档是在 doc, a 中加载的`*goquery.Document`）：

```
doc.Find("td").Each(func (i int, s *goquery.Selection) {
  fmt.Printf("Content of cell %d: %s\n", i, s.Text())
}) 
```

编辑：在示例中更改`doc.Root.Find`为`doc.Find`，因为 goquery 文档现在也是一个选择（v0.2/master 分支中的新内容）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T05:31:25.117

您可能还对 Go 的实验性 HTML 解析器感兴趣： [https ://code.google.com/p/go.net/html](https://code.google.com/p/go.net/html)

根据 godoc 的包定义：

> html 包实现了一个符合 HTML5 的标记器和解析器

我自己没有使用过它，但它看起来很简单：

> 通过使用 io.Reader 调用 Parse 来完成解析，该 io.Reader 将解析树的根（文档元素）作为 *Node 返回。调用者有责任确保 Reader 提供 UTF-8 编码的 HTML。

```
go get code.google.com/p/go.net/html

import "code.google.com/p/go.net/html"

doc, err := html.Parse(r) 
```

它不是任何当前版本的一部分，但如果您**从源代码安装**或使用 golang-tip ubuntu apt repo，则可以使用它。

**编辑**：您还可以在此处使用以下实验性 Go 包的镜像：[https ://github.com/kless/go-exp](https://github.com/kless/go-exp)

```
go get github.com/kless/go-exp/html

import (
    "github.com/kless/go-exp/html"
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T14:27:43.030

如果您的 HTML 格式正确，则可以使用内置的 XML 解析器：

[http://golang.org/pkg/encoding/xml/](http://golang.org/pkg/encoding/xml/)

# java - 文本框高度太大

> ID：12883080
> 
> 赞同：1
> 
> 时间：2012-10-14T14:20:20.827
> 
> 标签：java, android, xml

请查看以下 XML 布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
     >

    <TextView 
        android:id="@+id/lblPassword"
        android:text="@string/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <EditText
        android:id="@+id/pwdText"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:inputType="textPassword"
        />

    <Button 
        android:text="@string/btnLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="showMessage"
        />

</LinearLayout> 
```

这会生成以下 gui（附加） ![在此处输入图像描述](../Images/c21533934500836c2f32c180b4a2401e.png)

如您所见，文本框高度出乎意料地太大了。实际上我需要的是调整文本框宽度以正确适应应用程序，提供足够的输入空间（如果我没有做任何事情，文本框的宽度会显得非常小）。我是安卓新手。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:22:07.900

当您删除此行时它是否解决了问题`android:layout_height="0dp"`

编辑：或将其更改为`android:layout_height="wrap_content"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:26:09.410

将您的 EditText 更改为此

```
<EditText
        android:id="@+id/pwdText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:inputType="textPassword"
        /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T14:27:52.777

要扩展宽度以匹配设备的宽度，请替换`android:layout_width="wrap_content"`为`android:layout_width="match_parent"`，或者您可以在 dp 中指定宽度。

通过设置属性`android:layout_height="0dp"`，`android:layout_weight="1"`您说您希望此元素高度填充屏幕上的所有剩余空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T14:25:55.603

不要对最外层布局的宽度或高度使用“match_parent”属性。使用 wrap_content 或 fill_parent。还将editText的layout_height中的0dp替换为wrap_content。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-28T07:32:59.290

对于文本视图高度，将其从换行内容更改为 10 dp。

# haskell - 用 haskell 编写迷你语言，“while”语句和块的麻烦{}

> ID：12883081
> 
> 赞同：2
> 
> 时间：2012-10-14T14:20:22.457
> 
> 标签：haskell, mini-language

编辑：问题部分解决，跳到底部进行更新。

我正在使用 haskell 编写一种小型语言，并且取得了很大进展，但是在实现使用块的语句时遇到了麻烦，例如“{ ... }”。我已经在我的解析器文件中实现了对 If 语句的支持：

```
stmt = skip +++ ifstmt +++ assignment +++ whilestmt

ifstmt = symbol "if" >>
         parens expr >>= \c ->
         stmt >>= \t ->
         symbol "else" >>
         stmt >>= \e ->
         return $ If c t e

whilestmt = symbol "while" >>
            parens expr >>= \c ->
        symbol "\n" >>
        symbol "{" >>
        stmt >>= \t ->
        symbol "}" >>
        return $ While c t

expr = composite +++ atomic 
```

在语法文件中：

```
class PP a where 
  pp :: Int -> a -> String

instance PP Stmt where
  pp ind (If c t e) = indent ind ++ 
                      "if (" ++ show c ++ ") \n" ++ 
                      pp (ind + 2) t ++
                      indent ind ++ "else\n" ++
                      pp (ind + 2) e
  pp ind (While c t) = indent ind ++
                   "while (" ++ show c ++") \n" ++
                   "{" ++ pp (ind + 2) t ++ "}" ++
                   indent ind 
```

while 语句有问题，我不明白是什么。逻辑似乎是正确的，但是当我运行代码时，出现以下错误：

```
EDIT: Fixed the first problem based on the first reply, now it is not recognizing my while statment which I assume comes from this:
exec :: Env -> Stmt -> Env
exec env (If c t e) = 
    exec env ( if eval env c == BoolLit True then t else e )
exec env (While c t) =
    exec env ( if eval env c == BoolLit True then t ) 
```

正在读取的文件如下所示：

```
x = 1; c = 0;
if (x < 2) c = c + 1; else ;
-- SEPARATE FILES FOR EACH
x = 1; c = 1;
while (x < 10)
{
  c = c * x;
  x = x + 1;
}
c 
```

我试图理解错误报告，但我没有尝试解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:24:22.140

`>>`并且`>>=`比 绑定得更紧`$`。尝试使用

```
return (While c t) 
```

代替

```
return $ While c t 
```

此外，在 . 右侧的 lambda 表达式周围加上括号`>>=`。

或者只使用 do-notation：

```
whilestmt = do
    symbol "while"
    c <- parens expr
    symbol "\n"
    symbol "{"
    t <- stmt
    symbol "}"
    return $ While c t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:16:48.707

问题是在 Haskell 中，一个`if`语句总是必须有一个`else`除了`then`. 您的`exec`for实现`While`指定了条件为 时要做什么`True`，但没有说明条件为时的行为`False`。实际上，您的代码仅在条件为 时执行一次 while 循环的主体`True`，但它应该继续执行它（并将更新线程化到环境）直到条件变为`False`。所以，像这样：

```
exec env (While c t) = execWhile env c t

execWhile env c t | eval env c == BoolLit True = let env' = exec t in execWhile env' c t
                  | otherwise = env 
```

# c++ - 是否可以在 C++ 中交换任意大小的数组？

> ID：12883083
> 
> 赞同：1
> 
> 时间：2012-10-14T14:20:23.743
> 
> 标签：c++, arrays

我想知道是否可以交换两个不同大小的 C++ 数组的内容（不使用任何预定义的 C++ 函数）？我的代码如下：

```
#include <iostream>
#include <string>

using namespace std;  

void swapNames(char a[], char b[])
{

    //can be done with one temp; using two for clarity purposes 
    char* temp = new char[80];
    char* temp2 = new char[80];
    int x = 0;

    while(*(b+x)!='\0')
    {
        *(temp+x) = *(b+x);
        x=x+1;
    }

    x=0;
    while(*(a+x)!='\0')
    {
        *(temp2+x) = *(a+x);
        x=x+1;
    }

    x=0;    
    while(*(temp2+x)!='\0')
    {
        *(b+x) = *(temp2+x);
        x=x+1;
    }

    x=0;
    while(*(temp+x)!='\0')
    {
        *(a+x) = *(temp+x);
        x=x+1;
    }
}

int main()
{
    char person1[] = "James";
    char person2[] = "Sarah";

    swapNames(person1, person2);

    cout << endl << "Swap names..." << endl;
    cout << endl << "Person1 is now called " << person1;

    cout << "Person2 is now called " << person2 << endl;;
} 
```

我最初的想法是自己传递对 person1 和 person2 的引用，将数据存储在临时变量中，删除分配给它们的内存，并将它们链接到带有交换数据的新创建的数组。我认为这将避免预定义的内存限制。但是，似乎非常不允许将引用（&）传递给数组。

如果 person1 和 person2 的大小相同，则上述工作正常。但是，一旦我们有不同大小的名称，我们就会遇到问题。我认为这是因为我们无法更改最初创建 person1 和 person2 时分配的内存块。

另外，是否可以在不预先定义大小的情况下在 C++ 中创建一个新数组？IE 一种创建临时变量而不限制其大小的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T14:25:48.440

```
char person1[] = "James"; 
```

只是以下的简写：

```
char person1[6] = "James"; 
```

您以后不能在 person1 中存储超过 6 个字符。如果您真正想要的是不同长度的字符串，我建议放弃 C 风格的字符串以支持`std::string`标准库类型：

```
#include <string>
#include <algorithm>

std::string person1 = "James";
std::string person2 = "Sarah";

swap(person1, person2); 
```

如果你的书在 s 之前教授 C 风格的字符串`std::string`，你应该考虑[买一本新书](https://stackoverflow.com/questions/388242/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:35:19.620

只要数组是固定大小的，就可以引用数组。

有一个简单的答案，而不是您正在考虑的所有复杂事物。只需使用一个向量。

```
vector<char> a;
vector<char> b;
...
a.swap(b); 
```

还有什么比这更容易的？

向量也是您问题的答案，“另外，是否可以在不预先定义大小的情况下在 C++ 中创建一个新数组？”。您可以创建一个矢量，然后稍后调整它的大小（这几乎是同一件事）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:25:37.450

您应该始终更喜欢容器类而不是原始数组。但是，如果您绝对必须使用数组，您当然可以完成交换，而无需诉诸于动态分配临时数组。使用模板静态确定传递给交换函数的数组的类型和大小。

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <string>

template<typename T, size_t N>
void swap_arrays( T(&left)[N], T(&right)[N] )
{
  T temp[N];

  // copy left to temp
  std::copy( std::begin(left), std::end(left), std::begin(temp) );
  // copy right to left
  std::copy( std::begin(right), std::end(right), std::begin(left) );
  // copy temp to right
  std::copy( std::begin(temp), std::end(temp), std::begin(right) );
}

template<typename T, size_t N>
void swap_and_print( T(&left)[N], T(&right)[N] )
{
  std::cout << "\nBefore swapping: \n";

  std::cout << "  Left:";
  std::for_each( std::begin(left), std::end(left), 
                 []( T const& t ) { std::cout << " " << t; } );
  std::cout << "\n  Right:";
  std::for_each( std::begin(right), std::end(right), 
                 []( T const& t ) { std::cout << " " << t; } );

  swap_arrays( left, right );

  std::cout << "\nAfter swapping: \n";

  std::cout << "  Left:";
  std::for_each( std::begin(left), std::end(left), 
                 []( T const& t ) { std::cout << " " << t; } );
  std::cout << "\n  Right:";
  std::for_each( std::begin(right), std::end(right), 
                 []( T const& t ) { std::cout << " " << t; } );
}

int main()
{
  int foo1[] = {1,2,3,4,5};
  int bar1[] = {6,7,8,9,10};

  swap_and_print( foo1, bar1 );

  char foo2[] = "James";
  char bar2[] = "Sarah";

  swap_and_print( foo2, bar2 );
} 
```

输出：

```
Before swapping: 
  Left: 1 2 3 4 5
  Right: 6 7 8 9 10
After swapping: 
  Left: 6 7 8 9 10
  Right: 1 2 3 4 5
Before swapping: 
  Left: J a m e s �
  Right: S a r a h �
After swapping: 
  Left: S a r a h �
  Right: J a m e s � 
```

*注意：*第二个示例末尾的奇怪字符是因为输入是`char`包含终止空字符的数组；您所看到的是它的视觉表示（因为代码将其打印为字符）。

# javascript - 确保 file.json 与 BackBone Collection 同步

> ID：12883085
> 
> 赞同：0
> 
> 时间：2012-10-14T14:20:26.910
> 
> 标签：javascript, collections, backbone.js

我是 BackBone 的新手，我根据在网络上找到的模板构建我的应用程序。我首先从 file.json 加载我的数据，就像这样......

```
 livestock.groups = Backbone.Collection.extend({
    model: livestock.Activity,
    url: "groups.json"
    }); 
```

然后，我有几行代码将集合加载到 HTML 并设置按钮功能。然后在接近尾声时，我有一条线可以像这样更新扩展集合...

```
 function addToList(activity) {
    livestock.groups.add({id: 6, type: activity, comments: 'Wow...that was easy.'});
    } 
```

这适用于集合的 HTML 版本，但我想在 addToList 函数中添加一行来更新我的 .json 文件。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:07:07.677

This isn't actually possible. Backbone was meant to interact with a RESTful web service. When you give it the URL to a JSON file like your'e doing, it sends a `GET` request, which works fine. It doesn't know whether or not it called a web service or not. However, when you want to send the update to the collection, it generates an HTTP `POST` request. However, that doesn't do any good submitting a `POST` request to a static file. Apache or whatever you're using to host the JSON file will probably ignore that and serve the static file again.

The real problem, however, is unrelated to Backbone itself. The problem is you can't edit a file on a remote server via javascript. You need some web service in between using something like PHP or Ruby that can take the request from Backbone and update the file on the server's hard drive.

If instead you're developing right now on your local computer, then this won't work for a different reason. Your browser, for security reasons, won't allow javascript to modify local files on your hard drive, even though they're in the same folder as your html and javascript.

Hope this helps.

**Edit:** Based on comments, adding links here to a couple sample adapters for Backbone to LocalStorage and IndexedDB:

*   [http://documentcloud.github.com/backbone/docs/backbone-localstorage.html](http://documentcloud.github.com/backbone/docs/backbone-localstorage.html)
*   [https://github.com/superfeedr/indexeddb-backbonejs-adapter](https://github.com/superfeedr/indexeddb-backbonejs-adapter)

# ruby - 匹配数字格式的正则表达式

> ID：12883086
> 
> 赞同：2
> 
> 时间：2012-10-14T14:20:30.200
> 
> 标签：ruby, regex

我正在尝试编写一个小程序，要求用户输入一个数字，程序将确定它是否是一个有效数字。用户可以输入任何类型的数字（整数、浮点数、科学计数法等）。

我的问题是应该使用什么正则表达式来防止像“7w”这样的东西被匹配为有效数字？此外，我希望数字 0 退出循环并结束程序，但正如现在所写的那样，0 与任何其他数字一样匹配有效。请问有什么见解吗？

```
x = 1

while x != 0
  puts "Enter a string"
  num = gets

  if num.match(/\d+/)
    puts "Valid"
  else
    puts "invalid"
  end

  if num == 0
    puts "End of program"
    x = num
  end   
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:26:04.287

您需要从命令行执行此脚本，而不是文本编辑器，因为系统会提示您输入数字。

这是超紧凑的版本

```
def validate(n)
  if (Float(n) != nil rescue return :invalid)
    return :zero if n.to_f == 0
    return :valid
  end
end
print "Please enter a number: "
puts "#{num = gets.strip} is #{validate(num)}" 
```

输出：

```
Please enter a number: 00
00 is zero 
```

这是一个较长的版本，您可能可以对其进行扩展以根据您的需要进行调整。

```
class String
  def numeric?
    Float(self) != nil rescue false
  end
end

def validate(n)
  if n.numeric?
    return :zero if n.to_f == 0
    return :valid
  else
    return :invalid
  end
end

print "Please enter a number: "
puts "#{num = gets.strip} is #{validate(num)}" 
```

这是对所有可能情况的测试

```
test_cases = [
  "33", #int pos
  "+33", #int pos
  "-33", #int neg
  "1.22", #float pos
  "-1.22", #float neg
  "10e5", #scientific notation
  "X", #STRING not numeric
  "", #empty string
  "0", #zero
  "+0", #zero
  "-0", #zero
  "0.00000", #zero
  "+0.00000", #zero
  "-0.00000", #zero
  "-999999999999999999999995444444444444444444444444444444444444434567890.99", #big num
  "-1.2.3", #version number
  "  9  ", #trailing spaces
]

puts "\n** Test cases **"
test_cases.each do |n|
  puts "#{n} is #{validate(n)}"
end 
```

哪个输出：

```
Please enter a number: 12.34
12.34 is valid

** Test cases ** 33 is valid
+33 is valid
-33 is valid
1.22 is valid
-1.22 is valid
10e5 is valid
X is invalid
 is invalid
0 is zero
+0 is zero
-0 is zero
0.00000 is zero
+0.00000 is zero
-0.00000 is zero
-999999999999999999999995444444444444444444444444444444444444434567890.99 is valid
-1.2.3 is invalid
   9   is valid 
```

检查其是否为数字的想法的来源：

*   [如何查看字符串是否为数字？](https://stackoverflow.com/questions/9469587/how-can-i-see-if-the-string-is-numeric)
*   [http://mentalized.net/journal/2011/04/14/ruby_how_to_check_if_a_string_is_numeric/](http://mentalized.net/journal/2011/04/14/ruby_how_to_check_if_a_string_is_numeric/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:34:49.207

首先，您使循环过于复杂，其次，您的正则表达式需要更加明确。尝试这样的事情：

```
x = 1

while x != 0
  puts "Enter a string"
  num = gets.chomp
  if num == "0"
    puts "exiting with 0"
    exit 0
  elsif num.match(/^[0-9](\.[0-9])?$+/)
    puts "Valid"
  else
    puts "invalid"
  end
end 
```

此表达式将匹配任何包含数字或小数的数字，并且将无法匹配任何包含字母的数字。如果输入的字符串正好为 0，则脚本将以状态 0 退出。

# python - Python：以 lambda 形式传递语句

> ID：12883088
> 
> 赞同：44
> 
> 时间：2012-10-14T14:20:45.830
> 
> 标签：python, lambda, anonymous-function

一个Python新手问题，为什么这个语法无效：`lambda: pass`，而这个：`def f(): pass`是正确的？

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-14T14:24:29.013

lambda 只能包含*表达式*- 基本上，可以出现在赋值语句右侧的东西。`pass`不是一个表达式 - 它不会计算为一个值，并且`a = pass`永远是不合法的。

另一种思考方式是，因为 lambdas 隐式返回其 body 的结果，`lambda: pass`实际上等价于：

```
def f():
    return pass 
```

这没有任何意义。如果您出于某种原因确实需要无操作 lambda，请`lambda: None`改用。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-10-14T14:24:23.897

这是一个错误，因为你必须在冒号后面加上返回值，所以：

```
lambda: pass 
```

等于：

```
def f():
   return pass 
```

这确实没有意义，并且`SyntaxError`也会产生 a 。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-07-27T14:27:18.200

`return`没有语句的函数的返回值是`None`. 您可以从 OP 中定义的简单`pass`函数中看到这一点：

```
>>> def f():
...     pass
... 
>>> print f()
None 
```

如果您正在寻找与此“无操作”函数等效的 lambda 函数，则可以使用：

```
lambda: None 
```

例如：

```
>>> f = lambda: None
>>> print f()
None 
```

# android - 将 Android 应用数据库与远程 API 同步的策略

> ID：12883089
> 
> 赞同：2
> 
> 时间：2012-10-14T14:20:54.240
> 
> 标签：android, database-design, architecture

我正在开发一个 Android 应用程序，它是远程 JSON Web 服务 API 的客户端（我构建了服务器，因此我拥有最大的灵活性）。

我正在尝试确定什么是保持本地 SQLite 数据库与远程 API 同步的好策略（在电池寿命、带宽和等待时间方面）。

我目前在想的是服务器将通过 GCM 通知 Android 应用程序任何操作（应该获取的新数据或应该更新的旧数据），此外，用户将有一个刷新按钮来手动执行同步。

这种方法的缺点是，如果 GCM 消息“丢失”，则无法知道任何更新或新数据。

每当用户要求查看某些内容时，我都可以添加时间戳并检查新数据，但这并不能解决确定何时需要刷新 SQLite 数据库中已有的旧数据的方法。

关于改进此同步策略或我应该研究的任何其他方法的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:28:27.337

您可以让应用程序在收到 GCM 推送时向服务器发送收到的确认。然后，如果服务器在 X 时间范围内没有看到确认，它可以重新发送 GCM 推送。

# php - PHP函数/快速函数示例

> ID：12883090
> 
> 赞同：0
> 
> 时间：2012-10-14T14:20:57.783
> 
> 标签：php

这是一个更普遍的问题。

我目前不写很多函数。

是否最好使用尽可能多的功能？

还有一个简单的问题，这是一种检查是否满足功能的食物方式。

```
if (!validateField("route"))
$errorMsg.= '<li>Select a valid</li>';

function validateField($field){      

        if(strlen(getFieldValue($field)) <=0)
            return false;  
        else  
            return true;  
    A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:25:55.547

函数可以使代码更具可读性，而不是一遍又一遍地重复代码。

您的函数可以这样重写：

```
function validateField($field)
{      
  return (bool) strlen(getFieldValue($field));
} 
```

这可以重写为

```
function validateField($field)
{      
  return (bool) getFieldValue($field));
} 
```

因此，在这种特殊情况下，您根本不需要函数，只需编写

```
if (!validateField(getFieldValue("route")) 
```

# php - 正则表达式匹配某个字符的确切出现次数

> ID：12883096
> 
> 赞同：3
> 
> 时间：2012-10-14T14:21:23.307
> 
> 标签：php, regex

我正在尝试检查一个字符串是否有一定数量的字符出现。

例子：

```
$string = '123~456~789~000'; 
```

我想验证这个字符串是否正好有 3 个 character 实例`~`。

可以使用正则表达式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T14:23:23.663

是的

```
/^[^~]*~[^~]*~[^~]*~[^~]*$/ 
```

解释：

*   `^`...`$`表示许多正则表达式方言中*的整个字符串*
*   `[^~]*`零个或多个非波浪字符的字符串
*   `~`一个波浪字符

字符串可以有尽可能多的非波浪字符，出现在字符串中的任何位置，但必须恰好有三个波浪号，不多也不少。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T15:21:12.403

由于单个字符在技术上是一个子字符串，并且任务是计算它的出现次数，我想最有效的方法在于使用一个特殊的 PHP 函数 - [substr_count](http://php.net/manual/en/function.substr-count.php)：

```
$string = '123~456~789~000';
if (substr_count($string, '~') === 3) {
  // string is valid
} 
```

显然，如果您需要计算模式匹配的数量，这种方法将不起作用（例如，虽然您可以使用 来计算字符串中 '0' 的数量`substr_count`，但最好使用`preg_match_all`count 来计算*）*。

然而，对于这个特定的问题，它应该更快，因为`substr_count`它针对一个特定的目标进行了优化 - 计算子串 - 当`preg_match_all`更普遍的时候。)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-14T14:28:39.127

我相信这应该适用于可变数量的字符：

```
^(?:[^~]*~[^~]*){3}$ 
```

这里的优点是您只需将 3 替换为您想要检查的任何数量。

为了提高效率，可以写成

```
^[^~]*(?:~[^~]*){3}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T14:58:47.907

这就是您要查找的内容：

**根据以下[评论进行](https://stackoverflow.com/questions/12883096/regular-expression-to-match-an-exact-number-of-occurrence-for-a-certain-characte/12883387#comment17444055_12883387)**编辑**：**

 **```
<?php

$string = '123~456~789~000';
$total  = preg_match_all('/~/', $string);
echo $total; // Shows 3 
```**

# logic - Z3 SMT 求解器中常数的相等性

> ID：12883107
> 
> 赞同：2
> 
> 时间：2012-10-14T14:23:07.367
> 
> 标签：logic, z3, solver, smt

我正在使用 Microsoft 的 Z3 SMT 求解器，并且正在尝试定义自定义排序的常量。默认情况下，这些常量似乎不是不相等的。假设您有以下程序：

```
(declare-sort S 0)

(declare-const x S)
(declare-const y S)

(assert (= x y))
(check-sat) 
```

这将给出“sat”，因为当然完全有可能两个相同类型的常数相等。由于我正在制作常量必须彼此不同的模型，这意味着我需要添加形式的公理

```
(assert (not (= x y))) 
```

对于每一对相同类型的常数。我想知道是否有某种方法可以做到这一点，以便默认情况下每个排序常量都是唯一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T17:01:02.840

您可以使用数据类型对许多编程语言中的枚举类型进行编码。在以下示例中，排序`S`具有三个元素，它们彼此不同。

```
(declare-datatypes () ((S a b c))) 
```

这是一个完整的例子：[http ://rise4fun.com/Z3/ncPc](http://rise4fun.com/Z3/ncPc)

```
(declare-datatypes () ((S a b c)))

(echo "a and b are different")
(simplify (= a b))

; x must be equal to a, b or c
(declare-const x S)

; since x != a, then it must be b or c
(assert (not (= x a)))
(check-sat)
(get-model)
; in the next check-sat x must be c
(assert (not (= x b)))
(check-sat)
(get-model) 
```

另一种可能性是使用`distinct`.

```
(assert (distinct a b c d e)) 
```

# entity-framework-5 - 实体框架数据库首先，自引用实体层次结构的接口

> ID：12883119
> 
> 赞同：1
> 
> 时间：2012-10-14T14:24:21.773
> 
> 标签：entity-framework-5, ef-database-first

我有一个自引用的实体类别，它有子类别。它工作得很好。

现在我想实现一个 JsTree 助手，但是因为我有另一个使用类似结构的不同项目（类别是两个项目中 100% 相似的实体），所以我想在类库中实现助手并使其对两者都可用。

这是实体框架生成的代码，这里没有变化：

```
[EdmEntityTypeAttribute(NamespaceName="MyModel", Name="Category")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class Category : EntityObject
{
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("MyModel", "FK_Categories_Categories", "Categories1")]
    public EntityCollection<Category> Subcategories
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Category>("WebDirectoryModel.FK_Categories_Categories", "Categories1");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Category>("MyModel.FK_Categories_Categories", "Categories1", value);
            }
        }
    }
} 
```

这是我写的界面：

```
 public interface ICategory
{
    System.Int32 CategoryId { get; set; }
    System.String DefaultName { get; set; }
    EntityCollection<ICategory> Subcategories { get; set; }
} 
```

然后我为实现 ICategory 的 Category 添加了另一个部分类：

```
 public partial class Category : ICategory
{
} 
```

问题是我收到以下编译错误：

> 错误 6“MyProject.EntityFramework.Models.Category”未实现接口成员“ICategory.Subcategories”。“MyProject.EntityFramework.Models.Category.Subcategories”无法实现“ICategory.Subcategories”，因为它没有匹配的返回类型“System.Data.Objects.DataClasses.EntityCollection < ICategory >”。

有什么想法可以解决这个问题吗？我究竟做错了什么？类别正在实施 ICategory 所以 ICategory 中的子类别（ICategory 集合）应该匹配，不是吗？

我正在使用 EF 4.4，但我认为问题与此无关。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:14:57.700

看来我已经解决了，我还没有运行应用程序，但它可以编译并且有意义。这就是我所做的：

ICategory 更通用，也只有 getter，我不需要 setter：

```
public interface ICategory
{
    System.Int32 CategoryId { get; set; }
    System.String DefaultName { get; set; }
    IEnumerable<ICategory> Subcategories { get; }
} 
```

然后是部分类Category：

```
public partial class Category : ICategory
{
    IEnumerable<ICategory> ICategory.Subcategories
    {
        get { return Subcategories.Cast<ICategory>(); }
    }
} 
```

在我测试它以确认它有效后，我会更新答案。我正在写助手。

* * *

我编辑以确认这有效。

# java - 将文本和对齐图像添加到 ColumnText Itext

> ID：12883122
> 
> 赞同：0
> 
> 时间：2012-10-14T14:24:29.843
> 
> 标签：java, pdf, itext

我正在从右到左写文字。

如何在文本末尾添加图像（对齐很好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:59:37.470

这个问题并不完全清楚。

始终遵守添加到 Document 的对象的顺序，但对象除外`Image`。如果某个`Image`对象不适合页面，则可以将其转发到下一页，然后可以先添加其他内容。如果您想避免这种情况，请使用`writer.setStrictImageSequence(true)`;

但是：您是从右向左书写（可能是希伯来语），因此上述内容不适用，而不是 Anshu 之前的回答。您只能在`ColumnText`和中使用 RTL `PdfPTable`。

目前还不清楚你想做什么。

是否要`Image`在文本底部添加一个？这很简单：只需先添加文本，然后添加`Image`. 是否要添加`Image`内联？在这种情况下，您可以像在此示例中所做的那样将其包装`Image`在 a中：http: [//itextpdf.com/examples/iia.php ?id=54](http://itextpdf.com/examples/iia.php?id=54)`Chunk`

我的解释是：你想在左下角添加图像，并且你想在图像旁边添加文本。这更难实现。您需要分别添加`Image`和 文本。在绝对位置添加图像并使用“不规则列”添加文本。即：`ColumnText`在文本模式下（相对于复合模式）。有关如何使用不规则列的示例，请参阅[http://itextpdf.com/examples/iia.php?id=67](http://itextpdf.com/examples/iia.php?id=67)

# c# - UI 在使用 Web 浏览器控件时变得无响应，即使它是从单独的线程中使用和调用的

> ID：12883123
> 
> 赞同：2
> 
> 时间：2012-10-14T14:24:59.777
> 
> 标签：c#

> **可能重复：**
> [新线程中的 WebBrowser 控件](https://stackoverflow.com/questions/4269800/webbrowser-control-in-a-new-thread)

我正在开发一个 Winforms 应用程序，其中包含以下控件。一个文本框、WebBrowser 控件和 3 个 Richtextbox。

这个应用程序的目的是，当我在文本框中输入 URL 时，网络浏览器应该将我导航到该页面，然后我将解析网页的 HTML 源以获取所有超链接，然后我将再次过滤这些超链接到有效和无效的超链接。

到目前为止，我正在另一个线程中声明 Web 浏览器控件，并且当 Web 浏览器的导航事件触发时，我将再创建一个线程来执行我上面提到的所有解析内容。问题是当 Web 浏览器加载网页时应用程序变得无响应，即使我是从单独的线程调用它。

我们有解决方法吗？

这是我为 Web 浏览器控制创建单独线程的代码。

```
Thread t2 = null;

private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
        if (e.KeyChar == (char)13)
        {
            if((textBox1.Text.StartsWith("www") || textBox1.Text.StartsWith("WWW")))
            {
               textBox1.Text = textBox1.Text.Insert(0,"http://");

            }
            if (!(textBox1.Text.EndsWith(".html") || textBox1.Text.EndsWith(".htm")))
            {
                textBox1.Text = textBox1.Text + "/";
            }
            t2 = new Thread(new ParameterizedThreadStart(ActivateBrowser));
            t2.IsBackground = true;
            t2.SetApartmentState(ApartmentState.STA);
            t2.Start(textBox1.Text);
        }
    }

    public void ActivateBrowser(Object URL)
    {
        String url = (string)URL;
        WebBrowserNavigation(url);            
    }

    public delegate void PassURLDelegate(string URL);

    public void WebBrowserNavigation(string URL)
    {
        if (webBrowser1.InvokeRequired)
        {
            this.BeginInvoke(new PassURLDelegate(WebBrowserNavigation), new object[] { URL });
        }
        else
        {
            webBrowser1.Navigate(URL);
        }
    } 
```

# cuda - 安装 CUDA 5.0 RC 示例

> ID：12883128
> 
> 赞同：16
> 
> 时间：2012-10-14T14:25:30.460
> 
> 标签：cuda, installation

我尝试安装完整的 CUDA 5.0 软件包，但出现以下错误：

```
Driver:   Not Selected
Toolkit:  Not Selected
Samples:  Installation Failed. Missing required libraries. 
```

所以，在 /tmp/cuda_install_2340.log 我有：

```
Missing required library libglut.so 
```

但我以前安装过它，因为我这样做：

```
facundo@gpgpu:~$ locate libglut
/usr/lib/x86_64-linux-gnu/libglut.a
/usr/lib/x86_64-linux-gnu/libglut.so
/usr/lib/x86_64-linux-gnu/libglut.so.3
/usr/lib/x86_64-linux-gnu/libglut.so.3.9.0 
```

那么，问题是什么？我在 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T00:58:47.453

我在 Ubuntu 12.04 上，我通过以下方式修复了它：

```
sudo ln -s /usr/lib/x86_64-linux-gnu/libglut.so /usr/lib/libglut.so 
```

所以问题是 ubuntu 正在将 libglut 库安装在 x64 架构的不同路径中，因此可以修复它，使其符号链接到 /usr/lib/。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T03:21:22.407

上`CentOS 5.6 x64`，`Kernel: 2.6.18-308.24.1.el5`

```
1\. yum install freeglut

2\. ln -s /usr/lib/libglut.so.3 /usr/lib/libglut.so 
```

然后我也`CUDA 5.0`成功安装了 Sample 。

感谢这篇文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T19:03:49.777

Ubuntu 12.04 x64 实际上创建了一个 /usr/lib/glut.so - 它只是指向 libglut.so.3 而不是 /usr/lib/x86_64-linux-gnu/libglut.so

```
rm /usr/lib/libglut.so;
ln -s /usr/lib/x86_64-linux-gnu/libglut.so /usr/lib/libglut.so 
```

# ios - 为什么这个 NSUserDefaults 键包含一个点？

> ID：12883140
> 
> 赞同：2
> 
> 时间：2012-10-14T14:26:37.940
> 
> 标签：ios, nsuserdefaults, cs193p

我正在看斯坦福 CS193P 的课，特别是第 7 课。我对`NSUserDefaults`. 这是代码的一部分：

```
#define FAVORITES_KEY @"CalculatorGraphViewController.Favorites"

- (IBAction)addToFavorites:(id)sender
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSMutableArray *favorites = [[defaults objectForKey:FAVORITES_KEY] mutableCopy];
    if (!favorites) favorites = [NSMutableArray array];
    [favorites addObject:self.calculatorProgram];
    [defaults setObject:favorites forKey:FAVORITES_KEY];
    [defaults synchronize];
} 
```

我阅读了有关 的文档`NSUserDefaults`，但我特别不理解此代码`[[defaults objectForKey:FAVORITES_KEY] mutableCopy]`。`FAVORITES_KEY`是`@"CalculatorGraphViewController.Favorites"`。

我的问题是为什么我应该使用`CalculatorGraphViewController.Favorites`？我不明白这个点！在我看来，getter 或 setter 的结构，但收藏夹有一个大写字母，然后 CalculatorGraphViewController.Favorites 没有意义。

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:31:27.563

你可以把它想象成一个NSDictionary，你提供的key仅供你自己参考。供您稍后取回该值。您可以将其称为 @"CalculatorGraphViewController.Favorites" 之类的字符串或您喜欢的任何其他字符串。他们这样命名只是为了确定这是记录在 CalculatorGraphViewController 中的收藏夹选项的值，我相信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:43:48.777

正如其他人所指出的，密钥是任意字符串。问题是您的应用程序的许多部分可能会写入默认值。如果你选择了一些非常简单的东西作为键，比如“收藏夹”，那么很可能你的应用程序的两个部分都会尝试使用相同的键来做不同的事情。（比如说，对于最喜欢的艺术家和最喜欢的歌曲。）

这是编程中的一个常见问题，通常通过引入*命名空间*或某种前缀来解决，以降低冲突的可能性。您经常可以在 Java 类中看到命名空间，例如`com.someguy.AppName.SomeClassName`. 甚至在域名中——比如`developer.facebook.com`和`developer.apple.com`. 两者都使用术语“开发者”，但都在命名空间（`com.facebook`vs `com.apple`）上有所不同。

您可以在用例中使用相同的解决方案，并将命名空间引入默认键。命名空间的逻辑选择是类名，因为您不太可能有两个具有相同名称的类。这样你就得到了`CalculatorGraphViewController`前缀。点只是在命名空间中分隔组件的一种习惯方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T14:32:43.413

它只是键，可以是任何字符串或对象，但不能是 nil

# android - Android：从 SherlockActivity 回到 SherlockFragment

> ID：12883144
> 
> 赞同：0
> 
> 时间：2012-10-14T14:27:06.747
> 
> 标签：android, android-activity, android-fragments, actionbarsherlock, back

我正在打开一个来自 SherlockFragment 的 SherlockActivity。现在我想构建一个带有后退按钮的操作栏。这样可行：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.myactivity);        
        ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
} 
```

但是我怎样才能回到我的夏洛克碎片呢？这不起作用。错误代码是“无法找到明确的活动类”

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
            case 0:
                return true;
            default:
            // This do NOT bring me back to my SherlockFragment !!! //
                Intent in = new Intent(this, MySherlockFragment.class);
                startActivity(in);
                return super.onOptionsItemSelected(item);
            }
} 
```

如何从我的 SherlockActivity 中启动我的 Sherlockfragment？

谢谢 ：-）

# pppoe - 如何创建 PPPoE 连接并将其与 vb2010 代码一起使用

> ID：12883146
> 
> 赞同：0
> 
> 时间：2012-10-14T14:27:27.073
> 
> 标签：pppoe

我需要使用用户名和密码创建 PPPoE 连接并使用`VB 2010`代码连接或断开连接或删除它

谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:33:13.803

你可以利用`radsial`来做到这一点。

看到这个[命令](http://ss64.com/nt/rasdial.html)，[这个](http://allapi.mentalis.org/apilist/RasDial.shtml)站点可能有相关代码

# c - 为什么编译器不在堆栈上分配和释放带有“sub*”和“add*”的本地变量？

> ID：12883160
> 
> 赞同：2
> 
> 时间：2012-10-14T14:29:33.043
> 
> 标签：c, macos, assembly, compiler-construction, llvm-gcc

根据一些教科书，编译器会使用`sub*`局部变量来分配内存。

例如，我编写了一个 Hello World 程序：

```
int main()
{
    puts("hello world");
    return 0;
} 
```

我猜这将在 64 位操作系统上编译成一些汇编代码：

```
 subq    $8, %rsp
    movq    $.LC0, (%rsp)
    calq    puts
    addq    $8, %rsp 
```

为`subq`参数分配 8 字节内存（一个点的大小）并`addq`释放它。

但是当我输入时`gcc -S hello.c`（我在 Mac OS X 10.8 上使用 llvm-gcc），我得到了一些汇编代码。

```
.section    __TEXT,__text,regular,pure_instructions
.globl  _main
.align  4, 0x90
_main:
Leh_func_begin1:
       pushq    %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    subq    $16, %rsp
Ltmp2:
    xorb    %al, %al
    leaq    L_.str(%rip), %rcx
    movq    %rcx, %rdi
    callq   _puts
    movl    $0, -8(%rbp)
    movl    -8(%rbp), %eax
    movl    %eax, -4(%rbp)
    movl    -4(%rbp), %eax
    addq    $16, %rsp
    popq    %rbp
    ret

   .......

L_.str:
      .asciz     "hello world!" 
```

在此周围`callq`没有任何`addq`and `subq`。为什么？的作用是`addq $16, %rsp`什么？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T19:35:41.400

您的`main()`. 您可能拥有的只是传递给的参数的伪变量，即字符串`puts()`的地址。`"hello world"`

根据您上次的反汇编，调用约定似乎是第一个参数`puts()`在寄存器中而不是在堆栈中传递`rdi`，这就是为什么没有为此参数分配任何堆栈空间的原因。

但是，由于您在禁用优化的情况下编译程序，您可能会遇到一些不必要的堆栈空间分配以及对该空间的读写操作。

这段代码说明了它：

```
subq    $16, %rsp ; allocate some space
...
movl    $0, -8(%rbp) ; write to it
movl    -8(%rbp), %eax ; read back from it
movl    %eax, -4(%rbp) ; write to it
movl    -4(%rbp), %eax ; read back from it
addq    $16, %rsp 
```

这四条`mov`指令相当于一条简单的指令`movl $0, %eax`，不需要内存。

如果您`-O2`在编译命令中添加优化开关，您将在反汇编中看到更有意义的代码。

另请注意，某些空间分配可能仅出于保持堆栈指针对齐的目的而需要，这可以提高性能或避免未对齐的内存访问问题（如果启用，您可能会在未对齐的访问中获得#AC 异常）。

上面的代码也显示了它。看，这四条`mov`指令只使用了 8 个字节的内存，而`add`and`sub`指令将堆栈增长和收缩了 16 个字节。

# python - 所有结构操作都会导致“警告 X 在执行 Y 时遇到错误（返回代码 1）”

> ID：12883166
> 
> 赞同：0
> 
> 时间：2012-10-14T14:30:54.087
> 
> 标签：python, fabric

由于某种原因，我在远程服务器上执行的所有结构操作都失败并出现错误：

```
Fatal error: X encountered an error (return code 1) while executing 'Y'. 
```

在这种情况下，“X”是各种结构操作（运行、sudo 等）以及“Y”（所有命令）。

我试图放入`env.warn_only = True`结构文件，然后日志显示所有命令都已执行（错误作为警告），但是当我之后查看远程服务器时，仍然没有发生任何事情。

是什么导致了这个错误？

# c# - 如何检查 C# 字符串数组是否包含值

> ID：12883173
> 
> 赞同：1
> 
> 时间：2012-10-14T14:31:37.767
> 
> 标签：c#

我有以下内容：

```
var a = new string[] {"a", "b", "c"}; 
```

如何检查此数组以查看它是否包含“c”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:32:25.990

试试这个，

```
bool x = a.Contains("c"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T14:32:58.827

使用`Contains`扩展方法 - `a.Contains("c");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T15:04:34.337

如果您不想使用 的扩展方法`System.Linq.Enumerable`，或者您担心性能太差，那么“旧”方法是丑陋的

```
Array.IndexOf(a, "c") != -1 
```

另一种丑陋的可能性是使用其中一个显式接口实现，例如

```
((IList<string>)a).Contains("c") 
```

在某些方面，数组对他们来说有一种过时的感觉。

# java - 从 main() 访问另一个 Java 应用程序的线程

> ID：12883174
> 
> 赞同：0
> 
> 时间：2012-10-14T14:31:40.360
> 
> 标签：java, multithreading, process, executable-jar

我想从我自己的 main() 运行一个 JAR 文件。假设我有一个 A 类，它有一个`main()`方法。A的方法将在另一个文件 B.jar 中`main()`运行一个新方法。`main()`这就是我从 A.jar 的`main()`方法运行 B.jar 文件的方式：[here](https://stackoverflow.com/questions/1320476/execute-another-jar-in-a-java-program)。

问题是我无权访问 B.jar Java 源代码。`main()`我需要知道的是 B.jar方法中有多少线程正在运行。

[这里](https://stackoverflow.com/questions/1323408/get-a-list-of-all-threads-currently-running-in-java)有另一个关于获取在 Java 应用程序中运行的所有线程列表的讨论。

现在我需要的是由 B.jar 生成的线程列表。或者至少是一个线程 ID 数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:40:37.377

该方法`Thread.activeCount()`将为您提供当前`ThreadGroup`. 如果外部 jar 中的线程没有定义新的线程组，则默认情况下运行时会将这些线程与调用线程（即您的线程）放在同一组中。您可以在执行 jar 之前和之后调用此方法，看看它有多少变化。

更新 - 如果您还想知道新 jar 生成了哪些线程，请`Thread.enumerate`在之前和之后使用 过滤两个数组中的线程。剩下的线程应该是 jar 文件中的类创建的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:24:30.107

保持`root/parent`JAR`B`进程的线程。在任何时候，使用这个`root/parent`。`activeCount()`获取您`B`创建的线程数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T23:53:03.313

如果您根据链接到的引用在单独的进程中运行 B.jar，则它的线程在该进程中，而不是在这个进程中，并且您无法访问它们。如果出于某种（奇怪的）原因需要访问线程，则必须（查找并）直接在当前 JVM 中运行 B.jar 的 main() 方法。

# python - Python OOP：__init__() 括号中的属性与外部属性之间的区别

> ID：12883175
> 
> 赞同：-3
> 
> 时间：2012-10-14T14:31:50.293
> 
> 标签：python, oop, class, attributes

我在这里和 Python 教程中阅读了很多关于 Python OOP 的内容。但是有些问题在类属性上困扰着我。

例子：

```
class Par(object):
    def __init__(self, chip, fig):
        self.fruit = chip
        self.fig = fig
        self.pear =10 
```

1.  不`self.fruit = chip`应该`self.chip = chip`吗？
2.  怎么`fruit`没有出现在`__init__()`括号中的属性列表中却被使用了？
3.  `self.fruit = chip`和 和有什么不一样`self.chip = chip`？
4.  `__init__()`在中声明属性和在外部声明属性有什么区别，`__init__()`例如`self.pear =10`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:38:35.157

`self`将是`Par`. `self.__dict__`是一个包含 的属性的字典`self`。当你说

```
self.fruit = chip 
```

在 dict 中创建一个条目：`self.__dict__`将包括`{'fruit':chip}`.

当你说

```
def __init__(self, chip, fig): 
```

您声明`Par`必须传递两个值，`chip`并且`fig`. （该`self`实例将为您传递`__init__`。）

所以在内部`__init__`，**局部变量**（不是属性！）`chip`和`fig`是已知的。

`self.fruit = chip`正在创建一个具有 value的**属性** 。`fruit``chip`

* * *

例如，

```
class Par(object):
    def __init__(self, chip, fig):
        self.fruit = chip
        self.fig = fig
        self.pear = 10

# 99 is being passed in as the value of `chip`
# 'bar' is being passed in as the value of `fig`    
par = Par(99,'bar') 
print(par.__dict__) 
```

产量

```
{'fruit': 99, 'pear': 10, 'fig': 'bar'} 
```

* * *

请注意，要访问您通常使用的属性，例如，`par.fruit`而不是`par.__dict__['fruit']`. 我`par.__dict__`在上面展示只是为了给你一个幕后发生的事情的图片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:35:04.240

> “self.fruit = chip”和“self.chip = chip”有什么区别？

只有一个区别。在第一种情况下，您正在存储`chip`名为 的 in 属性`fruit`，而在第二种情况下，它的`chip`. `__dict__`类的属性中的条目是为`LHS`和`RHS`作为`name-value`对。LHS 表示`attribute`您用于链接到`__dict__`类属性中的值的名称。你可以在`any name`那里..

> 为什么fruit没有出现在**init** ()括号内的属性列表中却被使用了

原因和我上面写的一样。`fruit`是一个类属性。您在`__init__`方法中声明它，并将传递的值分配给 that `attribute`。

> 在 init() 中声明属性和在 _init() 之外声明属性有什么区别，例如“self.pear =10”

里面声明的变量`__init__`是类属性。它们对于为该类创建的所有实例都是通用的。而您在外部声明的属性是`instance`特定的。因此，具体而言，类的每个实例都可以具有“不同的属性集”。

```
class Demo:
    def __init__(self, name):
        # This attribute is linked to every instance through self parameter, 
        # which contains the reference to the current instance.
        self.name = name   

demo1 = Demo("demo1")

demo2 = Demo("demo2")

demo1.attr = "new Attr"   # Creating Attribute on the fly.

demo2.diffAttr = "diff Attr" 
```

**所以，在上面的代码中： -**

*   该实例`demo1`有两个属性，`name`并且`attr`
*   并且实例`demo2`也有两个属性，`name`并且`diffAttr`，两个实例的第二个属性是不同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T14:37:28.297

1.  任何一个都是正确的。

2.  在 python 中，您不必声明变量。`self.fruit = chip`创建变量，然后将变量`self.fruit`的值分配给它`chip`

3.  `self.fruit = chip`存储的值`chip`是`self.fruit`变量，而`self.chip = chip`存储的值`chip`是`self.chip`

4.  `chip`并且`flag`不属于 Par 对象。它们仅用于访问在调用函数时传递给函数的值。

关键字告诉解释器后面的`self`变量是对象的成员。`chip`在您的示例中，和的值`fig`将在函数`__init__`执行后丢失，但只要对象离开`self.fruit`，`self.fig`和的值就会保留。`self.pear`这意味着它们具有不同的范围。

`__init__`函数执行后，您可以读取和修改 的值`self.fruit`，如下所示：`self.fig``self.pear`

```
par = Par(oneChip, oneFig)
print par.fruit
print par.fig
par.pear = 20
print par.pear 
```

# php - 填充一个输入时如何使用ajax获取mysql数据

> ID：12883178
> 
> 赞同：0
> 
> 时间：2012-10-14T14:32:11.447
> 
> 标签：php, javascript, sql, ajax

html

```
<input type="text" name="PName" />
<input type="text" name="PAddress" />
<input type="text" name="PCity" /> 
```

mysql表

```
 ________________________________________________________
| id  |PName          |  PAddress           |  PCity    |
| ----|-------------------------------------------------|
|  1  | John           |  po box no xyz      |  Florida |
????????????????????????????????????????????????????????? 
```

现在我的问题是当我输入姓名时如何使用 ajax 来获取地址和城市？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:52:31.003

不久前，我对我的项目进行了“实时”搜索，所以这里有一些代码根据您的需要进行了修改（我假设您的页面上有[jQuery](http://jquery.com/)）。

首先我建议你给你的输入一些id：

```
<input type="text" name="PName" id="PName" />
<input type="text" name="PAddress" id="PAdress" />
<input type="text" name="PCity" id="PCity" /> 
```

之后，您可以绑定 PName 字段的 keyup 事件：

```
var searchTimeout; //Timer to wait a little before fetching the data
$("#PName").keyup(function() {
    searchKey = this.value;

    clearTimeout(searchTimeout);

    searchTimeout = setTimeout(function() {
        getUsers(searchKey);    
    }, 400); //If the key isn't pressed 400 ms, we fetch the data
}); 
```

获取数据的js函数：

```
function getUsers(searchKey) {
    $.ajax({
        url: 'getUser.php',
        type: 'POST',
        dataType: 'json',
        data: {value: searchKey},
        success: function(data) {
            if(data.status) {
                $("#PAddress").val(data.userData.PAddress);
                $("#PCity").val(data.userData.PCity);
            } else {
                // Some code to run when nothing is found
            }   
        }
    });         
} 
```

当然还有`getUser.php`文件：

```
<?php
    //... mysql connection etc.

    $response = Array();

    $response['status'] = false;

    $query = mysql_query("SELECT `PAddress`, `PCity` FROM `Users` WHERE `PName` LIKE '%".$_POST['value']."%' LIMIT 1"); //Or you can use = instead of LIKE if you need a more strickt search

    if(mysql_num_rows($query)) {
        $userData = mysql_fetch_assoc($query);

        $response['userData'] = $userData;
        $response['status'] = true;            
    }

    echo json_encode($response); 
```

祝你好运！^^

# c# - 如何在 c# 中为已完成的 windows 应用程序上的所有表单设置图标？

> ID：12883180
> 
> 赞同：-2
> 
> 时间：2012-10-14T14:32:15.130
> 
> 标签：c#, file, file-io

首先，我尝试自己制作一个图标，然后通过将扩展名替换为 .icon 将其转换为图标文件。但是应用程序无法读取它。

其次，我的应用程序上有很多表单，所以如果可能的话，我想同时设置一个应用程序图标和单个表单图标。否则，我会用艰难的方式来配置图标的表单属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:18:16.080

第一次，重命名图标扩展名是错误的..

图标的内容类型不同于 png、jpg 等（image/vnd.microsoft.icon 代替 image/png、image/jpeg 等）

[您可以使用GreenFish Icon Editor Pro](http://www.freewarefiles.com/Greenfish-Icon-Editor-Pro_program_37937.html)制作自定义图标（扩展名为 .ico）

它免费且简单

第二次，您可以创建一个自定义基 Form 类，如下所示：

```
public class MyProjectBaseForm : Form
{
    protected MyProjectBaseForm()
    {
        // set icon (and more property) value here
    }
} 
```

并简单地在所有 Form.cs（和 Form.Designer.cs）中实现

之后，这项工作可以轻松快速地更新

希望这有帮助！

# android - 如何从服务创建文件并从 android 中的 Activity 中读取它！（序列化/反序列化）

> ID：12883181
> 
> 赞同：0
> 
> 时间：2012-10-14T14:32:16.147
> 
> 标签：android, serialization, android-intent, arraylist, android-service

我正在开发一个用于查找重复文件的 Android 应用程序。到目前为止，我已经开发了目录资源管理器活动。用户将通过此活动选择目录，然后我在单独的进程中启动服务以列出该目录中的所有文件（使用 DFS 算法）并查找其中的所有重复项。

现在我想在单独的活动中显示该目录及其子目录中所有文件的列表。我正在使用 ArrayList 来保存文件对象，并希望将此 ArrayList 从该服务传递给 Activity。我正在将 ArrayList 写入服务中的文件“filelist.bin”，并希望从 Activity 中读取该文件，但这里出现错误！.

此外，为了启动活动，我正在使用服务在完整列出所有文件并将它们添加到 ArrayList 时抛出的通知。

当我尝试读取文件时，我收到资源未找到异常。最后列出了所有错误详细信息。

## 以下是供您参考的代码（服务代码）

```
public class BgService extends Service {

static String DIR0;
//public static ArrayList<FileX> OnlyFiles = new ArrayList<FileX>();

public static Stack<File> dirStack = new Stack<File>();
public static File file0;
public static File[] filearray;

static int size=0;
static FileX file2;

public static ArrayList<File> sOnlyFiles = new ArrayList<File>();
ArrayList<File> ListoFile;
static String hash1,hash2;
static ArrayList<Integer> Index2Del= new ArrayList<Integer>();
ArrayList<FileX> localOF;

FileOutputStream fos ;
FileInputStream fis;
ObjectOutputStream obs;
ObjectInputStream obsi;

@Override

public void onCreate() {
    // TODO Auto-generated method stub
    //Toast.makeText(getApplicationContext(), "service created",5000).show();

    super.onCreate();

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    DIR0 = new String( intent.getCharArrayExtra("dir0"));
    listAllfiles();

    Collections.sort(sOnlyFiles, SizeFileComparator.SIZE_COMPARATOR);

    serializeList();
    //deserializeList();
    /*
    int size = ListoFile.size();
    for(int i = 0;i<size;i++){
        Toast.makeText(getApplicationContext(),String.valueOf(ListoFile.get(i).length()),1000).show();
    }*/

    displayNotification();
    this.stopSelf();
    return super.onStartCommand(intent, flags, startId);

}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    //Toast.makeText(getApplicationContext(), "service destroyed",5000).show();
    super.onDestroy();
}

public void listAllfiles(){

           dirStack.push(new File(DIR0));

    while(dirStack.size()!=0){

        file0 = dirStack.pop();
        filearray=file0.listFiles();

        for(File lookFile : filearray){
            if(lookFile.isFile() && lookFile.canRead()){
                sOnlyFiles.add(lookFile);
                DataHolder.Dcounter++;
            }
            else if(lookFile.isDirectory()&& lookFile.canRead()){
                dirStack.push(lookFile);
            }
        }

    }
}

public void serializeList()  {
String filename = "filelist.bin";
File dir = getDir("DFR", MODE_PRIVATE);

try {
    Resources res = Resources.getSystem();
     fos = openFileOutput(filename, MODE_PRIVATE);
    obs = new ObjectOutputStream(fos);
    obs.writeObject(sOnlyFiles);
    obs.flush();
    obs.close();
    fos.close();

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

}

public void displayNotification(){
    NotificationManager nm = (NotificationManager)getSystemService(getApplicationContext().NOTIFICATION_SERVICE);
        Intent i = new Intent(getApplicationContext(),AllFiles.class);
    //  Bundle listfile = new Bundle();
    //listfile.putStringArrayList("listfile", sOnlyFiles);
        //i.putExtra(name, value)
        //i.putExtra("filelist", sOnlyFiles);

        PendingIntent pi = PendingIntent.getActivity(getApplicationContext(), 0, i, PendingIntent.FLAG_CANCEL_CURRENT);
        Notification nf = new Notification(R.drawable.ic_launcher,"Duplicate File Remover\n"+ DataHolder.Dcounter+"  files found",System.currentTimeMillis());

        nf.setLatestEventInfo(getApplicationContext(), "Duplicate File Remover",  DataHolder.Dcounter+" files found",pi);
        nf.vibrate = new long[]{100,250,100,500};
        nm.notify(1,nf);

}
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

## （活动守则）

```
public class AllFiles extends ListActivity{

FileInputStream fis ;
ObjectInputStream obs;

public static ArrayList<File> ListoFiles;
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        stopService(new Intent(this, BgService.class));

        deserializeList();

    //  stopService(new Intent(this, BgService.class));
        //setListAdapter(new OnlyFilesAdapter());
        //Bundle filelist = getIntent().getExtras();
        super.onCreate(savedInstanceState);

    }

public void deserializeList(){
Object tolist =null;
String filename = "filelist.bin";

try {

    fis = openFileInput(filename);
    if(fis!=null){
        obs = new ObjectInputStream(fis);
        tolist = obs.readObject();
        @SuppressWarnings("unchecked")
        ArrayList<File> tolist2 = (ArrayList<File>)tolist;
        ListoFiles = tolist2;
        obs.close();
        fis.close();
        Toast.makeText(getApplicationContext(), ListoFiles.size(), 5000).show();
    }else
        Toast.makeText(getApplicationContext(), "file not available", 2000).show();

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}catch (ClassNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

} 
```

错误时的 LogCat 值：-

```
10-14 13:30:33.018：W/ResourceType(433)：获取资源编号 0x0000001b 的值时没有包标识符
10-14 13:30:33.070: D/AndroidRuntime(433): 关闭虚拟机
10-14 13:30:33.070: W/dalvikvm(433): threadid=1: 线程以未捕获的异常退出 (group=0x40015560)
10-14 13:30:33.269：E/AndroidRuntime(433)：致命异常：主要
10-14 13:30:33.269: E/AndroidRuntime(433): java.lang.RuntimeException: 无法启动活动 ComponentInfo{my.com.filebrowser/my.com.filebrowser.AllFiles}: android.content.res.Resources $NotFoundException：字符串资源 ID #0x1b
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.os.Handler.dispatchMessage(Handler.java:99)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.os.Looper.loop(Looper.java:123)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.app.ActivityThread.main(ActivityThread.java:3683)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 java.lang.reflect.Method.invokeNative(Native Method)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 java.lang.reflect.Method.invoke(Method.java:507)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-14 13:30:33.269: E/AndroidRuntime(433): at dalvik.system.NativeStart.main(Native Method)
10-14 13:30:33.269：E/AndroidRuntime(433)：原因：android.content.res.Resources$NotFoundException：字符串资源 ID #0x1b
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.content.res.Resources.getText(Resources.java:201)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.widget.Toast.makeText(Toast.java:258)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 my.com.filebrowser.AllFiles.deserializeList(AllFiles.java:60)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 my.com.filebrowser.AllFiles.onCreate(AllFiles.java:34)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-14 13:30:33.269: E/AndroidRuntime(433): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-14 13:30:33.269: E/AndroidRuntime(433): ... 11 更多

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:53:45.933

在这行代码中：

```
Toast.makeText(getApplicationContext(), ListoFiles.size(), 5000).show(); 
```

`ListoFiles.size()`中返回`int`。如果你打电话

```
Toast.makeText(Context context, int resId, int duration) 
```

然后 API 期望第二个参数是字符串资源的 ID。在你的情况下，它不是。如果你只想显示一个带有数字的吐司，试试这个：

```
Toast.makeText(getApplicationContext(), "" + ListoFiles.size(), 5000).show(); 
```

或者

```
Toast.makeText(getApplicationContext(), Integer.toString(ListoFiles.size()), 5000).show(); 
```

# javascript - V8 分析：linux-tick-processor 不适用于 d8

> ID：12883182
> 
> 赞同：4
> 
> 时间：2012-10-14T14:32:23.817
> 
> 标签：javascript, node.js, v8, javascript-engine

我正在尝试让 v8 分析和 linux-tick-processor 在我的 ubuntu 上运行。

基本上我已经完成了这些步骤：

```
$ git clone git://github.com/v8/v8.git v8 && cd v8
$ make dependencie
$ make native
// added d8 to $PATH
$ d8 --prof primes.js
// v8.log is created
$ /home/username/v8/tools/linux-tick-processor 
```

但它不起作用，结果我得到：

```
Statistical profiling result from v8.log, (0 ticks, 0 unaccounted, 0 excludes). 
```

所以我假设 v8.log 没有正确创建，因为这个结果与你给 linux-tick-processor 的每个其他文件一起说明。我检查了 v8.log 并创建了一些内容：

[http://pastebin.com/VLLWMKKM](http://pastebin.com/VLLWMKKM)

对我来说，它似乎是正确生成的。

我尝试使用节点进行分析，这有效：

```
$ node --prof primes.js
$ /home/username/v8/tools/linux-tick-processor
// correct output 
```

但我想使用 d8 分析。

有人对这个问题有任何想法或解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:59:41.467

V8 中有一个错误。我在这里打开了一个错误报告： [http ://code.google.com/p/v8/issues/detail?id=2364](http://code.google.com/p/v8/issues/detail?id=2364)

# neo4j - 如何使用名称中包含点的索引？

> ID：12883192
> 
> 赞同：0
> 
> 时间：2012-10-14T14:33:29.060
> 
> 标签：neo4j, cypher

我刚刚开始学习 Cypher 查询语言和 GraphDb。我使用节点的类名创建了一些索引，例如：“com.acme.node.SomeNodeType”

我一生都无法弄清楚如何在 Cypher 中引用这个索引。我找到[了这个线程](https://groups.google.com/forum/?fromgroups=#!topic/neo4j/_TYclxVzPjw)，但使用 ` 对我不起作用。

所以我想我有两个问题：

1.  是否可以使用名称中带有点的索引？
2.  如果是这样，我如何在查询中指定名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:25:26.253

你能试着用''来查询它们吗

```
start n = node:`my.index`('name:test') return n 
```

?

# php - codeigniter 路由未按预期路由

> ID：12883193
> 
> 赞同：1
> 
> 时间：2012-10-14T14:33:30.187
> 
> 标签：php, codeigniter, controller, routes

在 php 中，“list”一词是保留的，所以我不得不使用“listby”并创建路由。根据 CI 用户指南，我创建了如下路线：

```
$route['list'] = "listby"; 
```

它使用“http://myserver.com/list”之类的 url 完美地路由索引功能，但不路由其他功能，即。“http://myserver.com/list/uuid”。

这是控制器代码：

```
class Listby extends CI_Controller
{

    public function index()
    {
        echo "index";
    }

    public function userid()
    {
        echo "userid";
    }

    public function uuid()
    {
        echo "uuid";
    }
} 
```

旁注：使用像“http://myserver.com/listby/uuid”这样的网址可以正常工作。

任何线索问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:42:23.527

尝试：

```
$route['list/(:any)'] = "listby/$1"; 
```

# java - NULLIF() 中的错误？

> ID：12883200
> 
> 赞同：2
> 
> 时间：2012-10-14T14:33:54.617
> 
> 标签：java, sql, jdbc, derby

请看下面的代码

```
public List<String> getNames()
{
List<String> names = new ArrayList();

try
{
    createConnection();

    Statement st = con.createStatement();
    ResultSet rs = st.executeQuery("select NULLIF(names,' '),NULLIF(middleName,' '),NULLIF(lastName,' ') from PhoneData order by names asc");

    while(rs.next())
    {
        String fullName = rs.getString(1)+" "+rs.getString(2)+" "+rs.getString(3);
        names.add(fullName);
    }

    return names;

}
catch(Exception e)
{
    e.printStackTrace();
    return null;
}
finally
{
    closeConnection();
} 
```

}

我正在使用 Apache Derby，嵌入式版本。

我在这里检索 3 个项目，名字、中间名和姓氏。如果任何项目为空，那么我正在尝试用空格填充它。但是，当我运行它并将其添加到组合框中时，我可以看到它没有用空格替换空值！！！所有空值都显示为“空”。例如，

FirstName = "John", MiddleName="", LastName="Laxter"

如您所见，MiddleName 为空。我期待的是

“约翰·拉克斯特”

我得到的是“John null Laxter”！！！。为什么是这样？请帮忙！我在使用 MS SQLServer 时没有遇到这个问题（然后 NULLIF 是 isNull()）。这里有什么问题？请帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:34:43.290

更好地使用`COALESCE`

```
SELECT COALESCE(names,' '),... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T14:38:35.613

试试这个：

```
select 
coalesce(names,' '),
coalesce(middleName,' '),
coalesce(lastName,' ') 
from PhoneData
order by names asc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T14:36:35.837

```
select 
    coalesce(names,' '),
    coalesce(middleName,' '),
    coalesce(lastName,' ') 
from PhoneData 
order by names asc 
```

[`nullif()`不按你的想法做。](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_nullif)

# php - 提供字符串作为具有内联更改的动态函数

> ID：12883201
> 
> 赞同：0
> 
> 时间：2012-10-14T14:34:03.273
> 
> 标签：php

这目前有效：

```
 $get_pending_list_action = "get_pending_list_".$action;
    $data = $this->sectorswaps->{$get_pending_list_action}($list); 
```

有没有办法做到这一点，所以我可以把它变成一条线？

即这不起作用：

```
 $data = $this->sectorswaps->get_pending_list_{$action}($list); 
```

还有其他我不知道的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:44:27.190

`$data = $this->sectorswaps->{"get_pending_list_".$action}($list);`

# android - 内存不足时Android应用程序强制关闭

> ID：12883202
> 
> 赞同：3
> 
> 时间：2012-10-14T14:34:16.237
> 
> 标签：android, database, forceclose, low-memory

我正在开发一个应用程序，在测试过程中出现问题。主要活动显示数据库记录。当系统内存不足时（我按下主页按钮并启动很多应用程序），垃圾收集器会删除数据库记录，如果我回到应用程序，则活动上没有显示任何内容（无记录），并且应用程序强制关闭任何操作（返回、主页、触摸等）

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:37:04.400

在清单文件中

```
<application name=".MainAppActivity" >
   .
   .
   .
</application> 
```

在 MainActivity

```
public class MainAppActivity extends Application {
   .
   .
   .
   .
   @Override
   public void onLowMemory(){
      System.gc();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:44:54.410

您可以检查 onResume，例如，如果您的记录数组为空或为空，请重新加载它们（可能在服务中重新加载它们），或者您甚至可以在第一次加载它们时将它们保存在文件中，然后将文件保存在`onPause()`以后在`onResume()`你可以加载这个文件。

无论如何，如果您认为您的应用程序占用太多内存，您可以尝试使用`System.gc()`尝试清理一些垃圾，但是如果用户启动其他应用程序并填充内存，此选项可能没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:56:56.643

问题解决了。它是在系统内存非常低的时候出现的（我启动了 10 个其他应用程序来测试我的应用程序），我通过在数据库类上使用单例模式解决了它。

# android - Facebook API 问题

> ID：12883209
> 
> 赞同：0
> 
> 时间：2012-10-14T14:34:47.440
> 
> 标签：android, facebook-android-sdk

我刚开始使用适用于 Android 的 Facebook。我已按照开发者网站上提供的说明进行操作。我创建了一个 facebook 项目并使用 Android 2.3.3 作为目标。然后我创建了另一个项目（具有相同的目标）并添加了 Facebook 项目。但是，以下错误不断弹出：“无法解析目标'android-3'”。我只有 APKs 7 和 10。我该如何解决这个问题？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:50:40.020

在[http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

> 您需要安装 Android 2.2 (API 8) 组件才能使用 Facebook SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:40:00.927

在您的清单文件中，将目标 sdk 版本更改为 10。这可能看起来像这样。

```
<uses-sdk android:minSdkVersion="4" 
      android:targetSdkVersion="10"
       /> 
```

# algorithm - 检测给定数字列表子集中的重复元素

> ID：12883212
> 
> 赞同：2
> 
> 时间：2012-10-14T14:35:00.463
> 
> 标签：algorithm

我有一组数字说：1 1 2 8 5 6 6 7 8 8 4 2 ...

我想检测上述数字的子数组（给定大小说k）中的重复元素......例如：考虑增加k = 3的子数组`

```
Sub array 1 :{1,1,2}
Sub array 2 :{1,2,8}
Sub array 3 :{2,8,5}
Sub array 4 :{8,5,6}
Sub array 5 :{5,6,6}
Sub array 6 :{6,6,7}
.... 
```

所以我的算法应该检测到子数组 1、5 和 6 包含重复项。我的方法：

1）将第一个 k 元素复制到临时数组（向量）

2）在C ++ STL中使用#include文件...使用unique（）我会确定向量的大小是否有任何变化......

任何其他线索如何解决这个问题......因为如果给定数字的列表很大，我的方法会消耗大量时间和空间......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:49:59.153

`O(n)`平均时间和`O(k)`空间解决方案可以是构建一个基于哈希的[直方图](http://en.wikipedia.org/wiki/Histogram)，并迭代数组，同时为每个子列表中的元素维护#occurances。
在每次迭代中，踢出最老的元素（通过减少直方图中的相关入口）并添加一个新元素。
还要维护一个`numDupes`变量，该变量计算您当前拥有的重复对象数量，并在从当前候选对象中添加/删除元素时进行维护。

伪代码（对不起，如果我有 1 个错误或其他问题，但这是我的想法）：

```
numDupes = 0
histogram = new map<int,int>;
//first set:
for each i form 0 to k:
  if histogram.contains(arr[i]):
     histogram.put(arr[i],histogram.get(arr[i]) + 1)
     numDupes += 1
  else:
     histogram.put(arr[i],1)
//each iteration is for a new set
if (numDupes > 0) print 1 //first sub array has dupes
for each i from k to n:
   if (histogram.get(arr[i-k]) > 1) numDupes -= 1 //we just removed a dupe
   histogram.put(arr[i-k],histogram.get(arr[i-k] - 1)) //take off "eldest" element.
   if (histogram.contains(arr[i]) && histogram.get(arr[i]) > 0):
       histogram.put(arr[i],histogram,get(arr[i]) + 1))
       numDupes += 1 //we just added a dupe
   else:
       histogram.put(arr[i],1)
   if (numDupes > 0) print i-k+1 // the current sub array contains a dupe 
```

* * *

最初的答案有一个小错误：当添加的最后一个元素没有导致欺骗时，它无法捕获案例，但仍有一个（如示例中的子数组 6）。
它可以通过维护一个额外的整数来解决，该整数计算当前找到的重复项的数量，并在计数器大于 0 时打印子数组。（更新了伪代码）。

另请注意：要实现`O(k)`空间，您`histogram`需要在元素值为 0 时删除元素。

# xcode - Xcode 中的命令重写数组创建以使用文字语法

> ID：12883215
> 
> 赞同：1
> 
> 时间：2012-10-14T14:35:08.450
> 
> 标签：xcode, objective-c-literals

我观看了一个 WWDC 视频，发现 Xcode 中有一个 Refactor 选项——boom——可以自动更新你的整个代码以使用新的、更易读的符号。

而不是做`[NSArray arrayWithObjects @"a",@"b",@"c",nil]`，例如，你只是做`@[@"a",@"b",@"c"]`

Xcode 中可以整体转换的菜单项在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:45:36.830

选择目标，Menu:Edit:Refactor:Convert to modern Objective-C Syntax。

![在此处输入图像描述](../Images/f64dd24a1eb7557bace7550b5ea11a5b.png)

# iphone - UISplitViewController 以编程方式

> ID：12883219
> 
> 赞同：2
> 
> 时间：2012-10-14T14:35:48.143
> 
> 标签：iphone, objective-c, ios, xcode, uisplitviewcontroller

我想知道是否可以使用带有按钮的普通 ViewController，当您单击按钮时，它会显示一个新的控制器，该控制器分为两个带有 uisplitviewcontroller 的控制器？
在其他论坛中，我看到有人解释如何使用 AppDelegate 和方法 applicationdidfinishlaunching，但我不想使用该方法。

那么，有可能做我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:11:51.150

SplitViewController 应该是你的应用程序的 rootViewController，所以你不应该推送它或模态地展示它。取而代之的是，只需将带有按钮的简单 ViewController 设置为 rootVC，当您按下它时，将应用程序的 rootVC 更改为 splitVC。希望这可以帮助。

# assembly - 如何使二进制数的最高有效位= 1

> ID：12883224
> 
> 赞同：1
> 
> 时间：2012-10-14T14:36:31.997
> 
> 标签：assembly, mips, 32-bit, pcspim, bitwise-or

如何在 MIPS 中使二进制数的 MSB 等于 1？我试图用屏蔽来做到这一点，但我得到了错误，那么还有另一种方法吗？

通过掩码使 MSB=1 的代码给了我错误。

```
srl $s3,$s3,1

// error out of range

ori $s3,$s3,2147483648       # making MSB = 1 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:03:03.673

带有立即数操作数的指令的 MIPS 操作码格式只有 16 位可用于立即数常量。

这 16 位通常用于表示用于逻辑运算（例如`ori`此处）的无符号 16 位值（即 0 到 65535，或 0x0000 - 0xFFFF 十六进制），或有符号 16 位值（-32768 到 32767，或 0xFFFF8000 到 0x00007FFF）用于算术运算。

因此，您不能在此处直接使用 2147483648 (0x80000000) 作为立即值 - 因此出现“超出范围”错误。

但是有一条指令用于将 16 位立即数加载到寄存器的*高*16 位（将低位设置为 0）：（`lui`加载上立即数）。

因此，您可以将 0x80000000 加载到这样的寄存器中，然后`or`使用您的值：

```
lui  $t0, 0x8000
or   $t0, $t0, $s3 
```

# emacs - 点之前的emacs字符等于

> ID：12883226
> 
> 赞同：2
> 
> 时间：2012-10-14T14:36:43.007
> 
> 标签：emacs, comments, char, point

如何检查点之前的字符是否等于“ `\`”

```
(defun comment-latex () 
  (interactive)
  (if (region-active-p) 
      (comment-region (region-beginning) (region-end))
     (if (= (char-before) ("\\")                 ;; how to fix this sentence?     
       (insert "%")
      (if (= (point) (line-beginning-position)) ;; this part works
        (insert "% ")
       (end-of-line)
       (insert " % "))))
)
(global-set-key LaTeX-mode-map (kbd "%") 'comment-latex) 
```

作为示例的代码应该执行以下操作：

1）如果选择了区域，则应注释该区域。

2）如果点之前的字符是“ `\`”，则应在点处插入正常的％。

3）如果点在行首，插入一个“ `%`”

4) 如果点在其他任何地方，则转到句末并插入“ `SPC` `%` `SPC`”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:09:46.360

单个字符的语法是 ? *字符*。所以：

```
(= (char-before) ?\\) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:07:08.067

将其替换为

```
(= (char-before) 92) 
```

92 是 \ 字符的 ASCII 码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T15:07:22.107

在 e-lisp 中，字符与字符串不同。获取字符的 ascii 值的语法是`?a`. 尝试类似：

```
(if (= (char-before) ?\\))
    DO-SOMETHING
  DO-SOMETHING-ELSE) 
```

# objective-c - Json获取参数无法访问iOS

> ID：12883230
> 
> 赞同：0
> 
> 时间：2012-10-14T14:36:59.337
> 
> 标签：objective-c, ios, json

这是一个例子

```
{
"updated":1350213484,
"id":"http://www.google.com/reader/api/0/feed-finder?q\u003dProva\u0026output\u003djson",
"title":"Risultati di feed per \"Prova\"",
"self":[
{
"href":"http://www.google.com/reader/api/0/feed-finder?q\u003dProva\u0026output\u003djson"
}
],
"items":[
{
"title":"Home Page - La prova del cuoco",
"id":"http://www.laprovadelcuoco.rai.it/",
"updated":1350213485,
"feed":[
{
"href":"http://www.laprovadelcuoco.rai.it/dl/portali/site/page/Page-ffb545b4-9e72-41e5-866f-a465588c43fa-rss.html"
}
],
"alternate":[
{
"href":"http://www.laprovadelcuoco.rai.it/",
"type":"text/html"
}
],
"content":{
"direction":"ltr",
"content":"Diventa un cuoco provetto con “La Prova del Cuoco”: le videoricette in un' applicazione di facile e veloce consultazione per il tuo Iphone. Scopri come acquistare ..."
}
},
{
"title":"Le prove Invalsi di matematica e italiano",
"id":"http://online.scuola.zanichelli.it/quartaprova/",
"updated":1350213486,
"feed":[
{
"href":"http://online.scuola.zanichelli.it/quartaprova/feed/"
}
],
"alternate":[
{
"href":"http://online.scuola.zanichelli.it/quartaprova/",
"type":"text/html"
}
],
"content":{
"direction":"ltr",
"content":"Un sito Zanichelli dedicato alle prove Invalsi di italiano e matematica: esercitazioni, consigli, informazioni utili, novità, aggiornamenti e blog d'autore sulle prove ..."
}
}, 
```

如何获取提要 URL？

我就是做这个的

```
NSString *daParsare=[reader searchFeed:searchText];

NSArray *items = [[daParsare JSONValue] objectForKey:@"items"];

for (NSDictionary *item in items) {

    NSString *title = [item objectForKey:@"title"];
    NSString *feed = [item valueForKeyPath:@"feed.href"];

}
[tab reloadData]; 
```

标题一切正常，但是当我尝试访问提要参数时，我得到了错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:40:15.223

假设您的 JSON 对象名为`jsonObject`，您只需访问该`href`元素。因此，在您当前的对象中，URL 位于名为 的对象中，该对象是位于顶层`href`的数组中的第一个（在本例中也是唯一的）元素：`feed`

```
NSString* urlString = jsonObject[@"feed"][0][@"href"]; 
```

在访问其中一个元素之前，您应该检查以确保`feed`它不是一个空数组（如果存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:22:37.580

```
NSString *feed = [item valueForKeyPath:@"feed.href"]; 
```

是错误的，因为`feed`指的是一个数组，它又保存了一个字典。

```
NSString *feed = [[[item objectForKey:@"feed"] objectAtIndex:0] objectForKey:@"href"]; 
```

如果您使用的是现代 Xcode，那么最后一行与 Jason Cocos 的答案相同。

```
NSString* feed = item[@"feed"][0][@"href"]; 
```

这种语法称为[对象订阅](http://clang.llvm.org/docs/ObjectiveCLiterals.html)。

# drupal - 带有 Drupal 7 自定义表单的视频模块

> ID：12883231
> 
> 赞同：1
> 
> 时间：2012-10-14T14:37:21.823
> 
> 标签：drupal, video, drupal-7

如何使用带有自定义表单的视频模块 drupal 7 版本来创建一个字段，该字段的行为与节点表单上的字段完全相同？为此，我创建了一个具有视频字段类型的表单，但它没有显示任何内容

```
$form['file'] = array(
    '#type' => 'video',
    '#name' => 'files[]',
    '#title' => t('Upload some videos'),
    '#attributes' => array('multiple' => 'multiple'),
); 
```

我用这个来自视频的测试文件。文件名是。`VideoField.test`

# javascript - 默认参数函数

> ID：12883236
> 
> 赞同：2
> 
> 时间：2012-10-14T14:38:01.060
> 
> 标签：javascript

foo(a, b, c) 函数参数 (a, b, c) 默认定义

这是我的代码：

```
function foo(a, b, c) {

    // a, b, c default @param ?

}; 
```

还是 foo(a, b, callback) {} 默认回调？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:39:02.020

通常的解决方案是这样的：

```
function foo(a, b, c) {
    a = a || 22;
    b = b || "ee";
    c = c || function(){};
}; 
```

如果您的参数可以具有`0`或`''`作为有效值，您可以测试

```
 if (typeof(a)=='undefined') a==22; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:42:22.683

CoffeeScript 为此提供了很好的语法：

```
test = (a = 1, b = 2) ->
  console.log a, b 
```

编译为 JavaScript 时：

```
(function() {
  var test;

  test = function(a, b) {
    if (a == null) {
      a = 1;
    }
    if (b == null) {
      b = 2;
    }
    return console.log(a, b);
  };

}).call(this); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-14T14:39:29.717

它只是提供 fo 功能；

```
function foo(a, b, callback) {

    // @param defaults
    (a || (a = "default a"));
    (b || (b = "default b"));

    // if  callback not function is function() {} --> callback();
    (callback || (callback = function() { return ""}));

    console.log(a, b, callback());

};

foo(); // default a default b undefined
foo("a--", "b--", function() { return "callback"}); // a-- b-- callback 
```

或者

```
function foo(a, b, callback) {

    // @param defaults
    var a = a || "default a";
    var b = b || "default b";

    // if  callback not function is function() {} --> callback();
    var callback = callback || function() {};

    console.log(a, b, callback());
}; 
```

# python - Python：使用多处理模块提高我的脚本的效率（提示和建议）

> ID：12883237
> 
> 赞同：1
> 
> 时间：2012-10-14T14:38:09.760
> 
> 标签：python, performance, multiprocessing, cpu, liblas

我是 Python 的初学者（几周），最近我在 Stackoverflow 上阅读了一些关于**多处理模块**的帖子。通常我使用百万点格式的数据（* .las 文件。这个[视频](http://vimeo.com/16282938)来了解我的数据来源），我有兴趣更好地了解如何使用多处理模块。

**我在 Windows 7 上使用 Python 2.7，intel core i7-3770CPU**

通常我使用我写的这个**def**作为基准来理解：

```
# load line-by-line the las file, check if the points are inside the polygon
# if yes save a new *.las file

import shapefile
import numpy
import numpy as np
from numpy import nonzero
from matplotlib.mlab import griddata
from matplotlib.nxutils import pnpoly
from liblas import file as lasfile

def LAS2LASClip(inFile,poly,outFile):
    f = lasfile.File(inFile,None,'r') # open LAS
    h = f.header
    # change the software id to libLAS
    h.software_id = "Python 2.7"
    file_out = lasfile.File(outFile,mode='w',header= h)
    f.close()
    sf = shapefile.Reader(poly) #open shpfile
    shapes = sf.shapes()
    for i in xrange(len(shapes)):
        verts = np.array(shapes[i].points,float)
        inside_points = [p for p in lasfile.File(inFile,None,'r') if pnpoly(p.x, p.y, verts)]
        for p in inside_points:
            file_out.write(p)
    file_out.close() 
```

# c++ - C++ 用户定义的从复合对象到浮点数的转换

> ID：12883251
> 
> 赞同：1
> 
> 时间：2012-10-14T14:40:27.193
> 
> 标签：c++, type-conversion

我将通过我想要达到的目标来描述这个问题。

假设你有一个**Parameter**类：

```
class Parameter
{
private:
    float _parameter, _parameterScaler;

public:

    Parameter()
    {
        _parameter = 1;
        _parameterScaler = 0.5;
    }

    void SetValue(float value)
    {
        _parameter = value;
    }

    void SetValueOffset(float value)
    {
        _parameterScaler = value;
    }

    float "use of variable of this class"
    {
        return _parameter * _parameterScaler;
    }

} 
```

这个类有两个浮点数，一个是*参数值*，另一个是*参数乘数*。

现在，如果我使用**Parameter**类型的变量如下：

```
int main()
{
    Parameter param;
    param.SetValue(5);
    param.SetValueOffset(0.5);

    printf("%6.2f", param);
} 
```

它打印：2.5。

例如，我可以通过使用 () 的运算符重载来实现这样的效果。是否可以仅使用可变用法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:43:43.760

不，它不是，因为`printf`不对参数做任何事情 - 不应用强制转换或转换并且忘记了它们的类型。

你可以做的是使用`std::cout`而不是重载`ostream& operator << (ostream& str, const Parameter&)`，那样

```
std::cout << param; 
```

将准确打印您想要打印的内容。

该代码`printf("%6.2f", param);`只是将`param`其视为`float`没有进行任何转换（并且总体上很糟糕）。**不要这样做！**

# android - Android 应用程序崩溃

> ID：12883253
> 
> 赞同：0
> 
> 时间：2012-10-14T14:41:11.667
> 
> 标签：android, android-canvas, face-detection

我有这个代码

```
 public void DetectFacesInImage(View view)
    {
        BitmapFactory.Options bitmapFactoryOptions=new BitmapFactory.Options();
        bitmapFactoryOptions.inPreferredConfig= Bitmap.Config.RGB_565;
        //int resID = getResources().getIdentifier(picturePath , "drawable", getPackageName());

        myBitmap=BitmapFactory.decodeFile(picturePath,bitmapFactoryOptions);
        int width=myBitmap.getWidth();
        int height=myBitmap.getHeight();
        detectedFaces=new FaceDetector.Face[number_of_faces];
        FaceDetector faceDetector=new FaceDetector(width,height,number_of_faces);
        number_of_faces_detected = faceDetector.findFaces(myBitmap, detectedFaces);
        Canvas canvas = new Canvas(myBitmap);// line 70 the point where it crashes
        Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);
        //canvas.drawBitmap(overlay, 0, 0, paint);
        paint.setColor(Color.GREEN);
        paint.setStyle(Paint.Style.STROKE); 
        paint.setStrokeWidth(3);
        PointF midPoint=new PointF();

        for(int count=0;count<number_of_faces_detected;count++)
        {
            Face face=detectedFaces[count];

            face.getMidPoint(midPoint);

            float eyeDistance=face.eyesDistance();
            canvas.drawRect(midPoint.x-eyeDistance, midPoint.y-eyeDistance, midPoint.x+eyeDistance, midPoint.y+eyeDistance, paint);
        }

    } 
```

我想在位图顶部绘制矩形。通过意图接收的位图是这样使用的

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_detect_faces);
       // getActionBar().setDisplayHomeAsUpEnabled(true);
        Intent intent = getIntent();
        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        picturePath = intent.getStringExtra(GetFaceActivity.PICTURE_PATH);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
        //imageView.setOnTouchListener(this);

    } 
```

但代码因传递给 Canvas 构造函数的错误不可变位图而崩溃。我在这里做错了什么？

这是堆栈跟踪

```
10-14 20:01:34.763: E/AndroidRuntime(31137): FATAL EXCEPTION: main
10-14 20:01:34.763: E/AndroidRuntime(31137): java.lang.IllegalStateException: Could not execute method of the activity
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.view.View$1.onClick(View.java:3098)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.view.View.performClick(View.java:3620)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.view.View$PerformClick.run(View.java:14322)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.os.Handler.handleCallback(Handler.java:605)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.os.Looper.loop(Looper.java:137)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.app.ActivityThread.main(ActivityThread.java:4507)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at java.lang.reflect.Method.invokeNative(Native Method)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at java.lang.reflect.Method.invoke(Method.java:511)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at dalvik.system.NativeStart.main(Native Method)
10-14 20:01:34.763: E/AndroidRuntime(31137): Caused by: java.lang.reflect.InvocationTargetException
10-14 20:01:34.763: E/AndroidRuntime(31137):    at java.lang.reflect.Method.invokeNative(Native Method)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at java.lang.reflect.Method.invoke(Method.java:511)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.view.View$1.onClick(View.java:3093)
10-14 20:01:34.763: E/AndroidRuntime(31137):    ... 11 more
10-14 20:01:34.763: E/AndroidRuntime(31137): Caused by: java.lang.IllegalStateException: Immutable bitmap passed to Canvas constructor
10-14 20:01:34.763: E/AndroidRuntime(31137):    at android.graphics.Canvas.<init>(Canvas.java:133)
10-14 20:01:34.763: E/AndroidRuntime(31137):    at com.example.face_tag_upload.DetectFaces.DetectFacesInImage(DetectFaces.java:70)
10-14 20:01:34.763: E/AndroidRuntime(31137):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:53:19.437

如果您使用的是 API 级别 11 及更高版本，那么您需要将其指定`inMutable`为`BitMapFactory.Options`, 所以;

```
BitmapFactory.Option bitmapFactoryOptions = new BitmapFactory.Options();
bitmapFactoryOptions.inPreferredConfig = Bitmap.Config.RGB_565;
bitmapFactoryOption.inMutable = true; 
```

如果您想早于 API 级别 11，那么您将需要使用以下代码段制作可变位图；

```
Bitmap immutableBitmap = BitmapFactory.decodeFile(picturePath, bitmapFactoryOptions);
int left = 0;
int top = 0;
int width = immutableBitmap.getWidth();
int height = immutableBitmap.getHeight();
boolean hasAlpha = immutableBitmap.hasAlpha();
Bitmap mutableBitmap = immutableBitmap.createBitmap(width, height, hasAlpha);
Canvas c = new Canvas();
c.setDevice(mutableBitmap);
c.drawBitmap(immutableBitmap, left, top, paint); 
```

油漆变量来自您预先存在的代码。

此[答案](https://stackoverflow.com/a/9194259/425519)将原始位图写入磁盘，然后创建位图的可变版本，从而避免在内存中有两个位图。

# ios - 我可以在iOS中绘制轮廓作为图像吗？

> ID：12883254
> 
> 赞同：1
> 
> 时间：2012-10-14T14:41:14.770
> 
> 标签：ios, core-graphics

我可以画轮廓作为图像吗？

如果有没有轮廓的白色背景图像，我可以使用 CoreGraphics 或代码沿图像绘制轮廓吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:45:02.913

遍历图像中的每个像素，如果它们满足条件，则将它们设置为黑色。或者`Edge Detection`是另一种方法。

您还可以参考此线程：- [https://stackoverflow.com/questions/1282830/uiimagepickercontroller-uiimage-memory-and-more](https://stackoverflow.com/questions/1282830/uiimagepickercontroller-uiimage-memory-and-more)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:27:21.403

UIImageView 周围的简单边框

首先包含 QuartzCore 框架。单击您的项目 -> 构建阶段 -> 将二进制文件与库链接 -> 添加 QuartzCore.framework

```
#import <QuartzCore/QuartzCore.h> 
```

```
 self.layer.borderWidth = 2.0f;
self.layer.borderColor = [UIColor blackColor].CGColor;
// You can also add a shadow
self.layer.shadowColor = [UIColor blackColor].CGColor;
self.layer.shadowOffset = CGSizeMake(0, 2);

// If you do this in the controller and not the view it would of course be
// myImageView.layer instead of self.layer 

```

# android - android:targetSdkVersion 为 16 时的操作栏行为

> ID：12883258
> 
> 赞同：17
> 
> 时间：2012-10-14T14:41:35.083
> 
> 标签：android, android-layout, android-manifest, android-actionbar, android-4.2-jelly-bean

我正在尝试使用选项卡作为导航选项来实现操作栏。为此，我在“New Android App”向导的“New Blank Activity”部分中选择“Tabs+Swipe”选项，如下所示。

![Tab+滑动向导选项](../Images/0c7110c8f785dac0f301ece0fe4776ee.png)

现在，在 android manifest 中，当

```
android:targetSdkVersion="15" 
```

这是默认值，操作栏在 Nexus 7/Nexus 7 模拟器上看起来像这样，这是应用程序所需的外观

![默认行为](../Images/80d093f1e268bbb131d29f8f7cf55b62.png)

现在，当我将 android manifest 中的那一行更改为

```
android:targetSdkVersion="16" 
```

操作栏的外观变成了这个

![android:targetSdkVersion= 之后的行为](../Images/9b6b5e573c0ee26eda30c8aa9f299bbc.png)

除了 16 之外的任何版本的 android 都保留默认外观，谁能解释为什么当 targetSdkVersion 设置为 16 时操作栏的外观会突然改变？

上述内容在模拟器以及真正的 nexus 7 上都可以重现。

全屏截图

**正常：http:** [//i.stack.imgur.com/VsBA2.png](https://i.stack.imgur.com/VsBA2.png)

**android:targetSdkVersion="16" 之后： http:** [//i.stack.imgur.com/OM6Y4.png](https://i.stack.imgur.com/OM6Y4.png)

**2013 年 3 月 10 日更新：**切换到列表导航模式（而不是选项卡）以启用移动到 android:targetSdkVersion=17

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T21:51:37.853

将 targetSDK 设置为 16 时它发生变化的原因是 Google 更改了 Jelly Bean 中标签的测量方式*。*具体来说，看看这个`android.internal.view.ActionBarPolicy`：

```
public boolean hasEmbeddedTabs() {
    final int targetSdk = mContext.getApplicationInfo().targetSdkVersion;
    if (targetSdk >= Build.VERSION_CODES.JELLY_BEAN) {
        return mContext.getResources().getBoolean(R.bool.action_bar_embed_tabs);
    }

    // The embedded tabs policy changed in Jellybean; give older apps the old policy
    // so they get what they expect.
    return mContext.getResources().getBoolean(R.bool.action_bar_embed_tabs_pre_jb);
} 
```

但是，我怀疑您不仅想要原因，还想要解决方案。不幸的是，我不能给你一个简单的方法来将它设置为仅嵌入。

不过，我*可以*建议使用[ActionBarSherlock](http://actionbarsherlock.com/)使其*保持一致*。这样做的好处是能够在旧设备上使用操作栏。使用它时（纵向），我可以确认如果您将 targetSDK 设置为 16，它使用 Jelly Bean、Ice Cream Sandwich、GingerBread 和 Froyo 上的堆叠布局。至少你将能够设计你的布局，同时知道会发生什么。

请记住，在大多数情况下，切换到横向模式会将它们再次嵌入到操作栏中，因为它的测量方式有“足够的空间”。

# c++ - C中的MPI和多维数组分配

> ID：12883259
> 
> 赞同：1
> 
> 时间：2012-10-14T14:41:41.150
> 
> 标签：c++, memory, mpi

我正在尝试使用 MPI_Scatter，发送矩阵行（动态分配），但它只发送一行，其他行是垃圾。当我使用静态内存分配时 - 一切都很好。

```
MPI_Init(&argc, &argv);
int **matrix, *matrix_stor, *row,rank, P;
MPI_Comm_size(MPI_COMM_WORLD, &P);
row = new int [P];
for(int i = 0; i < P; i++)
{
    row[i] = 0;
}
matrix = new int *[P];
for(int i = 0; i < P; i ++)
    matrix[i] = new int [P];

//int matrix[4][4], row[4], rank, size;
MPI_Comm_rank(MPI_COMM_WORLD, &rank);

if (rank == 0){
    for(int i = 0; i < P; i++){
        for(int j = 0; j < P; j++){
            matrix[i][j] = rand()%20;
            cout << matrix[i][j] << " ";
        }
        cout << endl;
    }
}
cout << endl;

MPI_Scatter(&matrix[0][0], P, MPI_INT,&row[0], P, MPI_INT,0,MPI_COMM_WORLD);
for(int i = 0; i < P; i++)
    cout << row[i] << " ";
cout << endl;
free(matrix);
free(row);
MPI_Finalize();
return 0; 
```

结果是：
源矩阵：
1 7 14 0
9 4 18 18
2 4 5 5
1 7 1 11
接收行：
1 7 14 0
3626672 3626800 0 0
16 1 119 -33686019
-33686019 -572662307 524296 78676

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:12:37.063

这不是 MPI 问题，而是 C 和多维数组问题。

问题是在 C 中不能保证您分配的矩阵实际上是`P*P`连续`int`的。因此，当您尝试`P*P`从 开始分散整数时`matrix[0][0]`，谁知道您要发送什么。

这段代码：

```
matrix = new int *[P];
for(int i = 0; i < P; i ++)
    matrix[i] = new int [P]; 
```

首先分配一个指向 int 的指针数组`P`，然后将每个指针设置为已分配`P`int 的指针。但是根本不能保证`matrix[1]`从哪里开始到哪里`matrix[0]`结束。如果你想这样做——而且你这样做了，无论是对于 MPI 还是通常对于技术计算应用程序中的多维数组——你必须手动分配连续的内存块并`matrix`指向它：

```
matrix = new int *[P];
int *data = new int [P*P];
for(int i = 0; i < P; i ++)
    matrix[i] = &(data[P*i]); 
```

然后分散应该起作用。

还要注意，您应该使用`delete`而不是`free()`释放分配的内存`new`。

# excel - 如何为多个按钮分配一个通用程序？

> ID：12883265
> 
> 赞同：0
> 
> 时间：2012-10-14T14:42:53.490
> 
> 标签：excel, vba

前段时间我有一个示例代码来为多个按钮分配相同的过程。
像这样的东西：

```
For Eeach buttton in Form1
If button is clicked
MsgBox button.Caption. 
```

但是我现在找不到这个代码。
谷歌搜索我找不到我需要的东西。
我只记得我需要插入一个类模块。
有人可以给我一个链接或一个简短的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:00:21.273

插入一个新的类模块并命名它`clListener`（我刚想到）。
里面的代码：

```
Public WithEvents ct As MSForms.CommandButton

Public Sub ct_Click()
    MsgBox ct.Name & " clicked!"
End Sub 
```

在用户窗体模块中：

```
Private listenerCollection As New Collection

Private Sub UserForm_Initialize()
    Dim ctItem
    Dim listener As clListener

    For Each ctItem In Me.Controls
        If TypeName(ctItem) = "CommandButton" Then
            Set listener = New clListener
            Set listener.ct = ctItem
            listenerCollection.Add listener
        End If
    Next
End Sub 
```

# php - array_keys() 参数中包含普通数组

> ID：12883266
> 
> 赞同：0
> 
> 时间：2012-10-14T14:42:54.710
> 
> 标签：php, arrays

```
<?php
$arr = array("value1", "value2", "value3");
$array_with_keys = array_keys($arr);
echo "<pre>";
print_r($array_with_keys);
echo "</pre>";
?> 
```

这是一个`array_keys()`在其参数中具有非关联数组的示例。所以没有钥匙。

输出是：

```
Array
(
    [0] => 0
    [1] => 1
    [2] => 2
) 
```

为什么输出是这个？我搜索了手册，但在其参数中找不到带有普通数组的 array_keys() 示例。

那么有人可以解释为什么输出是这样的吗？

常识告诉我，这是因为在普通数组中，键是它的索引，即`0`, `1`, `2`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:45:10.153

PHP 中的所有数组实际上都是关联数组。即使您不声明它们：

```
$arr = array("value1", "value2", "value3"); 
```

这与

```
$arr = array(0 => "value1", 1 => "value2", 2 => "value3"); 
```

因此 PHP 会自动为您添加密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:45:37.330

你的常识是正确的。当您创建一个没有键的数组时，它会被数字索引。当您`array_keys`对这样的数组执行操作时，将提取数字键。

# python - Python GTK3 Treeview 向上或向下移动选择

> ID：12883268
> 
> 赞同：4
> 
> 时间：2012-10-14T14:43:09.387
> 
> 标签：python, gtk, gtk3, gtktreeview

如何在 Treeview 中向上或向下移动选择？

这个想法是我可以有一个向上和向下按钮来将选择向上或向下移动一行。

我的 Treeview 正在使用 ListStore。不确定这是否重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T23:55:15.280

首先，我将使用我熟悉的 C 代码。如果您在将其翻译成 Python 时遇到问题，请说出来，我会尽力提供帮助。

您要为此使用的类是`GtkTreeSelection`. 基本上，你要做的是：

1.  获取视图的选择对象 ( `gtk_tree_view_get_selection`)
2.  获取当前选中的`GtkTreeIter`( `gtk_tree_selection_get_selected`)。
3.  获取下一个/上一个迭代器 ( `gtk_tree_model_iter_next/previous`)
4.  如果有一个（即，如果前一个函数返回 true），则使其成为当前选择的一个 ( `gtk_tree_selection_select_iter`)

在我的小测试程序中，“向下”按钮的回调如下所示：

```
static void on_down(GtkWidget *btn, gpointer user_data)
{
    GtkTreeSelection *sel = GTK_TREE_SELECTION(user_data);
    GtkTreeModel *model;
    GtkTreeIter current;

    gtk_tree_selection_get_selected(sel, &model, &current);
    if (gtk_tree_model_iter_next(model, &current))
        gtk_tree_selection_select_iter(sel, &current);
} 
```

（[这里](http://pastebin.com/560WKt27)是完整的程序供参考）

连接时，我将 TreeSelection 对象传递给回调。

**编辑：**这就是 Samuel Taylor 将上述内容翻译成 Python 的方式：

```
TreeView = Gtk.TreeView()
list = Gtk.ListStore(str, str)
TreeView.set_model(list)

def down(widget):
    selection = TreeView.get_selection()
    sel = selection.get_selected()
    if not sel[1] == None:
        next = list.iter_next(sel[1])
        if next:
            selection.select_iter(next) 
```

# ios - “重制” NSString 二维数组

> ID：12883270
> 
> 赞同：0
> 
> 时间：2012-10-14T14:43:14.697
> 
> 标签：ios, arrays, string, cocoa-touch

> **可能重复：**
> [玩游戏后重置数组？](https://stackoverflow.com/questions/12883853/reset-array-after-playing-the-game)

我做了一个二维数组：

```
NSString *arrEurope[][2] =

{

    {@"Eifel.jpg",@"Paris"},
    {@"NotreDame.jpg",@"Paris"},
    {@"ArcDeTriompheParis.jpg",@"Paris"},

    {@"AtomuimBrussels.jpg",@"Brussels"},
    {@"MannekePis.jpg",@"Brussels"},

    {@"Colosseum.jpg",@"Rome"},
    {@"TreviFountainRome.jpg",@"Rome"},

    {@"SagradaFamilia.jpg",@"Barcelona"},
    {@"SpanishSchoolMadrid.jpg",@"Madrid"},

    {@"KremlinMoskou.jpg",@"Moskou"},

    {@"MermaidKopenhagen.jpg",@"Copenhagen"},

    {@"MonteCarloMonaco.jpg",@"Monaco"},

    {@"AcropolisAthens.jpg",@"Athens"},

    {@"ParlementBudapest.jpg",@"Budapest"},

    {@"BuildingReykjavik.jpg",@"Reykjavik"},

    {@"StatueKiev.jpg",@"Kiev"},

    {@"PortOfEuropeLissabon.jpg",@"Lisbon"},

    {@"ViewSanMarino.jpg",@"San Marino"},

    {@"BridgesPrague.jpg",@"Prague"},

    {@"MoskeeAnkara.jpg",@"Ankara"},

    {@"TowerBridgeLondon.jpg",@"London"},
    {@"BigBenLondon.jpg",@"London"},
    {@"LondonEyeLondon.jpg",@"London"},

    {@"BrandenburgerTor.jpg",@"Berlin"},
    {@"ReichstagBerlin.jpg",@"Berlin"},

    {nil,nil}

}; 
```

现在，在我的代码中，我更改了数组的一些内容，如下所示：

```
arrEurope[intRandomMonument][0] = @"removed"; 
```

现在，当我使用重新启动按钮时，我想像上面那样恢复数组，但不是那个，而是充满了“已删除”。有人可以帮助我吗？谢谢你，抱歉英语不好:)

（数组有效，“删除”的东西是为了确保该项目不会在当前游戏中被回调，因此所有代码都有效，但我只想“重置”数组。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:47:06.907

您尝试使用 C 样式数组有什么特别的原因吗？

我建议[`NSArray`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)改用。

```
NSArray *arrEurope = @[@[@"Eifel.jpg",@"Paris"],
                       @[@"NotreDame.jpg",@"Paris"],
                       @[@"ArcDeTriompheParis.jpg",@"Paris"]
                       ... etc ... ]; 
```

# jquery - 如何通过jquery删除li span

> ID：12883272
> 
> 赞同：0
> 
> 时间：2012-10-14T14:43:25.070
> 
> 标签：jquery

如何通过 jquery 删除 span 元素？

我不能指望 li id 选择器，因为所有 ol 都是动态构建的

```
<div class="on">
    <ol id="selectable" class="ui-selectable">
        <li id="11_3_6" class="ui-widget-content ui-selectee">11.3.6</li>
        <li id="10_3_16" class="ui-widget-content ui-selectee">10.3.16</li>
        <li id="11_2_26" class="ui-widget-content ui-selectee ui-selected">11.2.26<span class="ui-icon ui-icon-check"></span></li>
        <li id="9_1_53" class="ui-widget-content ui-selectee">9.1.53</li>
    </ol>
</div> 
```

我不想删除整个 li。只是跨度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:45:34.473

你可以做...

```
$("li span").remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:45:41.650

如果您要从 li 元素中删除跨度，请尝试以下操作：

`$(".on > ol > li > span").remove()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T14:53:36.517

$('div.on ol.selectable li span').remove();

这将从您的 HTML 中删除 span 元素及其内容。在删除时始终使用带有 id 的特定元素，否则它也可能会删除其他元素。

# php - URL 重写：css、js 和图像未加载

> ID：12883273
> 
> 赞同：22
> 
> 时间：2012-10-14T14:43:31.267
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我有以下规则`.htaccess`

```
Options +FollowSymLinks

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -f [OR]

RewriteRule ^detail/([0-9]+)/?$ detail.php?id=$1 
```

`http://localhost/detail/123`它将URL重定向到`http://localhost/detail.php?id=123`. 页面重定向成功，但问题是`CSS, JS, and images`没有加载，

CSS、js 文件位于`http://localhost/css/`和`http://localhost/js/`

一种解决方案是使用**绝对路径**（例如 /CSS 或 /js 而不仅仅是 CSS/、/js，但这似乎不是一个可靠的解决方案，因为我们必须在所有文件上更改它，

任何其他基于规则的解决方案`.htaccess`，它独立于编辑所有 PHP 文件并让我们使用“相对路径”？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-14T22:31:48.317

> 一种解决方案是使用绝对路径（例如 /css 或 /js 而不仅仅是 css/、/js，但这看起来不是一个可靠的解决方案，因为我们必须在所有文件上更改它，

这是因为您的相对 URI 的基数已更改。原来，base 是`/`当页面为 时`/detail.php?id=123`，浏览器正确填写与`/`base 的相对链接。但是当浏览器进入一个像`/detail/123`base 这样的页面时`/detail/`，它会尝试将其附加到所有相关 URL 的前面，因此它们都不会加载。

您可以将链接设为绝对链接，也可以更改页面标题中的 URI 基础（在`<head> </head>`标签之间）：

```
<base href="/"> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-26T19:24:57.020

不要偷懒，将资源中的相对 URI 更改为根目录绝对路径，例如`/css/style.css`. 这是最好的。

您可以变得聪明并使用正则表达式并替换您需要的所有文件，这就像几条衬里一样，您就完成了。有多少地方可以改变？你应该使用模板。

这应该可行，但我不会这样。

`RewriteRule ^detail/(css|js|img)/(.*)?$ /$1/$2 [L,QSA,R=301]`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-30T20:10:18.340

我将 url 重写应用于核心 php 中的一个项目。我遇到了同样的问题。css、Js 和图像没有被加载。我使用了它，它对我有用。[资源](http://forum.kohanaframework.org/discussion/7500/best-way-to-modify-example-htaccess-to-allow-js-css-png-in-views/p1)

```
# Allow any files or directories that exist to be displayed directly
RewriteCond ${REQUEST_URI} ^.+$
RewriteCond %{REQUEST_FILENAME} \.(gif|jpe?g|png|js|css|swf|php|ico|txt|pdf|xml)$ [OR]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^ - [L] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T23:12:25.027

安东尼的回答是完全有效的，他实际上是在尝试在那里传授一些好的做法。

但是，由于您似乎对该答案并不满意，因此这里有一个不同的解决方案。只需在任何重写命令之前将此行插入到您的 .htaccess 中：

```
RedirectMatch permanent ^/detail/((css|js)/.*)  /$1 
```

它将所有最初对 /details/css/style.css 和 /details/js/js.s 的 404 请求重定向到它们的实际位置。既不漂亮也不优雅，但它确实有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-18T12:45:10.843

**只是排除目录它会自动加载就是这样**

```
RewriteRule ^(css|js|fonts|images|plugins)($|/) - [L] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-04T07:57:15.383

这段代码非常适合我，在重定向规则之前添加(RewriteRule ^detail/([0-9]+)/?$ detail.php?id=$1)

```
RewriteRule ^(.+)/(admin|css|fonts|ico|include|js|images)/(.*)$ $2/$3 [L] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-07T08:15:38.713

当我更改样式链接时，我的问题解决了

```
 <link href="css/styles.css" rel="stylesheet" /> 
```

进入 `<link href="/css/styles.css" rel="stylesheet" />`

# xaml - Windows 8 XAML AppBar 图标不显示

> ID：12883276
> 
> 赞同：0
> 
> 时间：2012-10-14T14:43:46.580
> 
> 标签：xaml, windows-8

好吧，在它最初无法正常工作之后，我设法找到了包含MSDN 示例中使用的`StandardStyles.xaml`类似内容的文件。`{StaticResource EditAppBarButtonStyle}`我取消了 in 的声明，`EditAppBarButtonStyle`所以`StandardStyles.xaml`现在应用程序不会崩溃，但现在它只是显示如下：

![在此处输入图像描述](../Images/2e3c02b239fc87e99651fb77277a9781.png)

XAML 代码是：

```
<Page.BottomAppBar>
    <AppBar x:Name="bottomAppBar" Padding="10,0,10,0" Background="Black">
        <Grid>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="Edit" Tag="Edit" Content="{StaticResource EditAppBarButtonStyle}"/>
            </StackPanel>
        </Grid>
    </AppBar>
</Page.BottomAppBar> 
```

找遍了之后，我无法弄清楚这一点。我什至没有在任何地方看到 StandardStyles.xaml，我不得不从 MSDN 下载一个示例，然后浏览每个文件，看看有什么不同。谁能告诉我为什么它没有显示图标？这可能是一件我还没找到的快速的事情。

另外，MSDN 上是否真的提到过这类东西？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:54:08.700

问题是您将样式设置为`Content`属性而不是`Style`属性。

尝试：

```
<Button x:Name="Edit" Tag="Edit" Width="115" Height="70" Style="{StaticResource EditAppBarButtonStyle}"/> 
```

在 xaml 中，如果您设置显示的对象不是可视对象，那么它将简单地打印对象的类型，这就是您看到的原因，`Windows.UI.Xaml.Style`因为这是样式的类型。

# javascript - 如何删除cookie值

> ID：12883279
> 
> 赞同：0
> 
> 时间：2012-10-14T14:44:20.813
> 
> 标签：javascript, ruby-on-rails

我正在开发一个 RubyOnRails 应用程序。我的应用程序用户将使用 facebook 帐户登录。当用户想要注册时，我从我的应用程序中调用 facebook login 然后它的工作，但是这次创建了 facebook 当前用户 cookie。如果我再次调用 facebook login，则无法获取登录页面，因为 facebook 当前用户 cookie 不允许我打开登录页面。如果我手动删除 facebook cookie，那么我可以获得登录页面。

是否可以在我的浏览器中删除 facebook 当前用户 cookie？或者还有其他方法可以删除facebook cookie吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T14:46:07.177

只有在 Facebook 域上运行的代码才能删除由 Facebook 域设置/为 Facebook 域设置的 cookie，所以不能。

# android - 如何为 commonsware EndlessAdapter 提供自己的布局

> ID：12883281
> 
> 赞同：1
> 
> 时间：2012-10-14T14:44:45.330
> 
> 标签：android, commonsware-cwac

我正在使用这里提供的很棒的无尽适配器：[https ://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

这些示例似乎一切正常，我想使用自己的布局，所以像往常一样，我覆盖了我的适配器的 getview：

```
public class EventAdapter extends EndlessAdapter {
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        EventHolder holder = null;
        if (convertView == null) {
            LayoutInflater layoutInflater = (LayoutInflater) ctxt
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = layoutInflater.inflate(R.layout.row_activite_light,
                    parent, false);

            holder = new EventHolder();
            holder.txtTitle = (TextView) convertView
                    .findViewById(R.id.txttitle);

            convertView.setTag(holder);

        } else {
            holder = (EventHolder) convertView.getTag();
        }

        holder.txtTitle.setText(mListItems.get(position).getTitle());

        return convertView;
    }
} 
```

这很好，但我失去了加载下一批数据的能力。

有人可以解释我应该如何使用适配器的 getView 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:51:21.163

> 一切似乎都适用于示例，我想使用我自己的布局，所以像往常一样，我覆盖了我的适配器的 getview

覆盖`getView()`您包装的适配器`EndlessAdapter`（即，您提供给`EndlessAdapter`构造函数的适配器）。

# php - PHP 自定义 *.ini 文件

> ID：12883286
> 
> 赞同：1
> 
> 时间：2012-10-14T14:45:18.110
> 
> 标签：php, ini

有谁知道如何使用自定义 $config 文件？我知道 ZF 和其他框架（例如 CakePHP）使用自定义 application.ini 文件来定义应用程序常量变量、环境等，但是如何添加这样的文件并在使用纯 PHP 无框架构建的应用程序中访问它的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T14:47:30.897

就像几乎任何事情一样，PHP 中已经有一个函数可以做到这一点：[parse_ini_file()](http://php.net/manual/en/function.parse-ini-file.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T14:47:07.083

您可以使用该功能访问自定义 ini 文件的内容[`parse_ini_file()`](http://php.net/manual/en/function.parse-ini-file.php)。它将返回一个关联数组，表示文件中指定的设置。

# json - 如何轻松地使用 Jackson for Jersey

> ID：12883287
> 
> 赞同：13
> 
> 时间：2012-10-14T14:45:22.527
> 
> 标签：json, jakarta-ee, jersey, jackson

我想使用 Jersey 来实现一些 Java REST 服务。默认的 POJO 转换器 JAXB 处理 JSON 对象有点奇怪，所以我想使用 Jackson 来转换 POJO，开销很小或更少。我如何告诉 J2ME 框架使用另一个转换器？

我的 web.xml 看起来像这样：

```
<!-- Jersey JAVA REST implementation -->
<servlet>
<servlet-name>Jersey</servlet-name>
    <servlet-class>
        com.sun.jersey.spi.container.servlet.ServletContainer
    </servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>org.foobar.rest.services</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-14T14:46:06.660

只需添加 jackson JAR 并像这样修改 web.xml：

```
<!-- Jersey JAVA REST implementation -->
<servlet>
<servlet-name>Jersey</servlet-name>
    <servlet-class>
        com.sun.jersey.spi.container.servlet.ServletContainer
    </servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>org.foobar.rest.services;org.codehaus.jackson.jaxrs</param-value>    <!--  use jackson for JSON -->
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

所需的 Jackson JAR ( [http://jackson.codehaus.org/](http://jackson.codehaus.org/) ) 是：

```
jackson-core-asl-1.9.10.jar
jackson-core-lgpl-1.9.10.jar
jackson-jaxrs-1.9.10.jar
jackson-mapper-asl-1.9.10.jar
jackson-mapper-lgpl-1.9.10.jar
jackson-mrbean-1.9.10.jar
jackson-smile-1.9.10.jar
jackson-xc-1.9.10.jar 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T03:31:20.890

除了注册 Jackson 1.x 提供者之外，您还可以使用 Jackson 2.x JSON 提供者（使用 Jackson 2.x 数据绑定和它依赖的核心模块）：[https ://github.com/FasterXML/jackson-jaxrs-json -provider](https://github.com/FasterXML/jackson-jaxrs-json-provider) 它使用服务提供者接口自动注册自己（1.x 没有这样做，因为担心用户可能会对此感到惊讶，因为它基于类路径中存在的 jar 而不是显式选择）。

编辑（2013 年 9 月）：正如 @koppor 所指出的，该模块已被弃用，可以从[https://github.com/FasterXML/jackson-jaxrs-providers](https://github.com/FasterXML/jackson-jaxrs-providers)找到替换模块（JSON、XML、Smile） （谢谢！）

# algorithm - R通过反转排序的实现

> ID：12883296
> 
> 赞同：3
> 
> 时间：2012-10-14T14:46:06.987
> 
> 标签：algorithm, r, sorting, metric

我想知道 R 中是否有一个实现，它将 n 个数字的排列排序到原始的 1...n 序列中，并提供所需的反转次数。[例如，本ppt](http://www.cs.ucr.edu/~stelo/cpm/cpm04/01_Tannier.ppt)中概述的“反向排序”或“易位排序”的实现。

具体来说，我有一个 n 元素序列 pi(n) 的排列，我想弄清楚它与原始序列的接近程度。反转的数量似乎是一个很好的指标。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:27:20.737

这似乎是 Kendall 距离（有时也称为冒泡排序距离）的工作。它可能是衡量排名空间距离的最常用指标。

Kendall 距离计算两个序列在​​两个索引中的项目顺序不同的次数。在其中一个序列是平凡序列 (1, 2, ..., n) 的情况下，我们可以简单地通过计算 i < j 且 pi(i) > pi(j) 的次数来测量距离.

如果您喜欢这个指标（它相当于将一个序列转换为 1:n 所需完成的相邻项目的最小成对转置数），您可以在我的包 RMallow 中找到它，该包可在 CRAN 上找到。该函数称为 AllSeqDists。这是一个例子：

```
library(RMallow)
# Create a matrix of sequences, each of length 5
datas <- matrix(c(1:5, 5:1, c(2, 1, 3, 4, 5), c(5, 1, 2, 3, 4), c(1, 2, 4, 5, 6), c(1, 5, 6, 2, 4)), nrow = 6, byrow = TRUE)
# Calculate all of their Kendall distances to the sequence (1, 2, 3, 4, 5)
datas <- SimplifySequences(datas)
dists <- AllSeqDists(datas) 
```

您也可以考虑 Spearman 的指标。
此外，我必须插入一类关于排名数据的模型，称为“Mallows 模型”，具体取决于您想要做什么。

# sql - 每个项目选择 X 个随机用户

> ID：12883303
> 
> 赞同：4
> 
> 时间：2012-10-14T14:47:29.837
> 
> 标签：sql, sql-server, sql-server-2008, random

我有 2 张桌子：`Items`& `Users`。

`Items`包含`ItemID, and Num_Users`
`Users`包含`UserID`

对于每一个`ItemID`，我需要根据 Num_Users 列中的值随机选择一些用户。

[我在SQL Fiddle](http://sqlfiddle.com/#!3/bdde1)上创建了一组样本数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T14:56:27.847

单程。[SQL小提琴](http://sqlfiddle.com/#!3/bdde1/5)

```
SELECT Items.[ItemID],
       UserID
FROM   Items
       OUTER APPLY (SELECT TOP ([Num_Users]) *
                    FROM   Users
                    ORDER  BY Newid()) A 
```

您也可以使用`CRYPT_GEN_RANDOM(4)`代替来获得更大程度的随机性，但在非最新版本的 SQL Server 2008 上`Newid()`存在[一些问题。](http://connect.microsoft.com/SQLServer/feedback/details/654809/crypt-gen-random-erroneously-treated-as-constant)

# c# - 如果基数固定，可以优化模除法吗？

> ID：12883309
> 
> 赞同：0
> 
> 时间：2012-10-14T14:48:46.250
> 
> 标签：c#, optimization

给定 C# 中的以下表达式，并且`chunkWidth`和`chunkHeight`是固定的预先计算的数字，是否可以通过预先计算部分模除法来优化表达式？

```
// Once assigned these guys never change
private int _chunkWidth;
private int _chunkHeight;

// This function needs to be super optimal!
SomeObject LookupObject(int row, int column) {
    int index = (row % _chunkHeight) * _chunkWidth + (column % _chunkWidth);
    return _objects[ index ];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:51:25.920

要允许变量只分配一次，您可以`readonly`向它们添加属性。这可能允许一些优化。不过，我不会非常担心基本算术运算的性能，除非这已被证明是一个*非常*严格的瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:51:09.213

即使`chunkWidth`和`chunkHeight`是固定和预先计算的字段，但您仍然无法进一步优化模运算，因为`row`和`column`是每次执行语句时都需要模运算的变量。

# php - php中的日期不准确

> ID：12883317
> 
> 赞同：3
> 
> 时间：2012-10-14T14:50:07.857
> 
> 标签：php

我有这个代码：

```
$expiration_date='2041-07-14'
           $epoch_timestamp_expiration_date =  strtotime($expiration_date);
       //Get 7 days
       $seven_days_ago=7*86400;
       //subtract seven days from the expiration date.
       $epoch_timestamp_expiration_date-=$seven_days_ago;
       //Format the new expiration date - 7 days ago
       $formatted_epoch_time=date('Y-m-d',$epoch_timestamp_expiration_date);       
       //Todays format.
       $today=date('Y-m-d', time());
       //Todays miliseconds
       $today_secs=strtotime($today);
       //Subtracting expiration date in epoch secs from todays secs
       $diff_secs = abs($epoch_timestamp_expiration_date-$today_secs);
       //Finding the number of days between the two
       $days=floor($diff_secs/86400);
       //Printing output
  echo "<br/><br/>Days: ". $days; 
     echo "<br/><br/>Today: ".$today;
    echo "<br/><br/>Expiration Date : ".$expiration_date;
     echo "<br/><br/>Expiration Date 7 days ago: ".$formatted_epoch_time ; 

      //Is cache near to expire. 7 days closer to the expiration date. 
        if ($epoch_timestamp_expiration_date>$today_secs) {
     echo "<br/><br/>The site isnt about to expire ";
            return "<br/><br/>Cache date isnt about to expire ".$days;
        } 
```

当输出得到回显时，我得到这个：

> ```
> Days: 15634 
> ```
> 
> 今天：2012-10-14
> 
> 到期日期 : 2041-07-14
> 
> 有效期7天前：1969-12-25

为什么？

现在如果我交换参数的值：

```
$expiration_date='2013-07-14'; 
```

我得到：

> > 天数：266
> 
> 今天：2012-10-14
> 
> 有效期：2013-07-14
> 
> 失效日期7天前：2013-07-07
> 
> 网站不会过期

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T14:52:56.183

这是因为 expiration_date 超出了 Unix 时间戳（2038-01-19）： [http ://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

“时间戳的有效范围通常是从格林威治标准时间 1901 年 12 月 13 日星期五 20:45:54 到格林威治标准时间 2038 年 1 月 19 日星期二 03:14:07。（这些日期对应于 32 的最小值和最大值-bit 有符号整数）。但是，在 PHP 5.1.0 之前，此范围在某些系统（例如 Windows）上被限制为 01-01-1970 到 19-01-2038。

# java - 将字符串数组转换为 ArrayList

> ID：12883319
> 
> 赞同：1
> 
> 时间：2012-10-14T14:50:42.130
> 
> 标签：java, arrays, string, arraylist, classcastexception

> **可能重复：**
> [在 Java 中将数组分配给 ArrayList](https://stackoverflow.com/questions/3746639/assigning-an-array-to-an-arraylist-in-java)

如何转换字符串数组，例如：

```
String logsSplitFromUrdu[] = fromTheRecentLogFile.split("غزل"); 
```

变成一个`ArrayList<String>`？

**编辑：**

当我遇到错误时，我正在这样做：

```
ArrayList<String> time = (ArrayList<String>)Arrays.asList(logsSplitFromUrdu); 
```

**编辑 ：**

执行上述操作时出现的异常：

```
java.lang.ClassCastException: java.util.Arrays$ArrayList cannot be cast to java.util.ArrayList
    at Tester.main(Tester.java:26) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:51:54.770

使用类中的[`Arrays.asList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)方法`Arrays`。它将返回`List`正确的泛型类型（`String`在这种情况下）：

```
List<String> list = Arrays.asList(logsSplitFromUrdu); 
```

如果你绝对需要 an`ArrayList<String>`并且 a`List<String>`不会做，那么在前一行之后再写一行：

```
ArrayList<String> arraylist = new ArrayList<String>(list); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T14:54:36.657

看看[`Arrays#asList`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)。此方法返回一个`fixed size`列表。

所以，如果你是**`ok with fixed size list`**，那么你可以使用这个： -

```
List<String> fixedList = Arrays.asList(logsSplitFromUrdu); 
```

但是，如果**`want to modify`**您是新创建的`List`，则需要像这样创建它：-

```
ArrayList<String> modifiableList = 
             new ArrayList<String>(Arrays.asList(logsSplitFromUrdu)) 
```

**但你不应该这样做**： -

```
ArrayList<String> modifiableList = 
                  (ArrayList<String>)Arrays.asList(logsSplitFromUrdu)) 
```

**它会给你`ClassCastException`**，因为从返回的列表`Arrays.asList`是类型： -`java.util.Arrays.ArrayList`并且它不能转换为： -`java.util.ArrayList`

**更新**： -[`java.util.Arrays#ArrayList`](http://www.docjar.com/docs/api/java/util/Arrays%24ArrayList.html)是类中定义的静态`Arrays`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T14:52:06.373

的返回类型

```
Arrays.asList(logsSplitFromUrdu); 
```

是`List<String>`并且不能强制转换为`ArrayList<String>`. 相反，您可以使用：

```
List<String> myList = Arrays.asList(logsSplitFromUrdu); 
```

它返回一个不可修改的列表。要获得可修改的列表，您可以使用：

```
ArrayList<String> modifyiableList = new ArrayList<String>(myList); 
modifyiableList.add("..."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T14:52:53.283

你必须使用 java.util.Arrays 的 asList 方法，参考[这里的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T14:55:51.177

使用`Arrays.asList()`方法转换`array`成`ArrayList`

```
String logsSplitFromUrdu[] = fromTheRecentLogFile.split("غزل");

ArrayList<String> arList = new ArrayList<String>(Array.asList(logsSplitFromUrdu)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T15:19:38.223

您可以简单地使用 for 循环将数组中的所有元素复制到新的 ArrayList 中，如下所示：

```
ArrayList<String> logsList = new ArrayList<String>();
for(int i = 0; i < logsSplitFromUrdu.length; i++)
{
    logsList.add(logsSplitFromUrdu[i]);
} 
```

在此 logsList 之后将包含原始数组中的所有元素。

# jquery - 如何实现这个简单的 jQuery 图片库？

> ID：12883320
> 
> 赞同：2
> 
> 时间：2012-10-14T14:50:46.210
> 
> 标签：jquery, image-gallery

我正在尝试制作一个只有 3 张图片的简单 jQuery 画廊，如下图所示。

![在此处输入图像描述](../Images/c898776445a34563f6a4e49a121bcdd9.png)

我是这样翻译的：

```
if thumb clicked -> this thumb -> become big
current big -> become thumb 
```

问题是我不知道我翻译的方式似乎正确吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:20:15.493

请试试这个：

```
<html>
<head>
    <title>Simple Gallery</title>
<script src="jquery.js"></script>
<script>
    function ChangeThis(getThumb)
    {
        for(var i=1;i<=3;i++)
        {
            if(getThumb == i)
            {
                $("#bigView").html("<img src='img"+i+"' />");
                $("#thumb"+i).hide();
            }
            else
            {
                $("#thumb"+i).show();
            }
        }
    }
</script>
<style>
#bigView{width:100px;height:100px;}
.thumb{width:30px;height:30px}
</style>
</head>
<body>

<table><tr><td colspan="3">
<div id="bigView"><img src='img1'></div>
</td></tr>
<tr>
<td><div id="thumb1" class="thumb" onclick="ChangeThis(1);" style="display:none;"><img src='img1' /></div></td>
<td><div id="thumb2" class="thumb" onclick="ChangeThis(2);"><img src='img2' /></div></td>
<td><div id="thumb3" class="thumb" onclick="ChangeThis(3);"><img src='img3' /></div></td>
</tr>
</table> 
```

# ruby-on-rails - 在特定输入元素上显示 ruby on rails 服务器端表单验证

> ID：12883325
> 
> 赞同：0
> 
> 时间：2012-10-14T14:51:21.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我想要的是我想在每个输入字段下方显示错误。例如，我有两个字段名称和描述，那么它应该在名称输入字段下方显示与名称相关的错误，在描述输入字段下方显示描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:55:59.757

我们最近开始使用[`client_side_validations`](https://github.com/bcardarella/client_side_validations)，它非常好。您基本上只需要添加`:validate => true`到您的表单：

```
<%= form_for @model, :validate => true do |f| %> 
```

您可能还需要添加一些自定义 JavaScript。也可以查看[RailsCast](http://railscasts.com/episodes/263-client-side-validations)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:28:12.533

那么你可以使用这样的东西：这就是可以用于电子邮件输入字段的东西

```
<tr>
   <div>
    <td>   <%= u.label :email %></td>
    <td>   <%= u.text_field :email, size: 30 %> </td>
    <td>
      <% if @user.errors[:email].any? %>
        <%= @user.errors[:email].join(",") %>
      <% end %>
    </td>
   </div>
  </tr> 
```

同样，您可以将其用于 textarea

# php - 无法确定哪个查询实际上更快

> ID：12883328
> 
> 赞同：0
> 
> 时间：2012-10-14T14:51:37.187
> 
> 标签：php, mysql

请注意，由于用户和数据的数量，如果不进行大量工作，可能无法更改数据库结构。

“朋友”表基本上是这样的：

```
> show create table `friends`
CREATE TABLE `friends` (
    `id` int(10) unsigned NOT NULL auto_increment,
    `user1` int(10) unsigned NOT NULL,
    `user2` int(10) unsigned NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `user1_2` (`user1`,`user2`),
    KEY `user1` (`user1`),
    KEY `user2` (`user2`)
) ENGINE=InnoDB AUTO_INCREMENT=747908 
```

要获取用户的朋友，我有三个选项：

1.  单独选择`user2`where`user1`等于用户的 ID，反之亦然，然后在 PHP 中组合结果。
2.  `SELECT IF(user1=@userid,user2,user1) FROM friends WHERE @userid IN (user1,user2)`
3.  `SELECT user2 FROM friends WHERE user1=@userid`
    `UNION SELECT user1 FROM friends WHERE user2=@userid`

我尝试了计时选项 2 和 3，这就是我遇到问题的地方：我第一次运行它时，选项 2 大约需要 400 毫秒，而选项 3 只需要不到 1 毫秒。然而，每隔一次，选项 2 需要 0.6 毫秒，选项 2 需要 0.8 毫秒。

我应该怎么办？哪个选项实际上更快？`EXPLAIN`查询返回：

```
id   select_type  table      type  possible_keys key     key_len ref   rows   Extra
1    SIMPLE       friends    index NULL          user1_2 8       NULL  386438 Using where; Using index

id   select_type  table      type  possible_keys key     key_len ref   rows   Extra
1    PRIMARY      friends    ref   user1,user1_2 user1_2 4       const 8      Using index
2    UNION        friends    ref   user2         user2   4       const 8
NULL UNION RESULT <union1,2> ALL   NULL          NULL    NULL    NULL  NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:07:58.720

像往常一样进行基准测试时，请注意缓存。

使用子句衡量您的`SELECT`查询（请参阅[语法](http://dev.mysql.com/doc/refman/5.6/en/select.html)）。`SQL_NO_CACHE`[`SELECT`](http://dev.mysql.com/doc/refman/5.6/en/select.html)

# gwt - 我可以为 HTMLPanel 定义一个 ID 吗？

> ID：12883329
> 
> 赞同：2
> 
> 时间：2012-10-14T14:51:38.243
> 
> 标签：gwt

如何定义 HTMLPanel 的 ID？当然，我可以用 a 包围 HTML，`<div id="anID">`但这也不会设置面板的 ID。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T16:36:04.093

```
htmlPanel.getElement().setId("myId"); 
```

如果面板是在 UiBinder 模板中定义的，那么您必须通过“ui:field”在 Java 类中使其可访问：

```
<g:HTMLPanel ui:field="htmlPanel">...</g:HTMLPanel> 
```

```
...

@UiField
HTMLPanel htmlPanel;

public MyWidget() {
    initWidget(uiBinder.createAndBindUi(this));
    htmlPanel.getElement().setId("myId");
} 
```

注意：使用`<g:HTMLPanel id="myId">`不起作用。

有一个原因，为什么 GWT 小部件的使用 id 没有变得更简单：

您必须非常小心，不要在同一页面上两次使用相同的 id。由于自然的重用因素，小部件尤其容易发生这种情况。（不仅可以重复使用小部件，还可以重复使用父小部件......）

因此，例如，如果 MyWidget 可以在您的页面文档中同时出现多次，您必须确保每次都设置不同的 id。可以这样做，如果需要，可以使用`com.google.gwt.dom.client.Document.createUniqueId()`.

或者，如果可能，可以使用 CSS 类而不是 id（因为 css 类可以而且应该在同一页面上重复使用）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T16:11:42.537

你可以这样做：

```
htmlPanel.getElement().setId( "yourId" ); 
```

这适用于任何小部件/元素。

# html - 对 Google 文字转语音 API 的请求

> ID：12883330
> 
> 赞同：6
> 
> 时间：2012-10-14T14:51:42.507
> 
> 标签：html, url, hyperlink, google-translate

我有这个 URL：`http://translate.google.com/translate_tts?ie=utf-8&tl=en&q=Hello+world` 当我把它放到浏览器的地址栏并按 Enter 键时，我得到带有合成语音的 mp3 文件，上面写着“Hello world”。一切都是正确的。

但现在我有一个 HTML 链接，它重定向到这个 URL，如下所示：

```
<a href="http://translate.google.com/translate_tts?ie=utf-8&tl=en&q=Hello+world">Link</a> 
```

当我单击此链接时，我没有收到文件，而是收到错误消息（简单的 QuickTime 徽标）。谁能解释我为什么会这样，我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T16:03:37.873

解释是谷歌限制了这项服务的使用：根据[这个 StackOverflow 答案](https://stackoverflow.com/a/10075876/625158)，如果 HTTP 请求包含非空字符串的[Referer 标头，谷歌将返回 404 错误。](http://en.wikipedia.org/wiki/HTTP_referer)

当您在地址栏中键入 URL 时，没关系，因为没有向 Google 传输Referer URL。当你点击一个超链接时，你就有了一个推荐人，谷歌会阻止你的请求。

**注意：**我测试了您的 URL（请参见[此处](http://translate.google.com/translate_tts?ie=utf-8&tl=en&q=Hello%20world)），并且有效。我怀疑这只是因为我之前尝试过在地址栏中输入 URL，而该资源仍在我的浏览器缓存或音频插件 (VLC) 缓存中。

**NB2：**请参阅[此处](http://weston.ruter.net/2009/12/12/google-tts/)了解解决方法。

# jsf - 将键/值对列表编码为 URL 请求参数

> ID：12883335
> 
> 赞同：0
> 
> 时间：2012-10-14T14:52:25.123
> 
> 标签：jsf, servlets, servlet-3.0

是否有标准 API 调用（或一组调用）允许我将键/值对列表编码为单个请求参数？不知何故，我以前从未这样做过。

我正在寻找的是生成一个 URL，该 URL 对将由指定页面解码的任意长的参数字符串进行编码。例如：

```
http://someth.ing/page?params=xxxxxxxxxxxxx 
```

其中 xxxxxxx 是 a 的编码形式

```
Map<String, String> 
```

或者如果那不可用，那么

```
List<String> 
```

我知道我的替代方法是将每个键编码为其自己的请求参数，但这会在解码端产生大量解析工作，我宁愿避免。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:10:19.793

您可以转换为/从[JSON](http://json.org)转换。您可以为此使用[Google Gson ：](http://code.google.com/p/google-gson/)

```
Map<String, String> data = createItSomehow();
String dataAsJson = new Gson().toJson(data);
String url = "http://example.com/some?data=" + URLEncoder.encode(data, "UTF-8");
// ... 
```

另一方面，假设一个 servlet：

```
String dataAsJson = request.getParameter("data");
Map<String, String> data = new Gson().fromJson(json, new TypeToken<Map<String, String>>(){}.getType());
// ... 
```

# iphone - https 连接是否会自动使用 ssl 加密数据

> ID：12883338
> 
> 赞同：1
> 
> 时间：2012-10-14T14:52:53.477
> 
> 标签：iphone, ios, http, ssl, https

我只是在编写一个 iPhone 应用程序，我想建立一个到客户端服务器的 https 连接。到目前为止，我已经使用了 ASIHTTPRequest。

到目前为止，我学到的是我需要一个证书才能与服务器建立 https 连接。但我还必须用 ssl 加密数据交换。这是在后台完成的吗？所以我的意思是 - 是由 ASIHTTPRequest、CFNetwork 或 NSURLConnection 或其他任何东西完成的。如果不是，我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:55:43.743

如果您问是否需要自己加密数据，答案是否定的。只要您通过 HTTPS 而不是 HTTP 发送数据，底层的 Objective-C 库就会为您解决这个问题。

# python - 烧瓶中带有蓝图的静态文件夹

> ID：12883341
> 
> 赞同：2
> 
> 时间：2012-10-14T14:52:59.290
> 
> 标签：python, flask

我有一个静态文件 (SF)，我尝试按照文档访问它。因此，使用名称“应用程序”注册的蓝图，我希望在以下位置找到静态文件：

```
/application/static/SF 
```

但是，这不起作用。但是，如果我使用 url_prefix 条件创建蓝图：

```
application = Blueprint('application',__name__,template_folder='templates',
                        url_prefix='/test',static_folder='static) 
```

我现在确实能够在以下位置找到静态文件：

```
/test/static/SF 
```

这种奇怪的行为有什么特别的原因吗？我是否误解了烧瓶文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:32:24.597

虽然蓝图*通常*用于将应用程序拆分为不同的子应用程序，这不是它们唯一的用途 - 它们也可用于将与新 URL 路由（例如过滤器）无关的功能附加到应用程序。

*因为它们不仅*可以用于路线，因此看起来决定不自动安装它们。因为蓝图*可能*被用作混合，看起来决定不将它们自动安装在特定的子 URL 下。

# wordpress - 将标题转换为标签 - Wordpress

> ID：12883351
> 
> 赞同：0
> 
> 时间：2012-10-14T14:54:12.677
> 
> 标签：wordpress, tags

我需要将标题转换为标签。我想控制长度。不希望标签太短或太长，如果标签不存在，我还需要在标签前面添加一个井号标签（#），但清除任何其他字符。

下面的代码有效，但它仅将哈希标签应用于前两个标签。

```
$title = get_the_title($post_id);

$splittotags = explode(" ", $title);

foreach ($splittotags as $atag){

     if( strlen($atag) > 4 && strlen($atag) < 15 ){
         $first = $atag[0];

         if($first == '#'){
             $atagg = ereg_replace("[^A-Za-z0-9#]", "", $atag );
         }else{
             $atagg = ereg_replace("[^A-Za-z0-9#]", "", "#".$atag );
         }

         if($atag !=NULL){
       wp_set_object_terms($post_id, $atagg, 'post_tag', true );
         }
  }

} 
```

我也在考虑定义一个带有错误标签的数组，如下所示：

```
 $not_tag = array("!", "by", "me", "auto", "mine", "by"); 
```

然后这样做：

```
 if( !in_array($atag, $not_tag){ 
```

代码在 save_post 操作上运行

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:53:20.733

我不知道您所说的“它仅将哈希标签应用于前两个标签”是什么意思。您的功能是否无法运行`wp_set_object_terms`，或者该功能是否运行并且标签未正确分配？

我看不出您的功能失败的任何原因。可能这条线 ,`if($atag !=NULL){` 没有按您的预期工作。也许[`NULL`](http://php.net/manual/en/language.types.null.php)不像你想的那样工作。例如，空字符串不是 NULL ( `'' !== NULL`)。

这是未经测试的，但我认为它比你拥有的更干净，我很确定它会起作用。

```
$title = get_the_title($post_id);
$splittotags = explode(" ", $title);
$tags = array();
foreach ($splittotags as $atag){
  $atagg = preg_replace("/[^A-Za-z0-9]/", "", $atag ); // this will clear any existing hash characters
  if(!empty($atagg) && strlen($atagg) > 4 && strlen($atagg) < 15){
    $tags[] = '#'.$atagg;
  }
  $atagg = ''; // Clear $atagg. I'm paranoid.
}
wp_set_object_terms($post_id, $tags, 'post_tag', true ); 
```

你也可以考虑使用帖子名称`global $post; echo $post->post_name`——因为它已经被清理过了。你只需要打破破折号而不是空格。

# python - 使用 BeautifulSoup 仅获取 URL 列表的第一个链接

> ID：12883352
> 
> 赞同：3
> 
> 时间：2012-10-14T14:54:18.443
> 
> 标签：python, parsing, url, beautifulsoup

我解析了一个完整的 HTML 文件，用 Python 中的 Beautifulsoup 模块提取了一些 URL，代码如下：

```
for link in soup.find_all('a'):
    for line in link :
        if "condition" in line :

           print link.get("href") 
```

我在 shell 中获得了一系列链接，这些链接观察 if 循环中的条件：

*   http:// ..link1
*   http:// ..link2
*   .
*   .
*   http:// ..链接

我怎样才能在这个列表的第一个链接中放入一个变量“输出”？

**编辑：**

网页是：[http://download.cyanogenmod.com/?device=p970](http://download.cyanogenmod.com/?device=p970)，脚本必须返回 HTML 页面中的第一个短 URL (http://get.cm/...)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T14:58:03.860

您可以使用 oneliner 做到这一点：

```
import re

soup.find('a', href=re.compile('^http://get.cm/get'))['href'] 
```

将其分配给变量：

```
variable=soup.find('a', href=re.compile('^http://get.cm/get'))['href'] 
```

我不知道你到底在做什么，所以我将从头开始发布完整的代码：注意！如果您使用 bs4 更改导入

```
import urllib2
from BeautifulSoup import BeautifulSoup
import re

request = urllib2.Request("http://download.cyanogenmod.com/?device=p970")
response = urllib2.urlopen(request)
soup = BeautifulSoup(response)
variable=soup.find('a', href=re.compile('^http://get.cm/get'))['href']
print variable

>>> 
http://get.cm/get/4jj 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:49:37.997

您可以在 BeautifulSoup 中更轻松、更清晰地做到这一点，而无需循环。

假设您解析的 BeautifulSoup 对象被命名为`soup`：

```
output = soup.find(lambda tag: tag.name=='a' and "condition" in tag).attrs['href']
print output 
```

请注意，该`find`方法仅返回第一个结果，而`find_all`返回所有结果。

# java - 在通知点击时杀死 AsyncTask

> ID：12883357
> 
> 赞同：0
> 
> 时间：2012-10-14T14:54:55.000
> 
> 标签：java, android, notifications, android-asynctask

我需要一点帮助，我不知道该怎么做：

有一个由后台 AsyncTask 更新的通知，我想要做的是在我点击通知时完全取消/停止 AsyncTask（它现在所做的是打开应用程序的另一个实例，而不停止旧的 AsyncTask）。

我想指出，在我启动后台 AsyncTask 之后，我使用

```
Intent i = new Intent(Intent.ACTION_MAIN);
    i.addCategory(Intent.CATEGORY_HOME);
    startActivity(i); 
```

我不确定这是在保持 AsyncTask 运行的同时删除 UI 的最佳方法，但它确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:42:09.793

我找到了自己的解决方法。我运行了一个服务，而不是 AsyncTask，它可以通过 stopService 轻松停止。然后，我只使用 stopService 创建了一个新活动，将通知的意图更改为该上下文，然后完成。

# list - 在 Haskell 的匿名函数中将元素连接到列表中

> ID：12883358
> 
> 赞同：0
> 
> 时间：2012-10-14T14:54:56.803
> 
> 标签：list, haskell, lambda, higher-order-functions

我是 Haskell 的新手，似乎找不到无法编译的原因：

```
test = foldr (\x y -> y : x) [1] 
```

我并没有试图为虚拟函数“测试”实现任何功能。

只是我不断收到此错误代码：

```
Occurs check: cannot construct the infinite type: a0 = [a0]
    In the first argument of `(:)', namely `y'
    In the expression: y : x
    In the first argument of `foldr', namely `(\ x y -> y : x)' 
```

我要做的就是能够连接列表中的元素，以在另一个函数中定义的匿名函数中形成另一个列表（在这种情况下，在“测试”中定义。）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:03:30.343

的类型`foldr`是

```
foldr :: (a -> b -> b) -> b -> [a] -> b 
```

所以如果我们尝试使用它

```
test = foldr (\x y -> y : x) [1] 
```

我们必须有以下类型：

```
b = Num n => [n] 
```

因为空输入列表的参数具有该类型，并且

```
(\x y -> y : x) :: (a -> b -> b)
                :: Num n => (a -> [n] -> [n]) 
```

但是 lambda 是`flip (:)`并且因此具有类型

```
(\x y -> y : x) :: [t] -> t -> [t] 
```

并试图将其与 统一起来`a -> [n] -> [n]`，我们发现

```
a == [t]
t == [n]
[t] == [n] 
```

这意味着`t == [t]`。

如果你不`flip`使用 cons `(:)`，它会进行类型检查，但函数会更容易表示为

```
test xs = xs ++ [1] 
```

或者，无点

```
test = (++ [1]) 
```

# spring-mvc - 向spring mvc表单动态添加属性：隐藏控件

> ID：12883362
> 
> 赞同：0
> 
> 时间：2012-10-14T14:55:22.963
> 
> 标签：spring-mvc, hidden-field

当我查看模型中的对象列表时，我想在 form:hidden 标记上动态添加 disabled 属性。我拥有的代码（不起作用）有点像这样：

```
<c:forEach items="${myModel.myList}" var="obj">
        <div id="${obj.id}" onclick="selectObject(this);"><span>${obj.name}</span></div>
        <form:hidden path="myModel.selectedObj" />
</c:forEach> 
```

我希望列表中 obj 的隐藏输入，即他的 id 等于 selectedObj 不被禁用，并且我想要禁用的所有其他隐藏输入。这是我尝试过的：

```
<form:hidden path="myModel.selectedObj" <c:out value="${obj.id != myModel.selectedObj.id ? "disabled=\"disabled\"" : ""}"></c:out> /> 
```

正如我所说，这没有成功。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:04:26.603

试试这段代码：

```
<c:forEach items="${myModel.myList}" var="obj">
    <div id="${obj.id}" onclick="selectObject(this);"><span>${obj.name}</span></div>
    <c:if test="${obj.id eq myModel.selectedObj.id}">
        <form:hidden path="myModel.selectedObj" />
    </c:if>
    <c:if test="${obj.id ne myModel.selectedObj.id}">
         <form:hidden path="myModel.selectedObj" disabled="disabled" />
    </c:if>
</c:forEach> 
```

或者您可以使用`<c:choose />`, with`<c:when />`和`<c:otherwise />`标签：

```
<c:forEach items="${myModel.myList}" var="obj">
    <div id="${obj.id}" onclick="selectObject(this);"><span>${obj.name}</span></div>
    <c:choose>
        <c:when test="${obj.id eq myModel.selectedObj.id}">
            <form:hidden path="myModel.selectedObj" />
        </c:when>
        <c:otherwise>
            <form:hidden path="myModel.selectedObj" disabled="disabled" />
        </otherwise>
    </c:choose>
</c:foreach> 
```

# jquery - 使用 jquery 和 css 的特殊进度条

> ID：12883365
> 
> 赞同：0
> 
> 时间：2012-10-14T14:55:47.587
> 
> 标签：jquery, asp.net, css

我想创建一个进度条，该进度条分为以下链接中的部分：[进度条示例](https://www.zocdoc.com/booking/start?startTime=634838256000000000&professionalId=41297&locationId=29436&specialtyId=345&procedureId=1296&referrerType=&repeatPatient=false)

我有两个访问表：项目、阶段。我需要在上述进度栏中显示每个项目的阶段。

任何人都可以帮助我创建/使用现有的此类进度条，该进度条已构建并引用这些表。

在这里已经问过同样的问题，但提供的答案对我来说是难以理解的

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:01:35.857

您显示的链接刚刚重新加载了页面。如果不重新加载页面，它会稍微复杂一些，但您所要做的就是使用如下规则：

（在第一页）

```
Projects { background-image: url('complete.gif'); }
Stages{ background-image: url('incomplete.gif'); } 
```

（在第二页）

```
Projects { background-image: url('complete.gif'); }
Stages{ background-image: url('complete.gif'); } 
```

# node.js - 阅读 Node.js 堆快照（通过 Nodetime 创建）——为什么我的对象没有被 GC 处理？

> ID：12883370
> 
> 赞同：5
> 
> 时间：2012-10-14T14:56:10.353
> 
> 标签：node.js

我的 Nodetime 堆快照中有一些令人惊讶的结果：

![在此处输入图像描述](../Images/1dc66a3f3a68f13c29ad00d82665abaf.png)

我是否正确地阅读了我的堆中有 1706 个“用户”实例？这似乎高得离谱，我什至不太确定我会如何分配这么多。无论如何，是否有任何提示/技巧/提示可以找出这些问题的原因？我已经在我的代码中使用了 JSHint 来确保没有分配空闲的全局变量。一切都应该包含在请求的闭包范围内……那么为什么当请求完成时用户、帖子等不被垃圾收集呢？这是一些（编辑过的）代码来展示我是如何做事的......

非常令人惊讶的是，**我在最后一次 API 调用完成后大约 10m 拍摄了上面的堆快照**。所以，在触发它们被分配的请求完成后，这些对象都在附近徘徊了很长时间！

代码：

```
var User = require('./user').User,
    Q = require('q');

// this function is called via express' router, eg when the client visits myapi.com/users/zane
function getUser(req, res, next)
{
   var user = extend({},User).initialize();

   Q.ncall(user.model.find, user.model, {'username': req.arguments[0]})
   .then(function(data){
       res.writeHead(200, {});
       res.end(JSON.stringify(data));
   })
   .fail(next).end();
} 
```

“用户”模块看起来像这样：

```
exports.User = extend({}, {
    initialize: function() {
        var Schema = api.mongoose.Schema;
        this.schema = new Schema({
            'username': {'type':String, 'index':true}
        });
        this.model = api.db.model('users', this.schema);
    }

    // ... some other helper functions in here
}); 
```

根据我上面的快速代码，我希望分配的用户对象的生命周期仅与请求返回的时间一样长。我在这里错过了一些关键的 Node.js GC 想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:56:13.387

这条线看起来效率低得令人怀疑：

```
var user = extend({},User).initialize(); 
```

我假设`extend`调用复制`User`对象，然后调用它的`initialize`方法。`User`为什么要在每次 API 调用时复制对象？

然后在`initialize`调用中创建一个新的 Mongoose 模式对象，然后通过调用将其注册为模型`api.db.model`。一次创建模式并在初始化期间注册它不是更好吗？

这两者的结合可能会导致在每次调用时创建的对象多于必要的数量，我敢打赌那些注册的 Mongoose 模型不会轻易 GC。

# entity-framework - 如何在实体框架中自定义 DbContext 属性名称并停止被覆盖？

> ID：12883371
> 
> 赞同：7
> 
> 时间：2012-10-14T14:56:15.553
> 
> 标签：entity-framework

EF 从我的 edmx 文件（数据库优先）自动生成 DbContext 类，并使用表名作为所有这些 DbContext 属性的默认名称（例如`public DbSet<Student> student { get; set; }`：）

如果我在此文件中进行一些更改（例如：将属性名称从学生重命名为学生），每次保存模型时我的更改都会丢失，因为 EF 会重新生成 DbContext 类文件。

如何更改此默认行为并能够进行自定义并停止丢失它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T20:54:51.943

详细说明 Pawel 所说的内容。EDMX 文件（设计者）是一切的来源。您需要对生成的项目进行的任何更改都应在此处完成。您可以通过部分类添加其他方法或属性，但不能更改现有的..因此必须在源 EDMX 文件中进行更改。

只需右键单击设计器中的表，然后重命名它。这不会更改基础表名称（至少在 Database First 逆向工程中，模型优先是另一回事）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:40:07.590

您需要在 Edmx 文件中更改它 - 您应该能够使用 EF Designer 进行更改

# c++ - C++ 使用 in .h I want to create a function that is while t is template <typename t="">string myFunction(T t) { string str1; //some computation with t return str1(); } 问问题 问问题 2012-10-14T14:56:20.840 90 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. c++ 4 1 回答 1 This answer is useful 3 制作成员函数模板： class Foo { template <typename t="">string myFunction(T t) { } }; 或者，制作一个类模板： template <typename t="">class Foo { string myFunction(T t) { } }; 任何对你的情况有意义的事情。如果您在类之外定义函数，则： class Foo { template <typename t="">string myFunction(T); }; template <typename t="">string Foo::myFunction(T t) { } 对于成员函数模板，或 template <typename t="">class Foo { string myFunction(T); }; template <typename t="">string Foo<t>::myFunction(T t) { } 用于类模板。 于 2012-10-14T15:00:43.210 回答 Related 1 c++ - 当我调用方法 c++ 时对象恢复为 Null 2 servlets - CXF（和拦截器）和 2.5 webapps 2 c++ - 在 C++ 中，VOID 和 void 有区别吗？ 1 php - 如何在php中获取相同文本框的值 0 libraries - 生成语音相似的短语 2 c# - 将流通过管道传输到 Debug.Write() 2 php - 发现 PHP 不完整对象错误？ 1 python - 在文件对象而不是字符串上运行正则表达式 3 .net - 在 Listview 子项中查找确切的文本？ 2 r - 使用 Rcurl 的内部服务器错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</t></typename></typename></typename></typename></typename></typename></typename>

> ID：12883372
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:00:43.210

制作成员函数模板：

```
class Foo {
    template<typename T>
    string myFunction(T t)
    {
    }
}; 
```

或者，制作一个类模板：

```
template<typename T>
class Foo {
    string myFunction(T t)
    {
    }
}; 
```

任何对你的情况有意义的事情。如果您在类之外定义函数，则：

```
class Foo {
    template<typename T>
    string myFunction(T);
};

template<typename T>
string Foo::myFunction(T t)
{
} 
```

对于成员函数模板，或

```
template<typename T>
class Foo {
    string myFunction(T);
};

template<typename T>
string Foo<T>::myFunction(T t)
{
} 
```

用于类模板。

# android - 在应用程序中自动接收文件

> ID：12883374
> 
> 赞同：1
> 
> 时间：2012-10-14T14:56:41.873
> 
> 标签：android, bluetooth

我正在为android制作一个应用程序。我正在从“设置”连接设备，我想接收来自蓝牙的所有内容。
我没有像 BluetoothChat 示例中那样的套接字客户端连接，并且发送的设备必须是任何设备。
实际上，我必须接受我的应用程序中的任何文件，并向设备发送消息。
我试过 BluetoothShare.java，但没有运气：

```
ContentValues values = new ContentValues();
    String address= addressString;
    values.put(BluetoothShare.URI, Uri.fromFile(new File(path)).toString());
    values.put(BluetoothShare.DESTINATION, address);
    values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);
    Long ts = System.currentTimeMillis();
    values.put(BluetoothShare.TIMESTAMP, ts);
    Uri contentUri = getContentResolver().insert(BluetoothShare.CONTENT_URI, values);
    grantUriPermission(BluetoothShare., contentUri, Intent.FLAG_GRANT_READ_URI_PERMISSION); 
```

关于如何实施它的任何想法？

# python - 删除 Python 字符串中的第一个单词？

> ID：12883376
> 
> 赞同：45
> 
> 时间：2012-10-14T14:57:04.353
> 
> 标签：python, string

删除字符串的第一个单词的最快/最干净的方法是什么？我知道我可以使用`split`然后迭代数组来获取我的字符串。但我很确定这不是最好的方法。

Ps：我对python很陌生，我不知道每一个技巧。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-10-14T14:59:41.253

我认为最好的方法是拆分，但通过提供[`maxsplit`](http://docs.python.org/library/stdtypes.html#str.split)参数将其限制为仅一个拆分：

```
>>> s = 'word1 word2 word3'
>>> s.split(' ', 1)
['word1', 'word2 word3']
>>> s.split(' ', 1)[1]
'word2 word3' 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-14T15:08:07.067

一个天真的解决方案是：

```
text = "funny cheese shop"
print text.partition(' ')[2] # cheese shop 
```

但是，这在以下（诚然人为的）示例中不起作用：

```
text = "Hi,nice people"
print text.partition(' ')[2] # people 
```

要处理这个问题，您将需要正则表达式：

```
import re
print re.sub(r'^\W*\w+\W*', '', text) 
```

更一般地说，如果不知道我们在谈论哪种自然语言，就不可能回答涉及“单词”的问题。“J'ai”有多少个字？“中华人民共和国”呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T15:08:00.127

如果您的字符串只有一个单词，另一个答案将引发异常，我认为这不是您想要的。

一种方法是使用该`str.partition`函数。

```
>>> s = "foo bar baz"
>>> first, _, rest = s.partition(" ")
>>> rest or first
'bar baz'

>>> s = "foo"
>>> first, _, rest = s.partition(" ")
>>> rest or first
'foo' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T15:07:39.767

假设您可以保证单词由单个空格分隔，这[`str.partition()`](http://docs.python.org/library/stdtypes.html#str.partition)就是您要查找的内容。

```
>>> test = "word1 word2 word3"
>>> test.partition(" ")
('word1', ' ', 'word2 word3') 
```

元组中的第三项是您想要的部分。

# cuda - 如何在不优化的情况下编译 cuda 内核？

> ID：12883377
> 
> 赞同：3
> 
> 时间：2012-10-14T14:57:12.297
> 
> 标签：cuda, gpgpu

如果我编译这个

```
__global__ void dummy_kernel(float *a, int N, float* b, int N2){
    unsigned int i = blockIdx.y*blockDim.y + threadIdx.y;
    unsigned int j = blockIdx.x*blockDim.x + threadIdx.x; 
} 
```

我得到这个空的 ptx 代码

```
.entry _Z9dummy_kernelPfiS_i(
.param .u64 _Z9dummy_kernelPfiS_i_param_0,
.param .u32 _Z9dummy_kernelPfiS_i_param_1,
.param .u64 _Z9dummy_kernelPfiS_i_param_2,
.param .u32 _Z9dummy_kernelPfiS_i_param_3
)
{

ret; 
} 
```

有没有办法强制编译器在不优化的情况下生成 ptx？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T16:19:31.723

试试 -g -G 开关看看它会输出什么我不确定它会涵盖所有可能的优化

# jquery - jQuery 滑动左/右内容面板

> ID：12883378
> 
> 赞同：1
> 
> 时间：2012-10-14T14:57:18.717
> 
> 标签：jquery, forms, jquery-animate, sliding, panels

我正在尝试建立与[MediaFire 注册页面](https://www.mediafire.com/upgrade/)上所见类似的效果。当您单击“尝试”按钮时，整个表单 div 的高度会缩小，并且注册表单会从右侧滑入。然后在该新表格上，您可以单击“返回”以滑回表格显示。

我确信这可以通过包含 jQuery UI 库来完成，但我很想只用常规的 jQuery 来做到这一点。我可以遵循任何可靠的解决方案吗？甚至不一定是插件，而是可以在不需要 UI 库的情况下使用 jQuery 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:37:57.637

我开发了这个网站[http://www.ladehoffcondominios.com.br/#home](http://www.ladehoffcondominios.com.br/#home)，你可以看看 ajax.js 和 gs.page.js 的源代码。

这有点令人困惑，但想法是使用[animate()](http://api.jquery.com/animate/)函数更改内容 div 的左/右边距。

如果您看起来不错，我会使用 ajaxComplete() 函数在内容准备好时将其带回。但我不认为是最好的主意。（如果您愿意，我可以更好地解释）

如果您尝试更好的方法，请添加评论以帮助我改进我的代码。
谢谢。

# c# - EF 通用 DAL 程序集中的连接字符串

> ID：12883379
> 
> 赞同：1
> 
> 时间：2012-10-14T14:57:50.933
> 
> 标签：c#, entity-framework, sql-server-ce, prism, entity-framework-5

**项目结构：**

有一个模块文件夹，我需要添加数据库并将存储库放在那里，其他模块和程序集可以使用它。新：将其更改为之前证明的将配置文件放置在根应用程序中的状态，仍然存在错误。这篇文章是完全编辑的。

* * *

**数据库位置：**

## 位置：....\db\db.sdf（卖家的 app.config 高 2 级）

**App.Config 文件**

位置：modules\ModuleX\（以前）

## 新位置：Shell\（主项目）

**新版本 ：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="MyRecordzContext" connectionString="metadata=res://*...
  </connectionStrings>
</configuration> 
```

* * *

**2个可疑案例：** providerName="System.Data.EntityClient"

LocalDbConnectionFactory

* * *

**错误信息：**

*错误行：* TblMyRecord MyRecord = context.MyRecords.First(w => w.MyRecord == stMyRecord);

*错误：* 在应用程序配置文件中找不到名为“MyRecordzContext”的连接字符串。

* * *

**目标**：如何更改连接字符串，我的 app.config 以使应用程序按预期工作

* * *

这里使用了 EF 5.0、SQL CE、Prism、WPF、MVVM、C#

* * *

**错误 ：**

错误：“System.Windows.Application”的类型初始化程序引发异常。

在应用程序运行时出现。

该错误似乎在任何构建之前。

**堆栈跟踪 ：**

```
PresentationFramework.dll!System.Windows.Application.Application()
Xz.Shell.exe!Xz.Shell.App.App()
Xz.Shell.exe!Xz.Shell.App.Main()
[Native to Managed Transition]
[Managed to Native Transition]
mscorlib.dll!System.AppDomain.ExecuteAssembly(string assemblyFile, System.Security.Policy.Evidence assemblySecurity, string[] args)
Microsoft.VisualStudio.HostingProcess.Utilities.dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
mscorlib.dll!System.Threading.ThreadHelper.ThreadStart_Context(object state)
mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state)
mscorlib.dll!System.Threading.ThreadHelper.ThreadStart()
[Native to Managed Transition] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:22:35.390

这是我的预感：ModuleX 是 DAL 项目，它引用自另一个项目（可能是 Web、Windows 窗体或控制台应用程序），我们将其称为 Startup Project。

如果是这种情况，则不使用 DAL 项目中的 App.Config 文件。

有2个解决方案：

1.  您可以在启动项目中指定连接字符串以将其考虑在内。这意味着您需要在以下位置添加`<connectionStrings>...</connectionString>`标签：

    *   web.config，如果启动项目是 Web 应用程序
    *   app.config，否则（例如 WPF、控制台）。
2.  [或者，您可以在machine.config](http://msdn.microsoft.com/en-us/library/ms229697%28v=vs.90%29.aspx)文件中定义此连接字符串，这将使其可用于在该特定机器上运行的任何 .NET 应用程序。

DAL 项目中的连接字符串在运行时不使用。我认为它仅由 EF 设计器使用。

# http - 是否可以在 301、302、303 或 307 重定向上修改或添加自定义 http 标头？

> ID：12883385
> 
> 赞同：4
> 
> 时间：2012-10-14T14:58:28.140
> 
> 标签：http, redirect, http-headers, express

HTTP 协议是否允许修改 302 请求标头，以便可以设置一些参数并将其传递给接收请求的 url？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:02:26.377

302 是响应代码，而不是请求标头。客户端将通过对新 URL 发出新请求来解析重定向，因此您的客户端可以将它想要的任何标头添加到该新请求中。

希望将一些数据发送到新 URL 的服务器应该通过将其作为查询字符串变量附加到 URL 来实现，例如：`http://example.com/new-url?variable=data`.

如果重定向发生在您自己的域中，您还可以设置一个 cookie，客户端可以将其发送到新地址。Cookie 只会在同一个域内发送，而不是在您重定向到其他地方时发送。

# r - 在ggplot2中仅绘制x和y轴边界（无框）？

> ID：12883386
> 
> 赞同：6
> 
> 时间：2012-10-14T14:58:31.137
> 
> 标签：r, ggplot2, border

一些期刊的惯例是仅在绘图中显示 x 和 y 轴，而不是整个绘图区域周围的框。如何在 ggplot2 中实现这一点？`theme_minimal_cb_L`我从[HERE](https://github.com/hadley/ggplot2/wiki/Themes)尝试过，但它似乎擦除了绘图周围的整个框（不离开 x 和 y 轴），如下所示：

![在此处输入图像描述](../Images/1276f3e718e63debabe621c691230cf3.png)

这是我正在使用的代码：

```
dat <- structure(list(x = c(0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1, 1.05, 
    1.1, 1.15, 1.2, 1.25, 1.3), y1 = c(34, 30, 26, 23, 21, 19, 17, 
    16, 15, 13, 12, 12, 11), y2 = c(45, 39, 34, 31, 28, 25, 23, 21, 
    19, 17, 16, 15, 14)), .Names = c("x", "y1", "y2"), row.names = c(NA, 
    -13L), class = "data.frame")

library(reshape2); library(ggplot2)
dat2 <- melt(dat, id='x')

theme_minimal_cb_L <- function (base_size = 12, base_family = "", ...){
  modifyList (theme_minimal (base_size = base_size, base_family = base_family),
              list (axis.line = element_line (colour = "black")))
}

ggplot(data=dat2, aes(x=x, y=value, color=variable)) + 
    geom_point(size=3) + geom_line(size=.5) +
    theme_minimal_cb_L() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T15:11:47.143

我相信您是说您只想要情节左侧和底部的线条-对吗？

```
theme(panel.border = element_blank(), axis.line = element_line()) 
```

panel.border 移除整体边框，然后使用axis.line 添加x 和y 轴线。

* * *

编辑：由于您发布的其他主题内容对我不起作用。我将发布我实际运行的代码

```
dat <- structure(list(x = c(0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1, 1.05, 
    1.1, 1.15, 1.2, 1.25, 1.3), y1 = c(34, 30, 26, 23, 21, 19, 17, 
    16, 15, 13, 12, 12, 11), y2 = c(45, 39, 34, 31, 28, 25, 23, 21, 
    19, 17, 16, 15, 14)), .Names = c("x", "y1", "y2"), row.names = c(NA, 
    -13L), class = "data.frame")

library(reshape2); library(ggplot2)
dat2 <- melt(dat, id='x')

ggplot(data=dat2, aes(x=x, y=value, color=variable)) + 
    geom_point(size=3) + geom_line(size=.5) +
    theme(panel.border = element_blank(), axis.line = element_line())

# or using the template you used from talkstats...
ggplot(data=dat2, aes(x=x, y=value, color=variable)) + 
    geom_point(size=3) + geom_line(size=1.5) +
    scale_y_continuous(breaks=seq(0, 45, by=5)) +
    scale_x_continuous(breaks=seq(.7, 1.3, by=.05)) +
    theme_bw() + ylab("Sample Size") + xlab("Mean Difference") +
    theme(legend.position="bottom", legend.title=element_blank(),
        legend.key = element_rect(colour = 'white'), 
        legend.background = element_rect(colour = "black")) +
    ggtitle("Sample Size vs. Mean Difference by Power") +
    theme(panel.border = element_blank(), axis.line = element_line()) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-28T11:44:42.863

`axis.line()`似乎不再工作了。而是使用`axis.line.x()`和`axis.line.y()`

因此，将其添加到您的情节中：

```
... + theme(panel.border = element_blank(),
axis.line.x = element_line(size = 0.5, linetype = "solid", colour = "black"),
axis.line.y = element_line(size = 0.5, linetype = "solid", colour = "black")) + ... 
```

会成功的。

# android - 检查位图中的单个像素，如何存储位图？

> ID：12883393
> 
> 赞同：2
> 
> 时间：2012-10-14T15:00:04.647
> 
> 标签：android

我正在做一个应用程序，我需要检测用户是否在 MapView 上选择陆地或海上的经度/纬度对。我可以通过向 Google 地图服务发送请求来回答这个问题，但我希望它也可以离线工作。所以我想出了两种可以发挥作用的方法，而且由于我在位图与内存区域上相当绿色，我想我会得到你的意见。

主要思想是我正在存储我想要覆盖的地图区域的一个小的黑白位图（比如 200x200 像素）。当用户选择经度/纬度对时，该对将转换为一组 x,y 像素，我检查像素坐标是指向黑色像素（陆地）还是白色像素（海/水）。到目前为止，这是我提出的两种方法。

**选项 A**

当用户即将选择长/纬度对时延迟加载位图并用于[`getPixel()`](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixel%28int,%20int%29)检查它是在陆地还是海上。保持对图像的弱引用，让它在 GC 出现时被垃圾收集。

**选项 B**

将位图的每个像素坐标对保存在 SQLite 数据库中，并在用户每次要选择长/纬度对时进行查找。

我猜**A**在速度方面是最好的（首先忽略从磁盘读取位图的开销），但是在电池方面将位图保存在内存中是否成本高昂？

如果您对如何执行此操作有任何其他建议，那么我很乐意在这里:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:05:45.633

正如您所说，选项 A 是最快的，但我很困惑为什么您认为使用位图会影响电池。

手机中的所有内存始终包含 1 或 0。1 和 0 之间的功率差异非常小（我的意思是很小），但我们可以假设内存有数百兆字节或千兆位1 和 0 的随机 50/50 分布。加载位图的内存在加载之前是 1 和 0，在加载之后是 1 和 0。我怀疑，在没有测量的情况下，从内存加载位图的影响（因为这确实使用了电源，而不是简单地保持加载）远小于 SQL 方法将使用的等效内存读取数量。

因此，我的结论是保持位图加载对电池没有影响，首选选项 A。

[编辑] 对您的问题进行了更多思考后，您实际上是在问“哪个使用更多功率”，从加载的位图中读取像素还是查询 SQLite 表？

# c++ - 在 cpp 中传递双指针时编译错误

> ID：12883394
> 
> 赞同：-1
> 
> 时间：2012-10-14T15:00:10.103
> 
> 标签：c++, pointers

```
#include<cstdio>
#include<iostream>
#include<cstring>

using namespace std;

void f(char **x)
{
    (*x)++;
    **x = 'a';
}    

int main()
{
    char str[]="hello";
    f(&str);
    cout << str << endl;
    return 0;
} 
```

请告诉我为什么这个程序给出编译错误。我正在使用 g++ 编译器

```
Error :temp1.cpp:16:8: error: cannot convert ‘char (*)[6]’ to ‘char**’ for 
       argument ‘1’ to ‘void f(char**)’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:13:48.593

数组可以隐式转换为指针，但这**并不意味着隐式的“指针等效”已经存在。**

您希望这`f(&str);`将隐式创建指向该指针的指针`str` **和**指向该指针的指针。

这个小的（工作）变化说明了这一点：

```
int main()
{
    char str[]="hello";
    char *pstr = str;        // Now the pointer extists...
    f(&pstr);                // ...and can have an address
    cout << str << endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:13:12.927

您正在将常量 char 的指针传递给函数，但在函数中您将其作为指针的指针。那就是问题所在。我在下面评论了问题所在。 *[离题但注意：数组和指针是不同的概念。]*

```
#include<cstdio>
#include<iostream>
#include<cstring>

using namespace std;

void f(char **x)  //**x is pointer of pointer
{
    (*x)++;
    **x = 'a';
}    

int main()
{
    char str[]="hello";
    f(&str); //You are passing pointer of constant char.
    cout << str << endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:15:30.040

你的函数会遇到一个严重的问题，`f`因为`&str`两者`&str[0]`都评估为相同的值......正如其他海报所指出的那样，这些操作指向不同的*类型*，但实际的指针 r-value 将是相同的。因此，当您尝试对指针`f`进行双重取消引用时，即使您尝试使用强制转换之类的东西来消除类型差异并允许编译发生错误，您也会遇到段错误。这是因为你永远不会得到一个指向指针的指针......事实上和评估相同的指针值意味着双重取消引用实际上试图将值用作指针值，这是行不通的。`char**``x``&str``&str[0]``char``str[0]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T15:18:55.883

您的问题是您将数组视为指针，而实际上它们不是。数组**衰减**为指针，在这种情况下，它不会。你传入的是 a`char (*)[6]`当它期望 a 时`char **`。这些显然不一样。

将您的参数更改为`char (*x)[6]`（或使用带有大小参数的模板）：

```
template <std::size_t N>
void f(char (*x)[N]) 
```

进入后，您尝试增加 x 指向的内容。您不能递增数组，因此请改用实际指针：

```
char *p = *x;
p++;
*p = 'a'; 
```

全部放在一起，（[示例](http://liveworkspace.org/code/dee3619f880e88dd92f0b7be7a98b5cf)）

```
template <std::size_t N>
void f(char(*x)[N])
{
    if (N < 2) //so we don't run out of bounds
        return;

    char *p = *x;
    p++;
    *p = 'a';
} 
```

# c# - 如何创建 Expression.Lambda 类型的 lambda 表达式 >? 动态的

> ID：12883398
> 
> 赞同：0
> 
> 时间：2012-10-14T15:00:55.947
> 
> 标签：c#, asp.net-mvc, lambda, expression-trees

我正在尝试`Expression.Lambda<Action<Controller>>`动态创建类型的 lambda 表达式。

例如：`x => x.Index()`

```
var body = ???
Expression<Action<Controller>> action = Expression.Lambda<Action<Controller>>(body); 
```

我有控制器类型 (Type) 和控制器操作 (MemberInfo)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:26:16.830

如果我正确理解您的问题，您将使用[`Expression.Call()`](http://msdn.microsoft.com/en-us/library/bb349020.aspx). 就像是：

```
Expression<Action<T>> CreateCallExpression<T>(MethodInfo method)
{
    var parameter = Expression.Parameter(typeof(T), "x");
    return Expression.Lambda<Action<T>>(
        Expression.Call(parameter, method), parameter);
} 
```

# ruby-on-rails-3.1 - rake db:seed 导致堆栈级别太深，为什么？

> ID：12883401
> 
> 赞同：1
> 
> 时间：2012-10-14T15:01:24.060
> 
> 标签：ruby-on-rails-3.1, rake

当我尝试运行时，`rake db:seed --trace`出现此错误：

```
rake aborted!
    stack level too deep 
```

如下：

```
/home/sam/.rvm/rubies/ruby-1.9.3-p0/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /home/sam/.rvm/gems/ruby-1.9.3-p0@dcaclab/bin/rake db:seed --trace
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/version.rb:2: warning: already initialized constant VERSION
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/version.rb:5: warning: already initialized constant MAJOR
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/version.rb:5: warning: already initialized constant MINOR
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/version.rb:5: warning: already initialized constant BUILD
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/version.rb:5: warning: already initialized constant PATCH
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/version.rb:6: warning: already initialized constant NUMBERS
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake.rb:27: warning: already initialized constant RAKEVERSION
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/early_time.rb:17: warning: already initialized constant EARLY
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/alt_system.rb:32: warning: already initialized constant WINDOWS
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/application.rb:31: warning: already initialized constant DEFAULT_RAKEFILES
WARNING: Possible conflict with Rake extension: String#ext already exists
WARNING: Possible conflict with Rake extension: String#pathmap already exists
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/task_arguments.rb:77: warning: already initialized constant EMPTY_TASK_ARGS
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/invocation_chain.rb:49: warning: already initialized constant EMPTY
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:9: warning: already initialized constant RUBY
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:86: warning: already initialized constant LN_SUPPORTED
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:16: warning: already initialized constant DEFAULT
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/dsl_definition.rb:150: warning: already initialized constant DeprecatedCommands
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_list.rb:44: warning: already initialized constant ARRAY_METHODS
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_list.rb:47: warning: already initialized constant MUST_DEFINE
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_list.rb:51: warning: already initialized constant MUST_NOT_DEFINE
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_list.rb:55: warning: already initialized constant SPECIAL_RETURN
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_list.rb:61: warning: already initialized constant DELEGATING_METHODS
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_list.rb:364: warning: already initialized constant DEFAULT_IGNORE_PATTERNS
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake/file_list.rb:370: warning: already initialized constant DEFAULT_IGNORE_PROCS
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake.rb:68: warning: already initialized constant FileList
/home/sam/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-0.9.2.2/lib/rake.rb:69: warning: already initialized constant RakeFileUtils
rake aborted!
stack level too deep
/home/sam/.rvm/gems/ruby-1.9.3-p0@dcaclab/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25

Process finished with exit code 1 
```

任何想法 ？

# javascript - 如何从数组中删除重复项 - javascript

> ID：12883405
> 
> 赞同：2
> 
> 时间：2012-10-14T15:01:34.707
> 
> 标签：javascript, arrays

> **可能重复：**
> [从数组中删除重复项](https://stackoverflow.com/questions/9673/remove-duplicates-from-array)

你能帮帮我吗？我有这段代码..

```
 <html>
  <head>
  <title>test</title>
  <script>

  var array = new Array();

  function insert(val){
  array[array.length]=val;
  }

  function show() {
  var string="";
  for(i = 0; i < array.length; i++) {
  string =string+array[i]+' , ';
  }
  if(array.length > 0)
 document.getElementById('result').innerHTML = string;
  }

  function removeDuplicateElement(arrayName)
            {
                var newArray=new Array();
                label:for(var i=0; i<arrayName.length;i++ )
                {   
                    for(var j=0; j<newArray.length;j++ )
                    {
                        if(newArray[j]==arrayName[i]) 
                        continue label;
                    }
                    newArray[newArray.length] = arrayName[i];
                }
                return newArray;
                document.getElementById('result1').innerHTML = newArray;
            }
  </script>

  </head>

  <body>
  <h2>Demo</h2>
  <form name="form1">
  <input id="userinput" type="text" name="Input"/>
  <input type="button" Value="Add" onclick="insert(getElementById('userinput').value),show();"/>
  <input type="button" Value="Substract" onclick="removeDuplicateElement(array);"/>
  </form>
   <textarea style="border:1px solid #B3B3B3; width:218px;" rows="2" cols="30" type="text"  id="result"></textarea>
   <textarea style="border:1px solid #B3B3B3; width:218px;" rows="2" cols="30" type="text"  id="result1"></textarea>
  </body>
</html> 
```

我试图实现我在互联网上找到的删除重复功能，但没有成功。（见下文）我做错了什么？

```
function removeDuplicateElement(arrayName)
{
  var newArray=new Array();
  label:for(var i=0; i<arrayName.length;i++ )
  {  
      for(var j=0; j<newArray.length;j++ )
      {
          if(newArray[j]==arrayName[i]) 
          continue label;
      }
      newArray[newArray.length] = arrayName[i];
  }
  return newArray;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:08:22.590

一些（希望）有用的代码提示：

1.  `new Array()`除非您想制作一个固定大小的数组（不寻常），否则不要使用。改为使用`[]`。
2.  `arr.push(item)`和 是一样的`arr[arr.length] = item`，除了更好。
3.  函数中的那个循环`show`可以使用`array.join(' , ')`.

无论如何，实际的问题在这里：

```
return newArray;
            document.getElementById('result1').innerHTML = newArray; 
```

`return`退出函数。看起来你想取出`return`零件。

...但无论如何，该代码非常浪费。我会把它写成：

```
function removeDuplicateElements(array) {
    document.getElementById('result1').innerHTML =
        array.filter(function(item, index) {
            return array.indexOf(item) !== index;
        });
} 
```

...假设现代浏览器支持`Array#indexOf`和`Array#filter`.

# php - 在 Symfony2 上自定义表单字段名称

> ID：12883406
> 
> 赞同：0
> 
> 时间：2012-10-14T15:01:39.103
> 
> 标签：php, forms, symfony

Symfony2 中有没有一种方法可以自定义 Type 类的字段名称？

我试过这样的事情：

```
<?php

// src/Fuz/TypesBundle/Form/Editor/GeneralType.php

namespace Fuz\TypesBundle\Form\Editor;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Fuz\TypesBundle\Entity\Editor\GeneralData;

class GeneralType extends AbstractType
{

    /**
     * Root node ID
     *
     * @access private
     * @var rootId
     */
    private $rootId;

    /**
     * Current node ID
     *
     * @access private
     * @var rootId
     */
    private $currentId;

    /**
     * Constructor
     *
     * @access public
     * @param string $rootId
     * @param string $currentId
     */
    public function __construct($rootId, $currentId)
    {
        $this->rootId = $rootId;
        $this->currentId = $currentId;
    }

    /**
     * General form fields
     *
     * @access public
     * @param FormBuilder $builder
     * @param array $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('useField', 'text',
           array (
                'required' => false,
                'label' => 'types.general.use_field',
                'read_only' => ($this->rootId == $this->currentId),
                'attr' => array(
                        'name' => "useField{$this->currentId}",
                )
        ));
        // ...
    }

    /**
     * Form name
     *
     * @access public
     * @return string
     */
    public function getName()
    {
        return 'General';
    }

} 
```

但是我的字段仍然有`General[useField]`名称（General 是我的表单名称）。

我也想继续验证工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:01:39.103

好吧，我在发布问题之前找到了答案，但我认为这对其他人可能有用。

我的错误是我试图动态更改字段名称，但正确的方法是更改​​表单名称。

```
/**
 * Form name
 *
 * @access public
 * @return string
 */
public function getName()
{
    return 'General' . $this->currentId;
} 
```

这样，我的字段名称就变成了 :`General80wm4kxsss[useField]`并且是唯一的。

# html - 谷歌翻译顶部始终保持不变

> ID：12883407
> 
> 赞同：1
> 
> 时间：2012-10-14T15:01:41.867
> 
> 标签：html, google-translate

当我使用谷歌翻译时，即使我点击链接转到另一个页面，顶部也始终保持不变。这怎么可能？什么 HTML 可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:05:54.217

我不确定您在说什么，但是网站使用了几种技巧来实现页面切换而无需重新加载。

iframe 可用于在您的页面中包含其他页面，这在某些情况下可以提供您正在寻找的效果。

许多现代页面将使用 ajax，这将通过异步 javascript 调用加载一些数据，然后用于填充页面的一部分，这意味着不需要刷新整个页面。

# mysql - 一起添加多个 MySQL 条目

> ID：12883412
> 
> 赞同：1
> 
> 时间：2012-10-14T15:02:59.077
> 
> 标签：mysql, addition

我有一个包含帖子的数据库，为了使其更简单，假设我有两个字段“用户”和“评分”。我想从用户的所有帖子中选择所有评级：“乔”并将它们加在一起并显示它们。然后我想对其他用户做同样的事情，产生一个排行榜。我不知道数据库中用户的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:03:52.160

下面的查询只产生一个结果，即用户 JOE 的总费率

```
SELECT SUM(Rate) totalRate
FROM tableName
WHERE user = 'joe' 
```

这将向用户显示最高费率，因为它是根据 totalRate 降序排序的

```
SELECT user, SUM(rate) totalRate
FROM tableName
-- WHERE user = 'JOE'
GROUP BY user
ORDER BY totalRate DESC 
```

# gwt - 将 GWT 应用程序部署到 Google Play

> ID：12883416
> 
> 赞同：3
> 
> 时间：2012-10-14T15:03:27.937
> 
> 标签：gwt, cordova, google-play, mgwt

我想将我的 GWT 应用程序部署到 Google Play（未来可能还有 App Store）。我不需要在我的应用程序中使用本机功能。只需用户名、密码，我将显示一份报告。

我找到了 mgwt 项目（http://code.google.com/p/mgwt/）。mgwt + gwt phonegap 是最好的方法吗？

谷歌博客：http: [//googlewebtoolkit.blogspot.com.es/2012/07/gwt-support-for-mobile-app-development.html](http://googlewebtoolkit.blogspot.com.es/2012/07/gwt-support-for-mobile-app-development.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:01:19.920

我实际上构建了 mgwt 和 gwt-phonegap，所以我很难说这是最好的方法，因为我有点偏见。

但我能说的是，我认识很多开发人员，他们使用 mgwt 和 gwt-phonegap 构建了他们的应用程序，并将其放到了 play store 和 app store 中。该框架工作得非常好。由于我是 GWT 指导委员会的成员，我当然希望我知道如何构建 GWT 框架，所以 mgwt 应该做的大部分事情都恰到好处。

如果您正在寻找其他 mgwt 开发人员，请查看我们的邮件列表：[https](https://groups.google.com/group/mgwt) ://groups.google.com/group/mgwt并随时查看[http://www.m-gwt.com](http://www.m-gwt.com)

# jquery - Jquery 图片上传器和大小调整器

> ID：12883420
> 
> 赞同：0
> 
> 时间：2012-10-14T15:04:26.477
> 
> 标签：jquery, html, css

我想知道是否可以执行以下操作：

上传图片 将图片调整为固定宽度 保存固定宽度图片，丢弃原图

我将在我的网站上进行大量图像上传，并且我正在尝试将调整大小操作移动到客户端大小以减少服务器上的负载。

我看到的所有选项似乎都使用 Jquery 作为前端，而调整大小实际上仍然是使用 php 在服务器端完成的。

# sas - 为什么输出传递系统无法选择我指定的输出？

> ID：12883422
> 
> 赞同：2
> 
> 时间：2012-10-14T15:04:27.707
> 
> 标签：sas

我有一小段 SAS 9.3 代码输出一些卡方统计数据。我`ods select ChiSq`用来只选择我需要的输出表，但 SAS 返回此警告：

> 警告：未创建输出“ChiSq”。确保输出对象名称、标签或路径拼写正确。此外，验证是否使用了适当的过程选项来生成请求的输出对象。例如，验证没有使用 NOPRINT 选项。

这是代码：

```
ods html;

data flu;
input gender treatmentcourse improvement;
datalines;
012
000
110
112
002
002
012
000
000
012
111
011
002
101
002
011
100
100
001
110
110
011
001
010
101
001
000
001
110
100
;

proc format;
value treatmentformat 0 = "minor"
                      1 = "minor"
                      2 = "major";

ods trace on;
ods select ChiSq;
proc freq data = flu order = data;
tables treatmentcourse * improvement /chisq cmh;
format treatmentcourse treatmentformat.;
run;
ods trace off;
ods select all;
ods html close; 
```

我可以清楚地看到`ods trace on;`该`ChiSq`表包含在输出中，但 SAS 忽略该`ods select`语句并显示所有表。

在数据行中，第一列是性别，男性为 0，女性为 1。如果患者服用药物，第二列为 0，如果患者服用安慰剂，则为 1。第三列是 0 - 2 的等级，0 表示流感症状没有改善，2 表示有很大改善。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:27:12.630

我认为您的问题是您将自定义格式放在错误的变量上。试试这个：

```
proc freq data = flu order = data;
   tables treatmentcourse * improvement /chisq cmh;
   format improvement treatmentformat.;
run; 
```

如果您更仔细地查看日志，您应该会看到没有创建统计信息的 SAS NOTE。

更新：为了安全起见，您还应该在您的步骤`run;`之后发表声明。`proc format`

# python - 如何在python中解析重组文本？

> ID：12883428
> 
> 赞同：26
> 
> 时间：2012-10-14T15:05:40.380
> 
> 标签：python, parsing, dom, restructuredtext

是否有任何模块可以将重组文本解析为树模型？

docutils 或 sphinx 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2018-02-10T10:28:31.170

我想扩展 Gareth Latty 的回答。“你可能想要的是解析器`docutils.parsers.rst`”是答案的一个很好的起点，但下一步是什么？即：

> 如何在python中解析重组文本？

以下是 Python 3.6 和 docutils 0.14 的确切答案：

```
import docutils.nodes
import docutils.parsers.rst
import docutils.utils
import docutils.frontend

def parse_rst(text: str) -> docutils.nodes.document:
    parser = docutils.parsers.rst.Parser()
    components = (docutils.parsers.rst.Parser,)
    settings = docutils.frontend.OptionParser(components=components).get_default_values()
    document = docutils.utils.new_document('<rst-doc>', settings=settings)
    parser.parse(text, document)
    return document 
```

并且可以使用例如下面的方法处理生成的文档，这将打印文档中的所有引用：

```
class MyVisitor(docutils.nodes.NodeVisitor):

    def visit_reference(self, node: docutils.nodes.reference) -> None:
        """Called for "reference" nodes."""
        print(node)

    def unknown_visit(self, node: docutils.nodes.Node) -> None:
        """Called for all other node types."""
        pass 
```

以下是如何运行它：

```
doc = parse_rst('spam spam lovely spam')
visitor = MyVisitor(doc)
doc.walk(visitor) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-14T15:14:31.867

[Docutils](https://pypi.python.org/pypi/docutils)确实包含执行此操作的工具。

您可能想要的是解析器`docutils.parsers.rst`

有关所涉及内容的详细信息，请参阅[此页面](http://docutils.sourceforge.net/docs/dev/hacking.html#parsing-the-document)。也有一些例子[`docutils/examples.py`](https://sourceforge.net/p/docutils/code/HEAD/tree/trunk/docutils/docutils/examples.py)- 特别是检查`internals()`功能，这可能是有趣的。

# javascript - 更新/返回 ViewModel 回到服务器

> ID：12883429
> 
> 赞同：2
> 
> 时间：2012-10-14T15:05:45.033
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, mvvm, breeze

作为 web 开发和 MVC4 的新手，我反复遇到相同的设计问题，希望有人能告诉我什么是正确的/支持的/等等。解决方案在 MVC4 世界中是什么：

基本上，我已经喝了视图模型koolaid，并且我的项目中的每个视图都有视图模型，其中大部分是在单页应用程序的某些东西上动态更新的部分子视图。生成/渲染视图的一切进展顺利，然后用户在客户端更新了许多值，是时候更新服务器了。

例如，假设它是一个简单的容器视图模型：

```
public class Data {
  public List<Prop> Props { get; set; }
}

public class Prop {
  public string Id { get; set; }
  public int Value { get; set; }
} 
```

因此，假设用户正在向容器添加新道具。如何将修改后的对象返回到服务器？

到目前为止：如果服务器实时同步很重要，我可以在服务器上的每次添加/更新时进行调用，然后在客户端上保持同步，或者只是让服务器返回更新后的视图。对于像这样的简单场景，一切都很好。

但是我经常发现自己希望客户端能够操纵对象（通过视图/js/等），并且在完成并提交之前我真的不需要在服务器上进行更新。我真正想要的是能够将对象与渲染视图一起传递，通过 Javascript 与之交互，然后在完成所有操作后将对象传递回控制器。我该怎么做？（抱歉花了一段时间才明白这一点！）

我见过的替代品：

-- Quick & Dirty ( [Encode viewmodel properties to JavaScript in Razor](https://stackoverflow.com/questions/9741445/encode-viewmodel-properties-to-javascript-in-razor) )：这肯定会将对象放在客户端的 javascript 中，尽管只是将整个对象序列化到客户端 html 中而不进行任何验证似乎有点骇人听闻，等等. （虽然我最终意识到这就是对象如何使它下降，但似乎你绕过了整个 MVC4 对象处理/解析。）

-- Upshot.Js 曾经似乎很有希望得到 MS 支持，但似乎已经死[了：Upshot.js 的当前状态](https://stackoverflow.com/questions/12238855/current-status-of-upshot-js)

-- Breeze.js ( [http://www.breezejs.com/](http://www.breezejs.com/) ) 似乎是一种接管那里的尝试，尽管我担心它是相当新的并且还没有被广泛采用。

最终，让我觉得我错过了一个明显的替代方案的事情是，所有的部分都已经明确地内置在 MVC4 中。例如，当您使用表单视图时，您的字段将数据绑定到控件，并且在提交表单时，会创建一个并行 JSON 对象，将其发送到控制器，然后为您解析为您的 POCO ViewModel 对象。这基本上就是我正在寻找的往返（尽管保留了完整的 JSON 对象客户端）。处理这个问题的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:09:08.803

Knockout 实际上正是我正在寻找的（或另一个客户端 MV* 框架），我根本不知道如何使用它。

感谢@Mathletics 和其他一些 SO 解决方案为我指明了正确的方向，尤其是：[如何将 knockout.js 与 ASP.NET MVC ViewModels 一起使用？](https://stackoverflow.com/questions/11055336/how-to-use-knockout-js-with-asp-net-mvc-viewmodels)

关键是真的要使用ko.mapping库，在服务端对模型进行Json编码或者序列化。特别是，这个脚本块在强类型部分视图中对我来说效果很好：

```
<script type="text/javascript">
function viewModel() {
    // Additional Knockout Here    
};

var jsonModel = '@Html.Raw(JsonConvert.SerializeObject(this.Model))';
var mvcModel = ko.mapping.fromJSON(jsonModel);

var myViewModel = new viewModel();
var g = ko.mapping.fromJS(myViewModel, mvcModel);

ko.applyBindings(g);
</script> 
```

然后你就可以正常使用 Knockout 了：

```
<div class="row">    
    <div class="span3">
        <h3>Bound Value:</h3>
        <span data-bind="text: PropertyName"></span>
    </div>
</div> 
```

（这需要 knockout.js、knockout.mapping.js 和 Newtonsoft.Json - 尽管 Json.Encode 也同样有效。）

将对象传回去就很容易了。正常更新您的对象，当您将其传递回控制器时，您已经准备好 Json 对象，并将按正常方式解析以作为服务器端的 POCO 视图模型传回，完成这一轮旅行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:45:47.403

根据您的描述，我可以理解您需要将对象集合传递给控制器​​，然后更新集合。模型绑定到集合将使您的事情变得更容易。

当绑定到单个字段的集合时，它变得更容易，但是当你想绑定到对象的集合时，它变得有点棘手。有 2 个选项顺序绑定和非顺序绑定。

**顺序绑定：**

这是将发布表单的控制器操作（HTTP POST 操作）

```
public ActionResult UpdateProps(ICollection<Prop> Props) {
    return View(Props);
}

form method="post" action="/Home">    
    <input type="text" name="[0].Id" value="1001" />
    <input type="text" name="[0].Value" value="Prop1" />        

    <input type="text" name="[1].Id" value="" />
    <input type="text" name="[1].Value" value="NewProp" /> 

    <input type="submit" />
</form> 
```

当表单发布时，值将类似于

> *[0].Id=1001&[0].Value=Prop1&[1].Id=&[1].Value=NewProp*

您可以看到索引 [0] 和 [1]。模型绑定器将根据索引正确地对对象进行分组，您将获得预期的集合。发布后，您的操作将在 ICollection Props 中获得 2 个对象。一个 ID 为 1001，另一个是新添加的。

现在您会注意到，如果您动态添加新道具，那么您需要使用脚本正确索引它。或者，如果这对您来说很难，那么您可以以上述格式发布它们，而不是索引元素。您需要解析元素并使用脚本发布表单。数据应按索引排列。解析为您提供了另一个优势，即您可以只发布所需的元素，即新添加或修改的元素，而不是全部发布，从而节省有效负载。

在**非顺序绑定**而不是数字序列系列中，索引是唯一值，如下所示：

> *[PropId1001].Id=1001&[PropId1001].Value=Prop1&[PropIdTemp233].Id=""&[PropIdTemp233].Value=NewProp*

# mysql - MySQL触发器：更新下一行时间戳

> ID：12883431
> 
> 赞同：0
> 
> 时间：2012-10-14T15:05:52.080
> 
> 标签：mysql, triggers, sql-update

`Ready`当我更新当前行的-column时，我想更新下一行的时间戳。

例如，我将

```
UPDATE `Projects` SET `Ready` = 1 WHERE `Id` = 1
```

应该触发下面看到的触发器

```
UPDATE `Projects` SET `Started` = CURRENT_TIMESTAMP() WHERE `Id` = `Id` + 1
```

但是如何使用 MySQL 来实现`TRIGGER`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:18:51.793

我认为这是不可能的，因为当您触发触发器时，它会更新同一个表，并会导致再次触发同一个触发器，从而导致无限递归。

# iphone - UIBarButtonItem 在隐藏 UIToolbar 后消失，在 UIActionsSheet 出现后重新出现

> ID：12883440
> 
> 赞同：0
> 
> 时间：2012-10-14T15:07:42.357
> 
> 标签：iphone, objective-c, ios, xcode, uitoolbar

我有一个显示在当前顶部 UIWindow 上的 UIToolbar。在我显示某个 UIViewController（在推送中）之前，我通过从窗口中删除它来隐藏 UIToolbar。当我回来时，我试图通过将 UIToolbar 添加回顶部 UIWindow（使用 addSubview）来重新显示 UIToolbar。发生的情况是工具栏中的按钮消失了，它看起来是空的，但是在显示 UIActionSheen 并关闭它之后，所有按钮再次出现。

问题是什么？

谢谢，约夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:24:20.147

我认为您正在编写代码`viewWillAppear`或`viewDidAppear`尝试编写代码`viewDidLoad`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
} 
```

# linux - 时钟（）的实现

> ID：12883441
> 
> 赞同：1
> 
> 时间：2012-10-14T15:07:54.570
> 
> 标签：linux, time, clock

我正在通过各种机制的stackoverflow线程来计算进程的CPU时间。

内部是如何`clock()`实现的？它是否使用`rdtsc()`（如果是这种情况，那么它对内核之间的迁移很敏感）。

此外，`getrusage()`实施 ? 它也依赖于 TSC 吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T05:27:13.943

内核以刻度大小跟踪进程的 CPU 利用率。

两者`clock()`都`getrusage()`基于这些。

时钟由内核使用采样方法由进程累积，其中内核接收时钟的硬件中断并执行时钟处理程序，将时钟添加到当前运行的进程中。至少，这是我上次查看时的工作方式。

所以，`rtdsc`根本没有发挥作用 - 这是一件好事，因为`rdtsc`不能跨 CPU 准确测量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:26:24.197

您可以轻松浏览一些 libc 代码。这里是[时间/](http://git.musl-libc.org/cgit/musl/tree/src/time)目录`musl-libc`

在几个库中，一些低级时序系统调用正在使用[VDSO](http://lwn.net/Articles/342018/)来避免支付实际系统调用的成本（从用户空间到内核并返回），因此以某种方式使用 RTDSC。

但我很惊讶你问。如果是好奇，就去研究一下自由软件实现的源代码吧。否则，请相信规范和实现。

^(由于实施和系统特定，血腥细节可能很复杂。实际的实现可以在运行时动态调整（例如通过内核中的 VDSO 设置）。)

# php - 动态url mysql php 如何

> ID：12883448
> 
> 赞同：0
> 
> 时间：2012-10-14T15:08:16.257
> 
> 标签：php, mysql, url, dynamic

我正在一个 wordpress 网站上构建一个表格，该表格显示从一个表格中排序的数据。

我无法正确地将标题更改为 URL，该 URL 可以从同一个数据库中更改（slug）。

基本 url 保持不变，只有 slug 更改，即[wwww.thesite.com/job/view/](http://wwww.thesite.com/job/view/) --- 然后是 slug。

到目前为止，这是我的代码。

```
function dbTEST($atts, $content = null) {

// Get all the data from the "job board" table

$result = mysql_query("SELECT * FROM wpjb_job WHERE job_country='72' ORDER BY job_title") 
or die(mysql_error());  

echo "<table border='1'>";
echo "<tr> <th>Job</th> <th>Company</th> </tr>";

// keeps getting the next row until there are no more to get

while($row = mysql_fetch_array( $result )) {

    // Print out the contents of each row into a table

    echo "<tr><td>"; 
#---------- I need this job_title to url link to the job_slug
    echo $row['job_title'];
    echo $row['job_slug'];
    echo "</td><td>"; 
    echo $row['company_name'];
    echo "</td></tr>"; 
} 

echo "</table>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:09:51.870

试试这个：

```
echo "<a href=wwww.thesite.com/job/view/".$row['job_slug'].">".$row['job_title']."</a>" 
```

# ruby-on-rails - Rails for Zombies 课程有用吗？

> ID：12883453
> 
> 赞同：6
> 
> 时间：2012-10-14T15:08:58.810
> 
> 标签：ruby-on-rails, ruby, rails-for-zombies

[CodeSchool](http://www.codeschool.com/)上的[Rails for Zombies](http://railsforzombies.org/)课程有用吗？

我在想天气值得我花时间，花时间，如果它真的提供有用的资源？

到目前为止，我还没有完成任何其他[CodeSchool](http://www.codeschool.com/)课程。你觉得这个平台怎么样？是否值得为其他付费课程付费？

是否有任何高质量的免费在线 Web 开发课程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T15:21:20.337

它只是为了让您对令人敬畏的 Rails 功能感到兴奋 :) 它将为您提供 Ruby 和 Rails 的基础知识，仅此而已。

实际上，该框架要复杂得多且耗时得多。如果您真的想使用它，那么该课程可能会展示它的一些最佳功能。
无论如何，如果您是 Ruby 或 Rails 初学者，值得一试。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T15:31:09.453

当前的 ruby​​/rails 生态系统最好的一点是那里有大量的学习资源选择，任何人都应该不难找到适合他们需求/能力/...的学习资源。

免费试用 Rails For Zombies 课程和其他一些 CodeSchool 课程，并自行决定是否喜欢它们，并想参加付费课程。

我偏爱[Ruby on Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)，因为它是学习使用 Rails 进行 Web 开发的最佳免费资源。该书可在线免费获取。它提供了对使用 ruby​​/rails 构建 Web 应用程序时所涉及的所有概念和工具的最佳介绍。

[RailsCasts](http://railscasts.com/) - 免费版和高级版 - 将是我培养技能的下一个建议。

[查看有关学习 Ruby on Rails 的最佳在线（免费）资源](https://stackoverflow.com/questions/1993855/best-online-free-resources-for-learning-ruby-on-rails)的答案？了解更多替代方案，并选择适合您的方案。

ruby 社区中的相当多的人对[Why 的 ruby​​ 尖锐指南](http://mislav.uniqpath.com/poignant-guide/book/chapter-1.html)作为学习 ruby​​ 的最佳资源之一赞不绝口，但它对我没有用。在花了一点时间之后，我继续[学习编程](http://pine.fm/LearnToProgram/)，结果证明它非常适合我的风格:-)

# c# - 如何使用 linq 对嵌套数据进行排序

> ID：12883454
> 
> 赞同：-3
> 
> 时间：2012-10-14T15:09:07.913
> 
> 标签：c#, linq

我有一个这样的类别表：

```
id parentid Title     
1  0        Parent1   
2  1        Child1        
3  0        Parent2
4  3        Child2
5  1        anotherChild1
6  3        anotherChild2 
```

如何按此顺序对其进行排序：

```
Parent1
  child1
  anotherchild1
Parent2
  child2
  anotherchild2 
```

并将订单保存到另一个称为排序索引的字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:02:27.587

这应该适用于任何层次结构

```
public void CustomSort()
{
    List<MyNode> nodes = new List<MyNode>();
    nodes.Add(new MyNode() { Id = 5, ParentId = 1, Title = "Anotherchild1" });
    nodes.Add(new MyNode() { Id = 6, ParentId = 3, Title = "Anotherchild2" });
    nodes.Add(new MyNode() { Id = 7, ParentId = 6, Title = "Anotherchild3" });
    nodes.Add(new MyNode() { Id = 1, ParentId = 0, Title = "Parent1" });
    nodes.Add(new MyNode() { Id = 2, ParentId = 1, Title = "Child1" });
    nodes.Add(new MyNode() { Id = 3, ParentId = 0, Title = "Parent2" });
    nodes.Add(new MyNode() { Id = 4, ParentId = 3, Title = "Child2" });

    Func<MyNode, List<int>> hierarchy = null;
    hierarchy = n =>
    {
        var n2 = nodes.FirstOrDefault(x => x.Id == n.ParentId);
        if (n2 != null) return hierarchy(n2).Concat(new List<int>() { n.Id }).ToList();
        return new List<int>() { n.ParentId,n.Id };
    };

    var debug = nodes.Select(x=>hierarchy(x)).ToList();

    var sortedList = nodes.OrderBy(n => String.Join(",", hierarchy(n).Select(x=>x.ToString("X8"))))
                          .ToList();
}

class MyNode
{
    public int Id;
    public int ParentId;
    public string Title;
} 
```

* * *

```
Id  PId Title              hierarchy (key to sort)
1   0   Parent1             0 1
2   1   Child1              0 1 2
5   1   Anotherchild1       0 1 5
3   0   Parent2             0 3
4   3   Child2              0 3 4
6   3   Anotherchild2       0 3 6
7   6   Anotherchild3       0 3 6 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T19:15:15.933

如果您的层次结构只有两个级别，那么您可以将父母与孩子一起加入，将结果列表展平，然后包括每个人的索引。

```
var parents = people.Where(p => p.ParentId < 1).ToList();
var children = people.Where(p => p.ParentId >= 1).ToList();

var ordered = (from parent in parents
               join child in children on parent.Id equals child.ParentId into childGroup
               from person in (new [] { parent }).Concat(childGroup)
               select person)
              .Select((person, sortedIndex) => new { person, sortedIndex }); 
```

# php - 为什么 PHP 的“超级全局”变量被称为“超级全局”？

> ID：12883455
> 
> 赞同：-1
> 
> 时间：2012-10-14T15:09:10.027
> 
> 标签：php

我的朋友告诉我，它们被称为“超级全局”，因为它们保存在 php 启动之前可用的数据。

例如：

*   在 url:`?fname=somename`中，数据在`$_GET`PHP 外部可用，在 PHP 启动之前的 URL 中。
*   在一个 form:`<input type="hidden" name="firstname" value="somename" />`中，`$_POST`在 PHP 启动之前发布的数据中的数据是可用的。
*   在 cookie 中：`$_COOKIE`数据保存在您计算机的某个位置，因此在 PHP 启动之前就可以使用。

我朋友说的对吗？如果他错了，那么**超全局变量与全局变量有什么区别？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:13:01.527

不，它们是“超全局”的，因为它们在所有范围内都可用，无需使用[`global`](http://php.net/manual/en/language.variables.scope.php)关键字将它们导入当前范围。

# php - 数组上的foreach参数无效？

> ID：12883466
> 
> 赞同：0
> 
> 时间：2012-10-14T15:10:29.063
> 
> 标签：php, arrays, foreach

我完全迷路了，我有这个代码：

```
 $val = explode('?',$_POST['data']);
    print_r($val);
    foreach($val as &$v) {
       //some code
    } 
```

结果是这样的：

```
Array ( [0] => 1|1|41|1|1|1 [1] => 1|1|31|1|1|1 [2] => 1|1|21|1|1|3 ) 
Warning: Invalid argument supplied for foreach() in test.php on line 131 
```

我真的不明白我做错了什么......

**PS**实际上我添加`print_r`只是为了看看有什么问题，我真的不需要它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:16:07.293

您的代码正在更改`$val`foreach 中的某个位置。

此代码运行良好，请参见[代码路径](http://codepad.org/6ZsxuFRi)：

```
$_POST['data'] = '1|1|41|1|1|1?1|1|31|1|1|1?1|1|21|1|1|3';

$val = explode( '?', $_POST['data'] );
print_r( $val );
foreach ( $val as &$v ) {
  echo $v;
} 
```

# haskell - 总结用 Haskell 编写的迷你语言，“while”语句的问题

> ID：12883467
> 
> 赞同：0
> 
> 时间：2012-10-14T15:10:31.840
> 
> 标签：haskell, mini-language

我之前问了一个类似的问题，并解决了最初的问题。我遇到了另一个错误隐藏的附加问题。我能够使诸如“if”语句之类的语句正常工作，但不能使“while”语句正常工作。当评估“stmt”时，必须更新环境。这适用于我的“if”语句，如下所示：

```
exec :: Env -> Stmt -> Env
exec env (If c t e) = 
    exec env ( if eval env c == BoolLit True then t else e ) 
```

评估看起来像这样：

```
eval :: Env -> Expr -> Expr
eval _ (IntLit i) = IntLit i
eval _ (BoolLit b) = BoolLit b
eval env (Var n) = lookupVar env n
eval env (BinOp op a b) = primEval op (eval env a) (eval env b) 
```

正在解析的文件如下所示：

```
x = 1; c = 0;
if (x < 2) c = c + 1; else ; 
```

我尝试让 while 语句工作是这样的：

```
exec env (While c t) = exec env ( if eval env c == BoolLit True then t) 
```

但这会在“）”上产生解析错误。正在解析的文件中的 while 语句的预期格式：

```
x = 1; c = 1;
while (x < 10)
{
  c = c * x;
  x = x + 1;
}
c 
```

我试图了解如何根据这种预期格式返回正确的环境。如果 Haskell 中的 while 语句已经有类似的结构，那就很简单了，但我知道没有这样的结构存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:16:21.270

您的函数中缺少一个`else`子句，它可能应该是：

```
exec env (While c t) = if eval env c == BoolLit True then exec env t else env 
```

要真正让它工作，那就是多次执行主体：

```
exec env (While c t) = if   eval env c == BoolLit True 
                       then exec (exec env t) (While c t)
                       else env 
```

# django - Django 将查询集从views.py 传递给模板

> ID：12883469
> 
> 赞同：0
> 
> 时间：2012-10-14T15:10:46.970
> 
> 标签：django, django-views

我想我在这里遗漏了一些非常简单的东西，但我还没有找到解决方案。我想生成一个页面，其中列出了与特定查询集匹配的所有对象。我尝试了以下操作，从 url 中获取一个值以在 views.py 中生成适当的查询。这个查询在 shell 中产生了预期的输出，但它似乎没有被正确地传递给模板。

在 urls.py

```
url(r'browse/(?P<sourcevolume>\w+)/$', inscription.views.browse_by_volume'), 
```

在views.py

```
def browse_by_volume(request, sourcevolume):
    inscriptions_in_volume = TranslationSource.objects.filter(source=sourcevolume)
    return render_to_response('inscription/volume_browse.html', {'inscriptions_in_volume': inscriptions_in_volume}) 
```

这里有错误，或者我完全错过了这样做的方法吗？谢谢。

# java - Java 和 JSP 真的如此不同吗？

> ID：12883474
> 
> 赞同：0
> 
> 时间：2012-10-14T15:11:47.580
> 
> 标签：java, jsp, utf-8, cross-platform

我计划将我的桌面财务应用程序（用 Delphi 编写）重写为 Web 应用程序，并且正在考虑使用哪种技术。其他可能的要求是将尽可能多的代码传输到共享库，该共享库也可以在应用程序的桌面版本中使用。没有所有权的总成本这样的参数。我可以根据需要重写它。

我需要一种能够原生处理 UTF-8 并连接到 PostgreSQL 以及 Microsoft SQL Server 的跨平台技术。

我已经使用 Ruby on Rails 进行了足够多的编程，并且会说它对商业网站非常有用，但不适合我自己的 Web 应用程序，因为我不喜欢它的“魔力”并且无法用 UTF-8 编写 .rb 文件。

PHP 似乎与 RoR 类似，虽然我没有尝试过。

ASP.NET / .NET MVC 符合我的要求，但它仅适用于 Windows。

所以，我选择了Java。但是他们在 Internet 上说 Java 和 JSP 是不同的技术，我不能将 Java 桌面应用程序转换为 JSP。Java 和 JSP 真的如此不同吗？例如，在 .NET 中，我可以编写一个数据库和业务逻辑库，可以在桌面应用程序和 ASP.NET 应用程序中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:28:55.330

对于您描述的情况，为桌面和 Web 应用程序提供大量共享代码应该很容易。将应用程序视为由 2 层组成：

*   第 1 层：业务逻辑和数据库访问代码，这一层只是纯 java 它不应该依赖任何无法在容器外运行的技术。例如，您可以使用 JPA 进行数据库访问，并使用 Spring 将您的业务逻辑组织成很好的模块化单元。如果您为此层编写了一个全面的测试套件，那么您将确信您的业务逻辑可以正常工作，并且可以更容易地确定错误是 Web 应用程序错误还是桌面错误。
*   第 2 层：UI 逻辑，您将需要该层的两个实例，一个使用 Swing 或 JavaFX 等桌面 UI 技术编写，另一层 UI 层使用 JSP/Servlets、JSF、SpringMVC 等 Web 应用程序编程技术编写。 ... 等等。这个 UI 层将依赖于第 1 层，并且由于第 1 层的综合测试套件，您可以确信它在第 1 层上调用的操作是好的。

至于 Web 开发技术，我建议您考虑 JSP 和 Servlet 的更高级别的框架，因为这将为您节省大量时间。

有可能使用 JavaScript、HTML 5 编写单个 UI 层，这是一个 Web 应用程序，但在许多功能上表现得像一个桌面应用程序。然后，您可以制作产品的桌面版本，该版本基本上启动没有 chrome 的浏览器窗口并在其中运行应用程序。如果您确实选择走这条使用 JavaScript 和 HTML 5 的道路，那么有很多框架可供选择，我建议您在 infoq.com 上观看 ThroneOfJS 会议[http://www.infoq.com/上的视频为了](http://www.infoq.com/throne_of_js/)了解可用的框架，我有偏见的建议是使用 AngularJS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:14:02.957

`Java`并`JSPs`没有什么不同。`JSP`在执行之前被**编译成 Java Servlet**。

**JSP**用于编写 HTML/ASP 之类的处理表示的代码。换句话说，它将表示细节与 Java 编码分开，但最终，服务器将您的 JSP 文件编译成 Java Servlet。

你想写什么`JSP`，都可以通过`Servlet`。

如果您计划在 Servlet 上使用 JSP，请确保您没有在 JSP 本身中编写整个代码，例如从数据库中读取数据。**所有的业务逻辑都应该放在 JAVA 类中，并通过您的 JAVA 类在 JSP 中使用。**如果设计得当，您的 Java 类可以被重用。

如果我对您的理解正确，这就是您要实现`achieve re-usability`的目标，即`application logic`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T15:26:00.460

除了您可以像 .NET 一样重用您的服务、逻辑等之外，它们并没有什么不同。唯一的问题是视图，在java中有很多方法可以做到这一点。如果您选择了 JSP，您将需要编写所有演示文稿（您可以调用您的服务、逻辑等），但是如果您想在桌面 java 应用程序中重用尽可能多的代码，那么将它带到 Web 上也许是您的应该看一下java Applets，它们相对简单地变成java应用程序。

# python - Python - 最大 TCP 连接？

> ID：12883475
> 
> 赞同：-2
> 
> 时间：2012-10-14T15:11:56.780
> 
> 标签：python, tcp, connection

> **可能重复：**
> [每台服务器的套接字连接的实际/硬限制是多少](https://stackoverflow.com/questions/4391847/what-is-the-practical-hard-limit-on-socket-connections-per-server)

当我达到大约 480 个 TCP 连接时，它不接受 + 连接。TCP连接的最大值在哪里？视窗 2008..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:19:58.783

它取决于 Windows 2008 版本，Web 和 Foundation 版本有连接限制，而 Standard、Enterprise 和 Datacenter 则没有。

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:27:49.190

Python 不限制连接。它由底层操作系统和网络堆栈控制/限制。

但是，如果您直接使用 python 的`socket`模块，您可以`socket.setsockopt(level, optname, value)`在绑定到端口之前调整一些参数。

您还可以调整 Windows 注册表设置以启用更多并发连接。请参阅： [http ://technet.microsoft.com/en-us/magazine/2007.12.network.aspx](http://technet.microsoft.com/en-us/magazine/2007.12.network.aspx)

,`TcpNumConnections`和tcp 设置是开始`MaxUserPort`的`EnableConnectionRateLimiting`好地方。

# dart - （Dartlang）如何检测列表视图中的选定项目

> ID：12883477
> 
> 赞同：2
> 
> 时间：2012-10-14T15:12:03.880
> 
> 标签：dart, rikulo

**rikulo.org在**[**http://rikulo.org/resource/js/examples/index-list.html**](http://rikulo.org/resource/js/examples/index-list.html)上有很好的列表视图示例
[](http://rikulo.org/resource/js/examples/index-list.html)

 **在此示例中，如何检测列表中的选定项目？
例如，如果我**单击**或**触摸**“**第 5行”，我如何知道“****第 5 行**”被选中？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:31:07.540

1.  您可以通过以下方式监听每个列表项的 onClick 事件

    item.on.click.add((ViewEvent event) { // 做任何你想做的事，处理选择，添加/删除 CSS 类等 });

2.  或者在列表项中添加一个复选框，并监听其 onCheck 事件。

请注意，Rikulo 现在正在快速开发中，并将增加更多建设。将有一个模型驱动的列表视图来处理选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:59:39.070

这个对我有用：

```
document.onClick.listen((MouseEvent e){
   TableRowElement row = e.toElement;
   print(row.text);
 }); 
```

您可以将文档更改为：query("#table"), queryAll("tr"),ect********

# c# - ComboBox.SelectedValue 不工作

> ID：12883478
> 
> 赞同：11
> 
> 时间：2012-10-14T15:12:05.270
> 
> 标签：c#, winforms, combobox

我有一个 WinForms 应用程序。我用以下代码填充了我的 ComboBox：

```
cboGridSize.Items.Clear();
for (int i = 2; i <= 12; i++)
    cboGridSize.Items.Add(new KeyValuePair<string,int>(i.ToString(), i));
cboGridSize.SelectedValue = 4; 
```

但是，最后一行绝对没有效果。组合框出现时未选择任何项目。

所以我正在做一些调试并注意到一些奇怪的事情。下图来自设置`cboGridSize.SelectedIndex`为 0 后的监视窗口。

[观看窗口 http://www.softcircuits.com/Client/debugwin.jpg](http://www.softcircuits.com/Client/debugwin.jpg)

即使该`SelectedItem`属性包含的正是我所期望的，`SelectedValue`仍然是`null`. 尽管 的文档`SelectedValue`很可悲，但我知道它将包含所选项目的值 ( `SelectedItem`)。相反，这两个属性似乎完全不相关。谁能看到我有什么问题？

如您所见，我`ValueMember`设置了属性。并且`DropDownStyle`属性设置为`DropDownList`。

* * *

**编辑：**

一旦 Nikolay Khil 在这里让我直接解决了这个问题（为什么我的文档`SelectedValue`不这样做），我决定简单地编写自己的代码来完成相同的任务。我把它贴在这里，以防有人感兴趣。

```
static class ComboBoxHelper
{
    public static void LookupAndSetValue(this ComboBox combobox, object value)
    {
        if (combobox.Items.Count > 0)
        {
            for (int i = 0; i < combobox.Items.Count; i++)
            {
                object item = combobox.Items[i];
                object thisValue = item.GetType().GetProperty(combobox.ValueMember).GetValue(item);
                if (thisValue != null && thisValue.Equals(value))
                {
                    combobox.SelectedIndex = i;
                    return;
                }
            }
            // Select first item if requested item was not found
            combobox.SelectedIndex = 0;
        }
    }
} 
```

这是作为扩展方法实现的，因此我只需将原始代码更改如下：

```
cboGridSize.Items.Clear();
for (int i = 2; i <= 12; i++)
    cboGridSize.Items.Add(new KeyValuePair<string,int>(i.ToString(), i));
cboGridSize.LookupAndSetValue(4); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-14T16:47:30.247

只有在定义了属性时才使用和[`ValueMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)属性。[`DisplayMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)[`DataSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.datasource.aspx)

因此，您应该重新编写代码，如下所示：

```
private readonly BindingList<KeyValuePair<string, int>> m_items =
    new BindingList<KeyValuePair<string, int>>();

public YourForm()
{
    InitializeComponent();

    cboGridSize.DisplayMember = "Key";
    cboGridSize.ValueMember = "Value";
    cboGridSize.DataSource = m_items;

    for (int i = 2; i <= 12; i++)
        m_items.Add(new KeyValuePair<string,int>(i.ToString(), i));

    cboGridSize.SelectedValue = 4;
} 
```

链接：

*   [绑定列表类](http://msdn.microsoft.com/en-us/library/ms132679.aspx)
*   [ObservableCollection 类](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.85%29.aspx)
*   [INotifyCollectionChanged 接口](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-16T15:53:12.603

然而，这并不能回答 OP……ComboBox SelectedValue 必须是整数类型。

如果您有一个短变量或字节变量，其中包含将设置 SelectedValue 的值，则它将不起作用 - 您将拥有 null/nothing 值。

使用整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T15:45:55.397

我知道这是一个老问题，但我自己也遇到过这个问题。我解决了以下问题 - 它有点hacky但它​​有效：

```
 if(newVal != null)
        {
            MyComboBox.SelectedValue = newVal;
        }
        else
        {
            MyComboBox.SelectedIndex = 0; // the 'None Selected' item
        } 
```

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-02-11T08:14:11.623

可以先设置SelectedValue，再设置Datasource等

# javascript - 选择子文档在哪里

> ID：12883481
> 
> 赞同：2
> 
> 时间：2012-10-14T15:12:13.550
> 
> 标签：javascript, mongodb

这可能是一个菜鸟问题，但是我现在已经花了很长时间了。

所以这是我的结构，高度最小化：

```
{
  name : 'Some dude', 
  deck : [{
    name : 'Awesome card',
    value : 30
  },
  {
    name : 'another awesome card',
    value: 50
  }]
} 
```

我想从牌组中的所有卡片中进行选择，其中 name == 'Awesome card'，返回这个

```
{
  name : 'Some dude', 
  deck : [{
    name : 'Awesome card',
    value : 30
  }]
} 
```

一直在尝试大量命令，例如

> db.heroes.find({name : "Some dude"}, {'deck' : 1, 'deck.name' : 'Awesome card})

我应该如何查询这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:25:19.137

使用 $elemMatch 投影：

```
db.heroes.find({name : "Some dude"}, {'deck' : {$elemMatch:{name:'Awesome card}}}) 
```

[请参阅此处](http://docs.mongodb.org/manual/reference/projection/elemMatch/)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:22:14.647

您可以使用位置运算符来标识字段选择中`$`匹配数组元素的索引：`deck`

```
db.heroes.find(
    {name : "Some dude", 'deck.name' : 'Awesome card'}, 
    {_id: 0, name: 1, 'deck.$.name': 1}
); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-14T15:15:16.983

```
deck = deck.filter(function (card) { return card.name === 'Awesome card' }); 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

# javascript - 在 key hold 和 keyup 上做一些事情

> ID：12883483
> 
> 赞同：1
> 
> 时间：2012-10-14T15:12:23.540
> 
> 标签：javascript, jquery

我需要调用函数：

1.  按住键的每一秒（例如，按住 5 秒钟，它应该每秒触发 5 次）。

2.  当用户释放键 ( `keyup`) 时，如果少于一秒钟。

事件应该绑定在文档上，而不是文本输入上。

如果第二个语句“有点”有效，首先我会遇到问题，因为 keypress 事件在某些浏览器上不起作用并且 keydown 一直触发事件。

```
var interval;
$(document).on('keypress', function(e) {
    console.log('keypress');

    interval = setInterval(function() {
        doSomething(e.keyCode);
    }, 1000);

}).on('keyup', function(e) {
    console.log('keyup');

    if(interval === 0) {
        doSomething(e.keyCode);
    }
    clearInterval(interval);
    interval = 0;
});

function doSomething(keyCode) {
     console.log(keyCode);
} 
```

jsFiddle：http: [//jsfiddle.net/kWFUA/](http://jsfiddle.net/kWFUA/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:26:18.840

我已经更新了小提琴[http://jsfiddle.net/kWFUA/3/](http://jsfiddle.net/kWFUA/3/)

```
var interval;
var called = false;

$(document).on('keydown', function(e) {
    if(interval == null) {
        console.log('keydown');
        called = false;
        interval = setInterval(function() {
            doSomething(e.keyCode);
            called = true;
        }, 1000);
    }

}).on('keyup', function(e) {
    console.log('keyup');
    clearInterval(interval); 
    interval = null;
    if(!called)
        doSomething(e.keyCode);
});

function doSomething(keyCode) {
     console.log(keyCode);
} 
```

# algorithm - 离散数学大 O 表示法算法复杂性

> ID：12883484
> 
> 赞同：2
> 
> 时间：2012-10-14T15:12:36.033
> 
> 标签：algorithm, math, matrix, complexity-theory, big-o

如果你能帮我做 a 部分，我可能会弄清楚 b 部分。我整天都在研究这个和类似的问题，我只是在掌握如何处理嵌套循环时遇到问题。对于第一个循环有 n 次迭代，对于第二个有 n-1，对于第三个有 n-1 .. 我在想这个正确吗？

考虑以下算法，
该算法将 n 个整数序列 a1, a2, ..., an作为输入，
并生成矩阵 M = {mij} 作为输出，其中 mij 是 整数序列 ai, a + 1 中
的最小值
, ..., aj for j >= i 和 mij = 0 否则。

初始化 M 使得 mij = ai 如果 j >= i 并且 mij = 0

```
for i:=1 to n do
    for j:=i+1 to n do
        for k:=i+1 to j do
            m[i][j] := min(m[i][j], a[k])
        end
    end
end
return M = {m[i][j]} 
```

(a) 证明该算法使用 Big-O(n^3) 比较来计算矩阵 M。
(b) 证明该算法使用 Big-Omega(n^3) 比较来计算矩阵 M。

使用这张脸和 (a) 部分，得出该算法使用 Big-theta(n^3) 比较的结论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T15:21:57.403

在 A 部分中，您需要找到操作数的上限`min`。

为了做到这一点，很明显上述算法的操作数**少于** `min`以下：

```
for i=1 to n
  for j=1 to n //bigger range then your algorithm
    for k=1 to n //bigger range then your algorithm
        (something with min) 
```

上面**恰好**有n^3 个`min`操作 - 因此在您的算法中，操作*少于*`n^3`最小操作。

由此我们可以得出结论：（`#minOps <= 1 * n^3`对于每个 n > 10，其中 10 是任意的）。
根据[Big-O 的定义](http://en.wikipedia.org/wiki/Big_O_notation#Formal_definition)，这意味着算法是`O(n^3)`

你说你一个人就能搞定B，那我就让你试试吧：）

* * *

提示：中间循环有*更多*的迭代`for j=i+1 to n/2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:40:18.137

对于外部循环的每次迭代，内部两个嵌套循环会给出`n^2`复杂度 if `i == n`。外循环将运行 for `i = 1 to n`。所以总复杂度将是一个系列，如：`1^2 + 2^2 + 3^2 + 4^2 + ... ... ... + n^2`. 这个总和值为`n(n+1)(2n+1)/6`。忽略这个求和项的低阶项，最终的顺序是`O(n^3)`

# c++ - 标准::向量 编译错误“T 不能出现在常量表达式中”

> ID：12883486
> 
> 赞同：0
> 
> 时间：2012-10-14T15:12:44.320
> 
> 标签：c++, g++, llvm

首先，我的代码在带有编译器的 Mac OS X 上编译并运行良好

```
i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 
```

但在带有编译器的 Ubuntu 上

```
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

它不会编译。

在我的标题中，我有

```
std::vector<Obstacle::Obstacle*> obstacles; 
```

这在 Ubuntu 中给出了以下编译错误：

```
error: ‘Obstacle::Obstacle’ cannot appear in a constant-expression 
```

关于我需要改变什么以使其工作的任何想法？我应该在 Ubuntu 上使用一些神奇的编译标志来使它像在 OS X 上一样工作吗？

谢谢

编辑：`Obstacle`是一堂课。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:42:36.440

显然`Obstacle`只是一个类。

令人惊讶的是，在 g++ 4.2、g++ 4.3、g++ 4.4、clang++ 2.9 和 clang++ 3.1 中测试的以下内容也有效：

```
std::vector<Obstacle::Obstacle::Obstacle::Obstacle::Obstacle*> obstacles; 
```

多个版本的g++和多个版本的clang编译如上。

~~g++ 4.5 和 4.6 有这个结构的问题。这看起来像一个 g++ 错误，版本 4.5 及更高版本。那么为什么这应该是合法的呢？~~

这是 pre 4.5 g++、clang 和显然其他编译器中的错误。标准的相关部分是 3.4.3.1，第 1a 段：

> 如果 nested-name-specifier 指定了一个类 C，并且在 nested-name-specifier 之后指定的名称，当在 C 中查找时，是 C 的注入类名（第 9 条），则该名称被认为是命名类 C 的构造函数。这样的构造函数名称只能用于出现在类定义之外的构造函数定义的 declarator-id 中。

换句话说，`Obstacle::Obstacle`是非法的，除非在 class 的构造函数的外部定义中使用`Obstacle`。

那么这些编译器是如何解析这个的呢？那些编译器`Obstacle::Obstacle`仅在构造函数的定义异常的情况下才被视为具有特殊含义。否则，`Obstacle::Obstacle`遵循注入的名称规则，但忽略该规则不适用于此处的事实。`Obstacle::Obstacle*`不是指向构造函数的指针，因为构造函数没有名称。`Obstacle::Obstacle*`相反，意味着`Obstacle*`从类的上下文中评估时的任何方法`Obstacle`。但在类内部，`Obstacle*`仍然是一个指向类实例的指针`Obstacle`。`Obstacle::Obstacle*`只是一个`Obstacle*`, as is `Obstacle::Obstacle::Obstacle*`, 等等。堆上尽可能多`Obstacle`的 s，它仍然只是一个`Obstacle*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:15:35.717

您不能将构造函数指针作为存储类型传递。

代替

```
std::vector<Obstacle::Obstacle*> obstacles; 
```

尝试

```
std::vector<Obstacle*> obstacles; 
```

# magento - Magento - 默认与主要送货地址

> ID：12883490
> 
> 赞同：4
> 
> 时间：2012-10-14T15:13:26.237
> 
> 标签：magento

如果我通过以下方式加载客户：

```
$customer = Mage::getModel('customer/customer')
    ->load($customer_id); 
```

有什么区别：

```
$customer -> getDefaultShippingAddress(); 
```

和

```
$customer -> getPrimaryShippingAddress(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T15:48:15.553

他们返回相同的结果

见/app/code/core/Mage/Customer/Model/Customer.php

```
 /*
 * @return Mage_Customer_Model_Address
 */
public function getPrimaryBillingAddress()
{
    return $this->getPrimaryAddress('default_billing');
}

/**
 * Get customer default billing address
 *
 * @return Mage_Customer_Model_Address
 */
public function getDefaultBillingAddress()
{
    return $this->getPrimaryBillingAddress();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:47:33.150

什么都没有，因为 getDefaultShippingAddress() 在内部调用 getPrimaryShippingAddress()。您可以在 /app/code/local/Mage/Customer/Model/Customer.php 中自己检查代码

```
/**
 * Get default customer shipping address
 *
 * @return Mage_Customer_Model_Address
 */
public function getPrimaryShippingAddress()
{
    return $this->getPrimaryAddress('default_shipping');
}

/**
 * Get default customer shipping address
 *
 * @return Mage_Customer_Model_Address
 */
public function getDefaultShippingAddress()
{
    return $this->getPrimaryShippingAddress();
} 
```

# c++ - 定时执行语句 - C++

> ID：12883493
> 
> 赞同：6
> 
> 时间：2012-10-14T15:13:42.040
> 
> 标签：c++, benchmarking

> **可能重复：**
> [如何在 C++ 中计算代码片段的执行时间](https://stackoverflow.com/questions/1861294/how-to-calculate-execution-time-of-a-code-snippet-in-c)

如何获取某些 C++ 代码中一组特定语句所花费的时间？

类似于`time`Linux 下的实用程序，但仅适用于某些特定语句。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-14T15:37:53.713

您可以使用`<chrono>`标准库中的标头：

```
#include <chrono>
#include <iostream>

unsigned long long fib(unsigned long long n) {
    return (0==n || 1==n) ? 1 : fib(n-1) + fib(n-2);
}

int main() {
    unsigned long long n = 0;
    while (true) {
        auto start = std::chrono::high_resolution_clock::now();
        fib(++n);
        auto finish = std::chrono::high_resolution_clock::now();

        auto microseconds = std::chrono::duration_cast<std::chrono::microseconds>(finish-start);
        std::cout << microseconds.count() << "µs\n";
        if (microseconds > std::chrono::seconds(1))
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T15:37:37.807

你需要自己测量时间。我通常使用的小秒表类如下所示：

```
#include <chrono>
#include <iostream>

template <typename Clock = std::chrono::steady_clock>
class stopwatch
{
    typename Clock::time_point last_;

public:
    stopwatch()
        : last_(Clock::now())
    {}

    void reset()
    {
        *this = stopwatch();
    }

    typename Clock::duration elapsed() const
    {
        return Clock::now() - last_;
    }

    typename Clock::duration tick()
    {
        auto now = Clock::now();
        auto elapsed = now - last_;
        last_ = now;
        return elapsed;
    }
};

template <typename T, typename Rep, typename Period>
T duration_cast(const std::chrono::duration<Rep, Period>& duration)
{
    return duration.count() * static_cast<T>(Period::num) / static_cast<T>(Period::den);
}

int main()
{
    stopwatch<> sw;
    // ...
    std::cout << "Elapsed: " << duration_cast<double>(sw.elapsed()) << '\n';
} 
```

duration_cast 可能不是函数的最佳名称，因为标准库中已经存在具有此名称的函数。随意想出一个更好的。;)

编辑：请注意，chrono 来自 C++11。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T15:34:48.673

`std::chrono`或者`boost::chrono`（如果您的编译器不支持 C++11）可以用于此。

```
std::chrono::high_resolution_clock::time_point start( 
    std::chrono::high_resolution_clock::now() );
....
std::cout << (std::chrono::high_resolution_clock::now() - start); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T15:42:02.137

可能重复：[如何在 C++ 中计算代码片段的执行时间](https://stackoverflow.com/questions/1861294/how-to-calculate-execution-time-of-a-code-snippet-in-c)

您可以使用 time.h C 标准库（在[http://www.cplusplus.com/reference/clibrary/ctime/](http://www.cplusplus.com/reference/clibrary/ctime/)有更详细的解释）。以下程序可以满足您的要求：

```
#include <iostream>
#include <time.h>

using namespace std;

int main()
{
    clock_t t1,t2;
    t1=clock();
    //code goes here
    t2=clock();
    float diff = ((float)t2-(float)t1)/CLOCKS_PER_SEC;
    cout << "Running time: " << diff << endl;

    return 0;
} 
```

你也可以这样做：

```
int start_s=clock();
// the code you wish to time goes here
int stop_s=clock();
cout << "time: " << (stop_s-start_s)/double(CLOCKS_PER_SEC)*1000 << endl; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-14T15:24:04.743

你需要编写一个简单的计时系统。c++ 中没有内置方法。

```
#include <sys/time.h>

class Timer
{
private:
    struct timeval start_t;
public:
    double start() { gettimeofday(&start_t, NULL); }
    double get_ms() {
       struct timeval now;
       gettimeofday(&now, NULL);
       return (now.tv_usec-start_t.tv_usec)/(double)1000.0 +
              (now.tv_sec-start_t.tv_sec)*(double)1000.0;
    }
    double get_ms_reset() {
      double res = get_ms();
      reset();
      return res;
    }
    Timer() { start(); }
};

int main()
{
  Timer t();
  double used_ms;

  // run slow code..
  used_ms = t.get_ms_reset();

  // run slow code..
  used_ms += t.get_ms_reset();
  return 0;
} 
```

请注意，测量本身会显着影响运行时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-14T15:27:41.430

如果您使用的是 GNU gcc/g++：

尝试使用 --coverage 重新编译，重新运行程序并使用 gprof 实用程序分析生成的文件。它还将打印函数的执行时间。

编辑：使用-pg 编译和链接，而不是--coverage，--coverage 用于gcov（实际执行哪些行）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-14T15:17:00.840

这是非常好的代码片段，在 windows 和 linux 上运行良好：[https](https://stackoverflow.com/a/1861337/1483826)
://stackoverflow.com/a/1861337/1483826 要使用它，运行它并将结果保存为“开始时间”并在操作之后 - “结束时间”。减去并除以您需要的任何精度。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-14T15:24:33.643

您可以使用`#inclide <ctime>`标题。[它的功能和用途在这里](http://www.cplusplus.com/reference/clibrary/ctime/)。假设您想查看代码花费了多少时间。您必须在该部分开始之前获取当前时间，并在该部分结束之后获取另一个当前时间。然后取这两次的差。在内部声明了现成的函数`ctime`来完成所有这些工作。只需检查上面的链接。

# jquery - jquery中如何使用OR

> ID：12883497
> 
> 赞同：1
> 
> 时间：2012-10-14T15:14:12.463
> 
> 标签：jquery

首先，我要感谢所有查看此内容的人，并特别感谢回答此问题的人。

今天，我对此进行了测试，但它不起作用，所以只想知道这段代码应该如何。一行中有多个“或”

```
$("input[name='ABC']or[name='DEF']or[name='GHI']or[name='JKL']").click(function (){ 
    //do something
}); 
```

或者甚至把它放在其他地方，比如......

```
$("input[name='ABC'][name='DEF'][name='GHI'][name='JKL']").click(function (){ 
    //do something
}else{
    //do something else
}); 
```

我知道这两个代码都是无效的，那么可以这样编码吗？到目前为止，我都一一编码，所以我的编码很长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:21:41.303

使用**逗号**分隔元素，如建议的 jhonraymos。

我建议您为所有这些元素添加一个**类**

```
<input type="text" name="ABC" class="special" />
<input type="text" name="DEF" class="special" />
<input type="text" name="GHI" class="special" />
<input type="button" name="JKL" class="special" />
... 
```

接着

```
$('input.special').click(function() {
    // do something
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:16:12.880

你可以使用多重选择器[http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T15:16:18.143

您可以简单地使用或放置`,`在它们之间

用这个

```
$("input[name='ABC'],[name='DEF'],[name='GHI'],[name='JKL']").click(function (){ 
//do something
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T15:28:08.480

如果您想要一个更加定制的解决方案，您可以使用类似的东西：

```
$("input[name]").filter(function() { return this.getAttribute('name').search(/^(ABC|DEF)$/) > 0;}); 
```

然后您可以将其包装在一个函数中以根据需要进行抽象并使客户端代码更具可读性。

我建议像：

```
var attrPattern = function(attrName, pattern) {
  return function() {
    return this.getAttribute(attrName).search(pattern) > 0;
  }
} 
```

然后你可以打电话给

```
$("input[name"]).filter(attrPattern("name", pattern)); 
```

# ios - 这个 Objective-C 方法应该返回一个 IBAction。为什么没有return语句？

> ID：12883504
> 
> 赞同：3
> 
> 时间：2012-10-14T15:15:02.380
> 
> 标签：ios

我正在学习 Objective-C 和 iOS 开发。我想我掌握了方法语法。[Objective C 中的方法语法](https://stackoverflow.com/questions/683211/method-syntax-in-objective-c)

如果我理解正确，这个名为 reset 的实例方法应该返回一个 IBAction 对象。但它似乎只是在设置实例变量（它们是具有这些名称的 UI 文本字段）。为什么它没有返回 IBAction 对象的 return 语句？

```
- (IBAction)reset {               //why does it not have a return statement?
    fahrenheit.text = @"32";
    celsius.text = @"0";
    kelvin.text = @"-273.15";
} 
```

我习惯了看起来像这样的 .NET 代码（将其放入非 NET 人员的伪代码中）：

```
public function reset () returns IBAction
        me.fahrenheit.text = "32";
        me.celsius.text = "0"
        me.kelvin.text = "-273.15"
        return new IBAction    //I would expect something like this in obj C, based on my experience with .NET languages
end function 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T15:16:18.637

IBAction 是 typedef 无效的。Xcode 使用它作为提示，该方法可用于接口构建器中的“连接”。

# c# - MonoTouch 和 SQLite - 以前成功连接后无法打开数据库

> ID：12883507
> 
> 赞同：2
> 
> 时间：2012-10-14T15:15:21.163
> 
> 标签：c#, ios, sqlite, xamarin.ios

我在从 MonoTouch 读取我的 SQLite 数据库中的数据时遇到困难。

对于前几个屏幕，我可以毫无困难地读写，然后突然之间我无法与错误建立任何进一步的联系：

```
Mono.Data.Sqlite.SqliteException: Unable to open the database file   
at Mono.Data.Sqlite.SQLite3.Open (System.String strFilename, SQLiteOpenFlagsEnum flags, Int32 maxPoolSize, Boolean usePool) [0x0007e] in /Developer/MonoTouch/Source/mono/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLite3.cs:136    
at Mono.Data.Sqlite.SqliteConnection.Open () [0x002aa] in /Developer/MonoTouch/Source/mono/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLiteConnection.cs:888 
```

我确保每次使用它时都会处理并关闭每个连接，但我仍然遇到这个问题。例如：

```
var mySqlConn = new SqliteConnection(GlobalVars.connectionString);
mySqlConn.Open();
SqliteCommand mySqlCommand = new SqliteCommand(SQL, mySqlConn);
mySqlCommand.ExecuteNonQuery();
mySqlConn.Close();
mySqlCommand.Dispose();
mySqlConn.Dispose(); 
```

我猜我没有正确关闭连接。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:47:10.053

我很确定你猜对了。然而，很难猜测出了什么问题（例如，您定义的`connectionString`内容将影响 Sqlite 的初始化方式和工作方式）。

从您的示例中，您似乎正在`SqliteConnection`正确处理，但事情仍然可能出错。例如，如果某些代码抛出异常（并且您在某处捕获它们），则该`Dispose`调用可能永远不会被调用。执行以下操作会更安全：

```
using (var mySqlConn = new SqliteConnection(GlobalVars.connectionString) {
    mySqlConn.Open();
    using (SqliteCommand mySqlCommand = new SqliteCommand(SQL, mySqlConn)) {
        mySqlCommand.ExecuteNonQuery();
        // work with the data
    }
    mySqlConn.Close();
} 
```

这将确保*自动*finally 子句将处理您创建的实例。

此外，您可能需要考虑重用您的（第一个）连接实例，例如打开一次并在应用程序的任何地方重用它。OTOH，在这种情况下您需要注意线程（默认情况下，您可以更改它，每个连接只能在创建它的线程上安全使用）。

重用可以帮助您的应用程序性能，但它也不能真正解决您的问题（但它可能会隐藏它）。所以我建议你先调试一下：

`/Developer/MonoTouch/Source/mono/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLite3.cs`使用 MonoDevelop，您可以在文件（包含在您的 MonoTouch 安装中）的第 136 行设置断点，以查看实际的`n`错误代码（在它被转换为字符串之前）。

您还可以在 dispose 代码上设置断点以确保它被执行（并且不返回错误）。连接创建和处置的数量应该匹配。如果没有，则使用**调用堆栈**查看谁在打开而不关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:45:16.083

我建议使用“使用”块..这将确保所有内容都正确处理，并且当它已经关闭时您不会关闭连接..

```
using (SqliteConnection  conn = new SqliteConnection(GlobalVars.connectionString)) 
{
            conn.Open ();
            SqliteCommand command = new SqliteCommand (conn);
                             .............

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:45:36.023

好的 - 我现在通过将 close 和 dispose 移动到“finally”来让它工作。

```
var mySqlConn = new SqliteConnection (GlobalVars.connectionString);

mySqlConn.Open ();

try {

// CODE HERE

} finally {

    mySqlConn.Close();
    mySqlConn.Dispose();

} 
```

# asp.net-mvc - Autofac 与 MVC 4 动作过滤器属性注入

> ID：12883509
> 
> 赞同：5
> 
> 时间：2012-10-14T15:15:31.473
> 
> 标签：asp.net-mvc, asp.net-mvc-4, autofac

我正在使用带有 MVC4 的 Autofac 的 Nuget MVC3 集成包。它主要工作（使用控制器的构造函数注入效果很好）但它不会将注册的服务注入到动作过滤器属性中。

这是我在 Global.asax.cs 中的注册：

```
builder.RegisterType<AspNetMembershipProviderWrapper>().As(typeof(IUserService)).InstancePerHttpRequest();
// 5) action filters
builder.RegisterType<SetCultureAttribute>().As<IActionFilter>().PropertiesAutowired().SingleInstance();
builder.RegisterFilterProvider();
var container = builder.Build();
DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

然后在`SetCultureAttribute`我有这个：

```
public IUserService _userService { get; set; } // it doesn't get injected, null 
```

这在属性的构造函数中也不起作用：

```
_userService = DependencyResolver.Current.GetService<AspNetMembershipProviderWrapper>(); // always returns null 
```

`DependencyResolver.Current.GetService()`在操作过滤器的构造函数中调用时，所有其他注册服务也返回 null（我在调试窗口中对其进行了测试以对其进行测试）。

所以我猜有些事情不正常。可以使用 MVC3 集成还是应该使用 MVC4 Nuget 包（它说它是用于 RC）？

还有什么我可以尝试做的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T00:13:26.250

为了使 ActionFilter 注入工作，您需要注册提供程序，我在您的示例中没有看到：

```
builder.RegisterFilterProvider(); 
```

这里有文档： [http ://code.google.com/p/autofac/wiki/MvcIntegration3](http://code.google.com/p/autofac/wiki/MvcIntegration3)

无论哪种情况，您都将服务注册为 IUserService，因此您必须这样解决它。

```
_userService = DependencyResolver.Current.GetService<IUserService>(); 
```

您不需要注册该属性。查看上面的 wiki 链接了解更多信息。

# c - C中对象的指针矩阵

> ID：12883512
> 
> 赞同：2
> 
> 时间：2012-10-14T15:16:00.977
> 
> 标签：c, arrays, pointers, struct

我认为这是基本问题，但我不是英语，也没有使用编程语言的术语，这就是我在这里提问的原因（我找不到）。

*这是我的背景：*

我有一个结构（让我们简化它）如下

```
struct _unit
{
  char value;
} Unit; 
```

在主程序中，我希望有一排指针指向一排指向结构**Unit**的其他指针。就像是

```
int main ()
{
  Unit** units;

  ..

  printf("%d", units[0][0].value);

  ...
} 
```

我有点困惑，要怎么走才能让**Unit**可以作为多维数组访问。

这是我的尝试

```
{
  units = (Unit**)malloc(sizeof(void*));

  units[0][0] = (Unit*)malloc(sizeof(Unit));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:19:32.763

您快到了。

首先，您需要将您的类型声明为`Unit**`. 然后，在此之上，分配足够的`Unit*`指针来保存行数。最后，遍历那些创建的指针，创建每个`Unit`.

例如：

```
int i;
Unit** u;

// Allocate memory to store 50 pointers to your columns.    
u = malloc(sizeof(Unit*) * 50);

// Now, for each column, allocate 50 Units, one for each row.
for(i=0; i<50; i++) {
    u[i] = malloc(sizeof(Unit) * 50);
}

// You can now access using u[x][y]; 
```

这是传统的做法。C99 还引入了不同的语法来执行此操作，如下所示：

```
Unit (*u)[n] = malloc(sizeof(Unit[n][n])) // n = size of your matrix 
```

来自：[https ://stackoverflow.com/a/12805980/235700](https://stackoverflow.com/a/12805980/235700)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T15:53:12.630

您可能误解了 struct 声明的含义。

```
struct _unit
{
    char value;
} Unit; 
```

您的代码的效果是声明一个结构类型`struct _unit`并为该类型的一个变量分配空间，名为`Unit`.

你可能想说的是

```
struct _unit
{
    char value;
};

typedef struct _unit Unit; 
```

在 C 中，“struct”这个词是类型的一部分，除非你对它进行 typedef。

# python - 在字典python中返回值的问题

> ID：12883513
> 
> 赞同：0
> 
> 时间：2012-10-14T15:16:01.413
> 
> 标签：python, dictionary

我将列表转换为计数器。当我尝试返回我的值时会出现问题。我试过`counter.values()`了，但我收到的是我的原始列表而不是项目计数。有什么建议么？

```
a=[1,1,2,1,2,3,4,5,66,44,3]
c=Counter(a)
print(c.values()) 
```

输出：[1,1,2,1,2,3,4,5,66,44,3]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:36:39.343

`keys()`返回原始列表中的项目。`values()`返回相关的计数。`items()`返回键值（键计数）对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:00:00.420

我同意 OP 的观点，即 c.values() 应该返回计数而不是项目本身。我相信这是预期的行为。其他任何东西都可能是一个错误。检查 Python bugdb 或尝试更新版本的 Python。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T16:00:09.870

```
>>> from collections import Counter
>>> a=[1,1,2,1,2,3,4,5,66,44,3]
>>> c=Counter(a)
>>>
>>> c.keys() # elements of the original list taken once
dict_keys([1, 66, 3, 4, 5, 44, 2])
>>>
>>> c.values() # occurrences of each element
dict_values([3, 1, 2, 1, 1, 1, 2])
>>>
>>> c.items() # list of tuples (element, occurrence)
dict_items([(1, 3), (66, 1), (3, 2), (4, 1), (5, 1), (44, 1), (2, 2)])
>>>
>>> c[66] # occurrences of element 66
1 
```

# javascript - 如何从 TypeScript 中的父模块访问变量？

> ID：12883520
> 
> 赞同：1
> 
> 时间：2012-10-14T15:16:18.903
> 
> 标签：javascript, typescript

如果我有这个 TypeScript 代码：

```
module Foo
{
    var x : string ="value";
    module Bar
    {
        export var x = x;
    }
} 
```

它编译为以下 JavaScript：

```
var Foo;
(function (Foo) {
    var x = "value";
    var Bar;
    (function (Bar) {
        Bar.x = Bar.x;
    })(Bar || (Bar = {}));

})(Foo || (Foo = {})); 
```

问题是说的那行`Bar.x = Bar.x`。如何将 Bar.x 设置为 Foo.x？是否需要`export` `Foo.x`这样我才能说`Bar.x = Foo.x`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T16:11:29.190

如果您消除命名中的歧义，这绝对是可能的：

```
module Foo
{
    var a : string = "My Value";
    export module Bar
    {
        export var x = a;
    }
}

alert(Foo.Bar.x); 
```

# php - 将 mysql 命令中声明的计算更新到 mysql 中的表中

> ID：12883522
> 
> 赞同：1
> 
> 时间：2012-10-14T15:16:22.800
> 
> 标签：php, mysql, phpmyadmin

事情是这样的：对于所有订阅的玩家，都有一个基于他们技能的随机公式。这个公式必须连续更新几次，中间有一个睡眠。计算必须是先前计算 + 新计算的总和。问题是我想更新我的表 wedstrijdresultaten 中的计算，但是因为计算是在一个 while 循环中我不能使用

```
$Calculation = $row['Calculation'] + ($Skills / 35)*rand($Skills, 100); 
```

这是我认为可行的，但它没有：

```
$sqlUpdate = "UPDATE wedstrijdresultaten  SET Calculation='".$row['Calculation'] + ($Skills / 35)*rand($Skills, 100)."'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:20:24.853

请参阅[PHP 文档中的“运算符优先级”](http://php.net/manual/en/language.operators.precedence.php)。`+`并且`.`具有相同的优先级，并且是左结合的，所以：

```
"..." . a + b . "..." 
```

这意味着：

```
(("..." . a) + b) . "..." 
```

您需要使用括号强制在连接之前执行加法：

```
$sqlUpdate = "UPDATE wedstrijdresultaten  SET Calculation='"
              . ($row['Calculation'] + ($Skills / 35)*rand($Skills, 100))
              . "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:20:33.263

试试这个，

```
$sqlUpdate = "UPDATE wedstrijdresultaten  
              SET Calculation = Calculation + " . (($Skills / 35) * rand($Skills, 100)) ; 
```

# ajax - Spring3 将 XML 解组为 Java

> ID：12883523
> 
> 赞同：3
> 
> 时间：2012-10-14T15:16:24.157
> 
> 标签：ajax, spring, jaxb, spring-3

我无法连接所有允许从 ajax 客户端发送的 xml 被解组为 Java 对象的部分。我将 Jquery 用于 ajax 客户端、Spring3 和 JAXB。以下是关键组件：

**Ajax 客户端**

```
 function checkForNewActivities(activities) {
            $j.ajax({
                url: "upload/checkForNewActivities",
                type: "POST",
                async: true, 
                dataType: "xml",
                data: ({activities:activities}),
                contentType: "application/xml",

                beforeSend: function() {
                    alert("sending ajax");
                },
                complete: function() {
                    alert("ajax sent");
                },
                success: function(data) {
                    alert("success");
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    alert(textStatus + errorThrown);
                }
            });
        } 
```

**弹簧配置**

```
<bean id="marshallingConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
          <property name="marshaller" ref="jaxbMarshaller" />
          <property name="unmarshaller" ref="jaxbMarshaller" />
          <property name="supportedMediaTypes" value="application/xml"/>
    </bean>

<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
           a bunch of java classes
        </list>
    </property>
</bean> 
```

这是作为目标的 Spring Controller 方法：

```
 @RequestMapping(value="/checkForNewActivities",headers="application/xml", method=RequestMethod.POST)
  public @ResponseBody String uploadMultipleWorkouts(@RequestBody String activities) {        
      System.out.println(activities);
      return ""; 
  } 
```

使用 RequestMapping 中的 headers="application/xml"，这个方法永远不会被调用。如果我删除标头参数，则调用该方法并将活动转储到控制台显示转义的 xml。

我显然错过了如何将此方法连接到 spring 配置，以便进行 xml 解组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:07:52.540

您的 println 打印出转义 xml 的原因是变量的数据类型`activities`是`String`. 您需要创建一个类来保存将传递给方法的数据，以便 JAXB 可以将 xml 转换成一个结构。

例如，而不是

```
public @ResponseBody String uploadMultipleWorkouts(@RequestBody String activities) { 
```

你会想要

```
public @ResponseBody Activities uploadMultipleWorkouts(@RequestBody Activities activities) { 
```

您使用适当的 getter 和 setter 定义的类在哪里`Activities`，以便可以分配您传入的 xml 数据。如果请求数据和响应数据必须不同，那么您可以简单地定义两个类，请求和响应变体。

至于为什么使用`headers="application/xml"`会搞砸，请尝试将其设置为`headers = {"content-type=application/xml"}`

# ruby-on-rails-3 - 为什么使用twitter bootstrap 2显示的标签和数据不对齐，如果a的内容 元素为空？

> ID：12883527
> 
> 赞同：5
> 
> 时间：2012-10-14T15:17:03.083
> 
> 标签：ruby-on-rails-3, html, layout, twitter-bootstrap

我看到描述列表`<dl>`标签出现意外行为。

我正在使用 twitter bootstrap 2 并使用此示例代码：

```
<!DOCTYPE html>
<dl class="dl-horizontal">
  <dt>Item1</strong></dt><dd>This is a description of Item1</dd>
  <dt>Item2</strong></dt><dd>This is a description of Item2</dd>
  <dt>Item3</strong></dt><dd>This is a description of Item3</dd>
  <dt>Item4</strong></dt><dd>This is a description of Item4</dd>
  <dt>Item5</strong></dt><dd>This is a description of Item5</dd>
</dl> 
```

...一切都按预期工作，我看到了：

```
Item1 This is a description of Item1  
Item2 This is a description of Item2  
Item3 This is a description of Item3  
Item4 This is a description of Item4  
Item5 This is a description of Item5 
```

使用此代码：

```
<!DOCTYPE html>
<dl class="dl-horizontal">
  <dt>Item1</strong></dt><dd>This is a description of Item1</dd>
  <dt>Item2</strong></dt><dd></dd>
  <dt>Item3</strong></dt><dd>This is a description of Item3</dd>
  <dt>Item4</strong></dt><dd>This is a description of Item4</dd>
  <dt>Item5</strong></dt><dd>This is a description of Item5</dd>
</dl> 
```

我看到这个有问题的显示：

```
Item1 This is a description of Item1
Item2 This is a description of Item3
Item3 This is a description of Item4
Item4 This is a description of Item5 
Item5 
```

并且`<dt>`and`<dd>`标记没有按预期匹配。

在此处阅读 w3.org 工作草案[http://www.w3.org/TR/html-markup/dl.html#dl](http://www.w3.org/TR/html-markup/dl.html#dl)

...当内容为空白时，我不清楚浏览器或程序员是否负责匹配`<dt>`and`<dd>`元素。`<dd>`

我在 Firefox 和 Safari 中测试了上面的代码，并看到了相同的输出。

这是一个意见问题，twitter bootstrap 2 中的一个错误，还是我误解了 HTML5 描述列表的使用？这种用法`<dl>`出现在 show.html.erb 自动生成的代码中

`rake g bootstrap:themed model`

如果数据元素为空白，则显示的输出与标签不匹配。不幸的是，否则主题选项非常有用。

我可以通过将主题输出修改为如下所示来部分“解决问题”：

```
<dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
<dd><%= @server.name %> <%= "-blank-" if @server.name.blank? %> </dd> 
```

...但我看到“-blank-”来显示空白元素。如果我使用包含空格的字符串，例如“”，我仍然会看到相同的标签描述错位问题。

请尝试将您的答案集中在描述哪个实体、HTML5`<dl>`标记、引导程序或我的理解在此处偏离目标以及原因。

非常感谢！

-EDIT- 对于那些使用引导程序的人，使用这样的 css 可以正常工作：

```
dt, dd {
  line-height: 20px;
  /* Keep this the same as line-height */
  min-height: 20px;
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T15:55:16.980

默认情况下`<dt>`，并且`<dd>`是块级元素，不需要以任何方式“对齐”它们，它们自然会一个接一个地显示出来。

然而， Bootstrap`.dl-horizontal`将这些元素并排排列。当其中一个`<dd>`没有内容时，它会折叠起来，而其他的则会向上移动。（这显然是你不想要的。）这种行为可以像这样“修复”：

```
dd {
  /* should be the same as line-height */
  min-height: 20px;
} 
```

但我不会将此称为 Bootstrap 中的错误。为什么你想要一个没有定义的定义项？根本不显示这个词对我来说更有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-31T08:59:10.510

另一种解决方案可能是这个：

```
.dl-horizontal > dd:after {
  display: table;
  content: "";
  clear: both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T08:43:47.913

覆盖 dt 和 dd 的宽度并设置最小高度将解决 dt 和 dd 的空内容或长内容的问题。

```
.dl-horizontal > dt {
  width: 51% !important;
}

.dl-horizontal > dd {
  width: 49% !important;
}

dt, dd {
  line-height: 20px;
  min-height: 20px; /* must be line-height, to allocate height for empty elements */
} 
```

# cuda - 多维数组拷贝OpenACC

> ID：12883528
> 
> 赞同：1
> 
> 时间：2012-10-14T15:17:09.523
> 
> 标签：cuda, gpgpu, openacc

我有一个 2D 矩阵 SIZE x SIZE，我正在尝试将其复制到 GPU。

我这样分配矩阵：

```
#define SIZE 1024
float (*a)(SIZE) = (float(*)[SIZE]) malloc(SIZE * SIZE * sizeof(float)); 
```

我的 ACC 地区有这个：

```
void mmul_acc(restrict float a[][SIZE],
              restrict float b[][SIZE],
              restrict float c[][SIZE]) {
#pragma acc data copyin(a[0:SIZE][0:SIZE], b[0:SIZE][0:SIZE]) \
    copyout c[0:SIZE][0:SIZE])
{
  ... code here...
} 
```

当使用 PGI 编译器进行编译时，使用 -Minfo=acc，编译器会告诉我：

```
Generating copyin(a[0:1024][0:]) 
```

a[0:1024][0:] 是什么意思？为什么不是 [0:1024][0:1024] ？？？

如果我不声明矩阵，而是声明大小为 SIZE*SIZE 的数组，则执行

```
#pragma acc copyin(a[0:SIZE*SIZE]) 
```

生成以下编译器消息

```
Generating copyin(a[0:16777216]) 
```

代码实际上以相同的方式工作，相同的性能，相同的结果。

显然，编译器以两种方式生成相同的代码，应该是这样，但消息并不简单。

我在 Linux64 机器上使用 PGI 加速器 12.8。我正在使用 -Minfo=acc 进行编译

注意：这个问题已经过编辑，现在它并没有多大意义，但它可能对更多人有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:19:06.683

此问题已在最新的 PGI 编译器 12.9.0 中修复。编译器现在返回以下消息：

```
Generating copyin(a[0:1024][0:1024]) 
```

# c# - 在 ApiController 中将非结构化 BsonDocument 作为类属性返回

> ID：12883530
> 
> 赞同：1
> 
> 时间：2012-10-14T15:17:18.383
> 
> 标签：c#, mongodb, asp.net-web-api, json.net, mongodb-.net-driver

与这个[问题](https://stackoverflow.com/questions/12491265/return-bsondocument-in-apicontroller)类似，我有一个具有几种不同属性类型的类，包括 BsonDocument。

```
public class Report
{
    [BsonId, JsonIgnore]
    public ObjectId _id { get; set; }

    public string name { get; set; }

    [JsonIgnore]
    public BsonDocument layout { get; set; }

    [BsonIgnore, JsonProperty(PropertyName = "layout")]
    public string layout2Json
    {
        get { return layout.ToJson(); }
    }
} 
```

在那里有 BsonDocument 的原因是布局属性是非结构化的，我不能有任何强类型的子类。现在，当 ApiController 返回此类时，我得到如下信息：

```
{
    name: "...",
    layout: "{type: "...", sth: "..."}"
} 
```

但我需要的是作为对象的布局属性，而不是字符串。

JSON.NET 中有没有办法将 json-string（已经是有效的 json）作为对象而不是字符串插入？

以下工作，但似乎很浪费：

```
[BsonIgnore, JsonProperty(PropertyName = "layout")]
public JObject layout2Json
{
    get { return JObject.Parse(layout.ToJson()); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:01:19.597

我有一个类似的问题。我通过实现一个自定义的 JsonConverter 解决了这个问题，它只会将原始值（已经是 Json）写入 Json 编写器：

```
public class CustomConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return true;
    }

    public override object ReadJson(Newtonsoft.Json.JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(Newtonsoft.Json.JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteRaw((string)value);
    }
} 
```

然后，您使用该自定义转换器来装饰返回 BsonDocument 对象的字符串表示形式的属性：

```
public class Report
{
    [BsonId, JsonIgnore]
    public ObjectId _id { get; set; }

    public string name { get; set; }

    [JsonIgnore]
    public BsonDocument layout { get; set; }

    [BsonIgnore, JsonProperty(PropertyName = "layout")]
    [JsonConverter(typeof(CustomConverter))]
    public string layout2Json
    {
        get { return layout.ToJson(); }
    }
} 
```

这样，您就摆脱了双引号问题，并且非结构化对象作为有效的 Json 对象返回，而不是作为字符串返回。希望这有帮助。

# c - 如何模拟更精确的浮点数？

> ID：12883532
> 
> 赞同：2
> 
> 时间：2012-10-14T15:17:58.207
> 
> 标签：c, precision

> **可能重复：**
> [扩展精度浮点库 C/C++](https://stackoverflow.com/questions/10156002/extended-precision-floating-point-library-c-c)

我在大学里研究分形，现在双精度还不够。我使用的是 long double 但我需要更高的精度。

有没有实现更高精度的库？像 512 位、1024 位还是 2048 位？

越多越好！

我真的不关心速度。

感谢您的关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T15:20:06.877

有一个名为 [GMP](http://gmplib.org/)的库，请查看。

# ruby-on-rails - 如何计算 Ruby on Rails 中表单文本字段的默认值？

> ID：12883537
> 
> 赞同：2
> 
> 时间：2012-10-14T15:18:28.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这样的表格`payments`：

```
<%= f.label :invoice_id %>
<%= f.select(:invoice_id, current_user.outstanding_invoices_collection) %>

<%= f.label :amount %>
<%= f.text_field :amount %> 
```

我想知道是否有办法以某种方式填充`amount`文本字段的值，例如使用关联的未结余额`invoice`？

在我的`Invoice`模型中有这个功能：

```
def balance
  payments.map(&:amount).sum - total
end 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:43:51.480

我假设您要根据从下拉列表中选择的发票来填充文本框。在这种情况下

这个想法是

*   您需要对发票下拉列表进行 ajax 调用。
*   该 ajax 响应应该更新文本框的值。

对于 rails-3，我认为它建议以不可靠的方式执行此操作。[这是您可以关注的链接](https://stackoverflow.com/a/4958088/1160106)。开始玩它，同时我会尝试做一些功能性的东西。希望再次取得好成绩。

您是否正在寻找如何仅填充值？

**更新：**

这是ajax部分

```
#Application.js or any sutable js file
$(function($) {
    $("#your_drop_down_id").change(function() {
        #Your the url to your controller action here
        $.ajax({url: '/get_amount',
        data: 'invoice_id=' + this.value,
        dataType: 'script'})
    });
}); 
```

* * *

```
#in get_amount Action
invoice = Invoice.find(params[:invoice_id]) #Other appropriate logic to get the invoice
@amount = invoice.balance 
```

* * *

```
#get_amount.js.erb
$('#your_text_box_id').val('<%= @amount %>'); 
```

* * *

```
#routes.rb
#This part is written following the gist: https://gist.github.com/3889180 by @TinTin
resources :payments do  
   collection do
       get 'get_amount'
   end
end 
```

让我知道是否有任何部分让您感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:43:19.030

在您的控制器中，您可以为任何字段分配任何值，它将显示在视图中。

```
def new
  @payment = new Payment()
  @payment.amount = 100
end 
```

如果您想要一些动态值，例如：基于组合框选择，然后在 javascript 或 AJAX 中执行。

# android - android当前位置GPS但返回null

> ID：12883538
> 
> 赞同：0
> 
> 时间：2012-10-14T15:18:38.513
> 
> 标签：android, get, gps, location

我开发了一个应用程序来通过 GPS 检索当前位置，但它返回 null 我希望我的应用程序仅使用 gps 而不是 3g 或 wifi 我使用 bestprovider 但它仅在我运行时检索，并不总是有效

这是java代码：

```
 package com.example.loc2;

    import android.location.Location;
 import android.location.LocationListener;
   import android.location.LocationManager;
  import android.os.Bundle;
   import android.app.Activity;
   import android.content.Context;
   import android.view.Menu;
    import android.view.View;
  import android.view.View.OnClickListener;
  import android.widget.Button;
   import android.widget.Toast;

   public class MainActivity extends Activity {
private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters  
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds
protected LocationManager locationManager;
protected Button retrieveLocationButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            MINIMUM_TIME_BETWEEN_UPDATES, 
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    );

retrieveLocationButton.setOnClickListener(new OnClickListener() {
       // @Override
        public void onClick(View v) {
            showCurrentLocation();
        }
});        

}    

protected void showCurrentLocation() {

    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    if (location != null) {
        String message = String.format(
                "Current Location \n Longitude: "+location.getLongitude()+" \n Latitude:"+
                 location.getLatitude());

        Toast.makeText(  MainActivity.this,message,
                Toast.LENGTH_LONG).show();
    }

}   

private class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
        );
        Toast.makeText(MainActivity.this, message, Toast.LENGTH_LONG).show();
    }

    public void onStatusChanged(String s, int i, Bundle b) {
        Toast.makeText(MainActivity.this, "Provider status changed",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderDisabled(String s) {
        Toast.makeText(MainActivity.this,
                "Provider disabled by the user. GPS turned off",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderEnabled(String s) {
        Toast.makeText(MainActivity.this,
                "Provider enabled by the user. GPS turned on",
                Toast.LENGTH_LONG).show();
    }

}

} 
```

这是清单：我使用了这个权限

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.loc2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    </application>

    </manifest> 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-25T16:32:35.397

步骤 1> 准备 GoogleClientAPI 实例
步骤 2> 在 onConnected 回调中使用 andorid 运行时权限机制在运行时检查位置预授权

步骤 3> 获取位置 Location location1 = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient);

步骤 4> 将位置请求准备为 LocationRequest locationRequest = LocationRequest.create() .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY) .setInterval(0) .setFastestInterval(0);

setp 5> 注册位置更新为

LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, locationRequest, this);

步骤 6> 从布局中获取 MapFragment 实例为

SupportMapFragment supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map); supportMapFragment.getMapAsync(this);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T16:22:21.800

您必须有正确的调用方法的顺序/顺序。

```
onCreate() {   
    GoogleApiAvailability mGoogleApiAvailability = GoogleApiAvailability.getInstance();   

    byte b = (byte) mGoogleApiAvailability.isGooglePlayServicesAvailable(this);    

    if (b == ConnectionResult.SUCCESS) {    
        try {   
            MapsInitializer.initialize(getApplicationContext());    

            //setUpMap();    

            if (mGoogleApiClient == null) {    
                mGoogleApiClient = new GoogleApiClient.Builder(this)
                        .addApi(LocationServices.API)
                        .addConnectionCallbacks(this)
                        .addOnConnectionFailedListener(this)
                        .build();   
            }    
        }catch(Exception e) {    
            e.printStackTrace();   
        }   
    }   
}   

@Override   
public void onConnected(@Nullable Bundle bundle) {       
    checkForLocationPermission();      

    Location location1 = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient);    

    if(location1 != null) {       
        currentLatitude = location1.getLatitude();    
        currentLongitude = location1.getLongitude();    
    }    

    startLocationUpdtes();    
    setUpMap();    

}    

@Override    
public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {    
//super.onRequestPermissionsResult(requestCode, permissions, grantResults);    

    switch(requestCode) {    
        case MY_LAST_KNOWN_LOCATION_PERMISSION:    
            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {    

                //Permission was allowed    
                isLocationAccessAllowed = true;    
            } else {    
                //Permission was denied      
            }     
    }     
}    

@Override    
public void onConnectionSuspended(int i) {    

}    

@Override    
public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {    

}    

@Override    
public void onLocationChanged(Location location) {    

    currentLatitude = location.getLatitude();    

    currentLongitude = location.getLongitude();    

}     

private void checkForLocationPermission() {    
    boolean isFineLocationNotAllowed = ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED;    

    boolean isCoarseLocationNotAllowed = ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED;    

    if(isFineLocationNotAllowed && isCoarseLocationNotAllowed) {    

        //Permission is not granted yet    
        boolean shouldRequestForPermission = ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_FINE_LOCATION);     

        if(shouldRequestForPermission) {    
            //user has allowed permission    

            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.INTERNET, Manifest.permission.ACCESS_COARSE_LOCATION}, MY_LAST_KNOWN_LOCATION_PERMISSION);   

        } else {    
            //user has denied permission    
        }    

    } else {    
        //permission is already granted    

        //ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.INTERNET, Manifest.permission.ACCESS_COARSE_LOCATION}, MY_LAST_KNOWN_LOCATION_PERMISSION);    
    }    
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T15:21:24.627

看看这个，对你有帮助

```
 LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MyLocationListener();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
            mlocListener);

public class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location loc) {
        loc.getLatitude();
        loc.getLongitude();

        Geocoder gcd = new Geocoder(getApplicationContext(),
                Locale.getDefault());
        try {
            mAddresses = gcd.getFromLocation(loc.getLatitude(),
                    loc.getLongitude(), 1);

        } catch (IOException e) {

        }

        String cityName = (mAddresses != null) ? mAddresses.get(0)
                .getLocality() : TimeZone.getDefault().getID();
        String countryName = (mAddresses != null) ? mAddresses.get(0)
                .getCountryName() : Locale.getDefault().getDisplayCountry()
                .toString();

        mCurrentSpeed.setText("Longitude"+loc.getLongitude()+" Latitude"+loc.getLatitude());
    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Disabled",
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Enabled",
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

# xcode - 如何使用 Git 存储库组织跨平台项目？

> ID：12883543
> 
> 赞同：1
> 
> 时间：2012-10-14T15:19:24.273
> 
> 标签：xcode, git, visual-c++, cross-platform

我正在开发一个刚刚进入测试阶段的 VST 插件项目。我同时支持 OS X 和 Windows，到目前为止我组织它的方式是将所有 C++ 源代码存储在 Dropbox 中，但将每个项目和特定于 platorm 的文件存储在本地。这样我就可以让所有 C++ 源文件保持同步，并且可以轻松地在 Xcode 和 Visual C++ 之间来回切换。

现在我需要开始对项目进行源代码控制（使用 Git），我想知道如何保持相同的功能/组织。我最初的想法是将源代码存储在主分支中，然后将 Xcode 和 Visual C++ 项目放在不同的分支中。然后我会在我正在开发的任何平台上查看该项目。但这会使源代码保持同步吗？

存储库对我来说有点新，所以我只是想把头绕在它周围，并确保我在试图保持这个和未来的跨平台项目井井有条时不会造成灾难。感谢您的任何帮助和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:24:55.763

您可以将共享代码放在它自己的存储库中，并将其作为子模块添加到平台特定的存储库中。

详情[在这里](http://git-scm.com/book/en/Git-Tools-Submodules)。

> 存储库对我来说有点新，所以我只是想把头绕在它周围，并确保我在试图保持这个和未来的跨平台项目井井有条时不会造成灾难。

Git 肯定有一个陡峭的学习曲线，但它非常灵活，如果您决定以另一种方式组织代码，您可以在以后轻松改变主意。删除某些内容并且无法恢复它也非常困难。实际上，您必须非常努力地完全摆脱某些东西；）

# android - 重启后如何通过服务启动活动

> ID：12883556
> 
> 赞同：2
> 
> 时间：2012-10-14T15:20:31.777
> 
> 标签：android, service, android-activity

重新启动设备后，我需要我的应用程序开始运行（在后台）。这是我到现在为止的想法（在从这里得到了很多帮助之后......）

这是我使用广播接收器的 BootUpReceiver：

```
public class BootUpReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Intent serviceIntent = new Intent(context, RebootService.class);
        serviceIntent.putExtra("caller", "RebootReceiver");
        context.startService(serviceIntent);
    }
} 
```

这是服务类：

```
public class RebootService extends IntentService{

    public RebootService(String name) {
        super(name);
        // TODO Auto-generated constructor stub
}

protected void onHandleIntent(Intent intent) {

        Intent i = new Intent(getBaseContext(), MainActivity.class);  
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        String intentType = intent.getExtras().getString("caller");
        if(intentType == null) 
            return;
        if(intentType.equals("RebootReceiver")) 
            getApplication().startActivity(i);            
    }
} 
```

这是我的 android 清单：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <receiver
        android:name=".BootUpReceiver"
        android:enabled="true"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver>

    <service android:name=".RebootService"/>
</application> 
```

问题是，当我在手机上安装它并重新启动时，应用程序崩溃：它说，“传输已停止工作”。按确定按钮后，当我检查应用程序信息时，应用程序正在运行。

我是android新手，我不确定发生了什么。我应该添加更多权限吗？

请帮忙。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:41:34.130

我认为您的问题在于您的 RebootService 构造函数。当系统调用它时，它不提供任何参数，所以它会崩溃。如果您查看日志，您可能会看到类似“无法实例化服务...”的内容

尝试将您的构造函数替换为：

```
public RebootService() {
    super( "Reboot Service" );
} 
```

# haskell - 保护并连接到匿名函数中的列表

> ID：12883559
> 
> 赞同：1
> 
> 时间：2012-10-14T15:20:47.770
> 
> 标签：haskell, lambda, anonymous-function, higher-order-functions

我正试图围绕 Haskell 的语法。

这个问题在逻辑上很容易解决。我必须分解正整数和负整数的列表并将它们分组，以便

[1,2,3,-1,-2,-3,1,2,3] 变为 [[1,2,3],[-1,-2,-3], [1,2,3] ]

我想使用一个更高阶的函数 foldr ，以便能够通过一个接受两个争论的匿名函数来做到这一点。

这就是我到目前为止所拥有的。

```
split = foldr (\ x y -> if (x > 0) 
                        then if (head (head y)) < 0
                            then [x] : y
                            else x : head y --error here
                        else if (x < 0) 
                        then if (head (head y)) > 0
                            then [x] : y
                            else x : head y
                        else y
                )
                [[]] 
```

这是我得到的错误

```
 Occurs check: cannot construct the infinite type: a0 = [a0]
    In the first argument of `(:)', namely `x'
    In the expression: x : head y
    In the expression:
      if (head (head y)) < 0 then [x] : y else x : head y 
```

我有两个问题。

1) 为什么在第 7 行出现类型错误？

我不是将整数 (x) 连接到整数列表 (head y)

2）你如何使用守卫写出条件？我试过这样做，但我一直在`parsing error at '|'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:48:52.790

1.  一个函数只能有一个具体的返回类型，并且`[x] : y`是不同于`x : head y`.

2.  `takeWhile`用and编写它可能更容易`dropWhile`：

    ```
    split l = split' (if head l > 0 then (>) else (<)) l 
      where split' op [] = []
            split' op l = takeWhile (`op` 0) l : split (dropWhile (`op` 0) l) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:24:31.910

你只是缺少保持`tail y`。在

```
foldr (\ x y -> if (x > 0) 
                    then if (head (head y)) < 0
                        then [x] : y
                        else x : head y 
```

你有`x :: (Num a, Ord a) => a`,`y :: (Num a, Ord a) => [[a]]`和`head y :: (Num a, Ord a) => [a]`.

所以忘记`tail y`剃掉一层`[]`。`else`分支应该是

```
else (x:head y) : tail y 
```

在外部的两个分支中`if`。

但是，你的函数在那之后有两个语义问题。

首先，您不处理`head y`空的情况，当到达列表末尾时会导致异常，其次，它不适用于无限列表，因为组合函数不构造任何在它的第二个参数已知之前的结果。如果后者是一个问题，你可以[在这个答案](https://stackoverflow.com/a/12838914/1011995)中找到一个足够惰性的组合函数。

# mysql - 双重选择狭窄的结果

> ID：12883562
> 
> 赞同：2
> 
> 时间：2012-10-14T15:21:18.027
> 
> 标签：mysql, join

我想从表格中选择视图、增加和百分比增加，但只显示唯一 ID。我可以得到我想要的信息，但它比我需要的更多，不能缩小结果。

我有以下数据：

```
+------------+------------+-------+-------+
| datum      | youtube_id | views | likes |
+------------+------------+-------+-------+
| 2012-10-07 |     123456 |   100 |   100 |
| 2012-10-07 |      98765 |   200 |   200 |
| 2012-10-08 |     123456 |   150 |   150 |
| 2012-10-08 |      98765 |   300 |   300 |
| 2012-10-09 |     123456 |   300 |   300 |
| 2012-10-09 |      98765 |   500 |   500 |
+------------+------------+-------+-------+ 
```

以及下面的sql语句：

```
SELECT 
id, 
startcount, 
endcount, 
(endcount - startcount)increasing, 
((endcount - startcount) / ( startcount ) *100)percentChange
FROM (SELECT youtube_id AS id, views AS startcount
    FROM charts
    WHERE datum =  '2012-10-08')startRange,
(SELECT views AS endcount
FROM charts
WHERE datum =  '2012-10-09')endRange 
```

这给了我以下结果：

```
+--------+------------+----------+------------+---------------+
| id     | startcount | endcount | increasing | percentChange |
+--------+------------+----------+------------+---------------+
| 123456 |        150 |      300 |        150 |      100.0000 |
|  98765 |        300 |      300 |          0 |        0.0000 |
| 123456 |        150 |      500 |        350 |      233.3333 |
|  98765 |        300 |      500 |        200 |       66.6667 |
+--------+------------+----------+------------+---------------+ 
```

预期的结果是：

```
+--------+------------+----------+------------+---------------+
| id     | startcount | endcount | increasing | percentChange |
+--------+------------+----------+------------+---------------+
| 123456 |        150 |      300 |        150 |      100.0000 |
|  98765 |        300 |      500 |        200 |       66.6667 |
+--------+------------+----------+------------+---------------+ 
```

我一直在查看 group by 或 join 但无法弄清楚这一点，现在已经重做了几天，但我自己陷入了循环。

如果有人能指出我正确的方向或帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:31:44.210

[SQL小提琴](http://sqlfiddle.com/#!3/caaad/1)

```
SELECT 
    c1.youtube_id id, 
    c1.views startcount, 
    c2.views endcount, 
    c2.views - c1.views increasing, 
    (c2.views - c1.views) * 100 / c1.views percentChange
FROM 
    charts c1
    inner join
    charts c2 on c1.youtube_id = c2.youtube_id
WHERE 
    c1.datum = '2012-10-08' and c2.datum =  '2012-10-09' 
```

编辑：改变了增加

# asp.net - 将项目开发提升到一个新的水平

> ID：12883564
> 
> 赞同：3
> 
> 时间：2012-10-14T15:21:20.573
> 
> 标签：asp.net, database, algorithm, visual-studio, ms-access

我一直在寻找一些关于如何处理我正在从事的项目的建议，但无济于事。我几乎正在进行第四次改进我正在开发的“应用程序”的迭代；前两次在 Excel 中，第三次在 Access 中，现在在 Visual Studio 中。该领域是制造业。

基本思想是我从大型 Sybase 服务器获取只读数据，对其进行过滤并每天在 Access 中创建更小的表（使用删除和附加查询），然后做很多事情。更具体地说，我使用一系列查询来组合来自多个表的数据或以特定方式（聚合函数）对数据进行分组，然后将这些数据放入一个表中（这样我就可以使用 DAO.recordset 对数据进行排序和操作并运行多种自定义算法）。然后在整个数据库中重复此过程多次，直到创建一组相关表。

很多时候，我会在查询中创建一个值为 1.1 的字段，这样当我将它附加到表时，我可以将算法中的信息存储在字段中。因此，随着流程的继续，表格的字段数会发生变化。

整个应用程序由 4 个“后端”数据库组成，这些数据库在共享驱动器上链接在一起，具有各种输出（前端访问应用程序或 Excel）。

所以我的问题是，有多少数据驱动的应用程序可以解决问题？每个后端数据库每天都会使用新数据更新，每次更新大约需要 10 秒（3 秒）和 2 分钟（1 秒）。

项目目标。我想/即将迁移到 SQL Server。前端将是一个 Web 应用程序（我知道基本的 Web 开发，并且喜欢管理灵活性），Visual-studio 将是带有 c#/.NET 的 IDE。

这些算法应该在“数据库内部”运行，还是在每个服务器请求上使用一系列 C# 函数。我知道你不应该将数据存储在数据库中，除非它是一个实际的数据点，并且在 Access 中我有很多列只保存 vba 中算法的计算。

事实是，我见过多个专业的 Access 应用程序，但从未见过一个具有复杂性甚至接近我所做的（无论好坏）的应用程序。但我知道一些专业的软件应用程序比我的要好 1000 倍。

所以请请给我一些建议。我已经完全靠自己了，需要一些关于如何以正确的方式处理这个项目的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:19:03.177

如果您打算使用 sql server 或任何其他完整的客户端服务器 DBMS，则诀窍（通常）是在服务器上做尽可能多的事情。

取决于您实际上是如何编写代码的。一般来说，桌面的优化与服务器的优化相反。

例如，如果您是 Find Customer 设施。

在桌面上，您将获得整个表格，然后使用说定位来按名称、邮政/邮政编码等查找记录。因为实际上您的应用程序既是服务器又是客户端。

在客户端服务器设置中，您将客户名称等传递给 DBMS，让它找到匹配的客户并仅将这些客户传回。

所以在你忘记web应用程序的情况下，你必须看看你的应用程序做了什么，然后说我可以用sql写这个吗？

所以

如果你有

```
// get orders 
foreach(Order order in clientOrders)
{
   if (Order.Discount > 0)
   {
      Order.Value = Order.ItemCount * Order.ItemPrice * Order.Discount;
   }
}
// save orders 
```

你会用一个查询替换它

```
Update Orders Set Value = ItemCount * ItemPrice * Discount 
Where ClientID = @ClientID and Discount > 0 
```

让服务器在服务器上完成工作，而不是将大量数据拉入和推出应用程序。

如果我是你，我会做 sql server 部分，或者我会做 web server 部分，而不是同时做两者。在客户端服务器方面有很多重叠。任何一个都不能排除另一个，但很多时候你可以使用其中任何一个来解决相同的问题，但方式略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:27:56.453

随着更多细节的出现，您的应用程序的一个部分似乎涉及在您的 Access db 文件中存储 15K 行，以便您以后可以对这些数据执行计算。

但是，不清楚为什么您认为必须将这些数据存储在 Access 中才能执行计算。

理想情况下，我们会创建一个查询来要求服务器执行这些计算。如果您的服务器功能无法做到这一点，或者计算密集型以至于在服务器上放置了不可接受的处理负载，您仍然不需要将所有原始数据下载到 Access 以便将其用于计算。相反，您可以打开由服务器上的查询填充的记录集，在记录集行中移动以执行计算并将结果仅存储在 Access 表中（通过第二个记录集）。

```
Public Sub next_level_outline()
    Dim db As DAO.Database
    Dim rsLocal As DAO.Recordset
    Dim rsServer As DAO.Recordset
    Dim varLastValue As Variant

    Set db = CurrentDb
    Set rsLocal = db.OpenRecordset("AccessTable", dbOpenTable, dbAppendOnly)
    Set rsServer = db.OpenRecordset("ServerQuery", dbOpenSnapshot)
    Do While Not rsServer.EOF
        rsLocal.AddNew
        rsLocal!computed_field = YourAlgorithm(varLastValue)
        rsLocal.Update
        varLastValue = rsServer!indicator_field.value
        rsServer.MoveNext
    Loop
    rsLocal.Close
    Set rsLocal = Nothing
    rsServer.Close
    Set rsServer = Nothing
    Set db = Nothing
End Sub 
```

这只是一个粗略的轮廓。很大程度上取决于`YourAlgorithm()`. 从评论中，我收集到它与前一行有关......所以我将`varLastValue`其作为占位符包含在内。

您的部分方法是将 200 万个源行过滤到适用于您选择的工厂的 15K 行。使用以下`WHERE`子句执行此操作`ServerQuery`：

```
WHERE factory_id = 'foo' 
```

如果行顺序对 很重要`YourAlgorithm()`，请在 中包含一个`ORDER BY`子句`ServerQuery`。

此建议的驱动力是避免在 Access 中冗余存储数据。而且，如果你不能完全消除冗余，至少限制它的范围。

然后，您可能会发现可以将 Access 存储合并到一个 db 文件中，而不是四个。单个 db 文件可以简化应用程序的其他方面，并且还应该提供改进的性能。

我认为您应该确保在进入应用程序发展的下一个阶段之前彻底解决了这个问题。我不相信这个挑战在 ASP.Net 中会变得更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T20:09:53.100

您描述的应用程序似乎是“ [ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load) ”的一个示例 - 提取、转换、加载。

这是我作为专业程序员从事的第一个项目之一——而且它显然不平凡。您可以使用许多工具来帮助完成此过程（包括来自 Microsoft 的工具），但它们主要用于填充数据仓库 - 目前尚不清楚您正在构建什么，因此可能没有太大用处。不过，通读 Wikipedia 文章，或许可以查看一些 ETL 工具以获得一些想法。

如果你走自己的路，我建议编写一个 Windows 服务来自动运行你的 ETL 过程。我假设您在某种触发器上运行导入 - 每晚，每小时，当制造系统向您发送消息或其他时；编写您的 Windows 服务来轮询此触发器。

然后，我会从服务中执行您需要移动数据、运行算法等的任何数据库命令；注意错误处理和日志记录（服务没有用户界面，因此您必须将错误写入系统日志并确保有人注意）。考虑将您的数据库代码包装在存储过程中——这使得它们更容易从服务中调用。

听起来这是一个相当复杂的应用程序；注意代码质量，考虑单元测试（尽管很难对数据库代码进行单元测试）。购买 Steve McConnell 的“Code complete”，如果您不是专业的编码员，请从头到尾阅读。

# c - 机器如何理解 OS 内核代码

> ID：12883566
> 
> 赞同：2
> 
> 时间：2012-10-14T15:21:34.307
> 
> 标签：c, assembly, compiler-construction

我在这里有一个非常幼稚的问题，我希望你能纠正我在这里提出的任何错误概念。问题如下：

我的机器上安装了 ubuntu，现在我用语言编写了一个`helloWorld.c`程序。`C`现在，在操作系统上，我安装了一个编译器，当我执行我的`helloWorld.c`程序时，操作系统会调度编译器，它基本上将我的代码编译成机器代码，最终我执行。

现在我的内核代码是用 C 编写的，那么我的机器如何解释该代码呢？假设我的内核代码是`helloWorld.c`，现在我不需要任何编译器来编译此代码。另外，如果我在 ROM 或其他东西中对编译器进行硬编码，那么它是用什么语言编写的？汇编语言？

让我知道我是否已经明确了这个问题。

谢谢。

编辑：通过内核代码，我的意思是操作系统的代码。操作系统代码。我猜它是用C写的吧？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T15:33:37.473

我认为您问题的症结是编译器的一种先有[**鸡的问题**](http://en.wikipedia.org/wiki/Bootstrapping_%28compilers%29#The_chicken_and_egg_problem)。

1.  C 代码需要编译器来构建它。
2.  AC 编译器本身是用 C 编写的
3.  那么我们最初是如何构建编译器的呢？

现在我们有可用的编译器。因此，当开发一个用 C 编写的新版本的编译器（比如 gcc4.7）时，首先要使用旧版本的编译器来构建它。即gcc4.6（已经存在）将用于编译代码并生成最新版本即gcc4.7。

**这可以一直**追溯到第一个编译器，正如您正确提到的那样，它需要大量的汇编代码。

你可能想看看这个[**关于第一个编译器的引导和历史的讨论**](https://stackoverflow.com/questions/1653649/how-was-the-first-compiler-written)。

* * *

**更新 ：**

让**“第一个”** OS+编译器运行的一种相当常见的方法是交叉编译。这是对**所有人**需要什么以及**如何进行的**[**很好的描述**](http://www.ailis.de/~k/archives/19-ARM-cross-compiling-howto.html)。在工程界，这个过程被称为将操作系统**“移植”**到特定的设备/架构。

 ******本质上，一个人需要拥有的第一个准系统：

1.  核心
2.  库
3.  编译器
4.  壳
5.  基本操作系统工具

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T15:26:59.667

内核也被编译成特定于您的处理器架构的机器语言，与生成的 helloWorld 程序相同。

正如您所说，有人用 C 编写了内核，但在已经有操作系统并且能够编译您的新内核的计算机上编译了它。

曾几何时，内核是用机器语言手工编写的，然后使用它编写更复杂的程序，包括用于编写替换内核的编辑器和编译器。剩下的就是历史了……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:27:09.093

操作系统“内核”通常运行在机器的 MODE0 中。它可以直接访问所有硬件，并为其启用了更多指令。如果您的 HELLO WORLD 是直接访问硬件，将其写入内核中......那么......首先，您的引导加载程序将从您的内核所在的任何位置获取二进制数据，然后将为操作内核设置执行环境。这反过来将为您执行程序。******

# asp.net - Windows Azure - 安装 MSI 会导致挂断？

> ID：12883568
> 
> 赞同：0
> 
> 时间：2012-10-14T15:21:35.540
> 
> 标签：asp.net, powershell, azure

我有一个 Windows Azure 启动任务，我正在尝试运行它来安装 MSI。我正在尝试通过 powershell 脚本运行任务。当我有以下情况时，我可以确认 powershell 脚本运行：

```
"Before powershell" >> C:\hello.txt

$msi = "E:\approot\bin\StartupScripts\AppInitalization_x64.msi"

if($true -eq [System.IO.File]::Exists($msi))
{
   "file exists" >> C:\hello.txt
}
else
{
  "file does not exist" >> C:\hello.txt
}

"After powershell" >> C:\hello.txt 
```

如果我运行部署，我的`hello.txt`包含“之前，文件存在”和“之后”。

但是，如果我尝试将文件存在条件更改为：

```
 $arguments= ' /qn /l*v C:\AppInitalization_x64.txt' 
  Start-Process `
     -file  $msi `
     -arg $arguments `
     -passthru 
```

部署挂起（我让它等待了五个小时）。如果我远程进入机器并尝试相同的 powershell 片段，它安装得很好。

当我将它作为启动脚本的一部分时，为什么它会挂起的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:15:39.657

您是否`AppInitialization_x64.txt`查看过 Windows Installer 程序包挂在哪里？这应该会给您一个很好的指示，因为您已经启用了详细日志记录。

# ef-code-first - 为什么将导航属性设置为null时实体框架不删除记录

> ID：12883574
> 
> 赞同：0
> 
> 时间：2012-10-14T15:22:11.600
> 
> 标签：ef-code-first, code-first, one-to-one

我是 EF Code First 的新手，遇到了一些麻烦。

## 这是我的模型

```
public class User 
{
    public string Id { get; set; }
    public string Name { get; set; }
    public virtual Address Address { get; set; }
}

public class Address 
{
    public string Id { get; set; }
    public string Street { get; set; }
    public string Nr { get; set; }
} 
```

* * *

我想要的是，如果我编写以下代码：

```
user.Address = null; 
```

应该删除相关的地址（数据库中的记录），但事实并非如此！它仅删除用户表中的外键。另外，当我分配一个新地址时：

```
user.Address = new Address() { ... }; 
```

它在数据库中创建了第二条记录，为什么？

我想：

1.  如果将 null 分配给`user.Address`数据库记录，则应删除

2.  如果为其分配一个新的地址对象，`user.Address`则应将现有记录数据替换为新的

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:36:48.577

如果您需要删除一个实体，您需要将其标记为已删除。将导航属性设置为 null 不会删除相关实体。请注意，可能有许多导航属性（不同的实体）指向相关实体，并且它们都会在您描述的场景中受到影响。因为您创建了一个新地址，所以创建了一个新实体。然后将导航属性设置为新创建的属性，这会打破旧关系并创建新关系。由于您创建的实体不在数据库中，它将被添加。您也没有删除旧实体，因此它没有从数据库中删除。如果您只想更改实体的属性值，只需将属性设置为新值并调用 SaveChanges。这应该更新数据库中的数据。

# c# - 更新了 web api 的验证示例

> ID：12883576
> 
> 赞同：4
> 
> 时间：2012-10-14T15:22:27.300
> 
> 标签：c#, .net, asp.net-web-api

我在最新的 mvc 4 下载中尝试了 web api 的验证示例代码，但出现了一些错误。有没有人有 ValidationActionFilter 类的更新示例。

这是原始代码

```
public class ValidationActionFilter : ActionFilterAttribute 
{ 
    public override void OnActionExecuting(HttpActionContext context) 
    { 
        var modelState = context.ModelState; 
        if (!modelState.IsValid) 
        { 
            dynamic errors = new JsonObject(); 
            foreach (var key in modelState.Keys) 
            { 
                var state = modelState[key]; 
                if (state.Errors.Any()) 
                { 
                    errors[key] = state.Errors.First().ErrorMessage; 
                } 
            } 

            context.Response = new HttpResponseMessage<JsonValue>(errors, HttpStatusCode.BadRequest); 
        } 
    } 
} 
```

我在 HttpResponseMessage 上遇到错误

```
The non-generic type 'System.Net.Http.HttpResponseMessage' cannot be used with type arguments 
```

看起来我需要添加一个 Json 引用，但我应该使用 JSON.net 吗？使用 Json.net 的一个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:33:39.650

`HttpResponseMessage<T>`来自 beta 版本，它不再存在于版本发布中，请改用以下内容：

```
 actionContext.Response = actionContext.Request
                              .CreateResponse(HttpStatusCode.BadRequest, errors); 
```

# java - 我无法在 onCreate 方法中设置主类变量

> ID：12883579
> 
> 赞同：-1
> 
> 时间：2012-10-14T15:22:36.223
> 
> 标签：java, android, class

主类有两个变量想要访问另一个类：

```
public class MyClassA extends Activity {
int i = 1;
Button b1; 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.i = 31;
        this.b1 = (Button) findViewById(R.id.btn1);
        ~~
    }
 } 
```

第二类想要调用 mainClass 对象中的变量：

```
public class MyclassB implements OnClickListener{
     MyClassA mainClass = new MyClassA();
     Button btn = mainClass.b1;
     int n = mainClass.i;
     public void OnClick(View arg0){
         Log.v("btn:",btn);
         Log.v("int:",n);
     }

     //btn returns null;
     //int returns 1; 
```

但是`onCreate`方法没有设置变量..

为什么不设置主类变量`this.i=31`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:25:39.920

当您像一个简单的类一样实例化您的活动时，它不会执行`onCreate()`，这就是为什么`i`value 保持为`1`. onCreate() 将在您使用`Intent`and时被调用`Activity`。

如评论所述，您可能需要使用内部类（或）匿名类。阅读此[文档](http://tseng-blog.nge-web.net/blog/2009/02/14/implementing-listeners-in-your-android-java-application/)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:33:51.967

**-**使用**内部类**。

```
public class MyClassA extends Activity {
int i = 1;
Button b1; 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.i = 31;
        this.b1 = (Button) findViewById(R.id.btn1);
        ~~
    }

   class MyclassB implements OnClickListener{

// You can directly access the members of the Outer class from the Inner Class

     Button btn = b1;     
     int n = i;

     public void OnClick(View arg0){
         Log.v("btn:",btn);
         Log.v("int:",n);
     }

 }

} 
```

# regex - 正则表达式查找不同字符串前后的数字

> ID：12883582
> 
> 赞同：0
> 
> 时间：2012-10-14T15:23:27.800
> 
> 标签：regex, bash, match

我有一个包含文本和数字的文本文件，例如：

```
MANGO444CHERRYa.b /c-1@2#3APPLEa>b;c. a1$2$3WHITE12 3ab cWHITE5%6^7a=b +cWHITEaba5b6a7baMANGO555CHERRY 1'2'3a,b,c!APPPLE1`2~3ab @cYELLOW123---a- -bcYELLOW 
```

我需要在`MANGO`and`CHERRY`之前得到他`APPLE`的号码`WHITE` （在这种情况下，`444`）。大写单词之间的文本可以是任何内容。我试过这个：

```
(?<=MANGO)\d+((=?.*?APPLE)(=?.*?WHITE)) 
```

但它返回：

```
444CHERRYa.b /c-1@2#3APPLEB>b;c. a1$2$3WHITE 
```

我希望这能以更好的方式说明问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:47:14.787

如果您需要捕获`MANGO`and `BLACK`or之间的小数组`APPLE`：

```
etuardu@subranu:~$ echo '
> MANGO0012BLACK
> MANGO0045txt
> MANGO2314APPLE
> txt00313BLACK' | grep -Po '(?<=MANGO)\d+(?=BLACK|APPLE)'
0012
2314 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:59:29.447

这可能会奏效。我正在使用 sed。

```
sed -nr 's/.*MANGO([0-9]+).*APPLE.*WHITE.*/\1/p' yourfile 
```

编辑以检查 MANGO 和 WHITE 之间的 APPLE。

限制：仅当 MANGO-APPLE-WHITE 在该行中仅出现一次时才有效。

如果没有`-n`选项和`p`标志，`sed`将在找不到匹配项时简单地打印出该行。

# java - FileNotFound 异常

> ID：12883583
> 
> 赞同：0
> 
> 时间：2012-10-14T15:23:30.357
> 
> 标签：java, servlets, file-io, java.util.scanner

我正在尝试读取 servlet 中的文件。我正在使用 Eclipse IDE。

如果我提供相对文件名，我会收到 FileNotFoundException。

```
List<String> ls=new ArrayList<String>();
Scanner input = new Scanner(new File("Input.txt"));
while(input.hasNextLine()) {
   ls.add(input.nextLine());
} 
```

如果我像这样放置绝对路径，则相同的代码可以工作：

```
Scanner input = new Scanner(new File("F:/Spring and other stuff/AjaxDemo/src/com/pdd/ajax/Input.txt")); 
```

Java 文件和文本文件位于同一个文件夹中。

它是否在其他文件夹中搜索文本文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:36:53.990

## 设置工作目录

在 Eclipse 中工作时的一种选择是在启动配置中[设置工作目录。](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.user/tasks/tasks-executionArgs.htm?cp=1_3_6_6)去做这个：

1.  导航到`Run`| `Run Configurations`...
2.  在左侧窗格中选择您的配置
3.  选择`Arguments`选项卡
4.  导航到该`Working directory`部分
5.  选择`Other`
6.  输入您想要的基本目录

您可以通过打印在测试中验证这一点：

```
System.getProperty("user.dir") 
```

这样做的好处是不会更改生产与测试的代码。

## 推荐

但是，最好的方法是始终通过配置明确说明工作目录。这将工作目录置于应用程序的直接控制之下，远离工具和 servlet 容器，例如 Eclipse 和 Tomcat。为此，您将使用以下[`File`构造函数](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.io.File,%20java.lang.String%29)

```
new File(parent, file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:27:38.507

**-**如果您使用 IDE 之类`Eclipse`的，请将文件放在`Application's Project Folder`.

**-**您也可以将它放在`src`文件夹中。

# powershell - 在其他 psake 脚本中包含 psake 脚本时覆盖属性

> ID：12883585
> 
> 赞同：0
> 
> 时间：2012-10-14T15:23:34.570
> 
> 标签：powershell, properties, build, task, psake

我是 psake 的新手，我遇到了这个问题：我有 2 个 psake 脚本：

(1): base_tasks.ps1:

```
properties{ 

$a = "hello"

$b = "hi"

}

task One{
  Write-Host $a
} 
```

(2): 安装.ps1

```
Include .\base_tasks.ps1

properties{ 

$a = "Goodbye"

$b = "Adjeu"

}

task default -depends One 
```

现在，是否可以覆盖文件 1 中的属性和变量？我想将文件 1 用作“基本任务”并在 install.ps1 中使用这些任务并覆盖属性。还是我必须以其他方式做到这一点？我将调用 install.ps1 并使用 install.ps1 中的 $a 和 $b。

*   跳舞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:36:49.287

从[源代码](https://github.com/psake/psake/blob/master/psake.psm1)来看，它看起来`Properties`只是一个函数：

```
function Properties {
    [CmdletBinding()]
    param(
        [Parameter(Position=0,Mandatory=1)][scriptblock]$properties
    )
    $psake.context.Peek().properties += $properties
} 
```

因此，当您再次调用它时，它只会再次添加属性。

然后将属性转换为如下变量：

```
foreach ($key in $properties.keys) {
        if (test-path "variable:\$key") {
            set-item -path "variable:\$key" -value $properties.$key | out-null
        }
    } 
```

# php - XML 复杂解析

> ID：12883586
> 
> 赞同：0
> 
> 时间：2012-10-14T15:23:52.027
> 
> 标签：php, xml

> **可能重复：**
> [在 Xpath 中不同？](https://stackoverflow.com/questions/2812122/distinct-in-xpath)

我正在尝试使用 PHP 从我的 XML 文件中提取数据。我想`ProductRange`根据`WebCategory`我的 XML 文件获得唯一性。但是下面编写的 PHP 代码会产生重​​复/重复的结果。我不知道我在哪里犯错！这是代码：

XML 代码：

```
<?xml version="1.0" standalone="yes"?>
<Rows> 
<Row Code="10000" Name="HTC Wildfire S-A510E " ProductRange="HTC" ProductSubRange="Wildfire" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10001" Name="HTC Wildfire" ProductRange="HTC" ProductSubRange="Wildfire" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10002" Name="Samsung Galaxy S3" ProductRange="Samsung" ProductSubRange="Galaxy" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10003" Name="Samsung Galaxy S2" ProductRange="Samsung" ProductSubRange="Galaxy" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10004" Name="Samsung Galaxy S1" ProductRange="Samsung" ProductSubRange="Galaxy" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10005" Name="Samsung Galaxy Tabloid" ProductRange="Samsung" ProductSubRange="Galaxy Tabloids" WebCategory="Gadgets" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10006" Name="Apple Ipad 3" ProductRange="Apple" ProductSubRange="Tabloids" WebCategory="Gadgets" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10007" Name="Apple Iphone 4S" ProductRange="Apple" ProductSubRange="Iphone" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10008" Name="Apple Iphone 3G" ProductRange="Apple" ProductSubRange="Iphone" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10009" Name="Miscrosoft XBOX 360 Elite" ProductRange="Microsoft" ProductSubRange="XBOX" WebCategory="Consoles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10010" Name="Sony Playstation 4" ProductRange="Sony" ProductSubRange="Playstation" WebCategory="Consoles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10011" Name="Sony PSP Go" ProductRange="Microsoft" ProductSubRange="PSP" WebCategory="Consoles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10012" Name="Sony Erricsson Satio" ProductRange="Sony Ericsson" ProductSubRange="Satio Series" WebCategory="Mobiles" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
<Row Code="10013" Name="TomTom Go Live Gl2" ProductRange="TomTom" ProductSubRange="Go Live" WebCategory="Navigation" WebDescription="Available in black and white.lightweight." Productlength="46mm" ProductWidth="16mm" ProductHeight="21.000" Weight="400gm" Description="Pck: 12   Plt: 1152" />
</Rows> 
```

我想`ProductRange`根据`WebCategory`我的 XML 文件获得唯一性。但是下面编写的 PHP 代码会产生重​​复/重复的结果。我不知道我在哪里犯错！

PHP代码：

```
 <?
 $xml =  simplexml_load_string(file_get_contents('XML/products.xml'));
 $prifix = '/categories/listings/' ;
 $cat=array();
 foreach ($xml as $row) {
 $attr = $row->attributes();
 if (!in_array((string)$attr->WebCategory, $cat)){
  printf('<li>%s</li>', anchor($prifix . $attr->Code, $attr->ProductRange));
  $cat[] = (string)$attr->WebCategory;
 }
 }
 ?> 
```

**请注意：** 我想`ProductRange`根据给定的条件进行提取，`WebCategory`例如，我想根据他们的 Webcategory 显示所有 ProductRange，如下所示选择 SQL 查询：

```
 "select ProductRange from XML where WebCategory='Mobiles'" 
```

它可以给我基于 XML 的不同的“ProductRange”（非重复结果），如下所示：

HTC
三星
iPhone

所以......我尽了最大努力，但未能使用上述编码方法生成独特的“ProductRange”。

请纠正我哪里错了，并请指导我需要在哪里进行更改以使其变得独一无二`ProductRange`，如上所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:48:04.547

你可以试试

```
$list = groupBy($xml, "WebCategory");
foreach ( $list['Mobiles'] as $product ) {
    printf('<li>%s %s</li>', $product->Code, $product->Name);
} 
```

输出

*   10000 HTC 野火 S-A510E*   10001 HTC 野火*   10002三星盖乐世S3*   10003三星盖乐世S2*   10004 三星盖乐世 S1*   10007 苹果 iphone 4S*   10008 苹果 iphone 3G*   10012 索尼爱立信 Satio

使用的功能

```
function groupBy($xml, $categoryName) {
    $xml = new \SimpleXMLElement($xml);
    $category = array();
    foreach ( $xml as $row ) {
        $attr = $row->attributes();

        if (! isset($attr->$categoryName)) {
            trigger_error("$categoryName does not exist in XML");
            break;
        }

        $category[(string) $attr->$categoryName][] = $attr;
    }
    return $category;
} 
```

[观看现场演示](http://codepad.viper-7.com/Fkj83F)

# forms - zip 样式 @repeat 覆盖嵌套形式

> ID：12883589
> 
> 赞同：4
> 
> 时间：2012-10-14T15:24:05.770
> 
> 标签：forms, scala, nested, playframework-2.0, repeat

`@repeat`非常有用；但是，我遇到了嵌套表单的障碍。

我需要为比赛日程制作一个表格，其中包含 2 个属性、日程数据（比赛日期、时间、地点、对手）和提交团队备注（例如“由于冬季风暴，1 月 7 日的比赛已移至1 月 9 日在...夏威夷 ;-)")

表单映射基于：

```
case class Schedule(
  composite: Seq[Composite], 
  note: Seq[ScheduleNote]
) 
```

然后在模板中显示表单，我有：

```
@repeat(_form("composite"), min=numGames) { f=>
  @inputDate(f("gameDate"), 'id-> "gameDate", '_label-> "Game Date")
  ....
}
@repeat(_form("note"), min=numGames) { f=>
  @inputDate(f("gameNote"), '_label-> "Game Notes")
  ....
} 
```

当然，游戏笔记需要与游戏数据配对，上面不会发生这种情况，因为看起来我需要`@repeat`单独组合游戏数据和笔记。

这将是非常非常好的： `@repeat(_form("composite").zip(_form("note")), min=numGames) { case(fc,fn)=>`

在嵌套的表单元素上。

反正我可以把它拉下来吗？查看[源代码](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/Helpers.scala#L62)似乎不是，但也许通过我的库的皮条客这是可能的（或者，因为我是针对 2.1 构建的，所以在框架支持似乎是一个限制之前修改一些东西）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T17:05:41.597

**编辑**
实际上，我最初的尝试使生成的字段数量增加了一倍；这个生成正确数量的字段：

```
object repeat2 {
  import play.api.data.Field, play.api.templates.Html
  def apply(field: (Field,Field), min: Int = 1)(f: (Field,Field) => Html) = {
    field match{ case(a,b)=>
      (0 until math.max(
        if (a.indexes.isEmpty) 0 else a.indexes.max + 1, min)
      ).map(i => f.apply(a("["+i+"]"), b("["+i+"]")) )
    }
  }
} 
```

如果编辑表单正确映射表单数据值，则仍待定......

**原始**
实验，编译：

```
// in a form utility object
object repeat2 {
  import play.api.data.Field, play.api.templates.Html
  def apply(field: (Field,Field), min: Int = 1)(f: Field => Html) = {
    field match{ case(a,b)=>
      (0 until math.max(
        if (a.indexes.isEmpty) 0 else a.indexes.max + 1, min)
      ).map(i => f(a("["+i+"]")) + f(b("["+i+"]")) )
    }
  }
}

// then, importing above in a template
@repeat2( (_form("composite"), _form("note")), min=5) { f=>
  @inputDate(f("gameDate"), 'id-> "gameDate", '_label-> "Game Date")
  ...
  @inputDate(f("gameNote"), '_label-> "Game Notes")
} 
```

并根据需要一起生成游戏数据和笔记。

至于它是否适用于表单编辑，待定；-)

# ios - 在 UISlider 中选择一个范围

> ID：12883597
> 
> 赞同：4
> 
> 时间：2012-10-14T15:24:56.403
> 
> 标签：ios, cocoa, range, uislider

我问我是否可以创建一个有 2 个句柄的 uislider 来选择一个范围。就像这里：

![在此处输入图像描述](../Images/d40242ca9b2c316eb7c4c62c64c5df16.png)

我面临的问题是我不想使用自定义 UIControl 子类。我需要一个 UISlider 子类或其他解决方案来解决这个问题，因为很多代码都是基于 UISlider 特定属性等的。那么有没有可能实现这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T08:22:49.053

看下面的例子：

[http://www.cocoacontrols.com/platforms/ios/controls/rangeslider](http://www.cocoacontrols.com/platforms/ios/controls/rangeslider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:31:54.247

您可以子类化`UISlider`，但这将非常困难。你的类应该提供相当多的新属性，而旧的根本没有多大意义。

不确定您的代码如何在很大程度上基于`UISlider`特定事物 - 因为一切都会改变含义（即范围而不是一个值）。

如果您真的需要一个公共基类，您可以将控件封装（“具有”关系）在自定义类中，并让它处理不同的类型。

我使用自定义视图实现了一个类似的控件，而且它碰巧很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:30:08.287

UISlider 不提供您所追求的功能，并且子类化 UISlider 可能行不通。`value`这样的控制会是什么？滑块的值是一个数字，但您希望它是一个范围。考虑一个复制您需要的 UISlider 属性的自定义控件。

# php - Zend Framework 2中如何获取控制器名、动作名

> ID：12883598
> 
> 赞同：3
> 
> 时间：2012-10-14T15:25:00.910
> 
> 标签：php, zend-framework2

我在 Zend Framework 2 中有一个默认模块：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{
    public function indexAction()
    {
        return new ViewModel();
    }
} 
```

如何获取当前控制器的名称或操作名称...并将其传递给视图和/或布局？不得不说，我只是从ZF2框架入手。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-14T15:29:10.410

尝试如下 ZF2

```
$this->getEvent()->getRouteMatch()->getParam('action', 'index'); 

$this->getEvent()->getRouteMatch()->getParam('controller', 'index'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-17T08:20:10.470

这适用于我的项目：

```
$this->getHelperPluginManager()->getServiceLocator()->get('application')->getMvcEvent()->getRouteMatch()->getParam('action', 'index');

$controller = $this->getHelperPluginManager()->getServiceLocator()->get('application')->getMvcEvent()->getRouteMatch()->getParam('controller', 'index');

$controller = array_pop(explode('\\', $controller)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-23T13:14:27.247

**在 Zend-3 框架的控制器中获取控制器/动作名称**

```
private function getControllerActionName()
{
    $currentController = $this->getEvent()->getRouteMatch()->getParam('controller', 'index');
    $explode_controller = explode('\\', $currentController);
    $currentController = strtolower(array_pop($explode_controller));
    $currentController = str_replace('controller', '', $currentController);
    $currentAction = strtolower($this->getEvent()->getRouteMatch()->getParam('action', 'index'));
    return array(
            'controller' => $currentController,
            'action' => $currentAction,
        );
} 
```

这个对我有用。我希望，这也会对你有所帮助。感谢您提出这个问题:)

# autotools - 使用自动工具处理文件名中的空格

> ID：12883599
> 
> 赞同：5
> 
> 时间：2012-10-14T15:25:07.083
> 
> 标签：autotools, automake

如何告诉 automake 使用名称中带有空格的文件？这似乎不起作用。

```
bin_PROGRAMS = prog
prog_SOURCES = "a file.c" "another file.c" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T00:02:43.010

你不能。（令人惊讶的是，在我看来，这是 Automake 中唯一一个极其严重的错误，但人们几乎没有抱怨过。）

我曾经通过重命名源树中的*文件*使它们没有空格，然后将它们重命名为它们在`install-data-hook`. （[链接](https://github.com/ptomato/gnome-inform7/blob/eec4d1b8d4773607c2632665b82497af2669ad59/data/Inform7/Extensions/GrahamNelson/Makefile.am)）

但是，这与您的问题无关，对此我的回答仍然是：您不能。据我所知，`prog_SOURCES`只是一个shell变量。一个特别命名的，当然，但是一旦 Automake 找到它，它就会简单地用空格分隔它。空格是空格，无论它们是转义的、引用的还是普通的。他们应该设计它以便您可以逃脱空间，但我相信他们现在不会更改它，因为它会导致广泛的 Automake 损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T11:26:22.487

解决它的一种方法，虽然很笨重，是在您的源中存储文件的两个副本

```
another file.ext
another_file.ext 
```

然后使用

```
EXTRA_DIST = another_file.ext

dist-hook:
    cp $(distdir)/another_file.ext "$(distdir)/another file.ext" 
```

您将能够分发包含空格的文件，您仍然需要保留带有替换空格的文件，并确保文件同步（并向其他人表明这一事实）。

在大多数情况下，重命名不带空格的文件会更方便，除非您遇到需要间隔文件的非常奇怪的情况。

# c# - 如何将多个查询更改为单个查询？

> ID：12883603
> 
> 赞同：0
> 
> 时间：2012-10-14T15:25:33.860
> 
> 标签：c#, entity-framework, linq-to-entities

我有三个表，即“项目”、“平台”、“详细信息”。

我从 Projects 表、Platforms 表和 Details 表中收集了详细信息。从详细信息表中，我们可能会得到多个值或单个值。

我已经编写了如下的 Linq 查询：

```
using (PEntities CSProject = new PEntities())
{
    projectId =    (from _project in CSProject.Projects
                    where _project.ProjectName == project
                    select _project.ProjectId).SingleOrDefault();

    platformId =   (from platformID in CSProject.Projects
                    where platformID.ProjectName == project
                    select platformID.PlatformId).SingleOrDefault();

    platformName = (from platfrmName in CSProject.Platforms
                    where platfrmName.PlatformId == platformId
                    select platfrmName.PlatformName).SingleOrDefault();

    cSProjectId =  (from _csproject in CSProject.Details
                    where _csproject.ProjectId == projectId
                    select _csproject.CsprojectId).ToList<long?>();
} 
```

您能帮我在一行中编写上述所有查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:40:15.640

您可以为要在语句中获取的每个值创建一个[相关子查询](http://en.wikipedia.org/wiki/Correlated_subquery)`select`，如下所示（在 SQL 中）：

```
select
    (select ProjectId from Projects where ProjectName = @project) as ProjectId,
    (select PlatformId from Projects where ProjectName = @project) as PlatformId,
    ... 
```

在 SQL 中，上面不需要查询表（它将返回一行），但您需要 LINQ-to-Entities 中的某些内容，这将强制您查询上下文，确保有表中的至少一个值，等等。

不用说，这是不值得的，虽然您会减少对数据库的调用，但发送的实际查询将*非常*复杂。

也就是说，你最好做两件事之一。第一个是创建一个存储过程，该过程创建相关的子查询并返回一个如上所述的记录，然后从 LINQ-to-Entities 调用它。

另一种方法是，如果您真的在寻找一个存储这些值的*记录，则将它们存储在一个类型中。*以下是如何以匿名类型执行此操作：

```
using (PEntities CSProject = new PEntities())
{
    var results = new {
        ProjectId = (
            from _project in CSProject.Projects
            where _project.ProjectName == project
            select _project.ProjectId).SingleOrDefault(),

        PlatformId = (
            from platformID in CSProject.Projects
            where platformID.ProjectName == project
            select platformID.PlatformId).SingleOrDefault(),

        PlatformName = (
            from platfrmName in CSProject.Platforms
            where platfrmName.PlatformId == platformId
            select platfrmName.PlatformName).SingleOrDefault();

        CsProjectId = (
            from _csproject in CSProject.Details
            where _csproject.ProjectId == projectId
            select _csproject.CsprojectId).ToList<long?>();
    };
} 
```

您不会看到对数据库的调用减少，但如果您要的是具有这些值的单个记录，那么这将实现它。

# html - GIF作为css背景图片

> ID：12883608
> 
> 赞同：0
> 
> 时间：2012-10-14T15:25:53.337
> 
> 标签：html, css, background-image

我在css中有这样的东西

```
.ajax-loader {
    background-image: url(../images/icon/loader.gif);
} 
```

并用于这样的 HTML 元素

```
<div class='ajax-loader'></div> 
```

我的问题是：

如果在一个页面中多次使用*ajax-loader样式，图片**loader.gif*会被加载多次还是只加载一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:30:05.333

这个图片会被加载一次。这很简单，就像`object-oriented programing`定义一个类一次，到处使用。在 css 中也是如此。

加载图像后，您可以在任何地方使用它，这也是一种很好的编程方法

# ios - iOS：引用计数

> ID：12883616
> 
> 赞同：1
> 
> 时间：2012-10-14T15:26:34.987
> 
> 标签：ios

我正在做一些关于增加引用计数的研究。请帮助找到它。下面是示例代码和研究，我正在做下面每一行的引用计数。

.h 文件

```
NSArray *tempArray;
@property (nonatomic, retain) NSArray *tempArray; 
```

.m 文件

```
@synthesize tempArray;

    -(void) sampleFunction
{
    NSArray *myArray = [[NSArray alloc] init]; // Thinking reference count increases to "1"
    tempArray = myArray;// reference count increases and tempArray gets retain count "1" now.
    tempArray = myArray;// reference count increases and tempArray gets retain count "2" now.
    tempArray = [NSArray arrayWithObject:@"SomeString"]; // retain count = ?

} 
```

我知道这段代码可能不是为了运行，但这只是为了研究在这种情况下引用计数会发生什么。我尝试打印retainCount，但没有显示正确的结果。请告诉我引用计数如何在每一行上工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:58:40.193

在第 2、3 和 4 行中，您将实例变量影响`tempArray`到与`myArray`. 但是如果你这样写，你会试图影响一个实例变量。事实上，如果你没有在你的代码中编写任何`@synthesize tempArray`或`@synthesize tempArray = tempArray`，默认情况下，自动生成的用于存储属性值的实例变量与属性名称相同，但带有下划线前缀。因此，作为属性名称`tempArray`，实例变量被命名`_tempArray`。实例变量`tempArray`本身不存在，您的代码行无效。

因此，如果我们假设您改为写：

```
-(void) sampleFunction
{
  NSArray *myArray = [[NSArray alloc] init]; // (1)
  self.tempArray = myArray; // (2)
  self.tempArray = myArray; // (3)
  self.tempArray = [NSArray arrayWithObject:@"SomeString"]; // (4)
} 
```

*   在 (1) 中，您正在创建一个全新的 NSArray 实例。"alloc" 总是使用 1 的引用计数来初始化新实例
*   在 (2) 中您编写`self.tempArray = myArray`（这等效于`[self setTempArray:myArray];`并因此调用属性设置器），因此您将属性设置为指向您在 (1) 中创建的同一数组。因此，该数组由属性保留，并且它的 retainCount 增加 1，因为它由属性保留并被`myArray`属性保留`self.tempArray`。
*   在 (3) 中，您将属性影响到与以前完全相同的对象。这参考计数根本没有改变。你可以理解，好像你`self.tempArray`用另一个值替换了 的值，所以属性的设置器释放旧值（减少它的引用计数），然后保留新值（从而增加它的引用计数）。在您的情况下，旧值和新值是同一个对象，您将减少数组的引用计数，然后再次重新增加它。在实践中，引用计数甚至根本不会改变（而不是再次递减+递增）以避免对象的任何潜在释放，因为属性设置器的默认实现如下：

    ```
    -(void)setTempArray:(NSArray*)newValue
    {
      // check if old and new value are different. Only do sthg if they are different
      if (newValue != _tempArray)
      {
        [_tempArray release];  // release old value
        [newValue retain];     // retain new value
        _tempArray = newValue; // store new value in the backing variable associated with the property
      }
    } 
    ```

*   在 (4) 中，您再次替换了 property 的值`tempArray`，但这次是用一个全新的对象。因此，该物业将释放其旧价值并保留新价值。因此，您在 (1) 中创建的第一个数组的引用计数为 2（由`myArray`和 by保留`self.tempArray`）将其引用计数减少到 1（因为该属性将不再保留它），并且您创建的新实例`[NSArray arrayWithObject:@"SomeString"]`由属性，所以它的引用计数是 +1。

* * *

如果你用`self.tempArray = ...`直接使用实例变量替换（所以使用属性），使用实例变量不会保留它们受影响的对象（除非你使用 ARC 但似乎你没有），所以对象的引用计数在 (2)、(3) 和 (4) 中根本不会改变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-02T06:58:34.717

实际上，`retain count`仅在 new、alloc、retain 和 copy 条件下增加，但如果我们通过 this 为对象提供所有权，`retain count`则除了增加之外，没有增加的可能性`retain count`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T15:43:31.253

首先，[不要尝试依赖retainCount。](http://whentouseretaincount.com)

在那之后：你想知道在你列举的那些场景中会发生哪种情况。好吧，**一个都没有。**

为什么？因为，首先，您直接分配给实例变量 - 这不会改变保留计数。完全没有。除非你使用 ARC，但似乎你没有。

你可能想给对象的*属性*赋值，也就是说，写

```
self.tempArray = myArray; 
```

等等。现在因为*属性*本​​身（而**不是**它的支持 ivar！）被声明为`retain`，相应的访问器方法将增加*分配给属性的对象的引用计数。*但是，为了不泄漏内存，访问器方法通常是通过在分配时释放先前分配的对象从而保留新的对象来实现的，即

```
- (void)setTempArray:(NSArray *)tmp
{
    [tmp retain];
    [tempArray release];
    tempArray = tmp;
} 
```

所以基本上，当您重新分配`myArray`给`self.tempArray`属性时，它会丢失并获得引用，因此它的引用计数根本不会改变。

当您将另一个新数组分配给该属性时，再次`myArray`丢失一个引用计数，降至 0 它被释放，然后`+ [NSArray arrayWithObject:]`保留使用创建的新数组。在此之后，它的确切引用计数应该是 1，因为它是使用创建`alloc - init - autorelease`的（这就是方法的实现方式），并且它已由属性保留。但是，返回的值`- retainCount`仍然（并且永远不会）被依赖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T15:48:16.033

在您的特定示例中，您`tempArray`直接分配给而不是`self.tempArray`，因此`retainCount`将始终保持在 1 。但是，让我们来看看如果你按照我认为你的意思去做会发生什么。

在 Objective-c 中，一个合成的保留属性将有一个 setter 在功能上等价于：

```
-(void) setTempArray:(NSArray *value)
{
    if(tempArray != value) {
        [tempArray release];
        tempArray = [value retain];
    }
} 
```

当一个新对象被分配给它时，这会增加保留计数，当它被设置为同一个对象时基本上什么都不做，而当其他东西被分配给它时释放它。因此，您的示例中的保留计数如下所示：

```
-(void) sampleFunction
{
    NSArray *myArray = [[NSArray alloc] init]; // Retain count of 1
    self.tempArray = myArray; // 2
    self.tempArray = myArray; // still 2
    self.tempArray = [NSArray arrayWithObject:@"SomeString"]; 
    // myArray.retainCount is 1,
    // tempArray.retainCount is 2 but with 1 autorelease
    // myArray leaks
} 
```

# java - 检查字符串是否匹配除另一个字符串中的一个以外的所有字符

> ID：12883618
> 
> 赞同：3
> 
> 时间：2012-10-14T15:26:52.863
> 
> 标签：java, string, list, loops, split

我有一个字符串列表，对于每个字符串，我想对照其他字符串检查它的字符，以查看除了一个之外，它的所有字符是否相同。

例如，将返回 true 的检查将是检查

岩石对着锁

时钟和羊群有一个不同的特征，不多不少。

岩石对凹痕显然会返回错误。

我一直在考虑首先遍历列表，然后在其中有一个辅助循环来检查第一个字符串与第二个字符串。

然后使用`split("");`创建两个包含每个字符串的字符的数组，然后将数组元素相互检查（即将每个字符串与另一个数组 1-1 2-2 等中的相同位置进行比较...），只要只有一个字符比较失败，那么对这两个字符串的检查为真。

无论如何，我有很多字符串（4029），考虑到我目前正在考虑实现的内容将包含 3 个循环，每个循环都包含在另一个循环中，这将导致一个立方循环（？），这需要很长时间才能使用这么多元素不会吗？

有没有更简单的方法来做到这一点？或者这种方法真的可以吗？或者 - 希望不是 - 但我提出的解决方案是否存在某种潜在的逻辑缺陷？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T15:31:04.040

为什么不以天真的方式去做呢？

```
bool matchesAlmost(String str1, String str2) {
    if (str1.length != str2.length)
        return false;
    int same = 0;
    for (int i = 0; i < str1.length; ++i) {
        if (str1.charAt(i) == str2.charAt(i))
            same++;
    }
    return same == str1.length - 1;
} 
```

现在您可以使用二次算法来检查每个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:35:29.000

假设两个字符串的长度相等

```
String str1 = "rock";
        String str2 = "lick";

        if( str1.length() != str2.length() )
            System.out.println( "failed");

        else{
            if( str2.contains( str1.substring( 0, str1.length()-1)) || str2.contains(  str1.substring(1, str1.length() )) ){
                System.out.println( "Success ");
            }

            else{
                System.out.println( "Failed");
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T01:53:47.997

不确定这是否是最好的方法，但即使两个字符串长度不同，这种方法也有效。例如： cat & cattp 它们相差一个字符 p 而 t 是重复的。看起来像 O(n) 时间解决方案，为 hashmap 和字符数组使用了额外的空间。

```
/**
 * Returns true if two strings differ by one character
 * @param s1 input string1
 * @param s2 input string2
 * @return true if strings differ by one character 
 */
boolean checkIfTwoStringDifferByOne(String s1, String s2) {
    char[] c1, c2;

    if(s1.length() < s2.length()){
        c1 = s1.toCharArray();
        c2 = s2.toCharArray();
    }else{
        c1 = s2.toCharArray();
        c2 = s1.toCharArray();
    }

    HashSet<Character> hs = new HashSet<Character>();

    for (int i = 0; i < c1.length; i++) {
        hs.add(c1[i]);
    }
    int count = 0;
    for (int j = 0; j < c2.length; j++) {
        if (! hs.contains(c2[j])) {
            count = count +1;
        }
    }

    if(count == 1)
        return true;
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-16T05:48:41.867

```
Best way is to concatenate strings together one forward and other one in reverse order. Then check in single loop for both ends matching chars and also start from middle towards ends matching char. If more than 2 chars mismatch break.
If one mismatch stop and wait for the next one to complete if it reaches the same position then it matches otherwise just return false. 

    public static void main(String[] args) {

        // TODO code application logic here
        New1 x = new New1();
        x.setFunc();
      }

       static void setFunc(){ 
          Set s         = new HashSet<Character>();
          String input  = " aecd";
          String input2 = "abcd";
          String input3 = new StringBuilder(input2).reverse().toString();
          String input4 = input.concat(input3);
          int length    = input4.length(); 

          System.out.println(input4);
          int flag      = 0;

          for(int i=1,j=length-1;j>i-1; i++,j--){

            if(input4.charAt(i)!=input4.charAt(j)){ 

                System.out.println(input4.charAt(i)+" doesnt match with "+input4.charAt(j));
                    if(input4.charAt(i+1)!=input4.charAt(j)){  
                         System.out.println(input4.charAt(i+1)+" doesnt match  with "+input4.charAt(j));
                         flag = 1;
                         continue; 
                    } else if( input4.charAt(i)!=input4.charAt(j-1) ){
                         System.out.println(input4.charAt(i)+" doesnt match with "+input4.charAt(j-1));
                         flag = 1;
                         break; 
                    } else if(input4.charAt(i+1)!=input4.charAt(j-1) && i+1 <= j-1){
                         System.out.println(input4.charAt(i+1)+" doesnt match with xxx "+input4.charAt(j-1));
                         flag = 1;
                         break; 
                    }
                    } else {
                      continue;
                    }
             }

              if(flag==0){
                   System.out.println("Strings differ by one place");
              } else {
                   System.out.println("Strings does not match");
              }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-18T21:04:41.263

假设所有字符串都具有相同的长度，我认为这会有所帮助：

```
public boolean differByOne(String source, String destination)
{
    int difference = 0;

    for(int i=0;i<source.length();i++)
    {
        if(source.charAt(i)!=destination.charAt(i))
        {
            difference++;

            if(difference>1)
            {
                return false;
            }
        }
    }

    return difference == 1;
} 
```

# css - 定位DIV的相对？

> ID：12883619
> 
> 赞同：0
> 
> 时间：2012-10-14T15:26:55.313
> 
> 标签：css, html, position

将所有`div`s 定位在页面中是一种好方法吗？

```
div { position:relative; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:28:28.797

不会。它会建立您不需要的定位上下文，并且可能会干扰您可能做的其他事情。

# c++ - 用VS2012构建wxWidgets后，可以在lib文件夹中删除哪些文件？

> ID：12883624
> 
> 赞同：2
> 
> 时间：2012-10-14T15:27:12.377
> 
> 标签：c++, visual-studio, visual-studio-2012, wxwidgets

我已经使用 VisualStudio Express 2012 (nmake) 构建了 wxWidgets，但我不知道我可以在 lib 文件夹中删除哪些文件。以下文件类型位于 lib 文件夹中： .exp .manifest .ilk .pdb .lib .dll

我知道我需要 .lib 和 .dll，但剩下的有什么用？在另一个版本中，我也有以下文件类型： .obj .tlog .log

这些类型中有哪些是我可以安全删除的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:39:59.920

也许它有助于了解这些文件的用途

*   exp：定义链接器要导出的函数[1](http://msdn.microsoft.com/en-us/library/se8y7dcs%28v=vs.80%29.aspx)
*   obj：编译的输出，通常被链接器用来生成二进制文件[2](http://msdn.microsoft.com/en-us/library/w63ck4sd.aspx)
*   同类：vc用来加速生成（多次）[3](http://msdn.microsoft.com/en-us/library/1716cz97.aspx)
*   pdb：包含供调试器和链接器使用的信息[4](http://msdn.microsoft.com/en-us/library/yd4f8bd1%28v=vs.71%29.aspx)
*   tlog：由 vc 用于加速编译时间[5](http://dickyjim.wordpress.com/tag/tlog-files/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:16:22.820

您绝对应该保留`.pdb`文件以便能够调试。其余的（不包括`.lib`，`.dll`显然）可以删除，但恕我直言，这是不值得的。如果您想节省空间，您应该删除整个`build/msw/vc_mswu[d][dll]`（或者`build/msw/vc11_mswu[d][dll]`如果您使用每个版本的构建目录）目录，因为这确实需要很多地方。

# c# - 处理复合 WinForms UserControl 的某个组件上的 Click 事件

> ID：12883627
> 
> 赞同：-1
> 
> 时间：2012-10-14T15:27:32.417
> 
> 标签：c#, winforms, user-interface, user-controls

我用 C# 开发了一个 WinForms `UserControl`。本质上是一个复合控件，由多个子控件组成，例如 a
、a 、 a等。`UserControl``PictureBox``CheckBox``Label`

从调用代码中，我希望能够`Click`为我的控件处理事件。
但是，我希望当且仅当用户单击我的控件的某个组件（例如`PictureBox`. 如果用户单击我控制范围内的任何其他位置，则不应引发该事件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:54:48.930

假设您使用的是 WinForms。

您应该将`Click`来自图片框的事件委托给**您自己的事件**，然后从调用代码中订阅它。

```
public class MyControl : System.Windows.Forms.UserControl
{
    // Don't forget to define myPicture here
    ////////////////////////////////////////

    // Declare delegate for picture clicked.
    public delegate void PictureClickedHandler();

    // Declare the event, which is associated with the delegate
    [Category("Action")]
    [Description("Fires when the Picture is clicked.")]
    public event PictureClickedHandler PictureClicked;

    // Add a protected method called OnPictureClicked().
    // You may use this in child classes instead of adding
    // event handlers.
    protected virtual void OnPictureClicked()
    {
        // If an event has no subscribers registerd, it will
        // evaluate to null. The test checks that the value is not
        // null, ensuring that there are subsribers before
        // calling the event itself.
        if (PictureClicked != null)
        {
            PictureClicked();  // Notify Subscribers
        }
    }
    // Handler for Picture Click.
    private void myPicture_Click(object sender, System.EventArgs e)
    {
        OnPictureClicked();
    }
} 
```

# objective-c - 集合视图布局

> ID：12883628
> 
> 赞同：2
> 
> 时间：2012-10-14T15:27:34.967
> 
> 标签：objective-c, ios, xcode, ios6, uicollectionview

是否可以创建带有收藏视图的 3 栏报纸式布局？

我尝试使用 3 个表格视图，它可以工作，但非常滞后。因此，如果集合视图是本机解决方案，我认为最好使用它们。它们适合我的任务吗？

主要问题是所有单元格都是从左到右填充的：

```
1 2 3
4 5 6 
```

我需要：

```
1 5 9
2 6 10
3 7 11
4 8 12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T17:19:30.213

是的，我认为collectionview 会满足您的需求。您可能必须使用自定义布局。查看 WWDC 2012 视频中的“collectionviews 简介”和“collection view 的高级布局”。通过使用自定义布局，您可以以任何您喜欢的方式对单元格进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:24:12.677

我建议您重新排序数据源。

**编辑：**

```
NSArray *oldArr = @[@"1", @"2", @"3", @"4", @"5", @"6", @"7", @"8", @"9", @"10", @"11"];
NSMutableArray *newArr = [NSMutableArray arrayWithCapacity:oldArr.count];

int row = ceilf(oldArr.count / 3.f);
int remainder = oldArr.count % 3;

for (int i = 0; i < row; i++) {
    [newArr addObject:[oldArr objectAtIndex:i]];

    if (i == (row - 1) && remainder == 1)
        continue;

    [newArr addObject:[oldArr objectAtIndex:i + row]];

    if (i == (row - 1) && remainder == 2)
        continue;

    [newArr addObject:[oldArr objectAtIndex:i + row * 2]];
} 
```

结果：

```
1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, = > 1, 5, 9, 2, 6, 10, 3, 7, 11, 4, 8 
```

格式化打印：

```
1  2  3
4  5  6
7  8  9
10 11

to

1  5  9
2  6  10
3  7  11
4  8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:25:44.903

好的，我已经修复了我的 3 表视图布局。我没有从 XIB 加载单元格，而是以编程方式创建的。这给了我巨大的性能提升。谢谢你们的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:21:58.190

您可以通过将滚动方向更改为水平。这样，您就可以按照自己的意愿对其进行排序，并且滚动是最有意义的。

如果你想通过垂直滚动来做到这一点，你必须编写自己的`UICollectionViewFlowLayout`. 但是会让用户体验非常糟糕。

# objective-c - 如何在代码中引用当前视图控制器

> ID：12883632
> 
> 赞同：0
> 
> 时间：2012-10-14T15:27:55.613
> 
> 标签：objective-c, ios, xcode

我是一名新的 iOS 开发人员，有一个简单的问题：我想以编程方式从一个视图控制器移动到下一个视图控制器，我该如何编写这段代码？

到目前为止，我有：

```
UINavigationController *navigationController;
    navigationController = [[UINavigationController alloc] init];
    [self.view addSubview:navigationController.view];
    [navigationController pushViewController:viewController animated:NO]; 
```

我什至不确定这最终是否会起作用，但我的主要问题是第 4 行中的“viewController”。程序不知道那是什么。这是我当前视图控制器的名称，但我如何设置它才能知道我所说的视图控制器是什么意思？

顺便说一句，上面是 if/else 语句的一部分，该语句发生并连接到 NSUserDefaults 类，以使我所指的视图控制器仅在先前未接受条款和条件时才加载。那会奏效吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:37:27.007

首先是简单的答案：`self`当你想传递“当前”对象时传递。

更重要的考虑是：屏幕上有导航控制器吗？除非您使用（可能）是窗口的根视图控制器的导航控制器，否则您的代码可能不会做太多事情。

这很容易在你的故事板中设置（“嵌入”->“导航控制器”），然后你不需要在代码中实例化它，你只需使用 self.navigationController （通常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:38:38.987

通常，您会在推送之前实例化 viewController，这样程序就会知道它是什么。而且，当然，您可以有一个 if 语句，并根据 if 语句的评估方式推送这个新的视图控制器。

我不确定您编写的代码是否正确取决于您的应用程序的结构以及您在哪里执行此操作。通常，导航控制器会成为窗口的根视图控制器，并且在创建导航控制器时设置它自己的根视图控制器

# java - 从 JXTaskPaneContainer 中查找并删除 JXTaskpane

> ID：12883633
> 
> 赞同：0
> 
> 时间：2012-10-14T15:28:03.020
> 
> 标签：java, swing, swingx, jxtaskpane

我有一个模型视图控制器应用程序。该视图包含一个带有多个 JXTaskPane 的 JXTaskContainer。JXTaskPane 有一个删除按钮，可以将其从容器中删除。

假设所有通过单击按钮自动添加的 JXTaskpanes，我如何找到正确的 JXTaskPane，然后将其从容器中删除？

```
`enter code here`class Holder extends JFrame {

Arraylist <Section> sectionList = new ArrayList<Section>();
JPanel holderPanel = new JPanel;
JXTaskPaneContainer sectionContainer = new JXTaskPaneContainer();

this.add(holderPanel);

// here goes other stuff

 class AddSectionAction implements ActionListener{

  //actionPerformed
    Section section = new Section();
    section.addActionListener(new DeleteSectionAction);
    sectionList.add(section);
    sectionContainer.add(section);

    holderPanel.add(sectionContainer);
    holderPanel.revalidate();   
    holderPanel.repain();

 }

 class DeleteSectionAction implements ActionListener{

   //actionPerformed

   sectionContainer.remove(THE SECTION I WANT TO REMOVE ); 

 }
}

public class Section extends JXTaskPane {

   JTextArea textArea;
   JButton deleteMe;

   //other stuff here

   public JButton  getDeleteMe{
     return deleteMe;
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:47:45.597

有很多方法可以实现这一点，可能最简单的方法是将引用传递`Section`给`DeleteSectionAction`侦听器

```
public class DeleteSectionAction implements ActionListener{
    private Section section;
    public DeleteSectionAction(Section section) {
        this.section = section;
    }

    public void actionPerformed(ActionEvent evt) {
        // Personally, I'd have a "removeSection" method in
        // the container that would also remove the
        // section from the array list...
        sectionContainer.remove(section); 
    }

 } 
```

# php - 使用 jQuery Ajax 时返回的 JSON 似乎混淆了

> ID：12883644
> 
> 赞同：0
> 
> 时间：2012-10-14T15:29:17.340
> 
> 标签：php, jquery, ajax, json, api

我有一个具有以下行的 php 脚本：

```
echo json_encode(array('success'=>'true','userid'=>$userid, 'data' => $array)); 
```

它返回以下内容：

```
{
"success": "true",
"userid": "1",
"data": [
    {
        "id": "1",
        "name": "Trigger",
        "image": "",
        "subtitle": "",
        "description": "",
        "range1": null,
        "range2": null,
        "range3": null
    },
    {
        "id": "2",
        "name": "DWS",
        "image": "",
        "subtitle": "",
        "description": "",
        "range1": null,
        "range2": null,
        "range3": null
    }
] 
```

}

但是当我如下调用 jQuery ajax 时：

```
$.ajax({
    type: 'POST',
    url: 'url',
    crossDomain: true,
    data: {name: name},
    success: function(success, userid, data) {

      if (success = true) {
         document.write(userid);
         document.write(success);
       }
   }
}); 
```

这`userid`就是“成功”。实际`success`的工作，它的`true`.

是否返回了格式错误的数据？还是只是我的代码？

在此先感谢，尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:32:49.657

成功回调采用的参数在[文档](http://api.jquery.com/jQuery.ajax/)中定义：

```
success(data, textStatus, jqXHR) 
```

响应在作为参数传递给它之前不会被拆分。您必须从第一个参数中提取值。

您还需要添加`header('Content-Type: application/json')`到 PHP 中，以便 jQuery 在填充第一个参数时将响应解析为 JSON 而不是 HTML。

然后，您可以测试`data.success`和访问`data.userid`（以及`data.data`将分配给`data`返回数据中属性的数组……您可能需要重命名它以避免混淆）。

请注意，当您测试它时，您需要使用`===`(or `==`)，而不是您目前使用的 * assignment* 运算符。另请注意，您的 JSON 响应返回的是**字符串** `"true"`而不是布尔值`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:35:05.820

您不能在`Success`. 像这样更改您的代码，

```
success: function(response) {

      if (response.success == true) { 
         document.write(response.userid);
         document.write(response.success);
       }
   } 
```

根据 jQuery Docs `success()`，

**成功（数据，文本状态，jqXHR）**

请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。从 jQuery 1.5 开始，success 设置可以接受一个函数数组。每个函数都会被依次调用。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - Java HashMap containsKey 始终为 false

> ID：12883645
> 
> 赞同：2
> 
> 时间：2012-10-14T15:29:20.337
> 
> 标签：java, hashmap, contains

我有一个有趣的情况，我将 a 存储`Coordinate`到`HashMap<Coordinate, GUIGameField>`.

现在，奇怪的是，我有一段代码，它应该保护，不应该使用两次坐标。但是如果我调试这段代码：

```
if (mapForLevel.containsKey(coord)) {
    throw new IllegalStateException("This coordinate is already used!");
} else {
    ...do stuff...
} 
```

...`containsKey`总是返回`false`，尽管我将哈希码为 9731 的坐标存储到地图中，并且当前坐标也具有哈希码 9731。

之后，`mapForLevel.entrySet()`看起来像：

```
(java.util.HashMap$EntrySet) [(270,90)=gui.GUIGameField@29e357, (270,90)=gui.GUIGameField@ca470] 
```

我可能做错了什么？我没有主意了。谢谢你的帮助！

```
public class Coordinate {
    int xCoord;
    int yCoord;

    public Coordinate(int x, int y) {
        ...store params in attributes...
    }

    ...getters & setters...

    @Override
    public int hashCode() {
        int hash = 1;
        hash = hash * 41 + this.xCoord;
        hash = hash * 31 + this.yCoord;
        return hash;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T15:32:29.087

您应该覆盖它`equals`以`hashCode`使其正常工作。

编辑：我错误地说你应该`hashCode`在你的`equals`- 这是不正确的。虽然`hashCode`必须为两个相等的对象返回相同的结果，但它仍然可能为不同的对象返回相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T15:33:43.513

您似乎忘记`equals()`为您的坐标类实现方法。这是合同要求的。Hah 使用 equals 比较具有相同哈希码的 2 个条目。在您的情况下，`Object.equals()`对于 2 个不同的对象，调用总是不同的，因为它基于对内存中对象的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T16:08:57.540

您需要与 hashCode 一起实现 equals 的原因是哈希表的工作方式。

散列表将整数值（键的散列）与值相关联。将其视为一组 Value 对象。在此表中插入时，*值*存储在*key.hashCode()*位置。

这使您可以“立即”找到表中的任何对象。您只需计算该对象的 hashCode，您就会知道它在桌子上的位置。把它想象成一棵树，你需要在树中导航才能找到对象）。

但是，这种方法存在一个问题：可能有**多个对象具有相同的哈希码**。这会导致您错误地将两个（或更多）键与相同的值相关联。这称为*碰撞*。

有一种简单的方法可以解决这个问题：您可以将其映射到*Key-Value*对的列表，而不是将每个哈希码映射到一个*Value*。

 *现在，每次您在哈希映射中查找对象时，在计算哈希后，您需要遍历该列表（与该哈希码相关的“值”列表）并找到*正确*的。

这就是为什么你**总是**需要在哈希映射的键上实现**equals的原因。**

注意：哈希表实际上比这复杂一点，但想法是一样的。[您可以在此处](http://en.wikipedia.org/wiki/Hash_table#Collision_resolution)阅读有关冲突解决的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T15:33:01.343

在你的类中定义`hashCode`方法。**确保它为唯一对象返回唯一代码，并且为相同对象返回相同代码。**`Coordinate`*

# sql - 如何在 SQL Server 中读取 XML 值

> ID：12883646
> 
> 赞同：2
> 
> 时间：2012-10-14T15:29:23.227
> 
> 标签：sql, sql-server, xml, xpath, sqlxml

我有一个字符串列表：

```
 List<string> list = new List<string>();
    list.Add("912-123898493");
    list.Add("021-36574864");
    list.Add("021-36513264"); 
```

我想将其转换为 XML，然后将其作为参数发送到存储过程，以便可以读取。

如何在 sql server 中读取这个 XML，以便每个字符串都可以放在不同的单元格中？请帮忙！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:39:58.277

这取决于您的 xml 将具有什么结构。下面是如何读取元素 xml 的示例：

```
declare @Data xml

select @Data = '
<root>
    <value>912-123898493</value>
    <value>021-36574864</value>
    <value>021-36513264</value>
</root>'

select T.C.value('data(.)', 'nvarchar(128)') as [Data]
from @Data.nodes('/root/value') as T(C) 
```

# java - (?i) 正则表达式结果 - “Nothing”被Something取代

> ID：12883649
> 
> 赞同：1
> 
> 时间：2012-10-14T15:29:28.070
> 
> 标签：java, regex

我正在尝试不区分大小写的模式匹配。为了学习，我尝试了以下方法，发现很难分析正在发生的事情。

```
 String x = "Hello";
   String pattern = "(?i)";
   System.out.println(x.replaceAll(pattern, "</code>")); 
```

输出是

```
</code>H</code>e</code>l</code>l</code>o</code> 
```

有人可以解释一下这种行为吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:32:01.897

使用`(?i)`bare相当于匹配`case-insensitive`空String

您需要在`(?i)`将不区分大小写的匹配应用于..

这就是为什么此模式匹配每个空字符串、、`after each character`和`also before the first character`，并将其替换为：-`</code>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:30:52.813

该模式与任何内容都不匹配，并且每个字符的两侧都没有任何内容:)

（嗯，实际上有很多空，但每个索引只能有一个匹配项。）

# ruby - Ruby 中的 HTTPS 请求

> ID：12883650
> 
> 赞同：17
> 
> 时间：2012-10-14T15:29:30.187
> 
> 标签：ruby, https

Ruby 中是否有用于 HTTPS 请求的 gem 或库？它叫什么，你能提供一些示例用法吗？

我想做的是打开一个页面，从中解析一些文本，然后输出它。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-14T15:36:05.677

# 使用 Ruby 标准库的 SSL 请求

```
require 'net/http'
require 'uri'
Net::HTTP.get URI('https://encrypted.google.com') 
```

`Net::HTTP`在 Ruby (>= 2.0.0) 中，如果您将具有“https”URL 的 URI 对象传递给它，则默认情况下会执行 SSL 验证。见[https://github.com/ruby/ruby/blob/778bbac8ac2ae50f0987c4888f7158296ee5bbdd/lib/net/http.rb#L481](https://github.com/ruby/ruby/blob/778bbac8ac2ae50f0987c4888f7158296ee5bbdd/lib/net/http.rb#L481)

您可以通过对具有过期证书的[域](https://expired.badssl.com)执行获取请求来验证这一点。

```
uri = URI('https://expired.badssl.com/')
Net::HTTP.get(uri)
# OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=error: certificate verify failed 
```

# 使用 Ruby HTTP gem 的 SSL 请求

如果您希望使用替代方案，您可以使用以下默认情况下也执行 SSL 验证的 gem：

1.  [艾康](https://github.com/excon/excon)

Excon 是一个纯 Ruby HTTP 实现。

```
require 'excon'
Excon.get 'https://encrypted.google.com' 
```

2.  [抑制](https://github.com/taf2/curb)

Curb 是一个在底层使用 libcurl 的 HTTP 客户端。

```
require 'curl'
Curl.get 'https://encrypted.google.com' 
```

3.  [http.rb](https://github.com/httprb/http)

HTTP 或 http.rb 是纯 Ruby HTTP 实现，但使用[http_parser.rb](https://github.com/tmm1/http_parser.rb)来解析 HTTP 请求和响应。由于 http_parser.rb 使用原生扩展，它声称是最快的 HTTP 客户端库之一。但与往常一样，对基准持保留态度。

```
require 'http'
HTTP.get 'https://encrypted.google.com' 
```

4.  [HTTP客户端](https://github.com/nahi/httpclient)

HTTPClient 是另一个纯 Ruby 实现。

```
require 'httpclient'
HTTPClient.get 'https://encrypted.google.com' 
```

这里列出的是 HTTP 库而不是 HTTP 包装器。像[HTTParty](https://github.com/jnunemaker/httparty)和[Faraday](https://github.com/lostisland/faraday)这样的包装器 gem或者包装特定的 HTTP 实现，或者使用适配器来提供统一的 HTTP 接口。您可以查看这个[Ruby HTTP 客户端功能的比较矩阵](https://spreadsheets0.google.com/pub?hl=en&hl=en&key=0AiZsKd8d4hSJdHFFbjR5aWNjWjlzWlhiNGxQejdBWWc&output=html)。它比较了每个 HTTP 客户端库的功能。但请注意，该信息**自 2012 年以来未更新**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T15:33:00.080

语言中有一个集成库，称为`Net::HTTP`

它的一个示例用法是：

```
uri = URI('https://example.com/some_path?query=string')
response = Net::HTTP.start(uri.host, uri.port) do |http|
  request = Net::HTTP::Get.new uri.request_uri
  http.request request # Net::HTTPResponse object
end
puts response.body 
```

**更新：** 您需要像这样包含该库：

```
require 'net/https' 
```

# node.js - 添加 AzureNodeWebRole

> ID：12883653
> 
> 赞同：1
> 
> 时间：2012-10-14T15:29:40.837
> 
> 标签：node.js, azure

我尝试查看[http://learnwindowsazure.sourceforge.net/](http://learnwindowsazure.sourceforge.net/)上的教程/演示文稿，但无法重现与节点相关的步骤。

当我运行 Add-AzureNodeWebRole 命令时，我得到`Add-AzureNodeWebRole : service root is invalid or empty`

此外，在运行上一个命令“New-AzureService”时，文件夹中没有创建任何文件。

这究竟意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:46:55.880

您需要运行 cmdlet **New-AzureServiceProject**而不是 New-AzureService。

# android - 图像未显示在自定义 ListView android 中的 ImageView 上

> ID：12883657
> 
> 赞同：0
> 
> 时间：2012-10-14T15:30:15.027
> 
> 标签：android, image, listview, imageview

嗨，我有一个自`ListView`定义`ImageView`和`TextView`. 这是应该显示对象的类

```
package mk.mk.mk;

public class Artist {

private String artistName;
private String artistImage;
private String artistNameLatin;
 public Artist() {
    // TODO Auto-generated constructor stub
}
 public String getArtistImage() {
    return artistImage;
}
  public String getArtistName() {
    return artistName;
}
 public String getArtistNameLatin() {
    return artistNameLatin;
}
public void setArtistNameLatin(String artistNameLatin) {
this.artistNameLatin = artistNameLatin;
}

 public void setArtistImage(String artistImage) {
    this.artistImage = artistImage;
}
  public void setArtistName(String artistName) {
    this.artistName = artistName;
}
public Artist (String _artistName,String _artistImage,String _artistNameLatin)
{
    artistName=_artistName;
    artistImage=_artistImage;
    artistNameLatin=_artistNameLatin;

} 
```

虽然自定义适配器的代码是这个

```
package mk.mk.mk;

import java.util.List;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.text.style.RelativeSizeSpan;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class ArtistAdapter extends ArrayAdapter<Artist>{

int resource;
private static final String ASSETS_DIR="images/";

public ArtistAdapter(Context _context,int _resource,List<Artist> objects)
{
    super(_context,_resource,objects);
    resource=_resource;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    RelativeLayout artistLayoutView;
    Artist a=getItem(position);
    String artistName=a.getArtistName();

    if(convertView==null)
    {
        artistLayoutView=new RelativeLayout(getContext());
        String inflater=Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater vi=(LayoutInflater)getContext().getSystemService(inflater);
        vi.inflate(resource, artistLayoutView,true);
    }
    else
    {
        artistLayoutView=(RelativeLayout)convertView;
    }

    TextView artistTxt=(TextView)artistLayoutView.findViewById(R.id.artistName);
    ImageView resourceIdView=(ImageView)artistLayoutView.findViewById(R.id.artist_icon);
    artistTxt.setText(artistName);
    String imgFilePath=ASSETS_DIR+a.getArtistImage();

    try
    {
        Drawable d=Drawable.createFromStream(getContext().getAssets().open(imgFilePath), null);
        resourceIdView.setImageDrawable(d);
    }
    catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
    return artistLayoutView;
} 
```

}

应该填充项目的代码是这个

```
package mk.mk.mk;

import java.util.ArrayList;

import android.app.Activity;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.ListView;

public class ArtistList extends Activity{

ArrayList <String> artistNameList=new ArrayList<String>();
ArrayList <String> artistNameLatinList=new ArrayList<String>();
ArrayList <String> artistImageUrlList=new ArrayList<String>();
ArrayList<Artist> artistList=new ArrayList<Artist>();

private ArtistAdapter aa;
private ListView listViewArtists;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.artist_list);
    Resources r=getResources();

    String [] artistNameListArray=r.getStringArray(R.array.artists);
    String [] artistImageUrlListArray=r.getStringArray(R.array.artists_url);
    String [] artistLatinList=r.getStringArray(R.array.artistsLatin);

    for(int j=0;j<artistNameListArray.length;j++)
    {
        artistList.add(new Artist(artistNameListArray[j],artistImageUrlListArray[j],artistLatinList[j]));
    }

    listViewArtists=(ListView)findViewById(R.id.listArtists);
    aa=new ArtistAdapter(ArtistList.this, R.layout.artist_listitem, artistList);
    listViewArtists.setAdapter(aa);

} 
```

}

listView 的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listArtists"
    android:layout_width="wrap_content"
    android:layout_height="370dp"
    android:layout_marginTop="50dp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:layout_centerVertical="true">

</ListView>

</RelativeLayout> 
```

以及列表项的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/artist_icon"
    android:layout_width="40dp"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_gravity="left" />

<TextView
    android:id="@+id/artistName"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:layout_toRightOf="@+id/artist_icon"
    android:fadingEdge="vertical"
    android:padding="10dp"
    android:scrollbars="vertical"
    android:textSize="25sp" />

</RelativeLayout> 
```

但是，当我运行我的应用程序时，图像没有显示，我也没有收到任何错误。图像位于应用程序文件夹中的文件夹图像中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:43:52.593

你的问题是显示来自 android assets 文件夹的图像。

请点击[链接](https://stackoverflow.com/questions/4879416/how-to-set-background-image-from-asset-folder-in-android)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:01:24.287

上面的代码没问题，问题是图像文件夹不在资产文件夹中。现在它对我来说工作正常。

# html - 水平滚动中的浏览器限制

> ID：12883658
> 
> 赞同：1
> 
> 时间：2012-10-14T15:30:18.943
> 
> 标签：html, css

我正在制作一个网站，我的客户希望他的所有投资组合都在一条水平线上。它大约有 40-50 张图像，宽度可达 30.000 像素。

当页面加载时，并非所有图像都显示出来。如果我重新加载浏览器，图像会正确显示。水平滚动有这样的限制吗？

我尝试通过 css 设置宽度，但没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T17:37:06.447

在你的样式表中试试这个

```
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
} 
```

# jquery - Jquery autosuggest google maps - 加载选择

> ID：12883661
> 
> 赞同：0
> 
> 时间：2012-10-14T15:30:37.617
> 
> 标签：jquery, google-maps, google-maps-api-3

目前，谷歌地图代码的工作方式如下：

当您开始在输入框中输入内容时，它会加载建议列表。然后，当您从列表中单击其中一个选项时，它会将其放入输入框中。但是，那么您仍然必须单击查找来加载结果。

我想拥有它，因此当您单击自动建议列表中的选项时，它会自动加载结果，而无需随后单击“查找”。

这是我正在使用的代码。我希望我正确地解释了这个问题。

[http://jsfiddle.net/BxG9H/](http://jsfiddle.net/BxG9H/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:40:37.887

检查这个jsfiddle。您必须收听自动完成小部件的“选择”事件。

[http://jsfiddle.net/Rr5PL/](http://jsfiddle.net/Rr5PL/)

编辑

```
$(function() {
    $(PostCodeid).autocomplete({
        //This bit uses the geocoder to fetch address values

        // ONLY THIS PART :)
        select: function( event, ui ) {
          // first SET value before trigger click event
          $(this).val($(ui.item).attr('value'));
          $('#findbutton').click();
        },

        source: function(request, response) {
            geocoder.geocode({
                'address': request.term
            }, function(results, status) {
                response($.map(results, function(item) {
                    return {
                        label: item.formatted_address,
                        value: item.formatted_address
                    };
                }));
            });
        }
    });
}); 
```

# java - 不使用 Eclipse Juno 和 GWT 导入的 Hibernate 类：LockMode、SessionFactory、Criterion

> ID：12883665
> 
> 赞同：1
> 
> 时间：2012-10-14T15:30:55.170
> 
> 标签：java, eclipse, hibernate, gwt, ubuntu-12.04

## 环境

*   Ubuntu 12.04 LTS
*   Eclipse Juno 4.2 构建 ID：20120614-1722
*   GWT SDK - 2.4.0
*   应用引擎 SDK - 1.7.2
*   休眠版本 3.5
*   JRE：java-7-openjdk-amd64

参考@mael 评论，Hibernate Tools 是从以下 Eclipse 存储库安装的：http: [//download.jboss.org/jbosstools/updates/stable/indigo/](http://download.jboss.org/jbosstools/updates/stable/indigo/)

## 问题

该项目是一个使用 Hibernate 作为实体/持久性管理器的 GWT Web 应用程序。我已成功配置 Hibernate 以连接到数据库，它会拉入我感兴趣的所有表和关联列。我使用 Hibernate 对实体/持久性类进行逆向工程；它运行成功，但在新生成的类中出现导入错误：

*   无法解析导入 org.hibernate.LockMode。
*   无法解析导入 org.hibernate.SessionFactory。
*   无法解析导入 org.hibernate.criterion.Example。

## 研究/故障排除

我在[这里](https://stackoverflow.com/questions/2122545/eclipse-the-import-cannot-be-resolved-after-java-update)发现了类似的问题。我对上述课程进行了搜索，但没有找到。然后我在**Windows > Preferences > Installed JREs**下阅读了**java-7-openjdk-amd64 JRE**。这并没有解决问题。

 **此外，这个问题似乎没有太多。所以我假设在 Hibernate 和逆向工程的设置中有一些我不理解的东西。

[另一个类似的问题 - 相同的解决方案](https://stackoverflow.com/questions/4322893/eclipse-error-the-import-xxx-cannot-be-resolved)

## 更新：解决方案

1.  遵循@mael 的解决方案，我确认 Hibernate Tools 不会自动包含自动生成的实体/持久性类所需的 Hibernate jar 文件。
2.  从以下[位置](http://sourceforge.net/projects/hibernate/files/hibernate4/4.1.7.Final/)下载了 Hibernate4 jar 文件。
3.  将文件提取到 Eclipse 工作区。
4.  在 Eclipse 中，右键单击 {Project} 并转到**Build Path > Configure Build Path... > Java Build Path。**
5.  单击库选项卡。
6.  单击添加外部 JAR...
7.  转到解压缩 Hibernate4 JAR 文件的目录，然后按照**lib > required**的路径。
8.  选择文件夹中的所有 JAR 文件并确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:09:00.907

您可能需要检查您的 Eclipse 构建路径。

右键单击您的项目并导航构建路径>配置构建路径，然后在选项卡库中查找 Hibernate 库，如果您没有看到它，则手动下载 jar 或可选地使用 maven 或 ant 来执行此操作。

我不记得 Hibernate Tools 是否将 Hibernate jar 合并到 eclipse 库集中。但如果没有，我应该猜。**

# segmentation-fault - fortran 中非常简单的程序给了我一个分段错误。很困惑

> ID：12883667
> 
> 赞同：3
> 
> 时间：2012-10-14T15:31:03.597
> 
> 标签：segmentation-fault, fortran

我一直在疯狂地试图在我的简单程序中将一些数据读入数组。我无法弄清楚为什么会出现分段错误。我的代码开始：

```
program guess_input
implicit none

CHARACTER*2, allocatable, dimension(:) :: element
double precision, allocatable, dimension(:,:)      :: xyzq
INTEGER, allocatable, dimension(:)                 :: label,cs_num, br_num, xx_num
real, allocatable, dimension(:)                    :: distance
real, allocatable, dimension(:)                    :: ep
INTEGER                                :: stat, numatom, i, j
CHARACTER*80  :: line

numatom = 61502
allocate(element(numatom))
allocate(xyzq(4,numatom))
allocate(label(numatom))

OPEN(UNIT=22,FILE='EMBQ_EPF.OUT',iostat=stat)
If(stat.ne.0) Stop "File not found"

!Read in the input into two arrays

do i=1,numatom
READ(22,'(A)') line
READ(line, *) xyzq(1,i), xyzq(2,i), xyzq(3,i), xyzq(4,i), label(i)
enddo
CLOSE(22)

!Define element type in parallel array based on the charge 
do i=1,numatom
if(xyzq(4,i) == 1.00) then
            element(i) = 'Cs'
elseif(xyzq(4,i) == -1.00) then
            element(i) = 'Br'
else
        element(i) = 'XX'
    endif
 enddo

 OPEN(33, FILE='element.out')
 do i=1,numatom
 write(33,*) element(i)
 enddo

 end program guess_input 
```

我已经尝试隔离故障，但我真的无法弄清楚出了什么问题。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:08:47.477

如果您还没有准备好，我建议使用运行时下标检查进行编译。分段错误的一个可能原因是下标错误。在调试过程中使用最大编译器诊断很有帮助。使用 gfortran `-O2 -fimplicit-none -Wall -Wline-truncation -Wcharacter-truncation -Wsurprising -Waliasing -Wimplicit-interface -Wunused-parameter -fwhole-file -fcheck=all -std=f2008 -pedantic -fbacktrace`：. 使用 ifort `-O2 -stand f03 -assume realloc_lhs -check all -traceback -warn all -fstack-protector -assume protect_parens -implicitnone`：。 `-fcheck=all`并`-check all`包括运行时下标检查；如果需要，可以只选择运行时下标检查——请参阅编译器文档。

另外：与浮点值的精确比较是有风险的。我建议将 xyzq 转换为整数变量或测试到一个范围：

```
if( abs (xyzq(4,i) - 1.00) < 0.01 ) then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:53:25.893

要查找分段错误的原因，您可以使用[Valgrind的](http://valgrind.org/)*memcheck*工具。语法很简单：

```
valgrind --tool=memcheck --leak-check=full <binary> <arguments> 
```

[该工具应该为您提供源代码中发生内存管理问题](http://valgrind.org/info/tools.html#memcheck)的确切行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:31:28.713

您的编译器是否足够聪明，可以知道您的意思是“numatom”和“i”是 4 字节整数？如果不是，并且假设您的意思是“INTEGER”为 2 字节长，那么您将深入研究负内存空间的神秘世界。

# java - 显示问题 LWJGL

> ID：12883668
> 
> 赞同：4
> 
> 时间：2012-10-14T15:31:08.553
> 
> 标签：java, eclipse, opengl, lwjgl

我正在运行这个简单的代码来使用 lwjgl 在 Eclipse 中显示一个窗口：

```
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

@SuppressWarnings("unused")
public class DisplayExample {

public void start() {
    try {
        Display.setDisplayMode(new DisplayMode(1920, 1080));
        Display.create();

    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(0);
    }

    // init OpenGL here

    while (!Display.isCloseRequested()) {

        // render OpenGL here

        Display.update(); //flushes OpenGL pipeline and swaps back and front buffers. perhaps waits for v-sync.
    }

    Display.destroy();
}

public static void main(String[] argv) {
    DisplayExample displayExample = new DisplayExample();
    displayExample.start();
}
} 
```

然而屏幕出现这样并且闪烁： [http://tinypic.com/r/33upp2u/6](http://tinypic.com/r/33upp2u/6) 这是在mac上运行，任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T17:40:13.633

在更新显示之前，您没有清除屏幕。`GL11.glClear(GL11.GL_COLOR_BUFFER_BIT);`之前添加`// render OpenGL here`。您还需要为此导入`org.lwjgl.opengl.GL11`类。

# php - 等待 AJAX 请求，然后完成 jQuery

> ID：12883680
> 
> 赞同：1
> 
> 时间：2012-10-14T15:32:03.550
> 
> 标签：php, jquery, ajax, json, function

我有一段 jQuery 代码：

```
var newData = checkCP(somedata);
if(newData=="hi"){
    alert("Welcom");
}

 function checkCP(jsData){

    $.ajax({
        type: "POST",
        url: "Process.php",
        data: jsData,
        dataType: "json",
        success: function(data){
            if(data.match==1)
                return "hi";    
            else
                return "bye";
        }
    });
} 
```

我不知道为什么欢迎警报永远不会出现。我检查了一切；PHP 文件返回 1，但显然在它等待 AJAX 响应之前它通过

```
if(new=="hi"){
    alert("Welcom");
} 
```

有什么方法可以等待 AJAX 响应，然后阅读 jQuery 中的其余代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:34:39.813

是的，您可以将 $.ajax() 中的 'async' 选项设置为 false。

```
$.ajax({
            type: "POST",
            async: false,
            url: "Process.php",
            data: jsData,
            dataType: "json",
            success: function(data){
                if(data.match==1)
              return "hi";  
            else
              return "bye";
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T15:46:50.543

首先，请不要使用“new”作为变量名。“新”已经意味着什么。

现在进入实际问题...

当您调用 checkCP jquery 时，ajax 发布成功并在执行成功功能之前自动等待响应。问题是成功函数是一个独立的函数，并且从该函数返回的值不会从 checkCP 返回任何内容。checkCP 返回空值。

作为证据，请尝试在您的成功功能中添加警报。

这样的事情应该可以解决问题：

```
function deal_with_checkCP_result(result)
{
     if(result=="hi"){
     alert("Welcom");
    }
}

function checkCP(jsData,callback){

        $.ajax({
            type: "POST",
            url: "Process.php",
            data: jsData,
            dataType: "json",
            success: function(data){
                if(data.match==1)
              callback( "hi");  
            else
              callback( "bye");
            }
      });

    } 
```

将 deal_with_checkCP_result 作为回调传递

# jquery - Jquery验证：错误消息总是显示不止一次

> ID：12883686
> 
> 赞同：0
> 
> 时间：2012-10-14T15:32:29.393
> 
> 标签：jquery, jquery-plugins

我正在尝试使用 jquery 验证进行验证，并且错误消息将其显示在 div 容器中。我的问题是，当我在输入字段中输入内容时，错误消息始终出现在“div.info”中，但我只想在提交表单时始终出现错误消息。我的下一个问题是当我多次提交错误消息时也会多次显示？

我的代码如下

html代码

```
<div class="info"></div>
 <form id="fmlogin">
  <fieldset>
    <label>Email Address</label>
    <input type="text" name="email" />
    <label>Password</label>
    <input type="password" name="password"/>
    <input type="submit" value="login" />
  </fieldset>
 </form> 
```

jQuery

```
<script type="text/javascript">
        $(document).ready(function(){       
        $("form#fmlogin").submit(function() {
            data= $("form#fmlogin").serialize();
            return false;
        });

        $("#fmlogin").validate({
            rules: {
                email: {
                    required: true,
                    email:true
                },
                password: {
                    required: true,
                }
            },      
        messages: {
            email: {
                required: "Email Address is required",
                email:"Email Address is not Valid"
            },
            password: {
                required: "Password is required",
            }
          },
        errorElement: "div",
        wrapper: "div", 
        errorPlacement: function(error, element) {  
            error.appendTo($('.info'));
        },
        submitHandler: function(form){          
            $.ajax({
                type: "POST",
                url: "login.php",
                data:data,
                success: function(response){
                    $(".info").text(response);
                }   
            }); 
        }
        }); 
        });
</script> 
```

我是 jquery 验证的新手，请帮忙？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:35:44.367

登录

用这个

```
 var data=$("#fmlogin").serialize();
 $("#fmlogin").submit(function(){
   $.ajax({
            type: "POST",
            url: "login.php",
            data:data,
            success: function(response){
      //if you want to show error more that once than use append instead of text
                $(".info").append(response);
            }   
    }) 
```

# php - 我如何检查用户是否输入了正确的电子邮件形式

> ID：12883694
> 
> 赞同：1
> 
> 时间：2012-10-14T15:33:08.873
> 
> 标签：php

好吧，我没有使用电子邮件验证，所以我在检查电子邮件地址的正确形式时遇到了问题

假设用户输入`support`或`support@`它也接受它。

所以我至少希望他们在那里输入电子邮件，或者至少他们正确输入电子邮件表格

**这是我的代码：**

```
 <?php
    require_once 'global.php';
    if (!isset($_SESSION['logged_in'])) {
        header("Location: login.php");
    }
    $user    = unserialize($_SESSION['user']);
    $email   = $user->email;
    $message = "";
    if (isset($_POST['submit-settings'])) {
        $email       = $_POST['email'];
        $user->email = $email;
        $user->save();
        $msg = "Done!<br/>";
    }
    ?> 
```

**解决了 ：**

```
if (isset($_POST['submit-settings'])) {
    $email = $_POST['email'];
    //  checking valid email
    if (!filter_var("$email", FILTER_VALIDATE_EMAIL)) {
        $msg = "Wrong Email Setting Not Saved<br/>";
    } else {
        $user->email = $email;
        $user->save();
        $msg = "Settings Saved<br/>";
    } 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T15:36:02.577

PHP的简单使用filter_var()

```
if(filter_var('bob@example.com', FILTER_VALIDATE_EMAIL)) {
  //email correct
}
else
{
 //email not correct
} 
```

# vb.net - VB - 任何方式将“资源”项目放在资源子文件夹中？

> ID：12883704
> 
> 赞同：1
> 
> 时间：2012-10-14T15:34:44.213
> 
> 标签：vb.net

我有一个包含大量资源的 VB.NET 2010 项目（我通过我的项目 --> 资源添加了这些资源）。他们工作得很好。

但我想做的（如果可能的话）是通过将它们放在各种子文件夹中来组织它们。

例如...在解决方案资源管理器中，我右键单击“资源”文件夹并选择“添加新文件夹”（在资源文件夹中添加一个子文件夹）。但是当我尝试将资源项之一拖到子文件夹中时，它不起作用（它会抛出一条错误消息，指出“无法加载资源，因为找不到它链接到的文件”）。

所以...我想知道是否有任何解决方法？由于我在这个项目中有很多资源，如果我可以在 Resources 文件夹中拥有大约十几个子文件夹，然后将我的资源项放在这些子文件夹中，那将非常有帮助。仅供参考……这完全是为了我自己在编写项目时的组织需求，所以我不太关心资源项和文件夹在编译时是如何排列的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:36:07.833

先将它们放在文件夹中，然后将它们添加为资源。如果您选择的文件已经在项目的 Resources 文件夹中，则不会重新复制它们。

# asp.net - SQL Server 连接字符串问题

> ID：12883706
> 
> 赞同：3
> 
> 时间：2012-10-14T15:34:50.137
> 
> 标签：asp.net, sql-server, connection-string

今天花了 6 个小时从 Visual Studios 2012 连接到我的 SQL Server 2012 数据库后，我放弃了。

设置：

*   数据库：`App_Data/GameDB.mdf`
*   数据库位置：`C:\Users\USERNAME\Documents\Visual Studio 2012\Projects\ProjectRawWar\ProjectRawWar\App_Data\GameDB.mdf`
*   连接字符串：

    ```
    <add name="LocalSqlServer" 
         connectionString="Data Source=(LocalDB)\v11.0;Initial Catalog=GameDB;Integrated Security=False;"/> 
    ```

*   我首先尝试了一个 SQL Server Compact 数据库，但没有成功。

*   我尝试了许多来自 connectionstrings.com 的其他连接字符串，但都不起作用。
*   我试图将数据库的完整路径放在连接字符串中，但没有奏效。

有人可以帮我摆脱痛苦吗？

**更新：** 我刚刚关注了[http://msdn.microsoft.com/en-us/library/aa983322.aspx](http://msdn.microsoft.com/en-us/library/aa983322.aspx)。数据库在那里。我将向导中的连接字符串直接复制到了我的 webconfig 连接字符串中，但仍然无法正常工作。为什么？逻辑在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:31:22.707

阅读您的问题，我感觉您正在尝试连接到数据库文件。虽然您可以使用 Access“数据库”来做到这一点，但使用 SQL Server 数据库则无法做到这一点。该文件需要先装载或附加到 SQL Server。

查看此 MSDN 文章了解详细信息：http: [//msdn.microsoft.com/en-us/library/ms190209.aspx#SSMSProcedure](http://msdn.microsoft.com/en-us/library/ms190209.aspx#SSMSProcedure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:45:40.823

如果您要禁用集成安全性，则需要提供用户名和密码。

IE：

```
Server=127.0.0.1;User ID=useridhere;Password=passwordhere;database=dbnamehere 
```

请务必确保您指定的用户 ID 和密码可以访问您需要的数据库。对于测试，您可以使用“sa”帐户，但出于主要安全原因，这是一个糟糕的长期解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:10:20.147

好的，我自己修好了。 **我是怎么做到的：** 删除每个 .sdf 和 .mdf 文件。刚刚制作了以下连接字符串：

```
 `<add name="DataContext" 
     connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\GameDB1.mdf;Integrated Security=True"
     providerName="System.Data.SqlClient" />
<add name="LocalSqlServer"
     connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\GameDB1.mdf;Integrated Security=True"
     providerName="System.Data.SqlClient" />` 
```

Visual Studio 使用我的 DBContext 创建了我的数据库。

谢谢大家的信息。

# nlp - 在 POS 标记中对以下单词进行分类的最佳方法是什么？

> ID：12883707
> 
> 赞同：0
> 
> 时间：2012-10-14T15:34:54.370
> 
> 标签：nlp

我正在做 POS 标记。给定训练集中的以下标记，最好将每个标记视为 Word1/POStag 和 Word2/POStag 还是将它们视为一个单词 Word1/Word2/POStag ？

示例：（不需要包含 POSTag）

```
Bard/EMS
Interstate/Johnson
Polo/Ralph
IBC/Donoghue
ISC/Bunker
Bendix/King
mystery/comedy
Jeep/Eagle
B/T
Hawaiian/Japanese
IBM/PC
Princeton/Newport
editing/electronic
Heller/Breene
Davis/Zweig
Fleet/Norstar
a/k/a
1/2 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:44:05.840

就斜杠的使用而言，这些示例似乎不属于一个类别——`a/k/a`是短语的首字母缩写词，`1/2`是一个数字，`mystery/comedy`表示两个词之间的某些东西，等等。我觉得没有处理组成词这将适用于所有相关案例，因此更好的选择是将它们作为唯一词处理。在解码阶段，当标注者可能会看到更多以前未见过的此类单词的示例时，通常可以根据上下文做出决定，而不是单词本身。

# excel - 如何使用 oledb 读取 excel 中的所有列并在控制台中显示所有列

> ID：12883714
> 
> 赞同：0
> 
> 时间：2012-10-14T15:35:39.420
> 
> 标签：excel, c#-4.0, oledb

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using System.Data.OleDb;

namespace ReadingExcel
{
    public class Program
    {
        public static void Main(string[] k)
        {

            string connectionString = @"Provider= Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\SaiKiran\Desktop\MyExl.xlsx;Extended Properties=Excel 12.0 Xml";

            //Create the connection

            System.Data.OleDb.OleDbConnection excelConnection = new System.Data.OleDb.OleDbConnection(connectionString);
            string excelQuery = @"Select * from [Sheet1$]";
            //string excelQuery1 = @"Select * from [Sheet1$]";
            System.Data.OleDb.OleDbCommand excelCommand = new System.Data.OleDb.OleDbCommand(excelQuery, excelConnection);
            excelConnection.Open();
            System.Data.OleDb.OleDbDataReader excelReader;
            excelReader = excelCommand.ExecuteReader();

            while (excelReader.Read())
            {
                //Globals.Sheet1.Cells[1, 3] = "Set my data";
                    Console.WriteLine("id={0}", excelReader[0].ToString());
                    Console.ReadLine();

            }
            excelConnection.Close();

        }
    }
} 
```

我的 excel 中有 A、B、C 列，它们是 .xlsx 格式。使用当前代码，我现在只能读取一列。请告诉我循环或阅读所有列的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T13:03:58.227

已经来不及回答了。但它可以帮助寻找类似解决方案的人。

这是给出的一种解决方案：http: [//support.microsoft.com/kb/302096](http://support.microsoft.com/kb/302096)

# c - 有哪些不同类型的内存可以归入共享内存？

> ID：12883722
> 
> 赞同：0
> 
> 时间：2012-10-14T15:36:38.237
> 
> 标签：c, multithreading, operating-system

例如，在一个多线程程序中，全局变量、易失变量、外部变量可以归入临界区，因为它们可以同时被多个线程访问。shmget() 也分配共享内存。我想知道所有其他内存类型在用户空间和内核空间中都可以是关键部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:40:38.713

共享内存通常包含在临界区中。原因是共享内存可以同时被多个线程访问。为了确保某个共享内存一次只能由一个线程访问，使用了临界区。

不确定共享内存是否进一步分类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:29:48.060

查看这些链接，以更好地了解共享内存区域和实际系统中的**[关键部分。](http://en.wikipedia.org/wiki/Critical_section)**

[**bcook.cs.georgiasouthern.edu/cs523/critical.htm**](http://bcook.cs.georgiasouthern.edu/cs523/critical.htm)

[**blogs.msdn.com/b/larryosterman/archive/2005/08/24/455741.aspx**](http://blogs.msdn.com/b/larryosterman/archive/2005/08/24/455741.aspx)

[**ibm.com/developerworks/linux/library/l-linux-synchronization/index.html**](http://www.ibm.com/developerworks/linux/library/l-linux-synchronization/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T17:44:39.293

当您谈论不同的概念时，共享内存可能会有所不同，即使用公共数据的两个进程，例如队列，您需要在修改/添加/删除时“注意”关键部分。至于线程，除了堆栈和代码段之外，所有东西都是共享的，因此理论上主进程到达的每条数据都是这些线程之间的共享内存。

# jquery - 如何让动态创建的内容在 jQuery 中保持其功能？

> ID：12883725
> 
> 赞同：1
> 
> 时间：2012-10-14T15:37:00.667
> 
> 标签：jquery, html, css

我正在尝试动态创建一个所谓的 portlet 列表。可以通过单击一个按钮来添加 Portlet，该按钮会打开一个带有 3 个输入字段的对话框，然后您确认并在页面上显示一个新的 Portlet。这些portlet 有一个减号图标，可用于切换portlet 的文本部分。这适用于在页面加载时通过 html 添加的 portlet，但动态添加的 portlet 似乎没有“绑定到它们”的功能。

所以我想知道如何将此功能添加到动态添加的 portlet 中。我也意识到我的 jQuery 代码看起来不是很理想，但我主要是复制粘贴的东西，因为我是新手。

编辑：我应该添加这个链接： http: [//jqueryui.com/sortable/#portlets](http://jqueryui.com/sortable/#portlets) - 这是我大部分代码的来源，你可以测试减号图标功能。

jQuery：

```
$(function() {
            var title = $( "#title" ),
            content = $( "#content" ), column = $( "#column" ); 

            $( "#dialog-form" ).dialog({
                autoOpen: false,
                height: 300,
                width: 350,
                modal: true,
                buttons: {
                    "Add content": function() {                            
                        if(column.val()=='col1'){
                            $( "#col1" ).append($('<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all">' +
                                '<div class="portlet-header ui-widget-header ui-corner-all">' +
                                '<span class="ui-icon ui-icon-minusthick"></span>' + title.val() + '</div>' +
                                '<div class="portlet-content">' + content.val() + '</div></div>'))
                            $( this ).dialog( "close" );
                        }
                        else if(column.val()=='col2'){
                            $( "#col2" ).append($('<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all">' +
                                '<div class="portlet-header ui-widget-header ui-corner-all">' +
                                '<span class="ui-icon ui-icon-minusthick"></span>' + title.val() + '</div>' +
                                '<div class="portlet-content">' + content.val() + '</div></div>'))
                            $( this ).dialog( "close" );
                        }
                        else if(column.val()=='col3'){
                            $( "#col3" ).append($('<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all">' +
                                '<div class="portlet-header ui-widget-header ui-corner-all">' +
                                '<span class="ui-icon ui-icon-minusthick"></span>' + title.val() + '</div>' +
                                '<div class="portlet-content">' + content.val() + '</div></div>'))
                            $( this ).dialog( "close" );                                
                        }
                        else if(column.val()=='col4'){
                            $( "#col4" ).append($('<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all">' +
                                '<div class="portlet-header ui-widget-header ui-corner-all">' +
                                '<span class="ui-icon ui-icon-minusthick"></span>' + title.val() + '</div>' +
                                '<div class="portlet-content">' + content.val() + '</div></div>'))
                            $( this ).dialog( "close" );                                
                        }                            
                        else{
                            $( "#tempcol" ).append($('<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all">' +
                                '<div class="portlet-header ui-widget-header ui-corner-all">' +
                                '<span class="ui-icon ui-icon-minusthick"></span>' + title.val() + '</div>' +
                                '<div class="portlet-content">' + content.val() + '</div></div>'))
                            $( this ).dialog( "close" );                                
                        } 
                    },
                    Cancel: function() {
                        $( this ).dialog( "close" );
                    }
                },
                close: function() {
                }
            });

            $( "#add-content" )
            .button()
            .click(function() {
                $( "#dialog-form" ).dialog( "open" );
            });

            $( ".column" ).sortable({
                connectWith: ".column"
            });

            $( ".portlet" ).addClass( "ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" )
            .find( ".portlet-header" )
            .addClass( "ui-widget-header ui-corner-all" )
            .prepend( "<span class='ui-icon ui-icon-minusthick'></span>")
            .end()
            .find( ".portlet-content" );

            $( ".portlet-header .ui-icon" ).click(function() {
                $( this ).toggleClass( "ui-icon-minusthick" ).toggleClass( "ui-icon-plusthick" );
                $( this ).parents( ".portlet:first" ).find( ".portlet-content" ).toggle();
            });

            $( ".column" ).disableSelection();
        }); 
```

html:

```
<body>

    <div id="centered">

        <div id="inset">
            <h1>title</h1>
            <div id="linear" style="padding: 20px"></div>
        </div>

        <div id="dialog-form" title="Create portlet">

            <form>
                <fieldset>
                    <label for="title">Title</label>
                    <input type="text" name="title" id="title" class="text ui-widget-content ui-corner-all" />
                    <label for="content">Content</label>
                    <input type="text" name="content" id="content" value="" class="text ui-widget-content ui-corner-all" />
                    <label for="column">Column</label>
                    <select name="column" id="column" class="ui-spinner-down ui-widget-content ui-corner-all">
                        <option value="col1">left sidebar</option>
                        <option value="col2">main</option>
                        <option value="col3">bottom left</option>
                        <option value="col4">bottom right</option>
                    </select>
                    <!--<input type="text" name="column" id="column" value="" class="text ui-widget-content ui-corner-all" />-->
                </fieldset>
            </form>
        </div>

        <button id="add-content" >Add Content</button>
        <button id="test" onclick="test()">test</button>
        <div id="preview">
            <table>
                <tbody>
                    <tr>
                        <!--sidebar-->
                        <td>
                            <div id="col1" class="column">
                            </div>
                        </td>
                        <!--sidebar end-->   
                        <td>
                            <table>
                                <tbody>
                                    <!--main-->
                                    <tr>
                                        <div id="col2" class="column">
                                            <div class="portlet">
                                                <div class="portlet-header">News</div>
                                                <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
                                            </div>
                                        </div>
                                    </tr>             
                                    <!--main end-->
                                    <!--bottom colums-->
                                    <tr>
                                        <td style="border-left: 0px; border-bottom: 0px">
                                            <div id="col3" class="column">
                                            </div>
                                        </td>
                                        <td style="border-right: 0px; border-bottom: 0px">
                                            <div id="col4" class="column">
                                            </div>
                                        </td>
                                    </tr>                                    
                                    <!--bottom colums end-->
                                </tbody>
                            </table>
                        </td>           
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:59:28.697

试试这个动态元素

```
$("#centered").on('click', ".portlet-header .ui-icon", function(){...}); 
```

代替

```
$( ".portlet-header .ui-icon" ).click(function(){...}); 
```

# android - Android Canvas：填充时多边形变形（Paint.Style.Fill）？

> ID：12883728
> 
> 赞同：0
> 
> 时间：2012-10-14T15:37:17.160
> 
> 标签：android, google-maps, polygon

我正在尝试使用 Google 地图引擎在 android 中使用不规则多边形覆盖地图上的一个区域。

这是我正在测试的示例代码...覆盖 Overlay 类的 draw 方法。

```
 @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {

        ArrayList<GeoPoint> points = new ArrayList<GeoPoint>();

        points.add(getPoint(40.69601721120307,-7.975247972597344));
        points.add(getPoint(39.59209428101375,-5.602198679879018));
        points.add(getPoint(37.98114679179523,-5.43877491468928 ));
        points.add(getPoint(39.01059159609532,-4.050442951443798));
        points.add(getPoint(37.99556954318146,-1.728440918734253));
        points.add(getPoint(39.26565517073047,-2.576421100521262));
        points.add(getPoint(40.21994329403012,-1.164105822610836));
        points.add(getPoint(40.57540056971796,-3.415060042751821));
        points.add(getPoint(42.5081775151286,-4.553753858729792));
        points.add(getPoint(40.74284989396188,-5.388244948956315));
        points.add(getPoint(40.69601721120307,-7.975247972597344));

        Paint mPaint = new Paint();
        mPaint.setColor(Color.RED);        
        mPaint.setStyle(Style.STROKE);
        mPaint.setStrokeWidth(2);

        Point point1 = null;
        Path path = new Path();
        for(GeoPoint p : points){                                                                                  

            Point point2 = new Point();         
            mapView.getProjection().toPixels(p, point2);

            if(point1 != null){                 
                path.lineTo(point2.x, point2.y);                
                canvas.drawPath(path, mPaint);
                mapView.getProjection().toPixels(p, point1);
            } else {
                point1 = new Point();
                mapView.getProjection().toPixels(p, point1);                
                path.moveTo(point1.x, point1.y);
            }

        }
        return true;
    } 
```

当我运行测试时，我可以在地图上看到这个结果：

![在此处输入图像描述](../Images/2cd62cfc9ca5d53eeb2007f9cf5d94f4.png)

但是，当我将样式更改为 Style.STROKE_FILL 或 Style.FILL 时，我会在地图上看到以下内容：

![在此处输入图像描述](../Images/c139fc5af9234b33a21fb7f80ee04caa.png)

我在论坛中找不到解决此问题的方法。

我将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:49:14.053

试试这个。更改是在完成后绘制路径。

```
 Point point1 = null;
    Path path = new Path();

    for(GeoPoint p : points){                                                                                  

        Point point2 = new Point();         
        mapView.getProjection().toPixels(p, point2);

        if(point1 != null){                 
            path.lineTo(point2.x, point2.y);                        
            mapView.getProjection().toPixels(p, point1);
        } else {
            point1 = new Point();
            mapView.getProjection().toPixels(p, point1);                
            path.moveTo(point1.x, point1.y);
        }

    }
    canvas.drawPath(path, mPaint); 
```

您还可以在绘制路径之前对其进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:44:23.513

你确定点的顺序是正确的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:52:30.410

```
 Paint   mPaint = new Paint();
       Path path = new Path();

        // 
       GeoPoint name0 = new GeoPoint(40696017,-7975247);  // = 40.69601721120307,-7.975247972597344
       Point pname0 = new Point();   
       projection.toPixels(name0, pname0);
       path.moveTo(pname0.x, pname0.y);        //first= moveto
       //
       GeoPoint name1 = new GeoPoint(39592094,-5602198); // 39.59209428101375,-5.602198679879018
       Point pname1 = new Point();   
       projection.toPixels(name1, pname1);
       path.lineTo(pname1.x, pname1.y);
       //
       GeoPoint name2 = new GeoPoint(...,...);
       Point pname2 = new Point();   
       projection.toPixels(name2, pname2);
       path.lineTo(pname2.x, pname2.y);

       // ... , ...

       canvas.drawPath(path, mPaint); 
```

# java - 运行时字符串连接评估

> ID：12883730
> 
> 赞同：8
> 
> 时间：2012-10-14T15:37:32.650
> 
> 标签：java

根据 JLS(15.28 Constant Expressions) 的表达式仅包含：

```
i)Literals of primitive type and literals of type String (§3.10.1, §3.10.2, §3.10.3,
§3.10.4, §3.10.5)
or
ii)Simple names (§6.5.6.1) that refer to constant variables (§4.12.4).
or
iii)... 
```

是一个常数表达式。

Now`String s1="a"+"b";`是一个常量表达式，将`"ab"`在编译时计算。

所以`s1="ab";`

[1]**我说的对吗，根据上面的说法，现在字符串池中有三个对象：-“a”，“b”，“ab”？？？**

现在，

```
final String s="a";
final String s1="b";
String s2=s+s1;  // is also constant expression and get evaluated at compile time. 
```

上面的代码将`s2="a"+"b";`在编译后转换为。

所以`s2="ab";`会自动存储在字符串池中。

但，

```
// note there is no final now.
String s="a";
String s1="b";
String s2="a"+"b";  // constant expression.
String s3=s+s1;  // is NOT a constant expression and get evaluated at RUN TIME. 
```

对于`String s3=s+s1;`，代码将被翻译为：

```
s3=new StringBuilder(String.valueOf(s)).append(s1).toString(); 
```

并将创建一个新的 String 对象。

因此，`s2==s3`意志是虚假的；

**这是否意味着在运行时使用 StringBuilder 评估的字符串连接的结果不会存储在字符串池中，而是进入堆（池外）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:44:59.800

来自 JLS §15.18.1：

> 15.18.1。字符串连接运算符 +
> 
> 如果只有一个操作数表达式是字符串类型，则对另一个操作数执行字符串转换（第 5.1.11 节）以在运行时生成字符串。
> 
> 字符串连接的结果是对 String 对象的引用，该对象是两个操作数字符串的连接。在新创建的字符串中，左侧操作数的字符在右侧操作数的字符之前。
> 
> **String 对象是新创建的（第 12.5 节），除非表达式是编译时常量表达式（第 15.28 节）。**
> 
> 实现可以选择在一个步骤中执行转换和连接，以避免创建然后丢弃中间 String 对象。为了提高重复字符串连接的性能，Java 编译器可以使用 StringBuffer 类或类似技术来减少通过计算表达式创建的中间 String 对象的数量。
> 
> 对于原始类型，实现还可以通过直接从原始类型转换为字符串来优化包装对象的创建。

所以，

1.  常量池（“ab”）中有一个对象。临时对象没有保存。
2.  同样，常量池中也只有“ab”。
3.  新字符串是一个新`String`对象，除非显式实习，否则不会在池中。

查看一些字节码是有启发性的：

```
String sa1 = "a"+ "b";

final String sb1 = "a";
final String sb2 = "b";
String sb3 = sb1 + sb2;

String sc1 = "a";
String sc2 = "b";
String sc3 = "a" + "b";
String sc4 = sc1 + sc2; 
```

变成

```
 Code:
   0:   ldc #2; //String ab
   2:   astore_0
   3:   ldc #2; //String ab
   5:   astore_3
   6:   ldc #3; //String a
   8:   astore  4
   10:  ldc #4; //String b
   12:  astore  5
   14:  ldc #2; //String ab
   16:  astore  6
   18:  new #5; //class java/lang/StringBuilder
   21:  dup
   22:  invokespecial   #6; //Method java/lang/StringBuilder."<init>":()V
   25:  aload   4
   27:  invokevirtual   #7; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   30:  aload   5
   32:  invokevirtual   #7; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   35:  invokevirtual   #8; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
   38:  astore  7
   40:  return 
```

您可以看到，在前两种情况下，“ab”是直接从常量池中加载的。在第三个块中，我们得到了 translate `sc4 = new StringBuilder().append(sc1).append(sc2).toString()`，它创建了一个新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:44:49.107

> 我说得对吗，根据上面的说法，现在字符串池中有三个对象：-“a”，“b”，“ab”？？？

不，你错了。连接是在编译时执行的，只有“ab”对象会存储在字符串池中。

> 这是否意味着在运行时使用 StringBuilder 评估的字符串连接的结果不会存储在字符串池中，而是进入堆（池外）？

是的，你在这一点上是正确的。

* * *

总之，字符串文字和编译时常量字符串表达式的值将被实习（并存储在字符串池中）。其他字符串连接的结果不会被保留...除非您明确调用`String.intern()`. （而且你应该很少这样做......因为实习字符串通常弊大于利。）

无论哪种方式，您都应该避免使用`==`来比较字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:44:16.173

> 这是否意味着在运行时使用 StringBuilder 评估的字符串连接的结果不会存储在字符串池中，而是进入堆（池外）

是的。那是对的。它将在堆中创建新对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T15:45:30.620

是的，您是正确的，在运行时使用 StringBuilder 评估的字符串没有存储在字符串池中。因为：

1.  有一个`new`操作符（为堆中的对象分配新内存）
2.  正如我们从代码中看到的：

    AbstractStringBuilder(int capacity) { value = new char[capacity]; }

在堆中分配了一个新的 char 数组引用。

# android - 如何在 ActionBar 中显示自定义视图？

> ID：12883732
> 
> 赞同：97
> 
> 时间：2012-10-14T15:37:40.230
> 
> 标签：android, android-actionbar, actionbarsherlock

我想在操作栏中显示自定义搜索（我为此使用 ActionBarSherlock）。

我明白了：

![在此处输入图像描述](../Images/f040f88d49d2c3d87c82cd93d24c538f.png)

但我想让自定义布局（edittext 字段）占据整个可用宽度。

我已经按照[这里](https://stackoverflow.com/questions/12750013/actionbar-logo-centered-and-action-items-on-sides)的建议实现了自定义布局。

有我的自定义布局`search.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="?attr/actionButtonStyle"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_gravity="fill_horizontal"
    android:focusable="true" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|fill_horizontal" >

        <EditText
            android:id="@+id/search_query"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center"
            android:background="@drawable/bg_search_edit_text"
            android:imeOptions="actionSearch"
            android:inputType="text" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|center_vertical"
            android:src="@drawable/ic_search_arrow" />

    </FrameLayout>

</LinearLayout> 
```

并在`MyActivity`：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayHomeAsUpEnabled(true);
actionBar.setDisplayShowCustomEnabled(true);
actionBar.setDisplayShowTitleEnabled(false);
actionBar.setIcon(R.drawable.ic_action_search);

LayoutInflater inflator = (LayoutInflater) this .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = inflator.inflate(R.layout.search, null);

actionBar.setCustomView(v); 
```

如何使自定义布局占据所有可用宽度`actionBar`？

请帮忙。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-14T16:41:05.197

这有一个窍门。您所要做的就是使用`RelativeLayout`而不是`LinearLayout`作为主容器。为它做好准备很重要`android:layout_gravity="fill_horizontal"`。那应该这样做。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-05-20T15:05:32.897

我自己为此苦苦挣扎，并尝试了 Tomik 的回答。但是，这并没有使布局在开始时达到完整的可用宽度，只有当您向视图添加内容时。

`LayoutParams.FILL_PARENT`添加视图时需要设置：

```
//I'm using actionbarsherlock, but it's the same.
LayoutParams layout = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
getSupportActionBar().setCustomView(overlay, layout); 
```

这样它就完全填满了可用空间。（您可能也需要使用 Tomik 的解决方案）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-08T09:14:14.563

这就是它对我的工作方式（从上面的答案中，它同时显示了默认标题和我的自定义视图）。

```
ActionBar.LayoutParams layout = new ActionBar.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
// actionBar.setCustomView(view); //last view item must set to android:layout_alignParentRight="true" if few views are there 
actionBar.setCustomView(view, layout); // layout param width=fill/match parent
actionBar.setDisplayShowCustomEnabled(true);//must other wise its not showing custom view. 
```

我注意到两者`setCustomView(view)`和`setCustomView(view,params)`视图宽度=匹配/填充父级。[setDisplayShowCustomEnabled（布尔显示自定义）](https://developer.android.com/reference/android/support/v7/app/ActionBar.html#setDisplayShowCustomEnabled(boolean))

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-08-06T01:25:36.300

当您希望自定义视图占据*整个*操作栏，甚至隐藏本机标题时，Tomik 和 Peterdk 的答案就起作用了。

但是，如果您希望自定义视图与标题并排显示（并在显示标题后填充所有剩余空间），那么我可以在这里向您推荐用户 Android-Developer 的出色回答：

[https://stackoverflow.com/a/16517395/614880](https://stackoverflow.com/a/16517395/614880)

他在底部的代码对我来说非常有效。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-02-03T07:28:13.360

例如，您可以定义一个包含 EditText 元素的布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/searchfield"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:inputType="textFilter" >

</EditText> 
```

你可以做

```
public class MainActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ActionBar actionBar = getActionBar();
    // add the custom view to the action bar
    actionBar.setCustomView(R.layout.actionbar_view);
    EditText search = (EditText) actionBar.getCustomView().findViewById(R.id.searchfield);
    search.setOnEditorActionListener(new OnEditorActionListener() {

      @Override
      public boolean onEditorAction(TextView v, int actionId,
          KeyEvent event) {
        Toast.makeText(MainActivity.this, "Search triggered",
            Toast.LENGTH_LONG).show();
        return false;
      }
    });
    actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM
        | ActionBar.DISPLAY_SHOW_HOME);

    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-07T21:33:41.397

在 Android 的启动器应用程序中有一个示例（我已经用它制作了一个库，在这里），在处理壁纸挑选的类 ("WallpaperPickerActivity") 中。

该示例显示您需要设置自定义主题才能使其正常工作。可悲的是，这仅适用于我使用普通框架，而不是支持库之一。

以下是主题：

**样式.xml**

```
 <style name="Theme.WallpaperPicker" parent="Theme.WallpaperCropper">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
    <item name="android:windowShowWallpaper">true</item>
  </style>

  <style name="Theme.WallpaperCropper" parent="@android:style/Theme.DeviceDefault">
    <item name="android:actionBarStyle">@style/WallpaperCropperActionBar</item>
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowActionBarOverlay">true</item>
  </style>

  <style name="WallpaperCropperActionBar" parent="@android:style/Widget.DeviceDefault.ActionBar">
    <item name="android:displayOptions">showCustom</item>
    <item name="android:background">#88000000</item>
  </style> 
```

**价值-v19/styles.xml**

```
 <style name="Theme.WallpaperCropper" parent="@android:style/Theme.DeviceDefault">
    <item name="android:actionBarStyle">@style/WallpaperCropperActionBar</item>
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="android:windowTranslucentNavigation">true</item>
  </style>

  <style name="Theme" parent="@android:style/Theme.DeviceDefault.Wallpaper.NoTitleBar">
    <item name="android:windowTranslucentStatus">true</item>
    <item name="android:windowTranslucentNavigation">true</item>
  </style> 
```

编辑：有一种更好的方法，它也适用于支持库。只需添加这行代码，而不是我上面写的：

```
getSupportActionBar().setDisplayShowCustomEnabled(true); 
```

# php - 从文本框中的数据库中检索的值在空格后丢失

> ID：12883733
> 
> 赞同：2
> 
> 时间：2012-10-14T15:37:45.257
> 
> 标签：php, mysql, forms, row, fetch

这是针对具有一些用户可以编辑的文本框的edit_inv.php。
问题在于包含空格的值。例如。思科路由器（在 phpmyadmin 中），当我打印出文本框中的值（要编辑或保持原样）时，它只有思科。路由器一词不见了。如果用户不想编辑 Cisco 路由器部分并且必须再次键入路由器，这将是很糟糕的。

编辑脚本有效。只是空格后的所有内容都不在文本框中。

我刚刚开始使用 php，希望能得到一些帮助。

```
<?php

//  Mysql Connect
include('lock.php');
require_once('mysql.php');
$edit_inv = $_GET['inventory_id'] ;

$_SESSION['edit_inv'] = $edit_inv; 

$query = "SELECT * FROM inventory WHERE unikl_id= $login_session_id and inventory_id='$edit_inv'";
$result = mysql_query($query);

    echo '<form method="post" action="handle_inv_edit.php">';
        // Table header.
    echo '<table align="center" cellspacing="0" cellpadding="5" border="2">
    <tr>
    <td align="center"><b>Inventory ID</b></td>
    <td align="center"><b>Device Name</b></td>
    <td align="center"><b>Quantity</b></td>
    <td align="center"><b>Level/Room</b></td>
    <td align="center"><b>Email</b></td>
    <td align="center"><b>Availability</b></td>
    </tr>';

        // Fetch and print all the records.
        while ($row = mysql_fetch_array($result)) {
        echo    '<tr>
                <td align="center">' . $row['inventory_id'] . '</td>

                <td align="left"><input type="text" size="60" 
                name="pro_name" value='.$row['pro_name'].'></td>

                <td align="left"><input type="text" size="4" 
                name="quantity" value='.$row['quantity'].'></td>

                <td align="center"><input type="text" size="4" 
                name="level" value='.$row['level'].'></td>

                <td align="left"><input type="text" size="60"
                name="email" value='.$row['email'].'></td>

                <td align="left"><input type="radio" name="available" value="Yes" CHECKED > Yes 
                        <input type="radio" name="available" value="No"> No</td>

                </tr>';
    }
    echo '</table>';

    echo '<br /><div align="center"><input type="submit" 
    name="Submit" value="Edit" /></div>
    <input type="hidden" name="submitted" value="TRUE" />';

    echo '</form>';
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T15:46:34.380

可能是因为你错过`""`了文本框的 value 属性，如果你的`value contains space`then 它会破坏你的文本

```
<td align="left"><input type="text" size="60" 
                name="pro_name" value="'.$row['pro_name'].'"></td> 
```

这样，您需要将“”代码放入所有文本框中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-21T04:39:47.220

当您尝试从我的 sql 表中检索数据并将其显示在 html 表中时，使用如下：

```
echo "<td align='left'><input type='text' size='60' name='pro_name' value='".$row['pro_name']."'></td>"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T15:45:52.617

您可能成为 SQL 注入的受害者，并且您看不到空间，因为没有转义。

```
<?php

if (isset($_POST))
{
    $pro_name = $_POST["pro_name"]; // if you already escaped in a form you simply print post
}

?>

<?php

//  Mysql Connect
include('lock.php');
require_once('mysql.php');
$edit_inv = mysql_real_escape_string($_GET['inventory_id']);

$_SESSION['edit_inv'] = (int)$edit_inv; 

$query = "SELECT * FROM inventory WHERE unikl_id= $login_session_id and inventory_id='$edit_inv'";
$result = mysql_query($query);

    echo '<form method="post" action="handle_inv_edit.php">';
    // Table header.
    echo '<table align="center" cellspacing="0" cellpadding="5" border="2">
    <tr>
    <td align="center"><b>Inventory ID</b></td>
    <td align="center"><b>Device Name</b></td>
    <td align="center"><b>Quantity</b></td>
    <td align="center"><b>Level/Room</b></td>
    <td align="center"><b>Email</b></td>
    <td align="center"><b>Availability</b></td>
    </tr>';

    // Fetch and print all the records.
    while ($row = mysql_fetch_array($result)) {
    echo    '<tr>
            <td align="center">' . mysql_real_escape_string($row['inventory_id']) . '</td>

            <td align="left"><input type="text" size="60" 
            name="pro_name" value='.mysql_real_escape_string($row['pro_name']).'></td>

            <td align="left"><input type="text" size="4" 
            name="quantity" value='.mysql_real_escape_string($row['quantity']).'></td>

            <td align="center"><input type="text" size="4" 
            name="level" value='.mysql_real_escape_string($row['level']).'></td>

            <td align="left"><input type="text" size="60"
            name="email" value='.mysql_real_escape_string($row['email']).'></td>

            <td align="left"><input type="radio" name="available" value="Yes" CHECKED > Yes 
                    <input type="radio" name="available" value="No"> No</td>

            </tr>';
    }
    echo '</table>';

    echo '<br /><div align="center"><input type="submit" 
    name="Submit" value="Edit" /></div>
    <input type="hidden" name="submitted" value="TRUE" />';

    echo '</form>';
?> 
```

# java - 在emulator.sd卡错误中运行android开源代码

> ID：12883736
> 
> 赞同：-2
> 
> 时间：2012-10-14T15:38:19.390
> 
> 标签：java, android, eclipse

我下载了[ringdroid](http://code.google.com/p/ringdroid/) android 应用程序的源代码。我需要通过 eclipse ADT 插件在 android 模拟器上运行这个应用程序。

但是当我尝试在模拟器上执行应用程序时会出现以下错误。加载项目时，错误会显示在模拟器上。错误是

> 在运行应用程序之前添加 SD 卡

帮我解决这个问题，因为我需要为我的项目提供可执行的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:30:04.593

单击窗口-> AVD 管理器-> 选择您的模拟器-> 编辑，然后有 SD 卡大小选项。这里填写SD卡的大小。这将使您的模拟器拥有您指定大小的 SD 卡。

# jquery - 如何在 firefox、opera 和 IE 上使用 jPlayer？

> ID：12883737
> 
> 赞同：1
> 
> 时间：2012-10-14T15:38:20.353
> 
> 标签：jquery, jquery-plugins, jplayer

我正在使用 jplayer 2.1.0。我有 4 个浏览器 chrome 22、opera 12、IE9 和 mozilla firefox 15，它们都是截至 2012 年 10 月的最新浏览器。我的播放器在 chrome 中工作，但在所有其他浏览器中都失败了。我现在不使用 Flash，所以只依赖 HTML5。这是代码。

```
$(document).ready(function(){
            $("#jquery_jplayer_1").jPlayer({
                ready: function () {
                    var url;
                    $('.singles').click(function(event){
                        var x = event.target;
                        url = "http://localhost:8080/WebApplication1/songs/"+x.innerHTML;
                        $("#jquery_jplayer_1").jPlayer("setMedia",{
                            mp3: url
                        }).jPlayer("play");
                    });
                },
                swfPath: "/js",
                supplied: "mp3, oga"
            });
        }); 
```

我直接使用url中的文件路径..这是不好的做法吗？
我应该通过服务器发送 mp3 文件吗？喜欢设置内容类型和所有内容？..对不起，如果我很傻，因为我自己对此感到很愚蠢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:17:02.473

请参考以下 URL 并下载源代码，然后根据您的需要进行修改 [http://www.script-tutorials.com/how-to-play-audio-video-using-jplayer/](http://www.script-tutorials.com/how-to-play-audio-video-using-jplayer/)

由于firefox和opera不播放mp3文件所以修改jquery调用如下

```
$(document).ready(function(){
$("#jquery_jplayer_1").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            mp3: "media/track.mp3",
            oga: "media/track.ogg"
        }).jPlayer("play");
    },
    ended: function (event) {
        $(this).jPlayer("play");
    },
    swfPath:"/swf",
    supplied: "mp3,oga",
    solution:"html,flash",
    wmode:"window"  
}); 
}); 
```

然后在媒体文件夹中添加相同 mp3 曲目的 ogg 文件。使用任何转换器将 mp3 文件转换为 ogg 格式。

# unit-testing - Scalacheck，单元测试多进程算法

> ID：12883741
> 
> 赞同：1
> 
> 时间：2012-10-14T15:39:07.573
> 
> 标签：unit-testing, scala, parallel-processing, mpi, scalacheck

我目前正在使用 MPJ-Express（即 Java MPI 变体）为多进程并行算法开发 Scala 框架。

MPJ-Express 和基本上所有 MPI 变体通过使用相同程序启动多个进程来工作。由于我无法控制运行时的进程（我的程序不会产生进程），因此由于以下原因，我无法使用标准单元测试框架：

1.  并非所有进程在执行后都会拥有结果的本地副本（理想情况下，结果应该在任意根进程中收集）

2.  缺乏对标准输出的控制。仅从单个进程中获取输出并不容易。

3.  缺乏流量控制。所有进程必须同时进入同一个测试，以允许单程序多数据算法。

数字 2 主要是问题所在，因为 3 可能会按预期工作，而 1 可以通过额外的通信操作来修复。有没有人有实践经验，或者知道多进程算法的更好的单元测试策略？

**编辑**

现在，我似乎对使用*scalacheck*的以下代码很幸运：

```
package it.vigtig.thesis.collection.scalacheck

import java.io.OutputStream
import java.io.PrintStream

import org.scalacheck.Prop.forAll
import org.scalacheck.Properties

import it.vigtig.thesis.env.DistEnv.globalRank
import it.vigtig.thesis.env.DistEnv.parallelize

object CollectionCheck {

  def main(args: Array[String]) {

    parallelize(args) {

      if (globalRank > 0) {
        Console.setOut(new PrintStream(new OutputStream() {
          def write(b: Int) { //nop    
          }
        }))
      }

      ST.main(Array())
    }

  }

}

object ST extends Properties("String") {

  //  def println(a: String*) = gprintln(a)
  property("startsWith") = forAll((a: String, b: String) => (a + b).startsWith(a))

  property("concatenate") = forAll((a: String, b: String) =>
    (a + b).length > a.length && (a + b).length > b.length)

  property("substring") = forAll((a: String, b: String, c: String) =>
    (a + b + c).substring(a.length, a.length + b.length) == b)

} 
```

上面的代码将 scala-println 方法重新路由到除 p=0 之外的所有其他进程的 nop 操作。我应该能够使用并行方法运行测试套件，只允许根进程来验证结果。以上产生以下输出：

```
MPJ Express (0.38) is started in the multicore configuration
rank-0: 0.212437745 time taken for initialize
+ String.startsWith: OK, passed 100 tests.
! String.concatenate: Falsified after 0 passed tests.
> ARG_0: 
> ARG_1: 
+ String.substring: OK, passed 100 tests. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:14:54.623

github.com/rickynils/scalacheck/issues/37 显然，这是由于 scalacheck 中的一种错误。这个错误将被修复，但现在看来您可以克隆该帖子中的存储库并获得工作副本！:)

# c++ - 如何将 C++ Boost 集成到 Qt 项目中？

> ID：12883742
> 
> 赞同：2
> 
> 时间：2012-10-14T15:39:15.520
> 
> 标签：c++, macos, qt, boost

我想在我的 Qt 应用程序中使用 boost/filesystem.hpp，但构建器一直说：

```
Library not loaded: libboost_filesystem.dylib
Reason: image not found 
```

这是我尝试链接它的方法：

```
INCLUDEPATH+= /installdir/boost_1_50_0  
LIBS += -L/installdir/boost_1_50_0/stage/lib -lboost_filesystem 
```

我也试过直接链接。我也尝试根据[jschoen 的回答](https://stackoverflow.com/questions/4435067/adding-boost-library-to-a-c-project-in-os-x-eclipse)重建 boost ，没有区别。
我正在运行 MacOSX Lion。如何正确链接提升？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T16:01:08.047

与此同时，我找到了解决方案。

1.  使用 macports 安装 boost (sudo port install boost) 感谢[dies 和 Tim Cooper](https://stackoverflow.com/questions/104322/how-do-you-install-boost-on-macos)。
2.  然后链接：

`INCLUDEPATH += /opt/local/include`
`LIBS += -L/opt/local/lib`
`LIBS += -lboost_system-mt -lboost_filesystem-mt`

# php - PHP nl2br，双重加法需要帮助

> ID：12883750
> 
> 赞同：1
> 
> 时间：2012-10-14T15:40:06.437
> 
> 标签：php, nl2br

我有这个代码

```
 require_once("../Packages/Connection.php");
       $create_object = mysql_query("SELECT * FROM `Articles` WHERE `group` = 'News' ORDER BY `id` DESC;");

      while($row=mysql_fetch_array($create_object))
        {
        $time = $row[time];
        $date = date("H:i M jS o ",$time);
        print "<form action='Update.php' method='post' float:left;>

                <input hidden='hidden' name='articleId' value='$row[id]'>

                <input hidden='hidden' name='method' value='update'>

                <textarea name='articleText' rows='3' cols='25'>$row[text]</textarea>
                <br />  
                <input type='submit' value=' Update '>
            </form><br />
            <form action='Update.php' method='post'>

                <input hidden='hidden' name='articleId' value='$row[id]'>

                <input hidden='hidden' name='method' value='delete'>

                <input type='submit' value=' Delete ' onClick='return confirmDelete()'float:left;'>

            </form>     
         <hr><br />";
         } 
```

它可以输出文本，它将新行更改为，`<br />`但每次更新时，它都会添加一个新的，所以我第一次输入如下文本：

```
Hi
My name is Jesper

it outputs Hi <br />
My name is Jesper to the database

and second time if i want to change something, like the name..
Hi <br /><br />
My name is JapSeyz 
```

它继续添加`<br />'s..`我如何将其限制为只有一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:45:18.157

那是因为您`nl2br`在将文本存储到数据库之前使用。去那里看看...

`nl2br`正确的方法是仅在查看时转义数据（例如， ）。数据库中的数据应该是清晰的，没有针对特定目的进行转义的任何修改。

但是，在`<textarea>`元素中，已经处理了换行符，无需在`<br>`其中插入元素。

所以不要`nl2br`在存储数据时使用，仅在页面上打印时使用（而不是在表单元素中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-13T10:38:28.733

我用自己的功能修复 nl2br 错误：

```
if (!function_exists('snl2br')) {
    function snl2br( $input ) {
        return preg_replace('~(\r?\n\s?)+?~',"<br>",$input);
    }
} 
```

我希望它会帮助你。

# sql - 按2列排序SQL查询，先做数学运算

> ID：12883753
> 
> 赞同：1
> 
> 时间：2012-10-14T15:40:18.447
> 
> 标签：sql, rating, reddit, frontpage

对于一个博客项目，我想根据他们的评级和插入的日期时间来订购新帖子。
但在订购之前，我想对这些值进行一些数学运算，以便在显示的第一个帖子中获得流行度和流行度的良好组合。（就像在reddits首页上）

我可以用纯 SQL 做到这一点吗？我不认为这是可能的......
你将如何处理这项任务？

表：post 列：pid 标题内容作者日期时间 last_edited 类别密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:50:07.603

可能您需要创建一些表达式和命令 - 在这里我试图展示它是如何实现的：

```
declare @Temp_Data table (Rating int, [Date] datetime, [Text] nvarchar(max))

insert into @Temp_Data 
select 100, '20121001 15:00', 'Big rating post' union all
select 1, '20121013 15:00', 'Recent post' union all
select 20, '20121005 15:00', 'Other post'

select
    T.Rating, T.[Date], T.[Text]
from @Temp_Data as T
order by Rating * 200 - datediff(mi, [Date], getdate()) desc 
```

# iphone - 水平滚动视图对象限制？

> ID：12883755
> 
> 赞同：2
> 
> 时间：2012-10-14T15:40:33.253
> 
> 标签：iphone, ios, ipad

我正在我的 ipad 上尝试我的代码，但它崩溃了。设备日志上没有任何内容，只有未知类型和未知进程。所以我确实挖了。我tot这是一个内存问题。我发现我不能在水平滚动视图上添加这么多图像。我有100多个。

这是我的代码

```
for(int index=0; index < 166; index++)
{

UIImageView *imgscv = [[UIImageView alloc] init];
imgscv.bounds = CGRectMake(0, 0, 200, 250);
imgscv.frame = CGRectMake(5+xOffset, 5, 200, 250);
imgscv.image = [UIImage imageNamed:[NSString stringWithFormat:@"%d.jpg",index-1]];
[images insertObject:imgscv atIndex:index];
scrollview.contentSize = CGSizeMake(scrollWidth+xOffset,110);
[scrollview addSubview:[images objectAtIndex:index]];
xOffset += 205;
} 
```

当我将 for 循环中索引的上限更改为 16 时，一切都很好。是这样吗？有限制吗？您可能会建议任何修复或替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:26:05.880

为什么不直接加载滚动视图的可见部分，然后使用

```
- (void)scrollViewDidScroll:(UIScrollView *)sender 
```

响应者并在滚动后将其他人吸引到那里。会节省很多性能

# c# - 为什么任务异常不会在 GC.Collect 上重新抛出

> ID：12883758
> 
> 赞同：6
> 
> 时间：2012-10-14T15:40:42.430
> 
> 标签：c#, c#-4.0, task

我的理解是，当 Task 抛出异常时，当观察到 Tasks 的 (Result, WaitAll) 属性之一或发生 GC 时，它会被存储并重新抛出。鉴于此，我运行以下代码。

```
Task t = Task.Factory.StartNew(() =>
{                    
    throw new Exception("Hello World");
});

for (int i = 0; i < 10000; i++)
{
    Console.WriteLine(i);
}    

 GC.Collect();

 for (int a = 20; a < 30; a++)
 {
      Console.WriteLine(a);
 } 
```

但是当我运行上面的代码时，我除了在 GC.Collect 抛出一个异常，但它没有发生，而是继续打印第二个循环的输出。我的理解哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T16:03:00.213

在您的示例代码中，该`Task`对象`t`仍在范围内，因此在您调用`GC.Collect()`.

除此之外，.NET 4.0 和 .NET 4.5 之间的行为发生了变化：

在 .NET 4.0 中，未观察到的异常会在终结器线程上引发异常，从而导致进程崩溃。

在 .NET 4.5 中，此行为已更改，因此默认情况下会忽略未观察到的异常。您可以设置一个配置开关来重新打开旧的、严格的行为。

[.NET 4.0：任务和未处理的异常](http://blogs.msdn.com/b/pfxteam/archive/2009/05/31/9674669.aspx)

[.NET 4.5：.NET 4.5 中的任务异常处理](http://blogs.msdn.com/b/pfxteam/archive/2011/09/28/10217876.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:51:43.037

因为使用 Task 就像使用单独执行的线程（除了主线程）。因此，通过这种方式，您可以获得*循环*输出以及*GC.Collect*执行，直到任务执行异常行。

# java - 使用以数据为中心的方法在 Spring MVC 中维护整洁的架构

> ID：12883759
> 
> 赞同：14
> 
> 时间：2012-10-14T15:40:54.740
> 
> 标签：java, spring-mvc, model-view-controller, mvvm, architecture

# 使用以数据为中心的方法在 Spring MVC 中维护整洁的架构

我正在尝试为我们正在制作的基于 Java 的新 Web 应用程序（门户类型应用程序）的前端绘制架构图。我想从第一天开始就做到这一点，我想在这里开始讨论，以帮助我在我的架构设计中实施鲍勃叔叔的[清洁架构](http://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html)。

这是我们的技术堆栈的快速概述，从上到下（技术不重要，结构很重要）：

*   甲骨文数据库
*   Oracle Service Bus 使用 WSDL 公开服务
*   JAX-WS 从 WSDL 生成 Java 类（我们称之为“生成的服务层”）
*   由映射到生成的数据对象的 POJO 组成的域模块
*   将“生成的服务层”暴露给前端应用程序的消费者模块
*   基于 Spring MVC 的前端模块，使用 FreeMarker 呈现视图

一个关键点：

> 特别是，在外圈中声明的事物的名称不能被内圈中的代码提及。这包括函数、类。变量或任何其他命名的软件实体。

试图坚持 Bob 的清洁架构，我与自己反复讨论了*应用程序逻辑*的放置位置，即他的架构中的“用例”层。

这是我想出的方法：

## 第 1 层 - 实体

> 实体封装了企业范围的业务规则。

这是包含*域对象*的域模块所在的位置，这些是自包含对象，彼此之间的依赖性最小。只有与对象本身相关的逻辑可能存在于这些域对象上，而没有特定于用例的逻辑。

与 JPA 或 Hibernate 等 ORM 不同，使用转换数据的服务总线通过 WSDL 公开对我们数据库的访问。正因为如此，我们没有传统意义上的“实体”（带有 ID），而是一种以*数据为中心的方法*，使该层成为数据访问层，由消费者模块呈现给应用程序的其余部分。

## 第 2 层 - 用例

> 该层中的软件包含特定于应用程序的业务规则。

这就是特定于我们应用程序用例的逻辑所在。对此层的更改不应影响数据访问层（第 1 层）。对 GUI 或框架实现 (Spring MVC) 的更改不应影响这一层。

**这是有点棘手的地方：** 由于我们的数据访问层（在第 1 层）必须保持干净的应用程序逻辑，我们需要一个层来促进以适合用例的方式使用该层。我发现这个问题的一个解决方案是使用我选择称为*MVC-VM的“* *MVVM 模式*”的变体。请参阅下面的说明。其中的“VM”部分位于此用例层中，由封装此用例特定逻辑的类表示。*`*ViewModel`*

 *## 第 3 层 - 接口适配器

> 该层中的软件是一组适配器，可将数据从对用例和实体最方便的格式转换为对某些外部机构（如数据库或 Web）最方便的格式。

这就是我们 GUI 的 MVC 架构所在的地方（我们的“MVC-VM”中的“MVC”）。本质上，这是当`Controller`-classes 从 -classes 获取数据`*ViewModel`并将其放入 Spring MVC 的`ModelMap`ojects 中，这些 ojects 由 View 中的 FreeMarker-templates 直接使用。

在我看来，在我们的例子中，服务总线也属于这一层。

## 第 4 层 - 框架和驱动程序

> 通常，您不会在这一层编写太多代码，除了与内部下一个循环通信的胶水代码。

这一层实际上只是我们应用程序中的一个配置层，即 Spring 配置。例如，这将是我们指定 FreeMarker 用于呈现视图的地方。

* * *

### 模型视图 ViewModel 模式

> MVVM 有助于将图形用户界面（作为标记语言或 GUI 代码）的开发与称为模型（也称为数据模型）的业务逻辑或后端逻辑的开发明确分离，以将其与视图区分开来模型）。MVVM 的视图模型是一个值转换器，这意味着视图模型负责从模型中公开数据对象，以便这些对象易于管理和使用。

有关 MVVM 模式的更多信息，请访问[Wikipedia](http://en.wikipedia.org/wiki/Model_View_ViewModel)。

MVC-VM 角色将在我们的应用程序中实现，如下所示：

*   **模型**-`ModelMap`由视图模板使用的 Spring MVC 中的数据结构简单地表示。
*   **查看** - FreeMarker 模板
*   **控制器**Spring 的`Controller`类，将*HTTP URL 请求*定向到特定的*处理程序*（以及诸如 FrontController 之类的函数）。这些类中的处理程序负责从用例层获取数据并在显示数据时将其推送到视图模板（HTTP `GET`），以及向下发送数据以进行存储（HTTP `POST`）。通过这种方式，它本质上用作ViewModel 和 View 之间的绑定器，使用 Model *。*

*   **ViewModel** - 这些类负责 1) 以 View 可用的方式构造来自数据访问层的数据，以及 2) 处理来自 View 的数据输入。“处理”意味着验证和分解数据，以便可以将其发送到堆栈以进行存储。该层将在我们的 Spring MVC 前端模块`<UseCase>VM`中以包中的类的形式出现。`viewmodel`

`ModelMap`这里的一个关键组件是在 Spring MVC和 FreeMarker 模板之间发生的隐式绑定。模板仅使用模型 ( `ModelMap`s)，其中控制器已将数据置于其可以使用的格式中。这样我们就可以制作这样的模板：

```
<body>
  <h1>Welcome ${user}!</h1>
  <p>Our latest product:
  <a href="${latestProduct.url}">${latestProduct.name}</a>!
</body> 
```

* * *

我为冗长的解释道歉，但我无法用更少的词来解释这个（相对简单的）架构。

我将非常感谢我在这里的方法的一些输入 - 我在正确的轨道上吗？MVC-VM 的东西有意义吗？我是否违反了任何清洁架构原则？

当然有很多解决方案，但我试图找到一个解决方案，它 1) 没有过度设计和 2) 遵守 Bob 的清洁架构的原则。

* * *

## 更新：

我认为让我失望的关键问题是“用例”层在这个应用程序中采用什么形式。请记住，我们有一个从数据访问层获取数据的 MVC 前端。如果 MVC 部分适合 Bob 的“接口适配器”，而数据层的域模型适合 Bob 的“实体”层，那么我将实现应用程序逻辑的用例类称为什么？我很想将它们称为`<UseCase>Model`s 并将它们放入 MVC 项目中，但根据 Bob

> 模型可能只是从控制器传递到用例，然后从用例返回到演示者和视图的数据结构。

所以这意味着我的模型对象应该是“哑巴的”（就像 Spring 中的简单`Map`.一样`ModelMap`），然后控制器负责将 Use Case 类中的数据放入这个 Map 结构中。

再说一遍，我的用例类采用什么形式？怎么样`<UseCase>Interactor`？

**但总而言之**，我意识到 MVC-MV 的东西是过度设计的（或者根本不正确）——正如“mikalai”在下面指出的那样，它本质上只是当前形式的两层应用程序；一个数据访问层和一个前端 MVC 层。就那么简单。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T04:17:22.380

哇，那太多了。而且我认为您已将 Bob 叔叔的行话翻译到您的 Spring Java 应用程序中。

由于架构主要是意见，而且您的问题有点要求...

有许多不同风格的建筑，而且……大多数都被高估了。因为大多数都是一样的：通过间接和抽象实现**更高的内聚**和**更松散的耦合。**

最重要的（恕我直言）是**依赖**项。制作大量小项目而不是一个巨大的单体项目是获得“干净”架构的最佳方式。

清洁架构最重要的技术不是“Spring MVC”技术或“Freemarker”模板语言，也不是 Dobb 博士的另一篇带有方框图、六边形图和各种其他抽象多边形的文章。

**专注于您的构建和依赖管理技术。这是因为这项技术将强制执行您的架构规则。**

此外，如果您的代码难以测试..您的架构可能很糟糕。

**专注于使您的代码易于测试并编写大量测试。**

如果你这样做了，你可以很容易地改变你的代码而不用担心......你甚至可以改变你的架构:)

谨防过于关注一个公牛#%$@# 架构规则。**说真的**：如果您的代码易于测试、易于更改、易于理解且性能良好，那么您就有了一个好的架构。没有 6 周到 6 块腹肌的文章可以做到这一点（对不起鲍勃叔叔）。这需要经验和时间……没有灵丹妙药的计划。

所以这里是我自己的“干净”架构......我的意思是指导方针：

*   做很多小项目
*   使用依赖管理（即Maven、Gradle）
*   不断重构
*   理解和使用某种依赖注入（Spring）
*   编写单元测试
*   了解横切关注点（即当您需要 AspectJ、元编程等时）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-17T18:51:10.267

## 我的解决方案

所以事实证明，在 Java/Spring MVC 中实现 Bob 的“干净架构”是非常重要的，并且需要比我最初包含的更多架构方面。
而且我实际上在网上找不到任何实现示例。

显然，我的架构缺少“用例”层的单独模块，因为这个逻辑不应该存在于 Spring MVC Web 模块中（也不应该被称为“ `*ViewModel`”）。Web/MVC 模块只是应用程序的一个细节，应用程序逻辑应该与它完全分离，并且可以单独测试。

这个新的“用例”模块现在包含`*Interactor`从域模块（实体）获取数据的类。此外，需要“*请求/响应对象*”来促进 MVC/Web 模块和用例模块之间的通信。

我的依赖链现在看起来像这样：

Spring MVC 模块 -> 用例模块 -> 域模块

其中每个箭头（依赖项）都采用*Boundary*形式，这意味着在箭头右侧的模块中定义了一个接口，该接口在需要的地方实现并在需要的地方注入（控制反转）。

以下是我最终得到的接口（每个用例）：

`I<UseCase>Request`- 在 MVC 模块中实现，在 Controller 中实例化 `I<UseCase>Response`- 在 Use Case 模块中实现，在 Interactor 中实例化 `I<UseCase>Interactor`- 在 UseCase 模块中实现，在 Controller 中注入 `I<UseCase>Consumer`- 在 Domain 模块中实现，在 Interactor 中注入

**这个怎么运作？**从 HTTP 请求中获取参数并将其打包到
传递给. 从域模块中获取它需要的数据并将其应用程序特定的逻辑强加于它，然后将其放入 a并将其发送回. 然后最后简单地将这个（现在对 GUI 友好的）简单数据放在一个对象中，并将其转发到 FreeMarker 模板，然后该模板直接使用这些数据并呈现 HTML。`Controller``RequestModel``Interactor``Interactor``*Consumer``ResponseModel``Controller``Controller``Map`

A`Presenter`可以参与其中的最后一部分，使其成为 Model-View-Presenter 模式的实现，但我现在要离开它。

## 我的结论

严格来说，我最终得到了比开发早期所需的文件更多的文件。然而，随着应用程序的复杂性和规模的增长，我相信这种结构使我们能够轻松地保持低耦合和高内聚。此外，Web 模块现在很容易替换——它只是将请求传递给用例模块并接收响应对象。此外，应用程序的每一层（域逻辑、应用程序逻辑和 GUI 逻辑）都是可单独测试的，只有视图部分需要 Web 服务器才能进行测试。

感谢我在这里收到的所有建议和指示。请评论我的解决方案 - 我并不声称它是完美的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-15T16:05:02.013

> 正因为如此，我们没有传统意义上的“实体”（带有 ID），而是一种以数据为中心的方法，使该层成为数据访问层，由消费者模块呈现给应用程序的其余部分。

在那部分我觉得有些奇怪。为什么即使您从 Web 服务获取实体也没有 ID？

在 Clean Architecture 方法中，实体层并不是数据访问层。数据访问应该是架构中的一个**细节**，而不是核心问题。正如您自己所说，实体包含特定于域的*业务规则*。业务规则或行为与您获取数据的方式非常不同。

*实体是所有域逻辑发生的地方，而不是您从中获取数据的地方*。根据 Clean Architecture，您可以从网关获取持久数据或外部数据。

> 我发现这个问题的一个解决方案是使用我选择称为 MVC-VM 的“MVVM 模式”的变体。请参阅下面的说明。其中的“VM”部分位于此用例层中，由封装此用例特定逻辑的 *ViewModel 类表示。

`ViewModel`显然是指一个视图，它是一个演示工件 - 另一个细节。用例/交互器应该没有这些细节。相反，交互者应该通过边界发送和接收与交付机制无关的数据结构（RequestModels 和 ResponseModels）。

我知道这是您的自定义模式，不涉及对演示框架的引用，但“视图”一词只是具有误导性。*

# c# - 阻止新的 Windows 网络浏览器控制

> ID：12883760
> 
> 赞同：0
> 
> 时间：2012-10-14T15:41:23.070
> 
> 标签：c#, webbrowser-control

我正在尝试在控制台应用程序（dll）上使用 webbrowser 控件

我想阻止它打开新窗口。

```
using (WebBrowser wb = new WebBrowser())
    {

                    wb.ScrollBarsEnabled = false;
                    wb.ScriptErrorsSuppressed = true;
           wb.NewWindow += new System.ComponentModel.CancelEventHandler(wb_NewWindow);        
                   wb.Navigate(url);
            while (wb.ReadyState != WebBrowserReadyState.Complete)
            {
                Application.DoEvents();
            }
  }

private void wb_NewWindow(object sender, CancelEventArgs e)
        {
            //System.Windows.Forms.HtmlDocument document =
            //    this.webBrowser1.Document;

                       e.Cancel = true; 

        } 
```

# java - 使用方法在 Jpanel 中添加 JButton 时，如何将最后添加的按钮保留在视图中？

> ID：12883762
> 
> 赞同：0
> 
> 时间：2012-10-14T15:41:38.027
> 
> 标签：java, swing, jpanel

每当我调用我的 add corePanel 或添加 electivePanel 方法时，他们只是替换添加的最后一个按钮，而不是在我在 Jpanel 中设置的 4 列中添加一个新按钮。

我知道我已经将变量 Panel 命名为真正的按钮，但这无关紧要。

我真的需要一些帮助。

谢谢

编辑：现在当我将鼠标悬停在按钮上时，其中的所有信息（Jpanels）都消失了？

```
package Assignment2.view;

import java.awt.Color;
import java.awt.GridLayout;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.Border;

import ams.model.Course;

public class CoursePanel extends JPanel 
{
private JButton corePanel = new JButton();
private JButton electivePanel = new JButton();
private JLabel ccLabel = new JLabel("Code: ");
private JLabel titleLabel = new JLabel("Title: ");
private JLabel cpLabel = new JLabel("Credit Points: ");
private JLabel prLabel = new JLabel("Prereqs: ");
private Border blackline;

public CoursePanel()
{   
    setLayout(new GridLayout(0,4));
}

public void addcorePanel(Course createcourse)
{
    // core panel properties
    blackline = BorderFactory.createLineBorder(Color.black,10);

    corePanel.setLayout(new GridLayout(4,1));
    corePanel.setBackground(Color.GRAY);
    corePanel.setBorder(blackline);
    corePanel.add(ccLabel);
    corePanel.add(titleLabel);
    corePanel.add(cpLabel);
    corePanel.add(prLabel);
    corePanel.setAlignmentX(LEFT_ALIGNMENT);
    corePanel.setAlignmentY(TOP_ALIGNMENT);

    //Needed to rebuild the prerequisites for display.
    String[] prereqs = null;
    String result = null;
    prereqs = createcourse.getPreReqs();

    if (prereqs != null)
    {
    StringBuilder builder = new StringBuilder();
    for(String s : prereqs) 
    {
        builder.append(s);
        builder.append("\n");
    }
    result = builder.toString();
    }
    ccLabel.setText("Code: " + createcourse.getCode());
    titleLabel.setText("Title: " + createcourse.getTitle());
    cpLabel.setText("Credit points: " + Integer.toString(createcourse.getCreditPoints()));
    prLabel.setText("Prereqs: " + result);

    add(corePanel);

}

public void addelectivePanel(Course createcourseE)
{

    //elective panel properties
    electivePanel.setLayout(new GridLayout(4,1));
    electivePanel.setBackground(Color.GRAY);
    electivePanel.add(ccLabel);
    electivePanel.add(titleLabel);
    electivePanel.add(cpLabel);
    electivePanel.add(prLabel);
    electivePanel.setAlignmentX(LEFT_ALIGNMENT);
    electivePanel.setAlignmentY(TOP_ALIGNMENT);

    //Needed to rebuild the prerequisites for display.
    String[] prereqs = null;
    String result = null;
    prereqs = createcourseE.getPreReqs();

    if (prereqs != null)
    {
    StringBuilder builder = new StringBuilder();
    for(String s : prereqs) 
    {
        builder.append(s);
        builder.append("\n");
    }
    result = builder.toString();
    }

    ccLabel.setText("Code: " + createcourseE.getCode());
    titleLabel.setText("Title: " + createcourseE.getTitle());
    cpLabel.setText("Credit points: " + Integer.toString(createcourseE.getCreditPoints()));
    prLabel.setText("Prereqs: " + result);

    add(electivePanel);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:21:10.633

因为`corePanel`被定义为成员变量，所以只有这个组件的实例。因此，无论`addcorePanel`调用多少次，它都只会出现在面板的一个位置/列上。组件`electivePanel`以及这两种方法中使用的所有其他组件也是如此。

解决方案是创建这些是局部变量，以便创建新组件：

```
public void addcorePanel(Course createcourse) {
   // core panel properties
   blackline = BorderFactory.createLineBorder(Color.black, 10);

   // new local instances
   JButton corePanel = new JButton(); 
   JLabel ccLabel = new JLabel("Code: ");
   JLabel titleLabel = new JLabel("Title: ");
   JLabel cpLabel = new JLabel("Credit Points: "); 
   // etc.
   ...
   add(corePanel);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:22:13.137

发生这种情况是因为您的标签和按钮 ( `corePanel`, `electivePanel`) 是类变量，因此当您调用 例如 时`addcorePanel`，您不是创建一个新按钮，而是`JButton`操作同一个`corePanel`按钮。您应该在方法主体内移动变量，如下所示：

```
public void addcorePanel(Course createcourse)
{
    JButton corePanel = new JButton();
    JLabel ccLabel = new JLabel("Code: ");
    JLabel titleLabel = new JLabel("Title: ");
    JLabel cpLabel = new JLabel("Credit Points: ");
    JLabel prLabel = new JLabel("Prereqs: ");

// ....

// ....
} 
```

`JLabels`并且`JButtons`不能共享，因此每次调用方法时都必须创建新实例。

# jquery - 单击特定按钮时，Jquery，load() 不起作用

> ID：12883763
> 
> 赞同：-1
> 
> 时间：2012-10-14T15:41:46.917
> 
> 标签：jquery

你好，我的问题是：

我进行聊天，我希望在单击按钮后将消息添加到数据库中。

这是一个代码：

```
 $('button[id="czat_pisz"]').bind('click',function() {
       alert("Passes");
       $('#hidden').load("czat_pisanie.php?type=" + chat_type + "?message=" + text + "?nick=" + gracz_nick);
  }); 
```

警报仅用于检查。它在我单击按钮时显示。但是 load() 不起作用。当我从点击功能中取出它时它可以工作。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:44:48.140

您的网址无效

```
$('#hidden').load("czat_pisanie.php?type=" + chat_type + "?message=" + text + "?nick=" + gracz_nick); 
```

用这个

```
$('#hidden').load("czat_pisanie.php?type=" + chat_type + "&message=" + text + "&nick=" + gracz_nick); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:42:53.820

抱歉，误解了

```
 $('#hidden').load("czat_pisanie.php?type=" + chat_type + "?message=" + text + "?nick=" + gracz_nick); 
```

这是问题

应该

```
 $('#hidden').load("czat_pisanie.php?type="+chat_type+"&message="+text +"&nick="+ gracz_nick); 
```

根据你的评论

```
$('button[id="czat_pisz"]').bind('click',function() { > $('#hidden').load("test.html"); }); 
             here is the problem ---------------------^----remove this stray > 
```

# c# - 是否有允许用户选择多个文件夹的 Windows 窗体控件？

> ID：12883764
> 
> 赞同：1
> 
> 时间：2012-10-14T15:41:48.327
> 
> 标签：c#, .net, winforms

我尝试了`OpenFileDialog`和`FolderBrowserDialog`控件，第一个控件不允许我选择文件夹，而第二个控件只允许我选择 1 个文件夹。

任何其他控件可以满足我的需求，或者我需要创建自己的控件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:45:16.210

FolderBrowserDialog 只允许选择一个文件夹。试试这个： http: [//www.codeproject.com/Articles/4472/Enhanced-BrowseForFolder-styled-TreeView](http://www.codeproject.com/Articles/4472/Enhanced-BrowseForFolder-styled-TreeView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:15:23.363

你为什么不看看这些参考资料：

1.  [在 Windows 应用程序中使用 FolderBrowserDialog 浏览多个文件夹](https://stackoverflow.com/questions/12261598/browse-multiple-folders-using-folderbrowserdialog-in-windows-application)
2.  [C# - 如何自定义 OpenFileDialog 以选择多个文件夹和文件？](https://stackoverflow.com/questions/11628021/c-sharp-how-to-customize-openfiledialog-to-select-multiple-folders-and-files)

希望这会帮助你。

# php - PHP SOAP client not sending parameters correctly. xsi:nil="true" instead of value

> ID：12883768
> 
> 赞同：1
> 
> 时间：2012-10-14T15:42:00.747
> 
> 标签：php, xml, arrays, web-services, soap

I am trying to consume a web service with no success. It looks like the xml is no properly set.

This is my PHP code:

```
<?php

$wsdlUrl = "http://api.clickatell.com/soap/webservice.php?WSDL";
$serviceUrl = "http://api.clickatell.com/soap/webservice.php";

    $request = array("user"=>"anyuser",
                "password"=>"asdsda",
                "api_id"=>"1234"
                );

var_dump($request);

try {
    $client = new SoapClient($wsdlUrl, array("trace" => 1, "location" => $serviceUrl));
    var_dump($client);
    echo "\n";
    $response = $client->auth($request);
    var_dump($response);
    var_dump($client->__getLastRequest());

    echo "\n";
}
catch(Exception $exp) {
    echo "EXCEPTION";
}

?> 
```

And the SOAP packet is:

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://api.clickatell.com/soap/webservice" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body>
        <ns1:auth>
            <api_id xsi:type="xsd:int">1</api_id>
            <user xsi:nil="true"/>
            <password xsi:nil="true"/>
        </ns1:auth>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

What is wrong with the code that causes that api_id, user and password are not being sent?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:03:45.393

If you check out `var_dump($client->__getFunctions())`, you can see, that the parameters have to be passed like with a normal function call.

So you could do either the verbose thing with `SoapParam`:

```
$response = $client->auth(
    new SoapParam($request["api_id"], "api_id"),
    new SoapParam($request["user"], "user"),
    new SoapParam($request["password"], "password")
); 
```

Or less verbose by just giving the parameters directly:

```
$response = $client->auth($request["api_id"],
    $request["user"], $request["password"]); 
```

# ruby - 在 Ruby 中赋值时的布尔运算

> ID：12883771
> 
> 赞同：1
> 
> 时间：2012-10-14T15:42:42.300
> 
> 标签：ruby, boolean-expression

我是 Ruby 新手，我做了以下事情：

```
c = {}
# Some code in the middle
c['a'] = c['a'] or 0 
```

现在我希望它像这样工作：如果`c['a']`is `nil`，则`c['a'] or 0`返回 0。所以 的值`c['a']`应该是 0。

然而 的`c['a']`值为`nil`。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:44:53.103

[`or`与`||`Ruby 中](http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/)的不同。你有什么变成这样分组：

```
(c['a'] = c['a']) or 0 
```

这基本上什么都不做。您应该`||`改用：

```
c['a'] = c['a'] || 0 
```

或者简单地说：

```
c['a'] ||= 0 
```

请注意/与`and`/`&&`具有相同的行为。`or``||`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T15:44:23.350

`=`具有比 更高的优先级`or`，因此您需要括号来使其执行您期望的操作：

```
c['a'] = (c['a'] or 0) 
```

或者`||`像往常一样使用:)

# php - 将敏感文件放在根目录之外（多种编程语言）

> ID：12883772
> 
> 赞同：0
> 
> 时间：2012-10-14T15:42:46.267
> 
> 标签：php, python, ruby, file, directory-structure

我将在 highload 项目中使用多种编程语言（Python、Ruby、PHP），如果值得将敏感文件（如数据库配置文件或服务器控制器）放在根文件夹之外的目录中，我很感兴趣。

我读到这被推荐用于纯 PHP 应用程序，而不是其他语言呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:44:34.107

根据经验，任何您不直接提供给用户的东西都不应该在根目录中——它不应该在那里，而且您不想冒险将它意外地提供给某人。

例如，Django[建议](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#serving-files)采用此策略。（事实上​​，他们建议为 Django 使用两个完全不同的 Web 服务器并尽可能提供内容）。

# jquery - 单击另一个页面时，如何阻止我的标题“重新加载”？

> ID：12883780
> 
> 赞同：4
> 
> 时间：2012-10-14T15:43:19.113
> 
> 标签：jquery, header

我是一个相对较新的网页设计师。我有一个问题，我真的不知道如何表达我希望我能得到一些帮助！我想知道如何做到这一点，以便当用户单击我网站上的另一个页面时我的标题不会“重新加载”。一个很好的例子是网站上的“隐形生物”（特别是这里：http: [//www.invisiblecreature.com/#/work/all/hexapillar](http://www.invisiblecreature.com/#/work/all/hexapillar)）。当您单击不同的链接时，标题会保持加载状态（它不会像在大多数网站上那样“变白”）。对不起，如果这有点令人困惑 - 我很难把我的想法变成文字。非常感谢！！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:58:38.903

1.  构建站点以使其正常运行（包括重新加载共享内容）
2.  设置站点的服务器端部分，以便您可以请求普通页面，或者使用修改后的 URI 仅请求内容。
3.  使用 JavaScript 设置事件处理程序，以便在激活链接时测试它是否指向您网站上的另一个页面或其他地方。
4.  如果是到您网站上的页面：`preventDefault`然后使用 XMLHttpRequest 获取页面的内容并使用 DOM 将页面的内容部分替换为新内容
5.  用于[`pushState`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)将 URL 更改为链接将转到的 URL
6.  设置一个[`popstate`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_popstate_event)事件处理程序，以便在用户按下返回时呈现正确的内容。

如果浏览器不支持任何 XHR、pushState 等，请确保使用[功能检测](https://stackoverflow.com/questions/1294586/browser-detection-versus-feature-detection)回退到常规链接。

# c# - 通过 Linq 比较两个数据表

> ID：12883790
> 
> 赞同：3
> 
> 时间：2012-10-14T15:44:19.840
> 
> 标签：c#, linq, datatable

嗨，我正在尝试`datatable`通过 Linq 比较两个。但我得到了这个例外：

> 特定演员表无效

请帮助我，因为我是 Linq 的新手。这是我正在使用的代码：

```
var matched1 = from table1 in dtAvailableStores.AsEnumerable()
               join table2 in dtControlStores.AsEnumerable() 
               on table1.Field<int>("STORE_NBR") 
               equals table2.Field<int>("STORE_NBR")
               select table1; 
```

这`STORE_NBR`是一个字符串值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:54:07.500

使用这段代码，您可以有一个相当不错的主意：

```
var qry1 = datatable1.AsEnumerable().Select(a => new { MobileNo = a["ID"].ToString() });
var qry2 = datatable2.AsEnumerable().Select(b => new { MobileNo = b["ID"].ToString() });

var exceptAB = qry1.Except(qry2);

DataTable dtMisMatch = (from a in datatable1.AsEnumerable() join ab in exceptAB on a["ID"].ToString() equals ab.MobileNo select a).CopyToDataTable(); 
```

参考：

1.  [使用 LINQ 查询比较两个数据表](http://www.codeproject.com/Tips/344792/Compare-two-datatable-using-LINQ-Query)
2.  [比较两个数据表在 C# 中的差异？](https://stackoverflow.com/questions/10984453/compare-two-datatables-for-differences-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T15:46:39.857

如果该字段实际上不是`int`.

# regex - 从Objective-C中的字符串中提取数字和运算符

> ID：12883791
> 
> 赞同：1
> 
> 时间：2012-10-14T15:44:19.680
> 
> 标签：regex, string, nsmutablearray, nsarray

我有这个字符串`(2.5+1)*5`

我想制作一个包含每个元素的 NSMutableArray： `[(, 2.5, +, 1, ), *, 5]`

这是我写的代码：

```
+ (NSMutableArray*) convertToList: (NSString *) exp {
    NSRegularExpression * reg = [NSRegularExpression regularExpressionWithPattern: @"(\\d+\\.\\d+)|(\\d+)|([+-/*///^])|([/(/)])" options:0 error:nil];
    NSArray *matches = [ reg matchesInString: exp
                                 options: 0
                                   range:NSMakeRange(0, [exp length])];
    return [matches mutableCopy];
}

int main (int argc, char *argv[]) {
    NSString * exp = @"(2+5)";
    NSMutableArray * array = [ExpressionTexting convertToList:exp];
    NSLog(@"%@", array);
} 
```

我得到这个输出：

```
(
"<NSExtendedRegularExpressionCheckingResult: 0x10010d2e0>{0, 1}{<NSRegularExpression: 0x10010abb0> (\\d+\\.\\d+)|(\\d+)|([+-/*///^])|([/(/)]) 0x0}",
"<NSExtendedRegularExpressionCheckingResult: 0x10010d3f0>{1, 1}{<NSRegularExpression: 0x10010abb0> (\\d+\\.\\d+)|(\\d+)|([+-/*///^])|([/(/)]) 0x0}",
"<NSExtendedRegularExpressionCheckingResult: 0x10010d470>{2, 1}{<NSRegularExpression: 0x10010abb0> (\\d+\\.\\d+)|(\\d+)|([+-/*///^])|([/(/)]) 0x0}",
"<NSExtendedRegularExpressionCheckingResult: 0x10010d4f0>{3, 1}{<NSRegularExpression: 0x10010abb0> (\\d+\\.\\d+)|(\\d+)|([+-/*///^])|([/(/)]) 0x0}",
"<NSExtendedRegularExpressionCheckingResult: 0x10010d570>{4, 1}{<NSRegularExpression: 0x10010abb0> (\\d+\\.\\d+)|(\\d+)|([+-/*///^])|([/(/)]) 0x0}"
) 
```

在Java中我得到了答案：

```
public static ArrayList<String> convertToList(String exp){
    String regex = "(\\d+\\.\\d+)|(\\d+)|([+-/*///^])|([/(/)])";
    Matcher m3 = Pattern.compile(regex).matcher(exp);
    ArrayList<String> list = new ArrayList<String>(exp.length());
    while (m3.find()) {
        list.add(m3.group());
    }
    return list;
} 
```

哪个有效，但我无法在 Objective-c 中翻译它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:01:35.187

你应该使用正则表达式模式

```
(\\d+\\.?\\d*|\\.\\d+|[^\\d.]) 
```

### Java代码：

```
String str = "(2.5+1)*5";
Pattern p = Pattern.compile("(\\d+\\.?\\d*|\\.\\d+|[^\\d.])");
Matcher m = p.matcher(str);
while (m.find()) {
    String match = m.group();
    System.out.println(match);
} 
```

### 输出：

```
(
2.5
+
1
)
*
5 
```

**[在此处](http://ideone.com/q07lD)**检查此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:15:44.133

也许你需要一个数学解析器。检查[DDMathParser](https://github.com/davedelong/DDMathParser)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T16:54:58.753

我找到了解决方案，错误是由于我真的不知道如何处理结果，返回的 NSArray 由 NSTextCheckingResult 组成，我必须使用它来提取数字和运算符。

```
+ (NSMutableArray*) convertToList: (NSString *) exp {
NSRegularExpression * reg = [NSRegularExpression regularExpressionWithPattern: @"(\\d+\\.\\d+)|(\\d+)|([+-/*///^])|([/(/)])" options:0 error:nil];
NSArray *matches = [ reg matchesInString: exp
                                 options: 0
                                   range:NSMakeRange(0, [exp length])];

NSMutableArray *mArray = [[NSMutableArray alloc] init];
for (NSTextCheckingResult *match in matches) {
    NSString* matchText = [exp substringWithRange:[match range]];
    [mArray addObject:matchText];
    //NSLog(@"%@", matchText);
}

return mArray;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T02:30:23.027

正如在另一个答案中提到的那样，[`DDMathParser`](https://github.com/davedelong/DDMathParser)可以很容易地做到这一点。看起来您并不关心实际术语的层次结构，因此您可以只使用生成的标记就可以逃脱。这很容易：

```
 NSError *error = nil;
    DDMathStringTokenizer *tokenizer = [[DDMathStringTokenizer alloc] initWithString:@"(2.5+1)*5" error:&error];
    NSArray *tokens = [tokenizer tokens];
    tokens = [tokens valueForKey:@"token"];
    NSLog(@"%@", tokens); 
```

`-tokens`on 方法返回一个对象`DDMathStringTokenizer`数组。`DDMathStringToken`这些对象具有`NSString`实际令牌的底层（通过`token`属性访问），因此您需要`valueForKey:`对数组进行调用以将其转换为字符串数组。但如果你这样做，那么你会得到这个记录：

```
(
    "(",
    "2.5",
    "+",
    1,
    ")",
    "*",
    5
) 
```

# mysql - Grails Shiro 插件创建只读表

> ID：12883807
> 
> 赞同：1
> 
> 时间：2012-10-14T15:45:25.120
> 
> 标签：mysql, grails, shiro

为什么 grails shiro 插件在 mysql 中为角色和权限创建只读表？我创建控制器和操作并将它们添加到 BootStrap 文件中注册角色的权限中。但是每次当我想在权限中添加新操作时，我必须删除表并通过重新运行应用程序重新创建它们。如何手动编辑权限表，或者我不能在 BootStrap for prod 中创建角色和权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:47:51.783

你确定这些表是只读的吗？您甚至无法在引导程序中写入它们...尝试修改它们`.save(failOnError:true)`并查看是否收到错误消息。如果您没有收到错误，请发布您尝试修改角色和权限的代码，我会帮助您解决这个问题......

# android - 从Android中的电话号码获取电子邮件地址

> ID：12883810
> 
> 赞同：1
> 
> 时间：2012-10-14T15:45:36.267
> 
> 标签：android, cursor, uri

我正在尝试查找某人的电子邮件地址，给定他们的电话号码（假设他们将其存储在联系人中）。

目前，如果我想要这个人的名字或其他东西，我已经很好了，只是在做：

```
Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(phoneNumber));
Cursor cur = getContentResolver().query(uri, null, null, null, null);
String name = cur.getString(cur.getColumnIndex(ContactsContract.PhoneLookup.DISPLAY_NAME); 
```

但是，无法通过电子邮件数据库使用电话号码进行搜索

```
Uri emailUri = Uri.withAppendedPath(ContactsContract.CommonDataKinds.Email.CONTENT_LOOKUP_URI,
            Uri.encode(phoneNumber));
Cursor cur = getContentResolver().query(emailUri, null, null, null, null);
//Returns nothing, unless someone has the email +441234567891@hotmail.com or something 
```

现在我可以使用 CONTENT_FILTER_URI，并搜索我刚刚找到的人的姓名...但是我可以得到 2 John Smiths... 必须有某种方法可以跨过 PhoneLookup 和电子邮件数据库？也许使用 LOOKUP_KEY 或其他什么？

# php - 强制转换为 int 而不是 mysql_real_escape_string 是否安全

> ID：12883811
> 
> 赞同：3
> 
> 时间：2012-10-14T15:45:37.407
> 
> 标签：php, mysql, mysql-real-escape-string

只是想知道，我的应用程序需要尽可能快，并且变量已经转换为 int，所以如果可以避免，我也不想转义字符串。

示例是：

```
$var1 = (int)$_POST['number1'] //User input;
mysql_query("INSERT INTO ... $var1 .."); 
```

在所有情况下都是安全的还是我也应该使用 mysql_real_escape_string `$var1`？

有时我也 md5() vars 而不是转义它们，但我想这没关系。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T15:47:27.967

是的，它在所有情况下都是安全的，尽管您可能还想检查是否`$_POST['number1']`是一个有效的整数，以避免通知。

[而且，即使你说]

> [我只是想知道安全性，不太担心首选的*[原文如此]*方法和编码标准。]

[我仍然建议您使用准备好的语句。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T15:48:23.563

是的，这将是安全的，但需要注意的是，任何不是有效整数的值都将被强制转换为`0`，这可能会导致副作用。

正如 minitech 所说，使用准备好的语句确实应该是要走的路，因为你再也不用担心这个了。

然而，更重要的是，性能在这里并不是真正的问题，也不值得考虑。无论您转义还是不转义字符串都不会影响您的应用程序的性能（至少如果它不是兆字节大的话）。过早的优化通常是浪费时间——这样的“优化”只会使代码更难阅读和理解，从长远来看，这更重要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T15:49:32.067

正如 minitech 所说，良好的做法是还要确保您检查它是一个整数。不过，使用准备好的语句确实会更安全，我最近接受了 PDO 并且不会回去。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T15:49:05.753

这是安全的，但请记住，任何字符串都将被强制转换为 0，而不是 null 或类似的东西。

# java - 将 JFormattedTextField 中的多个值分配给多个变量

> ID：12883814
> 
> 赞同：0
> 
> 时间：2012-10-14T15:45:48.727
> 
> 标签：java, swing, textfield, jformattedtextfield

如果我有`JFormattedTextField`这样的

```
MaskFormatter formatter = new MaskFormatter("#,#");
JFormattedTextField textField = new JFormattedTextField(formatter); 
```

如果我有变量

```
int x = 0;
int y = 0; 
```

如何将文本字段中的第一个数字存储到`x`，将第二个数字存储到`y`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:50:20.333

掩码不会改变内部值的存储方式，它只是告诉如何表示/输入它。

所以你仍然有一个`.getText()`以你选择的格式返回一个字符串。按照您认为合适的方式处理该字符串 ( `split()`, )。`StringTokenizer`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:57:31.260

假设第一个和第二个数字是逗号两边的数字`,`，`JFormattedTextField`你可以这样做：

```
String[] numbers = textField.getText().split(",");
int x = Integer.parseInt(numbers[0]);
int y = Integer.parseInt(numbers[1]); 
```

# java - PendingIntent 究竟何时被处置/移除？

> ID：12883821
> 
> 赞同：3
> 
> 时间：2012-10-14T15:46:23.273
> 
> 标签：java, android, android-intent, alarmmanager, android-pendingintent

我正在使用`PendingIntent`with`AlarmManager`和 a`BroadcastReceiver`在用户指定的时间显示提醒。我正在使用`NotificationManager`.

在设置通知之前，我希望按钮说**“设置提醒”**，在设置通知之后，我希望按钮说**“更改提醒”**。向用户显示通知后，按钮应再次显示**“设置提醒”**。

我正在创建`PendingIntent`具有相同意图、上下文和相同唯一 ID (myUniqueId) 的相同内容，以检查是否处于`PendingIntent`活动状态。

```
Intent intent = new Intent(context, ReminderReceiver.class);
boolean reminderActive = (PendingIntent.getBroadcast(context, myUniqueId, intent, PendingIntent.FLAG_NO_CREATE) != null); 
```

现在这工作并且按钮文本正确显示。但我发现，一旦显示通知，除非我明确检索`PendingIntent`并取消它，否则它**暂时不会**被删除。所以有一段时间，按钮仍然显示“更改提醒”。

那么假设除非我明确取消 PendingIntent 它仍然存储在内存中的某个位置以进行垃圾收集，这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:21:20.163

> 那么假设除非我明确取消 PendingIntent 它仍然存储在内存中的某个位置是正确的吗

是的。Android 缓存`PendingIntent`对象。AFAIK，他们会一直待着，直到进程终止。

# django - 在 Django 中，我如何将 http://localhost:8000/ 的请求发送到动态位置

> ID：12883830
> 
> 赞同：3
> 
> 时间：2012-10-14T15:47:20.047
> 
> 标签：django

我是 Django 的新手。我的问题很简单，但我无法从网上找到的教程中找到我需要什么，也无法从我在 django 上购买的一本书中弄清楚我需要什么。

我正在写一个网站来存放在线漫画。假设网址是：

```
http://localhost:8000/ 
```

我想要一个请求基本 url 去最近的漫画。如果有 13 部漫画，那么我希望将请求上述 url 的用户发送到：

```
http://localhost:8000/13 
```

同时，我希望输入的用户`http://localhost:8000/13`转到指定的 url。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:03:41.773

为此，您将需要两个 url 模式，它们将映射到两个视图。第一个 url 用于主页 ( `http://localhost:8000/`)，第二个 url 用于查看特定漫画 ( `http://localhost:8000/<comic_id>`)。然而，第一个 url 应该将用户重定向到最新的漫画，使用`HttpResponseRedirect`.

```
# assuming comic model similar to
class Comic(models.Model):
    created = models.DateTimeField(auto_now_add=True)
    # other fields...

# urlpatterns
url(r'^$', 'index', name='index'),
url(r'^(?P<comic_id>\d+)/$', 'comic', name='comic'),

# views
def index(request):
    latest_comic = Comic.objects.order_by('-created')[0]
    # or as suggested by Alasdair's comment
    # latest_comic = Comic.objects.latest('created')
    return HttpResponseRedirect(reverse('comic', kwargs={'comic_id':latest_comic.pk}))

def comic(request, comic_id):
    comic = get_object_or_404(Comic, pk=comic_id)
    # ... 
```

# c - C中tcp客户端/服务器中带有线程的字符串

> ID：12883836
> 
> 赞同：0
> 
> 时间：2012-10-14T15:48:16.377
> 
> 标签：c, multithreading, tcp, client-server

我正在尝试在 C 中开发一个应用程序来接收消息并在 TCP 中发送它。为此，我使用了 2 个线程：服务器线程用于监听，客户端线程用于发送。

这里的服务器和主要功能：

```
void dostuff(int sock)
{
  int n;
  char buffer[256];

  bzero(buffer,256);
  n = read(sock,buffer,255);

  if (n < 0) error("ERROR reading from socket");
  else {
    pthread_t t_tcp_client;
    pthread_create(&t_tcp_client, NULL, tcp_client, buffer);
  }

  n = write(sock,"Message received",18);

  if (n < 0) error("ERROR writing to socket");
}

static void *tcp_server(void *p_data)
{
  int sockfd, newsockfd, pid;
  socklen_t clilen;
  struct sockaddr_in serv_addr, cli_addr;

  sockfd = socket(AF_INET, SOCK_STREAM, 0);

  if (sockfd < 0) error("ERROR opening socket");

  bzero((char *) &serv_addr, sizeof(serv_addr));
  serv_addr.sin_family = AF_INET;
  serv_addr.sin_addr.s_addr = INADDR_ANY;
  serv_addr.sin_port = htons(TCP_PORT);

  if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) error("ERROR on binding");

  listen(sockfd,5);
  clilen = sizeof(cli_addr);

  while (1) {
    newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);

    if (newsockfd < 0) error("ERROR on accept");

    pid = fork();

    if (pid < 0) error("ERROR on fork");

    if (pid == 0) {
      close(sockfd);
      dostuff(newsockfd);
      exit(0);
    } else {
      close(newsockfd);
    }
  }
  close(sockfd);
  return 0;
}

int main (void)
{
  pthread_t t_tcp_server;
  pthread_create(&t_tcp_server, NULL, tcp_server, NULL);

  pthread_join(t_tcp_server, NULL);

  return 0;
} 
```

和客户端线程：

```
static void *tcp_client(void *p_data)
{
  if (p_data != NULL)
  {
    char const *message = p_data;

    printf("Message transmitted : %s\n", message);
  }

  return 0;
} 
```

问题是客户端线程没有收到好的字符，结果是：

发送的信息：???~?

我认为问题出在以下行： n = read(sock,buffer,255); 但我真的不明白为什么。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:19:46.653

`do_stuff`很可能在客户端线程完成工作之前退出。

客户端线程使用堆栈分配的内存，该内存在退出时已被释放`do_stuff`，并将被其他一些代码重用。

对此的解决方案是将堆分配的内存传递给客户端。如果是动态分配的，则后者需要在客户端完成工作后释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T17:06:31.373

```
static char buffer[256];

void dostuff(int sock)
{
   int n;

   bzero(buffer,256);
   n = read(sock,buffer,255);
   ...
} 
```

使用套接字时要小心，一次读取可能不会为您提供您等待的消息的全部内容。

在结构化消息的情况下，您定义的协议（您应该很好地定义它）首先必须给出消息标识符，并且您阅读直到收到 sizeof( theSpecificMessage )，theSpecificMessage 由标识符标识。

# android - 创建简单的 Android + GAE Hello world 项目

> ID：12883837
> 
> 赞同：0
> 
> 时间：2012-10-14T15:48:21.837
> 
> 标签：android, xml, google-app-engine, http-post

我一直在到处寻找关于与 Android 和 Google App Engine 相关的 hello world 应用程序的教程，我确实找到了一些，但它们都包含 Eclipse 中不再可用的选项“app engine connected android project”，我认为。

有人可以给我链接到一个很好的结合 Android 和 GAE 的 Hello World 教程吗？为什么删除了“app engine connected android project”选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:04:32.297

编辑（2013 年 9 月 18 日）：似乎现在可以在这里使用：[https ://developers.google.com/appengine/docs/java/endpoints/](https://developers.google.com/appengine/docs/java/endpoints/)

我也正在寻找一个教程。我会尽快更新这个答案。（编辑：我最接近的教程是[在](http://bradabrams.com/2011/05/google-io-session-overview-android-app-engine-a-developers-dream-combination/)Google I/O 2011 上介绍的。

该选项已被删除，因为显然，Google 正在寻求部署 Google Cloud Endpoints ( [http://endpoints-trusted-tester.appspot.com/](http://endpoints-trusted-tester.appspot.com/) ) 作为替代品，而旧选项使用 C2DM，该选项已被 Google 弃用云消息 ( [http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html) )。我从这里的其他一些答案中读到，谷歌希望稍后将其重新引入 Eclipse 插件中。谁知道那会是什么时候。

# python - 使用具有多个子类的基类时，ImportError 无法导入名称

> ID：12883839
> 
> 赞同：0
> 
> 时间：2012-10-14T15:48:43.413
> 
> 标签：python, selenium, webdriver

我需要有一个运行 setup/teardown 的基类，然后是继承的子类，以便允许所有测试运行，无论某些测试是否失败。当尝试让多个子类导入一个基类时，我看到第二个子类的导入错误。我有以下文件： `runtestcases.py` `testcase1.py` `testcase2.py`

这是runtestcases.py：

```
import unittest
import testcase1, testcase2

class ArithTestSuper (unittest.TestCase):

def setUp (self):
    print("Setting up ArithTest cases")

def tearDown (self):
    print("Cleaning up ArithTest cases")

def my_suite():

suite = unittest.TestSuite()

suite.addTest (testcase1.ArithTest())
suite.addTest (testcase2.ArithTestFail())

return suite

if __name__ == '__main__':
    runner = unittest.TextTestRunner()
    test_suite = my_suite()
    runner.run (test_suite) 
```

这是testcase1.py：

```
from runtestcases import ArithTestSuper

class ArithTest (ArithTestSuper):

def runTest (self):
    """ Test addition and succeed. """
    print("Running ArithTest")
    self.failUnless (1+1==2, 'one plus one fails!')
    self.failIf (1+1 != 2, 'one plus one fails again!')
    self.failUnlessEqual (1+1, 2, 'more trouble with one plus one!') 
```

这是testcase2.py：

```
from runtestcases import ArithTestSuper

class ArithTestFail (ArithTestSuper):

def runTest (self):
    """ Test addition and fail. """
    print("Running ArithTestFail")
    self.failUnless (1+1==2, 'one plus one fails!')
    self.failIf (1+1 != 2, 'one plus one fails again!')
    self.failUnlessEqual (1+1, 2, 'more trouble with one plus one!')
    self.failIfEqual (1+1, 2, 'expected failure here')
    self.failIfEqual (1+1, 2, 'second failure')  

Compilation fails on testcase2.py with:
ImportError: cannot import name ArithTestSuper 
```

如果我只运行 testcase1 它可以工作 - 同样，只运行 testcase2 也可以。如果我尝试这两种错误都会发生。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:05:45.903

这是循环导入的问题。将您的基类移出您运行的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:33:45.870

要回答您的第二个问题（[https://stackoverflow.com/a/12885312/1745627](https://stackoverflow.com/a/12885312/1745627%20/)）：避免覆盖该`runTest`方法；它将由 unittest 框架调用，并且基本上完成了运行测试用例的工作。使用命名约定实现您自己的测试方法，例如`test_xxx`（unittest 查找以执行开头的方法`test`）。

# java - 泛型乘以二 - 二叉树方法

> ID：12883840
> 
> 赞同：0
> 
> 时间：2012-10-14T15:48:49.183
> 
> 标签：java, generics, casting, tree, integer

我正在编写一种将树中每个节点的数据大小加倍的方法。我想我已经编写了算法来编写它，但是我无法弄清楚如何将泛型类型乘以 2。

所以基本上我想获取一个 T 类型的数据并将其转换为整数，将其乘以 2，然后将其存储为 T 类型。我尝试了一些选项，但没有一个有效。关于我应该如何做到这一点的任何帮助都会有所帮助。如果您需要任何其他信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:55:18.073

由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，您不能直接执行此操作。一种方法是为“知道”如何加倍自身的对象定义一个通用接口：

```
public interface Doubler<T> {
    T doubled(T arg);
} 
```

然后你可以让每个节点（知道如何加倍自己）实现`Doubler`接口。

还有其他方法（工厂方法、工厂对象、传递`Class<T>`实例等）可能同样有效（或更好）。但是你不能做的一件事是在只知道泛型类型的代码中创建一个泛型类型的实例，而不是别的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:02:17.700

当你声明你的泛型类/树实例/泛型方法时，不要让泛型类型参数 T 完全不受约束，而是让它成为一个数字（Long 或 Double，取决于你是否需要处理整数或浮点数：

**代替：**

```
public class DoubleTree<T> {
    private TreeSet<T> myTree;
    public void doubleTree() {
         // ...
         for (T treeElement: myTree) {
               // no way to double element because 
               // "minimum guaranteed base type of T" is Object!!
         } 
    }
} 
```

**在第一行尝试`T extends Long`作为泛型类型参数：**

```
public class DoubleTree<T extends Long> {
    private TreeSet<T> myTree;
    public void doubleTree() {
         // ...
         for (T treeElement: myTree) {
               // Element has the Long interface - guaranteed
               T doubleIt = 2 * treeElement;

               // Note - you should really prevent numerical overflow in the above
               // e.g. if (treeElement < Long.MAX_VALUE / 2) {
               //            T doubleIt = 2 * treeElement; 
               //      } else { // Overflow error }
         } 
    }
} 
```

为了更通用，您可以使用“数字”而不是“长”。但是 Number 是一种抽象类型，它不直接支持常量乘法！您可以通过以下方式在运行时检查实际类来解决此问题`instanceof`：

```
if (treeElement instanceof Long) {
      Long doubleIt = 2 * treeElement.longValue();
} else if (treeElement instanceof Integer) {
      Integer doubleIt = 2 * treeElement.intValue();
} else if (treeElement isntanceof Float) {
      Float doubleIt = 2.0 * treeElement.floatValue();
} // ..... etc 
```

# android - 我想拖动多个图像并将它们放在 android 的特定区域中

> ID：12883848
> 
> 赞同：0
> 
> 时间：2012-10-14T15:49:31.880
> 
> 标签：android, drag-and-drop

我正在制作一个儿童游戏，上面有字母，下面有随机图像。当我将图像（如苹果）拖到字母“a”时，它应该会弹出一个说它是正确的。谁能指导我如何实现这个想法？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:08:38.397

我想你要问的是：

1.  布局内的可拖动视图
2.  碰撞算法
3.  QuickAction 对话框或不可见对话框（用于弹出窗口）

1.

```
public void setDraggable(final View view)
{
    final LayoutParams lp1 ;
    lp1 = (LayoutParams) view.getLayoutParams();
    final int width = getWindowManager().getDefaultDisplay().getWidth();
    final int height = getWindowManager().getDefaultDisplay().getHeight();
    view.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            view.bringToFront();
            switch(event.getAction())
            {
            case(MotionEvent.ACTION_DOWN):
            {
                break;
            }
            case(MotionEvent.ACTION_MOVE):
            {
                if((event.getRawX()+(view.getWidth()/2))<width&&((event.getRawX()+(view.getWidth()/2)) > view.getWidth()))
                    lp1.leftMargin = (int) event.getRawX() - (view.getWidth()/2);
                if((event.getRawY()-view.getHeight())<height&&(event.getRawY()-view.getHeight())>0)
                    lp1.topMargin = (int) event.getRawY() - view.getHeight();           
                view.setLayoutParams(lp1);
                break;
            }
            case(MotionEvent.ACTION_UP):
            {
            }

            }
            return true;
        }
    });     
} 
```

基本上它所做的就是改变视图的边距，使其看起来像在移动。在此处使用相对布局

2.) 我在这里给你一个提示。应用程序内的所有视图/图像都是矩形的，因此只需获取视图的所有边（以像素为单位），然后使用 if-else 语句。

3.) [http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/) 或者你可以简单地使用 setVisibility

# matlab - 为图像采集创建一个循环缓冲区

> ID：12883852
> 
> 赞同：1
> 
> 时间：2012-10-14T15:50:08.430
> 
> 标签：matlab

我是使用 matlab 编程并尝试执行以下操作的新手：

我使用 getdata 函数不断地用相机捕捉图像（尺寸 1024x1024）以获得实时图像。要进行测量，我想使用循环缓冲区仅存储 100 张图像——更准确地说，我正在考虑存储 100 张图像并在获取新数据时擦除最旧的图像，并对最后 100 张图像进行测量。

希望我的担心是可以理解的...

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:03:51.680

MathWorks 的一位工作人员在此回答了这个问题：[为连续测量创建一个缓冲矩阵](https://stackoverflow.com/questions/821637/create-a-buffer-matrix-for-continuous-measurements)。（他还制作了一段视频：http: [//blogs.mathworks.com/videos/2009/05/08/implementing-a-simple-circular-buffer/](http://blogs.mathworks.com/videos/2009/05/08/implementing-a-simple-circular-buffer/)

编码 ：

```
buffSize = 10;
circBuff = nan(1,buffSize);
for newest = 1:1000;
   circBuff = [newest circBuff(1:end-1)]
end 
```

检查 gnovice 所做的更新，该更新将循环缓冲区应用于图像处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:58:40.403

您所说的“循环缓冲区”被称为*队列*或*FIFO*（先进先出）。通常这将存储在*链表*数据结构中，其中每个对象（在您的情况下为矩阵）都指向下一个对象。然而，在 Matlab 中，没有内置的链表结构，但是在操作它们时，Matlab 数组（向量/矩阵）非常灵活和高效。

因此，您可以简单地将每个图像存储为长度为 100 的数组中的矩阵，从而为您提供一个尺寸为 100x1024x1024 的 3 维矩阵。然后，当您获得新数据时，您只需从数组中删除最后一个矩阵并在数组的开头插入一个新矩阵。希望这对您来说足够快。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T16:00:19.173

愿你能创建一个由 100 个 1024x1024 矩阵组成的数组。并参考以下链接以保持读写位置。 [循环缓冲区的逻辑](http://groundplayer.blogspot.com/2012/07/circular-buffer.html)

# iphone - 玩游戏后重置数组？

> ID：12883853
> 
> 赞同：1
> 
> 时间：2012-10-14T15:50:10.357
> 
> 标签：iphone, ios, xcode, arrays, cocoa-touch

我用 xcode 在 iOS 中做了一个测验，我现在有一个从数组中生成 20 个随机答案的测验，当按下按钮检查答案是否正确时，它控制标签的文本。答案也是随机生成的，我确保没有相同文本的多个答案。我的问题是，当提出问题时，我将数组中对象的文本更改为“已删除”；但是当我完成测验后再次按下开始时，我的数组有 20 个对象，字符串为“remove”；我的问题是：如何将数组重置为正常对象？这是我的完整代码，请忽略注释，但这是一种垃圾，因为我是 ios 编程新手：

```
//
//  ViewController.m
//  Mundo Grafia
//
//  Created by Axel Lambregts on 2/10/12.
//  Copyright (c) 2012 AxelNiels. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()

@end
@implementation ViewController

// variabelen aanmaken
NSInteger intScore;
NSInteger intRandomMonument;
NSInteger intRandomAnswerPosition;
NSInteger intRandomAnswerA;
NSInteger intRandomAnswerB;
NSInteger intRandomAnswerC;
NSInteger intRandomAnswerD;
NSInteger intArrayEuropeLenght;
NSInteger intAmountOfQuestionsAsked;
NSString *scoreSpatie;
NSString *arrEurope[][2] =

    {

        {@"Eifel.jpg",@"Paris"},
        {@"NotreDame.jpg",@"Paris"},
        {@"ArcDeTriompheParis.jpg",@"Paris"},

        {@"AtomuimBrussels.jpg",@"Brussels"},
        {@"MannekePis.jpg",@"Brussels"},

        {@"Colosseum.jpg",@"Rome"},
        {@"TreviFountainRome.jpg",@"Rome"},

        {@"SagradaFamilia.jpg",@"Barcelona"},
        {@"SpanishSchoolMadrid.jpg",@"Madrid"},

        {@"KremlinMoskou.jpg",@"Moskou"},

        {@"MermaidKopenhagen.jpg",@"Copenhagen"},

        {@"MonteCarloMonaco.jpg",@"Monaco"},

        {@"AcropolisAthens.jpg",@"Athens"},

        {@"ParlementBudapest.jpg",@"Budapest"},

        {@"BuildingReykjavik.jpg",@"Reykjavik"},

        {@"StatueKiev.jpg",@"Kiev"},

        {@"PortOfEuropeLissabon.jpg",@"Lisbon"},

        {@"ViewSanMarino.jpg",@"San Marino"},

        {@"BridgesPrague.jpg",@"Prague"},

        {@"MoskeeAnkara.jpg",@"Ankara"},

        {@"TowerBridgeLondon.jpg",@"London"},
        {@"BigBenLondon.jpg",@"London"},
        {@"LondonEyeLondon.jpg",@"London"},

        {@"BrandenburgerTor.jpg",@"Berlin"},
        {@"ReichstagBerlin.jpg",@"Berlin"},

        {nil,nil}

    };

/*
NSArray *arrEurope = @[
@[@"Eifel.jpg",@"Paris"],
@[@"NotreDame.jpg",@"Paris"],
@[@"ArcDeTriompheParis.jpg",@"Paris"],
@[@"Eifel.jpg",@"Paris"],
@[@"NotreDame.jpg",@"Paris"],
@[@"ArcDeTriompheParis.jpg",@"Paris"],

@[@"AtomuimBrussels.jpg",@"Brussels"],
@[@"MannekePis.jpg",@"Brussels"],

@[@"Colosseum.jpg",@"Rome"],
@[@"TreviFountainRome.jpg",@"Rome"],

@[@"SagradaFamilia.jpg",@"Barcelona"],
@[@"SpanishSchoolMadrid.jpg",@"Madrid"],

@[@"KremlinMoskou.jpg",@"Moskou"],

@[@"MermaidKopenhagen.jpg",@"Copenhagen"],

@[@"MonteCarloMonaco.jpg",@"Monaco"],

@[@"AcropolisAthens.jpg",@"Athens"],

@[@"ParlementBudapest.jpg",@"Budapest"],

@[@"BuildingReykjavik.jpg",@"Reykjavik"],

@[@"StatueKiev.jpg",@"Kiev"],

@[@"PortOfEuropeLissabon.jpg",@"Lisbon"],

@[@"ViewSanMarino.jpg",@"San Marino"],

@[@"BridgesPrague.jpg",@"Prague"],

@[@"MoskeeAnkara.jpg",@"Ankara"],

@[@"TowerBridgeLondon.jpg",@"London"],
@[@"BigBenLondon.jpg",@"London"],
@[@"LondonEyeLondon.jpg",@"London"],

@[@"BrandenburgerTor.jpg",@"Berlin"],
@[@"ReichstagBerlin.jpg",@"Berlin"]

];

*/

//methode'start' wanneer er op de start-knop wordt gedrukt
-(IBAction)start{

    [self NewQuestionEurope];
    intAmountOfQuestionsAsked = 0;
    //reset and show score
    intScore = 0;
    score.text = [NSString stringWithFormat:@"%d", intScore];

    //make buttons and labels visible
    Start.hidden = YES;
    question.hidden = NO;
    score.hidden = NO;
    scoretext.hidden = NO;
    imageContainer.hidden = NO;

    answerA.hidden = NO;
    answerB.hidden = NO;
    answerC.hidden = NO;
    answerD.hidden = NO;

    answerA.textColor = [UIColor greenColor];
    answerB.textColor = [UIColor greenColor];
    answerC.textColor = [UIColor greenColor];
    answerD.textColor = [UIColor greenColor];

    clickButtonA.hidden = NO;
    clickButtonB.hidden = NO;
    clickButtonC.hidden = NO;
    clickButtonD.hidden = NO;

    GoodFalse.hidden = NO;
    GoodFalse.text=@"Press a button to answer";
    GoodFalse.textColor = [UIColor greenColor];
   question.text = @"Where is this picture taken?";

}//einde start

-(IBAction)Reset{

score.text= @"gelukt";

}

-(IBAction)NewQuestionEurope{

  if(intAmountOfQuestionsAsked == 19){

      question.text = [@"Uw score is: "stringByAppendingString: [NSString stringWithFormat:@"%d", intScore]];

      Start.hidden = NO;
      question.hidden = NO;
      score.hidden = YES;
      scoretext.hidden = YES;
      imageContainer.hidden = YES;

      answerA.hidden = YES;
      answerB.hidden = YES;
      answerC.hidden = YES;
      answerD.hidden = YES;

      clickButtonA.hidden = YES;
      clickButtonB.hidden = YES;
      clickButtonC.hidden = YES;
      clickButtonD.hidden = YES;
      GoodFalse.hidden = YES;

      Start.titleLabel.text = @"END";

  }

    else{

    intAmountOfQuestionsAsked ++;

    //Deze lus geeft aan intArrayEuropeLenght de waarde van hoeveel rijen de array bevat//
    intArrayEuropeLenght = 0;

    while (arrEurope[intArrayEuropeLenght][0] != NULL)
    {
        intArrayEuropeLenght++;
    }

   //score.text = [NSString stringWithFormat:@"%d", intScore];

    scoreSpatie = [
                             [NSString stringWithFormat:@"%d", intScore]
                             stringByAppendingString:@"/"];
    score.text = [
                  scoreSpatie
                  stringByAppendingString:[NSString stringWithFormat:@"%d", intAmountOfQuestionsAsked]
                  ];

  // Randoms genereren voor: 4 random antwoorden; 1 random afbeelding; een random positie om het juiste antwoord in te plaatsen
    intRandomMonument = arc4random()%intArrayEuropeLenght;            
    intRandomAnswerA = arc4random()%intArrayEuropeLenght;
    intRandomAnswerB = arc4random()%intArrayEuropeLenght;
    intRandomAnswerC = arc4random()%intArrayEuropeLenght;
    intRandomAnswerD = arc4random()%intArrayEuropeLenght;
    intRandomAnswerPosition = arc4random()%4;

    while(arrEurope[intRandomMonument][0] == @"removed"){

        intRandomMonument = arc4random()%intArrayEuropeLenght; 

    }

  //Random antwoorden maken
    answerA.text = @"";
    answerB.text = @"";
    answerC.text = @"";
    answerD.text = @"";

    if(answerA.text = @""){
        answerA.text = arrEurope[intRandomAnswerA][1];
    }

    if(answerB.text = @""){
        answerB.text = arrEurope[intRandomAnswerB][1];
    }

    if(answerC.text = @""){
        answerC.text = arrEurope[intRandomAnswerC][1];
    }

    if(answerD.text = @""){
        answerD.text = arrEurope[intRandomAnswerD][1];
    }

    switch(intRandomAnswerPosition)
    {
        case 0: answerA.text = arrEurope[intRandomMonument][1];
            break;
        case 1: answerB.text = arrEurope[intRandomMonument][1];
            break;
        case 2: answerC.text = arrEurope[intRandomMonument][1];
            break;
        case 3: answerD.text = arrEurope[intRandomMonument][1];
    };

    //als er antwoorden hetzelfde zijn, voor de gelijke een random blijven maken tot ze niet hetzelfde zijn
    if(
       [answerA.text isEqualToString: answerB.text]||
       [answerA.text isEqualToString: answerC.text]||
       [answerA.text isEqualToString: answerD.text]
       ){

        answerA.text = arrEurope[arc4random()%intArrayEuropeLenght][1];

    };

    if(
       [answerB.text isEqualToString: answerA.text]||
       [answerB.text isEqualToString: answerC.text]||
       [answerB.text isEqualToString: answerD.text]
       ){

        answerB.text = arrEurope[arc4random()%intArrayEuropeLenght][1];

    };

    if(
       [answerC.text isEqualToString: answerA.text]||
       [answerC.text isEqualToString: answerB.text]||
       [answerC.text isEqualToString: answerD.text]
       ){

        answerC.text = arrEurope[arc4random()%intArrayEuropeLenght][1];

    };

    if(
       [answerD.text isEqualToString: answerA.text]||
       [answerD.text isEqualToString: answerB.text]||
       [answerD.text isEqualToString: answerC.text]
       ){

        answerD.text = arrEurope[arc4random()%intArrayEuropeLenght][1];

    };

    //Laat de afbeelding zien van het gekozen monument (via random gekozen)
    imageContainer.image = [UIImage imageNamed: arrEurope[intRandomMonument][0]];

  }  

}

//hier onder zit ergens een fout want hij geeft precies random juist en fout :)
//kan zijn dat het opgelost is vanaf we niet 2x dezelfde vragen hebben maar ik denk het niet.

//press buttonA
-(IBAction)AnswerA {

    if([answerA.text isEqualToString: arrEurope[intRandomMonument][1]]){

        GoodFalse.text = @"Correct!";
        GoodFalse.textColor = [UIColor greenColor];
        intScore ++;

    }else {

        GoodFalse.text=@"Wrong!";
        GoodFalse.textColor = [UIColor redColor];

        }

    arrEurope[intRandomMonument][0] = @"removed";

    [self NewQuestionEurope];

}

//press buttonB
-(IBAction)AnswerB {

    if([answerB.text isEqualToString: arrEurope[intRandomMonument][1]]){

        GoodFalse.text = @"Correct!";
        GoodFalse.textColor = [UIColor greenColor];
        intScore ++;

    }else {

        GoodFalse.text=@"Wrong!";
        GoodFalse.textColor = [UIColor redColor];
    }

    arrEurope[intRandomMonument][0] = @"removed";
[self NewQuestionEurope];
}

//press buttonC (works)
-(IBAction)AnswerC {

    if([answerC.text isEqualToString: arrEurope[intRandomMonument][1]]){

        GoodFalse.text = @"Correct!";
        GoodFalse.textColor = [UIColor greenColor];
        intScore ++;

    }else {

        GoodFalse.text=@"Wrong!";
        GoodFalse.textColor = [UIColor redColor];
    }

arrEurope[intRandomMonument][0] = @"removed";
    [self NewQuestionEurope];
}

//press buttonD
-(IBAction)AnswerD {

    if([answerD.text isEqualToString: arrEurope[intRandomMonument][1]]){

        GoodFalse.text = @"Correct";
        GoodFalse.textColor = [UIColor greenColor];
        intScore ++;

    }else {

        GoodFalse.text=@"Wrong!";
        GoodFalse.textColor = [UIColor redColor];
    }
   arrEurope[intRandomMonument][0] = @"removed";
    [self NewQuestionEurope];
}

//hier onder niets wijzigen

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:58:10.640

我看到 2 个选项：

你再次调用初始化行......

```
String *arrEurope[][2] =

{

    {@"Eifel.jpg",@"Paris"},
    {@"NotreDame.jpg",@"Paris"},... 
```

或者您在数组中添加第三行并将“已删除”（我称之为“已使用”）参数放在那里。在最后一种情况下，您可以再次遍历您的数组并将“已删除”放回“活动”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:00:31.447

在游戏开始时复制 arrEurope 并在游戏重新启动时恢复到它，或者使用其他数组将问题标记为已删除。我个人会尝试使用选项2。

# objective-c - UIImage 上的 dsp

> ID：12883855
> 
> 赞同：-3
> 
> 时间：2012-10-14T15:50:27.780
> 
> 标签：objective-c, ios

> **可能重复：**
> [如何从 UIImage (Cocoa Touch) 或 CGImage (Core Graphics) 获取像素数据？](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)

假设我有一个`UIImage`我想获得的 rgb 矩阵，以便对其进行一些处理，而不是更改它，只需获取`UIImage`数据，以便我可以在其上使用我的 C 算法。您可能知道，所有的数学运算都是在图像 rgb 矩阵上完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T16:07:27.837

基本过程是使用 创建位图上下文`CGBitmapContextCreate`，然后将图像绘制到该上下文中并使用 获取内部数据`CGBitmapContextGetData`。这是一个例子：

```
UIImage *image = [UIImage imageNamed:@"MyImage.png"];

//Create the bitmap context:
CGImageRef cgImage = [image CGImage];
size_t width = CGImageGetWidth(cgImage);
size_t height = CGImageGetHeight(cgImage);
size_t bitsPerComponent = 8;
size_t bytesPerRow = width * 4;
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 
CGContextRef context = CGBitmapContextCreate(NULL, width, height, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast);
//Draw your image into the context:
CGContextDrawImage(context, CGRectMake(0, 0, width, height), cgImage);
//Get the raw image data:
unsigned char *data = CGBitmapContextGetData(context);

//Example how to access pixel values:
size_t x = 0;
size_t y = 0;
size_t i = y * bytesPerRow + x * 4;
unsigned char redValue = data[i];
unsigned char greenValue = data[i + 1];
unsigned char blueValue = data[i + 2];
unsigned char alphaValue = data[i + 3];
NSLog(@"RGBA at (%i, %i): %i, %i, %i, %i", x, y, redValue, greenValue, blueValue, alphaValue);

//Clean up:
CGColorSpaceRelease(colorSpace);
CGContextRelease(context);
//At this point, your data pointer becomes invalid, you would have to allocate
//your own buffer instead of passing NULL to avoid this. 
```

# css - 与 Chrome 相比，我的网页在 IE9 中被压扁了。但是其他网站在两者中看起来都一样

> ID：12883857
> 
> 赞同：0
> 
> 时间：2012-10-14T15:50:46.063
> 
> 标签：css, webpage

> **可能重复：**
> [IE9 Float with Overflow:Hidden 和 Table Width 100% 无法正确显示](https://stackoverflow.com/questions/10305631/ie9-float-with-overflowhidden-and-table-width-100-not-displaying-properly)

与 Chrome 相比，我正在设计的网页在 IE9 中被压扁了。这不仅仅是字体，它是页面的宽度和一切。布局是一样的。我查看了其他几个网站，它们在两种浏览器中看起来都一样。因此，我认为这不是浏览器设置问题。两种浏览器都设置为 100% 缩放。我在页面的 CSS 中指定宽度和字体大小。而且，当我检查浏览器中的 Inspect 元素时，实际上，它们都告诉我它是 Times New Roman 15 像素，宽度是 900 像素。但是这对两者都不是真的。我在本地主机上运行。

我该如何解决这个问题，以便我知道我在设计什么？

编辑：

在标题中（现在）：

```
<!DOCTYPE html>
    <html>
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

CSS：

```
 body{font-family:"Times New Roman";font-size:15px} 
.container{width: 900px; height:100%; margin-left:auto; margin-right:auto;  overflow: hidden; min-height: 700px;}
.header{padding:30px;}
.naviagte{}
.left_column{float:left; width:100px; padding-bottom: 100000px; margin-bottom: -100000px; }
.main_body{float:left; width:700px; min-height: 700px; padding-bottom: 100000px; margin-bottom: -100000px;}
.right_column{float:left; background:green;width:100px; padding-bottom: 100000px; margin-bottom: -100000px;}
.footer{}
.clear{clear:both} 
```

HTML：

```
<div class = "container">
    <div class = "header">My website and stuff</div>
    <div class = "navigate">
      stuff here
    </div>
    <div class = "left_column">&nbsp;</div>
    <div class = "main_body">
       stuff here
    </div>
    <div class = "right_column">&nbsp;</div>
    <div class = "clear"></div>
    <div class = "footer">&nbsp;</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:52:21.537

这通常是由于标题错误。试试这个：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

请注意这**两个**设置：第二个设置并不总是需要，但对于某些边缘情况（例如浮动行为），它会使 IE 像其他浏览器一样工作。

**编辑 ：**

不要使用像 100000px 这样的值来填充或边距！这可能会引发整数溢出错误。你的问题很可能在这里。

# java - 如何在java类中访问WEB-INF文件夹下的文件

> ID：12883861
> 
> 赞同：19
> 
> 时间：2012-10-14T15:51:35.410
> 
> 标签：java, jakarta-ee

我在 Web 应用程序中有一个普通的 java 类，并且想读取文件`WEB-INF`夹下的配置文件。`WEB-INF/classes`如果文件位于类路径（文件夹）中，我知道访问文件的方式。由于`WEB-INF/classes`文件夹用于`.class`文件，因此我只想将配置文件保留在`WEB-INF`文件夹下。

谁能告诉我如何从我的 java 类中访问它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-14T16:26:43.830

[ServletContext.getResourceAsStream()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)将从相对于 WAR 文件根的给定路径加载文件。就像是：

```
ServletContext ctx;
InputStream configStream = ctx.getResourceAsStream("/WEB-INF/config.properties"); 
```

这里的主要问题是您需要访问 servlet 上下文才能执行此操作。您在 servlet 或过滤器中拥有它，但在应用程序中更靠后的非 Web 组件中却没有。你有几个选择：

*   通过应用程序范围的变量、注入或其他方式，使 servlet 上下文从 Web 层可用于服务层
*   将资源加载代码放在 web 层，并将其暴露给服务层
*   在 web 层加载配置，并将其传递给服务层

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T15:56:19.823

`getRealPath()`您可以使用方法获取 servlet 的绝对路径，`ServletContext`然后附加`WEB-INF`到您获得的路径。我认为这是非常基本的，可能还有其他一些答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T12:02:22.140

`hey you all care for context related file loading like application context , web.xml ,config and property file`

以下是如何加载任何类型的文件下的java文件，`WEB-INF`但它存储在另一个结构上，如`reportFile`您的文件或子文件夹的子文件夹`report01`-

`fullpath is = /WEB-INF/reportFile/report01/report.xml`，我已经尝试了很多可能性来加载和读取这个 xml 文件......以上都不适合我，但是，这是未来使用的技巧......

`In Action or inservice class you know interface implementation class`不`imports`，这也是好的部分。

# 声明你的文件对象

```
File myClass = new File(getClass().getProtectionDomain().getCodeSource().getLocation().getFile());
System.out.println("Finding calss path first then remove classes from the path "    + myClass.getCanonicalPath().replaceFirst("classes", "")+"reportFIle/report01/reports.xml") 
```

# 2.通过从上面删除`classes`并添加您的特定路径来加载路径

```
File f = new File(myClass.getCanonicalPath().replaceFirst("classes", "")+"reportFile/report01/reports.xml") 
```

# 然后

你甚至可以使用 xml 解析器解析它或做任何事情

```
document = docBuilder.parse(new File(myClass.getCanonicalPath().replaceFirst("classes", "")+"reportFile/report01/reports.xml")); 
```

干杯！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-10T11:33:59.397

“new FIleInputStream(Utility.class.getClassLoader().getResource(keyFileName).getPath())”对我有用。

这里“Utility”是我的代码调用这一行的类名，“keyFileName”是我需要打开的文件

# javascript - Backbone.js 不使用 .each() 迭代集合

> ID：12883863
> 
> 赞同：1
> 
> 时间：2012-10-14T15:51:47.497
> 
> 标签：javascript, jquery, html, backbone.js, underscore.js

我一直在做一些 Backbone.js 编码，并且遇到了一个特殊的问题，我在迭代集合的内容时遇到了麻烦。由于某种原因，函数 in`Tasker_TodoList.each(this.addOne, this);`中的行没有正确执行，抛出错误：`addAll``AppView``Uncaught TypeError: undefined is not a function`

**LINK:** [RUNNING APP WITH ERROR](http://sharepress.atwebpages.com/temp/) -> 在输入框中输入内容，按“+”按钮在控制台中查看错误。

有问题的代码是：

```
$(function() {
    var Todo = Backbone.Model.extend({
    defaults: {
        title: "Some Title...",
        status: 0 //not completed
    }
    });

    var TodoList = Backbone.Collection.extend({
        model: Todo,
        localStorage: new Store('tasker')
    });

    var Tasker_TodoList = new TodoList();

    var TodoView = Backbone.View.extend({
        tagName: 'li',

        template: _.template($('#todoTemplate').html()),

        events: {
            'click .delbtn': 'delTodo'
        },

        initialize: function(){
            console.log("a new todo initialized");
            //this.model.on('change', this.render, this);
        },

        render: function(){
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        },

        delTodo: function(){
            console.log("deleted todo");
        }
    });

    var AppView = Backbone.View.extend({
        el: 'body',

        events: {
            'click #addBtn': 'createOnClick'
        },

        initialize: function(){
            Tasker_TodoList.fetch();
            Tasker_TodoList.on('add', this.addAll);
            console.log(Tasker_TodoList);
        },

        addAll: function(){
            $('#tasksList').html('');
            console.log("boooooooma");
            Tasker_TodoList.each(this.addOne, this);
        },

        addOne: function(todo){
            console.log(todo);
        },

        createOnClick: function(){
            Tasker_TodoList.create();
        }

    });

    var Tasker = new AppView();
}); 
```

有人可以帮我找出我做错了什么吗？感谢大家的帮助 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:58:15.420

从这里更改 AppView 上的初始化函数：

```
Tasker_TodoList.on('add', this.addAll); 
```

对此：

```
Tasker_TodoList.on('add', this.addAll,this); 
```

# c++ - C ++中具有多重继承的奇怪多态行为？

> ID：12883868
> 
> 赞同：3
> 
> 时间：2012-10-14T15:52:13.850
> 
> 标签：c++, polymorphism, sdl, multiple-inheritance

因此，我正在使用 SDL 编写一个小型 Pong 游戏克隆，并且我有以下设置。

有一个`SlimGame`从 FSM 类和事件处理程序类继承的通用游戏类：

```
// DEFINITION
class SlimGame : public SlimFSM, public SlimEventHandler {
protected:
  bool    running;        // indicates if the game is running

public:
  bool isRunning() { return this->running; }
  void setRunning(bool r) { this->running = r; }

  void run();                         // encapsulates the game loop
};

// IMPLEMENTATION
void SlimGame::run() {
  SDL_Event event;

  this->setRunning(true);

  while(this->isRunning()) {
      while(SDL_PollEvent(&event)) {
          this->handleEvent(&event);
          std::cout << "MAIN LOOP Running: " << this->isRunning(); << endl;
      }

      // ...
  }
} 
```

FSM 类与奇怪的行为无关，但事件处理程序类如下所示：

```
// DEFINITION
class SlimEventHandler {
public:
  SlimEventHandler() { }
  virtual ~SlimEventHandler() { }

  void handleEvent(SDL_Event *event);

  virtual void onExit();
};

// IMPLEMENTATION
void SlimEventHandler::handleEvent(SDL_Event *event) {
  switch(event->type) {
    case SDL_QUIT:
      this->onExit();
      break;
  }
}

void SlimEventHandler::onExit() {
  std::cout << "PARENT onExit!" << std::endl;
} 
```

然后我的`PongGame`类本身继承自`SlimGame`（因此间接继承自`SlimFSM`and `SlimEventHandler`）：

```
// DEFINITION
class PongGame : public SlimGame {
public:
  PongGame();
  ~PongGame();

  void onExit();
};

// IMPLEMENTATION
void PongGame::onExit() {
  this->setRunning(false);

  std::cout << "CHILD onExit!" << std::endl;
} 
```

所以通过这个设置，我像这样运行我的游戏，它很好地启动了：

```
int main(int argc, char **argv) {
  PongGame game;

  // setup

  game.run();

  // tear down

  return 0;
} 
```

然而，事件处理并没有按照它应该的方式工作。如果我单击窗口关闭按钮，`SDL_QUIT`则会触发事件并`handleEvent`调用该方法。这很好，但方法本身调用`onExit`它自己，而不是`PongGame`类的继承方法，所以我看到：

```
PARENT onExit! 
```

在控制台而不是

```
CHILD onExit! 
```

不应该调用中的派生方法`PongGame`，而不是调用中的虚拟空实现`SlimEventHandler`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:14:54.150

您应该将您的 run() 方法声明为虚拟，以强制将您的对象指针解释为 PongGame 对象，因为目前它不是。一些编译器也可能会警告您重写 run()。在这种情况下，run() 的 PongGame 实现可以是一个简单的代码重复，在大多数情况下是无害的。

```
void PongGame::run() {
    SlimGame::run();
} 
```

# c# - 在 c# mvc 中对单选按钮进行分组

> ID：12883869
> 
> 赞同：2
> 
> 时间：2012-10-14T15:52:15.267
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个显示菜单的表单。每个菜单都有一个部分和选项如下：

```
Starters

Prawn Cocktail 
Soup

Mains

Beef
Lamb 
```

我正在循环浏览该部分的菜单部分和菜单选项，对于每个菜单选项我想要一个单选按钮并将它们按部分组合在一起，以便每个部分只能选择一个菜单选项。默认情况下，将选择顶部选择。这是我到目前为止所拥有的

在模型中

```
public List<MenuCourses> courses {get; set;}
public List<MenuOptions> options {get;set;} 
```

并且在视图中

```
@for ( int i = 0; i < Model.MenuCourses.Count(); i++ ){

      @Html.DisplayFor(m=> m.MenuCourses[i].CourseTitle )

      // loop options
      for ( int k = 0; k < Model.MenuOptions.Count(); k++ ){

          if(Model.MenuOptions[k].MenuCoursesID == Model.MenuCourses[i].MenuCoursesID){

             @Html.DisplayFor(m=> m.MenuOptions[k].Title)
             //NEED RADIO BUTTON HERE BUT HOW DO I BIND TO THE MODEL?

           }
       } 
```

我需要每个菜单选项都有一个单选按钮分组到该部分，当用户点击保存时，我需要选择已选择的菜单选项。

任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:34:41.963

您可以使用**EditorTemplates**来做到这一点。

让我们为我们的场景创建 3 个视图模型。

```
public class Course
{
    public int ID { set; get; }
    public string Name{ set; get; }
    public List<Option> Options{ set; get; }
    public int SelectedAnswer { set; get; }
    public Course()
    {
        Options= new List<Option>();
    }
}
public class Option
{
    public int ID { set; get; }
    public string Title { set; get; }
}
public class OrderViewModel 
{
    public List<Course> Courses{ set; get; }
    public OrderViewModel()
    {
        Courses= new List<Course>();
    }
} 
```

在`GET`视图的操作方法中，我们将创建 OrderViewModel 类的对象并设置 Course 集合及其 Options 属性，然后通过将其传递给 View 方法将其发送到视图。

```
public ActionResult Index()
{
    var vm= new OrderViewModel();

    //the below is hard coded for DEMO. you may get the data from some  
    //other place and set the course and options

    var q1 = new Course { ID = 1, Name= "Starters" };
    q1.Options.Add(new Option{ ID = 12, Title = "Prawn Cocktail " });
    q1.Options.Add(new Option{ ID = 13, Title = "Soup" });
    vm.Courses.Add(q1);     

    var q2 = new Course { ID = 1, Name= "Mains" };
    q2.Options.Add(new Option{ ID = 42, Title = "Beef" });
    q2.Options.Add(new Option{ ID = 43, Title = "Lamp" });
    vm.Courses.Add(q2);

   return View(vm);           
} 
```

现在转到`~/Views/YourControllerName`文件夹并创建一个名为`EditorTemplates`. 在那里创建一个名为 的新视图`Course.cshtml`。将以下代码添加到该文件

```
@model Course
<div>
    @Html.HiddenFor(x=>x.ID)
    <h3> @Model.Name</h3>
    @foreach (var a in Model.Options)
    {
       <p>
          @Html.RadioButtonFor(b=>b.SelectedAnswer,a.ID)  @a.Title
       </p>
    }
</div> 
```

现在转到主视图并使用`EditorFor`html helper 方法带上编辑器模板

```
@model OrderViewModel 
<h2>Your Order</h2>
@using (Html.BeginForm())
{
    @Html.EditorFor(x=>x.Courses)
    <input type="submit" />
} 
```

要在表单提交中获取所选项目，您可以执行此操作

```
[HttpPost]
public ActionResult Index(OrderViewModel model)
{
    if (ModelState.IsValid)
    {
        foreach (var q in model.Courses)
        {
            var qId = q.ID;
            var selectedAnswer = q.SelectedAnswer;
            // Save the data 
        }
        return RedirectToAction("ThankYou"); //PRG Pattern
    }
    //to do : reload courses and options on model.
    return View(model);
} 
```

[这在这篇博客文章](http://www.techiesweb.net/radio-button-list-in-asp-net-mvc/)中已经清楚地解释了一个工作示例，您可以自己下载并运行它，看看它是如何工作的。

# javascript - 如何仅使用 JavaScript 将 base64 编码的图像数据上传到 S3？

> ID：12883871
> 
> 赞同：19
> 
> 时间：2012-10-14T15:52:24.643
> 
> 标签：javascript, heroku, canvas, amazon-s3, base64

我在 Heroku (cedar env) 上有一个 rails 应用程序。它有一个页面，我在其中使用方法将画布数据呈现为图像`toDataURL()`。我正在尝试使用 JavaScript（绕过服务器端）将返回的 base64 图像数据字符串直接上传到 s3。问题是，由于这不是文件，我如何将 base64 编码数据直接上传到 S3 并将其另存为文件？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-07T14:18:50.450

我找到了一种方法来做到这一点。经过大量搜索查看不同的教程。

您必须将数据 URI 转换为 blob，然后使用 CORS 将该文件上传到 S3，如果您正在处理多个文件，我对每个文件都有单独的 XHR 请求。

我发现这个函数可以将你的数据 URI 变成一个 blob，然后可以使用 CORS 直接上传到 S3（[将数据 URI 转换为 Blob](https://stackoverflow.com/a/11954337/1055838)）

```
function dataURItoBlob(dataURI) {
    var binary = atob(dataURI.split(',')[1]);
    var array = [];
    for(var i = 0; i < binary.length; i++) {
        array.push(binary.charCodeAt(i));
    }
    return new Blob([new Uint8Array(array)], {type: 'image/jpeg'});
} 
```

[这是一个关于直接上传到 S3 的精彩教程，您需要自定义代码以允许使用 blob 而不是文件。](http://www.ioncannon.net/programming/1539/direct-browser-uploading-amazon-s3-cors-fileapi-xhr2-and-signed-puts/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-06T13:26:40.070

Jamcoope 的回答非常好，但是并非所有浏览器都支持 blob 构造函数。最值得注意的是 android 4.1 和 android 4.3。有`Blob`polyfill，但`xhr.send(...)`不适用于 polyfill。最好的选择是这样的：

```
var u = dataURI.split(',')[1],
    binary = atob(u),
    array = [];

for (var i = 0; i < binary.length; i++) {
    array.push(binary.charCodeAt(i));
}

var typedArray = Uint8Array(array);

// now typedArray.buffer can be passed to xhr.send 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-03T09:52:21.093

如果有人关心：这是上面给出的函数的咖啡脚本版本！

```
 convertToBlob = (base64) ->
    binary = atob base64.split(',')[1]
    array = []
    for i in [0...binary.length]
      array.push binary.charCodeAt i
    new Blob [new Uint8Array array], {type: 'image/jpeg'} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T07:39:49.473

不确定 OP 是否已经解决了这个问题，但我正在开发一个非常相似的功能。在做一些研究时，我发现了这些可能会有所帮助的文章。

*   [http://blog.danguer.com/2011/10/25/upload-s3-files-directly-with-ajax/](http://blog.danguer.com/2011/10/25/upload-s3-files-directly-with-ajax/)
*   [http://www.tweetegy.com/2012/01/save-an-image-file-directly-to-s3-from-a-web-browser-using-html5-and-backbone-js/](http://www.tweetegy.com/2012/01/save-an-image-file-directly-to-s3-from-a-web-browser-using-html5-and-backbone-js/)

# java - 这些 Ant/JVM 参数有什么问题？

> ID：12883877
> 
> 赞同：5
> 
> 时间：2012-10-14T15:52:54.860
> 
> 标签：java, ant, jvm-arguments

我正在尝试从 Ant 构建文件中运行[JBoss TattleTale 。](http://www.jboss.org/tattletale)通常我像这样从命令行运行它：

```
java -Xmx512m -jar /home/myuser/jars/tattletale.jar /home/myuser/projects/lib /home/myuser/tmp/tt 
```

我的所有 JAR 文件所在`/home/myuser/projects/src`的源目录在哪里`/home/myuser/tmp/tt`，我放置 TattleTale 的所有报告的输出目录在哪里。

在 Ant 构建文件中，我使用以下内容：

```
<echo message="Running tattle-tale..."/>
<java fork="true" failonerror="true" jar="/home/myuser/jars/tattletale.jar">
    <arg value="Xmx512m"/>
    <arg value="/home/myuser/projects/lib"/>
    <arg value="/home/myuser/tmp/tt"/>
</java> 
```

当我从命令行运行这个目标时：

```
run-tattletale:
    [echo] Running tattle-tale...

BUILD SUCCESSFUL
Total time: 3 seconds 
```

当我去时，`/home/myuser/tmp/tt`我没有看到任何输出，但是 Ant 输出显示`SUCCESS`没有错误或警告。我`<arg>`的 s 看起来是否正确，如果不正确，我应该如何更改它们？如果它们看起来确实正确，我能做些什么来调试？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T19:13:15.230

两件事情：

1.  在运行 Ant 时尝试使用调试选项，并将输出保存到日志文件中。然后查看日志文件。它将向您展示它是如何执行 Java 命令的。这将帮助您找出 Ant`<java>`与直接从命令行运行 Java 的方式有何不同。它会让你有能力调整你的`<java>`任务。

2.  当参数用于`java`命令本身时，您使用`<jvmarg>`and not `<arg>`：

一个例子：

```
<echo message="Running tattle-tale..."/>
<java fork="true"
    failonerror="true"
    jar="/home/myuser/jars/tattletale.jar">
    <jvmarg value="-Xmx512m"/>  <!-- Note the dash! -->
    <arg value="/home/myuser/projects/lib"/>
    <arg value="/home/myuser/tmp/tt"/>
</java> 
```

试试看，`ant -d | tee ant.out`如果你在 Unix/Linux 上运行。在 Windows 上，您必须`ant -d > ant.out.txt`将输出保存在 中`ant.out.txt`，但在运行时不会显示输出`ant`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T16:01:13.397

第一个 args 是 JVM 参数而不是程序参数，因此`<arg>`语法错误。`maxmemory`对于这种情况，使用任务的参数会更容易`java`。

所以删除第一个`<arg>`并放入`maxmemory=512m`块中`<java>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-22T20:18:19.140

如果您在目标目录中没有看到输出，可能是由于 1) 给定的输入目录中没有存档或 2) tattletale 进程失败。在失败或异常的情况下，tattletale 进程似乎返回退出代码`0`，它使 ant 相信进程执行成功。

对于调试，我建议您确保*给定的目录是正确的，并且有 java 归档 (jar) 文件**，*并分析由`tattletale`.

例子：

```
<echo message="Running tattle-tale..."/>
<java fork="true"
    failonerror="false" 
    errorproperty="errorproperty"
    outputproperty="outputproperty"
    jar="/home/myuser/jars/tattletale.jar">
    <jvmarg value="-Xmx512m"/>  <!-- Note the dash! -->
    <arg value="/home/myuser/projects/lib"/>
    <arg value="/home/myuser/tmp/tt"/>
</java>
<echo message="stdout>> ${outputproperty}"/>
<echo message="stderr>> ${errorproperty}" /> 
```

注意：-`failonerror`暂时为 false，仅用于调试目的。

# javascript - 可点击的敌人

> ID：12883881
> 
> 赞同：3
> 
> 时间：2012-10-14T15:53:48.653
> 
> 标签：javascript, html, mouseevent, onmouseclick

嗨，我对 javascript 完全陌生，需要 help.im 制作 HtML javascript 游戏。我只是想问我如何让我的敌人可以点击？我已经成功地为我的游戏创建了我的敌人，但目前他们从游戏屏幕的顶部下来并在底部退出。如果玩家接触到任何敌人，那么它就会结束游戏，但我希望玩家能够点击敌人然后继续游戏结束。我已经尝试了几个星期，但我输了。

此外，我的播放器目前正由鼠标控制，因为鼠标就是播放器。

我需要更改我的 collison 测试吗？我只是不确定如何让玩家能够点击敌人。我是否需要注册一个“点击”功能，如 onmouseclick 等？

我在用着：

```
window.addEventListener("mousedown",onDown,false);  
window.addEventListener("mousemove",onMove,false);
window.addEventListener("mouseup",onUp,false); 
```

谢谢任何帮助都会很棒！只需要一点帮助就可以朝着正确的方向前进。

提前致谢 ：）

这是播放器移动鼠标（播放器）时的功能。它的工作原理是我的播放器由鼠标 movememt 控制：

```
function onMove(e) {
                if (!e) var e = window.event;

                //get mouse position

                var posx = 0;
                var posy = 0;

                if (e.pageX || e.pageY)     {
                    posx = e.pageX;
                    posy = e.pageY;
                }

                else if (e.clientX || e.clientY)    {
                    posx = e.clientX + document.body.scrollLeft
                        + document.documentElement.scrollLeft;
                    posy = e.clientY + document.body.scrollTop
                        + document.documentElement.scrollTop;
                }

                var totalOffsetX = 0;
                var totalOffsetY = 0;
                var currentElement = canvas;

                do{
                    totalOffsetX += currentElement.offsetLeft;
                    totalOffsetY += currentElement.offsetTop;
                }
                while(currentElement = currentElement.offsetParent)

                mouseX = posx - totalOffsetX;
                mouseY = posy - totalOffsetY;

            }

    } 
```

和鼠标：

```
function onUp(e) {
            mouseDown = false;
        } 
```

对于敌人，我做了：

```
enemies = new Array();
            createEnemies(); 
```

以及敌人物体（游戏中的食物和水果物品）动画的功能：

```
function createEnemies() {
            var enemy
            if(level>2 && Math.random()<0.2) {
                var breakfastItems =  Math.floor(Math.random() * breakfastsheets.length);
                var tmpAnimation = new Animation(breakfastsheets[breakfastItems],4,2)
                enemy = new Skull(tmpAnimation,Math.random()*(canvas.width-tmpAnimation.width),-tmpAnimation.height);
            } else if(level>3 && Math.random()<0.2) {
                var randomVegetable =  Math.floor(Math.random() * vegetablesheets.length);
                var tmpAnimation = new Animation(vegetablesheets[randomVegetable],4,2)
                enemy = new Skull(tmpAnimation,Math.random()*(canvas.width-tmpAnimation.width),-tmpAnimation.height);
            }else { 
                var randomFruit = Math.floor(Math.random() * enemysheets.length);
                var tmpAnimation = new Animation(enemysheets[randomFruit],4,2)
                enemy = new Skull(tmpAnimation,Math.random()*(canvas.width-tmpAnimation.width),-tmpAnimation.height);
            }

            enemy.setExplosionSound(explosionSoundPool);

            enemies.push(enemy);
        } 
```

忘了说敌人中的“骷髅”就是这个：尽管我没有使用导弹，但忘记导弹。

```
function Skull (image, x,y, width, height) {
//call constructor of parent object
DisplayObject.call(this,'skull', image, x,y, width, height);

//initialise objects
this.img.play();
this.img.setLoop(true);
this.img.setRange(0,4);

//private variables
var dying = false;
var alive = true;
var speed = 5;

var explosionSound;

//public methods

this.update = function(game_area, missiles) { //game area is a Rect2d, missiles is an array of display objects.
    this.y+=speed;
    this.img.next();
    if(!dying && missiles) {
        for(var i = 0; i<missiles.length; i++) {
            if(Collision.test(missiles[i],this)) {
                missiles[i].kill();
                dying = true;
                this.img.setRange(4,8);
                this.img.setLoop(false);
                this.img.setFrame(0);
                //play explosion sound. 
                if(explosionSound) explosionSound.play(0.5);
            }
        }
    }

    if(Collision.isOutside(this,game_area) || (dying && !this.img.isPlaying())) {
        alive = false;
    }

}

//set a sound to be played when the enemy is hit.
this.setExplosionSound = function (soundPool) {
    explosionSound = soundPool;
}

this.isDying = function () { 
    return dying; 
}

this.isDead = function () { 
    return !alive; 
} 
```

}

Skull.prototype = new DisplayObject();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:33:38.590

假设敌人是在屏幕上移动的方形物体，

您可以做的是为包含当前位置的敌人创建一个类：

```
function newEnemy(){
   this.topLeftx = 'some random value'
   this.topLefty = 'some random value'
   this.bottomRightx = 'some random value'
   this.bottomRighty = 'some random value'
   this.isSelected = false;
   ... 
```

}

然后有一个方法，当用户单击时调用，并逐个遍历敌人列表。对于每个敌人，调用一个“命中测试”函数，该函数将检查用户在鼠标上的 (x,y) 坐标是否在敌人的方格内。

如果选择了任何形状，则将它们设置为 true，然后在下一个绘制周期中，选择的敌人是否以不同的方式绘制或根本没有绘制，即被摧毁？

如果敌人是圆形的，那么您将需要一个 x,y 坐标，每个坐标都有一个半径。然后，只需检查在圆心和鼠标坐标之间绘制的线是否小于圆本身的半径。使用勾股定理求长度。

# iphone - 导航栏中的 UIButton，如 Tweetbot

> ID：12883884
> 
> 赞同：1
> 
> 时间：2012-10-14T15:54:24.017
> 
> 标签：iphone, objective-c, ios, uinavigationbar, uinavigationitem

我想重现一个类似导航栏的 Tweetbot。
我仍在寻找是否可以在一个栏中放置一个`UIButton`代替标题，**并**使其完全适合左右按钮之间，就像在 Tweetbot 应用程序中所做的那样。 当我尝试这样做时，超过一定大小会自动缩小`UINavigationBar` **`self.navigationItem.titleView`**

 **如果我遗漏了一些明显的东西，请告诉我，
谢谢

我提供了两张截图让你看看我在说什么 ![按钮正常](../Images/4ce972dcd4756ca06ac1b1836649e29c.png)
![按钮高亮](../Images/cc66d91af7ab581fe555833a4c758ce8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:27:54.037

他们可能已经推出了自己的`UINavigationBar`和/或`UINavigationController`. 我想尝试破解 UIKit 是不值得的，因为它会非常脆弱并且不会面向未来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:28:19.113

您是否尝试在 titleView 上将 autoresizesSubviews 设置为 YES，然后在 UIButton 上设置正确的自动调整大小掩码？如果这不起作用，我建议您创建自定义视图子类并覆盖 -layoutSubviews 以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T19:47:33.583

您可以向导航项的标题视图属性添加一个按钮，该属性接受 UIView，并且由于 UIButton 是 UIView 的子类，因此这不是问题。

或者，如果您使用故事板，只需将一个按钮拖到导航栏的中心，就这么简单。

```
// Create the button, and specify the type
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

// Set the button's frame
button.frame = CGRectMake(0.0f, 0.0f, 30.0f, 30.0f);

// Set your custom image for the button
[button setImage:[UIImage imageNamed:@"YOUR_IMAGE_NAME"]  forState:UIControlStateNormal];

// Set the button's action, which is the method that will be called when it is pressed
[button addTarget:self action:@selector(doSomething:) forControlEvents:UIControlEventTouchUpInside];

// Add the button to the navigation bar's title view
[self.navigationItem.titleView addSubview:button]; 
```

SDK参考： [https ://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationItem_Class/Reference/UINavigationItem.html](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationItem_Class/Reference/UINavigationItem.html)**

# php - 在 Mysql 中求和

> ID：12883885
> 
> 赞同：-8
> 
> 时间：2012-10-14T15:54:29.960
> 
> 标签：php, mysql, sum

我有来自同一数据库中不同表的 3 个不同查询

```
 $sum = "SELECT htno, SUM(tm) AS tech FROM table1 WHERE htno='$id'";

 $sum1 = "SELECT htno, SUM(em) AS tech1 FROM table2 WHERE htno='$id'";

 $sum2= "SELECT htno, SUM(hm) AS tech2 FROM table3 WHERE htno='$id'"; 
```

现在我想添加技术、技术 1 和技术 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:56:00.597

这不是那么容易吗？

```
SELECT htno, SUM(tm) + SUM(em) + SUM(hm),.... 
```

**更新 1**

```
SELECT x.htno, SUM(x.tech)
FROM
    (
        SELECT htno, SUM(tm) AS tech FROM....WHERE...GROUP BY...
        UNION ALL
        SELECT htno, SUM(em) AS tech  FROM....WHERE...GROUP BY...
        UNION ALL
        SELECT htno, SUM(hm) AS tech  FROM....WHERE...GROUP BY...
    ) x
GROUP BY x.htno 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:01:51.790

尝试这个：

```
SELECT htno, 
       Sum(tm) + Sum(em) + Sum(hm) AS tech4 
FROM   table1 
       INNER JOIN table2 
              ON table1.htno = table2.htno 
       INNER JOIN table3 
              ON table3.htno = table2.htno 
GROUP  BY table1.htno 
```

# .net - 使用 ScrollViewer 支持较低的分辨率

> ID：12883888
> 
> 赞同：0
> 
> 时间：2012-10-14T15:54:57.220
> 
> 标签：.net, silverlight, layout, scrollviewer

我有一个 Silverlight 应用程序，它是为某个最小分辨率而设计的，如果有更多可用空间，布局会优雅地增长。我现在想要做的是轻松地为较低分辨率添加一些粗略的支持。

为此，我引入了 ScrollViewer 作为布局根 - 想法是在屏幕低于固定最小值时显示适当的滚动条，以便用户可以滚动主布局。问题是，现在整个布局没有任何界限地增长，并且无论屏幕大小如何都会出现滚动条。

一种解决方案是将内容的固定大小设置为支持的最小大小。但是，如果屏幕更大，这会扼杀优雅的增长。或者，我想，我可以通过编程将最大尺寸设置为我确定的屏幕分辨率。

有没有办法在 XAML 中优雅地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:01:34.770

尝试查看[MinWidth](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.minwidth%28v=vs.95%29.aspx)和[MaxWidth](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.maxwidth%28v=vs.95%29.aspx)属性，以及 MinHeight 和 MaxHeight。ScrollViewer 还具有[VerticalScrollbarVisibility](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.verticalscrollbarvisibility%28v=vs.95%29.aspx)和 Horizo​​ntalScrollbarVisibility 这可能会有所帮助。这两个都可以设置为`Disabled`（与 just 不同`Hidden`），这将相应地设置内容的尺寸。看[这里](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollbarvisibility%28v=vs.95%29.aspx)。

我刚刚查看了我放入应用程序的工作滚动查看器。我没有在滚动查看器内的控件上指定任何宽度或高度。我指定`HorizontalScrollBarVisibility="Disabled"`并在滚动查看器内的网格内布置控件。网格扩展到可用的宽度，并按照我的意愿垂直滚动。

# visual-c++ - 使用配置文件引导优化构建应用程序时获取程序集列表文件

> ID：12883890
> 
> 赞同：0
> 
> 时间：2012-10-14T15:55:07.337
> 
> 标签：visual-c++

在使用 PGO 构建应用程序（可执行文件）时，msvc 将使用链接器最终生成带有所有 pgo/pgc 辅助文件的优化后的可执行文件。

但是我怎样才能获得装配列表文件（作为 /Fa /FAsc 选项）以进行配置文件引导优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:40:57.333

当您在项目中有一个 .asm 源文件时，配置属性应该有一个标记为“Microsoft 宏汇编程序”的部分。在“Listing”属性下应该有一个选择：“Enable Assembly Generated Code Listing”

如果将其设置为“是”，它将在 ml.exe 的命令行中添加 /Sg 选项

或者，如果您这样做，则将其手动添加到您的自定义构建属性中。

还应设置“汇编代码列表文件”。

# objective-c - 是否可以专注于 NSPanel 而不会失去其他背景窗口的焦点？

> ID：12883894
> 
> 赞同：1
> 
> 时间：2012-10-14T15:55:29.850
> 
> 标签：objective-c, xcode, cocoa, nswindow, nspanel

我有一个自定义的 NSPanel：[http ://cl.ly/K8SY](http://cl.ly/K8SY)

我将它设置为 NSPopUpMenuWindowLevel，即我希望它保持的级别。一个例子是聚光灯菜单，当您单击它时，后台窗口中的任何其他焦点仍然存在，但您仍然可以在搜索字段中键入。

我打开它：

```
[window orderFront:nil] 
```

但这并不关注窗口和背景。

有可能实现这一目标吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:12:57.573

您需要改用`-[NSWindow makeKeyAndOrderFront:]`调用。

**注意**：键盘焦点只能指向一个窗口中的一个视图。Cocoa 的 mainWindow 和 keyWindow 概念可以是不同的窗口，但它只是 keyWindow 中接受键盘输入的第一个响应者。

# c++ - IID_MediaControl 未声明的标识符

> ID：12883895
> 
> 赞同：2
> 
> 时间：2012-10-14T15:55:34.763
> 
> 标签：c++, c, directshow, linker-errors

我正在使用 Visual Studio 2008 为我的 Windows Mobile 6.1 设备开发 SmartDevice Win32 DLL。我必须使用 DirectShow 并开始复制基本示例。

`.h`: _

```
#pragma once

// Additional Include Directories:
// "C:\Program Files (x86)\Windows Mobile 6 SDK\Smartphone\Include\Armv4i"
#include <dshow.h>

// Included strmiids.lib for CLSID_FilterGraph and IID_IGraphBuilder (.cpp)
#pragma comment(lib, "strmiids.lib")

extern "C" {

    __declspec(dllexport) bool InitCOM();

} 
```

和`.cpp`：

```
#include "stdafx.h"
#include "DLLDevice.h"

BOOL APIENTRY DllMain( HANDLE hModule, 
                       DWORD  ul_reason_for_call, 
                       LPVOID lpReserved
                     )
{
    return TRUE;
}

__declspec(dllexport) bool InitCOM()
{
    if(FAILED(CoInitialize(NULL)))
        return false;

    IGraphBuilder* pGraphBuilder = NULL;
    HRESULT hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, 
        IID_IGraphBuilder, (void**) &pGraphBuilder);

    if(FAILED(hr))
        return false;

    IMediaControl *pMediaControl = NULL;
    hr = pGraphBuilder->QueryInterface(IID_MediaControl, (void**) &pMediaControl);

    pGraphBuilder->Release();

    return true;
} 
```

现在我有一个链接器错误：

```
error C2065: 'IID_MediaControl' : undeclared identifier 
```

为什么？我怎么解决这个问题？
**为什么无法使用 DirectShow 创建项目？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:53:29.950

因为是`IID_IMediaControl`，不是`IID_MediaControl`。

# javascript - js匹配搜索与数组

> ID：12883896
> 
> 赞同：0
> 
> 时间：2012-10-14T15:55:35.933
> 
> 标签：javascript, arrays, match, innerhtml

我试图从按行排序的列表中获取每 3 个名称的第一个日期。数组是动态的。没有数组，它工作正常......

但是从这里我无法让它工作。有没有办法让数组进入比赛？

```
var array=new Array();
array[1]='name1';
array[2]='name2';
array[3]='name3';

for (var k = 1; k <= array.length; k++) {
    tow = document.getElementById('cal_table');
    zap = tow.getElementsByTagName('tr');

    for (var i=1; i<=zap.length; i++){
        opt0 = zap[i].innerHTML.match(/<td>array[k]<\/td>|<td>.*2012<\/td>/img);
        if(opt0.length==2){
            alert(opt0);
            break
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:10:44.813

您必须使用 RegExp 构造函数，即`new RegExp("<td>" + array[k] + "|<td>.*2012<\/td>", "img")`.

# haskell - Haskell - 单例和'fromList'

> ID：12883898
> 
> 赞同：0
> 
> 时间：2012-10-14T15:55:37.510
> 
> 标签：haskell

下面的代码是什么意思？

```
singleton 1 'a' == fromList [(1, 'a')] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T22:02:21.377

`singleton`并`fromList`出现在几个容器模块中。

通常，`singleton`返回一个包含单个元素的容器，并`fromList`返回一个包含列表中所有元素的容器（映射中的模键重复）。

您给出的示例显示`singleton`采用 2 个参数，这意味着容器是一个映射（`Set`、`IntSet`、`HashMap`等），并且需要单个元素的键和值。对于映射，`fromList`需要一个键值对列表。

您显示的相等性表明，具有将数字映射`1`到字符的单个元素的容器`'a'`是相同的，无论它是使用 构造的`singleton`，还是`fromList`使用单元素列表构造的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:01:50.290

在我看来，这是来自[IntMap](http://hackage.haskell.org/packages/archive/containers/0.5.1.0/doc/html/Data-IntMap.html)。两者`singleton`都`fromList`住在那里。数据结构基本上是一个映射的有效实现，它基于帕特里夏树从整数到值。

# c# - IOC/DI CastleWindsor 每次都返回相同的实例

> ID：12883900
> 
> 赞同：2
> 
> 时间：2012-10-14T15:55:42.143
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, castle-windsor

正在工作的项目使用城堡温莎实现 IOC/DI。项目中有很多模块。有一个名为的模块将自动过程`ProcessEngine`发送`Invoices`到我的模块，该模块涉及 7 个步骤。

到目前为止，模块使用队列中的一个一个`ProcessEngine`发送，并且我的模块运行良好。`Invoices`但是现在`ProcessEngine`通过在不同的线程中跨越它们来发送许多准备好的发票，每个发票都有自己的线程，所以问题出现了。

我看到的问题是实例是使用 Castle Windsor 创建的，并且每次都返回相同的对象。这意味着所有线程都具有相同的实例，这会造成混乱。然后，我使用**new**关键字创建了具有一些私有属性的主要类的实例，并且效果很好。

**有什么方法可以限制 Castle Windsor 容器每次为我的模块的某些类返回新实例？**该项目的体系结构指南必须使用 Castle Windsor 实例化对象，而不是使用 new 关键字。有什么解决办法吗？

任何帮助都将受到高度重视。我对温莎城堡了解不多，但我观察到它是一种单例模式，因为它每次使用温莎城堡都会返回相同的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T16:00:31.960

你需要检查[生活方式](http://docs.castleproject.org/Windsor.LifeStyles.ashx)。

默认行为是单例，这意味着当您请求解析时，它确实会返回相同的实例。

您可以使用 PerThread 或 Transient 生活方式。

# python - Django ORM - 模拟 values().filter() 链

> ID：12883906
> 
> 赞同：14
> 
> 时间：2012-10-14T15:56:50.537
> 
> 标签：python, django, django-orm, python-mock, django-nose

我试图模拟 Djangos`model.Manager()`类的链式调用。现在我想模拟`values()`and`filter()`方法。

为了测试我创建了一个小测试项目：

1.  创建虚拟环境
2.  跑`pip install django mock mock-django nose django-nose`
3.  创建项目`django-admin.py startproject mocktest`
4.  创建应用`manage.py startapp mockme`
5.  添加`django_nose`和`mocktest.mockme`到`INSTALLED_APPS`(settings.py)
6.  添加`TEST_RUNNER = 'django_nose.NoseTestSuiteRunner'`到 settings.py

为了验证一切都设置正确，我跑了`manage.py test`。运行一项测试，这是 Django 在您创建应用程序时创建的标准测试。

接下来我要做的是创建一个非常简单的模型。

**模拟/模型.py**

```
from django.db import models

class MyModel(models.Model):
    name = models.CharField(max_length=50) 
```

接下来我做的是创建一个简单的函数，它使用`MyModel`. 这就是我稍后要测试的功能。

**模拟/functions.py**

```
from models import MyModel

def chained_query():
    return MyModel.objects.values('name').filter(name='Frank') 
```

这里没有什么特别的事情发生。该函数正在过滤 MyModel 对象以查找`name='Frank'`. 对 values() 的调用将返回一个`ValuesQuerySet`仅包含所有找到的 MyModel 实例的名称字段。

**模拟/测试.py**

```
import mock

from django.test import TestCase
from mocktest.mockme.models import MyModel
from mocktest.mockme.functions import chained_query
from mock_django.query import QuerySetMock

class SimpleTest(TestCase):
    def test_chained_query(self):
        # without mocked queryset the result should be 0
        result = chained_query()
        self.assertEquals(result.count(), 0)

        # now try to mock values().filter() and reeturn
        # one 'Frank'.
        qsm = QuerySetMock(MyModel, MyModel(name='Frank'))
        with mock.patch('django.db.models.Manager.filter', qsm):
            result = chained_query()
            self.assertEquals(result.count(), 1) 
```

第一个 assertEquals 将评估为成功。由于模型管理器尚未模拟，因此没有返回任何实例。当第二个 assertEquals 被调用时，我希望`result`包含我作为返回值添加到 QuerySetMock 的 MyModel 实例：

```
qsm = QuerySetMock(MyModel, MyModel(name='Frank')) 
```

我嘲笑了`filter()`方法而不是`values()`方法，因为我发现它将是最后一次评估的调用，尽管我不确定。

测试将失败，因为第二个结果变量不包含任何 MyModel 实例。

为了确保该`filter()`方法真的被嘲笑，我添加了一个“调试打印”语句：

```
from django.db import models
print models.Manager.filter 
```

返回：

```
<SharedMock name='mock.iterator' id='4514208912'> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-25T16:44:22.167

尝试这个：

```
import mock
from mocktest.mockme.models import MyModel

class SimpleTest(TestCase):
    def test_chained_query(self):
        my_model_value_mock = mock.patch(MyModel.objects, 'value')
        my_model_value_mock.return_value.filter.return_value.count.return_value = 10000
        self.assertTrue(my_model_value_mock.return_value.filter.return_value.count.called) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-18T16:06:18.237

@Gin 的回答让我大部分时间都在那里，但在我的情况下，我正在修补`MyModel.objects`，我正在嘲笑的查询看起来像这样：

`MyModel.objects.filter(arg1=user, arg2=something_else).order_by('-something').first()`

所以这对我有用：

```
@patch('MyModel.objects')
def test_a_function(mock, a_fixture):
    mock.filter.return_value.order_by.return_value.first.return_value = a_fixture
    result = the_func_im_testing(arg1, arg2)
    assert result == 'value' 
```

此外，修补属性的顺序很重要，并且必须与您在测试函数中调用它们的顺序相匹配。

# android - 如何检查我的安卓手机是否丢失了 GPS 信号？

> ID：12883907
> 
> 赞同：1
> 
> 时间：2012-10-14T15:57:02.827
> 
> 标签：android, gps

嗨，有什么方法可以检查我的安卓手机是否丢失了 GPS 信号。我可以查明 GPS 信号是否已恢复，但有没有办法检查信号最初何时丢失？

我曾尝试检查经度或纬度是否为 0，但是当我失去信号时，我没有观察到它们中的任何一个都变为 0。

谢谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:19:36.310

您可能想查看这两个问题的答案...

**[stackoverflow.com/questions/843675](https://stackoverflow.com/questions/843675/how-do-i-find-out-if-the-gps-of-an-android-device-is-enabled)**

**[stackoverflow.com/questions/2021176](https://stackoverflow.com/questions/2021176/how-can-i-check-the-current-status-of-the-gps-receiver)**

# android - 在版本 11 上启用菜单并在 ICS 或更高版本上修复自定义通知颜色

> ID：12883909
> 
> 赞同：0
> 
> 时间：2012-10-14T15:57:29.793
> 
> 标签：android, notifications, manifest

我有以下问题，它会生成带有浅灰色背景的自定义通知。我[在这里](https://stackoverflow.com/questions/8659909/default-notification-background-color)找到了一个解决方案，需要将 targetSdkVersion 更改为 14。这个解决方案工作正常，但它禁用了菜单按钮。

有没有人作为更好的解决方案？有没有办法重新启用菜单？

![在此处输入图像描述](../Images/a795f650e731f8f521516b31698b9d7c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:14:13.610

API 14+ 硬编码黑色问题的快速修复

```
if ( Build.VERSION.SDK_INT >= 14 )
  contentView.setInt(R.id.custom_notification, "setBackgroundColor", 0xff151515); 
```

**解决此问题的一种更简洁的**方法是在设备运行 sdk 14+ 时使用带有大图标的本机通知构建器。

# function - 矩阵包含值但仍然是符号 - Matlab

> ID：12883913
> 
> 赞同：0
> 
> 时间：2012-10-14T15:58:17.790
> 
> 标签：function, matlab, matrix

我有一个这样输出的矩阵：

```
maximums =

    [ -9.9043877608991468201413092380493, 426.34796945271797204125533010993]
    [  9.3758615553048990076305298649689, 441.87005169359418197397861057075] 
```

但是当我尝试在其上运行任何命令时，我收到一条错误消息，指出该矩阵仍然是符号矩阵。我不明白，因为它只是数值。无论如何使Matlab的正常功能使用这个矩阵输出？

为了得到这个矩阵，我确实计算了一个符号方程的导数，然后进行评估。但我想在这个输出上运行函数。谢谢！

编辑（这是命令/错误的示例）：

```
[maxValue, rowIdx] = max(maximums(:,2),[],2)

Undefined function 'max' for input arguments of type 'sym'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:05:13.980

由于您的矩阵是符号的，您必须先将其[转换为数字](http://www.mathworks.se/help/symbolic/double.html)：

```
maximums = double(maximums) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:04:35.487

你必须转换它：

```
maximus=double(maximus) 
```

# ruby - 如何计算简单移动平均线

> ID：12883917
> 
> 赞同：2
> 
> 时间：2012-10-14T15:58:44.987
> 
> 标签：ruby, math, moving-average

我正在开发一个程序，该程序使用 yahoo Finance api 收集输入股票数量的历史收盘数据，然后继续计算 30 天数据的简单移动平均线 (SMA)。到目前为止，我有以下内容：

```
require 'rubygems'
require 'yahoofinance'

array = []
while line = gets
  break if line.chomp =~ /N/ #exit when 'N' is entered
  array << line.chomp
end
puts "Values: #{array.join(',')}" #joining all the elements with a comma

array.each do |s|
  print "\n______\n"
  puts s

  YahooFinance::get_HistoricalQuotes( s,
                                  Date.parse( '2012-10-06' ),
                                  Date.today() ) do |hq|
    puts "#{hq.close}"
  end
end 
```

此代码为我提供了指定范围内股票的收盘价。我有两个问题：

1.  目前，`hq.close`持有所有股票的价值。如何将这些值放入数组中，以便对其进行计算以计算每个股票数据的 SMA？

    我试着做这样的事情：

    ```
    "#{hq.close}" my_val = [hq.close]
    puts my_val 
    ```

    但这仅给出了第一个股票的价值`my_val`。我知道我必须在这里放一个循环。我试着把

    ```
    while(!hq.close.emply?)
      my_val = [hq.close]
      puts my_val
    end 
    ```

    但这给了我一个错误：

    ```
    C:/Users/Muktak/workspace/RubySample/sample_program.rb:23:in block (2 levels) in <main>': undefined methodemplty?' for 19.52:Float (NoMethodError) from
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/yahoofinance-1.2.2/lib/yahoofinance.rb:491:in block in get_HistoricalQuotes' from
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/yahoofinance-1.2.2/lib/yahoofinance.rb:456:inblock in get_historical_quotes' from
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/yahoofinance-1.2.2/lib/yahoofinance.rb:456:in each' from
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/yahoofinance-1.2.2/lib/yahoofinance.rb:456:inget_historical_quotes' from
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/yahoofinance-1.2.2/lib/yahoofinance.rb:489:in get_HistoricalQuotes' from
    C:/Users/Muktak/workspace/RubySample/sample_program.rb:19:inblock in ' from
    C:/Users/Muktak/workspace/RubySample/sample_program.rb:13:in each' from
    C:/Users/Muktak/workspace/RubySample/sample_program.rb:13:in'
    Values: FB,GOOG 
    ```

2.  如何在 Ruby 中计算 SMA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:08:55.797

您在这里提出了两个问题，所以让我们一次解决一个问题。

首先，这段代码：

```
require 'rubygems'
require 'yahoofinance'

stock_names = %w{MSFT RHT AAPL}
start = Date.parse '2012-10-06'
finish = Date.today
closes = {}

stock_names.each do |stock_name|
  quotes = YahooFinance::get_HistoricalQuotes stock_name, start, finish
  closes[stock_name] = quotes.collect { |quote| quote.close }
end 
```

... 将在 中产生以下哈希`closes`，我理解它是您想要的格式：

```
{
  "AAPL" => [629.71, 628.1, 640.91, 635.85, 638.17],
  "RHT"=> [53.69, 53.77, 53.86, 54.0, 54.41],
  "MSFT"=> [29.2, 28.95, 28.98, 29.28, 29.78]
} 
```

其次，你想计算一个简单的移动平均线——对于金融应用来说，它只是[这些值的平均值](http://en.wikipedia.org/wiki/Moving_average#Simple_moving_average)。有一个名为 simple_statistics 的 Gem 可以做到这一点。

这段代码：

```
require 'rubygems'
require 'yahoofinance'
require 'simple_statistics'

stock_names = %w{MSFT RHT AAPL}
start = Date.parse '2012-10-06'
finish = Date.today
averages = {}

stock_names.each do |stock_name|
  quotes = YahooFinance::get_HistoricalQuotes stock_name, start, finish
  closes = quotes.collect { |quote| quote.close }
  averages[stock_name] = closes.mean
end 
```

...在 中产生以下哈希`averages`：

```
{ "AAPL" => 634.548, "MSFT" => 29.238, "RHT" => 53.946 } 
```

# c++ - 浮点运算，C 输出

> ID：12883921
> 
> 赞同：2
> 
> 时间：2012-10-14T15:59:18.983
> 
> 标签：c++, c, floating-point

对于哪个 f 值，输出将是“世界”？

```
#include<stdio.h>
int main(){
  float f= ... ;
  if(f==f)
     printf("hello\n");
  else
     printf("world\n");
 return 0;
} 
```

什么将替换为三个点 (...)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T16:07:08.847

尝试这个：

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>

int main(){
  float f = nanf("0.0");
  printf("%f\n", f);

  if(f==f)
     printf("hello\n");
  else
     printf("world\n");
 return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T16:12:31.483

IEEE 754 浮点数可以表示正数或负数`infinity`和`NaN`（不是数字）。这 3 个值来自结果未定义或无法准确表示的计算。`NaN`将**始终**通过表达式传播。`NaN` **即任何包含将**评估的表达式`NaN`。

您也可以故意将浮点变量设置为`NaN`. 例如，以下完全有效的浮点表达式可以解决问题：

```
 sqrtf(-1.0f) // NaN 
```

[有关浮点数中](http://www.gnu.org/software/libc/manual/html_node/Infinity-and-NaN.html)[**无穷大**和**NaN**](http://www.gnu.org/software/libc/manual/html_node/Infinity-and-NaN.html)的更多信息。

* * *

PS：我很想忽略这一点，因为它看起来像一个简单的作业 Q。但是不推荐使用作业标签和所有...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T16:00:53.813

简单的。

```
float f = (puts("world"), exit(0), 0.0f); 
```

**编辑：**是的，我知道您正在寻找不同的答案。但我会变得很可爱，因为这看起来像是家庭作业或带回家测验中的一个问题，甚至还没有分解成各个部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T16:13:34.327

您可以使用`NAN`来自 的宏`math.h`。

```
#include <math.h>
#include <stdio.h>

int main(void)
{
  float f = NAN;
  if (f == f)
     printf("hello\n");
  else
     printf("world\n");
} 
```

请注意，此宏已在 C99 中引入，如果实现不支持该`float`类型的安静 NaN，则不存在此宏。

# windows-phone-7 - RichTextBox 段落内容显示在页面中间

> ID：12883938
> 
> 赞同：0
> 
> 时间：2012-10-14T16:00:40.967
> 
> 标签：windows-phone-7, richtextbox, paragraph

几天前我开始为 Windows 编程，但无法在左上角显示我的 RichTextBox 段落元素内容。它显示在我的网格的内容页面的中间。

这是我的代码：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <RichTextBox>
            <Paragraph TextAlignment="Left">
                <Bold FontSize="32">Todays Instructions</Bold>
            </Paragraph>
            <Paragraph>
                I want some text to display here.
            </Paragraph>
        </RichTextBox>
    </Grid> 
```

如果您查看此消息的内容框，您会看到我所说的“大家好”从最左上角开始。我希望我的段落做同样的事情，但它显示在网格的中间。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:09:08.430

添加`VerticalAlignment="Top"`到您的 RichTextBox。

# java - 为什么句柄消息不起作用

> ID：12883942
> 
> 赞同：1
> 
> 时间：2012-10-14T16:00:57.650
> 
> 标签：java, android, android-layout, android-intent

我在android中的处理程序有问题，我不明白不显示结果，这是代码：

```
public class Main extends Activity implements OnClickListener {

private EditText nhap;
private Button btTinh;
private Button btHuy;
private TextView kq;
private ProgressDialog progress;
private Handler handle = new Handler();
private int count = 0;
private String s = "";
private long n; 
```

处理消息：

```
Handler mhandle = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        kq.setText(msg.obj.toString());
    }
}; 
```

创建：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    nhap = (EditText) findViewById(R.id.nhap);
    btTinh = (Button) findViewById(R.id.btTinh);
    btHuy = (Button) findViewById(R.id.btHuy);
    kq = (TextView) findViewById(R.id.kq);
    btTinh.setOnClickListener(this);
    btHuy.setOnClickListener(this);
}   

public boolean checkPrime(long n) {
    for (int i = 2; i <= Math.sqrt(n); i++) {
        if (n % i == 0)
            return false;
    }
    return true;
} 
```

优越：

```
public void outPrime(long t) {
    // String s="";
    progress.setCancelable(true);
    progress.setMessage("File downloading ...");
    progress.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    progress.setProgress(0);
    progress.setMax(Integer.parseInt(nhap.getText().toString()));
    progress.show();
    n = t;
    new Thread() {
        public void run() {
            for (int i = 2; i < n; i++) {
                count = i;
                if (checkPrime(i))
                    s = s + i + " ";
                handle.post(new Runnable() {

                    public void run() {
                        // TODO Auto-generated method stub
                        progress.setProgress(count);
                    }
                });

            }
            if (count == n - 1) {
                progress.dismiss();
                Message msg = handle.obtainMessage(1, (String)s);
                handle.sendMessage(msg);
            }

        }
    }.start();

} 
```

点击：

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.btTinh:
        progress = new ProgressDialog(this);
        outPrime(Long.parseLong(nhap.getText().toString()));
        break;
    case R.id.btHuy:
        nhap.setText("");
        break;
    }
}} 
```

这是句柄消息：

```
Handler mhandle = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        kq.setText(msg.obj.toString());
    }
}; 
```

我不明白句柄消息不返回值，“kq.setText(msg.obj.toString());” 不显示在屏幕上，对不起，因为我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:56:33.993

我认为您的问题的答案是“注意变量的名称！” 看 - 你已经创建了 2 个处理程序 - 名为“mhandle”和“handle”。您想在名为“mhandle”的处理程序中解析消息，但在您的线程中将其发送到“句柄”，这对您的代码没有任何作用。如果您仍然试图找到答案，希望它会有所帮助。

# html - 语义：对于详细信息的“列表”而言，表格或列表是否更好

> ID：12883943
> 
> 赞同：1
> 
> 时间：2012-10-14T16:00:58.437
> 
> 标签：html, semantics

我在想，对于这样的列表：

*   **操作系统**iOS
*   **5.1**版****
***   **大小**12.5MB**

 **（实际上不应该在它前面有一个点或任何其他列表样式，它只是为了使它更具可读性。）

使用列表是否更好（例如这样）：

```
<ul>
    <li>
        <h3>OS</h3>
        <p>iOS</p>
    </li>
</ul> 
```

或者一张桌子：

```
<table>
    <tbody>
        <tr>
            <th>OS</th>
            <td>iOS</td>
        </tr>
    </tbody>
</table> 
```

还是**定义列表**( `dl`) 最准确？

就我个人而言，我会选择一个列表，但我不确定如何在`<li>`-tags 中以语义正确的方式包装内容。

我读过一篇关于它的有趣文章[“定义列表与表格”](http://snook.ca/archives/html_and_css/definition-lists-v-tables)，但我仍然不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T16:13:34.023

从 HTML5 开始，a`dl`绝对是语义上最合适的：http: [//html5doctor.com/the-dl-element/](http://html5doctor.com/the-dl-element/)。

除非您计划以表格的方式列出数据/行的多个实例，否则表格根本没有意义。

出于响应式设计等原因，我通常更喜欢列表而不是表格，但作为经验法则，除非您正在处理概念上是矩阵视图而不是单个记录的详细信息或其他单个键/值集的东西属性很难证明表格的合理性（无论如何在这种情况下它`dl`是完全匹配的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:06:24.483

我会用桌子。您正在尝试组织键值对，我认为以表格格式比列表更容易传达。如果你没有包含键名，我会使用列表，即如果你省略了操作系统、版本和大小。**

# image - 滥用图片上传和调整大小功能

> ID：12883949
> 
> 赞同：0
> 
> 时间：2012-10-14T16:01:43.390
> 
> 标签：image, resize

我担心允许人们将图像上传到我的服务器。我将运行一个网站，允许用户上传图片，然后调整大小并保存在服务器上。

但是，这里存在滥用的可能性，因为如果有人想编写一个脚本来不断轰炸我的服务器，那么我不仅会在我的服务器上留下大量图像，而且服务器会因所有调整大小而变得超载操作。

这是我正在考虑的一个过程：

1.  图像被上传到“tmp”位置
2.  付款成功后，图像会被调整大小并从“tmp”移动到图像文件夹
3.  每天晚上清理“tmp”文件夹

这是偏执狂，过于复杂，还是实际上完全合理？任何反馈都会被察觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:06:44.763

为什么不只包含一个 Captcha 或 Captcha-Like 功能。由于脚本无法读取图像，因此只有人类才能完成验证码。

检查这些：

*   [http://www.captcha.net/](http://www.captcha.net/)
*   [http://webcheatsheet.com/php/create_captcha_protection.php](http://webcheatsheet.com/php/create_captcha_protection.php)

# php - 检查变量是否为浮点数，最多 2 位小数

> ID：12883953
> 
> 赞同：0
> 
> 时间：2012-10-14T16:02:10.807
> 
> 标签：php, floating-point, money-format

我在脚本中有用户输入 -`$_POST['money']`我想确认它实际上是小数点后 2 位的浮点数。

我的计划是，在这种情况下，如果输入非数字`$money = (float)@$_POST['money']`，它将设置为零。`$money`但是当用户输入 5.234 之类的东西时可能会发生这种情况，在这种情况下，我也希望将钱设置为零。

我不想做一些棘手的事情`explode`或类似的事情，我希望有一种有效的方法来做到这一点。

整数也可以，因为它是有效数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:07:47.377

在这里检查：

[http://php.net/manual/ro/function.is-float.php](http://php.net/manual/ro/function.is-float.php)

和这里

[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

或使用此功能

```
function is_deccount($number,$decimal=2){
    $m_factor=pow(10,$decimal);
    if((int)($number*$m_factor)==$number*$m_factor)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:56:50.433

我选择使用此代码：

```
$money = (float)(@$_POST['money'] / 0.01) <> (int)(@$_POST['money'] / 0.01) ? 0 : (float)@$_POST['money']; 
```

如果您有更好的解决方案，请发布。

# css - 如何在不扩展单元格宽度的情况下使表格单元格内容可见？

> ID：12883954
> 
> 赞同：-2
> 
> 时间：2012-10-14T16:02:17.670
> 
> 标签：css, html

我想在下面的屏幕截图中实现可见的效果，即表格单元格的内容（带有 Michal Aniol 的蓝色单元格......）应该完全可见，但单元格的宽度应该保持不变。

我怎么做？

我对需要大量使用 javascript 作为应用程序的其余部分的解决方案持开放态度，并且表本身也将由 dojo 生成。

colspan > 1 不是一个选项，因为它在其他情况下不起作用。我真的想只使用单个单元格，因为这将有助于我使用其他功能。

[截图 http://uppix.net/4/d/9/8cfc6aba556405f910871598afa10.png](http://uppix.net/4/d/9/8cfc6aba556405f910871598afa10.png)

标记和 css：[http :](http://pastebin.com/waXWDf4J) [//jsfiddle.net/sGkpq/style.less](http://jsfiddle.net/sGkpq/) http://pastebin.com/waXWDf4J

为了让我的问题自成一体，以防链接如@Sparky672 指出的那样消失：

我想要具有相同大小的表格单元格，如果单元格中的内容大于单元格本身，则内容仍应显示并流向下一个单元格。因此，如果单元格中的文本比单元格长，那么它应该溢出到覆盖其内容的下一个单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:15:57.603

只需`overflow-x: hidden`从`table.reservation-table td`. 文本将继续超过单元格的末尾。

当然，如果您希望它在名称长于其后面的单元格时工作（例如，Michal 只预订了一天），那会更复杂，但可能是可行的。

# java - 强制调用paintComponent

> ID：12883955
> 
> 赞同：1
> 
> 时间：2012-10-14T16:02:27.187
> 
> 标签：java, user-interface, awt

我意识到这段代码看起来毫无意义，我刚刚摆脱了不相关的东西来显示结构

```
class Drawer extends JComponent {
  public Drawer(int[] data) {

    System.out.println("drawer");

    for(int x = 0; x < data.length; x++){}
      //work out what to draw
    repaint();
  }

  public void paintComponent(Graphics g) {
    super.paintComponent(g);     
    System.out.println("drawerpC"); //check to see if it is called
    //draw stuff
  }  
} 
```

在单独的文件中，`Drawer`定期调用 的新实例。每次调用`data`都是不同的，所以每次`Drawer`调用都`paintComponent`需要调用。

我在另一个文件中有这段代码：

```
Drawer d = new Drawer(data);
myGUI.con.add(d); //myGUI.con is a previously set up container 
```

`repaint()`不会导致`paintComponent`被调用（否则你会看到标准输出），那么我如何强制`paintComponent`每次调用都被调用`Drawer`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:09:29.817

在组件成为显示层次结构的一部分之前，调用`repaint`将无效。当构造函数仍在执行时，它不可能是层次结构的一部分。

一种选择是将 a 添加[`HierarchyListener`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/HierarchyListener.html)到显示层次结构的根并在那里进行重绘。但是，我还不清楚您要完成什么，这可能不是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T16:19:56.950

将 存储`int[]`为类属性。搬入。`//work out what to draw`_`paintComponent(Graphics)`

# java - 可扩展阵列

> ID：12883956
> 
> 赞同：-2
> 
> 时间：2012-10-14T16:02:32.890
> 
> 标签：java

我想创建一个可扩展的数组。每当您尝试将另一个元素添加到当前数组中并且它已满时，它应该将当前数组中的每个元素复制到新数组中（包括您要添加的新元素），然后删除旧数组。谁能给我一些关于如何做到这一点的指示？

**编辑：** 注意：我不能为此使用数组列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T16:12:16.507

如果您不能使用 ArrayList，那么您将不得不编写自己的类，该类基本上与 ArrayList 做同样的事情。

您的类将需要保存对数组的引用，以及一个表示已放入多少值的整数（因为它可能小于数组的当前大小）。

当一个元素被添加到数组中时，检查该整数与数组的当前大小。如果它小于数组的大小，则意味着还有空间容纳另一个元素，所以只需将新值放入数组中，使用整数作为索引，然后在整数上加一。如果整数等于或大于数组的大小，则意味着您需要一个更大的数组，您必须编写代码来创建一个新数组并将所有值复制到其中。

当您创建一个更大的数组时，您可能希望使其足够大以容纳多个附加值，这样您就不必在*每次*添加新元素时都创建新数组（并复制大量值） . 一种常见的技术是使新数组大小为旧数组的某个百分比，例如 150%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:18:19.747

此代码未经测试，但它应该为您提供一个起点，让您了解应该做什么。我只在 Integer 上实现，但我相信你可以进一步扩展它。

```
public class ExtendableArray {

    private Integer[] arr;

    public ExtendableArray(int capacity) {
        arr = new Integer[capacity];
    }

    public void add(Integer item) {
        if (getLastIndex() == arr.length) {
            generateBiggerArray();
            return;
        }
        for (int i = 0; i < arr.length; i++) {
            if (arr[i] == null) {
                arr[i] = item;
                break;
            }
        }
    }

    private void generateBiggerArray() {
        int currentCapacity = arr.length;
        Integer[] tempArr = new Integer[currentCapacity + 4];
        for(int i = 0; i < arr.length; i++) {
            tempArr[i] = arr[i];
        }
        this.arr = tempArr;
    }

    private int getLastIndex() {
        for (int i = 0; i < arr.length; i++) {
            if (arr[i] == null)
                return i;
        }
        return arr.length;
    }
} 
```

顺便说一句-此代码中有很多地方可以改进（效率等）。我鼓励您尝试。这是一个很好的练习:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T16:04:35.103

您应该使用 ArrayList。请参阅本[教程](http://www.dreamincode.net/forums/topic/58935-arraylist-vs-static-arrays/)。

如果您不能从您的编辑中使用数组列表，那么您需要循环数组并根据当前数组的长度将每个元素移动到更大的数组中。

一个简单的谷歌搜索应该可以回答这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T16:05:35.807

使用 [ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)检查 javadoc，我认为这是你要找的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T16:06:13.393

我建议您查看 ArrayList 类的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T16:10:05.750

正如其他人建议的那样，尽可能使用 ArrayList。但是如果由于某种原因你不能（我猜是作业？），那么看看[System.arraycopy](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)来有效地复制数组。

# c - 从C中的字符串中剪切子字符串

> ID：12883958
> 
> 赞同：0
> 
> 时间：2012-10-14T16:02:46.050
> 
> 标签：c, string

我有一个字符串（例如`"one two three four"`）。我知道我需要剪切从符号开始的`4th`单词`6th`。我怎样才能做到这一点？

结果应该是：

```
Cut string is "two"
Result string is "one three four" 
```

现在我实现了，我可以得到删除的单词 - '

```
for(i = 0; i < stringLength; ++i) { 
          if((i>=wordStart) && (i<=wordEnd))
          {
              deletedWord[j] = sentence[i];
              deletedWord[j+1] = '\0';
              j++;                
          }
    } 
```

但是当我填充时，`sentence[i] = '\0'`我在中间切线时遇到了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:06:49.163

不要放在`'\0'`字符串的中间（实际上终止字符串），*而是*将除单词之外的所有内容复制到临时字符串，然后将临时字符串复制回原始字符串并覆盖它。

```
char temp[64] = { '\0' };  /* Adjust the length as needed */

memcpy(temp, sentence, wordStart);
memcpy(temp + wordStart, sentence + wordEnd, stringLength - wordEnd);
strcpy(sentence, temp); 
```

**编辑：**使用`memmove`（如建议的那样）您实际上只需要一个电话：

```
/* +1 at end to copy the terminating '\0' */
memmove(sentence + wordStart, sentence + wordEnd, stringLengt - wordEnd + 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T16:11:08.700

当您将字符设置为 '\0' 时，您将终止字符串。

您想要做的是使用所需数据创建一个全新的字符串，或者，如果您确切知道字符串的来源以及以后如何使用它，则用字符串的其余部分覆盖剪切的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T16:28:25.563

```
/*sample initialization*/
char sentence[100] = "one two three four";

char deleted_word[100];
char cut_offset = 4;
int cut_len = 3;

/* actual code */
if ( cut_offset < strlen(sentence) && cut_offset + cut_len <= strlen(sentence) )
{
    strncpy( deleted_word, sentence+cut_offset, cut_len);
    deleted_word[cut_len]=0;

    strcpy( sentence + cut_offset, sentence + cut_offset + cut_len);
} 
```

# hibernate - 2个引用字段上的JPA主键

> ID：12883959
> 
> 赞同：0
> 
> 时间：2012-10-14T16:02:59.450
> 
> 标签：hibernate, jpa

好的，我已经尝试了所有方法，但无法使其正常工作：

我有下表：

*   user_id int ，引用 users.id
*   platform_id int ，引用platforms.id
*   字段1
*   字段2
*   ...

我的主键（在数据库中和逻辑上）是 和 的`user_id`组合`platform_id`。

我想创建一个复合键，它将 User 和 Platform 类作为成员（就像我对常规 OneToOne 或 OneToMany 关系所做的那样）。

我希望复合键具有实际的类引用，而不仅仅是 ids（当我需要实际引用进行某些计算时对我来说更容易）。

此外，我需要 User 类与此 UserPlatformData 类具有 OneToMany 关系。

我能够使用 User 和 Platform 创建一个 Embeddable 类，但即使 pk 相同（导致`duplicate entry for key primary...`），JPA 也总是会插入并且永远不会更新现有记录。

如何创建一个主键包含两个其他引用（不是原语）的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:40:38.410

1.  使用@IdClass 注释和两个@Id 注释声明您的实体。id 字段类型有两个选项：
    （i）基本类型：匹配 DB 列或
    （ii）非基本类型：通过 FK 引用为 @ManyToOne 的实体对象，允许 FK 关系成为 PK 的一部分。你说过你想要第二种情况：

    > ```
    >  @Entity   
    >   @IdClass(UserPlatformId.class)       
    >   public class UserPlatform {  
    > 
    >        @Id 
    >        @ManyToOne
    >        User user;
    >        @Id
    >        @ManyToOne
    >        Platform platform; 
    > ```

    ```
     // ...

     } 
    ```

2.  声明一个 javabean id 类来描述复合 PK 字段。

    *   这里的字段类型必须是基本类型，匹配底层DB列，基本类型与User类的@Id字段和Platform类的@Id字段相同。这里始终使用基本类型，即使您对实体 @Id 字段（上面的 ii）使用了非基本类型。
    *   Id Class 中的字段名称必须与实体中的字段名称匹配。@IdClass 因此充当从实体中的非基本类型到数据库中的基本类型的映射形式：

> ```
> public class UserPlatformId { 
> ```

```
 int user;   
      int platform;

      public UserPlatformId();
      public UserPlatformId(int userId, int platformId) { 
            this.user=userId; this.platform=platformId; }

      public int getUser() { // ...};
      public int getPlatform() { // ...};
} 
```

您可以省略 setter 方法，而是有一个额外的构造函数来预先设置字段。一旦创建，Id 应该是不可变的。

好去=:-)

# qt - 在 QScrollArea 内动态创建和显示一组按钮

> ID：12883962
> 
> 赞同：0
> 
> 时间：2012-10-14T16:03:11.727
> 
> 标签：qt, user-interface

我的目标是在单击按钮时动态创建一组命令链接按钮，然后将它们全部显示在 QscrollArea 内的垂直布局中。我从数据库中获取按钮的数据。为此，我为按钮创建了一个插槽，并在插槽函数中编写了以下代码。

```
QCommandLinkButton *slotButtons[10];
for(int i=0; slotQuery.next(); i++)
{
    slotButtons[i] = new QCommandLinkButton;
    slotButtons[i]->setText(slotQuery.value(0).toString());
    slotButtons[i]->setDescription(slotQuery.value(1).toString());

    ui->scrollAreaSlots->layout()->addWidget(slotButtons[i]);
    ui->scrollAreaSlots->show();
    slotButtons[i]->show();

} 
```

这编译没有错误，但按钮不可见，即使在调用 show 之后也是如此。谁能告诉我哪里出错了？

更新：如果我删除所有“[i]”并评论循环；基本上只创建一个命令链接按钮，它工作得很好。但它不适用于循环。我的循环一切正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:54:42.537

QScrollArea 有一个可以包含其他小部件的子小部件。

当使用 Qt Creator 的 UI 设计器创建 QScrollArea 小部件时，Qt Creator 会自动创建一个名为 scrollAreaWidgetContents 的小部件。然后将按钮添加到该小部件的布局中，该布局不是自动创建的。布局是在以下代码中创建的，其中还添加了按钮：

```
QCommandLinkButton *slotButtons[10];
QVBoxLayout* layout = new QVBoxLayout(ui->scrollAreaWidgetContents);
for(int i=0; slotQuery.next(); i++)
{
    slotButtons[i] = new QCommandLinkButton;
    slotButtons[i]->setText(slotQuery.value(0).toString());
    slotButtons[i]->setDescription(slotQuery.value(1).toString());
    ui->scrollAreaWidgetContents->layout()->addWidget(slotButtons[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:47:41.733

尝试添加以下行（在将按钮添加到滚动区域之前）

```
slotButtons[i]->setVisible(true); 
```

这应该确保按钮本身在您将其添加到 scrool 区域时可见。

# android - android 应用程序在尝试将输入流转换为字符串时崩溃

> ID：12883965
> 
> 赞同：0
> 
> 时间：2012-10-14T16:03:25.683
> 
> 标签：android, string, inputstream, httpconnection

在下面的代码中，我试图对我在 localhost 上编码和托管的 web 服务执行 GET 操作。OpenHttpConnection 方法工作得很好，因为我在中间放了祝酒词来检查那里是否有错误。当我尝试使用 bufferreader 将输入流转换为字符串时，应用程序崩溃。请看一下，看看你是否能发现错误。

谢谢 ：）

```
public class ServicetestActivity extends Activity {

public static String iStream_to_String(InputStream is1)
{
     BufferedReader rd = new BufferedReader(new InputStreamReader(is1));
     String line;
     StringBuilder sb =  new StringBuilder();
     try {
        while ((line = rd.readLine()) != null) {
                sb.append(line);
         }
         rd.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     String contentOfMyInputStream = sb.toString();
     return contentOfMyInputStream;
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    InputStream is=null;
    try {
         is=OpenHttpConnection("http://localhost/webservice.php?device=ayaz");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String line= iStream_to_String(is);
    Toast.makeText(this, line, Toast.LENGTH_LONG).show(); 
}

    private InputStream OpenHttpConnection(String link) throws IOException {
        // TODO Auto-generated method stub
        InputStream inputStream = null;
        int response = -1;
        Toast.makeText(this, "1", Toast.LENGTH_SHORT).show();
        URL url = new URL(link);
        URLConnection connection = url.openConnection();
        Toast.makeText(this, "2", Toast.LENGTH_SHORT).show();
        if (!(connection instanceof HttpURLConnection))
          throw new IOException("Not a HTTP connection");
        try {
            HttpURLConnection httpURLConnection = (HttpURLConnection) connection;
            Toast.makeText(this, "3", Toast.LENGTH_SHORT).show();
            httpURLConnection.setAllowUserInteraction(false);
            Toast.makeText(this, "4", Toast.LENGTH_SHORT).show();
            httpURLConnection.setInstanceFollowRedirects(true);
            httpURLConnection.setRequestMethod("GET");
            httpURLConnection.connect();
            response = httpURLConnection.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) {
                inputStream = httpURLConnection.getInputStream();
            }

        } catch (Exception e) {
            // TODO: handle exception
            throw new IOException("Error connecting");
        }
        return inputStream;}

// see http://androidsnippets.com/executing-a-http-get-request-with-httpclient 
```

}

日志猫也如下：

```
10-14 20:54:13.660: E/AndroidRuntime(1348): FATAL EXCEPTION: main
10-14 20:54:13.660: E/AndroidRuntime(1348): java.lang.RuntimeException: Unable to start activity ComponentInfo{web.service/web.service.ServicetestActivity}: java.lang.NullPointerException
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.os.Looper.loop(Looper.java:130)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at java.lang.reflect.Method.invokeNative(Native Method)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at java.lang.reflect.Method.invoke(Method.java:507)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at dalvik.system.NativeStart.main(Native Method)
10-14 20:54:13.660: E/AndroidRuntime(1348): Caused by: java.lang.NullPointerException
10-14 20:54:13.660: E/AndroidRuntime(1348):     at java.io.Reader.<init>(Reader.java:65)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at java.io.InputStreamReader.<init>(InputStreamReader.java:122)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at java.io.InputStreamReader.<init>(InputStreamReader.java:59)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at web.service.ServicetestActivity.iStream_to_String(ServicetestActivity.java:31)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at web.service.ServicetestActivity.onCreate(ServicetestActivity.java:65)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-14 20:54:13.660: E/AndroidRuntime(1348):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-14 20:54:13.660: E/AndroidRuntime(1348):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:36:55.620

这可能会对您有所帮助。

```
 try {
             BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
             StringBuilder sb = new StringBuilder();
             String line = null;
             while ((line = reader.readLine()) != null) 
             {
               sb.append(line + "\n");
             }
             is.close();

            return result;
         }catch (Exception e) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:42:27.020

日志显示信息如下：

```
FATAL EXCEPTION: main 10-14 20:54:13.660:E/AndroidRuntime(1348):java.lang.RuntimeException: 
Unable to start activity ComponentInfo{web.service/web.service.ServicetestActivity}:
java.lang.NullPointerException 10-14 20:54:13.660: E/AndroidRuntime(1348): 
```

进而：

```
 Caused by: java.lang.NullPointerException 10-14 20:54:13.660: 
 E/AndroidRuntime(1348): at java.io.Reader.(Reader.java:65) 10-14 20:54:13.660:
 E/AndroidRuntime(1348): at java.io.InputStreamReader.(InputStreamReader.java:122) 
 10-14 20:54:13.660: E/AndroidRuntime(1348): at java.io.InputStreamReader. 
 (InputStreamReader.java:59) 10-14 20:54:13.660: E/AndroidRuntime(1348): 
 at web.service.ServicetestActivity.iStream_to_String(ServicetestActivity.java:31) 
 10-14 20:54:13.660: E/AndroidRuntime(1348): 
 at web.service.ServicetestActivity.onCreate(ServicetestActivity.java:65) 
```

表示您的应用程序在第 1 行崩溃。iStream_to_String 中的 31。所以，检查这一行没有。出了什么问题。

对于检查条件，如果出现问题，最好使用 Toast 以外的 Log，因为 Toast 不是检查错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T18:12:16.183

我的问题解决了。问题不在缓冲区阅读器中，但我的连接被拒绝。连接被拒绝，因为我传递的链接指向 localhost（我的机器）。但实际上 Android 将 localhost 作为模拟器本身，并且由于没有托管服务器，它一直拒绝连接。解决方案是我使用我机器的 ip 而不是 localhost 所以它会是[http://xxxx/](http://x.x.x.x/) ......

# windows - 有没有办法替换默认的 Windows OpenGL 软件渲染器？

> ID：12883971
> 
> 赞同：1
> 
> 时间：2012-10-14T16:04:01.413
> 
> 标签：windows, opengl

当 Windows 上的 OpenGL 应用程序在 VM 或远程桌面上运行时，它通常会恢复为 Microsoft 的 OpenGL 实现。有没有一种方法可以让它无缝地恢复到另一个软件渲染器（即 MESA）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:34:18.163

不，没有。如果要使用 MESA，则必须实际使用 MESA。

你可以做的最接近的事情是使用 DLL 注入来创建你自己的 opengl32.dll 并将它放在真实的和你的应用程序之间。您可以根据需要将任何 API 调用集中到常规调用或 MESA 调用。

# php - 在 codeIgniter 中包含来自外部脚本的控制器文件

> ID：12883972
> 
> 赞同：0
> 
> 时间：2012-10-14T16:04:29.083
> 
> 标签：php, codeigniter, uploadify

我有以下目录结构。

```
application
| 
| -----> controller
            |
            | ------> profie_control.php
assets
|
| ------> Others 
             |
             |---> uploadify 
                     |
                     | --> uploadify.php 
```

现在`uploadify.php`我正在做所有我想要执行的事情。然后在一切完成后我想调用一个函数并将数据传递给它。`profile_control.php`现在我不知道如何访问这些函数。我尝试使用以下代码

```
include_once("http://localhost/php/ci/index.php/profile_control/myfunction"); 
```

在`uploadify.php`但它给了我以下错误

```
Warning: include_once() [function.include-once]: http:// wrapper is disabled in the server configuration by allow_url_include=0 in C:\wamp\www\php\ci\assets\Others\uploadify\uploadify.php on line 8 
```

而且我在一些论坛上读到这种方法不好，因为它会导致安全问题。现在我如何安全地发送数据`uploadify.php`或者`profile_control.php`什么是更好的选择？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:11:49.073

您不能通过 URL 包含/要求，但您可以通过路径包含/要求，这就是您想要做的。在您的控制器中：

```
include_once("../../assets/Others/uploadify/uploadify.php");
some_func(); // function from file 'uploadify.php' 
```

# ios - 在 iOS 中使用 JSON 数据

> ID：12883975
> 
> 赞同：0
> 
> 时间：2012-10-14T16:04:51.760
> 
> 标签：ios, json, nsurlconnection, grand-central-dispatch, nsjsonserialization

我对在 iOS 中使用 JSON 感到困惑。我正在尝试使用`NSJSONSerialization`.

我从 Ray Wenderlich 那里找到了一个教程，讨论了使用异步调度[在 iOS5 上使用 JSON 。](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

但在我发现的一些教程中，他们使用的是`NSURLConnection`.

不要踢我，因为我真的是这里的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:17:51.927

迄今为止我见过的最好的一个： [http ://www.youtube.com/watch?v=jh0bHASUnvY](http://www.youtube.com/watch?v=jh0bHASUnvY)

# android - 从另一个 android 应用程序清理 sqlite 数据库

> ID：12883977
> 
> 赞同：0
> 
> 时间：2012-10-14T16:04:59.857
> 
> 标签：android, database, sqlite

我开发了一个适用于 sqlite 内部数据库的 Android 应用程序。现在我想创建一个新的 android 应用程序来清理我的第一个应用程序的数据库。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:01:28.787

让第二个应用程序发送一个意图广播，接收到广播后，让第一个应用程序可以清除数据。但是任何应用程序都无法清除另一个应用程序的数据，即使可以，也不是优雅的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:35:10.297

我相信如果您修改两个应用程序的清单以使它们共享相同的数据目录，您就可以做到。

将该属性添加`android:sharedUserId`到每个应用的清单中。

```
android:sharedUserId="your.shared.id" 
```

如果它们相同并且您使用相同的密钥和别名对它们进行签名，则每个应用程序都可以使用/访问其他私有目录。

# c - 跨 adhoc 网络的 C 程序之间的通信

> ID：12883979
> 
> 赞同：0
> 
> 时间：2012-10-14T16:05:03.140
> 
> 标签：c, sockets, network-programming, multicast, multicastsocket

我有以下服务器代码

```
 #include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <time.h>
#include <string.h>
#include <stdio.h>

#define HELLO_PORT 12345
#define HELLO_GROUP "255.0.0.37"

main(int argc, char *argv[])
{
    struct sockaddr_in addr;
        struct sockaddr_in client,server;
        int s,n;
        char index;
    int f; 
        char b1[100];
        int fd, cnt,i=0;;
        struct ip_mreq mreq;
        //char *message="Hello, World!";
    char *message=NULL;
        /* create what looks like an ordinary UDP socket */
        if ((fd=socket(AF_INET,SOCK_DGRAM,0)) < 0) 
    {
        perror("socket");
        exit(1);
        }
        s=socket(AF_INET,SOCK_DGRAM,0);
        server.sin_family=AF_INET;
        server.sin_port=2000;
        server.sin_addr.s_addr=inet_addr("10.42.0.47");
        bind(s,(struct sockaddr *)&server,sizeof(server));
        printf("\nServer ready,waiting for client....\n");
        n=sizeof(client);
        /* set up destination address */
        memset(&addr,0,sizeof(addr));
        addr.sin_family=AF_INET;
        addr.sin_addr.s_addr=inet_addr(HELLO_GROUP);
        addr.sin_port=htons(HELLO_PORT);

        /* now just sendto() our destination! */
        while (1) 
        {
        recvfrom(s,b1,sizeof(b1),0,(struct sockaddr *) &client,&n);
        printf("client : %s\n",b1);
        //sleep(5);
        index=b1[0];
        f=b1[0];
        //printf("b1[1] is %c\n",index);
        //printf("b1[0] is %c\n",f);
        f=32;
        b1[0]=f;
        //printf("new b1[0] is %c\n",b1[0]);
        //printf("%s\n",b1);
        if(index!='C')
        {
            if (sendto(fd,b1,sizeof(b1),0,(struct sockaddr *) &addr,sizeof(addr)) < 0)
            {
                    perror("sendto");
                    exit(1);
            }
            //i++;
            /*if(i>=4)
            {
                i=0;
            }*/
            sleep(1);
        }
        }
} 
```

以及在不同系统上运行的以下客户端代码

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <time.h>
#include <string.h>
#include <stdio.h>
#include <stdio.h> 
#include <mysql.h>

#define HELLO_PORT 12345
#define HELLO_GROUP "225.0.0.37"
#define MSGBUFSIZE 1024

main(int argc, char *argv[])
{
    MYSQL mysql; 
    MYSQL_ROW row; 
    MYSQL_RES *result; 
        unsigned int num_fields; 
    unsigned int i; 
    mysql_init(&mysql); 
        struct sockaddr_in server;
        int s,n;
    char b1[100],b2[100],a[100];
    char re[100]={0};
    char g=" ";
    printf("%c\n",re);
    strcpy(b2,"1");
    char message[20],ch='n';
        struct sockaddr_in addr;
        int fd, nbytes,addrlen,j=0;
        struct ip_mreq mreq;
        char msgbuf[MSGBUFSIZE];
        u_int yes=1;            /*** MODIFICATION TO ORIGINAL */

     /* create what looks like an ordinary UDP socket */
        if ((fd=socket(AF_INET,SOCK_DGRAM,0)) < 0) 
    {
        perror("socket");
        exit(1);
        }
    s=socket(AF_INET,SOCK_DGRAM,0);
        server.sin_family=AF_INET;
        server.sin_port=2000;
        server.sin_addr.s_addr=inet_addr("10.42.0.1");
        printf("\nClient ready....\n");
        n=sizeof(server);

    if (!mysql_real_connect(&mysql,"localhost","root","nidhi","project",0,NULL,0)) 
    {    
            fprintf(stderr, "Failed to connect to database: Error: %s\n", 
            mysql_error(&mysql)); 
    } 
    /**** MODIFICATION TO ORIGINAL */
        /* allow multiple sockets to use the same PORT number */
        if (setsockopt(fd,SOL_SOCKET,SO_REUSEADDR,&yes,sizeof(yes)) < 0) 
    {
            perror("Reusing ADDR failed");
            exit(1);
        }
    /*** END OF MODIFICATION TO ORIGINAL */
        /* set up destination address */
        memset(&addr,0,sizeof(addr));
        addr.sin_family=AF_INET;
        addr.sin_addr.s_addr=htonl(INADDR_ANY); /* N.B.: differs from sender */
        addr.sin_port=htons(HELLO_PORT);  
        /* bind to receive address */
        if (bind(fd,(struct sockaddr *) &addr,sizeof(addr)) < 0) 
    {
        perror("bind");
        exit(1);
        }

        /* use setsockopt() to request that the kernel join a multicast group */
        mreq.imr_multiaddr.s_addr=inet_addr(HELLO_GROUP);
        mreq.imr_interface.s_addr=htonl(INADDR_ANY);
        if (setsockopt(fd,IPPROTO_IP,IP_ADD_MEMBERSHIP,&mreq,sizeof(mreq)) < 0) 
    {
        perror("setsockopt");
        exit(1);
        }

        /* now just enter a read-print loop */
        while (1) 
    {
        /*if ((nbytes=recvfrom(fd,msgbuf,MSGBUFSIZE,0,(struct sockaddr *) &addr,&addrlen)) < 0) 
        {
                perror("recvfrom");
                exit(1);
        }
        printf("the server says: %s\n",msgbuf);*/
        printf("would you like to send?(y/n)\n");
        scanf("%c",&ch);
        fflush(stdin);
        if(ch=='y')
        {
        printf("\nClient:");
            gets(a);
        printf("%c\n",a);
        strcat(b2,a);
        printf("%s\n",b2);
            sendto(s,b2,sizeof(b2),0,(struct sockaddr *) &server,n);
        b2[100]=NULL;
        strcpy(b2,"1");
        }
        addrlen=sizeof(addr);
        if ((nbytes=recvfrom(fd,msgbuf,MSGBUFSIZE,0,(struct sockaddr *) &addr,&addrlen)) < 0) 
        {
                perror("recvfrom");
                exit(1);
        }
        printf("the server says: %s\n",msgbuf);
        if(mysql_query(&mysql,msgbuf));
        else
        {
            strcpy(re,"Client 1: ");
            sendto(s,re,sizeof(re),0,(struct sockaddr *) &server,n);
            //printf("inside else case\n");
            result=mysql_store_result(&mysql);
            //printf("\n after getting the result...\n");
            num_fields = mysql_num_fields(result); 
            //printf("\n after getting numfields...\n");
                while ((row = mysql_fetch_row(result))) 
                {    
                        unsigned long *lengths; 
                //printf("\n inside while....\n");
                        lengths = mysql_fetch_lengths(result); 
                        for(i = 0; i < num_fields; i++) 
                        { 
                                printf("[%.*s] \t", (int) lengths[i], row[i] ? row[i] : "NULL"); 
                    strcat(re,row[i]);
                    j++;
                    //printf("%d\n",j);
                    if(j==4)
                    {
                        //printf("the result is .....%s\n",re);
                        sendto(s,re,sizeof(re),0,(struct sockaddr *) &server,n);
                        memset(re,0,100);
                        strcpy(re,"Client 1: ");
                        j=0;
                    }

                        }    
                        printf("\n"); 
                } 
            } 
    }
} 
```

我创建了一个 adhoc 网络，它为服务器和客户端分配了两个 IP 地址。10.42.0.1/24 到服务器，10.42.0.47/24 到客户端

但是，从客户端到服务器的单播操作无法正常运行，从服务器到客户端的多播也无法正常运行。

其次，我如何确定两个程序是否属于同一个多播组。客户端上的错误是

> setsockopt：无效的参数

或者

> setsockopt：没有这样的设备

非常感谢您对此的任何帮助..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:08:02.067

您的代码中有很多潜在的错误：

服务器：

1.您没有检查“s”套接字是否已成功创建。但是，您的示例将在没有它的情况下工作，因为有足够的内存用于创建套接字。

2.您没有检查 bind() 的返回码，可能您无法将套接字绑定到端口，这就是您收到“无效参数”错误的原因

3.您没有检查 recvfrom() 的返回码 ....

4.IP 255.0.0.37 是留作以后使用的，我不确定它是否有效，为什么不使用一个有效的IP范围呢？

5.对于多播，您必须使用范围内的 IP 地址：224.0.0.0/4，而不是 10.0.0.0/8，因为它是为本地网络保留的。

对于客户端，您应该首先制作有效的 udp 协议代码，然后将 mysql 添加到其中。您还必须告诉我们您在哪一行出错，否则很难分析问题。

# nginx - 在 Ubuntu 12.04 上为 Rails 3.2.8 环境设置 Nginx 和 Passenger

> ID：12883980
> 
> 赞同：3
> 
> 时间：2012-10-14T16:05:03.907
> 
> 标签：nginx, ruby-on-rails-3.2, passenger

我是 Rails 的新手，喜欢这种语言和开发环境。但是，在不使用 PostgreSQL 和/或 Heroku 的情况下，尝试将新应用程序推送到生产环境时，我感到非常沮丧。

出于工作相关的原因，我们使用带有 MySQL 作为数据库的机架空间云服务器。

我对设置乘客和 Nginx 感到沮丧。我已经按照 Ryan 的 Railscasts[部署到 vps](http://railscasts.com/episodes/335-deploying-to-a-vps)和[本](http://excid3.com/blog/setting-up-rails-on-ubuntu-12-10-quantal-quetzal-with-ruby-node-js-nginx-passenger-and-mysql-or-postgres/)教程。

我可以在服务器上安装 ruby​​、mysql、passenger、Nginx、依赖项和 rails。但是当我尝试启动 Nginx 时，什么也没有发生。当我说什么都没有发生时，我的意思是我没有任何迹象表明它正在运行。我将浏览器指向该 IP 地址，并在浏览器中收到标准错误“此网页不可用”错误。我查看了错误日志，它是空白的。我还没有部署我的应用程序......只是想看看 Nginx 的默认屏幕。

有任何想法吗？我猜我在配置 Nginx 时缺少一个关键步骤，我只是不知道它是什么。

我的访问日志

```
.0.0.1 - - [14/Oct/2012:10:40:03 -0500] "GET / HTTP/1.1" 200 151 "-" "Wget/1.13.4 (linux-gnu)"
127.0.0.1 - - [14/Oct/2012:10:45:03 -0500] "GET / HTTP/1.1" 200 151 "-" "Wget/1.13.4 (linux-gnu)"
127.0.0.1 - - [14/Oct/2012:10:50:03 -0500] "GET / HTTP/1.1" 200 151 "-" "Wget/1.13.4 (linux-gnu)"
127.0.0.1 - - [14/Oct/2012:10:55:03 -0500] "GET / HTTP/1.1" 200 151 "-" "Wget/1.13.4 (linux-gnu)"
127.0.0.1 - - [14/Oct/2012:11:00:03 -0500] "GET / HTTP/1.1" 200 151 "-" "Wget/1.13.4 (linux-gnu)" 
```

我的 Nginx.conf 文件

```
user deployer staff;
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    passenger_root /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.17;
    passenger_ruby /usr/local/bin/ruby;

    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    server {
        listen       80;
        server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   html;
            index  index.html index.htm;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:12:07.107

从我的博客文章中，这几乎是关于这个确切设置[http://blog.nikoroberts.com/post/45834702235/setting-up-a-rails-32-server-in-the-rackspace](http://blog.nikoroberts.com/post/45834702235/setting-up-a-rails-32-server-in-the-rackspace)

你至少错过了 `passenger_enabled on;`

我的 nginx.conf

```
worker_processes  4;

events {
  worker_connections  1024;
}

http {
  passenger_root /home/deployer/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17;
  passenger_ruby /home/deployer/.rvm/wrappers/ruby-1.9.3-p194/ruby;

  include       mime.types;
  default_type  application/octet-stream;

  sendfile        on;

  keepalive_timeout  65;

  client_max_body_size 5M;

  gzip  on;
  gzip_http_version 1.1;
  gzip_comp_level 1;
  gzip_disable "MSIE [1-6]\.(?!.*SV1)";
  gzip_proxied any;
  gzip_vary on;
  gzip_min_length 500;
  gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
  passenger_default_user deployer;
  #fast passenger respawn
  passenger_pool_idle_time 1000;

  server {
    listen 80;
    charset utf-8;
    server_name localhost;
    root /var/www/contactguru/current/public;
    passenger_enabled on;
    rails_env production;

    # fast passenger and rails respawn
    # from http://stackoverflow.com/a/2329221
    rails_spawn_method smart;
    rails_app_spawner_idle_time 0;
    rails_framework_spawner_idle_time 0;

    location ~ ^/(assets)/  {
      root /var/www/contactguru/current/public;
      gzip_static on;
      expires max;
      add_header Cache-Control public;
      # access_log /dev/null;
    }
  }
} 
```

# php - mysql_fetch_array() 执行无限循环

> ID：12883983
> 
> 赞同：-2
> 
> 时间：2012-10-14T16:05:28.007
> 
> 标签：php, mysql, loops

我不知道为什么，一个应该是有限的循环，比如

```
while ($noticia = mysql_fetch_array(mysql_query("SELECT * FROM noticias WHERE deletada='0' ORDER BY id ASC")))
{
    // echo $noticia['blabla'];
} 
```

正在执行无限循环，并且页面未加载...

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T16:07:09.777

它可以通过

```
 $qry = mysql_query("SELECT * FROM noticias WHERE deletada='0' ORDER BY id ASC")

  while ($noticia = mysql_fetch_array($qry ))
    {
        // echo $noticia['blabla'];
    } 
```

但`mysql_*`函数已弃用，因此请使用 pdo 或 mysqli

用pdo简单简单[这里是很简单的pdo教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

```
$pdo = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$query = $pdo->prepare("SELECT * FROM noticias WHERE deletada='0' ORDER BY id ASC");
$query->execute();
$row=$articlequery->fetch(pdo::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:11:24.543

尝试这个。

```
$query = mysql_query("SELECT * FROM noticias WHERE deletada='0' ORDER BY id ASC");
while($noticia = mysql_fetch_array($query)){
    echo $noticia['table_field'];
} 
```

# c++ - c++以向量为参数调用函数

> ID：12883984
> 
> 赞同：2
> 
> 时间：2012-10-14T16:05:33.673
> 
> 标签：c++

我有以下代码，当我尝试构建它时，我不断收到此错误：

错误：

```
1>------ Build started: Project: practice, Configuration: Debug Win32 ------
1>  pratice.cpp
1>pratice.obj : error LNK2019: unresolved external symbol "double __cdecl CalcScore(class std::vector<double,class std::allocator<double> > *)" (?CalcScore@@YANPAV?$vector@NV?$allocator@N@std@@@std@@@Z) referenced in function _main
1>C:\Users\Neil Armstrong\Desktop\practice\Debug\practice.exe : fatal error LNK1120: 1 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

代码是：

```
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

double CalcScore(double);
void points(double);
void grade(char);

int main ()
{ 

  double CalcScore(vector<double> *);
  // Declare constant
  double first_exam = 0;
  double second_exam = 0;
  double final_exam = 0;
  double aHomework = 0;
  double totalPoints = 0;
  double median = 0;
  double SUM = 0;

  // Declare a vector of doubles
  vector<double> homework;

  //  Ask the user to enter in the score for the first midterm.
  cout << "\nPlease enter in the score for the first exam: ";
  // This value is read in and saved.
  cin >> first_exam;

      // Ask the user to enter in the score for the second midterm.
  cout << "\nPlease enter in the score for the second exam: ";
      // This value is read in and saved.
  cin >> second_exam;

      // Ask the user to enter in the score for the final exam.
  cout << "\nPlease enter in the score for the final exam: ";
      // This value is read in and saved.
  cin >> final_exam;

  // Store the homework scores in a vector.
  // Uses the push_back function to add each homework score to the vector.
  // Then asks the user to enter in the scores for the homework assignments. 
      // Any number of scores can be entered in. 
  // When done, the user signals completion by pressing Ctrl-z (the Ctrl key 
      // and the letter z) followed by the Enter key.
  cout << "\nEnter the score for a homework assignment(press ctrl-z to quit): ";
  cin>>aHomework;
  while (!cin.eof()) // No Ctrl-Z
  {
     if (cin.good()) // The data entry was valid, i.e., an integer
     {
     homework.push_back(aHomework);
     }
     else
     {
     // The failbit was set, so this entry must be invalid.
     cout << "Invalid entry!" << endl;
     cin.clear(); // clear error flag
     cin.sync(); // Re-sync stream
     }
     // Get next data entry
     cout << "\nEnter the score for a homework assignment(press ctrl-z to quit): ";
     cin>>aHomework;
     }  

     median = CalcScore( &homework);
     cout << endl;
     system("PAUSE");
     return 0;
     }// End main

     double CalcScore(vector<double> homework)
     {
     double median = 0;
     const int TWO = 2;
     size_t size = homework.size();

     sort(homework.begin( ), homework.end( ) );

     if (size  % TWO == 0)
     {
     median = (homework[size / TWO - 1] + homework[size / TWO]) / TWO;
     }
     else 
     {
     median = homework[size / TWO];
     }

     return median;
   } 
```

解决此错误的任何帮助都会很棒谢谢你，尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:07:11.317

你声明了

```
double CalcScore(vector<double> *); 
```

但从未实施过。你实现了：

```
double CalcScore(vector<double> homework) 
```

此外，将函数声明/定义移到`main`.

# c# - “牵线搭桥”算法？

> ID：12883986
> 
> 赞同：3
> 
> 时间：2012-10-14T16:05:38.217
> 
> 标签：c#, algorithm, match, matching

对于一个项目，我需要计算几个团队之间的比赛计划。

要求：

*   我有几个团队
*   所有球队都必须与其他球队交手一次（而且只有一次）
*   所有球队同时比赛

例如，对于 4teams（A、B、C 和 D），我希望能够计算出这个：

**第1轮**

*   甲对乙
*   C与D

**第二轮**

*   A与D
*   乙与丙

**第三轮**

*   甲与丙
*   B 与 D

问题是，在 X 轮中有一些选择，这将使 X+1 轮中的任何比赛都无法进行（球队已经与其他球队交手）。

我想我可以使用一些回溯技术，但我正在寻找是否有这样的算法？

这将在 c# 中实现。

你知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:38:02.283

实际上答案在评论中提供的[链接](https://stackoverflow.com/users/880990/olivier-jacot-descombes)[中](https://stackoverflow.com/q/7838168/390819) 。更具体地说，[这个答案](https://stackoverflow.com/a/7848715/390819)。

它确实处理了 Round 的概念，只是它不是很明显。在该代码中，a`Tuple<string, string>`代表一场比赛（包含两个团队名称的项目），a`List<Tuple<string, string>>`代表一轮（比赛的集合）。

该代码以 a 的形式返回 Rounds 的集合`List<List<Tuple<string, string>>>`。

我稍微重构了代码，以便在代码中`Match`和的概念`Round`更加明显。

这是`Match`和`Round`类：

```
public class Match
{
    public string Team1 { get; set; }
    public string Team2 { get; set; }

    public Match(string team1, string team2)
    {
        Team1 = team1;
        Team2 = team2;
    }

    public override string ToString()
    {
        return string.Format("{0} vs {1}", Team1, Team2);
    }
}

public class Round
{
    public List<Match> Matches { get; private set; }

    public Round()
    {
        Matches = new List<Match>();
    }

    public override string ToString()
    {
        return String.Join(Environment.NewLine, Matches) + Environment.NewLine;
    }
} 
```

这里是神奇的代码（学分去[Nagg](https://stackoverflow.com/users/298088/nagg)）：

```
public static List<Round> ComputeFixtures(List<string> listTeam)
{
    var result = new List<Round>();

    var numberOfRounds = (listTeam.Count - 1);
    var numberOfMatchesInARound = listTeam.Count / 2;

    var teams = new List<string>();

    teams.AddRange(listTeam.Skip(numberOfMatchesInARound).Take(numberOfMatchesInARound));
    teams.AddRange(listTeam.Skip(1).Take(numberOfMatchesInARound - 1).ToArray().Reverse());

    var numberOfTeams = teams.Count;

    for (var roundNumber = 0; roundNumber < numberOfRounds; roundNumber++)
    {
        var round = new Round();
        var teamIdx = roundNumber % numberOfTeams;

        round.Matches.Add(new Match(teams[teamIdx], listTeam[0]));

        for (var idx = 1; idx < numberOfMatchesInARound; idx++)
        {
            var firstTeamIndex = (roundNumber + idx) % numberOfTeams;
            var secondTeamIndex = (roundNumber + numberOfTeams - idx) % numberOfTeams;

            round.Matches.Add(new Match(teams[firstTeamIndex], teams[secondTeamIndex]));
        }

        result.Add(round);
    }

    return result;
} 
```

以下是此代码的一些在线运行示例：

*   四支球队：http: [//ideone.com/bTfld](http://ideone.com/bTfld)
*   六支球队：http: [//ideone.com/fw6wE](http://ideone.com/fw6wE)
*   十二支球队：http: [//ideone.com/peIAI](http://ideone.com/peIAI)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T16:21:59.973

我认为你采取了错误的方式。我不是在每一轮都根据前一轮计算配对，而是首先使用一个简单的双循环进行所有可能的配对，然后按轮随机分配游戏。

由于每个玩家将玩完全相同数量的游戏，因此必须存在这种分布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T17:24:06.300

尝试循环。这是一个在进程之间共享时隙的简单调度算法，但这个问题让我想起了它。

**编辑**

现在这里是[循环锦标赛](http://en.wikipedia.org/wiki/Round-robin_tournament "Wiki 上的循环赛")的实现。如果我们有奇数队，我们必须插入一个虚拟队，否则会有一个没有对手的球队。由于轮数为偶数，总轮数为​​ (NumberOfTeams-1)。一开始我们设置了第一轮：

ABCDEFGH

HGFEDCBA

所以，团队 A - H，团队 B - G，等等。

从现在开始，我们保持一个团队不变，例如 A。然后我们将 A_Side 团队从第二个位置移到右侧。最后一支队伍将进入位置 2。（ABCDEFGH 将是 AHBCDEFG）。请参阅 rotate_A_side() 递归方法（只是为了好玩）。

B_Sides 的一半向左移动。这将使 HGFED - GFE D.

由于球队选择是对称的（A 与 H 比赛，然后 H 与 A 比赛），B_Side 的上半部分是 A_Side 低部分球队的反向副本。因此，DCBA 将是 CBHA）。请参阅旋转_B_side()。

所以，第2轮是：

**HBCDEFG **_****

 **GFED *CBHA*

要进行所有回合，只需重复上述移动步骤即可。见下一轮（）

这是实现算法的 ac# 类：

```
 class Teams
{
    private int[] A_Side;
    private int[] B_Side;
    public int[,] PlayingCounter;
    public int RoundCounter = 1;
    public bool DummyTeam = false;                 // ODD number of teams -> one team will no be able to play.

    public bool NextRoundExists
    {
        get
        {
            return (RoundCounter < B_Side.Length-1);

        }
    }
    public Teams(int NumberOfTeams)
    {
        if (NumberOfTeams % 2 != 0)
        {
            NumberOfTeams++; DummyTeam = true;
        }
        A_Side = new int[NumberOfTeams];
        B_Side = new int[NumberOfTeams];
        PlayingCounter = new int[NumberOfTeams,NumberOfTeams];     // Counting to see if alg is correct
        int x,y;
        for (x=0; x<NumberOfTeams; x++) 
        {
            A_Side[x] = x + 1;                  
            B_Side[NumberOfTeams-x-1]=x+1; 
            for (y=0;y<NumberOfTeams;y++) 
            {
                PlayingCounter[x,y] = 0;
            }

        }

    }

    private void rotate_A_Side(int AtPos)
    {
        if (AtPos == 1)
        {
            int iO = A_Side[A_Side.Length - 1];
            rotate_A_Side(AtPos+1);
            A_Side[1] = iO;
        }
        else 
        {
            if (AtPos < A_Side.Length - 1) { rotate_A_Side(AtPos + 1); }
            A_Side[AtPos] = A_Side[AtPos - 1];
        }
    }
    public void rotate_B_Side()
    {
        int i;
        for (i = 0; i<B_Side.Length/2 ; i++)
        {
            B_Side[i] = B_Side[i + 1];
        }
        for (i = B_Side.Length / 2; i < B_Side.Length; i++)
        {
            B_Side[i] = A_Side[B_Side.Length/2 - (i -B_Side.Length/2 + 1) ];
        }

    }
    public bool NextRound()
    {
        if (NextRoundExists)
        {
            RoundCounter++;         // Next round
            rotate_A_Side(1);       // A side rotation
            rotate_B_Side();        // B side rotation
            LogRound();             // Update counters
            return true;
        }
        else return false;
    }
    public void LogRound()
    {
        for (int x = 0; x < A_Side.Length; x++)
        {
            PlayingCounter[A_Side[x]-1, B_Side[x]-1]++;
            PlayingCounter[B_Side[x]-1, A_Side[x]-1]++;
        }
    }
    public string GetCounters()
    {
        string return_value = "";

        for (int y = 0; y < A_Side.Length; y++)
        {
            for (int x = 0; x < A_Side.Length; x++)
            {
                return_value += String.Format(" {0:D3}", PlayingCounter[y, x]);
            }
            return_value += System.Environment.NewLine;
        }
        return return_value;
    }

    public string GetCurrentRound()
    {
        string Round = "Round #" + RoundCounter.ToString() + " ";
        for (int x = 0; x < B_Side.Length; x++)
        {
            Round += String.Format("Team {0} - Team {1};", A_Side[x], B_Side[x]);
        }
        return Round;
    }

} 
```

从您的代码中，您可以像这样使用它：

```
Teams Rounds = new Teams(22);
if (Rounds.DummyTeam) { 
       // Anything to do if nober of teams is odd?
}
Rounds.LogRound();    // DEBUG - you can check number of matches ;-)
while (Rounds.NextRoundExists)     // While we have next round...
 {
   Rounds.NextRound();             // ... generate the next 
                                   //     round (team assignment)
   // Your can tack using: Rounds.GetCurrentRound()
 }
// If you want to see the number of matches, call Rounds.GetCounters(); 
```

6个团队给了我以下输出：

第一轮自动对焦；是 ; 光盘；直流; 乙; F A ;

第2轮AE；FD; 卑诗省; CB; 东风; 艺电;

第 3 轮 AD ; 欧共体；脸书；高炉; 行政长官; 大;

第四轮交流；D B ; 英孚；铁; BD ; 加利福尼亚州；

第 5 轮 AB ; CF; 德; 教育署；光纤通道；巴;

*我用 A 替换了 Team 1，等等。*

rotate_B_Side() 应该细化，这是一种快速的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:14:24.247

我快速开始，使用简单的方法

1.  生成所有可能的游戏
2.  根据团队可用性将游戏分配到回合

这导致游戏的分布看起来有点“僵硬”。

```
schedule_tournament(new List<string> { "A", "B", "C" });
schedule_tournament(new List<string> { "A", "B", "C", "D", });
schedule_tournament(new List<string> { "A", "B", "C", "D", "E" });
schedule_tournament(new List<string> { "A", "B", "C", "D", "E", "F" });
schedule_tournament(new List<string> { "A", "B", "C", "D", "E", "F", "G" });
...

private void schedule_tournament(List<string> teams)
{            
    List<string> games = new List<string>();
    List<string> rounds = new List<string>();

    // get all possible games
    for (int i = 0; i < teams.Count; i++)
    {
        for (int j = i + 1; j < teams.Count; j++)
        {
            string game_name = string.Format("{0}{1}", teams[i], teams[j]);
            if (!games.Contains(game_name)) games.Add(game_name);
        }
    }

    // allocate games to rounds
    for (int i = 0; i < games.Count; i++)
    {
        bool allocated = false;
        for (int j = 0; j < rounds.Count; j++)
        {
            string team_1 = games[i].Substring(0, 1);
            string team_2 = games[i].Substring(1, 1);
            if (!rounds[j].Contains(team_1) && !rounds[j].Contains(team_2))
            {
                rounds[j] += " - " + games[i];
                allocated = true;
                break;
            }
        }
        if (!allocated)
        {
            rounds.Add(games[i]);
        }
    }
    Console.WriteLine("{0} teams, play {1} games in {2} rounds", teams.Count, games.Count, rounds.Count);
    for (int i = 0; i < rounds.Count; i++) Console.WriteLine("Round {0}: {1}", i + 1, rounds[i]);
} 
```

这个的输出是：

```
3 teams, play 3 games in 3 rounds
Round 1: AB
Round 2: AC
Round 3: BC
4 teams, play 6 games in 3 rounds
Round 1: AB - CD
Round 2: AC - BD
Round 3: AD - BC
5 teams, play 10 games in 7 rounds
Round 1: AB - CD
Round 2: AC - BD
Round 3: AD - BC
Round 4: AE
Round 5: BE
Round 6: CE
Round 7: DE
6 teams, play 15 games in 7 rounds
Round 1: AB - CD - EF
Round 2: AC - BD
Round 3: AD - BC
Round 4: AE - BF
Round 5: AF - BE
Round 6: CE - DF
Round 7: CF - DE
7 teams, play 21 games in 7 rounds
Round 1: AB - CD - EF
Round 2: AC - BD - EG
Round 3: AD - BC - FG
Round 4: AE - BF - CG
Round 5: AF - BE - DG
Round 6: AG - CE - DF
Round 7: BG - CF - DE 
```**

# pagination - CakePHP 2 分页问题

> ID：12883987
> 
> 赞同：2
> 
> 时间：2012-10-14T16:05:44.577
> 
> 标签：pagination, cakephp-2.1

在 CakePHP 2.1.3 中使用分页时，我在获取所需的精确 URL 时遇到问题，该 URL 需要与我的自定义路由相同。这是我所拥有的一个例子：

**网址：** `/courses/section-name/cat-name/subcat-name`

**我的路线：**

```
Router::connect('/courses/:section/:cat/:subcat/*', array(
    'controller' => 'courses', 'action' => 'courseCategory'), array(
        'pass' => array('section', 'cat', 'subcat'),
        'section' => '[a-zA-Z0-9_-]+',
        'cat' => '[a-zA-Z0-9_-]+',
        'subcat' => '[a-zA-Z0-9_-]+'        
    )); 
```

就使用这种格式的正常导航而言，一切正常，当访问页面时，我的所有链接等都可以得到分页结果。我已将 Paginator Helper 的“选项”设置如下：

```
$this->Paginator->options(array('url'=>$this->passedArgs)); 
```

然而，这会产生一个 URL，例如：`/courses/courseCategory/section-name/cat-name/subcat-name/page:2`它不起作用。

如果我从 URL 中手动删除操作名称“ **courseCategory** ”，例如：`/courses/section-name/cat-name/subcat-name/page:2`等，那么一切正常，我会转到相关的结果页面，所以我想我很接近了吗？然而，经过数小时的搜索、阅读文档/API 和尝试不同的事情后，如果没有控制器的操作，我就无法让我的 URL 链接出现，现在它让我发疯了！

所以，我想问题是我哪里出错了，或者有人有替代解决方案吗？

任何帮助将不胜感激，如果需要，我们很乐意提供更多信息。

谢谢 ：）

# php - How to insert to second table with DISTINCT in MySQL?

> ID：12883991
> 
> 赞同：0
> 
> 时间：2012-10-14T16:06:08.447
> 
> 标签：php, mysql

I have two TABLEs from the US Census. One has 2.8 millions records in it, which is not only too large it contains data I simply don't need such as the 9-digit Zip Codes. I want to create a new table without the 9-digit Zip Codes, instead the 5-digit Zip Codes. I'm having trouble here, it might simply be the syntax, but I would greatly appreciate the help.

This query works to list all the rows:

```
SELECT DISTINCT ZIP5, 
STATE_CODE,STATE,
COUNTY_CODE,COUNTY_NAME,
CBSA_CODE,CBSA_TITLE, CBSA_LSAD,
METRO_DIVISION_CODE, METRO_DIVISION_TITLE, METRO_DIVISION_LSAD,
CSA_CODE, CSA_TITLE, CSA_LSAD
from zip_code_to_cbsa; 
```

I created the TABLE in PHP:

```
$sql = 'CREATE TABLE `zip5_code_to_cbsa` (
`id` INT unsigned NOT NULL AUTO_INCREMENT,
`ZIP5` VARCHAR(5) NOT NULL,
`STATE_CODE` VARCHAR(2) NOT NULL,
`STATE` VARCHAR(2) NOT NULL,
`COUNTY_CODE` VARCHAR(3) NOT NULL,
`COUNTY_NAME` VARCHAR(50) NOT NULL,
`CBSA_CODE` VARCHAR(5) NOT NULL,
`CBSA_TITLE` VARCHAR(50) NOT NULL,
`CBSA_LSAD` VARCHAR(50) NOT NULL,
`METRO_DIVISION_CODE` VARCHAR(5) NOT NULL,
`METRO_DIVISION_TITLE` VARCHAR(50) NOT NULL,
`METRO_DIVISION_LSAD` VARCHAR(50) NOT NULL,
`CSA_CODE` VARCHAR(3) NOT NULL,
`CSA_TITLE` VARCHAR(50) NOT NULL,
`CSA_LSAD` VARCHAR(50) NOT NULL,
 primary key (id,ZIP5)
   )'; 
```

Now to do the INSERT I attempted the following which gives an error:

```
INSERT into zip5_code_to_cbsa
SELECT DISTINCT ZIP5, 
STATE_CODE,STATE,
COUNTY_CODE,COUNTY_NAME,
CBSA_CODE,CBSA_TITLE, CBSA_LSAD,
METRO_DIVISION_CODE, METRO_DIVISION_TITLE, METRO_DIVISION_LSAD,
CSA_CODE, CSA_TITLE, CSA_LSAD
from zip_code_to_cbsa;

mysql>     INSERT into zip5_code_to_cbsa
->     SELECT DISTINCT ZIP5, 
->     STATE_CODE,STATE,
->     COUNTY_CODE,COUNTY_NAME,
->     CBSA_CODE,CBSA_TITLE, CBSA_LSAD,
->     METRO_DIVISION_CODE, METRO_DIVISION_TITLE, METRO_DIVISION_LSAD,
->     CSA_CODE, CSA_TITLE, CSA_LSAD
->     from zip_code_to_cbsa;
**ERROR 1136 (21S01): Column count doesn't match value count at row 1**
mysql> 
```

Thanks!

UPDATE:

This appears to be working for me now, unless someone can find a problem with it?

```
$sql = 'INSERT into zip5_code_to_cbsa (ZIP5,STATE_CODE,STATE,
COUNTY_CODE,COUNTY_NAME,
CBSA_CODE,CBSA_TITLE, CBSA_LSAD,
METRO_DIVISION_CODE, METRO_DIVISION_TITLE, METRO_DIVISION_LSAD,
CSA_CODE, CSA_TITLE, CSA_LSAD)
SELECT DISTINCT ZIP5 as ZIP5,
STATE_CODE,STATE,
COUNTY_CODE,COUNTY_NAME,
CBSA_CODE,CBSA_TITLE, CBSA_LSAD,
METRO_DIVISION_CODE, METRO_DIVISION_TITLE, METRO_DIVISION_LSAD,
CSA_CODE, CSA_TITLE, CSA_LSAD
from zip_code_to_cbsa;
'; 
```

The **SELECT DISTINCT ZIP5 as ZIP5** allowed me to include the DISTINCT as part of this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:08:34.683

You need to specify the column names explicitly if you are inserting to selected columns only,

```
INSERT INTO tableName (colA, colB)
SELECT colA, colB
FROM tableName 
```

what you are doing now is incorrect because the server assumes that you are inserting a value to all columns but you have supplied less than the number columns, that's why it generate an error

```
Column count doesn't match value count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:09:57.500

Why not do it in one go?

```
CREATE TABLE new_table AS SELECT DISTINCT ZIP5, 
STATE_CODE,STATE,
COUNTY_CODE,COUNTY_NAME,
CBSA_CODE,CBSA_TITLE, CBSA_LSAD,
METRO_DIVISION_CODE, METRO_DIVISION_TITLE, METRO_DIVISION_LSAD,
CSA_CODE, CSA_TITLE, CSA_LSAD
from zip_code_to_cbsa;

ALTER TABLE new_table ADD id INT NOT NULL AUTO_INCREMENT PRIMARY KEY; 
```

# cocoa-touch - 在属于 UIViewController 的 UIView 中对子视图的放置和配置进行编码的位置

> ID：12883993
> 
> 赞同：0
> 
> 时间：2012-10-14T16:06:13.237
> 
> 标签：cocoa-touch, cocoa, uiviewcontroller

我突然想到我可能做的不对。有人告诉过我几次，该`viewDidLoad`方法在第一次引用`self.view`. 因此，下面的代码

```
- (id)initWithFrame:(CGRect)frame{
self = [super initWithNibName:nil bundle:nil];
if (self) {

    self.view.frame = frame;

    }
    return self;
} 
```

执行后完成帧分配`viewDidLoad`。

因此，内部对 self.view.frame 的任何引用`viewDidLoad`都不会引用正确的框架。

更重要的是，如果我对主视图 (self.view) 内的子视图使用 autoresizingMask（支柱和弹簧），任何比例间距都将基于错误的初始比例。关于 autoresizingMask 的文档指出：

> 当沿同一轴设置多个选项时，默认行为是在柔性部分之间按比例分配大小差异。

配置 UIViewController 的视图的正确方法是什么？`viewWillAppear`是否像在or方法中配置和添加子视图一样简单`viewDidAppear`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:35:09.973

当你问它`view`时`UIViewController`，如果视图还没有被实例化（这是你第一次问它），它需要被创建（°）。

当一个 ViewController 需要实例化它的视图时：

*   如果 XIB 与您的 关联，`UIViewController`则从 XIB 加载视图。这意味着 XIB 文件未归档，并且 XIB 中描述的所有对象都已分配/实例化。因此，XIB 中的每个视图都使用`alloc`++ （解压缩 XIB 的解码器）`initWithCoder:`实例化。因此，您的每个视图都会收到消息`autorelease``NSCoder``initWithCoder:`
*   如果没有与您关联的 XIB `UIViewController`，它将调用其`loadView`方法以允许您以编程方式创建视图。在这种情况下，您可以在其中编写代码来创建视图，例如`[[[UIView alloc] initWithFrame:...] autorelease]`. 因此，您的视图将由代码实例化并接收`initWithFrame:`消息，而不是`initWithCoder:`方法。
*   `UIViewController`通过取消归档 XIB 文件或通过 中的代码创建和实例化视图之一，`loadView`加载视图并`UIViewController`接收`viewDidLoad`消息。

因此，每个视图首先接收`initWithFrame:`（如果由代码创建）或`initWithCoder:`（如果从 XIB 创建）消息，然后一旦创建了`UIViewController`'s 的所有视图层次结构，它本身就会接收消息。总是按这个顺序。`view``UIViewController``viewDidLoad`

* * *

```
@implementation YourCustonUIView
- (id)initWithCoder:(NSCoder*)decoder
{
  // here the view is being allocated from the XIB. "alloc" as been called, "initWithCoder" is in progress
  // frame is not set at this line, but as soon as we call the super implementation…
  self = [super initWithCoder:decoder];
  if (self)
  {
    // Here all the properties of the view set in the XIB file (thru the inspector) are now applied
    // Including the frame of the view (and its backgroundColor and all what you set thru IB)
    // so self.frame is initialized with the correct value here
  }
  return self;
}

- (id)initWithFrame:(CGRect)frame
{
  // here the view is being allocated from code. "alloc" as been called, "initWithFrame" is in progress
  // self.frame is not set at this line, but as soon as we call the super implementation…
  self = [super initWithFrame:frame];
  if (self)
  {
    // Here the view is initialized with its frame property
    // so self.frame is initialized with the correct value here
    // and you can initialize every other property from here
  }
  return self;
}
@end

@implementation YourCustomUIViewController
-(void)viewDidLoad
{
  // At that point, the view of your UIViewController has been loaded/created
  // (either via XIB or via the loadView method), so either its initWithCoder (if via XIB)
  // or its initWithFrame (if via loadView) has been called
  // so in either case, its frame has the right value
}

/*
// In case your YourCustomUIViewController does not have a XIB associated with it
// You have to implement this method to provide a view to your UIViewController by code
-(void)loadView
{
  // Create a view by code, and give it a frame
  UIView* rootView = [[UIView alloc] initWithFrame:CGRectMake(0,0,..., ...)];
  rootView.backgroundColor = [UIColor redColor]; // for example
  self.view = rootView;
  [rootView release];

  // at the end of this method, self.view must be non-nil of course.
}
*/
@end 
```

* * *

*(°) 另一种可能性是视图已被实例化，但后来被释放，因为您在视图不在屏幕上时收到了内存警告，因此视图使用的内存已被回收。但无论如何，视图尚未加载，必须加载/创建*

# objective-c - NSImageView 大小不跟随它的窗口

> ID：12883994
> 
> 赞同：5
> 
> 时间：2012-10-14T16:06:15.343
> 
> 标签：objective-c, cocoa, nswindow, autolayout, nsimageview

我只是在玩 OSX 应用程序开发。我完全是菜鸟。我认为它就像 iOS 应用程序开发一样直截了当。但是经过几天的努力，似乎并不那么容易。

这就是我想要做的。我有一个 NSWindow。在其中我放了一个 Image Well（带有命名？lol）以及“Image Well”，它是一个 NSImageView（不是双关语）。

所以我只想让 NSImageView 的框架按照 NSWindow 的大小调整大小。就是这么简单。

这是我所做的不起作用：

NSImageView 作为 imageView。

编写 NSWindow windowDidResize 和 windowDidResize: 的委托方法 NSWindowDelegate 方法，并在其中调整图像视图的 imageView 框架的 framesize。代码：（NSImageView 位于一个名为 imageView 的属性中。）

```
- (void)windowDidResize:(NSNotification *)notification {

   // NSLog(@"resized");

    NSRect zWindowRect = [[self window]frame];
    NSRect zContentRect = [[self window]contentRectForFrameRect:zWindowRect];

    [self.imageView setFrameSize:NSMakeSize(zContentRect.size.width,
                                            zContentRect.size.height)];

    [self.imageView setNeedsDisplay:YES];

} 
```

这个方法被调用（用 测试过`NSLog()`），但是它`NSImageView`只是保持原来的大小。我检查了`IBOutlet`连接是否正常。

是什么赋予了？为什么不`NSImageView`调整大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:40:49.770

行。这正在成为一种习惯。再次回答我自己的问题。

似乎这种行为是由于 Interface Builder 的“自动布局”功能造成的。

要修复它，只需在 MainMenu.xib 中禁用“自动布局”。 [请参阅此处了解说明](http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-on-by-default-how-to-turn-off-auto-layout/)

如果站点过期：只需单击 MainMenu.xib，然后转到 XCode 实用程序面板中的第一个选项卡文件。旁边应该有一个“使用自动布局”复选框。取消选中它。

# php - 我的代码顺序是否显示 mysqli 错误？

> ID：12883995
> 
> 赞同：0
> 
> 时间：2012-10-14T16:06:17.247
> 
> 标签：php, mysqli

我在 mysqli 中收到两个错误：

> 警告：mysqli_stmt::execute(): (HY000/2014): 命令不同步；您现在无法在 /.../ 第 235 240 行运行此命令：
> 
> 命令不同步；您现在无法运行此命令 致命错误：无法在第 241 行的 /.../ 中中断/继续 2 个级别

我想知道这是由于以下查询和插入的顺序而出现的错误：

```
<?php

//connect to db

var_dump($_POST);  

$optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = ?)";

    if (!$optionstmt = $mysqli->prepare($optionquery)) {
  // Handle errors with prepare operation here
  echo __LINE__.': '.$mysqli->error;
}

$replyquery = "SELECT ReplyId FROM Reply WHERE (ReplyType = ?)";

        if (!$replystmt = $mysqli->prepare($replyquery)) {
        // Handle errors with prepare operation here
  echo __LINE__.': '.$mysqli->error;
}

// Prepare your statements ahead of time
 $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent, NoofAnswers, ReplyId, QuestionMarks, OptionId) 
    VALUES (?, ?, ?, ?, ?, ?, ?)";
if (!$insert = $mysqli->prepare($questionsql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

 $answersql = "INSERT INTO Answer (SessionId, QuestionId, Answer) 
    VALUES (?, ?, ?)";
if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

//make sure both prepared statements succeeded before proceeding
if( $insert && $insertanswer)
{
    $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');
    $c = count($_POST['numQuestion']);

    for($i = 0;  $i < $c; $i++ )
    {

$selected_option = "A-C";
$selected_reply = "Single"; 

// Bind parameter for statement
$optionstmt->bind_param("s", $selected_option);

// Execute the statement
$optionstmt->execute();

            if ($optionstmt->errno) 
            {
                // Handle query error here
                echo __LINE__.': '.$optionstmt->error;
                break 1;
            }

// This is what matters. With MySQLi you have to bind result fields to
// variables before calling fetch()
$optionstmt->bind_result($optionid);

// This populates $optionid
$optionstmt->fetch();

// Bind parameter for statement
$replystmt->bind_param("s", $selected_reply);

// Execute the statement
$replystmt->execute();

            if ($replystmt->errno) 
            {
                // Handle query error here
                echo __LINE__.': '.$replystmt->error;
                break 2;
            }

// This is what matters. With MySQLi you have to bind result fields to
// variables before calling fetch()
$replystmt->bind_result($replyid);

// This populates $optionid
$replystmt->fetch(); 

        $results = $_POST['value'];
        foreach($results as $id => $value) 
        {
            $answer = $value;

            $insert->bind_param("sisiiii", $sessid, $id, $_POST['questionText'][$i],
                     $_POST['numberAnswer'][$i], $replyid, $_POST['textWeight'][$i],
                     $optionid);

            $insert->execute();

            if ($insert->errno) 
            {
                // Handle query error here
                echo __LINE__.': '.$insert->error;
                break 3;
            }

            $lastID = $insert->insert_id;

            foreach($value as $answer) 
            {
                $insertanswer->bind_param("sis", $sessid, $lastID, $answer);

                $insertanswer->execute();

                if ($insertanswer->errno) {
                    // Handle query error here
                    echo __LINE__.': '.$insertanswer->error;
                    break 4;
                }
            }
        }
    }

    //close your statements at the end

    $insertanswer->close();
    $insert->close();
    $replystmt->close(); 
    $optionstmt->close();
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:12:42.377

这是因为您在适当的时间关闭语句

`$insertanswer->close();`在适当的位置或在另一个查询之前关闭语句

# svn - Subversion (svn) 更新到包含嵌套检出的源树（如 clang/llvm）

> ID：12883996
> 
> 赞同：1
> 
> 时间：2012-10-14T16:06:23.200
> 
> 标签：svn, nested, clang, llvm, svn-checkout

按照“入门”说明 (http://clang.llvm.org/get_started.html)，我经常在各种系统上构建 clang/llvm。SVN 的人非常喜欢模块化，但似乎没有使用 SVN“外部”机制，因此他们需要三个单独的签出（llvm、clang、compiler-rt）到一个源代码树（其中一个可选：extra）。

我不时地通过在源树根（“llvm”）中执行“svn up”然后重建来构建更新版本。

今天，我第一次想知道我是否应该在每个单独的结帐子目录中进行“svn up”，或者 SVN 是否足够聪明，可以进行“嵌套结帐的递归更新”。搜索了一下后找不到答案，所以我现在在这里。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:33:12.873

> SVN 足够聪明，可以进行“嵌套结帐的递归更新”

AFAIK，除了使用**externals**之外，SVN 还不够聪明，无法了解嵌套结帐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T15:45:50.240

```
find . -name ".svn" -type d | xargs dirname | xargs svn update 
```

# c# - 如何强制 Automapper 覆盖数组属性？

> ID：12883999
> 
> 赞同：3
> 
> 时间：2012-10-14T16:06:34.280
> 
> 标签：c#, automapper, automapper-2

我在我的项目中使用 Automapper 将业务实体映射到 DTO。

```
public class TransportStop
{
    public Point[] Points { get; set; }
}

public class TransportStopDto
{
    public PointDto[] Points { get; set; }

    public TransportStopDto()
    {
        Points = new PointDto[0];
    }
} 
```

在构造函数中，我使用空数组初始化 Points 属性，以确保它始终不为空。我正在使用基本配置进行映射。

```
Mapper.CreateMap<Point, PointDto>();
Mapper.CreateMap<TransportStop, TransportStopDto>();

TransportStop stop = new TransportStop()
{
    Points = new Point[]
    {
        new Point() { X = 1, Y = 1 },
        new Point() { X = 2, Y = 2 }
    }
};

TransportStopDto dto = Mapper.Map<TransportStop, TransportStopDto>(stop); 
```

使用 Automapper 2.0.0 它工作得很好，但是在升级到 2.2.0 版本后，我得到了带有内部异常的映射异常：

> 指数数组的边界之外

似乎 Automapper 试图映射数组的每个成员，而不是覆盖整个数组。如果我从构造函数中删除属性初始化并将其保留为空，则一切正常。

是否可以将 Automapper 2.2.0 配置为始终用新的数组属性覆盖现有的数组属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:04:04.383

我通过降级到 2.0.0 版解决了我的问题。