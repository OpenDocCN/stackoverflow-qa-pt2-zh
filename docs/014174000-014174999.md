# StackOverflow 问答 14174000-14174999

# twitter-bootstrap - 在引导程序中动态关闭行 div

> ID：14174002
> 
> 赞同：0
> 
> 时间：2013-01-05T16:47:39.190
> 
> 标签：twitter-bootstrap

我只是在尝试引导程序，它看起来很棒，但我遇到了一个似乎很难解决的问题，而不是看起来正确。

我有一个类似砖石的格式，它显示三列，然后无限次进入新行。

```
x x x
x x x
x x x 
```

哪个（据我了解）必须在引导程序中像这样编码：

```
<div class="container-fluid">
<div class="row">
    <div class="span4"></div>
    <div class="span4"></div>
    <div class="span4"></div>
</div>
<div class="row">
    <div class="span4"></div>
    <div class="span4"></div>
    <div class="span4"></div>
</div>
<div class="row">
    <div class="span4"></div>
    <div class="span4"></div>
    <div class="span4"></div>
</div> 
```

但这是否意味着在我的代码视图（例如 rails）中，我需要执行某种循环，每 3 次监视一次，然后关闭该行并开始一个新行？我认为这是引导程序能够自行处理的事情。

```
for($i=0;i<3;i++) {
   do something
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:51:52.523

这对你有用吗？[http://jsfiddle.net/panchroma/9RrX7/](http://jsfiddle.net/panchroma/9RrX7/)

为您的动态内容创建一个新容器，然后简单地将所有内容转储到同一行中。然后使用 CSS:nth 子选择器选择第 4、7、...动态内容项并调整 CSS 以使浮动正常工作。

我包含了一些额外的内容来检查浮动和调整大小是否正常工作。

CSS

```
.dynamic .row .span4:nth-child(3n+4) {  
clear:both;
} 
```

HTML

```
<div class="container-fluid">
<div class="row">
<div class="span4">X</div>
<div class="span4">X</div>
<div class="span4">X</div>
</div>
<div class="row">
<div class="span4">X</div>
<div class="span4">X</div>
<div class="span4">X</div>
</div>
<div class="row">
<div class="span4">X</div>
<div class="span4">X</div>
<div class="span4">X</div>
</div>
</div>

</div><!-- end container -->

<div class="container-fluid dynamic">
<div class="row">

<div class="span4"></div>
<div class="span4"></div>
<div class="span4"></div>
<!-- repeat as req'd -->
</div><!-- end row -->
</div><!-- end container --> 
```

==================================================== ======

可以使用 javascript 或 php 添加动态 HTML。例如，假设您使用的是 php，内容来自数据库，并且您的引导页面是 .php 。

引导页面的一般布局可能是这样的：

```
<?php connect to database and read in data ?>

<head> ...</head>
<body>
.......
......

<div class="container-fluid dynamic">
<div class="row">

<?php loop through data ?>
<div class="span4"> <?php echo $item data ?> </div>
<?php end loop ?>

</div><!-- end row -->
</div><!-- end container --> 
```

希望这可以帮助

# java - 如何添加二进制数并忽略进位？

> ID：14174005
> 
> 赞同：-1
> 
> 时间：2013-01-05T16:48:32.703
> 
> 标签：java, binary

假设输入是两个整数值。我想将两个整数值转换为二进制，执行二进制加法，并给出忽略进位的结果（等效整数）。我将如何去做这件事。

想到的一个想法是以某种方式将它们转换为二进制字符串并使用二进制加法算法，然后忽略进位（如果进位存在，则从字符串中删除进位字符）。

样本输入

一个数字：1 第二个数字：3

样本输出

2 解释：求和中的最低位是 1 + 1 = 0 下一位是 0 + 1 = 1（前一位的进位被丢弃）答案是二进制的 10，即 2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T16:58:22.597

You are probably looking for the bitwise XOR (exclusive OR) which will provide the following outputs for the given inputs:

```
^ | 0 | 1
--+---+--
0 | 0 | 1
--+---+--
1 | 1 | 0 
```

It behaves like binary addition ( `1+1 = 10`) but ignores the overflow if both operands are `1`.

```
int a = 5; // 101
int b = 6; // 110 

a ^ b; // 3 or 011 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:57:19.933

这只是`XOR`二进制中的两个整数之一。在Java中你可以做

```
result = v1 ^ v2; 
```

# jquery - 如何将 datetimepicker 设置为其绑定的文本框的值

> ID：14174008
> 
> 赞同：1
> 
> 时间：2013-01-05T16:48:55.260
> 
> 标签：jquery, datetime, set, datetimepicker

我正在使用绑定到一类 HTML 文本框的 Trent Richardson datetimepicker jQuery 插件，但我不知道如何设置选择器以匹配这些框。

我正在像这样调用 datetimepicker：

```
$('.c_datepick').datetimepicker({
    hourGrid: 12,
    minuteGrid: 30,
    timeFormat: 'hh:mm',
    showTimezone: false,    
}) 
```

文本框填充了我数据库中的日期/时间。我能想到调用 datetimepicker 的唯一方法是使用文本框的单击事件，如下所示：

```
$('.c_datepick').click(function() {

    (Do something here to set the datetimepicker to the value of the text box)

    alert($(this).val());  // This alert shows the value I want

}) 
```

我将那个警告框放在函数中，以检查我是否可以看到我想使用的值，并且它就在那里。我的问题是，我该怎么做才能将 datetimepicker 设置为框中的值？还是点击事件甚至是执行此操作的地方？

我知道这是可行的，因为当我使用 datetimepicker 更改文本框的值时，datetimepicker 会记住该值。换句话说，一旦 datetimepicker 已经“意识到”每个盒子的内容，它就会做我想要的。

这个网站上有一些相关的问题，但没有答案。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:22:35.893

如果插件本身不自动解析值，您可以在循环中初始化它们并从循环中获取每个值：

```
$('.c_datepick').each(function () {    
  var $input = $(this);
  $input.datetimepicker({
    hourGrid: 12,
    minuteGrid: 30,
    timeFormat: 'hh:mm',
    showTimezone: false,
  }).datetimepicker('setDate',new Date( Date.parse($input.val())));
}) 
```

假设日期值是一种`Date.parse`可以识别的格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:25:48.927

我偶然发现了解决方案。我在我的文本框中使用字符串。当我使用 Date 和 strToTime 将它们转换为日期时，datetimepicker 会自动识别它们。

呃。浪费大家的时间，对不起......

# python - 从目录导入模块而不触及 sys.path

> ID：14174011
> 
> 赞同：3
> 
> 时间：2013-01-05T16:49:10.943
> 
> 标签：python, import, module

我正在寻找一种方法来从本地文件系统上的某个位置导入模块，而无需将父目录附加到 `sys.path`. 这是显示所需接口的示例代码：

```
imp = Importer()
imp.add_path(r'C:\pylibs')
foolib = imp.import_('foolib')
print foolib
# <module 'foolib' from 'C:\pylibs\foolib.py'> 
```

我可以想到这样的实现，但我想知道是否有可能没有`sys.path`临时交换变量的解决方法。

```
import sys

class Importer(object):

    def __init__(self):
        super(Importer, self).__init__()
        self.path = []

    def add_path(self, path):
        self.path.append(path)

    def import_(self, name):
        old_path = sys.path
        sys.path = self.path

        try:
            return __import__(name, {}, {})
        finally:
            sys.path = old_path 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:03:31.813

尝试查看[`imp`](http://docs.python.org/2/library/imp.html)模块。

具体来说，函数

`imp.**find_module**(*name[, path]*)`

和

`imp.**load_module**(*name, file, pathname, description*)`

看起来很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:41:07.793

# 最终代码

感谢*C0deH4cker*。

```
import sys
import imp

class Importer(object):
    r"""
    Use this class to enable importing modules from specific
    directories independent from `sys.path`.
    """

    def __init__(self):
        super(Importer, self).__init__()
        self.path = []

    def add(self, *paths):
        r"""
        Add the passed strings to the search-path for importing
        modules. Raises TypeError if non-string object was passed.
        Passed paths are automatically expanded.
        """

        new_paths = []
        for path in paths:
            if not isinstance(path, basestring):
                raise TypeError('passed argument must be string.')
            path = os.path.expanduser(path)
            new_paths.append(path)

        self.path.extend(new_paths)

    def import_(self, name, load_globally=False):
        r"""
        Import the module with the given name from the directories
        added to the Importer. The loaded module will not be inserted
        into `sys.modules` unless `load_globally` is True.
        """

        prev_module = None
        if name in sys.modules and not load_globally:
            prev_module = sys.modules[name]
            del sys.modules[name]

        data = imp.find_module(name, self.path)
        try:
            return imp.load_module(name, *data)
        except:
            data[0].close()
            raise
        finally:
            # Restore the old module or remove the module that was just
            # loaded from `sys.modules` only if we do not load the module
            # globally.
            if not load_globally:
                if prev_module:
                    sys.modules[name] = prev_module
                else:
                    del sys.modules[name] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T19:33:01.317

我现在正在使用`localimport`：

```
with _localimport('lib', eggs=True) as importer:
    import some_package
assert 'some_package' not in sys.modules
assert 'some_package' in importer.modules 
```

[https://github.com/NiklasRosenstein/localimport](https://github.com/NiklasRosenstein/localimport)

# java - 带有已编译 C dll 问题的 Java

> ID：14174012
> 
> 赞同：0
> 
> 时间：2013-01-05T16:49:11.277
> 
> 标签：java, eclipse, dll, crt

我在 Eclipse 中有一个 java 项目，其中包含一个在单独的机器上编译的 DLL。我在 Windows 7、64 位和 Eclipse 也适用于 64 位。

我无法编译项目，出现错误：“应用程序无法启动，因为它的并排配置不正确......”

事件查看器显示："Dependent Assembly Microsoft.VC90.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8" 找不到。详细请使用sxstrace.exe诊断。”

我的机器上安装了 x64 的 Visual Studio 2008 和 2010。

我卸载了 Microsoft Visual Studio 2008 x64，并下载了我在该站点上找到的 Microsoft Visual C++ 2008 Redistributable x86 [9.0.30729.4148：http://www.microsoft.com/en-us/download/details.aspx?id=26368](http://www.microsoft.com/en-us/download/details.aspx?id=26368)，但它没有帮助。

由于版本不同，即9.0.21022.8而不是9.0.30729.4148，错误是否仍然存在？我该如何解决我的问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:16:38.900

是的，问题似乎是由您重新安装 Visual Studio 引起的 C 运行时库的混合版本。

此 Microsoft 支持页面可能会有所帮助：http: [//support.microsoft.com/kb/2525435](http://support.microsoft.com/kb/2525435)

# wpf - WPF CheckedListBox EF MVVM

> ID：14174015
> 
> 赞同：0
> 
> 时间：2013-01-05T16:49:44.093
> 
> 标签：wpf, mvvm, checkbox, listbox

我知道这可能真的很愚蠢，但我的脑袋今天工作不正常。

我有一个病人实体和一个残疾表。一个病人可以有 0 个或多个残疾。

如果我创建一个绑定到一个`ListBox`的我如何使用 MVVM 挂钩项目的选中/未选中以添加/删除我的患者的残疾集合中的残疾？对我的患者实体有什么约束？`ItemsSource``ObservableCollection``Disability``CheckBox``CheckBox`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:00:40.043

`CheckedListBox`期望绑定到具有布尔属性的项目列表，该属性指示每个复选框的状态。但是，您的模型有一个集合属性，您希望根据复选框状态向/从中添加/删除项目。

这听起来像是视图模型的工作！

从您公开绑定到您的实例`PatientViewModel`的集合中，每个实例都应该有一个布尔属性。检测视图模型中此状态的变化，然后更新包装模型对象的状态。`DisabilityViewModel``CheckedListBox``DisabilityViewModel``IsChecked``PatientViewModel``Patient`

# php - 将二维 PHP 数组转换为 JavaScript

> ID：14174016
> 
> 赞同：0
> 
> 时间：2013-01-05T16:49:44.493
> 
> 标签：php, javascript, arrays

亲爱的朋友我的php数组是这样的：

```
$data = array( array("daisy", 0.75 ),
           array("orchid", 1.15) 
         ); 
```

我想把这个数组转换成这样的javascript数组

```
data = [{"label":"rose", "value":1.25}, 
        {"label":"daisy", "value":0.75}, 
        {"label":"orchid", "value":1.15}] 
```

请帮助我如何转换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:59:52.117

It's easy to do with a map.

```
$data = array( array("daisy", 0.75 ), array("orchid", 1.15));

$tab = array_map(function($e) { 
  return array("label" => $e[0], "value" => $e[1]); 
}, $data);

$json = json_encode($tab);
echo $json; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:55:04.657

只需在 PHP 中创建一个数组，然后使用函数`json_encode`将其转换为 JSON。

```
<?php
$result = array();
foreach ($data as $item) {
    $result[] = array('label' => $item[0], 'value' => $item[1]);
}
?>
<script>
data = <?php echo json_encode($result); ?>;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:55:24.620

您可以在 php 中使用 json 库，使用以下代码进行转换

```
echo json_encode($data); //this will print it as json(javascript object format), which can be further parsed in javascript to create a js object 
```

希望这可以帮助

# python - 不经常更新视图

> ID：14174020
> 
> 赞同：1
> 
> 时间：2013-01-05T16:49:55.643
> 
> 标签：python, sqlite, pyqt

我在 QMainWindow 中开发了一个程序，带有一个基于 QSqlTableModel 的 QTableView。数据库使用 sqlite。

该程序应该显示视频列表。我通常可以为每个视频添加一些标签和演员（标签和演员存储在数据库中）。当我显示一些视频时，一切正常，但是当视频数量增加时，我的程序会引发如下异常：

```
Traceback (most recent call last):
File "/home/djipey/informatique/python/bibli/gui.py", line 572, in addTag
liste.addTag(vids_selected, tag_to_add.split(" "))
File "/home/djipey/informatique/python/bibli/liste.py", line 488, in addTag
bdd.commit()
sqlite3.OperationalError: database is locked 
```

我几乎可以肯定问题不是来自 liste.py，因为我关闭了每个连接和游标。不，我的数据库在其他地方很忙。

我假设问题出在视图/模型显示信息时，所以我想知道是否可以降低显示速率？否则，我愿意接受每一个解决问题的建议。

```
def addTag(list_vids, list_tags):

    """ Ajoute tous les tags de list_tags à chaque vid de list_vids. Pour
cela crée un tag dans la table tags, puis établit une relation entre
l'id de la vidéo et l'id du tag créé. Inscrit la correspondance dans
la table videos_tags. """

    bdd = sqlite3.connect("fichiers.sqlite") # ouverture de la base
    bdd.row_factory = sqlite3.Row # accès aux colonnes par leur nom, pas par leur index

    c = bdd.cursor() # obtention d'un curseur

    #On ajoute le tag transmis à la table tags s'il n'existe pas déjà
    for each_tag in list_tags:
        c.execute("SELECT * FROM tags WHERE name= ? ", (each_tag,))
        if c.fetchone() is None:
            c.execute("INSERT INTO tags (name) VALUES (?) ", (each_tag,))

            bdd.commit()

    for each_video in list_vids:
        for each_tag in list_tags:
            #On récupère l'id du tag pour s'en servir après
            c.execute("SELECT id FROM tags WHERE name= ?", (each_tag,))
            id_tag_recupere = c.fetchone()["id"]

            #On vérifie que le tag à stocker n'est pas déjà associé à la vidéo 
            c.execute("SELECT * FROM videos_tags WHERE id_video = ? AND id_tag = ?", (each_video, id_tag_recupere))
            if c.fetchone() is None:
                c.execute("INSERT INTO videos_tags (id_video, id_tag) VALUES (?, ?)", (each_video, id_tag_recupere))
                bdd.commit()
            else:
                print("Cette vidéo a déjà ce tag")

    c.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:53:43.890

事实上，我不得不反其道而行之。谢谢你的人:)

在我的 QMainWindow 的构造函数中，我使用 database.open() 启动与数据库的连接。但是在我的操作 addTag 中，这个连接仍然是打开的，问题是另一个模块处理数据库中标签的写入。

因此，将 database.close() 放在我的操作 addTag 的开头，并将 database.open() 放在操作的结尾，解决了问题。

非常感谢，你给了我答案。

# android - Android 计算器应用程序 - 一些问题

> ID：14174024
> 
> 赞同：0
> 
> 时间：2013-01-05T16:50:26.953
> 
> 标签：android, android-linearlayout, calculator

我是 android 应用程序开发的新手。我正在尝试创建一个计算器应用程序，我有 2 个问题要问。

**1.** 如何在LinearLayout中新建一行？它目前看起来像这样：

[文本视图][文本视图][按钮]

我希望它看起来像这样：

[文本视图][文本视图]

[按钮]

这是我的 xml 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="horizontal"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/number1"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/number1" />

<TextView
    android:id="@+id/number2"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/number2" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_calculate" /> 
```

**2.**如何处理“number1”和“number2”Textviews的总和并将其显示在Main Activity（TextViews所在的位置）上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:55:15.920

线性布局可以是水平或垂直的，如果您需要行和列，则需要使用相对布局，或者只需添加一个以上的线性布局，例如..

```
TextView txtvar = (TextView) findViewById(R.id.textViewIdFromXml);
txtvar.setText("blah"); 
```

这就是你如何连接到带有 id textViewIdFromXml 的 textview 元素并为文本设置 blah

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:58:39.047

1.  Nested linear layouts.

For example (pseudo xml):

```
<Linear Layout : Vertical>
   <Linear Layout : Horizontal>
       <TextView />
       <TextView />
   </Linear Layout>
   <Button />
</Linear Layout> 
```

Edit: I tried the following in Eclipse and for me it does what I think you ask (though it doesn't look fancy):

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:32:34.063

**第一个答案：**创建一个垂直线性布局并使用嵌套在垂直布局中的水平布局。但我更喜欢相对布局。

**2ns Ans：**用于`onClickListener()`按钮。& 在每次`onClickListener()`更改数字显示文本框的文本下使用`setText()`. 但是在 = 按钮上`onClickListener()`使用数字显示文本框的值，`getText()`并将其用于 + - 或 * /

# java - 继续声明不起作用

> ID：14174025
> 
> 赞同：0
> 
> 时间：2013-01-05T16:50:28.573
> 
> 标签：java

我是java新手

```
int nop=o;
BufferedReader scan = new BufferedReader( new InputStreamReader(System.in));
come_here:
System.out.println("Enter length");
try{
    int n=Integer.parseInt(scan.readLine());
nop=n;
}catch(Exception sandy){
    System.out.println("Please Enter Numericals only");
    continue come_here;
} 
```

如果用户输入任何字符串而不是数字发生异常并打印“请仅输入数字”并且编译器执行下一条语句，这里正在丢失用户输入以克服我使用标签（`come here:`），如果发生异常，它会显示“请仅输入数字” “之后我希望程序再次接受用户输入，我使用了继续`come_here;` 但它不起作用？

有人告诉我在哪里做错了吗？以及如何解决

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:58:13.510

This is not valid Java. I would instead write the code as follows:

```
 int nop = 0;
    BufferedReader scan = new BufferedReader(new InputStreamReader(System.in));
    for (;;) {
        System.out.println("Enter length");
        try {
            int n = Integer.parseInt(scan.readLine());
            nop = n;
            break;
        } catch (Exception sandy) {
            System.out.println("Please Enter Numericals only");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:58:11.793

I'm not saying this is the optimal way of solving this problem, but perhaps you are looking for something like this. I replaced your `goto`-statement with a `while(true)` loop. The `while` loop quits once the integer has successfully been parsed.

```
int nop=0;
BufferedReader scan = new BufferedReader( new InputStreamReader(System.in));
while (true) {
    System.out.println("Enter length");
    try {
        int n=Integer.parseInt(scan.readLine());
        nop=n;
        break;
    } catch(Exception sandy){
        System.out.println("Please Enter Numericals only");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:58:15.143

You're trying to do a user input loop, but the trick is that Java doesn't allow [`goto`](https://stackoverflow.com/a/2545141/1079354) to actually be *used* - it's a reserved word, but it won't compile.

Here's what you can do in simpler steps:

*   [Initialize a `Scanner` object with the `System.in` InputStream passed in](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.InputStream))
*   Use a `do...while` loop:
    *   Prompt the user for input
    *   Try to parse it using `Integer.parseInt()`
    *   Catch the exception that results if they enter in a dollar sign
    *   Prompt them saying what the valid input is
    *   ...while we don't have some valid input.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T16:53:51.050

参考这里[继续使用](http://www.roseindia.net/java/beginners/continue.shtml)，用法和你学的不一样

以下代码可用于读取整数值

```
int nop=o;
BufferedReader scan = new BufferedReader( new InputStreamReader(System.in));
for(;;) {
        System.out.println("Enter length");
        try{
        int n=Integer.parseInt(scan.readLine());
        nop=n;
break;
            }catch(Exception sandy){
                System.out.println("Please Enter Numericals only");
            }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T17:19:27.723

标签在 Java 中的功能与在 Basic 或 C/C++ 等其他语言中的功能不同。

它们标记了一个循环，而不是您可以跳转到的命令。通常，只有在嵌套循环时才需要它们。像这样：

```
 loop_i: for (int i = 0; i < 10; i++) {
        loop_j: for (int j = 0; j < 10; j++) {
            System.out.println(i + " " + j);
            if (j == 7) {
                // we want to jump out of the inner loop
                break loop_j; // or just break;
            }
            if (i == 3 && j == 4) {
                // now we want to jump out of both loops
                break loop_i;
            }
        }
    } 
```

该示例使用 break 是因为它们更易于解释。但是在标签问题上继续有相同的规则。

# iphone - 如何正确编码一些文本

> ID：14174026
> 
> 赞同：0
> 
> 时间：2013-01-05T16:50:28.410
> 
> 标签：iphone, objective-c, ios, utf-8, nsstring

我有一些需要解决的文本格式问题。我从下面的 NSString 中显示了一些奇怪的字符

原始字符串：

```
NSString *descriptionStringPreFormatted = [item objectForKey:@"title"]; 
```

格式化的字符串：

```
 NSString *descriptionLabelStringUTF8 = [descriptionStringPreFormatted stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSLog(@"descriptionStringPreFormatted is %@", descriptionStringPreFormatted);
    NSLog(@"descriptionLabelStringUTF8 is %@", descriptionLabelStringUTF8); 
```

无论我是否使用 UTF8 编码，这都是相同的输出。

输出：

```
2013-01-05 16:44:51.807 descriptionStringPreFormatted is Â£144.99... 

2013-01-05 16:44:51.810 descriptionLabelStringUTF8 is Â£144.99... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:58:46.833

我认为您正在从 Web 服务接收字典“项目”。所以尝试使用 NSUTF8StringEncoding 解码来自 web 服务的响应字符串。NSString *str=[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]; 这里的“responseData”是来自网络服务的原始数据。

# php - 在 php 中的逗号后的第二个空格上拆分一个字符串（使用正则表达式？）

> ID：14174034
> 
> 赞同：0
> 
> 时间：2013-01-05T16:51:43.397
> 
> 标签：php, regex, string, split

我对正则表达式完全陌生，但我想正则表达式是解决这个问题的方法：

我必须使用包含意大利街道地址的 PHP 字符串进行拆分。

它们是这样组成的：

***街道名称、号码 邮政编码 城市***

我需要将其拆分为 2 行单独打印，如下所示：

***街道名称、号码***

***邮政编码城市***

有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:01:03.287

```
preg_match('/^([^,]+, [^ ]+) (.*)/', $text, $matches);
echo $matches[1] . "\n" . $matches[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:26:45.933

试试这个：

```
preg_match('/^(.+,.+) (.+ .+)$/', $text, $matches); 
```

它将把“街道名称，号码”`$matches[1]`和“邮政编码城市”放在`$matches[2]`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T17:00:55.783

尝试使用`explode()`. 例子：

```
$str = 'Street Name, Number ZipCode City';
$ar_str = explode(', ', $str);
$ar2_str = explode(' ', $ar_str[1], 2);
$ar_str[0] .= ', '. $ar2_str[0];

// First needed substring is in $ar_str[0], seccond substring in $ar2_str[1]
// test
echo $ar_str[0] .'<br/>'. $ar2_str[1]; 
```

# solr - SolrNet 结合 SolrQueryByDistance 和 SolrQueryByField

> ID：14174036
> 
> 赞同：1
> 
> 时间：2013-01-05T16:52:19.280
> 
> 标签：solr, solrnet

我尝试以下方法：

```
Dim q = New SolrQueryByField("tag", keyword) With {.Quoted = False} Or New SolrQueryByField("cat", keyword) With {.Quoted = False} Or New SolrQueryByField("shortname", keyword) With {.Quoted = False}

Dim loc As New Location(latitude, longitude)
Dim qgeo = New SolrQueryByDistance("geo", loc, 10)

searchresults = solr.Query(q And qgeo).Cast(Of BusinessSolr)().ToList 
```

哪个不起作用：

```
Value of type 'SolrNet.SolrQueryByDistance' cannot be converted to 'SolrNet.AbstractSolrQuery'. 
```

(q 和 qgeo)

任何想法，关于如何将 fieldquery 与 distance 结合起来？如果可能在 VB.NET 中。很多

顺便说一句：我使用 Solr 4，SolrNet 实际版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:16:41.720

我试图重新创建您的场景并遇到了同样的问题。在查看 SolrQueryByDistance 的源代码时，我发现它不是从 AbstractSolrQuery 类派生的，这就是导致此错误的原因。

您能否将距离查询用作[过滤查询](http://wiki.apache.org/solr/CommonQueryParameters#fq)（将主查询的结果限制为仅在给定距离内的那些项目）？如果是这样，您可以使用以下内容：

```
Dim q = New SolrQueryByField("tag", keyword) With {.Quoted = False} Or New SolrQueryByField("cat", keyword) With {.Quoted = False} Or New SolrQueryByField("shortname", keyword) With {.Quoted = False}

Dim loc As New Location(latitude, longitude)
Dim options = New QueryOptions() With { _
.FilterQueries = New ISolrQuery() {New SolrQueryByDistance("geo", loc, 10)} _
}

searchresults = solr.Query(q, options).Cast(Of BusinessSolr)().ToList 
```

# ruby-on-rails - 在 Rails 中上传文件

> ID：14174044
> 
> 赞同：81
> 
> 时间：2013-01-05T16:53:17.667
> 
> 标签：ruby-on-rails, ruby, file-upload, file-io

我是 Rails 新手，我正在使用 CRUD 技术编写一个 RESTful 网站。到目前为止，我已经创建了三个页面，所有这些页面都允许用户从数据库中创建、编辑和删除一行。但是，我的第四页需要包含一个上传文件表单，但是 a) 我不知道文件系统如何与 Rails 一起工作，因此我不知道文件应该存储在哪里。该文件大约为 100kb，无法存储在临时存储中，因为它会不断下载。b）我不知道如何写入文件。

如果您能告诉我如何执行我上面提到的操作，那就太好了 - 在输入表单上创建上传输入，然后将文件写入单独目录中的文件路径。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-01-05T17:13:47.800

**2018 年更新**

虽然下面写的所有内容仍然适用，但 Rails 5.2 现在包含`active_storage`，它允许直接上传到 S3（或其他云存储服务）、图像转换等内容。您应该查看[rails 指南](https://edgeguides.rubyonrails.org/active_storage_overview.html)并自行决定适合您的需求。

* * *

虽然有很多 gem 可以很好地解决文件上传问题（有关列表，请参见[https://www.ruby-toolbox.com/categories/rails_file_uploads](https://www.ruby-toolbox.com/categories/rails_file_uploads)），但 rails 具有内置帮助程序，可以轻松推出自己的解决方案。

在表单中使用`file_field`-form 助手，rails 会为您处理上传：

```
<%= form_for @person do |f| %>
  <%= f.file_field :picture %>
<% end %> 
```

您将可以在控制器中访问上传的文件，如下所示：

```
uploaded_io = params[:person][:picture]
File.open(Rails.root.join('public', 'uploads', uploaded_io.original_filename), 'wb') do |file|
  file.write(uploaded_io.read)
end 
```

这取决于您想要实现的目标的复杂性，但这对于简单的文件上传/下载任务来说已经足够了。这个例子取自 rails guides，你可以去那里获取更多信息： http: [//guides.rubyonrails.org/form_helpers.html#uploading-files](http://guides.rubyonrails.org/form_helpers.html#uploading-files)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-21T18:21:19.153

**2018 年 9 月**

对于最近检查此问题的任何人，[Rails 5.2+ 现在默认具有 ActiveStorage，我强烈建议检查一下。](https://guides.rubyonrails.org/active_storage_overview.html)

由于它现在是核心 Rails 5.2+ 的一部分，因此它集成得非常好，并且具有开箱即用的出色功能（仍然所有其他知名的宝石，如 Carrierwave、Shrine、回形针……都很棒，但这个提供了非常我们可以为任何新的 Rails 项目考虑的好特性）

Paperclip 团队弃用了 gem，转而使用 Rails ActiveStorage。

[这是 ActiveStorage 的 github 页面，](https://github.com/rails/rails/tree/master/activestorage)到处都有大量资源可用

[我还发现这个视频](https://gorails.com/episodes/file-uploading-with-activestorage-rails-5-2)对了解 Activestorage 的功能非常有帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T17:08:10.000

有一个很好的宝石，专门用于上传文件：[carrierwave](https://github.com/jnicklas/carrierwave)。如果 wiki 没有帮助，有一个[很好的 RailsCast](http://railscasts.com/episodes/253-carrierwave-file-uploads)关于使用它的最佳方法。总而言之，`file`Rails 表单中有一个字段类型，它调用文件上传对话框。您可以使用它，但“魔法”是由`carrierwave`gem 完成的。

我不知道“如何写入文件”是什么意思，但我希望这是一个好的开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-23T06:55:20.947

好的。如果您不想将文件存储在数据库中并存储在应用程序中，例如资产（自定义文件夹），您可以定义 attr_accessor 定义的非db实例变量：文档并使用`form_for - f.file_field`来获取文件，

在控制器中，

```
 @person = Person.new(person_params) 
```

这里`person_params`返回白名单`params[:person]`（定义自己）

将文件另存为，

```
dir = "#{Rails.root}/app/assets/custom_path"
FileUtils.mkdir(dir) unless File.directory? dir
document = @person.document.document_file_name # check document uploaded params
File.copy_stream(@font.document, "#{dir}/#{document}") 
```

注意，`.gitignore`如果您想再次使用此文件，请将此路径添加到 &中，请添加此`asset_path`应用程序的路径`application.rb`

每当表单读取文件字段时，它都会存储在 tmp 文件夹中，稍后您可以存储在您的位置，我举了存储在资产中的示例

**注意**：像这样存储文件会增加应用程序的大小，最好使用`paperclip`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-20T08:06:10.667

在你的初始化器/carrierwave.rb

```
if Rails.env.development? || Rails.env.test?
    config.storage = :file
    config.root = "#{Rails.root}/public"
    if Rails.env.test?
      CarrierWave.configure do |config|
        config.storage = :file
        config.enable_processing = false
      end
    end
 end 
```

在本地运行时使用它存储在文件中

# cmake - 在 Beagleboard 上编译 - 在 AR 上失败

> ID：14174045
> 
> 赞同：0
> 
> 时间：2013-01-05T16:53:29.367
> 
> 标签：cmake, beagleboard, unix-ar

我正在 Beagleboard-Xm 内核上编译：

```
root@beagleboard:~# uname -a
Linux beagleboard 2.6.32 #3 PREEMPT Tue Jul 26 10:56:56 CEST 2011 armv7l unknown 
```

我现在尝试用 CMake 编译一个静态库，一切正常，直到涉及到库的链接：

```
root@beagleboard:/usr/src/build/beaglebuild# make
Scanning dependencies of target phoenix_base
[  2%] Building CXX object 00_phoenix_base/CMakeFiles/phoenix_base.dir/src/exec_buffer.cpp.o
[  5%] Building CXX object 00_phoenix_base/CMakeFiles/phoenix_base.dir/src/func_buffer.cpp.o
[  8%] Building CXX object 00_phoenix_base/CMakeFiles/phoenix_base.dir/src/worker.cpp.o
[ 11%] Building CXX object 00_phoenix_base/CMakeFiles/phoenix_base.dir/src/workermanager.cpp.o
[ 14%] Building CXX object 00_phoenix_base/CMakeFiles/phoenix_base.dir/src/command.cpp.o
[ 17%] Building CXX object 00_phoenix_base/CMakeFiles/phoenix_base.dir/src/logger.cpp.o
[ 20%] Building CXX object 00_phoenix_base/CMakeFiles/phoenix_base.dir/src/signal.cpp.o
Linking CXX static library libphoenix_base.a
BusyBox v1.13.2 (2011-02-25 16:46:47 CET) multi-call binary

Usage: ar [-o] [-v] [-p] [-t] [-x] ARCHIVE FILES

Extract or list FILES from an ar archive

Options:
    -o  Preserve original dates
    -p  Extract to stdout
    -t  List
    -x  Extract
    -v  Verbose

make[2]: *** [00_phoenix_base/libphoenix_base.a] Error 1
make[1]: *** [00_phoenix_base/CMakeFiles/phoenix_base.dir/all] Error 2
make: *** [all] Error 2 
```

在我的“ar --help”中打印相同的东西。

有没有办法让链接在板上运行？可能是什么问题？

其他一些系统版本：

```
root@beagleboard:~# cmake --version
cmake version 2.8.2
root@beagleboard:~# g++ --version
g++ (GCC) 4.3.3
Copyright (C) 2008 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:24:19.553

在经历了很多麻烦之后，我交叉编译了一个完全最新的 ar 版本（我认为板上的那个版本已经过时了）并且我摆脱了 BusyBox。

现在一切都按我的预期工作。

# python - 为什么模块“zipfile”的“is_zipfile”函数总是返回“false”？

> ID：14174048
> 
> 赞同：0
> 
> 时间：2013-01-05T16:53:41.937
> 
> 标签：python

根据 python 文档[`zipfile.is_zipfile(filename)`](http://docs.python.org/2/library/zipfile#zipfile.is_zipfile)函数，如果文件名是有效的 ZIP 文件，则返回 True，否则返回 False。

我编写了如下脚本，最初传递了一个参数并得到“False”，但对于其他有效参数，我也一直在得到`False`。

### 脚本：

```
import zipfile

for filename in [ r'D:\Python_Programs\B1', r'D:\Python_Programs\B2', r'D:\Python_Programs\B1+B2\20130105\144145_1.zip', 'NEWS.txt']:
    print (filename, zipfile.is_zipfile(filename)) 
```

### 结果：

```
D:\Python_Programs\B1 False
D:\Python_Programs\B2 False
D:\Python_Programs\B1+B2\20130105\144145_1.zip False
NEWS.txt False 
```

任何人都可以帮助我为什么我每次都得到 False ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:29:56.810

正如评论所确定的那样，`is_zipfile`正在返回，`False`因为该文件实际上不是 zip 文件——它是一个伪装的 RAR 文件。文件扩展名可能会在不知不觉中被更改。WinRAR 能够同时处理 zip 和 RAR 文件，因此无论文件的实际扩展名如何，它都可以打开文件，但仅处理 zip 文件的程序无法打开它。

文件类型通常可以通过检查文件的前几个字节并寻找各种所谓的魔术常量来识别。这正是 Unix 实用程序的目的[`file(1)`](http://linux.die.net/man/1/file)。一个 zip 文件*通常*由开头的两个魔术字节`PK`（更具体地说，四个字节 0x50 0x4B 0x74 0x08）标识，尽管 zip 文件有一个特殊属性，即它们实际上是由*末尾*的特定数据结构标识的文件。其结果是一些有趣的隐写技术，例如[这个技巧](https://web.archive.org/web/20150925062822/https://gayhacker.wordpress.com/2009/04/03/well-well-well/)。但在实践中你不会经常看到这种情况——几乎所有（如果不是全部）标准 zip 工具都会创建以 .zip 开头的 zip 文件`PK`。

# php - PHP自我提交表单将行插入MySQL

> ID：14174053
> 
> 赞同：0
> 
> 时间：2013-01-05T16:54:01.197
> 
> 标签：php, mysql

我正在尝试制作一个 PHP 自我提交表单，它将行插入到 MySQL 表中。这是代码

```
<?php
if(isset($_POST['submit']))
{

$con = mysql_connect("localhost","calendar","calendar");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ecalendar", $con);

$start = $_POST['start'];
$end = $_POST['end'];
$title = $start.'-'.$end;

$sql="INSERT INTO events (title, description, evdate) VALUES ('$title','$_POST[description]','$_POST[evdate]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);

}
?>

<html>
<head>
<title>Form Input Data</title>

<link rel="stylesheet" href="/jquery/jquery-ui.css" />
<script src="/jquery/jquery-1.8.3.js"></script>
<script src="/jquery/jquery-ui.js"></script>
<script src="/jquery/jquery.ui.timepicker.js"></script>

<script>
$(function () {
    $("#evdate").datepicker();
});
$(function () {
    $("#start").timepicker();
});
$(function () {
    $("#end").timepicker();
});
</script>
</head>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<p>Interval Orar</p>

<input type="text" id="start" name="start" />
<input type="text" id="end" name="end" />

<p>Data
<br />
<input type="text" id="evdate" name="evdate" />
</p>
<p>Eveniment
<br />
<textarea name='description'></textarea>
</p>
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

我可以填写表格，点击按钮，但没有任何反应。甚至没有错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:59:00.187

更改以下内容

```
<input type="submit" value="Submit"> 
```

到

```
<input type="submit" value="Submit" name="submit"> 
```

只有在提交命名数据存在时才插入

IE

```
if(isset($_POST['submit'])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:58:10.120

您不能在提交表单输入中没有名称的情况下使用 $_POST['submit']，因此请使用输入来检查表单是否已设置。

```
 if(isset($_POST['start']) && isset($_POST['end']) && isset($_POST['evdate']) && isset($_POST['description'])) 
```

# php - 通过 FILTER_SANITIZE_STRING

> ID：14174054
> 
> 赞同：0
> 
> 时间：2013-01-05T16:54:09.033
> 
> 标签：php, filter, mysqli

我有一个这样的查询：

```
$query="select * from news where news_id = (select max(news_id) from news where news_id< $id)"; 
```

执行我使用类。在这个班级

```
public function query($query) 
{
  $this->_query = filter_var($query, FILTER_SANITIZE_STRING);
  $stmt = $this->_prepareQuery();
  $stmt->execute();
  $results = $this->_dynamicBindResults($stmt);
  return $results;
} 
```

有什么方法`<`可以不过滤信号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:48:20.017

不幸的是，整个想法是错误的。`FILTER_SANITIZE_STRING`一点帮助都没有。更不用说它只是破坏你的SQL。

为了保护 SQL 免受注入，您必须使用准备好的语句。因此，不要直接向查询添加变量，而是添加问号。然后像这样把这个变量放入执行中

```
public function query($query, $params) 
{
    $stmt = $this->mysqli->prepare();
    $types = $types ?: str_repeat("s", count($params));
    $stmt->bind_param($types, ...$params);
    $stmt->execute();
    return $stmt->get_result();
} 
```

然后就这样使用它

```
$query="select * from news where news_id = (select max(news_id) from news where news_id<?)";
$data = $db->query($query, [$id])->fetch_all(MYSQLI_ASSOC) 
```

# javascript - 原生 addEventListener 与 jQuery 中的 .on() 等选择器

> ID：14174056
> 
> 赞同：32
> 
> 时间：2013-01-05T16:54:14.347
> 
> 标签：javascript, jquery, dom-events

有谁知道 jQuery 的`.on()`方法是如何在原生 JS 中实现的？该`addEventListener`方法不采用子/选择器元素作为过滤方式，而且我认为我没有适当的冒泡/捕获知识来完全理解那里发生的事情。我确实在 event.js 中查阅了源代码，它似乎最终`addEventListener`会像往常一样被使用，但我不确定我是否完全了解源代码。

如果本机方法不提供利用冒泡和捕获的机制，那么 jQuery`.on()`函数真的有任何好处吗，或者它只是让它看起来那样？我的印象是

```
.on('parent', '.child', fn(){}); 
```

比单独将事件附加到所有孩子更有效，但从我对源代码的解释来看，很难判断 jQuery 是否以某种方式管理它以提高性能，或者它是否只是为了可读性。

是否有一种标准方法可以在父级上实现事件，利用其子元素的冒泡/捕获阶段，而不是必须将事件附加到每个单独的子级？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-01-30T20:40:42.740

本地执行事件委托：

```
parent.addEventListener('click', function(e) {
    if(e.target.classList.contains('myclass')) {
        // this code will be executed only when elements with class 
        // 'myclass' are clicked on
    }
}); 
```

您所指的效率与您添加多少事件处理程序有关。想象一个有 100 行的表。将单个事件处理程序附加到表元素然后“委托”到每一行比附加 100 个事件处理程序（每行 1 个）效率更高。

事件委托起作用的原因是因为单击事件实际上会在子级和父级上触发（因为您正在单击父级中的一个区域）。**上面的代码片段触发父级的点击事件，但仅在事件目标**的条件返回 true 时执行，从而模拟直接附加的事件处理程序。

冒泡/捕获是一个相关问题，但如果多个事件处理程序触发的顺序很重要，您只需要担心它。如果您有兴趣了解冒泡与捕获，我建议您进一步阅读[事件顺序。](http://www.quirksmode.org/js/events_order.html)

事件委托最常见的好处是它处理附加事件处理程序后添加到 DOM 的新元素。以上面带有点击处理程序的 100 行表为例。如果我们使用直接事件处理程序附件（100 个事件处理程序），那么添加的新行将需要手动添加事件处理程序。如果我们使用委托事件，那么新行将自动“拥有”事件处理程序，因为从技术上讲，它已添加到将接收所有未来事件的父级。阅读[什么是 DOM 事件委托](https://stackoverflow.com/questions/1687296/what-is-dom-event-delegation)，正如 Felix Kling 建议的那样，了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-16T14:06:13.910

添加到公认的答案：因为通常实际的事件目标将嵌套在您要将侦听器绑定到的元素中，所以最好查询父级（Element.closest() 包括元素本身）。这也适用于复杂的 CSS 选择器，而不仅仅是单个类。

```
<button><span>button with</span><span>multiple click targets</span></button>

function addListener(el, type, callbackFn, selector) {
    el.addEventListener(type, e => {
        const target = e.target.closest(selector);
        if (target) callbackFn.call(target, e);
    }, true);
}
addListener(document, "click", e => console.log("clickediclick"), "button"); 
```

# c# - 在 WinRT 应用中搜索谷歌

> ID：14174063
> 
> 赞同：2
> 
> 时间：2013-01-05T16:54:59.880
> 
> 标签：c#, windows-runtime, html-parsing

我正在尝试向我的 WinRT 应用程序添加谷歌搜索功能。我必须在不使用 google api 的情况下做到这一点。我检索了谷歌搜索页面，但它是一个 html 标签丛林。如何解析此搜索页面以分别获取每个搜索结果？

```
string url = "http://www.google.com/search?q=" + txtSearchKey.Text.Trim();
                System.Net.Http.HttpClient client = new System.Net.Http.HttpClient();
               System.Net.Http.HttpResponseMessage resp = await client.GetAsync(url);
               txtResult.Text = await resp.Content.ReadAsStringAsync(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:15:44.940

您可以尝试使用可以从 nuget 或从[此处获得的 HTMLAgility Pack](http://htmlagilitypack.codeplex.com/)

# ruby-on-rails - 具有多个角色的设计中的错误 URL

> ID：14174066
> 
> 赞同：1
> 
> 时间：2013-01-05T16:55:14.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

在设计中定义两个角色并`rails g devise:views`为每个角色运行后，我遇到了视图中使用的 URL 帮助程序的问题。

例如，`new_session_path(:client)`返回`/session/new.client`而不是`/clients/session/new`.

在我的顶部，我没有修改`routes.rb`这两个`devise_for`指令，没有修改任何路径。

知道为什么会发生这种情况，以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:01:23.590

我认为您可以尝试使用 cancan，它为您提供了一种更好的方式来定义所有角色，并限制所有角色访问每个控制器。

# php - Laravel 中自动删除相关行（Eloquent ORM）

> ID：14174070
> 
> 赞同：194
> 
> 时间：2013-01-05T16:55:28.967
> 
> 标签：php, laravel, eloquent, eloquent-relationship

当我使用此语法删除一行时：

```
$user->delete(); 
```

有没有办法附加各种回调，例如它会自动执行此操作：

```
$this->photo()->delete(); 
```

最好在模型类内部。

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2013-11-20T22:05:56.767

我相信这是 Eloquent 事件（[http://laravel.com/docs/eloquent#model-events](http://laravel.com/docs/eloquent#model-events)）的完美用例。您可以使用“删除”事件进行清理：

```
class User extends Eloquent
{
    public function photos()
    {
        return $this->has_many('Photo');
    }

    // this is a recommended way to declare event handlers
    public static function boot() {
        parent::boot();

        static::deleting(function($user) { // before delete() method call this
             $user->photos()->delete();
             // do the rest of the cleanup...
        });
    }
} 
```

您可能还应该将整个事物放入事务中，以确保引用完整性..

* * *

## 回答 #2

> 赞同：232
> 
> 时间：2013-01-05T20:56:24.840

您实际上可以在迁移中进行设置：

`$table->foreign('user_id')->references('id')->on('users')->onDelete('cascade');`

资料来源： http: [//laravel.com/docs/5.1/migrations#foreign-key-constraints](http://laravel.com/docs/5.1/migrations#foreign-key-constraints)

> 您还可以为约束的“on delete”和“on update”属性指定所需的操作：
> 
> ```
> $table->foreign('user_id')
>       ->references('id')->on('users')
>       ->onDelete('cascade'); 
> ```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2013-01-05T17:23:47.043

> **注意**：这个答案是为**Laravel 3**编写的。因此，在更新版本的 Laravel 中可能会或可能不会很好地工作。

您可以在实际删除用户之前删除所有相关照片。

```
<?php

class User extends Eloquent
{

    public function photos()
    {
        return $this->has_many('Photo');
    }

    public function delete()
    {
        // delete all related photos 
        $this->photos()->delete();
        // as suggested by Dirk in comment,
        // it's an uglier alternative, but faster
        // Photo::where("user_id", $this->id)->delete()

        // delete the user
        return parent::delete();
    }
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2015-01-06T19:13:15.660

用户模型中的关系：

```
public function photos()
{
    return $this->hasMany('Photo');
} 
```

删除记录及相关：

```
$user = User::find($id);

// delete related   
$user->photos()->delete();

$user->delete(); 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2018-09-14T23:02:37.810

有3种方法可以解决这个问题：

**1\. 在模型启动时使用 Eloquent 事件**（参考：[https](https://laravel.com/docs/5.7/eloquent#events) ://laravel.com/docs/5.7/eloquent#events ）

```
class User extends Eloquent
{
    public static function boot() {
        parent::boot();

        static::deleting(function($user) {
             $user->photos()->delete();
        });
    }
} 
```

**2\. 使用 Eloquent Event Observers**（参考：[https](https://laravel.com/docs/5.7/eloquent#observers) ://laravel.com/docs/5.7/eloquent#observers ）

在您的 AppServiceProvider 中，像这样注册观察者：

```
public function boot()
{
    User::observe(UserObserver::class);
} 
```

接下来，添加一个 Observer 类，如下所示：

```
class UserObserver
{
    public function deleting(User $user)
    {
         $user->photos()->delete();
    }
} 
```

**3\. 使用外键约束**（参考：[https](https://laravel.com/docs/5.7/migrations#foreign-key-constraints) ://laravel.com/docs/5.7/migrations#foreign-key-constraints ）

```
$table->foreign('user_id')->references('id')->on('users')->onDelete('cascade'); 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2016-05-18T18:15:52.013

从 Laravel 5.2 开始，[文档声明](https://laravel.com/docs/5.2/eloquent#events)这些类型的事件处理程序应该在 AppServiceProvider 中注册：

```
<?php
class AppServiceProvider extends ServiceProvider
{
    /**
     * Bootstrap any application services.
     *
     * @return void
     */
    public function boot()
    {
        User::deleting(function ($user) {
            $user->photos()->delete();
        });
    } 
```

我什至想将它们移动到单独的类而不是闭包中以获得更好的应用程序结构。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-07-04T05:48:11.747

最好覆盖此`delete`方法。这样，您可以将数据库事务合并到`delete`方法本身中。如果您使用事件方式，则`delete`每次调用时都必须使用数据库事务覆盖您的方法调用。

在你的`User`模型中。

```
public function delete()
{
    \DB::beginTransaction();

     $this
        ->photo()
        ->delete()
    ;

    $result = parent::delete();

    \DB::commit();

    return $result;
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-01-16T20:06:58.810

要详细说明所选答案，如果您的关系也有必须删除的子关系，则必须先检索所有子关系记录，然后调用该`delete()`方法，以便它们的删除事件也被正确触发。

您可以使用[高阶消息](https://laravel.com/docs/5.7/collections#higher-order-messages)轻松完成此操作。

```
class User extends Eloquent
{
    /**
     * The "booting" method of the model.
     *
     * @return void
     */
    public static function boot() {
        parent::boot();

        static::deleting(function($user) {
             $user->photos()->get()->each->delete();
        });
    }
} 
```

您还可以通过仅查询关系 ID 列来提高性能：

```
class User extends Eloquent
{
    /**
     * The "booting" method of the model.
     *
     * @return void
     */
    public static function boot() {
        parent::boot();

        static::deleting(function($user) {
             $user->photos()->get(['id'])->each->delete();
        });
    }
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-05-28T08:53:49.820

## 使用`Constrained()`

在**Laravel 7**之后，新的`foreignId()`和`constrained()`方法可用于在数据库中定义关系约束。`OnDelete()`可以在这些方法上使用方法来自动删除相关记录。

### 老式

```
$table->unsignedBigInterer('user_id');

$table->foreign('user_id')
    ->references('id')
    ->on('users')
    ->onDelete('cascade'); 
```

### 新风格

```
$table->foreignId('user_id')
      ->constrained()
      ->onDelete('cascade'); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-02-21T20:40:30.863

在删除对象本身之前，我将遍历集合以分离所有内容。

这是一个例子：

```
try {
        $user = User::findOrFail($id);
        if ($user->has('photos')) {
            foreach ($user->photos as $photo) {

                $user->photos()->detach($photo);
            }
        }
        $user->delete();
        return 'User deleted';
    } catch (Exception $e) {
        dd($e);
    } 
```

我知道它不是自动的，但它非常简单。

另一种简单的方法是为模型提供一种方法。像这样：

```
public function detach(){
       try {

            if ($this->has('photos')) {
                foreach ($this->photos as $photo) {

                    $this->photos()->detach($photo);
                }
            }

        } catch (Exception $e) {
            dd($e);
        }
} 
```

然后，您可以在需要的地方简单地调用它：

```
$user->detach();
$user->delete(); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-07T08:11:55.420

就我而言，这非常简单，因为我的数据库表是带有外键的 InnoDB，删除时带有 Cascade。

因此，在这种情况下，如果您的照片表包含用户的外键引用，那么您所要做的就是删除酒店并且清理将由数据库完成，数据库将从数据中删除所有照片记录根据。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-11-30T07:28:58.587

这种方式在 Laravel 8 上对我有用：

```
public static function boot() {

    parent::boot();

    static::deleted(function($item){
        $item->deleted_by = \Auth::id(); // to know who delete item, you can delete this row
        $item->save();  // to know who delete item, you can delete this row
        foreach ($item->photos as $photo){
            $photo->delete();
        }
    });
}

public function photos()
{
    return $this->hasMany('App\Models\Photos');
} 
```

注意：以这种语法删除`$user->photos()->delete();`对我不起作用......

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-22T07:47:30.877

或者您可以根据需要执行此操作，只是另一种选择：

```
try {
    DB::connection()->pdo->beginTransaction();

    $photos = Photo::where('user_id', '=', $user_id)->delete(); // Delete all photos for user
    $user = Geofence::where('id', '=', $user_id)->delete(); // Delete users

    DB::connection()->pdo->commit();

}catch(\Laravel\Database\Exception $e) {
    DB::connection()->pdo->rollBack();
    Log::exception($e);
} 
```

请注意，如果您没有使用默认的 laravel db 连接，那么您需要执行以下操作：

```
DB::connection('connection_name')->pdo->beginTransaction();
DB::connection('connection_name')->pdo->commit();
DB::connection('connection_name')->pdo->rollBack(); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-16T04:16:35.623

这里有完美的解决方案。

```
# model

public function order_item_properties()
{
    return $this->hasMany(OrderItemProperty::class, 'order_id', 'id');
}

public function order_variations()
{
    return $this->hasMany(OrderItemVariation::class, 'order_id', 'id');
}

# controller

$order_item = OrderItem::find($request->order_id);

$order_item->order_item_properties()->delete();
$order_item->order_variations()->delete();

$order_item->delete();

return response()->json([
    'message' => 'Deleted',
]); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-30T08:16:22.510

在定义模型的迁移时最好使用 onDelete 级联。这会为您删除模型的关系：

例如

```
 $table->foreign(’user_id’)
  ->references(’id’)->on(’users’)
  ->onDelete(’cascade’); 
```

如果您碰巧发现自己正在考虑如何将模型及其关系删除到大于 3 或 4 个嵌套关系的级别，那么您应该考虑重新定义模型的关系。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-09-24T12:38:58.743

是的，但是正如@supersan 在评论中所说的那样，如果您在 QueryBuilder 上 delete() ，则不会触发模型事件，因为我们没有加载模型本身，然后在该模型上调用 delete() 。

仅当我们在模型实例上使用删除函数时才会触发事件。

所以，这只蜜蜂说：

```
if user->hasMany(post)
and if post->hasMany(tags) 
```

为了在删除用户时删除帖子标签，我们必须迭代`$user->posts`并调用`$post->delete()`

`foreach($user->posts as $post) { $post->delete(); }`-> 这将触发 Post 上的删除事件

VS

`$user->posts()->delete()`-> 这不会触发 post 上的删除事件，因为我们实际上并没有加载 Post 模型（我们只运行类似的 SQL：`DELETE * from posts where user_id = $user->id`因此，甚至没有加载 Post 模型）

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2019-04-17T10:53:05.297

您可以使用此方法作为替代方法。

将会发生的是我们获取与用户表关联的所有表并使用循环删除相关数据

```
$tables = DB::select("
    SELECT
        TABLE_NAME,
        COLUMN_NAME,
        CONSTRAINT_NAME,
        REFERENCED_TABLE_NAME,
        REFERENCED_COLUMN_NAME
    FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE
    WHERE REFERENCED_TABLE_NAME = 'users'
");

foreach($tables as $table){
    $table_name =  $table->TABLE_NAME;
    $column_name = $table->COLUMN_NAME;

    DB::delete("delete from $table_name where $column_name = ?", [$id]);
} 
```

# css - 火狐+IE10。如何强制内联块尊重其内部浮动+溢出的全宽：隐藏的 div？

> ID：14174071
> 
> 赞同：2
> 
> 时间：2013-01-05T16:55:30.847
> 
> 标签：css, firefox, internet-explorer-10

**编辑于 30.04.13：IE10 似乎摆脱了描述的行为，我们现在唯一可以看到这种行为的浏览器是 Firefox**

我希望一个 div`(.side)`在 inline-block 内浮动`(.wrap)`，并且我希望另一个 div`(.content)`包含带有 text-overflow: 省略号的长非环绕字符串，以防溢出。也不`.wrap`应该比它的容器宽，所以它有 max-width: 100%。

当内容的`.content`宽度与宽度相结合的宽度`.side`足以比 a 的容器宽时`.wrap`- 内容`.content`应该溢出它。

并且当内容的`.content`宽度与宽度的组合`.side`小于 a `.wrap`- 的容器宽度时，应该没有溢出`.content`，而`.wrap`应该取宽度`.content`并`.side`组合。似乎如此，但不是在 Firefox 和 IE10 中。在这两个浏览器中，宽度`.wrap`与最宽的内部 div 一样宽。但我预计这`.wrap`将尊重`.side`和的宽度`.content`。

您可以在此处看到此行为：http: [//jsbin.com/evamik/1/](http://jsbin.com/evamik/1/)，只需使浏览器窗口足够宽，您就会看到石灰色 div 中有文本溢出`(.content)`。如果您关闭 overflow:hidden ，`.content`您会看到， a 的`.wrap`宽度等于 a 的宽度`.content`，并且宽度`.side`被忽略。

那么如何强制`.wrap`尊重`.side`和的宽度`.content`？

HTML：

```
 <div class="wrap">
    <div class="side">
       side
    </div>
    <div class="content">
       nonwrappnonwrappingnonwrappingnonwrappingnonwrapping
    </div>
    <div class="clear"></div>
  </div> 
```

CSS：

```
.wrap {
  background: lime;
  display: inline-block;
  max-width: 100%;
}
.side {
  float: right;
  background: orange;
}
.content {
  overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}  
.clear {
  clear: both;
} 
```

示例网址：http: [//jsbin.com/evamik/1/](http://jsbin.com/evamik/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T07:02:44.570

我对这个问题有点困惑。jsbin 示例似乎在 Windows 7 上的 IE10 中具有所需的行为。（也就是说，`.content`当窗口太窄而无法显示整行时，div 使用省略号，并且`.side`始终正确显示为向右浮动，`.wrap`父 div 适合子如果窗口允许显示所有文本，则为 div，并且当窗口窄到足以导致文本溢出时具有 100% 的宽度。）

关闭div 会导致丑陋`overflow:hidden;`的行为，因为没有它，没有效果，但会迫使文本保持在一个完整的行上。`.content``text-overflow:ellipsis;``white-space:no-wrap;`

请注意，`text-overflow:ellipsis;`仅在使用`white-space:no-wrap;`and时才有效`overflow:hidden;`。这意味着您不能对多行文本使用省略号。请参阅[MDN CSS 参考以了解 text-overflow](https://developer.mozilla.org/en-US/docs/CSS/text-overflow)。

如果您想确保文本换行而不是使用带有省略号的单行，您可以删除`white-space:no-wrap;`and`overflow:hidden;`并添加 instead `word-wrap:break-word;`，这将打破长词以适应狭窄的空间。有关自动换行，请参阅[MDN CSS 参考](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)。

# java - JNLP 显示旧版小程序

> ID：14174072
> 
> 赞同：1
> 
> 时间：2013-01-05T16:55:35.363
> 
> 标签：java, caching, applet, jnlp

我在使用 JNLP 部署的网页上有一个小程序。我的问题是它正在加载缓存的小程序而不是新上传的小程序。

我努力了：

*   [放入`<update check="always" policy="always">`我的 JNLP](https://stackoverflow.com/questions/8828643/java-web-start-how-to-clear-cache-or-update-the-app-from-users-perspective)
*   重命名`.jar`文件并更改 JNLP 以反映
*   强制刷新网页（我更新了`.html`，所以我知道强制刷新有效）
*   上述所有的

没有任何效果。如何强制 JNLP 清除缓存/加载新的小程序？（我发现[了这个](https://stackoverflow.com/questions/8828643/java-web-start-how-to-clear-cache-or-update-the-app-from-users-perspective)问题，但解决方案不起作用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:43:26.087

我找到了答案。我不得不重命名`.jar`文件（并在 JNLP 中更新它）**并重**命名`.jnlp`文件（并在 HTML 中更新它）。

# perl - Perl：将函数调用转换为 lisp 风格的函数调用

> ID：14174078
> 
> 赞同：0
> 
> 时间：2013-01-05T16:56:43.990
> 
> 标签：perl

我正在尝试使用子例程将一行转换为`a, f_1(b, c, f_2(d, e))`带有 lisp 样式函数调用的行 ：`a (f_1 b c (f_2 d e))``Text::Balanced`

函数调用的形式为 `f(arglist)`， arglist 中可以有一个或多个函数调用，也可以有层次调用；

我尝试的方式 -

```
my $text = q|a, f_1(a, b, f_2(c, d))|;

my ($match, $remainder) = extract_bracketed($text); # defaults to '()' 
# $match is not containing the text i want which is : a, b, f_2(c,d) because "(" is preceded by a string;

my ($d_match, $d_remainder) = extract_delimited($remainder,",");
# $d_match doesnt contain the the first string
# planning to use remainder texts from the bracketed and delimited operations in a loop to translate. 
```

甚至尝试了 sub extract_tagged with start tag as`/^[\w_0-9]+\(/`和 end tag as `/\)/`，但在那里也不起作用。 `Parse::RecDescent`很难在短时间内理解和使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:48:59.000

转换为 LISP 样式所需的一切似乎就是删除逗号并将每个左括号移到其前面的函数名称之前。

该程序通过将字符串标记为标识符`/\w+/`或括号`/[()]/`并将列表存储在数组中来工作`@tokens`。然后扫描这个数组，在标识符后面跟着一个左括号的地方，两者都被切换。

```
use strict;
use warnings;

my $str = 'a, f_1(b, c, f_2(d, e))';

my @tokens = $str =~ /\w+|[()]/g;

for my $i (0 .. $#tokens-1) {
  @tokens[$i,$i+1] = @tokens[$i+1,$i] if "@tokens[$i,$i+1]" =~ /\w \(/;
}

print "@tokens\n"; 
```

**输出**

```
a ( f_1 b c ( f_2 d e ) ) 
```

# javascript - socket.io 和服务器

> ID：14174079
> 
> 赞同：2
> 
> 时间：2013-01-05T16:56:57.027
> 
> 标签：javascript, html, node.js, nginx, socket.io

是否有可能让 socket.io**不是**网络服务器？

我想使用外部网络服务器，为此我需要 /socket.io/socket.io.js。

是否有复制^([1])的替代方法，因为我不想使用任何疯狂的代理等。这应该是即插即用的，所以我可以抓取文件，并将其移动到另一台服务器并在那里工作（有点像 Websockets 应该是什么样的）。

[1] = 我可以嗅探文件并制作副本，但这似乎很老套和肮脏。我想要干净优雅的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:01:37.740

这只是[当实际页面由 localhost 服务器提供服务时如何使用 socket.io 与另一台服务器通信的副本？](https://stackoverflow.com/questions/10434933/how-to-use-socket-io-to-communicate-with-another-server-when-the-actual-page-is?rq=1)

你需要有`<script src="http://my.url:port/socket.io/socket.io.js"></script>`而不是`<script src="/socket.io/socket.io.js"></script>`让它工作。

感谢[Linus G. Theil](https://stackoverflow.com/users/295262/linus-g-thiel)的回答。

# php - SimpleXML XMLIterator 在遇到空节点时失败

> ID：14174082
> 
> 赞同：1
> 
> 时间：2013-01-05T16:57:16.907
> 
> 标签：php, simplexml

我正在尝试使用 SimpleXML 将 XML 文件读入数组中，但是当脚本遇到一个空节点（例如 <NodeName />）时，它会抛出一个错误，指出 XML 是“无效的”并退出。

有问题的 XML 完全有效 - 我会搜索/替换整个内容并删除空节点，但它太大而无法有效地执行此操作。

以下是我正在使用的代码的传真，如何将其重构为忽略，或者在遇到空元素时将空值返回给数组？

```
$iter = 0;

$xmlIterator = new SimpleXMLIterator($url, 0, true);
for( $xmlIterator->rewind(); $xmlIterator->valid(); $xmlIterator->next() ) {
    $rows[$iter] = array();
    foreach($xmlIterator->getChildren() as $column => $data) {
        $rows[$iter][$column] = $data;

        $data = null;
    }
    $iter++;
} 
```

# c - How to access semaphore from child program

> ID：14174088
> 
> 赞同：1
> 
> 时间：2013-01-05T16:57:33.473
> 
> 标签：c, windows, process, semaphore

The following program, compiled as a.exe and invoked as "a.exe parent", prints "bad." How do I make it print "good?"

Edit: GetLastError returns 2

```
/* Inter-process Communication */
#include <windows.h>
#include <assert.h>
#include <stdio.h>

static HANDLE semaphore;
static STARTUPINFO StartupInfo;
static PROCESS_INFORMATION ProcessInfo;
static char *Args = "a.exe child";

int createChildProcess()
{
  memset(&StartupInfo, 0, sizeof(StartupInfo));
  StartupInfo.cb = sizeof(STARTUPINFO);
  StartupInfo.dwFlags = STARTF_USESHOWWINDOW;
  StartupInfo.wShowWindow = SW_HIDE;

  if (!CreateProcess( NULL, Args, NULL, NULL, FALSE,
                      0,
                      NULL,
                      NULL,
                      &StartupInfo,
                      &ProcessInfo))
    {
      return 0;
    }

  return 1;
}

int main(int argc, char * argv[])
{

  if(!strcmp(argv[1], "child")) {
    semaphore = OpenSemaphore(SYNCHRONIZE|SEMAPHORE_MODIFY_STATE,
                              FALSE, "Global\\EZShare");
    if(semaphore==NULL) {
      printf("bad\n");
    }
    else {
      printf("good\n");
    }

  }
  else {
    semaphore = CreateSemaphore(NULL, 1, 1, "Global\\EZShare");
    assert(semaphore!=NULL);
    assert(createChildProcess());
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:06:26.810

父进程在子进程打开信号量之前退出，当它发生时，信号量被销毁。`Sleep(10000)`在退出父进程之前添加`main()`，你会得到“好”（对于真正的程序，等待子进程比休眠更好）。

# java - Why isn't the paintComponent method being called?

> ID：14174090
> 
> 赞同：1
> 
> 时间：2013-01-05T16:58:01.553
> 
> 标签：java, swing, jpanel, paint, jcomponent

The messages that ought to be printed in the printComponent method are not printed. I am having the impression that the paint method is not called. If not, why not?

```
import java.util.*;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.swing.*;
import javax.imageio.*;

public class Main extends JFrame{
    CustomComponent cc;

    public static void main(String[] args) {
        Main m = new Main();
    }

    public Main(){
        setTitle( "Diverse Testari 7");
        setLayout(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(600, 400);

        cc = new CustomComponent();
        cc.setImage("rgbcmy.jpg");

        add(cc);
        pack();
        setVisible( true );
    }
}

class CustomComponent extends JPanel{
    BufferedImage img = null;
    public void setImage( String str ){
    try {
        img = ImageIO.read( new File( str ) );
        System.out.println("SUCCESS!");

    } catch (IOException e) {
        e.printStackTrace();
    }
    }

    @Override
    protected void paintComponent(Graphics g) {
        // TODO Auto-generated method stub
        System.out.println("altceva");
        super.paintComponent(g);
        System.out.println("ceva");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:00:05.503

Add this code in your `Main` constructor:

```
new Thread(new Runnable() {
    public void run() {
        repaint();
        try {
            Thread.sleep(20);
        } catch (InterruptedException e) {}
    }
}).start(); 
```

`paintComponent` will only be called when you `repaint();`.

Also, NEVER NEVER NEVER use `setLayout(null);`. See [here](https://stackoverflow.com/questions/6592468/why-is-it-frowned-upon-to-use-a-null-layout-in-swing?lq=1).

This code will continually repaint the panel, so it will continually call `paintComponent`. This is good because it will always keep the panel updated. You could also just call `repaint();` when you change what's in the panel.

# python - 在 wxPython for Application 中实现 wx.Styled 文本控件

> ID：14174098
> 
> 赞同：0
> 
> 时间：2013-01-05T16:58:24.470
> 
> 标签：python, wxpython, scintilla

我正在为 wxpython 和 python 创建一个非常基本的 IDE，目前我有一个很大的`wx.textctrl`.我正在输入我的代码，我听说这不是一个好习惯，我最好使用`wx.Stc.StyledTextControl`scintilla 库中的。

我将如何实现这个带有大小和语法突出显示的样式文本控件？有人可以引导我走向正确的方向吗，文档很差。

谢谢你。

到目前为止的代码：http: [//pastebin.com/VvxspyjX](http://pastebin.com/VvxspyjX)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T11:53:20.437

Scintilla 组件是编辑器唯一合理的选择，但是是的，它缺少适当的文档。最好的来源/参考当然是[这个页面](http://www.yellowbrain.com/stc/index.html)。

[API 文档](http://docs.wxwidgets.org/trunk/classwx_styled_text_ctrl.html)和[wiki](http://wiki.wxwidgets.org/WxStyledTextCtrl)也是有用的资源。wxPython 文档和演示还包含使用该控件的示例。

最后，请注意 wxStyledTextCtrl 是（胖）[Scintilla API](http://www.scintilla.org/ScintillaDoc.html)的（瘦）包装器，因此后者也可以用作参考。

# c# - prepending an anonymous type to an Enumerable

> ID：14174100
> 
> 赞同：4
> 
> 时间：2013-01-05T16:58:29.027
> 
> 标签：c#, asp.net-mvc-3, linq, c#-4.0

I have the below code example where I want to [prepend](http://code.google.com/p/morelinq/source/browse/MoreLinq/Prepend.cs) some text on to the front of the source param which could be of type `ISite` or `IFactory` used in a MVC drop down list via a [MoreLinq extension](http://code.google.com/p/morelinq/source/browse/MoreLinq/Prepend.cs). This function is used in a controller action that returns the list serialised as JSON so that it can be loaded dynamically using some dropdown cascading, otherwise I would have done this separately in a view model.

I was wondering if there is a way to be able to do something similar to the below without having to create a concrete ListItem class, my example shows how I am using `as IListItem` but I am aware this won't compile.

At the moment my controller has no concept of any of my model's concrete classes and I kind of wanted to keep it that way and I'm not sure if I definately need to make an instance of a ListItem to make this work or if anyone has another suggestion?

My knowledge of Covariance and Contravariance in Generics is limited, in case that is of importance here? Thanks

```
 public interface IListItem
    {
        int Id { get; set; }
        string Name { get; set; }
    }

    public interface ISite : IListItem
    {
        int CountryId { get; set; }
    }

    public interface IFactory : IListItem
    {
        int SiteId { get; set; }
    }

    public interface IResource
    {
        int Id { get; set; }
        string Name { get; set; }
        int ContentID { get; set; }
        string Text { get; set; }
        int LanguageID { get; set; }
        string LanguageCode { get; set; }
        int Priority { get; set; }
    }

private IEnumerable<IListItem> PrependSelectionResource(IEnumerable<IListItem> source, string languageCode)
{
    if(source == null || source.Count() == 1)
        return source; // don't bother prepending the relevant resource in these cases

    try
    {
        // will throw an exception if languageCode is null or blank
        var resource = _resourceRepository.GetByNameAndLanguageCode(
            "Prompt_PleaseSelect",
            languageCode);

        if(resource == null)
            return source;

        // prepend the "Please Select" resource to the beginning of the source
        // using MoreLinq extension
        return source.Prepend(new {
            Id = 0,
            Name = resource.Text ?? ""
        } as IListItem);
    }
    catch {
        return source;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:06:48.947

不幸的是，您无能为力。您必须将实现`IListItem`接口的类的具体实例传递给`Prepend`方法。

如果您担心在应用程序的其他地方公开实现，您可以为您的文件创建一个本地实现`PlaceholderListItem`并使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T17:27:56.540

匿名类型（如`new { Id = 0, Name = resource.Text ?? "" }`）是不实现任何接口的类（除了 之外没有其他基类`object`）。所以它不会工作。

如果您使用模拟框架，您可以创建一个*模拟*，它是一些神奇生成的实现接口的类。有时也称为*存根*。

但是在这种情况下，编写自己的 mock 真的很容易，当然：

```
class ListItemMock : IListItem
{
  public int Id { get; set; }
  public string Name { get; set; }
} 
```

然后你可以用一个对象初始化器来实例化它：`new ListItemMock { Id = 0, Name = resource.Text ?? "", }`。

# ajax - send an Ajax request to Spring MVC

> ID：14174103
> 
> 赞同：3
> 
> 时间：2013-01-05T16:58:42.177
> 
> 标签：ajax, spring-mvc, apache-tiles

I have a problem with method handler return value in spring mvc I have a grid and when user click on a row I have to show the details of row. I don't want to send row Id in URL,when I use @PathVariable everything work perfect

I used jqGrid in my jsp to get the Id of selected row

```
 onSelectRow: function(id) {
    document.location.href = "/customer/" + id;
} 
```

my controller is :

```
 @RequestMapping("/customer")
@Controller
public class CustomerController {

    final Logger logger = LoggerFactory.getLogger(CustomerController.class);

    @Autowired
    private CustomerService customerService;

    @Autowired
    MessageSource messageSource;

@RequestMapping(value = "/{id}", method = RequestMethod.GET) 
```

public String show(Authentication authentication, @PathVariable("id") int id, Model uiModel, Locale locale) {

```
User user = (User) authentication.getPrincipal();
String result = null;
try {
    if (user != null) {
        if (user.getRole().getRoleType().equalsIgnoreCase("ADMIN")) {
            Customer customer = customerService.getCustomerById(id);
            uiModel.addAttribute("customer", customer);
            result = "customer/show";
        } else
            result = "/customer/all";
    }
} catch (Exception e) {
    uiModel.addAttribute("message", new Message("error",
            messageSource.getMessage("customer_get_all_fail", new Object[]{}, locale)));
    e.getStackTrace();

}
return result; 
```

}

my apache tiles config for load detail page:

```
<definition extends="default" name="customer/show">
<put-attribute name="body"
    value="/WEB-INF/views/customer/showCustomerData.jspx" /> 
```

and my servelt-context.xml

```
 <mvc:annotation-driven/>
    <mvc:resources location="/, classpath:/META-INF/web-resources/" mapping="/resources/**"/>

    <tx:annotation-driven/>
    <context:annotation-config/>
    <mvc:default-servlet-handler/>

    <mvc:interceptors>
        <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" p:paramName="lang"/>
    </mvc:interceptors>

    <bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource" id="messageSource"
          p:basenames="WEB-INF/i18n/messages,WEB-INF/i18n/application" p:fallbackToSystemLocale="false"/>

    <bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
        <property name="validationMessageSource" ref="messageSource"/>
    </bean>

    <context:component-scan base-package="com.sefryek.sywf.web.controller"/>

    <!-- Enable file upload functionality -->
    <!--<bean class="org.springframework.web.multipart.support.StandardServletMultipartResolver" id="multipartResolver"/>-->

    <!-- Configure the multipart resolver -->
    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <!-- one of the properties available; the maximum file size in bytes -->
        <property name="maxUploadSize" value="10000000"/>
    </bean>

    <bean id="contentNegotiatingResolver"
          class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="order"
                  value="#{T(org.springframework.core.Ordered).HIGHEST_PRECEDENCE}"/>
        <property name="mediaTypes">
            <map>
                <entry key="html" value="text/html"/>
                <entry key="pdf" value="application/pdf"/>
                <entry key="xsl" value="application/vnd.ms-excel"/>
                <entry key="xml" value="application/xml"/>
                <entry key="json" value="application/json"/>
                <entry key="js" value="application/javascript"/>
            </map>
        </property>
    </bean>

    <!--<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"-->
    <!--p:prefix="/WEB-INF/views/" p:suffix=".jsp" p:order="#{contentNegotiatingResolver.order+0}"/>-->

    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver"
          p:cookieName="locale" p:cookieMaxAge="11"/>

    <!-- Tiles Configuration -->
    <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" id="tilesViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
    </bean>

    <bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/layouts/layouts.xml</value>
                <!-- Scan views directory for Tiles configurations -->
                <value>/WEB-INF/views/**/views.xml</value>
            </list>
        </property>
    </bean>

    <bean id="themeResolver" class="org.springframework.web.servlet.theme.CookieThemeResolver"
          p:cookieName="theme" p:defaultThemeName="standard"/>

    <bean id="themeSource" class="org.springframework.ui.context.support.ResourceBundleThemeSource"/>
</beans> 
```

and anything work perfect,but I have to send my data in request object instead of in URL

my code in jsp :

```
 onSelectRow: function(id) {
    $.ajax({
        url : '${showSelectedCustomer}',
        dataType: 'JSON',
        data:{ id: id },
        type:'POST',
        success: function(response) {
        } ,
        error : function(r) {
        }
    });
} 
```

and my method handler:

```
@RequestMapping(value = "/showSelectedCustomer", method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_VALUE) 
```

//@ResponseBody public String showSelectedCustomer( Authentication authentication, @RequestParam String id, Model uiModel, Locale locale) {

```
User user = (User) authentication.getPrincipal();
Customer customer = null;
Map<String, Object> map = new HashMap<String, Object>();
try {
    if (user != null) {
        if (user.getRole().getRoleType().equalsIgnoreCase("ADMIN")) {
            customer = customerService.getCustomerById(Integer.valueOf(id));
            uiModel.addAttribute("customer", customer);
        } 
    }
} catch (Exception e) {
    uiModel.addAttribute("message", new Message("error",
            messageSource.getMessage("customer_get_all_fail", new Object[]{}, locale)));
    e.getStackTrace();

}
return "customer/show"; 
```

}

my method handler is called but after that nothing is happened. my point is showCustomerData.jspx that show a details of customer isn't loaded.

please let me know what should I do and what my problem is? when I use my data with Ajax,how should I return my return value to see detail page (showCustomerData.jspx) when I change my method handler to return a map with map.put("message", "success") data,my ajax success function is called but I don't know how can I redirect it to show my details page

thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T08:56:48.827

您首先需要创建 CustomerInput pojo，如下所示

```
class CustomerInput{
 private Integer id;
//setter getter
} 
```

然后创建如下控制器方法

```
@ResponseBody public String showSelectedCustomer( Authentication authentication, @RequestBody CustomerInput customerInput, Model uiModel, Locale locale) {

} 
```

# android - How to set a Bitmap image in canvas of my custom View?

> ID：14174104
> 
> 赞同：6
> 
> 时间：2013-01-05T16:58:44.337
> 
> 标签：android, android-widget

I have a Bitmap object in my main class. I need to send this bitmap to my custom view class to set it as a background for further processing on canvas.

For example, there is a method called setPicture that receives bitmap as a parameter. So, how it is possible to draw this bitmap on the canvas?

Please see the code below:

```
public class TouchView extends View {

 final int MIN_WIDTH = 75;
 final int MIN_HEIGHT = 75;
 final int DEFAULT_COLOR = Color.RED;
 int _color;
 final int STROKE_WIDTH = 2;

private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
private float x, y;
private boolean touching = false;

public TouchView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
    init();
}

public TouchView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
    init();
}

public TouchView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    init();
}

private void init() {
    setMinimumWidth(MIN_WIDTH);
    setMinimumHeight(MIN_HEIGHT);
    _color = DEFAULT_COLOR;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // TODO Auto-generated method stub
    setMeasuredDimension(MeasureSpec.getSize(widthMeasureSpec),
            MeasureSpec.getSize(heightMeasureSpec));
}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);

    if (touching) {
        paint.setStrokeWidth(STROKE_WIDTH);
        paint.setColor(_color);
        paint.setStyle(Paint.Style.FILL);
        canvas.drawCircle(x, y, 75f, paint);
    }
}

public void setPicture (Bitmap bitmap) {

        ///////
         This method must receive my bitmap to draw it on canvas!!!!!!!!!!!!!!!
        ///////

}

public void setColor(int color) {
    _color = color;
}

@Override
public boolean onTouchEvent(MotionEvent motionEvent) {
    // TODO Auto-generated method stub

    switch (motionEvent.getAction()) {
    case MotionEvent.ACTION_MOVE:
    case MotionEvent.ACTION_DOWN:
        x = motionEvent.getX();
        y = motionEvent.getY();
        touching = true;
        break;
    default:
        touching = false;
    }
    invalidate();
    return true;
} 
```

}

How should I send this bitmap to onDraw?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T17:05:49.840

在你的`onDraw()`方法里面，

做就是了

```
canvas.drawBitmap(myBitmap, 0, 0, null); 
```

myBitmap 是您的位图变量。

0,0 是指要绘制的坐标，也就是左上角。

还有其他可用的 API，用于绘制某些区域等。

[更多信息可以在 api 文档中找到。](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20float,%20float,%20android.graphics.Paint%29)

或者：改为扩展 ImageView，并使用`setImageBitmap(Bitmap src);`方法来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:23:47.947

将位图转换为可绘制并使用 View 类的 setBackgroundDrawable 方法。

```
public void setPicture (Bitmap bitmap) {
    setBackgroundDrawable(new BitmapDrawable(bitmap));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-15T06:53:44.957

```
decodedString = Base64.decode(datadtlimgsItem.getImageStr(), Base64.DEFAULT);
            decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
            decodedByte = Util.resize(decodedByte, 1500, 1500);
            mDrawingView.addBitmap(decodedByte);

 public void addBitmap(Bitmap bitmap){
        canvasBitmap = bitmap;
        invalidate();
    }
// set bitmap on draw canvas in your custom view class
 @Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);

    if (canvasBitmap == null){

        canvasBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    }
    drawCanvas = new Canvas(canvasBitmap);
} 
```

# image-processing - Client-side conversion of rgb-jpg to 8-bit-jpg using Canvas+HTML5

> ID：14174105
> 
> 赞同：3
> 
> 时间：2013-01-05T16:58:47.013
> 
> 标签：image-processing, html5-canvas, image-manipulation, image-conversion

Many articles shows ways of converting jpeg files to grayscale using canvas+html5 at the client-side. But what I need is to convert an image to 8bit grayscale to reduce its size before uploading to my server.

Is it possible to do it using canvas+html5?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T23:44:33.653

whatwg[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html)提到了一个 toBlob 方法，它应该将画布转换为 jpeg 或 png 并为您提供二进制表示。不幸的是，它还没有得到广泛的支持。

因此，您所能做的就是使用 getImageData 来获取原始图像数据的字节数组。在这个数组中，每个像素由 4 个字节表示：红色、绿色、蓝色和 alpha。您可以通过此 ( ) 轻松计算灰度值`gray = (red + green + blue) / 3 * alpha / 255;`。但是生成的数组将完全未压缩，因此它可能会比原始 jpeg 更大，即使它每个像素只使用 8 位。为了减小尺寸，您必须自己实现图像压缩算法。您可能会考虑使用[PNG 使用的 DEFLATE 算法](http://en.wikipedia.org/wiki/DEFLATE)而不是[JPEG 编码](http://en.wikipedia.org/wiki/Jpeg#JPEG_codec_example)- 它更容易实现，不会引入进一步的伪影，因为它是无损的，并且在 8 位图像上表现良好。

应在服务器上添加用于将此压缩数据流转换为有效 PNG/JPEG 文件的样板数据（当您需要时）。

# objective-c - How to split Objective-C code into differents files?

> ID：14174107
> 
> 赞同：-2
> 
> 时间：2013-01-05T16:58:51.123
> 
> 标签：objective-c, xcode, cocoa, class, split

I'm looking for a (certainly basic) thing to do in Objective-C/Cocoa : I would like to split my code into multiple files (one for functions, one for tab view N°1 methods, one for tab view N°2 methods, etc) to make my projects well organized.

I would like to be able to call functions and/or methods from my "AppDelegate.m".

But I don't know how to formulate this question correctly to find help around the web. I come from Delphi, and in Delphi you have just to create a new .PAS file and declare it in USES section.

We are in 2013, so it's certainly an ultra-basic way to code properly via XCode :)

Thanks in advance for any help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T17:05:47.513

基本上是一样的——除了 Objective-C 的 C 背景，你必须创建 4 个文件。两个头文件 (.h) 和两个实现 (.m)。

您将使用 .m 文件顶部的 #import 语句代替使用部分。

```
#import "myClassHeader.h" 
```

由于这属于 Objective-C 或任何基于 C 语言的更基本的任务，你应该从阅读一些[初学者教程](http://developer.apple.com/library/mac/#referencelibrary/GettingStarted/Learning_Objective-C_A_Primer/_index.html)开始，如何定义类和方法。

# c# - 将 DateTime 变量与数据库中的 Date 变量进行比较

> ID：14174109
> 
> 赞同：0
> 
> 时间：2013-01-05T16:59:24.083
> 
> 标签：c#, asp.net, database, date, datetime

我正在使用 sql server 2008 并尝试在用户上次登录早于添加到数据库的最后一条消息的日期时显示通知。

我`asp:panel`用来显示隐藏通知文本，它工作得很好，但由于某种原因，我无法弄清楚为什么`Compare`我使用的方法没有返回预期的结果。

例如，当我将用户登录设置为`01/05/2013`并且数据库中的最近日期为`01/04/2013`时，我希望结果大于零 int 并转义 if 条件。不幸的是，这并没有发生，并且该方法总是进入 if 条件。

我认为这可能与`casting`from `Date`to `DateTime`; 想法，好吗？

```
DateTime userEntry = new DateTime(2012, 01, 05);
DateTime lastMsg = new DateTime();
lastMsg = Convert.ToDateTime(ds.Tables[0].Rows[0]["Date"]);
int compared = DateTime.Compare(userEntry, lastMsg);
if (compared < 0) { notification.Visible = true; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:34:18.227

您提到您正在尝试比较“01/05/2013”​​，但是，代码正在生成 2012 日期：

```
DateTime userEntry = new DateTime(2012, 01, 05); // 2012 date 
```

我怀疑你的意思是：

```
DateTime userEntry = new DateTime(2013, 01, 05); // 2013 date 
```

# php - Alternative to "echo" withe less code/characters?

> ID：14174110
> 
> 赞同：-5
> 
> 时间：2013-01-05T16:59:36.423
> 
> 标签：php

As per the title, is there a quicker way to display something in PHP without using echo, so for example is you are using GET[1] taking code from a parsed parameter "1" and displaying it to the screen.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:02:20.187

有`echo`如下所示的速记语句：

```
<?=$_GET[1]?> 
```

尽管您必须打开此功能。

[短开标签](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)

# css - Less css: variables definition

> ID：14174113
> 
> 赞同：0
> 
> 时间：2013-01-05T16:59:52.757
> 
> 标签：css, less

I have to projects, basing on the same HTML and different CSS. I want to bring together the CSS definitions of those two projects in one Less file, with variables to define the differences.

Project 1:

```
.userbar {
    background: #fff;
} 
```

Project 2:

```
.userbar {
    background:url(../images/bg-userbar.png) no-repeat 100% 100%;
} 
```

The merged Less Code should be:

```
userbar {background: @bg_userbar} 
```

Then I can define the color for project 1 like this:

```
@bg_userbar: #fff; 
```

But for project 2, is this valid less code?

```
@bg_userbar: background:url(../images/bg-userbar.png) no-repeat 100% 100%; 
```

Many thanks for your help! Sascha.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T18:15:02.340

第一个变量定义当然是有效的，对于第二个你只需要转义它：

```
@bg_userbar: #fff;
@bg_userbar: ~"url(../images/bg-userbar.png) no-repeat 100% 100%";

.userbar {background: @bg_userbar} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:48:48.563

我刚刚又花了一些时间来解决这个问题。

```
@bg_userbar: url(../images/bg-userbar.png) no-repeat 100% 100%;
.userbar {
    background:@bg_userbar;
} 
```

是有效的更少代码并编译为

```
.userbar {
  background: url(../images/bg-userbar.png) no-repeat 100% 100%;
} 
```

但是感谢您的转义提示；虽然没有必要。

# android - 从微调器中获取和设置值

> ID：14174122
> 
> 赞同：0
> 
> 时间：2013-01-05T17:00:42.950
> 
> 标签：android, android-spinner, android-sdk-2.3

我正在寻找从数据库中获取和设置微调器加载的值，但我没有找到它。

```
private void loadSpinnerData() {
    // database handler
    DatabaseHandler db = new DatabaseHandler(getApplicationContext());

    // Spinner Drop down elements
    List<String> lables = db.getAllCadenesAsList();

    // Creating adapter for spinner
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, lables);

    // Drop down layout style - list view with radio button
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // attaching data adapter to spinner
    spinner.setAdapter(dataAdapter);
} 
```

光标返回 _id 和 Name 并且微调器正确加载（似乎..）

现在，当我尝试在 onItemSelected 中获取 de selected 值时，我的 id 和位置是相同的，并且不是光标的 id，它是 de spinner 中的位置。

如何获取所选值的 de ID？如何设置微调器的值。

我需要并且我知道数据库的 id，而不是微调器的 id/位置。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:42:10.667

您没有获得`_id`有关`onItemSelected`微调器的真实数据库，因为您将微调器连接到`ArrayAdapter`. 这种适配器连接不以任何方式连接到您的数据库，而只是`List<String>`您传递给它的集合或其他集合。为了得到你想要的，你需要将微调器的适配器设置为 a `CursorAdapter`。

# php - 使用 php 读取具有各种命名空间的 xml

> ID：14174127
> 
> 赞同：0
> 
> 时间：2013-01-05T17:01:03.897
> 
> 标签：php, xml, namespaces, rss, simplexml

我必须解析一个包含各种命名空间的 xml 文件。
我已经注册了命名空间。

**我的问题**是我无法从`cal:location`块中提取数据。
例如，我需要 vcard:street-address 或 vcard:postal-code。

XML - 示例：

```
<channel>
<title>Veranstaltungen zum Thema Markt+Bauer vom 05.05.2011 bis 05.05.2012</title>
<link>https://www.wien.gv.at/vadb/internet/AdvPrSrv.asp?Layout=VAErgebnis_neu&amp;Type=S&amp;ganzjaehrig=ja</link>
<description>   Veranstaltungen zum Thema Markt+Bauer vom 05.05.2011 bis 05.05.2012     </description>
<lastBuildDate>Sa,05 Jän 2013 17:38:05 GMT</lastBuildDate>
<ManagingEditor>event@ma55.wien.gv.at</ManagingEditor>
<language>de-AT</language>
<dc:license>http://data.wien.gv.at/nutzungsbedingungen</dc:license>
<dc:rightsHolder>Stadt Wien</dc:rightsHolder>
<item>
<title>Bauernmarkt am Karmelitermarkt</title>
<link>https://www.wien.gv.at/vadb/internet/AdvPrSrv.asp?Layout=VAErgebnis_neu&amp;Type=K&amp;ID=256811&amp;return=</link>
<guid isPermaLink="false">https://www.wien.gv.at/vadb/internet/AdvPrSrv.asp?Layout=VAErgebnis_neu&amp;Type=K&amp;ID=256811&amp;return=</guid>
<description><![CDATA[
<p>07.01.2011 bis 31.12.2011<br />
08:00 bis 13:00<br />
Karmelitermarkt<br />http://www.wiener-maerkte.at</p>­<p>Spezieller Bauernmarkt mit     köstlichen naturreinen Produkten.</p>]]>
</description>
<category>Kulinarischer  Markt</category>
<dc:subject>Kulinarischer  Markt</dc:subject>
<cal:dtstart>2011-01-07T00:00:00+01:00</cal:dtstart>
<cal:dtend>2011-12-31T00:00:00+01:00</cal:dtend>
<cal:byday>Fr, Sa</cal:byday>
<cal:byhour>08</cal:byhour>
<cal:byminute>00</cal:byminute>
<cal:location>
    <vcard:fn>Karmelitermarkt</vcard:fn>
    <vcard:street-address>Haidgasse 1</vcard:street-address>
    <vcard:postal-code>1020</vcard:postal-code>
    <vcard:tel/>
    <vcard:fax/>
    <vcard:email>office@wiener-maerkte.at</vcard:email>
    <vcard:url>http://www.wiener-maerkte.at</vcard:url>
</cal:location>
<cal:organizer>
<vcard:fn>Wiener Einkaufsstraßen-Management</vcard:fn>
<vcard:street-address>Hietzinger Kai 133</vcard:street-address>
<vcard:postal-code>1130</vcard:postal-code>
<vcard:tel>0043-1/514 50-6700</vcard:tel>
<vcard:fax>0043-1/514 50-6749</vcard:fax>
<vcard:email/>
<vcard:url>http://www.einkaufsstrassen.at</vcard:url>
</cal:organizer>  
</item>
</channel> 
```

我的 PHP - 代码：

```
<?php
function download_feed($path){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$path);
    curl_setopt($ch, CURLOPT_FAILONERROR,1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_TIMEOUT,15);
    $retValue = curl_exec($ch);
    curl_close($ch);
    return $retValue;
}
    $sXML = download_feed('xml - Example');
    $oXML = new SimpleXMLElement($sXML);

    foreach($oXML->channel->item as $oDocument){
    $title = $oDocument->title;
    $url = $oDocument->link;
    $namespaces = $oDocument->getNameSpaces(true);

    $cal = $oDocument->children($namespaces['cal']);
    $vcard = $cal->children($namespaces['vcard']);
    $dc = $oDocument->children($namespaces['dc']);
    $georss = $oDocument->children($namespaces['georss']);
    $byday = $cal->byday;

    //var_dump($vcard);
    $attrs = $oDocument->getElementsByTagName("vcard:fn");

     $streetAddress = $oDocument->{'cal:location'}->{'vcard:fn'};

    echo $title . "<br>" . $url . "<br>" . $byday. "<br>" . $streetAddress.   "<br><br>";
}               
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:27:56.897

您误解了该`->children()`方法的目的：它不会“注册”命名空间，而是选择它们以供立即使用。

所以要到达`<cal:location>`，你可以使用`$oDocument->children($namespaces['cal'])->location`，`<vcard:fn>`里面就是`$oDocument->children($namespaces['cal'])->location->children($namespaces['vcard'])->fn`

从 PHP 5.2 开始，您还可以直接使用前缀，而不是查找它们的 URL，方法是给`->children()`方法一个额外的参数`true`：`$oDocument->children('cal', true)->location->children('vcard', true)->fn`

# wpf - 使用 vb.net 从 wpf 窗口 resx 文件中获取值

> ID：14174134
> 
> 赞同：0
> 
> 时间：2013-01-05T17:01:56.767
> 
> 标签：wpf, vb.net

如何使用 vb.net 访问在 WPF 窗口的 .resx 文件中找到的值，我的意思是不是来自 xaml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:37:56.777

抱歉，我找到了答案

答案是

```
 Dim rm As System.Resources.ResourceManager = 
                New System.Resources.ResourceManager("your class name", 
                                      Reflection.Assembly.GetExecutingAssembly()) 
```

然后，您可以按名称获取资源：

```
 rm.GetString("resource value name") 
```

# ruby-on-rails - Rails fields_for 不会在里面看到我的字段

> ID：14174135
> 
> 赞同：1
> 
> 时间：2013-01-05T17:02:08.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nested-forms

我正在尝试同时创建两个对象。我最好的方法是使用fields_for。并且关系是has_many。

模型/位置.rb

```
 attr_accessible :address, :customer_id, :event_id, :latitude, :longitude
  belongs_to :customer
  belongs_to :event 
```

模型/事件.rb

```
 attr_accessible :locations_attributes
  has_many :locations, :dependent => :destroy
  accepts_nested_attributes_for :locations 
```

表格如下：

```
<%= form_for(@event) do |f| %>
  ...
  <%= f.fields_for :locations do |e| %>
    <%= e.text_field :longitude %>
    <%= e.text_field :latitude %>
  <% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我的字段不会显示，我已按照本节[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)中的文档 has_many 进行操作， 并注意是否在我的 f.fields_for :locations 将其更改为单数，而不是字段将显示，但我将无法创建它，因为我不允许修改位置属性。

更新：

如果我单数。我将其更改为我的事件模型

```
 attr_accessible  :description, :title, :location_attributes 
```

错误是这样的

```
app/controllers/events_controller.rb:60:in `new'
app/controllers/events_controller.rb:60:in `create' 
```

我的控制器是这样的

```
line 60: @event = Event.new(params[:event]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:22:03.700

你应该在你的表格中这样做：（位置不是位置）

```
<%= f.fields_for :location do |e| %>
    <%= e.text_field :longitude %>
    <%= e.text_field :latitude %>
<% end %> 
```

在你的模型 event.rb

`attr_accessible :description, :title, :locations_attributes`（地点不是地点）

# objective-c - 多个 UIImageView 上的手势识别器

> ID：14174136
> 
> 赞同：0
> 
> 时间：2013-01-05T17:02:13.230
> 
> 标签：objective-c, uiimageview, uigesturerecognizer

我在同一个 ViewController 中有 10 个 UIImageViews，并且这些图像中的每一个都需要使用 Gesture Recognizer 进行控制；这是我的简单代码：

```
- (void)viewDidLoad {

   UIImageView *image1 = // image init
   UIImageView *image2 = // image init
   ...

    UIRotationGestureRecognizer *rotationGesture1 = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotatePiece:)];
    UIRotationGestureRecognizer *rotationGesture2 = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotatePiece:)];
    ...
    ...
    UIRotationGestureRecognizer *rotationGesture10 = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotatePiece:)];

    [image1 addGestureRecognizer:rotationGesture1];
    [image2 addGestureRecognizer:rotationGesture2];
    ...
    ...
    [image10 addGestureRecognizer:rotationGesture10];
}

- (void)rotatePiece:(UIRotationGestureRecognizer *)gestureRecognizer {
    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
        [gestureRecognizer view].transform = CGAffineTransformRotate([[gestureRecognizer view] transform], [gestureRecognizer rotation]);
        [gestureRecognizer setRotation:0];
    }
} 
```

好的，好的，每个图像都会旋转，但是我还需要为每个 UIImageView 的 UIPanGestureRecognizer 和 UIPinchGestureRecognizer、obv 编写类似的代码：这是正确的方法，还是有更简单的方法来避免这样的“冗余”代码？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:41:06.247

这是一个可能的解决方案。做一个这样的方法：

```
- (void)addRotationGestureForImage:(UIImageView *)image
{
    UIRotationGestureRecognizer *gesture = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotatePiece:)];
    gesture.delegate = self;
    [image addGestureRecognizer:gesture];
} 
```

然后在您的`viewDidLoad`方法中创建一个图像视图数组并循环调用此方法，如下所示：

```
NSArray *imageViewArray = [NSArray arrayWithObjects:image1,image2,image3,nil];
for(UIImageView *img in imageViewArray) {
    [self addRotationGestureForImage:img];
} 
```

# python-3.x - 如何在科莫多中运行 Python

> ID：14174137
> 
> 赞同：5
> 
> 时间：2013-01-05T17:02:17.690
> 
> 标签：python-3.x, editor, interpreter, komodoedit

我对 Python 完全陌生，想试试教程中的这段代码：

```
istrue = 1
if istrue:
    print ("be carefull!") 
```

代码本身应该没问题，但我找不到在编辑器 [Komodo-Edit]( [http://www.activestate.com/komodo-edit](http://www.activestate.com/komodo-edit) )中执行此代码的任何方法

我习惯于 Visual Studio 和 QtCreator（经验丰富的 C++/Qt 开发人员）。我希望有一个用于调试的菜单和一个诸如“开始调试”之类的命令，它应该打开一个控制台或在编辑器中使用一个控制台。在任何情况下，我都会拒绝使用 dos 控制台，因为那样使用 IDE 的整个想法将毫无用处。

如果其他 Python IDE 更有用（在 Windows 上，没有成本），我可以切换到另一个（vim/emacs 除外）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T17:09:10.860

我曾经使用 Komodo 编辑，但现在不再使用它，因为它更像是一个文本编辑器而不是 IDE。我建议使用带有 PyDev 的 Ninja-IDE 或 Eclipse。但是，如果您坚持使用 Konodo Edit，这里有一个选项：转到此处：工具箱 > 添加 > 新命令... 在顶部字段中输入名称“运行 Python 文件”或其他名称。然后转到“命令”字段并输入：

```
%(python) "%F" 
```

或者，您还可以为快速执行 python 指定键绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T14:24:20.037

我尝试了 Komodo Edit 版本 9 和 10。Matthias 的方法适用于版本 9。版本 10，我看不到选择解释器的选项。

# asp.net-mvc - ASP.NET MVC 4 记住我的行为

> ID：14174140
> 
> 赞同：1
> 
> 时间：2013-01-05T17:02:23.287
> 
> 标签：asp.net-mvc

我在登录页面上有“记住我”选项。有人可以解释一下这个过程吗？即每次用户导航到页面时都在进行登录过程吗？或者用户是否经常登录并且应用程序仅在用户注销并再次登录时检查凭据？我问的原因是我`IsEnabled`在数据库中的用户表上有属性并且想禁用用户。但是除非用户注销并再次登录，否则此属性似乎没有任何区别。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:14:43.607

当用户第一次使用有效凭据登录时，会创建一个 cookie 并将其存储在客户端。对于网站的每个后续请求，cookie 都会传递到服务器并进行验证，以确保它没有过期且有效。如果您希望能够检查是否应允许用户访问该站点，则需要在 Global.asax 文件`IsEnabled`中的事件中创建自己的身份验证逻辑。`Application_AuthenticateRequest`

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    // Your authentication logic
} 
```

你可以在这里查看完整的活动列表：http: [//www.dotnetcurry.com/ShowArticle.aspx?ID=126](http://www.dotnetcurry.com/ShowArticle.aspx?ID=126)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:17:36.720

我已使用此变体将此属性添加到您的控制器

```
public class IsLocked : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (!httpContext.Request.IsAuthenticated)
            return false;

        var session = DependencyResolver.Current.GetService<ISession>();

        var userDb = session.Query<Admin>().SingleOrDefault(x => x.Email == httpContext.User.Identity.Name);

        if (userDb == null)
            return false;

        return userDb.Status == null || userDb.Status.Value == false;
    }
} 
```

# javascript - 为什么从第二个开始的条形图在 x 轴上向前移动？

> ID：14174143
> 
> 赞同：1
> 
> 时间：2013-01-05T17:02:42.817
> 
> 标签：javascript, jquery, charts, jqplot

我有一个我正在处理的图表的代码：

```
plot = $.jqplot('SalesChart2',
            [
                [[1,5]],
                [[1,10]],
                [[1,15]],
                [[1,20]],
                [[2,25]],
                [[3,10]],
                [[4,10]],
                [[5, 6]]
            ]
            , {
                // Tell the plot to stack the bars.
                stackSeries: true,
                series: [
                                { label: 'Cash' },
                                { label: 'CreditCard' },
                                { label: 'DebitCard' },
                                { label: 'StoreCredit' },
                                { label: 'Discount', disableStack: true },
                                { label: 'AverageTransaction', xaxis: 'xaxis', yaxis: 'y2axis', disableStack: true },
                                { xaxis: 'xaxis', yaxis: 'y2axis', label: 'ItemsPerTransaction', disableStack: true },
                                { xaxis: 'xaxis', yaxis: 'y2axis', label: 'CustomerCount', disableStack: true }
                            ],
                animate: !$.jqplot.use_excanvas,
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    rendererOptions: {
                        highlightMouseDown: true,
                        barWidth: 50
                    },
                    pointLabels: { show: true }
                },
                axes: {
                    xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        ticks: [1,2,3,4,5]
                    },
                    yaxis: {
                        tickOptions: {
                            formatString: "$%'d"
                        }
                    },
                    y2axis: {
                        autoscale: true,
                        min: 0
                    }
                },
                legend: {
                    show: true,
                    location: 'e',
                    placement: 'outside'
                },
                grid: {
                    drawGridlines: false
                }
            }); 
```

这呈现如下：

![销售数据图表](../Images/70c467d7bfe316a313b1407c8dad7f88.png)

这里的条从 x 轴上的点 2 向前移动了一点。因此，“客户计数”的最后一个栏不可见。

有人可以指导我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:23:48.587

您应该尝试使用 null barwidth 来自动计算宽度。而且我认为 barmargin 的默认值 (10) 太高了，因为您的宽度接近 50。

# iphone - MainViewController.m 和 FlipsideViewController.m 之间的调用方法

> ID：14174148
> 
> 赞同：0
> 
> 时间：2013-01-05T17:03:40.457
> 
> 标签：iphone, objective-c, xcode, methods, user-defined-functions

**请参阅下面的编辑以了解当前（次要）问题**

* * *

我试图**在 MainViewController.m 和 FlipsideViewController.m 之间****调用方法**（方法对，而不是函数？）——从一个文件/类到另一个。

 **我想这就是通常所说的“**从另一个类调用方法**”。我知道，周围有很多这样的问题，但我就是无法让它正常工作。

就我而言，我**在上述两个文件中都有几个用户定义的方法/函数**。有时，**我需要从位于 MainViewController.m 文件中的 FlipsideViewController.m 中调用一个方法**：

```
// in MainViewController.m

- (void) calculateDays {
    //executes caluculations
   // inserts data into labels, etc 
} 
```

如果我想**简单地从同一个文件**中调用此函数，我只需：

```
[self calculateDays]; 
```

这很简单，但是，我也想从 FlipsideViewController.m 文件中调用此函数，反之亦然。**那么我该怎么做**呢？[这个](https://stackoverflow.com/questions/3572448/objective-c-call-function-on-another-class)，[这个](https://stackoverflow.com/questions/7290156/call-a-class-method-from-within-that-class)和[这个](https://stackoverflow.com/questions/6830749/objective-c-calling-method-on-another-class)问题有点回答它，但它对我来说并不完全有效。我会在一秒钟内解释为什么。

**这是我尝试过并认为应该有效的方法：**

```
MainViewController *mvs = [[MainViewController alloc] init]; //alloc init MVC
[mvs calculateDays]; //call "external" function 
```

它给了我错误：*"Unknown type name MainViewController"*。所以我假设我**必须以某种方式包含/导入**它才能使其工作（就像在 javascript 或 PHP 中一样）。所以我将它包含在 FlipSideViewController.m 类中：

```
 #import "MainViewController.h" 
```

到目前为止*没有错误*。然后我尝试**编译/构建**它并遇到另一个错误： *“clang：错误：链接器命令失败，退出代码 1（使用 -v 查看调用）”“ld：架构 armv7s 的 3 个重复符号”*

这*使我认为*像这样**导入 MainViewController 不是可行的方法，**因为然后我会导入许多其他可能会干扰 FlipSideViewController 类中的某些代码的东西。

我*尝试过类似的解决方案*，但似乎没有任何效果。谁能向我解释我做错了什么，也许如何正确地做到这一点：在 MainViewController.m 和 FlipsideViewController.m 之间调用方法，反之亦然。

* * *

H2CO3 提出的**解决方案确实解决了大部分问题**（XCode 出现了一段时间的错误并给了我随机错误，迫使我重新构建整个项目），但仍有一件事不太奏效：**更改 UILabel 的内容（UIOutlet）**。请看看你们中是否有人可以帮助我：

当从self内部调用该方法时（即[self calculateDay]），该值被成功插入到UILabel中。从**FlipsideViewController**调用时，插入的值存在并处理成功，但无法插入 UILabel。请看下文。

**一些日志记录：**

```
//method called from within self on viewDidLoad: [self calculateDay];
Processed value to update label with: 26
New value in outlet after having been inserted: 26

//method called from another (FlipsideViewController) class file: [mvs calculateDay];
Processed value to update label with: 26
New value in outlet after having been inserted: (null)

/* 
  This doesn't work either from that external file: 
  [[mvs LabelName] setText:@"Hello, update label!"]; no errors but no display either

*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:07:48.240

如果您改为导入标头，则应该为您提供所有必要的声明，但您不会出现“重复符号”链接器错误。这是编写（Objective-）C 代码的“标准”/常见做法。

```
#import "MainViewController.h"
                            ^
      ".h" instead of ".m" -+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:12:59.737

（外行的术语）在 Objective-C 中，您只能使用每个文件都知道的对象。在此示例中，您尝试在 FlipsideController.m 文件中使用 MainViewController。FlipsideController.m 不知道 MainViewController 是什么，因此它会抛出错误，因为它不知道它是什么或如何使用它。您有两个选项可以告诉 Flipsidecontroller MainViewController 是什么，您可以导入标头 ( `#import "MainViewController.h"`)，这将使您可以完全访问 FlipSideController.h 中定义的所有内容。（除非您真的知道自己在做什么，否则您可能永远不应该导入 .m）您还可以创建前向声明 -`@class FilpsideController`在 .h 中并在 .m 中导入文件。这对于避免循环导入等很有用。**

# javascript - 在多个页面上保留被操纵的 dom 元素的状态

> ID：14174150
> 
> 赞同：0
> 
> 时间：2013-01-05T17:03:44.150
> 
> 标签：javascript, jquery, dom

嗨，我创建了一个菜单垂直菜单，它具有一些 jQuery slideUp 和 slideDown 功能。菜单运行良好，但我想找到一种方法在回发时保留其状态。

例如，假设用户单击一个按钮，然后它向下滑动并从列表中出现一个按钮，他单击一个按钮并发布页面。这将导致 dom 重置为其初始状态，这不是我想要的效果。

那么有没有办法在多个页面上维护被操纵的 DOM 元素状态呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:13:18.670

几个选项：

*   [饼干](http://en.wikipedia.org/wiki/HTTP_cookie)
*   [本地存储](http://diveintohtml5.info/storage.html)
*   [将其保持在会话](http://en.wikipedia.org/wiki/Session_%28computer_science%29)中的服务器端。

# android - UTF-8 与 apache commons-net

> ID：14174154
> 
> 赞同：1
> 
> 时间：2013-01-05T17:04:26.590
> 
> 标签：android, utf-8, apache-commons, apache-commons-fileupload

我有 Unicode 的问题，当我在 sdcard 上以阿拉伯​​名称保存文件时，一切都会好起来的，但是当文件通过 commons-net 上传到 ftp 服务器时，我会得到文件名作为 pic

![错误的 Unicode](../Images/223f57530d3c8dbbbcd405db478825f1.png)

请问有什么解决办法吗？

这是与 FTPClient 相关的部分代码：

```
FTPClient ftpClient = new FTPClient();

                try {

                    FTPClientConfig conf = new FTPClientConfig(FTPClientConfig.SYST_NT);
                      conf.setServerLanguageCode("ar");
                      ftpClient.configure(conf);
                    ftpClient.setControlEncoding("UTF-8");
                    ftpClient.setAutodetectUTF8(true); 
                    ftpClient.connect(server, port);
                    ftpClient.login(user, pass);
                    ftpClient.enterLocalPassiveMode();
                    ftpClient.setFileType(FTP.BINARY_FILE_TYPE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:42:35.320

使用非拉丁字母的文件名会导致很多问题。许多程序不会加载或显示此类文件。我会质疑自己，是否真的需要这种文件命名。

# mod-rewrite - 我可以在 url 中使用下划线而不是连字符吗？

> ID：14174156
> 
> 赞同：3
> 
> 时间：2013-01-05T17:04:57.203
> 
> 标签：mod-rewrite, url-rewriting, rewrite, permalinks

我想在我的网址中使用下划线而不是连字符。我的意思是喜欢这个[维基百科链接](http://en.wikipedia.org/wiki/List_of_programming_languages)

## 我当前的网址：

```
www.example.com/2013/01/hello-this-is-a-test-post/ 
```

## 所需的网址

```
www.example.com/2013/01/hello_this_is_a_test_post/ 
```

但是 wordpress stackexchange 中的一位优秀程序员建议我，Google 将`-`其视为单词分隔符，但不是`_`.

他还提到该规则不适用于 MediaWiki 网站。

这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:09:25.943

Google 将连字符视为单词分隔符是 TRUE。

我记得它背后的原因是基于程序员搜索通常（如果不是总是）有下划线的函数。因此，Google 将下划线视为单词连接符。

本文详述： http: [//www.ecreativeim.com/blog/2011/03/seo-basics-hyphen-or-underscore-for-seo-urls/](http://www.ecreativeim.com/blog/2011/03/seo-basics-hyphen-or-underscore-for-seo-urls/)

# java - 在 Java 中声明和初始化一个数组

> ID：14174158
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:05:01.880
> 
> 标签：java, arrays, null, initialization, declaration

> **可能重复：**
> [我可以在 Java 中使用相同的指令声明和初始化数组吗？](https://stackoverflow.com/questions/3426668/can-i-declare-and-initialize-an-array-with-the-same-instruction-in-java)

如何在 Java 中声明一个数组，同时初始化它的一些已知元素？首先这个方法声明但不初始化元素：

```
public static someClass myArray[] = new someClass[10]; // all values are null, 
```

现在想象我知道第​​一个元素的值但不知道其他元素的值，在我为它们分配值的一些逻辑之后，第二个建议是：

```
public static someClass[] myArray = {new someClass(),null,null}; 
```

所以这个指令有效，但对 200 个元素的数组做同样的事情是不切实际的

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T17:07:02.137

```
public static String st[] = new String[]{"foo", "bar"}; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-05T17:07:10.727

在静态块中初始化它，当然：

```
static {
   str st[] = new str[10];
   for (int i = 0; i < st.length; ++i) {
     st[i] = new str();
   }
} 
```

其他人都假设你的`str`手段`java.lang.String`。我不是。

我会指出您的命名和编码约定相当差。我建议遵循 Java 编码标准，并更加努力地考虑事物的好名字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T17:06:58.807

尝试以下操作：

```
public static String st[] = {"a","b","c"}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-05T17:07:04.287

你的意思是

```
public static String st[] = new String[] { "a", "b", "c" }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T17:09:43.273

```
 public static String st[] = {"firstValue",null,null,null} 
```

或者

```
public static String st[] = {"firstValue","second","third","fourth"} 
```

# arm - 为arm（raspberryPi）交叉编译一个linux模块

> ID：14174159
> 
> 赞同：2
> 
> 时间：2013-01-05T17:05:04.340
> 
> 标签：arm, kernel-module, raspberry-pi, cross-compiling

我正在尝试使用 crosstool-ng 1.15.3 为 raspberryPi（arm）交叉编译一个（示例）linuxmodule。

我得到以下输出：

```
markus@markus-R55S:~/Desktop/speakerarm$ make ARCH=arm CROSS_COMPILE=arm-unknown-linux-gnueabi- 
make -C /lib/modules/3.2.0-35-generic-pae/build SUBDIRS=/home/markus/Desktop/speakerarm modules
make[1]: Entering directory `/usr/src/linux-headers-3.2.0-35-generic-pae'
  CC [M]  /home/markus/Desktop/speakerarm/speaker.o
In file included from /usr/src/linux-headers-3.2.0-35-generic-pae/arch/arm/include/asm/types.h:4:0,
                 from include/linux/types.h:4,
                 from include/linux/list.h:4,
                 from include/linux/module.h:9,
                 from /home/markus/Desktop/speakerarm/speaker.c:1:
include/asm-generic/int-ll64.h:11:29: fatal error: asm/bitsperlong.h: No such file or directory
compilation terminated.
make[2]: *** [/home/markus/Desktop/speakerarm/speaker.o] Error 1
make[1]: *** [_module_/home/markus/Desktop/speakerarm] Error 2
make[1]: Leaving directory `/usr/src/linux-headers-3.2.0-35-generic-pae'
make: *** [default] Error 2 
```

我想包含路径有问题。我的主机有内核 3.2.35，我的目标机器是 3.2.27+。我的错误是什么？Makefile 包含以下内容：

```
obj-m   := speaker.o

KDIR    := /lib/modules/$(shell uname -r)/build
PWD     := $(shell pwd)

default:
    $(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:56:52.970

有几点需要注意：

1.  您正在针对您的开发主机的 linux 源代码树进行编译——从`-generic-pae`post-fix 来看，它可能不是内核主线。ARM SoC 更改需要很长时间才能进入主线，而进入其他非 ARM 内核分支则更慢。建议您找到集成了 SoC 更改的内核树，并获取标记版本，例如`3.2`而不是 head。

2.  您是否配置了用于构建 ARM 内核的 linux 构建系统？例如

`export ARCH=arm`

`make clean`

`make rpi_defconfig`

如果您不这样做，您的内核将被配置为 x86 构建，并且`/arch/arm`文件夹中的标头将不可用 - 即使您已设置`ARCH`

尝试构建一个完整的内核并确保在构建模块之前首先工作是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:45:05.980

下载内核 3.2.27 [rpi-3.3.27](https://github.com/raspberrypi/linux/archive/rpi-3.2.27.zip)，并按照[RPi_Kernel_Compilation中提到的步骤](http://elinux.org/RPi_Kernel_Compilation)

# arduino - Arduino Micro 无接触触发

> ID：14174162
> 
> 赞同：2
> 
> 时间：2013-01-05T17:05:13.343
> 
> 标签：arduino

我正在使用 Arduino Micro 在我拥有的前端触发特定事件。然而，出于某种原因，一些关键组合只是随机触发。发生这种情况时，我什至没有碰 arduino。

我已经设置好了，所以当你按下一个按钮时，它只会触发一次击键，而不是在按下按钮时重复它。

我错过了什么，或者搞砸了什么？

```
int escButton = 12, valEsc, valEsc2, stateEsc;
int volUp = 11, valVup, valVup2, stateVup;
int volDown = 10, valVdown, valVdown2, stateVdown;
int rebootButton = 9, valReboot, valReboot2, stateReboot;

char ctrlKey = KEY_LEFT_GUI;
char shiftKey = KEY_LEFT_SHIFT;

void pressKeyCombos(int combo){
 switch(combo) {
   case 1:
       Keyboard.press(KEY_ESC);
       delay(100);
       Keyboard.releaseAll();
   break;

   case 2:
       Keyboard.press(shiftKey);
       Keyboard.press(KEY_F1);
       delay(100);
       Keyboard.releaseAll();
   break;

   case 3:
       Keyboard.press(shiftKey);
       Keyboard.press(KEY_F3);
       delay(100);
       Keyboard.releaseAll();
   break;

   case 4:
       Keyboard.press(shiftKey);
       Keyboard.press(KEY_F2);
       delay(100);
       Keyboard.releaseAll();
   break;
 }
}

void setup() {
     pinMode(escButton, INPUT);
     stateEsc = digitalRead(escButton);
     Keyboard.begin();
}

void loop(){
     valEsc = digitalRead(escButton);
     delay(10);
     valEsc2 = digitalRead(escButton);

     valVup = digitalRead(volUp);
     delay(10);
     valVup2 = digitalRead(volUp);

     valVdown = digitalRead(volDown);
     delay(10);
     valVdown2 = digitalRead(volDown);

     valReboot = digitalRead(rebootButton);
     delay(10);
     valReboot2 = digitalRead(rebootButton);

     if (valVup == valVup2) {                 
       if (valVup != stateVup) {           
         if (valVup == LOW) {              
           pressKeyCombos(4);
         }
       }
       stateVup = valVup;
     }

     if (valVdown == valVdown2) {                 
       if (valVdown != stateVdown) {           
         if (valVdown == LOW) {              
           pressKeyCombos(3);
         }
       }
       stateVdown = valVdown;
     }

     if (valReboot == valReboot2) {                 
       if (valReboot != stateReboot) {           
         if (valReboot == LOW) {              
           pressKeyCombos(2);
         }
       }
       stateReboot = valReboot;
     }

     if (valEsc == valEsc2) {                 
       if (valEsc != stateEsc) {           
         if (valEsc == LOW) {              
           pressKeyCombos(1);
         }
       }
       stateEsc = valEsc;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:06:29.417

默认情况下，输入为高阻抗。根据您对行为的描述，我可以猜测您没有添加外部上拉/下拉电阻，并且引脚连接到常开开关。随机输入将与预期的一样，并在 digitialRead() 的文档中注明：

> 笔记
> 
> 如果引脚没有连接到任何东西，digitalRead() 可以返回
> HIGH 或 LOW（这可以随机更改）。
> 
> [请参阅 digitalRead() 的参考页](http://arduino.cc/en/Reference/DigitalRead)

微型确实有能力提供内部上拉。您的代码未显示您已启用内部上拉电阻。这是通过写入输入引脚以一种看起来很奇怪的方式完成的。来自 Arduino 文档：

> Atmega 芯片中还内置了方便的 20K 上拉电阻，可以通过软件进行访问。这些内置上拉电阻可以通过以下方式访问。
> 
> pinMode（引脚，输入）；// 将 pin 设置为输入
> digitalWrite(pin, HIGH); //开启上拉电阻
> 
> [见数字引脚](http://arduino.cc/en/Tutorial/DigitalPins)

所以在你的情况下，在 setup() 中添加四个 digitalWrite() 来启用引体向上，你看起来不错。

# ruby-on-rails - 我如何找出哪个版本的 gems 适合 ruby 和 rails 的哪个版本？

> ID：14174165
> 
> 赞同：2
> 
> 时间：2013-01-05T17:05:32.633
> 
> 标签：ruby-on-rails, ruby, gem

有没有什么地方我可以去比较红宝石和宝石到铁轨？

例如

```
ruby  |  gems   |    rails
1.8   |   1.7   |    2.9
1.9   |   2.0   |    3.0
1.9   |   2.2   |    3.1 
```

这将传递帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:31:48.913

我推荐使用 ruby​​ 1.9.x。因为 Ruby on Rails 4.0 即将发布。（也许是 2013 年）。RoR4.0 必须只需要 1.9.x :-)

我强烈推荐最新版本的 Ruby、Rails

# r - 从 lapply 中提取不同长度的输出

> ID：14174170
> 
> 赞同：0
> 
> 时间：2013-01-05T17:05:49.130
> 
> 标签：r, lapply

谁能帮我解决这个问题。我`lapply`在@Arun提供的以下代码中使用：

```
out <- lapply(1:length(f1), function(f.idx) { 
  df1 <- read.delim(f1[f.idx], header = T) 
  df2 <- read.delim(f2[f.idx], header = T) 
  df3 <- read.delim(f3[f.idx], header = T) 

  idx.v <- get_idx(df1) 
  result <- get_result(idx.v, df2, df3)

}) 
```

现在，`out`是 110 个文件的列表。这些输出文件的长度不同，所以我不能使用`as.data.frame(do.call(rbind, out))`. 有没有办法以类似循环的方式将每个文件保存为单独的文件，或者我必须手动进行（例如`out[1]`，`out[2]`等等......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:16:01.657

你想通过什么来实现`do.call(rbind...`？那是为了组合列表中的数据。我不知道你为什么要`as.data.frame`在里面贴一个“”。如果您有一个`list`of`data.frame`具有相同列的 s，但行数不同，并且您基本上希望将这些`data.frame`s 彼此“堆叠”，那么您应该能够使用以下内容获得一个大`data.frame`然后保存单个对象：

```
do.call(rbind, out) 
```

听起来您`data.frame`在名为“out”的列表中有不同的 s，并试图将您`data.frame`的 s 保存为工作目录中的单个文件。如果是这种情况，请尝试以下操作：

```
lapply(names(out), 
       function(x) write.csv(out[[x]], 
                             file = paste(x, ".csv", sep = ""))) 
```

如果`data.frame`列表中 s 的名称不是唯一的，您可能需要采用不同的方法。

如果您链接到您之前的相关问题，这可能比简单地提及谁与您共享代码更好。

# c++ - 在向量中写线程安全

> ID：14174171
> 
> 赞同：1
> 
> 时间：2013-01-05T17:05:59.683
> 
> 标签：c++, multithreading, stl, vector, c++11

> **可能重复：**
> [STL 向量和线程安全](https://stackoverflow.com/questions/4346742/stl-vector-and-thread-safety)

如果我有这段代码：

```
std::vector<std::vector<double>> a;
std::vector<double> b;

// init a,b....

std::vector<double> c;
parallel_for_each (a.begin(); a.end; [&c, &b] (std::vector<double>& aux) {
   c.push_back(foo(b, aux));
}); 
```

在向量中添加这样的元素是线程安全的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T17:08:44.113

不，`std::vector`不是线程安全的。您必须提供同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T17:11:45.887

那个parallel_for_each 是从哪里来的？如果它来自微软的并发库，只需使用 concurrent_vector。

# sql - SQL 中的 Convert 函数出错

> ID：14174172
> 
> 赞同：0
> 
> 时间：2013-01-05T17:06:01.960
> 
> 标签：sql, sql-server-2008, ms-access

我在 MSACCESS 上写了以下 SQL

```
SELECT 
    Followup.MRN, Followup.dateentered, Followup.formname, 
    (Followup.MRN & Format([Followup.dateentered], "yyyymmdd") 
     & Followup.formname) 
     AS UniqueMilestoneID
FROM Followup; 
```

它工作得很好

现在，当我在 SQL Server 中编写此代码时：

```
SELECT 
   Followup.MRN, Followup.dateentered, Followup.formname, 
   (Followup.MRN & Convert([Followup.dateentered], "yyyymmdd") 
    & Followup.formname) AS UniqueMilestoneID
FROM Followup 
```

我收到以下错误

> *消息 207，级别 16，状态 1，第 1 行
> 无效的列名称“yyyymmdd”。
> 消息 243，级别 16，状态 1，第 1 行
> 类型 Followup.dateentered 不是已定义的系统类型。*

知道如何克服“转换”功能的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:09:38.417

我想你想要这个：

```
SELECT 
   Followup.MRN, Followup.dateentered, Followup.formname, 
   Followup.MRN + 
      Convert(char(8), Followup.dateentered, 112) + 
      Followup.formname AS UniqueMilestoneID
FROM Followup 
```

这是[SQL Server 中日期格式](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)的参考。还要在 SQL Server 中连接字符串，您希望使用`+`符号而不是`&`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T17:11:26.133

首先，SQL Server 中的字符串常量由单引号而不是双引号分隔。

其次， convert 不接受这种形式的参数。看到[这个](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

我想你想要的是：

```
convert(varchar(8), Followup.DateEntered, 112) 
```

# regex - 重命名一堆文件夹

> ID：14174174
> 
> 赞同：0
> 
> 时间：2013-01-05T17:06:23.943
> 
> 标签：regex, windows, unix, cygwin

我在同一个目录中有一堆文件夹

```
2012-12-06 Camcorder_5th_Jan_2013
2012-12-07 Camcorder_5th_Jan_2013
2012-12-16 Camcorder_5th_Jan_2013
... 
```

我希望删除 Camcorder_5th_Jan_2013 部分，让它们看起来像：

```
2012-12-06 
2012-12-07
2012-12-16 
... 
```

我在想类似的东西

```
> mv (*).Camcorder* 1 
```

即捕获摄像机之前的所有内容并放入第 1 组并重命名为该组。

但我在挣扎。

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:25:11.100

`\s.+`用空字符串替换匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:27:34.187

我建议使用`rename`，我目前不在我的 Linux 机器前，但希望这两个链接可以让你到达某个地方：

**Howto：Linux 在 Shell 提示符下重命名多个文件**

[http://www.cyberciti.biz/tips/renaming-multiple-files-at-a-shell-prompt.html](http://www.cyberciti.biz/tips/renaming-multiple-files-at-a-shell-prompt.html)

[linux批量重命名目录并从名称中删除#字符](https://stackoverflow.com/questions/2417339/linux-batch-rename-directories-and-strip-caracter-from-name)

更新：如果您可以访问 Gnome 或 X-Environment，如果 Bash 语法让您头疼，那么您可以尝试这样的事情。

**[变形：一个文件-n-文件夹重命名器： http](http://file-folder-ren.sourceforge.net) **://file-folder-ren.sourceforge.net****

# tcp - WebSocket 框架中的掩码是什么？

> ID：14174184
> 
> 赞同：75
> 
> 时间：2013-01-05T17:07:29.650
> 
> 标签：tcp, stream, websocket, frame, packet

我正在研究 websocket 实现，但不知道框架中的掩码是什么意思。

有人可以解释一下它的作用以及为什么推荐它吗？

```
 0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-------+-+-------------+-------------------------------+
 |F|R|R|R| opcode|M| Payload len |    Extended payload length    |
 |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |
 |N|V|V|V|       |S|             |   (if payload len==126/127)   |
 | |1|2|3|       |K|             |                               |
 +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +
 |     Extended payload length continued, if payload len == 127  |
 + - - - - - - - - - - - - - - - +-------------------------------+
 |                               |Masking-key, if MASK set to 1  |
 +-------------------------------+-------------------------------+
 | Masking-key (continued)       |          Payload Data         |
 +-------------------------------- - - - - - - - - - - - - - - - +
 :                     Payload Data continued ...                :
 + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +
 |                     Payload Data continued ...                |
 +---------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-05T17:30:29.037

Websockets 在 RFC6455 中定义，在[第 5.3 节](https://www.rfc-editor.org/rfc/rfc6455#section-5.3)中声明：

> 屏蔽密钥的不可预测性对于防止恶意应用程序的作者选择出现在线路上的字节至关重要。

在[一篇关于 Websockets 的博客文章中，](http://lucumr.pocoo.org/2012/9/24/websockets-101/)我找到了以下解释：

> 掩码密钥（32 位）：如果设置了掩码位（相信我，如果您为服务器端编写代码），您可以在此处读取用于对有效负载进行异或运算的无符号字节。**它用于确保来自客户端的攻击者不会滥用糟糕的代理**。

但我在[邮件列表存档](ftp://ftp.ietf.org/ietf-mail-archive/hybi/2012-05.mail)中找到的最清楚的答案。约翰·坦普林在那儿说：

> 基本上，WebSockets 的独特之处在于您需要保护网络基础设施，即使您在客户端运行恶意代码、对服务器的完全恶意控制，并且您可以信任的唯一部分是客户端浏览器。 **通过让浏览器为每一帧生成一个随机掩码，恶意客户端代码无法选择出现在网络上的字节模式并使用它来攻击易受攻击的网络基础设施**。

正如 kmkaplan 所述，攻击向量在 RFC的[第 10.3 节中进行了描述。](https://www.rfc-editor.org/rfc/rfc6455#section-10.3)
这是防止代理缓存中毒攻击的一种措施¹。它的作用是创造一些随机性。您必须使用随机掩码密钥对有效负载进行异或。

顺便说一句：不只是推荐。这是**强制性**的。

1：见[Huang、Lin-Shung 等人。“为了乐趣和利益而自言自语。” W2SP 论文集 (2011)](https://web.archive.org/web/20180127212141/http://w2spconf.com/2011/papers/websocket.pdf)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-29T20:22:49.347

从[这篇文章](http://www.lenholgate.com/blog/2011/07/websockets---why-do-we-need-to-mask-data-from-client-to-server.html)：

> 需要屏蔽从客户端到服务器的 WebSocket 流量，因为恶意代码不太可能导致一些损坏的代理做错事并将其用作某种攻击。没有人证明这实际上会发生，但由于它可能发生的事实足以让浏览器供应商感到紧张，因此添加了屏蔽以消除它被用作攻击的可能性。

因此，假设攻击者能够破坏在浏览器和后端服务器中执行的 JavaScript 代码，屏蔽旨在防止这两个端点之间发送的字节序列以可能破坏任何损坏代理的特殊方式制作在这两个端点之间（通过破坏，这意味着代理可能会尝试将 websocket 流解释为 HTTP，而实际上它们不应该）。

浏览器（而不是浏览器中的 JavaScript 代码）对用于发送消息的随机生成的掩码拥有最终决定权，这就是为什么攻击者不可能知道代理可能会看到的最终字节流的原因。

请注意，如果您的 WebSocket 流已加密（应该如此），则掩码是多余的。Python的Flask作者的[文章：](http://lucumr.pocoo.org/2012/9/24/websockets-101/)

> 为什么会有遮罩？因为显然那里有足够多的损坏的基础设施，可以让升级标头通过，然后将其余连接作为第二个 HTTP 请求处理，然后将其填充到缓存中。我对此无话可说。无论如何，对此的防御基本上是一个强大的 32 位随机数作为掩码密钥。或者你知道……使用 TLS 而不要使用糟糕的代理。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-11-12T17:36:30.733

我一直在努力理解 WebSocket 掩码的用途，直到我遇到以下两个可以清楚地总结它的资源。

摘自《高性能浏览器网络》一书：

> 所有客户端发起的帧的有效负载都使用帧头中指定的值进行屏蔽：这可以防止在客户端上执行的恶意脚本对可能不理解 WebSocket 协议的中介执行缓存中毒攻击。

由于中介（例如透明代理）并不总是理解 WebSocket 协议，因此恶意脚本可以利用它并创建导致这些中介中的缓存中毒的流量。

但是怎么做？

文章为乐趣和利润自言自语 ( [http://www.adambarth.com/papers/2011/huang-chen-barth-rescorla-jackson.pdf](http://www.adambarth.com/papers/2011/huang-chen-barth-rescorla-jackson.pdf) ) 进一步解释了缓存中毒攻击的工作原理：

> 1.  攻击者的 Java 小程序打开一个到攻击者.com:80 的原始套接字连接（和以前一样，攻击者还可以通过托管适当的策略文件来授权此请求的 SWF 来发起类似的攻击）。
> 2.  攻击者的 Java 小程序通过伪造的 Host 标头通过套接字发送字节序列，如下所示： GET /script.js HTTP/1.1 主机：target.com
> 3.  透明代理将字节序列视为 HTTP 请求，并根据原始目标 IP 将请求路由到攻击者的服务器。
> 4.  攻击者的服务器在很远的将来使用带有 HTTP Expires 标头的恶意脚本文件进行回复（以指示代理尽可能长时间地缓存响应）。
> 5.  由于代理基于 Host 标头进行缓存，因此代理将恶意脚本文件存储在其缓存中为[http://target.com/script.js](http://target.com/script.js)，而不是 [http://attacker.com/script.js](http://attacker.com/script.js)。
> 6.  将来，每当任何客户端通过代理请求[http://target.com/script.js](http://target.com/script.js)时，代理都会提供恶意脚本的缓存副本。

[![在此处输入图像描述](../Images/5ad3bfb35923bf255020db6aa98e4476.png)](https://i.stack.imgur.com/MnpMn.png)

这篇文章还进一步解释了 WebSockets 如何在缓存中毒攻击中发挥作用：

> 考虑一个中介检查浏览器和攻击者服务器之间交换的数据包。如上所述，客户端请求 WebSockets 并且服务器同意。此时，客户端可以在通道上发送它想要的任何流量。不幸的是，中介不知道 WebSockets，所以最初的 WebSockets 握手看起来就像一个标准的 HTTP 请求/响应对，请求像往常一样被一个空行终止。因此，客户端程序可以注入看起来像 HTTP 请求的新数据，并且代理可以这样对待它。因此，例如，他可能会注入以下字节序列：`GET /sensitive-document HTTP/1.1` `Host: target.com`
> 
> 当中介检查这些字节时，它可能会得出结论，这些字节表示同一套接字上的第二个 HTTP 请求。如果中介是透明代理，中介可能会根据伪造的 Host 头路由请求或缓存响应。

在上面的示例中，恶意脚本利用了中间人不理解的 WebSocket 并“毒化”了它的缓存。下次有人要求时`sensitive-document`，`target.com`他们将收到攻击者的版本。如果该文档用于谷歌分析，想象一下攻击的规模。

总而言之，通过在有效载荷上强制使用掩码，这种中毒是不可能的。中介的缓存条目每次都会不同。

# macos - 在 mac 中连接时魔法 cookie 无效

> ID：14174188
> 
> 赞同：2
> 
> 时间：2013-01-05T17:07:58.783
> 
> 标签：macos, x11, wireshark, xauth, x11-forwarding

我正在尝试通过 ssh -X 从 mac 访问远程 ubuntu 服务器。我在 sshd_config 中启用了 X11 转发。连接ubuntu后，当我尝试启动wireshark时，出现以下错误

Invalid MIT-MAGIC-COOKIE-1 keyInvalid MIT-MAGIC-COOKIE-1 keyInvalid MIT-MAGIC-COOKIE-1 keyInvalid MIT-MAGIC-COOKIE-1 keyError: Can't open display: localhost:10.0

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T15:33:44.293

在主机 Mac 上执行“xhost +”（如果您希望它比允许所有 X11 主机连接更安全，请查找 xhost 的手册页），然后 ssh -X。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T13:34:22.400

当我使用 NoMachine 客户端连接到远程主机时，我遇到了同样的问题。我通过终止当前的 NoMachine 会话并开始一个新的会话来修复。

# javascript - javascript自执行函数和作用域

> ID：14174190
> 
> 赞同：1
> 
> 时间：2013-01-05T17:08:20.767
> 
> 标签：javascript

我阅读了很多关于 javascript 匿名自执行函数的帖子并询问/回答，但恐怕我仍然没有抓住重点。为什么这段代码显示 myvar 值？构造 (function(){ *code* })() 不应该让所有变量从外部不可见吗？

```
(function(){
    myvar = 5;
})();

alert(myvar); 
```

那么上面的代码和

```
function myfunction(){
    myvar = 5;
};
myfunction();

alert(myvar); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:09:42.593

`myvar`在窗口范围内定义，因此所有人都可以访问。

`myvar`如果您想将其保密，则应使用以下范围`var`：

```
(function(){
    var myvar = 5;
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T17:10:02.110

您未能使用 声明“myvar” `var`。

看看当你像这样改变它时会发生什么：

```
(function(){
    "use strict";
    myvar = 5;
})(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T17:16:14.227

变量的作用域是在 javascript 中的函数级别。这意味着如果您在循环或 if 语句中声明一个变量，它将可用于整个函数。

在您的情况下，正如有人已经指出的那样，您的 myVar 可用于整个窗口。

如果您需要在函数范围内显式地锁定变量，请创建一个匿名函数，然后立即执行它，其中的所有变量都将作用于该函数

```
(function(){
    var myvar = 5;
})();

alert(typeof(myVar)); 
```

结果“未定义”

# python - 服务器从 Flask 向多个客户端发送事件

> ID：14174191
> 
> 赞同：5
> 
> 时间：2013-01-05T17:08:28.427
> 
> 标签：python, flask, server-sent-events

我正在玩一个小项目，以更好地了解 Web 技术。一项要求是，如果多个客户可以访问我的网站，并且其中一个进行了更改，则应通知所有其他客户。从我收集的服务器发送事件来看，似乎可以做我想做的事。但是，当我在 Firefox 和 Chrome 中打开我的网站并尝试发送事件时，只有一个浏览器会收到它。如果我再次发送一个事件，只有一个浏览器会收到新事件，通常是没有收到第一个事件的浏览器。

这是相关的代码片段。

客户：

```
console.log("setting sse handlers")
viewEventSource = new EventSource("{{ url_for('viewEventRequest') }}");
viewEventSource.onmessage = handleViewEvent;

function handleViewEvent(event){
    console.log("called handle view event")
    console.log(event);
} 
```

服务器：

```
@app.route('/3-3-3/view-event')
def view_event_request():
    return Response(handle_view_event(), mimetype='text/event-stream')

def handle_view_event():
while True:
    for message in pubsub_view.listen():
        if message['type'] == 'message':
            data = 'retry: 1\n'
            data += 'data: ' + message['data'] + '\n\n'
            return data

@app.route('/3-3-3/test')
def test():
    red.publish('view-event', "This is a test message")
    return make_response("success", 200) 
```

我的问题是，如何将事件发送到所有连接的客户端，而不仅仅是一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:15:43.473

以下是一些可能会有所帮助的要点（我一直打算基于 'django-sse' 发布类似'flask-sse' 的东西）：

[https://gist.github.com/3680055](https://gist.github.com/3680055)

[https://gist.github.com/3687523](https://gist.github.com/3687523)

也很有用 - [https://github.com/jkbr/chat/blob/master/app.py](https://github.com/jkbr/chat/blob/master/app.py)

关于您的代码，我首先注意到的是“handle_view_event”不是生成器。虽然它在一个'while'循环中，但使用'return'总是会在我们第一次返回数据时退出函数；一个函数只能返回一次。我认为您希望它改为“产量”。

无论如何，上面的链接应该给你一个工作设置的例子。

正如 Anarov 所说，websockets 和 socket.io 也是一种选择，但无论如何 SSE 应该可以工作。如果不需要 ws，我认为 socket.io 支持使用 SSE。

# html - html表格的边框css

> ID：14174192
> 
> 赞同：0
> 
> 时间：2013-01-05T17:08:36.890
> 
> 标签：html, css

我有两张表，一张的 id ='data'。我的问题是我只想为表 id='data' 应用下面的边框属性，但是从下面的代码中，css 被应用于两个表。如何纠正这个

```
<style>
table
{
   border-collapse:collapse;
}
table#data,th,td
{
   border:1px solid black;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:10:42.417

这应该工作：

```
#data,
#data th,
#data td
{
   border:1px solid black;
} 
```

因为`table`在 CSS 选择器中，您将调用所有表，除非您指定一个类，如`table.class { ... }`;)

**// 编辑**

好吧，我不得不说：

```
table#data,
table#data th,
table#data td
{
   border:1px solid black;
} 
```

也将工作...

最主要的是，您在 CSS 中指定所需元素的 ID 或类，以将您的样式应用于您所需的元素...

# ruby-on-rails - 关于嵌套属性表单的问题

> ID：14174194
> 
> 赞同：2
> 
> 时间：2013-01-05T17:08:42.780
> 
> 标签：ruby-on-rails, ruby, activerecord, nested-attributes, nested-form-for

这是我的第一个问题。我希望你能帮助我。我有两个模型。

```
 class Cliente < ActiveRecord::Base
      attr_accessible :cedula, :direccion, :nombres, :telefono
      validates :cedula, :direccion, :nombres, :telefono, :presence => true 
      validates :cedula, :uniqueness => { :message => "Cedula ya en uso" }
      has_many :facturas

    class Factura < ActiveRecord::Base
      attr_accessible :cliente_attributes, :iva, :numero, :subtotal, :total, :created_at
      belongs_to :cliente
      accepts_nested_attributes_for :cliente 
```

我希望在 facturas#new 视图中可以创建或编辑 Cliente。如果存在更新或者如果不存在创建。我正在使用嵌套属性。如果存在，我使用 javascript 来填充文本字段。如果不存在，我填充文本字段并在 Factura 保存时保存。这是事实#新观点。

```
<h1>Nueva Factura</h1>

<%= form_for @factura do |f| %>
<% if @factura.errors.any? %>
    <h2>Errores:</h2>   
    <ul>
        <% @factura.errors.full_messages.each do |message| %>
            <li><%= message %></li>
        <% end %>
    </ul>
<% end %>
<p>
<div class = "contenedor_factura">
    <%= f.label :numero %><br />
    <%= f.number_field :numero %><br />
    <%= f.label :fecha %><br />
    <%= f.date_select :created_at %><br />
</div>
<div class = "contenedor_cliente">
    <%= f.fields_for @cliente do |builder| %>
        <%= builder.label :cedula, "Cédula" %>
        <%= builder.text_field :cedula %>
        <%= builder.label :nombres, "Nombres" %>
        <%= builder.text_field :nombres %>
        <%= builder.label :direccion, "Dirección" %><br />
        <%= builder.text_field :direccion %>
        <%= builder.label :telefono, "Teléfono" %><br />
        <%= builder.text_field :telefono %>
        <%= builder.hidden_field :id%>
    <% end %>
</div> 
<div class = "contenedor_productos">

</div>

<%= f.label :subtotal %><br />
<%= f.text_field :subtotal %>
<br />
<%= f.label :iva %><br />
<%= f.text_field :iva %>

 </p>
  <p>
    <%= f.submit "Agregar Nueva Factura" %>
  </p>
  <% end %> 
```

当客户是新的我没有问题，它保存，但如果客户存在我有这个消息

```
ActiveRecord::RecordNotFound in FacturasController#create

Couldn't find Cliente with ID=6 for Factura with ID= 
```

我的问题是什么？

编辑：

这是我的 FacturasController

```
def new
  @factura = Factura.new
  @cliente = @factura.build_cliente
end

def create
  @factura = Factura.new(params[:factura])
  if @factura.save
    redirect_to facturas_path, :notice => "Factura Guardada"
  else
    render "new"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:50:53.673

我不确定nested_attrubes 是否处理已经创建的模型。所以我们不能依赖它。

这应该工作

```
def create
  cliente_attrs = params[:factura].delete :cliente
  @cliente = cliente_attrs[:id].present? ? Cliente.find(cliente_attrs[:id]) : User.create(user_attrs)
  @factura = cliente.facturas.build(params[:factura])
  if @factura.save
    redirect_to facturas_path, :notice => "Factura Guardada"
  else
    render "new"
  end
end 
```

您现在可以删除该行`accepts_nested_attributes_for :cliente`

# mysql - 查询仅检索不重复的记录

> ID：14174202
> 
> 赞同：-2
> 
> 时间：2013-01-05T17:09:28.183
> 
> 标签：mysql, select, group-by, distinct

这是我的产品表结构

> product_id product_name
> ---------------------------------
> 100 鼠标
> 101 键盘
> 101 Pendrive
> 102 主板
> 102 读卡器
> 103 适配器

我想要通过消除重复记录OUTPUT 为我提供以下输出的查询
------------------
100
103

我试过这个查询

```
SELECT count(product_id)
FROM product 
GROUP BY product_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:38:19.443

尝试这个：

```
SELECT product_id 
FROM product 
GROUP BY product_id 
HAVING COUNT(product_id) = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:13:43.673

你可以试试这个 SQL

`SELECT t1.product_id FROM (SELECT product_id, COUNT(*) AS cnt FROM table GROUP BY product_id) t1 WHERE t1.cnt = 1`

# entity-framework - SimpleMembership 和 ADO.NET 实体数据模型的异常

> ID：14174208
> 
> 赞同：2
> 
> 时间：2013-01-05T17:09:55.780
> 
> 标签：entity-framework, ado.net, asp.net-mvc-4, visual-studio-2012, membership

我创建新的 ASP.NET MVC4 项目，帐户控制器使用表单身份验证。然后我运行项目并注册新用户以创建数据库文件。然后我在新的 mdf 数据库文件中创建一些表，并为这个新表使用 ADO.NET 实体数据模型，而不是成员资格的表。创建 model.edmx 后，web.config 文件中有两个连接字符串。

```
 name="Entities" connectionString="metadata=res://*/Models.Database.LAModel.csdl|res://*/Models.Database.LAModel.ssdl|res://*/Models.Database.LAModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=(LocalDb)\v11.0;attachdbfilename=|DataDirectory|\aspnet-LAWebProject-db.mdf;initial catalog=aspnet-LAWebProject-db;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient"

    name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-LAWebProject-db;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-LAWebProject-db.mdf" providerName="System.Data.SqlClient" 
```

项目调试几次然后崩溃，出现以下异常：无法连接到数据库服务器 SQL Server。请帮我解决它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:15:47.997

尝试`"\"`从连接字符串中删除它：

```
|DataDirectory|\aspnet-LAWebProject-db.mdf; 
```

变成

```
|DataDirectory|aspnet-LAWebProject-db.mdf; 
```

如果不起作用，请检查文件夹`aspnet-LAWebProject-db.mdf`中是否存在db 文件`App_Data`。

确保您的 LocalDb 实例也在运行：

[LocalDB：我的数据库在哪里？](http://blogs.msdn.com/b/sqlexpress/archive/2011/10/28/localdb-where-is-my-database.aspx)

# c++ - 'DrawObject' was not declared in this scope error using std::vector, trying to store class object (c++)

> ID：14174215
> 
> 赞同：0
> 
> 时间：2013-01-05T17:10:54.387
> 
> 标签：c++, object, scope, instance

Trying to have my "layer" class, put 3 objects "drawObject", into it's vector, and getting out of scope error.

Everywhere I see they just do "vector >Class< vectorName"; and it works!

layer class:

```
#include <vector>
#include "DrawObject.h"

using namespace std;

class layer
{
    public:

        layer();
        virtual ~layer();

    private:

        vector<DrawObject> objects; <--------------- Error here! "'DrawObject' was not declared in this scope"
}; 
```

DrawObject class:

```
#include <SDL/SDL.h>
#include "AnimationSet.h"

class drawObject
{
    public:

        drawObject(char* name, char* surfaceFile, int xPos, int yPos, int drawLevel, bool willMoveVar, int animationNumber);
        drawObject(char* name, char* surfaceFile, int xPos, int yPos, int drawLevel, bool willMoveVar);
        virtual ~drawObject();
        SDL_Surface* loadImage(char* surfaceFile);
        SDL_Surface* getSurface();
        void setSurface(SDL_Surface* surface);
        char* getName();
        void setName(char* name);
        int getID();
        void setID(int ID);
        float getX();
        void addX(float xAdd);
        void setX(float xSet);
        float getY();
        void addY(float yAdd);
        void setY(float ySet);
        bool isSprite();
        void setIsSprite(bool isSprite);
        bool willMove();
        void setWillMove(bool willMove);
        bool draw();
        void setDraw(bool draw);

    private:

        SDL_Surface* surface = NULL; // Imagem, no caso de único sprite; caso contrário, spritesheet.
        char* name;
        int ID;
        float xPos;
        float yPos;
        bool isSpriteVar; // Se isSprite, imagem é spritesheet.
        bool willMoveVar;
        bool drawVar;

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:17:59.507

`vector<DrawObject>` should be `vector<drawObject>`, no? C++ is case-sensitive, you defined the class `drawObject` but attempt to use `DrawObject`.

# sed - 如何使用 sed 在数字前添加零？

> ID：14174218
> 
> 赞同：2
> 
> 时间：2013-01-05T17:11:08.200
> 
> 标签：sed, awk

我想使用 sed 或 awk 在一行格式化文本的中间添加一个零。

### 示例输入文件

```
line 1

line 2

line 3 
```

### 预期产出

```
line 01

line 02

line 03 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:29:44.727

您的问题有些模棱两可，但是如何使用`printf`with`awk`用零填充第二个字段：

```
$ awk 'NF==2 { printf "%s %02d\n", $1, $2}' file
line 01
line 02
line 03
line 10
line 100

$ awk 'NF==2 { printf "%s %04d\n", $1, $2}' file
line 0001
line 0002
line 0003
line 0010
line 0100 
```

如果您不想删除空行，请执行`awk 'NF==2 { printf "%s %04d\n", $1, $2} NF!=2' file`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T21:54:10.093

这可能对您有用（GNU sed）：

```
sed 's/\</0/2' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:16:58.090

### 使用带有反向引用的 POSIX 字符类

给定*/tmp/foo*包含：

```
line 1

line 2

line 3 
```

您可以调用`sed 's/[[:digit:]]/0&/' /tmp/foo`以获得以下输出：

```
line 01

line 02

line 03 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T17:17:39.227

在 awk 中，这很容易：

```
awk '{print $1, 0$2}' input.txt > output.txt 
```

在这种情况下，您显示的输入文本在文件中`input.txt`，我将其保存到一个新文件`output.txt`中。

这也是一个容易理解的命令。变量是您的`$1`“行”文本，`$2`变量是您的号码。此命令假定您的“行”文本中没有空格。在那儿？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T17:56:30.623

发布的问题的最简单答案是：

```
sed 's/ / 0/' 
```

如果这样做不行，请发布一些更具代表性的输入和预期输出，因为您可能需要考虑很多事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T07:12:56.830

```
awk 'NF==2{$2="0"$2}1' your_file 
```

# facebook - 从电脑上传图片并发送到graph api

> ID：14174221
> 
> 赞同：2
> 
> 时间：2013-01-05T17:11:16.237
> 
> 标签：facebook, facebook-graph-api, file-upload

我正在尝试使用基本的 html 输入表单从计算机上传图片，我有一个全局变量数组 $_FILE。现在我的问题是我将如何将该图片传递给 facebook graph api，我需要存储它我的服务器上的图片。我将如何生成存储的图像的链接（路径）（临时或永久）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:12:22.913

您可以使用它`<?php echo $file=$_SERVER['DOCUMENT_ROOT']; ?>`来查找服务器路径并对其进行处理。

# cakephp - 如何回应用户对单个事件的评论

> ID：14174226
> 
> 赞同：0
> 
> 时间：2013-01-05T17:11:31.423
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1, cakephp-model

大家好，我正在使用 Cakephp 2.x，我需要为每个单独的事件输出个人用户的评论。每个用户都有许多事件和许多评论。我有事件、评论和用户模型，并希望允许用户在每个事件 view.ctp 上发布和查看评论。如果有人可以提供任何开始提示来实现此功能，将不胜感激。

我试图在事件 view.ctp 中输出评论模型索引表，但该表没有填充数据库中的评论，但评论 view.ctp 实际上用评论填充表。我使用了 $this->loadModel('Comments'); 事件控制器中的函数。

```
<div class="events view">
    <?php echo $this->Html->css('viewevent'); ?>
    <?php echo $this->element('maintitlegen'); ?>

    <div style="padding-top: 160px">
    <h2><?php  echo $event['Event']['name']; ?></h2>
    <dl>

        <dt><?php echo __('Event Image'); ?></dt>
        <dd>
            <?php echo $this->Html->image('/uploads/event/filename/thumb/small/'.$event['Event']['filename']); ?>
            &nbsp;
        </dd>

        <dt><?php echo __('Date'); ?></dt>
        <dd>
            <?php echo h($event['Event']['date']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Time'); ?></dt>
        <dd>
            <?php echo h($event['Event']['time']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Description'); ?></dt>
        <dd>
            <?php echo h($event['Event']['description']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Dresscode'); ?></dt>
        <dd>
            <?php echo h($event['Event']['dresscode']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Slogan'); ?></dt>
        <dd>
            <?php echo h($event['Event']['slogan']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Price'); ?></dt>
        <dd>
            <?php echo h($event['Event']['price']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Offers'); ?></dt>
        <dd>
            <?php echo h($event['Event']['offers']); ?>
            &nbsp;
        </dd>

    </dl>

    <!--<?php foreach ($users as $user): ?>
    <?php echo $user['Comment']['comment']; ?>
    <?php endforeach; ?>-->
    <!--<?php echo $ucomment['Comment']['comment']; ?>-->

    <?php echo $this->Form->create('Comment', array('controller' => 'comments', 'action' => 'add')); ?>
    <?php echo ('Add Comment'); ?>
    <?php echo $this->Form->input('comment'); ?>
    <?php echo $this->Form->end('Submit'); ?>

</div>
<div class="comments index">
    <h2><?php echo ('Comments'); ?></h2>
    <table cellpadding="0" cellspacing="0">
    <tr>
            <th><?php echo $this->Paginator->sort('id'); ?></th>
            <th><?php echo $this->Paginator->sort('comment'); ?></th>
            <th><?php echo $this->Paginator->sort('created'); ?></th>
            <th><?php echo $this->Paginator->sort('modified'); ?></th>
            <th><?php echo $this->Paginator->sort('user_id'); ?></th>
            <th><?php echo $this->Paginator->sort('event_id'); ?></th>
            <th class="actions"><?php echo __('Actions'); ?></th>
    </tr>
    <?php
    foreach ($comments as $comment): ?>
    <tr>
        <td><?php echo h($comment['Comment']['id']); ?>&nbsp;</td>
        <td><?php echo h($comment['Comment']['comment']); ?>&nbsp;</td>
        <td><?php echo h($comment['Comment']['created']); ?>&nbsp;</td>
        <td><?php echo h($comment['Comment']['modified']); ?>&nbsp;</td>
        <td>
            <?php echo $this->Html->link($comment['User']['name'], array('controller' => 'users', 'action' => 'view', $comment['User']['id'])); ?>
        </td>
        <td>
            <?php echo $this->Html->link($comment['Event']['name'], array('controller' => 'events', 'action' => 'view', $comment['Event']['id'])); ?>
        </td>
        <td class="actions">
            <?php echo $this->Html->link(__('View'), array('action' => 'view', $comment['Comment']['id'])); ?>
            <?php echo $this->Html->link(__('Edit'), array('action' => 'edit', $comment['Comment']['id'])); ?>
            <?php echo $this->Form->postLink(__('Delete'), array('action' => 'delete', $comment['Comment']['id']), null, __('Are you sure you want to delete # %s?', $comment['Comment']['id'])); ?>
        </td>
    </tr>
<?php endforeach; ?>
    </table>
    <p>
    <?php
    echo $this->Paginator->counter(array(
    'format' => __('Page {:page} of {:pages}, showing {:current} records out of {:count} total, starting on record {:start}, ending on {:end}')
    ));
    ?>  </p>

    <div class="paging">
    <?php
        echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
        echo $this->Paginator->numbers(array('separator' => ''));
        echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
    ?>
    </div>
</div>
</div> 
```

///////////////////////////用户模型////////////// ///////////////////////////

```
<?php
class User extends AppModel {
    public $name = 'User';
    public $displayField = 'name';

    public $validate = array(
        'name'=>array(
            'Please enter your name.'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please enter your name.'
            )
        ),
        'username'=>array(

            'That username has already been taken'=>array(
                'rule'=>'isUnique',
                'message'=>'That username has already been taken.'
            ),
            'Valid email'=>array(
                'rule'=>array('email'),
                'message'=>'Please enter a valid email address'
            )
        ),
        'email'=>array(
            'Valid email'=>array(
                'rule'=>array('email'),
                'message'=>'Please enter a valid email address'
            )
        ),
        'password'=>array(
            'Not empty'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please enter your password'
            ),
            'Match passwords'=>array(
                'rule'=>'matchPasswords',
                'message'=>'Your passwords do not match'
            )
        ),
        'password_confirmation'=>array(
            'Not empty'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please confirm your password'
            )
        )
    );

    public function matchPasswords($data) {
        if ($data['password'] == $this->data['User']['password_confirmation']) {
            return true;
        }
        $this->invalidate('password_confirmation', 'Your passwords do not match');
        return false;
    }

    public function beforeSave($options = array()) {
        if (isset($this->data['User']['password'])) {
            $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
        }
        return true;
    }

    public $hasMany = array(
        'Event' => array(
            'className' => 'Event',
            'foreignKey' => 'user_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        ),

        'Comment' => array(
            'className' => 'Comment',
            'foreignKey' => 'user_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )

        );

        public $hasOne = array(
            'Profile' => array(
            'className' => 'Profile',
            'foreignKey' => 'user_id',
            'dependent' => true));

        var $actsAs = array(
        'MeioUpload.MeioUpload' => array('filename'=>array(
         'thumbsizes'=>array(
         'small'=>array(
         'width'=>'75',
         'height'=>'75',
         'forceAspectRatio'=>'C'
                        )))));

}
?> 
```

///////////////////////////////用户控制器////////// //////////////////////

```
<?php
class UsersController extends AppController {

    public $name = 'Users';

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('add');
    }

    public function isAuthorized($user) {
        if ($user['role'] == 'admin') {
            return true;
        }
        // if (in_array($this->action, array('delete'))) {
            // if ($user['id'] != $this->request->params['pass'][0]) {
                // return false;
            // }
        // }

        return true;
    }

    public function login() {
        if ($this->request->is('post')) {
            if ($this->Auth->login()) {
                $this->redirect($this->Auth->redirect());   
            } else {
                $this->Session->setFlash('Your username/password combination was incorrect');
            }
        }
    }

    // public function logout() {
        // $this->redirect($this->Auth->logout());
    // }

    public function index() {
        $this->User->recursive = 0;
        $this->set('users', $this->User->find('all'));
    }

    public function view($id = null) {
        $this->User->id = $id;

        if (!$this->User->exists()) {
            throw new NotFoundException('Invalid user');
        }

        if (!$id) {
            $this->Session->setFlash('Invalid user');
            $this->redirect(array('action' => 'index'));
        }
        $this->set('user', $this->User->read());
    }

    public function add() {
        if ($this->request->is('post')) {

            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash('Now create your profile!');
                $this->Auth->login();
                $this->redirect(array('controller'=> 'profiles', 'action' => 'add'));
            } else {
                $this->Session->setFlash('Your account cannot be created. Please try again.');
            }
        }
        // if (!empty($user)){
                // $this->request->data['Profile']['user_id'] = $this->User->id;
                // $this->User->Profile->save($this->request->data);
            // }

    }

    public function edit($id = null) {
    $this->User->id = $id;
    $user = $this->User->read();

    if($user['User']['id'] != $this->Auth->user('id')){
        $this->redirect(array('controller' => 'events','action' => 'index'));
    }

    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }

    if ($this->request->is('get')) {
        $this->request->data = $user;
    } else {
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('Your account has been updated'));
            $this->redirect(array('controller' => 'events', 'action' => 'index'));
        } else {
           $this->Session->setFlash(__('Your account cannot be saved. Please try again.'));
        }
    }
}

    public function delete($id = null) {
        if ($this->request->is('get')) {
            throw new MethodNotAllowedException();
        }

        if (!$id) {
            $this->Session->setFlash('Invalid id for user');
            $this->redirect(array('action'=>'index'));
        }
        if ($this->User->delete($id)) {
            $this->Session->setFlash('User deleted');
            $this->redirect(array('action'=>'index'));
        }
        $this->Session->setFlash('User was not deleted');
        $this->redirect(array('action' => 'index'));
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:10:26.020

我认为可以安全地假设您的评论表至少具有以下列：

*   ID
*   用户身份
*   event_id
*   评论（或名称）

您在 OP 中显示的视图是 events.view 方法的视图。但是您没有显示偶数模型或控制器。所以我不确定您是否需要事件控制器的帮助，或者您是否试图在用户控制器中显示事件数据。获取您在 OP 中显示的视图的所有评论的方法是从模型中提取所有评论，如下所示：

```
$this->set('comments', $this->Event->Comment->find('all', array('conditions' => array('event_id' => $event_id)))); 
```

如果您希望用户数据与其一起显示，则需要设置 recursive = 1 或编写一个连接来连接用户数据。

# file - 检查文件列表中的文件是否存在于某个目录中

> ID：14174230
> 
> 赞同：1
> 
> 时间：2013-01-05T17:11:51.877
> 
> 标签：file, bash, unix, scripting

运行时参数如下：`$1`是包含文件列表的文件 `$2`的路径 是包含文件的目录的路径 我想要做的是检查目录中列出的每个文件是否`$1`存在`$2`

我在想类似的事情：

```
for f in 'cat $1'
  do
  if (FILEEXISTSIN$2DIRECTORY)
    then echo '$f exists in $2'
    else echo '$f is missing in $2' sleep 5 exit
  fi
done 
```

如您所见，我想要它，以便如果目录中`$1`不存在任何列出的文件`$2`，则脚本会声明它然后关闭。我无法理解的唯一部分是 (FILEEXISTSIN$2DIRECTORY) 部分。我知道你可以这样做`[ -e $f ]`，但我不知道你如何确保它检查它是否存在于 $2 目录中。

编辑：进一步考虑这一点，也许我可以使用嵌套的 for 循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:44:42.633

如果您指定的输入文件包含要检查的以换行符分隔的文件列表，则以下解决方案（使用 while 读取循环）足够强大，可以正确处理带有空格的文件名。

通常，您永远不应该使用 form 的循环`for i in $(command)`，而应选择 while 循环。有关详细信息，请参阅[http://mywiki.wooledge.org/DontReadLinesWithFor 。](http://mywiki.wooledge.org/DontReadLinesWithFor)

```
while read -r file; do
   if [[ -e "$2/$file" ]]; then
      echo "$f exists in $2"
   else
      echo "$f does not exist in $2"
      sleep 5
      exit 1
   fi
done < "$1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:23:10.207

由于您正在处理名称中没有空格的文件名列表（因为`$(cat $1)`符号会这样拆分），所以它相对简单：

```
for file in $(cat $1)
do
    if [ -e "$2/$file" ]
    then echo "$file exists in $2"
    else echo "$file is missing in $2"; sleep 5; exit 1
    fi
done 
```

基本上，使用内置的字符串连接工具来构建文件的完整路径，并使用`test`or`[`运算符来检查文件是否存在。

如果您必须处理任意文件名，特别是如果任意文件名中的任意字符之一可以是换行符，则会出现复杂性。可以说，它们使问题变得足够复杂，除非您说需要处理，否则我不会处理它，即使那样，我也会就名称中的换行符是否需要处理进行协商。双引号变量扩展是处理它的策略的关键部分。问题的另一部分是如何将文件名准确地放入变量中。

# html - 响应式 HTML + CSS 自定义换行符 - IMAGE

> ID：14174231
> 
> 赞同：0
> 
> 时间：2013-01-05T17:12:09.277
> 
> 标签：html, css, responsive-design

一段时间以来，我一直在尝试为此编写代码，但没有成功。

我想要完成的事情：

![大屏幕](../Images/990142241cc51e8c002fb4369ca5092e.png)

这部分不难做静态，但响应式概念让我抓狂。

在小屏幕上应该如何看：

![小屏幕显示](../Images/aa5ebcb5da24ab41987b2f9ecdadefd2.png)

现在的样子：

![在此处输入图像描述](../Images/07f5f3ec3af1cfd16a892361d8c5b410.png)

如您所见，当我开始调整窗口大小时，一切开始都很好，但是随后，右行转到新行。

**小提琴：**

我在 Fiddle 上做了一个例子：http: [//jsfiddle.net/Gbcfs/8/](http://jsfiddle.net/Gbcfs/8/)

**代码：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
.line{width:41%; background-color: #a6a6a6; height:1px; display:inline; margin:17px 2px 2px; float:left; min-width:2px;}
 h2 {float:left;}
 </style>
</head>

<body>
<div class="line"></div>
<h2>How it works</h2>
<div class="line"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T17:59:56.623

我会用边框来做这个。

试试这个：

```
 <h2><span>Heading 2</span></h2>

body {
  background-color:#fff;
}
h2 {
  border-bottom:solid 1 px black;
  text-align:center;
}
h2 span {
  background-color:#fff;
  padding-bottom:3px;
  margin-bottom:-3px;
  display:inline-block;
} 
```

[http://jsbin.com/aguxoz/1/edit](http://jsbin.com/aguxoz/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:08:52.030

我认为您的问题也依赖于字体大小，请尝试使用以下 CSS

```
<style>
.line{width:30%; background: #a6a6a6  0 50% repeat-x; display:inline; margin:2px 2px 2px; float:left; }
 h2 {float:left;}
.autowidth
 {
    width:auto;
 }
 </style> 
```

连同以下标记

```
<div class="autowidth">
<div class="line"></div>
<h2>How it works</h2>
<div class="line"></div>
<div> 
```

这在一定程度上会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T13:57:08.747

你可以使用这个代码............我认为这很有帮助..

```
<div><div class="line"></div>
<h2 style="padding-top:8px">How it works</h2>
<div class="line"></div></div> 
```

```
.line{width:41%; background-color: #a6a6a6; height:1px; display:inline; margin:17px 2px 0 2px; float:left; min-width:2px;}
h2 {float:left;} 
```

# regex - Perl 正则表达式：在字符串中搜索所有 class="" 并将值保存在数组中

> ID：14174232
> 
> 赞同：0
> 
> 时间：2013-01-05T17:12:17.763
> 
> 标签：regex, perl

我正在尝试从 HTML 文档中的字符串中获取类。字符串例如：

```
<span class="bullet first">Some</span>Published <abbr class="published">Sometexthere</abbr></p> 
```

所以，我想要实现的是获取字符串中的所有“类”（项目符号，首先，发布）。但问题是它可以是字符串中任意数量的 class="" 。所以，我想没有办法用一个正则表达式来做到这一点，我需要在这里循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:36:12.987

不管你怎么做，这都是一个两步的过程：

1.  提取类属性的值（“bullet first”、“published”）。
2.  从这些值（“bullet”、“first”、“published”）中提取类。

XML::LibXML（也是一个 HTML 解析器）：

```
my @classes =
   map split(' ', $_->getValue()),          # Step 2
      $xpc->findnodes('*/@class', $node);   # Step 1 
```

（或者也许`.//*/@class`，取决于你想要什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:40:42.503

如果您确定 html 不包含复杂数据，例如`<p> class="abc" <\p>`使用全局修饰符循环遍历正则表达式将导致它在上次匹配的位置启动它。例子

```
While ($_=~ /class="(.*?)"/g) {
    #process class names here
    #class is in $1
} 
```

但是，对于一般用途，建议使用 html 解析器，因为这会将字符串处理`<p> class="abc" <\p>`为包含类 abc

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:43:44.387

我添加这个来回答部分***'所以，我想没有办法用一个正则表达式来做到这一点，我需要在这里循环吗？***

您必须在正则表达式中使用修饰符 g

```
my $text = '<span class="bullet first">Some</span>Published <abbr class="published">Sometexthere</abbr></p>';
while($text =~ /class\s*=\s*"([^"]+)"/g) {
  print "class --> $1\n";
} 
```

这是结果

```
class --> bullet first
class --> published 
```

# mysql - 在 MySQL 中将 3 个表链接在一起

> ID：14174236
> 
> 赞同：0
> 
> 时间：2013-01-05T17:12:32.717
> 
> 标签：mysql

我正在尝试通过一个 MySQL 请求将 3 个数据库表链接在一起。

**数据库结构：**

表格1 ：

*   table1_id（示例：1）
*   table1_name（例如：hello world）

表2：

*   table2_id（例如：空）
*   table2_name（例如：空）

表3 ：

*   table3_id（示例：1）
*   table3_name（例如：random_name

**MySQL 请求**

```
SELECT * FROM table1 AS a, table2 AS b, table3 AS c 
WHERE a.table1_id = b.table2_id 
 AND a.table1_id = c.table3_id AND table3_name = "random-name" 
```

**问题**

上一个请求不会显示任何结果，因为`table2`它是空的。你知道我如何从表 1 和 2 中获取数据，让`table3`'s 字段为空而不使用两个请求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:15:50.663

您应该更改您的请求以使用 a`LEFT JOIN`而不是 a `INNER JOIN`：

```
select *
from table1 t1
left join table2 t2
  on t1.table1_id = t2.table2_id
left join table3 t3
  on t1.table1_id = t3.table2_id
  and t3.table3_name = 'random-name' 
```

如果 id 存在于所有表中，`INNER JOIN`则生成一组数据。即使or中没有记录，`LEFT JOIN`也会返回记录。`table1``table2``table3`

如果您在学习连接语法方面需要帮助，这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:23:19.527

夫妻心得：

*   不要使用`SELECT *`，明确命名列
*   不要使用隐式连接语法；使用`ON`从句
*   要保留在连接条件上不“匹配”的行，请使用`LEFT OUTER JOIN`

因此，试试这个：

```
SELECT  a.table1_id, a.table1_name
      , b.table2_id, b.table2_name
      , c.table3_id, c.table3_name 
FROM   table1 AS a
LEFT OUTER JOIN table2 AS b
ON     b.table2_id = a.table1_id
JOIN table3 AS c
ON     c.table3_id = a.table1_id 
WHERE  c.table3_name = "random-name" 
```

# java - 在 Android Eclipse 中单击按钮的处理程序

> ID：14174238
> 
> 赞同：0
> 
> 时间：2013-01-05T17:12:38.323
> 
> 标签：java, android, eclipse

我在 MainActivity 屏幕上有 2 个按钮。Button1 处理用户输入，而 Button2 将用户引导到下一个活动屏幕，该屏幕根据第一个按钮处理的输出显示另一个输出。每当我单击 Button1 时，它都会计算输入，但它会自动将我引导到下一个活动屏幕并显示我需要的输出，这会使 Button2 变得不可用。当我单击 Button2 时，它会引导我进入下一个活动屏幕，但它不会显示我需要的输出，它只显示 textviews 的 ID。

两个按钮的onClick 属性都是calculateClickHandler。我认为问题在于Button2的属性必须与Button1不同。我尝试为 Button2 制作另一个点击处理程序，但它不起作用：

```
public void nextClickHandler(View view)
    {
        if (view.getId() == R.id.DGButton)
        {
            Intent myIntent = new Intent(MainActivity.this, Activity2.class);
            startActivity(myIntent);
        }
    } 
```

这是 MainActivity 的计算按钮点击处理程序：

```
public void calculateClickHandler(View view)
        {
            //handle the click of the calculator button

            if (view.getId() == R.id.CalculateButton)
            {
                //code here

                Button next = (Button) findViewById(R.id.DGButton);
                next.setOnClickListener(new View.OnClickListener()
                {
                    public void onClick(View view)
                    {
                        Intent myIntent = new Intent(MainActivity.this, Activity2.class);
                        startActivity(myIntent);
                    }
                });

                Intent intent1 = new Intent(MainActivity.this, Activity2.class);
                intent1.putExtra("key", bmiValue);
                startActivity(intent1);  
            }   
        } 
```

Activity2 的后退按钮单击处理程序：

```
public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);

        Button next = (Button) findViewById(R.id.BackToBMI);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();
            }
        });

        TextView dietplanText = (TextView)findViewById(R.id.DietPlanText);
        TextView categoryText = (TextView)findViewById(R.id.BMICategory);

        Bundle extras = getIntent().getExtras();
        if(extras != null)
        {
                //code here
            }
    } 
```

我是 Android 编程的初学者，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:11:25.300

在 calculateClickHandler(View view) 中，您应该在 if 条件之后使用 else 来启动活动。

“两个按钮的 onClick 属性是 calculateClickHandler。” - 你说。但是我无法理解 nextClickHandler(View view) 是什么。

# python - 从具有重复索引的数据框中选择

> ID：14174241
> 
> 赞同：2
> 
> 时间：2013-01-05T17:13:06.733
> 
> 标签：python, pandas

我是 python 和 pandas 的新手。我有一个日期时间索引数据框。我想选择时间 > 08:00:00 我尝试使用 pd.DataFrame.select 函数的行。它失败是因为索引有重复的条目。

我尝试正确吗？

有办法解决吗？

使用重复条目索引数据是一种不好的做法吗？

```
>>> df.head(10)
                            A
time                         
1900-01-01 00:01:01.456170  0
1900-01-01 00:01:01.969600  0
1900-01-01 00:01:04.305494  0
1900-01-01 00:01:13.860365  0
1900-01-01 00:01:19.666371  0
1900-01-01 00:01:24.920744  0
1900-01-01 00:01:24.931466  0
1900-01-01 00:02:07.522741  0
1900-01-01 00:02:13.857793  0
1900-01-01 00:02:34.817765 -7
>>> timeindexvalid = lambda x : x.to_datetime() > datetime(1900, 1, 1, 8)
>>> df.select(timeindexvalid)
Traceback (most recent call last):

    raise Exception('Reindexing only valid with uniquely valued Index '
Exception: Reindexing only valid with uniquely valued Index objects 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:51:48.943

您可以使用表达式来选择所需的索引，而无需使用`select()`：

```
In [1]: df
Out[1]:
            A
time
2012-05-01  0
2012-05-02  1
2012-05-02  2

In [2]: df.index
Out[2]:
<class 'pandas.tseries.index.DatetimeIndex'>

In [3]: df.index.is_unique
Out[3]: False

In [4]: df[df.index > datetime(2012,5,1)]
Out[4]:
            A
time
2012-05-02  1
2012-05-02  2 
```

使用选择复制您的错误：

```
In [5]: sel = lambda x: x > datetime(2012,5,1)

In [6]: df.select(sel)
Exception: Reindexing only valid with uniquely valued Index objects 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:17:12.630

我在 GitHub 上做了一个注释，以便使用以下方法更轻松地支持这一点`between_time`：

[https://github.com/pydata/pandas/issues/2826](https://github.com/pydata/pandas/issues/2826)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T06:01:50.920

您可以使用`indexer_between_time`（在午夜 1 分钟到 2 分钟之间）：

```
In [11]: df1.iloc[df1.index.indexer_between_time('00:01:00', '00:02:00')]
Out[11]:
                            A
time
1900-01-01 00:01:01.456170  0
1900-01-01 00:01:01.969600  0
1900-01-01 00:01:04.305494  0
1900-01-01 00:01:13.860365  0
1900-01-01 00:01:19.666371  0
1900-01-01 00:01:24.920744  0
1900-01-01 00:01:24.931466  0 
```

# java - 这是一种新的排序算法吗？[使用 Java 和伪代码实现]

> ID：14174245
> 
> 赞同：10
> 
> 时间：2013-01-05T17:13:34.330
> 
> 标签：java, algorithm, sorting

我知道这可能是一个愚蠢的问题，也许是今天最愚蠢的问题，但我不得不问它：*我发明了这个排序算法吗？*

昨天，我对基于交换的排序算法有了一点启发。今天，我实现了它，它奏效了。

它可能已经存在，因为那里有许多不太流行的排序算法，它们的信息很少或根本没有，而且几乎不存在它们的实现。

描述：*基本上，这个算法需要一个项目，他们一对，然后再一个项目......直到列表的末尾。对于每个项目/对，比较距对空间或项目相同半径距离的每两个项目，直到到达数组的边界，然后在需要时交换这些项目。对列表中的每一对/项目重复此操作。*

基于英文的伪代码：

```
FOR i index to last index of Array (starting from 0)
  L index is i - 1
  R index is i + 1

  //Odd case, where i is the center
  WHILE (L is in array range and R is in array range)
    IF item Array[L] is greater than Array[R]
       EXCHANGE item Array[L] with Array[R]
    END-IF

    ADD 1 to R
    REST 1 to L
  END-WHILE

  //Even case, where i is not the center
  L index is now i
  R index in now i + 1
  WHILE (L is in array range and R is in array range)
    IF item Array[L] is greater than Array[R]
       EXCHANGE Array[L] with Array[R]
    END-IF

    ADD 1 to R
    REST 1 to L
  END-WHILE

END FOR 
```

这是Java中的实现：

```
//package sorting;

public class OrbitSort {
    public static void main(String[] args) {
        int[] numbers ={ 15, 8, 6, 3, 11, 1, 2, 0, 14, 13, 7, 9, 4, 10, 5, 12 };

        System.out.println("Original list:");
        display(numbers);

        sort(numbers);

        System.out.println("\nSorted list:");
        display(numbers);
    }

    //Sorting algorithm
    public static void sort(int[] array) {
        for(int i = 0; i < array.length; i++){
            int L = i - 1;
            int R = i + 1;

            //Odd case (with a central item)
            while(L >= 0 && R < array.length){
                if(array[L] > array[R])
                    swap(array, L, R);

                L--;
                R++;
            }

            //Even case (with no central item)
            L = i;
            R = i + 1;
            while(L >= 0 && R < array.length) {
                if(array[L] > array[R])
                    swap(array, L, R);

                L--;
                R++;
            }
        }
    }

    //Swap two items in array.
    public static void swap(int[] array, int x, int y) {
        int temp = array[x];
        array[x] = array[y];
        array[y] = temp;
    }

    //Display items
    public static void display(int[] numbers){
        for(int i: numbers)
            System.out.print(" " + i);

        System.out.println();
    }
} 
```

我知道可以更短，但这只是一个早期的实施。

它可能在 O(n^2) 中运行，但我不确定。

所以你怎么看？它已经存在了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T18:35:34.063

对我来说，它看起来像是一种修改后的冒泡排序算法，对于某些输入元素的排列可能会表现得更好。尽管不一定公平，但我使用您的输入数组对预热周期进行了基准测试，以比较：

*   [java.util.Arrays.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)，这是一个~~合并~~快速排序实现
*   BubbleSort.sort()，一个冒泡排序算法的java实现
*   OrbitSort.sort()，你的算法

结果：

```
input size: 8192
warmup iterations: 32

Arrays.sort()
    iterations : 10000
    total time : 4940.0ms
    avg time   : 0.494ms

BubbleSort.sort()
    iterations : 100
    total time : 8360.0ms
    avg time   : 83.6ms

OrbitSort.sort()
    iterations : 100
    total time : 8820.0ms
    avg time   : 88.2ms 
```

当然，性能取决于输入大小和排列

直截了当的代码：

```
package com.sam.tests;

import java.math.BigDecimal;
import java.math.RoundingMode;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Random;
import java.util.concurrent.Callable;

public class SortBenchmark {

    public static class OrbitSort {
        // Sorting algorithm
        public static void sort(int[] array) {
            for (int i = 0; i < array.length; i++) {
                int L = i - 1;
                int R = i + 1;

                // Odd case (with a central item)
                while (L >= 0 && R < array.length) {
                    if (array[L] > array[R])
                        swap(array, L, R);

                    L--;
                    R++;
                }

                // Even case (with no central item)
                L = i;
                R = i + 1;
                while (L >= 0 && R < array.length) {
                    if (array[L] > array[R])
                        swap(array, L, R);

                    L--;
                    R++;
                }
            }
        }

        // Swap two items in array.
        public static void swap(int[] array, int x, int y) {
            int temp = array[x];
            array[x] = array[y];
            array[y] = temp;
        }
    }

    public static class BubbleSort {

        public static void sort(int[] numbers) {
            boolean swapped = true;
            for (int i = numbers.length - 1; i > 0 && swapped; i--) {
                swapped = false;
                for (int j = 0; j < i; j++) {
                    if (numbers[j] > numbers[j + 1]) {
                        int temp = numbers[j];
                        numbers[j] = numbers[j + 1];
                        numbers[j + 1] = temp;
                        swapped = true;
                    }
                }
            }
        }
    }

    public static class TestDataFactory {

        public static enum ElementOrder {
            Ascending, Descending, Random
        }

        public static int[] createIntArray(final int size, final ElementOrder elementOrder) {
            int[] array = new int[size];

            switch (elementOrder) {
            case Ascending:
                for (int i = 0; i < size; ++i)
                    array[i] = i;
                break;
            case Descending:
                for (int i = 0; i < size; ++i)
                    array[i] = size - i - 1;
                break;
            case Random:
            default:
                Random rg = new Random(System.nanoTime());
                for (int i = 0; i < size; ++i)
                    array[i] = rg.nextInt(size);
                break;
            }

            return array;
        }
    }

    public static class Benchmark {
        // misc constants
        public static final int  NANOS_PER_MSEC                    = 1000000;

        // config constants
        public static final int  BIGDECIMAL_PRECISION              = 6;

        // constant defaults
        public static final long AUTOTUNING_MIN_ITERATIONS_DEFAULT = 1;
        public static final long AUTOTUNING_MIN_DURATION_DEFAULT   = 125;

        public static final long BENCHMARK_MIN_ITERATIONS_DEFAULT  = 1;
        public static final long BENCHMARK_MAX_ITERATIONS_DEFAULT  = Integer.MAX_VALUE;
        public static final long BENCHMARK_TARGET_DURATION_DEFAULT = 125;

        // private static final ThreadMXBean threadBean =
        // ManagementFactory.getThreadMXBean();

        public static final long getNanoTime() {
            // return threadBean.getCurrentThreadCpuTime();// not good, runs at
            // some time slice resolution
            return System.nanoTime();
        }

        public static class Result {
            public String name;
            public long   iterations;
            public long   totalTime; // nanoseconds

            public Result(String name, long iterations, long startTime, long endTime) {
                this.name = name;
                this.iterations = iterations;
                this.totalTime = endTime - startTime;
            }

            @Override
            public String toString() {
                final double totalTimeMSecs = ((double) totalTime) / NANOS_PER_MSEC;

                final BigDecimal avgTimeMsecs = new BigDecimal(this.totalTime).divide(new BigDecimal(this.iterations).multiply(new BigDecimal(NANOS_PER_MSEC)),
                        BIGDECIMAL_PRECISION, RoundingMode.HALF_UP);

                final String newLine = System.getProperty("line.separator");
                StringBuilder sb = new StringBuilder();
                sb.append(name).append(newLine);
                sb.append("    ").append("iterations : ").append(iterations).append(newLine);
                sb.append("    ").append("total time : ").append(totalTimeMSecs).append(" ms").append(newLine);
                sb.append("    ").append("avg time   : ").append(avgTimeMsecs).append(" ms").append(newLine);
                return sb.toString();
            }
        }

        public static <T> Result executionTime(final String name, final long iterations, final long warmupIterations, final Callable<T> test) throws Exception {
            // vars
            @SuppressWarnings("unused")
            T ret;
            long startTime;
            long endTime;

            // warmup
            for (long i = 0; i < warmupIterations; ++i)
                ret = test.call();

            // actual benchmark iterations
            {
                startTime = getNanoTime();
                for (long i = 0; i < iterations; ++i)
                    ret = test.call();
                endTime = getNanoTime();
            }

            // return result
            return new Result(name, iterations, startTime, endTime);
        }

        /**
         * Auto tuned execution time measurement for test callbacks with steady
         * execution time
         * 
         * @param name
         * @param test
         * @return
         * @throws Exception
         */
        public static <T> Result executionTimeAutotuned(final String name, final Callable<T> test) throws Exception {
            final long autoTuningMinIterations = AUTOTUNING_MIN_ITERATIONS_DEFAULT;
            final long autoTuningMinDuration = AUTOTUNING_MIN_DURATION_DEFAULT;

            final long benchmarkTargetDuration = BENCHMARK_TARGET_DURATION_DEFAULT;
            final long benchmarkMinIterations = BENCHMARK_MIN_ITERATIONS_DEFAULT;
            final long benchmarkMaxIterations = BENCHMARK_MAX_ITERATIONS_DEFAULT;

            // vars
            @SuppressWarnings("unused")
            T ret;
            final int prevThreadPriority;
            long warmupIterations = 0;
            long autoTuningDuration = 0;
            long iterations = benchmarkMinIterations;
            long startTime;
            long endTime;

            // store current thread priority and set it to max
            prevThreadPriority = Thread.currentThread().getPriority();
            Thread.currentThread().setPriority(Thread.MAX_PRIORITY);

            // warmup and iteration count tuning
            {
                final long autoTuningMinTimeNanos = autoTuningMinDuration * NANOS_PER_MSEC;
                long autoTuningConsecutiveLoops = 1;
                double avgExecutionTime = 0;

                do {
                    {
                        startTime = getNanoTime();
                        for (long i = 0; i < autoTuningConsecutiveLoops; ++i, ++warmupIterations) {
                            ret = test.call();
                        }
                        endTime = getNanoTime();
                        autoTuningDuration += (endTime - startTime);
                    }
                    avgExecutionTime = ((double) autoTuningDuration) / ((double) (warmupIterations));
                    if ((autoTuningDuration >= autoTuningMinTimeNanos) && (warmupIterations >= autoTuningMinIterations)) {
                        break;
                    } else {
                        final double remainingAutotuningIterations = ((double) (autoTuningMinTimeNanos - autoTuningDuration)) / avgExecutionTime;
                        autoTuningConsecutiveLoops = Math.max(1, Math.min(Integer.MAX_VALUE, (long) Math.ceil(remainingAutotuningIterations)));
                    }
                } while (warmupIterations < Integer.MAX_VALUE);

                final double requiredIterations = ((double) benchmarkTargetDuration * NANOS_PER_MSEC) / avgExecutionTime;
                iterations = Math.max(1, Math.min(benchmarkMaxIterations, (long) Math.ceil(requiredIterations)));
            }

            // actual benchmark iterations
            {
                startTime = getNanoTime();
                for (long i = 0; i < iterations; ++i)
                    ret = test.call();
                endTime = getNanoTime();
            }

            // restore previous thread priority
            Thread.currentThread().setPriority(prevThreadPriority);

            // return result
            return new Result(name, iterations, startTime, endTime);
        }
    }

    public static void executeBenchmark(int inputSize, ArrayList<Benchmark.Result> results) {
        // final int[] inputArray = { 15, 8, 6, 3, 11, 1, 2, 0, 14, 13, 7, 9, 4,
        // 10, 5, 12 };
        final int[] inputArray = TestDataFactory.createIntArray(inputSize, TestDataFactory.ElementOrder.Random);

        try {
            // compare against Arrays.sort()
            {
                final int[] ref = inputArray.clone();
                Arrays.sort(ref);
                {
                    int[] temp = inputArray.clone();
                    BubbleSort.sort(temp);
                    if (!Arrays.equals(temp, ref))
                        throw new Exception("BubbleSort.sort() failed");
                }
                {
                    int[] temp = inputArray.clone();
                    OrbitSort.sort(temp);
                    if (!Arrays.equals(temp, ref))
                        throw new Exception("OrbitSort.sort() failed");
                }
            }

            results.add(Benchmark.executionTimeAutotuned("Arrays.sort()", new Callable<Void>() {
                @Override
                public Void call() throws Exception {
                    int[] temp = Arrays.copyOf(inputArray, inputArray.length);
                    Arrays.sort(temp);
                    return null;
                }
            }));
            results.add(Benchmark.executionTimeAutotuned("BubbleSort.sort()", new Callable<Void>() {
                @Override
                public Void call() throws Exception {
                    int[] temp = Arrays.copyOf(inputArray, inputArray.length);
                    BubbleSort.sort(temp);
                    return null;
                }
            }));
            results.add(Benchmark.executionTimeAutotuned("OrbitSort.sort()", new Callable<Void>() {
                @Override
                public Void call() throws Exception {
                    int[] temp = Arrays.copyOf(inputArray, inputArray.length);
                    OrbitSort.sort(temp);
                    return null;
                }
            }));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        ArrayList<Benchmark.Result> results = new ArrayList<Benchmark.Result>();

        for (int i = 16; i <= 16384; i <<= 1) {
            results.clear();
            executeBenchmark(i, results);
            System.out.println("input size : " + i);
            System.out.println("");
            for (Benchmark.Result result : results) {
                System.out.print(result.toString());
            }
            System.out.println("----------------------------------------------------");
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T17:23:57.227

它是 O(n^2) （假设它有效，我不确定），因为它已经存在 - 也许 - 它不是真正的原创，因为它可以被认为是一个简单的排序实现的变体，但我怀疑如果有任何已发布的算法与该算法完全相同，特别是具有两个连续内循环的算法。

我并不是说它没有优点，可能有一个用例，它的行为是独特有效的（也许读取比写入快得多，缓存行为有利于它的访问模式）。

要了解为什么它是 O(n^2)，请考虑前 n/6 次外循环迭代，内循环运行 O(n) 长度 O(n) 次。

# html - 背景图像以“样式”工作，但不在 css 文件中

> ID：14174247
> 
> 赞同：0
> 
> 时间：2013-01-05T17:13:39.887
> 
> 标签：html, css

我想制作一个精灵图像，这是我的 css：

```
img.Bayern
{
   background: url(Images/Popular.png) no-repeat;
    width: 14px; height: 11px;background-position: 0 0;
} 
```

和我的html：

```
<img class="Bayern"  /> 
```

但是图像没有显示，但是当我将 css 代码放在 style="" 中时，它可以正常工作。

我检查了这个类似的问题：[CSS code works if put in style="", failed if put in external css file](https://stackoverflow.com/questions/10423024/css-code-works-if-put-in-style-fails-if-put-in-external-css-file)

并把 img 放进去：

```
<span id="nav-flag">
   <img class="Bayern"  />
   </span>

 #nav-flag img.Bayern { ...same css...} 
```

但它仍然不起作用。我也将相对路径更改为：../Images，./Images，变为'...'。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:17:27.600

您在背景图像上使用了相对 URL `Images/Popular.png`（即，该 URL 不是以斜杠开头，`/`也不是类似 的方案`http://`）。

在`style`属性中使用这样的相对 URL 时，它相对于浏览器地址栏中显示的网页的请求 URL。因此，如果它是例如[http://example.com/page.html](http://example.com/page.html)，那么图像应该在[http://example.com/Images/Popular.png](http://example.com/Images/Popular.png)中。

在 CSS 文件中使用此类相对 URL 时，它与 CSS 文件本身的请求 URL 相关。因此，如果它是例如[http://example.com/css/style.css](http://example.com/css/style.css)，那么图像应该在[http://example.com/css/Images/Popular.png](http://example.com/css/Images/Popular.png)中。

您需要确保图像文件正好在指定 URL 期望的位置（因此，将其放在与 CSS 文件相同的文件夹中），或者您需要相应地修复 URL，以便它与请求正确相关URL（因此，请`/Images/Popular.png`改用）。

* * *

**与具体问题无关**`<img>`，在元素上指定 CSS 背景图像是很奇怪的。您通常会在某些块元素上指定它，例如`<div>`.

# java - 最小化 Java 进程中的应用程序数据内存开销

> ID：14174251
> 
> 赞同：7
> 
> 时间：2013-01-05T17:13:50.007
> 
> 标签：java, performance, caching, memory

我需要在内存中存储大量数据（对象）（用于计算）。
由于计算是基于此数据完成的，因此所有数据都将驻留在同一 JVM 进程内存中是至关重要的。
大多数数据将由字符串、整数和其他子对象（集合、哈希集等）构建。
由于 Java 的对象内存开销很大（字符串是 UTF-16，每个对象有 8 个字节的开销），我正在寻找能够以较低开销将此类数据存储在内存中的库。
我读过有关减少内存的有趣文章：
* [http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf](http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf) * [http://blog.griddynamics.com/2010 /01/java-tricks-reducing-memory-consumption.html](http://blog.griddynamics.com/2010/01/java-tricks-reducing-memory-consumption.html)

我只是想知道是否有一些用于此类场景的库，或者我需要从头开始。
为了更好地理解我的要求，想象一个服务器处理大量记录并需要根据存储在内存中的数百万条其他记录来分析它们（以实现高处理率）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T17:15:40.300

对于集合开销，请查看[trove](http://trove.starlight-systems.com/) - 它们的内存开销低于内置的 Collections 类（特别是对于在 JDK 中基于映射的映射和集合）。
如果您有大型对象，可能值得将它们“序列化”保存为一些紧凑的二进制表示（不是 java 序列化）并在需要时反序列化回完整的对象）
您还可以使用可以分页到磁盘的缓存库? 看看[infinispan](http://www.jboss.org/infinispan)或[ehcache](http://ehcache.org/). 此外，其中一些库（其中的 ehcache，如果有内存的话）提供“堆外存储”作为 jvm 进程的一部分 - 一块不受（本机）库管理的 GC 的内存。如果你有一个有效的二进制表示，你可以将它存储在那里（不会降低你的足迹，但可能会使 GC 表现更好）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:45:17.143

对于 String 位，您可以存储从 String.getBytes("UTF8") 获得的 byte[]。如果您再次需要 String 对象，则可以从 ByteArray 再次创建它。当然，它会导致更多的 CPU 用于一遍又一遍地创建 String 对象，因此这将是大小<->速度之间的权衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:41:33.983

关于字符串，还请查看 -XX:+UseCompressedStrings jvm 选项，但看起来它已从最新的 jvm 更新中删除，请参阅[this other question](https://stackoverflow.com/questions/8833385/is-support-for-compressed-strings-being-dropped)

# canvas - 如何找出画布贝塞尔曲线中特定点的Y坐标？

> ID：14174252
> 
> 赞同：10
> 
> 时间：2013-01-05T17:13:50.873
> 
> 标签：canvas, point, bezier, curve, coordinate

我需要找出画布中贝塞尔曲线特定点的 Y 坐标。你知道吗，怎么找出来？谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-07T22:26:57.273

使用 de Casteljau 的算法，您可以找到任何 t、百分比或插值步长的贝塞尔曲线的坐标 x 和 y。所以 at of .1 会给你 x 和 y 从一开始就在曲线的 10% 处。0.9 的 t 从一开始就是 90%，依此类推。

在我们的三次贝塞尔曲线中，我们有 p0（点 0）、cp0（控制点 0）、cp1（控制点 1）和 p1（点 1）。

在算法的**第一步**，我们画一条连接 p0 和 cp0 的线，另一条连接 cp0 和 cp1 的线，还有一条连接 cp1 和 p1 的线。然后对于所有这 3 行，我们将在它们上找到从它们开始的 t % 的点。

我将要点如下：

*   p0 -> cp0 = A
*   cp0 -> cp1 = B
*   cp1 -> p1 = C

    ```
    Ax = ( (1 - t) * p0x ) + (t * cp0x);
    Ay = ( (1 - t) * p0y ) + (t * cp0y);
    Bx = ( (1 - t) * cp0x ) + (t * cp1x);
    By = ( (1 - t) * cp0y ) + (t * cp1y);
    Cx = ( (1 - t) * cp1x ) + (t * p1x);
    Cy = ( (1 - t) * cp1y ) + (t * p1y); 
    ```

**第二步与第一步**非常相似。首先，我们将这四个点用线连接起来，然后在它们上面找到了 3 个新点。在这一步中，我们将用线连接这 3 个点，在它们上面找到 2 个新点。我将这两个新点称为 D 和 E。

```
 Dx = ( (1 - t) * Ax ) + (t * Bx);
    Dy = ( (1 - t) * Ay ) + (t * By);

    Ex = ( (1 - t) * Bx ) + (t * Cx);
    Ey = ( (1 - t) * By ) + (t * Cy); 
```

最后，我们可以将这最后两个点与另一条线连接起来，并在其上找到最后一个点，这将为我们提供该 t 的贝塞尔曲线上的点。我将此点称为 P。

```
 Px = ( (1 - t) * Dx ) + (t * Ex);
    Py = ( (1 - t) * Dy ) + (t * Ey); 
```

好了，我们现在有了贝塞尔曲线上一个点的 x 和 y 坐标，该点距离开始时间为 t%。我会尽快添加一些图片。

![在此处输入图像描述](../Images/edb1bc6a5ad33b8080e7323bcc3a85bd.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-19T23:20:21.873

剪切并粘贴准备好的答案：

```
// Points are objects with x and y properties
// p0: start point
// p1: handle of start point
// p2: handle of end point
// p3: end point
// t: progression along curve 0..1
// returns an object containing x and y values for the given t
BezierCubicXY = function(p0, p1, p2, p3, t) {
    var ret = {};
    var coords = ['x', 'y'];
    var i, k;

    for (i in coords) {
        k = coords[i];
        ret[k] = Math.pow(1 - t, 3) * p0[k] + 3 * Math.pow(1 - t, 2) * t * p1[k] + 3 * (1 - t) * Math.pow(t, 2) * p2[k] + Math.pow(t, 3) * p3[k];
    }

    return ret;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-31T10:21:10.933

我一直在试图找出同样的东西，我想我至少解决了方形贝塞尔曲线，这是只有一个控制点的贝塞尔曲线。

**数学解释**

方形贝塞尔曲线的数学公式是：

![](../Images/49480c28d5437757baf403f25dcd5b84.png)

其中“X”是结果，“A”是起点位置，“B”是控制点，“C”是终点。

't' 是一个介于 0 和 1 之间的数字，表示您要计算线上的哪个点。0 代表起点，1 代表终点，0.5 代表曲线的中心。

该函数用于计算线上一个点的 X 和 Y 坐标。如果要计算 X，只需填写 A、B 和 C 点的 X 坐标。

现在为了确定属于 X 的 Y，我们需要确定所述 X 坐标的“t”。

我们可以将相同的贝塞尔方程写成二次形式 ( ![](../Images/8b81971904e1b808f37d408df63dada8.png))：

![](../Images/82d835b0f96c9c3072b7d4aad7650eef.png)

这使我们能够使用二次公式来推导求解方程的“t”值。二次公式实际上是2个公式。

![](../Images/2ca309ee6240a023065d2f2b692d2c18.png)和![](../Images/b362e84df66cd33f4b84fc4d17b105d9.png)

结果公式为：

![](../Images/810647e75c12945f851201a1fa46891e.png)

和

![](../Images/eea401963ab872791b24db176618f88f.png)

**代码解决方案**

我们可以在代码中将其描述为：

```
GetYValues(StartPoint, ControlPoint, EndPoint, X)
{
    Ax = StartPoint.X
    Bx = ControlPoint.X
    Cx = EndPoint.X

    q1 = 2*Ax - 2*Bx;
    q2 = Sqrt(5*Ax*Ax - 10*Ax*Bx + Ax*Cx - Ax*X + 2*Bx*X + 4*Bx*Bx)
    q3 = 2*Ax - 4*Bx + 2*Cx

    t1 = (q1 + q2) / q3
    t2 = (q1 - q2) / q3

    Ay = StartPoint.Y
    By = ControlPoint.Y
    Cy = EndPoint.Y

    Y1 = Ay*(1-t1)*(1-t1) + By*2*(1-t1)*t1 + Cy*t1
    Y2 = Ay*(1-t2)*(1-t2) + By*2*(1-t2)*t2 + Cy*t2

    return [Y1,Y2]
} 
```

现在，我还没有对此进行测试，并且该函数不会检查实际上是否有任何有效点，因此肯定会有一些值会引发异常。请务必检查“除以 0”和“小于 0 的数字的平方根”。

**此解决方案的问题**

这个方程的一个大问题是它只适用于方形贝塞尔曲线，而大多数贝塞尔曲线实际上是三次方的。我试图找到一种类似的方法来解决这个问题的三次版本，不幸的是，这要困难一个数量级。我能找到的用于求解三次方程的唯一公式可以在这里找到[Cubic function](http://www.answers.com/topic/cubic-function)。这个公式包含虚数，我不知道如何处理这些。

另一个问题是，对于有 4 个或更多控制点的贝塞尔曲线，根本没有办法求解方程。

**结论**

最后，您最好的选择是将贝塞尔曲线简单地转换为直线，这非常容易计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T19:58:48.497

@DerekR：尽管您在此处介绍的内容很清楚，并且可能对许多人有所帮助，但我认为您自己和 immo 的答案以及以下所有评论都没有解决问题。

（我的数学很糟糕，我一直在尝试解决同样的问题，所以我可能无法理解后续评论。）

我认为问题是：知道两个端点和两个控制点的X，Y坐标，并假设范围是0到1，那么给定Y，Y是多少？

我是新手，还不能发布图片，但你可以在duck.cc/images/beziercurve_findY.png 看到曲线

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T17:32:11.163

圆的等式是： (xh)^2 + (yk)^2 = r^2 其中 h,k 是中心的 x,y 坐标。所以 y 的等式是 y = sqrt(r^2 - (xh)^2) + k 。`Math.sqrt(..)`大多数语言都带有一个数学包，所以我假设你可以做一些`Math.pow(..)`

如果我的数学不正确，任何人都可以纠正我。

# google-apps-script - 根据 DocList 在 Google 站点中嵌入表单列表

> ID：14174254
> 
> 赞同：1
> 
> 时间：2013-01-05T17:14:12.430
> 
> 标签：google-apps-script, google-apps-for-education

我使用在 [Google 站点中嵌入 Google DocList 中](https://developers.google.com/apps-script/articles/embedding_docslist_in_sites#section1)给出的代码 将文件列表（取自 Google 驱动器中的文件夹）嵌入到 Google 站点的页面中。我想知道，是否有办法修改输出页面上的链接，以便它们指向电子表格的实时形式，而不是脚本中设置的电子表格模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:58:18.230

您可以创建一个文档并将其命名为您的 Google 表单的标题。将表单的 URL 粘贴在文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T20:36:01.517

**编辑：**对此感到抱歉，忘记第一个答案，因为**实际上**有一种获取表单网址的方法！

下面是它的工作原理

```
function myFunction() {
  var ss=SpreadsheetApp.getActive()
  var formurl = ss.getFormUrl()
  Browser.msgBox(formurl)
} 
```

所以在网站页面中嵌入列表会很容易，

这是一个完成这项工作的小代码，[这里](https://script.google.com/macros/s/AKfycbwkbmetwMffEoGI3_kh0Xb3XizCwDO9UiDJ-lBiwKFntt9_DroZ/exec)的在线版本（需要授权）请耐心等待：显示速度可能会很慢......

```
function doGet() {
  var app=UiApp.createApplication().setTitle('Available Forms').setStyleAttribute('padding', '25');
  var user = Session.getEffectiveUser().getUserLoginId();
  app.add(app.createLabel('Available forms in Drive for '+user).setStyleAttribute('background', '#dddd33').setPixelSize(500, 18).setHorizontalAlignment(UiApp.HorizontalAlignment.CENTER).setStyleAttribute('fontWeight', 'bold'))
  var flex=app.createFlexTable().setId('flex').setWidth('500').setBorderWidth(1).setCellPadding(2).setStyleAttribute('borderColor', '#dddd33');
  var index = 0
  var docs = DocsList.getAllFiles()
    for (var n in docs){
      if(docs[n].getFileType()=="spreadsheet"){
        var ss=SpreadsheetApp.openById(docs[n].getId())
         if(ss.getFormUrl()){
    flex.setText(index, 0, docs[n].getName())
    flex.setWidget(index, 1, app.createAnchor('open form', ss.getFormUrl()))
    ++ index
  }
  }
  }
  app.add(flex)
  return app
} 
```

再次抱歉，我忘记了这个功能。

* * *

*- 表格嵌入在电子表格中，不会在您的驱动器中显示为单独的实体。他们的 ID（或 URL）不能从应用程序脚本中获得......恐怕你必须手动对 URL 进行编码。-*

# mongodb - 重用 mongo 内部分布式锁

> ID：14174255
> 
> 赞同：4
> 
> 时间：2013-01-05T17:14:21.817
> 
> 标签：mongodb, locking, distributed

我的应用程序需要一个分布式锁实现。我有许多独立的工作进程，我需要强制限制它们一次只能在一个帐户上工作。

该应用程序是用 c# 编写的，带有一个 mongo db 层。我注意到 mongo 的[集群平衡器](http://docs.mongodb.org/manual/core/sharding-internals/#sharding-balancing-internals)使用分布式锁机制来控制哪个 mongos 进行平衡，我想知道是否可以在我的应用程序中重用相同的机制？

我宁愿没有实现我自己的分布式锁机制的开销，因为所有工作进程都已经与 mongo 接口，所以如果我可以重用它们的实现会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T05:01:59.510

MongoDB 中没有固有的文档级锁定或分布式锁定驱动程序 API。

MongoDB 用于分片拆分和迁移的内部锁对分片集群的配置服务器使用两阶段提交模式。您可以自己实现类似的模式，MongoDB 文档中有一个示例：[执行两阶段提交](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)。

如果您只需要一个信号量来防止工作人员同时更新同一个帐户文档，这可能会有点过头了。更直接的方法是在`lock`您的帐户文档中添加一个咨询字段（或嵌入式文档），以指示当前正在使用该文档的工作进程。锁可以在worker启动时设置，完成后移除。您可能希望锁信息包含工作进程 ID 和时间戳，以便可以找到并删除过时的锁。

请注意，任何方法都需要在您的工作进程之间进行协调，以检查和尊重您的锁定实现。

# c - 如何在 C 中编写 apache 模块，通过它从浏览器中检索 POST 表单数据？

> ID：14174258
> 
> 赞同：1
> 
> 时间：2013-01-05T17:14:40.083
> 
> 标签：c, apache

我已经编写了一个`Apache`模块`c`并通过以下方式从浏览器解析 GET 数据：

```
r->args 
```

但我不知道如何检索 POST 表单数据。有人可以建议我怎么做吗？

# java - 如何在 Android 中以毫秒为单位显示日期和时间？

> ID：14174259
> 
> 赞同：0
> 
> 时间：2013-01-05T17:14:56.447
> 
> 标签：java, android, time, milliseconds

我想显示旅行的日期。在应用程序中列出了几个行程，每个行程都有一个很长的值，其中包含其一代的 currentTimeMillis。我想把这个**长**数字变成一个日期，但输出总是在 1970 年左右...... System.currentTimeMillis() 是存储行程生成时间的正确方法吗？

```
Date date = new Date(trip.getStartTime());  // 195342322
SimpleDateFormat test = new SimpleDateFormat("yyyy-MM-dd"); 
startTime.setText(String.valueOf(test.format(date))); 
```

-> startTime 的输出：1970-01-01

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:34:18.743

尝试使用[日历](http://developer.android.com/reference/java/util/Calendar.html)进行简单的格式化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:49:21.120

我们不知道`trip.getStartTime()`是如何实现的，但是它返回了一个错误的值。`195342322`1976 年 3 月 10 日星期三 21:45:22 GMT（您可以[在线](http://www.epochconverter.com/)查看）

由于唯一不推荐使用的`Date`构造函数接受一个`long`参数，我猜你使用了它。最好以数据库友好的方式存储日期（时间），例如 ISO 8601。请注意，如果您将其存储在客户端的 SQLite 数据库中，则 SQLite 没有*时间*类型，您必须使用*文本*字段。

`Date`一旦切换到文本表示进行序列化，您将能够通过使用取回 a`SimpleDateFormat.parse()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T19:50:08.387

使用这样的东西：

```
Calendar calendar=Calendar.getInstance();
calendar.setTimeInMillis(trip.getStartTime());
Date date =calendar.getTime (); 
```

[如此处](http://developer.android.com/reference/java/util/Calendar.html#setTimeInMillis%28long%29)所示。

# python - 读取文件中的汉字并发送到浏览器

> ID：14174260
> 
> 赞同：1
> 
> 时间：2013-01-05T17:15:13.383
> 
> 标签：python, http, unicode, cjk

我正在尝试制作一个程序：

*   从文件中读取中文字符列表，从中创建字典（将符号与其含义相关联）。
*   `BaseHTTPServer`选择一个随机字符并在收到 GET 请求时使用该模块将其发送到浏览器。

一旦我设法正确读取和存储标志（我尝试将它们写入另一个文件以检查它们是否正确并且有效），我无法弄清楚如何将它们发送到我的浏览器。

我连接到 127.0.0.1:4321 并且我管理的最好的方法是获得一个（据说）url 编码的中文字符及其翻译。

代码：

```
# -*- coding: utf-8 -*-
import codecs
from BaseHTTPServer import HTTPServer, BaseHTTPRequestHandler
from SocketServer import ThreadingMixIn
import threading
import random
import urllib

source = codecs.open('./signs_db.txt', 'rb', encoding='utf-16')

# Checking utf-16 works fine with chinese characters and stuff :
#out = codecs.open('./test.txt', 'wb', encoding='utf-16')
#for line in source:
#   out.write(line)

db = {}
next(source)
for line in source:
    if not line.isspace():
            tmp = line.split('\t')
            db[tmp[0]] = tmp[1].strip()

class Handler(BaseHTTPRequestHandler):

    def do_GET(self):
        self.send_response(200)
        self.end_headers()
        message =  threading.currentThread().getName()
        rKey = random.choice(db.keys())
        self.wfile.write(urllib.quote(rKey.encode("utf-8")) + ' : ' + db[rKey])
        self.wfile.write('\n')
        return

class ThreadedHTTPServer(ThreadingMixIn, HTTPServer):
    """Handle requests in a separate thread."""

if __name__ == '__main__':
    server = ThreadedHTTPServer(('localhost', 4321), Handler)
    print 'Starting server, use <Ctrl-C> to stop'
    server.serve_forever() 
```

如果我不对汉字进行 urlencode，我会从 python 得到一个错误：

```
self.wfile.write(rKey + ' : ' + db[rKey]) 
```

这给了我这个：

> UnicodeEncodeError：'ascii'编解码器无法在位置 0 编码字符 u'\u4e09'：序数不在范围内（128）

我也尝试过使用 'utf-16' 进行编码/解码，但我仍然收到那种错误消息。

这是我的测试文件：

```
Sign    Translation

一   One
二   Two
三   Three
四   Four
五   Five
六   Six
七   Seven
八   Eight
九   Nine
十   Ten 
```

所以，我的问题是：“我怎样才能让来自我的脚本的汉字在我的浏览器中正确显示”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T17:34:35.970

通过编写元标记来声明页面的编码，并确保将整个 Unicode 字符串编码为 UTF-8：

```
self.wfile.write(u'''\
    <html>
    <headers>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    </headers>
    <body>
    {} : {}
    </body>
    </html>'''.format(rKey,db[rKey]).encode('utf8')) 
```

和/或声明 HTTP 内容类型：

```
self.send_response(200)
self.send_header('Content-Type','text/html; charset=utf-8')
self.end_headers() 
```

# d - 错误：模板 std.array.Appender!(string).Appender.put 不匹配任何函数

> ID：14174270
> 
> 赞同：1
> 
> 时间：2013-01-05T17:16:03.863
> 
> 标签：d

我收到一个错误

```
Error: template std.array.Appender!(string).Appender.put does not match any 
function template declaration 
```

我正在尝试使用`Appender`. 你能告诉我如何让它工作吗？

```
import std.array;
import std.stdio;

    void app(inout Appender!(string) as)
    {
       char ch = 'o';
       as.put(ch);
    }

    void main()
    {
       auto app2 = appender!string();
       //writeln(typeid(app));
       app2.put('g');
       app(app2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:56:03.720

更改`inout`为`ref`。

`inout``cont`//用于将属性从函数参数传递到它的参数`immutable`。用于通过引用传递函数参数。*`none`*`ref`

# hibernate - 使用 StatelessSession 进行批处理

> ID：14174271
> 
> 赞同：17
> 
> 时间：2013-01-05T17:16:07.137
> 
> 标签：hibernate, batch-processing

从[文档](http://docs.jboss.org/hibernate/orm/3.5/reference/en-US/html/batch.html)

如果我们有需要插入 1000 000 行/对象的情况：

```
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();

for ( int i=0; i<100000; i++ ) {
    Customer customer = new Customer(.....);
    session.save(customer);
    if ( i % 20 == 0 ) { //20, same as the JDBC batch size
        //flush a batch of inserts and release memory:
        session.flush();
        session.clear();
    }
}

tx.commit();
session.close(); 
```

为什么我们应该使用这种方法？与 StatelessSession 相比，它给我们带来了什么样的好处：

```
 StatelessSession session = sessionFactory.openStatelessSession();
    Transaction tx = session.beginTransaction();

    for ( int i=0; i<100000; i++ ) {
      Customer customer = new Customer(.....);
      session.insert(customer);
    }    

    tx.commit();
    session.close(); 
```

我的意思是，这个（“替代”）最后一个例子不使用内存，不需要同步，清理缓存，那么这应该是这种情况的最佳实践吗？那为什么要使用前一个呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T17:28:03.830

从您链接到的文档中：

> 特别是，无状态会话不实现一级缓存，也不与任何二级缓存或查询缓存交互。它不实现事务性后写或自动脏检查。使用无状态会话执行的操作永远不会级联到关联的实例。无状态会话会忽略集合。通过无状态会话执行的操作绕过 Hibernate 的事件模型和拦截器。由于缺少一级缓存，无状态会话容易受到数据别名效应的影响。

这些是一些重要的限制！

如果您正在创建的对象或您所做的修改是对单个对象的标量字段的简单更改，那么我认为与批处理正常会话相比，无状态会话没有缺点。然而，一旦你想做一些更复杂的事情——比如操作一个对象的集合值属性，或者另一个从第一个级联的对象——那么无状态会话更多的是障碍而不是帮助。

更一般地说，如果批处理的普通会话提供了足够好的性能，那么无状态会话只是不必要的复杂性。它看起来有点像普通的会话，但它有不同的 API 和不同的语义，这是一种会招致 bug 的东西。

当然，在某些情况下它是合适的工具，但我认为这些是例外而不是规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T21:12:37.077

无状态会话在性能方面优于 Session，因为无状态会话将跳过事务提交到会话对象中使用的会话或会话刷新方法。但是，重要的是要注意服务/DAO 不应尝试对父对象或任何子对象执行会话中数据操作。它会抛出异常。此外，请确保明确关闭会话，否则最终会导致连接泄漏。

为了通过无状态会话获得更多性能，如果使用 Spring 驱动的事务，请将 Spring 事务标记为只读并将所需的传播设置为 NEVER。

但同样，不要在必须操纵对象模型的情况下尝试这种做法。

```
@Transactional(value="someTxnManager", readOnly=true, propagation=Propagation.NEVER)
    public List<T> get(...) {

        return daoSupport.get(...);
    } 
```

在 daoSupport

```
StatelessSession session = sessionFactory.openStatelessSession();
try{
// do all operations here
}
...
...
finally{
            session.close();
} 
```

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2013-01-19T15:01:30.280

StatelessSession 不支持批处理。
如果我没记错的话，我已经在文档中看到了这一点
StatelessSession 未提供的功能和行为
**• 一级缓存
• 与任何二级缓存或查询缓存的交互
• 事务性后写或自动脏检查**
以及使用缓存进行批处理
原谅我如果我错了。

# pyparsing - pyparsing嵌套赋值

> ID：14174273
> 
> 赞同：1
> 
> 时间：2013-01-05T17:16:08.413
> 
> 标签：pyparsing

我有一组 500-600 个文件，我想搜索并提取数据。我正在尝试使用 pyparsing，但成功非常有限。一个文件中只有 3 件事：(1) 注释，(2) 简单赋值和 (3) 嵌套赋值。嵌套深度约为 6 层。

我的目标是查看 3 级深度字段中的特定值，如果它具有特定值，则从属于同一 2 级字段的另一个 3 级字段中提取一个值。

首先，pyparsing 是执行此操作的正确工具吗？如果没有其他建议？

我知道如何构建文件列表并对其进行迭代。让我展示一个示例文件，然后展示我正在尝试的代码。

```
# TOP_OBJECT ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TOP_OBJECT=
(
    obj_fmt=
    (
    obj_name="foo"
    obj_cre_date=737785182  # = Tue May 18 23:19:42 1993
    opj_data=
    (
        a="continue"
        b="quit"
    )
    obj_version=264192  # = Version 4.8.0
    )

# LEVEL1_OBJECT ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    LEVEL1_OBJECT=
    (
        OBJ_part=
        (
        obj_type=1005
        obj_size=120
        )

# LEVEL2_OBJECT ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        LEVEL2_OBJECT_A=
        (
            OBJ_part=
            (
            obj_type=3001
            obj_size=128
            )

            Another_part=
            (
                another_attr=
                (
                another_style=0
                another_param=2
                )
            )
        ) ### End of LEVEL2_OBJECT_A ###
# LEVEL2_OBJECT ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        LEVEL2_OBJECT_B=
        (
            OBJ_part=
            (
            obj_type=3005
            obj_size=128
            )

            Another_part=
            (
                another_attr=
                (
                another_style=0
                another_param=8
                )
            )
        ) ### End of LEVEL2_OBJECT_B ###
    ) ### End of LEVEL1 OBJECT
) ### End of TOP_OBJECT ### 
```

我消化文件的代码如下所示：

```
from pyparsing import *

def Syntax():
    comment = Group("#" + restOfLine).suppress()
    eq = Literal('=')
    lpar  = Literal( '(' ).suppress()
    rpar  = Literal( ')' ).suppress()
    num = Word(nums)
    var = Word(alphas + "_")
    simpleAssign = var +  eq
    nestedAssign = Group(lpar + OneOrMore(simpleAssign) + rpar)
    expr = Forward()
    atom = nestedAssign | simpleAssign
    expr << atom 
    expr.ignore(comment)
    return expr

def main():

    expr = Syntax()
    results = expr.parseFile( "for_show.asc" )
    print results

if __name__ == '__main__':
    main() 
```

我的结果没有下降：['TOP_OBJECT', '=']

现在我不处理带引号的字符串或数字，只是试图理解解析嵌套列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:23:28.497

大多数情况下，您的解析器中只有一些空白 - 与当前代码相比，请参阅注释掉的原始代码：

```
def Syntax():
    comment = Group("#" + restOfLine).suppress()
    eq = Literal('=')
    lpar  = Literal( '(' ).suppress()
    rpar  = Literal( ')' ).suppress()
    num = Word(nums)
    #~ var = Word(alphas + "_")
    var = Word(alphas + "_", alphanums+"_")
    #~ simpleAssign = var +  eq
    expr = Forward()
    simpleAssign = var +  eq + (num | quotedString)
    #~ nestedAssign = Group(lpar + OneOrMore(simpleAssign) + rpar)
    nestedAssign = var +  eq + Group(lpar + OneOrMore(expr) + rpar)
    atom = nestedAssign | simpleAssign
    expr << atom 
    expr.ignore(comment)
    return expr 
```

这给出了：

```
['TOP_OBJECT',
 '=',
 ['obj_fmt',
  '=',
  ['obj_name',
   '=',
   '"foo"',
   'obj_cre_date',
   '=',
   '737785182',
   'opj_data',
   '=',
   ['a', '=', '"continue"', 'b', '=', '"quit"'],
   'obj_version',
   '=',
   '264192'],
  'LEVEL1_OBJECT',
  '=',
  ['OBJ_part',
   '=',
   ['obj_type', '=', '1005', 'obj_size', '=', '120'],
   'LEVEL2_OBJECT_A',
   '=',
   ['OBJ_part',
    '=',
    ['obj_type', '=', '3001', 'obj_size', '=', '128'],
    'Another_part',
    '=',
    ['another_attr',
     '=',
     ['another_style', '=', '0', 'another_param', '=', '2']]],
   'LEVEL2_OBJECT_B',
   '=',
   ['OBJ_part',
    '=',
    ['obj_type', '=', '3005', 'obj_size', '=', '128'],
    'Another_part',
    '=',
    ['another_attr',
     '=',
     ['another_style', '=', '0', 'another_param', '=', '8']]]]]] 
```

如果你`expr`用 Group 包裹里面的nestedAssign 的 OneOrMore

```
 nestedAssign = var +  eq + Group(lpar + OneOrMore(Group(expr)) + rpar) 
```

，我认为您会为重复的嵌套分配获得更好的结构：

```
['TOP_OBJECT',
 '=',
 [['obj_fmt',
   '=',
   [['obj_name', '=', '"foo"'],
    ['obj_cre_date', '=', '737785182'],
    ['opj_data', '=', [['a', '=', '"continue"'], ['b', '=', '"quit"']]],
    ['obj_version', '=', '264192']]],
  ['LEVEL1_OBJECT',
   '=',
   [['OBJ_part',
     '=',
     [['obj_type', '=', '1005'], ['obj_size', '=', '120']]],
    ['LEVEL2_OBJECT_A',
     '=',
     [['OBJ_part',
       '=',
       [['obj_type', '=', '3001'], ['obj_size', '=', '128']]],
      ['Another_part',
       '=',
       [['another_attr',
         '=',
         [['another_style', '=', '0'], ['another_param', '=', '2']]]]]]],
    ['LEVEL2_OBJECT_B',
     '=',
     [['OBJ_part',
       '=',
       [['obj_type', '=', '3005'], ['obj_size', '=', '128']]],
      ['Another_part',
       '=',
       [['another_attr',
         '=',
         [['another_style', '=', '0'], ['another_param', '=', '8']]]]]]]]]]] 
```

此外，您最初发布的代码包含 TAB，我发现它们比它们的价值更麻烦，最好使用 4 空格缩进。

# java - JPA 序列生成器

> ID：14174274
> 
> 赞同：1
> 
> 时间：2013-01-05T17:16:11.320
> 
> 标签：java, postgresql, jpa, sequence

实体类

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "generator1")
@SequenceGenerator(sequenceName = "sequence2", name = "generator1",
allocationSize = 1, initialValue = 1)
private int                id; 
```

主要的

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("Employee");
                entityManager = emf.createEntityManager();
                 Employee us = new Employee();
                us.setFirstname("John");
                us.setLastname("John");
                entityManager.getTransaction().begin();
                entityManager.persist(us);
                entityManager.getTransaction().commit(); 
```

第一个 ID 号是 1，但是当我再次运行它时，它会创建一个 ID 号 3（应该是 2？），我不知道为什么。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:04:47.307

当您使用`Postgres`. 由于最小（和默认）缓存大小是`1`，当您插入具有 id 的实体时，`1`它 prefetch `2`。

第[9.16 节。](http://www.postgresql.org/docs/current/interactive/functions-sequence.html)Postgres 手册的[序列操作函数指出：](http://www.postgresql.org/docs/current/interactive/functions-sequence.html)

`Important: To avoid blocking concurrent transactions that obtain numbers from the same sequence, a nextval operation is never rolled back; that is, once a value has been fetched it is considered used, even if the transaction that did the nextval later aborts. This means that aborted transactions might leave unused "holes" in the sequence of assigned values.`

这意味着，如果您获取`2`并最终不使用它，它将不会被重用。

这就是为什么你看到`3`后`1`。

无论如何，您应该记住，如此小的缓存大小会影响性能，因此不建议这样做。

# jsp - jsp会话重定向

> ID：14174279
> 
> 赞同：0
> 
> 时间：2013-01-05T17:16:22.390
> 
> 标签：jsp

我在申请会话时遇到了麻烦。

index.jsp 有简单的登录表单，提交后会转到创建会话并重定向到 admin_home.jsp 页面的 servlet，这里一切都很好。

但是我希望当用户直接想去 admin_home.jsp 时，他会重定向到 index.jsp 页面。这是问题所在：

admin_home.jsp

```
<body>

<%
    session=request.getSession(false);
    if(session.getAttribute("User_ID")==null)
    {
        response.sendRedirect("index.jsp");
    }

%>
    <jsp:include page="header.jsp"></jsp:include>

    <div>
    <div id="left">
             <div id="photo">
                <img alt="" src="images/users_image/<%out.println(session.getAttribute("User_ID").toString().concat(".jpg"));%>" />

            </div>

        </div>
    </div>
</body> 
```

登录 servlet 正在会话中设置值 User_ID....

因此，当用户尝试直接访问 admin_home.jsp 时，他应该重定向到 index.jsp 页面......我的代码有什么问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:37:10.780

此代码应在任何内容刷新到响应之前完成，并且不应在重定向后执行任何指令。

此外，这不是视图逻辑（因此它不应该在 JSP 中），并且您真的不希望在需要对用户进行身份验证的应用程序的每个 JSP 和 servlet 中都有此代码。因此，您应该将此逻辑放在 servlet 过滤器中。

最后，如果还没有会话，以下代码将引发异常。Soc heck that session 不为空，或者不使用`getSession(false)`，但是`getSession()`：

```
session=request.getSession(false);
if(session.getAttribute("User_ID")==null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T08:39:18.967

```
<%
    session=request.getSession(false);
    if(session.getAttribute("User_ID")==null)
    {
        response.sendRedirect("index.jsp");
    }

%> 
```

将该代码放在对我有用的 html 和 head 部分之间

# meteor - 从外部应用程序验证流星用户

> ID：14174281
> 
> 赞同：3
> 
> 时间：2013-01-05T17:16:35.157
> 
> 标签：meteor

我有一个流星应用程序（带有流星帐户），并且正在构建一个移动应用程序。如何从移动应用程序对用户进行身份验证。我有一个可以将数据发送到移动客户端的 python web 服务。但我不知道如何从外部应用程序进行身份验证。

我确实看过 DDP 客户端，但没有“身份验证方法”。有没有办法用纯 python 解决方案来做到这一点？我可以访问“用户”集合-> srp 验证程序和盐。

注意：Python srp 不起作用。python srp 生成的盐和验证器应该是字节。但是我什至无法使用 bytes.decode(encoding) 解码它们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T19:56:16.973

听起来您想使用Meteor中的开箱即用[帐户管理，然后显示一种机制，您的 PHP 代码可以调用该机制以根据谁通过身份验证显示不同的信息。](http://docs.meteor.com/#accountsui)

如果这是正确的，我认为你最好的选择是：

**构建 PHP DDP 客户端。**Meteor 并不是真正为公开传统意义上的 Web 服务而构建的，而是展示了他们所谓的[DDP 协议](https://stackoverflow.com/questions/10128430/documentation-or-code-details-on-meteors-ddp-pub-sub-protocol)，用于将外部资源插入服务器端出版物。也就是说，我还没有找到 PHP DDP 客户端，但[这里有一个在 node](https://github.com/alansikora/node-js_ddp-client)中，[一个在 .NET 中](https://github.com/sonyarouje/DDPClient.NET)。您需要构建一个 PHP DDP 客户端，然后在 Meteor 服务器代码中编写一个[Meteor.method](http://docs.meteor.com/#meteor_methods)，您可以从 DDP 客户端远程调用该方法来检查用户的身份验证。

**但是**，如果您所做的只是在您的 PHP 站点中显示营销信息，那么 (1) 将整个应用程序保留在 PHP 中并使用本地 PHP 帐户管理系统，或者 (2) 省去您的麻烦可能更有意义DDP 开销并直接在 Meteor 应用程序中编写暴露的营销页面？如果您需要将其保留在不同的服务器上，请考虑使用简单的 iframe？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T08:40:42.060

我刚刚为 PHP 开发了一个 DDP 客户端，这可能是您需要的。在这里查看： [https ://github.com/zyzo/meteor-ddp-php](https://github.com/zyzo/meteor-ddp-php)

# iphone - 带有 ControlEvents 的 UIbutton 在 uitableviewcell 上不起作用

> ID：14174284
> 
> 赞同：0
> 
> 时间：2013-01-05T17:16:42.030
> 
> 标签：iphone, uitableview

这是我的代码

```
UIImageView *bgDetails = [[UIImageView alloc] initWithFrame: CGRectMake(0, 20, 320, 47)];
bgDetails.image = [UIImage imageNamed:@"bgDetail"];

UIButton *btnLike = [UIButton buttonWithType:UIButtonTypeCustom];
[btnLike setBackgroundImage:[UIImage imageNamed:@"38_38"] forState:UIControlStateNormal];
btnLike.frame = CGRectMake(278, 4.5f, 37, 37);
[btnLike addTarget:self action:@selector(doLike:) forControlEvents:UIControlEventTouchUpInside];

[bgDetails addSubview:btnLike];
[cell.contentView addSubview:bgDetails]; 
```

但`btnLike`不调用`doLike`方法。请帮我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:29:16.133

这里有两个可能的问题。第一个是这样的：我不确定这是否只是一个错字，但你写

```
action:@selector(doLike:) 
```

但后来你抱怨`doLike`没有尾随冒号的选择器（即它不带参数）。如果这是问题所在，您可以通过更改其中任何一个来修复它，以便两个选择器名称匹配（它们都需要是`doLike:`or `doLike`，始终如一）。

我看到的另一个错误是您将按钮添加为图像视图的子视图。`UIImageView`默认情况下关闭用户交互，因此为了对用户触摸做出反应，您必须将其`userInteractionEnabled`属性设置为启用：

```
bgDetails.userInteractionEnabled = YES; 
```

# android - 如何在eclipse中消除Action Bar的错误 - Android

> ID：14174286
> 
> 赞同：0
> 
> 时间：2013-01-05T17:16:53.893
> 
> 标签：android, android-actionbar

我使用了 if else 条件来显示手机的版本是否大于或等于 HoneyComb，然后它将显示`ActionBar`否则不是 .. 这是我的`onCreate`功能：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sign_up);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {           
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    }

    editName = (EditText) findViewById(R.id.editName);
    editUsername = (EditText) findViewById(R.id.editUsername);
    editPassword = (EditText) findViewById(R.id.editPassword);
    editEmail = (EditText) findViewById(R.id.editEmail);
    editBatch = (EditText) findViewById(R.id.editBatch);
} 
```

但是 eclipse 显示 Call requires Api level 11 (Current Min is 9) 的错误

如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:19:41.200

任何一个

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB) 
```

或者

```
@SuppressLint("NewApi") 
```

上面你的`onCreate()`方法。

所以看起来像

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
@Override
public void onCreate (Bundle savedInstanceState)
{
  //rest of code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:19:55.057

使用[SherlockActionBar](http://actionbarsherlock.com/)怎么样？.. 因为`ActionBar`它在 API 11 及更高版本中可用，并`SherlockActionbar`提供`ActionBar`较低的 API 版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T17:29:54.940

你需要使用 ActionBarSherlock [http://actionbarsherlock.com/](http://actionbarsherlock.com/)这里是教程[http://www.slideshare.net/androidstream/action-bar-sherlock-tutorial](http://www.slideshare.net/androidstream/action-bar-sherlock-tutorial) 然后你可以使用：

```
ActionBar bar = getSupportActionBar(); 
```

# jquery - jquery cfml 触发器（“更改”）不起作用

> ID：14174288
> 
> 赞同：2
> 
> 时间：2013-01-05T17:17:02.910
> 
> 标签：jquery, coldfusion

我需要的是一个 cfselect 绑定到列出文件类型的查询、一个列出已保存文件的 cfdiv 以及一个扫描要保存为 pdf 文件的图像的按钮，该文件的名称以输入字段的值为前缀。

简单的页面。

```
<cfselect name="DocType" id="DocType" class="selectClass" query="qGetDocTypes" display="name" value="DocTypeID">
<input name="ScanDocument" id="ScanDocument" type="text" value="" class="ScanDocument">

<cfdiv id="handler_#docAreaID#" bind="url:#request.controlurl#documentHandler/?docareaID=#docareaID#&variableID=#variableID#&Fav=#attributes.Fav#&userid=#attributes.userid#&showform=1&ScannedDocument={ScanDocument@change}">

// remove blanks from text
ScanDoc1 = $('input.scandocument').val();
ScanDoc = ScanDoc1.replace(/\s/g, '');
<cfoutput>
ColdFusion.navigate('url:#request.controlurl#documentHandler/?docareaID=#docareaID#&variableID=#variableID#&Fav=#attributes.Fav#&userid=#attributes.userid#&showform=1&ScannedDocument='+ScanDoc);
</cfoutput> 
```

ColdFusion.Navigate 不会刷新 CFdiv，它还会触发我用于主表单操作的 onBrowseAway 事件。我可以通过手动更改输入的值来模拟 div 刷新，但在我让它工作后它将被隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:40:42.957

```
$('input.ScanDocument').trigger('Change'); 
```

如果我猜的话，我会说大写的“C”是问题所在。JavaScript 区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:40:58.920

让我先声明我之前没有使用过该`ColdFusion.navigate`功能，但根据[此处的文档，](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WS0ef8c004658c1089-6262c847120f1a3b244-7fd0.html)该功能需要成为链接目标。它需要在标签的`href`一部分中。`a`查看我引用的文档页面上的示例。因此，尝试将您的代码添加到这样的`a`标签中：

```
<cfoutput>
<a href="javascript:ColdFusion.navigate('#request.controlurl#documentHandler/?docareaID=#docareaID#&variableID=#variableID#&Fav=#attributes.Fav#&userid=#attributes.userid#&showform=1&ScannedDocument='+ScanDoc,'handler_#docAreaID#');">click here</a>
</cfoutput> 
```

请注意，我`url:`从您的代码中删除了文本。这似乎没有必要。

看起来好像您缺少`container`函数的参数。文档指出，如果您缺少此参数，则链接将被视为普通 URL，并且整个页面将被刷新。（尽管您的代码不是链接？）

另外，我不确定您是否可以像您一样在函数的 URL 中引用 ColdFusion 变量。这些是服务器端的，这个功能是客户端的（javascript）。就像我说的，我以前从未使用过它，但这些是我阅读该文档后的想法。

# objective-c - 目标c在uitableview中获得第一行

> ID：14174289
> 
> 赞同：0
> 
> 时间：2013-01-05T17:17:03.877
> 
> 标签：objective-c, uitableview, row

如何确定我的 uitableview 中当前可见的第一行？该表有 200 多行，因此当单击一行时，我想确定当前可见的第一行号。这个想法是，当我转到表格项目的详细视图页面并返回该页面时，我可以将表格精确地滚动到该行（如果有帮助，我的表格也都在 1 部分中）非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:22:02.720

`UITableView`有`visibleCells`方法。查看[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/visibleCells)。如果它对您更有用，还有[`indexPathsForVisibleRows`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/indexPathsForVisibleRows).

# knockout.js - 通过索引从 observableArray 中获取对象

> ID：14174290
> 
> 赞同：7
> 
> 时间：2013-01-05T17:17:07.443
> 
> 标签：knockout.js

我正在用 Knockoutjs 设计一个测验。我想一次只显示一个问题。我在考虑一个全局计数变量，每次回答一个问题时都会加 1。但是我似乎无法找到一种方法来得到一个问题。我将如何最好地解决这个问题？我是 Knockoutjs 的新手。我尝试了 questions()[number] 但这似乎不起作用。

谢谢

JS

```
$(document).ready(function(){
function Answer(data) {
    this.answer = ko.observable(data.answer);
    this.correct = ko.observable(data.correct);
}

function Question(data){
    this.id = ko.observable(data.id);
    this.question = ko.observable(data.question);
    this.answers = ko.observableArray([]);
    var mappedAnswers = $.map(data.answers, function(item) {return new Answer(item) });
    this.answers(mappedAnswers);
}

function AnswerViewModel(){
    // Data
    var self = this;

    self.questions =  ko.observableArray([]);

    self.checkAnswer = function(item, event){
            if (item.juist() == true){
               $(event.currentTarget).css("background", "green");

            }else{
                $(event.currentTarget).css("background", "red");
            }
    }

    $.getJSON("../res/json/quiz.json", function(allData) {
        var mappedQuestions = $.map(allData.questions, function(item) {return new Question(item) });
        self.questions(mappedQuestions);
    });
}

ko.applyBindings(AnswerViewModel());
}); 
```

HTML

```
<h3 data-bind="questions()[1].question"></h3>
<ul class="list-container"  data-bind="foreach: questions()[1].answers">
    <li class="list-item">
         <a class="list-item-content" href="#" data-bind="text: answer, click:checkAnswer"></a>
    </li>
</ul>
<button>Next question</button> 
```

JSON

```
{
"questions" :
[
    {
        "id": 1,
        "question": "This is the first question",
        "answers" :
        [
            {"answer": "q1a1", "correct": false},
            {"answer": "q1a2", "correct": false} ,
            {"answer": "q1a3", "correct": true},
            {"answer": "q1a4", "correct": false}
        ]
    },
    {
        "id": 2,
       "question": "This is the 2nd question",
        "answers" :
        [
            {"answer": "q2a1", "correct": false},
            {"answer": "q2a2", "correct": false} ,
            {"answer": "q2a3", "correct": false},
            {"answer": "q2a4", "correct": true}
        ]
    }
] 
```

}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T18:41:09.777

Jsfiddle 很有趣，所以我不能在那里发布代码，但这很简单：你快到了！这里有一点推动。

首先，除非必要，否则调用标记中的方法并不是一个很好的做法，并且为函数提供参数可能意味着您可以为此使用 observable。在这种情况下：

```
<div data-bind="foreach: filteredQuestions">
<ul class="list-container"  data-bind="foreach: answers">
    <li class="list-item">
         <a class="list-item-content" href="#" data-bind="text: answer"></a>
    </li>

</ul>
<button data-bind="click: $parent.nextQuestion">Next question</button>
</div> 
```

正如您所看到的，在标记中我只是放置变量，而不是在表单中调用它`filteredQuestions`。现在您可能会问：“那个 foreach 是怎么回事？我只想显示一个问题，而不是所有问题。过滤后的内容是怎么回事？”

这就是我正在做的事情：我不是显示原始问题数组，而是显示一个过滤后的数组，每当其中的任何可观察对象发生变化时都会更新。这是已过滤问题的代码。

```
self.currentQuestionId = ko.observable("1");
self.filteredQuestions = ko.computed(function() {
    var currentQuestion = self.currentQuestionId();
    return ko.utils.arrayFilter(self.question(), function(question) {
        return question.id() == currentQuestion;
    });
}); 
```

如果您注意代码，我只返回一个包含一个问题的数组，即 Id 与`currentQuestionId`变量设置的数组相同。这是一种方法，尽管有很多方法：其他好的方法有一个可观察的，称为`selectedQuestion`第一个问题是哪个值；然后在标记中使用数据绑定`with:selectedQuestion`。但是让我们坚持这个，你能猜出它是`$parent.nextQuestion`做什么的吗？

```
self.nextQuestion = function() {
    var currentQuestionId = self.currentQuestionId();
    self.currentQuestionId(currentQuestionId + 1);
} 
```

首先，我们使用`$parent`关键字来浏览实际作用域的父级，因为我们在子级中`question`是因为该`foreach`语句。由于您的要求，此功能有效，但可能存在一些陷阱（在最后一个问题中我们该怎么做？如果 id 的数值没有增加怎么办？）。那是另一种方法可能更有用的时候，在这种情况下，你会得到这样的东西：

```
self.nextQuestion = function(question) {
    var index = self.questions().indexOf(question);
    self.selectedQuestion(self.questions()[index + 1]);
} 
```

最后一种方法的美妙之处？好吧，backQuestion 很简单！

```
self.backQuestion = function(question) {
    var index = self.questions().indexOf(question);
    self.selectedQuestion(self.questions()[index - 1]);
} 
```

（您显然需要检查 IndexOutOfBounds 类型错误）。在最后一种方法中，不要忘记，由于我们在一个上下文切换元素中，例如`foreach`，我们将当前问题作为参数接收。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T20:39:43.860

[这](http://jsfiddle.net/rustam/SSBZs/)是一个有效的解决方案。

该代码使用[映射](https://github.com/SteveSanderson/knockout.mapping)插件来简化视图模型的创建。
"questionIndex" 和 "currentQuestion" observables 跟踪当前问题。

```
function AnswerViewModel(){
  var self = this;
  ko.mapping.fromJS(data, {}, self);

  this.questionIndex = ko.observable(0);
  this.currentQuestion = ko.computed(function(){
     return self.questions()[self.questionIndex()];
  });

this.nextQuestion = function(){
  var questionIndex = self.questionIndex();
  if(self.questions().length - 1 > questionIndex){
    self.questionIndex(questionIndex + 1);
  }
};

this.prevQuestion = function(){
  var questionIndex = self.questionIndex();
  if(questionIndex > 0){
    self.questionIndex(questionIndex - 1);
  }
};

this.checkAnswer = function(item, event){
  $(event.currentTarget).css("background", item.correct() ? "green" : "red");
};  
} 
```

标记：

```
<!-- ko with: currentQuestion -->
<h3 data-bind="text: question"></h3>
<ul class="list-container" data-bind="foreach: answers">
  <li class="list-item">
     <a class="list-item-content" href="#" data-bind="text: answer, click:$root.checkAnswer"></a>
</li>
</ul>
<!-- /ko --> 
```

在这里，我使用虚拟元素`<!-- ko --> <!-- /ko -->`来引入所需的上下文。

# java - 如何制作一个随机数，但它不会产生相同的数字

> ID：14174296
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:17:46.327
> 
> 标签：java, random

> **可能重复：**
> [使用随机数生成器对整数进行随机排列](https://stackoverflow.com/questions/10872132/random-permutation-of-integers-using-a-random-number-generator)

例如，我需要制作一个从 1 到 30 的随机数。但它不会产生相同的随机数。产生的数字必须彼此不同。

那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T17:19:43.107

创建一个`List<Integer>`包含 1-30 的内容，使用 对其进行随机播放`Collections.shuffle()`，然后遍历列表。当然，在列表的末尾，不可能有一个尚未生成的新号码。

# wordpress - 如何将 iframe 添加到 Wordpress 侧边栏？

> ID：14174297
> 
> 赞同：0
> 
> 时间：2013-01-05T17:17:50.457
> 
> 标签：wordpress

我使用的是默认的 TwentyEleven 主题，我在 sidebar.php 中添加了以下代码，但它不起作用（我收到 310 错误）

```
<iframe src="frame.html" name="test" height="600" width="180"></iframe> 
```

iframe.html 位于 /themes/twentyeleven 文件夹中，因此它应该可以工作（至少在常规网站上）。

是否有必要使用某种小部件插件才能使其工作。什么可以阻止 iframe 出现在网站上？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-31T20:49:26.167

您需要通过 http 请求而不是通过本地路径来访问文件。

```
<iframe src="<?php echo ( get_site_url() . '/wp-content/themes/twentyeleven/iframe.html' ); ?>" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T17:33:33.060

您应该在给出路径之前使用 get_bloginfo('template_directory') ......尝试使用 {

```
<iframe src="<?php echo get_theme_root(); ?>/frame.html" name="test" height="600" width="180"></iframe> 
```

}

尝试阅读此 [http://codex.wordpress.org/Function_Reference/get_theme_root](http://codex.wordpress.org/Function_Reference/get_theme_root)

# javascript - 如何在 javascript/jquery 中格式化时间

> ID：14174301
> 
> 赞同：-3
> 
> 时间：2013-01-05T17:18:25.847
> 
> 标签：javascript, jquery

我想知道如何使用 javascript/jquery 将时间转换为“08:14PM 2013 年 1 月 5 日”格式。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:34:05.720

要将月份作为 3 个字母的字符串，请使用

```
date.toDateString().split(' ')[1]; 
```

# php - 使用 date() 函数格式化内容以显示提前日期

> ID：14174303
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:18:44.493
> 
> 标签：php, date, time

我使用了以下代码：

```
echo "Today, " . date("M ") . date('d'); 
```

输出：

```
Today, Jan 05 
```

当我需要像明天这样的提前日期时，我使用了以下代码：

```
echo date('l, ', time()+3600*24), date("M "), date('d')+1; 
```

输出：

```
Sunday, Jan 6 
```

这次我遇到了一个问题，它显示`Jan 6`但我需要`Jan 06`. 6 之前缺少一个零。我该如何修改我的代码来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:23:19.427

这是因为您将 1 添加到 05 并且它会自动转换为整数。

请改用以下代码：

```
echo date('l, M d', time()+3600*24); 
```

明天的日期

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:26:13.250

```
echo date("l, M d",strtotime("+1 day")); 
```

# c# - wp7中jpeg解码中的内存问题

> ID：14174304
> 
> 赞同：0
> 
> 时间：2013-01-05T17:18:58.610
> 
> 标签：c#, windows-phone-7, jpeg

我在 windows phone 7 相机应用程序上工作。我需要转换捕获的流，使用 exif 帮助程序修复它的旋转，并保存为 jpeg，并带有质量、方向、输出大小参数。我按照 [exif 旋转](http://www.mindscapehq.com/blog/index.php/2012/02/28/windows-phone-7-working-with-camera-tasks/)文章修复旋转。但核心问题是我需要先将流解码为 jpeg，然后如上所述执行旋转修复，以便将图片保存到媒体库。

我使用以下代码：

```
private WriteableBitmap DecodeImage(Stream photo, int angle)
 {
            WriteableBitmap source = PictureDecoder.DecodeJpeg(photo);

            photo.Seek(0, SeekOrigin.Begin);           

            System.GC.Collect();

            UiDispatcher.BeginInvoke(() =>
            {
                MessageBox.Show(App.LogMemory("after decode"));
            });
            switch (angle)
            {
                case 90:
                case 270:
                    return RotateBitmap(source, source.PixelHeight,
                        source.PixelWidth, angle);
                case 180:
                    return RotateBitmap(source, source.PixelWidth,
                        source.PixelHeight, angle);
                default:
                    return source;
            }
            return null;
        } 
```

在 RotateBitMap 方法中，我具有链接中指定的旋转逻辑，但它从源创建一个新的 WritableBitmap 对象，如下所示：

```
WritablBitmap target = new WritableBitmap(soure.width,source.height); //source is the bitmap passed in argument. 
```

问题是

PictureDecoder.decodejpeg -- 为我的相机捕获的流消耗 30 mb，在旋转流方法中创建新位图又消耗 30 mb。导致应用程序内存增加 60 mb。

由于低端（256mb）Windows Phone 设备中的内存，这会导致应用程序崩溃。为什么解码 jpeg 需要 30mb 和流 30mb 的旋转。（我尝试在旋转流方法中将位图源和目标定位为 null 并强制 gc 但没有用。应用程序在设备上几乎没有 60mb。我该如何应对这个要求??

任何想法..？如何在这些情况下优化内存消耗？？？

注意：我需要从 rotatestream 方法获取位图，因为我需要使用该位图保存为具有输出大小、质量的 jpeg。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:21:30.947

当您使用 JPEG 解码时，您通常会得到一张全尺寸的照片。如果使用 8MP（大约 8000000 像素）相机拍摄，计算如下：

8000000 * 32bits = 256 000 000 bits 用于内存中的一张图片（大约 30MB）

（让我提醒你，HTC Titan II 有一个 16MP 的相机，所以如果你使用全尺寸的照片，它会占用大约 62MB 的内存！！）

显然，要创建一个 WriteableBitmap，您需要 30MB。为了以某种方式操纵照片，您通常无法就地操作。换句话说，您需要创建一个副本，这就是它重复的原因。Windows Phone 有一种方法可以通过自动降低加载图片的分辨率来防止如此大的内存消耗，但前提是您将它​​与以 JPEG 流作为参数的 BitmapImage 和 SetSource 方法一起使用。

我前段时间在我的文章[How to open and work with large photos on Windows Phone中写过它，它在 Windows Phone 的](http://igrali.com/2012/01/03/how-to-open-and-work-with-large-photos-on-windows-phone/)[性能注意事项中](http://msdn.microsoft.com/en-us/library/ff967560%28v=vs.92%29.aspx#BKMK_Images)有所提及

所以，基本上，你应该减小加载照片的大小（你需要全尺寸吗？）并且[BitmapImage 类](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.setsource%28v=vs.95%29.aspx)可以很容易地自动将它保持在 2000x2000 像素以下，大约是 15MB（最大），所以如果您不想为此烦恼，那应该没问题。

# php - jQuery $.get 数据不会出现在 PHP $_GET 中

> ID：14174306
> 
> 赞同：1
> 
> 时间：2013-01-05T17:19:12.423
> 
> 标签：php, jquery, facebook-javascript-sdk

我正在使用 jQuery`$.get`将一些数据发送到我的 PHP 服务器，如下例所示：

**Javascript：**

```
var usr_data = JSON.stringify(window.fb_user);
var save_data = {
    cmd         : 'new_suggestion',
    suggestion  : $('#suggestion').val(),
    sender      : usr_data
};

$.get('/class/suggestion.php',
save_data,
function( data ) {
    if (data.result){
        alert('Thanks for your suggestion.');
    } else {
        alert('Error');
    }           
}); 
```

**PHP：**

```
var_dump($_GET); 
```

usr_data 变量是一个对象，其中包含我在用户使用其 Facebook 帐户登录时获得的 Facebook 用户数据。

问题是，有时，根据可用的用户数据，`sender`变量消失如下：

```
array(2) {
  ["cmd"]=>
  string(14) "new_suggestion"
  ["suggestion"]=>
  string(15) "Some suggestion"
} 
```

我无法在此处发布真实的发件人数据，因为它是 Facebook 用户数据，而且我找不到使用虚假数据或我的 Facebook 数据重现错误的方法。

**编辑**

有人知道为什么`sender`没有出现在 $_GET 数组上吗？

**编辑二**

我刚刚找到了一个带有重现错误的虚假数据的 URL。

我用下面的行创建了一个名为 test_get.php 的 PHP 文件。

```
<?php var_dump($_GET); ?> 
```

并使用以下网址：

`http://mysite/test_get.php?cmd=new_suggestion&suggestion=some%20suggestion&sender=%7B%22id%22%3A%221234567890123%22%2C%22name%22%3A%22Foo%20Bar%20Baz%22%2C%22first_name%22%3A%22Foo%22%2C%22middle_name%22%3A%22Bar%22%2C%22last_name%22%3A%22Baz%22%2C%22link%22%3A%22https%3A%2F%2Fwww.facebook.com%2Ffoobarbaztest%22%2C%22username%22%3A%22foobarbaz%22%2C%22birthday%22%3A%2201%2F01%2F1900%22%2C%22hometown%22%3A%7B%22id%22%3A%221234567890%22%2C%22name%22%3A%22Test%20City%22%7D%2C%22inspirational_people%22%3A%5B%7B%22id%22%3A%22111713915507379%22%2C%22name%22%3A%22Pope%20Benedict%20XVI%22%7D%2C%7B%22id%22%3A%22106184866078691%22%2C%22name%22%3A%22Romário%22%7D%2C%7B%22id%22%3A%22109601749058079%22%2C%22name%22%3A%22Pope%20Benedict%20XVI%22%7D%5D%2C%22gender%22%3A%22male%22%2C%22religion%22%3A%22Cristão%20-%20Católico%22%2C%22political%22%3A%22Foo%20Party%22%2C%22email%22%3A%22foobarbaz%40foobar.foo%22%2C%22timezone%22%3A-5%2C%22locale%22%3A%22pt_BR%22%2C%22languages%22%3A%5B%7B%22id%22%3A%22108083115891989%22%2C%22name%22%3A%22Português%22%7D%2C%7B%22id%22%3A%22108177092548456%22%2C%22name%22%3A%22Español%22%7D%2C%7B%22id%22%3A%22106059522759137%22%2C%22name%22%3A%22English%22%7D%2C%7B%22id%22%3A%22108224912538348%22%2C%22name%22%3A%22French%22%7D%2C%7B%22id%22%3A%22108106272550772%22%2C%22name%22%3A%22French%22%7D%2C%7B%22id%22%3A%22450169151702580%22%2C%22name%22%3A%22Portuguese%22%7D%5D%2C%22verified%22%3Atrue%2C%22updated_time%22%3A%222011-11-02T18%3A43%3A36%2B0000%22%7D`

结果是一样的：

```
array(2) {
  ["cmd"]=>
  string(14) "new_suggestion"
  ["suggestion"]=>
  string(15) "some suggestion"
} 
```

**编辑三**

正如评论所建议的那样，URL 上有重音字符。我对这些字符进行了编码，然后再次尝试，但没有成功。这是正确编码的 URL：

`http://mysite/test_get.php?cmd=new_suggestion&suggestion=some%20suggestion&sender=%7B%22id%22%3A%221234567890123%22%2C%22name%22%3A%22Foo%20Bar%20Baz%22%2C%22first_name%22%3A%22Foo%22%2C%22middle_name%22%3A%22Bar%22%2C%22last_name%22%3A%22Baz%22%2C%22link%22%3A%22https%3A%2F%2Fwww.facebook.com%2Ffoobarbaztest%22%2C%22username%22%3A%22foobarbaz%22%2C%22birthday%22%3A%2201%2F01%2F1900%22%2C%22hometown%22%3A%7B%22id%22%3A%221234567890%22%2C%22name%22%3A%22Test%20City%22%7D%2C%22inspirational_people%22%3A%5B%7B%22id%22%3A%22111713915507379%22%2C%22name%22%3A%22Pope%20Benedict%20XVI%22%7D%2C%7B%22id%22%3A%22106184866078691%22%2C%22name%22%3A%22Rom%C3%A1rio%22%7D%2C%7B%22id%22%3A%22109601749058079%22%2C%22name%22%3A%22Pope%20Benedict%20XVI%22%7D%5D%2C%22gender%22%3A%22male%22%2C%22religion%22%3A%22Crist%C3%A3o%20-%20Cat%C3%B3lico%22%2C%22political%22%3A%22Foo%20Party%22%2C%22email%22%3A%22foobarbaz%40foobar.foo%22%2C%22timezone%22%3A-5%2C%22locale%22%3A%22pt_BR%22%2C%22languages%22%3A%5B%7B%22id%22%3A%22108083115891989%22%2C%22name%22%3A%22Portugu%C3%AAs%22%7D%2C%7B%22id%22%3A%22108177092548456%22%2C%22name%22%3A%22Espa%C3%B1ol%22%7D%2C%7B%22id%22%3A%22106059522759137%22%2C%22name%22%3A%22English%22%7D%2C%7B%22id%22%3A%22108224912538348%22%2C%22name%22%3A%22French%22%7D%2C%7B%22id%22%3A%22108106272550772%22%2C%22name%22%3A%22French%22%7D%2C%7B%22id%22%3A%22450169151702580%22%2C%22name%22%3A%22Portuguese%22%7D%5D%2C%22verified%22%3Atrue%2C%22updated_time%22%3A%222011-11-02T18%3A43%3A36%2B0000%22%7D`

有了这个评论，我注意到 jQuery（或我的浏览器）没有对返回的重音字符进行编码`JSON.stringify(window.fb_user);`

**编辑四**

以下 URL 有效，但如果我添加电子邮件“@foobar.foo”的最后部分，它会失败。也试过不用e-mail，但是用其他数据，还是不行。

`cmd=new_suggestion&suggestion=some%20suggestion&sender=%7B%22id%22%3A%221234567890123%22%2C%22name%22%3A%22Foo%20Bar%20Baz%22%2C%22first_name%22%3A%22Foo%22%2C%22middle_name%22%3A%22Bar%22%2C%22last_name%22%3A%22Baz%22%2C%22link%22%3A%22https%3A%2F%2Fwww.facebook.com%2Ffoobarbaztest%22%2C%22username%22%3A%22foobarbaz%22%2C%22birthday%22%3A%2201%2F01%2F1900%22%2C%22hometown%22%3A%7B%22id%22%3A%221234567890%22%2C%22name%22%3A%22Test%20City%22%7D%2C%22inspirational_people%22%3A%5B%7B%22id%22%3A%22111713915507379%22%2C%22name%22%3A%22Pope%20Benedict%20XVI%22%7D%2C%7B%22id%22%3A%22106184866078691%22%2C%22name%22%3A%22Romário%22%7D%2C%7B%22id%22%3A%22109601749058079%22%2C%22name%22%3A%22Pope%20Benedict%20XVI%22%7D%5D%2C%22gender%22%3A%22male%22%2C%22religion%22%3A%22Cristão%20-%20Católico%22%2C%22political%22%3A%22Foo%20Party%22%2C%22email%22%3A%22foobarbaz`

```
array(3) {
  ["cmd"]=>
  string(14) "new_suggestion"
  ["suggestion"]=>
  string(15) "some suggestion"
  ["sender"]=>
  string(509) "{"id":"1234567890123","name":"Foo Bar Baz","first_name":"Foo","middle_name":"Bar","last_name":"Baz","link":"https://www.facebook.com/foobarbaztest","username":"foobarbaz","birthday":"01/01/1900","hometown":{"id":"1234567890","name":"Test City"},"inspirational_people":[{"id":"111713915507379","name":"Pope Benedict XVI"},{"id":"106184866078691","name":"RomÃ¡rio"},{"id":"109601749058079","name":"Pope Benedict XVI"}],"gender":"male","religion":"CristÃ£o - CatÃ³lico","political":"Foo Party","email":"foobarbaz"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:06:40.607

我在我的服务器上测试了你的网址，它工作正常：

```
array
  'cmd' => string 'new_suggestion' (length=14)
  'suggestion' => string 'some suggestion' (length=15)
  'sender' => string '{"id":"1234567890123","name":"Foo Bar Baz","first_name":"Foo","middle_name":"Bar","last_name":"Baz","link":"https://www.facebook.com/foobarbaztest","username":"foobarbaz","birthday":"01/01/1900","hometown":{"id":"1234567890","name":"Test City"},"inspirational_people":[{"id":"111713915507379","name":"Pope Benedict XVI"},{"id":"106184866078691","name":"RomÃ¡rio"},{"id":"109601749058079","name":"Pope Benedict XVI"}],"gender":"male","religion":"CristÃ£o - CatÃ³lico","political":"Foo Party","email":"foobarbaz@fo'... (length=882) 
```

您的服务器是否配置为支持 utf-8？做一个 phpinfo() 看看你得到了什么。我得到以下信息：

```
HTTP_ACCEPT_CHARSET     ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

我注意到 URL 包含一些奇怪的字符（Romario、Christaeo 等），也许这是没有 utf-8 的问题？

如果您需要更改 http_accept_charset，这可能会有所帮助：[http ://rackerhacker.com/2007/11/15/change-the-default-apache-character-set/](http://rackerhacker.com/2007/11/15/change-the-default-apache-character-set/)

=== 编辑 ===

事实证明，服务器达到了 $_GET 的 512 字节限制。现在这因网络服务器而异，这就是为什么当我们在我的服务器上尝试它时它运行良好的原因。

没有升级服务器的唯一方法是使用 jquery .post() 而不是 .get()

# php - 在没有 onComplete 事件的情况下使用 uploadify 上传后获取文件路径？

> ID：14174308
> 
> 赞同：0
> 
> 时间：2013-01-05T17:19:16.627
> 
> 标签：php, uploadify

我一直在这里和谷歌搜索找到一个可行的解决方案来获取上传后使用uploadify 没有onComplete 事件的文件路径？

我正在使用最新版本的 Uploadify 版本 3.2，它不包括 onComplete 事件。查看事件列表： [http ://www.uploadify.com/documentation/](http://www.uploadify.com/documentation/)

所以我不能使用那个事件。

我对 index.php 使用以下代码，因为它附带下载文件：

```
<body>
<h1>Uploadify Demo</h1>
<form>
    <div id="queue"></div>
    <input id="file_upload" name="file_upload" type="file" multiple="true">
</form>

<script type="text/javascript">
    <?php $timestamp = time();?>
    $(function() {
        $('#file_upload').uploadify({
            'formData'     : {
                'timestamp' : '<?php echo $timestamp;?>',
                'token'     : '<?php echo md5('unique_salt' . $timestamp);?>'
            },
            'swf'      : 'uploadify.swf',
            'uploader' : 'uploadify.php'
        });
    });
</script> 
```

我修改了uploadify.php 为上传的文件设置了新名称，以避免在上传文件时出现任何问题，如下所示：

```
$new_name=microtime();
$new_name=str_replace(".","",$new_name);
$new_name=str_replace(" ","",$new_name);
$store_dir="uploaded/"; //directory to place uploaded files
$fileName = $_FILES['Filedata']['name'];    
$fileTmp = $_FILES['Filedata']['tmp_name']; 
$fileType = $_FILES["Filedata"]["type"];
$fileSize = ($_FILES["Filedata"]["size"] / 1024 / 1000);
$extension = substr($fileName, strrpos($fileName, "."));
$extension = strtolower($extension);
move_uploaded_file($_FILES['Filedata']['tmp_name'], $store_dir.$new_name.$extension); 
```

那么如何获取上传文件的路径，甚至只是新文件名。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:13:18.717

你应该从脚本中返回一些 json。

echo json_encode(array('file' => $_FILES['Filedata']['tmp_name'], $store_dir.$new_name.$extension));

然后通过javascript处理

# java - JFrame java中setContentPane()、doLayout()和setLayout()之间的区别

> ID：14174310
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:19:28.653
> 
> 标签：java, swing, jframe

有人可以向我解释以下内容，因为我很困惑何时使用：**setContentPane()**，**doLayout()**和**setLayout()**在 JFrame java中。

另一个查询：如果我说当使用 JFrame 和 JPanel 以外的其他摆动容器时不需要手动设置/创建内容窗格但在其他情况下我需要手动设置它，我是否正确？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:31:03.383

setContentPane 用于设置 Window 内的顶级可视元素，而 setLayout 设置布局管理器，doLayout 调用布局管理器。通常 doLayout 不需要调用，因为它会在主要属性更改时自动调用，例如添加/删除元素或调整大小。

我认为没有任何理由与这些功能混淆：

*   如果您想在框架中添加视觉元素，请使用`setContentPane(component)`（或`add(component)`）。

*   如果要设置布局管理器（如`GridBagLayout`或`FlowLayout`），请使用`setLayout(layoutmanager)`.

*   如果您更改了某些内容并且您的框架看起来很奇怪，请调用`doLayout()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T17:41:03.813

根据java文档：

*   [`setLayout(LayoutManager manager)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setLayout%28java.awt.LayoutManager%29)

> 设置布局管理器。被覆盖以有条件地将调用转发到 contentPane。

所以基本上它允许我们设置`LayoutManager`我们`JFrame`的*contentPane*，因为调用`setLayout(..)`将`JFrame`被转发到*contentpane*。

*   [`setContentPane(Container contentPane)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setContentPane%28java.awt.Container%29)

> 设置 contentPane 属性。此方法由构造函数调用。Swing 的绘制体系结构需要包含层次结构中的不透明 JComponent。这通常由内容窗格提供。如果您替换内容窗格，建议您将其替换为不透明的 JComponent。

这指的是添加到我们的主要组件`JFrame`（并跨越`JFrame`整个大小），这是所有其他组件将在调用`add(..)`on `JFrame`instance 时添加的地方。

*   [`doLayout()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#doLayout%28%29)

> 使该容器布置其组件。大多数程序不应直接调用此方法，而应调用 validate 方法。

这将导致在我们更改`LayoutManager`容器时显示视觉更改，但正如我们所见，我们不应该调用它，而是使用`validate()`/`revalidate()`后跟从`repaint()`大小、重新布局和/或添加/删除组件进行视觉更改来自容器，可见。

至于：

> 如果我说在使用 JFrame 和 JPanel 以外的其他摆动容器时不需要手动设置/创建内容窗格但在其他情况下我需要手动设置它，我是否正确？

不，这也适用`JPanel`。

A`JPanel`是一个`Container`，JFrame 使用`setContentPane`，它允许我们设置一个容器，因此`JPanel`/`JComponent` *扩展* `Conatiner`，以便它可以添加为*contentPane*。因此它暴露于该`setContentPane(..)`方法。默认情况下有一个`JPanel`内容窗格，或者我们如何向其中添加组件？

因此，我们不必手动创建`JPanel` *contentPane*。

# jquery - jquery通过输入框过滤复选框列表

> ID：14174323
> 
> 赞同：7
> 
> 时间：2013-01-05T17:20:15.113
> 
> 标签：jquery, checkbox, filter

我有一个很长的复选框列表（同名）。我想根据文本框中的输入创建一个过滤系统。我的意思是，当我在文本框中写“ter”时，我只想显示那些值与 %ter% 匹配的复选框（意味着在任何地方都有短语“ter”）。使用 jquery 实现这一目标的最佳方法是什么？我很抱歉，因为我对 jquery 很陌生。

```
<input type="checkbox" name="chk" id="chk1" value="casual">casual
<input type="checkbox" name="chk" id="chk2" value="intermediate">intermediate
<input type="checkbox" name="chk" id="chk3" value="hunter">hunter
<input type="checkbox" name="chk" id="chk4" value="forest">forest
<input type="checkbox" name="chk" id="chk5" value="term">extreme
<input type="checkbox" name="chk" id="chk6" value="river">river
<input type="checkbox" name="chk" id="chk7" value="beach">beach
<input type="text" id="chkfilter"> 
```

所以，每当我在文本框中写“ter”时，复选框 2,3 和 5 应该是可见的，其他的应该被隐藏/消失。怎么做？对每个单独的项目使用 div？另外，如何使用 jquery 进行搜索以匹配 %ter%

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T17:28:00.690

当您在文本框中键入内容时，请检查复选框以查看字符串是否存在于 indexOf 值中，并根据该值设置显示属性（我使用了块，但内联对于复选框可能是正确的）：

```
$('#chkfilter').on('keyup', function() {
    var query = this.value;

    $('[id^="chk"]').each(function(i, elem) {
          if (elem.value.indexOf(query) != -1) {
              elem.style.display = 'block';
          }else{
              elem.style.display = 'none';
          }
    });
}); 
```

复选框后的文本不是复选框的一部分，也不会被隐藏，为此您可能应该将其包装在标签中并执行类似[**JSBIN**](http://jsbin.com/umeses/1/edit)的操作？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T17:34:05.797

您可以`value`使用 jQuery“属性包含选择器”进行过滤，然后隐藏或禁用复选框。关于标签 - 有很多方法可以做到这一点。将整个内容包装到 div 中并`.parent()`在过滤后的复选框上使用以隐藏整个内容，或者将标签文本包装到`<label>`具有相应 id 的 a 中以在之后隐藏它。

查看 jQuery API 文档：[jQUery API - Attribute Contains Selector](http://api.jquery.com/attribute-contains-selector/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-06T12:14:09.257

```
$(":checkbox").each(function () {
    $(this).add(this.nextSibling)
        .add(this.nextSibling.nextSibling)
        .wrapAll("<label class='country'></label>")
})
$("#text").keyup(function () {
    var re = new RegExp($(this).val(), "i")
    $('.country').each(function () {
        var text = $(this).text(),
            matches = !! text.match(re);
        $(this).toggle(matches)
    })
}) 
```

我使用此解决方案使用文本框值过滤复选框名称

# apache-flex - Flex 和 Java Servlet：“通道安全错误”

> ID：14174324
> 
> 赞同：1
> 
> 时间：2013-01-05T17:20:20.653
> 
> 标签：apache-flex, servlets

问题：

无法从 Flex 向 java-servlet 发送 HTTP“GET”请求。

不断收到此错误消息：**[RPC Fault faultString="访问 url 的安全错误" faultCode="Channel.Security.Error" faultDetail="Destination: DefaultHTTP"]**

细节：

我已经使用 Flex 为客户端和 Java Web 应用程序（基于 servlet）为服务器端构建了一个国际象棋游戏。

我在我的 PC 上托管 flex-app（使用 HFS ~ HTTP 文件服务器，监听端口 80），并且 java-web-app 也在我的 PC 上运行（在 NetBeans 上使用 glass-fish 监听端口 8080）。

当我在本地运行 flex 应用程序时，从 - D://path-to/flex-app.html - 一切正常，但是，当我从 - 'http://domain-name/flex- 运行 flex 应用程序时app.html' - 我收到上面的错误，服务器上没有记录任何请求。

我试图将 crossdomain.xml 文件添加到服务器根文件夹，即使是最宽松的，也没有成功。

crossdomain.xml 文件（位于“http://localhost:8080/crossdomain.xml”）如下：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies="all" />  
    <allow-access-from domain="*" to-ports="*" secure="false"/>
    <allow-http-request-headers-from domain="*" headers="*"/> 
</cross-domain-policy> 
```

在 flex 声明部分我有这个 httpService：

```
 <s:HTTPService id="loginService"
                   url="http://localhost:8080/Chess/Login" 
                   fault="onFault(event)"
                   result="login_onResult(event)"
                   resultFormat="object"
                   showBusyCursor="true"/> 
```

感谢帮助。

# xcode - 使用嵌入式导航控制器 Xcode 将后退按钮添加到表视图

> ID：14174328
> 
> 赞同：0
> 
> 时间：2013-01-05T17:20:47.877
> 
> 标签：xcode

到目前为止，这是我的应用程序的流程。

带有矩形按钮（模态）的视图控制器（HOME）链接到 > 带有嵌入式导航控制器的表格视图控制器链接到 > 多个视图控制器，每个控制器上都有一个图像。

这项工作非常完美，但是......

我想在我的表视图控制器上有一个“后退”按钮，让我回到我的（HOME）视图控制器。

我对此很陌生，并试图找到相关信息并尝试了很多选项，但注意到似乎有效，虽然我可以在模拟器中看到一个按钮（并将 Modal 链接到我的（HOME）视图），但模拟器每次都会崩溃并出现此错误消息.....

* **2013-01-05 17:19:40.080 MASTER DETAIL POLAR TEST[10975:f803]-[HomeController setCharacterNumber:]：无法识别的选择器发送到实例 0x6894620 2013-01-05 17:19:40.084 MASTER DETAIL POLAR TEST[10975: f803]****由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[HomeController setCharacterNumber:]：无法识别的选择器发送到实例 0x6894620”* ***

 *请帮忙.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:31:52.433

最好将您的 HOME viewController 嵌入到 navigationController 中并成为 RootViewController。通过单击 rect 按钮，tableViewController 将出现。使用 navigationControllers 方法 – *pushViewController:animated:*或创建一个新的 segue 并选择“push”。

如果您不喜欢这种方式，则必须将 navigationBarButtonItem 添加到导航栏。将此按钮项链接到将消息*dismissViewControllerAnimated:completion:*发送到tableViewController 的操作。这应该有效。*

# php - Yii：向不同的模型提交一个值

> ID：14174329
> 
> 赞同：0
> 
> 时间：2013-01-05T17:20:48.767
> 
> 标签：php, yii

这是一个与我最近使用 Yii 框架的练习有关的新手问题。

我在数据库中有以下结构：

```
CREATE TABLE location(
      id INTEGER PRIMARY KEY NOT NULL,
      location TEXT);
CREATE TABLE parameter(
      id INTEGER PRIMARY KEY NOT NULL,
      name TEXT,
      value TEXT);
CREATE TABLE temperature(
      id INTEGER PRIMARY KEY NOT NULL,
      locationId INTEGER,
      value REAL NOT NULL,
      createDate DATETIME NOT NULL,
      FOREIGN KEY(locationId) REFERENCES location(id));
CREATE INDEX idx1_temperature ON temperature (createDate); 
```

我正在尝试创建一个视图，该视图既包含网格中的数据，又包含更改-table`location`中某个值的功能。`parameter`在实践中，除了可以更改`parameter.value`where之外，我还会列出网格中所有可能的位置`parameter.name="CURRENT_LOCATION"`。

到目前为止我得到的是：

`location/admin.php`生成视图：

```
...
<h2>Change current location</h2>
<?php echo $this->renderPartial('_para', array('model'=>Parameter::model()->find('name="current_location"'))); ?>

<h2>Modify locations</h2>
<?php $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'location-grid',
        'dataProvider'=>$model->search(),
        'columns'=>array(
            'location',
            array(
                    'class'=>'CButtonColumn',
            ),
    ),
));
... 
```

`location/_para.php`用于嵌入表单：

```
<?php
/* @var $this ParameterController */
/* @var $model Parameter */
/* @var $form CActiveForm */
?>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'parameter-form',
    'enableAjaxValidation'=>false,
)); ?>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
            <?php echo $form->labelEx($model,'value'); ?>
            <?php //echo $form->textField($model,'value'); ?>
            <?php echo $form->dropDownList($model,'value',CHtml::listData(Location::model()->findAll(), 'id', 'location')); ?>
            <?php echo $form->error($model,'value'); ?>
    </div>

    <div class="row buttons">
            <?php echo CHtml::submitButton('Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

所以，需要的是保存（=更新）一个给定的`parameter`行，但我似乎没有做对。到目前为止，我已经调试过，似乎提交按钮会导致位置控制器的 actionAdmin 函数被执行。如果我可以指示那里保存参数记录而不是位置，那对我来说很好。这是 LocationController.php 中的 actionAdmin 函数：

```
 public function actionAdmin()
    {

            $model=new Location('search');
            $model->unsetAttributes();  // clear any default values
            if(isset($_GET['Location']))
            {
                    $model->attributes=$_GET['Location'];
            }

            if(isset($_POST['Parameter']))
            {
                    $model->attributes=$_POST['Parameter'];
                    if($model->save())
                    {
                            $this->redirect(array('view','id'=>$model->id));
                    }
            }

            $this->render('admin',array(
                    'model'=>$model,
            ));
    } 
```

我看到很多关于多模型表单等的帖子，但我就是无法掌握这一点。很可能是我试图以一种完全错误的方式来实现这一点。所以，请按正确的方向打我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:15:43.417

好吧，我认为最好的办法是将更新参数的方法放在ParameterController中。这使得它更容易实现并且更干净一些。

为此，请将表单代码更改为：

您可能需要调整表单中的操作以使其正常工作，例如 /admin/parameter/update

```
<?php
/* @var $this ParameterController */
/* @var $model Parameter */
/* @var $form CActiveForm */
?>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'parameter-form',
    'enableAjaxValidation'=>false,
    // Check that the action method below is correct
    'action' => array('/parameter/update', 'id' => $model->id), 
)); ?>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
            <?php echo $form->labelEx($model,'value'); ?>
            <?php //echo $form->textField($model,'value'); ?>
            <?php echo $form->dropDownList($model,'value',CHtml::listData(Location::model()->findAll(), 'id', 'location')); ?>
            <?php echo $form->error($model,'value'); ?>
    </div>

    <div class="row buttons">
            <?php echo CHtml::submitButton('Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

如果您的 ParameterController 中有一个现有的更新方法，请查看它是否按原样工作。如果没有或者您没有更新方法，请尝试以下操作：

```
public function actionUpdate($id)
{
    $model = Parameter::model()->findByPk($id);
    if(isset($_POST['Parameter']))
    {
        $model->attributes=$_POST['Parameter'];
        if($model->update())
        {
            // Below redirects to the previous URL
            $this->redirect(Yii::app()->request->urlReferrer);
        }
    }
} 
```

我将 $model->save() 更改为 $model->update() 因为这不会调用验证规则并使其返回 false。如果出于某种原因想要验证，则需要更改规则，以便仅在创建新参数时才需要名称和值，如下所示：

```
array('name, value', 'required', 'on' => 'create'), 
```

然后当您创建新参数时，您需要执行 $model = new Parameter('create');

# javascript - 谷歌图表不接受格式良好的数组

> ID：14174331
> 
> 赞同：0
> 
> 时间：2013-01-05T17:21:14.303
> 
> 标签：javascript, google-visualization

我正在使用 Google 图表 API 编写图表工具。为了更改构成图表的数据的时间跨度，我将一个 jquery 帖子发送到一个 jsp servlet，该 servlet 返回一个看起来类似于

```
Swedish#68#Pasta#4#Vegetarian#2#Seafood#2#Salad#1 
```

它存储在字符串数据中，然后拆分为一个二维数组，我用它来创建图表行。

```
 data.trim();
                var dataArray = data.split("#");  
                var catChartArray = new Array((dataArray.length/2));
                for (var i = 0; i < dataArray.length/2;i++)
                    {catChartArray[i]=new Array(1);}    
                var j =0;
                for (var i = 0; i<dataArray.length/2; i++){
                    catChartArray[i][0]= dataArray[j];
                    catChartArray[i][1]= dataArray[parseInt(j+1)];
                    j+=2;
                } 
```

然后我使用 addRows(catChartArray) 方法将它传递给 google.visualization.DataTable() 的一个实例。此时图表不会绘制，我不明白为什么。它在构建时就使用了这种类型，然后它工作正常。我对使用 Javascript 非常缺乏经验，所以我可能忽略了一些非常明显的东西。阵列的打印输出没有什么特别之处：

```
Swedish,68,Pasta,4,Vegetarian,2,Seafood,2,Salad,1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:19:01.073

知道了！有两件事造成了系统中的错误。

这当然不会产生错误：

```
catChartArray[i][1]= dataArray[parseInt(j+1)]; 
```

但应该是

```
catChartArray[i][1]= parseInt(dataArray[j+1]); 
```

servlet 还返回了许多必须破坏数组的空行。添加

```
 <%@page trimDirectiveWhitespaces="true"%> 
```

到我用于发布请求的 jsp 文件。

现在一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:37:59.233

您处理的数据如下所示：

```
[["Swedish", "68"], ["Pasta", "4"], ["Vegetarian", "2"],... 
```

不应该是这样的：

```
["Swedish", "Pasta", "Vegetarian"...
["68", "4", "2"... 
```

# php - 如何计算两个用户的相似度百分比？

> ID：14174332
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:21:16.393
> 
> 标签：php, percentage

我有一些关于两个共同用户的详细信息。我想知道如何获得两个用户的相似度百分比：UserA 和 UserB 有：`

5个共同的朋友

购买了 8 种常见产品

收到 3 个相同的样品

9个普通追随者

等等 这构成了 25 个公共属性的总和。

如何获得两个用户的百分比相似度，任何公式或方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:26:07.447

你试过`(number of products in common / number of products purchased) * 100`吗？这通常是您计算百分比的方式。将常见事物的数量加起来除以事物的总数。

如果用户 A 买了 10 件东西，用户 B 买了 20 件东西，A 中的 5 件与 B 中的 5 件相同，那么您将拥有：

```
((5 + 5) / (10 + 20)) * 100 = 33.3% similar 
```

# mercurial - 如何查看最近推送到存储库的更改

> ID：14174340
> 
> 赞同：1
> 
> 时间：2013-01-05T17:22:10.377
> 
> 标签：mercurial, patch

我的三个朋友正在编写游戏引擎，所以我们有大量的代码需要查看。有时我们中的一个人可能不小心修改了一段代码而忘记告诉另一个人，从而导致稍后在代码中出现一些混乱。

当对存储库进行新推送时，我如何查看专门对代码所做的更改？我喜欢使用 SVN 的开源项目补丁，它会向您展示您直接修改的内容并将其发送给将其实施到应用程序中的 mod。我将如何按照 hg 的方式做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:11:33.377

> 当对存储库进行新推送时，我如何查看专门对代码所做的更改？

该命令的`--patch`开关是`hg log`从命令行查看补丁的快捷方式。

如果要将补丁导出到文件，请使用该`hg export`命令。例如，使用：

```
hg export -r-2 -o file.patch 
```

您正在将倒数第二个提交保存到名为: 的文件`file.patch`中。您现在可以共享文件，任何人都可以通过以下方式导入补丁：

```
hg import file.patch 
```

`--no-commit`除非使用了开关，否则此命令还将创建一个与原始导出提交具有相同消息的提交。

# java - 在 JPanel 中创建 JLabel 时遇到问题

> ID：14174341
> 
> 赞同：0
> 
> 时间：2013-01-05T17:22:11.230
> 
> 标签：java, swing, jpanel, jlabel

我不明白为什么最后一部分没有添加到我的界面中。我尝试了不同的方法，但它们似乎都不起作用。我不能以这种方式将 1024 个标签添加到我的面板中。我做错了什么，还是有替代方法？能告诉我代码有什么问题吗？谢谢！

完整代码在这里：

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.border.TitledBorder;
import javax.swing.UIManager;
import javax.swing.JButton;
import javax.swing.JScrollPane;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;

import java.awt.Color;
import java.awt.Font;
import java.awt.GridLayout;
import javax.swing.border.LineBorder;

public class CacheGUI extends JFrame {
    private static final int LEN = 1024;
    private static final long serialVersionUID = 1L;
    private JTextField textField;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    CacheGUI frame = new CacheGUI();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public CacheGUI() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 700, 500);
        getContentPane().setLayout(null);

        JPanel panel = new JPanel();
        panel.setBorder(new TitledBorder(UIManager.getBorder("TitledBorder.border"), "Lista de referinte", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        panel.setBounds(6, 16, 124, 364);
        getContentPane().add(panel);
        panel.setLayout(null);

        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setBounds(6, 16, 108, 340);
        panel.add(scrollPane);

        JTextPane txtpnDasd = new JTextPane();
        txtpnDasd.setToolTipText("Lista curenta de adrese");
        txtpnDasd.setEnabled(false);
        txtpnDasd.setEditable(false);
        scrollPane.setViewportView(txtpnDasd);
        txtpnDasd.setText("<generate first>");

        JButton btnGenerate = new JButton("GENERATE");
        btnGenerate.setToolTipText("Incepe generarea listei de adrese.");
        btnGenerate.setBounds(6, 422, 124, 23);
        getContentPane().add(btnGenerate);

        JButton btnStart = new JButton("START");
        btnStart.setToolTipText("Ruleaza simularea");
        btnStart.setBounds(550, 422, 124, 23);
        getContentPane().add(btnStart);

        JLabel lblBlockSize = new JLabel("Block size:");
        lblBlockSize.setFont(new Font("Tahoma", Font.BOLD, 12));
        lblBlockSize.setBounds(6, 394, 85, 14);
        getContentPane().add(lblBlockSize);

        textField = new JTextField();
        textField.setToolTipText("");
        textField.setHorizontalAlignment(SwingConstants.CENTER);
        textField.setText("4");
        textField.setBounds(79, 391, 51, 20);
        getContentPane().add(textField);
        textField.setColumns(10);

        int blocksize = Integer.parseInt(textField.getText());
        int nrofblocks = LEN/blocksize;  // LEN is 1024 

        JPanel block_panel = new JPanel();
        block_panel.setBorder(new TitledBorder(null, "", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        block_panel.setBounds(140, 16, 534, 398);
        getContentPane().add(block_panel);
        block_panel.setLayout(new GridLayout(blocksize,nrofblocks,2,0));

        // THIS IS THE PART THAT DOES NOT ADD TO THE PANEL I CREATED BEFORE --->
        JLabel[] lbl=new JLabel[LEN]; 
        for(int i=0;i<LEN;i++)
        {
            lbl[i]=new JLabel("TEST");
            lbl[i].setBackground(Color.YELLOW);
            lbl[i].setBorder(new LineBorder(new Color(0, 0, 0), 1, true));
            block_panel.add(lbl[i]); // i want to create yellow blocks inside my panel as labels to modyfy the color afterwards
        }//<----
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:38:56.203

问题是您拥有的标签数量荒谬。他们在那里。

将块面板的边界设置为更大的值，减少 LEN 等，您会看到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:46:15.527

首先要做的事情是：您的标签不会有黄色背景色。默认情况下，JLabels 不是不透明的。将其设置为 true 将像以前一样显示黄色背景：

```
lbl[i].setOpaque(true); 
```

第二件事是您拥有的标签数量之多。将数字减少到 100 说，你会看到你的标签。

```
 for(int i=0;i<100;i++)
    {
        lbl[i]=new JLabel("TEST");
        lbl[i].setBackground(Color.YELLOW);
        lbl[i].setBorder(new LineBorder(new Color(0, 0, 0), 1, true));
        lbl[i].setOpaque(true);
        block_panel.add(lbl[i]);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T19:24:57.930

使用 JScrollPane，设置不透明，网格布局 1.rows，2.columns，为标签设置固定大小，使用 BorderFactory。

```
 JPanel block_panel = new JPanel();
    block_panel.setBorder(new TitledBorder(null, "", TitledBorder.LEADING,
            TitledBorder.TOP, null, null));
    block_panel.setBounds(140, 16, 534, 398);
    JScrollPane block_scrollpane = new JScrollPane(block_panel);
    block_scrollpane.setBounds(140, 16, 534, 398);
    getContentPane().add(block_scrollpane);
    //block_panel.setLayout(new GridLayout(blocksize, nrofblocks, 2, 0));
    block_panel.setLayout(new GridLayout(nrofblocks, blocksize, 2, 0));

    // THIS IS THE PART THAT DOES NOT ADD TO THE PANEL I CREATED BEFORE --->
    JLabel[] lbl = new JLabel[LEN];
    Dimension lblSize = new Dimension(85, 16);
    for (int i = 0; i < LEN; i++) {
        lbl[i] = new JLabel("TEST" + i);
        lbl[i].setOpaque(true);
        lbl[i].setBackground(Color.YELLOW);
        lbl[i].setBorder(BorderFactory.createLineBorder(Color.BLACK, 1, true));
        lbl[i].setPreferredSize(lblSize);
        lbl[i].setMinimumSize(lblSize);
        block_panel.add(lbl[i]); // i want to create yellow blocks
                   // inside my panel as labels to modyfy the color afterwards
    }//<---- 
```

# android - 在 Android 上使用 time(NULL)

> ID：14174346
> 
> 赞同：2
> 
> 时间：2013-01-05T17:23:02.173
> 
> 标签：android, android-ndk, posix, bionic

`time(NULL)`在 Android上使用是否有任何已知问题？

我尝试运行以下代码：

```
int32_t now1 = time(NULL);
int64_t now1_6 = (int64_t)time(NULL);
int32_t nt = (time_t)-1;
int64_t nt6 = (int64_t)-1; 
```

然后使用以下格式记录结果：

```
"Now1 is %d. Now1_6 is %lld. NT is %d. NT6 is %lld.\n", now1, now1_6, nt, nt6 
```

这是我得到的输出：

```
01-05 19:10:15.354: I/SMOS(11738): Now1 is 1533390320\. Now1_6 is 6585861276402981128\. NT is 0\. NT6 is 283493768396. 
```

还有其他问题，例如在不同的循环迭代中获得相同的时间值。

我在运行 Android 4.0.3 (API 15) 的虚拟设备和物理设备上都遇到了这些问题，两者都配置了正确的时间。上面的输出来自物理设备。

我被引导相信 Bionic 中的这个特定的 POSIX 函数存在问题，但我在网上或 Bionic 文档中都找不到任何参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:04:13.850

您正在尝试将 a`int64_t`转换为 a `long long`，它们在 Android 上可能不等效。如果要使用and打印`int64_t`值，请先将数字转换为，或使用正确的格式修饰符：`printf``%lld``long long`

```
printf("%lld", (long long)now1_6); 
```

或者

```
printf("%" PRId64, now1_6); 
```

对于`time(NULL)`给予虚假时间，请尝试使用`gettimeofday`：

```
struct timeval tm;
gettimeofday( &tm, NULL); 
```

# ruby-on-rails - Ruby - 异步邮件

> ID：14174347
> 
> 赞同：2
> 
> 时间：2013-01-05T17:23:01.940
> 
> 标签：ruby-on-rails, asynchronous, redis, actionmailer

我对 Ruby on Rails 很陌生，希望异步发送电子邮件以使我的应用程序响应更快。同步发送工作正常，将是我的替代方案。

我找到了一些站点并在我的 Gemfile 中定义了 gem 'resque_mailer'、'redis' 和 'resque' 并通过`bundle install`命令安装了它们。我的邮件看起来像：

```
class Contact < ActionMailer::Base 
include Resque::Mailer  

default from: "<private>"

  def contact(email, bandName, respondMail, message)
    @message = message
    @respondMail = respondMail
    @bandName = bandName

    mail(:to => email,
         :subject => "subject")
  end
end 
```

发送邮件的 Controller-Call 如下所示：

```
Contact.contact(band.email, band.name, params[:respondMail].to_s, params[:message].to_s).deliver 
```

如果我现在尝试异步发送邮件，我会收到以下由“联系人”调用引起的错误：

```
Timed out connecting to Redis on 127.0.0.1:6379 
```

不幸的是，我不知道如何解决这个问题。有人可以告诉我异步发送邮件必须采取哪些步骤吗？如果可能，不应该有额外的数据库列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:11:50.357

为了让 resque 和 resque_mailer 工作，你需要安装 redis。你可以在这里找到更多关于 redis 的信息：[http ://redis.io/download](http://redis.io/download)

如果您是 Rails 新手，那么所有外部工具和依赖项都可能会让人不知所措。如果您的应用程序没有极端负载，您应该考虑使用更简单的作业队列，例如[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)。它不依赖于进一步的外部服务，并使用您当前的数据库来存储作业。你唯一需要做的就是让工人保持清醒。

# c++ - SHBrowseForFolder 返回时如何重新获得焦点

> ID：14174350
> 
> 赞同：1
> 
> 时间：2013-01-05T17:23:04.800
> 
> 标签：c++, windows, winapi, windows-shell

我目前正在使用打开浏览文件夹窗口，但是当按下*取消*/*确定*`SHBrowseForFolder()`时如何将焦点返回到我的主窗口。我读到我应该在对话框关闭之前重新启用我的主窗口，但那到底在哪里？有什么想法吗？

 **```
void buttonPush(HWND hWnd) {
    EnableWindow(hWnd, FALSE);
    BROWSEINFO bi = { 0 };
    TCHAR szDir[MAX_PATH] = { 0 };
    LPITEMIDLIST pid = NULL;
    LPMALLOC pMalloc = NULL;

    if (SUCCEEDED(SHGetMalloc(&pMalloc)))
    {
        ZeroMemory(&bi,sizeof(bi));
        bi.hwndOwner = NULL;
        bi.pszDisplayName = NULL;
        bi.pidlRoot = NULL;
        bi.ulFlags = BIF_RETURNONLYFSDIRS | BIF_STATUSTEXT | BIF_USENEWUI;
        bi.lpfn = BrowseCallbackProc;

        pidl = SHBrowseForFolder(&bi); 
        if (pidl) 
        { 
            // Folder selected in dialog
            pMalloc->Free(pidl); 
        } 
        pMalloc->Release();
    }
    EnableWindow(hWnd, TRUE);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T17:43:17.397

而不是启用和禁用您的主窗口，只需设置`bi.hwndOwner = hWnd;`然后它将自动启用和禁用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T17:51:23.670

```
 EnableWindow(hWnd, false); 
```

这是错误的，因为你帮助太多了。当对话框关闭时，您的应用程序中没有任何窗口仍然可以接收焦点。您的 hWnd 仍处于禁用状态，直到稍后才会启用。因此，Windows 窗口管理器被迫寻找另一个窗口来获得焦点。那将是另一个应用程序的窗口。你的窗户不可避免地会消失在它后面。

删除 EnableWindow() 调用。这已经足够了，但是您可以告诉对话框有关您的窗口的信息，这样它就不必猜测它，如果您的窗口由于某种原因不是活动窗口，则很有用：

```
 bi.hwndOwner = hWnd; 
```**

# thor - 如何从 Thor 任务中将 gem 添加到组中？

> ID：14174359
> 
> 赞同：0
> 
> 时间：2013-01-05T17:23:51.593
> 
> 标签：thor

我正在执行 Thor 任务，我想将 gem 添加到我的 gem 文件中的资产组（见下文）。

gem_group 命令（从标准 Rails 应用程序模板中得知）在 Thor 任务中似乎不起作用（请参阅底部的错误）。

我怎样才能最好地从 Thor 任务中将 gem 添加到 gem 文件中的组中？

欢迎任何想法 - 谢谢。

```
class ThorBuild < Thor

  desc "add_gems", "Adds the gems I need"
  def add_gems
    puts "Running add_gems"

    gem 'mongoid', '~> 3.0.15'
    gem 'bson_ext'
    gem 'less-rails'
    gem 'devise'

    gem_group :assets do
      gem 'therubyracer', '= 0.10.0', :platforms => :ruby
      gem 'twitter-bootstrap-rails'
    end
  end

end 
```

输出看起来像这样......

```
Running add_gems
/home/ubuntu/sites/ThorBuild.thor:12:in `add_gems': undefined method `gem_group' for #<Thor::Sandbox::ThorBuild:0x000000007b5110> (NoMethodError)
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor.rb:275:in `dispatch'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/runner.rb:36:in `method_missing'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/task.rb:29:in `run'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/task.rb:126:in `run'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor.rb:275:in `dispatch'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/bin/thor:6:in `<top (required)>'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/thor:19:in `load'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/thor:19:in `<main>'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>' 
```

# html - 使用 Div onClick 提交表单

> ID：14174362
> 
> 赞同：10
> 
> 时间：2013-01-05T17:23:57.483
> 
> 标签：html, forms

我正在尝试使用 div 提交表单。这是HTML：

```
<form name="search-form" 
      id="search-form" 
      action="php.php" 
      class="form-search">

    <input style="color: black; background: rgba(255,255,255,0.5); padding: 15px; font-size: 18px;" 
           type="text" 
           name="search" 
           class="input-medium search-query">

        <div class="button1" onClick="document.forms["search-form"].submit();">
            <a href="#">
                <img  alt="" src="/img/buttons/icon1.png" />
            </a>
        </div>
    </form> 
```

单击 div 时表单不提交。有人可以指出问题吗？谢谢。我已经尝试了至少一个小时。

需要保留样式，`a href`但即使我删除它并只留下图标，提交也不起作用；`onclick`如果我将其应用于图像，它也不起作用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-05T17:31:53.617

`search-form`在单引号之间添加：

```
onClick="document.forms['search-form'].submit();" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T17:35:47.083

您不能只在引号中使用引号。使用单引号来修复：

```
<form name="search-form" id="search-form" action="php.php" class="form-search">
    <input style="color: black; background: rgba(255,255,255,0.5); padding: 15px; font-size: 18px;" type="text" name="search" class="input-medium search-query">
    <div class="button1" onClick="document.forms['search-form'].submit();">
        <a href="#">
            <img alt="" src="img/buttons/icon1.png" />
        </a>
    </div>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:32:29.437

它可能与错误没有任何关系（或者它可能是由于无效的 html 而导致的？），但是您应该在标签中添加一个结束`input`标签，然后在这里结束：

```
<input style="color: black; (... etc) " 
       type="text" 
       name="search" 
       class="input-medium search-query" /> 
```

# ios - 如何在 xcode 的 uitableviewcell 中单击按钮时添加事件

> ID：14174363
> 
> 赞同：0
> 
> 时间：2013-01-05T17:23:59.323
> 
> 标签：ios, xcode

我想在按钮上创建一个点击事件，

此事件应为相应的文本字段获取文本，并将打印作为前一个单元格的标签。

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

 static NSString *cellidentifier=@"cellidentifier";

 UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellidentifier];

if(cell==nil)
{ 
    cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault                                                          reuseIdentifier:cellidentifier]autorelease];

 }

if((indexPath.row%2)==0)
{
    UILabel* lblnames=[[UILabel alloc]initWithFrame:CGRectMake(5,5 ,170 ,25)];
    [lblnames setText:[listoffriends objectAtIndex:indexPath.row]];
    [lblnames setTag:indexPath.row];
    cell.contentView.backgroundColor=[UIColor purpleColor];
    [cell.contentView addSubview:lblnames]; 
}     
else
{     
    UITextField*  txtn=[[UITextField alloc]initWithFrame:CGRectMake(5, 5, 150, 25)];        
    txtn.delegate=self;
    [txtn setTag:indexPath.row];
    UIButton*btnclkd=[[UIButton buttonWithType:UIButtonTypeRoundedRect]retain];
    btnclkd.frame=CGRectMake(200, 5, 70, 25);
    [btnclkd setTag:indexPath.row];
    [btnclkd setTitle:@"OK" forState:UIControlStateNormal] ;
    [btnclkd addTarget:self action:@selector(btnok:)forControlEvents:UIControlEventTouchUpInside];
    [cell.contentView addSubview:btnclkd];
    cell.contentView.backgroundColor=[UIColor lightGrayColor];
    [cell.contentView addSubview:txtn];   
}
return  cell; 
}

-(void)btnok:(id)sender
{ 
int tag=([sender tag]);
NSLog(@"%d",tag);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:38:26.797

这可能就是您要调用的内容：

```
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths 
              withRowAnimation:(UITableViewRowAnimation)animation 
```

在[UITableView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)上，您需要要求重新加载一行、部分或整个表，以便修改可以反映在屏幕上。

# python - 使用 os.execlp 时，为什么 `python` 需要 `python` 作为 argv[0]

> ID：14174366
> 
> 赞同：10
> 
> 时间：2013-01-05T17:24:17.217
> 
> 标签：python, linux, unix, operating-system

代码是这样的：

```
os.execlp('python', 'python', 'child.py', #other args#)  # this works

os.execlp('python', 'child.py', #other args#)  # this doesn't work 
```

我读了这个问题：[execlp() in python](https://stackoverflow.com/questions/13439938/execlp-in-python)

但我还是很困惑。答案说：

> 第一个参数是要执行的程序（在 PATH 上找到）。其余的是程序的 sys.argv 参数。

但是，如果我运行：`python child.py 1 2 3`并且`sys.argv`这个过程的 将是`["child.py", "1", "2", "3"]`，其中`python`不存在。那我为什么要添加`python`作为的第二个参数`os.execlp`呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T17:30:06.070

执行 python 时，它会`sys.argv`为您创建。该列表中的值*基于*操作系统传递给它的参数，但它*忽略了*该列表中的`sys.executable`值。

换句话说，当 Python 被调用时，它设置`sys.argv`为*除了它自己的可执行文件之外的*所有内容。

当您通过 调用*新*的可执行文件时`os.execlp()`，您仍然需要在其中包含 Python，因为这是操作系统将运行的可执行文件。无论您以后找到什么，您通行证的前两个值`os.execlp()`仍然是必需`sys.argv`的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-31T19:45:47.670

第二个python是python的一个名字，它可以是任何字符串，但它必须在那里。

请参阅[http://docs.python.org/3/library/os.html?highlight=os.exec#process-management](http://docs.python.org/3/library/os.html?highlight=os.exec#process-management)的**第二段**：

> 各种 exec* 函数获取加载到进程中的新程序的参数列表。在每种情况下，这些参数中的第一个作为它自己的名称而不是作为用户可能在命令行上键入的参数传递给新程序。对于 C 程序员，这是传递给程序 main() 的 argv[0]。例如， os.execv('/bin/echo', ['foo', 'bar']) 只会在标准输出上打印 bar；foo 似乎会被忽略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-30T17:32:14.713

我意识到这是很久以前回答的，而且答案基本上是正确的，但是在措辞方式和我想解决的答案的评论中，有一些事情是误导性的。

首先，我认为更清楚地说明正在发生的事情的方法是强调区别在于操作系统传递给进程的 Unix argv 列表和 python sys.argv 之间的区别。python sys.argv 是删除了第一个元素（命令名称）的 Unix argv 列表。

各种 os.exec* 命令使用它们的第一个参数作为要调用的实际可执行文件，该行的其余部分是 Unix argv 列表，这意味着传递给 execlp 的第二个参数将被可执行文件解释为命令行名称它被调用为。

这将我们带到了评论的问题上。ls 示例 os.execlp('ls','.') “有效”的原因并不是因为 ls 做了任何特殊的事情来检测它，但调用的参数太少了。此示例代码以 unix argv 列表为 ['.'] 的方式启动 'ls' 可执行文件。这只是意味着 ls 可执行文件在被告知（奇怪地）它被调用为“。”的同时启动，并且没有其他命令行参数。ls 在没有其他命令行参数的情况下运行时会做什么：它打印当前目录的内容，或者当调用 os.execlp('ls', '.') 时错误地认为他们在做什么。

您可以通过尝试 os.execlp('ls', '/some/non-existant/path') 来看到这个示例确实没有“工作”。这也会打印出当前工作目录的内容，不会被误认为是“工作”。

# python - 在函数中导入导入 - Python 2.6

> ID：14174368
> 
> 赞同：1
> 
> 时间：2013-01-05T17:24:25.620
> 
> 标签：python, python-2.6

我有两个文件，`SysDump.py`并且`libApi.py`在同一个文件夹中。在`SysDump`我做：

```
from libApi._SysDump import * 
```

在`libApi`我有：

```
def _SysDump():
    import cPickle as _cPickle
    import math as _math
    from zipfile import ZipFile as _ZipFile
    import re as _re 
```

但是我得到了错误：

```
from libApi._SysDump import *
ImportError: No module named _SysDump 
```

我习惯于`VS2012+PTVS`单步执行代码，执行跟踪`def _SysDump()`在`libApi`我单步执行时进入，但没有进入。问题是我如何才能在 Python 2.6 中完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:41:52.963

```
from libApi._SysDump import * 
```

在编写此代码时，Python 会在其中查找一个包`libApi`和一个名为`_SysDump`. 一个包相当于一个文件夹，一个模块相当于一个文件。根据您的解释，这不是您的情况。您有一个`libApi`具有功能的模块`_SysDump`。所以如果有的话，你可以这样做：

```
from libApi import _SysDump 
```

因此，您将获得对该`_SysDump`函数的引用。请注意，运行该函数不会为您提供对您尝试导入的所有模块的引用。在函数内部，模块将被导入并分配给局部变量。函数结束后，那些引用就消失了。

如果您想让某个模块处理所有导入，您可以创建一个执行这些导入的文件并从该模块导入所有内容：

```
# imports.py
import cPickle as _cPickle
import math as _math
from zipfile import ZipFile as _ZipFile
import re as _re 
```

接着：

```
from imports import * 
```

# android - 安卓应用的用户设置活动

> ID：14174370
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:24:45.870
> 
> 标签：android, android-intent, android-location, android-networking

我想创建一个简单的应用程序来上传我的位置。我有两个活动，在第一个活动中，用户可以输入参数 url 以使用编辑框上传，如果用户希望上传位置保存首选项按钮和开始按钮以获取位置活动，则为复选框.我尝试这个但没有工作...我如何调用我的函数启动和保存？任何帮助？调试时我有错误...点击按钮后

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SharedPreferences preferences = getSharedPreferences("gpstracker" , MODE_PRIVATE);

    String strValue = preferences.getString("Url",strValued);

      edittxtUrl = (EditText)findViewById(R.id.txtUrl);
      edittxtUrl.setText(strValue);

     Button buttonStart = (Button)findViewById(R.id.buttonStart);        
     buttonStart.setOnClickListener(startListener); 

     Button buttonSave = (Button)findViewById(R.id.buttonSave);        
     buttonSave.setOnClickListener(saveListener); 

}

private OnClickListener startListener = new OnClickListener() {
    public void onClick(View v) {

        Start();
    }
};

 private OnClickListener saveListener = new OnClickListener() {
    public void onClick(View v) {

        Save();
    }
};

public void Save() {

 SharedPreferences preferences = getSharedPreferences("gpstracker" , MODE_PRIVATE);
  SharedPreferences.Editor editor = preferences.edit(); 

   edittxtUrl = (EditText)findViewById(R.id.txtUrl);
  String strUrl = edittxtUrl.getText().toString();

  CheckBox chkTandC = (CheckBox)findViewById(R.id.chkTandC);
  boolean blnTandC = chkTandC.isChecked();

  editor.putString("Url", strUrl); // value to store

  editor.putBoolean("TandC", blnTandC); // value to store    
  // Commit to storage
  editor.commit();    

}
public void Start() {

 startActivity(new Intent(this, LocTracker.class));
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:18:00.663

如果没有您的日志猫，很难说出您的问题是什么，但我认为正在发生的事情是您正在将一个空视图传递给 start 方法，这是一个问题，因为您正在尝试获取上下文。实际上你写的是

`null.getContext()`

这是行不通的。您可以通过替换来解决此`view.getContext()`问题`getApplicationContext()`

# python - 如何组合多个 django 查询集聚合和过滤器

> ID：14174371
> 
> 赞同：1
> 
> 时间：2013-01-05T17:24:49.223
> 
> 标签：python, database, django, aggregate

我有以下问题：

```
class species(models.Model):
  pass

class question(models.Model):
  species = models.ForeignKey(species)

class answer(models.Model):
  question = models.ForeignKey(question) 
```

现在我想检索一个包含**任何**没有**任何**答案的问题的物种查询集。

我的意思是我可以通过以下方式获得所有有疑问的物种：

```
sp = species.objects.annotate(num_questions=Count('question')).filter(
    num_questions__gt=0) 
```

我也可以使用以下方法获取所有没有答案的问题：

```
qs = question.objects.annotate(num_answers=Count('answer')).filter(
    num_answers=0) 
```

但是我如何将这两件事结合在一起呢？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:28:46.337

您可以像这样菊花链注释：

```
sp = species.objects.annotate(num_questions=Count('question')).annotate(
          num_answers=Count('answer')).filter(num_questions__gt=0, num_answers=0) 
```

# javascript - JavaScript / YouTube 和 vimeo API - 协调日期格式和排序

> ID：14174372
> 
> 赞同：0
> 
> 时间：2013-01-05T17:25:03.767
> 
> 标签：javascript, jquery, datetime, youtube-api, vimeo

我正在构建一个网页，它从 YouTube 和 Vimeo 中提取视频，为它们创建缩略图，然后按日期对缩略图进行排序。我目前正在查询 vVimeo 专辑[API 端点](http://developer.vimeo.com/apis/simple#album-response-example)和[YouTube 数据](http://gdata.youtube.com/feeds/api/videos?q=FcY3QHLsSnw&max-results=1&v=2&alt=jsonc)API——它们都以稍微不同的方式返回视频的日期。

> YouTube 日期：2012-12-20T08:00:40.000Z
> 
> 日期：2013-01-02 13:33:51

我的问题是，如何将这两种不同的格式转换为单一格式，然后可以使用 JavaScript / jQuery 进行排序？我假设如果我设法去掉破折号、空格和冒号，删除 YouTube 日期中的“t”和“z”，我将有一个可以排序的实际数字 - 但它看起来有点笨拙，我希望有更好的方法来格式化这些。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:57:43.283

我会将日期转换为 Javascript Date 对象，然后从实例中 getTime() 对其进行排序。

我们举个例子：

```
var dates = [];
dates.push(new Date('2013-01-02 13:33:51'));
dates.push(new Date('2012-12-20T08:00:40.000Z')); 
```

现在您有一个包含 2 个要排序的日期的数组。我们开始做吧！

```
function sortByDate(a, b) {
    return a.getTime() - b.getTime();
}

dates.sort(sortByDate); 
```

如果你想要一个后代排序，只需反转 a 和 b：

```
function sortByDate(a, b) {
    return b.getTime() - a.getTime();
} 
```

在您可以检查您的数组已排序后，执行`console.log(dates)`.

所以对于这个问题的答案，你只需要在一个 Date 对象中转换日期字符串，然后你就可以比较排序。

Internet Explorer 出现问题，请检查：

*   [IE nan、Firefox 和 Chrome 中的 Javascript 日期正常](https://stackoverflow.com/questions/2182246/javascript-dates-in-ie-nan-firefox-chrome-ok)
*   [IE 7 中 Javascript 日期函数的问题返回 NaN](https://stackoverflow.com/questions/3243546/problem-with-javascript-date-function-in-ie-7-returns-nan)

**更新：**

但是，如果您打算拥有任何浏览器兼容性，您可以使用高级浏览器日期转换器，例如这个项目：[JS Date Format](https://github.com/gartz/js-date-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:27:38.053

只需将日期解析为自 1970 年 1 月 1 日以来的毫秒数。这就是 JavaScript 使用的。

# cakephp - 如何在 CakePHP 中克隆模型

> ID：14174374
> 
> 赞同：0
> 
> 时间：2013-01-05T17:25:37.430
> 
> 标签：cakephp, model, cakephp-1.3

我有一些模型类别，我需要克隆。我知道，我可以通过复制已存在的内容来做到这一点，取消设置其 id 属性并保存它。但如果你的模型有一些 hasMany 关联，这似乎不是一个好方法。然后您需要对模型执行此类操作，保存它，然后对所有关联执行相同的操作并保存它们。

我是否需要在模型中定义方法然后调用它？

我可以像对象而不是数组那样获得模型吗？

有没有办法让它像这样工作：

```
$category = $this->Category->find("first", array(
    'conditions' => array('categoryID' => $categoryID),
    'contain' => array('Connected')
));

$newCat = clone $category; 

$this->Category->save($newCat); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T13:36:06.947

在您的代码中，例如。你似乎假设`$category`变量是一个对象，而实际上它是一个数组。所以没有克隆的问题。Cake 模型不像活动记录实例。只是消费和生产数组。

详细说明..要实现您需要的内容，您必须遍历`$category`数组中的所有记录并取消设置主键字段（通常是 id），然后您可以将该数组传递给 Category->saveAll()

# javascript - 如何从控制台访问控件

> ID：14174383
> 
> 赞同：4
> 
> 时间：2013-01-05T17:26:09.833
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm-online, dynamics-crm-2013

我试图从控制台执行以下命令。

```
var subject = Xrm.Page.ui.controls.get("subject"); 
```

这就是我在插入 CRM 的网络资源中使用的确切语法。但是，我只收到一条错误消息，说“无法获取未定义或空引用的属性'控件'”。

我明白这个信息。我想知道的是两方面的。

1.  控制台 ( `F12`) 使用什么语法来引用屏幕上的内容？
2.  为什么它不像我那样工作？*ui*是从哪里来的？

我已经检查过我可以同时引用*Xrm*和*Crm.Page*但显然*ui*为*null*（当我打印出*Page*的内容但设置为*null*时它已列出）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-28T17:11:51.630

我知道这是一个有点旧的线程，但是如果你在从控制台执行命令时仍然收到“对象不支持属性..”错误，IE F12; 尝试从框架中调用它，即

```
frames[0].Xrm.Page.getAttribute("controlId").getValue(); 
```

在 CRM 2013 中有所不同

```
frames[1].Xrm.Page 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-28T04:07:06.660

在不同的浏览器中检测帧有点困难，所以这个小 javascript 可以帮助你：

```
for(var i=0;i<5;i++) //loop through 0 to 4
    if(frames[i].Xrm.Page.ui != undefined) //check if undefined    
    {
        Xrm = frames[i].Xrm;  //assign Xrm
        console.info("~: Xrm updated with frame " + i + " :~"); //show info
        break; //breakout the loop
    } 
```

**它能做什么 ？**

> 它基本上做的是循环 0-5 以找到 `Xrm.Page.ui`不是的帧`undefined`，一旦它得到它，它就会将它分配给 Xrm 并打破循环。

**如何使用 ？**

> 要使用它，只需在每个会话中复制/粘贴并在浏览器控制台中运行一次，然后您可以从浏览器控制台运行/测试所有**Xrm**代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T23:09:03.493

这对我有用`Xrm.Page.getControl("controlId")`。这只是您已经拥有的东西的捷径...[不能禁用设置为只读保护灰色输出等字段](https://stackoverflow.com/questions/14072900/cant-disable-set-to-read-only-protect-gray-out-etc-a-field/14073299#14073299)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T19:46:10.667

除了@Daryl 所说的，我可以补充一点，我使用不同的语法。出于某种原因，我也不让他工作。可能与不同的浏览器版本或其他东西有关。相反，如果您仍然无法使其工作，请尝试执行此操作（尽管我必须承认他的更短=更好）。

```
Xrm.Page.getAttribute("lastname").getValue(); 
```

*姓氏*部分在一分钟前在创建实体*Contact*实例时进行了测试。*我只是在onchange*执行的脚本中放置了一个断点，在断点时，我将上面的命令输入到控制台。

如果这两种方法都不适合您，那么您的 CRM 或浏览器就会出现一些奇怪的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-05T20:57:55.210

有些人需要此信息的一个原因是访问他们自己的代码。如果您需要从控制台访问自己的方法，那么在 2011 年，您的 javascript 中的任何全局方法（或命名空间）也在 forms[0] 中。显然，仅从命名的角度来看，这是一个坏主意。在表单 v6+ 中，任何全局对象或函数都位于 frames[0] 内的名为 customScriptsFrame 的对象中（或者可能是找到 Xrm 的任何帧）。

`frames[0].customScriptsFrame.myFunctionName();`

# android - scrollview 无用显示

> ID：14174386
> 
> 赞同：0
> 
> 时间：2013-01-05T17:26:33.047
> 
> 标签：android, scrollview, android-resources

我在我的 android 应用程序中编写了这段代码，但它在滚动视图下显示警告，即“这个滚动视图或表格行可能没用”。由于这个资源变量'R'没有在java文件中被检测到。

```
 <?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/TableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/tableRow0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/queryEditText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:ems="10"
            android:hint="@string/queryPrompt"
            android:imeOptions="actionNext"
            android:inputType="text" >

            <requestFocus />
        </EditText>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/tagEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/tagPrompt"
            android:imeOptions="actionDone"
            android:inputType="text" />

        <Button
            android:id="@+id/saveButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/save" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@color/light_orange" >

        <TextView
            android:id="@+id/taggedSearchesTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/taggedSearches"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@android:color/black" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@color/light_orange" >

        <ScrollView
            android:id="@+id/queryScrollView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_span="2"
            android:padding="5dp" >

            <TableLayout
                android:id="@+id/queryTableLayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:stretchColumns="*" >

            </TableLayout>
        </ScrollView>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/clearTagsButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            android:layout_span="2"
            android:text="@string/clearTags" />
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:29:17.103

我认为它显示为（可能）没用，因为您将 TableLayout 的高度设置为“match_parent”，这永远不会给 SrollView 任何实际滚动的东西。

此外，警告不应阻止生成`R`– 尝试清理您的项目（“项目” - 清理...”）或“修复 Projekt 属性”（在“Android 工具”子菜单中项目的上下文菜单中）。

# c - 编写 C 套接字 readline() 函数

> ID：14174388
> 
> 赞同：1
> 
> 时间：2013-01-05T17:26:51.173
> 
> 标签：c, sockets

我正在用 C 语言编写一个可移植的应用程序，它应该可以在 mac 和 windows 上运行，我正在编写的套接字代码是使用 windows 上的 POSIX 套接字 Winsock api 具有类似的功能。

服务器是用java编写的，这是一个客户端应用程序，它连接到服务器然后进行通信，

我需要编写一个 readline 函数，就像我们在 C# 或 Java 中读取由换行符终止的行一样。

我目前正在使用以下功能，但我认为这不是非常有效的方法，因为我正在逐字阅读

```
 //return number of bytes read or -1 on error
int readline(SOCKET s, char* pResponse)
{
    char c = '0';
    int status = 0;
    int i = 0;

    while(true)
    {
        status = recv(s,&c, 1,0);

        if(status == SOCKET_ERROR)
        {
            //socket error
            return -1;
        }
        else if(status == 0)
        {
            //closed ?
            return -1;
        }
        else if(status > 0)
        {
            pResponse[i] = c;

            i++;

            if(c == '\n' || c == '\r\n')
            {
                break;
            }
        }
    }
    return i;
} 
```

发送方/服务器将只发送这一行并等待来自客户端的响应，因此我们可以假设读取整个套接字数据是可以的

那么我可以写这个比这个更好吗？逐字符读取是性能问题吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:34:22.720

是的，你可以做得更好。Readline 应该从套接字读取大量数据，如果在第一个 '\n' 之后有任何数据，它应该将该数据留在某个缓冲区中以备后用。这称为“缓冲”，需要扎实的指针和数组知识。

您的套接字库可能已经在为您缓冲，在这种情况下您不需要这样做，但可能不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:48:00.800

当缓冲区中的最后一个字符是 '\r' 而它之前的字符是 '\n' 时，你应该中断。

如果要将缓冲区的内容视为 ac 字符串，则在返回之前将 '\r' 替换为 '\0'。

如果您正在阅读的文件是 dos 文本文件，并且 \r\n 表明它是，请考虑这种情况，文件中的最后一行可能有也可能没有 \r\n。这是您可能会遇到的情况。

# c# - 我有一个系统任务托盘应用程序 - 我可以关闭主窗体而不仅仅是隐藏它吗？

> ID：14174390
> 
> 赞同：1
> 
> 时间：2013-01-05T17:27:01.597
> 
> 标签：c#, winforms, memory-management, system-tray

我有一个具有主窗体和系统任务托盘图标的应用程序。在主窗体的设计器中，我将`TrayIcon`控件拖到窗体上，所以它是主窗体的子窗体。

此时，当用户按下主窗体上的关闭按钮时，它实际上只是隐藏了它，以便应用程序不会终止，除非用户右键单击 TrayIcon 并单击退出。但是，主窗体有很多控件和资源，当主窗体被隐藏时，它仍然为这些资源占用内存。我的目标是实际处理表单，以便它在不使用时不会占用该内存。

除非我弄错了，当主窗体被隐藏时，它不再占用该内存，但我认为情况并非如此。我不是内存方面的专家，我什至可能完全误解了内存管理的工作原理，因此这个问题是无效的。

无论如何，如果我是正确的，当主窗体只被隐藏时，它仍然占用可以通过完全关闭窗体来释放的内存，有没有办法让我在不终止应用程序的情况下真正关闭主窗体？如果是这样，我需要在类中而不是在主窗体的类中创建`TrayIcon`with 代码，对吗？`Program`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:44:25.400

不，这当然没有必要。*设计者的便利性鼓励*了它，但您可以轻松创建仅按需创建窗口的应用程序。您将不得不编写代码。它不需要一个 heckofalot，有一个具有基本功能的示例应用程序。编辑 Program.cs 文件并使其看起来与此类似（需要图标，我将其称为“SampleIcon”）：

```
static class Program {
    [STAThread]
    static void Main() {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        var cms = new ContextMenuStrip();
        cms.Items.Add("Show", null, ShowForm);
        cms.Items.Add("Exit", null, ExitProgram);
        var ni = new NotifyIcon();
        ni.Icon = Properties.Resources.SampleIcon;
        ni.ContextMenuStrip = cms;
        ni.Visible = true;
        Application.Run();
        ni.Dispose();
    }

    private static void ShowForm(object sender, EventArgs e) {
        // Ensure the window acts like a singleton
        if (MainWindow == null) {
            MainWindow = new Form1();
            MainWindow.FormClosed += delegate { MainWindow = null; };
            MainWindow.Show();
        }
        else {
            MainWindow.WindowState = FormWindowState.Normal;
            MainWindow.BringToFront();
        }
    }

    private static void ExitProgram(object sender, EventArgs e) {
        Application.ExitThread();
    }

    private static Form MainWindow;
} 
```

# mongodb - MongoDB 查询在集合中找不到文档

> ID：14174391
> 
> 赞同：2
> 
> 时间：2013-01-05T17:27:03.413
> 
> 标签：mongodb, scala, salat, nosql

我的查询在我的 MongoDB 集合中找不到文档

这是数据库中的示例对象（注意 position.x 和 position.y 在 Salat 中是 Longs）

```
{
  "_id": ObjectId("50e85039e4b0f225b98b8b34"),
  "worldSlug": "test",
  "position": {
    "x": {
      "floatApprox": 3
    },
    "y": {
      "floatApprox": 3
    }
  },
  "type": "village",
  "owner": "mati",
  "health": {
    "got": 500,
    "total": 500
  }
} 
```

这是我的查询

```
{
  "worldSlug": "test",
  "position": {
    "x": {
     "$gt": -31,
     "$lt": 29
    },
    "y": {
      "$gt": -27,
      "$lt": 33
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:41:09.550

您需要使用[点符号](http://docs.mongodb.org/manual/core/document/#dot-notation)来查询嵌入字段。改用这样的查询对象：

```
{
  "worldSlug": "test",
  "position.x": {
     "$gt": -31,
     "$lt": 29
  },
  "position.y": {
      "$gt": -27,
      "$lt": 33
  }
} 
```

# javascript - 如何使用 AngularJS 更改 url 中的参数？

> ID：14174394
> 
> 赞同：12
> 
> 时间：2013-01-05T17:27:23.653
> 
> 标签：javascript, angularjs

我想通过在输入字段中提示来动态更改我的 angularjs 应用程序中的 url。

例如

1.  我坚持： `http://localhost/test/year/2012`
2.  我将通过调用我的 yearIsChanged 函数的年份到 2013 年的输入字段进行更改，而不是 url 应该更改为 `http://localhost/test/year/2013`
3.  但是使用我当前的配置，网址更改为 `http://localhost/test/year/2012/?year=2013`

我的模块配置。

```
var module = angular.module('exampleApp').
config(['$routeProvider', function ($routeProvider) {
    $routeProvider.
        when('/test/year/:year', {templateUrl: 'partials/test.html', controller: OverviewCtrl, reloadOnSearch: false}).
        otherwise({redirectTo: '/'});
}]); 
```

控制器动作：

```
 function OverviewCtrl($scope,$routeParams, $location) {
      $scope.yearIsChanged = function () {
        $location.search('year', $scope.year);
    }   
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T17:34:42.827

`$location.search`将创建一个像这样的 url：

```
http://localhost/test/year/2012?year=2013 
```

这不是你想要的。您需要使用`$location.url()`：

```
function OverviewCtrl($scope,$routeParams, $location) {
      $scope.yearIsChanged = function () {
        $location.url('/test/year/' + $scope.year);
    }   
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-04T08:02:41.053

您应该注意到在您的路线中：

“当（'/测试/年/ **：年**'”

**粗体**字，是一个routeParam **，**不是 **搜索**文件。

 ****所以如果你想改变你的路线，你应该使用这个：

```
 function OverviewCtrl($scope,$routeParams, $location) {
      $scope.yearIsChanged = function () {
       $location.path('/test/year/'+$scope.year)
     // .path() will set(or get) your routeParams 
     // .search() will set(or get) your seach fields like your error
     }   
   } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-05T18:29:54.870

实际上，如果您使用“搜索”，那么 $location 服务将更改 URL 的“搜索”部分，请参阅[URL 规范](http://www.w3.org/Addressing/URL/url-spec.txt)。所以 AngularJS 会检测到路由不会被改变并且有可能不重新加载控制器（`reloadOnSearch:false`）。

但是使用 .url 或 .path 方法可以更改整个 URL，但是 AngularJS 路由器无法检测到它是否可以重用控制器。所以唯一的选择是将路由表应用到新的 url 并重新初始化路由。

要在不重新加载控制器的情况下实现您的目标（特定网址，如 /year/2012），您可以：

1.  重写 ngView 指令（以及可能对 AngularJS 中的默认路由进行一些更改）并尝试重用范围。这听起来像是相当大的变化。

2.  不要使用默认的 AngularJS 路由并自己实现所需的行为。

这是说明第二个选项的[**示例 Plunker**](http://plnkr.co/edit/dzcM4pKbk7Y28i3pKNXL?p=preview)（按预览窗格中的蓝色小按钮以查看 URL 如何更改，并检查上一个/下一个浏览器的按钮是否不会重新加载页面/控制器）。****

# python - python中的这个错误信息是什么意思？

> ID：14174395
> 
> 赞同：2
> 
> 时间：2013-01-05T17:27:30.803
> 
> 标签：python

我正在 python 上制作一个刽子手游戏，当我尝试运行它时，会出现此错误消息。如果有人能告诉我这意味着什么，我将不胜感激。

```
Traceback (most recent call last):
  File "D:\Computing\Unit 3\Hangman\hangmanv2.py", line 200, in <module>
    hangmangame()
  File "D:\Computing\Unit 3\Hangman\hangmanv2.py", line 195, in hangmangame
    newwords()
  File "D:\Computing\Unit 3\Hangman\hangmanv2.py", line 187, in newwords
    hangmangame()
  File "D:\Computing\Unit 3\Hangman\hangmanv2.py", line 158, in hangmangame
    guessletter()
  File "D:\Computing\Unit 3\Hangman\hangmanv2.py", line 136, in guessletter
    print(hangmanpics[0])
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T17:29:39.267

该错误意味着（零）索引`hangmanpics[0]`超出范围。换句话说，`hangmanpics`是一个空列表。

尝试打印出来验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T17:30:05.953

这意味着您的列表`hangmanpics`是空的。

如果`hangmanpics[0]`给你一个`IndexError`，那么这意味着在第 0^个索引处不存在任何元素，这是第一个索引，这意味着你的列表是空的。

# php - Simplexml_load_file 空数组

> ID：14174397
> 
> 赞同：0
> 
> 时间：2013-01-05T17:27:33.490
> 
> 标签：php, simplexml, wikipedia-api

我尝试加载此文档：

```
$url = "http://en.wikipedia.org/w/api.php?action=query&titles=Electrophoresis&prop=langlinks&lllimit=500"; 
```

当我在浏览器中运行它时，一切都很好。当我这样做时：

```
ini_set('user_agent', 'XX123456789 (localhost; myemailaddress)'); //sets info for authentication    
$content = file_get_content($url);
var_dump($content); 
```

它返回与我的浏览器显示相同的 xml 文档。

但是，当我尝试

```
$content_arrays = Simplexml_load_file($content);
echo '<pre>', print_r($content_arrays), '</pre>'; 
```

它返回一堆空数组。我只是不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:52:50.307

[simplexml_load_file](http://php.net/manual/en/function.simplexml-load-file.php)返回一个对象，而不是数组。所以你不能只用 print_r 打印它。您需要做更多的工作来浏览 SimpleXMLElement。

# github - 如何正确地将 git push 与 nuget 集成？

> ID：14174402
> 
> 赞同：8
> 
> 时间：2013-01-05T17:28:02.107
> 
> 标签：github, nuget

我有一个 Github 存储库，我想将其用作我的 nuget 包的源。目前，我分别推送两个存储库：

**1.** `git push origin master`

**2.** `nuget pack`和`nuget push MyPackage.0.0.0.1.nupkg`

**但**我希望能够简单地打电话`git push origin master`

理想情况下，我会使用某种桥接/服务挂钩来升级 nuget 版本并使用 git 源自动推送。

有谁知道这种事情的良好桥接机制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T09:28:39.120

您可以为此使用[MyGet](http://www.myget.org)的构建服务（我帮助共同创建）并将您的 GitHub 存储库链接到您的提要。这使您可以构建每个签入并将一个包推送到您的 CI 提要上。从那里，您可以使用推送上游功能将其推送到 NuGet.org（或任何其他提要）。

查看此博客文章以获取更多信息：[http ://blog.myget.org/post/2012/12/17/Add-packages-from-GitHub-BitBucket-and-CodePlex-using-MyGet-build-services.aspx](http://blog.myget.org/post/2012/12/17/Add-packages-from-GitHub-BitBucket-and-CodePlex-using-MyGet-build-services.aspx)

# apache - 如何在所有子域上执行脚本

> ID：14174407
> 
> 赞同：0
> 
> 时间：2013-01-05T17:28:43.887
> 
> 标签：apache, .htaccess

我有一个带有子域的域，被一群人使用......问题是我无法理解正确的人正在使用哪些子域。所以我的问题是：如果子域正在使用中，如何使用消息（在所有子域中）向用户执行带有消息的 javascript 警报，以便向我发送电子邮件......抱歉我的英语不好和不好的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:23:02.247

尝试使用（在 .htaccess 文件中）：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^subdomain.maindomain.com$ [NC]
RewriteRule ^(.*)$ message.php [R=301,NC,L] 
```

对于每个子域并使 message.php 说出消息。

我不擅长 .htaccess 但它可能有用。

此代码会在您使用它时**禁用子域**，因此请确保将其恢复。

# c++ - QtCreator 中不支持带有自动变量的“自动完成”

> ID：14174409
> 
> 赞同：8
> 
> 时间：2013-01-05T17:28:47.833
> 
> 标签：c++, autocomplete, c++11, qt-creator

我正在测试不同的 IDE，到目前为止，QtCreator 是我最喜欢的，但似乎不支持 auto 关键字？

![在此处输入图像描述](../Images/676b6e83c6a916a689acef236d8de72b.png)

我是 C++ 新手，但机器人变体应该是一样的吧？（也许是唯一指针）但我没有使用变量自动完成`o1`

我只是犯了一个错误还是 QtCreator 不支持自动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T10:43:42.810

问题很可能不是 auto 关键字:-)

由于解析器正在走捷径，Creator 仍然有很多模板问题。正在通过使用 clang 解析器来解决这个问题。但由于这不做快捷方式，它*比*当前的要慢得多，所以需要额外的工作来加速 IDE 用例的 clang，向 Creator 添加某种代码模型的缓存（目前 creator 没有存储有关它的任何信息，因此缓存过时等永远不会有任何问题）或首先使用当前解析器，然后稍后使用 clang 优化代码模型。

# python - MongoDB 和 Meteor 中隐私设置的理想架构设计

> ID：14174411
> 
> 赞同：2
> 
> 时间：2013-01-05T17:28:59.597
> 
> 标签：python, mongodb, meteor

我有一组文档，它们周围可以有各种 READ 隐私设置：

1.  它们可以完成公开（任何注册用户）可以查看它们
2.  只有关注您的人才能查看它们（此“关注者”数组存储在每个用户的文档中）
3.  它们也可以对发布文档的人保密。
4.  他们可以具有自定义隐私，允许您命名可以查看文档的个人用户。此外，您可以允许用户组也查看文档（例如，可能有一个名为“Sample Group”的组，其中有 20 个用户。您可以允许该组查看磁贴。）

我不知道如何在 MongoDB 中有效地实现这个模式，并且希望深入了解实现这个模式的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:51:31.757

我们已经完成了几个具有多个访问级别和 mongoose 的项目，这是迄今为止我们最喜欢的方法：

```
var ACCESS_MODES = 'public followers private explicit'.split(' ');

var projectSchema = new Schema({
  access: { type: String, enum: ACCESS_MODES, required: true, default: 'public' },
  owner: { type: Schema.Types.ObjectId, ref: 'User' }]
}); 
```

然后我们通常会在模式上实现一些自定义访问方法，例如：

```
projectSchema.statics.getByIdFor = function(user, id, done) {
  this.findOne({ _id: id }).populate('owner').exec(onFound);
  function onFound(err, project) {
    // now check 'user' against the project's access method:
    if (project.access === 'public') return done(undefined, project);
    if (project.access === 'private') {
       // ...etc, handle the logic for access at different levels
    }
    // finally, they didn't get access
    done(new Error('no permission to access this project'));
  }
}; 
```

所以你现在可以做这样的事情并且知道它是安全的：

`ProjectModel.findByIdFor(loggedinUser, req.params.projectId, onFound);`

要查找用户有权访问的所有项目：

```
projectSchema.statics.getForUser = function(user, done) {
  var accessible = [];
  this.find({ access: 'public' }).exec(onPublic);
  this.find({ access: 'followers' }).populate('owner').exec(onFollowers);
  this.find({ access: 'private', owner: user }).exec(onPrivate);
  this.find({ access: 'explicit' }).populate('owner').exec(onExplicit);
  // add onPublic/Followers/Private/Explicit to accessible where user is in the correct list
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:16:26.143

由于您没有指定您正在使用的驱动程序（尽管标记为 Javascript，所以也许您正在使用猫鼬？）我将尝试使用伪代码/结构来回答这个问题。

我认为您的`document`收藏可能看起来像这样：

```
{
    _id,
    title,

    owner, //ref to User collection?

    access,  //'public', 'followers' etc...

    permissions[] 
} 
```

`Permission`可能看起来像：

```
{
    // one or the other
    user_id 
    group_id
} 
```

现在，棘手的部分是生成一个给定用户可查看的文档列表。
接近这个

```
function findDocumentsViewableByUser(userID){

    var followedBy = //populate a list of userIDs that FOLLOW the passed in userID

    var groupIDs = //populate a list of groupIDs this user is a member of

    // all documents where access = 'public'

    // all documents where access = 'followers' AND owner_id is in followedBy

    // all documents where access = 'custom' 
    // and permissions.user_id = userID OR groupIDs contains permissions.groupID
} 
```

根据您的 User 和 Group 类型文档的结构，上述 findDocumentsViewableByUser 中的查询将显着减少。
您可能最好也为此使用聚合框架。

# javascript - 使用鼠标坐标绘制画布问题？

> ID：14174412
> 
> 赞同：1
> 
> 时间：2013-01-05T17:29:11.293
> 
> 标签：javascript, html5-canvas

我正在使用鼠标的 x/y 坐标在画布上绘图，但我正在绘制的线条总是会画出一点点，请尝试在此处绘制：http: [//zachrip.net/widgets/onlineedit/index .html](http://zachrip.net/widgets/onlineedit/index.html)（左上角）作为我的意思的一个例子。没有抵消所以我不考虑它，所以我不知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:39:02.190

这里的问题是您通过 CSS 设置 Canvas **Element Size**，但没​​有设置**Drawing Surface Size**。

绘图表面的默认大小为 300 像素 x 150 像素。由于您没有设置它，而是设置了元素大小，**因此浏览器会缩放绘图表面大小以适合元素**。您通过鼠标事件获得的 x 和 y 坐标对应于元素大小，而不是实际的绘图表面大小。这就是为什么你得到偏移量。

现在，我之前发布的**[小提琴](http://jsfiddle.net/umswe/2/)**只是让你设置绘图表面的大小，而不是元素。这行得通，但是如果您希望有不同的元素和绘图表面大小，那么您也可以这样做

```
function scaleCoords(x, y) {
    x = x * DrawingSurfaceSize.width/ElementSize.width;
    y = y * DrawingSurfaceSize.height/ElementSize.height;

    return {x: x, y: y};
} 
```

**[第二种方法的例子](http://jsfiddle.net/efHJ5/)**。

# vim - Vim - 未知函数：EasyMotion#InitOptions、琶音#load、病原体#infect、病原体#helptags

> ID：14174416
> 
> 赞同：1
> 
> 时间：2013-01-05T17:29:34.273
> 
> 标签：vim, pathogen

我最近在我的 MacBook Air 上安装了 yadr 和 oh-my-zsh，这样做之后，当我尝试`vim`使用 iTerm2（也发生在终端应用程序上）时，我遇到了一些错误。

当我尝试做`vim test.c`（或打开任何现有文件，例如easymotion.vim）时，会出现以下错误。

```
Error detected while processing /Users/"myusername"/.yadr/vim/plugin/settings/easymoti
on.vim:
line   14:
E117: Unknown function: EasyMotion#InitOptions
Error detected while processing /Users/"myusername"/.yadr/vim/plugin/settings/yadr-key
map.vim:
line    2:
E117: Unknown function: arpeggio#load 
```

当我按下回车键时，我将进入正常的 vim 编辑器屏幕。在我 :q! 退出 vim 编辑器会出现以下错误。

```
Error detected while processing /Users/"myusername"/.vimrc:
line   16:
E117: Unknown function: pathogen#infect
line   17:
E117: Unknown function: pathogen#helptags 
```

# javascript - Javascript - 找到触发事件的项目

> ID：14174418
> 
> 赞同：1
> 
> 时间：2013-01-05T17:29:39.150
> 
> 标签：javascript, events, javascript-events, jquery

我需要拦截页面上触发的所有事件并阻止它们；然后我想将 XML 消息发送到将返回多个客户端的 servlet。一旦收到消息，事件就会正常运行。

所以我有两个问题：拦截并停止所有事件，然后触发事件延迟。

要侦听页面上任何元素的点击，我想我会在 $(document) 上添加一个“点击”侦听器，它构成正确的 XML 消息：但这样我就拦截了冒泡顶层的事件！

1.  如果我在这里写一个 preventDefault/stopPropagation 方法，它是在事件执行之后执行的吗？我怎样才能停止活动？
2.  event.target 方法返回的是文档元素还是最初触发事件的元素？

然后，如果我使用目标和事件类型编写 XML 消息，当客户端接收到消息并以编程方式触发它时，这可以释放循环吗？

更新：第二个问题的答案由[http://www.quirksmode.org/js/events_properties.html](http://www.quirksmode.org/js/events_properties.html)给出 ：

> 即使某个事件被捕获或冒泡，目标/srcElement 始终保持在该事件上发生的元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:44:27.040

要确定哪个元素触发了事件，请在事件回调中使用：

```
console.log("LOG|Event> " + "target: " + event.target);
if(event.target.id) {
    console.log("LOG|Event> " + "target.id: " + event.target.id);
} 
```

对于跨浏览器，请参考：

[http://www.quirksmode.org/js/events_properties.html](http://www.quirksmode.org/js/events_properties.html)

# android - ImageView 动画类似于 Android 4.0+ 联系人编辑器

> ID：14174422
> 
> 赞同：0
> 
> 时间：2013-01-05T17:29:57.870
> 
> 标签：android, android-imageview

我想像 Android 4.0+ 中的联系人编辑器（只读模式）一样为我的 ImageView 设置动画（我不确定版本）。但我不知道从哪里开始。我试图弄清楚源代码的作用，但它确实很复杂，我什至不确定我是否正在查看正确的源代码（PhotoSelectionActivity？）。

所以，这就是我想做的事情：我有一个 ImageView（400dp x 200dp，宽 x 高）和一个二次图像资源。我想使用 centerCrop 比例类型在该 ImageView 中绘制我的图像（到目前为止已完成）。但是当用户点击 ImageView 时，它应该展开到它的完整大小（如果可能的话不要改变布局大小，因为它不是线性布局中唯一的视图），背景（如果可能的话）应该淡出。

有任何想法吗？

这是开始视图的图像： ![在此处输入图像描述](../Images/a10f1f4868988113fb225e5ee1e6b130.png)

当用户点击图片时，动画应该开始，以这个视图结束（请记住，联系人详细信息仍然存在，它们就在图片后面）： ![在此处输入图像描述](../Images/d1188a0f059cb7ca92d66f58ec4e66c3.png)

我希望现在更清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:40:22.080

[为此，请使用Property Animations](http://developer.android.com/guide/topics/graphics/prop-animation.html)创建两个相应的动画（缩放和淡出）

使用[NineOldAnroids](http://nineoldandroids.com/)向后兼容 Android 2.x。

# html - 已经定义了 LI 大小，但我希望 LI 之间的空间可以拉伸菜单的全宽大小？

> ID：14174426
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:30:09.447
> 
> 标签：html, css, margin, padding

我希望我的 LI 自动调整左右边距，使其适合整个菜单 div。

**（我想解释的小图）** 我在**A**，我想去**B**。 [http://madshines.dk/files/aid.jpg](http://madsthines.dk/files/aid.jpg)

* * *

```
<ul>
    <li>ListOne</li>
    <li>ListTwo</li>
    <li>ListThree</li>
    <li>ListFour</li>
    <li>ListFive</li>
</ul> 
```

* * *

```
Padding: 5px; 
width and height are defined by the font size 
```

我希望这些 LI 之间的边距延伸到它们下方 div 的完整大小。我意识到 Firefox、Internet Explorer 和 Chrome 读取边距的方式不同。例如，如果我将其定义为左右 10 像素的边距，它将适合 Chrome，但不适合 Firefox。

无论如何让边距由UL的宽度定义自己？

问我是否说得不够清楚。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:38:38.357

如果您有一定数量的 LI，那么您可以通过计算来设置它们的宽度：

`100% / NumberOfLI = Width%`.

所以 5`<LI>`将是 (100% / 5) = 20%

当然，如果您的总像素`<LI>`大于 100%`<UL>`

编辑：

对不起，我忘了知道`<LI>`应该浮动

```
<style>

UL{
   position:relative;
   width:100%;
}

UL LI{
   display: inline;
   width: 20%;
   position:relative;
   float:left;
}

</style> 
```

`<LI>`对于无序列表中的 5，您的 CSS 看起来像这样的基本内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:41:58.207

看看这个问题。它看起来与您要完成的任务相似。 [拉伸水平 ul 以适应 div 的宽度](https://stackoverflow.com/questions/5186712/stretch-horizontal-ul-to-fit-width-of-div)

# symfony - 使用 PHPUnit 作为 Symfony 2 的依赖

> ID：14174428
> 
> 赞同：1
> 
> 时间：2013-01-05T17:30:23.010
> 
> 标签：symfony, cygwin, phpunit, composer-php

我想使用 PHPUnit 来测试我的 Symfony 2 应用程序。我将 PHPUnit 添加到我的 Symfony 2 项目`composer.json`文件中，如[文档](http://www.phpunit.de/manual/3.7/en/installation.html#installation.composer)中所述：

```
"require": {
        ...
        "phpunit/phpunit": "3.7.*"
    }, 
```

我现在如何调用 PHPUnit 来运行测试？我试图通过

```
$ php /path/to/symfony2app/vendor/phpunit/phpunit.php 
```

但我收到以下错误消息：

```
Warning: require_once(File/Iterator/Autoload.php): failed to open stream: No such file or directory in C:\...\vendor\phpunit\phpunit\PHPUnit\Autoload.php on line 45

Fatal error: require_once(): Failed opening required 'File/Iterator/Autoload.php' (include_path='.;\...\xampp\php\PEAR') in C:\...\vendor\phpunit\phpunit\PHPUnit\Autoload.php on line 45 
```

我想这是缺少 PEAR 的问题，但 PEAR 不应该是 PHPUnit 中的依赖项并通过安装`composer update`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T17:53:02.110

Composer 创建对其安装在所谓的“bin-dir”中的软件包的二进制文件（可执行脚本）的引用。默认情况下，它位于 中`vendor/bin/`，因此您可以这样运行它：`php vendor/bin/phpunit`. 你通常也可以调用`vendor/bin/phpunit`，它应该知道用 php.ini 执行它。

在 Cygwin 下，可能需要直接调用 .bat 文件，如`vendor/bin/phpunit.bat`.

如果您希望它更易于访问，可以将其添加到您的 composer.json：

```
 "config": { 
        "bin-dir": "bin"
    } 
```

然后该文件将可以`bin/phpunit`在您的项目中访问，更短且隐藏更少。

请注意，这些都不是 cygwin 特定的，它在常规的 windows cmd 和本机 unix 环境下也应该可以正常工作。

# c - 使用 CalcOpticalFlowFarneback 函数构建错误 -> OpenCV -> C 语言 - Eclipse -> MacOSX

> ID：14174431
> 
> 赞同：1
> 
> 时间：2013-01-05T17:31:42.117
> 
> 标签：c, eclipse, macos, opencv, opticalflow

我必须为一个项目使用 C 语言和 OpenCV 库做一个程序，我按照这个站点上的 MACOSX 安装指南： [OpenCV 安装](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)

我使用 Mac Port 进行安装。

我使用 Eclipse 进行编程，现在当我尝试编译这个程序时，我得到一个构建错误，我认为它取决于 CalcOpticalFlowFarneback() 函数。

这是代码：

```
 #include <stdio.h>
    #include <cv.h>
    #include <highgui.h>
    #include <math.h>
    #include <time.h>

int main(){

    CvCapture* webcam = cvCreateCameraCapture(0);
    IplImage*prev=NULL;
    IplImage*next=NULL;
    char scelta;

    /*INIZIALIZZAZIONE FUNZIONE RAND*/

    srand(time(NULL));

    double pyr_scale=0.5; 
    int levels=1;
    int winsize=3; 
    int iterations=10;
    int poly_n=5; 
    double poly_sigma=1.1;
    int flags=0;

    sleep(2);

    if (!webcam){
    /* Exit with an error */
        puts("Attenzione! si è verificato un Errore in Fase di Attivazione della WebCam. Preghiamo di Riprovare!");
        return -1;
    }

    while (1) {

        prev = cvQueryFrame(webcam);//primi 8-bit single-channel immagine in ingresso
        next = cvQueryFrame(webcam);// immagine secondo ingresso della stessa dimensione e lo stesso tipo prev.

        CvSize isize = cvSize(80,80);
        IplImage *flow = cvCreateImage(isize, IPL_DEPTH_32F, 1); //immagine computerizzata che ha le stesse dimensioni e tipo CV_32FC2 prev
        if ((prev) && (next)) {

            cvCalcOpticalFlowFarneback(prev,next,flow,pyr_scale,levels,winsize,iterations,poly_n,poly_sigma,flags);

            scelta=cvWaitKey(20);
            if((char)scelta == 27){

                break;
            }

        }

    }

    cvDestroyWindow("VIDEO SORVEGLIANZA");
    cvReleaseCapture(&webcam);

    return 0;
} 
```

这是错误日志：

```
Undefined symbols for architecture x86_64: "_cvCalcOpticalFlowFarneback", referenced from:_main in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [cattura_foto] Error 1 
```

我想指定如果我删除 cvCalcOpticalFlowFarneback 函数，我没有任何问题。

谢谢，

手册网

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:34:09.837

“未定义符号”意味着您没有链接到正确的库，或者您有，但该库用于错误的体系结构（例如，您的机器是 64 位的 32 位库）。

您需要检查链接标志和路径，以及库安装路径。

如果您可以在 Eclipse 中获取链接器日志，和/或传递给链接器的命令行，则可以从终端重复链接命令并查看是否收到更有用的消息（例如“找不到库”） . 或者您可以尝试`make`从终端运行命令并执行相同操作。

编辑 Makefile，您可能会发现某些命令前面带有“@”符号，这会阻止它们被输出（它们的输出是可见的，命令本身是不可见的）。您通常可以安全地删除 @ 并获得更详细的输出。

另一种可能性是存在名称修改错误，并且函数的“_”前缀不应该存在。不过，我对 Eclipse 不太熟悉，所以我不能跟着你。但请参阅例如[http://www.eclipse.org/forums/index.php/m/783606/](http://www.eclipse.org/forums/index.php/m/783606/)；您*可能*使用错误的选项构建了 OpenCV，因此现在它与您的代码不兼容。这很奇怪，看看您如何毫无问题地调用其他 OpenCV 函数；但也许您分两步构建 OpenCV？

通常（这不仅限于 OpenCV！）您将拥有一个构建命令，例如

```
gcc -I/usr/local/include/opencv -L/usr/local/lib main.c -o Cattura_foto2 \
-lopencv_core.2.4.3 \
-lopencv_imgproc.2.4.3 \
-lopencv_highgui.2.4.3 \
-lopencv_gpu.2.4.3 
```

以及抱怨未定义符号的错误：

```
Undefined symbols for architecture x86_64: "_cvCalcOpticalFlowFarneback" 
```

这意味着您正在链接库 openvc_core.2.4.3 等，并且链接器找不到符号“_cvCalcOpticalFlowFarneback”。

在您的计算机上找到这些库，然后（从终端）对您找到的所有库运行以下命令。**注意：您的路径可能会有所不同。我有 /usr/lib64**。

```
for lib in /usr/lib64/libopencv_*; do 
    echo "Examining $lib..."
    strings $lib | grep -i cvCalcOpticalFlowFarneback
done 
```

你应该看到类似的东西：

```
Examining /usr/lib/libopencv_pippo_pluto...
Examining /usr/lib/libopencv_blah_blah...
...
Examining /usr/lib64/libopencv_video.so...
cvCalcOpticalFlowFarneback
cvCalcOpticalFlowFarneback
Examining /usr/lib64/libopencv_video.so.2.4...
cvCalcOpticalFlowFarneback
cvCalcOpticalFlowFarneback
Examining /usr/lib64/libopencv_video.so.2.4.3...
cvCalcOpticalFlowFarneback
cvCalcOpticalFlowFarneback 
```

多个匹配的原因是库存在于多个符号副本中。

可以肯定的是，让我们检查一下库：

```
nm -D /usr/lib64/libopencv_video.so.2.4 | grep Farneback

0000000000027e50 T cvCalcOpticalFlowFarneback 
```

现在我们知道了两件重要的事情：

1.  这个符号*真的*叫`cvCalcOpticalFlowFarneback`. 您的 GCC 抱怨它没有找到`_cvCalcOpticalFlowFarneback`带有下划线的符号。您要么错误地构建了库，要么缺少`-fno-leading-underscore`GCC 的选项。

但如果是这种情况，则根本不会识别**任何 OpenCV2 符号**。所以，我赌#2：

1.  该符号位于**libopencv_video.so.2.4.3**中，并且在您的构建命令中没有对该库的引用！你应该有**-lopencv_video.2.4.3**或类似的东西。验证您的 makefile 和选项。

让我知道它是怎么回事 - 以及*在 bocca al lupo*中。

# c# - System.Threading.Timer 时间问题

> ID：14174434
> 
> 赞同：0
> 
> 时间：2013-01-05T17:31:51.827
> 
> 标签：c#, .net, time, timer, intervals

我的 .NET 应用程序中的 Threading.Timer 存在问题。为了更容易理解，我做了一个示例。

```
using System;
using System.Diagnostics;
using System.Threading;

namespace TimerTestApp
{
    class Program
    {
        private static Timer timer;
        private static int timerTickCounter;
        private static DateTime timerStartTimer;
        private static readonly Stopwatch Sw = new Stopwatch();
        private static readonly ManualResetEvent TimerFinish = new ManualResetEvent(false);

        static void Main()
        {
            Console.WriteLine("START");
            timer = new Timer(TimerCallBack, null, 0, 1000);
            TimerFinish.WaitOne();
        }

        private static void TimerCallBack(object state)
        {
            if (timerTickCounter == 0)
            {
                timerStartTimer = DateTime.Now;
                Sw.Start();
            }
            timerTickCounter++;
            Console.WriteLine("timerTickCounter = {0}", timerTickCounter);
            if (timerTickCounter >= 1200) //20.00 min
            {
                var secondsSinceStart = (int)(DateTime.Now - timerStartTimer).TotalSeconds;
                timer.Dispose();
                Sw.Stop();
                Console.WriteLine("timerTickCounter = {0}; secondsSinceStart={1}; Stowatchseconds={2}",
                                    timerTickCounter, secondsSinceStart, Sw.Elapsed.TotalSeconds);
                Console.ReadLine();
                TimerFinish.Set();
            }
        }
    }
} 
```

运行此代码后，我得到了最后一行的结果：

`timerTickCounter = 1200; secondsSinceStart=1215; Stowatchseconds=1215,7573291`

据您所见，计时器每秒滴答作响，但结果输出显示程序运行需要多花 15 秒的时间。

我需要更新`DateTime`字段的机制，而且我不能简单地创建一个每秒滴答一次的计时器。

任何人都可以为此提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:37:32.627

所有定时器的运行分辨率约为 20 毫秒。所以 20 分钟的 15 秒在预期范围内。

如果您真的需要一个非常精确的 1/秒计时器，那么您将需要使用一次性计时器并每次计算秒的剩余部分。

# c# - 泛型将未知类型转换为另一个

> ID：14174436
> 
> 赞同：0
> 
> 时间：2013-01-05T17:31:53.573
> 
> 标签：c#, visual-studio-2010, generics

我将我的问题改写为更具体并针对实际关注的领域。

我有许多不同的类是我的实体，我不知道该类中的内容。当我想将实体升级到新实体时，我想将属性转移到称为相同的新实体（并且我发现它们不区分大小写）。

我的问题很简单，但可能需要一个复杂的答案。

当我遇到一种与升级后的类型不同的类型时，我需要将旧的类型转换为新的类型。这两种类型都是未知的，因为这就是重点。我可以通过我想要的任何两个类，它会很好地传输属性。

所以，如果我有两节课：

```
public class OldEntity
{
    public string Name {get;set;}
    public int SomeProperty {get;set;}
}

public class NewEntity
{
    public string Name {get;set;}
    public string SomeProperty {get;set;}
} 
```

所以我需要找出旧类型是什么`SomeProperty`，然后将其转换为新类型`SomeProperty`。

我认为我可以做的，我希望有一种更通用的方法：

```
switch (typeof(SomeProperty.Value.GetType())
{
    case typeof(Int):
        return Int.Parse(OldSomeProperty.Value);
} 
```

显然这是非常原始的代码，但你明白了要点。

请有人可以给我一个更通用的方法，还有一件事是我下载了 AutoMapper，它没有被评论，所以如果有人能告诉我它在哪里以及如何做到这一点，那也是一个很好的答案。

所以我尝试了简单的解决方法，不是很通用：

```
public static object ConvertSourceObjectDestinationObject(object source, object destination)
{
    // get the string representation of the source object
    var strRepresentation = source.ToString();
    // find out the destinations type
    var originalCode = AssemblyCode(destination.GetType().Assembly.ToString());

    // search for a match then convert the source object to the new destination objects type
    switch (originalCode)
    {
        case 0:
            return strRepresentation;
        case 1:
            return int.Parse(strRepresentation);
        case 2:
            return decimal.Parse(strRepresentation);
        case 3:
            return DateTime.Parse(strRepresentation);
        case 4:
            return byte.Parse(strRepresentation);
        case 5:
            return float.Parse(strRepresentation);
        case 6:
            return Guid.Parse(strRepresentation);
        default:
            return strRepresentation;
    }
}

public static int AssemblyCode(string assemblyString)
{
    if (assemblyString.Equals(typeof(string).Assembly.ToString()))
        return 0;

    if (assemblyString.Equals(typeof(int).Assembly.ToString()))
        return 1;

    if (assemblyString.Equals(typeof(decimal).Assembly.ToString()))
        return 2;

    if (assemblyString.Equals(typeof(DateTime).Assembly.ToString()))
        return 3;

    if (assemblyString.Equals(typeof(byte).Assembly.ToString()))
        return 4;

    if (assemblyString.Equals(typeof(float).Assembly.ToString()))
        return 5;

    if (assemblyString.Equals(typeof(Guid).Assembly.ToString()))
        return 6;

    return -1;
} 
```

我做了一个新的，它执行 TryParse 而不是 Parse 以使其更安全，但你明白了要点。我知道它并不优雅，但如果有人能告诉我如何正确地将未知物体投射到其他未知物体上，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:36:58.210

泛型系统有时需要一些帮助来了解泛型是什么类型。这是通过类型约束 ( [ref](http://msdn.microsoft.com/en-US/library/d5x73970%28v=vs.110%29.aspx) ) 来处理的，这可能会对您的示例有所帮助。

如果您知道要转换的泛型类型始终属于某个基类，请使用`where T:<base class name>`约束。

如果转换异常是由于它无法识别未继承的类型之间的隐式转换，则反射可能是您唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:37:40.450

您使用通用约束 new

```
 public static void SetEntityValue<TEntity>(ref TEntity entityToTransform, PropertyHelper entityProperty) where TEntity: new 
```

这将允许您执行以下操作：

```
TEntity ent = new TEntity() 
```

或者（我认为这就是你想要的）

使用相同的东西（泛型约束），您可以告诉方法泛型参数类型是/派生自什么。

```
public static void SetEntityValue<TEntity>(ref TEntity entityToTransform, PropertyHelper entityProperty) where TEntity: x 
```

这基本上意味着您可以告诉编译器泛型类型必须是什么（这意味着您在方法中的强制转换将有意义并编译

如果您不知道类型是什么，那么您可能会在对象上使用反射...

# python - Python中的队列线程

> ID：14174437
> 
> 赞同：2
> 
> 时间：2013-01-05T17:31:55.250
> 
> 标签：python, multithreading, queue

我正在使用队列[文档页面](http://docs.python.org/2/library/queue.html)底部的队列实现，我有几个问题：

1.  有 50 个线程，它们获取数十万个 JSON 文件。将线程数设置为两倍是个好主意`Queue(maxsize=`，还是应该或多或少？

2.  我想将`worker`功能放在不同的模块中。我该怎么办？当我尝试这样做时，我进入`NameError: global name 'q' is not defined`了 `item = q.get()`函数行；添加`global q`到功能没有帮助。

**编辑**：是否可以将工作函数移动到另一个模块，只需对该代码进行最少的更改？我不太了解对象，我希望代码尽可能简单。

```
def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

q = Queue()
for i in range(num_worker_threads):
     t = Thread(target=worker)
     t.daemon = True
     t.start()

for item in source():
    q.put(item)

q.join() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:43:21.860

你可以尝试这样的事情

```
class Worker(threading.Thread):
    def __init__(self,inputQueue,inputLock):
        threading.Thread.__init__(self)
        self.inputQueue=inputQueue
        self.inputLock=inputLock          

    def run(self):       
        while True:
            if not self.inputQueue.empty():
                self.inputLock.acquire()
                item=self.inputQueue.get()
                self.inputLock.release()
        #process item
                self.inputQueue.task_done()
            else:
                time.sleep(1)

class Main():

    def __init__(self):
        self.workersQueue = Queue.Queue()
        self.workersLock = threading.RLock()
        self.workers = list()

        #start threads
        for index in range(10):            
            self.uploaders.append(Worker(self.workersQueue, self.workersLock))
            self.uploaders[index].start()

        self.workersQueue.join() 
```

这里的worker是一个类（一个线程，队列是共享的）。主类用于创建工作线程，从而加载工作线程所需的数据。

希望这会有所帮助

# c# - 列表 .FindIndex 多个结果？

> ID：14174442
> 
> 赞同：9
> 
> 时间：2013-01-05T17:32:24.393
> 
> 标签：c#

比方说，我们有一个列表

```
List<int> lst = new List<int>();
lst.Add(20);
lst.Add(10);
lst.Add(30);
lst.Add(10);
lst.Add(90); 
```

如果我需要获取第一个元素的索引 20 我会使用

```
FindIndex() 
```

但是有没有一种方法可以用于多个结果？假设我想要编号为 10 的元素的索引。

我知道有一个方法 FindAll() 但这给了我一个插入索引的新列表。

最好的（？）方法是获取索引数组。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T17:34:51.743

以下代码的最大缺点是它使用 -1 作为幻数，但在索引的情况下它是无害的。

```
var indexes = lst.Select((element, index) => element == 10 ? index : -1).
    Where(i => i >= 0).
    ToArray(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T17:39:02.967

一种可能的解决方案是：

```
var indexes = lst.Select((item, index) => new { Item = item, Index = index })
                 .Where(v => v.Item == 10)
                 .Select(v => v.Index)
                 .ToArray(); 
```

首先选择所有项目及其索引，然后过滤项目，最后选择索引

**更新：**如果你想封装我或 Eve 的解决方案，你可以使用类似的东西

```
public static class ListExtener
{
    public static List<int> FindAllIndexes<T>(this List<T> source, T value)
    {
        return source.Select((item, index) => new { Item = item, Index = index })
                        .Where(v => v.Item.Equals(value))
                        .Select(v => v.Index)
                        .ToList();
    }
} 
```

然后你会使用类似的东西：

```
List<int> lst = new List<int>();
lst.Add(20);
lst.Add(10);
lst.Add(30);
lst.Add(10);
lst.Add(90);

lst.FindAllIndexes(10)
    .ForEach(i => Console.WriteLine(i));
Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T18:18:12.363

只是提供另一个解决方案：

```
Enumerable.Range(0, lst.Count).Where(i => lst[i] == 10) 
```

当然也可以做成扩展方法：

```
public static IEnumerable<int> FindAllIndices<T>(this IList<T> source, T value)
{
  return Enumerable.Range(0, source.Count)
    .Where(i => EqualityComparer<T>.Default.Equals(source[i], value));
} 
```

# regex - 重命名文件以取父文件夹的名称

> ID：14174443
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:32:29.483
> 
> 标签：regex, windows, cygwin

我需要在目录中命名文件，以便它们采用父文件夹的名称，然后递增 1。

所以我有

```
myfolder
-- myfirstfile.txt
-- mysecondfile2.txt 
```

我需要它是：

```
myfolder
--myfolder1.txt
--myfolder2.txt 
```

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:49:23.733

```
sgeorge-mn:stack sgeorge$ pwd
/tmp/stack

sgeorge-mn:stack sgeorge$ ls 
aTMP    bTMP    cTMP    dTMP    eTMP    fTMP    gTMP    hTMP    iTMP    jTMP    kTMP    lTMP    mTMP    nTMP    oTMP    pTMP    qTMP    rTMP    sTMP    tTMP    uTMP    vTMP    wTMP    xTMP    yTMP    zTMP

sgeorge-mn:stack sgeorge$ NUM=1;for i in `ls -1`;do mv $i `pwd`/$i$NUM.txt; ((NUM++)); done

sgeorge-mn:stack sgeorge$ ls
aTMP1.txt   cTMP3.txt   eTMP5.txt   gTMP7.txt   iTMP9.txt   kTMP11.txt  mTMP13.txt  oTMP15.txt  qTMP17.txt  sTMP19.txt  uTMP21.txt  wTMP23.txt  yTMP25.txt
bTMP2.txt   dTMP4.txt   fTMP6.txt   hTMP8.txt   jTMP10.txt  lTMP12.txt  nTMP14.txt  pTMP16.txt  rTMP18.txt  tTMP20.txt  vTMP22.txt  xTMP24.txt  zTMP26.txt 
```

如果文件名中有空格，请`IFS`相应地更改变量。

如何`IFS`影响：

```
sgeorge-mn:stack sgeorge$ ls -1
a STACK
b STACK
c STACK
d STACK
e STACK
f STACK 
```

在设置`IFS`为之前`'\n'`：

```
sgeorge-mn:stack sgeorge$ for i in `ls -1`; do echo $i ; done
a
STACK
b
STACK
c
STACK
d
STACK
e
STACK
f
STACK 
```

设置`IFS`为后`'\n'`：

```
sgeorge-mn:stack sgeorge$ TMPIFS=$IFS;IFS='\n'; for i in `ls -1`; do echo $i ; done; IFS=$TMPIFS
a STACK
b STACK
c STACK
d STACK
e STACK
f STACK 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:31:39.270

我只是用python来做到这一点......

```
import os

...

def get_files_in_directory(rootDir=rootDirectory):
    for root, dirs, files in os.walk(rootDir, topdown='true'):
        counter = 0;
        for file in files:
            #I only wanted to rename files ending with .mod
            ext = os.path.splitext(file)[-1].lower();
            if (ext == '.mod'):
                # here is how I got the parent folder name 
                folder = os.path.relpath(root, rootDir);
                counter+=1;
                newfilename = folder + '_' + counter + ".mod";
                os.rename(root + '\\' +  file, root + '\\' + newfilename); 
```

# android - 避免在屏幕翻转时重新加载 webapp

> ID：14174445
> 
> 赞同：2
> 
> 时间：2013-01-05T17:32:49.020
> 
> 标签：android, web-applications

我有一个简单的网络应用程序，可以在设备上打开一个简单的网站：

```
myWebView.loadUrl("http://mysite.com"); 
```

问题是当我将手机屏幕翻转为水平视图时，反之亦然，网站（Web 应用程序）正在重新加载。

我怎样才能避免这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:41:34.277

默认情况下，当设备方向改变时应用程序会重新启动。在这里阅读[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

我认为“自己处理配置更改”部分可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:50:36.903

您可以使用一个名为 OnConfigurationChanged() 方法的函数来具体说明。

# php - 上传脚本未注册其要上传的文件类型

> ID：14174446
> 
> 赞同：0
> 
> 时间：2013-01-05T17:33:00.947
> 
> 标签：php, upload

我的上传脚本似乎甚至没有上传它设计的文件类型。这是脚本：

```
<?php

$allowedExts = array("jpg", "jpeg", "gif", "png");

$extension = end(explode(".", $_FILES["file"]["name"]));

if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

无论我更改什么，该脚本似乎总是将文件列为“无效文件”。相反，我希望它上传到与上传者位于同一目录中的某个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:41:18.273

使用更具描述性的错误。如有必要，更改工作流程。

例如：

```
$allowedExts = array("jpg", "jpeg", "gif", "png");
$mimes       = array('image/gif','image/jpeg','image/png','image/pjpeg');
$extension = end(explode(".", $_FILES["file"]["name"]));

function check_errors()
{
    if (!in_array($_FILES["file"]["type"], $mimes))
        return "Invalid MIME type: " . $_FILES["file"]["type"];
    if ($_FILES["file"]["size"] >= 20000)
        return "File too long: size=" . $_FILES["file"]["size"];
    if (!in_array($extension, $allowedExts))
        return "Extension not allowed: '".$extension."'";
    if ($_FILES["file"]["error"] > 0)
        return "Return code " . $_FILES["file"]["error"];
    return "OK";
}

if ('OK' == ($reason = check_errors()))
{
    // your code
}
else
{
    echo "ERROR: $reason";
} 
```

# android - 错误：找不到资源标识符

> ID：14174447
> 
> 赞同：0
> 
> 时间：2013-01-05T17:33:13.740
> 
> 标签：android, android-layout, android-xml

我有这个 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ctc="http://schemas.android.com/apk/res/com.hulist.asm.person"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <com.hulist.asm.person.ImageMap
        android:id="@+id/map"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/person"
        ctc:map="person_map" />    
</LinearLayout> 
```

在第 8 行 ( `<com.hulist.asm.person.ImageMap`) 有一个错误说

> 错误：在包“com.hulist.asm.person”中找不到属性“map”的资源标识符

我这几天一直在尝试解决这个问题，我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:58:36.183

如果您当前的包名称是`com.hulist.asm`，那么这就是`ctc`命名空间声明应该包含的内容，而不是

```
xmlns:ctc="http://schemas.android.com/apk/res/com.hulist.asm.person" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:48:21.630

[您可能指的是错误 9656](http://code.google.com/p/android/issues/detail?id=9656)中已解决的相同场景。看一下，如果相同，请检查您是否使用的是旧版本的 sdk 工具。

# google-chrome-extension - 试图从后台脚本中获取消息

> ID：14174448
> 
> 赞同：3
> 
> 时间：2013-01-05T17:33:24.757
> 
> 标签：google-chrome-extension

从后台脚本获取消息时，我遇到了问题。我的心都快炸了，哪里错了？

**显现**

```
{
    "name":"Some name",
    "version":"0.1",
    "manifest_version": 2,
    "description":"extension for Google Chrome",
    "permissions": ["tabs","http://*/*", "https://*/*", "<all_urls>","notifications","contextMenus","alarms","tabs","bookmarks"],
    "content_scripts":[
    {
        "matches":["<all_urls>"],
        "css":["style.css"],
        "js":["content.js","jquery.js"]
    }
    ],
    "background": {
        "scripts": ["background.js","jquery.js"],
        "persistent": false
    },
    "icons":{
        "16": "images/icon16.png",
        "48": "images/icon48.png",
        "128": "images/icon128.png"
    },
    "browser_action": {
        "default_icon": {
            "19": "images/icon19.png",           
            "38": "images/icon38.png"
        },
        "default_title": "Order Checker",
        "default_popup": "popup.html"
    }
} 
```

**背景.js**

```
chrome.tabs.getSelected(null, function(tab) {
    console.log('Loaded!');
    chrome.tabs.sendMessage(tab.id, {
        greeting: "hello"
    });
    console.log('Sended on '+tab.id+'...');
}); 
```

**内容.js**

```
chrome.extension.onMessage.addListener(function(msg, _, request) {
    console.log('Getting request...');
    console.log(msg.greeting);
}); 
```

正如预期的那样，在后台页面中，我收到了控制台 2 消息。但是在内容页面上我没有任何消息，所以我认为 content.js 中的代码有问题。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:12:29.380

**chrome.tabs.getSelected()**已弃用[`Chrome 16`](http://developer.chrome.com/extensions/whats_new.html#16)，请改用[**chrome.tabs.query()**](http://developer.chrome.com/extensions/tabs.html#method-query)。

*`Problem in Your Script`*

chrome.tabs.getSelected() 返回当前选定选项卡的引用，在**加载扩展**后，您的 `chrome://chrome/extensions/`背景页面将向扩展页面发送消息，其中包含内容脚本`do not execute`

修改您的后台脚本以适应[**chrome.tabs.query()**](http://developer.chrome.com/extensions/tabs.html#method-query)，您可以在网页控制台中看到消息！

# 参考

*   [标签查询](http://developer.chrome.com/extensions/tabs.html#method-query)

# iphone - 锁定 ViewController 的方向

> ID：14174449
> 
> 赞同：4
> 
> 时间：2013-01-05T17:33:31.207
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有支持各种方向的应用程序，但是我希望某些 viewControllers 只支持横向并且很少锁定 Potrait 模式。我该怎么做，我尝试了下面的代码，但没有任何效果。

```
- (BOOL)shouldAutorotate {
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}
// pre-iOS 6 support
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:06:23.897

推送到同一个导航控制器的所有视图控制器必须支持相同的方向。具体来说，我相信只有根视图控制器`shouldAutorotateToInterfaceOrientation`会被考虑在内。您可以查看[此 SO 帖子](https://stackoverflow.com/questions/6601983/navigationcontroller-pushed-viewcontrollers-wont-autorotate)以获得一种解决方法；或在[此](https://stackoverflow.com/questions/1196758/selective-autorotation-within-a-uinavigationcontroller-and-uitabbarcontroller)寻求一种可能有所帮助的不同方法。

我在上面链接的第二篇文章建议为您使用此定义，`shouldAutorotateToInterfaceOrientation`您可能会根据您的情况对其进行调整：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
  {   
  if ([self.selectedViewController isKindOfClass:[UINavigationController class]]) {
    UIViewController *rootController = [((UINavigationController *)self.selectedViewController).viewControllers objectAtIndex:0];
    return [rootController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
  }
  return [self.selectedViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
} 
```

# ruby - rubyXL (Errno::ENOENT)

> ID：14174451
> 
> 赞同：3
> 
> 时间：2013-01-05T17:33:51.177
> 
> 标签：ruby, excel, web-crawler, rubyxl

我在使用 ruby​​XL 构建的爬虫时遇到问题。它正确地遍历我的文件系统，但我收到一个`(Errno::ENOENT)`错误。我检查了所有的 ruby​​XL 代码，一切似乎都检查了。我的代码附在下面 - 有什么建议吗？

```
/Users/.../testdata.xlsx
/Users/.../moretestdata.xlsx
/Users/.../Lab 1 Data.xlsx
/Users/Dylan/.rvm/gems/ruby-1.9.3-p327/gems/rubyXL-1.2.10/lib/rubyXL/parser.rb:404:in `initialize': No such file or directory - /Users/Dylan/.../sheet6.xml (Errno::ENOENT)
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p327/gems/rubyXL-1.2.10/lib/rubyXL/parser.rb:404:in `open'
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p327/gems/rubyXL-1.2.10/lib/rubyXL/parser.rb:404:in `block in decompress'
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p327/gems/rubyXL-1.2.10/lib/rubyXL/parser.rb:402:in `upto'
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p327/gems/rubyXL-1.2.10/lib/rubyXL/parser.rb:402:in `decompress'
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p327/gems/rubyXL-1.2.10/lib/rubyXL/parser.rb:47:in `parse'
    from xlcrawler.rb:9:in `block in xlcrawler'
    from /Users/Dylan/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/find.rb:41:in `block in find'
    from /Users/Dylan/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/find.rb:40:in `catch'
    from /Users/Dylan/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/find.rb:40:in `find'
    from xlcrawler.rb:6:in `xlcrawler'
    from xlcrawler.rb:22:in `<main>' 
```

* * *

```
require 'find'
require 'rubyXL'

def xlcrawler(path)
  count = 0
  Find.find(path) do |file|                                # begin iteration of each file of a specified directory
    if file =~ /\b.xlsx$\b/                                # check if a given file is xlsx format
      puts file                                            # ensure crawler is traversing the file system
      workbook = RubyXL::Parser.parse(file).worksheets     # creates an object containing all worksheets of an excel workbook
      workbook.each do |worksheet|                         # begin iteration over each worksheet
        data = worksheet.extract_data.to_s                 # extract data of a given worksheet - must be converted to a string in order to match a regex
        if data =~ /regex/
          puts file
          count += 1
        end      
      end
    end
  end
  puts "#{count} files were found"
end

xlcrawler('/Users/') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:06:00.040

我对 github 上的 ruby​​XL 代码进行了一些挖掘，看起来解压缩方法中存在错误。

```
 files['styles'] = Nokogiri::XML.parse(File.open(File.join(dir_path,'xl','styles.xml'),'r'))
  @num_sheets = files['workbook'].css('sheets').children.size
  @num_sheets = Integer(@num_sheets)

  #adds all worksheet xml files to files hash
  i=1
  1.upto(@num_sheets) do
    filename = 'sheet'+i.to_s # <----- BUG IS HERE
    files[i] = Nokogiri::XML.parse(File.open(File.join(dir_path,'xl','worksheets',filename+'.xml'),'r'))
    i=i+1
  end 
```

这段代码对 excel 中的工作表编号做了一个假设，这是不正确的。此代码只是计算纸张的数量，并以数字方式分配它们。但是，如果您删除一个工作表然后创建一个新工作表，则数字序列会被破坏。

如果你检查你的`Lab Data 1.xlsx`文件，你会看到没有 sheet6，如果你打开 vba 开发者窗口（按 alt + F11）你应该看到类似

![工作表列表](../Images/3076dc0b63c02d904d57e8d425f4dffb.png)

如您所见，这种安排将破坏 for 循环并在 i = 6 时导致异常。

# c# - 需要一种更好的方法来删除字符串中的模式

> ID：14174455
> 
> 赞同：1
> 
> 时间：2013-01-05T17:34:06.313
> 
> 标签：c#, string, foreach, arrays

我有一种方法可以根据字符串删除描述词，但我相信有更有效的方法可以做到这一点。

`iMonster`可以像***胖*兽人流氓**一样，我要去掉***胖子***。

```
 private static string[] _adjectives = { "angry", 
                                            "big", 
                                            "fat", 
                                            "happy",
                                            "large", 
                                            "nasty", 
                                            "fierce", 
                                            "thin",
                                            "small", 
                                            "tall", 
                                            "short" };

    private static string RemoveMonsterAdjective(string iMonster)
    {
        foreach (string adjective in _adjectives)
        {
            if (iMonster.Contains(adjective))
            {
                iMonster = iMonster.Replace(adjective, "").Trim();
                break;
            }
        }
        return iMonster;
    } 
```

希望有人可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T17:46:13.500

您可以使用正则表达式在一次调用中完成所有替换，如下所示：

```
return Regex.Replace(
    iMonster,
    @"\b(angry|big|fat|happy|...)\b",
    ""
).Trim(); 
```

这种方法背后的想法是构造一个*正则表达式*，将任何形容词匹配为单个单词（因此“bigot”将不匹配，而“big”将匹配），并将该单词替换为空字符串。

这是[关于 ideone 的演示](http://ideone.com/rWcI6W)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T18:00:56.543

另一个可能的简短解决方案是：

```
var words = iMonster.Split(' ');
return string.Join(" ", words.Except(_adjectives)); 
```

我做了一些分析并比较了各种解决方案。

输入`fat angry orc happy rogue`和 1000000 次迭代：

```
00:00:01.8457067 lakedoo
00:00:01.9772477 Eve
00:00:04.3859120 dasblinkenlight 
```

需要提到的是，我改编了 dasblinkenlight 的解决方案，以便在正则表达式中包含所有形容词。

编辑：通过删除中断更正了lakedoo的方法。

# javascript - 搜索具有特定属性的关注者

> ID：14174463
> 
> 赞同：0
> 
> 时间：2013-01-05T17:35:17.900
> 
> 标签：javascript, soundcloud

我正在尝试用来自特定城市的关注者列表填充文本字段。我认为 javascript 搜索语法应该是：

```
var myText = document.getElementById('target');
SC.get('/users/MY_USER/followers',{city:'Berlin'},function(followers) {
  for (i=0; i < followers.length; i++){
     myText.innerHTML += followers[i].username + ' </br> ';
  }
}); 
```

该请求返回整个`MY_USER`关注者列表，而不是只获取来自柏林的关注者。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:42:12.890

问题出在后端。您确定要在服务器上正确过滤内容吗？

编辑：

Ups，我错过了 soundcloud 标签....
根据[这个](http://developers.soundcloud.com/docs/api/reference#users)你只能使用*q*参数。
相反，您可以自己过滤结果：

```
var myText = document.getElementById('target');
SC.get('/users/MY_USER/followers', function(followers) {
   for (i = 0; i < followers.length; i++){
      if(followers[i].city == 'Berlin') {
          myText.innerHTML += followers[i].username + ' </br> ';
      }
   }
}); 
```

# ant - 用 ant 编译 SWC 文件失败：“include-sources 不支持 path-element 属性”

> ID：14174464
> 
> 赞同：2
> 
> 时间：2013-01-05T17:35:24.730
> 
> 标签：ant, build, swc, compc

我正在尝试将 src 文件夹编译成 SWC 文件。但它返回以下错误：

```
build.xml:9: include-sources doesn't support the "path-element" attribute 
```

这是我的构建文件：

```
<project name="My SWC build" basedir="." default="compile">
<property file="build.properties"/>
<taskdef resource="flexTasks.tasks" classpath="${FLEX_HOME}/ant/lib/flexTasks.jar"/>
<target name="init">
    <delete dir="${DEPLOY_DIR}"/>
    <mkdir dir="${DEPLOY_DIR}"/>
</target>
<target name="compile" depends="init">
    <compc output="${DEPLOY_DIR}/${SWC_NAME}.swc">
        <include-sources path-element="${SRC_DIR}"/>
    </compc>
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:05:14.467

```
Use :
<include-source dir="${SRC_DIR}"/> –or– <is dir="${SRC_DIR}"/>

instead of:
 <include-sources path-element="${SRC_DIR}"/> 
```

# objective-c - iOS Touch而不是touchDown？

> ID：14174470
> 
> 赞同：1
> 
> 时间：2013-01-05T17:36:49.673
> 
> 标签：objective-c, ios, xcode, interface-builder

我正在尝试在我正在制作的一个小合成器键盘上设置一个触摸事件，但我只能将一个“触地”事件连接到我制作的按钮上。

如何在按钮上设置“触摸”？因此，假设有人按下一个键并在其他按钮上滑动手指……您会期望其他键像钢琴一样在“触摸”上弹奏，对吗？不确定如何在 Interface Builder 中实现这一点。

任何帮助都会很棒-谢谢！肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:46:44.507

您需要连接的不仅仅是 touchDown 事件。为了实现您想要的，您不仅需要通过“向下”事件来监听初始触摸，还需要让您的应用了解“移动”和“触摸”事件，以便您可以适当地响应用户移动他们的手指。更进一步，例如，通过将所有代码放在按钮子类中来尝试使每个按钮独立响应这些动作是很困难的。

相反，您需要创建一个可以同时查看所有按钮的单点代码，接收用户正在进行的触摸，并根据这些触摸做出要做什么的决定。这将是包含所有按钮的视图控制器的任务。

在此视图控制器中，您可以使用`touchesBegan:`、`touchesMoved:`和`touchesEnded:`方法。然后，您应该使用点击测试来检查触摸在哪些按钮上。查看`convertPoint:`,`hitTest:withEvent:`和`pointInside:withEvent:`对按钮执行测试。

基本上在这些触摸方法中，您将跟踪何时按下新按钮`touchDown:`，何时触摸移动到 中的新按钮`touchesMoved:`，以及触摸刚刚来自哪个按钮，以及用户何时停止触摸`touchesEnded:`。通过将所有这些放在一起，您可以编写代码来跟踪每个手指的移动、它在哪个按钮上以及何时为这些按钮播放声音。

同样，我建议不要尝试将所有代码放在按钮操作的单个触摸处理程序中。相反，请使用您的视图控制器一次管理所有按钮之间的触摸。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:44:13.590

你想看看 iOS 事件

[http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/EventsiPhoneOS/EventsiPhoneOS.html](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/EventsiPhoneOS/EventsiPhoneOS.html)

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006779-RH2-SW65](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006779-RH2-SW65)

听起来您想要`UIControlEventTouchDown`在您当前按下按钮或区域时播放。相反，您可以使用`UIControlEventTouchUpInside`which 在您抬起按钮或区域后播放。

就像是`[results addTarget:self action:@selector(playSound) forControlEvents:UIControlEventTouchUpInside];`

假设每次触摸都有相应的向下和向上动作。

如果您正在寻找类似把手放在钢琴上的东西，您可以尝试使用平移手势并跟踪滑动的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:46:53.730

查看[UIControl 类参考 - UIControlEvents](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006779-RH2-SW65)。

你正在寻找`UIControlEventTouchDown`

```
//For example:
UIButton *myButon = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[myButon addTarget:self action:@selector(methodName) forControlEvents:UIControlEventTouchDown]; 
```

# mysql - SQL 循环遍历数据以找到最大值（特殊情况）

> ID：14174478
> 
> 赞同：0
> 
> 时间：2013-01-05T17:37:46.903
> 
> 标签：mysql, sql

好的。我有由 TRAVIAN 游戏中使用的数据制成的数据库。我有 200000 行，所以我想减少它以进行 Excel 分析。

```
x   y   village player alliance population  date
27 -41  h1      h       S       35          2009-12-23
27 -41  h1      h       S       56          2009-12-24
27 -41  h1      h       S       60          2009-12-25
27 -41  h1      h       S       89          2009-12-26 
```

这些只是表中的一些重要属性。每次玩家登录系统时，每个村庄都会有很多其他条目。所以你可以看到每个村庄的人口增长。我只想写一个 sql 语句，它只返回村庄最大人口所在的条目。（当然是每个村庄）。

我写了这样的东西

```
SELECT * 
FROM x_world
GROUP BY village
HAVING population = max(population) 
```

从理论上讲，我想遍历每个村庄并搜索其最大的人口条目，然后只取那个。我想为每个村庄做这件事。这也是我如何将村庄总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:49:18.400

使用联接尝试此查询。它比依赖子查询快得多。

```
SELECT 
    * 
FROM x_world as xr
INNER JOIN (
        SELECT 
                x,
                MAX(population)
        FROM x_world as xr
        GROUP BY x 
) as xt ON xt.x = xr.x
GROUP BY village 
```

## [演示](http://sqlfiddle.com/#!2/2c1c2/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:47:07.717

```
SELECT *
FROM x_world
GROUP BY village
HAVING SUM(population)=
  (SELECT MAX(a.population)
  FROM
    (SELECT village,SUM(population) population FROM x_world GROUP BY village
    ) a
  ) 
```

[**SQL_LIVE_DEMO**](http://sqlfiddle.com/#!2/c0253/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:50:53.237

你想要的是这样的：

```
select *
from x_world w
where population = (select max(population) from x_world w2 where w2.village = w.village) 
```

注意：当村庄的最大人口数超过一个时，这将返回多行。

实际上，这可以通过以下方式在 MySQL 中修复：

```
select *
from x_world w
where population = (select max(population) from x_world w2 where w2.village = w.village)
group by village 
```

但是，这利用了隐藏列，因此不能*保证*这些列来自同一行（尽管实际上它们似乎是）。

要获得一行，有一个 id 会很有帮助。从您的示例中， date 将适用于此，产生类似以下的查询：

```
select *
form x_world w join
     (select village, max(population) as maxpop,
             substring_index(group_concat(date_format(date, '%Y%m%d'), ',') as maxdate
      from x_world
     ) wmax
     on w.village = wmax.village and
        w.population = wmax.population and
        date_format(w.date, '%Y%m%d') = wmax.date 
```

# php - php包含导致导航推迟

> ID：14174481
> 
> 赞同：0
> 
> 时间：2013-01-05T17:37:58.387
> 
> 标签：php, html, css

在我的网站上，我有一个联系页面，其中包含一个 PHP 文件。（php 文件是一个联系人公式）奇怪的是，这包含导致顶部导航、页眉和页脚切换了一下。PHP 文件不包含任何 CSS 样式更改。我真的无法弄清楚为什么会这样，也许你有一个想法。

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/template_EU.dwt" codeOutsideHTMLIsLocked="false" -->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- InstanceBeginEditable name="doctitle" -->
    <title>LoL StreamGallery</title>
    <!-- InstanceEndEditable -->
    <link rel="stylesheet" type="text/css" href="Templates/stylesheet.css">
<link href="SpryAssets/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
<script src="SpryAssets/SpryMenuBar.js" type="text/javascript"></script>
<script type="text/javascript">
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
</script>
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
</head>

<body onload="MM_preloadImages('Images/List/diverse/home_mo.png','Images/List/diverse/requestStream_mo.png','Images/List/diverse/AboutContact_mo.png','Images/List/diverse/Lol_mo.png','Images/List/diverse/fb_mo.png','Images/List/diverse/tw_mo.png')">
<!-- grüner Overhead -->
<div id="overhead">
    <div id="overheadText">
    <!-- Home -->
    <a href="index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Home','','Images/List/diverse/home_mo.png',1)"><img src="Images/List/diverse/home.png" alt="Home" name="Home" width="55" height="30"   border="0" id="Home" /></a>    
    <!-- Request Streams -->
    <a href="RequestStream.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('RequestStream','','Images/List/diverse/requestStream_mo.png',1)"><img src="Images/List/diverse/requestStream.png" alt=    "RequestStream" name="RequestStream" width="113" height="30" border="0" id="RequestStream" /></a>
    <!-- About&Contact -->
    <a href="AboutContact.php" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('AboutContact','','Images/List/diverse/AboutContact_mo.png',1)"><img src="Images/List/diverse/AboutContact.png" alt="About&amp;Contact" name="AboutContact" width="113" height="30" border="0" id="AboutContact" /></a>
    <!-- Play LoL -->
    <a href="http://www.leagueoflegends.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Lol','','Images/List/diverse/Lol_mo.png',1)"><img src="Images/List/diverse/Lol.png" alt="Play LeagueofLegends" name="Lol" width="160" height="30" border="0" id="Lol" /></a>
    <!-- Rechtsbündig -->
    <span style="float:right">
    <!-- Facebook -->
    <a href="https://www.facebook.com/Lolstreamgallery" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('FB','','Images/List/diverse/fb_mo.png',1)"><img src="Images/List/diverse/fb.png" alt="Facebook" name="FB" width="31" height="30" border="0" id="FB" /></a>
    <!-- Twitter -->
    <a href="https://twitter.com/LStreamGallery" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Twitter','','Images/List/diverse/tw_mo.png',1)"><img src="Images/List/diverse/tw.png" alt="Twitter" name="Twitter" width="31" height="30" border="0" id="Twitter" /></a>
    </span>
    </div>
</div>

<!-- website Wrapper -->
<div id="website">
    <!-- Header --> 
    <div id="header">
            <p> 
            <a href="index.html"><img src="Images/logo.png"/></a>
            </p>
    </div>
    <!-- Main Wrapper -->    
    <div id="main">
        <!-- Anzeige für Streams -->
        <div id="content">
              <!-- InstanceBeginEditable name="Streamcode" -->
              <p><h1>About us:</h1></p>
              Lol StreamGallery was launched in early 2013 from Jakob Abfalter with the help and ideas of Bernhard Abfalter, Michael Langhammer, Martin Langhammer, Anton Schendel. 
              The website belongs to and was programmed by Jakob Abfalter.
              <p><h1>Media owner:</h1></p>
              <span class="close">
              <p><b>Jakob Abfalter</b></p>
              <p>Uferweg 4</p>
              <p>3341 Ybbsitz</p>
              <p>Austria</p>
              <p>JakobAbfalter@gmail.com</p>
              </span>
              <p><h1>Get in touch with us:</h1></p>
              <span class="close">
              <p>Follow us on <a href="https://www.facebook.com/Lolstreamgallery">Facebook</a></p>
              <p>Follow us on <a href="https://twitter.com/LStreamGallery">Twitter</a></p>
              <p>Send us a mail:</p>
              </span>
              <?php
              include("html-contact-form-captcha/html-contact-form.php");
              ?>
              <!-- InstanceEndEditable -->
        </div>
        <!-- Menüleiste -->    
        <div id="right">
          <ul id="MenuBar1" class="MenuBarHorizontal">
              <li><a href="Asia.php" target="sideframe">Asia</a></li>
              <li><a href="NA.php" target="sideframe">NA</a></li>
              <li><a href="EU.php" target="sideframe">EU</a></li>
            </ul>
            <iframe src="EU.php" width="212px" height="980px" name="sideframe" frameborder="0"></iframe>
        </div>
    </div>
    <!-- Main Wrapper Ende -->
</div>
<!-- Website Wrapper Ende -->
<!-- Fußzeile -->    
<div id="footer">  
Copyright 2013 © LolStreamGallery - <a href="TermsofUse.html">Terms of Use</a>
</div>
<script type="text/javascript">
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
</script>
</body>

<!-- InstanceEnd --></html> 
```

我还发现，PHP Include 会导致页脚中的链接变粗。希望你们中的一些人有一个想法，我该如何解决这个问题。

编辑：问题已解决 - php 文件包含一些我过度阅读的 CSS，这导致了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:00:58.603

如果您确定 PHP 包含会导致链接变粗，则您包含的页面上可能有覆盖您的 CSS 的 CSS。您应该检查您包含的 PHP 文件是否有任何可能影响链接 IE 的 CSS

```
a
{
    font-weight:bold;
} 
```

如果不发布您包含的文件的内容，我们真的无能为力（我们只是在猜测）。

这个问题也有点具体，可能没有建设性。

# c# - 设计师无法在VS2010 express中显示

> ID：14174483
> 
> 赞同：0
> 
> 时间：2013-01-05T17:38:01.863
> 
> 标签：c#, .net, winforms, windows-forms-designer

我有以下类结构：

```
public partial class SickForm<T> : MyForm where T : class {}

public class MyForm : Form, ExternalAssemblyNamespace.ISomething {} 
```

在设计器中打开`MyForm`后，一切都正确加载。但是`SickForm`在设计器中打开后，我遇到了这个错误：

> 无法为此文件显示设计器，因为无法设计其中的任何类。设计者检查了文件中的以下类：
> 
> SickForm --- 无法加载基类“MyForm”。确保已引用程序集并且已构建所有项目。

如何解决这个问题？我在使用 VS2010 express 时出现此问题。在 VS2008 express 中它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:38:25.347

我找到了[解决方法](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/3398a2da-a524-4c41-b762-8917d5c80b3d)（有人可以解释一下，为什么我必须这样做以及如何以更好的方式解决这个问题？）

出于某种原因，在我将包含臭名昭著`ISomething`的声明的外部程序集复制到`...\IDE\PublicAssemblies`目录后，VS2010 在重新启动后开始正确呈现表单设计器。

# c - 使用 libgcrypt 使用 aes256-cbc 在 C 中加密和解密文件的问题

> ID：14174486
> 
> 赞同：0
> 
> 时间：2013-01-05T17:38:23.080
> 
> 标签：c, encryption, aes

*prova*是一个纯文本文件，其中包含*hello i am a pc*

**加密：**

```
FILE *fp = fopen("prova", "r+");
FILE *fpout = fopen("out", "w+");
while(!feof(fp)){
    memset(plain_text, 0, sizeof(plain_text));
    retval = fread(plain_text, 1, 16, fp);
    txtLenght = sizeof(plain_text);
    encBuffer = malloc(txtLenght);
    algo = gcry_cipher_map_name(name);
    gcry_cipher_open(&hd, algo, GCRY_CIPHER_MODE_CBC, 0);
    gcry_cipher_setkey(hd, key, keyLength);
    gcry_cipher_setiv(hd, iniVector, blkLength);
    gcry_cipher_encrypt(hd, encBuffer, txtLenght, plain_text, txtLenght);
    fwrite(encBuffer, 1, 16, fpout);
} 
```

**解密：**

```
FILE *fp = fopen("out", "r+");
FILE *fpout = fopen("origdec", "w+");
while(!feof(fp)){
    memset(plain_text, 0, sizeof(plain_text));
    retval = fread(plain_text, 1, 16, fp);
    txtLenght = sizeof(plain_text);
    encBuffer = malloc(txtLenght);
    algo = gcry_cipher_map_name(name);
    gcry_cipher_open(&hd, algo, GCRY_CIPHER_MODE_CBC, 0);
    gcry_cipher_setkey(hd, key, keyLength);
    gcry_cipher_setiv(hd, iniVector, blkLength);
    gcry_cipher_decrypt(hd, encBuffer, txtLenght, plain_text, txtLenght);
    fwrite(encBuffer, 1, 16, fpout);
} 
```

**在哪里：**

```
char key[32] = {0x80};
char iniVector[16] = {0};
char plain_text[16];
char *encBuffer = NULL; 
```

**问题：** 当我解密加密文件时，文件*origdec*包含纯文本加上一些随机无用和不可读的字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:47:13.873

当你读到你的字符串时，

```
fread(plain_text, 1, 16, fp); 
```

你可能会得到“你好，我是一台 PC”（15 个字节）加上一个返回。

然后加密 16 个字节，解密这 16 个字节，*但仍然没有字符串 terminator*，因此 printf 会写入额外的内容（或可能是核心转储）。

您需要在字符串末尾添加一个二进制零。尝试：

```
fread(plain_text, 1, 16, fp);
plain_text[15] = 0x0; 
```

看看这是否改变了什么。

## 更新

您的代码中有几个错误。例如，您总是重新初始化密码，并且总是重新分配`encBuffer`，导致内存泄漏。我已经纠正了一些错误；仍然存在将加密文件填充到 16 个字节的特性。有一些技术可以摆脱填充；例如，您可能想查看 PKCS#7。

我已经任意初始化了一些常量，并采用了就地加密/解密（您不限于 16 的 bufSize；但您必须查看填充策略）。

```
#include <stdio.h>
#include <gcrypt.h>

int main()
{
    char iniVector[16];
    char *encBuffer = NULL;
    FILE *fp, *fpout;
    char *key       = "topolino e minni";
    gcry_cipher_hd_t hd;
    int     bufSize = 16, bytes, algo = GCRY_CIPHER_AES128, keyLength = 16, blkLength = 16;

    memset(iniVector, 0, 16);

    encBuffer = malloc(bufSize);

    fp = fopen("prova", "r");
    fpout = fopen("out", "w");

    gcry_cipher_open(&hd, algo, GCRY_CIPHER_MODE_CBC, 0);
    gcry_cipher_setkey(hd, key, keyLength);
    gcry_cipher_setiv(hd, iniVector, blkLength);

    while(!feof(fp))
    {
        bytes = fread(encBuffer, 1, bufSize, fp);
        if (!bytes) break;
        while(bytes < bufSize)
            encBuffer[bytes++] = 0x0;
        gcry_cipher_encrypt(hd, encBuffer, bufSize, NULL, 0);
        bytes = fwrite(encBuffer, 1, bufSize, fpout);
    }
    gcry_cipher_close(hd);
    fclose(fp);
    fclose(fpout);

    // Decrypt. Same algo as before

    gcry_cipher_open(&hd, algo, GCRY_CIPHER_MODE_CBC, 0);
    gcry_cipher_setkey(hd, key, keyLength);
    gcry_cipher_setiv(hd, iniVector, blkLength);

    fp = fopen("out", "r");
    fpout = fopen("origdec", "w");
    while(!feof(fp))
    {
        bytes = fread(encBuffer, 1, bufSize, fp);
        if (!bytes) break;
        gcry_cipher_decrypt(hd, encBuffer, bufSize, NULL, 0);
        bytes = fwrite(encBuffer, 1, bufSize, fpout);
    }
    gcry_cipher_close(hd);

    free(encBuffer); encBuffer = NULL;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T23:17:21.883

获取过大的解密文件对于数据库等二进制文件来说是个问题。但是，如果您以实际长度作为前缀编写文件，则可以适当地截断“太大”的文件，假设加密程序和解密程序已在此协议上达成一致。

我还将在前缀中包含初始化向量，以便解密器不必猜测，并且两个程序不必在两个程序中对 IV 进行硬编码。因此，加密器使用 gcry_create_nonce() 生成 IV，解密器在解密文件的其余部分之前从文件中读取它。

您将如何管理您的密钥？

基于密码的加密适用于 gcrypt gcry_kdf_derive() 函数（PBKDF2 使用 SHA512 w/128 字节盐）。同样，盐可以由加密器生成并放在文件的前面；解密器在使用它之前从文件的前面提取盐，然后在其 gcrypt gcry_kdf_derive() 调用中使用相同的密码。

因此，加密器读取明文并生成以下文件：

```
 salt || IV || source-size || ciphertext-blocks 
```

解密器现在可以重建原始文件。

您要使用 HMAC 保护内容吗？

玩得开心。

# java - 在 Java 中更改文本的颜色

> ID：14174490
> 
> 赞同：5
> 
> 时间：2013-01-05T17:38:53.973
> 
> 标签：java, swing, colors, jlabel

我正在尝试创建一个单独的`CustomFont`类，在其中我可以使用不同的文本属性。所以我创建了一个新的扩展类`Font`，并在里面创建了一个私有类绘图扩展`JComponent`。我在方法中更改字体和文本的颜色和其他特性`paintComponent`。

问题是`paintComponent`方法没有被调用。我确定我犯了一些错误。

这是代码：

```
import javax.swing.JComponent;

public class CustomFont extends Font {
    private String string;
    private int FontStyle;

    public CustomFont(String text, int style) {
        super("Serif", style, 15);
        FontStyle = style;
        string = text;  

        Drawing draw = new Drawing();
        draw.repaint();
    }

    private class Drawing extends JComponent {
        public void paintComponent(Graphics g) {
            Font font = new Font("Serif", Font.BOLD, 15);
            g.setFont(font);
            g.setColor(Color.YELLOW);
            g.drawString(string, getX(), getY());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T20:24:42.753

添加到我的评论：

`super.XXX`1）您不通过调用您应该调用的方法实现来尊重绘制链，`paintComponent(..)`并且它应该是覆盖方法中的第一个调用，否则可能会发生异常：

```
@Override 
protected void paintComponent(Graphics g) {
      super.paintComponent(g);

      Font font = new Font("Serif", Font.BOLD, 15);
      g.setFont(font);
      g.setColor(Color.YELLOW);
      g.drawString(string, 0, 0);
} 
```

在上面的代码中注意`@Override`注释，所以我确定我覆盖了正确的方法。而且`getX()`and`getY()`已经被 0,0, As 替换`getX`为`getY`组件位置，但是当我们调用时，`drawString`我们为它提供了在容器内绘制位置的参数（当然它必须在边界/大小 f 容器内。

`getPreferredSize`2）您应该在绘制到图形对象时覆盖并返回`Dimension`适合您的组件图纸/内容的 s，否则在视觉上不会有任何可见的东西，因为组件大小将为 0,0：

```
private class Drawing extends JComponent {

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 200);//you would infact caluclate text size using FontMetrics#getStringWidth(String s)
    }
} 
```

`RenderHints`并且只是作为一个建议使用一些`Graphics2D`好看的文本:) 更多信息请参见这里：

*   [使用渲染提示显示抗锯齿文本](http://docs.oracle.com/javase/tutorial/2d/text/renderinghints.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:50:59.687

这`CustomFont`门课有很多东西没有任何意义。一方面，实际上与字体没有任何关系，另一方面，你并没有真正使用任何编码在其中的东西。以下内容似乎更符合您正在寻找的内容。

```
public class Drawing extends JComponent {
    String text;
    Font myFont;
    Color myTextColor;

    public Drawing(String textArg, Font f, Color textColor) {
        myFont = f;
        myTextColor = textColor;
        text = textArg;
    }

    public void paintComponent(Graphics g) {
        g.setFont(myFont);
        g.setColor(myTextColor);
        g.drawString(text, 0, getHeight() / 2);
    }
} 
```

如下图所示使用...

```
public class Test {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Font font = new Font("Serif", Font.BOLD, 15);
        String text = "blah blah blah";
        Color textColor = Color.YELLOW;
        Drawing d = new Drawing(text, font, textColor);

        frame.add(d);
        frame.setSize(100,100);
        frame.setVisible(true);
    }
} 
```

绘图使用 a `Font`，字体不使用 a `Drawing`。`Drawing`在`Font`. _

# node.js - node.js 和 socket.io 中的即时消息传递：如何向特定用户发送消息？

> ID：14174494
> 
> 赞同：1
> 
> 时间：2013-01-05T17:39:07.750
> 
> 标签：node.js, sockets, socket.io, chat

我目前正在开发一个即时消息应用程序，但在保存登录服务器的用户时遇到问题。我知道我必须存储每个连接用户的连接事件的**套接字**资源，但是当我在不同的浏览器上访问服务器时，我无法拥有所有这些资源。

**问题**

这是服务器的一部分：

```
//..

//..

var users = {};
    io.sockets.on('connection', function (socket) {         
    users[req.session.name] = socket;

    socket.on('msgToServer', function (data) {
        users[data['to']].emit('msgFromServer',{message:data['message'],to:data['from'],from:data['to']});              
    });
}); 
```

当我从一个使用一个会话的浏览器向另一个使用另一个会话的浏览器发送消息时.. 代码中断：

```
C:\Archivos de programa\nodejs\session\data_handler.js:142   
users[data['to']].emit('msgFromServer',{message:data['message'],to:data['from                                                                                                           
                   ^
TypeError: Cannot call method 'emit' of undefined at Socket.<anonymous> (C:\Archivos de programa\nodejs\session\data_handler.js:142:20) 
```

因为如果我使用一个帐户（例如 charlie）登录，服务器会保留

```
var users = {};
    io.sockets.on('connection', function (socket) {         
    users['charlie'] = socket; <-- charlie's socket resource 
```

如果我从查理登录的浏览器发送消息，则 users['charlie'] 可用 ... only，所以就像 charlie 只能向自己发送消息，因为用户对象中没有更多的套接字资源，所以当我尝试向 pedros 的帐户发送消息，例如......该资源不可用（未定义）并且服务器抛出该错误。我需要的是一种让所有用户从一个用户代理登录的方法......在一个容器中，不一定是一个对象，在这种情况下：用户。因此 data['to'] 不会是未定义的，并且 msgFromServer 事件可以任意发送给用户：

**服务器**

```
var express = require('express');
app = express(),
    server = require('http').createServer(app),
    io = require('socket.io').listen(server);

app.use(express.static( __dirname));
app.use(express.bodyParser());
app.use(express.cookieParser());

var MemcachedStore = require('connect-memcached')(express);

app.use(express.session({ 
    secret: 'lolz',
    store:new MemcachedStore 
})); 

var connection = function(){
    var mysql = require('mysql');

    var mysql = mysql.createConnection({
        host: 'localhost',
        port: 3306,
        user: 'root',
        password: '',
    });

    mysql.query('use test');

    return mysql;
};

app.post('/data', function(req, res){

    var username = req.body.username;
    var password = req.body.password;

    var mysql = connection();

    mysql.query("select username from user where username like '"+ username +"' and password like '"+password +"'",
    function(err, result, fields) {
        if (err) throw err;
        else {

            if(result != ''){
                req.session.name  = username;

                mysql.query("update user set online = 1 where id like  '"+req.session.name+"' ");

                res.redirect("/welcome_user");
            }
            else{
                res.end("You are not registered");
            }
        }
        }); 

});

app.get("/welcome_user",function(req,res){
    var html = '<html>\n'+
        '<head>\n'+
        '<link rel="stylesheet" type="text/css" href="styles/jquery-ui-1.8.18.custom.css">\n'+
        '<link rel="stylesheet" type="text/css" href="styles/styles.css">\n'+
        '<style>    \n  #onlineUsers{border: 1px solid black; width: 300px;}</style>\n'+
        '<script src="http://127.0.0.1/socket.io/lib/socket.io.js"></script>\n'+
        '<script src="scripts/jquery.js"></script>\n'+
        '<script type="text/javascript" src="scripts/jquery-ui-1.8.18.custom.min.js"></script>\n'+
        '<script src="scripts/chatbox.js"></script>\n'+
        '<script src="scripts/send.js"></script>\n'+
        '<script>\n'+
        "//receive();\n"+
        '$(function(){\n'+
            '$("#onlineUsers li").dblclick( function(event){\n  '+"createChatbox($.trim($(this).text()), '"+req.session.name+"','');\n"+
            '} );'+
        '});'+
    '</script>\n'+
'</head>\n'+
'<body>\n'+
        '<h1>Hola  '+req.session.name+'. Estos son los  usuarios en linea </h1> \n'+'<div id="onlineUsers"><ol>\n';
    mysql = connection();

    mysql.query("select username from user where online = 1 and username != '"+req.session.name+"' ", 
        function(err, results, fields) {
            if (err) throw err;

            for (var index in results) {
                html += '<li>' + results[index].username + '</li>';             
            }
            html +='</ol></div> \n'+
            '</body>\n'+
            '</html>';
            res.writeHead(200, {'Content-Type': 'text/html'});
            res.end(html);
        }
    );
    var users = {};
    io.sockets.on('connection', function (socket) {
        users[req.session.name] = socket;

        socket.on('msgToServer', function (data) {
            for (var u in users){
                console.log("%s | %s",u,users[u]);

                 /*
                   this is how  I determine that the user that logged in 
                   is not available in the user object

                  */
        }

        users[data['to']].emit('msgFromServer' {message:data['message'],to:data['from'],from:data['to']});
        });
    });      
});

server.listen(80); 
```

**客户：**

```
function createChatbox(to,from,message){    
    $('<div id ="chatbox" class='+to+'>  <div id="messageOutput" > <textarea class="readOnly" readonly="readonly" rows="4" cols="30"></textarea></div><br /> <hr /> <div id="messageInput"> <textarea class ="editable" rows="2" cols="30"> </textarea> </div> </div>').appendTo("body").dialog({draggable:true, title:to}) ;        

    if(message !='')
        $('#chatbox.'+to+' #messageOutput textarea.readOnly').text(message);

    $("textarea.editable").keydown(function(event){
        if(event.which == 13 && $(this).val() != ''){
            send(to,from,$.trim($(this).val()));
            $(this).val('');
            return false;
        }
    });
}

var socket = io.connect('http://localhost');

function send(to, from, message){
    socket.emit('msgToServer',{message:message,to:to,from:from});   
} 

socket.on('msgFromServer', function (data) {
    message = data['message'],
    from = data['from'],
    to = data['to'];            

    if($('#chatbox.'+from).dialog("isOpen") === true){
        $('#chatbox.'+from+' #messageOutput textarea.readOnly').text(message);      
    }

    else if(($('#chatbox.'+from).dialog("isOpen") !== true)){
        createChatbox(from,to,message);
    }
}); 
```

# ios - 发送按钮不发送

> ID：14174497
> 
> 赞同：2
> 
> 时间：2013-01-05T17:39:47.017
> 
> 标签：ios, xcode

我使用以下代码从我的 iPad 应用程序发送电子邮件。电子邮件编辑器打开，但当我按下发送按钮时，什么也没有发生。有任何想法吗？

```
 MFMailComposeViewController *mailComposer;
        mailComposer  = [[MFMailComposeViewController alloc] init];
        mailComposer.mailComposeDelegate = self;
        [mailComposer setModalPresentationStyle:UIModalPresentationFormSheet];
        [mailComposer setSubject:@"your custom subject"];
        [mailComposer setMessageBody:@"your custom body content" isHTML:NO];
        [self presentViewController:mailComposer animated:YES completion:nil]; 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:57:49.553

好的，首先[您实际上无法从模拟器发送电子邮件](https://stackoverflow.com/questions/3520508/cannot-send-email-in-iphone-simulator)，因此您没有收到消息的事实是正常的。现在在驳回部分，这里是文档的相关部分：

> 您的委托对象负责在操作完成时关闭选取器。您可以使用 负责显示 MFMailComposeViewController 对象界面的父视图控制器的**dismissModalViewControllerAnimated:方法来执行此操作。**

所以剩下要做的就是实现委托方法并关闭控制器。可能是这样的：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{
    // Handle any errors here & check for controller's result as well
    [self dismissModalViewControllerAnimated:YES];
} 
```

此外，您更容易像这样首先以模态方式呈现控制器（< iOS6）：

```
[self presentModalViewController:mailComposer animated:YES]; 
```

[这是](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)`MFMailComposeResult`您应该期望的常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T21:35:07.523

您不能使用模拟器发送电子邮件。你应该在 iPhone 上试试。您还必须在 iPhone 中配置电子邮件帐户才能使用此功能。

您可以使用 if ([MFMailComposeViewController canSendMail]) 来检查您是否可以发送邮件。

# python - 从python中的菜单回调返回由tkFileDialog读取的文件名时出错

> ID：14174498
> 
> 赞同：0
> 
> 时间：2013-01-05T17:39:52.337
> 
> 标签：python, tkinter

我是python的初学者。我正在编写一个带有简单 GUI 的代码，其中有一个菜单项“打开”，单击该菜单项时会询问带有***tkFileDialog***的图像文件。读取文件名和路径很好。我希望返回文件名，以便可以在 tkinter 标签中打开和显示图像。但我不知道如何返回文件名。

这是我的代码

```
from Tkinter import Frame, Tk, Label, Text, Menu, END, BOTH, StringVar
from PIL import ImageTk, Image
import numpy
import tkFileDialog

class DIP(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent) 
        self.parent = parent        
        self.initUI()

    def initUI(self):

        self.parent.title("DIP Algorithms- Simple Photo Editor")
        self.pack(fill=BOTH, expand=1)

        menubar = Menu(self.parent)
        self.parent.config(menu=menubar)
        fileMenu = Menu(menubar)
        self.fn=''
        fileMenu.add_command(label="Open", command=self.onOpen)
        menubar.add_cascade(label="File", menu=fileMenu)
        print self.fn #prints nothing here
        #self.img=Image.open(self.fn)

    def onOpen(self):

        ftypes = [('Image Files', '*.tif *.jpg *.png')]
        dlg = tkFileDialog.Open(self, filetypes = ftypes)
        filename = dlg.show()
        self.fn=filename
        print self.fn #prints filename with path here

    def onError(self):
        box.showerror("Error", "Could not open file")    

def main():

    root = Tk()
    ex = DIP(root)
    root.geometry("1280x720")
    root.mainloop()  

if __name__ == '__main__':
    main() 
```

我什至尝试为文件名创建一个属性，但没有帮助.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:01:36.877

更仔细地查看您的代码。你在`initUI()`之前运行`onOpen()`，然后你不在运行`initUI()`，它设置图像，在设置之后`self.fn`。

要解决此问题，您需要将更改图像标签的代码移动到类中的另一个函数，如下所示：

```
def setImage(self):
    print self.fn #prints something now!
    self.img=Image.open(self.fn) 
```

然后，在结束时`onOpen()`，您需要调用此函数。

```
def onOpen(self):
    ...
    self.setImage() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T18:02:21.970

这种行为是意料之中的。当您`print self.fn`在`initUI`用户中尚未选择文件时。当您在`onOpen`用户中打印时选择了一个文件，因此它可以正常显示。`self.fn`确实设置正确，您只是打印得太早了。

如果要显示图像，请在用户选择文件后执行。

```
def onOpen(self):
    ftypes = [('Image Files', '*.tif *.jpg *.png')]
    dlg = tkFileDialog.Open(self, filetypes = ftypes)
    filename = dlg.show()
    self.fn = filename
    if self.fn: # If a file was selected
        # Display image in label / call display function 
```

# maven - Maven-tomcat插件引导webapp不起作用

> ID：14174499
> 
> 赞同：0
> 
> 时间：2013-01-05T17:39:57.263
> 
> 标签：maven, maven-plugin, maven-tomcat-plugin

使用 maven 创建了一个简单的 Webapp：

```
mvn archetype:generate -DgroupId=com.kids -DartifactId=kidsMaven -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false 
```

我的POM文件如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.kids</groupId>
  <artifactId>kidsMaven</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>kidsMaven Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <build>
    <finalName>kidsMaven</finalName>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.tomcat.maven</groupId>
          <artifactId>tomcat6-maven-plugin</artifactId>
          <version>2.0</version>
        </plugin>
      </plugins>
    </pluginManagement>
  </build> 
```

我想使用 maven 插件在 tomcat 服务器上运行我的这个引导 web 应用程序。当我执行

```
mvn tomcat:deploy 
```

我收到以下错误：

> [错误] 无法在项目 kidsMaven 上执行目标 org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli)：无法调用 Tomcat 管理器：连接被拒绝：连接-> [帮助 1]

我没有在外部安装tomcat；而是希望 maven 也能控制我的 tomcat 安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:41:43.633

`tomcat:deploy`将 webapp 推送到现有的 tomcat 部署。你可能想要`tomcat:run`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:53:58.477

用于`tomcat6:run`在本地运行 webapp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:12:36.207

使用 mvn tomcat:deploy

并使用用户/密码配置您的 pom。

看看这里如何：http: [//tomcat.apache.org/maven-plugin-2.1-SNAPSHOT/tomcat6-maven-plugin/usage.html](http://tomcat.apache.org/maven-plugin-2.1-SNAPSHOT/tomcat6-maven-plugin/usage.html)

# r - 对齐 R 中的分类数据

> ID：14174510
> 
> 赞同：0
> 
> 时间：2013-01-05T17:41:13.353
> 
> 标签：r

我在 excel 中有一个 excel 数据集，我想将它加载到 R 中。数据集有两个变量“重量”和“高度”，其中每个变量都有自己的日期，指定它的记录时间。height 变量具有跳过/缺失值，如果您深入了解数据，则在 weight 变量中也是如此。我正在尝试创建一个合并的数据集，其中体重和身高被组合并按日期排列在适当的位置，并且当值不存在时放置 NA。是否有任何命令/功能可以帮助我做到这一点？谢谢！

```
 obs     date   weight     date    height
  1   2010-10-04 52495  2010-10-04 11.6  
  2   2010-10-01 53000  2010-10-01 15.3
  3   2010-09-30 52916  2010-09-30 14.3
  4   2010-09-29 52785  2010-09-29 11.3
  5   2010-09-28 53348  2010-09-28 18.2
  6   2010-09-27 52885  2010-09-24 11.7
  7   2010-09-24 52174  2010-09-23 15.0
  8   2010-09-23 51461  2010-09-22 18.6
  9   2010-09-22 51286  2010-09-20 17.9
  10  2010-09-21 50968  
  11  2010-09-20 49250 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:53:34.403

我假设这个问题不是关于将数据读入 R，而是在读取数据后对其进行处理。不过，您可以使用参数`check.names = FALSE`并`fill = TRUE`在读取数据时允许您用于`Reduce`合并数据。

首先，模拟读入数据。

```
temp <- read.table(header = TRUE, 
text = "obs date weight date height
1   2010-10-04 52495  2010-10-04 11.6
2   2010-10-01 53000  2010-10-01 15.3
3   2010-09-30 52916  2010-09-30 14.3
4   2010-09-29 52785  2010-09-29 11.3
5   2010-09-28 53348  2010-09-28 18.2
6   2010-09-27 52885  2010-09-24 11.7
7   2010-09-24 52174  2010-09-23 15.0
8   2010-09-23 51461  2010-09-22 18.6
9   2010-09-22 51286  2010-09-20 17.9
10  2010-09-21 50968
11  2010-09-20 49250
", fill = TRUE, check.names = FALSE) 
```

其次，使用`Reduce()`和`merge()`。

```
Reduce(function(x, y) merge(x, y, all.x = TRUE), 
       list(temp[2:3], temp[4:5]))
#          date weight height
# 1  2010-09-20  49250   17.9
# 2  2010-09-21  50968     NA
# 3  2010-09-22  51286   18.6
# 4  2010-09-23  51461   15.0
# 5  2010-09-24  52174   11.7
# 6  2010-09-27  52885     NA
# 7  2010-09-28  53348   18.2
# 8  2010-09-29  52785   11.3
# 9  2010-09-30  52916   14.3
# 10 2010-10-01  53000   15.3
# 11 2010-10-04  52495   11.6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:52:28.400

```
d <- read.table(header=FALSE, fill=TRUE, text="1   2010-10-04 52495  2010-10-04 11.6  
  2   2010-10-01 53000  2010-10-01 15.3
  3   2010-09-30 52916  2010-09-30 14.3
  4   2010-09-29 52785  2010-09-29 11.3
  5   2010-09-28 53348  2010-09-28 18.2
  6   2010-09-27 52885  2010-09-24 11.7
  7   2010-09-24 52174  2010-09-23 15.0
  8   2010-09-23 51461  2010-09-22 18.6
  9   2010-09-22 51286  2010-09-20 17.9
  10  2010-09-21 50968  
  11  2010-09-20 49250  ")

d1 <- d[2:3]
d2 <- d[!is.na(d[,5]),][4:5]

names(d1) <- c('Date', 'val1')
names(d2) <- c('Date', 'val2')
m <- merge(d1, d2, by='Date', all=TRUE)

> m

##          Date  val1 val2
## 1  2010-09-20 49250 17.9
## 2  2010-09-21 50968   NA
## 3  2010-09-22 51286 18.6
## 4  2010-09-23 51461 15.0
## 5  2010-09-24 52174 11.7
## 6  2010-09-27 52885   NA
## 7  2010-09-28 53348 18.2
## 8  2010-09-29 52785 11.3
## 9  2010-09-30 52916 14.3
## 10 2010-10-01 53000 15.3
## 11 2010-10-04 52495 11.6 
```

# java - 在 HTML 文件的 XPath 处提取 HTML

> ID：14174516
> 
> 赞同：0
> 
> 时间：2013-01-05T17:41:40.043
> 
> 标签：java, parsing, html-parsing, htmlunit, htmlcleaner

我正在尝试从给定 Xpath 的文件中获取 html 代码。我尝试使用 HTMLUnit，但它似乎不能很好地处理从谷歌缓存下载的这些静态文件。我在使用 HTMLCleaner 时运气好一点，但到目前为止，我只能获取文本而没有 HTML 代码。任何的意见都将会有帮助。以下是我目前正在使用的代码。

```
TagNode tagNode = new HtmlCleaner().clean(readFile(htmlCacheFile));
Document doc = new DomSerializer(new CleanerProperties()).createDOM(tagNode);

XPath xpath = XPathFactory.newInstance().newXPath();
String title = ((String) xpath.evaluate(TITLE_XPATH, doc, XPathConstants.STRING)).trim();
String body =  ((String) xpath.evaluate(BODY_XPATH, doc, XPathConstants.STRING)).trim(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:33:53.270

它必须是Java解决方案吗？使用在无头浏览器中运行的站点抓取工具完全可以实现您想要做的事情。[PhantomJs](http://phantomjs.org/)是一个无头 WebKit，它允许您在网页上执行 JavaScript/CoffeeScript。我认为它可以帮助您解决问题。

[Pjscrape](http://nrabinowitz.github.com/pjscrape/)是一个基于 PhantomJs的有用的[网页抓取工具。](http://en.wikipedia.org/wiki/Web_scraping)

这是一个示例（**config.js**），它记录到控制台（也可以归档）：

```
pjs.addSuite({
  url: 'http://stackoverflow.com/',
  noConflict: true,
  scraper: function() {
    var html = _pjs.$('body').html();
    return html;
  }
}); 
```

开始它`phantomjs pjscrape.js config.js`

结果是：

```
* Suite 0 starting
* Opening http://stackoverflow.com/
* Scraping http://stackoverflow.com/
* Suite 0 complete
* Writing 1 items
["\n    <noscript>&lt;div id=\"noscript-padding\"&gt;&lt;/div&gt;</noscript>\n    <div id=\"notify-container\"></div>\n    <div id=\"overlay-header\"></div>\n    <div id=\"custom-header\"></div>\n\n    <div class=\"container\">\n        <div id=\"header\">\n            <div id=\"portalLink\">\n                <a class=\"genu\" onclick=\"StackExchange.ready(function(){genuwine.click();});return false;\">Stack Exchange</a>\n   

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:21:10.067

也许这有帮助。在下面的链接中有相同问题的 XPath 示例和 JSoup 解决方案。如果你熟悉 CSS 选择器（有很多解析、清理等方法），请使用 jsoup，它是一个非常强大的 html 解析库。如果我理解目标是从文件中获取正文和标题。

我对这个问题的解决方案是：

```
Document webpage = Jsoup.parse(new File("file.html"), "UTF-8");
System.out.println(webpage.title()+" "+webpage.body().html()); 
```

[https://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/](https://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/)

# java - Java Swing - 分组组件

> ID：14174519
> 
> 赞同：0
> 
> 时间：2013-01-05T17:41:46.267
> 
> 标签：java, swing

只是一个快速的问题。

我正在做一个涉及 jTextfield、jButton、jLabels 的 GUI。是否可以将这 3 个组件分组并隐藏。只有单击一个jButton，这3个组件才会出现？

用于创建新组件的按钮的类似用法，但在这种情况下，我希望在单击 jButton 时隐藏和取消隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:01:16.713

您可以将所有组件添加到 JPanel 并更改面板的可见性。执行此操作时，您应该考虑在组件不可见时不使用空间的布局。您可以使用 MigLayout 并设置 hideMode 3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T19:02:44.810

这是一个代码示例，展示了如何显示/隐藏分组组件，`JPanel`正如其他人所建议的那样，它被实现为 a 。`GroupedComponent`即使隐藏，它也会保留它的大小。

![在此处输入图像描述](../Images/7f2799a4af34d6fec33a1759a7c7d564.png)   ![在此处输入图像描述](../Images/c7ec00b128df37953628850ad3f50538.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;

public class SimpleTest extends JFrame {
   GroupedComponent test = new GroupedComponent("one", "two", "three");

   public SimpleTest() {
      super("GroupedComponent Example");

      JPanel content = (JPanel)getContentPane();
      content.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 10));

      final JButton hideButton = new JButton(test.getButtonText());
      hideButton.setPreferredSize(new Dimension(100,hideButton.getPreferredSize().height));
      hideButton.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
            test.toggle();
            hideButton.setText(test.getButtonText());
         }
      });

      content.add(hideButton);
      content.add(test);
   }

   public static void main(String[] argv) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            SimpleTest c = new SimpleTest();
            c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            c.pack();
            c.setVisible(true);
         }
      });
   }

   class GroupedComponent extends JPanel {
      boolean visible = true;
      JTextField field;
      JButton button;
      JLabel label;

      GroupedComponent(String fieldText, String buttonText, String labelText) {
         super(new GridLayout(1, 3, 4, 4));

         field = new JTextField(fieldText);
         button = new JButton(buttonText);
         label = new JLabel(labelText);

         add(field);
         add(button);
         add(label);

         setBorder(new CompoundBorder(new LineBorder(Color.lightGray), new EmptyBorder(4,4,4,4)));
      }

      void toggle() {
         if(visible) {
            visible = false;
            field.setVisible(false);
            button.setVisible(false);
            label.setVisible(false);
         } else {
            visible = true;
            field.setVisible(true);
            button.setVisible(true);
            label.setVisible(true);
         }
      }

      String getButtonText() {
         return visible ? "Hide" : "Show";
      }
   }
} 
```

# php - Doctrine2 / Symfony2 --> 使用查找器对结果进行排序

> ID：14174523
> 
> 赞同：0
> 
> 时间：2013-01-05T17:42:00.423
> 
> 标签：php, symfony, doctrine-orm

使用 Doctrine2 和 Symfony2，我们如何直接对查询的结果进行排序？

你知道 Symfony 有这种有趣的方式来获取数据：

```
$array_objects = $repository->findAllByCriteria($criteria); 
```

这将导致所有对象都符合 $criteria 的数组。

但是如果我想得到一些 $sorting_criteria 直接排序的结果呢？

有没有类似的东西：

```
$sorted_array_objects = $repository->findAllByCriteria($criteria)->sort($sorting_criteria); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:49:34.103

好的，我知道了。

只需使用 QueryBuilder。

```
$arr_products = $pack_repo->createQueryBuilder('p')
    ->where('p.active = true')
    ->orderBy('p.rating', 'DESC')
    ->getQuery()
    ->getResult(); 
```

# c++ - 如何解决此链接器错误？

> ID：14174529
> 
> 赞同：4
> 
> 时间：2013-01-05T17:42:14.780
> 
> 标签：c++, opencv, linker, g++, eclipse-cdt

我正在尝试在 Eclipse 项目中使用已编译的库。编译运行良好，但在链接过程中出现错误。下面是在 Eclipse 控制台上生成的详细信息。

g++ -L/usr/local/lib -o "readInput" ./readInput.o -llibopencv_calib3d.so -llibopencv_contrib.so -llibopencv_core.so

```
/usr/bin/ld: cannot find -llibopencv_calib3d.so  
/usr/bin/ld: cannot find -llibopencv_contrib.so  
/usr/bin/ld: cannot find -llibopencv_core.so 
```

即使在提供库路径之后，我也不知道为什么链接器会给出找不到它的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T17:59:18.803

假设您拥有所有必需的库： for `libSOMETHING.so`，指定`-lSOMETHING`而不是`-llibSOMETHING.so`. 省略初始`lib`和最终`.so`。

# apache-flex - 如何检测 AIR htmlView.stage.nativeWindow 中的用户关闭？

> ID：14174532
> 
> 赞同：0
> 
> 时间：2013-01-05T17:43:02.657
> 
> 标签：apache-flex, air

我正在编写一个通用的 OAuth 组件（是的，它将是开源的），我想检测用户是否单击了 htmlView 上的关闭小部件（或者更准确地说，它的浏览器窗口）

我尝试在 htmlView 和 html.stage.nativeWindow 上都放置 CLOSE 侦听器，但无济于事。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:32:46.030

此代码可能会有所帮助

```
package com.bigspaceship.core.air
{
    // flash
    import flash.display.NativeWindow;
    import flash.desktop.NativeApplication;    

    import flash.events.Event;
    import flash.events.EventDispatcher;

    public class NativeWindowManager extends EventDispatcher
    {
        private var _window            :NativeWindow;
        private var _isMainWindow    :Boolean;
        public var isQuitBlocked    :Boolean;

        public static const PROMPT    :String        = "windowQuitPrompt";

        public function NativeWindowManager($window:NativeWindow,$isMainWindow:Boolean = false):void
        {
            _window = $window;
            _isMainWindow = $isMainWindow;
            _window.addEventListener(Event.CLOSING,_windowOnClose,false,0,true);
        };

        public function get window():NativeWindow { return _window; };

        private function _mainWindowOnClose($evt:Event):void
        {
            $evt.preventDefault();

            if(isQuitBlocked) dispatchEvent(new Event(PROMPT));
            else close();
        };

        public function close():void
        {
            _window.removeEventListener(Event.CLOSING,_windowOnClose);

            if(_isMainWindow) NativeApplication.nativeApplication.exit();
            else _window.close();

            _window = null;
        };
    };
}; 
```

# android - SqlLite 数据库

> ID：14174537
> 
> 赞同：0
> 
> 时间：2013-01-05T17:43:59.080
> 
> 标签：android, database

大家好，我正在尝试将信息添加到数据库中，但出现运行时错误。我对android和数据库很陌生。如果有人可以提供帮助，那就太好了，因为这是一项家庭作业，我被困住了。

```
public class Home extends MenuActivity {

        static int counter = 0;
        String url;
        String date;
        String content;
        int countMe = 0;
        int i = 0;
        StringBuilder sb;
        List<String> str;
        List<WebPage> pages = new ArrayList<WebPage>();
        long myDate;

        DatabaseHandler dh;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.home);

            regularExpresionStrings();

            dh = new DatabaseHandler(this);
    //      dh.addWarrior(new Warrior(1, "Kenobi", "high", 50 , 30, "kenobi"));

            dh.addWebPage(pages);

            Cursor cursor = dh.getAllAsCursor();

            String[] cols = new String[] {DatabaseHandler.url};
            int[] to = new int[] {R.id.imageView2};

    //        sca = new SimpleCursorAdapter(this, R.layout.home, cursor, cols, to, 2);
            //new SimpleCursorAdapter(context, layout, c, from, to, flags)
    //        mainListView.setAdapter(sca);  

        }

        /**
         * When this method is called we try to find a file in the sandbox area that
         * matches the DDMMYY extracted from the picker.
         * 
         * @param filename the name of the file (built using the DatePicker info)
         * @return the content of the file, or an error message if not found
         */
        private String load() 
        {
            try
            {
                Log.d("Home", " in the load method");

    //          final FileInputStream fis = openFileInput(filename);
                final InputStream fis =  getResources().openRawResource(R.raw.pages);
                final BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) 
                {
                    sb.append(line);
                }
                reader.close();
                fis.close();
                return sb.toString();
            } catch (Exception ex) {
                return "No entry exists for this file";
            }
        }

        private String regularExpresionStrings()
        {

            Log.d("Home222", " in the regularExpresionStrings method");
            String content = load();

            String[] parts = content.split("</html>");
            String pa = "";
            SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();

            for(int i=0; i<parts.length; i++)
            {
                pa = new String(parts[i] + "</html>");
                Log.d("Page" + (i + 1), pa);

                if(pa.contains("Address:"))
                {

                        url = pa.substring(pa.indexOf("http"), pa.indexOf("html") + 4);
                        Log.d("Address" + (i + 1), url);
                        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
                        Editor ed = prefs.edit();
                        ed.putString("URL", url);
                        ed.commit();

    //                  getPreferences(MODE_PRIVATE).edit().putString("URL ", url).commit();
                }

                if(pa.contains("Date:"))
                {
                    date = pa.substring(pa.indexOf("Date:") + 5, pa.indexOf("Date:") + 18);
                    myDate = Long.parseLong(date);
                    Log.d("Date" + (i + 1), date);

                    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
                    Editor ed = prefs.edit();
                    ed.putString("Date", myDate + "");
                    ed.commit();
    //              getPreferences(MODE_PRIVATE).edit().putString("Date ", myDate + "").commit();
                }

                content = pa.substring(pa.indexOf("<!DOCTYPE html>"), pa.indexOf("</html>")) + "</html>";
                Log.d("Content" + (i + 1), content);

                SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
                Editor ed = prefs.edit();
                ed.putString("Content", content);
                ed.commit();
    //          getPreferences(MODE_PRIVATE).edit().putString("Content ", content).commit();

                WebPage webPages = new WebPage(i++, url, content, myDate);
                pages.add(webPages);

            }
            Log.d("WebOff","File successfully imported");
            return content;
        }
    }

public class WebPage {

    /**
     * id represent the id of the table.
     */
    private int id;

    /**
     * url represent the url of the web page.
     */
    private String url;

    /**
     * source represent the source of the web page.
     */
    private String source;

    /**
     * date represent a date
     */
    private long date;

    public WebPage() {

    }

    /**
     * WebPage() creates a web page object
     * @param url set the current url with the passed one.
     * @param source set the current source with the passed one.
     * @param date set the current date with the passed one.
     */
    public WebPage(int id, String url, String source, long date) {
        this.url = url;
        this.source = source;
        this.date = date;
        Log.d("WebOff", "WebPage object created");
    }

    /**
     * @return the id
     */
    public int getId() {
        return id;
    }

//  /**
//   * @param id the id to set
//   */
    public void setId(int id) {
        this.id = id;
    }

    /**
     * getUrl() gets the url of the web page.
     * @return the url
     */
    public String getUrl() {
        return url;
    }

    /**
     * setUrl() sets the url of the web page.
     * @param url  to set
     */
    public void setUrl(String url) {

        this.url = url;
    }

    /**
     * getSource() gets the source fo the web page.
     * @return the source
     */
    public String getSource() {
        return source;
    }

    /**
     * setSource() sets the source of the web page.
     * @param source to set
     */
    public void setSource(String source) {
        this.source = source;
    }

    /**
     * getDate() gets the date.
     * @return the date
     */
    public long getDate() {
        return date;
    }

    /**
     * setDate() sets the date.
     * @param date to set
     */
    public void setDate(long date) {
        this.date = date;
    }

    public void webPage() {
        Log.d("Debug","" + this.url);
        Log.d("Debug", this.source);
        Log.d("Debug", this.date + "");
    }

}

public class DatabaseHandler extends SQLiteOpenHelper {
    /**
     * The name of the database
     */
    private static final String DATABASE_NAME = "WebOff.db";

    /**
     * The name of the (only) table.
     */
    private static final String TABLE_NAME = "pages";

    /**
     * The name of the first column (ID)
     */
    static final int _id = 0;

    /**
     * The name of the second column (url)
     */
    static final String url = "url";

    /**
     * The name of the third column (source)
     */
    static final String source = "source";

    static final int date = 0;

//  attack

    /**
     * A constructor which builds a DatabaseHandler object. Note that calling
     * the constructor does not create a database. This does not happen until
     * the first call to getReadableDatabase() or getWriteableDatabase()
     * 
     * @param context
     *            In this case, a reference to WarriorActivity
     */
    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, 1);
    }

    /**
     * This method is called when the database is created for the first time.
     * This is where the creation of tables and the initial population of the
     * tables should happen.
     */
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_NAME + "("
                + _id + " INTEGER PRIMARY KEY," 
                + url + " URL,"
                + source + " Source, " 
                + date + " Date" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
        Log.d("WebOff", "Database created successful");
    }

    /**
     * Called when the database needs to be upgraded. Only relevant when you
     * have multiple versions of the database scheme in play.
     * 
     */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldNum, int newNum) {
        // Drop older table if exist and create fresh
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }

    /**
     * Use this method to add a Warrior to the database.
     * 
     * @param Warrior
     *            the Warrior you want to add
     */
    public void addWebPage(List<WebPage> webPage) {

        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        ByteArrayOutputStream out = new ByteArrayOutputStream();

//      for(int i=0; i<webPage.size(); i++)
//      {
//          // Iterate through the list, adding the information stored within the WebPage object to the databese.
//          values.put("text", webPage.indexOf(i));
//      }
//      values.put(_id + "", webPage.getId());
//      values.put(url, webPage.getUrl());
//      values.put(source, webPage.getSource());
//      values.put(date +"", webPage.getDate() +"");
        db.insert(TABLE_NAME, null, values);
        db.close();

        Log.d("WebOff", "Database populated");
    }

    /**
     * Use this method to get all of the Warriors in the database.
     * 
     * @return a list of Warrior objects, one per row
     */
    public List<WebPage> getAll() {
        List<WebPage> list = new ArrayList<WebPage>();
        String selectQuery = "SELECT  * FROM " + TABLE_NAME;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        if (cursor.moveToFirst()) {
            do {
                WebPage webPage = new WebPage(cursor.getInt(0),
                        cursor.getString(1), 
                        cursor.getString(2),
                        cursor.getInt(3));
                list.add(webPage);
            } while (cursor.moveToNext());
        }
        cursor.close();
        db.close();
        return list;
    }

    /**
     * Use this method to get a Cursor object that points at all the Warriors in 
     * the database
     * 
     * @return a Cursor object pointing at all Warriors in db
     */
    public Cursor getAllAsCursor() {
        String selectQuery = "SELECT  * FROM " + TABLE_NAME;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        //db.close();
        return cursor;
    }

    /**
     * Use this method to remove all of the Warriors from the database. This is
     * useful when experimenting. After dropping all tables, the initial state
     * of the database is re-created.
     */
    public void removeAll() {
        SQLiteDatabase db = this.getWritableDatabase();
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }

    /**
     * This method removes one WebPage from the database.
     * 
     * @param WebPage
     *            the WebPage to remove
     */
    public void deleteWebPage(WebPage webPage) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_NAME, _id + " = ?",
                new String[] { String.valueOf(webPage.getId()) });
        db.close();
    }

    /**
     * This method updates the data stored in the database for one Warrior.
     * 
     * @param Warrior
     *            the Warrior to update
     * @return the number of rows affected
     */
    public int updateWebPage(WebPage webPage) {
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(_id + "", webPage.getId());
        values.put(url, webPage.getUrl());
        values.put(source, webPage.getSource());
        values.put(date + "", webPage.getDate());

        return db.update(TABLE_NAME, values, _id + " = ?",
                new String[] { String.valueOf(webPage.getId()) });
    }

    /**
     * This method gets a single WebPage from the database, using the ID field
     * as a key
     * 
     * @param id
     *            the ID of the WebPage we want
     * @return a Warrior object
     */
    public WebPage getWebPage(int id) {
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.query(TABLE_NAME, new String[] { _id + "", url,
                source, date + "" }, _id + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null) {
            cursor.moveToFirst();
        }
        WebPage webPage = new WebPage(Integer.parseInt(null, 
                cursor.getInt(0)),
                cursor.getString(1),
                cursor.getString(2),
                cursor.getInt(3));
        db.close();
        cursor.close();
        return webPage;
    }

    public WebPage getWebPageByName(String name){
        String selectQuery = "SELECT  * FROM " + TABLE_NAME + " WHERE " + _id + " =  '" +  name + "'";
        Log.d("Debug WebPage name: ", selectQuery);
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        WebPage webPage = null;
        if(cursor.moveToFirst()){
            webPage = new WebPage(cursor.getInt(0), 
                    cursor.getString(1),
                    cursor.getString(2),
                    cursor.getInt(3));
        }
        db.close();
        cursor.close();
        return webPage;
    }

} 
```

当我运行它时，我得到了这个：

```
01-05 17:24:19.594: E/Database(1524): Failure 1 (near "0": syntax error) on 0x2465e0 when preparing 'CREATE TABLE pages(0 INTEGER PRIMARY KEY,url URL,source Source, 0 Date)'.
01-05 17:24:19.699: E/AndroidRuntime(1524): java.lang.RuntimeException: Unable to start activity ComponentInfo{uk.ac.tees.L1087591/uk.ac.tees.L1087591.Home}: android.database.sqlite.SQLiteException: near "0": syntax error: CREATE TABLE pages(0 INTEGER PRIMARY KEY,url URL,source Source, 0 Date)
01-05 17:24:19.699: E/AndroidRuntime(1524): Caused by: android.database.sqlite.SQLiteException: near "0": syntax error: CREATE TABLE pages(0 INTEGER PRIMARY KEY,url URL,source Source, 0 Date)
01-05 17:24:19.699: E/AndroidRuntime(1524):     at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
01-05 17:24:19.699: E/AndroidRuntime(1524):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1727)
01-05 17:24:19.699: E/AndroidRuntime(1524):     at uk.ac.tees.L1087591.DatabaseHandler.onCreate(DatabaseHandler.java:76)
01-05 17:24:19.699: E/AndroidRuntime(1524):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
01-05 17:24:19.699: E/AndroidRuntime(1524):     at uk.ac.tees.L1087591.DatabaseHandler.addWebPage(DatabaseHandler.java:101)
01-05 17:24:19.699: E/AndroidRuntime(1524):     at uk.ac.tees.L1087591.Home.onCreate(Home.java:52)
01-05 17:24:19.699: E/AndroidRuntime(1524):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-05 17:24:19.699: E/AndroidRuntime(1524):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-05 17:24:19.699: E/AndroidRuntime(1524):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:46:19.130

你有`static final int _id = 0;`你的代码。您应该在此处提供一个字符串。您可以自己追踪它： SQL 查询无效，`0`不应该存在。

我建议用

```
static final String _id = "id"; 
```

可能还有其他错误，请尝试自己查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:46:23.757

改变

```
 static final int _id = 0;

  static final int date = 0; 
```

到

```
 static final int _id = "id";

  static final int date = "date"; 
```

因为表列名总是创建为字符串而不是整数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T17:51:16.697

您的 SQL 语句导致的错误：

> CREATE TABLE pages(0 INTEGER PRIMARY KEY,url URL,source Source, 0 Date)

你不能放 0 INTEGER PRIMARY KEY，列名应该是有意义的。如果 SQL 语句是由 java 代码生成的，那么您应该检查产生 0 的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T17:52:58.230

您的创建查询（在 DatabaseHandler::onCreate() 中执行）无效：

```
'CREATE TABLE pages(0 INTEGER PRIMARY KEY,url URL,source Source, 0 Date)' 
```

它应该看起来像这样：

```
'CREATE TABLE pages(id INTEGER PRIMARY KEY,url TEXT,source TEXT, INTEGER Date)' 
```

你可以在这里找到[SQLite 数据类型](http://www.sqlite.org/datatype3.html)。

# vb.net - 通过带有字符串的 my.resources 加载图像 (VBE2012)

> ID：14174542
> 
> 赞同：0
> 
> 时间：2013-01-05T17:44:19.693
> 
> 标签：vb.net, embedded-resource

我正在尝试创建一个 5 张抽牌扑克程序。

```
Dim Rndm As New Random
Dim PictureBox(5) As PictureBox
Dim HiddenCards As New List(Of String)

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    Dim CardDeck() As String = {"AoH", "AoD", "AoC", "AoS", "ONEoH", "ONEoD", "ONEoC", _
                                "ONEoS", "TWOoH", "TWOoD", "TWOoC", "TWOoS", "THREEoH", "THREEoD", "THREEoC", _
                                "THREEoS", "FOURoH", "FOURoD", "FOURoC", "FOURoH", "FIVEoH", "FIVEoD", _
                                "FIVEoC", "FIVEoS", "SIXoH", "SIXoD", "SIXoC", "SIXoS", "SEVENoH", _
                                "SEVENoD", "SEVENoC", "SEVENoS", "EIGHToH", "EIGHToD", "EIGHToC", "EIGHToS", _
                                "NINEoH", "NINEoD", "NINEoC", "NINEoS", "TENoH", "TENoD", "TENoC", _
                                "TENoS", "JoH", "JoD", "JoC", "JoS", "QoH", "QoD", _
                                "QoC", "QoS", "KoH", "KoD", "KoC", "KoS"}

    Dim ListofCards As List(Of String) = CardDeck.ToList
    Dim Count As Integer = 0
    Dim Selected As Integer = 0

    For intCard As Integer = 0 To 5
        Count = ListofCards.Count
        Selected = Rndm.Next(0, Count)
        PictureBox(intCard) = PictureBox1
        With PictureBox(intCard).Image = My.Resources.CardDeck()
        End With
    Next
End Sub 
```

我特别想弄清楚如何从`CardDeck`要加载的字符串中获取选定的卡片，因为我有一个随机生成卡片的 rnd 函数。在进入下一部分之前，我想先完成这项工作。它给我的错误是这样的：

> `CardDeck`是资源中的一种类型，不能用作表达式。

有人能指出我到底做错了什么并告诉我如何加载随机生成的卡吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:10:39.680

您正在尝试使用[With...End With 语句](http://msdn.microsoft.com/en-us/library/wc500chb%28v=vs.80%29.aspx)并且您的语法错误，这就是您遇到该错误的原因。

**编辑：**

```
For intCard As Integer = 0 To 5
    Count = ListofCards.Count
    Selected = Rndm.Next(0, Count)
    PictureBox(intCard) = PictureBox1
    With PictureBox(intCard)
        .Image = My.Resources.CardDeck()
    End With
Next 
```

# javascript - 为什么这个 itemDataSource 没有被清除？

> ID：14174546
> 
> 赞同：0
> 
> 时间：2013-01-05T17:44:47.150
> 
> 标签：javascript, listview, winjs, itemdatabound

我正在尝试从我的应用程序中的 itemDataSource 中删除所有项目。itemDataSource 绑定到一个列表视图。

在列表视图中单击时，我设法删除了单个项目，但是删除所有项目给我带来了问题:(

这是我用来从 itemDataSource 中删除单个项目的代码：

```
//remove the clicked playlist item
var ds = document.getElementById("PlaylistListView").winControl.itemDataSource;
ds.beginEdits();
ds.remove(ds.itemFromIndex(eventInfo.detail.itemPromise._value.index)._value.key);
ds.endEdits(); 
```

这是我尝试编写的删除所有项目的代码：

```
var ds = document.getElementById("PlaylistListView").winControl.itemDataSource;
ds.beginEdits();
console.log(ds._list._keys);
console.log("There are " + ds._list._keys.length + " items in this list");
for (var i = 0; i < ds._list._keys.length; i++) {
    ds.remove(ds._list._keys[i]);
    console.log("Item: " + ds._list._keys[i] + " has been removed from the list");
}
ds.endEdits(); 
```

这是我在运行此代码时在控制台中得到的输出：

```
1,2,3,4,5,6,7,8,9,10,11
There are 11 items in this list
Item: 2 has been removed from the list
Item: 4 has been removed from the list
Item: 6 has been removed from the list
Item: 8 has been removed from the list
Item: 10 has been removed from the list
Item: undefined has been removed from the list 
```

为什么只有*一些*项目被删除？输出如预期的那样，但是是什么导致项目`1,3,5,7,9, and 11`没有被删除？我注意到序列中有一个模式，每次都是 2。

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:56:03.240

这是因为您正在从列表中删除内容，然后重新索引到它。当您删除第 6 项时，第 7 项变为第 6 项，第 8 项变为第 7 项，因此您不删除（原始）第 7 项，而是删除（原始）第 8 项。

如果您只是删除索引 0 直到它们没有项目，它应该工作得更好。另请查看列表中的 clear() 以支持清除它。

此外，我注意到您使用了很多内部状态（以_ 为前缀的项目）——您可能需要小心，因为这些状态随时可能发生变化。

# python - 如何从 python 文件中执行 bash？

> ID：14174548
> 
> 赞同：4
> 
> 时间：2013-01-05T17:44:51.047
> 
> 标签：python, bash, execute

我想知道是否可以从 python 文件中执行 bash 代码。我并不是说运行一个完全不同的 bash 文件。我正在寻找一种方法来轻松执行一行或更长的 bash 代码。具体来说，我想执行我从今天早些时候提出的问题中得到帮助的这段代码。

```
shopt -s nullglob
dirs=(*/)
cd -- "${dirs[RANDOM%${#dirs[@]}]}" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T18:04:43.107

将字符串作为`sh`脚本运行（假设为 POSIX）：

```
#!/usr/bin/env python
from subprocess import check_call as x

x("""pwd
cd /
pwd""", shell=True) 
```

您可以明确指定命令：

```
x(["bash", "-c", '''shopt -s nullglob
dirs=(*/)
pwd
cd -- "${dirs[RANDOM%${#dirs[@]}]}"
pwd''']) 
```

注意：它只检查您是否可以`cd`进入随机子目录。更改在 bash 脚本之外不可见。

你可以在没有 bash 的情况下做到这一点：

```
#!/usr/bin/env python
import os
import random

print(os.getcwd())
os.chdir(random.choice([d for d in os.listdir(os.curdir) if os.path.isdir(d)]))
print(os.getcwd()) 
```

你也可以使用`glob`：

```
from glob import glob

randomdir = random.choice(glob("*/")) 
```

与之相比的不同之`os.listdir()`处在于`glob()`过滤以点开头的目录`.`。您可以手动过滤它：

```
randomdir = random.choice([d for d in os.listdir(os.curdir)
                           if (not d.startswith(".")) and os.path.isdir(d)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:48:14.907

您可以执行 bash 代码，但它的任何影响（特别是`cd`）只会影响它运行的子进程，因此没有意义。相反，所有这些都可以通过 Python 命令完全实现（查看[`glob`](http://docs.python.org/2/library/glob.html)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T17:48:50.270

您可以使用参数设置为 true的[子流程](http://docs.python.org/3/library/subprocess.html)模块中的[`os.system`](http://docs.python.org/3/library/os.html#os.system)或函数。`shell`

请注意，您在 bash 中所做的许多事情都可以在 Python 中轻松完成，同时保持平台独立性。例如，我最近尝试在 Windows 上运行一个 Python 脚本，该脚本使用许多 unix 命令来执行简单的操作，例如 grepping 一些文本，因此失败了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T17:52:23.303

最好的方法是使用[命令模块](http://docs.python.org/2/library/commands.html)

例如：

```
>>> import commands
>>> (status,output)=commands.getstatusoutput("ls")
>>> print(output)#print the output
>>> print(status)#print the status of executed command 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T19:07:52.850

你也可以这样做。

```
import os
os.system("system call 1")
os.system("system call 2")

(etc) 
```

您可以通过这种方式编写 shell 脚本并使用 Python（更好的）循环和条件执行工具。

# iphone - 获取通讯录联系人列表并导入 iPhone 和 iPhone 模拟器

> ID：14174550
> 
> 赞同：2
> 
> 时间：2013-01-05T17:45:14.267
> 
> 标签：iphone, objective-c, ios, contacts, addressbook

我正在构建一个广泛使用 iPhone 地址簿的应用程序。不幸的是，我的设备上只加载了几个联系人，而在我的 iPhone 模拟器和 Mac 中加载的更少。有谁知道任何来源/文件/等，我可以在其中获得大量通讯录联系人列表，我可以将其导入我的设备和模拟器以进行基于性能的测试？

注意：我很欣赏有关如何将 vcf 导入 iPhone 的答案，但更重要的是：我正在寻找一个可以下载 10K 左右的联系人/vcf/类似格式的地方？或者可能是一个随机的 VCF 生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:48:08.133

`ABPersonCreateVCardRepresentationWithPeople`使用（例如从您的主机）将它们全部导出为 vcf 文件，
或者在 google 上查看 .. 但这对于 SO 来说确实是题外话。重点是：得到一个vcf文件

`ABPersonCreateWithVCardRepresentation`然后在模拟器中运行的应用程序中导入该数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:58:33.177

基于 Daij-Djan 的回答，因为这是我使用的方法，它不需要任何代码：

尽管您提到了 Mac，但作为最后的手段，如果使用 Windows PC，您可以将联系人 vcf 添加到您的用户目录\联系人文件夹，然后让 iTunes 同步它们。将它们与您的设备同步后，它们应该在您的设备中。联系人可以来自外部软件，如 Microsoft Outlook 或任何类型的导出联系人。

# google-maps-api-3 - kmlLayer 导致焦点改变（谷歌地图 api v3）

> ID：14174552
> 
> 赞同：2
> 
> 时间：2013-01-05T17:45:18.677
> 
> 标签：google-maps-api-3, kml, weather

我在焦点为 8 的地图上分层 NOAA 雷达信息。当页面加载时，地图最初以 8 呈现，然后立即重绘自身以显示整个区域。

我使用的 KML 文件包含用于绘制雷达图像的最小/最大纬度/经度坐标（在本例中为美国东南部地区）。如果我更改这些坐标以覆盖更小的区域，谷歌地图的大小会按照我的意愿调整，但雷达活动会根据 KML 文件进行裁剪。如果用户缩小或滚动到默认地图区域之外，这是一个问题。

示例地图： http: [//georgiaoffroad.com/map2.html](http://georgiaoffroad.com/map2.html)

示例 KML 文件： http: [//georgiaoffroad.com/includes/southeastradar.kml](http://georgiaoffroad.com/includes/southeastradar.kml)

有没有办法让雷达图像保持较大，但将地图聚焦在可用雷达图像的较小区域上，以便用户可以缩放或滚动查看周边地区的天气？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T17:59:40.783

`preserveViewport`将图层的选项设置为true：

```
new google.maps
     .KmlLayer({url:'http://georgiaoffroad.com/includes/southeastradar.kml',
                preserveViewport:true}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T18:14:04.870

我意识到这是一个很晚的答案，但我想发布我使用的最适合我的技术。Molle 博士发布的方法要么不再有效，要么对我不起作用。

添加“ctaLayer.set('preserveViewport', true);” 将图层设置为地图后，地图将不会自动聚焦到该 kmz/kml 文件。

```
var ctaLayer = new google.maps.KmlLayer('/kmz/90201.kmz');
          ctaLayer.setMap(map);
          ctaLayer.set('preserveViewport', true); 
```

# java - 在 Java 中使用 BufferedReader 类读取文本文件

> ID：14174553
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:45:27.720
> 
> 标签：java, substring, bufferedreader

我正在尝试创建一个名为的静态方法`findOccurrences()`，它接受一个`String`名为`subString`. 首先，该方法必须提示用户输入带有`.txt`扩展名的文件的路径名，然后用于创建`File`对象。然后该方法需要在该文件上打开一个流。`subString`随后，该方法必须一次从流中读取一行，并且对于每一行，该方法需要将字符串参数在该行中出现的次数打印到标准输出。

该方法的示例输出应如下所示：

```
The substring "FRED" occurs 2 times in line 1
The substring "FRED" occurs 1 times in line 2
The substring "FRED" occurs 4 times in line 3
The substring "FRED" occurs 0 times in line 4 
```

该方法需要确保当`while`循环终止时，文件中的所有行都已被读取。保存文件当前行的字符串应转换为大写。在另一个循环中，该方法需要确定其参数（转换为大写）作为当前行中的子字符串出现的次数。因此，例如，如果当前行包含字符串“BRITAIN POSSESSES TALENT”，搜索子字符串“SSES”应该会出现两次。

现在，我尽了最大努力，并为所需的方法开发了下面的代码。但不幸的是，每次我编译它时，编译器都会抛出一个错误：`foreach not applicable to expression type`这就是我卡住的地方！所以我只是想知道你们是否可以帮助找出我哪里出错了。

以下是我开发的完整代码：

```
public static void countOccurrences (String subString)
{
   OUDialog.alert("Please choose a file to search");
   String pathname = OUFileChooser.getFilename();
   File aFile = new File(pathname);
   BufferedReader bufferedFileReader = null;

   int numOfOccurrencesInLine;
   int lineNumber = 0;
   int lineIndex;
   subString = subString.toUpperCase();
   String currentLine;
   try
   {
      bufferedFileReader = new BufferedReader(new FileReader(aFile));
      currentLine = bufferedFileReader.readLine();
      while (currentLine != null)
      {
         currentLine = bufferedFileReader.readLine();
         currentLine.toUpperCase();
         lineIndex = currentLine.indexOf(subString, lineNumber);
         subString = currentLine.substring(lineIndex);
         numOfOccurrencesInLine = 0;
         for (int eachOccurrence : currentLine)
         {
            numOfOccurrencesInLine = numOfOccurrencesInLine + eachOccurrence;
            System.out.println("The substring " + subString + "occurs 2 times in line " + lineNumber);
         }
      }
   }
   catch (Exception anException)
   {
      System.out.println("Error: " + anException);
   }
   finally
   {
      try
      {
         bufferedFileReader.close();
      }
      catch (Exception anException)
      {
         System.out.println("Error: " + anException);
      }
   }
} 
```

感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:52:14.610

除了您确实应该将这些功能拆分为单个方法这一事实之外，您使用的是`foreach`错误的。您正在遍历一个`String[]`数组，因此您需要将 'int eachOccurrence' 更改为`String eachOccurrence`.
编辑：您实际上并没有遍历数组。您想遍历 a `String`，但`String`没有实现`Iterable`.
你真的应该拿一本像样的编程书。再次仔细阅读您的代码后，有几个错误。例如，你读了你的行两次，覆盖了第一个读行。因此，只需留下第二个`currentLine = bufferedFileReader.readLine();`（检查后的那个`null`）。

# wpf - 将字符串值分配给 img 源 wpf

> ID：14174554
> 
> 赞同：1
> 
> 时间：2013-01-05T17:45:35.170
> 
> 标签：wpf, wcf-binding, .net-4.5

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    // TODO: Assign a bindable collection of items to this.DefaultViewModel["Items"]

    if (Convert.ToInt32(navigationParameter) >= 0)
    {
        BindData();
        BindData();
        txt1.Text = data[Convert.ToInt32(navigationParameter)].Name;
        Img.Source = data[Convert.ToInt32(navigationParameter)].ImagePath;
    } 
```

我想将 img 源设置为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:48:05.773

你可以写

```
Img.Source = new BitmapImage(new Uri(data[Convert.ToInt32(navigationParameter)].ImagePath)); 
```

* * *

更新

如果`ImagePath`是相对路径，您可以这样写：

```
var path = data[Convert.ToInt32(navigationParameter)].ImagePath;
var uri = new Uri(path, UriKind.Relative);
Img.Source = new BitmapImage(uri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:54:03.520

```
myImage.Source = ImageFromRelativePath(this, "relative_path_to_file_make_sure_build_set_to_content");

public static BitmapImage ImageFromRelativePath(FrameworkElement parent, string path)
{
    var uri = new Uri(parent.BaseUri, path);
    BitmapImage result = new BitmapImage();
    result.UriSource = uri;
    return result;
} 
```

# web-services - BPEL 输出字符串

> ID：14174572
> 
> 赞同：2
> 
> 时间：2013-01-05T17:47:56.353
> 
> 标签：web-services, eclipse-plugin, bpel

我是 BPEL 和 Web 服务的新手。我有一个返回字符串数组的网络服务。在 BPEL 中，我调用此 Web 服务并在 Apache ODE 中部署该 Web 服务。我在 Eclipse 中使用 BPEL 设计器工具。

我从 BPEL 服务得到的结果是数组中的第一个元素，在控制台中我可以看到整个数组正在被传递。如何将输出设置为数组？我的输出变量的类型是字符串，我找不到诸如列表、数组或字符串列表之类的类型。

这个字符串列表：

```
<xs:element name="getAvailableBungalowsResponse">
            <xs:complexType>
                <xs:sequence>
                    <xs:element maxOccurs="unbounded" minOccurs="0" name="return" nillable="true" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element> 
```

应该进入这个：

```
<complexType name="Bungalow">

            <sequence maxOccurs="unbounded" minOccurs="0">
                <element name="bungalowInfo" type="string"></element>
            </sequence>
        </complexType> 
```

Bpel 从到到看起来像这样：

```
<bpel:copy>
            <bpel:from part="parameters" variable="HolidayVillageServiceLinkResponse">
            </bpel:from>
            <bpel:to part="bungalows" variable="output">
            </bpel:to>
        </bpel:copy> 
```

我在 BPEL 设计器中遇到的错误如下：

```
The from-spec of "<xs:complexType>" is not compatible with to-spec of "<complexType "Bungalow">" - Element <ns:return> in platform:/resource/HolidayVillage/bpelContent/HollidayVillage.wsdl differs from <tns:bungalowInfo> in platform:/resource/HolidayVillage/bpelContent/HolidayVillageReservationArtifacts.wsdl - different QNames: ns:return vs tns:bungalowInfo HolidayVillageReservation.bpel  /HolidayVillage/bpelContent line 98 BPEL Validation Marker 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:21:47.580

BPEL 中的类型是根据 XMLSchema 定义的，因此没有像数组或列表这样的概念，但是您可以通过将基数设置为无界来定义字符串元素的序列。如果您需要为返回值组装一个字符串列表，请参见[此处](https://stackoverflow.com/questions/14129798/returning-complex-type-response-at-bpel)

# java - 如何在 Web 应用程序中嵌入 Apache derby

> ID：14174582
> 
> 赞同：1
> 
> 时间：2013-01-05T17:49:07.970
> 
> 标签：java, web-applications, derby

我刚开始开发一个网络应用程序。我想将 Apache derby 用作打包在我的 Web 应用程序中的数据库。这是我正在使用的罐子列表

> derby.jar、
> derbyclient.jar、
> derbynet.jar、
> derbytools.jar

我无法建立连接。代码片段在这里

```
//start the server
NetworkServerControl networkServerControl= new NetworkServerControl(InetAddress.getByName("localhost"),1527);
networkServerControl.start(null);
//establish connection & create database
connection = DriverManager.getConnection("jdbc:derby://localhost:1527/LoginDB;create=true"); 
```

它抛出了这个异常

```
No suitable driver found for jdbc:derby://localhost:1527/LoginDB;create=true 
```

我已将所有库放在我的 Web 应用程序的 WEB-INF/lib 文件夹中。如何获得连接？

**更新：**

添加更多细节

```
java.sql.SQLException: No suitable driver found for jdbc:derby://localhost:1527/LoginDB;create=true
Jan 05, 2013 10:41:23 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [ReadProperty] in context with path [/Question] threw exception
java.lang.NullPointerException
    at org.humbledevelopers.question.DerbyDemo.main(DerbyDemo.java:96) 
```

第 96 行的代码：`statement=connection.createStatement();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:57:39.037

如果您尝试将 derby 作为应用程序的一部分运行，则无需使用 tcp 连接连接到 derby。

[在此处获取更多详细信息](http://db.apache.org/derby/papers/DerbyTut/embedded_intro.html)

# php - 缓存 php 生成的 javascript 页面

> ID：14174583
> 
> 赞同：3
> 
> 时间：2013-01-05T17:49:09.827
> 
> 标签：php, javascript, caching

我有一个 php 生成的 javascript 页面，该页面正在从数据库创建一个数组，并且绝对会浪费我的页面加载时间。该页面具有 php 扩展名，并且当前使用标头将其内容类型标记为 application/javascript。

我在网上找到了一个可能的解决方案，但它似乎对加快我的页面加载时间没有多大作用。我现在文件的头代码是这样的：

```
header("Cache-Control: must-revalidate");
$offset = 60 * 60 * 24 * 3;
$ExpStr = "Expires: " . gmdate("D, d M Y H:i:s", time() + $offset) . " GMT";
header($ExpStr); 
header("Content-type: application/javascript"); 
```

我需要做些什么来缓存文件，以免它不断尝试加载这些数据库调用吗？我正在使用 IIS 7.5 和 PHP 5.3.13。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:14:54.370

如果数据库查询如此昂贵，最简单的方法是将整个生成的输出写入文件并仅输出文件，而不是每次加载页面时都查询数据库。您所要做的就是在数据库更改时删除/更新文件。

您还应该考虑查看内存缓存并尽可能优化您的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T18:28:15.907

我一直在`max-age`指令中使用缓存控制。

```
header('Cache-Control: max-age=' . $expires);
header('Expires: ' . gmdate('D, d M Y H:i:s', time() + $expires) . ' GMT'); 
```

但我也同意前面的评论。如果您的数据库调用真的那么昂贵，请考虑抵消这些调用的频率。例如，如果您想每天更新一次数据库缓存，我会这样做。

*   将数据库查询的结果写入文件并根据生成日期命名。
*   在执行这些调用的文件中，让它查看缓存文件的生成日期，如果它超过一天，请重新生成它。如果它更年轻，只需读取/使用缓存。

您可以选择让 IIS 通过任务调度程序运行更新脚本，然后使 js 的脚本永远无法进行年龄检查，只需从缓存中读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T18:32:21.357

在我看来，您正在对标签中的数组进行硬编码。如果数组真的很大，浏览器必须加载更多字节。

考虑将 AJAX 与 JSON 结合使用。使用例如 jQuery 从另一个脚本加载数据。例如 api.php?req=getBigArray。加载数组时，jQuery“成功”回调运行逻辑。这意味着将完成两个 http 请求，但它会一次加载您的页面。

服务器端：

```
<?php //api.php
switch($_GET['req']){
 case "getBigArray": 
    $arrayFromDatabase = array( /* Load from db ... */ );
    echo json_encode($arrayFromDatabase); 
 break;
} 
```

客户：

```
$(document).ready(function(){
    $.getJSON('api.php?req=getBigArray', function(data) {
        console.log(data); // Use data in some way.
    });
}); 
```

这也将逻辑与服务器端/前端分离。

如果您想在后端缓存结果，还可以查看 memcache/apc。非常简单的 API，但需要在服务器端安装额外的软件。

# php - 致命错误：未捕获的 SoapFault 异常：[soap:Client]

> ID：14174584
> 
> 赞同：4
> 
> 时间：2013-01-05T17:49:11.903
> 
> 标签：php, soap, payment-gateway

嗨，我的支付网关有问题，当工作在网关中完成并通过下面的编码返回到该文件时

```
 <?php
 include("app/config.php"); 
 $db_connect = mysql_connect($AppConfig['db']['host'],$AppConfig['db']['user'],$AppConfig['db']['password']);
 mysql_select_db($AppConfig['db']['database'], $db_connect);
 $rest=mysql_query("SELECT * FROM p_players WHERE player_type=2" );   
 $rowa = mysql_fetch_assoc($rest); 
 $nameadmin=$rowa['name'];
 $idadmin=$rowa['id'];

 // Form Content
 echo '<html dir="rtl">
  <head>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <style>
    .title
    {
        height:30px;
    }     
    input
    {
        font-family:tahoma;
    }
  </style>
  </head>
  <body style="font-family:tahoma;line-height:30px">';
  //echo $this->package['cost'].'--'.$AppConfig['plus']['packages'][0]['cost'];

 // echo $st[1];
 // echo $AppConfig['plus']['payments']['paypal']['merchant_id'];
    if(isset($_POST['status']) && $_POST['status'] == 100){

    $Resnumber = $_POST['resnumber'];
    $Refnumber = $_POST['refnumber'];

    $info = split("_",$Resnumber,2);

    $UID = $info[0];
    $PgID = $info[1];

    $MerchantID = $AppConfig['plus']['payments']['paypal']['merchant_id'];
    $Password = $AppConfig['plus']['payments']['paypal']['key'];

    $Price = $AppConfig['plus']['packages'][$PgID]['cost'];

    $client = new SoapClient('http://merchant.parspal.com/WebService.asmx?wsdl');

    $res = $client->VerifyPayment(array("MerchantID" => $MerchantID , "Password" =>$Password , "Price" =>$Price,"RefNum" =>$Refnumber ));

    $Status = $res->verifyPaymentResult->ResultStatus;
    $PayPrice = $res->verifyPaymentResult->PayementedPrice;

    if($Status == 'success')// Your Peyment Code Only This Event
    {
    $result = mysql_query("SELECT * FROM p_players WHERE id='$UID'");
        while($row = mysql_fetch_array($result)){
            $idplayer=$row['id'];
            $nameplayer=$row['name'];
            $goldb=$AppConfig['plus']['packages'][$PgID]['gold'];

            $subject="خريد با موفقيت";
            $sendsms="خريد شما با موفقيت انجام شد و تعداد $goldb طلا به حسابتان واريز گرديد .  با تشکر از خريدتان -  شماره رسيد پرداخت $Refnumber";
            $Codemaker=rand(10000,200000000);
            $goldenb=0;

            mysql_query("UPDATE p_players SET gold_num = gold_num + '$goldb',new_mail_count=new_mail_count+1,codemaker='$Codemaker',goldb='$goldenb' where id='$idplayer' ") or die(mysql_error());  
            mysql_query("INSERT INTO `p_msgs` (`from_player_id`, `to_player_id`, `from_player_name`, `to_player_name`, `msg_title`, `msg_body`, `creation_date`, `is_readed`, `delete_status`) VALUES( '$idadmin', '$idplayer', '$nameadmin', '$nameplayer', '$subject', '$sendsms', now(), 0, 0)");
        }   

    echo '<div style="color:green">
      بازگشت از عمليات پرداخت، با موفقيت انجام شد.
      <br />
        شماره رسيد : '.$_POST['refnumber'].'
    <br/>
      <a href="http://'.$_SERVER['SERVER_NAME'].'">مشاهده سايت</a></div>';
      exit();
}
else {
    echo '<div style="color:red">
      شماره رسيد صحيح نمي باشد . '.$Status.'
      <br />
        شماره رسيد : '.$_POST['refnumber'].'
    <br/>
      <a href="http://'.$_SERVER['SERVER_NAME'].'">مشاهده سايت</a></div>';
      exit();
}

    }
    if(isset($_POST['status'])){
    echo '<div style="color:red">
  بازگشت از عمليات پرداخت، خطا در انجام عمليات پرداخت ( پرداخت ناموق ) !
  <br />
  <a href="http://'.$_SERVER['SERVER_NAME'].'">مشاهده سايت </a></div>';
  exit();
    }

   echo '</body>
    </html>';
  ?> 
```

我正面临以下错误

> 致命错误：未捕获的 SoapFault 异常：[soap:Client] 服务器无法读取请求。---> XML 文档中存在错误 (2, 235)。---> 输入字符串的格式不正确。在 /home/travianx/public_html/ts1/parspal.php:53 堆栈跟踪：#0 /home/travianx/public_html/ts1/parspal.php(53): SoapClient->__call('VerifyPayment', Array) #1 / home/travianx/public_html/ts1/parspal.php(53): SoapClient->VerifyPayment(Array) #2 {main} 在第 53 行的 /home/travianx/public_html/ts1/parspal.php 中抛出

我联系了我的付款支持，他们说我必须提供访问权限：[http ://merchant.parspal.com/WebService.asmx?wsdl](http://merchant.parspal.com/WebService.asmx?wsdl)

而且我不知道他们是怎么说的以及怎么说的！请帮我！我有 vps 和 cpanel 安装在它上面

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T17:51:36.030

您需要捕获您的 Soap 客户端错误，它们通常会返回更多格式：

```
try{
    $client = new SoapClient('http://merchant.parspal.com/WebService.asmx?wsdl');
    $res = $client->VerifyPayment(array("MerchantID" => $MerchantID , "Password" =>$Password , "Price" =>$Price,"RefNum" =>$Refnumber ));
}catch (SoapFault $e){
    print_r($client);
    // or other error handling
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-20T11:34:30.600

在我的情况下，服务器无法访问（IP 受限），并且来自 Web 服务的*标准错误页面*有一些 DTD 标头：

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">`

删除 ip 访问限制（项目仍在开发中）解决了问题；）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-08-27T04:44:36.070

我解决了这个问题，只需要在你的 webservice php 代码末尾避免空格

```
<?php

.. (my php webservice)
.. (some code)
..

$server->service($POST_DATA);
exit();
?>**(here have an space or enter who cause this problem)** 
```

# android - 在没有 UI 的情况下在后台运行 Activity

> ID：14174586
> 
> 赞同：2
> 
> 时间：2013-01-05T17:49:20.370
> 
> 标签：android, android-service, android-ui, android-gesture

在我的应用程序中，我想使用隐身模式，以便其中包含一些活动的服务将在后台运行。但同时在某些客体或某些键组合上，我需要启动另一个活动，其中将包含一些 UI。这可能吗？如果是这样，请告诉我我已尝试在屏幕上使用长按，但它需要运行一个活动才能启动另一个活动，而当我尝试覆盖主页按钮或菜单按钮时，它再次需要在前面运行一个活动才能启用长按。有没有一种方法可以让我通过服务或不使用活动来使用客座听众。请建议我为这个问题提供一个好的解决方案，因为我一直在寻找同样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:11:15.543

出于安全原因，SDK 不允许这样做，因为恶意应用程序可能会拦截用户的触摸事件并吸收它们，从而使设备的任何其他功能无用。

但是，您可以让您的应用程序侦听摇动事件，并在用户从服务中摇动设备时启动您的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:24:39.127

我认为[Android 通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)非常适合您的需求。您可以将服务的图标“注入”到 Android 屏幕中，并对与用户的交互做出反应。您可以在 SO 上找到答案，它演示了如何从通知中启动活动。这是[一个例子](https://stackoverflow.com/questions/2326622/starting-activity-through-notification-avoiding-duplicate-activities)。

# asp.net - Silverlight 客户端的 asp.net web api 安全错误

> ID：14174592
> 
> 赞同：2
> 
> 时间：2013-01-05T17:49:47.353
> 
> 标签：asp.net, silverlight, security, cross-domain-policy

我正在尝试从 Silverlight 客户端访问 ASP.NET WEB API 服务，并且收到从 Web 客户端返回的“安全错误”错误。该服务在 Fiddler 或浏览器中运行良好。

我在 Silverlight 主机站点上的 clientacesspolicy.xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*" http-methods="*">
        <domain uri="*" />
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true" />
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

我认为这应该允许我访问任何网站。

ASP.NET WEB API 是从 IIS Express 中的调试器运行的 VS 2012。它永远不会受到 Silverlight 客户端的影响。

**更新：** Duh，如果您将 clientaccesspolicy.xml 放在正在访问的服务的根文件夹中，它会有所帮助。我将它放在 Silverlight 应用程序的根目录中，它只会对托管在那里的服务有所帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:55:37.730

将您`clientacesspolicy.xml`放在 webapi 站点的根目录中，而不是 silverlight

# git - 自动生成/删除詹金斯工作

> ID：14174594
> 
> 赞同：3
> 
> 时间：2013-01-05T17:49:58.017
> 
> 标签：git, maven, jenkins

我正在寻找一种自动创建一组詹金斯作业的方法（通常在创建新的（git）分支之后）。我已经为 Maven 尝试过这个插件：

[http://evgeny-goldin.com/wiki/Maven-jenkins-plugin](http://evgeny-goldin.com/wiki/Maven-jenkins-plugin)

它工作正常+从单个 pom.xml 文件中管理所有 jenkins 作业非常酷，其中名称、分支 id 等可以参数化（例如通过属性）！

唯一的缺点是我还没有弄清楚如何再次删除作业，但它应该很容易放入清理脚本中。

有没有更好的方法来自动生成詹金斯工作？例如。直接从构建脚本（pom.xml、build.gradle 等）使用 jenkins api。

我正在研究的其他方法：

[http://entagen.github.com/jenkins-build-per-branch/](http://entagen.github.com/jenkins-build-per-branch/)

[http://amokti.me/2011/10/11/automatic-opt-in-branch-building-with-jenkins-and-git-2/](http://amokti.me/2011/10/11/automatic-opt-in-branch-building-with-jenkins-and-git-2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:54:36.937

另一种方法是将[Gerrit](http://code.google.com/p/gerrit/)引入工作流程。提交审查的补丁集在 Gerrit 中作为分支实现。有一个[Jenkins 插件](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger)可以自动构建和测试这些审查请求，这是一个非常方便的功能，我认为可以满足您的需求。

Gerrit 被几个大型开源项目使用：

*   [开放堆栈](http://wiki.openstack.org/GerritJenkinsGithub)
*   [蚀](http://wiki.eclipse.org/Gerrit)
*   [云代工](http://blog.cloudfoundry.org/2012/04/11/the-new-cloudfoundry-org-gerrit-jenkins-github/)

# c++ - 如何将窗口分为游戏栏和高分栏

> ID：14174595
> 
> 赞同：0
> 
> 时间：2013-01-05T17:50:04.293
> 
> 标签：c++, window, sfml

我正在使用 SFML 开发一款游戏 Snake。游戏快结束了，能动，能吃，能扩张，能死等等。

我现在想要的是“游戏场”上的高分栏。我想知道是否有某种方法可以在竞技场和高分栏中划分窗口。

例如，蛇可能在 posY: 0 px 处移动，但实际上是窗口的 100px。这样我就不必更改所有代码并使蛇在 < 100 像素时“死”。可以分割窗口还是有另一种更好的方法？我想要这样的东西（只是我做的一个例子）：

[http://imgur.com/orO9m](http://imgur.com/orO9m)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:33:12.157

我建议您将游戏对象与它们在屏幕上的位置等问题分开。相反，他们应该存储他们在比赛场地上的位置。然后，知道它位于渲染窗口顶部下方 100 像素的比赛场地，可以绘制游戏对象，进行适当的变换。

# mysql - MySQL 多对多连接，即使没有关系

> ID：14174596
> 
> 赞同：0
> 
> 时间：2013-01-05T17:50:06.293
> 
> 标签：mysql

我在学生和测验表之间有一个多对多的关系，通常会使用 3 个表进行设置，每个表和一个连接表。我想列出所有学生及其相应的测验分数*，并列出他们从未参加过的测验*。这意味着即使他们在路口没有任何关系，我也想接受学生进行测验

数据库的当前状态是我有 3 个学生和 2 个测验。前两个参加了第一次测验，但没有参加第二次测验。第三个学生两个都没有。这意味着联结表有两个条目，都指向测验 1，前两个学生都有各自的分数。

我打算得到的结果是这样的：

```
student_id name quiz score total
1          john 1    5     10
1          john 2          10
2          jake 1    10    10
2          jake 2          10
3          jane 1          10
3          jane 2          10 
```

现在，我有这个查询，我希望它可以解决问题并获取形成该结构所需的所有数据：

```
SELECT 
  students.student_id, 
  students.formal_id,
  students.last_name,
  students.first_name,
  quizzes.quiz_id,
  quizzes.total,
  quizzes.description,
  _student_quiz.score

FROM 
  `quizzes` 
LEFT JOIN _student_quiz //take all quizzes, regardless if the junction had anything for it
  ON quizzes.quiz_id = _student_quiz.quiz_id
RIGHT JOIN students      //take all students regardless if they are junctioned
  ON _student_quiz.student_id = students.student_id 
```

但是，它只返回包含学生和第一个测验的行

```
student_id name quiz score total
1          john 1    5     10
2          jake 1    10    10
3          jane NULL NULL  10 
```

无论他们是否与之有任何关系，我都需要进行哪些更改才能获得所有学生和测验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:54:25.720

未经测试，但是...我相信您需要两张表的carthesian 乘积。

```
SELECT *
FROM students CROSS JOIN quizzes
LEFT JOIN _student_quiz ON _student_quiz.student.id = students.student_id
                       AND _student_quiz.quiz.id = quizzes.quiz.id 
```

# android - 加载没有 webview 的网站？

> ID：14174598
> 
> 赞同：0
> 
> 时间：2013-01-05T17:50:15.217
> 
> 标签：android, web-applications, web

起初：这是我在这里的第一篇文章，所以如果我做错了什么请告诉我:)

所以...我想问我如何在没有 webview 的情况下加载网站。我正在尝试制作一个可以更轻松地玩特定浏览器游戏的应用程序

我的想法是加载网站并让我的应用根据加载的网站的内容显示活动。该应用程序基本上没有显示任何 WebView。或者我可以以某种方式使 WebView 不可见吗？

正如您可能已经意识到的那样，我在 android/java 编程方面并没有那么先进。（虽然我在 HTML/CSS 和非常基本的 C++ 方面并没有那么差）所以请尽量保持代码简短。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:59:06.200

如果我正确理解了您的问题，那么您可以尝试 HTML 解析器。HTML 页面将使用 java 进行解析，您可以在不加载/显示实际网页的情况下提取网站内容。您可能需要使用 firebug 或 chrome dev 工具来查看要提取的网页部分。HTML 解析器可以在这里找到： [HTML 解析器](https://stackoverflow.com/questions/3036638/how-to-extract-web-page-textual-content-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:21:14.637

我建议使用[JSoup](http://jsoup.org/)。它可以很好地解析html网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-16T04:26:16.687

WebView 和 Chromium 只是 Google Data-Saver 代理的扩展。
没有办法绕过代理。谷歌已阻止所有其他网络视图。

如果您想创建一个可以在没有 Data-Saver 代理的情况下连接到网站的应用程序，您需要构建和编译第 3 方浏览器，然后为 Android 创建一个自定义浏览器应用程序，例如 Firefox 或 Opera。
如果您希望您的 WebView 通过不同的代理被黑客入侵，您可以将完成的 .apk 文件上传到[此处](https://developer.huawei.com/en/)，当中国政府通过华为的 App Gallery 分发您的应用程序时，中国政府将在此处模拟 Google 的代理。

即使两个商店的 .apk 相同，如果没有 Google 的 Data-Saver，它也能更好地工作。

# ubuntu - Stellaris Launchpad 的示例 UDEV 文件

> ID：14174601
> 
> 赞同：1
> 
> 时间：2013-01-05T17:50:41.207
> 
> 标签：ubuntu, usb, udev, launchpad

我正在尝试让我的**Stellaris Launchpad**与**Energia IDE**一起使用。我被告知要上传程序并运行我必须**创建一个 udev 条目**的串行端口。

我对 linux 比较陌生（虽然不是 Ubuntu），所以任何人都可以向我提供一个示例 udev 文件。

我的 Stellaris 板位于端口 /dev/ttyACM0，VID=1cbe 和 PID=00fd。

截至目前我正在使用这个->

```
# 
# This file allows non-root access to TI stellaris launchpad
# See udev(7) for syntax.
#
SUBSYSTEM=="usb",ATTRS{idVendor}=="1cbe",ATTRS{idProduct}=="00fd",MODE="0666"
KERNEL=="ttyACM0",ATTRS{idVendor}=="1cbe",ATTRS{idProduct}=="00fd",MODE="0666"
# 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:37:05.357

**问题解决了。**

对于那些有相同或类似问题的人。这是简单的解决方案。

**第 1 步：**将您的用户名添加到“拨出”组。在终端类型中，

```
sudo adduser <username> dialout 
```

**步骤2：**在目录：/etc/udev/rules.d/中创建一个udev（例如：61-stellpad.rules）文件，内容为，

```
SUBSYSTEM=="usb", ATTRS{idVendor}=="1cbe", ATTRS{idProduct}=="00fd", MODE="0666" 
```

**第 3 步：**保存、拔下并重新插入 Stellaris 板。全部做完。

**[注意]：**该解决方案由 Stellaris Launchpad 用户 - Bernard 提供。
现在完美运行。

干杯。

# python - 如何在 python 中将变量重置为其原始值？

> ID：14174620
> 
> 赞同：-8
> 
> 时间：2013-01-05T17:52:28.167
> 
> 标签：python, variables

我正在制作一个刽子手游戏，我希望能够重置生命并将得分恢复到原来的值（6&0）。此代码似乎不起作用。

```
def newwords():
    newgamewords.append(input('Enter new word: '))
    print('Do you want to add any more words? yes or no?')
    answer=input()
    if answer == 'yes':
        newwords()
    else:
        while len(guessedletters) > 0 : guessedletters.pop()
        while len(displayletters) > 0 : displayletters.pop()
        lives = 6
        finalscore=0
         score
        gamewords[:] = newgamewords
        hangmangame() 
```

这是游戏开始时的代码（这些变量没有在任何定义中，我已将代码中的每个变量设为全局变量以确保）：

```
lives=6
score=0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:04:42.163

要更改全局变量，您必须将它们声明为全局变量，否则它们将被视为局部变量。例子：

```
lives = 6

def change():
    global lives
    lives = 0 
```

# javascript - onclick 命令不会将 ID 发送到文本框，onclick 需要“转义”才能被识别为代码

> ID：14174622
> 
> 赞同：1
> 
> 时间：2013-01-05T17:52:34.403
> 
> 标签：javascript, vbscript, onclick

嗨，我希望我有道理，我正在做一个作业，但我不记得如何转义一行代码，所以我需要的代码被视为代码？如果这是有道理的。

我有这个部分：

```
<input type="text" name="firstSeat" id="firstSeat" readonly="readonly" style="border: solid; background-color: #374B5C; color: #fff; width:30px;"/> 
```

所以那个盒子的ID是firstSeat，我想用像A01这样的ID填充它，使用这个代码；

**编辑**我在这里粘贴我的代码时遇到了麻烦，其中一些没有显示出来，所以我希望这些没问题。

代码也在这里**https://gist.github.com/7f54751e1563e778d482**

所以你可以在第 10 行和第 13 行看到，有这样的代码：

```
<%Do While Not thrus.EOF
 dim seatID
 seatID=thrus("sea_ID")
 bookedcheck="SELECT * FROM booking WHERE boo_PerID = " & request("per_ID") &" AND booking.boo_seaID = "& seatID&""
 booked.Open bookedcheck, conx, adOpenkeyset, AdLockOptimistic
 if (thrus("sea_Reference") = "B01") OR  (thrus("sea_Reference") = "C01") OR  (thrus("sea_Reference") = "D01") OR  (thrus("sea_Reference") = "E01")OR  (thrus("sea_Reference") = "F01")OR  (thrus("sea_Reference") = "G01")Then
    Response.write "<br />"
 end if
 if not booked.EOF then
    response.write("<href='#"&thrus("sea_Reference")&"'><img src='images/booked.gif' border='0' title='"&thrus("sea_Reference")&", SEAT BOOKED' onclick='document.getElementById('firstSeat').value='"&thrus("sea_Reference")&"';' /></>")
 else
    response.write("<a href='#"&thrus("sea_Reference")&"'><img src='images/"&thrus("sea_ICON")&"' border='0' title='"&thrus("sea_Reference")&", &pound;120,  45 degree left seating icon facing stage' onclick='document.getElementById('firstSeat').value='"&thrus("sea_Reference")&"';' /></a>")

end if%> 
```

所以应该发生的是 onclick 它将 sea_reference 推送到 firstSeat 并将其传递给那里的那个盒子。但是当我点击它时它不会发送它。

我相信它是因为这个：http: [//i.imgur.com/thzBK.png](http://i.imgur.com/thzBK.png)

onclick 被视为与该行中的大多数代码相同的信息。

我想我需要“转义”以便看到 onclick 命令。

如果有人可以提供帮助，或者确实可以帮助我在这里获取我的代码！那太好了，谢谢。

**更新**如果它有助于查看页面；[http://heweb.grimsby.ac.uk/STUDENT/s0191958/PART2/booking.asp?the_ID=1&per_ID=1](http://heweb.grimsby.ac.uk/STUDENT/s0191958/PART2/booking.asp?the_ID=1&per_ID=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:59:58.260

我觉得您的代码使用了错误的引号导致中断，使用单引号表示字符串文字；在您的代码中使用这些单引号时，您实际上是在关闭文字并`firstSeat`通过将它们放在那里以传递您的参数来开始另一个。使用双引号。

这是一个半途而废的答案，但也许这会有所帮助。

用这个替换你所拥有的，看看它是否能让你到达某个地方。

`onclick='document.getElementById("firstSeat").value=thrus("sea_Reference")'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:05:35.080

要更改您的元素 ID，您所要做的就是：

```
onclick=document.getElementById('firstSeat').id="sea_Reference" 
```

还可以更改元素值使用：

```
onclick=document.getElementById('sea_Reference').value="value" 
```

因为在您应该使用新的 id 来引用之前，id 属性已经改变。

如果您有一个函数将数据作为 id 或值作为字符串返回，则不必用双引号或单引号括起来。只需将值保存在变量中并在变量上执行您喜欢的格式，然后分配它到属性（在 JS 中）。或者如果您在服务器端，请将变量连接到要打印的字符串。（使用服务器端语言）

# java - Java：数组/方法：找不到符号

> ID：14174625
> 
> 赞同：1
> 
> 时间：2013-01-05T17:52:51.823
> 
> 标签：java, arrays, methods

`TERADENWOORDEN`是 [0][0] = book 和 [0][1] = 指环王的数组

`CATEGORIES`= 类别数量

`geefNamenCat`是一个返回`input.readString()`to的方法`gekozenCat`

我在这里做错了吗？

```
public void catKiezen() {
   boolean bevatGekozen = false;
   String gekozenCat
    do {
        gekozenCat = geefNamenCat();
        for (String[] TeradenwoordenLijst : Arrays.asList(TERADENWOORDEN))
            if (Arrays.asList(TeradenwoordenLijst).contains(gekozenCat)) {
                bevatGekozen = true;
                break;
            }
        if (! bevatGekozen) {
            System.out.println("De opgegeven categorie is ongeldig.");
        }
    } while (! bevatGekozen);
   String woordVanCat = woordBepalen (gekozenCat);
}

public String woordBepalen(String teBepalenWoordVanCat) {
    for (int p = 0; p < CATEGORIES; p++)
       if (TERADENWOORDEN[p][0].equals(teBepalenWoordVanCat))
       return TERADENWOORDEN[p][1];
} 
```

最后我得到了一条错误`cannot find symbol`线`String woordVanCat = woordBepalen (gekozenCat);`

更新：

我现在收到“缺少退货声明”

```
public String woordBepalen(String teBepalenWoordVanCat) {
    for (int p = 0; p < CATEGORIES; p++) {
        if (TERADENWOORDEN[p][0].equals(teBepalenWoordVanCat)) {
        return TERADENWOORDEN[p][1];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T17:54:28.630

您已`String gekozenCat = geefNamenCat();`在 do-while 中声明并尝试在循环外访问它。`gekozenCat`只**局限**在你的`do-while`. `do-while`如果您想在您的执行时间之外访问它，请在外面声明它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T17:55:59.867

据我所见，您的方法`woordBepalen`无法编译，因为编译器不确定它是否具有明确定义的返回值

```
public String woordBepalen(String teBepalenWoordVanCat) {
    for (int p = 0; p < CATEGORIES; p++)
       if (TERADENWOORDEN[p][0].equals(teBepalenWoordVanCat))
       return TERADENWOORDEN[p][1];
} 
```

编辑

您必须定义在没有`p` `TERADENWOORDEN[p][0].equals(teBepalenWoordVanCat)`保留的情况下返回的内容。像这样：

```
 public String woordBepalen(String teBepalenWoordVanCat) {
        for (int p = 0; p < CATEGORIES; p++) {
           if (TERADENWOORDEN[p][0].equals(teBepalenWoordVanCat))
             return TERADENWOORDEN[p][1];
        }
        return null;
 } 
```

由您决定返回`null`是否是正确的做法。另一种可能性是抛出异常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T17:56:05.047

的范围`gekozenCat`在`do..while`块内。在该块之外，您尚未定义它，从而导致错误。

通常，如果您有一个块`{` `}`，则在该块内定义的变量将仅在该块内可用（并且在它们被定义之后）。

# colors - 从 Visual Studio 2012 复制代码片段

> ID：14174631
> 
> 赞同：2
> 
> 时间：2013-01-05T17:53:10.657
> 
> 标签：colors, visual-studio-2012, powerpoint, copy-paste

我想在 Word 或 PowerPoint 中为我的代码创建一些文档。我只需复制一段代码 (Ctrl+C)，然后将其粘贴到 Word 或 PowerPoint 中。粘贴时，我可以选择保留原始格式，以便获得原始代码着色。

现在，我的问题是，如果我粘贴到具有彩色背景的区域，文本将保持 Visual Studio 背景颜色（白色或深灰色，具体取决于主题）。

有没有办法可以为文本设置透明背景颜色，以便我看到该区域的背景颜色？

我尝试使用或不使用 Productivity Power Tools 加载项中的 HTML 复制选项。

它在以前的 VS 版本中运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T12:34:02.910

您已经接近使用 HTML 复制功能了。也许将 BeforeCodeSnippet 更改为：

注意我已经删除了 {background} 标签，所以它甚至不应该是标记的一部分。

你可以[在这里找到一些额外的信息](http://codinglifestyle.wordpress.com/2013/05/17/copy-and-paste-formatting-with-visual-studios-dark-theme/)

# ios - 如何在 iOS 的邮件中只允许一个收件人

> ID：14174633
> 
> 赞同：0
> 
> 时间：2013-01-05T17:53:35.343
> 
> 标签：ios, xcode, email, ios6, mfmailcomposeviewcontroller

我正在创建一个联系我们按钮，允许用户通过电子邮件联系我们的支持团队（我使用的是 iOS 6）。但我希望 Mail Composer 只向我们的支持团队发送电子邮件，不允许用户添加或删除收件人的电子邮件地址。

演示项目.h

```
#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h> 

@interface SimpleEmailViewController : UIViewController <MFMailComposeViewControllerDelegate> // Add the delegate
- (IBAction)showEmail:(id) 
```

演示项目.m

```
 - (IBAction)showEmail:(id)sender {
    // Email Subject
    NSString *emailTitle = @"Test Email";
    // Email Content
    NSString *messageBody = @"iOS programming is so fun!";
    // To address
    NSArray *toRecipents = [NSArray arrayWithObject:@"support@app.com"];

    MFMailComposeViewController *mc = [[MFMailComposeViewController alloc] init];
    mc.mailComposeDelegate = self;
    [mc setSubject:emailTitle];
    [mc setMessageBody:messageBody isHTML:NO];
    [mc setToRecipients:toRecipents];

    // Present mail view controller on screen
    [self presentViewController:mc animated:YES completion:NULL];

}

- (void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail sent");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail sent failure: %@", [error localizedDescription]);
            break;
        default:
            break;
    }

    // Close the Mail Interface
    [self dismissViewControllerAnimated:YES completion:NULL];
} ` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:55:34.483

你不能限制它。您可以预先填写该字段，但您不能限制用户编辑收件人。

# r - 如何动态调用变量？

> ID：14174635
> 
> 赞同：5
> 
> 时间：2013-01-05T17:54:03.703
> 
> 标签：r

我正在处理三个存储在三个列表中的实验`exp1`：`exp2`和`exp3`。每个列表都有几个项目（`name`、`conditions`、`dataset_a`、`dataset_b`等）。有时我想对所有实验进行操作。有没有办法将它们的名称存储在变量中并动态调用它们？这不起作用：

```
all_exp <- list(exp1=exp1,exp2=exp2,exp3=exp3) 
```

因为如果我以后在实验中添加一些东西，就会`all_exp`有以前状态下的实验的硬拷贝，而不是参考。

这类作品：

```
all_exp_names <- c("exp1","exp2","exp3")
all_exp <- lapply(all_exp_names, function(exp_name) (eval(parse(text=exp_name)))) 
```

但必须有更简单的方法，而且返回的列表会丢失实验名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T18:04:52.277

我想你想要

```
lapply(all_exp_names,get) 
```

但这实际上并没有返回一个命名列表。你可以做

```
setNames(lapply(all_exp_names,get),all_exp_names) 
```

诚然，这有点笨拙，尽管如果您经常使用它，您可以将它打包成一个函数（请参阅@JoshOBrien 的答案以获得更好的解决方案）。

我认为，更惯用的做法是首先将数据的参考副本保存在命名列表中。

**编辑**：我下面的原始延迟分配/评估代码很聪明，但完全忽略了 R 有一个内置`delayedAssign`函数的点，它与下面的函数做同样的事情（但可能更健壮）`makeDelayVar`：

```
delayedAssign("exp_all",list(exp1=exp1,exp2=exp2)) 
```

（感谢[do.call 和 curve 不能在另一个函数环境中绘制函数](https://stackoverflow.com/questions/14292218/do-call-and-curve-can-not-plot-a-function-inside-another-function-environment)来指出这一点。）但是，`%<%`如下所示定义中缀运算符的技巧可能仍然很方便。

* * *

如果您*真的*想要延迟分配，这可行（但不简单）：

```
makeActiveBinding("all_exp",function() list(exp1=exp1,exp2=exp2), .GlobalEnv)
exp1 <- 2
exp2 <- 3
all_exp
## $exp1
## [1] 2
##  
## $exp2
## [1] 3 
```

您也可以将其包装在一个`makeDelayVar`函数中，尽管您可能必须小心评估环境。

```
makeDelayVar <- function(var,val) {
   makeActiveBinding(deparse(substitute(var)), function() val, parent.frame())
}
makeDelayVar(all_exp, list(exp1=exp1,exp2=exp2))
all_exp 
```

这与上面的工作方式相同（如果您想确认此过程确实在进行延迟评估，您可以删除`exp1`and `exp2`、 define `all_exp`，然后重新定义）。`exp[12]`

为了更傻，你可以定义`%<%`做延迟赋值（R允许中缀运算符定义为`%[character]%`）：

```
`%<%` <- makeDelayVar
all_exp %<% list(exp1,exp2) 
```

I would use this with caution, though -- it could be fragile in some circumstances. For example, restrict it to interactive contexts where you will know right away if it breaks or does something funny, and don't try to be clever passing the results of delayed evaluation as arguments to functions etc.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-05T19:10:19.480

If you want to keep the names, you could use `sapply(..., simplify=FALSE, USE.NAMES=TRUE)`:

```
A <- B <- C <- 1:4
nms <- c("A", "B", "C")

sapply(nms, get, simplify=FALSE, USE.NAMES=TRUE)
## $A
## [1] 1 2 3 4
## 
## $B
## [1] 1 2 3 4
## 
## $C
## [1] 1 2 3 4 
```

# scala - flatMap 行为在 2.10.0 中改变

> ID：14174639
> 
> 赞同：10
> 
> 时间：2013-01-05T17:54:29.400
> 
> 标签：scala, generics, scala-2.10

我将一些代码从 2.9 转换为 2.10，遇到了意外的编译错误。这是最小的形式：

在 2.9.2 中，这可以正常工作：

```
scala> List(1).flatMap(n => Set(1).collect { case w => w })
res0: List[Int] = List(1) 
```

在 2.10.0 中，我们得到一个错误：

```
scala> List(1).flatMap(n => Set(1).collect { case w => w })
<console>:8: error: no type parameters for method flatMap: (f: Int => scala.collection.GenTraversableOnce[B])(implicit bf: scala.collection.generic.CanBuildFrom[List[Int],B,That])That exist so that it can be applied to arguments (Int => scala.collection.immutable.Set[_ <: Int])
 --- because ---
argument expression's type is not compatible with formal parameter type;
 found   : Int => scala.collection.immutable.Set[_ <: Int]
 required: Int => scala.collection.GenTraversableOnce[?B]
              List(1).flatMap(n => Set(1).collect { case w => w })
                      ^
<console>:8: error: type mismatch;
 found   : Int => scala.collection.immutable.Set[_ <: Int]
 required: Int => scala.collection.GenTraversableOnce[B]
              List(1).flatMap(n => Set(1).collect { case w => w })
                                ^
<console>:8: error: Cannot construct a collection of type That with elements of type B based on a collection of type List[Int].
              List(1).flatMap(n => Set(1).collect { case w => w })
                             ^ 
```

但如果我明确地将内部结果转换为 a`List`或明确指定泛型类型，它在 2.10.0 中工作正常`flatmap`：

```
scala> List(1).flatMap(n => Set(1).collect { case w => w }.toList)
res1: List[Int] = List(1)
scala> List(1).flatMap[Int, List[Int]](n => Set(1).collect { case w => w })
res2: List[Int] = List(1) 
```

有人可以向我解释一下 2.10 的变化是什么导致类型推断在 2.9 中没有在这里失败吗？

**编辑：**

再深入一点，我们可以看到问题源于 的行为差异`collect`：

在 2.9.2 中：

```
scala> Set(1).collect { case w => w }
res1: scala.collection.immutable.Set[Int] = Set(1) 
```

在 2.10.0 中：

```
scala> Set(1).collect { case w => w }
res4: scala.collection.immutable.Set[_ <: Int] = Set(1) 
```

据推测，原因与`Set`不同，例如`List`，类型不变的事实有关。但是更完整的解释，尤其是给出这种改变的动机的解释，会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T09:57:22.647

这是一个[错误](https://issues.scala-lang.org/browse/SI-6925)。您也可以通过键入模式来解决它，如

```
scala> Set(1).collect { case w => w }
res0: scala.collection.immutable.Set[_ <: Int] = Set(1)

scala> Set(1).collect { case w: Int => w }
res1: scala.collection.immutable.Set[Int] = Set(1) 
```

# php - RegEx 的动态命名子模式？

> ID：14174641
> 
> 赞同：0
> 
> 时间：2013-01-05T17:54:40.657
> 
> 标签：php, preg-match

我知道我可以在 preg_match 中使用命名子模式来命名数组中的行：`(?P<sval1>[\w-]+)`。我遇到的问题是“sval1”是预定义的。是否可以将此命名子模式作为正则表达式查找本身的一部分？

例如，如果文本字段如下：

```
step=5
min=0
max=100 
```

我想使用 preg_match 来创建一个数组，本质上是：

```
{
    [step] => 5
    [min] => 0
    [max] => 100
} 
```

用户可以在文本条目中添加任意数量的字段；所以它需要根据输入动态生成数组条目。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:10:49.303

```
$str = 'step=5
min=0
max=100';

$output = array();
$array = explode("\n",$str);
foreach($array as $a){
    $output[substr($a,0,strpos($a,"="))] = substr($a,strpos($a,"=")+1);
}

echo '<pre>';
print_r($output);
echo '</pre>'; 
```

或者：

```
$str = 'step=5
min=0
max=100';

$output = array();
preg_match_all("/(.*)=(.*)/",$str,$matches);
if(isset($matches[1]) && isset($matches[2])){
    foreach($matches[1] as $k=>$m){
        $output[$m] = $matches[2][$k];
    }
}

echo '<pre>';
print_r($output);
echo '</pre>'; 
```

或基于评论：

```
$str = 'step=5
min=0
max=100';

$output = array();
preg_match_all("/(.*)=(.*)/",$str,$matches);
if(isset($matches[1],$matches[2])){
    $output = array_combine($matches[1],$matches[2]);
}

echo '<pre>';
print_r($output);
echo '</pre>'; 
```

# css - 在不影响 CSS 内部的情况下更改外部不透明度

> ID：14174643
> 
> 赞同：6
> 
> 时间：2013-01-05T17:54:46.930
> 
> 标签：css

我要创建的效果是透明边框效果。我使用两个 div 标签创建了盒子，一个用于内部，一个用于外部。`

![在此处输入图像描述](../Images/79bed7971e5b2dd23859797de7e277fa.png)

我用于此的 HTML 是：

```
<div class="main_box_outer">
    <div class="main_box_inner">
    </div><!--/ inner-->
</div><!--/ outer-->` 
```

我用来创建它的 CSS 是：

```
.main_box_inner {
width: 30em;
height: 20em;
background: white;
border-radius: 1em; }

.main_box_outer {
display: inline-block;
background: black;
padding: 1em;
border-radius: 2em; 
opacity:1; } 
```

但是，当我在 CSS 中更改外框（边框）的不透明度时，它也会更改内框的不透明度，因为内框 div 包含在外框 div 中。如何在不影响内框不透明度的情况下更改外部不透明度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T18:00:08.827

使用 rgba 作为背景颜色：

```
{ background: rgba(0,0,0,.5); } 
```

[在 JSFiddle 上查看](http://jsfiddle.net/pPP5W/)

rgba 是一种定义颜色的方法，包括*alpha 通道*（它的不透明度）。Alpha 通道从 0 变为 1，就像不透明度一样。它可以用于任何可以具有颜色集的属性：颜色、背景、边框等。

请注意，早期版本的 IE 不支持 rgba 颜色；他们只是将 alpha 通道设置为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:24:50.357

这是工作

```
.main_box_outer 
{
    display: inline-block;
    background: rgba(0,0,0,.5);
    padding: 1em;
    border-radius: 2em; 
    opacity:1; 
} 
```

# c - 如何删除C中的链表？

> ID：14174650
> 
> 赞同：-1
> 
> 时间：2013-01-05T17:55:35.697
> 
> 标签：c, memory, linked-list, malloc, free

我正在尝试使用以下定义在 c 中创建一个链表：

```
/**
 * The definition of node and linked list.
 */
typedef struct _node{
    void * val;
    struct _node * next;
} node;

typedef struct{
    node * head;
} linkedlist; 
```

而且我有一个完全删除它的功能（不是针对单个节点，而是针对整个列表）：

```
void clean_list(linkedlist * ll){
    node * temp;
    curr = ll->head;

    while(ll->curr->next != NULL){
    temp = curr;
    curr = curr->next;
    free(temp->val);
    free(temp);
    }
} 
```

我的问题是：

*   它有效吗？
*   我怎么知道它是否真的有效？

我正在使用 MacBook Pro 并使用 gcc 作为编译器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:16:16.557

我永远不会明白为什么拥有可编译代码的人会发布无法编译的代码。但是，假设需要释放链表本身，这就是我的处理方法（未经测试）：

```
void clean_list(linkedlist *pll)
{
    node *pnext;

    for (node *pnode = pll->head; pnode != NULL; pnode = pnext)
    {
        pnext = pnode->next;
        free(pnode->val);
        free(pnode);
    }
    free(pll);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:23:04.947

```
void clean_list(linkedlist * ll){
    node *temp, **ppp;

    for (ppp= &ll->head; temp = *ppp;   ){
      *ppp = temp->next;
      free(temp->val);
      free(temp);
      }
} 
```

# java - Java 2D 游戏，更新矩形

> ID：14174658
> 
> 赞同：0
> 
> 时间：2013-01-05T17:56:20.707
> 
> 标签：java, rectangles

我编写了一个简单的 2D Java 游戏，其中有一个玩家在 2D 地图上的俯视图，它随着键盘箭头输入（上、下、左、右）移动，我的 Play 类包含我的所有游戏代码有几种方法，主要的方法是渲染，它将所有内容绘制到屏幕上，例如实际的播放器和地图，以及处理键盘输入、移动播放器和更新图像的更新。

这是我的游戏课程的代码：

```
 imports are here
    public class Play extends BasicGameState{
    Animation bucky, movingUp, movingDown, movingLeft, movingRight;
    Image worldMap;
    int[] duration = {200, 200};//how long frame stays up for
    float buckyPositionX = 0;
    float buckyPositionY = 0;
    float shiftX = buckyPositionX + 320;//keeps user in the middle of the screem
    float shiftY = buckyPositionY + 160;//the numbers are half of the screen size
    java.awt.geom.Rectangle2D.Float rectOne = new Rectangle2D.Float(shiftX, shiftY,90,90);
    java.awt.geom.Rectangle2D.Float rectTwo = new Rectangle2D.Float(500 + buckyPositionX, 330 + buckyPositionY, 210, 150);
    public Play(int state){
    }   
    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
          worldMap = new Image("res/world.png");
          Image[] walkUp = {new Image("res/b.png"), new Image("res/b.png")}; //these are the images to be used in the "walkUp" animation
          Image[] walkDown = {new Image("res/f.png"), new Image("res/f.png")};
          Image[] walkLeft = {new Image("res/l.png"), new Image("res/l.png")};
          Image[] walkRight = {new Image("res/r.png"), new Image("res/r.png")};
    movingUp = new Animation(walkUp, duration, false);
    movingDown = new Animation(walkDown, duration, false);  
    movingLeft = new Animation(walkLeft, duration, false);  
    movingRight = new Animation(walkRight, duration, false);
    bucky = movingDown;//facing screen initially on startup
    }
    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
    worldMap.draw(buckyPositionX, buckyPositionY);//position 0,0
    bucky.draw(shiftX, shiftY);//makes him appear at center of map
    g.fillRect((float)rectOne.getX(), (float)rectOne.getY(), (float)rectOne.getWidth(), (float)rectOne.getHeight());
    g.fillRect((float)rectTwo.getX(), (float)rectTwo.getY(), (float)rectTwo.getWidth(), (float)rectTwo.getHeight());
}
    public void update(GameContainer gc, StateBasedGame sbg, int delta)throws SlickException{
    Input input = gc.getInput();
    //up
    if(input.isKeyDown(Input.KEY_UP)){
        bucky = movingUp;//changes the image to his back
        buckyPositionY += 2;;//increase the Y coordinates of bucky (move him up)
        if(buckyPositionY>162){//if I reach the top 
            buckyPositionY -= 2;//stops any further movement in that direction
        }
    }
    //down
    if(input.isKeyDown(Input.KEY_DOWN)){
        bucky = movingDown;
        buckyPositionY -= 2;
        if(buckyPositionY<-550){
            buckyPositionY += 2;//basically change the direction if + make -
    }}
    //left
    if(input.isKeyDown(Input.KEY_LEFT)){
        bucky = movingLeft;
        buckyPositionX += 2;
        if(buckyPositionX>324){
            buckyPositionX -= 2;//delta * .1f
    }}
    //right
    if(input.isKeyDown(Input.KEY_RIGHT)){
        bucky = movingRight;
        buckyPositionX -= 2;
        if(buckyPositionX<-776){
            buckyPositionX += 2;
    }}}   
    public int getID(){
        return 1;
    }} 
```

我需要通过将 rectTwo 放在我的更新类中来更新它的位置，但是在编写代码来执行此操作时遇到问题，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:12:09.280

你的意思是更新方法？

你想做什么样的更新？他的立场？您是否在更新方法中尝试过类似的方法：

公共无效更新（GameContainer gc，StateBasedGame sbg，int delta）抛出 SlickException {

```
Input input = gc.getInput();
//up
if(input.isKeyDown(Input.KEY_UP)){
     rectTwo.setRect(float x, float y, float w, float h) ;
     .... 
```

y 可以是 rectTwo.getY() + 2 取决于你自己的规则

# c - Segmentation fault while using char * string but not with char string[11]

> ID：14174659
> 
> 赞同：0
> 
> 时间：2013-01-05T17:56:25.180
> 
> 标签：c, pointers, segmentation-fault

> **Possible Duplicate:**
> [Why do I get a segmentation fault when writing to a string?](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)
> [Why do I get a segmentation fault when I try to modify a string constant?](https://stackoverflow.com/questions/6958222/why-do-i-get-a-segmentation-fault-when-i-try-to-modify-a-string-constant)

I was trying to run the following two codes and I am getting a segmentation fault with ***file2.c*** but with ***file1.c*** I am not getting any fault. Can somebody explain what is the difference between the following codes :

**file1.c**

```
#include <stdio.h>

int main()
{
    int i;
    char  string[11] = {"HelloThere"};
    string[10] = '\0';
    for(i =0;i<5;i++)
    {
        string[i] = 'a';
    }
    printf("%s\n",string);
} 
```

and :

**file2.c**

```
#include <stdio.h>

int main()
{
    int i;
    char * string;
    string = "HelloThere";

    for(i =0;i<5;i++)
    {
        string[i] = 'a';    
    }
    printf("%s",string);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:58:09.887

This is because the assignment

```
char  string[11] = {"HelloThere"}; 
```

*copies* the string constant into a writable memory, while

```
char * string = "HelloThere"; 
```

leaves it in the read-only memory. While it is absolutely OK to write to the writable memory (duh!) writing to read-only memory is *undefined behavior*, and may trigger a crash.

Note that you do not need to specify the size of your string explicitly, unless you want to allocate more memory than is required for your string literal:

```
char  string[] = {"HelloThere"}; // <<== The size is empty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T18:00:09.327

```
string = "HelloThere"; 
```

then

```
string[i] = 'a'; 
```

is wrong - you're trying to modify a string literal, which you can't. This results in undefined behavior, so anything can happen, including crashes.

However,

```
char sring[11] = "HelloThere"; 
```

creates an auto array (copying the contents of the string in it beforehands) and that's writable, it's allowed to modify their elements.

# c# - WinApi SendMessage/PostMessage 在我的电脑上不起作用？

> ID：14174662
> 
> 赞同：1
> 
> 时间：2013-01-05T17:56:42.173
> 
> 标签：c#, visual-studio-2010, winapi

我在 c# 中编写了一些测试代码（使用 WPF 表单）来检查 sendMessage/PostMessage 是否可以工作。这是：

```
 Process x = Process.GetProcessesByName("Any Apps")[0];
        if (x == null) return;
        MessageBox.Show(x.Id.ToString()); // always works
        NativeMethods.SendMessage(x.MainWindowHandle, 0x100, 0x70, 0);//F1
        NativeMethods.SendMessage(x.MainWindowHandle, 0x101, 0x70, 0); 
```

在任何地方查找进程工作，但是当我通过 VS 调试密钥运行应用程序时，sendingMessage/postingMessage 从未工作过。有时当我从桌面启动程序时它可以工作，有时不能。但是...有趣的是：在任何可用的机器上（带有 XP 的 VM、另一台带有 64 位 Windows 7 的计算机、32 位 Windows 7 的朋友计算机）都可以快速运行。

有没有人有同样的问题？也许有人知道解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T18:19:06.460

`SendMessage`并且`PostMessage`工作正常 - 但在 Windows 中发送击键并不像您想象的那么简单。仅发送`WM_KEYDOWN`和`WM_KEYUP`消息是不可靠的发送输入。正在发送消息，但您将它们发送到的窗口忽略它们。

1.  未正确管理键盘状态：[您无法使用 PostMessage 模拟键盘输入](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx)
2.  Windows 应用程序有许多不同的窗口，主窗口可能不是键盘输入的句柄。在 Windows 中，keystorkes 转到焦点窗口（可能不是主窗口），例如考虑 MS Word 主窗口和子文档窗口。
3.  像这样的命令`F1`通常被实现为发送消息的[键盘加速器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645526%28v=vs.85%29.aspx)`WM_COMMAND`——我不相信假`WM_KEYDOWN`&`WM_KEYUP`消息会触发它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T18:26:14.560

是的，这段代码一般不会起作用。它以 WM_KEYDOWN/UP 开始发布，而不是发送。但更严重的是 MainWindowHandle 属性通常不是设计用于接收键盘输入的窗口的句柄。它通常是一个*框架窗口*，显示菜单和工具栏之类的东西。接收输入的窗口通常是框架窗口的*子*窗口。就像一个 TextBox 控件。记事本就是以这种方式构建的应用程序的一个示例。

使用 Spy++ 工具深入了解特定应用程序的窗口层次结构。

否则，使这段代码变得通用的唯一希望是将主窗口带到前台（pinvoke SetForegroundWindow）并模拟键盘敲击（pinvoke SendInput）。

# performance - GUI 应用程序中的撤消缓冲区

> ID：14174665
> 
> 赞同：0
> 
> 时间：2013-01-05T17:56:55.497
> 
> 标签：performance, user-interface, usability, undo

在 GUI 应用程序（桌面或 Web）中，一个页面/窗口/任何内容中可能有多个可编辑的文本框。人们是为每个文本框维护一个撤消缓冲区，还是只为整个页面/窗口/其他东西维护一个全局缓冲区？通常的做法是什么？

**GMail 示例**

GMail 似乎有一个全局缓冲区（或者可能是浏览器？）。我无法分别撤消电子邮件正文编辑和电子邮件主题编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:05:00.377

我认为这归结为用户对应用类型的期望。如果您想到 MS Word，撤消缓冲区是每个文档的。另一方面，在商业应用程序中，如果用户访问多个“页面”以完成给定任务，那么保留一个包含其导航历史记录的全局撤消缓冲区可能是有意义的。

[Monitored Undo Framework](http://muf.codeplex.com)是一个 .net 库，允许您在任何您认为合适的级别上设置这些撤消“范围” 。

# android - TextView 中的 (s/g)etFreezesText 是什么？

> ID：14174666
> 
> 赞同：14
> 
> 时间：2013-01-05T17:56:58.313
> 
> 标签：android, textview

截至最近（可能作为一个新的 SDK 功能），当我尝试从 中提取文本时`Textview`，我首先得到的是方法`getFreezesText()`，而不是`getText()`.

我查看了这个方法的定义，它说

```
**android:freezesText**

If set, the text view will include its current complete text inside of its frozen icicle in addition to meta-data such as the current cursor position. By default this is disabled; it can be useful when the contents of a text view is not stored in a persistent place such as a content provider.
Must be a boolean value, either "true" or "false".
This may also be a reference to a resource (in the form "@[package:]type:name") or theme attribute (in the form "?[package:][type:]name") containing a value of this type.
This corresponds to the global attribute resource symbol freezesText.

Related Methods
setFreezesText(boolean) 
```

这对我没有任何意义。

我们什么时候应该使用这些方法（如果有的话）？它们是新的还是我刚刚注意到它们？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T18:16:53.787

如果您想强制您的`TextView`（或`EditText`其他）保存其状态，您必须添加[`freezesText`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3afreezesText)属性：

```
<TextView 
     ... 
     android:freezesText="true" /> 
```

从文档[`freezesText`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3afreezesText)：

> 如果设置，文本视图将在其冻结的冰柱内包括其当前的完整文本，以及诸如当前光标位置之类的元数据。默认情况下这是禁用的；当文本视图的内容未存储在诸如内容提供者之类的持久位置时，它可能很有用

属性和方法从 API 1 开始就已经存在，所以我会说你刚刚注意到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-05T06:19:04.490

`android:freezesText="true"`将**冻结**您最后完成的文本。**但是最后完成的文本是什么？** 假设您正在显示`textView`每 2 秒后发生变化的内容，一切正常，直到您旋转屏幕，如果您旋转屏幕，textView 内的文本将不可见，`freezesText`来了，它将冻结最后显示的文本（最后完成的文本） .

# full-text-search - 用于日志搜索的基于文本的数据库？

> ID：14174667
> 
> 赞同：2
> 
> 时间：2013-01-05T17:56:59.287
> 
> 标签：full-text-search, bigdata, pytables

我正在我的公司处理大量多维**日志数据**。我必须非常快速地从我的文本数据库中保存和检索数据，因为有大量数据，如果我构建一个搜索查询（它们不是那么简单的查询，即在某些日期之间等），它需要一个有效的时间。

以下是我的观点：

*   我们使用**Lucene**，但它不符合要求。

*   我们不使用**基于 SQL 的数据库**，因为在这种情况下存储大量日志数据和查询是多余的。

*   由于我们的需要，我们不想使用**NoSQL 数据库**进行日志搜索。我们需要一个基于文本的数据库。

我们想使用[Pytables](http://www.pytables.org/moin)但是**我的问题是**我想知道是否存在任何其他系统可以在**日志上****快速**存储和搜索？

# linux - Grep 具有重复字段值的连续行。

> ID：14174671
> 
> 赞同：0
> 
> 时间：2013-01-05T17:57:26.823
> 
> 标签：linux, string, unix, grep

我不知道如何`grep`在这个文件中找到我想要的行：

```
8.txt  07:34:12 -> CONTENT START
8.txt  07:34:42 <-CONTENT END
8.txt  07:35:08 -> CONTENT START
8.txt  07:36:33 <-CONTENT END
8.txt  07:57:51 -> CONTENT START
8.txt  07:57:52 -> CONTENT START
8.txt  07:58:25 <-CONTENT END
8.txt  07:58:36 -> CONTENT START
8.txt  07:59:24 <-CONTENT END
8.txt  08:20:23 -> CONTENT START
8.txt  08:21:22 <-CONTENT END
8.txt  08:22:44 -> CONTENT START
8.txt  07:34:12 -> CONTENT START
8.txt  08:23:07 <-CONTENT END
8.txt  08:26:35 -> CONTENT START
8.txt  08:27:24 <-CONTENT END
8.txt  08:29:53 -> CONTENT START
8.txt  08:30:28 <-CONTENT END
8.txt  08:30:59 -> CONTENT START
8.txt  08:31:21 <-CONTENT END
8.txt  08:48:28 -> CONTENT START
8.txt  08:48:56 <-CONTENT END
8.txt  09:13:10 -> CONTENT START
8.txt  09:13:40 <-CONTENT END
8.txt  09:13:52 -> CONTENT START
8.txt  09:14:44 <-CONTENT END
8.txt  09:19:50 -> CONTENT START
8.txt  09:20:28 <-CONTENT END
8.txt  09:27:04 -> CONTENT START
8.txt  09:27:40 <-CONTENT END 
```

如果`CONTENT START`出现在连续行上，则显示它们。

预期输出：

```
8.txt  07:57:51 -> CONTENT START
8.txt  07:57:52 -> CONTENT START
8.txt  08:22:44 -> CONTENT START
8.txt  07:34:12 -> CONTENT START 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T18:02:02.767

这不是用于此的`grep`任务`uniq`：

```
$ uniq -D -f4 file
8.txt  07:57:51 -> CONTENT START
8.txt  07:57:52 -> CONTENT START
8.txt  08:22:44 -> CONTENT START
8.txt  07:34:12 -> CONTENT START 
```

该选项`-D`用于显示重复的行并`-f4`跳过前四个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:05:35.067

如果 CONTENT START 出现在 3 个连续的行上，您不会说该怎么做，所以这可能是也可能不是您想要的：

```
awk -v s="CONTENT START" '$0~s && p~s{print p ORS $0} {p=$0}' file 
```

# objective-c - 使用 URL 打开 iOS 应用程序

> ID：14174673
> 
> 赞同：0
> 
> 时间：2013-01-05T17:57:40.800
> 
> 标签：objective-c, ios, url-scheme

我正在尝试为我的应用程序设置 URL 方案。我阅读了本[教程](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)`myapp://test`，当我从其他应用程序或 Safari 应用程序和邮件应用程序（iOS 原生应用程序）调用时，它可以完美运行。但是我该怎么做才能从其他应用程序（Chrome、Gmail 等）打开我的应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:12:16.173

这似乎是不可能的。目前只有 iOS 原生应用才有可能 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-08T03:58:24.267

也许其他一些第三方应用程序不支持未知方案，例如您自定义的 url。但如果它支持`http`方案，你可以做到。您可以将 url 链接 whois 方案设为“http”。这个 url 包裹了你自定义的 url，比如`myapp://test`. 您可以将 http url 链接重定向到您自定义的 url 链接。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-05T20:43:22.787

您可以设置一个秘密密钥，如`myapp://test`. 您可以在项目设置 -> URL 类型下执行此操作。在那里你需要定义你的密钥。将此密钥输入您的 Safari 浏览器时，您的应用程序将自动打开。

# android - 从图库中选择照片后，我的 Android 应用程序正在关闭。（帖子中有关于该错误的视频）

> ID：14174676
> 
> 赞同：3
> 
> 时间：2013-01-05T17:57:50.880
> 
> 标签：android, android-intent, garbage-collection, android-gallery, intentfilter

谢谢你的时间。我正在做一个应用程序，我从中启动图库，活动 A 选择一个图像并返回到同一个活动 A。

我从具有单个活动（在清单上定义为启动器）的项目中没有问题，但是当我从清单上默认定义的活动的整个项目中执行此操作时，它无法正常工作。

我用来打开图库并选择照片的意图：

```
public void openGallery(int req_code){

   Intent intent = new Intent();
   intent.setType("image/*");
   intent.setAction(Intent.ACTION_GET_CONTENT);
   startActivityForResult(Intent.createChooser(intent,"Select file to upload "), req_code);
} 
```

我获取数据的 onActivityResult （当我从洞项目执行时从未调用过）：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {
        Uri selectedImageUri = data.getData();
        if (requestCode == SELECT_FILE1)
        {
            selectedPath1 = getPath(selectedImageUri);
            System.out.println("selectedPath1 : " + selectedPath1);
        }
        if (requestCode == SELECT_FILE2)
        {
            selectedPath2 = getPath(selectedImageUri);
            System.out.println("selectedPath2 : " + selectedPath2);
        }
        tv.setText("Selected File paths : " + selectedPath1 + "," + selectedPath2);
    }
} 
```

这是 logcat 转储：

```
01-05 15:18:14.569: I/ActivityManager(59): Starting activity: Intent {   act=android.intent.action.UPLOADIMAGEDEMO cmp=com.example/.UploadImageDemo }
01-05 15:18:15.779: D/dalvikvm(2496): GC_EXTERNAL_ALLOC freed 2697 objects / 189152 bytes in 92ms
01-05 15:18:16.599: I/ActivityManager(59): Displayed activity com.example/.UploadImageDemo: 1953  ms (total 1953 ms)
01-05 15:18:21.899: D/dalvikvm(279): GC_EXPLICIT freed 871 objects / 134112 bytes in 217ms
01-05 15:18:26.620: I/ActivityManager(59): Starting activity: Intent {  act=android.intent.action.CHOOSER cmp=android/com.android.internal.app.ChooserActivity (has extras) }
01-05 15:18:28.250: I/ActivityManager(59): Starting activity: Intent {  act=android.intent.action.GET_CONTENT typ=image/* flg=0x3000000  cmp=com.android.gallery/com.android.camera.ImageGallery }
01-05 15:18:28.670: D/dalvikvm(279): GC_EXTERNAL_ALLOC freed 388 objects / 53352 bytes in 60ms
01-05 15:18:28.850: D/dalvikvm(279): GC_EXTERNAL_ALLOC freed 326 objects / 90664 bytes in 53ms
01-05 15:18:29.200: I/ActivityManager(59): Displayed activity    com.android.gallery/com.android.camera.ImageGallery: 873 ms (total 2345 ms)
01-05 15:18:29.420: D/dalvikvm(279): GC_EXTERNAL_ALLOC freed 725 objects / 106960 bytes in 140ms
01-05 15:18:30.430: W/InputManagerService(59): Starting input on non-focused client         com.android.internal.view.IInputMethodClient$Stub$Proxy@45020da8 (uid=10002 pid=279)
01-05 15:18:32.010: D/dalvikvm(112): GC_FOR_MALLOC freed 9994 objects / 476368 bytes in 149ms 
```

最后，我首先从整个项目（退出应用程序）中记录了模拟器的行为，然后从运行良好的分离项目中记录了模拟器的行为。

[http://www.youtube.com/watch?v=SntnyKiJQ1Q&feature=youtu.be](http://www.youtube.com/watch?v=SntnyKiJQ1Q&feature=youtu.be)

非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-24T16:37:19.097

尝试更改活动清单：

```
android:noHistory="false"
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:45:42.940

我有工作代码，它使用以下代码启动图库以选择图像：

```
static final int GALLERY_RESULT = 1;

Intent j = new Intent(Intent.ACTION_PICK, Images.Media.EXTERNAL_CONTENT_URI);
j.setType("image/*");
startActivityForResult(j, GALLERY_RESULT); 
```

我处理结果如下：

```
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
    if (resultCode == RESULT_OK) {
        switch (requestCode) {
            case GALLERY_RESULT:
                Uri imgUri = intent.getData();
                imgView.setImageURI(imgUri);
            break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-16T12:51:05.233

从清单文件中删除 android:noHistory="true" 属性，如下所示：

```
 <activity
        android:name=".YourActivity"
        android:noHistory="true"   <-------------------Remvoe this line
        android:theme="@style/AppTheme"/> 
```

现在原始代码将是这样的：

```
 <activity
        android:name=".YourActivity"
        android:theme="@style/AppTheme"/> 
```

现在，它将完美运行。享受。

# objective-c - UITextField 显示位置类的 ReverseGeoCoder 的输出

> ID：14174677
> 
> 赞同：0
> 
> 时间：2013-01-05T17:57:51.733
> 
> 标签：objective-c, ios, uitextfield, core-location

我有一个带有多个 UITextField 的搜索界面的 ViewController。

其中一个字段是位置字段，其中有一个使用当前位置的选项。

当用户单击 UITextField 旁边的获取当前位置按钮时，这会触发我设置的单独类中的 ReverseGeoCoding 方法来处理位置方法。

是否可以将从占位符返回的文本填充到我的 SearchViewControllers 文本字段中。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:14:01.873

您可以使用[委托](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)或[通知](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)在不同控制器之间共享数据。

# c++ - 如何将 QString 的数字转换为 int 数组？

> ID：14174678
> 
> 赞同：6
> 
> 时间：2013-01-05T17:58:01.493
> 
> 标签：c++, qt, type-conversion, qstring

例如，我有一个`QString`包含一系列数字

```
QString path = "11100332001 234 554 9394"; 
```

我想迭代可变长度字符串

```
for (int i=0; i<path.length(); i++){

} 
```

并且能够`int`单独访问每个号码。

然而，我无法这样做。**问题**：如何将一个`QString`数字转换为一个数组`int`？

我知道我可以将其转换`QString`为`int`using`path.toInt()`但这对我没有帮助。

尝试先将其转换为 char 时出现错误：`cannot convert 'const QChar to char'`.

```
for (int i=0; i<path.length(); i++){
        char c = path.at(i);
        int j = atoi(&c);
        //player->movePlayer(direction);
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T18:42:42.293

您可以使用`split`获取由您想要的分隔符分隔的子字符串数组，在这种情况下它是一个空格，这是一个示例：

```
QString str("123 457 89");

QStringList list = str.split(" ",QString::SkipEmptyParts);

foreach(QString num, list)
    cout << num.toInt() << endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T18:02:09.910

您可以使用 [] 运算符获取每个字符 (QChar)，并对其使用 digitValue() 方法来获取整数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T18:07:55.123

使用[QTextStream](http://qt-project.org/doc/qt-4.8/qtextstream.html#QTextStream)：

```
QString str = "123 234   23123  432";
QTextStream stream(&str);
QList<int> array;
while (!stream.atEnd()) {
    int number;
    stream >> number;
    array.append(number);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-03T20:41:58.170

我自己使用过Antoyo的答案，但今天遇到了一个问题。digitValue() 与使用 atoi 比较 C 中的字符不同，就像 Thomas 试图做的那样。所以当托马斯试图这样做时：

```
for (int i=0; i<path.length(); i++){
        char c = path.at(i);
        int j = atoi(&c);
        //player->movePlayer(direction);
    } 
```

使用 digitValue() 它会变成这样：

```
for (int i=0; i<path.length(); i++){
        int j = path.at(i).digitValue();
        //player->movePlayer(direction);
    } 
```

但是，如果字符串中有任何字母，则不会产生预期的结果。例如，在 C 中，如果字符串混合了字母和数字，那么您使用 atoi 的任何字符都将返回 0 来代替字母。但是 digitValue() 不会为字母返回 0。如果您对字符串中的字母有任何疑虑，那么首先检查 isDigit() 可能是个好主意，最终结果如下所示：

```
int j = 0;
for (int i=0; i<path.length(); i++){
        if (path.at(i).isDigit())
            j = path.at(i).digitValue();
        else
            j = 0;
        //player->movePlayer(direction);
    } 
```

这可能不是 OP 关心的问题，但由于这是从 QT 中的字符串获取数字的最佳 Google 结果之一，它可能对其他人有所帮助，特别是如果您试图让 QT 应用程序的行为与设备上的一些嵌入式 C 代码。

# visual-studio-2012 - 使用 Chrome 进行调试时，VS2012 中的 Typescript 断点无法命中

> ID：14174684
> 
> 赞同：5
> 
> 时间：2013-01-05T17:58:48.443
> 
> 标签：visual-studio-2012, typescript

我有一个打字稿游戏，并且源地图已成功加载到 chrome 中，并且打字稿文件断点在 chrome 中被击中。

但是，从 VS 2012 调试时，VS2012 中的断点无法命中。

有什么想法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T15:34:32.993

它仅适用于 Visual Studio 的 IE 9 和 IE 10。如果您使用 sourcemaps，您可以在 Chrome Canary 浏览器中进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T19:02:45.367

请改用 IE 10+！这就是我现在可以开始工作的全部了

# mysql - MySQL：GROUP_CONCAT，其中行可能不存在

> ID：14174685
> 
> 赞同：2
> 
> 时间：2013-01-05T17:59:01.067
> 
> 标签：mysql, null, group-concat

我有 3 张桌子：table1、table2 和 table3

我从 table1 进行选择查询，它 LEFT JOINS 其他两个表。在选择中，我有一个 group_concat，它从 table3 中获取一个值。一切正常，直到不存在具有特定行的行。group_concat 列表变为空。相反，我希望它将 group_concat 中的值设置为 NULL 用于行不存在的那些。

就像我说的，如果 table2 中的所有行都存在 table3 中的值，那么它就可以工作。如果不是，则整个 group_concat 为空。

到目前为止我得到的一些“简化”代码：

```
SELECT 
    table1.table2Id,
    table1.dateAdded,

IF(COUNT(table2.table3Id) = COUNT(*), GROUP_CONCAT(table2.table3Id), NULL) as group1,
IF(COUNT(table3.ext) = COUNT(*), GROUP_CONCAT(table3.ext), NULL) as group2
FROM table1
LEFT JOIN table2 ON
    table2.id = table1.table2Id
LEFT JOIN table3 ON
    table3.id = table2.table3Id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:49:40.783

通过更改修复它

```
IF(COUNT(table3.ext) = COUNT(*), GROUP_CONCAT(table3.ext), NULL) as group2 
```

至

```
GROUP_CONCAT(IFNULL(table3.ext, NULL)) as group2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:06:52.397

在您使用联接的情况下，在联接中使用派生子查询并使用 IFNULL 并将其默认值设置为 0，然后在外部表中，如果出现空值，将使用此值 (0)。

编辑：

由于没有要测试的数据，您可以这样做。使用 INNER JOIN 而不是左连接。

```
SELECT 
    table1.table2Id,
    table1.dateAdded,

IF(COUNT(table2.table3Id) = COUNT(*), GROUP_CONCAT(table2.table3Id), NULL) as group1,
IF(COUNT(table3.ext) = COUNT(*), GROUP_CONCAT(table3.ext), NULL) as group2
FROM table1
INNER JOIN table2 ON
    table2.id = table1.table2Id
INNER JOIN table3 ON
    table3.id = table2.table3Id 
```

也尝试使用派生的子查询

```
SELECT 
    table1.table2Id,
    table1.dateAdded,
    IF(COUNT(t2.table3Id) = COUNT(*), GROUP_CONCAT(t2.table3Id), NULL) as group1,
    IF(COUNT(table3.ext) = COUNT(*), GROUP_CONCAT(table3.ext), NULL) as group2
FROM table1
LEFT JOIN (
            SELECT 
                id,
                IFNULL(table3Id,0) as table3Id,
                table3Id
            FROM table2
            GROUP BY id table3Id
            )as t2 ON t2.id = table1.table2Id
INNER JOIN table3 ON table3.id = t2.table3Id 
```

# c++ - 十进制 GCC 库

> ID：14174687
> 
> 赞同：1
> 
> 时间：2013-01-05T17:59:08.680
> 
> 标签：c++, gcc, decimal

我写了这个简单的代码只是为了检查是否`#include <decimal/decimal>`有效：

```
#include <iostream>
#include <decimal/decimal>

using namespace std;

int main ()
{
    cout << "Hello, world!" << endl;

    return 0;
} 
```

我编译它：

```
$ g++ main.cpp -o exe 
```

但我收到此错误消息：

```
In file included from main.cpp:2:0:
/opt/local/include/gcc47/c++/decimal/decimal:39:2: error: #error This file requires compiler and library support for ISO/IEC TR 24733 that is currently not available.
/opt/local/include/gcc47/c++/decimal/decimal:230:56: error: unable to emulate 'SD'
/opt/local/include/gcc47/c++/decimal/decimal:251:5: error: 'std::decimal::decimal32::decimal32(std::decimal::decimal32::__decfloat32)' cannot be overloaded 
```

...更多类似的错误...（由 Mats Petersson 删除）

这是什么意思？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T19:29:18.060

在构建 gcc 时，您可以启用对 C 对[TR24732](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1312.pdf)的十进制支持的支持。C TR 创建内置类型，例如，`_Decimal64`通过包含 来赋予更好的名称。当构建时配置 gcc 以包含十进制支持时，这些内置类型在 C++ 中也可用。`<decimal.h>``decimal64`

C++ 的十进制支持由[TR27433](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2849.pdf)定义，可以通过包含`<decimal/decimal>`. C++ 中的 gcc 十进制支持似乎只有在 gcc 编译时启用了十进制支持时才可用，也就是说，它似乎使用与 C 代码相同的内置类型。

在任何一种情况下，gcc 中的小数支持似乎都没有涵盖相应 TR 指定的所有内容。特别是，上次我检查缺少 I/O 支持。

# php - 查找并计算字符串中的字符串，然后显示具有最高计数的字符串

> ID：14174689
> 
> 赞同：2
> 
> 时间：2013-01-05T17:59:27.793
> 
> 标签：php, string, count

我大部分时间都在工作，但我觉得必须有更好的方法来做到这一点。

网站上有约 60 个马品种。有些马是“纯种”，有些是“杂交”。我对纯种马没有意见，但对于杂交品种，我需要找出它们最接近的品种，以便为那匹马展示图像。

图像设置如下： horse-Arabian-breed.png 带有一些 PHP 和 SQL 从数据库中拉出马的品种信息，并将品种插入“horse-”和“-breed.png”之间。

网站上的十字架显示为“Arabian x Dutch Warmblood”，这显然不适用于图像。我的计划是看看现在的马，它的父母，以及它的四个祖父母，得到他们所有的品种，找出哪个品种的影响最大，然后使用那个品种的图像。

这是我目前拥有的：

```
echo "Start horse breed: $horse_breed <br>";
echo "Sire  breed: $sire_breed <br>";
echo "Dam breed: $dam_breed <br>";
echo "Sire Sire breed: $sire_sire_breed <br>";
echo "Sire Dam breed: $sire_dam_breed <br>";
echo "Dam Sire breed: $dam_sire_breed <br>";
echo "Dam Dam breed: $dam_dam_breed <br>";
echo "<br><br>";

$hb = strval($horse_breed);
$sb = strval($sire_breed);
$db = strval($dam_breed);
$ssb = strval($sire_sire_breed);
$sdb = strval($sire_dam_breed);
$dsb = strval($dam_sire_breed);
$ddb = strval($dam_dam_breed);

$breed_hist = $hb.$sb.$db.$ssb.$sdb.$dsb.$ddb; 

echo $breed_hist; // outputs: Arabian x ThoroughbredArabianThoroughbredRetiredRetiredThoroughbredThoroughbred

echo "<br>";

$clean_hist = str_replace(" x ", "", $breed_hist);

echo $clean_hist; // outputs: ArabianThoroughbredArabianThoroughbredRetiredRetiredThoroughbredThoroughbred

echo "<br>";

$Arabian = substr_count($clean_hist, 'Arabian');
echo "Arabian: $Arabian"; // output: 2
echo "<br>";

$Thoroughbred = substr_count($clean_hist, 'Thoroughbred');
echo "Thoroughbred: $Thoroughbred"; // output: 4
echo "<br>";

$Warlander = substr_count($clean_hist, 'Warlander');
echo "Warlander: $Warlander"; // output: 0
echo "<br>";` 
```

最重要的是，我有一些基本的 SQL 从数据库中提取信息。

我知道您可以在 PHP 中使用 max() 来查找最高值，但我不确定如何将最高值与正确的品种联系起来（我猜字典会起作用吗？）。

出于测试目的，我一直在使用：

开始马品种：阿拉伯x纯种马

父系：阿拉伯

大坝品种：纯种

父亲品种：已退休

父亲大坝品种：已退休

Dam Sire 品种：纯种

大坝品种：纯种

退休意味着没有关于他们品种的更多信息，因此可以忽略其中的信息，这很好。

我想弄清楚的另一件事是，如果有多个品种并列最高，如何在两个或多个品种之间随机选择。

任何关于我如何更清洁和/或更简单的提示都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T20:36:44.537

我希望这能给你一些指导，预先创建数组来定义实际使用的数据。这些有助于获取您正在寻找的信息。因为这些是数组，所以大多数事情都可以以迭代的方式完成（看[`foreach`](http://php.net/foreach)，这通常很摇滚。我实际上使用了两次，第一次是创建历史，第二次是找出哪个品种是最重要的：

```
$breeds = ['Arabian', 'Retired', 'Thoroughbred', 'Warlander'];

$breed_combos = [
    'horse'     => 'Start horse',
    'sire'      => 'Sire',
    'dam'       => 'Dam',
    'sire_sire' => 'Sire Sire',
    'sire_dam'  => 'Sire Dam',
    'dam_sire'  => 'Dam Sire',
    'dam_dam'   => 'Dam Dam',
];

// combine history
$horse_breed_history = '';
foreach ($breed_combos as $breed_combo_key => $breed_combo_label) {
    $variable = sprintf("%s_breed", $breed_combo_key);
    $breed    = isset($$variable) ? $$variable : random_breed(); # you have the variable set
    printf("%' 12s breed: %s\n", $breed_combo_label, $breed);
    $horse_breed_history .= str_replace(' x ', '', $breed);
}
echo '           History: ', $horse_breed_history, "\n";

// count and pick highest
$horse_breed_history_main = (object)['count' => -1];
foreach ($breeds as $breed) {
    $count = substr_count($horse_breed_history, $breed);
    if ($count > $horse_breed_history_main->count) {
        $horse_breed_history_main->breed = $breed;
        $horse_breed_history_main->count = $count;
    }
}
echo '         Top breed: ', $horse_breed_history_main->breed, "\n"; 
```

一些示例（我在这里使用随机值，因为我没有数据库，也不确定所有品种）：

```
 Start horse breed: Thoroughbred x Retired
        Sire breed: Warlander
         Dam breed: Retired
   Sire Sire breed: Retired x Arabian
    Sire Dam breed: Retired
    Dam Sire breed: Arabian
     Dam Dam breed: Retired x Warlander
           History: ThoroughbredRetiredWarlanderRetiredRetiredArabianRetiredArabianRetiredWarlander
         Top breed: Retired 
```

这些品种和历史可能没有多大意义，但它应该显示它是如何工作的。

我不知道你的数据库结构是什么，也许你也可以在数据库中通过一些查询来做到这一点，这最终可能是最好的。如果不是，此示例显示如何处理字符串计数并在迭代所有可能的品种时获取最高计数。

顺便说一句，如果你用空格连接，你可以创建更好地分隔的字符串：

```
" Arabian Arabian Retired Thoroughbred Retired Warlander Arabian Thoroughbred Warlander " 
```

允许`explode`使用分隔符（此处为空格），然后计算实际值，`array_count_values`然后按降序排序`arsort`，然后第一个条目是最高的：

```
$string = " Arabian Arabian Retired Thoroughbred Retired Warlander Arabian Thoroughbred Warlander ";
$values = array_count_values(explode(' ', trim($string)));
arsort($values);
print_r($values); 
```

如果你不能在数据库中做到这一点，我会说这对你来说是最好的 PHP。

```
Array
(
    [Arabian] => 3
    [Warlander] => 2
    [Retired] => 2
    [Thoroughbred] => 2
) 
```

这是上面用于创建空格分隔列表的代码块：

```
// combine history
$horse_breed_history = ' ';
foreach ($breed_combos as $breed_combo_key => $breed_combo_label) {
    $variable = sprintf("%s_breed", $breed_combo_key);
    $breed    = isset($$variable) ? $$variable : random_breed(); # you have the variable set
    printf("%' 12s breed: %s\n", $breed_combo_label, $breed);
    $horse_breed_history .= str_replace(' x ', ' ', $breed) . ' ';
}
echo '           History: ', $horse_breed_history, "\n"; 
```

它只是在开始时添加一个空格，然后在添加元素之后添加。替换的`x`也已更改为保留一个空格。

我希望这能提供一些指导，你可以从中挑选一些有用的东西。

# java - 将值重新分配给新对象，深度克隆，更好的解决方案？

> ID：14174690
> 
> 赞同：0
> 
> 时间：2013-01-05T17:59:32.590
> 
> 标签：java

我有一个对象，它包含几个字段（整数、字符串等），还有一个 HashMap 和一个 ArrayList。此对象包含用于稍后构建数据库查询的参数，但有时我需要将所有完全相同的参数重新用于其他查询，但 ArrayList 中的不同项目除外。

我注意到，当我更改数组列表中的内容时，它总是会更改原始对象。我已经弄清楚如何通过覆盖 clone() 方法来制作浅拷贝，但数组列表始终由对象的任何副本共享。在深入研究深拷贝等之前，我认为我需要关于这是否是最佳途径的建议。

这是我需要找到复制方法的对象的示例。

```
public class QueryParameters implements Cloneable {

    protected HashMap<String,String> foundArgs = new HashMap<String,String>();
    protected ArrayList<ActionType> action_types = new ArrayList<ActionType>();

    protected String lookup_type = "lookup";
    protected Location loc;
    protected Vector player_location;
    protected int id = 0;
    protected int radius;
    protected boolean allow_no_radius = false;
    protected String player;
    protected String world;
    protected String time;
    protected String entity;
    protected String block;
    // ... lots of getters/setters
} 
```

我总是可以创建一个新实例并使用 getter/setter 来传输数据，但这对我来说太冗长了——我必须复制大约 15 个字段，如果我添加新的字段，我需要记住在此处添加它们。

我获得新实例/克隆的最佳方法是什么，以便更改`action_types`不会影响原始对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:05:43.777

如果您“克隆自己的类”，则不需要使用 getter 和 setter。像这样的构造函数可能吗？

```
private QueryParameter(QueryParameter other)
{
    foundArgs = new HashMap<String, String>(other.foundArgs);
    action_types = new ArrayList<ActionType>(other.action_types);
    // etc
}

// As a static method, or
public static QueryParameter copyOf(QueryParameter other)
{
    return new QueryParameter(other);
}

// as an instance method
public QueryParameter copy()
{
    return new QueryParameter(this);
} 
```

这是众多解决方案中的一种...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:29:03.900

我建议编写一个克隆方法，使用 super.clone() 复制大部分字段，然后替换克隆中的 ArrayList。像这样的东西：

```
import java.util.ArrayList;

public class QueryParameters implements Cloneable {
  @Override
  public String toString() {
    return "QueryParameters [action_types=" + action_types + ", otherData="
        + otherData + "]";
  }

  protected ArrayList<String> action_types = new ArrayList<String>();
  protected String otherData;

  @Override
  public QueryParameters clone() throws CloneNotSupportedException {
    QueryParameters cloned = (QueryParameters) super.clone();
    cloned.action_types = new ArrayList<String>(action_types);
    return cloned;
  }

  public static void main(String[] args) throws CloneNotSupportedException {
    QueryParameters test = new QueryParameters();
    test.otherData = "a field";
    test.action_types.add("xyzzy");
    test.action_types.add("abcde");
    System.out.println("Original: " + test);
    QueryParameters clone = test.clone();
    clone.action_types.add("A new action type");
    System.out.println("Modified clone: " + clone);
    System.out.println("Original after clone modification: " + test);
  }
} 
```

# java - TextView 数组的 setText

> ID：14174692
> 
> 赞同：0
> 
> 时间：2013-01-05T17:59:36.747
> 
> 标签：java, android

我想要做的是有一个 EditText ，人们可以在其中输入他们的名字。当人们按下“添加播放器”按钮时，他们刚刚输入的名称会出现在列表表单的下方。所以我创建了 8 个文本视图，它们最初是不可见的，但是当人们键入名称时，按下“添加播放器”按钮，文本会更改为他们的名称并变为可见。

所以我设置了一个名称列表的TextView数组，它们都是文本视图

```
TextView[] nameList = new TextView[]{name1, name2, name3, name4, name5, name6, name7, name8}; 
```

稍后在 onClick 部分的代码中，我有

```
for (int i = 0; i < 8; i++) {
    String name = etName.getText().toString();
    nameList[i].setText(name);
    nameList[i].setVisibility(View.VISIBLE);
} 
```

但是，有了这个，每当我按下“添加播放器”按钮时，应用程序就会崩溃并且我得到一个 NullPointerException。我将如何解决这个问题？

问题不在于 for 循环，因为应用程序在没有它的情况下崩溃了。问题似乎出在数组上，好像我把

```
name1.setText(name);
name1.setVisibility(View.VISIBLE); 
```

代码运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:03:52.637

看起来你没有正确初始化你的数组，因为`nameList[i]`它是空的。尝试：

```
nameList[0] = (TextView) findViewById(R.id.text1);
nameList[1] = (TextView) findViewById(R.id.text2);
// etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:20:16.150

如果没有关于你在哪里设置 etName 的更多信息（这几乎可以肯定是你的问题），很难知道你在哪里得到你的 null （你的堆栈跟踪会给你一个应该告诉你的行号，顺便说一句）但是放在一边从那你不应该像你一样把一个字段数组放在一起，然后在你的活动中将数字 8 设置为硬编码数字。相反，您应该首先遍历您的活动，并根据您有多少名为 nameX 的视图来构造该数组（其中 X 是一个从 0 向上任意次数的数字）。这样，您将始终拥有准确正确的迭代次数。

如果您不知道如何`Views`根据他们的 XML id 进行查找，请插话，我将为此添加代码。

# ruby-on-rails - 使用 ERB 生成锚点名称

> ID：14174698
> 
> 赞同：0
> 
> 时间：2013-01-05T18:00:08.417
> 
> 标签：ruby-on-rails, anchor, erb

我正在尝试使用我的数据库中的值作为名称创建锚标记。这样我就很容易从另一个页面调用它们。

```
<a name="<%= sailing_class.sort_order %>"</a> 
```

但是sailing_class.sort_order 的值永远不会出现。

非常感谢所有帮助。我在 Rails 3.2 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:05:17.210

您缺少`>`( `<a`close )，因此 html 无效，并且[锚点应具有`id`属性而不是`name`](https://stackoverflow.com/questions/484719/html-anchors-with-name-or-id). 尝试

```
<a id="<%= sailing_class.sort_order %>"></a> 
```

# django - django-social-auth 注册额外步骤

> ID：14174705
> 
> 赞同：1
> 
> 时间：2013-01-05T18:01:06.393
> 
> 标签：django, django-socialauth

我正在使用 django-social-auth 和自定义用户模型（django 1.5），其中包含必需的额外字段。我需要用户在保存模型之前填写这些字段。在后端授权成功之后，但在创建新用户模型之前，有什么方法可以“中断”django-social-auth，以便显示询问帐户详细信息的表单？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T16:24:29.667

您添加一个[管道条目](http://django-social-auth.readthedocs.org/en/latest/pipeline.html)，该条目将 a 返回`HttpResponseRedirect`到您需要的任何地方。使用 django-social-auth 检查示例应用程序，它在两个地方（[此处](https://github.com/omab/django-social-auth/blob/master/example/example/settings.py#L166)和[此处](https://github.com/omab/django-social-auth/blob/master/example/example/settings.py#L173)）切断管道以询问用户一些额外信息。第一个发生在创建用户实例之前。

在每次中断前检查`save_status_to_session`调用，这是在继续时确保管道状态所必需的。

# android - Android：更改 src alpha 并保留背景（将 src 与颜色混合）

> ID：14174710
> 
> 赞同：2
> 
> 时间：2013-01-05T18:01:39.380
> 
> 标签：android, imagebutton, alpha

我一直在寻找这个，但无法真正找出任何干净的方法来做到这一点。

我正在开发一个带有一些按钮的应用程序，主要定义如下：

```
<ImageButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:contentDescription="@null"
    android:src="@drawable/btn1" /> 
```

有一个`onTouchListener`用 更改按钮 alpha `setAlpha(0.5f)`，但它也更改了背景 alpha，这不是我需要的。我想让它看起来更暗，而不是透明。

我已经看到了这个问题：[Android Graphics: Change the alpha of just an image (not the background)](https://stackoverflow.com/questions/6840575/android-graphics-changing-the-alpha-of-just-an-image-not-the-background)`FrameLayout` ，并且该解决方案确实有效，但是为我的应用程序中的每个按钮创建一个对我来说并不好。

鉴于背景是纯色，我认为会有更简单的解决方案，例如颜色混合或类似的东西，但真的无法在任何地方找到它。

**解决方案**

刚刚发现这篇文章：[http ://tech.chitgoks.com/2011/04/17/android-change-imagebutton-tint-to-simulate-button-pressed/](http://tech.chitgoks.com/2011/04/17/android-change-imagebutton-tint-to-simulate-button-pressed/)

解决方案很简单：

```
button.setColorFilter(Color.argb(150,0,0,0)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:08:34.527

您可以使用方法获取可绘制的图像`getDrawable()`并尝试更改其 alpha。

# javascript - Chrome：“加载资源失败”（HTML5 视频游戏）

> ID：14174717
> 
> 赞同：0
> 
> 时间：2013-01-05T18:02:42.627
> 
> 标签：javascript, html, canvas, resources

我在开发的游戏中遇到了一些令人沮丧的问题，因为我刚刚决定将开发的部分上传到服务器以向我的朋友展示，结果有时加载错误，情况如下：

1 - 我有一个resources.js 文件，它会在第一时间加载所有游戏资源，并带有进度条。2 - 在同一个文件中，我根据浏览器（mp3 / ogg）调整游戏声音。3 - 我使用大的 try/catch 来处理异常，以防加载引发错误。

我在使用 ogg 格式时遇到了更多麻烦，因为它看起来更“重”地被浏览器（尤其是在 Chrome 中）处理，但是当您第二次（刷新）或多次加载游戏时，它会更快并且更有效（显然因为缓存的文件），但我想要一些更容易解决的东西，因为我不会告诉用户“如果游戏没有加载，请刷新游戏”，（这实际上是我的异常抛出的原因，哈哈）“ .

现在，我也一直在思考一些事情：

服务器是否有最大 https 请求时间/下载 - 大小？因为引发 javascript 控制台的错误是“无法加载资源[http://domain.com/blahblahblah.ogg](http://domain.com/blahblahblah.ogg) ”？（并且它们存在）并且我的游戏大小为 12 mb，另一件事是当我直接转到声音文件本身时，它也给了我错误！（尤其是大的）

我的 ogg 文件的大小范围为：12 kb - 最大 1 mb，并且可能是连接速度较慢的问题（我的是 1 mb）。

所以想看看有没有什么解决办法或者有开发过HTML5游戏的人给我一个建议，顺便说一下如果你想玩这个游戏是这样的：

[http://evilition.hostei.com/Evilition/](http://evilition.hostei.com/Evilition/)

谢谢阅读！

# c# - 项目未出现在画布内 c#/silverlight

> ID：14174718
> 
> 赞同：0
> 
> 时间：2013-01-05T18:03:06.327
> 
> 标签：c#, silverlight

我只是在尝试使用 Silverlight，但是我遇到了 Canvas 元素的问题。我正在尝试基于多维数组生成一个矩形网格，但是当我运行代码时，画布没有元素。我想知道您是否可以为此提供一些指导？

```
 public void generate(Rectangle[, ,] worldData)
    {
        int locx = 0, locy = 0;

        Rectangle currentBlock = new Rectangle();

        int z = 0;
        for (int x = 0; x < worldData.GetLength(1); x++)
        {
            for (int y = 0; y < worldData.GetLength(2); y++)
            {
                currentBlock = worldData[z, x, y];

                Canvas.SetTop(currentBlock, locy);
                Canvas.SetLeft(currentBlock, locx);

                locy = locy + 32;

                gridDisplayCanvas.Children.Add(currentBlock);

            }
            locx = locx + 32;
            locy = 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:18:21.080

我弄清楚是什么导致了这个问题，用 \ 引用的图像，但 silverlight 期望 \

# java - 将字符串转换为颜色 int

> ID：14174719
> 
> 赞同：2
> 
> 时间：2013-01-05T18:03:25.167
> 
> 标签：java, android, string, int, remoteview

```
 String ColorString = "Color.BLUE";

    int colorint = Integer.parseInt(ColorString);

    ...

    views.setTextColor(R.id.tvConfigInput, colorint); 
```

为什么会崩溃？在我得到的logcat中`java.lang.numberformatexception: Invalid int "Color.BLUE"`

我有点认为它在从字符串到 int 的转换时是错误的，因为如果我只是这样设置 int：

```
int colorint = Color.BLUE; 
```

它有效..但我不知道它有什么问题。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T18:06:13.093

的常数值为`Color.Blue`：-16776961 (0xff0000ff)。您不是在解析一个 int，您只是在尝试解析一个字符串并将其转换为一个 int（这不起作用）。

“Color.BLUE”不是整数，但`Color.BLUE`最终会返回一个常量值。

您需要这样做才能使其正确：

```
int colorInt = Color.BLUE;
views.setTextColor(R.id.tvConfigInput, colorInt); 
```

编辑：

```
String ColorString = "BLUE";
int colorInt = Color.parseColor(ColorString);
views.setTextColor(R.id.tvConfigInput, colorInt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T20:15:24.257

您是否尝试过使用枚举？

```
public enum Color{
    BLUE(42);

    private int hex;

    Color(int hex){
        this.hex = hex;
    }

    public int getHexCode(){return hex;}
    public String getName(){ return this.name();}
} 
```

这样，您可以分配可以表示多个值的字符串文字

```
Color.BLUE.getHext() == 42
Color.BLUE.name() == "BLUE" 
```

# regex - 正则表达式匹配澳大利亚商业号码 (ABN)

> ID：14174738
> 
> 赞同：5
> 
> 时间：2013-01-05T18:05:35.107
> 
> 标签：regex

我需要一个正则表达式来匹配一个值，其中每个字符可以是从 0 到 9 的数字或空格。该值必须恰好包含 11 位数字。

例如，它应该匹配格式为“012 345 678 90”或“01234567890”的值。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-28T11:44:56.773

为了将来可能会发现这一点的其他澳大利亚开发人员：

`^(\d *?){11}$`

匹配 11 个数字，每个数字后有零个或多个空格。

编辑：

正如@ElliottFrisch 所提到的，ABN 也有一个用于正确验证的数学公式。使用正则表达式来正确验证 ABN 将非常困难（或不可能） - 尽管上述正则表达式至少将匹配 11 位数字和间距。如果您在进行实际验证，那么在这种情况下，正则表达式可能不适合您。

进一步阅读：

[https://abr.business.gov.au/Help/AbnFormat](https://abr.business.gov.au/Help/AbnFormat)

这是一个 PHP 实现：

[http://www.clearwater.com.au/code](http://www.clearwater.com.au/code)

从上面的页面复制的代码，以防有一天它变得不可用：

```
//   ValidateABN
//     Checks ABN for validity using the published 
//     ABN checksum algorithm.
//
//     Returns: true if the ABN is valid, false otherwise.
//      Source: http://www.clearwater.com.au/code
//      Author: Guy Carpenter
//     License: The author claims no rights to this code.  
//              Use it as you wish.

function ValidateABN($abn)
{
    $weights = array(10, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19);

    // strip anything other than digits
    $abn = preg_replace("/[^\d]/","",$abn);

    // check length is 11 digits
    if (strlen($abn)==11) {
        // apply ato check method 
        $sum = 0;
        foreach ($weights as $position=>$weight) {
            $digit = $abn[$position] - ($position ? 0 : 1);
            $sum += $weight * $digit;
        }
        return ($sum % 89)==0;
    } 
    return false;
} 
```

还有一个我在这里找到的javascript：

[http://www.mathgen.ch/codes/abn.html](http://www.mathgen.ch/codes/abn.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-08T00:58:43.113

参考旧死链接：http : [//www.ato.gov.au/businesses/content.asp? doc=/content/](http://www.ato.gov.au/businesses/content.asp?doc=/content/13187.htm&pc=001/003/021/002/001&mnu=610&mfp=001/003&st=&cy=1) *13187.htm &pc=001/003/021/002/001&mnu=610&mfp=001/003&st=&cy=* [1](http://www.ato.gov.au/businesses/content.asp?doc=/content/13187.htm&pc=001/003/021/002/001&mnu=610&mfp=001/003&st=&cy=1)

# 确认 ABN

以下公式可用于验证分配给您的 ABN 或验证发给您处理的企业的 ABN。

**要验证 ABN：**
从第一个（左）数字中减去 1，得到一个新的 11 位数字 将这个新数字中的每个数字乘以其权重因子 将得到的 11 个乘积相加。
将总数除以 89，注意余数。
如果余数为零，则该数字有效。

**数字位置**
1 2 3 4 5 6 7 8 9 10 11

**重量**
10 1 3 5 7 9 11 13 15 17 19

例如，检查 ABN 53 004 085 616 的有效性

5 3 0 0 4 0 8 5 6 1 6

从第一个（左）数字减去 1 得到新数字 4 3 0 0 4 0 8 5 6 1 6

应用加权因子 10 1 3 5 7 9 11 13 15 17 19

(4x10)+(3x1)+(0x3)+(0x5)+(4x7)+(0x9)+(8x11)+(5x13)+(6x15)+(1x17)+ (6x19) 40+3+0+0 +28+0+88+65+90+17+114

445/89 = 5 余数 0

余数为零，因此该数字有效。

这是一个 C# 验证：

```
public static bool ValidateABN(string abn)
{
    bool isValid = false;
    int[] weight = { 10, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19 };
    int weightedSum = 0;

    //ABN must not contain spaces, comma's or hypens
    abn = StripNonDigitData(abn);

    //ABN must be 11 digits long  
    if (!string.IsNullOrEmpty(abn) & Regex.IsMatch(abn, "^\\d{11}$"))
    {
        //Rules: 1,2,3  
        for (int i = 0; i <= weight.Length - 1; i++)
        {
            weightedSum += (int.Parse(abn[i].ToString()) - ((i == 0 ? 1 : 0))) * weight[i];
        }
        //Rules: 4,5  
        return ((weightedSum % 89) == 0);
    }
    return isValid;
}

public static string StripNonDigitData(string input)
{
    StringBuilder output = new StringBuilder("");
    foreach (char c in input)
    {
        if (char.IsDigit(c))
        {
            output.Append(c);
        }
    }
    return output.ToString();
} 
```

和一个 VB.Net 验证：

```
Public Shared Function ValidateABN(ByVal abn As String) As Boolean
    Dim isValid As Boolean = False
    Dim weight() As Integer = {10, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19}
    Dim weightedSum As Integer = 0

    'ABN must not contain spaces, comma's or hypens
    abn = StripNonDigitData(abn)

    'ABN must be 11 digits long  
    If Not String.IsNullOrEmpty(abn) And Regex.IsMatch(abn, "^\d{11}$") Then
        'Rules: 1,2,3  
        For i As Integer = 0 To weight.Length - 1
            weightedSum += (Integer.Parse(abn(i).ToString()) - (IIf(i = 0, 1, 0))) * weight(i)
        Next
        'Rules: 4,5  
        Return ((weightedSum Mod 89) = 0)
    End If
    Return isValid
End Function

Public Shared Function StripNonDigitData(ByVal input As String) As String
    Dim output As New StringBuilder("")
    For Each c As Char In input
        If Char.IsDigit(c) Then
            output.Append(c)
        End If
    Next
    Return output.ToString
End Function 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-19T08:57:09.997

```
// return false if not correct AU vat format
function ABNValidation (val) {
    val = val.replace(/[^0-9]/g, '');
    let weights = new Array(10, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19);
    if (val.length === 11) { 
        let sum = 0;
        weights.forEach(function(weight, position) {
            let digit = val[position] - (position ? 0 : 1);
            sum += weight * digit;
        });
        return sum % 89 == 0;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-30T08:14:46.887

另一个 JavaScript 版本：

```
/**
 * validate ABN
 * @param {string} abn
 * @return {boolean} is ABN number valid
 *    
 * 0\. ABN must be 11 digits long
 * 1\. Subtract 1 from the first (left) digit to give a new eleven digit number         
 * 2\. Multiply each of the digits in this new number by its weighting factor         
 * 3\. Sum the resulting 11 products         
 * 4\. Divide the total by 89, noting the remainder         
 * 5\. If the remainder is zero the number is valid  
 */
var validateABN = function(abn){

    var isValid = true;

    //remove all spaces
    abn = abn.replace(/\s/g, '');

    //0\. ABN must be 11 digits long
    isValid &= abn && /^\d{11}$/.test(abn);

    if(isValid){

        var weightedSum = 0;
        var weight = [10, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19];

        //Rules: 1,2,3  
        for (var i = 0; i < weight.length; i++) {
            weightedSum += (parseInt(abn[i]) - ((i === 0) ? 1 : 0)) * weight[i]; 
        }

        //Rules: 4,5                 
        isValid &= ((weightedSum % 89) === 0);
    }

    return isValid;
};

//tests
console.log(validateABN('51824753556'));
console.log(validateABN('51 824 753 556'));
console.log(validateABN('51824744556')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T18:08:15.603

你读过正则表达式吗？这很简单。

```
^[0-9 ]+$ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-25T21:05:20.540

对于那些使用 AngularJS 的人，我编写了一个指令来进行 ABN 验证：

```
var app = angular.module("demoapp", ["input-abn-directive"]); 
```

和

```
<input type="abn" name="inputAbn" ng-model="modelAbn"> 
```

[https://github.com/jasadams/input-abn-directive](https://github.com/jasadams/input-abn-directive)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-17T07:53:30.810

JavaScript 版本：

```
function checkABN(str) {
    if (!str || str.length !== 11) {
        return false;
    }
    var weights = [10, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19],
        checksum = str.split('').map(Number).reduce(
        function(total, digit, index) {
            if (!index) {
                digit--;
            }
            return total + (digit * weights[index]);
        },
        0
    );

    if (!checksum || checksum % 89 !== 0) {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-05T08:37:35.867

**回答问题**

很多答案将包括正则表达式`[0-9]{11}`或类似的，这对于大多数情况来说已经足够了，但是没有一个答案考虑到 ABN 不能以零开头的事实。

可用于确定 ABN 的最简单的正则表达式是：`^\s*[1-9](\s*\d){10}\s*$`.

**标准格式**

标准数字格式是 2,3,3,3 位分组模式，前两位数字构成校验位，后 9 位是实际标识符。

用于专门检查此格式（带或不带空格）的正则表达式是`^[1-9]\d(\s?\d{3}){3}$`.

`number_format`使用 PHP函数可以很容易地模仿这种格式。

```
number_format( '12123123123', 0, '', ' ' ) === '12 123 123 123'; 
```

**实际验证**

与实际验证相关的任何其他答案都应该大部分有效，但不是 100%，除非有额外的检查以确保数字不以零开头。扩展当前评分最高的答案，只需要进行一项额外的检查。

```
if ( strlen( $abn ) === 11 && $abn[0] > 0 ) { // or $abn > 9999999999
    // ...
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-01T00:19:16.483

**已测试 ABN Javascript 实现**

这些是有效的**ABN**：

*   33 051 775 556 应该可以
*   14 069 979 460 应该可以
*   24 302 976 253 应该可以

这些是**无效**的ABN：

*   65 065 987 968 应该失败
*   12 345 678 965 应该失败

```
 function checkABN(value) {
      let weights = new Array(10, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19);
      let abn = value.replace(/\D/g, ''); // strip non numeric chars
      if (abn.length != 11) {
          return false;
      }
      let abnFirstDigit = parseInt(abn.charAt(0)) - 1; //subtract 1 from first digit
      abn = abnFirstDigit + abn.substring(1); // replace first digit with the substracted value

      let total = 0;
      for (let i = 0; i < 11; i++)
          total += weights[i] * abn.charAt(i);

      if (total == 0 || total % 89 != 0) {
          return false;
      } else {
          return true;
      }
  } 
```

来自[http://www.mathgen.ch/codes/abn.html的那个](http://www.mathgen.ch/codes/abn.html) **有问题**，它不允许 14 069 979 460（应该是有效的）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-07T05:23:19.567

**SQL Server 解决方案 - 在单个案例语句中**

如其他答案中所述，单个正则表达式不太可能验证 ABN。下面的`case`语句可以在 Microsoft SQL Server 中用于验证 ABN。您可能希望在包含 ABN 字段的表上创建一个持久计算列。根据下面的评论，如果您返回整数而不是文本描述，那么您可以使用这样的字段进行相对简单的比较：

*   1 = 有效
*   0 = 无效（长度错误）
*   -1 = 无效（模式检查失败）

允许您使用以下表达式：

*   `where abnValid = 1 -- match all valid records`
*   `where abnValid < 1 -- match all invalid records`

下面验证 ABN 的逻辑基于 Jeremy Thompson 的回答。下面的语句冗长且效率低下 - 因此它适合单个`case`语句，以便您可以将它与持久计算列一起使用 - 这意味着性能影响将在更新时，而不是在选择时。它假设您的 abnColumn 是基于字符的 -`cast`如果您使用的是数字类型，请添加显式。它会忽略源数据中的空格字符，并假定 ABN 的第一个数字不为零。

```
 case 
        when len(ltrim(rtrim(replace(abnColumn,' ','')))) <> 11 then 'Wrong length' -- or perhaps 0
        when
        (
            ((try_cast(left(ltrim(rtrim(replace(abnColumn,' ',''))),1) as int)-1)*10) +
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),10),1) as int)*1) +
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),9),1) as int)*3) +
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),8),1) as int)*5) +
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),7),1) as int)*7) +
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),6),1) as int)*9) +
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),5),1) as int)*11) +
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),4),1) as int)*13) + 
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),3),1) as int)*15) + 
            (try_cast(left(right(ltrim(rtrim(replace(abnColumn,' ',''))),2),1) as int)*17) +
            (try_cast(right(ltrim(rtrim(replace(abnColumn,' ',''))),1) as int)*19)
        ) %89 <> 0 then 'Check pattern fail' -- or perhaps -1
        else 'Valid' -- or perhaps 1
    end as abnValidationCheck -- or perhaps abnValid 
```

# iphone - 是否保证在主线程上通知 CAAnimation 委托？

> ID：14174744
> 
> 赞同：1
> 
> 时间：2013-01-05T18:06:08.967
> 
> 标签：iphone, ios, multithreading, core-animation

核心动画在它们自己的线程上运行。但是`animationDidStop:finished:`动画完成后保证在主线程上运行吗？在我的测试中确实如此，但我不知道我是否可以在所有时间和所有版本的 iOS 中依赖它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:13:48.460

它确实发生在主线程上，正如这个[线程](https://stackoverflow.com/questions/3455221/iphone-does-animation-stop-selector-run-on-the-main-thread)中提到的那样。从 iOS 4.0 及更高版本开始考虑使用`block-based animation methods`。

**编辑**

从官方[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/clm/UIView/animateWithDuration:delay:options:animations:completion:)的描述中`animateWithDuration:animations:completion:`提到，完成块在下一个运行循环周期的开始执行。如果您在主线程上调用您的方法，我相信我们在这里谈论的是与主线程相关的循环周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:51:31.693

我的理解是，该`animationDidStop:finished:`方法总是在主线程上调用，但这是一种理解，而不是保证。

您可能希望将此问题发布到 Apple 开发者论坛的 Core Animation 区域，并提出 Apple 工程师参与的具体要求。有许多 Apple 员工定期发布他们的问题。（Core Animation 想到了 Rincewind）。

# android - 在 onCreate() 中使用循环

> ID：14174746
> 
> 赞同：1
> 
> 时间：2013-01-05T18:06:22.617
> 
> 标签：android

我正在尝试使用循环来设置 int []。在那个 int[] 中，我想为稍后使用的图片库提供可绘制对象。我希望在此活动的 onCreate() 之后立即初始化数组，但我读到您不能在 onCreate() 方法中使用循环，我必须使用线程。我设置如下，但它不起作用。我的应用程序不断崩溃。

```
@Override
public void onCreate(Bundle icicle) {  

    super.onCreate(icicle);

    setContentView(R.layout.activity_gallery_demo);

    mySelection = (TextView) findViewById(R.id.mySelection);        

    Runnable myRunnable = new Runnable() {

        @Override
        public void run() {

            for(int x = 0; x < 7; x++) {
                test[x] = rand.nextInt(7) + 1; 
            }

            for(int i = 0; i < 7; i++) {
                switch(test[i]) {
                case 1: 
                    test[i] = R.drawable.rs01card;
                    break;
                case 2: 
                    test[i] = R.drawable.rs02card;
                    break;
                case 3: 
                    test[i] = R.drawable.rs03card;
                    break;
                case 4: 
                    test[i] = R.drawable.rs04card;
                    break;
                case 5:
                    test[i] = R.drawable.rs05card;
                    break;
                case 6: 
                    test[i] = R.drawable.rs06card;
                    break;
                case 7: 
                    test[i] = R.drawable.rs07card;
                    break;
                }
            }
        }
    };

    Thread myThread = new Thread(myRunnable);
    myThread.start();
} 
```

链接到我的整个代码： [http ://www.reddit.com/r/androiddev/comments/160l7i/need_help_with_loop_during_oncreate/](http://www.reddit.com/r/androiddev/comments/160l7i/need_help_with_loop_during_oncreate/)

这是日志猫：

```
01-05 12:58:15.274: I/ActivityStack(205): START {act=com.levingston.minisapp.GalleryDemo cmp=com.levingston.minisapp/.GalleryDemo} from pid 7744
01-05 12:58:15.274: V/ActivityStack(205): Prepare open transition: starting ActivityRecord{41b4efe8 com.levingston.minisapp/.GalleryDemo}
01-05 12:58:15.274: V/ActivityStack(205): Prepare open transition: prev=ActivityRecord{41bcd2c0 com.levingston.minisapp/.MainActivity}
01-05 12:58:15.289: D/AndroidRuntime(7744): Shutting down VM
01-05 12:58:15.289: W/dalvikvm(7744): threadid=1: thread exiting with uncaught exception (group=0x40a811f8)
01-05 12:58:15.289: E/AndroidRuntime(7744): FATAL EXCEPTION: main
01-05 12:58:15.289: E/AndroidRuntime(7744): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.levingston.minisapp/com.levingston.minisapp.GalleryDemo}: java.lang.NullPointerException
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2007)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2032)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.app.ActivityThread.access$600(ActivityThread.java:126)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1167)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.os.Looper.loop(Looper.java:137)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.app.ActivityThread.main(ActivityThread.java:4487)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at java.lang.reflect.Method.invoke(Method.java:511)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at dalvik.system.NativeStart.main(Native Method)
01-05 12:58:15.289: E/AndroidRuntime(7744): Caused by: java.lang.NullPointerException
01-05 12:58:15.289: E/AndroidRuntime(7744):     at com.levingston.minisapp.GalleryDemo.onCreate(GalleryDemo.java:53)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.app.Activity.performCreate(Activity.java:4635)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-05 12:58:15.289: E/AndroidRuntime(7744):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1971)
01-05 12:58:15.289: E/AndroidRuntime(7744):     ... 11 more
01-05 12:58:15.297: W/ActivityManager(205):   Force finishing activity com.levingston.minisapp/.GalleryDemo
01-05 12:58:15.297: V/ActivityStack(205): Prepare close transition: finishing ActivityRecord{41b4efe8 com.levingston.minisapp/.GalleryDemo}
01-05 12:58:15.305: W/ActivityManager(205):   Force finishing activity com.levingston.minisapp/.MainActivity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:14:12.843

**重写**
没有理由不能在内部使用循环`onCreate()`，但你并不特别需要你的两个。试试这个：

```
TextView mySelection;
int[] test = new int[7];

@Override
public void onCreate(Bundle icicle) {  
    super.onCreate(icicle);
    setContentView(R.layout.activity_gallery_demo);
    mySelection = (TextView) findViewById(R.id.mySelection);        

    for(int i = 0; i < 7; i++) {
        switch(random.nextInt(7) + 1) {
        case 1: 
            test[i] = R.drawable.rs01card;
            break;
        case 2: 
            test[i] = R.drawable.rs02card;
            break;
        case 3: 
            test[i] = R.drawable.rs03card;
            break;
        case 4: 
            test[i] = R.drawable.rs04card;
            break;
        case 5:
            test[i] = R.drawable.rs05card;
            break;
        case 6: 
            test[i] = R.drawable.rs06card;
            break;
        case 7: 
            test[i] = R.drawable.rs07card;
            break;
        }
    };
} 
```

我希望这更接近您想要的，很抱歉我错过了您最初尝试做的事情...
如果您扩大图像列表，请考虑使用[`getIdentifier()`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29). 这不是最快的方法，但如果使用得当，您不必输入每个`R.drawable.xxx`ID。您可以简单地使用：

```
int id = getResources().getIdentifier("rs0" + i + "card", "drawable", getPackageName()); 
```

# php - 了解 ssh2_exec() 中的 PTY 参数

> ID：14174748
> 
> 赞同：2
> 
> 时间：2013-01-05T18:06:25.590
> 
> 标签：php, linux, ssh, pty

下面的答案并不让我满意，我想知道更多关于发生了什么。 [谁能解释 ssh2_exec() 函数调用中的 $pty 参数](https://stackoverflow.com/questions/10251942/can-anyone-explain-the-pty-argument-in-ssh2-exec-function-call)

它是强制客户端告诉服务器生成 PTY 还是 PTY 完全是客户端的？据我所知，它附加到诸如 SSHd 之类的进程，这需要调用服务器。此外，当设置为**true**时，它​​是否模拟默认 shell？它是什么？我知道你可以通过**xterm**例如，它模拟 PTY，这有什么不同吗？从我的角度来看，仿真意味着它不是真正的 PTY。

读起来可能有点混乱，但我正在努力掌握这个概念。谢谢你。我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:48:26.923

“pty”本质上是某种应用程序或守护进程之间的“管道”（例如，我从事虚拟化工作，我们使用 pty 为虚拟机提供虚拟终端）。pty 有“主人”和“奴隶”的一面。从端是您的正常“终端”程序将使用的 - xterm 或 ssh 等。主端由任何“事物”提供数据到终端 [如果您写入 pty，例如当您键入或粘贴时text into an x​​term] 它被控制主机的进程读取 - 然后主机对这些数据执行它应该做的任何事情 - 例如在 ssh 情况下通过网络发送它。

这完全与“你的结局”发生的事情有关。如果您正在通过 ssh 运行“交互式”命令 - 说“ssh somemachine make menuconfig”[假设您的主目录是 linux 源目录 - 我们将忽略它可能不是的事实]，默认为不做一个pty，所以menuconfig可能会失败[至少不能正确运行]，因为它是一个“交互式”文本程序，允许你按键移动等等。所以使用“ssh -t somemachine make menuconfig”会给你的 ssh 一个 pty。或者，“ssh somemachine”默认会给你一个 pty，因为你需要在另一端输入东西。

pty 是一个“本地”终端，但 sshd 进程将从另一端向它提供数据，而您的本地 sshd 进程将其馈送到 pty 的“主”端。

这个页面描述了我想说的 [http://lugatgt.org/2009/10/28/ssh-tips-and-tricks-2/](http://lugatgt.org/2009/10/28/ssh-tips-and-tricks-2/)

# jquery - jquery blockui 插件不会覆盖默认的“等待”消息

> ID：14174749
> 
> 赞同：2
> 
> 时间：2013-01-05T18:06:32.733
> 
> 标签：jquery, jquery-plugins, blockui, jquery-blockui

有人可以帮我解决这些关于使用 jquery blockui 插件（http://jquery.malsup.com/block/#）的问题吗？

1.  为什么这行不通？

    ```
    $(document).ajaxStart($.blockUI({message: "wait..."})).ajaxStop($.unblockUI); 
    ```

    如果我这样做：

    ```
    $(document).ajaxStart($.blockUI).ajaxStop($.unblockUI); 
    ```

    它有效，但我想用我自己的设置覆盖默认消息。这也不起作用：

    ```
    $.blockUI({ message: "wait..." }); 
    ```

2.  我已经能够用这个覆盖消息：

    $.blockUI.defaults.message = "等待...";

    但是如果我在我的页面中定义一个 div 并将其传递给 message 属性，那么它就不起作用，但根据插件网站中的文档，它应该：

    ```
    <div id="loadingMessageBox" style="display: none;">
        <img src="../Images/spinning.gif" />wait...
    </div> 

    $.blockUI.defaults.message = $("#loadingMessageBox"); 
    ```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:23:37.083

$(document).ajaxStart() 将对函数的引用作为参数。它为 jquery 提供了一个函数，以便将来在 ajax 调用开始时调用。这就是为什么有效的版本是`$document.ajaxStart($.blockUI)`而不是`$document.ajaxStart($.blockUI())`

您的第二个版本`$.document.ajaxStart($.blockUI({message: 'wait...'})`在功能上等同于`$document.ajaxStart($.blockUI())`- 它立即调用 blockUI 函数，而不是提供对它的引用。

如果您不想更改默认的 blouckUI 消息，最简单（也许不是最好）的解决方法是将其包装在另一个函数中，如下所示：

```
var ajaxBlock = function() { $.blockUI({message: 'wait...'}) }
$(document).ajaxStart(ajaxBlock); 
```

# c# - 如何使用 c# 从 url 读取图像并将其保存到 Windows 8 的内部存储中

> ID：14174752
> 
> 赞同：0
> 
> 时间：2013-01-05T18:06:54.153
> 
> 标签：c#, windows-8

> **可能重复：**
> [如何使用 httpwebrequest 将图像从网站拉到本地文件](https://stackoverflow.com/questions/2368115/how-to-use-httpwebrequest-to-pull-image-from-website-to-local-file)

可以说，我有一张图片[http://abc.com/image/abc.jpg](http://abc.com/image/abc.jpg)我想下载它并保存到我的 Windows 8 商店应用程序中自己的存储中（而不是存储到图片库中），所以我的应用程序可以调用并显示图像，并且图像似乎不是来自图片库。

如何用 c# 完成上述任务？代码示例？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:58:52.030

可能最好让浏览器缓存它，因为管道已经到位。

如果你真的想解决这个问题，使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)是要使用的类，[如何使用 httpwebrequest 将图像从网站拉到本地文件](https://stackoverflow.com/questions/2368115/how-to-use-httpwebrequest-to-pull-image-from-website-to-local-file)似乎有一个下降的答案。

# git - Git : git rm 删除本地和远程存储库中的文件

> ID：14174757
> 
> 赞同：1
> 
> 时间：2013-01-05T18:07:34.060
> 
> 标签：git

我有一个 master 和 development 分支。我对开发分支做了一些提交并推送到远程存储库，如图所示

```
git checkout development
git rm AbstractContent.java 
git push -u origin development . 
```

我观察到 `git rm AbstractContent.java command` 该文件已在本地删除，但在远程存储库中它仍然存在。

**请让我知道如何在本地和远程存储库中删除文件。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T18:08:38.707

在你推动之前提交。

```
git rm AbstractContent.java 
git commit -m "Remove AbstractContent"
git push -u origin development 
```

# ajax - 如何使用 curl 从 JSON POST 请求中查找所有数据

> ID：14174758
> 
> 赞同：0
> 
> 时间：2013-01-05T18:07:46.240
> 
> 标签：ajax, json, model-view-controller, curl

我正在玩 spogo.co.uk（英国体育）的开放数据项目。

有关搜索示例，请参见此处：`https://spogo.co.uk/search#all/Football Pitch/near-london/range-5`。

我一直在使用 cygwin 和 curl 将 JSON 数据发布到 MVC 控制器。下面是一个例子：

```
curl -i -X POST -k -H "Accept: application/json" -H "Content-Type: application/json; charset=utf-8" https://spogo.co.uk/search/all.json --data '{"searchString":"","address":    {"latitude":55,"longitude":-3},"page":0}' 
```

问题：

1.  如何找出帖子数据中可以包含哪些其他变量？
2.  我怎样才能返回所有结果，而不是一次只返回 20 个？循环浏览页码不会一次全部交付。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:18:42.553

AJAX 只是一种通过连接异步发布数据的技术，JSON 只是一种可以包含数据的字符串格式。它们都没有内置用于查询信息的机制，例如接受哪些字段或返回的数据量。

您将需要查看 spogo.co.uk 上的 Web 服务文档以获取这些答案，如果他们的 Web 服务公开了此类功能，他们将成为命令和格式的最终​​权威。

# objective-c - Objective c比较字符串多个单词

> ID：14174760
> 
> 赞同：0
> 
> 时间：2013-01-05T18:08:02.860
> 
> 标签：objective-c, string, comparison

嗨，我正在寻找使用目标 c 比较 2 个字符串。一个字符串是一个单词，另一个字符串是一个或多个单词。如何在单词级别检查匹配项？即，如果多个单词字符串中的任何单词与我的单个单词字符串匹配，则返回 1 否则返回 0 ？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:23:58.863

您可能很想使用`-[NSString rangeOfString:]`：

```
if ([multipleWords rangeOfString:singleWord].location != NSNotFound)
    return YES;
return NO; 
```

但它并不完美。你可能有“回归”，`multipleWords`也`singleWord`可能是“回归”，给你一个误报。

因此，我们必须使用`NSRegularExpression`.

```
NSString *single = @"returning";
NSString *multiple = @"a man is returning home";
NSString *pattern = [NSString stringWithFormat:@"\\b%@\\b",single];
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];

NSRange range = NSMakeRange(0, multiple.length);
NSUInteger matched = [regex numberOfMatchesInString:multiple options:0 range:range];
NSLog(@"number of matched = %ld", matched); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:28:26.420

如果您在较长的“I AM AWARE”中搜索“WAR”，上述代码将返回 1。也许您正在寻找整个单词匹配。
在这种情况下，您应该使用...将长字符串拆分为单个单词的数组。

```
NSArray *singleWords = [multiWordString componentsSeparatedByString: @" "]; 
```

然后解析数组找到**oneWordString**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:56:29.377

您可以使用 将字符串中的单词拆分为数组`[string componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]`。然后，您可以检查数组中的每个单词以查看它是否与正在搜索的单个单词匹配。这不是最有效的方法，但它可以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T18:14:16.810

您可以使用`NSString`'s[`rangeOfString`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/rangeOfString%3a)方法：

```
NSRange range = [multiWordString rangeOfString:oneWordString];
if (range.location == NSNotFound)
    return 0;
else
    return 1; 
```

# java - CAS集成后JasperReports Server Null指针异常

> ID：14174764
> 
> 赞同：0
> 
> 时间：2013-01-05T18:08:35.900
> 
> 标签：java, security, spring-security, cas, jasperserver

我已按照[此 wiki](http://community.jaspersoft.com/wiki/integrating-cas-jasperreports-server#Modify_the_cas.properties_file)上的指南将*JasperReports Server 4.7.1 Pro*与*CAS*身份验证集成。

身份验证成功完成，我可以重定向到主流程，`/jasperserver-pro/flow.html?_flowId=homeFlow`. 但是所有其他链接都会引发空指针异常。

我的猜测是我缺少一些属性来设置安全 xml 文件之一。

我在下面包含了完整的堆栈跟踪。

我应该研究的任何想法？

```
java.lang.NullPointerException at
com.jaspersoft.jasperserver.multipleTenancy.security.MTAcegiSecurityContextProvider.getContextUser(MTAcegiSecurityContextProvider.java:55) at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at
java.lang.reflect.Method.invoke(Method.java:597) at
org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318) at
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196) at
 $Proxy97.getContextUser(Unknown Source) at
com.jaspersoft.jasperserver.search.action.RepositorySearchAction.init(RepositorySearchAction.java:135) at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at
java.lang.reflect.Method.invoke(Method.java:597) at
org.springframework.webflow.action.DispatchMethodInvoker.invoke(DispatchMethodInvoker.java:98) at
org.springframework.webflow.action.MultiAction.doExecute(MultiAction.java:123) at
org.springframework.webflow.action.AbstractAction.execute(AbstractAction.java:188) at
org.springframework.webflow.execution.ActionExecutor.execute(ActionExecutor.java:51) at
org.springframework.webflow.action.EvaluateAction.doExecute(EvaluateAction.java:77) at
org.springframework.webflow.action.AbstractAction.execute(AbstractAction.java:188) at
org.springframework.webflow.execution.AnnotatedAction.execute(AnnotatedAction.java:145) at
org.springframework.webflow.execution.ActionExecutor.execute(ActionExecutor.java:51) at
org.springframework.webflow.engine.ActionState.doEnter(ActionState.java:101) at
org.springframework.webflow.engine.State.enter(State.java:194) at
org.springframework.webflow.engine.Transition.execute(Transition.java:227) at
org.springframework.webflow.engine.DecisionState.doEnter(DecisionState.java:51) at
org.springframework.webflow.engine.State.enter(State.java:194) at 
org.springframework.webflow.engine.Flow.start(Flow.java:535) at
org.springframework.webflow.engine.impl.FlowExecutionImpl.start(FlowExecutionImpl.java:366) at
org.springframework.webflow.engine.impl.FlowExecutionImpl.start(FlowExecutionImpl.java:225) at
org.springframework.webflow.executor.FlowExecutorImpl.launchExecution(FlowExecutorImpl.java:140) at
sun.reflect.GeneratedMethodAccessor230.invoke(Unknown Source) at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at
java.lang.reflect.Method.invoke(Method.java:597) at
org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318) at
org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) at
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) at
org.springframework.security.intercept.method.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:66) at
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) at
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) at
 $Proxy188.launchExecution(Unknown Source) at
org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:193) at
org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174) at     
org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48) at
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900) at
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827) at
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) at
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) at
javax.servlet.http.HttpServlet.service(HttpServlet.java:621) at
javax.servlet.http.HttpServlet.service(HttpServlet.java:728) at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:399) at 
com.jaspersoft.jasperserver.api.security.IPadSupportFilter.doFilter(IPadSupportFilter.java:67) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.api.security.JSSwitchUserProcessingFilter.doFilterHttp(JSSwitchUserProcessingFilter.java:154) at
org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109) at
org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at 
org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101) at
org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.ji.license.LicenseCheckFilter.doFilter(LicenseCheckFilter.java:108) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.ji.license.JILicenseFilter.doFilter(JILicenseFilter.java:66) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
org.springframework.security.providers.anonymous.AnonymousProcessingFilter.doFilterHttp(AnonymousProcessingFilter.java:105) at
org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.api.metadata.user.service.impl.MetadataAuthenticationProcessingFilter.doFilter(MetadataAuthenticationProcessingFilter.java:139) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.war.util.RequestParameterAuthenticationFilter.doFilter(RequestParameterAuthenticationFilter.java:96) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.multipleTenancy.MTBasicProcessingFilter.doFilterHttp(MTBasicProcessingFilter.java:180) at
org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.war.UserPreferencesFilter.doFilter(UserPreferencesFilter.java:185) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at 
org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:278) at
org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.war.UserPreferencesFilter.doFilter(UserPreferencesFilter.java:185) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.api.logging.filter.BasicLoggingFilter.doFilter(BasicLoggingFilter.java:53) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.api.security.JSCsrfGuardFilter.doFilter(JSCsrfGuardFilter.java:83) at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.api.security.WebAppSecurityFilter.doFilter(WebAppSecurityFilter.java:76) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.war.MultipartRequestWrapperFilter.doFilter(MultipartRequestWrapperFilter.java:90) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
com.jaspersoft.jasperserver.api.security.encryption.EncryptionFilter.doFilter(EncryptionFilter.java:130) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235) at
org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53) at
org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411) at
org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:188) at
org.springframework.security.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:99) at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at
com.jaspersoft.jasperserver.war.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:67) at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at
com.jaspersoft.jasperserver.war.P3PFilter.doFilter(P3PFilter.java:43) at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581) at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936) at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) at
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) at
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312) at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) at
java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T09:45:13.123

使用本指南，它对我帮助很大

[http://community.jaspersoft.com/wiki/integrating-cas-jasperreports-server](http://community.jaspersoft.com/wiki/integrating-cas-jasperreports-server)

# iphone - iOS - 强制 Xcode 的调试器工作的方法

> ID：14174767
> 
> 赞同：-1
> 
> 时间：2013-01-05T18:09:04.933
> 
> 标签：iphone, ios, xcode, ipad, cocoa

Xcode 最烦人的错误之一是，当您最需要某些对象时，它们会从调试窗口中消失。有没有办法强制 Xcode 总是显示所有对象？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:12:56.307

当我需要查看对象的内容时，只需在调试控制台中键入“po objectName”即可。如果它是您要检查的原语，则使用“p variableName”。

示例：“po 自我”

我知道它不能回答你的问题，但这是一个很好的解决方法。

# c++ - 关于 __attribute__ 和 noinline (GCC) 的问题

> ID：14174768
> 
> 赞同：2
> 
> 时间：2013-01-05T18:09:06.663
> 
> 标签：c++, gcc

可以告诉某人这在 C++ 中是什么意思吗？（在函数前面）还有我如何找到有关此问题的信息。

```
__attribute__ ((noinline)) 
```

谢谢你 。问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:11:31.200

GCC 定义了许多不同的非标准[函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)，用于表示函数的特殊特性。这些通常用于优化或处理特定于平台的功能。

在这种情况下，该`noinline`属性意味着“在任何情况下都不要内联此函数”，而优化器可能会以其他方式内联它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T18:11:47.713

这个属性的名字所暗示的差不多。作为一种重度优化，编译器可能会选择内联较小的函数，以避免函数调用的开销。如果你不希望你的函数因为某种原因被内联，你可以使用这个[非标准属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)来阻止编译器做这个优化。

> 它在一个函数的前面

要了解如何按语法组织 GCC 属性，请参阅[本指南。](http://gcc.gnu.org/onlinedocs/gcc/Attribute-Syntax.html)

# c# - TPH 进近服务实施

> ID：14174771
> 
> 赞同：0
> 
> 时间：2013-01-05T18:09:48.757
> 
> 标签：c#, asp.net-mvc, entity-framework, inheritance

使用实体框架开发基于 TPH 的实体的最佳方法是什么，例如，如果我在广告网站中有公共字段和特定字段：

```
public class Ad
{
    // Primary properties
    public int Id { get; set; }
    public string Title { get; set; }
    public string TitleStandard { get; set; }
    public string Version { get; set; }
    public string VersionStandard { get; set; }
    public int Year { get; set; }
    public decimal Price { get; set; }

    // Navigation properties
    public Color Color { get; set; }
    public Member Member { get; set; }
    public Category Category { get; set; }
    public IList<Feature> Features { get; set; }
    public IList<Picture> Pictures { get; set; }
    public IList<Operation> Operations { get; set; }
}

public class AdCar : Ad
{
    public int Kms { get; set; }
    public Model Model { get; set; }
    public Fuel Fuel { get; set; }
}

public class AdBoat : Ad
{
    public int Hours { get; set; }
    public string Model { get; set; }
} 
```

我是否必须为每个子类构建特定的操作：

*   `CreateAdCar()`
*   `CreateAdBoat()`

或者我可以有类似的东西：

*   `CreateAdCommon()`和`CreateAdCar()`

如何拆分这两个类，这样我就不必重复 Car Ad 类和 Boat Ad 类的所有代码？

# java - 如何在JAVA中自动计算文本字段的输入数值

> ID：14174776
> 
> 赞同：4
> 
> 时间：2013-01-05T18:10:19.617
> 
> 标签：java, swing, jtextfield

我在使用 Netbeans 7.2 的 JAVA 中的文本字段自动计算有问题

我的问题是我是否会在文本字段中输入数值，即（入场费、月费、交通费等）进行自动添加，然后在文本字段中输入数值，即（会费）在单击提交之前从上述自动添加中自动减去用于在数据库中插入总值的按钮，因此在单击提交按钮之前，我将如何在文本字段（总计）中获取这些数值的结果。

**请检查快照：**

[![图片](../Images/8b2336066b5193b22ce27bee4d239a08.png)](https://i.stack.imgur.com/RQThT.jpg)

**我的源代码：**

```
try
         {

            String insrt = "Insert into fee (admission, monthly, transport, dues, total) values (?, ?, ?, ?, ?)";

            PreparedStatement pstmt = conn.prepareStatement(insrt);

            pstmt.setString(1, adm_fee.getText());
            pstmt.setString(2, mnth_fee.getText());
            pstmt.setString(3, trnsprt_fee.getText());
            pstmt.setString(4, dues_fee.getText());
            pstmt.setString(5, total_fee.getText());
            pstmt.executeUpdate();

            JOptionPane.showMessageDialog(null,"Record successfully inserted");
        }

        catch (Exception exp)
        {
            JOptionPane.showMessageDialog(null, exp);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T18:22:42.327

我建议使用 a`DocumentFilter`这可以让我们用 1 块石头杀死 2 只鸟。

1）我们需要过滤输入到`JTextField`s 的内容，以确保我们的计算不会出错

2) 我们需要即时更新总数，即随着更多数字的添加/删除。

这是我制作的一个示例`DocumentFilter`，您将看到每次在 (s) 中输入/添加新数字时都会更新*总计*`JTextField`字段（也不允许字母字符等仅数字）：

![在此处输入图像描述](../Images/201f164d8fe3ab0063753f437114b5cd.png)

```
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;
import javax.swing.text.DocumentFilter.FilterBypass;

public class DocumentFilterOnTheFlyCalculation {

    public DocumentFilterOnTheFlyCalculation() {
        createAndShowGui();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DocumentFilterOnTheFlyCalculation();
            }
        });
    }

    private void createAndShowGui() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new GridLayout(4, 2));

        JLabel label1 = new JLabel("Add:");
        final JTextField jtf1 = new JTextField();

        JLabel label2 = new JLabel("Add:");
        final JTextField jtf2 = new JTextField();

        JLabel label3 = new JLabel("Subtract:");
        final JTextField jtf3 = new JTextField();

        JLabel totalLabel = new JLabel("Total:");
        final JTextField totalField = new JTextField("0");
        totalField.setEditable(false);

        DocumentFilter df = new DocumentFilter() {
            @Override
            public void insertString(FilterBypass fb, int i, String string, AttributeSet as) throws BadLocationException {

                if (isDigit(string)) {
                    super.insertString(fb, i, string, as);
                    calcAndSetTotal();
                }
            }

            @Override
            public void remove(FilterBypass fb, int i, int i1) throws BadLocationException {
                super.remove(fb, i, i1);
                calcAndSetTotal();
            }

            @Override
            public void replace(FilterBypass fb, int i, int i1, String string, AttributeSet as) throws BadLocationException {
                if (isDigit(string)) {
                    super.replace(fb, i, i1, string, as);
                    calcAndSetTotal();

                }
            }

            private boolean isDigit(String string) {
                for (int n = 0; n < string.length(); n++) {
                    char c = string.charAt(n);//get a single character of the string
                    //System.out.println(c);
                    if (!Character.isDigit(c)) {//if its an alphabetic character or white space
                        return false;
                    }
                }
                return true;
            }

            void calcAndSetTotal() {
                int sum = 0;

                if (!jtf1.getText().isEmpty()) {
                    sum += Integer.parseInt(jtf1.getText());//we must add this
                }
                if (!jtf2.getText().isEmpty()) {
                    sum += Integer.parseInt(jtf2.getText());//we must add this
                }
                if (!jtf3.getText().isEmpty()) {
                    sum -= Integer.parseInt(jtf3.getText());//we must subtract this
                }

                totalField.setText(String.valueOf(sum));
            }
        };

        ((AbstractDocument) (jtf1.getDocument())).setDocumentFilter(df);
        ((AbstractDocument) (jtf2.getDocument())).setDocumentFilter(df);
        ((AbstractDocument) (jtf3.getDocument())).setDocumentFilter(df);

        frame.add(label1);
        frame.add(jtf1);
        frame.add(label2);
        frame.add(jtf2);
        frame.add(label3);
        frame.add(jtf3);
        frame.add(totalLabel);
        frame.add(totalField);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T19:43:11.507

如果您不需要为每次击键进行更新，则此[替代方法](https://stackoverflow.com/a/8703807/230513)会在发生更改时同时使用 a`FocusListener`和 a`PropertyChangeListener`来`update()`计算总数。

![图片](../Images/da198202c73172eee03f84bd2053d010.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-02T21:19:27.967

[在此处输入图像描述](https://i.stack.imgur.com/7KlNS.jpg)您可以使用 MouseEntered 事件在 jtextfield 中自动显示计算值，如代码所示

```
private void TxtnetpayMouseEntered(java.awt.event.MouseEvent evt) {                                       
  DecimalFormat numberFormat = new DecimalFormat("#.00");
  double totalgrosssalary = Double.parseDouble(Txttotalgrosspay.getText());
  double totaldeduct = Double.parseDouble(Txttotaldeduction.getText());     

    netpay = totalgrosssalary - totaldeduct; 
    String netpayy = String.valueOf(numberFormat.format(netpay));

    Txtnetpay.setText(netpayy);
} 
```

# c# - 如何检查输入字符串是否是有效的活动目录 userPrincipalName？

> ID：14174784
> 
> 赞同：0
> 
> 时间：2013-01-05T18:12:01.317
> 
> 标签：c#, active-directory

用户将输入他想要的登录名，我需要按给定名称创建活动目录用户。所以我需要为 AD userPrincipalName 规则验证它。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:46:24.480

您只需要查询 UPN（森林范围，因此请进行 globalcatalog 搜索）。如果 DirectorySearcher 返回一个对象，则 UPN 正在使用中。

您还需要检查计划的 samAccountName 是否未在目标域中使用，以及计划的用户**名**是否不在目标 OU 或容器中。如上所述，在这两种搜索中，如果 DirectorySearcher 返回结果，则不得继续，而是选择替代项。

查看[此处](http://blogs.msdn.com/b/openspecification/archive/2009/07/10/understanding-unique-attributes-in-active-directory.aspx)查找哪些属性必须是唯一的，但请记住，虽然表中未提及用户的**Name属性，但在示例 1 中已引用它。**

# ruby-on-rails - 更新查询被回滚

> ID：14174794
> 
> 赞同：0
> 
> 时间：2013-01-05T18:13:07.260
> 
> 标签：ruby-on-rails, activerecord

所以我有这样的事情：

```
class Account < ActiveRecord::Base
  validate :check_credit
  belongs_to :user

  private

  def check_credit
    check = HTTParty.get(CREDIT_URL, query: {account_id: id})

    if !check.eligible
      user.update_attributes(:xx => xx)
      errors.add(:base, "Sorry, you are not eligible")
    end
  end
end 
```

当我查看日志时，`user.update_attributes(:xx => xx)`似乎启动然后回滚，我认为这是因为我添加了一个错误，但我不确定为什么这是一个问题，因为该更新与验证无关并且即使存在也应该执行验证错误。

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:22:59.480

可能是用户对象无效？如果对象中有错误，则活动记录不会更新数据库：

从[文档](http://guides.rubyonrails.org/active_record_validations_callbacks.html)中：

> 如果任何验证失败，对象将被标记为无效，Active Record 将不会执行 INSERT 或 UPDATE 操作

# null - 如何让weka将空字符串视为0

> ID：14174797
> 
> 赞同：1
> 
> 时间：2013-01-05T18:13:37.460
> 
> 标签：null, boolean, data-mining, cluster-analysis, weka

我正在使用 weka 对二进制数据进行聚类。注意我是直接通过API或者源码使用weka。

例如，我的数据输入是一个巨大的 .csv 文件

```
attrib1, attrib2, atrib3
0,1,0
1,0,1
0,0,1 
```

但是为了减小 .csv 的大小，数据提供者（我不能直接访问数据集）忽略零，上面的代码片段写为

```
 attrib1, attrib2, atrib3
    ,1,
    1,,1
    ,,1 
```

所以我发现 weka 将两个逗号之间的值视为我不喜欢的“缺失值”（这是代码库中使用的术语）。

我一直在尝试直接通过源代码来解决它。

特别是[CSVLoader.getDataSet()](https://github.com/baron/weka/blob/master/weka/src/main/java/weka/core/converters/CSVLoader.java#L493)和[CSVLoader.getInstance()](https://github.com/baron/weka/blob/master/weka/src/main/java/weka/core/converters/CSVLoader.java#L637)以及[ConverterUtils.getToken()](https://github.com/baron/weka/blob/master/weka/src/main/java/weka/core/converters/CSVLoader.java#L637)似乎对这些东西负责。

我已经尝试了很多来更改代码并使 weka 将此空值（因为 weka 认为它们是）视为零，但我找不到解决方案。

有人可以提供更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:22:59.123

您是否考虑过使用该`arff`格式？

arff 格式的一个主要优点是它具有稀疏变体。

此外，我想您可以以某种方式添加自定义解析器。那么您是否考虑过只为您的个人 CSV 变体修改 CSV 解析器？做起来应该不会太难。

一些算法（例如 APRIORI）具有允许将缺失值视为 0 的参数。

# python - 允许用户“扩展” API 功能

> ID：14174799
> 
> 赞同：1
> 
> 时间：2013-01-05T18:13:52.670
> 
> 标签：python, function

我正在为我的游戏编写一个 modding API，我希望允许用户告诉游戏引擎在其中一个 API 函数之前或之后立即运行他们的 mod 函数，换句话说就是“扩展”这些函数。

在此之前，模组制作者必须重写函数以添加功能，这意味着挖掘游戏的源代码，我认为这对他们来说很糟糕。

现在我在想这样的事情：

```
def moddersFunction():
    pass

myAPI.extendFunction('functionName', 'before-or-after', moddersFunction, extraArgs=[]) 
```

现在有什么比较干净的方法来实现这个？换句话说，`myAPI.extendFunction`如果你写它的内部会是什么样子？

我正在考虑拥有一个字典，myAPI.extendFunction 将向其中添加函数，如果已设置（“注册”），我的 API 中的函数将检查并运行 mod 的函数。但这意味着在我希望允许扩展的修改 API 中的每个函数中添加检查字典的代码（即使它只是一个执行检查和函数调用自身的函数调用，它本身似乎也很重要） .

我想知道是否有一些巧妙的 Python 技巧可以允许这种“扩展”功能而不会“屠杀”（也许我夸大了）我的游戏 API 的现有源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:37:53.090

我会按照以下方式做一些事情：

```
class hookable(object):
  def __init__(self, fn):
    self.pre = []
    self.post = []
    self.fn = fn
  def add_pre(self, hook):
    self.pre.append(hook)
  def add_post(self, hook):
    self.post.append(hook)
  def __call__(self, *args, **kwargs):
    for hook in self.pre:
      hook(*args, **kwargs)
    ret = self.fn(*args, **kwargs)
    for hook in self.post:
      hook(*args, **kwargs)
    return ret 
```

现在可以像这样装饰任何“可扩展”功能：

```
@hookable
def square(x):
  return x**2 
```

现在您可以使用`square.add_pre()`and`square.add_post()`注册在每次调用之前和之后自动调用的函数`square()`：

```
print square(2)

def pre(x): print 'pre', x
def post(x): print 'post', x

square.add_pre(pre)
print square(2)
print square(3)

square.add_post(post)
print square(4)
print square(5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:17:39.840

我可能会做这样的事情。显然，您实际做的是特定于您的要求。

```
class Extend(object):
    def __init__(self, original_function):
        self.original_function = original_function

    def __call__(self, function):
        def _wrapped(*args, **kwargs):
            yield function(*args, **kwargs)
            yield self.original_function(*args, **kwargs)
        return _wrapped

import time

@Extend(time.asctime)
def funky_time():
    return "This is the time in the UK"

print list(funky_time()) 
```

# documentation - 是否有 ExtendScript 操作 ID 代码的参考？

> ID：14174800
> 
> 赞同：0
> 
> 时间：2013-01-05T18:13:53.663
> 
> 标签：documentation, listener, extendscript

[在ADOBE PHOTOSHOP CS6 JAVASCRIPT SCRIPTING REFERENCE](http://goo.gl/ukIhf)的末尾有一个名为“附录 A：事件 ID 代码”的部分。

有没有类似的东西，但不只是针对事件？例如，我正在使用 ScriptListener 来学习如何做一些选择，我得到了调用`charIDToTypeID( "T " )`的代码（T 后三个空格）。这不是一个事件，在我链接到的参考资料中找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:44:29.500

此资源可能会有所帮助：[http ://www.pcpix.com/Photoshop/enum.htm](http://www.pcpix.com/Photoshop/enum.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:42:05.987

这是一组工具[http://ps-scripts.sourceforge.net/xtools.html](http://ps-scripts.sourceforge.net/xtools.html)将帮助您处理 ActionManager、EventCodes...

[http://www.tonton-pixel.com/blog/photoshop-scripting/json-action-toolbox/“JSON](http://www.tonton-pixel.com/blog/photoshop-scripting/json-action-toolbox/) ID Lister”上的脚本将帮助您打印出您的ps版本的所有ID。仔细看看网页，因为有很多有用的东西。

[http://www.tonton-pixel.com/blog/](http://www.tonton-pixel.com/blog/)上实际上有两个“ID 列表” ：

• [http://www.tonton-pixel.com/blog/photoshop-scripting/json-action-toolbox/](http://www.tonton-pixel.com/blog/photoshop-scripting/json-action-toolbox/) “JSON ID Lister”是一个自动化插件，仅适用于 Mac OS X。

• [http://www.tonton-pixel.com/blog/photoshop-scripting/json-sample-scripts/list-internal-ids/](http://www.tonton-pixel.com/blog/photoshop-scripting/json-sample-scripts/list-internal-ids/) “列出内部 ID”是一个用 JavaScript 编写的独立于平台的脚本，给出类似的结果，但比插件慢很多。希望您只运行一次并稍后使用其生成的文本文件...

# sql-server-2008 - 存储过程引发错误，但作为查询运行不会

> ID：14174807
> 
> 赞同：1
> 
> 时间：2013-01-05T18:14:43.060
> 
> 标签：sql-server-2008, stored-procedures, temp-tables

我正在聚合数据以进行报告，并且有一个我试图插入临时表的存储过程。如果我只是运行`EXEC <stored_proc_name>`它就可以了。但是，当我尝试运行以下代码时：

```
Create table #TempResults2
    ( 
       slscode varchar(3),
       intakes_this_month int,
       intakes_this_year int,
       intakes_last_month int,
       intakes_two_months int,
       intakes_three_months int,
       intakes_four_months int,
       intakes_five_months int,
       intakes_six_months int,
       ships_this_month int,
       ships_last_month int,
       ships_two_months int,
       ships_three_months int,
       ships_four_months int,
       ships_five_months int,
       ships_six_months int,
       ships_this_year int
       PRIMARY KEY CLUSTERED (SLSCODE)
       )
       INSERT INTO #TempResults2 
       EXEC crm.dbo.sp_sales_info

       SELECT * FROM #TempResults2

       DROP TABLE #TempResults2 
```

我收到以下错误：

```
Msg 8114, Level 16, State 1, Procedure sp_sales_info, Line 36
Error converting data type varchar to int.
Warning: Null value is eliminated by an aggregate or other SET operation. 
```

这是我的存储过程，我知道问题出在第一部分的某个地方（我可以在其中获取所有运输信息），因为我可以将其注释掉，然后选择摄入的东西，临时表的东西就可以工作了：

**UPDATE**这里是完整的存储过程

```
ALTER PROCEDURE [dbo].[sp_sales_info]
    -- Add the parameters for the stored procedure here

AS
BEGIN

    DECLARE 
    @today date, @this_month date, @last_month_start date, @last_month_end date,
    @two_months_start date, @two_months_end date, @three_months_start date, @three_months_end date,
    @four_months_start date, @four_months_end date, @five_months_start date, @five_months_end date,
    @six_months_start date, @six_months_end date, @this_year_start date, @startdate date, @enddate date;

    SET @today = GETDATE();
    SET @this_month = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0);
    SET @last_month_start = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -1, 0);
    SET @last_month_end = DATEADD(MILLISECOND, -3, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -1 + 1, 0));
    SET @two_months_start = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -2, 0);
    SET @two_months_end = DATEADD(MILLISECOND, -3, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -2 + 1, 0));
    SET @three_months_start = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -3, 0);
    SET @three_months_end = DATEADD(MILLISECOND, -3, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -3 + 1, 0));
    SET @four_months_start = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -4, 0);
    SET @four_months_end = DATEADD(MILLISECOND, -3, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -4 + 1, 0));
    SET @five_months_start = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -5, 0);
    SET @five_months_end = DATEADD(MILLISECOND, -3, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -5 + 1, 0));
    SET @six_months_start = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -6, 0);
    SET @six_months_end = DATEADD(MILLISECOND, -3, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + -6 + 1, 0));
    SET @this_year_start = CAST(DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0) as DATE);
    SET @startdate = DATEADD(YEAR, -1, GETDATE());
    SET @enddate = @today;

    SET NOCOUNT ON;

    -- Insert statements for procedure here
SELECT 
    a.*,
    d.intakes_this_month, 
    d.intakes_last_month, 
    d.intakes_two_months, 
    d.intakes_three_months, 
    d.intakes_four_months, 
    d.intakes_five_months, 
    d.intakes_six_months, 
    d.intakes_this_year
FROM
(
SELECT 
            sum(CASE WHEN a.SHIPDATE >= @this_month THEN 1 ELSE 0 END) AS ships_this_month,
            sum(CASE WHEN a.SHIPDATE BETWEEN @last_month_start AND @last_month_end THEN 1 ELSE 0 END) AS ships_last_month,
            sum(CASE WHEN a.SHIPDATE BETWEEN @two_months_start AND @two_months_end THEN 1 ELSE 0 END) AS ships_two_months,
            sum(CASE WHEN a.SHIPDATE BETWEEN @three_months_start AND @three_months_end THEN 1 ELSE 0 END) AS ships_three_months,
            sum(CASE WHEN a.SHIPDATE BETWEEN @four_months_start AND @four_months_end THEN 1 ELSE 0 END) AS ships_four_months,
            sum(CASE WHEN a.SHIPDATE BETWEEN @five_months_start AND @five_months_end THEN 1 ELSE 0 END) AS ships_five_months,
            sum(CASE WHEN a.SHIPDATE BETWEEN @six_months_start AND @six_months_end THEN 1 ELSE 0 END) AS ships_six_months,
            sum(CASE WHEN a.SHIPDATE >= @this_year_start THEN 1 ELSE 0 END) AS ships_this_year,
            b.slcode
FROM 
(
    SELECT
        A.ACCOUNT AS CODE,
        MIN(CAST(A.BILLDATETIME AS DATE)) AS SHIPDATE

    FROM PACWARE.ADS.ARODME A
    LEFT OUTER JOIN PACWARE.ADS.PTDME B ON A.PTCODE=B.CODE_
    LEFT OUTER JOIN event.dbo.newdate() D ON A.ACCOUNT=D.ACCOUNT
    LEFT OUTER JOIN event.dbo.newdate_extras() D2 ON A.ACCOUNT=D2.ACCOUNT
    WHERE A.BILLDATETIME>=@startdate
    AND A.BILLDATETIME<=@enddate
    AND (
        (D.NEWDATE>=@startdate AND D.NEWDATE<=@enddate) OR
        (D2.NEWDATE IS NOT NULL AND D2.NEWDATE>=@startdate AND D2.NEWDATE<=@enddate) OR
        B.MEDICAREID='L7900' 
        )
    AND B.MEDICAREID IN ('A4253','L7900','A9276')
    AND A.CATEGORY<>'ID'
    Group by 
    A.ACCOUNT,
    B.MEDICAREID,
    A.CATEGORY
) a
JOIN event.dbo.patient_dg() b on a.CODE = b.code
GROUP BY b.slcode
) a 
JOIN (
    SELECT 
            sum(CASE WHEN a.regdate >= @this_month THEN 1 ELSE 0 END) AS intakes_this_month,
            sum(CASE WHEN a.regdate BETWEEN @last_month_start AND @last_month_end THEN 1 ELSE 0 END) AS intakes_last_month,
            sum(CASE WHEN a.regdate BETWEEN @two_months_start AND @two_months_end THEN 1 ELSE 0 END) AS intakes_two_months,
            sum(CASE WHEN a.regdate BETWEEN @three_months_start AND @three_months_end THEN 1 ELSE 0 END) AS intakes_three_months,
            sum(CASE WHEN a.regdate BETWEEN @four_months_start AND @four_months_end THEN 1 ELSE 0 END) AS intakes_four_months,
            sum(CASE WHEN a.regdate BETWEEN @five_months_start AND @five_months_end THEN 1 ELSE 0 END) AS intakes_five_months,
            sum(CASE WHEN a.regdate BETWEEN @six_months_start AND @six_months_end THEN 1 ELSE 0 END) AS intakes_six_months,
            sum(CASE WHEN a.regdate >= @this_year_start THEN 1 ELSE 0 END) AS intakes_this_year,
            a.slscode
    FROM 
    event.dbo.patient_dg_lite() a
    GROUP BY a.slscode
) d on a.slcode = d.slscode
JOIN event.dbo.employee_slscode b on a.slcode = b.slscode
JOIN event.dbo.employee c on b.employee_id = c.id
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:02:10.607

您的列不在相同的序号位置`slscode`，首先在`CREATE TABLE`.

```
Create table #TempResults2
    ( 
       slscode varchar(3),
      /*Rest of table*/
      ships_this_year int
     ) 
```

但是您`SELECT`在存储过程中将其作为最后一列

```
SELECT 
       /* Loads of CASE statements*/
        b.slcode
FROM /* ... */ 
```

所以你试图将该`slscode` `varchar`列插入整数`ships_this_year`列

# git - 如何撤消已经被拉/合并的 git rebase？

> ID：14174809
> 
> 赞同：2
> 
> 时间：2013-01-05T18:14:58.440
> 
> 标签：git, git-merge, git-rebase

我处于一个奇怪的困境 - 我们让开发人员多次跨分支执行“git pull --rebase”，我正在尝试修复损坏。我们的图表最初看起来像这样：

```
[master]
A--B (origin/master)
___\________________________
[branch]
     \
      C--D--E (origin/branch) 
```

在错误的合并之后，我们的图表现在看起来像这样：

```
[master]
A--B---------------H--I (origin/master)
    \             /
     C--D--E--F--G
____________\_______________ 
[branch]     \
              J--K--L (origin/branch) 
```

提交 F 和 G 真正属于 master，而 C、D 和 E 属于分支。

还原图表的最佳选择是什么？提交我已经被拉到其他分支和本地存储库。我是恢复单个提交的唯一选择吗？上图是简化的——有超过 40 个提交被错误地合并。

我已经尝试了几件事，包括将 F 和 G 重新定位到 B 上，但这创建了 H' 和 I' 并且我不确定如何处理已经被拉/合并的旧 H 和 I。

**更新**

如果我只是想 git revert master 上的特定提交并将它们选择打包到分支上，我如何将提交“前置”到分支上？在这种情况下，我如何挑选 C 和 D 成为 J 的父母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:56:34.153

+1 对 CharlesB 的建议。将 F 和 G 重新设置为 B 似乎可以解决这个问题。您可能还需要将 H 和 I 重新设置到最后。您可能需要按 -f（强制）使其进入原点，但一旦原点看起来应该如此，当用户拉取时，他们的存储库也应该自行纠正。

在 Git 中，原始节点将始终存在（直到 git gc 发现它们被遗弃了一段时间），但在新的 F、G、H 和 I 节点链的末端带有主标签，它将建立正确的血统。

# c# - ASP LinkBut ton onclick 显示 div

> ID：14174812
> 
> 赞同：0
> 
> 时间：2013-01-05T18:15:11.967
> 
> 标签：c#, jquery, asp.net, html, linkbutton

我是 Jquery 的新手，我试图在 LinkBut​​ton ClickEvent 上显示一个 div（如果我使用按钮而不是链接按钮，它将起作用）

这是我的 Jquery 代码

```
<script type="text/javascript">
            $(document).ready(function () {
                $('#<%=lbLog.ClientID%>').click(function () {

                    $("#login").show(2000);
                    alert("hello");
                });
            });
        </script> 
```

hello 消息不是由 div 显示的

这是我的html代码：

```
<asp:LinkButton ID="lbLog" runat="server" onclick="lbLog_Click">Login</asp:LinkButton>
        <asp:Label ID="lblMessage" runat="server" Text=""></asp:Label>
        <div id="login" style="display:none">            
            Username: <asp:TextBox ID="txtUsername" runat="server"></asp:TextBox>
            <asp:RequiredFieldValidator ID="rfvUsername" runat="server" ControlToValidate="txtUsername" Display="Dynamic" ErrorMessage="*" ValidationGroup="LogGroup">*</asp:RequiredFieldValidator>
            Password: <asp:TextBox ID="txtPassword" runat="server" TextMode="Password"></asp:TextBox> <asp:RequiredFieldValidator ID="rfvPassword" runat="server" ControlToValidate="txtPassword" Display="Dynamic" ErrorMessage="*" ValidationGroup="LogGroup">*</asp:RequiredFieldValidator>
            <asp:Button ID="btnLog" runat="server" Text="Login" onclick="btnLog_Click" ValidationGroup="LogGroup" />
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:25:33.760

试试这个

```
$("#login").css('display','block'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:28:12.360

你不需要`onclick="lbLog_Click"`。ID 的 jquery 选择器看起来不正确`'#<%=lbLog.ClientID%>'`。查看源代码并确保链接按钮上的 id 与您在 javascript 代码中传递给选择器的内容相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T19:07:48.510

`style="display:none"`无论您如何更改 jQuery 函数，ASP.NET 链接按钮都会导致回发，这将刷新页面并隐藏 div 。试试这个：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#fakeLink").click(function () {
            $("#login").show(2000);
        });
    });
</script>
<style type="text/css">
    .fakeLink
    {
        color: blue;
        text-decoration: underline;
        cursor: pointer;
    }
</style>

   <div>
    <span class="fakeLink" id="fakeLink">Login</span>
    <asp:Label ID="lblMessage" runat="server" Text=""></asp:Label>
    <div id="login" style="display:none;">
        Username:
        <asp:TextBox ID="txtUsername" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="rfvUsername" runat="server" ControlToValidate="txtUsername"
            Display="Dynamic" ErrorMessage="*" ValidationGroup="LogGroup">*</asp:RequiredFieldValidator>
        Password:
        <asp:TextBox ID="txtPassword" runat="server" TextMode="Password"></asp:TextBox>
        <asp:RequiredFieldValidator ID="rfvPassword" runat="server" ControlToValidate="txtPassword"
            Display="Dynamic" ErrorMessage="*" ValidationGroup="LogGroup">*</asp:RequiredFieldValidator>
        <asp:Button ID="btnLog" runat="server" Text="Login" OnClick="btnLog_Click" ValidationGroup="LogGroup" />
    </div>
</div> 
```

# android - 在滑动抽屉中膨胀 xml

> ID：14174815
> 
> 赞同：0
> 
> 时间：2013-01-05T18:15:57.383
> 
> 标签：android, android-layout, android-intent

嗨，我创建了一个滑动抽屉，并创建了一个可滚动的 xml 文件，当用户点击滑动抽屉中的按钮时，我想将其膨胀。但是，当点击按钮时，除了空白屏幕之外什么都没有显示。谁能告诉我我做错了什么？这是我的代码：xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFFFFF" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text="@string/text2" />

    <ImageView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="10sp"
        android:adjustViewBounds="true"
        android:src="@drawable/image"/>

    <TextView
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="5sp"
        android:layout_marginTop="10sp"
        android:text="@string/text1" />

    <ImageView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="10sp"
        android:adjustViewBounds="true"
        android:src="@drawable/image1"/>

</LinearLayout> 
```

和java：

```
next3.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        getLayoutInflater().inflate(R.layout.activity, null);
        slider.animateClose();

    }
}); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:51:02.180

线

```
getLayoutInflater().inflate(R.layout.activity, null); 
```

创建（膨胀）布局文件的内容，但您没有将返回的 View 放在任何地方。

你想把 ScrollView 放在滑动抽屉里吗？如果是这样，请更改为：

```
getLayoutInflater().inflate(R.layout.activity, slider); 
```

# c# - 从数据网格中获取选定的列值并打开特定的表单

> ID：14174818
> 
> 赞同：0
> 
> 时间：2013-01-05T18:16:21.873
> 
> 标签：c#, winforms

感谢之前的回复。我正在研究`Windows Form`和研究 Datagrid。我想要编辑一些东西，所以我在上下文菜单条的帮助下决定了它。我想知道，如果所选列为 1，则如何获取所选列的值，然后打开 form1，如果选择 column2 并单击上下文菜单，则打开 form2 如何获取列号并在 if 条件中提供

我正在做这个

```
 label1.Text = dataGridView1.SelectedCells[0].Value.ToString(); 
```

但此代码不会转移它给出选定的单元格值。如何确定选择了哪一列并将其置于 if 条件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:32:54.023

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 0)
    {
       // open form1
    }
    else if (....)
    {
       // open form 2
    }
} 
```

# android - 下载 XML-File android 错误

> ID：14174821
> 
> 赞同：0
> 
> 时间：2013-01-05T18:16:41.530
> 
> 标签：android

我正在开发一个 android 应用程序，我需要从 url 下载一些具有授权的简单 XML 文件。我已经在我的本地计算机上用 java 工作了 [最后的代码]。当我尝试在我的 android 应用程序中使用此功能时，LogCat 会引发数千个错误。我包括了互联网许可，我会将错误附加到我的帖子中。所以，这是我的下载功能。我硬编码了base64字符串，因为它不会随着时间而改变......：

```
 public String getXmlFromUri(String url)
{
    String strFileContents = new String("");
    try{
        String base64 = "Basic " + "hardcodedBase64String";
        URL pURL = new URL(url);
        URLConnection conn = pURL.openConnection();
        conn.setRequestProperty("Authorization", base64);
        BufferedReader in=new BufferedReader(new InputStreamReader(conn.getInputStream()));

        String data = new String("");
        while((data = in.readLine()) != null)
        {
            strFileContents += data;
        }
        in.close();
    }catch(IOException e)       {}
        if(strFileContents == "") strFileContents = "An error occured or the downloaded file was empty!";
    return strFileContents;
} 
```

我的 logcat 很长，所以我把它上传到了 pastebin：[http://pastebin.com/DhFra9SG](http://pastebin.com/DhFra9SG)

该功能未完成是的，我目前仅在需要授权的网站上使用它。

总结：它适用于windows，它不适用于android！它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:20:39.237

这里是：
`FATAL EXCEPTION: android.os.NetworkOnMainThreadException`

它崩溃是因为您试图在 UI（主）线程上执行网络操作。
网络操作被认为是长时间运行的操作，因此它们可能会阻塞 UI。因此，从 API 级别 11 开始，如果您尝试在主线程上执行网络操作，则会引发此异常。

长时间运行的操作应该在单独的线程中运行，例如您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)从服务器获取 XML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T15:41:19.357

根据您的最后一段代码和 logcat，问题来自对 Console 方法的调用。

> 引起：android.view.ViewRootImpl$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸它的视图。

实际上，您不能从 doInBackground 方法更改/添加一些 View 对象。如果要更改 UI，则必须来自 onPreExecute()、onPostExecute(Result) 和 onProgressUpdate(Progress...) 方法。

检查**[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)**参考，更具体地说是**The 4 steps section**。

BR

# iphone - iOS启动屏幕图像放大？

> ID：14174823
> 
> 赞同：2
> 
> 时间：2013-01-05T18:16:56.117
> 
> 标签：iphone, ios, xcode, ipad

我正在准备将我的应用提交到应用商店，并且一直在阅读启动屏幕上的指南。似乎苹果更喜欢让它看起来像你的应用程序已经加载，即使它不是。

我决定使用我的应用程序的背景图像作为启动屏幕。这样，应用程序的骨架就在那里，按钮和文本就会加载进来。

我使用了图像的副本，但将其重命名为 Default-568h@2x.png。

它可以工作，但是当它启动时，它具有默认缩放效果，但它似乎放大得比实际图像大小更大，因此不能很好地过渡到应用程序中。

任何想法为什么会发生这种情况以及我能做什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:54:17.130

在 iPhone 上，default.png 图像应该包含状态栏（如果它在您的应用程序中可见）。

在 iPad 上，状态栏应被省略。

因此，默认图像大小应为 ( [source](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12) )：

![在此处输入图像描述](../Images/44256716c845984895c7a36847ab730e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:51:54.887

这可能是默认图像中包含或排除状态栏的问题。根据苹果的说法，所有 iPhone Default.pngs 都应该包含状态栏，而 iPad 应该不包含状态栏。（当然，除非您的应用程序隐藏了状态栏）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T23:11:55.373

好的，我找到了解决这个问题的方法。

我发现顶部的状态栏对于视网膜是 40 像素，对于非视网膜是 20。

然后，我创建了一个完全 iphone 5 分辨率大小的黑色背景。然后我得到了我的启动图像（实际上是我的应用程序的背景），但将其垂直缩小了 40 像素。

然后我把它放在我创建的黑色背景上并排列在底部。

然后我合并图层并将其用作启动图像。它工作得很好，启动图像加载，然后我的应用程序在它完全对齐的顶部打开。

# spam-prevention - 如何检测文本是否为给定语言？

> ID：14174826
> 
> 赞同：0
> 
> 时间：2013-01-05T18:17:16.227
> 
> 标签：spam-prevention, language-detection

我有一个问答网站（非常近似），用户可以在其中输入问题以由我们的员工回答。我非常担心用户发布非问题，这是一种烦恼。到目前为止，我认为最好的方法是检测文本是否为意大利语（我们用户的语言）的系统，如果是，则根据常见的复制粘贴列表检查它是否不是复制粘贴。

所以，长话短说：用户会输入一些文本，我必须确保这是一个正确的意大利语问题，而不是随机字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:27:07.157

不知道你会说什么语言

[http://www.easywayserver.com/blog/java-string-contains-example/](http://www.easywayserver.com/blog/java-string-contains-example/)

[如何检查字符串是否包含 PHP 中的特定单词？](https://stackoverflow.com/questions/4366730/php-how-to-check-if-a-string-contain-specific-words/)

检查输入字符串（问题）是否包含任何禁用词将是一种方法。

**伪代码**

```
ListOfForbiddenWords;
if Language = Italian
    if Input does not contain any of ListOfForbiddenwords
         //It's fine
    else
         //Don't spam
else
    //You're not Italian 
```

不太确定检查字符串是否以特定语言编写的最佳方法是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T02:00:06.430

如果您想要商业选项，可以使用 Rosoka 的语言检测。您可以在[Rosoka Cloud](https://aws.amazon.com/marketplace/pp/B00E6FGJZ0)上以大约 1 美元/小时的价格试用所有功能。语言 ID 作为独立库提供。因此，您可以向它提供您关心的示例输入，以查看它是否会返回您想要的内容。

像“jgujqkwfjpihoujlkfa”这样的随机文本将被标记为罗马化或基于底层代码块的标签，如果它是非 ascii 的话。即不是语言的输入将不会被标记为语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T10:56:10.077

有许多免费的语言检测库。一个流行的例子是来自 LibreOffice的[libexttextcat 。](http://www.freedesktop.org/wiki/Software/libexttextcat/)如果您不想要 C 库，则有许多克隆、端口和变体；请参阅例如[http://odur.let.rug.nl/vannoord/TextCat/competitors.html](http://odur.let.rug.nl/vannoord/TextCat/competitors.html)以获取（不完整的，略微过时的）指针列表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-05T18:28:39.667

[前段时间在这里](https://stackoverflow.com/questions/7025915/what-is-the-best-language-detect-library-or-web-api-available-even-paid)问了一个类似的问题，答案列出了一些语言检测 API 解决方案。其中一个答案指向[detectlanguage.com](http://detectlanguage.com/)，该网站提供有限的免费语言检测服务。

# iphone - 使 iPhone 5 应用程序的视图控制器顶部和底部的黑边永久化

> ID：14174828
> 
> 赞同：1
> 
> 时间：2013-01-05T18:17:23.727
> 
> 标签：iphone, xcode, storyboard

我不想删除对 iPhone 5 的支持，我只想让它与尚未针对 iPhone 5 屏幕更新的应用程序完全一样（所有视图控制器的顶部和底部都有黑色条纹）。

编辑：下面是一张显示我的意思的图片。此外，我的故事板错误日志（侧栏中的黄色感叹号）显示确实没有 iPhone 5 图片。然而，它仍然像有一个一样加载。

编辑 2：我创建了另一个新项目，并尝试先进入并删除实际文件（而不是单击目标时的文件），这很有效。谢谢！ ![在此处输入图像描述](../Images/9d639a092fde6516f6af4d94d689d1bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:25:34.967

如果您谈论的是应用程序无法缩放时创建的信箱，请从项目中删除 Default-568h@2x.png 图像。默认情况下，启动图像下的项目摘要中有一个黑色填充图像。删除那个，它应该仍然是信箱。

# java - 如何在android中制作一个简单的启动器？

> ID：14174834
> 
> 赞同：1
> 
> 时间：2013-01-05T18:18:28.013
> 
> 标签：java, android, launcher

> **可能重复：**
> [如何制作启动器](https://stackoverflow.com/questions/4841686/how-to-make-a-launcher)

我想制作一个类似于 go 启动器的启动器，它可以更改所有图标和东西......目前我想知道我应该从哪里开始？我需要制作一个非常简单的启动器，因此任何示例代码都会受到赞赏。谢谢！我应该知道任何有用的代码或任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:19:25.903

SDK 示例中包含一个 Launcher 示例应用程序，其中包含一些简单的启动器代码，您可以将其作为应用程序的基础。我怀疑有没有比那个更简单的代码。

# java - 如何在java中序列化和反序列化kdtree

> ID：14174837
> 
> 赞同：0
> 
> 时间：2013-01-05T18:18:46.967
> 
> 标签：java, serialization, deserialization, kdtree

我有一个 kdtree，其节点包含以下字段： public static class Node implements Serializable {

```
 public int discriminator;
    public double value; 

    public Node leftChild;
    public Node rightChild;
    public DataPoint object;
    } 
```

其中数据点定义：

公共静态类 DataPoint 实现 Serializable { public Comparable X; 公共可比 Y；公共可比 Z；

```
 public double latitude;
     public double longitude;

     public ArrayList<String> text = new ArrayList<String>(); 
     } 
```

我想序列化树，存储在文件中并在回答范围查询时反序列化。我对这个概念 od 序列化的理解并不好。从我收集的任何内容中，我编写了以下函数，但这些函数不起作用。有人可以帮忙吗？

```
 public static void serialize(final OutputStream out, kdtrees.Node node) throws IOException
 {
        if( node == null ) 
        {
            //out.write( "()".getBytes() );
            //write to an output leaf file
            out.write("#".getBytes());

        } 
        else 
        {
            //out.write( "(".getBytes() );
            ((ObjectOutputStream) out).writeObject(node);
            serialize( out, node.leftChild );
            serialize( out, node.rightChild );
            //out.write( ")".getBytes( ) );
        }
    }

 public static kdtrees.Node deserialize(final ObjectInputStream reader) throws IOException, ClassNotFoundException 
 {

                  StringTokenizer st = new StringTokenizer(reader.readObject().toString()); 
                  String curToken = st.nextToken().toString();
                  while(st.hasMoreTokens())
                  { 
                      if(curToken.equals("#".trim()))
                          return null;

                      kdtrees.Node e = (kdtrees.Node)reader.readObject();

                       e.leftChild = deserialize(reader);
                       e.rightChild = deserialize(reader);

                    return e;

                  }
               return null;   

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:24:00.683

将任意值`OutputStream`转换为 an`ObjectOutputStream`只会失败。相反，用于围绕, 和s`new ObjectOutputStream(outputStream)`创建一个包装器。`OutputStream``InputStream`

# java - 在 Java 中翻转一组块

> ID：14174838
> 
> 赞同：0
> 
> 时间：2013-01-05T18:18:56.287
> 
> 标签：java, collections, set, block, flip

在我正在创建的游戏中，我使用了积木。为了简化我的生活，我创建了一个接受一组块的类，并将它们添加到我的块集中。

积木组（世界级）：

```
Set<Block> blocks = new HashSet<Block>(); 
```

块集合类：

```
public class BlockCollection
{
    private World world;
    Set<Block> blocks = new HashSet<Block>();

    public BlockCollection(World world, Vector2 position, Block[] blocks)
    {
        this.world = world;

        for (Block block : blocks)
            this.blocks.add(new Block(new Vector2(block.position.x + position.x, block.position.y + position.y)));
    }

    public void flip()
    {
        //Flip the set
    }

    public void add()
    {
        world.blocks.addAll(blocks);
    }
} 
```

（我使用的库是 libgdx，Vector2 类基本上是一个带有 X 浮点和 Y 浮点的向量）

我添加了一个如下所示的块数组：

```
Block[] spike = {
        new Block(new Vector2(0, 0)),
        new Block(new Vector2(1, 0)),
        new Block(new Vector2(2, 0)),
        new Block(new Vector2(3, 0)),
        new Block(new Vector2(1, 1)),
        new Block(new Vector2(2, 1)),
        new Block(new Vector2(3, 1)),
        new Block(new Vector2(1, 2)),
        new Block(new Vector2(2, 2)),
        new Block(new Vector2(1, 3)),
        new Block(new Vector2(2, 3)),
        new Block(new Vector2(1, 4)),
}; 
```

它可以工作，但现在我正在尝试添加功能来翻转 BlockCollection 类的 flip() 方法中的块集。这将帮助我不需要对我用块制作的每个对象的每个变体进行硬编码。

任何人都可以分享如何做到这一点的任何见解，也许是一个方程式？任何帮助都非常受欢迎。

**编辑**：通过翻转，我的意思是沿 x 轴翻转形状，类似于翻转图像。例子：

原始与翻转
00100 | 11111
01110 | 01110
11111 | 00100

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:38:11.197

如果通过“翻转集合”，您的意思是反转其中所有元素的顺序，那么您应该做的第一件事是使用`LinkedHashSet`for`blocks`而不是 a `HashSet`: a`LinkedHashSet`将保留插入顺序。A`HashSet`不作这样的保证。

该`.flip()`方法可以这样写：

```
public void flip()
{
    List<Block> l = new ArrayList<Block>(blocks);
    Collections.reverse(l);
    blocks.clear();
    blocks.addAll(l);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:53:28.173

您可能想要更改数据结构并将坐标用作`Block`s 的键。如果您在构建时知道图像的大小，则可以使用二维数组来存储所有块，其中 Y 坐标作为第一个索引，X 坐标作为第二个索引：

```
this.blocks[y][x] = block; 
```

然后，可以通过简单地[颠倒](https://stackoverflow.com/a/2137766/1321716)*行*的顺序来完成沿 X 轴的翻转：

```
public void flip()
{
    List<Block[]> blocksAsList = Arrays.asList(blocks);
    Collections.reverse(blocksAsList);
    blocks = blocksAsList.toArray();
} 
```

你没有详细说明什么`Block`和`BlockCollection`实际代表什么。在您的示例中，`Block`似乎有自己的`Vector2`. 它是否拥有并控制该职位？a`Block`可以不为任何人、一个或多个`BlockCollection`s 所拥有吗？如果一个`Block`控制了它的位置，一个`BlockCollection`包含一个`Block`改变了它的位置的会发生什么？翻转时可以和/或应该`BlockCollection`更新 a的位置吗？真的*需要*自己的位置吗`Block`？...`Block`

# gnuplot - Gnuplot：来自函数的条形图

> ID：14174846
> 
> 赞同：2
> 
> 时间：2013-01-05T18:19:55.847
> 
> 标签：gnuplot, bar-chart

与所有 Gnuplot 条形图示例中的近 99.9% 不同，我没有数据文件，而是想要将其可视化为条形图的函数。

让我们以简单的函数 f(x) = x 为例

我想要一个条形字符，它为 0 到 20 之间的每个 x 值（步长 1）创建一个条形。

因此，我使用了以下代码，但它不会创建 20 个柱 - 它会创建更多（大约 100 个？）。

```
set xtic 1
set xrange [0:20]
set boxwidth 1
set style fill solid
f(x)=x
plot f(x) with boxes 
```

如何使此条形图正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T18:59:44.463

你想要`set samples`命令。尝试：

```
set xtic 1
set xrange [0:20]
set boxwidth 1
set style fill solid
f(x)=x
set samples 21
plot f(x) with boxes 
```

# ruby-on-rails-3 - 在 Rails 应用程序中处理多种货币的最佳方式

> ID：14174848
> 
> 赞同：0
> 
> 时间：2013-01-05T18:20:17.070
> 
> 标签：ruby-on-rails-3, currency

我有一个用户可以创建帐户然后创建发票的地方。越来越多的国际用户正在使用该应用程序，这意味着我需要允许他们从下拉列表中设置一种货币，并在他们的发票上使用该货币。我`number_to_currency`目前在任何地方都在使用，但是如果说用户的货币代码正在`ES`使用这种关系，我该如何使用`current_user.currencies.name`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:01:13.370

好的，我想通了

1.  安装这个 gem [https://github.com/svenfuchs/rails-i18n](https://github.com/svenfuchs/rails-i18n)
2.  从这里始终使用此格式，现在`number_to_currency(100,:locale=>'en-GB')`您可以从此处的格式列表中进行选择：[https ://github.com/svenfuchs/rails-i18n/tree/master/rails/locale](https://github.com/svenfuchs/rails-i18n/tree/master/rails/locale)

# php - php中的字符串比较

> ID：14174849
> 
> 赞同：0
> 
> 时间：2013-01-05T18:20:18.970
> 
> 标签：php, mysql

我有这个功能：

```
function GetListByKeywords($keywords) 
{
  $HOST_DB = "localhost";
  $NAME_DB = "jobs";
  $USER_DB = "root";
  $PWD_DB = "";
  $connect = mysql_connect($HOST_DB, $USER_DB, $PWD_DB);
  $db = mysql_select_db($NAME_DB);
  $table = split('[;]', $keywords);
  $Log_query = mysql_query("SELECT id FROM  employment") or die(mysql_error());
  $p = 0;
  while ($Res_user = mysql_fetch_array($Log_query)) {
    $id[$p] = $Res_user;
    $p++;
  }
  $Log_query = mysql_query("SELECT description FROM  employment") or die(mysql_error());
  $p = 0;
  while ($Res_user = mysql_fetch_array($Log_query)) {
    $responsabilite[$p] = $Res_user;
    $p++;
  }
  $p = 0;
  for ($i = 0; $i < sizeof($table); $i++) {
    for ($j = 0; $j < sizeof($responsabilite); $j++) {
      if (strcmp($table[$i], $responsabilite[$j]) > 0) {
        $marques[$p] = $id[$j];
        $p++;
      }
    }

  }
  return $marques;

} 
```

我想将字符串`$keywords`与`$responsabilite`. 所以我将它转换为表格`$table`，并按表格中的每个元素比较每个元素。所以我需要一个可以替换的函数，`strcmp`因为我需要知道`$keywords`字符串中是否存在`$responsabilite[$i]`的元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:28:58.653

你为什么不检查一个数组中的元素是否存在于另一个数组中与[array_相交](http://php.net/manual/en/function.array-intersect.php)

# web-services - SOAP delphi 中的 HTTP 授权

> ID：14174853
> 
> 赞同：0
> 
> 时间：2013-01-05T18:20:52.797
> 
> 标签：web-services, delphi, soap, authorization, delphi-7

我正在尝试向 Web 服务发送请求，这是 WSDL： [http ://www.smsmelli.com/class/sms/webservice/server.php?wsdl](http://www.smsmelli.com/class/sms/webservice/server.php?wsdl)

经过长时间的研究，我理解无类型数组应该替换为字符串数组；到这里，它解决了，但我意识到我的 SOAP 不能正常工作。我检查了完全相同的 PHP 操作，然后我发现它在来自 SOAP 的 HTTP 标头中设置了身份验证中的凭据；

```
in WireShark:
-HyperText Transfer Protocol
--Authorization: Basic Y3LIZ577838sdf=
---Credentials: YourUserName:YourPassWord 
```

如何在 Delphi 7 中使用 HTTPRIO SOAP 进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:39:50.987

我不知道 Delphi 7，但在 XE2 中，THTTPRIO 有一个 HTTPWebNode 属性，它有用户名和密码的设置。

在 HTTPWebNode 的 BeforePost 中，您可以对 HTTP 标头进行详细操作，例如：

```
procedure TFrmTestEWS.HTTPRIO1HTTPWebNode1BeforePost(
  const HTTPReqResp: THTTPReqResp; Data: Pointer);
const
   CONTENT_HEADER_EX2010 = 'Content-Type: text/xml; charset=utf-8';
begin
   // http://forum.delphi-treff.de/archive/index.php/t-31817.html
   // Need to exchange the Content-Type Header, because Exchange 2010 expects
   // 'Content-Type: text/xml; charset=utf-8' instead of
   // 'Content-Type: text/xml; charset="utf-8"' which is RFC conform and used by XE2
   HttpAddRequestHeaders(Data, PChar(CONTENT_HEADER_EX2010), Length(CONTENT_HEADER_EX2010), HTTP_ADDREQ_FLAG_REPLACE);
end; 
```

希望这有助于
简

# python - 如何用python中的另一个列表替换一个列表？

> ID：14174858
> 
> 赞同：6
> 
> 时间：2013-01-05T18:21:42.887
> 
> 标签：python, list

我正在制作一个刽子手游戏，我希望能够用用户输入的新单词列表替换原始单词列表。目前我的代码是这样的：

```
gamewords[:] = newgamewords[:] 
```

但这似乎不起作用......

原来的名单是这样的：

```
gamewords= ['blue','violet','red','orange','fuchsia','cyan','magenta','azure','black','turquoise','pink','scarlet'] 
```

然后随机选择一个单词作为列表

```
 word=gamewords[random.randint(0,len(gamewords)-1)] 
```

我想更改它以便从新列表中选择单词，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:24:46.863

您可能打算这样做：

```
gamewords = newgamewords[:]  # i.e. copy newgamewords 
```

另一种选择是

```
gamewords = list(newgamewords) 
```

我发现后者更具可读性。

* * *

请注意，当您像这两种方法一样“复制”列表时，对新复制列表的更改不会影响原始列表。如果你只是简单地赋值`newgamewords`给`gamewords`(ie `gamewords = newgamewords`)，那么修改为`gamewords` *就会*生效`newgamewords`。

* * *

**相关文件**

*   [`list`](http://docs.python.org/2/library/functions.html#list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T18:31:05.370

我不确定你到底想要什么。有两种选择：

1.  `gamewords = newgamewords[:]`
2.  `gamewords = newgamewords`

不同之处在于第一个选项**复制***newgamewords*的元素并将其分配给*gamewords*。第二个选项只是将*newgamewords*的**引用**分配给*gamewords*。使用第二个版本，如果您更改了 gamewords ，您将更改原始*的**newgamewords* -list 。

 ***因为您没有提供更多源代码，所以我无法决定哪个适合您，您必须自己弄清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-06T10:55:41.713

用于从较大列表中随机选择一个或一组项目的函数的明显选择是`random.choice()`or `random.choices()`。

```
>>> gamewords= ['blue','violet','red','orange','fuchsia','cyan','magenta','azure','black','turquoise','pink','scarlet']
>>> random.choice(gamewords)
'turquoise'
>>> random.choice(gamewords)
'orange'
>>> random.choice(gamewords)
'cyan'
>>> random.choices(gamewords, k=3)
['fuchsia', 'orange', 'red']
>>> random.choices(gamewords, k=2)
['turquoise', 'black']
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-06T10:50:21.953

不确定您是否能够找到答案，但我遇到了类似的问题，我使用以下方法解决了它：

```
for x, y in zip(original_col, np.arange(0, len(original_col), 1)):
    df['Term Ldesc'] = df['Term Ldesc'].replace(x, y) 
```

希望这可以帮助！***

# c++ - Qt中的字符串对列表

> ID：14174860
> 
> 赞同：2
> 
> 时间：2013-01-05T18:21:58.490
> 
> 标签：c++, qt, qlist

是否有任何类似列表的容器，每个条目可以包含两个 QStrings？ `QList<QString>`只能包含一个 QString perentry，但我需要类似的东西`QList<QString, QString>`，所以当附加到这个列表时，我附加了两个 QString。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-19T15:06:59.657

```
typedef QList<QPair<QString, QString> > QLinHeaderList; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T18:28:03.433

使用一个[std::pair](http://www.cplusplus.com/reference/utility/pair/) QStrings：`std::pair<QString, QString>`

除非您愿意，否则无需使用 Qt 集合类而不是 std 替代品。例如 QString 比 std::string 好得多，但 Qt 的向量、列表等只是大多数平台上 std 版本的包装器

# php - yii 博客验证码从不验证

> ID：14174861
> 
> 赞同：0
> 
> 时间：2013-01-05T18:21:59.347
> 
> 标签：php, yii

我试图将验证码与 Yii 博客 (http://www.yiiframework.com/doc/blog/) 集成，以便用户必须在评论表单中填写验证码。在我添加的评论表单视图中

```
 <?php if(CCaptcha::checkRequirements()): ?>
    <div class="row">
            <?php echo $form->labelEx($model,'verifyCode'); ?>
            <div>
            <?php $this->widget('CCaptcha', array('captchaAction'=>'comment/captcha')); ?>
            <?php echo $form->textField($model,'verifyCode'); ?>
            </div>
            <div class="hint">Please enter the letters as they are shown in the image above.
            <br/>Letters are not case-sensitive.</div>
            <?php echo $form->error($model,'verifyCode'); ?>
    </div>
    <?php endif; ?> 
```

我已将此数组添加到评论控制器中的 accessRules() 中：

```
 array('allow',  // allow all users to perform 'index' and 'view' actions
                    'actions'=>array('index','view', 'captcha'),
                    'users'=>array('*'),
            ), 
```

我在 CommentController 中覆盖了 actions()：

```
public function actions()
{
    return array(
        // captcha action renders the CAPTCHA image displayed on the contact page
        'captcha'=>array(
            'class'=>'CCaptchaAction',
            'backColor'=>0xD99D25,
        ),
    );
} 
```

在 Comment 模型中，我添加了一条新规则：

```
array('verifyCode', 'captcha', 'on' => 'insert', 'allowEmpty'=>!Yii::app()->user->isGuest) 
```

和新的公众成员：

```
public $verifyCode; 
```

因为评论表单是从博客 actionView() 中显示出来的，所以我认为它会产生问题。验证码显示但从不验证。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:53:53.120

您还需要将 captchaAction 添加到您的 Comment 模型验证规则中，如下所示：

```
array('verifyCode', 'captcha', 'on' => 'insert', 'allowEmpty'=>!Yii::app()->user->isGuest, 'captchaAction'=>'comment/captcha') 
```

# jquery - asp.net gridview jquery 服务器端

> ID：14174862
> 
> 赞同：1
> 
> 时间：2013-01-05T18:22:01.730
> 
> 标签：jquery, asp.net, .net, gridview

我使用 jQuery 制作了一个 asp.net gridview 来选择带有 css 的行，我想将此行发送到服务器。

我使用了查询字符串，但有没有更好的方法将行发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:30:41.827

您可以将该行发布到需要处理它的页面。

看看[这个答案](https://stackoverflow.com/questions/11149282/post-asp-net-form-data-to-another-page)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:10:19.993

如果您需要传递所有内容，包括标记，您的方法似乎还可以；否则，您可以简单地获取行单元格中的值，并将它们放入隐藏的输入元素中，然后发布表单。只要您为隐藏元素命名，您就可以使用以下方法轻松检索它们：

```
Request.Params["InputElementName"] 
```

# security - 如何禁用 NodeJs 内部模块？

> ID：14174863
> 
> 赞同：3
> 
> 时间：2013-01-05T18:22:03.980
> 
> 标签：security, node.js, module

我正在评估将 NodeJs 用于共享编程平台的过程。

用户应该能够提交代码并在服务器上运行它。为了给他们最好的基础，应该提供几个 NodeJs 模块。

出于安全原因，应该对进程进行 chroot 以禁止访问系统资源。

最好的方法似乎是使用 child_processes，尤其是[fork()](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)函数。

为了进一步的安全性，一些 NodeJs 模块也应该被禁用，比如启动额外的子进程。

如何为孩子禁用这些模块？我什至无法找到默认禁用某些编译选项，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T23:25:27.520

基本上，您正在寻找的是在受信任的环境中运行不受信任的代码。我猜这里的关键是沙盒。

请注意，有多种解决方案可用于在 Node.js 中创建和管理沙箱，其中包括：

*   [gf3/sandbox](https://github.com/gf3/sandbox)，这是*一个漂亮的 node.js javascript 沙箱*
*   [hflw/node-sandbox](https://github.com/hflw/node-sandbox)，这是一个*高级沙箱库，允许沙箱和父进程之间的通信。*

我对他们中的任何一个都没有任何实际经验，但我想这对你来说是朝着正确方向迈出的一步。也许您想在这里与他们分享您的经验？我认为这会很棒:-)

希望这可以帮助。

# objective-c - 仅当变量为 nil 时才分配空字符串（三元运算符）

> ID：14174864
> 
> 赞同：18
> 
> 时间：2013-01-05T18:22:12.590
> 
> 标签：objective-c, cocoa-touch, nsstring, variable-assignment

我正在尝试实现以下 C# 代码的等效项：

```
someStringValue = someStringValue ?? string.Empty; 
```

如果 if为 null，则将分配`someStringValue`一个值`string.Empty`（空字符串：）。`""`我如何在 Objective-C 中实现这一点？是我唯一的选择：

```
if(!someStringValue)
   someStringValue = @""; 
```

***感谢@Dave DeLong的解决方案***：

```
someStringValue = someStringValue ?: @""; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-05T18:25:16.787

很简单，使用三元运算符。

```
someStringValue = someStringValue ? someStringValue : @""; 
```

或者如果你想要一个宏，你也可以这样做。

```
#if !defined(StringOrEmpty)
    #define StringOrEmpty(A)  ({ __typeof__(A) __a = (A); __a ? __a : @""; })
#endif 
```

示例用法：

```
someStringValue = StringOrEmpty(someStringValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:28:40.157

如果 someStringValue 是一个类变量，您可以将此代码添加到拥有该字符串的 .m 文件中

```
- (void)setSomeStringValue:(NSString *)newSomeStringValue
{
   if (!newSomeStringValue) newSomeStringValue = @"";
   _someStringValue = newSomeStringValue;
} 
```

# java - 堆栈溢出错误

> ID：14174867
> 
> 赞同：1
> 
> 时间：2013-01-05T18:22:33.497
> 
> 标签：java, stack-overflow

> **可能重复：**
> [为什么我收到 StackOverflowError](https://stackoverflow.com/questions/3593893/why-im-getting-stackoverflowerror)

我正在使用两个课程：日期和考试。Date 从三个整数中设置一个 Date 对象：日、月、年；Exam 从一个 String courseName 和一个 Date 对象中设置一个 Exam 对象。

我正在尝试运行此代码：

```
 public Exam(String name, Date d)
    {
        courseName=name;
        examDate=new Date(d);
    }

    //**a method that checks if two dates are equal**
    public boolean equals (Date r)
    {
        return (examDate.equals(r));
    }

    public static void main(String[] args)
    {
        Date d=new Date(11,11,2011);
        String a=new String("OOP");
        Exam b=new Exam(a,d);
        Date c=new Date(11,11,2011);
        System.out.println(b.equals(c));
    } 
```

当我尝试运行代码时，线程“main”中出现错误异常`java.lang.StackOverflowError`

该错误表明问题出在 Date 类中的一行上，该类检查两个日期是否相等：

```
public boolean equals (Date d)
{
    return (this.equals(d));
} 
```

我会很感激知道为什么会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T18:28:34.117

```
boolean equals(Date d) {
  this.equals(d); 
} 
```

不管这个类是什么，equals 方法都是完全错误的——它只是调用自己，而后者又调用自己，而后者又调用自己，无限递归，直到你得到一个 StackOverflowError。

首先：覆盖equals的正确签名是：

```
boolean equals(Object obj) 
```

具有特定于类的覆盖只是......奇怪。看起来可能有人试图委托给默认的 equals() 方法，但这不是要做的。

如果这是一个自定义 Date 类，equals 应该类似于：

```
boolean equals(Object obj) {
  if (!obj instanceof Date) {
    return false;
  }
  Date other = (Date) obj;
  return this.field1.equals(date.field1) && this.field2.equals(date.field2)...... ;
} 
```

另外，现在就在你实现 equals() 的任何时候实现 hashCode 的实践。它将为您节省悲伤。

[当我覆盖 equals() 方法时，为什么要覆盖 hashCode()？](https://stackoverflow.com/questions/2707541/why-should-i-override-hashcode-when-i-override-equals-method)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T18:31:57.977

正如詹姆斯所说，`return (this.equals(d));`绝对是错误的。假设您的`Date`班级具有年、月和日的属性，您应该尝试类似

```
public boolean equals(Object o) {
    if (! o instanceof Date) return false;
    Date d = (Date)o;
    return this.year == d.year && this.month == d.month && this.day == d.day;
} 
```

请注意，参数的静态类型很重要`Object`，请参阅 James 的答案

# code-first - 实体框架 DbContext 中的 E-SQL

> ID：14174869
> 
> 赞同：1
> 
> 时间：2013-01-05T18:22:54.567
> 
> 标签：code-first, entity-framework-5, dbcontext

我正在使用 EF 5.0 Code First API，我需要添加构建动态 OrderBy 表达式的能力（UI 有一个过滤器面板，用户可以在其中选择多个排序标准（例如，选择前 20 个客户，按 LastName ASC 排序，然后按出生日期 DESC）。

ObjectContext API 公开`OrderBy("it.PropertyName")`了看起来很棒的方法，尽管它缺少编译时验证。但是，我在 DbContext API 中找不到任何类似物。

谷歌搜索问题我发现了这样的建议：

```
((IObjectContextAdapter)myContextInstance).ObjectContext.CreateQuery<MyEntity>("<ESQL Query>") 
```

但是，我根本不想放弃 LINQ 查询。有没有办法得到这样的东西（混合 ESQL 和 LINQ，因为它可以通过使用 ObjectContext）：

```
var customers = myDbContext.Customers.OrderBy("it.LastName desc").Where(c => c.Age < 18) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:15:35.283

像这样的东西？我不确定混合 ESQL 和 LINQ，但您的最后一个查询可以完全从 LINQ 完成。

`var customers = myDbContext.Customers.OrderByDescending(a => a.LastName).ThenBy(c => c.BirthDate).Where(b => b.Age < 18);`

# cuda - CUDA 就地转置错误

> ID：14174876
> 
> 赞同：4
> 
> 时间：2013-01-05T18:23:15.433
> 
> 标签：cuda, transpose, in-place

我正在实现一个用于转置图像的 CUDA 程序。我创建了 2 个内核。第一个内核进行了不合适的转置，并且适用于任何图像大小。

然后我创建了一个内核用于方形图像的就地转置。但是，输出不正确。图像的下三角形被转置，但上三角形保持不变。生成的图像在对角线上有一个类似楼梯的图案，楼梯每一步的大小等于我用于内核的 2D 块大小。

# 异地内核：

**如果 src 和 dst 不同，则适用于任何图像大小。**

```
template<typename T, int blockSize>
__global__ void kernel_transpose(T* src, T* dst, int width, int height, int srcPitch, int dstPitch)
{
    __shared__ T block[blockSize][blockSize];

    int col = blockIdx.x * blockSize + threadIdx.x;
    int row = blockIdx.y * blockSize + threadIdx.y;

    if((col < width) && (row < height))
    {
        int tid_in = row * srcPitch + col;
        block[threadIdx.y][threadIdx.x] = src[tid_in];
    }

    __syncthreads();

    col = blockIdx.y * blockSize + threadIdx.x;
    row = blockIdx.x * blockSize + threadIdx.y;

    if((col < height) && (row < width))
    {
        int tid_out = row * dstPitch + col;
        dst[tid_out] = block[threadIdx.x][threadIdx.y];
    }
} 
```

# 就地内核：

```
template<typename T, int blockSize>
__global__ void kernel_transpose_inplace(T* srcDst, int width, int pitch)
{
    __shared__ T block[blockSize][blockSize];

    int col = blockIdx.x * blockDim.x + threadIdx.x;
    int row = blockIdx.y * blockDim.y + threadIdx.y;

    int tid_in = row * pitch + col;
    int tid_out = col * pitch + row;

    if((row < width) && (col < width))
        block[threadIdx.x][threadIdx.y] = srcDst[tid_in];

    __threadfence();

    if((row < width) && (col < width))
        srcDst[tid_out] = block[threadIdx.x][threadIdx.y];
} 
```

# 包装功能：

```
int transpose_8u_c1(unsigned char* pSrcDst, int width,int pitch)
{
    //pSrcDst is allocated using cudaMallocPitch

    dim3 block(16,16);
    dim3 grid;
    grid.x = (width + block.x - 1)/block.x;
    grid.y = (width + block.y - 1)/block.y;

    kernel_transpose_inplace<unsigned char,16><<<grid,block>>>(pSrcDst,width,pitch);

    assert(cudaSuccess == cudaDeviceSynchronize());

    return 1;
} 
```

# 样本输入和错误输出：

![在此处输入图像描述](../Images/21b279c1be8a25c9d037454e673f8473.png) ![在此处输入图像描述](../Images/9917b2b9261b0ef91109811bf1dd0704.png)

我知道这个问题与**就地**转置的逻辑有关。这是因为我的不合适的转置内核可以完美地用于不同的源和目标，如果我将源和目标的单个指针传递给它也会给出相同的错误结果。

我究竟做错了什么？帮助我纠正就地内核。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T19:50:32.907

您的就地内核正在覆盖图像中的数据，这些数据随后将被另一个线程拾取以用于其转置操作。因此*，对于方形图像*，您应该在覆盖之前缓冲目标数据，然后将目标数据放在适当的转置位置。由于我们使用这种方法有效地为每个线程执行 2 个副本，因此只需要使用一半的线程。像这样的东西应该工作：

```
template<typename T, int blockSize>
__global__ void kernel_transpose_inplace(T* srcDst, int width, int pitch)
{

    int col = blockIdx.x * blockDim.x + threadIdx.x;
    int row = blockIdx.y * blockDim.y + threadIdx.y;

    int tid_in = row * pitch + col;
    int tid_out = col * pitch + row;

    if((row < width) && (col < width) && (row<col)) {

        T temp = srcDst[tid_out];

        srcDst[tid_out] = srcDst[tid_in];
        srcDst[tid_in] = temp;
        }
} 
```

# widget - Soundcloud Widgets - 按流派标签？

> ID：14174878
> 
> 赞同：0
> 
> 时间：2013-01-05T18:23:26.037
> 
> 标签：widget, soundcloud

我需要为我的网站创建一个小部件，该小部件在顶部有标签，具体取决于流派。我在一个网站 (www.unseen-music.com) 上看到过它，但想知道它是否是一个网站开发的东西，或者是否可以仅通过 soundcloud 小部件来完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:29:48.527

您可以使用按流派过滤的歌曲创建集合，将这些集合嵌入为小部件，然后将它们设置为选项卡的一部分。

或者您确实可以使用编程语言并从 API 中按流派检索声音。然后你可以构建一个 UI 来播放这些声音，它可以有标签——根本不会使用 Widget API，但会使用 HTTP API，如果你想要一些 SDK 的话。

# jquery - 带有 glDatePicker 的 DatePicker。具有两个输入的日期范围

> ID：14174879
> 
> 赞同：4
> 
> 时间：2013-01-05T18:23:36.210
> 
> 标签：jquery, datepicker, date-range

我正在使用 glDatePicker 生成日期范围选择系统。

您有一个从日期输入文本和一个到输入文本。

有没有办法将 glDatePicker 的一个实例的选定日期（从输入）传递给另一个（到输入）作为 selectableDateRange 从值？

我试过这个，但它不起作用。

```
 <input type="text" id="from" />
</p>
<p> To:
  <input type="text" id="to" />
</p>
<script type="text/javascript">

var today = new Date();
var datelimit = new Date(today);
datelimit.setDate(today.getDate() + 31);

var to = $('#to').glDatePicker(true);

$('#from').glDatePicker({
    showAlways: false,
    allowMonthSelect: true,
    allowYearSelect: true,
    prevArrow: '',
    nextArrow: '',
    selectedDate: today,
    selectableDateRange: [{
        from: today,
        to: datelimit
    }, ],
    onClick: function (target, cell, date, data) {
        target.val(date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + date.getDate());

        //Cambio la fecha del #to
        var toFrom = new Date(date);
        var toLimit = new Date();
        toLimit.setDate(toFrom.getDate() + 31);
        $.extend(to.options,
            {
                selectableDateRange: [{
                from: toFrom,
                to: toLimit
            }, ],
            });
            to.render();

        if (data != null) {
            alert(data.message + '\n' + date);
        }
    }
}).glDatePicker(true); 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:33:05.863

最后我解决了。

我希望它可以帮助某人。

```
<!DOCTYPE html>
<html>
<head>
<link href="styles/glDatePicker.default.css" rel="stylesheet" type="text/css">
</head>
<body>
<p> From:
<input type="text" id="from" />
</p>
<p> To:
<input type="text" id="to" />
</p>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
<script src="glDatePicker.min.js"></script> 
<script type="text/javascript">

var today = new Date();
var datelimit = new Date(today);
datelimit.setDate(today.getDate() + 31);

$('#from').glDatePicker({
    showAlways: false,
    allowMonthSelect: true,
    allowYearSelect: true,
    prevArrow: '',
    nextArrow: '',
    selectedDate: today,
    selectableDateRange: [{
        from: today,
        to: datelimit
    }, ],
    onClick: function (target, cell, date, data) {
        target.val(date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + date.getDate());

        if (data != null) {
            alert(data.message + '\n' + date);
        }
    }
}).glDatePicker(true);

var to = $('#to').glDatePicker(
{
    showAlways: false,
    onClick: function (target, cell, date, data) {
        target.val(date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + date.getDate());

        if (data != null) {
            alert(data.message + '\n' + date);
        }
    }
}).glDatePicker(true);

$('#to').click(function() {
    var fechaFrom = new Date($("#from").val());
    var toLimit = new Date();
    toLimit.setDate(fechaFrom.getDate() + 31);
    to.options.selectableDateRange = [{
        from: fechaFrom,
        to: toLimit
    }, ],
    to.options.showAlways = false;
    to.render();
});

</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T20:09:28.020

我使用了 SauronZ answer 中的代码，但发现更改用于创建日期范围的天数会导致错误。

经过数小时的阅读，我在 Stack 上找到了一个帖子，让我找到了正确的答案（[https://stackoverflow.com/a/19691491/2288421](https://stackoverflow.com/a/19691491/2288421)）

我在 $('#to').click 函数中添加了以下函数：

```
function addDays(date, days) {
    var result = new Date(date);
    result.setDate(date.getDate() + days);
    return result;
} 
```

然后我在生成 toLimit 时调用了该函数：

```
var tempDate = new Date($('#from').val());
toLimit = addDays(tempDate, 91); 
```

如您所见，我将范围设置为 91 天，但您可以输入任何您想要的数字。

以下是更改的完整代码块，以防有人需要查看它：

```
$('#to').click(function() {
    var fechaFrom = new Date($("#from").val());
    var toLimit = new Date();

    /**** ADDED FUNCTION TO ALLOW ADDING OF ANY NUMBER OF DAYS ****/
    function addDays(date, days) {
        var result = new Date(date);
         result.setDate(date.getDate() + days);
        return result;
    }

    var tempDate = new Date($('#from').val());

    toLimit = addDays(tempDate, 91);
    to.options.selectableDateRange = [{
        from: fechaFrom,
        to: toLimit
    }, ],
    to.options.showAlways = false;
    to.render();
}); 
```

# svn - 获取标签和分支之间的区别？

> ID：14174883
> 
> 赞同：1
> 
> 时间：2013-01-05T18:24:07.783
> 
> 标签：svn, version-control

使用 SVN 日志（或其他东西？）获取从标签到分支的所有更改/添加文件的列表的最简单方法是什么？

我最初使用 svn log 将标签的修订号与分支的修订号之间的差异导出到 XML，但是这遗漏了在前一个标签仍然是分支时添加到主干的文件（如果这有意义的话） .

A - 现在是标签的旧分支 B - 当前分支正在处理 C - 主干

我们需要 A 和 B 之间添加/更改的文件的列表。问题是我们当前的 SVN 日志命令缺少一些我们在 A 仍在处理的分支时添加到 C 的文件。一旦我们完成了 A 的工作，我们标记它然后将它与主干合并。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:26:31.183

怎么样：

```
svn diff <branch_1>[@rev] <branch_2>[@rev] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:29:37.443

我使用 Eclipse 的 SVN 插件，它有一个比较好的工具来比较两者。

我最喜欢用于此类事情的工具是 Scooter Software 的 BeyondCompare。我认为他们有一个免费的 30 天试用版可供您使用。我只是签出标签并分支到我的本地驱动器，然后使用 BeyondCompare 查看差异。

该产品最好的部分是它会突出显示一行上不同的字符并将它们并排显示，这样更容易看到。我发现自己比较代码比 SVN 更容易使用。

# spring - 如何使用 Spring Security 3 检索 UserDetails？

> ID：14174886
> 
> 赞同：0
> 
> 时间：2013-01-05T18:24:34.853
> 
> 标签：spring, security

```
www.someurl.com - public access not intercepted by Spring Security 3.
www.someurl.com/admin  - intercepted by Spring Security 3\. Works fine. 
```

我登录到 www.someurl.com/admin 下的页面。然后我在同一个窗口选项卡中将 url 更改为 www.someurl.com。我在同一个 http 会话中工作，所以我希望能够检索用户登录详细信息。

公共 url 请求由专用控制器处理。在这个控制器中，我有一个有线用户服务。此服务的实现者正在尝试检索凭据，但不能 - 身份验证对象为空。

```
Authentication a=SecurityContextHolder.getContext().getAuthentication();
userDetails=(UserDetails) a.getPrincipal(); 
```

**=== 更新 ==========================**

当我在公共 url 请求控制器中检查 HttpSession 时，我看到了这个属性：

{SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@ed20eaf7：身份验证：org.springframework.security.authentication.UsernamePasswordAuthenticationToken@ed20eaf7：主体：org.springframework.security.core.userdetails.User@586034f：用户名：管理员; 密码保护]; 启用：真；AccountNonExpired：真；凭据非过期：真；AccountNonLocked：真；授予权限：ADMINISTRATOR、AUTHOR、EDITOR、READER；凭证：[受保护]；已认证：真实；详细信息：org.springframework.security.web.authentication.WebAuthenticationDetails@380f4：RemoteIpAddress：127.0.0.1；会话ID：43A582157C5813018632ACDD7499CF7D；授予权限：ADMINISTRATOR、AUTHOR、EDITOR、READER}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:57:58.793

如果你想像你一样获取安全细节，Spring Security 必须拦截 url，否则不会有任何安全信息。您可以将以下内容添加到您的 spring 安全配置中：

```
<security:http pattern="/" security='none' /> 
```

这意味着 spring security 会让每个人都看到 root url（无论是否登录），但是 spring security 会处理 url，这意味着你的控制器对 root url 将能够从中获取当前用户登录详细信息`SecurityContextHolder`

# algorithm - 了解候选消除算法

> ID：14174887
> 
> 赞同：1
> 
> 时间：2013-01-05T18:24:37.157
> 
> 标签：algorithm, artificial-intelligence

我正在尝试掌握如何手动执行候选消除算法。我知道答案，但我不知道如何到达那里的步骤。任何人都可以指导我或指出我正确的方向。这是我正在研究的问题：

```
Consider a concept description language with three attributes predened as follows:

attribute1      attribute2       attribute3
----------      ------------     ------------
|        |      |    |     |     |          |
a        b      c    d     e     f          g

Demonstrate version space learning using the following positive and negative training     examples:

1\. ( a c f ) +)
2\. ( b c f ) +)
3\. ( a e g ) -)
4\. ( a c g ) -)
5\. ( b d f ) -)

Show how the candidate elimination algorithm changes the boundary sets after
processing each example. 
```

这是我到目前为止所拥有的：

```
1\. ( a c f ) +) Generalize..
G:(???)
S:(acf)

2\. ( b c f ) +) Generalize...
G:(a??), (?e?), (?d?), (??g) - Not even sure if this is correct
S:(?cf) 
```

有人可以指导我或给我建议吗？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T17:09:02.380

在这里：[http](http://www2.cs.uregina.ca/~dbd/cs831/notes/ml/vspace/vs_prob1.html) ://www2.cs.uregina.ca/~dbd/cs831/notes/ml/vspace/vs_prob1.html 这个网站真的很有帮助！

我为这个练习制作了树，我得到的答案是 G=S= (?cf)

它是这样的：

1.  G: (???) S: (acf)

2\. G: (???) S: (?cf)

1.  G: (???) 修剪后变为 (b??),(?c?),(?d?),(??f) = (?c?),(??f) S: (?cf )

4\. G: (?c?),(??f) 变成 (?cf),(??f) （因为 (?c?) 在这个例子中不再成立） S: (?cf)

5\. G: (?cf),(??f) 变成 (?cf),(?cf) （因为 < ??f > 在这个例子中不再成立） S: (?cf)

最终答案是： G: (?cf),(?cf) = (?cf) S: (?cf)

最后的假设是 (?cf)

希望这可以帮助。

# ios - OpenGLES 2.0 纹理渲染

> ID：14174890
> 
> 赞同：0
> 
> 时间：2013-01-05T18:24:47.670
> 
> 标签：ios, opengl-es

我正在创建一个绘图应用程序，我需要将最终结果保存为 png 图像。但是我需要能够通过进一步的绘图来编辑图像。

帧缓冲区对象是去这里的方式吗？渲染成屏幕外纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:42:18.987

这取决于您以后要如何编辑图像。您的问题有两个部分：1）将图像保存为 png 2）在绘制后编辑图像

1) 将帧缓冲区绘图保存为 png 很简单。OpenGL ES 1.x (http://stackoverflow.com/questions/5062978/how-can-i-dump-opengl-renderbuffer-to-png-or-jpg-image) 有一个类似的问题，应该是一个很好的工作基础。

2）这取决于您要多长时间编辑图像。如果您在整个程序中连续编辑图像，则将所有内容保存在帧缓冲区中的内存中，并且仅在完成编辑后才写入 png。如果您稍后需要在图像顶部绘制（例如，当您重新打开程序时），您可以将其保存为 png，然后在您想要编辑图像时将 png 作为新帧缓冲区的纹理加载再次。当您绘制到这个新的帧缓冲区时，您将在纹理（这是您之前的图像）之上进行绘制。

# vb.net - 水晶报表 Visual Studio 2010 - Vb.net

> ID：14174898
> 
> 赞同：0
> 
> 时间：2013-01-05T18:25:30.110
> 
> 标签：vb.net, visual-studio-2010, crystal-reports

我正在尝试为 Windows 表单应用程序创建水晶报表（第一次），当我在解决方案中添加水晶报表时出现以下错误。

我已经在我的电脑上安装了：

## SAP Crystal Reports，Visual Studio 2010 版 - 标准

## 适用于 .NET Framework 4（32 位）的 SAP Crystal Reports 运行时引擎

构建错误：错误 7 类型“ReportClass”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 22 14 TESTE 错误 8 属性“ResourceName”不能被声明为“Overrides”，因为它没有覆盖基类中的属性。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 28 31 TESTE 错误 9 属性“NewGenerator”不能被声明为“覆盖”，因为它没有覆盖基类中的属性。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 37 31 TESTE 错误 10 属性“FullResourceName”不能被声明为“Overrides”，因为它没有覆盖基类中的属性。C：\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 46 31 TESTE 错误 11 类型“CrystalDecisions.CrystalReports.Engine.Section”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 57 44 TESTE 错误 12 'ReportDefinition' 不是 'TESTE.CrystalReport1' 的成员。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 59 20 TESTE 错误 13 类型“CrystalDecisions.CrystalReports.Engine.Section”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 65 44 TESTE 错误 14 'ReportDefinition' 不是 'TESTE.CrystalReport1' 的成员。C：\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 67 20 TESTE 错误 15 类型“CrystalDecisions.CrystalReports.Engine.Section”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 73 44 TESTE 错误 16 'ReportDefinition' 不是 'TESTE.CrystalReport1' 的成员。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 75 20 TESTE 错误 17 类型“CrystalDecisions.CrystalReports.Engine.Section”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 81 44 TESTE 错误 18 'ReportDefinition' 不是 'TESTE.CrystalReport1' 的成员。C：\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 83 20 TESTE 错误 19 类型“CrystalDecisions.CrystalReports.Engine.Section”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 89 44 TESTE 错误 20 'ReportDefinition' 不是 'TESTE.CrystalReport1' 的成员。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 91 20 TESTE 错误 21 类型“CrystalDecisions.Shared.ExportOptions”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 96 48 TESTE 错误 22 类型“ICachedReport”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1。vb 99 16 TESTE 错误 23 类型“CrystalDecisions.ReportSource.ICachedReport”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 107 69 TESTE 错误 24 类型“CrystalDecisions.ReportSource.ICachedReport”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 118 74 TESTE 错误 25 类型“CrystalDecisions.ReportSource.ICachedReport”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 129 78 TESTE 错误 26 'CachedReportConstants' 未声明。由于其保护级别，它可能无法访问。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 131 20 TESTE 错误 27 类型' CrystalDecisions.CrystalReports.Engine.ReportDocument' 未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 138 51 TESTE 错误 28 类型“CrystalDecisions.ReportSource.ICachedReport”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 138 116 TESTE 错误 29 'Site' 不是 'TESTE.CrystalReport1' 的成员。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 140 9 TESTE 错误 30 类型“RequestContext”未定义。C:\Users\Fernando e Flavia\Fernando\Projetos Programacao\Holerite\TESTE\TESTE\CrystalReport1.vb 144 72 TESTE 错误 31 类型“CrystalDecisions.ReportSource.ICachedReport”未定义。C：

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:35:20.920

我必须使用 SAP Crystal Site 中以下链接中的说明解决问题：

[http://scn.sap.com/community/bi-platform/microsoft-net-sdk/blog/2010/05/04/my-day-1-training-on-cr-2010-beta](http://scn.sap.com/community/bi-platform/microsoft-net-sdk/blog/2010/05/04/my-day-1-training-on-cr-2010-beta)

谢谢，

# php - 登录表单查询错误

> ID：14174901
> 
> 赞同：0
> 
> 时间：2013-01-05T18:25:33.833
> 
> 标签：php, mysql, login

我在我的网站上创建了一个注册表单，应该在名为 mayan_users 的数据库中注册用户，但是当我在表单中输入详细信息并提交时，出现“查询错误”，任何人都可以看到我可能在哪里犯了错误？我已经包含了下面的代码。谢谢。

```
<?php
     include("dbconnect.php");
     $firstname=$_POST['first_name'];
     $lastname=$_POST['last_name'];
     $address=$_POST['address'];
     $postcode=$_POST['postcode'];
     $emailaddress=$_POST['emailaddress'];
     $password=$_POST['password'];
     $query = "select emailaddress FROM mayan_users  where emailaddress='$emailaddress'";
      $link = mysql_query($query);
     if (!$link) {
      die('query error');
     }
     $num=mysql_num_rows($link);
     if ($num>0){
      die('email already exists'); //email already taken
     }
     $query = "insert into mayan_users (firstname, lastname, address, postcode, emailaddress, password) values('$firstname','$lastname','$address','$postcode', '$emailaddress','$password')";
     $link = @ mysql_query($query);
     if (!$link) {
      die('table write error');
     }
     ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:31:32.243

只需尝试以下方法。，

**HTML部分：**

```
<form action="" method="post" name="register">
<table>
<tr><td>First Name</td><td><input type="text" name="first_name" /></td></tr>
<tr><td>Last Name</td><td><input type="text" name="last_name" /></td></tr>
<tr><td>Address</td><td><input type="text" name="address" /></td></tr>
<tr><td>Postal Code</td><td><input type="text" name="postcode" /></td></tr>
<tr><td>Email</td><td><input type="text" name="emailaddress" /></td></tr>
<tr><td>Password</td><td><input type="password" name="password" /></td></tr>
<tr><td colspan="2" align="center"><input type="submit" name="register" value="Register" /></td></tr>
</table>
</form> 
```

**PHP部分：**

```
<?php
$con = mysql_connect("localhost","root","") or die(mysql_error());
$select_db = mysql_select_db("mayan",$con);
if(isset($_POST['register']))
{
     $firstname = mysql_real_escape_string($_POST['first_name']);
     $lastname = mysql_real_escape_string($_POST['last_name']);
     $address = mysql_real_escape_string($_POST['address']);
     $postcode = mysql_real_escape_string($_POST['postcode']);
     $emailaddress = mysql_real_escape_string($_POST['emailaddress']);
     $password = mysql_real_escape_string($_POST['password']);

     $query = "select emailaddress FROM mayan_users where emailaddress='$emailaddress'";
     $link = mysql_query($query)or die(mysql_error());
     $num = mysql_num_rows($link);

     if ($num>0){
      echo 'Email already exists'; //email already taken
     }

     else {
     $insert_query = "insert into `mayan_users`(`firstname`,`lastname`,`address`,`postcode`,`emailaddress`,`password`) values('$firstname','$lastname','$address','$postcode','$emailaddress','$password')";
     $result = mysql_query($insert_query)or die(mysql_error());
     echo "Registered Successfully!";
     }
}
?> 
```

**MySQL表结构：**

```
CREATE TABLE IF NOT EXISTS `mayan_users` (
  `uid` int(11) NOT NULL AUTO_INCREMENT,
  `firstname` varchar(255) NOT NULL,
  `lastname` varchar(255) NOT NULL,
  `address` varchar(255) NOT NULL,
  `postcode` varchar(255) NOT NULL,
  `emailaddress` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  PRIMARY KEY (`uid`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T18:53:19.617

首先，您需要知道您的代码容易受到 SQL 注入的影响。您收到“查询错误”错误的原因可能是 $_POST['emailaddress'] 值中的输入格式。

还要确保您不在数据库中存储明文密码。如果网站/应用程序被黑客入侵，黑客可以很容易地收集密码。

如果您不希望从发布数据中删除 HTML，请删除 ipSafe 函数。

我建议你这样做：我添加了一些基本的安全性。请阅读有关功能和`mysql_real_escape_string`www.php.net[的](http://php.net/ "PHP.net")内容。`htmlspecialchars`

```
$firstname = ipSafe($_POST['firstname']);
$lastname = ipSafe($_POST['lastname']);
$address = ipSafe($_POST['address']);
$postcode = ipSafe($_POST['postcode']);
$emailaddress = ipSafe($_POST['emailaddress']);
$password = $_POST['password']; // please use encryption! :(

$sql = "
    SELECT `emailaddress`
    FROM `mayan_users`
    WHERE `emailaddress` = '".dbSafe($emailaddress)."'
    LIMIT 1;
";

if ( ($query = mysql_query($sql)) && (mysql_num_rows($query) < 1) )
{
    $sqlinsert = "
        INSERT INTO `mayan_users`(
            `firstname`, 
            `lastname`, 
            `address`, 
            `postcode`, 
            `emailaddress`, 
            `password`
        )
        VALUES (
            '".dbSafe($firstname)."', 
            '".dbSafe($lastname)."', 
            '".dbSafe($address)."', 
            '".dbSafe($postcode)."', 
            '".dbSafe($emailaddress)."', 
            '".dbSafe($password)."'
        )
    ";

    if (mysql_query($sqlinsert))
    {
        print "User added.";
    }
    else
    {
        print "Something went wrong: ".mysql_error();
    }
}
else
{
    // email exists in database or error
    if (mysql_errno() > 0)
    {
        print "An error occured: ".mysql_error();
    }
}

function dbSafe ($string)
{
    if (get_magic_quotes_gpc())
    {
        $string = stripslashes($string);
    }

    return mysql_real_escape_string($string);
}

function ipSafe($string)
{
    return htmlspecialchars(strip_tags($string));
} 
```

# java - java代码中的toString

> ID：14174902
> 
> 赞同：1
> 
> 时间：2013-01-05T18:25:51.520
> 
> 标签：java, string

以下是我的java代码片段：

```
static String sortChars(String s) {
    char[] chars = s.toCharArray();
    Arrays.sort(chars);
    return chars.toString();
} 
```

我使用以下方法调用上述函数：

```
String result = sortChars(s); 
```

但结果并不符合我的预期：例如，s="are"，result="aer"。但是，当我使用：

```
return new String(chars) 
```

有用。有人可以告诉我它的原因。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T18:28:29.427

由于`char[]`class 没有覆盖 default`Object`的`toString()`实现，所以它不会返回由 char 数组中的字符组成的字符串，而是**char[] 类名 + 哈希码**。例如：`arr[C@19821f`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:32:56.400

`toString()`返回对象的字符串表示形式。您可以将其视为对对象的描述。 `new String(chars)`会给你一个数组`String`的内容。`char`

如果`toString()`要向用户或在日志中表示对象，请使用，`new String()`如果要获取`String`与数组内容相同的对象，请使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T19:16:56.600

请注意，Java String 的构造函数中有一个接受字符数组。这会将字符数组转换为您所期望的字符串，这是您正在做的事情的正确选择。

# html - 动态改变桌子高度

> ID：14174907
> 
> 赞同：1
> 
> 时间：2013-01-05T18:26:16.347
> 
> 标签：html, css, html-table

我在 html 中遇到表格问题，实际上我固定了**宽度**，并希望根据其中的内容增加 td**高度**，例如：如果 td**宽度**为**30px**并且当 td 内的数据跨越 td 宽度时我想要**在下一行**显示剩余数据，依此类推..

桌子：

```
<table width="100%" border="1" >
        <tr>
            <td align="left" width="30px">
                laaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa text
        </td>
            <td align="left" width="30px">
                text
        </td>
        </tr>
      </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T19:16:35.617

这是解决您问题的方法！在这种情况下，列的宽度是相等的，尽管它们可以更改，更不用说。

```
<table  border="1" width="100%" style="table-layout:fixed">
<tr>
<td style="word-wrap:break-word">Hellohellohellohellohellohellohellohellohellohellohello
<td>text</td>
</tr>
</table> 
```

这是演示[http://jsbin.com/ihaxob/2/edit](http://jsbin.com/ihaxob/2/edit) .. 我已经从这个线程中看到了解决方案！

[HTML 表格中的自动换行](https://stackoverflow.com/questions/1258416/word-wrap-in-a-html-table)

# objective-c - 更改文本时，如何在 NSTextField 中为fadeIn fadeOut 效果设置动画？

> ID：14174911
> 
> 赞同：4
> 
> 时间：2013-01-05T18:26:30.153
> 
> 标签：objective-c, cocoa, osx-lion

我正在尝试编写一个`NSTextField`将为其添加新方法的类别`setAnimatedStringValue`。这个方法应该很好地淡出当前文本，然后设置新文本，然后淡入。

以下是我的实现： -

```
- (void) setAnimatedStringValue:(NSString *)aString {

    if ([[self stringValue] isEqualToString:aString]) {
        return;
    }

    NSMutableDictionary *dict = Nil;

    NSViewAnimation *fadeOutAnim;
    dict = [NSDictionary dictionaryWithObjectsAndKeys:self, NSViewAnimationTargetKey,
            NSViewAnimationFadeOutEffect, NSViewAnimationEffectKey, nil];
    fadeOutAnim = [[NSViewAnimation alloc] initWithViewAnimations:[NSArray arrayWithObjects:
                                                               dict, nil]];
    [fadeOutAnim setDuration:2];
    [fadeOutAnim setAnimationCurve:NSAnimationEaseOut];
    [fadeOutAnim setAnimationBlockingMode:NSAnimationBlocking];

    NSViewAnimation *fadeInAnim;
    dict = [NSDictionary dictionaryWithObjectsAndKeys:self, NSViewAnimationTargetKey,
            NSViewAnimationFadeInEffect, NSViewAnimationEffectKey, nil];
    fadeInAnim = [[NSViewAnimation alloc] initWithViewAnimations:[NSArray arrayWithObjects:
                                                                   dict, nil]];
    [fadeInAnim setDuration:3];
    [fadeInAnim setAnimationCurve:NSAnimationEaseIn];
    [fadeInAnim setAnimationBlockingMode:NSAnimationBlocking];

    [fadeOutAnim startAnimation];

    [self setStringValue:aString];

    [fadeInAnim startAnimation];
} 
```

不用说，但上面的代码根本不起作用。我看到的唯一效果是同一窗口上的进度条闪烁。这可能是因为我在尝试“动画”它时阻塞了主运行循环。

请提出上述代码有什么问题。

**附加说明：**

`setAnimatedStringValue`总是由 a 调用`NSTimer`，它被添加到 main`NSRunLoop`中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T16:28:00.527

在发布上一个答案后，我正在四处寻找。我留下那个答案是因为它与您发布的代码密切相关，并且使用`NSViewAnimation`. 然而，我确实想出了一个更简洁的版本，尽管它使用起来稍微难读（由于块参数缩进）`NSAnimationContext`。这里是：

```
#import <QuartzCore/QuartzCore.h>

@interface NSTextField (AnimatedSetString)

- (void) setAnimatedStringValue:(NSString *)aString;

@end

@implementation NSTextField (AnimatedSetString)

- (void) setAnimatedStringValue:(NSString *)aString
{
    if ([[self stringValue] isEqual: aString])
    {
        return;
    }

    [NSAnimationContext runAnimationGroup:^(NSAnimationContext *context) {
        [context setDuration: 1.0];
        [context setTimingFunction: [CAMediaTimingFunction functionWithName: kCAMediaTimingFunctionEaseOut]];
        [self.animator setAlphaValue: 0.0];
    }
                        completionHandler:^{
        [self setStringValue: aString];
        [NSAnimationContext runAnimationGroup:^(NSAnimationContext *context) {
            [context setDuration: 1.0];
            [context setTimingFunction: [CAMediaTimingFunction functionWithName: kCAMediaTimingFunctionEaseIn]];
            [self.animator setAlphaValue: 1.0];
        } completionHandler: ^{}];
    }];
}

@end 
```

**注意：**要访问`CAMediaTimingFunction`此处用于使用此 API 指定非默认计时函数的类，您需要将其包含`QuartzCore.framework`在您的项目中。

也在[GitHub 上](https://github.com/ipmcc/SOExamples/tree/master/animation/AnimTextFieldUsingNSAnimationContext)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-12T21:36:01.447

对于 Swift 3，这里有两种方便`setText()`的`setAttributedText()`扩展方法，可以从一个文本淡入另一个文本：

```
import Cocoa

extension NSTextField {
    func setStringValue(_ newValue: String, animated: Bool = true, interval: TimeInterval = 0.7) {
        guard stringValue != newValue else { return }
        if animated {
            animate(change: { self.stringValue = newValue }, interval: interval)
        } else {
            stringValue = newValue
        }
    }

    func setAttributedStringValue(_ newValue: NSAttributedString, animated: Bool = true, interval: TimeInterval = 0.7) {
        guard attributedStringValue != newValue else { return }
        if animated {
            animate(change: { self.attributedStringValue = newValue }, interval: interval)
        }
        else {
            attributedStringValue = newValue
        }
    }

    private func animate(change: @escaping () -> Void, interval: TimeInterval) {
        NSAnimationContext.runAnimationGroup({ context in
            context.duration = interval / 2.0
            context.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseOut)
            animator().alphaValue = 0.0
        }, completionHandler: {
            change()
            NSAnimationContext.runAnimationGroup({ context in
                context.duration = interval / 2.0
                context.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseOut)
                self.animator().alphaValue = 1.0
            }, completionHandler: {})
        })
    }
} 
```

如下调用它们：

```
var stringTextField: NSTextField
var attributedStringTextField: NSTextField
...
stringTextField.setStringValue("New Text", animated: true)
...
let attributedString = NSMutableAttributedString(string: "New Attributed Text")
attributedString.addAttribute(...)
attributedStringTextField.setAttributedStringValue(attributedString, animated: true) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T15:58:50.530

我会刺一下：

我在这里发现了几个问题。首先，这整件事被设置为阻塞，所以它将阻塞主线程 5 秒。这将转换为用户作为 SPOD/挂起。您可能希望这是非阻塞的，但它需要一些额外的机器才能实现。

此外，您正在使用`NSAnimationEaseOut`淡出效果，该效果受已知错误的影响，它会导致动画向后运行。*（谷歌搜索“NSAnimationEaseOut backs”，你可以看到很多人都遇到了这个问题。）*我`NSAnimationEaseIn`在这个例子中使用了两条曲线。

我得到了这个用于非阻塞动画的简单示例。我不会说这是*理想*的方法（我发布了可以说更好的第二个答案），但它有效，并且有望成为您的起点。这是它的症结所在：

```
@interface NSTextField (AnimatedSetString)

- (void) setAnimatedStringValue:(NSString *)aString;

@end

@interface SOTextFieldAnimationDelegate : NSObject <NSAnimationDelegate>

- (id)initForSettingString: (NSString*)newString onTextField: (NSTextField*)tf;

@end

@implementation NSTextField (AnimatedSetString)

- (void) setAnimatedStringValue:(NSString *)aString
{
    if ([[self stringValue] isEqual: aString])
    {
        return;
    }

    [[[SOTextFieldAnimationDelegate alloc] initForSettingString: aString onTextField: self] autorelease];
}

@end

@implementation SOTextFieldAnimationDelegate
{
    NSString* _newString;
    NSAnimation* _fadeIn;
    NSAnimation* _fadeOut;
    NSTextField* _tf;
}

- (id)initForSettingString: (NSString*)newString onTextField: (NSTextField*)tf
{
    if (self = [super init])
    {
        _newString = [newString copy];
        _tf = [tf retain];

        [self retain]; // we'll autorelease ourselves when the animations are done.

        _fadeOut = [[NSViewAnimation alloc] initWithViewAnimations: @[ (@{
                                                                        NSViewAnimationTargetKey : tf ,
                                                                        NSViewAnimationEffectKey : NSViewAnimationFadeOutEffect})] ];
        [_fadeOut setDuration:2];
        [_fadeOut setAnimationCurve: NSAnimationEaseIn];
        [_fadeOut setAnimationBlockingMode:NSAnimationNonblocking];
        _fadeOut.delegate = self;

        _fadeIn = [[NSViewAnimation alloc] initWithViewAnimations: @[ (@{
                                                                        NSViewAnimationTargetKey : tf ,
                                                                        NSViewAnimationEffectKey : NSViewAnimationFadeInEffect})] ];
        [_fadeIn setDuration:3];
        [_fadeIn setAnimationCurve:NSAnimationEaseIn];
        [_fadeIn setAnimationBlockingMode:NSAnimationNonblocking];

        [_fadeOut startAnimation];
    }
    return self;
}

- (void)dealloc
{
    [_newString release];
    [_tf release];
    [_fadeOut release];
    [_fadeIn release];
    [super dealloc];
}

- (void)animationDidEnd:(NSAnimation*)animation
{
    if (_fadeOut == animation)
    {
        _fadeOut.delegate = nil;
        [_fadeOut release];
        _fadeOut = nil;

        _tf.hidden = YES;
        [_tf setStringValue: _newString];

        _fadeIn.delegate = self;
        [_fadeIn startAnimation];
    }
    else
    {
        _fadeIn.delegate = nil;
        [_fadeIn release];
        _fadeIn = nil;

        [self autorelease];
    }
}

@end 
```

如果有基于块的 API 那就太好了……这样就不必实现这个委托对象了。

我把整个项目放在了[GitHub 上](https://github.com/ipmcc/SOExamples/tree/master/animation/AnimTextField)。

# javascript - WinJS 中的音频分析

> ID：14174912
> 
> 赞同：1
> 
> 时间：2013-01-05T18:26:33.773
> 
> 标签：javascript, audio, signal-processing, windows-store-apps, audio-analysis

我一直在寻找我正在寻找[的 API](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)以及在线搜索（但 Windows Store 应用程序的示例非常稀缺）。我实质上要寻找的是在 Windows Store JavaScript 应用程序中分析音频的起点。例如，如果我正在创建一个简单的可视化工具，我需要检测当前播放音频中的各种“颠簸”。

有人可以在这里指出我正确的方向吗？这在 Windows 应用商店 JavaScript 应用程序中甚至是可能的吗？无论是所选歌曲的音频，还是设备当前正在播放的歌曲，还是麦克风上的音频……任何一种方式都可以满足我目前的需求。我只是在寻找从哪里开始分析音频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:45:04.503

GGG 的回应听起来对 WindowsRT 上的信号处理器的可能性持怀疑态度，我不得不承认我对 WindowsRT 也不太了解。但我们知道您将有可用的 javascript。听起来您对 Javascript 中的数字信号处理很感兴趣。如果你看看这些资源。他们可以让你指出正确的方向。

[https://github.com/corbanbrook/dsp.js](https://github.com/corbanbrook/dsp.js)

[http://www.bores.com/courses/intro/index.htm](http://www.bores.com/courses/intro/index.htm)

[http://arc.id.au/SpectrumAnalyser.html](http://arc.id.au/SpectrumAnalyser.html)

# iphone - NIAttributedLabel - 支持链接，同时保持控制点击功能

> ID：14174914
> 
> 赞同：2
> 
> 时间：2013-01-05T18:26:56.710
> 
> 标签：iphone, objective-c, ios, uilabel

我正在尝试使用`NIAttributedLabel`生成包含文本、链接并支持此行为的标签：

*   按链接将调用`- (void)attributedLabel:(NIAttributedLabel *)attributedLabel didSelectTextCheckingResult:(NSTextCheckingResult *)result atPoint:(CGPoint)point;`- 这工作正常。
*   按其他任何地方都会调用另一种方法 - 如果实施，上面的链接功能将丢失。

我不必使用`NIAttributedLabel`因此更好控制的建议也可以。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T15:31:55.310

我终于想通了；

1.  向文件 NIAttributedLabel.m 添加函数

    ```
    -(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
         // never return self. always return the result of [super hitTest..].
         // this takes userInteraction state, enabled, alpha values etc. into account
         UIView *hitResult = [super hitTest:point withEvent:event];

         // don't check for links if the event was handled by one of the subviews
         if (hitResult != self) {
             return hitResult;
         }

         if (self.explicitLinkLocations || self.detectedlinkLocations) {
             BOOL didHitLink = ([self linkAtPoint:point] != nil);
             if (!didHitLink) {
                 // not catch the touch if it didn't hit a link
                 return nil;
             }
         }
         return hitResult;
    } 
    ```

2.  删除所有touchXXX中的所有[super touch XXXX]功能；

然后，它起作用了！

# javascript - 添加项目以选择字段表单 - Jquery

> ID：14174919
> 
> 赞同：0
> 
> 时间：2013-01-05T18:27:55.923
> 
> 标签：javascript, jquery, html, forms, dom

我有一个带有选择字段的表单，后跟一个添加按钮。当用户单击添加时，我希望将选择的任何项目添加到数组中，以便我可以在表单中传递它

// 这是我的可见字段

```
<select id="contactsFollow" name="contactsFollow">
  <option value="1">option 1</option>
  <option value="2">option 2</option>
  <option value="3">option 3</option>
</select> 
<button type="button" class="btn">Add</button> 
```

我这样做的最佳方式是什么？我假设 jquery 会这样做，但我不知道如何实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:33:35.843

演示：http: [//jsfiddle.net/MsNKR/](http://jsfiddle.net/MsNKR/)

```
$('.btn').click(function () {
  $('#contactsFollow :selected').appendTo('#contactsFollowSelected');
}); 
```

或演示： http: [//jsfiddle.net/zvQgq/](http://jsfiddle.net/zvQgq/)如果您不想从第一次选择中删除选项

```
$('.btn').click(function () {
  $('#contactsFollow :selected').clone().appendTo('#contactsFollowSelected');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T18:35:08.677

我不知道您要做什么..但是将其添加到选择中并以表格形式传递对我来说毫无意义，因为您需要再次选择隐藏的选择框才能将其传递给表格...无论如何都是jquery对我来说是最好的选择..

这就是你如何做到的..

```
$('.btn').click(function () {
  $('#contactsFollow :selected').appendTo('#contactsFollowSelected');
}); 
```

* * *

**更新**

制作隐藏输入字段..

```
<input type="hidden" name="selectedoption" id="selectedoption" value="" /> 
```

**jQuery**

```
$('.btn').click(function () {
   var selected=$('#contactsFollow :selected').val();
   var hiddeninputValue=$('#selectedoption').val();
   if(hiddeninputValue==""){
      $('#selectedoption').val(selected);
   }else{
      $('#selectedoption').val(hiddeninputValue + ',' + selected);
   }
   $('#contactsFollow :selected').remove();
}); 
```

在将隐藏值插入到 db 之前，用 ',' 分隔隐藏值。

示例[小提琴](http://jsfiddle.net/MsNKR/1/)

# ember.js - 嵌入式 hasMany 属性访问给出“TypeError：无法调用未定义的方法 'hasOwnProperty'”

> ID：14174921
> 
> 赞同：6
> 
> 时间：2013-01-05T18:28:08.860
> 
> 标签：ember.js, ember-data

使用：

*   Ember[从 2013 年 1 月 3 日开始提交 a5d45f66e1）](https://github.com/emberjs/ember.js/commit/a5d45f66e1f71bb5eda417c688db0ea08b474903)
*   Ember-Data[从 2013 年 1 月 4 日起提交 508479dee7](https://github.com/emberjs/data/commit/508479dee764c2e9926487131a5a4814cfda1bf6)

与[这个问题 ('Unable to get hasMany association')](https://stackoverflow.com/questions/14170370/unable-to-get-hasmany-association)类似，我无法直接访问嵌入的 hasMany 记录，但可以通过模型的 content 属性看到它们。

对于 JSON：

```
{
   "ref_book_search":{
      "query":"har",
      "results":[
         {
            "publisher":{
               "name":"Pangolin",
               "created":"2012-09-10T18:38:27.259515",
               "id":"3d2028e4fb91181e1a6e012313914f821",
               "is_active":true,
               "main_url":null,
               "resource_uri":"/api/v1/ref_publisher/3d2028e4fb91181e1a6e012313914f821"
            },
            "genre":"romcom",
            "id":"cc671f00fc2711e1e41612313914f821",
            "resource_uri":"/api/v1/ref_book/cc671f00fc2711e1e41612313914f821",
            "title":"Harry Placeholder and the Goblet of PBR"
         },
         {
            "publisher":{
               "name":"Hoof & Mouth",
               "created":"2012-10-10T14:31:27.259515",
               "id":"3d200e9afb9811e1a27417383914f821",
               "is_active":true,
               "main_url":null,
               "resource_uri":"/api/v1/ref_publisher/3d200e9afb9811e1a27417383914f821"
            },
            "genre":"horror",
            "id":"cc621f08fc2711e1b81612313914e821",
            "resource_uri":"/api/v1/ref_book/cc621f08fc2711e1b81612313914e821",
            "title":"Harvey Weinstein Holiday Cookbook"
         }
      ]
   }
} 
```

和 app.js（注意 map 语句，这是上一个问题中建议的解决方案）：

```
var App = Ember.Application.create();

DS.RESTAdapter.configure("plurals", {"ref_book_search" : "ref_book_search"});

App.store = DS.Store.create({
  revision: 11,
  adapter: DS.RESTAdapter.create({
    bulkCommits: false,
    namespace: "api/v1"
  })
});

DS.RESTAdapter.map('App.RefBookSearch', {
  primaryKey: 'query'
});

App.store.adapter.serializer.map('App.RefBookSearch', {
  results: {embeddded: 'load'}
});

App.store.adapter.serializer.map('App.RefBook', {
  publisher: {embeddded: 'load'}
});

App.RefPublisher = DS.Model.extend({
  name : DS.attr('string'),
  created : DS.attr('date'),
  isActive : DS.attr('boolean'),
  mainUrl : DS.attr('string')
});

App.RefBook = DS.Model.extend({
  publisher: DS.belongsTo('App.RefPublisher'),
  title : DS.attr('string'),
  genre : DS.attr('string')
});

App.RefBookSearch = DS.Model.extend({
  query: DS.attr('string'),
  results: DS.hasMany('App.RefBook')
});

App.Router.map(function(match) {
  match('/').to('query'),
  match('/query/:ref_book_search_id').to('query')
});

App.QueryController = Ember.Controller.extend({
  bookSearch: null,
  results: []
});

App.QueryRoute = Ember.Route.extend({
  setupControllers: function(controller, refBookSearch) {
    controller.set('bookSearch', refBookSearch)
    controller.set('results', refBookSearch.get('results').content)
  }
})

App.initialize(); 
```

起初一切看起来都很好，就像其他海报一样：

```
search = App.RefBookSearch.find('ha')
search.get('query')
// => "ha"
results = search.get('results')
results.get('firstObject') instanceof App.RefBook
// => true 
```

但是之后：

```
results.forEach(function(result) { console.log(result.get('title')) })
// => TypeError: Cannot call method 'hasOwnProperty' of undefined 
```

通过内容访问显示数据存在：

```
results.content.forEach(function(result) { console.log(result.title) })
// => Harry Placeholder and the Goblet of PBR
// => Harvey Weinstein Holiday Cookbook 
```

现在，如果我再次尝试直接访问，我会得到一个稍微不同的错误：

```
results.forEach(function(result) { console.log(result.get('title')) })
// => undefined x 2 
```

这可能与几天前提交的[此错误](https://github.com/emberjs/data/pull/568)有关，也可能无关。

我觉得我在这里尝试了一切；我希望我只是缺少一些简单的东西。任何指针都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:09:14.630

这最终对我有用。似乎有一些操作顺序的敏感性，即在创建商店之前进行配置和映射。另请注意，adapter.map 是一个在序列化程序上执行映射的便利函数。

```
App.Adapter = DS.RESTAdapter.extend()

App.Adapter.configure("plurals", {
  "ref_book_search" : "ref_book_search",
  "ref_book" : "ref_book",
  "ref_publisher" : "ref_publisher"
});

App.Adapter.configure('App.RefBookSearch', {
  primaryKey: 'query'
});

App.Adapter.map('App.RefBookSearch', {
  results: {'embedded': 'load'}
});

App.Adapter.map('App.RefBook', {
  publisher: {'embedded': 'load'}
});

App.store = DS.Store.create({
  revision: 11,
  adapter: App.Adapter.create({
    bulkCommits: false,
    namespace: "api/v1"
  })
}); 
```

# html - 部分应用 CSS 规则

> ID：14174925
> 
> 赞同：3
> 
> 时间：2013-01-05T18:28:26.213
> 
> 标签：html, css, twitter-bootstrap, responsive-design, media-queries

我正在开发一个小型[vCards 网站](http://rolandgroza.me/)。我使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/) LESS 文件作为响应和网格的基础。

我之前遇到过一个问题，网格没有响应（[堆栈溢出问题](https://stackoverflow.com/questions/14110978/spans-dont-respond-to-the-bootstrap-responsive-properties)），根据答案，我意识到我必须将`responsive.less`文件与文件一起包含`bootstrap.less`才能获得响应功能。

在解决了这个问题之后，我仍然会得到更奇怪的行为：

```
<div class="headline-container pull-left">
    <div class="headline-inner">
        <h1>Roland Groza</h1>
        <h4>Frontend Developer</h4>
    </div>
</div> 
```

检查 DOM 并查找上述标记。现在，如果您开始将窗口大小调整到最小，在`410px`和之间`514px`，您会注意到标记将继承一些应该应用于 MQ 规则的 CSS `@media (max-width: 480px) { }`，但只是其中的一部分，就像 Twitter Bootstrap 一样该规则有一些CSS，仅在超出`410px`而不是超出时才应用。

以前是否有人遇到过相同的行为，如果是，是否有解决方法？

**编辑：**您应该寻找的 CSS 更改是标题上的字体大小和边距/填充：

```
<h1>Roland&nbsp;Groza</h1>
<h4>&lt;&nbsp;Frontend&nbsp;Developer&nbsp;/&gt;</h4> 
```

上面的文本将是一个有点奇怪的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:32:39.793

如果您正在谈论`<h1>`标题没有响应，您可以使用[slabText或使用](http://www.frequency-decoder.com/demo/slabText/)[wrapper](http://css-tricks.com/forums/discussion/comment/69290/#Comment_69290)修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:20:48.287

你的 html 不是你发布的，它是

```
<figcaption class="headline-container">
<div class="headline-inner">
<h1>Roland&nbsp;Groza</h1>
<h4>&lt;&nbsp;Frontend&nbsp;Developer&nbsp;/&gt;</h4>
</div>
</figcaption> 
```

而且我看不到任何声明 410px 的查询（您说的应该在“超过 410px ”时应用）

你能评论什么是应该应用的规则，而不是什么规则？

# php - 使用 TCPDF 和特定 div 作为内容创建 PDF

> ID：14174932
> 
> 赞同：0
> 
> 时间：2013-01-05T18:28:54.283
> 
> 标签：php, javascript, html, tcpdf

我正在尝试通过将收据从 HTML 代码转换为 PDF 来为 Web 应用程序创建收据，以便在应用程序完成后可以下载它。我试图通过将目标 div 的内容分配给表单中的隐藏输入字段来将代码发送到 PHP 文件。在最后按下按钮时，点击执行下面的 js 函数，以及 PHP 文件：

```
function print() {
    var elem = document.getElementById("receipt").innerHTML;
    document.getElementById("hiddenhtml").value = elem;
} 
```

以下是表格的大致轮廓：

```
<form method="post" action="htmlpdf.php" target="_blank">
    <div id="receipt">
        ------- CONTENT THAT I WANT IN THE PDF ----------
    </div>
    <input type="submit" onclick="print()" value="Print"/>
    <input id="hiddenhtml" type="hidden" value=""/>
</form> 
```

hiddenhtml 是一个隐藏的输入字段。按下打印按钮后，收据 div 的内容将添加到隐藏输入字段的值中。然后我尝试按如下方式传递此值：

```
$html = $_POST['hiddenhtml'];
$pdf->writeHTML($html, true, false, true, false, ''); 
```

在 writeHTML 函数中使用它。但是，会返回一个空白 PDF 文件。我想知道是否可以将目标 div 的内容作为 writeHTML 方法中的参数传递。div 没有外部样式，并且包含文档中所有兼容的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:16:15.930

您需要在文档中添加一个页面来呈现您的 html，然后您需要实际输出您的页面。请参阅[示例 pdf 页面](http://www.tcpdf.org/examples/example_006.phps)。您的代码应如下所示：-

```
$pdf = new TCPDF();
$pdf->AddPage('P');
$pdf->writeHTML($html, true, false, true, false, '');
$pdf->Output(); 
```

我做了一些进一步的测试并创建了这个代码： -

```
if(isset($_POST['hidden'])){
    $pdf = new TCPDF();
    $pdf->AddPage('P');
    $html = $_POST['hidden'];
    $pdf->writeHTML($html);
    $pdf->Output();
}
?>
<form method="POST">
    <input name="hidden" type="hidden" value="
        <div>
            <h1>Receipt</h1>
            <p>Some stuff</p>
            <p>More stuff</p>
        </div>"/>
    <input type="submit" value="Submit"/>
</form> 
```

其中，在提交时，给了我这个输出： -

![在此处输入图像描述](../Images/38cbc14b6e971860d534a89728e7a91d.png)

如您所见，一个漂亮的 pdf 页面，其中呈现了我的 html。

我建议您将代码简化为这样简单的代码，以帮助排除故障。一旦你有了这个工作，你就可以增加复杂性。

# c# - 在回发期间将字符串添加到列表

> ID：14174933
> 
> 赞同：1
> 
> 时间：2013-01-05T18:28:55.247
> 
> 标签：c#, asp.net, list, updatepanel

我有这样的东西......

```
switch (PostBackControlParentId)
            {
                case "":
                    SearchResults.InnerText = "Sorry. There was an Error.";
                    break;
                case "GamesTabUpdatePanel":
                    Var_Games_Platform = PlatformDropdown.SelectedValue;
                    Var_Games_Rating = Convert.ToDecimal(Games_RatingTextBox.Text);
                    Var_Games_Developer = DeveloperDropdown.SelectedValue;
                    Var_Games_Publisher = PublisherDropdown.SelectedValue;
                    Var_Games_Year = Convert.ToInt16(YearDropdown.SelectedItem.Value);
                    if (Games_OnlyAvailableCheckBox.Checked)
                    {
                        Var_Games_AvailableOnly = true;
                    }

                    foreach (ListItem Genre in Games_GenreList.Items)
                    {
                        if (Genre.Selected)
                        {
                            SearchResults.InnerText = SearchResults.InnerText + Genre.ToString();
                            Var_Games_Genres.Add(Genre.Value.ToString());**///The line of interest........**
                        }
                    }
                    //Get Query Data..
                    //Pass to SQL
                    //Get DataSet
                    //WriteStuff.
                    break;
                case "MoviesTabUpdatePanel":
                    break;
                case "EpisodesTabUpdatePanel":
                    break;
                case "TVShowsTabUpdatePanel":
                    break;
            } 
```

现在，当我不这样做时

Var_Games_Genres.Add(Genre.Value.ToString()); **///感兴趣的线......**

UpdatePanel 完全显示了我想要的内容..（名为 Games_GenreList 的复选框列表中的选定游戏流派列表。但是当我添加以下行时 Var_Games_Genres.Add(Genre.Value.ToString()); **///感兴趣的行.. ......** 它不会改变更新面板上的任何东西。我也在谷歌浏览器的控制台上得到这个......

```
Uncaught Sys.WebForms.PageRequestManagerServerErrorException: Sys.WebForms.PageRequestManagerServerErrorException: Object reference not set to an instance of an object. ScriptResource.axd:847
Error$create ScriptResource.axd:847
PageRequestManager$_createPageRequestManagerServerError ScriptResource.axd:766
PageRequestManager$_parseDelta ScriptResource.axd:1653
PageRequestManager$_onFormSubmitCompleted ScriptResource.axd:1414
(anonymous function) ScriptResource.axd:628
(anonymous function) ScriptResource.axd:4338
raise ScriptResource.axd:7429
WebRequest$completed ScriptResource.axd:7433
XMLHttpExecutor._onReadyStateChange ScriptResource.axd:6857 
```

我真的不知道出了什么问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:40:39.180

尝试

```
List Var_Games_Genres = new List(); 
```

在开关盒之前

# c++ - 热传导 2D Fourier libmesh / deal.II

> ID：14174940
> 
> 赞同：0
> 
> 时间：2013-01-05T18:29:34.237
> 
> 标签：c++, math, physics, transfer

有没有用傅立叶定律作为有限元主方程并使用 libmesh 或 deal.II 库解决二维热传导问题的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T22:19:26.627

二维热方程是解决热传导问题的唯一方法。大量使用有限差分、有限元和边界元方法的示例。所有这些都需要某种网格。你想申请哪一个？

好的，现在我们知道您想使用 FEA 解决二维热传导问题。这是一个三步过程：

1.  预处理（为您的几何体创建网格，应用材料属性、边界条件和初始条件（如果是瞬态的或非线性的）。
2.  执行分析（制定和求解节点和元素未知数的矩阵方程）。
3.  后期处理（结果的图形显示是最好的，因为图片价值数千字）。

您希望使用哪个求解器？你的目标是写一个还是只使用一个？你想要开源吗？它必须用 C++ 编写吗？（不太可能。到目前为止，FORTRAN 是此类程序最常用的语言。）

你的问题大吗？我猜不是，但是您可能会对大规模并行化感兴趣：

[http://www.cas.usf.edu/~cconnor/parallel/2dheat/2dheat.html](http://www.cas.usf.edu/~cconnor/parallel/2dheat/2dheat.html)

[FEMHub](http://www.femhub.org/)喜欢 Python，可能是因为 NumPy 和 SciPy 库很好。

这是一个列出 Java 的开源库的[站点。](http://www.mechanicalengineeringblog.com/1757-finite-element-analysis-fea-list-of-fea-softwares-list-of-open-source-softwares-list-of-commercial-softwares/)

# google-chrome - manifest.json 无效，但不是本地

> ID：14174946
> 
> 赞同：0
> 
> 时间：2013-01-05T18:30:24.753
> 
> 标签：google-chrome, google-chrome-extension, manifest

我对我的 Chrome 扩展进行了一些更改，我通过更改扩展的版本号更新了 manifest.json，最后，我将它上传到了 Chrome 网上应用店。

[这](https://chrome.google.com/webstore/detail/previeweet/ioknjbncflfoefodkjodmddcpahnhkgh)是网址。

现在，如果您尝试安装它，您将收到“无效清单”错误。这里的问题是我在本地解压版本或将扩展上传到 Chrome 网上应用店时都没有收到此错误。

[这](http://pastie.org/pastes/5626485/text)是 manifest.json

# backbone.js - Backbone.js 集合中的模型名称列表

> ID：14174947
> 
> 赞同：0
> 
> 时间：2013-01-05T18:30:32.757
> 
> 标签：backbone.js

我正在尝试学习一些backbone.js，但我遇到了一些我认为应该很容易弄清楚的东西。如何获取集合中所有模型名称的列表？

我什至从主干教程中复制+粘贴：

```
var Song = Backbone.Model.extend({
    defaults: {
        name: "Not specified",
        artist: "Not specified"
    },
    initialize: function(){
        console.log("Music is the answer");
    }
});

var Album = Backbone.Collection.extend({
    model: Song
});

var song1 = new Song({ name: "How Bizarre", artist: "OMC" });
var song2 = new Song({ name: "Sexual Healing", artist: "Marvin Gaye" });
var song3 = new Song({ name: "Talk It Over In Bed", artist: "OMC" });

var myAlbum = new Album([ song1, song2, song3]);
console.log( myAlbum.models ); // [song1, song2, song3] 
```

问题是 - 这并没有在控制台中给我模型名称：console.log(myAlbum.models); // [song1, song2, song3]
我得到 [child, child, child, child] - 我如何获得实际名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:35:37.473

你需要属性`pluck`。`name`

```
myAlbum.pluck('name'); 
```

没有办法得到这样的数组：

```
['song1', 'song2', 'song3'] 
```

因为变量的名称在程序逻辑中不可用。

### 更新

当教程这样写时：

```
console.log( myAlbum.models ); // [song1, song2, song3] 
```

这意味着数组`models`与您要编写的一样`[song1, song2, song3]`，而不是您要编写的`['song1', 'song2', 'song3']`。报价是区分因素。

# jquery-ui - 如何在 jQuery UI 手风琴中使用多个选项？

> ID：14174949
> 
> 赞同：2
> 
> 时间：2013-01-05T18:30:51.500
> 
> 标签：jquery-ui, jquery-ui-accordion

所以，我对 javascript 和 jquery 还是很陌生。我正在使用 jquery ui 制作手风琴导航栏。当我刚刚设置了 heightStyle 时它工作得很好，但后来我尝试添加 collapsible: true 并且它从手风琴变成了只是标题和无序列表。

```
<script type="text/javascript" >
$(function() {
    $( "#accordion" ).accordion({
        collapsible: true
        heightStyle: "content"
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:58:43.847

您在`options`对象的属性之间缺少逗号。这会导致您的 Javascript 出现语法错误，从而阻止代码运行，从而使标记保持不变，如您所描述的那样。

正确的语法是：

```
<script type="text/javascript" >
     $(function() {
         $( "#accordion" ).accordion({
             collapsible: true,
             heightStyle: "content"
         });
     });
 </script> 
```

另外，请注意您通常可以在浏览器的错误控制台中调试 JS 错误。例如，在 Chrome 和 Firefox 中，可以使用 ++ 启动调试控制台，或者`Ctrl`如果您使用的是带有`Shift`++的Mac 。`J``Cmd``Shift``J`

# actionscript-3 - 仅查看 Flash AS3 中容器边界内的内容？

> ID：14174959
> 
> 赞同：2
> 
> 时间：2013-01-05T18:32:24.593
> 
> 标签：actionscript-3, flash, containers

我不记得如何在其父级边界内“隐藏”一个影片剪辑，以便我可以使用滚动条，并且只有在向下滚动时才能看到容器内的内容？我的容器是一个小矩形，包含不同的图片，但我们可以看到所有图片，即使它们超出了父动画剪辑的范围。

你知道怎么做吗？不是滚动系统，只是如何：只看到容器边界内的内容？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T18:46:42.893

那将是掩蔽，可以通过[时间线层](http://help.adobe.com/en_US/flash/cs/using/WS9388626D-B940-43f3-87BB-7C3159F5EDE4.html)或[通过代码](http://www.flashandmath.com/howtos/mask/)来完成。

# android - 将视图放入操作栏

> ID：14174960
> 
> 赞同：0
> 
> 时间：2013-01-05T18:32:29.390
> 
> 标签：android, view, android-actionbar, custom-view

我正在将自定义视图集成到操作栏中。目前我成功地让视图显示。然而，一些视图出现在操作栏边界的边缘之外。

有什么办法可以设置操作栏来调整它的大小以适应视图的整个内容，或者是使视图的各个组件稍微变小的唯一解决方案......

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:52:28.843

您可以从操作栏主题样式调整 ActionBar 的高度，或者定义从父主题继承的自定义主题，并添加“高度”属性。（我不记得它是怎么叫的）

# c# - ElGamal C# 实现

> ID：14174966
> 
> 赞同：1
> 
> 时间：2013-01-05T18:33:12.993
> 
> 标签：c#, .net, key, elgamal

我想实现 ElGamal 加密。我的学校工作需要这个，但是当我想要解密时，最后一步总是 0，因为**(b/Math.Pow(a,x))%primenumber**总是小于 1。

这是密钥生成：

```
public void GenerateKey() {
    this.x = 3;
    this.prvocislo = PrimeGen.findPrimes(29).Max(); //prime number
    this.g = this.prvocislo % 12;
    this.y = Convert.ToInt32(Math.Pow(this.g, this.x) % this.prvocislo);
    this.k = 23;//601} 
```

这是加密功能：

```
public string Encrypt(string word) {
            List<string> words = new List<string>();

            words = PrimeGen.SplitToArray(word, 2);

            string encrypted="";

            string sss = PrimeGen.GetStringFromBytes(PrimeGen.GetBytesFromInt(PrimeGen.GetIntFromBytes(PrimeGen.GetBytesFromString("ah")))); //returns ah so conversion works
            foreach (string s in words)
            {
                int a = Convert.ToInt32(Math.Pow(g,k) % prvocislo);
                int b = Convert.ToInt32((Math.Pow(y, k) * PrimeGen.GetIntFromBytes(PrimeGen.GetBytesFromString(s))) % prvocislo);
                string aS = PrimeGen.GetStringFromBytes(PrimeGen.INT2LE(a + posun));
                string bS = PrimeGen.GetStringFromBytes(PrimeGen.INT2LE(b + posun));
                encrypted = encrypted + aS + bS;
            }
            return encrypted;

        } 
```

这是我的解密功能：

```
 public string Decrypt(string ElgamalEncrypted) {
            string decrypted = "";
            for (int i = 0; i < ElgamalEncrypted.Length; i = i + 2) {
                string aS = ElgamalEncrypted.Substring(i, 2);
                string bS = ElgamalEncrypted.Substring(i + 2, 2);
                int a = PrimeGen.GetIntFromBytes(PrimeGen.GetBytesFromString(aS)) - posun;
                int b = PrimeGen.GetIntFromBytes(PrimeGen.GetBytesFromString(bS)) - posun;
                if(b==0) b=1;
                if (a == 0) a = 1;
                decrypted=decrypted+PrimeGen.GetStringFromBytes(PrimeGen.GetBytesFromInt(Convert.ToInt32(((b/Math.Pow(a,x))%prvocislo))));

            }
            return decrypted;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:25:39.433

您正在使用`Math.Pow(base, exponent) % modulus`模幂运算。那是行不通的，因为浮点数不能代表加密货币需要的大整数。改为使用`System.Numerics.BigInteger.ModPow(base, exponent, modulus)`。

除法可能不起作用，因为您使用整数除法，而不是与右侧的[模乘法逆相乘。](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)

# android - 具有上一页和下一页预览的页面查看器

> ID：14174967
> 
> 赞同：1
> 
> 时间：2013-01-05T18:33:19.937
> 
> 标签：android, android-layout

在我的 android 应用程序中，我想实现代码以显示下一个和上一个活动的预览，例如圆形图片库。

我试图更详细地解释这应该如何工作。我在屏幕中央看到实际活动的活动，在屏幕左侧是前一个活动，在屏幕右侧是下一个活动。所以在屏幕上我们应该会看到类似下图的内容。

![在此处输入图像描述](../Images/0cee4f23afcea638f2aa80effc442730.png)

有谁知道是否有可能实现这种行为？

提前感谢西莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:07:29.087

我发现的唯一类似的库是：

[http://www.androidviews.net/2012/10/android-coverflow/](http://www.androidviews.net/2012/10/android-coverflow/)

[https://github.com/fry15/uk.co.jasonfry.android.tools](https://github.com/fry15/uk.co.jasonfry.android.tools)（第三个演示叫做“smaller pages”）。

# asio - 如何确定哪个频道是左、右等？

> ID：14174968
> 
> 赞同：0
> 
> 时间：2013-01-05T18:33:29.370
> 
> 标签：asio, audio, jvm-languages

所以，我决定在我的程序中使用 JAsioHost ( [https://github.com/mhroth/jasiohost](https://github.com/mhroth/jasiohost) ) 通过 ASIO 输出音频。

与 ASIO 的交互是通过`AsioDriverListener`接口实例完成的。`void bufferSwitch(long sampleTime, long samplePosition, Set<AsioChannel> activeChannels)`每次想要播放新样本时，ASIO 主机都会调用它的方法。如果我想输出单声道声音，我只需在`activeChannels`. 但是，如果我想让事情变得更复杂，因此需要知道确切的通道配置怎么办？

在简单的测试存根程序 ( [http://pastebin.com/sC870VJR](http://pastebin.com/sC870VJR) ) 中，该`activeChannels`集合打印如下：

```
#{#<AsioChannel Output Channel 0: HD Audio output 1, ASIOSTInt32LSB, group 0, inactive>
  #<AsioChannel Output Channel 1: HD Audio output 2, ASIOSTInt32LSB, group 0, inactive>} 
```

所以我可以知道每个频道的索引。问题是 - 如何确定哪个频道是真正的左，右，中等等？..或者没有办法，我应该把它留给用户，谁会手动告诉他们的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:38:39.900

ASIO 的目的是为多声道音频接口提供高性能抽象。

在它设计的领域——也就是说专业音频应用——通道数通常远高于两个，并且任何一对通道是否是立体声总线——以及哪个通道是哪个——实际上取决于用户如何连接他们接口的输入和输出。

ASIO API 不提供检索通道路由信息的方法 - 例如名称标签或它们连接到的位置。甚至 - 通常情况下 - 音频接口的控制面板软件确实具有此功能。
这一直是 ASIO 长期存在的缺陷。

使用一组通道（例如立体声或 5.1 总线）纯粹是惯例。至少在立体声应用中，左声道通常是顺序对中编号较低的声道。

如果您使用的是 MacOSX，CoreAudio 确实提供了名称通道和含义音频路由数据。由于 ASIO 作为应用程序和 CoreAudio API 之间的薄包装器，您可以获得它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:55:08.330

您可以编写一些代码，仅将音频输出到一个通道（例如通道 1），然后听播放哪一侧（假设您的装备设置正确）。对每个通道执行相同的操作（假设不止两个……如果只有两个，您可以停止测试一个通道）中央通道与您在问题中提到的“单声道”通道相同. 干杯

# java - Android线程，这是正确的吗？

> ID：14174969
> 
> 赞同：0
> 
> 时间：2013-01-05T18:33:31.810
> 
> 标签：java, android, multithreading

所以Android不允许网络操作在主线程上运行，这很公平。我在另一个线程上运行此代码时遇到了一些麻烦。你能看看我的代码，看看这是否可行/正确吗？谢谢您，感谢您提供的任何帮助。

```
public class StartActivity extends Activity implements Runnable {
    public static final int timeout = 3000;
    private boolean boolConStatus = false;

    public static final String TAG = "StartActivity";
    public static final String url = "serverIP";

    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        Log.d(TAG, "onCreated with Bundle: " + bundle);
        setContentView(R.layout.activity_start);
    }

    public void run() {
        boolean boolConStatus; 
        boolConStatus = this.isConnected();
        toaster();
    }

    public boolean getConStatus() {
        return boolConStatus;
    }

    public void toaster() {
                boolConStatus = this.isConnected();
                if (boolConStatus == true) {
                    Toast.makeText(getApplicationContext(),
                            "Connected to Server", Toast.LENGTH_LONG);
                } else {
                    Toast.makeText(getApplicationContext(),
                            "All has failed", Toast.LENGTH_LONG);
                }
}
        public boolean isConnected() {
            try {
                ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
                NetworkInfo ni = cm.getActiveNetworkInfo();

                if (ni != null && ni.isConnected()) {
                    URL server = new URL(url);
                    HttpURLConnection huc = (HttpURLConnection) server.openConnection();
                    huc.setRequestProperty("Connection", "close");
                    huc.setConnectTimeout(timeout);
                    huc.connect();

                    if (huc.getResponseCode() == 200) {
                        return true;
                    } else {
                        Log.d("NOT CONNECTED TO SERVER", "NOT CONNECTED TO SERVER");
                        return false;
                    }
                } else {
                    Log.d("NO INTERNET CONNECTION", "NO INTERNET CONNECTION");
                    return false;
                }
                } catch (Exception e) {
                    Log.d(TAG, e.getLocalizedMessage(), e);
                e.printStackTrace();
            }
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:43:44.120

没有线程，Runnable 本身就什么都不是。尝试将此添加到您的 onCreate() 或 onResume() 中：

```
 new Thread(this).start(); 
```

然后可能必须阅读此[https://developer.android.com/reference/java/lang/Thread.html](https://developer.android.com/reference/java/lang/Thread.html)以便您知道应该如何做......在你的情况下，也许[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)的使用是合适的...... .但是您必须首先了解线程的工作原理。

# android - 通知内容标题被截断

> ID：14174972
> 
> 赞同：0
> 
> 时间：2013-01-05T18:34:15.617
> 
> 标签：android, notifications

我从这个[链接](http://eliasbland.wordpress.com/2011/03/11/an-example-of-how-to-run-a-background-task-and-report-progress-in-the-status-bar-using-asynctask-on-android/)了解在 android 状态栏中创建通知。但是，如果我的内容标题太长，单词就会被截断。我可以知道如何在通知的内容标题中启用“弹跳”效果吗？即：如果用户在通知抽屉中，并且内容标题过长，它会自动缓慢滚动到后面，全部在 1 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:06:21.070

这已经是 a 的股票行为`Notification`。`View`保存`Notification`标题和文本的 实现，`android:ellipsize="marquee"`因此如果内容的宽度超过`View`. 此效果仅在通知被聚焦时才会发生。

# c# - 类型在 Visual Studio 中没有突出显示它们通常的绿色

> ID：14174978
> 
> 赞同：3
> 
> 时间：2013-01-05T18:34:42.207
> 
> 标签：c#, .net, visual-studio, visual-studio-2012, visual-studio-express

我熟悉以前版本的 Visual Studio，而新的 Express Edition（即 Desktop Express 2012）缺少一些熟悉的突出显示过程。

在遇到问题并按照[此处](https://stackoverflow.com/questions/11988077/plain-c-sharp-editor-in-visual-studio-2012-no-intellisense-no-indentation-no)概述的说明进行操作后，我已成功恢复智能感知、自动缩进和蓝色关键字，但类、结构和其他类型不再突出显示它们熟悉的绿色。

问题是，我能否将这种熟悉的绿色类型重新突出显示，还是在 Visual Studio Desktop Express 2012 中有意省略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T13:16:39.320

我认为您需要在 Visual Studio 中检查用户类型的字体和颜色设置（工具-> 环境-> 字体和颜色）。

# html - 网站音频停止加载

> ID：14174979
> 
> 赞同：0
> 
> 时间：2013-01-05T18:34:50.233
> 
> 标签：html, audio, mp3, loading, mediaelement

我在这里迫切需要帮助......我有一个为我的教会制作的网站，我们有你可以听的完整课程。这是一个例子：

[http://tetelestai.org/media/audio/default.html?series=the_4th_g&lesson=the_4th_g_296&part=&properName=The%204th%20G&lessonNum=296&lessonName=Lesson%20296&date=&verses=](http://tetelestai.org/media/audio/default.html?series=the_4th_g&lesson=the_4th_g_296&part=&properName=The%204th%20G&lessonNum=296&lessonName=Lesson%20296&date=&verses=)

问题是课程在几分钟后停止缓冲。我在这里做了很多故障排除，发现问题不在于音频播放器（我已经实现了几个不同的 jQuery、HTML5 和 Flash 播放器来尝试解决这个问题。它也不是文件本身......他们当我在本地播放它们时，所有的工作都是端到端的。

此外，在我启动该网站之前，大多数课程都运行良好。

所以我唯一的结论是它必须与文件加载到站点的方式有关......并且有些东西告诉它停止加载。

顺便说一句，我还试图摆脱音频播放器的动态生成，并使其成为绝对参考......这也不起作用。

无论如何，这是代码......我真的可以*在*这里使用一些帮助：

```
//Header
<code><script src="../../mediaelement/build/jquery.js"></script> 
```

```
//Body
<div id="aud">
                    <audio controls="control" preload="none" src="../../assets/audio/the_4th_g/the_4th_g_296.mp3" type="audio/mp3" />
                </div>

                <script>
                jQuery(document).ready(function($) {
                    $('#version').html( mejs.version);

                    // declare audio player with jQuery
                    $('audio').mediaelementplayer({audioWidth: 380, success: function(me) {  $('#audio-type').html( me.pluginType); }});

                });
                </script> 
```

注意：我列出的代码是我最近的代码，与链接中的代码不同。

# wcf - 对 WCF 和多个端点感到困惑

> ID：14174983
> 
> 赞同：1
> 
> 时间：2013-01-05T18:35:14.137
> 
> 标签：wcf

下面是一个配置文件示例。有很多可用的绑定，例如

```
**basicHttpBinding,netTcpBinding,wsDualHttpBinding** basicHttpBinding,netTcpBinding,wsDualHttpBinding 
```

我是 WCF 的新手，脑子里有很多困惑，那些是----

那么人们如何从客户端创建代理来连接 wcf 服务。自然他们都使用 mex 端点地址**http://YourServer/Services/MyService/mex**

如果一个 mex 端点就足够了，那么客户端如何指示他的客户端应用程序使用**netTcpBinding 或 wsDualHttpBinding**连接到 wcf 服务。

请与我分享以下知识：1）如果我使用客户端的 mex 端点地址创建代理，那么我的应用程序将使用哪些绑定来连接到 wcf 服务？

2) 我如何使用**netTcpBinding 或 wsDualHttpBinding**从客户端连接到 wcf 服务是否有任何使用代码的技巧？

寻找深入的讨论。谢谢

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="YourNamespace.YourService" behaviorConfiguration="Default">
        <endpoint name="Default" 
            address="http://YourServer/Services/MyService" 
            binding="basicHttpBinding" 
            contract="YourNamespace.IYourService"/>
        <endpoint name="TCP" 
            address="net.tcp://YourServer/ServicesTCP/MyService" 
            binding="netTcpBinding" 
            contract="YourNamespace.IYourService"/>
        <endpoint name="mex" 
            address="http://YourServer/Services/MyService/mex" 
            binding="mexHttpBinding" 
            contract="IMetadataExchange"/>
        <endpoint name="Dual" 
            address="http://YourServer/Services/MyService/Dual" 
            binding="wsDualHttpBinding" 
            clientBaseAddress="http://localhost:8001/client/"
            contract="YourNamespace.IYourDualService"/>
      </service>
    </services>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:08:55.680

如果您有具有多个端点的服务，则创建的代理包含服务上公开的每种合同类型的单独客户端类。如果您有多个具有相同合同的端点，则这些端点在客户端的配置文件中定义，并且每个端点都有一个指定的名称。当您想使用某些特定绑定调用服务时，您只需将端点配置的名称传递给代理构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:36:15.420

> 如何使用 netTcpBinding 或 wsDualHttpBinding 从客户端连接到 wcf 服务是否有任何可用代码的技巧？

这可以通过命名所有配置并将这些名称之一传递给客户端代理来完成：

```
public class SomeServiceClient : ClientBase<ISomeService>, ISomeService
{

    public SomeServiceClient() { }

    public SomeServiceClient(string endpointConfigurationName) :
        base(endpointConfigurationName) { }

    public void Do()
    {
        Channel.Do();
    }
} 
```

这样，您可以更改端点（以及绑定）运行时。对于一个工作示例，请查看 (https://www.box.com/shared/n4unt3mtjx) **Peter Bernhardt**的一个很好的实现(http://peterbernhardt.wordpress.com/2008/09/17/security-and-identity -in-wcf-part-4-authorizing-custom-claims/)

# asp.net-mvc-4 - ASP.NET MVC 4 中的路由

> ID：14174985
> 
> 赞同：0
> 
> 时间：2013-01-05T18:35:16.350
> 
> 标签：asp.net-mvc-4, routing

我有一个 ASP.NET MVC 4 应用程序。我正在尝试在 RouteConfig.cs 文件中设置我的路线。本质上，我有两个我目前感兴趣的 URL。这些 URL 是：

```
/App
/App/Auth 
```

我的文件结构如下所示：

```
/Views
  App
    Index.cshtml
    Auth
      Index.cshtml
  Docs
    Index.cshtml
  Index.cshtml 
```

在我的 RouteConfig.cs 文件中，我有以下内容：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
  "Index",
  "Index",
  new { controller = "Views", action = "Index" }
);

routes.MapRoute(
  "Dashboard", // Route name
  "{controller}/auth/{action}/{id}", // URL with parameters
  new { controller = "App", action = "Index", id = UrlParameter.Optional } 
);

routes.MapRoute(
  name: "Default",
  url: "{controller}/{action}/{id}",
  defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

奇怪的是，当我访问 /App/Auth 时，它会将我带到 /App。对于我的生活，我无法弄清楚为什么。有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:43:27.023

将路线更改为：

```
routes.MapRoute(
  "Dashboard", // Route name
  "App/auth/{action}/{id}", // URL with parameters
  new { controller = "App", action = "Index", id = UrlParameter.Optional } 
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:46:38.283

该应用程序正在按照您的要求进行操作。您的第一条路线转到控制器“App”和操作“Index”。将文件夹 Auth 移动到与 App 相同的级别，然后将您的路由更改为：

```
routes.MapRoute(
  "Dashboard", // Route name
  "app/auth/{action}/{id}", // URL with parameters
  new { controller = "Auth", action = "Index", id = UrlParameter.Optional } 
); 
```

**一个更好的解决方案**，忘记 Auth 控制器，只需在 App 文件夹中创建一个视图 auth.cshtml 并在 App 控制器中创建一个操作“Auth”，然后您可以完全删除路由，/app/auth 将由默认路由。

# c++ - 如何定义一个宏来定义一个调用自身的函数？

> ID：14174990
> 
> 赞同：3
> 
> 时间：2013-01-05T18:35:37.003
> 
> 标签：c++, macros, c-preprocessor

我想制作一个宏来定义一个函数，该函数在对象列表上调用该函数。它不一定是预处理器宏，但它应该可以工作。

我想写这样的东西：

```
CALL_ON_ALL(doSomething(int arg1, bool arg2)) 
```

我希望它产生这个：

```
void doSomething(int arg1, bool arg2) {
    for (int i = 0; i < delegates.size(); i++)
        delegates[i]->doSomething(arg1, arg2);
} 
```

* * *

我有一些有用的东西：

```
#define CALL_ON_ALL(defSig, callSig) \
void defSig { \
    for (int i = 0; i < delegates.size(); i++) \
        delegates[i]->callSig; \
} 
```

问题是我必须像这样分别编写定义签名和调用签名：

```
CALL_ON_ALL(doSomething(int arg1, bool arg2), doSomething(arg1, arg2)) 
```

有一个更好的方法吗？

## 编辑

它不一定是预处理器宏。任何有效的东西都会做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T18:51:18.740

尝试用单独的参数制作签名（对于两个参数）：

```
#define CALL_ON_ALL2(name, argType1, argName1, argType2, argName2) \
void name( argType1 argName1 , argType2 argName2 ) { \
    for (int i = 0; i < delegates.size(); i++) \
        delegates[0]->name( argName1 , argName2 ); \
} 
```

您可以将其复制到其他参数编号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T18:51:38.617

这是高阶函数的一个很好的例子，即以另一个函数作为参数的函数。在这种情况下，要在每个元素上调用的函数。

`f`下面定义了一个调用每个元素的高阶函数。可变参数模板 ( `args...`) 需要 C++11。如果您没有可用的 C++11，则可以`typename ...Args`在函数签名中删除并使用固定参数类型。

```
template<typename Delegates, typename Function, typename... Args>
void callOnAll(Delegates delegates, Function f, Args... args) {
    for (int i = 0; i < delegates.size(); i++)
        f(delegates[i], args...);
} 
```

现在您可以使用以下语法调用它：

```
callOnAll(delegates, std::mem_fun<void,Delegate>(&Delegate::doSomething), 42); 
```

该`std::mem_fun`事物为您要为每个委托调用的成员函数创建一个临时函数对象。您还可以应用其他函数，将指针作为第一个参数。例如这个小的 lambda 函数（也仅从 C++11 开始）：

```
callOnAll(delegates, [](Delegate *d){
    d->doSomething(42);
}); 
```

这几乎相同，只是另一种语法。

在此处查看示例：

*   [http://ideone.com/jrozqr](http://ideone.com/jrozqr) ( `std::mem_fun`)
*   [http://ideone.com/vOI4me（lambda](http://ideone.com/vOI4me)函数）

* * *

此代码的一个稍微不同的版本使用基于范围而不是基于索引的 for 循环，这看起来更简洁（也需要 C++11）：

```
template<typename Delegates, typename Function, typename... Args>
void callOnAll(Delegates delegates, Function f, Args... args) {
    for(auto d : delegates)
        f(d, args...);
} 
```

* * *

供您参考，有[`std::for_each`](http://www.cplusplus.com/reference/algorithm/for_each/)，它几乎可以满足您的需求，但功能性更强，因为它本身不接受函数参数，但您提供了一个 lambda 函数/仿函数，它只接受一个指向实例。将以下代码与上面的代码与 lambda 函数进行比较：

```
std::for_each(delegates.begin(), delegates.end(), [](Delegate *d){
    d->doSomething(42);
}); 
```

唯一的区别是我们必须传递`.begin()`和`.end()`迭代器，而不仅仅是一个容器实例，比如`delegates`. [但是，标准库中还定义](http://www.cplusplus.com/reference/algorithm/)了很多其他算法，值得一看！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T20:22:18.737

我认为这就是你要找的：

```
#define _NUM_ARGS2(X,X64,X63,X62,X61,X60,X59,X58,X57,X56,X55,X54,X53,X52,X51,X50,X49,X48,X47,X46,X45,X44,X43,X42,X41,X40,X39,X38,X37,X36,X35,X34,X33,X32,X31,X30,X29,X28,X27,X26,X25,X24,X23,X22,X21,X20,X19,X18,X17,X16,X15,X14,X13,X12,X11,X10,X9,X8,X7,X6,X5,X4,X3,X2,X1,N,...) N
#define NUM_ARGS(...) _NUM_ARGS2(0, ##__VA_ARGS__ ,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0)

#define MAKE_PARAMS_0()
#define MAKE_PARAMS_1(type) type arg1
#define MAKE_PARAMS_2(type1, type2) type1 arg1, type2 arg2
#define MAKE_PARAMS_3(type1, type2, type3) type1 arg1, type2 arg2, type3 arg3
//.. add as many MAKE_PARAMS_* as you need

#define MAKE_PARAMS_N(N, ...) MAKE_PARAMS_##N(__VA_ARGS__)
#define MAKE_PARAMS_FORCE_N(N, ...) MAKE_PARAMS_N(N, __VA_ARGS__)
#define MAKE_PARAMS(...) MAKE_PARAMS_FORCE_N(NUM_ARGS(__VA_ARGS__), __VA_ARGS__)

#define MAKE_ARGS_0()
#define MAKE_ARGS_1(type) arg1
#define MAKE_ARGS_2(t1, t2) arg1, arg2
#define MAKE_ARGS_3(t1, t2, t3) arg1, arg2, arg3
//.. add as many MAKE_ARGS_* as you have MAKE_PARAMS_*

#define MAKE_ARGS_N(N, ...) MAKE_ARGS_##N(__VA_ARGS__)
#define MAKE_ARGS_FORCE_N(N, ...) MAKE_ARGS_N(N, __VA_ARGS__)
#define MAKE_ARGS(...) MAKE_ARGS_FORCE_N(NUM_ARGS(__VA_ARGS__), __VA_ARGS__)

#define CALL_ON_ALL(fun, ...) \
    void fun(MAKE_PARAMS(__VA_ARGS__)) { \
        for (int i = 0; i < delegates.size(); i++) \
            delegates[i]->fun(MAKE_ARGS(__VA_ARGS__)); \
    }

CALL_ON_ALL(doSomething, int, bool) 
```

这将产生

```
void doSomething(int arg1, bool arg2) { for (int i = 0; i < delegates.size(); i++) delegates[i]->doSomething(arg1, arg2); } 
```

您可以在此处找到所有这些“混乱”如何工作的更多信息：[Variadic recursive preprocessor macros - is it possible?](https://stackoverflow.com/questions/824639/variadic-recursive-preprocessor-macros-is-it-possible)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T19:26:58.467

在 C 中，有可变参数宏，我想这在这里会很方便。尽管它们通常不是 C++ 的一部分（细微差别），但大多数实现它们的编译器并不将它们限制为 C。

在 C++ 中，您最好使用模板，尤其是 C++11 中的可变参数模板（以及完美转发）；但是我会尝试使用预处理器，为了乐趣和~~利润~~嗡嗡声......

如果我们想要一个真正的 C++03 预处理器解决方案，那么我们将调用 Boost.Preprocessor。真正的关键是预处理器序列：一个可以随意操作的无界（理论上*）元素列表，它让我们足够接近可变参数宏的便利性。

但在我们深入研究之前，我们应该注意到参数的名称并不重要，只有它们的类型才是真正重要的。

因此，我提出以下语法：

```
CALL_ON_ALL(dosomething, (int)(bool))

// (int)(bool) is a preprocessor sequence in Boost.Preprocessor 
```

内脏有点微妙，我不确定第一次尝试是否正确，它可能应该是这样的：

```
#define CALL_ON_ALL(Name_, Args_)                                               \
    void Name_ ( BOOST_PP_ENUM( BOOST_PP_SEQ_SIZE(Args_), ARG_ENUM, Args_) ) {  \
        for (size_t i = 0, max = delegates.size(); i != max; ++i) {             \
            delegates[i]->                                                      \
                Name_ ( BOOST_PP_ENUM_PARAMS( BOOST_PP_SEQ_SIZE(Args_), arg );  \
        }                                                                       \
    }

#define ARG_ENUM(z, n, data)                                                    \
    BOOST_PP_SEQ_ELEM(data, n) BOOST_PP_CAT(arg, n) 
```

注意：复杂度不是太高，有 N 个调用`BOOST_PP_SEQ_ELEM`本身是线性的，导致二次复杂度。我找不到`BOOST_PP_SEQ_*`可以枚举参数*并*在它们之间放置逗号的宏。

*在实践中，文档中有一个包含近百个元素的演示，希望它就足够了；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T01:36:11.477

首先，在您的类型周围放置括号，以便预处理器可以解析它。所以你会这样调用`CALL_ON_ALL`：

```
CALL_ON_ALL(doSomething, (int) arg1, (bool) arg2) 
```

以下是一些宏，它们将检索类型并剥离类型（您需要命名它们，我离开命名空间只是为了演示）：

```
#define EAT(...)
#define REM(...) __VA_ARGS__
#define STRIP(x) EAT x
#define PAIR(x) REM x 
```

这些宏是这样工作的。当您编写`STRIP((int) arg1)`时，它将扩展为`arg1`. 当你写`PAIR((int) arg1)`它时，它会扩展为`int arg1`. 接下来，您要做的是将这些宏应用于传入的每个参数，所以这里有一个简单的`APPLY`宏，可以让您对最多 8 个参数执行此操作：

```
/* This counts the number of args */
#define NARGS_SEQ(_1,_2,_3,_4,_5,_6,_7,_8,N,...) N
#define NARGS(...) NARGS_SEQ(__VA_ARGS__, 8, 7, 6, 5, 4, 3, 2, 1)

/* This will let macros expand before concating them */
#define PRIMITIVE_CAT(x, y) x ## y
#define CAT(x, y) PRIMITIVE_CAT(x, y)

/* This will call a macro on each argument passed in */
#define APPLY(macro, ...) CAT(APPLY_, NARGS(__VA_ARGS__))(macro, __VA_ARGS__)
#define APPLY_1(m, x1) m(x1)
#define APPLY_2(m, x1, x2) m(x1), m(x2)
#define APPLY_3(m, x1, x2, x3) m(x1), m(x2), m(x3)
#define APPLY_4(m, x1, x2, x3, x4) m(x1), m(x2), m(x3), m(x4)
#define APPLY_5(m, x1, x2, x3, x4, x5) m(x1), m(x2), m(x3), m(x4), m(x5)
#define APPLY_6(m, x1, x2, x3, x4, x5, x6) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6)
#define APPLY_7(m, x1, x2, x3, x4, x5, x6, x7) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7)
#define APPLY_8(m, x1, x2, x3, x4, x5, x6, x7, x8) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8) 
```

现在介绍如何编写`CALL_ON_ALL`宏：

```
#define CALL_ON_ALL(func, ...) \
void func(APPLY(PAIR, __VA_ARGS__)) { \
    for (int i = 0; i < delegates.size(); i++) \
        delegates[i]->func(APPLY(STRIP, __VA_ARGS__)); \
} 
```

注意：这可能在 MSVC 中不起作用，因为它们有一个错误的预处理器（尽管有解决方法）。

# c - 如何在 ANSI C 中定义 NaN 值？

> ID：14174991
> 
> 赞同：9
> 
> 时间：2013-01-05T18:35:39.503
> 
> 标签：c, floating-point, nan, c89

> **可能重复：**
> [C 中的 NaN 文字？](https://stackoverflow.com/questions/5714131/nan-literal-in-c)

我正在用 ANSI C 编写一个函数，它接收两个数字作为参数。参数是`int`或`float`类型。根据我的过滤器，该数字可能有效也可能无效。我如何返回一些意味着失败的值？返回类型是`float`. 我首先想到的是`NaN`抽象类型。但我不知道如何在 ANSI C 中表示它。

（对不起我的英语不好。英语不是我的母语）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T18:41:34.967

NaN 不是“抽象类型”。它是一个浮点数据的值。

如果您所说的“ANSI C”是指标准 C（这是该术语的实际含义，尽管它有一个），请包含`<math.h>`并使用`NAN`宏来产生一个 nan，并`isnan(x)`检测一个。

如果您所说的“ANSI C”实际上是指已被长期替换的 C89 标准（有些人打算这样做，即使它在形式上并不正确），您可以使用 生成 NaN 值`0./0.`，并使用`x != x`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T18:39:12.853

> 根据我的“过滤器，数字可能无效的问题那么我如何返回一些值意味着失败？

您可以使用以下命令，而不是将数字与 NaN 进行比较：

```
if (x != x)  // x is NaN 
```

如评论中所述，您可以使用此表达式在 C89`0.f / 0.f`中生成NaN 值。`float`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T18:48:01.527

你不能这样做，你需要返回两个变量，一个用于值，一个用于失败标志。

例如，您可以设置事物，以便在正常操作的情况下该函数将返回**true**。**失败时为假**(NaN)。

存储结果的变量作为参数通过引用传递，并在成功的情况下保存返回值。

```
BOOL myFunction(int inInt, float inFloat, float *outResult)
{
    /*
        PROCESSING HERE
    */

    // in case of failure

    if( /* failure condition here */ )
    {
        *outResult = 0;
        return false;
    }

    *outResult = /* your result */

    return true;
}

// how to use the function

int a;
float b;
float result;
BOOL success;

success = myFunction(a, b, &result);

if(success)
{
    // do whatever with your "result"
}
else
{
    // NaN
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-05T18:46:06.333

有这样的东西

```
if(your_variable != your_variable)
{
    return 0; //catch 0 as the failure returned value
}
else
{
    //your code
} 
```

# android - 没有图标的安卓应用

> ID：14174993
> 
> 赞同：3
> 
> 时间：2013-01-05T18:36:08.623
> 
> 标签：android

> **可能重复：**
> [没有应用程序图标的应用程序](https://stackoverflow.com/questions/6426389/application-without-app-icon)

我的问题非常直截了当。我想创建一个没有任何图标的 Android 应用程序。
我的应用程序只需要两个将在启动时启动的服务。

是否可以 ？

我问这个问题是因为我了解了这个应用程序**SMS tracker Agent**。这是[一个链接](https://play.google.com/store/apps/details?id=com.gizmoquip.smstracker&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5naXptb3F1aXAuc21zdHJhY2tlciJd)！这个应用程序实际上是这样做的，所以我认为这是可能的。
我在具有 Android 版本 4.0.3 的三星 Galaxy Note 中安装了这个应用程序，我只能在设置中安装的应用程序列表中看到应用程序图标，而在主应用程序图标屏幕中看不到。所以请任何人都可以告诉我如何做到这一点或任何其他方式。
我的问题与这个[较旧的问题](https://stackoverflow.com/questions/6426389/application-without-app-icon)有关，但我没有得到我想要的。

我是这个网站的新手。所以，如果我做错了什么，请给我建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T18:39:07.413

是的，这是可能的。要让图标显示在设备应用程序抽屉中，您可以在 manifest.xml 中使用此意图过滤器，您可以省略：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

# spring - 我应该如何在同一个 tomcat 上部署多个 webapps（使用相同的第三方 jars）以使用最少的 RAM

> ID：14174995
> 
> 赞同：4
> 
> 时间：2013-01-05T18:36:14.030
> 
> 标签：spring, hibernate, tomcat, web-applications, classloader

我将有多个网络应用程序。所有 webapps 都是基于 java 并使用 Spring/hibernate 等。如果我将所有第三方 jar 放在每个 war 文件中（对应于每个 webapp）；会有巨大的内存占用！

当第三方 jars（如 spring/hibernate ）在所有 webapps 中很常见时；使内存使用量最小的最佳方法是什么？我能想到的一种选择是将这些第三方 jars 放在 Tomcat/lib 中，以便它们可以在多个 webapps 之间共享。

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T18:42:57.427

在我看来，您将内存 (RAM) 与磁盘存储混淆了。

如果您希望最大限度地减少磁盘空间的使用，那么可以，您可以将 jar 文件放在共享位置 - 请参阅[http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment上的文档.html#Shared_Library_Files](http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html#Shared_Library_Files)

这不会对内存使用做任何事情——每个应用程序都将在自己的类加载器下加载它需要的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:54:17.633

是的，Tomcat 的 Common 类加载器只会将这些 jars 加载到 Tomcat 的 common lib 中一次，因为所有 webapps 共享相同的 common 类加载器。但是由于各种问题，有些罐子无法工作。所以你必须尝试。

# javascript - 如何从节点控制台查看 html？

> ID：14174999
> 
> 赞同：1
> 
> 时间：2013-01-05T18:36:31.593
> 
> 标签：javascript, html, node.js, user-interface

我有一个转储对象的 javascript 代码，从[https://github.com/johan/node-dump](https://github.com/johan/node-dump)下载它。

不幸的是，它打印了一个 HTML，这不是很有帮助，因为我是从节点控制台工作的。如何将此 html 输出发送到某些 HTML 渲染引擎以直观地显示它？这可以是能够在窗口中显示 HTML 片段的浏览器或节点插件。

我在 Windows 7 上。

**编辑**

伙计们，我不需要美化html。我想渲染它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:45:52.987

您是否考虑过仅使用 console.log() 或 console.dir() 在控制台中以人类可读的格式打印您的对象？