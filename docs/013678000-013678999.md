# StackOverflow 问答 13678000-13678999

# json - PHP 请求从 WSO2 数据服务服务器获取数据

> ID：13678001
> 
> 赞同：0
> 
> 时间：2012-12-03T06:04:25.190
> 
> 标签：json, wso2, wso2carbon, wso2dss

我已成功设置 WSO2 数据服务服务器并创建了一些以 XML 格式获取数据的程序。我可以在 DSS 管理面板中看到它们。为了做到这一点，我已经完成了 DSS 向导，它允许我添加新的数据源并创建一些程序。没关系。

我想知道的是如何将 PHP 与 DDS 连接起来？换句话说，我怎样才能发出 PHP 请求，以便从 DSS 将数据提取到我的 PHP 脚本？是否可以将数据作为 JSON 提取？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T19:36:47.047

这个简单的脚本可能会让您了解如何连接到您的服务器：

```
<?php
$client = new SoapClient("http://*yourDSserver*:*yourPort*/services/yourDSservice?wsdl",array('trace' => 1));

try { 
  $info = $client->__soapCall("op_name",array(*--your request data goes here--*));

} catch (SoapFault $fault) { 
  print($fault); 
} 

print_r($info); 
```

将 yourDSserver、yourDSport、yourDSservice 以及 op_name 更改为适合您安装的值。

还有几行可能对调试有用：

```
echo "\nRequest:\n" . $client->__getLastRequest() . "\n";
echo "\nResponse:\n" . $client->__getLastResponse() . "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:04:01.663

要从 PHP 访问数据服务，有很多方法。第一个是使用 PHP 的 SOAP 客户端来访问数据服务。服务的服务仪表板中提到了数据服务端点 URL，供您用作 SOAP 端点。此外，如果您想以 REST 方式访问它，您可以创建数据服务“资源”，您可以在其中使用配置的访问创建的 HTTP 路径。JSON 也受支持，您可以将其用作如何执行[此操作的参考。](http://lafernando.com/2011/11/27/json-data-services-using-wso2-dss/)此外，基本上如果该方法不适合，您可以使用 WSO2 ESB 来调解 JSON 请求以删除 XML 命名空间等，并以您想要的方式获取 JSON 有效负载。[此处](http://wso2.org/project/esb/java/4.0.3/docs/samples/advanced_mediation_samples.html#Sample44)显示了如何执行此操作的示例。

干杯，安佳娜。

# c# - WCF 服务未在非开发机器上运行

> ID：13678004
> 
> 赞同：1
> 
> 时间：2012-12-03T06:04:48.323
> 
> 标签：c#, wcf, windows-services, metadata

我已经使用了这个 MSDN 教程，了解如何使用 Windows 服务作为主机使 WCF 与 net.tcp 绑定一起工作：

[http://msdn.microsoft.com/en-us/library/ff649818.aspx](http://msdn.microsoft.com/en-us/library/ff649818.aspx)

由于回调，我需要 nettcp，并且不想将 IIS 用作主机。

本教程在我的计算机上 100% 有效，并且我使用我自己的项目名称和方法等完成了第二个版本，这在我的计算机上也可以 100% 有效 - 无论是从 VS2010 运行还是当我使用 InstallUtil 并作为服务运行时.

我下载了 Juval Lowy 的元数据浏览器并在我的计算机上运行它，它找到了该服务。（来自`www.idesign.net`）

我不能让它在另一台计算机上工作 - 即生产服务器。我还尝试在备用电脑上安装，看看这是否是与服务器相关的问题。但是，它们都没有 VS2010，这无关紧要，因为我正在作为 Windows 服务运行。

我从我的 vs2010 项目中复制`/bin/Release`文件夹并将其放在另一台计算机上名为`myapp`. 我`InstallUtil`在服务 exe 上运行（就像我在计算机上所做的那样），它安装得很好。我还更改了文件夹的权限以授予 NETWORK SERVICE 完全权限。

然后我在控制面板、管理服务、服务中启动该服务。我已经登录到数据库并验证服务进程是否启动。我不知道 WCF 托管服务是否启动。

在我的计算机上，每当 WCF 托管服务启动时，我都会收到一个气球通知和一个可以查看 mex 地址等的窗口。当我安装到其他计算机上时，不会发生这种情况。

我已经在目标机器上安装了 Juval Lowy 的元数据浏览器，但它使用与我在计算机上完全相同的地址声明无效地址（即引用本地主机而不是 IP 地址）。

我认为我在其他计算机上安装的方法有问题。

相关代码为：

```
if (myServiceHost != null)
            myServiceHost.Close();

myServiceHost = new ServiceHost(typeof(MyAppService));
myServiceHost.Open(); 
```

和`app.config`：

```
<system.serviceModel>
<services>
   <service behaviorConfiguration="netTCPBehavior" name="MyAppDll.MyAppDll">
      <endpoint 
          address="" 
          binding="netTcpBinding" bindingConfiguration=""
          contract="MyAppDll.IMyAppDll">
         <identity>
            <dns value="localhost" />
         </identity>
      </endpoint>
      <endpoint 
          address="mex" 
          binding="mexTcpBinding" bindingConfiguration=""
          contract="IMetadataExchange" />
         <host>
            <baseAddresses>
               <add baseAddress="net.tcp://localhost:7200/MyAppDll" />
            </baseAddresses>
         </host>
      </endpoint>
   </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="netTCPBehavior">
      <serviceMetadata httpGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:27:01.167

您可能必须启用[Net.TCP 端口共享服务](http://msdn.microsoft.com/en-us/library/ms733925.aspx)。

> Windows Communication Foundation (WCF) 使用称为 Net.TCP 端口共享服务的 Windows 服务来促进跨多个进程共享 TCP 端口。此服务作为 WCF 的一部分安装，但作为安全预防措施，默认情况下未启用该服务，因此必须在首次使用之前手动启用。

# linux - 如何将构建目标从构建目录复制到父目录？

> ID：13678009
> 
> 赞同：0
> 
> 时间：2012-12-03T06:05:13.240
> 
> 标签：linux, cmake

我的目标是在名为 example1 的构建目录中构建的，但资源位于构建之外的数据目录中，即 ../ 我正在使用它来将目标从构建中复制出来：

```
file(REMOVE ${CMAKE_CURRENT_BINARY_DIR}/../example1) #remove old one
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/build/example1 DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/../) 
```

它们中的每一行单独工作，但是当我将它们放在一起时，它们不起作用，example1 无法更新到与构建目录中的相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:12:57.260

如果你的目标被命名为“Example1”，你应该能够做到：

```
add_custom_command(TARGET Example1 POST_BUILD
                   COMMAND ${CMAKE_COMMAND} -E copy
                       $<TARGET_FILE:Example1> ${CMAKE_CURRENT_BINARY_DIR}/..) 
```

但是，如果这会将您的 exe 从构建树复制到源树中，最好考虑通过将所需资源从源树复制到构建树来保持源树清洁。

# mysql - 我的 mysql 查询中的错误

> ID：13678012
> 
> 赞同：0
> 
> 时间：2012-12-03T06:05:25.480
> 
> 标签：mysql, join

我有一个从不同表中获取数据的查询

```
SELECT p.USER_NAME,count(*) as total, pi.UpdatedDate FROM purchase p JOIN purchasedissues pi on pi.PurchaseId=p.PURCHASE_ID WHERE pi.UpdatedDate>DATE_SUB(NOW(), INTERVAL 1 HOUR) AND p.PURCHASE_DATE=CURDATE() AND p.USER_NAME NOT IN (SELECT username from tbl_test_user) GROUP BY p.USER_NAME having count(*)>2 
```

但我有一个错误

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'SELECT p.USER_NAME,count(*) as total, pi.UpdatedDate FROM purchase p JOIN pur' 附近使用正确的语法

我想不通。请任何人帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:18:44.820

试试这个查询！不确定它是否有效，因为我的机器中没有设置环境，但它可能会给你一个测试它的本质:)

```
SELECT p.USER_NAME,count(*) as total FROM purchase p JOIN purchasedissues pi on pi.PurchaseId=p.PURCHASE_ID WHERE pi.UpdatedDate>DATE_SUB(NOW(), INTERVAL 1 HOUR) AND p.PURCHASE_DATE=CURDATE() AND p.USER_NAME NOT IN (SELECT username from tbl_test_user) GROUP BY p.USER_NAME  having total > 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:08:36.897

你的查询没问题。该错误表明它在您的附近`SELECT p.USER_NAME,...`。这通常发生在您执行多个查询而不终止它时。前任，

```
SELECT * FROM tableName
SELECT p.USER_NAME,count(*) as total, pi.UpdatedDate FROM purchase.... 
```

所以要更正它，只需添加一个分隔符（*通常如果不更改，它是分号*）来结束您的第一个查询

```
SELECT * FROM tableName; -- <== this one
SELECT p.USER_NAME,count(*) as total, pi.UpdatedDate FROM purchase.... 
```

# android - 我想在我的 android 应用程序中单击按钮时显示存储在 sdcard 中的文件。我怎么做？

> ID：13678015
> 
> 赞同：0
> 
> 时间：2012-12-03T06:05:36.003
> 
> 标签：android, sd-card

我想在我的 android 应用程序中单击按钮时显示存储在 sdcard 中的文件。我怎么做？我搜索了很多浏览 sdcard 的文件，我可以在我的 android Tab 应用程序中选择附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:09:09.703

有一个开源项目，它为您提供了一个完整的文件选择器，并且可以使用意图调用

[https://github.com/iPaulPro/aFileChooser](https://github.com/iPaulPro/aFileChooser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:56:27.907

请参阅[此](http://www.dreamincode.net/forums/topic/190013-creating-simple-file-chooser/)链接。它的文件选择器示例，您将获得当前目录。

现在您已经这样做了，就像触摸列表项一样，您必须获取该文档路径，这对于发送到服务器或其他用途很有用。确保如果您从 sd 卡中删除该文件，那么它将无法正常工作。

# encoding - Perforce & Jenkins 更改评论编码被宠坏了

> ID：13678018
> 
> 赞同：7
> 
> 时间：2012-12-03T06:06:03.523
> 
> 标签：encoding, jenkins, perforce

我们有用于源代码控制的[Perforce](http://www.perforce.com/)和用于持续集成的[Jenkins 。](http://jenkins-ci.org/)它们是使用[JENKINS Perforce Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Perforce+Plugin)集成的。[带有P4Eclipse（Eclipse 的 Perforce 插件）的](http://www.perforce.com/product/components/eclipse_plugin)Eclipse IDE，用于开发/提交。

问题是更改评论（通常用中文写）被宠坏了。（有中文注释的源编译没有这个问题。）

是什么原因？怎么修？

Perforce Server 和 JENKINS 插件编码设置在哪里？

![更改评论被宠坏了](../Images/8d842d95449000faa377b950343d90f6.png)

2014 年 8 月更新

在浏览`/jenkins/systemInfo`Jenkins 的页面时，我注意到该属性`file.encoding`的值为 CP1252（参见[Windows-1252](https://en.wikipedia.org/wiki/Windows-1252)），因为 Jenkins 在 Windows 上运行。因为这些属性实际上是 Tomcat 的属性，所以我们使用[Change Tomcat's Charset.defaultCharset in windows](https://stackoverflow.com/questions/11342884/change-tomcats-charset-defaultcharset-in-windows)中的选项之一设置 UTF-8 。Tomcat重启后我们得到了`file.encoding UTF8`，但它并没有解决问题。

再一次，Sources 是 UTF-8 格式，到达 Jenkins 服务器后没有问题。这是关于提交评论。

更新 2：

它与浏览器无关，因为 Java 代码中的注释正确显示。
我们仔细观察发现，Jenkins 将每个作业的更改注释存储在 xml 文件中。并且在那个文件编码中已经被破坏了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:16:00.600

您是否尝试过更改浏览器本身的页面编码？

取决于浏览器，但在 Firefox 上，您将单击查看 -> 字符编码 -> 中文

# windows-8 - 必应地图信息框中的超链接会破坏 Windows 8 应用导航状态

> ID：13678022
> 
> 赞同：2
> 
> 时间：2012-12-03T06:06:18.703
> 
> 标签：windows-8, bing-maps, winjs, infobox

我的 WinJS Windows 8 应用程序的页面上有 Bing 地图。

地图有几个图钉，每个图钉都有自己的信息框。单击图钉时，它会正确显示信息框及其内容。内容包含链接到 Windows 8 应用程序中不同页面的超链接。应用程序可以正确导航到此页面，但是后退按钮停止工作，并且也无法访问应用程序栏。（导航到页面通常可以正常工作）

我认为页面导航方式和导航器记录状态的方式出了点问题。我是新手，所以它也可能只是一个愚蠢的问题。

这是页面的 .js 文件中的代码：

```
 // For an introduction to the Page Control template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232511
(function () {
    "use strict";

    WinJS.UI.Pages.define("/pages/testBing/testBing.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.
        ready: function (element, options) {
            // TODO: Initialize the page here.
            Microsoft.Maps.loadModule('Microsoft.Maps.Map', { callback: initMap });
        }
    });

})();

var pinInfobox = null;

function initMap() {
    try {
        var mapOptions =
        {
            credentials: "credentials",
            center: new Microsoft.Maps.Location(-33.961176, 22.420985),
            mapTypeId: Microsoft.Maps.MapTypeId.road,
            zoom: 5
        };
        var mapDiv = document.querySelector("#mapdiv");
        map = new Microsoft.Maps.Map(mapDiv, mapOptions);
        centerPosition();
    }
    catch (e) {
        var md = new Windows.UI.Popups.MessageDialog(e.message);
        md.showAsync();
    }
}

function addPushPin(location) {
    map.entities.clear();
    var pushpin = new Microsoft.Maps.Pushpin(location, null);

    pinInfobox = new Microsoft.Maps.Infobox(new Microsoft.Maps.Location(0, 0), { title: 'My Pushpin', visible: true, description: "<a href='/pages/player/player.html'>Profile</a>" });
    Microsoft.Maps.Events.addHandler(pushpin, 'click', displayInfobox);
    Microsoft.Maps.Events.addHandler(map, 'viewchange', hideInfobox);

    map.entities.push(pushpin);
    map.entities.push(pinInfobox);
}

function hideInfobox(e) {
    pinInfobox.setOptions({ visible: false });
}

function centerPosition() {
    var geolocator = new Windows.Devices.Geolocation.Geolocator();
    geolocator.getGeopositionAsync().then(function (loc) {
        var mapCenter = map.getCenter();
        mapCenter.latitude = loc.coordinate.latitude;
        mapCenter.longitude = loc.coordinate.longitude;
        map.setView({ center: mapCenter, zoom: 15 });
        addPushPin(mapCenter);

    });
}

function displayInfobox(e) {
    pinInfobox.setOptions({ title: e.target.Title, innerHTML: e.target.Description, visible: true, offset: new Microsoft.Maps.Point(0, 25) });
    pinInfobox.setLocation(e.target.getLocation());
} 
```

HTML只有以下内容

```
 <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!--Bing Mapps Reference -->
     <script type="text/javascript" src="ms-appx:///Bing.Maps.JavaScript//js/veapicore.js"></script>

    <link href="testBing.css" rel="stylesheet" />
    <script src="testBing.js"></script>
</head>
<body>
    <div class="testBing fragment">
        <header aria-label="Header content" role="banner">
            <button class="win-backbutton" aria-label="Back" disabled type="button"></button>
            <h1 class="titlearea win-type-ellipsis">
                <span class="pagetitle">Welcome to testBing</span>
            </h1>
        </header>
        <section aria-label="Main content" role="main">
            <div id="mapdiv"></div>
        </section>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:42:57.047

Dominic Hopton 的评论是正确的： foo.html 作为整个页面加载，而不是作为应用导航过程的一部分。如果链接应该进行应用导航（而不是在外部 Web 浏览器中打开），您可以将此代码添加到页面的就绪函数中，以将链接点击转换为导航事件。

```
WinJS.Utilities.query("a").listen("click", function (e) {
    e.preventDefault();
    nav.navigate(e.target.href);
}); 
```

如果您有一些应该导航的链接和一些应该在浏览器中打开的链接，您可以修改查询。例如，如果可以将 CSS 类添加到应在 Web 浏览器中打开的链接，则可以将查询更改为：

```
WinJS.Utilities.query("a:not(.defaultClick)") 
```

您还可以修改查询以检查链接的 href 属性以检查“http”，如下所示：

```
WinJS.Utilities.query("a:not([href^=http])") 
```

我还没有测试最后一个示例，但是如果它像我怀疑的那样工作，它将有一个以“http”开头的链接（因此包括“https”）行为正常，而所有具有相对 URL 或包 URL 将被转换为导航事件。

我不建议您盲目地这样做，但根据您的应用程序，这个简单的快捷方式可能会改变行为以符合您的期望。

# java - 如何从 My_SQL 数据库中获取数据到 android

> ID：13678026
> 
> 赞同：1
> 
> 时间：2012-12-03T06:06:57.423
> 
> 标签：java, android, mysql, android-layout

在我的应用程序中，我想在 android 应用程序 TextViews 上显示保存在 MY_SQL 中的数据。我该怎么做

我的 android 应用程序布局是：

```
 <LinearLayout 
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:gravity="center">

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/cus_name"
        android:gravity="center"
        android:clickable="true"
        android:focusable="true"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/cus_name_txta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge"/>

    </LinearLayout>

   <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="center">

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/contact_no"
        android:clickable="true"
        android:focusable="true"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView 
        android:id="@+id/contact_no_txta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center" />

   </LinearLayout>

    <LinearLayout 
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:orientation="vertical"
       android:gravity="center">

    <TextView
             android:id="@+id/textView4"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/ticket_no"
             android:clickable="true"
             android:focusable="true"
             android:gravity="center"
             android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView 
        android:id="@+id/ticket_no_txta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge" />

   <requestFocus />

    </LinearLayout>

   <LinearLayout
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:gravity="center">

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:focusable="true"
        android:gravity="center"
        android:text="@string/task_detail"
        android:textAppearance="?android:attr/textAppearanceLarge" />

         <TextView
             android:id="@+id/task_detail_txt"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:gravity="center"/>

    </LinearLayout>

     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:gravity="center"
         android:orientation="vertical" >

         <TextView
             android:id="@+id/textView6"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:gravity="center"
             android:text="@string/attend_by"
             android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView 
        android:id="@+id/attend_by_txta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

我的Java代码是：

```
public static String attend_by_txt;

TextView cus_name_txt, contact_no_txt, ticket_no_txt;
TextView task_detail_txt;
 EditText attend_by_txtbx;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_task);

    this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

    cus_name_txt = (TextView)findViewById(R.id.cus_name_txta);

           contact_no_txt = (TextView)findViewById(R.id.contact_no_txta);

    task_detail_txt = (TextView)findViewById(R.id.task_detail_txt); 
```

当我点击 customer_name、Contact_No、ticket_No、Task_detail 时，我想要那个。它显示保存在 MY_SQL 中的数据。请指导我如何从数据库中检索数据并将其显示在 android 中。我会非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:20:30.960

这取决于您希望您的数据库是本地的还是存储在远程服务器上。

**如果它是本地**的，您必须将您的 MYSQL 数据库转换为 SQLite 数据库，因为这是 Android 支持的数据库。

有关说明，请参见此处：

[将 MySQL 转换为 SQLite](https://stackoverflow.com/questions/3890518/convert-mysql-to-sqlite)

然后，您可以使用本机 android 方法访问它。请参阅此处的数据库教程：

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

**如果它托管在远程服务器上**，那么您必须创建 REST API（通过使用 PHP、Ruby、Python 等语言编写服务器端代码），您的 Android 应用程序可以使用这些 API 从数据库中获取数据。

还有其他选项可以避免使用 REST API。看：

[如何从 MySql 服务器到 Android 应用程序？](https://stackoverflow.com/questions/2898823/get-data-to-android-app-from-mysql-server)

有关 REST 的初学者教程，请参见此处：

[http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/)

# java - 不幸的是，Callisto 已停止工作

> ID：13678027
> 
> 赞同：0
> 
> 时间：2012-12-03T06:07:06.780
> 
> 标签：java, android, xml, eclipse, nullpointerexception

因此，当我尝试在模拟器中运行我的代码时，应用程序后台弹出然后关闭给我对话框，“不幸的是，Callisto 已停止工作”我不知道出了什么问题，除了它给了我一个空指针异常（行49) 但第 49 行没有任何内容

XML

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/callisto_heading" />

<Button
    android:id="@+id/bClasses"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Classes" 
    android:layout_gravity="center"
    android:onClick=""
   />

<Button
    android:id="@+id/bSettings"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Settings" 
    android:layout_gravity="center" 
    android:onClick=""  
 />

</LinearLayout> 
```

Java包android.callisto.com；

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;

public class CallistoActivity extends Activity {
/** Called when the activity is first created. */
 Button settings_button;
 Button classes_button;
 Button home_button;
 CheckBox notif_cb;
 CheckBox math_cb;
 CheckBox science_cb;
 CheckBox ss_cb;
 CheckBox english_cb;
 CheckBox language_cb;

 boolean notif,math,science,english,ss,language;

 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //settings layout
    notif_cb = (CheckBox) findViewById(R.id.cbNotif);
    math_cb = (CheckBox) findViewById(R.id.cbMath);
    science_cb = (CheckBox) findViewById(R.id.cbScience);
    ss_cb = (CheckBox) findViewById(R.id.cbSS);
    english_cb = (CheckBox) findViewById(R.id.cbEnglish);
    language_cb = (CheckBox) findViewById(R.id.cbLang);
    home_button = (Button) findViewById(R.id.bHome);

    notif = true;
    math = true;
    science = true;
    english = true;
    ss = true;
    language = true;

    home_button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            setContentView(R.layout.main);

        }
    });        

        //notifications

    //main layout
    settings_button = (Button) findViewById(R.id.bSettings);
    classes_button = (Button) findViewById(R.id.bClasses);

    settings_button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            setContentView(R.layout.settings);
        }
    });
} 
```

}

仅供参考，该应用程序昨晚正在加载。感谢您的帮助，请记住我是 Android 编程新手。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:13:58.573

问题就在这里

```
 home_button = (Button) findViewById(R.id.bHome); 
```

在布局文件中没有`bHome`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:01:05.797

问题可能是，您正在使用 setContentView() 来显示不同的屏幕。你不应该使用这种方法来改变屏幕，你应该为此使用不同的活动。

通常，您只在每个活动的 oncreate 中设置 contentView ONCE。

您的 R.layout.main 布局可能不包含“主页”按钮，但 r.layout.settings 布局包含。

首先，您在这一行加载主布局：`setContentView(R.layout.main);`但由于此布局文件不包含主页按钮，`findViewById(R.id.bHome);`因此将返回`null`. 之后，在您的情况下，对该返回值调用方法 `home_button.setOnClickListener();`将导致 NullPointerException。

你应该做的是：

为您的主布局创建一个活动：

```
public class CallistoMainActivity extends Activity {
/** Called when the activity is first created. */
 Button settings_button;
 Button classes_button;
 Button home_button;
 CheckBox notif_cb;
 CheckBox math_cb;
 CheckBox science_cb;
 CheckBox ss_cb;
 CheckBox english_cb;
 CheckBox language_cb;

 boolean notif,math,science,english,ss,language;

 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //main layout
    settings_button = (Button) findViewById(R.id.bSettings);
    classes_button = (Button) findViewById(R.id.bClasses);

    settings_button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent(getApplicationContext(),
                   CallistoSettingsActivity.class));
        }
    });
} 
```

以及您的设置布局的活动：

```
public class CallistoSettingsActivity extends Activity {

 Button home_button;
 CheckBox notif_cb;
 CheckBox math_cb;
 CheckBox science_cb;
 CheckBox ss_cb;
 CheckBox english_cb;
 CheckBox language_cb;

 boolean notif,math,science,english,ss,language;

/** Called when the activity is first created. */
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    //settings layout
    notif_cb = (CheckBox) findViewById(R.id.cbNotif);
    math_cb = (CheckBox) findViewById(R.id.cbMath);
    science_cb = (CheckBox) findViewById(R.id.cbScience);
    ss_cb = (CheckBox) findViewById(R.id.cbSS);
    english_cb = (CheckBox) findViewById(R.id.cbEnglish);
    language_cb = (CheckBox) findViewById(R.id.cbLang);
    home_button = (Button) findViewById(R.id.bHome);

    notif = true;
    math = true;
    science = true;
    english = true;
    ss = true;
    language = true;

    home_button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();
            //You could either use finish() to finish the current activity, and return to the previous CallistoMainActivity on the stack.
            //Or you could simply start the main activity again by using the startActivity() method you see in the onclicklistener on the settings button.
        }
    });        
} 
```

现在发生的情况是，当您单击主活动中的设置按钮时，将显示设置活动。当点击settings Activity中的home键时，settings Activity结束，用户返回到栈上的前一个Activity；这是主要活动。也不要忘记在你的 AndroidManifest.xml 中定义 settingsactivity

编辑：您应该注意的另一件事是，如果“第 x 行”有错误，但代码中的第 x 行没有任何内容，那么在您的 Android 设备上运行的代码与您正在查看的代码不同在你的编辑器中。所以这可能是它昨晚运行的原因，但现在不是了。

# c++ - 这是什么类型的行为？

> ID：13678028
> 
> 赞同：0
> 
> 时间：2012-12-03T06:07:07.580
> 
> 标签：c++, c, gcc, clang

**这个问题正在寻找一个标准的报价，明确解释为什么这种行为是错误的。**

下面的代码包括`<stdio.h>`里面`main`，

```
int main()
{
 #include <stdio.h>
 printf("hello , world \n");
 return 0;
} 
```

在`gcc -Wall in.c -o in.out`它成功编译和打印`hello , world`。

但是`clang in.c -o in.out`它给了我这个错误：

```
/usr/include/stdio.h:353:12: error: implicit declaration of 'fprintf' requires 

inclusion of the header <stdio.h>
extern int fprintf (FILE *__restrict __stream,
           ^
1 error generated. 
```

我怀疑这是什么行为？这是未定义的行为还是什么？

我也找不到与之相关的文档。

编辑：问题是我在某个类似的地方发现了这段代码，但我不能准确地发布该代码，所以我发布了这种演示代码。我知道在`stdio.h`主目录之外放置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T06:16:37.053

C99，7.1.2/4：

> [...] 如果使用，标头应包含在任何外部声明或定义之外，并且应首先包含在对其声明的任何函数或对象或其任何类型或宏的第一次引用之前定义。

4/2：

> 如果违反了出现在约束之外的“应”或“不应”要求，则行为未定义。

6.9/4：

> 如 5.1.1.1 所述，预处理后的程序文本单元是一个翻译单元，它由一系列外部声明组成。这些被描述为“外部”，因为它们出现在任何函数之外（因此具有文件范围）。

所以我认为这是未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:22:59.673

在 C++11 中：17.6.2.2/3：

> 翻译单元应仅在任何外部声明或定义之外包含标头，并且应在该翻译单元中对在该标头中声明的任何实体的第一次引用之前在词法上包含标头。

`main()`是外部的，因此不是包含的适当上下文。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-03T06:10:02.780

尝试在 main 方法之外包含头文件。像这样。

```
#include <stdio.h>
int main()
{
 printf("hello , world \n");
 return 0;
} 
```

# prolog - 如何在 Prolog 中获取列表的第一个元素的列表？

> ID：13678029
> 
> 赞同：2
> 
> 时间：2012-12-03T06:07:11.917
> 
> 标签：prolog

假设我们有一个矩阵，由一个列表表示，例如：`[[1,2,3],[4,5,6],[7,8,9]]`。

我如何编写得到的谓词 `[[1,4][4,7][2,5][5,8][3,6][6,9]]`？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-25T18:53:57.533

在以下逻辑纯 Prolog 代码中，我使用[明确的子句语法](http://www.logic.at/prolog/dcg.html) [dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")：

```
matrix_adjacentPairs([]) -->
   [].
matrix_adjacentPairs([Xs|Xss]) -->
   list_adjacentPairs(Xs),
   matrix_adjacentPairs(Xss).

list_adjacentPairs([]) -->
   [].
list_adjacentPairs([X|Xs]) -->
   list_adjacentPairs_(Xs,X).                 % use "lagging"

list_adjacentPairs_([],_) -->
   [].
list_adjacentPairs_([X1|Xs],X0) -->
   [[X0,X1]],
   list_adjacentPairs_(Xs,X1). 
```

这是OP所说的查询：

```
:- use_module(library(clpfd)).                % SWI-Prolog transpose/2
:- use_module(library(lists)).                % SICStus Prolog transpose/2

?- transpose([[1,2,3],[4,5,6],[7,8,9]],Tss),
   phrase(matrix_adjacentPairs(Tss),Pss).
Tss = [[1,4,7],[2,5,8],[3,6,9]],
Pss = [[1,4],[4,7],[2,5],[5,8],[3,6],[6,9]]. 
```

* * *

### 编辑 2015-04-26

使用元谓词[`foldl/4`](http://www.swi-prolog.org/pldoc/doc_for?object=foldl/4)和[library(lambda)](https://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/ISO-Hiord)，这一切都归结为：[`foldadjl/4`](https://stackoverflow.com/a/29867514/4609915)

```
:- use_module(library(apply)).
:- use_module(library(lambda)).

?- transpose([[1,2,3],[4,5,6],[7,8,9]],Tss),
   phrase(foldl(foldadjl(\X^Y^[[X,Y]|Xs]^Xs^true),Tss),Pss).
Tss = [[1,4,7],[2,5,8],[3,6,9]],
Pss = [[1,4],[4,7],[2,5],[5,8],[3,6],[6,9]]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:38:18.403

我不知道`transpose/2`SICStus Prolog 中是否存在，在 SWI-Prolog 中转`transpose/2`置一个矩阵，例如：

```
?- transpose([[1,2,3],[4,5,6],[7,8,9]], R).
R = [[1,4,7],[2,5,8],[3,6,9]]. 
```

现在，您可以在 SWI-Prolog 中执行以下操作：

```
:- use_module(library(clpfd)).

combis(L, R) :-
    transpose(L, L1),
    create_lst_combis(L1, R).

create_lst_combis([], []).   
create_lst_combis([H | T], R) :-
    create_lst_combis(T, R1),
    create_combis(H, CH),
    append(CH, R1, R).    

create_combis([H , T], [[H, T]]) :- !.  
create_combis([H | T], R) :-
    maplist(create_one_combi(H), T, T1),
    create_combis(T, R1),
    append(T1, R1, R).

create_one_combi(H, V, [H, V]). 
```

# qt - 在 Windows 7 中安装 Qt 库（qwt-6.0.1）

> ID：13678030
> 
> 赞同：2
> 
> 时间：2012-12-03T06:07:14.283
> 
> 标签：qt, qt4, qt-creator

我下载了“Qt 5.0.0 Beta 2”并下载了带有 gcc 版本 4.6.2 的 MinGw。我将最新的“qwt-6.0.1”解压到 Qt 安装文件夹。所有的路径都设置好了。现在我打开了“Qt 5.0.0 for Desktop(MSVC 2010)”命令提示符。将目录更改为 qwt-6.0.1 步骤后，我遵循=>

1) qmake qwt.pro => 创建了这个makefile 2)make => 给出了错误...而不是这一步我在同一提示符下尝试了“mingw32-make”命令.. 两者都给出了相同的错误以下错误 ：

错误：“cd src\ &&（如果不存在 Makefile C:\QtSDK\5.0.0-beta2\msvc2010\bin\qmake.exe C:\QtSDK\qwt-6.0.0-rc5\src\src.pro -o Makefile ) && make -f Makefile make[1]: 进入目录`C:/QtSDK/qwt-6.0.0-rc5/src' make -f Makefile.Release all make[2]: Entering directory`C:/QtSDK/qwt-6.0.0-rc5/src' Makefile.Release:255: *** 缺少分隔符.stop.make[2]: 离开目录`C:/QtSDK/qwt-6.0.0-rc5/src' make[1]: *** [release-all] Error 2 make[1]: Leaving directory`C: /QtSDK/qwt-6.0.0-rc5/src' make: *** [sub-src-make_first-ordered] 错误 2"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:29:19.177

来自 SVN 主干（又名 6.1）的 Qwt 适用于 Qt 4 和 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:09:29.467

您正在尝试将独立库 qwt 与 Qt 5 一起使用。Qt 5 是最新的，尚未普及，所以不要期望太多。

似乎存储库上最新版本的 qwt 使用 Qt 4.8（[请参阅 install in svn repository](http://sourceforge.net/p/qwt/code/1552/tree/trunk/qwt/INSTALL)）。
它不适用于 Qt 5。

# box-api - 有没有办法从 Box 帐户热链接图像

> ID：13678036
> 
> 赞同：4
> 
> 时间：2012-12-03T06:08:17.707
> 
> 标签：box-api

我想在一个简单的 rails 内本地查看我的盒子帐户上的图像`app`。目标是使用这些图像运行幻灯片。我寻找必要的参数来将每个图像相对传递`url`到`<img source>`标签中。看来我只能下载图像，或者从 Box 应用程序中查看它们。

这是准确的，还是我错过了 Box`API`文档中的某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:04:43.107

当您为文件创建共享链接时，有一个`download_url`属性可用于直接链接到该文件。

[http://developers.box.com/docs/#files-create-a-shared-link-for-a-file](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file)

# api - 使用 Google API V3 切换折线的可见性

> ID：13678041
> 
> 赞同：0
> 
> 时间：2012-12-03T06:08:35.833
> 
> 标签：api, google-maps, google-maps-api-3

我知道您可以使用 google api 切换标记的可见性，但是是否可以使用 html 复选框来切换折线的可见性？

基本上，我有一条折线，如果选中复选框，我希望折线可见，如果未选中，我希望它隐藏。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:16:33.297

切换折线的可见性与做标记的方式相同。

```
setMap(null) 
```

要再次显示它，请使用对您的 google.maps.Map 对象的引用调用 setMap 方法。

[文件](https://developers.google.com/maps/documentation/javascript/reference#Polyline)

setMap(map:Map) - 在指定的地图上渲染这个形状。如果 map 设置为 null，则该形状将被删除。

# matlab - 全范围值 - matlab

> ID：13678043
> 
> 赞同：0
> 
> 时间：2012-12-03T06:08:57.730
> 
> 标签：matlab, range, histogram, bin

`[h, bins] = hist(H)`使用in后得到以下结果`matlab`：

```
h =

   221    20     6     4     1     1     2     0     0     1

bins =

  Columns 1 through 7

    8.2500   24.7500   41.2500   57.7500   74.2500   90.7500  107.2500

  Columns 8 through 10

  123.7500  140.2500  156.7500 
```

*   我如何知道**所有**的值？尤其是我期望达到`255`，即 `[0,255]，如果我们分析下面的 bin 范围，我们将分别得到以下 10 个 bin：

0-16.5 16.5-33 33-49.5 49.5-66 66-82.5 82.5-99 99-115.5 115.5-132 132-148.5 148.5-165

那么，我得到这个范围*仅仅*是因为只有 10 个垃圾箱吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:11:39.080

是的，10 个 bin 是`hist`. 如果你知道你可能有 [0,255] 之间的值，你可以强制任何你想要的 bin 位置，例如：

```
[h, bins] = hist(H,0:255) 
```

将为每个整数值 [0,255] 创建 256 个 bin

# inno-setup - 如何在 InnoSetup 中获取可用显示模式的列表？

> ID：13678045
> 
> 赞同：2
> 
> 时间：2012-12-03T06:09:06.270
> 
> 标签：inno-setup

我想创建一个带有组合框的自定义页面，它将包含所有可用的显示分辨率和颜色模式。我[为 Delphi 找到了这个示例](http://delphi.about.com/od/graphics/a/change_display.htm)，但`TDevmode`据我所知， InnoSetup 不支持该类。

谁能展示一下，如何仅使用 16 位和 32 位彩色显示模式填充组合框？

例子：

```
1024 x 768 16 Bit
1024 x 768 32 Bit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:31:36.300

试试这个：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

[Code]
#ifdef UNICODE
  #define AW "W"
#else
  #define AW "A"
#endif
const
  CCHFORMNAME = 32;
  CCHDEVICENAME = 32;  
type
  TDeviceMode = record
    dmDeviceName: array[0..CCHDEVICENAME - 1] of Char;
    dmSpecVersion: Word;
    dmDriverVersion: Word;
    dmSize: Word;
    dmDriverExtra: Word;
    dmFields: DWORD;
    dmOrientation: Smallint;
    dmPaperSize: Smallint;
    dmPaperLength: Smallint;
    dmPaperWidth: Smallint;
    dmScale: Smallint;
    dmCopies: Smallint;
    dmDefaultSource: Smallint;
    dmPrintQuality: Smallint;
    dmColor: Smallint;
    dmDuplex: Smallint;
    dmYResolution: Smallint;
    dmTTOption: Smallint;
    dmCollate: Smallint;
    dmFormName: array[0..CCHFORMNAME - 1] of Char;
    dmLogPixels: Word;
    dmBitsPerPel: DWORD;
    dmPelsWidth: DWORD;
    dmPelsHeight: DWORD;
    dmDisplayFlags: DWORD;
    dmDisplayFrequency: DWORD;
    dmICMMethod: DWORD;
    dmICMIntent: DWORD;
    dmMediaType: DWORD;
    dmDitherType: DWORD;
    dmICCManufacturer: DWORD;
    dmICCModel: DWORD;
    dmPanningWidth: DWORD;
    dmPanningHeight: DWORD;
  end;
  TDeviceFilter = record
    Width: DWORD;
    Height: DWORD;
    BitDepth: DWORD;
  end;

function EnumDisplaySettings(lpszDeviceName: string; iModeNum: DWORD;
  var lpDevMode: TDeviceMode): BOOL;
  external 'EnumDisplaySettings{#AW}@user32.dll stdcall';

procedure InitializeWizard;
var
  ModeIndex: DWORD;
  ModeExists: Boolean;
  FilterIndex: Integer;  
  DisplayPage: TWizardPage;
  DisplayCombo: TNewComboBox;
  DisplayModes: array of TDeviceFilter;
  DisplaySettings: TDeviceMode;
begin
  DisplayPage := CreateCustomPage(wpWelcome, 'Caption', 'Description');
  DisplayCombo := TNewComboBox.Create(WizardForm);
  DisplayCombo.Parent := DisplayPage.Surface;
  DisplayCombo.Style := csDropDownList;
  DisplayCombo.Width := 200;

  ModeIndex := 0;
  while EnumDisplaySettings('', ModeIndex, DisplaySettings) do
  begin    
    with DisplaySettings do
    begin
      Inc(ModeIndex);
      if (dmBitsperPel <> 16) and (dmBitsperPel <> 32) then
        Continue;

      ModeExists := False;
      for FilterIndex := 0 to GetArrayLength(DisplayModes) - 1 do
      begin
        if (DisplayModes[FilterIndex].Width = dmPelsWidth) and
          (DisplayModes[FilterIndex].Height = dmPelsHeight) and
          (DisplayModes[FilterIndex].BitDepth = dmBitsperPel) then
        begin
          ModeExists := True;
          Break;
        end;
      end;

      if not ModeExists then
      begin        
        SetArrayLength(DisplayModes, GetArrayLength(DisplayModes) + 1);
        with DisplayModes[GetArrayLength(DisplayModes) - 1] do
        begin
          Width := dmPelsWidth;
          Height := dmPelsHeight;
          BitDepth := dmBitsperPel;
          DisplayCombo.Items.Add(Format('%dx%d %d bpp', [Width, 
            Height, BitDepth]));
        end;      
      end;
    end;    
  end;
end; 
```

# jquery - Trent Richardson 的 Datetimepicker 没有显示 Time Picker

> ID：13678051
> 
> 赞同：5
> 
> 时间：2012-12-03T06:09:23.097
> 
> 标签：jquery, datetimepicker, timepicker

Trent Richardson 的 Datetimepicker 没有显示时间选择器（只有 jQuery 的日期选择器）。2个月前测试它，它工作正常。上个月刚升级了JS。

1.  这是当前的 js 导入：

    *   jquery-1.8.2.min.js
    *   jquery-ui-1.8.24.custom.min.js
    *   jquery.ui.slideraccess.js（版本 0.2.1）
    *   jquery-ui-timepicker-addon.js（版本 1.0.0）
2.  已经尝试过 .removeClass('hasDatepicker'); 因为它在 datetimepicker 初始化后附加到类

3.  行 $('#dateId').datetimepicker({ 导致 Uncaught TypeError: Cannot call method 'dateId' of null, 必须使用 jQuery 而不是 $

4.  已经尝试恢复到 jquery-1.7 并将 Trent 的脚本更新到更高版本，但仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-03T21:36:53.733

我很高兴@Sophie 提出并回答了这个问题，因为我遇到了同样的问题，直到看到这篇文章才弄清楚。

显然，我的网站加载`jquery-ui-1.8.18.custom.min.js`然后加载了另一个 javascript 文件（例如 my-site.min.js），这是一个服务器生成的较小 javascript 文件的集合，所有文件都被缩小了。

这个捆绑的 js 文件（例如 my-site.min.js）`jquery-ui-1.8.18.custom.min.js`也包含，所以 jquery-ui 被加载了两次，这显然导致 datetimepicker 不显示时间字段。

我只是删除了 for 行`jquery-ui-1.8.18.custom.min.js`（这样我的网站现在只提供一次），现在 datetimepicker 再次工作。

# android - 通过android中的文本视图验证开始和结束日期

> ID：13678055
> 
> 赞同：0
> 
> 时间：2012-12-03T06:09:41.043
> 
> 标签：android, date

如何在 Android 中检查/验证结束日期 [文本框] 是否大于开始日期 [文本框]？

我已经在初始时间显示了当前日期。到运行时间，我将更改开始日期和结束日期。

更改开始日期时，结束日期必须大于开始日期...

帮我实现这个..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T06:12:16.613

试试这个功能。

```
public static boolean isDateAfter(String startDate,String endDate)
    {
        try
        {
            String myFormatString = "yyyy-M-dd"; // for example
            SimpleDateFormat df = new SimpleDateFormat(myFormatString);
            Date date1 = df.parse(endDate));
            Date startingDate = df.parse(startDate);

            if (date1.after(startingDate))
                return true;
            else
                return false;
        }
        catch (Exception e) 
        {

            return false;
        }
    } 
```

如果 enddate 晚于开始日期，则返回 true。您可以根据需要更改日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-19T12:45:22.727

```
private void initViewValue(){
    newCalendar = Calendar.getInstance();
    dateFormatter = new SimpleDateFormat("dd-MM-yyyy", Locale.US);

}
private void initViewEvents(){

    btn_start_date.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            fromDate();
        }
    });

    btn_end_date.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            toDate();
        }
    });

}

private String  changeDate(String strStartDate){
    SimpleDateFormat readFormat = null, writeFormat = null;
    Date startDate = null, endDate = null;
    //  String strStartDate = "2014-12-09";

    readFormat = new SimpleDateFormat("dd-MM-yyyy");
    writeFormat = new SimpleDateFormat("MM/dd/yyyy");

    try {
        startDate = readFormat.parse(strStartDate);
    } catch (ParseException e) {
        e.printStackTrace();
    }

    return writeFormat.format(startDate);
}

private void fromDate(){
    fromDatePickerDialog = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            Calendar newDate = Calendar.getInstance();
            newDate.set(year, monthOfYear, dayOfMonth);
            et_start_date.setText(dateFormatter.format(newDate.getTime()));

            getFromDate = et_start_date.getText().toString().trim();
        }
    },newCalendar.get(Calendar.YEAR), newCalendar.get(Calendar.MONTH), newCalendar.get(Calendar.DAY_OF_MONTH));
    fromDatePickerDialog.show();
}
private void toDate(){
    toDatePickerDialog = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            Calendar newDate = Calendar.getInstance();
            newDate.set(year, monthOfYear, dayOfMonth);
            et_end_date.setText(dateFormatter.format(newDate.getTime()));
            newDate.add(Calendar.DAY_OF_MONTH, 30);

        }

    },
            newCalendar.get(Calendar.YEAR), newCalendar.get(`enter code here`Calendar.MONTH), newCalendar.get(Calendar.DAY_OF_MONTH));

    toDatePickerDialog.getDatePicker().setMinDate(milliseconds(changeDate(getFromDate)));
    toDatePickerDialog.show();
}

public static long milliseconds(String date)
{
    //String date_ = date;
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy", Locale.US);
    System.out.println("Date in milli :: " + date);
    try
    {
        Date mDate = sdf.parse(date);
        long timeInMilliseconds = mDate.getTime();
        System.out.println("Date in milli :: " + timeInMilliseconds);
        return timeInMilliseconds;
    }
    catch (ParseException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return 0;
} 
```

# sql-server - 如何从 SQL Server 数据库中获取最后添加或编辑的记录？

> ID：13678059
> 
> 赞同：0
> 
> 时间：2012-12-03T06:10:21.097
> 
> 标签：sql-server, migration, db2

目前我正在进行数据库迁移，为此我使用的是 Pentaho Kettle 和 Perl 脚本。迁移是从 Tumor-registry SQL Server 数据库到 CIDER IBM DB2 数据库。

在这项任务中，我想实现两个目标。

1.  初始迁移：在此我将所有行（例如 100000）从 Tumor-registry (SQL Server) 迁移到 CIDER (IBM DB2)。

2.  后续迁移：Tumor-registry SQL Server 数据库不断更新。它不断地添加新行或编辑已经存在的行。

我已经弄清楚了第一步，但在第二步中遇到了两个问题。

a) 如果 Tumor-registry SQL Server 数据库更新为新的 10 行；我怎样才能得到那些新的 10 行？

b）如果已经更新了 10 行，那么我怎样才能获得这 10 行并且还想知道哪些列被更新了。

我的肿瘤登记数据库包含大约 50 个表。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:44:52.380

您可以使用 IBM Change Data Capture，它将获取源数据库中的所有 DDL 和 DML，并将它们适当地复制到目标数据库中。

[http://www-01.ibm.com/software/data/infosphere/change-data-capture/](http://www-01.ibm.com/software/data/infosphere/change-data-capture/)

好像还有其他厂商的解决方案，看看：[http ://en.wikipedia.org/wiki/Change_data_capture](http://en.wikipedia.org/wiki/Change_data_capture)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:27:29.600

我认为这将通过使用触发器提供 ua 解决方案

插入后在表名上创建触发器触发器名称声明@variablename_1 数据类型；选择 @variablename_1 = column_name 从插入；

如果要将数据保存在最后插入的另一个表中，则创建另一个表

插入表名值（@variablename_1）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:14:25.993

[**使用TIMESTAMP**](http://msdn.microsoft.com/en-us/library/aa260631%28v=sql.80%29.aspx)数据类型创建一个新列。这将跟踪表中最新编辑的记录。

或者

您可以在 Sql server中使用[**CHECKSUM函数。**](http://msdn.microsoft.com/en-us/library/ms189788.aspx)

# url-rewriting - mvc 4 url rewrite 给了我一个 404.4 即使重写看起来不错

> ID：13678063
> 
> 赞同：0
> 
> 时间：2012-12-03T06:11:05.663
> 
> 标签：url-rewriting, asp.net-mvc-4, iis-express

我正在尝试重写 url 以更改请求，例如

[http://foo.bar.com/](http://foo.bar.com/)

到

[http://bar.com/foo/](http://bar.com/foo/)

我已经像这样将我的 URL 重写规则弹出到 Web 配置中

```
<rewrite>
  <rules>
      <rule name="SiteReWrite" stopProcessing="true">
          <match url="(.*)" />
          <action type="Rewrite" url="http://bar.com/{C:1}/"/>
          <conditions>
              <add input="{HTTP_HOST}" pattern="(.*)\.bar\.com" />
          </conditions>
      </rule>
  </rules>
</rewrite> 
```

但我收到 404.4 错误。查看跟踪日志文件，我在其中看到了这个

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="WWW Server" Guid="{3A2A4E84-4C21-4981-AE10-3FDA0D9B0F83}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>4</Level>
  <Opcode>42</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2012-12-03T05:54:01.237Z"/>
  <Correlation ActivityID="{00000000-0000-0000-1000-0080030000FC}"/>
  <Execution ProcessID="7312" ThreadID="3180"/>
  <Computer>ULTRA</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-1000-0080030000FC}</Data>
  <Data Name="OldUrl">/</Data>
  <Data Name="NewUrl">http://bar.com/foo/</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>URL_CHANGED</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{D42CF7EF-DE92-473E-8B6C-621EA663113A}</EventGuid>
 </ExtendedTracingInfo>
</Event> 
```

从 NewUrl 看起来一切都很美好。注意，看起来这个实例被缓存了，但我在之前的事件中看到了规则匹配。

如果我输入网址[http://bar.com/foo/](http://bar.com/foo/)它应该可以正常工作。我不希望用户看到新的 url，他们应该认为他们在 foo.bar.com 而不是 bar.com/foo。这只是我在 mvc 应用程序中的一些路由。

有谁知道它为什么会出现这种奇怪的行为？我为此使用 IIS express 8，我还没有尝试使用 IIS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:43:45.910

你应该`redirect`而不是`rewrite`：

```
<rewrite>
  <rules>
      <rule name="SiteReWrite" stopProcessing="true">
          <match url="(.*)" />
          <action type="Redirect" url="http://bar.com/{C:1}/"/>
          <conditions>
              <add input="{HTTP_HOST}" pattern="(.*)\.bar\.com" />
          </conditions>
      </rule>
  </rules>
</rewrite> 
```

如果您真的想重写，您必须通过安装 ARR（应用程序请求路由）模块将 IIS 设置为反向代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T03:40:47.187

由于我不希望用户看到 url 更改，我无法使用重定向。但是我应该提到的是所有子域都将访问同一个站点。一旦我想了更多，并且对重写模块进行了更多阅读，我修改了一个这样的 MSDN 示例；这就像一个魅力

```
<rewrite>
  <rules>
    <rule name="Rewrite subdomain">
      <match url="(.*)" /> <!-- rule back-reference is captured here -->
      <conditions>
        <add input="{HTTP_HOST}" pattern="^([^.]+)\.bar\.com$" /> <!-- condition back-reference is captured here -->
      </conditions>
      <action type="Rewrite" url="{C:1}/{R:1}" /> <!-- rewrite action uses back-references to condition and to rule when rewriting the url -->
    </rule> 
  </rules>
</rewrite> 
```

# c++ - 在 Windows 中访问 Intel CPU I/O 寄存器的简单方法

> ID：13678066
> 
> 赞同：5
> 
> 时间：2012-12-03T06:11:17.630
> 
> 标签：c++, windows, io, intel

我使用需要 256 字节 TLP 有效负载大小的 PCIe 板。我的 CPU 支持（Core i7-3930K）和英特尔主板，DX79SR 在 BIOS 中不提供 TLP 有效负载大小设置。默认情况下，最大 TLP 有效负载为 128 字节，我需要将其更改为 256 字节，无需 BIOS。我找到了在 Windows 中显示此值的 PCIUtils 软件，但它是一个多用途的便携式软件，它太复杂了，无法找到我需要的东西。

英特尔文档[描述了](http://www.intel.com/content/www/us/en/processors/core/core-i7-lga-2011-datasheet-vol-2.html "文件描述了哪些价值观")我需要在 CPU I/O 寄存器中设置的值，还有[另一个文档](http://download.intel.com/design/intarch/papers/321090.pdf "另一个文件")说 I/O 位置是 C8Fh 和 CFCh。

这就是我卡住的地方，如果我想设置这些寄存器，我不知道从哪里开始。我是一位经验丰富的 Windows S/W 开发人员，但我从未处理过驱动程序。我确实有这个 PCIe 板驱动程序的源代码，我可以修改、构建和运行，但我不知道如何将数据写入 Intel CPU 的 I/O 寄存器。我发现 _outp() 函数在用户模式下不起作用。

请指出我从哪里开始，无论是从可执行文件（更简单）还是驱动程序。如果我没记错的话，我认为我需要做的就是从 I/O 端口 C8Fh 和 CFCh 读/写。现在是 Windows XP 32 位，Win7 x64 将在以后，Visual Studio 2010 C++ 或 WDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:51:45.927

基本上你需要做的是`out`分别使用`in`x86 asm 指令。问题是在保护模式下，这两条指令被锁定，因此您无法在用户态模式下使用它们。

最好的起点是获取 WDK（Windows 驱动程序套件）并查看他们的示例（您只需要一个软件驱动程序即可）。如果 PCI 板的驱动程序是内核模式驱动程序，尽管您可以在`DriverEntry`函数中添加调用并完成它。

如果这不是一个选项，您将不得不构建自己的软件内核模式驱动程序 -[这](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554811)是一些简单的示例代码，其中包含有关如何构建和部署的说明。实际代码应该很简单，因为您只想在内核模式下执行一些指令。

# iphone - iPhone中新帖子页面上附件栏的UI对象

> ID：13678068
> 
> 赞同：0
> 
> 时间：2012-12-03T06:11:22.913
> 
> 标签：iphone, objective-c, ios6, facebook-ios-sdk

抱歉问了一个很愚蠢的问题，我是 iOS 开发的新手。

我正在制作一个应用程序，它可以让用户发布，说类似于 Facebook 或 Twitter 的东西。目前我正在制作“新帖子”页面。我正在尝试查找附件栏的 UI 对象是什么，它将包含添加图片/字符数等的图标。或者如果不存在这样的简单 UI 对象，我们该如何制作它？

我的意思是键盘上方的浅灰色条，如下所示：

![在此处输入图像描述](../Images/22a01861f9335fab63790e83675b11c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:00:57.957

我想我的意思是工具栏

# sparql - SPARQL 前缀通配符

> ID：13678069
> 
> 赞同：2
> 
> 时间：2012-12-03T06:11:24.163
> 
> 标签：sparql

我正在尝试编写一个 SPARQL 查询，该查询将允许我找到可以从给定节点访问的所有节点。目前每条边都有前缀[http://www.foo.com/edge#](http://www.foo.com/edge#)并且有 3 个可能的边（使用、扩展、实现）。虽然我可以从 "?start (edge:uses | edge:implements | edge:extends)* ?reached" 中得到正确的结果，但我想将其简化为一个语句，在 edge: 之后使用某种通配符，这样如果我添加了更多的边缘类型，然后我就不需要扩展查询了。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:29:10.677

请参阅此[SPARQL - 将结果资源限制为特定命名空间](https://stackoverflow.com/questions/9597981/sparql-restricting-result-resource-to-certain-namespaces)

如果您知道它总是在同一个命名空间中，您可能会看到如下所示：

```
?start ?edge ?reached
FILTER(REGEX(STR(?var), "^http://www.foo.com/edge#")) 
```

# html - Chrome 剪切了文本

> ID：13678070
> 
> 赞同：-1
> 
> 时间：2012-12-03T06:11:27.770
> 
> 标签：html, css

![文字被剪掉了](../Images/1731a511b6691bbb4d6a65cc268fdbcf.png)

这张图片是地址[http://www.rothemcollection.com/engagement-rings/](http://www.rothemcollection.com/engagement-rings/)的截图。Google Chrome 浏览器删减了“推荐”的“s”。我试图更改 z-index，将其与顶部或边缘顶部一起向下移动，但它仍然将我拖到最后。有人有想法吗？这可能与我使用特殊字体的差有关？如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:26:32.897

有问题，很可能与不透明度和 css 引擎渲染有关，可能是因为一些优化。我建议将标题多向左 6 个像素，以避免图像与其重叠，就像这样。

```
#mainSlider h1 {
   left: -6px;
   position: relative;
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:28:07.897

有几种方法可以做到这一点 - 我会将我的观点添加到组合中。尝试添加`z-index:-1;`到`.ring`班级。如果您想在某个时候创建​​图像链接，这会产生问题，但应该在您当前的设置中工作。

```
#mainSlider .ring{
  position: absolute;
  right: 0;
  z-index:-1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:16:06.753

试试这个CSS：

```
#mainSlider h1 span.big {
    font-size: 60px;
    line-height: 63px;
    display: inline-block;
    width: 484px;
    position: relative;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:17:14.510

定义您的**mainSlider 标题** `position:relative;`或定义`z-index:1;`

**像这样**

```
#mainSlider h1{
position:relative;
z-index:1;
} 
```

**结果是** ![在此处输入图像描述](../Images/9c8bb4bac62447bfeafbaf00e55f723f.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T09:26:29.677

我将文本大小减小了一个像素并解决了问题。不是一个次优的解决方案，但仍然有效。不幸的是，这些解决方案没有帮助。谢谢你们。

# android - Android aChartEngine 可移动折线图

> ID：13678071
> 
> 赞同：2
> 
> 时间：2012-12-03T06:12:02.467
> 
> 标签：android, achartengine, linechart

我正在使用适用于 Android 的 aChartEngine 的 0.7.0 图表库。谁能帮助我了解如何从左到右绘制折线图并最终移出视图以及如何将图表视图滚动到左侧？

我的代码是....

```
public class MainActivity extends Activity {

    private GraphicalView view;
    private static Thread thread;
    private TimeSeries dataSet = new TimeSeries("Heart Beat Rate");
    private XYSeriesRenderer renderer = new XYSeriesRenderer();
    private XYMultipleSeriesDataset mDataset = new XYMultipleSeriesDataset();
    private XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
      @Override
      public void onCreate(Bundle savedInstanceState) {
              super.onCreate(savedInstanceState);
              setContentView(R.layout.main);       
              LinearLayout layout_eeg1 = (LinearLayout) findViewById(R.id.chart1);
                view = getView(this);
                layout_eeg1.addView(view,new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                thread = new Thread() {
                public void run() {
                    for (int i = 0; i < 200; i++) {
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        } 
                        Point p = getDataFromReciver(i);
                        addNewPoint(p);
                        view.repaint();
                    }
                }
            };
            thread.start(); 

      }      
      private static Point getDataFromReciver(int x) {
        return new Point(x, randomData());
    }

    private static int randomData() {
        Random random = new Random();
        return random.nextInt(180);
    }

    private int x;
    private int y;

    public void Point( int x, int y) {
        this.x = x;
        this.y = y;
    }
    private int getX() {
        return x;
    }   
     private int getY() {
        return y;
    }
      public MainActivity() {
        mDataset.removeSeries(dataSet);
        mDataset.addSeries(dataSet);

        renderer.setColor(Color.GREEN);
        renderer.setLineWidth(2);
        double xmax = mRenderer.getXAxisMax();
        mRenderer.setXAxisMin(xmax - 5);
        //renderer.setPointStyle(PointStyle.SQUARE);
        //renderer.setFillPoints(true);
         mRenderer.setShowAxes(false);
        mRenderer.setShowGridX(false); // X grid helps identify values
        mRenderer.setShowLabels(false); // See the values
        mRenderer.setXTitle("Milisecond #");
        mRenderer.setYTitle("HeartBeat");
        mRenderer.removeSeriesRenderer(renderer);
        mRenderer.addSeriesRenderer(renderer);
        }
      private GraphicalView getView(Context context) {
        view = ChartFactory.getLineChartView(context, mDataset, mRenderer);
        return view;

    }
    private void addNewPoint(Point p) {
        dataSet.add(p.x, p.y);      
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:14:48.690

如果您的图表没有使用时间值，那么它应该是直截了当的。如您所知，它会`achartengine`自动尝试将所有点拟合到一张图中，以便始终显示右侧。由于您只想控制左侧显示的内容，因此您可以获得最大 x 值，无论它是什么，然后将最小值设置为小于您要显示的间隔。这里 mrenderer 是`XYMultipleSeriesRenderer`

顺便说一句，achartengine 已经将其库升级到 1.0.0

改用这个线程：

```
 thread = new Thread() {
        public void run() {
            for (int i = 0; i < 200; i++) {
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                Point p = getDataFromReciver(i);
                addNewPoint(p);

                if (i > 5) {
                    mRenderer.setXAxisMin(i - 5);
                }

                view.repaint();
            }
        }
    };
    thread.start(); 
```

# android - 使用其他字段作为条件从 sqlite 获取行 ID

> ID：13678072
> 
> 赞同：2
> 
> 时间：2012-12-03T06:12:06.117
> 
> 标签：android, sqlite, rowid

先生，我如何根据输入名称、编号返回数据库的 rowid？此代码每次都返回值 0。我的主键是 KEY_ROWID。提前感谢您的帮助

```
//get rowid
public long getRowId(String name, String number) 
{
    // TODO Auto-generated method stub
    String[] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_NUMBER};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NUMBER+ "=" +number, null, null, null, null);

    long rowid = c.getColumnIndex(KEY_ROWID);
    return rowid;
} 
```

这是我如何访问它

```
public void onClick(View arg0) {
            nameChanged = sqlName.getText().toString();
            numChanged = sqlNumber.getText().toString();
            GroupDb info = new GroupDb(EditDetails.this);
            info.open();
            long rowid = info.getRowId(name, num);
            info.updateNameNumber(rowid, nameChanged, numChanged);
            Toast.makeText(getApplicationContext(), rowid+" "+nameChanged+" "+numChanged, Toast.LENGTH_LONG).show();
            ArrayList<Contact> searchResults = info.getView();
            MyCustomBaseAdapter mcba = new MyCustomBaseAdapter(EditDetails.this, searchResults);
            mcba.updateResults(searchResults);
            Toast.makeText(getApplicationContext(), "Update Successful!", Toast.LENGTH_LONG).show();
            info.close();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T06:35:14.527

来自[精美手册](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)：

> `public Cursor query (String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy, String limit)`
> [...]
> **返回**
> 
> 一个`Cursor`对象，位于第一个条目之前。

所以首先你已经`c`进入了结果集，你可以使用[`moveToFirst`](http://developer.android.com/reference/android/database/Cursor.html#moveToFirst%28%29)它：

```
c.moveToFirst(); 
```

现在您需要从光标指向的行中提取 rowid。但是[`getColumnIndex`](http://developer.android.com/reference/android/database/sqlite/SQLiteCursor.html#getColumnIndex%28java.lang.String%29)用于将列名映射到行中的位置：

> 返回给定列名的从零开始的索引，如果该列不存在，则返回 -1。

你得到一个零，`getColumnIndex`因为你`KEY_ROWID`是你的 SELECT 查询中的第一列。

我认为您正在寻找[`getLong`](http://developer.android.com/reference/android/database/AbstractWindowedCursor.html#getLong%28int%29)是否`long`要从`Cursor`' 结果集中提取 a ：

```
long rowid = c.getLong(c.getColumnIndex(KEY_ROWID)); 
```

如果您知道查询的结构（您知道），则可以跳过`getColumnIndex`调用并仅使用已知索引：

```
long rowid = c.getLong(0); 
```

如果您所做的只是查找 rowid，您可以 SELECT 只是`KEY_ROWID`：

```
String[] columns = new String[]{KEY_ROWID}; 
```

无需从数据库中提取您忽略的内容。

# jqgrid - 客户端 jqgrid 的按需数据加载

> ID：13678076
> 
> 赞同：1
> 
> 时间：2012-12-03T06:12:37.447
> 
> 标签：jqgrid

我有一种情况，我最初创建 jqgrid 为空，数据类型为本地，然后使用 addChildNode 方法将节点添加到 jqgrid。这一切都是在客户端javascript中完成的。

现在很快我们就发现数据太多了，所以 javascript 加载时间太长，我们收到警告，因为脚本时间太长。我想实现按需数据加载，但无论我看到什么例子，它们都会调用服务器端进行数据加载。

我们是否有任何这样的选项，我可以在其中实现数据数据加载和数据加载 jqgrid 仍将调用客户端 javascript。

# ruby - 我应该把`include`语句放在哪里？

> ID：13678079
> 
> 赞同：1
> 
> 时间：2012-12-03T06:12:46.500
> 
> 标签：ruby, module

我正在尝试将模块用作常量的命名空间。假设我有一个这样的模块：

```
module AnimalModule
  Dog = 1
end 
```

和一个`PetStore`使用该模块的类。我应该把`include`声明放在哪里？

(1) 是这样的吗：

```
# PetStore.rb
include AnimalModule
class PetStore
end 
```

(2) 或像这样：

```
# PetStore.rb
class PetStore
  include AnimalModule
end 
```

我尝试在我的类的实例方法中使用常量，两种方式似乎都一样：

```
class PetStore
  def feed
    puts Dog
  end 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:15:48.850

就像您在第二个代码块中所做的那样，您在类之后包含模块：

```
C:\Users\Hunter>irb
irb(main):001:0> module AnimalModule
irb(main):002:1>   Dog = 1
irb(main):003:1> end
=> 1
irb(main):004:0> class PetStore
irb(main):005:1>   include AnimalModule
irb(main):006:1>   def feed
irb(main):007:2>     puts Dog
irb(main):008:2>   end
irb(main):009:1> end
=> nil
irb(main):010:0> p = PetStore.new()
=> #<PetStore:0x25e07b0>
irb(main):011:0> p.feed
1
=> nil 
```

我在交互式解释器中使用了您的代码，并得到`1`了调用该`feed()`方法的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:43:42.863

第二种风格是正确的选择。区别在于范围`Dog`。第一个包括更大范围内的模块。所以它也适用于你的例子。但它不会提供您想要的命名空间。

```
module AnimalModule
  Dog = 1
end
class PetStore
  include AnimalModule
end
Dog # => NameError: uninitialized constant Dog
PetStore::Dog # => 1

include AnimalModule
Dog # => 1 
```

# video - 如何在电视/网络/移动设备上播放 Kaltura 媒体播放列表

> ID：13678080
> 
> 赞同：0
> 
> 时间：2012-12-03T06:12:54.470
> 
> 标签：video, video-streaming, television, kaltura

任何人请告诉我如何在网络和移动设备上播放 Kaltura 媒体播放列表到电视（使用 mediaDROID 和 mediaBOX 等设备）。

请告诉是否有任何可用的开源插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T03:45:34.513

我相信这些设备可以将 MRSS 提要作为输入，因此您可以将您的 Kaltura 视频（或特定播放列表中的一部分）“联合”给它们。

这是来自 Kaltura 的信息：[http://cdnknowledge.kaltura.com//sites/default/files/Kaltura%20Content%20Syndication.pdf](http://cdnknowledge.kaltura.com//sites/default/files/Kaltura%20Content%20Syndication.pdf)

要仅联合一些视频，请创建一个名为“mrss”的自定义数据字段，其中包含“是”或“否”两个选项。编辑您想要联合的每个视频，并将“mrss”选项更改为“是”。最后，然后创建一个自定义播放列表，其中仅包含自定义数据字段“mrss”=“yes”的项目。然后，当您创建 MRSS 提要（按照上面链接的文档）时，您可以告诉它仅发布该播放列表。

# php - 如何在服务器中打开特定的 PHP 函数？

> ID：13678084
> 
> 赞同：0
> 
> 时间：2012-12-03T06:13:33.933
> 
> 标签：php, curl

我正面临在我的网站中使用一些 php 函数。如：`CURL Function`。它在 erro_log 中显示安全模式错误（像这样）。我如何为我的网站打开特定的 php 功能。这是否重要`.htaccess`或者我需要与托管公司联系？

这是我的示例错误日志： `[03-Dec-2012 01:27:18] PHP Warning: set_time_limit() [<a href='function.set-time-limit'>function.set-time-limit</a>]: Cannot set time limit in safe mode in ....`

# drupal - 将自定义字段添加到 Drupal 中的图像小部件

> ID：13678085
> 
> 赞同：1
> 
> 时间：2012-12-03T06:13:35.043
> 
> 标签：drupal, widget, field, content-type

我有一个内容类型，我在其中使用图像字段类型和小部件，它为替代文本和标题提供了一个字段。现在我想为每个图像添加另一个字段“链接”，我可以在其中为每个图像定义一个自定义链接。我怎样才能做到这一点？

哦，我正在使用 Drupal 7 ......

谢谢，罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:27:30.880

如果您想避免构建自己的模块，我建议您尝试[Field Collection module](http://drupal.org/project/field_collection)。该模块允许您创建一组字段，将其组合成一个字段，然后将其用作`content type`.

`image`您可以使用一个field 和[`link`field](http://drupal.org/project/link)创建一个字段集合，然后将其作为带有链接的图像输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T05:45:53.927

请试试这个改变功能 - “ `multiupload_imagefield_widget_field_widget_form_alter`”

# jsf - 点击登录按钮时弹出忘记密码

> ID：13678088
> 
> 赞同：0
> 
> 时间：2012-12-03T06:13:54.467
> 
> 标签：jsf, primefaces

我正在处理登录页面，其中有 2 个输入字段用户名和密码以及 2 个提交按钮登录并忘记密码。所有这 4 个元素都在一个形式中。我已经对用户名密码的空输入应用了验证。如果用户在不提供用户名和密码的情况下单击登录，则会显示一些 primefaces 消息。忘记密码是一个弹出窗口，其中还有两个字段用户名和电子邮件，这里也有相同的空白验证。我的问题是，当我在没有提供任何输入的情况下单击登录时，它会弹出忘记密码窗口以及用户名和密码验证错误。以下是我的代码。谢谢

登录页面

```
<h:form >
    <p:panel id="panel" >  
    <p:focus context="panel"/>  
      <h:panelGrid >  
            <h:outputLabel for="firstname" value="#{app.username} : " style="font-weight:bold; font-size:12px;"> 
            <h:outputLabel value="*" style="color:red; font-size:12px;"/></h:outputLabel>  
            <p:inputText id="firstname" required="true" label="Firstname"    value="#{userManageBean.user.userName}" size="35" maxlength="10" requiredMessage="User Name is required."/>  
            <p:message for="firstname" />  
            <br/> 

            <h:outputLabel for="surname" value="#{app.paswrd} : "  style="font-weight:bold; font-size:12px;">  
            <h:outputLabel value="*" style="color:red; font-size:12px;"/></h:outputLabel>
            <p:inputText id="surname" required="true" label="#{app.paswrd}" value="#{userManageBean.user.password}" type="password" size="35" maxlength="10" requiredMessage="Password is Required"  />  
            <p:message for="surname" />
           <h:outputText value="#{userManageBean.message}" style="font-weight:bold; font-size:12px; color:red; "></h:outputText>

        </h:panelGrid> 
            <br/>

        <p:commandButton id="SubmitButton1" value="#{app.log_in}" action="#{userManageBean.submitLoginUser}" ajax="false" />   

        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <p:commandButton value="#{app.forgotpwd}" onclick="dlg1.show();"  ajax="false" />

 </p:panel>   
  </h:form> 
```

弹出

```
<h:form>

    <p:dialog header="#{app.forgotpwd}" widgetVar="dlg1"  resizable="false"  width="300" showEffect="clip" hideEffect="fold" modal="true"  visible="#{facesContext.validationFailed}" >

             <table> 
             <tr>
              <td><h:outputText value="#{app.username} : "/>  <h:outputText value="*" style="color:red; font-size:12px;"/></td>
               <td> <p:inputText id="txt" value="#{forgetPwdBean.userID}"  required="true" requiredMessage="User Name is Required" />
               <p:message for="txt" ></p:message>
               <!--   <p:tooltip for="txt" value="#{viewcontrollerBundle.username}" showEffect="fade" hideEffect="fade" /> -->
                 </td>

              </tr>

                <tr><td>
                 <h:outputText value="#{app.emp_id} : "/><h:outputText value="*" style="color:red; font-size:12px;"/></td>
               <td> <p:inputText id="txt1" value="#{forgetPwdBean.emailID}" required="true" requiredMessage="Email is Required"/>
               <p:message for="txt1"></p:message>
                <!-- <p:tooltip for="txt1" value="#{viewcontrollerBundle.mailid}" showEffect="fade" hideEffect="fade" /> -->
                </td>
                </tr>

               <tr><td><p:commandButton value="#{app.submit}" action="#{forgetPwdBean.forgetPassword}" ajax="false"/>
               </td></tr> 

                </table>  

            </p:dialog>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:49:09.030

以下代码会在表单验证失败时弹出对话框。

```
<p:dialog  ... visible="#{facesContext.validationFailed}"> 
```

编辑（为什么没有上面的代码不显示对话框）：

根本问题是您的 commandButtons 不是 ajax，因此页面将完全重新加载，您可能只看到一瞬间的对话框

如果您查看[primefaces 展示](http://www.primefaces.org/showcase/ui/dialog.jsf)，您会看到使用 onclick="dlg.show()" 的按钮使用 ajax：

```
<p:commandButton id="modalDialogButton" value="Modal" onclick="dlg2.show();" type="button"/> 
```

# ruby-on-rails - 如何在rails中自定义json输出？

> ID：13678092
> 
> 赞同：3
> 
> 时间：2012-12-03T06:14:16.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我有一个语言模型，我想将所有语言作为 json，但 json 输出如下所示

> [{"language":{"created_at":null,"id":1,"language":"English","updated_at":null}},{"language":{"created_at":null,"id" :2,"language":"Swedish","updated_at":null}},{"language":{"created_at":null,"id":3,"language":"German","updated_at":null }},{"language":{"created_at":null,"id":4,"language":"French","updated_at":null}},{"language":{"created_at":null," id":5,"language":"spanish","updated_at":null}},{"language":{"created_at":null,"id":6,"language":"dutch","updated_at" :null}},{"语言":{"created_at":"2012-12-03T05:01:18Z","id":7,"language":"泰米尔语","updated_at":"2012-12-03T05:01:18Z"}}]

但我想把它变成

> {"language":[{"created_at":null,"id":1,"language":"English","updated_at":null},{"created_at":null,"id":2,"language" :"瑞典语","updated_at":null},{"created_at":null,"id":3,"language":"德语","updated_at":null},{"created_at":null,"id" :4,"language":"French","updated_at":null},{"created_at":null,"id":5,"language":"spanish","updated_at":null},{"created_at" :null,"id":6,"language":"dutch","updated_at":null},{"created_at":null,"id":7,"language":"Tamil","updated_at":null } ] }

**更新**

```
def index
 @languages = Language.all
 respond_to do |format|
   format.json { render json: @languages}
 end
end 
```

**更新 2**

```
 class Language < ActiveRecord::Base
        ActiveRecord::Base.include_root_in_json = false
        has_and_belongs_to_many :users 
    end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T06:31:34.663

我相信这应该有效：

```
format.json { render json: { "language" => @languages.as_json(:root => false) }.to_json } 
```

将`@languages`数组转换为没有根键的 JSON 格式的哈希模型数组（使用`as_json`），然后将结果包装在带有根键“语言”的哈希中，并将该哈希转换为 JSON 格式的字符串与`to_json`. （有关使用包含或不包含根节点的详细信息，请参阅[文档](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json)`as_json`。）

例如，使用模型`Post`：

```
posts = Post.all
#=> [#<Post id: 1, name: "foo", title: "jkl", content: "some content", created_at: "2012-11-22 01:05:46", updated_at: "2012-11-22 01:05:46">]

# convert to array of hashes with no root keys
posts.as_json(root: false)
#=> [{"content"=>"some content", "created_at"=>Thu, 22 Nov 2012 01:05:46 UTC +00:00, "id"=>1, "name"=>"foo", "title"=>"jkl", "updated_at"=>Thu, 22 Nov 2012 01:05:46 UTC +00:00}]

# add root back to collection:
{ "post" => posts.as_json(root: false) }
#=> {"post"=>[{"content"=>"some content", "created_at"=>Thu, 22 Nov 2012 01:05:46 UTC +00:00, "id"=>1, "name"=>"foo", "title"=>"jkl", "updated_at"=>Mon, 03 Dec 2012 09:41:42 UTC +00:00}]}

# convert to JSON-formatted string
{ "post" => posts.as_json(root: false) }.to_json    
#=> "{\"post\":[{\"content\":\"some content\",\"created_at\":\"2012-11-22T01:05:46Z\",\"id\":1,\"name\":\"foo\",\"title\":\"jkl\",\"updated_at\":\"2012-12-03T09:43:37Z\"}]}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-04T01:12:55.540

覆盖您要自定义的模型上的 as_json

```
def as_json options={}
    {
      id: id,
      login: login, 
      name: custom.value, #for custom name
     ...
    }
end

==> or

def as_json(options={})
  super(:only => [:id, :login, :name ....])
end 
```

来自：[这里](https://stackoverflow.com/questions/9055786/specifying-attributes-of-a-rails-object-passed-into-a-json-object?answertab=votes#tab-top)

其他链接：[这里](https://quickleft.com/blog/keeping-your-json-response-lean-in-rails/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T06:21:12.077

我建议您使用 rabl gem ( [https://github.com/nesquena/rabl](https://github.com/nesquena/rabl) ) 来格式化您的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T07:17:23.670

在渲染 json 时添加自定义 json 输出的最简单方法是使用提供许多 json 模板的 gem -

[https://github.com/fabrik42/acts_as_api](https://github.com/fabrik42/acts_as_api)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-26T14:57:30.270

覆盖`as_json`模型中的方法，包括关联、隐藏列，为什么不呢？调用自定义方法，因为它们是属性

```
 def as_json(options={})
    super(:except => [:created_at,:updated_at],
          :include => { 
            :members => {
                :only => [:role, :account], 
                :include => {
                  :account => {
                    :only => [:name, :subdomain]
                  }
                }
              }
            },
          :methods => [:jwt_token]
    )
  end 
```

这将输出如下内容：

```
{
  "id": 2,
  "name": "Test Teacher",
  "email": "teacher@testing.io",
  "jwt_token":"eyJhbGciOiJIUzI1NiJ9.eyJpZCI6MiwiZXhwIjoxNTY2NzQ0OTQzfQ.HDGu7JiJEQEEpGo7inuXtOZBVQOfTaFquy8dr-QH5jY",

  "members": [{
        "role": "instructor",
        "account": {
            "name": "Testing",
            "subdomain": "test"
         }
  }],
} 
```

# qt - 使用 Qt 显示灰度图像

> ID：13678093
> 
> 赞同：4
> 
> 时间：2012-12-03T06:14:21.143
> 
> 标签：qt, user-interface

我一直在尝试使用 Qt 显示灰度图像。图像数据从包含 256x256 浮点数据的 .txt 文件加载。图像不涉及标题。我已经尝试过此[链接中发布的解决方案](https://stackoverflow.com/questions/4727625/displaying-and-sizing-a-grayscale-from-a-qimage-in-qt/4727757#4727757)

我用`QLabel`类来调用`setPixmap`我的`uchar* image_data_array`. 即使我可以打开一个 Qt GUI 窗口，但该窗口只显示空白屏幕。

imageLabel -> setPixmap(QPixmap::fromImage(*myImage));

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:41:47.123

```
QImage img = AImage;
if (!AImage.isNull())
{
    int pixels = img.width() * img.height();
    if (pixels*(int)sizeof(QRgb) <= img.byteCount())
    {
        QRgb *data = (QRgb *)img.bits();
        for (int i = 0; i < pixels; i++)
        {
            int val = qGray(data[i]);
            data[i] = qRgba(val, val, val, qAlpha(data[i]));
        }
    }
}
return img; 
```

使用 RGBA 以获得良好的灰度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:53:35.800

你是如何用灰度图像数据加载 QImage 的？

QT 没有灰度图像类型，只有双层类型。您可以使用 R=G=B=grey 创建 RGB 图像。或者更优选地使用`QImage::Format_Indexed8`并创建一个颜色表，其中每个条目具有与索引相同的值。IE

```
QImage *qi = new QImage(data_ptr, width, height, QImage::Format_Indexed8);
QVector<QRgb> my_table;
for(int i = 0; i < 256; i++) my_table.push_back(qRgb(i,i,i));
qi->setColorTable(my_table); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-14T22:09:03.337

在 QT 5.9.1 中有一个创建灰度图像的选项：

```
QImage *qi = new QImage(data_ptr, width, height, QImage::Format_Grayscale8); 
```

# java - 在jsp中下载任何文件格式的内容类型应该是什么？

> ID：13678094
> 
> 赞同：6
> 
> 时间：2012-12-03T06:14:22.103
> 
> 标签：java, jsp

我想规定下载所有文件类型...有没有办法在jsp中下载任何文件格式...

我的代码片段：

```
 String filename = (String) request.getAttribute("fileName");        
    response.setContentType("APPLICATION/OCTET-STREAM");
    String disHeader = "Attachment";
    response.setHeader("Content-Disposition", disHeader);

    // transfer the file byte-by-byte to the response object
    File fileToDownload = new File(filename);
    response.setContentLength((int) fileToDownload.length());
    FileInputStream fileInputStream = new FileInputStream(fileToDownload);
    int i = 0;
    while ((i = fileInputStream.read()) != -1) {
        out.write(i);
    }
    fileInputStream.close(); 
```

如果我将 setContentType 指定为 APPLICATION/OCTET-STREAM，则会下载 pdf、文本、doc 文件……但问题在于图像文件……

图像文件有什么问题？我想下载所有图像文件类型...

我搜索了类似的问题，但找不到正确的答案...谢谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:26:39.383

最后我以某种方式设法做到了......问题在于JSP的“Out.write”，它不能写入字节流......

我用servlet替换了jsp文件......

代码片段是：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        String filename = (String) request.getAttribute("fileName");
        response.setContentType("application/octet-stream");
        response.setHeader("Content-Disposition",
                "attachment;filename="+filename);

        File file = new File(filename);
        FileInputStream fileIn = new FileInputStream(file);
        ServletOutputStream out = response.getOutputStream();

        byte[] outputByte = new byte[(int)file.length()];
        //copy binary contect to output stream
        while(fileIn.read(outputByte, 0, (int)file.length()) != -1)
        {
        out.write(outputByte, 0, (int)file.length());
        }
     } 
```

现在我可以下载所有类型的文件....

感谢您的回复:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:23:13.783

检查以下链接，

[JSP 下载 - application/octet-stream](https://stackoverflow.com/questions/1936615/jsp-download-application-octet-stream)

可能会帮助您解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:01:41.247

对于图像，您应该使用 setContentType(image/jpg)。您可以查看此链接以了解 mime 类型

[http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm](http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm)

# r - 使用`sourceCpp`编译`fastLm`

> ID：13678098
> 
> 赞同：5
> 
> 时间：2012-12-03T06:14:41.843
> 
> 标签：r, rcpp

我开始`Rcpp`尝试并想以该`fastLm`函数为例（也因为它对以后的潜在工作很有用）。我知道这`fastLm`是`RcppArmadillo`包的一部分，但我想使用`sourceCpp`. 代码可以在[这里](http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)找到，也在下面。我遇到的第一个问题是`sourceCpp("fastLm.cpp")`在安装和加载`Rcpp`和`RcppArmadillo`. 我得到了这个错误`error: RcppArmadillo.h: No such file or directory`，然后是各种各样的事情，我猜是从那开始的。

第二个问题是我认为我需要更改`fastLm.cpp`. 我的更改也在下面，但我确信有些东西丢失或错误。我包含`#include <Rcpp.h>`and`using namespace Rcpp;`并将`// [[Rcpp::export]]`函数导出到 R 并将参数从`SEXP`to`NumericVector`和`NumericMatrix`. 我不明白为什么这不起作用，并且可能对返回值进行类似的调整？

**快速Lm.cpp**

```
#include <RcppArmadillo.h>

extern "C" SEXP fastLm(SEXP ys, SEXP Xs) {

    Rcpp::NumericVector yr(ys);                 // creates Rcpp vector from SEXP
    Rcpp::NumericMatrix Xr(Xs);                 // creates Rcpp matrix from SEXP
    int n = Xr.nrow(), k = Xr.ncol();

    arma::mat X(Xr.begin(), n, k, false);       // reuses memory and avoids extra copy
    arma::colvec y(yr.begin(), yr.size(), false);

    arma::colvec coef = arma::solve(X, y);      // fit model y ~ X
    arma::colvec resid = y - X*coef;            // residuals

    double sig2 = arma::as_scalar( arma::trans(resid)*resid/(n-k) );
                                                // std.error of estimate
    arma::colvec stderrest = arma::sqrt( sig2 * arma::diagvec( arma::inv(arma::trans(X)*X)) );

    return Rcpp::List::create(
        Rcpp::Named("coefficients") = coef,
        Rcpp::Named("stderr")       = stderrest
    ) ;

} 
```

**fastLm.cpp 已更改**

```
#include <Rcpp.h>
#include <RcppArmadillo.h>
using namespace Rcpp;

// [[Rcpp::export]]
extern "C" SEXP fastLm(NumericVector yr, NumericMatrix Xr) {

    int n = Xr.nrow(), k = Xr.ncol();

    arma::mat X(Xr.begin(), n, k, false);       // reuses memory and avoids extra copy
    arma::colvec y(yr.begin(), yr.size(), false);

    arma::colvec coef = arma::solve(X, y);      // fit model y ~ X
    arma::colvec resid = y - X*coef;            // residuals

    double sig2 = arma::as_scalar( arma::trans(resid)*resid/(n-k) );
                                                // std.error of estimate
    arma::colvec stderrest = arma::sqrt( sig2 * arma::diagvec( arma::inv(arma::trans(X)*X)) );

    return Rcpp::List::create(
        Rcpp::Named("coefficients") = coef,
        Rcpp::Named("stderr")       = stderrest
    ) ;

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T06:52:22.587

`RcppArmadillo`您需要使用`Rcpp::depends`伪属性指示依赖关系。这将负责查找`RcppArmadillo`标题和链接`blas`等 `lapack`...

```
#include <RcppArmadillo.h>
// [[Rcpp::depends(RcppArmadillo)]]

using namespace Rcpp;

// [[Rcpp::export]]
List fastLm(NumericVector yr, NumericMatrix Xr) {

    int n = Xr.nrow(), k = Xr.ncol();

    arma::mat X(Xr.begin(), n, k, false);       // reuses memory and avoids extra copy
    arma::colvec y(yr.begin(), yr.size(), false);

    arma::colvec coef = arma::solve(X, y);      // fit model y ~ X
    arma::colvec resid = y - X*coef;            // residuals

    double sig2 = arma::as_scalar( arma::trans(resid)*resid/(n-k) );
                                                // std.error of estimate
    arma::colvec stderrest = arma::sqrt( sig2 * arma::diagvec( arma::inv(arma::trans(X)*X)) );

    return Rcpp::List::create(
        Rcpp::Named("coefficients") = coef,
        Rcpp::Named("stderr")       = stderrest
    ) ;

} 
```

此外，使用`#include <RcppArmadillo.h>`而不是`#include <Rcpp.h>`. **在正确的时间**`RcppArmadillo.h`处理包含，包含文件的顺序在这里非常重要。`Rcpp.h`

 **此外，您可以返回 a`List`并删除`extern "C"`.**

# javascript - 如果 django 表单提交失败，则运行 javascript

> ID：13678105
> 
> 赞同：0
> 
> 时间：2012-12-03T06:15:05.700
> 
> 标签：javascript, django, forms, submission

我有一个`django`用户可以在其中使用的应用程序`submit a form`。我已将此表单放在`div` `(say of id='mydiv_id')`最初不可见的（通过`css display:none`）中。当用户想要输入输入时，他单击`show`页面上的按钮，并且通过`javascript`使 div 可见`display:block`。

表单中的字段具有`{{myform.myfield.errors}}`，因此`ul class="errorlist"`如果验证失败，将创建一个。

如果表单验证失败，我想通过运行另一个 javascript 来保持表单可见。javascript 的主体将只是 `$('#mydiv_id').show();`

但是我应该如何运行呢？如果没有在 javascript 内部进行验证，你如何告诉 javascript django 表单验证失败？

我想我需要将以下内容放入 javascript 正文中。除此之外，我不知道如何告诉它表单提交失败。

```
$(document).ready(function(){

..
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:18:27.853

```
def method(request):
    if something_wrong:
        data['error'] = True
    return render_to_response('template.html', data) 
```

在 template.html 中，您可以添加 javascript 块：

```
{% if error %}
<script type='text/javascript'>
    //the javascript used to show the message
    $(function(){
        $('#mydiv_id').show();
    });
</script>
{%endif%} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:22:26.553

如果我很了解你

```
$(document).ready(function(){
    show = {% if form.errors %} true {% else %} false {% endif %}
    if (show) {
       $('#mydiv_id').show();
    }
    else {
    ....
    }

)}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:21:55.907

使用 javascript 进行表单验证是一件很聪明的事情，如果表单无效，为什么还要调用服务器呢？您只是通过使其进行表单验证来为您的服务器增加额外的开销。如果您不需要调用服务器来进行表单验证，那么您没有理由这样做，请使用 javascript 来执行此操作。

# prolog - 在 Prolog 中获取未绑定的列表尾

> ID：13678106
> 
> 赞同：0
> 
> 时间：2012-12-03T06:15:13.297
> 
> 标签：prolog

我正在尝试编写一个谓词，它将接受一个列表、一个数字和一个变量，然后将列表的前 N ​​个元素提供给变量。我能够做到这一点，但是在尝试使其更灵活以便它在到达列表末尾或 N 为 0 时停止时，我开始在列表末尾返回一个垃圾变量。这是我的代码：

```
take(_,0,_) :- !.
take([],_,_) :- !.
take([Head|Tail], Number, [Head|Result]) :- 
   Number > 0, 
   N1 is Number - 1, 
   take(Tail, N1, Result). 
```

当我尝试使用时`take([1,3,5,7], 3, L1)`，我得到了`L1 = [1, 3, 5|_G2028]`。

我认为这与我没有将 Result 定义为空列表有关，但我不知道如何做到这一点，同时保持谓词的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:29:35.207

将前 2 条规则更改为：

```
take(_,0,[]) :- !.
take([],_,[]) :- !. 
```

从您的代码中，我可以看到这是一个谓词，当第三个参数是从第一个参数中的列表中获取前导元素尽可能多但小于指定的第二个参数的数量的*结果*`take`时，该谓词返回 true 。

 *因此，当第二个参数为 0 时，您可以将输出限制为`[]`，因为您已达到限制。

当第一个参数是一个空列表时，您可以将输出限制为`[]`，因为无论如何您都不能接受任何东西。

如果没有上述约束，这意味着当要获取的最大元素数为 0 或原始列表为空时，任何东西都是有效的。

或者，您可以在一个规则中编写所有内容：

```
take(In, Num, Out) :- append(Out, _, In), 
                      length(Out, OutLen), length(In, InLen),
                      OutLen is min(Num, InLen), !. 
```

输出列表的长度是原始列表的长度 和 之间的最小值`Num`，它被用作`append`从原始列表中准确取出适当数量的元素的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-29T15:53:44.287

虽然[现有答案](https://stackoverflow.com/a/13678235/2936460)告诉您如何解决它，但我想尝试解释一下“垃圾变量”是什么。

> 我明白了`L1 = [1, 3, 5|_G2028]`。

列表中的那个变量`_G2028`, 是一个未实例化的变量。解释器知道某物在那里，但不知道该物是什么。

发生这种情况是因为前两个子句，

```
take(_,0,_) :- !.
take([],_,_) :- !. 
```

第一个说，意译，如果你从任何东西中取 0 项，你就可以得到任何东西。
第二个说，如果你从一个空列表中取出任意数量的项目，你可以得到任何东西。

所以解释器得到其中之一，因为它想要评估`take(Tail, N1, Result).`在那个点上，`Tail`是已知的，`N1`是已知的，但`Result`仍然是未知的。在调用这些子句中的任何一个之后，解释器都不是更聪明，因为它们都没有告诉它是什么`Result`。但是目标成功了，所以它会报告回来并告诉你`L1 = [1, 3, 5|_G2028]`。*

# c# - 运算符“==”不能应用于“WebMatrix.Data.DynamicRecord”类型的操作数

> ID：13678107
> 
> 赞同：0
> 
> 时间：2012-12-03T06:15:13.573
> 
> 标签：c#, asp.net, .net, sql, razor

我正在尝试使用 Razor 对名为 users (containinig an `id(int) username(nchar(10)`) and的表进行非常简单的用户名和密码验证，`password(char(32)`但我遇到了这个错误：

```
Operator '==' cannot be applied to operands of type 'WebMatrix.Data.DynamicRecord' and 'HasherMD5Main' 
```

`HasherMD5Main`我创建了一个.cs类，它执行 md5 哈希（在数据库中。

## 代码

```
@{// Initialize page
    var enteredusername = "";
    var enteredpassword = "";
    var ErrorMessage = "";

    // If this is a POST request, validate and process data
    if( IsPost ) {
        enteredusername = Request.Form["enteredusername"];
        enteredpassword = Request.Form["enteredpassword"];
        var hash = new HasherMD5Main( enteredpassword );
        if( enteredusername.IsEmpty() || enteredpassword.IsEmpty() ) {
            ErrorMessage = "You must specify a username and password.";
        }
        else {
            var db = Database.Open( "MyConnectionString" );
            var passwordquery = db.QuerySingle( "SELECT password FROM users WHERE username = @0", enteredusername );
            if( passwordquery == hash ) {
                Response.Redirect( "/Success" );
            }
            else {
                Response.Redirect( "/Failure" );
            }

        }
    }
}

@if( ErrorMessage != "" ) {
    <p>@ErrorMessage</p>
    <p>Please correct the errors and try again.</p>
}

<form method="post" action="">
    <fieldset>
        <legend>Log In to Your Account</legend>
        <ol>
            <li>
                <label>Username:</label>
                <input type="text" id="enteredusername" name="enteredusername" />
            </li>
            <li>
                <label>Password:</label>
                <input type="password" id="enteredpassword" name="enteredpassword" />
            </li>
            <li>
                <p>
                    <input type="submit" value="login" /></p>
            </li>
        </ol>
    </fieldset>
</form> 
```

关于如何简单地验证我的应用程序提供的散列密码是否与存储在数据库中的散列匹配的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:22:12.547

产生错误的行是：

> 如果（密码查询 == 哈希）

hash 是您的自定义 Md5 哈希器实例

> var hash = new HasherMD5Main(输入密码);

而 passwordquery 是来自数据库查询[WebMatrix.Data.DynamicRecord的结果集](http://msdn.microsoft.com/en-us/library/webmatrix.data.dynamicrecord%28v=vs.111%29.aspx)

> var passwordquery = db.QuerySingle("SELECT password FROM users WHERE username = @0", enteredusername );

您要做的是让您的 MD5 哈希计算哈希，然后将其与您可以从结果集中提取的结果值进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:05:55.487

if(passwordquery == hash) 是发生错误的地方。

当您比较某些东西时，两者都应该在比较之前最终归结为相同的类型。

问候， Pavan.G

# objective-c - 如何使用为 SQLite 创建的objective-c 代码中的alter table 命令插入差异。价值观

> ID：13678109
> 
> 赞同：-1
> 
> 时间：2012-12-03T06:15:28.617
> 
> 标签：objective-c

我想在我的应用程序中使用 SQLite 来插入和显示我们在 SQLite 中创建的表中的数据，我是 SQLite 的新手，所以在谷歌搜索时我遇到了链接[http://www.techotopia.com/index.php/ An_Example_SQLite_based_iPhone_Application](http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application)帮助我插入和显示这样的数据（我已将 URL 更改为示例 URL）

```
#import "MasterViewController.h"

#import "DetailViewController.h"

@interface MasterViewController () 
{
    NSMutableArray *_objects;
}
@end

@implementation MasterViewController

@synthesize detailViewController = _detailViewController;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Master", @"Master");
    }
    return self;
}

- (void)viewDidLoad
{
    NSString *docsDir;
    NSArray *dirPaths;
    alertFlg=1;

    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    // Build the path to the database file
    databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"contacts.db"]];

    NSFileManager *filemgr = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: databasePath ] == NO)
    {
        const char *dbpath = [databasePath UTF8String];

        if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
        {
            char *errMsg;
            const char *sql_stmt = "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT)";

            if (sqlite3_exec(contactDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
            {
                NSLog(@"Failed to create table") ;
            }
            sqlite3_close(contactDB);
        }
        else 
        {
               NSLog(@"Failed to open/create database") ;
        }
    }

    [super viewDidLoad];

    namearry = [[NSMutableArray alloc] init];
    costarry   = [[NSMutableArray alloc] init];
    discrarry  = [[NSMutableArray alloc] init];

    [self parseXMLFileAtURL:@"http://api.androidhive.info/pizza/?format=xml"];

    [self saveData];
    [self displayData];

}
- (void)saveData
{

    sqlite3_stmt    *statement;

    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
    {
        int i;
        for ( i=0; i<[namearry count]; i++) {
            NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS (name) VALUES ( \"%@\")", [namearry objectAtIndex:i]];

                                   const char *insert_stmt = [insertSQL UTF8String];

                                   sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL);
                                   if (sqlite3_step(statement) == SQLITE_DONE)
                                   {
                                       NSLog(@"Contact added");

                                   } else {
                                       NSLog(@"Failed to add contact") ;
                                   }
                                   sqlite3_finalize(statement);
        }
        sqlite3_close(contactDB);
    }
}

-(void)displayData
{
    const char *dbpath = [databasePath UTF8String];
    sqlite3_stmt    *statement;

    if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
    {
        NSString *querySQL = [NSString stringWithFormat: @"SELECT * FROM contacts "];

        const char *query_stmt = [querySQL UTF8String];

        if (sqlite3_prepare_v2(contactDB, query_stmt, -1, &statement, NULL) == SQLITE_OK)
        {
            while (sqlite3_step(statement) == SQLITE_ROW)
            {
                NSString *nameField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];

                [namearry addObject:nameField];
                NSLog(@"Match found");
            }
                     sqlite3_finalize(statement);
        }
    }
     sqlite3_close(contactDB);
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [namearry count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    }

    cell.textLabel.text = [namearry objectAtIndex:indexPath.row];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return NO;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   /* if (!self.detailViewController) {
        self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    }
    NSDate *object = [_objects objectAtIndex:indexPath.row];
    self.detailViewController.detailItem = object;
    [self.navigationController pushViewController:self.detailViewController animated:YES];*/
}

/*------------------------------------Parser's Code-----------------------------------------*/
-(void) parseXMLFileAtURL:(NSString *)URL
{
//    NSURL *url1=@"http://api.androidhive.info/pizza/?format=xml";
    feedParser = [[NSXMLParser alloc]initWithContentsOfURL:[NSURL URLWithString:URL]];
    // Set self as the delegate of the parser so that it will receive the parser delegate methods callbacks.
    [feedParser setDelegate:self];
    // Depending on the XML document you're parsing, you may want to enable these features of NSXMLParser.
    [feedParser setShouldProcessNamespaces:NO];
    [feedParser setShouldReportNamespacePrefixes:NO];
    [feedParser setShouldResolveExternalEntities:NO];
    [feedParser parse];
}
- (void)parserDidStartDocument:(NSXMLParser *)parser{       
}
- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
    if (alertFlg==1) 
    {
        alertFlg=0;
        NSString * errorString = [NSString stringWithFormat:@"Network Error", [parseError code]];
        UIAlertView * errorAlert = [[UIAlertView alloc] initWithTitle:@"Please check the internet connection" message:errorString delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [errorAlert show];
       // [errorAlert release];
    }
}
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{           
    currentElement =[elementName copy];
    if ([elementName isEqualToString:@"name"]) 
    {
        //namearry=[[NSMutableArray alloc] init];
        nameStrng =[[NSMutableString alloc] init];
    }
    else if ([elementName isEqualToString:@"cost"]) 
    {
        //costarry=[[NSMutableArray alloc] init];
        costStrng =[[NSMutableString alloc] init];
    }
    else if ([elementName isEqualToString:@"description"]) 
    {
        //discrarry=[[NSMutableArray alloc] init];
        descpStrng =[[NSMutableString alloc] init];
    }

}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{     
    if ([elementName isEqualToString:@"name"]) 
    {
        nameStr=nameStrng;
      //  NSLog(@"namestr:=%@",nameStrng);
        [namearry addObject:nameStrng];
    }
    else if ([elementName isEqualToString:@"cost"]) 
    {
        costStr=costStrng;
        [costarry addObject:costStrng];
    }
    else if ([elementName isEqualToString:@"description"]) 
    {
        descrpStr=descpStrng;
        [discrarry addObject:descpStrng];
    }

}
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if ([currentElement isEqualToString:@"name"]) 
    {
       // NSLog(@"appending string for name attribute:=%@",string);
        [nameStrng appendString:string];
    }
    else if ([currentElement isEqualToString:@"cost"]) 
    {
        [costStrng appendString:string];
    }
    else if ([currentElement isEqualToString:@"description"]) 
    {
        [descpStrng appendString:string];
    }

}
- (void)parserDidEndDocument:(NSXMLParser *)parser 
{

}

/*----------------------End Of The Parser's Code AND Start Of the TableView'S Code---------------------------*/
@end 
```

现在我想要的是在 viewDidLoad 方法中，如果它不存在，我们正在创建表，我们使用命令“创建”表，所以我想动态地创建创建表命令并改变属性，比如我们选择创建表仅使用名称，如果我们选择仅使用名称和编号创建表，或者如果我们选择创建具有多于这两个属性的表，则命令应相应更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T06:57:00.703

创建一个单独的方法来创建表并使用不同的属性调用该方法。

```
- (void)viewDidLoad
  {
     NSString *idField = @"ID INTEGER PRIMARY KEY AUTOINCREMENT";
     NSString *nameField = @"NAME TEXT";
     NSString *ageField = @"AGE INTEGER";

     // Make the field array using different attributes in different cases
     NSArray *fieldArray = [NSArray arrayWithObjects:idField,nameField,ageField, nil];

    [self createTable:fieldArray];

  }

- (void)createTable:(NSArray *)fieldArray
 {
    // Put all the code for create table and just change the query as given below
    NSString *queryString = [NSString stringWithFormat:@"CREATE TABLE IF NOT EXISTS CONTACTS (%@)",[fieldArray componentsJoinedByString:@","]];
    const char *sql_stmt = [queryString UTF8String];
 } 
```

# sql - 客户 GPS 坐标

> ID：13678110
> 
> 赞同：0
> 
> 时间：2012-12-03T06:15:38.820
> 
> 标签：sql, google-maps, gps, kml

我们是一家销售分销公司，每月为超过 15,000 名客户提供服务。我们已经使用我的 MS SQL 服务器中的 GPS 设备收集了所有客户 GEO 坐标以及客户详细信息（客户 ID、姓名、访问日期、访问顺序 ..）。我想将此信息导入谷歌地图，以绘制和显示每个销售人员的区域，并根据我对每个客户的访问模式在地图中定位每个客户。

请让我知道最好的方法来做同样的事情。这应该使我能够在地图中查看我的所有客户，并按访问日或销售员对其进行过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:32:42.257

您看过[Google Fusion Tables](https://support.google.com/fusiontables/answer/184641/)吗？您可以添加一个多边形图层来定义每个推销员的区域，并为访问日使用不同的颜色标记（使用 Fusion Tables Map Options 中的“bucket”选项）。

# asp.net-mvc - ASP.NET Web API 对 ASP.NET MVC 控制器的优势是什么？

> ID：13678114
> 
> 赞同：0
> 
> 时间：2012-12-03T06:15:50.923
> 
> 标签：asp.net-mvc, asp.net-web-api, compare

ASP.NET Web API 对 ASP.NET MVC 控制器的优势是什么？

据我所知，IIS + WebDAV 在使用“PUT”动词[1] 时与 ASP.NET Web API 发生冲突。

我们可以使用 ASP.NET MVC Controller & JsonResult 等与客户端进行通信，使用 HTTP GET+POST 并且没有更多的动词以获得更好的兼容性，那么 ASP.NET Web API 对 ASP.NET MVC 的优势是什么？

而且，ASP.NET Web API 应该只使用 desigend teens HTTP 动词。如果我想开发一个 Web API 让机器人**JUMP**，但**JUMP**不是标准的 HTTP 动词。那么如何设计网址呢？`http://localhost/api/robot/jump`? 但它不是 RESTful（RESTful url 不应包含动词）。

参考：[1] [http://forums.iis.net/t/1163441.aspx](http://forums.iis.net/t/1163441.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:11:12.887

如果您询问 Asp.Net 应用程序 .cs 文件和 MVC 中的控制器之间的区别。

1.  我们可以根据需要导航到 MVC 中所需的方法，但这在 Asp.Net web 中是不可能的。
2.  始终不会触发页面加载事件。
3.  我们可以返回部分结果/Json 结果/Javascript 结果等等。

与 Asp.Net 的生命周期不同，MVC 有自己的页面生命周期。

问候， Pavan.G

# php - php中如何显示多张图片上传显示？

> ID：13678117
> 
> 赞同：1
> 
> 时间：2012-12-03T06:16:17.990
> 
> 标签：php, javascript, html, magento, innerhtml

我在旧版本 1.3.2.4 中使用了 magento 扩展来准备。在此我使用上传多个产品图像上传和显示。

那么，您能否就此提出建议？

谢谢。

# php - Android 应用和下拉 MySQL

> ID：13678122
> 
> 赞同：0
> 
> 时间：2012-12-03T06:16:53.233
> 
> 标签：php, mysql, ajax, list, drop-down-menu

需要小帮助。

以这个例子（[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)）为例，我想做同样的，但如果你看到这部分代码：

```
form 
 select name="users" onchange="showUser(this.value)/select
 option value=""> Select a person: /option 
 option value="1"> Peter Griffin /option
 option value="2"> Lois Griffin /option 
 option value="3"> Glenn Quagmire /option 
 option value="4"> Joseph Swanson /option 
 /select 
/form 
```

是一个已经给出值的静态列表。

我想从我的数据库中取出名称值并使用数组创建一个下拉列表。

我的问题是我已经在 php 中制作了它，但是 android 应用程序无法读取 php，那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:27:39.760

你可以做一件事：

假设 $data 是一个包含下拉列表值的数组。

现在，你可以这样做：

```
$row=mysql_fetch_assoc();
$data=$row//array containing the values for drop down.
return json_encode($data); 
```

# prestashop - Prestashop 缺货

> ID：13678127
> 
> 赞同：0
> 
> 时间：2012-12-03T06:17:39.563
> 
> 标签：prestashop

默认情况下，我的商店不允许延期交货。我希望允许某些产品。所以我去产品并改变它以允许它。到目前为止，一切都很好。

我的问题是当有人缺货该产品时。我希望系统自动将其状态更改为“正在退货”（它没有这样做），并且当我有库存产品时，它再次将其更改为已接受付款。

这是一种方法吗？如果是这样，怎么做？

非常感谢各位

编辑

我想做的是：

*   例如，我想明星销售一种仅在 10 天后上市的产品。
*   所以我用零库存添加它并选择“允许延期交货”
*   当客户订购此产品并付款时，我希望将他们的订单状态设置为 BACKORDER，然后收到一封电子邮件通知此

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:06:59.547

那么您是否希望客户无法购买延期交货的产品？因为现在它应该是这样工作的：如果产品缺货=您无法购买，如果缺货=您可以以所谓的负商店级别购买它。您想要实现的可能称为等待列表，而不是默认的 Prestashop 行为。[addons.prestashop.com 上几乎没有为此付费](http://addons.prestashop.com/en/checkout/5224-pre-order-and-waiting-list.html) 的[扩展程序](http://addons.prestashop.com/en/front-office-features-prestashop-modules/5014-waiting-list-pro.html)

# android - 想通过名字和姓氏在 ListView 中搜索名字吗？

> ID：13678129
> 
> 赞同：0
> 
> 时间：2012-12-03T06:17:44.793
> 
> 标签：android

我有姓名列表（名字 + 姓氏），并希望在该 listView 中按名字和姓氏进行搜索。我正在使用此代码仅按名称搜索

[ListView 示例中的 Android 搜索](http://android-helper.blogspot.in/2011/03/android-search-in-listview-example.html?showComment=1354514801525#c1308952476846602186)

谁能给我提示需要对代码进行哪些更改以便我也可以按名字和姓氏进行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:52:46.907

ArrayAdapter 已经具备过滤功能，ListView 可以接受搜索文本，所以不需要重新发明轮子。

例子：

每当数据有多个对象时，让一个类保存数据：

```
Public class FullName {
  public final String firstName;
  public final String lastName;

  public Fullname(String fn, String ln){
    this.firstName = fn;
    this.lastName  = ln;
  }

  @Override
  public String toString(){
    // this is what ArrayAdapter uses for display and search
    return firstName + " " + lastName; 
  }
} 
```

内部活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  ListView nameList = new ListView(this);

  setContentView(nameList);

  ArrayAdapter<FullName> nameAdapter = new ArrayAdapter<FullName>(this,android.R.layout.simple_list_item_1);

  nameAdapter.add( new FullName("John","Doe")    );
  nameAdapter.add( new FullName("Bob","Carson")  );
  nameAdapter.add( new FullName("Kyle","Connor") );

  nameList.setAdapter(nameAdapter);

  //bring up the keyboard, start typing on a ListView and it will filter out matching results
  nameList.setTextFilterEnabled(true);
} 
```

如果您真的想使用 EditText 进行搜索：

```
 nameAdapter.getFilter.filter(myEditText.getText()); 
```

清除过滤器：

```
 nameAdapter.getFilter.filter(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:42:24.687

只需遵循以下代码：

```
String products[] = {"Dell Inspiron", "HTC One X", "HTC Wildfire S", "HTC Sense", "HTC Sensation XE",
                                    "iPhone 4S", "Samsung Galaxy Note 800",
                                    "Samsung Galaxy S3", "MacBook Air", "Mac Mini", "MacBook Pro"};

        lv = (ListView) findViewById(R.id.list_view);
        inputSearch = (EditText) findViewById(R.id.inputSearch);

        // Adding items to listview
        adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, products);

        lv.setAdapter(adapter); 

MainActivity.java
inputSearch.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
        // When user changed the Text
        MainActivity.this.adapter.getFilter().filter(cs);
    }

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

# salesforce - 参数值 null 被重定向到 url

> ID：13678131
> 
> 赞同：-1
> 
> 时间：2012-12-03T06:18:02.093
> 
> 标签：salesforce, apex-code, visualforce

嗨，我正在用代码编写一个简单的控制器类

```
public class OMTime1 {

    public String xx { get; set; }

  public PageReference continue1(){
    String url='/apex/OneMoreTime?id='+ApexPages.currentPage().getParameters().get('id')+'&process='+xx;
    PageReference page=new PageReference(url);
     page.setRedirect(true);
        return page;
    }
} 
```

和一个带有代码的简单 VF 页面

```
<apex:page controller="OMTime1" >
  <!-- Begin Default Content REMOVE THIS -->

  <!-- End Default Content REMOVE THIS -->
  <apex:form >
   <apex:selectList id="chooseColor" value="{!xx}" size="1">
            <apex:selectOption itemValue="1" itemLabel="Terminate Resource"/>
            <apex:selectOption itemValue="2"
             itemLabel="Change Resource Position at Same Location"/>
            <apex:selectOption itemValue="3" itemLabel="Change Resource Position with in same Location "/>
            <apex:selectOption itemValue="4"  itemLabel="Change Resource Position to a Different Location"/>
        </apex:selectList>
               </apex:form>
               <apex:form >
             <apex:commandButton value="Continue" action="{!continue1}"    id="theButton"/>
</apex:form>
</apex:page> 
```

当用户单击按钮名称作为继续页面时，我的任务将重定向到它的 URL /apex/OneMoreTime?id=record_id&process=some_value some_value=1,2,3, or 4 但是当我单击按钮时它重定向到 /apex/ OneMoreTime?id=record_id&process=null

为什么这个空值出现在参数中我想重定向一个与选择选项标签相关的值。请建议如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:32:04.103

简短的回答：因为`<apex:commandButton>`坏了；）

最近我在 Salesforce 专用的 stackexchange 网站上发布了 2 个最常见的解决方法的解释：[https ://salesforce.stackexchange.com/questions/4937/command-button-vs-command-link](https://salesforce.stackexchange.com/questions/4937/command-button-vs-command-link)

使用 an `<apex:commandLink styleClass="btn">`，它会在看起来几乎与按钮相同的情况下工作。

# c - 单个 UDP 数据包处理的机器指令计数

> ID：13678133
> 
> 赞同：0
> 
> 时间：2012-12-03T06:18:18.053
> 
> 标签：c, linux, networking, linux-kernel, udp

有没有办法计算用于特定应用程序或程序的机器周期或机器指令的数量？

我试图弄清楚当数据包进入 NIC 时，有多少机器指令用于 linux 中的单个 UDP 数据包处理，直到它被提供给试图获取它的应用程序。通过获取此信息，我们可以发现为数据包处理增加了多少内核开销。

# html - HTML5：其他标签内有效标签的参考

> ID：13678139
> 
> 赞同：4
> 
> 时间：2012-12-03T06:19:06.977
> 
> 标签：html, validation

不久前，我正在使用 HTML5 的[w3c 验证器](http://validator.w3.org/#validate_by_input)，并且正在尝试使用标签来替换已弃用的`<tt>`标签。我输入了这个小例子：

```
<!DOCTYPE html>
<html>
<head><title>Valid tags inside other tags</title></head>
<body>

<p>Inside paragraph you cannot use <pre>preformated text</pre></p>

</body>
</html> 
```

并得到这个错误：

> 第 6 行，第 66 列：范围内没有 p 元素，但看到了 ap 结束标记。

但是当我更改`<pre>`标签的`<code>`标签时，没有引发错误。

我想这是因为您不能在段落中包含预先格式化的文本，但是我没有运气搜索正则表达式或可以将我指向其他标签内的有效标签的东西。

任何人都可以指出我这样的资源吗？

编辑：

原来我不擅长阅读文档，而且我没有看过块级元素。所以，现在的问题是，我如何知道哪些是有效的内联元素以及如何在其他块级元素中使用块级元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T11:46:06.343

在 HTML5 中，旧的类别`block`和`inline`已被扩展并被[新的内容模型](http://www.w3.org/TR/html5/content-models.html)取代。`block`和之间的区别现在只[在 CSS 中](http://www.w3.org/TR/CSS2/visuren.html#propdef-display)`inline`真正重要。

如果您查看[规范中的任何特定元素，](http://www.w3.org/TR/html5/the-code-element.html#the-code-element)您会看到它具有它所属的[内容类别](http://www.w3.org/TR/html5/content-models.html#kinds-of-content)列表、可以使用该元素的类别以及其后代的允许内容模型。

该[`p`元素](http://www.w3.org/TR/html5/the-p-element.html#the-p-element)具有短语内容的内容模型，因此它不能包含[`pre`元素](http://www.w3.org/TR/html5/the-pre-element.html#the-pre-element)，因为它只能用于预期流内容的地方。

# android - Joda-Time 2.1 和 Android - NoClassDefFoundError

> ID：13678147
> 
> 赞同：3
> 
> 时间：2012-12-03T06:20:33.077
> 
> 标签：android, jodatime

尝试`DateTime`在 Android 应用程序 (API 15) 中使用，但获取以下内容`logcat`：

```
E/dalvikvm(794): Unable to resolve Lorg/joda/time/base/AbstractInstant; annotation class 1383
D/AndroidRuntime(794): Shutting down VM
W/dalvikvm(794): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
E/AndroidRuntime(794): FATAL EXCEPTION: main
E/AndroidRuntime(794): java.lang.NoClassDefFoundError: org/joda/convert/ToString
E/AndroidRuntime(794):  at java.lang.reflect.Method.getDeclaredAnnotations(Native Method)
E/AndroidRuntime(794):  at java.lang.reflect.Method.getDeclaredAnnotations(Method.java:267)
E/AndroidRuntime(794):  at com.fasterxml.jackson.databind.introspect.AnnotatedClass._addMixUnders(AnnotatedClass.java:999)
.... 
```

我有一个 /libs 目录，它有 joda-time-2.1.jar。我错过了一些明显的东西吗？

* * *

我应该更仔细地查看错误堆栈 - 特别是以下行：java.lang.NoClassDefFoundError: org/joda/convert/ToString

那是来自 jar joda-convert，而不是 joda-time，并且 joda-convert jar 文件不在我的 libs 目录中。

注意：似乎不需要显式导出 jar

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:31:40.683

您需要将 joda-convert.jar 添加到您的 libs 文件夹中。[从http://sourceforge.net/projects/joda-convert/files/joda-convert/](http://sourceforge.net/projects/joda-convert/files/joda-convert/)下载 jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T09:40:22.223

你应该使用[joda-time-android](https://github.com/dlew/joda-time-android)。这是适用于 android 的 jodatime 库。

# java - MyBatis 没有返回空值列

> ID：13678148
> 
> 赞同：2
> 
> 时间：2012-12-03T06:20:42.130
> 
> 标签：java, migration, ibatis, mybatis

我正在查询返回 java.util.HashMap。当查询返回 1 行或更多行时，它返回 hashmap，但是当查询返回 0 行时，我得到空列表，即 [null]。在 IBatis 中并非如此。在 IBatis 中，当返回 0 行时，它返回带有列表的 hashmap，即 [Map(columnName1:null,columnName12:null) 作为返回值。

我可以做任何配置来获得相同的结果吗？

我的Mybatis配置xml

```
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD SQL Map Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
<settings>
    <setting name="jdbcTypeForNull" value="NULL"/>
</settings>
<typeAliases>
</typeAliases>

<mappers>
    <mapper resource="Mapper.xml" />
    <mapper resource=".." />

</mappers>
</configuration> 
```

我的 Mapper.xml ：

```
 <select id="select__XR_SEGMENT_IDENTIFIER__By__SEGMENT_SEC_ID" parameterType="java.math.BigDecimal" resultType="java.util.HashMap">
    select 
        a1 , b2 , c3
        , d4 , e5
        , f6, g7
    from 
        abc as left join xyz xy on as.a = xyz.a
    where 
        as.a = #{value}
        and as.FLAG_ACTIVE = 'Y'
  </select> 
```

任何帮助表示赞赏。

谢谢，斯旺南德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T17:44:11.397

似乎 3.2 版本将对此进行设置。

看看： [http ://code.google.com/p/mybatis/issues/detail?id=377](http://code.google.com/p/mybatis/issues/detail?id=377)

# .net - 实体框架存储过程函数导入与关联的数据库对象

> ID：13678153
> 
> 赞同：-1
> 
> 时间：2012-12-03T06:21:09.170
> 
> 标签：.net, entity-framework, stored-procedures, edmx

假设在 SQL 中，我有两个表：

![在此处输入图像描述](../Images/b7dea5d2d28378e1fd060bacb9b832b5.png)

在我的 EDMX 中，我有一个用于 SPROC 的函数导入，它返回与表 A 的实体类型相对应的列。

如果在 SPROC 中，我从表 B 中选择了相应的数据，那么当我请求 ABName 时，Entity Framework (4.1) 是否会知道在稍后对数据库进行延迟提取的情况下关联该数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:58:18.283

.NET 4.0 中的函数导入只能从单个表中选择数据。您需要两个单独的存储过程来加载主体实体和依赖实体。[仅通过某些扩展](http://archive.msdn.microsoft.com/EFExtensions)支持 EF 4.0 中的多个结果集。

.NET 4.5 还[支持具有多个结果集的存储过程，](http://msdn.microsoft.com/en-us/data/jj691402)但至少在 VS 2012 RTM 中，设计器不支持此功能（您必须在 EDMX 的 XML 中手动完成）。如果它在 VS 2012 年 11 月更新中得到修复，我还没有尝试过。

一旦您为主体表和从属表返回结果集的存储过程，EF 将确保正确设置关系，并且您始终可以关闭延迟加载以确保没有对数据库的其他查询。

# c++ - 取消 C++ 11 异步任务

> ID：13678155
> 
> 赞同：15
> 
> 时间：2012-12-03T06:21:21.597
> 
> 标签：c++, asynchronous, c++11

如何停止/取消使用`std::async`和策略创建的异步任务`std::launch::async`？换句话说，我已经使用未来对象启动了在另一个线程上运行的任务。有没有办法取消或停止正在运行的任务？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-04T01:45:34.267

简而言之，没有。

更长的解释：在标准 C++ 中没有取消任何线程的安全方法。这将需要取消线程。这个特性在 C++11 标准化过程中已经讨论过很多次，普遍的共识是没有安全的方法可以这样做。据我所知，在 C++ 中进行线程取消的主要考虑方法有三种。

1.  中止线程。这更像是一个紧急停止。不幸的是，它不会导致堆栈展开或调用析构函数。线程可能处于任何状态，因此可能持有互斥锁，堆分配的数据将被泄露，等等。这显然永远不会被考虑太久，因为它会使整个程序未定义。如果您想自己执行此操作，则只需使用`native_handle`即可。然而，它将是不可移植的。

2.  强制取消/中断点。当请求线程取消时，它会在内部设置一些变量，以便下次调用任何预定义的中断点集（例如睡眠、等待等）时，它会抛出一些异常。这将导致堆栈展开并且可以进行清理。不幸的是，这种类型的系统很难让任何代码异常安全，因为大多数多线程代码会突然抛出。这是`boost.thread`使用的模型。它用于`disable_interruption`解决一些问题，但除了最简单的情况外，要解决任何问题仍然非常困难。`Boost.thread`使用这个模型，但它一直被认为是有风险的，可以理解的是，它没有与其他模型一起被接受到标准中。

3.  自愿取消/中断点。最终，这归结为在您需要时自己检查某些条件，并在适当的情况下以受控方式自行退出线程。我隐约记得一些关于添加一些库功能来帮助解决这个问题的讨论，但从未达成一致。

我只会使用 3 的变体。例如，如果您使用的是 lambda，那么很容易引用一个可以不时检查的原子“取消”变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T21:22:07.983

在 C++11 中（我认为）没有取消线程的标准方法。如果你得到 std::thread::native_handle()，你可以用它做一些事情，但这不是可移植的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-12T11:32:56.450

也许你可以通过检查一些条件来这样做：

```
class Timer{
public:
    Timer():timer_destory(false){}
    ~Timer(){
        timer_destory=true;
        for(auto result:async_result){
            result.get();
        }
    }
    int register_event(){
        async_result.push_back(
            std::async(std::launch::async,[](std::atomic<bool>& timer_destory){
                while(!timer_destory){
                //do something
                }
            },std::ref(timer_destory))
            );
    }
private:
    std::vector<std::future<int>> async_result;
    std::atomic<bool> timer_destory;
} 
```

# android - 在Android抛出异常中将文件解码为Bitmap

> ID：13678156
> 
> 赞同：0
> 
> 时间：2012-12-03T06:21:23.613
> 
> 标签：android, image, download

> **可能重复：**
> [Android：将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

我开发了将文件解码为位图的应用程序。我完成了以下代码，但它总是抛出内存异常

```
private Bitmap decodeFile(File f) {
            Bitmap bmp = null;
    FileInputStream fis = null;
    try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inTempStorage = new byte[16*1024];
        o.inJustDecodeBounds = true;
        o.inPurgeable=true;
        //if(!f.exists()) f.createNewFile();

        if(!f.exists()) f.createNewFile();

        fis = new FileInputStream(f);
        BitmapFactory.decodeStream(fis, null, o);
        try {
            fis.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        fis = null;
        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE
                    || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inTempStorage = new byte[16*1024];
        o2.inSampleSize = scale;            
        o2.inPurgeable=true;
        o2.inTempStorage = new byte[16*1024];

        fis = new FileInputStream(f);
        bmp = BitmapFactory.decodeStream(fis);
        if (fis != null)
            fis.close();
        fis = null;
        return bmp;
        // return BitmapFactory.decodeFile(f.getAbsolutePath(), o2);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {

        System.gc();
        try {
            if (fis != null)
                fis.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }
        fis = null;

    }
          return null;
} 
```

添加了日志猫

```
12-03 12:03:05.070: E/AndroidRuntime(30696): FATAL EXCEPTION: main
12-03 12:03:05.070: E/AndroidRuntime(30696): java.lang.OutOfMemoryError
12-03 12:03:05.070: E/AndroidRuntime(30696):    at  android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:527)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:301)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at com.dexterity.iPinion.RootActivity.readFromSDCard(RootActivity.java:1984)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at com.dexterity.iPinion.RootActivity.setBrandingImage(RootActivity.java:285)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at com.dexterity.iPinion.RootActivity.access$0(RootActivity.java:252)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at com.dexterity.iPinion.RootActivity$1.handleMessage(RootActivity.java:515)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at android.os.Looper.loop(Looper.java:137)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at  android.app.ActivityThread.main(ActivityThread.java:4745)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at java.lang.reflect.Method.invokeNative(Native Method)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at java.lang.reflect.Method.invoke(Method.java:511)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at   com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-03 12:03:05.070: E/AndroidRuntime(30696):    at dalvik.system.NativeStart.main(Native   Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:28:48.183

您正在设置 BitmapFactory.Options，但您没有将它们传递给您的 BitmapFactory.decodeStream。

你有：

```
BitmapFactory.decodeStream(fis); 
```

应该：

```
BitmapFactory.decodeStream(fis, o2); 
```

另请阅读[Android 的显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

此外，根据您的设备，您可能只有很少的运行时内存。对于 24MB 或更少的旧设备来说尤其如此，大多数较新的设备是 64MB 或更大。你可以检查

```
Runtime.getRuntime().maxMemory() 
```

此外，您可以通过将 'android:largeHeap="true" ' 添加到 AndroidManifest.xml 文件来强制使用大堆。在我的 Galaxy Nexus 上将我的堆推到 254MB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:29:36.287

Android内存非常低约14mb

要在您的应用程序中使用位图，请使用此链接，使用 bitmpas 的官方 android 链接

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# php - 如何启动 zoneminder 服务器

> ID：13678157
> 
> 赞同：0
> 
> 时间：2012-12-03T06:21:38.460
> 
> 标签：php, ubuntu, zoneminder

我按照 zone minder 给出的说明安装 zoneminder。安装后，他们给出了启动 zomeminder 服务器的命令

“zmpkg.pl start”但是当我使用它时我得到了这个错误。

```
Warning, overriding installed ./zm.conf file with local copy
Bareword "ZM_PATH_LOGS" not allowed while "strict subs" in use at /usr/share/perl5/ZoneMinder/Debug.pm line 265.
Compilation failed in require at /usr/share/perl5/ZoneMinder.pm line 34.
BEGIN failed--compilation aborted at /usr/share/perl5/ZoneMinder.pm line 34.
Compilation failed in require at /usr/bin/zmpkg.pl line 45.
BEGIN failed--compilation aborted at /usr/bin/zmpkg.pl line 45. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:25:18.510

Zoneminder 需要一个 Web 服务器和一个后台任务：

```
 service httpd start
 service zoneminder start 
```

从[开始 ZoneMinder](http://www.zoneminder.com/wiki/index.php/Main_Documentation#Start_ZoneMinder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T22:48:11.600

查看SQL转储导入是否有问题

就我而言，在 Ubuntu 14.04 的安装手册中，它被要求导入数据库转储

```
MySQL -uroot -p < /usr/share/zoneminder/db/zm_create.sql 
```

由于创建“日志”表时出错，此操作失败并停止。然后我编辑了 SQL 文件以添加

```
DROP TABLE IF EXISTS `Logs`; 
```

前

```
CREATE TABLE `Logs` ( 
```

然后成功导入转储。然后`zm`服务正确启动，没有错误

# jquery - 使用 jquery 加载时显示 svg 渲染百分比

> ID：13678158
> 
> 赞同：-1
> 
> 时间：2012-12-03T06:21:40.687
> 
> 标签：jquery, html, svg, progress-bar

我需要帮助显示百分比呈现的 svg，而页面正在加载 jquery。我有一个巨大的 svg 动画要加载并显示加载消息。

更多细节：

我有一个 svg 动画文件，它需要很长时间才能加载，所以在那段时间里，我想向访问者传递一些欢迎信息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:25:45.880

我能够使用 ajaxProgress 插件[http://www.kpozin.net/ajaxprogress解决这个问题](http://www.kpozin.net/ajaxprogress)

不管怎么说，多谢拉。

这是代码片段：

```
    $.ajax("/myfile", {progress: function(jqXHR, progressEvent) {
        如果（progressEvent.lengthComputable）{
            console.log("加载" + (Math.round(progressEvent.loaded / progressEvent.total * 100)) + "%");
        } 别的 {
            console.log("加载中...");
        }
    }});

```

# android - 从 Java 代码更改 XML 选择器（不可绘制）

> ID：13678160
> 
> 赞同：1
> 
> 时间：2012-12-03T06:21:47.483
> 
> 标签：android, xml, selector, statelistdrawable

我正在尝试创建一个通用的自定义组合框库。

如何更改 xml 代码 -> java 代码。

请给我提示。

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="true" android:state_pressed="false">
        <shape android:shape="rectangle">            
<padding android:bottom="5dp" android:left="5dp" android:top="5dp" />
            <stroke android:width="1px" android:color="@color/textbox_border_color" />
            <solid android:color="@color/textbox_nomal_color" />
            <corners android:bottomRightRadius="15dp" />
        </shape>
    </item>
    <item android:state_enabled="true" android:state_pressed="true">
        <shape android:shape="rectangle">
            <padding android:bottom="5dp" android:left="5dp" android:top="5dp" />
            <stroke android:width="1px" android:color="@color/textbox_border_color" />
            <solid android:color="@color/textbox_pressed_color" />
            <corners android:bottomRightRadius="15dp" />            
        </shape>
    </item>
    <item android:state_enabled="false"><shape android:shape="rectangle">
            <padding android:bottom="5dp" android:left="5dp" android:top="5dp" />
            <stroke android:width="1px" android:color="@color/textbox_border_color" />
            <solid android:color="@color/textbox_disable_color" />
            <corners android:bottomRightRadius="15dp" />
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-28T19:13:57.140

使用[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)通过代码查看选择器：

```
StateListDrawable states = new StateListDrawable();
states.addState(new int[] {android.R.attr.state_pressed},
    getResources().getDrawable(R.drawable.pressed));
states.addState(new int[] {android.R.attr.state_focused},
    getResources().getDrawable(R.drawable.focused));
states.addState(new int[] { },
    getResources().getDrawable(R.drawable.normal));

imageView.setImageDrawable(states);  //YOUR IMAGE HERE
//AND FOR BUTTON
 button.setBackgroundDrawable(states);//FOR BUTTON 
```

这可能会有所帮助

# blackberry - 应用程序未在旧模拟器中运行

> ID：13678162
> 
> 赞同：0
> 
> 时间：2012-12-03T06:21:53.943
> 
> 标签：blackberry, blackberry-simulator

我的应用程序没有运行一个带有 Blackberry JRE 5,6 的旧模拟器。该项目在带有 JRE 7（型号 9900、9810、9860）的新模拟器上运行良好。应用程序的内存大小超过~6MB。

我尝试以所有这些方式清理应用程序。在较低的模拟器中，COD 文件也会部署在模拟器中，但它不会显示在下载文件夹中。

可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:49:38.523

您在哪个 BlackBerry JRE 中开发了您的应用程序？请注意，BlackBerry 应用程序不向后兼容，即在 JRE 7.0 中开发的应用程序将无法在 OS 7 下运行，因为并非 JRE 7 中使用的所有 API 在旧操作系统中都可用。BlackBerry 应用程序是向前兼容的，并且要在 OS 5、6 和 7 上运行的应用程序，您应该在 JRE 5 中开发应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:36:46.707

你说“~6MB”。这非常接近旧版本 BBOS 上的最大应用程序大小。您可能需要将您的应用程序分解为多个 cod，以保持 cod 组的大小更小。

# css - epub 2 栏分页符和布局

> ID：13678164
> 
> 赞同：2
> 
> 时间：2012-12-03T06:21:57.057
> 
> 标签：css, epub, css-multicolumn-layout

我正在为特定设备创建一个 2 列的 epub 书。我的问题是，当我使用 css 指定 时`columns ( -webkit-column-count: 2; -webkit-column-rule: 0px;)`，最终结果是：

在第 1 页上显示（第 1 部分 | 第 3 部分），以及

在第 2 页上，它显示了这首诗的（第 2 部分 | 第 4 部分）。

我宁愿以更自然的书流来做，这应该显示

（第 1 部分 | 第 2 部分）第 1 页，然后继续

（第 3 部分 | 第 4 部分）第 2 页。

有没有办法存档这个？

一些附加说明：

1.  我试图限制列高，但它所做的只是添加第三列，这不是我想要的。
2.  这本书的内容是动态生成的，因此我无法提前指定休息的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:28:04.070

您将列数应用于什么？

[http://jsfiddle.net/carolrmckay/FECr9/4/](http://jsfiddle.net/carolrmckay/FECr9/4/)

```
.columncount
{
  -webkit-column-count: 2; -webkit-column-rule: 0px;   
}
strong
{
 font-weight:bold;   
}

<ul>
    <li class="columncount"><p><strong>Chapter</strong> 1 – Down the Rabbit Hole: Alice is feeling bored while sitting on the riverbank with her sister, when she notices a talking, clothed White Rabbit with a pocket watch run past. She follows it down a rabbit hole when suddenly she falls a long way to a curious hall with many locked doors of all sizes. She finds a small key to a door too small for her to fit through, but through it she sees an attractive garden. She then discovers a bottle on a table labelled "DRINK ME", the contents of which cause her to shrink too small to reach the key which she has left on the table. A cake with "EAT ME" on it causes her to grow to such a tremendous size her head hits the ceiling.</p>

<p><strong>Chapter</strong> 2 – The Pool of Tears: Alice is unhappy and cries as her tears flood the hallway. After shrinking down again due to a fan she had picked up, Alice swims through her own tears and meets a Mouse, who is swimming as well. She tries to make small talk with him in elementary French (thinking he may be a French mouse) but her opening gambit "Où est ma chatte?" (that is "Where is my cat?") offends the mouse.

</p>

<p><strong>Chapter</strong> 3 – The Caucus Race and a Long Tale: The sea of tears becomes crowded with other animals and birds that have been swept away by the rising waters. Alice and the other animals convene on the bank and the question among them is how to get dry again. The mouse gives them a very dry lecture on William the Conqueror. A Dodo decides that the best thing to dry them off would be a Caucus-Race, which consists of everyone running in a circle with no clear winner. Alice eventually frightens all the animals away, unwittingly, by talking about her (moderately ferocious) cat.

</p>

<p><strong>Chapter</strong> 4 – The Rabbit Sends a Little Bill: The White Rabbit appears again in search of the Duchess's gloves and fan. Mistaking her for his maidservant, Mary Ann, he orders Alice to go into the house and retrieve them, but once she gets inside she starts growing. The horrified Rabbit orders his gardener, Bill the Lizard, to climb on the roof and go down the chimney. Outside, Alice hears the voices of animals that have gathered to gawk at her giant arm. The crowd hurls pebbles at her, which turn into little cakes. Alice eats them, and they reduce her again in size.

</p>

<p><strong>Chapter</strong> 5 – Advice from a Caterpillar: Alice comes upon a mushroom and sitting on it is a blue Caterpillar smoking a hookah. The Caterpillar questions Alice and she admits to her current identity crisis, compounded by her inability to remember a poem. Before crawling away, the caterpillar tells Alice that one side of the mushroom will make her taller and the other side will make her shorter. She breaks off two pieces from the mushroom. One side makes her shrink smaller than ever, while another causes her neck to grow high into the trees, where a pigeon mistakes her for a serpent. With some effort, Alice brings herself back to her usual height. She stumbles upon a small estate and uses the mushroom to reach a more appropriate height.

The Cheshire Cat

</p>

<p><strong>Chapter</strong> 6 – Pig and Pepper: A Fish-Footman has an invitation for the Duchess of the house, which he delivers to a Frog-Footman. Alice observes this transaction and, after a perplexing conversation with the frog, lets herself into the house. The Duchess's Cook is throwing dishes and making a soup that has too much pepper, which causes Alice, the Duchess, and her baby (but not the cook or grinning Cheshire Cat) to sneeze violently. Alice is given the baby by the Duchess and to her surprise, the baby turns into a pig. The Cheshire Cat appears in a tree, directing her to the March Hare's house. He disappears but his grin remains behind to float on its own in the air prompting Alice to remark that she has often seen a cat without a grin but never a grin without a cat.

</p>

<p><strong>Chapter</strong> 7 – A Mad Tea-Party: Alice becomes a guest at a "mad" tea party along with the March Hare, the Hatter, and a very tired Dormouse who falls asleep frequently, only to be violently woken up moments later by the March Hare and the Hatter. The characters give Alice many riddles and stories, including the famous 'Why is a raven like a writing desk?'. The Hatter reveals that they have tea all day because Time has punished him by eternally standing still at 6 pm (tea time). Alice becomes insulted and tired of being bombarded with riddles and she leaves claiming that it was the stupidest tea party that she had ever been to.
Alice trying to play croquet with a Flamingo.

</p>

<p><strong>Chapter</strong> 8 – The Queen's Croquet Ground: Alice leaves the tea party and enters the garden where she comes upon three living playing cards painting the white roses on a rose tree red because the Queen of Hearts hates white roses. A procession of more cards, kings and queens and even the White Rabbit enters the garden. Alice then meets the King and Queen. The Queen, a figure difficult to please, introduces her trademark phrase "Off with his head!" which she utters at the slightest dissatisfaction with a subject. Alice is invited (or some might say ordered) to play a game of croquet with the Queen and the rest of her subjects but the game quickly descends into chaos. Live flamingos are used as mallets and hedgehogs as balls and Alice once again meets the Cheshire Cat. The Queen of Hearts then orders the Cat to be beheaded, only to have her executioner complain that this is impossible since the head is all that can be seen of him. Because the cat belongs to the Duchess, the Queen is prompted to release the Duchess from prison to resolve the matter.

</p>

<p><strong>Chapter</strong> 9 – The Mock Turtle's Story: The Duchess is brought to the croquet ground at Alice's request. She ruminates on finding morals in everything around her. The Queen of Hearts dismisses her on the threat of execution and she introduces Alice to the Gryphon, who takes her to the Mock Turtle. The Mock Turtle is very sad, even though he has no sorrow. He tries to tell his story about how he used to be a real turtle in school, which the Gryphon interrupts so they can play a game.

</p>

<p><strong>Chapter</strong> 10 – Lobster Quadrille: The Mock Turtle and the Gryphon dance to the Lobster Quadrille, while Alice recites (rather incorrectly) "'Tis the Voice of the Lobster". The Mock Turtle sings them "Beautiful Soup" during which the Gryphon drags Alice away for an impending trial.

</p>

<p><strong>Chapter</strong> 11 – Who Stole the Tarts?: Alice attends a trial whereby the Knave of Hearts is accused of stealing the Queen's tarts. The jury is composed of various animals, including Bill the Lizard, the White Rabbit is the court's trumpeter, and the judge is the King of Hearts. During the proceedings, Alice finds that she is steadily growing larger. The dormouse scolds Alice and tells her she has no right to grow at such a rapid pace and take up all the air. Alice scoffs and calls the dormouse's accusation ridiculous because everyone grows and she can't help it. Meanwhile, witnesses at the trial include the Hatter, who displeases and frustrates the King through his indirect answers to the questioning, and the Duchess's cook.

</p>

<p><strong>Chapter</strong> 12 – Alice's Evidence: Alice is then called up as a witness. She accidentally knocks over the jury box with the animals inside them and the King orders the animals be placed back into their seats before the trial continues. The King and Queen order Alice to be gone, citing Rule 42 ("All persons more than a mile high to leave the court"), but Alice disputes their judgement and refuses to leave. She argues with the King and Queen of Hearts over the ridiculous proceedings, eventually refusing to hold her tongue. The Queen shouts her familiar "Off with her head!" but Alice is unafraid, calling them out as just a pack of cards; just as they start to swarm over her. Alice's sister wakes her up for tea, brushing what turns out to be some leaves and not a shower of playing cards from Alice's face. Alice leaves her sister on the bank to imagine all the curious happenings for herself.</li>
</ul>​ 
```

# c++ - 将字节数组（char数组）转换为整数类型（short、int、long）

> ID：13678166
> 
> 赞同：19
> 
> 时间：2012-12-03T06:22:02.033
> 
> 标签：c++

我想知道将字节数组转换为短/整数/长时系统字节序是否重要。如果代码在 big-endian 和 little-endian 机器上运行，这样做会不正确吗？

```
short s = (b[0] << 8) | (b[1]);
int i = (b[0] << 24) | (b[1] << 16) | (b[2] << 8) | (b[3]) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-03T06:28:29.093

是的，字节顺序很重要。在 little endian 中，最重要的字节位于 short 或 int 的上半部分 - 即 short 的位 8-15 和 int 的位 24-31。对于大端，字节顺序需要颠倒：

```
short s = ((b[1] << 8) | b[0]);
int i = (b[3] << 24) | (b[2] << 16) | (b[1] << 8) | (b[0]); 
```

请注意，这假定字节数组是小端顺序。字节数组和整数类型之间的字节序和转换不仅取决于 CPU 的字节序，还取决于字节数组数据的字节序。

建议将这些转换包装在可以知道（通过编译标志或在运行时）系统字节序并正确执行转换的函数中。

此外，为字节数组数据创建一个标准（例如，总是大端），然后使用`socket` `ntoh_s`和`ntoh_l`将有关字节序的决定卸载到`socket`知道这些事情的操作系统实现。请注意，默认网络顺序是大端（`n`in `ntoh_x`），因此将字节数组数据作为大端将是最直接的方法。

正如 OP (@Mike) 所指出的，`boost`它还提供字节顺序转换功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-14T14:14:39.520

```
// on little endian:

unsigned char c[] = { 1, 0 };       // "one" in little endian order { LSB, MSB }

int a = (c[1] << 8) | c[0];         // a = 1 
```

//------------------------------------------------ ----------------------------

```
// on big endian:

unsigned char c[] = { 0, 1 };       // "one" in big endian order { MSB, LSB }

int a = (c[0] << 8) | c[1];         // a = 1 
```

//------------------------------------------------ ----------------------------

```
// on little endian:

unsigned char c[] = { 0, 1 };       // "one" in big endian order { MSB, LSB }

int a = (c[0] << 8) | c[1];         // a = 1 (reverse byte order) 
```

//------------------------------------------------ ----------------------------

```
// on big endian:

unsigned char c[] = { 1, 0 };       // "one" in little endian order { LSB, MSB }

int a = (c[1] << 8) | c[0];         // a = 1 (reverse byte order) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-03T11:25:23.643

您可以为此使用联合。字节顺序很重要，要更改它，您可以使用大多数 c 编译器作为内在函数提供的 x86 BSWAP 指令（或其他平台的类似指令）。

```
#include <stdio.h>
typedef union{
  unsigned char bytes[8];
  unsigned short int words[4];
  unsigned int dwords[2];
  unsigned long long int qword;
} test;
int main(){
  printf("%d %d %d %d %d\n", sizeof(char), sizeof(short), sizeof(int), sizeof(long), sizeof(long long));
  test t;
  t.qword=0x0001020304050607u;
  printf("%02hhX|%02hhX|%02hhX|%02hhX|%02hhX|%02hhX|%02hhX|%02hhX\n",t.bytes[0],t.bytes[1] ,t.bytes[2],t.bytes[3],t.bytes[4],t.bytes[5],t.bytes[6],t.bytes[7]);
  printf("%04hX|%04hX|%04hX|%04hX\n" ,t.words[0] ,t.words[1] ,t.words[2] ,t.words[3]);
  printf("%08lX|%08lX\n" ,t.dwords[0] ,t.dwords[1]);
  printf("%016qX\n" ,t.qword);
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:25:22.637

不，就字节顺序而言这很好，但如果你`int`的 s 只有 16 位宽，你可能会遇到问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T06:59:44.593

您指定的问题，即您使用现有字节数组的位置，将在所有机器上正常工作。你最终会得到相同的答案。

但是，根据您创建该流的方式，它可能会受到字节序的影响，并且您最终可能不会得到您认为的数字。

# java - 在 Seam 中的事务提交时捕获异常

> ID：13678167
> 
> 赞同：1
> 
> 时间：2012-12-03T06:22:04.737
> 
> 标签：java, jpa, seam

每次用户单击删除按钮删除某些内容时，我都会调用

```
em.remove(entity) 
```

如果该实体仍然存在引用约束，我会看到一个 PersistenceException 被抛出，我可以捕捉到它以注意到用户。

但是，这仅适用于我可以在代码中看到的关系。例如：

```
A has an OneToMany relationship to B 
```

在少数特殊情况下，这种关系不会反映在代码中。例如：

```
Table A has a foreign key to Table B. But in code, there is no XtoX relationship between them 
```

在这些情况下，我无法捕捉到上面提到的 PersistenceException，这使得异常在屏幕上显得非常难看。

我认为异常出现在事务提交时。

反正有抓吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:56:19.217

在 JPA 中，`em.flush()`可以使用方法来捕获异常。完成此操作后，如果您有问题，您将得到异常。

例如：

```
public void insert(Group group) {
    try {
        em.persist(group);
        em.flush();
    } catch (PersistenceException pe) {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:29:29.940

我会考虑使用 Seam 的 (2.x) 异常处理工具，让您处理未捕获的异常——例如打印错误消息和/或重定向到错误页面——而不是可能为此目的耦合与持久性相关的逻辑。即使您仍然想刷新持久性上下文，这仍然可以为您提供更多错误处理实现方法。请参阅[Seam 文档中的异常处理](http://docs.jboss.org/seam/2.2.2.Final/reference/en-US/html/events.html#d0e5644 "接缝异常处理")。根据您的应用程序的需要，Seam ExceptionHandler 类可以扩展以进行进一步的定制。请参阅[此相关答案](https://stackoverflow.com/a/5458247/1388064 "扩展 Seam ExceptionHandler 组件")。

# netbeans - 如何在netbeans中保护项目密码？

> ID：13678169
> 
> 赞同：0
> 
> 时间：2012-12-03T06:22:12.890
> 
> 标签：netbeans

我想让我的项目在 Net beans 7.1 中受密码保护。如果有人尝试在文件中进行任何更改或在导入新项目时，用户需要输入密码。此功能是在安装 Net beans 本身时默认启用还是我们需要执行任何步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:19:46.937

我想这对于 Netbeans 是不可能的。如果您使用 svn/git/cvs 等，您只能为允许进行更改的人创建写入帐户。

如果您真的需要为您的项目设置密码保护，则必须使用外部程序。你可以在这里考虑[TrueCrypt](http://www.truecrypt.org/)。

如果你想阻止用户使用你的（编译的）代码，你可以使用像[ProGuard](http://proguard.sourceforge.net/)这样的混淆器。这里列出了更多的混淆器：[http ://www.dmoz.org/Computers/Programming/Languages/Java/Development_Tools/Obfuscators/](http://www.dmoz.org/Computers/Programming/Languages/Java/Development_Tools/Obfuscators/)

# ios - 仅适用于 iPhone 的应用程序

> ID：13678181
> 
> 赞同：1
> 
> 时间：2012-12-03T06:23:37.857
> 
> 标签：ios, xcode

我的应用被拒绝了，因为它在 iPad 上崩溃了。老实说，它应该崩溃，因为它没有我的应用程序使用的 sim 卡（用于发送消息）。我在我的构建中制作了设备：iphone 和部署目标 iphone。然而出于某种原因，苹果公司的人仍然试图在 iPad 上运行它。我怎样才能让我的应用程序只适用于 iPhone？没有理由捕获异常并尝试在 iPad 或 iPod touch 上运行它，因为大多数应用程序功能都包含发送短信。我该怎么办？以及如何确保应用程序只能在 iPhone 上运行，而不是在 iPad 或 iPod touch 上

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T06:31:12.167

我认为一种选择是在应用程序 info.plist 中提供`UIRequiredDeviceCapabilities`标志。你可以给`Telephony`or `sms`，所以它应该过滤掉没有 sim 卡的设备。

来自[iphone app 编程指南](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/iphoneappprogrammingguide.pdf)。

> **UIRequiredDeviceCapabilities** — App Store 使用此密钥来确定您的应用程序的功能，并防止将其安装在不支持您的应用程序所需功能的设备上

如果您阅读上述 pdf（第 93 页）中的**App Releted Resources部分，应该会更好。**

从上述文件中，

> 如果您的应用需要特定设备功能的存在或不存在才能运行，您必须使用应用的 Info.plist 文件中的 UIRequiredDeviceCapabilities 键声明这些要求。在运行时，除非设备上存在声明的功能，否则 iOS 无法启动您的应用程序。此外，App Store 需要此信息，以便它可以生成用户设备要求列表并防止用户下载他们无法运行的应用程序

它说，iOS 在启动之前会检查所需的设备功能。所以我认为你没有任何问题。关于模拟器，我不确定上述是否适用于他们，因为我们甚至可以在模拟器中模拟来电（你知道模拟器没有 SIM 卡）。所以我不确定在这种情况下有多少模拟器可以帮助你。

还有一件事，Apple 只会在应用程序在非 sim 设备上运行时崩溃时拒绝该应用程序。Apple 总是批准一个应用程序在使用它之前优雅地检查设备功能是否存在。在使用短信功能之前，您可以检查设备是否可以发送短信。

```
if([MFMessageComposeViewController canSendText]){
  // send sms
} 
```

如果它不能发送短信，显示同样的提示框。只需 2 行代码，但不那么头痛和紧张..

# python - Scipy、tf-idf 和余弦相似度

> ID：13678186
> 
> 赞同：2
> 
> 时间：2012-12-03T06:24:12.970
> 
> 标签：python, scipy, cluster-analysis, trigonometry, tf-idf

我正在尝试使用 python 根据 tf-idf 矩阵对一些文档进行聚类。

首先，我遵循公式的维基百科定义，使用标准化的 tf. [http://en.wikipedia.org/wiki/Tf-idf](http://en.wikipedia.org/wiki/Tf-idf)

Feat_vectors 以二维 numpy 数组开始，行表示文档，列表示术语，每个单元格中的值是每个文档中每个术语的出现次数。

```
import numpy as np

feat_vectors /= np.max(feat_vectors,axis=1)[:,np.newaxis]
idf = len(feat_vectors) / (feat_vectors != 0).sum(0)
idf = np.log(idf)
feat_vectors *= idf 
```

然后我使用 scipy 对这些向量进行聚类：

```
from scipy.cluster import hierarchy

clusters = hierarchy.linkage(feat_vectors,method='complete',metric='cosine')
flat_clusters = hierarchy.fcluster(clusters, 0.8,'inconsistent') 
```

但是，在最后一行会引发错误：

```
ValueError: Linkage 'Z' contains negative distances. 
```

余弦相似度从 -1 变为 1。但是，余弦相似度的维基百科页面指出[http://en.wikipedia.org/wiki/Cosine_similarity](http://en.wikipedia.org/wiki/Cosine_similarity)：

> 在信息检索的情况下，两个文档的余弦相似度范围 > 从 0 到 1，因为词频（tf-idf 权重）不能为负。

因此，如果我得到一个负相似性，我似乎在计算 tf-idf 时犯了一些错误。任何想法我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:56:56.100

我怀疑错误在以下行：

```
idf = len(feat_vectors) / (feat_vectors != 0).sum(0) 
```

由于您的逻辑向量将在总和中转换为 int，并且 len 是 int，因此您将失去精度。替换为：

```
idf = float(len(feat_vectors)) / (feat_vectors != 0).sum(0) 
```

为我工作（即产生了我对虚拟数据的期望）。其他一切看起来都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T02:47:11.783

我知道这是一篇旧帖子，但最近我自己似乎偶然发现了这个问题。事实上，一旦我自己的函数出现此错误，我什至使用 TfidfVectorizer（来自 sklearn.feature_extraction.text）生成 TFIDF 矩阵。这也没有帮助。

似乎用于相似性的余弦度量会产生负值。我尝试了欧几里得，它立即起作用。这是我找到的更详细答案的链接 - [https://stackoverflow.com/a/2590194/3228300](https://stackoverflow.com/a/2590194/3228300)

希望这可以帮助。

# android - android - 选项卡活动中的正常活动

> ID：13678189
> 
> 赞同：0
> 
> 时间：2012-12-03T06:24:28.760
> 
> 标签：android, tabbar

在我的应用程序中，我有两个活动，一个是带有 5 个选项卡的选项卡活动，另一个是正常活动。

起初，当应用程序启动时，我显示正常的活动 A，这与选项卡活动无关，但这里需要在底部显示 5 个选项卡按钮，全部处于未选中模式。

如何使用应用程序中使用的选项卡按钮列表显示正常活动

这是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:05:20.463

您无法使用开箱即用的组件做您想做的事情。所以让我建议一些替代方案。

1.  你可以像谷歌那样做。谷歌在地图和导航中所做的是他们使用带有溢出按钮的操作栏。如果您查看这两个应用程序，您会发现这些按钮的工作方式有点像选项卡。当用户然后单击它们时，他们可以导航到其中包含真实选项卡的其他活动，或者您可以使用溢出按钮作为实际的选项卡栏。
2.  使用 Osmdroid，因为它有地图，无需将其实现为`MapActivity`.
3.  作为最后的解决方案，您可以制作自己的标签...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T08:55:39.200

您不想将列表视图放在 tabHost 中。而不是这样做。

主要活动 - 实现 tabHost 的地方。您可以在此处创建选项卡并将其链接到特定活动。

**FirstTabActivity -**在此处使用您的 ListView 实现您的代码，就像正常活动一样。

**SecondTabActivity -**在此处使用您的 ListView 实现您的代码，就像正常活动一样。

**ThirdTabActivity -**在此处使用您的 ListView 实现您的代码，就像正常活动一样。

等等。

编辑

教程 - 见这里。

# android - 在Android中拆分字符串

> ID：13678191
> 
> 赞同：0
> 
> 时间：2012-12-03T06:24:42.067
> 
> 标签：android, string, textview

我在我的 Android 应用程序中使用以下代码拆分字符串。但它正在崩溃。就像 PatternSyntaxException 一样。

```
 String quotes_string = "1.agshjdgasfghsfjhsdfhjsfhjgj.#**#2.dfjngdhfkgjkfglkhjkh.#**#3.fdghjkhdgkklf";
 String[] apps = QuotesActivity.quotes_string.split("#**#");
 String quote = apps[0];
 txt_quotes.setText(quote); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:32:24.380

您可以尝试使用模式拆分：

```
 String quotes_string = "1.agshjdgasfghsfjhsdfhjsfhjgj.#**#2.
                                dfjngdhfkgjkfglkhjkh.#**#3.fdghjkhdgkklf";

 Pattern p = Pattern.compile("#\\*\\*#");

 String[] apps =p.split(quotes_string);

 String quote = apps[0];
 txt_quotes.setText(quote); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:34:31.993

我认为您需要转义“*”字符。将正则表达式更改为“#\\*\\*#”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:40:36.763

像这样试试

```
String quotes_string = "1.agshjdgasfghsfjhsdfhjsfhjgj.#**#2.dfjngdhfkgjkfglkhjkh.#**#3.fdghjkhdgkklf";

String[] apps = quotes_string.split("#\\*\\*#");
String quote = apps[0];
txt_quotes.setText(quote); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:42:26.547

正如Java 文档所说的 PatternSyntaxException[在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/PatternSyntaxException.html)

> 抛出未经检查的异常以指示正则表达式模式中的语法错误。

您可以使用上面建议的 PatternSplit

# android - 如何知道联系人是否在 ContentProvider Uri 表中唯一存在

> ID：13678192
> 
> 赞同：2
> 
> 时间：2012-12-03T06:24:44.313
> 
> 标签：android, android-contentprovider, android-sqlite

我如何检查 android 数据库中是否存在特定联系人以将其添加到数据库中，如果我检查联系人姓名可能存在另一个同名联系人的问题，所以任何人都可以帮助我，我的代码是：

```
String where = ContactsContract.Contacts.DISPLAY_NAME+" = ? ";
String[] whereArg = new String[] {displayName};

Cursor sameName = cResolver.query(ContactsContract.Contacts.CONTENT_URI, null, where, whereArg,null);

if (sameName == null || sameName.getCount() == 0) {
                    // TODO //the addContact method
                }else {

                    // do nothing, the contact is exsist

                } 
```

# hadoop - 如何在hadoop中处理长度前缀文件

> ID：13678194
> 
> 赞同：2
> 
> 时间：2012-12-03T06:24:57.863
> 
> 标签：hadoop, mapreduce, bigdata, fixed-length-record

我有一个巨大的 LPF（长度前缀文件）要由 Hadoop 处理。

LPF 文件的格式为：（第 1 条记录的大小，4 字节）（第 1 列的大小，2 字节）（第 1 列）（第 2 列的大小）（第 2 列）………….（第 n 列的大小）（第 n 列)（第二条记录的大小）（第一列的大小）（第一列）…………以此类推……

但是，似乎没有合适的 InputFormat 可用于读取各个记录，因为没有分隔符来分隔各个记录或列。

输入拆分必须发生在其中一个记录的末尾，以便在其他某个块中不存在半记录。否则，记录阅读器必须知道一半记录的结尾，以便它可以将它与另一半连接起来。请提出一些读取和处理 LPF 文件的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:48:20.933

> LPF 文件的格式为：（第 1 条记录的大小，4 字节）（第 1 列的大小，2 字节）（第 1 列）（第 2 列的大小）（第 2 列）………….（第 n 列的大小）（第 n 列）（第二条记录的大小）（第一列的大小）（第一列）…………等等..

我在谷歌上找不到关于 LPF 格式的太多信息，但是根据你的描述 - 在 reords 之间没有可恢复的分隔符（txt 文件使用换行符，序列文件在块之间有一个签名的 16 字节标题），你需要在单个映射器中处理文件（“不可拆分”）。

现在可能有一种算法允许您在输入文件中寻找随机位置（假设它没有使用不可拆分的压缩格式进行压缩，例如 gzip）。

例如，您可以寻找文件中的随机位置，将接下来的 4096 字节读入缓冲区并尝试检查从该位置恢复记录。当您解释不可能的记录或列大小时（-ve 或太大，不了解更多关于文件格式的信息，我无法进一步推测），将缓冲区左移 1 个字节并开始尝试再次恢复记录。

显然，这不是一个有效的算法，但您也许可以通过更多的格式知识/经验来构建它

不管怎样，您肯定需要编写自己的 InputFormat 和 RecordReader。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T19:20:58.177

为什么要阻止您拆分此文件？有很多具有可变长度条目的文件格式可以在 Hadoop 中很好地分割。

查看`InputFormat`和`RecordReader`类，看看是否可以实现自定义版本。如果是这样，这就是你应该做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:24:20.700

如果您有很多这些文件，我建议将文件设置为不可拆分（只需扩展您的 FileInputFormat 并将 isSplitable() 函数设置为 false）

另一种方法是在创建文件时为要处理的每个文件设置块大小。如果您已经知道要写入的文件的大小，这是可能的

# ascii - asp.net 页面呈现 ASCII 码

> ID：13678195
> 
> 赞同：1
> 
> 时间：2012-12-03T06:25:06.373
> 
> 标签：ascii

我们有一个 asp.net 网站，当我们发布该网站并将其部署到 IIS 时，一切都很好，但只有一页。没有 Html 只呈现 ASCII 代码。

第一行：}�Lx���9M����EKo~=#J��,�ѻ����l�^�f��ϫe�}�-����G?�׳l�} tȟ^��ż}���EV�GM���Q:~�/

查看源代码显示完全相同的内容（无 HTML）。我们在我们的项目中使用了 WebSockets 进行聊天，它在其他页面中也能正常工作。

# android - 打开 PDF 显示错误，如屏幕

> ID：13678197
> 
> 赞同：0
> 
> 时间：2012-12-03T06:25:20.193
> 
> 标签：android, pdf, android-emulator

我正在尝试打开一个位于 res/raw 文件夹中的 pdf 文档。单击按钮时，它会显示如下屏幕![图片链接](../Images/6b7a49f411253058ebe11e61cdc5328a.png)。

不知道为什么会出现这样的画面……

请告诉我，谢谢...

请在下面找到我的代码

```
 Button MyRawBtn = (Button)findViewById(R.id.buttonId2);
            MyRawBtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v)
                {
                    Toast.makeText(MainActivity.this,
                            "ImageButton (selector) is clicked!",
                        Toast.LENGTH_SHORT).show();

                    File pdfFile = new File("res/raw/sample.pdf");
                    Uri path = Uri.fromFile(pdfFile); 

                    //Uri uri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.sample);
                    //File file = new File(uri.toString());

                        Intent intent = new Intent(Intent.ACTION_VIEW);
                        intent.setDataAndType(path,"application/pdf");
                        intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                        startActivity(intent);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:43:01.837

请使用下面的 Stack Overflow Answer 的链接代码使用 PDFViewer.jar 库将 PDF 阅读到您的 android 应用程序中，如果您对此有任何疑问，请告诉我。

[实现 PDF 阅读器的代码](https://stackoverflow.com/questions/11152956/example-of-code-to-implement-a-pdf-reader/11153601#11153601)

# javascript - 是否有任何用于客户端过滤搜索关键字的宝石？

> ID：13678199
> 
> 赞同：-1
> 
> 时间：2012-12-03T06:25:26.903
> 
> 标签：javascript, ruby, filtering

是否有任何 ruby​​ gem 用于根据搜索栏中输入的内容对视图进行客户端过滤？我见过一个用于客户端验证的红宝石宝石（client_side_validations）。所以我想知道是否还有任何用于过滤的宝石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:55:41.253

请查看以下链接。

[http://www.ddarrensmith.com/blog/2012/05/17/ruby-on-rails-client-side-validation-with-validation-helpers-and-twitter-bootstrap/](http://www.ddarrensmith.com/blog/2012/05/17/ruby-on-rails-client-side-validation-with-validation-helpers-and-twitter-bootstrap/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T08:21:55.393

您只需要一个动态查询即可根据您的搜索文本获得所需的过滤视图。

首先，您需要向控制器添加搜索操作。这可能是这样的：

```
def search
  if params[:query]
   @products = Product.search(params[:query])
  else
   @products = []
  end
end 
```

接下来，您可以在任何视图上添加这段代码。这基本上是一个搜索框。

```
<form action='/search'>
<input name="query" type="text" />
<input type='submit' value='Search' />
</form> 
```

然后创建一个名为 search for your controller 的视图。不是最好的视图，但您可以使用任何您喜欢的内容并根据自己的喜好进行修改。所以下面的代码就是你的search.rhtml。

```
<% if @products.empty? %>
    <span>There were no results for your query</span><br/><br/>
<% else %>

<% for product in @products %>
Result: <% product.title %>
<% end %>

<% end %> 
```

因此，只是一个访问控制器中的搜索操作并向其发送称为查询的参数的表单。非常简单。

# multithreading - 维护大量独立长时间运行任务的有效方法？

> ID：13678201
> 
> 赞同：1
> 
> 时间：2012-12-03T06:25:27.970
> 
> 标签：multithreading

需要同时收听来自数千个（未来可能更多）IMAP 服务器的响应。有什么有效的方法来做到这一点？

我能想出的唯一解决方案是为每个连接创建一个线程。这是要走的路吗？

仅供参考，我将在 Ruby 中实现它，但我想选择的语言对于这个问题并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:52:44.083

它是一个简单且经过测试的解决方案：

1）**每个套接字的请求侦听器线程**，您必须从中侦听请求（如果一个套接字则为 1，依此类推）

2）将请求放入**处理队列**（像生产者一样）

3）拥有将接受这些请求并处理它们的**服务线程（消费者）。**您可以有多个消费者线程。

**注意：服务线程应始终使用执行器框架，以便将工作重新分配给线程并重用线程。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:31:48.140

每个线程的连接只会导致[线程饥饿](http://docs.oracle.com/javase/tutorial/essential/concurrency/starvelive.html)，完全不推荐。如果你自己做，那么我会推荐一个大小的线程池（从核心数 +1 开始。我认为你仍然可以增加大小，因为它主要是 I/O。配置文件并保持上限）。

（我不知道 ruby​​ 和线程（我猜 Ruby 有[GIL](http://www.igvita.com/2008/11/13/concurrency-is-a-myth-in-ruby/)问题）所以可能是一个过程）

但推荐的是让网络服务器为你做这件事。例如，使用一个接受请求的网络服务器并执行逻辑。Web 服务器的设计比手动调整更适合处理这种情况。

# perl - Perl 使用 file::slurp 从目录读取文件返回错误

> ID：13678209
> 
> 赞同：1
> 
> 时间：2012-12-03T06:26:41.170
> 
> 标签：perl

我一直在弄乱我的代码一个小时，但仍然没有进展。请听我说：这段代码今天早些时候工作了，它的作用是打开我给程序的目录，阅读它，然后打开目录中的每个文件并单独阅读它们以执行一些操作。

这是我打开和读取文件的方式：

```
use strict;
use warnings;
use File::Slurp;

my $dir = shift @ARGV;
opendir(DH, $dir) or die "Directory Open Error!";
my @filelist = grep !/^\.\.?$/, readdir(DH);

my $filename;
foreach $filename(@filelist){
open(FH, $filename) or die "File Open Error!";
my $readFile = read_file($filename);
#more code
} 
```

所以这更早地工作，我已经看到代码执行了我想要它做的很好，但是当我在另一个目录上运行代码时它返回

> 文件打开错误！在 program.pl 第 15 行

在那之后，我再也无法让它工作了，无论我检查了多少，我仍然无法弄清楚出了什么问题。

由于错误在 open() 行，我首先确保传递了正确的文件名，所以我在目录打开后打印了文件名列表，一切看起来都很好。

然后我摆脱了打开目录部分，手动传递文件名：

```
$filename = shift @ARGV;
open(FH, $filename) or die "File Open Error!";
my $readFile = read_file($filename); 
```

该程序工作正常，文件打开得很好。所以我摆脱了错误消息并返回到第一个代码，这就是我所看到的：

> read_file 'somefile' - sysopen：program.pl 第 17 行没有这样的文件或目录

第 17 行是我使用 read_file 读取文件内容的行，这是在文件打开后发生的，我不明白现在发生了什么。同样，这段代码早些时候工作得很好，除了输入我真的没有改变任何东西，现在它完全停止工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:39:59.740

我认为您需要过滤掉目录并将 $dir 添加到文件名：

```
use strict;
use warnings;
use File::Slurp;

my $dir = shift @ARGV;
opendir(DH, $dir) or die "Directory Open Error!";

# here, use grep { !-d "$dir/$_"}
my @filelist = grep {!-d "$dir/$_"} readdir(DH);

my $filename;
foreach $filename(@filelist){
  $filename = "$dir/$filename"; # also add dir
  print $filename, "\n";
  my $readFile = read_file($filename);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:19:09.443

这是一个使用[File::Find::Rule](http://search.cpan.org/~rclamp/File-Find-Rule-0.33/lib/File/Find/Rule.pm)从目录中获取文件名的选项。`->maxdepth(1)`如果您想要目录递归，请省略。在这种情况下，`->name(qr/.+\.txt$/i)`只过滤文本文件的文件名；如果您不想过滤文件名，请忽略此选项。 [squiguy](https://stackoverflow.com/users/1114966/squiguy)`read_file`处理`open`ing 文件是正确的。

```
use strict;
use warnings;
use File::Slurp qw/read_file/;
use File::Find::Rule;

my $dir = shift @ARGV or die 'No directory sent.';
-d $dir or die "Directory doesn't exist.";

my @filelist = File::Find::Rule->file()
                            ->maxdepth(1)
                            ->name(qr/.+\.txt$/i)
                            ->in($dir);

for my $fileName (@filelist) {
    my $fileContents = read_file $fileName;

    #more code
} 
```

完整的文件路径提供给`read_file`.

希望这可以帮助！

# windows-phone-7 - 在其持有页面的代码中处理用户控件的事件

> ID：13678211
> 
> 赞同：4
> 
> 时间：2012-12-03T06:27:16.123
> 
> 标签：windows-phone-7, silverlight-4.0

我正在寻找以下情况的解决方案。

在我的应用程序中，我有一个页面说 page1，我在 page1 中放置了一个用户控件。我的要求是我需要在 page1 的代码后面获取用户控件中使用的按钮的单击事件。我如何在 windows phone / silverlight 中实现相同的目标。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T06:35:24.123

## 1.第一种和正确的方法：

（如果您知道 MVVM 模式）将由您控制，例如`MyControl`，公开类型的 DependencyProperty `ICommand`，例如 MyControlButtonClickCommand。

xml:

```
<UserControl>
    <Button Command={Binding MyControlButtonClickCommand, Source={RelativeSource Self}} />
</UserControl> 
```

代码隐藏：

```
public ICommand MyControlButtonClickCommand
{
    get { return (ICommand)GetValue(MyControlButtonClickCommandProperty); }
    set { SetValue(MyControlButtonClickCommandProperty, value); }
}

public static readonly DependencyProperty MyControlButtonClickCommandProperty =
        DependencyProperty.Register("MyControlButtonClickCommand", typeof(ICommand), typeof(MyControl), new PropertyMetadata(null)); 
```

您将按如下方式使用 UserControl：

```
<phone:PhoneApplicationPage>

    <namespace:MyControl MyControlButtonClickCommand="{Binding ControlButtonCommand}" />

</phone:PhoneApplicationPage> 
```

`ControlButtonCommand`ViewModel（您的自定义对象）的属性在哪里，位于您的`Page`.

## 2.还有一种更简单、更脏的方法，我不鼓励你去：

就像您公开`MyControlButtonClickCommand`依赖属性而不是公开它一样，您可以公开一个事件`MyControlButtonClick`并在页面的 xaml 中订阅它。在您的 UserControl 代码内部，您应该订阅它的按钮`Click`事件并触发它自己的`MyControlButtonClick`事件。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:38:01.757

有两种方法可以做到这一点，最简单的方法是双击演示布局上的按钮。

或者

在 XML 添加 onCLick= 这样做会弹出菜单来选择新事件。单击它，您的按钮单击事件应该在后面的代码中。

```
<button name="b1" onClick="button1_Click()"/> <!--this is what ur XAML will look like --> 
```

处理按钮点击

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    // Handle the click event here

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T09:15:28.867

对于 UserControl，您可以创建 Page1.xaml.cs 将实现的接口。

```
public partial Class SomeControl : UserControl
{
    private OnButtonClick button_click;

    public interface OnButtonClick
    {
        void someMethod();   // generic, you can also use parameters to pass objects!!
    }

    // Used to add interface to dynamic controls
    public void addButtonClickInterface(OnButtonClick button_click)
    {
        this.button_click = button_click;
    }

    // Buttons UserControlled Click
    private void ButtonClick(object sender, RoutedEventArgs e)
    {
        if(button_click != null)
        {
            button_click.someMethod();  
        }
    }

} 
```

以下是如何实现和使用它。

```
public partial class Page1 : PhoneApplicationPage, SomeControl.OnButtonClick
{

    public Page1()
    {
        InitializeComponent()

        // for a new Control
        SomeControl cntrl = new SomeControl();
        cntrl.addButtonClickInterface(this);

        // or for a control in your xaml
        someControl.addButtonClickInterface(this);
    }

    public void someMethod()
    {
        // Here is where your button will trigger!!
    }

} 
```

# android - 合并android tableviewlayout中的行而不是单元格？

> ID：13678215
> 
> 赞同：1
> 
> 时间：2012-12-03T06:27:32.900
> 
> 标签：android, android-tablelayout

我知道我们可以使用 span 属性合并 android 中的单元格。

但是，如果我想为任何一个单元格合并两行怎么办？我想在该单元格的两行中显示任何单个视图。

请给我提意见。提前致谢。:)

# groovy - Jira，创建一个自定义按钮并对它执行操作

> ID：13678219
> 
> 赞同：0
> 
> 时间：2012-12-03T06:28:06.010
> 
> 标签：groovy, workflow, jira

这是我在这里的第一个问题，希望我能很好地传达给您理解，我希望在 Jira 的问题详细信息页面上显示一个按钮。单击时，它将检查是否（报告 == 受让人）并将“受让人”设置为“空”或清除该字段。

如果您有任何其他建议，请告诉我如何更好地实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:53:14.857

您还没有清楚地描述您希望按钮做什么，但是创建一个新的 Web 项目（发出操作）通常是通过一个插件完成的：[https ://developer.atlassian.com/display/JIRADEV/Web+Item+Plugin+模块](https://developer.atlassian.com/display/JIRADEV/Web+Item+Plugin+Module)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:29:35.347

在需要执行此操作的每个工作流程步骤中，您可以使用以下命令创建转换*清除受让人*：

*   *检查*Reporter*和*Assignee*字段是否相等的*条件（例如来自*[JIRA Workflow Enhancer](https://marketplace.atlassian.com/plugins/com.tng.jira.plugins.workflowenhancer)插件）*
**   *发布功能* **更新问题字段**（来自[JIRA Suite Utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities)插件）或类似的，将值设置为空*

# java - 如何从 Android/Java 中的字符串中获取多个子字符串？

> ID：13678221
> 
> 赞同：3
> 
> 时间：2012-12-03T06:28:06.717
> 
> 标签：java, regex, string

我需要一些帮助来从字符串中提取多个子字符串。字符串的示例如下所示：

```
String str = "What is <Mytag a exp 5 exp 3> written as a single power of <i>a</i> <Mytag yx4> and the double power of <b>x+y</b> <Mytag 3xy4>"; 
```

我正在尝试获取“<Mytag”和“>”之间的子字符串

所以我的愿望输出将是 **1) a exp 5 exp 3
2) yx4
3) 3xy4**

我已经尝试过使用 Scanner 并将我成功获得第一个字符串的所有内容都设置为子字符串，但出现第二次和第三次出现的问题。

在子字符串方法中，我成功获得了所有标签“<Mytag”的索引，但无法获得“>”的正确索引，因为它也带有粗体和斜体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T06:31:09.983

为此使用正则表达式：-

```
"<Mytag ([^>]*)>" 
```

并`group 1`从上面的正则表达式中获取。您需要将它与[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)和[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)类一起使用，并使用[`Matcher#find`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)带有`while`循环的方法来查找所有匹配的子字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T06:42:10.993

正如**Rohit Jain**所说，使用正则表达式。这是功能代码：

```
// import java.io.Console;
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class RegexTestHarness {

  public static void main(String[] args){
    // Console console = System.console();  // Not needed

    Pattern pattern = Pattern.compile("<Mytag([^>]*)>");

    String myString = "What is <Mytag a exp 5 exp 3> written as a single power of <i>a</i> <Mytag yx4> and the double power of <b>x+y</b> <Mytag 3xy4>";
    Matcher matcher = pattern.matcher(myString);

    while (matcher.find()) {
      // Rohit Jain observation
      System.out.println(matcher.group(1));
    }

  }
} 
```

资料来源：[Java 正则表达式教程。](http://docs.oracle.com/javase/tutorial/essential/regex/index.html)

# html - Google 应用引擎中的自定义 URL

> ID：13678222
> 
> 赞同：0
> 
> 时间：2012-12-03T06:28:21.023
> 
> 标签：html, google-app-engine, url

我在谷歌应用引擎中工作，我在网站上创建了几个标签就像**我们的****家** 一样..

 **当我单击主页选项卡时，网址就像`http://localhost:8080/#home`

我怎样才能使它像`http://localhost:8080/Home`，`http://localhost:8080/AboutUs`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:26:56.680

你不应该在你的 URL 中使用 # 因为 # 是客户端锚。# 的所有处理都在您的浏览器上处理，#home 信息不会传递给服务器。

您应该在链接中使用正确的 URL，而不是使用 #**

# objective-c - 如何从 ftp 文件夹中获取所有图像到 NSArray

> ID：13678224
> 
> 赞同：0
> 
> 时间：2012-12-03T06:28:44.827
> 
> 标签：objective-c, xcode, uiimageview, xcode4.5

好的，所以我有一个包含图像文件夹的 FTP 服务器。这个图像文件夹并不总是相同的。图像的数量可能与文件名不同。我可以将图像加载到我的`UIImageView`使用`NSURL`和`NSData`使用一个图像文件的特定路径中，但是我需要拥有文件夹中的所有图像，而不仅仅是一个，这样我就可以轻松地浏览不同的图像。有没有办法我可以获取目录的文件夹并将该文件夹中的所有图像作为数据对象放入`NSArray`？下面是我用来将一张图片放入我的`UIImageView`.

```
 //This works for loading the one image with a specific full path to the file.

    NSURL * url = [NSURL URLWithString:@"ftp://myftpServeruserpassportandpath"];
    NSData * data = [[NSData alloc]initWithContentsOfURL:url];

    UIImage * image = [[UIImage alloc]initWithData:data];

    [self.imageView setImage:image]; 
```

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:24:00.203

检查来自苹果的[SimpleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)`FTP operations`示例，该示例使用`NSURLConnection`and `CFFTPStream APIs`。它可以`download`使用`both NSURLConnection`和的文件`CFFTPStream`。此外，它可以`upload a file`、`list a directory`和`create a directory`使用`CFFTPStream`。

# iphone - 所有视图的声音控制

> ID：13678227
> 
> 赞同：2
> 
> 时间：2012-12-03T06:29:01.740
> 
> 标签：iphone, ios, uibutton, avaudioplayer

在我的应用程序中，我在应用程序运行时使用了背景声音，我也给了一个静音按钮。对于每个视图都有不同的声音。现在，当按下静音按钮时，当前视图的播放器只会停止。如果所有播放器静音，我想静音所有播放器视图和在任何视图中单击时播放。任何人都可以建议我一些想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:31:55.067

为什么不为音效创建一个单独的类，并在您想使用它时调用它，然后单击静音按钮禁用该类。这只是一个想法，试试看：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:04:28.377

一种解决方案可以是`NSNotifications`。在点击静音按钮时发布通知，并在您想要播放/静音的每个视图上添加观察者。

有关如何发布和添加观察的信息，请参阅此[NSNotificationCenter 教程](http://iphonebyradix.blogspot.com/2011/07/nsnotificationcenter-tutorial.html)`NSNotification`

# c# - 比较两个复杂对象的相等性

> ID：13678230
> 
> 赞同：2
> 
> 时间：2012-12-03T06:29:07.527
> 
> 标签：c#, .net

我有两个 List，这个复杂的对象有 4 个引用类型的公共属性。我如何将一个列表与另一个列表进行比较，以确定这些列表的大小和值是否相等。

我在 ComplexObject 中实现了 Equals 以帮助进行相等检查

```
public Type1 Type1 { get; set; }
public IEnumerable<Type2> Type2s{ get; set; }
public Type3 Type3{ get; set; }
public Type4 Type4 { get; set; }

public bool Equals(ComplexObject complexObject)
{
    int type2sCount = Type2s.Count();
    return Type1 .Equals(complexObject.Type1) &&
        Type3.Equals(complexObject.Type3) &&
        Type4.Equals(complexObject.Type4) &&
        Type2s.Intersect(complexObject.Type2s).Count() == type2sCount;
} 
```

我还需要打印出第二个列表中不合适或没有配对的项目

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:32:25.753

如果先对两个列表进行排序，则可以使用**SequencyEqual**扩展方法检查两个序列是否相等。此方法是 System.Linq 的一部分。

这是一个例子：

```
 List<ComplexObject> list1 = new List<ComplexObject>();
    List<ComplexObject> list2 = new List<ComplexObject>();

    IOrderedEnumerable<ComplexObject> list1Sorted = list1.OrderBy(item => item.SomeProperty);
    IOrderedEnumerable<ComplexObject> list2Sorted = list2.OrderBy(item => item.SomeProperty);

    bool areEqual = list1Sorted.SequenceEqual(list2Sorted); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:35:32.423

列表的最简单方法是`SequenceEqual`，但您需要小心`null`s：

```
public bool Equals(ComplexObject complexObject)
{
    bool eq = Equals(Type1, complexObject.Type1)
        && Equals(Type3, complexObject.Type3)
        && Equals(Type4, complexObject.Type4);
    if (eq)
    {
        if(Type2s == null)
        {
            if(complexObject.Type2s != null) eq = false;
        } else {
            eq = complexObject.Type2s == null ? false
               : Type2s.SequenceEqual(complexObject.Type2s);
        }
    }
    return eq;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:33:11.523

查看 IEqualityComparer(T)。您实现了接口成员，如果您使用的是 LINQ，它将起作用，您应该能够对列表进行 AND。 [http://msdn.microsoft.com/en-us/library/ms132151.aspx](http://msdn.microsoft.com/en-us/library/ms132151.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:36:42.847

您可以使用**SequenceEqual(List1, List2)**

```
 bool equal = Type2s.SequenceEqual(complexObject.Type2s); 
```

# linux - ubuntu 中的 Git 项目更新

> ID：13678240
> 
> 赞同：0
> 
> 时间：2012-12-03T06:29:42.133
> 
> 标签：linux, git, github

我正在我的 ubuntu 系统中做一个网站建设项目。我对它很陌生。我的项目由 Git 存储库维护。

我的问题是我不知道如何使用 Git 存储库系统将我的项目代码更新到最新版本。所以，我想要一个详细的步骤 2 步骤方法来执行此操作。

我使用的是 Ubuntu 12.04。请不要介意询问更多细节。

任何有价值的答案将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:40:41.957

就个人而言，我更喜欢 rebase，因为它带来了直系历史：

```
$ git fetch && git checkout your-branch && git rebase origin/your-branch 
```

或者您可以合并 - 取决于您希望历史记录的样子：

```
$ git fetch && git checkout your-branch && git merge origin/your-branch 
```

最简单的方法是：

```
$ git pull 
```

但我不推荐它，因为它可能会给你带来一些麻烦。实际上，它会同时获取和合并代码——就像两个命令一样。

更多信息可以在这里找到：[“git pull”和“git fetch”有什么区别？](https://stackoverflow.com/questions/292357/whats-the-difference-between-git-pull-and-git-fetch)

**阅读教程：** [面向初学者的 10 大 Git 教程](http://sixrevisions.com/resources/git-tutorials-beginners/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:22:12.263

由于以下原因，合并优于变基：

*   更少的冲突解决方案
*   当有人将您的项目用作子模块时，您不会破坏他们的历史
*   您不能保证会从新起点尝试相同的更改。

你可以在这里阅读我的工作流程：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

对于一本关于 git 的好书，我会推荐： http: [//progit.org/book](http://progit.org/book)

一旦你理解了有向无环图（DAG），一切都会变得有意义。我的朋友最近说，要了解 git 以及如何完成某件事，您必须“成为图表”。

# android - 将数据从函数解析到 android 应用程序

> ID：13678242
> 
> 赞同：0
> 
> 时间：2012-12-03T06:29:44.643
> 
> 标签：android, weather-api, google-weather-api, yahoo-weather-api

此代码从weatherunderground api 获取数据。我正在构建在内部函数中使用这些数据的 android 应用程序。我在 android 应用程序代码中使用这些数据时遇到问题。

```
package perry.test;
import java.io.IOException;
import javax.xml.parsers.ParserConfigurationException;
import org.xml.sax.SAXException;

public class main {
public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException{

    // enter zip here
    WeatherInfo weather = new WeatherInfo(48104);

    // variables for today
    System.out.println(weather.cur);
    System.out.println(weather.cur_high_c);
    System.out.println(weather.cur_high_f);
    System.out.println(weather.cur_low_c);
    System.out.println(weather.cur_low_f);
    System.out.println(weather.cur_cond);

}
} 
```

尝试：我复制并粘贴了使用类的代码以及所有需要的天气信息，然后我有一个变量，我想从天气类中赋值。

我得到的错误：Eclipse 告诉我用 catch 和 try 包围，当我包围它时，我的整个应用程序根本不会加载到模拟器。

```
 public void onCreate(Bundle savedInstanceState) {

    // Regular constructors
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_settings);

    // Load the preferences file for the settings
    SharedPreferences prefs = getSharedPreferences("weatherapp_settings",MODE_PRIVATE);

    // Check for values, set to default if not available
    boolean get_is_male = prefs.getBoolean("is_male", true);
    boolean get_is_metric = prefs.getBoolean("is_metric", false);
    int get_temperature = prefs.getInt("temperature", 72);
    int get_zipcode = prefs.getInt("zipcode", 48109);

// Create the listener for the temperature slider
    bar = (SeekBar) findViewById(R.id.seek_temp);
    bar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

        // Set the temperature from the progress bar
        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            setTemperature(progress);

        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }
    });

    //Loading only default settings
    // Update the settings page
    if (get_is_male)
    {
        setMale(null);
    } 
    else
    {
        setFemale(null);
    }
    if (get_is_metric)
    {
        setCelsius(null);
    } 
    else 
    {
        setFahrenheit(null);
    }

    setZipCode(get_zipcode);

    setTemperature(get_temperature);
    WeatherInfo weather = new WeatherInfo(48104);
            curTemp = weather.cur_high_c;

    // variables for today
    System.out.println(weather.cur);
    System.out.println(weather.cur_high_c);
    System.out.println(weather.cur_high_f);
    System.out.println(weather.cur_low_c);
    System.out.println(weather.cur_low_f);
    System.out.println(weather.cur_cond);       

} 
```

日志猫：

```
12-03 07:27:32.219: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:32.219: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:32.230: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:32.430: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:32.430: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:33.949: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:33.949: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:33.949: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:33.970: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.030: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.030: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.040: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.100: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.130: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.130: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.141: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.141: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.141: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.160: D/gralloc_goldfish(808): Emulator without GPU emulation detected.
12-03 07:27:34.250: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.300: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.350: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.350: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.709: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:34.709: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.450: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.461: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.461: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.461: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.480: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.480: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.560: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.560: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.670: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.730: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.730: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.730: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.799: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.799: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.799: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:36.869: D/dalvikvm(808): GC_CONCURRENT freed 93K, 8% free 2714K/2924K, paused 6ms+26ms, total 241ms
12-03 07:27:37.440: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.460: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.600: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.690: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=224, x1-x0<=136 are inconsistent; permanently removing: x2-x1<=224\. 
12-03 07:27:37.710: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=60, x1-x0<=148 are inconsistent; permanently removing: x2-x1<=60\. 
12-03 07:27:37.730: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=22, x1-x0<=186 are inconsistent; permanently removing: x2-x1<=22\. 
12-03 07:27:37.741: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.820: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.860: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.860: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.880: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.880: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.979: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:37.979: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.039: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.049: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.109: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.119: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.149: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.149: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.359: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.460: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.490: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:38.530: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.389: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.389: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.419: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.419: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.809: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.820: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.830: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.830: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.850: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.850: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.950: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:39.950: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.080: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.090: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.100: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=224, x1-x0<=136 are inconsistent; permanently removing: x2-x1<=224\. 
12-03 07:27:40.110: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=174, x1-x0<=148 are inconsistent; permanently removing: x2-x1<=174\. 
12-03 07:27:40.120: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=136, x1-x0<=186 are inconsistent; permanently removing: x2-x1<=136\. 
12-03 07:27:40.120: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.120: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.140: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.140: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.209: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.209: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.850: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.860: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.870: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.920: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.920: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.920: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.950: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:40.950: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.070: D/dalvikvm(808): GC_CONCURRENT freed 118K, 8% free 2993K/3228K, paused 5ms+21ms, total 57ms
12-03 07:27:41.100: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.110: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.120: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=224, x1-x0<=136 are inconsistent; permanently removing: x2-x1<=224\. 
12-03 07:27:41.130: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=174, x1-x0<=148 are inconsistent; permanently removing: x2-x1<=174\. 
12-03 07:27:41.130: D/android.widget.GridLayout(808): horizontal constraints: x2-x0>=712, x2-x1<=136, x1-x0<=186 are inconsistent; permanently removing: x2-x1<=136\. 
12-03 07:27:41.140: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.140: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.150: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.150: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.190: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.190: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.920: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.930: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.939: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.970: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.970: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:41.979: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.010: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.010: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.050: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.050: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.062: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.070: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.070: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.070: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.100: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:42.100: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.460: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.460: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.490: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.500: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.520: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.589: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.589: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.599: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.609: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.649: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.659: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:43.659: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:44.240: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:44.340: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:44.380: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:44.380: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:44.689: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:44.689: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:44.699: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:44.909: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:45.090: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:45.340: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:45.700: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:45.700: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:45.730: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:45.749: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.259: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.279: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.290: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.290: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.290: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.310: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.390: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.390: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.460: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.536: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.536: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.540: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.560: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.560: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:46.590: W/Trace(808): Unexpected value from nativeGetEnabledTags: 0
12-03 07:27:47.129: D/AndroidRuntime(808): Shutting down VM
12-03 07:27:47.129: W/dalvikvm(808): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-03 07:27:47.159: E/AndroidRuntime(808): FATAL EXCEPTION: main
12-03 07:27:47.159: E/AndroidRuntime(808): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.weatherapp/com.example.weatherapp.SettingsActivity}: java.lang.NullPointerException
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.os.Looper.loop(Looper.java:137)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-03 07:27:47.159: E/AndroidRuntime(808):  at java.lang.reflect.Method.invokeNative(Native Method)
12-03 07:27:47.159: E/AndroidRuntime(808):  at java.lang.reflect.Method.invoke(Method.java:511)
12-03 07:27:47.159: E/AndroidRuntime(808):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-03 07:27:47.159: E/AndroidRuntime(808):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-03 07:27:47.159: E/AndroidRuntime(808):  at dalvik.system.NativeStart.main(Native Method)
12-03 07:27:47.159: E/AndroidRuntime(808): Caused by: java.lang.NullPointerException
12-03 07:27:47.159: E/AndroidRuntime(808):  at com.example.weatherapp.SettingsActivity.setZipCode(SettingsActivity.java:203)
12-03 07:27:47.159: E/AndroidRuntime(808):  at com.example.weatherapp.SettingsActivity.onCreate(SettingsActivity.java:90)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.app.Activity.performCreate(Activity.java:5104)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-03 07:27:47.159: E/AndroidRuntime(808):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-03 07:27:47.159: E/AndroidRuntime(808):  ... 11 more
12-03 07:27:47.199: D/dalvikvm(808): GC_CONCURRENT freed 89K, 6% free 3365K/3572K, paused 6ms+77ms, total 173ms
12-03 07:27:50.980: I/Process(808): Sending signal. PID: 808 SIG: 9
12-03 07:28:25.781: E/Trace(886): error opening trace file: No such file or directory (2)
12-03 07:28:25.781: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:25.781: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:25.790: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:26.129: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:26.181: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.519: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.519: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.529: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.549: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.609: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.609: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.609: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.749: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.759: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.759: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.759: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.769: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.769: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.789: D/gralloc_goldfish(886): Emulator without GPU emulation detected.
12-03 07:28:27.900: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:27.939: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.059: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.090: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.119: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.119: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.270: D/dalvikvm(886): GC_CONCURRENT freed 95K, 8% free 2696K/2908K, paused 6ms+4ms, total 202ms
12-03 07:28:30.290: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.290: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.311: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.340: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.410: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.470: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.480: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.480: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.680: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.680: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:30.680: W/Trace(886): Unexpected value from nativeGetEnabledTags: 0
12-03 07:28:31.259: D/AndroidRuntime(886): Shutting down VM
12-03 07:28:31.259: W/dalvikvm(886): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-03 07:28:31.299: E/AndroidRuntime(886): FATAL EXCEPTION: main
12-03 07:28:31.299: E/AndroidRuntime(886): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.weatherapp/com.example.weatherapp.SettingsActivity}: java.lang.NullPointerException
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.os.Looper.loop(Looper.java:137)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-03 07:28:31.299: E/AndroidRuntime(886):  at java.lang.reflect.Method.invokeNative(Native Method)
12-03 07:28:31.299: E/AndroidRuntime(886):  at java.lang.reflect.Method.invoke(Method.java:511)
12-03 07:28:31.299: E/AndroidRuntime(886):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-03 07:28:31.299: E/AndroidRuntime(886):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-03 07:28:31.299: E/AndroidRuntime(886):  at dalvik.system.NativeStart.main(Native Method)
12-03 07:28:31.299: E/AndroidRuntime(886): Caused by: java.lang.NullPointerException
12-03 07:28:31.299: E/AndroidRuntime(886):  at com.example.weatherapp.SettingsActivity.setZipCode(SettingsActivity.java:203)
12-03 07:28:31.299: E/AndroidRuntime(886):  at com.example.weatherapp.SettingsActivity.onCreate(SettingsActivity.java:90)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.app.Activity.performCreate(Activity.java:5104)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-03 07:28:31.299: E/AndroidRuntime(886):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-03 07:28:31.299: E/AndroidRuntime(886):  ... 11 more
12-03 07:28:31.470: D/dalvikvm(886): GC_CONCURRENT freed 109K, 8% free 3015K/3244K, paused 11ms+43ms, total 195ms 
```

# facebook - 如何使用页面标签应用程序获取 Facebook 页面标签 URL

> ID：13678246
> 
> 赞同：0
> 
> 时间：2012-12-03T06:30:13.510
> 
> 标签：facebook

我有一个带有共享按钮的页面选项卡应用程序，该按钮调用 Facebook 提要对话框。我希望故事链接指向页面选项卡应用程序。如何从页面标签应用程序本身中找出页面标签网址？`top.location.href`由于跨域安全问题，我无法使用，但我看不到应用程序本身如何找出必要的 url。在配置设置中指定页面选项卡应用程序不是一个选项 - 太脆弱并且容易出现维护问题（即从登台发布到产品而不更新 url）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:24:17.367

它有点迂回，但它相当坚固。

`signed_request`会给你`page_id`一个。然后，您可以在图形 api 中查询该`link`页面 ID 上的参数。结合它`app_<APP_ID>`，你就有了你的 URL。

例如 - [https://www.facebook.com/colmstestpage/app_120999667956026](https://www.facebook.com/colmstestpage/app_120999667956026)

[https://www.facebook.com/colmstestpage/](https://www.facebook.com/colmstestpage/)来自`http://graph.facebook.com/<PAGE_ID>?fields=link`并且`/app_120999667956026`是一致的，您不需要查询您的`app_id`.

# c# - 无法访问抽象类中的受保护构造函数

> ID：13678247
> 
> 赞同：0
> 
> 时间：2012-12-03T06:30:16.223
> 
> 标签：c#, constructor, abstract

我正在为抽象类创建单元测试代码。这是该课程的一个片段：

```
public abstract class Component
    {

        private eVtCompId mComponentId;
        private eLayer mLayerId;
        private IF_SystemMessageHandler mLogger;

        protected Component(eVtCompId inComponentId, eLayer inLayerId, IF_SystemMessageHandler inMessageHandler)
        {
            mLayerId = inLayerId;
            mComponentId = inComponentId;
            mLogger = inMessageHandler;
        } 
```

我在构造函数的参数中有两个枚举，后跟一个接口。

这是我的单元测试代码的片段：

```
Component_Accessor target = new Component_Accessor(eVtCompId.MasterSWCommDevice, eLayer.Foundation, new MySysMsgHandler()); 
```

我不断收到错误消息“Component_Accessor 不包含采用'3'参数的构造函数”。我似乎无法理解为什么会这样。当我删除`abstract`关键字时，单元测试工作正常。

我不明白为什么如果类设置为`abstract`. 谁能解释为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:37:10.100

您不能创建[`abstract`](http://msdn.microsoft.com/en-us/library/sf985hc5.aspx)类的实例。[`protected`](http://msdn.microsoft.com/en-us/library/sf985hc5.aspx)构造函数仅对派生类可见。阅读[可访问性级别（C# 参考）](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)以清除访问修饰符之间的差异及其在各种（包括类）范围内的影响。

来自 MSDN：

> 在类声明中使用 abstract 修饰符来指示一个类仅作为其他类的基类。

此外，`Component`和`Component_Accessor`绝对是不同的类型。

# c# - 将参数从 A 类方法传递给 B 类

> ID：13678248
> 
> 赞同：0
> 
> 时间：2012-12-03T06:30:17.733
> 
> 标签：c#, parameters, parameter-passing

```
//Class A
void OnChanged(object source, FileSystemEventArgs e)
{
XmlTextReader reader = new XmlTextReader("?"); <- How will I pass the "file" variable from Class B?
}

//Class B
public static bool myMethod(FileInfo file)
{
//some codes here
return false;
} 
```

我知道您必须为此设置一些属性才能传递变量，但我不确定从哪里开始。添加一些代码可以帮助我更好地理解属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:36:25.980

```
//Class B
public static FileInfo myFileProperty
{
   get;
   set;
}

public static bool myMethod(FileInfo file)
{
//some codes here
myFileProperty = file;
return false;
}

//Class A
void OnChanged(object source, FileSystemEventArgs e)
{

XmlTextReader reader = new XmlTextReader(ClassB.myFileProperty);
} 
```

# php - 上传图像并显示它们的好习惯是什么？

> ID：13678250
> 
> 赞同：0
> 
> 时间：2012-12-03T06:30:52.180
> 
> 标签：php

我想使用 iframe 上传图像并将它们显示为表单旁边的一种预览，而无需重新加载页面。做这个的最好方式是什么。我还有其他表单数据，例如标题和内容，如果有的话。我遇到的问题是我不想必须将文件保存到服务器才能显示它。有没有办法可以绕过保存它？

# linux - 如何在 Linux 中将命令作为服务执行

> ID：13678252
> 
> 赞同：0
> 
> 时间：2012-12-03T06:31:09.657
> 
> 标签：linux

我正在执行来自 linux 的命令以在 linux 和 cloudbees 机器之间建立连接，我如何将命令作为服务运行以使连接保持断开状态。

命令是 java -jar /home/ ***/workspace/cli.jar -s https://* **** **-i /家/******/.ssh/id_rsa_new -description TESTS -fsroot /home/ ***** /Jenkins -labels test -name TESTS***

# php - 根据另一个下拉列表中的选定值限制日期

> ID：13678257
> 
> 赞同：2
> 
> 时间：2012-12-03T06:31:26.923
> 
> 标签：php, javascript, date, select, jquery-ui-datepicker

![在此处输入图像描述](../Images/8a2dd5ce03c37aa3641ed8f700e30ab8.png)

我需要的是根据**period type**中选择的值来限制**period 值**下拉列表的选择。

 **如果在**period type中选择****day**，则在**period 值**中选择日期将仅限于当年当前月份的日期。

 ****同样，如果选择了**月份**，则日期的选择将仅限于当年所有月份的日期。

如果选择了**年份**，那么日期选择将没有任何限制。

我该如何实施？

这是一个示例 html 代码。

```
 <select name="month">
 <option value="1">January
 <option value="2">February
 <option value="3">March
 <option value="4">April
 <option value="5">May
 <option value="6">June
 <option value="7">July
 <option value="8">August
 <option value="9">September
 <option value="10">October
 <option value="11">November
 <option value="12">December
  </select>

  <select name="day">
 <option value="1">1
 <option value="2">2
 <option value="3">3
 <option value="4">4
 <option value="5">5
 <option value="6">6
 <option value="7">7
 <option value="8">8
 <option value="9">9
 <option value="10">10
 <option value="11">11
 <option value="12">12
 <option value="13">13
 <option value="14">14
 <option value="15">15
 <option value="16">16
 <option value="17">17
 <option value="18">18
 <option value="19">19
 <option value="20">20
 <option value="21">21
 <option value="22">22
 <option value="23">23
 <option value="24">24
 <option value="25">25
 <option value="26">26
 <option value="27">27
 <option value="28">28
 <option value="29">29
 <option value="30">30
 <option value="31">31
   </select>

   <select name="year">
 <option value="2000">2000
 <option value="2001">2001
     <option value="2002">2002
 <option value="2003">2003
 <option value="2004">2004
 <option value="2005">2005
 <option value="2006">2006
 <option value="2007">2007
 <option value="2008">2008
     <option value="2009">2009
 <option value="2010">2010
 <option value="2011">2011
 <option value="2012">2012
   </select> 
```

我可以在以下日期选择器[http://www.eyecon.ro/datepicker/上实现它吗](http://www.eyecon.ro/datepicker/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:58:47.893

您的 HTML 中缺少一些代码。我已经做了一个月了。JS部分没问题。只需为“日”和“年”部分提供 ID。该解决方案不是优化的，但它有效。所以复制并仔细查看它。

```
 <script type="text/javascript">
var date=new Date();
function fnc(myid)
{

    value=document.getElementById(myid).innerHTML;
    if(value=='month')
    {
    month=date.getMonth();
    console.log(month)
    document.getElementById(month).selected='selected';
    document.getElementById("month").disabled=true;
    document.getElementById("day").disabled=false;
    document.getElementById("year").disabled=false;

    }
    else if(value=='day')
    {
    day=date.getDate();
    document.getElementById(day).selected='selected';
    document.getElementById("day").disabled=true;
    document.getElementById("month").disabled=false;
    document.getElementById("year").disabled=false;

    }
    else if(value=='year')
    {
    year=date.getFullYear();
    document.getElementById(year).selected='selected';
    document.getElementById("year").disabled=true;
    document.getElementById("month").disabled=false;
    document.getElementById("day").disabled=false;

    }
}
</script>
<select>
<option onclick="fnc(this.id)">select</option>
<option id="Sday" onclick="fnc(this.id)">day</option>
<option id="Smonth" onclick="fnc(this.id)">month</option>
<option id="Syear" onclick="fnc(this.id)">year</option>
</select>

<select name="month" id="month">
 <option value="1" id="0">January</option>
 <option value="2" id="1">February</option>
 <option value="3" id="2">March</option>
 <option value="4" id="3">April</option>
 <option value="5" id="4">May</option>
 <option value="6" id="5">June</option>
 <option value="7" id="6">July</option>
 <option value="8" id="7">August</option>
 <option value="9" id="8">September</option>
 <option value="10" id="9">October</option>
 <option value="11" id="10">November</option>
 <option value="12" id="11">December</option>
  </select>

  <select name="day" id="day">
 <option value="1">1</option>
 <option value="2">2</option>
 <option value="3">3</option>
 <option value="4">4</option>
 <option value="5">5</option>
 <option value="6">6</option>
 <option value="7">7</option>
 <option value="8">8</option>
 <option value="9">9</option>
 <option value="10" >10</option>
 <option value="11">11</option>
 <option value="12">12</option>
 <option value="13">13</option>
 <option value="14">14</option>
 <option value="15">15</option>
 <option value="16">16</option>
 <option value="17">17</option>
 <option value="18">18</option>
 <option value="19">19</option>
 <option value="20">20</option>
 <option value="21">21</option>
 <option value="22">22</option>
 <option value="23">23</option>
 <option value="24">24</option>
 <option value="25">25</option>
 <option value="26">26</option>
 <option value="27">27</option>
 <option value="28">28</option>
 <option value="29">29</option>
 <option value="30">30</option>
 <option value="31">31</option>
   </select>

   <select name="year" id="year">
 <option value="2000">2000</option>
 <option value="2001">2001</option>
     <option value="2002">2002</option>
 <option value="2003">2003</option>
 <option value="2004">2004</option>
 <option value="2005">2005</option>
 <option value="2006">2006</option>
 <option value="2007">2007</option>
 <option value="2008">2008</option>
     <option value="2009">2009</option>
 <option value="2010">2010</option>
 <option value="2011">2011</option>
 <option value="2012">2012</option>
   </select> 
```******

# java - 如何以编程方式切换到默认软键盘

> ID：13678258
> 
> 赞同：2
> 
> 时间：2012-12-03T06:31:30.653
> 
> 标签：java, android, soft-keyboard

我的设备上有多个键盘，如何以编程方式在不同键盘之间切换？

（我不想简单地打开或关闭软键盘，如： [android - 按需显示软键盘](https://stackoverflow.com/questions/6475135/android-show-soft-keyboard-on-demand)。我需要切换到默认键盘。）

编辑：添加代码

如果我尝试下面的代码，我切换到当前键盘：

```
 InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput( 0, 0); 
```

但我需要切换到默认键盘。

请告诉我切换到默认键盘的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:37:32.187

如果你想`edittext`默认显示键盘，你可以这样做：

```
 yourEditText.requestFocus(); 
```

# android - 如何在 Android 中创建圆形搜索栏

> ID：13678262
> 
> 赞同：19
> 
> 时间：2012-12-03T06:31:40.573
> 
> 标签：android, android-seekbar

谁能指导我在android中制作**圆形搜索栏？**有没有任何例子可以使搜索栏呈圆形而不是与图像呈线性，有没有人试过
参考：[https ://lh4.ggpht.com/9qL2sQi6XQYBY2pvgsPyObYS3UM42kRw64ve-GacU3jqW0XTEhARkdCLpmYzzhRULk0r](https://lh4.ggpht.com/9qL2sQi6XQYBY2pvgsPyObYS3UM42kRw64ve-GacU3jqW0XTEhARkdCLpmYzzhRULk0r)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-12-18T18:17:49.957

[在这里](https://github.com/neild001/SeekArc)找到了另一个弯曲搜索栏的好例子。看起来像这样：

![在此处输入图像描述](../Images/77b40b72f44d3c65b78f0b37c9a0fa00.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-21T05:28:06.777

我在[这里](https://github.com/bikcrum/CircularRangeSlider-Android)建立了自己的图书馆。**圆形范围滑块**

此处演示应用程序（Playstore）：[https ://play.google.com/store/apps/details?id=com.bikcrum.circularrangesliderdemo](https://play.google.com/store/apps/details?id=com.bikcrum.circularrangesliderdemo)

[![在此处输入图像描述](../Images/72d9461f7b11618f47c0546409a9b62b.png)](https://i.stack.imgur.com/zrv6V.png)

> 检查它，它可能符合您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:47:46.220

带有图像的自定义圆形搜索栏。

```
 public class ClockSlider extends View implements DialModel.Listener {
        /* Display modes */
        public static final int CLOCK_SLIDER = 1;
        public static final int VOLUME_SLIDER = 2;
        public static final int VIBRATE_PICKER = 3;

        public static final boolean ENABLE_VIBRATE = false;
        private static final int INSETS = 6;
        private static final int MINUTES_PER_HALF_DAY = 100;

        private int width;
        private int height;
        private int centerX;
        private int centerY;
        private int diameter;
        private RectF innerCircle;
        private int displayMode = CLOCK_SLIDER;

        private Calendar start = new GregorianCalendar();
        private int startAngle = 90;
        private Calendar end = new GregorianCalendar();

        /** minutes to shush. */
        private int minutes = 0;

        private Bitmap bgBitmap;
        private Bitmap fgBitmap;
        private Path clipPath = new Path();

        private DialModel model;
        private float luftRotation = 0.0f;
        private int totalNicks = 100;
        private int currentNick = 0;

        public ClockSlider(Context context, AttributeSet attrs) {
            super(context, attrs);

            bgBitmap = BitmapFactory.decodeResource(context.getResources(),R.drawable.black_circle);
            fgBitmap = BitmapFactory.decodeResource(context.getResources(),R.drawable.blue_circle);
            setModel(new DialModel());
        }

        public final void setModel(DialModel model) {
            if (this.model != null) {
                this.model.removeListener(this);
            }
            this.model = model;
            this.model.addListener(this);

            invalidate();
        }

        public final DialModel getModel() {
            return model;
        }

        public Date getStart() {
            return start.getTime();
        }

        public int getMinutes() {
            return minutes;
        }

        public void setMinutes(int minutes) {
            if (minutes == this.minutes) {
                return; // avoid unnecessary repaints
            }
            this.minutes = minutes;
            end.setTimeInMillis(start.getTimeInMillis() + (this.minutes * 60 * 1000L));
            postInvalidate();
        }

    //  public final float getRotationInDegrees() {
    //      return (360.0f / totalNicks) * currentNick;
    //  }

        public Date getEnd() {
            return end.getTime();
        }

        @Override
        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            if (getWidth() != width || getHeight() != height) {
                width = bgBitmap.getWidth();
                height = bgBitmap.getHeight();
    //          width = getWidth();
    //          height = getHeight();
                centerX = width / 2;
                centerY = height / 2;

                diameter = Math.min(width, height) - (2 * INSETS);
                int thickness = diameter / 15;

                int left = (width - diameter) / 2;
                int top = (height - diameter) / 2;
                int bottom = top + diameter;
                int right = left + diameter;
    //          outerCircle = new RectF(left, top, right, bottom);
                int innerDiameter = diameter - thickness * 2;
    //          innerCircle = new RectF(left + thickness, top + thickness, left
    //           + thickness + innerDiameter, top + thickness + innerDiameter);

                innerCircle = new RectF(0, 0,width,height);
                canvas.drawBitmap(bgBitmap, null, innerCircle, null);
            }

            if (displayMode == CLOCK_SLIDER) {
                drawClock(canvas);
            } else {
                throw new AssertionError();
            }
        }
        /**
         * Draw a circle and an arc of the selected duration from start thru end.
         */
        private void drawClock(Canvas canvas) {
            int sweepDegrees = (minutes / 2) - 1;

            canvas.drawBitmap(bgBitmap, null, innerCircle, null);
            // the colored "filled" part of the circle
            drawArc(canvas, startAngle, sweepDegrees);

        }

        @Override
        public void onDialPositionChanged(DialModel sender, int nicksChanged) {
            luftRotation = (float) (Math.random() * 1.0f - 0.5f);
            invalidate();
        }

        private void drawArc(Canvas canvas, int startAngle, int sweepDegrees) {
            if (sweepDegrees <= 0) {
                return;
            }
            clipPath.reset();
            clipPath.moveTo(innerCircle.centerX(), innerCircle.centerY());
            clipPath.arcTo(innerCircle, startAngle + sweepDegrees, -sweepDegrees);
    //      clipPath.lineTo(getWidth() / 2, getHeight() / 2);
            canvas.clipPath(clipPath);

            canvas.drawBitmap(fgBitmap, null, innerCircle, null);

            invalidate();
        }

        /**
         * Accept a touches near the circle's edge, translate it to an angle, and
         * update the sweep angle.
         */
        @Override
        public boolean onTouchEvent(MotionEvent event) {
            int touchX = (int) event.getX();
            int touchY = (int) event.getY();
            int newDisplayMode = displayMode;

            if (event.getAction() == MotionEvent.ACTION_UP) {
                newDisplayMode = CLOCK_SLIDER;
            }

            int distanceFromCenterX = centerX - touchX;
            int distanceFromCenterY = centerY - touchY;
            int distanceFromCenterSquared = distanceFromCenterX * distanceFromCenterX + distanceFromCenterY * distanceFromCenterY;
            float maxSlider = (diameter * 1.3f) / 2;
            float maxUpDown = (diameter * 0.8f) / 2;

            /*
             * Convert the angle into a sweep angle. The sweep angle is a positive
             * angle between the start angle and the touched angle.
             */
    //       if (distanceFromCenterSquared < (maxSlider * maxSlider)) {
            float x1 = bgBitmap.getWidth(), x2 = bgBitmap.getHeight(), y1 = bgBitmap
                    .getWidth(), y2 = bgBitmap.getHeight();
            if ((touchX <= x1 && touchX <= x2)  && (touchY <= y1 && touchY <= y2)) {
                int angle = pointToAngle(touchX, touchY);
                angle = 360 + angle - startAngle;
                int angleX2 = angle * 2;
                angleX2 = roundToNearest15(angleX2);
                if (angleX2 > 720) {
                    angleX2 = angleX2 - 720; // avoid mod because we prefer 720 over
                }
                if (angle <= 364) {
                    angleX2 = 0;
                }
    //          if (angleX2 > 720 || angleX2 < 400) {
    //              return false;
    //          }
                setMinutes(angleX2);
                model.rotate(Integer.valueOf("" + Math.round((angleX2 / 5.4))));
                return true;
            } else {

                return false;
            }
        }

        public int getProgress(){
            return minutes;
        }
        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            int width = MeasureSpec.getSize(widthMeasureSpec);
            int height = MeasureSpec.getSize(heightMeasureSpec);

            // Don't use the full screen width on tablets!
            DisplayMetrics metrics = new DisplayMetrics();
            WindowManager windowManager = (WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE);
            windowManager.getDefaultDisplay().getMetrics(metrics);
            float maxWidthInches = 2.3f;

            width = Math.min(width, (int) (maxWidthInches * metrics.densityDpi));
            height = Math.min(height, (int) (width * 0.7f));

            setMeasuredDimension(width, height);
        }

        /**
         * Returns the number of degrees (0-359) for the given point, such that 3pm
         * is 0 and 9pm is 180.
         */
        private int pointToAngle(int x, int y) {

            if (x >= centerX && y < centerY) {
                double opp = x - centerX;
                double adj = centerY - y;
                return 270 + (int) Math.toDegrees(Math.atan(opp / adj));
            } else if (x > centerX && y >= centerY) {
                double opp = y - centerY;
                double adj = x - centerX;
                return (int) Math.toDegrees(Math.atan(opp / adj));
            } else if (x <= centerX && y > centerY) {
                double opp = centerX - x;
                double adj = y - centerY;
                return 90 + (int) Math.toDegrees(Math.atan(opp / adj));
            } else if (x < centerX && y <= centerY) {
                double opp = centerY - y;
                double adj = centerX - x;
                return 180 + (int) Math.toDegrees(Math.atan(opp / adj));
            }

            throw new IllegalArgumentException();
        }

        /**
         * Rounds the angle to the nearest 7.5 degrees, which equals 15 minutes on a
         * clock. Not strictly necessary, but it discourages fat-fingered users from
         * being frustrated when trying to select a fine-grained period.
         */
        private int roundToNearest15(int angleX2) {
            return ((angleX2 + 8) / 15) * 15;
        }

    } 
```

# python - Django 站点中的搜索功能

> ID：13678266
> 
> 赞同：1
> 
> 时间：2012-12-03T06:32:00.800
> 
> 标签：python, django

我想为我的 django 网站创建一个搜索功能。我按照此[博客](http://julienphalip.com/post/2825034077/adding-search-to-a-django-site-in-a-snap)上的教程进行操作。当我搜索关键字时，它不会打印任何结果。我一直在努力完成这项工作，但没有成功。我怎样才能使这项工作更好？

楷模：

```
class Finb(models.Model):
     user=models.ForeignKey(User)
     title=models.CharField(max_length=250, unique=True)
     address=models.CharField(max_length=200)
     city=models.CharField(max_length=200)
     state=models.CharField(max_length=200)
     guide=models.TextField(max_length=1000)
     price=models.CharField(max_length=100)
     main_view=models.ImageField(upload_to="photos",null=True, blank=True, help_text='Optional.')
     side_view=models.ImageField(upload_to="photos",null=True, blank=True, help_text='Optional.')
     pub_date=models.DateTimeField()

     def __unicode__(self):
         return u'%s %s %s %s %s %s %s %s %s %s' % (self.title,self.address,self.city,self.state,self.guide,self.price,self.main_view,self.side_view,self.user,self.pub_date)
     @models.permalink
     def get_absolute_url(self):
         return ('meekapp.views.cripdetail', (),{'finb_id': self.id}) 
```

表格.py

```
import re

from django.db.models import Q

def normalize_query(query_string,
                    findterms=re.compile(r'"([^"]+)"|(\S+)').findall,
                    normspace=re.compile(r'\s{2,}').sub):
''' Splits the query string in invidual keywords, getting rid of unecessary spaces
    and grouping quoted words together.
    Example:

    >>> normalize_query('  some random  words "with   quotes  " and   spaces')
    ['some', 'random', 'words', 'with quotes', 'and', 'spaces']

'''
return [normspace(' ', (t[0] or t[1]).strip()) for t in findterms(query_string)] 

def get_query(query_string, search_fields):
''' Returns a query, that is a combination of Q objects. That combination
    aims to search keywords within a model by testing the given search fields.

'''
    query = None # Query to search for every search term        
    terms = normalize_query(query_string)
    for term in terms:
        or_query = None # Query to search for a given term in each field
        for field_name in search_fields:
            q = Q(**{"%s__icontains" % field_name: term})
            if or_query is None:
               or_query = q
            else:
                or_query = or_query | q
        if query is None:
           query = or_query
        else:
           query = query & or_query
     return query 
```

意见

```
def search(request):
    query_string = ''
    found_entries = None
    if ('q' in request.GET) and request.GET['q'].strip():
        query_string = request.GET['q']

        entry_query = get_query(query_string, ['title',])

    found_entries = Finb.objects.filter(entry_query).order_by('-pub_date')
    for result in found_entries:
        print result.title
        return render_to_response('search_results.html',
                      { 'query_string': query_string, 'found_entries': found_entries, 'result':result },
                      context_instance=RequestContext(request)) 
```

模板：

```
{% block content %}
  <div id="searchbody" class="wrapper">
    <div class="search-fed">      
      <form method="get" action=".">
     <label for="search"> </label> <input type="text" class="sfield" name="q" max_length="100"  />
     <input type="submit" class="searchput" value="Find" />        
       </form>
     </div>
    <span class="step-links">
       {% if query %}
        <h3>Your Search Results</h3>
  {% for result in found_entries %}

     <p>
         <p> <strong> <a href="{% url cripdetail result.object.id %}" >{{ result.title }}</a> </strong> </p>

    </p>
    {% empty %}
         <p>No results found.</p>
     {% endfor %}

   {% endif %}
 {% endblock %} 
```

如果这看起来不整洁，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:14:36.380

为什么不使用现有的 python/django 包进行搜索？

Haystack 可以为您解决这个问题，让您只需要配置搜索[和](http://haystacksearch.org/)选择搜索后端（solr、elasticsearch、..）

# python - 为什么我不能将事件直接绑定到 Windows 中的 wx.Menu？

> ID：13678267
> 
> 赞同：0
> 
> 时间：2012-12-03T06:32:10.580
> 
> 标签：python, wxpython

我有一个应用程序允许某些控制器更改主菜单栏的布局。我通过将主菜单栏传递给控制器​​来做到这一点，然后控制器向它添加一些菜单。我的问题是将菜单点击事件绑定到那些添加的菜单。理论上很容易：

```
def bind_main_menu_bar(self, main_menu_bar):
    self.main_menu_bar = main_menu_bar

    edit_menu = shared.create_menu([
        (const.ID_UNDO, self.LABEL_UNDO_EMPTY),
        (const.ID_REDO, self.LABEL_REDO_EMPTY),
        (),
        (const.ID_VALIDATE_ADDRESSES, 'Validate selected addresses'),
        (const.ID_VALIDATE_ALL_ADDRESSES, 'Validate all addresses'),
    ])
    edit_menu.Bind(wx.EVT_MENU, self.on_menu)
    edit_menu.Bind(wx.EVT_UPDATE_UI, self.on_menu_update)

    main_menu_bar.Insert(1, edit_menu, 'Edit') 
```

这在 OSX 中非常有效，但在 Windows 中，只有在`wx.EVT_MENU`将事件直接绑定到`edit_menu`菜单时才有效。换句话说，`wx.EVT_UPDATE_UI`永远不会触发事件处理程序。我也尝试过 binding `EVT_MENU_OPEN`，`EVT_MENU_CLOSE`但`EVT_MENU_HIGHLIGHT`它们都不起作用。当我将它们绑定到顶级框架时，它们都可以工作，但是没有办法将事件处理程序限制为仅`edit_menu`菜单。

这是一个错误，还是我忽略了什么？另外，任何人都可以找到解决我的问题的方法吗？

* * *

*我在 Window 8 上使用 wxPython 2.9 (dev)。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:08:32.183

Mike 是对的，避免使用显式 ID——而且您不需要它们（有关详细信息，请参阅[wiki 中的 wxPython 样式指南](http://wiki.wxpython.org/wxPython%20Style%20Guide)）。

菜单项不是常规的 Windows，因此您不能对它们进行正常的事件绑定——太糟糕了。

但是，当您将事件绑定到框架时，您可以指定事件的来源。我常用的绑定菜单事件的习惯用法：

```
FileMenu = wx.Menu()
item = FileMenu.Append(wx.ID_EXIT, "&Quit")
self.Bind(wx.EVT_MENU, self.OnQuit, item) 
```

在这种情况下，`self`是`Frame`- 所以你说：绑定`EVT_MENU`到框架，调用`self.OnQuit`作为回调，但只绑定来自这个特定菜单项的事件。

当您进行动态绑定时，这更难看，但它应该可以工作。

请注意，在此示例中，我使用的是 ID - 该规则的例外是使用标准 ID（例如`wx.ID-EXIT`, `wx.ID_HELP`）很好，因为这样`wx`可以在各种平台上“做正确的事”（例如应用程序的更多菜单OS-X 上的菜单）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:38:10.263

我很确定您应该将菜单事件绑定到框架，而不是菜单项本身。试试看它是否有效。

# java - Java编译器为字符串连接构建低效代码？

> ID：13678277
> 
> 赞同：3
> 
> 时间：2012-12-03T06:32:58.750
> 
> 标签：java, performance, javac, string-concatenation

我认为这是连接字符串的最有效方法

```
new StringBuilder(s1.length() + s2.length() + s3.length()).append(s1).append(s2).append(s3).toString(); 
```

这里 StringBuilder 的缓冲区创建的容量足以容纳其中的所有字符串，否则 StringBuilder 可能需要将缓冲区扩大 3 倍。

但是当我编译/反编译这个

```
String s4 = s1 + s2 + s3; 
```

我在 javac (1.7.0_03) 构建的 .class 中得到了实际代码

```
String s4 = (new StringBuilder(String.valueOf(s1))).append(s2).append(s3).toString(); 
```

哪种方式更有效？

**更新**

正如 Steven Schlansker 所建议的，这是一个性能测试

```
 String s1 = "0123456789";
                String s2 = s1 + s1 + s1;
                String s3 = s1 + s1 + s1 + s1 + s1 + s1;
                long t0 = System.currentTimeMillis();
                for (int i = 0; i < 500000; i++) {

                String s4 = new StringBuilder(s1.length() + s2.length() + s3.length()).append(s1).append(s2).append(s3).toString();

//          String s4 = s1 + s2 + s3;

                }
                System.out.println(System.currentTimeMillis() - t0); 
```

它并不完美，但结果似乎证明我的版本快了约 30%。在我的笔记本（Celeron 925）上，ver.1 aganist 大约 230 ms，ver.2 大约 300 ms。其实这正是我所期望的。所以我认为如果 javac 以更有效的方式编译字符串连接将是一个好主意。有足够的线条像

```
return "\\Q" + s + "\\E"; 
```

即使在 JDK 类中。最后一行来自为提高效率而设计的 java.util.Pattern

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T06:44:44.473

取决于您在其中执行它的环境。如果没有某种测试，不可能肯定地断定一个比另一个更好。

也就是说，我同意提前知道最终尺寸可能会带来一些好处。

我怀疑如果你编写一个微基准测试，你会发现几乎在任何应用程序中差异都是微不足道的。

编辑基准建议：

我看到您在帖子中添加了一些实际数据。恭喜！你在正确的轨道上:-)

不幸的是，Java 有许多不利于编写正确基准的特性。您可能应该看看[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)如果您希望结果准确。同样值得考虑的是，在这种情况下看起来很大的加速在“真实”程序的情况下看起来要小得多。单个数据库获取（以毫秒为单位）很容易使内存分配的任何收益完全无趣（以纳秒为单位）。

# objective-c - 将 iOS 应用程序作为后台服务运行

> ID：13678282
> 
> 赞同：1
> 
> 时间：2012-12-03T06:33:47.040
> 
> 标签：objective-c, ios

我为 iPad 开发了一个应用程序。我想在后台运行它。我知道没有直接的方法可以做到这一点，我找到了一篇[关于 Pastebot 的文章：](http://tapbots.com/blog/pastebot/pastebot-music-in-background)关于这个问题的背景音乐。但这有点令人困惑，没有办法做到这一点。有没有人试过这个？PS这一定不是使用任何越狱的方法，也无需担心苹果不允许此应用提交到他们的应用商店

# objective-c - 在编译期间检查设备版本（宏）

> ID：13678283
> 
> 赞同：0
> 
> 时间：2012-12-03T06:33:49.017
> 
> 标签：objective-c, ios6, ios-simulator

我知道这个话题可能是一个非常常见的问题，但我仍然无法得到解决方案。

首先，我知道有两种方法可以检查操作系统版本

1)

`[[UIDevice currentDevice] systemVersion]`

这绝对不是我正在寻找的东西，因为它是在运行时使用的，我正在寻找的是可以在编译期间完成的事情。

2)

```
#if __IPHONE_6_0
// do something
#endif 
```

这是我希望它能够工作的东西，但它没有。这里有2个问题：

i) 在 iPhone 模拟器 5.0 版上运行，我注意到`#if __IPHONE_6_0`返回 TRUE 值。我认为仅当版本为 6.0 或更高版本时它才假设为 TRUE？

ii) 当我在 iPad 模拟器上测试它时，同样的事情发生了。该宏是否也适用于 iPad？

我希望在编译期间完成它的原因是因为我使用的是最新的 iOS 6.0 社交框架，但我希望我的应用程序也支持旧版本（最低 4.3）。问题是我的部分代码正在使用社交框架的东西。所以我必须做一个宏检查来知道这个设备是否支持社交框架，如果不编译那个特定的社交框架的代码。如果我不这样做，我会在编译过程中出错，因为低于版本 6 的操作系统不知道什么是社交框架。

期待在这里得到一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:28:10.693

您不能为此目的使用宏，因为当您编译宏时使用您的版本，它不适用于其他设备（这似乎很明显......）

# html - 我希望 HTML 表格中的列标题垂直打印

> ID：13678284
> 
> 赞同：4
> 
> 时间：2012-12-03T06:33:49.377
> 
> 标签：html

我想要这张桌子

```
id     name       country
--     -------    -------

1       John        America
2       Smith        Mexico
3       Khan        India 
```

像这样打印

```
id            1             2           3
name        John          Smith       Khan
country     America       Mexico      India 
```

在 HTML 中。

```
<table>
<tr>
<th>id</th>
<th>name</th>
<th>country</th>
</tr>
<tr>
<td>1</td>
<td>John</td>
<td>America</td>
</tr> 
```

我应该如何修改上面的代码以获得该输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T06:39:03.767

```
 <table>
     <tr>
     <th>id</th><td>1</td>
     </tr>
     <tr>
     <th>name</th><td>John</td>
     </tr>
     <tr>
     <th>country</th><td>America</td>
     </tr>
     </table> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T08:28:35.987

用于`th`标题，无论它们是水平还是垂直运行。您可以在同一个表中同时拥有行标题和列标题。您还可以添加可选`scope`属性以提高可访问性，为您提供一个钩子，以便您可以使用 CSS 为它们设置不同的样式，并为可维护性明确含义。

该`scope`属性指定当前标题单元格为其提供标题信息的一组数据单元格。该`row`值提供包含它的行的其余部分的标题信息。该`col`值为包含它的列的其余部分提供标题信息。

[阅读有关范围属性的更多信息。](http://www.w3.org/TR/WCAG20-TECHS/H63)

```
<table>
    <tr>
        <th scope="row">id</th>
        <th scope="col">1</th>
        <th scope="col">2</th>
        <th scope="col">3</th>
    </tr>
    <tr>
       <th scope="row">name</th>
       <td>John</td>
       <td>Smith</td>
       <td>Khan</td>
    </tr>
    <tr>
        <th scope="row">country</th>
        <td>America</td>
        <td>Mexico</td>
        <td>India</td>
    </tr>
</table> 
```

**编辑**：示例 CSS

```
th[scope=row] { color: green }
th[scope=col] { color: blue } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:41:32.230

我喜欢这个问题，我没有办法通过 css 来解决它。你可以通过更新你的 html 代码来实现它

```
<table>
    <tr>
        <th>id</th>
        <td>2</td>
        <td>3</td>
        <td>4</td>
    </tr>
    <tr>
       <th>name</th>
       <td>John</td>
       <td>Akhil</td>
       <td>Sas</td>
    </tr>
        <th>country</th>
        <td>America</td>
        <td>India</td>
        <td>Canada</td>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-05T18:31:23.977

这实际上使用 CSS 很容易。

**HTML**

```
<table>
    <tr>
      <th>id</th>
      <th>name</th>
      <th>country</th>
    </tr>
    <tr>
      <td>1</td>
      <td>John</td>
      <td>America</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Smith</td>
      <td>Mexico</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Khan</td>
      <td>India</td>
    </tr>
</table> 
```

**CSS**

```
@media print {
  tr { display: inline-block; }
  th, td { display: block; }
  } 
```

**结果**

![在此处输入图像描述](../Images/5a24e8ba6a47cecd93933867254eb9dd.png)

# java - gzip：解压缩解释位

> ID：13678288
> 
> 赞同：0
> 
> 时间：2012-12-03T06:34:23.243
> 
> 标签：java, gzip, inflate

我正在尝试通过在 Java 中实现它来学习 Inflate 算法，以便我可以在汇编中为具有非常受限指令集的 CPU 实现它。

在读取文字、距离和长度代码的数量后，我无法从文件中读取正确的代码长度。我正在按照[此处](http://www.infinitepartitions.com/cgi-bin/showarticle.cgi?article=art001)描述的实现进行操作，其中他们提供了一个示例 .gz 文件[gunzip.c.gz](http://www.infinitepartitions.com/gunzip.c.gz)。读入 gzip 标头后，以下是第一个（如果我没看错的话，只有）压缩数据块的前 56 位：

```
10111101 00011011 11111101 01101111 11011010 11001000 11110010 
```

我将通过以下偏移量来引用字节中的位：`[76543210]` 第一个字节`10111101`包含`end of block`at 偏移量`0`，偏移量`21`包含确定块类型的两个位。
在这种情况下，这是最后一个块，它是一个动态的 Huffman 树。

以下要解释的位是字面量（5 位）、距离（5 位）和长度（4 位）代码。它们的读法如下：

```
10111101 -> 10111XXX -> 23 (literal)
00011011 -> XXX11011 -> 27 (distance)
00011011 11111101 -> 000XXXXX XXXXXXX1 -> 1000 -> 8 (length) 
```

在这之后，我遇到了麻烦。接下来的 36 位应该是 12 组，每组 3 位，表示代码长度。
从上面的字节中，我看到（解释为 little-endian）：

```
110 111 111 011 011 010 011 011 100 100 101 100
3   7   7   6   6   2   6   6   1   1   5   1 
```

但我希望（如上面的链接所示）

```
101 011 011 110 110 110 110 110 110 001 001 001
5   6   6   3   3   3   3   3   3   4   4   4 
```

我看不到任何从文件中获取这些值的方法。我一定是误解了应该如何读取这些位。给定一个 5 位值后跟一个 3 位值的字节，`[CBA43210]`我会将其读取为`01234`and `ABC`。

这篇文章在正确的代码长度应该是什么方面是错误的，或者更有可能是我应该如何解释它们是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:46:15.313

> 位本身被读取 LSB 到 MSB，如图 6 所示：
> 
> ```
> <----
> 87654321 
> ```

（来自问题链接的文件）表明

> [CBA43210] 我会把它读作 01234 和 ABC。

（从问题本身）是正确的。

Little-endian 意味着首先存储或读取最低有效位（此处为位）或读取（此处为解释）。

但是，`01234`它们`ABC`本身是 little-endian，因此该字节`110 11000`将被解释为`3 3`, not `24 6`。

这意味着五位、五位和四位

```
10111101 00011011 ... 
```

是

```
xxx11101 => 11101  => 29
101xxxxx
xxxxxx11 => 11 101 => 29
xx0110xx => 0110   => 6 
```

# java - 访问已创建视图的相同实例

> ID：13678292
> 
> 赞同：0
> 
> 时间：2012-12-03T06:34:46.827
> 
> 标签：java, android, eclipse, instance

我有一个在我的主 android 项目的 onCreate 中创建的对象的实例。我创建了一个菜单项，它在菜单项之外，但我想访问同一个实例。我该怎么做呢？（我不能将实例设为全局，因为尚未调用 onCreate。

```
public class My_Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my__main);
    final new_viewer pv = new new_viewer(this);
}
}

public void test()
{
//how can I get the same instance of pv here?
} 
```

对此的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:37:54.093

将您的`private new_viewer pv;`as**类级别变量**设为`My_Main Activity`，例如，

```
public class My_Main extends Activity {
 private new_viewer pv = null;
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my__main);
    pv = new new_viewer(this);
 }

 public void test()
 {
 //Access pv here..
 }
} 
```

还将您的`test()`函数放在 My_Main Activity 范围内..

# php - 警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源并且没有选择数据库

> ID：13678293
> 
> 赞同：-2
> 
> 时间：2012-12-03T06:35:04.810
> 
> 标签：php

你们能帮帮我吗..我仍然不了解警告以及如何解决尽管我查看了所有解决方案

```
 <php
    $hostname = "localhost";

    $database= "doctor";

    $username = "root";

    $password = "";

    $doktor = mysql_pconnect($hostname, $username, $password) or 

    trigger_error(mysql_error(),E_USER_ERROR); 

    $IdCountry = isset($_POST['IdCountry']);

    $Country= isset($_POST['Country']);

    $result = mysql_query("SELECT * FROM warganegara WHERE IdWarga  = '$IdWarga'");
if(mysql_num_rows($result) >0){
while ($test = mysql_fetch_array($result) or die (mysql_error())){

}
    if (!$result) 

    {

    die("Error: Data not found..");

    }

    $Country=$test['Country'] ;

    if(isset($_POST['save']))

    {

    $Country_save = $_POST['ctry'];

    mysql_query("UPDATE country SET Country='$Country_save' WHERE IdCountry = '$IdCountry'")

    or die(mysql_error()); 

    echo "Saved!";

    header("Location: index.php");  

    }

    mysql_close($doctor);

    ?> 
```

问题已得到回答，谢谢大家..但是现在我可以编辑任何内容，因为尽管我单击了某些国家/地区的编辑，但文本字段却一无所获

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:37:48.350

isset 返回布尔值，因此您的 IdCountry 等被设置为布尔值而不是字符串。不要对结果进行模具测试，而是在查询上进行，你应该没问题。

# matlab - 如何在没有for循环的matlab中计算这个

> ID：13678295
> 
> 赞同：5
> 
> 时间：2012-12-03T06:35:16.557
> 
> 标签：matlab, for-loop, matrix

由于 matlab 在执行 for 循环时很慢，我通常避免对所有代码进行 for 循环，并将它们转换为矩阵计算，这样会很快。但这里有一个问题我找不到聪明的方法：

我有anxn矩阵

```
A=[a1,a2,a3,...,an], 
```

这里 a1,a2,a3....an 是矩阵的列。

另一个 nxn 矩阵

```
B=[b1,b2,b3,...,bn], 
```

同样 b1,b2,b3... 也是 B 的列。

还有anxn矩阵M。

我想计算nxn矩阵

```
C=[c1,c2,c3,...,cn], 

thus (M+diag(ai))*ci = bi. 
```

即

```
ci = (M+diag(ai))\bi. 
```

我知道没有 for 循环的一种方法是：

```
C(:)=( blkdiag(M)+diag(A(:)) )\B(:). 
```

但这会做太多的计算而不是需要。

有什么聪明的解决方案吗？您可以假设计算中没有奇点问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:36:07.957

自从 Matlab...euhm，R2008a 以来，“for 循环在 Matlab 中很慢”的说法通常不再正确？（有人请填写这个：）

无论如何，试试这个：

```
clc
clear all

M = rand(50);
a = rand(50);
b = rand(50);

% simple loop approach
tic
c = zeros(size(b));
for ii = 1:size(b,2)
    c(:,ii) = ( M+diag(a(:,ii)) ) \ b(:,ii);
end
toc

% not-so-simple vectorized approach
tic
MM = repmat({M}, 50,1);
c2 = (blkdiag(MM{:})+diag(a(:)))\b(:);
toc

norm(c(:)-c2(:)) 
```

结果：

```
Elapsed time is 0.011226 seconds.  % loop
Elapsed time is 1.049130 seconds.  % no-loop
ans =
     5.091221148787843e-10         % results are indeed "equal" 
```

可能有更好的方法来矢量化操作，但我怀疑它会比 JIT 循环版本快得多。

有些问题不适合矢量化。我认为这是一个。

# c# - 我的代码在连接到数据库时显示错误：“连接到 databaseAccess 时出错，拒绝使用'root'@'localhost（使用密码：YES）”

> ID：13678299
> 
> 赞同：0
> 
> 时间：2012-12-03T06:35:35.657
> 
> 标签：c#, asp.net, sql, database

请帮忙。我没有被授予通过 localhost 访问我的数据库的权限，但用户名和密码是正确的。我的代码在连接到数据库时显示错误。我需要有关连接数据库的语法方面的帮助。这是代码：

```
using System;
using System.Data;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MySql.Data.MySqlClient;
using System.Windows.Forms;
using DPUruNet;
using System.Drawing.Imaging;
using System.Drawing;

namespace UareUBiometrics
{
  class HelperFunctions
  {
  private static Fmd[] fmds;

  private static Fmd[] allDBFmds;
  public static Fmd[] GetAllFmds
  {
  get { return allDBFmds; }

  } 

  private static string[] allUserNames;
  public static string[] GetAllUserNames
  {
  get { return allUserNames; }
  }

  private static int[] allfingerIDs;
  public static int[] GetallfingerIDs
  {
  get { return allfingerIDs; }
  }

  public static MySqlDataReader ConnectDBnExecuteSelectScript(string Script)
  {
  string connectionString = "server=localhost;User Id=root;database=customerinfo;Password=";
  MySqlDataReader dataReader = null;
  MySqlConnection conn = new MySqlConnection(connectionString);
  try
  {
  conn.Open();
  MySqlCommand sqlCommand = new MySqlCommand(Script, conn);
  dataReader = sqlCommand.ExecuteReader(CommandBehavior.CloseConnection);

  }
  catch (MySqlException ex)
  {
  MessageBox.Show("Error opening connection" + ex.Message);
  }

  return dataReader;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:41:28.277

试试这个连接字符串：

```
string connectionString = "Server=localhost;Database=customerinfo;Uid=root;Pwd=;"; 
```

# r - 子集和滞后列表数据结构

> ID：13678300
> 
> 赞同：2
> 
> 时间：2012-12-03T06:35:36.357
> 
> 标签：r, list

我有一个索引如下的列表：

```
>list.stuff
[[1]]
[[1]]$vector
...
[[1]]$matrix
....
[[1]]$vector

[[2]]
null

[[3]]
[[3]]$vector
...
[[3]]$matrix
....
[[3]]$vector
.
.
. 
```

列表中的每个段都根据另一个索引向量进行索引：

```
>index.list
1, 3, 5, 10, 15 
```

在`list.stuff`中，只有在索引 1、3、5、10、15 中的每一个处，才会有 2 个向量和 1 个矩阵；其他一切都会像`[[2]]`. 我想做的是像`lag.xts`函数一样滞后，以便将存储的任何内容`[[1]]`推送到`[[3]]`最后一个删除。如果可能的话，这还需要对列表进行子集化。我想知道是否存在一些处理列表操作的函数。

我的想法是，对于`xts`，可以根据您提供的索引提取时间序列：

```
xts.object[index,]  #returns the rows 1,3,5,10,15 
```

从这里我可以落后：

```
lag.xts(xts.object[index,]) 
```

任何帮助将不胜感激谢谢：

编辑：这是一个可重现的例子：

```
list.stuff<-list()
vec<-c(1,2,3,4,5,6,7,8,9)
vec2<-c(1,2,3,4,5,6,7,8,9)
mat<-matrix(c(1,2,3,4,5,6,7,8),4,2)

list.vec.mat<-list(vec=vec,mat=mat,vec2=vec2)

ind<-c(2,4,6,8,10)
for(i in ind){
   list.stuff[[i]]<-list.vec.mat
}

slist<-list.stuff[ind]
list.stuff[ind]<-lapply(seq_along(slist),function(i) ifelse(i <= 1, NA, slist[[i-1]])) #lag list 
```

新的滞后列表仅保留一个向量而不是 2 个向量和列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:16:39.733

首先，一个示例列表：

```
elist <- list(1, 2, 3, 4, 5, 6) 
```

指数：

```
index.list <- c(1, 3, 5) 
```

根据索引创建子集：

```
sublist <- elist[index.list]

[[1]]
[1] 1

[[2]]
[1] 3

[[3]]
[1] 5 
```

滞后：

```
lag <- 1 
```

`lag`对列表应用大小滞后

```
newsublist <- lapply(seq_along(sublist),
                     function(i) if (i <= 1) NA else slist[[i-1]])

[[1]]
[1] NA

[[2]]
[1] 1

[[3]]
[1] 3 
```

*注意*。在其当前实现中，最后一个命令仅适用于正滞后。

现在，将值放回列表中`elist`：

```
elist[index.list] <- newsublist 
```

结果：

```
[[1]]
[1] NA

[[2]]
[1] 2

[[3]]
[1] 1

[[4]]
[1] 4

[[5]]
[1] 3

[[6]]
[1] 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:20:44.627

使用 xts 是一个要求还是只是一个可能的解决方案的想法？你有没有尝试过：

```
list.stuff[ index.list[[[-1]] ]  <-
  list.stuff[ index.list[[-length(index.list)]] ] 
```

然后，如果需要：

```
 list.stuff[ index.list[[[1]] ]  <- NULL # or some other value 
```

# c++ - C++ 后端服务的 Web 界面

> ID：13678302
> 
> 赞同：2
> 
> 时间：2012-12-03T06:35:44.327
> 
> 标签：c++, webserver, embeddedwebserver

我目前正在开发一个后端服务，它有一个非常粗糙的接口，用于获取有关服务的统计信息和信息。我想为其部署一个轻量级 Web 服务器，以允许用户导航到它的 IP 地址并收集有关该服务的统计信息和其他信息。我的后端服务做了很多视频编码等，所以我更喜欢不会占用太多 CPU 周期的东西。

有没有人对这样的网络服务器和两者之间通信的轻量级机制有一些好的建议。我从来没有实现过这样的东西，但我看到了人们在本地套接字上使用tomcat和XML之类的东西来做这种事情的例子。我只是想对社区进行民意调查，看看是否还有其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:45:49.637

要将一些 Web 服务添加到现有的 C++ 应用程序中，您可以考虑使用一些 HTTP 服务器库，例如[Wt](http://www.webtoolkit.eu/wt)或[libonion](http://www.coralbits.com/libonion/)。

但是你需要在应用程序中有一些事件循环......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:52:52.743

您应该选择的方法取决于您选择的 Web 服务器和“普通”Web 服务器脚本/编程语言是什么。无论如何，进行大量计算的工作者/进程应该在 C++ 中。但是，它的包装脚本/编程语言可能是其他语言，例如 Java/Python 等。

您应该从查看[FastCGI](http://en.wikipedia.org/wiki/FastCGI)开始。如果您想在 C++ 中做“所有事情”，那么请考虑实现 FastCGI 的[Wt工具包。](http://www.webtoolkit.eu/wt)

另一种方法可能是使用 Python/Django，因为从 Python 调用 C++ 很容易。

如何在 FastCGI 中使用 Django [https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/)

FastCGI 示例：http: [//forum.lighttpd.net/topic/79206](http://forum.lighttpd.net/topic/79206)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:56:13.447

如果您不需要 100% 实时或交互式统计数据，您可以定期将它们写入文本或 HTML 文件，并使用标准网络服务器（ngingx、Apache）来提供这些数据。

# oracle - Oracle WebLogic App Server 11gR1(10.3.6) 与 Oracle WebLogic Portal Server 的兼容性

> ID：13678303
> 
> 赞同：5
> 
> 时间：2012-12-03T06:35:56.053
> 
> 标签：oracle, weblogic11g

我有一个托管在 Oracle WebLogic Application Server 11gR1(10.3.6) 上的现有 Web 应用程序。现在，作为此 Web 应用程序中新功能的一部分，我将开发 RESTful Web 服务并将其托管在此应用程序服务器上。这些 Web 服务将被重新开发的 Portal 应用程序使用。此 Portal 应用程序将部署在 Oracle WebLogic Portal Server 上。由于现有的 Web 应用程序部署在 Oracle WebLogic Application Server 11gR1 (10.3.6) 上，我想知道哪个 Oracle WebLogic Portal Server 版本与应用程序服务器最匹配或最适合同步。

很抱歉回复太晚了。最初的想法是在 WAS 中部署 REST 服务，然后通过部署在 Portal Server 中的前端应用程序使用它们。但是，由于项目要求，部署偏好发生了变化。REST 服务和前端应用程序现在是单个 Web 应用程序的一部分，并部署在 Tomcat Web 容器中。

谢谢 srguruprasad

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:53:34.193

这取决于您的 WebLogic Server Licensing Edition。根据[本](http://docs.oracle.com/cd/E23943_01/doc.1111/e14860/products.htm)文档（参见表 1-1），“WebLogic Suite”许可版本支持 Portal。Weblogic 服务器的“标准版”或“企业版”没有提及 Portal。

# c# - Exe 文件没有从我的 Windows 服务运行并具有数据库连接？

> ID：13678306
> 
> 赞同：7
> 
> 时间：2012-12-03T06:36:17.323
> 
> 标签：c#, windows, winforms, entity-framework-4, windows-services

我创建了一个 Windows 应用程序。当我手动执行我的可执行文件时，它工作正常，但是当我使用 Windows 服务运行我的 exe 时，它​​显示提供失败错误。我正在使用实体框架。实体框架有什么问题吗？

这是我的代码：

```
 private void Threadfun()
    {
        try
        {               
            System.Diagnostics.Process.Start(@"D:\V-Tec\bin\Debug\VibrantIndexerForm.exe");
            if (System.IO.File.Exists(@"D:\VibrantIndexerSetup\MarcExport1.txt"))
            {
            }
            else
            {
                System.IO.File.Create(@"D:\VibrantIndexerSetup\MarcExport1.txt").Dispose();
            }

            System.IO.File.WriteAllText(@"D:\VibrantIndexerSetup\MarcExport1.txt", System.DateTime.Now.ToString());
            System.Threading.Thread.Sleep(100);
        }
        catch (Exception ex)
        {
        }     
    } 

 private void time_Elapsed(object sender, ElapsedEventArgs e)
    {

        m_thread = new System.Threading.Thread(new System.Threading.ThreadStart(Threadfun));
        if (m_thread.IsAlive)
        {
        }
        else
        {
            m_thread.Start();
        }
    }

    protected override void OnStart(string[] args)
    {
        if (time.Enabled == false)
        {    
            time.Elapsed += new ElapsedEventHandler(time_Elapsed);
            time.Interval = 2000;
            time.Enabled = true;
        }
    }

    protected override void OnStop()
    {
        time.Enabled = false;  
    } 
```

我检查了我的网络服务并将异常消息打印到我的记事本中，发现了这个错误：

> 基础提供程序在打开时失败。

但我只在作为 Windows 服务运行时出现此错误。如果我手动运行我的 exe，它工作正常。是否需要在 Windows 服务中添加引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:10:26.637

我还通过 Windows 服务启动我的应用程序。看看我的代码能不能帮到你

```
 public class WindowsApi
{

    [DllImport("Wtsapi32.dll", EntryPoint = "WTSQueryUserToken", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool WTSQueryUserToken(uint SessionId, ref IntPtr phToken);

    [DllImport("advapi32.dll", EntryPoint = "CreateProcessAsUserW", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CreateProcessAsUser([InAttribute()]IntPtr hToken, InAttribute(), MarshalAs(UnmanagedType.LPWStr)]string lpApplicationName, [InAttribute(), MarshalAs(UnmanagedType.LPWStr)] string lpCommandLine, [InAttribute()] IntPtr pProcessAttributes, [InAttribute()] IntPtr lpThreadAttributes, MarshalAs(UnmanagedType.Bool)] bool bInheritHandles, uint dwCreationFlags, [InAttribute()] IntPtr lpEnvironment, [InAttribute(), MarshalAsAttribute(UnmanagedType.LPWStr)] string pCurrentDirectory, ref STARTUPINFOW lpStartupInfo, ref PROCESS_INFORMATION lpProcessInformation);

    [StructLayout(LayoutKind.Sequential)]
    public struct SECURITY_ATTRIBUTES
    {
        public uint nLength;
        public IntPtr lpSecurityDescriptor;
        [MarshalAs(UnmanagedType.Bool)]
        public bool bInheritHandle;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct STARTUPINFOW
    {
        public uint cb;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string lpReserved;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string lpDesktop;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string lpTitle;
        public uint dwX;
        public uint dwY;
        public uint dwXSize;
        public uint dwYSize;
        public uint dwXCountChars;
        public uint dwYCountChars;
        public uint dwFillAttribute;
        public uint dwFlags;
        public ushort wShowWindow;
        public ushort cbReserved2;
        public IntPtr lpReserved2;
        public IntPtr hStdInput;
        public IntPtr hStdOutput;
        public IntPtr hStdError;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct PROCESS_INFORMATION
    {
        public IntPtr hProcess;
        public IntPtr hThread;
        public uint dwProcessId;
        public uint dwThreadId;
    }

} 
```

将以下代码放入您的方法中

```
try
     {
         IntPtr UserTokenHandle = IntPtr.Zero;
         WindowsApi.WTSQueryUserToken(WindowsApi.WTSGetActiveConsoleSessionId(), ref UserTokenHandle);
         WindowsApi.PROCESS_INFORMATION ProcInfo = new WindowsApi.PROCESS_INFORMATION();
         WindowsApi.STARTUPINFOW StartInfo = new WindowsApi.STARTUPINFOW();
         StartInfo.cb = Convert.ToUInt32(System.Runtime.InteropServices.Marshal.SizeOf(StartInfo));
         string arguments = " nonGUI";
         WindowsApi.CreateProcessAsUser(UserTokenHandle, pathToExe + "\\YourAppName.exe", arguments, IntPtr.Zero, IntPtr.Zero, false, 0, IntPtr.Zero, null, ref StartInfo, ref ProcInfo);

     catch (Exception ex)
     {
         //Catch excpetion
     } 
```

这将在当前用户帐户中创建一个进程。此代码已启动并正在运行文件。

我希望它会有所帮助！干杯！

# cloud - 我们如何在 Jelastic Cloud PaaS 中获得本地文件系统访问权限

> ID：13678309
> 
> 赞同：2
> 
> 时间：2012-12-03T06:36:30.070
> 
> 标签：cloud, jelastic

我已经在 J​​elastic 云上成功部署了基于 Spring MVC、JPA 和 MySql 的应用程序，但是我有一个问题是我无法在 jelastic 上上传 lucence 搜索索引文件和图像（我将上传的图像存储在文件系统而不是数据库中）。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:34:26.983

出于存储目的，您可以使用应用服务器虚拟容器的*/home目录。*无论部署如何，都会存储上传到此目标的文件。您可以通过 Jelastic UI 执行上传（环境拓扑中应用服务器图标旁边的“配置”按钮）
如果您需要在代码中设置提到的目标，[此文档](http://jelastic.com/docs/environment-variables)将很有用。

更多信息可以在[Jelastic Community](http://community.jelastic.com/)上找到，所以请确保你在那里））

# plugins - Facebook Like Box 面孔在登录 Facebook 时不出现

> ID：13678312
> 
> 赞同：1
> 
> 时间：2012-12-03T06:36:41.150
> 
> 标签：plugins, facebook-likebox

退出 Facebook 后，我会在“赞”框中看到所有面孔，如下所示：http: [//allben.net/misc/facebook_logged_out.png](http://allben.net/misc/facebook_logged_out.png)

当登录到 Facebook 时，没有显示任何面孔，如下所示：http: [//allben.net/misc/facebook_logged_in.png](http://allben.net/misc/facebook_logged_in.png)

我的 Facebook 帐户也是 Facebook 页面的管理员，可能相关也可能不相关。

这发生在我拥有的几个网站上，例如： [http ://www.azom.com/](http://www.azom.com/)

问题开始于大约 2 或 3 周前。Firefox 和 Chrome 中的行为相同。有任何想法吗？

# python - 在 django allauth 中，如何从 OpenId 登录/Google 获取用户名？

> ID：13678314
> 
> 赞同：4
> 
> 时间：2012-12-03T06:36:44.470
> 
> 标签：python, django, django-authentication, django-allauth

我确实看到了几个类似的问题，但他们似乎并没有完全回答我遇到的问题。

到目前为止，我一直在做`manage.py runserver`, 在本地运行。

起初我试着把它放在我的settings.py中：

```
import allauth
ACCOUNT_EMAIL_REQUIRED = True 
```

然后尝试将其扩展到：

```
import allauth
ACCOUNT_EMAIL_REQUIRED = True
ACCOUNT_AUTHENTICATION_METHOD = "username_email"
ACCOUNT_USERNAME_REQUIRED = True
SOCIALACCOUNT_AUTO_SIGNUP = True 
```

但是当我尝试使用我的 google 帐户登录时（也就是说，在 openId-googlem 下而不是直接的 google 下），我可以看到它收到了我的电子邮件，但它不使用我的电子邮件。在回调函数中，我尝试加入一堆打印语句，当我打印以下内容时，它看起来像是从返回 url 中提取的`user.__dict__`：

```
{'_state': <django.db.models.base.ModelState object at 0x101604dd0>,
 'date_joined': datetime.datetime(2012, 12, 3, 4, 35, 41, 949526, tzinfo=<UTC>),
 'email': u'CORRECT_USERNAME@gmail.com',
 'first_name': '',
 'id': None,
 'is_active': True,
 'is_staff': False,
 'is_superuser': False,
 'last_login': datetime.datetime(2012, 12, 3, 4, 35, 41, 949506, tzinfo=<UTC>),
 'last_name': '',
 'password': '',
 'username': ''} 
```

也就是说，它填充电子邮件字段，但不填充`username`字段。我认为默认情况下，allauth 会填充`username`with `CORRECT_USERNAME`，但它看起来是空的。然后当我打印出帐户时，我在该`user_id`字段中看不到任何内容。

当我跳到个人资料页面时，它会将`username`“用户”列为“用户”，这看起来像是绝对的后备/默认值。也就是说，这个：

```
{% user_display user %}
<p>Another try... <br />
{{user.username}}
<p>---------------------------</p>
{{ user.account_provider }}
<p>---------------------------</p>
{{ user.get_provider }}
<p>---------------------------</p> 
```

给了我这个：

```
 user

Another try...
user

---------------------------

---------------------------

--------------------------- 
```

我在 runserver 控制台中看不到任何错误。

我还需要添加到 settings.py 中吗？我需要编写一些回调函数来从电子邮件字段中提取用户名吗？

如果这有什么不同，我正在使用 python 2.6.1(Snow Leopard)。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-07T16:23:01.630

如果你看一下 django-allauth 的 OpenID 代码，你会发现它没有提取用户名，而只提取了电子邮件、名字、姓氏和姓名：

[https://github.com/pennersr/django-allauth/blob/master/allauth/socialaccount/providers/openid/provider.py#L65](https://github.com/pennersr/django-allauth/blob/master/allauth/socialaccount/providers/openid/provider.py#L65)

至于 ACCOUNT_USERNAME_REQUIRED 设置，您可以在文档中看到它在注册表单中使用：

[ACCOUNT_USERNAME_REQUIRED (=True) 用户在注册时需要输入用户名。请注意，即使 ACCOUNT_AUTHENTICATION_METHOD 设置为电子邮件，也会要求用户这样做。当您不希望提示用户输入用户名时设置为 False。](http://django-allauth.readthedocs.org/en/latest/configuration.html)

我希望这可以帮助你解决你的疑惑。

# jquery - 从 iFrame 加载顶部框架中的页面

> ID：13678315
> 
> 赞同：2
> 
> 时间：2012-12-03T06:37:01.270
> 
> 标签：jquery, iframe, fancybox

我正在使用fancybox，我想让它加载一个页面，当它执行该页面时，它会检查它是否在顶部框架中，如果不是，它会在顶部框架中重新加载，谁能告诉我我会怎么做实现这个？

这无法通过链接或表单完成，因为它是从服务器加载的。

我得到了以下代码，但它不起作用

```
<script type="text/javascript">
    <!--
    function breakout_of_frame(){
        if (top.location != location) {
            parent.location.href = document.location.href ;
        }
    }
    -->
</script>
<body onload="breakout_of_frame()"> 
```

诀窍是我要检查它是否在 iFrame 中的页面与顶部框架的页面相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:54:19.080

您可以使用关键字`top`来引用最高级别的框架，`self`它指的是包含当前文档的框架：

```
function breakout_of_frame() {
  if(top !== self) {
     top.location.href = location.href;
  }
} 
```

# .net - 使用 msdn .net 4.5 中的异步套接字示例的套接字接收缓冲区中的额外字符

> ID：13678316
> 
> 赞同：0
> 
> 时间：2012-12-03T06:37:07.293
> 
> 标签：.net, sockets, asynchronous

我对此感到有点困惑......接收到的数据前面的垃圾字符是什么......每次都使用相同的字符集。我试过这个和其他例子......同样的事情。

等待连接... 等待连接... 从套接字读取 32 个字节。资料：??▼?? ??↑??'??☺??♥??♥asdf : 32 向客户端发送了 32 个字节。

我只是加载和运行这个例子...... [http://msdn.microsoft.com/en-us/library/fx6588te.aspx](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:59:19.883

没有任何垃圾字符；以下是好的：

```
static void Client(object state)
{
    IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName());
    IPAddress ipAddress = ipHostInfo.AddressList[0];
    IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 11000);

    using (var client = new TcpClient())
    {
        client.NoDelay = true;
        client.Connect(localEndPoint);
        using (var ns = client.GetStream())
        {
            string data = @"this is 
some random data
with multiple lines
<EOF>"; // <=== server explicitly expects this as a sentinel value

            var buffer = Encoding.ASCII.GetBytes(data);
            ns.Write(buffer, 0, buffer.Length);

            // note: normally I'd use Socket etc; ReadToEnd is
            // ... unreliable on a NetworkStream
            using (var sr = new StreamReader(ns))
            {
                // for this ^^^ to end, it means the server disconnected
                // the socket, which means it got the <EOF> and shutdown
                string s = sr.ReadToEnd();
                Console.WriteLine("From server:");
                Console.WriteLine(s);
            }
        }
    }
}
public static int Main(String[] args) {
    ThreadPool.QueueUserWorkItem(Client);
    // ^^^ client on a different thread to the server
    StartListening();
    return 0;
} 
```

我猜错误出在“客户端”代码中，您没有向我们展示。大概它不是服务器所期望的 ASCII 编码文本。

# c++ - 如何新建 value_type 指针？

> ID：13678317
> 
> 赞同：0
> 
> 时间：2012-12-03T06:37:07.587
> 
> 标签：c++

我在写一个序列化和反序列化的方法，在实现的时候遇到了一个问题`deserialize`：I can't `new`a `value_type`，其实是一个`Skill*`.

```
template <class T >
static istream &DeSerializePVector(istream& istream_, T& container)
{
  typedef typename T::value_type ElementType;
  size_t size;
  istream_ >> size;
  container.reserve(size);
  container.resize(size);

  for(typename T::iterator ite = container.begin(); ite != container.end(); ite++)
  {
     *ite = new *ElementType;   //how can  I initialize this type?
     (*ite)->DeSerialize(istream_);
  }

  return istream_;
}

int main()
{
    Skill*  disease = Factory::CreateSkill ( SKILLTYPE_DISEASE );
    Skill*  purify = Factory::CreateSkill ( SKILLTYPE_PURIFY );
    Skill* skills[2] = {disease, purify};
    vector<Skill*> int_vector = Tools::MakeVector ( skills );
    ofstream fileOut;
    fileOut.open ( "data.txt", std::ofstream::binary );

    ISerializable::SerializePVector( fileOut, int_vector );
    fileOut.flush();
    fileOut.close();

    ifstream fileIn;
    vector<Skill*> int_vector2;
    fileIn.open ( "data.txt", std::ofstream::binary );
    ISerializable::DeSerializePVector( fileIn, int_vector2 );
} 
```

我应该如何得到这份工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:46:49.483

假设`ElementType`有一个默认构造函数，那么

```
*ite = new ElementType; 
```

它`ElementType`已经是一个指针类型，那么你可能需要这个（C++11）：

```
#include <type_traits>

*ite = new typename std::remove_pointer<ElementType>::type; 
```

如果您没有 C++11 支持，则可以使用`boost`等价的。

# c#-4.0 - 如何在 C# 中授予管理员对代码的权限

> ID：13678323
> 
> 赞同：3
> 
> 时间：2012-12-03T06:37:33.030
> 
> 标签：c#-4.0

我正在开发一个名为 的项目`computer scanner`，但是当我运行我的代码以扫描我的硬盘驱动器时，它给了我一个异常“ `Access Denied to System Volume Information Folders`”，并且还有一些其他文件夹也具有相同的行为，我无法访问它们。

在从 Internet 上研究了这个异常之后，我必须了解，**在添加“清单文件”并将其选项更改为“需要管理员”之后，程序将以管理员身份运行，但不幸的是没有发生任何事情。** 我正在使用一些代码，它允许我以管理员身份运行我的代码，但仍然向我显示相同的异常。

```
WindowsIdentity CurrentIdentity = WindowsIdentity.GetCurrent();
                WindowsPrincipal CurrentPrincipal = new      WindowsPrincipal(CurrentIdentity);

                if (CurrentPrincipal.IsInRole(WindowsBuiltInRole.Administrator))
{
//Scanning Code will Execute
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T06:59:39.300

您根本不能在代码中赋予自己管理员权限，那太荒谬了！您必须以管理员身份运行 Visual Studio，`RightClick->run as admin` 并且您的最终应用程序也必须以管理员身份运行。

使用这个： [如何强制我的 .NET 应用程序以管理员身份运行？](https://stackoverflow.com/questions/2818179/how-to-force-my-net-app-to-run-as-administrator-on-windows-7)

为了强制用户以管理员身份运行。

**这不会使应用程序以管理员身份运行，但会提升用户，以便应用程序在应用程序启动期间要求用户以管理员身份运行**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-15T13:45:28.320

您可以使用 ClickOnce 安全设置创建清单，然后将其禁用：

`Right click on the Project -> Properties -> Security -> Enable ClickOnce Security Settings`

单击它后，将在项目的属性文件夹下创建一个名为 app.manifest 的文件，一旦创建，您可以取消选中启用 ClickOnce 安全设置选项

打开该文件并更改此行：

```
<requestedExecutionLevel level="asInvoker" uiAccess="false" /> 
```

至：

```
 <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" /> 
```

这将使程序需要管理员权限。

# c# - IEnumerable 跳过并采取

> ID：13678330
> 
> 赞同：2
> 
> 时间：2012-12-03T06:38:26.110
> 
> 标签：c#, generics

我有一个自定义控件，其数据源类型为 IEnumerable（非泛型）。现在我想在数据源上实现分页，所以我需要 List-of-T 有的 Skip and Take 之类的东西。现在我正在使用以下内容：

```
List<object> pagingList = DataSource.Cast<object>().ToList() 
```

我猜这可能效率低下，所以我正在寻找一种更好的方法来做到这一点。用两个计数器枚举集合、跳过元素等可能更有效，但它太丑了，我只是不想这样做。但也许这是最好的选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T06:42:51.443

你为什么打电话`ToList()`？您可以使用`Skip`和`Take`不使用它：

```
IEnumerable<object> paged = DataSource.Cast<object>()
                                      .Skip(page * pageSize)
                                      .Take(pageSize); 
```

这将节省将整个数据源转换为列表的时间——但这*确实*意味着当源不是`IList<T>`.

不过有两个重要问题：

*   您提到您*猜测*您的原始代码效率低下……您测量了吗？这些数据有多大，它在内存中的形式是什么？你还用它做什么？这真的是瓶颈吗？收集事实而不是猜测。
*   如果你有一个通用的数据源，那么以各种方式使用你的数据会更容易......你能做到吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:41:56.310

考虑到 LINQ 扩展方法的实现方式，我认为这不会太低效。如果你真的想要，你可以为 IEnumerable 实现`Skip()`and的扩展方法`Take()`，但我认为没有必要。

尝试代码对阅读它的人最有意义的方法是个好主意，然后如果你发现它执行不充分并且分析器说这部分是罪魁祸首，则返回并更改它。

# python - Pysys.py 没有响应

> ID：13678332
> 
> 赞同：-2
> 
> 时间：2012-12-03T06:38:29.677
> 
> 标签：python

我已经安装了 pysys。但是，如果我在命令提示符下键入 pysys.py，它不会显示任何内容。只是它会进入下一行而不显示任何信息..请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:44:57.187

从文档来看，它似乎是一个框架。您必须自己编写测试用例并使用 Testrunner 运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T10:20:34.893

pysys 自述文件确实详细介绍了启动器脚本，如果您还没有这样做，那么它值得一读（例如，参见[http://sourceforge.net/projects/pysys/files/pysys/0.9.3](http://sourceforge.net/projects/pysys/files/pysys/0.9.3)）

“PySys 在安装过程中安装了一个启动器脚本 'pysys.py'，以方便测试用例的管理和执行。在 unix 系统上，该脚本安装到 Python 二进制目录中，例如 /usr/local/bin，因此在默认用户路径上。在 windows 系统上，脚本安装在 Python 安装的 Scripts 目录中，例如 c:\Python27\Scripts\pysys.py，默认情况下不在用户路径上。要在 windows 系统上运行Python 安装的 Scripts 目录应添加到用户路径中，以允许直接执行脚本”

# sql-server - SQL 中的日期差异

> ID：13678333
> 
> 赞同：0
> 
> 时间：2012-12-03T06:38:44.827
> 
> 标签：sql-server

我正在使用以下 SQL 查询来查找两个日期时间字段之间的差异，此查询以小时为单位返回时间，但我想要以小时、分钟和秒为单位的时间。

```
Convert(decimal(18,2),(select datediff(hh,JobScreen.[DateTimeOn], 
                       JobScreen.[DateTimeOff]))) as [ActualHrs] 
```

请建议选项。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:44:58.873

如果您想要集体使用它，为什么将其投射为`decimal(18,2)`仅表达一种价值？

```
JobScreen.[DateTimeOff] - JobScreen.[DateTimeOn] as TimeSpan 
```

这适用于一天（24 小时）以下的时间跨度。

例子：

```
declare @dt datetime
declare @dt2 datetime
set @dt = '20121202 11:43:54'
set @dt2 = '20121202 13:23:23'
select @dt2 - @dt TimeSpan,
       convert(char(8), @dt2 - @dt, 8) TimeSpanVarchar

|           TIMESPAN | TIMESPANVARCHAR |
-----------------------------------------
| 1900-01-01 01:39:29|        01:39:29 | 
```

# r - 在 R (coxph) 中拟合伽马脆弱模型

> ID：13678337
> 
> 赞同：9
> 
> 时间：2012-12-03T06:39:03.283
> 
> 标签：r, error-handling

我有一个包含 6 个集群的[数据集](http://yaap.it/paste/c11b9fdcfd68d02b#gIVtLrrme3MaiQd9hHy1zcTjRq7VsVQ8eAZ2fol1lUc=)，每个集群包含 48 个（可能被审查，在这种情况下`event = 0`）生存时间。该`x`列包含一个特定于集群的解释变量。我尝试用伽马脆弱模型来描述该数据，如下所示

```
 library(survival)

 mod <- coxph(Surv(time, event) ~ 
   x + frailty.gamma(cluster, eps=1e-10, method="em", sparse=0),
              outer.max=1000, iter.max=10000,
              data=data) 
```

这是错误消息：

```
Error in if (history[2, 3] < (history[1, 3] + 1)) theta <- mean(history[1:2,  : 
  missing value where TRUE/FALSE needed 
```

有谁知道如何调试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T19:20:57.593

# 替代解决方案：更改方差因子

改变随机效应方差的方法，似乎可以解决问题。

例如：

```
mod.aic <- coxph(Surv(time, event) ~ 
               x + frailty.gamma(cluster, eps=1e-10, method="aic", sparse=0),
             outer.max=1000, iter.max=10000,
             data=dat)

plot(survfit(mod.aic), col=4) 
```

![在此处输入图像描述](../Images/5c585e65b9e51d80cf2b8f3bf9070f98.png)

# ddd hoc 解决方案：如果我们删除一个集群就可以工作

也许这不能完全回答您的问题，但是当我删除任何集群时，例如：

```
par(mfrow=c(2,3))
res <- sapply( 1:6 , function(x) {
                      mod <- 
                        coxph(Surv(time, event) ~ 
                        x + frailty.gamma(cluster, eps=1e-10, method="em", sparse=0),
                        outer.max=1000, iter.max=10000,
                        data=subset(dat,cluster != x)
                        )
                     plot(survfit(mod), col=4,main= paste ('cluster', x, 'is removed'))
                     legend(10,1,mod$iter)
              }) 
```

coxph 收敛，我对所有样本都有相同的结果。

![在此处输入图像描述](../Images/5ba194efa43c16eeac3fc71ca3fd2087.png)

我没有足够的关于您的数据的信息以供进一步分析，但我尝试在不同的集群之间进行一些比较。

```
library(ggplot2
qplot(data = dat, x=time , y = x , facets= event~cluster) 
```

![在此处输入图像描述](../Images/747ff4a936c349c8fcec659eca85c286.png)

我注意到 3 组：

1.  集群 1,3,5：事件均匀分布
2.  集群 2 ,4 ：仅在很小的时间内发生的事件。
3.  集群 6：令人惊叹的一个（唯一事件 1）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T16:53:07.603

问题出在数据上；`x`如果`x`每个`cluster`. _

通过集群查看数据的分布，`x`我们可以看到：

```
table(data$x,data$cluster)
     1  2  3  4  5  6
  0  0 48  0 48 48  0
  1 48  0 48  0  0 48 
```

*我认为您所说的集群特定的解释变量*是什么意思。这在任何模型中都将是一个问题，因为`x`与 共线（我认为是这个词）`cluster`。甚至尝试最基本的模型：

```
data$cluster<-as.factor(data$cluster)
mod <- coxph(Surv(time, event) ~ x + cluster, data=data)

Warning message:
In coxph(Surv(time, event) ~ x + cluster, data = data) :
  X matrix deemed to be singular; variable 5 
```

矩阵是奇异的，因为无法区分 和 的`cluster`效果`x`。

`cluster`如果除了and之外没有其他变量`x`，那么你真正能做的就是单独运行集群的效果：

```
data$cluster<-as.factor(data$cluster)
coxph(Surv(time, event) ~ cluster,data=data)

Call:
coxph(formula = Surv(time, event) ~ cluster, data = data)

          coef exp(coef) se(coef)     z       p
cluster2 1.070      2.92    0.382  2.80 5.1e-03
cluster3 0.499      1.65    0.384  1.30 1.9e-01
cluster4 1.705      5.50    0.365  4.68 2.9e-06
cluster5 2.058      7.83    0.370  5.56 2.7e-08
cluster6 4.415     82.69    0.399 11.06 0.0e+00 
```

考虑两者`cluster1`和`cluster6`具有相同的值`x`，并且它们之间的风险比为 83。也许`cluster6`不同，也许`x`在 内的行为不同`cluster6`：由于数据的结构方式，您无法区分差异。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T06:11:19.430

这是 Terry Therneau（coxph 的作者）给我的答案。

我看了你的资料：

```
> table(x, cluster)
     1  2  3  4  5  6
  0  0 48  0 48 48  0
  1 48  0 48  0  0 48 
```

您的协变量“x”完全由集群变量预测。如果您适合固定效应模型： coxph(Surv(time, event) ~ factor(cluster) +x)

那么“x”变量被声明为多余的。当随机效应的方差足够大时，当方差足够大时，伽马模型中也会发生同样的情况。您的模型接近此限制，并且解决方案失败。如手册页中所述，现在首选 coxme 功能。

最后，您的特定错误消息是由“稀疏”的无效值引起的。我将在程序中添加一个检查。您可能希望“sparse=10”强制进行非稀疏计算。

# asp.net - 如何找到 Rad 网格过滤器模板控件及其在 javascript 中的值

> ID：13678340
> 
> 赞同：0
> 
> 时间：2012-12-03T06:39:21.580
> 
> 标签：asp.net, telerik, rad-controls

我正在使用 Telerik 网格，因为我必须在 javascript 中找到过滤控件及其值。请帮我。这是aspx的示例代码

```
<telerik:RadGrid ShowFooter="True" ID="grdQtmItemDetails" runat="server" GridLines="None"
    AllowPaging="false" AllowSorting="True" AutoGenerateColumns="False" Width="815px"
    PageSize="5" Height="430px" AllowFilteringByColumn="true" OnItemDataBound="grdQtmItemDetails_ItemDataBound"
    OnNeedDataSource="grdQtmItemDetails_NeedDataSource">
        <PagerStyle Mode="NextPrevAndNumeric"></PagerStyle>
        <MasterTableView GridLines="None" Width="250%">
             <Columns>
                  <telerik:GridTemplateColumn HeaderText="SLNO" UniqueName="SL_NO">
                       <ItemTemplate>
                            <%# Eval("SL_NO")%>
                        </ItemTemplate>
                        <FilterTemplate>
                            <telerik:RadTextBox ID="txtslno" runat="server" Enabled="False" Width="100%">
                            </telerik:RadTextBox>
                        </FilterTemplate>
                        <HeaderStyle Width="50px" />
                  </telerik:GridTemplateColumn>
                  <telerik:GridTemplateColumn HeaderText="Material Code" UniqueName="MTRL_CD">
                        <ItemTemplate>
                             <%# Eval("MTRL_CD")%>
                        </ItemTemplate>
                        <FilterTemplate>
                             <telerik:RadComboBox ID="cmbMaterialCodeTab2" runat="server" TabIndex="27" Width="100%"
                                     DropDownWidth="300px" EmptyMessage="--Select--" HighlightTemplatedItems="True"
                                     MarkFirstMatch="True">
                                  <HeaderTemplate>
                                       <table style="width: 250px">
                                            <tr>
                                                 <td style="width: 60px;">
                                                      Code
                                                 </td>
                                                 <td style="width: 170px;">
                                                      Description
                                                 </td>
                                            </tr>
                                       </table>
                                 </HeaderTemplate>
                                 <ItemTemplate>
                                      <table style="width: 250px">
                                          <tr>
                                              <td style="width: 60px;">
                                                  <%# DataBinder.Eval(Container.DataItem, "MTRL_CD")%>
                                              </td>
                                              <td style="width: 170px;">
                                                  <%# DataBinder.Eval(Container.DataItem, "MTRL_DESC")%>
                                              </td>
                                         </tr>
                                    </table>
                               </ItemTemplate>
                           </telerik:RadComboBox>
                           <sup>*</sup>
                      </FilterTemplate>
                 </telerik:GridTemplateColumn>
                 <telerik:GridTemplateColumn HeaderText="Materail Description" UniqueName="MTRL_DESC" >
                      <ItemTemplate>
                           <%# Eval("MTRL_DESC")%>
                      </ItemTemplate>
                      <FilterTemplate>
                           <telerik:RadTextBox ID="txtmtrldesctab2" runat="server" >
**<ClientEvents OnValueChanged="test" />**
                           </telerik:RadTextBox>
                      </FilterTemplate>
                      <HeaderStyle Width="150px" />
                 </telerik:GridTemplateColumn>
                 <telerik:GridTemplateColumn HeaderText="UOM" UniqueName="UOM_ID">
                      <ItemTemplate>
                            <%# Eval("UOM_ID")%>
                      </ItemTemplate>
                      <FilterTemplate>
                            <telerik:RadTextBox ID="txtUomIdtab2" runat="server" Width="100%" Enabled="false">
                            </telerik:RadTextBox><sup>*</sup>
                      </FilterTemplate>
                 </telerik:GridTemplateColumn>
            </Columns>
            <ExpandCollapseColumn Visible="False">
                 <HeaderStyle Width="19px"></HeaderStyle>
            </ExpandCollapseColumn>
            <CommandItemSettings ExportToPdfText="Export to PDF" />
            <RowIndicatorColumn Visible="False">
                 <HeaderStyle Width="20px" />
            </RowIndicatorColumn>
            <EditFormSettings>
                 <EditColumn FilterControlAltText="Filter EditCommandColumn column">
                 </EditColumn>
            </EditFormSettings>
       </MasterTableView>
       <ClientSettings AllowDragToGroup="True" AllowColumnsReorder="True">
           <Resizing AllowColumnResize="true" />
           <Scrolling AllowScroll="True" UseStaticHeaders="True" SaveScrollPosition="true">
           </Scrolling>
           <Selecting AllowRowSelect="false" />
       </ClientSettings>
       <FilterMenu EnableImageSprites="False">
       </FilterMenu>
 </telerik:RadGrid> 
```

现在我该如何编写javascript函数

```
function test(sender,args)
{
//please write some code here to find filter items;
} 
```

写一些东西来找到我的过滤器项目。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:33:43.407

请尝试下面的代码片段。

ASPX：

```
<asp:HiddenField ID="hidden1" runat="server" /> 
```

C＃

```
protected void grdQtmItemDetails_ItemDataBound(object sender, Telerik.Web.UI.GridItemEventArgs e)
{
    if (e.Item is GridFilteringItem)
    {
        GridFilteringItem item = (GridFilteringItem)e.Item;
        TextBox txtslno = (TextBox)item.FindControl("txtslno");
        hidden1.Value = txtslno.ClientID.ToString();
    }
} 
```

JS

```
function test(sender, args) {
            var hidden = document.getElementById("hidden1").value;
            var txtslno = document.getElementById(hidden);
            if (txtslno != null) {
                // Access Your TextBox here
            }
 } 
```

注意：如果您得到隐藏变量的值为空，请尝试使用下面的代码片段。

```
 var hidden = $find("<%= hidden1.ClientID %>").val();
 var hidden = $('#<%= hidden1.ClientID %>').val(); 
```

# asp.net-web-api - 将 WebApi 部署到服务器 2012 时需要安装 asp.net（“应用程序服务器”）吗？

> ID：13678341
> 
> 赞同：4
> 
> 时间：2012-12-03T06:39:23.753
> 
> 标签：asp.net-web-api

我是 .Net 4.5 中的 WebAPI 新手。可能我的问题是一个常见问题解答，但我找不到解决方法：`application server`除了 IIS 之外，我是否需要添加角色才能在服务器 2012 上运行 IIS 托管的 WebApi 应用程序？我相信 .Net 4.5 在 2012 年就已经存在，但我是否也必须安装角色`asp.net`？

在这个问题上我能找到的最接近的是：

*   [部署 webAPI 服务器端所需的最少文件](https://stackoverflow.com/questions/12412163/minimum-files-needed-to-deploy-webapi-server-side)

# c# - 错误“未加载类。（来自 HRESULT 的异常：0x80131303）”

> ID：13678342
> 
> 赞同：2
> 
> 时间：2012-12-03T06:39:24.393
> 
> 标签：c#, error-handling

我正在尝试使用 MonoDevelop 调试数组，但我注意到出现这些错误。我正在使用 c#，即使出现此错误，程序也运行良好，尽管我无法逐步调试它。

```
int[] a = {1,2,3,4}; 
```

我无法在“Locals”中看到数组“a”中的内容。当我尝试展开“a”时，我看到错误消息“未加载一个类。（来自 HRESULT 的异常：0x80131303）。”

# php - PHP 生成的 HTML 对外部 Javascript 没有反应？

> ID：13678344
> 
> 赞同：0
> 
> 时间：2012-12-03T06:39:33.460
> 
> 标签：php, javascript, onclick

我试图生成一个表单，当表单选中时，onClick() 事件将启用选择选项。这是我的php代码：

```
function generateOption()
{   
for($x = 0; $x < 10; $x++)
{
    echo "<option value='".$x."'>".$x."</option>";
}
}

function generateForm($I_Id)
{
    switch($I_Id)
    {
    case "I0001":
    {
        echo "<td><input type='checkbox' name='".$I_Id."' value='".$I_Id."' id='".$I_Id."' onClick='Enable(this,BT)' />";
        echo "Binding Tape</td><td>";
        echo "<select size='1' name='KuantitiMohon".$I_Id."' id='BT' disabled >";generateOption();echo "</select></td>";break;
    }
} 
```

这是我的javascript代码：

```
function Enable(checkB,idE)
{
if(checkB.checked==true)
{
    document.getElementById(idE).disabled=false;
}
else
    document.getElementById(idE).disabled=true;
} 
```

我不太确定问题出在哪里，但是，在我以前的 html 代码中，我能够在那里启用该选项，但在我更改为 php.ini 后现在变得无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:43:27.047

```
Enable(this,BT) 
```

您正在尝试传递“对象”BT，但您的意图是传递名为 BT 的“字符串”ID。您需要在“BT”周围添加引号，如下所示：

```
onClick=\"Enable(this,'BT')\" 
```

您需要转义 onclick 周围的引号，以便 PHP 不会假定它是字符串的结尾。

# operating-system - Windows Phone 的文件系统？

> ID：13678345
> 
> 赞同：1
> 
> 时间：2012-12-03T06:39:33.860
> 
> 标签：operating-system, filesystems, windows-phone

Windows Phone 操作系统中文件系统的名称是什么？

我知道`Isolated Storage`，但它是文件系统的名称还是它构成了一个成熟的文件系统，例如；exFat、NTFS 还是 ReFS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T07:07:27.827

隔离存储只是一种抽象。Windows Phone 7 使用 Windows CE 作为后端，Windows CE 使用自己的存储管理机制。CE 还支持外部存储器的 FAT（我不记得确切的味道）。Windows Phone 8*可能*使用 NTFS，但这只是猜测。

# php - PHP 类：如何从数组中获取随机值而不在刷新时改变结果？

> ID：13678350
> 
> 赞同：0
> 
> 时间：2012-12-03T06:40:12.290
> 
> 标签：php

我正在尝试完成一个简单的任务，其中我有一个包含 5 个值的数组，我需要多次随机化并在页面上显示结果。

例如，我的数组可能是`('color1','color2','color3','color4','color5')`.

我需要在页面上显示 50 个随机颜色的项目，项目的数量可能会根据其他因素增加或减少。

当一个项目被分配了一种颜色时，它将永远是那个颜色，而不是每次我刷新页面时它都会改变。

我目前正在使用`array_rand`，每次刷新页面时它都会随机化颜色。`shuffle`似乎在所有物品上都给了我完全相同的颜色。

```
<?php
class Item{
    public $color;
    public $colorArray = array('#000','#fff','#0008b2','#0f9d00','#fff600');

    public function __construct() {
        $this->color = $this->pickColor($this->colorArray);
    } 

    public function pickColor($colors) {        
        $randNum = array_rand($colors);
        $this->color = $this->colorArray[$randNum];
        return $this->color;
    }
}
?> 
```

然后在我的索引页面上，我有：

```
<?php 
    $item = new Item();
    echo $item->color;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:00:03.440

我认为这对你有意义：

```
<?php
class Item{

    public $id;
    public $color;
    public $colorArray = array('#000','#fff','#0008b2','#0f9d00','#fff600');

    public function __construct($id) {

        $this->id = $id;

        if(!empty($_SESSION['element_' . $id])) {
            $this->color = $_SESSION['element_' . $id];
        }
        else {
            $this->color = $this->pickColor($this->colorArray);
        }
    }

    public function pickColor($colors) {        
        return $colors[rand(0, count($colors))];
    }
}
?>

<?php
$_SESSION['element_4'] = 'color of carrot';

for($i = 0; $i < 50; $i++) {
    $temp = new Item($i);
    echo($temp->color . '<br/>');
}

die('Done');
?> 
```

通过刷新来测试它 - 元素 4 将始终具有相同的值：“胡萝卜的颜色”。

这段代码基于您问题下的评论。

* * *

更新：我添加了一些 ID 来标识该元素的颜色已经设置，因此我们可以轻松地将其存储在 session. 如果您不提供任何身份证明，您将无法做到这一点。

此外，我认为在这种情况下，该类的 colorArray 和 pickColor 方法应该是静态的，但我会把它留给你。

# java - JButton 动作监听器问题。显示在字段中的滑块值

> ID：13678351
> 
> 赞同：1
> 
> 时间：2012-12-03T06:40:13.473
> 
> 标签：java, swing, jbutton, jtextfield, jslider

所以我有一个明天到期的程序，只要我能找出我的代码有什么问题，我就会坚持下去。第一个也是最大的问题让我沉默了一段时间是我的重置按钮动作监听器。它只是无法正确编译并说找不到值？我把它注释掉了，所以我至少可以运行你应该能够清楚地看到我注释掉它们的地方的程序。第二个问题是我必须让一个文本字段在移动它们时显示两个滑块之间的 MAX 值，另一个给我两个滑块之间的 TOTAL 值。老实说，我不知道该怎么做，只是简单地将两个 jtextfields 附加到左侧滑块。为此，我将不胜感激朝着正确的方向前进？如果您给我代码，我将不胜感激，但我也想解释它为什么有效/我的代码有什么问题。谢谢！

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;

/**
   This class displays a window with a slider component.
   The user can slide the left or right slider. As the 
    sliders are adjusted it displays the maximum sound 
    level coming from either slider as well as the total.
*/

public class SoundLevels extends JFrame
{
   private JLabel label1, label2, label3, label4;     // Message labels
   private JTextField maxSound;     // Max Sound Level
   private JTextField totalSound;   // Total Sound Level
   private JPanel mpanel;           // Max sound level panel
   private JPanel tpanel;           // Total sound level panel
   private JPanel sliderPanel1;     // Slider panel 1
    private JPanel sliderPanel2;     // Slider panel 2
    private JPanel resetpanel;       // Reset button panel
   private JSlider slider1;         // Left sound adjuster
    private JSlider slider2;         // Right sound adjuster
    private JButton resetButton;     // Reset button
   /**
      Constructor
   */

   public SoundLevels()
   {
      // Set the title.
      setTitle("Sound Levels");

      // Specify an action for the close button.
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Creates reset button
        resetButton = new JButton("Reset");

      // Create the message labels.
      label1 = new JLabel("Left:  ");
      label2 = new JLabel("Right: ");
        label3 = new JLabel("Max:   ");
        label4 = new JLabel("Total: ");

      // Create the read-only text fields.
      maxSound = new JTextField("0", 10);
      maxSound.setEditable(false);
      totalSound = new JTextField("0", 10);
      totalSound.setEditable(false);

      // Create the slider.
      slider1 = new JSlider(JSlider.HORIZONTAL, 0, 100, 0);
        slider2 = new JSlider(JSlider.HORIZONTAL, 0, 100, 0);
      slider1.addChangeListener(new SliderListener());

      // Create panels and place the components in them.
      mpanel = new JPanel();
        resetpanel = new JPanel();
        tpanel = new JPanel();
        sliderPanel1 = new JPanel();
        sliderPanel2 = new JPanel();

        //Add components to panels
        mpanel.add(label1);
      mpanel.add(maxSound);

        tpanel.add(label2);
      tpanel.add(totalSound);

        sliderPanel1.add(label1);
      sliderPanel1.add(slider1);

        sliderPanel2.add(label2);
        sliderPanel2.add(slider2);

        resetpanel.add(resetButton);           

      // Initialize event listener
//      resetButton.addActionListener(new ResetButtonListener());

        // Sets window to a border layout format.
      setLayout(new GridLayout(1, 5));

      // Add the panels to the content pane.
      add(sliderPanel1);
        add(sliderPanel2);
        add(resetpanel);
        add(mpanel);
      add(tpanel);

      // Pack and display the frame.
      pack();
      setVisible(true);
   }

   /**
      Private inner class that handles the event when
      the user clicks the Reset button.
   */

/* COMMENTED THIS OUT SO IT AT LEAST RUNS   
      private class ResetButtonListener implements ActionListener
      {
         public void actionPerformed(ActionEvent e)
         {
         // Set the panel's background to red.
            max = 0;  //should reset sliders to 0
                total = 0; //should reset sliders to 0
         }
      }
*/   

   /**
      Private inner class to handle the change events
      that are generated when the slider is moved.
   */

   private class SliderListener implements ChangeListener
   {
      public void stateChanged(ChangeEvent e)
      {
         int max, total;             

         // Get the slider value.
         max = slider1.getValue();
            total = slider1.getValue();

         // Store the total sound level in its display field.
         totalSound.setText(Integer.toString(total));

         // Store the max sound level in its display field.
         maxSound.setText(Integer.toString(max));
      }
   }

   /*
      The main method creates an instance of the
      class, which displays a window with a slider.
   */

   public static void main(String[] args)
   {
      new SoundLevels();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:00:02.047

我建议进行 2 次更改。

```
slider1.addChangeListener(new SliderListener());
slider2.addChangeListener(new SliderListener()); // newly added 
```

& 在监听器中：

```
// Get the slider value.
max = slider1.getValue();
total = slider2.getValue(); // change from 1 -> 2 
```

> 我的操作私有重置按钮侦听器类有什么问题？

它是关于两个`int`属性的范围和可见性。考虑此代码，但请注意执行的操作不会更改滑块值，这可能会使用户感到困惑。

```
// class level attributes that are visible to both
// ResetButtonListener & ResetButtonListener 
private int max, total;             

/**
Private inner class that handles the event when
the user clicks the Reset button.
 */
private class ResetButtonListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        // Set the panel's background to red.
        max = 0;  //should reset sliders to 0
        total = 0; //should reset sliders to 0
    }
}

/**
Private inner class to handle the change events
that are generated when the slider is moved.
 */
private class SliderListener implements ChangeListener
{
    public void stateChanged(ChangeEvent e)
    {

        // Get the slider value.
        max = slider1.getValue();
        total = slider2.getValue();

        // Store the total sound level in its display field.
        totalSound.setText(Integer.toString(total));

        // Store the max sound level in its display field.
        maxSound.setText(Integer.toString(max));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:07:12.927

我改变的是向两个滑块添加一个监听器-

```
slider1.addChangeListener(new SliderListener());
slider2.addChangeListener(new SliderListener()); 
```

并且还对滑块侦听器进行了更改-

```
private class SliderListener implements ChangeListener {
        public void stateChanged(ChangeEvent e) {
            int max = 0;
            int total = 0;
            // Get the slider value.
            int slider1Val = slider1.getValue();
            int slider2Val = slider2.getValue();
            if (slider1Val > slider2Val) {
                max = slider1Val;
            } else {
                max = slider2Val;
            }
            total = slider2Val + slider1Val;
            // Store the total sound level in its display field.
            totalSound.setText(Integer.toString(total));

            // Store the max sound level in its display field.
            maxSound.setText(Integer.toString(max));
        }
    } 
```

以下是整个编辑代码的方式 -

```
package org.dchan.orm;

import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.JTextField;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

/**
 * This class displays a window with a slider component. The user can slide the
 * left or right slider. As the sliders are adjusted it displays the maximum
 * sound level coming from either slider as well as the total.
 */

public class SoundLevels extends JFrame {
    private JLabel label1, label2, label3, label4; // Message labels
    private JTextField maxSound; // Max Sound Level
    private JTextField totalSound; // Total Sound Level
    private JPanel mpanel; // Max sound level panel
    private JPanel tpanel; // Total sound level panel
    private JPanel sliderPanel1; // Slider panel 1
    private JPanel sliderPanel2; // Slider panel 2
    private JPanel resetpanel; // Reset button panel
    private JSlider slider1; // Left sound adjuster
    private JSlider slider2; // Right sound adjuster
    private JButton resetButton; // Reset button

    /**
     * Constructor
     */

    public SoundLevels() {
        // Set the title.
        setTitle("Sound Levels");

        // Specify an action for the close button.
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Creates reset button
        resetButton = new JButton("Reset");

        // Create the message labels.
        label1 = new JLabel("Left:  ");
        label2 = new JLabel("Right: ");
        label3 = new JLabel("Max:   ");
        label4 = new JLabel("Total: ");

        // Create the read-only text fields.
        maxSound = new JTextField("0", 10);
        maxSound.setEditable(false);
        totalSound = new JTextField("0", 10);
        totalSound.setEditable(false);

        // Create the slider.
        slider1 = new JSlider(JSlider.HORIZONTAL, 0, 100, 0);
        slider2 = new JSlider(JSlider.HORIZONTAL, 0, 100, 0);
        slider1.addChangeListener(new SliderListener());
        slider2.addChangeListener(new SliderListener());
        // Create panels and place the components in them.
        mpanel = new JPanel();
        resetpanel = new JPanel();
        tpanel = new JPanel();
        sliderPanel1 = new JPanel();
        sliderPanel2 = new JPanel();

        // Add components to panels
        mpanel.add(label1);
        mpanel.add(maxSound);

        tpanel.add(label2);
        tpanel.add(totalSound);

        sliderPanel1.add(label1);
        sliderPanel1.add(slider1);

        sliderPanel2.add(label2);
        sliderPanel2.add(slider2);

        resetpanel.add(resetButton);

        // Initialize event listener
        // resetButton.addActionListener(new ResetButtonListener());

        // Sets window to a border layout format.
        setLayout(new GridLayout(1, 5));

        // Add the panels to the content pane.
        add(sliderPanel1);
        add(sliderPanel2);
        add(resetpanel);
        add(mpanel);
        add(tpanel);

        // Pack and display the frame.
        pack();
        setVisible(true);
    }

    /**
     * Private inner class that handles the event when the user clicks the Reset
     * button.
     */

    /*
     * COMMENTED THIS OUT SO IT AT LEAST RUNS
     */private class ResetButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            // Set the panel's background to red.
            // max = 0; // should reset sliders to 0
            // total = 0; // should reset sliders to 0
            slider1.setValue(0);
            slider2.setValue(0);
        }
    }

    /*
*/

    /**
     * Private inner class to handle the change events that are generated when
     * the slider is moved.
     */

    private class SliderListener implements ChangeListener {
        public void stateChanged(ChangeEvent e) {
            int max = 0;
            int total = 0;
            // Get the slider value.
            int slider1Val = slider1.getValue();
            int slider2Val = slider2.getValue();
            if (slider1Val > slider2Val) {
                max = slider1Val;
            } else {
                max = slider2Val;
            }
            total = slider2Val + slider1Val;
            // Store the total sound level in its display field.
            totalSound.setText(Integer.toString(total));

            // Store the max sound level in its display field.
            maxSound.setText(Integer.toString(max));
        }
    }

    /*
     * The main method creates an instance of the class, which displays a window
     * with a slider.
     */

    public static void main(String[] args) {
        new SoundLevels();
    }
} 
```

听者的创建需要一点逻辑理解。但是您需要了解，要从两个滑块中获取事件，您应该将侦听器应用于两者。整个代码的要点可在 - [https://gist.github.com/4193279](https://gist.github.com/4193279)获得。

为了将来参考，我建议您将问题分成几个部分。

# haskell - 在 Haskell 和 else if 语句中调用测试用例

> ID：13678356
> 
> 赞同：2
> 
> 时间：2012-12-03T06:40:52.200
> 
> 标签：haskell

好的，所以我看了很多类似的问题，但我还是有点困惑。

因此，我使用断言设置了多个测试用例，并且我正在尝试编写一个程序，该程序使用测试用例的输入和使用 if-else 语句和递归的输出。我的 if 语句不断出现解析错误。

**不是实际的代码只是我正在尝试做的一个例子**

我的问题是如何设置一个程序来正确调用“测试”？

所以我有一个由我的第一个测试用例 tl1 给出的整数“n”，我想检查 n 是否是偶数，如果它是奇数则将其乘以 2，然后将其乘以 3 并将新值分配给 n

**所以这是我试图编写的部分，以便接受类似于给出的测试用例代码的测试用例的输入。**

```
tests :: if (mod n 2) = 0
         then tests (n * 2)
         else tests (n * 3)   

tests = 
        testlist [
                   tl1
                  ,tl2
                  ,tl3
                 ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:41:09.750

我不清楚你想要接下来的三个功能中的哪一个，所以我已经完成了它们：

```
testListAll :: [a -> Bool] -> a -> Bool
testListAll xs a = and $ map ($ a) xs

testListAny :: [a -> Bool] -> a -> Bool
testListAny xs a = or $ map ($ a) xs

testListList  :: [a -> Bool] -> a -> [Bool]
testListList xs a = map ($ a) xs 
```

例如，

```
> testListAll [(> 5), (== 7), even] 4
False
> testListAny [(> 5), (== 7), even] 4
True
> testListAll [(> 5), (== 8), even] 8
True
> testListList [(> 5), (== 8), even] 10
[True,False,True] 
```

现在我们可以编写如下函数

```
test :: Integral a => a -> Bool
test n = if even n 
        then testListAll [(> 5), (< 9)] n
        else testListAny [(<= 5), (> 8)] n 
```

给予

```
> test 5
True
> test 6
True
> test 7
False
> test 8
True
> test 9
True
> test 10
False
> test 11
True 
```

* * *

## 解释

我将详细解释一个功能；其他人的工作方式非常相似。

第一个函数可能更简单地写成：

```
testListAll' :: [a -> Bool] -> a -> Bool
testListAll' xs a = and [f a | f <- xs] 
```

所以它所做的就是`f`从列表中获取每个测试函数并将其应用于测试值`a`。如果列表中的所有内容都为 True，则该函数`and :: [Bool] -> Bool`给出 True；此函数检查是否满足所有检查。

那么为什么我把右手边写成`and $ map ($ a) xs`？好吧，`[f a | f <- xs]`因为我对 的所有元素都做同样的事情`f`，`xs`所以我立即想到用`map`.

先想想

```
 map (+ 4) [1,2,3,4]
= [(+4) 1,  (+4) 2,  (+4) 3, (+4) 4]
= [1+4, 2+4, 3+4, 4+4]
= [5,6,7,8] 
```

看看我们如何使用（低优先级）函数应用运算符`$`

```
 map ($ a) [(>4), (==7), (<10)]
= [($ a) (>4),  ($ a) (==7),  ($ a) (<10)]
= [(>4) $ a,  (==7) $ a,  (<10) $ a]
= [(>4) a,  (==7) a,  (<10) a]
= [a > 4 , a==7, a < 10] 
```

这给你的结果与`[f a| a <- [(>4), (==7), (<10)]]`.

# javascript - 如何使用 javascript 在 POST 方法中发送数据

> ID：13678358
> 
> 赞同：1
> 
> 时间：2012-12-03T06:41:27.483
> 
> 标签：javascript

在 javascript 中，页面重定向可以通过以下参数完成。

```
window.location = "add-new-cos.jsp?id="+id; 
```

但是这个 id 值是用 GET 方法发送到下一页的。但我想用 POST 方法发送它。有没有办法用javascript来做到这一点......？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T06:49:43.060

不像`window.location`重定向那么容易，但很容易:)

```
var form = document.createElement("form");
    input = document.createElement("input");

form.action = "add-new-cos.jsp";
form.method = "post"

input.type = "hidden";
input.name = "id";
input.value = id;
form.appendChild(input);

document.body.appendChild(form);
form.submit(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T06:47:02.643

发送 POST 数据可在提交表单或通过 ajax 请求时使用。您可以尝试使用具有正确名称和值的隐藏字段创建一个不可见的表单，并在需要时通过 javascript 提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:47:30.223

您可以将 id 放入表单中，`document.forms["myform"].submit();`在服务器上的请求处理程序中使用并返回重定向操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:47:42.647

使用 window.location.href 无法发送 POST 请求。

你要做的就是设置一个带有数据字段的表单标签，将表单的action属性设置为URL，将方法属性设置为POST，然后在表单标签上调用提交方法。

# vba - Excel 工作表 - 如果列包含 X，则将 A 列中具有相同单词的行和所有行复制到工作表 2

> ID：13678359
> 
> 赞同：1
> 
> 时间：2012-12-03T06:41:29.500
> 
> 标签：vba, excel

当前代码将内容从工作表 1 复制到工作表 2，如果 X，从工作表 1 复制到工作表 3，如果 Y。我需要更改它，以便如果 B 列中的一行 = X，它会复制 A 列中具有相同单词的每一行。

```
Private Sub Worksheet_Activate()

End Sub

Private Sub Worksheet_Change(ByVal Target As Range)

Dim sh1 As Worksheet, sh2 As Worksheet
Dim r1 As Range, r2 As Range, r3 As Range, cell As Range
Dim r(1 To 2) As Range
Dim v(1 To 2) As String
Dim shName(1 To 2) As String
Dim i As Long

' see below - current code copies Y rows to sheet 3
v(1) = "X"
v(2) = "Y"
shName(1) = "Sheet2"
shName(2) = "Sheet3"

'If Target.Column = 2 Then

Set sh1 = Worksheets("Sheet1")

For i = LBound(v) To UBound(v)
Set sh2 = Worksheets(shName(i))
Set r3 = sh2.UsedRange.Offset(1, 0)
r3.EntireRow.Delete
Next

Set r1 = sh1.Range("B2", sh1.Cells(sh1.Rows.Count, "B").End(xlUp))
For Each cell In r1
For i = LBound(v) To UBound(v)
  If UCase(cell) = UCase(v(i)) Then
     If r(i) Is Nothing Then
        Set r(i) = cell
     Else
        Set r(i) = Union(r(i), cell)
     End If
     Exit For
  End If
Next
Next

For i = LBound(v) To UBound(v)
 Set sh2 = Worksheets(shName(i))
 If Not r(i) Is Nothing Then
    r(i).EntireRow.Copy sh2.Rows(2)
 End If
Next

'End If

End Sub 
```

# javascript - jquery搜索下一个div

> ID：13678361
> 
> 赞同：0
> 
> 时间：2012-12-03T06:41:37.860
> 
> 标签：javascript, jquery

我已经写了这段代码。它不起作用，但有了这个你应该知道我想要实现的目标

```
 $('.jfmfs-alpha-separator').filter(function() {
     return ($(this).next().not(".hide-filtered").hasClass("jfmfs-alpha-separator"));
  }).addClass('hide-filtered'); 
```

我有相同级别的 div 数量。在具有 jfmfs-alpha-separator 类的 div 下面我有 div 的数量，然后是 div jfmfs-alpha-separator 和 div 的数量（注意下面我的意思是在同一级别而不是子级）。现在，当 jfmfs-alpha-separator 之后的所有 div 都获得类 .hide-filtered 时，我也想隐藏那个 jfmfs-alpha-separator div。

在我的代码中，我试图在具有 jfmfs-alpha-separator 类的 div 之后找到下一个 div，该类没有“隐藏过滤”类并且具有 jfmfs-alpha-separator 类。如果此检查返回 true，我将隐藏该 div。

例子：

```
<div class ="jfmfs-alpha-separator">Letter A</div>
<div class ="friend hide-filtered">Aaron</div>
<div class ="friend hide-filtered">Aaron</div>
<div class ="friend hide-filtered">Ashutosh</div>
<div class ="jfmfs-alpha-separator">Letter B</div>
<div class ="friend hide-filtered">Bob</div>
<div class ="friend">Baron</div>
<div class ="friend hide-filtered">Batista</div>
<div class ="jfmfs-alpha-separator">Letter C</div> 
<div class ="friend hide-filtered">Carl</div>
<div class ="friend hide-filtered">Chris</div>
<div class ="friend hide-filtered">Charlie</div>
<div class ="jfmfs-alpha-separator">Letter D</div>
... 
```

在上面的示例中，字母 A 和 C 应该被隐藏，因为它下面的所有名称都有隐藏过滤类，字母 B 应该保持原样。

我如何实现这一目标？

最终解决方案使用 Salmans 答案：

```
 $(".jfmfs-alpha-separator").each(function () {
                        if ($(this).nextUntil(".jfmfs-alpha-separator").not('.hide-filtered').length == 0) {
                            $(this).addClass('hide-filtered');
                        }else{
                            $(this).removeClass('hide-filtered');
                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:50:24.583

这是编写代码的一种方法：

```
$(".jfmfs-alpha-separator").each(function () {
    // Assume that all elements after a .jfmfs-alpha-separator but
    // before the next .jfmfs-alpha-separator belong to same group
    var siblings = $(this).nextUntil(".jfmfs-alpha-separator");
    // Now that we have all elements that belong to the group
    // use .filter to see if all elements have .hide-filtered class
    if (siblings.filter(":not(.hide-filtered)").length == 0) {
        console.log("should hide -> ", this);
    }
}); 
```

很容易将此逻辑转换为`.filter(function() {})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:44:35.543

尽管 Salman A 已经为您提供了一个可行的解决方案，但如果可能，您可能需要考虑一些替代方案。

一种只有细微差别的替代方法是将每个字母的 div 分组，如下所示：

```
<div class="group">
  <div class="jfmfs-alpha-separator">Letter A</div>
  <div class="friend hide-filtered">Aaron</div>
  <div class="friend hide-filtered">Aaron</div>
  <div class="friend hide-filtered">Ashutosh</div>
</div>
<div class="group">
  <div class="jfmfs-alpha-separator">Letter B</div>
  <div class="friend hide-filtered">Bob</div>
  <div class="friend">Baron</div>
  <div class="friend hide-filtered">Batista</div>
</div>
<div class="group">
  <div class="jfmfs-alpha-separator">Letter C</div> 
  <div class="friend hide-filtered">Carl</div>
  <div class="friend hide-filtered">Chris</div>
  <div class="friend hide-filtered">Charlie</div>
</div>
<div class="group">
  <div class="jfmfs-alpha-separator">Letter D</div>
</div> 
```

然后，您可以根据 Salman 对此的回答更新您的解决方案：

```
$(".group").each(function () {
  if ($(this).children(".friend").not(".hide-filtered").length == 0) {
    $(this).addClass('hide-filtered');
  } else {
    $(this).removeClass('hide-filtered');
  }
}); 
```

它并没有太大的区别，但我相信它使 HTML 和 javascript 都更容易阅读。

就个人而言，我也更喜欢用其他元素替换一些 div，如下所示：

```
<div class="group">
  <h1 class="jfmfs-alpha-separator">Letter A</h1>
  <p class="friend hide-filtered">Aaron</p>
  <p class="friend hide-filtered">Aaron</p>
  <p class="friend hide-filtered">Ashutosh</p>
</div>
<div class="group">
  <h1 class="jfmfs-alpha-separator">Letter B</h1>
  <p class="friend hide-filtered">Bob</p>
  <p class="friend">Baron</p>
  <p class="friend hide-filtered">Batista</p>
</div>
<div class="group">
  <h1 class="jfmfs-alpha-separator">Letter C</h1> 
  <p class="friend hide-filtered">Carl</p>
  <p class="friend hide-filtered">Chris</p>
  <p class="friend hide-filtered">Charlie</p>
</div>
<div class="group">
  <h1 class="jfmfs-alpha-separator">Letter D</h1>
</div> 
```

另一种需要进行更大更改的替代方法是实现某种数据模型。如果上面的例子是你网站上唯一一个你这样做的地方，那可能不值得，但如果你到处做这样的事情，这将是一个巨大的节省时间。

基本思想是，您将这个朋友列表的数据存储在类似数组或嵌套数组（您可能已经在服务器端或客户端）中。然后，您将通过计算数组中的项目来应用显示和隐藏元素的逻辑，而不是计算 DOM 节点。

KnockoutJS 是一个很棒的框架来做这样的事情。我目前在大型网络应用程序上使用它。但是请注意，它非常令人讨厌，我可能不会在需要在没有 javascript 的情况下工作的网站上使用它。

我确信还有其他更小更简单的 js 库也可以提供帮助。

# javascript - 打印数组单元比执行 for 循环更快的方法

> ID：13678362
> 
> 赞同：0
> 
> 时间：2012-12-03T06:41:41.757
> 
> 标签：javascript, arrays, loops, for-loop, iteration

所以我有一个像这样的数组：

```
var arra= new String [50,50];
// I add in arrays and for every added row, update count by 1\. The columns are till incount which is less than 50.

for(i=0;i<=count;i++)
{
  for(j=0;j<incount;j++)
  {
    print (bigsub[i,j]);
  }
} 
```

有没有更快的方法可以做到这一点？我也可以对内部数组执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:50:41.013

你可以使用`JSON.stringify(array)`，我认为它会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:51:08.127

如果您需要做的就是打印它（出于调试目的），您可以在上面的问题评论中使用@vimalnath 的建议。但是，如果您想为一些繁重的操作执行此操作并且您愿意使用 HTML 5，那么您可以雇用多个 Web Worker 为您异步完成此工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:40:18.927

要在 javascript 中打印数组，您可以使用它

```
alert(arrayObj.join('\n')); 
```

# php - Ubuntu中这些参数的等价物是什么？

> ID：13678363
> 
> 赞同：0
> 
> 时间：2012-12-03T06:41:43.223
> 
> 标签：php, linux, ubuntu

在 Windows 中有这些 php.ini 参数值：

```
extension=php_pdo.dll
extension=php_pdo_mysql.dll 
```

Ubuntu 中没有 dll，那么 ubuntu 中这些参数的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:42:33.660

在 Linux 服务器上，您可以使用以下选项编译 php 在您的 php.ini 中，添加以下行

```
extension=pdo.so
extension=pdo_mysql.so 
```

# ios - 在 UITableview 中创建 2 列

> ID：13678364
> 
> 赞同：1
> 
> 时间：2012-12-03T06:41:48.527
> 
> 标签：ios, objective-c, uitableview

> **可能重复：**
> [UITableView 中的 iPhone 多列](https://stackoverflow.com/questions/506601/iphone-multiple-columns-in-uitableview)

任何人帮助如何在 ios 中创建 2 列 tableview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:48:39.250

您必须为此任务创建自定义单元格视图。并在您的表格视图中添加此自定义单元格。

检查此链接以获取更多信息[链接](http://usxue.is-programmer.com/posts/14176.html) [链接2](http://howtomakeiphoneapps.com/how-to-design-a-custom-uitableviewcell-from-scratch/1292/)

根据您的查询，您只需制作 customButton 而不是图像，然后将图像设置`tagValue`为该按钮，因此无论何时按下按钮，您都可以使用`tagValue`.

对于您的表格行

```
bt1.tag = [NSString stringWithFormat:@"%d0",indexPath.row];
bt2.tag = [NSString stringWithFormat:@"%d1",indexPath.row]; 
```

然后操纵这个.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:24:06.230

最简单的方法是创建两个表视图并将它们并排放置。让自己成为两者的代表和数据源，当一个滚动时滚动另一个以务实地匹配。这会给用户一种表格视图有两列的印象。然后，在确定将哪些单元格提供给表格时，您只需要检查`tableView`参数以确定什么是什么。

# android - 此代码非常适合 GPS，但我想使用 Wifi。如何做到这一点？

> ID：13678367
> 
> 赞同：1
> 
> 时间：2012-12-03T06:42:02.100
> 
> 标签：android, gps

此代码与网络完美配合，但我需要使用 WiFi 测试 GPSwifi。所以我想同时检查 GPS wifi 和网络。任何人都不能帮助如何在 android 应用程序中完成这项工作。

```
 public class Map extends MapActivity {
        double longitude;
        double latitude;
        MapView mapView;
        private LocationManager mlocManager;
        private LocationListener mlocListener;
        private boolean gp;
        Geocoder gd;
        GeoPoint point;
        List<Overlay> mapOverlays;
        CustomItemizedOverlay itemizedOverlay;
        MapController mapController;
        private SportingSoccerApplication soccerApplication;
        OverlayItem overlayitem;
        SportingSoccerApplication soccerApplication2;
        Drawable drawable;
        RelativeLayout rv;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);

            setContentView(R.layout.map);

            rv = (RelativeLayout) findViewById(R.id.relativeLayout1);
            mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            mlocListener = new MyLocationListener();
            gp = mlocManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
            //Log.v("log_tag", gp + "");
            //if (!gp == true) {
            //  turnGPSOn();
            //}

            mapView = (MapView) findViewById(R.id.mapview);
            mapView.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    mapView.setBuiltInZoomControls(true);

                }
            });

            mapView.setBuiltInZoomControls(true);

            mapOverlays = mapView.getOverlays();
            drawable = this.getResources().getDrawable(R.drawable.markerdark);
            itemizedOverlay = new CustomItemizedOverlay(drawable, this);

                point = new GeoPoint((int) (latitude * 1E6), (int) (longitude * 1E6));
                overlayitem = new OverlayItem(point, "", toString());
                itemizedOverlay.addOverlay(overlayitem);
                mapOverlays.add(itemizedOverlay);
                mapController = mapView.getController();
                mapController.animateTo(point);

                mapController.setZoom(14);

                soccerApplication = (SportingSoccerApplication) getApplication();
        }

        @Override
        protected void onResume() {
            super.onResume();
            mlocManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
                    mlocListener);

        }

        public class MyLocationListener implements LocationListener {

            public void onLocationChanged(Location loc) {

                mapView.getOverlays().clear();
                mapView.postInvalidate();
                mapOverlays.clear();
                gd = new Geocoder(getApplicationContext(), Locale.getDefault());
                longitude = loc.getLongitude();
                latitude = loc.getLatitude();
                Log.i("log_tag",longitude+"*******"+latitude);

                /*try {
                    List<Address> place = gd
                            .getFromLocation(latitude, longitude, 1);
                    if(place.size() > 0) {
                     place.get(0).getLocality();
                    }
                    // Toast.makeText(getApplicationContext(), bus_no, 2).show();
                } catch (IOException e) {
                    e.printStackTrace();
                }*/
                point = new GeoPoint((int) (latitude * 1E6),
                        (int) (longitude * 1E6));

                Log.i("log_tag",latitude+"----"+longitude);
                overlayitem = new OverlayItem(point, "", toString());
                itemizedOverlay.addOverlay(overlayitem);
                mapOverlays.add(itemizedOverlay);
                mapController.animateTo(point);
                Log.v("log_tag", "u" + latitude + longitude + "");
                soccerApplication.setLatitude(latitude);
                soccerApplication.setLongitude(longitude);

            }

            public void onProviderDisabled(String provider) {

            }

            public void onProviderEnabled(String provider) {

            }

            public void onStatusChanged(String provider, int status, Bundle extras) {

            }
        }

        protected boolean isRouteDisplayed() {
            return false;
        }

    } 
```

此代码适用于 android Network base，但我需要使用 GPS wifi ..

```
 <?xml version="1.0" encoding="utf-8"?>
                <com.google.android.maps.MapView
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:id="@+id/mapview"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:clickable="true"
                        android:apiKey="0bP2YJLhub2rGpXpOtkWFqcV3Qm5SS11Bl-cFyQ"
                />

            package com.example.gpstest;

    import java.util.ArrayList;

    import android.app.AlertDialog;
    import android.content.Context;
    import android.graphics.drawable.Drawable;

    import com.google.android.maps.ItemizedOverlay;
    import com.google.android.maps.OverlayItem;

    public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {
        private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();
        private Context mcontext;

        public CustomItemizedOverlay(Drawable defaultMarker) {

            super(boundCenterBottom(defaultMarker));

            // TODO Auto-generated constructor stub
        }

        public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
            super(boundCenterBottom(defaultMarker));
            mcontext = context;
        }

        @Override
        protected OverlayItem createItem(int i) {
            // TODO Auto-generated method stub
            return mapOverlays.get(i);
        }

        @Override
        public int size() {
            // TODO Auto-generated method stub
            return mapOverlays.size();
        }

        @Override
        protected boolean onTap(int index) {
            OverlayItem item = mapOverlays.get(index);
            AlertDialog.Builder dialog = new AlertDialog.Builder(mcontext);
            dialog.setTitle(item.getTitle());
            dialog.setMessage(item.getSnippet());
            dialog.show();
            return true;
        }

        public void addOverlay(OverlayItem overlay) {
            mapOverlays.add(overlay);
            populate();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:17:39.270

你可以做一件事..just start your WiFi On Activity start

```
 protected void onStart() {
         // TODO Auto-generated method stub
         super.onStart();

           WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
             if (wifiManager != null) {

             wifiManager.setWifiEnabled(true);
             }
        } 
```

也将权限放入清单文件中：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"  />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />

    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:15:09.227

如果您想以先到先的方式同时使用两者，那么您可以为 wifi 和网络创建两个单独的位置侦听器。就像下面一样。

```
try
        {
            gps_enabled = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
            network_enabled = lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        }catch(Exception ex){
            ex.printStackTrace();
        }

    //don't start listeners if no provider is enabled
    if(!gps_enabled && !network_enabled)
        return false;

    if(gps_enabled)
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
    if(network_enabled)
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork); 
```

然后你可以听两个听众

```
LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            //          timer1.cancel();
            Log.d("from", "GPS");
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

LocationListener locationListenerNetwork = new LocationListener() {
    public void onLocationChanged(Location location) {
        //          timer1.cancel();
        Log.d("from", "NETWORK");
        locationResult.gotLocation(location);
        lm.removeUpdates(this);
        lm.removeUpdates(locationListenerGps);
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
}; 
```

这就是您如何使先到先的位置侦听器。希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:48:53.690

试试这个代码..它将与**Network_Provider一起使用**

protected void onCreate(Bundle savedInstanceState) {

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    boolean answer;
    answer=isOnline();
    System.out.println(answer);

    if(answer){
    LocationManager L = (LocationManager) getSystemService(LOCATION_SERVICE); 
    if (L.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
    gps_loc();
    } else
    {       
    showSettingsAlert();        
    }
}

else
{
    Toast.makeText(getApplicationContext(), "Check your Internet Connection",Toast.LENGTH_SHORT).show();    
}

} 
```

公共布尔 isOnline() {

```
ConnectivityManager cm =
    (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

NetworkInfo netInfo = cm.getActiveNetworkInfo();

if (netInfo != null && netInfo.isConnectedOrConnecting()) {
    return true;

}
return false; 
```

}

```
public void showSettingsAlert(){
    new AlertDialog.Builder(this)
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setTitle("GPS")
    .setMessage("GPS is not enabled. Do you want to go to settings menu?")
    .setPositiveButton("Yes", new DialogInterface.OnClickListener()
{
    public void onClick(DialogInterface dialog, int which) {
        Intent I = new Intent( 
                    android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);  
            startActivity(I); 
            Toast.makeText(getApplicationContext(),"Tick Use_wifi settings and click back button", Toast.LENGTH_LONG).show();

    }

})
.setNegativeButton("No", null)
.show();
}
void gps_loc()
{
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
//  LocationListener ll = new mylocationlistener();
    Location location=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
     if (location != null) {
            Log.d("LOCATION CHANGED", location.getLatitude() + "");
            Log.d("LOCATION CHANGED", location.getLongitude() + "");
            Toast.makeText(getApplicationContext(),"", Toast.LENGTH_SHORT).show();
              double lat=location.getLatitude();
              double lng=location.getLongitude();
              List<Address> addresses = null;
                try {
                    addresses = new Geocoder(getApplicationContext(),Locale.getDefault()).getFromLocation(lat,lng, 1);
                } catch (IOException e) {
                    e.printStackTrace();
                }

                Address addr= addresses.get(0);

              Country=addr.getCountryName();
               City=addr.getLocality();
               area=addr.getFeatureName();
               pincode=addr.getPostalCode();
                currentloc=area+" ,"+City+" ,"+Country;

                Toast.makeText(getApplicationContext(),currentloc, Toast.LENGTH_SHORT).show();

            }  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T07:03:28.040

这个怎么样：http: [//sourceforge.net/projects/libwlocate/](http://sourceforge.net/projects/libwlocate/)

该库通过一个单一界面执行 GPS 和 WLAN 定位，并且易于使用。当然可以使用 Android 源和端口。

# hibernate - Hibernate Cache和autocommit解释

> ID：13678368
> 
> 赞同：0
> 
> 时间：2012-12-03T06:42:06.143
> 
> 标签：hibernate

我很难弄清楚为什么我的应用程序会发生某些事情。使用 spring 和 Hibernate 和 struts2，我在调试过程中注意到了一些非常奇怪的东西。

我有一个用户表单，用户可以在其中编辑他的信息。当这个表单被提交时，控制器的`save()`方法应该做一些事情并保存用户。

奇怪的是，在我在控制器中做任何事情之前，我想找到关于谁在做这个改变的信息。因此，我根据提交表单的人的 ID 从数据库中获取用户对象。但是当这个用户对象被获取时。然后自动提交表单中的用户......我像这样获取用户：

```
User createdByUser = (User) getHibernateTemplate().find("from User u where u.username=?", username).get(0); 
```

因此，显然某些机制正在自动提交我的用户。大多数时候，我的 createdByUser 与提交的用户是同一个用户。有没有可能是休眠检测到这一点并以某种方式尝试同步数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:11:19.607

可能是因为您正在对托管实体进行更改。因此，更改与数据库同步，下次您获取该实体时，您将隐式地获取反映更改的实体。

执行搜索后，您可以清除持久性上下文以分离所有底层实体，也可以从会话中显式分离单个实体。

从文档：

> **clear() ：**完全清除会话。驱逐所有加载的实例并取消所有挂起的保存、更新和删除。不要关闭打开的迭代器或 ScrollableResults 的实例。
> 
> **evict(object) ：**从会话缓存中删除此实例。对实例的更改不会与数据库同步。如果关联映射为 cascade="evict"，则此操作级联到关联实例。

# algorithm - 画一个颜色选择器，比如 Fresh Paint

> ID：13678373
> 
> 赞同：0
> 
> 时间：2012-12-03T06:42:28.673
> 
> 标签：algorithm, graphics, colors, android-canvas

我喜欢 Fresh Paint 色环的外观，并想在我即将到来的项目中克隆它。但是，我找不到圆圈的 HSV 或 RGB 分布模式。这是一个例子：

![在此处输入图像描述](../Images/adb13a89705647e379a5382992b5858e.png)

我猜右边的滑块是用于从 0 到 360 的 H 值。但我不知道如何用该 H 值制作圆圈。请给我它的公式/模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:11:34.203

我还没有看到这一点，但看起来他们使用的是色度而不是饱和度，并且已经将亮度和色度映射到（某种）极坐标。因此色度随与中心的距离而变化，而值/亮度随 y 坐标而变化。

本质上，结果是圆的中间是明亮的、完全饱和的颜色，而边缘是灰度的。颜色从中心到边缘线性插值。

我最初认为这可能是直极坐标，但我怀疑它已被简化为仅使用 y 而不是角度。

本质上，边缘的去饱和灰度是从上到下的线性白到黑渐变（不会像极坐标那样随角度变化）。中心的颜色是用侧面的色调选择器选择的饱和颜色，然后中间的所有颜色都被线性插值。

所以在伪代码中：

```
let x, y be points in the circle, range -1 to 1.
let red, grn, blu be the center colour value.
let lerp(a, b, t) = (a * (1 - t) + b * t)

r = sqrt(x * x + y *y)               // calculate radial co-ordinate
                                     // reject points r > 1 (outside circle)
grey_value = (y + 1) / 2             // calculate de-saturated value, 0 to 1.
final_red = lerp(red, grey_value, r) // lerp the RGB from the center to the edge.
final_grn = lerp(grn, grey_value, r)
final_blu = lerp(blu, grey_value, r) 
```

显然那不是特别理想，也不会画出漂亮的抗锯齿边缘。预先计算具有灰度渐变的纹理和基于 'r' 的 alpha 蒙版可能会快得多，它可以在纯色圆圈的顶部进行 alpha 混合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:37:43.827

在我看来，Y 轴是亮度，底部是黑色，顶部是白色，X 轴是饱和度，中心完全饱和，每个边缘完全去饱和。当然这给了你一个正方形，所以你需要把它映射到一个圆圈。输入数学方面的优秀人员：[https ://math.stackexchange.com/questions/103660/homeomorphism-from-square-to-unit-circle](https://math.stackexchange.com/questions/103660/homeomorphism-from-square-to-unit-circle)

# php - 可以放 $db = JFactory::getDBO(); 在 Joomla 模板本身？

> ID：13678376
> 
> 赞同：2
> 
> 时间：2012-12-03T06:42:45.100
> 
> 标签：php, joomla

我是 Joomla 的新手，我正在研究 EasyBlog 组件，我想创建一个类别列表作为菜单并将一个类添加到当前活动的菜单项。为此，我必须连接到数据库并使用获取类别 ID`$db = JFactory::getDBO();`

我的问题是，可以`$db = JFactory::getDBO();`在我网站的 index.php 模板上使用来获取 ID 吗？

这是我当前的脚本。

```
$view   = JRequest::getCmd('view');
$temp   = JRequest::getString('id');

if ($view == 'entry' or $view == 'tags' or $view == 'archive' or $view == 'blogger' or $view == 'teamblog') {

    $db = JFactory::getDBO();
    $option   = JRequest::getCmd('option');
    $temp   = explode(':', $temp);
    $id   = $temp[0];
        if ($option == 'com_easyblog' && $view == 'entry' && $id)
        { $db->setQuery('SELECT category_id FROM #__easyblog_post WHERE id='.$id);
        $category_id = $db->loadResult(); //this is current article’s category ID
        }
    //echo $category_id; //show it
     $cat_id = $category_id;

    }
    else{
     $cat_id = $temp;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:10:30.333

真的不好看。但如果您使用页面级缓存，它应该可以工作：

确保缓存插件已启用，然后切换到调试模式，并点击页面两次。

在第二次加载时，您不应看到列出的查询。

如果是这种情况，您可以保留它。

如果查询仍然存在，则意味着它没有被缓存并且您正在减慢您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T15:36:37.163

这不是正确的解决方案，但它实际上解决了问题。

但是，您还有其他更好的解决方案（在我看来）：

1：使用插件：如果您需要在每个页面上使用此菜单并希望在模板中轻松显示，建议使用它。有关插件触发，请参阅[http://docs.joomla.org/Triggering_content_plugins_in_your_extension](http://docs.joomla.org/Triggering_content_plugins_in_your_extension)。检查任何简单插件的代码，看看如何编写这个。插件基本上是可以在任何地方使用的功能。您可以在插件和缓存 cat_id 中添加静态变量，然后您将能够从站点的每个位置使用它，并且代码永远不会执行两次。它将从模板中删除所有“控制器和模块”逻辑。您甚至不需要使用普通触发器，您只需执行静态函数，因为类将在程序启动时定义。

2：建议使用此解决方案。创建模块。在这种情况下，您可以轻松缓存所有资源，并且不需要创建将其分配给选项的逻辑（当然，如果您可以使用 itemid 来实现）。当然，在这种情况下，您还需要添加整个代码来创建菜单项，否则您必须将其推送到全局范围，这也不是很好的解决方案。

3：模板覆盖。我不确定它是否适合这种情况，但您始终可以使用模板覆盖[http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)。在这种情况下，您可以摆脱主模板中的整个代码，并将其留在组件模板中。

# solr - 我可以在 Solr 中替换新字段的数据吗？

> ID：13678379
> 
> 赞同：1
> 
> 时间：2012-12-03T06:42:53.207
> 
> 标签：solr, indexing

我可以使用过滤器替换字段中的数据吗？

假设数据。

```
<doc>
  <field name=id>1</field >
  <field name=contents>a article about specific subject</field>
</doc> 
```

我将内容字段复制到类别字段

```
<copyField source="contents" dest="category"/> 
```

类别字段有一个过滤器。

```
<field name="category" type="myType" stored="true" />

<fieldType name="myType" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="myTokenizer"/> 
    <filter class="myFilter"/> 
  </analyzer>
</fieldType> 
```

我想将此文档分类为哪个类别，并使用过滤器将结果如“正面”、“负面”放在类别字段中。我已经实现了一个 object-myFilter-to 使用 LDA 进行分类，并且这个对象使用了已经定义的主题模型。
如何将原始数据替换为类别字段中的结果？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:39:44.127

这应该是可能的，因为 Tokenizers 会接收一个 Reader 并对其进行标记和过滤。
在您的情况下，您可以使用 KeywordTokenizer 以便输入不被标记，并且您可以设计一个过滤器来检查内容的语言以填充类别字段。

例如[开发你自己的 solr 过滤器](http://solr.pl/en/2012/05/14/developing-your-own-solr-filter/)

您只需将当前内容替换为 LDA 结果。

# python-3.x - 如何调用另一个函数

> ID：13678380
> 
> 赞同：-1
> 
> 时间：2012-12-03T06:42:54.363
> 
> 标签：python-3.x

我想创建一个新功能

```
def new_func(abc):
with open(APPROVAL_BALLOT_FILENAME) as f:
        while True:
            line = f.readline()
            if line:
                lines.append(line)
            else:
                break 
```

并做 new_func(feklfe)

我该怎么做？当我这样做时，由于某种原因没有定义线条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:48:24.677

您必须`lines`在函数内部正确定义：

```
def new_func(abc):
    lines = []
    with open(APPROVAL_BALLOT_FILENAME) as f:
    while True:
        line = f.readline()
        if line:
            lines.append(line)
        else:
            break
    return lines 
```

您可能还想要的是使用文件名作为函数的参数。像这样：

```
def new_func(filename):
    lines = []
    with open(filename) as f:
    while True:
        line = f.readline()
        if line:
            lines.append(line)
        else:
            break
    return lines 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:59:01.317

您的函数失败，因为您没有`lines`在其中定义任何地方。但是您的代码的主要问题是您尝试使用while循环读取文件，这是在python中读取文件的最糟糕的方式，至少如果您对这些行所做的只是将它们存储在一个列表中。

文件对象已经有一个函数返回它的行列表，适当地命名为`readlines`. 更好的是，文件对象是其所有行的迭代器；这意味着要获得删除换行符的行列表，您所要做的就是这个简单的表达式：

```
with open(filename) as f:
    lines = [line.rstrip("\n") for line in f] 
```

# objective-c - 当我更改 UITabBar 的颜色时，它只显示为灰色

> ID：13678381
> 
> 赞同：1
> 
> 时间：2012-12-03T06:42:59.217
> 
> 标签：objective-c, ios, uitabbar

我在选项卡式应用程序的各种视图控制器的“viewDidLoad”中使用以下代码。

```
 UIColor *tabBarColor = [UIColor colorWithRed:85.1 green:57.6 blue:71.4 alpha:.5];
    [[UITabBar appearance] setTintColor:tabBarColor]; 
```

但是我得到的应该是粉红色的图像是这样的：

![在此处输入图像描述](../Images/f5982861fccabb98fd364709eb1c6fe3.png)

我可以通过更改 alpha 使其更亮或更暗，但从不着色——只有黑色/白色/灰色。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T06:55:24.377

在 .m 的头文件下，`#define RGB(r, g, b) [UIColor colorWithRed:r/255.0 green:g/255.0 blue:b/255.0 alpha:1]`现在在您设置颜色的地方写下这一行，将这段代码设置为粉红色`[[UITabBar appearance] setTintColor:RGB(255, 192, 203)];`，仅此而已

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:48:47.587

试试这个：

```
 if ([tabBarController.tabBar respondsToSelector:@selector(setTintColor:)]) 
    {
        [tabBarController.tabBar setTintColor: tabBarColor];
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:59:49.627

颜色必须在数字后带有小数点：`215.0/255`。因为它是浮动的。
如果您想在 32 位和 64 位系统上精确地使用浮点数和双精度数，您还应该在数字后添加**f** : `215.0f/255`。编译器会知道它是 32 位的。现在你的问题是你没有写分界线：**N_OF_COLORS / TOTAL_COLORS**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:57:26.660

UIColor *tabBarColor = [UIColor colorWithRed:85.1 green:57.6 blue:71.4 alpha:.5]

颜色必须在数字后带有小数点：215.0/255。因为它是浮动的。

试试这个：

```
UIColor *tabBarColor = [UIColor colorWithRed:(87/255.0) green:(153/255.0) blue:(165/255.0) alpha:1];

[[UITabBar appearance] setTintColor:tabBarColor]; 
```

# java - How to split array list into equal parts?

> ID：13678387
> 
> 赞同：32
> 
> 时间：2012-12-03T06:43:28.677
> 
> 标签：java, plsql, oracle10g

Is there anyway to split ArrayList into different parts without knowing size of it until runtime? I know there is a method called:

```
list.subList(a,b); 
```

but we need to explicitly mention staring and ending range of list. My problem is, we get a arraylist containing account numbers which is having data like 2000,4000 account numbers (there numbers will not be known during coding time), and I need to pass this acc nos into IN query of PL/SQL, as IN doesn't support more than 1000 values in it, I am trying to split into multiple chunks and sending it to query

Note: I cannot use any external libraries like Guava etc.. :( Any guide in this regard is appreciated.

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-03T06:59:34.680

This should give you all your parts :

```
int partitionSize = 1000;
List<List<Integer>> partitions = new LinkedList<List<Integer>>();
for (int i = 0; i < originalList.size(); i += partitionSize) {
    partitions.add(originalList.subList(i,
            Math.min(i + partitionSize, originalList.size())));
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-20T12:09:09.020

generic function :

```
public static <T> ArrayList<T[]> chunks(ArrayList<T> bigList,int n){
    ArrayList<T[]> chunks = new ArrayList<T[]>();

    for (int i = 0; i < bigList.size(); i += n) {
        T[] chunk = (T[])bigList.subList(i, Math.min(bigList.size(), i + n)).toArray();         
        chunks.add(chunk);
    }

    return chunks;
} 
```

enjoy it~ :)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-30T07:08:03.653

Java 8 (not that it has advantages):

```
List<String> list = new ArrayList<>();
Collections.addAll(list,  "a","b","c","b","c","a","c","a","b"); 
```

Grouping size:

```
final int G = 3;
final int NG = (list.size() + G - 1) / G; 
```

In old style:

```
List<List<String>> result = new ArrayList(NG);
IntStream.range(0, list.size())
    .forEach(i -> {
        if (i % G == 0) {
            result.add(i/G, new ArrayList<>());
        }
        result.get(i/G).add(list.get(i));
    }); 
```

In new style:

```
List<List<String>> result = IntStream.range(0, NG)
    .mapToObj(i -> list.subList(G * i, Math.min(G * i + G, list.size())))
    .collect(Collectors.toList()); 
```

Thanks to @StuartMarks for the forgotten toList.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-03T06:46:39.757

If you're constrained by PL/SQL `in` limits then you want to know how to split a list into chunks of size *<=n*, where *n* is the limit. This is a much simpler problem as it *does not* require knowing the size of the list in advance.

Pseudocode:

```
for (int n=0; n<list.size(); n+=limit)
{
    chunkSize = min(list.size,n+limit);
    chunk     = list.sublist(n,chunkSize);
    // do something with chunk
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-23T17:05:29.920

If you already have or don't mind adding the Guava library, you don't need to reinvent the wheel.

Simply do: `final List<List<String>> splittedList = Lists.partition(bigList, 10);`

where `bigList` implements the `List` interface and `10` is the desired size of each sublist (the last may be smaller)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T07:05:57.590

```
listSize = oldlist.size();
chunksize =1000;
chunks = list.size()/chunksize;
ArrayList subLists;
ArrayList finalList;
int count = -1;
for(int i=0;i<chunks;i++){
     subLists = new ArrayList();
     int j=0;
     while(j<chunksize && count<listSize){
        subList.add(oldList.get(++count))
        j++;
     }
     finalList.add(subLists)
} 
```

You can use this finalList as it contains the list of chuncks of the oldList.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-04T13:12:05.023

I am also doing key:value mapping for values with index.

```
 public static void partitionOfList(List<Object> l1, List<Object> l2, int partitionSize){
            Map<String, List<Object>> mapListData = new LinkedHashMap<String, List<Object>>();
            List<Object> partitions = new LinkedList<Object>();
            for (int i = 0; i < l1.size(); i += partitionSize) {
                partitions.add(l1.subList(i,Math.min(i + partitionSize, l1.size())));
                l2=new ArrayList(partitions);
            }
            int l2size = l2.size();
            System.out.println("Partitioned List: "+l2);
            int j=1;
            for(int k=0;k<l2size;k++){
                 l2=(List<Object>) partitions.get(k);
                // System.out.println(l2.size());
                 if(l2.size()>=partitionSize && l2.size()!=1){
                mapListData.put("val"+j+"-val"+(j+partitionSize-1), l2);
                j=j+partitionSize;
                 }
                 else if(l2.size()<=partitionSize && l2.size()!=1){
                    // System.out.println("::::@@::"+ l2.size());
                     int s = l2.size();
                     mapListData.put("val"+j+"-val"+(j+s-1), l2);
                        //k++;
                        j=j+partitionSize;
                 }
                 else if(l2.size()==1){
                    // System.out.println("::::::"+ l2.size());
                     //int s = l2.size();
                     mapListData.put("val"+j, l2);
                        //k++;
                        j=j+partitionSize;
                 }
            }
            System.out.println("Map: " +mapListData);
        }

    public static void main(String[] args) {
            List l1 = new LinkedList();
            l1.add(1);
            l1.add(2);
            l1.add(7);
            l1.add(4);
            l1.add(0);
            l1.add(77);
            l1.add(34);

    partitionOfList(l1,l2,2);
    } 
```

Output:

> Partitioned List: [[1, 2], [7, 4], [0, 77], [34]]
> 
> Map: {val1-val2=[1, 2], val3-val4=[7, 4], val5-val6=[0, 77], val7=[34]}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-21T07:59:21.720

The following code:

```
private static List<List<Object>> createBatch(List<Object> originalList, int batch_size) {
    int Length = originalList.size();
    int chunkSize = Length / batch_size;
    int residual = Length-chunkSize*batch_size;
    List<Integer> list_nums = new ArrayList<Integer>();
    for (int i = 0; i < batch_size; i++) {
        list_nums.add(chunkSize);
    }
    for (int i = 0; i < residual; i++) {
        list_nums.set(i, list_nums.get(i) + 1);
    }
    List<Integer> list_index = new ArrayList<Integer>();
    int cumulative = 0;
    for (int i = 0; i < batch_size; i++) {
        list_index.add(cumulative);
        cumulative += list_nums.get(i);
    }
    list_index.add(cumulative);
    List<List<Object>> listOfChunks = new ArrayList<List<Object>>();
    for (int i = 0; i < batch_size; i++) {
        listOfChunks.add(originalList.subList(list_index.get(i), list_index.get(i + 1)));
    }
    return listOfChunks;
} 
```

produces the following output:

```
 //[0,..,99] equally partition into 6 batch
  // result:batch_size=[17,17,17,17,16,16]
  //Continually partition into 6 batch, and residual also equally 
  //partition into top n batch
  // Output:
  [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]    
  [17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33] 
  [34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50] 
  [51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67] 
  [68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83]       
  [84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99] 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-07-31T12:00:25.453

generic method for your help :

```
private static List<List<Object>> createBatch(List<Object> originalList,
        int chunkSize) {
    List<List<Object>> listOfChunks = new ArrayList<List<Object>>();
    for (int i = 0; i < originalList.size() / chunkSize; i++) {
        listOfChunks.add(originalList.subList(i * chunkSize, i * chunkSize
                + chunkSize));
    }
    if (originalList.size() % chunkSize != 0) {
        listOfChunks.add(originalList.subList(originalList.size()
                - originalList.size() % chunkSize, originalList.size()));
    }
    return listOfChunks; 
```

# android - 使用专辑名称获取专辑封面 Android

> ID：13678391
> 
> 赞同：6
> 
> 时间：2012-12-03T06:43:54.443
> 
> 标签：android, android-mediaplayer, mediastore, android-contentresolver, albumart

我想在列表视图中显示带有专辑名称的专辑封面。但我没有办法显示专辑封面。我已经尝试过[android 上的封面艺术](https://stackoverflow.com/questions/1954434/cover-art-on-android)。

这是我的代码：

```
Cursor cursor = managedQuery(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, null, null, null, null);
          if (cursor == null) 
          {
              //Query Failed , Handle error.
          }
          else if (!cursor.moveToFirst()) 
          {
             //No media on the device.
          }
          else
          {
              int titleColumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Albums.ALBUM_ART);
              int id = cursor.getColumnIndex(android.provider.MediaStore.Audio.Albums.ALBUM_ID); //here value i m getting -1 .

              for(int i=0;i<cursor.getCount();i++)
              {
                  if(id<0)
                  {
                        Long album =Long.parseLong(cursor.getString(id)); 
                        String coverPath = cursor.getString(titleColumn);

                        Context context = null;
                        ContentResolver res = context.getContentResolver();
                        Uri uri = ContentUris.withAppendedId(sArtworkUri, album);
                        if (uri != null)
                        {
                            InputStream in = null;
                            try
                            {
                                in = res.openInputStream(uri);
                                Bitmap b = BitmapFactory.decodeStream(in, null, sBitmapOptions);
                                ImageView coverAlbum=(ImageView)findViewById(R.id.thumbnail);
                                coverAlbum.setImageBitmap(b);

                            } catch (FileNotFoundException ex)
                            {

                            }

                        }

                  }
                         //code to insert in listview
                  cursor.moveToNext();
               }
           }
           cursor.close();
} 
```

但我得到了album_id -1。所以我没有得到专辑的album_id，但我的sdcard中有专辑歌曲。并且 sdcard 有像**albumthums**这样的文件夹，其中包含一些文件。所以请给我解决方案来获取专辑名称和艺术。提前感谢。

* * *

这是我的错误日志：

```
12-03 15:19:22.051: WARN/System.err(32334): java.lang.NullPointerException
12-03 15:19:22.060: WARN/System.err(32334):     at com.mnp.AlbumList.onCreate(AlbumList.java:59)
12-03 15:19:22.120: WARN/System.err(32334):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-03 15:19:22.130: WARN/System.err(32334):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
12-03 15:19:22.140: WARN/System.err(32334):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
12-03 15:19:22.161: WARN/System.err(32334):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
12-03 15:19:22.171: WARN/System.err(32334):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
12-03 15:19:22.180: WARN/System.err(32334):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-03 15:19:22.201: WARN/System.err(32334):     at android.os.Looper.loop(Looper.java:123)
12-03 15:19:22.210: WARN/System.err(32334):     at android.app.ActivityThread.main(ActivityThread.java:4363)
12-03 15:19:22.220: WARN/System.err(32334):     at java.lang.reflect.Method.invokeNative(Native Method)
12-03 15:19:22.240: WARN/System.err(32334):     at java.lang.reflect.Method.invoke(Method.java:521)
12-03 15:19:22.250: WARN/System.err(32334):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-03 15:19:22.260: WARN/System.err(32334):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-03 15:19:22.270: WARN/System.err(32334):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-03T06:50:00.220

使用以下代码获取带有歌曲信息的专辑封面。您可以稍作更改以仅显示专辑名称而不是歌曲列表。

```
 public class BrowseAudioActivity extends Activity implements
            AppConstants {
        private Context context;
        private ArrayList<AudioListModel> audioArrayList = new ArrayList<AudioListModel>();
        private AudioListAdapter audioListAdapter;
        private ListView audioListView;

/** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
            setContentView(R.layout.audio_list);
            UtilityClass.addActivityToStack(this);
            context = this;
            audioListView = (ListView) findViewById(R.id.list_audio);

            new GetAudioListAsynkTask(context).execute((Void) null);

        }

        private void initLayout() {
            final Uri uri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
            final String[] cursor_cols = { MediaStore.Audio.Media._ID,
                    MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.ALBUM,
                    MediaStore.Audio.Media.TITLE, MediaStore.Audio.Media.DATA,
                    MediaStore.Audio.Media.ALBUM_ID,
                    MediaStore.Audio.Media.DURATION };
            final String where = MediaStore.Audio.Media.IS_MUSIC + "=1";
            final Cursor cursor = context.getContentResolver().query(uri,
                    cursor_cols, where, null, null);

            while (cursor.moveToNext()) {
                String artist = cursor.getString(cursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.ARTIST));
                String album = cursor.getString(cursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM));
                String track = cursor.getString(cursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE));
                String data = cursor.getString(cursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA));
                Long albumId = cursor.getLong(cursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID));

                int duration = cursor.getInt(cursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION));

                Uri sArtworkUri = Uri
                        .parse("content://media/external/audio/albumart");
                Uri albumArtUri = ContentUris.withAppendedId(sArtworkUri, albumId);

                Logger.debug(albumArtUri.toString());
                Bitmap bitmap = null;
                try {
                    bitmap = MediaStore.Images.Media.getBitmap(
                            context.getContentResolver(), albumArtUri);
                    bitmap = Bitmap.createScaledBitmap(bitmap, 30, 30, true);

                } catch (FileNotFoundException exception) {
                    exception.printStackTrace();
                    bitmap = BitmapFactory.decodeResource(context.getResources(),
                            R.drawable.audio_file);
                } catch (IOException e) {

                    e.printStackTrace();
                }

                AudioListModel audioListModel = new AudioListModel();
                audioListModel.setArtist(artist);
                audioListModel.setBitmap(bitmap);
                audioListModel.setAlbum(album);
                audioListModel.setTrack(track);
                audioListModel.setData(data);
                audioListModel.setAlbumId(albumId);
                audioListModel.setDuration(duration);
                audioListModel.setAlbumArtUri(albumArtUri);

                audioArrayList.add(audioListModel);

            }

        }

        public String getRealPathFromURI(Uri contentUri) {
            String[] proj = { MediaStore.Images.Media.DATA };
            Cursor cursor = context.getContentResolver().query(contentUri, proj,
                    null, null, null);
            int column_index = cursor
                    .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }

        private class GetAudioListAsynkTask extends AsyncTask<Void, Void, Boolean> {

            private Context context;
            private CustomProgressDialog progressDialog;

            public GetAudioListAsynkTask(Context context) {

                this.context = context;
            }

            @Override
            protected void onPreExecute() {
                progressDialog = new CustomProgressDialog(context,
                        AUDIO_LOADING_HEADING, AUDIO_LOADING_MSG);
                progressDialog.setCancelable(false);
                progressDialog.show();
                super.onPreExecute();

            }

            @Override
            protected Boolean doInBackground(Void... params) {
                try {
                    initLayout();

                    return true;
                } catch (Exception e) {
                    return false;

                }

            }

            @Override
            protected void onPostExecute(Boolean result) {
                progressDialog.dismiss();

                audioListAdapter = new AudioListAdapter(context, audioArrayList);
                audioListView.setAdapter(audioListAdapter);
                audioListView
                        .setOnItemClickListener(new AudioListItemClickListener(
                                context, audioArrayList));

            }
        }

        @Override
        protected void onPause() {
            super.onPause();
            overridePendingTransition(0, 0);
        }

        @Override
        protected void onDestroy() {
            super.onDestroy();
            UtilityClass.removeActivityOnFinish(this);
        }

        @Override
        public void onBackPressed() {
            super.onBackPressed();
            finish();
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-19T07:22:57.873

获取 ALBUM_ART 的非常简单的代码。永远记住你应该有读取存储权限。

```
 final Uri uri = MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI;

        final Cursor cursor = getContentResolver().query(uri, null, null, null, null);
        while (cursor.moveToNext()) {
            final String artist = cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Albums.ARTIST));
            final String album = cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Albums.ALBUM));
            final String albumart = cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Albums.ALBUM_ART));
            arrayList.add(artist);
        } 
```

# javascript - 使用 CKEditor 自动保存表单

> ID：13678393
> 
> 赞同：0
> 
> 时间：2012-12-03T06:44:02.930
> 
> 标签：javascript, jquery, ckeditor

我尝试使用 CKEditor 保存我的表单并添加自动保存功能意味着所有输入都将自动保存：

```
<script>
//hide preview box 
$('document').ready(function() {
    $('#preview').hide(); //Default setting
}); 

//save in db
function CKupdate(){
    for ( instance in CKEDITOR.instances )

        CKEDITOR.instances[instance].updateElement(); //fix texrarea update value

        CKEDITOR.instances[instance].on('key', function() { //auto save 
                $("#save").trigger('click');
            });

        $('#article-form').ajaxForm( { //submit form
        target: '#preview', 
            success: function() { 
                $('#preview').show('slow').delay(800).hide('slow');
            } 
        }); 
}
</script>

<form id="article-form" name="article-form" method="post" action="save.php">
    <textarea name="bodyContent" id="bodyContent"><?php echo $row['content'] ?></textarea>
    <script type="text/javascript">
    CKEDITOR.replace('bodyContent');
    </script>

    <button onClick="CKupdate()" id="save" />Save</button>
</form>

<span id="preview"></span> 
```

我的问题是：

1.  此自动保存`CKupdate()`（*参考行-> 注释//自动保存*）仅在我按下按钮后触发`Save` .. 如果我不按下则不起作用`save`。我不确定如何在用户按下之前运行它`save`。

2.  用户按下后`save`，每次用户在 textarea 中插入任何字符串时都会触发保存功能，几秒钟后我的浏览器将挂起。我认为这`on('key',`不能很好地运行，或者可能需要更改为其他内容。

*我实际上想要做的是使用 CKEditor 创建 textarea 并将值保存到 db 并创建用于自动保存的函数。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:58:23.933

我很遗憾地说，但这看起来非常未经优化。您是否意识到在您第一次单击后，每次按键都会将“keypress”事件再次添加到编辑器实例中？就像您现在按 5 个键一样，您可以单击 5 次保存按钮。

与其让整个函数再次运行，为什么不将保存代码移到另一个函数中呢？像这样：

```
<script>
//hide preview box 
$('document').ready(function() {
    $('#preview').hide(); //Default setting
    for ( instance in CKEDITOR.instances ) {

        CKEDITOR.instances[instance].updateElement(); //fix texrarea update value

        CKEDITOR.instances[instance].on('key', function() { //auto save 
                $("#save").trigger('click');
            });

   }
}); 

//save in db
function CKupdate(){
    for ( instance in CKEDITOR.instances ) {

        CKEDITOR.instances[instance].updateElement(); //fix texrarea update value

        $('#article-form').ajaxForm( { //submit form
        target: '#preview', 
            success: function() { 
                $('#preview').show('slow').delay(800).hide('slow');
            } 
        }); 
    }
}
</script>

<form id="article-form" name="article-form" method="post" action="save.php">
    <textarea name="bodyContent" id="bodyContent"><?php echo $row['content'] ?></textarea>
    <script type="text/javascript">
    CKEDITOR.replace('bodyContent');
    </script>

    <button onClick="CKupdate()" id="save" />Save</button>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-06T18:57:46.913

更改 CKEDITOR.instances[instance].updateElement(); 到 CKEDITOR.instances.content.getData(); 使用 Ckeditor 版本 3xx

# python - PyGTK标签集游标功能？

> ID：13678394
> 
> 赞同：0
> 
> 时间：2012-12-03T06:44:06.123
> 
> 标签：python, cursor, focus, label, pygtk

我有一个可选择的 gtk.label，我想在程序启动时将光标放在标签中。有没有我可以用来执行此操作的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:43:42.630

不知道有没有可能，如果有的话

```
label.grab_focus() 
```

会做的。确保首先设置`gtk.CAN_FOCUS`标志。[文档在这里。](http://www.pygtk.org/docs/pygtk/class-gtkwidget.html#method-gtkwidget--grab-focus)

# ios - Core Data ios，崩溃时数据不一致

> ID：13678395
> 
> 赞同：0
> 
> 时间：2012-12-03T06:44:18.617
> 
> 标签：ios, core-data, ios6, xcode4.5

我正在开发一个使用核心数据的 ios6 应用程序。有时当我的应用程序崩溃时数据不一致，有时当我终止应用程序时。每次对数据进行更改时，我都会保存上下文，并且在“applicationWillTerminate:”中也会调用“saveContext”。在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:44:22.730

在保存数据的行放置断点，或使用`NSLog`. 然后重现您的崩溃场景。很可能您的保存代码从未被调用过。

如果仍然缺少数据，请使用`sqlite3`命令行工具或 Firefox 插件检查您的数据库以查看 SQLite 数据库。您很可能会在物理数据库中找到数据——这意味着您在检索和显示数据时遇到了问题，而不是保存它。

如果您仍然缺少数据 - 恭喜！*你已经超越了时空连续体，进入了一个新的实相维度。*

# c# - 删除选定单元格的行窗口窗体

> ID：13678396
> 
> 赞同：2
> 
> 时间：2012-12-03T06:44:19.960
> 
> 标签：c#, datagridview

这个想法是：当用户选择一个或多个单元格然后单击删除按钮时，Datagridview 将删除这些选定单元格的整行。当没有任何内容显示如何删除多个单元格行时，我的思绪被炸毁了。如果删除选定的行或单个单元格，问题很简单。但是多细胞问题是...

可能会出现一些问题：索引越界，删除整个gridview...

假设gridview内容2列，gridview中的数据不是来自db。

我试过这段代码：

```
while(dgv1.selectedCells.count>0){
dgv1.removeAt(dgv1.selectedCells[0].RowIndex);
} 
```

但是这个删除了整个datagridview，因为当gridview删除一行时，它会选择第一个单元格（第一列，第一行）。

然后我试试这个：

```
List<int> rowToDelete = new List<int>();
foreach(DataGridViewCell cell in dgv1.selectedCells){
  rowToDelete.add(cell.RowIndex);
} 
```

然后从列表中删除gridview Rows，但这可能会发生要添加相同的行索引，这会导致错误的行被删除，并且可能会使代码更加复杂。请帮忙。

编辑：正如 yatrix 推荐的那样，我使用这个代码（我想我得到了他的推荐）

```
for (int i = dataGridView1.SelectedCells.Count -1; i >=0; i--)
        {
            dataGridView1.Rows.RemoveAt(dataGridView1.SelectedCells[i].RowIndex);
        } 
```

但是当我选择的单元格多于 Rows.Count 时，会发生索引越界异常。另外，如果我在同一行中选择 2 个单元格，则会导致删除错误的行（下一行）。这是我的主要问题。

Ps：我正在尝试制作一个程序来重命名Windows中的多个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:07:45.367

它完成了所需的工作，试试吧。

```
List<int> rowsToDelete = new List<int>();

 foreach (DataGridViewCell cell in this.dgv1.SelectedCells)
{
   if (rowsToDelete.Contains(cell.RowIndex) == false)
       rowsToDelete.Add(cell.RowIndex);
} 
```

//用户可以使用 ctrl 键选择单元格/行，因此请确保按降序对行索引进行排序。

```
rowsToDelete=rowsToDelete.OrderByDescending(rowIndex => rowIndex).ToList();          
foreach (Int32 rowIndex in rowsToDelete)
{
   this.dgv1.Rows.RemoveAt(rowIndex);
}

rowsToDelete.Clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:58:36.100

你很亲密。向后遍历选定单元格的行索引，这样它们就不会改变。不要将重复的行索引添加到您的列表中！如果从顶部删除，行会向上移动，新行会占用旧索引。如果你从底部删除，你只是向上移动，一个新项目向上移动并不重要，因为你已经超过了那个索引。

所以：

```
for (i = myRowIndexes.count - 1; i >= 0; i--) {
    //delete your rows
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:47:34.443

无论如何，我问了我的老师，这是他对这段代码的最终答案：

```
 var q = from c in dataGridView1.SelectedCells.Cast<DataGridViewCell>()
                orderby c.RowIndex descending
                select c.RowIndex;

        int[] arr = q.Distinct().ToArray();

        foreach (int rowindex in arr)
        {
            dataGridView1.Rows.RemoveAt(rowindex);
        } 
```

这个很好，但是linq有点难以理解......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:59:21.353

```
for(int i=0;i<10;i++)

{

dataGridView1.Rows.RemoveAt(dataGridView1.SelectedRows[i].Index);

} 
```

# python - Python - 烧瓶默认路由可能吗？

> ID：13678397
> 
> 赞同：40
> 
> 时间：2012-12-03T06:44:37.213
> 
> 标签：python, flask, cherrypy

在 Cherrypy 中可以这样做：

```
@cherrypy.expose
def default(self, url, *suburl, **kwarg):
    pass 
```

有没有等效的烧瓶？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-03T06:56:47.117

Flask 的网站上有一段关于烧瓶的“包罗万象”路线的片段。[你可以在这里找到它](https://flask.palletsprojects.com/en/2.0.x/patterns/singlepageapplications/)。

基本上，装饰器通过链接两个 URL 过滤器来工作。页面上的示例是：

```
@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def catch_all(path):
    return 'You want path: %s' % path 
```

这会给你：

```
% curl 127.0.0.1:5000          # Matches the first rule
You want path:  
% curl 127.0.0.1:5000/foo/bar  # Matches the second rule
You want path: foo/bar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-01T10:51:24.223

```
@app.errorhandler(404)
def handle_404(e):
    # handle all other routes here
    return 'Not Found, but we HANDLED IT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-18T21:18:47.323

如果您的单页应用程序具有嵌套路由（例如 www.myapp.com/tabs/tab1 - Ionic/Angular 路由中的典型），您可以像这样扩展相同的逻辑：

```
@app.route('/', defaults={'path1': '', 'path2': ''})
@app.route('/<path:path1>', defaults={'path2': ''})
@app.route('/<path:path1>/<path:path2>')
def catch_all(path1, path2):
    return app.send_static_file('index.html') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-27T13:58:34.560

试试这个

```
@app.route('/')
def entry():
    return redirect('/defaultroute') 
```

# ruby-on-rails-3 - 如何在后台与 Rails 应用程序一起运行计划？

> ID：13678400
> 
> 赞同：3
> 
> 时间：2012-12-03T06:44:46.667
> 
> 标签：ruby-on-rails-3, thin, rufus-scheduler

我正在使用 Rufus Scheduler 每天在特定时间发送邮件警报。我在 config/initializers.my 中创建了 task_scheduler.rb 代码是：-

```
scheduler = Rufus::Scheduler.start_new

 scheduler.cron("0 09 * * *") do
   UserMailer.leave_reminder_email().deliver
 end
end 
```

当我运行“rails s”命令时它工作正常。但是当我使用“rails server thin -d”时，它不起作用。谁能告诉我还需要什么才能使它工作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:33:14.797

尝试将其添加到 task_scheduler.rb 之上：

```
require 'rufus/scheduler' 
```

# shell - 如何使用变量读取属性

> ID：13678404
> 
> 赞同：2
> 
> 时间：2012-12-03T06:45:04.833
> 
> 标签：shell

在过去的 2/3 天里，我都面临着这个问题。我有一个简单的脚本，我将在其中读取一个属性文件并输出一些内容。这是我的脚本

```
vi testloop.properties
dump_1=abc

vi testloop.sh
. testloop.properties
i=1
dmp="dump_"$i  //as per my understanding dmp=dump_1
echo $dump_1   //abc will echod since dump_1 in property file is abc
echo $dmp      ***i thought here also abc will come but unfortunately it is "dump_1"***
echo $(($dmp)) ***here output is 0*** 

sh testloop.sh
abc
dump_1
0 
```

有人可以帮助我指出 echo $dmp 和 echo $(($dmp)) 中发生了什么。为什么它没有呼应 abc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:53:23.073

```
. ./testloop.properties
i=1
dmp="dump_"$i
echo $dump_1   # print abc as expected
echo $dmp      # prints dump_1 since this is what dmp contains
 # ***here output is 0*** 
eval echo \$$dmp # evaluates \$$dmp to $dump1 then echoes abc 
```

至于`echo $(($dmp))`，它尝试计算一个[算术表达式](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC33)，结果为 0：

> 算术扩展允许对算术表达式求值并替换结果。算术展开的格式为：
> 
> $(( 表达式 ))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:38:01.420

如果您的 shell 是 bash，请使用间接参数扩展。

```
echo ${!dmp} 
```

记录[在这里](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

> 如果参数的第一个字符是感叹号（！），则引入了变量间接级别。Bash 使用由其余参数形成的变量的值作为变量的名称；然后扩展此变量，并将该值用于替换的其余部分，而不是参数本身的值。这称为间接扩展。

但是，使用 @FoolishSeth 所示的数组通常比构造动态变量名称更整洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:11:00.613

`dmp="dump_"$i`

这会将字符串`"dump_1"`而不是变量分配`dump_1`给`dmp`.

您给出的另一个示例尝试进行算术扩展`$dmp`，在这种情况下仅为 0。

通常变量赋值是`dmp=$dump_1`，这很好，但是变量赋值，即`dmp=$dump_$i`不能像你希望的那样工作。您可以通过如下`eval`语句传递它：

`eval dmp=\$dump_$1`

但是如果你真的需要这种性质的变量，最好使用数组：

```
i=1
dump[1]='abc'
dmp=${dump[$i]}
echo ${dump[$i]}
echo $dmp 
```

# android - 从 Graph API 中提取和保存信息

> ID：13678405
> 
> 赞同：0
> 
> 时间：2012-12-03T06:45:26.620
> 
> 标签：android, facebook, session, facebook-graph-api

几个问题。

问题 1：跟踪“成功！！！” 注册，但我无法在 onCompleted 中得到任何东西来跟踪。然而，在我的应用程序中，我登录了我的 Facebook 帐户。

问题 2：当我让 userId 在 onCompleted 内修改时，我无法获得修改“范围外”字符串的结果

```
String userId;

        // If session is open
        if (session != null && session.isOpened()) {    
            Log.d("Trace","Made it in!!!");

            //  Make an API call to get user data
            // and define a new callback to handle the response
            Request request = Request.newMeRequest(session, new Request.GraphUserCallback() {
                @Override
                public void onCompleted(GraphUser user, Response response) {
                    Log.d("Trace","Starting onComplete");
                    Session session = Session.getActiveSession();

                    // If current session matches active session
                    if (session == Session.getActiveSession()) {
                        Log.d("Trace","Session is active.");
                        if (user != null) {

                            // Set the Textview's text from user's id
                            userId = user.getId();
                            Log.d("Trace", "userId after PULL FROM GRAPH: " + userId);
                            //Log.d("Trace", userId);

                        } // end if user != null   
                    }   // end if session == Session.getActiveSession()                 
                } // end onCompleted
            }); // end request
        } // end session open check 
```

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:01:08.350

问题 1：您已经创建了请求，但没有执行它。创建请求后尝试添加 request.executeAsync() 。或者，您也可以调用 Request.executeMeRequestAsync(Session, Callback) 方法立即执行请求。

问题 2：这是 Java 的限制。您使用 GraphUserCallback 创建的是一个匿名内部类，您不能直接修改该类之外的状态。解决此问题的一种快速方法是使用实​​例变量（在类中声明 userId）而不是临时变量（在方法中声明）。

# jquery - php jQuery with .change 如何自动更改值

> ID：13678407
> 
> 赞同：0
> 
> 时间：2012-12-03T06:45:47.237
> 
> 标签：jquery

我有这张图片，我喜欢在 jQuery 上解决它，现在图片有固定大小，但是当我在`<input type='text' name='img_logo' value='630px'>`

就像我举的例子一样`530px`，图像大小也应该改变。

这是我的代码。

```
<form method='post'>
    <input type="text" name="logo_width" value="632px">
    <p>Format logo: <span id="logo_size">632px</span></p>
</form> 
```

jQuery 代码

```
$(function(){
    $('input[name="logo_width"]').change(function(e) {
        var chk = $('input[name="logo_width"]').val();
        $('img#img_logo').attr(chk);
    });
}); 
```

和图像

```
<div class="logo">  
     <img src="images/upload/' . $set_logo_img['filename'] . '"
         width="630px" align="center" id="img_logo" />
     <br /> 
</div> 
```

但是，当我在`input='name=logo_width'`无变化上输入一些值时，我的代码 jQuery 错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:41:38.910

我认为您需要修复一些 jQuery 代码：

```
$(function(){
    $('input[name="logo_width"]').change(function(e) {
        var chk = $('input[name="logo_width"]').val();
        $('img#img_logo').attr("width", chk); // set attribute width value with chk
    });
}); 
```

# java - 边缘类的 Java hashCode() 覆盖

> ID：13678410
> 
> 赞同：1
> 
> 时间：2012-12-03T06:46:10.307
> 
> 标签：java, graph, hashcode

我正在使用 Java 中的图形库（完整上下文为 https://github.com/aisthesis/java-graph2012），并且需要为不指向边的 WeightedEdge 类覆盖 hashCode()。也就是说，我设置了我的 equals() 覆盖方法，以便对于 2 个加权边 e1 和 e2，如果以下条件之一成立，它们是相等的（from() 和 to() 方法返回尾部和头部顶点边缘）：

1.  e1.from() == e2.from() && e1.to() == e2.to() 或
2.  e1.from() == e2.to() && e1.to() == e2.from()

在另一种情况下，我想创建一个加权边的 HashSet，并且我最终会得到重复的边，除非我也以与我的 equals() 覆盖一致的方式覆盖 hashCode() 方法。

所以，这是我的简单解决方案（我没有干扰 Java 的默认 hashCode() 用于我的 Vertex 类以及从和引用 Vertex 对象）：

```
@Override
public int hashCode() {
    return from.hashCode() + to.hashCode();     
} 
```

我的推理：

1.  它是有效的，因为加法的效率与一个可以得到的一样高（我想一个也可以对 2 个哈希码进行异或？）
2.  它是对称的，因此从和到反转将给出相同的哈希码
3.  如果顶点不同，它通常会提供不同的哈希码。

第 3 点显然远不是 100%，所以我的部分问题是这是否重要。

我的一般问题：这是在这种情况下覆盖 hashCode() 的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:54:14.607

提供`from`并`to`有一个合理的`hashCode()`实施，你的解决方案很好。

# php - 在 Yii 中使用统计查询

> ID：13678411
> 
> 赞同：1
> 
> 时间：2012-12-03T06:46:12.037
> 
> 标签：php, mysql, yii, phpmyadmin

我正在尝试使用统计查询获取在我的站点中发布的每个请求的提案计数。即，登录用户发布的每个请求的提案计数。我正在使用代码获取所有用户的数量

```
return array(
   'serviceproposals' => array(self::HAS_MANY, 'Serviceproposal', 'ServiceRequestID'),
   'user' => array(self::BELONGS_TO, 'Buyer', 'user_id'),
   'postCount'=>array(self::STAT, 'serviceproposal', 'ServiceRequestID'),
             ); 
```

数据库：
User[user_id,name,password],
Provider[user_id,providercompany,providerdetails],
Buyer[user_id,contactinfo],
ServiceRequest[ServiceRequestID,Buyer.user_id,details,date],
ServiceProposal[ServiceProposalId,ServiceRequestID,Provider.user_id,服务，propsal_rate]

邀请所有建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:26:04.340

为此，您需要将`user_id`当前登录用户的 传递给`STAT`关系。

有两种方法可以实现这一点，使用[条件查询](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#dynamic-relational-query-options "http://www.yiiframework.com/doc/guide/1.1/en/database.arr#dynamic-relational-query-options")，或使用[参数化命名范围](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes "http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes")

1.  条件查询。

    *   急切加载：

        ```
        $obj= ServiceRequest::model()->with(array(
            'postCount'=>array('condition'=>'user_id = :param',
            'params' => array(':param' => $user_id))
        ))->findAll(); 
        ```

    *   延迟加载：

        ```
        $serviceRequestObject->postCount(array(
            'condition'=>'user_id = :param',
            'params' => array(':param' => $user_id)
        )); 
        ```

2.  参数化命名范围：
    在您的模型中

    ```
    public function postCountUser($fieldValue=5) {
        $this->getDbCriteria()->mergeWith(array(
            'condition' => 'user_id = :param',
            'params' => array(':param' => $fieldValue)
       ));
       return $this;
    } 
    ```

    然后像这样使用：

    *   急切加载：

        ```
        ServiceRequest::model()->with('postCount')->postCountUser($user_id)->findAll(); 
        ```

    *   延迟加载：

        ```
        $serviceRequestObj->postCount->postCountUser($user_id); 
        ```

# c# - 将包含数字的字符串转换为 int

> ID：13678416
> 
> 赞同：0
> 
> 时间：2012-12-03T06:46:45.693
> 
> 标签：c#, char, int

> **可能重复：**
> [C# char 到 int](https://stackoverflow.com/questions/239103/c-sharp-char-to-int)

我遇到了很多解决方案，但我无法通过尝试其中任何一个来解决问题。如何在 c# 中将“230”、“73400”或更大的字符串值转换为 int 值？我必须使用图书馆吗？有没有办法在 C# 本地做到这一点？让我们假设：

> `string c = "270"; int i;`

我怎样才能让我也成为 270？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:52:44.850

这似乎不可能 `char c = '270';`

但是你可以有一个字符串`string c ="270";`，最好的方法是使用`int.TryParse(c, out intval)`变体，如果你在字符串中包含一个可解析的 int 值，它将返回 true。同样在您提到的值示例中，我认为您需要一个`long`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:48:08.887

试试这个，

```
int i = (int) c; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:49:30.987

```
int i = Char.GetNumericValue('270');

//or 

int i= Convert.ToInt32(c); 
```

尝试这个，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:56:57.223

如果您有一个包含“270”的字符串，您可以使用几种不同的方法：

```
var s = "270";

var i1 = Convert.ToInt32(s);
var i2 = int.Parse(s);

// This is probably safest as it allows you to handle errors yourself without catching exceptions.
int i3;
if(! int.TryParse(s, out i3)) {
  // Panic!
} 
```

# django - Django，抽象模型类+派生模型和表单“排除”字段问题

> ID：13678417
> 
> 赞同：1
> 
> 时间：2012-12-03T06:46:49.103
> 
> 标签：django, model, abstract

```
class SomeBaseClass(models.Model):
    CHOICES_1 = (
     (1, '1'),
     (2, '2'),
     (3, '3'),
     (4, '4'),
     )
    ONETIME = 'OT'
    WEEKLY = 'WK'
    BIWEEKLY = 'BW'
    MONTHLY = 'MN'
    BIMONTHLY = 'BM'
    YEARLY = 'YR'
    CHOICES_2 = (
        (ONETIME, 'One Time'),
        (WEEKLY, 'Weekly'),
        (BIWEEKLY, 'Bi-Weekly'),
        (MONTHLY, 'Monthly'),
        (BIMONTHLY, 'Bi-Monthly'),
        (YEARLY, 'Yearly'),
    )
    CHOICES_3 = (
         (0,'0'),
         (1,'1'),
         (2,'2'),
         (3,'3'),
         (4,'4'),
         (5,'5'),
         (10,'10'),
    )
    field1 = models.CharField(max_length=10)
    field2 = models.DateTimeField(auto_now_add=True) 
    field3 = models.DateField()
    field4 = models.TimeField()
    field5 = models.SmallIntegerField(choices=CHOICES_1)
    field6 = models.CharField(max_length=2,choices=CHOICES_2)
    field7 = models.SmallIntegerField(choices=CHOICES_3)
    field8 = models.CharField(max_length=80)
    field9 = models.TextField(max_length=300)
    class Meta:
        abstract = True

class SomeDerivedClass(SomeBaseClass):
    field10 = models.DateTimeField()
    field11 = models.ForeignKey(Business, blank=True)

class SomeDerivedClassForm(forms.ModelForm):
    class Meta:
        model = SomeDerivedClass
        exclude = ['field2']
        exclude = ['field10']
        exclude = ['field11'] 
```

渲染“SomeDerivedClassForm”时，即使我已将其设置为排除，field10 也会显示在网站上。在此之前，我在基类中有 field11，当时 field10 未显示在呈现的表单中，但 field11 出现了，即使它被排除在外。我意识到我的代码中一定有一些错误，但我没有看到它是什么。
您是否需要做一些特殊的事情才能将表单与派生类一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:22:22.610

我不确定这是否那么简单。

而不是在您的代码中，`exclude`每次您想要向其中添加字段时，您都会覆盖列表。

```
 exclude = ['field2']
 exclude = ['field10']
 exclude = ['field11'] 
```

写：

```
 exclude = ['field2', 'field10', 'field11'] 
```

# jquery - 我想通过使用动态生成的类来显示隐藏元素

> ID：13678419
> 
> 赞同：0
> 
> 时间：2012-12-03T06:46:56.760
> 
> 标签：jquery, soundmanager2

我想显示/隐藏与其子元素中的类相关的父元素。这就是我想要的。

```
 <p><a href="<?php echo site_url('mp3/coins.mp3');?>" title="hello" class="sm2_button" id="song1">play</a> Dear Yesterdays </p>
    <p><a href="<?php echo site_url('mp3/fancy-beer-bottle-pop.mp3');?>" title="hello" class="sm2_button" id="song2">play</a> song 2</p>
    <p><a href="<?php echo site_url('mp3/coins.mp3');?>" title="hello" class="sm2_button" id="song1">play</a> Dear Yesterdays </p>
    <p><a href="<?php echo site_url('mp3/fancy-beer-bottle-pop.mp3');?>" title="hello" class="sm2_button" id="song2">play</a> song 2</p>

       <script>
    $(document).ready(function(){
    $('.play p').hide();
        $('.play p:first').show();
    $('.play p a').each(function(){
    var attr = $(this).attr('class');
    var cls = attr.split(' ');  
    if(cls[1]=='sm2_playing' || cls[1]=='sm2_paused')
    {
        // display none to all .play p tags except the one with those classes sm2_playing or sm2_paused
        }
    });

    });
    </script> 
```

请帮我。我正在使用soundmanager2。我想一首又一首地播放歌曲，而只显示正在播放的歌曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:54:40.603

如果您正在使用动态生成的类或任何对象，那么您不能直接使用该对象。对于这样的类和对象，您必须绑定事件。请[在此处](http://api.jquery.com/bind/)参考 JQuery 绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:38:50.380

jQuery 不会为将来的对象做你想要做的事情。

而不是使用`show()`/ `hide()`，您可以简单地将`addClass()`and`removeClass()`与您的 CSS 结合使用：

**CSS**

```
.play p
{
    display: none;
}

.play p.sm2_playing, .play p.sm2_paused
{
    display: block;
} 
```

因此，当您这样做时`$(this).addClass('sm2_playing')`，元素将显示，而`$(this).removeClass('sm2_playing sm2_paused')`元素将隐藏。

# scala - 隐式使用 Ordered

> ID：13678426
> 
> 赞同：1
> 
> 时间：2012-12-03T06:47:32.253
> 
> 标签：scala, types, implicit-typing

我正在尝试为我的程序中使用的某些类型创建一个包装器。我还希望所有这些类型都通过实现特征 Ordered[T] 来具有比较方法。我在制作一个比较方法时遇到问题，该方法确定被比较的类型隐式实现了 Ordred[T]。

当前尝试：

```
case class Value[T](someType: T) extends Ordered[T] {

  def matches(otherType: T): Boolean = {
    if(someType.getClass == otherType.getClass)
      true
    else false
  }

  override def toString() = {
    someType.toString
  }

  def compare(other: T): Int = {
    implicitly[Ordered[T]] compare other
  }
}

object Value {
  implicit def intVal(some: Int) = new Value[Int](some) {
    def compare(other: Int): Int = someType compare other
  }
  implicit def doubleVal(some: Double) = new Value[Double](some) {
    def compare(other: Double): Int = someType compare other
  }
  implicit def stringVal(some: String) = new Value[String](some) {
    def compare(other: String): Int = someType compare other
  }
  implicit def boolVal(some: Boolean) = new Value[Boolean](some) {
    def compare(other: Boolean): Int = someType compare other
  }
  implicit def dateVal(some: Date) = new Value[Date](some) {
    def compare(other: Date): Int = someType.compareTo(other)
  }
} 
```

这是我想要的结构，但我不断收到错误：

```
Could not find value for implicit parameter e: Ordered[T] 
```

是否有一些我缺少的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T07:19:58.507

`Ordered`不是类型类，而是一个`trait`，类或其他特征继承自可排序。因此，您不能隐式获取`Ordered`. 您必须修改您的类型参数以使舒尔`A`扩展`Ordered[A]`或可以被视为一个（`<%`是一个视图绑定，意味着存在从`A`to的隐式转换`Ordered[A]`），然后您可以简单地调用`compare`：

```
case class Value[A <% Ordered[A]](value: A) extends Ordered[Value[A]] {
  def compare(other: Value[A]) = value compare other.value
} 
```

# php - 如何从php中的img目录中找到图像的路径？

> ID：13678431
> 
> 赞同：0
> 
> 时间：2012-12-03T06:47:49.910
> 
> 标签：php, codeigniter-2

我正在尝试获取 img 目录中图像的路径。

```
 $keyString = $this->session->userdata('selected_comp_name');
           print($keyString);
           $imageSrcPath = glob('/img/$keyString.{jpeg,gif,png}',GLOB_BRACE); 
```

在上面的代码中，我尝试从 session 中获取公司名称，然后尝试从 img 目录中查找图像，该目录与公司 nae 同名，但扩展名为 png、jpeg 或gif。获得路径后，我将使用 img 标签显示它。但我无法在这里找到路径，我只是得到一个空白数组。

任何帮助将不胜感激。

我的目录结构是 www.sitename.com/img/therequiredimage.gif

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:13:59.567

由于只有三串代码，我看不出它们有什么问题。但是，如果`glob()`返回图像的绝对路径（例如`/usr/local/www/…/img/therequiredimage.gif`）并且您不能将 id 与`img`标签一起使用，则可能会出现问题。

在这种情况下，最简单的方法是：

```
$imageSrcPath = glob('/img/$keyString.{jpeg,gif,png}', GLOB_BRACE);

if(is_array($imageSrcPath) && isset($imageSrcPath[0])) $imgTag = '<img src="/img/'. basename($imageSrcPath[0]) .'"/>'; 
```

# c# - IQueryable.Include() 方法需要很长时间才能执行

> ID：13678434
> 
> 赞同：1
> 
> 时间：2012-12-03T06:48:04.497
> 
> 标签：c#, entity-framework, iqueryable

我正在使用 EF 6.0 并编写了这样的方法，

```
public IQueryable<TEntity> AllIncluding(params Expression<Func<TEntity, object>>[] includeProperties)
        {
            IQueryable<TEntity> query = GetQuery();
            foreach (var includeProperty in includeProperties)
            {
                query = query.Include(includeProperty).AsNoTracking();
            }
            return query;
        } 
```

这里`query.Include(includeProperty).AsNoTracking();`行需要很长时间才能执行，即使只有一个包含属性。有人能告诉我这是什么原因吗？

提前致谢。

**更新：**

GetQuery() 方法是这样的，

```
public IQueryable<TEntity> GetQuery<TEntity>() where TEntity:class 
        {
            return this.DbContext.Set<TEntity>();
        } 
```

# python - CSV 阅读器问题

> ID：13678436
> 
> 赞同：0
> 
> 时间：2012-12-03T06:48:08.773
> 
> 标签：python, csv

我从这段代码中得到了一个列表，我只想要一个列表。我错过了什么？基因 list.csv 是一个简单的 csv 文件，每行一个元素。此代码在单独的列表中生成每个基因的列表，例如：`[['IFNAR2'], ['AKT1'], ['AKT2'], ['IFNAR1']]`

```
gene_list = list(csv.reader(open("genelist.csv"))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:53:08.833

如果您的所有文件包含每行*一个*元素，请不要使用该`csv`模块。直接读取文件即可：

```
gen_list = open('genelist.csv').read().splitlines() 
```

该`csv`模块用于每行解析多个逗号、空格或制表符分隔的值，因此每行都作为列列表返回。

如果您*必须*使用`csv`该文件，“展开”生成的嵌套列表很容易：

```
gene_list = [g[0] for g in csv.reader(open("genelist.csv"))] 
```

这是一个列表理解，它采用`csv.reader()`调用产生的每一行的第一列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:52:29.360

[csv.reader 在行上](http://docs.python.org/2/library/csv.html#csv.reader)返回一个迭代器作为 csv 中的列表。`list`创建迭代器列表，以便您看到列表列表。

您可能希望使用[itertools.chain](http://docs.python.org/2/library/itertools.html#itertools.chain)链接生成的行迭代器。

```
gene_list = list(itertools.chain(*csv.reader(open("genelist.csv")))) 
```

如果你得到的是每行一个基因，那么 csv 不是一个好的选择。而只是遍历文件并从中创建一个列表

```
map(str.strip, open("genelist.csv")) 
```

或作为 LC

```
[e.strip() for e in open("genelist.csv")] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T07:03:10.333

这是预期的行为。从 csv 模块文档：

> 从 csv 文件读取的每一行都作为字符串列表返回。

您的文件每行有一个项目，因此您会得到一个包含一个项目的列表列表。要获取字符串列表，您可以执行以下操作：

```
with open("genelist.csv") as f:
    f.readlines() 
```

（您也必须从每个项目中删除换行符。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T06:54:11.123

您可以使用简单的列表推导来读取文件中的所有行。如果每行只有一个项目，不确定为什么要使用 csv 阅读器。

```
gene_list = [row[0] for row in csv.reader(open("genelist.csv"))] 
```

# sendmail - C中的非阻塞发送邮件

> ID：13678438
> 
> 赞同：0
> 
> 时间：2012-12-03T06:48:25.113
> 
> 标签：sendmail, nonblocking

我正在尝试从我在 linux (centos 64bit) 上的 C 程序发送一封电子邮件。以下（简化的）代码很有效：

```
asprintf(&cmd,"/usr/sbin/sendmail -oi -t -f me@blah.com somebody@blah.com");
asprintf(&bdy,"From: me@blah.com\nTo: somebody@blah.com\nSubject: blah blah\n\nThis is the message body\n");

FILE *out = popen(cmd,"w");
fprintf(out,"%s",bdy);
pclose(out); 
```

问题是它会阻塞并在返回之前最多需要一两秒钟。如何在不阻止的情况下发送电子邮件？

更多信息：问题是 popen 阻塞并在返回之前等待完成。所以我可能正在寻找另一种使用 sendmail 的方法。我真的不想使用额外的库来处理所有的臃肿。如果可能的话，我宁愿不分叉。（popen 已经分叉，但在返回调用者之前等待完成）是否存在不阻塞的 popen 等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:00:33.700

最简单的解决方案是从不同的线程发送（这可以像使用[fork()](http://linux.die.net/man/2/fork)一样简单），这可以让您的程序在发送邮件的同时继续执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:53:24.943

您可能想使用一些 SMTP 客户端库，请参阅[此问题](https://stackoverflow.com/q/8995476/841108)。

您可以将您的机器设置为 SMTP[智能主机](http://en.wikipedia.org/wiki/Smart_host)。

您还可以直接使用与低级进程相关的系统调用，例如[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)、[pipe(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)、[dup2(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/dup2.2.html)、[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)、[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)、[waitpid(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/waitpid.2.html)等。阅读[高级 Linux编程](http://advancedlinuxprogramming.com/)以了解更多信息。

你可以敢于使用多线程。了解有关[pthread](https://computing.llnl.gov/tutorials/pthreads/)的更多信息。

# php - 如何在 php 或 html 中访问缩放的 pdf 页面

> ID：13678439
> 
> 赞同：1
> 
> 时间：2012-12-03T06:48:34.763
> 
> 标签：php, pdf, imagemagick

我正在使用 imagmagik n php 将 pdf 转换为图像。但是具有 100% 分辨率的图像质量很差。所以我想以 200% 的分辨率访问 pdf。请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:08:18.423

这会对你有帮助吗？刚刚谷歌搜索 - 使用该`-density`选项

[http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10928#p34799](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10928#p34799)

# matlab - 使用“histc”时出错 - matlab

> ID：13678443
> 
> 赞同：-1
> 
> 时间：2012-12-03T06:48:39.753
> 
> 标签：matlab, histogram

我已经有一个直方图，并且想使用`histc`而不是`hist`后者为我提供了 bin 的中心值。

当我运行以下命令时：

```
>> [h, bins] = histc(H) 
```

我收到以下错误：

```
??? Error using ==> histc
Not enough input arguments. 
```

这是为什么？我应该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:59:42.140

您需要包含一个变量边：（Matlab 帮助）：

```
N = histc(X,EDGES), for vector X, counts the number of values in X
that fall between the elements in the EDGES vector (which must contain
monotonically non-decreasing values).  N is a LENGTH(EDGES) vector
containing these counts. 
```

它应该是一个两个长数组，即类似于`[2 4]`上限和下限分别为 2 和 4 的地方。

# android - Android：导入时 Dex 转换失败

> ID：13678447
> 
> 赞同：3
> 
> 时间：2012-12-03T06:49:05.840
> 
> 标签：android, dex

我在 Eclipse 中将一个 android 项目从一个工作区位置导入到另一个工作区时出现错误。

我在我的项目中使用 Google_admob 来展示广告。我没有任何错误，它在我的旧工作区中运行良好。

**Eclipse 版本**：Indigo 服务版本 2

**Android-项目版本：** Android 4.0.3

**错误状态：** [2012-12-03 12:02:27 - Dex Loader] 无法执行 dex：多个 dex 文件定义 Lcom/google/ads/Ad；转换为 Dalvik 格式失败：无法执行 dex：多个 dex 文件定义 Lcom/google/ads/Ad；

![在此处输入图像描述](../Images/e84f952ea8ec4bd624a5b9d6d7b12123.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T07:18:03.187

我发现了我的问题。

我实际上在 libs_folder 和 project_libraries(External Jar) 中导入了我的 lib jar 文件..所以在**bin/dexedLibs/**中创建了 2 次 dex 文件..现在我从一个位置删除了一个 jar 文件..

现在它的工作

感谢各位大佬的支持。。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:06:47.630

在清理了以前版本的工具留下的一些目录和文件后，我的问题得到了解决。[ADT Rev 14 改变了二进制文件的存储位置](http://tools.android.com/recent/buildchangesinrevision14)。我删除了整个 bin 目录，重新启动 Eclipse 并清理了构建并强制重建。最初这似乎可以解决问题，但在下一次运行后问题又出现了。

我终于发现我的 bin 目录包含在项目构建路径中。我从构建路径中排除了 bin 并重复了上述步骤。这解决了我的问题。

# regex - 负面展望

> ID：13678450
> 
> 赞同：1
> 
> 时间：2012-12-03T06:49:10.730
> 
> 标签：regex, regex-lookarounds, negative-lookahead

考虑两种`printk`函数调用 -

```
TRACE_BR(TRACE ,    "END. rc = %d\n", rc );

TRACE_BR(TRACE, "Value = %s", string ); 
```

我正在编写一个正则表达式来匹配上面的整个函数调用，它们`%`内部有字符串参数，但如果字符串`END`也在里面，则不应该匹配。

我像这样使用了负前瞻

```
TRACE_BR\(TRACE.*?(?!END)%.* 
```

我希望这个正则表达式只匹配第二个函数调用，但它也匹配第一个。

我想我在贪婪的`*`部分出错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T07:14:59.977

正则表达式应该是：

```
TRACE_BR\(TRACE(?!.*END).*?%.* 
```

如果`END`是出现在 之后的子字符串，则此正则表达式将不匹配该行`TRACE`。如果您想要更精细的匹配，您可能需要修改正则表达式。

您可以将正则表达式视为：在我匹配`TRACE`（以及前面等）之后，从当前位置，我想向前看，我找不到`END`子字符串。

在您的正则表达式中，如果否定前瞻断言之后的字符是`%`，则断言始终为真，因为`END`子字符串不能从那里开始；如果否定前瞻断言之后的字符不是`%`，则正则表达式将无法匹配并回溯。

在您删除 的假设情况下，`%`正则表达式仍将允许带有 END 的字符串通过，因为任何字符的序列都`.*?`将允许否定前瞻匹配沿途的任何位置，并且它只能找到一个位置不是字符串的开头`END`并匹配它。

# java - 什么更高效和紧凑：大量链表变量或包含这些变量的二维数组列表？

> ID：13678454
> 
> 赞同：0
> 
> 时间：2012-12-03T06:49:42.793
> 
> 标签：java

我想创建一个大矩阵（n x n），其中每个元素对应一个 LinkedList（某些对象）。

我可以

1.  创建 n*n 个单独的链表并在 eval() 的帮助下在遍历两个维度（或类似的东西）的循环中命名它们，这样最后我将拥有 LinkedList_1_1、LinkedList_1_2 等。每个都有一个唯一的变量名。基本上，完全跳过矩阵。

2.  创建一个 ArrayList 的 ArrayList，然后将一个链表推入每个元素。

当我想引用单个 LinkedList 时，如果我想节省时间和空间，并且在以后的代码中易于访问，请向我推荐一种方法。方法 1 的访问容易性很差，因为每当我想访问特定的链表时，我都必须使用 eval。

我的直觉告诉我方法 2 是最好的方法，但我究竟如何形成我的初始化呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:51:26.523

既然你知道开始的大小，为什么不直接使用数组呢？不幸的是，Java 泛型阻止数组元素本身成为具体的泛型类型，但您可以使用通配符：

```
LinkedList<?>[][] lists = new LinkedList<?>[n][n]; 
```

或者在*内存*中效率更高，只需一个数组：

```
LinkedList<?>[] lists = new LinkedList<?>[n * n];

// Then for access...
lists[y * n + x] = ...; 
```

然后你需要对每个访问进行强制转换 -`@SuppressWarnings`假设你知道它总是有效的（假设你适当地封装它）。我会把它放在一个地方：

```
@SuppressWarnings("unchecked")
private LinkedList<Foo> getList(int x, int y) {
    if (lists[y][x] == null) {
        lists[y][x] = new LinkedList<Foo>();
    }
    // Cast won't actually have any effect at execution time. It's
    // just to tell the compiler we know what we're doing.
    return (LinkedList<Foo>) lists[y][x];
} 
```

当然，在这两种情况下，*如果*需要，您都需要使用空链表填充数组。（如果几个链表最终没有任何节点，您可能希望只考虑延迟填充它们。）

我*当然*不会生成一个包含数百个变量的类。这将使对列表的编程访问变得非常痛苦，并且在许多方面基本上都是一个坏主意。

# css - CSS滚动太快

> ID：13678455
> 
> 赞同：0
> 
> 时间：2012-12-03T06:49:52.860
> 
> 标签：css

我现在几乎把它收拾好了。只是一件快速的事情，我想知道如何解决。

我有这个帖子评论按钮（它可以完美滚动）但是，即使您甚至没有超过它的意义，它也会滚动得太快。现场示例：

[http://www.krissales.com/#/media/38.Testing-Another-One-Yo](http://www.krissales.com/#/media/38.Testing-Another-One-Yo)

我拥有的 CSS 是这样的：

```
<div style="float:right;position:fixed;right:14%;padding-top:35px;" style="top: 0px;">
      <a href="_lib/forms/comment.php?id=<?php echo $article_id; ?>" class="-button silver" rel="facebox"><span class="-paper">Post Comment</span></a>
 </div> 
```

你们知道我该如何解决这个问题吗？如果你仍然不明白，基本上当我在页面顶部时，我只是滚动一点，“发表评论”栏会移动，我不希望它移动，直到我越过该区域，然后它应该滚动。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:45:57.730

首先，给按钮一个类并删除内联样式，因为这是不好的做法。其次，创建第二个类，当您希望它修复时附加该类。为了更好地理解我的意思，测试以下代码：

html:

```
<div class="box"></div>
<div class="box">
    <div class="testBox">test</div>
</div>
<div class="box"></div> 
```

CSS：

```
.box { height:500px; }
.testBox { background-color:#000000; color:#FFFFFF; width:100px; height:30px; }
.textBoxFixed { position:fixed; top:0; } 
```

javascript:

```
$(function() {
    $(document).scroll(function() {
        var scrollFromTop = $(document).scrollTop();
        if (scrollFromTop >= 500) {
            $('.testBox').addClass('textBoxFixed');
        } else {
            $('.testBox').removeClass('textBoxFixed');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:46:42.170

阅读此[链接](http://www.anthonymclin.com/code/7-miscellaneous/107-jquery-lockscroll-121)，您需要的是 js 和 css 固定和相对位置之间的混合，并在到达顶部`div`时读取（通过 jquery）`div`

# java - Android：在 ListView 中处理 CheckBox

> ID：13678459
> 
> 赞同：0
> 
> 时间：2012-12-03T06:50:14.713
> 
> 标签：java, android, checkbox, android-listview

我正在使用 a`SimpleAdapter`来填充`ListView`下面的代码。

```
 SimpleAdapter adapter = new SimpleAdapter(this,
            saleDriver.getOutstandings(clientId),
            R.layout.outstanding_list_row, new String[] { "sale_id",
                    "sale_date", "invoice_number", "sale_total", },
            new int[] { R.id.tt_check_box, R.id.tt_invoice_date,
                    R.id.tt_invoice_no, R.id.tt_invoice_tot });

    setListAdapter(adapter); 
```

`sale_id`根据上面的代码，我`CheckBox (R.id.tt_check_box)`在`listview`. 当我运行程序时，`checkboxes`复选框右侧显示为文本的值。但我不想显示它们。

我的实际需要是，当用户检查时`checkboxes`，我需要`sale_id`与他们绑定。

我如何通过在我的 java 程序`sale_id`中检查来访问 s 绑定？`checkboxes`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:13:05.530

利用

```
android.R.layout.simple_list_item_multiple_choice 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:16:56.310

覆盖 SimpleAdapter 中的 getView() 函数并使用 sale_id 的值来选中/取消选中复选框。然后将此自定义适配器用于您的列表。

编辑：在查看另一个答案时，我的猜测是您需要多项选择解决方案而不是这个（因为您需要找出选择）。该解决方案更多的是根据现有数据显示复选框。如果您仍然需要这个，请告诉我，一旦我可以访问我的代码，我将发布示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:03:39.780

我附加了代码以获取与多选复选框一起使用的列表视图..

```
public class MultiChoiceActivity extends Activity { 
```

String[] 选择 = { "选择 A", "选择 B", "选择 C", "选择 D", "选择 E"};

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    choiceList = (ListView)findViewById(R.id.list);

    ArrayAdapter<String> adapter
    = new ArrayAdapter<String>(this, 
      android.R.layout.simple_list_item_multiple_choice, 
      choice);
    choiceList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    choiceList.setAdapter(adapter);

} 
```

[参考链接](http://android-er.blogspot.in/2011/09/multi-choice-listview.html)

# javascript - 在 Javascript/jQuery 中播放完声音后刷新页面

> ID：13678460
> 
> 赞同：3
> 
> 时间：2012-12-03T06:50:14.713
> 
> 标签：javascript, jquery, html, audio

难住了，我想在点击按钮清除到localstorage数据的时候有一个纸皱的声音，但是在清除localstorage数据后必须刷新页面才能更新更改，而且刷新是不允许播放音效的. 所以我希望它等到音效完成然后触发刷新。谢谢！

我的 HTML：

```
<audio controls="controls">
    <source src="paper_crumple.mp3" type="audio/mpeg" />
</audio>

<section class="note">

    <h3 id="clear">Clear Note</h3>
    <h1 id="title" contenteditable="true">Note Title</h1>
    <h2 id="date" contenteditable="true">Date Written</h2>
    <p id="note" contenteditable="true">Hello! Click on the note card and start editing!
        <br>
        <br>
        Try refreshing the page, notice that your content stays.
        <br>
        Try closing your browser, shutting your computer off, and then opening it up again.
        <br>It still stays! This is all thanks to the html5 localstorage api.
        <br>
        <br>
        Note that the data will not sync between different browsers, computers, or any other devices such as your mobile phone.
        <br>
        <br>
        This note is responsive! Try adjusting your window size and see how the width adjusts.
        <br>
        Also note that when you get to mobile width, the note adjusts to best take use of the limited space.
        <br>
        <br>
        Tips: You can press ctrl+b for <b>bold</b> text. Similarly you can do the same thing but for <u>underlined</u> or <i>italic text</i>.</p>

</section> 
```

还有我的 JavaScript：

```
 <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
    $(function() {

      var title = document.getElementById('title');

      $(title).blur(function() {
        localStorage.setItem('title', this.innerHTML);
      });

      // when the page loads
      if ( localStorage.getItem('title') ) {
        title.innerHTML = localStorage.getItem('title'); 
      }

      // to reset
      // localStorage.clear();

    });

    $(function() {

      var date = document.getElementById('date');

      $(date).blur(function() {
        localStorage.setItem('date', this.innerHTML);
      });

      // when the page loads
      if ( localStorage.getItem('date') ) {
        date.innerHTML = localStorage.getItem('date'); 
      }

      // to reset
      // localStorage.clear();

    });

    $(function() {

      var note = document.getElementById('note');

      $(note).blur(function() {
        localStorage.setItem('note', this.innerHTML);
      });

      // when the page loads
      if ( localStorage.getItem('note') ) {
        note.innerHTML = localStorage.getItem('note'); 
      }

      // to reset
      // localStorage.clear();

    });

    window.onload = function() {
        var clear = document.getElementById("clear");
        var myaudio = new Audio('paper_crumple.mp3');
        clear.onclick = function() {
            myaudio.play()
            localStorage.clear()    
            // window.location.reload()
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:55:57.537

尝试使用结束事件[http://dev.w3.org/html5/spec/single-page.html#event-media-ended](http://dev.w3.org/html5/spec/single-page.html#event-media-ended)

```
clear.onclick = function() {
    myaudio.play()
    localStorage.clear()    
    myaudio.onended = function () {
        window.location.reload()
    }
} 
```

这基本上是在说-“播放完声音后-重新加载页面”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:04:27.473

对于任何想要解决这个问题的人，我终于让它工作了，所以我想我会与社区分享我的解决方案。

只是给链接一个ID，并使href的内容等于：javascript:void(0);

```
<a href="javascript:void(0);" id="clear">Clear Note</a> 
```

然后我把它放到文件 script.js 文件中：

```
window.onload = function() {

var clear = document.getElementById("clear");
var audioElement = document.createElement('audio');
    audioElement.setAttribute('src', 'paper_crumple.mp3');
    audioElement.setAttribute('preload', 'auto');
    audioElement.setAttribute('onended', 'window.location.reload()');

function playAudio() {
    audioElement.load;
    audioElement.play();
};

clear.onclick = function() {
    localStorage.clear();
    playAudio();
    $("#wrapper").addClass("fadeOutDown");
};

}; 
```

希望这对任何人都有帮助！

# c# - 树结构到字符串表示

> ID：13678464
> 
> 赞同：0
> 
> 时间：2012-12-03T06:50:35.897
> 
> 标签：c#, xml

我正在练习 xml 逻辑，但我对简单的转换有一些问题。

我的结构对象看起来像一个简单的树结构，即具有名称属性的类和`Children`相同类型的集合属性。我想要做的是将此结构转换为简单的字符串表示（xml 节点）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:56:59.317

您可以使用链接到 XML 或手动创建 XDocument 或 XElement。

一些例子：

[http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/creating-and-saving-xml-tree-using-linq-to-xml](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/creating-and-saving-xml-tree-using-linq-to-xml) [http://blogs.msdn.com/b/wriju/archive/2007 /02/20/xlinq-create-xml-from-object-using-linq.aspx](http://blogs.msdn.com/b/wriju/archive/2007/02/20/xlinq-create-xml-from-object-using-linq.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:56:30.710

在子对象中，覆盖 ToString() 方法并简单地遍历集合。

覆盖 ToString() 方法：

```
public override string ToString ()
{
    return this.SomeString;
} 
```

每个对象都会给出它们的描述：

```
foreach (var child in collection) 
{
    xml += child.ToString();
} 
```

您可以通过使用 XmlWriter 并进行更适当的实现甚至对对象使用序列化来更进一步（如果子项表示多个数据项，这可能是一个更好的解决方案）。

（编辑：格式化）

# html - 如何在 html 表单提交上修改图像。图像预加载在 servlet url 上

> ID：13678465
> 
> 赞同：0
> 
> 时间：2012-12-03T06:50:36.130
> 
> 标签：html, ajax, jsp, servlets

我有一个图像 servlet，它基本上在 url 上加载图像模板。我也可以通过 img 标签访问它。

根据我提交表单后的回复，我需要显示此图像以下是我的 ajax 代码的摘录

```
 document.getElementById("outmessage").innerHTML = "<h2><img src=\"${pageContext.request.contextPath}/sort-code-image\"/> </h2>"; 
```

在我将它显示在我的 jsp 页面上之前，我基本上需要修改/绘制这个图像模板。我对如何处理这个问题有点困惑。每当我执行一些业务逻辑时，我是否会修改 servlet 上的图像，还是有更好的方法来做到这一点？

对一些术语表示歉意，因为我对 servlet 和 ajax 有点陌生。

任何输入都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:21:47.800

我们可以使用下面的方法在java脚本中将base64编码的数据写入img src属性，并可以修改图片。

```
var src3="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAUAB0DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1hByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADABAAIRAxEAPwDi677TfhJr99py3UstraPJGHjgmLbwcjhwB8vy5Pc9AQOccDXs9h8ZdKNjD/aNheLebf3ot0Vo8+qksDg9cHp0yeteFho0ZN+1Z+r5zWzClCH1GN9devp9+p5TreiX3h7VJNP1CLZMnIYcrIvZlPcH/EBBFZ1dF408T/8JX4ga+SDyYI4xDCp+8UBJBbtklj06cDnGTztYVFFSajselhJVpUISrq07arzCiiipOgKKKKAP//Z";
document.getElementById("outmessage").innerHTML = "<h2> Image \<img src\= "+src3+" /></h2>"; 
```

当我遇到以下链接中提到的问题时，我也发现了同样的问题

[将图像标签的 src 属性中的变量值设置为 javascript/ajax 中的 base64 编码图像](https://stackoverflow.com/questions/13694234/setting-variable-value-in-src-attribute-of-image-tag-to-a-base64-encoded-image-i)

# android - 如何使用 gson 解析 json 页面？

> ID：13678475
> 
> 赞同：1
> 
> 时间：2012-12-03T06:51:23.327
> 
> 标签：android, json, gson

我有一个大的 json 页面，其中包含 url：http://akhilmadanan.tk/Akhil/database.php。当我使用普通的 json 解析方法解析这个页面时，它显示“OutOfMemoryError”。为此，我听说了 GSON。请任何人帮助我了解如何使用 GSON 从下面的页面读取数据。任何教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:53:10.317

这是一个很好的教程：

[http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

您还可以查看他们的官方用户指南：

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:53:40.793

与其返回所有数据，不如将其分成块？这将在处理时需要更少的内存。

那是假设您可以访问数据库级别/响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:00:37.530

您绝对可以访问其他人提供的有用的链接

简而言之，您可以在 lib 文件夹中添加 GSON 库。并像这样使用。

```
Gson gson=new Gson(); 
```

从 json 中获取对象

```
Model model=gson.fromJson(json,Model.class); 
```

转换为 json

```
String json=gson.toJson(model); 
```

我运行你的代码，有 3010 个对象

```
[
{
"cust_no":"70105615002",
"cust_name":"akhil",
"address":"kajffjkhfhhkjsd",
"area":"58695",
"ranges":"4586",
"plot":"69896",
"multifactor":"85758",
"electricity_meterno":"7895",
"water_meterno":"69358",
"gas_metrno":"78956",
"traffic_code":"4587855",
"last_meter":"58695",
"previous_reading":"25638",
"date":"589687",
"current_usage":"789654",
"current_balance":"45876",
"last_recipt":"236584"
},.... 
```

现在制作一个等效于上述名称的模型，例如

```
@SerializedName("cust_no")
private Long custNo;

@SerializedName("cust_name")
private Long custName;

.......... 
```

记得添加一个相同类类型的列表，例如

```
 @SerializedName("custname")
private List<Customer> customerList; 
```

并生成该 Customer 类的 getter 和 setter；

在这之后

像这样解析你的数据

CustomerModel customerModel=gson.fromJson(json,Customer.class);

您在 customerModel 中获取所有数据；

要访问数据，只需使用该类的列表。

```
List<Customer> customerList=customerModel.getCustomerList();

Log.v("APP_NAME",""+customerList.size()); 
```

# ios - 如何使用 GLKit 将不同的纹理应用于不同的对象？

> ID：13678485
> 
> 赞同：0
> 
> 时间：2012-12-03T06:52:38.717
> 
> 标签：ios, opengl-es, textures, glkit

我在 GLKit 的帮助下显示了 3 个对象。但是，当我将纹理应用到这些对象时，只有一个纹理用于​​所有三个。

我正在使用的代码如下：

```
- (void)setUpGL{

    NSLog(@"i : %d, %d, %d",i,j,k);
    firstPlayerScore = 0;
    secondPlayerScore = 0;
    staticBall = YES;
    isSecondPlayer = NO;

    self.boxPhysicsObjects = [NSMutableArray array];
    self.spherePhysicsObjects = [NSMutableArray array];
    self.immovableBoxPhysicsObjects = [NSMutableArray array];
    self.cylinderPhysicsObjects = [NSMutableArray array];
    self.secondPlayerCylinderPhysicsObjects = [NSMutableArray array];
    self.sphereArray = [NSMutableArray array];

    GLKView *view = (GLKView *)self.view;
    NSAssert([view isKindOfClass:[GLKView class]],@"View controller's view is not a GLKView");

    view.drawableDepthFormat = GLKViewDrawableDepthFormat16;
    view.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
    [EAGLContext setCurrentContext:view.context];

    self.baseEffect = [[GLKBaseEffect alloc] init];

    glEnable(GL_CULL_FACE);
    glEnable(GL_DEPTH_TEST);

    //glGenBuffers(1, &_vertexBuffer);
    //glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    //glBufferData(GL_ARRAY_BUFFER, (i+j)*sizeof(float), sphereVerts, GL_STATIC_DRAW);

    glClearColor(0.5f, 0.5f, 0.5f, 1.0f);

    self.baseEffect.light0.enabled = GL_TRUE;
    self.baseEffect.light0.ambientColor = GLKVector4Make(0.7f, 0.7f, 0.7f, 1.0f);

    [self addImmovableBoxPhysicsObjects];
    [self addRandomPhysicsSphereObject];
    //[self addFirstPlayerCylinderObject];
    //[self addSecondPlayerCylinderObject];
    //[self scheduleAddRandomPhysicsSphereObject:nil];

}

- (void)addRandomPhysicsObject{
   if(random() % 2 == 0)
   {
      [self addRandomPhysicsBoxObject];
   }
   else
   {
      [self addRandomPhysicsSphereObject];
   }
}

- (void)setUpBox{

    CGImageRef image = [[UIImage imageNamed:@"outUV2.PNG"] CGImage];
    textureInfo1 = [GLKTextureLoader textureWithCGImage:image options:nil error:NULL];
    self.baseEffect.texture2d0.name = textureInfo1.name;
    self.baseEffect.texture2d0.enabled = YES;

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer( GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), final_meshVerts);

    glEnableVertexAttribArray(GLKVertexAttribNormal);
    glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), final_meshNormals);

    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 2*sizeof(float), final_meshTexCoords);

    //glDisableVertexAttribArray(GLKVertexAttribTexCoord0);

}

- (void)drawPhysicsBoxObjects{

    //self.baseEffect.texture2d0.target = textureInfo1.target;

    PAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    GLKMatrix4 savedModelviewMatrix = self.baseEffect.transform.modelviewMatrix;

    for(PPhysicsObject *currentObject in self.boxPhysicsObjects){
        self.baseEffect.transform.modelviewMatrix =
        GLKMatrix4Multiply(savedModelviewMatrix,[appDelegate physicsTransformForObject:currentObject]);

        [self.baseEffect prepareToDraw];

        glDrawArrays(GL_TRIANGLES, 0, final_meshNumVerts);
    }

    self.baseEffect.light0.diffuseColor = GLKVector4Make(1.0f, 1.0f, 1.0f, 1.0f);// Alpha

    for(PPhysicsObject *currentObject in self.immovableBoxPhysicsObjects){
        self.baseEffect.transform.modelviewMatrix = GLKMatrix4Multiply(savedModelviewMatrix, [appDelegate physicsTransformForObject:currentObject]);
        [self.baseEffect prepareToDraw];

        glDrawArrays(GL_TRIANGLES,0, final_meshNumVerts);
    }

    self.baseEffect.transform.modelviewMatrix = savedModelviewMatrix;
}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect{
    static float a = 0;
    a = a+0.1;
    //NSLog(@"a : %f",a);
    self.baseEffect.transform.modelviewMatrix = GLKMatrix4MakeLookAt(
                                                                     0, 9.8, 10.0, // Eye position
                                                                     0.0, 1.0, 0.0,  // Look-at position
                                                                     0.0, 1.0, 0.0); // Up direction

    const GLfloat  aspectRatio = (GLfloat)view.drawableWidth / (GLfloat)view.drawableHeight;

   self.baseEffect.transform.projectionMatrix =
   GLKMatrix4MakePerspective(GLKMathDegreesToRadians(35.0f),aspectRatio,0.2f,200.0f); // Far arbitrarily far enough to contain scene

   self.baseEffect.light0.position = GLKVector4Make(0.6f, 1.0f, 0.4f, 0.0f);

   [self.baseEffect prepareToDraw];

   glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    [self drawPhysicsSphereObjects];
    [self drawPhysicsBoxObjects];
    //[self drawPhysicsCylinderObjects];
}

- (void)addRandomPhysicsSphereObject{
    PAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    PPhysicsObject *anObject = nil;

    if([self.spherePhysicsObjects count] < PMAX_NUMBER_BLOCKS)
    {
        NSLog(@"if");
        anObject = [[PPhysicsObject alloc] init];
    }
    else
    {
        NSLog(@"else");
        anObject = [self.spherePhysicsObjects objectAtIndex:0];
        [self.spherePhysicsObjects removeObjectAtIndex:0];
    }

    [self.spherePhysicsObjects addObject:anObject];

    [appDelegate physicsRegisterSphereObject:anObject
                                    position:GLKVector3Make(0,3.5,-2)
                                        mass:0.0f];
    [self setUpSphere];

    /*[appDelegate physicsSetVelocity:GLKVector3Make(
     random() / (float)RAND_MAX * 2.0f - 1.0f,
     0.0f,
     random() /(float)RAND_MAX * 2.0f - 1.0f)
     forObject:anObject];*/
}

- (void)setUpSphere{

    CGImageRef image = [[UIImage imageNamed:@"basketball.png"] CGImage];
    textureInfo = [GLKTextureLoader textureWithCGImage:image options:nil error:NULL];

    self.baseEffect.texture2d0.name = textureInfo.name;
    self.baseEffect.texture2d0.enabled = YES;

    glEnableVertexAttribArray( GLKVertexAttribPosition);
    glVertexAttribPointer( GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), newbasketballVerts);

    glEnableVertexAttribArray(GLKVertexAttribNormal);
    glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), newbasketballNormals);

    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 2*sizeof(float), newbasketballTexCoords);

    //glDisableVertexAttribArray(GLKVertexAttribTexCoord0);

}

- (void)drawPhysicsSphereObjects{
    NSLog(@"draw");
    /*static int x = 1;
     if (x>20) {
     x=20;
     }
     matrix = GLKMatrix4Identity;
     matrix = GLKMatrix4MakeTranslation(0.1 * (x++), 0.0, 0.0);*/
    //self.baseEffect.texture2d0.target = textureInfo2.target;

    PAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    GLKMatrix4 savedModelviewMatrix = self.baseEffect.transform.modelviewMatrix;

    /*CGImageRef image = [[UIImage imageNamed:@"basketball.png"] CGImage];
     GLKTextureInfo *textureInfo = [GLKTextureLoader textureWithCGImage:image options:nil error:NULL];

     self.baseEffect.texture2d0.name = textureInfo.name;
     self.baseEffect.texture2d0.target = textureInfo.target;*/

    self.baseEffect.light0.diffuseColor = GLKVector4Make(1.0f, 1.0f, 1.0f, 1.0f);
    //glVertexPointer(3, GL_FLOAT, 0, sphereVerts);
    //glNormalPointer(GL_FLOAT, 0, sphereNormals);
    //glTexCoordPointer(2, GL_FLOAT, 0, final meshTexCoords);

    /*glGenBuffers(1, &ballVertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, ballVertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(MeshVertexData), MeshVertexData, GL_STATIC_DRAW);

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(arrowVertexData), 0);
    glEnableVertexAttribArray(GLKVertexAttribNormal);
    glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_TRUE, sizeof(arrowVertexData), (void *)offsetof(arrowVertexData, normal));
    glBindVertexArrayOES(arrowVertexArray);*/

    //glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    //glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 2*sizeof(float), newbasketballTexCoords);
    if (!isSecondPlayer) {
        for(PPhysicsObject *currentObject in self.spherePhysicsObjects)
        {NSLog(@"first");
            self.baseEffect.transform.modelviewMatrix =
            GLKMatrix4Multiply(savedModelviewMatrix, [appDelegate physicsTransformForObject:currentObject]);
            [self.baseEffect prepareToDraw];

            glDrawArrays(GL_TRIANGLES,  0, newbasketballNumVerts);
            //glDrawArrays(GL_TRIANGLES, 0, sizeof(MeshVertexData) / sizeof(arrowVertexData));
        }
    }
    else{
        for(PPhysicsObject *currentObject in self.secondSpherePhysicsObjects)
        {
            self.baseEffect.transform.modelviewMatrix =
            GLKMatrix4Multiply(savedModelviewMatrix, [appDelegate physicsTransformForObject:currentObject]);
            [self.baseEffect prepareToDraw];

            glDrawArrays(GL_TRIANGLES,  0, newbasketballNumVerts);
            //glDrawArrays(GL_TRIANGLES, 0, sizeof(MeshVertexData) / sizeof(arrowVertexData));
        }
    }
    //glBindBuffer(GL_ARRAY_BUFFER, 0);
    //glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);

    //glDisableVertexAttribArray(GLKVertexAttribTexCoord0);
    self.baseEffect.transform.modelviewMatrix = savedModelviewMatrix;
} 
```

为什么这三个只使用一个纹理，而不是三个不同的纹理，每个对象一个？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T04:33:23.050

要制作多个纹理，您需要执行以下操作：

```
effect.texture2d0.name = firstTexture.name;
[effect prepareToDraw];  
[self renderFirstObject];

effect.texture2d0.name = secondTexture.name;
[effect prepareToDraw];
[self renderSecondObject]; 
```

或类似的东西。如果您有很多对象，我建议使用纹理图集，然后使用以下方法进行批量渲染：

glDrawElements（GL_TRIANGLES，totalIndicies，GL_UNSIGNED_SHORT，索引）；

我尝试对每个对象使用 glDrawArray，我的应用程序的帧速率下降到 10fps。

在您的代码中，它为所有对象使用 1 个纹理的原因是因为您从未将 effect.texture2d0.name 更改为每个对象之前需要的纹理。如果我要更改您的代码，它将是：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect{
     static float a = 0;
     a = a+0.1;
     //NSLog(@"a : %f",a);
     self.baseEffect.transform.modelviewMatrix = GLKMatrix4MakeLookAt(
                                                                 0, 9.8, 10.0, // Eye position
                                                                 0.0, 1.0, 0.0,  // Look-at position
                                                                 0.0, 1.0, 0.0); // Up direction

     const GLfloat  aspectRatio = (GLfloat)view.drawableWidth / (GLfloat)view.drawableHeight;

     self.baseEffect.transform.projectionMatrix =
     GLKMatrix4MakePerspective(GLKMathDegreesToRadians(35.0f),aspectRatio,0.2f,200.0f); // Far arbitrarily far enough to contain scene

     self.baseEffect.light0.position = GLKVector4Make(0.6f, 1.0f, 0.4f, 0.0f);

     [self.baseEffect prepareToDraw];

     glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

     self.baseEffect.texture2d0.name = textureInfo.name;
     [self.baseEffect prepareToRender];
     [self drawPhysicsSphereObjects];
     self.baseEffect.texture2d0.name = textureInfo1.name;
     [self.baseEffect prepareToRender];
     [self drawPhysicsBoxObjects];
     //[self drawPhysicsCylinderObjects];
 } 
```

当然，这是简化它，并且没有顶点属性数组设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T15:10:59.160

我已经实现了月球绕地球移动的场景。地球和月球的不同纹理。在GLKit框架下，代码如下：

```
-(void)viewDidLoad
{
     //......
    // Setup Earth texture  
CGImageRef earthImageRef =  
[[UIImage imageNamed:@"Earth512x256.jpg"] CGImage];  

earthTextureInfo = [GLKTextureLoader  
                    textureWithCGImage:earthImageRef  
                    options:[NSDictionary dictionaryWithObjectsAndKeys:  
                             [NSNumber numberWithBool:YES],  
                             GLKTextureLoaderOriginBottomLeft, nil nil]  
                    error:NULL];  

// Setup Moon texture  
CGImageRef moonImageRef =  
[[UIImage imageNamed:@"Moon256x128.png"] CGImage];  

moonTextureInfo = [GLKTextureLoader  
                   textureWithCGImage:moonImageRef  
                   options:[NSDictionary dictionaryWithObjectsAndKeys:  
                            [NSNumber numberWithBool:YES],  
                            GLKTextureLoaderOriginBottomLeft, nil nil]  
                   error:NULL];  
//...... 
```

}

然后，画地球和月亮。

```
- (void)drawEarth  
{  
//setup texture
self.baseEffect.texture2d0.name = earthTextureInfo.name;  
self.baseEffect.texture2d0.target = earthTextureInfo.target;  

//  
GLKMatrixStackPush(self.modelviewMatrixStack);  

GLKMatrixStackRotate(   // Rotate (tilt Earth's axis)  
                     self.modelviewMatrixStack,  
                     GLKMathDegreesToRadians(SceneEarthAxialTiltDeg),  
                     1.0, 0.0, 0.0);  
GLKMatrixStackRotate(   // Rotate about Earth's axis  
                     self.modelviewMatrixStack,  
                     GLKMathDegreesToRadians(earthRotationAngleDegrees),  
                     0.0, 1.0, 0.0);  

self.baseEffect.transform.modelviewMatrix =  
GLKMatrixStackGetMatrix4(self.modelviewMatrixStack);  

//draw earth  
[self.baseEffect prepareToDraw];  

glBindVertexArrayOES(_vertexArray);  
glDrawArrays(GL_TRIANGLES, 0, sphereNumVerts);  

//pop 
GLKMatrixStackPop(self.modelviewMatrixStack);  

self.baseEffect.transform.modelviewMatrix =  
GLKMatrixStackGetMatrix4(self.modelviewMatrixStack); 
```

}

```
- (void)drawMoon  
{  

self.baseEffect.texture2d0.name = moonTextureInfo.name;  
self.baseEffect.texture2d0.target = moonTextureInfo.target;  

GLKMatrixStackPush(self.modelviewMatrixStack);  

GLKMatrixStackRotate(   // Rotate to position in orbit  
                     self.modelviewMatrixStack,  
                     GLKMathDegreesToRadians(moonRotationAngleDegrees),  
                     0.0, 1.0, 0.0);  
GLKMatrixStackTranslate(// Translate to distance from Earth  
                        self.modelviewMatrixStack,  
                        0.0, 0.0, SceneMoonDistanceFromEarth);  
GLKMatrixStackScale(    // Scale to size of Moon  
                    self.modelviewMatrixStack,  
                    SceneMoonRadiusFractionOfEarth,  
                    SceneMoonRadiusFractionOfEarth,  
                    SceneMoonRadiusFractionOfEarth);  
GLKMatrixStackRotate(   // Rotate Moon on its own axis  
                     self.modelviewMatrixStack,  
                     GLKMathDegreesToRadians(moonRotationAngleDegrees),  
                     0.0, 1.0, 0.0);  
// 
self.baseEffect.transform.modelviewMatrix =  
GLKMatrixStackGetMatrix4(self.modelviewMatrixStack);  

//draw moon  
[self.baseEffect prepareToDraw];  

glBindVertexArrayOES(_vertexArray);  
glDrawArrays(GL_TRIANGLES, 0, sphereNumVerts);  

GLKMatrixStackPop(self.modelviewMatrixStack);  

self.baseEffect.transform.modelviewMatrix =  
GLKMatrixStackGetMatrix4(self.modelviewMatrixStack);  

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:27:22.647

我为这个问题所做的一件事是我制作了一张包含所有纹理的图像......现在我只给我的 GLKBaseEffect 对象提供一个纹理。

但是，如果有人在 GLKit 的帮助下对具有多个纹理的多个对象有答案，请告诉我......

谢谢你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T17:54:01.110

一种解决方案是将绘图调用分开，以便首先绘制所有使用纹理 A 的对象，然后绘制所有使用纹理 B 的对象，依此类推。

这里还描述了纹理图集替代方案：[https](https://stackoverflow.com/a/8230592/64167) ://stackoverflow.com/a/8230592/64167 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-09T00:32:44.443

我正在学习更多的OpenGL ES，我可能有办法做到这一点。

就我而言，我有 N 个四边形，每个四边形都有一个单独的纹理。在我要绘制的每个四边形的 [view drawInRect] 中，我在绘制每个四边形之前在 baseEffect 上设置了新的纹理属性，然后在 BaseEffect 和四边形上调用 prepareToDraw，然后渲染四边形。

这是我的意思的一些伪代码：

```
for (int i = 0; i < quads.count; i++) {
    baseEffect.texture2d0.name = textureInfo[i].name;
    baseEffect.texture2d0.target = textureInfo[i].target;
    [baseEffect prepareToDraw];
    [quads[i] prepareToDraw];
    glDrawArrays(GL_TRIANGLES, 0, 4);
} 
```

到目前为止，这对我来说还可以。

# c# - 当我在 GridView 中使用 DateFormatString {0:#,#.##} 时如何显示值 0

> ID：13678486
> 
> 赞同：0
> 
> 时间：2012-12-03T06:52:39.363
> 
> 标签：c#, asp.net, gridview

我有一个网格视图，其中我将 DateFormatString {0:#,#.##} 用于一列。如果列的值为 0，则它没有显示任何值你能帮我解决这个问题吗？

这是我的代码

```
 <asp:BoundField DataField="CummPV" HeaderText="Cumm-PV" SortExpression="cummPV" DataFormatString="{0:#,#.##}" ItemStyle-HorizontalAlign="Right" ItemStyle-VerticalAlign="Bottom" HeaderStyle-HorizontalAlign="Left" HeaderStyle-VerticalAlign="Bottom"/>
            <asp:BoundField DataField="cummEV" HeaderText="Cumm-EV" SortExpression="cummEV" DataFormatString="{0:#,#.##}" ItemStyle-HorizontalAlign="Right" ItemStyle-VerticalAlign="Bottom" HeaderStyle-HorizontalAlign="Left" />
            <asp:BoundField DataField="cummDelay" HeaderText="Cumm-Delay" SortExpression="cummDelay" DataFormatString="{0:#,#.##}" ItemStyle-HorizontalAlign="Right" ItemStyle-VerticalAlign="Bottom" HeaderStyle-HorizontalAlign="Left" HeaderStyle-VerticalAlign="Bottom" />
            <asp:BoundField DataField="SPI1" HeaderText="SPI-1" SortExpression="SPI1" DataFormatString="{0:F3}" ItemStyle-HorizontalAlign="Right" ItemStyle-VerticalAlign="Bottom" HeaderStyle-HorizontalAlign="Left" HeaderStyle-VerticalAlign="Bottom" />
            <asp:BoundField DataField="SPI2" HeaderText="SPI-2" SortExpression="SPI2" DataFormatString="{0:F3}" ItemStyle-HorizontalAlign="Right" ItemStyle-VerticalAlign="Bottom" HeaderStyle-HorizontalAlign="Left" HeaderStyle VerticalAlign="Bottom" /> 
```

对于 CummDelay 列，它会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:24:24.947

向我们发出在第一个数字位置使用`#`占位符的问题 - # 不打印数字（如果为零或不存在）。使用 0 代替强制数字。

例如，使用格式字符串作为`{0:#,0.##}`- 这将为 0 值打印 0。

另一种方法是使用 3 部分格式表达式 - 部分由分隔`;`- 第一个用于 +ve 值，第二个用于 -ve，最后一个用于零值。这样您就可以控制您希望打印的内容为零值。例如，您可以使用诸如`{0:#,#.##;#;Zero}`打印`Zero`0 值的表达式。

有关所有详细信息，请参阅文档 - [http://msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

# sql-server - 在数据库中的记录中搜索特殊字符

> ID：13678491
> 
> 赞同：2
> 
> 时间：2012-12-03T06:52:47.273
> 
> 标签：sql-server, ssms

我在 SQL Server 中有一个数据库，里面有 100 个表。

我需要编写一个查询来解析所有 100 个表中所有列中的所有行并返回具有特殊字符的行`%,#`。

如何编写一个解析所有表中所有行的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:10:46.077

也许不是那么微妙的解决方案，但很实用：

```
USE TSQL2012
GO

DECLARE @ColumnName VARCHAR (50)
DECLARE @TableName VARCHAR (50)
DECLARE @SchemaName VARCHAR (50)
DECLARE @SQLQuery NVARCHAR (200)

DECLARE findSpecialCharacters CURSOR
FOR 
    SELECT c.name, o.name, s.name from sys.columns c
        INNER JOIN sys.objects o ON c.object_id = o.object_id
        INNER JOIN sys.schemas s ON o.schema_id = s.schema_id
    WHERE o.type = 'U'
OPEN findSpecialCharacters
FETCH NEXT FROM findSpecialCharacters
INTO @ColumnName, @TableName, @SchemaName
WHILE @@FETCH_STATUS = 0    
BEGIN
    SET @SQLQuery = 
        'SELECT ' + @ColumnName + ', * FROM ' + 
            @SchemaName + '.' + @TableName + 
        ' WHERE (' + @ColumnName + ' LIKE ' + 
            CHAR(39) + CHAR(37) + '[,]' + CHAR(37) + CHAR(39) + ') OR (' + 
         @ColumnName + ' LIKE ' + 
            CHAR(39) + CHAR(37) + '[#]' + CHAR(37) + CHAR(39) + ') OR (' + 
         @ColumnName + ' LIKE ' + 
            CHAR(39) + CHAR(37) + '[%]' + CHAR(37) + CHAR(39) + ')'

    PRINT 'Table: ' + @TableName + '; Column: ' + @ColumnName
    PRINT @SQLQuery
    EXEC sp_executesql @SQLQuery

    FETCH NEXT FROM findSpecialCharacters
    INTO @ColumnName, @TableName, @SchemaName
END
CLOSE findSpecialCharacters
DEALLOCATE findSpecialCharacters 
```

首先，我正在搜索所有表中的所有列，并将结果集放入`FOR SELECT`游标语句中。如果表有五列，那么我的游标将创建五个不同的结果集，具体取决于哪一列是 WHERE 过滤器。

但是，为了区分正在搜索的列，我简单地将该列作为选择列表中的第一个。

# php - 日期转换问题 - 使用 jS F, Y

> ID：13678492
> 
> 赞同：1
> 
> 时间：2012-12-03T06:52:49.877
> 
> 标签：php, date, strtotime

希望有人可以回答这个问题。

运行这段代码：

```
$date = "2nd January, 2013"; 
echo date("Y-m-d",strtotime($date)); 
```

返回：

```
2012-01-02. 
```

这显然是不正确的（或者至少是我希望的结果）

现在基于一些在线研究，这可能会随着时间的推移而传递，而不是年份。有没有办法管理这个，或者你必须以美国格式提供日期才能正确返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:28:13.767

根据 PHP[可接受的日期字符串格式](http://php.net/manual/en/datetime.formats.date.php)，逗号仅在**Textual 月、日和年**格式中可接受：`m ([ .\t-])* dd [,.stndrh\t ]+ y`

所以你必须要么切换月份和日期的位置，要么去掉逗号：

```
echo date("Y-m-d",strtotime("2nd January, 2013")); //outputs "2012-01-02"
echo date("Y-m-d",strtotime("2nd January 2013")); //outputs "2013-01-02"
echo date("Y-m-d",strtotime("January 2nd, 2013")); //outputs "2013-01-02" 
```

[键盘粘贴](http://codepad.org/cOflYyd0)

我**猜**第一个语句返回 2012 的原因是因为逗号后面的字符被忽略了，所以字符串实际上被视为`2nd January`，然后假设当前年份。

# asp.net - 获取连接到服务器的在线用户的名称

> ID：13678493
> 
> 赞同：2
> 
> 时间：2012-12-03T06:52:50.393
> 
> 标签：asp.net, signalr, global-asax

我是 asp.net 的新手。我已经完成了这个[**`link`**](http://www.aspdotnetfaq.com/Faq/How-to-show-number-of-online-users-visitors-for-ASP-NET-website.aspx)，它展示了如何计算使用 asp.net 连接到服务器的在线用户。（*当我尝试时它正在工作*）

我的问题是：我应该在该代码（Global.asax）中进行什么更改，以便它显示所有连接用户的名称，而不是计算它们。

我创建了一个聊天应用程序，它将连接用户的名称存储`chatUsername`在`js`文件中的一个变量中，如下所示：

**js文件**

```
 var chatUsername = window.prompt("Enter Username:", "");
   //
   chat.client.addMessage =  //Function
   //
   chat.server.send(chatUsername); 
```

**.aspx.cs 文件**

```
//Using SignalR (I think this doesnt matter)
public class Chat : Hub
{
    public void Send(string from)
    {
        // Call the addMessage method on all clients    
        Clients.All.addMessage(from);
    }
} 
```

**[你可以在这里](https://github.com/venkateshwar/SignalR-Chat-application)**找到我的完整代码

编辑：请提供一个仅与`asp.net`或相关的简单示例`signalr`（没有其他技术，如 MVC）

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:51:29.850

显然，您正在使用[Signal-R](http://signalr.net/) - 所以尝试在 java 脚本本身中跟踪在线用户（即连接的客户端）的状态。使用`Connected/Disconnected/Reconnected`服务器端事件向所有客户端广播 - 来自[文档](https://github.com/SignalR/SignalR/wiki/Hubs)：

```
public class Chat : Hub
{
    public override Task OnConnected()
    {
        return Clients.All.joined(Context.ConnectionId, DateTime.Now.ToString());
    }

    public override Task OnDisconnected()
    {
        return Clients.All.leave(Context.ConnectionId, DateTime.Now.ToString());
    }

    public override Task OnReconnected()
    {
        return Clients.All.rejoined(Context.ConnectionId, DateTime.Now.ToString());
    }
} 
```

全局服务器端存储（例如 - 静态字典）可用于根据连接 ID 存储状态 - 这样，此字典可以为用户提供所需的连接 ID。例如，

```
// dis-claimer: untested code - just to give the idea/hint/outline
public class Chat : Hub
{
    // change to use Concurrent Dictionary (or do thread-safe access)
    static Dictionary<string, User> _users = new Dictionary<string, User>()

    // call from client when it goes online
    public void Join(string name)
    {
       var connId = this.Context.ConnectionId;
       __users.Add(connId, new User(connId, name));
    }

    public override Task OnConnected()
    {
        return Clients.All.joined(_users[Context.ConnectionId], DateTime.Now.ToString());
    }

    public override Task OnDisconnected()
    {
        var user = _users[Context.ConnectionId];
        _users.Remove(Context.ConnectionId);
        return Clients.All.leave(user, DateTime.Now.ToString());
    }

    public List<User> GetUsers()
    {
       return _users.Values.ToList()
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:17:54.460

编辑：以下代码指的是 SignalR v0.5，不是最新的 1.0Alpha2，但我相信推理是一样的

为此，您需要在服务器和客户端中向 SignalR 连接过程中添加几个步骤：

在服务器端：

1.  例如，在应用程序启动时，您可以实例化一个静态内存存储库（可以是 的字典），它将作为用户存储库来存储所有当前连接的用户。
2.  在集线器中，您需要处理 Disconnect 事件（当用户断开连接时，也需要从用户存储库中删除）并通知所有其他客户端该用户已断开连接
3.  在集线器中，您需要添加两个新方法（名称可以是您想要的任何名称），这将帮助客户端连接到系统并获取当前连接的用户列表：
    1.  GetConnectedUsers() 只返回连接用户的集合
    2.  Joined() 集线器将创建一个新用户，使用存储在往返状态（客户端选择的用户名）和 SignalR 连接 ID 中的信息，并将新创建的用户添加到内存存储库中。

在客户端：首先您需要实例化与您的服务器端集线器相关的 javascript 对象

```
var chat = $.connection.chat;
chat.username = chatUsername; 
```

然后实现集线器将调用的所有函数并最终连接到集线器：

```
 // Step 1: Start the connection
    // Step 2: Get all currenlty connected users
    // Step 3: Join to the chat and notify all the clients (me included) that there is a new user connected
    $.connection.hub.start()
                .done(function () {
                    chat.getConnectedUsers()
                                .done(/*display your contacts*/);
                                    });
                                }).done(function () {
                                    chat.joined();
                                });
                });
}); 
```

如果你问为什么我们需要添加一个像“chat.joined()”这样的阶段，是因为在 Hub 上处理连接事件的方法中，往返状态尚不可用，因此 hub 无法检索到用户选择的用户名。

无论如何，我发表了一篇博文，更详细地展示了如何使用 Asp.Net MVC 创建一个基本的 SignalR 聊天 Web 应用程序，它可以在以下位置获得：http: [//thewayofcode.wordpress.com/2012/07/24/chatr-只是另一个聊天应用程序使用信号/](http://thewayofcode.wordpress.com/2012/07/24/chatr-just-another-chat-application-using-signalr/)

在帖子中，您还将找到一个指向发布源代码的 github 存储库的链接。我希望这有帮助。

瓦莱里奥

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:02:23.890

我认为这应该对你有用：-

```
 void Application_Start(object sender, EventArgs e)
     {
        // Code that runs on application startup
        Application["OnlineUsers"] = 0;
        List<string> list = new List<string>();
     }
      //First check if it is Authenticated request:-
      void Session_Start(object sender, EventArgs e)
     {
      if(Request.IsAuthenticated)
      list.Add(User.Identity.Name);
       //your rest of code .......
     } 
```

list 将返回您所有在线的用户名：-

# iphone - 应用程序处于后台时，应用程序委托中未调用 didReceiveLocalNotification 方法 [iOS6]

> ID：13678499
> 
> 赞同：5
> 
> 时间：2012-12-03T06:53:11.970
> 
> 标签：iphone, ios, ipad, ios6, uilocalnotification

我添加了一个本地通知，它也通过在 iOS6 上显示横幅和在 iOS5 中显示警报来触发。

但是在 iOS6 中，应用程序委托中的**“didReceiveLocalNotification”**方法没有被调用。

**当应用程序在后台**时，我如何知道发生了通知？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T07:03:07.403

它永远不会在后台被调用。当您的应用程序处于前台时，它将被调用。

检查[UIApplicationDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)链接以获取更多信息

# iphone - 滚动到 tableView 末尾后重新加载具有更多内容的 TableView 数据

> ID：13678503
> 
> 赞同：1
> 
> 时间：2012-12-03T06:53:25.333
> 
> 标签：iphone, objective-c, xcode, uitableview

我在如何在表格视图中重新加载数据方面遇到困难，例如，我正在从服务获得响应，直到计数 10。现在，如果计数大于 10，我需要获取额外的数据并将该数据重新加载到表格视图中。为了获得更多数据，我需要实施服务。任何人都可以在这方面提供帮助。希望了解我的问题，如果有任何错误，请见谅。感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:52:43.727

在您设置行的以下委托中，添加额外的一行

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return yourMutableArray.count+1;
} 
```

以下委托告诉您当前正在创建哪个单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

在此您可以添加一个检查条件，例如

```
if(indexPath.row > yourMutableArray.count)
{

  // This means you are at the end of your table
  // Call your webservice here and append the next set of data into the yourMutableArray
  // You can also show an activity indicator over the extra cell here, Indicating the loading of new data
   [self performSelector:@selector(getDataFromWebservice) withObject:nil afterDelay:1.0];
}
else
{
  // Do your cell settings here
} 
```

在您的代码中某处您正在检查您的网络服务是否成功，添加以下行以重新加载表格

```
[yourTable reloadData]; 
```

确保将新数据附加到 MutableArray 中，否则表将仅显示来自 web 服务的最新数据。希望对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:11:28.417

你可以在这里看到你的“加载更多”是如何`UITableView`工作的

[http://www.cocoacontrols.com/platforms/ios/controls/stableviewcontroller](http://www.cocoacontrols.com/platforms/ios/controls/stableviewcontroller)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:38:14.097

当 cellForRowAtIndexPath 中的 count 大于 10 时，nil service Array，重新初始化它并添加来自服务调用的新数据值，然后重新加载 tableView。我想这会对你有所帮助。如果你还有问题。告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:21:55.903

非常感谢您的所有回答，他们也为我提供了其他方面的帮助。我通过为 tableview 添加页脚视图来解决这个问题，在页脚视图上我添加了按钮，最后在按钮操作中我调用了服务以获取更多数据，然后数据将在 [tableView reloadData 的帮助下重新加载新数据] 方法。希望这可能有助于其他人在这种情况下。

# .net - 当我移动到 RDLC 报告的第二页时，货币符号发生了变化

> ID：13678506
> 
> 赞同：1
> 
> 时间：2012-12-03T06:54:06.527
> 
> 标签：.net, c#-4.0, rdlc

我创建了一个 RDLC 报告并从后面的代码绑定数据集。
报告查看器中有`more than 2 pages`。我已经设置了货币格式并`Symbol as 'Rs'`在我的系统的*区域和语言选项*中。
我的报告已成功加载，所有字段的货币符号为**'Rs'**，​​但是当我通过光标向下移动或将页码更改为另一页时，货币符号自动变为**美元（$）**符号。
如果我希望卢比（Rs）作为报告中的货币符号，我不知道这怎么可能以及如何解决？请帮忙！！！提前致谢。

**注意：**当我在 pdf 文档中导出报告时，它会在所有页面中显示货币符号 $。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:14:19.380

尝试这个：

占位符属性->设置数字和日期格式选项

![在此处输入图像描述](../Images/bc07c1ef024c5f02a2ea13eded25279d.png)

![在此处输入图像描述](../Images/693c272dcdd5191e641db3e90cea05c1.png)

检查这个：

根据您的区域要求设置“语言”报告属性。

[rdlc 报告中的数字或货币](http://www.tyrodeveloper.com/2012/04/number-or-currency-in-rdlc-report.html)

[为报表添加样式和格式](http://msdn.microsoft.com/en-us/library/ms252080%28v=vs.90%29.aspx)

# javascript - jQuery数据表显示隐藏

> ID：13678507
> 
> 赞同：0
> 
> 时间：2012-12-03T06:54:10.453
> 
> 标签：javascript, jquery, html, datatable

我为我的表使用了数据表脚本。在这里，我显示了产品列表。

下面是表格的 html 代码（对于这个表格，我也应用了数据表脚本）

```
 <table width="100%" border="0" cellspacing="0" cellpadding="0" id="example" class="hovertable menuclass display">
        <thead>
        <th width="13%" style="padding-left:3px;">Actions</th>
        <th width="21%">Name</th>
        <th width="12%">col2</th>
        <th width="18%">col3</th>
        <th width="10%">col4</th>
        <th width="7%">col5</th>
        <th width="10%">col6</th>
        <th width="5%" class="last">col7</th>
        </thead>

        <tr  >
        <td align="left" valign="top" style="width:95px;"><img src="images/minus_icon.png" alt="" border="0">  </td>

        <td align="left" valign="top">name1</td>
        <td align="left" valign="top">val</td>
        <td align="left" valign="top">
        value</td>
        <td align="left" valign="top">tetse</td>
        <td align="center" valign="top">test</td>
        <td align="right" valign="top">test</td>
        <td align="center" valign="top" class="last">241</td>
        </tr>   
        <tr  >
        <td align="left" valign="top" style="width:95px;"><img src="images/minus_icon.png" alt="" border="0">  </td>

        <td align="left" valign="top">name2</td>
        <td align="left" valign="top">val</td>
        <td align="left" valign="top">
        value</td>
        <td align="left" valign="top">tetse</td>
        <td align="center" valign="top">test</td>
        <td align="right" valign="top">test</td>
        <td align="center" valign="top" class="last">241</td>
        </tr>         

        </table> 
```

我的表格行外观是这样的

![在此处输入图像描述](../Images/321a212e67970480f8edc1020001d1fc.png)

当我单击“-”图像时，该行将被隐藏并显示为

![在此处输入图像描述](../Images/25229d3719ec34f1d2faf6e252b24195.png)

如果我单击撤消链接，则应再次显示相应的行。

我使用以下代码隐藏特定行。

```
$('.hdrow').live('click', function(){
   $(this).closest('tr').toggle();
}); 
```

**请参考小提琴[http://jsfiddle.net/2F2E5/2/](http://jsfiddle.net/2F2E5/2/)**

我不知道如何实现这一点。请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:24:27.527

单击减号尝试此操作隐藏最近的行并保留一个 td 以显示隐藏的消息。

```
// Live is depreciated use new `on` method.
$(document).on('click','.minusSign',function(){
    $(this).closest('tr').children().hide();
    $(this).closest('tr').find('td.message').show();
    // Assuming td.message is another table data with 'Product name is now hidden `undo`'
}); 
```

并单击撤消隐藏消息`td`并显示该行。

```
$(document).on('click','td.message a.undu',function(e){
    e.preventDefault();
    $(this).closest('tr').children().show();
    $(this).closest('td.message').hide(); // Here `this` is undo link
}); 
```

这应该足够快。

# java - Cassandra 的新手 - SliceQuery 给出错误 Not Enough bytes to read component 0 的值

> ID：13678513
> 
> 赞同：3
> 
> 时间：2012-12-03T06:54:31.890
> 
> 标签：java, cassandra, thrift, hector

我在尝试使用 2 列的复合键查询列族 (CF) 时遇到问题：`comment_key`和`prattle_key`.

这是CF的定义：

```
CREATE TABLE comments (
  comment_key text,
  prattle_key text,
  parent_key text,
  depth int,
  author text,
  date_created timestamp,
  body text,
  PRIMARY KEY (comment_key, prattle_key)
) WITH
  comment='' AND
  caching='KEYS_ONLY' AND
  read_repair_chance=0.100000 AND
  gc_grace_seconds=864000 AND
  replicate_on_write='true' AND
  compaction_strategy_class='SizeTieredCompactionStrategy' AND
  compression_parameters:sstable_compression='SnappyCompressor'; 
```

这是我的Java代码：

```
Composite key = new Composite();
key.addComponent(prattleKey, StringSerializer.get());
key.addComponent(commentKey, StringSerializer.get());

SliceQuery<Composite, String, String> query = HFactory.createSliceQuery(keyspace, CompositeSerializer.get(), StringSerializer.get(), StringSerializer.get());

query.setColumnFamily("comments").setKey(key).setColumnNames("parent_key", "body", "depth", "date", "author");

QueryResult<ColumnSlice<String, String>> queryResult = query.execute();
ColumnSlice<String, String> cs = queryResult.get(); 
```

我收到以下错误消息：

```
InvalidRequestException(why:Not enough bytes to read value of component 0) 
```

使用命令行 CQL 实用程序，我可以很好地选择 ColumnFamily 中的所有 3 行，所以我知道那里有数据。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T23:46:40.033

使用复合主键时，第一个键用作行（或分区）键，其余主键用作非键列的列标题的一部分。例如，在您的情况下，CQL 列正文的列名是由 prattle_key 值和字符串“body”的值组成的复合值。这也意味着一个列族行可以包含多个 CQL 行，它们都具有相同的 comment_key 值但不同的 prattle_key 值。

我认为你得到的错误来自这样一个事实，你试图处理一个只有 comment_key 的 rowkey 值，它的复合类型有两个组件。更改您的键值，使其只是 comment_key 并查找返回的第一个组件等于 prattle_key 值的列名。

# php - 即使会话没有空闲，会话垃圾收集器也会运行吗？

> ID：13678521
> 
> 赞同：1
> 
> 时间：2012-12-03T06:55:12.730
> 
> 标签：php

我在 php.ini 中设置：

```
session.gc_probability = 100
session.gc_divisor     = 100
session.gc_maxlifetime = 1040 
```

因此可以确定会话垃圾收集器将在 1040 秒后运行。但我想知道的是：即使用户在创建会话后没有空闲，这个会话垃圾收集器是否也会运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:00:32.167

每次用户访问应用程序时，会话文件年龄将重置为零。所以它至少会在接下来的 1040 秒内存活。

# three.js - 三.js材质纹理和颜色

> ID：13678523
> 
> 赞同：4
> 
> 时间：2012-12-03T06:55:24.027
> 
> 标签：three.js

我尝试使用 three.js 为汽车模型制作材料，其中汽车的基色可以动态更改。通过更改我正在使用的 MeshPhongMaterial 的颜色属性，这很容易。然后我需要在顶部应用纹理，并认为通过将图像添加到材质的贴图属性就很容易了。结果不是我所期望的，地图/纹理图像也被颜色属性设置的颜色着色。我希望它基本上覆盖基色。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:58:16.503

这是一个完整的脚本块。读完三.js后立即插入

```
<script>
THREE.ShaderChunk.map_fragment = [
    "#ifdef USE_MAP",
        "vec4 texelColor = texture2D( map, vUv ); /* NEWWW */",
        "#ifdef GAMMA_INPUT",
        "texelColor.xyz *= texelColor.xyz;",
        "#endif",
        "gl_FragColor.rgb = mix(gl_FragColor.rgb,texelColor.rgb,texelColor.a);",
        "vec3 surfDiffuse = mix(diffuse,vec3(1,1,1),texelColor.a);",
    "#else",
        "vec3 surfDiffuse = diffuse;",
    "#endif"].join('\n');
// now replace references to 'diffuse' with 'surfDiffuse'
THREE.ShaderChunk.lights_phong_fragment = 
    THREE.ShaderChunk.lights_phong_fragment.replace(/\bdiffuse\b/gm,'surfDiffuse')
THREE.ShaderLib.phong.fragmentShader = [
    "uniform vec3 diffuse;",
    "uniform float opacity;",
    "uniform vec3 ambient;",
    "uniform vec3 emissive;",
    "uniform vec3 specular;",
    "uniform float shininess;",
    THREE.ShaderChunk[ "color_pars_fragment" ],
    THREE.ShaderChunk[ "map_pars_fragment" ],
    THREE.ShaderChunk[ "lightmap_pars_fragment" ],
    THREE.ShaderChunk[ "envmap_pars_fragment" ],
    THREE.ShaderChunk[ "fog_pars_fragment" ],
    THREE.ShaderChunk[ "lights_phong_pars_fragment" ],
    THREE.ShaderChunk[ "shadowmap_pars_fragment" ],
    THREE.ShaderChunk[ "bumpmap_pars_fragment" ],
    THREE.ShaderChunk[ "normalmap_pars_fragment" ],
    THREE.ShaderChunk[ "specularmap_pars_fragment" ],
    "void main() {",
        "gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",
        THREE.ShaderChunk[ "map_fragment" ],
        THREE.ShaderChunk[ "alphatest_fragment" ],
        THREE.ShaderChunk[ "specularmap_fragment" ],
        THREE.ShaderChunk[ "lights_phong_fragment" ],
        THREE.ShaderChunk[ "lightmap_fragment" ],
        THREE.ShaderChunk[ "color_fragment" ],
        THREE.ShaderChunk[ "envmap_fragment" ],
        THREE.ShaderChunk[ "shadowmap_fragment" ],
        THREE.ShaderChunk[ "linear_to_gamma_fragment" ],
        THREE.ShaderChunk[ "fog_fragment" ],
    "}"
].join('\n');
</script> 
```

了解了有关three.js phong 材料的一些知识——它不能以我想要的方式处理突出显示，但是......无论如何。如果您需要更多复杂性，我建议您改用 ShaderMaterial。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:36:33.467

为此，您将需要一个自定义着色器——以及一个带有 alpha 通道的纹理（本质上是一种 DDS 格式）。如果您查看 three.js 源代码，您会看到一些名为“map_fragment”的片段着色器代码，如下所示：

```
 "#ifdef USE_MAP",

        "#ifdef GAMMA_INPUT",

            "vec4 texelColor = texture2D( map, vUv );",
            "texelColor.xyz *= texelColor.xyz;",

            "gl_FragColor = gl_FragColor * texelColor;",

        "#else",

            "gl_FragColor = gl_FragColor * texture2D( map, vUv );",

        "#endif",

    "#endif" 
```

如您所见，它将您的纹理贴图乘以颜色（此时位于“gl_FragColor”中）。相反，听起来您希望您的地图覆盖在基色之上，只是您已经绘制了它（例如，镀铬保险杠和前灯）。

一个简单的方法可能是在实例化任何 phong 材质之前更改“phong”的工作方式，方法是更改​​“map_fragment”字符串的值。

而不是“gl_FragColor * (something)”——尝试将此作为重新分配 THREE.ShaderChunk.map_fragment：

```
 [

    "#ifdef USE_MAP",

        "vec4 texelColor = texture2D( map, vUv );",

        "#ifdef GAMMA_INPUT",

            "texelColor.xyz *= texelColor.xyz;",

        "#endif",

        "gl_FragColor = vec4(mix(gl_FragColor.rgb,texelColor.rgb,texelColor.a),(gl_FragColor.a*texelColor.a));",

    "#endif"

].join('\n'); 
```

以这种方式覆盖 stock 方法的危险在于它将应用于场景中的所有模型——绘制的纹理将覆盖材质颜色。如果没问题，你就完成了。否则，您应该创建一个类似于“phong”的新 THREE.ShaderMaterial，除了此处引用的不同之处。

# c# - C# 反射——加载外部 DLL 和所有依赖项

> ID：13678528
> 
> 赞同：2
> 
> 时间：2012-12-03T06:55:40.237
> 
> 标签：c#, reflection, dependency-injection, system.reflection

我正在尝试使用反射为.NET 完成（似乎是）一个极其简单的依赖注入机制。目标是为 ServiceFactory 类提供接口，并使用反射来确定该接口的可用实现者，并根据 App.config 部分选择实现。听起来很简单。

我选择的路线是使用每个服务实现项目的构建后事件将实现 .dll 复制到“ServiceImplementations”文件夹中。然后，ServiceFactory 类在此文件夹中查找可用的、有效的接口实现者。这个想法是，使用反射，我应该能够在运行时纯粹在反射中加载这个任意 DLL 及其所有依赖项。这是我希望达到的目标。

在这个过程中的某个地方，我很好地加载了这些依赖项。我可以使用 var asmDomainAssemblies = AppDomain.CurrentDomain.GetAssemblies() 检查我当前加载的程序集

因此，我继续进行反射爬网，最终加载了依赖程序集（在本例中为 EntityFramework，通过 NuGet 加载，以及 System.Web.ApplicationServices，一个系统文件）。一切都很好。直到我到达这行代码：

```
 var serviceImplementationAssembly = CheckLoadedAssemblies(assemblyName);  // This function loads the service implementation assembly and its dependencies
        var appDomainAsm = AppDomain.CurrentDomain.GetAssemblies();
        var implementationTypes = serviceImplementationNamespace.GetTypes();      // Exception here 
```

在最后一行代码中，抛出了 ReflectionTypeLoadException。此异常包含两个 LoaderExceptions（每个都是 FileNotFoundException），并带有以下消息：

```
 Could not load file or assembly 'EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified.":"EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

这很奇怪。如果我检查上面的 asmDomainAsm 变量，我可以看到该确切的程序集签名*已*加载到我当前的 AppDomain 中。我不明白为什么 Reflection 不能识别这些是相同的程序集，即使我在不​​同时间加载它们。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:14:48.330

我终于让它工作了。本质上，我试图手动处理 AssemblyResolve 事件，方法是加载每个程序集，检查其依赖关系，并随时触发 Assembly.Load 和 Assembly.LoadFile 事件。当我添加一个 CurrentDomain_AssemblyResolve 事件时，该事件在触发时运行我的自定义目录搜索/程序集加载代码，一切正常。

由于一些内部 AppDomain / BundleContext 问题，引发了异常。切换到 AssemblyResolve 解决了我的问题。不幸的是，这就是我所知道的一切。如果有人可以在这里解释幕后发生的事情，我将接受答案。

# php - 点击按钮增加/减少 1 px 的 div 大小

> ID：13678530
> 
> 赞同：-5
> 
> 时间：2012-12-03T06:55:48.753
> 
> 标签：php, jquery

我用窗户 PVC 和门 PVC 产品制作了一个网站。我想用计算器制作订单页面。它正在工作，但我现在需要为窗口的配置设置动画。（例如：[http](http://orasvirtual.ro/images/a.JPG) : //orasvirtual.ro/images/a.JPG）所以，默认窗口大小是 250 像素高度和 350 像素宽度。我做了4个按钮：（例如： http: [//orasvirtual.ro/images/b.JPG](http://orasvirtual.ro/images/b.JPG)）增加高度，减少高度，增加宽度和减少宽度。到目前为止，我已经做了这个，但是如何增加/减少按住 x 秒的点击。

谢谢大家

好的，直到现在我已经做到了，感谢 NullPointer：

html:

```
<div  id='divid'>div</div>
<button id="inch" >+ h</button>
<button id="dech" >- h</button>
<button id="incw" >+ w</button>
<button id="decw" >- w</button> 
```

jQuery：

```
$("#inch").click(function(){

var height = $("#divid").height()+1; //to decrease just -1 instead of 1

$("#divid").height( height );
})
$("#dech").click(function(){

var height = $("#divid").height()-1; //to decrease just -1 instead of 1

$("#divid").height( height );
})
$("#incw").click(function(){

var width= $("#divid").width()+1; //to decrease just -1 instead of 1

$("#divid").width( width );
})
$("#decw").click(function(){

var width= $("#divid").width()-1; //to decrease just -1 instead of 1

$("#divid").width( width );
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:05:18.810

您无法更改`window`对象的宽度/高度，但可以更改`body`元素的宽度和高度。

```
$('#increaseWidth').click(function(){
    $('body').width(function(i, w){
       return w + 1
    })
})

$('#decreaseHeight').click(function(){
    $('body').height(function(i, h){
       return h - 1
    })
}) 
```

[http://jsfiddle.net/HsHj8/](http://jsfiddle.net/HsHj8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:00:14.697

如果窗口元素是`$(window)`使用下面的代码

增加宽度：

```
$(window).width($(window).width() + 1 + "px") 
```

减小宽度：

```
$(window).width($(window).width() - 1 + "px") 
```

增加高度：

```
$(window).height($(window).height() + 1 + "px") 
```

降低高度：

```
$(window).height($(window).height() - 1 + "px") 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:06:25.047

在大多数情况下，您不能这样做。

**从来源：**

从 Firefox 7 开始，网站不再可能根据以下规则更改浏览器中窗口的默认大小：

1.  您无法调整不是由 window.open 创建的窗口或选项卡的大小。
2.  当窗口或选项卡位于具有多个选项卡的窗口中时，您无法调整其大小。

对于某些受支持的浏览器，您可以使用以下方法来调整浏览器窗口的大小。

```
window.resizeTo(w,h); 
```

# c# - SMTP 命令序列错误。服务器响应是：您必须先进行身份验证（#5.5.1）

> ID：13678533
> 
> 赞同：3
> 
> 时间：2012-12-03T06:56:03.300
> 
> 标签：c#, smtp, email

我正在尝试使用某个程序向我的一些同事发送电子邮件。该程序在我自己的桌面上运行良好，但出现错误

错误的命令顺序。服务器响应是：您必须先进行身份验证（#5.5.1）

在我们位于远程位置的一台服务器上。有人可以指出我试图更改身份验证行位置的错误。而且我无法从错误中推断出太多。两个位置都使用相同的用户名和密码。

```
public static Boolean sendemail(String strFrom, string strTo, string strCC, string strBCC, string strReplyTO, string strSubject, string strBody, string strAttachmentPath, bool IsBodyHTML)
    {
        //Array arrToArray;
        //char[] splitter = { ';' };
        //arrToArray = strTo.Split(splitter);
        MailMessage mm = new MailMessage();
        bool flag = isEmailsString(strFrom);
        if (flag)
        {
            mm.From = new MailAddress(strFrom);
        }
        flag = isEmailsString(strTo);
        if (flag)
        {
            mm.To.Add(strTo);
        }
        flag = isEmailsString(strCC);
        if (flag)
        {
            mm.CC.Add(strCC);
        }
        flag = isEmailsString(strBCC);
        if (flag)
        {
            mm.Bcc.Add(strBCC);
        }

        flag = Regex.IsMatch(strReplyTO.Trim(), @"^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$");
        if (strReplyTO != null)
        {
            if (flag)
            {
                mm.ReplyTo = new MailAddress(strReplyTO);
            }
        }

        if (strSubject != null)
        {
            mm.Subject = strSubject;
        }
        mm.IsBodyHtml = IsBodyHTML;
        if (!string.IsNullOrEmpty(strAttachmentPath))
        {
            Array attachmentArray;
            char[] attachSplitter = { ',' };
            attachmentArray = strAttachmentPath.Split(attachSplitter);
            foreach (string s in attachmentArray)
            {
                string st = s.Trim();
                if (!string.IsNullOrEmpty(st))
                {
                    Attachment attach = new Attachment(st);
                    // Add the file attachment to this e-mail message.
                    mm.Attachments.Add(attach);
                    //strBodyFinal.Append(Environment.NewLine+"Go to the following link for more information"+Environment.NewLine);
                    //strBodyFinal.Append(st);
                }
            }
        }
        if (strBody != null)
        {
            mm.Body = strBody;
        }
        //foreach (string s in arrToArray)
        // {
        //     mm.To.Add(new MailAddress(s));
        // }
        SmtpClient smtp = new SmtpClient();
        try
        {
            System.Net.NetworkCredential NetworkCred = new System.Net.NetworkCredential();
            NetworkCred.UserName = "my user name";
            NetworkCred.Password = "my password";
            smtp.Credentials = NetworkCred;
            smtp.Host = "my company mail site";//host of your mail account
            //smtp.EnableSsl = true;

            smtp.UseDefaultCredentials = false;
            smtp.Port = 2525;//port no of your mail account 
            smtp.Timeout = 500000;
            smtp.Send(mm);
            return true;

        }
        catch (Exception ex)
        {
            mm.Dispose();
            smtp = null;
            Console.WriteLine(ex.Message, ex.StackTrace);
            return false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T12:22:14.430

我对这个问题进行了很多搜索，并为错误消息找到了不同的解释，例如：**在 BDAT 命令之后发出的 MAIL 命令，**所以它说**Bad sequence of commands**。但实际上，当我将上面的代码更改为

```
SmtpClient smtp = new SmtpClient();
smtp.UseDefaultCredentials = false; // <<<you need THIS
System.Net.NetworkCredential NetworkCred = new System.Net.NetworkCredential();
NetworkCred.UserName = "my user name";
NetworkCred.Password = "my password";
smtp.Credentials = NetworkCred;
smtp.Host = "my company mail site";//host of your mail account
smtp.Port = 2525;//port no of your mail account 
smtp.Timeout = 500000;
smtp.Send(mm); 
```

请注意，在分配新凭据之前`UseDefaultCredentials`设置为。这种设置默认顺序的更改对我来说神奇地起作用。`false``Credentials``false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T15:53:31.890

只是为了记录网络解决方案 SMTP 似乎需要小写的用户名。 **为什么？只是因为，这就是原因。**

希望它有帮助..我花了很长时间才弄清楚..

美国新罕布什尔州帕特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-02T15:44:49.737

如果您尝试从不同的服务器（可能来自您的`localhost`）发送邮件，则会出现此错误，因此如果您想测试`smtp mail`代码，则需要**将代码上传到远程服务器并测试**（`plesk server`在我的情况下）然后它将工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-12T17:43:05.557

@puneet 提到的答案`smtp.UseDefaultCredentials = false`让我们走上了正确的道路。

但我们的情况略有不同。我们也遇到了错误`Bad sequence of commands. The server response was: You must authenticate first (#5.5.1)`，但它只发生在使用 ASP.NET Membership 内置的密码恢复 Web 部件重置密码时。

密码恢复 Web 部件依赖于一个`web.config`名为的部分，`<mailSettings>`因此我们更改`defaultCredentials="true"`为`defaultCredentials="false"``web.config`

```
<mailSettings>
<smtp deliveryMethod="Network" from="donotreply@someone.net">
    <network defaultCredentials="false" host="mail.someone.net" userName="notifier@someone.net" password="password" port="587" />
</smtp> 
```

这解决了密码重置的错误。基本上，这与@puneet 相同，但在不同的位置。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-08T08:36:10.607

```
System.Net.Mail.SmtpClient mailClient = new System.Net.Mail.SmtpClient(System.Configuration.ConfigurationSettings.AppSettings["smtp"]);                

//code by cv 8july2014
mailClient.UseDefaultCredentials = false; // <<<you need THIS
System.Net.NetworkCredential NetworkCred = new System.Net.NetworkCredential();
NetworkCred.UserName = "username";
NetworkCred.Password = "Pasword";
mailClient.Credentials = NetworkCred;
//   mailClient.Host = "my company mail site";//host of your mail account
mailClient.Port = 2525;

// mailMsg = null;
//SmtpMail.SmtpServer = System.Configuration.ConfigurationSettings.AppSettings["smtp"];

while (counter < 3)
{
    try
    {
        mailClient.Send(mailMsg);        
        Thread.Sleep(2000);
        counter = 3;
        mailMsg = null;
    }
    catch (Exception ex)
    {
        counter = counter + 1;
        if (counter == 2)
        {
            throw ex;
            counter = 0;
        }
    }
} 
```

# c# - 允许用户更改数据网格视图的列顺序

> ID：13678536
> 
> 赞同：1
> 
> 时间：2012-12-03T06:56:10.920
> 
> 标签：c#

我正在使用 Win 表单，并且有一个数据绑定 DataGridView，它有大约 31 列。

AllowUserToOrderColumn 设置为 true。但由于列数为 31，因此用户很难将列从一端移动到另一端。

所以我想创建一个表单，它将显示 datagridview 的所有列，并通过单击向上向下按钮允许它们更改顺序。我已将我的文本框（只读）从 textbox0 命名为 textbox30。

有什么方法可以在文本框中显示列顺序。

就像我们在设计器视图中单击 EditColumns 时一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:59:36.163

当然：

查看列的 DisplayIndex -> [http://msdn.microsoft.com/en-us/library/wkfe535h.aspx](http://msdn.microsoft.com/en-us/library/wkfe535h.aspx)

有了这个，您应该能够阅读它们并通过代码更改它们。

# emacs - 安装 emacs 自动完成模式的最佳方法

> ID：13678537
> 
> 赞同：9
> 
> 时间：2012-12-03T06:56:14.190
> 
> 标签：emacs

我想为 emacs 安装自动完成模式。

当我搜索存储库（果酱等）时，我发现了以下包 ac-dabbrev 和 ac-ja。在谷歌上搜索 ac-dabbrev，它似乎最后一次更新是在 2009 年 -

> [http://emacswiki.org/emacs/ac-dabbrev.el](http://emacswiki.org/emacs/ac-dabbrev.el)

在安装自动完成模式的说明中，在 emacs wiki 中，它指向一个下载链接 -

> [http://cx4a.org/pub/auto-complete/auto-complete-1.3.1.zip](http://cx4a.org/pub/auto-complete/auto-complete-1.3.1.zip)

我应该如何通过包 ac-dabbrev 或从上面的链接下载它来安装自动完成模式？还是有更新的包？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T07:19:39.600

所有新的 Emacses 都带有`package.el`简化 3rd 方包的安装。 `auto-complete`并且`ac-dabbrev`可以从 M [ELPA 包存储库](http://melpa.milkbox.net/)中获得。阅读MELPA 网站上的[安装说明](http://melpa.milkbox.net/#installing)，或详细了解[`package.el`/ELPA](http://emacswiki.org/emacs/ELPA)

# python - TypeError ("不支持的操作数类型 /: 'instance' 和 'float'"

> ID：13678546
> 
> 赞同：1
> 
> 时间：2012-12-03T06:56:57.223
> 
> 标签：python, zope

我正在使用 python/Zope 进行开发。目前我正在将日期对象格式化为文件之一中的格式“%m-%d-%Y”。代码如下所示

```
if resultSet :
   for eachResult in resultSet :
      DateTime(eachResult['txntime']).strftime("%m-%d-%Y") 
```

这会触发以下错误：

```
 File "Script (Python)", line 37, in CronJobFindUnmatchedTransfer_v2_1

 File "/opt/zope-2.7/lib/python/DateTime/DateTime.py", line 750, in __init
   s,d = _calcSD(t)
 File "/opt/zope-2.7/lib/python/DateTime/DateTime.py", line 331, in _calcSD
   d = dd / 86400.0 
```

我对此没有任何想法。有人请帮帮我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T07:16:52.753

您正在将一个值传递给该类*不*`DateTime()`支持的构造函数。不过，您传入的内容尚不清楚。

 *在 Zope 中，当它报告异常的回溯（将其写入日志，将其传递到错误视图）时，它会`__traceback_info__`在打印每个堆栈时包含具有名称的任何局部变量。这用于在记录的异常中包含调试信息。

使用它来跟踪您传递给的值`DateTime()`：

```
if resultSet:
   for eachResult in resultSet:
      __traceback_info__ = (eachResult['txntime'],)
      DateTime(eachResult['txntime']).strftime("%m-%d-%Y") 
```

在前台模式下运行 Zope（`bin/instance fg`或`zopectl fg`，取决于您拥有的版本以及它的安装方式），并观察被转储到 stderr 的回溯。它将有一个额外的行，其值`eachResult['txntime']`包含在回溯中。*

# objective-c - 如何使用拆分大小下载文件-Objective C

> ID：13678549
> 
> 赞同：1
> 
> 时间：2012-12-03T06:57:00.063
> 
> 标签：objective-c, xcode, ios5, xcode4.5

我正在使用 PHP 链接从服务器下载视频文件。

```
url1 = [NSURL URLWithString:@"http://example.com:80/server/filedownload.php?action=download&filename=file.3gp&&split=0.56907272338867"]; 
```

所以这是我正在使用的拆分。该文件正在下载，但文件大小仅为 4kB。如何下载完整的文件以及下载完成后如何组合拆分以制作完整的视频文件。

# javascript - 如何使用javascript获取当前页面

> ID：13678553
> 
> 赞同：0
> 
> 时间：2012-12-03T06:57:12.700
> 
> 标签：javascript

是否有可能我可以使用 javascript 获取当前页面？

例如，如果我进入子页面的主页，我将得到字符串名称，`index.php`或者如果我进入关于页面，我可以获得`about.php`.

我试试这段代码： `window.location.pathname`

但我在我的子域中得到了这个作为回报。 `/directory/new/index.php`和`/directory/new/about.php`

有人知道我的案子吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:17:49.380

```
window.location.pathname.split("/").pop(); 
```

对于 /directory/new/index.php，split("/") 将返回 [,"directory","new","index.php"]，pop() 将返回最后一个元素 index.php。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:02:07.237

`window.location.href`或者`top.location.href` 您将获得此页面的“http://stackoverflow.com/questions/13678553/how-to-get-the-current-page-using-javascript”。

```
`var url=window.location.href.split('/');
变量名称=url [url.length-1]；`

```

名称是 index.php 或 about.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:59:31.767

试试这个

```
window.location.href 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:59:37.240

试试这个：**[document.URL](http://www.w3schools.com/jsref/prop_doc_url.asp)**

```
document.URL 
```

或 **[window.location.href](http://www.w3schools.com/jsref/prop_loc_href.asp)**

```
window.location.href 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T07:01:40.160

我不认为你可以直接得到你想要的，试试这样：

```
var segments = window.location.pathname.split('/');
var result = segments[segments.length - 1]; 
```

以下是有关当前问题 url 的数据：

```
hash: "#13678603"
host: "stackoverflow.com"
hostname: "stackoverflow.com"
href: "http://stackoverflow.com/questions/13678553/how-to-get-the-current-page-using-javascript/13678603#13678603"
origin: "http://stackoverflow.com"
pathname: "/questions/13678553/how-to-get-the-current-page-using-javascript/13678603"
port: ""
protocol: "http:" 
```

# java - 无法从服务调用主 Activity

> ID：13678557
> 
> 赞同：0
> 
> 时间：2012-12-03T06:57:24.117
> 
> 标签：java, android, service, android-activity, main-activity

在键盘服务中我无法启动主要活动：

```
public void onKey(int primaryCode, int[] keyCodes) 
    Log.d(TAG, primaryCode + " PrimaryCode to send");
    if (primaryCode == 6) {
        Intent intent = new Intent(this, MainActivity.class);
        startActivity(intent);
        Log.d(TAG, primaryCode + " Greating is command");
    } 
```

结果，弹出一个错误

日志猫：

```
12-03 10:46:07.613: E/InputEventReceiver(2776): Exception dispatching input event.
12-03 10:46:07.613: E/MessageQueue-JNI(2776): Exception in MessageQueue callback: handleReceiveCallback
12-03 10:46:07.613: E/MessageQueue-JNI(2776): android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
12-03 10:46:07.613: E/MessageQueue-JNI(2776):   at android.app.ContextImpl.startActivity(ContextImpl.java:944)
12-03 10:46:07.613: E/MessageQueue-JNI(2776):   at android.app.ContextImpl.startActivity(ContextImpl.java:931)
12-03 10:46:07.613: E/MessageQueue-JNI(2776):   at android.content.ContextWrapper.startActivity(ContextWrapper.java:284)
12-03 10:46:07.613: E/MessageQueue-JNI(2776):   at sample.stand.Keyb.onKey(Keyb.java:162) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:04:20.913

在 logCat 中，他建议使用`FLAG_ACTIVITY_NEW_TASK`flag ，因此请尝试以下操作：

```
if (primaryCode == 6) {
    Intent intent = new Intent(this, MainActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
    Log.d(TAG, primaryCode + " Greating is command");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:07:17.927

改变`Manifest.xml`从

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

作为

```
 <intent-filter>
            <action android:name="android.intent.action.MAINACTIVITY" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

并从您的 Intent 中调用，...

```
 Intent intent = new Intent("android.intent.action.MAINACTIVITY");
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
        startActivity(intent); 
```

试试这个..

# c# - 动态类型和视图

> ID：13678558
> 
> 赞同：1
> 
> 时间：2012-12-03T06:57:25.707
> 
> 标签：c#, asp.net-mvc, entity-framework

我有几个活动：电影、表演、体育赛事和其他。最初我想为事件类型创建基类（事件）和单独的类：电影类，运动类....
但是，许多类是空的，因为它们没有特定的字段。因此，我决定创建一个类`Event`和单独的类`EventType`。并为一个类中的所有事件创建所有字段：

```
public class Event
{
   public string Name { get; set; }
   public string Description { get; set; }
   public string Duration { get; set; }
   public string DirectorList { get; set; }
   public string ActorList { get; set; }
   public string Genre { get; set; }

   public EventType Type {get; set;}
   ...
}

public class EventType
{
   public string Name {get; set;}
} 
```

但是某些类型的事件可能没有某些字段。例如，体育赛事没有`ActorList`或`DirectorList`。我决定在控制器的动作中确定事件的类型并显示适当的视图。假设我们有七种事件类型和七种视图。在 CMS 中，用户想要添加新的事件类型，但此事件类型的视图不是由我创建的。

如何允许用户创建新的事件类型并为该类型生成视图？

PS。你觉得我的数据库设计怎么样？
谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:06:14.077

您应该在此处使用继承来定义仅具有基本属性的 Event 类：

```
public class Event
{
   public string Name { get; set; }
   public string Description { get; set; }
} 
```

然后创建另一个类：

```
public class FilmEvent : Event
{
   public string ActorList { get; set; }
   public string DirectorList { get; set; }
} 
```

现在可以从类本身推断类型。

# android - 同一布局中的两个活动？

> ID：13678563
> 
> 赞同：0
> 
> 时间：2012-12-03T06:58:09.873
> 
> 标签：android, android-activity, fragment

这似乎是愚蠢和初学者的问题。但是我可以在同一个布局中有两个活动吗？

所以我的`main.xml`布局是这样的：

```
<LinearLayout>
    <MapView>
    <ListView>
</LinearLayout> 
```

我有一`MapActivity`堂课已经太长了。所以我计划创建一个`ListActivity`处理内容的新类`ListView`。

我听说我们可以使用`Fragment`，但在阅读文档后，它似乎用于处理同一活动中的两个布局。与我需要的相反。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:59:41.517

您*不能让多个 Activity*并行运行。您可以使用`MapActivity`with`ListView`作为内容控件。

```
public class MapList extends MapActivity {

ListView mListView;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.layoutfile);
        mListView =(ListView)findViewById(R.id.listviewid);
    }
} 
```

*注意：一个可以在同一个 Activity 中使用多个 ListView 控件。*

# android - 如何使用 Android 项目访问整个 HTML 项目？

> ID：13678565
> 
> 赞同：1
> 
> 时间：2012-12-03T06:58:31.857
> 
> 标签：android, html, android-webview

我的任务是在我的 android 项目中访问整个 HTML 项目（使用 CSS 等）。任何人都可以帮助我吗？我用谷歌搜索了它，但我发现的只是“Webview”，我已经知道了。

我想知道我可以将 CSS 文件、html 文件放在我的 Android 项目中的什么位置以及如何管理整个 HTML 项目？（即从一页转换到另一页等）如果您知道这一点，请向我推荐一些好的文档或教程。如果 webview 是唯一的方法，我如何从一个页面切换到另一个页面？因为我只知道使用

```
myWebView.loadUrl(Uri.fromFile(www.website.com); 
```

我还设法从 sdcard 加载了一个 html 文件。

```
myWebView.loadUrl(Uri.fromFile(
                new File(Environment.getExternalStorageDirectory()
                        .getAbsolutePath() + File.separator + "index.html"))
                .toString()); 
```

但我不明白我如何才能进行整个项目！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:26:29.257

您肯定需要使用 webView 。

为此，您可以将整个 HTML（css、js、html）放在资产文件夹中，并像在 webview 中加载本地 index.html 一样。

```
webView.loadUrl("file:///android_asset/html/index.html"); 
```

并且 webview 将加载整个本地站点。.css 和 js 将由 webview 直接处理，即使超链接也可以使用。

您还可以自定义 webview 并监听 js 调用以制作混合应用程序。但这仅适用于混合应用程序。

希望这有帮助。

# php - MYSQL + PHP - 2 个 MySQL 表，其中填充了 1-300 行。一张表有 298 个，另一张有 300 个。显示缺失值？

> ID：13678586
> 
> 赞同：0
> 
> 时间：2012-12-03T07:00:10.543
> 
> 标签：php, mysql, numbers, find

我认为标题很简单，但基本上我有 2 个保存各种信息的 mysql 表。将它们链接在一起是一个唯一的 ID。

其中一张表显示的总行数比另一张少 2 行。我想遍历这些行并找出缺少哪些 id 值。我对 mysql 的了解还不够，不能说仅使用 mysql 是不可能的，但我认为使用 php 会更容易。

所以像这样的东西真的很糟糕：

```
if ($stmt = $link->prepare("
    SELECT i.id AS itemsId, c.item_id AS catsId
    FROM items i
    INNER JOIN item_categories c
    WHERE i.id = c.item_id
"))
{
    $stmt->execute();
    $stmt->bind_result($id1, $id2);
    $stmt->close();
}
while ($stmt->fetch())
{
    *run through the numbers and echo which numbers are missing out of 1 to 300.*
} 
```

有人对我如何完成这样的事情有任何想法吗？

任何意见，建议或信息将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T07:04:22.773

```
SELECT id FROM items WHERE id NOT IN (SELECT item_id FROM item_categories); 
```

# android - How to create slide layout animation in Android?

> ID：13678595
> 
> 赞同：6
> 
> 时间：2012-12-03T07:00:32.853
> 
> 标签：android, android-layout, animation

![enter image description here](../Images/f8dadfdcdce42a29f5376dd17af5a7cb.png)

Hi, I want to create a slide animation in My Activity like shown in Images. when I click `More` button the Orange layout should come up like slider over the white lay out and when I click `Less` button it should go down like slider.

please suggest me any sample code or any tutorial for best way to create such an Approach.

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:15:54.683

Use this `Panel class` this will fulfil your requirement and you can also handle the event.

Reference : [http://code.google.com/p/android-misc-widgets/](https://web.archive.org/web/20130927102946/http://code.google.com/p/android-misc-widgets/)

Panel.java

```
public class Panel extends LinearLayout {

    /**
     * Callback invoked when the panel is opened/closed.
     */
    public static interface OnPanelListener {
        /**
         * Invoked when the panel becomes fully closed.
         */
        public void onPanelClosed(Panel panel);
        /**
         * Invoked when the panel becomes fully opened.
         */
        public void onPanelOpened(Panel panel);
    }

    private boolean mIsShrinking;
    private int mPosition;
    private int mDuration;
    private boolean mLinearFlying;
    private int mHandleId;
    private int mContentId;
    private View mHandle;
    private View mContent;
    private Drawable mOpenedHandle;
    private Drawable mClosedHandle;
    private float mTrackX;
    private float mTrackY;
    private float mVelocity;

    private OnPanelListener panelListener;

    public static final int TOP = 0;
    public static final int BOTTOM = 1;
    public static final int LEFT = 2;
    public static final int RIGHT = 3;

    private enum State {
        ABOUT_TO_ANIMATE,
        ANIMATING,
        READY,
        TRACKING,
        FLYING,
    };
    private State mState;
    private Interpolator mInterpolator;
    private GestureDetector mGestureDetector;
    private int mContentHeight;
    private int mContentWidth;
    private int mOrientation;
    private float mWeight;
    private PanelOnGestureListener mGestureListener;
    private boolean mBringToFront;

    public Panel(Context context, AttributeSet attrs) {
        super(context, attrs);
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Panel);
        mDuration = a.getInteger(R.styleable.Panel_animationDuration, 750);     // duration defaults to 750 ms
        mPosition = a.getInteger(R.styleable.Panel_position, BOTTOM);           // position defaults to BOTTOM
        mLinearFlying = a.getBoolean(R.styleable.Panel_linearFlying, false);    // linearFlying defaults to false
        mWeight = a.getFraction(R.styleable.Panel_weight, 0, 1, 0.0f);          // weight defaults to 0.0
        if (mWeight < 0 || mWeight > 1) {
            mWeight = 0.0f;
            //Log.w(TAG, a.getPositionDescription() + ": weight must be > 0 and <= 1");
        }
        mOpenedHandle = a.getDrawable(R.styleable.Panel_openedHandle);
        mClosedHandle = a.getDrawable(R.styleable.Panel_closedHandle);

        RuntimeException e = null;
        mHandleId = a.getResourceId(R.styleable.Panel_handle, 0);
        if (mHandleId == 0) {
            e = new IllegalArgumentException(a.getPositionDescription() + 
                    ": The handle attribute is required and must refer to a valid child.");
        }
        mContentId = a.getResourceId(R.styleable.Panel_content, 0);
        if (mContentId == 0) {
            e = new IllegalArgumentException(a.getPositionDescription() + 
                    ": The content attribute is required and must refer to a valid child.");
        }
        a.recycle();

        if (e != null) {
            throw e;
        }
        mOrientation = (mPosition == TOP || mPosition == BOTTOM)? VERTICAL : HORIZONTAL;
        setOrientation(mOrientation);
        mState = State.READY;
        mGestureListener = new PanelOnGestureListener();
        mGestureDetector = new GestureDetector(mGestureListener);
        mGestureDetector.setIsLongpressEnabled(false);

        // i DON'T really know why i need this...
        setBaselineAligned(false);
    }

    /**
     * Sets the listener that receives a notification when the panel becomes open/close.
     *
     * @param onPanelListener The listener to be notified when the panel is opened/closed.
     */
    public void setOnPanelListener(OnPanelListener onPanelListener) {
        panelListener = onPanelListener;
    }

    /**
     * Gets Panel's mHandle
     * 
     * @return Panel's mHandle
     */
    public View getHandle() {
        return mHandle;
    }

    /**
     * Gets Panel's mContent
     * 
     * @return Panel's mContent 
     */
    public View getContent() {
        return mContent;
    }

    /**
     * Sets the acceleration curve for panel's animation.
     * 
     * @param i The interpolator which defines the acceleration curve 
     */
    public void setInterpolator(Interpolator i) {
        mInterpolator = i; 
    }

    /**
     * Set the opened state of Panel.
     * 
     * @param open True if Panel is to be opened, false if Panel is to be closed.
     * @param animate True if use animation, false otherwise.
     *
     * @return True if operation was performed, false otherwise.
     * 
     */
    public boolean setOpen(boolean open, boolean animate) {
        if (mState == State.READY && isOpen() ^ open) {
            mIsShrinking = !open;
            if (animate) {
                mState = State.ABOUT_TO_ANIMATE;
                if (!mIsShrinking) {
                    // this could make flicker so we test mState in dispatchDraw()
                    // to see if is equal to ABOUT_TO_ANIMATE
                    mContent.setVisibility(VISIBLE);
                }
                post(startAnimation);
            } else {
                mContent.setVisibility(open? VISIBLE : GONE);
                postProcess();
            }
            return true;
        }
        return false;
    }

    /**
     * Returns the opened status for Panel.
     * 
     * @return True if Panel is opened, false otherwise.
     */
    public boolean isOpen() {
        return mContent.getVisibility() == VISIBLE;
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        mHandle = findViewById(mHandleId);
        if (mHandle == null) {
            String name = getResources().getResourceEntryName(mHandleId);
            throw new RuntimeException("Your Panel must have a child View whose id attribute is 'R.id." + name + "'");
        }
        mHandle.setOnTouchListener(touchListener);
        mHandle.setOnClickListener(clickListener);

        mContent = findViewById(mContentId);
        if (mContent == null) {
            String name = getResources().getResourceEntryName(mHandleId);
            throw new RuntimeException("Your Panel must have a child View whose id attribute is 'R.id." + name + "'");
        }

        // reposition children
        removeView(mHandle);
        removeView(mContent);
        if (mPosition == TOP || mPosition == LEFT) {
            addView(mContent);
            addView(mHandle);
        } else {
            addView(mHandle);
            addView(mContent);
        }

        if (mClosedHandle != null) {
            mHandle.setBackgroundDrawable(mClosedHandle);
        }
        mContent.setClickable(true);
        mContent.setVisibility(GONE);
        if (mWeight > 0) {
            ViewGroup.LayoutParams params = mContent.getLayoutParams();
            if (mOrientation == VERTICAL) {
                params.height = ViewGroup.LayoutParams.FILL_PARENT;
            } else {
                params.width = ViewGroup.LayoutParams.FILL_PARENT;
            }
            mContent.setLayoutParams(params);
        }
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();
        ViewParent parent = getParent();
        if (parent != null && parent instanceof FrameLayout) {
            mBringToFront = true;
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        if (mWeight > 0 && mContent.getVisibility() == VISIBLE) {
            View parent = (View) getParent();
            if (parent != null) {
                if (mOrientation == VERTICAL) {
                    heightMeasureSpec = MeasureSpec.makeMeasureSpec((int) (parent.getHeight() * mWeight), MeasureSpec.EXACTLY);
                } else {
                    widthMeasureSpec = MeasureSpec.makeMeasureSpec((int) (parent.getWidth() * mWeight), MeasureSpec.EXACTLY);
                }
            }
        }
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
        mContentWidth = mContent.getWidth();
        mContentHeight = mContent.getHeight();
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
//      String name = getResources().getResourceEntryName(getId());
//      //Log.d(TAG, name + " ispatchDraw " + mState);
        // this is why 'mState' was added:
        // avoid flicker before animation start
        if (mState == State.ABOUT_TO_ANIMATE && !mIsShrinking) {
            int delta = mOrientation == VERTICAL? mContentHeight : mContentWidth;
            if (mPosition == LEFT || mPosition == TOP) {
                delta = -delta;
            }
            if (mOrientation == VERTICAL) {
                canvas.translate(0, delta);
            } else {
                canvas.translate(delta, 0);
            }
        }
        if (mState == State.TRACKING || mState == State.FLYING) {
            canvas.translate(mTrackX, mTrackY);
        }
        super.dispatchDraw(canvas);
    }

    private float ensureRange(float v, int min, int max) {
        v = Math.max(v, min);
        v = Math.min(v, max);
        return v;
    }

    OnTouchListener touchListener = new OnTouchListener() {
        int initX;
        int initY;
        boolean setInitialPosition;
        public boolean onTouch(View v, MotionEvent event) {
            if (mState == State.ANIMATING) {
                // we are animating
                return false;
            }
//          //Log.d(TAG, "state: " + mState + " x: " + event.getX() + " y: " + event.getY());
            int action = event.getAction();
            if (action == MotionEvent.ACTION_DOWN) {
                if (mBringToFront) {
                    bringToFront();
                }
                initX = 0;
                initY = 0;
                if (mContent.getVisibility() == GONE) {
                    // since we may not know content dimensions we use factors here
                    if (mOrientation == VERTICAL) {
                        initY = mPosition == TOP? -1 : 1;
                    } else {
                        initX = mPosition == LEFT? -1 : 1;
                    }
                }
                setInitialPosition = true;
            } else {
                if (setInitialPosition) {
                    // now we know content dimensions, so we multiply factors...
                    initX *= mContentWidth;
                    initY *= mContentHeight;
                    // ... and set initial panel's position
                    mGestureListener.setScroll(initX, initY);
                    setInitialPosition = false;
                    // for offsetLocation we have to invert values
                    initX = -initX;
                    initY = -initY;
                }
                // offset every ACTION_MOVE & ACTION_UP event 
                event.offsetLocation(initX, initY);
            }
            if (!mGestureDetector.onTouchEvent(event)) {
                if (action == MotionEvent.ACTION_UP) {
                    // tup up after scrolling
                    post(startAnimation);
                }
            }
            return false;
        }
    };

    OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {
            if (mBringToFront) {
                bringToFront();
            }
            if (initChange()) {
                post(startAnimation);
            }
        }
    };

    public boolean initChange() {
        if (mState != State.READY) {
            // we are animating or just about to animate
            return false;
        }
        mState = State.ABOUT_TO_ANIMATE;
        mIsShrinking = mContent.getVisibility() == VISIBLE;
        if (!mIsShrinking) {
            // this could make flicker so we test mState in dispatchDraw()
            // to see if is equal to ABOUT_TO_ANIMATE
            mContent.setVisibility(VISIBLE);
        }
        return true;
    }

    Runnable startAnimation = new Runnable() {
        public void run() {

            callPanListener();

            // this is why we post this Runnable couple of lines above:
            // now its save to use mContent.getHeight() && mContent.getWidth()
            TranslateAnimation animation;
            int fromXDelta = 0, toXDelta = 0, fromYDelta = 0, toYDelta = 0;
            if (mState == State.FLYING) {
                mIsShrinking = (mPosition == TOP || mPosition == LEFT) ^ (mVelocity > 0);
            }
            int calculatedDuration;
            if (mOrientation == VERTICAL) {
                int height = mContentHeight;
                if (!mIsShrinking) {
                    fromYDelta = mPosition == TOP? -height : height;
                } else {
                    toYDelta = mPosition == TOP? -height : height;
                }
                if (mState == State.TRACKING) {
                    if (Math.abs(mTrackY - fromYDelta) < Math.abs(mTrackY - toYDelta)) {
                        mIsShrinking = !mIsShrinking;
                        toYDelta = fromYDelta;
                    }
                    fromYDelta = (int) mTrackY;
                } else
                if (mState == State.FLYING) {
                    fromYDelta = (int) mTrackY;
                }
                // for FLYING events we calculate animation duration based on flying velocity
                // also for very high velocity make sure duration >= 20 ms
                if (mState == State.FLYING && mLinearFlying) {
                    calculatedDuration = (int) (1000 * Math.abs((toYDelta - fromYDelta) / mVelocity));
                    calculatedDuration = Math.max(calculatedDuration, 20);
                } else {
                    calculatedDuration = mDuration * Math.abs(toYDelta - fromYDelta) / mContentHeight;
                }
            } else {
                int width = mContentWidth;
                if (!mIsShrinking) {
                    fromXDelta = mPosition == LEFT? -width : width;
                } else {
                    toXDelta = mPosition == LEFT? -width : width;
                }
                if (mState == State.TRACKING) {
                    if (Math.abs(mTrackX - fromXDelta) < Math.abs(mTrackX - toXDelta)) {
                        mIsShrinking = !mIsShrinking;
                        toXDelta = fromXDelta;
                    }
                    fromXDelta = (int) mTrackX;
                } else
                if (mState == State.FLYING) {
                    fromXDelta = (int) mTrackX;
                }
                // for FLYING events we calculate animation duration based on flying velocity
                // also for very high velocity make sure duration >= 20 ms
                if (mState == State.FLYING && mLinearFlying) {
                    calculatedDuration = (int) (1000 * Math.abs((toXDelta - fromXDelta) / mVelocity));
                    calculatedDuration = Math.max(calculatedDuration, 20);
                } else {
                    calculatedDuration = mDuration * Math.abs(toXDelta - fromXDelta) / mContentWidth;
                }
            }

            mTrackX = mTrackY = 0;
            if (calculatedDuration == 0) {
                mState = State.READY;
                if (mIsShrinking) {
                    mContent.setVisibility(GONE);
                }
                postProcess();
                return;
            }

            animation = new TranslateAnimation(fromXDelta, toXDelta, fromYDelta, toYDelta);
            animation.setDuration(calculatedDuration);
            if (mState == State.FLYING && mLinearFlying) {
                animation.setInterpolator(new LinearInterpolator());
            } else
            if (mInterpolator != null) {
                animation.setInterpolator(mInterpolator);
            }
            startAnimation(animation);
        }
    };

    @Override
    protected void onAnimationEnd() {
        super.onAnimationEnd();
        mState = State.READY;
        if (mIsShrinking) {
            mContent.setVisibility(GONE);
        }
        postProcess();
    }

    @Override
    protected void onAnimationStart() {
        super.onAnimationStart();
        mState = State.ANIMATING;
    }

    private void postProcess() {
        if (mIsShrinking && mClosedHandle != null) {
            mHandle.setBackgroundDrawable(mClosedHandle);
        } else
        if (!mIsShrinking && mOpenedHandle != null) {
            mHandle.setBackgroundDrawable(mOpenedHandle);
        }
        // invoke listener if any
        callPanListener();
    }
    public void callPanListener()
    {
        if (panelListener != null) {
            if (mIsShrinking) {
                panelListener.onPanelClosed(Panel.this);
            } else {
                panelListener.onPanelOpened(Panel.this);
            }
        }
    }

    class PanelOnGestureListener implements OnGestureListener {
        float scrollY;
        float scrollX;
        public void setScroll(int initScrollX, int initScrollY) {
            scrollX = initScrollX;
            scrollY = initScrollY;
        }
        public boolean onDown(MotionEvent e) {
            scrollX = scrollY = 0;
            callPanListener();
            initChange();
            return true;
        }
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            mState = State.FLYING;
//          velocityX=400;
//          velocityY=400;
            mVelocity = mOrientation == VERTICAL? velocityY : velocityX;
//          mVelocity=400;
            post(startAnimation);
            return true;
        }
        public void onLongPress(MotionEvent e) {
            // not used
        }
        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
            mState = State.TRACKING;
            float tmpY = 0, tmpX = 0;
            if (mOrientation == VERTICAL) {
                scrollY -= distanceY;
                if (mPosition == TOP) {
                    tmpY = ensureRange(scrollY, -mContentHeight, 0);
                } else  {
                    tmpY = ensureRange(scrollY, 0, mContentHeight);
                }
            } else {
                scrollX -= distanceX;
                if (mPosition == LEFT) {
                    tmpX = ensureRange(scrollX, -mContentWidth, 0);
                } else {
                    tmpX = ensureRange(scrollX, 0, mContentWidth);
                }
            }
            if (tmpX != mTrackX || tmpY != mTrackY) {
                mTrackX = tmpX;
                mTrackY = tmpY;
                invalidate();
            }
            return true;
        }
        public void onShowPress(MotionEvent e) {
            // not used
        }
        public boolean onSingleTapUp(MotionEvent e) {
            // not used
            return false;
        }
    }
} 
```

main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:panel="http://schemas.android.com/apk/res/packagename"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"">

<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:gravity="center_horizontal" >

        <packagename.Panel
            android:id="@+id/panel_menu"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            panel:animationDuration="1000"
            panel:closedHandle="#0000FF"
            panel:content="@+id/panelContent"
            panel:handle="@+id/panelHandle"
            panel:linearFlying="false"
            panel:openedHandle="#0000FF"
            android:paddingTop="4dip"
            panel:position="bottom" >

            <Button
                android:id="@+id/panelHandle"
                android:layout_width="33dp"
                android:layout_height="33dp"
                android:layout_gravity="center_horizontal"
                android:text="^"
                android:textColor="@android:color/white" />

            <RelativeLayout
                android:id="@+id/panelContent"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:background="#0000FF" >
            </RelativeLayout>
        </packagename.Panel>
</RelativeLayout> 
```

attrs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="Panel">
        <!-- Defines panel animation duration in ms. -->
        <attr name="animationDuration" format="integer" />
        <!-- Defines panel position on the screen. -->
        <attr name="position">
            <!-- Panel placed at top of the screen. -->
            <enum name="top" value="0" />
            <!-- Panel placed at bottom of the screen. -->
            <enum name="bottom" value="1" />
            <!-- Panel placed at left of the screen. -->
            <enum name="left" value="2" />
            <!-- Panel placed at right of the screen. -->
            <enum name="right" value="3" />
        </attr>
        <!-- Identifier for the child that represents the panel's handle. -->
        <attr name="handle" format="reference" />
        <!-- Identifier for the child that represents the panel's content. -->
        <attr name="content" format="reference" />
        <!-- Defines if flying gesture forces linear interpolator in animation. -->
        <attr name="linearFlying" format="boolean" />
        <!-- Defines size relative to parent (must be in form: nn%p). -->
        <attr name="weight" format="fraction" />
        <!-- Defines opened handle (drawable/color). -->
        <attr name="openedHandle" format="reference|color" />
        <!-- Defines closed handle (drawable/color). -->
        <attr name="closedHandle" format="reference|color" />
    </declare-styleable>

</resources> 
```

To play with this in your Activity you have

SampleActivity.java

```
public class SampleActivity extends Activity implements OnPanelListener {

public Panel samplePanel;
  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.panel_main)_layout;

        samplePanel = (Panel) findViewById(R.id.panel_id);
        samplePanel.setOnPanelListener(this);
        samplePanel.setInterpolator(new ExpoInterpolator(Type.OUT));

     }

     public void onPanelClosed(Panel panel) {}//Interface Listener
     public void onPanelOpened(Panel panel) {}//Interface Listener
} 
```

# wordpress - 创建页面模板以显示自定义分类法的目录

> ID：13678606
> 
> 赞同：0
> 
> 时间：2012-12-03T07:01:42.977
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

我创建了一个名为“培训”的自定义帖子类型和一个名为“目录”的自定义分类

我需要创建一个页面模板来显示目录这样的东西

```
<div id="TableOfContents">
  <ul class="sections">
    <li> <a>Custom Taxonomy 1</a>
      <ul class="sidenav">
        <li class="selected"> Child Taxonomy 1
          <ul class="items">
            <li> Post Title 1 </li>
            <li> Post Title 2 </li>
            <li> Post Title 2 </li>
          </ul>
        </li>
        <li class="selected"> Child Taxonomy 2
          <ul class="items">
            <li> Post Title 1 </li>
            <li> Post Title 2 </li>
            <li> Post Title 2 </li>
          </ul>
        </li>
      </ul>
    </li>
    <li> <a>Custom Taxonomy 2</a>
      <ul class="sidenav">
        <li class="selected"> Child Taxonomy 1
          <ul class="items">
            <li> Post Title 1 </li>
            <li> Post Title 2 </li>
            <li> Post Title 2 </li>
          </ul>
        </li>
        <li class="selected"> Child Taxonomy 2
          <ul class="items">
            <li> Post Title 1 </li>
            <li> Post Title 2 </li>
            <li> Post Title 2 </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</div> 
```

这是functions.php中用于创建自定义分类的php代码

```
// Custom Taxonomy for Training
$labels = array(
    'name'                          => 'Table of Content',
    'singular_name'                 => 'Table of Content',
    'search_items'                  => 'Search Table of Content',
    'popular_items'                 => 'Popular Table of Content',
    'all_items'                     => 'All Table of Content',
    'parent_item'                   => 'Parent Table of Content',
    'edit_item'                     => 'Edit Table of Content',
    'update_item'                   => 'Update Table of Content',
    'add_new_item'                  => 'Add New Table of Content',
    'new_item_name'                 => 'New Table of Content',
    'separate_items_with_commas'    => 'Separate Table of Content with commas',
    'add_or_remove_items'           => 'Add or remove Table of Content',
    'choose_from_most_used'         => 'Choose from most used Table of Content'
    );

$args = array(
    'label'                         => 'Table of Content',
    'labels'                        => $labels,
    'public'                        => true,
    'hierarchical'                  => true,
    'show_ui'                       => true,
    'show_in_nav_menus'             => true,
    'args'                          => array( 'orderby' => 'term_order' ),
    'rewrite'                       => array( 'slug' => 'table-of-content', 'with_front' => false ),
    'query_var'                     => true
);
register_taxonomy( 'tableofcontent', 'training', $args ); 
```

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:58:40.107

这是我设法解决的最终代码：

```
<div class="content" role="main">
    <?php $term = get_term_by('slug', get_query_var('term'), get_query_var('taxonomy'));
        echo '<h3 class="tax-title">' . $term->name . '</h3>';
    ?>
    <div id="TableOfContents">
      <div class="ui-boxmenu">
        <ul class="sections">
          <?php
$taxonomyName = "tableofcontent";
$parent_terms = get_terms($taxonomyName, array(
    'parent' => $term->term_id,
    'orderby' => 'menu_order',
    'hide_empty' => false
));

foreach ($parent_terms as $pterm) {
    //Get the Child terms
    $terms = get_terms($taxonomyName, array(
        'parent' => $term->term_id,
        'orderby' => 'menu_order',
        'hide_empty' => false
    ));
    foreach ($terms as $term) {
        echo '<li><a>' . $term->name . '</a>';

        $childs = get_terms($taxonomyName, array(
            'parent' => $term->term_id,
            'orderby' => 'menu_order',
            'hide_empty' => false
        ));
        echo '<ul class="sidenav">';

        foreach ($childs as $child) {
            echo '<li>' . $child->name . '';
                $wpq = array ('taxonomy'=>'tableofcontent','orderby' => 'menu_order','order' => 'ASC','term'=>$child->slug);
                  $myquery = new WP_Query ($wpq);
                  $article_count = $myquery->post_count;
                  if ($article_count) {
                    echo "<ul class=\"items\">";
                    while ($myquery->have_posts()) : $myquery->the_post();
                      echo "<li><a href=\"".get_permalink()."\">".$post->post_title."</a></li>";
                    endwhile;
                    echo "</ul>";
                  } 

            echo '</li>';
        }

        echo '</ul>';

        echo '</li>';
    }
}

?>
        </ul>
      </div>
    </div>
    <script language="javascript">
        $('.ui-boxmenu').boxmenu();
    </script> 
    <script type="text/javascript">
        // Default add class selected to First Item in Box Menu
        jQuery(document).ready(function($) {
            $("ul.sections li:first").addClass("selected");
            $("ul.sections li:first .sidenav li:first").addClass("selected");
            $("ul.sections li:first .sidenav li ul.items").addClass("selected");
            $("ul.sections li:first .sidenav li ul.items li:first").addClass("selected");
        });
    </script>

<?php   
$singleterm = get_term_by('slug', get_query_var('term'), get_query_var('taxonomy'));
    $args = array(
        'post_type'         => 'training',
        'tableofcontent'  => $singleterm->slug,
        'orderby'           => 'menu_order',
        'showposts'         => 1,
        'order' => 'ASC',
    );

    $posts = get_posts( $args );
    foreach ($posts as $post) :  setup_postdata($post); 

?>

<h2 class="content-subhead"><?php the_title() ?></h2>
<?php the_content() ?>

<?php endforeach; wp_reset_postdata(); ?>

  </div> 
```

问候

# c# - 继承泛型类

> ID：13678612
> 
> 赞同：2
> 
> 时间：2012-12-03T07:02:09.613
> 
> 标签：c#, generics, inheritance

我在 dll 中有一个类，如下所示

```
 // Summary:
   //     View component Builder base class.
    public abstract class WidgetBuilderBase<TViewComponent, TBuilder> : IHtmlString, IHideObjectMembers
        where TViewComponent : global::Kendo.Mvc.UI.WidgetBase
        where TBuilder : global::Kendo.Mvc.UI.Fluent.WidgetBuilderBase<TViewComponent, TBuilder>
    {
    } 
```

我想在我的下一个类中继承这个类

```
public abstract class WidgetBuilderBase<TViewComponent, TBuilder> 
```

我在网上冲浪，但大多数网站上我没有得到满意的答案，其中大部分都说我们不能继承泛型类。为什么不能继承泛型类。

我正在尝试执行以下代码

```
 public abstract class WidgetBuilderBase<TViewComponent, TBuilder> : Kendo.Mvc.UI.Fluent.WidgetBuilderBase<TViewComponent, TBuilder>
    {

    } 
```

但它给了我以下错误。

> 类型“TBuilder”不能用作泛型类型或方法“Kendo.Mvc.UI.Fluent.WidgetBuilderBase”中的类型参数“TBuilder”。没有从“TBuilder”到“Kendo.Mvc.UI.Fluent.WidgetBuilderBase”的装箱转换或类型参数转换。

TViewComponent 的相同错误。如何解决这个问题呢... ：（

对继承泛型类有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:09:58.830

`WidgetBuilderBase<TViewComponent, TBuilder>`对其类型参数有一些通用约束：

```
where TViewComponent : global::Kendo.Mvc.UI.WidgetBase
where TBuilder : global::Kendo.Mvc.UI.Fluent.WidgetBuilderBase<TViewComponent, TBuilder> 
```

您不能声明后代类，这可能会违反这些约束。因此，您也必须将它们应用于后代类：

```
 public abstract class WidgetBuilderBase<TViewComponent, TBuilder> : Kendo.Mvc.UI.Fluent.WidgetBuilderBase<TViewComponent, TBuilder>
    where TViewComponent : global::Kendo.Mvc.UI.WidgetBase
    where TBuilder : global::Kendo.Mvc.UI.Fluent.WidgetBuilderBase<TViewComponent, TBuilder>
    {

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:10:16.240

你应该像这样声明一个派生类：

```
public abstract class WidgetBuilderBase<TViewComponent, TBuilder> 
             : Kendo.Mvc.UI.Fluent.WidgetBuilderBase<TViewComponent, TBuilder>
    where TViewComponent : global::Kendo.Mvc.UI.WidgetBase
    where TBuilder : global::Kendo.Mvc.UI.Fluent.WidgetBuilderBase<TViewComponent, TBuilder>
{

} 
```

您不能在派生类中覆盖基类泛型约束。

# android - 蜂巢环境如何搭建？

> ID：13678613
> 
> 赞同：1
> 
> 时间：2012-12-03T07:02:17.120
> 
> 标签：android, android-emulator

我已经为 Windows 安装了 android sdk。我正在使用 API 8 级和 API 15 级。

现在我想使用 Honeycomb for Tablets。但我不知道如何在我的情况下添加蜂窝 API 级别。

当我在 Eclipse 中打开 Windows --> Preferences 时，我得到了这个屏幕。

![偏爱](../Images/6fb4fb83536e4da0fee0fc4ea58145f2.png)

我想为 Honycomb 设置环境。请帮帮我。

这是我的 SDK 管理器显示：

![sdk 管理器](../Images/ff4cda3a9d21c73f0cd551ded57390a5.png)

**就我而言，这是 SDK 管理器中的工具菜单。**

![SDK中的工具](../Images/ce0cc0fb7d323bf153422fa3253be747.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:10:53.680

在 Eclipse 中，转到 Window -> Android SDK Manager

为 Honeycomb 选择 API 级别 11 (Android 3.0)，然后单击 Install Packages。

如果除了已安装的软件包之外，您没有看到任何其他 API 级别，请尝试以下操作：

清除缓存并重新加载。清除缓存按钮位于 SDK 管理器的工具 > 选项中，重新加载是 SDK 管理器中的包 > 重新加载。

链接：[SDK Manager 不显示任何内容，仅显示已安装的软件包](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/wp8FFGmsgAQ)

如果您没有像 OP 一样在下拉菜单中看到任何“选项”，请单击“工具 -> 管理添加站点”并查看存储库列表是否存在。只是为了确保，确保下图中列出的所有存储库都存在于您的存储库中。如果没有，则添加缺少的：

![官方添加网站列表](../Images/9de4d7fb06c417fe7ce307c8972d3c5e.png)

现在转到“Packages -> Reload”，看看是否可以在 repo 中找到其余的 Android API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:07:45.203

通过双击启动 Android SDK 管理`android.bat`器`D:\Android Java Stuffs\android-sdk\tools\android.bat`。

从那里，更新到最新的 SDK 版本。在撰写本文时，这将是 Android 4.2 (API17)。

随时更新您的所有工具。:D

# nservicebus - NServiceBus Send() vs SendLocal() 和异常

> ID：13678614
> 
> 赞同：3
> 
> 时间：2012-12-03T07:02:19.803
> 
> 标签：nservicebus

我们正在实现一个使用 NServiceBus 调用其他服务的 saga。我不太清楚 NServiceBus 如何处理传奇中的异常。

在 saga 内部，我们有一个处理程序，该处理程序调用一个外部服务，只有在原始消息处理程序成功完成后才应该调用该服务。是否可以这样做：

```
public void Handle(IFooMessage message) 
{
    var message = Bus.CreateInstance<ExternalService.IBarMessage>();
    Bus.Send(message);

    // something bad happens here, exception is thrown
} 
```

还是将消息多次发送到 ExternalService？这里有人建议将其更改为：

```
// handler in the saga
public void Handle(IFooMessage message) 
{
    // Do something
    var message = Bus.CreateInstance<ISendBarMessage>();
    Bus.SendLocal(message);

    // something bad happens, exception is thrown
}

// a service-level handler
public void Handle(ISendBarMessage message) 
{
    var message = Bus.CreateInstance<ExternalService.IBarMessage>();
    Bus.Send(message);
} 
```

[我做了一个实验，据我所知，第一种方法似乎很好，但除了http://docs.particular.net/nservicebus/errors/](http://docs.particular.net/nservicebus/errors/)之外我找不到任何文档，它说：

> 当异常涌入 NServiceBus 基础设施时，它会在事务端点上回滚事务，导致消息返回到队列，并且**用户代码尝试发送或发布的任何消息也被撤消**。

任何有助于澄清这一点的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:37:26.647

只要您在 saga 中进行消息传递而不进行任何 Web 服务调用，那么您就是安全的 - 无需执行 SendLocal。

# php - 使用带有 admin 及其子模块的 zend 框架 2.0

> ID：13678618
> 
> 赞同：0
> 
> 时间：2012-12-03T07:02:39.047
> 
> 标签：php, zend-framework2

我想要带有子模块的管理模块，如下结构，

```
application/
        admin-modules/
                      default/
                              controllers/
                              etc..
                      user/
                           controllers/
                           etc.. 
```

在 ZF1 中真的很容易，但不知道如何以这种方式创建任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:33:54.150

一般来说，管理模块不应该包含其他模块的业务逻辑。想象以下场景：

```
/userModule
  - addAction
  - editAction
  - deleteAction
  - viewAction
  - indexAction

/blogModule
  - sameActions 
```

现在这是有道理的。每个模块都可以独立存在，并且没有隐藏的依赖关系。现在，如果您想实现一个管理模块，它只需从这些模块中收集信息并为操作提供访问控制。

所以基本上你的 Admin-Module 应该做的就是：

*   提供通往其他模块管理功能的路径的可视化表示
*   提供[ACL](http://framework.zend.com/manual/2.0/en/index.html#zend-permissions-acl)或[RBAC](http://framework.zend.com/manual/2.0/en/index.html#zend-permissions-rbac)功能

但是所有逻辑甚至视图脚本都应该保留在每个代表性模块中

# mysql - SQL 用于根据评分获取顶级用户并使用结果获取附加数据

> ID：13678619
> 
> 赞同：2
> 
> 时间：2012-12-03T07:02:43.243
> 
> 标签：mysql, sql

我正在尝试想出一个可以获取每个

*   国名，
*   代码，
*   游戏数量，
*   TOP球员的名字和
*   他的身份证
*   基于游戏表中的 SUM（评级）。

我无法根据评分获得顶级球员的名字。

![在此处输入图像描述](../Images/2544f0c52b313eb355b0345c1537556c.png)

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/895b0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:16:02.980

```
SELECT  x.Country AS CountryName,
        x.Code,
        a.totalCount as NumberOfGames,
        y.Name AS PlayersName,
        y.ID AS PlayersID,
        a.totalRating
FROM    (
            SELECT  player_ID, Country, COUNT(*) totalCount, SUM(Rating) totalRating
            FROM    Games
            GROUP BY player_ID, Country
        ) a 
        INNER JOIN
        (
            SELECT Country, Max(totaLRating) maxRating
            FROM
            (
                SELECT  player_ID, Country, SUM(Rating) totalRating
                FROM    Games
                GROUP BY player_ID, Country
            ) s
            GROUP BY Country
        ) b ON a.Country = b.Country AND
                a.totalRating = b.maxRating
        INNER JOIN Country x
            ON a.Country = x.ID
        INNER JOIN Players y
            ON a.player_ID = y.ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/bc0c2/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:09:32.980

```
select top 1 * from games inner join players on games.player_id=players.id inner join country on games.country=country.id order by rating desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:23:16.480

试试这个查询

```
select 
    c.id as country_id,
    c.name as Country,
    c.code as CCode,
    g.T_Games,
    p.id as Player_id,
    p.name as Player
from country as c
left join (select country , count(country) as T_Games from games group by country) as g on g.country = c.id
left join (select id , country , player_id , max(rating) from games group by country) as gl on gl.country = c.id
left join (select id , name from player) as p on p.id = gl.player_id 
```

这是关于 sql fiddle 的演示

[http://sqlfiddle.com/#!2/f74a7/1](http://sqlfiddle.com/#!2/f74a7/1)

# c - printf 语句中的分段错误

> ID：13678620
> 
> 赞同：0
> 
> 时间：2012-12-03T07:02:46.113
> 
> 标签：c, segmentation-fault, printf

我在 printf 语句中的插入函数内遇到分段错误

```
#include <stdio.h>
#include <stdlib.h>
void Insert(char w[])
{
int j;
int n=5;
printf("word is %s AFTER\n", w);
}

int main(int argc, char *argv[])
{
        FILE *fp;
        if (argc !=2)
                fp=fopen("words.txt", "r");
        else
                fp=fopen(argv[1], "r");
        char line[28];
        while(!feof(fp)){
                fgets(line, 256, fp);
                Insert(line);
        }
} 
```

在 word.txt 中，它只是每一行的一堆单词，即

```
apple
banana
...
zoo 
```

（...只是意味着中间的一堆单词）它打印出这个：

```
word is apple
AFTER
word is banana
AFTER
...(a bunch more repetitions)                                    
word is cookie
Segmentation Fault(core dumped) 
```

为什么会出现分段错误？它完美地打印了这个词。它没有打印`AFTER`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:08:58.413

分配的内存只有 28 个字节，而试图复制 256 个字节。

```
char line[28]; <-- 28 bytes only allocated to line.
        while(!feof(fp)){
                fgets(line, 256, fp); <-- 256 bytes read into line. 
```

增加内存`line`以避免此问题。

# c# - 如何在 c# 中获取不带反射的属性名称

> ID：13678624
> 
> 赞同：-2
> 
> 时间：2012-12-03T07:03:17.557
> 
> 标签：c#

如何将属性名称作为字符串获取？

例如：

```
Public int PropertyValue{get;set;} 
```

现在我想将 PropertyValue 作为一个没有反射和没有 foreach PropertyInfo 的字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:07:28.857

我在这里找到了一个解决方案： [Workaround for lack of 'nameof' operator in C# for type-safe databinding?](https://stackoverflow.com/questions/301809/workarounds-for-nameof-operator-in-c-typesafe-databinding)

@reshefm 有这个代码的地方：

```
class Program
{
    static void Main()
    {
        var propName = Nameof<SampleClass>.Property(e => e.Name);

        Console.WriteLine(propName);
    }
}

public class Nameof<T>
{
    public static string Property<TProp>(Expression<Func<T, TProp>> expression)
    {
        var body = expression.Body as MemberExpression;
        if(body == null)
            throw new ArgumentException("'expression' should be a member expression");
        return body.Member.Name;
    }
} 
```

希望这可以帮助 ：）

# java - 这两段代码有什么区别？

> ID：13678626
> 
> 赞同：0
> 
> 时间：2012-12-03T07:03:33.160
> 
> 标签：java

第一个例子

```
int windowStart = 0;

for (int i = 0; i + windowSize < fileArray.size(); i++) {
  ArrayList <Character> window = new ArrayList <Character> ();
  for (int s = windowStart; s <= windowStart + windowSize; s++) {
    window.add(fileArray.get(s));
  }
  windowStart++;
} 
```

VS。

第二个例子

```
int ind = 0;
for (int i = 0; i + windowSize < fileArray.size(); i++) {
  for (int b = ind; b <= windowSize + ind; b++) {
    window.add(fileArray.get(b));
  }
  ind++;
} 
```

第一个抛出一段`java.lang.IndexOutOfBoundsException`时间，第二个没有，并且工作得很好。`fileArray`两者都相同，但对于 2.`window`数组被定义为属性，而对于第一个，“窗口”数组在方法（和 for 循环）内部定义。这有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:20:48.727

您无法获得`IndexOutOfBoundsException`用于向列表添加值的方法。问题是 的值`s`等于或大于`fileArray`数组或列表的实际大小。

并且因为两个示例中的循环是等效的，所以应该在您刚刚发布的代码行之外找到问题。

尝试调试（`IndexOutOfBoundsException`如果您使用的是 IDE，请中断，否则添加一些简单的`System.out.println`语句来找出，为什么`s`比预期的要大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:35:26.447

从第一个例子，从你告诉我的：

*   `windowSize`= 30。
*   `fileArray.size()`= 235。

然后，您的第一个 for 循环将在`i + windowSize > 235`(这意味着 i = 236 - 30 = 206`) 时终止。

您会意识到`windowStart`在 first 内部会增加`for-loop`，因此最终`windowStart`会增加`205`时间（从 0 开始）。

那时，第二个`for-loop`将计数 ( `windowStart = 205`) 并且您的条件`s <= windowStart + windowSize`将是 (`s = 205 + 30`等于`235`)，它满足循环中的条件，并且您说`fileArray.get(s)`这意味着`fileArray.get(235)`, 并且您得到一个`IndexOutOfBoundsException`.

我假设`windowSize`在第二个示例中不一样，但在我看到完整的源代码之前我不能告诉你。

希望这可以帮助。

# c++ - 为什么成员变量不能用作参数的默认值？

> ID：13678627
> 
> 赞同：6
> 
> 时间：2012-12-03T07:03:37.767
> 
> 标签：c++, language-lawyer, default-parameters

> **可能重复：**
> [非静态成员作为非静态成员函数的默认参数](https://stackoverflow.com/questions/4539406/nonstatic-member-as-a-default-argument-of-a-nonstatic-member-function)

如果我错了，请纠正我，但我认为默认参数的工作方式是这样的：

当编译器看到函数调用时，它开始将参数压入堆栈。当它用完参数时，它将开始将默认值压入堆栈，直到所有必需的参数都被填充（我知道这是一种简化，因为参数实际上是从右向左压入的，所以它将以默认值开始，但是想法是一样的）。

如果这是真的，为什么不能将成员变量用作默认值？在我看来，由于编译器像往常一样在调用站点推送它们，它应该能够很好地解决它们！

**编辑**由于答案似乎我的问题被误解了，让我澄清一下。我知道情况就是这样，我知道该语言允许什么和不允许什么。我的问题是为什么语言设计者选择不允许这样做，因为它似乎很自然地起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:03:05.343

你所问的本质可以提炼成这个简单的例子

```
void foo(int a, int b = a); 
```

这在 C++ 中是不允许的。C++ 不允许默认参数依赖于其他参数。

使用类成员作为默认参数只是上述情况的一个特例，因为类成员是通过`this`指针访问的，而`this`指针只是每个非静态成员函数的另一个隐藏参数。

所以，问题是为什么

```
void foo(int a, int b = a); 
```

不允许。

不允许这样做的一个明显的潜在原因是它会对参数评估的顺序施加额外的要求。如您所知，在 C++ 中，函数参数求值的顺序是未指定的——编译器可以按任何顺序求值。但是，为了支持上述默认参数功能，编译器必须确保`a`在`b`. 这感觉像是一个过度的要求，它限制了我们习惯于在 C++ 中看到的典型的评估顺序自由。

请注意，这

```
int a;

void foo(int b = a); 
```

在 C++ 中是允许的。而且，显然，它没有表现出上述的评估顺序问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:09:54.820

这篇文章列出了可以设置默认参数的所有方式 -[默认函数参数必须在 C++ 中保持不变吗？](https://stackoverflow.com/questions/334882/must-default-function-parameters-be-constant-in-c)

解决您的需求并不难。

```
class A
{
    int a;
    public:
    void f(int i);

    void f()
    {
        f(a);
    }
}; 
```

给你你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:12:40.767

我相信这是标准中最合适的段落，尤其是§9：

> ### 8.3.6 默认参数 [dcl.fct.default]
> 
> §7 局部变量不得用于默认参数
> 
> §9 [...] 类似地，非静态成员不得在默认参数中使用，即使它没有被评估，除非它作为类成员访问表达式 (5.2.5) 的 id 表达式出现或除非它用于形成指向成员的指针（5.3.1）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T08:54:47.987

总结 Nawaz 在链接问题中的出色答案：调用`void Foo::Bar(int a = this->member)`真的意味着`void Foo__Bar(Foo* this, int a = this->member)`。显然，第二个参数不能在第一个参数之前计算，这违反了 C++ 公理，即编译器可以按照他们喜欢的任何顺序计算参数。

# powershell - 来自异步事件的写入主机

> ID：13678630
> 
> 赞同：0
> 
> 时间：2012-12-03T07:03:51.583
> 
> 标签：powershell, powershell-2.0

我想从 powershell 中的异步事件写入控制台。

```
$timer = New-Object Timers.Timer
$timer.Interval = 2000     
$timer.AutoReset = $false  
$timer.Enabled = $true

Register-ObjectEvent -InputObject $timer -EventName Elapsed -SourceIdentifier c4n4 -Action {Write-Host test} 
```

这显然有效。但是，如果我将 Write-Host 操作封装在一个函数中。它不再。

```
function myFunc{
  Write-Host test
}

$timer = New-Object Timers.Timer
$timer.Interval = 2000     
$timer.AutoReset = $false  
$timer.Enabled = $true

Register-ObjectEvent -InputObject $timer -EventName Elapsed -SourceIdentifier c4n4  -Action {myFunc} 
```

所以基本上我的问题是。如何从函数中的事件写入控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:11:03.923

您需要在全局范围内声明该函数：

```
function global:myFunc{
  Write-Host test
} 
```

# iphone - 如何从 iphone 应用程序在 salesforce 数据库上发布数据？

> ID：13678631
> 
> 赞同：0
> 
> 时间：2012-12-03T07:03:55.937
> 
> 标签：iphone, salesforce

我正在开发一个 iPhone 应用程序，我想在其中将数据发布到 salesforce 数据库中。我已经从谷歌尝试过，但没有取得任何成功。

你能指导我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:42:53.137

Salesforce provides an iOS SDK to talk to their API:

[https://github.com/forcedotcom/SalesforceMobileSDK-iOS](https://github.com/forcedotcom/SalesforceMobileSDK-iOS)

Here is a tutorial on getting started:

[http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_iOS](http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_iOS)

You will need to use an Oauth flow to authenticate to the API. This means you show a Login page from Salesforce.com, the user logs in, and then your UIWebView will get a redirect with a sessionId in the URL. You can extract the sessionId and use it to talk to the API for read or write access, depending on the user's permissions. The SDK includes sample code that implements all of that, so you just need to merge that code in with your app.

# perl - 如何从 perl 脚本登录 OBIEE 服务器凭据

> ID：13678637
> 
> 赞同：0
> 
> 时间：2012-12-03T07:04:29.340
> 
> 标签：perl, obiee

我需要创建一个从报告中生成 txt 文件的过程。我需要登录到 Obiee Business Intelignce，提供凭据并生成具有相应列名的报告，并将数据加载到文本文件中。我不知道 OBIEE 或 Perl。我用谷歌搜索并找到了一些相关的 URL

```
http://gerardnico.com/wiki/dat/obiee/catalog_manager 
```

我需要使用 Perl 脚本使用以下凭据登录到 Obiee Tool。如何使用 Perl 登录服务器？

到目前为止，我尝试过的是：

```
use strict;

use warnings; 
```

错误：

> 缺少或错误的“-输出文件”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:19:50.077

我不知道这是什么或它做了什么，但是从您找到的 URL 的文档中，看起来 API 允许这样的查询：

```
catalogmanager -online http://localhost:9704/analytics/saw.dll
-login Administrator -pwd Administrator
-cmd report -of c:\output.csv -delimiter \",\"
-type Requests \"Request Name\" \"Request Criteria Column\" 
```

如果我没看错，那么你应该在这个电话中提供：

*   正确的服务器，即，如果目录管理器或任何未在本地计算机上运行的东西，请用您的主机名替换“localhost”
*   用户名和密码作为 `-login` 和 `-pwd` 的参数
*   作为 `-of` 参数的输出文件名（可能是 CSV 文件）
*   并且应该提供某种请求结构来代替“请求名称”和“请求标准列”

你会在 Perl 的脚本中使用它，如下所示：

```
use strict;
use warnings;

# change this to your URL
my $address        = 'http://localhost:9704/analytics/saw.dll';
my $username       = 'ADMIN';  # change this to your username
my $pwd            = 'PASSWORD';  # change this to your password
my $outputfile     = 'PATH_TO_OUTPUT_FILE';  # change this to your output file
my $delimiter      = ',';
my $request_name   = 'REQUEST_NAME';  # adjust this
my $request_column = 'REQUEST_COLUMN';  # and this

my @call = qq( catalogmanager -online $address -login $username 
    -pwd $password -cmd report -of $outputfile -delimiter $delimiter 
    -type Requests $request_name $request_column );

# system() returns true if the call was not successful,
# we can make use of this and let the program die if something went wrong
system(@call) and die("Could not exec @call: $!\n"); 
```

它应该有望将输出文件写入您指定的路径。这个文件你可以解析，但那是另一回事。

# java - VisualVM 连接到本地 TomEE 非常慢并且无法进行堆转储

> ID：13678638
> 
> 赞同：7
> 
> 时间：2012-12-03T07:04:36.030
> 
> 标签：java, jvm, visualvm, openejb, jvisualvm

我在 MAC OSX 山狮上遇到了 TomEE 1.5.1 和 VisualVM 1.7.0_09 的一个非常奇怪的问题。

TomEE 加载一些 webapp 后。使用 VisualVM 连接本地 TomEE 进程需要很长时间，连接后 gc 按钮被禁用，我无法进行堆转储。VisualVM 的日志显示一些错误。

```
com.sun.tools.attach.AttachNotSupportedException: Unable to open socket file: target process not responding or HotSpot VM not loaded
    at sun.tools.attach.BsdVirtualMachine.<init>(BsdVirtualMachine.java:90)
    at sun.tools.attach.BsdAttachProvider.attachVirtualMachine(BsdAttachProvider.java:63)
    at com.sun.tools.attach.VirtualMachine.attach(VirtualMachine.java:213)
    at com.sun.tools.visualvm.attach.AttachModelImpl.getVirtualMachine(AttachModelImpl.java:104)
Caused: java.io.IOException: Unable to open socket file: target process not responding or HotSpot VM not loaded 
```

该`.java_pid<pid>`文件未在 tmp 文件夹中创建。

但是如果我在启动它之后和加载任何 webapps 之前使用 VisualVM 连接 TomEE，`.java_pid<pid>`文件将创建，VisualVM 将立即连接到它，并且堆转储工作。

另一种解决方法是修改 catalina.sh 以将 tools.jar 添加到 ClassPath 并删除 openejb javaagent，然后在 TomEE 完全启动后连接工作正常。

无法在 ubuntu 机器上重现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T19:13:30.503

可能jvm内存不足。我已经看过很多次了。尝试：

1.  [增加内存限制](https://stackoverflow.com/questions/1493913/how-to-set-the-maximum-memory-usage-for-jvm)。
2.  将 VisualVM 连接到 jvm。
3.  部署您的应用程序。
4.  并运行内存采样器、分析器或堆转储来诊断问题。你可能有内存泄漏。如果您有内存问题，堆转储是最安全的方法。您还可以[使用命令行进行堆转储](http://blog.lesc.se/2012/02/how-to-take-java-heap-dump-from-command.html)，稍后在 VisualVM 中进行分析。

还要确保您的系统没有内存不足。

# javascript - jQuery Datepicker（查找星期一、星期二等）

> ID：13678639
> 
> 赞同：1
> 
> 时间：2012-12-03T07:04:56.437
> 
> 标签：javascript, jquery

有什么方法可以使用当前日期确定一天是星期一、星期二等吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:09:22.467

试试这个：

```
var day = new Date('12/03/2012').getDay(); 
```

从周日开始

# c++ - 比较时出现段错误

> ID：13678640
> 
> 赞同：0
> 
> 时间：2012-12-03T07:04:57.483
> 
> 标签：c++, gdb, segmentation-fault

我以前从未见过这种情况。比较两个整数时出现段错误。

编辑：忘记包括最令人沮丧的部分：它在 DDD 中运行良好，所以我无法调试它。

这是我的 gdb 会话回溯段错误：

```
> Reading symbols from /home/michael/ecs60/hw3/3/huffman...done.
[New LWP 4109]

warning: Can't read pathname for load map: Input/output error.
Core was generated by `./huffman -d'.
Program terminated with signal 11, Segmentation fault.
#0  0x000000000040123a in huffnode::operator< (this=0x1e39010, hn=...)
    at huffnode.h:54
54      if(weight < hn.weight) {
(gdb) bt
#0  0x000000000040123a in huffnode::operator< (this=0x1e39010, hn=...)
    at huffnode.h:54
#1  0x00000000004021f4 in minheap<huffnode>::add (this=0x7fff15de7490, 
    n=...) at minheap.h:65
#2  0x0000000000401cb4 in decompress () at main.cpp:198
#3  0x00000000004012bb in main (argc=2, argv=0x7fff15de75f8)
    at main.cpp:41 < 
```

这是有问题的代码：

```
bool huffnode::operator<(const huffnode& hn) {
    if(weight < hn.weight) {
            return true;
    } else if(weight == hn.weight) {
            return small < hn.small;
    } else {
            return false;
    }
}; 
```

这是调用违规代码的函数：

```
template<class T>
void minheap<T>::add(T n) {
        if(size + 1 > capacity)
                incCapacity();

        heap[size] = n;
        int index = size;
        if(index == 0) return;
        while(heap[index] < heap[(index + 1)/2 -1] && index != 0) {
                swap(index, ((index+1)/2 - 1));
                index = ((index + 1)/2 - 1);
        }
        size++;
}; 
```

下面是调用 minheap::add 的 decompress 部分：

```
unsigned int freq[NUM_CHARS];
for(int i = 0; i < NUM_CHARS; i++) {
        in = getNum();
        freq[i] = in;
}

for(int i = 0; i < NUM_CHARS; i++) {
        if(freq[i] > 0) {
                tree.add(huffnode((int)freq[i], (char) i));
        }
} 
```

谢谢大家！段错误已修复，但现在我的程序的一半显然依赖于损坏的代码，所以回到 DDD。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:10:01.007

根据您的堆栈跟踪，`hn`is `...`，这表明它可能指向错误的内存（并且鉴于您遇到了段错误，几乎可以肯定它是）。您确定`huffnode`传递给运算符重载的内容有效吗？是否已初始化？

进一步检查您的堆栈跟踪，`n`在您的`minheap<huffnode>::add`函数中也是无效的，这意味着`add`正在传递一个 invalid `huffnode`。 `add`看起来它是从 调用的`decompress`，并且由于`decompress`不接受任何参数，因此很可能在那里您将无效传递`huffnode`给`add`.

鉴于`add`直接传递了`huffnode`构造函数的返回值，看起来它不会得到一个无效的对象，所以`...`堆栈跟踪中的可能会产生误导。

我要检查的下一个问题是您的比较`heap[index] < heap[(index + 1)/1 - 1]`。请注意，如果`index`is `0`，则第二个运算符将为`heap[-1]`，这是无效的。你能确保`index`永远不会`0`或更少吗？

作为旁注，我想指出整个条件：

```
heap[index] < heap[(index + 1)/2 - 1] && index != 0 
```

即使`index`等于也将失败，`0`因为`<`将首先评估运算符，从而导致 seg-fault。您应该`0`在条件之外和之前进行检查，或者作为第一个条件。

最后，如果这是仅在调试器之外表现出来的错误类型，那么`print`语句将成为您的朋友（粗略，是的，但如果您知道要打印什么，它们可以完成工作）。我建议`add`在循环的每次迭代中添加打印`while`，检查是什么`index`。`add`您还可以在地址的开头打印`n`它，看看它是否看起来像未初始化的内存。鉴于您如何将`huffnode`s 添加到数据结构中，我很确定您的问题是`heap`数组中的越界访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:06:40.423

它几乎肯定与整数无关。两件事之一可能是无效的：

1.  参考`hn&`；
2.  `this`指针。

将两者都打印出来，您会看到两者中的哪一个是罪魁祸首。

**编辑**：我注意到您在问题中添加了更多代码。以下行有问题：

```
while(heap[index] < heap[(index + 1)/2 -1] && index != 0) { 
```

由于 to 的参数`&&`是从左到右检查的，因此您需要交换操作数的顺序以避免在以下情况下越界访问`index == 0`：

```
while(index != 0 && heap[index] < heap[(index + 1)/2 -1]) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:10:37.057

您的参考`hn`无效（可能`NULL`）因此您遇到分段错误的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T07:30:39.723

问题是您在循环条件下的比较顺序

```
 while(heap[index] < heap[(index + 1)/2 -1] && index != 0) 
```

你应该把`index != 0`比较*放在第一位*

```
 while(index != 0 && heap[index] < heap[(index + 1)/2 -1]) 
```

在您的原始变体中，第一个比较

```
 heap[index] < heap[(index + 1)/2 -1] 
```

is 为 执行`index == 0`，相当于

```
 heap[index] < heap[-1] 
```

尝试使用索引访问不存在的元素`-1`是导致崩溃的原因。

* * *

支票

```
if(index == 0) return; 
```

您显然“添加”来解决此问题并不能解决任何问题。它只能捕捉`index`最初为 0 的情况。但是在循环的迭代过程中，它没有捕捉到`index`稍后变为 0 的情况。

删除这个无意义`if`的，然后再次交换循环标题中的比较。

# c# - 如何使用 C# 中的互操作将整个现有 excel 范围移动到下一行

> ID：13678642
> 
> 赞同：2
> 
> 时间：2012-12-03T07:05:14.583
> 
> 标签：c#, asp.net, excel, interop

如何使用 C# 中的互操作将整个现有的 excel 范围向下移动一行？

我需要在只有数据的现有 excel 的第一行中添加一个标题。我想在 C# 中以编程方式将整个范围向下移动一个设置。

我看到移动一个单元格的东西，但移动整个范围不清楚。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:27:23.360

我同意如果您在服务器上运行，CloseXML 是一个更好的解决方案，但如果您想采用互操作方式：

这是添加一行并将现有数据向下移动一行的代码。

```
// Inserts a new row at the beginning of the sheet
Microsoft.Office.Interop.Excel.Range a1 = sheet.get_Range( "A1", Type.Missing );
a1.EntireRow.Insert(Microsoft.Office.Interop.Excel.XlInsertShiftDirection.xlShiftDown, 
                    Type.Missing ); 
```

在顶部插入新行后，您可以将标题添加到单元格中。
我假设您知道如何打开和访问工作表。

# ruby-on-rails - 使用 CSS 和局部变量渲染 HTML 文件

> ID：13678648
> 
> 赞同：1
> 
> 时间：2012-12-03T07:05:38.027
> 
> 标签：ruby-on-rails, ruby

我在`public/company/`带有 CSS 文件的 HTML 文件中包含以下内容`css/style.css`：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
  </head>
  <body>
    <div class="title">Name {name}</div>
  </body>
</html> 
```

我想用一个动作的 CSS 样式表渲染这个 HTML 文件，并在`{name}`不更改物理文件内容和位置的情况下进行替换。我可以渲染 HTML 文件，但找不到 CSS 文件。谁能帮我用 CSS 文件渲染 HTML 文件并替换`{name}`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:09:23.590

`css/style.css`当调用 from`company/file.html`将尝试加载`company/css/style.css`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:32:45.210

如果您的 CSS 文件位于`/public/company/css/style.css`，那么您的静态 HTML 文件应使用绝对路径链接它。在资源路径中使用前导`/`表示绝对路径。：

```
<link href="/company/css/style.css" rel="stylesheet" type="text/css" media="all"/> 
```

请注意，Rails 路由器可能会捕获此请求并引发异常。根据 Web 服务器，您可能需要启用静态资产或直接提供服务，完全绕过 Rails。

更改静态 HTML 文件服务器端的内容而不实际修改它（即添加 ERb）并不简单。你可以：

*   在响应中注入一些 javascript 以在客户端执行修改。（丑陋）
*   使用 Nokogiri 等加载静态 HTML 文件。al.，修改内容，并将输出发送到客户端。（昂贵的）

在我看来，这些普通的 HTML/CSS 文件是第三方的（设计师？客户端？），你想把它放进去，让它在`/public`Rails 中自动工作。那会很好，但这并不容易。最好使用 Rails 的内置模板系统，但这意味着修改文件并将它们移动到预期的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:11:34.387

[单击此处](http://www.morshed-alam.com/2012/12/render-html-file-in-rails-using-nokogiri.html)以您可以做到的方式查看文章。希望它会有所帮助！

但是，我不确定您为什么要在 Rails 具备所有功能的情况下以这种方式进行渲染。

# javascript - 如何进行页面/内容转换

> ID：13678649
> 
> 赞同：2
> 
> 时间：2012-12-03T07:05:49.843
> 
> 标签：javascript, html, css, css-transitions

我对这一切都很陌生，很抱歉我缺乏术语。

我在看[这个网站](http://www.estudiopatagon.com/tf/wp-vcard-colores/)，我想知道如何在不重新加载页面的情况下进行内容/页面更改。

有人能指出我正确的方向吗？那是什么JavaScript？CSS 过渡？jQuery？或者你能给我看一些代码吗？任何帮助都会很棒；找了好久没找到类似的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:58:18.357

这是一个简单的滑块，它不是幻灯片图像，而是滑动内容（嵌套的 div、img、列表）。我为你检查了代码并正在使用这个**jQuery 插件**：[SudoSlider 插件](http://webbies.dk/SudoSlider/)

不要通过编写自己的插件来重新发明轮子，您可以在这里看到一些演示，但是[这个](http://webbies.dk/assets/files/SudoSlider/package/demos/rich%20content.html)非常接近使用自动高度的示例。这是您可以在您的网站上使用它的方式：

### jQuery

```
<script type="text/javascript" >
    $(document).ready(function(){   
        var sudoSlider = $("#slider").sudoSlider();
    });
</script> 
```

### HTML

```
<div id="slider" >
    <ul>
        <li><div> .... </div></li>
        <li>Lorem ipsum text + image</li>
        <li>List, maps, ...</li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:44:41.210

这是[JQuery 动画](http://api.jquery.com/animate/)。这是一个（非常流畅，但仍然）典型的轮播效果，其中您有一个超出可见屏幕的滑块 div，并且它的左边距被动画以创建效果。

创建基本效果很简单（当然要创建看起来和链接一样好的东西需要做很多工作）：

1.  设置`overflow-x: hidden`为容器 div
2.  在容器内添加滑块 div，并在滑块内滑动元素
3.  添加导航按钮，并单击动画滑块的左偏移（跟踪当前位置）

[这是一个非常基本的例子。](http://jsfiddle.net/7RU6w/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:44:00.960

我可以说可以使用所有提到的选项:)

基本上你可以使用类似[http://bxslider.com/](http://bxslider.com/)的东西来实现你想要的，而不是使用列表项中的 img 元素使用一些内容项。

# unix - 使用 Erlang SSH 应用程序在远程 UNIX 服务器上执行命令

> ID：13678650
> 
> 赞同：5
> 
> 时间：2012-12-03T07:05:53.380
> 
> 标签：unix, ssh, erlang, solaris, remote-server

我一直使用该`os:cmd/1`方法来调用操作系统例程。现在，我知道 erlang 有一个`ssh`应用程序。我想知道如何使用此模块通过 ssh 连接到 SOLARIS 服务器，运行命令并收集回复。我相信这样的操作会被异步处理。我需要一个使用 Erlang 内置的 ssh 应用程序的示例：

![在此处输入图像描述](../Images/e0e26a7273bd59c6d81b2b9eda295b09.png)

现在，有时我们`SSH KEYS`会在服务器之间设置以防止密码提示，尤其是在使用脚本在远程服务器上执行任务时。我打算编写许多 Erlang 程序，或者`escripts`与我们环境中的许多远程服务器交互。我需要一个完整的示例和说明，说明如何`ssh`使用 erlang ssh 应用程序处理有和/或没有密码提示。

**注意：**在上面的屏幕截图中，两台服务器都已`SSH KEYS`设置好，因此当从两台服务器中的任何一台启动 ssh 时，都没有密码提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T00:19:34.900

实现此目的的正确 erlang 本机 API**不是** [ssh](http://www.erlang.org/doc/man/ssh.html)，它只为 ssh 实现用户交互式 shell，而是使用[ssh_connection](http://www.erlang.org/doc/man/ssh_connection.html)。看看 ssh_connection:exec/4

为了更完整，使用 ssh:connect 建立连接，然后使用从它返回的处理程序与 ssh_connection:exec/4 连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T15:06:40.640

我自己没有尝试过，也无法提供完整的示例，但[文档](http://www.erlang.org/doc/man/ssh.html#connect-3)似乎是一个很好的起点。

# php - Symfony2 安全组件能否与多域系统一起工作？

> ID：13678656
> 
> 赞同：1
> 
> 时间：2012-12-03T07:06:37.123
> 
> 标签：php, symfony, acl, symfony-2.1

我们正在开发一个托管的 CMS 系统，该系统将为来自同一数据库和代码库的多个域提供服务。我们正在使用 Symfony2 构建它，我们对如何让多个域与动态主机一起工作有一个想法，但我想知道安全组件是否可以与多个域一起工作并识别不同的域登录和会话。此外，管理员和超级管理员将如何登录并管理所有域？对于用户，我可以将域或站点名称与用户一起保存在数据库中，但我们如何将其放入安全组件自己处理的会话中。

请指教。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:04:11.600

简而言之，是的，这应该是可能的——您可能需要编写某种自定义处理程序来同步会话，使用与您在 PHP 中用于实现此目的的普通技术不太相似的东西。

您可能会发现您需要使用相对较新的版本，也许是 2.2，我认为这包括一些用于多域路由的东西——这可能是一个问题。

关于管理员/超级管理员功能，假设以上所有内容都应按预期工作，只需确保所有防火墙（如果您有 >1）在相同的上下文中运行，否则它们将需要为每个防火墙重新进行身份验证。

# css - 如何从 Ismpect 元素中找到 localhost:22 行

> ID：13678657
> 
> 赞同：2
> 
> 时间：2012-12-03T07:06:36.567
> 
> 标签：css

我正在使用谷歌浏览器，当我检查元素时，一些 css 规则定义了特定的路径，例如 (template.css:44) 但有些属性在 localhost:22 (body a { color: #EB540A;)，那么怎么能我到达了这个属性，这个 CSS 放在哪里？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:11:03.727

右键单击鼠标，然后单击“查看页面源代码”。现在将打开一个新窗口，您可以看到 css 文件（template.css）的路径并且可以进行编辑。

# oracle - 如何在 OBI 中进行 Oracle Data Integrator ETL 流程监控

> ID：13678661
> 
> 赞同：0
> 
> 时间：2012-12-03T07:06:50.767
> 
> 标签：oracle, plsql, etl, business-intelligence, oracle-data-integrator

我在 Oracle Data Integrator 11 中有一些 ETL 流程，所以我需要在 BI 中对这些流程进行报告，我需要从 ODI 中导出以下信息（到 BI 中）：

1.  数据加载日期
2.  报告名称（例如 rep1、rep2、rep3）= ODI 中的接口名称
3.  装载时间
4.  结果 - 正常/错误

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:16:35.670

这很容易

我们需要创建一个表如下

```
create table view_sessions as (SELECT
    sess_no,
    sess_name,
    sess_status,
    SCEN_NAME, 
    TO_CHAR(SESS_BEG,'yyyy-mm-dd hh24:mi:ss') as "Session_Start",
    TO_CHAR(SESS_END,'yyyy-mm-dd hh24:mi:ss') as "Session_End",
    SESS_DUR
FROM SNP_SESSION); 
```

然后在 OBI 管理工具中构建新的存储库（基于该表）

毕竟在 OBI 中创建请求的报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:54:36.380

您有三个表来获取所有信息。

SNP_SESSION

SNP_SESS_STEP

SNP_SESS_TASK

这些表将仅在 odi 存储库中可用。

所有这些表都与 SESS_NO 连接。您可以轻松查询。

SESS_STATUS 列会告诉你 OK/ERROR。

还有其他有用的列，如 sess_sur、sess_beg、sess_end、nb_ins 等。

# sql - Postgres 选择一个 concat 字段并在 Rails 中对其进行 ILIKE

> ID：13678663
> 
> 赞同：5
> 
> 时间：2012-12-03T07:07:00.810
> 
> 标签：sql, ruby-on-rails, postgresql

很简单，尝试这样做

```
 SELECT  (artist_name || ' ' || name) as full_name FROM "songs"  WHERE "songs"."working" = 't' AND (full_name ILIKE('%Jack Beats%')) AND (full_name ILIKE('%Epidemic%')) AND (full_name ILIKE('%Dillon Francis%')) ORDER BY songs.published_at asc LIMIT 1 
```

但我明白了

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  column "full_name" does not exist 
```

我试过在车站之前添加表名，但没有效果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T07:50:24.570

正如评论中提到的那样，您不能在 WHERE 子句中从 SELECT 引用别名。您可以按照 dwurf 的建议使用派生表，但 Rails 中的派生表有点混乱。您可以改为在 WHERE 中扩展您的串联：

```
Song.where(:working => true)
    .where("artist_name || ' ' || name ILIKE ?", '%Jack Beats%')
    .where("artist_name || ' ' || name ILIKE ?", '%Epidemic%')
    .where("artist_name || ' ' || name ILIKE ?", '%Dillon Francis%')
    .order('songs.published_at asc')
    .limit(1) 
```

如果你经常做这种事情，命名范围可能会很有用：

```
class Song < ActiveRecord::Base
    #...
    def self.full_name_like(name)
        where("artist_name || ' ' || name ILIKE ?", "%#{name}%")
    end
end 
```

接着：

```
Song.where(:working => true)
    .full_name_like('Jack Beats')
    .full_name_like('Epidemic')
    .full_name_like('Dillon Francis')
    .order('songs.published_at asc')
    .limit(1) 
```

如果您的应用程序将执行大量这样的 ILIKE 搜索，那么您可能需要研究全文搜索系统：LIKE 查询会导致表扫描，而表扫描会导致悲伤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:27:19.130

您不能在 where 子句中引用列别名。编写此查询的正确方法是：

```
SELECT  
  (artist_name || ' ' || name) AS full_name 
FROM "songs"  
WHERE "songs"."working" = 't' 
AND ((artist_name || ' ' || name) ILIKE('%Jack Beats%')) 
AND ((artist_name || ' ' || name) ILIKE('%Epidemic%'))
AND ((artist_name || ' ' || name) ILIKE('%Dillon Francis%'))
ORDER BY songs.published_at ASC
limit 1
; 
```

sub_stantial 的方法看起来更像这样：

```
select full_name 
from (
    SELECT  
        (artist_name || ' ' || name) AS full_name 
    FROM "songs"  
    WHERE "songs"."working" = 't' 
    ORDER BY songs.published_at ASC
)
WHERE (full_name ILIKE('%Jack Beats%')) 
AND (full_name ILIKE('%Epidemic%'))
AND (full_name ILIKE('%Dillon Francis%'))
LIMIT 1
; 
```

这两个查询的性能大致相同（非常垃圾），因为它们都必须进行全表扫描以构建 full_name 列然后对结果进行排序。您也许可以将索引添加到“工作”以加快这些查询。

这是postgresql中的一个[sql小提琴](http://www.sqlfiddle.com/#!12/27bc8/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-05T06:51:02.683

程序化的 Arel 版本

*注意：这尚未针对 SQL 注入进行全面测试。*

```
class ApplicationRecord < ActiveRecord::Base
  scope :fields_sentence_ilike, -> (*fields, term) {
    sanitized_term = connection.quote("%#{term}%")

    # InfixOperation.new(operator, left, right) => left operator right => concatenated_fiels ILIKE '%word%'
    # NamedFunction.new(name, expression_nodes) => name(node0, node1, ...nodeN) => CONCAT_WS("columnA", "columnB", "columnC")
    where(
      Arel::Nodes::InfixOperation.new(
        Arel::Nodes::SqlLiteral.new('ILIKE'),
        Arel::Nodes::NamedFunction.new(
          'CONCAT_WS', # CONCAT_WS concatenates strings using the first argument. In this case, an empty space.
          [
            Arel::Nodes::SqlLiteral.new("' '"), # CONCAT by empty space
            *fields.map { |field|
              # CONCATING any NULL fields results NULL (like multiplying any number by 0 equals 0). COALESCE to empty string.
              Arel::Nodes::NamedFunction.new('COALESCE', [arel_attribute(field), Arel::Nodes::SqlLiteral.new("''")])
            }
          ]
        ),
        Arel::Nodes::SqlLiteral.new(sanitized_term)
      )
    )
  }
end 
```

然后是 Songs 模型的具体实现

```
class Song < ApplicationRecord
  scope :full_name_like, -> (full_name) { fields_sentence_ilike(:artist_name, :name, full_name) }
end 
```

用法

```
Song.full_name_like('Jack Beats')
  .full_name_like('Epidemic')
  .full_name_like('Dillon Francis') 
```

# visual-studio-2010 - 尽管类不是从 VS2010 中的 CString 类派生的，但出现链接错误 2019

> ID：13678664
> 
> 赞同：0
> 
> 时间：2012-12-03T07:07:07.327
> 
> 标签：visual-studio-2010, visual-c++, lnk2019

我收到以下错误

> 错误 LNK2019：未解析的外部符号“公共：类 ATL::CStringT > > __thiscall CFILicenseSettings::GetCodeStartup1(void)”(?GetCodeStartup1@CFILicenseSettings@@QAE?AV?$CStringT@DV?$StrTraitMFC_DLL@DV?$ChTraitsCRT@D @ATL@@@@@ATL@@XZ) 在函数 __catch$?ValidateLicense@CFIServerDlg@@AAE_NXZ$0 E:\TIMSWebServerManager_lic\TIMSWebServerManager\TIMSWebServerManager.obj TIMSWebServerManager 中引用

我的函数定义如下：

```
CString CFILicenseSettings::GetCodeStartup1()
{
CString a = "why";
return a;
} 
```

函数的声明如下：-

```
CString     GetCodeStartup1(); 
```

当我在网上搜索上述错误时，我发现此错误是因为我的类是从 CString 类派生的，但事实并非如此.....当我调用函数 GetCodeStartup1(); 时出现此错误；如果我评论函数 GetCodeStartup1() 的调用；我的程序编译成功

我怎样才能消除错误？

提前致谢

# mysql - 如何查询我的 has_many 关联表的参数？

> ID：13678671
> 
> 赞同：1
> 
> 时间：2012-12-03T07:07:55.507
> 
> 标签：mysql, sql, sqlite

```
Category 
String id; 
String name; 
boolean enabled;

Product 
String id; 
String name; 
boolean enabled; 
int categoryId; 
```

我需要搜索所有`enabled`实际具有`products`并且`products`应该`enabled`设置为的类别`true`。

我不是很擅长 SQL 查询，所以有人可以指点我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:21:38.200

这里是：

```
SELECT Category.* FROM Category   
INNER JOIN Product ON Category.id=Product.categoryId  
 WHERE  Category.enabled = 1 AND Product.enabled=1
 GROUP BY Category.id 
```

我不确定你的数据库中的布尔值表示，假设它是 1/0

# python - 如何通过 Python 启动单服务？

> ID：13678676
> 
> 赞同：2
> 
> 时间：2012-12-03T07:08:06.103
> 
> 标签：python, mono

我有一个这样的 bash shell：

```
server_home=`pwd`
kill `cat $server_home'/AppService.pid'`
if [ -f $server_home/AppService.pid ]; then
    rm $server_home/AppService.pid
fi
export MONO_PATH=$server_home"/bin:"$server_home"/Function"
mono-service2 -l:$server_home/AppService.pid $server_home/bin/AppService.exe 
```

它可以启动单声道服务。现在我需要做更多的工作，所以我写了一个这样的python shell：

```
import os
server_home=os.getcwd()
tmpPID = server_home +'/AppService.pid'
tmpSS = server_home + '/bin/AppService.exe'
os.popen("kill `cat '" + tmpPID +"'`").close()
if os.path.isfile(tmpPID):
    print "start delete pid"
    os.remove(tmpPID)
else:
    print "cant find the " + tmpPID

print  'mono-service2 -l:'+tmpPID+' '+tmpSS
output = os.popen('mono-service2 -l:'+tmpPID+' '+tmpSS)
print output.read()
output.close() 
```

它将删除 AppService.PID 文件但不会启动服务。我的代码有什么问题？请帮我。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:44:06.220

`os.popen`不[推荐](http://docs.python.org/2/library/os.html?highlight=popen#os.popen)使用。您是否尝试过使用[subprocess](http://docs.python.org/2/library/subprocess.html?highlight=subprocess#using-the-subprocess-module)？

```
subprocess.call(["mono-service2", "-l:" + tmpPID, tmpSS]) 
```

# jquery - 如何使用jquery在spring中添加文本框

> ID：13678679
> 
> 赞同：1
> 
> 时间：2012-12-03T07:08:40.797
> 
> 标签：jquery, spring-mvc

## 春季MVC

我正在执行以下代码以在 Spring MVC 表单中添加文本框。我已经使用 jquery 以弹簧形式动态添加文本框。但是，当我尝试添加弹簧文本框时，此代码颂歌不起作用。

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ page session="false"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<html>
<head>
<title>Home</title>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>

<style type="text/css">
div {
    padding: 8px;
}
</style>

<script type="text/javascript">
    $(document).ready(function() {
        var counter = 2;
        $("#addButton").click(function() {
          if        (counter > 10) 
         {
                                                      alert("Only 10 textboxes allow");
                                                return false;
                                            }

                                            var newTextBoxDiv = $(document.createElement('div'))
                                                                .attr("id", 'TextBoxDiv'+ counter);
                                            newTextBoxDiv.append('<label>Input Title '+ counter
                                                                    + ' : </label>'
                                                                    + '<form:input path="labels[2]" id="textbox' + counter + '" />');

                                            newTextBoxDiv.appendTo("#TextBoxDiv"+ counter);
                                            counter++; 
                                            $("#TextBoxesGroup").append(newTextBoxDiv);

                        });//addButton close

                        // remove textbox
                        $("#removeButton").click(function() {
                            if (counter == 1) {
                                alert("No more textbox to remove");
                                return false;
                            }
                            counter--;
                            $("#TextBoxDiv" + counter).remove();
                        });// end remove textbox

                        // get textbox value
                        $("#getButtonValue").click(
                                function() {

                                    var msg = '';
                                    for (i = 1; i < counter; i++) {
                                        msg += "\n Textbox #" + i + " : "
                                                + $('#textbox' + i).val();
                                    }
                                    alert(msg);
                                });
                    }); // end get textbox value
</script>
</head>
<body>
    <form:form method="POST" commandName="subindicator" action="saveXML">
        <div>
    <div id='TextBoxesGroup'>
        <div id="TextBoxDiv1">
            <label>Input Title 1 : </label><form:input path="labels[1]" id='textbox1'/>
        </div>
    </div>
    <input type='button' value='Add Button' id='addButton'>
    <input type='button' value='Remove Button' id='removeButton'>
    <input type='button' value='Get TextBox Value' id='getButtonValue'>

    </div>
    </form:form>
</body>
</html> 
```

此代码适用于 html 文本框，但不适用于添加 spring 文本框并且不适用于：

```
newTextBoxDiv.append('<label>Input Title '+ counter
                                                                    + ' : </label>'
                                                                    + '<form:input path="labels[2]" id="textbox' + counter + '" />'); 
```

如果我以这种方式编写此代码，则上面的代码可以工作-

```
var newTextBoxDiv = $(document.createElement('div'))
         .attr("id", 'TextBoxDiv' + counter);

    newTextBoxDiv.after().html('<label>Textbox #'+ counter + ' : </label>' +
          '<input type="text" name="textbox' + counter + 
          '" id="textbox' + counter + '" value="" >'); 
```

请给我解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:48:18.647

发生这种情况是因为，

```
<form:input path="labels[2]" id="textbox' + counter + '" /> 
```

将转换为，

```
<input name"labels[2]" id="labels2"> 
```

并且 javascript 无法理解 spring 表单标签。每当您单击添加按钮时，您都可以使用递增的计数器值来生成新索引，就像您现在正在做的那样。

# c# - 在 UpdatePanel 中处理异步请求时页面停止

> ID：13678680
> 
> 赞同：1
> 
> 时间：2012-12-03T07:08:42.990
> 
> 标签：c#, asp.net, asp.net-ajax

我在一个 asp.net 页面中有两个 UpdatePanel。一个有一个提交按钮和一个进度条，单击此按钮有一个从 XML 文件中获取数据并存储在数据库中的过程。

第二个更新面板用于显示日志中有关从 XML 插入数据的进度的内容，并使用计时器控件对其进行更新。

现在的问题是，当从第一个面板提交请求时，第二个面板停止更新内容。

我应该尝试任何其他库或某种 jq 方法来更新页面。

提前谢谢

这是我的代码，...

```
 <asp:scriptmanager runat="server" ID="scrpManager">     </asp:scriptmanager> 
   <asp:UpdatePanel ID="updLeft" runat ="server">
 <ContentTemplate>   
    <asp:Button ID="Submit" runat="server" onclick="Submit_Click" 
        Text="Process" />
        </ContentTemplate>
<Triggers >
<asp:AsyncPostBackTrigger ControlID ="Button3" EventName="Click" />
  </Triggers>

</asp:UpdatePanel>  
      <asp:UpdateProgress runat="server" AssociatedUpdatePanelID="updLeft" 
        ID="UpdateProgress21">
    <ProgressTemplate>
        <div class="loadingbox">
            <img src="spinner.gif" align="absmiddle" />&nbsp;&nbsp;
            <asp:Label ID="lblProgress21" runat="server">Please wait while processing...</asp:Label>
        </div>
    </ProgressTemplate>
</asp:UpdateProgress> 

<asp:UpdatePanel ID="updPnlRight" runat ="server" >
<ContentTemplate >  
 <asp:Timer Interval="1000" ID="timer1" runat="server" ontick="timer1_Tick"  ></asp:Timer> 

    <asp:GridView ID="GridView1" ShowHeader ="false" AutoGenerateColumns ="false" runat="server">
    <Columns >
    <asp:BoundField  DataField ="status_MSG" HeaderText ="" /> 
    </Columns>
     </asp:GridView>
    </ContentTemplate>
    <Triggers >
   <ajax:AsyncPostBackTrigger ControlID ="timer1" EventName="Tick" />

  </Triggers> 
    </ajax:UpdatePanel> 

    protected void Submit_Click(object sender, EventArgs e)
{
    //Do insertion process , takes 30 minutes,
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:24:26.217

我对更新面板一无所知。我敦促您使用替代方案，例如客户端模板。Knockout.js 和 Angular.js 可能是很好的起点。

如果您粘贴代码或问题的（非）工作示例，我将尝试提供修复。

# php - base64 需要修改

> ID：13678681
> 
> 赞同：2
> 
> 时间：2012-12-03T07:08:51.447
> 
> 标签：php, base64

base64 的问题

```
$data = 'my data';
echo $encryptedData = base64_encode($data); 
```

// 输出：bXkgZGF0YQ==

我在令牌中添加了更多字符

```
$encryptedData = $encryptedData . 'sdfsdfasdfsd';
echo $data = base64_decode($encryptedData); 
```

// 输出：我的数据~Ç_jÇ_±

现在我得到了实际数据+垃圾数据。如果令牌有任何变化，我不想要**任何数据**或**只想要数据。**有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:12:32.217

您应该在编码而不是解码时添加令牌

```
$data = 'my data'.'sdfsdfasdfsd';
$encryptedData = base64_encode($data); 
```

比

```
echo $data = base64_decode($encryptedData); 
```

并删除令牌

```
$trimmed = rtrim($data, "sdfsdfasdfsd");
echo $trimmed; 
```

[**键盘**](http://codepad.org/urrcSdvy)

正如 Jon Skeet 所说，base64 绝不是加密。它根本不会使内容保密

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:37:30.760

为确保只能通过更改 来更改 base64 编码字符串`$data`，您需要添加验证令牌。

添加此类验证的一种简单方法是使用密钥散列，其中密钥是秘密的：

```
$data = 'this product sells for 5 dollars';
$enc = base64_encode($data);
$token = base64_encode(hash_hmac('sha256', $enc, 'your secret key here', true));

$my_token = $token . ':' . $enc; 
```

输出：

```
ZMkqZIa6UazMhbYDiPqjdS1NmU1ulh+Gi2tgWHRKKpQ=:dGhpcyBwcm9kdWN0IHNlbGxzIGZvciA1IGRvbGxhcnM= 
```

当您收到此类令牌时，您首先拆分`:`然后使用第一部分（键控哈希）来验证第二部分（数据）的内容。只有匹配，你才能（相对）确定数据没有被篡改。

# spring - Spring Bean 实现接口

> ID：13678683
> 
> 赞同：1
> 
> 时间：2012-12-03T07:08:59.030
> 
> 标签：spring, spring-mvc

```
public interface Service {

  public void doSomething();
}

@Service
public class MyService implements service{

      @Transactional 
      public void doSomething(){
      }
}

@Controller
public class MyController {

  @Autowired
  private MyService service;
} 
```

在上述情况下，自动装配失败并出现异常“ `illegalArgumentException : argument type mismatch`”。当我`implements service`从 MyService 中删除时，一切正常。

我已经搜索并`<aop:aspectj-autoproxy proxy-target-class="true"/>`在 applicationContext.xml 中找到了成功自动装配的地方，并且它有效。我还发现当使用@Transactional 时，spring 使用 JDK 代理。

我有一些困惑，

1.  @Transactional 如何与代理相关
2.  为什么 spring 对实现接口的 bean 使用 JDK 代理。
3.  为什么我需要放置`<aop:aspectj-autoproxy proxy-target-class="true"/>`在 applicationContext.xml

谁能解释一下？或向我推荐任何文章或博客

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:39:47.720

代理是 Spring 实现声明式事务管理的方式。[Spring reference](http://static.springsource.org/spring/docs/3.1.0.RELEASE/reference/html/transaction.html#transaction-declarative)是解决您对此问题的最佳场所。

> 关于 Spring 框架的声明式事务支持，最重要的概念是这种支持是通过 AOP 代理启用的，并且事务建议是由元数据驱动的（目前是基于 XML 或基于注释的）。AOP 与事务元数据的组合产生了一个 AOP 代理，它使用 TransactionInterceptor 和适当的 PlatformTransactionManager 实现来驱动围绕方法调用的事务。

和上`<aop:aspectj-autoproxy proxy-target-class="true"/>`

> 元素上的 proxy-target-class 属性控制为使用 @Transactional 注释注释的类创建什么类型的事务代理。如果 proxy-target-class 属性设置为 true，则创建基于类的代理。如果 proxy-target-class 为 false 或省略该属性，则会创建基于标准 JDK 接口的代理。（有关不同代理类型的讨论，请参见第 8.6 节，“代理机制”。）

# javascript - 如何评估 jQuery 选择器 $('#foo a')？

> ID：13678702
> 
> 赞同：44
> 
> 时间：2012-12-03T07:10:46.157
> 
> 标签：javascript, jquery, performance, jquery-selectors, sizzle

作为 jQuery 代码 ( [https://coderwall.com/p/7uchvg](https://coderwall.com/p/7uchvg) ) 的示例，我读到表达式的`$('#foo a');`行为如下：

> 在页面中找到每个`a`，然后`a`在里面过滤`#foo`。

而且看起来效率不高。

那是对的吗？如果是，我们应该如何以更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-03T07:13:39.277

这是正确的 - Sizzle（jQuery 的选择器引擎）的行为[方式与 CSS 选择器相同](http://css-tricks.com/efficiently-rendering-css/)。CSS 和 Sizzle 选择器[从右到左求值](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-think-right-to-left-with-jquery/)，因此`#foo a`会找到所有`a`节点，然后按从`#foo`.

您可以通过确保您的叶子选择器具有高特异性来改进这一点，通常是通过给它们一个类或 ID。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-03T07:14:47.673

> 我们应该如何以更好的方式做到这一点？

使用 jQuery 中的 context 参数。

```
$('a', '#foo'); 
```

现在 jQuery 将搜索 id: foo 元素上下文中的所有锚点。

在您的查询中，省略时默认为文档：

```
$('#foo a'); == $('#foo a', document); 
```

在这种情况下，您的查询确实效率不高。

你可以看看[这篇文章](http://techblog.chegg.com/2011/10/07/using-jquery-selectors-efficiently/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-06T17:03:34.353

虽然 Sizzle 确实是一个从右到左的引擎（这与解释 css 的方式相同），但您示例中的特定选择器不会选择页面上的所有锚元素，然后将其父元素过滤为匹配“foo”的 id。Sizzle 实际上优化了任何以 ID 开头的选择器，并将其用作整个选择的上下文，而不是使用文档。换句话说，您选择的选择器基本上转换为：

```
document.getElementById("foo").getElementsByTagName("a") 
```

真的，这根本不是一个糟糕的选择器。

然而，考虑到 jQuery 需要做的其他事情（包括循环元素以将它们合并到 jQuery 实例中），jQuery("#foo").find("a") 将始终是最快的，因为 jQuery 实现了一个 jQuery仅 id 选择器的对象创建快捷方式，然后它会从 #foo 进行查找。

换句话说，Sizzle 本身在做`Sizzle("#foo a")`and时并没有太大的不同`Sizzle("a", document.getElementById("foo"))`，但是`jQuery("#foo").find...`会因为 jQuery 自己的 ID 快捷方式而更快。

顺便说一句，我对 Sizzle 的评论是假设 querySelectorAll 没有被使用。如果是，Sizzle 只是将它传递给 qsa，它仍然不如使用 jQuery 的 ID 快捷方式快。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-03T07:33:09.327

您可以使用 find() 对选择器顺序进行更精细的控制：

```
$('#foo').find('a'); 
```

这对于更复杂的选择器当然会更令人印象深刻，您可以在其中链接 find() 和 filter()。

作为记录`$('#foo').find('a') === $('a','#foo')`

[更新]好的，我后来意识到这正是你的链接所说的......

jQuery 选择器引擎 (Sizzle) 已于去年进行了重构，您将在此处找到详细说明： [http ://www.wordsbyf.at/2011/11/23/selectors-selectoring/](http://www.wordsbyf.at/2011/11/23/selectors-selectoring/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-03T07:13:32.437

无需使用`a`内部`#foo` 元素进行过滤，只需将类附加到`a`元素并获取`a`具有类的元素，如`$("a.class");`. 这样会更有效率。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T14:57:04.763

还有一个“自己试试”：

1.  [jsperf 用于 10000 个元素上的各种选择器](http://jsperf.com/jquery-context-or-no-context/4)
2.  [jsperf 用于 300 个元素上的各种选择器](http://jsperf.com/jquery-context-or-no-context/6)
3.  [jsperf 用于“更具代表性的 DOM”上的各种选择器](http://jsperf.com/jquery-context-or-no-context/7)

与“平面” DOM（1 和 2）似乎没有太大区别，但嵌套 DOM 的性能差异更大。

另请注意，一些测试用例没有选择正确的元素（即`$('.a')`vs `$('.a', context)`），但我将它们从原始测试中保留下来只是为了进行比较。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-12-03T07:21:04.753

此示例将检索`a`名为`foo`, 的元素中的所有锚点元素，以查找页面中的每个 a ，然后根据您的需要过滤 #foo 中的 a 您应该选择`a #foo`

```
$("a #foo"); 
```

这将检索`foo`元素内的所有`a`元素。

# php - 如果数据库会话数据被认为是旧的，如何清除它们？

> ID：13678703
> 
> 赞同：-1
> 
> 时间：2012-12-03T07:10:52.167
> 
> 标签：php

当他们的创建列数据太高时，我想清除数据库会话数据。如何成功地做到这一点？

* * *

**编辑 ：**

一些代码：

```
// starting a session
public static function getIstance($_MYSESSION_CONF)
    {
        if (!isset(self::$instance)) {
            $c = __CLASS__;
            self::$instance = new $c;
            self::$instance->setUp($_MYSESSION_CONF);
        }

        return self::$instance;
    }

private function setUp($config) {

        $this->db_type = $config["DATABASE_TYPE"];
        $this->db_name = $config["DB_DATABASE"];
        $this->db_pass = $config["DB_PASSWORD"];
        $this->db_server = $config["DB_SERVER"];
        $this->db_username = $config["DB_USERNAME"];

        $this->table_name_session = $config["TB_NAME_SESSION"];
        $this->table_name_variable = $config["TB_NAME_VALUE"];
        $this->table_column_sid = $config["SID"];
        $this->table_column_name = $config["NAME"];
        $this->table_column_value = $config["VALUE"];
        $this->table_column_fexp = $config["FEXP"];
        $this->table_column_ua = $config["UA"];
        $this->table_column_exp = $config["EXP"];

        $this->sid_name = $config["SESSION_VAR_NAME"];
        $this->overwrite = ($config["OVERWRITE_PHP_FUNCTION"]=='1')?true:false;
        $this->sid_len = intval($config["SID_LEN"]);
        $this->session_duration = intval($config["DURATION"]);
        $this->session_max_duration = intval($config["MAX_DURATION"]);
        $this->use_cookie = ($config["USE_COOKIE"]=='1')?true:false;
        $this->encrypt_data = ($config["CRIPT"]=='1')?true:false;
        $this->encrypt_key = $config["CRIPT_KEY"];

        $this->hijackBlock = ($config["ENABLE_ANTI_HIJACKING"]=='1')?true:false;
        $this->hijackSalt = $config["ANTI_HIJACKING_SALT"];

        $this->dbConnection();
        $this->readSessionId();
        //check if i have to overwrite php
        if ($this->overwrite) { // it's true
            //yes.. i'm the best so i overwrite php function
            //Make sure session cookies expire when we want it to expires
            ini_set('session.cookie_lifetime', $this->session_duration);            
            //set the value of the garbage collector
            ini_set('session.gc_maxlifetime', $this->session_max_duration);
            // set the session name to our fantastic name
            ini_set('session.name', $this->sid_name);                        

            // register the new handler
            session_set_save_handler(
                array(&$this, 'open'),
                array(&$this, 'close'),
                array(&$this, 'read'),
                array(&$this, 'write'),
                array(&$this, 'destroy'),
                array(&$this, 'gc')
            );

//          register_shutdown_function('session_write_close');

            // start the session and cross finger
            session_id($this->getSessionId());
            session_start();
        }
    }
    ...
    function gc($maxlifetime)
    {
        $diff = time() - $this->session_max_duration;
        $this->SQLStatement_DeleteExpiredSession->bindParam(':time', $diff, PDO::PARAM_INT);
        if ($this->SQLStatement_DeleteExpiredSession->execute()===FALSE) {
            //trigger_error("Somenthing goes wrong with the garbace collector", E_USER_ERROR);
            trigger_error("Somenthing goes wrong with the garbace collector");
        } else {
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:18:20.457

更新 table 上每次更新的时间戳。

通过获取会话的生命周期 `$lifetime = ini_get('session.gc_maxlifetime');`

从 db 中删除超过`updatedtimestamp + $lifetime`

# dialog - 是否可以打开另一个对话框而不关闭primefaces中的现有对话框？

> ID：13678706
> 
> 赞同：2
> 
> 时间：2012-12-03T07:11:01.777
> 
> 标签：dialog, primefaces

在我的应用程序中，我有一个 primefaces 网格，当单击每个网格时，它将详细打开一个对话框窗口，但现在我需要关闭弹出窗口才能打开下一个窗口，有没有办法打开其他对话框而不关闭现有的对话窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:21:14.533

您可以根据需要打开任意数量的对话框，只需确保为它们提供了唯一的`widgetVar`ID：

```
<p:dialog widgetVar="dlg1">
    <h:outputText value="Hello from first dialog"/>
</p:dialog>
<p:dialog widgetVar="dlg2">
    <h:outputText value="Hello from second dialog"/>
</p:dialog>

...

<p:commandButton value="Open First" onclick="dlg1.show()"/>
<p:commandButton value="Open Second" onclick="dlg2.show()"/> 
```

单击`commandButton`上面将同时打开两个单独的对话框。

# asp.net - 跨多个项目的 MVC 共享布局

> ID：13678711
> 
> 赞同：4
> 
> 时间：2012-12-03T07:11:07.237
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有多个应用程序的多个 MVC3/4 项目（在同一个解决方案中 - 它们共享一个基础设施和服务项目）。每个网站都需要共享相同的标题。

最简单的方法是什么？有没有办法在多个项目中使用 _Layout.cshtml？

我想避免一个项目涉及多个领域，因为应用程序如此多样化，并且我想避免每次对其中一个应用程序进行更改时都部署整个解决方案。

是否有捷径可寻？

编辑：今天考虑了一下...作为替代方案 - 在我的基础设施项目中使用返回 html 标头的 html 帮助程序怎么样？然后，所有引用它的项目都可以使用它……好主意吗？不？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T15:20:11.223

我们的 Intranet 有这个，目前使用 ASP.net 表单。我想更改为 MVC，这就是我遇到这篇文章的方式，问的问题和你一样。寻找在多个项目之间共享布局/标题的“更好”方式。

我们过去（并且可能仍然）做的是将 HTML 保存在数据库中，这是一个共享 DLL，它获取 HTML 混合变量（菜单等），然后调用构建头函数。

当您更新 Header.dll 并且您需要将其发布到任何地方时，这会下降。这是我为这个问题找到的最佳解决方案，但如果可以访问项目上方共享文件夹中的视图，那将有很大帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-12T15:00:20.000

您可以使用“区域”或用户部分视图

# android - 如何在android的单个listview项目中创建两个列

> ID：13678714
> 
> 赞同：-2
> 
> 时间：2012-12-03T07:11:14.123
> 
> 标签：android, android-layout

即使我将两个图像放在一个列表视图项中，如何单击是否选中了哪一行上的哪个图像。请帮助解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:16:59.460

您可以使用列表视图的基本适配器来了解您需要什么

```
public class bsAdapter extends BaseAdapter
{
    Activity cntx;
    public bsAdapter(Activity context)
    {
        // TODO Auto-generated constructor stub
        this.cntx=context;

    }

    public int getCount()
    {
        // TODO Auto-generated method stub
        return listview_arr.length;
    }

    public Object getItem(int position)
    {
        // TODO Auto-generated method stub
        return listview_arr[position];
    }

    public long getItemId(int position)
    {
        // TODO Auto-generated method stub
        return name_array.length;
    }

    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row=null;
        Context context = getApplicationContext();
        LayoutInflater inflater=cntx.getLayoutInflater();
        row=inflater.inflate(R.layout.list_item, null);

        ImageView img1      =   (ImageView)row.findViewById(R.id.img1);
        ImageView img2      =   (ImageView)row.findViewById(R.id.img2);

        img1.setOnClickListener(new OnClickListener(){

            public void onClick(View v) 
            {
                 // your code is here
            }
        });

     img2.setOnClickListener(new OnClickListener(){

            public void onClick(View v) 
            {
                    // your code is here
            }
        });

    return row;
    }
} 
```

在您的活动中将您的列表视图设置为适配器`setListAdapter(new bsAdapter(this));`

# sql - 在另一个 WHERE 子句之前执行一个 WHERE 子句

> ID：13678718
> 
> 赞同：1
> 
> 时间：2012-12-03T07:11:29.967
> 
> 标签：sql, sql-server, sql-server-2005

我有以下声明

```
SELECT * FROM foo
WHERE LEN(bar) = 4 AND CONVERT(Int,bar) >= 5000 
```

`bar`长度正好为 4 个字符的值是整数。其他值不是整数，因此在尝试将其中一个值转换为整数时会引发转换异常。

我认为将 放在`LEN(bar)`前面就足够了`CONVERT(Int,bar) >= 5000`。但事实并非如此。

我怎样才能优先考虑特定的 where 子句？在我的示例中，我显然想在转换和比较它们之前选择所有长度为 4 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:47:04.127

6 个答案，其中 5 个不起作用（对于 SQL Server）...

```
SELECT *
  FROM foo
 WHERE CASE WHEN LEN(bar) = 4 THEN
       CASE WHEN CONVERT(Int,bar) >= 5000 THEN 1 ELSE 0 END
       END = 1; 
```

WHERE/INNER JOIN 条件可以按查询优化器确定的最佳顺序执行。没有短路布尔评估。

专门针对您的问题，因为您知道具有 4 个字符的数据是一个数字，所以您可以进行直接的词典（文本）比较（是的，它有效）：

```
SELECT *
  FROM foo
 WHERE LEN(bar) = 4 AND bar > '5000'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:43:14.357

试试这个

```
SELECT bar FROM 
(
SELECT  CASE
       WHEN LEN(bar) = 4 THEN   CAST( bar as int) 
       ELSE  CAST(-1 as int) END bar
FROM Foo
) Foo
WHERE bar>5000 
```

# c# - 让表单元素等到异步/等待完成

> ID：13678720
> 
> 赞同：0
> 
> 时间：2012-12-03T07:11:38.213
> 
> 标签：c#, .net, winforms, multithreading, design-patterns

我有一个简单的应用程序，它使用 async / await（带有异步目标包的 .NET 4.0）与 db 通信并返回结果。

在数据可用之前，我需要更改某些表单元素的行为。对于简单的实现，我想禁用表单元素，直到数据可用。或者改变表单元素上点击事件的行为。

正确的做法是什么？

我想过

*   有一些布尔属性让元素知道线程正在运行。
*   使用事件表单完成工作的按钮？（我怀疑这是解决方案，但请详细说明如何）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:23:27.260

这应该与我们在您的其他问题中看到的代码一样简单。逻辑上你想要：

```
foo.Enabled = false;
bar.Enabled = false;
// etc
await Task.Run(...);
foo.Enabled = true;
bar.Enabled = true; 
```

现在，如果将需要这种处理的所有控件放在一起，则可以使这变得更简单：

```
SetEnabled(controlCollection, false);
await Task.Run(...);
SetEnabled(controlCollection, true);

...

private static void SetEnabled(IEnumerable<Control> controls, bool enabled)
{
    foreach (var control in controls)
    {
        control.Enabled = enabled;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:48:18.103

要走的路是使用某种观察者模式。这是最通用的解决方案。

所以：

```
public interface ObserveDataAvailable {
  public void dataIsAvailable(final Data data);
}

public class ObserveDataAvailableComposite {
  private final List<ObserveDataAvailable> items = new LinkedList<ObserveDataAvailable>();

  public add(final ObserveDataAvailable item) {
    items.add(item);
  }

  public add(final List<ObserveDataAvailable> items) {
    this.items.addAll(items);
  }

  public void dataIsAvailable(final Data data) {
    for (final ObserveDataAvailable item : items) {
      item.dataIsAvailable(item);
    }
  }
}

public class ActivateFormelementWhenDataAvailable {
  private final FormElement fe;

  public ActivateFormelementWhenDataAvailable(final FormElement fe) {
    this.fe = fe;
  }

  public void dataIsAvailable(final Data data) {
    fe.set(data);
    fe.activate();
  }
}

// Run in thread
private void doDataLookup(final ObserveDataAvailable onCompletion) {
  final Data data = getDataFromDb();
  onCOmpletion.dataIsAvailable(data);
} 
```

现在你可以这样做：

```
final ObserveDataAvailable onCompletion = new ObserveDataAvailable();
<add the form elements>
runInThread(doDataLookup(onCompletion); 
```

# android - 在 ListView 中显示 ArrayList 内容

> ID：13678736
> 
> 赞同：0
> 
> 时间：2012-12-03T07:13:26.070
> 
> 标签：android, listview, android-arrayadapter, android-sdcard

我在 android 的 ListView 中显示 ArrayList 时遇到问题。尝试在 ListView 中加载数组 List 时出现空指针异常。实际上我正在尝试在 android 列表视图中加载存储卡内容。（显示特定文件夹内容）。我是 Android 开发的新手，请帮忙。

```
public class Access_MemCardActivity_main extends Activity{

Button btn_view;
boolean mExternalMediaAvailable=false;
ArrayList<String> item=new ArrayList<String>();

ArrayAdapter<String> adapter;
private ListView lv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String state=Environment.getExternalStorageState();

    if(Environment.MEDIA_MOUNTED.equals(state)){
        mExternalMediaAvailable=true;
    }
    else{
        mExternalMediaAvailable=false;
    }

    btn_view=(Button)findViewById(R.id.btn_view);

   btn_view.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(mExternalMediaAvailable){
            Toast.makeText(getApplicationContext(), "External Media..", Toast.LENGTH_LONG).show();

            //getDir(Environment.getExternalStorageDirectory().toString());
            //Intent i = new Intent(Intent.ACTION_VIEW);
        String SD_Card_Path=Environment.getExternalStorageDirectory().toString();

            //String SD_Card="/sdcard/reports";
            File file = new File(SD_Card_Path);
            File[] file_Array=file.listFiles();

            Toast.makeText(getApplicationContext(), file_Array.toString(), Toast.LENGTH_LONG).show();

            lv=(ListView)findViewById(R.id.list_view);

            for(int i=0;i< file_Array.length;i++){
                 file=file_Array[i];
                 if(file.isDirectory()){
                     Log.d("Directory","Added...");
                     item.add(file.getName()+"/");
                 }
                 else{
                     Log.d("File","Added...");
                     item.add(file.getName());
                 }
            }
            Log.d("adapter", "Before...");
            ArrayAdapter<String> adapter=new ArrayAdapter<String>(Access_MemCardActivity_main.this,android.R.layout.simple_list_item_1,item);
            lv.setAdapter(adapter);
            Log.d("set_adapter", "After...");
            Toast.makeText(getApplicationContext(), adapter.toString(),Toast.LENGTH_LONG).show();
        }
        else{
            Toast.makeText(getApplicationContext(), "You Dont Have External Media..", Toast.LENGTH_LONG).show();
        }
    }
});        
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:08:50.577

在将**适配器**设置为**ListView**之前，通过在**Log中打印****arraylist的****大小**来检查 arraylist 是否包含项目

# javascript - jQuery Animate() 悬停？

> ID：13678740
> 
> 赞同：0
> 
> 时间：2012-12-03T07:13:40.710
> 
> 标签：javascript, jquery, jquery-animate

我第一次使用 jQuery，特别是在我自己的网站上，我使用动画功能使电子邮件选项卡在悬停时略微向下移动（查看右上角：[http://www. tommaxwell.me](http://www.tommaxwell.me)）。但是，我不知道如何让动画在完成后暂停。我可以制作第一个动画以及让它返回到其原始状态所需的动画，但我希望它在用户将光标移开后返回到其原始状态。这是代码，请记住，我意识到它为什么不起作用，我只是不知道解决方案，因为我是 jQuery 新手。

```
$("#emailme").hover(function(){
  $("#emailme").animate({
    paddingTop: "15px"
  }, 100, function() {
    $("#emailme").animate({
        paddingTop: "10px"
    }, 100)
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:18:52.237

的第二个参数`hover`是当用户将鼠标移开时调用的回调。

```
$("#emailme").hover(function() {
    $(this).animate({
        paddingTop: "15px"
    }, 100);
}, function() {
    $(this).animate({
        paddingTop: "10px"
    }, 100)
}); 
```

所以总体思路是：

```
$('selector').hover(function(){
    //stuff to do on mouse in
}, function(){
    //stuff to do on mouse out
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:18:39.693

您应该使用函数`$element.mouseover(fn)`和`$element.mouseout(fn)`。

所以它应该是这样的：

```
$("#emailme").mouseover(function(){
    $(this).animate({
        paddingTop: "15px"
    }, 100);
}).mouseout(function(){
    $(this).animate({
        paddingTop: "10px"
    }, 100);
}); 
```

这意味着将事件处理程序附加到两个不同的事件：当您将鼠标移到它展开的元素上时，当您将鼠标移出时，它会减去 - 就像您想要的那样。

# c# - 如何匹配数组中包含的字符串中的字符串模式

> ID：13678744
> 
> 赞同：0
> 
> 时间：2012-12-03T07:13:49.340
> 
> 标签：c#, .net

我需要检查数组中的字符串模式是否包含在字符串中。我正在使用以下代码，但它匹配数组中包含的确切字符串而不是模式，因此以下代码将失败。我怎样才能做到这一点？

```
String[] stringArrayToBlock = { "#", "/", "string1:", "string2" };
String SearchString = "String1:sdfsfsdf";

 if (stringArrayToBlock.Contains(SearchString.Trim().ToLower()))
 { 
   //Do work
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:17:12.033

我想你应该反之亦然。此外，如果您对 LINQ 持开放态度，则[Enumerable.Any 方法](http://msdn.microsoft.com/en-us/library/bb337697.aspx)非常方便：

```
string[] stringArrayToBlock = { "#", "/", "string1:", "string2" };
string SearchString = "String1:sdfsfsdf";
string lowerCaseString = SearchString.Trim().ToLower();
if (stringArrayToBlock.Any(s => lowerCaseString.Contains(s)))    
{
    //Do work
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T07:17:19.663

使用 LINQ`Any()`方法确定数组的任何元素是否满足条件。这里使用的`Contains`方法是 of `string`，而不是 of `Array`。

```
String[] stringArrayToBlock = { "#", "/", "string1:", "string2" };
String SearchString = "String1:sdfsfsdf";

 if (stringArrayToBlock.Any(s => SearchString.Trim().ToLower().Contains(s)))
 { 
     //Do work
 } 
```

# wpf - ViewModel 可以通过 ResourceDictionary URI 持有 View 的间接引用吗？

> ID：13678759
> 
> 赞同：2
> 
> 时间：2012-12-03T07:15:02.223
> 
> 标签：wpf, mvvm, inversion-of-control

WPF 和 MVVM 就像身体和灵魂。`ViewModel`忘记它可能连接到的东西是有道理的`View`（反之亦然）。

但是，将 View 的资源字典的引用保存在`ViewModel`. 这是否违背了目的？

例如，如果 VM 可以通过资源字典保存视图引用，则下面的代码用于 POC 目的。`ViewModel`可以动态更改此资源字典（基于某些输入参数）。

**MyViewModel.cs**

```
 public interface IViewInjectingViewModel
   {
      void Initialize();
      URI ViewResourceDictionary { get; }
   }

   public class MyViewModel : IViewInjectingViewModel
   {
       private URI _viewResourceDictionary;
       public void Initialize()
       {
          _viewResourceDictionary = new URI("pack://application:,,,/MyApplication;component/Resources/MyApplicationViews.xaml");
        }

        public URI ViewResourceDictionary 
        {
           get
           {
              return _viewResourceDictionary;
           }
        }
   } 
```

**MyApplicationViews.xaml**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <DataTemplate DataType="{x:Type local:MyViewModel}">
    <StackPanel>
        <TextBlock 
        Text="Portfolios" FontFamily="Verdana" 
        FontSize="16" FontWeight="Bold" Margin="6,7,6,4"/>
        <ListBox 
        Margin="2,1" SelectionMode="Single" 
        ItemsSource="{Binding AvailableTraders}"
        SelectedItem="{Binding SelectedTrader}" DisplayMemberPath="Name">
        <!-- ... -->
        </ListBox>
    </StackPanel>
    </DataTemplate>
</ResourceDictionary> 
```

**主窗口.xaml**

```
<Window ...>
     <ContentControl 
    DataContext="{Binding myViewModel}"
    local:MyBehaviors.InjectView="true"/>
</Window> 
```

**常见行为：**

```
public static class MyBehaviors
{
    public static readonly DependencyProperty InjectViewProperty 
        = DependencyProperty.RegisterAttached(..);

    //attached getters and setters...

    private static void OnInjectViewPropertyChanged(..)
    {
        var host = o as ContentControl;
        if ((bool)e.NewValue)
        {
            host.DataContextChanged
                += (o1, e1)  =>
                {
                    var viewInjectingVM = host.DataContext as IViewInjectingViewModel;
                    if (viewInjectingVM != null)
                    {
                        host.Resources.MergedDictionaries.Clear();
                        host.Resources.MergedDictionaries.Add( 
                            new ResourceDictionary() {    
                                Source = viewInjectingVM.ViewResourceDictionary 
                            });

                        host.Content = viewInjectingVM;
                    }
                };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:58:17.763

好的，我会拍的。我认为这没关系。如果您认为视图模型是表示层的一部分，那么让视图模型更改视图的资源字典以响应某些操作完全符合 MVVM 范式。

本质上，您正在更改视图的表示以响应某些操作，并且视图模型具有此责任。因此，在这种情况下更新资源字典在 MVVM 模式中似乎是有效的。

# ajax - 如何防止 Coldfusion 将小数添加到仅数字的 varchars？

> ID：13678765
> 
> 赞同：2
> 
> 时间：2012-12-03T07:15:34.373
> 
> 标签：ajax, coldfusion, decimal, varchar, number-formatting

我正在使用`Coldfusion8`.

我收到一个带有项目编号（随机 35 个字符字符串）的 Ajax 请求，我需要将其写入/检索到数据库中。

问题是，当我只传递以下数字时：

```
 23456 
```

Coldfusion 输出接收：

```
 23456.0 
```

如果字符串包含任何字母，`A12345`则它可以正常工作。

一些代码（虽然这没有显示什么不起作用：

Javascript：

```
var btn = $(this).find('input'),
    putOnRack = btn.jqmData('index'),
    form = "",
    service = "../services/handler.cfc",
    method = "process",
    returnformat = "JSON",
    targetUrl = "",
    formdata = "form_submitted=store_selection&artikelnummer="+putOnRack+"&method="+method+"&returnformat="+returnformat;

    // pass to AJAX
    ajaxFormSubmit( form, service, formdata, targetUrl, successHandler, "no", "", returnformat, "" );

var ajaxFormSubmit = 
    function ( form, service, formdata, targetUrl, successHandler, dataHandler, errorHandler, returnformat, type ){
    $.ajax({
        async: false,
        type: type == "" ? "get" : type,
        url: service,
        data: formdata,    
        dataType: returnformat,
        success: function( objResponse ){}, 
        error: function (jqXHR, XMLHttpRequest, textStatus, errorThrown) {} 
```

在 Coldfusion 中，我通过`process`它来验证和构建表单服务器端，然后我传递给我的数据库处理程序，它得到一个

```
 `LOCAL.form` 
```

包含所有传递信息的对象，所以我的项目编号将在`LOCAL.form.artikelnummer`

如果我输出这个：

```
 cfdump output="e:\dump.txt" label="catch" var="#LOCAL.form.artikelnummer#"> 
```

仅数字字符串被视为`.0`

**问题**
通过 AJAX 将参数传递给 Coldfusion 时，如何确保以 varchar 而不是数字结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:46:51.743

您可以使用[NumberFormat(](http://livedocs.adobe.com/coldfusion/8/functions_m-r_08.html) )。例子：

```
NumberFormat('123.0', '99999')// returns '123' 
```

第二个参数是一个掩码，它决定了您的号码将如何显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:17:29.540

`<cfqueryparam ...>`在您的块中使用`cfquery`并指定`CFSQLType="CF_SQL_INTEGER"`. 这也将防止 SQL 注入攻击（ps 你不应该*将*原始数据从最终用户传递到你的数据库中）。

推荐阅读：

1.  [cfqueryparam (Coldfusion 8)](http://livedocs.adobe.com/coldfusion/8/Tags_p-q_18.html)
2.  [保护您的 ColdFusion 应用程序免受 SQL 注入攻击](http://www.adobe.com/devnet/coldfusion/articles/sql_injection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:19:11.603

您也可以在 CF 中使用 INT 函数。

```
int(123.456) <!--- returns 123 ---> 
```

INT 就像其他语言中的 floor（向下舍入）

见[INT()](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f89.html)

在尝试使用 int 或 numberFormat 之前，您需要检查结果以确保它是否为数字，否则您将收到`The value cannot be converted to a number`错误消息。

```
<cfif isNumeric(yourValue)>
  <cfset yourValue = int(yourValue)>
</cfif> 
```

# php - 加快 YII 应用程序的最快方法？

> ID：13678767
> 
> 赞同：19
> 
> 时间：2012-12-03T07:15:51.700
> 
> 标签：php, performance, yii

我刚刚开始使用 YII 并设法完成了我的第一个应用程序。不幸的是，发布日快到了，我希望这个应用程序超级快。到目前为止，我遇到的加速它的唯一方法是[标准缓存](http://www.yiiframework.com/doc/guide/1.1/en/caching.overview)。还有哪些其他方法可以加快我的应用程序的速度？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-17T06:18:59.427

首先，阅读官方指南中的[性能调优](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance)。此外：

*   [检查 HTTP 缓存](http://www.yiiframework.com/doc/guide/1.1/en/caching.page#http-caching)。
*   更新你的 PHP。每个主要版本都会给你一个很好的提升。
*   对会话使用 redis（或至少是数据库）（默认 PHP 会话使用文件并且是阻塞的）。
*   考虑使用 nginx 代替（或与）apache。它提供的内容要好得多。
*   考虑使用 CDN。
*   调整你的数据库。

这些都是比较容易做到的一般性的事情。如果事后不能接受，不要假设。轮廓。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T18:29:42.167

**1\. 遵循最佳实践**

在这个秘籍中，我们将看到如何配置 Yii 以获得最佳性能，并将看到一些构建响应式应用程序的额外原则。这些原则既是一般性的，也是与 Yii 相关的。因此，即使不使用 Yii，我们也可以应用其中的一些。

准备好

安装 APC ( [http://www.php.net/manual/en/apc.installation.php](http://www.php.net/manual/en/apc.installation.php) )

使用 yiic webapp 生成一个新的 Yii 应用程序

**2.加快会话处理**

在大多数情况下，PHP 中的本机会话处理都很好。您希望更改会话处理方式的原因至少有两个：

使用多台服务器时，需要两台服务器共用一个会话存储

默认 PHP 会话使用文件，因此可能的最大性能受到磁盘 I/O 的限制

**3.使用缓存依赖和链**

Yii 支持许多缓存后端，但真正让 Yii 缓存灵活的是依赖和依赖链支持。在某些情况下，您不能仅仅将数据缓存一个小时，因为缓存的信息可以随时更改。

在这个秘籍中，我们将看到如何缓存整个页面并在更新时始终获得新数据。该页面将是仪表板类型，并将显示添加的五篇最新文章和为一个帐户计算的总数。请注意，操作在添加时无法编辑，但文章可以。

**4.使用 Yii 分析应用程序**

如果部署 Yii 应用程序的所有最佳实践都应用了，但你仍然没有得到你想要的性能，那么很可能是应用程序本身存在一些瓶颈。处理这些瓶颈时的主要原则是，您永远不应该假设任何事情，并且始终在尝试优化代码之前对其进行测试和分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T23:25:19.663

如果您的大部分应用程序都是可缓存的，您应该尝试使用 varnish 之类的代理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-23T09:59:18.393

转到一般的 PHP Mysql 性能转向。

1)[内存缓存](http://www.script-tutorials.com/how-to-use-memcache-with-php/)

Memcahced 开源分布式内存对象缓存系统，它可以帮助您通过减少数据库服务器负载来加速动态 Web 应用程序。

2) [MySQL 性能调优](http://dev.mysql.com/doc/refman/5.0/en/innodb-tuning.html)

3）PHP的Webserver性能转向

# internationalization - 试图让 lang 选项为 Recaptcha 添加 I18n 功能

> ID：13678772
> 
> 赞同：0
> 
> 时间：2012-12-03T07:16:02.713
> 
> 标签：internationalization, recaptcha, lang

我查看了许多论坛和帖子，过去似乎已经确定 lang: 'fr' 例如选项似乎不再适用于 Recaptcha 切换显示的语言环境。我尝试了许多不同的潜在解决方案： 1\. 将 javascript 片段添加到 application.html.erb 2\. 将 &h1=fr 添加到 recaptcha_tags 中的公钥 3\. 添加 display: {theme: 'clean', lang: 'fr '} 在recaptcha_tags

这些都没有奏效。我是否只是接受这是最近某个时候引入 Recaptcha 并且尚未修复的错误？任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:40:22.770

我知道我反应迟钝，但感谢您的帮助。您的信息和链接让我意识到我在正确的路线上，但有“h1”而不是“hl” - 换句话说，我有一个“one”而不是“el”并且未能发现差异！

它现在正在工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T01:50:18.297

将 hl=fr 添加到质询 URL 的查询字符串（不是公钥）。

[http://code.google.com/p/recaptcha/issues/detail?id=133](http://code.google.com/p/recaptcha/issues/detail?id=133)

# authorize.net - 获取 authorize.net CIM 托管表单令牌作为响应

> ID：13678775
> 
> 赞同：1
> 
> 时间：2012-12-03T07:16:11.690
> 
> 标签：authorize.net, authorize.net-cim

我在我的网站页面中使用 CIM 托管页面，例如，

```
<form method="post" action="https://secure.authorize.net/profile/manage"
id="formAuthorizeNetPage" style="display:none;">
<input type="hidden" name="Token"
value="pfGaUNntoTxZYeqqYDjGCQ4qyCHcsXGXLJ2i7MPCEiH6CH5n5qKqcl8EBiTClxu01B
SeH5eZg7LVUVVzw5kJKVMitQ3pyMB5UZCduMWd6Ku9aT2gyFm69EKMGfyWPmI4p+Bb4TJf2F0
7rInSrn2MWlM6f2xd7aRu1XBn0WXoPxK1j9FMGX2CNCoCBp3cOXB7"
/>
</form> 
```

我的困惑是如何在这里获得 Token 价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:20:10.570

将此 XML 作为请求传递，

```
<?xml version=\"1.0\" encoding=\"utf-8\"?>
        <getHostedProfilePageRequest xmlns=\"AnetApi/xml/v1/schema/AnetApiSchema.xsd\">"<merchantAuthentication>".
        <name>loginname</name>
        <transactionKey>transactionkey </transactionKey>
        </merchantAuthentication>
        <customerProfileId>cim_id</customerProfileId>
 <hostedProfileSettings>
 </hostedProfileSettings>
    </getHostedProfilePageRequest> 
```

并检查其响应，您可以在其中找到特定 CIM 用户配置文件的令牌值 :)

# wcf - 我无法在 IIS 5.1 上运行 WCF 服务

> ID：13678777
> 
> 赞同：0
> 
> 时间：2012-12-03T07:16:19.850
> 
> 标签：wcf, iis

我的 WCF 服务在 VS2008 的开发服务器上运行良好，但是在我将它部署在 IIS 5.1 上并运行之后，出现以下错误消息：

> 这个集合已经包含一个带有 http 方案的地址。此集合中的每个方案最多可以有一个地址。参数名称：项目

web.config 文件中的相应部分如下所示：

```
<system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior name="Parus.ServiceBehavior">
        <serviceMetadata httpGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="true" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <services>
    <service behaviorConfiguration="Parus.ServiceBehavior" name="Parus.Service">
      <endpoint address="" binding="basicHttpBinding" contract="Parus.IService">
      </endpoint>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
  </services>
</system.serviceModel> 
```

我试图关注这篇文章：

[http://blogs.msdn.com/b/rampo/archive/2008/02/11/how-can-wcf-support-multiple-iis-binding-specified-per-site.aspx](http://blogs.msdn.com/b/rampo/archive/2008/02/11/how-can-wcf-support-multiple-iis-binding-specified-per-site.aspx)

但它不起作用。

有人知道解决这个问题吗？

戈兰

# php - 使用简单的 HTML DOM 获取 *absolute* URLs

> ID：13678778
> 
> 赞同：2
> 
> 时间：2012-12-03T07:16:22.517
> 
> 标签：php, web-crawler, simple-html-dom

**我想做的事：**使用简单的 HTML DOM 对页面中的所有链接进行缩放，同时注意获取完整链接（即从`http://`一直到地址的末尾）。

**我的问题：**我得到的链接`/wiki/Cell_wall`不是`http://www.wikipedia.com/wiki/Cell_wall`.

**更多示例：**如果我抓取 URL: `http://en.wikipedia.org/wiki/Leaf`，我会得到`/wiki/Cataphyll`和之类的链接`//en.wikipedia.org/`。或者，如果我在抓取`http://php.net/manual/en/function.strpos.php`，我会得到类似`function.strripos.php`.

我已经尝试了很多不同的技术来构建实际的完整 URL，但是有很多可能的情况，我完全不知道如何才能覆盖所有基础。

但是，我敢肯定有很多人以前遇到过这个问题——这就是我求助于你的原因！

PS 我想这个问题几乎可以简化为只处理 local `href`s，但如上所述，我遇到了`//en.wikipedia.org/`which 不是完整的 url，但不是本地的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:50:25.163

您需要一个将相对 URL 转换为绝对 URL 的库。[URL To Absolute](http://publicmind.in/blog/urltoabsolute/)似乎很受欢迎。然后你只需：

```
require('url_to_absolute.php');

foreach($doc->find('a[href]') as $a){
  echo url_to_absolute('http://en.wikipedia.org/wiki/Leaf', $a->href) . "\n";
} 
```

请参阅[PHP：如何解析](https://stackoverflow.com/questions/1243418/php-how-to-resolve-a-relative-url)库列表的相对 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:48:12.327

我想这就是你要找的。它在一个旧项目上对我有用。

[http://www.electrictoolbox.com/php-resolve-relative-urls-absolute/](http://www.electrictoolbox.com/php-resolve-relative-urls-absolute/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:48:16.470

好的，谢谢大家的意见。

我认为解决方案是使用正则表达式查找任何特定 URL 的 webroot，然后只需将本地地址附加到此。

**棘手的部分：** 设计一个适用于所有域的正则表达式语句，包括它们的子域......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T07:23:35.660

我不知道这是否是您要查找的内容，但这将为您提供执行它的页面的完整 URL：

```
window.location.href 
```

希望能帮助到你。

# git - Github 分支领先 5 次提交，如何修复？

> ID：13678793
> 
> 赞同：1
> 
> 时间：2012-12-03T07:17:32.550
> 
> 标签：git, github, commit, master

```
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

C:\Users\Allen\Documents\GitHub\project2-pd7 [master]> git status
# On branch master
# Your branch is ahead of 'origin/master' by 5 commits.
#
nothing to commit, working directory clean
C:\Users\Allen\Documents\GitHub\project2-pd7 [master]> git push
Counting objects: 36, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (15/15), done.
Writing objects: 100% (30/30), 3.93 KiB, done.
Total 30 (delta 8), reused 1 (delta 0)
error: unpack failed: index-pack abnormal exit
To https://github.com/stuycs-ml7/project2-pd7.git
 ! [remote rejected] master -> master (unpacker error)
error: failed to push some refs to 'https://github.com/stuycs-ml7/project2-pd7.git' 
```

我仍在尝试用 github 找到我的海腿，但这些持续存在的问题让我很生气。任何人都可以用普通话解释解决方案以便我理解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:25:40.977

您的历史记录与远程分支的历史记录不同。可能有人自您上次提交以来已将提交推送到远程分支`git pull`。解决方案是：

```
git pull 
```

或者

```
git pull --rebase 
```

后者尝试重写您的提交，以便它们出现在分支的顶端，重新基于远程分支的历史记录。前者在您的远程分支历史记录之间进行简单合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:31:35.193

自您上次结帐/拉取以来，您班上的其他一些学生推送了一些修订。

正如 hd1 指出的那样，您最好的选择是两者之一`git pull`，这可能会创建一个合并提交，之后您可能必须显式地`git commit`进行合并。我更喜欢`git pull --rebase`在运行之前对更改进行线性化`git push`

`git log --graph`从命令行运行 a以获得本地存储库当前状态的良好可视化。

在`git fetch`不尝试合并或重新设置当前更改的情况下拉下远程分支。这将允许您检查远程存储库的状态`git log --graph origin/master`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:21:06.950

`git pull`在你之前试试`git push`？

# javascript - 使用 jQuery 更改 LESSCSS 变量

> ID：13678800
> 
> 赞同：3
> 
> 时间：2012-12-03T07:17:57.527
> 
> 标签：javascript, jquery, html, css, less

是否可以以某种方式更改 LESSCSS 变量，例如

```
@basecolor: #F90; 
```

后来像这样使用：

```
.myclass {
     color: darken(@basecolor, 10%);
 } 
```

使用 jQuery 基于来自以下内容的用户输入：

```
$("#mybutton").click(function() {
    var color = $("#inputfield").val();
    //Some magic to change the LESS basecolor
}); 
```

我正在使用 less.js 即时编译 .less 文件。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:23:05.017

与其在你的 less 文件中动态地改变值 - 这在客户端（也称为 JavScript）是不可能的，而是尝试在 less 中创建多个变体（类似于主题），然后将自定义类应用于元素（body 效果很好）。

例如，

```
[style.less]
@green: #00EE00;
@blue: #0000EE;

body {
  &.green { background:@green }
  &.blue { background:@blue }
}

[main.js]
$('#id').on('click', 'a.blue', function() {
  $('body').removeClass('green').addClass('blue')
} 
```

# java - 如何在 Java 中解析 CSV（excel，不以逗号分隔）文件？

> ID：13678807
> 
> 赞同：1
> 
> 时间：2012-12-03T07:18:23.513
> 
> 标签：java, excel, parsing, csv

我有一个 CSV 文件（excel），其中包含数据，我需要使用 java 解析数据。这些文件中的数据不使用逗号分隔，CSV 文件的列数和行数（每个单元格都有数据）写入所有数据。我需要遍历所有文件，直到到达每个文件的 EOF（文件结尾）并解析数据。文件中还包含空行，因此空行不是停止解析的标准，我认为只有 EOF 会表明我已经到达特定文件的末尾。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:44:02.917

您可以使用 opencsv 来解析 excel CSV。我自己用过这个，你需要做的就是在';'上分开。空单元格也将被解析。

你可以在这里找到信息：http: [//opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

要解析 excelCSV，您可以执行以下操作：

```
 CSVReader reader = new CSVReader(new FileReader("yourfile.csv"), ';'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:14:11.143

除了其他建议，我会提供[Jackson CSV module](https://github.com/FasterXML/jackson-dataformat-csv)。Jackson 具有非常强大的数据绑定功能，并且 CSV 模块允许读取/写入 CSV 作为 JSON（或 XML、YAML 和其他支持的格式）的替代方案。因此，除了强大的 CSV-to/from-POJO 绑定之外，您还可以在其他数据格式之间进行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:13:40.480

请有一个流对象来读取 CSV 文件。

```
FileInputStream fis = new FileInputStream("FileName.CSV"); 
```

BufferedInputStream bis = new BufferedInputStream(fis); InputStreamReader isr = new InputStreamReader(bis);

读取输入流对象并将文件存储在字符串对象中。

然后使用带有 ,[comma] 作为分隔符的 StringTokenizer -->您将获得令牌 请操作令牌以获取值。

```
String str = "This is String , split by StringTokenizer, created by mkyong"; 
```

StringTokenizer st = new StringTokenizer(str);

```
 System.out.println("---- Split by space ------");
    while (st.hasMoreElements()) {
        System.out.println(st.nextElement());
    }

    System.out.println("---- Split by comma ',' ------");
    StringTokenizer st2 = new StringTokenizer(str, ",");

    while (st2.hasMoreElements()) {
        System.out.println(st2.nextElement());
    } 
```

谢谢，

帕万

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-28T07:38:47.650

假设您有一个字符串形式的 csv 文件内容：

```
String fileContent; 
```

一般将CSV文件内容解析为List>。

```
final List<String> rows = new ArrayList<String>(Lists.newArraysList(fileContent.split("[\\r\\n]+"))); 
```

将文件拆分为行列表。然后使用 OpenCSV 的 CSVParser 并将逗号分隔的行解析为 List

```
final CSVParser parser = new CSVParser();
final List<List<String>> csvDetails = new ArrayList<List<String>>();
    rows.forEach(t -> {
        try {
            csvDetails.add(Lists.newArrayList(parser.parseLine(t)));
            } catch (Exception e) {
                throw new RunTimeException("Exception occurred while parsing the data");
            }
        }); 
```

# java - 如何更换 标签

> ID：13678809
> 
> 赞同：4
> 
> 时间：2012-12-03T07:18:30.723
> 
> 标签：java, android

我们正在开发一个应用程序。我们从 json 数组中获取数据。在那我想替换一个标签。但是模拟器会抛出一个错误。就像无效的语法一样。我的代码：

```
top=top.replaceall("<br\/>"," "); 
```

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T07:19:30.363

利用

```
top=top.replaceall("<br\\/>"," "); 
```

代替

```
top=top.replaceall("<br\/>"," "); 
```

**编辑：**也许 String.relpaceall 不起作用。所以最好的方法是使用正则表达式的匹配器：

```
Pattern p = Pattern.compile("<br\\/>");
String tempstr = "I love <br/>  <br/>  <br/> <br/>.";

Matcher matcher = p.matcher(tempstr );
String tmp = matcher.replaceAll("Android");
System.out.println(tmp); 
```

**输出是：**

## “我喜欢 Android。Android Android Android。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T07:29:35.780

尝试这个。

```
String res = Html.fromHtml(yourString).toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:20:22.127

尝试这个 -

```
top=top.replaceall("<br\\/>"," "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T07:46:21.763

模拟器抛出错误，因为 top.replaceall(""," ") 是错误的，

正确的写法是top.replaceall("","")，必须使用Escape Sequence。

我在我的应用程序中尝试过，没错。

# ruby-on-rails - rails 3.2.9 + ember.js 1.0.0-pre.2 不断给出找不到模板的错误，有什么线索吗？

> ID：13678814
> 
> 赞同：1
> 
> 时间：2012-12-03T07:19:07.650
> 
> 标签：ruby-on-rails, ember.js

是否有示例 Rails 后端 + ember.js 1.0.0-pre.2 应用程序可供参考。升级后我的应用程序损坏了。

我阅读了有关命名车把的信息，但似乎存在问题。

如果我写在 index.html.haml

```
<script type="text/x-handlebars" data-template-name="application">
    <h1>HI</h1>
</script> 
```

Ember.TEMPLATES 有一个名为 application 的模板

如果我编写具有相同内容的文件 application.handlebars，我会收到错误 Unable to find template 'application'

是否有任何必须完成的路径配置丢失。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:56:43.677

我正在维护一个最新的 Rails / ember 示例，您可以参考：

[https://github.com/dgeb/ember_data_example](https://github.com/dgeb/ember_data_example)

您是否使用 ember-rails 来编译您的模板？`application.js`当然，如果您使用资产管道，您还需要在您的模板中使用您的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T02:26:15.337

从之前一直工作到 1.0.pre 的 Gemfile 中删除了车把资产 Gem，它正在生成与 Ember 代码不兼容的车把。Ember 将所有模板添加到 Ember.TEMPLATES，它正在添加到 HandlebarsTemplates。

实际上车把资产从来不需要。感谢大家的帮助。

# php - 简短的脚本不适用于 Chrome，但适用于 Firefox。

> ID：13678822
> 
> 赞同：0
> 
> 时间：2012-12-03T07:19:34.467
> 
> 标签：php, javascript

这是一个用于选择所有日期的 js 脚本复选框。它适用于 Firefox，但不适用于 Chrome。

```
<script type="text/javascript" charset="utf-8">
function toggle(source) {
      checkboxes = document.getElementsByName('check_time[]');
      for each(var checkbox in checkboxes)
        checkbox.checked = source.checked;
    }
</script>

<?php
session_start();
include ("include/dbconnect.php");
$timestamp = mysql_real_escape_string(strtotime($_POST['date']));
$doc_username = $_SESSION['username'];
$date = @ strip_tags (date("Y-m-d",$timestamp));

$timezone ="Asia/Kuala_Lumpur";
if(function_exists('date_default_timezone_set')) date_default_timezone_set($timezone);
    $todaydate = date("Y-m-d");

if($date == '')
{
  echo "<i>Please select a date</i>";
}else if ($date < $todaydate)
{   
  echo "<i>* You are not allowed to choose date before $todaydate</i>";

}else
{
$inc   = 1800;
$start = (strtotime('0830')); // 9 AM
$end   = (strtotime('1630')); // 5 PM
echo "<b>*Pick if the time is not available</b><br> <br>";
echo "<form action='doc_confirmtime.php' method='POST'>";
echo "<input type='checkbox' onClick='toggle(this)' />Select All<br/>";
for( $i = $start; $i <= $end; $i += $inc )
{   
    $timeslot = date( 'G:i:s ', $i + $inc );// to the standart format
    $query = mysql_query("SELECT * from appointment Limit 1");

    while($row = mysql_fetch_array($query))
    {
        $date2 = $row['date'];
        $time = $row['time'];

        $query2 = mysql_query("SELECT doc_username, date, time, status from appointment WHERE (doc_username = '$doc_username' AND date = '$date' AND time = '$timeslot') AND (status = '0' OR status = '1' OR status = '2' OR status is NULL)");
        $result = mysql_fetch_array($query2,0);

        if ($result > 0)
        {
            echo "<font size='+1' face='Tahoma, Geneva, sans-serif'><input type='checkbox' name='check_time[]' value='$timeslot' checked = 'checked' DISABLED><b>$timeslot</b></font><br>";
        }else
        {
            echo "<font face='Arial, Helvetica, sans-serif'><input type='checkbox' name='check_time[]' value='$timeslot'>$timeslot</font><br>";
        }

    }
}
echo "<i>*Highlighted Time has chosen by you or your patient</i>";
echo "<br><br>";
echo "<input type='submit' name='submit' value='Submit' style='width:60px; height=30px' />";
echo "<input type='hidden' name='Date' value='$date' >";
echo "</form>";

}
mysql_close($connect);
?> 
```

这实际上是一个由 JQuery AJAX html 页面运行的 php。输入提交按钮时，会显示日期列表（复选框）和“全选”复选框。Firefox 肯定可以工作，但不能在 Chrome 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:27:24.947

我不确定 for each() 语法是否适用于其他浏览器而不是 Firefox？

您应该使用[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)来迭代元素。

我还建议使用 jQuery 库，因为当您对自己的语言不太了解时，它可以简化 Javascript 的工作。

在 jQuery 中，它看起来像这样：

```
function toggle(source) {
  $checkboxes = $('input[name=check_time]');
  $checkboxes.each(function(){
    $(this).attr("checked", source.checked);
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:31:01.860

Chrome 仍然不支持您的 for each 循环。而是使用`for`：

```
for(var i=0; i<checkboxes.length; i++)
{
    checkboxes[i].checked = source.checked;
} 
```

Chrome 目前仅支持 Javascript 1.5，而您使用的语法是 Javascript 1.6 的一项功能（[现在看来已弃用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for_each...in)）。这样做的原因是因为 Chrome 开发人员的目标是让 Chrome 与 Safari（另一个主要的 webkit 用户）保持一致。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T08:01:50.320

好的，最后我从这个页面得到了答案。这里分享一下源码

```
<script language="JavaScript">
function toggle(source) {
   checkboxes = document.getElementsByName('check_time[]');
   for(var i in checkboxes)
      checkboxes[i].checked = source.checked;
   }
</script> 
```

# java - EclipseLink（版本 2.1.3）中 JQPL 中的 Oracle NVL 功能等效？

> ID：13678823
> 
> 赞同：2
> 
> 时间：2012-12-03T07:19:34.823
> 
> 标签：java, oracle, function, eclipselink

我做这个 JPQL 查询

```
SELECT e 
  FROM Expediente e 
 WHERE e.fechaBaja is null 
 ORDER BY e.idSituacion ASC, 
          e.idExpediente ASC 
```

但是当`e.idSituacion`为空时，eclipseLink 不会返回这个注册表。

我怎么能用 oracle 函数做这个查询`nvl`？EclipseLink 2.1.3 是否支持这个功能？

```
SELECT  nvl(e.idSituacion,' ')  
  FROM Expediente e 
 WHERE e.fechaBaja is null 
 ORDER BY e.idSituacion ASC, 
          e.idExpediente ASC 
```

或者

```
SELECT e 
  FROM Expediente e 
 WHERE e.fechaBaja is null 
   and nvl(e.idSituacion,' ') 
 ORDER BY e.idSituacion ASC, 
       e.idExpediente ASC 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T12:59:33.503

**合并**

我不完全了解它将如何帮助您，但您可以使用`COALESCE`功能：[http ://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Functions](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Functions)

（这类似于`NVL`，但是`NVL`Oracle 特定的，`COALESCE`是 ANSI 标准。）

**命令**

使用`ORDER BY e.idSituacion ASC`空值将在结果的末尾。

如果你想先有你的空值，你可以使用`NULLS FIRST`子句：

`ORDER BY e.idSituacion ASC NULLS FIRST`

（仅来自 Eclipselink 2.4）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T15:58:36.977

这是一个 eclipseLink 错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=294092](https://bugs.eclipse.org/bugs/show_bug.cgi?id=294092)。

我需要原生 sql，例如[http://tomaszdziurko.pl/2011/12/problem-withjpa-join-column-null-values-and-orderby/](http://tomaszdziurko.pl/2011/12/problem-withjpa-join-column-null-values-and-orderby/)

# iphone - 将屏幕从 Mac 流式传输到 iPhone

> ID：13678824
> 
> 赞同：1
> 
> 时间：2012-12-03T07:19:35.513
> 
> 标签：iphone, objective-c, ios, macos, streaming

我想创建一个程序，将我的 Mac 屏幕流式传输到我的 iPhone。有点像在[Liveview](https://itunes.apple.com/us/app/liveview/id301069270?mt=8)中完成的。我对 Objective-C 还比较陌生，所以我不知道从哪里开始制作这样的应用程序。

似乎您必须在 Mac 和 iPhone 上都安装一些东西，但是您如何将 Mac 的屏幕实际流式传输到 iPhone？

希望有人能指出我正确的方向。

**问题更新**

感谢您的回答。对我来说仍然有点模糊，我不确定我是否真的需要完整的视频流。实施似乎也很痛苦，因为没有任何真正好的资源。

每隔一秒左右截取一张屏幕截图并将其作为图像流式传输到我的 iPhone，实际上是可以的。我已经想出了如何使用 Bonjour 将图像从我的 Mac 流式传输到我的 iPhone。

我需要发送到我的 iPhone 的屏幕截图是我目前在 Photoshop 中处理的设计。我已经想出了如何截取屏幕截图以及如何获取所有打开窗口的列表。但是如何制作打开的 PSD 文件的快照，我不知道。

对此有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:16:51.477

这是一个非常大的主题，所以不是一个简单的回应就能解决的问题。但是，我建议一种方法是为 iPhone 编写一个 VNC 客户端。事实上，这个开源的存在可能值得一看：

[http://code.google.com/p/vnsea/](http://code.google.com/p/vnsea/)

蒂姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:14:29.970

这称为 RFB（或 RDP），大多数远程屏幕应用程序使用 RFB/RDP 协议和实现它的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T09:07:55.547

我会采用频繁的截图方法。您将准备要传输的项目的屏幕截图，然后使用一些简单的库（例如我的 DTBonjour）通过 WiFi 将这些对象传输到 iOS 客户端。

[https://www.cocoanetics.com/2012/11/and-bonjour-to-you-too/](https://www.cocoanetics.com/2012/11/and-bonjour-to-you-too/)

如果您使用的是 layer-backing，那么您也可以使用 renderLayer... 方法，其中也包括子层。

将单个屏幕截图编码为流式视频格式可以获得的最高保真度，尽管这需要更多的工作。

# blackberry-10 - 黑莓10中的接口

> ID：13678826
> 
> 赞同：0
> 
> 时间：2012-12-03T07:19:40.443
> 
> 标签：blackberry-10

我是黑莓 10 平台的新手，我正在开发一个已经在 java 中的应用程序。在 Java 应用程序中，我使用了许多接口来提高可用性。我不知道如何在 Blackberry 10 中使用此接口。请给我一些在 blackberry 10 中使用接口的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:43:46.180

你可以在以前的 StackOverflow 问题中找到很多关于这个主题的讨论，比如[这个](https://stackoverflow.com/questions/492741/java-no-interface-implementation)。

正如其中一位响应者所说，只有纯虚拟方法的 C++ 类与 Java 接口是一样的。C++ 允许多重继承，如果使用不正确，它有其自身的缺陷。从一个或多个仅具有纯虚方法的类继承相当于实现一个或多个接口。

听起来你对 C++ 不熟悉。你需要提高你的技能。C++ 与 Java 不是同一种语言。特别是在 Cascades 或 Qt 下，您需要知道谁负责释放内存（删除对象）以及何时释放。Java 会宽恕许多罪过，C++ 不会宽恕任何罪过。

# ruby-on-rails - 如何在进行下一步之前验证上一步是否成功 - Cucumber

> ID：13678830
> 
> 赞同：0
> 
> 时间：2012-12-03T07:20:07.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cucumber

运行黄瓜步骤后，我的行为非常随机。我需要添加一个条件，这样只有在前面的步骤成功时，我才会进入黄瓜的下一步。此外，我可以在我的设置中设置一个容差水平，`env.rb`以便 Out of 50 个文件，即使 10 个文件失败，仍然是成功的......现在我正在使用

```
After('@javascript, @selenium') do
  page.has_content? ''
end 
```

**...在每个场景之间进行验证...不是每个步骤。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:31:24.303

确保该步骤已通过的最佳方法是使用 rspec 匹配来通过或失败测试。如果您希望该功能在页面上没有内容“foo bar”的情况下失败，您可以这样做：

```
Then /^I should see "([^\"]*)"$/ do |text|
  page.should have_content(text), "Expected to see #{text} on the page"
end 
```

如果您要设置容差级别，则可以使用变量来跟踪成功或失败的数量。假设您正在运行一个检查“foo”的功能，并且您检查了 50 次。在您的一个步骤中，创建变量以跟踪成功次数，如果页面缺少内容，您可以使用 capybara 告诉您页面是否具有您正在寻找的内容，而不会导致功能失败：

```
Given /^Some step$/ do
  @a = 0
  if page.has_content?("foo") == true
     a += 1
  end
end 
```

然后在您的最后一个场景中，检查 a 是否大于最小阈值

```
Then /^Last step$/ do
  @a.should be > 40, "Expected at least 40 success but saw #{a} successes instead"
end 
```

# java - xml api响应插件

> ID：13678832
> 
> 赞同：0
> 
> 时间：2012-12-03T07:20:20.223
> 
> 标签：java, android, xml, api

我从服务器获取 html 响应我想要来自我的网络服务器的 xml 响应，所以使用哪个插件从服务器获取 XML 响应。任何人都可以帮助我解决这个问题，这将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:32:34.710

请记住，对于 Java XPath API，拥有来自 Web 服务器、文件或任何相同的 xml。因此，您必须应用以下内容：

```
 //Partie connexion
        URL url = new URL(addressToConnect);
        HttpURLConnection connexion = (HttpURLConnection) url.openConnection();
        connexion.connect();
        InputSource geocoderResultInputSource;
        geocoderResultInputSource = new InputSource(connexion.getInputStream());

        //Partie XML/XPATH

        Document geocoderResultDocument = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(geocoderResultInputSource);
        XPath xpath = XPathFactory.newInstance().newXPath();

        NodeList nodeListCodeResult = (NodeList) xpath.evaluate("//status", geocoderResultDocument, XPathConstants.NODESET); 
```

ETC...

[这里有更多示例，来自我正在制作的项目](http://code.google.com/p/geocoder-library/source/browse/)

希望它有帮助;）

# java - 如何在 android 中使用 setTag() 和 getTag 设置按钮单击事件的常用方法？

> ID：13678838
> 
> 赞同：0
> 
> 时间：2012-12-03T07:20:48.960
> 
> 标签：java, android

在 UI 中为这些按钮添加了 20 个以上的按钮，所有按钮都需要使用按钮标记编写常见的点击事件方法。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:31:13.543

设置`android:contentDescription="xxx"`为每个按钮，并用于`ViewGroup.findViewsWithText()`查找具有指定 contentDescription 的所有视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:27:39.283

您可以在您的类中实现 onClickListener，在 onClick 方法中，您可以使用按钮的 ID 而不是标签来放置按钮的操作：

```
public class MyActivity extends Activity implements View.OnClickListener {
Button myButton;
Button myButtonTwo;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    myButton = (Button) findViewById(R.id.myButtonId);
    myButtonTwo = (Button) findViewById(R.id.myButtonTwo);

    myButton.setOnClickListener(this);
    myButtonTwo.setOnClickListener(this);
}

@Override
public void onClick(View view) {
    if (view.getId() == myButton.getId()) {
        // do something
    } else if (view.getId() == myButtonTwo.getId()){
        // do something else
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:26:51.860

你可以这样做

```
@Override
public void onClick(View v) {
 switch(v.getTag())
 {
   case 1:
   DoSomething();
   break;

   case 2:
   DoSomething2();
   break;

  default:
   break;
 } 
```

并将按钮单击侦听器设置为此。

```
b.setOnClickListener(this); 
```

确保实现 OnClickListener 接口

# javascript - 如何使用 Javascript 禁用功能键？

> ID：13678847
> 
> 赞同：0
> 
> 时间：2012-12-03T07:21:37.903
> 
> 标签：javascript, asp.net, browser, browser-history

我有一个页面，我需要禁用功能键，主要是 F12（Developertools）。我在页面中显示了一些敏感数据，所以无论如何我都无法让用户看到 html 并获取隐藏字段。我检查了一些适用于几乎所有键的 javascript，除了 f1、f12 等功能键。

无论如何，我可以在浏览器中禁用这些按钮吗？

```
document.onkeyup = KeyCheck;
function KeyCheck() {
    var KeyID = event.keyCode;
    alert(KeyID);
    switch (KeyID) {
        case 123:  //F12 KEY CODE         
            alert('hello');
            return false;
            break;            
    }

} 
```

这是我用来覆盖密钥的代码。当我搜索时，F12 键的键码是 123，我使用相同的代码覆盖它。但不幸的是，它甚至没有点击“CASE”，并且在按下 F12、F1 等按钮时没有出现消息框。

请帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T07:27:21.640

当您发送数据时，没有可靠的方法可以防止用户篡改您的 javascript 数据。始终使用服务器端检查来验证返回的数据。

人们仍然可以使用浏览器的菜单来启用开发控制台。或者通过`right-click`--> "Inspect Element"，或者使用热键打开控制台的不同部分，然后在控制台中切换到另一个页面，或者使用我没有提到的热键之一。
或者，他们可以简单地禁用 javascript。（或编辑 javascript 以禁用该块）

现在，您可以更彻底地禁用任何按钮的功能，方法是
`event.preventDefault()`在事件侦听器中添加：，但仍然不可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:32:43.570

不，您不能通过页面上的 JavaScript 禁用查看源代码/开发人员工具或浏览器的任何其他应用程序级功能。

有很多方法可以查看网页的来源。您需要完成非常艰巨的任务来限制所有外部方访问/存储/查看您的 HTML。以下是您必须禁用的其他内容的部分列表：

*   代理，包括 HTTP 调试器/代理，如 Fiddler 或浏览器内置的。
*   来自 curl 等控制台工具的直接 GET 请求。
*   各种网络爬虫，包括谷歌等搜索引擎。

使用 HTTPS 并且除非严格要求，否则不要发送有意义的信息，这是比试图限制用户可以使用他们的机器做的事情更容易保护它的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:24:26.583

```
document.onkeydown = KeyCheck; 
```

有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:49:28.923

试试这个：

```
<script language="JavaScript">
    document.onkeypress = function (event) {
        event = (event || window.event);
        if (event.keyCode == 123) {
           //alert('No F-12');
            return false;
        }
    }
    document.onmousedown = function (event) {
        event = (event || window.event);
        if (event.keyCode == 123) {
            //alert('No F-keys');
            return false;
        }
    }
    document.onkeydown = function (event) {
        event = (event || window.event);
        if (event.keyCode == 123) {
            //alert('No F-keys');
            return false;
        }
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-04T11:36:53.180

**此代码非常适合我禁用右键单击和禁用 F12**

```
<script language=JavaScript>

var message="You Have No Permission";

 function clickIE4(){
   if (event.button==2){
     alert(message);
     return false;
   }
 }

 function clickNS4(e){
   if (document.layers||document.getElementById&&!document.all){
     if (e.which==2||e.which==3){
       alert(message);
       return false;
      }
   }
 }

  if (document.layers){
    document.captureEvents(Event.MOUSEDOWN);
    document.onmousedown=clickNS4;
   }
   else if (document.all&&!document.getElementById){
      document.onmousedown=clickIE4;
   }

   document.oncontextmenu=new Function("alert(message);return false") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-16T16:04:34.713

当用户按下 F12 键时，浏览器开发者工具栏将在浏览器的下方打开。

通过使用开发者工具栏，用户可以看到应用到页面中控件的设计、javascript 代码和相应的 css。为了防止用户这样做，我们将隐藏开发人员工具栏。

[这是代码](https://mytechnologypark.blogspot.in/2014/09/how-to-disable-f12-key-in-browser.html)

# c# - 是否可以使用 C# 更改控制台窗口标题栏图标？

> ID：13678848
> 
> 赞同：0
> 
> 时间：2012-12-03T07:21:39.363
> 
> 标签：c#, windows, winapi

> **可能重复：**
> [C# 控制台应用程序图标](https://stackoverflow.com/questions/1170383/c-sharp-console-application-icon)

我想更改控制台窗口标题栏图标，

当我在`c#`.

我已经尝试使用`console.title`此代码的属性更改标题栏标题。

但我不知道如何更改该图标。

我该如何解决？

# android - 丹麦语字母无法在 Android TextView 上正确显示

> ID：13678851
> 
> 赞同：2
> 
> 时间：2012-12-03T07:22:10.387
> 
> 标签：android, character-encoding, lucene, special-characters

我正在写一个丹麦语词典应用程序。我可以正确索引源文件（我认为——我使用 Lucene 和`DanishAnalyzer`），但我无法正确显示`TextView`s 和`ListView`s 中的单词。字母`æ`、`ø`和`å`在菱形内显示为问号。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:36:20.900

问题可能是您的数据源及其编码。如果您从某个 Web 源获取文本，您可能必须将其编码为`UTF-8`然后将其放入`TextView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:04:17.877

我将`InputStreamReader`编码设置为`MacRoman`而不是`UTF-8`. 我将此提供`InputStreamReader`给 GSON 的`fromJson()`方法。我仍然不明白发生了什么。

# java - 日历类算术异常

> ID：13678860
> 
> 赞同：0
> 
> 时间：2012-12-03T07:22:36.993
> 
> 标签：java, class, calendar

`cal.set(Calendar.MONTH,-6);`在 2012 年 12 月 3 日运行时，给了我一年半前的日期。

它给出了 2011 年 7 月 2 日的日期。

请问谁能告诉我发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:07:34.380

cal.set() sets the month relative to the current year. As the current year is 2012, -6 takes it to 6 months back i.e. July 2011. For proper behaviour, use either cal.add(Calendar.MONTH,-6) or cal.set(Calendar.MONTH,6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:54:20.107

从外观上看，您将月份设置为`-6`相对于 2012 年。鉴于 0 表示 1 月，`-6`表示前一年的 7 月……。

'set' 操作**设置**指定的字段。它不会增加或减少该字段。

* * *

强制性推荐...使用 Joda Time。

# c# - 单击按钮查看网页的页面源

> ID：13678862
> 
> 赞同：0
> 
> 时间：2012-12-03T07:22:56.027
> 
> 标签：c#, asp.net

我正在制作一个应用程序，我想在该应用程序上提供“查看源”按钮单击任何网页的功能。用户将只输入 URL 并获取该页面的源。我还想显示内容、样式表、图像网页。我想根据我的格式获取所有这些并显示在我的 asp.net 页面中。请帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:28:33.517

你可以**`web client`**在 asp.net中使用

```
private void Button1_Click(object sender, System.EventArgs e)
{
WebClient webClient = new WebClient(); 
const string strUrl = "http://www.yahoo.com/"; 
byte[] reqHTML; 
reqHTML = webClient.DownloadData(strUrl); 
UTF8Encoding objUTF8 = new UTF8Encoding(); 
lblWebpage.Text = objUTF8.GetString(reqHTML); 

} 
```

在这里您可以传递您的页面网址`strUrl`， 如果您想使用 javascript ，[请阅读更多内容，然后](http://forums.asp.net/p/1058879/1515859.aspx) [阅读此内容](http://www.dotnetcurry.com/ShowArticle.aspx?ID=76)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:30:11.797

该[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)课程将做你想做的事：

```
string address = "http://stackoverflow.com/";   

using (WebClient wc = new WebClient())
{
    string content = wc.DownloadString(address);
} 
```

`DownloadString`避免阻塞的异步版本：

```
string address = "http://stackoverflow.com/";

using (WebClient wc = new WebClient())
{
    wc.DownloadStringCompleted +=
        new DownloadStringCompletedEventHandler(DownloadCompleted);
    wc.DownloadStringAsync(new Uri(address));
}

// ...

void DownloadCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if ((e.Error == null) && !e.Cancelled)
    {
        string content = e.Result;
    }
} 
```

# android - 如何在警报对话框中的两个文本之间添加空格

> ID：13678865
> 
> 赞同：-8
> 
> 时间：2012-12-03T07:23:08.653
> 
> 标签：android, eclipse, android-alertdialog

我正在尝试在 alertdialog 中的两个文本之间添加一个空格。

![在此处输入图像描述](../Images/6cd22596c6cb19cc3ee6da50e39fe845.png)

如何在文本“.....27 Speed”和“2\. Merek”之间添加空格？谁能帮我解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:24:39.907

我想你的意思是换行符。可以使用`"\n"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:25:31.530

我想你的意思是换一条新线`\n`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:29:47.083

用于`\n`换行符以及`\t`如果要插入制表符。

您还可以将一些 XML 标记用于基本格式设置：粗体文本、斜体和带下划线的文本。

其他格式选项显示在 Android 开发者网站上的这篇文章中：[字符串资源](http://developer.android.com/intl/de/guide/topics/resources/string-resource.html)

# jquery - 如何使用 div id 获取 highcharts 的 svg？

> ID：13678867
> 
> 赞同：4
> 
> 时间：2012-12-03T07:23:22.073
> 
> 标签：jquery, highcharts

```
<script>
   $(function () {

        var chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'funnel',
                marginRight: 100
            },
            title: {
                text: 'Sales funnel'
            },
            plotArea: {
                shadow: null,
                borderWidth: null,
                backgroundColor: null
            },
            plotOptions: {
                series: {
                    dataLabels: {
                        enabled: true,
                        format: '<b>{point.name}</b> ({point.y:,.0f})',
                        color: 'black',
                        softConnector: true
                    },
                    neckWidth: '30%',
                    neckHeight: '25%'

                    //-- Other available options
                    // height: pixels or percent
                    // width: pixels or percent
                }
            },
            legend: {
                enabled: false
            },
            series: [{
                name: 'Unique users',
                data: [
                    ['Website visits',   15654],
                    ['Downloads',       4064],
                    ['Requested price list', 1987],
                    ['Invoice sent',    976],
                    ['Finalized',    846]
                ]
            }]
        });

        // Add the jQuery UI resizin
        var container = $('#container')[0];
        $('#resizer').resizable({
            // On resize, set the chart size to that of the 
            // resizer minus padding. If your chart has a lot of data or other
            // content, the redrawing might be slow. In that case, we recommend 
            // that you use the 'stop' event instead of 'resize'.
            resize: function() {
                chart.setSize(
                    this.offsetWidth - 20, 
                    this.offsetHeight - 20,
                    false
                );
            }
        });
    });​
    </script> 
```

我使用 highcharts 做了一个示例漏斗图，所以我不想使用 highcharts 导出功能。我需要使用 div id 获取下图的 svg。
下面的代码是图表的 div 部分，它将在此 div 中呈现图表。

```
 <div id="container" style="height: 400px;">
    </div>

    using div id "container" i need to get svg of the chart. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T09:51:13.343

如果您有实例`getSVG`，可以使用一种方法。`chart`

`var svg = chart.getSVG();`

*参考*

*   [http://api.highcharts.com/highstock#object-Chart](http://api.highcharts.com/highstock#object-Chart)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T10:51:41.477

您可以获取`highcharts`使用容器的实例，然后`getSVG()`在其上调用方法。从您问题中的示例中，它将如下所示：

`$('#container').highcharts().getSVG();`

参考 [http://api.highcharts.com/highcharts#Chart.getSVG](http://api.highcharts.com/highcharts#Chart.getSVG)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:55:04.420

您可以使用 $('#container .highcharts-container').html();

这会将整个 svg 作为字符串，您可以使用它来播放。

您还可以获得扩展 highcharts 导出 js 并使用以下功能

[http://api.highcharts.com/highcharts#Chart.getSVG](http://api.highcharts.com/highcharts#Chart.getSVG) ()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T09:37:42.937

除了`Ricardo Alvaro Lohmann`'答案，我必须指出，虽然 Highcharts`getSVG()`确实返回了现有图表的 svg，但它**并没有**返回在浏览器中生成的完全相同的 svg，它改变了几乎所有高度、宽度的缩放值， x, y 的值，有时它也会跳过 y 轴上的一些点。请检查[代码段](https://jsfiddle.net/8w2n1pfb/)以查找不匹配项。

如果您在单击按钮后通过在控制台（来自 getSVG()）中检查 html 与 svg 来比较 svg 的差异。如果您从右上角的按钮下载 svg，您还会看到不匹配，请注意下载图像中的 y 轴值与浏览器中的值。

为了获得与 highchart 生成的完全相同的 SVG，`XMLSerializer`可以使用。

```
var svgDoms = document.getElementsByClassName('highcharts-root');
var serializer = new XMLSerializer();
var serializedSvgString = serializer.serializeToString(svgDoms[0]); 
```

这将适用于我提供的片段。

# google-app-engine - 无法向 Google App Engine 服务帐户授予对 Google Cloud Storage 的访问权限

> ID：13678868
> 
> 赞同：1
> 
> 时间：2012-12-03T07:23:25.567
> 
> 标签：google-app-engine

我是 Google App Engine (GAE) 的用户。在 GAE 中有一个选项，我们可以将数据存储备份到 Google Cloud Storage (GCS) 存储桶。我已经注册了 GCS，启用了计费并成功创建了一个 Bucket。但是，当我在 GAE Con​​sole - Datastore admin 中尝试备份功能时，它给了我这样的错误消息：

*开始* 备份作业状态启动一些作业/任务时出现问题：无法访问存储桶“myappxxxxxx-cloud-storage” *结束*

我在网上做了一些研究，发现我们需要将 GAE 的服务帐户添加为 GCS 的团队成员，但是我已经这样做了，因为我“邀请用户在此应用程序上进行协作”并输入服务器帐户电子邮件地址就像 mygaexxxxx@appspot.gserviceaccount.com，我没有收到电子邮件，因为这不应该是一个真实的电子邮件帐户，我没有收到邀请，并且状态始终处于待处理状态

那我现在能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:04:07.123

另一种解决方案是使用 gsutil 命令行方法来编辑访问控制列表 (ACL)，如[https://developers.google.com/appengine/docs/python/googlestorage/overview中所述](https://developers.google.com/appengine/docs/python/googlestorage/overview)

通过这样做，不需要电子邮件邀请，并且该帐户不会显示在控制台中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:26:27.170

[您可以通过在API Console](https://code.google.com/apis/console)中将服务帐户（以及您的应用程序）添加到团队中，一次性授予服务帐户（以及您的应用程序）对所有 Google 服务的访问权限。

正如您所指出的，您也可以使用 gsutil setacl/getacl 命令来执行此操作。在这种情况下，您授予对特定存储桶的访问权限，而不是项目中的所有存储桶。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T08:13:07.730

解决此问题的另一种间接方法是在 GAE 中编写自己的邮件处理程序。然后您可以收到发送到您的 GAE 电子邮件地址的电子邮件。

# php - 我想在提交表单后创建一个带有三个按钮的弹出窗口。我怎么做？

> ID：13678875
> 
> 赞同：2
> 
> 时间：2012-12-03T07:24:05.610
> 
> 标签：php, mysql

我有一个表单`addCharger.php`，所以当我单击提交按钮时，我希望弹出一个窗口，其中包含三个按钮，例如：

1.  好的
2.  添加类似的
3.  添加不同的

因此，如果我在打开的弹出窗口上单击“添加类似”按钮，它将引导我进入`addSimilarCharger.php`该页面，并且在该页面上我需要与表单中前一个相同的值，以便我可以添加另一个充电器。

如果我点击“添加不同”，那么它会引导我返回到`addCharger.php`。如果我点击“确定”，那么它会将我引导到另一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:27:15.370

Kasma 说的是真的：但是如果你想使用 jquery，你必须在你的电脑上下载 Jquery 插件并链接到它们，或者将这一行放在你的 head tags 中。但是，如果您使用该链接，您需要始终在线。所以从程序中的小 jquery 淡入淡出开始，你会理解它，你将能够做你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:32:58.217

1.  [使用表单链接](http://api.jquery.com/jQuery.post/)的ajax发送数据
2.  [成功时，使用 jquery 对话框或任何其他 moal 对话框插件链接](http://www.queness.com/post/1696/create-a-beautiful-looking-custom-dialog-box-with-jquery-and-css3)弹出窗口
3.  根据您的要求执行操作

# php - 选择后加载隐藏的标签图像

> ID：13678892
> 
> 赞同：0
> 
> 时间：2012-12-03T07:25:19.190
> 
> 标签：php, javascript, jquery, html, tabs

我在主页中使用 idtabs js 制作标签。

```
http://www.sunsean.com/idTabs/ 
```

我把每个标签 12 图像。当页面加载第一次加载选项卡 div 和标题和菜单图像不首先加载。所以 4 分钟等待页面加载完成。

我想在加载页面中首先加载主图像，然后加载默认选项卡加载图像，当我在加载的选项卡上选择其他选项卡图像时？？？

```
<div id="tabs" dir="rtl">
<ul class="tabNavigation">
<li><a href="#topdownload" style="font:12px tahoma;">top</a></li>
  <li><a href="#featured" style="font:12px tahoma">more</a></li>
<li><a href="#toprated" style="font:12px tahoma">defult</a></li> 
<li><a href="#latest" style="font:12px tahoma;" >free</a></li>
</ul> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:26:37.240

似乎您使用的插件非常基本，并且不允许 ajax 请求。

一种解决方案是对外部 html 文件（featured.htm、toprated.html...）使用加载方法，但**我确信有更好的方法使用**对服务器的 ajax 请求和预加载插件。

### HTML

```
<html>
  <head>
   ...
    <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
  </head>
  <body>
    ...
    <!-- tabs -->
    <ul class="css-tabs">
       <li><a href="topdownload.htm">top</a></li>
       <li><a href="featured.htm">more</a></li>
       <li><a class="selected" href="toprated.htm">default</a></li>
       <li><a href="latest.htm">free</a></li>
    </ul>

    <!-- single pane. it is always visible -->
    <div class="css-panes">
      <div style="display:block">
        <!-- loaded content here -->
      </div>
    </div> 
```

### jQuery

现在我们使用 ajax 加载外部页面，使用 load 方法获取`href`链接元素：

```
<script>
    $(function() {
       $("ul.css-tabs").tabs("div.css-panes > div", {
            effect: 'fade',
            onBeforeClick: function(event, i) {
            // get the pane to be opened
            var pane = this.getPanes().eq(i);
                // only load once. remove the if ( ... ){ } clause if
                // you want the page to be loaded every time
            if (pane.is(":empty")) {
                // load it with a page specified in the tab's href
                // attribute
                pane.load(this.getTabs().eq(i).attr("href"));
            }
            }
        });
    });
</script> 
```

### 演示

[http://jquerytools.org/demos/tabs/ajax-noeffect.htm](http://jquerytools.org/demos/tabs/ajax-noeffect.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:38:11.637

您可以通过将图像动态分配给要按需下载的 img 标记的 src 属性来实现此目的：

```
tabs = document.querySelector('#tabs a');
tabs[0].onclick = function(){anyImgTag.src = "images/someimage.jpeg"}; 
```

# git - GitHub Git 客户端中的分离 HEAD

> ID：13678894
> 
> 赞同：2
> 
> 时间：2012-12-03T07:25:32.217
> 
> 标签：git, version-control, github, merge

当我遇到与分离的头部有关的问题时，我正准备使用 UI 客户端将一些代码签入到 git hub。我正在使用客户端，我对 git shell 不熟悉。在我之前，另一位开发人员将一些代码签入到大师，然后我尝试签入我的代码，并得到了问题。

它以前从未发生过，我总是能够提交和同步更改。然后当另一个人在我之前提交更改时，它突然出现了。除了新代码之外，我没有其他任何改变。

另外，我有以下错误。

![截屏](../Images/4511d0f06416b8a39ab1bd15feb5c6a3.png)

有没有什么简单、容易、快速的方法可以摆脱这个分离的头，把我的代码放到主分支上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:31:12.260

[OP Frank](https://stackoverflow.com/users/884625/frank)以“快速”的方式解决了它：

> 由于时间限制，我只是保存了我未提交的工作，重新克隆了项目，然后更新了它。

* * *

你似乎有两个问题：

*   你在一个超然的 HEAD
*   您将无法推动，因为有人已经在您之前推动了

在这两种情况下，建议打开外壳。
并首先备份您的 git 存储库，以便在这些解决方案不起作用时重新开始。

对于分离的 HEAD，遵循“ [Git: How can I reconcile detached `HEAD`with `master/origin`?](https://stackoverflow.com/questions/5772192/git-how-can-i-reconcile-detached-head-with-master-origin) ”：

```
git checkout temp
git checkout -B master temp 
```

对于推动：

```
git pull --rebase
(the refresh your GitHub GUI and you should be able to push) 
```

如果您仍然有“无法加载提交历史”错误消息，[请检查 GitHub GUI 日志](https://help.github.com/articles/accessing-the-github-for-windows-log)。

# java - 如何处理 JIBX 绑定中的属性中存在的特殊字符，例如与号 (&)

> ID：13678896
> 
> 赞同：0
> 
> 时间：2012-12-03T07:25:58.413
> 
> 标签：java, xml, binding, xml-parsing, jibx

如果 XML 包含 & 等特殊字符，Jibx 会出错。我需要将属性中的文本正确绑定到相应的 java 属性。我不能使用 style="cdata" 作为它的属性而不是子标签。我的 XML 包含 -

```
<Comments>
 <Comment Name="Res_Notes" Text="BED PREFERENCE: http://www.abcd.com?a=b&c=d"/>
</Comments> 
```

我该如何处理？Text 属性包含 URL（使用 & 分隔的 get 参数），因此我无法替换`&`为，`&amp;`否则 URL 将变为无效。

有没有办法在 JibX 级别处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:53:23.067

Sameer，这是无效的 XML。如果您使用 JiBX，则不必担心这一点。如果将 JiBX 对象设置为字符串，例如：

> 名称=“床偏好：[http](http://www.abcd.com?a=b&c=d) ://www.abcd.com?a=b&c=d ”；

当您编组对象时，JiBX 会自动将其转换为有效的 XML：

> <Comments>
> <Comment Name="Res_Notes" Text="BED PREFERENCE: [http://www.abcd.com?a=b&c=d](http://www.abcd.com?a=b&amp;c=d) "/>
> </Comments>

JiBX 在解组 XML 时也会自动将 XML 转换回常规的 java 字符串。

我希望这有帮助。

Don Corley
JiBX 贡献者

# java - 通过局域网（java）发送和收听摇摆事件？

> ID：13678897
> 
> 赞同：1
> 
> 时间：2012-12-03T07:26:03.803
> 
> 标签：java, events, networking, transfer

我写了一个带有 GUI 的简单聊天服务器和一个带有 GUI 的简单聊天客户端。我可以在本地网络中的一台计算机上打开服务器，在另一台计算机上打开客户端。客户端用户键入服务器主机的地址并开始聊天。我还用 GUI 编写了一个井字游戏。

现在我想将游戏嵌入到服务器-客户端程序中。我不知道如何/从哪里开始。（嵌入本身不是问题，问题是如何通过网络使其工作）

Tic tac toe 游戏只是在一个 JFrame 中包含一个 JPanel，JPanel 设置为 GridLayout(3, 3)，并在 JPanel 中添加了 9 个 JButton。我编写了所有必要的编码以使游戏正常运行。

所以基本**问题**是如何使摆动事件在客户端和服务器之间传输

*   当用户“A”选择“游戏 -> Tic Tac Toe”时，向用户“B”发送关于“开始游戏”的请求并启动游戏框架。

关键部分：

*   当用户“A”点击一个 JButton（在游戏中）时，**相应的事件会发送**给用户“B”，这样两个 GUI 端都是相同的。（'A' 和 'B' 看到相同的 GUI 变化）。

如何开始？需要什么东西？有什么提示吗？

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:07:53.800

我相信，您已经定义了一个接口，通过该接口完成您的服务器/客户端交互。定义一种方法，您可以使用该方法发送和接收消息。您的 JButton 点击​​只需要识别哪个 Tile 被点击/移动，并通过接口将该信息提供给服务器/客户端。通过 Swing 事件不是一个好主意。

# c++ - g++ 4.6 和 boost::unordered_map 的 C++11 相关编译错误

> ID：13678899
> 
> 赞同：4
> 
> 时间：2012-12-03T07:26:14.593
> 
> 标签：c++, gcc, boost, stl, c++11

我有一些 C++ 代码会因编译错误而失败，除非它在 ​​C++11 模式下运行，但我无法弄清楚为什么会出现这种情况，因为代码没有（明确）使用 C++11特征：

```
#include <vector>
#include <map>
#include <boost/unordered_map.hpp>

struct SomeStruct {
  boost::unordered_map<int, int> intMap;
};

int main(int argc, const char* argv[]) {
  std::vector<SomeStruct> vals;

  vals.resize(100);
} 
```

在具有 gcc 4.6.3-1ubuntu5 和 boost 1.48 的 Ubuntu 12.04 64 位机器上编译时：

```
g++ test.cpp 
```

然后我得到这个编译错误：

```
In file included from /usr/include/c++/4.6/vector:61:0,
                 from test.cpp:1:
/usr/include/c++/4.6/bits/stl_algobase.h: In function 'typename __gnu_cxx::__enable_if<(! std::__is_scalar<_Tp>::__value), void>::__type std::__fill_a(_ForwardIterator, _ForwardIterator, const _Tp&) [with _ForwardIterator = SomeStruct*, _Tp = SomeStruct, typename __gnu_cxx::__enable_if<(! std::__is_scalar<_Tp>::__value), void>::__type = void]':
/usr/include/c++/4.6/bits/stl_algobase.h:722:7:   instantiated from 'void std::fill(_ForwardIterator, _ForwardIterator, const _Tp&) [with _ForwardIterator = SomeStruct*, _Tp = SomeStruct]'
/usr/include/c++/4.6/bits/vector.tcc:397:5:   instantiated from 'void std::vector<_Tp, _Alloc>::_M_fill_insert(std::vector<_Tp, _Alloc>::iterator, std::vector<_Tp, _Alloc>::size_type, const value_type&) [with _Tp = SomeStruct, _Alloc = std::allocator<SomeStruct>, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<SomeStruct*, std::vector<SomeStruct> >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = SomeStruct*, std::vector<_Tp, _Alloc>::size_type = long unsigned int, std::vector<_Tp, _Alloc>::value_type = SomeStruct]'
/usr/include/c++/4.6/bits/stl_vector.h:944:9:   instantiated from 'void std::vector<_Tp, _Alloc>::insert(std::vector<_Tp, _Alloc>::iterator, std::vector<_Tp, _Alloc>::size_type, const value_type&) [with _Tp = SomeStruct, _Alloc = std::allocator<SomeStruct>, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<SomeStruct*, std::vector<SomeStruct> >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = SomeStruct*, std::vector<_Tp, _Alloc>::size_type = long unsigned int, std::vector<_Tp, _Alloc>::value_type = SomeStruct]'
/usr/include/c++/4.6/bits/stl_vector.h:632:4:   instantiated from 'void std::vector<_Tp, _Alloc>::resize(std::vector<_Tp, _Alloc>::size_type, std::vector<_Tp, _Alloc>::value_type) [with _Tp = SomeStruct, _Alloc = std::allocator<SomeStruct>, std::vector<_Tp, _Alloc>::size_type = long unsigned int, std::vector<_Tp, _Alloc>::value_type = SomeStruct]'
test.cpp:12:18:   instantiated from here
/usr/include/c++/4.6/bits/stl_algobase.h:676:2: error: no match for 'operator=' in '* __first = __value'
/usr/include/c++/4.6/bits/stl_algobase.h:676:2: note: candidate is:
test.cpp:5:8: note: SomeStruct& SomeStruct::operator=(SomeStruct&)
test.cpp:5:8: note:   no known conversion for argument 1 from 'const SomeStruct' to 'SomeStruct&' 
```

在 gcc 中启用 C++11 支持时编译良好：

```
g++ -std=c++0x test.cpp 
```

有人可以解释为什么这只适用于 C++11 模式吗？

**编辑：**

使用 Vagrant 进行复制的步骤：

```
vagrant init precise64
vagrant up
vagrant ssh
sudo apt-get install -y build-essential libboost1.48-all-dev
echo "#include <vector>
#include <map>
#include <boost/unordered_map.hpp>

struct SomeStruct {
  boost::unordered_map<int, int> intMap;
};

int main(int argc, const char* argv[]) {
  std::vector<SomeStruct> vals;

  vals.resize(100);
}" > test.cpp
g++ test.cpp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:14:36.937

的复制赋值运算符`boost::unordered_map`声明为：

```
unordered_map& operator=(unordered_map &t) 
```

这反过来导致 (C++98 12.8 [#10]) 的隐式复制赋值运算符`SomeStruct`被声明为：

```
SomeStruct &operator= (SomeStruct &); 
```

添加显式复制赋值运算符

```
SomeStruct &operator= (const SomeStruct &x) { intMap = x.intMap; return *this; } 
```

解决了这个问题，它通过调用不同的重载来工作`unordered_map::operator=`。

此问题已在 Boost 1.52 中修复。它将运算符声明为：

```
unordered_map& operator=(unordered_map const& x); 
```

# php - MongoDB（或JSON）的Word Cities/Towns/Countries数据库？

> ID：13678901
> 
> 赞同：6
> 
> 时间：2012-12-03T07:26:26.640
> 
> 标签：php, javascript, jquery, mongodb, lithium

我正在使用 MongoDB 开发应用程序。我想在前端提供的标准功能之一是“自动建议”功能，作为城市前几个字母中的一种类型（例如：如果我开始输入“Mu ...”，它应该建议给用户“孟买/印度”。

我在这里看到了一些线程以及谷歌上的几个站点，这些站点是引用数据库，基本上是基于 RDBMS 的。

这里的任何人都使用或整理了一个文档数据库来获取城市/国家的此类信息？如果是这样，我很想听听数据的来源以及他们在 Lithium/Backbone/MongoDB 应用程序中导入数据所遵循的步骤，包括任何相关的学习。

编辑： [https](https://developers.google.com/places/documentation/autocomplete) ://developers.google.com/places/documentation/autocomplete 有没有人使用 Facebook 或 Google Places API 在现场/生产环境中查找城市/国家？它在响应速度和稳定性等方面是否满足您的需求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T07:33:21.573

看看[GeoNames](http://www.geonames.org/)。您必须编写自己的脚本来解析数据并插入 MongoDB。[在此处](http://download.geonames.org/export/dump/)下载 GeoNames 转储文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-31T09:14:58.580

请查看以下 JSON 国家/地区列表：

```
[{"country_code":"AD","country_name":"Andorra"}, {"country_code":"AE","country_name":"United Arab Emirates"}, {"country_code":"AF","country_name":"Afghanistan"}, {"country_code":"AG","country_name":"Antigua and Barbuda"}, {"country_code":"AI","country_name":"Anguilla"}, {"country_code":"AL","country_name":"Albania"}, {"country_code":"AM","country_name":"Armenia"}, {"country_code":"AO","country_name":"Angola"}, {"country_code":"AQ","country_name":"Antarctica"}, {"country_code":"AR","country_name":"Argentina"}, {"country_code":"AS","country_name":"American Samoa"}, {"country_code":"AT","country_name":"Austria"}, {"country_code":"AU","country_name":"Australia"}, {"country_code":"AW","country_name":"Aruba"}, {"country_code":"AX","country_name":"\u00c5land"}, {"country_code":"AZ","country_name":"Azerbaijan"}, {"country_code":"BA","country_name":"Bosnia and Herzegovina"}, {"country_code":"BB","country_name":"Barbados"}, {"country_code":"BD","country_name":"Bangladesh"}, {"country_code":"BE","country_name":"Belgium"}, {"country_code":"BF","country_name":"Burkina Faso"}, {"country_code":"BG","country_name":"Bulgaria"}, {"country_code":"BH","country_name":"Bahrain"}, {"country_code":"BI","country_name":"Burundi"}, {"country_code":"BJ","country_name":"Benin"}, {"country_code":"BL","country_name":"Saint Barth\u00e9lemy"}, {"country_code":"BM","country_name":"Bermuda"}, {"country_code":"BN","country_name":"Brunei"}, {"country_code":"BO","country_name":"Bolivia"}, {"country_code":"BQ","country_name":"Bonaire"}, {"country_code":"BR","country_name":"Brazil"}, {"country_code":"BS","country_name":"Bahamas"}, {"country_code":"BT","country_name":"Bhutan"}, {"country_code":"BV","country_name":"Bouvet Island"}, {"country_code":"BW","country_name":"Botswana"}, {"country_code":"BY","country_name":"Belarus"}, {"country_code":"BZ","country_name":"Belize"}, {"country_code":"CA","country_name":"Canada"}, {"country_code":"CC","country_name":"Cocos [Keeling] Islands"}, {"country_code":"CD","country_name":"Democratic Republic of the Congo"}, {"country_code":"CF","country_name":"Central African Republic"}, {"country_code":"CG","country_name":"Republic of the Congo"}, {"country_code":"CH","country_name":"Switzerland"}, {"country_code":"CI","country_name":"Ivory Coast"}, {"country_code":"CK","country_name":"Cook Islands"}, {"country_code":"CL","country_name":"Chile"}, {"country_code":"CM","country_name":"Cameroon"}, {"country_code":"CN","country_name":"China"}, {"country_code":"CO","country_name":"Colombia"}, {"country_code":"CR","country_name":"Costa Rica"}, {"country_code":"CU","country_name":"Cuba"}, {"country_code":"CV","country_name":"Cape Verde"}, {"country_code":"CW","country_name":"Curacao"}, {"country_code":"CX","country_name":"Christmas Island"}, {"country_code":"CY","country_name":"Cyprus"}, {"country_code":"CZ","country_name":"Czech Republic"}, {"country_code":"DE","country_name":"Germany"}, {"country_code":"DJ","country_name":"Djibouti"}, {"country_code":"DK","country_name":"Denmark"}, {"country_code":"DM","country_name":"Dominica"}, {"country_code":"DO","country_name":"Dominican Republic"}, {"country_code":"DZ","country_name":"Algeria"}, {"country_code":"EC","country_name":"Ecuador"}, {"country_code":"EE","country_name":"Estonia"}, {"country_code":"EG","country_name":"Egypt"}, {"country_code":"EH","country_name":"Western Sahara"}, {"country_code":"ER","country_name":"Eritrea"}, {"country_code":"ES","country_name":"Spain"}, {"country_code":"ET","country_name":"Ethiopia"}, {"country_code":"FI","country_name":"Finland"}, {"country_code":"FJ","country_name":"Fiji"}, {"country_code":"FK","country_name":"Falkland Islands"}, {"country_code":"FM","country_name":"Micronesia"}, {"country_code":"FO","country_name":"Faroe Islands"}, {"country_code":"FR","country_name":"France"}, {"country_code":"GA","country_name":"Gabon"}, {"country_code":"GB","country_name":"United Kingdom"}, {"country_code":"GD","country_name":"Grenada"}, {"country_code":"GE","country_name":"Georgia"}, {"country_code":"GF","country_name":"French Guiana"}, {"country_code":"GG","country_name":"Guernsey"}, {"country_code":"GH","country_name":"Ghana"}, {"country_code":"GI","country_name":"Gibraltar"}, {"country_code":"GL","country_name":"Greenland"}, {"country_code":"GM","country_name":"Gambia"}, {"country_code":"GN","country_name":"Guinea"}, {"country_code":"GP","country_name":"Guadeloupe"}, {"country_code":"GQ","country_name":"Equatorial Guinea"}, {"country_code":"GR","country_name":"Greece"}, {"country_code":"GS","country_name":"South Georgia and the South Sandwich Islands"}, {"country_code":"GT","country_name":"Guatemala"}, {"country_code":"GU","country_name":"Guam"}, {"country_code":"GW","country_name":"Guinea-Bissau"}, {"country_code":"GY","country_name":"Guyana"}, {"country_code":"HK","country_name":"Hong Kong"}, {"country_code":"HM","country_name":"Heard Island and McDonald Islands"}, {"country_code":"HN","country_name":"Honduras"}, {"country_code":"HR","country_name":"Croatia"}, {"country_code":"HT","country_name":"Haiti"}, {"country_code":"HU","country_name":"Hungary"}, {"country_code":"ID","country_name":"Indonesia"}, {"country_code":"IE","country_name":"Ireland"}, {"country_code":"IL","country_name":"Israel"}, {"country_code":"IM","country_name":"Isle of Man"}, {"country_code":"IN","country_name":"India"}, {"country_code":"IO","country_name":"British Indian Ocean Territory"}, {"country_code":"IQ","country_name":"Iraq"}, {"country_code":"IR","country_name":"Iran"}, {"country_code":"IS","country_name":"Iceland"}, {"country_code":"IT","country_name":"Italy"}, {"country_code":"JE","country_name":"Jersey"}, {"country_code":"JM","country_name":"Jamaica"}, {"country_code":"JO","country_name":"Jordan"}, {"country_code":"JP","country_name":"Japan"}, {"country_code":"KE","country_name":"Kenya"}, {"country_code":"KG","country_name":"Kyrgyzstan"}, {"country_code":"KH","country_name":"Cambodia"}, {"country_code":"KI","country_name":"Kiribati"}, {"country_code":"KM","country_name":"Comoros"}, {"country_code":"KN","country_name":"Saint Kitts and Nevis"}, {"country_code":"KP","country_name":"North Korea"}, {"country_code":"KR","country_name":"South Korea"}, {"country_code":"KW","country_name":"Kuwait"}, {"country_code":"KY","country_name":"Cayman Islands"}, {"country_code":"KZ","country_name":"Kazakhstan"}, {"country_code":"LA","country_name":"Laos"}, {"country_code":"LB","country_name":"Lebanon"}, {"country_code":"LC","country_name":"Saint Lucia"}, {"country_code":"LI","country_name":"Liechtenstein"}, {"country_code":"LK","country_name":"Sri Lanka"}, {"country_code":"LR","country_name":"Liberia"}, {"country_code":"LS","country_name":"Lesotho"}, {"country_code":"LT","country_name":"Lithuania"}, {"country_code":"LU","country_name":"Luxembourg"}, {"country_code":"LV","country_name":"Latvia"}, {"country_code":"LY","country_name":"Libya"}, {"country_code":"MA","country_name":"Morocco"}, {"country_code":"MC","country_name":"Monaco"}, {"country_code":"MD","country_name":"Moldova"}, {"country_code":"ME","country_name":"Montenegro"}, {"country_code":"MF","country_name":"Saint Martin"}, {"country_code":"MG","country_name":"Madagascar"}, {"country_code":"MH","country_name":"Marshall Islands"}, {"country_code":"MK","country_name":"Macedonia"}, {"country_code":"ML","country_name":"Mali"}, {"country_code":"MM","country_name":"Myanmar [Burma]"}, {"country_code":"MN","country_name":"Mongolia"}, {"country_code":"MO","country_name":"Macao"}, {"country_code":"MP","country_name":"Northern Mariana Islands"}, {"country_code":"MQ","country_name":"Martinique"}, {"country_code":"MR","country_name":"Mauritania"}, {"country_code":"MS","country_name":"Montserrat"}, {"country_code":"MT","country_name":"Malta"}, {"country_code":"MU","country_name":"Mauritius"}, {"country_code":"MV","country_name":"Maldives"}, {"country_code":"MW","country_name":"Malawi"}, {"country_code":"MX","country_name":"Mexico"}, {"country_code":"MY","country_name":"Malaysia"}, {"country_code":"MZ","country_name":"Mozambique"}, {"country_code":"NA","country_name":"Namibia"}, {"country_code":"NC","country_name":"New Caledonia"}, {"country_code":"NE","country_name":"Niger"}, {"country_code":"NF","country_name":"Norfolk Island"}, {"country_code":"NG","country_name":"Nigeria"}, {"country_code":"NI","country_name":"Nicaragua"}, {"country_code":"NL","country_name":"Netherlands"}, {"country_code":"NO","country_name":"Norway"}, {"country_code":"NP","country_name":"Nepal"}, {"country_code":"NR","country_name":"Nauru"}, {"country_code":"NU","country_name":"Niue"}, {"country_code":"NZ","country_name":"New Zealand"}, {"country_code":"OM","country_name":"Oman"}, {"country_code":"PA","country_name":"Panama"}, {"country_code":"PE","country_name":"Peru"}, {"country_code":"PF","country_name":"French Polynesia"}, {"country_code":"PG","country_name":"Papua New Guinea"}, {"country_code":"PH","country_name":"Philippines"}, {"country_code":"PK","country_name":"Pakistan"}, {"country_code":"PL","country_name":"Poland"}, {"country_code":"PM","country_name":"Saint Pierre and Miquelon"}, {"country_code":"PN","country_name":"Pitcairn Islands"}, {"country_code":"PR","country_name":"Puerto Rico"}, {"country_code":"PS","country_name":"Palestine"}, {"country_code":"PT","country_name":"Portugal"}, {"country_code":"PW","country_name":"Palau"}, {"country_code":"PY","country_name":"Paraguay"}, {"country_code":"QA","country_name":"Qatar"}, {"country_code":"RE","country_name":"R\u00e9union"}, {"country_code":"RO","country_name":"Romania"}, {"country_code":"RS","country_name":"Serbia"}, {"country_code":"RU","country_name":"Russia"}, {"country_code":"RW","country_name":"Rwanda"}, {"country_code":"SA","country_name":"Saudi Arabia"}, {"country_code":"SB","country_name":"Solomon Islands"}, {"country_code":"SC","country_name":"Seychelles"}, {"country_code":"SD","country_name":"Sudan"}, {"country_code":"SE","country_name":"Sweden"}, {"country_code":"SG","country_name":"Singapore"}, {"country_code":"SH","country_name":"Saint Helena"}, {"country_code":"SI","country_name":"Slovenia"}, {"country_code":"SJ","country_name":"Svalbard and Jan Mayen"}, {"country_code":"SK","country_name":"Slovakia"}, {"country_code":"SL","country_name":"Sierra Leone"}, {"country_code":"SM","country_name":"San Marino"}, {"country_code":"SN","country_name":"Senegal"}, {"country_code":"SO","country_name":"Somalia"}, {"country_code":"SR","country_name":"Suriname"}, {"country_code":"SS","country_name":"South Sudan"}, {"country_code":"ST","country_name":"S\u00e3o Tom\u00e9 and Pr\u00edncipe"}, {"country_code":"SV","country_name":"El Salvador"}, {"country_code":"SX","country_name":"Sint Maarten"}, {"country_code":"SY","country_name":"Syria"}, {"country_code":"SZ","country_name":"Swaziland"}, {"country_code":"TC","country_name":"Turks and Caicos Islands"}, {"country_code":"TD","country_name":"Chad"}, {"country_code":"TF","country_name":"French Southern Territories"}, {"country_code":"TG","country_name":"Togo"}, {"country_code":"TH","country_name":"Thailand"}, {"country_code":"TJ","country_name":"Tajikistan"}, {"country_code":"TK","country_name":"Tokelau"}, {"country_code":"TL","country_name":"East Timor"}, {"country_code":"TM","country_name":"Turkmenistan"}, {"country_code":"TN","country_name":"Tunisia"}, {"country_code":"TO","country_name":"Tonga"}, {"country_code":"TR","country_name":"Turkey"}, {"country_code":"TT","country_name":"Trinidad and Tobago"}, {"country_code":"TV","country_name":"Tuvalu"}, {"country_code":"TW","country_name":"Taiwan"}, {"country_code":"TZ","country_name":"Tanzania"}, {"country_code":"UA","country_name":"Ukraine"}, {"country_code":"UG","country_name":"Uganda"}, {"country_code":"UM","country_name":"U.S. Minor Outlying Islands"}, {"country_code":"US","country_name":"United States"}, {"country_code":"UY","country_name":"Uruguay"}, {"country_code":"UZ","country_name":"Uzbekistan"}, {"country_code":"VA","country_name":"Vatican City"}, {"country_code":"VC","country_name":"Saint Vincent and the Grenadines"}, {"country_code":"VE","country_name":"Venezuela"}, {"country_code":"VG","country_name":"British Virgin Islands"}, {"country_code":"VI","country_name":"U.S. Virgin Islands"}, {"country_code":"VN","country_name":"Vietnam"}, {"country_code":"VU","country_name":"Vanuatu"}, {"country_code":"WF","country_name":"Wallis and Futuna"}, {"country_code":"WS","country_name":"Samoa"}, {"country_code":"XK","country_name":"Kosovo"}, {"country_code":"YE","country_name":"Yemen"}, {"country_code":"YT","country_name":"Mayotte"}, {"country_code":"ZA","country_name":"South Africa"}, {"country_code":"ZM","country_name":"Zambia"}, {"country_code":"ZW","country_name":"Zimbabwe"}] 
```

如果您使用的是 RoboMongo，那么如果您想在 MongoDB 集合中使用 RoboMongo 插入多个文档，那么您需要删除两条记录之间的逗号，如果您使用的是 RoboMongo，请使用以下内容。

```
{"country_code":"AD","country_name":"Andorra"} {"country_code":"AE","country_name":"United Arab Emirates"} {"country_code":"AF","country_name":"Afghanistan"} {"country_code":"AG","country_name":"Antigua and Barbuda"} {"country_code":"AI","country_name":"Anguilla"} {"country_code":"AL","country_name":"Albania"} {"country_code":"AM","country_name":"Armenia"} {"country_code":"AO","country_name":"Angola"} {"country_code":"AQ","country_name":"Antarctica"} {"country_code":"AR","country_name":"Argentina"} {"country_code":"AS","country_name":"American Samoa"} {"country_code":"AT","country_name":"Austria"} {"country_code":"AU","country_name":"Australia"} {"country_code":"AW","country_name":"Aruba"} {"country_code":"AX","country_name":"\u00c5land"} {"country_code":"AZ","country_name":"Azerbaijan"} {"country_code":"BA","country_name":"Bosnia and Herzegovina"} {"country_code":"BB","country_name":"Barbados"} {"country_code":"BD","country_name":"Bangladesh"} {"country_code":"BE","country_name":"Belgium"} {"country_code":"BF","country_name":"Burkina Faso"} {"country_code":"BG","country_name":"Bulgaria"} {"country_code":"BH","country_name":"Bahrain"} {"country_code":"BI","country_name":"Burundi"} {"country_code":"BJ","country_name":"Benin"} {"country_code":"BL","country_name":"Saint Barth\u00e9lemy"} {"country_code":"BM","country_name":"Bermuda"} {"country_code":"BN","country_name":"Brunei"} {"country_code":"BO","country_name":"Bolivia"} {"country_code":"BQ","country_name":"Bonaire"} {"country_code":"BR","country_name":"Brazil"} {"country_code":"BS","country_name":"Bahamas"} {"country_code":"BT","country_name":"Bhutan"} {"country_code":"BV","country_name":"Bouvet Island"} {"country_code":"BW","country_name":"Botswana"} {"country_code":"BY","country_name":"Belarus"} {"country_code":"BZ","country_name":"Belize"} {"country_code":"CA","country_name":"Canada"} {"country_code":"CC","country_name":"Cocos [Keeling] Islands"} {"country_code":"CD","country_name":"Democratic Republic of the Congo"} {"country_code":"CF","country_name":"Central African Republic"} {"country_code":"CG","country_name":"Republic of the Congo"} {"country_code":"CH","country_name":"Switzerland"} {"country_code":"CI","country_name":"Ivory Coast"} {"country_code":"CK","country_name":"Cook Islands"} {"country_code":"CL","country_name":"Chile"} {"country_code":"CM","country_name":"Cameroon"} {"country_code":"CN","country_name":"China"} {"country_code":"CO","country_name":"Colombia"} {"country_code":"CR","country_name":"Costa Rica"} {"country_code":"CU","country_name":"Cuba"} {"country_code":"CV","country_name":"Cape Verde"} {"country_code":"CW","country_name":"Curacao"} {"country_code":"CX","country_name":"Christmas Island"} {"country_code":"CY","country_name":"Cyprus"} {"country_code":"CZ","country_name":"Czech Republic"} {"country_code":"DE","country_name":"Germany"} {"country_code":"DJ","country_name":"Djibouti"} {"country_code":"DK","country_name":"Denmark"} {"country_code":"DM","country_name":"Dominica"} {"country_code":"DO","country_name":"Dominican Republic"} {"country_code":"DZ","country_name":"Algeria"} {"country_code":"EC","country_name":"Ecuador"} {"country_code":"EE","country_name":"Estonia"} {"country_code":"EG","country_name":"Egypt"} {"country_code":"EH","country_name":"Western Sahara"} {"country_code":"ER","country_name":"Eritrea"} {"country_code":"ES","country_name":"Spain"} {"country_code":"ET","country_name":"Ethiopia"} {"country_code":"FI","country_name":"Finland"} {"country_code":"FJ","country_name":"Fiji"} {"country_code":"FK","country_name":"Falkland Islands"} {"country_code":"FM","country_name":"Micronesia"} {"country_code":"FO","country_name":"Faroe Islands"} {"country_code":"FR","country_name":"France"} {"country_code":"GA","country_name":"Gabon"} {"country_code":"GB","country_name":"United Kingdom"} {"country_code":"GD","country_name":"Grenada"} {"country_code":"GE","country_name":"Georgia"} {"country_code":"GF","country_name":"French Guiana"} {"country_code":"GG","country_name":"Guernsey"} {"country_code":"GH","country_name":"Ghana"} {"country_code":"GI","country_name":"Gibraltar"} {"country_code":"GL","country_name":"Greenland"} {"country_code":"GM","country_name":"Gambia"} {"country_code":"GN","country_name":"Guinea"} {"country_code":"GP","country_name":"Guadeloupe"} {"country_code":"GQ","country_name":"Equatorial Guinea"} {"country_code":"GR","country_name":"Greece"} {"country_code":"GS","country_name":"South Georgia and the South Sandwich Islands"} {"country_code":"GT","country_name":"Guatemala"} {"country_code":"GU","country_name":"Guam"} {"country_code":"GW","country_name":"Guinea-Bissau"} {"country_code":"GY","country_name":"Guyana"} {"country_code":"HK","country_name":"Hong Kong"} {"country_code":"HM","country_name":"Heard Island and McDonald Islands"} {"country_code":"HN","country_name":"Honduras"} {"country_code":"HR","country_name":"Croatia"} {"country_code":"HT","country_name":"Haiti"} {"country_code":"HU","country_name":"Hungary"} {"country_code":"ID","country_name":"Indonesia"} {"country_code":"IE","country_name":"Ireland"} {"country_code":"IL","country_name":"Israel"} {"country_code":"IM","country_name":"Isle of Man"} {"country_code":"IN","country_name":"India"} {"country_code":"IO","country_name":"British Indian Ocean Territory"} {"country_code":"IQ","country_name":"Iraq"} {"country_code":"IR","country_name":"Iran"} {"country_code":"IS","country_name":"Iceland"} {"country_code":"IT","country_name":"Italy"} {"country_code":"JE","country_name":"Jersey"} {"country_code":"JM","country_name":"Jamaica"} {"country_code":"JO","country_name":"Jordan"} {"country_code":"JP","country_name":"Japan"} {"country_code":"KE","country_name":"Kenya"} {"country_code":"KG","country_name":"Kyrgyzstan"} {"country_code":"KH","country_name":"Cambodia"} {"country_code":"KI","country_name":"Kiribati"} {"country_code":"KM","country_name":"Comoros"} {"country_code":"KN","country_name":"Saint Kitts and Nevis"} {"country_code":"KP","country_name":"North Korea"} {"country_code":"KR","country_name":"South Korea"} {"country_code":"KW","country_name":"Kuwait"} {"country_code":"KY","country_name":"Cayman Islands"} {"country_code":"KZ","country_name":"Kazakhstan"} {"country_code":"LA","country_name":"Laos"} {"country_code":"LB","country_name":"Lebanon"} {"country_code":"LC","country_name":"Saint Lucia"} {"country_code":"LI","country_name":"Liechtenstein"} {"country_code":"LK","country_name":"Sri Lanka"} {"country_code":"LR","country_name":"Liberia"} {"country_code":"LS","country_name":"Lesotho"} {"country_code":"LT","country_name":"Lithuania"} {"country_code":"LU","country_name":"Luxembourg"} {"country_code":"LV","country_name":"Latvia"} {"country_code":"LY","country_name":"Libya"} {"country_code":"MA","country_name":"Morocco"} {"country_code":"MC","country_name":"Monaco"} {"country_code":"MD","country_name":"Moldova"} {"country_code":"ME","country_name":"Montenegro"} {"country_code":"MF","country_name":"Saint Martin"} {"country_code":"MG","country_name":"Madagascar"} {"country_code":"MH","country_name":"Marshall Islands"} {"country_code":"MK","country_name":"Macedonia"} {"country_code":"ML","country_name":"Mali"} {"country_code":"MM","country_name":"Myanmar [Burma]"} {"country_code":"MN","country_name":"Mongolia"} {"country_code":"MO","country_name":"Macao"} {"country_code":"MP","country_name":"Northern Mariana Islands"} {"country_code":"MQ","country_name":"Martinique"} {"country_code":"MR","country_name":"Mauritania"} {"country_code":"MS","country_name":"Montserrat"} {"country_code":"MT","country_name":"Malta"} {"country_code":"MU","country_name":"Mauritius"} {"country_code":"MV","country_name":"Maldives"} {"country_code":"MW","country_name":"Malawi"} {"country_code":"MX","country_name":"Mexico"} {"country_code":"MY","country_name":"Malaysia"} {"country_code":"MZ","country_name":"Mozambique"} {"country_code":"NA","country_name":"Namibia"} {"country_code":"NC","country_name":"New Caledonia"} {"country_code":"NE","country_name":"Niger"} {"country_code":"NF","country_name":"Norfolk Island"} {"country_code":"NG","country_name":"Nigeria"} {"country_code":"NI","country_name":"Nicaragua"} {"country_code":"NL","country_name":"Netherlands"} {"country_code":"NO","country_name":"Norway"} {"country_code":"NP","country_name":"Nepal"} {"country_code":"NR","country_name":"Nauru"} {"country_code":"NU","country_name":"Niue"} {"country_code":"NZ","country_name":"New Zealand"} {"country_code":"OM","country_name":"Oman"} {"country_code":"PA","country_name":"Panama"} {"country_code":"PE","country_name":"Peru"} {"country_code":"PF","country_name":"French Polynesia"} {"country_code":"PG","country_name":"Papua New Guinea"} {"country_code":"PH","country_name":"Philippines"} {"country_code":"PK","country_name":"Pakistan"} {"country_code":"PL","country_name":"Poland"} {"country_code":"PM","country_name":"Saint Pierre and Miquelon"} {"country_code":"PN","country_name":"Pitcairn Islands"} {"country_code":"PR","country_name":"Puerto Rico"} {"country_code":"PS","country_name":"Palestine"} {"country_code":"PT","country_name":"Portugal"} {"country_code":"PW","country_name":"Palau"} {"country_code":"PY","country_name":"Paraguay"} {"country_code":"QA","country_name":"Qatar"} {"country_code":"RE","country_name":"R\u00e9union"} {"country_code":"RO","country_name":"Romania"} {"country_code":"RS","country_name":"Serbia"} {"country_code":"RU","country_name":"Russia"} {"country_code":"RW","country_name":"Rwanda"} {"country_code":"SA","country_name":"Saudi Arabia"} {"country_code":"SB","country_name":"Solomon Islands"} {"country_code":"SC","country_name":"Seychelles"} {"country_code":"SD","country_name":"Sudan"} {"country_code":"SE","country_name":"Sweden"} {"country_code":"SG","country_name":"Singapore"} {"country_code":"SH","country_name":"Saint Helena"} {"country_code":"SI","country_name":"Slovenia"} {"country_code":"SJ","country_name":"Svalbard and Jan Mayen"} {"country_code":"SK","country_name":"Slovakia"} {"country_code":"SL","country_name":"Sierra Leone"} {"country_code":"SM","country_name":"San Marino"} {"country_code":"SN","country_name":"Senegal"} {"country_code":"SO","country_name":"Somalia"} {"country_code":"SR","country_name":"Suriname"} {"country_code":"SS","country_name":"South Sudan"} {"country_code":"ST","country_name":"S\u00e3o Tom\u00e9 and Pr\u00edncipe"} {"country_code":"SV","country_name":"El Salvador"} {"country_code":"SX","country_name":"Sint Maarten"} {"country_code":"SY","country_name":"Syria"} {"country_code":"SZ","country_name":"Swaziland"} {"country_code":"TC","country_name":"Turks and Caicos Islands"} {"country_code":"TD","country_name":"Chad"} {"country_code":"TF","country_name":"French Southern Territories"} {"country_code":"TG","country_name":"Togo"} {"country_code":"TH","country_name":"Thailand"} {"country_code":"TJ","country_name":"Tajikistan"} {"country_code":"TK","country_name":"Tokelau"} {"country_code":"TL","country_name":"East Timor"} {"country_code":"TM","country_name":"Turkmenistan"} {"country_code":"TN","country_name":"Tunisia"} {"country_code":"TO","country_name":"Tonga"} {"country_code":"TR","country_name":"Turkey"} {"country_code":"TT","country_name":"Trinidad and Tobago"} {"country_code":"TV","country_name":"Tuvalu"} {"country_code":"TW","country_name":"Taiwan"} {"country_code":"TZ","country_name":"Tanzania"} {"country_code":"UA","country_name":"Ukraine"} {"country_code":"UG","country_name":"Uganda"} {"country_code":"UM","country_name":"U.S. Minor Outlying Islands"} {"country_code":"US","country_name":"United States"} {"country_code":"UY","country_name":"Uruguay"} {"country_code":"UZ","country_name":"Uzbekistan"} {"country_code":"VA","country_name":"Vatican City"} {"country_code":"VC","country_name":"Saint Vincent and the Grenadines"} {"country_code":"VE","country_name":"Venezuela"} {"country_code":"VG","country_name":"British Virgin Islands"} {"country_code":"VI","country_name":"U.S. Virgin Islands"} {"country_code":"VN","country_name":"Vietnam"} {"country_code":"VU","country_name":"Vanuatu"} {"country_code":"WF","country_name":"Wallis and Futuna"} {"country_code":"WS","country_name":"Samoa"} {"country_code":"XK","country_name":"Kosovo"} {"country_code":"YE","country_name":"Yemen"} {"country_code":"YT","country_name":"Mayotte"} {"country_code":"ZA","country_name":"South Africa"} {"country_code":"ZM","country_name":"Zambia"} {"country_code":"ZW","country_name":"Zimbabwe"} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-02T05:04:21.420

[来自http://GeoNames.org](http://GeoNames.org)的源数据，这个 python 脚本可以让你在 mongodb 中插入地理数据并在几秒钟内更新。 [https://github.com/Albert-Gao/world-cities-mongodb](https://github.com/Albert-Gao/world-cities-mongodb)

这是另一个提供大约 138,000 个城市的数据的存储库， [https://github.com/nabilashraf/all-the-cities-mongodb](https://github.com/nabilashraf/all-the-cities-mongodb)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-01T09:33:12.980

如果您可以访问，我会推荐 googlePlaces API，它非常易于使用，然后您可以将地理位置数据保存在数据库中。

这比必须保留（非常）长的世界城市和国家列表并且每次都必须加入它们要好。

甚至没有人开始谈论本地化和语言......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T07:42:14.363

我建议使用提供自动完成服务的 Facebook API：

[http://developers.facebook.com/docs/reference/ads-api/get-autocomplete-data/](http://developers.facebook.com/docs/reference/ads-api/get-autocomplete-data/)

如果您真的需要，然后在 Mongo 中缓存数据（具有 JSON 结果）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-01T09:27:52.040

我建议您查看这个 GitHub 存储库：

[https://github.com/turalus/openDB](https://github.com/turalus/openDB)

这是针对 MySQL 的，但我可以向您保证，有很多方法可以轻松地将 MySQL 数据库转换为 MongoDB 支持的格式 (JSON)

# html - 用于 UCS - 2 或 RDS 的 html5 中的字符编码

> ID：13678905
> 
> 赞同：0
> 
> 时间：2012-12-03T07:26:35.937
> 
> 标签：html, character-encoding, opera

![在此处输入图像描述](../Images/83a2121582c699488abe92105f932934.png)我一直在尝试在 html5 中使用字符编码，如下所示：

```
 <meta charset="UCS-2" />    
    <meta http-equiv="Content-Type" content="text/html; charset=UCS-2" /> 
```

和

```
 <meta charset="Utf-8" />  
    <meta http-equiv="Content-Type" content="text/html; charset=Utf-8" /> 
```

和

```
 <meta charset="Utf-16" />  
    <meta http-equiv="Content-Type" content="text/html; charset=Utf-16" /> 
```

但是，这些都没有帮助我解决 Opera 控制台中的以下错误：

加载时第 xxx 行出现语法错误：意外字符：U+0007。

请让我知道是否有人有任何解决方案。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:52:52.690

根据所有 HTML 规范，字符 U+0007 是不允许的。这不依赖于字符编码。HTML5 草案似乎对允许的字符集保持沉默，但这可能意味着没有更改，此外，如果您在浏览器上遇到问题，那么重要的是浏览器做了什么，而不是某些草案说了什么。

如果您认为您的文档实际上不包含 U+0007，您需要披露文档的相关部分——最好是能够证明问题的最小独立文档。

文档的字符编码应声明为与实际编码匹配，而不是通过反复试验。“UCS-2”不是[注册](http://www.iana.org/assignments/character-sets)名称（“ISO-10646-UCS-2”是注册名称，但您可能找不到能识别它的浏览器）。通常没有充分的理由使用 UTF-16，部分原因是浏览器支持不足。UTF-16 编码的文档最好重新编码为 UTF-8，以便在 Web 上使用。

# c++ - 为什么 g++ 在启用 `-fpic` 的情况下不发出这个与构造函数相关的 noexcept 警告？

> ID：13678906
> 
> 赞同：5
> 
> 时间：2012-12-03T07:26:43.013
> 
> 标签：c++, optimization, gcc, g++, fpic

我有下一个代码：

```
#include <exception>
#include <cstdlib>

void g() { throw 1; }
void (*p)() = g;

template <class T>
void f(T) noexcept (noexcept (T())) // warning 1
{
  p();
}

struct A { A() { } };           // warning 2

int main()
{
  try { f(A()); } catch (int) { }
  return 1;
} 
```

并使用下一个选项：
`-fno-pic -fmessage-length=0 -std=c++0x -Wnoexcept`
g++ 抛出下一个警告：

```
noexcept03.C:16:6: warning: noexcept-expression evaluates to 'false' because of a call to 'A::A()' [-Wnoexcept]
noexcept03.C:21:12: warning: but 'A::A()' does not throw; perhaps it should be declared 'noexcept' [-Wnoexcept] 
```

但是为什么当我使用`-fpic`而不是`-fno-pic` `g++`不会引发任何警告时？

**编辑：**
GCC 版本 - 4.7.2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:21:25.187

在这种`-fpic`情况下不会发出警告，因为编译器假定构造函数`A::A()`可以抛出。

在编译 PIC 代码时，GCC 假定每个全局名称都可以被其他模块的符号覆盖。因此，在没有显式`noexcept`声明的情况下，GCC 必须保守地假设这样的函数可以抛出异常，即使它可以静态地证明它现在看到的版本不能。

作为参考，请参阅此处的错误和补丁[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=29323#c7](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=29323#c7)（此后代码发生了一些变化，但开始时是这样的）

一个例子，上面适用：

```
/* inline */ int f() { return 0; }

int g() noexcept (noexcept(f())) { return f() + 1; } 
```

* * *

所以，这就是“为什么”没有警告的直接原因。以下是我的想法。

然而，C++11 说：

> 7.1.2 函数说明符 [dcl.fct.spec]
> 
> 4 内联函数应在使用它的每个翻译单元中定义，并且**在每种情况下都应具有完全相同的定义**（3.2）。

即对于内联函数，如果确定一个函数不抛出，GCC 可以假设这样一个函数的每个潜在覆盖也不能抛出。

从这个意义上说，GCC 对内联函数过于保守，无论是在原始测试用例中还是在上面未`inline`注释关键字的示例中，GCC 都应该发出警告，即使在`-fpic/-fPIC`使用时也是如此。

# objective-c - 使用 Apple 的 External Accessories API 捕获数据流

> ID：13678908
> 
> 赞同：1
> 
> 时间：2012-12-03T07:26:54.363
> 
> 标签：objective-c, ios, iostream

嗨，我正在为 iPAD 制作应用程序，其中我必须捕获来自每秒发送 512 个值的外部设备的数据。我使用了 Apple 的 External Accessories API，代码如下：-

```
- (void)stream:(NSStream*)theStream handleEvent:(NSStreamEvent)streamEvent  
{  
    switch (streamEvent)  
 {  
   case NSStreamEventNone:  //Sent when open complete
  //NSLog(@"NSStreamEventNone");
   break;   
  case NSStreamEventOpenCompleted:  //Sent when open complete

  //NSLog(@"NStreamEventOpenCompleted: %@", theStream);
  break ;

  case NSStreamEventHasBytesAvailable:
    {
   //NSLog(@"NSStreamEventHasBytesAvailable");

    uint8_t buffer[1024];
    unsigned int len=0;

    len=[(NSInputStream *)theStream  read:buffer maxLength:1024];
    if(len>0){      

    NSData* data=[NSData dataWithBytes:buffer length:len];

    NSString *value = [[NSString alloc] initWithData:dataencoding:NSASCIIStringEncoding];

   }
    }
 break;   

 case NSStreamEventHasSpaceAvailable:  
    os = theStream;
    break;
 case NSStreamEventErrorOccurred:  
   //NSLog(@"NSStreamEventErrorOccurred");
    break;   

  case NSStreamEventEndEncountered:  
    ////NSLog(@"NSStreamEventEndEncountered");
    break;   
  default:  
    break;  
  }  
 } 
```

我从中得到的是一些没有正确编码的乱码。我也尝试过使用以下内容：-

```
 NSString *value = [[NSString alloc] initWithData:dataencoding:NSUTF8StringEncoding]; 
```

但这只是一直返回null。编辑：- 当我 NSLog 时，我得到以下信息：-

```
 v¬™¬™¬Ä√ø√π¬Ö¬™¬™¬Ä √ø√ª¬É¬™¬™¬Ä√øK3¬™¬™¬Ä√ø¬£√õ¬™¬™¬Ä√ø√ã¬≥¬™¬™¬Ä√ø}¬™¬™¬Ä√ø√•¬ô¬™¬™¬Ä 
```

我应该在这里得到整数。有人可以告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:52:53.703

您的 NSLog 似乎是一串扩展的 ASCII 字符。假设它们来自 Apple 扩展的 Ascii 字符集，那么您列出的片段开头表示的 uint8_t（1 字节）数据是：

¬Ä√ø√π¬Ö¬™¬™¬Ä...

用十进制表示为：

172、196、26、248、26、192、172、214、172、34、172 ...

这是你的数据吗？这是一些测试输出的代码。

```
NSString *receivedString = @"¬Ä√ø√π¬Ö¬™¬™¬Ä"; // Change this to the string variable you were using with NSLog

for (int i=0; i<[receivedString length]; i++) 
{
    unsigned char asciiCode = [ receivedString characterAtIndex:i];
    NSLog( @"Value at %d is %d", i, asciiCode ); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:24:11.003

您收到的数据是原始值。绝对不是 UTF8 字符。很可能您必须直接从 NSData 的字节中将每 2 个字节放入一个 2 字节整数中。

# android - Android：在没有安装谷歌地图的模拟器中运行应用程序

> ID：13678918
> 
> 赞同：0
> 
> 时间：2012-12-03T07:27:27.153
> 
> 标签：android, google-maps, maps

是否可以在需要 Google Maps for Android 4.0 或更高版本的模拟器中安装和调试应用程序？我注意到地图不包含在 SDK 中，除了 API。如果不可能，如何在模拟器中测试需要谷歌地图的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:39:57.107

对的，这是可能的。为此，您必须使用 Google API 14 或更高版本创建项目，而不是使用标准 Android API 14 或更高版本。如果您未安装 Google API，则必须使用 SDK 管理器下载并安装所需的 Google API 版本，在本例中为 Google API 版本 14 或更高版本。在任何情况下，如果 SDK 管理器没有显示 Google API，那么您必须将 ADT 插件和 SDK 管理器更新到最新版本。

# c++ - Eclipse 执行 MI 命令 -target-select remote 失败

> ID：13678923
> 
> 赞同：10
> 
> 时间：2012-12-03T07:27:46.053
> 
> 标签：c++, eclipse, gdb, remote-debugging, gdbserver

尝试在 Eclipse 中设置远程 gdb 调试。当我尝试调试时，我得到：

```
 Error in final launch sequence
 Failed to execute MI command: -target-select remote LOCALHOST:2345
 Error message from debugger back end:
  LOCALHOST:2345: Connection timed out.
  LOCALHOST:2345: Connection timed out. 
```

* * *

我的 gdb 调试器设置正确

```
 /carambola/carambola/build_dir/toolchain-mipsel_r2_gcc-4.6-linaro_uClibc-0.9.33.2/gdb-linaro-7.2-2011.03-0/gdb/gdb 
```

（执行此操作时，我可以获得 gdb shell）

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T12:25:45.903

如果 gdb 客户端（在 eclipse 中）未针对与 gdb 服务器相同的架构进行编译，则会发生这种情况。在 Eclipse 调试中设置正确的 gdb 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T20:01:39.637

该连接使用 localhost 而不是远程主机。要更正，在 Eclipse 中转到

运行->调试配置..

这里选择 Debugger 选项卡，里面有三个附加选项卡（Main、Shared Libraries、Connections）。在“连接”中，您可以为远程机器提供正确的 IP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-14T14:05:40.650

切换到调试视图（右上角按钮），然后在左侧的顶部菜单栏中单击红色框终止按钮。然后我能够再次启动调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-29T20:54:03.810

我正在使用 Eclipse，下面是我如何在它发生时设法修复它。

1.  在 IDE 的最右上角单击调试按钮（[调试按钮](https://i.stack.imgur.com/ZO2BU.png)）以查看调试模式。
2.  进入调试模式后，右键单击项目树所在的位置（通常在最左侧的列中）（[项目树](https://i.stack.imgur.com/rUXtY.png)）
3.  选择“终止并删除”
4.  重建你的代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-07T14:52:18.433

我尝试将我的工作区更改为放置项目的主文件夹并检查我的 ST Link 设备是否被扫描（调试配置）并检查是否在运行配置下，在 main 下，.elf 文件在 c/c++ 下被选中：然后我的代码开始工作。希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-03T23:53:26.247

我有同样的问题，在这里搜索，但解决方案是：...\Cygwin\bin 不在系统的 PATH 中。我认为没有找到gdb。

```
set PATH=C:\pathto\Cygwin\bin;%PATH% 
```

在 eclipse 开始之前很有帮助（设置 PATH 并在批处理文件中启动 eclipse.exe）。但是编译器被找到了（gcc，g++），不知道为什么。可能编译器应该与调试器 gdb 匹配，请参见上面的答案。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-06-08T13:23:40.940

产生这个问题有两个原因：

1.  如果启用了断点，则转到`Run`并跳过断点。
2.  如果调试设备未正确设置，请转到`Debug`配置为并检查`Debugger`选项是否正确填写。

# javascript - 如何将数据传递给 $mobile.changepage

> ID：13678924
> 
> 赞同：0
> 
> 时间：2012-12-03T07:27:53.383
> 
> 标签：javascript, jquery, jquery-mobile

```
$(".bTable tr").live('click', function(e){
    var bookno = $(this).attr("id"); 
    var bno = $("#"+ bookno +" .bookno").text(); 
    var cnt =  $("#"+ bookno +" .chapterCnt").text(); 

    var btitle =  $("#"+ bookno +" th h5").text(); 
    var btitle_eng =  $("#"+ bookno +" .eng").text(); 

    $.mobile.changePage("Pagecheck.html", {
                            type: "post",
                            data: "bno=" + bno +"&chapCnt="+cnt + "&btitle=" + btitle + "&btitleeng=" + btitle_eng
                        }
    ); // (1)

    e.stopImmediatePropagation(); 

}); 
```

Pagecheck.html 代码：

```
$('#Pagecheck').live('pageshow', function(e, ui) {
    var bno = getParameterByName('bno'); // (2) 
    var cno = getParameterByName('chapCnt'); 
    var btitle = getParameterByName('btitle'); 
    var btitleeng = getParameterByName('btitleeng');  

    subBookno = bno;   

    alert(bno); // (3) 
}); 
```

我正在使用 Phonegap 制作混合移动应用程序。
`(3)`警报的结果是“空”。

怎么了， `(1)`或者`(2)`？

# c - C中的带有打开文件的宏

> ID：13678925
> 
> 赞同：1
> 
> 时间：2012-12-03T07:27:59.180
> 
> 标签：c, macros, c-preprocessor

是否可以编写一个**C**宏，在代码块之前执行一些操作，在代码块之后执行另一个操作？

```
int is_locked;
#define LOCKED for(is_locked = 1, lock_something(); is_locked; is_locked = 0, unlock_something())

LOCKED{
    ...
    do_something_under_lock();
    ...
} 
```

这会奏效；但是，它需要变量`is_locked`来检查我们是否处于锁定状态。还有另一种可能的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:46:19.533

您发布的代码几乎可以正常工作。稍作修改，它就可以使用 C99 编译器进行编译：

```
#define LOCKED for(int lockvar = (lock_something(), 1);       \
                   lockvar; \
                   lockvar = 0, unlock_something()) 
```

但是，与 C++ 保护类不同，它非常容易出错，因为如果使用、或退出块，则`unlock_something()`不会*触发*。除此之外，还会有完全不同的含义：`return``goto``break``break`

```
for (i = 0; i < x; i++) {
  LOCKED {
    if (condition)
      break;  // exits the LOCKED block, not the loop -- WITHOUT unlocking
    if (other_condition)
      return; // returns from function, but never unlocks
  }
} 
```

不建议在生产代码中使用此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:37:05.657

```
#include <stdio.h>
typedef void(*vrv)(void);

void before_after(vrv before, vrv func, vrv after) {
  before();
  func();
  after();
}

void b() { printf(" 1 "); }
void a() { printf(" 3 "); }
void f() { printf(" 2 "); }

int main() {
  before_after(b, f, a); 
  return 0;
} 
```

# java - Quartz 运行一次作业

> ID：13678926
> 
> 赞同：0
> 
> 时间：2012-12-03T07:28:04.527
> 
> 标签：java, spring, maven, quartz-scheduler

我正在使用 Quartz 框架来安排作业。我想每 2 秒重复一次操作。但它似乎只执行一次。我怎样才能让它永远运行！

```
public static void main(String[] args) throws InterruptedException {

    //ChangingRatesSimulator.doSimulation();
    try {
        // Grab the Scheduler instance from the Factory 
        Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();

        // and start it off
        scheduler.start();
        JobDetail job = newJob(ChangingRatesSimulator.class).withIdentity("job1","group1").build();

        // compute a time that is on the next round minute
        Date runTime =  evenSecondDate(new Date());

        // Trigger the job to run on the next round minute
        Trigger trigger = newTrigger()
            .withIdentity("trigger1", "group1")
            .startAt(runTime)
            .withSchedule(simpleSchedule()
                    .withIntervalInSeconds(5)
                    .repeatForever())
            .build();
        scheduler.scheduleJob(job, trigger);
        scheduler.start();

    } catch (SchedulerException se) {
        se.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:25:26.477

由于您使用 Spring 标记了您的问题，因此我假设您正在使用它。[您应该在此处查看](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)Spring 3 中关于调度所做的更改。

另一方面，当然可以使用纯石英来实现，可能我会为[CronTrigger](http://quartz-scheduler.org/api/2.0.0/org/quartz/CronTrigger.html)使用 cron 表达式，如下所示：

```
0/2 * * * * * 
```

# wcf - 从 Power builder-11.5 调用 WCF 服务

> ID：13678931
> 
> 赞同：3
> 
> 时间：2012-12-03T07:29:12.610
> 
> 标签：wcf, powerbuilder

请帮我。我有一个电源生成器 - 安装了 11.5 版本，我无法升级到 12.0。现在的问题是我必须从 power builder 调用 WCF 服务。

请让我知道这是否可能。如果是，那么请给我一些示例/代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-11T10:14:07.290

您是否尝试过：[Real's how to - 从 Internet 获取数据](http://www.rgagnon.com/pbdetails/pb-0128.html)？
我使用相同概念的细微变化：

```
internetresult uo_result  
inet iinet_base  
long ll_ret  
string ls_url  

ll_ret = GetContextService("Internet", iinet_base)  
IF ll_ret < 0 then  
    MessageBox("Error", "Error...", StopSign!)  
    Return  
End IF  

uo_result = CREATE uo_internetresult  
ll_ret = iinet_base.geturl(ls_url, uo_result) 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:42:45.257

无法使用 PB11.5使用**WCF Web 服务。**

如果您可以向项目添加新代码，那么我认为您可以创建一个解决方法。我没有示例代码，但您可以使用 Visual Studio 和 .NET 3.5（PB11.5 不支持 .NET 4）创建一个 .NET 程序集，作为 WCF Web 服务的代理，然后您可以使用PB11.5 程序中的新程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-11T13:14:05.617

您可以使用 power builder 中的向导来创建代理。

1.  在该向导中，您只需要输入 wcf 服务的 url
2.  选择 .net 然后创建代理
3.  在代码中使用该代理

# javascript - 有没有一种方法可以有效地取消 Fabric JS 上的组对象的组合？

> ID：13678932
> 
> 赞同：0
> 
> 时间：2012-12-03T07:29:16.530
> 
> 标签：javascript, html5-canvas, fabricjs

我目前正在使用fabric JS。我用一堆文本对象设置了组对象。当我调整组大小时，子文本对象的属性不会改变。我已经手动尝试通过克隆 Group 对象中的对象然后将它们添加到画布来取消分组对象，但对象不保留它们的属性。有什么想法吗？非常感激。谢谢

# python - 如何在 django 的 URL 中传递 kwargs

> ID：13678933
> 
> 赞同：16
> 
> 时间：2012-12-03T07:29:19.230
> 
> 标签：python, django

在 django 文档中，url 函数是这样的

```
url(regex, view, kwargs=None, name=None, prefix='') 
```

我有这个

```
url(r'^download/template/(?P<object_id>\d+)/$', views.myview().myfunction,model=models.userModel, name="sample") 
```

这是我的看法

```
class myview(TemplateView):

    def myfunction(self,request, object_id, **kwargs):
        model = kwargs['model'] 
```

我收到这个错误

```
url() got an unexpected keyword argument 'model' 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-03T07:33:05.320

您正在尝试将`model`关键字参数传递给`url()`函数；你需要传入一个`kwargs`参数（它需要一个字典）：

```
url(r'^download/template/(?P<object_id>\d+)/$', views.myview().myfunction, 
    kwargs=dict(model=models.userModel), name="sample") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-03T07:31:30.110

这：

```
url(r'^download/template/(?P<object_id>\d+)/$', views.myview().myfunction,model=models.userModel, name="sample") 
```

应该：

```
url(r'^download/template/(?P<object_id>\d+)/$', views.myview.as_view(model=models.userModel), name="sample") 
```

查看[文档](https://docs.djangoproject.com/en/dev/topics/class-based-views/#simple-usage-in-your-urlconf)

您当前的实现不是线程安全的。例如：

```
from django import http
from django.contrib.auth.models import User
from django.views import generic

class YourView(generic.TemplateView):
    def __init__(self):
        self.foo = None

    def your_func(self, request, object_id, **kwargs):
        print 'Foo', self.foo
        self.foo = 'bar'
        return http.HttpResponse('foo')

urlpatterns = patterns('test_app.views',
    url(r'^download/template/(?P<object_id>\d+)/$', YourView().your_func,
        kwargs=dict(model=User), name="sample"),
) 
```

你会期望它打印 'Foo **None** ' 吗？请小心，因为实例是跨请求共享的：

```
Django version 1.4.2, using settings 'django_test.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
Foo None
[03/Dec/2012 08:14:31] "GET /test_app/download/template/3/ HTTP/1.1" 200 3
Foo bar
[03/Dec/2012 08:14:32] "GET /test_app/download/template/3/ HTTP/1.1" 200 3 
```

因此，当它不是线程安全的时，您不能假设它在请求开始时会处于干净状态——这与使用 as_view() 时不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T16:10:27.890

我相信如果你在你的`views.py`

```
from django.views.generic import TemplateView
from .models import userModel

class myview(TemplateView):
    def myfunction(self, request, object_id, *args, **kwargs):
        model = userModel
        # ... Do something with it 
```

# mysql - 复制列的值变为 NULL 时，无法按列排序

> ID：13678936
> 
> 赞同：1
> 
> 时间：2012-12-03T07:29:42.633
> 
> 标签：mysql, sql

我在存储过程中有一个临时表，这给我带来了一些麻烦。出现的基本症状是它不允许我按特定列排序。

```
-- Mockup table
CREATE TEMPORARY TABLE `result` (
    col_a INT,
    col_b VARCHAR(100),
    col_c VARCHAR(100),
    col_d VARCHAR(100));

-- Imagine inserting and updating a bunch of data here...

-- And then we select
SELECT
    *
FROM
    result
ORDER BY
    col_b ASC,
    col_c ASC,
    col_d ASC; 
```

上面的内容会让 MySQL 愉快地脱口而出一个由`col_c`then排序的结果集`col_d`。`col_b`根本没有订购。

尝试了所有可能的排列并得出结论，有两列总是拒绝排序（我的实际表中的真实姓名分别是`department`and 和`userid`and `VARCHAR(100)`）`INT`。

因此，尝试在临时表上使用排序规则和数据库引擎，但这没有效果。在任一列中都找不到任何奇怪的数据。

`result`现在今天早上我尝试制作我命名的表的精确副本`resultCopy`并做了等效的操作（但是对于真实的列名，真实的表有 15 列，这对于这个例子来说有点多）：

```
INSERT INTO `resultCopy` (col_a, col_b, col_c, col_d)
    SELECT col_a, col_b, col_c, col_d
    FROM result;

SELECT
    *
FROM
    resultCopy
ORDER BY
    col_b ASC,
    col_c ASC,
    col_d ASC; 
```

我得到的结果在两个不可排序的列中都只有 NULL 值。除此之外排序顺序完全相同。

所以，我的原始`result`表中有数据（包括不可排序的列），当从表中选择时，这些数据显然被返回（在终端 MySQL 客户端和 MySQL Workbench 以及我的应用程序中，它只是排序错误）但是如果我尝试将此数据插入到相同的临时表中，它就会丢失。

哦，为了增加乐趣，如果我在程序结束时不删除临时表 ( `result`) 并在运行程序后再次运行我的选择查询，它排序就好了。

那么，有人知道这里发生了什么吗？

MySQL版本：5.1.41-3ubuntu12.10

# android - 在按钮之间放置 ScrollView

> ID：13678948
> 
> 赞同：1
> 
> 时间：2012-12-03T07:31:04.580
> 
> 标签：android, user-interface, scrollview

我的设计有问题。让我解释。![在此处输入图像描述](../Images/4c65e5be032e769be5071f6d17ea3195.png)

我在顶部有一个带有一些文本行的 TextView。然后我有一个带有按钮、ScrollView 和按钮的布局。我想在按钮之间放置 ScrollWiew。问题是当我有很多 Scroll 项目时，一切都很好，就像案例 1 一样。但是当我只有几个项目时，它们看起来像案例 2。但我希望它们像案例 3 一样。我希望按钮和 ScrollView 占据底部所需的空间，而 textView 占据剩余空间。顺便说一句，我希望始终显示文本视图中的这些行，因此文本视图的最小空间受这些行的限制。

我想只使用 XML 来做到这一点。

我的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/myText1"
        android:textColor="@color/white"
        android:textSize="28dip" />

    <TextView
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="12345"
        android:textColor="@color/white"
        android:textSize="28dip" >
    </TextView>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0px"

    android:layout_weight="1"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn_add"

        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="1dp"
        android:gravity="left|center_vertical"
        android:text="@string/add_text" />

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="bottom"
            android:orientation="vertical" >

            <Button
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="1dp"
                android:background="@color/white"
                android:gravity="left|center_vertical"
                android:paddingRight="20dp"
                android:text="1"
                android:textColor="@color/black" />

            <Button
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="1dp"
                android:background="@color/white"
                android:gravity="left|center_vertical"
                android:paddingRight="20dp"
                android:text="2"
                android:textColor="@color/black" />

            <Button
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="1dp"
                android:gravity="left|center_vertical"
                android:paddingRight="20dp"
                android:text="3"
                android:textColor="@color/black" />
        </LinearLayout>
    </ScrollView>

    <Button
        android:id="@+id/btn_cancel"
        android:layout_height="wrap_content"
        android:layout_marginRight="1dp"
        android:layout_weight="1"
        android:text="@string/cancel" />

</LinearLayout> 
```

我尝试使用RelativeLayout，但我猜出了点问题。因为我得到了同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:03:00.953

将您的滚动视图属性更改为

```
<ScrollView
        android:layout_width="match_parent"
        android:layout_height="200dip"> 
```

# visual-studio-2010 - Visual Studio 2010 命令提示符不起作用

> ID：13678949
> 
> 赞同：1
> 
> 时间：2012-12-03T07:31:06.173
> 
> 标签：visual-studio-2010, command

我安装了 VS 2010。当我单击 Start 时？所有程序？微软视觉工作室 2010 ? Visual Studio 工具 > 命令提示符

提示出现 2 秒后立即自行关闭。

如何解决这个问题？

谢谢你的建议，

Rgds，学生的 csharp

# java - 为什么 tesseract 3.0 不能识别框/矩形/正方形内的文本？

> ID：13678950
> 
> 赞同：0
> 
> 时间：2012-12-03T07:31:06.820
> 
> 标签：java, image-processing, ocr, tesseract

![在此处输入图像描述](../Images/adbc90a00d618929bd5ffe9795691463.png)

我已经在这张图片和一些扫描的图片上尝试了 tesseract，其中一些文本在矩形内。但每次都以“空图像”作为输出失败。请建议我在处理表单时如何解决这个问题。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:51:45.240

您可以做的是绘制您正在获取的图像的一部分，该部分将是边框的内部部分。[你可以在这里](http://www.java2s.com/Tutorial/Java/0280__SWT/DrawpartofanImage.htm)找到一个教程。

# java - 同一个包，不同的目录

> ID：13678952
> 
> 赞同：2
> 
> 时间：2012-12-03T07:31:15.100
> 
> 标签：java, package, classpath, runtime-error, noclassdeffounderror

在我的`proj3`目录中，我有一个文件夹`gui`和一个文件夹`foo`。中的文件`gui`属于`package foo`. 使用 gmake，一切都编译文件，但是当我尝试执行调用（`java foo.Main`主方法）时，我得到：`foo``gui.Display`

```
Exception in thread "main" java.lang.NoClassDefFoundError: foo/Display
 at foo.Main.main(Main.java:45)
Caused by: java.lang.ClassNotFoundException: foo.Display 
```

我正在从 proj3 目录编译。我添加`./gui/`到我的`CLASSPATH`其中现在有`.:./gui/`其他用途。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:51:59.847

如果 gui 中的文件属于包**foo**。这些文件也应该移动到文件夹**foo**中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:55:00.187

将 gui.Display 移动到包 foo

# java - 超级 CSV Maven 存储库

> ID：13678954
> 
> 赞同：1
> 
> 时间：2012-12-03T07:31:17.860
> 
> 标签：java, maven, csv, supercsv

在查看了 Java 中可用的不同 CSV API 的所有优缺点后，我计划使用[Super CSV 。](http://supercsv.sourceforge.net/)

任何人都可以发布最新版本的更新 Maven 存储库（我相信 2.0.1 Final）我仍然在 Maven 存储库中看到 beta 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:36:32.800

最新版本为 2.0.0（见[官网](http://supercsv.sourceforge.net/downloading.html)）。因此，您可以轻松地从[Maven Central Repository](http://search.maven.org/#search%7Cga%7C1%7CSuperCSV)获取它。

# sitefinity - 如何调试 sitefinity 项目

> ID：13678955
> 
> 赞同：1
> 
> 时间：2012-12-03T07:31:28.513
> 
> 标签：sitefinity

我在 5.2 上运行的 sitefinity 项目部署在 IIS 7.0 上。我遇到了一个错误。我如何调试它，因为我也无法通过 Visual Studio 运行它。请帮助，以便我可以像在我的普通 asp.net 代码中那样设置断点并检查调试变量。这对于在 IIUS 7.0 上运行的 istefinity 项目是否可行？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:47:01.937

如果 IIS 与 Visual Studio 在同一台机器上，您可以调试>附加到进程>w3wp

如果 IIS 在远程机器上，您将需要走“远程调试”路线。在 IIS 机器上安装远程调试服务器位，运行它们，然后从 Visual Studio 安装附加到它们。有关更多详细信息，请参见：[http](http://www.cprogramming.com/tutorial/visual_studio_remote_debugging.html) ://www.cprogramming.com/tutorial/visual_studio_remote_debugging.html 。

请注意，您并不是真的想在生产系统上执行此操作，因为您可能会在排除故障时将 w3wp 冻结在特定断点处，从而阻止其他访问者获得服务。

# ruby-on-rails - 如何在 .gemspec 文件中将本地 gem 的依赖项添加到 rails 插件/引擎

> ID：13678957
> 
> 赞同：34
> 
> 时间：2012-12-03T07:31:30.573
> 
> 标签：ruby-on-rails, plugins, dependencies, rails-engines, gemspecs

我试过这样：</p>

```
 s.add_dependency 'gem', :path => '../gem' 
```

就像在中添加 gem`gemfile,`但它不起作用，并且会导致此错误：

```
/Users/chenqh/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb:81:in `parse': Illformed requirement 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-10-14T15:17:23.120

在开发 gem1 和 gem2 2 个 gem 时，要求 gem1 本地依赖 gem2 非常方便。

您不能在您的 中执行此操作`gemspec`，但是，您可以在您的 gem 中执行此操作`Gemfile`！

```
# Gemfile
source "https://rubygems.org"

gem 'gem2', :path => '../gem2'

# Specify your gem's dependencies in gem1.gemspec
gemspec 
```

然后在您的 gemspec 中，如果该 gem 已经发布，则像往常一样需要您的 gem：

```
# gem1.gemspec
spec.add_runtime_dependency "gem2" 
```

只要确保您不会意外推动该`Gemfile`更改！

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-03T12:52:15.737

可能无法添加本地依赖项，因为其他用户将无法访问 gem，因为它是本地依赖项，因此在发布后没有用。取而代之的是，在您自己的插件的 gemspec 中添加远程依赖项。

***脚步 -***

**1）在vendor/plugins/my_plugin/**中打开自己插件的gemspec文件，在关键字end前添加：

```
s.add_dependency('will_paginate', '~> 3.0.pre2') 
```

（在此示例中，我使用了 my_plugin 的 will_paginate 所需依赖项）

2）现在进入你的rails应用程序并编辑Gemfile，添加：

```
gem 'my_plugin', path: 'vendor/plugins/my_plugin' 
```

3) 现在在 rails app root 做：

```
bundle install 
```

并安装了 my_plugin（在这种情况下为 will_paginate）的依赖项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-16T20:13:36.223

有时您想将一颗宝石嵌入到另一颗宝石中，不管为什么。您可以从另一个中引用一个 gempec 以完全封装本地 gem。

```
require "rubygems"

embedded_gemspec = Gem::Specification::load("path/to/internal.gemspec")

Gem::Specification.new do |spec|
  spec.name          = "gem_that_contains_another_gem"
  # spec.whatever,   = whole bunch of other info

  #                     our files               + other gem's files
  spec.files         = ['file1.rb', 'file2.rb'] + embedded_gemspec.files

  # our dependencies
  spec.add_dependency 'nokogiri'
  # other gem's dependencies
  embedded_gemspec.runtime_dependencies.each { |d| spec.add_dependency d }

end 
```

编辑：这似乎只在本地工作。如果您尝试从 git repo 安装此 gemspec，它将不知道从哪里获取`embedded_gemspec`（即使`embedded_gemspec`'s 的依赖关系很好）。

# javascript - 如何使用java脚本检查10个复选框中的6个随机值

> ID：13678969
> 
> 赞同：-3
> 
> 时间：2012-12-03T07:33:20.857
> 
> 标签：javascript

（通过使用 JAVASCRIPT）在我的应用程序中，我有多个复选框（假设 10 个框）。当我要单击像幸运抽奖这样的按钮时，它必须自动选择 6 个随机复选框。当我再次单击同一个按钮时，我想从第一个值之外的 10 个初始值中获得不同的 6 个值。我可以从 10 个复选框中选中 6 个框（不是不同的值）。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:08:43.413

这是一个检查 6 个随机复选框的纯 Javascript 示例：

**[jsFiddle 演示](http://jsfiddle.net/WLP3s/2/)**

```
function getRand(exclude, max)
{
    var dupe = true;
    var myRandom;

    while(dupe)
    {
        myRandom = Math.floor(Math.random() * max);

        var found = false;
        for(var i=0;i<exclude.length; i++)
        {
            if(myRandom == exclude[i])
            {
                found = true;   
            }
        }

        if(!found) dupe = false;
    }

    return myRandom;
}

window.onload = function(){

    document.getElementById("lucky").onclick = function(){

        var checkboxList = document.getElementsByName("something[]");
        var rands = [];

        var total = 6;

        for(var j=0; j<checkboxList.length; j++){ checkboxList[j].checked = false; }

        for(var i=0; i<total; i++)
        {
            var myRandom = getRand(rands, checkboxList.length);
            rands.push(myRandom);
        }

        for(var x=0; x<rands.length; x++)
        {
            checkboxList[rands[x]].checked = true;   
        }

    };        

};​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:05:47.393

以下是您需要执行的步骤，（使用 jQuery）

第 1 步：将 10 个`checkbox`id 存储在一个数组中。

第 2 步：打乱数组

`for loop`第 3 步：使用直到 6 个值和`check`复选框循环洗牌数组

这是演示，[http://jsfiddle.net/bcb8C/4/](http://jsfiddle.net/bcb8C/4/)

# magento - Magento 价格过滤器

> ID：13678970
> 
> 赞同：-1
> 
> 时间：2012-12-03T07:33:31.413
> 
> 标签：magento

在我的网站中，过滤器显示价格：0.00-1.00 卢比。

我需要通过自动获取最小值来对价格进行排序。

以下是来自 filter.phtml 的代码，请帮忙。

```
 if(!function_exists("_displayDropdown")){
        function _displayDropdown($atts,$displayitemcount,$new_attributeName){
            echo '<select id="layered-select" class="select" name="layered-select" onchange="if (this.selectedIndex > 0) location.href=this[this.selectedIndex].value;">';
            echo '<option selected="selected">'.$new_attributeName.'</option>';
            foreach ($atts->getItems() as $_item){
                echo '<option value="'.$_item->getUrl().'">';
                echo $_item->getLabel();
                if($displayitemcount){
                    echo ' ('.$_item->getCount().')';
                }
                echo '</option>';
            }
            echo '</select>';
        }
    }

    switch ($attributeName) {
        case 'Shoe Size':
        case 'Overthreshold':
            _displayDropdown($this,$displayitemcount,$new_attributeName);
            break;

        default:
            _displayOrderedlist($this,$displayitemcount);
            break; 
```

}

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-10T06:33:14.697

我通过更改 magento 管理面板后端的设置来解决此问题。将价格属性设置为（在分层导航中使用=“是”。）

# java - 整数流中的最大值和最小值

> ID：13678971
> 
> 赞同：0
> 
> 时间：2012-12-03T07:33:43.900
> 
> 标签：java, max, min, data-stream

给定一个整数流（我只能遍历一次），找到最大值和最小值的最佳解决方案是什么？我想如果我有足够的时间来处理每个数字，最简单的解决方案是将最小值和最大值简单地保存在单独的变量中，但是如果我无法处理其中的每一个，最好的方法是什么？有没有比简单地保留最大和最小变量并跳过例如每隔一个数字更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:42:39.597

如果您想要真正的最大值和最小值，只需使用变量跟踪它们。

根据您的输入数据，概率最小值/最大值可能“足够准确”。因此，如果您只以 50% 的机会查看每个数字，那么您可能只有 50% 的确切最小值或最大值。但可能已经有 75% 的机会至少有第二大/最小等。但是，计算随机数以进行*无偏*采样已经比查看所有数字的最小值/最大值要昂贵。跳过每一秒是危险的：数据中可能存在偶数/奇数模式，这会让您感到非常沮丧。

# knockout.js - 在 IE9 中使用 knockout.js 渲染模板时遇到问题

> ID：13678972
> 
> 赞同：-1
> 
> 时间：2012-12-03T07:33:45.037
> 
> 标签：knockout.js, internet-explorer-9

我在一个相对简单的投资组合网站上使用淘汰赛，虽然它在 Chrome/Firefox/etc 中像一个魅力一样工作，但它在 IE 中无法正常工作（或者更确切地说，我已经在 IE9 中检查过它并没有在那里工作）。模板渲染中似乎出了点问题，但 IE 没有抛出任何错误，而且我很难找到错误。这是有问题的网站：

[http://ellenflaherty.com/](http://ellenflaherty.com/)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:32:28.940

似乎 IE9 不喜欢您尝试使用`$.load`. 您可能必须考虑另一种选择，例如加载模板并附加整个脚本标签。

与此类似的东西：

```
$.get("mytmpl.html", function(tmpl) {
     $("body").append("<script id='test' type='text/html'>" + tmpl + "</" + "script>");
}); 
```

# unit-testing - JUnit 测试：never() 和 times(0) 之间的区别

> ID：13678976
> 
> 赞同：6
> 
> 时间：2012-12-03T07:34:17.887
> 
> 标签：unit-testing, spring-mvc, junit, springmockito

我只想知道 JUnit 测试中 times(0) 和 never() 有什么区别。

例如，我有用于在 mongoDB 中保存数据的测试行代码：

```
verify(mockRepository,never()).save(any(User.class)); 
```

如果我把它写成：

```
verify(mockRepository,times(0)).save(any(User.class)); 
```

两个测试都表明没有调用 save 方法。（如果我错了，请纠正我）这两者有什么区别吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T08:55:54.750

never 方法的[javadoc](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#never%28%29)说：`Alias to times(0), see Mockito.times(int)`. 所以`never()`只是`times(0)`.

# emacs - emacs退出后如何自动退出ansi-term？

> ID：13678977
> 
> 赞同：2
> 
> 时间：2012-12-03T07:34:36.240
> 
> 标签：emacs, emacs23

每次我按 CxCc 退出 emacs 时，它总是要我确定是否关闭由 ansi-term 生成的 shell 进程。一旦 emacs 退出，我可以无条件地退出 ansi-term 吗？

真挚地！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:41:32.167

检查`(set-process-query-on-exit-flag PROCESS FLAG)`并将`process-query-on-exit-flag`变量设置为 nil 以进行 `ansi-term`进程。

添加`(set-process-query-on-exit-flag proc nil)`到`term-exec`term.el 中的函数。

```
;; Crank up a new process
(let ((proc (term-exec-1 name buffer command switches)))
  (set-process-query-on-exit-flag proc nil)        <------------here
  (make-local-variable 'term-ptyp) 
```

# android - 在没有用户提示的情况下自动更新应用程序 Android

> ID：13678978
> 
> 赞同：0
> 
> 时间：2012-12-03T07:34:52.463
> 
> 标签：android

我开发了从 Web 服务器下载 apk 文件并以编程方式将其安装在 android 设备中的应用程序。但是，我没有找到没有用户提示对话框的方法。任何人都可以在这个问题上帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:42:12.047

我认为这是不可能的，否则这将是一个巨大的安全漏洞。用户下载不需要权限的应用程序，该应用程序会下载另一个恶意应用程序，该应用程序会窃取您的所有数据并强奸您的猫。而你甚至不知道这一点。

# python - Django：从表单示例保存到数据库

> ID：13678979
> 
> 赞同：6
> 
> 时间：2012-12-03T07:34:58.593
> 
> 标签：python, django, django-forms

似乎我很难找到关于将数据从表单保存到数据库的良好资源/教程。随着它的进展，我慢慢地迷失了。我是 Django 新手，请指导我。我收到错误

> 赋值前引用的局部变量“store”

这是我的相关代码，

**模型.py**

```
from django.db import models

# Create your models here.
class Store(models.Model):
    store_name = models.CharField(max_length=100)

    def __unicode__(self):
        return self.store_name

class Feedback(models.Model):
    store = models.ForeignKey(Store)
    username = models.CharField(max_length=100)
    comment = models.CharField(max_length=1000)
    date = models.DateTimeField("comment_date")

    def __unicode__(self):
        return self.username 
```

**视图.py**

```
def add(request, store_name):
    if request.method == "POST":
        store = Store.objects.get(store_name=store_name)
        saved_username = request.POST.get("username", "")
        saved_feedback = request.POST.get("feedback", "")
        feedback = Feedback(username=saved_username, comment=saved_feedback, date=timezone.now())
        feedback.save()
    return HttpResponseRedirect(reverse("view", args=(store.id,))) 
```

**addfeedback.html**（在views.py中调用add的那个）

```
<html>
<head><title>Add Feedback</title>
<link rel="stylesheet" type="text/css" href={{ STATIC_URL }}styles.css>
</head>

<body>
    <div class="form">
    <form action="{% url add store.store_name %}" method="post">
    {% csrf_token %}
        <input type="text" name="username" size="20"><br />
        <textarea name="feedback" cols="50" rows="10"></textarea><br />
        <input type="submit" value="Add" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:47:48.840

用于`django.forms`工作。不要将数据直接从`POST`数据库中。请参阅相关[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)。

```
local variable 'store' referenced before assignment 
```

错误很明显——`store`即使请求不是`POST`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:47:39.777

这是关于 ModelForms 的一个很好的[教程](http://www.peachybits.com/2011/09/django-1-3-form-api-modelform-example/)。虽然它适用于 Django 1.3，但它正在慢慢过时。

`local variable 'store' referenced before assignment`只有当您直接访问表单提交 url 时，您才会收到 错误消息。如果表单已发布到 url，则应分配 store。

您正在尝试基于模型创建表单，因此我将解释如何使用 ModelForm。

您的反馈模型有一个 DateTimeField 并且您正在存储提交反馈的时间戳。您可以通过设置`auto_now_add`为 true来自动执行此操作

```
date = models.DateTimeField("comment_date", auto_now_add=True) 
```

然后在您的应用程序文件夹中创建一个**forms.py**并使用以下内容

```
from django.forms import ModelForm
from your_app.models import Feedback
...
class FeedbackForm(ModelForm):
    class Meta:
        model = Feedback
        exclude = ('store',) 
```

您的 views.py 应该包含一个显示和处理提交表单的函数

```
from your_app.forms import FeedbackForm
... 
def add(request, store_name):
    form = FeedbackForm(request.POST or None)
    if form.is_valid():
        feedback = form.save(commit=False)
        store = Store.objects.get(store_name=store_name)
        feedback.store = store
        feedback.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T12:23:11.197

我在将保存数据加载到我的数据库中时遇到了同样的问题。这就是我解决它的方法。

1.  为您的模型创建一个表格
2.  创建要处理的视图
3.  呈现您的表单 按照以下示例代码处理表单：

```
def add(request):
    form = feedback_models_form()
    if request.method == "POST":
        form = feedback_models_form(request.POST)
        if form.is_valid():
          form_instance =  form.save(commit =  False)
          form_instance.store = Store.objects.get(store ="specific_store")
          form_instance.save()
          return ('/')
        else:
            pass 
```

# android - 在 Android webview 中播放视频 - 视频控件不可见

> ID：13678984
> 
> 赞同：2
> 
> 时间：2012-12-03T07:35:10.263
> 
> 标签：android

我正在开发混合应用程序，我需要在 android 浏览器上播放视频。视频播放/暂停正常，但视频控件在视频视图中不可见。

下面是用于使视频正常工作的 android web 视图设置的代码片段 -

Java 代码：

WebSettings webSettings = webView.getSettings();

webSettings.setPluginsEnabled(true);

webSettings.setAllowFileAccess(true);

webSettings.setJavaScriptEnabled(true);

webSettings.setPluginState(PluginState.ON_DEMAND);

webSettings.setDomStorageEnabled(true);

我还在清单文件的应用程序标记中添加了 android:hardwareAccelerated="true" 。

视频标签的 HTML 代码：

```
<video id="videoContainer" controls="controls" autoplay="autoplay"  src="file:///mnt/sdcard/8.mp4" height="400" width="400" type="video/mp4">
</video> 
```

请让我知道还有什么要添加的代码。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:40:09.540

有问题，但这是一次奇怪的经历。问题出在样式上，我在屏幕上应用了按钮，并且对视频控件应用了相同的效果，这就是视频播放器按钮变得透明且对用户不可见的原因。

# javascript - jQuery Mobile：changepage 幻灯片过渡在桌面上运行良好，但在 Android 设备上却不行

> ID：13678985
> 
> 赞同：1
> 
> 时间：2012-12-03T07:35:21.387
> 
> 标签：javascript, android, jquery, cordova, jquery-mobile

```
$('div.ui-page').live("swipeleft", function () {
    var nextpage = $(this).next('div[data-role="page"]');
    if (nextpage.length > 0) {
        $.mobile.changePage(
            nextpage,
            {transition: "slide"},
            true,
            true
        );
    }else{
        $.mobile.changePage(
            "#page3",
            {   transition: "slide", 
                reverse:true
            }, 
            true, 
            true
        );
    }
}); 
```

该代码在桌面浏览器和 iOS 上运行良好。但是当我在 Android 设备上运行此代码时，页面会闪烁然后移至下一页。它应该触发幻灯片转换选项，但没有显示幻灯片效果。

我应该如何在 Android Web 应用程序或移动浏览器上设置幻灯片效果？我已经尝试过该`$(id).animate`方法，但没有运气。我不知道我应该怎么做才能触发幻灯片效果。

有没有尝试过刷卡功能的安卓开发者？谁能告诉我应该怎么做才能调整幻灯片效果`$.mobile.changePage`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:48:35.610

[http://jquerymobile.com/test/docs/pages/page-transitions.html](http://jquerymobile.com/test/docs/pages/page-transitions.html)

> 只看到淡入淡出过渡？要查看所有过渡类型，您必须使用支持 3D 变换的浏览器。默认情况下，缺乏 3D 支持的设备（例如 Android 2.x）将回退到所有过渡类型的“淡入淡出”。此行为是可配置的（见下文）。

要检查您的 android 是否支持它，请将该代码段添加到您的 javascript

```
window.onload = function () {
var b = document.body.style;
if(b.MozTransition=='' || b.WebkitTransition=='' || b.OTransition=='' || b.transition=='') {
    alert('supported');
} else {
    alert('NOT supported')
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:52:05.447

罗恩说的是真的。浏览器说它不支持过渡。但是......让我们不同意浏览器，无论如何都要这样做。在 jQuery 移动更改中：

```
// If transition is defined, check if css 3D transforms are supported, and if not, if a fallback is specified
$.mobile._maybeDegradeTransition = function( transition ) {
        if ( transition && !$.support.cssTransform3d && $.mobile.transitionFallbacks[ transition ] ) {
            transition = $.mobile.transitionFallbacks[ transition ];
        }

        return transition;
}; 
```

到：

```
$.mobile._maybeDegradeTransition = function( transition ) {
    return transition;
}; 
```

你去那里它工作。

但是你要明白浏览器不会无缘无故说不支持。例如，Android 上的浏览​​器在第一次转换时会失败（不是 Chrome）。

# java - Ant 自定义条件 typedef：确保编译的类在构建期间可用（鸡和蛋）

> ID：13678987
> 
> 赞同：3
> 
> 时间：2012-12-03T07:35:29.230
> 
> 标签：java, ant, ivy

我创建了几个[自定义条件](http://ant.apache.org/manual/Types/custom-programming.html#customconditions)用于我的项目的构建过程。细节可能不是很相关，但它们的逻辑很少，用于有条件地抑制`ivy:resolve`任务的运行（这是否是一个好主意是一个单独的问题，但对于我的项目来说，这需要增加 12 秒构建过程甚至只是读取缓存）。

我遇到的问题是第一次构建项目时，这些条件的实现（现在位于使用它们的项目的主源树中）不可用。在这种情况下，无论如何我都想运行`<ivy:resolve>`，这样我就可以`condition`完全构建项目（包括实现），然后`condition`实现可以供以后使用。

我试图通过希望`or`条件懒惰地工作并利用其中的`available`元素来实现这一点：

```
<typedef onerror="report" name="olderormissing" classname="myproject.buildutils.FileOlderOrMissingCondition" classpath="${main.jar}" />
<condition property="ivy.needs.refresh">
    <or>
        <!-- fetch new if we don't have the helper classes -->
        <not><available classname="myproject.buildutils.FileOlderOrMissingCondition" /></not>
        <!-- only fetch ivy deps hourly -->
        <olderormissing file="${ivy.build.record}" threshold="3600" />
    </or>
</condition>

<!-- Ivy task using the above property -->
<target name="resolve" description="--> retrieve dependencies with ivy" if="${ivy.needs.refresh}">
    <ivy:retrieve symlink="true" sync="false" pattern="${jars.dir}/[conf]/[artifact].[ext]" keep="true" log="download-only" />
</target> 
```

我曾希望，如果实现类不可用，则`or`条件会从第一个条件中吐出 true 并忽略缺失的类型。但是，这不起作用，而是以“或不支持嵌套的“olderormissing”元素失败。” 也许这种方法将是徒劳的？

理想情况下，我希望 Ant 处理此问题，而无需将条件实现拆分为需要显式手动预编译的单独或子项目（如果我可以让 Ant 自动编译子项目，那就太好了，但我可以'没有办法让这种情况发生得足够早，以便满足需求`typedef`）。对于在类中实现的两行逻辑来说，一个单独的项目肯定感觉有点矫枉过正。

[这个关于 taskdefs 的相关问题](https://stackoverflow.com/questions/3093784/ant-check-classpath-for-jar-before-taskdef)似乎是相关的，但并不完全适用于这个用例 AFAICT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:31:19.440

好的，我从[Ant taskdef 教程](http://ant.apache.org/manual/tutorial-writing-tasks.html)中得到了一些线索。`typedef`s 和s 可以在`condition`设置适当属性的目标中更好地使用，但仅在设置前体类时调用。我们可以设置一个特殊的引导目标，`javac`只在相关的 Ant 扩展类上运行。我们还需要让实际的检索/解析发生在一个单独的任务中，这样我们就可以强制它独立于条件的值发生。

```
<condition property="ant.extensions.missing">
    <not>
        <available classname="readproject.ant.FileOlderOrMissingCondition" classpath="${main.jar}" />
    </not>
</condition>

<target name="ant-bootstrapping" depends="init" if="ant.extensions.missing" description="(internal) build the project-internal Ant extensions if needed">
    <antcall target="force-resolve" />
    <javac srcdir="${src}" destdir="${build}" classpathref="build.classpath" includeantruntime="false" includes="**/ant/**/*.java" debug="on"/>
</target>

<!-- need to set up the conditions internally, since the custom types are defined in the project itself -->
<target name="pre-resolve" depends="ant-bootstrapping" description="(internal) set up internal variables to determine if Ivy needs refreshing">
    <typedef onerror="report" name="olderormissing" classname="myproject.ant.FileOlderOrMissingCondition" classpath="${build}" />
    <condition property="ivy.needs.refresh">
        <!-- only fetch ivy deps hourly -->
        <olderormissing file="${ivy.build.record}" threshold="3600" />
    </condition>
</target>

<target name="resolve" description="retrieve dependencies with ivy" if="ivy.needs.refresh" depends="pre-resolve">
    <antcall target="force-resolve" />
</target>

<target name="force-resolve" description="Force retrieval of Ivy dependencies">
    <ivy:retrieve symlink="true" sync="false" pattern="${jars.dir}/[conf]/[artifact].[ext]" keep="true" log="download-only" />
    <ivy:report todir="${ivy.reports}" />
    <touch file="${ivy.build.record}" />
</target> 
```

然后，我的主要编译目标像以前一样取决于`resolve`目标，无论是全新安装还是刷新，一切都能令人满意地构建，但 Ivy 不会让我的构建时间不必要地慢 24 倍。

（我还应该注意，我在`available`这里使用而不是`typefound`因为后者不允许我指定类路径，所以用处不大）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:30:57.140

为什么不直接使用 ivy 来填充 lib 目录，然后只运行 ivy 来填充它。

```
<available file="lib" type="dir" property="local.lib.present"/>

<target name="resolve" unless="local.lib.present">
    <ivy:retrieve symlink="true" pattern="lib/[conf]/[artifact].[ext]"/>
</target>

..

<target name="clean">
    <delete dir="build"/>
</target>

<target name="clean-all" depends="clean">
    <delete dir="lib"/>
    <ivy:clean-cache/>
</target> 
```

拥有一个清除所有缓存并启用干净构建的“clean-all”目标非常重要。

我看到您正在使用 symlink 选项，该选项解决了有关此本地构建缓存方法消耗的空间的可能问题。

# iphone - 项目明智地创建配置文件

> ID：13678988
> 
> 赞同：1
> 
> 时间：2012-12-03T07:35:33.477
> 
> 标签：iphone, ios, provisioning-profile, ios-provisioning

我想从同一个 AppleID 创建多个配置文件。

例子：

*   项目 1 - 添加的 UDID 数量为 3
*   项目 2 - 添加的 UDID 数量为 4
*   项目 2 - 添加的 UDID 数量为 1

我应该如何创建多个项目明智的配置文件？

目前，我有一个配置文件，其中包含所有 20-25 个 UDID。但我想创建不同的配置文件或特定的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:45:37.917

首先创建 APP ID，然后转到配置配置文件选项卡在此处创建新配置文件，选择您的配置文件名称并添加您创建的 APP ID，并从您要使用的列表中检查设备 ID，最后单击 sbumit.thats全部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:47:26.750

为您的每个应用创建 APP ID。关注[创建和配置 App ID](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandConfiguringAppIDs/CreatingandConfiguringAppIDs.html#//apple_ref/doc/uid/TP40011159-CH18-SW1)

然后为您的每个 APP ID 创建配置文件。按照[创建和下载开发配置文件](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingDevelopmentProvisioningProfiles/CreatingandDownloadingDevelopmentProvisioningProfiles.html)

您可以在每个配置文件中单独允许设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:49:12.487

因此，创建项目明智的应用程序 ID 并创建每个应用程序 ID 的分发配置文件。在每个配置文件的设备上打勾。

就像您可以创建应用程序 id "com.app.project1","com.app.project2"... 对应的分发配置文件 "project1adhocdistribution", "project2adhocdistribution"....

# bash - 如何让源命令在 shell 脚本之外生效？

> ID：13678989
> 
> 赞同：1
> 
> 时间：2012-12-03T07:36:09.357
> 
> 标签：bash, virtualenv

我想编写一个小脚本来获取我的 virtualenv（用于 Python 项目）目录。当我在我的项目目录中的某个地方时，我知道我的虚拟环境的“venv”目录位于我当前目录的祖先之一的目录中。

我想编写一个 shell 脚本，`venv/bin/activate`它的来源和效果应该在这个 shell 脚本之外持续存在。这不是现在发生的。

这是我的代码：

```
#!/bin/bash

#set -x

while [ $PWD != "/" ]; do
    #echo $PWD
    if [ -d "venv" ]; then
        echo "venv found in $PWD. Sourcing."
        source venv/bin/activate
        break
    else
        cd ..
    fi
done 
```

为什么它现在不起作用，我该如何解决？

**编辑：**

如果有帮助，venv/bin/activate 的内容在这里：[http](http://pastebin.com/TZ40brsq) ://pastebin.com/TZ40brsq 由[virtualenv](http://www.virtualenv.org/en/latest/)工具生成（一般用于 Python 项目）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:32:38.110

您不能通过使用在子进程中运行的 shell 脚本来影响当前环境。

如果`pushd "$(pwd)"`在 while 循环之前和`popd`之后添加，则可以通过获取脚本文件而不是执行它来获得所需的内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:39:33.473

您将不得不使用调用脚本

```
source path/to/script 
```

或者

```
. path/to/script 
```

（同样的事情）而不是运行它。这是一种安全措施，当您运行程序时，它不能更改其父进程（即您的 shell 会话）的环境。但是，当您使用 时`source`，您是在告诉 shell 读取文件的内容并运行它，就好像您自己键入了该内容一样。

如果您已经以这种方式采购脚本，那么我不确定发生了什么。

# javascript - 如何在 MVC 4 razor html url 操作中访问 JavaScript 函数的字符串输出？

> ID：13678990
> 
> 赞同：1
> 
> 时间：2012-12-03T07:36:14.347
> 
> 标签：javascript, asp.net, asp.net-mvc, razor, url-action

我希望能够将我的 javascript 函数的字符串输出作为参数传递给我的 MVC 4 Razor Url Action，它本身作为自定义属性传递给输入元素。这是我的视图文件中的剃刀：

```
@Html.TextBoxFor(model => model.SomeProperty, new{data_autocomplete = @Url.Action("SomeAction","SomeController", new { someParameter= "here I want the string output of my javascript function" })}) 
```

我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:02:46.987

我相信这只能在呈现 HTML 之后完成。这背后的原因是 Razor 主要用于渲染 HTML。Javascript 可以在 HTML 元素上运行，只有它完全呈现。如果我理解您的问题，您希望将 javascript 函数呈现的 URL 动态分配给文本框的 data_autocomplete 属性。我会建议你下面的方法

```
var currentURL = @Url.Action("SomeAction","SomeController");

var parameters  = YourJSMethodToreturnTheParameterValue();

$("#SomeProperty").attr("data_autocomplete",currentURL+'?someParameter='+parameters; 
```

理想情况下，TextBoxFor 会将属性名称呈现为其 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:44:34.687

尝试这个：

```
var textbox = document.getElementById('SomeProperty');
var currentUrl = textbox.getAttribute('data_autocomplete');
currentUrl  += '?someParameter=' + myJsFunctionThatReturnsString();
textbox.setAttribute('data_autocomplete', currentUrl); 
```

# asp.net-mvc - MVC 网站仅在实时站点上随机位置崩溃？

> ID：13678992
> 
> 赞同：1
> 
> 时间：2012-12-03T07:36:20.147
> 
> 标签：asp.net-mvc, visual-studio-2010, web

我正在使用 MVC 开发一个网站。

我正在 Microsoft Visual Studio 2010 中使用 C# 开发它，并且我正在使用 MVC4。

该网站离线工作正常，但在线网站一直表现得很奇怪。

Iv 将日志添加到我的在线站点，以便我可以跟踪哪里有错误。

我注意到在下载文件时该站点一直在关闭，但很快发现该站点会在代码的随机位置崩溃，并且有时会通过相同的代码部分。

所以我从日志中得到的信息是网站宕机和随机时间。

我将我的代码恢复到旧版本，其中一切正常，但仍然在我的代码中的随机位置出现随机崩溃。

没有抛出错误或异常。

谁能告诉我这个行为者的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:47:18.090

使用线程添加您？当线程中的代码抛出异常时，它将使应用程序池崩溃，您将无法获得异常的任何详细信息

# unit-testing - 我应该如何在 Dart 中测试 Future？

> ID：13678993
> 
> 赞同：33
> 
> 时间：2012-12-03T07:36:20.083
> 
> 标签：unit-testing, dart

如何测试`Future`在测试运行器完成之前返回的方法？我有一个问题，我的单元测试运行器在异步方法完成之前完成。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T07:36:20.083

如何使用`completion`匹配器进行测试的完整示例如下。

```
import 'package:unittest/unittest.dart';

class Compute {
  Future<Map> sumIt(List<int> data) {
    Completer completer = new Completer();
    int sum = 0;
    data.forEach((i) => sum += i);
    completer.complete({"value" : sum});
    return completer.future;
  }
}

void main() {
  test("testing a future", () {
    Compute compute = new Compute();    
    Future<Map> future = compute.sumIt([1, 2, 3]);
    expect(future, completion(equals({"value" : 6})));
  });
} 
```

在此代码完成之前，单元测试运行程序可能无法完成。所以看起来单元测试执行正确。使用`Future`s 可能需要更长的时间才能完成正确的方法是利用`completion`unittest 包中可用的匹配器。

```
/**
 * Matches a [Future] that completes succesfully with a value that matches
 * [matcher]. Note that this creates an asynchronous expectation. The call to
 * `expect()` that includes this will return immediately and execution will
 * continue. Later, when the future completes, the actual expectation will run.
 *
 * To test that a Future completes with an exception, you can use [throws] and
 * [throwsA].
 */
Matcher completion(matcher) => new _Completes(wrapMatcher(matcher)); 
```

人们会很想执行以下操作，这将是在 dart 中对返回的 Future 进行单元测试的不正确方法。警告：以下是测试期货的不正确方法。

```
import 'package:unittest/unittest.dart';

class Compute {
  Future<Map> sumIt(List<int> data) {
    Completer completer = new Completer();
    int sum = 0;
    data.forEach((i) => sum+=i);
    completer.complete({"value":sum});
    return completer.future;
  }
}

void main() {
  test("testing a future", () {
    Compute compute = new Compute();
    compute.sumIt([1, 2, 3]).then((Map m) {
      Expect.equals(true, m.containsKey("value"));
      Expect.equals(6, m["value"]);
    });
  });
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-03T08:38:22.133

另一种可能性是使用 expectAsync1 函数。测试的初始不正确变体的工作模拟将是：

```
void main() {
  test("testing a future", () {
    Compute compute = new Compute();
    compute.sumIt([1, 2, 3]).then(expectAsync1((Map m) {
      Expect.equals(true, m.containsKey("value"));
      Expect.equals(6, m["value"]);
    }));
  });
} 
```

使用 expectAsync1 进行异步测试的一个优点是它的可组合性。有时测试自然需要几个顺序的异步代码块。来自 mongo_db 的示例测试：

```
testCursorGetMore(){
  var res;
  Db db = new Db('${DefaultUri}mongo_dart-test');
  DbCollection collection;
  int count = 0;
  Cursor cursor;
  db.open().chain(expectAsync1((c){
    collection = db.collection('new_big_collection2');
    collection.remove();
    return db.getLastError();
  })).chain(expectAsync1((_){
    cursor = new Cursor(db,collection,where.limit(10));
    return cursor.each((v){
     count++;
    });
  })).chain(expectAsync1((dummy){
    expect(count,0);
    List toInsert = new List();
    for (int n=0;n < 1000; n++){
      toInsert.add({"a":n});
    }
    collection.insertAll(toInsert);
    return db.getLastError();
  })).chain(expectAsync1((_){
    cursor = new Cursor(db,collection,where.limit(10));
    return cursor.each((v)=>count++);
  })).then(expectAsync1((v){
    expect(count,1000);
    expect(cursor.cursorId,0);
    expect(cursor.state,Cursor.CLOSED);
    collection.remove();
    db.close();
  }));
} 
```

**更新：**

自从最初提出问题以来，Future 和 unittest API 都发生了变化。现在可以`Future`从测试函数返回，并且 unittest 使用所有异步保护功能正确执行它。结合现在合并的事实`chain`和`then`方法，为具有几个顺序代码块的测试提供了很好的语法。`Future`在当前版本的 mongo_dart 中，相同的测试如下所示：

```
Future testCursorGetMore(){
  var res;
  Db db = new Db('${DefaultUri}mongo_dart-test');
  DbCollection collection;
  int count = 0;
  Cursor cursor;
  return db.open().then((c){
    collection = db.collection('new_big_collection2');
    collection.remove();
    return db.getLastError();
  }).then((_){
    cursor = new Cursor(db,collection,where.limit(10));
    return cursor.forEach((v){
     count++;
    });
  }).then((dummy){
    expect(count,0);
    List toInsert = new List();
    for (int n=0;n < 1000; n++){
      toInsert.add({"a":n});
    }
    collection.insertAll(toInsert);
    return db.getLastError();
  }).then((_){
    cursor = new Cursor(db,collection,null);
    return cursor.forEach((v)=>count++);
  }).then((v){
    expect(count,1000);
    expect(cursor.cursorId,0);
    expect(cursor.state,State.CLOSED);
    collection.remove();
    return db.close();
  });
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-07T00:47:49.493

作为替代方案，这就是我一直在做的事情。它类似于上面的答案：

```
test('get by keys', () {
  Future future = asyncSetup().then((_) => store.getByKeys(["hello", "dart"]));
  future.then((values) {
    expect(values, hasLength(2));
    expect(values.contains("world"), true);
    expect(values.contains("is fun"), true);
  });
  expect(future, completes);
}); 
```

我得到了对未来的引用，并将我所有的期望语句都放在了`then`调用中。然后，我注册 a`expect(future, completes)`以确保它真正完成。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-12-04T04:38:40.613

测试返回 Future 的方法的 3 个步骤：

1.  使测试异步
2.  而不是`expect`，使用`expectLater`和`await`它。
3.  `completion`传入未来的方法/getter，并用这样的包装期望值：

### `await expectLater(getSum(2,3), completion(5));`

**测试计算总和的方法：**

```
Future<int> getSum(int a,int b) async{
  return a+b;
} 
```

**我们可以这样写测试：**

```
test("test sum",() async{
  await expectLater(getSum(2,3), completion(5));
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-16T22:50:23.567

[请参阅本文](https://www.dartlang.org/articles/dart-unit-tests/#asynchronous-tests)中有关异步测试的部分，或[expectAsync](http://www.dartdocs.org/documentation/unittest/0.11.0+5/index.html#unittest/unittest@id_expectAsync)的 API 文档。

下面是一个简短的例子。请注意，必须在传递给 test() 的闭包返回之前调用 expectAsync()。

```
import 'package:unittest/unittest.dart';

checkProgress() => print('Check progress called.');

main() {
  test('Window timeout test', () {
    var callback = expectAsync(checkProgress);
    new Timer(new Duration(milliseconds:100), callback);
  });
} 
```

在测试期间等待未来完成的另一种方法是将其从传递给测试函数的闭包中返回。请参阅上面链接的文章中的此示例：

```
import 'dart:async';
import 'package:unittest/unittest.dart';

void main() {
  test('test that time has passed', () {
    var duration = const Duration(milliseconds: 200);
    var time = new DateTime.now();

    return new Future.delayed(duration).then((_) {
      var delta = new DateTime.now().difference(time);

      expect(delta, greaterThanOrEqualTo(duration));
    });
  });
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-19T13:56:05.323

对于`mockito`v. 2+ 有可能在

```
await untilCalled(mockObject.someMethod()) 
```

# java - java soap webservice xml到对象

> ID：13678998
> 
> 赞同：0
> 
> 时间：2012-12-03T07:36:39.087
> 
> 标签：java, web-services, soap

我必须编写一个简单的soap webservice，它接受它的XML 参数输入并使用该XML 参数调用一个数据库存储过程。存储过程返回 XML（相同的 XSD），我必须将此结果 XML 返回给 web 服务调用者。

在 java 中生成结果 XML 的最简单方法是什么？我是否必须从存储过程的结果中生成 java 对象（如果是，最简单的方法是什么？）或者我可以以某种方式将生成的 XML 直接放在 web 服务的响应中。截至目前，我不需要检查结果的有效性。

到目前为止，我创建了 wsdl，从 xsd 生成了 java 类，并创建了 web 服务的过程。我用 SoapUI 测试它们，它们调用数据库存储过程，我不确定如何处理 XML 结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:07:48.707

要将 XML 模式绑定到 java 类，反之亦然，您可以使用[***JAXB***](http://docs.oracle.com/javaee/5/tutorial/doc/bnazf.html)。是的，您可以直接发送 xml 作为响应。您应该将响应内容类型设置为 xml：

```
response.setContentType("text/xml"); 
```