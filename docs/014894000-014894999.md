# StackOverflow 问答 14894000-14894999

# php - 如何在线访问 wordpress 库？

> ID：14894002
> 
> 赞同：-1
> 
> 时间：2013-02-15T11:43:56.707
> 
> 标签：php, wordpress

我已经开发了我的插件，它可以在 localhost 上完美运行，但它无法在线运行，因为它找不到库，我应该如何修改它们以运行插件。

```
require_once("/Applications/MAMP/htdocs/wordpress/wp-load.php");

require_once(ABSPATH . "wp-admin" . '/includes/image.php'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:52:00.540

这取决于您的 WP 安装位置，但这应该可以：

```
require_once(ABSPATH . 'wp-load.php');
require_once(ABSPATH . 'wp-admin/includes/image.php'); 
```

# python - 使用 wget 下载文件

> ID：14894004
> 
> 赞同：0
> 
> 时间：2013-02-15T11:44:06.003
> 
> 标签：python, download, wget

我需要从网页下载适合文件。我正在使用`-i`wget 选项执行此操作：我将下载文件存储在`list.txt`包含 URL1、URL2 的文件中......然后

```
$ wget -i list.txt 
```

你知道是否有可能使用 Python 脚本做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:48:57.687

假设您的文件每行包含一个 URL，您可以这样做：

```
import urllib2
with open('list.txt') as my_list:
    for line in my_list:
        response = urllib2.urlopen(line)
        html = response.read()
        # now process the page's source 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-03T19:24:57.210

如果您获得 SSL：CERTIFICATE_VERIFY_FAILED：

```
import wget
import ssl

ssl._create_default_https_context = ssl._create_unverified_context
with open('list.txt') as my_list:
    for url in my_list:
        wget.download(url) 
```

使用操作系统库：

```
import os

with open('list.txt') as my_list:
    for url in my_list:
        os.system('wget ' + url) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T12:57:30.270

```
with open('list.txt') as my_list:
    for url in my_list:
        wget.download(url) 
```

# php - AJAX-PHP 组合：$.post 复选框值到 PHP

> ID：14894012
> 
> 赞同：0
> 
> 时间：2013-02-15T11:44:20.797
> 
> 标签：php, javascript, jquery, ajax, checkbox

我尝试了几天来解决这个问题，但到目前为止没有结果......
我要做的就是在用户选中或取消选中它时将复选框值发布到 php。

**表格.php：**

```
<?php
if (isset($_POST['box'])) {
echo $_POST['box'];
} ?> 
```

**脚本：**

```
<script>
$(document).ready(function() {
 $('.box').on('change', function(event) { 
  var checkbox = $(event.target);
  var isChecked = $(checkbox).is(':checked');
  $.post('/form.php', {id: checkbox.attr('id'), value: isChecked});
 });
}); 
</script> //Credit cymen 
```

**形式：**

```
<form action="form.php" method="post">

<input id="box" class="box" name="box" type="checkbox" value="YESSSSSS!" />
<input id="box" class="box" name="box" type="checkbox" value="YESSSSSS!" />

</form> 
```

(*) 我什么也没穿`$_POST['box']`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:47:58.993

您的 JavaScript 正在将此数据提交给 PHP：

```
 {id: checkbox.attr('id'), value: isChecked} 
```

你有两条数据：“id”和“value”。您没有名为“box”的数据，因此`$_POST['box']`不会被填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:03:36.943

我会改为：

```
$.post('/form.php', {name: checkbox.attr('name'), checked: isChecked, value : checkbox.val()}); 
```

在 PHP 端，您将收到：

```
Array
(
    [name] => box
    [checked] => true
    [value] => YESSSSSS!
) 
```

您可以访问 POST 数据，例如：

```
echo $_POST['name']; // box
echo $_POST['checked']; // true/false
echo $_POST['value']; // YESSSSSS! 
```

在 POST 请求中包含复选框值很重要，因为这是您识别哪个复选框已更改的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:57:04.873

您发送到 form.php 的 $_POST 数组看起来不是 $_POST['box']。它看起来像这样：

```
array(2) {["id"]=>string(3) "box" ["value"]=> string(4) "true"} 
```

所以你可以得到像 thist $_POST['id'] 或 $_POST['value'] 这样的变量。你在这个片段中声明 JS 中的变量：{id: checkbox.attr('id'), value: isChecked}。

最好使用 var_dump 在 PHP 中检查您在 vars 中的内容，例如。var_dump($_POST)。

使用 Firebug 插件到 FF，调试 AJAX。

# scala-2.10 - 增强的断言 scala 宏

> ID：14894013
> 
> 赞同：0
> 
> 时间：2013-02-15T11:44:22.700
> 
> 标签：scala-2.10, scala-macros

我在使用断言时遇到了一些烦人的问题

*   没有可用的好信息：它为什么失败，以及断言是关于什么的
*   断言信息被隐藏在不需要的信息的海洋中，比如太多层的 scala 函数。我一直把这些问题放在脑后，现在有了新的 scala 宏，我计划继续 Stack Overflow 并为每个问题创建一个高价值的问答对。这样一来，下一个遇到问题的人就不必费力地接受如此多的错误信息。如果其他专家用他们自己的知识发表意见，我什至可能会更多地了解困扰我们的各种问题。

这是一个简单的 scala 宏示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:44:22.700

这是一个解决方案，提供了有关断言失败的更多详细信息，并在抛出异常时消除了所有内部函数的 scala 层：

```
def assert2(c: Context)(act: c.Expr[Any],exp: c.Expr[Any]): c.Expr[Unit] = {
    import c.universe._
    val actm = act.tree.toString
    val expm = exp.tree.toString
    reify({
        if(act.splice!=exp.splice) {
            try {
                throw new Exception("AssertionError: "+c.Expr[String](Literal(Constant(actm))).splice+"["+act.splice+"]==["+exp.splice+"]"+c.Expr[String](Literal(Constant(expm))).splice)
            } catch {
            case unknown: Throwable => System.err.println(""+unknown+unknown.getStackTrace.toList.filter(_.toString.indexOf("scala.")!=0).mkString("\n  ","\n  ","\n  ")); exit
            }
        }
    })
}
def myAssert2(act: Any, exp: Any) = macro assert2 
```

# c# - 访问数据列表中的 HiddenField

> ID：14894020
> 
> 赞同：0
> 
> 时间：2013-02-15T11:44:45.693
> 
> 标签：c#, asp.net, sql-server

我正在使用 Datalist 显示国家/地区列表，每个记录都有一个包含州列表的 Gridview，每个州都有一个城市下拉列表。我正在使用隐藏字段来获取国家/地区的 ID，以通过在隐藏字段中使用 Eval("C_ID") 来检索每条记录的州名称。但它会引发 ArgumentOutOfRangeException。我不知道我做错了什么。这是 Datalist 的代码：

```
<asp:DataList ID="DataList1" runat="server" RepeatColumns="4" RepeatDirection="Horizontal" onitemdatabound="DataList1_ItemDataBound" >
        <ItemTemplate>
        <table border="1px">
            <tr>
                <td>
                    <%#Eval("C_Name") %><br />
                    <asp:HiddenField ID="HiddenField1" Value='<%#Eval("C_ID") %>' runat="server" />
                    <asp:GridView ID="GridView1" AutoGenerateColumns="false" runat="server">
                        <Columns>
                            <asp:TemplateField HeaderText="State   Cities">
                                <ItemTemplate >
                                    <asp:CheckBox ID="CheckBox1" runat="server" />
                                    <%#Eval("S_Name") %>
                                    <asp:DropDownList ID="DropDownList1" runat="server">
                                    </asp:DropDownList>
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns>
                    </asp:GridView>
                </td>
            </tr>
           </table>
        </ItemTemplate>
    </asp:DataList> 
```

这是后面的代码：

```
public partial class AdvancedTable : System.Web.UI.Page
{
    SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ConStr"].ConnectionString);
    DataSet ds = new DataSet();
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = new SqlCommand("select * from Country", con);
            con.Open();
            da.Fill(ds, "Country");
            con.Close();
            DataList1.DataSource = ds;
            DataList1.DataBind();
        }
    }

    protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        SqlDataAdapter da2 = new SqlDataAdapter();
        da2.SelectCommand = new SqlCommand("select * from State where C_ID='"+((HiddenField)DataList1.Items[e.Item.ItemIndex].FindControl("HiddenField1")).Value+"'",con);
        con.Open();
        da2.Fill(ds, "State");
        con.Close();
        ((GridView)e.Item.FindControl("GridView1")).DataSource = ds.Tables["State"];
        ((GridView)e.Item.FindControl("GridView1")).DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:49:24.080

相反，您可以执行以下操作：

```
<asp:DropDownList ID="DropDownList1" runat="server" DataSource="<%# GetList((int)Eval("C_ID"))%>">
</asp:DropDownList> 
```

在后面的代码中

```
protected DataTable GetList(int id){ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:45:44.653

也许，而不是`DataList1.Items[e.Item.ItemIndex].FindControl("HiddenField1")`

只需使用`e.Item.FindControl("HiddenField1")`

# iis - 获取有关 404 IIS 重定向的页面 URL（经典 ASP 中的自定义错误页面）

> ID：14894021
> 
> 赞同：0
> 
> 时间：2013-02-15T11:44:48.363
> 
> 标签：iis, asp-classic, http-status-code-404

我已经在 404 错误代码上实现了 IIS 重定向，并为它创建了一个自定义错误页面。我的自定义错误页面是用经典的 asp 编写的（例如：FileNotFound.asp）。我需要在我的自定义错误页面中编写调用页面（不存在）的 URL。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T10:13:22.517

您需要以下内容：

```
Request.ServerVariables (server_variable) 
```

将其替换为：

```
Request.ServerVariables (HTTP_REFERER) 
```

那应该行得通。w3Schools 上的文章：http: [//www.w3schools.com/asp/coll_servervariables.asp](http://www.w3schools.com/asp/coll_servervariables.asp)

# android - openCV4Android中的多线程

> ID：14894023
> 
> 赞同：1
> 
> 时间：2013-02-15T11:44:58.303
> 
> 标签：android, multithreading, opencv, image-processing

我想实时处理从 Android 相机捕获的图像。我想处理我可以从 CAM 捕获的所有 29-30 帧（每秒）（处理不必是实时的）。但是，当我在单个线程中一一处理帧时，我的有效帧速率变为 3-5，因为算法涉及一些循环并且我错过了很多帧。

我可以去多线程吗，比如说一个线程只是将图像存储在一个数组中，（存储10个图像序列就足够了）一个线程从数组中一张一张地提取图像并处理它！！！我不想实时显示图像....只是我想要实时图像捕获。会有帮助吗？

支持吗？？？

# highcharts - 如果 smartGWT 布局 id 隐藏，Highcharts 图表不会完全隐藏

> ID：14894026
> 
> 赞同：1
> 
> 时间：2013-02-15T11:45:00.953
> 
> 标签：highcharts, hide, smartgwt

我使用 smartGWT ( *3.1* ) ( *GWT: 2.5* ) 构建了一个应用程序。

为了保持对各种视图的更改（ListGrids 中的滚动条位置等），我将所有视图添加到主画布并更改它们的可见性（show() / hide()）

```
 (hide() all children then show() the one which was selected in the menu) 
```

在我使用 hichcharts （*gwt.highcharts-1.5.0.jar / highcharts.js -> 2.3.5*）之前，这工作正常。如果我将图表包装在 smartGWT 或 GWT 小部件中，则没有区别，当我隐藏视图时，图表的某些元素仍然可见。

Ledgend-background、Ledgend-lines 和来自数据点的一些点保持可见。它发生在 firefox *18.0.2*和 IE *9*中。在 Chrome ( *24.0.1312.57 m* ) 中它可以工作。

我也尝试 TabSet。当我切换选项卡（应该隐藏“旧”选项卡）时，图表的相同元素仍然可见。

除了可见性问题之外，图表中仍然活跃的侦听器是另一个问题。

**摘要：** 当父小部件隐藏（在 Firefox 和 IE 中）时，highcharts 图表不会正确隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:47:18.113

对于显示问题，由于您没有提供任何代码示例，我使用了 GWT Highcharts[论坛](http://sourceforge.net/p/gwt-highcharts/discussion/general/thread/c06210f1/#036d)上提供的包装器。With correct usage of hide/show calls (eg when tab is selected or deselected, call show or hide, respectively) I have managed to overcome the issue described in all browsers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T07:16:50.357

我遇到过同样的问题。我通过将 tabSelectedHandler 添加到 tabSet 并在其中根据所选选项卡使用 StockChart.setVisible(boolean) 显示或隐藏图表来解决它。

```
tabSet.addTabSelectedHandler(new TabSelectedHandler()
{
    @Override
    public void onTabSelected(TabSelectedEvent event)
    {
        if (event.getTab().getTitle().equals("Charts"))
        {
            chart.setVisible(true);
        }
        else
        {
            chart.setVisible(false);
        }
    }
}); 
```

# c - C中的ZMQ发布者端过滤

> ID：14894027
> 
> 赞同：2
> 
> 时间：2013-02-15T11:45:15.760
> 
> 标签：c, publish-subscribe, zeromq

我正在尝试在 C中实现`PUB-SUB`using 。`ZMQ 3.2`

我能够在订阅者级别进行过滤。我正在使用这个：

```
rc = zmq_setsockopt (subscriber, ZMQ_SUBSCRIBE, filter, strlen (filter)); 
```

现在我想在发布者端实现这个功能。意味着假设我有一些消息要发布，发布者应该只在该消息中有我的过滤器字符串时发布。我怎样才能做到这一点？有什么 API 支持这个`ZMQ 3.2`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T17:40:19.430

*进入答案*

ZeroMQ 订阅总是在版本 ≥ 3.0 的发布者端进行评估。只需使用普通的旧 PUB/SUB，没有理由使用 XPUB/XSUB。当你这样做`sub.setsockopt(zmq.SUBSCRIBE, 'topic')`时，SUB 实际上告诉 PUB 订阅，而 PUB 只会发送匹配当前订阅的消息。

# ruby-on-rails - 选项值内的 link_to

> ID：14894029
> 
> 赞同：0
> 
> 时间：2013-02-15T11:45:19.107
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, hyperlink

我正在尝试找出是否可以使用 link_to 在选项值标记中执行 Ajax 请求

```
<option value="<%= link_to 'Manage Sandpiper Posts', posts_path(:type => 'Sandpiper'), :remote => true %>">Sandpiper</option> 
```

因为选项值标签只接受文本，所以输出目前无效，链接显然不起作用

我想要实现的是在选择选项后执行请求

有谁知道如何解决这个问题，或者如果可能的话，正确的语法是什么？

编辑

当视口处于桌面大小并且工作正常时，我已经从下拉菜单中发出了这个 Ajax 请求，我通过

```
<%= link_to 'Sandpiper', posts_path(:type => 'Sandpiper'), :remote => true %> 
```

Firebug 返回参数

```
type = sandpiper 
```

GET 请求是

```
GET posts?type=Sandpiper 
```

这一切正常，网址保持为 localhost:3000/posts 并返回我的结果

现在，当我在移动视图中使用选择值时，返回的参数与获取请求相同，不同之处在于地址栏中的 url 转到

```
http://localhost:3000/posts?type=Sandpiper 
```

并且没有返回结果。

控制器

```
def index
@posts = Post.all
@tynewyddpost = Post.tynewydd_posts
@woodsidepost = Post.woodside_posts
@sandpiperpost = Post.sandpiper_posts
@outreachpost = Post.outreach_posts
@companypost = Post.company_posts
@staffpost = Post.staff_posts 
```

结尾

index.js.erb

```
<% if params[:type] == 'Tynewydd'  %>
$('#newsResults').html('<%= escape_javascript(render partial: 'tynewyddposts') %>');
<% end %>

<% if params[:type] == 'Woodside'  %>
$('#newsResults').html('<%= escape_javascript(render partial: 'woodsideposts') %>');
<% end %> 
```

我确实尝试更改我的控制器以匹配@SybariteManoj 的控制器，但这也不起作用，尽管我认为我在做同样的事情，只是以不同的方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:33:48.443

我假设请求是一个没有表单数据的 GET，你只使用选择输入来选择一个 url，但你希望行为就像选择的 url 被“点击”一样：使用 jquery：

```
<select onchange="follow_link(this)">
<option value="<%= posts_path(:type => 'Sandpiper')%>">Sandpiper</option>
...
</select> 
```

然后你的 onchange 函数：

```
follow_link = function() {
var url = $(this).val();
$.get(url);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:23:18.893

我试图编辑 Viktor 的答案，但在同行评审之前它是不可见的。所以我在这里添加更改。

```
<select onchange="follow_link(this)">
  <option value="<%= posts_path(:type => 'Sandpiper')%>">Sandpiper</option>
  <option value="<%= posts_path(:type => 'Outreach')%>">Outreach</option>
  <option value="<%= posts_path(:type => 'Tynewydd ')%>">Tynewydd </option>
  ...
</select> 
```

**更改**将此作为参数传递给函数。并更改选项的值。

```
follow_link = function() {
  var url = $(this).val();
  $.get(url);
} 
```

**changes**修改了函数名和变量 url。

现在回答你的第二个问题，你可以在你的 posts#index 操作中有这样的东西：

```
def index
  @type = params[:type]

  if @type.blank?
    @posts = Post.all
  else
    @posts = Post.where(:type => @type)
  end

  respond_to do |format|
    format.html
    format.js
  end
end 
```

并在您的 views/posts 目录下添加一个新文件`index.js.erb`，其内容如下：

```
<% if @type == 'Sandpiper' %>
  $('#some_container_id').html("<%= escape_javascript(render 'some_partial')")
<% elsif @type == 'Outreach' %>
  $('#some_container_id').html("<%= escape_javascript(render 'some_other_partial')")
<% else %>
  so on...
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:56:17.413

您需要：onclick=>"some_function()" 而不是 :remote=>true。然后在链接上放置 id 并在 application.js 中获取链接并获取您要提交的表单并发送表单。

**更新**

在 application.rb 中试试这个：

```
 jQuery(function($) {
   somemethod();
  }); 
```

函数一些方法（）{

```
jQuery("#id_of_the_option").bind("click", function() {
  //do something with the content
}); 
```

}

# python - 如何访问超类的类方法？

> ID：14894030
> 
> 赞同：2
> 
> 时间：2013-02-15T11:45:25.097
> 
> 标签：python, class

我真的需要从超类的子类中找到某种方法来获取超类的类方法。

这是通用代码：

```
class A(object):
    def __init__(self):
        print "A init"

    @classmethod
    def _method(cls):
        print cls
        return cls()

class B(A):
    def __init__(self):
        print "B init"

class C(B):
    def __init__(self):
        print "C init"

    @classmethod
    def _method(cls):
        print "calling super(C)'s classmethod"
        return super(C)._method()

c = C._method() 
```

这导致：

```
Traceback (most recent call last):
  File "C:/Python27x64/testclass", line 26, in <module>
    c = C._method()
  File "C:/Python27x64/testclass", line 22, in _method
    return super(C)._method()
AttributeError: 'super' object has no attribute '_method' 
```

请注意`c = C._method()`，我正在调用未初始化类`C`的类方法。从 开始`C`，我还调用未初始化的类`A`或`B`（遍历 MRO）的类方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:49:09.470

您需要在调用中包含`cls`变量：`super`

```
class C(B):
    def __init__(self):
        print "C init"

    @classmethod
    def _method(cls):
        print "calling super(C)'s classmethod"
        return super(C, cls)._method() 
```

# winforms - 导出到“Word”时出错 - Winform 应用程序 - ReportViewer - vs 2010

> ID：14894031
> 
> 赞同：2
> 
> 时间：2013-02-15T11:45:26.377
> 
> 标签：winforms, report-viewer2010, export-to-word

我在 vs 2010 中使用 reportviewer 控件。我在一个 winform 应用程序中显示我的报告。

报告显示本身很好，但选项：“导出到 Word” - 不起作用。

我收到以下错误：

```
" An error occurred during local report processing . 
Index is out of bounds of the array " 
```

我不知道我做错了什么。

值得一提的是 - 我的报告中没有钻取定义。

请帮助我，因为我迷路了。

提前致谢 。

# iphone - 活动指示器在 iphone 中没有动画

> ID：14894033
> 
> 赞同：0
> 
> 时间：2013-02-15T11:45:32.333
> 
> 标签：iphone, ios6, xcode4.5, uiactivityindicatorview

我有一个要求，当用户单击登录屏幕上的提交按钮时，我需要为 a 设置动画`UIActivityIndicator`，但是 - 使用下面的代码 - 它不是动画：

```
-(IBAction)loginButtonAction:(id)sender {
    [currenttextfield resignFirstResponder];
    [self.spinner startAnimating];
    BOOL valid=[self emailvalidate];

    if(valid) {
        if (!self.passwordstring.length ==0  && ![self.passwordstring isEqualToString:@" "] && ![self.passwordstring isEqualToString:nil] && !self.emailstring.length ==0  && ![self.emailstring isEqualToString:@" "] && ![self.emailstring isEqualToString:nil] ) {
            [self performSelectorOnMainThread:@selector(sendDetails) withObject:nil waitUntilDone:YES];
        }
    }
} 
```

此方法首先调用**EmailValidate**返回一个`BOOL`值。如果有效，则调用**发送详细信息方法**，在该方法中我调用存储库来检查值。完成后，我停止活动指示器。有谁知道如何解决上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:34:02.257

如果您为活动指示器使用了界面构建器，则定义其 IBOutlet 及其属性。

```
-(IBAction)loginButtonAction:(id)sender{

    [currenttextfield resignFirstResponder];
    [activityIndicator startAnimating];

    BOOL valid=[self emailvalidate];
    if(valid) {
        if (!self.passwordstring.length ==0  && ![self.passwordstring isEqualToString:@" "] && ![self.passwordstring isEqualToString:nil] && !self.emailstring.length ==0  && ![self.emailstring isEqualToString:@" "] && ![self.emailstring isEqualToString:nil] ) {
            [self performSelectorOnMainThread:@selector(sendDetails) withObject:nil waitUntilDone:YES];
        }
    } } 
```

# php - 如何使用 Kohana 生成 SEO 友好的 URL

> ID：14894034
> 
> 赞同：0
> 
> 时间：2013-02-15T11:45:39.657
> 
> 标签：php, .htaccess, url, seo, kohana

目前我`url`看起来像是为了SEO 友好`mysite.com/product/display/10`的`domain/controller/function/id`缘故，我正在考虑追加.`product title``product name something`

以我`SEO`所知道的基本知识，为了`SEO`友好，我`url`应该像`mysite.com/product/display/product-name-something/id`

是否有任何有效的方法可以做到这一点`Kohana 2.x`，如果无法使用，请建议使用或不使用文件`Kohana`的有效和更好的方法。`PHP``.htaccess``.htaccess`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:06:01.380

您应该使用 ROUTES 来声明友好的 URL。在文件 config/routes.php 中，像这样：

```
$config['route'] = 'class/method'; 
```

在你的情况下：

```
$config['product/display/([a-zA-Z0-9-]+)/([0-9]+)'] = 'product/display/$2'; 
```

更多：[http ://docs.kohanaphp.com/general/routing](http://docs.kohanaphp.com/general/routing)

要更改字符串，请使用以下命令：

```
function toUrl($string) {
        // small fonts
        $sText = strtolower($string);
        // change spaces to -
        $sText = str_replace(' ', '-', $sText);
        // delete all other characters to -
        $sText = preg_replace('|[^0-9a-z\-\/+]|', '', $sText);
        // delete too much - if near
        $sText = preg_replace('/[\-]+/', '-', $sText);
        // trim -
        $sText = trim($sText, '-');

        return $sText;
} 
```

# android - 如何在相机应用程序中添加矩形覆盖？

> ID：14894035
> 
> 赞同：9
> 
> 时间：2013-02-15T11:45:40.630
> 
> 标签：android, overlay, android-camera

如何在相机预览中添加一个矩形叠加层（应该更像一个矩形框）？我的应用程序包含一个按钮，单击该按钮可打开相机。我需要该相机预览中的叠加层。

java文件的代码是：

```
 public class MainActivity extends Activity {
     Button b;
     Intent i;
     Bitmap bmp;
     final static int cameraData = 0;

     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);
         b = (Button) findViewById(R.id.button);
         InputStream is = getResources().openRawResource(R.drawable.ic_launcher);
         bmp = BitmapFactory.decodeStream(is);
         b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
            // TODO Auto-generated method stub
            i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i, cameraData);

        }
    });
 }
} 
```

布局文件如下：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_gravity="center"
    android:text="click to take photo" />

<Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="click"
    android:layout_gravity="center" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-20T07:54:06.660

首先，创建一个扩展 View 的公共类。在它的`onDraw()`方法中，画出你的矩形。例如：

```
public class Box extends View {
  private Paint paint = new Paint();
  Box(Context context) {
    super(context);
  }

  @Override
  protected void onDraw(Canvas canvas) { // Override the onDraw() Method
    super.onDraw(canvas);

    paint.setStyle(Paint.Style.STROKE);
    paint.setColor(Color.GREEN);
    paint.setStrokeWidth(10);

    //center
    int x0 = canvas.getWidth()/2;
    int y0 = canvas.getHeight()/2;
    int dx = canvas.getHeight()/3;
    int dy = canvas.getHeight()/3;
    //draw guide box
    canvas.drawRect(x0-dx, y0-dy, x0+dx, y0+dy, paint);
  }
} 
```

然后，在您的相机预览活动中，为您的 Box 类创建一个实例：

```
Box box = new Box(this); 
```

最后：

```
addContentView(box, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

将在您的相机预览上绘制一个绿色矩形。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T11:48:43.247

您必须通过扩展 SurfaceView 类来创建自己的预览。

请参阅下面的链接，它可以帮助您。

[自定义相机安卓](https://stackoverflow.com/questions/8543244/custom-camera-android)

以带有 SurfaceView 的 FrameLayout 作为子级。并根据您的需要进行自定义

# javascript - document.referrer 不在 Safari 中工作？

> ID：14894036
> 
> 赞同：3
> 
> 时间：2013-02-15T11:45:42.477
> 
> 标签：javascript, safari, referrer

我正在使用 document.referrer 在 javascript 中获取引荐来源网址。

它在 Mozilla、Chrome 和 IE 中运行良好，但在 SAFARI 中无法运行。为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-19T21:58:29.697

默认情况下，Safari 会阻止跨站点跟踪。自从几个版本以来，Chrome 也在做同样的事情。

对于“兼容”浏览器，您可以使用 Referrer-Policy 标签：

[https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy)

至少对我来说，它修复了 chrome 而不是 Safari 问题。您需要在浏览器的设置菜单中更改该设置。

# delphi - 编译delphi代码时出现I/O错误

> ID：14894038
> 
> 赞同：2
> 
> 时间：2013-02-15T11:45:49.520
> 
> 标签：delphi, delphi-xe2, delphi-7

我在 MyProject 文件夹中有一个 delphi 项目。它编译得很好。但是，当我将文件夹名称从 MyProject 更改为 MyProject1 时，编译时出现错误“I/O 错误”。我该如何解决。我刚刚重命名了文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:52:19.137

好的，我发现了错误。在编译 exe 文件时说 myExe.exe，它采用路径 C:\MyProject1\myExe.exe，但在链接时采用以前的路径，如 C:\MyProject\myExe.exe。我继续项目 - >选项 - >输出目录。输出目录是这样提到的：C:\MyProject 但是当我将其更改为 C:\MyProject1 时，它起作用了。

# https - ServiceStack 和 SSL（不允许使用 HTTP 405 方法）

> ID：14894039
> 
> 赞同：1
> 
> 时间：2013-02-15T11:45:50.020
> 
> 标签：https, servicestack, http-status-code-405

我的服务在 http 上运行，但是当我尝试在 IIS 上启用 https 时，出现以下错误：HTTP 405 Method Not Allowed。

WebDAV 模块被禁用。

# android - 从android中的sdcard中检索图像

> ID：14894040
> 
> 赞同：0
> 
> 时间：2013-02-15T11:46:01.023
> 
> 标签：android, image, file, android-intent, start-activity

在我的 android 应用程序中，当我单击按钮时，新活动开始并从 sdcard 检索图像信息并显示它。当我单击图像的缩略图之一时，我想将该图像发送到第一个活动。我如何使用 startactivityforresult.how 来做到这一点存储图像路径并将其发送回第一个活动。我想要用于存储所有图像的 uri 的数组，因为我正在动态列出它们

在第一个活动中-

```
 public void importFile(View v){

    Intent intent=new Intent(this,ImportFile.class);

    startActivityForResult(intent, 1);

}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode==1)
    {
        String path=data.getDataString();

    }
} 
```

第二个活动——

```
 int j=0;
  File[] imagefile;
 File f = new File("/sdcard");
        File[] files = f.listFiles();
        for(int i = 0; i < files.length; i++) {
            File file1 = files[i];
         imagefile[j]=file1; //here getting  nullpointer exception
             }
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        int j;
        // TODO Auto-generated method stub
        for(j=1;j<idcount;j++){
            if(ch[j].isChecked())
            {
                System.out.println("PPPPPPPPPPPPPPPPPP"+j);
                i=new Intent();
                i.putExtra("file","mmm");//here how can i send image path
                setResult(RESULT_OK, i);
                finish();
            }       
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:52:16.007

由于您已在附加文件中设置了文件名，请尝试从附加文件中检索它..

字符串路径= data.getStringExtra("file");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:17:15.987

假设您从 Import.java Acitivty 中的 sdcard 中检索图像，如下所示：

```
File file = new File(getExternalFilesDir(null), "MyFile.jpg"); 
```

因此，一旦您将图像放入 File 对象中，您只需将其路径放在将用作结果数据的 Intent 上，该结果数据将被发送回“调用者”活动。在您的“被调用”活动中，您应该这样做：

```
 Intent resultData = new Intent();
 resultData.putExtra("imagePath", file.getAbsolutePath());
 setResult(RESULT_OK,returnIntent);     
 finish(); 
```

您的 onActivityResult 方法：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
   super.onActivityResult(requestCode, resultCode, data);

   if(requestCode==RESULT_OK)
   {
       String path = data.getStringExtra("imagePath");           

   } 
```

}

而已！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:36:29.053

试试这个答案：

通过使用它，您可以从 Gallery 中获取图像并将其放在 uri 的 imageview 或 arraylist 上。这里的文件路径是您从 sd 卡中选择的照片图像路径。您可以直接将其添加到 Uri 的数组列表中。或者您可以使用 image.setImageBitmap() 将图像设置为位图；

```
Intent intent = new Intent(Intent.ACTION_PICK , android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
    YourActivity.this.startActivityForResult(intent,SELECT_PICTURE); 
```

onActivityResult 方法：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        String filePath;
        Log.i(TAG, "onActivityResult,requestCode" + requestCode);

        if (requestCode == SELECT_PICTURE) {
            try {
                System.out.println("I ma here1");

                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();
                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                filePath = cursor.getString(columnIndex);
                Log.i(TAG, "======gallery image path=======:" + filePath);
                // ======gallery image path=======:/mnt/sdcard/wallpaper4.jpg

                // imageViewPhoto.setImageURI(selectedImage);
                cursor.close();
                Bitmap yourSelectedImage = null;
                yourSelectedImage = BitmapFactory.decodeFile(filePath);
                image_sublable.setImageBitmap(yourSelectedImage);
                ByteArrayOutputStream os = new ByteArrayOutputStream();
                yourSelectedImage.compress(CompressFormat.JPEG, 100, os);
                image = os.toByteArray();
                imagefilePath = filePath;
                Log.i(TAG, "image in method=>" + image);

            } catch (Exception e) {
                e.printStackTrace();
            }
        } 
```

您可以直接在字符串中添加文件路径并将其存储到字符串数组中。尝试使用它并获得一些想法。

```
 int j=0;
      String[] imagefile = new String[]{};
           String fileString = filePath; // copy file path into fileString
            String[] files = f.listofString();
          for(int i = 0; i < files.length; i++) {
                String fileString = files[i];
             imagefile[j]=fileString; //here getting  nullpointer exception
                 } 
```

希望它会帮助你。

# html - 如何在 cakephp 中默认选中所有复选框？

> ID：14894042
> 
> 赞同：0
> 
> 时间：2013-02-15T11:46:08.137
> 
> 标签：html, cakephp, cakephp-1.3, cakephp-2.0

我想在cakephp中默认选中所有复选框，我该怎么做

```
 $selected = $this->Form->input('user_id')                  

 <?php echo $form->input('user_id', 
                                array(
                                'multiple'=>'checkbox',
                                    'options'=>$user,
                                    'checked'=>$selected
                                )   
                            );
                ?> 
```

我关注了以下链接，但没有成功
[cakephp：如何将复选框设置为选中？](https://stackoverflow.com/questions/1962463/cakephp-how-to-set-checkbox-to-checked)
[CakePHP 中的多个复选框 - 如何设置选中的复选框？](https://stackoverflow.com/questions/12168225/multiple-checkboxes-in-cakephp-how-to-set-which-are-checked)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:56:07.623

使用控制器并遍历所有选项，填充 $this->request->data。我从不将视图用于默认值。对我来说，这是逻辑，也是控制器在 GET 情况下的责任的一部分（而不是 POST，它应该使用发布的数据）

见[http://www.dereuromark.de/2010/06/23/working-with-forms/](http://www.dereuromark.de/2010/06/23/working-with-forms/)

在您的情况下（假设您有一个 userIds 数组 - 或包含它们的任何其他数组）：

```
foreach ($userIds as $userId) {
    $this->request->data['Model']['user_id'][] = $userId;
} 
```

记住只为 if (!posted) 这样做。

# bpel - 从 Java 导入什么以在 ODE 中部署 BPEL？

> ID：14894044
> 
> 赞同：1
> 
> 时间：2013-02-15T11:46:10.947
> 
> 标签：bpel, apache-ode

我已经下载了[ODE WAR Distribution](http://ode.apache.org/getting-ode.html)并将其部署在我的 Java Webapp 项目中。

当我需要部署我的 BPEL 流程时，我只需复制文件夹`.bpel` `.wsdl` `deploy.xml`中的所有 etc即可。`WEB-INF/processes`

我觉得这不是正确的做事方式：有很多批量客户端`html`，`js`我不需要。此外，我需要提供我必须公开的 Manamgemet API 的功能。

我的猜测是必须有某种方法只导入部署 Web 服务和管理 API 并直接从 Java 中使用它们。

如何做到这一点？我需要下载和导入什么？

编辑：使用 API 在 ODE 中部署进程而不是直接将文件复制到进程文件夹中是否有任何优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:06:54.737

首先：Web 控制台是可选的，您可以通过将所有 jars 添加到 WEB-INF/lib 并将 ODE/Axis2 相关的 servlet 添加到您的 web.xml 来使用 ODE 打包您自己的 war 文件。当然，ODE 需要配置文件等一些资源，但您不必包含所有 HTML/JS/CSS/JSP 文件。

关于部署，这取决于您的上下文和用例。虽然热部署提供了一种部署流程模型的简单方法，但您需要手动处理版本控制。但是，如果您使用部署 API（一个 WSDL Web 服务），ODE 将负责流程版本的命名约定。如果你想远程部署流程模型，我推荐这种方式。如果您想使用预定义的流程发布 ODE，我会选择热部署方法。

# php - PHP GD如何在一行上绘制文本

> ID：14894049
> 
> 赞同：7
> 
> 时间：2013-02-15T11:46:21.190
> 
> 标签：php, gd

最终输出应该像图像（HELLO WORLD）： ![请忽略线条粗细..](../Images/e4df060fb1306c1ec6b09896df8d1981.png)

这是我正在做的事情：-

```
$im = imagecreate(400,400); 

$txtcol = imagecolorallocate($im, 0xFF, 0x00, 0x00);

$size = 20;

$txt = 'DUMMY TEXT';

$font = './font/Capriola-Regular.ttf';

/*two points for base line*/

$x1 = 50; $x2 = 300; 

$y1 = 150; $y2 = 170;

/*bof finding line angle*/

$delta_x = $x2-$x1;

$delta_y = $y2-$y1;

$texangle = (rad2deg(atan2($delta_y,$delta_x)) * 180 / M_PI)-360;

/*eof finding the line angle*/

imageline($im,$x1,$y1,$x2,$y2,$txtcol); //Drawing line

imagettftext($im, $size, $texangle, $x1, $y1, $txtcol, $font, $txt); // Drawing text over line at line's angle 
```

当前输出如下：

![电流输出](../Images/847979b581c8410cca56621130618476.png)

谁能告诉我的代码有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:18:55.703

好的，一直在玩。尝试更换：

```
$texangle = (rad2deg(atan2($delta_y,$delta_x)) * 180 / M_PI)-360; 
```

和：

```
$texangle = (atan2($delta_y,$delta_x) * -180 / M_PI)-360; 
```

输出您的值：

![在此处输入图像描述](../Images/b073bf6e35ef1ac040804b90fbabfb56.png)

输出其他值：

![在此处输入图像描述](../Images/39742d5ef295beba76aa6bf50fc8c1fc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:52:05.903

这不是您可能正在寻找的确切内容，但我相信它会对您有所帮助

```
$im = imagecreate(400,400); 

$txtcol = imagecolorallocate($im, 0xFF, 0xFF, 0x00);

$size = 20;

$txt = 'DUMMY TEXT';

$font = 'Capriola-Regular.ttf';

/*two points for base line*/

$x1 = 70; $x2 = 170; 

$y1 = 140; $y2 = 240;

/*bof finding line angle*/

$delta_x = $x2-$x1;

$delta_y = $y2-$y1;

$texangle = (rad2deg(atan2($delta_y,$delta_x)) * 180 / M_PI)-360;

/*eof finding the line angle*/

imageline($im,$x1,$y1,$x2,$y2,'0xDD'); //Drawing line
imagettftext($im, $size, -45, $x1, $y1-10, '0xDD', $font, $txt); // Drawing text over line at line's angle

header('Content-Type: image/png');

imagepng($im);
imagedestroy($im); 
```

值是硬编码的。此处角度为 -45，对于该角度，如果您希望文本出现在线上方，则必须从线条的初始 Y 位置减小该值。你将不得不编写代码来计算与线的 x1,x2y1,y2 的角度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T13:54:59.490

2个想法，目前无法测试。

1.  其中 0 (x=1, y=0) 或 (x=0, y=1)。看起来你的文字偏离了 90 度，这通常意味着你假设 0 是直接正确的，而它可能是直接向上的，反之亦然。

2.  `(rad2deg(atan2($delta_y,$delta_x)) * 180 / M_PI)-360;`你在这里做双重工作吗？`rad2deg`从弧度转换为度数。 `180 / M_PI`也是从弧度到度的转换。

# osgi - 将 Camel 代码部署到 ServiceMix ( FuseESB ) 时，OSGi 缺少要求 org.wiring.package = org.hsqldb

> ID：14894051
> 
> 赞同：0
> 
> 时间：2013-02-15T11:46:27.483
> 
> 标签：osgi, apache-servicemix, blueprint-osgi, fuseesb

我已经编写了一些 Camel 代码，但是在 Windows 上部署到 FuseESB v7.10 时，我在日志中收到以下异常：

```
Unable to resolve 337.0: missing requirement [337.0] 
osgi.wiring.package; (&(osgi.wiring.package=org.hsqldb)(version>=1.8.0.7)  
(!(version>=2.0.0))) at   
org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4054) 
```

该项目使用 Blueprint OSGi xml 文件编写以定义 bean，然后使用 Maven 构建为 jar（而不是 OSGi 包），然后热部署到部署目录，因此它由 FuseESB FAB 部署程序部署。它在 Maven POM 中对 HSQLDB 没有显式依赖，所以我假设这是一个传递依赖。但是，我尝试安装我认为相关的捆绑包：

osgi：安装 mvn：org.apache.servicemix.bundles/org.apache.servicemix.bundles.hsqldb/1.8.0.10_2

此捆绑包现在在 Karaf 控制台中显示为活动状态：

```
[335] [Active] [ ] [ ] [ 60] Apache ServiceMix :: Bundles :: hsqldb (1.8.0.10_2) 
```

如果我运行命令 packages:exports 似乎表明此捆绑包导出了正确的依赖项：

```
FuseESB:karaf@root> packages:exports 335
ID Packages
335 org.hsqldb.resources; version=1.8.0.10
335 org.hsqldb.types; version=1.8.0.10
335 org.hsqldb.jdbc; version=1.8.0.10
335 org.hsqldb.scriptio; version=1.8.0.10
335 org.hsqldb.rowio; version=1.8.0.10
335 org.hsqldb.store; version=1.8.0.10
335 org.hsqldb.index; version=1.8.0.10
335 org.hsqldb.persist; version=1.8.0.10
335 org.hsqldb.lib.java; version=1.8.0.10
335 org.hsqldb.util.sqltool; version=1.8.0.10
335 org.hsqldb; version=1.8.0.10
335 org.hsqldb.sample; version=1.8.0.10
335 org.hsqldb.util; version=1.8.0.10
335 org.hsqldb.lib; version=1.8.0.10 
```

但是我的包仍然无法启动，并给出了同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:30:06.757

好的，我看到了问题：这是对版本的误解。

您安装的 HSQLDB 包正在将包导出`org.hsqldb`为版本 1.8.0.10。您的捆绑包至少需要 1.8.0.7 版本。您可能认为这不是问题，但实际上**1.8.0.10 小于 1.8.0.7**！

OSGi 版本具有三个数字段（主要、次要、微型）和一个称为限定符的字母数字段。这里，限定符分别是“10”和“7”。当作为字母数字字符串比较时，“10”小于“7”，因为“10”的第一个字符是 1，并且在 7 之前。作为参考，使用`String.compare()`标准 Java 库中的方法比较限定符，因此请参阅JavaDocs 为该方法获取算法的完整描述。

如何解决这个问题？好吧，您的捆绑包 337（无论它是什么）离它所需的版本太远了，太具体了。它可能应该从 1.8 向上导入任何内容，如下所示：`[1.8,2.0)`... 甚至是从版本 1 向上的任何内容：`[1, 2)`.

另外作为旁注，我认为 HSQLDB 的作者在限定符段中使用看起来像数字的东西时犯了一个错误。但是，除非您自己是 HSQLDB 的作者，否则我认为您对此无能为力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T08:18:54.867

您可以在 pom.xml 文件中将 HSQLDB 作为依赖项添加到您的项目中。然后 FAB 应该自动安装它并将其包含在类路径空间中。

如果您想预安装它，或者使用共享包，那么您可以将范围定义为

```
<scope>provided</scope> 
```

然后 FAB 将使用共享包。你可以在这里阅读：http: [//fuse.fusesource.org/bundle/overview.html](http://fuse.fusesource.org/bundle/overview.html)

在即将推出的 Camel 2.11 中还有一个新的 SQL 示例：http: [//camel.apache.org/sql-example.html](http://camel.apache.org/sql-example.html)。它也适用于 OSGi，因为我们在示例中包含了一个 features.xml 文件：[https ://svn.apache.org/repos/asf/camel/trunk/examples/camel-example-sql/](https://svn.apache.org/repos/asf/camel/trunk/examples/camel-example-sql/)

尽管由于通常的 OSGi 痛苦，我们不得不在 felix-bundle-plugin 中添加动态导入:(

# android - 不同版本的自定义组件

> ID：14894056
> 
> 赞同：1
> 
> 时间：2013-02-15T11:46:34.810
> 
> 标签：android, android-layout, android-button

我正在使用 ActionBarSherlock 在旧版本的 Android 上获取 ActionBar。但是，ICS 下面的按钮和文本字段仍然不同。如果我制作了一个自定义按钮或 EditText，它们在 Android 2.x 和 4.x 上看起来会一样吗？编辑：有什么好的，简单的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:53:20.310

使用[Asset Studio Tools](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)创建和谐的 4.X UI 设计

# java - 从具体类派生的抽象类

> ID：14894057
> 
> 赞同：5
> 
> 时间：2013-02-15T11:46:45.973
> 
> 标签：java, oop

我刚刚在我的 IDE 中收到一个警告，我的类是`abstract`，但它是从`concrete`类派生的。什么？为什么我不能这样做？这非常适合我的需求。这只是一个警告，所以该类是可编译的。只是对它为什么给我这个警告感兴趣。谢谢你。

**更新**

我需要用一些解释来扩展我的问题。我有这个类派生自其他类，我希望没有人能够实例化它。此外，我需要这个抽象类的两个子类，每个子类都有自己的一个抽象方法的实现。这就是为什么。

你认为这是个坏主意吗？我应该采取什么方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:51:32.133

我认为原因可能是抽象类通常用于创建子类的基本行为/信息。在做出这样的决定时考虑其他程序员。其他人并不期待。

无论如何，您可以设置编译器首选项不对此类“问题”发出警告。

**更新**

阅读您的更新后，我认为最简单的方法是声明此类的`constructor protected`. 对于抽象方法：`override`我认为您可以简单地从您的子类中获取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:49:10.443

你可以这样做。这就是为什么您收到警告而不是错误的原因。

这是一种常见的情况，通常表明系统架构不好。这就是编译器显示警告的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:55:06.140

Java 编译器警告只是对程序员的一个指示，不应正常执行，否则程序员将来可能会因此而遇到错误。

[请参阅此链接](http://www.cprogramming.com/tutorial/compiler_warnings.html)，因为它解释了为什么要担心警告

# javascript - 在 HTML5 中转换 -90 度后如何使网页适合？

> ID：14894064
> 
> 赞同：1
> 
> 时间：2013-02-15T11:47:13.000
> 
> 标签：javascript, html, css

我有一个已旋转到 -90 度的网页。

该页面看起来不错，但它具有相同的宽度和高度，并且在 -90 度模式下会出现空白。

我需要知道如何在旋转的网页中重新调整新的高度和宽度。

我尝试将 CSS 宽度和高度应用到 100%，但似乎没有任何效果。

网页包含画布元素，这意味着它们也需要重新调整大小。

环境是chrome和UA -iOS4 Scripting Language -Javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:53:00.967

我认为您应该采用旧的高度和宽度，然后旋转和宽度=oldheight，height=oldwidth。

# java - 具有由@SuiteClasses (JUnit4) 标记的类的文件的路径或命名shema

> ID：14894067
> 
> 赞同：1
> 
> 时间：2013-02-15T11:47:19.707
> 
> 标签：java, unit-testing, junit, naming-conventions, junit4

今天我陷入了`@SuiteClasses`.

我最近加入了一个相对年轻/缺乏经验的团队的新项目，并发现项目测试架构的缺点：

*   带有标记为 @SuiteClasses 的类的测试文件放置在与常规测试相同的包中。

    `includes``surefire`插件的标签看起来像`<include>com/company/project/core/**/*Test.java</include>`我们的`pom.xml`，我们有套件的命名模式，例如：`<PREFIX>SuiteTest.java`所以**mvn test**命令执行相同的测试两次或更多次......

*   最近我整合`DbUnit`到项目中。从 IDE 运行 DbUnit 测试或从 IDE 引用 DbUnit 测试的测试套件是可以的。但是，如果任何测试套件引用任何 DbUnit 测试，它会从命令行永远停留在 DbUnit 测试上。这导致 CI`Jenkins`​​ 停止构建项目并将其交付给测试团队......

问题的根源在于测试套件的命名模式。

将套件放入与常规测试相同的包中或使用单独的包，如：

```
com.company.project.testsuites

```

或者可以为测试套件使用不同的命名模式以将它们与常规测试区分开来（而不是`<PREFIX>SuiteTest.java`use `<PREFIX>TestSuite.java`）？你从你的实践中建议了哪些名字？

# azure - 跨多个 Azure 数据磁盘分区的数据库的性能

> ID：14894070
> 
> 赞同：0
> 
> 时间：2013-02-15T11:47:29.467
> 
> 标签：azure, azure-storage, partitioning, azure-table-storage, azure-blob-storage

`partition 1`查询是否`partition 2`负载过重 时，跨单独的页 blob（Azure 数据磁盘）对 SQL Server 数据库进行分区是否会对性能产生影响？

我知道页面 blob 不需要单独的物理磁盘，所以我想知道性能。

**上下文编辑：** 基本上我想将旧（存档）数据与实时数据（所以所有超过 3 个月的数据）分开，以减少数据库和索引的大小。但是这个归档数据必须仍然是可查询的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:48:37.920

如果您的查询不需要从分区 2 获取数据，我怀疑影响会很小。但是，如果您的目标是提高性能，您是否考虑过使用 blob 创建 RAID 0（条带）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:17:56.913

这绝对是一个“取决于”的答案，并且需要您进行一些测试。

[2012 年可扩展性目标](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)显示大约 60 MB/秒的 blob，而[VM 大小](http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx)显示超大型实例获得 800 Mb/秒 - 目标吞吐量显然取决于您的使用情况，因此您可能会也可能不会接近这个数字，如果可以的话，你可能已经饱和了分配的带宽，所以绝对没有必要再进一步了。

我倾向于使用每个数据库实例的基本配置，获取 1 个数据驱动器和 1 个日志驱动器。如果您的网络上仍有任何余量，那么您可以根据需要进一步查看分区。

或者，如果您的问题是您能够以多快的速度从 azure 驱动器下的 blob 中检索数据，您或许可以考虑使用[数据压缩...](http://msdn.microsoft.com/en-us/library/dd894051%28v=sql.100%29.aspx)

# python - 如何手动安装 cx_Oracle rpm？

> ID：14894073
> 
> 赞同：2
> 
> 时间：2013-02-15T11:47:31.740
> 
> 标签：python, linux, installation, rpm

我没有root权限。我已经下载`cx_Oracle-5.1.2-10g-py26-1.i386.rpm`了，我想安装它。如何在没有root权限的情况下安装它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:04:16.093

给你：我已经安装在`/home/spatel/cx`

```
[spatel@us04 ~]$ rpm -ivh --root /home/spatel/cx cx_Oracle-5.1-11g-py32-1.i386.rpm --relocate /usr=/home/spatel/cx
Preparing...                ########################################### [100%]
   1:cx_Oracle              ########################################### [100%] 
```

这是我的模块：

```
[spatel@us04 ~]$ ls -l ~/cx/lib/python3.2/site-packages/
total 276
-rw-r--r-- 1 spatel spatel    896 Mar 19  2011 cx_Oracle-5.1-py3.2.egg-info
-rwxr-xr-x 1 spatel spatel 273264 Mar 19  2011 cx_Oracle.cpython-32mu.so 
```

设置你的python路径

```
>>> import sys
>>> sys.path.append("/home/spatel/cx/lib/python3.2/site-packages")
>>> print (sys.path)
['', '/usr/lib64/python24.zip', '/usr/lib64/python2.4', '/usr/lib64/python2.4/plat-linux2', '/usr/lib64/python2.4/lib-tk', '/usr/lib64/python2.4/lib-dynload', '/usr/lib64/python2.4/site-packages', '/usr/lib64/python2.4/site-packages/gtk-2.0', '/usr/lib/python2.4/site-packages', '/home/spatel/cx/lib/python3.2/site-packages'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T12:02:36.073

好吧，有两种可能性：

1.  无需 root 即可安装 rpm：[http ://ajaya.name/?p=6353](http://ajaya.name/?p=6353)
2.  下载源代码并将其安装在任何您想要的位置（源代码可以在：[http](http://cx-oracle.sourceforge.net/) ://cx-oracle.sourceforge.net/ 找到（仅限源代码）

如果您已经编译了一些东西，我建议您使用 2 个选项

# google-maps - 如果存在谷歌地图，则设置坐标

> ID：14894076
> 
> 赞同：0
> 
> 时间：2013-02-15T11:47:49.390
> 
> 标签：google-maps, url, conditional-statements, geturl

我想从 URL 中获取坐标并将它们发送到谷歌地图，以便在该坐标中设置地图中心。我设定了一个条件。如果坐标没有值，它可以工作，但如果没有，则地图不会设置中心。这是我的代码。

```
function getUrlVars()
            {
                var vars = [], hash;
                var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                for(var i = 0; i < hashes.length; i++)
                {
                    hash = hashes[i].split('=');
                    vars.push(hash[0]);
                    vars[hash[0]] = hash[1];
                }
                return vars;
            }
            var coordenadas = getUrlVars()["coordenadas"];

            var map;
            var infowindow;
            var geocoder;

            if (coordenadas){

                function init() {
                    alert ("coordenadas "+coordenadas);
                    geocoder = new google.maps.Geocoder();
                    map = new google.maps.Map(document.getElementById('map_canvas'), {
                        zoom: 5,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        center: new google.maps.LatLng(coordenadas)                 
                    });             
                    infoWindow = new google.maps.InfoWindow();
                    google.maps.event.addListener(map, 'click', clickedAddress);        

                }
            }
            else{
                function init() {
                    geocoder = new google.maps.Geocoder();
                    map = new google.maps.Map(document.getElementById('map_canvas'), {
                        zoom: 5,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        center: new google.maps.LatLng(40.346544, -3.848877)                    
                    });             
                    infoWindow = new google.maps.InfoWindow();
                    google.maps.event.addListener(map, 'click', clickedAddress);        

                }
            }; 
```

我在做什么坏事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:36:45.910

google.maps.LatLng 将两个浮点数作为参数，而不是包含两个用逗号分隔的数字的字符串。

```
var coords=coordenadas.split(','); 
```

然后

```
center: new google.maps.LatLng(parseFloat(coords[0]), parseFloat(coords[1])) 
```

在“if”中创建多个“init”函数的方式也有些奇怪，这对我不起作用（至少在 IE 中）。这样做：

```
 if (!!coordenadas){

             init = function() {
                alert ("coordenadas "+coordenadas);
       var coords=coordenadas.split(',');
                map = new google.maps.Map(document.getElementById('map_canvas'), {
                    zoom: 5,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: new google.maps.LatLng(parseFloat(coords[0]), parseFloat(coords[1]))
                });             
                infoWindow = new google.maps.InfoWindow();
                //google.maps.event.addListener(map, 'click', clickedAddress);        

            }
        }
        else{
            init = function () {
                geocoder = new google.maps.Geocoder();
                map = new google.maps.Map(document.getElementById('map_canvas'), {
                    zoom: 5,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: new google.maps.LatLng(40.346544, -3.848877)                    
                });             
                infoWindow = new google.maps.InfoWindow();
                // google.maps.event.addListener(map, 'click', clickedAddress);        

            }
        }; 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_SO_parseUrl.html?coordenadas=0,0)

# php - AR 模型中 Yii 的关系类型是什么

> ID：14894081
> 
> 赞同：1
> 
> 时间：2013-02-15T11:48:02.467
> 
> 标签：php, model, yii

我相信 Yii 的 AR 模型中的关系返回为**Array**。但是“Web Application Development with Yii and PHP”一书尝试使用主题作为**对象**实例，它会出错。我是否遗漏了什么或理解错误或者是书的错误？

例如，在“评论”AR 模型类中，我们有：

```
public function relations()
{

    return array(
        'author' => array(self::BELONGS_TO, 'User', 'create_user_id'),
    );
} 
```

book 将“用户名”称为：

```
$comment->author->username 
```

我使用：

```
$comment->author['username'] 
```

哪一个是正确的？

更新-> 我将把所有相关代码放在这里： **AR 模型：**

```
/**
 * This is the model class for table "tbl_comment".
 *
 * The followings are the available columns in table 'tbl_comment':
 * @property integer $id
 * @property string $content
 * @property integer $issue_id
 * @property string $create_time
 * @property integer $create_user_id
 * @property string $update_time
 * @property integer $update_user_id
 *
 * The followings are the available model relations:
 * @property User $updateUser
 * @property Issue $issue
 * @property User $createUser
 */
class Comment extends TrackStarActiveRecord
{
/**book
 */
public function recent($limit=5)
{
    $this->getDbCriteria()->mergeWith(array(
    'order'=>'t.create_time DESC',
    'limit'=>$limit,)
    );
    return $this;   
}
/**
 * Returns the static model of the specified AR class.
 * @param string $className active record class name.
 * @return Comment the static model class
 */
public static function model($className=__CLASS__)
{
    return parent::model($className);
}

/**
 * @return string the associated database table name
 */
public function tableName()
{
    return 'tbl_comment';
}

/**
 * @return array validation rules for model attributes.
 */
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('content, issue_id', 'required'),
        array('issue_id, create_user_id, update_user_id', 'numerical', 'integerOnly'=>true),
        array('create_time, update_time', 'safe'),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('id, content, issue_id, create_time, create_user_id, update_time, update_user_id', 'safe', 'on'=>'search'),
    );
}

/**
 * @return array relational rules.
 */
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'updateUser' => array(self::BELONGS_TO, 'User', 'update_user_id'),
        'issue' => array(self::BELONGS_TO, 'Issue', 'issue_id'),
        'author' => array(self::BELONGS_TO, 'User', 'create_user_id'),
    );
}

/**
 * @return array customized attribute labels (name=>label)
 */
public function attributeLabels()
{
    return array(
        'id' => 'ID',
        'content' => 'Content',
        'issue_id' => 'Issue',
        'create_time' => 'Create Time',
        'create_user_id' => 'Create User',
        'update_time' => 'Update Time',
        'update_user_id' => 'Update User',
    );
}

/**
 * Retrieves a list of models based on the current search/filter conditions.
 * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
 */
public function search()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;

    $criteria->compare('id',$this->id);
    $criteria->compare('content',$this->content,true);
    $criteria->compare('issue_id',$this->issue_id);
    $criteria->compare('create_time',$this->create_time,true);
    $criteria->compare('create_user_id',$this->create_user_id);
    $criteria->compare('update_time',$this->update_time,true);
    $criteria->compare('update_user_id',$this->update_user_id);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
  }
  } 
```

**小部件组件：**

```
<?php
/**
* RecentCommentsWidget is a Yii widget used to display a list of
recent comments
*/
class RecentCommentsWidget extends CWidget
{
private $_comments;
public $displayLimit = 5;
public $projectId = null;
public function init()
{
    if(null !== $this->projectId)
        $this->_comments = Comment::model()-          >with(array('issue'=>array('condition'=>'project_id='.$this->projectId)))->recent($this->displayLimit)->findAll();
    else
        $this->_comments = Comment::model()->recent($this->displayLimit)->findAll();
}
public function getData()
{
return $this->_comments;
}
public function run()
{
// this method is called by CController::endWidget()
$this->render('recentCommentsWidget');
}
} 
```

**小部件视图：**

```
<ul>
    <?php foreach($this->getData() as $comment): ?>
<div class="author">
    <?php echo $comment->author->username; ?> added a comment.
</div>
<div class="issue">
    <?php echo CHtml::link(CHtml::encode($comment->issue->name),
    array('issue/view', 'id'=>$comment->issue->id)); ?>
</div>
    <?php endforeach; ?>
</ul> 
```

此代码会导致非对象错误，但是当我更改时

```
$comment->author->username 
```

到 $comment->author['username'] 它工作正常。我想知道它是如何通过对象访问方法来处理 $issue 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:58:04.540

这两种访问方法都可以。`CActiveRecord`实例使用 PHPs`ArrayAccess`类来提供对其属性的数组样式访问。

您可能指的是关系类型：

`HAS_ONE`&`BELONGS_TO`都返回一个可以直接使用的对象，就像你给出的例子一样。`NULL`如果没有找到行，这些也会返回。

`HAS_MANY`&`MANY_MANY`关系返回一个数组，您可以像这样使用它：`$model->authors[0]->name`或`$model->authors[1]->name`. `Array`如果没有找到行，这些将返回并清空。

`STAT`关系再次有点不同，并返回单个标量值（整数、字符串、布尔值等）。返回`0`未找到，但这可以通过配置`defaultValue`

阅读此处了解更多信息：

[http://www.yiiframework.com/doc/guide/1.1/en/database.arr](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:08:31.307

推荐的形式是：

```
$comment->author->username 
```

您可以使用下面的代码...

```
$comment->author['username'] 
```

...因为 PHP 将对象作为数组处理。

# html - IE9 也需要 HTML5 shiv 以支持 HTML5 元素

> ID：14894084
> 
> 赞同：10
> 
> 时间：2013-02-15T11:48:18.237
> 
> 标签：html, internet-explorer-9, html5shiv

我在我的页面中使用以下 HTML5 元素：标题、文章、部分和导航。现在我已将上述所有 HTML5 元素设置为 display: 块，并在标题中包含带有条件语句的 HTML5 shiv：

```
<!--[if lt IE 9]>
<script src="dist/html5shiv.js"></script>
<![endif]--> 
```

该网站在 IE7 和 IE8 中运行良好 - 表明 html5shiv 确实在发挥它的魔力。但是，当我在 IE9 中测试该站点时，它缺少 HTML5 元素内所有内容的样式。

一旦我将条件语句更改为：

```
<!--[if IE]>
<script src="dist/html5shiv.js"></script>
<![endif]--> 
```

html5 元素及其子元素现在应用了正确的样式。我仔细检查了我的 IE 版本，它说我的 IE 版本是 9.0.8112.16421。

我还应该提到，这些站点是用 PHP 构建的，并通过使用 PEAR 的 Cache_Lite 进行缓存。然而，在一个简单的静态 html 页面上进行的测试对我来说给出了相同的结果。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-15T13:49:58.683

我终于设法找出问题所在。我在我的网站顶部有一条评论，在 doctype html 标记之前。这似乎破坏了 IE9 识别 HTML5 元素的能力。

这就是我所拥有的：

```
<!-- Served From Cache: Wednesday 13th of February 2013 03:02:22 PM -->
<!DOCTYPE html>
<html>
    <head> 
```

因此，我可以通过将注释向下移动到文档类型下方来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:07:18.217

试试这个代码

```
<!--[if lt IE 9]>  
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>  
<![endif]--> 
```

# javascript - 如何为输入框创建下拉列表取决于在另一个输入框的另一个下拉列表中选择的值

> ID：14894086
> 
> 赞同：0
> 
> 时间：2013-02-15T11:48:25.630
> 
> 标签：javascript, jquery, html

我有两个输入框作为下拉列表。要为第二个输入框创建的下拉列表取决于第一个输入字段中给出的值。

```
var firstarray =[{sym: "1", desc: "one"},
                 {sym: "2", desc: "two"},
                 {sym: "3", desc: "three"}];

var secondarray =[{sym: "4", desc: "four", firstarraycode: "2"},
                  {sym: "5", desc: "five", firstarraycode: "2"},
                  {sym: "6", desc: "six",  firstarraycode: "1"}]; 
```

通过使用第一个数组，我为第一个输入框创建了下拉列表。

第`sym`一个数组的值是`firstarraycode`第二个输入框的第三个字段 ( )。

根据`sym`第一个数组选择的值，必须从数组中过滤第二个输入框的下拉值。

例如，如果我们在第一个下拉列表中选择，它会创建带有值和`2`的第二个下拉列表。`sym``4``5`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:24:40.427

试试：http: [//jsfiddle.net/aF6Xq/](http://jsfiddle.net/aF6Xq/)

```
var firstarray =[{sym:"1",desc:"one"},{sym:"2",desc:"two"},{sym:"3",desc:"three"}];
var secondarray =[{sym:"4",desc:"four",firstarraycode:"2"},{sym:"5",desc:"five",firstarraycode:"2"},{sym:"6",desc:"six",firstarraycode:"1"}];

function fillsecond(array){
   $('#second').empty();
   $('#second').append("<option>Select</option>");
   for (i=0;i<array.length;i++){             
     $('<option/>').val(array[i].sym).html(array[i].desc).appendTo('#second');
   }
} 
 $('#first').append("<option>Select</option>");
 $('#second').append("<option>Select</option>");

for (i=0;i<firstarray.length;i++){
   $('<option/>').val(firstarray[i].sym).html(firstarray[i].desc).appendTo('#first');
}
$('#first').change(function(){
  var val=$(this).val();

  var tempArray = $.grep( secondarray, function(elem){ return elem.firstarraycode  == val; });

  fillsecond(tempArray);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:07:50.963

您可以使用几个 jQuery 实用程序`$.map`来`$.grep`过滤数据。

```
$('#select_one_ID').change(function(){
  var val=$(this).val();
  var optionsArray=$.grep( secondarray, function(item){ return item.firstarraycode  == val; });

  /* loop over optionsArray to create new option tags*/

}); 
```

API 参考：[http ://api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)

# ssrs-2008 - 取消隐藏从 SSRS 中提取到 excel 的隐藏列

> ID：14894087
> 
> 赞同：0
> 
> 时间：2013-02-15T11:48:28.627
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

我有一个 SSRS 报告，当我们提取到 EXCEL 时，某些列被隐藏了。

我可以通过设置列可见性的表达式将其隐藏在 excel 中

```
=IIF(Globals!RenderFormat.Name = "EXCEL",True,False) 
```

但是有没有办法用户可以取消隐藏 excel 中的列（提取的结果集）并查看数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:31:10.333

如果项目被隐藏，则在导出的 excel 文件中它们不存在。要使 excel 中的项目有条件地可见，您可以（例如）添加两个文本框，如下所示： ![在此处输入图像描述](../Images/e04cce427af7b538e20005c6cc891c8b.png)

然后在第二个文本框（您想在 excel 中隐藏）中设置可见性“可以切换”，用于切换第一个文本框并设置默认状态（在我的情况下它是隐藏，在您的情况下，您可以编写表达式仅隐藏对于excel）。

![在此处输入图像描述](../Images/4c7e7c26e8dd9aa4a36e26affddfee56.png)

然后在excel中你将拥有：

![在此处输入图像描述](../Images/7e7c9da286754a108a5016076fc791fe.png)

*PS。我在打开后展开了这个项目（默认情况下它是折叠的）。*

# oauth - 如何从 Mule 云连接器将 oauth 令牌或 oauthaccesstokeid 传递给 javascript

> ID：14894089
> 
> 赞同：0
> 
> 时间：2013-02-15T11:48:31.677
> 
> 标签：oauth, mule

我在 Mule 中使用了一些使用 OAuth 并使用 authorizre 消息处理器授权连接器的云连接器。使用服务提供商登录后，我可以使用 OauthAccessTokenId 获取访问令牌以供将来调用。

我正在通过 Javascript 与之交互。我有一个登录按钮，可以在 Mule 中运行授权流程。然后我有一个单独的流程来调用 api 方法。但是如何将 oauthaccesstokenid 传递回身份验证流程中的 Javascript 应用程序，以便将其传递回 Mule 以调用 API？

在授权处理器之后，我正在执行 302 重定向回我的 javascript 应用程序并将 oauthaccesstokenid 存储在 cookie 中。这是最好的方法吗？对安全性也有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:40:04.187

*注意：假设您正在谈论 OAuth2。*

您所描述的是[OAuth2 隐式授权](https://www.rfc-editor.org/rfc/rfc6749#section-4.2)很有用的典型场景：使用这种授权类型，访问令牌通过请求片段提供给 Web 浏览器（因此它托管的 JavaScript 代码）。

不过，我不确定 Cloud Connectors 是否支持本机。如果没有，去吃饼干也行。

就安全性而言，与在片段中传递令牌相反，我可以看到的唯一问题是 cookie 将保留在客户端上。这表示这些令牌通常是短暂的（值得检查您收到的令牌的 TTL 是多少），因此攻击面不会很宽。

# c# - 通过接口使用类的含义

> ID：14894092
> 
> 赞同：2
> 
> 时间：2013-02-15T11:48:42.590
> 
> 标签：c#, class, interface

*通过接口使用类而不是直接使用类有什么含义？*

例如，当通过`IList<Int32>`接口而不是`List<Int32>`直接使用类来改变整数列表时。这是否会引入装箱转换、更多类型检查、空值检查、更多间接级别、虚拟调用、减少优化、防止方法内联？如果是这样，我怎样才能减轻其中的一些？

我正在编写一个库，我打算在其中所有集合类都通过它们的接口使用。该库适用于可能希望在高性能环境中使用它的其他开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:57:09.427

## 拳击

`class`AFAIK，如果实现类型是引用（即）类型，则接口不会引入任何额外的装箱。如果实现类型本身是值类型（即 a `struct`），那么当分配给接口类型的变量时，该值类型将被装箱：

```
struct Foo : IFooBar { … }           class Bar : IFooBar { … }
IFooBar foo = new Foo();             IFooBar bar = new Bar();
//          ^                                    ^
//       boxing                              no boxing 
```

这是因为接口类型被视为引用类型。请记住，您*可以*分配`null`给`IFooBar`-typed 变量，但不能分配给`Foo`-typed 变量！

> [**旁注：**如果实现类型是 a `struct`，也许也可以看到[这个问题](https://stackoverflow.com/questions/63671/is-it-safe-for-structs-to-implement-interfaces "结构实现接口是否安全？")。]

## 虚拟调度

但是，实现接口方法的方法在内部的处理方式与虚拟方法类似；即，即使您没有声明实现方法，它们也会像虚拟方法一样在调度表中获得一个槽`virtual`。

不要太担心这个。虚拟方法分派不应该被视为面向对象语言中的问题——这很正常。您不太可能看到由它引起的任何性能问题。

# mongodb - MongoDB：WriteResult.getN() 总是返回 0？

> ID：14894101
> 
> 赞同：12
> 
> 时间：2013-02-15T11:49:14.353
> 
> 标签：mongodb, mongodb-java

根据[javaDoc](http://api.mongodb.org/java/current/com/mongodb/WriteResult.html#getN%28%29)，MongoDB-java`getN()`中的类方法返回操作中更新的文档数。`WriteResult`但它总是返回零，即使文档插入正确。

为什么这样？还是我理解错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-06T14:19:38.260

我的印象是这是正常的 MongoDB 行为，与 Java 驱动程序无关。

我在文档中唯一能找到的[是](http://docs.mongodb.org/manual/reference/command/getLastError/#dbcmd.getLastError)：

> 如果前面的操作是更新或删除操作，getLastError.n 报告更新或删除的文档数。

`insert`既不是 an也不`update`是 a `remove`，`n`似乎没有被指定，并且 0 与任何默认值一样好。您可以在 mongo shell 中轻松检查它：

```
> db.test.insert({_id: 'test'})
> db.getLastErrorObj()
{ "n" : 0, "connectionId" : 7, "err" : null, "ok" : 1 } 
```

除非我弄错了，否则这不是一个真正的问题：问问自己在什么情况下插入会失败（比如连接失败）。我能想到的唯一一个是违反唯一性约束，这将导致异常。所以几乎按照定义，你收到一个`WriteResult`实例就意味着操作成功并且插入了一个文档。

几点注意事项：

*   我之前的论点取决于您`WriteConcern`足够高以至于报告错误。例如，如果您使用`WriteConcern.NONE`，则不会引发任何异常。
*   如果更新文档的数量对您来说是绝对必要的，您可以随时使用`save`而不是`insert`. 不是很干净，但它的行为方式与您似乎期望的一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-15T18:38:39.770

请注意，无论[MongoDB 文档](http://docs.mongodb.org/manual/reference/method/WriteResult/)说明什么，[WriteResult.getN()](http://api.mongodb.org/java/2.12/com/mongodb/WriteResult.html#getN())方法总是返回 0 以使用 Java 驱动程序进行插入，无论插入的对象数量如何。Java驱动2.12.3中设置“n”字段的源码：

```
if (type == INSERT) {
  commandResult.put("n", 0);
} else if (type == REMOVE) {
  commandResult.put("n", bulkWriteResult.getRemovedCount());
} else if (type == UPDATE || type == REPLACE) {
  commandResult.put("n", bulkWriteResult.getMatchedCount() + bulkWriteResult.getUpserts().size());
  if (bulkWriteResult.getMatchedCount() > 0) {
    commandResult.put("updatedExisting", true);
  } else {
    commandResult.put("updatedExisting", false);
  }
  if (!bulkWriteResult.getUpserts().isEmpty()) {
    commandResult.put("upserted", bulkWriteResult.getUpserts().get(0).getId());
  }
} 
```

但是错误是通过异常正确报告的。例如，如果指定的 WriteConcern 至少是 ACKNOWLEDGED，则插入违反唯一索引的文档时将引发 MongoException

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T13:15:33.873

您可能还想查看 [http://docs.mongodb.org/manual/core/write-concern/](http://docs.mongodb.org/manual/core/write-concern/)

默认行为是不使用“安全”写关注

# c++ - 检测到人脸opencv后如何扩展矩形

> ID：14894110
> 
> 赞同：4
> 
> 时间：2013-02-15T11:49:35.927
> 
> 标签：c++, opencv

我写代码，我想如何在检测到人脸后将矩形扩展 `到人的头部和颈部`

 ````
 #include <opencv2/imgproc/imgproc.hpp>  //this code detetced faces ///
    #include <opencv2/objdetect/objdetect.hpp>///////////
    #include <opencv2/highgui/highgui.hpp>
     ////////////////////
    using namespace cv;
    using namespace std;

    int main()
    {

        CascadeClassifier cascade;

        if (!cascade.load("haarcascade_frontalface_alt2.xml"))  //load harcascade xml
            return -1;

         Mat src = imread("11.jpg");  //read image 

        if (src.empty())
            return -1;
    cv::resize(src,src,cv::Size(600,600));  resize image 
        Mat gray;
        cvtColor(src, gray, CV_BGR2GRAY);
        equalizeHist(gray, gray);

        vector<Rect> faces;
        cascade.detectMultiScale(gray, faces, 1.2, 3,0,Size(30,30));

        for (size_t i = 0; i < faces.size(); i++)
        {
     /////////////////////////////
            Rect r = faces[i];
    //////////////////////////////       

              Mat faceROI = gray( faces[i] );
          int x = faces[i].x;
          int y = faces[i].y;
          int h =0.3*y+faces[i].height;
          int w = faces[i].width;
          printf("Orig dimensions after h * w crop 1: %dx%d\n",h,w);
            printf("Orig dimensions after  x* y crop 2: %dx%d\n",x,y);

           rectangle(src,Point (x,y),Point(x + w,y +h),Scalar(255,0,255),1,4,0);
             imshow("mmmmmmmmmmm.jpg",src );  //show image in windows 
        }
    ///////////////////////////////

        waitKey(0);

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-06-15T10:30:47.883

要扩展 OpenCV 人脸矩形，您还可以使用以下运算符（[1](http://docs.opencv.org/modules/core/doc/basic_structures.html?wb48617274=360FE5C1#rect)）进行`cv::Rect`分类

```
//expanding or shrinking a rectangle by a certain amount
cv::Rect += cv::Size
//shifting a rectangle by a certain offset
cv::Rect -= cv::Point 
```

将面部矩形扩大 10% 的示例是

```
cv::Size deltaSize( faces[i].width * 0.1f, faces[i].height * 0.1f ); // 0.1f = 10/100
cv::Point offset( deltaSize.width/2, deltaSize.height/2);
faces[i] += deltaSize;
faces[i] -= offset; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T03:40:44.630

您需要适当调整高度和起始 y 坐标。

简而言之，我觉得盒子​​的高度应该在两侧（顶部和底部）增加 0.3 倍。所以我减去`0.3*h`并`y`添加`0.3*2*h`（即0.6 * h）到`h`。

这只是我粗略的计算。对于微调，您可以针对不同的面进行分析，并得出最适合您目的的测量值。

这是更改后的代码：

```
int x = faces[i].x;
int h_temp = faces[i].height;    // storing original height
int y = faces[i].y - h_temp*0.3; // y is reduced by 0.3*h
int w = faces[i].width;
int h = h_temp*1.6;              // height is increases by 60% 
```

下面是我得到的结果。绿色显示我得到的原件。蓝色是修改后的：

![人脸检测示例](../Images/98bf49f9ed97b0146f5820bd19036de2.png)

请记住，您要选择多少，取决于您。对上述值进行调整以获得所需的结果。`

# ios - 如何在类实现中定义实例变量？

> ID：14894116
> 
> 赞同：-3
> 
> 时间：2013-02-15T11:49:56.330
> 
> 标签：ios, objective-c

如何`@implementation`在 Objective-c 的类中创建实例变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:54:52.667

将它们放在花括号中，如下所示：

```
@implementation {
    id anIvar;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:52:04.583

你没有 - 实例变量是在`@interface`块内定义的。

如果您希望它仅在您的 .m 文件中可见，您可以在`@implementation`

```
@interface MyClass () {
    NSInteger myInteger;
    NSString *myString;
}
@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T11:54:37.407

您可以在实现文件的类扩展中执行此操作：

```
@interface SomeClass () {
    NSInteger _aVariable;
}

@end 
```

或者更好地定义一个属性：

```
@interface SomeClass ()

@property(nonatomic, assign) NSInteger aProperty;

@end 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-15T11:51:58.227

像这样定义一个实例变量：

```
NSMyClass *_nameOfObject; 
```

你应该在你的`@interface`而不是你的`@implementation`

# javascript - Javascript If条件检查窗口加载

> ID：14894121
> 
> 赞同：0
> 
> 时间：2013-02-15T11:50:16.930
> 
> 标签：javascript, function, window, onload

我面临一个js错误。但是我看到的是js完全没问题

```
window.onload = function() {
    var check = 'false';
    if (check == 'true') {
        var disableFlowCheck = ; //this will not come in case of fail
        if (disableFlowCheck && document.getElementById("submitlin")) {
            document.getElementById("submitlin").disabled = true;
        }
    }
} 
```

这看起来很不错。这个条件根本不应该被执行。但我所看到的，执行 if 条件正在执行，这不应该。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:51:28.323

```
var disableFlowCheck = ; //This is syntax Error

// change to 

var disableFlowCheck = "";

// Or 

var disableFlowCheck = true; 
```

注意：您必须将变量分配给某个值，或者只定义您想要的任何类型变量（数组，布尔值）或删除它

# java - Java打印完整的滚动窗格不仅是可见部分

> ID：14894122
> 
> 赞同：3
> 
> 时间：2013-02-15T11:50:17.530
> 
> 标签：java, swing, printing, jpanel, jscrollpane

我有一堂课可以一次打印一个组件。我想打印的东西，我在 JPanel 中分组。因此，我有一个带有 4 个 JScrollPanes（同步的 JScrollPanes）的 JPanel（在 jframe 内以将其显示在屏幕上）。在每个滚动窗格中，我都有一个 JList。我要打印的东西是 JLists 在屏幕上彼此并排。但是，如果列表包含太多元素以至于滚动窗格能够滚动，那么它只会在我希望它打印整个列表的地方打印它的可见部分。我尝试先调整 JPanel 的大小，然后调整 JScrollPanes 的大小，最后调整 JLists 的大小，但它不起作用。

这是我用于调整大小的代码：

```
 int x,y,width,height;

    //jPanel1 setBounds
    x = jPanel1.getBounds().x;
    y = jPanel1.getBounds().y;
    width = jPanel1.getBounds().width;
    height = lm1.getSize() * jList1.getFixedCellHeight() + 20;
    jPanel1.setBounds(x, y, width, height);

    //jList1 setBounds
    x = jList1.getBounds().x;
    y = jList1.getBounds().y;
    width = jList1.getBounds().width;
    height = lm1.getSize() * jList1.getFixedCellHeight();
    jScrollPane1.setBounds(x, y, width, height);
    jList1.setBounds(x, y, width, height);
    jList1.setVisibleRowCount(lm1.getSize());

    //jList2 setBounds
    x = jList2.getBounds().x;
    y = jList2.getBounds().y;
    width = jList2.getBounds().width;
    height = lm2.getSize() * jList2.getFixedCellHeight();
    jScrollPane2.setBounds(x, y, width, height);
    jList2.setBounds(x, y, width, height);
    jList2.setVisibleRowCount(lm2.getSize());

    //jList3 setBounds
    x = jList3.getBounds().x;
    y = jList3.getBounds().y;
    width = jList3.getBounds().width;
    height = lm3.getSize() * jList3.getFixedCellHeight();
    jScrollPane3.setBounds(x, y, width, height);
    jList3.setBounds(x, y, width, height);
    jList3.setVisibleRowCount(lm3.getSize());

    //jList4 setBounds
    x = jList4.getBounds().x;
    y = jList4.getBounds().y;
    width = jList4.getBounds().width;
    height = lm4.getSize() * jList4.getFixedCellHeight();
    jScrollPane4.setBounds(x, y, width, height);
    jList4.setBounds(x, y, width, height);
    jList4.setVisibleRowCount(lm4.getSize());

    PrintUtil.printComponent(jPanel1); 
```

**编辑：**

它部分工作。我可以将列表转换为图像，并且效果很好，但是当我想将它添加到 JPanel 以使一个组件打印出布局时，布局变得非常奇怪！最后一个列表图像添加将始终从 (0,0) 开始，它不应该因为我设置了它的边界。

我制作的代码：

```
 BufferedImage bi1 = componentToImage(jList1, false);
    BufferedImage bi2 = componentToImage(jList2, false);
    BufferedImage bi3 = componentToImage(jList3, false);
    BufferedImage bi4 = componentToImage(jList4, false);

    ImagePanel ip1 = new ImagePanel(bi1);
    ip1.setBounds(20, 20, bi1.getWidth(), bi1.getHeight());

    ImagePanel ip2 = new ImagePanel(bi2);
    ip2.setBounds(30 + bi1.getWidth(), 20, bi2.getWidth(), bi2.getHeight());

    ImagePanel ip3 = new ImagePanel(bi3);
    ip3.setBounds(40 + bi1.getWidth() + bi2.getWidth(), 20, bi3.getWidth(), bi3.getHeight());

    ImagePanel ip4 = new ImagePanel(bi4);
    ip4.setBounds(50 + bi1.getWidth() + bi2.getWidth() + bi3.getWidth(), 20, bi4.getWidth(), bi4.getHeight());

    JLabel jl1 = new JLabel();
    JLabel jl2 = new JLabel();
    JLabel jl3 = new JLabel();
    JLabel jl4 = new JLabel();

    jl1.setBounds(20, 0, bi1.getWidth(), bi1.getHeight());
    jl2.setBounds(30 + bi1.getWidth(), 0, bi2.getWidth(), bi2.getHeight());
    jl3.setBounds(40 + bi1.getWidth() + bi2.getWidth(), 0, bi3.getWidth(), bi3.getHeight());
    jl4.setBounds(50 + bi1.getWidth() + bi2.getWidth() + bi3.getWidth(), 0, bi4.getWidth(), bi4.getHeight());

    jl1.setText(jLabel1.getText());
    jl2.setText(jLabel2.getText());
    jl3.setText(jLabel3.getText());
    jl4.setText(jLabel4.getText());

    JPanel jp = new JPanel();
    jp.add(jl1);
    jp.add(ip1);
    jp.add(jl2);
    jp.add(ip2);
    jp.add(jl3);
    jp.add(ip3);
    jp.add(jl4);
    jp.add(ip4);
    jp.setVisible(true); 
```

# android - 登录验证失败 Android

> ID：14894124
> 
> 赞同：1
> 
> 时间：2013-02-15T11:50:26.740
> 
> 标签：android, database, sqlite, login

尝试在我的 android 屏幕上登录时遇到了一个大问题。我有两个字段需要用户输入电子邮件和密码，然后它应该去检查 sqlite db，如果正确，他们将被导航到主屏幕（登录成功），如果不正确，他们将通过 toast 消息得到通知。我的问题是当我点击登录按钮时，我的应用程序显示“不幸停止工作”我在我的代码中看不到任何错误！请有人帮忙！！我的代码发布在 ***LoginActivity下面**

```
package com.example.finalproject;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class LoginActivity extends Activity implements OnClickListener {

    Button mLogin;
    Button mNewUser;
    Button mShowAll;
    EditText mUsername;
    EditText mPassword;
    SQLiteAdapter mydb = null;
    private String uname;
    private String pass;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        mNewUser = (Button)findViewById(R.id.buttonNewUser);
        mNewUser.setOnClickListener(this);

        mLogin = (Button)findViewById(R.id.buttonLogin);
        mLogin.setOnClickListener(this);

        mShowAll = (Button)findViewById(R.id.buttonShowAll);
        mShowAll.setOnClickListener(this);
    }

    public void onClick(View v) {
        SQLiteDatabase db = new SQLiteAdapter(LoginActivity.this).openToWrite();
        if (v.getId() == R.id.buttonLogin) {
            mUsername = (EditText)findViewById(R.id.Username);
            mPassword = (EditText)findViewById(R.id.Password);

            String uname = mUsername.getText().toString();
            String pass = mPassword.getText().toString();

            if(uname.equals("") || uname == null){
                Toast.makeText(getApplicationContext(), "Username Empty", 
                        Toast.LENGTH_SHORT).show();
            }
            else if(pass.equals("") || pass == null){
            Toast.makeText(getApplicationContext(), "Password Empty", 
             Toast.LENGTH_SHORT).show();
            }
            }

        Cursor c = db.rawQuery("SELECT email FROM MY_USERS_TABLE WHERE email= ? AND password=?", new String[] {uname, pass});
        if(c.moveToFirst()) {
            Toast.makeText(getApplicationContext(), "Success", Toast.LENGTH_SHORT).show();
            Intent main = new Intent(LoginActivity.this, MainMenuActivity.class);
            startActivity(main);
        } 
        else {
            Toast.makeText(getApplicationContext(), "Failed..\nTry Again", Toast.LENGTH_SHORT).show();

        }

    }
} 
```

**SQLite适配器**

```
package com.example.finalproject;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.widget.Toast;

public class SQLiteAdapter {

 public static final String MYDATABASE_NAME = "MY_DEVELOPMENT_PROJECT_DATABASE";
 public static final String MYDATABASE_TABLE = "MY_USERS_TABLE";
 public static final int MYDATABASE_VERSION = 1;
 public static final String KEY_ID = "_id";
 public static final String KEY_NAME = "name";
 public static final String KEY_EMAIL = "email";
 public static final String KEY_PASSWORD = "password";

 private static final String SCRIPT_CREATE_DATABASE =
  "create table " + MYDATABASE_TABLE + " ("
  + KEY_ID + " integer primary key autoincrement, "
  + KEY_NAME + " text not null, "
  + KEY_EMAIL + " text not null, "
  + KEY_PASSWORD + " text not null);";

 private SQLiteHelper sqLiteHelper;
 private SQLiteDatabase sqLiteDatabase;

 private Context context;

 public SQLiteAdapter(Context c){
  context = c;
 }

 public SQLiteAdapter(SQLiteAdapter sqLiteAdapter) {
    // TODO Auto-generated constructor stub
}

public SQLiteDatabase openToRead() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getReadableDatabase();
  return sqLiteDatabase; 
 }

 public SQLiteDatabase openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,
                MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return sqLiteDatabase;
    }
 /*public SQLiteAdapter openToWrite() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getWritableDatabase();
  return this; 
 }*/

 public void close(){
  sqLiteHelper.close();
 }

 public long insert(String name, String email, String password){

  ContentValues contentValues = new ContentValues();
  contentValues.put(KEY_NAME, name);
  contentValues.put(KEY_EMAIL, email);
  contentValues.put(KEY_PASSWORD, password);
  return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
 }

 public int deleteAll(){
  return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
 }

 public Cursor queueAll(){
  String[] columns = new String[]{KEY_ID, KEY_NAME, KEY_EMAIL,KEY_PASSWORD};
  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
    null, null, null, null, null);

  return cursor;
 }

 public class SQLiteHelper extends SQLiteOpenHelper {

  public SQLiteHelper(Context context, String name,
    CursorFactory factory, int version) {
   super(context, name, factory, version);
  }

  @Override
  public void onCreate(SQLiteDatabase db) {
   // TODO Auto-generated method stub
   db.execSQL(SCRIPT_CREATE_DATABASE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   // TODO Auto-generated method stub
  }
 }

} 
```

**注册活动**

```
package com.example.finalproject;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
//import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class RegisterActivity extends Activity {

 EditText inputName, inputEmail, inputPassword;
 Button buttonRegister, buttonDeleteAll;
 TextView login;
 private SQLiteAdapter mySQLiteAdapter;
 ListView listContent;

 SimpleCursorAdapter cursorAdapter;
 Cursor cursor;

   /** Called when the activity is first created. */

@Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.register_activity);

       inputName = (EditText)findViewById(R.id.name);
       inputEmail = (EditText)findViewById(R.id.email);
       inputPassword = (EditText)findViewById(R.id.password);
       buttonRegister = (Button)findViewById(R.id.register);
       //buttonDeleteAll = (Button)findViewById(R.id.showAll);

       listContent = (ListView)findViewById(R.id.contentlist);

       mySQLiteAdapter = new SQLiteAdapter(this);
       mySQLiteAdapter.openToWrite();

       cursor = mySQLiteAdapter.queueAll();
      // String[] from = new String[]{SQLiteAdapter.KEY_ID, SQLiteAdapter.KEY_NAME, SQLiteAdapter.KEY_EMAIL,SQLiteAdapter.KEY_PASSWORD};
       /*int[] to = new int[]{R.id.id, R.id.text1, R.id.text2,R.id.text3};
       cursorAdapter =
        new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
       listContent.setAdapter(cursorAdapter);*/

       buttonRegister.setOnClickListener(buttonAddOnClickListener);
       //buttonShowAll.setOnClickListener(buttonShowAllOnClickListener);
       //addListenerOnRegButton();

       TextView loginScreen = (TextView) findViewById(R.id.login);

       // Listening to login 
       loginScreen.setOnClickListener(TextLoginOnClickListener);
}

TextView.OnClickListener TextLoginOnClickListener
= new TextView.OnClickListener(){

@Override
public void onClick(View arg0) {
    Intent i = new Intent(getApplicationContext(), LoginActivity.class);
    startActivity(i);

}
};

   Button.OnClickListener buttonAddOnClickListener
   = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {

   String data1 = inputName.getText().toString();
   String data2 = inputEmail.getText().toString();
   String data3 = inputPassword.getText().toString();

   boolean invalid = false;

    if(data1.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Name Missing", Toast.LENGTH_SHORT).show();
    }else if(data2.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Email ID Missing", Toast.LENGTH_SHORT).show();
    }else if(data3.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Password Missing", Toast.LENGTH_SHORT).show();
    }

    if(invalid == false){
        mySQLiteAdapter.insert(data1, data2, data3);
        updateList();
           Toast.makeText(RegisterActivity.this, "You are now registered",
                   Toast.LENGTH_SHORT).show();

        Intent i_register = new Intent(RegisterActivity.this, LoginActivity.class);
        startActivity(i_register);

        inputName.setText("");
        inputEmail.setText("");
        inputPassword.setText("");
        finish();
    }   

  }

   };

  /*Button.OnClickListener buttonShowAllOnClickListener1
   = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
      Intent i = new Intent(RegisterActivity.this, MainMenuActivity.class);
        startActivity(i);
        finish();
  }

   };

 @Override
 protected void onDestroy() {
  // TODO Auto-generated method stub
  super.onDestroy();
  mySQLiteAdapter.close();
 }*/

 private void updateList(){
  //cursor.requery();
   }

} 
```

**日志猫**

```
02-04 02:55:56.085: E/AndroidRuntime(17402): FATAL EXCEPTION: main
02-04 02:55:56.085: E/AndroidRuntime(17402): java.lang.IllegalArgumentException: the bind value at index 2 is null
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:164)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.database.sqlite.SQLiteProgram.bindAllArgsAsStrings(SQLiteProgram.java:200)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at com.example.finalproject.LoginActivity.onClick(LoginActivity.java:62)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.view.View.performClick(View.java:4202)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.view.View$PerformClick.run(View.java:17340)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.os.Handler.handleCallback(Handler.java:725)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.os.Looper.loop(Looper.java:137)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at java.lang.reflect.Method.invoke(Method.java:511)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-04 02:55:56.085: E/AndroidRuntime(17402):    at dalvik.system.NativeStart.main(Native Method)
02-04 02:55:56.555: D/dalvikvm(17402): GC_CONCURRENT freed 261K, 11% free 3060K/3436K, paused 126ms+33ms, total 459ms
02-04 03:00:56.444: I/Process(17402): Sending signal. PID: 17402 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:05:05.773

您的问题出现在这一行：

`db.rawQuery("SELECT email FROM MY_USERS_TABLE WHERE email= ? AND password=?", new String[] {uname, pass})`

发生的情况是，**即使**您的`if`语句输出 Toast 表示编辑文本为空，此部分也会被执行，因此`uname`为`pass`空，这会给您带来`IllegalArgumentException: the bind value at index 2 is null`错误，因为您正在传递 SQL 函数空值。

简单修复：仅在值不为空或不为空时才执行代码的底部：

```
public void onClick(View v) {
    SQLiteDatabase db = new SQLiteAdapter(LoginActivity.this).openToWrite();
    if (v.getId() == R.id.buttonLogin) {
        mUsername = (EditText)findViewById(R.id.Username);
        mPassword = (EditText)findViewById(R.id.Password);

        String uname = mUsername.getText().toString();
        String pass = mPassword.getText().toString();

        if(uname.equals("") || uname == null){
            Toast.makeText(getApplicationContext(), "Username Empty", 
            Toast.LENGTH_SHORT).show();
        }
        else if(pass.equals("") || pass == null){

            Toast.makeText(getApplicationContext(), "Password Empty", 
            Toast.LENGTH_SHORT).show();

        } else {

            Cursor c = db.rawQuery("SELECT email FROM MY_USERS_TABLE WHERE email= ? AND password=?", new String[] {uname, pass});
            if(c.moveToFirst()) {
                 Toast.makeText(getApplicationContext(), "Success", Toast.LENGTH_SHORT).show();
                 Intent main = new Intent(LoginActivity.this, MainMenuActivity.class);
                 startActivity(main);
            }  else {
                 Toast.makeText(getApplicationContext(), "Failed..\nTry Again", Toast.LENGTH_SHORT).show();

            }
       } 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:59:03.640

该线程可能会对您有所帮助... [IllegalArgumentException：索引 1 处的绑定值为 null](https://stackoverflow.com/questions/4572090/android-sql-illegalargumentexception-the-bind-value-at-index-1-is-null)

检查您的 selArgs 是否不为空 ..

# java - Java - 链表存储困难

> ID：14894125
> 
> 赞同：1
> 
> 时间：2013-02-15T11:50:27.723
> 
> 标签：java, indexing, linked-list, queue

我有一个包含链接列表数据结构的程序来存储自定义 TCP 数据包。

测试程序读入一个数据包，将其添加到链表队列中，并立即打印数据包值（时间戳值）以供确认。这个过程在一个while循环中重复10次，所以Linked List队列中有10个包。

问题在于在读入所有数据包后检查队列值。问题是只显示最后一个读入的数据包的值，尽管知道有 9 个其他数据包具有不同的值（假设）在队列。

如果有人能帮助我理解这个看似黑魔法，我将不胜感激。

```
public void readPackets() throws IOException {
    int counter = 1;

    while(counter < 10){
        packet = con.fillWIMPacket(packet);
        packetQueue.add(packet); 
        System.out.println("Packet " + counter + " added to Queue");
        System.out.println("Packet " + counter + " " + packet.toString());
        counter++;
    } 
}

public void printPacketValues(){

    System.out.println("Packet Queue size is " + packetQueue.size());

    for(int i = 0; i < packetQueue.size(); i++){
        System.out.println("Packet " + i + ": " + packetQueue.get(i));
    }

} 
```

我应该澄清第一个 readPackets() 的 println() 方法以正确的顺序显示数据。但是，printPacketValues() 的 println() 只是将最后一个数据包的值显示了 10 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:55:46.143

```
while(counter < 10){
    packet = new PacketType(); //change here and try once.
    packet = con.fillWIMPacket(packet);
    packetQueue.add(packet); 
    System.out.println("Packet " + counter + " added to Queue");
    System.out.println("Packet " + counter + " " + packet.toString());
    counter++;
} 
```

# c - 带有clang的多个源文件的AST

> ID：14894129
> 
> 赞同：11
> 
> 时间：2013-02-15T11:50:39.577
> 
> 标签：c, clang, static-analysis, abstract-syntax-tree

我正在使用 clang 进行过程间数据流分析。目前我正在使用 libtooling 来解析源文件并调用 AST 访问者。问题是如何为多个 .c 文件创建一个 AST？

我尝试使用 ASTImport 类，但它不支持某些 AST 节点的导入。此外，当我创建和操作 CompilerIstance 并且它在析构函数中崩溃时，我做错了。

一个非常相似的选项是 ATImportAction，但我不太清楚在这种情况下应该将哪些命令行参数传递给 ClangTool。

第三个选项是为每个 .c 文件创建 ASTUnits 并在每个文件中查找定义，目前尚不清楚如何找到用户定义类型（例如记录）之间的对应关系。在 ASTImport 他们使用 IsStructurallyEquivalent() 函数，但它是在匿名命名空间中声明的，所以我只能将所有这些代码复制到我的程序中。而且它再次支持并非所有的 AST 节点。

从互联网这个链接[http://lists.cs.uiuc.edu/pipermail/cfe-dev/2012-August/023865.html](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2012-August/023865.html)似乎是最合适的，但对我来说，解决方案的技术细节尚不清楚。

欢迎任何建议。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-24T18:27:17.167

我试图做类似的事情。不过，我并没有尝试创建单个 AST。我正在解析多个 AST 并尝试自己映射这些函数。我正在使用 AST 匹配器来获取函数调用，然后在其他 AST 中检查它们。

我正在使用 compile_commands.json 文件来提供源文件列表。OptionsParser.getCompilations().getAllFiles() 可以获取compile_commands.json中指定的所有源文件。

当我们创建一个 clangTool 并使用我们的匹配器在该工具上运行一个 frontendAction 时，它会在所有源文件中搜索匹配项。

可能有更优化的方法来做到这一点。如果有人知道，请指出。

# php - PHP：电子邮件仅适用于某些电子邮件客户端

> ID：14894130
> 
> 赞同：1
> 
> 时间：2013-02-15T11:50:40.840
> 
> 标签：php, codeigniter, email, ion-auth

我正在创建一个使用 Codeigniter 和 Ion Auth Library 的站点。

我已经设置了一个注册/登录/忘记密码，除了忘记密码设置的问题之外，所有这些都可以工作。

如果用户的邮箱地址使用hotmail、yahoo、gmail等，他们收到的邮件正常，可以重置密码和数据库中的数据更改。

我在 Outlook 和 Mail 中收到这封电子邮件的个人域电子邮件地址有问题，所以它看起来可能与 Exchange 有关？

我还在具有 Outlook 的计算机上启用了日志设置，并且在测试发送电子邮件时没有记录任何内容，因此它不会阻止电子邮件。

现在我有一个包含电子邮件配置设置的数组，我不确定它是否与主机、协议、标题有关？！或任何其他设置，但我将在下面提供一些我所拥有的信息。如果有人有任何信息、链接、片段或想法，这将是一个很大的帮助。

通过使用 Ion Auth，我只是将代码保留在原来的位置，并将其更改为我在配置文件中的设置：

**配置**

```
 $config['use_ci_email'] = FALSE; // Send Email using the builtin CI email class, if false it will return the code and the identity
    $config['email_config'] = array(
        'protocol'=> 'mail',
        'mailtype' => 'html',
        'charset' =>'utf-8',
        'smpt_host' =>'smpt.url.com',
        'smpt_user'=> 'ssl://smtp.live.com',
        'smtp_port' => '25',
        'validate' => TRUE,
        'priority' => 1

    ); 
```

**忘记密码控制器**：

```
//forgot password
    function forgot_password() {

        $this->form_validation->set_rules('email', 'Email Address', 'required');
        if ($this->form_validation->run() == false) {

            //setup the input
            $this->data['email'] = array('name' => 'email',
                'id' => 'email',
            );

            if ( $this->config->item('identity', 'ion_auth') == 'username' ){
                $this->data['identity_label'] = 'Username';
            }else{
                $this->data['identity_label'] = 'Email';
            }

            //set any errors and display the form
            $this->data['message'] = (validation_errors()) ? validation_errors() : $this->session->flashdata('message');
            $this->_render_page('forgot_password', $this->data);
        }else{
            // get identity for that email
            $config_tables = $this->config->item('tables', 'ion_auth');
            $identity = $this->db->where('email', $this->input->post('email'))->limit('1')->get($config_tables['users'])->row();

            //run the forgotten password method to email an activation code to the user
            $forgotten = $this->ion_auth->forgotten_password($identity->{$this->config->item('identity', 'ion_auth')});

            if ($forgotten) {
                $this->session->set_flashdata('message', $this->ion_auth->messages());
                redirect("login", 'refresh'); //we should display a confirmation page here instead of the login page
            }else{
                $this->session->set_flashdata('message', $this->ion_auth->errors());
                redirect("forgot_password", 'refresh');
            }
        }
    }

    function _get_csrf_nonce() {
        $this->load->helper('string');
        $key = random_string('alnum', 8);
        $value = random_string('alnum', 20);
        $this->session->set_flashdata('csrfkey', $key);
        $this->session->set_flashdata('csrfvalue', $value);

        return array($key => $value);
    } 
```

**忘记密码的库函数：**

```
/**
     * forgotten password feature
     **/
    public function forgotten_password($identity)    //changed $email to $identity
{
        if ( $this->ion_auth_model->forgotten_password($identity) )   //changed
        {
            // Get user information
            $user = $this->where($this->config->item('identity', 'ion_auth'), $identity)->users()->row();  //changed to get_user_by_identity from email

            if ($user)
            {
                $data = array(
                    'identity'      => $user->{$this->config->item('identity', 'ion_auth')},
                    'forgotten_password_code' => $user->forgotten_password_code
                );

                if(!$this->config->item('email_config', 'ion_auth'))
                {
                    $this->set_message('forgot_password_successful');
                    return $data;
                }
                else
                {
                    $message = $this->load->view($this->config->item('email_templates', 'ion_auth').$this->config->item('email_forgot_password', 'ion_auth'), $data, true);
                    $this->email->clear();
                    $this->email->from($this->config->item('admin_email', 'ion_auth'), $this->config->item('site_title', 'ion_auth'));
                    $this->email->to($user->email);
                    $this->email->subject($this->config->item('site_title', 'ion_auth') . ' - ' . $this->lang->line('email_forgotten_password_subject'));
                    $this->email->message($message);

                    if ($this->email->send())
                    {
                        $this->set_message('forgot_password_successful');
                        return TRUE;
                    }
                    else
                    {
                        $this->set_error('forgot_password_unsuccessful');
                        return FALSE;
                    }
                }
            }
            else
            {
                $this->set_error('forgot_password_unsuccessful');
                return FALSE;
            }
        }
        else
        {
            $this->set_error('forgot_password_unsuccessful');
            return FALSE;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T18:44:12.890

此时我也遇到了同样的问题。这是我的解决方案，基于此论坛帖子，它确实帮助我理解了这个错误。

[http://ellislab.com/forums/viewreply/785297/](http://ellislab.com/forums/viewreply/785297/)

就我而言，问题是我使用存储库中的语言文件对 IonAuth 进行多语言设置。在德语语言文件中，您会发现“email_forgotten_password_subject”语言行的特殊字符“ü”。

Codeigniter 邮件类未使用主题配置中的编码。所以 specialchar 编码错误，出现 smtp_mailer 错误。

我创建了一个文件 application/libraries/MY_Email.php 以将使用的主题设置器方法与此内容挂钩：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Email extends CI_Email
{
    /**
     * Set Email Subject
     *
     * @access    public
     * @param    string
     * @return    void
     */
    function subject($subject)
    {
        $subject = '=?'. $this->charset .'?B?'. base64_encode($subject) .'?=';
        $this->_set_header('Subject', $subject);
    }
} 
```

现在 Mailclass 正在以正确的方式对主题进行编码，我们都进入周末喝一些啤酒。

我希望我的解决方案与您的问题相匹配。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:42:32.677

我不知道您需要的确切配置。无论这里是我自己的**send_mail()**函数与**CI 电子邮件库**一起使用。它可能会帮助你。但是我总是使用 ION AUTH，而且我在发送邮件时从未遇到过问题。

```
/*
 * Send an email. 
 * $info array must have following information :
 * $info = array(
 *      'to_email'      => 
 *      'to_name'       =>
 *      'from_email'    =>
 *      'from_name'     =>
 *      'subject'       =>
 *      'body'          =>
 *      'reply_to'      =>
 * )
 */
if ( ! function_exists('send_email'))
{
    function send_email($info)
    {
        $CI = & get_instance();

        // ==========================================================================================
        $CI->load->library('email');

        $config['protocol'] = 'sendmail';
        $config['charset'] = 'iso-8859-1';
        $config['wordwrap'] = TRUE;
        $config['mailtype'] = 'html';

        $CI->email->initialize($config);

        $CI->email->clear();
        $CI->email->set_newline("\r\n");
        // =========================================================================================

        $CI->email->from($info['from_email'], $info['from_name']);
        $CI->email->to($info['to_email'], $info['to_name']);
        $CI->email->cc('mahbub.kuet@gmail.com', 'MAHBUB');

        $CI->email->subject($info['subject']);
        $CI->email->message($info['body']);

        $CI->email->reply_to($info['reply_to'], "No reply");

        if($CI->email->send()) return TRUE;

        return FALSE;   
    }    
} 
```

# c# - Winforms WebBrowser 控件 URL 参数

> ID：14894131
> 
> 赞同：2
> 
> 时间：2013-02-15T11:50:45.240
> 
> 标签：c#, winforms, browser

我使用 Visual Studio 2010。我编写 C# windows 应用程序。我不会在这个应用程序中使用 WebBrowser 组件。我有一个问题。我在具有名称 URL 的 WebBrowser 参数中写了一些地址。结果 WebBrowser 重定向到另一个 http 地址。这个新地址包含带有一些参数的 http 字符串。像这样：

[http://oauth.vk.com/blank.html#access_token=9e4b021cb7dd54c795ef1c106f6c0063ef5bc4491f3e6c9e518728b969df58576ebd80dc283e1c7068ac5&expires_in=0&user_id=66476428](http://oauth.vk.com/blank.html#access_token=9e4b021cb7dd54c795ef1c106f6c0063ef5bc4491f3e6c9e518728b969df58576ebd80dc283e1c7068ac5&expires_in=0&user_id=66476428)

我想从这个名为 access_token 的新地址中读取参数。但是当我试图获取 WebBrowser 组件的参数 URL 时（像这样

```
MessageBox.Show(webBrowser1.Url.ToString()); 
```

) 然后我只读取这个字符串：

[http://oauth.vk.com/blank.html](http://oauth.vk.com/blank.html)

如何读取 access_token 参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T11:57:56.760

尝试使用`webBrowser1.Url.Query`获取 uri 的查询字符串部分，然后解析字符串以获取 access_token 部分。

您可以通过像这样向 System.Web 添加引用来使用[HttpUtility](http://msdn.microsoft.com/en-gb/library/ms150046.aspx)

```
var q = HttpUtility.ParseQueryString(webBrowser1.Url.Query);
var access_token = q["access_token"]; 
```

# ajax - 使用 javascript 在 prestashop 购物车中同时添加多个产品很热门？

> ID：14894134
> 
> 赞同：1
> 
> 时间：2013-02-15T11:50:54.337
> 
> 标签：ajax, prestashop, cart

可以使用 ajaxCart.add 函数添加单个产品，但目前不允许一次性添加多个产品。考虑到我正在构建批量产品订单部分，我必须进行几次 ajax 调用来更新不可取的购物车。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:15:02.903

检查 ajax-cart.js 中的函数。它只接受单个产品 ID 作为函数调用的一部分。您将不得不重写此功能并自己实现批量添加，因为您无法使用 PrestaShop 的默认代码实现它。

```
add : function(idProduct, idCombination, addedFromProductPage, callerElement, quantity, whishlist){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T09:25:22.453

您可以通过在 jQuery 中添加工厂函数或在 Prestashop 中使用数量属性并使其在 jQuery 中计算来实现。

# c# - 从库调用时如何抛出异常？

> ID：14894151
> 
> 赞同：0
> 
> 时间：2013-02-15T11:52:04.927
> 
> 标签：c#, exception-handling

我正在为 Fluent NHibernate 中的 AutoMapping 定义一个约定。在这个约定中，我抛出了一个异常：

```
public void Apply(IManyToManyCollectionInstance instance){
  ...
  if(<error>)
    throw new MappingException("Invalid Mapping");

  <doSomeStuff>
} 
```

在另一个类中，我初始化配置，导致上面的代码被执行：

```
public void init(){
  try{
    SessionFactory = configuration.BuildSessionFactory(); // Apply(...) will be called here
  }
  catch (MappingException ex)
  {
    <catchError>
  } 
```

当`<error>`为真时，`<doSomeStuff>`VisualStudio 会突出显示，并警告我“用户代码未处理 MappingException”。

为什么直到 才抛出异常`<catchError>`？

Fluent NHibernate 库由 NuGet 包管理器添加。如果这是未转发异常的原因，我如何将 MappingException 发送到`<catchError>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:56:29.100

这种行为的原因很可能是您检查了以下选项：调试 -> 异常 -> “公共语言运行时异常”的“抛出”列。

如果您按 F5 或以其他方式继续调试，代码最终将达到`<catchError>`.

# vba - 用于检查工作表是否存在的函数的 VBA 错误处理

> ID：14894152
> 
> 赞同：3
> 
> 时间：2013-02-15T11:52:08.793
> 
> 标签：vba, error-handling

我有一个函数可以添加一个工作表并重命名它，但首先检查该名称的工作表是否已经存在。为此，我在这里使用了相当广泛的功能 -

```
Function WorksheetExists(ByVal WorksheetName As String) As Boolean

    On Error Resume Next ' Set to Resume Next as don't want to end macro if this fails
    WorksheetExists = (Sheets(WorksheetName).Name <> "")
    On Error GoTo 0

End Function 
```

我的问题是我已经`On Error GoTo error_exit`在调用此函数的父子中进行了设置，因此`On Error GoTo 0`在检查工作表是否存在后会取消该调用。

我已经尝试`On Error GoTo error_exit`过此功能，但出现以下错误 -

> 编译错误：未定义标签

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:58:37.010

当您退出 Function 时，`WorksheetExists`您的错误范围会自动恢复到以前的情况。您无需执行任何操作即可`On Error Goto error_exit`在调用子/函数中恢复。

有趣的是，如果您从此函数中删除错误处理并且具有传递名称的工作表不存在，您的代码将在调用错误处理标签上恢复执行（即在调用代码中的 error_exit: 标签处） )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T17:13:18.417

我想你的意思是不使用大多数程序员不喜欢的 On Error Resume Next，这也意味着在调试期间你不能使用“Break On All Errors”来让代码停止死（Tools->Options->General->Error Trapping->Break on All Errors）。

对我来说，一种解决方案是将任何 On Error Resume Next 埋入已编译的 DLL 中，在过去，这将是 VB6。今天你可以使用 VB.NET，但我选择使用 C#。

如果您可以使用 Visual Studio，那么这里有一些来源。该模式类似于 C# 的 TryParse，它返回表示成功的布尔值，但也在返回参数（或 C# 用语中的 out 参数）中返回结果

这是 C# 源代码，启动一个名为 BuryVBAErrorsCS 的类库，设置 ComVisible(true) 添加对 COM 库“Microsoft Excel n”的引用，单击 Register for Interop。

```
using Microsoft.Office.Interop.Excel;
using System;
using System.Runtime.InteropServices;

namespace BuryVBAErrorsCS
{
    // Requires adding a reference to COM library Microsoft Excel 
    // In AssemblyInfo.cs set ComVisible(true);
    // In Build tab check 'Register for Interop'
    public interface ICollectionItemTry
    {
        bool SheetsItemTry(Sheets worksheetsCol, object vItem, out Worksheet result);
        bool WorkbooksItemTry(Workbooks workbooksCol, object vItem, out Workbook result);
    }

    [ClassInterface(ClassInterfaceType.None)]
    [ComDefaultInterface(typeof(ICollectionItemTry))]
    public class CCollectionItemTry : ICollectionItemTry
    {
        public bool SheetsItemTry(Sheets worksheetsCol, object vItem, out Worksheet result)
        {
            result = null;
            try
            {
                result = worksheetsCol.Item[vItem];
                return true;
            }
            catch (Exception)
            { }
            return false;
        }

        public bool WorkbooksItemTry(Workbooks workbooksCol, object vItem, out Workbook result)
        {
            result = null;
            try
            {
                result = workbooksCol.Item[vItem];
                return true;
            }
            catch (Exception)
            { }
            return false;
        }
    }
} 
```

对于 Excel 客户端 VBA 代码，这里有一些源代码

```
Sub TestCCollectionItemTry()
    Dim o As BuryVBAErrorsCS.CCollectionItemTry
    Set o = New BuryVBAErrorsCS.CCollectionItemTry

    Dim ws As Excel.Worksheet
    Debug.Assert Not o.SheetsItemTry(ThisWorkbook.Sheets, "Sheet3366", ws)
    Debug.Assert ws Is Nothing

    '* sanity check
    Set ws = ThisWorkbook.Worksheets.Item("Sheet1")
    Debug.Assert Not ws Is Nothing

    '* assuming Sheet1 exists
    Set ws = Nothing
    Debug.Assert o.SheetsItemTry(ThisWorkbook.Sheets, "Sheet1", ws)
    Debug.Assert Not ws Is Nothing

    Set ws = Nothing
    Debug.Assert o.SheetsItemTry(ThisWorkbook.Sheets, 1, ws)
    Debug.Assert Not ws Is Nothing

    '* workbooks
    Dim wb As Excel.Workbook
    Debug.Assert o.WorkbooksItemTry(Application.Workbooks, 1, wb)
    Debug.Assert Not wb Is Nothing

    Set wb = Nothing
    Debug.Assert o.WorkbooksItemTry(Application.Workbooks, ThisWorkbook.Name, wb)
    Debug.Assert Not wb Is Nothing

    Set wb = Nothing
    Debug.Assert Not o.WorkbooksItemTry(Application.Workbooks, "BonzoDogDoodah.xls", wb)
    Debug.Assert wb Is Nothing

End Sub 
```

**注意 WELL 传入**Sheets 集合而不是 Worksheets 集合。

# asp.net - Yahoo.Yui.Compressor.Build.MsBuild.dll。无法加载文件或程序集“Yahoo.Yui.Compressor”

> ID：14894157
> 
> 赞同：6
> 
> 时间：2013-02-15T11:52:22.293
> 
> 标签：asp.net, asp.net-mvc, yui-compressor

我正在使用[Yahoo.Yui.Compressor.Build.MsBuild](http://nuget.org/packages/YUICompressor.NET.MSBuild/)来压缩`css`和`javascript`文件。我已经安装了 Yahoo.Yui.Compressor.Build.MsBuild 2.2 并且 xml 文件的格式是

```
 <?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/MsBuild/2003">
  <UsingTask
      TaskName="CompressorTask"
      AssemblyFile="..\..\lib\yui\Yahoo.Yui.Compressor.Build.MsBuild.dll" />

  <PropertyGroup>
    <JavaScriptOutputFile Condition=" '$(JavaScriptOutputFile)'=='' ">..\scripts-min\myfile.min.js</JavaScriptOutputFile>
  </PropertyGroup>

  <Target Name="MyTaskTarget">

    <ItemGroup>

<JavaScriptFiles Include="$(SourceLocation)..\scripts\myfile.js"/>

</ItemGroup>
<CompressorTask
    CssFiles="@(CssFiles)"
    DeleteCssFiles="false"
    CssOutputFile="$(CssOutputFile)"
    CssCompressionType="YuiStockCompression"
    JavaScriptFiles="@(JavaScriptFiles)"
    ObfuscateJavaScript="True"
    PreserveAllSemicolons="False"
    DisableOptimizations="Nope"
    EncodingType="Default"
    DeleteJavaScriptFiles="false"
    LineBreakPosition="-1"
    JavaScriptOutputFile="$(JavaScriptOutputFile)"
    LoggingType="ALittleBit"
    ThreadCulture="en-au"

            />
</Target>

</Project> 
```

当我构建代码时，它显示以下错误

```
 Error 18  The "CompressorTask" task could not be loaded from the assembly D:\Projects\YUI\..\..\lib\yui\Yahoo.Yui.Compressor.Build.MsBuild.dll. Could not load file or assembly 'Yahoo.Yui.Compressor, Version=2.2.0.0, Culture=neutral, PublicKeyToken=null'or one of its dependencies. The system cannot find the file specified. Confirm that the <UsingTask> declaration is correct, that the assembly and all its dependencies are available, and that the task contains a public class that implements Microsoft.Build.Framework.ITask. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T21:41:29.503

我刚遇到同样的问题...

看来`Yahoo.Yui.Compressor.dll`需要与`Yahoo.Yui.Compressor.Build.MsBuild.dll`. 其他依赖项可能也是如此，例如 EcmaScript.NET.dll 和 Iesi.Collections.dll。

您可以将内容移动到 \lib\yui\ 目录，以便它们彼此并排放置，或者您可以引用 bin 文件夹中的程序集。

如果您决定引用 bin 文件夹中的程序集，则可能必须使用构建后事件来触发压缩，而不是预构建事件。

# ruby-on-rails - 继承的资源和 Draper

> ID：14894171
> 
> 赞同：1
> 
> 时间：2013-02-15T11:53:34.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, inherited-resources, draper

如何将[Draper](https://github.com/drapergem/draper)与[继承的资源](https://github.com/josevalim/inherited_resources)一起使用？

换句话说，如何`#decorate`为每个资源调用method()？例如`@posts`对于`#index`，`@post`对于`#show`？

我想过`default_scope`，但是与 Draper 相关的所有内容都需要在控制器中，而不是在模型中，恕我直言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T13:01:42.507

您可以在 Draper 的 Github 中查看此讨论：

[https://github.com/drapergem/draper/issues/99](https://github.com/drapergem/draper/issues/99)

# facebook - Facebook X 框架选项和 IIS 6

> ID：14894172
> 
> 赞同：0
> 
> 时间：2013-02-15T11:53:35.757
> 
> 标签：facebook, x-frame-options

我需要从位于最顶层为 Facebook 创建的页面上的锚点打开一个 URL。做了一些研究，我发现新的 X-Frame-Options 限制正在阻止此操作，并且可能的解决方法是允许在请求者级别进行访问，即。我的应用程序。

该应用程序通过 IIS 6 托管，因此我可以轻松添加所需的自定义标头 X-Frame-Options ALLOW-FROM [http://www.mywebsite.com/](http://www.mywebsite.com/)，但是，尝试单击时仍然收到拒绝消息我的页面中的链接。

我无法升级到更新版本的 IIS，因为营销材料已经发布。有没有其他方法可以解决这个问题，还是我在错误的位置添加了 X-Frame-Options？

另外，我的两个锚点中都有 target="_top" 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:00:10.517

> 我需要从位于最顶层为 Facebook 创建的页面上的锚点打开一个 URL。做了一些研究，我发现新的 X-Frame-Options 限制阻止了这个动作

不，这是相反的方式 - X-Frame-Options 标头的作用是限制文档*在*任何类型的框架环境中显示。

> 并且可能的解决方法是允许在请求者级别进行访问，即。我的应用程序。

*不可以。响应者*，即传递资源的 Web 服务器，必须设置该标头来控制文档可以显示或不显示的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T17:35:28.063

根据我的经验，请考虑以下场景： 域 A：您的域 域 B：Facebook

您在 IIS 中的 HTTP 响应标头规则（假设您使用的是 IIS）将是： 名称：X-Frame-Options 值：ALLOW-FROM [http://www.facebook.com](http://www.facebook.com)

这将允许 facebook 托管一个 iFrame，其中包含您的内容。iFrame 的父级是 facebook.com，这就是您必须使用这种方法的原因。如果您在 ALLOW-FROM 值中提供的主机标头与托管域相同，则将该值设置为 SAMEORIGIN。

# iphone - 如何显示两个同名但号码不同的联系人

> ID：14894173
> 
> 赞同：0
> 
> 时间：2013-02-15T11:53:41.187
> 
> 标签：iphone, xcode

我正在使用这串代码，通过它我正在检查如果一个联系人有 2 个号码，那么他们将显示 2 个同名但号码不同的联系人.. 但这段代码有时无法正确获取数据

```
self.contacts = [ABContactsHelper personalSorting];
 NSString *emailAre;
   for (int i=0; i< [self.contacts count]; i++)
    {
        ABContact *contObj = [self.contacts objectAtIndex:i];        
        if([contObj.emailDictionaries count] >=1)
            emailAre = [[contObj.emailDictionaries objectAtIndex:0]objectForKey:@"value"];
           // emailAre = @"";
        else
            emailAre = @"";
        for (int j=0; j< [contObj.phoneDictionaries  count]; j++) 
        {
            if([contObj.phoneDictionaries count] != 0)
            {
                if([[contObj.phoneDictionaries objectAtIndex:j] count] >= 1)
                {
                    NSLog(@"***************************************");
                    NSLog(@"contact Name %@",contObj.firstname);
                    NSLog(@"contact Number %@",[[contObj.phoneDictionaries objectAtIndex:j]objectForKey:@"value"]);
                    NSLog(@"***************************************");

                    NSString *phones = [[contObj.phoneDictionaries objectAtIndex:j]objectForKey:@"value"];

                    CFErrorRef  anError = NULL;
                    ABRecordRef aRecord = ABPersonCreate(); 
                    // Set the record values
                    ABRecordSetValue(aRecord, kABPersonFirstNameProperty, 
                                     contObj.firstname, &anError); 

                     ABMutableMultiValueRef multiTelephone = ABMultiValueCreateMutable(kABMultiStringPropertyType);
                     ABMultiValueAddValueAndLabel(multiTelephone, phones, kABPersonPhoneMainLabel, NULL);

                     ABRecordSetValue(aRecord, kABPersonPhoneProperty, multiTelephone, &anError);

                    /// Image
                    NSData *dataRef = UIImagePNGRepresentation(contObj.image);

                    ABPersonSetImageData(aRecord, (CFDataRef)dataRef, &anError);
                    /// Image

                     ABMutableMultiValueRef multiEmail = ABMultiValueCreateMutable(kABMultiStringPropertyType);

                     ABMultiValueAddValueAndLabel(multiEmail, emailAre, kABWorkLabel, NULL);

                     ABRecordSetValue(aRecord, kABPersonEmailProperty, multiEmail, &anError);

                     ABContact *newContract = [ABContact contactWithRecord:aRecord]; 

                    [dup addObject:newContract];
                }

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:08:11.140

按着这些次序：

1.  以与检索地址簿数据相同的方式检索地址簿数据。然后
2.  制作一个联系人数组（其中包含姓名字典和联系人号码）
3.  使用重复的用户名数据在单独的索引中添加每个联系人编号
4.  现在将此联系人数据填充到`tableView`

# compilation - CUDA C 应用程序的分布式编译（类似于 distcc，但支持 nvcc 编译器）

> ID：14894176
> 
> 赞同：4
> 
> 时间：2013-02-15T11:53:49.960
> 
> 标签：compilation, cuda, gpgpu, distcc

**`nvcc`有没有一种工具可以使用 CUDA C（其中编译器**是编译链的一部分）来加速和分发 GPGPU 程序的编译，例如`distcc`+ `ccache`（或派生工具和包装器，如 distcc-pump、ccontrol、Icecream (IceCC) 或 DMUCS） C/C++ 和 GCC 编译器？

或者，是否可以将 distcc 配置为与 nvcc 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:29:37.957

不幸的是，我认为让 distcc 与非 gcc 编译器一起工作一点也不简单。这并非不可能，只是很麻烦，因为您必须修改 distcc 实现以了解新编译器的选项，如[distcc FAQ](http://distcc.googlecode.com/svn/trunk/doc/web/faq.html)中所述。

另一种方法是使用 Electric Make 之类的东西，它以大致相同的方式（分布式和并行化）解决相同的问题（加速构建），但在构建工具而不是编译器级别。这意味着它与您使用的特定编译器完全无关。[您可以从http://www.electric-cloud.com/eade](http://www.electric-cloud.com/eade)获得免费版本。

*免责声明：我是 Electric Make 的首席架构师*

# .htaccess - 使用 .htaccess 重定向更新缓存文件的请求

> ID：14894179
> 
> 赞同：0
> 
> 时间：2013-02-15T11:54:08.137
> 
> 标签：.htaccess, file-rename

一个客户稍微改变了他们的品牌，所以我需要更新 CSS 和 favicon。特别是网站图标似乎被非常强烈地缓存了，因此，为了阻止客户认为工作尚未完成，我想在 .htaccess 中添加一条规则，指示类似...

*“接受 /favicon.ico 的请求，而不是提供 /favicon2.ico”*

...如果可能的话，还有类似的 CSS 规则。

我很确定我以前见过这样做，但我没有记下它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:19:50.757

重定向不会帮助您处理客户端根本不向服务器发出请求的缓存请求。最好的解决方案是更改您的 HTML 页面并将带有版本号的查询字符串添加到您的网站图标和其他资源：

```
<link rel="shortcut icon" href="/favicon.ico?v=1" />
<link rel="stylesheet" type="text/css" href="/style.css?v=1" /> 
```

然后，您可以在资源更改时更新版本号。

# date - 通过 OleDb 从 xlsx 文件中读取日期字段

> ID：14894190
> 
> 赞同：1
> 
> 时间：2013-02-15T11:54:38.617
> 
> 标签：date, oledb, xlsx

我有网络服务来解析`xlsx`文件。它使用提供者并从via方法中`Microsoft.ACE.OLEDB.12.0`读取值。并且在我的本地机器 ( ) 上一切正常，但在服务器 ( ) 上，该服务读取日期序列号而不是文本日期，并强制服务抛出异常。我不改变服务逻辑，只改变服务器属性。我在两台机器上都安装了 Excel 和 Access 2010。windows的区域设置也是一样的。请帮忙。我应该怎么做才能让我的服务始终从日期字段中读取文本日期？`xlsx``OleDbDataReader.GetValue()``Win7 x64``Win server 2003 SP2`

# tsql - 随机数 SQL

> ID：14894193
> 
> 赞同：0
> 
> 时间：2013-02-15T11:54:44.937
> 
> 标签：tsql

我已经能够使用以下代码随机化日期

```
DATEADD (day, CAST (RAND () * 365 as int), '2010-1-1') 
```

我现在需要对 1 到 7 和 1 到 126 之间的数字执行此操作。

你能帮我吗？

```
SELECT        'Booking_' + Cast(Seed.Seed as varchar(25)) as BookingNo,
DATEADD(day, ABS(CHECKSUM(NEWID()) % 800), '1 Jan 2010') as ArrivalDate,
DATEADD (day, CAST (RAND () * 365 as int), '2010-1-1') % 6 + 1 as PitchType

FROM            Seed CROSS JOIN
                         Seed AS Seed_1 CROSS JOIN
                         Seed AS Seed_2 CROSS JOIN
                         Seed AS Seed_3 CROSS JOIN
                         Seed AS Seed_4 CROSS JOIN
                         Seed AS Seed_5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:11:05.160

您可以使用：

```
SELECT CAST(RAND(CHECKSUM(NEWID())) * 7 + 1 AS INT) 
```

其中 7 是随机性的上限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:01:49.160

如果你有一个数字表，这很容易，例如内置数字表

1到7之间

```
select top 1 number
from master..spt_values
where type ='p'
and number between 1 and 7
order by newid() 
```

在 1 到 126 之间

```
select top 1 number
from master..spt_values
where type ='p'
and number between 1 and 126
order by newid() 
```

继续执行查询，您会看到每次都会得到不同的数字

# postgresql - PostgreSQL 中 LOWER() 的 MongoDB 等效项

> ID：14894198
> 
> 赞同：1
> 
> 时间：2013-02-15T11:55:06.747
> 
> 标签：postgresql, mongodb, database-migration

我有一个 PostgreSQL 查询，看起来像`LOWER(content) LIKE '%lra%'`. 我正在将其迁移到 MonogoDB。我正在寻找一个等价物。这是我到目前为止所拥有的

```
db.contents.find({content: /lra/i}) 
```

我是通过正则表达式来做的。有没有办法像这样指定它：

```
db.contents.find({content: {$lower: /lra/}}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:57:41.830

目前并非没有全表扫描。

最好的方法是将字符串存储在另一个已经小写的字段中，然后存储一个“真实”字段，而不要对其进行修改。

[您可以使用http://docs.mongodb.org/manual/reference/aggregation/toLower/#exp._S_toLower](http://docs.mongodb.org/manual/reference/aggregation/toLower/#exp._S_toLower)使用聚合框架执行此操作，但这不会比您上面显示的正则表达式好得多。

正如@AdaTheDev 发现的那样，它有一个 JIRA：[https ://jira.mongodb.org/browse/SERVER-90](https://jira.mongodb.org/browse/SERVER-90)

# php - 使用 ajax 无限滚动我的博客主页

> ID：14894200
> 
> 赞同：0
> 
> 时间：2013-02-15T11:55:23.177
> 
> 标签：php, jquery, ajax, codeigniter

您好，我在 php/codeigniter 和我的主页（显示所有帖子）上有一个博客，我想在我的帖子上无限滚动，这样当我到达页面底部时，我可以再加载 7 个。

这是我的控制器：

```
public function index()
    {
        $data['posts'] = $this->Model_cats->getLivePosts(7);
        $data['cats'] = $this->Model_cats->getTopCategories(); 
        $data['title'] = 'Welcome';
        $data['main'] = 'public_home';
        $this->load->vars($data);
        $this->load->view('template', $data);
    }

    public function index_show_post()
    {
        $data['posts'] = $this->Model_cats->getLivePosts(7);
        $data['cats'] = $this->Model_cats->getTopCategories(); 
        $data['title'] = 'Welcome';
        $data['main'] = 'public_home';
        $data['main2'] = 'public_home_loadpost';
        $this->load->vars($data);
        $this->load->view('template', $data);
    } 
```

我认为 showoul 的函数 index_show_post() 为我加载了另外 7 个帖子！我不知道这是否是解决方案，但我确实需要帮助！

这是我的模型：

```
function getLivePosts($limit)
    {
        $data = array();

        $this->db->limit($limit);
        $this->db->where('status', 'published');
        $this->db->order_by('pubdate', 'desc');
        $query = $this->db->get('posts');

        if($query->num_rows() > 0)
        {
            foreach($query->result_array() as $row)
            {
                $data[] = $row;
            }
        }

        $query->free_result();
        return $data;
    } 
```

视图如下所示：

```
<?php

    if ( count($posts) )
    {
        foreach ($posts as $key => $list)
        {
            echo "<div class='postedComment'>";
            echo '<h2>'.$list['title'].'</h2>';
            echo auto_typography( word_limiter($list['body'], 200) );
            echo anchor('welcome/post/'.$list['id'],'read more >>');
            echo "</div>";
        }
        echo '<br/><br/>';
    }

?>

<div id='loadMoreComments' style="display:none;"></div> 
```

我将 javascript 文件 .. 使用 ajax 我想做到这一点：

```
$(window).scroll(function()
{
    if( $(window).scrollTop() == $(document).height() - $(window).height() ){
        $('div#loadMoreComments').show();

        $.ajax({
            url: "<?php echo base_url()/welcome/index_show_post?>?lastComment=" + $(".postedComment:last").attr("id"),
            success: function(html){
                if(html)
                {
                    $("#postedComments").append(html);
                    $('div#loadMoreComments').hide();

                }
                else
                {
                    $('div#loadMoreComments').replaceWith("Finished Loading the comments");
                }
            }
        });
    }
}); 
```

在这行代码中：

```
url: "<?php echo base_url()/welcome/index_show_post?>?lastComment=" + $(".postedComment:last").attr("id"), 
```

我想打电话给控制器，它应该可以工作！但事实并非如此！

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:47:09.390

首先去这里获取jquery的无限滚动插件：http: [//www.infinite-scroll.com/](http://www.infinite-scroll.com/)，假设你有jquery ...

那里有很多示例可供参考，因此我将快速了解基本逻辑：

1.  页面加载没有帖子！
2.  页面加载完毕，初始化无限滚动
3.  Ajax 是您的服务器，可以获取帖子并加载它们。
4.  用户向下滚动，当他触底或您配置的任何内容时，它会加载更多。
5.  重复步骤 4

比构建自定义的要容易得多，并且可以限制 DOM。这意味着您在 DOM 中只有正在显示的内容。

# php - 表中的 SQL 计数并在显示 php 时显示单个计数

> ID：14894201
> 
> 赞同：0
> 
> 时间：2013-02-15T11:55:24.390
> 
> 标签：php, sql, count

嗨，我对数据库相当陌生，我正在尝试从具有相关表的数据库中计算数据。我正在尝试计算与另一个表中的记录相关的条目，然后在相关记录旁边显示该计数。目前我只是获得条目的完整计数，并在所有记录旁边显示完整计数。！[在此处输入图像描述][1]

```
//Individual Stores Total
$query_stores = "SELECT COUNT(stores.name) AS num FROM entries,stores WHERE stores.id = entries.store_id AND valid=1";
$results_stores = mysql_query($query_stores);
$rows_stores = mysql_fetch_array($results_stores);

echo "<tr>";
      echo "<td >" . $info['name'] . "</td>";  
      echo "<td>" . $info['code'] . "</td>";
      echo "<td bgcolor='#00B050'>" . $rows_stores['num'] . "</td>";
      echo "</tr>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:04:04.290

在您的查询中试试这个：

```
SELECT COUNT(stores.id) AS num, stores.name, stores.id as code
FROM entries,stores 
WHERE stores.id = entries.store_id AND valid=1
GROUP BY stores.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:04:58.157

我认为你的查询是错误的。尝试这样的事情：

```
SELECT e.id, count(s.name) FROM entries as e JOIN stores as s ON (e.store_id=s.id)
      WHERE e.valid=true
      GROUP BY e.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:19:57.473

您必须加入两个表并使用 group by

```
$query_stores = "SELECT COUNT(stores.name) AS num FROM entries Inner Join stores ON   
                 stores.id = entries.store_id WHERE valid=1 GROUP BY stores.name";
$results_stores = mysql_query($query_stores);
$rows_stores = mysql_fetch_array($results_stores); 
```

# arrays - 如何：vhdl 中的多维数组

> ID：14894204
> 
> 赞同：2
> 
> 时间：2013-02-15T11:55:36.357
> 
> 标签：arrays, vhdl

我正在尝试在 VHDL 中创建一个 5 维数组，但我不确定如何设置和初始化这些位。

这是我到目前为止所拥有的：

```
 type \1-line\ is array (4 - 1 downto 0) of unsigned (32 - 1 downto 0);
    type square is array (4 - 1 downto 0) of \1-line\;
    type cube is array (4 - 1 downto 0) of square;
    type hypercube is array (4 - 1 downto 0) of cube;
    type \5-cube\ is array (4 - 1 downto 0) of cube;

    signal mega_array : \5-cube\;
    begin
        process (clock, reset) begin
                if (reset == '1') then
                        mega_array <= '0';
                end if;
        end process;
    end behv; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T13:08:26.507

一种方法是使用'(others =>'0')'。这是将向量的所有位设置为“0”的干净且安全的方法。您必须对阵列的每一层执行此操作。

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity test is
    port (
        clock : in std_logic;
        reset : in std_logic);
end entity test;

architecture behv of test is

    type \1-line\ is array (4 - 1 downto 0) of unsigned (32 - 1 downto 0);
    type square is array (4 - 1 downto 0) of \1-line\;
    type cube is array (4 - 1 downto 0) of square;
    type \5-cube\ is array (4 - 1 downto 0) of cube;

    signal mega_array : \5-cube\;

begin

    process (clock, reset)
    begin
        if (reset = '1') then           -- note: not '=='
            mega_array <= (others => (others => (others => (others => (others => '0')))));
        end if;
    end process;

end architecture behv; 
```

请注意，虽然`\1-...`命名是正确的 VHDL，但我不会使用它来避免讨厌的工具问题。我不确定他们会不会来，但避开他们总比解决他们好。我会`t_1line`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:53:10.037

聚合是您需要的：

`(others => '0')`将向量中的所有位设置为“0”

`(others => (others => '0'))`将向量数组的所有元素设置为所有位“0”

`(others => (others => (others => '0')))`... ETC。 ：）

# hibernate - 休眠未解决 DTD

> ID：14894206
> 
> 赞同：2
> 
> 时间：2013-02-15T11:55:44.920
> 
> 标签：hibernate, dtd

`cfg`我的应用程序有很多`hbm`文件。我在加载它们时出错。确定的问题与 DTD 有关。

原来的 Doc 类型就像

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"> 
```

但是有了这个我得到错误

```
Could not parse the configuration file... filename 
```

经过一番谷歌搜索，我下载了这个`dtd`并将其映射为

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration SYSTEM "file:///C://hibernate-configuration-3.0.dtd"> 
```

现在它适用于完成此操作的文件。

但是我不能更改每个文件，因为数量非常大。

在网上的帖子中，我发现一些用户在离线时会遇到这个问题。但我有稳定的互联网连接，但仍然面临这个问题。

我怀疑问题出在使用的 jar 文件上。我在用`hibernate3.jar version 3.2.5`

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:52:56.397

问题确实出在 jar 上。该文件是正确的，但它的位置导致了问题。

在 Eclipse 项目类路径中，将 jar 从引导程序移动到用户实体在我的情况下有效。

非常感谢你的帮助。

# math - 真实世界对象之间的四元数差异 -> Unity

> ID：14894207
> 
> 赞同：3
> 
> 时间：2013-02-15T11:55:45.957
> 
> 标签：math, unity3d, quaternions

我正在 PC 上创建一个统一应用程序，它读取移动设备的方向并根据手机与 PC 屏幕的角度旋转游戏对象。

```
void Update () {
    // Set main screen orientation when left trigger is pressed
    if(leftPad.GetTrigger())
        mainScreenOrientation = InputState.orientation;

    Quaternion delta = InputState.orientation * Quaternion.Inverse(mainScreenOrientation);
    transform.localRotation = delta;
} 
```

InputState.orientation 是手机的方向，每帧更新一次。当用户第一次启动应用程序时，必须将手机指向屏幕以注册 mainScreenOrientation。

当前手机和 PC 屏幕方向之间的增量是在游戏对象的 transform.localRotation 上计算和设置的

所有四元数都定义为 y 指向磁北，x 指向东，z 指向上 ![在此处输入图像描述](../Images/0f2c2066cfb62fb255aa13cd9f72a240.png)

注册后游戏对象的方向正确设置为身份，但是当手机旋转时，对象似乎在错误的轴上旋转。知道这有什么问题吗？

**编辑：**

结果发现代码有一些问题

1.  正如杰罗姆所说，当手机在横向模式下使用时，必须重新映射方向。

    Quaternion.Euler(0, 0, 90) * InputState.orientation

2.  Unity 使用左手坐标，而传感器读取的输入是右坐标。取反 z 进行转换。

我没有用这个实现解决的最后一个问题是旋转超过某个角度的突然跳跃。将横向模式下手机的高度提高到地平线以上会导致对象沿 z 轴旋转 90 度。

不知道为什么会发生这种情况，因为我只处理四元数并且不应该有任何不连续性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:31:56.113

你用的是什么传感器？加速度计还是陀螺仪？

手机使用的轴可能是绝对的，因此可能需要根据设备方向重新映射以与 Unity3D 中的 3D 轴对齐。

y 轴和 x 轴很可能需要根据纵向或横向方向进行切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:49:30.207

当您使用欧拉时，我认为您必须调整以越过零线。例如，根据您旋转的方向添加或减去 360。这对于角度 > 360 并不那么重要，但我记得在 Unity 中遇到过这个问题，因为它不喜欢负角度值。

# android - 最右边的菜单设置菜单

> ID：14894209
> 
> 赞同：0
> 
> 时间：2013-02-15T11:55:47.623
> 
> 标签：android, android-layout

在某些应用程序中，我在某些应用程序上看到了最右边的菜单位置，在下面的草图中标记为 X。如何创建这些菜单以及如何访问它们？它与布局有关吗？换句话说，我应该手动绘制这些布局并添加按钮吗？

```
----------------------------------------------
|                                    |   <X> |
|--------------------------------------------|
|                                            |
|                                            |
|                                            |
|                                            |
|                                            |
|                                            |
|                                            |
|                                            |
|                                            |
---------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:03:26.930

这种类型的菜单可以使用 ActionBar 实现，请点击此链接...

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

但是您可以创建自己的布局来实现菜单，这应该不是那么困难。

# excel - 编辑后关闭嵌入对象

> ID：14894213
> 
> 赞同：2
> 
> 时间：2013-02-15T11:56:19.880
> 
> 标签：excel, vba, ms-word, exit, mailmerge

我在使用嵌入的 Word 文件执行邮件合并时遇到了一些问题。本质上

我正在尝试构建一个宏来：

*   打开嵌入的 Word 文件（假设文件是​​ Object(2)）
*   将导出表连接到单词 fie
*   预览结果
*   更新目录
*   将文件导出为 PDF
*   关闭 word 应用程序，使完成的 PDF 保持打开状态

这是我到目前为止的代码，但之后它不会关闭 WINWORD 应用程序：

```
Public Sub fExportSVF()

    Dim WdObj As Object
    Dim WdApp As Word.Application
    Dim WdDoc As Word.Document
    Dim intIndex As Integer
    Dim strPeril As String
    Dim strClaimNumber As String
    Dim strPHName As String
    Dim strSaveLoc As String
    Dim strWbName As String
    Dim strTempLoc As String
    Dim xlObj As Object

    Application.ScreenUpdating = False

    Call fUnhideSheet("EXPORT_DATA")

    Application.DisplayAlerts = False
    ThisWorkbook.Save
    Application.DisplayAlerts = True

    strTempLoc = Environ("TEMP") & Int((9999 - 1 + 1) * Rnd + 1) & ".xlsm"

    strWbName = Worksheets("Settings").Range("B4").Value
    strPeril = Worksheets("Settings").Range("B3").Value
    strClaimNumber = Worksheets("Settings").Range("B1").Value
    strPHName = Worksheets("Settings").Range("B2").Value

    If Dir(strTempLoc) <> "" Then Kill strTempLoc

    Set xlObj = CreateObject("Scripting.FileSystemObject")

    xlObj.CopyFile ThisWorkbook.FullName, strTempLoc, True

    strSaveLoc = ActiveWorkbook.Path & "\" & strClaimNumber & _
    " - " & strPHName & " - " & strPeril & ".pdf"

    Select Case strPeril
        Case "Acc"
            intIndex = 2
        Case "Acci"
            intIndex = 3
        Case "AD"
            intIndex = 4
        Case "Es"
            intIndex = 5
        Case "Fi"
            intIndex = 6
        Case "Fld"
            intIndex = 7
        Case "Impt"
            intIndex = 8
        Case "St"
            intIndex = 9
        Case "Th"
            intIndex = 10
    End Select

    Set WdObj = Worksheets("Settings").OLEObjects(intIndex)

    WdObj.Activate
    WdObj.Object.Application.Visible = False

    Set WdApp = GetObject(, "Word.Application")
    Set WdDoc = WdApp.ActiveDocument

    WdApp.Visible = True

    WdDoc.MailMerge.MainDocumentType = wdFormLetters

    WdDoc.MailMerge.OpenDataSource Name:= _
        strWbName _
        , ConfirmConversions:=False, ReadOnly:=False, LinkToSource:=True, _
        AddToRecentFiles:=False, PasswordDocument:="", PasswordTemplate:="", _
        WritePasswordDocument:="", WritePasswordTemplate:="", Revert:=False, _
        Format:=wdOpenFormatAuto, Connection:= _
        "Provider=Microsoft.ACE.OLEDB.12.0;User ID=Admin;Data Source=" & strTempLoc & _
        ";Mode=Read;Extended Properties=""HDR=YES;IMEX=1;"";Jet " & _
        "OLEDB:System database="""";Jet OLEDB:Registry Path="""";Jet OLEDB:Engine " _
        , SQLStatement:="SELECT * FROM `EXPORT_DATA$`", SQLStatement1:="", _
        SubType:=wdMergeSubTypeAccess
    WdDoc.MailMerge.ViewMailMergeFieldCodes = wdToggle

    WdDoc.TablesOfContents(1).Update

    WdDoc.ExportAsFixedFormat outputfilename:=strSaveLoc, _
        ExportFormat:=wdExportFormatPDF, OpenAfterExport:=True, OptimizeFor:= _
        wdExportOptimizeForPrint, Range:=wdExportAllDocument, From:=1, To:=1, _
        Item:=wdExportDocumentContent, IncludeDocProps:=True, KeepIRM:=True, _
        CreateBookmarks:=wdExportCreateNoBookmarks, DocStructureTags:=True, _
        BitmapMissingFonts:=True, UseISO19005_1:=False

    WdApp.ActiveDocument.Close wdDoNotSaveChanges

    Set WdApp = Nothing
    Set WdObj = Nothing

    Kill strTempLoc

    Call fHideSheet("EXPORT_DATA")

    Application.ScreenUpdating = True

End Sub 
```

因此，除了关闭 WINWORD 应用程序之外，它还会执行所有操作。除此之外，我注意到如果已经打开了另一个文档，它也会使其不可见。

请问有什么帮助吗？

干杯

**编辑：**
此外，将运行此代码的机器上将同时具有 Word 97 和 Word 2007。该文档需要在 Word 2007 中打开和编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:04:31.447

更改此行（将 WdApp 设置为现有的 Word 实例，如果有的话）：

`Set WdApp = GetObject(, "Word.Application")`

为此，它会创建一个新的 Word 实例，以防止关闭其他可能打开的文档：

`Set WdApp = CreateObject("Word.Application")`

要关闭`wdApp`使用 Quit 方法：

`wdApp.Quit`

# c - 如何在 C 中最有效地解析这个 HTTP 请求？

> ID：14894214
> 
> 赞同：2
> 
> 时间：2013-02-15T11:56:22.253
> 
> 标签：c, string, http, parsing

我真正需要提取的信息是：

a) 是否是`GET`请求

b) 文件地址（例如 index.html）

c) 主机信息（例如 localhost:8081）

我刚才有代码可以做到这一点（见我的帖子底部），但它似乎效率低下，相当静态，并且不提取主机信息。

所以我想有一个*理智*的解决方案来解析 C 中的 HTTP 请求。干杯！

**HTTP 请求**

```
GET /index.html HTTP/1.1
Host: localhost:8081
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.70 Safari/537.17
DNT: 1
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,en-GB;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

**当前代码**

```
int parsehttp(char *inputstring, int *type, char *getaddress) {
    if((strncmp(inputstring, "GET", 3)) == 0) {
        *type = 1;
    } else {
        *type = 0;
    }
    char firstline[BUFLEN] = "";
    int charoffset = getlineend(inputstring); //this function returns the int offset of '\r\n'
    strncpy(firstline, inputstring, charoffset-2);
    firstline[charoffset-1] = '\0';
    sscanf(firstline,"%*s %s %*s",getaddress);
    inputstring = (inputstring + charoffset);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:03:39.283

可能对您有所帮助的是 strstr 函数。它试图在您提供的字符串中找到给定的字符串。由于 HTTP 请求包含以 0xD,0xA 结尾的行，因此您可以拆分这些行。通常，一行文本的信息使用空格分隔。所以要找到你使用的“GET”或“POST”

```
char* getpost = strstr("GET /index.html HTTP/1.1", "GET"); 
```

如果 getpost 是 != NULL，您将拥有您的字符串，并且可以在 GET 或 POST 之后剪切它。

其次，您将寻找“主机：”并跳过该部分，直到您到达 0xD,0xA 以便您获得主机地址。

有关[strstr](http://www.manpagez.com/man/3/strstr/)的联机帮助页，请参见 strstr。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:08:41.347

您不必担心效率低下，毕竟它是网络，并且总是比您的 CPU、缓存、RAM 慢很多数量级。

如果您正在编写一个 http-server，那么您唯一应该关心的是内存安全以及如果客户端发送了意外的内容，您的代码会做什么。

一些示例：您的代码（以及此 / 之后的代码取决于其解析）在以下情况下会做什么：

*   客户端发送 > 10 MB 的数据，全部格式错误，例如根本没有换行符。
*   客户端发送错误的小数（即 ip/port/content-length）
*   客户端发送正确的数据但恶意缓慢，例如每秒 1 个字节。
*   ......更多。

# android - Android ListView 仅在滚动后显示项目

> ID：14894215
> 
> 赞同：3
> 
> 时间：2013-02-15T11:56:24.053
> 
> 标签：android, listview, scroll, adapter

我正在构建一个 Android 应用程序，作为其中的一部分，我正在显示带有复选框的歌曲列表以允许选择。我正在使用自定义列表适配器来执行此操作。代码似乎可以加载并与复选框一起使用，但我遇到的唯一问题是只有列表视图中最顶部的项目显示文本，直到我向下滚动列表，然后其他项目呈现文本。

我知道这可能是列表视图不刷新或类似问题的问题，但我不知道如何解决它。

这是我的适配器的代码：

```
private class PlaylistDetailsAdapter extends ArrayAdapter<Song> {

    boolean[] checkBoxState;
    ViewHolder viewHolder;

    public PlaylistDetailsAdapter(Context context, int textViewResourceId, ArrayList<Song> songs) {
        super(context, textViewResourceId, songs);
        checkBoxState = new boolean[songs.size()];
    }

    private class ViewHolder {
        TextView songName;
        CheckBox checkBox;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.activity_playlist_details_row, null);
            viewHolder = new ViewHolder();

            viewHolder.songName = (TextView)convertView.findViewById(R.id.playlist_details_song_name);
            viewHolder.checkBox = (CheckBox)convertView.findViewById(R.id.playlist_details_checkbox);
            convertView.setTag(viewHolder);
        }
        else {
            viewHolder = (ViewHolder)convertView.getTag();
            Song song = playlistSongs.get(position);
            viewHolder.songName.setText(song.getTitle() + " - " + song.getArtist());
            viewHolder.checkBox.setChecked(checkBoxState[position]);
            viewHolder.checkBox.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if (((CheckBox)v).isChecked()) {
                        checkBoxState[position] = true;
                    }
                    else {
                        checkBoxState[position] = false;
                    }
                }
            });

        }

        return convertView;
    }

} 
```

这是设置列表视图的代码：

```
playlistSongs = db.getPlaylistTracks(getIntent().getLongExtra("id", 0));

    TextView playlistName = (TextView)findViewById(R.id.playlist_details_name);
    playlistName.setText(getIntent().getStringExtra("name"));

    final PlaylistDetailsAdapter adapter = new PlaylistDetailsAdapter(this, R.layout.activity_playlist_details_row, playlistSongs);

    ListView playlistSongList = (ListView)findViewById(R.id.listview_playlist_details);

    playlistSongList.setAdapter(adapter); 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:09:59.843

问题是您没有在 convertView==null 时将数据放入视图中，您只需设置如何找到它们。

您需要做的是从“else”部分中删除实际更改视图的代码，并将其放在整个 if-else 区域之后。

例子 ：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
     ...
    }
    else 
        viewHolder = (ViewHolder)convertView.getTag();
    // now we have the views ready to be changed , so change them :
    Song song = playlistSongs.get(position);
    ...
    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:01:08.003

称呼：

```
adapter.notifyDataSetChanged() 
```

当您的列表包含新数据时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:04:25.400

嗨朋友，您可以使用水平或垂直滚动​​视图来解决这个问题，因为您知道列表视图每次都会被回收。

与 listview 相比，我在使用滚动之前也遇到过这个问题

然后创建一个布尔数组列表作为列表项的大小，并首先将所有值设置为 false。之后你可以使用你的代码

```
 @Override
            public void onClick(View v) {
                if (((CheckBox)v).isChecked()) {
                    checkBoxState[position] = true;
                }
                else {
                    checkBoxState[position] = false;
                }
            }
        }); 
```

# java - JTable 列标题

> ID：14894216
> 
> 赞同：1
> 
> 时间：2013-02-15T11:56:25.003
> 
> 标签：java, database, swing, jtable, jtableheader

我正在尝试显示更详细的列标题，而不使用[`DbUtils.resultSetToTableModel()`](http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel). 这是我的代码：

```
ResultSet rs = null;
PreparedStatement pst = null;
String sql = "SELECT * From product";
String col[] = {"Product No", "Name", "Price", "QOH"};
DefaultTableModel dtm = new DefaultTableModel();
try {
    pst = conn.prepareStatement(sql);
    rs = pst.executeQuery();
    dtm.setColumnIdentifiers(col);
    ProductList_tbl.setModel(dtm);
    ProductList_tbl.setModel(DbUtils.resultSetToTableModel(rs));
} 
```

但它仍然显示数据库表列名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:43:12.477

猜测`DbUtils`您使用的是哪个，我想到了一些事情：

*   为每个所需列使用 SQL 别名，而不是通配符，例如

    ```
    SELECT column_name AS alias_name; 
    ```

*   使用任何可用的 API在创建`TableModel` *后*更新它。`DbUtils.resultSetToTableModel()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:54:16.047

如果 DbUtils 不提供 API 来更改列值，那么您应该能够使用标准表类：

```
TableColumnModel tcm = table.getColumnModel();
TableColumn tc = tcm.getColumn(...);
tc.setHeaderValue( "..." ); 
```

# android - 从 WebView 中删除元素的推荐方法是什么？

> ID：14894223
> 
> 赞同：0
> 
> 时间：2013-02-15T11:56:40.723
> 
> 标签：android, webview, mobile-website

我和我的团队将开发这个原生 Android 应用程序，它基本上是一个特定移动网站的 WebView 包装器，实现了几个原生功能。

网站上将有一个横幅来宣传本机应用程序。但是当用户已经在使用原生应用时显示这个横幅没有任何意义，所以我们必须摆脱它。

我的第一种方法是将一些 Javascript 注入到 WebView 中，它将查找 HTML 元素并更改它的可见性。很简单。但这是解决此类问题的最佳/推荐方法吗？

如果网站开发人员能够检测网站是否正在通过本机应用程序显示并且根本不显示横幅，也许会更好。是的？你会如何建议这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:06:54.910

有几种方法...

1.  您可以要求主站点的开发人员创建一个名为 的 Javascript 函数`hideAd()`，然后您可以在页面加载后使用 调用该函数 `webView.loadUrl("javascript:hideAd()")`。

2.  您可以创建一个仅存在于本机应用程序中的界面，网页可以查询该界面以确定它是否在应用程序中运行。`webView.addJavascriptInterface(new MyJSJavaBridge(), "nativeapp");`在 Java 端使用，然后使用`if (window.nativeapp)...`.

3.  您可以更改用户代理字符串以使用 为您的应用附加一些唯一标识符`webView.getSettings().setUserAgentString("<old agent string plus some custom id>");`，然后让 JS 代码查询用户代理字符串。

可能还有很多其他选择，这些只是其中的一部分。我想说最简单的可能是将一些唯一的 id 附加到用户代理。

# redirect - 将 postname.html 重定向到 postid.html

> ID：14894226
> 
> 赞同：2
> 
> 时间：2013-02-15T11:56:44.610
> 
> 标签：redirect

我想将我的转换`postname.html`为`postid.html`

我在 wordpress 中的链接（自定义永久链接结构：）

```
 /%postname%.html 
```

我写在`.htaccess`

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

现在我想将`postid`最后一个链接添加为`www.xxxx.com/123.html`. 我添加此代码：

```
/%post_id%.html 
```

但是当我按下谷歌中的任何链接时，我找不到错误页面。

我怎样才能在不丢失谷歌链接的情况下转换我的链接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:56:50.213

这是另一种方式： `redirect postname.html postid.html`

那是 .htaccess

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:01:07.943

我不确定这是否是您要查找的内容，但是将其放在您的脑海中会进行重定向。有一个 JS 版本，其中一个字符串也可以在发送到该 URL 之前进行调整。

```
<meta HTTP-EQUIV="REFRESH" content="0; url=http://www.yourdomain.com/index.html"> 
```

JS：

```
<script type="text/javascript">
<!--
window.location = "http://www.google.com/"
//-->
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:25:08.393

在 HTML 中： `<meta HTTP-EQUIV="REFRESH" content="0; url=/postid.html">`

在 Javascript 中： `<script> window.location = "http://www.yourdomain.com/../postid.html" </script>`

在 PHP 中： `<?php header('http://www.yourdomain.com/../postid.html'); ?>`

如果您想要一个 .htaccess 示例，请在评论中这样说。

# machine-translation - 从英语到卡纳达语的语言翻译

> ID：14894231
> 
> 赞同：-3
> 
> 时间：2013-02-15T11:57:08.990
> 
> 标签：machine-translation

我想开发一个翻译器，它以英文文本作为输入并以卡纳达语（卡纳塔克邦的区域语言）输出。我想知道使用哪种编程语言进行编码。这样的翻译人员已经存在了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:05:55.370

您可以将谷歌翻译嵌入到您的网站中去[https://translate.google.com/](https://translate.google.com/)并选择您的语言 - 支持卡纳达语 - 并将脚本嵌入到您的代码中。

谷歌翻译已经领先你一段时间了，恐怕你的工作会有点多余。

# perl - 从多行变量中删除最后一行

> ID：14894235
> 
> 赞同：1
> 
> 时间：2013-02-15T11:57:18.633
> 
> 标签：perl, text, expect, text-manipulation

找不到这个看似简单的问题的解决方案：如何从多行变量中删除几行？

我从 Expect 那里拿回了这类东西，需要稍微整理一下

```
$var='

total 20
drwxr-xr-x 5 drew.jess users 4096 2013-01-22 15:51 bash
drwxr-xr-x 2 drew.jess users 4096 2011-11-11 10:37 diff
drwxr-xr-x 8 drew.jess users 4096 2012-02-14 09:09 expect
drwxr-xr-x 3 drew.jess users 4096 2011-10-06 11:05 perl 
drwxr-xr-x 3 drew.jess users 4096 2013-02-07 13:10 python
drew ~ $

'; 
```

那些空白行代表了我所拥有的。理想情况下，我想让 $var 看起来像这样：

```
$var='
total 20
drwxr-xr-x 5 drew.jess users 4096 2013-01-22 15:51 bash
drwxr-xr-x 2 drew.jess users 4096 2011-11-11 10:37 diff
drwxr-xr-x 8 drew.jess users 4096 2012-02-14 09:09 expect
drwxr-xr-x 3 drew.jess users 4096 2011-10-06 11:05 perl 
drwxr-xr-x 3 drew.jess users 4096 2013-02-07 13:10 python
'; 
```

谢谢你的时间。

编辑：我应该澄清一下；对我来说，这个问题的重要部分是删除以下行：

```
drew ~ $ 
```

空白，我想我可以应付:)

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:08:00.337

您始终可以使用正则表达式替换：

```
$var =~ s/^\s*$//gm; 
```

`\s*`将匹配换行符，但也匹配您可能不想要的其他空格。`^`以及`$`线锚的开始和结束。修饰符允许锚点在`/m`字符串内匹配，在行的开始/结束处（例如在换行处）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:12:53.733

像这样的正则表达式`s/^[^\S\n]*\n//gm`将删除所有仅包含空格的行。

**更新**

如果您想做的不仅仅是删除空行，那么最好`split`将字符串分成几行并删除您不想要的那些。此代码用于`grep`删除全空白行，然后`pop`删除最后一个。

```
my @lines = grep /\S/, split /\n/, $var;
pop @lines;
$var = join '', map "$_\n", @lines;
print $var; 
```

**输出**

```
total 20
drwxr-xr-x 5 drew.jess users 4096 2013-01-22 15:51 bash
drwxr-xr-x 2 drew.jess users 4096 2011-11-11 10:37 diff
drwxr-xr-x 8 drew.jess users 4096 2012-02-14 09:09 expect
drwxr-xr-x 3 drew.jess users 4096 2011-10-06 11:05 perl 
drwxr-xr-x 3 drew.jess users 4096 2013-02-07 13:10 python 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:13:30.700

从[这个 perlmonks 回答](http://www.perlmonks.org/?node_id=574298)

$var =~ s/(^|\n)[\n\s]*/$1/g;

虽然有很多方法可以做到这一点。在我看来，循环和删除空白行没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:14:00.850

您可以像使用单行字符串一样简单地修剪空格并添加终止换行符：

```
$var =~ s/^\s+//;  # Trim whitespace from beginning of string
$var =~ s/\s+$//;  # Trim whitespace from end of string
$var .= "\n";      # Add terminating newline 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-15T12:06:47.013

为了不使用正则表达式的不同解决方案，您可以[`chomp`](http://perldoc.perl.org/functions/chomp.html)在循环中使用：

```
for ( 1 .. 2 ) {
    1 while chomp $var;
    $var = reverse $var;
} 
```

# javascript - 将html5表导出到excel jquery

> ID：14894237
> 
> 赞同：1
> 
> 时间：2013-02-15T11:57:20.083
> 
> 标签：javascript, jquery, html, excel

我想使用 js 或 jquery 将我的 html 表导出到 excel 表我已经搜索了谷歌但没有得到任何有用的资源。这是我的 html 表格代码

```
<table>
        <thead id='headers'>
            <tr>
                <th>Select</th>
                <th>Name</th>
                <th>Mobile</th>
                <th>Mail ID</th>
                <th>Rating</th>
                <th>Date</th>
                <th>Notify</th>
                                <th>View</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                                <td><input type="checkbox"/></td>
                <td>Praveen</td>
                <td>97910123123</td>
                <td>praveen@360i</td>
                <td>5 star</td>
                <td>15.2.2013</td>
                <td>A</td>
                                <td>4</td>
            </tr>
                        <tr>
                                <td><input type="checkbox"/></td>
                <td>kumar</td>
                <td>97912342333</td>
                <td>kumar@360i</td>
                <td>4 star</td>
                <td>16.2.2013</td>
                <td>D</td>
                                <td>3</td>
            </tr>
        </tbody>
    </table> 
```

请帮我找出任何解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-25T21:39:40.757

我找到[了以下内容](https://codepen.io/kostas-krevatas/pen/mJyBwp)，它适用于 Chrome(63)、Firefox(57) 和 IE11。简而言之，您可以通过切片和连接表行来创建一个 csv。接下来，您创建一个“text/csv”类型的 Blob，最后使用锚点“a”标签的下载属性下载它，这样页面就不会导航到该文件。

```
var xport = {
  _fallbacktoCSV: true,  
  toXLS: function(tableId, filename) {   
    this._filename = (typeof filename == 'undefined') ? tableId : filename;

    //var ieVersion = this._getMsieVersion();
    //Fallback to CSV for IE & Edge
    if ((this._getMsieVersion() || this._isFirefox()) && this._fallbacktoCSV) {
      return this.toCSV(tableId);
    } else if (this._getMsieVersion() || this._isFirefox()) {
      alert("Not supported browser");
    }

    //Other Browser can download xls
    var htmltable = document.getElementById(tableId);
    var html = htmltable.outerHTML;

    this._downloadAnchor("data:application/vnd.ms-excel" + encodeURIComponent(html), 'xls'); 
  },
  toCSV: function(tableId, filename) {
    this._filename = (typeof filename === 'undefined') ? tableId : filename;
    // Generate our CSV string from out HTML Table
    var csv = this._tableToCSV(document.getElementById(tableId));
    // Create a CSV Blob
    var blob = new Blob([csv], { type: "text/csv" });

    // Determine which approach to take for the download
    if (navigator.msSaveOrOpenBlob) {
      // Works for Internet Explorer and Microsoft Edge
      navigator.msSaveOrOpenBlob(blob, this._filename + ".csv");
    } else {      
      this._downloadAnchor(URL.createObjectURL(blob), 'csv');      
    }
  },
  _getMsieVersion: function() {
    var ua = window.navigator.userAgent;

    var msie = ua.indexOf("MSIE ");
    if (msie > 0) {
      // IE 10 or older => return version number
      return parseInt(ua.substring(msie + 5, ua.indexOf(".", msie)), 10);
    }

    var trident = ua.indexOf("Trident/");
    if (trident > 0) {
      // IE 11 => return version number
      var rv = ua.indexOf("rv:");
      return parseInt(ua.substring(rv + 3, ua.indexOf(".", rv)), 10);
    }

    var edge = ua.indexOf("Edge/");
    if (edge > 0) {
      // Edge (IE 12+) => return version number
      return parseInt(ua.substring(edge + 5, ua.indexOf(".", edge)), 10);
    }

    // other browser
    return false;
  },
  _isFirefox: function(){
    if (navigator.userAgent.indexOf("Firefox") > 0) {
      return 1;
    }

    return 0;
  },
  _downloadAnchor: function(content, ext) {
      var anchor = document.createElement("a");
      anchor.style = "display:none !important";
      anchor.id = "downloadanchor";
      document.body.appendChild(anchor);

      // If the [download] attribute is supported, try to use it

      if ("download" in anchor) {
        anchor.download = this._filename + "." + ext;
      }
      anchor.href = content;
      anchor.click();
      anchor.remove();
  },
  _tableToCSV: function(table) {
    // We'll be co-opting `slice` to create arrays
    var slice = Array.prototype.slice;

    return slice
      .call(table.rows)
      .map(function(row) {
        return slice
          .call(row.cells)
          .map(function(cell) {
            return '"t"'.replace("t", cell.textContent);
          })
          .join(",");
      })
      .join("\r\n");
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T21:25:28.147

这是解决方案（[链接](http://jquerybyexample.blogspot.com/2012/10/export-table-data-to-excel-using-jquery.html)）

```
$("#btnExport").click(function(e) {
    window.open('data:application/vnd.ms-excel,' + $('#dvData').html());
    e.preventDefault();
}); 
```

# git - 合并没有提交消息的分支

> ID：14894238
> 
> 赞同：7
> 
> 时间：2013-02-15T11:57:26.903
> 
> 标签：git, merge

假设以下“工作流程”

```
create branch master
add + commit some files
create and checkout branch dev
edit and commit several times with silly commit messages
checkout master
merge dev branch into master branch 
```

在最后一步中，是否可以不从 dev 分支上的提交中引入所有（愚蠢的）提交消息，而只有一个提交消息，例如“今天合并的 dev 分支”？

马蒂亚斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T13:42:19.800

您需要**commit-squashing**，可以通过以下几种方式完成：

*   如果您想对 squash 中包含哪些提交进行细粒度控制，如果您想将您的功能提交压缩为多个提交（例如，拆分逻辑更改），或者您只想更改提交消息，**“以交互方式变基”** ( [`git rebase -i`](http://git-scm.com/docs/git-rebase)) 适合您。
*   如果您想快速完成并将所有相关提交合并为一个，您可以**使用`--squash`选项**to[`git merge`](http://git-scm.com/docs/git-merge)和[`git rebase`](http://git-scm.com/docs/git-rebase)[`git pull`](http://git-scm.com/docs/git-pull)

关于这两个主题的更多信息可以在[Pro Git 书的第 6 章和](http://git-scm.com/book/en/Git-Tools-Rewriting-History)上面链接的命令手册页中找到。

# scala - :: List 中的方法 - 逆变参数类型

> ID：14894239
> 
> 赞同：0
> 
> 时间：2013-02-15T11:57:29.197
> 
> 标签：scala, generics

一个简单的问题。`::`immutable 类的方法`List`定义为：

> 密封抽象类 List[+A] ...
> 
> def ::[B >: A](x: B): 列表[B]

假设我有：

```
class Fruit
class Mango extends Fruit
scala> val d:List[Fruit] = List.empty[Fruit]
d: List[Fruit] = List()

scala> new Mango :: d
res5: List[Fruit] = List(Mango@272d6774) 
```

现在我在这里很困惑。根据`::`声明，参数类型应该是逆变的。即在这种情况下，任何类`>: Fruit`（我理解为什么会这样）。但我不明白的是，`Mango <: Fruit`为什么编译器不抛出错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:13:10.540

即使是不变的，您仍然可以添加`Mango`to ，仅仅因为仍然是. 用一个普通的旧 java 列表来考虑它：`d``List``Mango``Fruit`

```
val d = new java.util.ArrayList[Fruit]
d.add(new Mango) 
```

所以逆变不会限制您添加子类型的能力 - 它使您能够添加超类型并从中获取编译器检查的列表类型：

```
val d: List[Fruit] = Nil
val a: List[Plant] = new Carrot :: d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T13:02:08.243

在行

```
new Mango :: d 
```

您希望编译器推理：“`new Mango`有类型`Mango`并且`d`有类型`List[Fruit]`，所以`List[Fruit].::(Mango)`需要进行类型检查，但它没有”。在这种情况下，这确实是一个错误。

但实际上，它的原因不同：“我需要`new Mango :: d`进行类型检查，所以`new Mango`必须有*某种*类型`B`，这样`B :> Fruit`。有这样的`B`吗？是的，`B = Fruit`。” 所以没有错误。

# php - 什么是可以识别 PHP echo / print 语句中的 Javascript 的好 IDE？

> ID：14894240
> 
> 赞同：2
> 
> 时间：2013-02-15T11:57:40.843
> 
> 标签：php, javascript, html, ide, echo

我一直在寻找一个好的 PHP IDE，它可以在 echo 语句中看到 JavaScript / html，并将其显示为代码（具有所有漂亮的颜色等）。

我尝试过 Komodo、Netbeans 等。它们都将 echo 语句显示为字符串（单色）。

PHP Designer 2007 是唯一允许我切换语言的版本，因此我可以舒适地阅读 echo 里面的 JS，但它的功能非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:03:30.550

Phpstorm 很好地做到了这一点，您可以选择将突出显示的代码“注入”到 php 字符串中。例如，您可能将 SQL 作为字符串或将 JavaScript 或 CSS 作为字符串。您可以将语法突出显示注入其中。

这是 PHPstorm 的一个小功能，我不得不说它是目前可用的最伟大和更强大的 IDE 之一。

[http://www.jetbrains.com/phpstorm/download/](http://www.jetbrains.com/phpstorm/download/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:03:28.657

你的代码中有很多小的 javascript`echo's`吗？如果它是一大块代码，您可以将 javascript 放在一个单独的`.js`文件中并使用 PHP 来回显该文件：

```
$strFile = file_get_contents("/js/myjavascript.js");
if ($strFile) {
    echo $strFile;
} else {
    echo "alert('Could not load javascript.');";
} 
```

这种方法还通过不在一个文件中混合多种语言（和服务器/客户端代码）来保持您的代码“干净”。

我可以想象，当它在一个文件中为不同的语言应用不同的代码突出显示时，它在你的 IDE 中将是一个非常棒的迪斯科舞厅。这真的是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:03:44.600

我假设您使用类似的东西：

```
echo "function foo()  
{ 
    var temp; ... 
}"; 
```

字符串是字符串并且被这样对待。一种解决方法是：

```
PHP Code..
?>
function foo()
{
    var temp; ...
}
<?PHP
PHP Code... 
```

在 PHP 标签之外写你的东西会导致回声。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:07:45.457

我倾向于同意邦迪的评论。我个人使用 Netbeans，它们适用于大多数语言。如果您将代码分开，例如可能不是将 Javascript 内联写入 PHP 回显，而是尝试调用 Javascript 函数，该函数包含在单独的 javascript 文件中或在 PHP 之外的脚本标记中编写。就我而言，Netbeans 将采用任何一种方式，并使调试变得更容易。

希望它有帮助，祝你好运:)

# java - 用于检查文件扩展名和无标题的正则表达式

> ID：14894243
> 
> 赞同：0
> 
> 时间：2013-02-15T11:57:50.800
> 
> 标签：java, regex, pattern-matching

我有以下正则表达式：`(?s)(?i)\.(pdf|doc|docx|xls)|untitled`检查文件类型扩展名或无标题单词。

```
@Transient
    private static final Pattern titlePattern = Pattern.compile("(?s)(?i)\\.(pdf|doc|docx|xls)$|untitled"); 
```

现在，我的测试因诸如`.document`or之类的文本而失败`.docblah`。

如何修改正则表达式以在文件类型扩展后停止正则表达式匹配字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:59:54.480

你可以删除`$`ie`(?s)(?i)\.(pdf|doc|docx|xls)|untitled`

# javascript - 自动建议字段的日文字符

> ID：14894244
> 
> 赞同：2
> 
> 时间：2013-02-15T11:57:55.080
> 
> 标签：javascript, autocomplete

首先，我不是日本人，对日语写作一窍不通。

我需要开发一个自动建议字段，例如 jquery UI 中的自动完成小部件。

该建议应在用户键入时呈现给用户。我知道拉丁字符、平假名和汉字之间存在转换。在这种转换发生之前，不应提出任何建议。

实现此类功能的最佳实践是什么？

另外，JavaScript 中有没有办法区分平假名和汉字字符？

# html - HTML并排div不填充全宽

> ID：14894250
> 
> 赞同：0
> 
> 时间：2013-02-15T11:58:06.633
> 
> 标签：html

我有以下快速 html 测试，这是我正在尝试做的事情的简化版本。我不确定的是为什么“详细信息”区域（带有红色边框的右侧没有与其他所有内容对齐。我做错了什么？

**CSS：**

```
.landscapepage {
    position:relative;
    width: 280mm;
    height: 190mm;
    page-break-after: always;
}

div.header {
    position:relative;
    min-height: 30mm;
    width: 100%;
    border-style:solid;
    border-width: medium;
    border-color:Gray;
    text-align:center;
}

div.footer {
    position:absolute;
    min-height:30mm;
    border-style:solid;
    border-width:medium;
    border-color:Gray;
    text-align:center;
    width: 100%;
    bottom: 0pt;
}

div.summary {
    position:relative;
    width: 80mm;
    min-height: 20mm;
    display:table-cell;
    border-style:solid;
    border-width:medium;
    border-color:Navy;
}

div.details {
    position:relative;
    display:table-cell;
    border-style:solid;
    border-width:medium;
    border-color:Red;
    min-height:20mm;
    width:100%;
} 
```

**HTML：**

```
<div class="landscapepage">
    <div class="header">
        Header
    </div>
    <div class="summary">
        Summary
    </div>
    <div class="details">
        Details
    </div>
    <div class="footer">
        Footer
    </div>
</div> 
```

请看[**这个 jsFiddle**](http://jsfiddle.net/cRZbw/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:39:33.620

这都是关于边框宽度的。

当您不设置边框但设置背景颜色时，您会得到类似[http://jsfiddle.net/cRZbw/1/](http://jsfiddle.net/cRZbw/1/)的内容，其中“详细信息”与“标题”正确对齐。

```
div.header {
    position:relative;
    min-height: 30mm;
    width: 100%;
    background:gray;
    text-align:center;    
    border:1px solid red;
}

div.footer {
    position:absolute;
    min-height:30mm;
    background:gray;
    text-align:center;
    width: 100%;
    bottom: 0pt;
}

div.summary {
    position:relative;
    width: 80mm;
    min-height: 20mm;
    display:table-cell;
    background:navy;
}

div.details {
    position:relative;
    display:table-cell;
    background:red;
    min-height:20mm;
    width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:39:44.837

可能你想这样做：http: [//jsfiddle.net/cRZbw/2/](http://jsfiddle.net/cRZbw/2/) **将 div.footer 的位置更改为相对。**

这是代码：

```
div.footer {
    position:relative;
    min-height:30mm;
    border-style:solid;
    border-width:medium;
    border-color:Gray;
    text-align:center;
    width: 100%;
    bottom: 0pt;
} 
```

# c# - 为什么这个类在类本身内实例化它自己的对象？

> ID：14894251
> 
> 赞同：1
> 
> 时间：2013-02-15T11:58:06.780
> 
> 标签：c#, class, interface, instantiation

关于接口，我遇到了以下代码示例。为什么这个类在 main 方法中实例化自己的对象？它是 C# 和 Java 中的有效理论或代码约定吗？（编译器没有抱怨..但我很好奇）

```
using System;

interface IParentInterface
{
    void ParentInterfaceMethod();
}

interface IMyInterface : IParentInterface
{
    void MethodToImplement();
}

class InterfaceImplementer : IMyInterface
{
    static void Main()
    {
        InterfaceImplementer iImp = new InterfaceImplementer();
        iImp.MethodToImplement();
        iImp.ParentInterfaceMethod();
    }

    public void MethodToImplement()
    {
        Console.WriteLine("MethodToImplement() called.");
    }

    public void ParentInterfaceMethod()
    {
        Console.WriteLine("ParentInterfaceMethod() called.");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:02:56.537

方法“main”是静态的，因此它不引用任何 InterfaceImplementer 实例。要调用实例方法，它需要创建一个实例。

据我所知，称为“main”的静态方法不是任何已知的约定。

如果这是尝试使用单例，则应将 main 方法替换为静态构造函数并由私有 InterfaceImplementer 变量支持

将调用两个方法的方法命名为“Main”似乎不是一个好的名称选择。

**编辑回答评论**

为了完全理解单例模式，我强烈建议您阅读[本文](http://csharpindepth.com/articles/general/singleton.aspx)

名为“Main”的方法不能帮助调用者理解该方法正在做什么。我会选择“运行”、“初始化”、“调用”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:00:11.860

可能是来自教程。

代码将作为控制台应用程序运行，它必须有一个静态`Main`方法，这是程序执行的开始。

因此，当您使用该类运行程序时，它将测试这两种方法。
该类在 main 方法中创建其自身的实例，因为它自身不是静态类。

如果像通常情况下那样有一个`program`带有该方法的单独类，那就不会那么混乱了。`static main`

# android - 在 Android 中管理 EditText 状态

> ID：14894253
> 
> 赞同：0
> 
> 时间：2013-02-15T11:58:29.357
> 
> 标签：android, android-edittext

嗨，我有一个登录表单，其中有两个 EditText，一个用于电子邮件，一个用于密码，一个登录按钮，当用户按下按钮时，我想对表单进行一些验证。例如，如果没有在 EditText 中输入任何内容，那么 EditText 的提示颜色和文本就是我迄今为止尝试过的。我明白了，所以它以“”的形式注销，但它并没有改变提示。

```
Editable emailInputEditable = emailInput.getText();
    String emailInputString = emailInputEditable.toString();
    Editable passwordInputEditable = passwordInput.getText();
    String passwordInputString = passwordInputEditable.toString();

    Log.v("loginForm", "emailInputString = " + emailInputString);
    Log.v("loginForm", "passwordInputString = " + passwordInputString);

    if(emailInputString ==""){emailInput.setHint("Please enter your email");}
    if(passwordInputString ==""){passwordInput.setHint("Please enter your password");} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:01:59.237

用这个

```
if(emailInputString.length==0){emailInput.setHint("Please enter your email");}
    if(passwordInputString.length==0){passwordInput.setHint("Please enter your password");} 
```

要禁用登录按钮，请使用以下代码

```
if(emailInputString.length==0 && passwordInputString.length==0)
signbtn.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:00:53.700

试试这个：

```
if(emailInputString.equals("")){emailInput.setHint("Please enter your email");}
if(passwordInputString.equals("")){passwordInput.setHint("Please enter your password");} 
```

您将此代码放入按钮单击事件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:04:03.137

要比较字符串，请使用`equals()`...

编辑。太晚了 ：/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:13:07.233

试试这个..

```
 if(!TextUtils.isEmpty(emailInput.getText()){

            if(!TextUtils.isEmpty(passwordInput.getText())){

                // Perfom your logic here..

            }else
                passwordInput.setError("Please enter your password");

        }else
            emailInput.setError("Please enter your email.."); 
```

快乐编码:)

# vb.net - VB.NET Like 运算符与小于号登录模式混淆

> ID：14894258
> 
> 赞同：5
> 
> 时间：2013-02-15T11:58:38.227
> 
> 标签：vb.net, sql-like

```
Dim rc As Boolean = "2" Like "*?<*?" 
```

我不明白为什么 rc 等于 True，肯定`2`一点也不像`*?<*?`。

上面的模式需要一个字符串

*   至少三个字符（两个 ? 和一个`<`）
*   符号在`<`内部某处。

据我所知，`<`不是一个特殊字符，它对`<`Like 运算符意味着什么。

使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:11:47.497

虽然我不能直接解释为什么`2`是这样的`"*?<*?"`。

您的查询内容为；

*   `*`- 匹配 0 个或多个字符
*   `?`- 后跟一个字符
*   `<`- 紧随其后的是`<`角色
*   `*`- 后跟 0 个或更多字符
*   `?`- 以一个字符结束

对于您想要的逻辑；

> 在匹配之前至少三个字符，“<”出现在字符串内部的某处

这会导致查询；

```
Dim rc As Boolean = "2" Like "???*<*" 
```

哪个读；

*   `???`- 匹配至少 3 个字符
*   `*` - 后跟任意数量的其他字符
*   `<` - 紧随其后的是`<`角色
*   `*` - 后跟任意数量的其他字符

我知道这不是一个直接的答案，但我希望它对你有所帮助......

**编辑：**

在下面回答您的评论。

你想要...吗;

> 找到一个字符串，其中某处有一个“<”，两边至少有一个字符

这会导致查询；

```
Dim rc As Boolean = "2" Like "*?<?*" 
```

这将返回 False 作为结果；

```
Dim rc As Boolean = "<" Like "*?<?*" 
```

然而;

```
Dim rc As Boolean = "2<2" Like "*?<?*" 
```

会返回真。

我希望这会有所帮助（更多！）

# c - 以编程方式检查进程是否在后台运行

> ID：14894261
> 
> 赞同：5
> 
> 时间：2013-02-15T11:59:00.987
> 
> 标签：c, linux, background-process

2个问题：

1) 是否有任何 Linux/Posix API 可以知道某个进程是否已作为后台进程调用？

```
linux> myprogram & 
```

代码是否可以`myprogram`检测到它已被调用以在后台运行（通过`&`）？

2) 是否有任何 Linux/Posix API 可以使进程在后台运行，即使它已作为前台进程启动？IE 在运行时以某种方式从 shell 中“分离”..（完全从 shell 中分离，或者作为 shell 的后台进程运行）。

```
linux> myprogram
**** starting myprogram as a background job ****
linux> 
```

由于`myprogram`已从外壳中分离并在后台运行，因此外壳提示符应立即返回给我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:08:27.277

1）有两种方法可以知道一个进程是否在后台

1.  有一个信号处理程序`SIGTTIN /SIGTTOUT`并根据哪个信号处理程序（stdin/stdout）进行非阻塞读/写。

2.  检查进程组并将其与终端匹配`getpgrp() == tcgetpgrp(STDOUT_FILENO)`

您将需要重复检查，因为该过程可以随时前台或后台。

2）有一个`daemon`功能将进程置于后台。建议在守护进程时将应用程序打印重定向到`syslog`其他文件。

```
if (daemonize) {
//redirect all prints to syslog or some other logfile
    daemon(0, 0);
} 
```

哪里`daemonize`可以成为应用程序是否进入后台的争论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:06:30.063

为了回答您的第二部分，这通常称为守护进程，它们是这样构建的。

```
main()
    pid = fork()
    if pid is child
          run program
    else we are the parent process
       exit to command prompt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:09:15.647

如果其父 shell 进程未挂起（等待），则该进程处于后台，您可以通过 PID 进行检查。

要将进程置于后台（在运行时将其与 shell 完全分离），请使用 daemon(3) 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:39:03.237

您可能需要阅读[tty(4)](http://www.kernel.org/doc/man-pages/online/pages/man4/tty.4.html)手册页。据我了解，后台进程没有任何进程`/dev/tty`（因此`open`该文件将失败）。

ioctl 应该将`TIOCNOTTY`调用进程与其控制终端分离。

您可能对[isatty(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/isatty.3.html)函数感兴趣（例如，检测您的*标准输入*或*标准输出*是否是终端）。

# php - 在 Centos 6.3 中使用 php-ldap

> ID：14894266
> 
> 赞同：10
> 
> 时间：2013-02-15T11:59:06.210
> 
> 标签：php, centos, openldap

我正在尝试使用 php 构建 LDAP 接口，但遇到了这个奇怪的问题。我已经在我的基础 php install 上使用 yum 安装了 php-ldap 包，但是每当我调用 ldap_connect() 时，它都会说该函数未定义。看到 phpinfo() 我可以验证确实安装并启用了 ldap 扩展。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-04T15:11:15.860

你确定你有openldap吗？

我刚刚意识到我有同样的问题，phpinfo 向我展示了 apache 加载的其他几个*ldap*模块，但我没有 openldap

[http://www.php.net/manual/en/ldap.installation.php](http://www.php.net/manual/en/ldap.installation.php)

我刚刚按照这里的说明成功安装：[http ://www.aoddy.com/2009/01/18/how-to-install-php-ldap-module-on-centos5/](http://www.aoddy.com/2009/01/18/how-to-install-php-ldap-module-on-centos5/)

来自链接的说明：

*   `yum install php-ldap`
*   `vi /etc/php.ini`
    *   添加`extension=ldap.so`
*   `service httpd restart`

# emacs - Emacs（24）：在c模式下换行时光标移动到第0列

> ID：14894267
> 
> 赞同：1
> 
> 时间：2013-02-15T11:59:07.777
> 
> 标签：emacs, c-mode

我目前正在使用 Emacs 24.0.91.1，并且每隔一段时间，当我处于 c 模式（启用自动填充模式）时，光标行为就会发生变化。

我想要的是当我向上/向下移动一行时光标保持在同一列上。但是，每隔一段时间，它就会跳到位置 0，我觉得这很烦人。有关如何禁用此功能的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-24T18:14:38.760

当我不小心将很多键插入我的 emacs 窗口时，我发现自己处于同样的情况。但是，我注意到它会继续将我的光标恢复到特定列，而不一定是第 0 列。像 OP 一样，我最初采取杀死并重新打开缓冲区来清除此行为。但是，经过搜索，我意识到我在尝试快速卡住某些命令时一定是不小心输入了 Cx Cn，导致意外调用`set-goal-column`.

[emacs 手册：移动点](http://www.gnu.org/software/emacs/manual/html_node/emacs/Moving-Point.html)：

> Cx Cn
> 
> 使用当前的 point 列作为 Cn 和 Cp 的半永久目标列（set-goal-column）。当半永久目标列生效时，这些命令总是在垂直移动后尝试移动到该列，或尽可能靠近它。目标栏在取消之前一直有效。

`*Messages*`调用此命令时，我在 emacs 的缓冲区中得到以下输出：

> 目标列 16（使用带有 arg 的 Cx Cn 取消设置）

要为 Cx Cn 提供参数并消除此效果，您可以使用“数字前缀参数”提供参数。例如， **C-0 Cx Cn**（提供 的数字前缀参数`0`）清除半永久目标列。

# java - java应用程序：html页面编码问题

> ID：14894268
> 
> 赞同：0
> 
> 时间：2013-02-15T11:59:08.000
> 
> 标签：java, apache, tomcat, netbeans, webserver

好的，我搜索了两天的解决方案，但令人惊讶的是仍然没有找到答案。我有 java 应用程序（NetBeans 7.2、tomcat 7、windows 7），当我在本地运行它时，它显示国际（在我的情况下为俄语）字符错误。

完成以下操作：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

在页面中设置。

```
<Connector URIEncoding="UTF-8" ... 
```

在Tomcat中设置。我还尝试将 '-Dfile.encoding = UTF8' 设置为 JVM 参数，但它仍然显示错误的文本（它只是 .html 文件中的简单文本，而不是从数据库中提取的）。文件编码也是UTF-8。当我转到运行该应用程序的本地服务器时，它显示正常！所以我想问题出在我的机器上（我的系统区域设置为俄语）。我运行俄语 Windows 的同事也没有遇到这个问题。我有英文窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:53:41.657

终于好了！环境

```
Application#getMarkupSettings().setDefaultMarkupEncoding("UTF-8") 
```

在应用程序启动时帮助了我。所以问题出在 Wicket 而不是 Tomcat 上。我在这里找到了答案 - [Tomcat + Wicket: UTF-8 chars not rendering proper](https://stackoverflow.com/questions/6801146/tomcat-wicket-utf-8-chars-not-rendering-properly)

# save - 使用 ExtJS 4.1 保存一批记录时如何处理单个故障？

> ID：14894270
> 
> 赞同：1
> 
> 时间：2013-02-15T11:59:10.327
> 
> 标签：save, extjs4.1

假设我有一个`Ext.grid.Panel`包含用户列表。经过一些更新操作后，我将这批修改后的记录发送到远程数据库：

```
[{"id":1,"login":"Jack"},{"id":2,"login":"Jack"}] // request body 
```

在服务器端，我将一条记录存储在数据库中。由于知道登录名必须是唯一的，因此不会存储第二条记录，因为“Jack”不再可用。然后，我必须通知用户他错误地将相关网格单元标记为脏。有没有办法让 ExtJS 处理它？例如，JSON 响应中的标志？

* * *

## 更新

有时我需要更高的精度，仅将单个记录的一个字段标记为无效。例如，假设我想更新一条记录的两个字段，“login”和“favorite”：

```
[{"id":1,"login":"Jack","favorite":true}] // request body 
```

两个字段一起发送到同一个 URL，然后通过两个不同的 SQL 查询分别处理，但是保存“登录”成功，而保存“收藏”失败。ExtJS 是否能够将每个字段与单个 JSON 响应分开处理？

* * *

## 更新

最终，主要问题是：将 ExtJS 4 数据包与服务器端 CRUD API 连接的最佳实践是什么？

您能否分享您在这些相关主题上的经验：服务器端 CRUD 架构、请求正文与 HTTP POST 参数、批量记录与单个记录、错误处理和 JSON 响应......？

这是我自己的工作环境：

*   ASP.NET 3.5
*   ExtJS 4.1.1a
*   Ext.data.proxy.Ajax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:57:51.990

我发现了一个有趣的资源： http: [//mvc.ext.net/#/GridPanel_Update/Batch](http://mvc.ext.net/#/GridPanel_Update/Batch)。乍一看，他们似乎实现了自己的客户端和服务器之间的通信逻辑，绕过了框架提供的代理功能。很难深入调查，因为源代码目前不可用。这是一个例子：

请求数据（HTTP POST）：

```
data: {
    "Updated": [{
        "Id": 1,
        "Email": "fred@flintstone.com",
        "First": "Fred",
        "Last": "Flintstone"
    }],
    "Created": [{
        "Email": "test@test.com",
        "First": "f",
        "Last": "l",
        "PhantomId": "ext-record-1"
    }]
} 
```

响应数据：

```
{script:"var _m0 = App.Store1.getByInternalId(\"ext-record-1\");_m0.setId(8);_m0.commit();App.Store1.getById(1).commit();"} 
```

# php - 扩展抽象类时的意外结果

> ID：14894279
> 
> 赞同：2
> 
> 时间：2013-02-15T12:00:13.683
> 
> 标签：php

我试图故意打印一个错误“有一个错误”但得到“成功”消息？

知道为什么吗？

谢谢

```
abstract class Restful
{
  public $error = array();

  public function __construct()
  {
     //Doing something here
     //....
     //....
     $this->validate_params();
  }

  public function validate_params()
  {
     $this->error[] = 'test error';
  }
}

class RestfulRequest extends Restful
{
  public function __construct()
  {
     if (count($this->error) > 0)
     {
        exit('There is an error');
     }

     echo 'Success';
  }
}

new RestfulRequest(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:02:21.280

您忘记调用父构造函数：

```
class RestfulRequest extends Restful
{
  public function __construct()
  {
     parent::__construct(); // <-- added
     if (count($this->error) > 0)
     {
        exit('There is an error');
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:03:48.797

使用 PHP 的类扩展机制，当你重写一个方法时，只调用被重写的方法；除非您显式调用它，否则不会调用父类中的方法。

因此，在您的示例中，`__construct()`永远不会调用基类中的方法。

为了做你想做的事，你需要让`RestfulRequest::__construct()`方法显式调用它的父方法，如下所示：

```
public function __construct()
  {
     parent::__construct();    //add this line!
     if (count($this->error) > 0)
     {
        exit('There is an error');
     }

     echo 'Success';
  } 
```

希望有帮助。

# c# - 如何在 C# 中读取 utf-8 编码的字符串？

> ID：14894289
> 
> 赞同：1
> 
> 时间：2013-02-15T12:00:50.150
> 
> 标签：c#, utf-8, character-encoding

我的情况是：

*   在 Outlook Express 中创建电子邮件并将其保存为 .eml 文件；
*   在 C# 控制台应用程序中将文件作为字符串读取；

我正在保存以 utf-8 编码的 .eml 文件。我写的一个例子是：

1.  'Goiâniaé badalação'。

有像âéçã这样的特殊字符。它是葡萄牙语字符。当我用记事本++打开文件时，文本显示如下：

1.  'Goi=C3=A2nia =C3=A9 badala=C3=A7=C3=A3o.'

如果我再次在outook express打开它，它显示正常，就像第一种方式一样。当我在控制台应用程序中读取文件时，使用 utf-8 解码，字符串显示为第二种方式。

我使用的代码是：

```
string text = File.ReadAllText(@"C:\fromOutlook.eml", Encoding.UTF8);
Console.WriteLine(text); 
```

我尝试了所有的编码选项和很多我在网上找到的方法，但没有任何效果。有人可以帮我做这个简单的转换吗？

'Goi=C3=A2nia =C3=A9 badala=C3=A7=C3=A3o.' 到“Goiânia é badalação”。

```
 string text = "Goi=C3=A2nia =C3=A9 badala=C3=A7=C3=A3o.";

    byte[] bytes = new byte[text.Length * sizeof(char)];
    System.Buffer.BlockCopy(text.ToCharArray(), 0, bytes, 0, bytes.Encoding.UTF8.GetString(bytes, 0, bytes.Length);

    char[] chars = new char[bytes.Length / sizeof(char)];
    System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
    Console.WriteLine(new string(chars)); 
```

在这个 utf-8 表中，您可以看到十六进制。这些字符的值，'é' == 'c3 a9'： [http ://www.utf8-chartable.de/](http://www.utf8-chartable.de/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:36:28.587

```
var input = "Goi=C3=A2nia =C3=A9 badala=C3=A7=C3=A3o.";             
var buffer = new List<byte>();
var i = 0;
while(i < input.Length)
{
    var character = input[i];
    if(character == '=')
    {
        var part = input.Substring(i+1,2);
        buffer.Add(byte.Parse(part, System.Globalization.NumberStyles.HexNumber));
        i+=3;
    }
    else
    {
        buffer.Add((byte)character);
        i++;
    }
};
var output = Encoding.UTF8.GetString(buffer.ToArray());
Console.WriteLine(output); // prints: Goiânia é badalação. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:42:04.663

知道问题是引用可打印的，我在这里找到了一个很好的解码器：

[http://www.dpit.co.uk/2011/09/decoding-quoted-printable-email-in-c.html](http://www.dpit.co.uk/2011/09/decoding-quoted-printable-email-in-c.html)

这对我有用。

谢谢各位。

**更新：** 上面的链接已经失效，这是一个可行的应用程序：

[如何转换引用打印字符串](https://stackoverflow.com/questions/37540244/how-to-convert-quoted-print-string/37540375#37540375)

# c# - 如何管理动画？

> ID：14894290
> 
> 赞同：1
> 
> 时间：2013-02-15T12:00:52.780
> 
> 标签：c#, animation, unity3d

我正在使用 C#，目前正在构建第三人称视角游戏。我有一个带有帧动画的 3D 角色模型，所以我必须逐帧剪切动画

问题是我目前有 5 个动画（空闲、跑步、步行、打孔、跳跃），这是我的代码

```
void Update () {
    if (Input.GetAxis("Horizontal") != 0 || Input.GetAxis("Vertical") != 0){
        //play run animation
    } else {
        if (motion.x != 0 || motion.z != 0){
            motion.x = 0;
            motion.z = 0;
        }
                    //play idle anim
    }

    if (Input.GetKeyDown(KeyCode.Space) && controller.isGrounded){
    //play jump anim
    }

    if (Input.GetKeyDown(KeyCode.P)){
        //play punch anim
    }

    if (!controller.isGrounded){
        //play jump anim
    }

    vertVelo -= gravity * Time.deltaTime;
    motion.y = vertVelo;
    this.controller.Move(motion * Time.deltaTime);
} 
```

当我按 P 使字符打孔时，就会出现问题。似乎正在调用更新函数中的空闲动画，因此打孔动画没有时间播放。

那么，解决方案是什么？是否有任何动画管理技术或者我应该使用延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:57:38.200

您可以在播放打孔时阻止空闲动画（但这可能不是最佳方法）：

```
bool isPunchPlaying = false;

void Update () {
    //... 
    if (!isPunchPlaying) {
        // Play idle anim
    }
    // ...
    if (Input.GetKeyDown(KeyCode.P)){
        //play punch anim
        isPunchPlaying = true;
        StartCoroutine(WaitThenDoPunch(animation["punch"].length));
    }
    // ...
}

IEnumerator WaitThenDoPunch(float time) {
    yield return new WaitForSeconds(time);
    isPunchPlaying = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:02:34.267

尝试在 Unity 中搜索动画层并在动画之间进行混合。

您可以在具有较高层号覆盖较低层的层上设置动画循环。

这意味着您可以在第 1 层上有空闲循环，并且它会连续播放。然后说你的跳转循环在第 2 层。当跳转逻辑触发跳转循环时，它会播放一次，然后空闲循环继续。

这个关于 Unity 中“AnimationState”的文档也很有用[> 链接 <](http://docs.unity3d.com/Documentation/ScriptReference/AnimationState.html)

# javafx - 这是为 JavaFx 应用程序编码的正确方法吗？

> ID：14894297
> 
> 赞同：1
> 
> 时间：2013-02-15T12:01:16.260
> 
> 标签：javafx

我是 JavaFX 的新手。所以我想知道下面提供的代码是通过声明 .fx 文件来为 JavaFX 应用程序添加代码的好方法。

或者

我们应该使用.java 文件进行编码。在这方面需要帮助。

```
 import javafx.stage.Stage;
   import javafx.scene.Scene;
   import javafx.scene.Group;
   import javafx.scene.text.Text;

   import javafx.ext.swing.SwingLabel;
   import javafx.ext.swing.SwingTextField;
   import javafx.ext.swing.SwingButton;

   var login = false;
   var userName = "";
   var systemUser = "test";
   Stage {
    title : "Login App"
    scene: Scene {
        width: 300
        height: 300
        content: bind if(not login) Group{
                          content: [
                             SwingLabel{
                                 text: "User Name:"
                             },

                             SwingTextField {
                                 text : bind userName with inverse;
                                 columns : 10;
                                 editable : true;

                             },
                             SwingButton{
                                 translateX: 50
                                 translateY: 50
                                 text: "Submit"
                                 action: function(){
                                     if((userName != systemUser)) {
                                            println("Invalid UserName");

                                 }
                                 login = (userName == systemUser);
                                 }
                            }

                         ]
                     } 
                     else Group{
                         content: [

                   Text {
                                 x: 10 y: 30
                                 content: "You have successfully logged in."
                              },
                              SwingButton{
                                 translateX: 10
                                 translateY: 50
                                 text: "Log out"
                                 action: function(){
                                  userName = "";
                                  login = false;
                                }
                              }

                      ]
                  }
                } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:53:23.947

您问题中的 JavaFX 脚本代码（带有 .fx 文件）来自过时的 JavaFX 1.x 分支。 **我强烈建议您不要使用 JavaFX 1.x 分支**。Oracle 本月将放弃对它的所有支持。

您问题中的脚本代码还集成了 JavaFX 中的 Swing 控件，当前 JavaFX 2.x 版本不支持该控件。

相反，使用 JavaFX 2+ 并使用 Java（带有 .java 文件）编写 JavaFX 代码，仅使用 JavaFX 控件而不使用 Swing 控件。

有一些出色的教程可以帮助您入门：

*   [Oracle 的集成示例](http://www.oracle.com/technetwork/java/javafx/samples/index.html)
*   [edu.maker.ch JavaFX 教程](http://edu.makery.ch/blog/2012/11/16/javafx-tutorial-addressapp-1/)
*   [Oracle 的 JavaFX HelloWorld 应用程序](http://docs.oracle.com/javafx/2/get_started/hello_world.htm)
*   [JavaFX 文档主页](http://docs.oracle.com/javafx/index.html)
*   [StackOverflow JavaFX 社区 Wiki 资源列表](https://stackoverflow.com/tags/javafx-2/info)
*   [Oracle 的 Java 教程（如果您需要学习 Java 语言）](http://docs.oracle.com/javase/tutorial/index.html)

# git - 推送到本地分支和远程后文件消失

> ID：14894299
> 
> 赞同：0
> 
> 时间：2013-02-15T12:01:36.817
> 
> 标签：git, github

在我的 Git 存储库中，我有 3 个分支：

*   掌握
*   开发者
*   gh页面

我的主要想法是将所有数据提交到`dev, gh-pages`（并推送到远程进行存储或备份）。毕竟完成..合并到主人。

有趣的是..当我将数据提交给开发`gh-pages`人员并推送它们时，我的文件正在消失！（为什么会这样？）

现在，毕竟发生了，我想克隆我的 repo，再次处理它.. 因为 master 上没有文件，它没有克隆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:04:31.813

我猜你在or中使用`git merge master`了 while ，这合并**了 from**，而不是**to**。`dev``gh-pages` **`master` **`master`****

 ****您需要先切换到 master，然后从要合并的分支合并：

```
git checkout master
git merge <branch> 
```

顺便说一句，`gh-pages`应该与您的代码分开。它用于 github 存储库的文档，这些文件与您的代码无关。不要将其内容合并到`master`.****

# regex - 在 UNIX 中将出现的“[any number]”替换为“[number]”

> ID：14894308
> 
> 赞同：0
> 
> 时间：2013-02-15T12:02:06.983
> 
> 标签：regex

我的文件中有条目，例如

```
abcd abcd [23]
shbfh sfklgh [47]
sdgnjsfgj [45] 
```

我想把它改成

```
abcd abcd[23]
shbfh sfklgh[47]
sdgnjsfgj[45] 
```

我试过`sed 's/ \[[0-9]+\]/\[[0-9]+\]/g'`了，但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:04:18.737

您需要捕获该组，并使用对它的反向引用来代替：

```
sed 's/ \(\[[0-9]\+\]\)/\1/g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:06:39.017

如果这将是方括号的唯一出现，您可以使用类似这样的方法消除任何方括号之前的空格：

```
sed 's/ \[/\[/' 
```

# windows - 在 Windows 上安装 CasperJS：如何正确执行？

> ID：14894311
> 
> 赞同：35
> 
> 时间：2013-02-15T12:02:21.160
> 
> 标签：windows, phantomjs, casperjs

我知道 CasperJS 网站上有一个关于如何在 Windows 上安装 CasperJS 的文档，但请耐心等待这些人只为专业人士解释。

如果您对所有这些 CasperJS 和 PhantomJS 世界都不熟悉，那么您甚至没有机会去理解甚至花两天时间在网上搜索以获得更好的解释。

我正在做一个项目，该项目需要我的项目网站上列出的每个网站的屏幕截图，环顾四周，我发现 PhantomJS 非常适合这项任务（网站截图）。

我下载了 PhantomJS 并粘贴了它的`phantomjs.exe`文件，`system32`当我`cmd.exe`用来发送命令时它运行良好。

我什至设法用`phantomjs.exe`唯一的截图。但是当我注意到当这两者（CasperJS 和 PhantomJS）一起工作时工作量可能会更容易时，我的问题就来了，因为我什至可以在使用 CasperJS 时减小屏幕截图的大小。

事实上，我想要 CasperJS 的唯一用途是限制镜头大小，但从昨天开始，我一直试图弄清楚如何让 CasperJS 在 Windows 上工作，但无济于事。

我已经下载了 CasperJS 并尝试以多种方式安装它，也尝试遵循文档但没有。

正如文档所建议的那样，我将 CasperJS 文件夹名称从其下载名称更改为 CasperJS，但是当我签入 cmd 试图调用一些命令时，没有任何反应。

无论如何，要剪辑故事镜头，考虑到我是一个新手来解释如何将 CasperJS 安装在窗口上，或者如果可能的话，只能使用 PhantomJS 我如何重新调整程序产生的 iamge 的大小让我说如果我想要 960 到 400 像素。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-07-11T03:49:59.663

windows 的文档很差。[http://casperjs.org/installation.html#windows](http://casperjs.org/installation.html#windows)

它开始假设您已经安装，但没有告诉您如何安装。

因此，如果其他人对此感到困惑，那就是这里。没有实际安装。它只是将 zip 内容提取到正确的位置。

1.  从 phantomjs 站点下载适用于 windows 的 phantomjs（它是一个包含二进制文件的 zip）
2.  将内容提取到 C:\phantomjs
3.  从 casperjs 网站下载 casperjs zip 文件
4.  将内容提取到 C:\casperjs
5.  现在您可以将以下内容添加到您的系统或用户 PATH 变量的末尾

    ;C:\phantomjs;C:\casperjs\batchbin

6.  如果您正在运行 Console2 或 Conemu 终端仿真器，则重新启动 cmd.exe 以获取新路径变量或注销/登录（它们不会通过简单的关闭和重新打开来获取新路径）

现在在文档中它说像这样运行它

```
casperjs.bat myscript.js 
```

实际上，由于 phantomjs.exe 和 casperjs.bat 现在都在系统 PATH 中，因此您可以像这样取消扩展。

```
casperjs myscript.js 
```

运行 phantomjs.exe 时只需运行

```
phantomjs 
```

还有一件事。只要将该路径添加到系统PATH，安装位置实际上并不重要。我安装到 C:\usr\phantomjs 和 C:\usr\casperjs。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-30T09:54:46.413

我在下面列出了在我的个人 Windows 和 Ubuntu 工作 PC 上满足我需求的方法。请注意，我的方法不会调整 PATH 设置，而是涉及一个可以保存在某处并根据需要复制和粘贴的命令：

第 1 步：*收集先决条件*

*   下载你要使用的 casperjs 和 phantomjs 版本
*   创建一个目录来包含我想要列出的东西
*   解压下载的phantomjs并将其可执行文件复制到*步骤b的目录中*
*   提取 casperjs 并将其文件夹重命名为**casperjs**
*   将改名后的**casperjs**文件夹复制到*步骤b的目录下*
*   创建一个文件**config.json并保存到***步骤 b*的目录
**   **config.json**应该包含 phantomjs 配置，如下所示：http: [//phantomjs.org/api/command-line.html](http://phantomjs.org/api/command-line.html)*

 *第 2 步：*运行脚本*

*   每当您想使用文件时，请按照上面的**第 1 步**详细信息进行操作
*   下一步假设您在**步骤 1的***步骤 b*中创建的目录中还有一个名为*first.js的文件*
****   在 Windows 上：phantomjs.exe --config=config.json casperjs/bin/bootstrap.js --casper-path=casperjs --cli first.js*   在 Ubuntu 上：./phantomjs --config=config.json casperjs/bin/bootstrap.js --casper-path=casperjs --cli first.js***

 ***下面列出了实验性的*config.js*和*first.js ：*

**配置文件**

> {“sslProtocol”：“任何”，“cookiesFile”：“饼干”，“maxDiskCacheSize”：1000，“diskCache”：true}

**第一个.js**

```
var casper = require('casper').create({
    pageSettings: {
        loadImages: false,
        loadPlugins: true,
        userAgent: 'Mozilla/5.0 (Windows; U; Windows NT 5.1; nl; rv:1.9.1.6) Gecko/20091201 Firefox/3.5.6'
    }
});
var url = "http://casperjs.org/";

casper.start(url).wait(60 * 1000 * 1, function() {
     casper.echo('1 min has passed');
     casper.capture('casperjs.png');
     casper.exit();
});

casper.run(); 
```

**附录**：下载并保存[screenshots.js](https://gist.githubusercontent.com/nhoizey/4060568/raw/5bb80164ab75c6097c247b40a0b31d3aebec9bf0/screenshots.js)的详细信息并运行它

> phantomjs.exe --config=config.json casperjs/bin/bootstrap.js --casper-path=casperjs --cli screenshots.js [http://phantomjs.org](http://phantomjs.org)

**运行测试**：下载并保存[picturefill-test.js](https://gist.githubusercontent.com/rupl/50ab8df2b534f6649290/raw/d070f163aa48424a34421cf436b01ca483f87ec4/picturefill-test.js)的详细信息 并运行它

> phantomjs.exe --config=config.json casperjs/bin/bootstrap.js --casper-path=casperjs test --cli picturefill-test.js

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-31T17:30:57.557

从***CasperJS 1.1.0-DEV Beta 3 开始***，您应该使用此 PATH：`C:\casperjs\batchbin`即使在[此处](http://docs.casperjs.org/en/latest/installation.html)找到的文档声明您需要使用`C:\casperjs\bin`

这样做的原因是因为`C:\casperjs\batchbin`包含一个 .BAT，它除了某些文件`C:\casperjs\bin`之外不包含任何内容。`.js`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-17T10:41:55.680

经过 3 天的工作，我设法让它工作，问题在于路径和幻象的安装。我已经创建了文件夹的路径，但安装指向 exe 文件，我所要做的就是将 exe 文件放入文件夹 phantomjs 中，这就是感谢大家的帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-19T18:15:32.717

**Many of the other answers are out of date. Since it seems like the correct install process keeps changing all the time, I suspect my answer will be out of date also in a few days, but as of March 19, 2015, this is the answer.** The other answers, even highly upvoted ones, do not work, so don't waste your time. Good luck. Casperjs seems quite good.

If you download PhantomJS 2.0 and casperjs 1.1-beta3 zip file and put the batchbin directory in the path and put phantom exe in that same folder, then run casperjs, on Windows 8.1 I get the error "CasperJS needs PhantomJS v1.x".

So, I got the latest casperjs direct from github, which has no batchbin directory, so I put just the C:\casperjs\bin directory in the path instead and this worked (sort of, I mean it seems to work well enough for me - although running casperjs c:\casperjs\tests\selftest.js seems to have a number of failing tests).

So to recap, the bad news is only the very latest bleeding edge casperjs works. The good news is the install is 1,2,3 simple:

1.  Clone latest casperjs from github into c:\casperjs.
2.  Copy phantomjs.exe (ver 2.0) to c:\casperjs\bin
3.  Add c:\casperjs\bin to your windows path

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-06T14:01:13.450

以防万一您像我一样使用带有双显卡的笔记本电脑：选择其中一个以防止出现问题。这篇文章帮助了我：

[casperJS 没有在 Windows 上完成](http://mrkeck.com/2013/12/02/casperjs-not-finishing-on-windows/)

casperJS 文档对此非常清楚，但在阅读上面的通知之前，我不知道该怎么做。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-08T12:11:22.220

好了朋友们。所以我认为这个线程需要在 2018 年刷新！

因此，使用`npm`，工作量大大减少。鉴于您已经`npm`安装，打开终端并转到您的项目：

`cd your_project_name`

现在安装 casperjs。根据需要使用`--save-dev`、`--save`或`-g`无：

`npm install --save-dev casperjs`

现在安装 phantomjs。为此，您应该安装 phantomjs-prebuilt，因为 PhantomJS 团队更改了他们的包名称：

`npm install --save-dev phantomjs-prebuilt`

运行你的规范：

`casperjs your_spec_name.js`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-04T11:52:00.083

快进到 2015... 5 步 win7 如何：

1.  **巧克力：** `PS me> iex ((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))`
2.  **混帐：** `choco install git -y`
3.  **幻影2.0：** `choco install phantomjs -y`
4.  **casperjs 来源：** `git clone https://github.com/n1k0/casperjs -b phantomjs-2`
5.  将位置添加`casperjs/bin`到 PATH

完毕。你现在可以`casperjs --version`过上幸福的生活。****

# vim - Vim EasyMotion 搜索匹配

> ID：14894313
> 
> 赞同：0
> 
> 时间：2013-02-15T12:02:53.873
> 
> 标签：vim, vim-plugin

[Vim EasyMotion](https://github.com/Lokaltog/vim-easymotion)使用以下搜索字符：

```
<Leader>fc 
```

它突出显示了我可以选择的所有出现的字符。

搜索匹配是否有等效的动作，例如

```
<Leader>fadd 
```

哪个突出显示了我可以从中选择的所有出现的短语“add”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:12:12.220

`<leader>f{char}`带给您个性，而不是搜索模式。（现在默认`<leader><leader>f`）

我使用这个插件的方式是，我正在观察我想去的位置（字符或单词），输入`<leader><leader>f or w...`，输入突出显示的字母以将光标移动到正确的位置。所以我不需要使用easymotion进入某种模式。

但是你想要的都是可能的。您可以`add`先搜索，按`/`or `?`，然后键入`<leader><leader>n`or `<leader><leader>N`all `add`s are with a prefix，您可以选择。

（如果您的 easymotion 映射是 single `<leader>`，请将双引线更改为单）

读 `:h easymotion`

> 2.1 默认映射

详情

# java - 在 xstream 中映射属性

> ID：14894318
> 
> 赞同：4
> 
> 时间：2013-02-15T12:03:01.057
> 
> 标签：java, xml, xstream

我有这样的 XML：

```
<qualification name="access">
    <attribute name="abc">OK</attribute>
    <attribute name="res">OK 2</attribute>
    <requesturi>http://stackoverflow.com</requesturi>
</qualification> 
```

类是：

```
public class Qualification {
  @XStreamAsAttribute
  private String name;

  private String requesturi;
} 
```

我怎样才能映射`<attribute name="abc">OK</attribute>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:06:57.300

写完属性转换器。问题解决了。

```
package com.xstream;

import com.thoughtworks.xstream.annotations.XStreamAsAttribute;

public class Attribute {

  @XStreamAsAttribute
  private String name;

  private String value;

  public Attribute(String name, String value) {
    this.name = name;
    this.value = value;
  }

  /**
   * @return the name
   */
  public String getName() {
    return name;
  }

  /**
   * @param name the name to set
   */
  public void setName(String name) {
    this.name = name;
  }

  /**
   * @return the value
   */
  public String getValue() {
    return value;
  }

  /**
   * @param value the value to set
   */
  public void setValue(String value) {
    this.value = value;
  }

  /* (non-Javadoc)
   * @see java.lang.Object#toString()
   */
  @Override
  public String toString() {
    return "Attribute [name=" + name + ", value=" + value + "]";
  }

} 
```

`AttributeConverter`类是：

```
package com.xstream;

import com.thoughtworks.xstream.converters.Converter;
import com.thoughtworks.xstream.converters.MarshallingContext;
import com.thoughtworks.xstream.converters.UnmarshallingContext;
import com.thoughtworks.xstream.io.HierarchicalStreamReader;
import com.thoughtworks.xstream.io.HierarchicalStreamWriter;

public class AttributeConverter implements Converter{

  @Override
  public boolean canConvert(Class clazz) {
    return clazz.equals(Attribute.class);
  }

  @Override
  public void marshal(Object object, HierarchicalStreamWriter writer, MarshallingContext context) {
    System.out.println("object = " + object.toString());
    Attribute attribute = (Attribute) object;
    writer.addAttribute("name", attribute.getName());  
    writer.setValue(attribute.getValue());  

  }

  @Override
  public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) {
    return new Attribute(reader.getAttribute("name"), reader.getValue());

  } 

} 
```

在 Qualification 类中使用它作为：

```
 @XStreamConverter(AttributeConverter.class)
  private Attribute attribute; 
```

在主类中注册转换器为：

```
xstream.registerConverter(new AttributeConverter()); 
```

# iphone - 更改 UISegmentedControl 的选定段

> ID：14894322
> 
> 赞同：0
> 
> 时间：2013-02-15T12:03:14.167
> 
> 标签：iphone, ios, objective-c, ios6

`UISegmentedControl`我有一个`ModeViewController`

**模式视图控制器.h：**

```
@property (weak, nonatomic) IBOutlet UISegmentedControl *Segment;
- (IBAction)switchMode:(id)sender; 
```

**模式视图控制器.m：**

```
- (IBAction)switchMode:(id)sender {
    //I Tried this way    
    UISegmentedControl *segmentedControl = (UISegmentedControl *) sender;
    _Segment.selectedSegmentIndex = segmentedControl.selectedSegmentIndex;

//or this way
NSInteger selectedSegment = segmentedControl.selectedSegmentIndex;
[_Segment setSelectedSegmentIndex:selectedSegment];

} 
```

但是一旦我更改`ViewController`并返回它只会显示默认选择的段！任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:14:13.740

在您更改视图控制器并返回再次调用 viewDidLoad 方法后，这就是您看到默认选定索引的原因。解决此问题的方法是将选定的选定索引存储到某个应用程序委托属性中，或者您可以创建单例类以更好地设计以保留状态。并在您的 viewDidLoadMethod 中。

```
-viewDidLoad
{
  AppDelegate *delegate=[[UIApplication sharedAppliection]delegate];
  [_Segment setSelectedSegmentIndex:delegate.selectedIndex];
} 
```

这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:44:14.800

**问题**

这里的问题是，当一个 Viewcontroller 以模态方式呈现时，它内部的属性只有生命周期，直到它被解雇。

检查您的代码，将有一个 viewcontroller 的实例化，它为您提供一个新实例，在这个新实例中，将显示来自 nib set 值的段控件（或您设置的任何内容`viewDidload`或`ViewWillAppear`方法

**解决方案**

解决方案是将值存储在可以检索并在 viewDelegates 中设置为的位置

```
 [self.segment setSelectedSegmentIndex:storedIndex]; 
```

为了这个存储目的，有不同的选择

1.  appDelegate 中的全局变量
2.  NSUserDefaults
3.  核心数据
4.  方镁石
5.  列表
6.  文本文件

最简单的是第一个，但如果您正在实施其中任何一个，那么这已经是一个相当大的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:11:23.873

您需要`selectedSegment`在您的应用程序中将该变量设为全局变量。你可以定义它`AppDelegate`

[iPhone，我如何 App Delegate 变量可以像全局变量一样使用？](https://stackoverflow.com/questions/3833294/iphone-how-do-i-app-delegate-variable-which-can-be-used-like-global-variables)

# iphone - 在录制的视频上添加日期和时间

> ID：14894324
> 
> 赞同：3
> 
> 时间：2013-02-15T12:03:24.793
> 
> 标签：iphone, objective-c, video-recording

在我的应用程序中有录制视频的功能，我想在录制的视频上添加时间和日期详细信息。

简单地说，我可以在它在应用程序中运行时添加，但我想做的是如果我在照片应用程序中导出该视频或通过电子邮件发送该视频，那么日期和时间也应该在那里。

我从苹果检查了这个示例代码，但在这个文本中可以是静态的，将始终保持不变。

[AVSimpleEditor](http://developer.apple.com/library/ios/#samplecode/AVSimpleEditoriOS/Introduction/Intro.html)

任何人都可以指导我或任何链接吗？如何在视频上添加时间戳细节..

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-15T10:57:21.043

您可以使用Brad Larson 的[GPUImage 类](https://github.com/BradLarson/GPUImage)，它允许您根据需要为图像和视频添加过滤器。我只是实现了您最近在我的一个项目中要求的确切内容。

我所做的是使用 UILabel`GPUImageUIElement`并将其添加到`GPUImageNormalBlendFilter`. 我用每个回调更新了标签文本，它就像一个魅力。

这是代码：

```
filterView = [[GPUImageView alloc] initWithFrame:self.videoRecordView.frame];
videoCamera = [[GPUImageVideoCamera alloc] initWithSessionPreset:AVCaptureSessionPreset1920x1080 cameraPosition:AVCaptureDevicePositionBack];

movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(1920,1080)];

[self.view addSubview:filterView];
movieWriter.encodingLiveVideo = YES;
movieWriter.encodingLiveVideo = YES;
videoCamera.audioEncodingTarget = movieWriter;

GPUImageNormalBlendFilter *blendFilter1 = [[GPUImageNormalBlendFilter alloc] init];

UILabel *timeLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 635, 768.0f, 50.0f)];

timeLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:fontSize];
timeLabel.textAlignment = NSTextAlignmentCenter;
timeLabel.backgroundColor = [UIColor clearColor];
timeLabel.textColor = [UIColor whiteColor];

uiElementInput = [[GPUImageUIElement alloc] initWithView:timeLabel];
[uiElementInput addTarget:blendFilter1];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"MMMM dd, yyyy  hh : mm : ss a"];

[blendFilter1 addTarget:filterView];
[blendFilter1 addTarget:movieWriter];
[videoCamera addTarget:blendFilter1];

__unsafe_unretained GPUImageUIElement *weakUIElementInput = uiElementInput;
    [filter setFrameProcessingCompletionBlock:^(GPUImageOutput * filter, CMTime frameTime){

    timeLabel.textColor =[UIColor whiteColor];

    float sizefont =[[[NSUserDefaults standardUserDefaults]objectForKey:KfontSize] floatValue];
    timeLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:(sizefont)? sizefont:30];
    NSDate * originalDate = [NSDate dateWithTimeIntervalSinceNow:interval];

    NSString *timeString=[dateFormatter stringFromDate:originalDate];
    timeLabel.text = [NSString stringWithFormat:@"%@", timeString];
    [weakUIElementInput update];
}]; 
```

我知道问题很旧，但可能会对某人有所帮助，因为我花了一段时间才找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:37:43.477

您链接的示例向您展示了如何获得 90% 的方法。最后一步是查看[AVVideoCompositionCoreAnimationTool](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVVideoCompositionCoreAnimationTool_Class/Reference/Reference.html)的文档。此类允许您将任何核心动画添加到视频中。你如何做到这一点是通过将动画添加到[CALayer](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)。

如果您使用 CATextLayer，您可以为字符串属性设置动画。

# php - MSSQL/PHP 通过 JSON 到 HighChart

> ID：14894329
> 
> 赞同：0
> 
> 时间：2013-02-15T12:03:34.917
> 
> 标签：php, javascript, json, highcharts

我试图通过 php 从我的 SQL 服务器获取数据，并将其输出为 JSON，因此我可以将其用于 HighCharts。到目前为止，如果有意义的话，我可以将我的结果发布为不同的系列。

SQL/PHP：

```
$params = array(&$_POST['query']);

$tsql1 = "SELECT TOP 10 Company_Names, Revenue_Value1, Revenue_Value2

FROM Database.test report
GROUP BY Company_Name 
ORDER BY Revenue_Value1

$options = array("Scrollable" => SQLSRV_CURSOR_KEYSET);

$getProducts = sqlsrv_query($conn, $tsql1, $params, $options);

if ($getProducts === false)

die( FormatErrors( sqlsrv_errors() ) );

while( $row = sqlsrv_fetch_array( $getProducts, SQLSRV_FETCH_ASSOC) ) 
{
    $rows[] = $row;
}

echo json_encode($rows, JSON_NUMERIC_CHECK); 

sqlsrv_free_stmt( $getProducts );?> 
```

sql打印出这样的东西

[http://i.imgur.com/ww0kasV.png](http://i.imgur.com/ww0kasV.png)

并打印此图表：

[http://i.imgur.com/rh8ICVH.png](http://i.imgur.com/rh8ICVH.png)

显然，这不是我希望它输出的方式..

我希望它将 xAxis 输出为 Quarters，yAxis 输出为 Revenue_Value1，Series-name 输出为 Company_Name。

我目前正在使用它来获取我的 php 数据。

```
<script type="text/javascript">
$(function () {
    var chart;
    $(document).ready(function() {
        $.getJSON("data.php", function(json) {

            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    type: 'line',
                    marginRight: 130,
                    marginBottom: 25
                },
                title: {
                    text: 'Revenue',
                    x: -20 //center
                },
                subtitle: {
                    text: '',
                    x: -20
                },
                xAxis: {
                    categories: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],
                    title: { text: 'Months'}
                },
                yAxis: {
                    title: {
                        text: 'Revenue'
                    },
                    plotLines: [{
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }]
                },
                tooltip: {
                    formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                            this.x +': '+ this.y;
                    }
                },
                legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'top',
                    x: -10,
                    y: 100,
                    borderWidth: 0
                },
                series: json
            });
        });

    });

});
        </script> 
```

* * *

data.php 回显：

```
{"Company_Names":"Company_Name","Revenue_Value1":45443,"Revenue_Value2":4654} 
```

当然，由于一些规则，我不得不改变一些价值观。我希望你仍然可以看到我想要实现的目标。

编辑：

```
 $arr = array();

while( $row = sqlsrv_fetch_array( $getProducts, SQLSRV_FETCH_ASSOC) ) 
{
    $name = $row['Distributor'];
    $data = array($row['Value']);

    $arr[] = array('name' => $name, 'data' => $data);
}

echo json_encode($arr, JSON_NUMERIC_CHECK); 
```

这使我的数据以 HighCharts 可以读取的方式显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:24:30.497

你的系列应该在一个数组中尝试一些 var`j =[]; j.push(json);`然后做`series: j`

# spring - Websphere 8 / Spring security (LDAP) / 不重定向到 login.xhtml

> ID：14894330
> 
> 赞同：0
> 
> 时间：2013-02-15T12:03:35.667
> 
> 标签：spring, jsf, configuration, primefaces, websphere

我尝试在 Websphere 8 上运行 LDAP 和 Spring。它以某种方式做到了，但它不会将任何请求转发到我的 login.xhtml。

意思是，看起来您已登录，但您无法单击该页面上的任何内容，并且您不会被转发到登录页面。

如果我直接调用它（/faces/login.xhtml），登录然后单击，一切都按预期工作，所以只是我的应用程序没有将我转发到所需的登录页面。

希望你们有一个好主意。

我的 web.xml 看起来像这样：

```
<!-- removed non-relevant parts-->
<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

我的 applicationSecurity.xml 看起来像这样：

```
<security:http pattern="/faces/ressources/**" security="none"/>
<security:http auto-config="true" pattern="/**">
  <!-- Login pages -->
  <security:form-login login-page="/faces/login.xhtml" default-target-url="/faces/index.xhtml"
                       login-processing-url="/faces/j_spring_security_check"
                       authentication-failure-url="/faces/login.xhtml" />
  <security:logout logout-success-url="/faces/login.xhtml" />
  <!-- Security zones -->
  <!-- secured -->
  <security:intercept-url pattern="/faces/index.xhtml" access="ROLE_APP_QPA_ADMIN,ROLE_APP_QPA_USER" />
  <security:intercept-url pattern="/faces/datadictionary/**" access="ROLE_APP_QPA_ADMIN,ROLE_APP_QPA_USER" />
  <security:intercept-url pattern="/faces/templates/**" access="ROLE_APP_QPA_ADMIN,ROLE_APP_QPA_USER" />
</security:http> 
```

我不知道我还能做什么。如果这很重要，我使用 Spring 作为共享库。

# jquery - 在 MVC4 和 jquery ui 1.9 上添加 jquery 选项卡

> ID：14894332
> 
> 赞同：1
> 
> 时间：2013-02-15T12:03:36.787
> 
> 标签：jquery, asp.net-mvc-4, tabs, partial-views

我试图在局部视图上动态添加一个新选项卡，这是我的代码：

**脚本**

```
 $(document).ready(function () {
        $("#tabs").tabs();
        jQuery("button").button().click(function () {
             var tabs = $( "#tabs" ).tabs();
             var ul = tabs.find( "ul" );
             $( "<li><a href='#tab4'>New Tab</a></li>" ).appendTo( ul );
             $("<div id='tab4'><p>New Content</p></div>").appendTo(tabs);
             tabs.tabs( "refresh" );
        });
     }); 
```

**HTML**

```
<div id=tabs>
<ul>
    <li><a href=#tab1>Tab 1</a></li>
    <li><a href=#tab2>Tab 2</a></li>
    <li><a href=#tab3>Tab 3</a></li>
</ul>
    <div id=tab1>Contents of the first tab</div>
    <div id=tab2>Contents of the second tab</div>
    <div id=tab3>Contents of the third tab</div>
</div>

<button>add</button> 
```

问题，当我按下按钮时，我得到了这个：

![http://i.stack.imgur.com/sYg0o.png](../Images/7e46dd4ec578e346adf3ce8f7bdefb66.png)

就像 hte 新标签没有被添加到标签中并且内容被加载到标签的末尾。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T13:55:31.290

捆绑错误！我将 jqueryui 库更新到 1.10，但没有更改捆绑包。他们仍然指向旧的，这是我错误的原因

# db2 - 在 SquirrelSQL 中显示 db2 错误代码

> ID：14894335
> 
> 赞同：3
> 
> 时间：2013-02-15T12:03:43.297
> 
> 标签：db2, squirrel-sql

当您在 db2 命令行工具中运行查询时，您会得到如下解释：

```
db2 => select * from sysibm.systables  where owner = 'SAM'  and type = 'T';
SQL0206N  "OWNER" is not valid in the context where it is used.
SQLSTATE=42703 
```

但是，当在 SquirrelSQL 的 SQL 选项卡中运行时，您只会得到：

```
Error: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=OWNER, DRIVER=4.13.127
SQLState:  42703
ErrorCode: -206 
```

有谁知道让 SquirrelSQL 显示错误代码解释的方法，比如 db2 cmd 行？

操作系统：Win 7 x64，db2 10.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:20:46.683

DB2 插件中有一个错误，我已设法修复它并在[http://sourceforge.net/p/squirrel-sql/bugs/1073/上发布了解决方案](http://sourceforge.net/p/squirrel-sql/bugs/1073/)

# java - Android ProgressDialog 颜色随机反转

> ID：14894341
> 
> 赞同：2
> 
> 时间：2013-02-15T12:04:02.133
> 
> 标签：java, android, android-layout, progressdialog

通过我正在开发的 android 应用程序，我有几个 ProgressDialogs。它们都以完全相同的方式使用，并且在整个应用程序中显示相同，除了整个 ProgressDialog 反转颜色的登录屏幕 - 带有黑色文本的白色背景变为带有白色文本的深黑色背景。这发生在 Galaxy S3 上，但不会发生在运行 2.3 的旧三星上。下面显示了 2 个示例（出于 SO 目的，声明移至上述实例化）

```
public static ProgressDialog loginProgressDialog = null;

/* show progress */
loginProgressDialog = new ProgressDialog(this);

loginProgressDialog.setTitle("Title - Removed for SO");
loginProgressDialog.setMessage("Please wait while signing in...");
loginProgressDialog.setIndeterminate(true);
loginProgressDialog.setCancelable(false);               

loginProgressDialog.show(); 
```

以上是 S3 上随机反转颜色的登录对话框代码

下面是在应用程序的 4-5 个位置正常显示 ProgressDialog 的代码，它们都遵循以下相同的样式：

```
/* show progress */
public static ProgressDialog timedstartProgressDialog = null;

timedstartProgressDialog = new ProgressDialog(this);

timedstartProgressDialog.setTitle("Title - Removed for SO");
timedstartProgressDialog.setMessage("Get Ready!");
timedstartProgressDialog.setIndeterminate(true);
timedstartProgressDialog.setCancelable(false);

timedstartProgressDialog.show(); 
```

我很难理解为什么 A）它发生在 S3 而不是旧的三星手机上，以及 B）是什么导致它只在登录屏幕上反转，而不是在整个应用程序的其他 4-5 个活动上反转。

这可能是非常简单的事情，或者可能取决于电话，但我似乎看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:30:21.790

```
import android.graphics.drawable.*;

ProgressBar pg = (ProgressBar)row.findViewById(R.id.progress);
final float[] roundedCorners = new float[] { 5, 5, 5, 5, 5, 5, 5, 5 };
pgDrawable = new ShapeDrawable(new RoundRectShape(roundedCorners, null,null));
String MyColor = "#FF00FF";
pgDrawable.getPaint().setColor(Color.parseColor(MyColor));
ClipDrawable progress = new ClipDrawable(pgDrawable,Gravity.LEFT,ClipDrawable.HORIZONTAL);
pg.setProgressDrawable(progress);   
pg.setBackgroundDrawable(getResources().getDrawable(android.R.drawable.progress_horizontal));
pg.setProgress(45); 
```

# magento - Magento 无法批量更新必填字段错误的属性

> ID：14894345
> 
> 赞同：1
> 
> 时间：2013-02-15T12:04:23.710
> 
> 标签：magento, attributes, required

我希望有人可以对此有所了解：

我正在使用 Magento 中的搜索工具查找具有特定属性的产品，然后选择这些产品并使用“更新属性”功能将数据添加到（更新）不同的属性字段。

在某些情况下，这可以正常工作，记录新的属性数据并且一切正常。在我尝试保存新属性数据的其他选择中，它会出现红色警告“这是必填字段”。果然，它指定的字段是必填字段，但由于我没有更新该特定字段，因此我没有勾选它下面的复选框，并且应该忽略该字段。

如果我为突出显示的字段关闭“必填字段”选项，那么新的属性数据将被保存但是：它会擦除其他属性负载中的数据，这意味着我会丢失产品属性中的有价值数据。似乎它在我一天内使用它的前几次有效，然后它吐出它的假人并提出所需的字段问题。

我在 Google Chrome 和 Firefox 上都试过了。正如我所说，有时它会起作用，有时它不会。我一次选择 20-100 种产品。我什至尝试只选择一种产品，但仍然会在该产品上遇到相同的错误。

我在 Magento 1.7.0.2

去年当我们在 1.6 上时，我确实遇到过属性数据被擦除的类似问题，但我似乎记得这是一个 Magento 错误，当我们升级到新版本时已修复。

谁能解释为什么会发生这种情况？搜索引擎中没有任何内容，这真的让我慢了下来！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-21T09:10:37.927

问题是属性在更新属性页面中默认没有被禁用，因此需要一个值。

为什么？

很可能是由于在您的属性上方某处出现故障属性。

选项 1\. 由于我不知道是什么属性或属性问题，请破解 js/mage/adminhtml/product.js 并更改此功能以忽略错误属性。

```
function disableFieldEditMode(fieldContainer) {
    try {
        $(fieldContainer).disabled = true;
        if ($(fieldContainer + '_hidden')) {
            $(fieldContainer + '_hidden').disabled = true;
        }
    }
    catch(exception) {
    }
} 
```

选项 2\. 从产品中删除错误属性（您可能需要删除限制）。

```
update eav_attribute set is_user_defined = 1 where attribute_code like 'foo_bar'; 
```

选项 3\. 修复故障属性。在我的例子中，有问题的模块是 AW_Onsale。

它试图渲染一个不存在的前端模型：onsale/system_entity_form_element_position

```
select attribute_code, frontend_model from eav_attribute where attribute_code like '%aw_os_%'; 
```

aw_os_product_position | onsale/entity_attribute_frontend_position

```
update eav_attribute set frontend_model = null where attribute_code like '%aw_os_product_position%';
update eav_attribute set frontend_model = null where attribute_code like '%aw_os_category_position%'; 
```

# java - For-each loop on a list that grows simultaneously

> ID：14894347
> 
> 赞同：3
> 
> 时间：2013-02-15T12:04:25.033
> 
> 标签：java, multithreading, list, arraylist

I have a for-each loop in java.

The for-each runs on `myList` in a thread. `myList` can grow simultaneously. I have some questions:

1.  If I started the for-each loop and after it started, an item was added to the list, will the actions in the for-each loop run on it?
2.  Suppose that the answer to the question above is no. I have kind of a problem. The for-each loop is in a while(true) loop so it will start over. I want the for-each loop to run on each item once. I cannot remove items during the for-each loop because I get `ConcurrentModificationException`. So my solution is to remove all list items after the for-each loop ends. But, this way, if an item added to the list after the for-each loop started it was deleted too, the for-each loop will never run on this item.

My goal is to make a for-each that runs on a list that can grow simultaneously. I want the for-each loop to never miss an item and never run the on same item twice or more. What is the solution?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T12:14:33.760

Use of Iterator.remove would allow you not to hit the ConcurrentModificationException, but another solution would be to not use a foreach loop and simply loop, something like:

```
// assuming that this is a list of Strings
List<String> list = ...
while(!list.isEmpty())) {
    String data = list.remove(0);
    ...process data...
} 
```

This would allow you to process each item added to the list and to do so only once. There is a small window above though where the isEmpty could return true and a new item could be added to the list (this could happen in a multi-threaded environment).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T12:18:36.687

It's a Typical producer consumer problem. You are not supposed to use List or any implementations of list. As List is index based addition/removal of items to the list modifies the indexes of other elements.

Trying using any implementation of Queue.

In your case other threads (Producers) would enqueue to the queue and the block of code/thread (consumer) which runs the foreach block should just dequeue from the queue and do your processing.

Let me know if that serves the purpose. If my understanding of your use case is wrong , please clarify.

--

Vinod

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:43:00.793

I think you are looking for a kind of double-buffering of your list.

I have tested this with multiple producers and multiple consumers and it seems to work perfectly.

Essentially you need to hold a list which, when requested, is replaced by a new empty one. Handling threading correctly while swapping adds a little complexity. This handles multiple threads adding to the list as well as multiple threads grabbing lists for iteration.

Note that a slight change in your architecture (pulling entries one-at-a-time from the list) would mean you could use a `BlockingQueue` which may be a better solution for you.

```
public class DoubleBufferedList<T> {
  // Atomic reference so I can atomically swap it through.
  // Mark = true means I am adding to it so unavailable for iteration.
  private AtomicMarkableReference<List<T>> list = new AtomicMarkableReference<List<T>>(newList(), false);

  // Factory method to create a new list - may be best to abstract this.
  protected List<T> newList() {
    return new ArrayList<T>();
  }

  // Get and replace the current list.
  public List<T> getList() {
    // Atomically grab and replace the list with an empty one.
    List<T> empty = newList();
    List<T> it;
    // Replace an unmarked list with an empty one.
    if (!list.compareAndSet(it = list.getReference(), empty, false, false)) {
      // Failed to replace! 
      // It is probably marked as being appended to but may have been replaced by another thread.
      // Return empty and come back again soon.
      return Collections.EMPTY_LIST;
    }
    // Successfull replaced an unmarked list with an empty list!
    return it;
  }

  // Add an entry to the list.
  public void addToList(T entry) {
    List<T> it;
    // Spin on get and mark.
    while (!list.compareAndSet(it = list.getReference(), it, false, true)) {
      // Spin on mark.
    }
    // Successfully marked! Add my new entry.
    it.add(entry);
    // Unmark it. Should never fail because once marked it will not be replaced.
    if (!list.attemptMark(it, false)) {
      throw new IllegalMonitorStateException("it changed while we were adding to it!");
    }
  }
} 
```

# php - 在 cakephp 中使用工具提示

> ID：14894348
> 
> 赞同：0
> 
> 时间：2013-02-15T12:04:26.863
> 
> 标签：php, cakephp

我想在我的 cakephp 应用程序中使用工具提示，我的数据库表中有多余的数据，所以我只想显示几个开始的单词，当用户移动光标时，我希望整个数据以框结构的形式显示。 ...

我无法使用工具提示插件。我刚刚在我的应用程序/插件文件中复制了工具提示文件夹，然后在我的控制器文件中复制了我这样使用的

```
 public $helpers = array('tooltip'); 
```

但是当我运行我的文件时，我得到了这个错误。

```
tooltipHelper could not be found. 
```

工具提示插件中有很多文件。我不确定使用哪一个作为帮助文件..我是 cakephp 新手，谁能帮我使用插件？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:07:49.217

你将需要这样的东西：

```
$('title.tooltip').qtip(); 
```

如果我在下面这样做

```
<title class="tooltip"></title>. 
```

orelse 你也可以这样使用

```
$title = "This is the crazy little Easy Tooltip Text.";
echo $this->Html->link($this->Html->image('add.gif').''.$title.'',
'javascript:void(0)', array('class' => 'tooltip', 'onclick' => $dialog, 
'escape' => false)); 
```

在[http://www.w3.org/TR/CSS2/selector.html上查看](http://www.w3.org/TR/CSS2/selector.html)

你可以看到这个[http://bakery.cakephp.org/articles/andy/2008/06/25/prototip-helper](http://bakery.cakephp.org/articles/andy/2008/06/25/prototip-helper)它可以帮助你很多

如果您想在简单的 html 中使用，请尝试这样

```
<a id="my_tooltip" href="#" rel="tooltip" data-placement="top" title="mytool">Hello</a> 
```

# python - 缩进问题

> ID：14894349
> 
> 赞同：0
> 
> 时间：2013-02-15T12:04:29.257
> 
> 标签：python, indentation

我不能完全让这个 python 程序工作，每次我运行它时，它都会在第 25 行出现“缩进中制表符和空格的不一致使用”错误，这是“else”循环。我尝试了各种方法来解决这一切都无济于事，所以想知道是否有人可以解释我的问题。非常感谢您的时间。

```
questions = ["What does RAD stand for?",
        "Why is RAD faster than other development methods?",
        "Name one of the 3 requirements for a user friendly system",
        "What is an efficient design?",
        "What is the definition of a validation method?"]

answers = ["A - Random Applications Development, B - Recently Available Diskspace, C - Rapid Applications Development",
        "A - Prototyping is faster than creating a finished product, B - Through the use of CASE tools, C - As end user evaluates before the dev team",
        "A - Efficient design, B - Intonated design, C - Aesthetic design",
        "A - One which makes best use of available facilities, B - One which allows the user to input data accurately, C - One which the end user is comfortable with",
        "A - A rejection of data which occurs because input breaks predetermined criteria, B - A double entry of data to ensure it is accurate, C - An adaption to cope with a change external to the system"]

correctanswers = ["C", "B", "A", "A", "A"]

score = 0

for i in range(len(questions)):
    a = 1
    print (questions[a])
    print (answers[a])
    useranswer = (input("Please enter the correct answer's letter here:"))
    correctanswer = correctanswers[a]
    if useranswer is correctanswer:
            print("Correct, well done!")
            score = score + 1
        else:
            print("Incorrect, sorry!")

print("Well done, you scored" + score + "//" + int(len(questions))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:06:40.177

您正在混合制表符和空格，运行 python`-tt`以检查：

```
python -tt scriptname.py 
```

将您的编辑器配置为*仅*使用空格进行缩进。通常，还有一个菜单选项可以将所有制表符转换为空格。

显然，当您将代码粘贴到 Stack Overflow 窗口时，您已经可以看到您的`else:`行仅使用了空格，但其他行使用了制表符：

```
 if useranswer is correctanswer:
            print("Correct, well done!")
            score = score + 1
        else:
            print("Incorrect, sorry!") 
```

因为 Stack Overflow 将制表符呈现为 4 个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:06:17.837

缩进代码时，请*使用*制表符*或*空格。不要混合使用这些（即你不能在一行上使用制表符而在下一行使用空格）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:06:33.137

您`else`的缩进级别应该与`if`.

```
 if useranswer is correctanswer:
        print("Correct, well done!")
        score = score + 1
   else:
        print("Incorrect, sorry!") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:06:19.193

至少在这个代码块上，你的 if 和 else 有不同的意图，它们应该是相同的。

```
if useranswer is correctanswer:
        print("Correct, well done!")
        score = score + 1
    else:
        print("Incorrect, sorry!") 
```

应该：

```
if useranswer is correctanswer:
        print("Correct, well done!")
        score = score + 1
else:
        print("Incorrect, sorry!") 
```

# asp.net-mvc - 每个请求 DbContext 发生随机错误

> ID：14894350
> 
> 赞同：5
> 
> 时间：2013-02-15T12:04:29.387
> 
> 标签：asp.net-mvc, entity-framework, unity-container, dbcontext

我的 mvc+ef+unity 应用程序在较高负载（每秒 10+ 个请求）下遇到随机错误（每天几次）：

*   *连接未关闭*/*连接的当前状态为正在连接*
*   Count 查询死锁（无显式事务）
*   *已添加具有相同密钥的项目。在 System.Data.Entity.DbContext.SetTEntity*中解析 DbContext
*   *远程主机关闭了连接。错误代码为 0x80070057*
*   *已经有一个与此命令关联的打开的 DataReader，必须先关闭它。*- 我打开 MARS 来摆脱这个问题（虽然我相信它应该在没有 MARS 的情况下正常工作，没有嵌套查询），这可能会导致另一个随机错误：
*   *服务器将断开连接，因为客户端驱动程序在会话处于单用户模式时发送了多个请求。*

我使用PerRequestLifetimeManager 的[这个](http://weblogs.asp.net/rashid/archive/2009/02/15/asp-net-mvc-unity-and-common-service-locator.aspx)实现并尝试了 Unity.Mvc3 也没有任何区别。

有[一些](https://stackoverflow.com/questions/3518152/the-remote-host-closed-the-connection-the-error-code-is-0x80070057) [提示](http://www.sqlservercentral.com/Forums/Topic728749-149-1.aspx#bm802936)表明 DbContext 未正确处理。我不确定每个请求是否是问题的原因，因为这似乎是[常见的](https://stackoverflow.com/a/5191797/2075015)做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:26:36.897

经过进一步调查，我发现请求处理线程有时会从其他线程中窃取 DbContext，因此 Rashid 的 PerRequestLifetimeManager 实现可能不是线程安全的。我再次搬到 Unity.Mvc3 并且错误消失了，我上次尝试时一定犯了一些错误。

唯一不相关的错误是死锁。它们是由碰撞引起的

```
SELECT ... FROM X JOIN Y ... JOIN Z ... 
```

和

```
BEGIN TRAN
UPDATE Z ...
UPDATE Y ...
COMMIT TRAN 
```

SELECT 锁定 Y 并想要 Z，TRAN 锁定 Z 并想要 Y

# java - 为什么我不能用短构造函数参数声明枚举类型？

> ID：14894353
> 
> 赞同：2
> 
> 时间：2013-02-15T12:04:37.977
> 
> 标签：java, constructor, enums

首先，对不起我的英语......

我正在做 Enum 类型，但我做不到，因为我正在使用 `tipo(String nombre, short valor)`

为什么我必须使用`tipo(String nombre, int valor)`？使用**int**而不是**short**？

```
public enum Tipo {

    // The constructor (String, int) is undefined
    DAT ("DAT", -2);

    private String nombre;
    private short valor;

    tipo(String nombre, short valor){
        this.nombre = nombre;
        this.valor = valor;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public short getValor() {
        return valor;
    }

    public void setValor(short valor) {
        this.valor = valor;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:08:59.087

尝试`DAT ("DAT", (short)-2);`

您将 a 传递`int`给采用`short`. 由于潜在的数据丢失，Java 不会自动`int`转换。`short`

可以在这里找到一个很好的解释[- java中的原始类型短转换](https://stackoverflow.com/questions/477750/primitive-type-short-casting-in-java)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T12:11:03.143

您需要对上述内容进行两项更改：

1) 将您的字段“Valor”的拼写错误修复为小写

```
private short valor; 
```

2）将int转换为short：

```
DAT ("DAT", (short)-2); 
```

此外，您还应该将枚举类型重命名为“Tipo”，这是推荐的枚举命名格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:20:53.643

默认情况下，原始数字将被视为整数，并且从整数到短整数需要强制转换。编译器不会自动执行这种类型转换 - 这是因为从较大（int）到较小（short）会引入丢失数据的风险（通过截断数字），因此编译器会强制您转换它。

所以你有两个选择：

```
DAT("DAT", (short)-1); 
```

或者

```
private short valor;
Tipo(String nombre, int valor){
    this.valor= (short)valor; 
```

# asp.net-mvc - 如何在asp.net mvc3中更改路由

> ID：14894363
> 
> 赞同：0
> 
> 时间：2013-02-15T12:05:10.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-routing

我的图片很少，请看一下

控制器名称

![标签 控制器名称](../Images/08369308173d5f2f5fc4e1e11fe488b2.png)

带参数的动作名称

![带参数的动作名称](../Images/13374c988240252727e835943d63f4e0.png)

路由

![路由](../Images/9d184560ff671a1370ac9886800893c8.png)

我只是显示图像以清除控制器和动作等的名称。现在在我打电话给

`tags/1` 它转到标签控制器的索引操作

很好，现在我希望将来我的网址看起来像这样

`/tags/Coupons-1.html`这`1`是`pageno`，每次都会更新

我怎样才能做到这一点

在此先感谢您，如果您还需要什么，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:20:12.077

你可以这样做：

更改您的路线如下：

```
routes.MapRoute(
              name: "Tags",
              url: "tags/{pageno}",
              defaults: new { controller = "Tags", action = "Index"
              , pageno = UrlParameter.Optional }
          ); 
```

请注意我将`pageno`参数更改为`string`

**控制器**

```
 public ActionResult Index(string pageno)
 {
   Do Something
 } 
```

现在在控制器中你应该这样做：

*   如果参数是`NULL`做某事
*   接下来尝试将参数解析为`Int`，如果是这样，那么你知道你得到了`tags/1`
*   如果不是，`Int`那么`/tags/Coupons-1.html`在这种情况下，您可能会得到类似的东西，从参数中拉出页码

# android - 如何在 Android 的 ViewPagerExtension 库中添加两个 TextView

> ID：14894364
> 
> 赞同：0
> 
> 时间：2013-02-15T12:05:15.443
> 
> 标签：android

我在我的 android 项目中使用[ViewPagerExtension](https://github.com/astuetz/ViewPagerExtensions) 。我可以为每个选项卡添加一个文本视图。我想在每个标签中添加两个文本视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:46:53.057

制作一个包装视图，即`LinearLayout`，并将这两个`TextView`元素放在包装视图中。然后，不是向 . 添加`TextView`元素，而是`ViewPager`向`ViewPager`.

# android - 在android的scrollview中回收视图

> ID：14894365
> 
> 赞同：3
> 
> 时间：2013-02-15T12:05:15.773
> 
> 标签：android

我有一个`scrollview`动态膨胀的视图（与 android 应用程序的 facebook 墙相同，其中有一个`imageview`和`textview`。）。
所有图像都是动态的。如果我在其中加载了太多数据，那么我会得到`outofmemory exception`. 我知道这`listview`会解决我的问题，但我不能使用`listview`.
那么，有什么方法可以优化，即在视图不可见时回收它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:17:59.107

根据您的评论，我相信您仍然可以使用列表视图：

一个列表视图可以有许多不同种类的视图。有关这方面的更多信息，请阅读[Android ListView with different layouts for each row](https://stackoverflow.com/questions/4777272/android-listview-with-different-layout-for-each-row)。

这样，视图将被回收，并希望您的内存使用量会更小。

无论如何，**我可能会调查您的代码**，因为我猜想由于内存不足，您可能正在泄漏对象或做某事超出需要的次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:26:04.977

```
you can not handle Errors in normal circumstance but you can use following techneques to remove thias errror
1-Please clear your Arraylist before item add .
2-Use garbage collection techniques 
System.gc() or finalize method use for Memory reclaim from object. 
```

# svn - TeamCity：带有 GitHub 外部的 Subversion VCS 根

> ID：14894367
> 
> 赞同：2
> 
> 时间：2013-02-15T12:05:18.917
> 
> 标签：svn, github, teamcity

我们有一个 SVN 存储库，其中一些外部托管在 GitHub 上。一切都在发展中；GutHub 非常支持被 SVN 客户端访问。

问题在于 TeamCity。它似乎是按日期而不是按修订来获取外部数据。我们收到以下错误：

```
 Failed to build patch for build #2.17.7081 {build id=12}, 
   VCS root: svn: https://xxx.xxx.xxx.xx/svn/iaw/trunk {instance id=2, parent id=1}, due to error: Cannot request SVN dated revision: 
   svn: E200007: Server does not support date-based operations
   svn: E200007: The requested report is unknown.
   svn: E175002: REPORT of '/cardeliverynetwork/csharp-apiclient.git/!svn/vcc/default': 501 Not Implemented (https://github.com)
   SVN server: https://github.com/cardeliverynetwork/csharp-apiclient.git/trunk/src/CarDeliveryNetwork.Types
   Used rev: Feb 15, 2013 11:03:24 AM
   Rev text:7081_2013/02/15 11:03:24 +0000 
```

有谁知道如何强制 TeamCity 简单地在外部获得 HEAD？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:12:17.270

当我在 Subversion 本身中有一个外部时，我似乎遇到了类似的问题。

为了解决这个问题，我在我提到它的地方添加了外部的确切修订号。

基本上是这样的

参考之前：`\gitserver\repository\folder external`

参考之后：`\gitserver\repository\folder@2013 external`

请尝试在您所指的 Subversion 文件夹的属性中添加这样的修订。如果您在 Subversion 中转到文件夹的属性并在高级模式下进行属性编辑，则可以这样编辑。

希望它有效，虽然不太确定！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T08:09:44.107

设置为特定修订版`\gitserver\repository\folder@2013 external`有效，但设置为头部修订版`\gitserver\repository\folder@HEAD external`不起作用。

这是 TeamCity 中的一个已知错误，如果外部服务器时区落后于 teamcity 时区，则无法获得头部修订。

[TW-2946 消除 TeamCity 服务器和 VCS 之间同步时钟的必要性](https://youtrack.jetbrains.com/issue/TW-2946)

这里有一些可能的解决方法：

[TW-27269 TeamCity 不会从 GitHub 生成的 svn:externals 中获取更改](https://youtrack.jetbrains.com/issue/TW-27269)

> 可能的解决方法：
> 
> *   使用固定修订外部而不是“最新修订”
> *   关闭 TeamCity VCS 根中的外部支持，使用代理端签出并在自定义脚本中构建的第一个构建步骤中执行外部签出。
> *   在 TeamCity 8.0.4 中，我们添加了一个内部属性**teamcity.svn.ignore.dated.revision.errors**，当此属性设置为 true 时，TeamCity 允许使用指向 GitHub 的 SVN 外部的服务器端结账。

**更新：**

我可以用 teamcity.svn.ignore.dated.revision.errors 确认解决方法似乎有效，我们可以从 Github 获取 HEAD 修订版 :)

# javascript - 使用 JSONP 在 javascript 小部件中导航

> ID：14894372
> 
> 赞同：3
> 
> 时间：2013-02-15T12:05:41.670
> 
> 标签：javascript, jquery, asp.net-mvc, jsonp

我正在开发可以在任何网站上显示的 javascript 小部件。

看。

*   [在任何站点上显示 JS(jQuery) 小部件，使用 ASP.NET MVC 服务器端](https://stackoverflow.com/questions/8704370/show-jsjquery-widget-on-any-site-with-asp-net-mvc-server-side)
*   [使用 jQuery 和 ASP.NET MVC 的可嵌入小部件](https://stackoverflow.com/questions/2306122/embeddable-widgets-using-jquery-and-asp-net-mvc/2306157#2306157)

现在我遇到了问题，当我需要在小部件中的页面之间导航时。请参阅下面的代码。但是现在我很困惑如何在来自服务器的 html 中组织导航（链接单击、ajax 更新），以使其像没有小部件一样工作，因为我想像往常一样调试它。

```
<img alt="TEST" onclick="window.zs.LoadStep1('ad507a69-d882-41d4-8300-bd9f7163d419',this);" style="cursor:pointer;"/>

;
(function (window, ZS, undefined) {
    var zs = window.zs = ZS || {};
    zs.Version = "v1_0";
    zs.baseUrl = "http://localhost/w/";
    var jQueryScriptOutputted = false;
    var containerSelector = '#zaprosWidgetContainer';
    function initJQuery() {
        if (typeof (jQuery) == 'undefined') {
            if (!jQueryScriptOutputted) {
                jQueryScriptOutputted = true;
                document.write("<scr" + "ipt type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js\"></scr" + "ipt>");
            }
            setTimeout("initJQuery()", 50);
        }
    };

    function initContainer() {
        if ($(containerSelector).length == 0) {
            $('<div id="zaprosWidgetContainer" style="width=500px;height:500px;"></div>').appendTo('body');
        }
    }

    zs.LoadStep2 = function (serviceId) {
        $.ajax({
            url: zs.baseUrl + 'Wizard/Step2JsonP?jsoncallback=?',
            data: { serviceId: serviceId },
            type: "GET",
            dataType: "jsonp",
            jsonpCallback: "callBack",
            success: function (json) {
                $(containerSelector).html(json.Html);
            }
        });

    },
    zs.LoadStep1 = function (providerId) {
        $(function () {
            $.ajax({
                url: zs.baseUrl + 'Wizard/Step1JsonP?jsoncallback=?',
                data: { providerId: providerId },
                type: "GET",
                dataType: "jsonp",
                jsonpCallback: "callBack",
                success: function (json) {
                    $(containerSelector).html(json.Html);
                }
            });

        });
    };
    initJQuery();
    initContainer();

})(window, window.zs || {}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:20:06.390

我了解到您想导航到不使用 ajax 样式的 LoadStep1/LoadStep2？

您可以在 ASP.NET 中创建一个母版页，其中包含一个链接/按钮以导航到下一步。该链接是作为上一步的一部分生成的。

例如在 Step1 的输出 html 中添加

```
 <a href="/.../Step2InMaster?serviceID=13">Next Step</a> 
```

你能告诉我们为什么你必须创建一个“非小部件模式”来进行调试吗？调试有什么区别？

关于 JsonP 的其他一些帮助我的事情：

您还可以扩展将 JSON 数据包装到 JsonP 字符串中的 JsonP 类，以支持在未提供回调方法时返回普通 JSON - 这样您可以使用相同的 uri 直接返回 html。我使用它来允许小部件同时在 JsonP 和 Json 中运行。

# javascript - 不评估模板内的变量

> ID：14894374
> 
> 赞同：0
> 
> 时间：2013-02-15T12:05:48.950
> 
> 标签：javascript, html, css, angularjs

我的 Jade 标记看起来像这样：

```
li(ng-repeat="parcel in parcels | filter : filterActiveAreaParcels")
  .parcel-image(style="background-image:url({{parcel.image}});") 
```

出于某种原因，有时我在尝试检索时遇到 404 错误`http://localhost:3501/%7B%7Bparcel.image%7D%7D`，它不会一直发生，但有时会发生。尽管正在检索所有图像并正确显示在页面上。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:43:41.637

`http://localhost:3501/%7B%7Bparcel.image%7D%7D`是`http://localhost:3501/{{parcel.image}}`

请记住，当 Angular 编译 HTML 时，它实际上是在 DOM 中。因此，您的浏览器（在应用程序启动之前的一小段时间）在 DOM 中有类似这样的内容：

```
<div class="parcel-image" style="background-image:url({{parcel.image}})">...</div> 
```

当它看到 style 属性时，它会使用`/{{parcel.image}}`.

这就是为什么你偶尔会出现 404 的原因。

编辑：您可以使用[ngStyle 指令](http://docs.angularjs.org/api/ng.directive%3angStyle)来解决这个问题：

该`ngStyle`指令将监视一个对象并应用它包含的样式。

所以在你的html中：

```
<div class="parcel-image" ng-style="styles">...</div> 
```

在你的控制器中：

```
app.controller('ParcelImageController', function($scope) {
  $scope.parcel = {/*some object*/};
  $scope.style = {
    'background-image': 'url(' + $scope.parcel.image + ')'
  };
}); 
```

[这里有一个实际的例子。](http://jsfiddle.net/8qYME/1/)

# wso2 - 任何 wso2 stratos vmware 映像中是否包含“存储服务器”？

> ID：14894376
> 
> 赞同：0
> 
> 时间：2013-02-15T12:05:52.170
> 
> 标签：wso2, wso2stratos

任何 wso2 stratos vmware 映像中是否包含“存储服务器”？在哪个版本？

我问它是因为我看到它在 Stratos Live 上可用。

我想使用 vmware 映像在本地安装它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T02:50:17.917

存储服务器 1.0.3 现在作为单独的产品提供。你可以从[这里](http://wso2.com/products/storage-server/)下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:18:40.713

[Storage Server 在Stratos 1.6 本地设置](http://wso2.com/cloud/stratos/)中可用。它是 StratosLive 的新增功能。它还不能作为单独的产品下载。

# android - Android SDK 管理器没有显示任何要安装的包

> ID：14894378
> 
> 赞同：6
> 
> 时间：2013-02-15T12:05:58.763
> 
> 标签：android

我在 Android SDK 管理器中遇到问题，它没有显示我有任何可安装的软件包：

![SDK PM](../Images/b4b09b1683d58e21dc50815998bf768e.png)

当我第一次安装 SDK 时，我看到的唯一一行是 Android SDK Tools。我能够添加 Platform-Tools 和 Android 4.2 包，我从我单独下载的 Android ADT 包中复制和粘贴。

日志显示没有问题：

```
Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml
Fetched Add-ons List successfully
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Done loading packages. 
```

当我打开包 URL 返回的 XML 时，我可以看到可用的包。

我尝试过的事情： 1\. 在工具 > 选项中弄乱代理。我已经尝试了 127.0.0.1 和空白。2\. 从 Eclipse 中直接打开 SDK 管理器（常规和以管理员身份） 3\. 卸载并重新安装 Android SDK。下载所有内容的最新版本。

我的系统：Windows 7 x64 Eclipse 4.2.1 Juno SDK Manager 21.1 ADT 21.1

有任何想法吗？我想我可以通过直接从 XML 中提取 URL 来下载文件，但这并不理想。

**编辑：**

由于我可以使用浏览器提取 repository-7.xml 文件，因此这看起来不像是防火墙/AV/网络设置问题。这是 SDK 管理器没有加载它通过 XML 拉回的包信息的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T12:23:49.480

我遇到了同样的问题。对我来说，解决方案是检查“使用 http://... 获取强制 https://... 源”框。它位于 Android SDK Manager 的首选项屏幕上，位于代理设置下方。

另外，如果这不能解决您的问题，建议您下载[Adt Bundle ，而不是再次下载 SDK](http://developer.android.com/sdk/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T14:50:45.853

所以我终于能够看到所有可用的包。我不小心点击了 Eclipse 中的 SDK 管理器图标，而不是我想要按下的 AVD 管理器：

![蚀](../Images/243d7c2cd2374bd35bd894fea8a33db1.png)

所有可用的软件包都出现了。

此外，现在当我使用任何其他方法（直接从 SDK 目录或使用 Eclipse 中的 Window > Android SDK Manager 菜单选项）打开 SDK 管理器时，所有这些丢失的包现在都会显示出来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-25T11:44:11.510

我有同样的问题。对我没有任何作用，也没有清除缓存，也没有重新启动 eclipse，也没有从 eclipse 运行 sdk 管理器，也没有强制 https（来自 sdk 管理器选项）

但是当我使用代理时，一切都很好！sdk 管理器-> 工具-> 选项-> http 代理服务器

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-19T12:48:35.710

我知道我参加聚会有点晚了，但我想分享我在这个问题上的经验。

原来使用的底层 Logger 模块是 SL4J Android 版本。因为我已经覆盖了 SDK Manager 使用的版本（使用外部 JAR 文件），所以当它尝试加载 Logger 类时出现了很多问题。我在尝试跑步时发现了这一点

android-sdk\tools\android.bat 更新 sdk --no-ui

这向我展示了记录器模块的 ClassLoader 引发的异常。删除我的 %JAVA_HOME%\jre\lib\ext 文件夹中的 SL4J 模块的所有痕迹解决了我的所有问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-08T13:18:03.623

我知道这是旧的，但只是想为后代添加。我遇到了同样的问题，事实证明我之前曾以 root 身份运行 SDK 管理器（Ubuntu Linux）。我的用户帐户无权覆盖文件和更新列表。一旦我更正了权限，它就运行良好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-26T16:14:30.573

在 Windows 上，如果您直接从`~Android\android-sdk`目录运行 SDK 管理器，只需右键单击并以管理员身份运行。无论如何，这对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T12:21:22.020

解压缩下载的文件夹时是否打开了 Adroid SDK？因为我遇到了像你这样的问题，解决方案是我选择了错误的文件夹路径。

我做了什么：

*   再次下载sdk并将其放在C：/（另一个路径）
*   如果我得到相同的结果，请检查此路径。
*   从新路径安装新工具和 android 版本。

因为我看到你的文件夹在 C:/ProgramFile/Android......... 而且我在这个路径中只有我已经安装。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-30T22:55:55.630

打开 Android SDKManager->Android SDK->SDK Update Site 点击 Launch Standalone Android SDK Manager 你会看到包。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-20T11:11:25.547

在 SDK 管理器上，转到工具 -> 选项并选择强制 https 复选框；现在你应该看到所有

# sockets - 如何在网页上使用端口？

> ID：14894379
> 
> 赞同：0
> 
> 时间：2013-02-15T12:06:00.407
> 
> 标签：sockets, vb6, localhost, port, webpage

有许多使用 TCP 端口编写的 VB6 程序。其中一些正在监听，服务器输出网页，例如：192.168.1.2:5352，当我转到此页面时，我看到一个允许我控制VB6程序的页面，这意味着程序员设置了一些选项这页纸）

我想知道如何通过我的程序在 TCP 端口（6006）上侦听以及如何在页面上放置一些命令（例如文本框和按钮）来执行此操作，以便当我在页面上的文本框中输入内容时，我的程序显示在消息框中。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:19:37.983

听起来您正在寻找可以嵌入到应用程序中的 HTTP 服务器组件。然后，这可以提供标准 HTML 页面，这些页面通过正常的 POST 或 GET 请求将数据发布回您的应用程序。

您可以通过[WinSock 控件](http://msdn.microsoft.com/en-us/library/aa228119%28v=vs.60%29.aspx)使用普通 TCP 套接字并手动解析 HTTP 请求，或者使用内置于窗口中的服务（如[HTTP Server API](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364510%28v=vs.85%29.aspx) ）来执行此操作，但这在本机 VB6 中很难使用。

或者，您可以使用 IIS 或类似方法在插件或 CGI 应用程序上循环，这些应用程序通过另一种方法（可能是 Windows 消息或命名管道）与您的应用程序通信。

# javascript - 想在一个 html 页面上显示两个 timePicker

> ID：14894382
> 
> 赞同：2
> 
> 时间：2013-02-15T12:06:05.017
> 
> 标签：javascript, jquery, html, datetimepicker, jquery-ui-timepicker

这是我的一个 timePicker 代码，但我无法在一个 HTML 页面上显示两个 timePicker。下面的代码对我的 one timePicker 工作正常，但我无法让逻辑说明我应该如何使用两个输入上不同的 id。

```
 function redirect(){

  document.getElementById("startTime").value=document.getElementById("test_default").value;

           var stime=document.getElementById("test_default").value;

    //alert(document.getElementById("endTime").value);

              window.localStorage.setItem('starttime', stime);

    //alert(stime);
         window.localStorage.setItem('id', id);
         window.location.replace("block.html");

          }
             function frameURL() {
        /*var address = document.getElementById("startTime");
        //var iframe = document.getElementById("iframe");
        //var frame = iframe.src;
        //address.value = frame;

             var iframe = document.getElementById('iframe');
             var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
             var usernameTextBox = innerDoc.getElementById('test_default');

    //usernameTextBox.focus();
            address.value = usernameTextBox;
            alert(usernameTextBox);
    //usernameTextBox.focus();*/

            var thetime= document.getElementById('iframe').contentWindow.document.getElementById("startTime").value;

              document.getElementById("startTime").value=thetime
         }

            function frameURL2() {

             var thetime=        document.getElementById('iframe1').contentWindow.document.getElementById("startTime").value;

       //alert(thetime);

           document.getElementById("startTime1").value=thetime
         }

          </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:25:02.757

我使用了这个：[timepicker](http://trentrichardson.com/examples/timepicker/)和 jqueryui的 Datepicker。

HTML

```
<input class='timePicker' name='time_start'type='text' />
<input class='timePicker' name='time_end'type='text' /> 
```

jQuery

```
$(document).ready(function(){
    $('.timePicker').timepicker({
        timeFormat: 'hh:mm TT',
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:33:18.070

尝试使用 jQuery timePicker。只需添加 1 个 css 和 1 个 Js 文件，您就可以使用 timePicker 。这是我用过的timePicker，非常好用。jQuery 1.6.4。将两个文本框放在一个 div 中，并将该 div 的 id 放在这个 JavaScript 中。

```
<script type="text/javascript" charset="utf-8" >

        $(document).ready(function(){
            // find the input fields and apply the time select to them.
            $('#sample1 input').ptTimeSelect();
        });
    </script> 
```

# asp.net-mvc-4 - 问题：SQL Azure 连接中断。重新连接并访问实体对象后，发生错误

> ID：14894383
> 
> 赞同：1
> 
> 时间：2013-02-15T12:06:12.347
> 
> 标签：asp.net-mvc-4, entity-framework-5, azure-sql-database

连接到网站并保持空闲 30 分钟，然后尝试访问我收到以下错误的实体。

**实体框架 执行命令定义时出错。有关详细信息，请参阅内部异常。内部异常{“无效的对象名称'dbo.TableName'。”}**

示例代码

```
Static Class Azure
{
 public static CrmEntities ConnectCustomerEntity()
    {
        CrmEntities customerEntity = null;
        policy.ExecuteAction(() =>
           {
               try
               {
                   var shardId = GetShardId();

                   customerEntity = new CrmEntities(ConnectionStringCustomerDB());
                   string federationCmdText = @"USE FEDERATION Customer_Federation(ShardId =" + shardId + ") WITH RESET, FILTERING=ON";

                   customerEntity.Connection.Open();                     
                   customerEntity.ExecuteStoreCommand(federationCmdText);   
               }
               catch (Exception e)
               {
                  customerEntity.Connection.Close();
                  SqlConnection.ClearAllPools();
                   //throw e;
               } 
           });
        return customerEntity;
    }

 public static CrmEntities DBConnect(CrmEntities _db)
    {
     try{
        if (_db == null)
            _db = Azure.ConnectCustomerEntity();
        if ((_db.Connection.State == ConnectionState.Broken) || (_db.Connection.State == ConnectionState.Closed))
        {               
            SqlConnection.ClearAllPools();
            _db = Azure.ConnectCustomerEntity();
        }
    else
        { //This code is to find out any issues in connection pool database connection
      string sqlCmdText = @"select top 1 Id from Project";
            _db.ExecuteStoreCommand(sqlCmdText);
        }
        }
  catch (Exception ex)
        {
            _db.Connection.Close();
            SqlConnection.ClearAllPools();
            _db = Azure.ConnectCustomerEntity();
        }
        return _db;
}

} 
```

Mvc 控制器。下面的代码我得到了那个异常，30分钟后

```
 public class FilterController : Controller
{  
public ActionResult GetFilters(string entityName,string typeFilter)
    {
       _crmEntities=Azure.DBConnect(_db);
        var query = _db.FilterFields.Where(filter => filter.TableId == tableId).ToList();  // Here I am getting that exception
     }
} 
```

我不知道，为什么我得到那个例外。我尝试了所有的可能性。没有任何帮助。我真的很震惊。如果有人知道，请告诉您的意见从这个例外中出来

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:34:16.693

我认为您的会话超时。

尝试增加会话超时：

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.timeout.aspx)

# javascript - 如何在谷歌地图中隐藏和显示 MarkerCluster

> ID：14894384
> 
> 赞同：8
> 
> 时间：2013-02-15T12:06:13.193
> 
> 标签：javascript, google-maps-markers, show-hide, markerclusterer

当用户单击某些按钮时，我试图隐藏/显示 markerClusterer：

这是我正在尝试做的事情：

```
 map = new google.maps.Map(document.getElementById("mappa"),mapOptions);
    var marker_tmp = [];
    var markers_tmp = [];
    $.each(json,function(index,value){
        var latLng = new google.maps.LatLng(value.lat,value.lng);
        var marker = new google.maps.Marker({'position': latLng});
        if((value.candidato in markers_tmp)==false){
            markers_tmp[value.name]=[];
        }
        markers_tmp[value.name].push(marker);
    });
    for(var name in markers_tmp){
        markers[name]= new MarkerClusterer(map,markers_tmp[name]);
    } 
```

我创建了多个 markerClusterer，每个都关联到一个特定的名称。

所以我有一些与这些特定名称关联的按钮，我需要隐藏/显示与该按钮关联的标记聚类器。

```
/*This is the function associated to a button when it is clicked*/
function hide_show_cluster(name,visible){
    var tmp_cluster = markers[name];
    //call a function of markerClusterer (tmp_cluster) to hide/show it
} 
```

我做了很多测试，但没有人满足我的要求。有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-07-16T18:24:34.373

我整个早上都在为此苦苦挣扎，但幸运的是我找到了解决方案。

首先，确保您拥有最新的 MarkerClustererPlus 版本[https://github.com/googlemaps/js-marker-clusterer](https://github.com/googlemaps/js-marker-clusterer)

然后很容易，

创建标记时，请确保您

> 将其可见标志设置为 false。

在创建标记聚类器时，这样做：

```
new MarkerClusterer(map, markers, { ignoreHidden: true }); 
```

如果您想显示集群器，请执行以下操作：

```
for (var it in markers) {
    markers[it].setVisible(true);
}

markerCluster.repaint(); 
```

隐藏集群：

```
for (var it in markers) {
    markers[it].setVisible(false);
}

markerCluster.repaint(); 
```

希望它有帮助，问候

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-07T09:15:27.557

我有同样的情况，这就是我的做法......希望它有所帮助

> 集群实例化

```
let markerCluster = new MarkerClusterer(map, markers, {
    imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'}); 
```

> 隐藏集群：

```
function hideMarkers() {
    for (let i in markers) {
        markers[i].setMap(null);
    }
    markerCluster.clearMarkers();
} 
```

> 显示集群：

```
function showMarkers() {
    for (let i in markers) {
        markers[i].setMap(map);
    }
    markerCluster.addMarkers(markers);
} 
```

[这是一个用于测试http://jsfiddle.net/3s6qfzcy/](http://jsfiddle.net/3s6qfzcy/)的 jsfiddle 链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T13:00:57.073

例如，您可以：

1.  定义按钮的点击处理程序；
2.  使用函数 getMarkers() 获取所有标记并将结果保存到变量 (var allMarkers = getMarkers());
3.  创建另一个变量来添加/删除标记（var currentMarkers = allMarkers）；
4.  当您点击每个按钮时，您可以循环 currentMarkers 变量并使用函数 removeMarker(MARKER_TO_REMOVE) 或 addMarker(MARKER_TO_ADD, true) （true 是重新绘制地图）；
5.  当您循环标记时，您可以访问它们的信息（执行 console.log(marker) 以查看我在说什么）；

有关更多信息，您可以在此处查看文档：[https ://googlemaps.github.io/js-marker-clusterer/docs/reference.html](https://googlemaps.github.io/js-marker-clusterer/docs/reference.html)

# django - GAE上的Django-未定义名称'url'

> ID：14894390
> 
> 赞同：1
> 
> 时间：2013-02-15T12:06:24.413
> 
> 标签：django, google-app-engine

我刚刚将我的 django 网络应用程序上传到 GAE，但是当我使用“dev_appserver.py”编译它时出现错误：

```
Exception Type: NameError
Exception Value:    name 'url' is not defined 
```

这是我的 urls.py：

```
from django.conf.urls.defaults import *

 urlpatterns = patterns(
    '',
    url(r'^landing/$', 'webpage_dev.dashboard.views.landing'),
) 
```

我正在从 django.conf.urls.default 导入 url。为什么会出现这个错误？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:15:48.327

```
from django.conf.urls.defaults import patterns, url 
```

# jquery-ui - jquery标签不更新cookie

> ID：14894397
> 
> 赞同：1
> 
> 时间：2013-02-15T12:06:34.797
> 
> 标签：jquery-ui, cookies, jquery-tabs, jquery-cookie

我正在使用 jquery UI 1.10，我需要在选项卡中启用 cookie。以前可以用。

但是尽管得到了可爱的 jquery cookie 1.31 ( [https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js) ) 我的标签没有记录正确的 cookie。当我切换标签时它不会改变。

选项卡被初始化为：

```
 $("#tabs").tabs({ cookie: { expires: 30, name: "userprivtabs"} }); 
```

有什么办法让它工作吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:39:23.703

这对我有用

```
$("#tabs").tabs({
    activate: function (e, ui) { 
        $.cookie('selected-tab', ui.newTab.index(), { path: '/' }); 
    }, 
    active: $.cookie('selected-tab')
}); 
```

# jquery - 将ajax内容加载到colorbox

> ID：14894403
> 
> 赞同：0
> 
> 时间：2013-02-15T12:06:46.133
> 
> 标签：jquery, colorbox

我想将 ajax 响应加载到颜色框中。颜色框应在单击时打开并显示加载图像，直到获取并显示内容。

**我的代码：**

```
jQuery(".likeBar").colorbox({initialWidth:'460px', initialHeight:'355px', width:'460px', height:'355px', overlayClose:true, html: function() {
    var eventID = jQuery(this).data("id");
    var sp_response = "";
    var the_data =
    {
        action: 'get_likes',
        eventID: eventID,
        };
    jQuery.post(ajaxurl, the_data, function(sp_response) {
        return sp_response;
    });
}
}); 
```

**我的问题：** 获取的内容不会显示在我的颜色框中。AJAX 调用成功，获取内容，但不显示。

**我的问题：** 如何将 ajax 调用中的内容插入到颜色框中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:08:47.187

我的问题的解决方案：

```
jQuery(".likeBar").click(function(){
    var eventID = jQuery(this).data("id");
    var sp_response = "";
    var the_data =
    {
        action: 'get_likes',
        eventID: eventID,
        tb_check_code: tb_check_code
    };
    jQuery.post(ajaxurl, the_data).done(function(sp_response) {
        jQuery('#sp_likebox' + eventID).html(sp_response);
     });

    jQuery('#sp_likebox' + eventID).show();
    jQuery(this).colorbox({initialWidth:'460px', initialHeight:'355px', width:'460px', height:'355px', overlayClose:true, inline:true, href: '#sp_likebox' + eventID, title: 'Diesen Benutzern gefällt der Beitrag'});

    jQuery(this).colorbox({
        onCleanup:function(e){
            jQuery('#sp_likebox' + eventID).hide();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:36:18.983

编辑 2

我已经阅读了 colorbox 文档，发现您可以通过仅提供 href 属性和 data 属性来使用 ajax 获取内容。

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

编辑尝试像这样使ajax调用异步错误

```
$.ajax({
  type: "POST",
  url: ajaxurl,
  data: the_data,
  success: function(sp_response) {
        return sp_response;
    },
  dataType: 'html',
  async: false
}); 
```

# three.js - THREEjs 无法将 sphree 渲染到屏幕上

> ID：14894409
> 
> 赞同：0
> 
> 时间：2013-02-15T12:07:09.307
> 
> 标签：three.js, webgl

嗨，我正在尝试让一个 sphree 渲染到屏幕上。这是我的 js 文件。

```
function Earth()
{
    this.getEarth = init();

function init()
{
    var map = {map:THREE.ImageUtils.loadTexture("images/earth_surface_2048.jpg")};
    var material = new THREE.MeshBasicMaterial(map);
    var geometry = new THREE.SphereGeometry(1,32,32);
    return new THREE.Mesh(geometry, material);
}

function update()
{
    getEarth.rotation.x += .01;
}
} 
```

这是页面中包含的html文件threejs中的脚本。

```
 <script>

    var renderer = null;
    var scene = null;
    var camera = null;
    var mesh = null;
    var earth = null;

    $(document).ready(
            function() {
                var container = document.getElementById("container");
                renderer = new THREE.WebGLRenderer({ antialias: true } );
                renderer.setSize(container.offsetWidth,container.offsetHeight);
                container.appendChild(renderer.domElement)
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera( 45,
                        container.offsetWidth / container.offsetHeight, 1, 4000 );

                earth = new Earth();
                scene.add(camera);
                scene.add(earth.getEarth);
                renderer.render( scene, camera );
            }
    );

</script> 
```

我没有从调试器中得到任何错误，所以有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:49:52.683

earth.getEarth 可能为 null 或函数。我记得 scene.add() 默默地忽略了它不能接受的东西，比如未定义的值等等。

如何更改`var getEarth = init();`为`this.getEarth = init();`以便您的类范围之外的代码将在您的地球对象中看到该变量。尽管我建议不要对包含对象的变量使用类似方法的名称。

# wcf - 如何为 IIS 托管的 WCF 服务上的所有操作添加 OperationBehavior？

> ID：14894412
> 
> 赞同：2
> 
> 时间：2013-02-15T12:07:18.897
> 
> 标签：wcf, iis, operation, wcf-behaviour

我有一个自定义的 OperationBehavior。我想一次将它应用于所有操作。不幸的是，不能为整个服务或 web.config 配置 OperationBehaviors。

在测试应用程序中托管 WCF 服务时，我可以执行以下操作：

```
 foreach (var ep in _serviceHost.Description.Endpoints)
        {
            foreach (OperationDescription od in ep.Contract.Operations)
            {
                od.Behaviors.Add(new MyOperationBehavior());
            }
        }

        _serviceHost.Open(); 
```

但是如何在 IIS 托管的 Web 应用程序中执行此操作？

我试图进入`OperationContext.Current.Host.Description.Endpoints`，`Application_Start`但在任何操作开始之前当然`OperationContext.Current`不可用，所以我的方法失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T17:46:51.113

你可以使用 a`ServiceHostFactory`来做到这一点。有了它，您可以在服务打开之前访问 OM。

这是一个例子：

```
public class MyFactory : ServiceHostFactory
{
    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        ServiceHost host = base.CreateServiceHost(serviceType, baseAddresses);
        foreach (var ep in host.Description.Endpoints)
        {
            foreach (OperationDescription od in ep.Contract.Operations)
            {
                od.Behaviors.Add(new MyOperationBehavior());
            }
        }

        return host;
    }
} 
```

[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx)获得有关服务主机工厂的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:50:26.583

最后，我找到了一个替代解决方案：使用根据需要注入任何其他行为的契约行为。像这样：

```
public class InjectAllOperationsBehavior : Attribute, IContractBehavior
{
    private IOperationBehavior _operationBehavior = null;

    public InjectAllOperationsBehavior(Type operationBehaviorType)
    {
        _operationBehavior = 
            (IOperationBehavior)Activator.CreateInstance(operationBehaviorType);
    }

    public void ApplyDispatchBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, DispatchRuntime dispatchRuntime)
    {
        foreach (OperationDescription opDescription in contractDescription.Operations)
        {
            opDescription.Behaviors.Add(_operationBehavior);
        }
    } 
```

... 其他 IContractBehavior 方法可以留空。您可能还希望将 ApplyClientBehavior 方法与 ApplyDispatchBehavior 方法中的相同代码一起使用。

# python - Django：更改默认的 reset_password 视图和表单？

> ID：14894414
> 
> 赞同：1
> 
> 时间：2013-02-15T12:07:20.890
> 
> 标签：python, django, forms, django-facebook

我一直在使用 Django 的内置密码重置视图和表单取得巨大成功，但我不确定如何：

1.  我可以在每个表单的字段验证中自定义错误消息。例如，而不是默认消息：'该电子邮件地址没有关联的用户帐户。你确定你已经注册了吗？'，当输入一个无效的电子邮件时，我想让它说点别的。

2.  我正在使用内置的 facebook 身份验证（Django-facebook），所以如果用户的电子邮件与 facebook 帐户相关联，我不想给他发送电子邮件来重置 django 用户帐户的密码。如何明确检查用户是否具有关联的 Facebook 模型（即，如果 user.get_profile().facebook_data = True 或其他东西）？

这个问题的症结确实延伸到一件事，那就是我如何扩展内置密码重置字段中的表单。根据文档（即[https://docs.djangoproject.com/en/dev/ref/forms/fields/](https://docs.djangoproject.com/en/dev/ref/forms/fields/)）我知道我可以这样做至少 1，不确定我从头开始创建的表单中的 2，但不确定从哪里开始内置案例。

# c++ - 如何创建一个包含列表的节点

> ID：14894415
> 
> 赞同：1
> 
> 时间：2013-02-15T12:07:21.937
> 
> 标签：c++, linked-list, doubly-linked-list

我进行了很多搜索以找到有关此主题的有用内容，但无济于事。我制作了一个运行良好的链接列表。现在，作为一项任务，我需要将一些字典单词存储在文件“input.txt”中。提到您必须使用二维链表进行此分配，即在链表的节点内创建另一个链表。这意味着链表的每个节点现在也将包含一个列表。这也可以用向量来完成，但我猜链表可能更有帮助。现在考虑代码。

//在list.h中

```
template <class T>
struct ListItem
{
    T value;
    ListItem<T> *next;
    ListItem<T> *prev;
    ListItem(T theVal)
    {
        this->value = theVal;
        this->next = NULL;
        this->prev = NULL;
    }
};

template <class T>
class List
{
    ListItem<T> *head;

public:

    // Constructor
    List();

    // Destructor
    ~List();
} 
```

我需要在节点内创建一个链表所以在“Struct ListItem”中我正在做这样的事情：

```
List<T> dictionary; 
```

但它给出了一个错误：

```
"ISO C++ forbids declaration of âListâ with no type" 
```

其次，我将如何开始在节点内创建另一个链表。我的意思是假设临时指针指向第一个链表的头部。我现在如何在该节点内创建另一个节点（属于我的第二个链表）。我想可能是这样的：

```
temp->ListItem<T>* secondListNode = new ListItem<T>(item); // I don't know whether
//It would or not as I am stuck in the first part. 
```

这必须使用二维格式完成，所以请遵守约束。关于这个问题的任何其他有用的建议都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:12:04.373

你有一个循环依赖。如果您只有一个指向`ListItem<T>`in的指针`List<T>`，则先声明`ListItem<T>`，然后定义，然后再定义`List<T>`类`ListItem<T>`：

```
template<class T>
class ListItem;

template<class T>
class List
{
    ListItem<T> *head;

    // ...
};

template<class T>
class ListItem
{
    // `dictionary` is not a pointer or a reference,
    // so need the full definition of the `List<T>` class
    List<T> dictionary;

    // ...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:13:15.447

当您参考字典时，您可能会考虑使用 std::map 代替。

例如：

```
std::map<std::string, std::list<std::string> > 
```

如果您将值存储为 std::string。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:24:58.283

我不确定我是否完全理解“这意味着链表的每个节点现在也将包含一个列表”*的意思。*

如果您只想拥有一个*字符串列表*，您可以使用现有的 List 数据结构轻松实例化它，这要归功于模板功能：

```
List<List<std::string> > listOfLists; 
```

当然，您仍然可以拥有“一维列表”：

```
List<std::string> otherList; 
```

通常，使数据结构适应本地要求是一个坏主意，而是尝试以更专业的方式使用通用数据结构，例如上面的“列表列表”。不要将“列表列表”实现为单独的类，也不要将通用列表更改为二维列表。它只是一个“任何类型的列表`T`”，所以`T`也可以是一个列表（一次又一次……）。

# search - Joomla - 搜索结果中的页面顺序

> ID：14894421
> 
> 赞同：0
> 
> 时间：2013-02-15T12:07:42.703
> 
> 标签：search, joomla

我工作的公司继承了一个 Joomla 网站，我没有使用 Joomla 的经验，所以我希望有人可以让我知道以下是否可能。

在 Joomla 网站上搜索时，客户希望某些搜索词的某些页面出现在搜索结果的顶部。

是否可以根据搜索词将某些页面提升到搜索结果的顶部？

感谢对此的任何支持。

**更新**

在本地测试我已经更新了 /plugins/search/content.php 中的 SQL 查询，以接近我所追求的结果。

```
SELECT
  a.title AS title,
  a.metadesc,
  a.metakey,
  a.created AS created,
  CONCAT(a.introtext, a.fulltext) AS text,
  CONCAT_WS( "/", u.title, b.title ) AS section,
  CASE WHEN CHAR_LENGTH(a.alias) THEN CONCAT_WS(":", a.id, a.alias) ELSE a.id END as slug,
  CASE WHEN CHAR_LENGTH(b.alias) THEN CONCAT_WS(":", b.id, b.alias) ELSE b.id END as catslug, u.id AS sectionid, "2" AS browsernav 
FROM jos_content AS a 
  INNER JOIN jos_categories AS b ON b.id=a.catid 
  INNER JOIN jos_sections AS u ON u.id = a.sectionid 
WHERE
  ((a.title LIKE '%carbohydrate%' OR a.introtext LIKE '%carbohydrate%' OR a.fulltext LIKE '%carbohydrate%' OR a.metakey LIKE '%carbohydrate%' OR a.metadesc LIKE '%carbohydrate%'))
  AND a.state = 1 
  AND u.published = 1 
  AND b.published = 1 
  AND a.access <= 0 
  AND b.access <= 0 
  AND u.access <= 0 
  AND ( a.publish_up = '0000-00-00 00:00:00' OR a.publish_up <= '2013-02-18 14:55:51' )
  AND ( a.publish_down = '0000-00-00 00:00:00' OR a.publish_down >= '2013-02-18 14:55:51' ) 
GROUP BY a.id 
ORDER BY
  (NOT(a.title LIKE '%carbohydrate%'))
  , (NOT(a.introtext LIKE '%carbohydrate%'))
  , (NOT(a.fulltext LIKE '%carbohydrate%'))
  , (NOT(a.metakey LIKE '%carbohydrate%'))
  , (NOT(a.metadesc LIKE '%carbohydrate%')) 
```

我现在想把它作为一个自定义插件，而不是覆盖任何核心插件。我已按照[http://docs.joomla.org/Creating_a_search_plugin](http://docs.joomla.org/Creating_a_search_plugin)上的教程进行操作，但是如何将站点设置为使用自定义插件而不是默认搜索插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:37:21.223

如果“固定文章”始终相同，只需覆盖搜索结果模板并在模板覆盖中添加文章即可。

只需复制您在其中找到的所有文件

```
/components/com_search/views/search/tmpl 
```

进入

```
/templates/your_template/com_search/search 
```

然后编辑 default_results.php 并将您的固定结果放在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:55:10.050

假设您使用的是 Joomla 2.5（虽然这可能与以前的版本相同），您需要在显示搜索结果的“菜单管理器”中找到菜单项。

在此菜单项中有一些“基本选项”选项卡下的选项。其中包括按最新优先、最旧优先、流行度、字母顺序和类别对搜索结果进行排序。

# java - 来自 JSP 的数据存储

> ID：14894424
> 
> 赞同：-3
> 
> 时间：2013-02-15T12:07:45.260
> 
> 标签：java, jsp, servlets

我想将数据从 JSP 页面存储到数据库，但不想将值发送到另一个 JSP 页面或 servlet。我想从它接受的同一个 JSP 页面存储数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:54:55.853

您可以在 jsp 页面的功能块内编写要执行的代码（将一些数据写入数据库的代码），如下所示：

```
<html>
<body>
<form>
  <input type="text" name="param2save">
  <input type="submit">
</form>
</body>
</html>
<%
  String parameterTosave = request.getParameter("param2save");
  // run the saveStuff
   if (parameterTosave!=null) {
         saveStuffToDB(parameterToSave);
   }
%>
<%!

  private void saveStuffToDB(String Saveme){
    // get a connection, 
    // insert data in to database.  - use PreparedStatement, since that is more safe. 
    // close connection

  }
%> 
```

另一方面，许多人认为这是一种不好的做法，因为 JSP 层被认为是模型视图控制器设置的视图部分。它应该只显示数据，而不是对它做任何工作，比如这个。但是，有时这可能是修补遗留系统或进行类似工作的最简单方法。

# c++ - 使用 curllib 构建应用程序

> ID：14894428
> 
> 赞同：2
> 
> 时间：2013-02-15T12:08:00.517
> 
> 标签：c++, macos, libcurl

我在 mac os 10.8 上构建了 openssl、libssh2 和 libcurl 当我尝试将 libcurl 与我的应用程序链接时，出现以下错误

> /usr/local/include/curl/curlrules.h:143:6: ' **curl_rule_01** ' 声明为负大小的数组 /usr/local/include/curl/curlrules.h:153:6: ' **curl_rule_02** ' 声明为一个负大小的数组

我发现它与已安装的 curl 和新的 curl 之间的冲突有关。解决它的最佳解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T07:45:26.567

这是 curl 标头安装损坏的结果。我建议重新运行 configure 以获得一组新的标头来使用。

# sitecore - Sitecore 异常处理和日志记录

> ID：14894435
> 
> 赞同：1
> 
> 时间：2013-02-15T12:08:16.140
> 
> 标签：sitecore, sitecore6

安静的 sitecore 新手，我一直在阅读 John West 关于 sitecore 日志记录和异常处理的大量博客文章。

从我从 sitecore 文档中读到的内容来看，异常处理和日志记录是开箱即用的。但是，我可以让很多人写博客，包括用于异常处理和日志记录的管道等。

有人可以澄清一下，我们是否需要以及为什么需要使用 MVC 为 Sitecore 编写管道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:33:35.983

Sitecore 有自己使用的内置日志记录（`Sitecore.Diagnostics`命名空间），但是您也可以在自己的组件中写入 Sitecore 日志。所以如果你开发一些前端站点布局和模块（用户控件或者网页控件），你也可以写到Sitecore日志，例如

```
protected void Page_Load(object sender, EventArgs e)
{
  try
  {
    // do your stuff, like loading content...
  }
  catch(Exception ex)
  {
    Sitecore.Diagnostics.Log.Error("Error in ComponentX", ex, this);
  }
} 
```

# jquery - 重绘数据表的正确方法？出现错误：“没有方法 'fnDraw'”和“无法读取属性 'oFeatures'”

> ID：14894436
> 
> 赞同：4
> 
> 时间：2013-02-15T12:08:24.337
> 
> 标签：jquery, datatables

我继承了以下代码：

```
 // Show / Hide table rows from checkboxes
  $("table.data#report-table .warning").toggle($("#warning_checkbox").is(":checked"));
  $("#warning_checkbox").click(function() {
    $("table.data#report-table .warning").toggle($("#warning_checkbox").is(":checked"));
    $('.data_table#report-table').dataTable().fnDraw();
  }); 
```

当检查具有ID的复选框时，它会显示/隐藏其具有类`warning_checkbox`的行（实际上，`tbody`元素）`table.data#report-table``.warning`

据我所见，`'.data_table#report-table`页面上没有元素 - 所以我认为有些东西不起作用。但是 - 它（神奇地？）确实如此，即按预期重绘表格，保留其正确设置。但是，我确实在 Chrome 控制台中收到以下错误：

```
Uncaught TypeError: Cannot read property 'oFeatures' of null 
```

我认为这可能是由于缺少元素（但是它仍然如何工作？）无论如何，我将代码重写为一个函数，因为我需要在其他地方重用它：

```
 var checkbox_rows = function(checkbox_id, table_id, tbody_class) {
    var checkbox = $('div.buttons input[id$='+checkbox_id+']');
    var table = $('table.data[id$='+table_id+']');

    checkbox.click(function() {
      $('tbody[class$='+tbody_class+']', table).toggle(checkbox.is(':checked'));
      table.fnDraw();
    });
  }

  checkbox_rows('warning_checkbox', 'report-table', 'warning'); 
```

这也有效（对我来说更有意义） - 但现在我在 Chrome 控制台中遇到了一个不同的错误：

```
Uncaught TypeError: Object [object Object] has no method 'fnDraw' 
```

所以我的问题是，我做错了什么？重绘 DataTable 的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T12:31:46.283

在修改后的代码中，您调用的是没有关联方法`fnDraw()`的 jQuery对象，而不是 DataTable 对象。`$('table')``fnDraw()`

您需要调用[`fnDraw()`](http://www.datatables.net/api#fnDraw)您最初调用的对象`dataTable()`，如：

```
$(document).ready(function() {
  var oTable = $('#yourDataTable').dataTable();
  oTable.fnDraw();
}); 
```

所以这行不通：

```
$(document).ready(function() {
  var oTable = $('#yourDataTable');
  oTable.fnDraw(); // Won't work, because the dataTable() method wasn't called above
}); 
```

如果您由于某种原因无法访问您调用的原始对象`dataTable()`（很难说没有看到更多代码），您可以尝试通过调用并可选地传入or`dataTable()`来重新初始化表，具体取决于您的需要。所以像：`table`[`bDestroy`](http://datatables.net/usage/options#bDestroy)[`bRetrieve`](http://datatables.net/usage/options#bRetrieve)

```
table.dataTable({ "bRetrieve": true }); 
```

(I'm honestly not sure whether you'd need to call `fnDraw()` any more after that.)

# jquery - jquery onsubmit 不起作用

> ID：14894441
> 
> 赞同：0
> 
> 时间：2013-02-15T12:08:34.987
> 
> 标签：jquery, ajax, forms, submit, confirm

我有一个表格

```
 <form id="formModLezione" method="post"> 
```

现在，我正在尝试这样做：

```
 var messaggio="";
 var url = "EsistonoIscritti";
 var xmlHttp = new XMLHttpRequest();
 xmlHttp.open("POST", url, false);
 xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
 xmlHttp.send("id="+id);
 xmlHttp.onreadystatechange = function() {
    if (xmlHttp.readyState == 4) // COMPLETED
{   if (xmlHttp.status == 200) // SUCCESSFUL
        {var str = xmlHttp.responseText;
         if (str.localeCompare("ko") != 0) {//ci sono utenti iscritti
             var utenti=JSON.parse(str);
             messaggio+="A questa lezione sono iscritte le seguenti persone, avvertile!\n";
      for(var i=0;i<utenti.length;i++){
        messaggio+=(i+1)+") "+utenti[i].nome+" "+utenti[i].cognome+" Tel."+utenti[i].telefono+"\n";
      }
        messaggio+="Vuoi procedere?";
        alert("messaggio");
         }
    } else {
        alert("An error occurred while communicating with the server.");
            }
    }
};
$("#formModLezione").on("submit","return confirm('"+messaggio+"');");
$("#formModLezione").attr("action","ModificaLezione?id="+id); 
```

当我单击表单的提交按钮时，对 servlet ModificaUtente 的调用有效，但没有显示任何警报！有人知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:08:02.513

不确定是否存在语法问题，但可能是这样的？

```
$("#formModLezione").on("submit", function(){
    confirm(messagio);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:13:15.140

尝试

```
$("#formModLezione").bind("submit", function(e){
   e.preventDefault();

    confirm(messagio);
}); 
```

# iphone - 切换到前置摄像头时相机冻结

> ID：14894445
> 
> 赞同：2
> 
> 时间：2013-02-15T12:08:50.263
> 
> 标签：iphone, objective-c, avfoundation

**我的问题**

我正在使用 AVFoundation 每 5 秒捕获一次视频输出的帧。当用户点击一个按钮时，输入摄像头应该从前一个切换到后一个，反之亦然。问题是，每次我将**后置摄像头**切换到**前置摄像头**时，它都会冻结（奇怪的是，它的工作方式相反 - 意思是前置摄像头到后置摄像头）！

**我使用的代码**

为了在相机之间切换，我使用了取自 Apple 的[AVCam 示例代码的](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)**确切**代码，只是稍微更改了变量名称（因此它将与我的代码匹配）：

```
- (BOOL)toggleCamera
{
    BOOL success = NO;

    if ([self cameraCount] > 1) {
        NSError *error;
        AVCaptureDeviceInput *newVideoInput;
        AVCaptureDevicePosition position = [[self.videoInput device] position];

        if (position == AVCaptureDevicePositionBack)
            newVideoInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self frontFacingCamera] error:&error];

        else if (position == AVCaptureDevicePositionFront)
            newVideoInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self backFacingCamera] error:&error];

        else
            goto bail;

        if (newVideoInput != nil) {

            // Start configuring the session.
            [[self captureSession] beginConfiguration];

            // Remove the current video input device.
            [[self captureSession] removeInput:[self videoInput]];

            if ([[self captureSession] canAddInput:newVideoInput]) {
                [[self captureSession] addInput:newVideoInput];
                [self setVideoInput:newVideoInput];
            }

            else {
                [[self captureSession] addInput:[self videoInput]];
            }

            [[self captureSession] commitConfiguration];

            success = YES;
            [newVideoInput release];
        }

        else if (error) {
            NSLog(@"PICTURE TAKER: Failed to toggle cameras."
                  @"\nError: %@", error.localizedDescription);
        }
    }

bail:
    return success;
} 
```

为了设置`AVCaptureSession`，我再次使用[AVCam 示例代码中的](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)**完全相同**的代码，在添加的输出中略有变化，（以满足我的需要）：

```
- (BOOL) setupSession
{
    BOOL success = NO;

    // Set torch and flash mode to auto
    if ([[self backFacingCamera] hasFlash]) {
        if ([[self backFacingCamera] lockForConfiguration:nil]) {
            if ([[self backFacingCamera] isFlashModeSupported:AVCaptureFlashModeAuto]) {
                [[self backFacingCamera] setFlashMode:AVCaptureFlashModeAuto];
            }
            [[self backFacingCamera] unlockForConfiguration];
        }
    }
    if ([[self backFacingCamera] hasTorch]) {
        if ([[self backFacingCamera] lockForConfiguration:nil]) {
            if ([[self backFacingCamera] isTorchModeSupported:AVCaptureTorchModeAuto]) {
                [[self backFacingCamera] setTorchMode:AVCaptureTorchModeAuto];
            }
            [[self backFacingCamera] unlockForConfiguration];
        }
    }

    // Init the device inputs
    AVCaptureDeviceInput *newVideoInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self frontFacingCamera] error:nil];

    // Create a video output & configure it.
    AVCaptureVideoDataOutput *newVideoDataOutput = [[AVCaptureVideoDataOutput alloc] init];
    newVideoDataOutput.videoSettings = @{(NSString *)kCVPixelBufferPixelFormatTypeKey : @(kCVPixelFormatType_32BGRA)};

    // Set the output's delegate.
    dispatch_queue_t queue = dispatch_queue_create("MyQueue", NULL);
    [newVideoDataOutput setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);

    // Create session (use default AVCaptureSessionPresetHigh)
    AVCaptureSession *newCaptureSession = [[AVCaptureSession alloc] init];

    // Add inputs and output to the capture session
    if ([newCaptureSession canAddInput:newVideoInput]) {
        [newCaptureSession addInput:newVideoInput];
    }

    if ([newCaptureSession canAddOutput:newVideoDataOutput]) {
        [newCaptureSession addOutput:newVideoDataOutput];
    }

    [self setVideoOutput:newVideoDataOutput];
    [self setVideoInput:newVideoInput];
    [self setCaptureSession:newCaptureSession];

    [newVideoDataOutput release];
    [newVideoInput release];
    [newCaptureSession release];

    // Get our view's layer.
    CALayer *viewLayer = self.view.layer;

    // Add the the session's preview layer.
    AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.captureSession];
    captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
    captureVideoPreviewLayer.frame = self.view.bounds;
    [viewLayer insertSublayer:captureVideoPreviewLayer below:self.imageViewOverlay.layer];
    [captureVideoPreviewLayer release];

    success = YES;

    return success;
} 
```

**重要提示：调用输出代理后，相机立即冻结。*

谁能帮我解决这个问题？好像我几乎什么都试过了！

**更新#1**

根据要求， self 指的是一个视图控制器，它呈现会话的预览层并管理与相机相关的所有事物。此外，我发布了处理 frontFacingCamera 部分的代码，该代码（就像我迄今为止发布的所有代码一样）取自 Apple 的[AVCam 示例代码](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)：

```
// Find a camera with the specificed AVCaptureDevicePosition, returning nil if one is not found
- (AVCaptureDevice *) cameraWithPosition:(AVCaptureDevicePosition) position
{
    NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    for (AVCaptureDevice *device in devices) {
        if ([device position] == position) {
            return device;
        }
    }
    return nil;
}

// Find a front facing camera, returning nil if one is not found
- (AVCaptureDevice *) frontFacingCamera
{
    return [self cameraWithPosition:AVCaptureDevicePositionFront];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T09:00:49.893

```
BOOL isUsingFrontFacingCamera;

- (BOOL) swapCameras
{
    if ([self cameraCount] > 1) {
    AVCaptureDevicePosition desiredPosition;
    if (isUsingFrontFacingCamera) {
        desiredPosition = AVCaptureDevicePositionBack;
    } else {
        desiredPosition = AVCaptureDevicePositionFront;
    }

    for (AVCaptureDevice *d in [AVCaptureDevice devicesWithMediaType: AVMediaTypeVideo]) {
        if ([d position] == desiredPosition) {
            [[self session] beginConfiguration];
            AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:d error:nil];
            for (AVCaptureInput *oldInput in [[self session] inputs]) {
                [[self session] removeInput:oldInput];
            }
            [[self session] addInput:input];
            [[self session] commitConfiguration];
            break;
        }
    }
    isUsingFrontFacingCamera = !isUsingFrontFacingCamera;
    return YES;
}
return NO;
} 
```

[从这里](https://stackoverflow.com/questions/5704464/video-freezes-on-camera-switch-with-avfoundation)回答

编辑：这来自 Square Cam Apple 示例代码。工作正常。也经过测试。[http://developer.apple.com/library/ios/#samplecode/SquareCam/Listings/SquareCam_SqareCamViewController_m.html](http://developer.apple.com/library/ios/#samplecode/SquareCam/Listings/SquareCam_SqareCamViewController_m.html)

// 使用前置/后置摄像头

```
- (IBAction)switchCameras:(id)sender

{

AVCaptureDevicePosition desiredPosition;

if (isUsingFrontFacingCamera)

    desiredPosition = AVCaptureDevicePositionBack;

else

    desiredPosition = AVCaptureDevicePositionFront;

for (AVCaptureDevice *d in [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo]) {

    if ([d position] == desiredPosition) {

        [[previewLayer session] beginConfiguration];

        AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:d error:nil];

        for (AVCaptureInput *oldInput in [[previewLayer session] inputs]) {

            [[previewLayer session] removeInput:oldInput];

        }

        [[previewLayer session] addInput:input];

        [[previewLayer session] commitConfiguration];

        break;

    }

}

isUsingFrontFacingCamera = !isUsingFrontFacingCamera;

} 
```

# erlang - 在一台机器上安装多个版本的 Erlang/OTP

> ID：14894447
> 
> 赞同：6
> 
> 时间：2013-02-15T12:08:58.673
> 
> 标签：erlang

这是否可以在同一平台上同时安装不同版本的 Erlang/OTP？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T15:15:19.557

我使用[Kerl](https://github.com/spawngrid/kerl)在我的机器上安装 Erlang。非常易于使用，并且允许在同一台机器上安装多个 Erlang 系统。然后，您可以轻松选择要使用的那个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T18:14:07.797

是的，我通常在我的主目录中安装不同的版本。我从源代码构建它们：

```
./configure --prefix=$HOME/r15b01
make && make install 
```

然后我可以选择一个版本来使用`PATH=$HOME/r15b01/bin:$PATH`，并像往常一样编译和运行东西。

* * *

这些天我为此使用[asdf 。](https://asdf-vm.com/)安装`asdf`并将相关行添加到您的`.bashrc`，然后运行：

```
asdf plugin add erlang
asdf install erlang 22.3.3
asdf install erlang 23.0.2 
```

然后，您可以将刚刚构建的 Erlang 版本之一设置为默认版本：

```
asdf global erlang 23.0.2 
```

或者您可以将其设置为在当前目录及其子目录中使用 - 这将`.tool-versions`在当前目录中创建一个文件：

```
asdf local erlang 22.3.3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T14:17:09.420

这不仅是可能的，而且非常频繁。在我的机器上，我安装了一个用于开发的版本（R13B03），它是我启动 erl 时的默认版本。与氮气相关的同一版本的第二个副本。当我启动我的氮气网站时使用此副本。使用R16B进行开发时版本不会改变.. 安装Wings3D附带的部分旧版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-14T20:58:40.657

在 Mac 上，Macport 有助于切换，即使在它涵盖的版本和较新的版本之间也是如此。

例如，直接从 Erlang Solutions 安装 Erlang 17，您可以切换回 RB1603（之后打开一个新的终端窗口）：

```
sudo port activate erlang @R16B03-1_0+hipe+ssl 
```

通过 _de_activating Macports 安装切换回 Erlang 17（然后打开一个新的终端窗口）：

```
sudo port deactivate erlang @R16B03-1_0+hipe+ssl 
```

列出您安装的所有版本：

```
port installed erlang 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-15T20:59:51.260

使用[Nix 包管理器](https://nixos.org/)不需要全局安装解释器（特别是因为有时需要多个版本），并且[`nix-shell`](https://nixos.org/nix/manual/#sec-nix-shell)会打开一个子 shell，路径中包含 Erlang 可执行文件。

## 1\. 只获取 Erlang (no `shell.nix`)

对于活动频道中的当前版本：

```
nix-shell -p erlang 
```

对于当前频道中没有的其他版本，可以给出具体的频道：

```
nix-shell -I nixpkgs=channel:nixos-unstable -p erlangR22 
```

`NixOS/nixpkgs`或者在克隆中添加 Nix 表达式的路径：

```
$ nix-shell -I nixpkgs=~/clones/nixpkgs -p erlangR23 
```

## 2.更精细的项目设置配置：使用`shell.nix`文件

可以启动一个复杂的开发环境，调用`nix-shell shell.nix`会处理所有事情——如果使用( [archived )](https://web.archive.org/web/20200715204055/https://nixos.wiki/wiki/Development_environment_with_nix-shell)[设置，即使在进入目录时也会自动`direnv`](https://nixos.wiki/wiki/Development_environment_with_nix-shell)调用。

### 2.1 例子

二郎

这将使您`erl`与.`rebar3``buildInputs`

```
{ pkgs ? import ~/clones/nixpkgs {} }:

pkgs.mkShell {

  buildInputs = with pkgs; [
    beam.packages.erlangR22.erlang
    beam.packages.erlangR22.rebar3
    curl
    ffmpeg
    git
    google-cloud-sdk
    jq
  ];

  # Where would be the best place for this?
  shellHook = ''
    export ERL_AFLAGS="-kernel shell_history enabled"
  ''; 
```

Elixir/Phoenix 网络项目

[这](https://raw.githubusercontent.com/toraritte/shell.nixes/master/elixir-phoenix-postgres/shell.nix)（[已归档](https://web.archive.org/web/20200715205718/https://raw.githubusercontent.com/toraritte/shell.nixes/master/elixir-phoenix-postgres/shell.nix)）将为 Elixir/Phoenix Web 应用程序设置一个环境，并带有一个旋转的 PostgreSQL 开发实例：

```
####################################################################
# Importing a cloned Nixpkgs repo  (from my home directory), because
# the latest channels don't have Elixir 1.9.
# See https://nixos.org/nix/manual/#idm140737317975776 for the meaning
# of `<nixpkgs>` and `~` in Nix expressions (towards the end of that
# section).
####################################################################

{ pkgs ? import ~/clones/nixpkgs {} }:

pkgs.mkShell {

  buildInputs = with pkgs; [
    beam.packages.erlangR22.elixir_1_9
    postgresql_11
    nodejs-12_x
    git
    inotify-tools
  ];

  shellHook = ''

    ####################################################################
    # Create a diretory for the generated artifacts
    ####################################################################

    mkdir .nix-shell
    export NIX_SHELL_DIR=$PWD/.nix-shell

    ####################################################################
    # Put the PostgreSQL databases in the project diretory.
    ####################################################################

    export PGDATA=$NIX_SHELL_DIR/db

    ####################################################################
    # Put any Mix-related data in the project directory
    ####################################################################

    export MIX_HOME="$NIX_SHELL_DIR/.mix"
    export MIX_ARCHIVES="$MIX_HOME/archives"

    ####################################################################
    # Clean up after exiting the Nix shell using `trap`.
    # ------------------------------------------------------------------
    # Idea taken from
    # https://unix.stackexchange.com/questions/464106/killing-background-processes-started-in-nix-shell
    # and the answer provides a way more sophisticated solution.
    #
    # The main syntax is `trap ARG SIGNAL` where ARG are the commands to
    # be executed when SIGNAL crops up. See `trap --help` for more.
    ####################################################################

    trap \
      "
        ######################################################
        # Stop PostgreSQL
        ######################################################

        pg_ctl -D $PGDATA stop

        ######################################################
        # Delete `.nix-shell` directory
        # ----------------------------------
        # The first  step is going  back to the  project root,
        # otherwise `.nix-shell`  won't get deleted.  At least
        # it didn't for me when exiting in a subdirectory.
        ######################################################

        cd $PWD
        rm -rf $NIX_SHELL_DIR
      " \
      EXIT

    ####################################################################
    # If database is  not initialized (i.e., $PGDATA  directory does not
    # exist), then set  it up. Seems superfulous given  the cleanup step
    # above, but handy when one gets to force reboot the iron.
    ####################################################################

    if ! test -d $PGDATA
    then

      ######################################################
      # Init PostgreSQL
      ######################################################

      pg_ctl initdb -D  $PGDATA

      ######################################################
      # PORT ALREADY IN USE
      ######################################################
      # If another `nix-shell` is  running with a PostgreSQL
      # instance,  the logs  will show  complaints that  the
      # default port 5432  is already in use.  Edit the line
      # below with  a different  port number,  uncomment it,
      # and try again.
      ######################################################

      # sed -i "s|^#port.*$|port = 5433|" $PGDATA/postgresql.conf

    fi

    ####################################################################
    # Start PostgreSQL
    # ==================================================================
    # Setting all  necessary configuration  options via  `pg_ctl` (which
    # is  basically  a wrapper  around  `postgres`)  instead of  editing
    # `postgresql.conf` directly with `sed`. See docs:
    #
    # + https://www.postgresql.org/docs/current/app-pg-ctl.html
    # + https://www.postgresql.org/docs/current/app-postgres.html
    #
    # See more on the caveats at
    # https://discourse.nixos.org/t/how-to-configure-postgresql-declaratively-nixos-and-non-nixos/4063/1
    # but recapping out of paranoia:
    #
    # > use `SHOW`  commands to  check the  options because  `postgres -C`
    # > "_returns values  from postgresql.conf_" (which is  not changed by
    # > supplying  the  configuration options  on  the  command line)  and
    # > "_it does  not reflect  parameters supplied  when the  cluster was
    # > started._"
    #
    # OPTION SUMMARY
    # --------------------------------------------------------------------
    #
    #  + `unix_socket_directories`
    #
    #    > PostgreSQL  will  attempt  to create  a  pidfile  in
    #    > `/run/postgresql` by default, but it will fail as it
    #    > doesn't exist. By  changing the configuration option
    #    > below, it will get created in $PGDATA.
    #
    #   + `listen_addresses`
    #
    #     > In   tandem  with   edits   in  `pg_hba.conf`   (see
    #     > `HOST_COMMON`  below), it  configures PostgreSQL  to
    #     > allow remote connections (otherwise only `localhost`
    #     > will get  authenticated and the rest  of the traffic
    #     > discarded).
    #     >
    #     > NOTE: the  edit  to  `pga_hba.conf`  needs  to  come
    #     >       **before**  `pg_ctl  start`  (or  the  service
    #     >       needs to be restarted otherwise), because then
    #     >       the changes are not being reloaded.
    #     >
    #     > More info  on setting up and  troubleshooting remote
    #     > PosgreSQL connections (these are  all mirrors of the
    #     > same text; again, paranoia):
    #     >
    #     >   + https://stackoverflow.com/questions/24504680/connect-to-postgres-server-on-google-compute-engine
    #     >   + https://stackoverflow.com/questions/47794979/connecting-to-postgres-server-on-google-compute-engine
    #     >   + https://medium.com/scientific-breakthrough-of-the-afternoon/configure-postgresql-to-allow-remote-connections-af5a1a392a38
    #     >   + https://gist.github.com/toraritte/f8c7fe001365c50294adfe8509080201#file-configure-postgres-to-allow-remote-connection-md

    HOST_COMMON="host\s\+all\s\+all"
    sed -i "s|^$HOST_COMMON.*127.*$|host all all 0.0.0.0/0 trust|" $PGDATA/pg_hba.conf
    sed -i "s|^$HOST_COMMON.*::1.*$|host all all ::/0 trust|"      $PGDATA/pg_hba.conf

     #  + `log*`
     #
     #    > Setting up basic logging,  to see remote connections
     #    > for example.
     #    >
     #    > See the docs for more:
     #    > https://www.postgresql.org/docs/current/runtime-config-logging.html

    pg_ctl                                                  \
      -D $PGDATA                                            \
      -l $PGDATA/postgres.log                               \
      -o "-c unix_socket_directories='$PGDATA'"             \
      -o "-c listen_addresses='*'"                          \
      -o "-c log_destination='stderr'"                      \
      -o "-c logging_collector=on"                          \
      -o "-c log_directory='log'"                           \
      -o "-c log_filename='postgresql-%Y-%m-%d_%H%M%S.log'" \
      -o "-c log_min_messages=info"                         \
      -o "-c log_min_error_statement=info"                  \
      -o "-c log_connections=on"                            \
      start

    ####################################################################
    # Install Node.js dependencies if not done yet.
    ####################################################################

    if test -d "$PWD/assets/" && ! test -d "$PWD/assets/node_modules/"
    then
      (cd assets && npm install)
    fi

    ####################################################################
    # If $MIX_HOME doesn't exist, set it up.
    ####################################################################

    if ! test -d $MIX_HOME
    then

      ######################################################
      # ...  but first,  test whether  there is  a `_backup`
      # directory. Had issues with  installing Hex on NixOS,
      # and Hex and  Phoenix can be copied  from there, just
      # in case.
      ######################################################

      if test -d "$PWD/_backup"
      then
        cp -r _backup/.mix .nix-shell/
      else
        ######################################################
        # Install Hex and Phoenix via the network
        ######################################################

        yes | mix local.hex
        yes | mix archive.install hex phx_new
      fi
    fi

    if test -f "mix.exs"
    then
      # These are not in the  `if` section above, because of
      # the `hex` install glitch, it  could be that there is
      # already a `$MIX_HOME` folder. See 2019-08-05_0553

      mix deps.get

      ######################################################
      # `ecto.setup` is defined in `mix.exs` by default when
      # Phoenix  project  is  generated via  `mix  phx.new`.
      # It  does  `ecto.create`,   `ecto.migrate`,  and  run
      # `priv/seeds`.
      ######################################################
      mix ecto.setup
    fi
  '';

  ####################################################################
  # Without  this, almost  everything  fails with  locale issues  when
  # using `nix-shell --pure` (at least on NixOS).
  # See
  # + https://github.com/NixOS/nix/issues/318#issuecomment-52986702
  # + http://lists.linuxfromscratch.org/pipermail/lfs-support/2004-June/023900.html
  ####################################################################

  LOCALE_ARCHIVE = if pkgs.stdenv.isLinux then "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";
} 
```

* * *

### 如何在控制台上查找具有属性路径的包

```
$ nix-env -qaP 'erlang*'
# ...
nixos.erlangR20            erlang-20.3.8.9
nixos.erlangR21            erlang-21.3.8.3
nixos.erlang               erlang-22.1.7
# ... 
```

```
$ nix-env -f ~/clones/nixpkgs/ -qaP 'erlang*'
# ...
nixos.erlangR20            erlang-20.3.8.9
nixos.erlangR21            erlang-21.3.8.3
nixos.erlang               erlang-22.1.7
# ...
=== >>> erlangR23            erlang-23.0.2  <<<==== 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-02T15:41:43.550

考虑使用kerl。它允许您使用多个 Erlang 安装[https://github.com/kerl/kerl](https://github.com/kerl/kerl)

# javascript - 如何显示html元素

> ID：14894455
> 
> 赞同：0
> 
> 时间：2013-02-15T12:09:26.293
> 
> 标签：javascript

按下提交按钮时，我正在尝试创建下拉列表。这将通过一个while循环来制作不同数量的列表。我目前有以下代码，但它没有按预期工作。

```
<html>
    <head>
        <script type="text/javascript">
            function getvalue() {
                number = document.getnumber.input.value;
                document.getElementById("result").value = number;
            }
        </script>
    </head>
    <body>
        <script>
            function generatedropdown() {
                while (i < number) {
                    html = '<select name="select" id="i">';
                    html += '<option>Test 1</option>';
                    html += '<option>Test 2</option>';
                    html += '<option>Test 3</option>';
                    html += '<option>Test 4</option>';
                    html += '<option>Test 5</option>';
                    html += '</select>';

                    innerHTML = html;
                    i++;
                }
            }
        </script>
        <form name="getnumber">Input number:
            <input type="text" name="input">
            <input type="button" value="Next" onClick="getvalue()">
        </form>
        <form id="showlists">Number entered:
            <input type="text" id="result" readonly="readonly">
            <input type="button" value="Show lists" onClick="generatedropdown()">
        </form>
    </body>
</html> 
```

编辑：我已将代码更改为此，但仍然没有运气。

```
<html>
<head>
<script type="text/javascript">

function getvalue() {
 number = document.getnumber.input.value;
 document.getElementById("result").value = number; 
} 
</script>

</head>
<body>

<script>
function generatedropdown() {
html = '<select name="select" id="i">';
while (i < number)  {            
html+='<option>Test 1</option>';
html+='<option>Test 2</option>';
html+='<option>Test 3</option>';
html+='<option>Test 4</option>';
html+='<option>Test 5</option>';        
i++;
}
html+='</select>';
document.getElementById("my-output").innerHTML = html;
}
</script>

<form name="getnumber">
Input number: <input type="text" name="input">
<input type="button" value="Next" onClick="getvalue()">
</form>

<form id="showlists">
Number entered: <input type="text" id="result" readonly="readonly">     
<input type="button" value="Show lists" onClick="generatedropdown()">
<div id="my-output">Generated List:</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:13:04.307

您只能`.innerHTML`在元素上使用，如下所示：

```
document.body.innerHTML = 'This is my output'; 
```

现在，您`body`将充满一些内容。如果你想把它放在其他元素中，比如 a `div`，你必须先创建它`div`......

```
<div id="my-output"></div> 
```

然后获取它并应用内容：

```
document.getElementById('my-output').innerHTML = 'This is my output'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:16:35.817

```
html = '<select name="select" id="i">';
while (i < number)  {            
    html+='<option>Test 1</option>';
    html+='<option>Test 2</option>';
    html+='<option>Test 3</option>';
    html+='<option>Test 4</option>';
    html+='<option>Test 5</option>';        
    i++;
}
html+='</select>';
document.getElementById('your_element_id').innerHTML = html; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:12:59.007

你的语法是错误的，首先你必须在调用`getvalue()`之前调用`generatedropdown()`，然后，而不是`innerHTML = html;`使用`document.getElementById('YOUR_CONTAINER_ID').innerHTML = html;`

# python - Boto SQS：删除 RawMessage

> ID：14894456
> 
> 赞同：3
> 
> 时间：2013-02-15T12:09:28.517
> 
> 标签：python, boto, amazon-sqs

我正在使用 python boto 2.8，但无法删除消息。这是我的测试代码：

```
conn = boto.sqs.connect_to_region("us-east-1",
                                  aws_access_key_id=AWS_ACCESS_KEY,
                                  aws_secret_access_key=AWS_SECRET_KEY)

q = conn.get_queue("sqs_bounces")
q.set_message_class(RawMessage) //need this to be able to get message as json
results = q.get_messages(num_messages=10,visibility_timeout=30,wait_time_seconds=10)
for rs in results:
    str = rs.get_body()
    print str
    result = json.loads(str)
    rs = json.loads(result["Message"])
    print rs["notificationType"]
    #get the email and save it as bounced
    // Do saving.....

    #Delete message
    //How do i delete the current message? 
```

这里有人可以指导我如何删除它吗？有时我收到 1 条消息，有时是 3 条。而且我不想在每次拉取时都保存相同的退回电子邮件，这就是为什么我需要在保存它们后将其删除。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:16:04.520

返回结果集中的每个对象都是一个具有`delete`方法的 RawMessage 对象。因此，如果您将循环编码得更像这样：

```
for msg in results:
    body = msg.get_body()
    body = json.loads(body)
    message_body = json.loads(body['Message'])
    ...
    msg.delete() 
```

您应该能够删除该消息。

# linux - 检索 bash 的输出历史记录

> ID：14894461
> 
> 赞同：5
> 
> 时间：2013-02-15T12:09:50.973
> 
> 标签：linux, bash, history

我正在使用 Mac OSX，我正在寻找一个命令来检索我运行的命令的输出历史（如果它们存在）。是否可以 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T14:03:18.290

我认为 Bash 只保留您输入的命令的历史记录。您可以通过输入“历史”来检索它。但我不认为 Bash 将这些命令的输出存储在任何地方，这必须是终端仿真器的一个功能。

# python - 寻找下一个素数

> ID：14894465
> 
> 赞同：1
> 
> 时间：2013-02-15T12:10:04.103
> 
> 标签：python, performance

我正在寻找一种快速且内存高效的方法来找到下一个素数。

**输入：**一个整数`n`

**输出**第一个大的素数`n`

有非常好的代码可以打印所有小于`n`以[最快方式列出所有素数低于 N](https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n-in-python/3035188)的素数。我的低效方法目前找到所有小于的素数`2n`，然后`n`通过循环遍历列表来搜索大于的第一个素数。这是我当前的代码。

```
import numpy
def primesfrom2to(n):
    """ Input n>=6, Returns a array of primes, 2 <= p < n """
    sieve = numpy.ones(n/3 + (n%6==2), dtype=numpy.bool)
    for i in xrange(1,int(n**0.5)/3+1):
        if sieve[i]:
            k=3*i+1|1
            sieve[       k*k/3     ::2*k] = False
            sieve[k*(k-2*(i&1)+4)/3::2*k] = False
    return numpy.r_[2,3,((3*numpy.nonzero(sieve)[0][1:]+1)|1)]

n=10**7
timeit next(x for x in primesfrom2to(2*n) if x > n)
1 loops, best of 3: 2.18 s per loop

n= 10**8
timeit next(x for x in primesfrom2to(2*n) if x > n)
1 loops, best of 3: 21.7 s per loop 
```

最后一个测试需要将近 1GB 的 RAM。这段代码的另一个问题是，例如，如果 $n = 10**10$ 就会失败。

这个问题可以更快解决吗？有没有办法让它使用更少的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:29:21.297

最好的方法显然如下。

1.  `n`在直到`2n`消除具有小素数的数字时开始筛子。
2.  对剩余值运行概率素数测试器，例如 Miller-Rabin。
3.  如果需要，对已报告为素数的第一个数运行确定性素数测试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:27:45.583

我可以想到两种解决方法。我最近尝试的第一个 - 我在 C++ 中制作了一个非常有效[的 Eratosthenes 筛，](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)并将其变成了[Python 的 C/C++ 扩展](http://docs.python.org/2/extending/extending.html)。

它的内存效率很高，因为它使用位图而不是实际的`int`s 数组，而且速度非常快 - 最多 10**9 它在一个破旧的核心虚拟机上工作大约 20 秒（以及将位图导出为实际整数）。在您的情况下，您只能保留位图，如果您现在`n`可以预先计算素数的绝对最大值。

另一种方法是研究一些[Primality 测试](http://en.wikipedia.org/wiki/Primality_test)，但不要忘记其中一些是概率性的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:40:29.883

我肯定会推荐某种筛子或过滤器。

在尝试解决涉及质数的问题时，我在 Python 中创建了以下内容： [https ://gist.github.com/anonymous/4960155](https://gist.github.com/anonymous/4960155)

IIRC，我能够在大约 15 秒内通过几百万个素数。这是不久前的事了。我很高兴我保存了它！

# android - Android：来自接收者的 startActivity 也启动 MAIN 活动（action.MAIN / category.LAUNCHER）

> ID：14894467
> 
> 赞同：2
> 
> 时间：2013-02-15T12:10:12.513
> 
> 标签：android

当我从这样的接收器使用 startActivity 时：

```
public void onReceive(final Context context, final Intent intent) {
        Intent i = new Intent();
        i.setClass(context, NewClass.class);
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);  
        i.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);  
        i.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
        context.startActivity(i);
} 
```

在某些设备中（例如 Galaxy S2 android：4.0.4） - 它还从 MAIN 活动的背景开始（使用 action.MAIN 和 category.LAUNCHER）。

--*编辑*--

安卓清单：

```
<application android:label="@string/app_name" android:icon="@drawable/ic_launcher" android:debuggable="true">
    <receiver android:name="com.my.app.MyBroadcastReceiver" android:enabled="true">
        <intent-filter android:priority="99999">
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>
    <activity android:name="com.my.app.Main">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.my.app.NewClass">
        <intent-filter>
            <action android:name="android.intent.action.NEWSCLASS" />
        </intent-filter>
    </activity>
</application> 
```

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:29:40.567

发布您的清单文件可以提供帮助

在清单中删除 NewClass 的意图过滤器。更新：intent-filter 不是必需的，因为您制定了明确的意图。Intent-filter 对于隐式意图很有用。

并尝试删除您在 startActivity 之前设置的所有标志。更新：看看intent.setAction

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:25:40.110

发生这种情况是因为在您的 AndroidManifest.xml 中，活动指定了两件事：

```
 <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter> 
```

# php - php：包含文件中的相对路径

> ID：14894471
> 
> 赞同：1
> 
> 时间：2013-02-15T12:10:21.113
> 
> 标签：php, html, relative-path

我有一个 html 文件 images.html 显示子目录“img”中的图像。它使用相对路径来访问子目录中的图像。

在我的 index.php 中，一切都出错了：

```
require_once("dir1/dir2/images.html"); 
```

现在相对路径是相对于我的 index.php，而不是相对于 dir1/dir2/images.html 并且我看不到我的图像。有没有办法可以使路径相对于**包含**的文件 images.html？

**目录结构**

```
index.php
dir1
   dir2
       images.html
       img
           flower.png 
```

**索引.php**

```
<?php require_once("dir1/dir2/images.html"); ?> 
```

**图像.html**

```
<img src="img/flower.png" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:27:52.213

这是一个 HTML 问题，而不是 PHP。

当您使用浏览器访问时`/dir1/dir2/images.html`，浏览器将`/dir1/dir2`用作相对路径的基础（因此相对路径`img/flower.png`被解析为`/dir1/dir2/img/flower.png`）。当您访问`/index.php`时，它`/`用作基础（所以`img/flower.png`给了`/img/flower.png`，找不到）。

您可以：

*   为您的图像使用绝对路径（例如`/dir1/dir2/img/...`）
*   使用[`base`标签](https://developer.mozilla.org/fr/docs/HTML/Element/base)为**所有**相对路径（包括链接、CSS等）设置一个新的基础 - 编辑：在你的情况下这可能不是一个好主意:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:27:57.893

```
include(dirname(__FILE__).'/include.php'); 
```

参考： http: [//php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

文件的完整路径和文件名。如果在包含中使用，则返回包含文件的名称。自 PHP 4.0.2 起，**FILE**始终包含一个绝对路径，其中符号链接已解析，而在旧版本中，它在某些情况下包含相对路径。

# single-page-application - Trello的url结构

> ID：14894474
> 
> 赞同：1
> 
> 时间：2013-02-15T12:10:24.417
> 
> 标签：single-page-application, trello

trello 中的网址是这样的： [https ://trello.com/board/board_name/501397ee70eb3347473f7452](https://trello.com/board/board_name/501397ee70eb3347473f7452)

由于 trello 是一个单页应用程序，怎么可能有这样的 url，即没有'#'。这些 url 中的每一个都应该向服务器生成一个 GET 请求，因为它们是不同的，因此会导致整个页面加载。有人有解释吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T14:05:48.857

简短的回答是 Trello 使用 HTML5 pushState 和 Backbone.js。

更多关于 pushState 的信息： [https ://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

更多关于 Backbone.js 的信息：http: [//backbonejs.org/](http://backbonejs.org/)

# wso2 - WSO2 ESB 分布式事务

> ID：14894476
> 
> 赞同：2
> 
> 时间：2013-02-15T12:10:29.457
> 
> 标签：wso2, wso2esb, atomikos

我正在尝试使用 WSO2 ESB v 4.5.1 在两个 SOAP Web 服务上实现分布式事务。

我实现了两个独立的 Web 服务（每个都连接到自己的数据库）和一个与这两个服务通信的代理服务。代理服务包含事务中介。

据我了解，此版本的 ESB 使用 Atomikos (www.atomikos.com)，而事务中介是管理事务的唯一方法。

如何配置 WSO2 ESB 和 Atomikos 以使用分布式事务？我找到了分布式事务实现的唯一示例。它显示了由 ESB 本身创建系统事务的简单案例。在我的情况下，事务应该“传递”（传播）到外部网络服务。

有没有通过 SOAP 进行分布式事务的示例？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:08:29.330

这是不支持的。您可以做的是使用故障序列并在该故障序列中添加回滚逻辑。例如，您调用第一个服务，然后第二个服务调用失败。然后您应该以故障序列结束，并且在该序列中您应该编写逻辑来回滚 service1 的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:22:38.933

这（通过不同服务进行的交易）可以通过 Atomikos 的商业版实现 - 名为 ExtremeTransactions。

我不相信 WSO2 中包含一个。你可以问WSO2他们是否可以这样做......

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T11:05:27.550

我想了解有关“不支持”原因的更多信息。

AFAIK WSO2 使用 Axis2 作为 Web 服务堆栈，并且 Axis2 确实支持 WS-Atomic Transactions： [http ://wiki.apache.org/ws/StackComparison](http://wiki.apache.org/ws/StackComparison)

Axis2 是否支持 WS-Atomic Transactions 但 WSO2 缺少使用它所需的东西？

# twitter-bootstrap - 引导弹出框

> ID：14894477
> 
> 赞同：3
> 
> 时间：2013-02-15T12:10:32.953
> 
> 标签：twitter-bootstrap, onclick, hide, popover

我希望能够在弹出框外部单击以使其消失。

此代码运行良好 - 打开另一个弹出框时关闭一个弹出框，当然当您再次单击该按钮时它会消失。

```
var $visiblePopover;

$('body').on('click', '[rel="popover"]', function() {
  var $this = $(this);

  // check if the one clicked is now shown
  if ($this.data('popover').tip().hasClass('in')) {

// if another was showing, hide it
$visiblePopover && $visiblePopover.popover('hide');

// then store reference to current popover
$visiblePopover = $this;

  } else { // if it was hidden, then nothing must be showing
$visiblePopover = '';
  }
});​ 
```

我需要保留此当前功能，但要对其进行修改，以便在您单击弹出框外部时也可以执行相同的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:20:31.807

您只需添加：

```
$('html').click(function(e) {
     $('.btn').popover('hide');
}); 
```

[jsfiddle](http://jsfiddle.net/moalla/fsRaN/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T16:20:58.893

如果您想关闭除已单击的弹出框之外的所有其他弹出框，这个小技巧很方便：

```
$('.popover').click(function (evt) {
    evt.stopPropagation();
    $('.popover').not(this).popover('hide');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:28:15.123

```
$.fn.modal.Constructor = Modal
$(function () {
    $('body').on('click.modal.data-api', '[data-toggle="modal"]', function (e) {

if($visiblePopover && $visiblePopover){
alert("HIDE POPOVER WHEN MODAL IS OPENED")
$visiblePopover && $visiblePopover.popover('hide');
}
        var $this = $(this),
            href = $this.attr('href'),
            $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))),
            option = $target.data('modal') ? 'toggle' : $.extend({
                remote: !/#/.test(href) && href
            }, $target.data(), $this.data())
            e.preventDefault()
            $target.modal(option).one('hide', function () {
                $this.focus()

            })
    })
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-08T14:54:59.087

在 bootstrap.min.js 的末尾添加此代码
1）2 弹出框被点击总是隐藏旧弹出框
2）点击弹出框外部也将隐藏

```
$count=0;$(document).click(function(evt){if($count==0){$count++;}else{$('[data-toggle="popover"]').popover('hide');$count=0;}});$('[data-toggle="popover"]').popover();$('[data-toggle="popover"]').on('click', function(e){$('[data-toggle="popover"]').not(this).popover('hide');$count=0;}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-16T00:58:51.887

单击打开弹出框的按钮时，它应该获得焦点。当您单击离开时，它会失去焦点，您可以使用[.blur()](http://api.jquery.com/blur/)捕捉它，然后使用`popover('hide')`.

# iphone - iOS Safari 文件类型拦截（如果用户单击指向我的文件类型的链接，则启动我的应用程序）

> ID：14894478
> 
> 赞同：0
> 
> 时间：2013-02-15T12:10:39.997
> 
> 标签：iphone, objective-c, xcode, uiwebview, mobile-safari

我想构建一个可以自行启动的 iPhone 应用程序，如果用户在 safari 中单击任何特定范围的文件。

我在这里问是因为这对我来说听起来像是一项艰巨的任务，我猜我可能很难找到答案。所以我愿意接受其他建议，例如可能使用 UIWebView 组件？

一个示例场景是：1）用户安装我的应用程序，并在其设置中指定“*.rss”（任何 .rss 文件）2）用户打开 Safari，单击扩展名为 .rss 的文件 3）我的应用程序打开，并且用完全限定的 NSURL 文件做某事

任何建议表示赞赏，谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:14:44.707

我建议阅读有关该主题的 Apple 官方文档

[https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)

您基本上注册了您的应用程序可以处理的文件类型，并且其他应用程序（例如 Safari）可以将该文件的处理移交给您的应用程序。

# html - 如何设置img“src”路径，以便根页面和嵌套页面都可以找到它......？

> ID：14894479
> 
> 赞同：3
> 
> 时间：2013-02-15T12:10:40.843
> 
> 标签：html, path, relative-path, src

我`<img>`无法从主页`default.aspx`和使用相同`src`路径的任何嵌套页面访问母版页中的元素。

例如，从主页（位于根目录），我可以显示图像：

```
<img src="Images/test.jpg"> 
```

但是位于根目录下一层文件夹中的所有页面都必须用于`src="../Images/test.jpg"`显示图像。

我已经尝试过使用`~`和其他方法来为这两个位置提供一条工作路径，但还没有运气。

这似乎太容易了，所以我一定让这变得比现在更困难......随时用任何线索启发我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T12:14:52.490

您可以使用

```
<img src="/Images/test.jpg"> 
```

在所有页面中。

无论页面是什么，图像都将从 url 中获取`www.yourdomian.com/Images/test.jpg`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-30T12:25:59.803

考虑：

```
@{    
   var src == Url.Content("~/images")+"/myImage.jpg";  
 } 
```

这也有助于我解决路径`../`和`../../` 在 IE 中的 jquery 日历图像显示。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-05T07:32:51.103

在我的情况下 - c# asp.net mvc（发布之前） - 我解决了这个解决方法，因为也没有 src 组合对我有用。

在我的视图开始的某个地方

```
@{
  var path = Server.MapPath("~/Images");
  var src = path + "\\myImage.jpg";  
 } 
```

稍后（仍在视图上）为图像

```
<img src="@src" /> 
```

希望这可以帮助某人:)

# jquery - Jquery 库冲突 - 覆盖不起作用

> ID：14894481
> 
> 赞同：1
> 
> 时间：2013-02-15T12:10:43.263
> 
> 标签：jquery, conflict

Jquery 冲突意味着我的 2 个功能拒绝一起工作。我尝试切换脚本的顺序并将 $ 函数替换为 Jquery 函数。好像不能解决问题！

```
 <div id="mainICONZ" class="iconz">
                <ul class="iconz">
                <li><img src="images/icon-1.png" rel="#mies1"></li>
                <li><img src="images/icon-2.png" rel="#mies2"></li>
                <li><img src="images/icon-3.png" rel="#mies3"></li>
                <li><img src="images/icon-4.png" rel="#mies4"></li>
                </ul>
                </div>

    <div class="simple_contact3" id="mies1">all over the content</div>
            <div class="simple_contact3" id="mies2">all over the content</div>
            <div class="simple_contact3" id="mies3">all over the content</div>
            <div class="simple_contact3" id="mies4">all over the content</div>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
          <script type="text/javascript" src="http://cdn.jquerytools.org/1.1.2/jquery.tools.min.js"></script> !-->
            <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
                  <!-- <script>
    // What is $(document).ready ? See: http://flowplayer.org/tools/using.html#document_ready
    jQuery(document).ready(function() {

    $("img[rel], a[rel]").overlay({expose: '#fff'});

    });
    </script> 
            <script type="text/javascript"> OTHER SCRIPT HERE!! </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:15:52.877

你试过这个：

```
 jQuery.noConflict(); 
```

然后将 $ 替换为 jQuery。

# install4j - 在 install4j 可配置表单中，是否可以在文本字段中输入某个值后立即启用禁用的下一步按钮？

> ID：14894488
> 
> 赞同：1
> 
> 时间：2013-02-15T12:11:31.957
> 
> 标签：install4j

在可配置的表单中，我可以禁用当前表单的“下一步”按钮，使用屏幕激活中的预激活脚本来使用它的属性

```
context.getWizardContext().setNextButtonEnabled(false); 
```

但是，一旦用户在用户名和密码文本字段中输入了一些值，我就需要启用它。我试过通过调用这个方法来启用它

```
context.getWizardContext().setNextButtonEnabled(true); 
```

从用户输入->相应文本字段的验证表达式。但即使我无法实现，我想要的。在 install4j 中是否有可能这样做？

这是我在验证表达式中输入的代码：

```
String username = context.getVariable("userName").toString().trim();
String password = context.getVariable("password").toString().trim();
if((username.equals(null)) || (username.isEmpty())) {
context.getWizardContext().setNextButtonEnabled(false);
}
else if((password.equals(null)) || (password.isEmpty())) {
context.getWizardContext().setNextButtonEnabled(false);
}
else {
context.getWizardContext().setNextButtonEnabled(true); 
}
return true; 
```

我希望这段代码在我输入验证表达式后不会执行。但是必须在哪个位置插入代码，以便用户在用户名和密码字段中输入一些值后，该表单的下一步按钮将被启用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:27:18.097

屏幕的验证表达式仅在用户单击“下一步”按钮时执行。“文本字段”表单组件有两个之前执行的附加脚本：

*   “键验证表达式”属性 -> 在按下单个键后调用

*   “输入验证表达式”属性 -> 当文本字段失去焦点时调用

# java - Applet 中的单例

> ID：14894489
> 
> 赞同：1
> 
> 时间：2013-02-15T12:11:41.543
> 
> 标签：java, applet, singleton

我们有一个 Singleton 来维护小程序的当前 UI 状态。问题是：

1.  用户在浏览器中打开小程序页面，在下拉列表中选择一个值。
2.  用户在应用程序中浏览另一个纯 HTML 页面。
3.  用户回到小程序页面，UI 状态完好无损，即他在下拉菜单中选择的值在那里。这种下拉状态来自一个Singleton，它保存了applet UI 状态。
4.  用户再次转到应用程序中的纯 HTML 页面。
5.  用户再次回到小程序页面，这次状态丢失并重置为默认布局（下拉菜单包含默认值）。

我发现的原因是，当用户第二次返回小程序时，保存 UI 状态的 Singleton 无法保持其状态。所有静态变量都重置为其默认值。

我发现小程序应该是无状态的，因为这个[链接](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/applet/best_practices.html#state)：

其中说：

> 如果类加载器缓存获取的内存不需要用于其他目的，则存储在小程序中的值可以在调用之间保持不变。但是你不能依赖这种行为。一般来说，小程序应该是无状态的。如果需要持久存储，请使用浏览器 cookie。

在这种情况下，我们如何为 Applets 创建单例？我无法在浏览器 cookie 中保存整个 UI 状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:50:59.293

我看到了一些选项：

1.  向服务器发送 http 请求以保存当前状态，使用 ajax 调用，小程序中 http 调用的参考：[如何（简单地）从 java 生成 POST http 请求以进行文件上传](https://stackoverflow.com/questions/314300/how-to-simply-generate-post-http-request-from-java-to-do-the-file-upload)

2.  使用 cookie 保存状态，这里是参考：[java 小程序（未签名）可以创建/读取 cookie 吗？](https://stackoverflow.com/questions/1962823/can-java-applets-not-signed-create-read-cookies)

3.  调用 javascript 函数以使用 Jstorage 将状态保存在浏览器的本地存储中，参考： http: [//www.jstorage.info/](http://www.jstorage.info/)

Jstorage 的使用非常简单，看一下这个例子，它存储了一个名为“contador”的计数器

```
<html><head>
<script src="jquery.min.js"></script>
<script src="jstorage.js"></script>
<script>
    function init() {
        var contador = $.jStorage.get("contador");
        $('#you').html('contador=' + contador);
        contador++;
        $.jStorage.set("contador", contador);
    }
</script>
</head>
<body onload="init()">
    <div id="you"></div>
</body>
</html> 
```

# javascript - 图片加载不工作，错误 Uncaught TypeError: Type error

> ID：14894490
> 
> 赞同：0
> 
> 时间：2013-02-15T12:11:43.133
> 
> 标签：javascript, image, html, canvas

我想使用`image = new Image();`

我用三个不同的图像定义了新变量。

当我运行代码时，我收到错误“Uncaught TypeError: Type error”

如何正确修复代码以绘制包含在可变图像中的所有图像。

[演示 jsFFidle](http://jsfiddle.net/8p9ad/1/)

非常感谢。

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
    canvas.width = 1000;
    canvas.height = 500;
var BACKGROUND = {
  p1:  { url : "http://flora4me.com/im/b/1149.jpg",x:   5, y:   5, w: 1280, h: 480 , dx:0 ,dy:0   ,dw:500 ,dh:500 },
  p2:  { url : "http://flora4me.com/im/b/1119.jpg",x:   5, y: 495, w: 1280, h: 480 , dx:100 ,dy:100 ,dw:500 ,dh:500},
  p3:  { url : "http://vladfilippov.com/blog/2012-12-07/intro.jpg",x:   5, y: 985, w: 1280, h: 480 , dx:200 ,dy:200 ,dw:500 ,dh:500 }
  };
var  image;
for (var n in BACKGROUND)
{
    image = new Image();
    image.src = BACKGROUND[n].url;
    image.onload = function() {
    ctx.drawImage(image, BACKGROUND[n].x,BACKGROUND[n].y, BACKGROUND[n].w, BACKGROUND[n].h, BACKGROUND[n].dx, BACKGROUND[n].dy, BACKGROUND[n].dw, BACKGROUND[n].dh );   
        };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:10:07.787

现在您要绘制`p3`三遍，而不是遍历`BACKGROUND`. 虽然这不会解释“类型错误”。可能您正在使用一个库，它将属性添加到 Object 原型。要解决这些问题，请切换`BACKGROUND`到数组并像这样创建循环：

```
for (var n = 0; n < BACKGROUND.length; n++) {
    image = new Image();
    (function (x) {image.onload = function() {
            ctx.drawImage(image, BACKGROUND[x].x,BACKGROUND[x].y, BACKGROUND[x].w, BACKGROUND[x].h, BACKGROUND[x].dx, BACKGROUND[x].dy, BACKGROUND[x].dw, BACKGROUND[x].dh);   
        }
    }(n));
    image.src = BACKGROUND[n].url;
} 
```

您还可以保留该`BACKGROUND`对象，但在这种情况下，您需要检查以下第一行中预期的属性`for..in`：

```
if (!BACKGROUND.hasOwnProperty(n)) continue; 
```

# mysql - 如何对从 ColdFusion 中的循环 Mysql 查询生成的表进行排序？

> ID：14894497
> 
> 赞同：0
> 
> 时间：2013-02-15T12:12:10.300
> 
> 标签：mysql, sorting, coldfusion

我有一个 HTML 表，它是从查找系统上所有用户的“用户”表的查询中生成的。

第二个查询使用“选择计数”来计算用户预订了多少次会议，方法是检查用户 ID 在会议表中出现的次数。

```
<cfquery datasource="iPad" name="Two">
 SELECT COUNT(userID) AS meetingsCount from meeting where userID = '#One.userID#'
 </cfquery> 
```

我希望能够通过单击页面上的链接根据 meetingCount 重新排序表格。问题是我不确定如何查询这些信息，因为它在技术上不存在于 MYSQL 的表中。

编辑; 使用左连接和验证的代码。

```
select user.userID, user.contactName, user.email, count(meeting.userID)
as meetingsCount 
 from user where user.userID = 30 
AND user.userID NOT IN ('1', '2', '3', '4', '58', '59', '62',
'63', '64', '66', '69', '71',    '72', '73', '78', '107')
AND SUBSTRING( meeting.meetingCode, 5, 2 ) 
BETWEEN 12 AND 22 
AND SUBSTRING( meeting.meetingCode, 7, 2 ) 
BETWEEN 1 AND 12 
AND SUBSTRING( meeting.meetingCode, 9, 2 ) 
BETWEEN 01 AND 31
left outer join meeting on user.userID = meeting.userID 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T12:17:39.367

您应该使用 group by 一个查询来执行此操作

**编辑：**我将您的 where 子句添加到我的答案中，但不是硬编码用户 ID 以排除您，您应该考虑将它们分配给一个角色，以便您可以在一个地方管理角色，而不是排除这些人的每个查询。`not in`如果您已经要求一个 ID，您也不需要。我知道你现在只是在解决问题，但请记住这一点。如果那仍然不起作用，我会检查您的子字符串逻辑。

```
<cfquery>
    select
          user.userID
        , firstName
        , lastName
        , count(*) as meetingCount
    from
        user
        left outer join meeting on users.userID = meeting.userID
          AND (    SUBSTRING( meeting.meetingCode, 5, 2 ) BETWEEN 12 AND 22 
               AND SUBSTRING( meeting.meetingCode, 7, 2 ) BETWEEN 1 AND 12 
               AND SUBSTRING( meeting.meetingCode, 9, 2 ) BETWEEN 1 AND 31)
      -- the ( ) above are optional but I like them to show groups of like filters
      -- if you don't want to use them feel free not to.
    where 
         user.userID NOT IN (1,2,3,4,5,59,62,63,64,66,69,71,72,73,78,107)     
    group by
          user.userID
        , firstName
        , lastName
    order by
        meetingCount
</cfquery> 
```

我认为 MySql 允许您按别名排序，我不记得了。如果没有，将顺序更改为`count(*)`

# html - 在不影响其余项目的情况下添加边框以锚定悬停状态

> ID：14894502
> 
> 赞同：1
> 
> 时间：2013-02-15T12:12:32.177
> 
> 标签：html, css

我想在导航中悬停项目的左侧和右侧添加边框。这可行，但是看到我向元素添加了 2px，它会将其他元素推出。如何将边框添加到几乎位于悬停列表项的内部而不影响导航的其余部分？

```
 // Simple example:
 li {
     list-style: none;
     display: inline;
 }

 li a:hover {
     border-left: 1px solid black;
     border-right: 1px solid black;
 }

 // HTML:
 <ul>
     <li><a href="">Test 1</a></li>
     <li><a href="">Test 2</a></li>
     <li><a href="">Test 2</a></li>
 </ul> 
```

或访问[jsfiddle 链接](http://jsfiddle.net/95ZUw/)以获取活动示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:15:29.223

`a`我会为您的标签添加透明边框：

```
li a {
    border: 1px transparent solid;
    border-width: 0 1px;
} 
```

[http://jsfiddle.net/dfsq/95ZUw/1/](http://jsfiddle.net/dfsq/95ZUw/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:18:03.537

不是最好的解决方案，但是...添加 1px 填充，然后在触发悬停时将其删除。在您的情况下可以这样做吗？

```
li {
list-style: none;
display: inline;
}

li > a { padding:0 1px; }

li a:hover {
border-left: 1px solid black;
border-right: 1px solid black;
padding:0;
} 
```

# c# - ForEach 修剪字符串数组中的字符串值

> ID：14894503
> 
> 赞同：13
> 
> 时间：2013-02-15T12:12:36.000
> 
> 标签：c#, asp.net, foreach

我只是想知道为什么这个 ForEach 不起作用并且在值后面留下空格。

```
string days = "Monday, Tuesday, Wednesday, Thursday, Friday";

string[] m_days = days.Split(',');

m_days.ToList().ForEach(d => { d = d.Trim(); } ); 
```

**我知道还有其他方法可以做到这一点，所以我不需要在那里回答。**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-15T12:15:48.747

因为您没有重新分配修剪后的字符串。

```
var list = m_days.Split(',').Select(s => s.Trim()).ToList(); 
```

> 为什么`ForEach`不起作用或我使用`ForEach`不正确？

`ForEach`不是 Linq，它是`List<T>`. 你在做什么基本上是这样的：

```
foreach(string day in m_days)
{
    day.Trim();  // you are throwing away the new string returned by String.Trim
} 
```

除了使用 LINQ，您还可以使用`for`-loop 代替：

```
for(int i = 0; i < m_days.Length; i++)
{
    m_days[i] = m_days[i].Trim();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T12:14:35.133

您需要将 ForEach 的输出分配给一个新变量，如下所示：

```
var trimmedResult = m_days.Select(d => d.Trim()).ToList(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T12:14:45.130

`string.Trim`返回一个新的字符串实例。所以你必须以某种方式*使用*那个新实例。
你没有在你的代码中这样做。
此外，这是不可能的`ForEach`。乍一看，以下方法可能有效：

```
m_days.ToList().ForEach(d => { d = d.Trim(); }); 
```

但这也对您没有帮助，因为`d`不是通过引用传递的，所以您只是更改已传递给您的委托的本地参数，而不是存储在列表中的实例。

你很可能想要这个：

```
var result = days.Split(',').Select(x => x.Trim()).ToList(); 
```

没有 LINQ 的另一种方法如下所示：

```
var split = days.Split(',');
for(int i = 0; i < split.Length; ++i)
    split[i] = split[i].Trim(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T12:14:37.483

因为`String.Trim()`不要修改原始字符串。当您调用时，`ForEach(d => d.Trim())`您会在内存中为列表的每个项目创建新的修剪字符串，但该字符串未分配到任何地方。这就是你在做什么：

```
foreach(string d in list)
{
    d.Trim();
} 
```

你需要的是

```
m_days = days.Split(',').Select(d => d.Trim()).ToArray(); 
```

# android - Java中字符串的SHA1解密

> ID：14894504
> 
> 赞同：-1
> 
> 时间：2013-02-15T12:12:46.983
> 
> 标签：android, encryption, cryptography, sha1

我从这里找到了这段代码[How to SHA1 hash a string in Android?](https://stackoverflow.com/questions/5980658/how-to-sha1-hash-a-string-in-android) 使用 SHA1 加密字符串，它工作得很好，

```
import java.io.UnsupportedEncodingException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class SHA1Encryption {

    public static String SHA1(String text) throws NoSuchAlgorithmException,
            UnsupportedEncodingException {
        MessageDigest md = MessageDigest.getInstance("SHA-1");
        md.update(text.getBytes("iso-8859-1"), 0, text.length());
        byte[] sha1hash = md.digest();
        return convertToHex(sha1hash);
    }

    private static String convertToHex(byte[] data) {
        StringBuilder buf = new StringBuilder();
        for (byte b : data) {
            int halfbyte = (b >>> 4) & 0x0F;
            int two_halfs = 0;
            do {
                buf.append((0 <= halfbyte) && (halfbyte <= 9) ? (char) ('0' + halfbyte)
                        : (char) ('a' + (halfbyte - 10)));
                halfbyte = b & 0x0F;
            } while (two_halfs++ < 1);
        }
        return buf.toString();
    }

} 
```

但我需要将其解密回原始字符串。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:21:53.697

您基本上要问的是：“给定一个值 y，找到一个 x，使得 h(x)=y。” 这称为寻找原像。单向散列函数（其中 SHA1 是一个例子）的全部意义在于，这不可能以任何比蛮力更快的方式（平均需要 O(2^159) 次行动） .

进一步阅读： http: [//en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function) [http://en.wikipedia.org/wiki/One-way_compression_function](http://en.wikipedia.org/wiki/One-way_compression_function)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:13:58.690

你不能这样做。SHA1 是一种单向散列算法。您无法取回原始内容。

如果您想要一种双向加密方案，请尝试使用 AES（或 RSA，但这可能是矫枉过正）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:45:50.660

您无法解密由安全**单向**哈希算法生成的值。散列不同于加密。

您可以做的是遍历所有可能的字符串值，为每个字符串值创建一个哈希值，然后比较这些哈希值。如果您找到哈希值，则可以*绝对确定*您找到了原始字符串。您发现两个字符串的哈希值非常接近于零的可能性，您可以放心地假设它永远不会发生在加密安全的哈希值中。

可能的字符串的数量显然是无穷无尽的，因此如果您对字符串有额外的了解，您只能遍历所有值。例如，如果您有一个 4 位 PIN 的哈希值，您可以使用该知识来计算多达 10.000 个可能的哈希值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:19:50.257

SHA1 是一个哈希函数，所以你不能解密，因为它没有解密。看一下密码散列函数的维基百科，它对什么散列函数和常见的密码[散列函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function#Concatenation_of_cryptographic_hash_functions)有一些一般性的描述。

# javascript - Sharepoint 2010 列表设置

> ID：14894507
> 
> 赞同：-1
> 
> 时间：2013-02-15T12:12:54.500
> 
> 标签：javascript, sharepoint, sharepoint-2010, sharepoint-list

我正在使用一个列表，我在其中创建了需要批准的列作为选择（下拉），值为是或否。我还有一个人员选择器列。目标是，如果选择了值 No，则必须禁用或隐藏人员选择器，并且当从选项中选择值 Yes（下拉）时，人员选择器必须可用。有任何想法吗？

谢谢，

普拉萨特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:12:07.847

您可以尝试在 Sharepoint Designer 中编辑列表的显示形式，并添加一个 jquery 脚本以附加到下拉更改事件以处理显示/隐藏逻辑。

# php - 如何将图形数据存储在 php 变量中？

> ID：14894508
> 
> 赞同：0
> 
> 时间：2013-02-15T12:12:56.410
> 
> 标签：php, facebook, facebook-graph-api, facebook-like

我正在尝试获取我网站上特定页面的点赞数并将其存储在一个数组中。卡在中间，我发现我可以通过以下代码获取喜欢的数量以及其他数据：

```
/*$site="http://graph.facebook.com/?ids=http%3a%2f%2xxxxxxxx.com/abc.php";
$graph= file_get_contents($site); 
```

输出如下：

```
{"http:\/\/xxxxxxxx.com\/abc.php":{"id":"http:\/\/xxxxxxxx.com\/abc.php","shares":75,"comments":3}} 
```

有没有办法我可以只存储喜欢的数量，即在这种情况下为 75 的 php 数组？

我试过**explode();** 但问题是我将使用的 url 的长度不会是恒定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:20:50.633

这是一个 json 字符串解码它，使用 json_decode 你将得到输出为数组。参考： http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

```
$array  = json_deocde($json_string, true);

echo "<pre>";
print_r($array); 
```

# moq - Moq 不在 NUnit 控制台上返回消息

> ID：14894514
> 
> 赞同：1
> 
> 时间：2013-02-15T12:13:12.337
> 
> 标签：moq

嗨，我正在尝试了解 moq 框架，但我似乎无法理解一个简单的概念。这是我正在测试的代码：

```
 public interface ILongRunningLibrary {
    string RunForALongTime(int interval);
}

public class LongRunningLibrary : ILongRunningLibrary {

    public string RunForALongTime(int interval) {
        var timeToWait = interval * 1000;
        Thread.Sleep(timeToWait);

        return string.Format("Waited {0} seconds ", interval);
    }
} 
```

这是我的测试：

```
private Mock<ILongRunningLibrary> _longRunningLibrary;

    [SetUp]
    public void SetupForTest() {
        _longRunningLibrary = new Mock<ILongRunningLibrary>();
    }

    [Test]
    public void TestLongRunningLibrary() {
        const int interval = 30;
        _longRunningLibrary.Setup(lrl => lrl.RunForALongTime(30))
                          .Returns("This method has been mocked!");
        var result = _longRunningLibrary.Object.RunForALongTime(interval);
        Debug.WriteLine("Return from method was '{0}'", result);
    } 
```

从我正在阅读的书中了解到，此方法应在 NUnit 控制台上返回“此方法已被模拟”。但在我的情况下，测试通过并且它什么也不返回。

即使我删除：

```
_longRunningLibrary.Setup(lrl => lrl.RunForALongTime(30))
                          .Returns("This method has been mocked!"); 
```

测试仍然通过，并且在控制台上没有打印任何内容。

为什么在 NUnit 控制台上没有返回“此方法已被模拟”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:35:13.450

你的第一个例子运行得很好。我认为您的测试运行程序无法调用 Debug.WriteLine。我用 Console.WriteLine 替换了它，我得到了正确的输出。

当您在第二个示例中删除 Setup 调用时，模拟将返回默认值（为 null），因为它使用松散行为。当您使用 null 参数调用 Debug.WriteLine 时，它​​不会引发异常，因此您的测试通过。

通常使用 StrictBehavior 是一种很好的做法。

```
_longRunningLibrary = new Mock<ILongRunningLibrary>(MockBehavior.Strict); 
```

现在它将引发异常，因为您没有任何 RunForALongTime 方法的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T13:53:19.243

好吧......我今天遇到了同样的问题，我相信我找到了真正的原因：

只需转到 NUnit 的 GUI，然后查看-> 结果选项卡-> 文本输出...

正如您所看到的，“跟踪输出”没有被默认检查，去检查它，Debug.WriteLine 按预期工作......

因此您可以检查它或使用 Console.WriteLine 并保持原样。

# javascript - setInterval 和 setTimeout 不匹配

> ID：14894515
> 
> 赞同：1
> 
> 时间：2013-02-15T12:13:13.100
> 
> 标签：javascript, timer, match, settimeout, setinterval

我只想知道为什么`setInterval()`而`setTimeout()`不是匹配时间结果？

**句法 ：**

```
setInterval(code,millisec,lang)
setTimeout(code,millisec,lang) 
```

并且都使用毫秒..

**为什么我总是随机`i`的？**

所以我的测试功能看起来像......

```
var i = 0;

$("button").click(function() {

  var run = setInterval(function(){
    i++; $("code").html(i);
  },0);

  setTimeout(function(){
    clearInterval(run);
    i = 0;
  },2000);

}); 
```

为什么结果不显示**2000**？还是我误解了什么？

如果分钟。值为**4ms**`setInterval()`为什么我没有得到相同的结果？

 ****游乐场：http:** [//jsbin.com/ezeliz/1/edit](http://jsbin.com/ezeliz/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:42:37.457

应该怎么`setInterval(…, 0)`做？零时间后不能重复该功能，总会有一点延迟。实际上，该延迟甚至被标准化为 4ms 的[最小值](https://stackoverflow.com/q/9647215/1048572)。例如 Opera 12 在 2 秒内计数（几乎）到 500，这将匹配，其他浏览器可能有更大的延迟（[他们可以自由选择一个](https://stackoverflow.com/a/13964806/1048572)）。**

# database - 仅当根据 Firebird/Interbase 中的检查约束有效时，如何在表之间复制记录？

> ID：14894516
> 
> 赞同：4
> 
> 时间：2013-02-15T12:13:15.353
> 
> 标签：database, firebird, interbase, check-constraints

我想将一堆记录从临时表复制到目标表。问题是某些记录可能违反目标表中的检查约束，因此我想插入所有可能的内容并在其他地方为无效记录生成错误日志。

如果我执行：

```
INSERT INTO target_table
  SELECT ... FROM temp_table 
```

如果任何记录违反任何约束，则不会插入任何内容。我可以做一个循环并手动插入，但我认为性能会更低。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T13:20:25.243

您可以编写一个存储过程来复制记录并使用`WHEN ANY DO`语句捕获任何错误，例如

```
CREATE PROCEDURE CopyRecords( ... )
AS
BEGIN
  FOR select ... FROM temp_table INTO ... DO BEGIN
     INSERT INTO target_table ...
     WHEN ANY DO BEGIN
        INSERT INTO ErrorLog(SQL_Code, GDS_Code, ... ) VALUES(SQLCODE, GDSCODE, ...);
     END
  END
END 
```

该`WHEN ... DO`声明记录在[InterBase 6.0 语言参考](http://www.firebirdsql.org/en/reference-manuals/)中（向下滚动页面，IB 6 文档下载位于底部），在“过程和触发器”一章下。

和上下文变量应该可以帮助您分析错误的确切原因[`GDSCODE`](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-gdscode.html)。[`SQLCODE`](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-sqlcode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:31:13.883

像这样：

```
INSERT INTO
    some_table1 (fld1, fld2, fld3)
SELECT
    some_table2.fld1,
    some_table2.fld2,
    some_table2.fld3
FROM
    some_table2
WHERE
    some_table2.fld > 100
LIMIT
    5; 
```

# javascript - 通过 getJSON 检查 jQuery tag-it 输入

> ID：14894522
> 
> 赞同：0
> 
> 时间：2013-02-15T12:13:31.197
> 
> 标签：javascript, jquery, json, tag-it

我正在寻找通过 getJSON 请求检查 tag-it ( [http://aehlke.github.com/tag-it](http://aehlke.github.com/tag-it) ) 中新添加的标签的方法，并允许使用（最终）编辑的 tagName 添加标签或禁止添加新标签。

例如：输入“audi s3”将触发 beforeTagAdded 事件，该事件应该执行 getJSON 请求，来自服务器的响应将包含“Audi S3”或“Audi S3, 2007”之类的内容。

# javascript - django-tinymce：控制台上的 javascript 错误，未呈现 tinymce 小部件

> ID：14894539
> 
> 赞同：1
> 
> 时间：2013-02-15T12:14:17.537
> 
> 标签：javascript, django, tinymce, django-cms, django-tinymce

我在 django 项目中使用 django-tinymce。[按照docs](http://django-tinymce.readthedocs.org/en/latest/)的建议进行设置后，我在部署它时遇到了一些问题。事实上，使用相同的设置，使用开发运行服务器，我让它在本地工作，但是在测试机器（NGinx + Gunicorn）上，我在控制台上有这个错误：

```
Uncaught TypeError: undefined is not a function tiny_mce.js:1
    k.create.init tiny_mce.js:1
    (anonymous function) tiny_mce.js:1
    (anonymous function) tiny_mce.js:1
    c.each tiny_mce.js:1
    o tiny_mce.js:1
    (anonymous function) tiny_mce.js:1
    p tiny_mce.js:1 
```

在最好的情况下，我只有一个基本的 textarea 小部件，在其他情况下，我根本没有渲染任何小部件。任何人都遇到过这个问题或任何帮助？

谢谢，卢克

# database-design - Visio - IDEF1X 数据建模 - 如何设置备用键

> ID：14894540
> 
> 赞同：0
> 
> 时间：2013-02-15T12:14:20.687
> 
> 标签：database-design, data-modeling, visio

任何人都可以帮我定义`Alternate Keys`in `Visio 2010`for`IDEF1X`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:23:44.687

我仍在使用 Visio 2007，希望 2010 年也不例外......

1.  左键单击实体，然后在屏幕底部选择*Indexes*。

2.  使用*New*按钮创建一个新索引，然后使用*Index type*组合框将其指定为“Unique with constraint on top”：

    ![在此处输入图像描述](../Images/f1c39574a418ef45a8df3130e8040bc0.png)

3.  备用键将在实体中由“Ux”表示：

    ![在此处输入图像描述](../Images/35d5be9dc83a17078ea22ff5ceae575c.png)

# ios - 如何调整输入附件视图的大小

> ID：14894542
> 
> 赞同：0
> 
> 时间：2013-02-15T12:14:25.270
> 
> 标签：ios, uisearchbar

使用带有图像按钮的显示隐藏 iphone 键盘，该按钮位于键盘顶部。

```
 [kbdImage setFrame:CGRectMake(290, 0, 30, 30)];                                                             
    [accessoryView setFrame:CGRectMake(290, 0, 320, 30)];

    UITapGestureRecognizer *gestureRecogniser = [[UITapGestureRecognizer alloc]    initWithTarget:self action:@selector(hideKeyBoard:)];
     gestureRecogniser.numberOfTapsRequired = 1;

     [accessoryView addSubview:kbdImage];
     [accessoryView addGestureRecognizer:gestureRecogniser];

     for (UIView* v in searchBar.subviews) {
        if ([v isKindOfClass:[UITextField class]]) {
           ((UITextField*)v).inputAccessoryView = accessoryView ;
        }
     } 
```

这适用于隐藏键盘。但输入视图中的剩余区域也是可触摸的。如何避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:17:59.760

发生这种情况是因为您正在向整体添加点击手势，`AccessoryView`因此整个视图将响应点击手势，而不是仅向该图像按钮添加点击手势。

```
 kbdImage.userInteractionEnabled = YES;
    [kbdImage addGestureRecognizer:gestureRecogniser]; 
```

# objective-c - NScheckboxcell 中心的复选框

> ID：14894543
> 
> 赞同：1
> 
> 时间：2013-02-15T12:14:25.423
> 
> 标签：objective-c, xcode, cocoa, checkbox, nstableview

我无法在复选框单元格中居中复选框。以编程方式和通过 IB 进行了尝试，但没有运气。

要重现添加 a`NSTableView`并在此添加 a `NSCheckboxCell`。将复选框的文本编辑为空文本。现在尝试使用单元格内的对齐按钮使框居中。它会留在最左边。

如何才能做到这一点？我需要以编程方式进行，所以如果答案是针对程序解决方案，那就更好了。如果它在 IB 中，那么无论如何我都可以，并且会自己找到程序版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:15:01.683

IB-Version 将“位置”设置为居中。将其更改为屏幕截图中的值。

![在此处输入图像描述](../Images/13600014fa081ecff7b9dd1d85c9a302.png)

我目前正在寻找非 IB 解决方案，但文档什么也没说...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T16:23:00.180

非 IB 答案是设置图像位置。

即 swift 将是“btnCheck.imagePosition = .ImageOnly”，而 ObjC 将是 [btnCell setImagePosition:NSImageOnly]

# date - 参数中的上个月

> ID：14894548
> 
> 赞同：3
> 
> 时间：2013-02-15T12:14:40.630
> 
> 标签：date, reporting-services, parameters

我需要在 SSRS 中设置一个隐藏的默认参数。

在我的查询中，我不需要*显示*上个月的总计，而是上个月，即在 2 月我需要显示 12 月的总计。

我通常在上个月使用它，但不能在前一个月调整它。

设置上个月的第一个日期：

```
=DateAdd("m", -1, DateSerial(Year(Now()), Month(Now()), 1)) 
```

设置上个月的最后日期：

```
=DateAdd("d", -1, DateSerial(Year(Now()), Month(Now()), 1)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:43:23.660

If i understand you right you want to:

Get the first day of two months from now

```
=DateAdd("m", -2, DateSerial(Year(Now()), Month(Now()), 1)) 
```

And you want to get the last day on month two months from now

```
=DateAdd("d" , -1 , DateAdd("m", -1, DateSerial(Year(Now()), Month(Now()), 1))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:43:16.753

Depending on exactly what you need, use something like:

```
DateAdd
(
    DateInterval.Month
    , -1
    , DateAdd(DateInterval.Day, -1, DateSerial(Year(Parameters!Date.Value), Month(Parameters!Date.Value), 1))
) 
```

Used in a report:

![enter image description here](../Images/3f34b3e3660b19110167cf70c8ea3034.png)

# jquery - 即使使用 e.preventDefault()，当我单击提交按钮时，$.post 也会将我带到表单操作路径

> ID：14894554
> 
> 赞同：0
> 
> 时间：2013-02-15T12:14:48.417
> 
> 标签：jquery, preventdefault, .post, form-submit, ajax-forms

每次点击任何一个提交按钮，post请求都会生效，form action中的php文件成功执行mysql查询，但是使用被带到一个空白页面，里面有form action php文件的地址，并且post请求的回调函数没有被调用。我首先`return false`在提交的回调函数末尾尝试了，然后`e.preventDefault()`，都没有帮助。

其他一些信息： dataType 设置为 json 因为如果不是，则`$.post`不会执行请求。这是我的代码：

```
$(document).ready(function(){

$("#maintenance_form").submit(function(e){
  $.post($("#maintenance_form").attr("action"), $("#maintenance_form").serialize(), dataType: "json", function(data){ alert("You have successfully submitted your change."); });
  e.preventDefault();
});
}); 
```

# c# - 当我关闭在 ASP.NET 中使用 GridView 的弹出窗口时更新我的 数据库

> ID：14894556
> 
> 赞同：0
> 
> 时间：2013-02-15T12:14:51.820
> 
> 标签：c#, javascript, asp.net, gridview

我是新手`ASP.NET`和`C#`。

我想根据在 GridView 中选择的行来更新我的数据库。

此 GridView 用于弹出窗口（另一个 ASPX 页面）。

我的弹出窗口背后的代码如下：

```
protected void gvDetails_RowDataBound(object sender, GridViewRowEventArgs e)
{
    string selectedID;
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        GridViewRow gvr = e.Row;
        selectedID = (gvDetails.DataKeys[e.Row.RowIndex].Value.ToString());
        Session["IDs"] = selectedID;
        conn.Open();
        System.Data.SqlClient.SqlCommand cmdUpdateSelectedRow = new System.Data.SqlClient.SqlCommand("Update myTable Set Selected = " + 1 +
                      " WHERE Id = " + Convert.ToInt32(Session["IDs"]) + "", conn);
        cmdUpdateSelectedRow.ExecuteNonQuery();
         conn.Close();
         gvr.Attributes.Add("OnClick", "javascript:window.close()");//i deleted the id= 
      }
 } 
```

但是，我的数据库永远不会更新。

方法中的代码`RowDataBound`是在用户选择一行之前还是之后运行？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:47:53.340

在 SelectedIndexChanged 事件中，获取当前选中的行：

```
GridViewRow row = gvDetails.SelectedRow; 
```

然后，更新您的数据库

```
System.Data.SqlClient.SqlCommand cmdUpdateSelectedRow = new System.Data.SqlClient.SqlCommand("Update myTable Set Selected = " + row.Cells[0].Text +
" WHERE Id = " + Convert.ToInt32(Session["IDs"]) + "", conn); 
```

从行的第一列获取数据的关键是：row.Cells[0].Text

# symfony - 并行使用 sfGuard 和 FOSUserBundle

> ID：14894559
> 
> 赞同：3
> 
> 时间：2013-02-15T12:14:58.793
> 
> 标签：symfony, symfony1, fosuserbundle, sfguard

我们的客户使用多个使用 Symfony 开发的应用程序。旧的使用 Symfony 1.3.x 和新的 Symfony 2.x。用户管理和安全性基于使用 Propel 的 sfGuard。客户端创建了自己的包，用于在 Symfony 2 中使用基于 sfGuard 的 ORM 对象处理安全性。现在客户端想要升级用户管理组件。当前的用户管理是通过 Symfony 1.x 的自动 CRUD-app-generation 进行的。

使用 FOSUserBundle 将用户管理升级到 Symfony 2 似乎是一个合理的解决方案，但是是否可以使用现有的 Symfony 1.x 应用程序和 sfGuard-plugin 处理 FOSUserBundle 的用户管理？

我对 Symfony 很陌生，所以我希望有明确的指导方针以一种或另一种方式解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:36:57.597

FOSUSerBundle 使用另一种密码存储方式。我确定使用 FOSUserBundle 无法检查使用 sfGuard 创建的密码。

也许您可以使用[https://github.com/FriendsOfSymfony/FOSAdvancedEncoderBundle](https://github.com/FriendsOfSymfony/FOSAdvancedEncoderBundle)更改 FOSUserBundle 的密码编码器。

# r - 如何处理 data.table 中的列表列

> ID：14894562
> 
> 赞同：3
> 
> 时间：2013-02-15T12:15:24.593
> 
> 标签：r, data.table

在合并数据的过程中，我经常以列表列结束（例如左表中的一行在右表中有多个匹配项）

让我们定义

```
DT = data.table(x=list(c(1,2),c(3,4,5)),y=list(c(T,T),c(T,F,T)),z=c(1,2),N=c(1L,2L))
#       x               y z N
#1:   1,2       TRUE,TRUE 1 1
#2: 3,4,5 TRUE,FALSE,TRUE 2 2 
```

1.  是否可以就地修改为`update` `x`aka `x[y]`？

我可以做到但不能更新（而且看起来很丑）：

```
DT1 = DT[,list(x=list(unlist(x)[unlist(y)])),by=N]
DT = cbind(DT[,x:=NULL],DT1[,list(x)])
                 y z N   x
1:       TRUE,TRUE 1 1 1,2
2: TRUE,FALSE,TRUE 2 2 3,5 
```

现在让我们假设我定义`mySet = c(1,5)`并想要检查列的值`x %in% mySet`

1.  我怎样才能做到这一点 ？

    ```
     y z N   x isInMySet
    1:       TRUE,TRUE 1 1 1,2 TRUE,FALSE
    2: TRUE,FALSE,TRUE 2 2 3,5 FASLE,TRUE 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:56:28.493

另一种方法：

```
DT
       x               y z N
1:   1,2       TRUE,TRUE 1 1
2: 3,4,5 TRUE,FALSE,TRUE 2 2

DT[,x2:=mapply(`[`,x,y,SIMPLIFY=FALSE)]
DT
       x               y z N  x2
1:   1,2       TRUE,TRUE 1 1 1,2
2: 3,4,5 TRUE,FALSE,TRUE 2 2 3,5

DT[,isInMySet:=lapply(x2,`%in%`,c(1,5))]
DT
       x               y z N  x2  isInMySet
1:   1,2       TRUE,TRUE 1 1 1,2 TRUE,FALSE
2: 3,4,5 TRUE,FALSE,TRUE 2 2 3,5 FALSE,TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:20:24.267

我为您之前的问题写了一个答案，以意识到您已删除该问题。这是您可以更新的方法（第一部分的答案）。

```
DT[, x := list(list(unlist(x)[unlist(y)])), by=N]

#      x               y z N
# 1: 1,2       TRUE,TRUE 1 1
# 2: 3,5 TRUE,FALSE,TRUE 2 2 
```

对于您的第二部分：

```
DT[, isInMySet := list(list(unlist(x) %in% mySet)), by=N]

#      x               y z N  isInMySet
# 1: 1,2       TRUE,TRUE 1 1 TRUE,FALSE
# 2: 3,5 TRUE,FALSE,TRUE 2 2 FALSE,TRUE 
```

（或替代）

```
DT[, isInMySet := lapply(x, function(x) x %in% mySet)] 
```

# jquery - 如何使用 MVC/jQuery 在下拉列表中显示图像

> ID：14894572
> 
> 赞同：-1
> 
> 时间：2013-02-15T12:15:59.900
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我需要在下拉列表中显示图像，其值在控制器中加载而不是从数据库中加载。我google了很多关于它，但通常它需要使用一些插件。是否有任何其他选项可以在没有任何插件的情况下实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:03:35.047

我知道您不想使用插件但是，请继续阅读！

有一个名为 Select2 的插件，它为 Bootstrap 类型的下拉列表提供了扩展功能。在 Select2[网页上](http://ivaynberg.github.com/select2/select2-latest.html#documentation)有一个使用 rotten-tomatoes api 加载电影的示例。条目包括标题、图像和概要。

如果您查看页面源代码，您可以看到他们是如何实现这一点的。

这段摘录是处理返回值的 javascript 函数，并在将它们传递到下拉列表之前将它们包装在 html 标记中。

```
function movieFormatResult(movie) {
    var markup = "<table class='movie-result'><tr>";
    if (movie.posters !== undefined && movie.posters.thumbnail !== undefined) {
        markup += "<td class='movie-image'><img src='" + movie.posters.thumbnail + "'/></td>";
    }
    markup += "<td class='movie-info'><div class='movie-title'>" + movie.title + "</div>";
    if (movie.critics_consensus !== undefined) {
        markup += "<div class='movie-synopsis'>" + movie.critics_consensus + "</div>";
    }
    else if (movie.synopsis !== undefined) {
        markup += "<div class='movie-synopsis'>" + movie.synopsis + "</div>";
    }
    markup += "</td></tr></table>"
    return markup;
} 
```

正如您所看到的，每个条目都在自己的表格中，并且由于它是 html，您可以轻松地插入图像。

有 jquery + ajax 可以调用控制器上的方法。该方法应返回`JsonResult`视图上的 jquery，然后在 Select2 示例中，两个 javascript 方法处理序列化的 json，为下拉列表处理做好准备。

# java - 算法改进：对字节数组中的设置位进行计数

> ID：14894576
> 
> 赞同：0
> 
> 时间：2013-02-15T12:16:15.503
> 
> 标签：java, bit-manipulation

我们将知识作为位存储在字节数组中。计算设置位的数量非常慢。欢迎任何改进算法的建议：

```
public static int countSetBits(byte[] array) {
    int setBits = 0;

    if (array != null) {
        for (int byteIndex = 0; byteIndex < array.length; byteIndex++) {
            for (int bitIndex = 0; bitIndex < 7; bitIndex++) {
                if (getBit(bitIndex, array[byteIndex])) {
                    setBits++;
                }
            }
        }
    }
    return setBits;
} 
```

```
public static boolean getBit(int index, final byte b) {
    byte t = setBit(index, (byte) 0);
    return (b & t) > 0;
} 
```

```
public static byte setBit(int index, final byte b) {
    return (byte) ((1 << index) | b);
} 
```

计算长度为 156'564 的字节数组的位数需要 300 毫秒，这太多了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:19:04.877

尝试`Integer.bitcount`获取每个字节中设置的位数。如果可以从`byte`数组切换到数组，效率会更高`int`。如果这不可能，您还可以为所有 256 个字节构建一个查找表，以快速查找计数，而不是遍历各个位。

如果它始终是您感兴趣的整个数组的计数，您可以将数组包装在一个类中，该类在数组更改时将计数存储在一个单独的整数中。（编辑：或者，确实，如评论中所述，使用`java.util.BitSet`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:22:39.913

我将使用相同的全局循环，但不是在每个字节内循环，而是简单地使用大小为 256 的（预先计算的）数组将字节映射到它们的位数。那可能会非常有效。

如果您需要更高的速度，那么您应该单独维护计数并在设置位时增加计数并减少计数（但这意味着这些操作的额外负担很大，所以我不确定它是否适用于您）。

另一种解决方案将基于[BitSet 实现](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/BitSet.java#BitSet)：它使用一个长数组（而不是字节），这是它的计数方式：

```
658        int sum = 0;
659        for (int i = 0; i < wordsInUse; i++)
660            sum += Long.bitCount(words[i]);
661        return sum; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:25:38.400

我会使用：

```
 byte[] yourByteArray = ...
    BitSet bitset = BitSet.valueOf(yourByteArray);  // java.util.BitSet
    int setBits = bitset.cardinality(); 
```

我不知道它是否更快，但我认为它会比你拥有的更快。让我知道？

你的方法看起来像

```
 public static int countSetBits(byte[] array) {
     return BitSet.valueOf(array).cardinality();
 } 
```

你说：

> 我们将知识作为位存储在字节数组中。

我建议使用 a `BitSet`。它为您提供了方便的方法，而且您似乎对位感兴趣，而不是字节，因此与`byte[]`. （在内部它使用 a `long[]`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-06T11:36:41.937

到目前为止，最快的方法是计算位集，在“并行”中，方法称为[汉明权重](http://en.wikipedia.org/wiki/Hamming_weight)`Integer.bitCount(int i)`，据我所知 是在实现的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-15T13:12:22.913

据我了解，

1 字节 = 8 位

因此，如果 Byte Array size = n ，那么总位数不是 = n*8 吗？

如果我的理解有误，请纠正我

谢谢维诺德

# mysql - Yii CDbCriteria

> ID：14894578
> 
> 赞同：0
> 
> 时间：2013-02-15T12:16:23.147
> 
> 标签：mysql, activerecord, yii

空心我对我的桌子有一种查询`select m.voterID, sum(jm.mark) from marks m left join marks jm on jm.id = m.id where jm.voterID in (1,2) group by m.voterID`

而且我不明白如何使用 CDbCriteria 来编写它。表结构是

```
 `id` int(11) NOT NULL AUTO_INCREMENT,
  `voterId` int(11) NOT NULL,
  `votedId` int(11) NOT NULL,
  `mark` int(11) NOT NULL,
  `creation_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:44:55.130

```
$criteria = new CDbCriteria();
$criteria->select = 'm.voterID, sum(jm.mark)';
$criteria->from = 'marks m';
$criteria->join = 'left join marks jm on jm.id = m.id';
$criteria->condition = 'jm.voterID in (1,2)';
$criteria->group = 'm.voterID'; 
```

# php - 使用 print_r( ) 不显示德语字符

> ID：14894582
> 
> 赞同：1
> 
> 时间：2013-02-15T12:17:05.577
> 
> 标签：php

使用时不显示德语字符`print_r( $data->sheets[0]['cells'] );` ，我使用了 UTF-8，但它不起作用。**例如：** “Stra�e，Wedemarkstra�e”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:38:10.823

根据您从哪里获得 $data，您可能必须设置另一个字符集。在您的数据库中，或者将 .php 脚本本身保存在 utf-8 中。这也必须与浏览器中的字符集一致。

如果这仍然不起作用，请查看`mb_convert_encoding` [此处](http://de2.php.net/manual/en/function.mb-convert-encoding.php)。

您可以做的另一件事是设置包含字符集的 HTTP 内容类型。

```
header('Content-Type: text/html; charset=utf-8') 
```

# php - 使用php将文件（不是新的）上传到谷歌驱动器

> ID：14894583
> 
> 赞同：0
> 
> 时间：2013-02-15T12:17:07.323
> 
> 标签：php, file-upload, google-drive-api

我正在学习如何通过 PHP 使用谷歌驱动器的 API，并使用以下代码向我的谷歌驱动器添加了一个新文件。例如，如果我想添加一个已经在我的桌面上的现有文件，我应该在这个脚本中更改什么？

```
<?php

// inclusione delle librerie del client
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

// istanza dell'oggetto di classe relativo al client
$drive = new Google_Client();

// credenziali per l'autenticazione
$drive->setClientId('id');
$drive->setClientSecret('secret');
$drive->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$drive->setScopes(array('https://www.googleapis.com/auth/drive'));

// istanza dell'oggetto di classe relativo al servizio
$gdrive = new Google_DriveService($drive);

// salvataggio del token in una variabile
$_GET['code']= 'code';

// memorizzazione del token in un file
file_put_contents('token.json', $drive->authenticate());

// lettura delle informazioni contenute nel file
$drive->setAccessToken(file_get_contents('token.json'));

// istanza dell'oggetto di classe relativo al file per i test
$doc = new Google_DriveFile();

// intestazioni per il file di test
$doc->setTitle('Test Progetto Drive');
$doc->setDescription('Documento di prova');
$doc->setMimeType('text/plain');

// lettura del contenuto del file e restituzione sotto forma di stringa
$content = file_get_contents('progettodrive.txt');

// generazione del file per il test
$output = $gdrive->files->insert($doc, array(
'data' => $content,
'mimeType' => 'text/plain',
));

// stampa del risultato
print_r($output);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:08:47.163

```
 $files= array();
$dir = dir('files');
while ($file = $dir->read()) {
    if ($file != '.' && $file != '..') {
        $files[] = $file;
    }
}
$dir->close();
if (!empty($_POST)) {
    $client->setAccessToken($_SESSION['accessToken']);
    $service = new Google_DriveService($client);
    $finfo = finfo_open(FILEINFO_MIME_TYPE);
    $file = new Google_DriveFile();
    foreach ($files as $file_name) {
        $file_path = 'files/'.$file_name;
        $mime_type = finfo_file($finfo, $file_path);
        $file->setTitle($file_name);
        $file->setDescription('This is a '.$mime_type.' document');
        $file->setMimeType($mime_type);
        $service->files->insert(
            $file,
            array(
                'data' => file_get_contents($file_path),
                'mimeType' => $mime_type
            )
        );
    }
    finfo_close($finfo);
    header('location:'.$url);exit;
}
include 'index.phtml'; 
```

# python - 在使用 python 在 Debian Linux 上打开串行端口时替代 PySerial

> ID：14894584
> 
> 赞同：3
> 
> 时间：2013-02-15T12:17:08.727
> 
> 标签：python, serial-port, debian, pyserial

我在使用 PySerial 时遇到问题。我正在进入`OSError: [Errno 11] Resource temporarily unavailable`PySerial 的`serialposix.py`. 我想知道是否有任何替代方法可以从串行端口读取 python 中的数据，以帮助确定它是否是操作系统中某些东西的 python 问题。我正在运行 Debian 6。

# asp.net - 为什么 GridView 中的 DataBind() 会中断 UpdateCommand？

> ID：14894585
> 
> 赞同：1
> 
> 时间：2013-02-15T12:17:13.977
> 
> 标签：asp.net, .net, vb.net

我有`DataGridView`一页。配置`DataSource`（使用 sql 或 Access）时，更新工作完美。但是，如果我放置一个`Combo`过滤器数据，`Page_Load`我会修改`SelectCommand`并`DataBind()`更新`GridView`. 这是正确的。点击编辑修改某个字段，当点击更新时，不修改表中的数据。

* * *

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load<br>
    If RadioButtonList1.SelectedValue = "Todos" Then
        AccessDataSource1.SelectCommand = "SELECT `revisado`, `aprobado`, `Id`, `fecha`, `hora`, `empresa`, `tipo`, `legajo`, `desde`, `hasta`, `pasajero1`, `pasajero2`, `pasajero3`, `ccosto1`, `ccosto2`, `ccosto3`, `valor`, `indiv1`, `indiv2`, `indiv3`, `peaje`, `regreso`, `espera`, `czona`, `recorrido`,  `total`, `obs`, `comprobante`,  `exportado` FROM `viajes` WHERE `exportado`=False"
        DropDownList1.Visible = False
        DropDownList2.Visible = False
        Label1.Visible = False
    ElseIf RadioButtonList1.SelectedValue = "Choferes" Then<br>
        DropDownList1.Visible = True<br>
        DropDownList2.Visible = False<br>
        Label1.Visible = True<br>
        Label1.Text = "Seleccione un Chofer"<br>
        If DropDownList1.SelectedValue = Nothing Then<br>
            AccessDataSource1.SelectCommand = "SELECT `revisado`, `aprobado`, `Id`, `fecha`, `hora`, `empresa`, `tipo`, `legajo`, `desde`, `hasta`, `pasajero1`, `pasajero2`, `pasajero3`, `ccosto1`, `ccosto2`, `ccosto3`, `valor`, `indiv1`, `indiv2`, `indiv3`, `peaje`, `regreso`, `espera`, `czona`, `recorrido`,  `total`, `obs`, `comprobante`,  `exportado` FROM `viajes` WHERE `exportado`=False"<br>
        Else<br>
            AccessDataSource1.SelectCommand = "SELECT `revisado`, `aprobado`, `Id`, `fecha`, `hora`, `empresa`, `tipo`, `legajo`, `desde`, `hasta`, `pasajero1`, `pasajero2`, `pasajero3`, `ccosto1`, `ccosto2`, `ccosto3`, `valor`, `indiv1`, `indiv2`, `indiv3`, `peaje`, `regreso`, `espera`,  `czona`, `recorrido`, `total`, `obs`, `comprobante`,  `exportado` FROM `viajes` WHERE `exportado`=False AND `legajo`=" & DropDownList1.SelectedValue<br>
        End If<br>
    ElseIf RadioButtonList1.SelectedValue = "Empresas" Then<br>
        DropDownList1.Visible = False<br>
        DropDownList2.Visible = True<br>
        Label1.Visible = True<br>
        Label1.Text = "Seleccione una Empresa"<br>
        If DropDownList2.SelectedValue = Nothing Then<br>
            AccessDataSource1.SelectCommand = "SELECT `revisado`, `aprobado`, `Id`, `fecha`, `hora`, `empresa`, `tipo`, `legajo`, `desde`, `hasta`, `pasajero1`, `pasajero2`, `pasajero3`, `ccosto1`, `ccosto2`, `ccosto3`, `valor`, `indiv1`, `indiv2`, `indiv3`, `peaje`, `regreso`, `espera`, `czona`, `recorrido`,  `total`, `obs`, `comprobante`,  `exportado` FROM `viajes` WHERE `exportado`=False"<br>
        Else<br>
            AccessDataSource1.SelectCommand = "SELECT `revisado`, `aprobado`, `Id`, `fecha`, `hora`, `empresa`, `tipo`, `legajo`, `desde`, `hasta`, `pasajero1`, `pasajero2`, `pasajero3`, `ccosto1`, `ccosto2`, `ccosto3`, `valor`, `indiv1`, `indiv2`, `indiv3`, `peaje`, `regreso`, `espera`,  `czona`, `recorrido`, `total`, `obs`, `comprobante`,  `exportado` FROM `viajes` WHERE `exportado`=False AND `empresa`=" & DropDownList2.SelectedValue<br>
        End If<br>
    End If<br>
    'AccessDataSource1.UpdateCommand = "UPDATE `viajes` SET `revisado` = ?, `aprobado` = ?,`fecha` = ?, `hora` = ?, `empresa` = ?, `tipo` = ?, `legajo` = ?, `desde` = ?, `hasta` = ?, `pasajero1` = ?, `pasajero2` = ?, `pasajero3` = ?, `ccosto1` = ?, `ccosto2` = ?, `ccosto3` = ?, `valor` = ?, `indiv1` = ?, `indiv2` = ?, `indiv3` = ?, `peaje` = ?, `regreso` = ?, `espera` = ?, `czona` = ?,`recorrido` = ?,`total` = ?, `obs` = ?, `comprobante` = ?, `exportado` = ? WHERE `Id` = ?"<br>
    GridView1.DataBind()<br>

End Sub 
```

# wso2esb - 如果删除过滤器，为什么会在 WSO2 ESB 中出现传输错误？

> ID：14894595
> 
> 赞同：1
> 
> 时间：2013-02-15T12:17:40.620
> 
> 标签：wso2esb

我有以下代理：

```
<proxy name="expedientes" transports="https http" startOnLoad="true" trace="enable" statistics="enable">
    <target inSequence="main" outSequence="main" faultSequence="main">
        <endpoint>
            <address uri="https://someweb/somepath/"/>
            <property name="Authorization" expression="fn:concat('Basic ', base64Encode('user:password'))" scope="transport"/>
        </endpoint>
    </target>
</proxy> 
```

使用这个默认的主序列：

```
<sequence name="main">
    <in>
        <log level="full"/>
        <filter source="get-property('To')" regex="http://localhost:9000.*">
            <send/>
        </filter>
    </in>
    <out>
        <send/>
    </out>
</sequence> 
```

当我删除过滤器并将其保留为：

```
<sequence name="main">
    <in>
        <log level="full"/>
        <send/>
    </in>
    <out>
        <send/>
    </out>
</sequence> 
```

我收到以下错误“发送消息时出现意外错误：org.apache.axis2.AxisFault：系统无法从 /services/expedientes/indice.xml 推断传输信息”：

```
TID: [] [WSO2 ESB] [2013-02-15 12:42:05,531] ERROR
{org.apache.synapse.core.axis2.Axis2Sender} - Unexpected error during sending message out 
{org.apache.synapse.core.axis2.Axis2Sender}org.apache.axis2.AxisFault: The system cannot infer the transport information from the /services/expedientes/indice.xml URL. at
... 
```

out 消息应该（显然）使用相同的传输来回答请求（HTTP GET）。但这与“过滤器”有什么关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:18:04.867

基本上在上面的配置部分（带有过滤器中介的部分）它检查消息天气的“TO”标头属性是否等于 `"http://localhost:9000.*"`或不。如果触发了该条件，它只会将您的消息发送到目的地。否则消息在“out”中介内发送。

当您删除所发生的表达式时，它会尝试发送所有进入“in”调解器的消息，而不知道天气是否存在“To”属性。在您的情况下，传入的消息不包含有效的“收件人”属性。

主序列内发送消息的默认中介是“out”中介。“in”中介者不知道该消息应该作为响应发送，否则您没有明确说它是一条共振消息。您可以使用这样的配置来做到这一点

```
<header action="remove" name="To"/>
    <property action="set" name="RESPONSE" scope="default" type="STRING" value="true"/> 
```

**但这在很大程度上取决于您的用例**

我建议您阅读一些有关**使用 WSO2 ESB 进行消息中介的**参考资料。

以下是我发现的很好的参考资料，希望您能找到更多

*   [配置 ESB 以执行消息中介](http://wso2.org/project/esb/java/4.0.3/docs/quickstart_guide.html)
*   [消息中介](http://docs.wso2.org/wiki/display/ESB403/Message+Mediation)

谢谢，

# sql - 如何在oracle中将字符串插入给定的字符串？

> ID：14894596
> 
> 赞同：0
> 
> 时间：2013-02-15T12:17:44.287
> 
> 标签：sql, oracle, oracle11g

我有一个字符串，`test1string`我需要在每个数字之前填充三个零。结果字符串应该是`test0001string`。我尝试过 PAD，regexp_instr，但我没有得到正确的结果。谁能解释一下
提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:29:00.310

您可以使用[`REGEXP_REPLACE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions149.htm#SQLRF06302)：

```
SQL> SELECT regexp_replace('test1string', '([[:digit:]])', '000\1') tx FROM dual;

TX
--------------
test0001string 
```

# assembly - 逻辑运算实现

> ID：14894600
> 
> 赞同：-1
> 
> 时间：2013-02-15T12:17:50.120
> 
> 标签：assembly, binary

我有这个二进制数
这是 32 位二进制数 0000 0000 0000 0000 0000 0000 xxxx yyyy
每 0000 我们称之为“半字节”。
因此我有这些词：
1 2 3 4 5 6 7 8
现在
我想检查第 6 个词的最后一位是 1 还是 0

0000 0000 0000 0000 0000 0001 xxxx yyyy 或
0000 0000 0000 0000 0000 0000 xxxx yyyy

如果我有 1 我想从给定的 32 位二进制数中获得这个数字
1111 1111 1111 1111 1111 1111 1111 1111
否则我想获得这个数字
0000 0000 0000 0000 0000 0000 0000 0000
怎么做？？？提前非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:15:08.057

例如，`-(x >> 8)` 首先将位向下移动到 LSB（如果它们可能非零，则屏蔽其余的位）。你现在有`1`或`0`。知道`-1`2 的补码是所有`1`位，您只需对值取反（注意这不是按位取反）。

# sharedpreferences - SharedPreferences 在 android 4.2 Jellybean 中不起作用

> ID：14894601
> 
> 赞同：1
> 
> 时间：2013-02-15T12:17:53.893
> 
> 标签：sharedpreferences

我正在使用适用于 android 2.2 和 android 4.1.1 的 sharedpreferences。但是，共享偏好在 android 4.2 中停止工作。我只使用 android.content.SharedPreferences 而不是preferenceactivity 或preferencefragment。

谁能解释为什么它不起作用以及此问题的任何替代解决方案？

# bash - shell脚本每天创建带有时间戳的文件夹并推送时间戳生成的日志

> ID：14894605
> 
> 赞同：8
> 
> 时间：2013-02-15T12:18:02.627
> 
> 标签：bash, shell, unix, cron, aix

我有一个 cron 作业，它每 30 分钟运行一次，以生成带有时间戳的日志文件，如下所示：

```
test20130215100531.log, 
test20130215102031.log 
```

我想每天创建一个带有日期时间戳的文件夹，并在生成时将日志文件推送到相应的日期文件夹中。

我需要在 AIX 服务器上使用 bash 来实现这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-15T14:09:34.130

也许您正在寻找这样的脚本：

```
#!/bin/bash

shopt -s nullglob  # This line is so that it does not complain when no logfiles are found
for filename in test*.log; do # Files considered are the ones starting with test and ending in .log
    foldername=$(echo "$filename" | awk '{print (substr($0, 5, 8));}'); # The foldername is characters 5 to 13 from the filename (if they exist)
    mkdir -p "$foldername"  # -p so that we don't get "folder exists" warning
    mv "$filename" "$foldername"
    echo "$filename $foldername" ;
done 
```

我只用你的样本进行了测试，所以在使用包含重要内容的目录之前进行适当的测试。

*根据评论进行编辑：*

将您的原始脚本更改为：

```
foldername=$(date +%Y%m%d)
mkdir -p  /home/app/logs/"$foldername"
sh sample.sh > /home/app/logs/"$foldername"/test$(date +%Y%m%d%H%M%S).log 
```

或者，如果目录是在其他地方创建的，只需执行以下操作：

```
sh sample.sh > /home/app/logs/$(date +%Y%m%d)/test$(date +%Y%m%d%H%M%S).log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:57:45.070

你应该使用 logrotate！它已经可以为您执行此操作，您只需写入同一个日志文件即可。

检查他们的手册页以获取信息： http: [//linuxcommand.org/man_pages/logrotate8.html](http://linuxcommand.org/man_pages/logrotate8.html)

# python - 如何在 python 中使用 mysql 代理

> ID：14894610
> 
> 赞同：2
> 
> 时间：2013-02-15T12:18:26.060
> 
> 标签：python, mysql, mysql-proxy

如何在 python 中编写脚本以使用 MySQL 代理跟踪查询。我试图获取有关此的信息，但找不到任何有关 python 的信息，请帮助我在 python 中编写脚本以使用 mysql 代理进行查询。我想澄清一下mysql代理的工作和使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-21T14:07:17.040

有[mysql-proxy-python](https://code.google.com/p/mysql-proxy-python/)。它不能针对我的 Ubuntu 提供的 mysql-proxy 版本进行编译。

像这样配置 mysql-proxy-python 之后`./configure --prefix=/var/tmp/mysqlproxy --with-python=python2.7 --with-gnu-ld --with-mysql-proxy-src=/var/tmp/mysql-proxy-0.8.5/`，我需要在 config.h 中至少更改一下：

```
/* make sure the off_t is 32bit */
#ifndef _FILE_OFFSET_BITS
#define _FILE_OFFSET_BITS 32
#endif

#define HAVE_ULONG 
```

然后我就可以跑了`env PYTHONPATH=/var/tmp/mysql-proxy-python/lib/ mysql-proxy --plugin-dir=/var/tmp/mysqlproxy/lib/mysql-proxy/plugins --plugins=pyproxy --pyproxy-backend-addresses=127.0.1:3306 --pyproxy-python-script=/var/tmp/mysql-proxy-python/examples/rewrite.py`。

之后`make`，`make install`我可以像这样连接到代理`mysql --host=127.1 --user=root --password=root --port 2046 mysql`。请注意我通过`netstat -tulpen`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T14:10:03.117

> 如何在 python 中编写脚本以使用 MySQL 代理跟踪查询。

[您可以从https://gist.github.com/simonw/1039751](https://gist.github.com/simonw/1039751)下载脚本，并将其保存到文件 monitor.lua 然后运行代理：

```
mysql-proxy --proxy-lua-script=monitor.lua 
```

然后您可以编写 python 脚本并分析文件中的所有代理查询。
默认情况下，[脚本](https://gist.github.com/simonw/1039751)输出将刷新到 mysql.log 中，或者您可以直接在 LUA 脚本 (monitor.lua) 中更改它。

Mysql-proxy 只支持 LUA 脚本来构建插件，所以如果你想影响一些特定的查询，你需要了解 lua，或者找到最适合你确切情况的脚本。

# jquery - jquery 无法将表单标签识别为表单，无法序列化

> ID：14894611
> 
> 赞同：0
> 
> 时间：2013-02-15T12:18:29.860
> 
> 标签：jquery, forms

我将一些表单附加到一个 div 容器，表单非常依赖于所选的选项，所以我没有任何相关的 id，因为可以不止一个，

所以我所做的只是

```
$('.item').each(function(index,element){

    var form= $(element).find('form');
    var formFields = form.serialize();

    console.debug("FORM: "+ formFields);

    //--- do something with those fields
}); 
```

但是总是空的，所以我尝试改变这一行

```
var formFields = getFormData(form); 
```

并添加了这个功能

```
function getFormData($form){
    var indexed_array = {};

    var selectors = "input,select";

    $form.find(selectors).each(function(i,e){

        var type    = $(e).attr('type');
        var name    = $(e).attr('name');
        indexed_array[name] = value;

    });

    $form.find('textarea').each(function(i,e){
        var name  = $(e).attr('name');
        var value = $(e).html();
        indexed_array[name] = value;
    });

    return indexed_array;
} 
```

它有效，但问题是复选框或单选按钮未选中

所以我尝试更改此选项的选择器

```
var selectors = ":input"; //didnt work
var selectors = "input[type=text],input:checked,select"; //didnt work
var selectors = "input[type=text],input[type=checkbox]:checked,input[type=radio]:checked,select"; //didnt work 
```

那些选择器尝试，并没有检索我任何东西，就像 jquery 没有将表单重新转换为表单，并且即使选择了输入，检查与否也没有检测到，有什么建议吗？

HTML ，记住可以不止一个

```
<div class="column-2 item">
    <div class="widget-item">
        <span>12 Months Traffic Trend Unique Visits </span>
        <div class="widget-option">        
            <form>    
            <div class="form-item">   
                <div class="form-label">Compare With Last Year</div>
                <div class="form-element"><input type="checkbox" value="1" name="compareLastYear"></div>
             </div>
            </form>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:32:54.397

> 所以我没有任何相关的id，因为可以不止一个，

然后使用一个类来允许多个实例：

```
<form class='formClass'> 
```

然后你可以做

```
$('.formClass').each(function(k,v){

    var form = v; // this is the form
    var fields = $(v).serialize();
}); 
```

看这个[小提琴](http://jsfiddle.net/VV6Dm/)

# android - 清除通知

> ID：14894623
> 
> 赞同：1
> 
> 时间：2013-02-15T12:19:41.850
> 
> 标签：android, notifications

我正在制作一个聊天应用程序，当用户退出应用程序时我有要求，那么我的应用程序的所有通知都应该从通知栏中删除。

可能吗？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:21:44.313

我相信这会成功：

[http://developer.android.com/reference/android/app/NotificationManager.html#cancelAll()](http://developer.android.com/reference/android/app/NotificationManager.html#cancelAll())

或者您也可以通过 ID 取消它们：

[http://developer.android.com/reference/android/app/NotificationManager.html#cancel(int)](http://developer.android.com/reference/android/app/NotificationManager.html#cancel(int))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:22:22.520

是的，使用 NotificationManager.cancelAll()

[http://developer.android.com/reference/android/app/NotificationManager.html#cancelAll()](http://developer.android.com/reference/android/app/NotificationManager.html#cancelAll())

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:27:37.650

是的，看这里：

[从状态栏中删除通知图标](https://stackoverflow.com/questions/2839727/remove-the-notification-icon-from-the-status-bar)

您只需要提供您的通知ID；仅删除您的应用程序的通知。

当用户注销或活动进入 onPause() 或 onStop() （取决于您的需要）时，您使用：

```
public void cancel (String tag, int id) 
```

**取消先前显示的通知。如果它是瞬态的，则视图将被隐藏。如果它是持久的，它将从状态栏中删除。**

# php - 在 PHP 中使用 IMAP 获取唯一的电子邮件 ID

> ID：14894624
> 
> 赞同：9
> 
> 时间：2013-02-15T12:19:48.973
> 
> 标签：php, imap

如何计算 IMAP 帐户中每封电子邮件的唯一 ID 字符串？

我正在制作一个脚本，它必须经常将所有丢失的邮件从一个 IMAP 帐户复制到另一个帐户。我想避免在每次更新时重复，所以我必须确定一个帐户上的内容和另一个帐户上的内容。

并非所有电子邮件都有一个`message_id`，我看不出和之间`message_id`有什么区别`uid`- 有人可以告诉我吗？

在我看来，`message_id`使用[imap_append](http://www.php.net/manual/en/function.imap-append.php)时没有改变- 有人可以确认吗？

为每封电子邮件生成唯一的 id 字符串时，除了消息 id、fx 电子邮件标题和日期之外，还有许多其他选项，但我不知道该选择什么： [http ://www.php.net/manual/en/ function.imap-headerinfo.php](http://www.php.net/manual/en/function.imap-headerinfo.php)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-14T16:09:31.837

UID is unique within a mailbox, but does not map between mailboxes, so is of no use for matching emails between mailboxes.

message_id is intended to be globally unique for all emails and is generated by the sending email server. If the server is configured correctly, every message it sends will have a message_id, and this can be used to match an email across mailboxes. However, badly configured servers may not assign a message_id. In this case, a hash of senderaddress & udate has always proved to be unique for me - if the emails came from the same person at the same microsecond, it's gonna be the same message. Note - use sender rather than from - from can be spoofed easier than sender.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T13:03:22.097

根据我的说法，可以按如下方式生成唯一 ID：

> 键：邮件的纪元时间（来自日期字段）

但同时用户可以收到多封邮件。

> key：邮件的纪元时间 + MailSize

在特定时间，收件人 ID 可以接收相同大小的不同邮件

> KEY：邮件纪元时间 + MailSize + Recieveing Server IP（可以从received: 字段中获取）

在特定时间，收件人 ID 也可以从同一 IP 接收相同大小的不同邮件。

> key：邮件的epoch时间+MailSize+Recieveing Server IP（可以从received:字段中获取）+邮件的md5sum。

此密钥重复的可能性非常非常低。

消息 ID 通常是发送消息的设备的标识符，或者可能是其他东西，完全取决于域，并且对于不同的邮件可以相同，并且可能完全不存在。

uid 是 imap 服务器用来跟踪邮件身份的东西。但是，如果在邮件已被删除或移动并且由于服务器代码有问题，则可能会为不同的邮件分配相同的 uid。

# java - 我无法使用带有 Java 的 WebDriver 从 Web 表的特定行中获取特定文本

> ID：14894628
> 
> 赞同：1
> 
> 时间：2013-02-15T12:20:09.493
> 
> 标签：java, xpath, selenium-webdriver, html-table

我无法从网络表格中获取文本。请参阅下面的屏幕截图，了解我要查找的文本。如何从下面的屏幕截图中获取文本快速应用程序。

![我的应用程序的屏幕。](../Images/094c8e8675b1787e0ae6bfc53b23b8eb.png)

在屏幕截图中，如果我找到了快速应用程序，那么我必须单击该用户的编辑链接。下表的 xpath 计数代码：

```
//table[@id='ctl00_MasterPlaceHolder_GvUsers']/tbody/tr 
```

我尝试使用以下代码捕获文本：

```
text = driver.findElement(By.xpath("//table[@id='ctl00_MasterPlaceHolder_GvUsers'] 
/tbody/tr["+k+"]/td[3]")).getText();
System.out.println(text); 
```

执行上述代码后，我得到 Null 值。请通过提供代码来帮助我解决这个问题。帮助将不胜感激。

```
<table id="ctl00_MasterPlaceHolder_GvUsers" class="btext" cellspacing="0" cellpadding="2" border="0" style="color:#333333;width:100%;border-collapse:collapse;"> <tbody> <tr align="left" style="color:White;background-color:#507CD1;font-weight:bold;"> <tr class="text" style="color: rgb(28, 28, 28); background-color: rgb(249, 182, 115); font-weight: normal; height: 10px; text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GvUsers','Select$0')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: White; height: 10px; text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GvUsers','Select$1')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);"> <tr style="background-color: rgb(239, 243, 251); height: 10px; text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GvUsers','Select$2')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: White; height: 10px; text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GvUsers','Select$3')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);"> <tr style="background-color: rgb(226, 222, 208); height: 10px; text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GvUsers','Select$4')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);"
<tr style="background-color: White; height: 10px; text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GvUsers','Select$5')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);"> <td>7CUser44</td> <td>Swamy m Kumara</td> <td>Quick App</td> <td>QuickApp User</td> <td>Active</td> <td>halcyon2</td> <td>COTTAGE GROVE </td> <td>WI</td> <td> </tr>

   int xpathcount= driver.findElements(By.xpath((OR.getProperty("xpathcount_Users_ID")))).size();
        System.out.println("Number of rows displayed in Site History table: " +xpathcount);
        int k;
        for (k=1;k<=xpathcount;k++)
        {
            Select table = new Select(driver.findElement(By.xpath("//table[@id='ctl00_MasterPlaceHolder_GvUsers']/tbody/tr["+k+"]/td[3]")));
            text1 = table.getFirstSelectedOption().getText();
            System.out.println("Selected User Level is: "+text1);
            Thread.sleep(2000);
            text = driver.findElement(By.xpath("//table[@id='ctl00_MasterPlaceHolder_GvUsers']/tbody/tr["+k+"]/td[3]")).getText();
            System.out.println(text);
        } 
```

请找到我使用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:22:36.733

在这里，我修改了我的代码如下并工作。感谢所有试图帮助我的成员。

```
int xpathcount=     
driver.findElements(By.xpath((OR.getProperty("xpathcount_Users_ID")))).size();
System.out.println("Number of rows displayed in Site History table: " +xpathcount);
int k;
for (k=2;k<=xpathcount;k++)
{
text = driver.findElement(By.xpath("//table[@id='ctl00_MasterPlaceHolder_GvUsers']
   /tbody/tr["+k+"]/td[3]")).getText();
System.out.println(text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:06:32.420

在这里，我可以给出使用 python webdriver 的简单示例。但我不知道如何使用 java 获取文本。见下面的例子

```
word=driver_find_element_by_xpath("xpath value which text you need from web table")
print word.text 
```

答案将显示您在网络表格中选择的内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T15:09:14.827

没有 HTML 很难给出正确的答案，但这里有一些可能会有所帮助的东西。

```
public void getEditTable(final WebDriver driver, final By table, final String query) {
    List<WebElement> lines = table.findElements(By.tagName("tr"));

    for (WebElement line : lines) {
        List<WebElement> cols = line.findElements(By.tagName("td"));

        if (cols.get(2).getText().equals(query)) {
            List<WebElement> actions = cols.get(8).findElement(By.tagName("a"));
            actions.get(0).click();
        }

    }

} 
```

现在我必须指出，这很可能需要您做很多工作，但也许您可以了解主要思想。我为我的公司 CRUD 网站做一些类似于 web 表格的事情。

# android - 如何使用 mvvmcross vnext 在视图中显示用相机拍摄的照片？

> ID：14894634
> 
> 赞同：0
> 
> 时间：2013-02-15T12:20:29.723
> 
> 标签：android, camera, imageview, xamarin.android, mvvmcross

我能够访问相机并拍照（使用PictureChooser插件），它将图片存储在android的图片库中，我只想将其显示在屏幕上并删除它（我不需要存储图片）我怎样才能做到这一点 ？（欢迎使用几行代码:)）谢谢！

ps：也许用 mvvmcross 的 File 插件？

编辑：感谢您的回答，我认为对我来说最好的方法是进行自定义绑定以将字节 [] 绑定到普通的 ImageView，我看到了自定义绑定的示例（文本视图和按钮），我尝试制作我的。

```
namespace Testa.Droid.Bindings
{
    class PictureBinding : MvxBaseAndroidTargetBinding
    {
        private readonly ImageView _imageView;

        public PictureBinding(ImageView imageView)
        {
            _imageView = imageView;
        }

        public override MvxBindingMode DefaultMode
        {
            get { return MvxBindingMode.OneWay; }
        }

        public override Type TargetType
        {
            get { return typeof (byte[]); }
        }

        public override void SetValue(object value)
        {
            var memoryStream = new MemoryStream((byte[])valyue);
            Bitmap bitmap = BitmapFactory.DecodeStream(memoryStream);
            _imageView.SetImageBitmap(bitmap);
        }
    }
} 
```

在 Setup.cs 中

```
protected override void FillTargetFactories(Cirrious.MvvmCross.Binding.Interfaces.Bindings.Target.Construction.IMvxTargetBindingFactoryRegistry registry)
    {
        base.FillTargetFactories(registry);

        registry.RegisterFactory(new MvxCustomBindingFactory<ImageView>("Picture", (imageView) => new PictureBinding(imageView)));
    } 
```

在我的 ViewModel 中，我有：

```
 public byte[] ImageData {
    get { return _imageData; }
    set { _imageData = value; RaisePropertyChanged(() => ImageData); }
 } 
```

现在在我看来我不知道如何使用这个自定义绑定

```
<ImageView
  android:id="@+id/image"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content" 
  local:MvxBind="Picture ??, Mode=TwoWay" /> 
```

* * *

mvvcross vNext|monodroid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:33:41.323

[使用 mvvmcross 和 mono touch 将照片上传到](https://stackoverflow.com/questions/13958665/uploading-photo-to-a-webservice-with-mvvmcross-and-mono-touch?lq=1)web 服务中涵盖了将图像上传到 web 服务

在 ImageView 中显示图像包含在[Take/Select picture 中，并在 ImageView 中显示而不先保存（使用 MvvmCross）](https://stackoverflow.com/questions/14368967/take-select-picture-and-show-it-in-imageview-without-saving-first-using-mvvmcro)

* * *

为了找到这些命中，我使用了带有“mvvmcross”和“picture”字样的 StackOverflow 搜索框 - [https://stackoverflow.com/search?q=mvvmcross+picture](https://stackoverflow.com/search?q=mvvmcross+picture)

* * *

更新后更新（请尽量不要这样做 - 请尝试提出新问题 - 您可以随时交叉引用它们）。

我在您的更新中稍微更改了绑定代码 - 它有字符串和流以及 byte[] - 所以我将所有内容都降低到 byte[] 级别，然后在 ViewModel 上添加了一个 byte[] 属性。

要使用绑定，您现在应该能够使用：

```
 <ImageView
     android:layout_width="200dp"
     android:layout_height="200dp"
     local:MvxBind="Picture ImageBytes"
     /> 
```

请注意，您不需要 TwoWay - TwoWay 用于 View 需要将更改发送到 ViewModel 时 - 例如，当用户在文本框中输入文本时。

# php - PHP 抽象静态类方法的替代模型

> ID：14894635
> 
> 赞同：6
> 
> 时间：2013-02-15T12:20:36.120
> 
> 标签：php, oop, abstract-class

好的，所以我在这里阅读了很多关于此的[帖子](https://stackoverflow.com/questions/999066/why-does-php-5-2-disallow-abstract-static-class-methods)，但我认为这是一个具体的新问题。

我想要我们很多人在这里错误地称之为“抽象静态方法”的功能。那就是：**我想要一个坚持扩展它的类实现某些静态方法的类**。

似乎有两条路可以解决很多讨论过的不允许抽象静态的问题，但似乎都不优雅。

## 问题

以下会生成错误：“PHP 严格标准：静态函数 A::fn() 不应是抽象的”。

```
<?php
abstract class A
{
     abstract static public function fn();
}

class B extends A
{
    static public function fn()
    {
         // does something on class vars etc.
    }
} 
```

## 解决方案 1：使用接口

```
<?php
interface iA {
    static function fn();
}

abstract class A implements iA 
{
} // obviously this would have other stuff in it in reality

class B extends A
{
    static public function fn()
    {
         // does something on class vars etc.
    }
} 
```

问题在于接口假定（规定）所有方法都是公共的。所以虽然这达到了坚持抽象类的子类有一定的静态方法的目的，但它只能用于公共方法；仍然无法确保 A 的子类实现受保护的静态方法。

当方法完全在静态数据上工作但不应该从“外部”调用时，受保护的静态方法很有用。

## 解决方案 2：异常

```
abstract class A
{
     static public function fn()
     {  
         throw new Exception(get_called_class() . " must implement fn()");
     }

}

class B extends A
{
    static public function fn()
    {
         // does something on class vars etc.
    }
} 
```

如果调用 fn()，这在运行时有效。但是在运行时必须处理编码语法错误是没有用的。虽然这可能是一种方法的破解，但每种方法的代码要多得多。

**这种设计有什么问题以至于语言正确地禁止它吗？**有多种方法可以坚持子类提供大多数类型的方法，但不是静态方法，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:59:17.673

这是因为静态方法属于定义它们的**类。**`A::fn()` 并且`B::fn()`是两种不同的方法，与继承树无关。所以定义`A::fn()`为没有什么意义`abstract`。

也许您所讨论的方法根本不应该是抽象的？如果您想使用任何类型的多态性，则应该涉及到对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:46:01.957

我可能完全错了，但我使用没有问题

```
abstract class A
{
     abstract static public function fn();
}

class B extends A
{
    static public function fn()
    {
         print 1;
    }
}

B::fn(); 
```

它产生 1 作为输出。我在[这里](http://writecodeonline.com/php/)运行了你的代码。你用什么版本的php？

# c++ - C++：两个指针（假设）指向同一个地址。改变其中一个的内容不会改变另一个的内容

> ID：14894637
> 
> 赞同：3
> 
> 时间：2013-02-15T12:20:40.320
> 
> 标签：c++, pointers, arduino

我是 C++ 和 arduino 的新手，我不明白发生了什么。

问题是 ：

我有以下变量：

```
char *_array;
char _data[2]; 
```

当我这样做时：`_array = data;`然后我更改 _data 的内容，例如`data[0] = 'C'`, `data[1] = 'D'`。_array 的内容没有改变，我需要`_array = _data`再次应用更改。

他们似乎没有指向同一个地址。

下面的代码举例说明了这一点，对我来说第三次打印应该是`"3CD"`而不是`"3AB"`，但事实并非如此。

请问你能帮帮我吗？我不明白。谢谢！

```
#include <SoftwareSerial.h>
class Base {
    public:
        Base() {;};
        void setArray(char* array) {_array = array;}
        char *getArray() {return _array;}
    private:
        char *_array;
};

class A : public Base{
    public:
        A() : Base() {;};
        A(char data1, char data2)
        : Base()
        {
            setData(data1, data2);
            setArray(_data);
        }
        void setData(char data1, char data2)
        {
            _data[0] = data1;
            _data[1] = data2;
        }
        char *getData() {return _data;};

    private:
        char _data[2];
};

A a;

void setup()
{
  Serial.begin(9600);
}

void loop()
{
  a = A('A', 'B'); // This sets _data to "AB" and _array will point to _data
  Serial.write('1');
  Serial.write(a.getData()[0]);
  Serial.write(a.getData()[1]); // This will print "1AB" (as expected)

  a.setData('C', 'D'); // Here, _data changes to "CD" but _array no
  Serial.write('2');
  Serial.write(a.getData()[0]);
  Serial.write(a.getData()[1]); // This will print "2CD" (as expected)

  Serial.write('3');
  Serial.write(a.getArray()[0]);
  Serial.write(a.getArray()[1]); // This will print "3AB" (WHY?!?!?!)

  Serial.write('4');
  a.setArray(a.getData()); // If I call this function, _array changes to "CD"
  Serial.write(a.getArray()[0]);
  Serial.write(a.getArray()[1]); //This will print "4CD" (WHY I need to call setArray?)

  delay(3000);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T12:34:47.190

```
a = A('A', 'B'); // This sets _data to "AB" and _array will point to _data 
```

在上面的行中，`A('A', 'B')`构造了一个新的 A 并建立了 internal `_array`。然后`a = ...`调用默认分配，它将每个成员从源复制到目标。现在，`a._array`指向临时的 char 数组，这就是无效结果的产生方式。

为避免将来出现错误，

*   实现赋值运算符
*   复制构造函数
*   并让默认构造函数初始化_array。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:35:29.123

您至少需要为 A 类编写一个复制构造函数和一个赋值运算符。默认副本将复制指针，而不是将其重新分配到新位置。

例如

```
A(A const& rhs) 
: Base(rhs)
{
    memcpy(_data, rhs._data, sizeof(_data));
    setArray(_data);
}

A& operator=(A const& rhs) 
{
    if (this != &rhs) {
        static_cast<Base&>(*this) = rhs;
        memcpy(_data, rhs._data, sizeof(_data));
        setArray(_data);
    }
    return *this;
} 
```

# javascript - 如何使用javascript在曲线上移动对象

> ID：14894640
> 
> 赞同：2
> 
> 时间：2013-02-15T12:20:53.143
> 
> 标签：javascript, jquery, svg, jquery-animate

![在此处输入图像描述](../Images/e04cbc778a880b08890b660ad97bb901.png)

我想使用 javascript 在这些曲线上移动一个对象。当我单击一个对象时，该对象在曲线上移动。我尝试了 jquery 插件的动画方法，但它不起作用。我找不到使用 javascript 执行此操作的方法。是否可以使用 SVG 或者可以使用 javascript 来完成。

请任何人都可以指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:25:00.837

使用 jquery 路径，您可以定义几个 javascript 动画： [https ://github.com/weepy/jquery.path](https://github.com/weepy/jquery.path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:30:58.487

你可以在这里看到我的代码[Demo jsFFidle](http://jsfiddle.net/centerwow/XfvpL/6/)

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <line class="line_svg" x1="75" y1="100" x2="275" y2="100" />
    <line class="line_svg" x1="75" y1="250" x2="275" y2="250" />
    <line class="line_svg" x1="75" y1="100" x2="75" y2="400" />
    <line class="line_svg" x1="175" y1="100" x2="175" y2="400" />
    <line class="line_svg" x1="275" y1="100" x2="275" y2="400" />
    <line class="line_svg" x1="75" y1="400" x2="275" y2="400" />
    <path id="path1"  
     d="M75,250 C 100,50 250,50 275,250"
     d="M 275,250 C 250,400 100,400 75,250" fill="none" stroke="blue" stroke-width="7.06"  />
      <circle cx="75" cy="250" r="18" fill="blue"  />
      <circle cx="175" cy="100" r="18" fill="blue"  />
      <circle cx="275" cy="250" r="18" fill="blue"  />
      <circle cx="175" cy="400" r="18" fill="blue"  />

<path d="M-25,-12.5 L25,-12.5 L 0,-87.5 z"  fill="yellow" stroke="red" stroke-width="7.06"  >
    <animateTransform
            attributeName="transform"
            begin="0s"
            dur="10s"
            type="rotate"
            from="0 -100 -110"
            to="360 150 150"
            repeatCount="1" />
    <animateMotion dur="11s" repeatCount="1" rotate="auto" >
       <mpath xlink:href="#path1"/>
    </animateMotion>

    <circle id="pointA" cx="75" cy="250" r="5" />
</svg> 
```

# android - 在android中存储来自sdcard的图像路径

> ID：14894644
> 
> 赞同：0
> 
> 时间：2013-02-15T12:21:02.963
> 
> 标签：android, image, file, android-intent

如何将图像路径存储到数组中。因为我正在动态检索图像。n 列出它们。单击一个图像后，我想将其发送到以前的活动。如何存储图像路径？请帮帮我

```
below is code- 
```

第一个活动- public void importFile(View v){

```
 Intent intent=new Intent(this,ImportFile.class);

    startActivityForResult(intent, 1);

}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode==1)
    {
        String path=data.getDataString();
        System.out.println(";;;;;;;;;;;;"+path);
    }
} 
```

第二个活动——

```
in oncreat-
 int j=0;
File[] imagefile;
 File f = new File("/sdcard");
        File[] files = f.listFiles();

        for(int i = 0; i < files.length; i++,j++) {
            File file1 = files[i];
             if(myfile.endsWith(".jpeg")){
                image[j]=file1;//here i'm getting nullpointer exception
            }
           }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        int j;
        // TODO Auto-generated method stub
        for(j=1;j<idcount;j++){
            if(ch[j].isChecked())
            {
                imagesPaths.add(image[++j].getAbsolutePath());

                i=new Intent();
                i.putExtra("files",imagesPaths);
                setResult(RESULT_OK, i);
                finish();
            }       
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:31:28.543

使用 GSON 库

[http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)

您可以创建图像路径数组的 json 字符串，然后将 json 字符串存储到首**选项**

[http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html](http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html)

所有活动都可以访问优先存储价值。并从另一个活动将 json 字符串转换为数组，您可以使用该数组。

**或者**

您可以在活动中创建静态数组，并可以在活动中静态使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:47:00.697

```
case 1:
            if(resultCode == RESULT_OK){  
                Uri selectedImage = imageReturnedIntent.getData();
                String path = getRealPathFromURI( selectedImage );
                LogMsg.d("PAth "+path);
                Bitmap b = getBitmap(path);
                bitmapList.add(b);
                adapter.notifyDataSetChanged();
            }
        break; 
```

接着;

```
private String getRealPathFromURI(Uri contentUri) {
           ContentResolver resolver = getContentResolver();
           String[] proj = { MediaStore.Video.Media.DATA };
           Cursor cursor = resolver.query(contentUri, proj, null, null, null);
           int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
           cursor.moveToFirst();
           return cursor.getString(column_index);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:40:45.553

试试这样：

您调用的活动：

```
File f = new File("/sdcard");
File[] files = f.listFiles();
ArrayList<String> imagesPaths = new ArrayList<String>(); // Array to store the images paths

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

    // TODO Auto-generated method stub
    i=new Intent();
    for(int j=0; j< ch.lenght; j++){
        if(ch[j].isChecked())
        {
             imagePaths.add(f[j].getAbsolutePath());
        }       
    }
    i.putStringArrayListExtra("files", imagePaths);
    setResult(RESULT_OK, i);
    finish();
} 
```

您的来电活动：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
   super.onActivityResult(requestCode, resultCode, data);

   if(requestCode==1)
   {
       ArrayList<String> paths= data.getStringArrayListExtra("files");
       System.out.println(paths.toString());
  } 
```

}

# linux - 打包 Perl Mojolicious Web 应用程序

> ID：14894646
> 
> 赞同：5
> 
> 时间：2013-02-15T12:21:13.380
> 
> 标签：linux, perl, packaging, mojolicious

我已经用 Perl 编写了一个小型 Web 应用程序，我想将它打包以便其他人可以使用它。我的应用程序具有以下组件

*   来自 CPAN 的各种 Perl 模块

*   我自己的模块

*   一个 MySQL 数据库

*   Apache2 配置

我不确定从哪里开始。任何帮助深表感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T14:16:33.243

一旦你掌握了它的窍门，向 CPAN 提交一个模块很容易，但一开始需要一段时间来学习。有几个指南可以帮助您，但请选择最近几年编写的指南。这是一个：[http ://www.perlmonks.org/?node_id=879515](http://www.perlmonks.org/?node_id=879515)

您将需要至少对其中一种构建工具有所了解。我喜欢[Module::Build](https://metacpan.org/module/Module%3a%3aBuild)，其他一些喜欢 ExtUtils::MakeMaker （我个人不喜欢）或伪工具[Dist::Zilla](http://dzil.org)可以用来简化使用前一个的过程。

我可能会建议尝试在`Acme::`命名空间下发布一个小玩具模块，以便在上传您的真实模块之前进行尝试。

看看你最喜欢的作者写的一些 dists，看看他们做了什么。例如，我的在[这里](https://metacpan.org/author/JBERGER)或[这里](https://github.com/jberger)包括我的 Mojolicious 应用程序[Galileo](https://github.com/jberger/Galileo)。

最后，如此[处](http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#Making_your_application_installable)所述，要使 Mojolicious 应用程序可安装，您需要将静态文件移动到可安装位置。我制作了一个名为[Mojolicious::Plugin::InstallablePaths](https://metacpan.org/module/Mojolicious%3a%3aPlugin%3a%3aInstallablePaths)的插件，可以提供帮助（如果你遵循它的配方） 。

祝你好运！

PS如果你评论一个github repo的链接，我很乐意发表一些评论（但你当然仍然需要做繁重的工作:-)）

# vim - 将`ctrl +`映射到tabn

> ID：14894653
> 
> 赞同：1
> 
> 时间：2013-02-15T12:21:32.473
> 
> 标签：vim, vi

我正在尝试映射`CTRL-+`到`:tabn`. 但它不起作用。

```
inoremap <C-+> :tabn<CR>
inoremap <C--> :tabp<CR>
nnoremap <C-+> :tabn<CR>
nnoremap <C--> :tabp<CR> 
```

它在插入模式下不起作用，在正常模式下也不起作用。

如果我尝试以下（不带`CTRL`），那么它可以工作，但是当我处于插入模式时我无法切换选项卡：

```
nnoremap + :tabn<CR>
nnoremap - :tabp<CR> 
```

如何映射`CTRL-+`到`:tabn`以便在插入模式下切换选项卡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:34:19.070

由于键盘输入在内部处理的方式，不幸的是，这在今天通常是不可能的，即使在 GVIM 中也是如此。某些组合键，如`Ctrl`+ 非字母无法映射，`Ctrl`+ 字母与`Ctrl`+ `Shift`+ 字母无法区分。（除非您的终端为它发送一个不同的*termcap*代码，而大多数人不会。）在插入或命令行模式下，尝试键入组合键。如果没有任何反应/插入，则不能使用该组合键。这也适用于`<Tab>`/ `<C-I>`, `<CR>`/ `<C-M>`/ `<Esc>`/`<C-[>`等（唯一的例外是`<BS>`/ `<C-H>`。）这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

对我来说（在英文 Windows GVIM 中），*可以*`Ctrl`将+映射`-`为`<C-_>`。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持此功能的终端中的控制台 Vim），并提出[了各种建议](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:31:21.213

Vim 只能检测（并因此映射）少数可控制打印的键和弦，这些都列在[FAQ](http://vimhelp.appspot.com/vim_faq.txt.html#faq-20.5)中。不幸的是`<CTRL-+>`，`<CTRL-->`在这个列表中没有提到，所以看起来这样的映射是不可能的。

[关于是否重新设计 Vim 的关键模型的讨论](https://groups.google.com/forum/#!msg/vim_dev/Ym6D-kWIsyo/-XOw7E8LbN0J)正在进行中，但这可能要等到 Vim 8.0。我并不乐观。

# c++ - 比较向量中的队列大小

> ID：14894658
> 
> 赞同：2
> 
> 时间：2013-02-15T12:21:52.753
> 
> 标签：c++, loops, vector, queue

**更新**

有一个逻辑，其中整数之前被排入向量中的队列，搜索队列循环并将整数排入队列中具有最小大小的队列。下面的代码展示了操作

```
#include <vector> 
#include <queue> 
std::vector<std::queue<int> > q
int min_index = 0;
std::size_t size = q.size();
for( i=0; i<size; i++){ //accessing loop of queues
    if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is the shortest queue
} 
q[min_index].push(int) 
```

我正在尝试扩展这个逻辑，条件是整数应该继续在最短队列中排队**，而条件为真的**最短队列的大小小于或等于队列循环中任何另一个队列的大小。

我想做如下所示的代码

```
#include <vector> 
    #include <queue> 
    std::vector<std::queue<int> > q
    int min_index = 0;
    std::size_t size = q.size();
    for( i=0; i<size; i++){ //accessing loop of queues
        if(q[min_index].size() > q[i].size())
            min_index = i

    while(q[min_index].size <= q[some_other_index].size() )
    {
        q[min_index].push(int);

} 
```

如何实现这个逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:43:16.967

最干净的解决方案需要 C++11：

```
std::min_element( 
        q.begin(),
        q.end(),
        []( std::queue<int> const& lhs, std::queue<int> const& rhs)
            { return lhs.size() < rhs.size(); } )
    ->push(value); 
```

即使没有 C++11，我想我也会写一个小的谓词类来做 lambda 所做的事情，并使用它。

## 编辑：

现在我对想要什么有了更好的了解，下面的内容应该可以解决问题：

```
class OrderInMap
{
    MultiQueue* myOwner;
public:
    OrderInMap( MultiQueue* owner )
        : myOwner( owner )
    {
    }
    bool operator()( int lhs, int rhs ) const
    {
        return myOwner->myQueues[ lhs ].size()
                < myOwner->myQueues[ rhs ].size();
    }
};

std::vector <std::queue<int>> myQueues;
std::vector <int> myMap;
int myCurrent;
bool myOrderIsValid;
OrderInMap myOrder;

int getIndexForPush()
{
    if ( ! myOrderIsValid || myOrder( myMap[0], myCurrent ) ) {
        myMap.push_back( myCurrent );
        std::push_heap( myMap.begin(), myMap.end(), myOrder );
        std::pop_heap( myMap.begin(), myMap.end(), myOrder );
        myCurrent = myMap.back();
        myMap.pop_back();
    }
    return myCurrent;
} 
```

由于弹出可以更改顺序，因此您必须 `myOrderIsValid`在弹出时设置为 false （或者可能仅在弹出之后，`myOrder( poppedIndex, myMap.front() )`）。

或者，您可以手动完成，并避免使用地图（但您必须保留两个变量）：

```
int myCurrent;
int myNext;

void order()
{
    if ( myQueues[myNext].size() < myQueues[myCurrent].size() ) {
        std::swap( myNext, myCurrent );
    }
}
int getQueueIndex()
{
    if ( ! myOrderIsValid || myQueues[myNext].size() < myQueues[myCurrent].size() ) {
        myCurrent = 0;
        myNext = 1;
        order();
        for ( int i = 2; i < myQueues.size(); ++ i ) {
            if ( myQueues[i].size() < myQueues[myNext].size() ) {
                myNext = i;
                order();
            }
        }
    }
    return myCurrent;
} 
```

这可能比维护堆要慢，但即使有大量队列，我也不确定差异是否明显。

# twitter-bootstrap - Twitter Bootstrap 是否支持 AddThis 按钮

> ID：14894662
> 
> 赞同：2
> 
> 时间：2013-02-15T12:22:01.730
> 
> 标签：twitter-bootstrap, jsfiddle

我似乎无法让我的 AddThis 按钮显示在我的引导页面中。是否存在已知问题。我似乎在网上找不到任何这样的实例。addthis 的说明是将代码发布在我已完成的页面内的任何位置。

下面的代码：

```
 <head>
            <title>Bootstrap 101 Template</title>

            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Bootstrap -->
            <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
            <link href="style.css" rel="stylesheet" type="text/css">

            </head>
            <body>
        <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_floating_style addthis_32x32_style" style="left:50px;top:50px;">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        </div>
        <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4fd7a2f13ac8bb1a"></script>
        <!-- AddThis Button END -->
            <script src="http://code.jquery.com/jquery.js"></script>
            <script src="js/bootstrap.min.js"></script>

            <div class="navbar navbar-fixed-top navbar-inverse">
            <div class="navbar-inner">
            <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Properties For Rent</a></li>
            </ul>
            </div>
            </div>
            <br/>
             <br/>
              <br/>
               <br/>
            <div class="container">

            <div class="hero-unit">
            <h1>Welcome to rentraro.com</h1>
            <p>The premier property management and holiday home rental accommodation specialists operating in Rarotonga, <br/>  the main island and gateway to the beautiful Cook Islands.</p>
            <p>
            <a class="btn btn-primary btn-large">
            Learn more
            </a>
            </p>
            </div>
            <div class="row-fluid">
                    <ul class="thumbnails">
                      <li class="span3">
                        <div class="thumbnail">
                          <img src="img/heritage_48_md.jpg" alt="">
                          <div class="caption">
                            <h4>The Heritage</h4>
                            <p>Your piece of paradise awaits...</p>
                            <p><a href="#" class="btn btn-primary">More...</a> 
                          </div>
                        </div>
                      </li>
                      <li class="span3">
                        <div class="thumbnail">
                          <img src="img/highland_ocean_view_02_md.jpg" alt="">
                          <div class="caption">
                            <h4>Highland Ocean View</h4>
                            <p>Some of the best views on the island...</p>
                            <p><a href="#" class="btn btn-primary">More...</a> 
                          </div>
                        </div>
                      </li>
                      <li class="span3">
                        <div class="thumbnail">
                          <img src="img/reiihana's_06_md.jpg" alt="">
                          <div class="caption">
                            <h4>Reihana</h4>
                            <p>Muri Beach at your doorstep...</p>
                            <p><a href="#" class="btn btn-primary">More...</a> 
                          </div>
                           <li class="span3">
                        <div class="thumbnail">
                          <img src="img/Kite_Moana_02_md.jpg" alt="">
                          <div class="caption">
                            <h4>Kite Moana</h4>
                            <p>Simplicity in sought after Muri...</p>
                            <p><a href="#" class="btn btn-primary">More...</a> 
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
            </div>

        </div>
            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:28:53.687

我意识到该文件需要托管在网络服务器上才能显示 AddThis 链接。多哈。

# java - java - 如何在java客户端轮询多个套接字？

> ID：14894664
> 
> 赞同：0
> 
> 时间：2013-02-15T12:22:07.153
> 
> 标签：java, sockets

我的程序有一个关于 Java 套接字通信的问题。在客户端，我需要监听 1900 端口并获取另一个软件发出的 UDP 消息。然后我需要通过端口 1901 将 UDP 消息发送到服务器端并监听服务器的响应。

同时，我还需要监听本地的1900端口。也就是说，一旦1900和1901端口出现问题，我就需要处理它。总之，在客户端，我需要监控端口 1900 和 1901，一旦其中一个异步得到一些东西，我需要来修复它。我认为它需要Java NIO的知识，但我并不完全了解。谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:39:59.250

您可以使用

`ServerSocketChannel`我想这样做，虽然我还没有尝试这样做。您可以查看此 stackoverflow 线程以获取更多信息。

[Java 服务器 - 多个端口](https://stackoverflow.com/questions/5079172/java-server-multiple-ports)

# ruby-on-rails - 在每个循环中显示关联记录的正确方法？

> ID：14894668
> 
> 赞同：0
> 
> 时间：2013-02-15T12:22:22.403
> 
> 标签：ruby-on-rails, has-one

我有两个课程，订单和饮料 - 订单 has_one 饮料和饮料 has_many 订单。Orders 表有一个 drink_id 字段，在我创建时会正确填充。

但是，我真的很难让饮料的名称显示在 Orders#index 中，而不仅仅是 ID。我觉得我真的把事情复杂化了——在 Rails 中让这个（基本功能）工作的最干净的方法是什么？

控制器：

```
 def index
    @orders = Order.all
    @beverage = Order.beverage.find(params[:beverage_id])
  end 
```

看法

```
 - @orders.each do |order|
    %tr
      %td
        = order.created_at
      %td
        = order.orderable_type
      %td
        = order.quantity
        = order.beverage.name 
```

此刻，它只是给了我

> 未定义的方法“饮料”#

我在某处做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:27:18.453

> > 我有两个课程，订单和饮料 - 订单 has_one 饮料和饮料 has_many 订单。

你应该有：

*   饮料 has_many :orders
*   订单belongs_to :bavarage

因此，您的课程可能设置错误。你一定有类似的东西。

```
 class Beverage < ActiveRecord::Base
   has_many :orders   
 end

 class Order < ActiveRecord::Base
   belongs_to :beverage
 end 
```

否则，`order.beverage.name`永远不会工作。

您也可以`@beverage = Order.beverage.find(params[:beverage_id])`从控制器中删除 ，因为您显然没有使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:33:29.987

按照 gabriel 的建议设置模型后，您可以执行以下操作：

```
@orders = Order.includes(:beverage)
# retrieves all orders, including their beverage
# then you can loop through them like you did before 
```

或者：

```
@beverage = Beverage.includes(:orders).find(params[:id])
# retrieves a specific beverage + all its orders 
```

# iphone - 如何在 ARC 模式下发布姿态

> ID：14894672
> 
> 赞同：0
> 
> 时间：2013-02-15T12:22:41.617
> 
> 标签：iphone, automatic-ref-counting

我需要一些指导方针。我想在 ARC 模式下立即发布一个实例这是正确的方法吗

> ```
> if(secondScreenAudio.isPlaying == true){
>     [secondScreenAudio stop];
>     @autoreleasepool {
>        secondScreenAudio = nil; 
>     }
> } 
> ```

请提供一些提示谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:28:25.880

那是正确的......你不必把@autorelease tho ..你也不要那样使用自动释放......如果你将它设置为nil ..并且没有其他硬引用指向该对象..它将被释放.

# mysql - MySQL左外连接返回NULL值

> ID：14894673
> 
> 赞同：1
> 
> 时间：2013-02-15T12:22:44.407
> 
> 标签：mysql

由于我无法解释的原因，曾经可以正常工作的左外连接在修改其中一个表后不再工作。

到目前为止，代码非常不稳定，因为它涉及很多以前的连接，但是在我被卡住的地方，它只是在寻找两个值匹配的连接：

```
mysql_query ("CREATE TABLE Everything(
SELECT * from two
    left outer join CPEs on CPEs.cpe_cust_index = two.cust_index2
    where cust_index2 > \"0\"
)")
or die (mysql_error());#("this certainly didn't work\n");
 echo "It works!\n";' 
```

这用于匹配两个字段（两个相同长度的 varchars）并将 CPE 附加到两个，但现在表 Everything 显示 NULL 无论来自 CPE 的字段应该在哪里。

我错过了一些明显的东西吗？

我能想到的是 two.cust_index2 不再是唯一字段（尽管 CPEs.cpe_cust_index 是唯一的），但这不重要。

字段是简单的数字，并且有明确的匹配（来自观察）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:12:33.790

@Michael，您以迂回的方式解决了它。当我导出 CSV 文件时，我注意到旧表的每个字段前面都有一个空格。我刚刚编辑了我的脚本来排序和删除空格，它现在可以工作了。

烦人，因为我会看到一个尾随空格，但是当我查看它时，我使用的工具似乎减去了前面的空格。

谢谢你们的时间！

# facebook - Facebook link_stat 不正确的唯一 URL 统计

> ID：14894676
> 
> 赞同：2
> 
> 时间：2013-02-15T12:22:59.260
> 
> 标签：facebook

我正在使用这个 FQL 来获取我的应用程序中每篇文章的点赞数。

选择 share_count、like_count、comment_count、total_count FROM link_stat WHERE url="http://www.example.com/some/dir/slug"

但是，我一直注意到数字和类似按钮似乎并没有考虑到蛞蝓。因此，当我在 Graph API Explorer 中调试它时，http://www.example.com/some/dir/slug 和 http://www.example.com/some/dir 的统计[信息](http://www.example.com/some/dir/slug)是[相同](http://www.example.com/some/dir)的。

这是FB错误吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:40:19.657

元`og:url`标记必须包含每篇文章的单独 URL - 否则，如果所有文章的 URL 值相同，Facebook 将计算该 URL 的所有喜欢。

# javascript - Javascript - 从字符串中替换子字符串，其中值在特定字符之间

> ID：14894678
> 
> 赞同：0
> 
> 时间：2013-02-15T12:23:05.687
> 
> 标签：javascript, regex, replace

所以我有这个字符串，它代表一个数学表达式：

```
(timezone*timelapse)-time 
```

每个单词代表一个输入字段的 id，目前我只是用原型 js 表达式替换每个单词，以便稍后进行评估：

```
$('timezone').value,

$('timelapse').value 
```

问题是最后一个 id。当我到达它时，我的表情目前是这样的：

```
($('timezone').value*$('timelapse').value)-time 
```

因此，当我搜索`time`要替换它的单词时，`$('time').value`它将影响前两个值并弄乱最终表达式。

我的问题是：如何在这里替换正确的单词？

由于这是一个数学表达式，这个词可能应该在任何数学符号之间，如下所示：

```
(+-/* **word** +-/*)

[empty space] **word** +-/*)

(*-/* **word** [empty space] 
```

或不？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:34:19.767

你可以用一个替换全部替换，那么你就没有双重替换问题：

```
exp = exp.replace(/([A-Za-z]+)/g, function(m){
  return "$('" + m + "').value";
}); 
```

如果它是没有任何逻辑的直接替换，您还可以在替换字符串中使用捕获的值，如 Cerbrus 建议的那样：

```
exp = exp.replace(/([A-Za-z]+)/g, "$('$1').value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:28:07.330

尝试这个：

```
var newString = oldString.replace(/\btime\b/, "$('time').value") 
```

`\b`是一个[单词边界](http://www.regular-expressions.info/wordboundaries.html)`time`，这意味着正则表达式仅在它是一个独立单词时才匹配，而不是在它直接跟随或前面有任何单词字符时匹配。

# wpf - 在 Prism/Composite MVVM WPF 应用程序中使视图模型激活感知

> ID：14894680
> 
> 赞同：4
> 
> 时间：2013-02-15T12:23:11.477
> 
> 标签：wpf, mvvm, prism, eventaggregator

在我的 MVMC 应用程序中，我有一个包含多个步骤的过程，基本上是一个向导。

我的控制器解析了我的外部视图（调用它`WizardView`）并将其添加到主区域。

`WizardView`包含一个面包屑路径以显示向导的进度和一个子区域以将其他视图加载到其中（称为 this `WizardRegion`）。`Step1View`是加载到的第一个视图`WizardRegion`。

每个视图都使用 Unity 容器将其 ViewModel 注入到构造函数中。

`WizardViewModel`订阅由步骤视图模型发布的多个事件聚合事件。

随着每个步骤的完成，视图模型会发布一个`WizardViewModel`用于存储状态的事件，这意味着`WizardViewModel`随着我们的进行收集来自每个步骤的数据。步骤 ViewModel 还调用控制器将下一步加载到`WizardRegion`.

在最后一步`WizardViewModel`保存向导的结果并`MainRegion`导航回其他屏幕。

下次进入向导时，我们会创建所有视图和 ViewModel 的新实例，但前一个向导中的事件订阅仍然存在。

如何让我的视图模型知道它们已停用，以便我可以取消订阅我的事件？

另一种选择是取消订阅事件处理程序中的事件。这可能会起作用，但是当我退回向导并需要再次重新订阅事件时会增加复杂性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T14:12:30.513

解决方案是`Microsoft.Practices.Prism.IActiveAware`在我的视图模型中实现。

```
public bool IsActive
{
    get { return _isActive; }
    set
    {
        if (_isActive != value)
        {
            _isActive = value;
            DoActiveChangedWork(value);
        }
    }
}

public event EventHandler IsActiveChanged; 
```

也可以在视图中实现这一点，但这不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:38:37.123

如果您在谈论 Prism EventAggregator - 您可以将`keepSubscriberReferenceAlive`参数设置为，`false`以便它在后台使用弱引用，因此当对象“死亡”时，GC 会自动“取消订阅”所有内容。

```
fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.UIThread, true); 
```

否则，您必须通过明确退订自己来完成：

```
fundAddedEvent.Unsubscribe(FundAddedEventHandler); 
```

# unit-testing - 如何运行具有不同所需功能的多个 Selenium 测试

> ID：14894682
> 
> 赞同：2
> 
> 时间：2013-02-15T12:23:16.170
> 
> 标签：unit-testing, testing, selenium

我想运行相同的测试代码：

例如

```
WebElement element = driver.findElement(By.name("q"));
element.sendKeys("mysql excel 2013");
element.submit();

// Check the title of the page
System.out.println("Page title is: " + driver.getTitle());

// Google's search is rendered dynamically with JavaScript.
// Wait for the page to load, timeout after 10 seconds
(new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
    public Boolean apply(WebDriver d) {
        return d.getTitle().toLowerCase().startsWith("mysql");
    }
});

// Should see: "cheese! - Google Search"
System.out.println("Page title is: " + driver.getTitle());
// Close the browser 
```

具有不同的能力配置

```
DesiredCapabilities capability = DesiredCapabilities.firefox();
capability.setVersion("15");
capability.setCapability("flash", "11-4");

RemoteWebDriver driver =  new RemoteWebDriver(new URL("http://192.168.1.22:4444/wd/hub"), capability); 
```

铬合金

```
DesiredCapabilities capability = DesiredCapabilities.chrome();
capability.setVersion("21");
capability.setCapability("flash", "11-4");

RemoteWebDriver driver =  new RemoteWebDriver(new URL("http://192.168.1.22:4444/wd/hub"), capability); 
```

在不创建具有不同功能的多个实例的情况下，最好的方法是什么？Selenium 是否为此提供了一个概念？

还是我会“简单地”使用某种循环结构来循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:53:15.483

为了实现这一点，您应该使用 testng 进行参数传递概念

**测试套件**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
    <suite thread-count="2" name=MyTestSuite" parallel="tests">

      <test name="RunInFirefox" preserve-order="false">
       <parameter name="version" value="8"/>
       <parameter name="browser" value="firefox"/>
       <parameter name="flashVersion" value="11.2"/>
        <classes preserve-order="true">
           <class name="com.test.TestCase1"/>
           <class name="com.test.TestCase2"/>
           <class name="com.test.TestCase3"/>
        </classes>
      </test>

     <test name="RunInChrome" preserve-order="false">
       <parameter name="version" value="21"/>
       <parameter name="browser" value="chrome"/>
       <parameter name="flashVersion" value="11.2"/>
        <classes preserve-order="true">
           <class name="com.test.TestCase1"/>
           <class name="com.test.TestCase2"/>
           <class name="com.test.TestCase3"/>
        </classes>
      </test>
    </suite> 
```

**TestNg 测试用例**

```
import org.openqa.selenium.WebDriver;
import org.testng.annotations.Parameters;
import org.testng.annotations.Test;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.AfterTest;

public class ExampleTestCase {

private static WebDriver driver;

@Parameters({"browser,version,flashVersion"})
@BeforeClass
public void beforeClass(String browser,String version,String flashVersion) 
{
    driver=getDriverInstance(browser,version,flashVersion);
    }

@BeforeTest
public void beforeTest() 
{

}
@Test
public void f() 
{
    //your test code here
}

@AfterTest
public void afterTest() 
{

}

@AfterClass
public void afterClass() 
{

} 
```

}

**getDriverInstance**方法实现

```
public static WebDriver getDriverInstance(String browser,String version,String flashVersion)
{
    WebDriver driver=null;
    if(browser.equals("firefox"))
    {
        DesiredCapabilities capability = DesiredCapabilities.firefox();
        capability.setVersion(version);
        capability.setCapability("flash", flashVersion);
        driver =  new RemoteWebDriver(new URL("http://192.168.1.22:4444/wd/hub"), capability);
    }
    else if(browser.equals("chrome"))
    {
        DesiredCapabilities capability = DesiredCapabilities.chrome();
        capability.setVersion(version);
        capability.setCapability("flash", flashVersion);
        driver =  new RemoteWebDriver(new URL("http://192.168.1.22:4444/wd/hub"), capability);
    }
    return driver;
} 
```

# io - 写入文件的行尾

> ID：14894683
> 
> 赞同：0
> 
> 时间：2013-02-15T12:23:17.827
> 
> 标签：io, common-lisp

我正在创建一个将列添加到平面文件的函数。到目前为止，我有：

```
(defun ff-from-vector (vec dir file)
  (with-open-file (ff-vec-str (make-pathname   :name file
                                               :directory dir)
                                               :direction :output
                                               :if-exists :overwrite)
    (dotimes (i (length vec))
      (format ff-vec-str "~A~%" (svref vec i)))))

(defun vec-from-1col-ff (dir file)
  (let ((col (make-array `(,(ff-rows dir file))))) 
        (with-open-file (ff-col-str (make-pathname  :name file
                                                    :directory dir)
                                                    :direction :input)
      (do ((line (read-line ff-col-str nil 'eof) 
                 (read-line ff-col-str nil 'eof))  
           (i 0 (incf i)))
           ((eql line 'eof))
           (setf (aref col i) (read-from-string line))))
  col))

(defun add-col-to-ff (col-dir col-file ff-dir ff-file)
  (ff-from-vector (vec-from-1col-ff col-dir col-file)   
                  ff-dir 
                  ff-file)) 
```

但是，当我从文件中读取时：

```
2 
2
2
2 
```

并尝试覆盖文件：

```
1 1 1 1
1 1 1 1
1 1 1 1
1 1 1 1 
```

我得到：

```
2 
2
2
2 
1 1 1 1
1 1 1 1
1 1 1 1
1 1 1 1 
```

本质上我的问题是：什么函数或代码将格式移动到输出文件的行尾？这样我就可以得到：

```
1 1 1 1 2
1 1 1 1 2
1 1 1 1 2
1 1 1 1 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:57:33.783

您不能简单地将更多输出添加到文件中的各个行而不覆盖某些数据。

创建一个新文件并将输出放在那里，从两个输入文件中获取数据。

# java - 使用 Zebra TLP 2824 打印多个 epl 标签

> ID：14894685
> 
> 赞同：0
> 
> 时间：2013-02-15T12:23:33.003
> 
> 标签：java, zebra-printers, epl

我正在尝试使用 Zebra tlp 2824 在 epl 代码中打印多个标签。如果我在打印完美后发送代码，但是当我循环它几次时，它似乎丢失了标签尺寸并打印在边缘。有时它会在两者之间添加白色标签。我请求了一个内存转储，它给了我在 epl 代码中使用的措施，但这并没有完成这项工作。这是我的 java 应用程序中的 epl 代码：

```
String s = "";
for (int i = 0; i < Controller.codeT.getItems().size(); i++){
    for (int p = 0; p < Integer.valueOf(
               Controller.codeT.getItems().get(i).getQuant()); p++){

            s +=    "N"+"\n"+
                    "q312"+"\n"+
                    "Q199,23"+"\n"+
                    "B55,26,0,1,2,2,152,B,\""+Controller.codeT.getItems()
                                               .get(i).getCode()+"\""+"\n"+
                    "P1,1"+"\n";
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:21:17.887

如果您想多次打印相同的标签，您可以将 EPL 命令“P1,1”修改为“P2,1”，这应该打印两次相同的标签。您可以参考此命令的 EPL 手册：https: [//support.zebra.com/cpws/docs/eltron/epl2/EPL2_Prog.pdf](https://support.zebra.com/cpws/docs/eltron/epl2/EPL2_Prog.pdf)。

否则，您可能需要调整标签高度或标签感应模式。听起来打印机没有正确自动检测下一个标签起始位置。不幸的是，我并不确定如何完成这项工作，但我上面列出的 EPL 手册肯定会告诉你。

# android - 将接口与android中的数据库链接

> ID：14894686
> 
> 赞同：0
> 
> 时间：2013-02-15T12:23:39.723
> 
> 标签：android, user-interface, android-sqlite, android-spinner, android-tablelayout

我想创建一个带有列和行的 android 应用程序，用户可以从中选择项目并创建订单。我已经用 5 列在 SQLiteBrowser 中创建了自己的数据库。我在android项目的“资产”中添加了这个数据库。我还创建了一个界面。问题是，如何将所有这些信息与我的界面联系起来？例如，我如何将有关 Spinner 中地址的信息和有关项目的信息从数据库中添加到 tablelayout 中？我是android开发的新手，对不起，如果我不能正确解释的话。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:28:13.947

我个人正在使用 DBAdapter。您只需要指定您的数据库名称和路径。如果要填充某些视图，则需要创建适配器类。享受：[http ://www.2shared.com/document/Ik6fFuth/DBAdapter.html](http://www.2shared.com/document/Ik6fFuth/DBAdapter.html)

# javascript - 使用 javascript/jquery 仅在某些元素之后选择文本

> ID：14894691
> 
> 赞同：3
> 
> 时间：2013-02-15T12:23:58.523
> 
> 标签：javascript, jquery, html, web-scraping

如以下代码段所示，我有多个文本 div，其中有一个粗体部分，然后是一个换行符，然后是一段文本。我可以找到（）粗体部分，但我怎样才能得到只有在带有javascript/jquery的粗体部分之后的换行符之后的文本部分？

```
<div class="thecontent">
any amount of text or html elements before
<b>
    the bolded text
</b>
<br>
the text I need together with the bolded text which can contain other html
elements apart from line breaks and bolded blocks
<br>
<b>
    posibility of more bolded and text couples further in the div
</b>
<br>
and some more text to go with the bolded text
</div> 
```

单个 div 中可以有多个粗体部分和文本对，并且所需的文本片段以换行符结尾，另一个粗体部分或 div 的结尾。文本块中可能还有其他 html 元素`<a href>`。

我可以获取 with 的内容，`<b> </b>`并且`.find('b')`我尝试使用`nodeType == 3`它来选择文本节点，但这只会让我得到所有文本。

不幸的是，我无法更改页面的 html。有没有人有解决方案？提前致谢 ：）

根据要求，输入将以粗体形式阻止换行符和它们后面的文本。我需要文本跟随它们直到换行符或另一个粗体部分。

输出将是一个变量中的粗体文本以及换行符之后的文本，但直到另一个变量中的下一个换行符或粗体元素。

因此 html 示例的输出为：`the bolded text`+`the text I need together with the bolded text which can contain other html elements apart from line breaks and bolded blocks`

和`posibility of more bolded and text couples further in the div`+`and some more text to go with the bolded text`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:01:11.907

我不认为有一种非常简单的方法可以获取所有节点并将它们分开等，但它确实是可能的。由于我不知道您打算对文本做什么，所以我制作了一个简洁的小对象，其中包含应该更易于使用的所有内容，或者您​​可以更改代码以满足您的需求：

```
var elem    = $('.thecontent').get(0).childNodes,
    content = {},
    i = 0;

for (key in elem) {
    var type = elem[key].tagName ? elem[key].tagName : 'text';
    content[i] = {};
    content[i][type] = elem[key].tagName == 'B' ? $(elem[key]).text() : elem[key].nodeValue;
    i++;
}

console.log( content ); 
```

[**小提琴**](http://jsfiddle.net/3h5Vn/)

这将返回：

```
{"0": {"text" : "any amount of text or html elements before"},
 "1": {"B"    : "the bolded text"},
 "2": {"text" : "\n"}, //also returns newlines
 "3": {"BR"   : null},
 "4": {"text" : "the text I need together with the bolded text which can contain other html elements apart from line breaks and bolded blocks"},
 "5": {"BR"   : null},
 "6": {"text" : "\n"},
 "7": {"B"    : " posibility of more bolded and text couples further in the div"},
 "8": {"text" : "\n"},
 "9": {"BR"   : null},
 "10":{"text" : "and some more text to go with the bolded text"},
} 
```

您可以根据行号（从零开始）、标记名、文本内容或您需要的任何其他内容进行过滤？

# php - 登录功能似乎无法正常运行

> ID：14894692
> 
> 赞同：1
> 
> 时间：2013-02-15T12:24:02.630
> 
> 标签：php, mysql, session

我已经坐在这里思考了整整 30 分钟，我就是看不出有什么问题。

我已经添加了打印件，但它似乎没有正确地联系数据库或没有正确地从数据库中提取数据。

```
$conf['sql_host'] = 'localhost';
$conf['sql_user'] = 'root';
$conf['sql_pass'] = '';
$conf['sql_data'] = 'c_webauth';

    mysql_connect( $conf['sql_host'], $conf['sql_user'], $conf['sql_pass'] ) or die( 'Connection failed: '.mysql_error() );
    mysql_select_db( $conf['sql_data'] );

function login( $user, $pass ){

    session_regenerate_id();
        if ( isset( $_SESSION['user_id'] ) ) {
            unset( $_SESSION['user_id'] );
        }

        $qry = mysql_query( "SELECT user_id, user, user_group, user_name FROM c_users where user='$user' AND pass='".md5($pass)."'" );

        if ( mysql_num_rows( $qry ) > 0 ) {
            session_regenerate_id();

            while ( $data = mysql_fetch_array( $qry ) ) {
                $_SESSION['user_id'] = $data['user_id'];
                $_SESSION['user_group'] = $data['user_group'];
                $_SESSION['user'] = $data['user'];
                $_SESSION['user_name'] = $data['user_name'];

                // Debug
                echo $_SESSION['user_id'];
                echo $_SESSION['user_group'];
                echo $_SESSION['user'];
                echo $_SESSION['user_name'];

                session_start( ); 
            }
        }
}

login( "username", "password" ); 
```

任何机会你可以看到什么是错的？

每个人都提到我有我的 session_start(); 在错误的地方，但回声的打印什么都没有，任何地方都绝对没有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:28:03.350

您在最后调用 session_start() 而不是在进行会话检查之前

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:28:56.113

`session_start( );` 它应该在会话使用之前使用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T12:30:02.460

在您分配 SESSION 变量之后，您已将其放在`session_start( )`底部

将此功能放在页面顶部并从底部删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:40:08.283

您需要放在`session_start()`代码的顶部，因为它在底部所有`$_SESSION`变量都未声明，因此它们不会返回值。一个`session_start()`是在顶部，您将获得全局`$_SESSION`变量，并且您还可以设置它们。我建议您创建一个名为`config.php`has的脚本`session_start()`，您可以将其包含在所有脚本中，而不是`session_start()`每次都添加。
希望这可以帮助你：D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T12:41:30.407

```
<?php
session_start();

$conf['sql_host'] = 'localhost';
$conf['sql_user'] = 'root';
$conf['sql_pass'] = '';
$conf['sql_data'] = 'c_webauth';

    mysql_connect( $conf['sql_host'], $conf['sql_user'], $conf['sql_pass'] ) or die( 'Connection failed: '.mysql_error() );
    mysql_select_db( $conf['sql_data'] );

function login( $user, $pass ){

    session_regenerate_id();
        if ( isset( $_SESSION['user_id'] ) ) {
            unset( $_SESSION['user_id'] );
        }

        $qry = mysql_query( "SELECT user_id, user, user_group, user_name FROM c_users where user='$user' AND pass='".md5($pass)."'" );

        if ( mysql_num_rows( $qry ) > 0 ) {
            session_regenerate_id();

            while ( $data = mysql_fetch_array( $qry ) ) {
                $_SESSION['user_id'] = $data['user_id'];
                $_SESSION['user_group'] = $data['user_group'];
                $_SESSION['user'] = $data['user'];
                $_SESSION['user_name'] = $data['user_name'];

                // Debug
                echo $_SESSION['user_id'];
                echo $_SESSION['user_group'];
                echo $_SESSION['user'];
                echo $_SESSION['user_name'];

            }
        }
}

login( "username", "password" );
?> 
```

我已经为你修复了你的代码。

# c++ - 为什么“extern const int n;” 没有按预期工作？

> ID：14894698
> 
> 赞同：33
> 
> 时间：2013-02-15T12:24:32.410
> 
> 标签：c++, constants, declaration, extern

我的项目仅包含两个源文件：

一个.cpp：

```
const int n = 8; 
```

b.cpp：

```
extern const int n;

int main()
{
    // error LNK2001: unresolved external symbol "int const n" (?n@@3HB)
    int m = n; 
} 
```

我知道有几种方法可以使它起作用；但是，我只是想知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-15T12:38:15.363

这是因为`const`默认情况下暗示内部链接，因此您的“定义”在它出现的翻译单元之外是不可见的。

在这种情况下，到目前为止，最好的解决方案是将声明 ( `extern int const n;`) 放在头文件中，并将其包含在两个`a.cpp`和`b.cpp`中。链接由编译器看到的第一个声明确定，因此后面的定义 `a.cpp`将具有正确的（外部）链接。

或者，您可以强制定义中的链接：

```
extern int const n = 8; 
```

尽管如此`extern`，这仍然是一个定义；任何在类定义之外带有初始化器的东西都是定义。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-15T12:39:53.503

`const`如果 C++ 中的和变量未声明（在定义中或在先前的声明中），`constexpr`则它们具有内部链接（因此在其他编译单元中不可访问）。`extern`

在 C 中，情况并非如此（C 没有`constexpr`），因此您的代码是有效的，并且您可以添加更多`extern`定义。

因此，如果您想编写同时是 C 和 C++ 的代码（并且这两个声明可能应该来自 James 指出的同一个标头）：

```
// a.cpp
extern const int n;
const int n = 8;

// b.cpp
extern const int n;

int main()
{

    int m = n; 
} 
```

如果你不

```
// a.cpp
extern const int n = 8; 
```

也是可以的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T12:28:52.337

在 a.cpp 中声明它为 extern，并在 b.cpp 中不使用 extern：

啊

```
extern const int n ; 
```

a.cpp

```
#include "a.h"
...
const int n= 8 
```

b.cpp：

```
#include "a.h"
...

int main()
{        
    int m = n; 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T12:44:06.587

`To share a const object among multiple files, you must define the variable as extern.`

```
To define a single instance of a const variable, we use the keyword extern on both its definition and declaration(s): 
```

From these rules you just need to add the `extern` keyword in your definition. you already have it in declaration.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-26T16:50:54.460

如果此处的其他答案不能解决问题，则可能是您在不同的命名空间中有定义......如果编译通过，并且您收到`undefined symbol`链接器错误：

*   检查未定义符号的命名空间；这是声明的有效命名空间 `extern const int n`。
*   确保这是您进行`const int n = 8`定义的有效命名空间。

# r - 如何使用 RGtk2 异步运行函数

> ID：14894702
> 
> 赞同：1
> 
> 时间：2013-02-15T12:24:42.537
> 
> 标签：r, user-interface, asynchronous, gtk

正如标题所暗示的，我希望能够在使用 RGtk2 创建的 GUI 中异步运行函数。

该函数本身是系统命令的 R 包装器，因此大部分处理时间用于 system() 调用，处理时间可以从 10 分钟到一个小时不等。我希望 GUI 在那个时期仍然能够响应。

由于现在该函数被放入 gSignalConnect(GtkButton, 'clicked') 中，因此 GUI 的其余部分没有响应，直到 'clicked' 信号终止。

有人知道这是否可能吗？

最好的托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:52:23.740

可能有更直接的方法，但我认为你可以这样做`gTimeoutAdd`：

```
library(RGtk2)

w <- gtkWindow()
g <- gtkVBox(); w$add(g)
b1 <- gtkButton("Start timer"); g$packStart(b1)
b2 <- gtkButton("click me"); g$packStart(b2)

gSignalConnect(b1, "clicked", function(...) {
  id <- gTimeoutAdd(1, function(...) {
    Sys.sleep(5)                        # replace me
    message("Okay, I'm up")
    FALSE                               # one shot
  })
})
gSignalConnect(b2, "clicked", function(...) message('clicked me')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:50:35.037

什么可能有效（尽管没有经过测试，而且我对 RGtk 不太熟悉，所以不能保证）是在调用中使用该`wait=FALSE`选项。`system`然后异步执行系统调用。在您的 gtk GUI 中，您必须定期检查您的系统调用是否已完成。我相信使用 RGtk 可以使用定期调用的函数（从[RGtk 的文档中](http://www.omegahat.org/RGtk/Docs/overview.pdf)这可能是`gtkTimeoutAdd()`）。

# html - 带有页眉、页脚和多列滚动的 CSS 布局

> ID：14894705
> 
> 赞同：0
> 
> 时间：2013-02-15T12:24:52.287
> 
> 标签：html, css, multiple-columns

我正在尝试创建一个网页布局模板，我的目标是页眉、页脚和 2 列之间，2 列是最让我头疼的，我希望左列是固定宽度，右列填充剩下的区域，我也成功完成了这个。但我也希望两列也垂直填充下雨空间，当内容填充的空间超过空间时，我希望每列分别被责骂，而不是使用正常的浏览器滚动条

我当前的html代码如下

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1 /DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
    <link rel="stylesheet" type="text/css" href="./style/default/style.css" />
</head>
<body>
  <div class="container">
    <div class="header">
     HEADER
    </div>
    <div class="content">
      <div class="content-contain">
        <div id="content-col1">
         COLUMN 1
        </div>
        <div id="content-col2">
         COLUMN 2
        </div>
      </div>
    </div>
  </div>
<div class="footer">
  FOOTER
</div>
</body>
</html> 
```

CSS

```
* {
  margin: auto;
}

html, body {
  height: 99%;
  background-color: #FFFFFF;
  font-family:sans-serif;
}

.container {
  min-height: 100%;
  height: auto !important;
  height: 99%;
  margin: 0 auto -1em; 
}

.header {
  color:#FFFFFF;
  background-color:blue;
  border-bottom:3px solid blue;
}

div#content-col1{
  float:left;
  width:220px;
  padding:3px;
  display:block;
  padding-left:5px;
  overflow-y: auto; 
  background-color: red;
}

div#content-col2{
  margin-left: 230px;
  margin-bottom:40px;
  padding: 3px;
  overflow-y: auto;
  background-color: green; 
}

.footer {
  background-color:yellow;
  clear:both;
} 
```

如果有人有更好的或知道我可以做些什么来成功完成这项工作，请告诉我

贵宾32

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:31:07.987

要使用固定的两列填充整个宽度，请参阅[此问题](https://stackoverflow.com/questions/14871863/loosing-elements-positions-with-css/14871970#14871970)。

垂直填充有点不同。默认情况下，`body`and`block`元素具有动态高度。因为它`body`也是动态的，所以您必须设置它的高度以使内容也垂直填充。

```
body, div#container, ... { height: 100%; } 
```

有些人认为最好也对`html`元素应用高度。我有疑问，因为该标签不可见。

如果您有一个元素也需要一些高度，例如页眉或页脚，请参考[固定宽度的相同解决方案，](https://stackoverflow.com/questions/14871863/loosing-elements-positions-with-css/14871970#14871970)但将其应用于高度。

# c# - 在运行时创建控件

> ID：14894712
> 
> 赞同：1
> 
> 时间：2013-02-15T12:25:01.223
> 
> 标签：c#, .net, textbox, foreach

我无法从中获取`textboxes`在运行时创建的值。

我希望用户从 a 中选择一些东西`checkedlistbox`，并输入他想要的任何值，这些值`textboxes`是在每次单击按钮时创建的。

我怎样才能得到那些的名字`texboxes`？它们真的存在吗？我是初学者，我真的不明白它们是如何创建的。

这是我创建的代码`textboxes`。

```
 private void checkedListBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        int x = 466;
        int y = 84;
        foreach (var itemChecked in checkedListBox1.CheckedItems)
        {
            int i = 0;
            TextBox tb = new TextBox();
            tb.Location = new Point(x, y);
            tb.Name = "txtBox" + i++.ToString();
            Controls.Add(tb);
            y += 30;
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:27:06.160

只需将`i`外部放置`foreach`并完成。

```
int i = 0;
foreach (var itemChecked in checkedListBox1.CheckedItems)
{
    i++;
    string textBoxName = "textBox" + i.ToString();
    TextBox tb = new TextBox();
    tb.Location = new Point(x, y);
    //tb.Name = "txtBox" + i++.ToString(); <--Your Version
    tb.Name = textBoxName;
    //...
    //Other stuff or your codes
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:55:14.330

您可以做的不是搜索确切的名称，而是使用一个字符串（固定）来搜索控件。

因此，如果您找到该字符串（在您的情况下是 'textbox' ），您可以做的是以控件的名称搜索该固定字符串。如果它存在，那么它是动态生成的控件。

```
foreach(Control c in parentControlIdOrName.Controls)
{
    if(c.GetType()==typeof(TextBox))
    {
        if(((TextBox)c).Name.indexOf("textbox")!=-1)
        {
            // do your coding here...what ever you want....
        }
    }
} 
```

还没测试，希望最好。它可能会起作用。

# mongodb - MongoDB 如何处理嵌套在数组中的对象属性的复合索引？

> ID：14894714
> 
> 赞同：3
> 
> 时间：2013-02-15T12:25:11.370
> 
> 标签：mongodb

我了解[复合多键索引可能仅包含一个数组字段](http://docs.mongodb.org/manual/core/indexes/#multikey-indexes)。

以下不会产生“无法索引并行数组”错误：

```
db.test.ensureIndex({"values.x": 1, "values.y": 1})

db.test.insert({"values": [ {"x": 1, "y": 2}, {"x": 2, "y": 2} ]})
db.test.insert({"values": [ {"x": 2, "y": 1}, {"x": 1, "y": 1} ]})
db.test.insert({"values": [ {"x": 1, "y": 1}, {"x": 1, "y": 1} ]}) 
```

因此，在对象嵌套在一个数组字段中的多个对象属性上，似乎允许使用复合索引。

文档说“MongoDB 分别索引数组中的每个值”，因此对于上述场景，我希望为每个文档中的 values.x 和 values.y 的所有组合创建索引条目。

但是，以下对两个嵌套字段的查询表明仅使用复合索引中的第一个字段 - nscanned 为 2 表明 Mongo 必须检查第二个添加的文档以检查与 x = 匹配的数组元素上的 y = 2 2.

```
db.test.find({"values.x": 2, "values.y": 2}).explain()
{
    "cursor" : "BtreeCursor values.x_1_values.y_1",
    "isMultiKey" : true,
    "n" : 1,
    "nscannedObjects" : 2,
    "nscanned" : 2,
    "nscannedObjectsAllPlans" : 2,
    "nscannedAllPlans" : 2,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {
            "values.x" : [
                    [
                            2,
                            2
                    ]
            ],
            "values.y" : [
                    [
                            {
                                    "$minElement" : 1
                            },
                            {
                                    "$maxElement" : 1
                            }
                    ]
            ]
    },
    "server" : "localhost:27017"
} 
```

MongoDB 索引和复合索引对仅覆盖第一个字段的值有什么价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T17:50:36.877

如果您使用[$elemMatch](http://docs.mongodb.org/manual/reference/operator/elemMatch/)查询运算符在同一元素中搜索`x`和`y`值，您会看到索引边界也适用于`y`：

```
> db.test.find({ values: { $elemMatch: { x: 2, y: 2 }}}).explain()
{
    "cursor" : "BtreeCursor values.x_1_values.y_1",
    "isMultiKey" : true,
    "n" : 1,
    "nscannedObjects" : 1,
    "nscanned" : 1,
    "nscannedObjectsAllPlans" : 1,
    "nscannedAllPlans" : 1,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {
        "values.x" : [
            [
                2,
                2
            ]
        ],
        "values.y" : [
            [
                2,
                2
            ]
        ]
    },
    "server" : "localhost:27017"
} 
```

[这是在SERVER-3104](https://jira.mongodb.org/browse/SERVER-3104)中为 2.4 实现的。票证说明解释了为什么这些索引范围不能用于您的原始查询：

> 在多个字段上创建复合索引时，Mongo 不会计算笛卡尔积。如果根据 index 对文档`{ a:[ { b:1, c:2 }, { b:10, c:20 } ] }`进行索引`{ 'a.b':1, 'a.c':1 }`，则创建的索引键是`{ '':1, '':2 }`和`{ '':10, '':20 }`。（例如，没有索引键 { '':1, '':20 }。）
> 
> 现在，假设我们有一个查询`{ 'a.b':1, 'a.c':20 }`。该查询应该与文档匹配，因为文档中存在 'ab' 值为 1，而文档中存在 'ac' 值为 20。但是，没有索引键在“ab”位置包含 1，在“ac”位置包含 20。因此，'ab' 上的索引范围将是`[[ 1, 1 ]]`，但 'ac' 上不会有任何索引范围。这意味着`{ '':1, '':2 }`将检索索引键并用于查找完整文档，并且匹配器将确定完整文档与查询匹配

# codeigniter - 在 Codeigniter 中发布变量

> ID：14894724
> 
> 赞同：0
> 
> 时间：2013-02-15T12:25:51.353
> 
> 标签：codeigniter

我在 Codeigniter 中有一个视图，它是一种直接用 HTML 编写的表单。

```
<form action="http://localhost/index.php/cindice/mostrar" mehtod="post">
<label for="usuario" id="usr">Usuario</label>
<input type="text" name="usuario" /><br /><br />
<label for="contrasenya" id="ctr">Contrase&ntilde;a</label>
<input type="password" name="contrasenya" id="ctr" />
<label for="acceder"></label><br /><br />
<input type="submit" name="acceder" id="bacceder" value="Entrar" /> 
</form> 
```

该表单有两个字段：usuario（用户）和 contraseña（密码）。

它是控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Cindice extends CI_Controller {

function __construct() {
    parent::__construct();
}

public function index()
{
    $this->load->view('indice');
}

public function mostrar()
{
    $mostrar=$this->input->post('usuario');
    print_r($_POST);
    echo "<br />";

}

 }
?> 
```

当我加载页面 localhost/index/cindice 并编写用户名和密码时。但是 print_r($_POST) 命令的结果是 array()，这意味着任何值都保存在表单中。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:32:49.637

我认为它是空的，因为您在开始表单标记中拼写了**方法**属性错误。你放了

```
<form action="http://localhost/index.php/cindice/mostrar" mehtod="post"> 
```

什么时候应该

```
<form action="http://localhost/index.php/cindice/mostrar" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:50:32.670

请注意，如果您在配置中打开了 CSRF - 如果是，那么您需要使用 codeigniter 表单助手和 form_open() 以便添加隐藏的安全值。

# ruby-on-rails - 项目文件中的语法错误仅在我的系统中

> ID：14894725
> 
> 赞同：0
> 
> 时间：2013-02-15T12:25:53.967
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我的系统中的 ruby​​ 文件中出现语法错误，尽管其他系统中没有这些错误。

**错误在代码中，例如：**

1)`redirect_to :back, alert: exception.message`

语法错误在`alert`

2)`load_and_authorize_resource only: [ :update, :destroy ]`

语法错误在`only`

3)`render json: @reward.to_json`

语法错误在`json`

像这样有很多错误。

**我通过对上述内容进行以下更改来消除这些错误：**

1)`redirect_to :back, :alert => exception.message`

2)`load_and_authorize_resource :only => [ :update, :destroy ]`

3)`render :json => @reward.to_json`

似乎错误是由于 ruby​​ 版本引起的，但我不确定正确的原因是什么？

我需要在每个现有项目中进行所有这些更改，这非常痛苦。

这是否意味着项目正在使用旧的 ruby​​ 语法，或者这是否意味着我安装了旧的 ruby​​ 版本？

我的红宝石版本是`ruby 1.9.2p180`

此外，如果它的 ruby​​ 版本问题比 ruby​​ 升级到最新版本会影响整个项目，如何轻松完成？

更新：

我确认我的 ruby​​ 版本是`ruby 1.9.2p180`因为以下原因：

```
D:\ruby_work>ruby -v
  ruby 1.9.2p180 (2011-02-18) [i386-mingw32]

D:\ruby_work>pik list
  187: ruby 1.8.7 (2010-06-23 patchlevel 299) [i386-mingw32]
* 192: ruby 1.9.2p180 (2011-02-18) [i386-mingw32] 
```

上面的星号（*）表示我当前使用的版本。

确切的错误例如是 `redirect_to :back, :alert => exception.message`-

```
, unexpected ':' 
```

更新：

现在我做到了——

```
D:\ruby_work>pik use 187

D:\ruby_work>pik list
* 187: ruby 1.8.7 (2010-06-23 patchlevel 299) [i386-mingw32]
  192: ruby 1.9.2p180 (2011-02-18) [i386-mingw32]

D:\ruby_work>ruby -v
ruby 1.8.7 (2010-06-23 patchlevel 299) [i386-mingw32] 
```

错误仍然存​​在。现在我怀疑这真的是一个 ruby​​ 错误，因为更改为旧的 ruby​​ 版本也显示相同的语法错误。唯一的区别是，现在即使从`:key`to更改`key =>`也显示相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:35:00.490

旧版本的 Ruby 不理解 , 的散列符号`key: value`，只有`:key => value`1.9+ 可以理解。

我不记得何时添加了新符号，但是，正如您所发现的，允许代码在旧版本上运行的修复方法是使用原始符号。

* * *

在 Ruby 1.8.7 中，这是我使用 IRB 时遇到的错误：

```
irb(main):001:0> foo = {a:'b'}
SyntaxError：编译错误
(irb):1: 语法错误，意外 tSYMBEG，期待 kDO 或 '{' 或 '('
foo = {a:'b'}
          ^
(irb):1: 语法错误，意外的 '}'，期待 $end
    来自 (irb):1
irb(main):002:0> foo = {:a => 'b'}
=> {:a=>"b"}

```

# wpf - 在 WPF 的 LISTVIEW 中按字母数字对列进行排序

> ID：14894730
> 
> 赞同：-1
> 
> 时间：2013-02-15T12:26:15.373
> 
> 标签：wpf, wpf-controls, wpfdatagrid, wpftoolkit

我们有 WPF 应用程序，其中我们是一种形式的 ListView，我们想按字母数字顺序订购项目。

当我们对列进行排序时，它需要对字母数字 EG 进行排序

AW1 AW2 AW3

目前正在排序

AW1 AW100 AW2 AW200

那么需要改变什么？

```
 if (lastDirection == ListSortDirection.Ascending)
                    {
                        direction = ListSortDirection.Descending;
                    }
                    else
                    {
                        direction = ListSortDirection.Ascending;
                    } 
```

和

```
 // get the sort property name from the column's information.
                string sortPropertyName = sortableGridViewColumn.SortPropertyName;

                // Sort the data.
                Sort(sortPropertyName, direction); 
```

像这样的排序功能，

```
private void Sort(string sortBy, ListSortDirection direction)
    {
        lastDirection = direction;
        ICollectionView dataView = CollectionViewSource.GetDefaultView(this.ItemsSource);

        dataView.SortDescriptions.Clear();
        SortDescription sd = new SortDescription(sortBy, direction);

        dataView.SortDescriptions.Add(sd);
        dataView.Refresh();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:53:14.433

字符串比较是从左到右逐个字符进行的。因此，如果您将列名更改为**AW001**、 AW100 、**AW002**、 AW200 ，您的排序将正常工作。

# mysql - 寻找共同的朋友列表

> ID：14894735
> 
> 赞同：0
> 
> 时间：2013-02-15T12:26:50.693
> 
> 标签：mysql, doctrine-orm

这是我的数据库的架构：

```
id | user1 | user2 | status  //status 1 means the user is a friend
 1     1       2      1
 2     3       1      1    
 3     1       4      1
 4     2       3      1
 5     4       2      1 
```

在上面的例子中

1.  userId 1 有 3 个朋友 2,3,4
2.  userId 2 有 3 个朋友，即。3,4,1
3.  userId 3 有 2 个朋友，即：1,2
4.  userId 4 有 2 个朋友，即：1,2

我需要在 2 个人之间找到共同的朋友。

有任何想法吗，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:56:20.680

我不确定这是否是最好的解决方案。但也许是这样的：

```
SELECT
    *
FROM
(
    SELECT
        CASE WHEN t2.user1=1 THEN t2.user2 ELSE t2.user1 END AS userId
    FROM
        t AS t2
    WHERE 1 IN (t2.user1,t2.user2)
    AND t2.[status]=1
) as tbl
WHERE EXISTS 
(
    SELECT
        NULL
    FROM
        t
    WHERE 2 IN (t.user1,t.user2)
    AND tbl.userId=(CASE WHEN t.user1=2 THEN t.user2 ELSE t.user1 END)
    AND t.[status]=1
) 
```

这会从用户 1 和 2 获得共同的朋友。这是 3,4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:00:18.427

据我所见，这个查询就足够了。其中 {x} 是 userA 而 {y} 是 userB

```
select user2 
from friends
where user1 = {x}
and status = 1
and user2 in (
 select user2 
 from friends
 where user1 = {y}
 and status = 1
) 
```

# linux - 在文件中搜索字符串，然后打印以该字符串开头的行

> ID：14894736
> 
> 赞同：0
> 
> 时间：2013-02-15T12:26:52.540
> 
> 标签：linux, bash

我有一个任务，但我不知道何时管理文件、阅读和写作。这是我的主要问题：

我有一个管理地址簿的脚本，在菜单完成的那一刻，正在使用功能，但我不知道如何搜索或编写文件。

第一个“选项”为用户提供了按联系人姓名搜索通讯录的选项（呃！）。我想使用的模式类似于“姓名：地址：电子邮件：电话”，让用户在姓名、地址而不是电子邮件或电话中输入空格，最后一个中只有数字。我相信我可以使用正则表达式来实现这一点，我从 Java 课程中对此有所了解。

那我该怎么做呢？我知道`grep`可能有用，但即使在阅读手册页后我也不知道参数。可以逐行解析，`for line in $(file)`但仍不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:29:23.150

这是一种方法：

```
grep "^something" $file | while read line 
do 
    echo $line;   #do whatever you want with your $line here
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:32:13.653

如果您被允许使用`grep`，那么您可能会使用`awk`，这就是我在您的大部分作业中希望使用的。

按姓名查找联系人：

```
awk -v name="Anton Kovalenko" -F: '$1==name' "$file" 
```

# ios - 具有自定义单元格和标签的 heightForRowAtIndexPath

> ID：14894738
> 
> 赞同：2
> 
> 时间：2013-02-15T12:27:13.337
> 
> 标签：ios, objective-c, uitableview, heightforrowatindexpath

如果我正在定制`UITableViewCell`并且我需要它根据输入的长度（例如，对于 Twitter 阅读器或其他东西）具有可变的高度，我怎样才能使它工作？

我在这里找到了许多其他示例，可以将其设置为标准的非自定义单元格，但我的单元格的主文本标签更小，等等，所以当我尝试在我的单元格上使用这些方法中的任何一种时，它们给出各种奇怪的结果（文本与单元格底部重叠等）

是否有设计单元格的标准化方法（例如，我应该在 Interface Builder 中制作多高？），假设我的标签是该单元格宽度的一半。我将如何计算单元格的高度需要显示加载到该标签中的字符串吗？这是我在这里找到的一种方法，它在普通单元格上运行良好，但是用奇怪的高度、重叠的文本等搞砸了自定义的：（我完全不知道 300 / 200000 在这里做什么，如果有人能解释一下我'我也感激不尽！）

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    CGSize  textSize = {300.f, 200000.0f};
    CGSize  size = [[_quoteStringsFromPlist objectAtIndex: indexPath.row] sizeWithFont: [UIFont systemFontOfSize:12.0f] constrainedToSize: textSize lineBreakMode: NSLineBreakByWordWrapping];
    size.height += 5.0f;
    float result = MAX(size.height, 32.0f);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:35:26.547

首先，转到您的 xib 文件，查看文本区域的顶部/底部边距有多大，以及它有多宽。

之后，您需要使用可用的宽度计算它所需的高度，然后将该值添加到文本区域已有的顶部/底部边距。

无论 IB 中每个单元格的大小或您尝试放入其中的文本如何，结果都应该看起来正确。

**编辑**

想象一下您的单元格大小`{700, 300}`在您的 IB 中，并且您的文本区域位于 上`{{100, 100}, {300,100}}`，您的文本区域的顶部边距为 100px，bot 的边距为 100px，宽度为 300。

当您计算文本所需的高度时，您会使用可用的 300 宽度来计算它。它将返回一个大小，例如 {300, 250}。250 是您的文本所需的高度，但您的单元格中还有其他内容，您需要将这些顶部和底部边距添加到该高度，因此结果为 450。

请记住设置自动调整大小的蒙版或自动布局，以便您的文本区域垂直拉伸并且边距固定 ( `UIViewAutoresizingFlexibleHeight`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:52:31.287

像这样的东西应该工作。

```
CGRect labelFrame = // enter default frame of the label here
UIFont *labelFont = // enter label font here
CGFloat labelBottomMargin = // enter the space between the bottom of the label and the bottom of the cell here

CGSize  size = [labelString sizeWithFont:labelFont constrainedToSize:CGSizeMake(labelFrame.size.width, MAX_FLOAT)];
size.height += labeFrame.origin.y;
size.height += labelBottomMargin;
size.height = MAX(size.height, 32.0f);
return size.height; 
```

# c# - 如何使用正则表达式忽略双引号内的 \t 字符？

> ID：14894742
> 
> 赞同：0
> 
> 时间：2013-02-15T12:27:38.930
> 
> 标签：c#, regex, double-quotes, csv

我正在尝试使用正则表达式拆分来解析文件，它适用于`'\t'`字符，但有些行在`'\t'`字段内部而不是作为分隔符。

喜欢 ：

```
G2226   TEST 1  C   29  Internal Head Office    D   Head Office ZZZ Unassigned  10910   10/10/2011  11/10/2011  10/10/2011  11/10/2011  "Test call  Sort the customer out some data. See the customer again tomorrow to talk about Prod     "   Mr ABC          Mr ABC                  Mr  ABC Mr  ABC Credit Requested    BDM Call    Internal Note   10 
```

这部分有 2 个标签，我希望被忽略：

```
"Test call  Sort the customer out some data. See the customer again tomorrow to talk about Prod\t\t" 
```

好消息是，它们包含在双引号中，但我不知道如何忽略它们，有什么想法吗？

编辑：

我的目标是获得 36 列，`Regex.Split(lineString,'\t')`使用后某些列可能会出现更多，`'\t'`因为它们`'\t'`在某些字段中包含字符。我想忽略那些。上面的结果是 38 列，我的数据表拒绝了，因为标题只有 36 列，我想解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:47:07.227

如果您有一个简单的 CSV 文件，那么正则表达式拆分通常是处理它的最简单方法。

但是，如果您的 CSV 文件包含更复杂的元素，例如包含分隔符或换行符的引用字段，则此方法将不再有效。正确解析这些类型的文件并非易事，因此您应该尽可能使用库。

[这个问题](https://stackoverflow.com/questions/1375410/very-simple-c-sharp-csv-reader)的答案为可以读取 CSV 文件的 C# 库提供了几个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:47:29.393

如果你真的需要一个正则表达式，你可以尝试这样的事情：

```
(?!\t")\t(?!\t") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:40:23.010

正则表达式不是正确的工具。

您基本上具有 CSV 格式，它是“制表符分隔”，而不是“逗号分隔”，但它的工作原理完全相同。因此，找到一个[CSV 解析器](https://stackoverflow.com/questions/906841/csv-parser-reader-for-c)并使用它 - 分隔字符通常是可配置的。

# android - 使用 KSoap 库使用 .NET Web 服务时出错

> ID：14894751
> 
> 赞同：2
> 
> 时间：2013-02-15T12:27:53.080
> 
> 标签：android, ksoap

我一直在使用 ksoap 库来使用 .net Web 服务。我收到这种错误

> “预期：START_TAG { [http://schemas.xmlsoap.org/soap/envelope/](http://schemas.xmlsoap.org/soap/envelope/) }信封（位置：START_TAG @1:7 in java.io.InputStreamReader@40d0c7d8）”

我到处搜索，但找不到任何好的帮助。

这是我尝试使用 Web 服务的代码。

```
public class WebInvoke {

    private static final String NAMESPACE = "http://tempuri.org/" ;
    private static final String METHOD_NAME = "login";
    private static final String SOAP_ACTION = NAMESPACE + METHOD_NAME;
    private static final String URL = "http://10.0.2.2/Service1.asmx";
    private final SoapSerializationEnvelope envelope;

    public WebInvoke()
    {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo quotesProperty = new PropertyInfo();
        quotesProperty.setName("UserName");
        quotesProperty.setValue("admin");
        quotesProperty.setType(String.class);
        request.addProperty(quotesProperty);

        quotesProperty = new PropertyInfo();
        quotesProperty.setName("Password");
        quotesProperty.setValue("a");
        quotesProperty.setType(String.class);
        request.addProperty(quotesProperty);

        Log.e("Request Assign", request.toString());
        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        Log.e("Envelope Assign", envelope.toString());
    }
    public String Fetch()
    {
        String result = "";
        HttpTransportSE httpRequest = new HttpTransportSE(URL);
        try
        {
            envelope.xsd = SoapSerializationEnvelope.XSD;
            envelope.enc = SoapSerializationEnvelope.ENC;

            httpRequest.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");

             Log.e("httpRequest.call", "httpRequest.call");
            httpRequest.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            result =  response.toString();
        }
        catch(Exception e)
        {
            //e.printStackTrace();
            Log.e("httpRequest.call Exception", e.getMessage());
        }
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:41:51.897

尝试并获得更好的代码。你的代码听起来有点笨拙。

> [“org.xmlpull.v1.XmlPullParserException：预期：START_TAG”错误](https://stackoverflow.com/questions/5791337/org-xmlpull-v1-xmlpullparserexception-) 预期-开始-标签-错误

查一下这个。

2.  使用 .netcode 检查您的方法名称和 url

3.  排除 C# appcode 文件中的 app_html.offline，因为它不允许任何数据库项目运行。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T01:41:59.217

我也遇到了这个错误。最终，它通过设置这些值得到了修复：

```
String SOAP_ACTION = "BookTypeService";

String METHOD_NAME = "bookType";

String NAMESPACE = "http://192.168.1.3:8080/MyWebService/services/";

String URL = "http://192.168.1.3:8080/MyWebService/services/BookTypeService"; 
```

其中，192.168.1.3 是我的本地 I/P。

```
<wsdl:service name="BookTypeServiceService">
<wsdl:port name="BookTypeService" binding="impl:BookTypeServiceSoapBinding">
<wsdlsoap:address location="http://localhost:8080/MyWebService/services/BookTypeService"/>
</wsdl:port>
</wsdl:service> 
```

# html - 单击链接时如何更改 HTML 表格的高度？

> ID：14894755
> 
> 赞同：3
> 
> 时间：2013-02-15T12:28:09.177
> 
> 标签：html, css, css-transitions

嗨，我想通过单击按钮在 2 秒内将 HTML 表格的高度从 690 更改为 400。有没有办法在纯 CSS 中做到这一点？这是我的例子：

```
<html>
<head>
<title>Test</title>
</head>
<body>
<table>
<tr>
<td>
<button type="button">Click Me!</button>
</td>
</tr>
<tr>
<td height="690" width="1280> <--- This cell needs it height to change to 400px when the button is clicked.
Cell 1
</td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:32:58.793

你不能纯粹用`CSS`来做到这一点，但是你可以很容易地做到这一点`jQuery`：

```
// Use a more specific selector by ID or class
$('button').click(function (event) {
    $(this).closest('tr').next().children('td:first').animate({height: 400}, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:32:52.163

您将需要使用 Javascript。采用`function click() { document.getElementById('id').setProperty('style', 'height:100px;'); }`

对于按钮使用这个 -`<button onclick="click();">BUTTON</button>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:36:14.277

给按钮（clickbut）和表格（tableheight）提供id然后使用jquery

```
$(document).ready(function(){
  $("#clickbut").click(function(){
    $("#tableheight").css('height','somevalue eg:300px');
  });
}); 
```

# java - 专门用于下载图像和文件的网络爬虫

> ID：14894761
> 
> 赞同：2
> 
> 时间：2013-02-15T12:28:32.277
> 
> 标签：java, html-parsing, jsoup, web-crawler

我正在为我的一门课做作业。

我应该编写一个网络爬虫，从给定指定爬网深度的网站下载文件和图像。

我被允许使用第三方解析 api，所以我使用**Jsoup**。我也试过**htmlparser**。两个不错的软件，但它们并不完美。

我在处理 url 之前使用了**默认的 java URLConnection**来检查内容类型，但是随着链接数量的增加，它变得非常慢。

**问题：任何人都知道任何专门用于图像和链接的解析器 API 吗？**

我可以开始使用 Jsoup 编写我的，但我很懒。此外，如果有可行的解决方案，为什么还要重新发明轮子？任何帮助，将不胜感激。

我需要在循环遍历链接时检查 contentType 以检查链接是否指向文件，以一种有效的方式，但 Jsoup 没有我需要的内容。这是我所拥有的：**

```
 HttpConnection mimeConn =null;
    Response mimeResponse = null;
    for(Element link: links){

        String linkurl =link.absUrl("href");
        if(!linkurl.contains("#")){

            if(DownloadRepository.curlExists(link.absUrl("href"))){
                continue;
            }

            mimeConn = (HttpConnection) Jsoup.connect(linkurl);
            mimeConn.ignoreContentType(true);
            mimeConn.ignoreHttpErrors(true);
            mimeResponse =(Response) mimeConn.execute();

            WebUrl webUrl = new WebUrl(linkurl,currentDepth+1);
            String contentType = mimeResponse.contentType();

            if(contentType.contains("html")){
                page.addToCrawledPages(new WebPage(webUrl));
            }else if(contentType.contains("image")){                    
                page.addToImages(new WebImage(webUrl));
            }else{
                page.addToFiles(new WebFile(webUrl));
            }

            DownloadRepository.addCrawledURL(linkurl);

        }** 
```

**更新** 根据 Yoshi 的回答，我能够让我的代码正常工作。这是链接：

[https://github.com/unekwu/cs_nemesis/blob/master/crawler/crawler/src/cu/cs/cpsc215/project1/parser/Parser.java](https://github.com/unekwu/cs_nemesis/blob/master/crawler/crawler/src/cu/cs/cpsc215/project1/parser/Parser.java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:45:13.653

使用[jSoup](http://jsoup.org/)我认为这个 API 足以满足您的目的。你也可以在这个网站上找到好的食谱。

几个步骤：

1.  [Jsoup：如何获取图片的绝对网址？](https://stackoverflow.com/questions/4875064/jsoup-how-to-get-an-images-absolute-url)
2.  [如何从java中的任何网页下载图像](https://stackoverflow.com/questions/5882005/how-to-download-image-from-any-web-page-in-java)
3.  您可以编写自己的递归方法，遍历包含必要域名或相关链接的页面上的链接。使用这种方式抓取所有链接并找到其上的所有图像。自己写，这不是坏习惯。

你不需要使用 URLConnection 类，jSoup 有它的包装器。

**例如**

您可以只使用一行代码来获取 DOM 对象：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get(); 
```

而不是这段代码：

```
 URL oracle = new URL("http://www.oracle.com/");
    URLConnection yc = oracle.openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(
                                yc.getInputStream()));
    String inputLine;
    while ((inputLine = in.readLine()) != null) 
        System.out.println(inputLine);
    in.close(); 
```

**Update1** 尝试在您的代码中添加下一行：

```
Connection.Response res = Jsoup.connect("http://en.wikipedia.org/").execute();
String pageContentType = res.contentType(); 
```

# git - 在 git 中，fetch 与 pull 有何不同，merge 与 rebase 有何不同？

> ID：14894768
> 
> 赞同：170
> 
> 时间：2013-02-15T12:28:55.153
> 
> 标签：git

我只是无法理解这一点。我在网上和书籍上阅读了很多内容，但有些东西并没有留在我的脑海中。有人可以给我以下的虚拟版本：

*   git fetch vs 拉取
*   git 合并与变基

* * *

## 回答 #1

> 赞同：439
> 
> 时间：2013-02-15T13:14:49.153

## 获取与拉取

`fetch`将从远程* 分支下载任何更改，更新您的存储库数据，但保持本地* 分支不变。

`pull`将对您的本地分支执行`fetch`和另外`merge`的更改。

**有什么不同？** `pull`使用拉取分支的更改更新您的本地分支。A`fetch`不会推进您当地的分支机构。

## 合并与变基

鉴于以下历史：

```
          C---D---E 本地
         /
    A---B---F---G 遥控器

```

`merge`将两个发展历史结合在一起。它通过在远程分支上分歧后重放本地分支上发生的更改来做到这一点，并将结果记录在新的提交中。此操作保留每个提交的祖先。

a 的效果`merge`是：

```
          C---D---E 本地
         / \
    A---B---F---G---H 遥控

```

`rebase`将接受本地分支中存在的提交并将它们重新应用到远程分支之上。此操作会重写本地提交的祖先。

a 的效果`rebase`是：

```
                  C'--D'--E' 局部
                 /
    A---B---F---G 遥控器

```

**有什么不同？**A`merge`不会改变提交的祖先。A`rebase` 重写本地提交的祖先。

`*`此解释假定当前分支是本地分支，并且指定为 、 、 或 的参数的分支`fetch`是`pull`远程`merge`分支`rebase`。这是通常的情况。`pull`，例如，将从*指定*分支下载任何更改，更新您的存储库并将`merge`更改更新到*当前*分支。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-15T12:38:12.580

获取与拉取

Git fetch 只是更新你的 repo 数据，但是 git pull 基本上会执行 fetch 然后合并提取的分支

[“git pull”和“git fetch”有什么区别？](https://stackoverflow.com/questions/292357/whats-the-difference-between-git-pull-and-git-fetch)

* * *

合并与变基

来自 Atlassian SourceTree 博客，[合并或](http://blog.sourcetreeapp.com/2012/08/21/merge-or-rebase/)变基：

> 合并将两条开发线结合在一起，同时保留每个提交历史的祖先。
> 
> 相比之下，变基通过重写源分支的更改来统一开发线，使它们显示为目标分支的子级 - 有效地假装这些提交一直写在目标分支的顶部。

另外，请查看[Learn Git Branching](http://pcottle.github.com/learnGitBranching/)，这是一款刚刚发布到 HackerNews（[帖子链接](http://news.ycombinator.com/item?id=5236409)）的不错的游戏，它教授了很多分支和合并技巧。我相信这对这件事会有很大帮助。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-15T13:17:09.837

*拉取 vs 获取*：

我理解这一点的方式是，这`git pull`只是 a`git fetch`后跟`git merge`. 即，您从远程分支获取更改，然后将其合并到当前分支中。

* * *

*合并与变基*：

合并将按照命令执行；合并当前分支和指定分支之间的差异（合并到当前分支中）。即命令`git merge another_branch`将合并`another_branch`到当前分支。

变基的工作方式有点不同，而且很酷。假设您执行命令`git rebase another_branch`。Git 会首先在当前分支和`another_branch`. 即分支分歧之前的点。然后 git 会将这个分歧点移动到`another_branch`. *最后，从新的分歧点重播*自原始分歧点以来当前分支中的所有提交。这创建了一个非常干净的历史记录，分支和合并更少。

然而，它并非没有陷阱！由于版本历史被“重写”，因此只有在提交仅存在于本地 git 存储库中时，才应执行此操作。也就是说：如果您已将提交推送到远程仓库，则*永远*不要这样做。

[这本](http://git-scm.com/book/en/Git-Branching-Rebasing)在线书籍中关于变基的解释非常好，带有易于理解的插图。

* * *

*使用变基而不是合并拉动*

我实际上经常使用 rebase，但通常它与 pull 结合使用：

```
git pull --rebase 
```

将获取远程更改，然后变基而不是合并。即它将重播您上次执行拉取时的所有本地提交。我发现这比使用合并进行正常拉取要干净得多，这将通过合并创建额外的提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-31T09:31:45.057

**合并**- HEAD 分支将生成一个新的提交，保留每个提交历史的祖先。如果合并提交是由多个在同一分支上并行工作的人进行的，那么历史可能会被污染。

**Rebase** - 将一个分支的更改重新写入另一个分支，而不创建新的提交。代码历史是简化的、线性的和可读的，但它不适用于拉取请求，因为你看不到有人做了什么细微的改变。

`git merge`在处理基于功能的工作流或我不熟悉 rebase 时，我会使用它。但是，如果我想要一个更干净、线性的历史，那么`git rebase`更合适。有关更多详细信息，请务必查看[此合并或变基文章](https://kolosek.com/git-merge-vs-rebase/)。

# javascript - 相对于目标元素的触摸事件偏移

> ID：14894772
> 
> 赞同：1
> 
> 时间：2013-02-15T12:29:03.723
> 
> 标签：javascript, touch, offset

我正在使用hammer.js 来处理我的触摸事件。我正在对画布元素执行缩放。通过触摸事件，我只能获得触摸事件相对于页面的偏移量，而不是相对于画布元素的偏移量。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:40:41.887

让它这样工作：

```
hammertime_zoomer.on("transform", function(evt) {               
    var c = dojo.position(evt.target);
    var c1 = c.x;
    var c2 = c.y;

    var p1 = evt.gesture.center.pageX;
    var p2 = evt.gesture.center.pageY;

    var x = p1 - c1;
    var y = p2 - c2;

    vp.zoomIt(x, y, evt.gesture.scale);
}); 
```

# audio - Mono的音频阅读库

> ID：14894774
> 
> 赞同：1
> 
> 时间：2013-02-15T12:29:11.213
> 
> 标签：audio, mono

我正在尝试使用原始音频数据来操作和播放 OpenAL。到目前为止，一切都很好，因为我已经编写了自己的 .wav 文件阅读器并且一直在使用它。但是，我的目标是让人们导入自己的音乐。这意味着我的程序应该支持各种音频格式和编解码器，至少包括 MP3、Ogg 和 FLAC。

现在与读取 .wav 文件不同，其他格式并不那么简单。现在我可以编写自己的阅读器和/或使用各种现有库的包装器，例如 libsnd 和 ogg 库，但我宁愿不重新发明轮子。所以我的问题是：是否已经有一个库允许从 Mono 中的各种格式获取原始字节音频数据？

我看过 NAudio，但它高度依赖于各种 Win32 API 调用，这对我来说是不行的，因为我打算让我的程序多平台。目前我只关心获取数据用于读取和播放目的，我不打算操作、混合或任何其他类型的计算工作。

**编辑：** 我忘记的一个重要因素是许可。我更喜欢基于 MIT 的许可或其他允许我在商业软件中免费使用该库的开放许可。例如，BASS.Net 库是不可能的，因为许可库超出了我的预算。

**EDIT2：** irrKlang 不支持 Mono。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:22:59.473

在再次尝试 NAudio 之后，我注意到他们删除了对 Win32 API 的一些依赖项。我现在可以通过 Mono 成功加载 WAV 文件，并且有支持 FLAC 和 OGG 的扩展可用。由于许可问题，MP3 支持似乎仅适用于 Windows，但没关系。

# wordpress - 如何为带有问号的 URL 设置 301 重定向

> ID：14894780
> 
> 赞同：0
> 
> 时间：2013-02-15T12:29:27.570
> 
> 标签：wordpress, apache, .htaccess, redirect, http-status-code-301

我遇到了一些关于 301 重定向和 htaccess 文件的问题。

我需要重定向以下网址：

```
http://www.domain.com/?specifications=colours/page/3 
```

至：

```
http://www.domain.com/colours 
```

我在 htaccess 文件中写的 301 重定向命令如下：

```
Redirect 301 /?specifications=colours/page/3 http://domain.com/colours 
```

它目前不起作用。在这里设置 301 重定向的正确方法是什么？

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:42:03.440

[`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html)仅适用于简单情况

> mod_alias 旨在处理简单的 URL 操作任务。对于操作查询字符串等更复杂的任务，请使用 mod_rewrite 提供的工具。

对于您的情况，您必须从查询字符串中提取部分并将其附加到您的根 URL

```
RewriteEngine On
RewriteCond %{QUERY_STRING} specifications=(.+?)/
RewriteRule ^$ http://www.domain.com/%1 [R,L] 
```

这会将所有访问重定向到带有`specifications=something/`to查询字符串的根 URL`http://www.domain.com/something`

# javascript - Highcharts 图表未在 IE9 中显示

> ID：14894781
> 
> 赞同：1
> 
> 时间：2013-02-15T12:29:31.150
> 
> 标签：javascript, internet-explorer, highcharts, timeserieschart

我用 highcharts 制作了一个时间序列图表。

它适用于 FF，但它不能在 IE9 中运行。这里可能是什么问题？

[http://jsfiddle.net/sbra/tcFju/](http://jsfiddle.net/sbra/tcFju/)

jsfiddle 上的完整代码：这里的代码段：

```
 $(function () {
   $(document).ready(function() {
   var jsData = JSON.parse('{"data":[{"dateTime":1035151200001,"value":0.737},{"dateTime":1358722800001,"value":1.374},{"dateTime":1359327600001,"value":1.374},{"dateTime":1360537200001,"value":1.38}]}'.valueOf());
   console.log(jsData);
   var chartData = [];
   for (i in jsData.data) {
   chartData.push( [ new Date(jsData.data[i].dateTime).getTime(), jsData.data[i].value ] );
   }
   chart = new Highcharts.Chart({
   chart: {
   renderTo: 'tsc_chartDiv',
   zoomType: 'x',
   spacingRight: 20,
   spacingLeft: 20,
   marginLeft: 200
   },
   title: {
   text: 'xyz'
   },
   subtitle: {
   text: document.ontouchstart === undefined ?
   'Click and drag in the plot area to zoom in' :
   'Drag your finger over the plot to zoom in'
   },
   credits: { text: '-.com', href: '' },
   xAxis: {
   type: 'datetime',
   maxZoom: '1209600000', // fourteen days
   title: {
   text: null
   }
   },
   yAxis: {
   title: {
   text: ''
   },
   plotBands: [{
   color: 'rgba(253, 195, 156, .6)',
   from: 1.5,
   label: {
   text: 'High'
   },
   to: 1000},
   {
   from: 1.4,
   label: {
   text: 'Normaal'
   },
   to: 1.5},
   {
   color: 'rgba(196, 243, 112, .6)',
   from: 0,
   label: {
   text: 'Low'
   },
   to: 1.4}],
   showFirstLabel: false
   },
   tooltip: {
   shared: true
   },
   legend: {
   enabled: true
   },
   plotOptions: {
   area: {
   fillColor: {
   linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
   stops: [
   [0, Highcharts.getOptions().colors[0]],
   [1, 'rgba(2,0,0,0)']
   ]
   },
   lineWidth: 1,
   marker: {
   enabled: false,
   states: {
   hover: {
   enabled: true,
   radius: 5
   }
   }
   },
   shadow: false,
   states: {
   hover: {
   lineWidth: 1
   }
   },
   threshold: null
   }
   },
   series: [{
   type: 'area',
   name: 'xyz',
   data: chartData
   }]
   });
   var startx = 0;
   var starty = 20;
   var roundedVal = 0;
   chart.renderer.text('Index (I) Änderung:', startx + 20, starty + 20).add();
   roundedVal = (Math.round(parseFloat("0.004366812227074135")*1000)/10).toFixed(1);
   console.log(roundedVal);
   if (roundedVal >= 0.1) {
   chart.renderer.image("images/chart/up.png", startx + 20, starty + 40, 50, 50).add();
   }
   else if (!(roundedVal>=-0.1)) {
   chart.renderer.image("images/chart/down.png", startx + 20, starty + 40, 50, 50).add();
   } else {
   chart.renderer.image("images/chart/equal.png", startx + 20, starty + 40, 50,        50).add();
   }
   chart.renderer.text(roundedVal + "%", startx + 100, starty + 75).css({
   fontWeight: 'bold',
   fontSize: '20px',
   }).add();
   chart.renderer.text('I-Aktuell:', startx + 20, starty + 120).add();
   roundedVal = (Math.round(parseFloat("1.38")*1000)/1000).toString();
   chart.renderer.text(roundedVal, startx + 20, starty + 160).css({
   fontWeight: 'bold',
   fontSize: '30px',
   }).add();
   chart.renderer.text('I-Zuletzt:', startx + 20, starty + 200).add();
   roundedVal = (Math.round(parseFloat("1.374")*1000)/1000).toString();
   chart.renderer.text(roundedVal, startx + 100, starty + 200).add();
   chart.renderer.text('I-Höchst:', startx + 20, starty + 220).add();
   roundedVal = (Math.round(parseFloat("1.466")*1000)/1000).toString();
   chart.renderer.text(roundedVal, startx + 100, starty + 220).add();
   chart.renderer.text('I-Tiefst:', startx + 20, starty + 240).add();
   roundedVal = (Math.round(parseFloat("0.685")*1000)/1000).toString();
   chart.renderer.text(roundedVal, startx + 100, starty + 240).add();
   chart.renderer.text('I-AVG:', startx + 20, starty + 260).add();
   roundedVal = (Math.round(parseFloat("1.0567862745098051")*1000)/1000).toString();
   chart.renderer.text(roundedVal, startx + 100, starty + 260).add();
   });
   }); 
```

谢谢斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:45:57.653

看来问题是

```
console.log(jsData); 
```

删除这条线后，它现在对我有用。

# deployment - 在单个 Azure 实例上进行多次部署

> ID：14894782
> 
> 赞同：0
> 
> 时间：2013-02-15T12:29:35.677
> 
> 标签：deployment, azure, msdeploy

我有一个关于 azure deploys 的问题。我的具体场景是我想在同一个 WebRole/WebSite 上部署 N 个项目。

解决方案（不要仅仅认为是一种视觉工作室组织项目的方式）将涉及 1 个 Web 服务（以后可以向外扩展）和 N 个网站（以后也可以向外扩展）

因为现在我的流量非常低，所以我计划将 Web 应用程序部署在端口 80（当然）上，并将 Web 服务部署在同一实例的端口 5000 上以节省一些钱。

我现在想不通的是如何做到这一点......最后我有两个问题：
-1：我可以在一个实例中部署多个项目吗？（[这个问题](https://stackoverflow.com/questions/9343519/multiple-roles-on-the-same-instance-in-windows-azure)很相似，但不是直截了当......我希望得到更直接的答案......）
-2：如何？

编辑：不要把这个问题弄错！我不想在 VS 2012 中创建一个 azure web 角色项目并“添加”两个小项目......我想创建 2 个完全独立的项目...... 2 个独立的解决方案......独立的部署（例如：我想在不更新网站的情况下更正服务中的错误！）

我说清楚了吗？如果不只是说，我会重新解释......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:38:19.087

根据对您问题的编辑，简短的回答是否定的，您不能有两个完全不同的解决方案部署到同一个实例而不覆盖另一个。对于 Azure，一个角色是最小的部署单元。

您也许可以编写自己的自动更新代码，但您将独自一人在那里，服务中没有任何内容可以帮助您。

# php - 重用来自 cURL 多处理程序的句柄

> ID：14894783
> 
> 赞同：4
> 
> 时间：2013-02-15T12:29:36.060
> 
> 标签：php, curl

好吧，我试图重用我在初始过程中产生的句柄，但是在第一次运行之后它就停止工作了。如果我删除（或重新创建整个处理程序）句柄并再次添加它们，它工作正常。这可能是什么罪魁祸首？

我的代码目前如下所示：

```
<?php
echo 'Handler amount: ';
$threads = (int) trim(fgets(STDIN));
if($threads < 1) {
    $threads = 1;
}

$s = microtime(true);
$url = 'http://mywebsite.com/some-script.php';

$mh = curl_multi_init();
$ch = array();
for($i = 0; $i < $threads; $i++) {
    $ch[$i] = curl_init($url);
    curl_setopt_array($ch[$i], array(
        CURLOPT_USERAGENT => 'Mozilla/5.0 (X11; Linux i686; rv:21.0) Gecko/20130213 Firefox/21.0',
        CURLOPT_REFERER => $url,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_NOBODY => true
    ));

    curl_multi_add_handle($mh, $ch[$i]);
}

while($mh) {
    $running = null;
    do {
        curl_multi_exec($mh, $running);
    } while($running > 0);

    $e = microtime(true);
    $totalTime = number_format($e - $s, 2);
    if($totalTime >= 1) {
        echo floor($threads / $totalTime) . ' requests per second (total time '.$totalTime.'s)' . "\r";
        $s = microtime(true);
    }
}

foreach($ch as $handler) {
    curl_multi_remove_handle($mh, $handler);
    curl_close($handler);
}

curl_multi_close($mh);
?> 
```

当我`CURLOPT_VERBOSE`设置为 时`true`，我看到许多“additional stuff not fine transfer.c:1037: 0 0”消息，我在另一个问题上阅读了它们，似乎是由一些明显的事情引起的：

*   太快

*   防火墙

*   ISP 限制

AFAIK，不是这样，因为如果我每次都重新创建句柄，它们会以每秒约 79 个请求成功完成（每个请求约 529 个字节）

我重用手柄的过程：

1.  创建多处理程序，并将指定数量的句柄添加到多处理程序

2.  当 mutli 处理程序工作时，执行所有句柄

3.  在 while 循环停止后（似乎不太可能），关闭所有句柄和多卷曲处理程序

它执行一次所有句柄，然后停止。

这真的难倒我。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-07T17:16:51.633

我遇到了同样的问题（虽然使用 C++），发现我需要删除 curl 简单句柄并重新添加它。我的解决方案是在 curl_multi_perform 循环结束时删除所有句柄，并将它们重新添加到我重用现有保持活动连接的外部循环的开头：

```
for(;;) // loop using keep-alive connections
{
    curl_multi_add_handle(...)
    while ( stillRunning ) // curl_multi_perform loop 
    {
        ...
        curl_multi_perform(...)
        ...
    }
    curl_multi_remove_handle(...)
} 
```

也许这也适用于您的 PHP 场景。记住：不要在两者之间`curl_easy_cleanup`使用`curl_easy_init`卷曲手柄。

如果您打开[CURLOPT_VERBOSE](https://curl.haxx.se/libcurl/c/CURLOPT_VERBOSE.html)您可以在控制台中进行操作，并且您的连接确实被重用了。这为我解决了这个问题。

# android - 如何在 android 中使用 FlurryAdListener 进行 Flurry Intigration

> ID：14894786
> 
> 赞同：1
> 
> 时间：2013-02-15T12:29:47.027
> 
> 标签：android, flurry

我想在我的应用程序中集成 Flurry。在下面的代码中，我集成了 Flurry，但这在 android 中无法正常工作。flurry listener 两次调用它的方法。它是如何工作的，请帮助我。

登录活动.java

```
public class LoginActivity extends Activity implements OnClickListener,
        AsyncTaskCompleteListener {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        instance = this;
        setContentView(R.layout.login_activity);
        Map<String, String> map = new HashMap<String, String>();
                map.put("url", NFLConstanants.LOGIN_URL);
                map.put("username", strUser);
                map.put("passwd", strPassword);
                new ParseController(LoginActivity.this, map,
                        NFLConstanants.SERVICE_CODE0, 1);
    }
    @Override
    protected void onStart() {
            super.onStart();
            System.out.println("call on start method");
            FlurryAgent.onStartSession(this, MACUtils.APIKEY_FLURRY);
            FlurryAgent.enableTestAds(true);
            FlurryAgent.initializeAds(this);
            FlurryAgent.setLogEnabled(true);

    }

    @Override
    protected void onStop() {
            super.onStop();
            System.out.println("call on stop method");
            FlurryAgent.onEndSession(this);
    }

    @Override
    public void onTaskCompleted(String responce, int sc) {
            if (FlurryAgent.isAdAvailable(LoginActivity.this,
                                    MACUtils.myAdSpaceName,
                                    FlurryAdSize.FULLSCREEN, MACUtils.timeout)) {

                                final String msgv = "To help keep this app free please watch this short video. Thanks";
                                AlertDialog.Builder dlg = new AlertDialog.Builder(
                                        LoginActivity.this);
                                dlg.setCancelable(false);
                                dlg.setTitle("Message");
                                dlg.setMessage(msgv);
                                dlg.setPositiveButton("OK",
                                        new DialogInterface.OnClickListener() {
                                            @Override
                                            public void onClick(
                                                    DialogInterface dialog,
                                                    int which) {

                                                try {
                                                    MyAdListener myAdListener = new MyAdListener(
                                                            LoginActivity.this,
                                                            LoginActivity.this, "3");
                                                    FlurryAgent
                                                            .setAdListener(myAdListener);
                                                    FrameLayout container = new FrameLayout(
                                                            LoginActivity.this);
                                                    FlurryAgent
                                                            .getAd(LoginActivity.this,
                                                                    MACUtils.myAdSpaceName,
                                                                    container,
                                                                    FlurryAdSize.FULLSCREEN,
                                                                    MACUtils.timeout);

                                                } catch (Exception e) {
                                                    e.printStackTrace();
                                                }
                                            }
                                        });
                                AlertDialog alert = dlg.create();
                                alert.show();
                            } 
         }
} 
```

MyAdListener.java

```
public class MyAdListener implements FlurryAdListener {
    public Activity activity;
    public Context ctx;
    String pagePosition;
    boolean isDialogLaunch = false;

    public MyAdListener(Activity act, Context ctx, String page) {
        this.activity = act;
        this.pagePosition = page;
        this.ctx = ctx;
        this.isDialogLaunch = false;
    }

    @Override
    public boolean shouldDisplayAd(String myAdSpaceName, FlurryAdType type) {
        System.out.println("shouldDisplayAd:: " + type);
        return true;
    }

    @Override
    public void onAdClosed(String myAdSpaceName) {
        System.out.println("onAdClosed::: " + myAdSpaceName);
        if (pagePosition.equals("1") || pagePosition.equals("2")) {
            actionOnFlurryVideo();
        } else {
            if (!FlurryAgent.isAdAvailable(activity, MACUtils.myAdSpaceName,
                    FlurryAdSize.FULLSCREEN, MACUtils.timeout)) {
                Intent macIntent = new Intent(activity, MACCustomTab.class);
                macIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                activity.startActivity(macIntent);
                activity.finish();
            }
        }
    }

    @Override
    public void onApplicationExit(String myAdSpaceName) {
        System.out.println("onApplicationExit:: " + myAdSpaceName);
        actionOnFlurryVideo();
    }

    @Override
    public void onRenderFailed(String adSpace) {
        System.out.println("onRenderFailed:: " + adSpace);
        actionOnFlurryVideo();
    }

    @Override
    public void spaceDidReceiveAd(String adSpace) {
        System.out.println("spaceDidReceiveAd:: " + adSpace);
    }

    @Override
    public void spaceDidFailToReceiveAd(String adSpace) {
        System.out.println("spaceDidFailToReceiveAd:: " + adSpace);
    }

    @Override
    public void onAdClicked(String id) {
        System.out.println("onAdClicked:: " + id);
    }

    @Override
    public void onAdOpened(String id) {
        System.out.println("onAdOpened::: " + id);
    }

    public void actionOnFlurryVideo() {
        System.out.println("call actionOnflurryvideo");
        if (pagePosition.equals("1") || pagePosition.equals("2")) {
            if (!isDialogLaunch) {
                isDialogLaunch = true;
                final String msg = "Thanks for supporting our free website. Your bet has now been confirmed.";
                AlertDialog.Builder dlg = new AlertDialog.Builder(ctx);
                dlg.setCancelable(false);
                dlg.setTitle("Message");
                dlg.setMessage(msg);
                dlg.setPositiveButton("OK",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                NavigationGroupActivity parent = ((NavigationGroupActivity) activity
                                        .getParent());
                                parent.backToFirst();
                            }
                        });
                AlertDialog alert = dlg.create();
                alert.show();
            }
        } else {
            Intent macIntent = new Intent(activity, MACCustomTab.class);
            macIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            activity.startActivity(macIntent);
            activity.finish();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:11:26.920

这个问题将在我们的下一个版本中修复，预计很快就会发布。

（全面披露：我在 Flurry 的支持团队工作）

# caroufredsel - carouFredSel - 将可见数量设置为实际图像数量 - 并且仍然滚动？

> ID：14894788
> 
> 赞同：6
> 
> 时间：2013-02-15T12:30:07.523
> 
> 标签：caroufredsel

我正在使用这个滚动条

[http://coolcarousels.frebsite.nl/c/2/](http://coolcarousels.frebsite.nl/c/2/)

我在下面有这个设置。

我的问题是我将它设置为`visible: 4`并且我有 4 张图像，所以它不会滚动。如果我将它设置为，`visible: 3`那么它会按预期工作。但是，当您以 1920 像素宽的分辨率打开浏览器全宽时，我想在一个屏幕上显示所有 4 张图像。所以问题似乎是。如果我将可见的图像数量设置为我拥有的图像，那么它就会停止工作。

有没有办法一次在屏幕上显示所有 4 个图像，然后仍然滚动它们？

```
$(function() {
    $('#carousel').carouFredSel({

        width: '100%',  
        align: 'left',

        items: {
            visible: 4,
            start: 0,

        },
        scroll: {
            items: 1,
            queue           : true,
            fx: "scroll",
            easing: "swing",
            duration: 1000,
            timeoutDuration: 3000
        },

        prev: '.prev',
        next: '.next',

        auto: {
            easing: "quadratic",
            button: '.play',

            pauseOnEvent: 'resume',
                pauseOnHover: true
        }

    }).find(".slide .plusNav").hover(
              function() { $(this).find("div").slideDown(); },
              function() { $(this).find("div").slideUp();   }
    );
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T22:10:39.410

尝试这个

> ```
> items: {
>     minimum: 0,
> }, 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-14T16:00:41.300

我已经通过设置`minimum`为 0 解决了这个问题。

```
items: {
    minimum: 0, 
```

实际上，将该`minimum`属性设置为零会强制始终显示滚动条，而与当前显示的项目数无关。

这对我来说是必需的，因为滚动条的自动启用在某些屏幕分辨率上不起作用——我必须再添加 2 个项目才能使滚动条可见，这不是预期的行为。

作为一种解决方法，我设置`minimum: 0`- 它解决了这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T18:53:57.627

我可以通过编辑源代码来做到这一点：/

如果您像这样在 jquery.carouFredSel-6.2.0.js 中注释掉第 554 和 556 行...

```
//  not enough items
var minimum = (is_number(opts.items.minimum)) ? opts.items.minimum : opts.items.visible + 1;
if (minimum > itms.total)
{
    // e.stopImmediatePropagation();
    // return debug(conf, 'Not enough items ('+itms.total+' total, '+minimum+' needed): Not scrolling.');
} 
```

...它对我有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T14:32:23.283

访问包装器并设置其高度（假设所有子级具有相同的高度）：

```
var carousel = [your_carousel],
    carousel_wrapper = carousel.parent();

carousel_wrapper.height(function(){
  return (carousel.children('[child_selector]').length) * [child_height];
}); 
```

这里的事情是，当轮播动画时会有一个奇怪的行为。这是因为最大高度是**((n-1) * child_height)**故意作为掩码完成的，以及**溢出：隐藏**。

另一种选择是复制其中一个孩子，但这不是语义。

# scala - Scala 抽象类型和多态性

> ID：14894790
> 
> 赞同：2
> 
> 时间：2013-02-15T12:30:14.710
> 
> 标签：scala

[这个 Scala 教程](http://www.scala-lang.org/node/124)让我很困惑；`Node`抽象类型似乎不遵循传统的多态规则......

```
type Node <: NodeIntf                // NodeIntf is assignable to Node.
abstract class NodeIntf {
  def connectWith(node: Node): Edge
}
class NodeImpl extends NodeIntf {
  def connectWith(node: Node): Edge = {
    val edge = newEdge(this, node)   // NodeImpl (this) is assignable to NodeIntf.
    edges = edge :: edges
    edge
  }
}
protected def newEdge(from: Node, to: Node): Edge 
```

如果`Node = NodeIntf`和`NodeIntf = NodeImpl`，那我们为什么不能`Node = NodeImpl`呢？我问，因为显然上面的代码不会编译 - 为什么必须使用“自类型引用”？（[见教程](http://www.scala-lang.org/node/124)）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T13:12:53.173

你颠倒了 的意思`<:`。A`Node`可分配给 a `NodeIntf`，即：

```
val x: NodeIntf = y: Node 
```

现在，在下面你说`Node = NodeIntf`and `NodeIntf = NodeImpl`，这是不正确的。`Node`是 的*任意*子类型`NodeIntf`，并且`NodeImpl`是 的特定子类型`NodeIntf`。

就*is a*、`Node`is a`NodeIntf`和`NodeImpl`is a而言`NodeIntf`，但这对它们之间的关系没有任何意义——您不妨说 both`Node`和`NodeImpl`都是 的子类型`Any`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T13:20:53.193

首先，这是您的代码的一种最小的、独立的版本：

```
abstract class Graph {
  type Node <: NodeIntf

  case class Edge(s: Node, d: Node)

  abstract class NodeIntf {
    def connectWith(node: Node): Edge
  }

  class NodeImpl extends NodeIntf {
    def connectWith(node: Node): Edge = {
      val edge = newEdge(this, node)
      edge
    }
  }

  def newEdge(from: Node, to: Node): Edge = Edge(from, to)
} 
```

如果你尝试编译它，你会得到

```
found   : NodeImpl.this.type (with underlying type Graph.this.NodeImpl)
required: Graph.this.Node
    val edge = newEdge(this, node)
                       ^ 
```

错误消息的原因是，这`Node`是一个**抽象**类型。它有上限`NodeIntf`，但它仍然是抽象的。也就是说，抽象的实现**可以**`Graph`自由设置/绑定`Node`到.**`NodeIntf`**

 **在您的代码中，您尝试传递一个 to 的实例`NodeImpl`，`newEdge`它需要一个`Node`. 您是对的，它`NodeImpl`是 的子类型`NodeIntf`，但是， 的实现`Graph`可能会决定`Node`通过将其绑定到 的子类型来进一步限制`NodeImpl`，这会使您的调用`newEdge`非法。

如果您已经绑定`Node`，例如，将其设为 的类型别名`NodeIntf`，

```
type Node = NodeIntf 
```

然后上面的代码编译，因为以后的实现`Graph`不能再绑定`Node`了。**

# c# - 每像素碰撞 - 可以做一些一般提示

> ID：14894796
> 
> 赞同：1
> 
> 时间：2013-02-15T12:30:43.837
> 
> 标签：c#, xna, collision

我了解 Xna 中每像素碰撞背后的理论，你从两个纹理中获取纹理数据，然后比较它们，检查例如你的角色纹理的 alpha 值。

我想要做的是使用每像素碰撞来检查玩家精灵是否通过检查与某种颜色（黑色）的碰撞来接触地图。我之前尝试过实现这一点，但字符总是从地图上掉下来，没有引发编程错误。请将我指向文章/教程/视频，或者如果这里有人可以给我一些提示和要点，那也很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:12:21.070

如果我是你，我不会检查两个纹理之间的像素到像素。不过，只检查一点与地图并不算太糟糕。

```
//In Class-scope:
Color[] CollisionMapData;
Texture2D CollisionMap;

public void LoadContent()  
{  
    CollisionMap = Content.Load<Texture2D>("map");  
    CollisionMapData = new Color[CollisionMap.Width * CollisionMap.Height];  
    CollisionMap.GetData<Color>(CollisionMapData);  
}  

public Boolean Collision(Vector2 position)  
{  
    int index = (int)position.Y * CollisionMap.Width + (int)position.X;

    if (index < 0 || index >= CollisionMapData.Length) //Out of bounds  
        return true;

    if (CollisionMapData[index] == Color.Black)
        return true;

    return false;
} 
```

要根据地图检查整个玩家精灵，您必须为玩家精灵中的每个像素调用 Collision 方法，创建一个 vector2 来获取正确的点。检查几个点要容易得多（例如；topleft、topmiddle、topright、left、right、bottomleft、bottommiddle、bottomright。无需检查中间，因为已经测试了边。）

# javascript - 融合图表问题

> ID：14894800
> 
> 赞同：0
> 
> 时间：2013-02-15T12:31:06.453
> 
> 标签：javascript, html, fusioncharts

嗨，我在 Fusion 图表中使用子弹图。我使用为子弹图提供的相同示例代码，并从数据文件夹中的文件中获取数据值，我试图在 HTML 页面本身上设置数据。

```
<div align="center">
<script type="text/javascript">
 var myChart = new FusionCharts       ("Charts/VBullet.swf", "myChart4", "80", "270", "0", "0");

 myChart.setDataURL("Data/WageIncrease.xml");

   myChart.render("chartdiv4");
  </script>
   </div> 
```

替换为

```
 </div><div align="center">
<script type="javascript">
 var myChart = new FusionCharts     ("Charts/VBullet.swf", "myChart4", "80", "270", "0", "0");
  myChart.setDataXML("<chart>
   <value>13</value>
  <target>74</target>
  </chart>");
 myChart.render("chartdiv4");
 </script> 
```

但这不起作用我做错了什么？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:11:14.423

在提供 XML in Data String 方法时，请尝试删除换行符并在标记之间不带任何空格的情况下提供它。

```
</div><div align="center">
<script type="javascript">
 var myChart = new FusionCharts     ("Charts/VBullet.swf", "myChart4", "80", "270", "0", "0");
  myChart.setDataXML("<chart><value>13</value><target>74</target></chart>");
 myChart.render("chartdiv4");
 </script> 
```

# java - Apache Java Configuration API - 配置文件（继承）？

> ID：14894802
> 
> 赞同：2
> 
> 时间：2013-02-15T12:31:13.913
> 
> 标签：java, properties, apache-commons-config

当我使用 Zend Framework 时，我曾经有`.ini`配置文件，我可以在其中执行以下操作：

```
[production]
setting1 = abc
setting2 = def

[development : production]
setting1 = ghi 
```

当我打开`development`应用程序配置文件时，`setting1`它的值为`ghi`，而在生产模式下它是`abc`。是否可以在 Apache Commons 配置中定义此类继承设置？

我知道我可以定义多个配置文件并从中创建一个[CompositeConfiuration](http://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/CompositeConfiguration.html)，但是如何告诉应用程序它应该只包含不同模式下的特定文件？我也不知道如何设置这些应用程序配置文件，但另一个名为的设置`PROFILE`应该为我工作。

如果可能，我不想将设置拆分为多个文件。

我找不到有关如何在 Java 中完成此操作的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:42:21.637

Apache Configuration reads the config options from a file into a memory data structure. Besides variable expansion, there is no further post processing by default. So your options are:

*   Put all options in a default config and then use individual "delta" configs that overwrite the defaults. Merge these individual files with `CompositeConfiuration`.

    This design follows Java's inheritance model: Base type which you extend to overwrite some value and add new ones.

*   Create a post processor that takes the huge config and turns that into a new config with your preferred merging rules applied.

*   Create a helper object to look up values by key in the config. That would allow you do the merging at lookup time.

# android - 在 android.permission.RECEIVE_BOOT_COMPLETED 中实现服务

> ID：14894805
> 
> 赞同：0
> 
> 时间：2013-02-15T12:31:17.517
> 
> 标签：android, android-service

我在网络搜索中采用以下示例。我对示例进行了一些修改，但在重新启动手机后显示错误。我还粘贴了示例中使用的源代码，请帮我解决问题

提前致谢

**xml文件**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.newtest"
android:versionCode="1"
android:versionName="1.0">

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>  
<application>  
    <receiver android:name=".BootCompletedIntentReceiver">  
        <intent-filter>  
            <action android:name="android.intent.action.BOOT_COMPLETED" />  
        </intent-filter>  
    </receiver>  
    <service android:name=".BackgroundService"/>  
</application>
</manifest> 
```

**广播接收器类**

```
package com.example.newtets;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class BootCompletedIntentReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {  
           Intent pushIntent = new Intent(context, BackgroundService.class);
           context.startService(pushIntent);  
    }
}
} 
```

**服务等级**

```
package com.example.newtets;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;

public class BackgroundService extends Service {

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "OK", Toast.LENGTH_LONG).show();
    super.onCreate();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T05:32:11.743

我认为你不需要比较意图..

```
if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {  
 .....
} 
```

因为，在 xml 文件中捕获了 BootCompletedIntentReceiver 应该为 BOOT_COMPLETED 意图执行。

# linux - Linux下LVS负载均衡器应该在哪里配置director IP

> ID：14894806
> 
> 赞同：0
> 
> 时间：2013-02-15T12:31:18.420
> 
> 标签：linux, load-balancing, nat

这个主题很容易解释，我有一个运行 LVS ldirectord 的负载均衡器，以及以下配置：

```
# ipvsadm -Ln 

IP Virtual Server version 1.2.1 (size=4096)
Prot LocalAddress:Port Scheduler Flags
  -> RemoteAddress:Port           Forward Weight ActiveConn InActConn
TCP  172.22.9.100:80 rr
  -> 172.22.1.133:80              Masq    1024   0          2
  -> 172.22.1.134:80              Masq    1024   0          1 
```

我声明了哪个虚拟 IP 是，但是我在哪里指定与真实服务器通信所需的导向器 IP？

谁能指点我一个全面和最新的配置，我在谷歌上只能找到古老的内核 2.4 配置说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:00:03.743

Linux 根据它的路由表来决定。例如，如果您的一台后端机器是 172.22.1.133，您的主机将检查它的路由表以决定它应该使用哪个接口以及它是否可以直接连接或通过网关连接。

命令'ip route show'应该给你一个关于它将使用哪个接口的线索。

如果您有多个可用于连接到一个 IP 的接口，并且您希望将其与路由的其余部分分开定义，您只需为定义接口的此特定主机添加一个路由：

`ip route add 1.2.3.4/32 dev eth3`

# javascript - 从 `prototype` 和 `new` 到闭包和暴露模式

> ID：14894807
> 
> 赞同：2
> 
> 时间：2013-02-15T12:31:18.760
> 
> 标签：javascript, design-patterns, closures, prototypal-inheritance

我一直在重构别人的 JavaScript 代码。

**前：**

```
function SomeObj(flag) {
    var _private = true;
    this.flag = (flag) ? true : false;
    this.version="1.1 (prototype)";
    if (!this._someProperty) this._init();
            // leading underscore hints at what should be a 'private' to me
    this.reset(); // assumes reset has been added...
}

SomeObj.prototype.reset = function() {
    /* perform some actions */
}

/* UPDATE */
SomeObj.prototype.getPrivate = function() {
    return _private; // will return undefined
}

/* ...several other functions appended via `prototype`...*/ 
```

**后：**

```
var SomeObj = function (flag) {
    var _private = true;
    this.flag = (flag) ? true : false;
    this.version = "2.0 (constructor)";

    this.reset = function () {
       /* perform some actions */
    };

    /* UPDATE */
    this.getPrivate = function() {
        return _private; // will return true
    }

    /* other functions and function calls here */
} 
```

对我来说，第一个例子看起来很难阅读，尤其是在更大的上下文中。`reset`像这样使用属性添加类似 on 的方法`prototype`似乎不太受控制，因为它可能发生在脚本中的任何地方。我重构的代码（上面的第二个示例）对我来说看起来更整洁，因此更容易阅读，因为它是独立的。我通过变量声明获得了一些隐私，但我失去了原型链的可能性。

...

**问题：**

1.  首先，我很想知道前面提到的我还失去了什么`prototype`，或者原型链的丢失是否有更大的影响。[这篇文章](http://blogs.msdn.com/b/kristoffer/archive/2007/02/13/javascript-prototype-versus-closure-execution-speed.aspx)已有6 年历史，但声称`prototype`在大规模上使用该属性比闭包模式更有效。

2.  上面的两个例子仍然是由`new`操作符实例化的；它们都是“经典”式的构造函数。最终，我什至想从这个模型转移到所有属性和函数都声明为`var`s 的模型中，并且我有一个公开的方法，它能够返回一个对象，打开我需要的所有属性和方法，*这些属性和方法具有特权（通过关闭）对那些私有的*。像这样的东西：

    ```
    var SomeObj = (function () {

        /* all the stuff mentioned above, declared as 'private' `var`s */

        /* UPDATE */
        var getPrivate = function () {
            return private;
        }

        var expose = function (flag) {
             // just returns `flag` for now
             // but could expose other properties
             return {
                 flag: flag || false, // flag from argument, or default value
                 getPrivate: getPrivate
             } 
        };

        return {
            expose: expose
        }
    })(); // IIFE

    // instead of having to write `var whatever = new SomeObj(true);` use...
    var whatever = SomeObj.expose(); 
    ```

    StackOverflow 上有一些解决“原型与闭包”问题的答案（例如，[此处](https://stackoverflow.com/questions/3564238/object-oriented-javascript-with-prototypes-vs-closures?rq=1)和[此处](https://stackoverflow.com/questions/14719926/whats-wrong-with-this-style-of-coding-javascript-closures-vs-prototypes)）。但是，与`prototype`财产一样，我感兴趣的是，朝着这个方向发展并远离`new`运营商对我的代码效率和任何可能性的损失（例如`instanceof`丢失）意味着什么。如果无论如何我都不打算使用原型继承，那么在前面的`new`运算符中我真的会失去任何东西吗？

3.  如果我被允许，一个更宽松的问题，考虑到我要求上面的细节：如果`prototype`和`new`真的是最有效的方式，比关闭有更多的优势（无论你认为它们可能是什么），是否有任何指导方针或设计以更整洁的方式编写它们的模式？

...

# 更新：

请注意，`expose`每次都会返回一个新对象，因此这是实例化发生的地方。据我了解，该对象指的是`SomeObj`闭包中声明的方法，它们在所有对象中都是相同的方法（除非被覆盖）。在`flag`变量的情况下（我现在已经更正了），这可以从 的参数继承`expose`，具有默认值，或者再次引用封装的预先存在的方法或属性。所以有一些正在生成的对象的实例，并且这里正在进行一些继承（加上多态性？）。

所以重复问题 2：如果我无论如何都不打算使用原型继承，那么在前面的`new`运算符中我真的会失去任何东西吗？

非常感谢到目前为止的回答，这有助于澄清我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:51:03.123

以我的经验，你唯一失去的就是不使用`.prototype`内存——每个对象最终都拥有自己的其中定义的函数对象的副本。

如果您只打算实例化“少量”对象，这不太可能是一个大问题。

关于您的具体问题：

1.  对该链接文章的第二条评论是高度相关的。作者的基准测试是错误的——它正在测试运行*同时*声明四个内部函数的构造函数的开销。它*不是*测试这些功能的后续性能。

2.  您的“关闭和公开”代码示例不是面向对象的，它只是一个带有一些封闭私有变量的命名空间。因为它不使用`new`它，所以如果您希望从中实例化对象，那么它是没有用的。

3.  我无法回答这个问题——“这取决于”是你能得到的最好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:29:04.700

答案：

1.  你已经回答了这个问题：你*失去*了原型链。（实际上你并没有丢失它，但你的原型总是空的）。后果是：

    *   对性能/内存有一点影响，因为方法是为每个实例创建的。但这在很大程度上取决于 JavaScript 引擎，只有在需要创建大量对象时才应该担心它。

    *   您不能通过修改原型来修改*补丁*实例。也不是什么大问题，因为这样做会导致维护噩梦。

2.  让我对你的问题做一个小小的修正：不是“原型与闭包”的问题，实际上闭包的概念与基于原型的语言是正交的。

    这个问题与您将如何创建对象有关：每次都从零开始定义一个新对象，或者从原型中克隆它。

    您展示的关于使用函数限制范围的示例是 JavaScript 中的常见做法，即使您决定使用原型，您也可以继续这样做。例如：

    ```
    var SomeObj = (function (flag) {

        /* all the stuff mentioned above, declared as 'private' `var`s */

        var MyObj = function() {}
        MyObj.prototype = {
            flag: flag,
            reset: reset
        };

        return {
           expose: function() { return new MyObj(); }
        }
    })(); 
    ```

    如果您担心模块化，请查看[requirejs](http://requirejs.org/)，它是一种称为 AMD（异步模块定义）的技术的实现。有些人不喜欢 AMD，有些人喜欢它。我对它的体验是积极的：它对我为浏览器创建模块化 JavaScript 应用程序帮助很大。

3.  有一些库可以让您的原型生活更轻松：[composejs](https://github.com/kriszyp/compose)、[dejavu](https://github.com/IndigoUnited/dejavu)和我自己的[酒保](https://github.com/dfernandez79/barman)（是的，这是一种无耻的自我宣传，但您可以查看源代码以了解处理对象定义的方法）。

    *关于模式：由于您可以使用工厂方法*轻松隐藏对象实例化，因此您仍然可以`new`在内部使用克隆原型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T13:00:36.200

> 前面我还失去了`prototype`什么？

我相信有人可以提供答案，但我至少会试一试。至少有两个理由使用`prototype`：

1.  `prototype`方法可以静态使用
2.  它们只创建一次

将方法创建为对象成员意味着它是为对象的每个实例创建的。每个对象的内存更多，并且会减慢对象的创建速度（因此提高了效率）。人们倾向于说`prototype`方法类似于类方法而成员方法类似于对象方法，但这是非常误导的，因为原型链中的方法仍然可以使用对象实例。

您可以将原型定义为对象本身，因此您可能更喜欢这种语法（但并不是完全不同）：

```
SomeObj.prototype = {
    method1: function () {},
    method2: function () {}
} 
```

你认为它似乎不受控制的论点对我来说是有效的。我知道有*两个*块参与创建对象是很奇怪的。但是，这有点虚假，因为无论如何都无法阻止某人覆盖您其他对象的原型。

```
//Your code
var SomeObj = function (flag) { //...

//Sneaky person's code
delete SomeObj.reset;
SomeObj.prototype.reset = function () { /* what now? */ } 
```

# 前面的`new`

如果您只想通过`{}`符号动态创建特定的对象实例，那么它与使用并没有什么不同`new`。您需要使用`new`从类 ( `function`) 定义中创建同一对象的多个实例。这并不罕见，因为它适用于任何面向对象的编程语言，并且与重用有关。

对于您当前的应用程序，这可能会很好。但是，如果您想出了一些可跨上下文重用的很棒的插件，那么必须大量重写它可能会很烦人。我认为您正在寻找类似的东西[`require.js`](http://requirejs.org/)，它允许您定义可以使用该`require`函数导入的“模块”。您在函数闭包中定义了一个模块`define`，因此无论如何您都可以将构造函数和原型定义包装在一起，并且在导入该模块之前没有其他人可以接触它们。

# 封闭对比的优势`prototype`

它们不是相互排斥的：

```
var attachTo = {};
;(function (attachTo, window, document, undefined) {
    Plugin = function () { /* constructor */ };
    Plugin.prototype = { /* prototype methods */ };

    attachTo.plugin = Plugin;
})(attachTo, window, document);
var plugin = new (attachTo.plugin); 
```

[http://jsfiddle.net/ExplosionPIlls/HPjV7/1/](http://jsfiddle.net/ExplosionPIlls/HPjV7/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:54:05.713

一问一答：

1.  基本上，拥有该`reset`方法`prototype`意味着您的构造函数的所有实例将共享该方法的完全相同的副本。通过在构造函数中创建本地方法，您将拥有每个实例的方法副本，这将消耗更多内存（如果您有很多实例，这可能会成为问题）。除此之外，两个版本是相同的；更改`function SomeObj`为`var SomeObj = function`仅`SomeObj`在其父范围上的提升方式有所不同。你说你“通过变量声明获得了一些隐私”，但我没有看到任何私有变量......

2.  使用您提到的 IIFE 方法，您将失去检查 if 的能力`instance instanceof SomeObj`。

3.  不确定这是否回答了您的问题，但也有[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)，您仍然可以在其中设置原型，但摆脱`new`关键字。但是，您将失去拥有构造函数的能力。

# sql-server-2005 - 删除子项时是否对 DELETE 强制执行外键约束？

> ID：14894810
> 
> 赞同：-1
> 
> 时间：2013-02-15T12:31:27.403
> 
> 标签：sql-server-2005, parent-child, foreign-key-relationship

我想删除子表上的行。我收到错误

> *DELETE 语句与 REFERENCE 约束“FK_Address_UserDataSet”冲突。冲突发生在数据库“XYZ”、表“dbo.Address”、列“DataSetId”中。该语句已终止。*

我有一个带有父表`UserDataSet`和子 `Address`表的数据库结构（父表可以有任意数量的子表）。

有一个外键约束（在错误中提到）要求孩子`DataSetId`与有效的`UserDataSet`.

以下是以`MS SQL Server Management Studio 2008`简化形式创建的表和约束脚本：

```
CREATE TABLE [dbo].[Address](
    [AddressId] [int] IDENTITY(1,1) NOT NULL,
    [DataSetId] [int] NOT NULL,
        --other fields
 CONSTRAINT [PK_Address] PRIMARY KEY CLUSTERED 
(
    [AddressId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

---

CREATE TABLE [dbo].[UserDataSet](
    [DataSetId] [int] IDENTITY(1,1) NOT NULL,
        --other fields
 CONSTRAINT [PK_UserDataSet] PRIMARY KEY CLUSTERED 
(
    [DataSetId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

---Create the constraint

ALTER TABLE [dbo].[Address]  WITH NOCHECK ADD  CONSTRAINT [FK_Address_UserDataSet] FOREIGN KEY([DataSetId])
REFERENCES [dbo].[UserDataSet] ([DataSetId])
GO

ALTER TABLE [dbo].[Address] CHECK CONSTRAINT [FK_Address_UserDataSet]
GO 
```

**但是，在这个设置中删除一个孩子（而不是父母）怎么会成为一个问题呢？**

是否可能是要删除的行当前无效，可能是在约束尚未（尚未）使用时添加的），现在在删除具有无效外键的子项时强制执行约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:56:55.197

为什么要添加约束`NOCHECK`？

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms190273.aspx)...

> 如果您不想针对现有数据验证新的 CHECK 或 FOREIGN KEY 约束，请使用 WITH NOCHECK。*我们不建议这样做，除非在极少数情况下*。新约束将在以后的所有数据更新中进行评估。在添加约束时由 WITH NOCHECK 抑制的任何约束违规都可能导致将来的更新失败，如果它们使用不符合约束的数据更新行。

# php - 在 php 中，需要在所需文件中吗？

> ID：14894819
> 
> 赞同：13
> 
> 时间：2013-02-15T12:32:19.047
> 
> 标签：php, require

在 php 中，如果我有一个文件需要来自子目录的文件，例如：

```
require('directory/file.php'); 
```

并且`file.php`想要在自己的目录中需要另一个文件，路径是相对于`file.php`它还是包含在其中的文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T12:33:22.737

如果有意义的话，它是相对于原始要求文件的。

**因此，如果您有一个名为 index 的文件，如下所示：**

```
require("./resources/functions.inc.php"); 
```

**然后functions.inc.php 需要看起来像这样：**

```
require("./resources/anotherFunctionsFile.inc.php"); 
```

**而不是：**

```
require("anotherFunctionsFile.inc.php); 
```

但实际上你应该使用`__DIR__`常量，它始终是运行脚本的目录；它使事情变得容易得多。

有关`__DIR__`和其他常量的更多信息：http: [//php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T12:34:58.507

它与主脚本相关，在本例中为 A.php。请记住，`require()`只是将代码插入到当前运行的脚本中。

> 也就是说，`require()`从哪个文件调用它是否重要

不。

如果你想让它变得重要，并且`require()`相对于 B.php，请使用`__FILE__`常量（或`__DIR__`自 PHP 5.3 起），如果代码位于该行，它将始终指向该行的文字当前文件。

```
include(dirname(__FILE__)."/C.PHP"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:32:59.197

```
include(dirname(__FILE__).'/include.php'); 
```

参考： http: [//php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

文件的完整路径和文件名。如果在包含中使用，则返回包含文件的名称。自 PHP 4.0.2 起，FILE 始终包含一个绝对路径，其中符号链接已解析，而在旧版本中，它在某些情况下包含相对路径。

# ruby - 两个相似的句子有不同的行为。可以吗？

> ID：14894823
> 
> 赞同：1
> 
> 时间：2013-02-15T12:32:46.057
> 
> 标签：ruby, initialization

两个相似的句子有不同的行为。可以吗？

比较：

```
a = 123 unless defined? a
a # => nil 
```

但...

```
unless defined? b
  b = 123
end
b # => 123 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:36:01.823

是的，这是正确的行为。局部变量是`nil`在赋值之前创建和初始化的。所以这段代码

```
a = 123 unless defined? a
a # => nil 
```

大致相当于

```
a = nil
a = 123 unless defined? a # `a` is not undefined anymore.
a # => nil 
```

另一个示例（即使`c`未在此行之前定义，此代码也不会抛出 a `NameError`）。

```
c = 2 unless c # => 2 
```

# java - 如何在 JSplitPane 中添加 JTable？

> ID：14894829
> 
> 赞同：1
> 
> 时间：2013-02-15T12:32:58.480
> 
> 标签：java, swing, layout, jtable, jpanel

嗨，我正在做一个摇摆项目。我想在数据库中的 JTable 中显示我的数据。我
创建了 JSplitpane。在面板 1 中为来自 Databse 的 sect 数据创建了搜索按钮、jLabel 和 JTextBox ...在面板 2 中，我想在 JTable.my 数据库查询中显示搜索结果，并且一切正常......但我无法在面板 2 中显示 JTable .. .任何人都可以帮我解决这个问题。

public JFrame TimesheetReport(){ //创建第一个 JFrame

```
 final JFrame employeeFrame = new JFrame("Report");

    employeeFrame.setExtendedState(Frame.MAXIMIZED_BOTH);
        employeeFrame.setResizable(true)
    employeeFrame.setLocation(100,50);
    employeeFrame.setVisible(true);
            employeeFrame.setResizable(false);
    panel.setLayout(new FlowLayout());
    panel1.setLayout(new BorderLayout());
     employeeFrame.pack();
            final JLabel label1;
    final JLabel label2;
    final JTextField  text1;
    final JTextField text2;
    final JButton ADD;

    {

    label1 = new JLabel("From Date");
    text1 = new JTextField(12);

    label2 = new JLabel("End Date");
    text2 = new JTextField(12);
    JButton button2 = new JButton("calendar");

        ADD=new JButton("Search");
    ADD.setText("Search");
    ADD.addActionListener(new java.awt.event.ActionListener() {  

        @Override
        public void actionPerformed(java.awt.event.ActionEvent e) { 

                DbUtility TimesheetReport=new DbUtility();
                TimesheetReport. loadDriver();
                TimesheetReport.connect();

                String value=(text1.getText());
                String value2=(text2.getText());
                ResultSet rs=     TimesheetReport.executeSelectQuery14(value,value2);
                String    Activityid =null, EmployeeName = null,StartDate = null,EndDate=null,Activity=null,Project=null,Day1=null,Day2=null,Day3=null,Day4=null,Day5=null ;

            try {
            while (rs.next()) {
                Activityid  = rs.getString("Activityid");
                EmployeeName = rs.getString("EmployeeName");
                StartDate = rs.getString("StartDate");
                EndDate = rs.getString("EndDate");
                Activity = rs.getString("Activity");
                Project= rs.getString("Project");
                Day1 = rs.getString("Day1");
                Day2 = rs.getString("Day2");
                Day3 = rs.getString("Day3");
                Day4 = rs.getString("Day4");
                Day5 = rs.getString("Day5");

                String[] columnNames = {"Activityid","EmployeeName", "StatrDate","EndDate", "Activity","Project","Day1","Day2","Day3","Day3","Day4","Day5"};
                String data[][] = {{Activityid,EmployeeName, StartDate,EndDate,Activity,Project,Day1,Day2,Day3,Day4,Day5}};
                System.out.println(Activityid+" "+EmployeeName+" "+StartDate+"" +EndDate+""+Activity+" "+Project+""+Day1+""+Day2+""+Day3+""+Day4+""+Day5);
                final DefaultTableModel model = new DefaultTableModel(data, columnNames);
                table2= new JTable(model);
                table2.setRowHeight( 70 );
                table2.setFillsViewportHeight(true);
                JTextField field = new JTextField();
                field.setForeground(Color.RED);
                field.setBackground(Color.RED);
                table2.getTableHeader().setPreferredSize(new Dimension(50,50));
                table2.getTableHeader().setBackground(Color.blue);
                table2.getTableHeader().setForeground(Color.white);
                table2.getTableHeader().setFont(new Font("Serif", Font.BOLD, 15)); 
                table2.getTableHeader().setOpaque(true);
                table2.getModel();
                table2.setForeground(Color.blue);
                table2.setBackground(Color.white);
                table2.setGridColor(Color.MAGENTA);
                table2.setShowGrid(true);
                    JScrollPane pane = new JScrollPane(table2);
                    panel1.add(pane);

        }
            } catch (SQLException e1) {

                e1.printStackTrace();
                                }  

                 }
                     });

        JSplitPane splitPane = new      JSplitPane(JSplitPane.HORIZONTAL_SPLIT,panel,panel1 );
        splitPane.setDividerLocation(300);
        Dimension minimumSize = new Dimension(250, 0);
        panel.setMinimumSize(minimumSize);
        employeeFrame.add(splitPane);
         pane.add(panel1);
         panel.add(label1);

         label1.setForeground(Color.white);
         panel.add(text1);

         panel.add(label2);

         label2.setForeground(Color.white);
         panel.add( text2);

         panel.add(ADD);

          }

      return employeeFrame;

       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:41:13.940

> 但我无法在 panel2 中显示 JTable ...任何人都可以帮我解决这个问题。

您的代码不是[SSCCE](http://sscce.org)格式...它不会在简单的复制和粘贴上编译，并且存在一个错误，因为`table2`未在给定代码的方法范围内声明，也没有任何引用，`panel2`但我认为您的意思是`panel1`。 ..

**解决方案：**

1）不要使用`null`/ `Absolute` `LayoutManager`。

阅读：

*   [在容器中布置组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/)

*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

2）为什么需要添加`JTable`（`panel1`或问题中引用的`panel2`）？如果有的话，我们会将其添加`JScrollPane`为`JTable`视*口*，`panel1`只需添加`table2`到`JScrollPane`并添加`JScrollPane`到`JSplitPane`即：

```
JScrollPane pane = new JScrollPane(table2);
JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, panel, pane); 
```

或者添加`JTable`到`JScrollPane`和添加`JScrollPane`到`panel1`，`BorderLayout` 所以`JPanel`将拉伸到容器大小：

```
JPanel panel1=new JPanel(new BorderLayout());
....
JScrollPane pane = new JScrollPane(table2);
panel1.add(pane);
JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, panel, panel1); 
```

3）也因为我看到你最大化`JFrame`通过：

`JFrame#setExtendedState(JFrame.MAXIMIZED_BOTH);`

明智的做法是`LayoutManager`在 JFrame 大小发生更改时使用自动调整组件大小。即`BorderLayout`，`GridLayout`并且`GridBagLayout`是一些浮现在脑海中的。

4）在添加所有组件之前也不要设置`JFrame`可见。

5)通过块在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)上创建 Swing 组件。`SwingUtilities.invokeLater(Runnable r)`

6）不要忘记[`pack()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)在`JFrame`设置可见之前但在添加组件之后调用。

7）我也觉得这个评论很可疑：`//Creating 1st JFrame`阅读[The Use of Multiple JFrames, Good/Bad Practice?](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice) . 而是使用[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)or `JDialog`。

8) 我看不到需要`setLocation`完全扩展的`JFrame`.

这是您的修复代码（我只使用了所有组件 default `LayoutManager`s（除了`panel1`使用`BorderLayout`so`JPanel`将拉伸到容器大小）：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Frame;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTable;
import javax.swing.JTextField;

public class Test {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    public Test() {
        createAndShowGui();
    }

    public void createAndShowGui() {

        final JFrame employeeFrame = new JFrame("Report");
        employeeFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JPanel panel = new JPanel() {
            @Override
            public Dimension getMinimumSize() {
                return new Dimension(250, 0);
            }
        };
        final JTable table2 = new JTable(new String[][]{
                    {"one", "two", "three"},
                    {"one", "two", "three"},
                    {"one", "two", "three"}
                }, new String[]{"col1", "col2", "col3"});

        JPanel panel1 = new JPanel(new BorderLayout());//panel which holds jtable
        final JLabel label1;
        final JLabel label2;
        final JTextField text1;
        final JTextField text2;
        final JButton ADD;

        label1 = new JLabel("From Date");
        text1 = new JTextField(12);
        label2 = new JLabel("End Date");
        text2 = new JTextField(12);
        JButton button2 = new JButton("calendar");
        ADD = new JButton("Search");
        ADD.setText("Search");
        ADD.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent e) {
                /*
                 DbUtility createAndShowGui = new DbUtility();
                 createAndShowGui.loadDriver();
                 createAndShowGui.connect();

                 String value = (text1.getText());
                 String value2 = (text2.getText());
                 ResultSet rs = createAndShowGui.executeSelectQuery14(value, value2);
                 String Activityid = null, EmployeeName = null, StartDate = null, EndDate = null, Activity = null, Project = null, Day1 = null, Day2 = null, Day3 = null, Day4 = null, Day5 = null;

                 try {
                 while (rs.next()) {
                 Activityid = rs.getString("Activityid");
                 EmployeeName = rs.getString("EmployeeName");
                 StartDate = rs.getString("StartDate");
                 EndDate = rs.getString("EndDate");
                 Activity = rs.getString("Activity");
                 Project = rs.getString("Project");
                 Day1 = rs.getString("Day1");
                 Day2 = rs.getString("Day2");
                 Day3 = rs.getString("Day3");
                 Day4 = rs.getString("Day4");
                 Day5 = rs.getString("Day5");

                 String[] columnNames = {"Activityid", "EmployeeName", "StatrDate", "EndDate", "Activity", "Project", "Day1", "Day2", "Day3", "Day3", "Day4", "Day5"};
                 String data[][] = {{Activityid, EmployeeName, StartDate, EndDate, Activity, Project, Day1, Day2, Day3, Day4, Day5}};
                 System.out.println(Activityid + " " + EmployeeName + " " + StartDate + "" + EndDate + "" + Activity + " " + Project + "" + Day1 + "" + Day2 + "" + Day3 + "" + Day4 + "" + Day5);
                 final DefaultTableModel model = new DefaultTableModel(data, columnNames);
                 table2 = new JTable(model);
                 table2.setRowHeight(70);
                 table2.setFillsViewportHeight(true);
                 JTextField field = new JTextField();
                 field.setForeground(Color.RED);
                 field.setBackground(Color.RED);
                 table2.getTableHeader().setPreferredSize(new Dimension(50, 50));
                 table2.getTableHeader().setBackground(Color.blue);
                 table2.getTableHeader().setForeground(Color.white);
                 table2.getTableHeader().setFont(new Font("Serif", Font.BOLD, 15));
                 table2.getTableHeader().setOpaque(true);
                 table2.getModel();
                 table2.setForeground(Color.blue);
                 table2.setBackground(Color.white);
                 table2.setGridColor(Color.MAGENTA);
                 table2.setShowGrid(true);

                 }
                 } catch (SQLException e1) {
                 e1.printStackTrace();
                 }
                 */
            }
        });

        panel.add(label1);
        label1.setForeground(Color.white);
        panel.add(text1);
        panel.add(label2);
        label2.setForeground(Color.white);
        panel.add(text2);
        panel.add(ADD);

        JScrollPane pane = new JScrollPane(table2);
        panel1.add(pane);
        JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, panel, panel1);
        splitPane.setDividerLocation(300);

        employeeFrame.add(splitPane);

        employeeFrame.setExtendedState(Frame.MAXIMIZED_BOTH);
        //employeeFrame.setLocation(100, 50);
        employeeFrame.pack();

        employeeFrame.setVisible(true);
        employeeFrame.setResizable(false);//or else it wont work nicely withn JFrame#setExtendedState
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:43:43.167

通过查看您的代码，我找不到您将表格放置在您实际添加到 SplitPane 中的面板或窗格中的位置。

# android - from.createForm() 在使用 asmack for android 时产生错误

> ID：14894834
> 
> 赞同：1
> 
> 时间：2013-02-15T12:33:13.333
> 
> 标签：android, xmpp, asmack, multi-user

我正在使用 asmack 在我的应用程序中聊天。运行以下代码时出现错误。

```
mXmppConnection=connectionToXmppServer(HOST, PORT, SERVICE, mUserName, mPassword);      

/*creating new chat room*/
MultiUserChat muc = new MultiUserChat(mXmppConnection, "DestinationCountry@conference.domainname");

try {

    /*to create chat room*/

    /*sending configration to server*/
      muc.join(mUserName);
     Form form = muc.getConfigurationForm();
      Form answerForm = form.createAnswerForm();

      answerForm.setAnswer("muc#roomconfig_persistentroom", true);

      muc.sendConfigurationForm(answerForm);

    /*muc.sendConfigurationForm(new Form(Form.TYPE_SUBMIT));*/

/*  muc.join("jack");*/

    muc.sendMessage("i just joined the room");
    Log.i("room name", muc.getRoom());
     muc.addMessageListener(new PacketListener() {
            @Override
            public void processPacket(Packet packet) {

                Message mess = (Message) packet;
                Log.i("msg ",mess.getFrom() + ": " + mess.getBody());
            }
        });

} catch (XMPPException e) {

    Toast.makeText(getApplicationContext(), "test room failed",
            Toast.LENGTH_SHORT).show();
} 
```

下面是我得到的**错误**

```
02-15 17:54:28.409: E/AndroidRuntime(24400):    at java.lang.Thread.run(Thread.java:856)
02-15 17:54:28.409: E/AndroidRuntime(24400): Caused by: java.lang.NullPointerException
02-15 17:54:28.409: E/AndroidRuntime(24400):    at com.example.groupchat.GroupChat$ConnectTOChatServer.doInBackground(GroupChat.java:174)
02-15 17:54:28.409: E/AndroidRuntime(24400):    at     com.example.groupchat.GroupChat$ConnectTOChatServer.doInBackground(GroupChat.java:1)
02-15 17:54:28.409: E/AndroidRuntime(24400):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-15 17:54:28.409: E/AndroidRuntime(24400):    at java.util.concurrent.FutureTask.run(FutureTask.java:234) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-02T14:47:54.677

在创建 Muc 之前或登录之后调用此函数。

```
public void configure(ProviderManager pm) {

    // Private Data Storage
    pm.addIQProvider("query", "jabber:iq:private",
            new PrivateDataManager.PrivateDataIQProvider());

    // Time
    try {
        pm.addIQProvider("query", "jabber:iq:time",
                Class.forName("org.jivesoftware.smackx.packet.Time"));
    } catch (ClassNotFoundException e) {
        Log.w("TestClient",
                "Can't load class for org.jivesoftware.smackx.packet.Time");
    }

    // Roster Exchange
    pm.addExtensionProvider("x", "jabber:x:roster",
            new RosterExchangeProvider());

    // Message Events
    pm.addExtensionProvider("x", "jabber:x:event",
            new MessageEventProvider());

    // Chat State
    pm.addExtensionProvider("active",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());
    pm.addExtensionProvider("composing",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());
    pm.addExtensionProvider("paused",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());
    pm.addExtensionProvider("inactive",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());
    pm.addExtensionProvider("gone",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());

    // XHTML
    pm.addExtensionProvider("html", "http://jabber.org/protocol/xhtml-im",
            new XHTMLExtensionProvider());

    // Group Chat Invitations
    pm.addExtensionProvider("x", "jabber:x:conference",
            new GroupChatInvitation.Provider());

    // Service Discovery # Items
    pm.addIQProvider("query", "http://jabber.org/protocol/disco#items",
            new DiscoverItemsProvider());

    // Service Discovery # Info
    pm.addIQProvider("query", "http://jabber.org/protocol/disco#info",
            new DiscoverInfoProvider());

    // Data Forms
    pm.addExtensionProvider("x", "jabber:x:data", new DataFormProvider());

    // MUC User
    pm.addExtensionProvider("x", "http://jabber.org/protocol/muc#user",
            new MUCUserProvider());

    // MUC Admin
    pm.addIQProvider("query", "http://jabber.org/protocol/muc#admin",
            new MUCAdminProvider());

    // MUC Owner
    pm.addIQProvider("query", "http://jabber.org/protocol/muc#owner",
            new MUCOwnerProvider());

    // Delayed Delivery
    pm.addExtensionProvider("x", "jabber:x:delay",
            new DelayInformationProvider());

    // Version
    try {
        pm.addIQProvider("query", "jabber:iq:version",
                Class.forName("org.jivesoftware.smackx.packet.Version"));
    } catch (ClassNotFoundException e) {
        // Not sure what's happening here.
    }

    // VCard
    pm.addIQProvider("vCard", "vcard-temp", new VCardProvider());

    // Offline Message Requests
    pm.addIQProvider("offline", "http://jabber.org/protocol/offline",
            new OfflineMessageRequest.Provider());

    // Offline Message Indicator
    pm.addExtensionProvider("offline",
            "http://jabber.org/protocol/offline",
            new OfflineMessageInfo.Provider());

    // Last Activity
    pm.addIQProvider("query", "jabber:iq:last", new LastActivity.Provider());

    // User Search
    pm.addIQProvider("query", "jabber:iq:search", new UserSearch.Provider());

    // SharedGroupsInfo
    pm.addIQProvider("sharedgroup",
            "http://www.jivesoftware.org/protocol/sharedgroup",
            new SharedGroupsInfo.Provider());

    // JEP-33: Extended Stanza Addressing
    pm.addExtensionProvider("addresses",
            "http://jabber.org/protocol/address",
            new MultipleAddressesProvider());

    // FileTransfer
    pm.addIQProvider("si", "http://jabber.org/protocol/si",
            new StreamInitiationProvider());

    pm.addIQProvider(
            "query",
            "http://jabber.org/protocol/bytestreams",
            new org.jivesoftware.smackx.bytestreams.socks5.provider.BytestreamsProvider());

    // Privacy
    pm.addIQProvider("query", "jabber:iq:privacy", new PrivacyProvider());
    pm.addIQProvider("command", "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider());
    pm.addExtensionProvider("malformed-action",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.MalformedActionError());
    pm.addExtensionProvider("bad-locale",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadLocaleError());
    pm.addExtensionProvider("bad-payload",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadPayloadError());
    pm.addExtensionProvider("bad-sessionid",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadSessionIDError());
    pm.addExtensionProvider("session-expired",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.SessionExpiredError());
} 
```

# python - 如何在同一个 .py 中对客户端和服务器进行多线程处理，但在不同的端口上

> ID：14894836
> 
> 赞同：1
> 
> 时间：2013-02-15T12:33:22.380
> 
> 标签：python, multithreading, sockets, chat, python-multithreading

我想在 Python 上制作一个聊天程序，这样我就可以发送和接收数据。
我在想我可以运行多个线程，每个线程用于客户端和服务器。
我的问题是
如何在一个文件中为两个类运行多个线程？

我当前的代码：

```
from socket import *
from threading import Thread

class Server(Thread):
    def __init__(self,host,port,user):
        self.port = port
        self.host = host
        self.user = user
        self.bufsize = 1024
        self.addr = (host,port)

        self.socket = socket(AF_INET , SOCK_STREAM)
        self.socket.bind(self.addr)
        Thread.__init__(self)

    def run(self):
        self.socket.listen(5)
        while True:
            print 'Waiting for connection..'
            client, caddr = self.socket.accept()
            print 'Connected To',caddr

            data = client.recv(self.bufsize)
            if not data:
                continue
            print data         

class Client(Thread):
    def __init__(self,host,port,user):
        self.port = port
        self.host = host
        self.user = user
        self.bufsize = 1024
        self.addr = (host,port)

        self.socket = socket(AF_INET , SOCK_STREAM)
        Thread.__init__(self)

    def run(self):
        self.socket.connect(self.addr)
        while True:
            data = raw_input('> ')
            if not data:
                continue
            data = user+' said : '+data
            tcpClient.send(data)

host = ''
p1 = int(raw_input('Enter Port 1 : '))
p2 = int(raw_input('Enter Port 2 : '))
user = raw_input('Enter Your user: ').strip()

client = Client(host,p1,user)
server = Server(host,p2,user)

client.start()
server.start() 
```

我当前的错误消息：

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "C:\Python2.7 For Chintoo\lib\threading.py", line 552, in __bootstrap_inner
    self.run()
  File "C:\Users\karuna\Desktop\Jython\Python\My Modules\Network\Chat.py", line 41, in run
    self.socket.connect(self.addr)
  File "C:\Python2.7 For Chintoo\lib\socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 10049] The requested address is not valid in its context 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:43:36.190

线程模块应该正是您所需要的。[http://docs.python.org/2/library/threading.html](http://docs.python.org/2/library/threading.html)

```
from socket import *
from threading import Thread

class Server(Thread):
    def __init__(self,host,port,name):
        Thread.__init__(self)
        self.port = port
        self.host = host
        self.name = name
        self.bufsize = 1024
        self.addr = (host,port)

        self.socket = socket(AF_INET , SOCK_STREAM)
        self.socket.bind(self.addr)

    def run(self):
        self.socket.listen(5)
        while True:
            print 'Waiting for connection..'
            client, caddr = self.socket.accept()
            print 'Connected To',caddr

            data = client.recv(self.bufsize)
            if not data:
                continue
            print data         

class Client(Thread):
    def __init__(self,host,port,name):
        Thread.__init__(self)
        self.port = port
        self.host = host
        self.name = name
        self.bufsize = 1024
        self.addr = (host,port)

        self.socket = socket(AF_INET , SOCK_STREAM)

    def run(self):
        invalid = True
        while invalid:
            try:
                invalid = False
                self.socket.connect(self.addr)
            except:
                invalid = True

        while True:
            data = raw_input('> ')
            if not data:
                continue
            data = name+' said : '+data
            tcpClient.send(data)

host = ''
p1 = int(raw_input('Enter Port 1 : '))
p2 = int(raw_input('Enter Port 2 : '))
name = raw_input('Enter Your Name: ').strip()

server = Server(host,p2,name)
client = Client(host,p1,name)

server.start()
client.start()

server.join() 
```

同样由于某些原因，如果您创建简单的类，则不应在 python 中使用旧样式类，并且至少从这样的对象继承

类的东西（对象）：....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:39:39.447

好吧，只需启动多个线程：

```
from threading import Thread

class Foo(Thread):
     def __init__(self):
         Thread.__init__(self)
         self.keepRunning = True
     def run(self):
         while self.keepRunning:
            print "running in thread", self

import time
if __name__ == "__main__":
     mythread1 = Foo()
     mythread2 = Foo()
     mythread1.start()
     mythread2.start()
     time.sleep(10) # and let the 2 threads to their work
     mythread1.keepRunning = False
     mythread2.keepRunning = False 
```

# ruby-on-rails - 如果我关闭终端，Heroku 上启动的 rake 任务会继续运行

> ID：14894839
> 
> 赞同：26
> 
> 时间：2013-02-15T12:33:31.197
> 
> 标签：ruby-on-rails, heroku, rake-task

我有一个需要在我的数据上运行的脚本。我为此做了一个耙子任务。如果我通过使用开始 rake 任务，`heroku run rake my_task:my_action`一段时间后我的互联网断开连接。会发生什么。任务是否会继续运行，因为它已在远程计算机上启动。我认为它将继续运行。有任何想法吗。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-15T19:46:59.207

[以一次性测功机](https://devcenter.heroku.com/articles/one-off-dynos)（使用 配置的测功机）启动的进程`heroku run command`连接到您的本地终端，如果您的互联网断开连接或您在本地取消命令，这些进程将终止。

*要在未*连接到本地终端的一次性测功机中执行进程，请[使用`heroku run:detached`](https://devcenter.heroku.com/articles/one-off-dynos#running-tasks-in-background)：

```
$ heroku run:detached bundle exec rake my_task:my_action
Running `bundle exec rake my_task:my_action` detached... up, run.7562
Use `heroku logs -p run.7562` to view the output. 
```

要检查一次性测功机是否仍在运行，请使用`heroku ps`. 一次性测功机被命名为某个数字`run.X`在哪里。`X`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:00:43.920

伙计们，在尝试和探索之后，我发现在正常情况下它不会继续。当终端关闭时，管道破裂并停止继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T18:22:27.013

`screen`如果您断开连接，您可以运行您的 rake以防止您的脚本/rake 中断。

[http://www.gnu.org/software/screen/manual/screen.html](http://www.gnu.org/software/screen/manual/screen.html)

# iphone - UIScrollView 的开源替代品

> ID：14894845
> 
> 赞同：0
> 
> 时间：2013-02-15T12:33:43.037
> 
> 标签：iphone, ios, ipad, uiscrollview, uikit

UIScrollView 有哪些开源替代品？

我需要`paging`，如果我们可以按该功能进行分类，那就太棒了。

我正在寻找替代方案，唯一的原因是 Apple 建议不要将 UIWebView 放在 UIScrollView 中。更具体地说，我在 iOS 5 上遇到了`fixed`内容问题。但让我们坚持这个问题：UIScrollView 的替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T08:44:49.440

检查 TTScrollView，它是著名的 Three20 框架的一部分。 [https://github.com/facebook/three20/blob/master/src/Three20UI/Headers/TTScrollView.h](https://github.com/facebook/three20/blob/master/src/Three20UI/Headers/TTScrollView.h)

* * *

[2013-09-16 编辑]

[CHScrollView](https://github.com/haifengkao/CHScrollView)是 UIScrollView 的另一个开源替代品。是我自己写的：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:44:54.270

如果您想制作照片库之类的东西，但要使用 Web 视图而不是照片，您可以使用 UIPageViewController 来显示 Web 视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:46:52.257

查看 DDPageControl

[https://github.com/ddeville/DDPageControl](https://github.com/ddeville/DDPageControl)

如需更多控件，请在[http://cocoacontrols.com上搜索](http://cocoacontrols.com)

# php - PHP 和 MySQL：任务 72 小时到期

> ID：14894849
> 
> 赞同：1
> 
> 时间：2013-02-15T12:33:55.370
> 
> 标签：php, mysql

我正在尝试在 PHP 和 MySQL 中创建一个站点，其中一个人被分配为另一个人执行任务。分配给完成任务的时间段是 72 小时。

如果完成，其他人将确认。如果没有，我想采取某些措施（例如阻止他的帐户、发送电子邮件、将任务分配给其他人等）。最好的方法是什么？

随着倒计时逐秒运行，我想我必须每秒运行一个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:36:25.453

您可以使用 cronjob 检查截止日期并最终发送电子邮件、阻止帐户等...

虽然，如果您确实需要每秒精度，您可能希望使用具有“无限”循环的单个进程并在其间进行一些睡眠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:38:46.123

如果您的服务器来自 *nix 系列，您可以使用 cron/crontab。请参阅使用示例：[http](http://en.wikipedia.org/wiki/Cron) ://en.wikipedia.org/wiki/Cron和[https://help.ubuntu.com/community/CronHowto](https://help.ubuntu.com/community/CronHowto)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:40:40.040

如果我需要做类似的事情，我可能会按照以下步骤进行：

1.  创建活动并计算截止日期

2.  设置一个 cronjob 在截止时间运行

3.  cronjob 检查事件状态并采取行动

我认为这将是最有效的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T12:46:07.067

> 我正在尝试在 PHP 和 MySQL 中创建一个站点，其中一个人被分配为另一个人执行任务。分配给完成任务的时间段是 72 小时。

这些可能只是 db vales

表任务

```
.id
.user_assigned
.strart_date
.end_date
.status
.desc 
```

> 如果完成，其他人将确认。如果没有，我想采取某些措施（例如阻止他的帐户、发送电子邮件、将任务分配给其他人等）。最好的方法是什么？

同样，具有分配工作布局的某种形式的管理面板，应该要求“工人”将工作发布为“完成”，然后“管理员”可以确认这一点。这都可以通过 db ''table_task.status'' 中的值进行管理

> 随着倒计时逐秒运行，我想我必须每秒运行一个脚本。^-- 服务器自杀

最多每小时运行一次 cron。如果你有 1000 个用户。然后这个 cron 将每秒运行 1000

在一小时内，60000*60

如果您需要显示时间，请使用某种形式的 jQuery。有很多时钟脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T13:06:26.863

很少有事情必须立即发生。如果你已经等了 72 小时才发生某件事，那么在几分钟内发生的动作就没有那么重要了。

如果你真的希望事情发生得如此之快，而且你在潜在事件之间总是有很长的时间，我建议的一件事是不要使用 cronjob，而是更类似于@muc 建议的东西 - 一个定期运行的脚本在一个将继续运行的shell脚本中（只需在最后执行'exec $0'以在脚本退出时重新运行脚本）。

检查数据库的脚本（例如在 PHP 中）也不必一直运行。每当它发现将在几秒钟内发生的事情时，它就会休眠直到下一个事件将要发生。当它醒来时，它可以再次检查它是否仍然是必需的，然后执行相关的工作。

```
<?php
$jobId = whatToRunNext();
if (! $jobId) {
  exit;
}
$secsToNextJob = howLongToNextJob($jobId);
if ($secsToNextJob > 0) {
   sleep($secsToNextJob);
   if (! jobStillRequired($jobId)) {
      exit;
   }
}
doJob($jobId);
exit; 
```

将它包装在一个 shell sript 中，让它保持运行，也许在 bash 脚本中稍微休眠一下，你会很好 - 虽然不是在一个非常长时间运行的 CPU 杀死循环中。

# makefile - 在 Kdevelop 中启用编译器警告

> ID：14894852
> 
> 赞同：1
> 
> 时间：2013-02-15T12:34:15.967
> 
> 标签：makefile, g++, kdevelop

我将 Kdevelop 用于一个简单的 C++ 项目。我知道 Kdevelop 使用 CMake 来构建项目，但我唯一知道的关于 CMake 的事情是，如果我`.cpp`在项目中添加一个新的源文件，我必须将它也添加到`CMakeLists.txt`.

现在我正在尝试启用 tha`gcc`编译器警告（即使用 编译`g++ -Wall ...`）。

Kdevelop 是否有编译器设置部分，或者我必须直接编辑`Makefile`或其他 CMake 设置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:21:19.563

您可以通过将以下命令添加到 CMakeLists.txt 中来在 CMake 中添加编译器标志：

```
list( APPEND CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall") 
```

# java - 如何在 Javafx2 中选择多个文件夹和文件？

> ID：14894863
> 
> 赞同：5
> 
> 时间：2013-02-15T12:35:11.583
> 
> 标签：java, javafx-2, javafx

我正在研究，`javafx 2.`但`filechooser`.

有，`Directory chooser`但它只选择一个文件夹。我怎么解决这个问题。请给我什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:04:56.407

JavaFX 支持单个和多个文件对话框：

[http://docs.oracle.com/javafx/2/api/javafx/stage/FileChooser.html](http://docs.oracle.com/javafx/2/api/javafx/stage/FileChooser.html)

和单目录对话框：

[http://docs.oracle.com/javafx/2/api/javafx/stage/DirectoryChooser.html](http://docs.oracle.com/javafx/2/api/javafx/stage/DirectoryChooser.html)

为此有一个特殊的 RFE：[https](https://bugs.openjdk.java.net/browse/JDK-8101526) ://bugs.openjdk.java.net/browse/JDK-8101526 。

多个目录 chosign 有一个特殊的 RFE，您可以等待，直到它被修复：[https](https://bugs.openjdk.java.net/browse/JDK-8091403) ://bugs.openjdk.java.net/browse/JDK-8091403 ，也可以投票给它，让它成为以更高的优先级固定

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T07:16:04.403

我们可以使用 Swing 组件的 JFileChooer。但随后它给出了像 Headless 这样的错误。因此，请按照以下步骤删除此错误。

1）在javafx之前初始化swing的所有组件。2）使用 System.setProperty 并设置 Headless false 。

然后 jfilechooser 工作。谢谢大家。

# c# - 如何下载没有 nuget.exe 或 Visual Studio 扩展的 Nuget 包？

> ID：14894864
> 
> 赞同：151
> 
> 时间：2013-02-15T12:35:25.363
> 
> 标签：c#, .net, visual-studio, nuget

如何下载 NuGet 包？我没有 NuGet Visual Studio 扩展或命令行程序 nuget.exe。如何从网上下载 .nupack 文件？据我了解，我将能够从中提取`.dll`文件（使用 7-zip）以正常使用。

我碰巧感兴趣的包是[http://nuget.org/packages/Microsoft.Bcl.Async](http://nuget.org/packages/Microsoft.Bcl.Async)，但我想知道如何做到这*一点*。

在 Ruby 世界中，这很容易 - RubyGems 网站上的每个包页面都有一个指向 .gem 文件的下载链接，例如：[https ://rubygems.org/gems/pony](https://rubygems.org/gems/pony)

* * *

关于 NuGet 明显命运的争论属于别处。我为什么回避这个问题并不重要。[我不是唯一一个](https://i.imgur.com/6RU18WB.png)。

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-02-15T12:53:48.203

在 Nuget.org 网站上创建一个帐户，然后登录，浏览到所需的包，然后单击左侧菜单上的**下载链接。**

* * *

或猜测网址。它们具有以下格式：

```
https://www.nuget.org/api/v2/package/{packageID}/{packageVersion} 
```

然后只需解压缩 .nupkg 文件并提取您需要的内容。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-09-20T16:37:59.670

尽管仍然可以构建 URL 或使用工具，但不再需要它。

**[https://www.nuget.org/](https://www.nuget.org/)目前有一个名为“下载包”的下载链接**，即使您在该网站上没有帐户也可以使用。

（在右栏的底部）。

* * *

EntityFramework 的详细页面示例：[https](https://www.nuget.org/packages/EntityFramework/) : *//www.nuget.org/packages/EntityFramework/ :(在 kwitee 评论后更新。* )

[![EntityFramework 详情页示例](../Images/5f0030755d54edccaa0f8001b0bea0d3.png)](https://i.stack.imgur.com/Szkjr.png)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-02-20T23:34:37.660

根据[Xavier 的回答](https://stackoverflow.com/a/14895173/1501497)，我编写了一个 Google chrome 扩展[NuTake](https://chrome.google.com/webstore/detail/nutake/ibhhbcaipjilldjkhhblhgdedjgoecap?hl=en&gl=GB)来添加指向 Nuget.org 包页面的链接。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-09-04T20:58:58.570

要获取 NuGet 包的当前稳定版本，请使用：

```
https://www.nuget.org/api/v2/package/{packageID} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-02-15T12:49:41.483

我还没有尝试过，但看起来 NuGet 包资源管理器应该能够做到：

[https://github.com/NuGetPackageExplorer/NuGetPackageExplorer](https://github.com/NuGetPackageExplorer/NuGetPackageExplorer)

[![NuGet 包资源管理器](../Images/d45c7c4f488bec90179dd6c3833db79b.png)](https://i.stack.imgur.com/0kRXQ.png)

（或者就像恐慌上校所说，7-zip 应该可以做到）

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-06-15T19:27:58.073

1.  访问[http://www.nuget.org](http://www.nuget.org)
2.  搜索所需的包。例如：Microsoft.Owin.Host.SystemWeb
3.  单击左侧的下载链接下载软件包。
4.  对尚未安装的依赖项执行第 3 步。 [![Nuget 下载页面](../Images/89da588a845dcdf7b6fab33320ab2212.png)](https://i.stack.imgur.com/Yx5Wc.jpg)
5.  将所有下载的包存储在自定义文件夹中。默认值为 c:\Package 源。
6.  在 Visual Studio 中打开 Nuget 包管理器，确保您有一个指向步骤 5 中指定地址的“可用包源”；如果没有，只需通过提供自定义名称和地址来添加一个。单击确定。 [![工具->管理 NuGet 包->包管理器设置](../Images/04a484b9e6de4ed8ca7ed2ad72c1978f.png)](https://i.stack.imgur.com/OnnXo.jpg) [![NuGet 包管理器选项窗口](../Images/94acfe5129891aa4c7ed78ed282d1e5d.png)](https://i.stack.imgur.com/or292.png)
7.  此时，您应该能够以与**通过界面**安装在线软件包完全相同的方式安装软件包。您可能无法使用 NuGet 控制台安装包。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-20T07:48:01.753

不知道这是否是你想要的，但这里是：

1.  从官方 NuGet 站点下载`nuget.exe`（~6.5MB，无需安装）：[https ://www.nuget.org/downloads](https://www.nuget.org/downloads)
2.  在 CLI 中键入以下内容以检索可用包的列表：`nuget.exe list -source <source-url-here>`
3.  然后通过键入以下内容下载包：`nuget.exe install <package-name> -source <source-url-here> -OutputDirectory <download-directory>`

下载的包的内容是`.nupkg`文件，`.dll`x86 和 x64 的文件以及`.props`文件`.targets`。顺便说一句：`.nupkg`可以作为`.zip`文件打开。

# dll - 如何获取 DLL 文件的函数参数和返回类型？

> ID：14894867
> 
> 赞同：1
> 
> 时间：2013-02-15T12:35:31.103
> 
> 标签：dll, dllexport, dlltool

我们如何获取带有参数和返回类型的 DLL 文件的导出函数列表？我不知道 DLL 是用哪种语言构建的。我尝试了所有关于 DLL 的工具，但没有工具给出带有参数和返回类型的特定列表。

# ios - NSArray containsObject：更快的选择？

> ID：14894868
> 
> 赞同：7
> 
> 时间：2013-02-15T12:35:38.020
> 
> 标签：ios, objective-c, nsarray

我使用 Instruments 在我的 iOS 应用程序上运行了一些程序，发现启动时主线程上 90% 的负载（总共约 1000 毫秒）是由 containsObject: 调用引起的。那是在主线程上，我不认为这很酷。

这种方法有更快的替代方法吗？算法还是其他方法？

有什么建议么？

**更多信息：**

1.  我再次查看了我的代码，我意识到实际上我不需要知道对象的顺序，只要一个对象是该集合的一部分。这意味着 NSSet 会做得很好（我猜更快）。

2.  对象数量 - 该集合中很可能有 1000 多个对象。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T12:43:08.477

如果您**需要**使用数组，请再往下跳一点

* * *

## 备用选项

您的其他选择可能包括：

*   使用一个`NSDictionary`使用键->值对的键->值对（我希望）具有 O(1) 读取复杂性，代价是键的额外存储空间

*   如果您不使用重复项并且顺序并不重要，则使用 an`NSSet`将提供更好的读取复杂性（我不知道复杂性是什么，文档可能会）

* * *

## 使用数组

如果您保持数组排序，则可以及时完成搜索，`O(log n)`而不是`O(n)`利用二进制搜索。

***警告讲师**：这是凭记忆写的*

```
-(void) /*adding*/
{
    int proposedIndex = 0;
    proposedIndex = [array indexOfObject:node
                                inSortedRange:NSMakeRange(0, array.count)
                                      options:NSBinarySearchingInsertionIndex
                              usingComparator:
                      ^ NSComparisonResult(id obj1, id obj2)
                      {
                          if (obj1.valueToCompare < obj2.valueToCompare) return NSOrderedAscending;
                          if (obj1.valueToCompare > obj2.valueToCompare) return NSOrderedDescending;
                          else return NSOrderedSame;
                      }];

    [array insertObject:node atIndex:proposedIndex];
}

-(id) /* Getting */
{
    int location = [array indexOfObject:node
                                    inSortedRange:NSMakeRange(0, array.count)
                                          options:NSBinarySearchingFirstEqual
                                  usingComparator:
                          ^ NSComparisonResult(id obj1, id obj2)
                          {
                              if (obj1.valueToCompare < obj2.valueToCompare) return NSOrderedAscending;
                              if (obj1.valueToCompare > obj2.valueToCompare) return NSOrderedDescending;
                              else return NSOrderedSame;
                          }];
    if (location == NSNotFound) return nil;
    return [array objectAtIndex:location];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-15T05:00:21.930

您可以使用`NSSet containsObject`比`NSArray`

# asp.net - 如何从asp.net中的aweber列表中获取所有用户？

> ID：14894876
> 
> 赞同：1
> 
> 时间：2013-02-15T12:36:28.747
> 
> 标签：asp.net, list, aweber

我正在开发获取所有 aweber 用户列表的 Web 应用程序（使用 VS2010 和 asp.net，c#）。我正在使用以下代码来实现它。

我正在使用[这个](http://aweber.codeplex.com/documentation)有用的文件。根据这个文件，我做了以下事情..

1.  在 aweber 实验室创建帐户[https://labs.aweber.com/](https://labs.aweber.com/)
2.  创建“测试”应用
3.  使用 aweber 团队提供的“consumerKey”和“consumerSecret”代码。
4.  使用以下代码

    ```
    String consumerKey = "Afdgdfgdgfgdfll";
    String consumerSecret = "zDKexfgdfgdfQqlKh5KD";
    API api = new API(consumerKey, consumerSecret);
    api.CallbackUrl = "http://" + Request.Url.Host + ":" + Request.Url.Port + "/Authorize.aspx";
    api.get_request_token();
    HttpContext.Current.Session.Add("oauth_token", api.OAuthToken);
    HttpContext.Current.Session.Add("oauth_token_secret", api.OAuthTokenSecret);
    api.authorize(); 
    ```

我得到空值“OAuthToken”。如果有任何解决方案，请让我指导。

提前致谢。！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:07:02.730

查看[http://aweber.codeplex.com/](http://aweber.codeplex.com/)

这将为您节省大量工作。

# javascript - 如何在div的底部保持滚动条？

> ID：14894878
> 
> 赞同：2
> 
> 时间：2013-02-15T12:36:31.637
> 
> 标签：javascript, jquery, asp.net-mvc, scroll, scrollbar

我有很多选项卡，当单击任何选项卡时，会显示一个垂直滚动的 div。喜欢 facebook 消息页面：单击任何用户名时。出现对话框，滚动条**默认位于 div 的底部**。

这是标签：

```
<ul class="companies">
    @foreach (var item in Model)
    {
       <li id='company_@(item.Id)' data-id='@item.Id' >
           <a>@item.Name</a>
       </li>
    }
</ul> 
```

和内容：

```
@foreach (var item in Model)
{
   <div id="scrollingDiv"  class="scrollingDiv"> @item.News </div>
} 
```

和 CSS：

```
.scrollingDiv {
    overflow-x: hidden;
    max-height: 500px;
    overflow-y: scroll;
} 
```

单击任何选项卡时，我想将滚动条保持在底部。（总是看到最新消息）。也是当前的div。我检查了 [这个](https://stackoverflow.com/questions/270612/scroll-to-bottom-of-div)问题。但在我的应用程序中不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:44:39.357

With JavaScript, you can do something like

```
var d = document.getElementById('myDiv');

if(d.scrollHeight > d.clientHeight) {
  d.scrollTop = d.scrollHeight - d.clientHeight;
} 
```

and execute this logic every time you add content to the div or when you want the scrollable container to scroll to the bottom.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:43:56.897

jQuery's `scrollTop()` function might be just what you need. See [http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-17T09:11:47.770

您可以使用以下代码来实现它

```
$('.full-area').scrollTop($('.full-area')[0].scrollHeight); 
```

# ruby - 如何在 Sidekiq 中运行工人一段时间？

> ID：14894881
> 
> 赞同：3
> 
> 时间：2013-02-15T12:36:51.997
> 
> 标签：ruby, ruby-on-rails-3, sidekiq

我正在编写一个 Rails 应用程序，其中有一段依赖于时区的代码。

如何让我的 Sidekiq 工作人员只在某个时区的白天工作，即每天工作一段时间。

即使它的队列不为空，工作人员也应该在某个时间点（一天结束）暂停并在第二天恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:35:12.557

I suggest starting a Cron Job, using the whenever gem that stops the Sidekiq workers at a certain time, and starts them again at a certain time.

You can stop sidekiq workers via sidekiqctl: sidekiqctl stop [pidfile] 60

# android - setImageResource() 不会直接更新我的 ImageView 大小/内容

> ID：14894885
> 
> 赞同：2
> 
> 时间：2013-02-15T12:37:18.947
> 
> 标签：android, android-layout

我在ListView活动中有一行，其中选择行时应更改图像。新图像与原始图像相同但更大（两倍大小）。再次取消选择时应该减少它（选择是使用我的内部选择实现的，而不是android键盘选择类型）。

问题是当（选定）我使用 setImageResource() 更改 ImageView () 的图片（在绑定时）时，它不会在第一次单击时更新到我的 List 行中的新更大版本。绑定的第二次执行工作正常。这同样适用于被取消选择的旧项目。在第二次单击之前，对较小图标的更改不会生效。每次我选择当前选择的行之外的另一行并在第二次单击时再次开始正常工作时，问题都会重复出现。

我已经逐步完成了代码，看到我将正确的 id 传递给了 ImageView，事实证明，在同一行上显示黄色边框的另一个视图在选择/取消选择时更改为可见/隐藏。

对我来说，感觉 setImageResource() 不会立即刷新视图，但在视图或行上使用 invalidate() 根本没有效果。

这是一个错误（如何解决）还是我做错了什么？

代码：（来自我的持有人类，使用持有人模式 - 由适配器绑定方法执行）

```
@Override
public void refreshFromCursor(final Context context, final Cursor cursor) {
...
boolean selected = adapter.getSelectedPosition()==cursor.getPosition();
if (selected){
  selectedIndicator.setVisibility(View.VISIBLE); // Show a "selected" yellow border indicator to the left
} else {
  selectedIndicator.setVisibility(View.GONE); // Hide a "selected" yellow border indicator to the left
}
...
if (selected) completionResId = R.drawable.folder_selected;
else completionResId = R.drawable.folder;
...
statusIcon.setImageResource(completionResId); // !!!!! This is where I set the image that does not refresh/resize
...
} 
```

还测试了交换

```
statusIcon.setImageResource(completionResId); 
```

和

```
statusIcon.setImageDrawable(context.getResources().getDrawable(completionResId)); 
```

但有问题的行为没有任何变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:32:37.280

在我看来，这与您实施的方式有关，

如果您向我们提供 refreshFromCursor(...) 函数的完整代码，我们可以更好地了解您所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-03T05:59:28.133

我发现了一个黑客。只是让你的drawable更大

```
<vector xmlns:android="http://schemas.android.com/apk/res/android"
android:width="500dp"
android:height="500dp"
android:viewportWidth="139"
android:viewportHeight="139">

<path
    android:fillColor="#000000"
    android:pathData="M117.037,61.441L36.333,14.846c..." />
</vector> 
```

在这里，我将可绘制对象设置为在 500dp 画布上绘制（而不是原来的 139dp 画布），它成功了。不再有后来变大的奇怪小图标。

# rabbitmq - 电子邮件 - 使用自定义解决方案或使用 Celery/RabbitMQ 处理广告网站电子邮件？

> ID：14894887
> 
> 赞同：0
> 
> 时间：2013-02-15T12:37:37.630
> 
> 标签：rabbitmq, message-queue, celery, email-processing

我需要为一个预计每小时发送 20 或 30 封电子邮件的中型项目处理电子邮件。

我在其他项目中设计了一个解决方案，它使用一个数据库表和一个每 5 或 10 分钟运行一次的 cronjob 来处理这个问题。数据库表非常简单。看起来像这样：

```
CREATE TABLE "atem_emails_envios" (
    "id_email_envio" int4 NOT NULL,
    "id_email_msg" varchar(20) NOT NULL,
    "dat_inserted" timestamp NOT NULL,
    "dat_sended" timestamp,
    "try_number" int4,
    "max_tries" int4 NOT NULL,
    "email_from" varchar(500) NOT NULL,
    "email_to" varchar(500) NOT NULL,
    "email_cc" varchar(500),
    "email_bcc" varchar(500),
    "email_subject" varchar(500) NOT NULL,
    "email_msg" text NOT NULL,
    "error_msg" text,
    "i_started" timestamp,
    "pid" int4,
    "coment" varchar(2000),
    "id_utiliz_ins" varchar(45),
    "id_utiliz_upd" varchar(45),
    "data_ult_actual" timestamp,
  PRIMARY KEY("id_email_envio"),
  CONSTRAINT "Ref_atem_emails_envios_to_atem_mensagens_email" FOREIGN KEY ("id_email_msg")
    REFERENCES "atem_mensagens_email"("id_email_msg")
    MATCH SIMPLE
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE
); 
```

处理电子邮件时，我只是将 PID 存储到表中以避免冲突。

我的问题朝着这个方向发展。我一直在使用此表来处理流量较低的网站中的电子邮件，并且效果很好。使用像 Celery 这样的队列管理器和像 RabbitMQ 这样的代理有什么优势？在我看来，我将增加另一层复杂性。使用像 Celery/RabbitMQ 这样的解决方案我会获得什么好处？

请给我一些线索。

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:53:30.003

就像那句古老的格言“它没有坏，不要修理它”。如果您不打算扩展或担心当前的 CRON/PG 设置，听起来您真的不需要使架构复杂化。

也就是说，使用像 Celery 这样的异步框架是有好处的。仅举几例：

*   您很可能有未来可以利用异步系统的用例（SMS 发送、用户处理、集成、缓存预热、webhook 等）
*   如果/当您扩展时更容易维护，因为它有据可查并且拥有庞大的社区
*   更高的可见性和控制力

至于复杂性，我们构建了与 Celery 的集成，因此您可以用我们的云消息队列服务[IronMQ](http://iron.io/celery)替换代理。查看[http://Iron.io/celery](http://Iron.io/celery)。这将通过替换 RabbitMQ 来帮助降低复杂性和代理故障点。

希望这可以帮助！

# asp.net - 哪个母版页事件在加载或加载每个内容页面后触发？

> ID：14894889
> 
> 赞同：1
> 
> 时间：2013-02-15T12:37:48.377
> 
> 标签：asp.net, master-pages

在加载每个内容页面时，我想获取内容页面名称。所以我想知道每个内容页面加载时都会触发哪个母版页事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:45:44.623

这是一个可能有帮助的资源，它说明了 ASP.NET 页面发生的事件：

[http://weblogs.asp.net/ricardoperes/archive/2009/03/08/asp-net-page-events-lifecycle.aspx](http://weblogs.asp.net/ricardoperes/archive/2009/03/08/asp-net-page-events-lifecycle.aspx)

1.  Page.OnPreInit
2.  MasterPageControl.OnInit（用于母版页上的每个控件）
3.  Control.OnInit（针对页面上的每个控件）
4.  MasterPage.OnInit
5.  Page.OnInit
6.  Page.OnInitComplete
7.  Page.LoadPageStateFromPersistenceMedium
8.  Page.LoadViewState
9.  MasterPage.LoadViewState
10.  Page.OnPreLoad
11.  Page.OnLoad
12.  MasterPage.OnLoad
13.  MasterPageControl.OnLoad（对于母版页上的每个控件）
14.  Control.OnLoad（针对页面上的每个控件）
15.  OnXXX（控制事件）
16.  MasterPage.OnBubbleEvent
17.  Page.OnBubbleEvent
18.  Page.OnLoadComplete
19.  Page.OnPreRender
20.  MasterPage.OnPreRender
21.  MasterPageControl.OnPreRender（用于母版页上的每个控件）
22.  Control.OnPreRender（针对页面上的每个控件）
23.  Page.OnPreRenderComplete
24.  MasterPageControl.SaveControlState（对于母版页上的每个控件）
25.  Control.SaveControlState（针对页面上的每个控件）
26.  Page.SaveViewState
27.  MasterPage.SaveViewState
28.  Page.SavePageStateToPersistenceMedium
29.  Page.OnSaveStateComplete
30.  MasterPageControl.OnUnload（针对母版页上的每个控件）
31.  Control.OnUnload（针对页面上的每个控件）
32.  MasterPage.OnUnload
33.  Page.OnUnload

这里还有[关于 ASP.NET 页面生命周期的官方文档，](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)其中详细介绍了所有事件。希望这会对您有所帮助。

编辑;

嗯，实际上上面看起来有点过头了。看起来您需要做的就是 - 在每个内容页面中，确保引用 ASPX 文件中的母版页：

`<%@ MasterType virtualpath="~/Masters/Master1.master" %>`

然后在母版页中有一个公共方法，例如：

```
public void LogContentPageName(string name)
{
    // Do whatever you want with the passed name.
} 
```

然后在内容页面的 Page_Load 事件中，您可以执行以下操作：

```
protected void Page_Load(object sender, Eventargs e)
{
    Master.LogContentPageName("Whatever");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:44:41.087

Please try with below event

> protected override void OnInit(EventArgs e) { //do your stuff here }

# android - 完全以编程方式创建带边框的 Drawable

> ID：14894892
> 
> 赞同：1
> 
> 时间：2013-02-15T12:37:52.297
> 
> 标签：android, border, layer

我有以下xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
  <item>
    <shape
      android:shape="rectangle">
      <stroke android:width="1dp" android:color="#000000" />
      <solid android:color="#000000" />
    </shape>
  </item>

  <item android:top="0dp" android:bottom="1dp">
    <shape
      android:shape="rectangle">
      <stroke android:width="1dp" android:color="#414141" />
      <solid android:color="#414141" />
    </shape>
  </item>

  <item android:top="1dp" android:bottom="1dp">
    <shape
      android:shape="rectangle">
      <stroke android:width="1dp" android:color="#2C2C2C" />
      <solid android:color="#2C2C2C" />
    </shape>
  </item>
</layer-list> 
```

这正是我想要的，但我不能使用它。我想在运行时更改三层的颜色，所以我必须完全以编程方式完成。我知道我必须使用 LayerDrawable 但我不知道如何实现 android:top 和 android:bottom 的等价物。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T02:55:03.977

```
ImageView imageView1 = (ImageView) findViewById(R.id.imgView1);
    ((GradientDrawable ) imageView1.getBackground()).setColorFilter(
            Color.RED,  PorterDuff.Mode.SRC_ATOP); 
```

# validation - 有效国际电话号码的最短长度是多少？

> ID：14894899
> 
> 赞同：174
> 
> 时间：2013-02-15T12:38:33.277
> 
> 标签：validation

我需要验证国际电话号码的用户输入。根据[E.164](https://en.wikipedia.org/wiki/E.164)，最大长度为 15 位，但我无法找到有关最小值的任何信息。我只考虑数字，没有加号或分隔符。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-07-23T15:17:42.563

根据不同的来源，我认为 E-164 格式的最小长度取决于国家/地区。例如：

*   **对于以色列**：最小电话号码长度（不包括国家代码）为 8 位。-[官方来源](http://www.moc.gov.il/sip_storage/FILES/3/373.pdf) （国家代码 972）
*   **对于瑞典**：最小号码长度（不包括国家代码）为 7 位数字。-[官方来源](http://www.itu.int/dms_pub/itu-t/oth/02/07/T02070000060001MSWE.doc)‎（国家代码 46）

*   **对于所罗门群岛**，其 5 用于固定电话。-[来源](http://en.wikipedia.org/wiki/Telephone_numbers_in_the_Solomon_Islands)（国家代码 677）

... 等等。因此，包括国家代码在内，瑞典的最小长度为 9 位，以色列为 11 位，所罗门群岛为 8 位。

**编辑（干净的解决方案）**：实际上，您可以使用**谷歌的[libphonenumber](https://github.com/googlei18n/libphonenumber)库**，而不是通过不同的检查（如长度等）来验证国际电话号码。它可以直接验证E164格式的电话号码。它将考虑所有因素，如果号码是有效的 E164 格式，您甚至不需要提供国家/地区。这个很不错！举个例子：

```
String phoneNumberE164Format = "+14167129018"
PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
try {
    PhoneNumber phoneNumberProto = phoneUtil.parse(phoneNumberE164Format, null);
    boolean isValid = phoneUtil.isValidNumber(phoneNumberProto); // returns true if valid
    if (isValid) {
        // Actions to perform if the number is valid
    } else {
        // Do necessary actions if its not valid 
    }
} catch (NumberParseException e) {
    System.err.println("NumberParseException was thrown: " + e.toString());
} 
```

如果您知道要验证数字的国家/地区，您甚至不需要 E164 格式，并且可以在`.parse`函数中指定国家/地区而不是传递`null`.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-05-16T06:03:56.133

Saint Helena（格式：+290 XXXX）和纽埃（格式：+683 XXXX）的最小长度为 4。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-07-18T21:40:45.410

**编辑 2015-06-27：最小值实际上是 8，包括国家代码。我的错。**

*原帖*

我使用的最小电话号码是 10 位数。国际用户应该总是输入他们的国家代码，据我所知，如果算上国家代码，没有少于十位数的国家。

更多信息：[https ://en.wikipedia.org/wiki/Telephone_numbering_plan](https://en.wikipedia.org/wiki/Telephone_numbering_plan)

# windows - 如何查看在 Windows 7 服务器上运行的詹金斯奴隶上运行的硒测试？

> ID：14894905
> 
> 赞同：1
> 
> 时间：2013-02-15T12:38:40.440
> 
> 标签：windows, selenium, jenkins, master-slave

我们有一个构建环境，Jenkins 在 linux 服务器上运行。为了在 Windows 特定项目上运行一些集成测试，我们将 Windows 7 服务器 vm 设置为 hudson 从站。此设置一切正常。

这些集成测试由一组 selenium 测试组成，为了诊断故障，见证测试运行会很有用。

通过 RDC 连接到服务器时，使用相同的用户名，主服务器正在运行从服务器，我没有看到正在运行的测试，并且 Jenkins 从服务器和 Firefox 实例没有显示在任务管理器上。选择查看所有进程我可以看到从属进程和在我连接的用户名下运行的 firefox 进程，并且 firefox 正在使用 -foreground 标志运行。

我只能得出结论，我已经在同一个帐户上作为单独的并发连接进行连接，有没有办法连接到运行 hudson slave 的同一个会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:43:30.437

我们尝试了以下方法来检查正在运行的测试

*   使用VMWare vsphere客户端登录并打开VM机器的控制台
*   只要测试运行，我们就尝试记录整个桌面会话，并将记录的会话与 jenkins 构建一起制作。我们使用了 VLC 记录器，它可以在测试开始之前从命令提示符（来自 jenkins）启动，并在测试完成执行后保存它们。保存的记录文件被添加到构建工件中。

这些是比干扰原始连接更好的方法，因为这可能会破坏当前会话的运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-26T14:40:18.407

设置 Jenkins 在 Jenkins 上设置 AllurePlugin 在您的测试中设置 Allure 报告（真的很简单）

如果一切按计划进行，您将可以直接从 jenkins 获得报告。

# vb6 - 使用 VB6 登录网站

> ID：14894911
> 
> 赞同：1
> 
> 时间：2013-02-15T12:39:05.857
> 
> 标签：vb6, web

我想使用 Visual Basic 6 登录网站，这是我的代码：

```
Private Sub Command1_Click()
WebBrowser1.Document.All("btnSubmit").Click
End Sub

Private Sub Form_Load()
WebBrowser1.Navigate "https://golestan.farzanegan.ac.ir/Forms/AuthenticateUser/main.htm"
End Sub

Private Sub Text1_Change()
WebBrowser1.Document.All("F80351").Value = Text1.Text
'WebBrowser1.Document.getElementById("F80351").innertext = Text1.Text 'also this code dosen't work
End Sub 
```

发生 Text1_Change 事件时出现此错误：

> “错误 91：对象变量或未设置块变量”

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:39:21.390

您必须编写正确的元素名称或 ID。如果您知道名称或 ID 和类型，您可以试试这个：

```
Private Sub Text1_Change()
  On Error Resume Next
  For i = 0 To WebBrowser1.Document.Forms(0).length - 1
     If WebBrowser1.Document.Forms(0)(i).Type = "text" and WebBrowser1.Document.Forms(0)(i).Name = "F80351" Then
        WebBrowser1.Document.Forms(0)(i).Value = Text1.text
     End If
  Next i
End Sub 
```

您也可以使用 WebBrowser1.Document.Forms(0)(i).Type = "password" 代替 "text" 和 WebBrowser1.Document.Forms(0)(i).Id 代替 "name"

如果名称或 ID 是动态生成的，则不应按 id 或名称查找元素。只需使用类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:16:47.140

以下工作需要 LibCurl：[http ://curl.haxx.se/gknw.net/7.29.0/dist-w32/curl-7.29.0-devel-mingw32.zip](http://curl.haxx.se/gknw.net/7.29.0/dist-w32/curl-7.29.0-devel-mingw32.zip)

以及 libCurl 的 vb6 绑定：http: [//sourceforge.net/projects/libcurl-vb/](http://sourceforge.net/projects/libcurl-vb/)

主功能：

```
Public Sub Login()

Dim buf As New StringBuffer
        CurlContext = vbcurl_easy_init()
        vbcurl_easy_setopt CurlContext, CURLOPT_URL, "https://www.website.com/login-verify-user.wml"
        vbcurl_easy_setopt CurlContext, CURLOPT_COOKIEJAR, App.Path & "\cookie.txt"
        vbcurl_easy_setopt CurlContext, CURLOPT_COOKIEFILE, App.Path & "\cookie.txt"
        vbcurl_easy_setopt CurlContext, CURLOPT_FOLLOWLOCATION, 1

        vbcurl_easy_setopt CurlContext, CURLOPT_POST, 1
        vbcurl_easy_setopt CurlContext, CURLOPT_POSTFIELDS, "UserName=" & URLencode(uID) & "&Password=" & URLencode(PWD) & "&Login=Login&Login="

        'This section sets proxy settings, etc. and so is optional.
        vbcurl_easy_setopt CurlContext, CURLOPT_TIMEOUT, 15
        vbcurl_easy_setopt CurlContext, CURLOPT_PROXYAUTH, CURLAUTH_ANY
        vbcurl_easy_setopt CurlContext, CURLOPT_HTTPPROXYTUNNEL, 1
        vbcurl_easy_setopt CurlContext, CURLOPT_PROXY, proxyServer
        vbcurl_easy_setopt CurlContext, CURLOPT_PROXYPORT, 80
        vbcurl_easy_setopt CurlContext, CURLOPT_PROXYUSERPWD, ""
        vbcurl_easy_setopt CurlContext, CURLOPT_CAINFO, CertFile
        vbcurl_easy_setopt CurlContext, CURLOPT_SSLCERT, CertFile

        vbcurl_easy_setopt CurlContext, CURLOPT_WRITEDATA, ObjPtr(buf)
        vbcurl_easy_setopt CurlContext, CURLOPT_WRITEFUNCTION, _
            AddressOf WriteFunction
        vbcurl_easy_setopt CurlContext, CURLOPT_PROGRESSFUNCTION, _
            AddressOf ProgressCallback
        vbcurl_easy_setopt CurlContext, CURLOPT_NOPROGRESS, 0
        vbcurl_easy_setopt CurlContext, CURLOPT_DEBUGFUNCTION, _
            AddressOf DebugFunction
        vbcurl_easy_setopt CurlContext, CURLOPT_VERBOSE, True

        ret = vbcurl_easy_perform(CurlContext)

End Sub 
```

放置在 .bas 文件中：

```
Public Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (Destination As Any, Source As Any, ByVal Length As Long)

Public Function URLencode(ByRef TEXT As String) As String
    Const Hex = "0123456789ABCDEF"
    Dim lngA As Long, lngChar As Long
    URLencode = TEXT
    For lngA = LenB(URLencode) - 1 To 1 Step -2
        lngChar = Asc(MidB$(URLencode, lngA, 2))
        Select Case lngChar
            Case 48 To 57, 65 To 90, 97 To 122
            Case 32
                MidB$(URLencode, lngA, 2) = "+"
            Case Else
                URLencode = LeftB$(URLencode, lngA - 1) & "%" & Mid$(Hex, (lngChar And &HF0) \ &H10 + 1, 1) & Mid$(Hex, (lngChar And &HF&) + 1, 1) & MidB$(URLencode, lngA + 2)
        End Select
    Next lngA
End Function

Public Function ProgressCallback(ByVal notUsed As Long, _
    ByVal totaltodownload As Double, ByVal nowdownloaded As Double, _
    ByVal totaltoupload As Double, ByVal nowuploaded As Double) As Long

    'Paint and move form to avoid lock up
    DoEvents

    ProgressCallback = 0

End Function

' This function illustrates a couple of key concepts in libcurl.vb.
' First, the data passed in rawBytes is an actual memory address
' from libcurl. Hence, the data is read using the MemByte() function
' found in the VBVM6Lib.tlb type library. Second, the extra parameter
' is passed as a raw long (via ObjPtr(buf)) in Sub EasyGet()), and
' we use the AsObject() function in VBVM6Lib.tlb to get back at it.
Public Function WriteFunction(ByVal rawBytes As Long, _
    ByVal sz As Long, ByVal nmemb As Long, _
    ByVal extra As Long) As Long

    Dim totalBytes As Long, i As Long
    Dim obj As Object, buf As StringBuffer
    Dim tempStr As String
    Dim Buffer() As Byte

    totalBytes = sz * nmemb

    Set obj = AsObject(extra)
    Set buf = obj

    If Not ((rawBytes = 0) Or (totalBytes = 0)) Then

        ReDim Buffer(0 To (totalBytes - 1)) As Byte
        CopyMemory Buffer(0), ByVal rawBytes, totalBytes

        tempStr = String(totalBytes, " ")
        CopyMemory ByVal tempStr, Buffer(0), totalBytes

        buf.quickConcat (tempStr)

    End If
    'Debug.Print buf.stringData

    ' Need this line below since AsObject gets a stolen reference
    ObjectPtr(obj) = 0&

    ' Return value
    WriteFunction = totalBytes
End Function

' Again, rawBytes comes straight from libcurl and extra is a
' long, though we're not using it here.
Public Function DebugFunction(ByVal info As curl_infotype, _
    ByVal rawBytes As Long, ByVal numBytes As Long, _
    ByVal extra As Long) As Long

    Dim debugMsg As String
    Dim i As Long
    debugMsg = ""
    For i = 0 To numBytes - 1
        debugMsg = debugMsg & Chr(MemByte(rawBytes + i))
    Next
    Debug.Print "info=" & info & ", debugMsg=" & debugMsg
    DebugFunction = 0

End Function 
```

放在 StringBuffer.cls 中：

```
Private byteData() As Byte
Private stringLength As Long
Private arrayLength As Long

Private Sub Class_Initialize()

ReDim byteData(1024)
arrayLength = 1024
stringLength = 0

End Sub

Public Property Get stringData() As String

stringData = String(stringLength, " ")
CopyMemory ByVal stringData, byteData(0), stringLength

End Property

Public Property Let stringData(newStringdata As String)

Dim newStringLength As Long

newStringLength = Len(newStringdata)

If newStringLength > arrayLength Then
    arrayLength = (arrayLength + (newStringLength - newStringLength Mod 2)) * 2
    ReDim Preserve byteData(arrayLength)
End If

CopyMemory byteData(0), ByVal newStringdata, newStringLength

stringLength = newStringLength

End Property

Public Function quickConcat(newStringdata As String)

Dim newStringLength As Long

newStringLength = Len(newStringdata) + stringLength

If newStringLength > arrayLength Then
    arrayLength = (arrayLength + (newStringLength - newStringLength Mod 2)) * 2
    ReDim Preserve byteData(arrayLength)
End If

Dim amountToAdd
amountToAdd = newStringLength - stringLength

CopyMemory byteData(stringLength), ByVal newStringdata, amountToAdd

stringLength = newStringLength

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:09:06.770

此代码正常工作。 **不要删除“on error resume next”**

```
Private Sub Command1_Click()
    For i = 0 To WebBrowser1.Document.Forms(0).length - 1
      On Error Resume Next
      If WebBrowser1.Document.Forms(0)(i).Type = "submit" Then
          WebBrowser1.Document.Forms(0)(i).Click
      End If
    Next i
End Sub 
```

# android - 请求 Android 应用的 root 访问权限

> ID：14894914
> 
> 赞同：1
> 
> 时间：2013-02-15T12:39:21.507
> 
> 标签：android

我知道这里已经有关于这个的问题，但我尝试了所有给出的答案，但没有成功。

有一个简单的 CheckBoxPreference（标题为“Root”）：

```
<CheckBoxPreference
    android:key="root"
    android:title="@string/root"
    android:summary="@string/root_summary"
    android:defaultValue="false" /> 
```

现在我需要在其上设置 OnPreferenceChangeListener 并获得 root 访问权限。如果是这样，则应选中该复选框，否则不应：

```
public class Settings extends PreferenceActivity implements OnPreferenceChangeListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);

        findPreference("root").setOnPreferenceChangeListener(this);
    }

    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        String key = preference.getKey();
        if ("root".equals(key) && !((CheckBoxPreference) preference).isChecked()) {
            try {
                Process p = Runtime.getRuntime().exec("su");
                p.waitFor();
                Log.d("Settings", Integer.toString(p.exitValue()));
                if (p.exitValue() == 255) {
                    Log.d("Settings", "###NO ROOT###");
                    return false;
                }
            } catch (Exception e) {
                Log.d("Settings", "###NO ROOT###");
                Log.d("Settings", e.getMessage());
                return false;
            }
            Log.d("Settings", "!!!ROOT!!!");
        }

        return true;
    }

} 
```

超级用户正确提示 root 访问。然而，拒绝也返回 true，因为 exitValue 为 1 (???) 并允许冻结整个应用程序（我猜是 p.waitFor）。

我目前正在使用 su 二进制 3.1.1（最新版本）运行超级用户 3.1.3。

查看 logcat 我可以看到以下消息：`Activity pause timeout for ActivityRecord{42c0ebb8 com.example/.gui.Settings}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:50:38.620

您正在运行的命令正是`su`我怀疑将以超级用户身份运行 shell 的命令。您正在（无限期地）等待该外壳完成。

您需要指定`su some-command-here-which-needs-to-run-as-root`.

不幸的是，没有办法在您的 Android 项目中获得 Java 代码的超级用户权限。root-ness 仅适用于自身产生的命令`su`。

# java - 使用正则表达式删除 JSON 引号

> ID：14894917
> 
> 赞同：0
> 
> 时间：2013-02-15T12:39:38.093
> 
> 标签：java, regex

我从无法更改的外部进程获得了一些 JSON，我需要修改此 JSON 字符串以使下游 Java 进程正常工作。JSON 字符串如下所示：

```
{"widgets":"blah","is_dog":"1"} 
```

但它需要看起来像：

```
{"widgets":blah,"is_dog":"1"} 
```

我必须删除`blah`. 实际上，`blah`它是一个巨大的 JSON 对象，因此为了这个问题，我对其进行了简化。所以我想我会通过两个`String#replace`电话来解决这个问题，一个在之前`blah`，一个在之后：

```
dataString = dataString.replaceAll("{\"widgets\":\"", "{\"widgets\":");
dataString = dataString.replaceAll("\",\"is_dog\":\"1\"}", ",\"is_dog\":\"1\"}"); 
```

当我运行它时，我得到一个模糊的运行时错误：

> 非法重复

任何正则表达式大师都可以发现我会出错的地方吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:41:50.403

我相信你需要摆脱大括号。大括号用于重复（`(foo){3}`连续查找 foo 三次）；因此错误。

注意：在这种情况下，它需要双重转义：`\\{`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:42:25.613

`{`并且`}`在正则表达式中具有特殊含义。他们要提到允许的模式重复。所以他们要逃到这里。

使用`\\{\"widgets\":\"", "\\{\"widgets\":`而不是`{\"widgets\":\"", "{\"widgets\":`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:43:37.580

我确实想知道您是否最好使用[JSONObject](http://www.json.org/javadoc/org/json/JSONObject.html)的代码并修改`toString()`方法以使其成为比使用正则表达式更可靠的转换。[这是源代码，](http://json.org/java/org/json/JSONObject.java)您正在寻找方法的`quote()`调用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T12:45:56.677

Since the input string looks to be valid json, your best bet would be to parse it with an actual parser to a map-like structure. Regexes are not the right tools for this. Serializing this structure to to something not quite json would then be relatively simple.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T12:44:29.893

那么，您为什么不简单地执行以下操作？

1）将第一个JSON（带引号正确）解码为`varJSON1`

2）将字符串“blah” `varJSON1`放入`varJSON2`

3）然后解码`varJSON2`

# jsf - 如何在数据表的一列中显示 2 行？

> ID：14894919
> 
> 赞同：11
> 
> 时间：2013-02-15T12:39:41.867
> 
> 标签：jsf, jsf-2, primefaces, datatable, alignment

我的应用程序中有一个数据表。一列有大量数据，增加了表格的宽度。

我想将该列中的数据拆分为两行或多行。

我尝试为该列设置宽度，但数据没有拆分，也没有显示总数据。

```
<p:column headerText="#{msgs['exception.label.exceptionMsg']}" width="200">
         <h:outputText value="#{exception.exceptionMsg}"/>
</p:column> 
```

如何拆分数据？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-15T13:17:35.443

的`.ui-datatable tbody td`默认样式为`white-space: nowrap`，这意味着长文本不会换行。您想通过将其设置回来覆盖此样式`white-space: normal`。

例如

```
<p:column width="200" styleClass="wrap"> 
```

有了这个 CSS

```
.ui-datatable tbody td.wrap {
    white-space: normal;
} 
```

### 也可以看看：

*   [如何使用自定义样式覆盖默认的 PrimeFaces CSS？](https://stackoverflow.com/questions/8768317/how-do-i-override-those-classes-defined-in-primefaces-css/8774997#8774997)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T23:36:48.460

这是我的解决方案。这很简单。

```
<p:column style="white-space : normal ; width: 315px">
    <h:outputText value="T h i s   i s  a  v e r y  L a r g e   T e x t">
    </h:outputText>      
</p:column> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-08T20:15:08.097

在通过 BalusC 对其他一些相关问题的回答后，我使用了以下解决方案。

我在 CSS 中使用它：

```
.ui-datatable tbody td.wrap {
    white-space: normal;
    word-wrap: break-word;
} 
```

这与我的专栏：

```
<p:column style="text-align: left" width="38" styleClass="wrap"> 
```

这可以处理带空格和不带空格的数据——两者都有。

# apple-push-notifications - APNS 注册错误。错误：错误域=NSCocoaErrorDomain 代码=3000

> ID：14894921
> 
> 赞同：1
> 
> 时间：2013-02-15T12:39:45.053
> 
> 标签：apple-push-notifications

大家好，我一直在从事多个项目，所有推送通知都在开发或生产上工作。但是我没有收到此错误：“注册错误。错误：错误域 = NSCocoaErrorDomain 代码 = 3000”从昨天开始。我试图创建一个新的配置，但它关闭以进行维护。是不是因为这个？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T10:27:34.997

1.  确保 Bundle Identifier 与项目 plist 中的标识符匹配。
2.  创建一个新的 App ID，并在创建新的供应配置文件之前将其配置为生产/开发推送。
3.  确保您使用正确的配置在正确的目标上构建和归档。您可能需要返回项目设置并仔细检查选择的正确配置（我为此使用发布）。

# c# - ObjectListView - TreeListView 自动 TriStateChecking

> ID：14894925
> 
> 赞同：1
> 
> 时间：2013-02-15T12:40:08.080
> 
> 标签：c#, recursion, objectlistview, treelistview

有没有人成功地让三态复选框在 TreeListView 中正常工作，而不使用模型对象中的属性来存储检查状态？

因此，例如，检查一个节点。应检查其所有孩子（和孩子的孩子等），然后应根据其兄弟姐妹检查其所有父母/祖父母`CheckStates`。

我尝试了几种方法，但每种方法都在 TreeListView 类中获得`ArgumentOutOfRange`/ 。`ArgumentException`这包括以下内容：

*   将所有节点 CheckStates 存储在 Dictionary 中并用作`CheckStateGetter`事件查找
*   当项目更改时递归调用函数`CheckState`（并确保在以编程方式更改时忽略后续的 ItemCheck 事件`CheckStates`）
*   调用一个函数来确定直接的子/父状态，并让 TreeListView`ItemChecked`为每个受影响的节点触发事件。

我经常从以下函数中得到错误（在 TreeListView.cs 中）：

*   GetNthItem()
*   GetChildren() - 然后在 GUI 中展开/折叠护罩
*   ProcessLButtonDown()

如果有人在这方面取得了成功，我会全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:14:36.263

我对 TreeListView 也有一些问题，并在 GetChildren() 函数中发现了问题。

GetChildren 不必要地尝试扩展相关分支来获取孩子。这导致内部状态显示为展开，而视图保持折叠并导致内部索引出现问题。

原始方法：

```
 public virtual IEnumerable GetChildren(Object model) {
        Branch br = this.TreeModel.GetBranch(model);
        if (br == null || !br.CanExpand)
            return new ArrayList();

        if (!br.IsExpanded)  // THIS IS THE PROBLEM
            br.Expand();

        return br.Children;
    } 
```

固定方法：

```
 public virtual IEnumerable GetChildren(Object model) {
        Branch br = this.TreeModel.GetBranch(model);
        if (br == null || !br.CanExpand)
            return new ArrayList();

        br.FetchChildren();

        return br.Children;
    } 
```

也许这至少可以解决您的一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-20T20:41:59.100

> “当项目 CheckState 更改时递归调用函数（并确保在以编程方式更改 CheckState 时忽略后续 ItemCheck 事件）”

如果 TreeListView 自我检查（“从框”）对您有好处，并且您只想知道在您手动完成某些主要复选框单击后所有员工何时完成（这意味着：您单击，TreeListView（取消）检查所有孩子和父母)，因此您需要在 ObjectListView 库中进行额外的事件（粗略）：

\objectlistviewdemo\objectlistview\treelistview.cs

首先添加事件（我的事件很糟糕，但你知道要修复什么）

```
 #region Events

    public delegate void AfterTreeCheckEventHandler(object sender/*, object rowmodel*/);

    /// <summary>
    /// Triggered when clicked main checkbox checked and all related too.
    /// </summary>
    [Category("ObjectListView"),
    Description("This event is triggered when clicked main checkbox checked and all related too.")]
    public event AfterTreeCheckEventHandler AfterTreeCheckAndRecalculate;

    #endregion

    #region OnEvents

    /// <summary>
    /// Tell the world when a cell has finished being edited.
    /// </summary>
    protected virtual void OnAfterTreeCheckAndRecalculate(/*CellEditEventArgs e*/)
    {
        if (this.AfterTreeCheckAndRecalculate != null)
            this.AfterTreeCheckAndRecalculate(this/*, e*/);
    }

    #endregion 
```

其次，您需要修复“SetObjectCheckedness”方法（1 个简单的递归方法 + 1 个递归）

```
 /// <summary>
    /// Change the check state of the given object to be the given state.
    /// </summary>
    /// <remarks>
    /// If the given model object isn't in the list, we still try to remember
    /// its state, in case it is referenced in the future.</remarks>
    /// <param name="modelObject"></param>
    /// <param name="state"></param>
    /// <returns>True if the checkedness of the model changed</returns>
    protected override bool SetObjectCheckedness(object modelObject, CheckState state) {
        // If the checkedness of the given model changes AND this tree has 
        // hierarchical checkboxes, then we need to update the checkedness of 
        // its children, and recalculate the checkedness of the parent (recursively)

        bool result = SetObjectCheckednessHelper(modelObject, state, 0);

        if (this.AfterTreeCheckAndRecalculate != null)
            this.AfterTreeCheckAndRecalculate(this); //report that work is done
        return result;
    }

    protected bool SetObjectCheckednessHelper(object modelObject, CheckState state, int i) //recursive
    {
        if (!base.SetObjectCheckedness(modelObject, state))
            return false;

        if (!this.HierarchicalCheckboxes)
            return true;

        // Give each child the same checkedness as the model

        CheckState? checkedness = this.GetCheckState(modelObject);
        if (!checkedness.HasValue || checkedness.Value == CheckState.Indeterminate)
            return true;

        foreach (object child in this.GetChildrenWithoutExpanding(modelObject))
        {
            this.SetObjectCheckednessHelper(child, checkedness.Value, i+1);
        } //(un)check all children checkboxes

        if (i == 0) //recalculate upper levels only in the case of first call
        {
            ArrayList args = new ArrayList();
            args.Add(modelObject);
            this.RecalculateHierarchicalCheckBoxGraph(args); //all upper checkboxes in intermediate state or (un)check 
        }   

        return true;
    } 
```

用法：

```
 this.olvDataTree.AfterTreeCheckAndRecalculate += new BrightIdeasSoftware.TreeListView.AfterTreeCheckEventHandler(this.olvDataTree_TreeChecked); 

    private void olvDataTree_TreeChecked(object sender)
    {
            //some staff here
    } 
```

# linux - 是否有 .deb 安装文件等效于 .rpm 第一次安装参数

> ID：14894926
> 
> 赞同：4
> 
> 时间：2013-02-15T12:40:16.940
> 
> 标签：linux, installation, debian, rpm, deb

在 .rpm 文件中，有一个选项可以检查当前安装是否是要在当前系统上安装的第一个版本

即`%pre`，`%post`当最后一个版本被擦除时，脚本也将被传递一个等于 1* 的参数，`%preun`并且`%postun`脚本将被传递一个等于 0* 的参数。 [参考：](http://www.rpm.org/max-rpm/s1-rpm-inside-scripts.html)

安装 .deb 文件是否有相同的东西？这似乎很模糊，我的搜索结果几乎没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:43:16.297

在`.deb`脚本中，正在安装的软件包的当前版本作为参数传入`$2`。如果它为空，则表示没有安装此软件包的版本。

# asp.net-mvc - 为什么 font-awesome 适用于 localhost 而不是 web ？

> ID：14894935
> 
> 赞同：58
> 
> 时间：2013-02-15T12:40:45.807
> 
> 标签：asp.net-mvc, font-awesome

我在我的项目中使用了很棒的字体`(mvc/asp.net)`。我的问题是，我正在调试项目并检查`localhost`，字体真棒图标没有问题。但是当发布网站并在网络上查看时，我看到的不是图标，而是小框。我确定它放置在正确的目录中（放置`css`文件的位置）。

我找不到任何合适的解决方案。

顺便说一下，按钮也没有问题。他们都很好，但图标不见了。

谢谢

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-16T10:55:45.653

我刚刚加载了您的网页并检查了 firebug 的 net 选项卡。

您的以下网址返回 404：

[http://www.senocakonline.com/Content/font/fontawesome-webfont.woff](http://www.senocakonline.com/Content/font/fontawesome-webfont.woff)

[http://www.senocakonline.com/Content/font/fontawesome-webfont.ttf](http://www.senocakonline.com/Content/font/fontawesome-webfont.ttf)

我会假设那些丢失是你的图标没有显示的原因。

更新：23.10.2015 使其可用只需将此代码添加到您的 WebConfig：

```
<system.webServer>
    <staticContent>
      <mimeMap fileExtension="woff" mimeType="application/font-woff" />
      <mimeMap fileExtension="woff2" mimeType="application/font-woff" />
    </staticContent>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-12-23T07:18:18.427

**为什么 font-awesome 在调试模式下有效，但在 IIS 上无效？**

在 Visual Studio 中，默认情况下，某些字体文件在发布期间不包括在内：

*   .eot
*   .json
*   .ttf
*   .woff

这是因为他们的**构建操作**设置为**None**，这是默认情况下（在 MVC 上，在 WebForms 上不确定）。您必须转到受影响文件的属性并将其从“无”设置为“内容”。

![在此处输入图像描述](../Images/3f959bf7356e44798d96926f22d25741.png)

这就是我解决它的方法（而不是像某些人建议的那样手动拖动文件）

归功于这个人：[http ://edsykes.blogspot.com/2012/09/aspnet-build-actions-with-ttf-eot-and.html](http://edsykes.blogspot.com/2012/09/aspnet-build-actions-with-ttf-eot-and.html)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-29T19:05:53.267

可以在这里找到为我解决此问题的另一个解决方案：[https ://stackoverflow.com/a/12587256/615285](https://stackoverflow.com/a/12587256/615285)

从那里引用：

问题很可能是 css 文件中的图标/图像使用了相对路径，因此如果您的包与未捆绑的 css 文件不在同一个应用程序相对路径中，它们就会成为断开的链接。

最简单的做法是让你的包路径看起来像 css 目录，这样相对 url 就可以工作，即：

```
new StyleBundle("~/Static/Css/bootstrap/bundle") 
```

我们在 1.1beta1 版本中添加了对此的支持，因此要自动重写图像 url，您可以添加一个新的 ItemTransform 来自动执行此变基。

```
bundles.Add(new StyleBundle("~/bundles/publiccss").Include(
            "~/Static/Css/bootstrap/bootstrap.css",
            "~/Static/Css/bootstrap/bootstrap-padding-top.css",
            "~/Static/Css/bootstrap/bootstrap-responsive.css",
            "~/Static/Css/bootstrap/docs.css", new CssRewriteUrlTransform())); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-20T14:47:26.843

我有同样的问题。解决方案：

1.  打开 CSS 文件并删除当前的 font-face 部分并替换为：

    ```
    @font-face {

        font-family: FontAwesome;
        src: url('/Content/fonts/fontawesome-webfont.eot'), /*for IE */
             url('/Content/fonts/fontawesomewebfont.svg'),
             url('/Content/fonts/fontawesome-webfont.ttf'); /* for CSS3 browsers */
        font-weight: normal;
        font-style: normal;
    } 
    ```

    （根据需要更改字体值）

2.  **将您的 ttf 字体文件复制到桌面上，**然后转换为 eot

    > > > [http://www.kirsle.net/wizards/ttf2eot.cgi](http://www.kirsle.net/wizards/ttf2eot.cgi)

3.  将ttf字体文件转换为svg

    > > > [http://www.freefontconverter.com/](http://www.freefontconverter.com/)

4.  将 ttf 字体文件转换为 woff（可选）

    > > > [http://ttf2woff.com/](http://ttf2woff.com/)

5.  当 Visual Studio 2012 打开时，将这些所有字体（ttf、eot、svg、woff...）拖放到您的文件位置。

6.  发布您的项目

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-18T13:25:51.000

这取决于以下代码行`BundleConfig`：

```
 BundleTable.EnableOptimizations = true; 
```

如果是真的，你必须改变你的字体文件的路径；

`../`是节目`root path, main folder of your project`。然后你必须编写路径的其余部分。

矿。当它是真的：

```
font-family: 'Icons';
    src:url('../_include/css/fonts/Icons.eot');
    src:url('../_include/css/fonts/Icons.eot?#iefix') format('embedded-opentype'),
        url('../_include/css/fonts/Icons.woff') format('woff'),
        url('../_include/css/fonts/Icons.ttf') format('truetype'),
        url('../_include/css/fonts/Icons.svg#Icons') format('svg');
    font-weight: normal;
    font-style: normal; 
```

当它为假时：

```
font-family: 'Icons';
    src:url('fonts/Icons.eot');
    src:url('fonts/Icons.eot?#iefix') format('embedded-opentype'),
        url('fonts/Icons.woff') format('woff'),
        url('fonts/Icons.ttf') format('truetype'),
        url('fonts/Icons.svg#Icons') format('svg');
    font-weight: normal;
    font-style: normal; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-22T16:57:46.123

这也是IIS中的MIME TYPE问题，只需添加文件扩展名.woff即可

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-10T15:17:26.620

这对我有用：< link href="~/Content/font-awesome-4.2.0/css/font-awesome.css" rel='stylesheet' type='text/css' />

我必须直接链接 URL

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-23T14:39:59.453

在我的 ASP.NET MVC 项目中，在 BundleConfig.cs 中启用了捆绑功能是这样的：

打开文件`font-awesome.css`并更改`@font-face`为：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('../font/fontawesome-webfont.eot?v=3.2.1');
  src: url('../font/fontawesome-webfont.eot?#iefix&v=3.2.1') format('embedded-opentype'), url('../font/fontawesome-webfont.woff?v=3.2.1') format('woff'), url('../font/fontawesome-webfont.ttf?v=3.2.1') format('truetype'), url('../font/fontawesome-webfont.svg#fontawesomeregular?v=3.2.1') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

我必须`../`在每个`url`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-17T09:45:12.030

我有同样的问题。字体在本地正确显示，但是当我将它上传到服务器时，只显示空白方块。
有时可能会发生，因为 FontAwesome CSS 文件 src 属性中提到的文件名与实际字体文件名不同。就我而言，我在 fontawesome css 文件中发现它是这样的：

```
    @字体脸{
            字体家族：'FontAwesome';
            src: url('../font/fontawesome-webfont.eot?v=3.2.1')​​;
            src: url('../font/fontawesome-webfont.eot?#iefix&v=3.2.1')​​ 格式('embedded-opentype'),
                url('../font/fontawesome-webfont.woff?v=3.2.1')​​ 格式('woff'),
                url('../font/fontawesome-webfont_aea8981c.ttf?v=3.2.1')​​ 格式('truetype'),
                url('../font/fontawesome-webfont.svg#fontawesomeregular?v=3.2.1')​​ 格式('svg');
            字体粗细：正常；
            字体样式：正常；
        }

```

但是实际的字体文件名是这样的——

```
        字体/fontawesome-webfont_2d2816fe.eot
        字体/fontawesome-webfont_aea8981c.eot
        字体/fontawesome-webfont_aea8981c.ttf
        字体/fontawesome-webfont_aea8981c.woff

```

尽管名称在下划线后的 css 文件中没有正确匹配，但它在本地工作正常。所以很难说这可能是什么原因。
当我将 FontAwesome css 文件 src 中的文件名编辑为确切的实际名称时，它起作用了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-18T11:57:03.783

没有什么对我真正有用。我有一个托管 Angular 应用程序的 Webform 页面。角度应用程序使用 webfonts。

CssRewriteUrlTransform() 的诀窍是正确的方向，但后来我发现这个用于捆绑的扩展是最终解决方案！

[AspNet 捆绑](https://github.com/benmccallum/AspNetBundling/blob/bf846324791780443f88d64c9899aef47b8d338e/AspNetBundling/CssRewriteUrlTransformFixed.cs#L12)

您不必使用孔扩展，只需复制 CssRewriteUrlTransformFixed 类并使用它来代替原来的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-03T14:50:44.657

我已经尝试了上面的所有建议，但没有一个有效。然后我尝试将字体 CSS 文件移动到不同的 CSS 文件中，神奇的事情发生了。一切都开始工作，没有任何问题。请注意，您稍后可以通过捆绑文件捆绑新的 CSS 文件。

# django - 未定义的字段

> ID：14894936
> 
> 赞同：0
> 
> 时间：2013-02-15T12:40:46.333
> 
> 标签：django, django-models

我是 Django 新手，所以我决定试试这个[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)。

然后问题来了：我在 polls/models.py 中添加了一些代码

```
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField() 
```

现在我有四个这样的错误消息：

> 来自导入的未定义变量：CharField models.py /Mysite/polls 第 4 行 PyDev 问题

但是models.Field 类没问题。

**我究竟做错了什么？**

不知道会不会有帮助，但是使用了 Python 3.3 和 Aptana Studio 3。我按照教程中的说明从命令行创建了项目，然后复制了 .project 和 .pydevproject 文件并在那里更改了路径和名称。

UPD：在我将 Python 3.3 更改为 Python 2.7 之后，一切都开始工作了。感谢无限！

# php - 了解php中的目录链接

> ID：14894937
> 
> 赞同：0
> 
> 时间：2013-02-15T12:40:55.783
> 
> 标签：php

我需要一些帮助来理解目录路径和文件链接是如何工作的。我正在本地服务器上对此进行测试。

**如果我在根目录**中有以下文件：
-**包含 [文件夹]**
- **index.php [包含文件夹内的 php 文件]**
- **adm [文件夹]**
- **constant.php [adm 文件夹内的 php 文件]**

我想在“index.php”中要求“constant.php”，我该怎么做？

*另一个困惑是 PHP 中的真实路径和相对路径有什么区别？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T05:19:27.503

如果你想在“index.php”中使用require语句，你可以这样写。

**需要“../adm/constant.php”；**

如上，我们使用相对路径。真实路径是指完整路径。

如果 ROOT 目录是 /var/www/html/，那么你可以使用如下。

**要求“/var/www/html/adm/constant.php”；**

这是真正的路径。

我推荐相对路径，因为站点路径可以更改，所以真实路径会导致错误。

有关了解相对路径的更多详细信息，请参阅[http://yagudaev.com/posts/resolving-php-relative-path-problem/ 。](http://yagudaev.com/posts/resolving-php-relative-path-problem/)

# css - 如何重置css字体缓存

> ID：14894941
> 
> 赞同：11
> 
> 时间：2013-02-15T12:41:12.963
> 
> 标签：css, fonts, font-face

我已经更改了服务器中的字体，但是浏览器获取了写入字体的旧版本的 css 文件，如何重置缓存？，我试图删除浏览器缓存并删除旧文件 css，但是他们仍然在获取旧的cs，我已尝试重新加载服务器，如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-20T16:23:27.763

我注意到这只发生在 Firefox 中，这很烦人，但是，如果这与您在这里的情况相同，请使用 SHIFT + CMD + R 刷新（如果您在 Mac 上，我认为 Windows 替代方案是 CTRL + Shift + R)

这也会清除您对该页面的缓存+应该显示您的字体:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-28T18:58:16.490

确保您的浏览器不显示本地字体——我花了将近一个小时试图弄清楚如何清除 Firefox 中的字体缓存，而问题与此无关。

检查您的网络服务器日志：字体文件是否已下载？如果不是，那么很可能您使用的是本地字体。

考虑这个真实案例：

```
@font-face{
    font-family: SuperFont;
    src: url('../fonts/Superfont.ttf'),
} 
```

我从某个地方复制粘贴了这段代码，删除了部分`src`定义，**没有注意到**使这一行无效 CSS 的结尾逗号。因此没有下载字体。

但是，由于我已经在本地安装了 Superfont，它*似乎*可以正常工作，因为浏览器可以识别`font-family`. 好吧，直到我决定更改字体文件，但保留`font-family`定义以节省对 CSS 文件的进一步修改……</p>

道德：在测试字体时，使用明确的自定义`font-family`名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:48:17.860

您是否尝试过在不同的浏览器中查看页面以确保旧字体未被添加到页面中？

如果您仍在使用相同的 CSS 文件，您可以导航到 CSS 文件并在该 Ctrl+F5 上进行硬刷新。

此外，我发现在清除缓存之前完全关闭页面也有帮助！

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-15T12:47:33.950

在浏览器上执行：Ctrl + F5

# java - 在 pojo 中使用自动完成功能编辑 PrimeFaces DataTable

> ID：14894946
> 
> 赞同：0
> 
> 时间：2013-02-15T12:41:18.640
> 
> 标签：java, jpa, jsf-2, primefaces

我有一个带有数据表的页面，该页面必须显示有关邮箱对象的各种信息。这些信息之一是邮箱的所有者，它由其 id 存储在邮箱对象中。在输出中，我使用支持 bean 中的一种方法解决了这个问题，该方法通过邮箱对象检索用户名。在输入中，我想将自动完成功能与 pojo 一起使用，但我无法完全意识到如何做到这一点。

我的jsf页面：

```
<p:dataTable id="dataTable" value="#{bean.mailboxes}" var="m" editable="true">
  <!-- other table -->
  <p:column headerText="Owner">
    <p:cellEditor>
      <f:facet name="output">  
        <h:outputText value="#{bean.userByMailbox(m)}" />  
      </f:facet>
      <f:facet name="input">
        <!-- here comes autocomplete -->
      </f:facet>  
    </p:cellEditor>
  </p:column>
</p:dataTable> 
```

还有我的豆子：

```
public class Bean {

// Other properties and methods

List<Mailbox> mailboxes;

public List<Mailbox> getMailboxes() {
    if (mailboxes == null) {
        Query q = em.createNamedQuery("Mailbox.findAll");
        mailboxes = q.getResultList();
    }

    return mailboxes;
}

public User getUserByMailbox(Mailbox m) {
    Query q = em.createNamedQuery("User.findByUsrId");
    q.setParameter("usrId", m.getUsrId());
    return (User)q.getSingleResult();
}
} 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:20:28.837

你的模型是错误的。

中`Mailbox`，替换

```
@Column
private Long usrId; 
```

经过

```
@ManyToOne
@JoinColumn(name="usrId")
private User user; 
```

这样你就可以使用`#{m.user}`而不是`#{bean.userByMailbox(m)}`. 这样，该属性也是可写的（也许您实际上有一段`PropertyNotWritableException`时间尝试在 中使用此 EL 表达式`<p:autoComplete value>`；将来的问题会告诉您，而不是问一个过于笼统的问题）。

请注意，这个具体问题与 JSF 或`<p:autoComplete>`.

# linux - 回到我的工作目录的历史——git、bash

> ID：14894951
> 
> 赞同：1
> 
> 时间：2013-02-15T12:41:52.650
> 
> 标签：linux, git, bash

我直接在远程仓库上使用了 git commit 命令，然后 git 硬重置到 HEAD^，我不知道远程目录的哪些文件被删除了，是否可以找到我的远程**工作目录**的文件的历史记录？也许一个 bash 命令就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:59:11.973

您可以查看哪些文件被删除：

```
git log --diff-filter=D --summary | grep delete 
```

# css - box-sizing: 边框框在 safari 中有点古怪？

> ID：14894952
> 
> 赞同：1
> 
> 时间：2013-02-15T12:41:53.243
> 
> 标签：css, safari

这段代码：

```
<div class="green">
    <div class="red" style="height: 25%"></div> * 4
</div>

.red {
    border-top: 1px solid black;
    box-sizing: border-box;
} 
```

...在 IE8、Chrome 24 和 Firefox 18 中看起来不错：

![在此处输入图像描述](../Images/a7f0298913e2be7b535a2a871540bf02.png)

但是在 Safari (5.1.7) 中，我得到了一些多余的底部边距/透明边框：

![在此处输入图像描述](../Images/7d581a4082a8d0c04edba0e5e76101e3.png)

jsbin 上的完整测试代码：http: [//jsbin.com/ozefar/6/edit](http://jsbin.com/ozefar/6/edit)

我在我的css中遗漏了什么吗？

# sql - 将日期转换为字符串 SQL

> ID：14894956
> 
> 赞同：0
> 
> 时间：2013-02-15T12:42:03.397
> 
> 标签：sql, oracle

我正在数据仓库中构建报告，该报告依赖于比较其中一家餐厅的每日支票和付款。我需要能够过滤日期字段上的数据，但是它需要与看起来像美国日期格式但是字符串的字符串进行比较

```
Select a.* from 
xx a, xy b
where 
a.payment_date = b.check_date 
```

a.payment_date 的格式是 DD-MON-YY(date)，b.check_date 的格式是 MM/DD/YYYY 但是它是一个字符串。任何指向解决此问题的最有效方法的指针都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:43:44.757

转换`check_date`为using ：`string`_`date`[`TO_DATE()`](http://www.techonthenet.com/oracle/functions/to_date.php)

```
SELECT a.*
FROM xx a, xy b
WHERE a.payment_date = TO_DATE(b.check_date, 'mm/dd/yyyy') 
```

或者你可以反过来做，使用[`TO_CHAR()`](http://www.techonthenet.com/oracle/functions/to_char.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:44:10.867

将两个字符串日期转换为真实日期（[http://www.techonthenet.com/oracle/functions/to_date.php](http://www.techonthenet.com/oracle/functions/to_date.php)），以便您可以按日期比较它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:46:02.897

我想这可能对你有用

选择 a.* from xx a, xy b where convert(datetime,a.payment_date) = convert(datetime,b.check_date)

# richfaces - 页面刷新时不会重新加载数据

> ID：14894957
> 
> 赞同：0
> 
> 时间：2013-02-15T12:42:06.547
> 
> 标签：richfaces, spring-webflow, page-refresh

在项目页面中，在浏览器中点击刷新后，没有任何数据发生变化。基本上，我想在页面重新加载（F5）时重新启动流程以触发流程中的 <on-start> 状态以重新加载我的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:36:22.010

尝试`<on-render>`标签而不是`<on-start>`

**注意** `<on-render>`每次渲染页面时都会执行，`<on-start>`尽可能选择

# asp.net-mvc - 为 MVC 创建模型

> ID：14894958
> 
> 赞同：1
> 
> 时间：2013-02-15T12:42:10.373
> 
> 标签：asp.net-mvc

我正在构建我的第一个 MVC 项目，我对模型有疑问。

每个网页只能包含 1 个模型，但我的页面需要 2 个模型，一个是搜索选项（能够缩小搜索范围，例如选择价格范围、颜色等）以及数据。

是否真的像创建一个新模型一样简单，类似于在这种情况下只有两个属性的 ViewModel，一个 SearchModel 和一个 ProductModel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:54:27.263

是的，确实有两个“模型”，有时会令人困惑。有“视图模型”和“域模型”。视图模型直接传入和传出视图。领域模型描述了您正在处理的现实领域，并且是数据库所保留的内容。通常，它们是相同的东西，例如，如果您正在显示单个真实域对象（例如，汽车）的信息。如果你有两个域模型在一个页面上，你应该创建一个视图模型，将两者都作为属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:55:03.697

如果您希望在视图中有两个模型，那么这个问题可能会提供有用的信息：

[视图中的多个模型](https://stackoverflow.com/questions/4764011/multiple-models-in-a-view)

编辑：

一个很好的例子是新 mvc 应用程序的默认“帐户”控制器中的“管理”视图。它使用局部视图来处理用户密码的更改。虽然两个视图都使用相同的模型类型，但它显示了如何实现局部视图。在这种情况下，主视图和部分视图都提交给控制器上的相同方法，因此它们需要使用相同的模型（这是控制器方法的参数）。但是如果部分要调用不同的控制器方法，那么提交的模型可能会不同。希望这是有道理的:)

# php - Calling function with TRUE returns wrong thing

> ID：14894966
> 
> 赞同：1
> 
> 时间：2013-02-15T12:42:35.677
> 
> 标签：php

I have this function

```
//$hasher is a phpass object.    
public function getHash( $check )
    {
    global $hasher;
    if ( $check == 'hash' )
        {
        return $hasher->HashPassword($this->password);
        }
    else if ( $check == 'check' )
        {
        return $hasher->CheckPassword($this->password, $this->getData('data')['password']);
        }
    else
        {
        return 'F*** off';
        }
    } 
```

When i call it this is what i get

```
$obj->getHash('hash')
//getHash(): $2a$08$Uof.EzLkJI..........

$obj->getHash('check')
//getHash(): 1

$obj->getHash('dsadaldas') //and anything else in the brackets
//getHash():F*** off

$obj->getHash(TRUE)
//getHash(): $2a$08$3vNYnGVsf... 
```

Why does calling the method with `TRUE` return the same as if i had called it with `'hash'` as an argument? Am i missing something here? I tried it with `switch()` and it still behaves the same.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:44:40.397

Because a string such as `hash` evaluates to `true` when you use the equality operator (`==`):

You could use the identical (`===`) [operator](http://www.php.net/manual/en/language.operators.comparison.php) instead:

```
if ( $check === 'hash' ) 
```

This ensures that both the value of the variable and the type are the same.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:47:41.983

这是因为当您将 boolean ( `true`) 与 string ( `"hash"`) 进行比较时，字符串将被[转换为 boolean](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)，而不是相反。

解决方案：使用类型安全的比较 ( `===`)

# ruby - Nokogiri search for text with HTML entities

> ID：14894968
> 
> 赞同：0
> 
> 时间：2013-02-15T12:42:39.410
> 
> 标签：ruby, nokogiri

I have not been able to search for a Node that has an HTML entity as a value.

I have this HTML fragment:

```
require 'nokogiri'

DATA = "<p>A paragraph <ul><li>Item 1</li><li>&#8853;</li><li>Mango</li></ul></p>"

doc = Nokogiri::HTML(DATA)

p doc.xpath('//li[contains(text(), "Man")]') => This returns a NodeSet
p doc.xpath('//li[contains(text(), "8853")]') => This returns 'Nil' 
```

I am not able to figure out why the second statement returns NIL and how to fix it.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T12:52:11.463

当 Nokogiri 解析文档时，它会尝试解码实体，因此，您必须查找解码后的值：

```
require 'nokogiri'

data = "<p>A paragraph <ul><li>Item 1</li><li>&#8853;</li><li>Mango</li></ul></p>"

doc = Nokogiri::HTML(data)

p doc.search('li').map(&:text)
=> ["Item 1", "⊕", "Mango"] 
```

请注意，HTML 实体已被解码为其真实字符。

```
puts doc.to_html

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p>A paragraph </p>
<ul>
<li>Item 1</li>
<li>⊕&lt;/li>
<li>Mango</li>
</ul>
</body></html> 
```

同样，实体被解码。

```
p doc.xpath('//li[contains(text(), "⊕")]')
=> [#<Nokogiri::XML::Element:0x3fcd78d5f16c name="li" children=[#<Nokogiri::XML::Text:0x3fcd78d5ef64 "⊕">]>] 
```

# php - 从 CodeIgniter 中的错误消息中删除 HTML

> ID：14894971
> 
> 赞同：0
> 
> 时间：2013-02-15T12:43:04.650
> 
> 标签：php, codeigniter, error-handling

我在 CodeIgniter 模型中有类似的东西

```
$query = $this->db->insert('something',$data);

if($query)
{
    return true;
}
else
{
    return $this->db->_error_message();
} 
```

我非常想知道的是，如何从 CodeIgniter 生成的错误模板中删除 html，当`_error_message()`函数返回时，只保留简单的错误消息文本？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:46:55.570

```
return strip_tags($this->db->_error_message()); 
```

它会剥离 <> 之间的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:01:03.870

我不记得确切的想法，但我知道您可以通过在应用程序/语言/英语中创建文件来发送海关错误消息

查看文档中的此页面，它应该会有所帮助

[http://ellislab.com/codeigniter/user-guide/libraries/language.html](http://ellislab.com/codeigniter/user-guide/libraries/language.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T00:49:48.463

最安全的方法是转到错误文件夹，将标题类型更改为 text/plain。然后删除 html 格式并回显错误消息。

# javascript - Uploadfy with Classic ASP

> ID：14894973
> 
> 赞同：0
> 
> 时间：2013-02-15T12:43:12.573
> 
> 标签：javascript, jquery, asp-classic, uploadify

i'm implementing some upload script with Uploadfy on my site.

This is the script sample i have in PHP:

```
<script type="text/javascript">
        <?php $timestamp = time();?>
        $(function() {
            $('#file_upload').uploadify({
                'formData'     : {
                    'timestamp' : '<?php echo $timestamp;?>',
                    'token'     : '<?php echo md5('unique_salt' . $timestamp);?>'
                },
                'swf'      : 'uploadify.swf',
                'uploader' : 'uploadify.php',
                'onUploadSuccess' : function(file, data, response) {
                    alert('The file was saved to: ' + data);
                }
            });
        });
    </script> 
```

But i want this working in classic ASP!

I know i need to change these lines to make this work:

```
'formData'     : {
                    'timestamp' : '<?php echo $timestamp;?>',
                    'token'     : '<?php echo md5('unique_salt' . $timestamp);?>'
                }, 
```

But i don't know how to change this to classic ASP. What i need to do??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:03:29.263

formData 是要发送到您的 url 以供上传的数据

你还需要换行

```
 'uploader' : 'uploadify.php', 
```

经过

```
 'uploader' : 'uploadify.asp', 
```

并在您的uploadify.asp页面中实现上传

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:43:32.103

我在这里猜测您要做的是在您的 asp 页面中使用变量调用 php 脚本“uploadify.php”。

时间戳变量和 md5 函数在 Classic ASP 中没有准备好，您需要自己编写。对于时间戳，以下应该有效

```
<% timestamp = year(now) & right("0" & month(now),2) & right("0" & day(now),2) & right("0" & hour(now),2) & right("0" & minute(now),2) & right("0" & second(now),2) %> 
```

MD5 功能比较复杂，但是这里有[一个可以下载使用](http://www.freevbcode.com/ShowCode.asp?ID=2366)。

一旦所有这些都到位 -`<?php echo $timestamp;?>`用`<%=timestamp%>` 和 `<?php echo md5('unique_salt' . $timestamp);?>`替换`<%=md5("unique_salt"&timestamp)%>`

# c# - 重构静态类以与依赖注入一起使用

> ID：14894980
> 
> 赞同：14
> 
> 时间：2013-02-15T12:43:34.923
> 
> 标签：c#, dependency-injection, refactoring, singleton, static-classes

我们需要在代码中使用具有静态方法的非托管库。我想在我的代码中引入库操作作为依赖项。除了拥有静态方法之外，该库还有一个初始化方法和一个设置方法，它们都是全局的。所以我不能把它包装在一个实例类中，因为如果一个实例改变了一个设置，所有其他实例都会受到影响，如果一个实例被初始化，所有其他实例都会被重新初始化。

我想把它作为一个单例类来介绍。这样它将在一个实例类中，但只有一个实例，因此我不必担心更改设置或初始化。您如何看待这种方法？我对依赖注入模式很陌生，我不确定单例模式是否是一个好的解决方案？对于类似的情况，您的解决方案是什么？

**编辑：**初始化也需要一个参数，所以我不能只锁定方法调用并在每次调用时重新初始化和更改设置。

**编辑 2：**以下是一些方法的签名：

```
public static void Initialize(int someParameter)
// Parameter can only be changed by re-initalization which
// will reset all the settings back to their default values.

public static float[] Method1(int someNumber, float[] someArray)

public static void ChangeSetting(string settingName, int settingValue) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T13:06:10.637

如果您只需要在启动时设置一次设置，那么我建议制作一个非静态包装类，该类在其自己的静态构造函数中完成静态类的所有初始化。这样您就可以放心，它只会发生一次：

```
public class MyWrapper
{
    public MyWrapper()
    {
        // Do any necessary instance initialization here
    }

    static MyWrapper()
    {
        UnManagedStaticClass.Initialize();
        UnManagedStaticClass.Settings = ...;
    }

    public void Method1()
    {
        UnManagedStaticClass.Method1();
    }
} 
```

但是，如果您需要在每次调用它时更改设置，并且您想让您的实例线程安全，那么我建议您锁定一个静态对象，这样您就不会在它们运行时意外覆盖静态设置仍在被另一个线程使用：

```
public class MyWrapper
{
    public MyWrapper()
    {
        // Do any necessary instance initialization here
    }

    static MyWrapper()
    {
        UnManagedStaticClass.Initialize();
    }

    static object lockRoot = new Object();

    public void Method1()
    {
        lock (lockRoot)
        {
            UnManagedStaticClass.Settings = ...;
            UnManagedStaticClass.Method1();
        }
    }
} 
```

如果您需要将初始化参数传递给类的实例构造函数，那么您也可以通过使用静态标志字段来做到这一点：

```
public class MyWrapper
{
    public MyWrapper(InitParameters p)
    {
        lock (lockRoot)
        {
            if (!initialized)
            {
                UnManagedStaticClass.Initialize(p);
                initialized = true;
            }
        }
    }

    static bool initialized = false;
    static object lockRoot = new Object();

    public void Method1()
    {
        lock (lockRoot)
        {
            UnManagedStaticClass.Settings = ...;
            UnManagedStaticClass.Method1();
        }
    }
} 
```

如果您还需要每次重新初始化，但您担心性能因为重新初始化太慢，那么唯一的其他选择（除了可怕的单例）是自动检测是否需要重新初始化和只有在必要时才这样做。至少那时，唯一会发生的情况是两个线程同时使用两个不同的实例。你可以这样做：

```
public class MyWrapper
{
    public MyWrapper(InitParameters initParameters, Settings settings)
    {
        this.initParameters = initParameters;
        this.settings = settings;
    }

    private InitParameters initParameters;
    private Settings settings;
    static MyWrapper currentOwnerInstance;
    static object lockRoot = new Object();

    private void InitializeIfNecessary()
    {
        if (currentOwnerInstance != this)
        {
            currentOwnerInstance = this;
            UnManagedStaticClass.Initialize(initParameters);
            UnManagedStaticClass.Settings = settings;
        }
    }

    public void Method1()
    {
        lock (lockRoot)
        {
            InitializeIfNecessary();
            UnManagedStaticClass.Method1();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:33:44.460

我将使用无状态服务类，并在每个方法调用中传递静态类的状态信息。在不知道您的课程的任何细节的情况下，我将仅用 ac# 静态类展示另一个示例。

```
public static class LegacyCode
{
    public static void Initialize(int p1, string p2)
    {
        //some static state
    }
    public static void ChangeSettings(bool p3, double p4)
    {
        //some static state
    }
    public static void DoSomething(string someOtherParam)
    {
        //execute based on some static state
    }
}

public class LegacyCodeFacadeService
{
    public void PerformLegacyCodeActivity(LegacyCodeState state, LegacyCodeParams legacyParams)
    {
        lock (_lockObject)
        {
            LegacyCode.Initialize(state.P1, state.P2);
            LegacyCode.ChangeSettings(state.P3, state.P4);
            LegacyCode.DoSomething(legacyParams.SomeOtherParam);
            //do something to reset state, perhaps
        }
    }
} 
```

您必须稍微填写一些空白，但希望您能明白这一点。关键是在所需的最少时间内在静态对象上设置状态，并在整个时间内锁定对它的访问，因此其他调用者不会受到全局状态更改的影响。您必须创建此类的新实例才能使用它，因此它是完全可注入和可测试的（提取接口的步骤除外，为简洁起见，我跳过了该步骤）。

这里有很多实现选项。例如，如果您必须对 LegacyCodeState 进行大量更改，但仅更改为少数特定状态，则可以使用重载来管理这些状态。

**编辑**

这在很多方面都比单例更可取，最重要的是，您将无法累积并耦合到全局状态：如果它是静态类的唯一入口点，这会将全局状态转换为非全局状态. 但是，如果您最终需要一个单例，您可以通过在此处封装构造函数来轻松切换。

```
public class LegacyCodeFacadeService
{
    private LegacyCodeFacadeService() { }

    public static LegacyCodeFacadeService GetInstance()
    {
        //now we can change lifestyle management strategies later, if needed
        return new LegacyCodeFacadeService();
    }

    public void PerformLegacyCodeActivity(LegacyCodeState state, LegacyCodeParams legacyParams)
    {
        lock (_lockObject)
        {
            LegacyCode.Initialize(state.P1, state.P2);
            LegacyCode.ChangeSettings(state.P3, state.P4);
            LegacyCode.DoSomething(legacyParams.SomeOtherParam);
            //do something to reset state, perhaps
        }
    }
} 
```

# jquery - jQuery convert a function to a plugin

> ID：14894981
> 
> 赞同：0
> 
> 时间：2013-02-15T12:43:35.427
> 
> 标签：jquery, jquery-plugins

I am trying to make this small plugin work but I am stuck at the moment. This is my first attempt to convert a function to a plugin.. Currently it's not working..

```
jQuery.fn.overlay_AS = function(opts) {

            clickable_link.click(function(evt){
                evt.preventDefault();

                var overlay_content = $('#'+current_link);

                overlay.children().fadeOut(200).promise().done(function () {
                    overlay_content.fadeIn();
                });
                //don't need to make the overlay fadeIn every time
                if (!overlay.is(':visible')) overlay.fadeIn(); 
            });

            overlay.click(function(){
                overlay.fadeOut();
                overlay.children().fadeOut(500);
            });         

        };

        $('.p_wrapper p').click(function(){
            $('.p_wrapper p').overlay_AS({
                clickable_link:$(this), 
                current_link:$(this).attr('class'),
                overlay: $('#overlay')
            });
        }); 
```

HTML:

```
<div class="p_wrapper">

    <p class="one">Link 1</p>

    <p class="two">Link 2</p>

    <p class="three">Link 3</p>

</div>

<div id="overlay">

    <p id="one">You clicked on p1</p>

    <p id="two">You clicked on p2</p>

    <p id="three">You clicked on p3</p>

</div> 
```

ALl it does is fading an overlay in and loading different content depending on what link you clicked on.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:19:36.240

看起来您仍在尝试将插件视为普通函数，而不是作用于所选元素的函数。

将插件代码更改为此（我认为）您想要的，并且只需要您传入您希望使用的覆盖，因为您已经为链接选择了容器：

```
jQuery.fn.overlay_AS = function(overlay) {   
    // hide overlay and bind event to fadeout overlays when clicked
    overlay.children().hide();
    overlay.click(function(){
        overlay.children().fadeOut(500);
    }); 

    // return $(this) to enable chaining
    return $(this).each(function() {   // loop so plugin can be applied to multiple elements
        $(this).find('p').click(function(evt){ // bind click to each p tag
            evt.preventDefault();
            var overlayId = $(this).attr('class'); // get the overlay id
            var selectedOverlay = $('#' + overlayId); // select the overlay to show

            // hide overlays then show selected overlay
            overlay.children().fadeOut(500).promise().done(function () {
                selectedOverlay.fadeIn();
            });
        });
    });            
};

$('.p_wrapper').overlay_AS($('#overlay')); // Select the wrapper 
```

[JSFiddle 示例](http://jsfiddle.net/dQePu/)

我建议的另一个更改是使用`data`属性而不是类来选择覆盖：

HTML：

```
 <p data-overlay-id="one">Link 1</p> 
```

JS：

```
 var overlayId = $(this).data('overlay-id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:26:41.060

除了理查德的回答之外，阅读它也可能会有所帮助：[http ://docs.jquery.com/Plugins/Authoring#Getting_Started](http://docs.jquery.com/Plugins/Authoring#Getting_Started)

# jquery - How to export painted image using html5 canvas tag?

> ID：14894988
> 
> 赞同：0
> 
> 时间：2013-02-15T12:43:54.633
> 
> 标签：jquery, html5-canvas

Good afternoon,

I am trying to extend websanova wPaint plugin using Kinetic.js jQuery library.

Here is what I have done: [http://jandeccpl.info/woodensigns/wPaint-master/](http://jandeccpl.info/woodensigns/wPaint-master/)

I want to export all data in canvas as a png or jpeg, But as I click on save image it only save background image not the two images whose location is set by user by dragging on canvas.

Kindly tell me how I can I export the entire canvas data as png/jpeg image.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:51:30.680

您需要将其转换为 base64。

# yii - yii Bootstrap Twitter - which extention is the "right" extension?

> ID：14894991
> 
> 赞同：4
> 
> 时间：2013-02-15T12:44:05.663
> 
> 标签：yii, yii-extensions

I want use [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) in my application.

I found for yii two extensions: [http://yii-booster.clevertech.biz/](http://yii-booster.clevertech.biz/) [http://www.cniska.net/yii-bootstrap/](http://www.cniska.net/yii-bootstrap/)

Mayby is more then this 2?

Which one is better? What is difference? What with licence? My application is commercial.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T16:25:07.503

Yii-Booster 是一个包含 Yii-Bootstrap 和许多其他 Yii 小部件和组件的库。

如果你只想要 Bootstrap，你的项目 Yii-Bootstrap 可能会解决你的问题，但如果你想要一个更完整的库，我推荐 Yii-Booster。

Yii-Booster 中包含的小部件示例：

*   选择2：http : [//ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)
*   可编辑：http: [//vitalets.github.com/bootstrap-editable/#options](http://vitalets.github.com/bootstrap-editable/#options)
*   StickyTableHeaders：[https ://github.com/jmosbech/StickyTableHeaders](https://github.com/jmosbech/StickyTableHeaders)
*   BootGroupGridView：[http ://groupgridview.demopage.ru/](http://groupgridview.demopage.ru/)
*   JQueryUI 引导 CSS：[http ://addyosmani.github.com/jquery-ui-bootstrap/](http://addyosmani.github.com/jquery-ui-bootstrap/)

和许多其他组件：

*   [http://yii-booster.clevertech.biz/components.html](http://yii-booster.clevertech.biz/components.html)
*   [http://yii-booster.clevertech.biz/json-grid.html](http://yii-booster.clevertech.biz/json-grid.html)
*   [http://yii-booster.clevertech.biz/extended-grid.html](http://yii-booster.clevertech.biz/extended-grid.html)；

正如在其他答案中告诉您的那样，这两个项目都使用许可证 New BSD 许可证。

一切都是为了满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T14:00:26.570

Yii Booster 是一个基于 Yii Bootstrap 的项目，并且有更多的组件。

这些项目具有相同的源代码库。

到目前为止，Yii Bootstrap 解决了我的问题，但是，如果您想使用 Yii Booster 的某些独特组件，请使用它！

这两个项目都使用许可证[New BSD License](http://opensource.org/licenses/bsd-license.php)。

有关项目的更多信息，您将在以下链接中找到：

*   [Yii Bootstrap - 扩展页面](http://www.yiiframework.com/extension/bootstrap)。
*   [Yii Bootstrap - 讨论主题](http://www.yiiframework.com/forum/index.php?/topic/23982-extension-bootstrap/)。
*   [Yii Booster - 扩展页面](http://www.yiiframework.com/extension/yiibooster/)。
*   [Yii Booster - 讨论主题](http://www.yiiframework.com/forum/index.php/topic/36258-yiibooster/)。

另一个类似的扩展： [Yii Foundation 3](http://foundation3.oakwebdev.com/?utm_source=update&utm_medium=ext-page&utm_campaign=v0.1.0)。

*   [Yii Foundation 3 - 扩展页面](http://www.yiiframework.com/extension/foundation3)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-26T13:49:47.440

Yii-Bootstrap 的更新版本是[Yiistrap](http://www.getyiistrap.com)。Yiistrap 也是由 Yii-Bootstrap 的作者编写的，并在 BSD-3-Clause 许可下提供，因此商业用途应该没问题。

正如已经指出的那样，Yii-Booster 只是一个预先打包的应用程序，已经有各种扩展。[例如， Yii-App](https://github.com/Crisu83/yii-app)是一个替代方案。它包含较少的标记扩展，但许多开发人员和后端扩展可能有助于基本开发。

# python - 使用 python 运行 windows shell 命令

> ID：14894993
> 
> 赞同：63
> 
> 时间：2013-02-15T11:29:43.943
> 
> 标签：python, windows, operating-system, shell

我们如何使用 Python 与 OS shell 交互？我想通过 python 运行 windows cmd 命令。如何实现？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-15T15:41:09.587

更新的`subprocess.check_output`和类似的命令应该替换`os.system`. 有关详细信息，请参阅[此页面](http://docs.python.org/2/library/subprocess.html)。虽然我无法在 Windows 上对此进行测试（因为我无权访问任何 Windows 机器），但以下应该可以工作：

```
from subprocess import check_output
check_output("dir C:", shell=True) 
```

`check_output`从您的命令返回一个输出字符串。或者，`subprocess.call`只需运行命令并返回命令的状态（如果一切正常，通常为 0）。

另请注意，在 python 3 中，该字符串输出现在已`bytes`输出。如果要将其更改为字符串，则需要类似

```
from subprocess import check_output
check_output("dir C:", shell=True).decode() 
```

如有必要，[您可以告诉它](https://docs.python.org/3/library/stdtypes.html#bytes.decode)您的程序输出的编码类型。默认值为`utf-8`，通常可以正常工作，但[此处](https://docs.python.org/3/library/codecs.html#standard-encodings)有其他标准选项。

另请注意，@bluescorpion 在评论中说 Windows 10 需要尾部反斜杠，如`check_output("dir C:\\", shell=True)`. 需要双反斜杠，因为`\`它是python中的特殊字符，所以必须[转义](https://docs.python.org/3.8/reference/lexical_analysis.html#index-22)。（另请注意，即使在字符串的最后一个字符前面加上前缀`r`也无济于事-是语法错误，但不是。）`\``r"dir C:\"``r"dir C:\ "`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-15T15:17:58.587

您将使用 os 模块[系统方法](http://docs.python.org/2/library/os.html#os.system)。

你只要输入命令的字符串形式，返回值就是windows环境变量COMSPEC

例如：

os.system('python') 打开 windows 命令提示符并运行 python 解释器

![os.system('python') 示例](../Images/bd3affc3a7f95bf277531fa607077ee3.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-12-09T20:00:58.727

重构@srini-beerge 的答案，得到输出和返回码

```
import subprocess
def run_win_cmd(cmd):
    result = []
    process = subprocess.Popen(cmd,
                               shell=True,
                               stdout=subprocess.PIPE,
                               stderr=subprocess.PIPE)
    for line in process.stdout:
        result.append(line)
    errcode = process.returncode
    for line in result:
        print(line)
    if errcode is not None:
        raise Exception('cmd %s failed, see above for details', cmd) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-01-07T10:43:10.433

简单导入 os 包并运行以下命令。

```
import os
os.system("python test.py") 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-24T06:39:17.840

您可以使用`subprocess`带有以下代码的包：

```
import subprocess
cmdCommand = "python test.py"   #specify your cmd command
process = subprocess.Popen(cmdCommand.split(), stdout=subprocess.PIPE)
output, error = process.communicate()
print output 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-04T10:52:13.617

```
import subprocess
result = []
win_cmd = 'ipconfig'(curr_user,filename,ip_address)
process = subprocess.Popen(win_cmd,
shell=True,
stdout=subprocess.PIPE,
stderr=subprocess.PIPE )
for line in process.stdout:
    print line
result.append(line)
errcode = process.returncode
for line in result:
    print line 
```

# java - Convert java.util.Set attributes with Commons BeanUtils

> ID：14894996
> 
> 赞同：1
> 
> 时间：2013-02-15T12:44:20.750
> 
> 标签：java, apache-commons-beanutils

I have a problem converting the following request URL:

```
entity.name=Test&entity.window[0].size=1&entity.windows[1].size=2 
```

to the following JavaBean:

```
public class House {
    private String nome;

    private Set<Window> windows;

    // ... getters and setters ...
}

public class Window {
    private int size;

    // ... getters and setters ...
} 
```

I get this error when I use `BeanUtils.populate`:

**Property 'windows' is not indexed on bean class 'class House'**

I think this problem occurs because Sets don’t have a known order to follow. So I can’t map values with indices like [0]...[1]...[2]. For my purpose, for converting request params to `java.util.Set` attributes, can I continue using `BeanUtils` with some adjustments or do I have to pick another library (which one)?