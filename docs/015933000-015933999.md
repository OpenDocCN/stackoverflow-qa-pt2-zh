# StackOverflow 问答 15933000-15933999

# jquery - 使用 jQuery 为手的图像制作动画以使其挥动

> ID：15933009
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:56:59.830
> 
> 标签：jquery, jquery-animate

我想使用 jQuery 为角色的手设置动画，使其就像在向某人挥手一样。我尝试交换 2 张图像（一只手指向左侧，一只手指向右侧）。但是不是很顺利……有没有更好的解决方案？我也尝试使用 jQuery 插件来旋转图像，但我找不到可以工作的插件（并且与 IE8 兼容）。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:59:53.423

当然，创建一个图像精灵

> [手 1/7][手 2/7][手 3/7][手 4/7][手 5/7][手 6/7][手 7/7]

全部在一张图像中，将您的手的边界设置为一个元素，并使用 jquery 循环您的元素的背景位置。

这个答案应该让你开始：
**[使用 css3 或 jquery 的背景图像动画？](https://stackoverflow.com/questions/14887331/background-image-animation-using-css3-or-jquery)**

```
var c = 0 ;
function loop(){
  c = ++c % 7; // Reminder the number of images (7)
  $('#hand').css({backgroundPosition: (240*c)+'px 0px'}); // 240 = one image/sprite width
}
setInterval(loop, 25); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:00:49.693

正如 roXon 所说，你可以这样做，这也很有用： [jQuery GIF Animations](https://stackoverflow.com/questions/1628576/jquery-gif-animations) take a look

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:44:24.583

CSS3[动画](http://www.w3.org/TR/css3-animations/)/[变换](http://www.w3.org/TR/css3-transforms/)可以创建动画

`[jsfiddle demo](http://jsfiddle.net/sfzc2/7/)`

```
.waving-anim {
    animation:wave 500ms infinite;
    transform-origin:bottom left;
}

@keyframes wave {
    0% {
        transform:rotate(3deg);
    }
    50% {
        transform:rotate(-3deg);
    }
    100% {
        transform:rotate(3deg);
    }
} 
```

确实需要供应商前缀（参见演示）并且在当前浏览器中受支持（包括 IE10）

# c++ - 一个 exec 函数中的多个终端命令

> ID：15933011
> 
> 赞同：0
> 
> 时间：2013-04-10T17:57:01.770
> 
> 标签：c++, unix, ubuntu, exec, fork

只是出于好奇，我想知道执行两个或多个 Linux 命令的最简单方法是什么。让我们看下面的例子：

```
1) free > tmp1
2) uptime > tmp2
3) cat tmp1 tmp2 > result
4) rm tmp1 tmp2 
```

我们如何在终端中用 1 行实现相同的功能：

```
free > tmp1 && uptime > tmp2 && cat tmp1 tmp2 > result && rm tmp1 tmp2 
```

现在我尝试在 C++ 中实现相同的目标（目标是在一个 execlp 中完成），例如：

```
pid_t child;
child = fork();
if ( child > 0 ) {
execlp("free", "free", ">", "tmp1", "&&", "uptime", "uptime", ">", "tmp2", "cat", "cat", "tmp1", "tmp2", ">", "result", "&&", "rm", "rm", "tmp1", "tmp2", NULL);
} 
```

你得到我想的图片。不用说它不起作用，它只是执行第一个命令然后死掉。无论如何要说到点子上了。

真的有必要在分叉的进程中创建单独的 execlp 行，然后在循环中“刷新”子进程吗？或者我们是否有替代方法可以在单个 execlp 行中执行相同的操作？

如果可能，请举例说明我们如何实现相同的结果。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:10:56.027

您混淆了“执行程序”和“在系统的命令解释器中输入文本”。您的解释器知道如何处理`">"`and `"&&"`，但它们不是可以执行的程序。

尝试使用[`system()`](http://www.cplusplus.com/reference/cstdlib/system/)

```
system("free > tmp1 && uptime > tmp2 && cat tmp1 tmp2 > result && rm tmp1 tmp2"); 
```

# ruby - 如何在 Ruby 中使用 Nokogiri 解析网页？

> ID：15933013
> 
> 赞同：0
> 
> 时间：2013-04-10T17:57:08.933
> 
> 标签：ruby, html-parsing, nokogiri

我正在使用 Nokogiri 来解析 html。对于显示的网站，我正在尝试创建一个哈希数组，其中每个哈希将包含网站上显示的给定评论的优点、缺点和建议部分。我在这样做时遇到了麻烦，并希望在这里得到一些建议。当我返回某个元素时，我没有得到网站上显示的正确内容。有任何想法吗？

```
require 'open-uri'
require 'nokogiri'

# Perform a google search
doc = Nokogiri::HTML(open('http://www.glassdoor.com/Reviews/Microsoft-Reviews-E1651.htm'))

reviews = []

current_review = Hash.new

doc.css('.employerReview').each do |item|
    pro = item.parent.css('p:nth-child(1) .notranslate').text
    con = item.parent.css('p:nth-child(2) .notranslate').text
    advice = item.parent.css('p:nth-child(3) .notranslate').text

    current_review = {'pro' => pro, 'con' => con, 'advice' => advice}

    reviews << current_review
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:06:08.727

试试这个：

```
reviews = []
doc.css('.employerReview').each do |item|
  pro, con, advice = item.css('.description .notranslate text()').map(&:to_s)
  reviews << {'pro' => pro, 'con' => con, 'advice' => advice}
end 
```

ruby 也更喜欢使用符号键，所以除非你需要它们是字符串，否则我会做

```
reviews << { pro: pro, con: con, advice: advice } 
```

# windows - PowerShell 移动项目 - 不移动文件

> ID：15933014
> 
> 赞同：1
> 
> 时间：2013-04-10T17:57:10.263
> 
> 标签：windows, powershell

我有一个脚本（粘贴在下面）应该执行以下操作：

1.  循环并抓取与定义的模式匹配的所有文件
2.  将这些文件复制到另一个位置
3.  将原始源文件移动到另一个位置（如果复制成功）

它正在执行第 1 步和第 2 步，但第 3 步，Move-Item 没有移动任何文件，我不知道为什么，也没有任何错误迹象

有人可以帮忙吗？谢谢

```
$source = "C:\Users\Tom\"
$source_move = "C:\Users\Tom\OldLogBackup1\"
$destination ="C:\Users\Tom\Mirror\"

if(-not(Test-Path $destination)){mkdir $destination | out-null}

ForEach ($sourcefile In $(Get-ChildItem $source | Where-Object { $_.Name -match "Daily_Reviews\[\d\d\d\d-\d\d\d\d\].journal" }))
{
    #escape filename because there are brackets in the name!
$src = [Management.Automation.WildcardPattern]::Escape($sourcefile)
Copy-Item  $src $destination

### Check for a successful file copy
if($?)
{

    #### 
    if(-not(Test-Path $source_move)){
        echo "Path does not exist!"
    } else { 
        echo "Path exists!"

        ### Move original source file someplace else
        Move-Item $source_move$sourcefile $source_move
        if($?)
        {
            echo "Source file successfully moved"

        } else {

            echo "Source file was not successfully moved"

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:17:25.163

该行`Move-Item $source_move$sourcefile $source_move`正在将目录中的 移动到目录中，该`$sourcefile`目录什么也不做。我猜你打算这样做，或者。`$source_move``$source_move``Move-Item $source$sourcefile $source_move``Move-Item $src $source_move`

此外，`echo`只是一个别名[`Write-Output`](http://go.microsoft.com/fwlink/?LinkID=113427)，它将参数返回给调用者。您可以在没有回声的情况下获得相同的结果（将返回任何单独的对象）。或者，如果您打算将这些用作调试语句，您可以使用[`Write-Debug`](http://go.microsoft.com/fwlink/?LinkID=113424)or [`Write-Host`](http://go.microsoft.com/fwlink/?LinkID=113426)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:05:15.030

尝试使用该`-force`选项。

# intuit-partner-platform - AggCat.getAccountTransactions 和帐户管理员费用

> ID：15933015
> 
> 赞同：1
> 
> 时间：2013-04-10T17:57:16.300
> 
> 标签：intuit-partner-platform, customer-account-data-api

信用卡帐户拥有可以查看公司所有费用的管理用户的情况并不少见。当使用 AggCat.getAccountTransactions 查询这样的帐户时，所有费用都会被提取，但是，在任何交易中，没有指向交易帐号的属性。

例如：

*   Fred (acct# 1234) 是一位普通用户，他的帐户中收取了 10.00 美元的费用
*   Mary (acct# 6789) 是所有帐户（包括 Fred 的）的管理员。她收取 24.00 美元的费用

当我查询 Fred 的帐户时，我只看到 10.00 美元的费用……很好。

当我查询 Mary 的帐户时，我得到了 Fred 和 Mary 的费用，据我所见，没有办法将她与 Fred 的交易区分开来。

API 中是否有某些部分可以帮助我区分 Mary 的查询，或者是否可以增强 API 以添加与交易关联的真实帐号？

在此示例中，正在查询美国运通 Blue 帐户，但我看到其他卡的类似安排。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:10:03.107

API 应该分离这些信息。

请提交支持票，以便我们获得有关该帐户的更多详细信息。

# google-apps-script - 自定义函数抛出“您没有 setValue 所需的权限”错误

> ID：15933019
> 
> 赞同：29
> 
> 时间：2013-04-10T17:57:31.787
> 
> 标签：google-apps-script, google-sheets, permissions, authorization, custom-function

我正在尝试为 Google 电子表格中的单元格设置一些值：

```
 function exampleFunction() {
      var ss = SpreadsheetApp.getActiveSpreadsheet();
      var sheet = ss.getSheets()[0];
      var range1 = sheet.getRange("A1");
      var value1 = range1.getValue();
      value1+=1;
      range1.setValue(2);
      return value1;
    } 
```

如果我尝试使用此功能影响单元格，则会出现此错误：

> 您没有设置值所需的权限。（第 10 行，文件“ddd”）

你知道我怎么能让这成为可能吗？我实际上希望受影响的单元格取单元格 A1 的值并将 A1 的值增加 1。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-10T20:58:51.003

从文档：

*自定义函数返回值，但它们不能在它们所在的单元格之外设置值。在大多数情况下，单元格 A1 中的自定义函数无法修改单元格 A5。但是，如果自定义函数返回双精度数组，则结果会溢出包含该函数的单元格并填充包含自定义函数的单元格下方和右侧的单元格。您可以使用包含 return [[1,2],[3,4]]; 的自定义函数对此进行测试。*

参考：[电子表格中的自定义函数](https://developers.google.com/apps-script/execution_custom_functions?hl=fr-FR)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-10-31T16:52:08.877

看起来您将上述函数用作自定义函数，换句话说，它是由 Google 表格 UI 上的单元格公式调用的，方式如下：

```
=exampleFunction() 
```

[Google 表格中的自定义函数](https://developers.google.com/apps-script/execution_custom_functions?hl=en)有一些限制，例如它们不能用于调用需要权限的 Google Apps 脚本服务。解决方法是使用另一种方法来调用该函数：

*   从 Google Apps 脚本编辑器运行它
*   使用[自定义菜单](https://developers.google.com/apps-script/guides/menus)
*   使用[触发器](https://developers.google.com/apps-script/guides/triggers/)

也可以从[对话框和侧边栏](https://developers.google.com/apps-script/guides/dialogs)、[Google Apps Script Web 应用程序](https://developers.google.com/apps-script/guides/web)以及使用[Google Apps Script execution API 调用它们](https://developers.google.com/apps-script/guides/rest/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-03T21:21:59.453

如上所述，自定义函数确实有权限限制。它们可以使用自定义菜单运行，或者您可以插入图像并为其分配自定义脚本以像按钮一样使用它。

使用[触发器](https://developers.google.com/apps-script/guides/triggers/)是完成类似此示例的另一种方法，这使其自动化。

App Script 中的一个简单触发器（例如）`onSelectionChange(e)`不会遇到将自定义函数放入单元格的权限问题。此触发器比原始帖子中的触发器更新。在下面的简单示例中，单元格 A1 将变成白色并带有偶数整数和红色其他任何东西。当然，触发器触发的速度可能会有所不同。它并不总是像人们期望的那样即时。

```
function onSelectionChange(e) {

  const sheet = SpreadsheetApp.getActive()
  var value1 = sheet.getRange("A1").getValue()
    if(value1 % 2 == 0) {
        sheet.getRange("A1").setBackground("#FFFFFF") //white
    } else {
        sheet.getRange("A1").setBackground("#FF0000") //red
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-08T18:51:32.923

终于找到了设置公式的方法……
只是和我们程序员想的有点不一样。
您可以在宏中使用 SetFormula，但不能在 CustomFunction 中使用。
只需从中创建一个简单的宏`Tools->Macros->Record Macro`，然后打开脚本编辑器并将宏的代码更改为您的代码...
这是我的宏代码：

```
function SetFormula() {
  var spreadsheet = SpreadsheetApp.getActive();
  var formulaValue = spreadsheet.getRange('formulaText').getValue().toString();
  spreadsheet.getRange('total').setFormula(formulaValue);
  return formulaValue;
}; 
```

然后为了自动运行你的宏，（你可以手动运行`Tools->Macros->YOUR-MACRO-NAME`），只需创建一个触发器，如下所示：

1.  打开脚本编辑器：
    [![脚本编辑器](https://i.stack.imgur.com/Y7l6T.png)](https://i.stack.imgur.com/Y7l6T.png)

2.  然后从左侧面板转到**触发器并点击添加触发器按钮：**
    [![触发左侧面板中的项目](https://i.stack.imgur.com/NVrj7.png)](https://i.stack.imgur.com/NVrj7.png) [![触发器页面](https://i.stack.imgur.com/Z20mj.png)](https://i.stack.imgur.com/Z20mj.png)

3.  最后，创建触发器，从列表中选择您的宏（我的是**SetFormula**），选择**Event Source**作为**From SpreadSheet**，并且**Event Type**等于**On Edit**并保存。 [![创建新触发器](https://i.stack.imgur.com/l98VJ.png)](https://i.stack.imgur.com/l98VJ.png)

就是这样！
**注意：**我将我的范围命名为`FormulaText`和`total`更灵活。
你可以从这里做到这一点：
[![命名范围](https://i.stack.imgur.com/8m36o.png)](https://i.stack.imgur.com/8m36o.png)

# scala - Scala sbt - 使用通配符或正则表达式清理文件

> ID：15933020
> 
> 赞同：3
> 
> 时间：2013-04-10T17:57:32.663
> 
> 标签：scala, sbt

假设我有一个 Scala 程序，它创建以`.foo`.

我正在构建`sbt`并希望在`sbt clean`调用时删除这些文件。

[在 SBT 构建中添加附加目录以清理任务](https://stackoverflow.com/questions/10471596/)表明可以通过以下方式添加单个文件

```
cleanFiles <+= baseDirectory { _ / "test.foo" } 
```

但是，目前尚不清楚如何将其扩展为：

```
cleanFiles <append> <*.foo> 
```

所有`.foo`文件都在同一个目录中，所以我不需要递归检查目录。不过，这也很有趣。

1.  如何配置`sbt`以清理匹配通配符或正则表达式的文件？
2.  `sbt clean`删除我的程序生成的文件是一个糟糕的设计决定吗？我应该在我的程序中使用标志吗？using`sbt clean`对我来说似乎更干净，而不是不得不打电话`sbt clean`then `sbt "run --clean"`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:57:38.743

`*.foo`这将在基本目录（但不是子目录）中找到任何匹配的内容：

```
cleanFiles <++= baseDirectory (_ * "*.foo" get) 
```

这是有效的，因为它`Seq[File]`被隐式转换为 a [`PathFinder`](http://www.scala-sbt.org/0.12.1/api/sbt/PathFinder.html)，它具有诸如`*`（匹配基目录中的模式）和`**`（匹配包括子目录的模式）之类的方法。然后`get`将其转换回`Seq[File]`.

# php - PHP - 覆盖文件时出错

> ID：15933021
> 
> 赞同：0
> 
> 时间：2013-04-10T17:57:33.160
> 
> 标签：php, file, overwrite

我有一个 PHP 文件，它计算一个经常增加的值：

```
<?$totI=515905;?> 
```

有时另一个文件会重置 $totI 变量（可能是因为它一起加载和写入两次）。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:40:14.293

`fopen($file,"a")`我通过使用而不是在函数之后`fopen($file,"w")`添加来修复它`ftruncate``flock`

# jquery - Jquery slideToggle 问题

> ID：15933023
> 
> 赞同：1
> 
> 时间：2013-04-10T17:57:39.123
> 
> 标签：jquery, slidetoggle

我需要在下面的 jquery 代码中进行小的修改。（[演示在这里](http://jsfiddle.net/awaises/U3zFR/1/)）

如果您在演示中注意到，标题 1 可以按照我的意愿完美地向上/向下滑动，但标题 2 和 3 不是。不同之处只是我在 ("Heading Two" , "Heading Three" ) 标签周围添加了另一个 div。我知道，需要对这一行做一些事情 $(this).next("p").slideToggle("fast"); 但我不知道该怎么做，因为我是 Jquery 的初学者。

以下是我的代码

```
$(document).ready(function(){
    $("p").hide();

    $("h3").click(function(){
        $(this).next("p").slideToggle("fast")
        $(this).toggleClass("active");
    });
    $('.mylink').click(function(){
        $(this).parent('p').prev().trigger('click');
    })
}); 
```

请指导

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:20:13.650

虽然并不完美，但这将为您提供所需的功能：

```
$(document).ready(function(){
    $("p").hide();

    $("h3").click(function(){
        $(this).closest('.accordion').find("p").slideToggle("fast");
        $(this).toggleClass("active");
    });
    $('.mylink').click(function(){
        $(this)
          .parent()
          .slideToggle('fast')
          .closest('.accordion')
          .find('h3')
          .toggleClass('active');
    })
}); 
```

主要变化是`closest()`用于定位父元素并将其用作元素的`.accordion`参考点。 `find()``p`

编辑：由于某种原因，codepen 很无聊，这是一个[jsfiddle](http://jsfiddle.net/LABpM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:03:31.077

您的代码中的问题是您在两个和三个标题上使用了父 div，例如：

```
<h3 class="some_class">Heading One</h3> 
```

但不是你的代码

```
 <div class="some_class"><h3>Heading One</h3></div> 
```

[jsfiddle](http://jsfiddle.net/U3zFR/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:19:33.867

好吧，如果你需要保留结构， .next() 必须去。我想不出一个不那么混乱的方法来做到这一点，但结合它的父标签并寻找兄弟

：

```
$(this).parent().addBack().siblings("p").slideToggle("fast") 
```

据我所知，它工作得很好：http: [//jsfiddle.net/damyanpetev/U3zFR/5/](http://jsfiddle.net/damyanpetev/U3zFR/5/)

# database - 如何将会员数据库构建为 POCO 类并导航到其用户表？

> ID：15933024
> 
> 赞同：1
> 
> 时间：2013-04-10T17:57:52.227
> 
> 标签：database, c#-4.0, entity-framework-4, ef-code-first, poco

谁能帮我解决这个问题，我想使用会员数据库的表和我自己的项目数据库，我需要使用用户表中的一些数据（在评论中获取用户名和他的头像）所以我的问题是如何将会员数据库构建为 POCO 类，以及是否可以在不影响 asp.net 会员功能的情况下在我的用户表和我的评论表之间建立关系？

# xna - XNA 控制设置

> ID：15933025
> 
> 赞同：1
> 
> 时间：2013-04-10T17:57:54.453
> 
> 标签：xna, controls, key, settings, config

我在为我的游戏编辑控件时遇到了一个大问题。我有一个游戏内按钮，当你点击它时。出现“选择您的密钥..”文本，但我不知道如何实际设置它..

我做了一个“等待输入”bool..这不是真正的代码它是我想象的那样

```
if (buttonIsClicked) waitinForInput = true;

while(waitingForInput)
{
kbState = Keyboard.GetState();
somehow convert it to Keys.(STH);
if (Keys.STH != defaultKeys)
{
defaultKeys = Keys.STH;
waitingForInput = false;
}
} 
```

有没有办法做到这一点.. 尽可能简单？对不起我的英语不好..这是匆忙而不是我的母语..

谢谢你的帮助.. ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:26:01.380

像这样的东西：

```
 KeyboardState currentKeyboardState = new KeyBoardState();
 KeyboardState previousKeyboardState = new KeyBoardState();

 Keys jumpKey = Keys.Space;

 public void handleInput()
 {
     lastKeyboardState = currentKeyboardState;

     currentKeyboardState = Keyboard.GetState(PlayerIndex.One);

     bool waitingForKey = false;

     if(currentKeyboardState.IsKeyDown(Keys.A) && waitingForKey == false)
     {
         waitingForKey = true;            
     }

     if(waitingForKey == true)
     {
          //currentKeyboardState.GetPressedKeys() returns a list of pressed keys,
          //So, currentKeyboardState.GetPressedKeys()[0] returns the first pressed key

          if(currentKeyboardState.GetPressedKeys().Count() > 0)
          {
            jumpKey = currentKeyboardState.GetPressedKeys()[0];
            waitingForKey = false;
          }
     }
 } 
```

# jsf - 当我通过单击每一行进行 ajax 调用时，避免每次加载数据表

> ID：15933026
> 
> 赞同：0
> 
> 时间：2013-04-10T17:57:57.017
> 
> 标签：jsf, jsf-2

在 JSF2 中 - 每次通过单击每一列行进行 ajax 调用时，我都会看到我的数据表重新加载。有没有办法在我每次进行 ajax 调用时停止加载？这会通过将我的数据表重置为默认值来产生问题，并且我在托管 bean 中得到了错误的值。

```
<h:inputText size="8" id="startDate"
value="#{contactBean.startDate}">
<f:convertDateTime pattern="MM/dd/yyyy" type="date" />
</h:inputText>
<h:outputText> - </h:outputText>
<h:inputText size="8" id="endDate" value="#{contactBean.endDate}">
<f:convertDateTime pattern="MM/dd/yyyy" type="date" />
</h:inputText>
<h:commandButton value="Filter"  
actionListener="#{contactBean.loadAJAXFilterContentList}">
<f:ajax render=":form1:tableContents" />
</h:commandButton>

<h:dataTable id="tableContents"
value="#{contactBean.filterContentList}" var="crs"
binding="#{contactBean.dataTable}" border="1">

    <h:column>
        <f:facet name="header">
            <h:outputText styleClass="contactTableHeader" value="Date/Time" />
        </f:facet>
        <h:commandLink action="#{contactBean.loadPreviewScreenContents(crs)}">
            <h:outputText title="#{crs.dateTime}" value="#{crs.dateTime}">
                <f:convertDateTime pattern="MM/dd/yyyy hh:mm a" type="date" />
            </h:outputText>

            <f:ajax render=":form1:previewScreen" />
        </h:commandLink>
    </h:column>
</h:dataTable>

<h:panelGrid id="previewScreen">
    <h:outputText styleClass="PreviewHeader"
        value="Preview of #{contactBean.previewCntDateTime}" />
</h:panelGrid> 
```

因此，在上述情况下，每当我单击列时，它都会在我的托管 bean 中调用 filterContentList() 方法，而不是直接调用 loadPreviewScreenContents(crs)。我的 bean 是 RequestScoped。我尝试使用 SessionScope、ViewScope 但这两个范围保留了我以前的状态，就像我的页面中有其他 ajax 函数一样，它保留了该状态。所以在这种情况下我不能使用 Session 或 ViewScopes。

有解决办法吗？

```
Bean code:
@ManagedBean(name = "contactBean")
@RequestScoped
public class ContactManagedBean implements Serializable {
private static final long serialVersionUID = 1L;
List<ContactResponseBean> filterContentList = new ArrayList<ContactResponseBean>();
ContactRequestBean contactRequestBean = new ContactRequestBean();
ContactResponseBean crs = new ContactResponseBean();
private String logText;
HtmlDataTable dataTable;
public void setFilterContentList(List<ContactResponseBean> filterContentList) {
this.filterContentList = filterContentList;
}
public void setFilterContentList(List<ContactResponseBean> filterContentList) {
    this.filterContentList = filterContentList;
}
public Date getPreviewCntDateTime() {
    return previewCntDateTime;
}
public void setPreviewCntDateTime(Date previewCntDateTime) {
    this.previewCntDateTime = previewCntDateTime;
}
public String getLogText() {
    return logText;
}

public void setLogText(String logText) {
    this.logText = logText;
}
public HtmlDataTable getDataTable() {
    return dataTable;
}

public void setDataTable(HtmlDataTable dataTable) {
    this.dataTable = dataTable;
}
public ContactResponseBean getCrs() {
    return crs;
}
public void setCrs(ContactResponseBean crs) {
    this.crs = crs;
}

   public Date getStartDate() {
    return startDate;
}
public void setStartDate(Date startDate) {
    this.startDate = startDate;
}

public Date getEndDate() {
    return endDate;
}
public void setEndDate(Date endDate) {
    this.endDate = endDate;
}

public void loadAJAXFilterContentList() {
    filterButtonAjxFlag = true;
}

public List<ContactResponseBean> getFilterContentList() {   
        ContactRequestBean contactRequestBean = new ContactRequestBean();
        contactRequestBean.setUserId(getUserId());
        contactRequestBean.setSummaryType(getSummaryType());
        contactRequestBean.setStartDate(getStartDate());
        contactRequestBean.setEndDate(getEndDate());
            ContactRequestBeanService crbs = new ContactRequestBeanService();
        filterContentList = crbs.getFilterContentList(contactRequestBean);
    return filterContentList;
}
public void loadPreviewScreenContents(){
crs = (ContactResponseBean) dataTable.getRowData();
setPreviewCntDateTime(crs.getDateTime());
}
} 
```

# c++ - 在 C++ 中使用属性管理大型空间数据集

> ID：15933029
> 
> 赞同：2
> 
> 时间：2013-04-10T17:58:06.390
> 
> 标签：c++, attributes, point-clouds, spatial-data

我有一个包含大约 700 000 个条目的数据集，每个条目都是一组 3D 坐标，具有名称、时间戳、ID 等属性。

现在我只是在读取坐标并将它们渲染为 OpenGL 中的点。但是，我想将每个点与其对应的属性相关联，并且我希望能够在运行时根据它们的属性对它们进行排序和挑选。我将如何以有效的方式实现这一目标？

我知道我可以将数据放入结构中并使用 stl 排序进行排序，但这是一个好的设计选择还是有更有效/优雅的方式来处理问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:34:15.013

我倾向于查看这些设计选择的方式是首先使用标准库容器之一（顺便说一句，如果您需要“只是”进行查找，则不一定要排序，但您需要一个允许查找的容器） ，然后检查这是否是解决问题的“足够有效”的解决方案。

您通常可以提出一个更高效、可能更优雅的自定义解决方案，但您往往会遇到两个问题：

1）您最终不得不实现某种类型的容器，与已经存在的易于理解和测试的容器相比，这将花费您在实现和调试方面的时间。大多数时候，您最好尝试解决手头的问题，而不是通过添加更多代码来扩大问题。

2）如果其他人必须在某个时候维护您的代码，他们很可能从设计和实现的角度都熟悉标准库组件，但他们不会熟悉您的自定义容器，从而增加了学习曲线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:36:37.740

如果您正在处理点云，请查看[PCL](http://pointclouds.org/)，它可以为您节省大量时间和精力，而无需自己深入研究空间索引的复杂性。它还包括可视化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:57:11.140

如果您将点类的每个属性都视为向量的一个组成部分，那么您的选择过程就是一个区域查询。您的字符串属性等于某物的示例意味着该区域实际上是数据空间中的一条线。但是，不会对该选择中的其他属性进行任何排序，您必须自己实现它，但对于八叉树来说应该相对简单，它在有序区域中划分数据。

正如另一个答案所倡导的，首先尝试现有的标准解决方案。如果你能找到这些数据结构之一的现成实现：

*   *R-树*
*   *KD树*
*   *BSP*
*   *八叉树*，或者更可能是四叉树或八叉树原理的*n 维版本*（我将在这里使用术语八叉树来表示一般数据结构）

然后去吧。这些是我推荐用于空间数据管理的数据结构。

您还可以使用能够处理空间数据的嵌入式 RDBMS（它们通常实现 R-tree 用于空间索引），但如果您的数据集不是动态的，它可能不会很有趣。

如果您的数据集在 10000 个条目范围内，那么按照今天的标准，它并没有那么大，因此使用更简单的结构就足够了。在那个范围内，我会先选择一个简单的`std::vector`，然后使用`std::sort`and`std::find`过滤较小集合中的数据，然后对其进行排序。

我可能会在第二次尝试中尝试对查询最多的属性进行有序集或映射，然后进行一些基准测试以选择性能更高的解决方案。

对于更有效的一维索引算法（本质上，这就是集合和映射），您可能想尝试*B-trees*：google 提供了 C++ 实现。

我的第三次尝试将转向 OpenCL 解决方案（尽管如果您正在执行繁重的 OpenGL 渲染，您可能更喜欢在 CPU 上进行工作，但这取决于您的帧速率需求）。

如果您的数据集看起来更大，那么请考虑我最初列出的更复杂的解决方案之一。

无论如何，如果没有关于您的数据集以及您打算如何使用它的更多详细信息，将很难提供一个好的解决方案，所以我们能给出的唯一真正的建议是：尽*你所能并进行基准测试。*

# plsql - 在oracle中执行变量

> ID：15933030
> 
> 赞同：0
> 
> 时间：2013-04-10T17:58:11.507
> 
> 标签：plsql, oracle11g

以下过程编译成功。但是，当我尝试运行它时出现错误。

```
CREATE OR REPLACE PROCEDURE SAMPLE_PROCEDURE 
AS
VARIABLE1 VARCHAR2(2000);
BEGIN
VARIABLE1:='DECLARE A TIMESTAMP:=LOCALTIMESTAMP; 
CREATE GLOBAL TEMPORARY TABLE TEMP_BWXROW
   (ROW_ID NUMBER(10),DIVISION VARCHAR2(256),OUTLET VARCHAR2(256),CLASS VARCHAR2(256));';

EXECUTE IMMEDIATE VARIABLE1;
END; 
```

错误是：

```
6550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

你能帮我吗，这有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:08:43.293

这样做的问题是，您几乎可以肯定不应该在运行时创建表，并且您几乎可以肯定不应该使用动态 PL/SQL，而且您真的，真的，真的不应该在动态 PL 中动态创建表/SQL 块。

如果您绝对决定这样做，则`CREATE TABLE`语句本身需要在动态 PL/SQL 块内使用动态 SQL。如果我的所有引号都正确转义，你最终会得到这样的结果

```
CREATE OR REPLACE PROCEDURE SAMPLE_PROCEDURE 
AS
  VARIABLE1 VARCHAR2(2000);
BEGIN
  VARIABLE1:='DECLARE 
                A TIMESTAMP:=LOCALTIMESTAMP; 
              BEGIN
                EXECUTE IMMEDIATE ''CREATE GLOBAL TEMPORARY TABLE TEMP_BWXROW
                                    (ROW_ID NUMBER(10),
                                     DIVISION VARCHAR2(256),
                                     OUTLET VARCHAR2(256),
                                     CLASS VARCHAR2(256))'';
              END;';

  EXECUTE IMMEDIATE VARIABLE1;
END; 
```

但是，如果我在我的一个系统中遇到这样的一段代码，我会与原始开发人员进行一次措辞非常强硬的对话，以了解是什么让他们相信任何问题都需要 PL/SQL 执行动态 PL/SQL本身执行动态 SQL 语句的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:02:31.150

动态创建全局临时表很奇怪。无论如何，我认为这都是学习练习的一部分......

尝试这个：

```
CREATE OR REPLACE PROCEDURE SAMPLE_PROCEDURE 
AS
  VARIABLE1 VARCHAR2(2000);
BEGIN
  VARIABLE1:='DECLARE A TIMESTAMP:=LOCALTIMESTAMP; 
              BEGIN
              CREATE GLOBAL TEMPORARY TABLE TEMP_BWXROW
                (ROW_ID NUMBER(10),
                 DIVISION VARCHAR2(256),
                 OUTLET VARCHAR2(256),
                 CLASS VARCHAR2(256));
              END';

  EXECUTE IMMEDIATE VARIABLE1;
END; 
```

# php - 只允许数字、字母和破折号的正则表达式？

> ID：15933032
> 
> 赞同：-4
> 
> 时间：2013-04-10T17:58:18.097
> 
> 标签：php, regex

没有空格且只允许使用数字、字母和破折号的字符串的正则表达式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:35:25.863

尝试使用这个：`^(?! )[0-9a-zA-Z-]*$`。我用于测试的示例可以在[这里](http://rubular.com/r/EGDwd8h7Qr)看到。

# javascript - 使用 onclick 按钮在 Javascript 中添加输入字段

> ID：15933037
> 
> 赞同：9
> 
> 时间：2013-04-10T17:58:40.880
> 
> 标签：javascript, html, onclick

我一直习惯于使用 jquery 或其他 javascript 框架，但现在我没有可使用的框架，所以我想看看是否有人知道如果可能的话，我可以如何在直接的 javascript 中做到这一点。

基本上我有一个这样的div

```
<input type="button" id="more_fields" onclick="add_fields();" value="Add More" />

<div id="room_fileds">
    <div class='label'>Room 1:</div>
    <div class="content">
        <span>Width: <input type="text" style="width:48px;" name="width[]" value="" /><small>(ft)</small> X </span>
        <span>Length: <input type="text" style="width:48px;" namae="length[]" value="" /><small>(ft)</small</span>
    </div>
</div> 
```

我需要的是，当单击添加更多按钮时，我基本上需要添加更多的宽度和长度字段，或者创建一个像上面所有 div 一样的整个结构，或者只是在现有字段下方插入新的 span 标签。

我知道如何使用 jquery 或原型框架来做到这一点，但不幸的是我不能为此使用任何框架。有谁知道该怎么做。我会为此发布代码iv，但我什至不知道在哪里开始。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-10T18:10:10.003

您可以使用该`innerHTML`属性来添加内容。`id="wrapper"`在`div`你的元素周围添加一个`span`然后你可以做

```
var dummy = '<span>Label: <input type="text"><small>(ft)</small></span>\r\n';
document.getElementById('wrapper').innerHTML += dummy; 
```

当然，您不需要`id`并且可以使用其他 DOM 方法来访问`div`，但我发现使用`id`s 更容易和更清洁。这是一个快速的[小提琴](http://jsfiddle.net/2t9Dh/)

另请注意，您不应内联您的 css 代码，也不应将您的 javascript 调用直接附加到 DOM 元素中。分离 DOM、Javascript 和 CSS 会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T18:25:14.487

不需要新建房间吗？

```
var room = 1;
function add_fields() {
    room++;
    var objTo = document.getElementById('room_fileds')
    var divtest = document.createElement("div");
    divtest.innerHTML = '<div class="label">Room ' + room +':</div><div class="content"><span>Width: <input type="text" style="width:48px;" name="width[]" value="" /><small>(ft)</small> X</span><span>Length: <input type="text" style="width:48px;" namae="length[]" value="" /><small>(ft)</small></span></div>';

    objTo.appendChild(divtest)
} 
```

演示：http: [//jsfiddle.net/nj4N4/7/](http://jsfiddle.net/nj4N4/7/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T18:13:17.720

只需使用`innerHTML`这样的：

顺便说一句，我将 div 更改`class="content"`为`id="content"`您可以根据需要添加新的 id。

```
function add_fields() {
   var d = document.getElementById("content");

   d.innerHTML += "<br /><span>Width: <input type='text'style='width:48px;'value='' /><small>(ft)</small></span> X <span>Length: <input type='text' style='width:48px'  value='' /><small>(ft)</small</span>";
} 
```

**演示：http:** [//jsbin.com/oxokiq/5/edit](http://jsbin.com/oxokiq/5/edit)

# java - delphi解密转换Java代码

> ID：15933038
> 
> 赞同：0
> 
> 时间：2013-04-10T17:58:43.177
> 
> 标签：java, delphi, encryption

如何将 Delphi 编写的特定代码转换为 JAVA？

Delphi 代码是解密代码。

```
function Decrypt(const S: String; Key1, Key2, Key3: WORD): String;
var
  i: Byte;
  FirstResult: String;
begin
  FirstResult:=HexToValue(S);
  SetLength(Result, Length(FirstResult));
  for i:=1 to Length(FirstResult) do begin
    Result[i]:=Char(Byte(FirstResult[i]) xor (Key1 shr 8));
    Key1     :=(Byte(FirstResult[i])+Key1)*Key2+Key3;
  end;
end;

function HexToValue(const S: String) : String;
var i: Integer;
begin
  SetLength(Result, Length(S) div 2);
  for i:=0 to (Length(S) div 2)-1 do begin
    Result[i+1] := Char(StrToInt('$'+Copy(S,(i*2)+1, 2)));
  end;
end; 
```

加密问题由“David Heffernan”和“stackoverflow.com”解决

问题1：[delphi加密转换Java代码](https://stackoverflow.com/questions/15885898/delphi-encrypt-convert-java-code)

非常感谢！所以我尝试将 Delphi 中的 Decrypt 代码转换为 JAVA 直到现在！！！真的嗯...但我无法解决它！我的天啊！我很惭愧……但我希望你能帮助我。再次...我需要解密代码..

Java 加密代码

```
class SO15885898 {

    private static String ValueToHex(int myInt)
    {
    StringBuilder sb = new StringBuilder();
    sb.append(Integer.toHexString(myInt & 0xff));
    if (sb.length() < 2) {
        sb.insert(0, '0'); // pad with leading zero if needed
    }
    return sb.toString();
    }

    public static void main(String[] args)
    {
    int key1=11;        
    int key2=22;        
    int key3=33;

    String value = "ABCDE";
    for(int i=0; i<value.length(); i++){
        byte bValue = value.substring(i).getBytes()[0];
        int rValue = bValue^(key1>>8);
        key1 = ((rValue+key1)*key2+key3) & 0xffff;
        System.out.print(ValueToHex(rValue));
    }
    }
} 
```

请Java解密代码！！. .

这是我尝试过的：

```
public static void main(String[] args)
{
 int key1=111;        
 int key2=222;        
 int key3=333;

 i tried about this...

 String resultH = "";
 String resultEncrypt = "";
 String resultDecrypt = "";
 String value = "ABCDEF";

 for(int i=0; i<value.length(); i++){
     byte bValue = value.substring(i).getBytes()[0];
     int rValue = bValue^(key1>>8);
     key1 = ((rValue+key1)*key2+key3) & 0xffff;
     resultEncrypt += ValueToHex(rValue);
  resultH += HexToValue(ValueToHex(rValue).getBytes()) ;
 }

 key1=111;
 for(int i=0; i<resultH.length(); i++){
     byte bValue = resultH.substring(i).getBytes()[0];
     int rValue = bValue^(key1>>8);
     key1 = ((rValue+key1)*key2+key3) & 0xffff;
     resultDecrypt += rValue;
 }

 //41db791e06a9
 System.out.println("resultEncrypt : " + resultEncrypt);
 //91242156862519211605712161341202650962331971751025.......................
 System.out.println("resultDecrypt : " + resultDecrypt);
}

public static byte[] HexToValue(byte[] szSrc) {
    int nLen = szSrc.length;
    byte[] szDest = new byte[nLen / 2];
    char szChar[] = new char[2];
    for (int I = 0; I < nLen / 2; I++) {
        szChar[0] = (char) szSrc[I * 2];
        szChar[1] = (char) szSrc[I * 2 + 1];
        byte btDest = (byte) HexToDecimal(szChar);
        int nDest = btDest < 0 ? (Byte.MAX_VALUE + 1) * 2 + btDest : btDest;
        szDest[I] = (byte) nDest;
    }
    String sRet = new String(szDest);
    return szDest;
}

public static int HexToDecimal(char[] szSrc) {
    int nRet = 0;
    int nLen = szSrc.length;
    for (int i = 0; i < nLen; i++) {
        byte cChar = (byte) szSrc[i];
        nRet = nRet * 16;
        nRet += HexToDecimal(cChar);
    }
    return nRet;
}
public static int HexToDecimal(byte cChar) {
    if (cChar == 'A' || cChar == 'a')
        return 10;
    if (cChar == 'B' || cChar == 'b')
        return 11;
    if (cChar == 'C' || cChar == 'c')
        return 12;
    if (cChar == 'D' || cChar == 'd')
        return 13;
    if (cChar == 'E' || cChar == 'e')
        return 14;
    if (cChar == 'F' || cChar == 'f')
        return 15;
    return (cChar - 48);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:34:17.133

这是您的 Delphi 代码的翻译：

```
class SO15933038 
{

    private static int[] hexStringToIntArray(String s) 
    {
        int len = s.length();
        int[] data = new int[len / 2];
        for (int i=0; i<len; i+=2) {
            data[i / 2] =  ((Character.digit(s.charAt(i), 16) << 4)
                           + Character.digit(s.charAt(i+1), 16));
        }
        return data;
    }

    private static String intArrayToHexString(int[] a)
    {
        StringBuilder sb = new StringBuilder(a.length);
        for (int i=0; i<a.length; i++)
        {
            sb.append((char) a[i]);
        }
        return sb.toString();
    }

    public static String Decrypt(String encrypted, int key1, int key2, int key3)
    {
        int[] input = hexStringToIntArray(encrypted);
        int[] output = new int[input.length];
        for (int i=0; i<output.length; i++)
        {
            output[i] = input[i]^(key1>>8) & 0xff;
            key1 = ((input[i]+key1)*key2+key3) & 0xffff;
        }
        return intArrayToHexString(output);
    }

    public static void main(String[] args) 
    {
        System.out.println(Decrypt("41db791e06a9", 111, 222, 333));
    }
} 
```

这可能是有史以来写过的最蹩脚的Java。连同您上一个问题的答案，我现在编写了两个 Java 程序。

# android - Android：java运行时异常无法创建服务

> ID：15933040
> 
> 赞同：0
> 
> 时间：2013-04-10T17:58:55.900
> 
> 标签：android

我创建了一个项目，它使用一个名为服务类的类来连续获取位置并将其保存到数组列表中。但它显示了一些错误。该项目在android 2.1上

服务类.java

```
package com.example.tracemeendpointsjson;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import Trace.date.TimeDate;
import android.app.Service;
import android.content.Intent;
import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.util.Log;
import android.widget.Toast;

public class ServiceClass  extends Service implements LocationListener {
    double mLongitude ;
    double mLatitude;
    boolean check;
    public static int k;
    CommonClass cmn;
    MainActivity ma;
    int i;
    LocationManager mLocationManager;
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public void onCreate() {
        super.onCreate();
        Toast.makeText(ServiceClass.this, "Service started", Toast.LENGTH_SHORT).show();
        cmn=new CommonClass();
        ma=new MainActivity();

        cmn.StartTime=new TimeDate().timeToString();
         System.out.println("StartTime ::  "+cmn.StartTime);
         cmn.StartDate=new TimeDate().dateToString();
         System.out.println("StartDate ::  "+cmn.StartDate);

        check = true;
        i = 0;
        k=0;
        initializeLocationAndStartGpsThread();

    }

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        setCurrentGpsLocation(location);    
    }
    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    private void setCurrentGpsLocation(Location location) {
        String bestProvider = "";
        if (location == null) {

            mLocationManager =(LocationManager) getSystemService(LOCATION_SERVICE);
                    mLocationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 1000, 0, this); // Every 10000 msecs  
                    System.out.println("GPS_PROVIDER:  ");
            location = mLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);             

        }
        try {
            mLongitude = location.getLongitude();
         mLatitude = location.getLatitude();

         String la=Double.toString(mLatitude);
         String ln=Double.toString(mLongitude);

         System.out.println("B  4 Size  ::  "+cmn.Lat.size());
         System.out.println("B  4 array  ::  "+cmn.Lat);
         cmn.Lat.add(la);
         cmn.Long.add(ln);
         System.out.println("after size  ::  "+cmn.Lat.size());
         System.out.println("after array  ::  "+cmn.Lat);

         String UpdatedTime=new TimeDate().timeToString();
         cmn.TimeArray.add(UpdatedTime);
         System.out.println("UpdatedTime  ::  "+UpdatedTime);
         System.out.println("cmn.TimeArray  ::  "+cmn.TimeArray.size());
         System.out.println("cmn.TimeArray  ::  "+cmn.TimeArray);

         String UpdatedDate=new TimeDate().dateToString();
         cmn.DateArray.add(UpdatedDate);
         System.out.println("UpdatedDate  ::  "+UpdatedDate);
         System.out.println("cmn.DateArray  ::  "+cmn.DateArray.size());
         System.out.println("cmn.DateArray  ::  "+cmn.DateArray);

         k++;

//          Log.i("hai01", "<long,lat> = <" + mLongitude + "," + mLatitude);
//          System.out.println("LOgGgggggggggggg");
            Message msg = Message.obtain();
            msg.what = 1;
            ServiceClass.this.updateHandler.sendMessage(msg);

            String cityName = null;  
            Geocoder gcd = new Geocoder(ServiceClass.this, Locale.ENGLISH);  

            List<Address> addresses=null;  
            try {  
             addresses = gcd.getFromLocation(mLongitude, mLatitude, 1);  

             if (addresses.size() > 0)  

              System.out.println(addresses.get(0).getLocality());  
             cityName = addresses.get(0).getLocality();  
            } catch (IOException e) {  
             e.printStackTrace();  
            }  

            String s = ln + "\n" + la  
              + "\n\nMy Current City is: " + cityName;  
            Toast.makeText(ServiceClass.this, "City is:"+s, Toast.LENGTH_SHORT).show();

        } catch (NullPointerException e) {
            Log.i("hai02", "Null pointer exception ");
        }
     }

    Handler updateHandler = new Handler() {
        /** Gets called on every message that is received */
        // @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case 1: {
                Log.i("hai03", "Updated location = " + mLatitude + " " + mLongitude);
                break;
            }
            case 0: {
                Log.i("hai000000000000", "Running");
                break;
            }
                }
            super.handleMessage(msg);
        }
     };

     private void initializeLocationAndStartGpsThread() {
            mLocationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
            List<String> providers = mLocationManager.getProviders(true);
            Log.i("hai04", "Enabled providers = " + providers.toString());
            String provider = mLocationManager.getBestProvider(new Criteria(),true);
            Log.i("hai05", "Best provider = " + provider);

            //setCurrentGpsLocation(null);   

         }

     @Override
        public void onDestroy() {
            super.onDestroy();
            check = false;
            i = 0;

           cmn.Lat.clear();
           cmn.Long.clear();
           cmn.FinalDistance.clear();
           ma.finaldist=0.0f;
           cmn.TimeArray.clear();
           cmn.DateArray.clear();

           System.out.println("Clear size  ::  "+cmn.Lat);
           System.out.println("Clear size  ::  "+cmn.Long);
           System.out.println("Clear size  ::  "+cmn.Lat.size());
           System.out.println("Clear size  ::  "+cmn.Long.size());
            Toast.makeText(ServiceClass.this, "Service stopped", Toast.LENGTH_SHORT)
                    .show();
        }

} 
```

Logcat 输出为：

```
04-10 22:55:50.318: E/AndroidRuntime(249): Uncaught handler: thread main exiting due to uncaught exception
04-10 22:55:50.361: E/AndroidRuntime(249): java.lang.RuntimeException: Unable to create service com.example.tracemeendpointsjson.ServiceClass: java.lang.IndexOutOfBoundsException: Invalid location 0, size is 0
04-10 22:55:50.361: E/AndroidRuntime(249):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2790)
04-10 22:55:50.361: E/AndroidRuntime(249):  at android.app.ActivityThread.access$3200(ActivityThread.java:119)
04-10 22:55:50.361: E/AndroidRuntime(249):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1917)
04-10 22:55:50.361: E/AndroidRuntime(249):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 22:55:50.361: E/AndroidRuntime(249):  at android.os.Looper.loop(Looper.java:123)
04-10 22:55:50.361: E/AndroidRuntime(249):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-10 22:55:50.361: E/AndroidRuntime(249):  at java.lang.reflect.Method.invokeNative(Native Method)
04-10 22:55:50.361: E/AndroidRuntime(249):  at java.lang.reflect.Method.invoke(Method.java:521)
04-10 22:55:50.361: E/AndroidRuntime(249):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-10 22:55:50.361: E/AndroidRuntime(249):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-10 22:55:50.361: E/AndroidRuntime(249):  at dalvik.system.NativeStart.main(Native Method)
04-10 22:55:50.361: E/AndroidRuntime(249): Caused by: java.lang.IndexOutOfBoundsException: Invalid location 0, size is 0
04-10 22:55:50.361: E/AndroidRuntime(249):  at java.util.ArrayList.get(ArrayList.java:341)
04-10 22:55:50.361: E/AndroidRuntime(249):  at com.example.tracemeendpointsjson.ServiceClass.setCurrentGpsLocation(ServiceClass.java:143)
04-10 22:55:50.361: E/AndroidRuntime(249):  at com.example.tracemeendpointsjson.ServiceClass.initializeLocationAndStartGpsThread(ServiceClass.java:193)
04-10 22:55:50.361: E/AndroidRuntime(249):  at com.example.tracemeendpointsjson.ServiceClass.onCreate(ServiceClass.java:55)
04-10 22:55:50.361: E/AndroidRuntime(249):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2780) 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:10:06.490

这是你的罪魁祸首：

```
04-10 22:55:50.361: E/AndroidRuntime(249): Caused by: java.lang.IndexOutOfBoundsException: Invalid location 0, size is 0
04-10 22:55:50.361: E/AndroidRuntime(249):  at com.example.tracemeendpointsjson.ServiceClass.setCurrentGpsLocation(ServiceClass.java:143) 
```

在 ServiceClass.java 第 143 行中，您超出了数组的范围，因此导致您的应用程序崩溃的异常。这都是因为你有不将条件块放在括号中的坏习惯，所以你有

```
if (addresses.size() > 0)  
System.out.println(addresses.get(0).getLocality());  
cityName = addresses.get(0).getLocality(); 
```

而你应该

```
if (addresses.size() > 0)  {
    System.out.println(addresses.get(0).getLocality());  
    cityName = addresses.get(0).getLocality();  
} 
```

# php - PHP，将文件添加到.zip的不同目的地？

> ID：15933044
> 
> 赞同：0
> 
> 时间：2013-04-10T17:59:11.810
> 
> 标签：php, zip

好吧，让我解释一下。我的服务器上有两个文件夹，假设它们分别称为 f1/ 和 f2/。这两个文件夹都有几个文件。我想 ZipArchive 两个文件夹。但是，我能做的最好的事情就是让 .zip 包含这两个文件夹。我想要的是获取 f1/ 和 f2/ 中的所有文件和文件夹并将它们存档，从而在 .zip 的根目录中包含 f1/ 和 f2/ 的内容，而不是两个文件夹。

这是我目前正在使用的代码，就像我说的那样，它没有做我想要的：

```
$zipname = 'ZipArc.zip';
$zip = new ZipArchive;
$zip->open($zipname, ZipArchive::CREATE);
foreach ($array as $file => $value)
{
    $zip->addFile("f1/" . $file . ".ini");
}

$iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator("f2/Data/"));
    foreach ($iterator as $key=>$value) {
        $zip->addFile(realpath($key), $key);
    }
}
$zip->close(); 
```

我已经搜索和搜索，但我似乎无法找到正确的关键字来找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:00:54.107

仔细阅读文档：http: [//php.net/manual/en/ziparchive.addfile.php](http://php.net/manual/en/ziparchive.addfile.php)

```
bool ZipArchive::addFile($filename, $localname, ....)
                                    ^^^^^^^^^^ 
```

所以

```
$zip->addFile('/real/path/on/your/server/file.txt', '/path/within/zip/foo.bar'); 
```

# python - 应用于数组列表时，Numpy max 慢

> ID：15933045
> 
> 赞同：4
> 
> 时间：2013-04-10T17:59:11.997
> 
> 标签：python, numpy

我进行了一些计算以获取 numpy 数组的列表。随后，我想找到沿第一个轴的最大值。我目前的实现（见下文）非常缓慢，我想找到替代方案。

**原来的**

```
pending = [<list of items>]
matrix = [compute(item) for item in pending if <some condition on item>]
dominant = np.max(matrix, axis = 0) 
```

**修订版 1：**这个实现更快（~10x；大概是因为 numpy 不需要弄清楚数组的形状）

```
pending = [<list of items>]
matrix = [compute(item) for item in pending if <some condition on item>]
matrix = np.vstack(matrix)
dominant = np.max(matrix, axis = 0) 
```

我进行了几次测试，速度变慢似乎是由于数组列表到 numpy 数组的内部转换

```
 Timer unit: 1e-06 s
 Total time: 1.21389 s
 Line # Hits         Time  Per Hit   % Time  Line Contents
 ==============================================================
 4                                           def direct_max(list_of_arrays):
 5      1000      1213886   1213.9    100.0      np.max(list_of_arrays, axis = 0)

 Total time: 1.20766 s
 Line # Hits         Time  Per Hit   % Time  Line Contents
 ==============================================================
 8                                           def numpy_max(list_of_arrays):
 9      1000      1151281   1151.3     95.3      list_of_arrays = np.array(list_of_arrays)
10      1000        56384     56.4      4.7      np.max(list_of_arrays, axis = 0)

Total time: 0.15437 s
Line # Hits         Time  Per Hit   % Time  Line Contents
==============================================================
12                                           @profile
13                                           def stack_max(list_of_arrays):
14      1000       102205    102.2     66.2      list_of_arrays = np.vstack(list_of_arrays)
15      1000        52165     52.2     33.8      np.max(list_of_arrays, axis = 0) 
```

有什么方法可以加快 max 函数的速度，还是可以用我的计算结果有效地填充一个 numpy 数组，从而使 max 快？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T01:43:18.507

您可以使用`reduce(np.maximum, matrix)`，这是一个测试：

```
import numpy as np
np.random.seed(0)

N, M = 1000, 1000
matrix = [np.random.rand(N) for _ in xrange(M)]

%timeit np.max(matrix, axis = 0)
%timeit np.max(np.vstack(matrix), axis = 0)
%timeit reduce(np.maximum, matrix) 
```

结果是：

```
10 loops, best of 3: 116 ms per loop
10 loops, best of 3: 10.6 ms per loop
100 loops, best of 3: 3.66 ms per loop 
```

**编辑**

`argmax()' 比较困难，但你可以使用 for 循环：

```
def argmax_list(matrix):
    m = matrix[0].copy()
    idx = np.zeros(len(m), dtype=np.int)
    for i, a in enumerate(matrix[1:], 1):
        mask = m < a
        m[mask] = a[mask]
        idx[mask] = i
    return idx 
```

它仍然比`argmax()`：

```
%timeit np.argmax(matrix, axis=0)
%timeit np.argmax(np.vstack(matrix), axis=0)
%timeit argmax_list(matrix) 
```

结果：

```
10 loops, best of 3: 131 ms per loop
10 loops, best of 3: 21 ms per loop
100 loops, best of 3: 13.1 ms per loop 
```

# javascript - Javascript 拼接正在删除除请求的元素之外的所有内容

> ID：15933048
> 
> 赞同：2
> 
> 时间：2013-04-10T17:59:40.680
> 
> 标签：javascript, jquery, arrays

我有一个非常简单的脚本，它从输入框中获取内容，从中创建一个数组，删除所需的元素，然后返回文本。

我正在尝试使用“splice()”来删除该项目，但它会删除除该项目之外的所有内容：

```
var listOfTitles = $('.title-list').val();
var arrayOfTitles = listOfTitles.split(',');
var updatedTitles = arrayOfTitles.splice(2,1);
$('.title-list').val(updatedTitles.join()); 
```

例如，如果我有这个：

测试1，测试2，测试3，测试4

我可以把它变成一个数组。我想删除“test3”并输出“test1,test2,test4”。问题是，它返回“test3”而不是删除它。

jsfiddle发生了什么：http: [//jsfiddle.net/C95kN/](http://jsfiddle.net/C95kN/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:00:54.833

[splice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)更改传递的数组并返回删除的元素。简单地做

```
arrayOfTitles.splice(2,1);
$('.title-list').val(arrayOfTitles.join()); 
```

请注意，我认为`slice`代替`splice`是一个错字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:12:07.293

`Splice()`修改数组并返回一个包含您删除的元素的数组。

你想要的`arrayOfTitles`不是`updatedTitles`

见工作小提琴：http: [//jsfiddle.net/C95kN/1/](http://jsfiddle.net/C95kN/1/)

# c# - Nullable (int?) 不断抛出不可为空的异常

> ID：15933052
> 
> 赞同：3
> 
> 时间：2013-04-10T17:59:51.497
> 
> 标签：c#, asp.net

这是我第一次遇到这种情况-当然这并没有太多意义，但是我需要与集体协商，因为我的搜索表明可以完成，但我无法工作出来。

问题是，如果用户将文本框留空，C# 会在回发和数据库中自动输入零。我只想让文本框留空。

我有一个类，该属性被声明：

```
private int? _PageNumber = null;

public int? PageNumber
{
    get { return _PageNumber; }
    set { _PageNumber = value; }
} 
```

在我的代码文件中，我有：

```
if (tbPageNumber.Text != "")
        ia.PageNumber = Convert.ToInt32(tbPageNumber.Text);
    else
        ia.PageNumber = null; 
```

这就是我得到异常的地方：

```
CS0037: Cannot convert null to 'int' because it is a non-nullable value type 
```

所以我想如果我不能改变类型，也许我可以改变输出。所以我想也许我可以通过将它放在 texbox 的 text 属性中来伪造它：

```
'<%# Eval("PageNumber") == 0 ? null:Eval("PageNumber") %>' 
```

这会引发`CS0019: Operator '==' cannot be applied to operands of type 'object' and 'int'`异常。

怎么这么固执？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:11:01.940

直截了当，没有办法`ia.PageNumber`引用您提供的定义，因为以下代码不仅编译**和运行**，而且写出`Setting to NULL.`：

```
private int? _PageNumber = null;

public int? PageNumber
{
    get { return _PageNumber; }
    set { _PageNumber = value; }
}

if (string.Empty != "")
{
    PageNumber = Convert.ToInt32(string.Empty);
    Console.WriteLine("Setting to value.");
}
else
{
    PageNumber = null;
    Console.WriteLine("Setting to NULL.");
} 
```

底线`ia.PageNumber`是不是`int?` **或**_PageNumber 不是`int?`. 为了进一步具体化我的立场，下面的代码：

```
PageNumber = Convert.ToInt32(" ");
Console.WriteLine("Setting to value {0}.", PageNumber); 
```

抛出预期的异常：

> 输入字符串的格式不正确。

所以问题也不能是填充字符串。最后，为了具体说明我的立场，下面的代码：

```
PageNumber = Convert.ToInt32("");
Console.WriteLine("Setting to value {0}.", PageNumber); 
```

抛出预期的异常：

> 输入字符串的格式不正确。

所以问题也不能是空字符串。`jadarnel27`为了根据您可能正在转换的评论进一步具体化这一立场`null`，实际上正如预期的那样成功，下面的代码：

```
PageNumber = Convert.ToInt32(null);
Console.WriteLine("Setting to value {0}.", PageNumber); 
```

实际上，编译、运行并且不抛出任何执行。`Setting to value 0.`它按预期输出字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T18:08:12.393

我会尝试以下方法：

```
if (!string.IsNullOrEmpty(tbPageNumber.Text))
    ia.PageNumber = Convert.ToInt32(tbPageNumber.Text);
else
    ia.PageNumber = null; 
```

空字符串和空字符串是两个不同的东西，因此具有空值的字符串可能会在您的代码中溜走。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T19:11:29.920

我为此做了一个扩展方法，在值类型的情况下，它对这些与 Web 相关的字符串转换有很大帮助：

```
public static class ExtensionMethods
{
    public static T As<T>(this string input, T fallback = default(T), 
                          IFormatProvider provider = null)
    {
        var type = Nullable.GetUnderlyingType(typeof(T));
        if (type == null)
            type = typeof(T);
        T result;
        try
        {
            result = (T)Convert.ChangeType(input, type, provider);
        }
        catch(Exception)
        {
            result = fallback;
        }
        return result;
    }
} 
```

并像这样使用它：

```
ia.PageNumber = tbPageNumber.Text.As<int>();
ia.PageNumber = tbPageNumber.Text.As<int?>();
ia.PageNumber = tbPageNumber.Text.As<int?>(10); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T19:40:14.230

好吧，伙计们，你们会为此杀了我的。

问题是`ia.PageNumber`在解决方案的单独项目中声明的类由于某种原因它没有编译，因此有关编译器时问题的评论。

这是我使用过的多个项目的第一个此类解决方案，我没有理由考虑编译单个项目（我使用 Visual Studio 2010）。

嗯，吸取了教训。非常感谢所有做出贡献的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T18:12:32.517

**CS0019：运算符“==”不能应用于“object”和“int”类型的操作数**

试试这个 0 到“0”

```
'<%# Eval("PageNumber") == "0" ? 0:Eval("PageNumber") %>' 
```

**无法将 null 转换为“int”，因为它是不可为 null 的值类型**

不要在中使用null。`pagenumber`因为该`pagenumber`属性只获取整数值。但null不是整数。所以你得到了上面的错误。但**现在我从 null 更改为 0**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T18:11:01.273

尝试这个：

```
ia.PageNumber = (int?)null; 
```

编辑：我在考虑一个不同的问题。尽管提供了示例代码，但该错误表明它`ia.PageNumber`是一个`int`，而不是一个。`int?`

# sql - 动态 SQL - 连接 FROM 表

> ID：15933053
> 
> 赞同：1
> 
> 时间：2013-04-10T17:59:53.307
> 
> 标签：sql, tsql, sql-server-2005, dynamic, ssms

长期搜索者第一次海报。

我正在尝试创建一个动态 SQL 脚本，它将动态部分连接成一个字符串以形成 From 子句，因此我只能声明一次表名（将来我将添加到这个，以便我可以遍历一大堆表）。但是，当我运行脚本时出现错误：'+' 附近的语法不正确

```
DECLARE @SCode varchar(4)
DECLARE @Subcode varchar(4)

SET @SCode = 'Client1'
SET @Subcode = 'A'          
SELECT MAX(dateofchange) AS Maxdate, @SCode + 'Type'.ID 
FROM @SCode + 'Type' 
```

任何帮助将不胜感激。我相信答案会很简单，但是我对 SQL 游戏还是比较陌生。

谢谢，SSMS - 2005

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:49:07.020

在 SQl Server 2005 中使用 Alexander Fedorenko 的答案会给出错误“无法将默认值分配给局部变量”。然后对于每个变量“必须声明标量变量“@dml””

这样做的原因是，对于 2005，您必须声明变量并设置为

```
DECLARE @SCode AS VARCHAR(MAX)
SET @scode ='ID12' 
```

我简化了示例 a 但是下面的代码是 SSMS 2005 的工作示例

```
DECLARE @dml  as NVARCHAR(MAX)
DECLARE @SCode AS VARCHAR(MAX)
SET @scode ='ID12'
Set @dml='SELECT ID 
FROM '+ QUOTENAME(+@SCode +'Type')
EXEC sp_executesql @dml 
```

旁注：为什么你不能用代码块评论答案超出了我的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T20:25:01.427

试试这个动态 SQL 脚本（SQLServer2008+ 的选项）

```
DECLARE @SCode varchar(10) = 'Client1',
        @Subcode varchar(10) = 'A',
        @dml nvarchar(400)
SELECT @dml = 'SELECT MAX(dateofchange) AS Maxdate, ID FROM ' + QUOTENAME( + @SCode + 'Type')
EXEC sp_executesql @dml 
```

# php - 在按标签排序的列表中显示已标记的项目

> ID：15933059
> 
> 赞同：2
> 
> 时间：2013-04-10T18:00:13.947
> 
> 标签：php, arrays, codeigniter, tags, relationship

我有具有这种格式标签的任务：

```
Array 
(
   [0] => stdClass Object
      (
         [task_id] => 10,
         [task_text] => Mow and fertilize,
         [tags] => Array
            (
               [0] => stdClass Object
                  (
                     [tag_id] => 1,
                     [tag_text] => House,
                     [tt_tag_id] => 1, //from relational table, tt = task_tag
                     [tt_task_id] => 10,
                     [tt_id] => 20, //auto id from relational table
                     [tt_order] => 0
                  ),
               [1] => stdClass Object
                  (
                     [tag_id] => 2,
                     [tag_text] => Yard,
                     [task_tag_id] => 2, 
                     [task_task_id] => 10,
                     [tt_id] => 21,
                     [tt_order] => 1
                  )
               [2] => stdClass Object
                  (
                     [tag_id] => 5,
                     [tag_text] => Lawn,
                     [task_tag_id] => 5, 
                     [task_task_id] => 10,
                     [tt_id] => 22,
                     [tt_order] => 2
                  )
             )
       )
   [1] => stdClass Object
      (
         [task_id] => 11,
         [task_text] => Unclog the sink drain,
         [tags] => Array
            (
               [0] => stdClass Object
                  (
                     [tag_id] => 1,
                     [tag_text] => House,
                     [task_tag_id] => 1, 
                     [task_task_id] => 11
                     [tt_id] => 30,
                     [tt_order] => 0
                  ),
               [1] => stdClass Object
                  (
                     [tag_id] => 3,
                     [tag_text] => Kitchen,
                     [task_tag_id] => 3, 
                     [task_task_id] => 11,
                     [tt_id] => 31,
                     [tt_order] => 1
                  )
             )
       )
   [2] => stdClass Object
      (
         [task_id] => 12,
         [task_text] => Purchase new microwave,
         [tags] => Array
            (
               [0] => stdClass Object
                  (
                     [tag_id] => 4,
                     [tag_text] => Apartment 1,
                     [task_tag_id] => 4, 
                     [task_task_id] => 12
                     [tt_id] => 40,
                     [tt_order] => 0
                  ),
               [1] => stdClass Object
                  (
                     [tag_id] => 3,
                     [tag_text] => Kitchen,
                     [task_tag_id] => 3, 
                     [task_task_id] => 12,
                     [tt_id] => 41,
                     [tt_order] => 1
                  )
             )
       )
) 
```

我希望能够按这样的标签对任务进行排序：

```
Array 
(
 [0] => stdClass Object
      (
         [tag_id] => 1,
         [task_text] => House,
         [child_tags] => Array
            (
               [0] => stdClass Object
                  (
                     [tag_id] => 2,
                     [tag_text] => Yard,
                     [task_tag_id] => 2, 
                     [task_task_id] => 10,
                     [tt_id] => 21,
                     [child_tags] => Array
                        (
                           [1] => stdClass Object
                              (
                                  [tag_id] => 5,
                                  [tag_text] => Lawn,
                                  [task_tag_id] => 5, 
                                  [task_task_id] => 10,
                                  [tt_id] => 22,
                                  [task_id] => 10,
                                  [task_text] => Mow and fertilize
                              )
                        ),
               [1] => stdClass Object
                 (
                    [tag_id] => 3,
                    [tag_text] => Kitchen,
                    [task_tag_id] => 3, 
                    [task_task_id] => 11,
                    [tt_id] => 31,
                    [task_id] => 11,
                    [task_text] => Unclog the sink drain,
                 )
             )
       )
 [1] => stdClass Object
      (
         [tag_id] => 4,
         [tag_text] => Apartment 1,
         [child_tags] => Array
            (
               [0] => stdClass Object
                  (
                     [tag_id] => 2,
                     [tag_text] => Kitchen,
                     [task_tag_id] => 2, 
                     [task_task_id] => 10,
                     [tt_id] => 21,
                     [task_id] => 12,
                     [task_text] => Purchase new microwave
                  )
            )
       )
) 
```

最终我要拍摄的是：

```
<ul>
   <lh>House</lh>
   <li>
      <ul>
         <lh>Kitchen</lh>
         <li>Unclog the sink drain</li>
      </ul>
   </li>
   <li>
      <ul>
         <lh>Yard</lh>
          <li>
             <ul>
               <lh>Lawn</lh>
               <li>Mow and fertilize</li>
             </ul>
          </li>
      </ul>
   </li>
</ul>
<ul>
   <lh>Apartment 1</lh>
   <li>
      <ul>
         <lh>Kitchen</lh>
         <li>Purchase new microwave</li>
      </ul>
   </li>
</ul> 
```

数据库正是您想象的样子。一个任务表和一个带有 n2n 关系表的标签表。

似乎没有一种简单的方法可以循环遍历任务和标签，从而以这种方式对它们进行排序。我应该尝试不同的方法吗？这很傻吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T09:51:14.350

如果您可以在分层结构中构造数组（即拉出所有标签并将任务分配为每个标签的嵌套数组），类似于最终结构的未排序版本，您可以尝试两个递归循环：

1.  取 1 级项目， sort() 这个
2.  对于每个 1 级项目，将其打印出来并排序 2 级
3.  重复直到下降到最低水平

# c - 共享内存中的指针 - C 语言 Linux

> ID：15933063
> 
> 赞同：0
> 
> 时间：2013-04-10T18:00:18.533
> 
> 标签：c, linux, shared-memory

我有这样的共享记忆

```
struct MEMORY {
char * type;
int number;
} 
```

现在在代码中我让它共享一切可能工作但其他进程看不到指针指向什么我如何在共享内存中使用指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:49:55.953

您需要确保共享内存连接到所有进程地址空间中的*相同*地址。否则，正如您可以想象的那样，指针值最终在不同的进程中意味着不同的东西。

你用什么共享内存？mmap 还是 shm？它是 mmap 调用中的第一个参数。

如果您无法确保所有进程中的地址空间相同，则另一种方法是仅使用我们的偏移量。每个进程只是从附加共享内存的基地址偏移。

编辑：啊......也许你说的是“char * type”是一些任意指针。请记住，其他进程*只能*看到共享内存中的内容。所有其他内存位置（指针值）都无法访问。因此，要使该指针起作用，它必须指向共享内存中的某些内容*，*而不仅仅是任意指针。那，您需要确保共享内存在所有进程中都附加到相同的地址。

# vba - 在不离开页面的情况下运行宏

> ID：15933067
> 
> 赞同：0
> 
> 时间：2013-04-10T18:00:32.263
> 
> 标签：vba, excel, checkbox

我有一个复选框，选中时将运行此宏。该复选框位于 sheet1 中，它将隐藏 sheet2 中的第 11 行。如何编写此代码，这样我就不必在工作表之间来回切换？

```
Sub Hide_HeaterTreater_Rows()

  Sheets("NSR Report").Select
  Range("11:11").Select
If Selection.EntireRow.Hidden = False Then
  Selection.EntireRow.Hidden = True
Else
  Selection.EntireRow.Hidden = False
  End If

Sheets("NSR FORM").Select

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:27:47.753

用复选框切换可见性似乎有点奇怪：我认为使用复选框的值来设置可见性会更好......

```
Sub Hide_HeaterTreater_Rows()
  With Sheets("NSR Report").Rows(11).EntireRow  
    .Hidden = Not .Hidden
  End With
End Sub 
```

编辑：多行

```
Sub Hide_HeaterTreater_Rows()
  With Sheets("NSR Report").Range("11:11,24:24").EntireRow  
    .Hidden = Not .Hidden
  End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:27:57.663

```
Sub Hide_HeaterTreater_Rows()
    Sheets("NSR Report").Rows(11).EntireRow.Hidden = Not Sheets("NSR Report").Rows(11).EntireRow.Hidden
End Sub 
```

但我*想*你可能想使用

```
Sub Hide_HeaterTreater_Rows()
    Sheets("NSR Report").Rows(11).EntireRow.Hidden = Sheets("NSR FORM").Shapes("CheckBox1").Value
End Sub 
```

# asp.net-mvc - MVC——在 Northwind DB 中创建控制器动作 CreateNewEmployee

> ID：15933068
> 
> 赞同：0
> 
> 时间：2013-04-10T18:00:34.970
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我尝试在 MVC 中创建一个新员工。控制器 ：

```
HireEmployeeBL.EmployeeBL employeeBl = new HireEmployeeBL.EmployeeBL();

    public ActionResult HireNew(int id)
{
    return View();
}

[HttpPost]
public ActionResult HireNew(int id, Employee employee)
{
    employee.ReportsTo = new Manager { EmployeeID = id };
    employeeBl.AddEmployee(employee);
    return RedirectToAction("Subordinates");
    //return View();
} 
```

服务器错误：

> 参数字典包含“MvcEmployee.Controllers.EmployeeController”中方法“System.Web.Mvc.ActionResult HireNew(Int32)”的不可空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:24:20.690

```
 [HttpPost]
        public ActionResult Create(Employee employee)
        {
            try
            {
                NorthwindEntities northwindEntities = new NorthwindEntities();
                northwindEntities.Employees.Add(employee);
                northwindEntities.SaveChanges(); 

                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        } 
```

# javascript - 回溯 API：_ItemHierarchy 范围界定 - 忽略禁止的项目

> ID：15933071
> 
> 赞同：1
> 
> 时间：2013-04-10T18:00:42.520
> 
> 标签：javascript, api, rally, lookbackapi

我一直在尝试通过使用 Lookback API 和 _ItemHierarchy 过滤器来查询从 RPM 下降的用户故事。问题似乎是 Lookback API 希望从它知道的所有项目中返回数据，但显然这包括我无权访问的项目。尝试运行查询时出现以下错误：

```
"Errors":["Server Error: Your request requires access to a workspace or project for which you do not have permission.  Contact your subscription administrator to request permission."] 
```

如果有一种方法可以忽略我无权访问的所有项目，并且只返回我的权限允许我查看的用户故事，我会很高兴。（并且可能提醒我并非所有内容都可以访问）

至少，我想要一种方法来捕获 API 在遇到错误时抛出的 TypeError。我尝试使用 try/catch 块，但这在这种情况下似乎无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:11:39.790

这是 LookbackAPI 的一个已知问题。当人们尝试围绕权限使用 API 时，会出现这个问题的几种变体。

我将在下面详细介绍它们：

* * *

## 结果包含您无权访问的工件

访问 Lookback API 时，您需要手动指定要访问的项目。如果您不将请求限制为对项目数组的请求，则您有权访问 API 的项目列表将尝试返回每个项目的数据。您可以像这样限制查询中的项目：

```
{
  'Project': {'$in':[1,2]}
} 
```

## 结果包含曾经在您现在无权访问的项目中的工件

当故事在项目中移动时，会发生相同权限问题的第二个也是更狡猾的版本。如果在之前的某个时间点，您查询的其中一个故事在您当前没有权限的项目中，您的回复将收到错误消息。

这可能会导致一些混乱的情况。例如，您可能会在已关闭项目中的故事中遇到这种情况。如果您在关闭该项目之前无权访问它，那么您似乎可以访问每个项目，但您的查询仍然存在问题。

我们正在研究如何简化 Lookback Api 在权限方面的使用。

我们正在学习的一件事是，回顾过去会增加企业软件传统模型的复杂性。我们在项目中遇到的奇怪边缘案例的数量是敏捷的完美案例研究，并且包含了任何预先计划都无法预料的事情。

# node.js - 在 Heroku 上运行预部署 Grunt 任务

> ID：15933072
> 
> 赞同：1
> 
> 时间：2013-04-10T18:00:46.880
> 
> 标签：node.js, heroku, gruntjs

我正在摆弄 heroku 来部署我的基于 nodejs 的应用程序。问题是我想运行一些包含 grunt 任务的预部署脚本。这些任务基本上是缩小 css 和 js 文件并执行更多操作，例如更新文件中的应用程序版本等。

我现在能想到的唯一方法是提交 git repo 本身中的缩小文件并进行部署。这不是一个好主意（至少对我来说），因为它不必要地维护了缩小文件的修订历史，这完全是浪费。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T16:03:04.080

我见过有人建议为部署创建一个一次性的 git 分支。在上述第二条评论中：[如何将使用 grunt 的节点应用程序部署到 heroku](https://stackoverflow.com/questions/13784600/how-to-deploy-node-app-that-uses-grunt-to-heroku)。

就我个人而言，我更喜欢执行打包我的应用程序并将其复制到我的源代码树/存储库之外的目录的 grunt 任务。通常，目标目录包含一个一次性的 git 存储库，我添加它只是为了能够推送到 heroku。

我的工作流程是进行我需要的任何文件处理，然后将结果复制到输出目录，跳过不必要的文件，并添加特定于环境的配置和工件。一系列繁重的任务执行此操作，最后一个将所有内容添加到本地 reopo，设置 heroku 远程（我在 heroku 上有几个应用程序来涵盖生产、登台和通常用于查看旧版本事物的沙箱），以及终于做推了。

# jquery - jquery从表单元素数组中删除类

> ID：15933074
> 
> 赞同：0
> 
> 时间：2013-04-10T18:00:50.693
> 
> 标签：jquery, html, forms, drop-down-menu

我有一个包含许多元素的表单，其中有几个此类下拉菜单：

```
<select name="i_task_user[]" class="required"><option value="">- Select -</option></select> 
```

在表单加载时，我想删除所有这些下拉菜单上的**“必需”**类，但到目前为止我尝试的方法没有奏效。

我所做的是：（没用）

```
$(document).ready(function(){
     $('select[name="assign_task_status[]"]').removeClass('required');
}); 
```

和：（也没有用）

```
$(document).ready(function(){
   $.each($('form[name="frm"] select[name="assign_task_status[]"]').children(), function(i, elt){
       $(this).removeClass('required');
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:05:45.733

`**[LIVE DEMO](http://jsbin.com/egohax/1/edit)**`

```
$(document).ready(function(){
     $('select[name^=i_task_user]').removeClass('required');
}); 
```

`^=`表示：*“开始于”*选择器

或`$('select[name="i_task_user[]"]')` [如 Juhana 所述使用]

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T18:14:38.367

还有另一种选择：

```
$(function() {
    $("select[class=required]").removeClass("required");
}); 
```

# android - Android webview无法连接到本地ip地址

> ID：15933075
> 
> 赞同：4
> 
> 时间：2013-04-10T18:00:50.857
> 
> 标签：android, mobile, webview

我在一个简单的 android 应用程序中有一个 webView 类。我试图让 webView 加载托管在我本地网络上的服务器上的网页，但它无法连接。

```
WebView webview = new WebView(this);
setContentView(webview);
webview.loadUrl("192.168.1.104"); 
```

webView 说“网页不可用”

我可以在普通浏览器和任何移动浏览器中连接到 192.168.1.104。当我用它替换`192.168.1.104`它`http://example.com`时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-07T12:02:33.173

您是否将 Internet 权限添加到 AndroidManifest.xml？

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-05T07:04:04.500

只需在下面添加这些代码，它将在 lan 中显示您的页面：

```
 public void onCreate(Bundle savedInstanceState) {
        Log.i(TAG, "Entering onCreate");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        mWebView = (WebView)findViewById(R.id.webview);
        mWebView.clearCache(true);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl("http://10.0.2.2:8080/SampleWebServer/Welcome.html");
        Log.i(TAG,"Exiting onCreate");
} 
```

**mWebView.getSettings().setJavaScriptEnabled(true);**

而已！

# html - 如何删除 Facebook 开发者应用程序本身？

> ID：15933076
> 
> 赞同：2
> 
> 时间：2013-04-10T18:00:51.333
> 
> 标签：html, facebook

我想从我的 Facebook 帐户中删除开发者应用程序并返回到一个简单的个人资料。我认为它目前类似于开发人员资料。当我点击页面右上角的设置按钮时，有“创建和应用程序”和“管理应用程序”链接，这些链接不适用于简单的普通帐户。

我也无法重新排列我的群组并将其添加到我认为是因为开发者应用程序的收藏夹。

有谁知道如何删除开发者应用程序？

我搜索了很多，developer.facebook.com 上的任何地方都没有删除应用程序选项！！！请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:27:50.887

去

> [https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)

选择要删除的应用程序，然后`edit app`单击

单击`delete app`（左窗格上的最后一个选项）

你完成了。

# ios - 具有多个关系的核心数据 NSPredicate

> ID：15933080
> 
> 赞同：2
> 
> 时间：2013-04-10T18:00:59.030
> 
> 标签：ios, objective-c, core-data

我需要发出一个 fetch 请求，但我无法确定该请求所需的 NSPredicate。这是场景：

我有一个`List`实体，并且该`list`对象与一组对象具有一对多的关系`Request`。每个`Request`对象与一组对象具有一对多的关系`Tags`。

我需要对实体执行获取请求`Tags`，但我无法确定`NSPredicate`调用的方法。我只想提取`tags`特定列表的所有请求的所有标签中的那些。

这是我尝试过的：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"tag in ANY list.requests.tags"]; 
```

但我知道这是不对的。我无法指定我的列表，也`list.requests`返回一个`NSSet`，而且我不能只`.tags`在一组上做。我很困。

我附上了一张关系图片，以防万一：

![在此处输入图像描述](https://i.stack.imgur.com/EoEUd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:16:58.923

创建子查询。

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"SUBQUERY(requests, $request, $request.list = %@).@count > 0", list]; 
```

这会计算具有指定列表的请求；如果计数大于一，则使用标签。

你也可以这样做：

```
[list.requests valueForKeyPath:@"tags.@distinctUnionOfSets"] 
```

这使用键值编码来检索属于所有请求的所有标签并将它们统一到一个集合中。这种方法比前者效率低。

# python - Python 类方法总是被执行两次

> ID：15933083
> 
> 赞同：6
> 
> 时间：2013-04-10T18:01:09.330
> 
> 标签：python, class, methods, tkinter

我是 Python 新手，遇到了一个问题，即类中的方法`Gui`总是执行两次。

这是继承自的 gui 类`Tkinter`：

```
from Tkinter import *

class Gui (Tk):
    def createKdWindow(self):
        print("createKdWindow has been triggered")

    def activate(self):
        print ("activate has been triggered")
        self.tk.mainloop() 
```

这里是调用方法的地方（**init** .py）：

```
from pm_test.gui import Gui

datgui = Gui()
datgui.createKdWindow()
datgui.activate() 
```

当我运行我的程序时，我得到以下控制台输出：

```
createKdWindow has been triggered
activate has been triggered
createKdWindow has been triggered
activate has been triggered 
```

所以我的方法被执行了两次。我不知道这是从哪里来的。有谁知道如何解决这个问题？

**已修复：将****init** .py 中的代码放入新模块可修复此问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:54:29.010

已修复：将 init.py 中的代码放入新模块可修复此问题！

# java - 如何检测浏览器是否会因需要更新而阻止 java applet

> ID：15933084
> 
> 赞同：2
> 
> 时间：2013-04-10T18:01:11.430
> 
> 标签：java, javascript, applet

一般来说，如果浏览器（我看到这个尤其是 Safari）足够友好地阻止 Java 小程序运行，如果它感知到 Java 的安全相关更新存在。它似乎悄悄地这样做......我的小程序只是在浏览器窗口中“坐下来旋转” - 从不执行。有没有办法，最好是通过 JavaScript，以编程方式确定是否存在这种情况（例如，可以跳过小程序加载并显示某种信息性消息）？

在我的特殊情况下，我的小程序在使用 Java 1.6.0_37（在 Mac OSX 10.6、Safari 5.1.7 上）启动时什么也没做。一旦我更新到 Java 1.6.0_43，applet 就可以顺利运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:36:07.463

最好的方法通常是使用 Javascript 轮询小程序是否存在，并在特定时间后采取替代操作。

请注意，[部署工具包脚本](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit)旨在确保有效的 Java 版本并运行小程序，同时向用户提供反馈，因此这将是部署小程序的更好的整体方法。

# python - Python日志分析工具/库

> ID：15933088
> 
> 赞同：3
> 
> 时间：2013-04-10T18:01:30.150
> 
> 标签：python, mysql, apache, logging, elasticsearch

我正在寻找一个用python编写的工具/库，类似于logstash（ruby + java）。

我的目标是：

*   从 syslog 解析所有系统日志
*   解析应用程序特定的日志（apache、django、mysql 等）
*   将结果存储在 elasticsearch 之类的东西中
*   基于不同标准的图表结果

谢谢！

ps：正则表达式是一种方法，但我觉得从头开始会很辛苦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T22:59:51.707

无耻的插件（我是该库的作者）- logtools 可以完成您提到的所有事情以及更多。我尝试使文档保持最新，并在 README 文件中显示许多示例，类似于您描述的用例。希望它符合您的想法，试一试，欢迎任何反馈 - 我尝试添加/修复用户提出的任何问题。在[http://github.com/adamhadani/logtools 查看或在](http://github.com/adamhadani/logtools)[https://pypi.python.org/pypi/logtools](https://pypi.python.org/pypi/logtools)下载最新的稳定版本

# php - 从 PHP 网页下载图像到文件夹

> ID：15933089
> 
> 赞同：1
> 
> 时间：2013-04-10T18:01:31.697
> 
> 标签：php, javascript, html

我创建了一个简单的 php 网页，它在表中显示来自 mysql 数据库的数据。用户可以上传特定行的图像，这些图像存储在服务器上的上传文件夹中。我希望能够添加单击特定行按钮的功能，并且该行的图像将下载到用户计算机上以该行的部件号命名的文件夹中。下面是上传图片对话框代码：

```
//function to open a dialog where the user can upload an image to an existing row
$(function() 
  {

//$uniqueID = $('#uniqueID').val();

//opens the dialog form using the 'imgupdialog' fields outlined below 
    $( "#imgupdialog" ).dialog
({
autoOpen: false,
modal: true,
buttons: 
    {
Cancel: function() 
    {
$( this ).dialog( "close" );
    }
},

});

//when the 'imgup' button is clicked the ID of the row will be obtained and the dialog will open
$(document).on('click', '.imgup', function()
    { 
//$( ".imgup" ).click(function() {
$('#uniqueID').val(($(this).attr('id')));
$("#imgupdialog").dialog( "open" );
    });

}); 
```

这是上传图像的代码：

```
$con = mysql_connect("", "");

if (!$con) {
die("Error: " . mysql_error());
}

mysql_select_db("web", $con);

if(isset($_FILES['files']))
  {
$UniqueID = $_POST['var1'];
$desired_dir="uploads/";
$errors= array();

foreach($_FILES['files']['tmp_name'] as $key => $tmp_name )
{
$file_name = $_FILES['files']['name'][$key];
$file_size =$_FILES['files']['size'][$key];
$file_tmp =$_FILES['files']['tmp_name'][$key];
$file_type=$_FILES['files']['type'][$key];  

if($file_size > 2097152)
    {
$errors[]='File size must be less than 2 MB';
    }

$query="INSERT INTO web.PE_upload_data (ID, FILE_NAME, FILE_SIZE, FILE_TYPE) VALUES ('$UniqueID', '$file_name','$file_size','$file_type')";

if(empty($errors)==true){
  if(is_dir($desired_dir)==false)
  {
mkdir("$desired_dir", 0700);    // Create directory if it does not exist
        }
        if(is_dir("$desired_dir/".$file_name)==false)
        {
            move_uploaded_file($file_tmp,"$desired_dir/".$file_name);
        }else
        {  // rename the file if another one exists
            $new_dir="$desired_dir/".$file_name.time();
             rename($file_tmp,$new_dir) ;               
        }
     mysql_query($query);           
    }
    else
    {
            print_r($errors);
    }
}
if(empty($error))
{
    echo "Success";
}
      } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:00:51.833

正如许多人所指出的，浏览器不允许您访问本地计算机。如果您使用 Flash、Java 或我最喜欢的 - Silverlight 保存到独立存储文件夹，则有各种解决方法。下面是一组使用隔离存储的示例代码：http: [//msdn.microsoft.com/en-us/library/cc265154 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc265154(v=vs.95).aspx)

# visual-studio-2010 - 如何使用 Emacs 模拟器在 Visual Studio 2010 中剪切/粘贴

> ID：15933090
> 
> 赞同：2
> 
> 时间：2013-04-10T18:01:32.347
> 
> 标签：visual-studio-2010

我下载了适用于 Visual Studio 2010 的 emacs 模拟器，一切似乎都运行良好且花花公子——除了剪切和粘贴！

我可以通过设置标记（CTRL-Space）来删除区域，然后使用 CTRL-W 将其删除。但它似乎永远不会进入杀戮环——如果我尝试 CTRL-Y 来拉它，那么什么也不会发生。

奇怪的是，如果我用 CTRL-K 删除一行，那么删除的行会进入 kill ring。

Visual Studio 的键绑定菜单建议应该剪切 CTRL-W 并粘贴 CTRL-Y，所以这似乎是模拟器的问题。

有没有人遇到过类似的问题，或者知道如何使用 emacs 仿真剪切/粘贴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T21:01:16.703

这是一个已知的错误，微软拒绝修复它。请参阅：[http ://connect.microsoft.com/VisualStudio/feedback/details/672582/emacs-mode-cut-copy-paste-errors](http://connect.microsoft.com/VisualStudio/feedback/details/672582/emacs-mode-cut-copy-paste-errors)

这是我提交的错误。有一次，我让 Ctrl-w/Ctrl-y 在 Visual Studio 内部工作，但从来没有在外部工作。我正在摆弄导出/导入设置，它开始工作了。现在我不得不重置 Visual Studio 并且它不再工作了，再多的摆弄也不会让它回到我原来的位置。叹。

因此，每当我必须进行一些严肃的剪切/粘贴工作时，尤其是在代码和其他窗口之间，我只需将文件保存在 VS 中并打开 Emacs，在 Emacs 中进行编辑，然后将文件保存在 Emacs 中。当我回到 VS 时，它会询问我是否要重新加载文件。在我回到 VS 中工作时单击“是”，准备编译或其他什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T17:51:46.887

我发现将其他应用程序中的文本选择拖放到安装了 emacs 包的 VS2010 中，确实可以工作。你的旅费可能会改变。

# asp.net-mvc - 如何将 BindAttribute.Prefix 应用于 Int32 类型的操作方法参数？

> ID：15933094
> 
> 赞同：3
> 
> 时间：2013-04-10T18:01:52.083
> 
> 标签：asp.net-mvc, asp.net-mvc-4

当我申请`BindAttribute.Prefix`一个动作参数`value`时，我希望`DefaultModelBinder`要么使用*自定义前缀*，要么回退到一个`empty prefix`（在任何一种情况下`value`参数都将被分配数字`100`）。但相反，它什么都不做，因此下面的代码会引发异常：

*参数字典包含方法“System.Web.Mvc.ActionResult Index(Int32)”的不可为空类型“System.Int32”的参数“值”的空条目*

```
[HttpPost]
public ActionResult Index([Bind(Prefix = "originalPrefix")]int value)
{
    return View();
}

public ActionResult Index()
{
    return View();
} 
```

索引.cshtml：

```
 using (Html.BeginForm())
 {      
       <input id="originalPrefix.value" name="originalPrefix.value" type="text" value="100" />
       <input id="value" name="value" type="text" value="100" />

       <input type="submit" value="submit" />
 } 
```

a) 为什么不能将*表单数据*`DefaultModelBinder`绑定到参数？*`value`*

 *b) 如果可能，我们如何应用`BindAttribute.Prefix`到 Int32 类型的动作方法参数？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:05:38.740

该属性的值不应`name`为。您正在尝试绑定参数而不是参数的 value 属性。`"originalPrefix"``"originalPrefix.value"`*

# asp.net - 当传递的列表大小很大时，WCF 抛出异常

> ID：15933095
> 
> 赞同：0
> 
> 时间：2013-04-10T18:01:57.040
> 
> 标签：asp.net, wcf, web-services

我在我的应用程序中使用 WCF。从应用程序我通过 WCF 传递一个列表以在后端处理。如果列表中的行数很大，则服务会抛出异常“远程服务器返回意外响应：(400) 错误请求。”

下面是我的 UI 网络配置

```
<system.serviceModel>

<bindings>

  <basicHttpBinding>

    <binding name="BasicHttpBinding_IService1" closeTimeout="10:20:00"
      openTimeout="10:20:00" receiveTimeout="10:20:00" sendTimeout="10:20:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">

      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">

        <transport clientCredentialType="Windows" proxyCredentialType="Windows"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />

      </security>

    </binding>
    <binding name="BasicHttpBinding_IErrorService" closeTimeout="10:20:00"
      openTimeout="10:20:00" receiveTimeout="10:20:00" sendTimeout="10:20:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">

      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />

      <security mode="None">

        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />

      </security>

    </binding>
    <binding name="BasicHttpBinding_IService11" closeTimeout="10:20:00"
      openTimeout="10:20:00" receiveTimeout="10:20:00" sendTimeout="10:20:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">

      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />

      <security mode="None">

        <transport clientCredentialType="Windows" proxyCredentialType="Windows"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />

      </security>

    </binding>
    <binding name="BasicHttpBinding_ISecurityUserService" closeTimeout="10:20:00"
      openTimeout="10:20:00" receiveTimeout="10:20:00" sendTimeout="10:20:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">

      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />

      <security mode="None">

        <transport clientCredentialType="Windows" proxyCredentialType="Windows"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />

      </security>

    </binding>

  </basicHttpBinding>
</bindings>

<client>

  <endpoint address="http://localhost:6789/Service1.svc" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
    name="BasicHttpBinding_IService1" />
  <endpoint address="http://localhost:6789/ErrorService.svc" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IErrorService" contract="ErrorServiceReference.IErrorService"
    name="BasicHttpBinding_IErrorService" />
  <endpoint address="http://localhost:6789/SecurityUserService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ISecurityUserService"
    contract="SecurityUserServiceReference.ISecurityUserService"
    name="BasicHttpBinding_ISecurityUserService" />
  <endpoint address="http://localhost:6789/Service1.svc" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IService11" contract="ServiceReference.IService1"
    name="BasicHttpBinding_IService11" />

</client>

</system.serviceModel> 
```

还将以下标记添加到 WCF Web 配置以及 UI Web 配置

```
<system.web>

      <httpRuntime maxRequestLength="512000" />

  </system.web> 
```

我的服务配置如下

```
 <httpRuntime maxRequestLength="512000" /> 
```

服务模式：

```
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>      
</services>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

```
<modules runAllManagedModulesForAllRequests="true"/> 
```

我修改了**服务 Web 配置** 。我仍然遇到同样的问题。请帮助我

```
<services>

  <service name="BasicHttpBinding_IService1" behaviorConfiguration="Behavior">
    <endpoint address=""
              binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_IService1"
              contract="ServiceReference1.IService1"/>        
  </service>
  <service name="BasicHttpBinding_IErrorService" behaviorConfiguration="Behavior">
    <endpoint address=""
              binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_IErrorService"
              contract="ErrorServiceReference.IErrorService"/>

  </service>
  <service name="BasicHttpBinding_ISecurityUserService" behaviorConfiguration="Behavior">
    <endpoint address=""
              binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_ISecurityUserService"
              contract="SecurityUserServiceReference.ISecurityUserService"/>

  </service>

</services>

and bindings

<bindings>

 <basicHttpBinding>
  <binding name="BasicHttpBinding_IService1" closeTimeout="10:20:00"
    openTimeout="10:20:00" receiveTimeout="10:20:00" sendTimeout="10:20:00"
    allowCookies="false" bypassProxyOnLocal="false"      hostNameComparisonMode="StrongWildcard"
    maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
    useDefaultWebProxy="true">
    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
      maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    <security mode="None">
      <transport clientCredentialType="Windows" proxyCredentialType="Windows"
        realm="" />
      <message clientCredentialType="UserName" algorithmSuite="Default" />
    </security>
  </binding>
    <binding name="BasicHttpBinding_IErrorService" closeTimeout="10:20:00"
      openTimeout="10:20:00" receiveTimeout="10:20:00" sendTimeout="10:20:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
    <binding name="BasicHttpBinding_ISecurityUserService" closeTimeout="10:20:00"
      openTimeout="10:20:00" receiveTimeout="10:20:00" sendTimeout="10:20:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="Windows" proxyCredentialType="Windows"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>

</bindings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:30:15.770

您的服务配置中似乎没有定义任何端点或绑定，这意味着您正在获取默认端点和绑定。由于您的服务使用默认绑定及其默认值，因此它无法接收大消息。

您可以通过省略`name`绑定元素中的属性来覆盖默认绑定设置。但是，在您的情况下，您在三个定义的绑定中有不同的设置（至少在安全部分）。因此，您需要定义绑定并将它们分配给端点。

尝试这样的事情：

```
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService1" .....>
  </basicHttpBinding>
</bindings> 
```

我省略了大部分绑定声明——你可以简单地从你的客户端配置中复制它们。

`bindingConfig`然后在服务中使用端点元素上的属性分配特定的绑定配置，如下所示：

```
<services>
  <service .... >
    <endpoint address="http://localhost:6789/Service1.svc"  
              binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_IService1" 
              contract="ServiceReference1.IService1" 
              name="BasicHttpBinding_IService1" />
  </service>
</services> 
```

同样，为简单起见，我省略了大部分配置代码。

这里的关键点是服务需要有一个绑定，该绑定被配置为接受比默认值更大的消息。增加`maxRequestLength`运行时的值不会直接影响 WCF 服务（当然，除非您的请求大于 HTTP 运行时值）。

您可以在此处阅读有关默认端点和绑定的更多信息 - [A Developer's Introduction to Windows Communication Foundation 4](http://msdn.microsoft.com/en-us/library/ee354381.aspx)

# c - 如何在 SSE/AVX 中使用融合乘加 (FMA) 指令

> ID：15933100
> 
> 赞同：46
> 
> 时间：2013-04-10T18:02:04.987
> 
> 标签：c, sse, cpu-architecture, avx, fma

我了解到，一些 Intel/AMD CPU 可以同时使用 SSE/AVX 进行乘法和加法：
[sandy-bridge 和 haswell SSE2/AVX/AVX2 的每个周期的 FLOPS](https://stackoverflow.com/questions/15655835/flops-per-cycle-for-sandy-bridge-and-haswell-sse2-avx-avx2)。

我想知道如何在代码中做到最好，我也想知道它是如何在 CPU 内部完成的。我的意思是超标量架构。假设我想在 SSE 中做一个很长的总和，如下所示：

```
//sum = a1*b1 + a2*b2 + a3*b3 +... where a is a scalar and b is a SIMD vector (e.g. from matrix multiplication)
sum = _mm_set1_ps(0.0f);
a1  = _mm_set1_ps(a[0]); 
b1  = _mm_load_ps(&b[0]);
sum = _mm_add_ps(sum, _mm_mul_ps(a1, b1));

a2  = _mm_set1_ps(a[1]); 
b2  = _mm_load_ps(&b[4]);
sum = _mm_add_ps(sum, _mm_mul_ps(a2, b2));

a3  = _mm_set1_ps(a[2]); 
b3  = _mm_load_ps(&b[8]);
sum = _mm_add_ps(sum, _mm_mul_ps(a3, b3));
... 
```

我的问题是如何将其转换为同时乘法和加法？数据可以依赖吗？我的意思是 CPU 可以`_mm_add_ps(sum, _mm_mul_ps(a1, b1))`同时执行还是乘法和加法中使用的寄存器必须是独立的？

最后，这如何适用于 FMA（与 Haswell）？是`_mm_add_ps(sum, _mm_mul_ps(a1, b1))`自动转换成单条FMA指令还是微操作？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-10T18:33:00.633

允许编译器融合分离的加法和乘法，即使这会改变最终结果（通过使其更准确）。

FMA 只有一个舍入（它有效地为内部临时乘法结果保持无限精度），而 ADD + MUL 有两个。

IEEE 和 C 标准`#pragma STDC FP_CONTRACT ON`在生效时允许这样做，并且[默认情况下](https://stackoverflow.com/questions/34436233/fused-multiply-add-and-default-rounding-modes/34817983#34817983)[允许编译器拥有它`ON`](https://stackoverflow.com/questions/34436233/fused-multiply-add-and-default-rounding-modes/34817983#34817983)（但并非所有人都这样做）。默认情况下， Gcc 与 FMA 签订合同（默认为`-std=gnu*`，但不是`-std=c*`，例如`-std=c++14`）。 [对于 Clang](http://lists.llvm.org/pipermail/cfe-dev/2015-September/045110.html)，它只能通过`-ffp-contract=fast`. （仅`#pragma`启用，仅在单个表达式中，如`a+b*c`，而不是跨单独的 C++ 语句。）。

这与严格浮点与宽松浮点（或在 gcc 术语中，`-ffast-math`vs `-fno-fast-math`）不同，后者将允许其他类型的优化[，这些优化可能会根据输入值增加舍入误差](https://stackoverflow.com/questions/6430448/why-doesnt-gcc-optimize-aaaaaa-to-aaaaaa/6442503#6442503)。这个是特殊的，因为 FMA 内部临时的无限精度；如果内部临时有任何舍入，这在严格的 FP 中是不允许的。

即使您启用了宽松的浮点，编译器仍可能选择不融合，因为如果您已经在使用内在函数，它可能希望您知道自己在做什么。

* * *

因此，确保您真正获得所需的 FMA 指令**的最佳方法是实际使用为它们提供的内在函数：**

[FMA3 内在函数：](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/cpp-mac/GUID-F2F72E9F-C27C-44C4-BAD8-26B6209B6D2F.htm)（AVX2 - 英特尔 Haswell）

*   `_mm_fmadd_pd()`, _`mm256_fmadd_pd()`
*   `_mm_fmadd_ps()`,`_mm256_fmadd_ps()`
*   以及无数其他变体……

[FMA4 内在函数：](http://msdn.microsoft.com/en-us/library/vstudio/gg445134%28v=vs.100%29.aspx)（XOP - AMD 推土机）

*   `_mm_macc_pd()`,`_mm256_macc_pd()`
*   `_mm_macc_ps()`,`_mm256_macc_ps()`
*   以及无数其他变体……

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-12-25T09:40:31.403

我在 GCC 5.3、Clang 3.7、ICC 13.0.1 和 MSVC 2015（编译器版本 19.00）中测试了以下代码。

```
float mul_add(float a, float b, float c) {
    return a*b + c;
}

__m256 mul_addv(__m256 a, __m256 b, __m256 c) {
    return _mm256_add_ps(_mm256_mul_ps(a, b), c);
} 
```

使用正确的编译器选项（见下文），每个编译器`vfmadd`都会`vfmadd213ss`从`mul_add`. 但是，只有 MSVC 无法收缩`mul_addv`到单个`vfmadd`指令（例如`vfmadd213ps`）。

以下编译器选项足以生成`vfmadd`指令（`mul_addv`MSVC 除外）。

```
GCC:   -O2 -mavx2 -mfma
Clang: -O1 -mavx2 -mfma -ffp-contract=fast
ICC:   -O1 -march=core-avx2
MSVC:  /O1 /arch:AVX2 /fp:fast 
```

GCC 4.9 不会收缩`mul_addv`到单个 fma 指令，但至少 GCC 5.1 会收缩。我不知道其他编译器何时开始这样做。

# c++ - 'glGenBuffers' 未在此范围内声明。视窗 7\. Qt 4.8.1

> ID：15933102
> 
> 赞同：2
> 
> 时间：2013-04-10T18:02:18.120
> 
> 标签：c++, qt, opengl, glew

```
'glGenBuffers' was not declared in this scope 
```

这就是我尝试使用该方法后得到的错误。如何添加适当的库或其他东西以及我应该添加什么以及如何添加。我正在使用 win 7 和 qt 4.8.1。我读过 GLEW 但我不知道如何将它添加到 windows 或 qt。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:10:18.093

这是一个常见问题解答。Windows 仅定义了 OpenGL-1.1 版本的 OpenGL ABI（B 表示二进制接口）——除此之外的任何内容都必须在运行时使用扩展加载机制加载。最容易通过使用像[GLEW](http://glew.sourceforge.net)这样的包装库来完成。

> 我读过 GLEW 但我不知道如何将它添加到 windows 或 qt。

如果你想使用任何 3rd 方库，你必须学习如何做到这一点。它归结为将库及其头文件安装在某个系统范围的目录中，但在常规编译器树之外，并将这些目录添加到包含和库搜索路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:21:36.287

我使用此代码包含 GLEW 和 Glut 以进行跨平台开发：

```
#ifndef GL_H
#define GL_H

#ifdef __APPLE__
#include <GL/glew.h>
#include <GLUT/glut.h>
#else
#include <GL/glew.h>
#include <GL/glut.h>
#endif

#endif // GL_H 
```

我将它封装到一个名为 gl.h 的文件中，并将它包含在我需要 OpenGL 上下文的任何地方。您将需要研究如何在您的系统上安装 GLEW。确保为编译器安装了正确的 GLEW 版本。如果您使用 Visual C++ 2010 或 MinGW，则在放置库和包含文件的位置方面会略有不同。您也可以始终从源代码构建，但这是更高级的路线。

如果您想要一些关于如何开始使用 Qt 和 OpenGL 的示例代码，我在 Bitbucket 上有一个存储库，其中包含我为 OpenGL 编程类编写的一些代码：[https ://bitbucket.org/pcmantinker/csc- 4356/src/2843c59fa06d0f99d1ba90bf8e328cbb10b1cfb2?at=master](https://bitbucket.org/pcmantinker/csc-4356/src/2843c59fa06d0f99d1ba90bf8e328cbb10b1cfb2?at=master)

# list - Prolog - 对两个列表中的数字求和

> ID：15933103
> 
> 赞同：1
> 
> 时间：2013-04-10T18:02:22.603
> 
> 标签：list, lambda, prolog, add

我正在尝试编写序言程序，将两个列表中的项目相加并将结果呈现在另一个列表中。

例如：

清单 1：

```
[1, 3, 4, 2] 
```

清单 2：

```
[5, 1, 3, 0] 
```

结果：

```
[6, 4, 7, 2] 
```

到目前为止，我有这个：

```
list_sum([],[],[]).
list_sum([H1|T1],[H2|T2],L3):-list_sum(T1,T2,[X|L3]), X is H1+H2.

?-list_sum([1,2,3,4],[1,2,3,4],R),write(R). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T20:57:11.933

如果您使用 SWI-Prolog，您可以使用 maplist，并在那里找到模块 lambda： http: [//www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)：

```
:- use_module(library(lambda)).

list_sum(L1, L2, L3) :-
    maplist(\X^Y^Z^(Z is X + Y), L1, L2, L3). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:33:38.527

@gusbro 说了什么。此外，您需要重新排列操作顺序并添加一些额外的特殊情况来处理不同长度的列表：

```
list_sum( []     , []     , []     ) .
list_sum( []     , [Y|Ys] , [Z|Zs] ) :- Z is 0+Y , list_sum( [] , Ys , Zs ) .
list_sum( [X|Xs] , []     , [Z|Zs] ) :- Z is X+0 , list_sum( Xs , [] , Zs ) .
list_sum( [X|Xs] , [Y|Ys] , [Z|Zs] ) :- Z is X+Y , list_sum( Xs , Ys , Zs ) . 
```

您需要`Z is X+Y`在上面的示例中移动评估 ( )，以便在递归**之前**`Z`对其进行评估。这完成了两件事：

 ***   首先，它使谓词*tail-recursive*，这意味着解决方案是迭代的，因此不会消耗堆栈空间。在您的代码中，直到整个递归完成后才会执行评估。每个中间和都保存在堆栈中，并在您备份的过程中从右到左进行评估。这意味着你会在一个大名单上炸掉你的筹码。

*   其次，在递归之前评估每个结果意味着你*很快就会失败*。与结果不统一的第一个总和使整个操作失败。您的解决方案失败缓慢。考虑 10,000,000 个项目列表，其中第一个项目的总和不等于结果列表中的第一个项目：您将遍历所有 10,000,000 个项目，然后——假设你没有破坏你的堆栈——你开始从右到左计算总和。在最后一次评估之前，您的谓词不会失败​​。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T19:57:44.130

它是 SWI-Prolog 中的一个衬垫：

```
list_sum(X,Y,S) :- maplist(plus, X,Y,S). 
```

它也“向后”工作：

```
?- maplist(plus, [1,2,3],Y,[3,4,5]).
Y = [2, 2, 2]. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T18:09:13.760

你快到了。您的问题是 sum 的结果应该放在第二个子句的开头，而不是放在递归调用中！

```
list_sum([H1|T1],[H2|T2],[X|L3]):-list_sum(T1,T2,L3), X is H1+H2. 
```

请注意，您编写它的方式，结果是“返回”的 L3 是一个列表，其中您已从`X`recusive 调用中删除了 head ( )；而您的意思恰恰相反：将元素 ( `X`) 添加到结果列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T18:20:14.043

结果应该是一个列表，所以你不能只说`X is H1+H2`因为 X 不是一个列表，而你只是将列表的头部与单个变量匹配。出于同样`list_sum([],[],0)`的原因也不正确。答案如下所示：

```
sum([],[],[]).
sum([H1| T1], [H2| T2], [ResH| ResT]) :- 
        sum(T1, T2, ResT),
        ResH is H1+H2. 
```

但是当你运行自己的代码时，第一次 X 与 H1+H2 匹配，在第二次递归调用时，X 有一个值，不能与 T1+T2 的头部匹配。所以它输出一个`no`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-16T11:36:32.173

```
domains
list=integer*
predicates
add(list,list,list)
clauses
add([],[],[]).
add([V1X|X],[V1Y|Y],[V1Z|Z]):-add(X,Y,Z),V1Z=V1X+V1Y. 
```**

# java - 对象存在于堆上。它由实例变量组成。它还包含方法吗？当我们从对象调用方法时，它如何进入堆栈？

> ID：15933105
> 
> 赞同：1
> 
> 时间：2013-04-10T18:02:28.903
> 
> 标签：java

一个对象存在于堆上。它由实例变量组成。它是否也包含方法，当我们从对象调用方法时，它如何进入堆栈？

如果我创建一个对象

```
Test obj=new Test();
obj.start(); 
```

方法代码在哪里？它是在堆内存中的对象中还是在其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:08:56.203

方法代码不在堆中 - 它位于加载类数据时填充的静态内存区域。对象实例包含对该静态内存区域的引用，它允许运行时系统在调用时查找适当的方法——这就是方法覆盖的工作方式。假设你正在调用一个实例的`equals`方法——在运行时，JVM 会查看类的静态内存区域，然后找到被覆盖`equals`方法的地址，或者它遵循指向超类静态内存区域的链接以找到它的`equals`方法，当 JVM 找到被覆盖的方法时停止，`equals`或者当 JVM`Object`使用其默认`equals`方法找到内存区域时停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:07:12.217

方法代码不会为每个实例重复。每个方法只存储一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:06:55.607

如[http://javapapers.com/core-java/java-jvm-memory-types/](http://javapapers.com/core-java/java-jvm-memory-types/)所示：

> (...)**方法区是非堆内存的一部分**。它存储每个类的结构、方法和构造函数的代码。每类结构意味着运行时常量和静态字段。

另请参阅：[方法存在于何处？堆栈还是堆中？](https://stackoverflow.com/questions/1208695/where-methods-live-stack-or-in-heap)

# ios - 在 iOS 包中搜索全文的工具

> ID：15933112
> 
> 赞同：9
> 
> 时间：2013-04-10T18:02:44.570
> 
> 标签：ios, xcode, full-text-search

很抱歉这个笼统的问题......我已经寻找了很长时间，但还没有找到任何我可以使用或轻松适应的东西。我真的很感激任何指示！

我正在构建一个参考应用程序，其中将包含几本纯文本格式的教科书。我希望用户能够执行搜索，并返回一个带有结果列表的表格。我有一个工作原型，但我编写的搜索逻辑并不是那么聪明，而且一直在努力让它变得更好。

这显然是一个相当普遍的问题，因此我正在寻找一种可以适应该任务的工具。到目前为止，我已经找到了 Lucene ( [http://vafer.org/blog/20090107014544/](http://vafer.org/blog/20090107014544/) ) 和 Locayta ( [http://www.locayta.com/iOS-search-engine/locayta-search-mobile/](http://www.locayta.com/iOS-search-engine/locayta-search-mobile/) )

Lucene 似乎已针对 iOS 2 进行了最后一次更新……我什至不知道我是否能够自己重做它。也许。

Locayta 可能会很好用，但商业许可证是 1,000 美元，我可能不会很快用这个应用程序收回成本，因为它是一个利基市场。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:09:18.273

我们在我工作的地方偶然发现了同样的困境，但尚未决定解决方案。Locayta 似乎很有希望，但除此之外，我还研究了 SQLite 的 FTS3/FTS4。

唯一的问题似乎是缺少匹配部分单词的方法。很容易搜索包含整个单词的字段（例如，“paper”匹配“printer paper”、“paper punch”和“sketch paper”），或者以某字开头的单词（例如，“bi*”匹配“binder ", 和 "bicycle")，但没有内置的方式来匹配后缀。

如果您不需要该功能，FTS3/FTS4 可能会工作。

我看到您在后续中提到您的 SQLite 无法识别 FTS3()，我一开始也遇到了同样的问题。显然，默认情况下它没有捆绑到 iOS 版本中，而是您必须下载 SQLite3 合并，并将其手动包含在项目中。如在[SQLite 的 iOS 版本中是否提供 FTS？](https://stackoverflow.com/questions/5954433/is-fts-available-in-the-ios-build-of-sqlite)

另请注意，默认情况下未启用 SQLITE_ENABLE_FTS3 变量，您只需将其添加到配置中，详见[http://www.sqlite.org/fts3.html#section_2](http://www.sqlite.org/fts3.html#section_2)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T22:51:20.883

如果您可以将纯 C 代码转换为 iOS Objective-C，那么[Apache Lucy](http://lucy.apache.org/)（Lucene 的松散“C”端口）可能值得一看。

# jquery - 如何在多 jquery 比率系统中控制目标

> ID：15933121
> 
> 赞同：1
> 
> 时间：2013-04-10T18:03:06.593
> 
> 标签：jquery, plugins, rating, raty

我正在使用 jquery raty 在 php 中进行评分页面，其中显示了多个评分。它工作正常，除非一件事。得分功能和点击功能工作正常。但是我在尝试为每个元素设置目标时遇到问题。我想要的是在悬停在每颗星上时显示评级选择。它应该在带有“star_hint”类的 div 中显示提示，但事实并非如此。

每个元素都显示在一个 div 中，如下所示：

```
<div class="span4">
   <h4>First valoration</h4>
   <div class="star" data-number="3"></div>                                         
   <input type="hidden" class="score_value" />                                  
   <div class="star_hint"></div>
</div>

<div class="span4">
   <h4>Second valoration</h4>
   <div class="star" data-number="4"></div>                                         
   <input type="hidden" class="score_value" />                                  
   <div class="star_hint"></div>
</div>
etc.... 
```

脚本是这样的：

```
$('.star').raty({
    target: $(this).next('.star_hint'),
    score: function() {
        return $(this).attr('data-number');  // set default value 
    },
    click: function(score) {
        $(this).next().val(score);  // save clicked value in hidden input
        GetAverageNote();  // calculates average note from all ratys
    }
}); 
```

我不能使用 id 作为目标，因为每个明星项目都有不同的目标。我还尝试在函数中返回值，例如 score 和 click ，但它不起作用。像那样：

```
target: function() {
    $(this).next('.star_hint');
   } 
```

有人对如何使这项工作有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T16:26:40.737

您可以循环遍历所有`span`需要绑定`div`的`raty()`方法，然后`tid`作为变量传递以进行设置`raty({target:tid})`

```
Rate <span id="star_xxx" data-number="3" rel="#hint_xxx" ></span>  <span  id="hint_xxx">   </span>

$( document ).ready(function() {
$('span[id^="star"]').each(function(){
    var tid = $(this).attr('rel'); 
    $(this).raty({
        target : tid ,
        starOff : '/img/star-off.png', 
        starOn : '/img/star-on.png'     

}) 
}) 

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T12:25:47.193

html

```
<div class="star" data-score="2.6"></div><span class="hint"></span> 
```

js

```
$(function () {
     $('div[class^="star"]').each(function(){
        $(this).raty({
            readOnly:true,
            score: function() {return $(this).attr('data-score');},
            }) 
            $(this).next().text($(this).attr('data-score'));
        });
    }); 
```

# php - PHP - 获取带有文件扩展名的请求变量不起作用

> ID：15933122
> 
> 赞同：1
> 
> 时间：2013-04-10T18:03:10.527
> 
> 标签：php, gif

```
$badgedata = $_GET['badge'];
if ($badgedata == "test.gif") {
  $im = imagecreatefromgif("badges/base/test.gif");
  imagegif($im);
} 
```

为什么我去的时候会显示一个空白页

```
badge.php?badge=test.gif 
```

但如果我尝试

```
$badgedata = $_GET['badge'];
if ($badgedata == "test") {
  $im = imagecreatefromgif("badges/base/test.gif");
  imagegif($im);
} 
```

然后去

```
badge.php?badge=test 
```

它有效，但我需要`.gif`最后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:08:13.153

你必须设置标题

```
$badgedata = $_GET['badge'];
if ($badgedata == "test.gif") {
   $im = imagecreatefromgif("badges/base/test.gif");
   header('Content-Type: image/gif');
   imagegif($im);
} 
```

检查徽章价值

```
$badgedata = $_GET['badge'];
echo $badgedata; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:17:02.847

你试过这个吗？

网址

```
?badge=test%2Egif 
```

代码

```
<?php
$badge = (isset($_GET['badge'])) ? urldecode($_GET['badge']) : null;
if(!empty($badge))
echo $badge; 
```

# sharepoint - 从 SP2013 应用程序中获取 Sharepoint URL 的查询字符串

> ID：15933123
> 
> 赞同：1
> 
> 时间：2013-04-10T18:03:23.637
> 
> 标签：sharepoint, sharepoint-2013

我在 sharepoint 2013 中有一个应用程序，它显示在 iframe 中。我想要链接到在其他地方嵌入了应用程序的页面，并通过这些链接将数据传递给我的应用程序。听起来像是查询字符串的工作，对吧？

但是，我找不到在我的应用程序中获取查询字符串的方法。我尝试插入的所有令牌都没有，而且我无法从 javascript 中获取它，因为我的 iframe 和 sharepoint 的 url 不同。有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-06T21:32:54.397

如果您的应用在 SP 页面内，请使用

```
document.referrer 
```

获取包括查询在内的完整 URL

# javascript - 为 javascript 节点模块编写 git API

> ID：15933129
> 
> 赞同：0
> 
> 时间：2013-04-10T18:03:36.717
> 
> 标签：javascript, git, api, node.js

嗨，最近我必须为节点模块实现一个 git API，所以我们可以通过编程接口进行版本控制。我在[这篇文章](https://stackoverflow.com/questions/5955891/has-anyone-implemented-a-git-clone-or-interface-library-using-nodejs)中找到了一些我可以使用的好模块。

然而，在玩了一些之后，我意识到它们都没有提供查询单个文件的提交历史的功能（比如调用 'git log --follow'）。我想将该功能扩展到我的模块中，但由于我之前没有经验，有人知道我应该从哪里开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:06:14.170

您提到的库应该是一个很好的起点。以[node-git 的 lib/git.js 文件](https://github.com/christkv/node-git/blob/master/lib/git/git.js)为例。在那里你可以找到以下几行：

```
// Call the native git binary
Git.prototype.call_git = function(prefix, command, postfix, options, args, callback) {
    // ... 
```

这是了解作者如何将 Node 函数映射到系统调用并允许回调与输出一起工作的一个很好的起点。

我会开始一个项目的分支。[在同一个文件](https://github.com/christkv/node-git/blob/master/lib/git/git.js)中查找日志函数，该文件的开头类似于

```
Git.prototype.log = function(commit, path, options, callback) { 
```

复制函数，给它一个合适的名称，并尝试采用它来满足您的需求。

如果您成功并愿意提供帮助，您可以在 GitHub 上发起 pull request 来帮助作者并将功能添加到官方项目中。

我会这样做。我希望这有帮助。

# imagemagick - ImageMagick JPEG 压缩块大小

> ID：15933131
> 
> 赞同：0
> 
> 时间：2013-04-10T18:03:38.283
> 
> 标签：imagemagick, imagemagick-convert, node-imagemagick

有谁知道 ImageMagick 在 JPEG 压缩中使用什么处理块大小（8x8 或 16x16 ？？）？而且，有没有办法改变这个默认的块大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:56:36.397

请参阅 en.wikipedia.org/wiki/JPEG。它说“在二次采样之后，每个通道必须分成 8×8 块。根据色度二次采样，这会产生（最小编码单元）尺寸为 8×8（4:4:4 – 无二次采样）、16×8 的 MCU 块(4:2:2)，或者最常见的 16×16 (4:2:0)。

# jquery-mobile - jQuery Mobile - pageinit 处理程序未在后续 changePage 调用中调用

> ID：15933134
> 
> 赞同：1
> 
> 时间：2013-04-10T18:03:43.520
> 
> 标签：jquery-mobile

我在 html 页面上有两个 jquery 移动“页面”（指定为页面的 div）。我想在每次访问页面时调用方法。我连接了触发[“pageinit”](http://jquerymobile.com/demos/1.2.1/docs/api/events.html)事件的方法。但是，它只会被调用一次，并且不会在后续的 changePage 调用中被调用。

这是一个[jsFiddle 来演示](http://jsfiddle.net/CqRzQ/9/)。（时间戳应该在 pageinit 上改变）

这是我的完整代码[https://gist.github.com/dev-e-loper/5356942](https://gist.github.com/dev-e-loper/5356942)

我的页面：

```
<div id="page1" data-role="page">
     <h1>One</h1>
 <a id="page1_link" data-role="button">go to page 2</a>

    <div id="page1_output"></div>
</div>
<div id="page2" data-role="page">
     <h1>Two</h1>
 <a id="page2_link" data-role="button">go to page 1</a>

    <div id="page2_output"></div>
</div> 
```

连接 pageinit 处理程序的代码：

```
$("#page1").live('pageinit', function () {
    $("#page1_output").append('<br/> page 1 initialized. time - ' + new Date());
});

$("#page2").live('pageinit', function () {
    $("#page2_output").append('<br/> page 2 initialized time - ' + new Date());
});

$("#page1_link").live('click', function () {

    $.mobile.changePage($("#page2"));

});

$("#page2_link").live('click', function () {

    $.mobile.changePage($("#page1"));

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:36:11.847

`pageinit`将在您的页面首次加载时触发。您的两个页面都缓存在 DOM 中，因此该事件只会触发一次。尝试`pageshow`每次显示页面时都会触发。

还有，`live()`是贬值的。您应该使用`bind()`或`on()`。

[http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)

```
$("#page1").bind('pageshow', function () {
    $("#page1_output").append('<br/> page 1 initialized. time - ' + new Date());
});

$("#page2").bind('pageshow', function () {
    $("#page2_output").append('<br/> page 2 initialized time - ' + new Date());
}); 
```

# powershell - PowerShell xml string</h1> <div id="body"><p>I have a directory of xml files and I want to extract the title for each. I am very new to powershell, and have tried the following.</p> <pre><code>Get-ChildItem -re

> ID：15933136
> 
> 赞同：0
> 
> 时间：2013-04-10T18:04:00.223
> 
> 标签：powershell

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:17:01.020

如果您确定所有内容`<title>this title</title>`都在单行上，请尝试：

```
Get-ChildItem -recurse | % { 
    ((Get-Content .\test.xml) -match "<title>" -replace '<title>' -replace '</title>').Trim()
} | Set-Content protid_output.txt 
```

如果他们更像：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<example>
<title>
protein name
</title>
</example> 
```

然后尝试首先将其解析为 xml-object（更易于阅读），但避免使用 10+ MB 文件。例子：

```
Get-ChildItem -Recurse | % { 
    $x = [xml](Get-Content $_)
    $x.example.title.Trim()
} | Set-Content protid_output.txt 
```

# android - 在没有 MapActivity 的地图上绘制路线

> ID：15933137
> 
> 赞同：0
> 
> 时间：2013-04-10T18:04:01.793
> 
> 标签：android, google-maps

我想使用以下方法在已知点（纬度，经度）之间的地图上绘制路径：

```
String uri = "http://maps.google.com/maps?f=d&hl=en&saddr="+source_latitude+","+source_longitude+"&daddr="+destination_latitude+","+destination_longitude;
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

但是，谷歌地图不仅仅是绘制路线，而是显示菜单 Car/Bus/By foot，试图从我当前的位置到这些点。我究竟做错了什么？是否仍然可以使用上述方法在地图上绘制路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:09:09.623

通过运行此意图，您基本上是在打开一个“外部”应用程序 - 与您的应用程序无关的 Google 地图。您收到的行为应该适用于您手机中的 Google 地图版本。您无法编辑其行为方式，只能使用此应用程序的设置屏幕更改允许您更改的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:37:21.840

您必须解析您在 Asynctask 类的 url 中使用的 xml 或 json 并将其绘制在地图上。

# html - 如何将一个文本 div 包裹在另一个作为 DOM 中的兄弟元素的周围？

> ID：15933139
> 
> 赞同：6
> 
> 时间：2013-04-10T18:04:07.857
> 
> 标签：html, css

假设我有这个 HTML：

```
<div id="a">
  a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa
  a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa
  a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa
</div>
<div id="b">
  b bb bbb b bb bbb b bb bbb b bb bbb b bb bbb b bb bbb
</div> 
```

使用 CSS，我如何将 div A 包裹在 div B 周围，以便获得如下效果？

![包装文本 div](https://i.stack.imgur.com/gjNZf.png)

从我尝试过的所有内容和阅读过的所有内容来看，我什至不确定这样的事情是否可行。具有负边距的浮动只是重叠而不是换行，任何绝对定位的尝试都会将 div B 从流中取出，因此也不会在那里换行。

我希望 div A 跟随 div B 作为兄弟，以便内容仅显示在手机或屏幕阅读器上。这就是为什么 div B 不是 div A 的孩子。

不诉诸于用 JavaScript 移动 div B，有没有什么 CSS 小手可以达到效果。我唯一能想到的就是在 div A 中放置一个节省空间的空 div，然后将 div B 重新定位到它的“顶部”。这是一种有效的技术，还是我只是在不同大小的浏览器视口上找麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:08:43.243

每个人似乎都同意这种事情不能单独使用 CSS 完成。因此，我使用 jQuery 编写了一个简短的（人为的）解决方案，以防它对任何人都有帮助。您还可以在[http://jsfiddle.net/qadJB/查看结果](http://jsfiddle.net/qadJB/)

```
<!DOCTYPE html>
<html>
  <body>
    <div id="a">
      a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa
      <div id="b-box"></div>
      a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa
      a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa a aa aaa
    </div>
    <div id="b">
      b bb bbb b bb bbb b bb bbb b bb bbb b bb bbb b bb bbb
    </div>
    <style>
      div { font-family: consolas; }
      #a { margin-left: 5em; width: 18em; }
      #b-box { border: 1px solid #eee; float: left; height: 3.25em; width: 10em; margin: 0.5em; margin-left: -4em; }
    </style>
    <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
      $(function() {
        var boxPos = $('#b-box').offset();

        $('#b')
          .css('position', 'absolute')
          .width($('#b-box').width())
          .css('top', boxPos.top + 'px')
          .css('left', boxPos.left + 'px');
      });
    </script>
  </body>
</html> 
```

编辑：为了简单起见，我省略了隐藏 div Box-B 的代码，而不是为小屏幕移动 div B。我会使用 CSS 媒体查询来隐藏 div B-Box，当它被隐藏时，jQuery 代码不会对 div B 做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:34:27.750

要回答你的问题，这可以用css来完成吗，答案是否定的。但是你绝对可以使用 jQuery 和 css 来做到这一点。jQuery 会处理不同的视口大小等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:05:22.630

就像您提到的那样，为“b”创建一个框，以便“a”可以用浮动环绕。

# map - Mono for Droid：如何绘制路线

> ID：15933140
> 
> 赞同：2
> 
> 时间：2013-04-10T18:04:08.937
> 
> 标签：map, xamarin.android, routes

我正在为 Android 应用程序开发 Mono，并希望显示两点之间的路线图。我实现了他们的[Xamarin.Android Map API](http://docs.xamarin.com/guides/android/platform_features/maps_and_location)来获取当前位置。

我不知道如何绘制从当前位置到目的地的路线。有没有库或框架？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T19:17:34.917

Xamarin.Android Map API 基于*Google Maps Android v1 API* ，该 API自 2012 年 12 月 3 日起弃用。如果您*真的非常*想实施 Google Maps，我建议您查看使用[Google Maps Android的](https://developers.google.com/maps/documentation/android/)[Xamarin Maps and Location Demo v2](https://github.com/xamarin/monodroid-samples/tree/master/MapsAndLocationDemo_v2) [v2 API](https://developers.google.com/maps/documentation/android/)。但是绘制路线仍然不是一件容易的事 - 您可以使用[Google Direction API](https://developers.google.com/maps/documentation/directions/)获取折线并使用它在地图上绘制形状，如此处[所述](https://developers.google.com/maps/documentation/android/shapes#geodesic_segments)（顺便说一下，Direction API 免费使用的限制）。

我建议采用不同的方法。如果您可以使用 Open Street Maps，我肯定会选择[OSM Droid](http://code.google.com/p/osmdroid/)库以及[OSM Bonus Pack](http://code.google.com/p/osmbonuspack/)，它为您带来了所有的魔力。看看[Xamarin OSM Droid Binding 示例](https://github.com/xamarin/monodroid-samples/tree/master/OsmDroidBindingExample)。要包含 Bonus Pack，您可以将其 JAR 添加到 Osm Droid Binding 解决方案并通过添加到 Metadata.xml 来修复两个可见性问题：

```
<attr path="/api/package[@name='org.osmdroid.bonuspack.routing']/class[@name='RoadLink']" name="visibility">public</attr>
<attr path="/api/package[@name='org.osmdroid.bonuspack.overlays']/class[@name='MapEventsOverlay']/method[@name='draw']" name="visibility">public</attr> 
```

有了这个设置，就有一个非常好的道路管理器，它会为我们绘制一条路线。下面是一个示例代码片段：

```
public class MainActivity : Activity
{
    private IMapController _mapController;
    private MapView _mapView;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.Main);

        _mapView = FindViewById<MapView>(Resource.Id.mapview);
        _mapView.SetTileSource(TileSourceFactory.DefaultTileSource);
        _mapView.SetMultiTouchControls(true);

        _mapController = _mapView.Controller;

        RoadManager roadManager = new MapQuestRoadManager();

        JavaList<GeoPoint> waypoints = new JavaList<GeoPoint>();
        waypoints.Add(new GeoPoint(51.776625, 19.454834)); //start point
        waypoints.Add(new GeoPoint(51.770839, 19.464962)); //end point
        Road road = roadManager.GetRoad(waypoints);

        PathOverlay roadOverlay = RoadManager.BuildRoadOverlay(road, _mapView.Context);
        _mapView.Overlays.Add(roadOverlay);
        _mapView.Invalidate();

    }
} 
```

有关此主题的更多教程位于[此处](http://code.google.com/p/osmbonuspack/wiki/Tutorial_1)。

# mysql - MySQL LIKE 的结果比预期的要多

> ID：15933142
> 
> 赞同：1
> 
> 时间：2013-04-10T18:04:13.613
> 
> 标签：mysql, sql-like

为什么这个 LIKE 语句

```
WHERE configuration_key LIKE 'MODULE_SHIPPING_DP_%' 
```

显示如下结果：

```
MODULE_SHIPPING_DPD_STATUS
MODULE_SHIPPING_DP_STATUS
MODULE_SHIPPING_DPD_TAX_CLASS
MODULE_SHIPPING_DP_TAX_CLASS 
```

我只想得到结果

```
MODULE_SHIPPING_DP_foobar 
```

我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:05:49.017

因为下划线`_`就像`%`你只寻找一个字符[（cf 文档）](https://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)

您需要像这样使用`\`before 来转义字符：

```
WHERE configuration_key LIKE 'MODULE\_SHIPPING\_DP\_%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:09:12.107

_ 也是一个通配符，匹配一个字符。所以你需要逃避它。

```
WHERE configuration_key LIKE 'MODULE\_SHIPPING\_DP\_%' 
```

# java - 将网络驱动器上的源代码编译到本地驱动器上

> ID：15933145
> 
> 赞同：1
> 
> 时间：2013-04-10T18:04:26.373
> 
> 标签：java, netbeans, ide

我想避免使用诸如 Dropbox 之类的服务来存储代码，即使它很方便。出于安全原因，我更愿意将我的源存储在共享网络驱动器上，然后从两个不同的地方访问它。

但是，当我使用诸如 Netbeans 之类的 IDE 执行此操作时，网络延迟非常糟糕，即使我在现场而不是在家时也是如此。

有没有办法将源代码存储在网络驱动器上，但将编译后的对象（类和战争文件）写入本地驱动器？这样我就可以部署本地战争，而无需将其写回网络驱动器上的项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:41:30.490

在 Linux 下，可以在文件系统的任何位置[挂载共享网络文件夹](https://help.ubuntu.com/community/SettingUpNFSHowTo)。您可以将其挂载为源文件夹并将所有源文件保存在那里，并将所有其他文件夹保留在本地。您的 NAS 盒很可能支持 NFS。

如果您不想移动当前挂载点或源文件夹不在其根目录，也可以创建指向它的符号链接 ( `ln -s target_folder link_folder`)。它的行为就像一个指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:35:32.380

根据您的描述，听起来您确实应该使用某种[源代码控制，而不仅仅是通过网络共享。](http://discuss.joelonsoftware.com/default.asp?W190)当您有多个框编辑相同的代码时，使用源代码管理确实会变得更简单。似乎您已经在这些框之间进行了网络访问，因此您只需要设置您最喜欢的 NetBeans 支持的源代码控制存储库，例如[git](http://git-scm.com/)或[subversion](http://subversion.tigris.org/)。

设置 repo 可能会很痛苦，因此 Web 服务始终是一种选择。我相信来自 Atlassian 的[Bitbucket](https://bitbucket.org/)允许免费的私有存储库。还有[Github](https://github.com/)，但只有公共 repos 是免费的。如果你需要 Subversion，有[Beanstalk](http://beanstalkapp.com/)，但你必须为服务付费。这些是我熟悉的，还有更多的源代码控制服务。

# java - Java foreach 循环对于重复执行是否过度杀伤？

> ID：15933146
> 
> 赞同：7
> 
> 时间：2013-04-10T18:04:26.827
> 
> 标签：java, performance, for-loop, foreach, garbage-collection

我同意 foreach 循环减少了打字并且有利于可读性。

稍作备份，我从事低延迟应用程序开发，每秒接收 100 万个数据包进行处理。遍历一百万个数据包并将此信息发送给其侦听器。我正在使用 foreach 循环遍历一组侦听器。

进行分析时，我发现创建了很多**Iterator 对象**来执行 foreach 循环。将 foreach 循环转换为基于索引的 foreach 我观察到通过减少 no 来创建的对象数量大幅下降。GC 和增加应用程序吞吐量。

**编辑**：（抱歉混淆，使这个 Q 更清晰）例如，我有听众列表（固定大小），我每秒循环通过这个 forloop 一百万次。foreach 在 java 中是不是有点矫枉过正？

例子：

```
for(String s:listOfListeners)
{
   // logic
} 
```

相比

```
for (int i=0;i<listOfListeners.size();i++)
{
   // logic
} 
```

代码的配置屏幕截图

```
for (int cnt = 0; cnt < 1_000_000; cnt++)
{
    for (String string : list_of_listeners)
    {
         //No Code here 
    }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/PBEwi.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T18:06:26.493

编辑：回答截然不同的问题：

> 例如，我有侦听器列表（固定大小），并且我每秒循环通过这个 forloop 一百万次。foreach 在 java 中是不是有点矫枉过正？

这取决于 - 您的分析是否真的表明额外的分配很*重要*？Java 分配器和垃圾收集器每秒可以做*很多工作。*

换句话说，您的步骤应该是：

1.  根据您的功能要求设定性能目标
2.  编写最简单的代码来实现您的功能需求
3.  衡量该代码是否满足功能要求
4.  如果没有：
    *   配置文件以找出优化的位置
    *   做出改变
    *   再次运行测试以查看它们是否对您的有意义的指标产生重大影响（分配的对象数量可能不是有意义的指标；您可以处理的侦听器数量可能是）
    *   返回第 3 步。

*也许*在您的情况下，增强的 for 循环很重要。我不会假设它是 - 我也不会假设每秒创建一百万个对象是重要的。我会在之前和之后测量*有意义的*指标......并确保在你做任何其他事情之前你有具体的性能目标，否则你将不知道何时停止微优化。

* * *

> 列表的大小约为一百万个对象流入。

所以你正在创建*一个*迭代器对象，但你正在执行你的循环体一百万次。

> 进行分析时，我发现创建了很多 Iterator 对象来执行 foreach 循环。

没有？应该只创建一个迭代器*对象*。[根据 JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)：

> 增强的 for 语句等效于以下形式的基本 for 语句：

```
 for (I #i = Expression.iterator(); #i.hasNext(); ) {
        VariableModifiersopt TargetType Identifier =
            (TargetType) #i.next();
        Statement
    } 
```

如您所见，它调用了*一次*`iterator()`方法，然后在每次迭代中调用and 。*`hasNext()``next()`*

 *您认为额外的对象分配实际上会严重损害您的性能吗？

与性能相比，您对可读性的重视程度如何？我会在任何有助于提高可读性的地方使用增强的 for 循环，直到它被证明是一个性能问题——我个人的经验是，在我编写的任何东西中它都*不会显着损害性能。*这并不是说对所有应用程序都适用，但*默认*位置应该是在证明它会显着改善事情之后只使用可读性较差的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T18:07:11.817

“foreach”循环只创建一个`Iterator`对象，而第二个循环不创建任何对象。如果您正在执行许多单独的循环，每个循环只执行几次，那么是的，“foreach”可能会不必要地昂贵。否则，这是微优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:13:05.313

编辑：自从我写下我的答案以来，这个问题发生了很大的变化，我不确定我现在在回答什么。

*如果它是一个链表*，查找内容`list.get(i)`实际上可能会慢很多，因为对于每次查找，它都必须遍历列表，而迭代器会记住位置。

 *例子：

```
list.get(0) will get the first element
list.get(1) will first get the first element to find pointer to the next
list.get(2) will first get the first element, then go to the second and then to the third
etc. 
```

所以要做一个完整的循环，你实际上是以这种方式循环元素：

```
0
0->1
0->1->2
0->1->2->3
etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:08:18.993

这种比较是否公平？您正在使用`Iterator`Vs 进行比较`get(index)`

此外，每个循环只会创建一个额外`Iterator`的 . 除非由于`Iterator`某种原因本身效率低下，否则您应该会看到相当的性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T18:07:53.897

我认为你不应该担心这里的有效性。

大部分时间都被您的实际应用程序逻辑所消耗（在这种情况下 - 您在循环中所做的事情）。

所以，我不会担心你在这里为方便而付出的代价。**

# c# - 按 GroupName 对表进行排序，其中数据是使用 MVC 2.0 从数据库中获取的

> ID：15933149
> 
> 赞同：0
> 
> 时间：2013-04-10T18:04:47.563
> 
> 标签：c#, javascript, sql, asp.net-mvc-2

我需要一个看起来像这样的视图：

[+] Group Name1 //这应该是一个手风琴菜单

子名称| 比例1| 规模2| 比例3| Scale4 //这应该是表头

美国广播公司 | ○ | ○ | ○ | O // 'Abc' 是文本，'O' 是单选按钮

XYZ | ○ | ○ | ○ | O // 同上一行

[+] 组名2
子名 | 规模1 | 规模2 | 规模3 | Scale4 //和上一张表一样

二维码 | ○ | ○ | ○ | O
Mno | ○ | ○ | ○ | ○

我可以通过单击 [+] 获得表格。而且，我正在生成行列表，使用从数据库表中获取值的 foreach 循环。但是，我面临的问题是，我能够在一个表中获取值，并且所有值都列在其中，例如：abc,xyz,..,pqr,mno,... 但我需要它来**排序IT 根据其“组名”**，尽管我可以对其进行分组。请建议我如何将它与视图绑定。另外，任何人都可以建议我，我如何使用单选按钮。为此，我需要将所选单选按钮的值存储在数据库表中。

这是我的看法：

```
<div class='toggle'>
      <h2>&nbsp;</h2>
          <h2>lList</h2>
      <div class="togglebox">

    <table width="50%">
    <br />
    <br />
     <tr>
     <th>
      Group Name
     </th>
     <th>
     Sub Name
     </th>
     <th>
     Scale1
     </th>
     <th>
     Scale2
     </th>
     <th>
     Scale3
     </th>
     <th>
     Scale4
     </th>
     </tr>

     <% int counter = 0; %>
      <% foreach (var item in Model.skills)
         { %>

     <tr>
        <td>
       <%=item.GroupName%>
       </td>
        <td>
       <%=item.SubName%>
       </td>
       <td>
       <%--<input type="radio" name="scale<%:counter %> />--%>
       <%:Html.RadioButton("scale" + counter, 0, item.Scale)%>
       <%--<%=Html.RadioButtonFor(m => item.Scale, "Scale1", new { @name = "scale" + counter })%>--%>
       </td>
       <td>
       <%:Html.RadioButton("scale" + counter, 1, item.Scale)%>
      <%-- <%=Html.RadioButtonFor(m => item.Scale,"Scale2", new { @name = "scale" + counter})%>--%>
       </td>
       <td>
        <%:Html.RadioButton("scale" + counter, 2, item.Scale)%>
       <%--<%=Html.RadioButtonFor(m => item.Scale,"Scale3", new { @name = "scale" + counter})%>--%>
       </td>
       <td>
        <%:Html.RadioButton("scale" + counter, 3, item.Scale)%>
       <%--<%=Html.RadioButtonFor(m => item.Scale,"Expert", new {@name = "scale" + counter})%>--%>
       </td>
     </tr>
       <% counter++;
         } %>

     </table> 
```

这是我的模型：

```
public class Skill
{
    [DisplayName("Sub Name")]
    [Required]
    public string SubName { get; set; }

    [DisplayName("Group Name")]
    [Required]
    public string GroupName { get; set; }

    public bool Scale { get; set; }

} 
```

这是我的 DataAccessLayer：

```
 public static DataTable GetAllList(string ID)
    {
        SqlConnection con = new SqlConnection(connect);
        con.Open();
        SqlCommand cmd = new SqlCommand("spGetSkillsList", con);
        cmd.Parameters.AddWithValue("@ID", 1);
        cmd.CommandType = CommandType.StoredProcedure;
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        return ds.Tables[0];
    } 
```

这是我的业务层

```
 public static SkillMetricsViewModel GetAllList(string ID)
    {
        ListViewModel viewModel = new ListViewModel();
        DataTable dt = DAL.GetAllList(ID);

        List<Skill> skills = new List<Skill>();
        foreach (DataRow row in dt.Rows)
        {
            Skill skill = new Skill() { GroupName = row["GroupName"] != null ? row["GroupName"].ToString() : string.Empty, SubName = row["SubName"] != null ? row["SubName"].ToString() : string.Empty};
            skills.Add(skill);
        }
        IEnumerable<IGrouping<string, Skill>> test = skills.GroupBy(i => i.SkillGroupName);
        viewModel.skills = skills.GroupBy(x => x.SkillGroupName).SelectMany(r => r).ToList();
       return viewModel;

    } 
```

请帮助我。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:14:01.990

因此，如果您只需要始终按 GroupName 排序，那么在您的业务层中，您可以使用 linq 执行类似的操作

```
viewModel.skills = skills.OrderBy(x => x.GroupName) 
```

# c - 在 C 中操作动态数组

> ID：15933153
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:05:08.333
> 
> 标签：c, memory-management, dynamic-memory-allocation

我正在尝试解决[SPOJ (PL) 的 StringMerge (PP0504B)](http://pl.spoj.com/problems/PP0504B/)问题。基本上，问题是编写一个函数，该函数`string_merge(char *a, char *b)`返回一个指向 char 数组的指针，其中字符串是从 char 数组创建的，随后的字符交替选择（数组的长度是作为参数提供的较短数组的长度）。

我创建的程序可以很好地处理测试用例，但是当我将它发布给 SPOJ 的法官时它失败了。我在这里发布我的代码，因为我认为问题与内存分配有关（我仍在学习 C 的这一部分） - 你能看看我的代码吗？

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <stdbool.h>

#define T_SIZE 1001

char* string_merge(char *a, char *b);

char* string_merge(char *a, char *b) {
    int alen = strlen(a); int blen = strlen(b);
    int len  = (alen <= blen) ? alen : blen;
    int i,j;

    char *new_array = malloc (sizeof (char) * (len));
    new_array[len] = '\0';
    for(j=0,i=0;i<len;i++) {
            new_array[j++] = a[i];
            new_array[j++] = b[i];
    }
    return new_array;
}

int main() {
    int n,c; scanf("%d", &n);
    char word_a[T_SIZE];
    char word_b[T_SIZE];
    while(n--) {
        scanf("%s %s", word_a, word_b);
        char *x = string_merge(word_a, word_b);
        printf("%s",x);
        printf("\n");
        memset(word_a, 0, T_SIZE);
        memset(word_b, 0, T_SIZE);
        memset(x,0,T_SIZE);
    }
  return 0;
} 
```

注意：我正在用`-std=c99`flag 编译它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:09:12.980

一个接一个。

```
char *new_array = malloc (sizeof (char) * (len));
new_array[len] = '\0'; 
```

你正在写超出`new_array`. `len + 1`您必须为字节分配空间：

```
char *new_array = malloc(len + 1); 
```

此外，`sizeof(char)`始终为 1，因此将其拼写出来是多余的，而 . 周围的括号也是如此`len`。

***哇，进一步的错误！***

因此，您继续前进并在循环`j`的每次迭代中递增两次`for`。所以基本上你最终写的字符（大约）是你分配空间的两倍。

此外，您通过不使用 after`free()`的返回值来泄漏内存。`string_merge()`

此外，我看不到`memset`s 的用途，我也建议您使用`fgets()`and`strtok_r()`来获取这两个词而不是`scanf()`（它不会像您认为的那样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:29:14.547

```
char *new_array = malloc (sizeof (char) * (len*2 + 1));
new_array[len*2] = '\0'; 
```

# c# - MVC 4 App中的有效输入引发验证错误

> ID：15933155
> 
> 赞同：0
> 
> 时间：2013-04-10T18:05:18.657
> 
> 标签：c#, entity-framework, validation, asp.net-mvc-4, ef-code-first

我的 MVC 4 站点上有一个仪表板，其中部分显示来自一个 db 表的数据列表（我的数据库是使用实体框架代码优先方法生成的）。显示的数据用于订单列表以及与该订单相关的信息。现在，我正在尝试添加为同一订单添加额外数量的功能（例如：我需要此订单报价为 10、25、50 和 100 件）。在每一行的编辑、详细信息和删除选项旁边是一个添加按钮，用户可以在其中添加另一个数量。但是，在测试中，当我去提交一个数量时，出现验证错误，说输入的值是无效的，而它应该是一个完全有效的输入。有人可以帮忙吗，因为我不知道为什么会这样。以下是一些相关代码：

楷模：

General_Info.cs

```
public class General_Info
{
    [Key]
    public int Quote_ID { get; set; }

    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    public DateTime Open_Quote { get; set; }
    public string Customer_Name { get; set; }
    public string OEM_Name { get; set; }
    public int Qty { get; set; }
    public string Fab_Drawing_Num { get; set; }
    public string Rfq_Num { get; set; }
    public string Rev_Num { get; set; }
    public string Group_Number { get; set; }

    public General_Info()
    {
        Quantitys = new HashSet<Quantity>();
        Quote_Datas = new HashSet<Quote_Data>();
    }

    public virtual ICollection<Quantity> quantitys { get; set; }
} 
```

数量.cs

```
public class Quantity
{
    [Key]
    public int Qty_ID { get; set; }

    public string Group_Number { get; set; } // foreign key
    public int quantity { get; set; }
    public General_Info General_Info { get; set; }

} 
```

仪表板控制器：

```
[HttpGet]
    public ActionResult AddQuantity(int Group_Num = 0)
    {
        return View();
    }

    [HttpPost]
    public ActionResult AddQuantity(Quantity quantity)
    {
        if (ModelState.IsValid)
        {
            db.Quantitys.Add(quantity);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(quantity);
    } 
```

查看 AddQuantity.cshtml

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Quantity</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.quantity)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.quantity)
        @Html.ValidationMessageFor(model => model.quantity)
    </div>
    <p>
        <input type="submit" value="Add Qty" />
    </p>
</fieldset>
} 
```

如您所见，在我的模型中，数量是一个整数，如果我在表单中输入一个整数，则会引发验证错误。

提前感谢任何可以提供帮助的人，我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:20:43.977

如果您更改绑定模型名称，那应该这样做

```
[HttpPost]
public ActionResult AddQuantity(Quantity model) 
```

# python - 用 Python API 注册回调是什么意思？

> ID：15933156
> 
> 赞同：5
> 
> 时间：2013-04-10T18:05:18.957
> 
> 标签：python, python-3.x

我正在尝试详细了解 Python 3 API 的设计方式，当使用提供 python 3.x 解释器的应用程序内部可用模块的 API 将元素添加到 UI 时，我被要求注册回调以便成为能够使用我的函数/脚本：从 Cpython 的角度来看，“注册回调”是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T18:10:02.443

通常，这意味着您创建了一个函数：

```
def foo(some,arguments):
    pass #do something here 
```

然后将该函数传递给提供的 API 中的某个类：

```
API_class_instance.register_callback(foo) 
```

现在`API_class_instance`将`foo`在记录的情况下调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T18:15:20.383

[回调](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)：

> 在计算机编程中，回调是一段可执行代码，它作为参数传递给其他代码，期望在某个方便的时间回调（执行）该参数。调用可能是即时的，如在同步回调中​​，也可能在稍后发生，如在异步回调中。

因此，如果您正在向 UI API 注册回调，那么您可能会将您创建的某个函数传递给另一个函数，该函数将负责在某些情况发生时调用您的函数。

例如，您可能在 UI 中有一个按钮，并且您希望在单击该按钮时执行一些代码。您可能会注册一个如下所示的回调：

```
def onclick():
    print 'Button clicked!'

# call the onclick() method when the 'click' event happens on the button
some_api.register_callback(button, 'click', onclick) 
```

API 代码可能如下所示：

```
# global variable containing callbacks
callbacks = {}

# API for registering callbacks
def register_callback(obj, event, callback):
    if obj not in callbacks:
        callbacks[obj] = {}
    callbacks[obj][event] = callback

# a function that is called when some event is triggered on an object
def process_event(obj, event):
    if obj in callbacks and event in callbacks[obj]:
        # this object/event pair has a callback, call it
        callback = callbacks[obj][event]
        callback() 
```

# chef-infra - 替换包装说明书中的模板

> ID：15933157
> 
> 赞同：22
> 
> 时间：2013-04-10T18:05:21.973
> 
> 标签：chef-infra

我正在尝试为[厨师石墨回购写一本包装食谱](https://github.com/hw-cookbooks/graphite)

在配方 carbon.rb 中，出现以下几行：

```
template "#{node['graphite']['base_dir']}/conf/storage-schemas.conf" do
  owner node['apache']['user']
  group node['apache']['group']
end 
```

在 templates/default/storage-schemas.conf 中有一个我不喜欢的 storage-schemas.conf 文件。我可以内联编辑文件并实现我想要的，但如果我希望能够在没有合并冲突的情况下使我的 repo 保持最新，这似乎不是一个好的厨师实践。所以我想知道我是否可以用包装食谱来解决这个问题。

我的第一个虽然是

```
include_recipe "graphite"
template "#{node['graphite']['base_dir']}/conf/storage-schemas.conf" do
  owner node['apache']['user']
  group node['apache']['group']
end 
```

我会在基本配方完成后重新运行命令并将我想要的文件放在 wrappercookbook/templates/storage-schemas.conf.erb 中。这是一种常见的做法吗？感觉不是很干，但我想不出更干净的方法。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-10T19:53:16.240

你很接近。假设您的包装说明书中有 storage-schemas.conf.erb 文件的修改版本，您可以这样做：

```
include_recipe "graphite"
begin
  r = resources(:template => "#{node['graphite']['base_dir']}/conf/storage-schemas.conf")
  r.cookbook "my-cookbook"
rescue Chef::Exceptions::ResourceNotFound
  Chef::Log.warn "could not find template to override!"
end 
```

您还可以使用如下行：

```
r.source "graphite-stuff/my-storage-schemas.conf.erb" 
```

如果您想以不同的方式组织包装说明书中的文件。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-27T17:45:48.513

作为戴夫答案的替代方案，您还可以使用`chef-rewind`.

[https://github.com/bryanwb/chef-rewind](https://github.com/bryanwb/chef-rewind)

来自 github repo 的快速使用示例

**# 文件 postgresql/recipes/server.rb**

```
template "/var/pgsql/data/postgresql.conf" do
  source  "postgresql.conf.erb"
  owner "postgres"
end 
```

**# 文件 my-postgresql/recipes/server.rb**

```
chef_gem "chef-rewind"
require 'chef/rewind'

include_recipe "postgresql::server"
# my-postgresql.conf.erb located inside my-postgresql/templates/default/my-postgresql.conf.erb
rewind :template => "/var/pgsql/data/postgresql.conf" do
  source "my-postgresql.conf.erb"
  cookbook_name "my-postgresql"
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:43:36.520

制作补丁并与上游合并是使用时推荐的做法，`knife`因为刀会自动为您执行一些 git 分支合并内容，并且您可以跟踪最初更改的内容。

简单地覆盖包装说明书中的文件是我之前没有遇到的一种做法，但看起来很有趣 ^^ 缺点：您必须手动维护上游更改并将其合并到修改后的模板中，这有时可能比让 git 做大部分工作要做更多的工作为你。

第三种方式：当您可以直接控制最终用户将使用哪些食谱时，依靠“食谱阴影”（已弃用）：http: [//tickets.opscode.com/browse/CHEF-2308](http://tickets.opscode.com/browse/CHEF-2308)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-25T13:05:46.733

使用厨师 12，您可以使用 edit_resource

```
include_recipe 'communitycookbook'

edit_resource!(:template, '/etc/myapp.conf') do
  source 'other.erb'
  cookbook 'wrapper'
  variables.update(port: 8080)
end 
```

更多关于你可以在这里找到的信息：[https ://coderanger.net/rewind/](https://coderanger.net/rewind/)

# php - php 数组函数。试图避免解包数组然后重新打包数组

> ID：15933163
> 
> 赞同：1
> 
> 时间：2013-04-10T18:05:41.873
> 
> 标签：php, arrays, foreach

有没有一种更简单的方法将一个数组分解成一个额外的数组，而不是解包数组，运行分解函数，然后重新打包数组，如下所示。这很好用，我试图找出是否有更简单的方法。

```
 public function getStandardizationTerms()
    {

        $statement = $this->db->query('SELECT * FROM '.$this->std_table);
        $result = $statement->fetchAll(PDO::FETCH_ASSOC);

        $new_result = array();
        foreach($result as $term) {
            // the only purpose of this foreach loop is to turn the exception tables field into an array
            $new_result[] = array(              
                'key'          => $term['key'],
                'operator'     => $term['operator'],
                'fragment'     => $term['fragment'],
                'manufacturer' => $term['manufacturer'],
                'is_exception' => $term['is_exception'],
                'tables'       => explode(",",$term['tables'])
            );

        }       
        return $new_result;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:18:25.630

Couldn't you just reference the field directly?

```
<?php
$myArray = Array ('field1' => "var1", 'field2' => "var2", 'field3' => "var3, var4, var5");
$myArray['field3'] = explode (",", $myArray['field3']);
print_r ($myArray);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:42:40.117

`$terms`如果您通过引用循环低谷，则无需创建新数组

```
foreach($result as &$term) {
    $term['tables'] = explode(",",$term['tables']);
} 
```

另请查看[http://php.net/manual/en/control-structures.foreach.php上的第二个示例](http://php.net/manual/en/control-structures.foreach.php)

# java - 如何在不关闭连接的netty中设置读取超时？

> ID：15933167
> 
> 赞同：1
> 
> 时间：2013-04-10T18:05:51.973
> 
> 标签：java, netty

我有一个 netty 服务器，它接收来自客户端的请求，向另一台服务器发出请求，然后在对原始客户端请求的响应中使用来自第二个请求的响应。我希望对第二台服务器的请求有一个短暂的超时（约 40 毫秒），以便在超时时发送通用响应，但我不想关闭与第二台服务器的连接。相反，当超时请求到达时，我将简单地丢弃对超时请求的响应，然后将连接返回到我的池。

在netty中执行此操作的最佳方法是什么？我试过 ReadTimeoutHandler 但这似乎会在发生超时时关闭与第二台服务器的连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T21:51:29.633

看来，根据您的要求，您需要围绕与第二台服务器的连接编写自己的时间管理。此外，由于您提到了一个连接池，这可能意味着您对可以同时与第二台服务器建立的连接数也有限制（嗯，总是有限制的，这取决于您是否真的需要担心它或不）。

对于您不担心排队出站请求的简单情况，您应该能够创建 ReadTimeoutHandler 的副本并根据需要对其进行修改，很可能是通过让它从上下文中拉出一个回调来调用而不是关闭readTimedOut() 方法中的连接。

在您要将出站请求排队的情况下，您应该考虑在队列上花费的时间以及接收响应的时间，因此您的解决方案将需要您自己的计时器，该计时器在您将项目放入时立即启动出站队列。此外，您需要一种在计时器和返回的有效结果之间进行同步的方法（您只想发送一个响应，而不是在计时器超时时发送一个响应，并且在来自第二个服务器的响应到来时发送一个响应）。要做到这一点，我想你会想要使用某种类型的管理器对象，它包含对通道的引用，你的回调通过这个管理器写回。

例如（在伪代码中）

```
MyStateManager manager = new MyStateManager(channel);
// Scheduled a timer task for 40ms from now to invoke the callback
// method of your ReadTimedOutCallback and send a message through the manager
myTimer.schedule(new ReadTimedOutCallback(manager),40);
// Send an outbound request to server 2 through a class that queues
// and manages such requests asynchronously.  When the request is complete
// it invokes the callback method of RequestCompletedCallback which then
// sends a response through the manager.
myAsyncOutboundServerRequester.request(new RequestCompletedCallback(manager));
// ... finish and return the thread to Netty for use with other requests
// while the async tasks process 
```

简单形式的管理器类似于（不包括异常处理、通道状态检查等）：

```
public class MyStateManager
{
    private final Channel channel;
    private AtomicBoolean messageSent = new AtomicBoolean(false);
    public MyStateManager(Channel channel)
    {
        this.channel = channel;
    }

    // Called by the ReadTimeoutCallback
    public void sendGenericResponse()
    {
        if (messageSent.getAndSet(true))
        {
           //... write generic response to channel
           ChannelFuture future = channel.write... 
           // Add listeners to future, etc
        } 
    }

    // Called by the RequestCompletedCallback
    public void sendResponse(MyResponseObject response)
    {
        if (messageSent.getAndSet(true))
        {
            // write returned response to channel
            ChannelFuture future = channel.write(response);
            // Add listeners to future, etc
        }
    }

} 
```

您可能仍然希望对与第二台服务器的连接进行某种类型的超时检查，以便在连接太长时间（30 秒或一分钟或其他时间）无响应时关闭连接。

# java - 将对象重置为初始状态

> ID：15933168
> 
> 赞同：1
> 
> 时间：2013-04-10T18:05:58.033
> 
> 标签：java, class, object

java中有没有办法将对象重置为初始状态。但是，我正在演示搜索，当我到达一个节点时，将值更改为

```
current.visited = true; 
```

那么现在的下一次搜索运行必须等于

```
current.visited = false; 
```

这是可行的，除了不正确的逻辑。

所以理想情况下，构造代码看起来像：

```
 System.out.printf ("Breadth first search...\n\n");
    breadthFirstSearchMap (Romania);

 RESET Objects here...
    System.out.printf ("Depth first search...\n\n");
    depthFirstSearchMap (Romania);

 and again  here...

    System.out.printf ("Depth limited search...\n\n");      
     depthLimitedSearchMap (Romania); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:13:41.300

```
public interface Resetable {

    public void reset();
}

class Foo implements Resetable {
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:59:06.540

我会使用我自己的`reset()`方法。做起来很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:55:43.227

您应该看看 memento 设计模式，尽管如果恕我直言，最简单的方法是将访问标志存储为您为每次搜索启动的已访问节点 id（在任何实现`java.util.Set`中包含操作成本 1 ）。`Set`

否则，备忘录模式 Wiki 描述为：

“备忘录模式是一种软件设计模式，它提供了将对象恢复到其先前状态的能力”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:26:11.320

```
ClassObject depthFirstSearchMap;
public void blabla(){
depthFirstSearchMap = new ClassObject(Romaina);
 System.out.printf ("Breadth first search...\n\n");
breadthFirstSearchMap (Romania);
depthFirstSearchMap = new ClassObject(Romaina);
System.out.printf ("Depth first search...\n\n");
depthFirstSearchMap (Romania);
depthFirstSearchMap = new ClassObject(Romaina);
System.out.printf ("Depth limited search...\n\n");      
 depthLimitedSearchMap (Romania); 
} 
```

# mysql - 如何从 InnoDB 表中的自动增量重置 ID

> ID：15933173
> 
> 赞同：1
> 
> 时间：2013-04-10T18:06:08.503
> 
> 标签：mysql, database

我有看起来像这样的 InnoDB 表：

```
ID | DATA
----------
1  |   A
2  |   B
5  |   C
8  |   D
13 |   E 
```

我想将列 ID 重置为如下所示：

```
ID | DATA
----------
1  |   A
2  |   B
3  |   C
4  |   D
5  |   E 
```

但不幸的是，这不起作用：

ALTER TABLE 表名 AUTO_INCREMENT=1

有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:30:59.300

你可以做这些步骤

```
ALTER TABLE `table` DROP `id`;
ALTER TABLE `table` AUTO_INCREMENT = 1;
ALTER TABLE `table` ADD `id` int UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST; 
```

1- 将删除 id 列

2- 设置 auto_increment 从 1 开始

3-首先创建具有递增值的列 ID。

然后它会再次订购你所有的身份证

[这](https://stackoverflow.com/questions/740358/mysql-reorder-reset-auto-increment-primary-key)也会帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:23:28.843

表的 AUTO_INCREMENT 值决定了 MySQL 将赋予下一条新记录的值——它对现有数据没有影响。

如果要更改数据，则必须自己在自定义程序中进行。类似（伪代码）：

```
set counter = 1;    
while fetch new record and set X to current id {
    update table set ID = counter where id = X;
    counter = counter + 1;
} 
```

然而！- 如果您在任何其他表中使用该 ID，您也必须更新那里的值。这可能会变得非常复杂 - 您应该尽量避免更改主键值。

最后，无符号 BIGINT 的最大值是 18,446,744,073,709,551,615 - 你真的会在不久的将来达到这个值吗？

# android - 在绑定之前启动服务

> ID：15933180
> 
> 赞同：1
> 
> 时间：2013-04-10T18:06:31.587
> 
> 标签：android, android-intent, android-service

我想以`Service`这种方式使用：首先我使用`startService()`方法启动服务。`OnStartCommand()`方法返回`START_REDELIVER_INTENT`。然后（立即或不）我绑定到这个服务。

1）我可以确定`onStartCommand()`在调用之前调用了服务`onBind()`吗？

2）当服务被杀死并且我绑定到它时 - 它会在调用之前首先使用最后交付的意图（由于`START_REDELIVER_INTENT`标志）重新启动`onBind()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:27:12.590

1.  `onStartCommand()`应该在活动开始时调用它，当它开始使用时，`startService`或者如果它没有运行并且它在`onBind()`被调用但`onStartCommand()`未被调用时启动。

2.  如果您返回`START_REDELIVER_INTENT`该服务，则计划在可以再次启动时立即重新启动。

如果您只希望服务在与它交互时运行（如果您只使用`onBind()`和不使用） `startService()`，那么服务将在必要时启动，并在您使用`unBind()`.

有关使用服务的大量信息，请参阅[http://developer.android.com/reference/android/app/Service.html 。](http://developer.android.com/reference/android/app/Service.html)

# android - layout-small 不使用 drawable-ldpi 中的图像

> ID：15933182
> 
> 赞同：0
> 
> 时间：2013-04-10T18:06:34.810
> 
> 标签：android, android-layout

我已经为小型设备单独创建了一个布局，`layout-small`并将该布局中使用的图像添加到 中`drawable-ldpi`，但我不知道为什么`layout-small`不使用`drawable-ldpi`即使图像名称相同的小图像。

笔记：

我有`layout A`和里面我已经包括在内`layout B`，两者 `layout-small`都只包括在内。

我还进行了测试以检查我的设备属于哪个类别，结果显示

`small sized screen`而密度`120`就是LOW DENSITY

**更新**

我有`layout`，`layout-small`和`layout-port`文件夹，这里`layout-port`使用的是小图像，而不是`layout-small`，我将如何区分它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:17:05.433

您似乎正在尝试根据屏幕尺寸定位，但您正在根据屏幕密度添加图像。虽然您的设备的密度实际上可能是 LDPI，但实际上可能不是 SMALL。

从[文档](http://developer.android.com/guide/practices/screens_support.html)中：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

我建议您检查屏幕尺寸，看看您的屏幕是否实际上是 MEDIUM 尺寸。

编辑：HTC Wildfire 的屏幕为 3.2 英寸 @ 240 x 320，其 DPI 为 125。如果同时属于 SMALL 和 LDPI 类别，这绝对应该放置，但可能是分类错误？

# birt - Birt - 如何设置数据源超时？

> ID：15933188
> 
> 赞同：3
> 
> 时间：2013-04-10T18:06:55.560
> 
> 标签：birt

我在 Birt 报告中的一个 JDBC 数据源指向一个经常宕机的 MySQL 服务器（长篇大论）

但是当它确实关闭时，Birt/Eclipse 会冻结 5 分钟以上。有没有办法降低超时值？我在 Eclipse 中到处找，但没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:25:00.993

我最终点击了数据集的属性（高级部分），我可以在那里设置一个名为“&Query Time Out (in seconds)”的字段。它似乎可以满足我的需要。

更新：这个解决方案似乎昨天还在工作，但现在 Eclipse 仍然冻结并且没有使用超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:25:30.653

这篇文章[http://www.birt-exchange.org/org/forum/index.php/topic/22435-blank-report-after-a-long-time-in-web-viewer/](http://www.birt-exchange.org/org/forum/index.php/topic/22435-blank-report-after-a-long-time-in-web-viewer/)谈论改变“会话- 超时”的 Apache。在示例中，他们想要更长的时间。但是，如果您的所有报告都运行得很快，您应该能够降低该值。

# sql - 表示基于前缀 Microsoft SQL Server 2008 的 Id

> ID：15933190
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:06:57.917
> 
> 标签：sql, sql-server, sql-server-2008, database-design

我有一个带有公司 ID 和前缀表的数据库。目前，当我查询数据库以获取按公司 ID 组织它的信息时，我还想在查询中显示与 id 关联的前缀

```
Id    CoId  PartnerCoId
3221    1   3   
3220    1   4 
```

在这里，我想在 ID 旁边显示公司前缀让我们说 1 = DBZ、3 = TRE 和 4 = TYU

```
Id   CoId  PartnerCoId  coPrefix  partnerPrefix
3221    1   3            dbz         tre
3220    1   4            dbz         tyu 
```

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:13:36.483

您可以加入前缀表两次，一次用于 CoId，一次用于 PartnerId

```
SELECT 
  Id,
  CoId,
  PartnerCoId,
  mc.Prefix as coPrefix,
  pc.Prifix as partnerPrefix
FROM Table t
JOIN PrefixTable mc
  ON t.CoId = mc.CoId
JOIN PrefixTable pc
  ON t.PartnerCoId = pc.CoId 
```

# sql-server - 有谁知道在 HQL 中做中位数的方法？

> ID：15933197
> 
> 赞同：1
> 
> 时间：2013-04-10T18:07:26.607
> 
> 标签：sql-server, hql, median

有谁知道在 HQL 中做中位数的方法？

我正在使用 SQL Server（一个旧版本，所以我不能使用 PERCENTILE_CONT）并且我发现的大多数方法都需要结束，我无法弄清楚如何在 hql 中执行。有没有人对如何快速或根本做 hql 中位数有任何建议？

# javascript - XMLHttpRequest 仅检查服务器是否连接，不检查 URL

> ID：15933199
> 
> 赞同：0
> 
> 时间：2013-04-10T18:07:30.853
> 
> 标签：javascript, ajax, url, xmlhttprequest

```
function check()
{
    if (window.XMLHttpRequest){
            // code for IE7+, Firefox, Chrome, Opera, Safari
                var request = new XMLHttpRequest();
        }
        else{
            // code for IE6, IE5
            var request = new ActiveXObject("Microsoft.XMLHTTP");
        }

        dname="http://www.w3schools.com/js/default/gfdghkjfdh.html";
        request.open("HEAD", dname,true);
        request.send();
        if(request.status !== 404){ 
            window.location.href=dname;
        }
        else{
            window.location.href="http://www.google.com";
        }
    } 
```

上面的代码只检查服务器是否连接，它不检查 URL 的最后部分“gfdghkjfdh.html”是否可用。

有任何方法可以检查 URL“ [http://www.w3schools.com/js/default/gfdghkjfdh.html](http://www.w3schools.com/js/default/gfdghkjfdh.html) ”正确使用 javascript 或任何客户端技术。请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:14:43.197

> 上面的代码只检查服务器是否连接，它不检查 URL 的最后部分“gfdghkjfdh.html”是否可用。

不，它没有。XHR 向第三方服务器发出 HTTP 请求，没有获得 CORS 标头允许它将从该服务器获得的信息公开给在其他人页面上运行的 JavaScript，然后不向脚本公开状态。

> 有任何方法可以`"http://www.w3schools.com/js/default/gfdghkjfdh.html"`使用 javascript 或任何客户端技术正确检查 URL。

JavaScript？不。

其他客户端技术？也许。

一个签名的 Java 小程序可能能够（如果用户在支持 Java 的平台上运行（因此不是移动的），并且安装了 Java，并且接受了安全警报，并且首先允许在浏览器中使用 Java（这是考虑到它最近遇到的安全问题的数量，这不是一个好主意））。

ActiveX 控件可能能够（如果用户在 Windows 上运行的是足够旧版本的 Internet Explorer，并且接受了安全警报）。

Flash……可能不能。我认为它需要一个 crossdomain.xml 文件来授予它权限。

那么，其他客户端技术呢？也许，但不是以任何实际的方式。

您可以向您自己的服务器发出 XMLHttpRequest，然后让您自己的服务器尝试联系第三方服务器。这会增加您自己服务器上的负载，有时您的服务器与第三方服务器之间的连接将不同于它与客户端之间的连接。

# if-statement - Sparql bound() 不工作

> ID：15933210
> 
> 赞同：2
> 
> 时间：2013-04-10T18:08:25.660
> 
> 标签：if-statement, bind, sparql

我是 Sparql 的新手，我有一个查询要从不同的主题（比如 parent 和 parentG）获取属性。

我试过使用

```
PREFIX ac: <http://ac.com/ns/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX rdf: <htp://www.w3.org/1999/02/22-rdf-syntax-ns#>

CONSTRUCT 
{
  ?item dcterms:isPartOf ?parent .
  ?parent dcterms:isPartOf ?parentG .
  ?item ac:scopedItem ?scopedItem .
}
WHERE 
{
  BIND ( <http://ac.com/content/Test1> as ?item )  .
  ?item dcterms:isPartOf ?parent .
  ?parent dcterms:isPartOf ?parentG .
  OPTIONAL 
  {
    OPTIONAL {?parent ac:htmlAdv ?advert .}
    BIND ( IF (BOUND (?advert), ?parent, ?parentG )  as ?scopedItem  ) .
  }
} 
```

如果`?advert`不受 约束`?parent`，我想将`?parentG`其设置为`?scopedItem`。这是行不通的。我们正在使用 Sparql 1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:14:06.017

您的问题是范围界定之一，SPARQL 是自下而上评估的，因此在您没有放置`BIND`语句`?parent`或不在`?parentG`范围内的地方，因此无论是否`?advert`绑定，您都不会返回任何内容。

您需要`BIND`在查询中将语句移出一级，然后它应该可以正常工作：

```
PREFIX ac: <http://ac.com/ns/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX rdf: <htp://www.w3.org/1999/02/22-rdf-syntax-ns#>

CONSTRUCT 
{
  ?item dcterms:isPartOf ?parent .
  ?parent dcterms:isPartOf ?parentG .
  ?item ac:scopedItem ?scopedItem .
}
WHERE 
{
  BIND ( <http://ac.com/content/Test1> as ?item )  .
  ?item dcterms:isPartOf ?parent .
  ?parent dcterms:isPartOf ?parentG .
  OPTIONAL 
  {
    ?parent ac:htmlAdv ?advert .
  }
  BIND ( IF (BOUND (?advert), ?parent, ?parentG )  as ?scopedItem  ) .
} 
```

请注意，这也使得`OPTIONAL`不需要使用两个子句

# java - Java中的“限制并发”是什么意思？

> ID：15933215
> 
> 赞同：0
> 
> 时间：2013-04-10T18:08:46.120
> 
> 标签：java, concurrency, cloudbees

CloudBees 说免费应用程序可以获得 128M 的 RAM 和“限制并发”。有人可以解释这到底是什么意思吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:18:50.503

这不是来自 Java 页面，但它似乎仍然很好地解释了这个概念。

> “并发控制”的概念，或者更恰当地说，“限制并发”的概念是指线程池中允许在特定时间工作的线程数；在不影响性能的情况下，决定可以同时运行多少个线程是一项策略。

- 从[这个](http://msdn.microsoft.com/en-us/magazine/ff960958.aspx)网站。

这似乎`throttling concurrency`是一种做法，我们一次限制可能的活动线程的数量。与直觉相反，这种做法实际上有助于提高吞吐量。[这个网站](http://www.ibm.com/developerworks/library/j-5things5/)是关于Java的，但我觉得它也没有解释这个概念。

# php - 是否可以使用资产和树枝创建资产的条件路径？

> ID：15933217
> 
> 赞同：3
> 
> 时间：2013-04-10T18:08:51.397
> 
> 标签：php, symfony, twig, assetic

基本上，我想知道以下是否可行：

```
<img src="{{ asset('bundles/acme/images' {% if something is defined %}'-blah{{ someId }}'{% endif %} '.png') }}" /> 
```

据此，[答案](https://stackoverflow.com/a/8286470/399584)可能是否定的，但我想确定一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T19:00:57.207

为什么不将 if 放在`asset`-call 之外，如下所示：

```
<img src="
{%- if something is defined -%}
    {{ asset('bundles/acme/images-blah' ~ someId ~ '.png') }}
{%- else -%}
    {{ asset('bundles/acme/images-blah.png') }}
{%- endif -%}
" /> 
```

# php - 是否可以通过 PHP 访问 REQUEST_FILENAME？

> ID：15933225
> 
> 赞同：6
> 
> 时间：2013-04-10T18:09:14.677
> 
> 标签：php, .htaccess, mod-rewrite

我正在尝试更详细地了解以下 htaccess 规则：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !^/(favicon\.ico|apple-touch-icon.*\.png)$ [NC]
  RewriteRule (.+) index.php?p=$1 [QSA,L]
</IfModule> 
```

具体来说，我试图了解 REQUEST_FILENAME 是如何工作的。我发现有几个资源可以讨论这个问题，从 mod_rewrite 文档到 Stack Overflow 上的答案。但似乎没有人能准确地解决我正在寻找的问题，我该如何仔细查看 REQUEST_FILENAME 变量以查看它的值？

通常，当我想查看 .htaccess 中引用的变量时，我将使用 print_r 查看 $_SERVER 全局变量，以查看这些值是什么服务器：

```
echo "<pre>";
print_r($_SERVER);
echo "</pre>";
die('fin'); 
```

这可以帮助我查看上面的 $_SERVER['REQUEST_URI'] 等值。但似乎 REQUEST_FILENAME 在我当前环境中的任何 PHP $GLOBALS 中都不可用。我确实看到了 SCRIPT_FILENAME 的值，并且有几个消息来源说这两个值是相等的，但不清楚它们是否是替代值，或者如果第一个不存在，则 REQUEST_FILENAME 是否回退到 SCRIPT_FILENAME。

通过稍微更新 htaccess 规则以输出 URL 中的值，我已经能够输出 REQUEST_FILENAME 值，将最后一行更改为：

```
RewriteRule (.+) index.php?p=%{REQUEST_FILENAME} [R=302,QSA,L] 
```

但是为什么这个值在 PHP 的任何地方都不可用呢？有什么我忽略的东西可以帮助我了解这个变量的存储位置以及如何通过 PHP 查看它的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T20:45:34.320

从[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

> **REQUEST_FILENAME**
> 与请求匹配的文件或脚本的完整本地文件系统路径，如果在引用 REQUEST_FILENAME 时服务器已经确定了这一点。否则，例如在虚拟主机上下文中使用时，与 REQUEST_URI 的值相同。根据 AcceptPathInfo 的值，服务器可能只使用了 REQUEST_URI 的一些前导组件来将请求映射到文件。

并从[`$_SERVER`](http://php.net/reserved.variables.server.php)

> *'SCRIPT_FILENAME'*
> 当前执行脚本的绝对路径名。

`REQUEST_URI`如果实际对应于现有文件，这将是相同的（脚本的完整路径） 。

如果没有，`REQUEST_FILENAME`将只是`REQUEST_URI`并且`SCRIPT_FILENAME`将是正在执行的 PHP 脚本的名称。`$_SERVER['REQUEST_URI']`将是`REQUEST_FILENAME`（又名`REQUEST_URI`）。

在您的情况下，`SCRIPT_FILENAME`将始终是`/path/to/index.php`并且`REQUEST_FILENAME`/`REQUEST_URI`将可以通过`$_SERVER['REQUEST_URI']`.

**更新**：

`REQUEST_URI`永远不会是文件名，因为它缺少文档根前缀。当你使用

```
RewriteCond %{REQUEST_URI} !-f 
```

即使请求的 URL 与现有文件匹配，条件也将始终为真。以下`RewriteRule`将始终执行，尽管它应该调用另一个 PHP 脚本或提供 HTML、CSS 或图像文件。

**更新**：

要真正回答这个问题。

> 但是为什么这个值在 PHP 的任何地方都不可用呢？

`REQUEST_FILENAME`在 PHP 中不可用，因为它不在环境或请求的标头中。

您在 PHP 中可以看到的只是一些环境变量或标头中的内容，或者 PHP 可以自行推断的内容。由于 PHP 不会尝试或无法在请求 URI 和某个文件名之间建立连接，因此您无法在任何地方访问它。`REQUEST_FILENAME`毕竟，它可能在文件系统中的任何地方。

但是，您可以自己将其放入环境中

```
RewriteRule (.+) index.php?p=$1 [QSA,L,E=REQUEST_FILENAME:%{REQUEST_FILENAME}] 
```

并在 PHP 中以`$_SERVER['REDIRECT_REQUEST_FILENAME']`.

# mysql - MySQL计算来自多个表的行返回完全相同的数量

> ID：15933227
> 
> 赞同：0
> 
> 时间：2013-04-10T18:09:45.733
> 
> 标签：mysql, sql

我正在使用以下 SQL 语句来处理`COUNT()`来自两个不同表的行。唯一的问题是`payment_count`and`upload_count`结果总是返回相同的值。

如果我只`COUNT()`从`payments`表中计数，那么计数是准确的，只有当我在同一语句中从两个表中计数时，两者的`COUNT()`for 才会变得`COUNT()`与`upload_count`. 希望这是有道理的，我该如何做到这一点，所以计数是个人的？

```
SELECT 
    u.id, 
    u.name,
    COUNT(p.id) as payment_count,
    COUNT(b.id) as upload_count
FROM users as u
    INNER JOIN payments as p
        ON u.id = p.user_id
    LEFT OUTER JOIN orders as o
        ON u.id = o.user_id
            AND o.order_status = 1
    LEFT OUTER JOIN uploads as b
        ON u.id = b.user_id
WHERE u.package != 1
AND o.id IS NULL
GROUP BY u.id
HAVING COUNT(p.id) >= 6
ORDER BY RAND()
LIMIT 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:14:04.203

COUNT() 将计算它遇到的每个非 NULL 值。它不关心值是否不同。COUNT(DISTINCT fieldname) 计算不同的值。如果要计算唯一值，请使用 COUNT DISTINCT。

# javascript - 在加载角度之前，防止绑定和指令在瞬间可见的正确方法是什么？

> ID：15933230
> 
> 赞同：1
> 
> 时间：2013-04-10T18:09:58.973
> 
> 标签：javascript, angularjs

当我的应用程序加载时，角度指令和绑定会在 Angular 使用它们之前短暂可见。这会分散注意力并且看起来不专业，我担心它可能会给我的访客留下不愉快的印象。

除了将 Angular 加载脚本放在头部并阻止页面其余部分的呈现的明显解决方案之外，避免这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:12:59.280

您应该使用 ngBind 或 ngCloak。

见[ngBind API](http://docs.angularjs.org/api/ng.directive%3angBind) / [ngCloak API](http://docs.angularjs.org/api/ng.directive%3angCloak)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:12:33.373

请使用 ngCloak 指令

[http://docs.angularjs.org/api/ng.directive:ngCloak](http://docs.angularjs.org/api/ng.directive:ngCloak)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:13:22.640

[http://docs.angularjs.org/api/ng.directive:ngCloak](http://docs.angularjs.org/api/ng.directive:ngCloak)

试试 ng-cloak 指令。文档状态仅适用于这种情况。我已经使用它而没有在头部加载角度。

# python - 即使有未处理的异常，有没有办法强制 Scrapy 进入 parse 方法？

> ID：15933231
> 
> 赞同：2
> 
> 时间：2013-04-10T18:10:01.907
> 
> 标签：python, queue, multiprocessing, twisted, scrapy

我有一个使用 Scrapy 的相当复杂的多处理程序。它在大约 95% 的情况下都能正常工作，但偶尔我会在 Twisted 遇到导致 DNSLookupError/TCPTimedOutError 的不良站点时收到未处理的异常。

这不是问题，但不幸的是，这些错误导致 Scrapy 跳过 BaseSpider 解析方法，我在其中设置了一个队列来处理响应。由于它跳过了队列，我无法确定哪些 URL 被跳过了。

有没有办法始终确保每个 Scrapy 请求都以该解析方法结束？我所需要的只是一种访问那些失败的响应对象并将它们放入队列的方法。

这是我的蜘蛛代码示例：

```
class SeerSpider(BaseSpider):
    """Scrapy-based html retrieval system."""

    name = "SeerSpider"

    def __init__(self, spider_queue, url_list):
        self.queue = spider_queue
        self.allowed_domains = []
        self.start_urls = []
        for url in url_list:
            self.allowed_domains.append(str(urlparse(url).netloc))
            self.start_urls.append(url)
        super(SeerSpider, self).__init__()

    def parse(self, response):
        """Extracts information from each website in start_urls."""
        self.queue.put(response) 
```

如您所见，它非常基础。

稍后，队列处理如下：

```
while True:
    response = spider_queue.get()
    ### DO STUFF HERE ###
    results_queue.put(result) 
```

接着...

```
while True:
    try:
        result = results_queue.get(True, 60)
    except:
        print 'HALP', sys.exc_info()
        result = ['ERROR']
    self.results.append(result)
    counter -= 1
    if counter <= 0 or self.exit == True:
        for process in process_list:
            process.terminate()
        break 
```

我添加了队列超时作为临时解决方案，因此它不会在等待队列中不存在的项目时无限期挂起。如果我能保证某种响应对象将进入 start_urls 列表中每个 URL 的队列，它将解决我所有的问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:45:36.740

我想通了，中间件是正确的轨道，但它是下载器中间件而不是scrapy中间件。在我用 process_exception 方法实现了一个下载器中间件之后，我设法让它工作了。

代码在这里：

```
class SpiderFailSignal(object):

    def process_exception(self, request, exception, spider):
        response = Response(request.url, status=666, body='error')
        spider.queue.put(response)
        return response 
```

然后我添加了

```
settings.overrides['DOWNLOADER_MIDDLEWARES'] = {'seerspider.SpiderFailSignal': 901} 
```

它奏效了。

虽然，一旦scrapy spider_idle 信号触发，我也最终向队列添加了一个虚拟值，然后创建了一个if语句以在遇到该项目时退出队列。所以这两个解决方案一起=全部固定。

# python - Python连接到django活塞

> ID：15933238
> 
> 赞同：2
> 
> 时间：2013-04-10T18:10:13.703
> 
> 标签：python, django-piston

我有一个 django 活塞，它生成一个图像并将其返回给连接到 url 的人，我很难使用 Python 2.6 连接到该地址。这是我目前的代码：

```
#!/usr/bin/env python
import httplib
import urllib

params = urllib.urlencode({})

conn = httplib.HTTPSConnection("192.168.1.112/dj/api/image-gen")
conn.request("GET", "/")

response = conn.getresponse()

print response.status, response.reason
data = response.read()
print data 
```

这是我在引用结束时遇到的错误：

在 getaddrinfo(host, port, 0, SOCK_STREAM) 中的 res 的 create_connection 中：socket.gaierror: [Errno 8] nodename nor servname provided, or not known

当我尝试连接到像“google.com”这样的另一个网络服务时，代码工作正常，所以我知道问题出在我的网址上，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:20:09.650

我怀疑你需要改变...

```
conn = httplib.HTTPSConnection("192.168.1.112/dj/api/image-gen")
conn.request("GET", "/") 
```

...至...

```
conn = httplib.HTTPSConnection("192.168.1.112")
conn.request("GET", "/dj/api/image-gen") 
```

...尽管您可能很容易使用...

```
data = urllib.urlopen('https://192.168.1.112/dj/api/image-gen').read() 
```

# wpf - MVVM 公司 -> 复选框中的类别关联

> ID：15933242
> 
> 赞同：0
> 
> 时间：2013-04-10T18:10:20.737
> 
> 标签：wpf, silverlight, data-binding, mvvm, binding

我有一个使用 MVVM 的 Silverlight 应用程序。

我的应用程序有“公司”，每个公司可以关联到多个“公司类别”

因此，在我的 ViewModel 中，一家公司拥有：

```
public ObservableCollection<CompanyCategories> Categories {get;set;} 
```

类别列表可在应用程序的另一部分进行配置，因此它是动态的。

**我想要做什么：** 在我的 CompanyView 中，我想将类别与我的公司相关联。

因此，每个可用的类别都应该在 CheckListBox 中，并且只应检查与我的公司相关联的类别。当用户从列表中选中/取消选中一个类别时，我想从 Company.Categories[] 中添加/删除它

如何使用 Bindings、DataContexts、ItemsSource 做到这一点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:54:43.727

据我所知；您的 CheckBoxList 的 ItemsSource 属性应绑定到所有可能类别的列表。复选框列表中每个项目的 IsChecked 属性应绑定到返回函数结果的属性，该函数结果检查类别是否在公司的类别集合中。Categories ObservableCollection 的 CollectionChangedEvent 应该触发上述返回函数结果的属性的 PropertyChanged 事件。

这足以让你开始吗？

# iphone - UIManagedDocuments 什么时候关闭？

> ID：15933244
> 
> 赞同：5
> 
> 时间：2013-04-10T18:10:33.180
> 
> 标签：iphone, ios, objective-c, core-data, uimanageddocument

我正在使用这个博客： http: [//www.adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html](http://www.adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html)为单例创建单`UIManagedDocument`例。这是相关的代码`BetterDatabase`

```
//In BetterDatabase

typedef void (^OnDocumentReady) (UIManagedDocument *document);

- (void)performWithDocument:(OnDocumentReady)onDocumentReady
{
    void (^OnDocumentDidLoad)(BOOL) = ^(BOOL success) {
        onDocumentReady(self.document);
    };

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.document.fileURL path]]) {
        [self.document saveToURL:self.document.fileURL
                forSaveOperation:UIDocumentSaveForCreating
               completionHandler:OnDocumentDidLoad];
    } else if (self.document.documentState == UIDocumentStateClosed) {
        [self.document openWithCompletionHandler:OnDocumentDidLoad];
    } else if (self.document.documentState == UIDocumentStateNormal) {
        OnDocumentDidLoad(YES);
    }
}

//In other class
[[BetterDatabase sharedDocumentHandler] performWithDocument:^(UIManagedDocument * document) {
        //Do stuff 1
        //Do stuff 2
}]; 
```

**我的问题：** UIManagedDocument 什么时候可以自动关闭？即，**文档是否有可能在第 1 行和第 2 行之间关闭（由 OS/SDK）？如果用户最小化 iPhone 应用程序然后再次打开它会怎样？会`UIManagedDocument`被关闭吗？**

另一种表达方式是：**当我仍然有一个强指针指向它时，它****会永远关闭吗？`UIManagedDocument`**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:47:10.780

对于您的第一个问题，何时可以自动关闭 UIManagedDocument？有一个简单的答案是“当 iOS 认为合适时”。换句话说，您无法控制何时发生这种情况（除非您自己关闭它，但这不是重点）。但是您仍然可以应对这种情况。

特别是，在 AppDelegate 文件中，您可能希望包含一行来将您的文档保存在

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

（如果您使用 UIManagedDoc，则不需要）

现在，您的应用程序还应该监视 UIManagedDocument 状态更改，如此处所述[，](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/ManageDocumentLifeCycle/ManageDocumentLifeCycle.html#//apple_ref/doc/uid/TP40011149-CH4-SW1) “添加 UIDocumentStateChangedNotification 通知的观察者”行

对于你的第二个问题，答案是肯定的。例如：如果你有一个长时间的后台操作，并且用户关闭了他/她的手机，那么文档将被关闭。由于您使用的是 UIManagedDocument，因此保存是自动完成的，因此您不必担心它会进入不一致的状态。

如果应用程序进入后台状态并且 stuff1 和 stuff2 之间的内容对您的应用程序至关重要 - 例如填充新数据 - 那么您应该考虑将最关键的部分放入后台任务中。

对于您的第三个问题，从以前的状态恢复，这真的取决于应用程序。Apple 已发布大量文档，[请点击此处](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/StatePreservation/StatePreservation.html)。这必须与对 UIManagedDocument 状态更改（包括冲突）的正确响应结合使用。

*对于您的最后一个问题，正常*情况下的答案是“否”，否则为“是” - 内存不足，手机关机 - 即使您的应用程序在前台。

因此，从本质上讲，您无法控制应用程序何时终止（电池耗尽，操作系统关闭？），但您仍然可以以允许您保留数据的方式响应 UIManagedDocument 更改或应用程序生命周期更改正直。

编辑：谢谢，不认为它完全回答了你的问题。以防万一，您在原始问题中提到的帖子在阐述重要内容方面做得非常好。特别是，我几乎一字不差地接受了它，还添加了我自己的通知来告诉视图何时以及如何刷新。依赖 Apple 的 DataSource 机制并不总是很好，因为它有时会导致难以解决的竞争条件（例如，如果您在视图不可见时更新视图......）。

所以在这两种方法中

```
- (void)objectsDidChange:(NSNotification *)notification
{
#ifdef DEBUG
    NSLog(@"NSManagedObjects did change.");
#endif
}

- (void)contextDidSave:(NSNotification *)notification
{
#ifdef DEBUG
    NSLog(@"NSManagedContext did save.");
#endif
} 
```

通知中的用户信息字段告诉您在文档中做了什么，例如：

```
userInfo = {
    inserted = "{<the Core data fields inserted>}";
    updated = "{<code data fields updated>}";
}} 
```

然后根据我认为合适的方式更新视图。例如，如果您从远程服务器接收新数据，您可以计算插入了多少新字段，并更新徽章计数。或发送通知以便仅更新一个视图等。

使用 UIManagedDoc 处理跨视图的数据一致性并不难，但如何在不产生副作用的情况下更新数据却非常棘手。

祝你好运 ！

# matlab - MATLAB 中的 createTasks 和 createJob 命令在使用 nohup 时不起作用？

> ID：15933245
> 
> 赞同：0
> 
> 时间：2013-04-10T18:10:36.550
> 
> 标签：matlab, nohup

我使用 nohup 命令在远程机器上运行我的 matlab 程序。由于我必须通过更改一些输入参数来运行相同的程序，我决定尝试使用并行计算工具箱功能。我有以下 matlab 脚本，比如 datafile.m：

```
 % This is a matlab script titled datefile.m
      a_array = [0;1;2;3];
      jm = findResource('scheduler', 'Configuration', 'local');
      job_ss = createJob(jm, 'Name', 'unsteady_slab_porous');

      paths = {blah blah}

      set(job_ss, 'PathDependencies', paths);

      for i=1:length(a_array)
      createTask(job_ss, @my_function, 0, {a_array(i)});
      end       

      submit(job_ss) 
```

当我在 matlab 终端上运行 datafile.m 时，它运行良好。但是，如果我尝试使用 nohup 命令执行脚本，则作业失败。这就是我所做的：

```
 nohup matlab  -nodesktop <nohup_script.m &> nohup_script.log & 
```

nohup_script.m 只是调用 datafile.m

我想知道是否根本无法将 nohup 与 createTask 和 createJob 命令一起使用，还是我需要调整我的 datafile.m 才能使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:43:34.703

您需要修改您`nohup_script.m`的阻止直到`job_ss`完成。换句话说，只需添加

```
wait(job_ss) 
```

到最后。否则，当调用 MATLAB 客户端退出时，本地调度程序会终止所有正在运行的作业 - 根据此页面上的最后一句话[http://www.mathworks.co.uk/help/distcomp/use-a-local-scheduler.html](http://www.mathworks.co.uk/help/distcomp/use-a-local-scheduler.html)

# android - Android：处理图像缩放和质量

> ID：15933248
> 
> 赞同：0
> 
> 时间：2013-04-10T18:10:51.133
> 
> 标签：android, image, graphics, icons, imageview

我愿意接受 480x800 屏幕假设的折衷方案。我的应用有一个 220x40 的标题图片。我的桌面显示器上的文字清晰锐利。

我看过的教程展示了通过使用自动缩放器（如 Eclipse 的图标集向导）并定义启动器图标集或操作按钮集等来将图像添加到 Android 应用程序。此工具可自动缩放 hdpi、ldpi、mdpi、xhdpi、等等

当我创建 ImageView 并将其放置在我的应用程序中时，它看起来不再像易于阅读的大小合适的文本，而现在在我的模拟器中显得很小。当我尝试通过拉伸使其变大时，图像质量显示为垃圾。这表明缩放过程显着降低了图像的分辨率。

这个的标准流程是什么？由于 icon-wizard + fill_width + fill_height 会导致丑陋的结果，如何将图像添加到他们的应用程序并使其保持质量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:31:07.160

你运行的模拟器分辨率低吗？选择分辨率更高的模拟器并将图像放在 hdpi 或 xhdpi 文件夹中...

# perl - 你如何在 Perl 中引用列表？

> ID：15933254
> 
> 赞同：3
> 
> 时间：2013-04-10T18:11:07.817
> 
> 标签：perl, list

我读到了`scalars` `arrays`和`list`。我不确定 是什么意思`list`。例如，`(5, apple, $x, 3.14)`is a `list`，但实际引用列表的变量是什么？

列表只是一种初始化数组的方法还是已知的数据结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:02:09.587

Perl中有三种不同的**基本**数据结构。

*   哈希：这些是键/值对。
*   数组：这些是有序值。
*   标量：这是一个单一的值。

哈希：

```
my %employee = (
    "A001" => "Albert",
    "A002" => "Bob",
    "B003" => "Gary",
);

print "$employee{A001}\n";   #Prints "Albert"
print "$employee{B003}\n";   #Prints "Gary" 
```

数组：

```
my @fruit = ("Apple", "Orange", "Banana");
print "$fruit[0]\n";   #Prints "Apple"
print "$fruit[2]\n";   #Prints "Banana" 
```

标量：

```
my $age = "None of your business";
print "You're $age years old\n";  #Prints "You're None of your business years old 
```

列表只是项目的列表*。*例如，`@fruit`是一个**数组**。但是，我将数组设置为等于包含水果名称的**列表。**

从技术上讲，列表是不可更改的，而数组是可以修改的数据结构。

```
for my $color ("red", "green", "blue") {
    print "$color is an item from my list\n";
} 
```

在上面，我的循环通过一个**列表**`for`前进：

 **```
my @list = ("red", "green", "blue");
for my $color (@list) {
   print "$color is a member of my array\n";
} 
```

上面的代码几乎相同，但现在我的`for`循环通过一个数组前进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:37:28.013

> 你如何在 Perl 中引用列表？

与您对其他任何事情所做的相同 - 使用引用运算符`\`。请参阅[perlreftut](http://p3rl.org/perlreftut)和[perlref](http://p3rl.org/perlref)。

```
my $x;
\(5, 'apple', $x, 3.14) 
```

表达式返回

```
(
    \ 5,
    \ "apple",
    \ undef,
    \ 3.14
) 
```

这不是那么有用。

> 例如，(5, apple, $x, 3.14) 是一个列表，但实际引用该列表的变量是什么？

空无一人。它是一个匿名值。

并非每个值都需要一个变量来保存它——文字也是程序的重要组成部分。

> 列表只是一种初始化数组的方法还是已知的数据结构？

阅读[Perl 数组与列表](https://stackoverflow.com/a/6024268)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:44:43.527

在一个非常基本的层面上，我认为了解操作员是什么是有帮助的。

这可以通过说任何不是值的东西都是运算符来概括。

什么是列表运算符？

```
, 
```

列表运算符如何工作？

列表运算符计算左边的值，然后计算右边的值。如果自身右侧的值也有列表运算符，则运算符的关联性意味着评估将继续进行，直到不再出现列表运算符或行尾。

```
#!usr/bin/perl
use warnings;
use strict;

my @namedlist = 1, my @namedlist2 = 2;

print @namedlist , @namedlist2;

12 
```

了解列表运算符后，您就可以处理问题的真正问题：

语境

例如，打印提供其参数的列表上下文。它需要一个列表，而不是一个奇异值，因此它提供了列表上下文。

现在我们知道`[]`, 和`{}`运算符分别是对匿名数组构造函数的引用和对匿名哈希构造函数的引用，但我想很少有人意识到在这之前只有列表构造函数运算符。列表构造器运算符是

```
() 
```

为什么这很重要？好吧，因为列表运算符`,`不知道上下文。它只是评估和丢弃，评估和丢弃。

通过使用列表构造函数包装列表运算符来提供上下文`()`，现在列表构造函数捕获列表运算符的计算，以便它可以返回一个列表。

当然，您将使用赋值运算符`=`将列表构造函数返回的新构造的列表分配给`()`命名的列表持有者。例如数组或哈希。

```
my @list = (one, 1, two, 2);
my %associatedlist = (three, 3, four, 4); 
```

因此，列表是由列表构造函数捕获的一系列评估值，然后通常分配给命名列表持有者。

这通过对列表构造函数`[]`和`{}`. 对列表构造函数的两个引用之间存在差异，突出了它们作为运算符的用途，可能是从早期使用类似运算符的情况下降而来的？

对列表构造函数的引用必须通过使用对匿名数组构造函数的`[]`引用或对匿名哈希构造函数的引用来明确声明`{}`。

列表构造`()`器正在构造一个值列表，然后通常将其分配给命名数组或命名关联数组。尽管赋值运算符`=`不区分其左值和右值，但它只是尝试将右值分配给左值，如果上下文不兼容或列表大小的长度不同，它会相应地继续补充您对 STDOUT 的手工。

```
useless use of constant in void context at roughly 1 foot from keyboard.pl 
```**

# php - 我在哪里放置事件侦听器和处理程序？

> ID：15933255
> 
> 赞同：15
> 
> 时间：2013-04-10T18:11:07.987
> 
> 标签：php, events, laravel, laravel-4

我想知道将 Laravel 事件侦听器和处理程序放在哪里。有人告诉我，我可以把它们放在任何地方。这是我到目前为止所尝试的。

```
# listeners/log.php
<?php
Event::listen('log.create', 'LogHandler@create');

# handlers/LogHandler.php
<?php
class LogHandler {
        public function create(){
           $character = new Character;
           $character->name = "test";
           $character->save();
    }
}

# controllers/MainController.php
    public function test(){
        Event::fire('log.create');
        return "fired";
     }

# start/global.php
ClassLoader::addDirectories(array(
    app_path().'/commands',
    app_path().'/controllers',
    app_path().'/models',
    app_path().'/database/seeds',
    app_path().'/libraries',
    app_path().'/listeners',
    app_path().'/handlers',
)); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T22:56:28.710

我假设你问这个是因为他们没有工作，而不是确认你已经开始工作了。

虽然你可以将事件监听器放在任何地方是正确的，但你需要确保它们实际上会被包含 - Laravel 不会搜索你的源代码来寻找它们。

我最喜欢包含此类文件的位置是`start/global.php`. 如果您查看文件的底部，您可以看到包含过滤器的位置，您可以执行相同的操作来包含您的侦听器。将它们全部保存在一个侦听器文件中是最干净的，就像您的所有路由都在一个路由文件中一样...

```
# start/global.php
require app_path().'/filters.php'; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-30T20:34:49.123

我*个人的观点*是，将事件侦听器集中在一个地方通常是不好的做法。当然，今天您只需要 2 或 3 个，但范围可以随时添加到任何项目中，可能会添加更多。

相反，我通常在该目录下创建一个目录`app`（例如`app/CompanyName`）并将我所有的应用程序特定代码放在那里。为了告诉 Laravel 如何找到你的文件，你可以像这样更新你的 composer.json：

```
"autoload": {
    "classmap": [
        // ...
    ],
    "psr-4": {
        "CompanyName\\" : "app/"
    },
} 
```

之后，一定要运行`composer dump-autoload`。

现在，您可以在自定义应用程序目录中创建命名空间目录，例如`app/CompanyName/Events/`，并能够将事件侦听器分成有意义的组，并将它们放在服务提供者中，例如：

```
<?php namespace CompanyName/Events;
// File: app/CompanyName/Events/LogEventsProvider.php

use Illuminate\Support\ServiceProvider;

class LogEventsProvider extends ServiceProvider
{
    public function register()
    {
        Event::listen('log.create', 'CompanyName/Events/LogEventsProvider@create');
    }

    public function create()
    { 
        // ...
    }
} 
```

现在您可以将此服务提供者添加到您的`app/config/app.php`并且一切顺利，并将所有相关的事件侦听器放在一个文件中，并将所有事件侦听器放在一个目录中，但要分开，以便如果其中一个出现问题他们您不必搜索所有这些以找到错误发生的位置。

注意：我并没有把它作为一种练习，而是在途中的某个地方发现的。然而，我不记得它在哪里。

# sql - 打开一个 sql 文件并在 PostgreSQL 中运行它时路径有问题，因为文件夹名称中有空格

> ID：15933256
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:11:08.290
> 
> 标签：sql, postgresql, cmd

我正在使用命令行运行以下脚本：

```
C:\Progra~1\pgAdmin III\1.16\psql -d [tablename] -h [servername] -p 5432 -U postgres -f C:\test\query.sql 
```

但是问题`pgAdmin III`在于我要在其中运行查询的文件夹，因为它的名称中有一个空格。当我将实际文件夹名称更改为`pgAdminIII`并更新脚本时，它将很好地运行脚本。我想知道如何在不实际修改文件夹名称的情况下运行此脚本（即，将其保留为 pgAdmin III）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:19:50.767

在带有空格的路径周围放置双引号：

```
"C:\Progra~1\pgAdmin III\1.16\psql" -d [tablename] ... 
```

# vb.net - 将文本转换/更新为另一个字符串（日期）

> ID：15933258
> 
> 赞同：0
> 
> 时间：2013-04-10T18:11:15.553
> 
> 标签：vb.net

我需要更改日期格式的字符串格式，如下所示：

```
Wednesday, 10 April, 2013 
```

进入

```
10 April 2013 
```

实现这一目标的最佳方法是什么？，即删除日期和逗号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:13:33.233

```
myDate.ToString("dd MMMM yyyy") 
```

这将允许您根据需要自定义格式。

```
myDate.ToString("dd-MMMM/yyyy") 
```

.net 中也有一些转换，例如

```
.ToShortDateString()

.ToLongDateString() 
```

如果输入是字符串，则必须转换为日期，然后解析回格式化字符串

```
Date.Parse("Wednesday, 10 April, 2013").ToString("dd-MMMM/yyyy") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:18:39.367

If the input value is a string then you could to convert to a date and then back to your required format

```
Dim provider As CultureInfo = CultureInfo.InvariantCulture
Dim dateText = "Wednesday, 10 April, 2013"
Dim dt = DateTime.ParseExact(dateText, "dddd, dd MMMM, yyyy", provider)
Console.WriteLine(dt.ToString("dd MMMM yyyy")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:13:25.723

尝试这个。

```
Date.Today.ToLongDateString 
```

# java - SQLite 数据库更新

> ID：15933260
> 
> 赞同：1
> 
> 时间：2013-04-10T18:11:19.977
> 
> 标签：java, android, database, sqlite

## 问题描述

我有 SQLite 数据库，其中我保留了两个表，在第一个表中，`Companies`我保留了公司`ID`，该公司对于该公司来说是独一无二的`Name`，`Websites`并且`Emails`. 每家公司都可以有多个地址，因此我创建了第二个表`Addresses`并保留了在这种情况下不是唯一的公司 ID 和其他信息。

### 例如：

如果在`Companies`表中我有这样的记录

> 7785413 MyComp [http://www.mycomp.com](http://www.mycomp.com) mycomp@email.com

在`Addresses`表中我可以有这样的记录

> 7785413 0 地址1 +64841518549 +9985212848
> 
> 7785413 1 地址2 +64841542359 +9985212848

由于我的第二个表中没有唯一列，我想知道如何更新记录？在第一种情况下，我打电话

`database.insertOrThrow(DATABASE_TABLE_NAME, null, values);`

函数，如果我的 ID 相同，函数会引发异常，我会捕获它并更新记录。我不能在第二个表中做同样的事情，因为没有唯一的列并且函数不会抛出异常。这是最好的方法吗？

## 表

`CREATE TABLE Companies (ID TEXT UNIQUE, Name TEXT, Websites TEXT, Emails TEXT)`

`CREATE TABLE Addresses (ID TEXT, Position NUMERIC, Address TEXT, Tel TEXT, Mob TEXT)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:19:59.100

您需要指定主键作为创建表的约束。

`CREATE TABLE Addresses(ID TEXT, Position NUMERIC, Address TEXT, Tel TEXT, Mob TEXT, PRIMARY KEY (ID , Position ));`

# wpf - 有没有办法检查什么 Style 正在为控件设置属性值？

> ID：15933262
> 
> 赞同：2
> 
> 时间：2013-04-10T18:11:28.027
> 
> 标签：wpf, telerik, styles, rad-controls, radcombobox

只是想知道是否有任何工具可以查看 Style 正在为控件设置属性值。在我们的应用程序中，所有 RadComboBox 的`IsEditable`属性都设置为 true。我们正在使用的一些 DLL 导致了这种情况。我猜有些`Style`没有`Key`设置这个的 RadComboBox 。

在 WPF Inspector 中，我可以看到 App 中的每个 RadComboBox 控件都`IsEditable`设置为`True`. 在“资源”部分下，显示了一堆资源，其中一些设置在我们项目中包含的一些外部 DLL 中。

我想知道是什么特定的样式导致了这种情况，这样我们就可以缩小问题的范围。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T20:36:24.760

我通常使用[Snoop](https://github.com/snoopwpf/snoopwpf)检查谁在 Telerik 控件上设置了属性。

使用 Control + 鼠标悬停固定元素。然后在可视化树中选择确切的元素，选择可疑的 Style 属性并使用 Delve 按钮查看 Style 属性的属性，即查找 x:Key。

当您找到密钥（通常是 RadSometingStyle 或 Template）时，打开 Telerik 控件的安装目录，浏览到 Themes 文件夹并搜索那里的所有 xaml 文件。您会在那里找到样式定义。祝你好运... ：）

# javascript - wp_enqueue_script 不显示脚本

> ID：15933263
> 
> 赞同：0
> 
> 时间：2013-04-10T18:11:29.417
> 
> 标签：javascript, wordpress

这是我第一次将 wp_enqueue_script 用于我试图在 WordPress 网站上设置的 IDX 解决方案。我的文件路径是 child-theme/js/idx.js

我将此代码放在我的functions.php文件中：

```
<?php
function wptuts_scripts_with_jquery()  
{  

    // Register the script like this for a theme:  
    wp_register_script( 'custom-script', get_template_directory_uri() . '/js/idx.js',      array( 'jquery' ) );  

// For either a plugin or a theme, you can then enqueue the script:  
    wp_enqueue_script( 'custom-script' );  
}  
add_action( 'wp_enqueue_scripts', 'wptuts_scripts_with_jquery' );  ?> 
```

以及我的 idx.js 文件中的这段代码：

```
<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.3.2.min.js" type="text/javascript" ></script>
<script src="http://tools.example.com/scripts/postmessage.min.js" type="text/javascript" ></script>
<script type="text/javascript" >
$.createDynamicFrame('http://example.example.com', 'http://example.example.com/26611/Carets/search?parentUrl=' + encodeURIComponent( document.location.href ), 'MapSearch'); 
```

这无济于事。当我将 functions.php 中的 wptuts_scripts_with_jquery() 函数与其他脚本一起使用时，它似乎可以工作，但不能与 idx.js 脚本一起使用。任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:09:35.063

我不知道您为什么要尝试`<script>`在外部资源中包含标签，但这一切都是错误的——它们应该只包含纯 JavaScript（这是浏览器已经期待的）。

您的`idx.js`文件应该只包含这一行：`$.createDynamicFrame(...`

* * *

关于为什么不包含这个错误文件的原因 - 在 Wordpress 中排队脚本时作为参数传递的数组是依赖项列表。我假设既然你试图在你的 JS 文件中包含 jQuery - 那么它之前没有被模板加载过？在这种情况下，**因为您没有将jQuery 加入*队列*- “自定义脚本”没有所有必需的组件，因此它不会被推送到页面上**。

默认情况下，wordpress 已经注册了一个 jQuery 版本——如果为了 CDN 偏好（或向后兼容）你需要使用不同的版本，那么你应该[`wp_deregister_script`](http://codex.wordpress.org/Function_Reference/wp_deregister_script)使用你想要的版本重新排队。否则，您的函数应如下所示：

```
function wptuts_scripts_with_jquery(){
  $path = get_template_directory_uri();
  wp_enqueue_script('jquery');
  wp_enqueue_script('custom-script', "{$path}/js/idx.js", array('jquery'));  
} 
```

由于什么都不存在，`tools.example.com/scripts/postmessage.min.js`所以我将其排除在外。另请注意，您可以在单个语句中*注册*和*入队。*[`wp_enqueue_script`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

# mercurial - Mercurial：你怎么能有相同的父提交并合并留下一个头？

> ID：15933265
> 
> 赞同：1
> 
> 时间：2013-04-10T18:11:38.940
> 
> 标签：mercurial

在下图中，我发现了 Mozilla 的 mercurial 存储库图，其中出现了我认为不可能的情况。他们有两个提交具有相同的父级，其中一个是合并。我一直想这样做，但找不到答案。

```
@ merge pull request from foo polish text
|\
| o bug 1 - add text ...
|/
o merge pull request from bar bug 2 
```

他们是如何做到这一点的？通常，当您将该添加中的更改拉到头部时，如果您尝试合并，您将得到“没有可合并的内容”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:02:32.913

实现此目的的一种方法是使用 Mercurials 内置的“调试”命令。它们实际上是你永远不需要使用的命令，除非你知道，调试 Mercurial。理论上使用它们可能会破坏您的存储库，因此如果您确实需要，请使用克隆。

```
$ hg help --debug
...
 debugsetparents
           manually set the parents of the current working directory 
```

如您所见，此命令的作用是允许我们手动设置工作目录的父级 - 使用它我们可以伪造合并。

因此，有了这些知识，并在一定程度上谨慎，我们可以做到：

```
$ hg log --graph
  @  1[tip]  Change by A.N.Other
  |
  o  0  Local Change
$ hg debugsetparents 0 1
$ hg log --graph
  @  1[tip]  Change by A.N.Other
  |
  @  0  Local Change
$ hg commit -m "Merged"
$ hg log --graph
  @  2[tip] Merged
  |\
  | o 1  Change by A.N.Other
  |/
  o 0  Local Change 
```

这不是我通常建议的事情，但它可以让您说明您正在从“另一个分支”中提取一些更改，而该分支实际上是您更改的尖端，我猜这是目标。

另外，请注意下面 shambulator 的评论 - 为了将更改包含在 中`1`，您需要在执行 时将其作为您的工作目录`debugsetparents`，否则您将丢失这些更改。当然，除非您的计划是放弃这些更改，在这种情况下，您应该`update`更改集`0`，然后伪造合并。

# android - 等待 setContentView() 方法

> ID：15933266
> 
> 赞同：0
> 
> 时间：2013-04-10T18:11:45.963
> 
> 标签：android, android-layout

我在调用后获取有关视图的信息时遇到问题`setContentView()`。单击按钮后，我正在更改活动的布局。这是我的代码示例。

```
public void onClickButton1(View v) {
    setContentView(R.layout.activity_main);
    setScreen(); 
} 
```

但是在执行`setScreen()`方法期间，布局仍然没有渲染，所以我不能调用`getWidth()`布局中的一些视图（分别可以，但我总是得到 0）。我怎么能等到`setContentView()`完成？请注意，使用这个：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    setScreen();
} 
```

对我来说还不够。我需要根据活动周期独立更改布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:14:11.007

没有简单的方法可以`setContentView()`用来获得您想要的结果。您要么需要完全删除所有视图，然后扩展新布局，使用 a`ViewFlipper`在不同视图之间切换，或者，恕我直言，这是最好的方法，重新设计您的应用程序以使用`Fragments`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:14:27.927

您需要将 ViewTreeObserver 附加到您的布局：

```
 setContentView(R.layout.yourLayoutName);
    View yourLayout = findViewById(R.id.ID_OF_YOUR_LAYOUT);
    ViewTreeObserver vto = yourLayout.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {

            //Do your work
            vto.removeOnGlobalLayoutListener(this);
        }
    }); 
```

# jquery - 每 5 秒更改一次图像 - 但来自服务器的图像

> ID：15933268
> 
> 赞同：0
> 
> 时间：2013-04-10T18:11:59.883
> 
> 标签：jquery, python, html, django

我试图每七秒更改一次用户。为此，我需要从服务器加载用户的所有信息。我怎么能用javascript做到这一点？什么是有效的方法？

我想到的是，我每七秒向服务器发送一个 http 请求，请求使用 ajax 获取用户数据。这是有效的方法吗？

[http://doni.sites.djangoeurope.com/](http://doni.sites.djangoeurope.com/)这是我的网站，底部有 5 个用户。我希望他们在每七秒内更改为另一个用户。

请帮我。我正在使用服务器端 django，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:14:13.443

最有效的方法是使用[websockets](http://en.wikipedia.org/wiki/WebSocket)，你应该记录它们。

唯一的问题是它们并不总是[得到浏览器的支持](http://caniuse.com/#feat=websockets)

您还可以执行以下操作：

```
setInterval(function(){
//launch my ajax every 5 seconds
},5000); 
```

但它不建议你这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:18:13.487

A simple logic would be to use `setInterval` function. Lets us assume that I have to change the background of a webpage after every 5 seconds. You could use the below code to achieve this:

```
<script type="text/javascript">
        function changebackground() {
            var colors = ["#0099cc","#c0c0c0","#587b2e",
"#990000","#000000","#1C8200","#987baa","#464646",
"#AA8971","#1987FC","#99081E"];

            setInterval(function() {
                var bodybgarrayno = Math.floor(Math.random() * colors.length);
                var selectedcolor = colors[bodybgarrayno];
                document.body.style.background = selectedcolor;
            }, 3000);
        }
        </script> 
```

You could replicate the above functionality for your requirements.

**[DEMO](http://jsfiddle.net/refhat/gJWFR/1/)**

# python - Python - 返回每个键的第一个值

> ID：15933270
> 
> 赞同：1
> 
> 时间：2013-04-10T18:12:03.630
> 
> 标签：python, dictionary, key, return

有人可以帮助指出一种检索默认字典/字典中每个键的第一个值的方法吗？

例如，我有这个不太优雅的解决方案：

```
d = {'4089e04a': ['24.0', '24.0', '24.0', '23.93', '23.93
', '23.93'], '408b2e00': ['20.91', '33.33'], '408b2e0c': ['44.44']}

print d.values()[0][0]
print d.values()[1][0]
print d.values()[2][0] 
```

它确实有效 - 但有没有更好的方法让我不仅限于返回 3 个值？我无法弄清楚如何在单独指定每个键的情况下让它工作......

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T18:14:07.333

尝试这个

```
>>> d = {'4089e04a': ['24.0', '24.0', '24.0', '23.93', '23.93',\
'23.93'], '408b2e00': ['20.91', '33.33'], '408b2e0c': ['44.44']}
>>> [item[0] for item in d.values()]
['24.0', '20.91', '44.44'] 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:13:45.657

`d.values()`返回一个`list`（py 2x）或`views`（py3x），您可以遍历它的每个项目并简单地打印`item[0]`

```
In [165]: d = {'4089e04a': ['24.0', '24.0', '24.0', '23.93', '23.93', '23.93'], '408b2e00': ['20.91', '33.33'], '408b2e0c': ['44.44']}

In [167]: for item in d.values():
   .....:     print item[0]
   .....:     
24.0
20.91
44.44 
```

# python - python复杂度计算

> ID：15933284
> 
> 赞同：2
> 
> 时间：2013-04-10T18:12:44.777
> 
> 标签：python, complexity-theory, big-o

我有以下代码，我必须计算“Big-O”：

```
def f3(lst):
    i = len(lst)
    while i>0:
        for j in range(i):
            for k in range(j, 10**5):
                print(i)
        i -= 2 
```

假设`lst`是一个长度为 n 的列表，操作 take `O(1)`，这就是我得出的结论：第二个`for`是一个常数，因为它每次迭代到 10**5 ，所以我们可以“忽略”它（就像`O(1)`）。

while 运行 n 次，第一个 for 循环运行 n/2 次，所以一般来说复杂度应该是`O(n^2)`.

那是对的吗？我的朋友认为是`O(n^4)`。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:10:03.613

答案不是 O(n^3) 吗？因为内部循环仍然需要运行时间来检查 j 从某个地方开始的线性函数的条件，因此 j 乘 i 乘 n 的总和是 O(n^3) ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:45:55.473

您已正确确定 while 循环是迭代`n/2`次数。其中包含的外部循环在后续迭代`for`中执行`j = 1, 2, ... i`，其中`i`设置为`len(lst)`, `len(lst) - 2`, ...。所以，外循环是针对, , ...,执行的。总的来说，这是外循环的迭代。虽然内部循环的执行次数不是恒定的，但它最多迭代，这*是*恒定的。因此，是此函数运行时的正确上限。`1``while``for``j = 1, 2, ..., len(lst)``j = 1, 2, ..., len(lst) - 2``j = 1``O(n^2)``for``for``10**5`*`O(n^2)`*

 ** * *

这里有一个稍微不同的解释。我希望您同意以下代码在计算时间方面与您的代码等效：

```
def f3_simple(n):
    i = n                         
    condition = i>0               
    while condition:              
        r1 = range(i)             
        for j in r1:              
            r2 = range(j, 10**5)  
            for k in r2:          
                print(i)          
        i -= 2                    
        condition = i>0 
```

这是相同的代码，带有注释：

```
def f3_simple(n):
    i = n                         # "length": O(1)
    condition = i>0               # comparison: O(1)
    while condition:              # executed O(n) times per function call
        r1 = range(i)               # range(i): O(i)
        for j in r1:                # executed O(n) times per WHILE iteration
            r2 = range(j, 10**5)      # range(j, 10**5): O(10**5 - j) = O(1)
            for k in r2:              # executed O(1) times per OUTER FOR iteration
                print(i)                # print: O(1)
        i -= 2                      # decrement: O(1)
        condition = i>0             # comparison: O(1) 
```

因此，总运行时间确实是`O(n^2)`.*

# mysql - Rails mysql删除重复的元组

> ID：15933286
> 
> 赞同：0
> 
> 时间：2013-04-10T18:12:54.090
> 
> 标签：mysql, sql, ruby-on-rails, duplicates

所以我正在开发这个应用程序，我们有供应商，每个供应商都有很多分数，每个分数都有详细信息。输入供应商分数的方法有两种，一种是通过表格，另一种是excel上传。现在我们有一些人通过电子表格上传，更新单个供应商，然后上传整个列表，这会为她的所有供应商创建重复项。

我写了这个sql语句。注意：使分数独一无二的是 1\. 它的 ID 和 2\. valid_from 和 valid_until 日期的组合。

```
def remove_old_duplicates
  remove_dup = "DELETE s1 FROM `sms_development`.`scores` s1, `sms_development`.`scores` s2 WHERE s1.supplier_id = s2.supplier_id AND s1.valid_from = s2.valid_from AND s1.valid_until = s2.valid_until AND s1.id < s2.id;"

  ActiveRecord::Base.connection.execute remove_dup
end 
```

基本上，这应该做的是获取表格并将其与自身组合，然后查找供应商相同以及 valid_from 和 valid_until 属性相同的所有分数。然后它会查找 ID 号最大的那个并删除其余的。唯一的事情是它没有删除它们。我在工作台上运行查询，它说它工作正常，只是不在应用程序中。我在导入新数据后运行此查询？关于可能导致这种情况的任何想法？

注意：我基于 ID 号而不是 created_at 属性的原因是，如果我在字段中创建分数，rails 会为我提供 created_at 属性，excel 上传使用 sql 插入，因此无法获取该属性，因为id 是唯一的，我认为 ID 越大，记录越新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:48:38.063

尝试这个：

```
remove_dup = "DELETE s1 FROM `sms_development`.`scores` s1 JOIN
   `sms_development`.`scores` s2 ON s1.supplier_id = s2.supplier_id AND s1.valid_from = 
    s2.valid_from AND s1.valid_until = s2.valid_until AND s1.id < s2.id;" 
```

**[演示](http://www.sqlfiddle.com/#!2/85340/2)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:30:21.567

您的查询对我来说似乎无效 - 您可以像这样重写您的查询：

```
DELETE FROM `sms_development`.`scores`
WHERE id NOT IN (
  SELECT MAX(id) FROM `sms_development`.`scores`
  GROUP BY supplier_id, valid_from, valid_until
) 
```

# javascript - 结果出现在 Firefox 控制台中，但不在浏览器中

> ID：15933291
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:12:59.383
> 
> 标签：javascript, html, console, response

我有一个 javascript/jQuery/PHP/mySQL 应用程序，它有一个我还没有找到的错误。发生的情况是提交表单的响应在 firebug 的“控制台”窗口中可见，但在浏览器窗口中不可见。我意识到这是一个相当模糊的问题，但我希望这可能是一个常见的已知条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:28:06.600

Firebug 将显示解释的代码，浏览器（查看源代码）将显示您输入的代码。

# facebook - Facebook 公共对象无法通过 Graph API 或 FQL 检索

> ID：15933299
> 
> 赞同：1
> 
> 时间：2013-04-10T18:13:22.623
> 
> 标签：facebook, api, facebook-graph-api, facebook-fql

我正在搜索公共提要，一旦获得对象，我想获得有关它们的更多信息。我使用身份验证令牌登录，当我尝试通过图形 API 和 FQL 获取更多信息时，我得到以下结果。

Graph API - 我运行以下请求“ [https://graph.facebook.com/](https://graph.facebook.com/) {pid or object_id}” 结果 - 我收到错误“不支持的获取请求”。

FQL 查询 - 我运行类似“从 pid = '{pid}' 的照片中选择 {fields}” 文档 - “要读取照片表，您需要任何有效的 access_token，如果它是公共的并由页面拥有。” 结果 - 我得到一个空数据数组。

这曾经有效，但我不确定我做错了什么或此功能已更改？

谢谢你的任何见解，斯蒂芬妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:46:50.457

Facebook通过developers.facebook.com/bugs/285682524881107表示这是“设计”

# php - 如何从组中检索一段 json 数据？

> ID：15933301
> 
> 赞同：0
> 
> 时间：2013-04-10T18:13:23.280
> 
> 标签：php, json

我有一个包含一组图像的 json 数据，我想检索主图像。我如何抓住它？生成每个项目的开始哈希。

```
{
   "c79638bdcd7e5e9f5cceffffc0dd0e73":{
      "filename":"c79638bdcd7e5e9f5cceffffc0dd0e73.jpg",
      "alt":"",
      "caption":"",
      "primary":true
   },
   "4eb0808fcf339f935a610d950e1726b2":{
      "filename":"4eb0808fcf339f935a610d950e1726b2.png",
      "alt":"",
      "caption":""
   },
   "34ec15fd06233c5e3271b0dc2565d04e":{
      "filename":"34ec15fd06233c5e3271b0dc2565d04e.png",
      "alt":"",
      "caption":""
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:34:44.957

只是为了这些目的使您的文本成为字符串。根据需要进行调整。

```
$text  = '
{
   "c79638bdcd7e5e9f5cceffffc0dd0e73":{
      "filename":"c79638bdcd7e5e9f5cceffffc0dd0e73.jpg",
      "alt":"",
      "caption":"",
      "primary":true
   },
   "4eb0808fcf339f935a610d950e1726b2":{
      "filename":"4eb0808fcf339f935a610d950e1726b2.png",
      "alt":"",
      "caption":""
   },
   "34ec15fd06233c5e3271b0dc2565d04e":{
      "filename":"34ec15fd06233c5e3271b0dc2565d04e.png",
      "alt":"",
      "caption":""
   }
}';

$woo = json_decode($text,true);
$image = '';
foreach($woo as $k => $v)
{
  if(isset($v['primary'] && $v['primary']))
  {
    $image = $v['filename'];
  }

} 
```

# php - 关于使用 PHP 声明和访问基本 cookie，我缺少什么？

> ID：15933305
> 
> 赞同：1
> 
> 时间：2013-04-10T18:13:31.580
> 
> 标签：php, apache, cookies

出于某种原因，我认为我编写的这段代码运行良好。也许是这样——但现在不是。

我正在使用相同的变量设置会话和 cookie，如下所示：

```
session_start();

$id = 1;

// store the session
$_SESSION['mynumber'] = $id;

// store the cookie
setcookie('mynumber', $id); 
```

然后我刷新页面，其中有代码：

```
echo $_SESSION['mynumber'] . '---' . $_COOKIE['mynumber']; 
```

我最终得到以下结果：

```
1--- 
```

为什么 cookie 没有回显？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:29:47.653

确保将 setcookie() 函数放在 <html> 标记之前。

# php - PHP 锚点问题

> ID：15933306
> 
> 赞同：-2
> 
> 时间：2013-04-10T18:13:33.130
> 
> 标签：php, html, anchor

我目前对这行代码有问题：

```
echo "<td>"<a href="userdetails.php?".$row[username].">View Details</a></td>"; 
```

基本上在页面创建时，我希望链接格式化为，`userdetails.php?USERNAME`但由于我认为是语法错误，它不断向我抛出错误。任何帮助将不胜感激，我对 PHP 有点陌生。

**添加注释**：整个代码块是这样的（其他行有效）：

```
while ($row = mysql_fetch_array($query)) {
    echo "<tr>";
    echo "<td>".$row[username]."</td>";
    echo "<td>".$row[emailaddress]."</td>";
    echo "<td>"<a href="userdetails.php?".$row[username].">View Details</a></td>";
    echo "</tr>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:15:39.030

这是错误的，原因有两个：错误的引用和错误的数组索引引用。

太糟了：

```
echo "<td>"<a href="userdetails.php?".$row[username].">View Details</a></td>"; 
```

应该是

```
echo "<td><a href=\"userdetails.php?".$row['username']."\">View Details</a></td>"; 
```

或者

```
echo '<td><a href="userdetails.php?'.$row['username'].'">View Details</a></td>"; 
```

这样也可以不那么混乱：

```
printf('<td><a href="userdetails.php?%s">View Details</a></td>', $row['username']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:18:38.917

```
while ($row = mysql_fetch_array($query)) {
?>
<tr>
<td><?= $row['username']; ?></td>
<td><?= $row['emailaddress']; ?></td>
<td><a href="userdetails.php?<?= $row['username']; ?>">View Details</a></td>
</tr>
<?php
} 
```

Only open PHP tags when PHP is needed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:16:08.920

基本的 PHP 语法。如果用引号打开一个字符串，再次使用该引号将关闭该字符串：

```
echo "<td>"<a href="userdetails.php?".$row[username].">View Details</a></td>";
     ^--open
          ^--close
           ^---huh? 
```

您需要转义作为输出一部分的内部引号：

```
echo "<td>\"<a href="userdetails.php?".$row[username].">View Details</a></td>";
          ^--- 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:17:19.437

利用

```
while ($row = mysql_fetch_array($query)) {
    echo '<tr>';
    echo '<td>'.$row["username"].'</td>';
    echo '<td>'.$row["emailaddress"].'</td>';
    echo '<td><a href="userdetails.php?'.$row["username"].'">View Details</a></td>';
    echo '</tr>';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T18:23:39.660

尝试这个

```
while ($row = mysql_fetch_array($query)) {
    echo '<tr>';
    echo '<td>'.$row['username'].'</td>';
    echo '<td>'.$row['emailaddress'].'</td>';
    echo '<td><a href="userdetails.php?'.$row[username].'">View Details</a></td>';
    echo '</tr>';
} 
```

# google-apps-script - Google Apps 脚本：如何从数组中删除散布的标题行？

> ID：15933308
> 
> 赞同：0
> 
> 时间：2013-04-10T18:13:36.470
> 
> 标签：google-apps-script

我有一个大致如下所示的数据数组：

> ```
>  header row | header row | header row           | header row
>    project    | date       | LastName, FName      | hours
>    project    | date       | LastName, FName      | hours
>    project    | date       | LastName, FName      | hours
>    header row | header row | header row           | header row
>    project    | date       | LastName, FName      | hours
>    project    | date       | LastName, FName      | hours
>    project    | date       | LastName, FName      | hours 
> ```

我想从数组中删除标题行。我以为我`ArrayLib.filterByDate`会这样做，认为在我的时间范围内不包含有效日期的任何行都会被删除。

这是我尝试过的代码：

```
function removeHeaders(projectRange){
  var tmpProjectRange = [];
  tmpProjectRange = ArrayLib.filterByDate(projectRange, 1, new Date(2013-01-01), new Date(2015-01-01))
  return tmpProjectRange;
} 
```

我收到一个错误：“所选列应仅包含日期”。所以这种方法似乎不是一种选择。

现在，我正在尝试`ArrayLib.filterByText`将第 2 列与一组有效数据进行比较：

```
function removeHeaders(projectRange){
  var tmpEmployeeRange = [];
  var tmpEmployeeList = [];
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var shtEmp = ss.getSheetByName("Employees");
  var empLastRow = shtEmp.getLastRow(); 
  var strRange = "A2:A" + empLastRow;
  //should contain a list of all the employees:
  tmpEmployeeList = shtEmp.getRange(strRange).getValues();
  tmpEmployeeRange = ArrayLib.filterByText(projectRange, 2, tmpEmployeeList);
  return tmpEmployeeRange;
} 
```

但由于某种原因，这也不起作用。唯一返回的`tmpEmployeeRange`行是名称没有逗号的行（这些行有 TBD 而不是姓氏，名字。）所以我不太确定那里发生了什么，但我认为必须有一种更简单的方法来做到这一点。我想我可以遍历整个事情并去掉我不想要的行。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:00:48.333

如果我们假设查找具有有效日期的行的逻辑是正确的，那么很容易遍历范围并删除标题。

在这里，我借用了[Detecting an "invalid date" Date instance in JavaScript 中](https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript)`isValidDate()`的函数。我还保留了第一个标题行-您可以通过删除对.`row == 0`

```
// Iterate over all rows, keeping the first header row and
// any row with a valid date in the second column.
function removeHeaders(projectRange){
  var tmpProjectRange = [];
  for (row in projectRange) {
    if (row == 0 || isValidDate(projectRange[row][1])) {
      tmpProjectRange.push(projectRange[row]);
    }
  }
  return tmpProjectRange;
}

// From https://stackoverflow.com/questions/1353684
// Returns 'true' if variable d is a date object.
function isValidDate(d) {
  if ( Object.prototype.toString.call(d) !== "[object Date]" )
    return false;
  return !isNaN(d.getTime());
} 
```

# mysql - 我无法弄清楚的 Sql 错误

> ID：15933313
> 
> 赞同：1
> 
> 时间：2013-04-10T18:13:52.403
> 
> 标签：mysql, sql, phpmyadmin

任何人都可以在这里看到错误。PhpMyAdmin 告诉我 where 子句附近有一个错误。

```
SELECT product.*, category.*,store.*
WHERE
  store.store_id = product.store_id AND
  category.category_id = product.category_id
INNER JOIN store ON store.store_name = 'mens'
INNER JOIN category ON category.category_name = 'rings' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:15:02.760

`INNER JOIN`属于`FROM`从句，不在`WHERE`从句中。该`FROM`条款完全缺失。

```
SELECT product.*, category.*, store.*
  FROM product, category, store
 WHERE store.store_id = product.store_id AND
       category.category_id = product.category_id AND
       store.store_name = 'mens' AND
       category.category_name = 'rings' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T18:15:19.507

您的 sql中没有`FROM`子句。

```
select product.*, category.*, store.* from product 
inner join .... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T18:18:32.213

You seem to be mixing up the purpose of your `where` and `on` clauses.

```
SELECT product.*,category.*,store.* 
From Product
INNER JOIN store on store.store_id = product.store_id
inner join category on category.category_id = product.category_id 
where store.store_name= 'mens' and category.category_name = 'rings' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T18:23:51.210

Select 查询中的每个主要子句都必须按正确的顺序排列。

顺序是：

```
Select ... [Output fields and expressuions] -- Required
From ...  [list of tables, with joins and join conditions] -- Required
Where [Predicates and filter conditions]  -- Optional
Group By [list of fields/expressns to group results by] -- reqr'd for aggregate queries
Order By [List of fields and expressions to sort results by -- optional 
```

# msbuild - MSBuild - 我进行部署时如何强制“AfterBuild”目标？

> ID：15933314
> 
> 赞同：6
> 
> 时间：2013-04-10T18:13:55.473
> 
> 标签：msbuild, web-config, web-config-transform

我有以下设置：ASP.Net MVC .Net 4.0 解决方案，其中包含 5 个项目，以及几个解决方案配置（*Site1-Stage、Site1-Live、Site2-Stage*等）。原因很简单——我们将相同的代码库部署到具有不同配置设置的多个服务器。

为了管理这些配置，我使用了 Troy Hunt 在他的[You're deploy it wrong！TeamCity、Subversion 和 Web 部署第 1 部分：配置转换](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity.html)文章。简而言之 - 我的 SVN 存储库中没有*web.config* ，而是在项目*AfterBuild*目标中有*Web.Base.Config*、*Web.Site1-Stage.Config*等和*XmlTransformation任务。*在构建期间，根据所选配置生成所需的*web.config ：*

 **```
 <UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll" />
  <Target Name="AfterBuild">
    <TransformXml Source="Web.Base.config" Transform="Web.$(Configuration).config" Destination="Web.config" StackTrace="true" />
  </Target> 
```

**问题来了：**当我像这样执行 MSBuild 时：

```
msbuild MySolution.sln /P:configuration=Site1-Stage /t:rebuild 
```

一切顺利，为*Site1-Stage*配置正确生成了 web.config。但是，如果我运行此命令：

```
msbuild MySolution.sln /P:configuration=Site1-Stage /t:rebuild /P:DeployOnBuild=True 
```

我收到以下错误：

> “MySolution.sln”（重建目标）（1）->“MySolution\MyWebProj.csproj”（重建目标）（3）->（PreTransformWebConfig 目标）-> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio \v10.5\Web\Microsoft.Web.Publishing.targets(1399,5)：错误：将文件 Web.config 复制到 obj\Site1-Stage\TransformWebConfig\original\Web.config 失败。找不到文件“Web.config”。[我的解决方案\MyWebProj.csproj]

我尝试将“AfterBuild”目标显式添加到 MSBuild 命令行中：

```
msbuild MySolution.sln /P:configuration=Site1-Stage /t:rebuild,AfterBuild /P:DeployOnBuild=True 
```

但它导致了同样的错误。

**为什么我需要这个：**这是一个非常孤立的示例，实际上我正在尝试从 TeamCity CI 服务器设置自动发布。我认为如果我在当前发布步骤之前使用“Visual Studio (sln)”运行程序添加新的构建步骤，那将起作用，它将首先重建项目（并生成 web.config） - 然后发布。但是，我有很多发布步骤（现在大约 20 个），我想避免这种情况。我的理解是“发布”过程将构建作为其中的一部分，所以我想“重用”它。

**问题是：**我应该如何修改我的 MSBuild 命令行以强制进行配置转换？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:44:43.547

也许使用“BeforeBuild”？

顺便说一句，您在 csproj 中包含 web.config 吗？我相信大多数发布活动都依赖于项目中的项目而不是文件夹中的项目。您可以在项目中包含 web.config，同时仍将其从源代码管理中排除。**

# c - 函数执行但给出分段错误，C

> ID：15933318
> 
> 赞同：0
> 
> 时间：2013-04-10T18:14:04.130
> 
> 标签：c, segmentation-fault

我编写了一个 C 函数以将 char* 作为输入并使用空格将其拆分并将标记再次存储在字符串数组中。

我的代码正确执行，但在完成执行之前，它给出了一个错误，说分段错误。谁能告诉我什么是错的。

```
void parseCommand(char *msg)
{    
    char buffer[25][30];
    char *tok;
    char *msgCopy;
    //strcpy(msgCopy,msg);
    msgCopy =msg;
    tok = strtok(msgCopy," ");
    strcpy(buffer[0],tok);
    int i=1;
    while(tok != NULL ){

        tok = strtok (NULL, " ");
        strcpy(buffer[i],tok);  //me line eke error eka
        printf("%d : %s\n",i,buffer[i]);
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:28:06.520

`strtok`finally 返回`NULL`表示没有更多令牌的信号，您调用`strcpy(buffer[i],tok);`which 尝试读取`NULL`. 这会导致段错误。

`strtok`您可以通过进入循环条件来解决它：

```
while((tok = strtok (NULL, " ")) != NULL ){
    strcpy... 
```

`break`或使用语句转义循环：

```
while(1){
    tok = strtok (NULL, " ");
    if(tok == NULL) break;
    strcpy... 
```

# android - 滚动视图：java.lang.StackOverflowError

> ID：15933319
> 
> 赞同：2
> 
> 时间：2013-04-10T18:14:05.267
> 
> 标签：android, android-scrollview

我有一个带有许多视图的 ScrollView，如果我开始活动，我会在一些滚动后得到这个：

```
04-10 20:11:42.480: E/AndroidRuntime(2089): FATAL EXCEPTION: main
04-10 20:11:42.480: E/AndroidRuntime(2089): java.lang.StackOverflowError
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.addFocusables(View.java:3654)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:637)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.addFocusables(ViewGroup.java:618)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.getFocusables(View.java:3612)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.FocusFinder.findNextFocus(FocusFinder.java:109)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.FocusFinder.findNextFocus(FocusFinder.java:93)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:476)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.focusSearch(ViewGroup.java:478)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.focusSearch(View.java:3547)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.widget.TextView.onCreateInputConnection(TextView.java:4662)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.inputmethod.InputMethodManager.startInputInner(InputMethodManager.java:945)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.inputmethod.InputMethodManager.checkFocus(InputMethodManager.java:1129)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.inputmethod.InputMethodManager.isActive(InputMethodManager.java:542)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.widget.TextView.onDraw(TextView.java:4173)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.draw(View.java:6933)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.draw(View.java:6936)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.draw(View.java:6936)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.draw(View.java:7039)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.widget.ScrollView.draw(ScrollView.java:1415)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.draw(View.java:6936)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.View.draw(View.java:6936)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-10 20:11:42.480: E/AndroidRuntime(2089):     at android.view.ViewGroup.drawChild( 
```

为什么我知道这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:24:54.790

您的 UI 视图树太深。 `addFocusables`是递归的（显然）到`View`布局树中，Android 的堆栈大小相当有限。更改您的布局以减少嵌套和更多的平面布局。您可能需要编写自定义布局来获得您想要的布局而无需嵌套。

# ios - 在iOS中对整数的NSMutableDictionary进行排序

> ID：15933324
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:14:13.390
> 
> 标签：ios, objective-c, sorting, integer, nsmutabledictionary

我只是想知道是否可以在 iOS 中对整数字典进行排序？查看前面的示例/问题，似乎大多数人都在对整数数组或字典数组（包含整数）进行排序。

但是，假设我有一本结构如下的字典：

```
 {numWords = 12, numPhotos = 15, numFriends = 8} 
```

键不一样，所以似乎我不能使用排序描述符（用键初始化），所以有没有办法对整数进行排序并保持关联的键完好无损？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:18:22.147

Dictionaries can't be sorted. But there is a method that will return an array of keys in order based on the values being sorted.

```
NSMutableDictionary *dict = ...; // your dictionary
NSArray *orderedKeys = [dict keysSortedByValueUsingSelector:@selector(compare:)]; 
```

In your case, `orderedKeys` would be `numFriends, numWords, numPhotos`.

To make use of the ordered keys you can do something like:

```
for (id key in orderedKeys) {
    id value = [dict objectForKey:key];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:17:40.630

NSDictionary are not ordered. And you never sort dictionary.

Indeed you sort keys and or values.

For your case:

You need to extract all the values into arrayValues parallely keys in arraykeys, sort based on arrayValues.

```
NSMutableArray *array1 = [NSMutableArray arrayWithObjects:[NSNumber numberWithInt:5], [NSNumber numberWithInt:3], [NSNumber numberWithInt:1], [NSNumber numberWithInt:2], [NSNumber numberWithInt:4], [NSNumber numberWithInt:6], nil];
NSMutableArray *arrayKeys = @[@"Five", @"Three", @"One", @"Two", @"Four", @"Six"];
NSMutableArray *arrayValues = @[@"Cinq", @"Trois", @"Un", @"Deux", @"Quatre", @"Six"];
 [array1 sortArrayUsingSelector:@selector(compare:) withPairedMutableArrays:arrayKeys, arrayValues, nil]; 
```

After the call to sortArrayUsingSelector:withPairedArrays:, the three arrays will all be in numeric order, so arrayKeys will look like this:

```
One, Two, Three, Four, Five, Six 
```

and arrayValues will look like this:

```
Un, Deux, Trois, Quatre, Cinq, Six 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:20:17.687

**字典不可排序。**

也就是说，您可以有两个排序数组，一个包含键，另一个包含关联的值。按值的顺序对它们进行排序。

```
NSDictionary *d = @{
    @"numWords": @12,
    @"numPhotos": @15,
    @"numFriends": @8
};

NSComparisonResult (^cmp)(id, id) = ^(id obj1, id obj2) {
    return [obj1 compare:obj2];
}

NSArray *keys = [d keysSortedByValueUsingComparator:cmp]
NSMutableArray *vals = [[id allValues] mutableCopy];
[vals sortUsingComparator:cmp]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:20:00.617

假设对象是唯一的：

1) 向字典查询**allValues的数组**

2）对值数组进行排序

3）由于没有**valueForKey**，对于每个值，使用快速枚举或**enumerateKeysAndObjectsUsingBlock:**来找到合适的键。

# element - 未进行简单的 Dom HTML 更改

> ID：15933326
> 
> 赞同：1
> 
> 时间：2013-04-10T18:14:15.390
> 
> 标签：element, simple-html-dom

我使用 simple_html_dom.php

我想删除元素的第一个子元素：

的HTML：

```
<div id="result">
<a class="result_type1" href="#">The title</a>
<span class="item">item</span>
<span class="more">more</span> 
<span class="description">description</span>
</div> 
```

PHP 测试 1：

```
 foreach($html2->find("div[id=result]") as $element) 
 {

$element->children(0)->outertext=$element->children(1)->outertext;
$element->children(1)->outertext=$element->children(2)->outertext;
$element->children(2)->outertext=$element->children(3)->outertext;
$element->children(3)->outertext="";

echo $element->children(0)->plaintext; 

} 
```

结果（不好）：

```
 The title 
```

PHP 测试 2

```
 foreach($html2->find("div[id=result]") as $element) 
 {

$element->children(0)->outertext=$element->children(1)->outertext;
$element->children(1)->outertext=$element->children(2)->outertext;
$element->children(2)->outertext=$element->children(3)->outertext;
$element->children(3)->outertext="";

echo $element->children(0)->outertext; 

} 
```

结果（好）：

```
 <span class="item">item</span> 
```

而且我没有得到相同的项目。使用纯文本，我得到了应该删除的元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-13T03:11:49.833

处理信息时，这三个属性（外部文本、内部文本和明文）似乎是分开的，存储在多维数组中：

如果使用“outerText”对元素进行更改，其他两个属性不会更改：

```
element1    plaintext: "text 1",
            outerText: "<span> text 2 </ span>",
            InnerText: "text 1" 
```

如果您使用“纯文本”进行更改，则相同。

```
element1    plaintext: "text 2"
            outerText: "<div> text 1 </ div>",
            InnerText: "text 1" . 
```

只有“InnerText”属性会影响其他两个属性...

```
element1    plaintext: "text 2"
            outerText: "<div> text 2 </ div>",
            InnerText: "text 2" 
```

相反，如果您使用“href”更改元素，它将影响“outertext”值。

```
element1    href :     "link2",
            outerText: "<a href="link2"> </a>", 
```

与“outerText”相反的变化不会影响“href”。

```
element1    href :     "link1",
            outerText: "<a href="link2"> </a>", 
```

# javascript - onSelect 税收计算

> ID：15933328
> 
> 赞同：0
> 
> 时间：2013-04-10T18:14:28.023
> 
> 标签：javascript, options-menu, onselect, sales-tax

我的工作只需要在加利福尼亚州居民购买时向他们收取销售税。我写了一个我希望的 javascript 函数，当客户从州的下拉列表中选择加利福尼亚时，它将应用销售税。我给每个州一个值“else”，给加利福尼亚一个值或“CA”。My code calculates the sales tax as 0 everytime, causing tax to never be applied to the grand total when "CA" is selected. 我在状态列表中使用 onSelect=UpdateCost()，在选中产品复选框时使用 onChange=UpdateCost()。我的代码的哪一部分阻止了税收的正确计算？

```
 function UpdateCost() {
   var stotal = 0;
   var ttotal = 0;
   var gtotal = 0;
   var tax = .0825;
   var gn, elem;
     for (i=0; i<12; i++) {
       gn = 'manual'+i;
       elem = document.getElementById(gn);
     if (elem.checked == true) { stotal += Number(elem.value); }
}
   var state = document.getElementById('state');
   var selection = state.options[state.selectedIndex].value;
 if (selection = 'CA') { ttotal += tax * stotal; }
 if (selection = 'else') {ttotal = 0;}
 if(!isNaN(ttotal)) {
    var calitax = ttotal.toFixed(2);
    document.getElementById('taxtotal').value = calitax;
    document.getElementById('subtotal').value = stotal.toFixed(2);
    }
   var gtotal = ttotal + stotal;
     if(!isNaN(gtotal)) {
   var grand = gtotal.toFixed(2);
   document.getElementById('grandtotal').value = grand;}

   } 
```

这是已简化的相关表单代码（无论如何我都可以得到它）：

```
//in the header of course.
<script type="text/javascript" src="orderform.js"></script>

<form action=""  method="post">
<fieldset>
State: <select name="state" id="state" onSelect="UpdateCost()">
<option value="else" id="else">AL</option>
<option value="else" id="else">AK</option>
<option value="else" id="else">AZ</option>
<option value="else" id="else">AR</option>
<option value="CA" id="CA">CA</option>
</select>
<p>Select the manuals to order</p>

<input name="manual" type="checkbox" id='manual6' onclick="UpdateCost()" value="185">manual 1<br />
<input name="manual" type="checkbox" id='manual0' onclick="UpdateCost()" value="220">manual 2<br /><br />

<input name="manual" type="checkbox" id='manual7' onclick="UpdateCost()" value="155">manual 3<br />
<input name="manual" type="checkbox" id='manual1' onclick="UpdateCost()" value="185">manual 4<br /><br />

<h3>**SAVE $50** WHEN YOU BUY BOTH</h3><br />
<input name="manual" type="checkbox" id='manual8' onclick="UpdateCost()" value="290">manual 5<br />
Or:<br />
<input name="manual" type="checkbox" id='manual2' onclick="UpdateCost()" value="355">manual 6<br /><br />
<hr>
<input name="manual" type="checkbox" id='manual9' onclick="UpdateCost()" value="190">manual 7<br />
<input name="manual" type="checkbox" id='manual3' onclick="UpdateCost()" value="225">manual 8<br /><br />

<input name="manual" type="checkbox" id='manual10' onclick="UpdateCost()" value="125">manual 9<br />
<input name="manual" type="checkbox" id='manual4' onclick="UpdateCost()" value="150">manual 10<br /><br />
<h3>**SAVE $50** WHEN YOU BUY BOTH</h3><br />
<input name="manual" type="checkbox" id='manual11' onclick="UpdateCost()" value="265">11<br />
Or:<br />
<input name="manual" type="checkbox" id='manual5' onclick="UpdateCost()" value="325">12<br /><br />

Subtotal: <input name="subtotal" type="text" id="subtotal" value=""><br />
California Resident Tax: <input name="taxtotal" type="text" id="taxtotal" value=""><br />
Total: <input name="grandtotal" type="text" id="grandtotal" value=""><br />

</fieldset> 
```

抱歉长了！！！谢谢你的帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:53:00.270

你有两个问题。第一个是您使用`onSelect`而不是`onChange`在状态选择字段中。然而，更大的问题在于您检查状态的功能。您使用的是 assignment`=`而不是 comparison `==`。

```
if (selection == 'CA') {    
    ttotal += tax * stotal;
}
if (selection == 'else') {
    ttotal = 0;
} 
```

修复**[了 jsFiddle 示例](http://jsfiddle.net/j08691/WYQag/)**。

# c++ - 从字符串中删除字符的第一个和最后一个实例？

> ID：15933329
> 
> 赞同：0
> 
> 时间：2013-04-10T18:14:28.860
> 
> 标签：c++

我假设以下内容无法编译，因为我混合了正向和反向迭代器。为什么我不能像这样混合它们？我怎样才能让它工作？我想删除字符串的第一个和最后一个引号，但保留所有内部引号。

```
temp.assign(find(value.begin(), value.end(), '\"'), find(value.rbegin(), value.rend(), '\"')); 
```

我什至不能这样做。反向迭代器的意义何在？

```
value.erase(find(value.begin(), value.end(), '\"'));
value.erase(find(value.rbegin(), value.rend(), '\"')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:23:39.907

assign 函数（无论 的类型如何`temp`）需要两个相同类型的迭代器。反向迭代器的类型与普通迭代器不同。`base()`您可以使用反向迭代器上的函数获取底层正常迭代器，但要小心；它位于反向迭代器指向的位置之后。例如，如果你写

```
temp.assign( find( value.begin(), value.end(), '\"' ),
             find( value.rbegin(), value.rend(), '\"').base() ); 
```

，尾随`'"'`将成为结果字符串的一部分。

当您将结果用作开始迭代器时，这种特殊行为通常是您想要的：

```
std::string( std::find( fn.rbegin(), fn.rend(), '.' ), fn.end() ) 
```

，例如，会给你最后一个 *之后*`'.'`的所有文本。当使用带有反向迭代器的查找结果作为结束标准时，您通常需要将其保存在变量中，并以某种方式“更正”它。

最后，您应该非常谨慎地使用两次查找的结果来定义范围，就像您在上面所做的那样。例如，如果你的文本中没有`'"'`，你最终会得到相当于：

```
temp.assign( value.end(), value.begin() ); 
```

，这是行不通的。

## 编辑：

例如，如果您不想要这些`'"'`字符，我认为以下应该可行：

```
//  Returns an empty string if there are not two " chars.
std::string
extractQuoted( std::string const& original )
{
    //  end points to one after the last '"', or begin() if no '"'.
    std::string::const_iterator end
        = std::find( original.rbegin(), original.rend(), '"' ).base();
    if ( end != original.begin() ) {
        -- end;    // Since we don't want the '"' in the final string
    }
    return std::string( std::find( original.begin(), end, '"' ), end );
} 
```

（这不是我的想法，所以不能保证，但它应该让你朝着正确的方向开始。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:22:40.367

如果要使用 reverse_itertators，请在它们上调用 .base() 到底层迭代器类型。例如

```
value.erase(find(value.begin(), value.end(), '\"'));
value.erase(find(value.rbegin(), value.rend(), '\"').base()); 
```

可能会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:21:07.903

我认为问题在于擦除需要一个正向迭代器，而不是一个反向迭代器。正如其他人指出的那样，您可以在 find 的结果上使用 .base() 来转换它们。

您也可以改用 find_end 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:26:57.300

你也可以使用

```
value.erase(0, value.find('\"') + 1);
value.erase(value.rfind('\"'), value.size()); 
```

假设字符串将始终包含至少两个`"`s

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T18:43:20.287

这个怎么样？

```
void stripLeadingAndTrailingQuotes(std::string& s) {
    if (s[0] == '\"')
        s.erase(0, 1);
    size_t last = s.length() - 1;
    if (s[last] == '\"')
        s.erase(last, 1);
} 
```

迭代器是有效的，但我认为上面的内容更具可读性。

# arrays - 来自 maxima 中嵌套 for 循环的数组

> ID：15933331
> 
> 赞同：1
> 
> 时间：2013-04-10T18:14:34.377
> 
> 标签：arrays, for-loop, maxima

使用 MAXIMA 我想在最大值中创建 11 个数组。我正在尝试这样的事情：

```
for n:1 step 1 while n<=11 do( for j:1 while j<=21 do( if i<j then aa[n][i,j]:i+j+n)); 
```

这编译得很好，但我不能按照我的意愿使用它。例如说我想要第 5 个数组中的值 2,2，我尝试以下但它不起作用：

```
aa[5][2,2]; 
```

任何帮助表示赞赏，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:43:55.640

您的代码片段缺少对 i 的任何循环或对 i 的其他分配。

您可以考虑使用 'genmatrix' 构造一个矩阵，然后在 n 上循环以生成多个矩阵。例如：

```
foo : lambda ([i, j], if i < j then i + j + n else 0);
for n:1 thru 11 do aa[n] : genmatrix (foo, 21, 21); 
```

然后我得到

```
aa[5][2, 2];
 => 0
aa[5][2, 3];
 => 10
grind (aa[10]);
 => matrix([0,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],
   [0,0,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33],
   [0,0,0,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34],
   [0,0,0,0,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],
   [0,0,0,0,0,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],
   [0,0,0,0,0,0,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37],
   [0,0,0,0,0,0,0,25,26,27,28,29,30,31,32,33,34,35,36,37,38],
   [0,0,0,0,0,0,0,0,27,28,29,30,31,32,33,34,35,36,37,38,39],
   [0,0,0,0,0,0,0,0,0,29,30,31,32,33,34,35,36,37,38,39,40],
   [0,0,0,0,0,0,0,0,0,0,31,32,33,34,35,36,37,38,39,40,41],
   [0,0,0,0,0,0,0,0,0,0,0,33,34,35,36,37,38,39,40,41,42],
   [0,0,0,0,0,0,0,0,0,0,0,0,35,36,37,38,39,40,41,42,43],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,37,38,39,40,41,42,43,44],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,39,40,41,42,43,44,45],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,41,42,43,44,45,46],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,44,45,46,47],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,46,47,48],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,48,49],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,50],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51],
   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])$ 
```

# xml - 如何读取 XML 文件

> ID：15933333
> 
> 赞同：1
> 
> 时间：2013-04-10T18:14:36.270
> 
> 标签：xml, vb.net, xmlreader

我有一个 VB.net 程序。我正在尝试使用 XMLReader 读取 .xml 文件。我想分解 XML 文件以将其组织成不同的“部分”在这个例子中`"FormTitle"`和`"ButtonTitle"`. 我想从中获取`<Text>`数据`FormTitle`并将其显示为表单`"text"`，然后将其显示`<Text>`在`"ButtonTitle"`按钮文本中。

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Database.-->
<FormTitle>
    <Text>Form Test</Text>
</FormTitle>
<ButtonTitle>
    <Text>Button Test</Text>
</ButtonTitle> 
```

这是我当前的代码：

```
If (IO.File.Exists("C:\testing.xml")) Then

    Dim document As XmlReader = New XmlTextReader("C:\testing.xml")

    While (document.Read())

        Dim type = document.NodeType

        If (type = XmlNodeType.Element) Then

            '
            If (document.Name = "Text") Then
                Me.Text = document.ReadInnerXml.ToString()

            End If

        End If

    End While

Else

    MessageBox.Show("The filename you selected was not found.")
End If 
```

怎么能带入下一段`(ButtonTitle)`同名即在`FormTitle`哪是`(Text)`。我会假设我需要在 if then 语句中引用`FormTitle`和？`ButtonTitle`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:34:46.813

看看这个例子。[http://msdn.microsoft.com/en-us/library/dc0c9ekk.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2](http://msdn.microsoft.com/en-us/library/dc0c9ekk.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)

你应该可以使用：

```
doc.GetElementsByTagName("FormTitle") 
```

然后，您可以遍历所有子节点。[http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.childnodes.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.childnodes.aspx)

```
 Dim root As XmlNode = doc.GetElementsByTagName("FormTitle").Item(1)

    'Display the contents of the child nodes. 
    If root.HasChildNodes Then 
        Dim i As Integer 
        For i = 0 To root.ChildNodes.Count - 1
            Console.WriteLine(root.ChildNodes(i).InnerText)
        Next i
    End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:47:07.587

使用 XDocument 更有效地读取 Xml，并且由于语法更少，可读性也更高。

您需要将根添加到您的 XML。我称它为根，但它可以是任何东西。它只是封装了你所有的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<root>
<FormTitle>
    <Text>Form Test</Text>
</FormTitle>
<ButtonTitle>
    <Text>Button Test</Text>
</ButtonTitle>
</root> 
```

这是从 FormTitle 中提取“表单测试”的示例

```
 Dim document As XDocument = XDocument.Load("c:\tmp\test.xml")
    Dim title = From t In document.Descendants("FormTitle") Select t.Value 
```

将文本分配给表单

```
Form1.Text = title.First() 
```

# hadoop - 如何在 hadoop 中使用 mapreduce

> ID：15933335
> 
> 赞同：0
> 
> 时间：2013-04-10T18:14:36.833
> 
> 标签：hadoop

我正在尝试使用 Mapreduce 实现一种算法以在大图（大小相当于社交网络）中查找连接的组件。虽然听说可以使用 Hadoop，但我不熟悉 Hadoop。我需要一些使用它的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:41:36.863

看看[Apache Giraph](http://giraph.apache.org/index.html)。它是基于 Hadoop 的框架，用于处理图算法。

# javascript - 更改下拉菜单的背景颜色

> ID：15933340
> 
> 赞同：0
> 
> 时间：2013-04-10T18:14:45.460
> 
> 标签：javascript, jquery, html, css

我正在尝试更改下拉菜单的背景颜色....

[http://jsfiddle.net/3VBQ6/4/](http://jsfiddle.net/3VBQ6/4/)

```
#nav li:hover ul.sub li {
    display:block;
    height:20px;
    position:relative;
    font-weight:normal;
}
#nav li:hover ul.sub li a {
    display:block;
    font-size:11px;
    height:18px;
    line-height:18px;
    text-indent:5px;
    color:#000;
    text-decoration:none;
    border:1px solid #bbd37e;
}
#nav li ul.sub li a.fly {
    background:#bbd37e url(arrow.gif) 80px 6px no-repeat;
}
#nav li:hover ul.sub li a:hover {
    background:#e3e3e3;
    color:#fff;
    border-color:#fff;
}
#nav li:hover ul.sub li a.fly:hover {
    background:#6a812c url(arrow_over.gif) 80px 6px no-repeat;
    color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:18:42.770

Try this ..

```
#nav li:hover ul.sub {
  background: #00E248;
} 
```

[**FIDDLE**](http://jsfiddle.net/mohammadAdil/3VBQ6/5/)

# macos - 没有 Xcode 的应用内购买（Apple 应用商店）

> ID：15933342
> 
> 赞同：3
> 
> 时间：2013-04-10T18:14:50.993
> 
> 标签：macos, app-store, in-app-purchase, common-lisp, ccl

我们正在尝试将我们的应用程序放入苹果应用商店并希望添加应用程序购买，但不幸的是我们的应用程序不是使用 Xcode 创建的。我们使用名为 CCL 的 common lisp 实现，其中包括一个用于访问 Cocoa API 的目标 C 桥。这一切都很好，除了在阅读 StoreKitGuide 之后我看到我们应该再次链接 StoreKit.framework 以便将商店添加到我的应用程序。

这带来了一个问题，因为我们没有使用 XCode 来创建我们的应用程序。如果我们不使用应用内购买，是否可以将应用内购买添加到您的应用中？我意识到这里的大多数人不会使用 common lisp，但我想知道他们是否可以提供任何关于如何在没有 Xcode 的情况下启用应用程序购买的见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:27:59.730

`(OBJC:LOAD-FRAMEWORK "SKRequest" :storekit)`成功了吗？或者也许`(OBJC:LOAD-FRAMEWORK "StoreKit" :cocoa)`？

如果没有，您可能必须自己创建接口： http: [//ccl.clozure.com/manual/chapter13.5.html#Creating-new-interface-directories](http://ccl.clozure.com/manual/chapter13.5.html#Creating-new-interface-directories)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:04:31.990

如果您使用 Objective C 桥接器，则需要修改或更新此桥接器以支持您需要的框架，并且桥接器中当前不包含对这些框架的支持。重新编译桥代码可能需要 Xcode 和桥源代码。

# java - 如何在亚马逊 ec2 上运行简单的 java 应用程序？

> ID：15933343
> 
> 赞同：8
> 
> 时间：2013-04-10T18:14:53.177
> 
> 标签：java, amazon-ec2

我可以访问亚马逊云服务 ec2，linux 实例。我`vi first.java`用这个内容创建了文件：

```
class first {
    public static void main(String[] args) {
        System.out.println("abc");
    }
} 
```

我想使用以下方法编译文件：

```
[root@ip-21-24-273-243 ec2-user]# javac first.java 
bash: javac: command not found 
```

找不到相关命令？我愿意：

```
[root@ip-21-24-273-243 ec2-user]# java -version
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.9) (amazon-57.1.11.9.52.amzn1-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

所以安装了java。如何运行一个简单的应用程序？

```
[root@ip-21-24-273-243 ec2-user]# yum install java
Loaded plugins: priorities, security, update-motd, upgrade-helper
amzn-main                                                                                                                      | 2.1 kB     00:00     
amzn-updates                                                                                                                   | 2.3 kB     00:00     
Setting up Install Process
Package 1:java-1.6.0-openjdk-1.6.0.0-57.1.11.9.52.amzn1.x86_64 already installed and latest version
Nothing to do 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T18:26:25.517

你需要安装`java-1.6.0-openjdk-devel:`

```
yum install java-devel 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:21:03.467

如前所述，要编译 Java 程序，您需要 JDK。在这里您可以找到一些关于如何在 Fedora AMI 上安装 JDK 的有用信息： [编译和运行 Java 应用程序](https://stackoverflow.com/questions/6279190/compiling-and-running-java-app)

但是，您应该注意到您不需要在您的 ec2 实例上进行编译。您可以在您的家用台式机/笔记本电脑上编译您的 Java 程序，并将已编译的 .class（打包在 .jar 中）文件传输到实例，然后在那里运行它们 - 已经安装的 JRE 应该足以运行该程序。这是一种更可取的方法，因为您可以轻松地使用 Eclipse 进行开发。在本地机器上开发、测试，在 ec2 上部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T17:56:12.773

有几个步骤要做：

1.  确保安装了 Java 编译器。您可以通过进入`$javac`控制台并查看出现的情况来发现这一点。如果未安装，请按照前面提到的说明`$yum install java-devel`
2.  创建您的脚本 ( `first.java`)
3.  编译它使用`$javac first.java`
4.  您现在将拥有`first.java`并且`first.class`...通过执行来执行它`$java first`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:17:35.143

“[Java] 运行时环境”或简称“JRE”不包括开发人员工具，其中之一是 Java 编译器。您需要安装 Java Development Kit 或简称“JDK”。确切的机制取决于您用于构建实例的 AMI。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-01T08:54:12.260

为了在 上创建和运行基本的 java 程序`Amazon EC2`，您需要执行以下操作：

1.  当您登录到`EC2`实例时，检查是否`JDK`已安装，为其触发**javac -version**。如果您还没有`JDK`安装，您会看到如下内容： [![未安装JDK](https://i.stack.imgur.com/C8c63.png)](https://i.stack.imgur.com/C8c63.png)
2.  安装JDK，开火`sudo rpm -i jdk-8u11-linux-x64.rpm`
3.  安装 java 后，您可以`file.java`使用任何编辑器创建文件。
4.  编辑文件并保存。
5.  编译java文件，`javac file.java`
6.  运行，`java file`

# javascript - javascript中的运行时错误

> ID：15933344
> 
> 赞同：0
> 
> 时间：2013-04-10T18:14:55.757
> 
> 标签：javascript, jquery, asp.net

我试图在单击列表视图控件时获取它的行值，并且我想在文本框中显示它。[我在http://www.ezzylearning.com/tutorial.aspx?tid=7597714](http://www.ezzylearning.com/tutorial.aspx?tid=7597714)找到了一篇演示这种场景的文章。我尝试使用 javascript 来获取我的 listview 控件的行值并将其设置到我的文本框以使用该文章中给出的 javascript 代码的格式显示。我需要帮助修复我的 javascript 代码上的运行时错误，该代码会弹出一个错误窗口并显示**Microsoft JScript runtime error: Object expected**，每次单击任何行时。以下是我的代码供您参考：提前致谢。

```
<script type ="text/javascript" >

    var row;
    var id,name,addr,age,natn,occ;

    function GetRow(rowval)
    {
        row = $(rowval).parent().parent(); // the runtime error hightlights on this line

        id = $("#id", row).text();
        name = $("#name", row).text();
        addr = $("#addr", row).text();
        age = $("#age", row).text();
        natn = $("#natn",row ).text();
        occ = $("#occ",row).text();

        row.addClass("highlightRow");

        $("#TextBox1").val(id);
        $("#TextBox2").val(name);
        $("#TextBox3").val(addr);
        $("#TextBox4").val(age);
        $("#TextBox5").val(natn);
        $("#TextBox6").val(occ);
    }

</script> 
```

ItemTemplate 中我的 listview 控件的源代码：

```
<ItemTemplate>

    <tr style="background-color:#E0FFFF; color: #333333;" >
        <td>
            <asp:Label ID="IDLabel" runat="server" Text='<%# Eval("ID") %>' style="cursor: pointer;" onclick = "return GetRow();" />
        </td>

        <td>
            <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' />
        </td>

        <td>
            <asp:Label ID="AddressLabel" runat="server" Text='<%# Eval("Address") %>' />
        </td>

        <td>
            <asp:Label ID="AgeLabel" runat="server" Text='<%# Eval("Age") %>' />
        </td>

        <td>
            <asp:Label ID="NationalityLabel" runat="server" Text='<%# Eval("Nationality") %>' />
        </td>

        <td>
            <asp:Label ID="OccupationLabel" runat="server" Text='<%# Eval("Occupation") %>' />
        </td>
    </tr>

</ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:35:18.397

尝试这样做：

给你的标签`IDLabel`一个 CssClass。让我们说`myLabel`这个例子。然后为点击事件添加以下代码（您将不再需要`GetRow`）：

```
$(".myLabel").click(function(){
    row = $(this).parent().parent();
    // all your other stuff from GetRow()
}); 
```

我注意到您在 jquery 代码中引用了#TextBox1。您应该注意，如果 TextBox1 是一个 asp.net 控件，则这将不适用于选择该元素，因为呈现的元素 ID 不是 TextBox1。

# javascript - Javascript / CSS 无法与 Firefox 一起正常工作

> ID：15933348
> 
> 赞同：-6
> 
> 时间：2013-04-10T18:15:03.803
> 
> 标签：javascript, html, css, twitter-bootstrap

我不知道是引导程序中的行类不起作用，还是我的 JS/CSS 无法在 Firefox 中正确加载。它适用于 Chrome 和 Safari。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:37:03.083

试着给出门的宽度。

ul.放大 li{

显示：内联块；边距：5px 10px 0；位置：相对；宽度：40px；z-index：0；}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:39:39.773

在 style.css 的第 122 行，你有：

```
.portfolio-images img {
    width: 300px;
} 
```

那个有什么用途？如果删除它，它在 Firefox 中可以正常工作。

**更新**：我的错误 - 如果您将其更新为 width:100% 它在 Firefox 中可以正常工作。

# c#-4.0 - 如何从任务返回结果 ，利用 Async HttpClient 调用的好处？

> ID：15933350
> 
> 赞同：0
> 
> 时间：2013-04-10T18:15:19.120
> 
> 标签：c#-4.0, asp.net-web-api, task-parallel-library, dotnet-httpclient

**我可以像下面这样写代码（第一个）吗**

```
public Task<HttpResponseMessage> Get(int id)
{
 return Task<HttpResponseMessage>.Factory.StartNew(() =>
  Request.CreateResponse(HttpStatusCode.OK, JsonConvert.SerializeObject(model)));

} 
```

**我可以像下面这样写代码（第二个）吗**

```
public Task<HttpResponseMessage> Put(int id, string value)
{
   return Task<HttpResponseMessage>.Factory.StartNew(() =>
     Request.CreateResponse(HttpStatusCode.OK));

} 
```

我**想**使用 `Httpclient.PutAsJsonAsync()`. 在.Net 4.0 中？

或者有什么更好的方法来做到这一点？所以我可以利用异步调用的好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:38:31.613

如果您的代码中的所有操作都不是异步的（或阻塞的），那么进行异步操作是没有意义的。在你的两个例子中，操作只是返回一个响应，所以你不需要使用`Task<HttpResponseMessage>`响应，使用`HttpResponseMessage`就可以了。

所以，更直接地回答你的问题，是的，你可以编写这样的代码，但它比必要的更复杂，会导致不必要的上下文切换（创建新任务），并且整体性能较低。你可以这样做，但你不应该这样做。

# c# - 工厂类 - 使用 IOC 容器注册和解析类型

> ID：15933354
> 
> 赞同：1
> 
> 时间：2013-04-10T18:15:28.150
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, inversion-of-control, factory-pattern

我不太确定如何实现这一点，或者最好的策略是什么，基本上我有一个（MVC）控制器

```
public TestController(IService1 service1, IService2 service2,...)
{ } 
```

（目前只有 2 个参数，但可以增加）。

我的想法是创建一个服务工厂类，因此我们可以为工厂提供一个参数，而不是为每个服务提供一个参数，然后获取我们需要的任何服务

```
private IService1 _service1;
public TestController(IServiceFactory serviceFactory)
{
    // this could also be called from a separate action, 
    // so we only get it when we need it
    _service1 = serviceFactory.Get<IService1>();
} 
```

现在我的服务工厂实现有点垃圾，基本上我只有一个缓存所有注册服务和类型的字典：

```
/// <summary>
/// Service factory class
/// </summary>
/// <remarks>
/// Only one instance of this class should be created during the lifetime of the application
/// </remarks>
public class ServiceFactory : IServiceFactory
{
    /// <summary>
    /// Locking object
    /// </summary>
    private static readonly object _lock = new object();

    /// <summary>
    /// Collection of mappings
    /// </summary>
    private IDictionary<string, Func<IService>> _mappings;

    /// <summary>
    /// Default constructor
    /// </summary>
    public ServiceFactory()
    {
        _mappings = new Dictionary<string, Func<IService>>();
        registerMappings();
    }

    /// <summary>
    /// Get a service from the factory
    /// </summary>
    public T GetService<T>() where T : IService
    {
        if (_mappings.Count == 0)
            throw new InvalidOperationException("There are no mappings");

        lock (_lock)
        {
            var typeName = typeof(T).Name;
            if (_mappings.ContainsKey(typeName))
                return (T)_mappings[typeName]();

            return default(T);
        }
    }

    /// <summary>
    /// Register the mappings needed for this service factory
    /// </summary>
    private void registerMappings()
    {
        register<IService1>(() => new Service1())
             .register<IService2>(() => new Service2())
             .
             .
             .register<IServiceN>(() => new ServiceN());
    }

    /// <summary>
    /// Register the service classes
    /// </summary>
    private ServiceFactory register<T>(Func<IService> mapping) where T : IService
    {
        var type = typeof(T).Name;
        if (!_mappings.ContainsKey(type))
            _mappings.Add(type, mapping);

        return this;
    }
} 
```

我的问题是，我可以在服务工厂中使用 IOC 容器并让它处理类型的注册和解析吗？这是一个好方法吗？

或者我可能有一个更根本的问题，我需要一个服务工厂，我应该使用一个吗？

我的 MVC 控制器需要重构只是一件简单的事情，即我可以尝试为每个服务坚持一个控制器？

只是想要一些关于这里最好的方法的提示，当涉及到 DI/工厂模式/其他模式等时，我仍然是一个新手 :)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:07:31.407

我认为一般建议是您应该尝试遵守单一职责原则，在您的情况下，这可以解释为让您的控制器相对较小并专注于他们所做的事情。这样，服务依赖项的数量就会很少，并且传递所有必需的服务不应该是一件麻烦事。

也就是说，有时为多个服务提供单个访问点、减少传递的参数数量或允许服务本身之间的交互（IoC 容器不喜欢循环关系/依赖关系）可能很有用。

我需要后者，并决定创建一个 UnitOfWork 类，该类提供对所有服务槽属性的访问。UnitOfWork 将所有服务作为构造函数参数，然后作为构造函数参数传递给控制器​​。这允许通过 IoC 构建和注入整个链（服务、uow 和控制器），并且如果您保持对象构建成本较低（通过避免在构造函数中做大量工作），那么性能开销将最小化。

从务实的角度来看，这两种解决方案都可以。但是，使用第二种方法会使代码变得意大利面的风险更大，因为不清楚在哪里使用了哪些服务。

# php - PHP：如何使用 cron（或其他方法）让 PHP 脚本每秒运行一次？

> ID：15933355
> 
> 赞同：0
> 
> 时间：2013-04-10T18:15:34.477
> 
> 标签：php, cron

如果我有一个每分钟运行一次的 cron 作业，并且第一次迭代运行 62 秒，那么第二次迭代会等到第一次出现结束，还是会发生相同的 cron 作业同时运行？

为了说明这一点，请参见场景 1：

```
|0    |60   |120  |180  |240  |300
------ Cron Job 1 Taking 60 Seconds
      --------- Cron Job 2 Taking 90 Seconds
            ------ Cron Job 3 Taking 90 Seconds but overlapping with the previous cron job 
```

以上是会发生什么，还是场景2会发生：

```
|0    |60   |120  |180  |240  |300
------ Cron Job 1 Taking 60 Seconds
      --------- Cron Job 2 Taking 90 Seconds
               XXX-------Cron Job 3 waiting til the next 1 minute interval starts 
```

我担心会有一段 30 秒标记为 XXX 的时间段不会运行 cron 作业。

我想完成什么？我想无限期地每秒执行一个 PHP 脚本。它不必每秒运行一次，但它必须运行、结束、运行、结束、运行、结束。如果一个迭代需要 5 秒，它只能在第一个结束后开始下一个。但它绝不能停止。问题是我无法确定迭代的长度。一次迭代可能需要 1 秒，也可能需要 5 秒，甚至更长。

1.  cron可以做到这一点吗？这样我就可以保证脚本无论如何都会每秒运行一次？
2.  如果不是，我怎么能保证一个 PHP 脚本无限期地运行，一个又一个迭代？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:42:14.767

您可以实现一个简单的锁定机制，如下所示。

```
if(!locked()) {
    lock();
    // your code here
    unlock();
} else {
    echo "script already running";
}

function lock()   { file_put_contents("write.lock", 'running'); }
function locked() { return file_exists("write.lock"); }
function unlock() { return unlink("write.lock"); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:18:48.917

是的。cron 启动作业，但不检查先前启动是否已完成。它不管理任何作业队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T02:05:11.957

我最终使用了[supervisord](http://supervisord.org/)，它解决了我所有的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:17:43.707

It will start a second process regardless of another instance. In your script you could check for other processes (e.g. if a global PID file exists) already running or something, depends on what you need exactly.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-24T22:19:11.760

您可能会考虑“守护”您的脚本，而不是使用 cron：[PEAR System Daemon](http://pear.php.net/package/System_Daemon "PEAR 系统守护进程")

从那里开始，您似乎需要构建一个简单的作业/任务/工作队列，并使用守护进程相应地调度和锁定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T18:19:31.013

> 第二次迭代会开始直到第一次出现结束吗？

对于大多数 Unix 系统默认的 Vixie cron，答案是“是”。

> 如何在执行 PHP 脚本的 Linux 系统上获得真正的每秒间隔？

这个问题很奇怪，请重新表述。但是，如果您希望每个脚本的单个实例同时运行，请使用 /usr/bin/flock 或任何其他互斥工具。

# php - php阻止直接访问不指向文件夹的url

> ID：15933361
> 
> 赞同：0
> 
> 时间：2013-04-10T18:16:06.527
> 
> 标签：php, .htaccess, protection, methodology, http-referer

我正在使用 .htaccess 和用户友好的链接。我`domain.com/contact`将页面重定向到`domain.com/contact-verify`表单提交后。如果页面验证用户提交的数据，则将页面重定向到`domain.com/thank-you-for-email`. 如果验证失败，则将页面重定向到`domain.com/contact`再次显示错误。（`Post - Redirect - Session Variables`流量）

如何防止直接访问`domain.com/contact-verify`和`domain.com/thank-you-for-email`.

我搜索`.htaccess`了用法，但只能找到保护特定文件的保护。另外我在谷歌上阅读了一些`$_SERVER["HTTP_REFERER"]`不可靠的信息？

作为说明，我已经`Options All -Indexes`在我的`.htaccess`.

你能描述一下获胜者的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:20:04.040

使用会话或 cookie 跟踪用户的进度。然后对于您要限制访问的页面，添加代码以检查用户进度并在用户未达到所需进度点时重定向（或显示拒绝访问消息，无论您想做什么）。

```
if (!isset($_SESSION['progress']) || $_SESSION['progress'] != 2) {
    header('Location: /contact');
    exit;
} 
```

# c++ - C++ 重载 `-` 运算符（如 `* -1`）

> ID：15933364
> 
> 赞同：0
> 
> 时间：2013-04-10T18:16:11.980
> 
> 标签：c++, operators

说我有一个`int`，像这样：

```
int foo = 5; 
```

然后我可以这样做：

```
int bar = -foo;     // -5 
```

我希望能够对我的班级做同样的事情，那么如何重载`-`运算符，用作`* -1`？我是否必须重载`*`操作员才能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:18:08.860

```
class MyClass
{
    friend MyClass operator-(const MyClass& x);
}; 
```

or

```
class MyClass
{
    MyClass operator-() const;
}; 
```

Take your pick (although I would go for the first).

# excel - 使用 VBA 以编程方式填写和通过电子邮件发送 Infopath 表单

> ID：15933365
> 
> 赞同：1
> 
> 时间：2013-04-10T18:16:14.607
> 
> 标签：excel, vba, infopath

我想使用 VBA 以编程方式填写 InfoPath 表单并通过电子邮件发送。表单的数据位于 Excel 工作表中。

# r - 从 R GUI 的 .csv 创建线性回归图

> ID：15933366
> 
> 赞同：1
> 
> 时间：2013-04-10T18:16:16.763
> 
> 标签：r, gwidgets

我是 R 编程的初学者。我编写了一个基本的 R 脚本，允许用户选择一个具有 2 列（X 和 Y）的 .csv 文件，将它们绘制在图表上以显示线性回归并打印 XY 关系的相关 rsquared 值。

有人可以解释将此代码添加到 gWidgets 的基础知识，以便我可以拥有一个带有两个按钮的 GUI 吗？- button1 将是一个 file.choose() 以选择 .csv 文件（我在其他地方看到过此代码）， button2 将运行线性回归并将绘图输出到显示窗口。

我已经阅读了所有 gWidgets 教程和代码片段，但我仍然不清楚如何执行上面描述的简单功能。我想我认为可以将现有的 R 代码剪切并粘贴到 gWidgets 按钮中，但我现在发现情况并非如此。

任何帮助将不胜感激。
亲切的问候

```
#CALCULATES LINEAR REGRESSION SCATTER PLOT FOR TWO COLUMNS - X and Y
# ALSO PRINTS r2 VALUE ON PLOT

#READ IN THE .CSV FILE - FILE SHOULD CONTAIN TWO COLUMNS WITH NO HEADER - X and Y
#CREATE DATAFRAME
test1 <- read.csv("C:/Data/test.csv", header=FALSE)

#ASSIGN THE DATA IN EACH COLUMN TO A VARIABLE NAME
X1 <- test1$V1
Y1 <- test1$V2

#PLOT DATA WITH APPROPRIATE LABELS
plot(X1, Y1, xlab="X", ylab="Y")

#CALCULATE THE BEST FIT LINE AND PRINT R2 VALUE ON PLOT
abline(fit <- lm(X1 ~ Y1, data=test1), col='red')
legend("topright", bty="n", legend=paste("r2 is", format(summary(fit)$adj.r.squared, digits=4))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:50:52.903

我猜你正在寻找一些简单的东西，比如：

```
library(gWidgets)
options(guiToolkit="tcltk") ## or RGtk2 ...

w <- gwindow("Your GUI", visible=FALSE)
g <- ggroup(cont=w, horizontal=FALSE)

upload <- gfilebrowse("Select a csv file", cont=g)
btn <- gbutton("Do it", cont=g)
enabled(btn) <- FALSE

filename <- NULL
do_it <- function(...) {
  message("Read csv file in filename")
  message("make graphic")
  message("make summary")
}

addHandlerChanged(upload, handler=function(h, ...) {
  val <- svalue(upload)
  if(!is.na(val)) {
    filename <<- val
    enabled(btn) <- TRUE
  }
})
addHandlerChanged(btn, handler=do_it)

visible(w) <- TRUE 
```

# php - 使用php表单从mysql下载文件时遇到问题

> ID：15933368
> 
> 赞同：0
> 
> 时间：2013-04-10T18:16:17.920
> 
> 标签：php, mysql, download

嗨，我刚刚开发了一个原型，允许用户通过动态下拉列表选择一些选项，然后将一个小文件上传到 mysql。我刚刚完成了可以正常工作并正确返回结果的搜索功能。最近几天让我陷入困境的是允许用户下载搜索结果中返回的文件之一。我已将结果放入 html 表中并使用表单作为下载选项，这就是我怀疑问题出在表单的地方，因为当我弄乱了文件下载工作但当用户在上一页上点击搜索时。

我的阅读让我走到了这一步，我已经查看了一些问题，但似乎没有一个能解决问题。我还是 php 新手，所以请原谅我凌乱的结构。任何帮助将非常感激。

这是 results_page.php 的脚本

```
 if (isset ($resultts) and ($tests))

{

$sql = "SELECT p.logID, p.fileData, p.fileName, p.mimeType, p.dateCreated, t.testName,      r.resultType
    FROM result AS r 
    INNER JOIN product_logs AS p 
    ON r.resultID=p.resultID
    INNER JOIN test AS t
    ON t.testID=r.testID
    WHERE t.testName LIKE '%$tests%'
    AND r.resultType LIKE '%$resultts%'
    ORDER BY p.dateCreated DESC";

$result1= mysqli_query($sql) or die (mysqli_error());

while ($row = mysqli_fetch_array($result1))
{
$filename = $row['fileName'];
$filetype = $row['mimeType'];
$filetest = $row['testName'];
$fileresult= $row['resultType'];
$filedate=$row['dateCreated'];
$fileid=$row['logID'];
$filedata=$row['fileData'];

echo"<table>";
echo"<tr><th>File Name</th><th>File Type</th><th>Test</th><th>Result</th><th>Date</th>    <th>options</th></tr>";
echo"<tr valign=top>";
echo "</tr>";
echo"<td><'".$filename."'</td>";
echo "<td><'".$filetype."'</td>";
echo"<td><'".$filetest."'</td>";
echo"<td><'".$fileresult."'</td>";
echo"<td><'".$filedate."'</td>";
echo "<td><form action= confirm_download.php method= post</td>";
echo "<div>";
echo "<input type =hidden name=action value= '".$filename."' />";
echo "<input type=submit name=action value=download/>";
echo "<div>";
echo "</form>";
echo "</td>";

echo "</table>";
}

if ($_POST['action']=='download')
{
// Content-type must come before Content-disposition
header("Content-type: $filetype");
header("Content-disposition: attachment filename=$filename");
header('Content-length: ' . strlen($filedata));

echo $filedata;
exit();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:28:28.573

您有 2 个带有名称操作的输入。从提交按钮中删除 name=action。

```
echo "<input type =hidden name=action value= '".$filename."' />";
echo "<input type=submit name=action value=download/>"; 
```

所以让它像这样

```
echo "<input type =hidden name=action value= '".$filename."' />";
echo "<input type=submit value=download/>"; 
```

**编辑**

好的，现在修复您的`<form>`标签。它缺少`>`... 它应该在 td 之前打开`<td>`或在该 td 内关闭。

并关闭`<div>`标签，因为现在您打开标签两次，而不是打开一次并关闭一次。所以第二个`<div>`应该变成`</div>`

所以这...

```
echo "<td><form action= confirm_download.php method= post</td>";
echo "<div>";
echo "<input type =hidden name=action value= '".$filename."' />";
echo "<input type=submit name=action value=download/>";
echo "<div>"; 
```

应该变成这样...

```
echo "<form action= confirm_download.php method= post>";
echo "<div>";
echo "<input type =hidden name=action value= '".$filename."' />";
echo "<input type=submit name=action value=download/>";
echo "</div>";
echo "</form>"; 
```

**编辑 2**

好的，你现在的新问题是：

```
echo "<input type =hidden name=action value= '".$filename."' />"; 
```

此行使 $_POST['action'] 填充文件名。

但后来你说：

```
if ($_POST['action']=='download') 
```

这永远不会是真的（除非文件名实际上是“下载”......）您可以将 if 更改为：

```
if (isset($_POST['action'])) 
```

# video - YouTube 视频全屏模式看起来很模糊

> ID：15933369
> 
> 赞同：-2
> 
> 时间：2013-04-10T18:16:32.747
> 
> 标签：video, youtube

我遇到的问题是，当我在全屏模式下观看 Youtube 视频时，它看起来很模糊。视频不是我做的。我可以就如何解决问题提供什么建议，以便在全屏模式下看起来不错。

我的想法是评论使其成为更高质量的视频。如果是这样，不确定涉及到什么。YouTube 视频中的哪些内容使其在全屏模式下看起来不错？

我的问题不是如何以 480p 等显示视频，而是如何创建视频以使其在全屏模式下以 480p 显示时看起来不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:19:54.890

单击右下角的“齿轮”图标，如果列出，则将质量更改为更高的值，例如：720p 或 1080p。

# java - break 不能在循环或开关之外使用

> ID：15933374
> 
> 赞同：2
> 
> 时间：2013-04-10T18:16:56.560
> 
> 标签：java

```
String value = custom.getdob().toString();
if (value == null || value.equals("")) {
    holder.item3.setText("-");
    break;
} 
```

我实际上覆盖了getView方法，所以我无法`return`在我的if条件之后放置a，因为它说必须返回视图，但我想在检查后退出if条件。所以尝试了一下`break`，我收到了这个错误“**不能在循环或开关之外使用中断**”

```
 break; = > Throws break cannot be used outside of a loop or a switch
    return; = > This method must return a result of type View 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T18:22:41.963

为什么你甚至需要一个`break`那里？无论如何，该`if`块已经完成，因此控制将退出该块。

如果您想返回视图而不是`break;`，则放`return holder;`（假设持有者是视图）

break 只能用于 switch & loops (for/while/do-while)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:19:50.287

我认为在这种特殊情况下，您可以返回 null 以退出方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:19:37.177

`return viewObject;`你必须使用。似乎是方法签名是

> 公共视图 getView(){...}

它清楚地表明它应该返回 View 对象或 null。因此，您可以使用`return null;`或返回预期的视图对象。

# facebook - Facebook OAuth 问题？无限循环更改 URL 上的“状态”参数

> ID：15933382
> 
> 赞同：5
> 
> 时间：2013-04-10T18:17:07.467
> 
> 标签：facebook, url, facebook-graph-api, oauth, facebook-oauth

我们的应用程序运行良好，但是，当我们尝试在画布之外（直接在[http://example.herokuapp.com](http://example.herokuapp.com)上）输入我们的 Facebook 应用程序时，我们没有任何改变，并且在提供我们的 FB 用户和密码后，我们是陷入无限循环，其中 URL 上的“状态”参数不断变化：

```
https://example.herokuapp.com/?state=05b40a2e4d2c1f7b4c13a026a069acc3&code=AQCql520w_5dJjHnJlojMvzSCukAMrRsjqCipdkDP3N4h4zUQH72Q79oH2EMd_tQDv-fwKTJr2LG-azBUt37bUX06r3t9QHBwb27XBQyxmgdGdR_A1flZBY_oP-L0UEhjSu1FE8v2blILC8EuEWLNikgtkmaWWwy9e93KQX00wiVj422pzHuzn-m9_jZEUiKsf3dQIwCE3V7UBHMZCD9gS0#_=_ 
```

在 FB 画布内部，它工作正常。我们有一个双应用程序（测试环境），在画布内外都可以正常工作（相同的代码和配置）。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:43:23.880

您确实两次发布了该问题，并为他们俩都增加了赏金。这很奇怪：P

[Facebook 应用程序无限循环尝试从画布上登录](https://stackoverflow.com/questions/15965133/facebook-app-on-infinite-loop-trying-to-log-in-out-of-canvas/16040524)

正如我已经回答的那样，有人遇到了同样的问题并在上面发表了一篇博文：

[http://thinkdiff.net/facebook/facebook-apps-infinite-redirection-solution/](http://thinkdiff.net/facebook/facebook-apps-infinite-redirection-solution/)

可能是配置问题。

也尝试更新您的 sdk。

清除缓存和 cookie。

# python - 在 scipy 中旋转图像时填充所需的颜色

> ID：15933385
> 
> 赞同：4
> 
> 时间：2013-04-10T18:17:17.920
> 
> 标签：python, image, rotation, scipy

我正在使用 scipy 旋转图像，如下所示

```
 scipy.misc.imrotate(im,60) 
```

旋转后的图像充满黑色值，我想要白色。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T04:25:50.653

`scipy.misc.imrotate`只是在幕后使用 PIL。你可以简单地使用 PIL 来完成它，但它非常笨重。

最好只使用`scipy.ndimage.rotate`。（其中的功能`scipy.misc`有些晦涩，很少使用。）

kwarg`cval`控制“背景”值。

在你的情况下：

```
import numpy as np
import scipy.ndimage

data = 256 * np.random.random((10,10))
data = data.astype(np.uint8)

rotated = scipy.ndimage.rotate(data, 60, cval=255)
print rotated 
```

产量：

```
[[255 255 255 255 255 255 255 255 255 255 255 255 255 255]
 [255 255 255 255 255 150 255 255 255 255 255 255 255 255]
 [255 255 255 255 160 234 179 152 255 255 255 255 255 255]
 [255 255 255 255 120 206 114  19 173 188 255 255 255 255]
 [255 255 255 172 113 144 159 162 175  89  43  62 255 255]
 [255 255 255  81 170 194 205 137 158 190 196 123 186 255]
 [255 255 115  67 118 101  53  33 108  34 125  61 255 255]
 [255 255 176 126 113 189 170 120 118  10 182 165 255 255]
 [255 150 209 101   9 146 213  99 134 162 133 255 255 255]
 [255 255 190 126 194 159 119  67 171 240 143 255 255 255]
 [255 255 255 255 174 184 211  99 103 139 255 255 255 255]
 [255 255 255 255 255 255 167 232  70 247 255 255 255 255]
 [255 255 255 255 255 255 255 255 102 255 255 255 255 255]
 [255 255 255 255 255 255 255 255 255 255 255 255 255 255]] 
```

# delphi - 使用 Delphi XE2 编辑 dbgrid 时键盘语言更改为默认值

> ID：15933387
> 
> 赞同：0
> 
> 时间：2013-04-10T18:17:21.067
> 
> 标签：delphi, keyboard, delphi-xe2, dbgrid

Windows 中的默认输入语言是美国英语。如果您更改为另一种语言（在我的情况下为希腊语），然后尝试编辑 dbgrid 上的单元格，只需将鼠标放在单元格上或退出网格后，它就会自动更改为默认（英语）。如果默认是希腊语，也会发生同样的情况，更改为英语，然后编辑网格，它会变回希腊语！

我试图通过在运行时使用 LoadKeyboardLayout(klId, KLF_ACTIVATE) 更改键盘来解决问题，但结果相同。

# css - box-sizing 和 height 预期行为

> ID：15933388
> 
> 赞同：1
> 
> 时间：2013-04-10T18:17:27.317
> 
> 标签：css

我最近遇到了一个问题，我似乎与`box-sizing:border-box`css 中的标签有非常不一致的行为。例如，下面的代码块似乎完全忽略了标签。

```
<!DOCTYPE html>
<html>
<head>
<style>
.one {
margin-bottom:30px;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box; 
margin-left:10px;
overflow:hidden; 
background-color:green; 
width:40px; 
height:40px;
}
.two {
height:30px; 
width:30px; 
background-color:black; 
}
</style>
</head>
<body>
<div class = 'two'></div>
<div class = 'one'></div>
<div class = 'two'></div>
</body>
</html> 
```

我必须假设这是预期的行为，但我还没有看到任何文章明确谈论 box-sizing 不起作用的实例，并且通过实验我无法找到似乎影响它的 CSS 属性，除了基于像素的宽度/高度似乎与它配合不佳。有人愿意澄清这是仅适用于百分比还是仅适用于水平的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:42:37.350

我不确定你是否理解`box-sizing:border-box`应该做什么。那个片段忽略标签怎么样？请解释您期望的行为以及这有何不同。

至于房产本身，我假设您已经环顾四周，您熟悉[box-model](http://www.w3.org/TR/CSS2/box.html)。

例如，使用“普通”框模型向元素添加填充会将填充添加到元素的*外部*，但是，使用相同的填充`box-sizing:border-box`会将填充添加到元素的*内部*，这将保留您的原始大小.

这可以在下面的[jsFiddle](http://jsfiddle.net/qDvpz/)中说明。

```
<style>
.one {
 -webkit-box-sizing: border-box;
 -moz-box-sizing: border-box;
 box-sizing: border-box;
 width:50px;
 height:50px;
 padding:10px;
 background-color:#3e3e3e;
}

.two {
 width:50px;
 height:50px;
 padding:10px;
 background-color:red;
} 
```

```
<div class = "one">one1</div><div class = "one">one2</div><div class = "one">one3</div>
<div class = "two">two1</div><div class = "two">two2</div><div class = "two">two3</div> 
```

这种情况需要确保您的数学是正确的，否则在不使用border-box 属性时可能会破坏您的样式。例如，如果您的`<div>`s 将跨越页面的三分之一，您可以这样设置：

```
<style>
.one {
    width:33%;
    background-color:#3e3e3e;
    float:left;
}
</style>

<div class = "one">one1</div>
<div class = "one">one2</div>
<div class = "one">one3</div> 
```

[http://jsfiddle.net/b4LNp/](http://jsfiddle.net/b4LNp/)

这很好，但是不添加填充`border-box`会导致 div 的总大小超过 33%（在本例中为 33% 宽度 + 1em 填充）。这将破坏您创建的列，因为它们现在太宽而无法并排放置。

```
<style>
.one {
    width:33%;
    background-color:#3e3e3e;
    float:left;
    padding:1em;
}
</style>

<div class = "one">one1</div>
<div class = "one">one2</div>
<div class = "one">one3</div> 
```

[http://jsfiddle.net/u4w5B/](http://jsfiddle.net/u4w5B/)

使用`border-box`will 代替将填充放在元素内部，将每个填充保持在 33% 并确保无论您如何间隔元素，它们都将保持您最初告诉它的宽度。这消除了对许多额外的、不必要的数学的需要。

```
<style>
.one {
    width:33%;
    background-color:#3e3e3e;
    float:left;
    padding:1em;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; 
}
</style>

<div class = "one">one1</div>
<div class = "one">one2</div>
<div class = "one">one3</div> 
```

[http://jsfiddle.net/u4w5B/1/](http://jsfiddle.net/u4w5B/1/)

有关更多信息，请查看以下链接：

[w3 box-model解释](http://www.w3.org/TR/CSS2/box.html)

[Paul Irish 的建议`*{box-sizing:border-box}`](http://paulirish.com/2012/box-sizing-border-box-ftw/)

[CSS 技巧 box-sizing](http://css-tricks.com/box-sizing/)

[CSS3 中的 Hong Kiat 大小调整](http://www.hongkiat.com/blog/css3-box-sizing/)

希望有帮助！

# django - Django passing multiple values to html page

> ID：15933392
> 
> 赞同：0
> 
> 时间：2013-04-10T18:17:35.990
> 
> 标签：django

In my html page I want to display latest jobs and popular jobs. In latest jobs I'm filtered based on posted date. Actually what I want means to display popular jobs also these can be filter by count depends on job title. Is this possible to passing multiple values to html page. Give me some idea

```
views.py  
def home(request):
    now=datetime.now()
    d=datetime(now.year, now.month, now.day)
    d1= d.strftime('%Y-%m-%d')
    latest = jobs.objects.filter(postdate__lte=d1).order_by('-postdate')
    return render_to_response('registration/home.html', {'latest': latest})

Can I use like this
return render_to_response('registration/home.html', {'latest': latest},{'popular':popular}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:22:35.080

上下文是一个字典：

```
render_to_response('registration/home.html', {'latest': latest, 'popular': popular}) 
```

这真的是基本的 Python。你应该做一个教程。

# java - Read/Write to command-line .exe Java

> ID：15933397
> 
> 赞同：0
> 
> 时间：2013-04-10T18:17:48.690
> 
> 标签：java, process, runtime.exec

I'm trying to launch a process in java, read the output, write to the program, then read what it responds with. From all the other answers on SO, this is what I have come up with:

```
class Main
{
    public static void main(String[] args) {
        String line = "";
        try {
            ProcessBuilder pb = new ProcessBuilder("C:\\myProgram.exe");
            Process p = pb.start();
            BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
            BufferedWriter output = new BufferedWriter(new OutputStreamWriter(p.getOutputStream()));
            while ((line = input.readLine()) != null) {
                System.out.println(line);
            }

            output.write("foo");
            output.newLine();
            output.flush();

            while ((line = input.readLine()) != null) {
                System.out.println(line);
            }

            p.destroy();
        }
        catch (IOException e){
        }
    }
} 
```

It launches the program, and gives me the output just as expected.

When i write `foo`, I expect the program to come back with another response, but it never does.

What am I doing wrong?

# javascript - 调用 onClick 事件

> ID：15933400
> 
> 赞同：0
> 
> 时间：2013-04-10T18:17:55.673
> 
> 标签：javascript, jquery, click

我的代码有问题，让我先粘贴我的代码，大部分都不重要，只是它的上下文。

```
 $("#navbar > a").click(function(event) {
                $('#controls').show();
                var currentNum = parseInt($(this).attr('class'), 10);
                document.getElementById('pNum').innerHTML = "pg. " + (currentNum + 1);
                event.preventDefault();

                var t2 = ($(this).attr('id')).split("#");
                var $tr = $(zip.file(localStorage.selected + "/" + t2[0]).asText());
                document.getElementById('main').innerHTML = "";
                $('#main').append($tr);
                document.getElementById(t2[1]).scrollIntoView()
                current = ($(this).attr('class'));
                $(function() {
                    $("#main img").each(function() {
                        var imgPath = localStorage.selected + "/" + $(this).attr('src');
                        var imageData = zip.file(imgPath).asBinary();
                        $(this).attr('src', 'data:image/jpeg;base64,' + btoa(imageData)); 
                    });

                });

                $("#main a").click(function(event){
                    event.preventDefault();
                    var elems = ($(this).attr('href')).split("#");
                    var $path = $(zip.file(localStorage.selected + "/" + elems[0]).asText());
                    document.getElementById('main').innerHTML = "";
                    $('#main').append($path);
                });
            }); 
```

现在底部的点击事件只有在我将它放在创建内容的代码中时才有效，这不应该是这种情况，其次它只工作一次，在我第一次调用它之后它拒绝工作，任何建议?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:19:54.233

听起来您想改用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)。例如：

```
$(document).on('click', '#main a', function(event){
    event.preventDefault();
    var elems = ($(this).attr('href')).split("#");
    var $path = $(zip.file(localStorage.selected + "/" + elems[0]).asText());
    document.getElementById('main').innerHTML = "";
    $('#main').append($path);
}); 
```

问题是该`$('#main a').click(...)`方法要求`#main a`在绑定单击处理程序时元素已经存在于页面上。

事件委托允许您侦听文档（或任何其他将始终存在的元素）上的单击事件，并查看该事件是否源自某个`#main a`元素。这使您可以即时添加/删除元素，而不必担心哪些元素已绑定或尚未绑定单击处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:23:20.423

我以前遇到过这个问题，你试过用这个吗？：

```
$("<element id>").on( 'click', this, function ()
{
      // Your code here
} 
```

参考：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

编辑*抱歉之前没有看到答案（上面的答案中有更好的解释） - 但我会保留我的供参考。

# actionscript-3 - What is the equivalent of AS3's foo:* in Dart?

> ID：15933402
> 
> 赞同：2
> 
> 时间：2013-04-10T18:18:05.240
> 
> 标签：actionscript-3, dart

I just started using Dart, and I haven't been able to find answers to these issues.

How do these three AS3 lines translate into Dart?

1) `static var asset:*;` <<-- basically how do I handle `*` type

2) `static function getAsset():* {` <<-- same issue, how do I handle `*` type?

3) `static function loadImages(... images):void {` << -- how do I handle `...` argument?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:13:58.680

我不知道 ActionScript，但一些快速的谷歌搜索表明星号表示“可以是任何类型”。由于 Dart 是可选类型的，这意味着您可以关闭类型。我相信`static`两种语言的工作方式大致相同。

所以：

1)`static var asset:*;`变成`static var asset;`

2)`static function getAsset():* {`变成`static getAsset() {`

3) Dart 不支持可变参数，但[这个答案](https://stackoverflow.com/a/13732459/1427098)有一个解决方法。

# javascript - 如何防止在子窗口中执行 Greasemonkey 函数？

> ID：15933411
> 
> 赞同：3
> 
> 时间：2013-04-10T18:18:25.127
> 
> 标签：javascript, iframe, greasemonkey

我有一个 Greasemonkey 功能，可以在我的浏览器访问的每个网站上创建一个按钮。

我想防止在访问网站的主窗口的所有子窗口中发生这种情况。（现在该按钮显示在诸如adsense窗口或论坛中的输入文本区域之类的子窗口上，当我在一个网站上时可以多次看到它）。

如何将此功能限制在网站的主窗口中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:10:57.170

那些“子窗口”是`<iframe>`s。
查看类似问题：

*   [每个页面加载只运行一次 Greasemonkey 脚本？](https://stackoverflow.com/questions/4190442/run-greasemonkey-script-only-once-per-page-load)
*   [只执行一次函数](https://stackoverflow.com/questions/12117902/execute-function-only-once)
*   [为什么 jQuery 在我的 GreaseMonkey 脚本中加载两次](https://stackoverflow.com/questions/5876874/why-does-jquery-load-twice-in-my-greasemonkey-script)

* * *

Greasemonkey 将在 iframe 上运行，就像它们是主页一样 - 如果 iframe 与脚本的`@include`、`@exclude`和`@match`指令匹配。

要解决子窗口/iframe 问题：

1.  调整您的[`@include`、`@exclude`rules](http://wiki.greasespot.net/Include_and_exclude_rules)和/或您的[`@match`指令](http://developer.chrome.com/extensions/match_patterns.html)，以尽可能多地消除不需要的 iframe。
    尽量避免在*每个*页面上运行脚本。

2.  如果只需要顶窗操作，请使用[该`@noframes`指令。](http://wiki.greasespot.net/Metadata_Block#.40noframes)

3.  要在函数级别进行控制，而不是整个脚本，您可以使用如下代码：

    ```
    if (window.top === window.self) {
        // CODE TO RUN ON MAIN PAGE
    }
    else {
        // CODE TO RUN IN IFRAME
    } 
    ```

# django - created custom year drop down field

> ID：15933413
> 
> 赞同：0
> 
> 时间：2013-04-10T18:18:29.527
> 
> 标签：django, django-forms

I've created year dropdown field. Here is [a code](http://dpaste.org/ahuBf/). It is showing in admin section. But when i tried to save the field. I get validation error `"Value u'2013' is not a valid choice"` Can someone help me? thanks

```
# fields.py

import datetime

from django.db import models

YEAR_CHOICES = []
for r in range(1980, (datetime.datetime.now().year+1)):
    YEAR_CHOICES.append((r, r))

class YearDropdownField(models.CharField):
    def __init__(self, *args, **kwargs):
        kwargs.setdefault('editable', True)
        kwargs.setdefault('max_length', 4)
        kwargs.setdefault('choices', YEAR_CHOICES)
        kwargs.setdefault('default', datetime.datetime.now().year)
        super(YearDropdownField, self).__init__(*args, **kwargs)

# models.py

year = YearDropdownField(_('Year')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:27:54.313

尝试

```
 for r in range(1980, (datetime.datetime.now().year+1)):
        YEAR_CHOICES.append((r, unicode(r))) 
```

# html - Trouble with layering divs with z-index

> ID：15933415
> 
> 赞同：2
> 
> 时间：2013-04-10T18:18:34.893
> 
> 标签：html, css, positioning

I'm trying to position a website header that will sit on top of my top menu navigation. But when I move header to the top z-index position, my navigation will not function because the layer is hiding behind it.

Here is the actual website - [http://www.richmindonline.com/test/](http://www.richmindonline.com/test/)

Code areas posted below:

Here is CSS:

```
 #wrapper {
    margin: 0 auto;
    width: 984px;
   }

#main-bg {
    width: 940px;
    clear:both;
    display: block;
    margin: 0px auto;
    border-bottom-left-radius:6px;
    border-bottom-right-radius:6px;
    background:#f0f0f0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

#access div {
    margin: 0px 0px 0px 20px;
    height:100%;
}

#access {
    display: block;
    margin: 0px auto;
    width: 940px;
    height: 37px;
    padding: 11px 0px 0px 0px;
    background:#f0f0f0;
    position:relative;
    z-index:-1;
}

#access ul {
    height:100%;
    font-size: 11px;
    list-style: none;
    margin: 0 0 0 -0.8125em;
}

#access ul li {
    float: left;
    position: relative;
    z-index:0;

}

#access a {
    color: #555;
    font-family:nobile;
    display: block;
    line-height: 35px;
    padding: 0px 1.2125em 0px 1.2125em;
    text-decoration: none;
    position:relative;
    z-index:1;
}

#access ul ul {
    -moz-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    display: none;
    float: left;
    margin: 0;
    position: absolute;
    top: 3.0em;
    left: 0;
    width: 188px;
    z-index: 9999;
} 
```

Here is the HTML code to the affected area:

```
<body class="body-<?php echo $options['body_color']; ?>">
  <div id="wrapper" class="hfeed <?php echo $options['skin_color']; ?>-header">
    <div id="header">   
      <div id="masthead">
        <div id="branding">
          <div id="blog-title">
            <span><a href="<?php bloginfo( 'url' ) ?>/" title="<?php bloginfo( 'name' ) ?>" rel="home"><img src="<?php echo $options['upload_image']; ?>" alt="Home" /></a></span>                          
          </div>

          <div id="social">
            <h1 id="blog-description"><?php echo $options['header_text']; ?></h1>
              <a href="<?php echo $options['social_facebook']; ?>" target="_blank"><img src="<?php echo bloginfo ('template_directory') . '/images/social-icons/facebook.png'; ?>" width="32" /></a>
              <a href="<?php echo $options['social_twitter']; ?>" target="_blank"><img src="<?php echo bloginfo ('template_directory') . '/images/social-icons/twitter.png'; ?>" width="32" /></a>
              <a href="<?php echo $options['social_youtube']; ?>" target="_blank"><img src="<?php echo bloginfo ('template_directory') . '/images/social-icons/youtube.png'; ?>" width="32" /></a>
              <a href="<?php echo $options['social_rss']; ?>" target="_blank"><img src="<?php echo bloginfo ('template_directory') . '/images/social-icons/rss.png'; ?>" width="32" /></a>
              <a href="<?php echo $options['social_digg']; ?>" target="_blank"><img src="<?php echo bloginfo ('template_directory') . '/images/social-icons/digg.png'; ?>" width="32" /></a>
          <div class="clear"></div>
        </div><!-- #social -->
  </div><!-- #branding -->
   </div><!-- #masthead -->
 </div><!-- #header -->

 <nav id="access" class="menu-<?php echo $options['skin_color']; ?>">

            <?php /*  Allow screen readers / text browsers to skip the navigation menu and get right to the good stuff. */ ?>
            <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to primary content', 'twentyeleven' ); ?></a></div>
            <div class="skip-link"><a class="assistive-text" href="#secondary" title="<?php esc_attr_e( 'Skip to secondary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to secondary content', 'twentyeleven' ); ?></a></div>
            <?php /* Our navigation menu.  If one isn't filled out, wp_nav_menu falls back to wp_page_menu. The menu assiged to the primary position is the one used. If none is assigned, the menu with the lowest ID is used. */ ?>
            <?php wp_nav_menu( array( 'theme_location' => 'primary','menu_class' => 'sf-menu') ); ?>
        </nav><!-- #access -->

<div id="main-bg" class="main-bg-full">

<div id="main-bg"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:22:35.260

您只需要给`<div class="rev_slider_1_1_wrapper"></div>`（产品滑块）一个相对位置和一个*小于*z-index on 的 z-index `<nav id="access"></nav>`，例如

```
/* Add */

.rev_slider_1_1_wrapper {
position: relative;
z-index: 1;
}

nav#access {
position: relative;
z-index: 2;
} 
```

它工作得很好..

# java - 在 Jersey 和嵌入式 Jetty 中忽略 LoggingFilter

> ID：15933416
> 
> 赞同：5
> 
> 时间：2013-04-10T18:18:37.643
> 
> 标签：java, jersey, embedded-jetty

我正在尝试`LoggingFilter`在嵌入式 Jetty 设置中为 Jersey 进行配置。使用的胶水代码如下：

```
ServletContainer servletContainer = new ServletContainer(application);
ServletHolder servletHolder = new ServletHolder(servletContainer);
servletHolder.setInitParameter("com.sun.jersey.config.feature.Debug", "true");
servletHolder.setInitParameter("com.sun.jersey.config.feature.Trace", "true");
servletHolder.setInitParameter("com.sun.jersey.spi.container.ContainerRequestFilters", 
  "com.sun.jersey.api.container.filter.LoggingFilter");
servletHolder.setInitParameter("com.sun.jersey.spi.container.ContainerResponseFilters", 
  "com.sun.jersey.api.container.filter.LoggingFilter"); 
```

但是日志过滤器实际上被忽略了，我在控制台中没有看到相关的日志。我怎样才能做到这一点？在 Jersey 1.x 和 2.x 上都进行了测试。

[相关答案](https://stackoverflow.com/a/2362106/248082)描述了如何使用`web.xml`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:40:52.017

我认为这是记录行为的一个非常微妙的细微差别，`ServletContainer`如果它不是一个彻底的错误。关于 init params 主题的[`ServletContainer`文档](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/spi/container/servlet/ServletContainer.html)如下：

> 所有初始化参数都作为创建的 ResourceConfig 的属性添加。

答案就藏在那里。具体来说，如果 ResourceConfig 实例不是由 ServletContainer 创建的，则 servlet 初始化参数不会作为属性添加，因此不会影响应用程序的配置。当您提供自己的`Application`实例时，就像您对 . 所做的那样`new ServletContainer(application)`，初始化大致遵循以下过程：

您的代码使用您的实例调用以下`ServletContainer`构造函数：`Application`

```
public ServletContainer(Application app) {
    this.app = app;
} 
```

容器将您初始化`ServletContainer`为典型`Servlet`生命周期的一部分：

```
protected void init(WebConfig webConfig) throws ServletException {
    webComponent = (app == null)
            ? new InternalWebComponent()
            : new InternalWebComponent(app);
    webComponent.init(webConfig);
} 
```

您的`Application`实例进入`InternalWebComponent`构造函数。An`InternalWebComponent`只是对 的轻微定制`WebComponent`，因此：

```
InternalWebComponent(Application app) {
    super(app);
} 
```

调用：

```
public WebComponent(Application app) {
    if (app == null)
        throw new IllegalArgumentException();

    if (app instanceof ResourceConfig) {
        resourceConfig = (ResourceConfig) app;
    } else {
        resourceConfig = new ApplicationAdapter(app);
    }
} 
```

在这里，由于您`Application`直接提供了一个实例，因此 a`ResourceConfig`在该 second 的一个分支中为您构建`if`。构建后立即在`WebComponent.init()`新组件上调用（请参阅`ServletContainer.init()`上面的调用，我们来自哪里）。在此调用中，*将*`init()`创建文档引用的“创建的 ResourceConfig” ，但在您的情况下，已经存在一个，如我们遵循的路径所示。即，不为空，因此下面的重要行不执行：*`resourceConfig`*

 *```
public void init(WebConfig webConfig) throws ServletException {
    ...
    if (resourceConfig == null)
        resourceConfig = createResourceConfig(config);
    ...
} 
```

该`createResourceConfig()`方法（仍在`WebComponent`）显示为：

```
private ResourceConfig createResourceConfig(WebConfig webConfig)
        throws ServletException {
    final Map<String, Object> props = getInitParams(webConfig);
    final ResourceConfig rc = createResourceConfig(webConfig, props);
    rc.setPropertiesAndFeatures(props);
    return rc;
} 
```

您可以在该调用中看到`setPropertiesAndFeatures()`用于将 servlet 的 init 参数复制到`ResourceConfig`实例中。不幸的是，这是进行该调用的*唯一*地方，在您的情况下，执行永远不会在这里进行，主要是因为您使用了非默认`ServletContainer`构造函数之一。

我希望原始作者`ServletContainer`只使用一个无参数构造函数编写，而其他两个是后来添加的，以便在 Servlet 3.0 容器中使用，而没有意识到引入了这种行为。否则，我希望在文档中看到*一些*提及它。

所以，长话短说：要么使用默认`ServletContainer`构造函数，要么自己找到一种方法来处理这部分：

```
Map<String, Object> props = getInitParams(webConfig);
rc.setPropertiesAndFeatures(props); 
```

第一种方法可能是最简单的。例如，您也可以将您的`Application`类指定为 init 参数，只要没有什么需要您提前实例化它，例如：

```
servletHolder.setInitParameter("javax.ws.rs.Application", "org.foo.MyApplication"); 
```

这样，将采用“正常”初始化路径，这意味着`WebComponent`将为您创建`ResourceConfig`并正确应用 init 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:24:34.990

我想你可能做错了。

```
// Creating an instance of Jersey servlet, right?
ServletContainer servletContainer = new ServletContainer(application);

// Putting it in a container by reference.
ServletHolder servletHolder = new ServletHolder(servletContainer); 
```

[此页面](https://cwiki.apache.org/WICKET/wicket-without-webxml-embedded-jetty.html)不会像您那样创建 servlet：

```
ServletHolder sh = new ServletHolder(WicketServlet.class); 
```

这样 Jetty 创建一个实例，并调用 servlet 的`init()`. 在您的情况下，您可能需要致电`init()`，但我不确定您将在哪里获得`ServletConfiguration`实例。

**更新：** 你应该这样尝试：

```
 ServletHolder servletHolder = new ServletHolder(ServletContainer.class);
  servletHolder.setInitParameter("javax.ws.rs.Application", "MyRESTApplication");
  servletHolder.setInitParameter("com.sun.jersey.config.feature.Debug", "true");
  servletHolder.setInitParameter("com.sun.jersey.config.feature.Trace", "true");
  servletHolder.setInitParameter("com.sun.jersey.spi.container.ContainerRequestFilters",
      "com.sun.jersey.api.container.filter.LoggingFilter");
  servletHolder.setInitParameter("com.sun.jersey.spi.container.ContainerResponseFilters",
      "com.sun.jersey.api.container.filter.LoggingFilter");

  ServletContextHandler contextHandler = new ServletContextHandler(ServletContextHandler.SESSIONS);
  contextHandler.addServlet(servletHolder, "/services/*");
  server.setHandler(contextHandler); 
```*

# java - Small Modification to Particular Implementation of Dijkstra's Algorithm

> ID：15933417
> 
> 赞同：1
> 
> 时间：2013-04-10T18:18:38.087
> 
> 标签：java, algorithm, dijkstra

Over the past few weeks I've been playing with a variety of implementations of Dijkstra's algorithm as part of a personal project (mainly to test performance). I have recently come across [this implementation](http://www.keithschwarz.com/interesting/code/?dir=dijkstra) of the algorithm, which I have tested and everything. However, I'm currently trying to modify that implementation so it takes an additional argument to represent the destination node, which means I want the algorithm to run only once from a specified source to a specified destination rather than to all other nodes in the graph.

I tried adding a third `targetNode` parameter but the `dest` variable found in the implementation is of type `Entry<T>` and my parameter was of type `Node` (a custom class I wrote), so I eventually got an incompatible types error message.

Is it possible to somehow make this modification? I did it easily with another implementation but I can't seem to figure it out for this one mainly due to the different types `Node` and `Entry<T>`. It's not really a big deal but I would like to do it.

Thanks!

EDIT: Here's what I did:

```
public static <Node> Map<Node, Double> dijkstraFibonacciHeap(DirectedGraph<Node> graph, Node source, Node target) {
    FibonacciHeap<Node> priorityQueue = new FibonacciHeap<>();  
    Map<Node, FibonacciHeap.Entry<Node>> entries = new HashMap<>();
    Map<Node, Double> result = new HashMap<>();

    for (Node node : graph) {
        entries.put(node, priorityQueue.enqueue(node, Double.POSITIVE_INFINITY));
    }

    priorityQueue.decreaseKey(entries.get(source), 0.0);

    while (!priorityQueue.isEmpty()) {

        FibonacciHeap.Entry<Node> curr = priorityQueue.dequeueMin();

        result.put(curr.getValue(), curr.getPriority());

        for (Map.Entry<Node, Double> arc : graph.edgesFrom(curr.getValue()).entrySet()) {

            if (result.containsKey(arc.getKey())) {
                continue;
            }

            double pathCost = curr.getPriority() + arc.getValue();

            // Error occurrs here. 
             target = entries.get(arc.getKey());
            if (pathCost < target.getPriority()) {
                priorityQueue.decreaseKey(target, pathCost);
            }
        } 
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:33:40.593

Dijkstra 算法的工作原理是找到从源节点到图中每个其他节点的最短路径。当然，一旦它找到到目标节点的最短路径，您就可以提前终止它，但这并不一定会导致很大的加速。

不过，如果您真的想加快最短路径查找速度，“中间相遇”技巧可能会很有用。您同时运行来自源的最短路径和来自接收器的最短路径（将每条边视为其反向）；一旦两个搜索都到达同一个节点，您就可以重建最短的源到目标路径。

如果您对图表的外观有很好的猜测，A* 是另一种方法。

我还应该指出，对这段代码的另一个非常非常简单的优化是停止将所有内容包装在对象中。您为将 s 包装`double`在类中`Double`以及您`Node`的 s 在类中的任何内容付出了很多，无论是在空间上还是在速度上。

# oracle - Oracle 表单的应用程序服务器

> ID：15933419
> 
> 赞同：-2
> 
> 时间：2013-04-10T18:18:38.820
> 
> 标签：oracle, deployment, oracle10g

我必须准备一个应用服务器来部署以 Oracle 10g 形式实现的应用程序。我将使用的服务器是 Sun Blade X6270 M3。现在的问题是，在我向开发人员（他恰好是个彻头彻尾的混蛋）询问我应该使用哪个应用程序服务器时，他说任何你喜欢的。
我所知道的关于应用程序的只是它将通过 url 提供。
老实说，我在这里很困惑，请帮助我为以 Oracle 10g 形式开发的应用程序选择应用程序服务器。我不会通过安装错误的应用程序服务器来浪费我的时间，我也不能要求开发人员指导我。
从而寻求您的帮助。下载服务器的链接真的会帮助我，请务必提及它是否是免费软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:37:50.913

您需要 OracleAS Forms Services 来运行 Forms。对于 Forms 10g，这意味着 Oracle 应用服务器。对于 Forms 11g（及更高版本），这意味着 Oracle WebLogic Server。

# vb.net - Visual Studio Build 失败，关键字子字符串中出现“对象未声明”

> ID：15933426
> 
> 赞同：0
> 
> 时间：2013-04-10T18:18:53.223
> 
> 标签：vb.net, visual-studio, msbuild

这很奇怪 - 我在作为一段代码的子字符串的变量上得到“对象未声明”。我在下面粘贴了一个示例。

[![错误图像片段](https://i.stack.imgur.com/SjtWM.png)](https://i.stack.imgur.com/SjtWM.png)
[（来源：[metroplexconsulting.com](http://metroplexconsulting.com/Images/Capture.png)）]

在 Handles 中的“les”上方的错误行中，被视为对象名称。（！？！）

感觉缓存可能已损坏，但我运行了 Clean，进入并删除了所有输出文件和文件夹，问题仍然存在。我刚刚移动了这个网站并重命名了它，所以也许这是一个线索。但我在该举动的文件中看不到任何残留物。

感谢您的帮助！

编辑：正如您将在下面的评论中看到的，这似乎与混合旧式网页和新式网页有关。我正在更新现有网站。我不知道它是否具体与VB有关。但是我现在可以通过将新的 asp.net 页面添加到旧站点（其 .Net 目标设置为 v4.5）来随意创建编译器错误。解决方法是复制现有页面并对其进行修改并关闭自动装配等。

# cloud - 如何在云中运行 Blender 桌面应用程序 (blender.org)？

> ID：15933427
> 
> 赞同：0
> 
> 时间：2013-04-10T18:18:57.117
> 
> 标签：cloud, virtualization, blender

我希望几个人能够访问服务器上的 Blender，并使用它。

做这个的最好方式是什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:12:37.627

我使用保管箱。我上传了一个搅拌机版本，并将我所有的 .blend 文件放在一个子文件夹中，与我的队友共享。它一直有效，直到我们不想同时编辑同一个文件......不幸的是，blender 不支持合作工作。

此方法适用于所有桌面操作系统。

# ibm-mobilefirst - worklight 应用程序中心上传文件失败

> ID：15933432
> 
> 赞同：0
> 
> 时间：2013-04-10T18:19:31.700
> 
> 标签：ibm-mobilefirst

将应用程序上传到 Worklight Application Center 时，message.log 中出现以下错误：

```
"com.ibm.puremeap.resources.desktop.UploadService W JSON error when trying to upload file IBMApplicationCenter.apk" 
```

此外，在 trace.log 中，整个堆栈跟踪如下：

```
[4/10/13 20:23:23:350 CST] 00000148 id=         com.ibm.puremeap.resources.desktop.UploadService             W JSON error when trying to upload file IBMApplicationCenter.apk
[4/10/13 20:23:23:351 CST] 00000148 id=         UploadService                                                2 response THROW
org.apache.wink.json4j.JSONException: The value for key: [pkg] was null.  Object required.
    at org.apache.wink.json4j.JSONObject.getString(JSONObject.java:1098)
    at com.ibm.puremeap.resources.desktop.UploadService.fileUploaded(UploadService.java:198)
    at com.ibm.puremeap.resources.desktop.UploadService.__fileUploadedJSON__(UploadService.java:102)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.wink.server.internal.handlers.InvokeMethodHandler.handleRequest(InvokeMethodHandler.java:63)
    at org.apache.wink.server.handlers.AbstractHandler.handleRequest(AbstractHandler.java:33)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.internal.handlers.CreateInvocationParametersHandler.handleRequest(CreateInvocationParametersHandler.java:54)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.handlers.AbstractHandler.handleRequest(AbstractHandler.java:34)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.internal.handlers.FindResourceMethodHandler.handleSubResourceMethod(FindResourceMethodHandler.java:183)
    at org.apache.wink.server.internal.handlers.FindResourceMethodHandler.handleRequest(FindResourceMethodHandler.java:110)
    at org.apache.wink.server.internal.handlers.FindResourceMethodHandler.handleSubResourceLocator(FindResourceMethodHandler.java:230)
    at org.apache.wink.server.internal.handlers.FindResourceMethodHandler.handleRequest(FindResourceMethodHandler.java:115)
    at org.apache.wink.server.internal.handlers.FindResourceMethodHandler.handleSubResourceLocator(FindResourceMethodHandler.java:230)
    at org.apache.wink.server.internal.handlers.FindResourceMethodHandler.handleRequest(FindResourceMethodHandler.java:115)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.internal.handlers.FindRootResourceHandler.handleRequest(FindRootResourceHandler.java:95)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.internal.handlers.HeadMethodHandler.handleRequest(HeadMethodHandler.java:53)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.internal.handlers.OptionsMethodHandler.handleRequest(OptionsMethodHandler.java:46)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.internal.handlers.SearchResultHandler.handleRequest(SearchResultHandler.java:33)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.internal.log.ResourceInvocation.handleRequest(ResourceInvocation.java:92)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.internal.log.Requests.handleRequest(Requests.java:76)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:26)
    at org.apache.wink.server.handlers.RequestHandlersChain.handle(RequestHandlersChain.java:22)
    at org.apache.wink.server.handlers.AbstractHandlersChain.doChain(AbstractHandlersChain.java:67)
    at org.apache.wink.server.handlers.AbstractHandlersChain.run(AbstractHandlersChain.java:52)
    at org.apache.wink.server.internal.RequestProcessor.handleRequestWithoutFaultBarrier(RequestProcessor.java:207)
    at org.apache.wink.server.internal.RequestProcessor.handleRequest(RequestProcessor.java:154)
    at org.apache.wink.server.internal.servlet.RestServlet.service(RestServlet.java:133)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1234)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:757)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:440)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1041)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:81)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:930)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$2.run(DynamicVirtualHost.java:274)
    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:529)
    at com.ibm.ws.threading.internal.Worker.executeWork(Worker.java:398)
    at com.ibm.ws.threading.internal.Worker.run(Worker.java:380)
    at java.lang.Thread.run(Thread.java:636)

[4/10/13 20:23:23:352 CST] 00000148 id=         UploadService                                                2 response Result: {0} 
                                                                                                               [{"message":"The value for key: [pkg] was null.  Object required.","status":200,"exception":"org.apache.wink.json4j.JSONException","acl_upload_denied":"IBMApplicationCenter.apk"}] 
```

谁能告诉我如何解决这个问题？顺便说一句，我成功尝试在 worklight 控制台中部署 wlapp 和适配器。

我的环境是：

```
- RHEL v6.x 64 bit
- Worklight v5.0.6
- DB2 10.x 
```

我做了进一步的调查：

1.  在 Win7 64 位上使用 Worklight Server 并连接到同一个数据库实例。每件事都很好。此外，我浏览了在 Linux 环境上运行的应用程序中心。在Win7上appcenter上传的应用程序显示没有问题。

2.  从两个环境（RHEL 6 和 Win7）检查 trace.log 中的 pkg 值。结果是不同的。

在 Win7 的 trace.log 上：

```
[2013/4/11   10:48:18:944 TST] 00000040 id=         ApplicationService                                           > __create__ ENTRY {0} {1} {2} 
                                                                                                               uri=http://[hostname_win7]:9080/applicationcenter/service/desktop/application/
                                                                                                               securityContext=org.apache.wink.server.internal.contexts.SecurityContextImpl_1700851040
                                                                                                               {"os":"Android","pkg":"com.ibm.appcenter","version":"1","versionName":"1.0","label":"IBM App Center","author":"appcenteradmin","author_display":"appcenteradmin","mandatory":"N","description":"","remote_url":"","is_installer":"Y","is_active":"Y","is_ready_prod":"Y","files":[{"type":"apk","cid":"1","size":1599708,"filename":"IBMApplicationCenter.apk"}]} 
```

在 RHEL 6 的 trace.log 上：

```
[4/11/13 11:44:48:694 CST] 00000308 id=         ApplicationService                                           > __create__ ENTRY {0} {1} {2} 
                                                                                                               uri=http://[hostname_RHEL]:10080/applicationcenter/service/desktop/application
                                                                                                               securityContext=org.apache.wink.server.internal.contexts.SecurityContextImpl_1489398078
                                                                                                               {"files":[{"filename":"IBMApplicationCenter.apk","type":"apk","cid":null,"size":null}],"os":"Android","description":"This is application null.","mandatory":"N","pkg":null,"label":null,"version":null} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:37:31.420

当您尝试将 APK 上传到 Worklight Application Center 时发生错误。在此步骤中，会分析 APK。RHEL 跟踪日志表明不仅缺少 pkg (null)，而且 APK 大小为 null。这可能表明 APK 非常错误。

第一步是验证APK是否正确。为此，只需解压缩它（APK 是一个 zip 文件），并验证它是否包含 AndroidManifest.xml。该文件是二进制文件，pkg 值将来自那里。如果丢失，这是致命的。

接下来，验证 APK 是否可以被 aapt 分析（位于您的 Android SDK 的平台工具中）：

```
aapt dump badging somefile.apk 
```

您似乎尝试上传 IBMApplicationCenter.apk，因此在您的特定情况下，它是：

```
aapt dump badging IBMApplicationCenter.apk 
```

这会输出几行，通常以一行开头，例如

```
package: name='com.ibm.appcenter' versionCode='1' versionName='1.0' 
```

这就是 pkg 值的来源。如果这不起作用，则 Worklight Application Center 无法找到 pkg，或者 Android Manifest 无效。

在 APK 上传机制期间，会发生以下情况：

*   如果在服务器配置文件（Liberty 的 bootstrap.properties、Tomcat 的 catalina.properties 或 WAS 的 Java VM 属性）中设置了属性 android.aapt 或 android.aapt.dir，则在该位置搜索 aapt，并且如前所述执行“aapt dump badging”，并由 Worklight Application Center 分析输出。这可以解释为什么您会在 Win7 和 RHEL 上看到不同的行为，因为那里有不同的 aapt 可执行文件。
*   如果未设置任何属性 android.aapt 或 android.aapt.dir，则 Worklight Application Center 不使用 aapt，而是尝试解码 APK 本身。因此，您可以尝试取消设置服务器中的 android.aapt 属性并重新启动服务器，以检查这是否解决了问题。

# javascript - for循环在onclick事件上设置打开窗口

> ID：15933438
> 
> 赞同：0
> 
> 时间：2013-04-10T18:19:47.983
> 
> 标签：javascript, javascript-events

我有一个月的日历，我需要打开一个新窗口，让我们在 onclick 事件中输入不同的信息。所以我有一个 for 循环，在其中我将 onclick() 事件设置为许多 div。title 属性保存被点击的月份的日期。这是我的代码，但无论我在一个月中的哪一天点击，它都是一样的。

```
window.onload = function () {
'use strict';
var i = 0, newAppt, infoGet;

newAppt = document.getElementsByTagName('div');
for (i = 0; i < newAppt.length; i++) {
    if (newAppt[i].getAttribute('title') !== '') {
        infoGet = newAppt[i].getAttribute('title');
        newAppt[i].addEventListener('click', newApptWin(infoGet), false);
    }
}
 };
function newApptWin(infoGet) {
'use strict';
window.open(infoGet,'test','toolbar=0');    
} 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:23:00.207

您的代码在页面加载时立即运行函数 newApptWin(infoGet)，并且它永远不会改变。您应该将一个函数传递给 eventListener，而不是函数的结果（您已在此处完成）。你可以像这样修复它：

```
newAppt[i].addEventListener('click', function() {newApptWin(infoGet);}, false); 
```

编辑（更新这是错误的）：

在 for 循环中声明 infoGet。你的整个脚本：

```
window.onload = function () {
'use strict';
var i = 0, newAppt;

newAppt = document.getElementsByTagName('div');
for (i = 0; i < newAppt.length; i++) {
    if (newAppt[i].getAttribute('title') !== '') {
        var infoGet = newAppt[i].getAttribute('title');
        newAppt[i].addEventListener('click', function() {newApptWin(infoGet);}, false);
    }
}
 };
function newApptWin(infoGet) {
'use strict';
window.open(infoGet,'test','toolbar=0');    
} 
```

或者您可以完全跳过 infoGet 并避免潜在的内存泄漏：

```
 newAppt[i].addEventListener('click', function() {newApptWin(newAppt[i].getAttribute('title'));}, false); 
```

编辑2：

```
window.onload = function () {
'use strict';
var i = 0, newAppt;

newAppt = document.getElementsByTagName('div');
for (i = 0; i < newAppt.length; i++) {
    if (newAppt[i].getAttribute('title') !== '') {
        var infoGet = newAppt[i].getAttribute('title');
        newAppt[i].addEventListener('click', newApptWin, false);
    }
}
 };
function newApptWin() {
'use strict';
window.open(this.getAttribute('title'),'test','toolbar=0');    
} 
```

# android - 在您第一次打开首选项页面之前，CheckBoxPreference 默认值不适用于 SharedPreferences

> ID：15933446
> 
> 赞同：0
> 
> 时间：2013-04-10T18:20:00.517
> 
> 标签：android

```
SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
            boolean cbTest = sharedPreferences.getBoolean("checkbox_test", false); 
```

这是我的偏好

```
<CheckBoxPreference
            android:defaultValue="true"
            android:key="checkbox_test"
            android:summary="@string/checkbox_tes"
            android:title="@string/title_heckbox_tes" /> 
```

并且`cbTest`变量默认情况下始终为假，当我打开带有首选项的页面然后`cbTest`再次检查时，则为真。为什么默认总是假的？为什么需要初始化首选项页面才能开始工作？

如何在打开首选项页面之前检查默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:42:43.567

我已经回答了类似的问题，但我无法快速定位。您必须初始化您的默认共享首选项。在您的主要活动中，将以下代码放入 onCreate()

```
PreferenceManager.setDefaultValues(this, R.xml.yourfilename, false); 
```

# javascript - 水平滚动不适用于移动设备

> ID：15933450
> 
> 赞同：1
> 
> 时间：2013-04-10T18:20:08.283
> 
> 标签：javascript, mobile, navigation

我在导航无法正常工作时遇到了一些问题。如果您在非移动浏览器上查看以下站点，您将了解导航应该如何工作。

[www.snottrocket.com](http://www.snottrocket.com)

问题在于移动平台。我在安卓手机和 iPad 上查看过这个网站，但它不像在桌面浏览器中那样工作。我确实记得它以前在 android 上运行良好，但可能是手机的浏览器已更新或其他原因。

我认为这可能与 URL 屏蔽有关，但我不确定。本质上，该站点位于另一个网站下的目录中，并使用 URL 掩码在 url 窗口中显示 snottrocket.com。这是通过 iFrame 完成的，但我不确定这是否是原因。

我假设另一个原因可能是滚动功能的 JS 代码。

不管怎样，我有点卡住了。任何人都想破解它并告诉我我缺少什么或如何解决它？

提前致谢。

# c++ - C ++：deque迭代器不可取消引用

> ID：15933452
> 
> 赞同：0
> 
> 时间：2013-04-10T18:20:10.210
> 
> 标签：c++, multithreading, queue, mutex, condition-variable

我正在尝试做一个简单的程序来了解 C++ 中的线程和并发。我创建了一个名为 MyQueue 的模板类，它实现了一个队列和一些变量来处理线程的同步。

该类只有两个用于从队列中获取和放置项目的函数和一个用于关闭队列并避免进一步访问的函数。

该程序编译得很好，但是在调试时出现以下错误：

**表达式：deque 迭代器不可取消引用**

无论线程在做什么，如果获取或放置项目，都可能发生这种情况。

这是代码：

```
template <class T> class MyQueue{
queue<T> myqueue;
int N;
bool open;
mutex m,m_open;
condition_variable cv,cv2;

public:
MyQueue(int size){
    N=size;
    open=true;
}

bool isOpen(){ 
    lock_guard<mutex> lg(m_open);
    return open;
}

void close(){
    lock_guard<mutex> lg(m_open);
    open=false;
    cv.notify_all();
    cv2.notify_all();
}

bool get(T &t){
    if(isOpen()==false)return false;
    if(myqueue.size()>0){
        {
            lock_guard<mutex> lg(m);
            t=myqueue.front();
            myqueue.pop();
            cv.notify_one(); 
        }
    }else{
        unique_lock<mutex> ul(m);
        cv2.wait(ul); 
        if(!isOpen()) return false;
        t=myqueue.front();
        myqueue.pop();
        cv.notify_one();
    }
    return true;
}

bool put(T t){
    if(!isOpen())return false;
    if(myqueue.size()<N){
        {
        lock_guard<mutex> lg(m); 
        myqueue.push(t);
        cv2.notify_one(); 
        }
    }else{
        unique_lock<mutex> ul(m);
        cv.wait(ul);
        if(!isOpen())return false;
        myqueue.push(t);
        cv2.notify_one();
    }
    return true;
}

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:10:06.137

我通过在 get 和 put 函数中从 wait 更改为 wait_for 解决了这个问题。例如在获取：

`if(!cv.wait_for(lock, std::chrono::milliseconds(2100), [this] { return !myQueue.empty();})) return false;`

以这种方式，线程只等待设定的时间，调用 myQueue.empty() 不需要适当的锁（如答案中所建议的那样）。

# c - K&R C书中的atoi函数

> ID：15933459
> 
> 赞同：1
> 
> 时间：2013-04-10T18:20:24.840
> 
> 标签：c, getchar, atoi, kernighan-and-ritchie

我对 K&R C 第 2 版中的 atoi() 函数示例有一些问题。只能使用 0 到 9 的字符。但是在我的程序逻辑的某个地方我做错了。

所以里面有这个功能：

```
#include <stdio.h>

int atoi(char s[]);

int main()
{
    int i;
    char ch;
    char co[50]; 
    int  ci[50];

    while(ch != EOF )
    {

        for(i=0;i<50-1 && (ch=getchar()) != EOF && ch != '\n';++i)
        {
            co[i] = ch;
            /*ci[i] = atoi(co[i]);*/ /*bugged*/
            ci[i] = atoi(co);
            printf("%d \n",ci[i]);
        }
        if(ch == '\n')
        {
            co[i] = '\n';
        }
        ++i;
        co[i] = '\0';
    }

    return(0);

}

/* as in the book: */
/* atoi: convert s to integer */

int atoi(char s[])
{
    int i, n;
    n = 0;
    for(i = 0; s[i] >= '0' && s[i] <= '9'; ++i)
    {
        n = 10 * n + (s[i] - '0');
    }

    return(n);
} 
```

以下是我得到的错误：

```
|In function 'main':
19|warning: passing argument 1 of 'atoi' makes pointer from integer without a cast [enabled by default]
3|note: expected 'char *' but argument is of type 'char'
||=== Build finished: 0 errors, 1 warnings (0 minutes, 0 seconds) ===| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:22:01.073

这

```
(s[i] = '0') 
```

应该读

```
(s[i] - '0') 
```

（注意减号而不是等号）。

这会将字符`'0'`..转换`'9'`为数值`0`.. `9`。

你也没有`atoi()`正确调用。它需要一个字符串，而不是一个`char`. 您可能应该从循环外部调用它。

而且`ch`不是正确的类型（应该是`int`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:26:20.167

`atoi();`函数需要指向字符串的指针。`char*`这就是警告的原因`warning: passing argument 1 of 'atoi' makes pointer from integer without typecase`

你声明 co 喜欢：`char co[50];` 但称`atoi(co[i]);`这是错误的，

注意它说的是 int 而不是 char。

一个例子：

`atoi("1");`有效但`atoi('1');` 无效。

所以即使`co`是正确的但`"12345678"`不正确的。`atoi(co)``atoi(co[i])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:33:53.530

```
printf("%c = ",co[i]);
ci[i] = atoi(co[i]);
printf("%d \n",ci[i]); 
```

您正在尝试将 char 转换为 int，但 char*是*整数值。所有你需要的是

```
printf("%c = %d\n", co[i], co[i]); 
```

如果你想要的是char的十进制值。如果您要做的是将 ASCII 数字转换为整数，那么

```
printf("%c = %d\n", co[i], co[i] - '0'); 
```

会做。

# algorithm - 查找两个移动、旋转的边界框相交的时间和位置

> ID：15933460
> 
> 赞同：2
> 
> 时间：2013-04-10T18:20:24.857
> 
> 标签：algorithm, math, optimization, geometry, collision-detection

虽然位置也很重要，但强调找到时间（交叉点开始的时间）。边界框（非轴对齐）具有位置、旋转、速度和角速度（旋转速率）。没有加速度，这应该真正简化事情......如果需要，我可能也可以删除角速度分量。连续或迭代函数都可以工作，但除非迭代函数主动收敛到解决方案（或缺乏解决方案），否则它可能会太慢。

我查看[了 SAT](http://www.metanetsoftware.com/technique/tutorialA.html)，但它似乎不是为了找到移动物体的实际碰撞时间而构建的。它似乎只适用于非移动快照，并且设计用于处理比矩形更复杂的对象，因此它实际上似乎不适合这个问题。

我已经考虑过可能从 8 个点中的每一个中绘制出轨迹，然后以某种方式具有一个函数来判断一个点是否处于另一个形状中并获得发生的时间范围，但我对如何去吧。一个不错的功能是它完全随时间运行并且忽略了离散“步骤”的想法，但它也让我觉得这是一种低效的方法。

不用担心广泛的阶段（确定是否值得看看这两个边界框是否可能重叠），我已经解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:38:30.580

找到一个精确的碰撞时间本质上是一个非线性的求根问题。这意味着您最终将需要一种迭代方法来确定最终的碰撞时间——但设计碰撞求解器的巧妙之处在于避免在实际不需要时进行根求解......

SAT 是一个定理，而不是一种算法：它可以用来指导碰撞求解器的设计，但它本身不是一个。简而言之，它说，如果你能证明存在分离轴，则物体没有碰撞。相反，如果你可以证明没有这样的轴，那么当前的对象*确实会*重叠。正如您所指出的，您可以或多或少地直接使用此原则来设计一个二进制“是/否”查询，以确定给定位置的两个对象是否重叠。

与碰撞求解器的不同之处在于问题是动画的或动力学的：对象位置是时间的函数。解决此问题的一种方法是从有效的“是/否”碰撞测试开始，将所有不等式视为时间的函数，并在此基础上使用寻根方法来查找实际的碰撞时间。

在已发表的学术文献中有多种现有方法。我推荐一些图书馆研究：最好的选择可能取决于你的应用程序的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:53:21.683

首先，不要考虑分别以速度`(x1, y1)`和速度移动的两个矩形`(x2, y2)`，您可以固定其中一个（将其速度设置为`(0, 0)`）并考虑另一个以速度移动的矩形`(x2 - x1, y2 - y1)`。

这样，情况看起来像一个矩形是不动的，另一个是经过的，可能会碰到第一个。

*   假设你没有任何角速度

![在此处输入图像描述](https://i.stack.imgur.com/WlC7D.png)

不难看出，您可以将第二个矩形的 4 个轨迹（它们是从边界框的不同角开始的光线`(x2 - x1, y2 - y1)`方向）与第一个矩形的 4 个边相交，静止不动。然后你必须反之亦然 - 找到第一个反向移动的矩形的交点 -`(-(x2 - x1), -(y2 - y1))`与第二个矩形的 4 个边。选择您找到的所有交点之间的最小距离（可能有 0-8 个），您就完成了。

不要忘记考虑许多特殊情况 - 当两个矩形的边平行时，当根本没有交叉点时等等。

请注意，这一切都是`O(1)`及时完成的​​，尽管计算非常复杂——一条射线和一条线段有 32 个交点。

*   如果您真的希望您的矩形以某种速度旋转，我建议您考虑@comingstorm 所说的：这是一个寻找非线性方程根的问题，但是，即使在这种情况下，如果您的角速度有限在您的矩形中，您可以将任务拆分为一系列[三元搜索](http://en.wikipedia.org/wiki/Ternary_search)子任务，尽管我认为这只是解决非线性问题的可能方法之一。

# asp.net-mvc - 错误。在新的 asp.net mvc4 错误中处理您的请求时出错，找不到 sql server？

> ID：15933461
> 
> 赞同：6
> 
> 时间：2013-04-10T18:20:25.887
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我创建了一个新的 asp.net mvc4 应用程序。然后我创建了一个控制器聊天和一个视图聊天。

```
 public class ChatController : Controller
    {
        //
        // GET: /Chat/

        public ActionResult Index()
        {
            return View();
        }

    } 
```

我不会粘贴聊天视图，因为我认为它与错误无关。

在 LoginPartial.cshtml 我有这个：

```
@if (Request.IsAuthenticated) {
    <text>
        Hello, @Html.ActionLink(User.Identity.Name, "Manage", "Account", routeValues: null, htmlAttributes: new { @class = "username", title = "Manage" })!
        @Html.ActionLink("Dashboard", "Index", "Dashboard", routeValues: null, htmlAttributes: new { id = "dashboard" })
        @Html.ActionLink("Chat", "Index", "Chat", routeValues: null, htmlAttributes: new { id = "chat" })

        @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" })) {
            @Html.AntiForgeryToken()
            <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
        }
    </text>
} else {
    <ul>
        <li>@Html.ActionLink("Register", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })</li>
        <li>@Html.ActionLink("Log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })</li>
    </ul>
} 
```

浏览到应用程序并登录后，我单击聊天并收到：错误。处理您的请求时发生错误。

通过使用 NLog 我得到了这个，我真的不知道什么代码正在尝试连接到 sql，因为聊天控制器没有任何服务器端代码来执行任何查询

```
04/10/2013 20:17:44: System.Web.HttpException (0x80004005): Unable to connect to SQL Server database. ---> System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)
ClientConnectionId:00000000-0000-0000-0000-000000000000
   at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)
   at System.Web.Management.SqlServices.SetupApplicationServices(String server, String user, String password, Boolean trusted, String connectionString, String database, String dbFileName, SqlFeatures features, Boolean install)
   at System.Web.Management.SqlServices.Install(String database, String dbFileName, String connectionString)
   at System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString)
   at System.Web.DataAccess.SqlConnectionHelper.EnsureDBFile(String connectionString)
   at System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation)
   at System.Web.Security.SqlRoleProvider.GetRolesForUser(String username)
   at WebMatrix.WebData.SimpleRoleProvider.GetRolesForUser(String username)
   at System.Web.Security.RolePrincipal.IsInRole(String role)
   at System.Web.Configuration.AuthorizationRule.IsTheUserInAnyRole(StringCollection roles, IPrincipal principal)
   at System.Web.Configuration.AuthorizationRule.IsUserAllowed(IPrincipal user, String verb)
   at System.Web.Configuration.AuthorizationRuleCollection.IsUserAllowed(IPrincipal user, String verb)
   at System.Web.Security.UrlAuthorizationModule.OnEnter(Object source, EventArgs eventArgs)
   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

web.config 有这个，我检查了 App_data 文件夹，MDF 文件在那里。

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-FullStackSampleApplication-20130404120217;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-FullStackSampleApplication-20130404120217.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

**更新：** 通过检查我的 web.config，我看到 elmah.axd 根据用户和角色受到保护，但任何地方都没有角色提供者，

```
 <location path="elmah.axd" inheritInChildApplications="false">
    <system.web>
      <httpHandlers>
        <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
      </httpHandlers>
      <authorization>
        <allow roles="admin" />
        <allow users="levalencia" />
        <deny users="*" />
      </authorization>
    </system.web>
    <system.webServer>
      <handlers>
        <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
      </handlers>
    </system.webServer>
  </location> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T19:05:41.620

这就是我设法解决问题的方法：

1.  我将 customErrors 设置为 Off。

    ```
    <customErrors mode="Off" defaultRedirect="~/Error/General">
        <error statusCode="404" redirect="~/Error/Http404"/>
        <error statusCode="403" redirect="~/Error/Http403"/>    
    </customErrors> 
    ```

2.  然后我注意到它试图找到一个名为索引的视图。

所以我将 loginpartial.cshtml 更改为

```
 @Html.ActionLink("Chat", "Chat", "Chat", routeValues: null, htmlAttributes: new { id = "chat" }) 
```

我的错误是控制器和视图的命名。关于 sql server 问题，我想它在日志中某处的应用程序中的其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T13:22:33.903

我解决了问题以评论以下身份验证标签：

```
 <authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" /> 
```

# php - 哈希密码，从破碎的方法到现在最安全

> ID：15933462
> 
> 赞同：6
> 
> 时间：2013-04-10T18:20:27.733
> 
> 标签：php, security, hash, passwords

我对社区只有一个简单的问题。曾几何时，当我开始编程时，我使用 md5 作为哈希密码，后来发现 md5 很容易被破解，我应该使用 salt 来确保它的安全。

比我对 md5 没有信心，而是想使用 sha1、sha256、sha512 加密。但问题是现在我有加密形式的密码

```
md5("password"+"salt") 
```

那时我不知道用户的密码。所以我做了什么

```
sha1(md5("password"+"salt")) 
```

现在在这个领域经过几次后，我发现 sha1 也不是太安全并且被破坏了我应该做的是使用 bcrypt() 使密码安全。

所以从现在开始我将使用

```
 crypt(sha1(md5("password"+"salt"))) 
```

密码现在非常安全，但主要问题仍然是用于创建哈希值的时间总是大于使用 bcrypt("password")

现在我想说的是，假设如果 bcrypt 被黑客入侵并且被发现被破坏，并且将来会出现更安全的新加密功能并且。比这种方式从旧值创建密码总是很耗时。

这可能是什么解决方案。据我所知，邮寄用户更改密码并不总是 100% 成功。另一件事是在存储新散列值的数据库中添加一个新字段，如果所有字段都已填充，则从 db 中删除 md5 值。但是以这种方式，以前的散列值仍然可见。

那么这件事会继续发生吗，或者你们有一些解决方案。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T18:23:58.530

[PHP 5.5 引入了密码 API](https://gist.github.com/nikic/3707231)来解决这个问题：

> **PHP 5.5 中新的安全密码哈希 API**
> 
> PHP 5.5 刚刚接受了新的简单易用的密码哈希 API 的 RFC。由于 RFC 本身是相当技术性的，而且大多数示例代码都是您不应该使用的，我想快速概述一下新的 API：
> 
> **为什么我们需要一个新的 API？**
> 
> 每个人都知道您应该使用 bcrypt 对他们的密码进行哈希处理，但仍然有数量惊人的开发人员使用不安全的 md5 或 sha1 哈希（看看最近的密码泄露）。造成这种情况的原因之一是 crypt() API 非常难以使用并且很容易出现编程错误。
> 
> 通过添加一个新的、非常简单易用的 API，我们希望让更多的开发人员转向 bcrypt。
> 
> **如何散列密码**
> 
> 创建密码哈希再简单不过了：
> 
> ```
>  $hash = password_hash($password, PASSWORD_DEFAULT); 
> ```
> 
> 这将使用默认算法（当前为 bcrypt）、默认负载因子（当前为 10）和自动生成的盐创建密码哈希。使用的算法和盐也将成为结果哈希的一部分，因此您根本不需要担心它们；）
> 
> 如果您不想坚持使用默认值（将来可能会更改），您还可以自己提供算法和负载因子：
> 
> ```
> $hash = password_hash($password, PASSWORD_BCRYPT, ['cost' => 12]); 
> ```
> 
> **验证密码**
> 
> 验证密码同样简单：
> 
> ```
> <?php
> // $password from user, $hash from database
> if (password_verify($password, $hash)) {
>     // password valid!
> } else {
>     // wrong password :(
> } 
> ```
> 
> 请记住：盐和算法是哈希的一部分，因此您不需要单独提供它们。
> 
> **重新散列密码**
> 
> 随着时间的推移，您可能想要更改密码散列算法或负载因子，或者 PHP 可能会更改默认值以更安全。在这种情况下，应使用新选项创建新帐户，并在登录时重新散列现有密码（您只能在登录时执行此操作，因为您需要原始密码进行重新散列）。
> 
> 这样做也很简单：
> 
> ```
> <?php
> function password_verify_with_rehash($password, $hash) {
>     if (!password_verify($password, $hash)) {
>         return false;
>     }
> 
>     if (password_needs_rehash($hash, PASSWORD_DEFAULT)) {
>         $hash = password_hash($password, PASSWORD_DEFAULT);
> 
>         // update hash in database
>     }
> 
>     return true;
> } 
> ```
> 
> 上面的代码片段将使您的哈希值与 PHP 默认值保持同步。但是您也可以再次指定自定义选项，例如`password_needs_rehash($hash, PASSWORD_BCRYPT, ['cost' => 12'])`.
> 
> **旧 PHP 版本的兼容层**
> 
> 新的 API 只会在 PHP 5.5 中引入，但您现在已经可以使用相同 API 的 PHP 实现了！升级到 5.5 后，兼容性实现将自动禁用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T20:00:04.760

实际上，如果*使用得当，* [MD5](http://en.wikipedia.org/wiki/MD5)对于密码散列仍然被认为是完全安全的。虽然确实存在针对 MD5 的实际[冲突攻击](http://en.wikipedia.org/wiki/Collision_attack)，这使得它对于数字签名等内容不安全，但破解密码哈希将需要[原像攻击](http://en.wikipedia.org/wiki/Preimage_attack)*，并且所有目前已知的针对 MD5 的此类攻击都是纯理论的。*

 *（也就是说，用 Bruce Schneier 的话说，“攻击只会变得更好”，因此开始从 MD5 转向更值得信赖的哈希函数，例如[SHA-2](http://en.wikipedia.org/wiki/SHA-2)或[SHA-3](http://en.wikipedia.org/wiki/SHA-3)，即使你不这样做也肯定不是一个坏主意'不需要*_*。）

问题是 MD5*本身*不适合散列密码，原因有两个，这两个实际上都是经过深思熟虑的设计特征（并且由其他散列函数如 SHA-2 和 SHA-3 共享）：

1.  MD5 是**确定性的**的，这意味着用 MD5 散列相同的输入总是产生相同的输出。

    这是密码散列的一个问题，因为有人可以（而且，确实，[有些人有](http://www.md5decrypter.co.uk/)）只是编译一个巨大的数据库，其中包含常见（但不那么常见）密码的 MD5 散列，允许任何知道任何密码的普通 MD5 散列的人在那些数据库中找到它只是查找它并找到原始密码。

    解决方案很简单，您已经知道了：在散列之前将密码与随机[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)组合，并将盐作为最终散列的一部分，以便以后可以用来验证密码。有足够多的可能盐（例如，至少几十亿）可供随机选择，编译散列数据库变得不可能，因为任何单个密码都可以散列到数十亿个不同的值。方便的是，这也意味着，即使您碰巧有两个用户使用相同的密码，也无法仅通过查看哈希来判断。

2.  MD5**速度很快**。通常这被认为是一件好事，但在密码散列中，事实证明，使过程过快只会帮助攻击者：合法用户并不真正关心散列他们的密码需要 10 纳秒或 10 毫秒，而攻击者尝试通过蛮力对数百万个密码进行散列来猜测密码将欣赏每次散列计算所节省的每一纳秒。

    同样，解决方案很简单且众所周知：只需将密码重新散列几千（或更多）次以减慢计算速度。甚至是标准化的方法，例如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)方法。或者，也可以使用专门构建的密码散列函数，如[bcrypt](http://en.wikipedia.org/wiki/bcrypt)或[scrypt](http://en.wikipedia.org/wiki/scrypt)，它们通常带有内置的加盐和可调整的迭代计数。

无论如何......所有这一切的重点是，事实上，计算你的密码散列例如

```
hash = salt + bcrypt( sha1( md5( password + salt ) ) ) 
```

完全没问题，即使有些复杂。此外，对于该哈希链，*几乎所有时间都被 bcrypt 消耗*，因为它是三个故意设计为慢的哈希函数中的唯一一个。因此，该哈希链与 bcrypt 本身之间不应该有任何明显的速度差异——而且，在任何情况下，您*都希望*密码哈希尽可能慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-07T09:47:48.223

所以你必须更新数据库中用户的所有密码？如果您 twit 登录脚本，您将无需执行任何操作。看看这个：

将 Md5 密码哈希更新为 BCRYPT 哈希::

```
$passwordFromDatabase = "0d107d09f5bbe40cade3de5c71e9e9b7"; // md5  hash of "letmein"
$passwordFromForm = $_POST['password']; // $_POST['password'] == "letmein"

if(password_needs_rehash($passwordFromDatabase, PASSWORD_BCRYPT, ["cost" => 12]) && md5($passwordFromForm) === $passwordFromDatabase){
    // generate new password
    $newPasswordHash = password_hash($passwordFromForm, PASSWORD_BCRYPT, ["cost" => 12]);
    // update hash from database - replace old hash $passwordFromDatabase with new hash $newPasswordHash
    // after update login user
    if(password_veryfi($passwordFromForm, $newPasswordHash)){
        // user has logged in successfully and hash was updated
        // redirect to user area
    }else{
        // ups something went wrong Exception
    }
}else{
    if($password_veryfi($passwordFromForm, $passwordFromDatabase)){
        // user password hash from database is already BCRYPTed no need to rehash
        // user has logged in successfully
        // redirect to user area
    }else{
        // wrong password
        // no access granted - stay where you are
    }
} 
```

上面的例子是通用的。代替

> ... && md5($passwordFromForm) === ...){

您可以使用您对存储密码所做的任何嵌套哈希组合。无论如何，它最终都会成为一个 BCRYP 哈希。下面阅读有关加密和安全性的更多信息，以及如何定义正确的成本参数值来散列用户密码。

**慢速算法**

当前的标准是使用慢散列算法。PBKDF2、bcrypt 或 scrypt 都将密码和盐作为输入和可配置的工作因子 - 将此工作因子设置为用户在使用服务器硬件登录时接受的最高值。[参考](https://security.stackexchange.com/questions/8607/how-quickly-can-these-password-schemes-really-be-beaten)

*   **PBKDF2**只是一个迭代的快速散列（即仍然有效地可并行化）。（这是一个可以与不同的基本算法一起使用的方案。使用您在系统中使用的任何算法。）
*   **Bcrypt**需要一些 (4KB) 工作内存，因此在每个处理器缓存少于 4KB 的 GPU 上实现效率较低。
*   **除了处理时间之外， Scrypt 还**使用（可配置的）大量内存，这使得在 GPU 或定制硬件上并行化的成本非常高，而“普通”计算机通常有足够的 RAM 可用。

**好密码**

**您的密码长度不应少于 8 个字符，并且至少应使用一个：**

*   大写
*   一个数字和
*   一个特殊字符

设置密码 8 字符长，大小写和特殊字符能够创建：6 634 204 312 890 625 组合。但是，如果您的密码是星期，让我们说 6 个字符的小写字母，您只会得到：308,915,776 组合。为了确保您的帐户安全，建议使用超过 12 个字符的密码长度。[单击密码组合计数模拟器](http://projects.lambry.com/elpassword/)

**破解速度（每年的变化为破解者提供更多的 GPU 处理能力或更强大的云计算）**

当您设计密码时，请考虑未来处理能力的提高以及黑客将获得的工具。

该程序 IGHASHGPU v0.90 声称能够在单个 ATI HD5870 GPU 上每秒执行大约 13 亿次 SHA-1 哈希（即超过 2^30）。

假设密码为 40 位熵，这需要 2^10 秒，也就是大约 17 分钟。

一个 44 位熵的密码（就像著名的 XKCD 漫画中的密码）需要 68 分钟（最坏的情况，平均情况是这个的一半）。

在多个 GPU 上并行运行会按比例加快速度。

因此，使用快速哈希进行暴力破解是一种真正的危险，而不是理论上的危险。而且许多密码的熵要低得多，这使得暴力破解更快。[参考](https://security.stackexchange.com/questions/8607/how-quickly-can-these-password-schemes-really-be-beaten)

**解决方案**

您可以通过控制成本来自定义算法的速度。成本越高，对密码进行编码和编码所需的时间就越长。最好的目标可能是大约 500 毫升，这使得攻击者很难暴力破解我们的密码。

具有 12 个字符和更长的密码 + 较慢的算法将保证在密码被破解之前暴力破解相当数量的组合。一旦我们有了合适的密码，我们就可以让想要进入我们系统的人的生活变得更加困难，方法是将密码验证过程放慢到会使其变得非常困难和耗时/资源消耗的事情。将成本设置为一个数字，该数字将影响验证用户密码所需的大约 0.5 秒时间。

**定制成本价值**

由于每个服务器的脚本执行会根据处理能力和流量而有所不同，您怎么知道应该将成本设置多高？

那么您应该衡量验证过程所需的时间并定制适合您的成本。

```
<?php
/**
 * This code will benchmark your server to determine how high of a cost you can
 * afford. You want to set the highest cost that you can without slowing down
 * you server too much. 8-10 is a good baseline, and more is good if your servers
 * are fast enough. The code below aims for ≤ 50 milliseconds stretching time,
 * which is a good baseline for systems handling interactive logins.
 */
$timeTarget = 0.50; // 500 milliseconds 

$cost = 8; //start to measure from cost = 8
do {
    $cost++;
    $start = microtime(true);
    password_hash("Ajd_hsk-K87&", PASSWORD_BCRYPT, ["cost" => $cost]);
    $end = microtime(true);
} while (($end - $start) < $timeTarget);

echo "Appropriate Cost Found: " . $cost . "\n";
?> 
```

[参考](http://php.net/manual/en/function.password-hash.php)

上面的函数将返回 X 数量的成本，我们需要使用这些成本来满足我们的安全要求。

```
Appropriate Cost Found: 13 //this result will be different based on your server machine. 
```

该脚本取自 php 手册并增强处理时间延长 10 倍。在大多数情况下，这通常是安全的方式，但对于管理员和超级管理员登录，我会考虑让它更加耗时（大约 1 秒），因为这些地方对真正的黑客更感兴趣。*

# jquery - jquery 显示和隐藏以及复选框状态

> ID：15933463
> 
> 赞同：0
> 
> 时间：2013-04-10T18:20:30.347
> 
> 标签：jquery, cordova

情况：

我有一个列出一堆人的 UL 我在顶部有两个按钮“All”和“Common”

在加载时，您会看到所有人。然后，您可以单击 Common 按钮，UL 将被过滤到仅某些人。

这工作正常。但是在每个 LI 中，我有 2 个复选框 - 当我在“所有”类别中选中它们，然后选择“最近”选项卡以检查其他人，然后我返回“所有”选项卡时，有时我会丢失复选框状态。

应该注意的是，这是使用 phonegap 开发的

```
function getFriends(common)
{

if(common=="common")
{  
   //Hide everyone to start with
   $("#PersonSelection li").hide();
   //ajax query that loops through the common players goes here
   $('#'+item.PlayerId).show(); //this is the id of each li that is common, so after I hide all I   just show those that are common
   //end ajax loop
} else {
  if ($("#PersonSelection li").size() > 1) //this is there for when we go from common back to all I don't have to go back to the DB
  {
   $("#PersonSelection li").show();
  }
  else
    {
    //go back to ajax query that loops a variable with li and checkbox info and the appends
    document.getElementById('PersonSelection').innerHTML += people;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:05:44.003

好的，我想通了-我认为我已经调试得很好，但是这个文档确实存在问题。getElementById('PersonSelection').innerHTML += people;

# javascript - 在 Firefox 中触发事件后页面重置

> ID：15933465
> 
> 赞同：0
> 
> 时间：2013-04-10T18:20:48.530
> 
> 标签：javascript, html, firefox, file-upload

所以我最近遇到了一个问题，当我尝试在 Firefox 中上传文件时，它会被重置。我已经在 Chrome 中测试了这个功能，它运行良好，但它在 Firefox 中不起作用。查看萤火虫控制台日志没有让我知道它在哪里重置。我正在使用[resumable.js](https://github.com/23/resumable.js) JS 库通过 PHP 后端对我的上传进行分块。这在 Chrome 中 100% 有效。

当我单击调用该`resume.upload()`方法的上传按钮时会发生这种情况，并且一旦这样做，它就会重置框架，因此上传不会通过。如果我在调用这个方法的地方添加一个断点，并让它执行一次，它工作正常，但如果我放开它，它只是重置

JS和HTML的小片段：

```
<form>
<input id="showBrowse" style="margin-right:5px;" type="file">&nbsp;&nbsp;&nbsp;
<button id="uploadFileBTN" style="margin-left:25px" onclick='resume.upload()'>Start Upload</button>&nbsp;&nbsp;&nbsp;
<br>
<span style="margin-right:3px;margin-right:10px;" id="pauseOrplay"></span><img id='pauseDL' onclick='resume.pause();paused();' alt="Pause">
<span style="margin-left:23px;margin-right:10px;" id="cancelTXT"></span><img id='cancelDL' onclick='resume.cancel();cancel();' alt="Cancel">
<br>
<input type="checkbox" id="overwriteFile" onclick='overwriteIt()'>Overwrite if file already exists <br>
<input type="hidden" value="<%=view.getUID()%>" id="hiddenUID">
</form> 
```

这是JS实现

```
/**
 * Resumable.js implementation
 */
$("#stitchLabel").hide();
resume = new Resumable({
    target:uploadURL,
    query:{rewrite: $("#overwriteFile").attr('checked')?true:false},
    resumableChunkSize:1*1024*1024,
    simultaneousUploads:1,
    testChunks:false
});
if(!resume.support){
    hidePauseAndCancel();
    $("#showBrowse").hide();
    $("#uploadFileBTN").hide();
    alert("Sorry! The upload file feature is not supported on your browser. Please use Firefox 4+, Chrome 11+, or Safari 6+");
}
resume.assignBrowse(document.getElementById("showBrowse"));

resume.on('fileAdded',function(file){
    var idFile = file.uniqueIdentifier;
    $("#fileBlock").append("<li id='"+file.uniqueIdentifier+"'>"+file.fileName+"&nbsp;&nbsp;&nbsp;<span id='fileProgress'><b>Waiting for upload to start</b></span></li>");
    $("#uploadFileBTN").attr('disabled',false);
    $("#overwriteFile").attr('disabled',true);
    $("#pauseDL").hide();
    $("#resumeDL").hide();
    $("#pauseOrplay").hide();

});

resume.on('fileSuccess',function(file, message){
    alert("finished");
    var name = file.fileName;
    $("#fileBlock").find("#"+file.uniqueIdentifier).remove();
    $("#userFiles").children().find("img#pauseDL").remove();
    $("#userFiles").children().find("img#resumeDL").remove();
    $("#fileBlock").children().find("#"+file.uniqueIdentifier).css('color',"#D4D4D4");
    $("#fileBlock").find("#wait").show();
    hidePauseAndCancel();
    if(($("#fileBlock").find("#wait")).length == 0){
        $("#fileBlock").append("<b id='wait'>Stitching... don't press cancel</b>");
    }

});
resume.on('fileProgress', function(file){
    if(resume.progress()*100>0){
        $("#pauseDL").attr('src','/img/IMGS/icons/pause.png').show();
        $("#pauseOrplay").html("<b>Pause</b>&nbsp;&nbsp;&nbsp;");
        $("#pauseOrplay").show();
        $("#cancelTXT").html("<b>Cancel</b>");
    }
    $("#cancelDL").attr('src','/img/IMGS/icons/delete-icon.png').show();
    $("#cancelTXT").html("<b>Cancel</b>");
    $("#cancelTXT").show();
    $("#uploadFileBTN").attr('disabled',true);
    $("#fileBlock").find("#"+file.uniqueIdentifier).find("#fileProgress").html("&nbsp;&nbsp;&nbsp;<b>"+Math.floor(file.progress()*100)+"%</b>").css('color','#05AD24');
    $("#overwriteFile").attr('disabled',true);
}); 
```

Firebug 根本不提供任何消息。FF 不支持我正在使用的东西吗？顺便说一句，FF v20。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:29:06.053

好吧，好像firefox不喜欢

```
<button></button> 
```

并且喜欢

```
<input type="button"> 
```

一旦我改变了它，onclick 事件就会正常触发。

# c# - IsKeyboardFocusable 在 Inspect Object 中为 true，但在我的应用程序中始终为 false

> ID：15933467
> 
> 赞同：10
> 
> 时间：2013-04-10T18:20:51.813
> 
> 标签：c#, winforms, ui-automation

我正在学习 UI 自动化，我发现我的“检查对象”克隆显示它`IsKeyboardFocusable`总是错误的，即使它是真的，所有其他信息都是相同的（从图像中可以看到）。有谁知道为什么我在检索值时将此属性视为错误？

![在此处输入图像描述](https://i.stack.imgur.com/oIBWY.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-25T16:44:13.407

在`Inspect Object`应用程序中，最新版本的 Windows 自动化 COM API (3.0) 用于显示所有这些属性。但默认的 .NET UIAutomation 实现不是基于 Windows 自动化 API 3.0 COM 接口（它基于此 COM API 的先前版本）。因此，某些属性无法正常运行。例如，对于 Skype 的联系人列表，该`AutomationElement.IsKeyboardFocusableProperty`属性表示根本不支持获取此属性的值。您可以使用以下代码片段进行检查：

```
object isKeyboardFocusable = listItem.GetCurrentPropertyValue(AutomationElement.IsKeyboardFocusableProperty, true);
if(isKeyboardFocusable == AutomationElement.NotSupported) {
    // we will always goes here
} 
```

现在，我不知道如何使用当前的 .Net UIAutomation 实现来避免这种行为。

好消息是 .NET 中有替代的 UI 自动化实现，可以使用新的 Windows 自动化 API 3.0 COM 接口，提高了可靠性和性能，同时仍然使用与之前相同的 System.Windows.Automation 类UI 自动化的版本。此实现可作为 CodePlex 上的一个项目获得：[UI 自动化 COM-to-.NET 适配器](http://uiacomwrapper.codeplex.com/)

所以，今天尝试了这个替代实现，并且通过这个替代实现，IsKeyboardFocusable 属性返回与工具相同的结果`Inspect Objects`！此外，现在可以使用`Inspect Objects`显示的一些扩展属性（例如 LegacyIAccessible 成员）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T16:40:16.643

IsKeyboardFocusable 的内部实现使用 GetCurrentPropertyValue(property: AutomationElement.IsKeyboardFocusableProperty, ignoreDefaultValue: false) 函数。在它失败的情况下，它只是返回 false （在你的情况下它失败了）。因此，我建议您使用 GetCurrentPropertyValue(property: AutomationElement.IsKeyboardFocusableProperty, ignoreDefaultValue: true) 而不是 IsKeyboardFocusable，这样您就会知道它是否失败。

使用 winapi 可以得到与 Inspect 完全相同的结果。Olecc.dll 给你IAccessible[接口](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318466%28v=vs.85%29.aspx)（这个接口有更详细的[描述](http://msdn.microsoft.com/en-us/library/ms971310.aspx)）。该接口的一个实例可以有子实例，其中一部分可以是可聚焦的，而一部分则不是。如果从 HWnd 创建 IAccessible，则无法确定整个控件是否可聚焦。可以肯定的是，您应该从屏幕点创建 IAccessible - 它为您提供了该点下的 IAccessible（您可以在屏幕截图上看到，Inspect 使用屏幕上的点 - “如何找到 - 鼠标移动（1120、470）” ）。此外，如果您在 Inspect 中从 UIAutomation 模式切换到 MSAA，您可以看到 IAccessible 的外观。

但是，如果可能的话，最好使用[UIAutomation 的替代实现](http://uiacomwrapper.codeplex.com/)。它返回正确的 IsKeyboardFocusable 值（与标准 UIAutomation 实现不同）。我自己没有测试过这个库（我只测试了 IsKeyboardFocusable），但它似乎工作正常，并且它具有与标准实现相同的类型和接口。在 IAccessible 的情况下，您应该从一个点创建 AutomationElement，而不是从 HWnd。

关于您的问题-我还不知道，为什么标准 UIAutomation 在某些情况下无法正确返回 AutomationElement.IsKeyboardFocusableProperty。我想，这可能是一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-14T05:58:56.337

您是否尝试过这个 UI 自动化间谍工具：[https](https://ddeltasolutions.000webhostapp.com/) ://ddeltasolutions.000webhostapp.com/ ？我发现 IsKeyboardFocusableProperty 为 true 的情况，例如 Skype 应用程序的菜单栏。

# java - 从数组中获取字母

> ID：15933469
> 
> 赞同：0
> 
> 时间：2013-04-10T18:20:58.187
> 
> 标签：java, arrays, sorting, bufferedreader

我有一个程序可以对字母在故事中出现的次数进行排序和计数。我遇到的一个问题是我需要打印这封信以及它在排序时出现的次数。

```
if (line == null) break; //check for end of file before doing anything

line=line.toLowerCase();

for (int i = 0 ; i < line.length(); i++ ) {
    letter = line.charAt(i);
    int num = (int)letter;
    num-=96;

    if(num>=1 && num<=26) alpha[num]++;

}

for(int j=1; j<=26; j++) System.out.println((char)(j+64) +" = "+alpha[j]);

    int[] minArr = new int[6];
    int[] maxArr = new int[6];

    Arrays.sort(alpha);

    // System.out.print("There are "+max+" and "+min);
    for(int n=1;n<=5;n++) {
        System.out.println("is the highest with "+alpha[alpha.length-n]);
        System.out.println("is the lowest with "+alpha[n]);
        // int max = alpha.length-n;

        // System.out.println((char)(min+64)+" has the least number of letters"
    } 
```

有没有办法让我得到排序后的字母和它们的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:43:32.027

您是否考虑过使用 a`Map<String,Integer>`来存储您的字符数对？

类似于以下内容：

```
SortedMap <String, Integer> alphaMap = new TreeMap<String, Integer>() {};

for (int i = 0 ; i < line.length(); i++ ) {
    String letter = String.valueOf(line.charAt(i));

    if (alphaMap.containsKey(letter)){
        alphaMap.get(letter)++;
    } else {
        alphaMap.put(letter, 0);
    }
} 
```

然后，您有一张按字母排序的字符数对的地图。然后，您可以使用此树来查找最大值和最小值。

# debugging - LLVM 库的调试符号？

> ID：15933470
> 
> 赞同：0
> 
> 时间：2013-04-10T18:20:59.693
> 
> 标签：debugging, ubuntu, gdb, llvm, debug-symbols

我正在使用 Ubuntu 软件包针对 LLVM 库进行开发。以下是我安装的软件包：

```
libllvm3.1
llvm-3.1
llvm-3.1-dev
llvm-3.1-runtime
llvm-3.1-source 
```

'llvm-3.1-source' 包含源代码，但据我所知，它们都不包含调试符号。因此，当我在某些 LLVM 代码内部遇到段错误时，我无法判断它发生在源代码的哪一行。

如何获取调试符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:18:14.773

LLVM 从源代码构建起来既快速又容易。[从http://llvm.org/releases/download.html#3.2](http://llvm.org/releases/download.html#3.2)下载源包并按照说明在调试模式下构建。然后，您可以对 LLVM 本身进行完整的调试。

# ruby - 如何使用 Ruby 计算 Mongo 中特定集合的字段中所有条目的平均值

> ID：15933484
> 
> 赞同：3
> 
> 时间：2013-04-10T18:21:36.300
> 
> 标签：ruby, mongodb

给定以下数据：

```
{
  _id: ObjectId("51659dc99d62eedc1a000001"),
  type: "image_search",
  branch: "qa_media_discovery_feelobot",
  time_elapsed: 19000,
  test: "1365613930 All Media",
  search_term: null,
  env: "delta",
  date: ISODate("2013-04-10T17:13:45.751Z")
} 
```

我想运行如下命令：

```
avg_image_search_time = @coll.find("type" => "image_search").avg(:time_elapsed) 
```

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:19:42.527

我知道这方面的文档很难理解。

```
avg_image_search_time = @coll.aggregate([ {"$group" => {"_id"=>"$type", "avg"=> {"$avg"=>"$time_elapsed"}}}, {"$match" => {"_id"=>"image_search"}} ]).first['avg'] 
```

要打破这一点：

我们按`type`字段对匹配项进行分组，并返回`$avg`每种类型的 time_elapsed。我们将得到的平均值命名为`avg`。然后，在这些组中，仅过滤掉组 _id 匹配的组`image_search`。最后，由于聚合总是返回一个数组，所以获取第一个结果（应该只有一个），然后获取`avg`我们命名的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:45:33.707

使用 mongodb 聚合框架 [http://docs.mongodb.org/manual/core/aggregation/](http://docs.mongodb.org/manual/core/aggregation/)

# python - feedparser 没有给出 NOAA xml 的 lat long

> ID：15933491
> 
> 赞同：0
> 
> 时间：2013-04-10T18:22:05.080
> 
> 标签：python, xml, feedparser, noaa

使用[NOAA 休息](http://www.nws.noaa.gov/mdl/survey/pgb_survey/dev/rest.php)网站上给出的示例 url：

`http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXMLclient.php?listZipCodeList=20910+25414`

下面的代码：

```
import feedparser
d = feedparser.parse('http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXMLclient.php?listZipCodeList=20910+25414')
print d 
```

输出：

```
{'feed': {'dwml': {'xsi:nonamespaceschemalocation': u'http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd', 'nonamespaceschemalocation': u'http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd', 'version': u'1.0'}}, 'status': 200, 'version': u'', 'encoding': u'us-ascii', 'bozo': 0, 'headers': {'content-length': '294', 'expires': 'Wed, 10 Apr 2013 18:16:54 GMT', 'server': 'Apache/2.2.15 (Red Hat)', 'connection': 'close', 'cache-control': 'max-age=180', 'date': 'Wed, 10 Apr 2013 18:13:54 GMT', 'content-type': 'text/xml'}, 'href': u'http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXMLclient.php?listZipCodeList=20910+25414', 'namespaces': {u'xsi': u'http://www.w3.org/2001/XMLSchema-instance', u'xsd': u'http://www.w3.org/2001/XMLSchema'}, 'entries': []} 
```

`<latLonList>`失踪了。我在 xml 中看到它，为什么它不在 feedparser 字典中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:39:18.600

feedparser 模块用于解析提要（例如，RSS、ATOM 和 RDF）；要解析一般 xml，请尝试[lxml](http://lxml.de/)。

这是一个简单的例子

```
import urllib
from lxml import etree

noaa_xml = urllib.urlopen('http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXMLclient.php?listZipCodeList=20910+25414').read()
root = etree.fromstring(noaa_xml)
print root[0].text 
```

# python - pygame.error：没有可用的视频设备

> ID：15933493
> 
> 赞同：10
> 
> 时间：2013-04-10T18:22:10.283
> 
> 标签：python, pygame

我有这个设置：

```
 $ python -V
Python 2.7.2+
 $ python -c "import pygame; print pygame.__version__"
1.9.1release 
```

当我运行 pygame 脚本时，我收到此错误：

```
Traceback (most recent call last):
  File "/home/santosh/tmp/pygameHelloWorld.py", line 8, in <module>
    windowSurface = pygame.display.set_mode((500, 400), 0, 32)
pygame.error: No available video device 
```

我正在使用 Ubuntu 并使用 apt-get 安装 pygame。[此外，我已经安装了这个pygame wiki 页面](http://www.pygame.org/wiki/CompileUbuntu)上提到的所有依赖项。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-10-25T20:37:47.030

如果您在 UNIX 系统（如 Linux 服务器）上运行 Pygame，请尝试使用[DummyVideoDriver](http://www.pygame.org/wiki/DummyVideoDriver)：

```
import os
os.environ["SDL_VIDEODRIVER"] = "dummy" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T22:22:27.083

从类似的经验来看，最可能的问题是您的 SDL 软件包之一出现问题。尝试运行以下命令。

```
import pygame
pygame.init()
pygame.display.list_modes() 
```

如果你得到一个空列表，那肯定是因为包。尝试重新安装它们。

*可能相关：*

*   [SDL 初始化失败，原因是：没有可用的视频设备](https://stackoverflow.com/questions/4841908/sdl-init-failure-reason-is-no-available-video-device)

*   [SDL 初始化失败，原因是：ubuntu 12.04 LTS 中没有可用的视频设备](https://stackoverflow.com/questions/12709719/sdl-init-failure-reason-is-no-available-video-device-in-ubuntu-12-04-lts)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T17:03:48.577

此问题可能只影响 Windows XP。尝试将其中之一添加到您的代码中：

```
import os
os.environ['SDL_VIDEODRIVER']='windib' 
```

或者

```
import os
os.environ['SDL_VIDEODRIVER']='windlib' 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T20:20:27.243

疯狂的猜测-库是否设置和/或需要 DISPLAY 环境变量，并且不可用？如果您在不提供 -X 选项的情况下通过 ssh 连接到正在运行它的 Linux 机器，则可能会出现这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-02T07:53:09.290

在 Linux 上，您可以使用 x11 解决问题。

验证您的 SDL 是在 x11 支持下构建的，否则只有在您以这种方式添加一些库之后自己构建它：

```
sudo apt install xorg-dev libx11-dev libgl1-mesa-glx 
```

也许*xorg-dev*已经安装*了 libx11-dev*

从源代码构建 SDL 并享受

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-05T01:37:08.770

尝试以下操作：

```
import pygame
from pygame.locals import *
pygame.init() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-17T05:24:20.200

我用以下三个命令解决了它：

```
sudo apt-get update

sudo apt-get dist-upgrade

sudo apt-get install libsdl1.2debian:i386 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-24T00:36:56.627

我在尝试在 jupyter 笔记本中渲染 OpenAI 健身房时遇到此错误。按照福山的回答让它停止错误，但它只呈现黑色图像。查看[https://wiki.libsdl.org/FAQUsingSDL](https://wiki.libsdl.org/FAQUsingSDL)，我发现我可以`directfb`用作渲染器。代码最终是：

```
import os
os.environ["SDL_VIDEODRIVER"] = "directfb" 
```

# javascript - CSS 中的透明度——与继承作斗争

> ID：15933495
> 
> 赞同：2
> 
> 时间：2013-04-10T18:22:18.967
> 
> 标签：javascript, css, background, background-color

我有`ul`一个`background-color`。`rgba(15,15,15,0.8)`我希望`li`列表的元素更加透明，例如我希望它`background-color`设置为`rgba(15,15,15,0.5)`. 问题是内部`li`元素是透明的，我看到它父母的背景颜色`ul`所以我得到的实际上是一个更暗的背景

CSS中有没有办法（但就此而言，通过JS / jQuery也可以）“取消”父级的背景属性？

## 编辑

`li`请注意，即使我不认为这很容易也不是一个好的解决方案，也可以为列表的“其余部分”（不是由 s 制作的列表部分）着色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:24:58.130

您可以通过不在 上设置背景`ul`并在`li`.

# [*演示*](http://codepen.io/thebabydino/pen/DBHde)

相关CSS：

```
border: solid .5em rgba(15,15,15,.8);
background: rgba(15,15,15,.5); 
```

（您可以调整边框的宽度值以满足您的需要）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:22:20.207

如果您只是想使颜色变亮（而不是让底层图像或文本显示出来），您可能会考虑使用`background-color: rgba(256,256,256,0.3)`它会在您的子元素上放置一层淡淡的白色雾霾。

在这里查看：http: [//jsfiddle.net/9VBnr/](http://jsfiddle.net/9VBnr/)

您还可以查看 Eric Meyer 的这个老歌但很好：http: [//meyerweb.com/eric/css/edge/complexspiral/demo.html](http://meyerweb.com/eric/css/edge/complexspiral/demo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:22:06.927

抱歉，但这就像通过将一块有阴影的玻璃放在另一块有阴影的玻璃上来期待更清晰的视野一样。它只是行不通。:)

你需要做的是扭转你的想法。使最顶层具有正确的外观，然后移动到它下面的一层。

使用非透明背景设置 li 元素的样式。如果您需要纯色以外的其他东西，请使用精灵来获得您想要的外观。然后移动到 ul 元素并给出你想要的外观 - 甚至使用不透明度。

# html - 移动浏览器中div的绝对定位问题

> ID：15933498
> 
> 赞同：3
> 
> 时间：2013-04-10T18:22:32.107
> 
> 标签：html, css, mobile-safari, css-position, mobile-chrome

我在以下网站上绝对定位一个名为 id="verticalGenesis" 的 div 时遇到了很多问题：http: [//genesispetaluma.com/index.html](http://genesispetaluma.com/index.html)在移动浏览器中，包括 iPhone 上的 Safari 和 Chrome。理想情况下，我尝试使用以下 css 将徽标放置在屏幕右侧：

```
#verticalGenesis {
background-image: url("../img/Genesis%20Text.gif");
background-repeat: no-repeat;
display: block;
height: 570px;
opacity: 0.8;
position: absolute;
right: 3%;
top: 70px;
width: 123px;
} 
```

正如我所期望的那样，这在所有桌面浏览器中都可以正常显示，但在移动浏览器的屏幕中间显示。我也尝试过使用 right: 3% ，但我遇到了同样的问题。

我确信这个问题必须有一个简单的答案，但是我在网络和 stackoverflow 上到处搜索，但我无法弄清楚。有人可以指出我正确的方向吗？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T19:55:02.337

这不会完全解决你的问题，但它会让你更接近。在父 div id=wrapFix 上，您应该添加 position: relative 到它。问题是当你有一个带有 position: absolute 的元素时，它需要知道它应该绝对反对什么。虽然它在桌面浏览器上运行良好，但在移动设备上却失败了。可能是因为屏幕大小什么的。但我已将该行添加到该 div 中，它似乎更接近于解决 iPhone 上的问题。

# ruby - 如何指定要作为参数传递的方法？

> ID：15933499
> 
> 赞同：1
> 
> 时间：2013-04-10T18:22:33.173
> 
> 标签：ruby

我有一个接受对象的方法，以及它需要应用于对象的转换器方法：

```
def f x, conv
  conv x
end 
```

我将如何在字符串上调用它并`to_f`用作转换器？这不起作用：

```
f '123', &:to_f 
```

编辑：这是一个人为的例子，我知道这可以简化或以不同的方式编写。

EDIT2：感谢那些建议使用块的人，这很有效。我试图找出这是否可以用方法来完成，比如函数式语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:30:45.900

您可以使用`yield`执行传递的过程：

```
def f(x)
  yield x
end

f(x) { |y| y.to_f } 
```

或者，如果您希望将 proc 作为命名参数，您可以使用`&`：

```
def f(x, &proc)
  proc.call x
end 
```

你不能只传入任意函数，因为 ruby​​ 中只有实例方法，所以你不能这样做：

```
to_f.to_proc 
```

要获得一个功能，如果你想这样做，你必须使用`send`：

```
def g(x, sym)
  x.send sym
end

g(2, :to_f) 
```

请记住，ruby 不是函数式语言，尽管它有很多函数式结构，但它是一种非常面向对象的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:29:01.120

您的方法必须接受一个块，您必须调用它：

```
def f x, &conv
  conv.call x
end 
```

或者

```
def f x
  yield x
end 
```

**编辑：** 您也可以将方法作为常规对象传递（您可以使用 获得一个`"".method(:to_i)`），但它们的行为就像 procs 并且不能`self`像绑定到对象时那样操作。

# javascript - $.getJSON 返回身份不明

> ID：15933506
> 
> 赞同：-2
> 
> 时间：2013-04-10T18:22:44.197
> 
> 标签：javascript, json, jquery, google-maps-api-3

我正在尝试从 Google 地图提供的 JSON 访问持续时间数据。用户输入 2 个邮政编码，我应该显示所用时间。

```
function getData() {
    var origin = $("#origin_pc").val() + ",australia";
    var destination = $("#dest_pc").val() + ",australia";
    // var origin="3135,australia";
    // var destination="3155,australia";
    url = "http://maps.googleapis.com/maps/api/directions/json?origin=" + origin + "&destination=" + destination + "&sensor=false";
    return url;
}

function calculateDistance() {
    // console.log(getData());
    var my_json;
    $.getJSON(getData(), function (json) {
        my_json = json;
    });
    console.log(my_json.routes[0].legs[0].duration.value);
} 
```

这是我的 HTML

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
    </head>

    <body>
        <form>
            <input type="text" id="origin_pc" />
            <input type="text" id="dest_pc" />
            <input type="submit" onclick="calculateDistance();">
        </form>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="distance.js"></script>
    </body>
</html> 
```

我安慰了生成的 URL，当打开它时，它给出了正确的 JSON 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:30:07.610

[**FIDDLE**](http://jsfiddle.net/mohammadAdil/LmQcy/) *返回的 786*

```
$.getJSON(getData(), function(json) {
   my_json = json;
   $('body').text(my_json.routes[0].legs[0].duration.value);
}); 
```

您需要在回调函数`my_json`内部使用`getJSON`

# ios - 无法使用带有 presentModalViewController 的协议和委托在视图之间发送数据

> ID：15933507
> 
> 赞同：1
> 
> 时间：2013-04-10T18:22:53.933
> 
> 标签：ios, protocols, appdelegate

我正在做电梯的事情。我在使用 presentModalViewController 发送具有不同视图的数据时遇到问题。我收到红色消息“favoriteColorString”属性未找到。我复制了完全相同但不同的表单名称和按钮。“favoriteColorString”出现错误，无法发送电梯2数据。

我尝试了两种不同的东西。

```
 Elevator2View.favoriteColorString = [[NSString alloc] initWithFormat:@"Your favorite color is %@", favoriteColorTextField.text]; 
```

和

```
 favoriteColorString = [[NSString alloc] initWithFormat:@"Your favorite color is %@", favoriteColorTextField.text]; 
```

这是我的代码：

**电梯视图.h**

```
#import <UIKit/UIKit.h>
#import "Elevator2View.h"

@interface ElevatorView : UIViewController<PassSecondColor>
 {

Elevator2View   *Elevator2View;

IBOutlet UITextField     *favoriteColorTextField;
IBOutlet UILabel         *favoriteColorLabel;
IBOutlet UILabel         *secondFavoriteColorLabel;

NSString        *secondFavoriteColorString;

}

@property (nonatomic, retain) Elevator2View *Elevator2View;
@property (nonatomic, retain) IBOutlet UITextField  *favoriteColorTextField;
@property (nonatomic, retain) IBOutlet UILabel      *favoriteColorLabel;
@property (nonatomic, retain) IBOutlet UILabel      *secondFavoriteColorLabel;

@property (copy) NSString   *secondFavoriteColorString;

@end 
```

**电梯视图.m**

```
#import "ElevatorView.h"
#import "Elevator2View.h"
    @implementation ElevatorView
@synthesize Elevator2View, favoriteColorTextField, favoriteColorLabel, secondFavoriteColorLabel;
@synthesize secondFavoriteColorString;

-(IBAction)level1:(id)sender;{
   favoriteColorTextField.text = @"1";
      Elevator2View.favoriteColorString = [[NSString alloc] initWithFormat:@"Your favorite color is %@", favoriteColorTextField.text];

      [self presentModalViewController:[[[Elevator2View alloc] init]
                                  autorelease] animated:NO];
} 
```

**Elevator2View.h**

```
#import <UIKit/UIKit.h>

@protocol PassSecondColor <NSObject>
@required
- (void) setSecondFavoriteColor:(NSString *)secondFavoriteColor;
@end

@interface Elevator2View : UIViewController{
IBOutlet UITextField *secondFavoriteColorTextField;
IBOutlet UILabel     *favoriteColorLabel;
IBOutlet UILabel     *secondFavoriteColorLabel;
NSString             *favoriteColorString;
id <PassSecondColor> delegate;

}

@property (copy) NSString   *favoriteColorString;

@property (nonatomic, retain) IBOutlet UITextField  *secondFavoriteColorTextField;
@property (nonatomic, retain) IBOutlet UILabel      *favoriteColorLabel;
@property (nonatomic, retain) IBOutlet UILabel      *secondFavoriteColorLabel;
@property (retain) id delegate;

@end 
```

**Elevator2View.m**

```
#import "Elevator2View.h"

@interface Elevator2View ()

@end

@implementation Elevator2View
@synthesize secondFavoriteColorTextField, favoriteColorLabel, secondFavoriteColorLabel;
@synthesize favoriteColorString;
@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
       // Custom initialization
   }
   return self;
}

- (void) viewWillAppear:(BOOL)animated
{
    favoriteColorLabel.text = favoriteColorString;  
}

- (void) viewWillDisappear:(BOOL) animated
{
//  [[self delegate] setSecondFavoriteColor:secondFavoriteColorTextField.text];
}

- (void)viewDidLoad
{
   [super viewDidLoad];
   // Do any additional setup after loading the view from its nib.
    favoriteColorLabel.text = favoriteColorString;  
}

- (void)didReceiveMemoryWarning
{
   [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

见[http://www.theappcodeblog.com/?p=90](http://www.theappcodeblog.com/?p=90)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:19:37.017

您的“找不到属性”的原因是您将 ivar 命名为与类相同。点表示法只是一种语法糖：`object.property = value`相当于`[object setProperty:value]`. 在 Objective C 中，类也是对象，当你调用时`Elevator2View.favoriteColorString = whatever`，Xcode 显然认为你正在尝试调用 类 Elevator2View 的*类*方法`setFavoriteColorString`。

摆脱这个错误很容易：只需将您的 ivar 重命名`Elevator2View *Elevator2View`为其他名称。事实上，Xcode 4.4 和更新的版本会为你的属性自动合成 ivar：如果你有一个 property `propertyName`，那么 Xcode 会自动合成 ivar `_propertyName`。您的财产`Elevator2View`将有`_Elevator2View`ivar。因此，除非您真的需要具有不同命名方案的 ivars，否则您可以摆脱您的`@synthesize`，并且您也不需要为您的属性声明 ivars。

（虽然我更喜欢为属性声明 ivars（遵循 Xcode 命名方案），因为 lldb 经常不会在对象检查器中显示自动合成的不声明 ivars。）

那是关于属性、ivars 和命名约定的。但是你在这段代码中做了什么？

```
-(IBAction)level1:(id)sender;{
   favoriteColorTextField.text = @"1";
      Elevator2View.favoriteColorString = [[NSString alloc] initWithFormat:@"Your favorite color is %@", favoriteColorTextField.text];

      [self presentModalViewController:[[[Elevator2View alloc] init]
                                  autorelease] animated:NO];
} 
```

您设置`Elevator2View`'s 的值 - 您的*实例变量*的 - 属性，然后创建全新的`Elevator2View` *类*对象并将其呈现*为*模态视图控制器。（顺便说一句，`presentModalViewController:animated:`在 iOS 6.0 中已弃用）。当然，这个*全新的* `Elevator2View`对象不知道`Elevator2View`（你的*实例变量*的）属性是什么！

# wxpython - TextCtrl: How to set text position?

> ID：15933509
> 
> 赞同：2
> 
> 时间：2013-04-10T18:22:54.737
> 
> 标签：wxpython

I have a TextCtrl with a scroll bar and I want the *first* lines of my text to appear in my TextCtrl. But instead the *last* lines of the text appear. When I set my scrollbar position to the top of my TextCtrl, then still the last lines of the text appear. Any idea how to solve this problem?

```
f = open(path, 'r')
TC = wx.TextCtrl(self, -1, '',
                    size=(400, 200), pos=(10,140), style=wx.TE_RICH2|wx.TE_MULTILINE|wx.VSCROLL)
for line in f.readlines():
    TC.write(line)
f.close
TC.SetEditable(False)
TC.SetScrollPos(wx.VERTICAL,0)
TC.Refresh() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:24:25.227

I believe the call you want is `SetInsertionPoint(0)`.

# ios - 如何在我的 xCode 4 应用程序中添加导航栏和后退按钮？

> ID：15933511
> 
> 赞同：-2
> 
> 时间：2013-04-10T18:23:00.057
> 
> 标签：ios, objective-c, navigation

我有一个简单的应用程序，其中包含 3 个选项卡项和每个选项卡的视图。如何添加仅显示当前视图名称的导航栏，以及在我转到另一个页面时出现的后退按钮，而不是在我打开应用程序时显示的第一个页面中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:27:12.833

您需要添加 a`UINavigationController`作为每个选项卡的根，每个现有视图控制器都设置为相应导航控制器的根视图控制器。

有关详细信息，请参阅视图控制器编程指南：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

# java - 如何在java中更新sqlite数据库中的varchar

> ID：15933514
> 
> 赞同：0
> 
> 时间：2013-04-10T18:23:03.280
> 
> 标签：java, database, sqlite, sql-update

我在用 java 更新 sqlite 数据库中的 varchar 时遇到问题。当我运行这个源时，我得到一个错误。我希望字符串 a 更新为字符串 b。

这是我的来源：

```
public void onClick (View v){
String a = "Test1";
String b = "Test2";

    db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null); 
                 ContentValues values = new ContentValues();
                 values.put("Level1", b);
                     db.update("Game", values, a, null);
                 db.close();
} 
```

这是我的错误：

```
Error updating Level1=Test2 using update Game SET Level1=? WHERE Test1. 
```

有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:30:39.467

`update Game SET Level1=? WHERE Test1.`

Test1 在哪里……什么？更新语句的条件部分在哪里。它期待类似的东西：

`update Game SET Level1=? WHERE ColumnName='Test1'`

* * *

取自[本](http://www.sqlite.org/lang_update.html)网站：

`If the UPDATE statement does not have a WHERE clause, all rows in the table are modified by the UPDATE. Otherwise, the UPDATE affects only those rows for which the result of evaluating the WHERE clause expression as a boolean expression is true.`

String 本身绝不是布尔表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:31:21.223

我不是 100% 确定您要实现什么，但是，您添加`a`为 where 子句并且没有提供任何参数，因此您得到了错误中显示的 SQL 语句。

从[API](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)：

```
public int update (String table, ContentValues values, 
                   String whereClause, String[] whereArgs) 
```

这个工作...

```
db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null); 
ContentValues values = new ContentValues();
values.put("Level1", b);
db.update("Game", values, "Level1=?", new String[] {a} );
db.close(); 
```

...如果这是您要执行的结果 SQL：

```
update Game SET Level1=? WHERE Level1 = 'Test1' 
```

# python - 如何在python词典中找到最常见的条目

> ID：15933516
> 
> 赞同：0
> 
> 时间：2013-04-10T18:23:11.973
> 
> 标签：python, data-structures, dictionary

我有一本两层深的字典。也就是说，第一个字典中的每个键都是一个 url，值是另一个字典，每个键是单词，每个值是单词在该 url 上出现的次数。它看起来像这样：

```
dic = {
    'http://www.cs.rpi.edu/news/seminars.html': {
        'hyper': 1,
        'summer': 2,
        'expert': 1,
        'koushk': 1,
        'semantic': 1,
        'feedback': 1,
        'sandia': 1,
        'lewis': 1,
        'global': 1,
        'yener': 1,
        'laura': 1,
        'troy': 1,
        'session': 1,
        'greenhouse': 1,
        'human': 1

...and so on... 
```

字典本身很长，其中有 25 个 url，每个 url 都有另一个字典作为其值，其中包含在 url 中找到的每个单词及其找到的次数。

我想在字典中找到出现在最不同 url 中的一个或多个单词。所以输出应该是这样的：

> 以下单词在 y 页上出现 x 次：单词列表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:27:51.463

看来您应该`Counter`为此使用 a ：

```
from collections import Counter
print sum((Counter(x) for x in dic.values()),Counter()).most_common() 
```

或多行版本：

```
c = Counter()
for d in dic.values():
    c += Counter(d)

print c.most_common() 
```

* * *

要获得所有子词中常见*的*词：

```
subdicts = iter(dic.values())
s = set(next(subdicts)).intersection(*subdicts) 
```

现在您可以使用该集合来过滤结果计数器，删除未出现在每个 subdict 中的单词：

```
c = Counter((k,v) for k,v in c.items() if k in s)
print c.most_common() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:00:06.740

计数器不是您想要的。从您显示的输出中，您似乎想要跟踪出现的总数以及单词出现的页数。

```
data = {
    'page1': {
        'word1': 5,
        'word2': 10,
        'word3': 2,
    },
    'page2': {
        'word2': 2,
        'word3': 1,
    }
}

from collections import defaultdict
class Entry(object):
    def __init__(self):
        self.pages = 0
        self.occurrences = 0
    def __iadd__(self, occurrences):
        self.pages += 1
        self.occurrences += occurrences
        return self
    def __str__(self):
        return '{} occurrences on {} pages'.format(self.occurrences, self.pages)
    def __repr__(self):
        return '<Entry {} occurrences, {} pages>'.format(self.occurrences, self.pages)

counts = defaultdict(Entry)

for page_words in data.itervalues():
    for word, count in page_words.iteritems():
        counts[word] += count

for word, entry in counts.iteritems():
    print word, ':', entry 
```

这会产生以下输出：

```
word1 : 5 occurrences on 1 pages
word3 : 3 occurrences on 2 pages
word2 : 12 occurrences on 2 pages 
```

这将捕获您想要的信息，下一步将是找到最常用的`n`单词。您可以使用 heapsort 来做到这一点（它的方便功能是不需要您按页数然后出现次数对整个单词列表进行排序 - 如果您总共有很多单词，这可能很重要，但是`n`' top n' 相对较小）。

```
from heapq import nlargest
def by_pages_then_occurrences(item):
    entry = item[1]
    return entry.pages, entry.occurrences
print nlargest(2, counts.iteritems(), key=by_pages_then_occurrences) 
```

# c# - 安装后找不到 MergeModules

> ID：15933517
> 
> 赞同：0
> 
> 时间：2013-04-10T18:23:14.200
> 
> 标签：c#, .net, visual-studio-2010, redistributable

[我刚刚从http://www.microsoft.com/en-us/download/details.aspx?id=14431#filelist](http://www.microsoft.com/en-us/download/details.aspx?id=14431#filelist) (x86)安装了 Microsoft Visual C++ 2005 Service Pack 1 Redistributable Package ATL 安全更新，并希望找到合并模块以在我的机器上使用。不幸的是，我在 \Program Files\Common Files\Merge Modules\ 文件夹中找不到它们。知道在哪里可以找到它们吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:58:21.227

我能够使用 7-zip 软件从下载的 .exe 文件中提取合并模块。在解压和解压可执行文件的所有内容后，我找到了合并模块，甚至验证了我需要的版本是正确的，并且能够成功构建我的安装项目，并在客户端机器上正确安装我的应用程序。

# .net - DbContext 使用 Unity（或其他库）时使用 Entity Framework Power Tools Beta 3 生成视图

> ID：15933521
> 
> 赞同：0
> 
> 时间：2013-04-10T18:23:28.650
> 
> 标签：.net, entity-framework, ef-code-first

我在 Code First 上运行 Entity Framework Power Tools Beta 3 中的“生成视图”命令时遇到问题`DbContext`。我得到一个对话框，指示调用的目标已引发异常。构建输出窗口不包含任何附加信息。但是，如果我开始注释掉一些东西，我会`TargetInvocationException`在构建输出窗口中得到一个带有堆栈跟踪的报告。`DbContext`每当我的类访问 Unity时，它似乎都会被抛出- 特别是在`OnModelCreating()`方法中（我们使用 IoC 将类型配置和其他 EF 初始化代码放在更接近实际实体的位置，而不是将其全部粘贴在`DbContext`类中）。

我假设这个问题与 Entity Framework Power Tools 在 DbContext 类使用第三方库时能够加载适当的参考程序集有关。有人对如何解决这个问题有任何想法吗？将 Entity Framework Power Tools 与使用其他库的 DbContexts 一起使用是一个已知问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:29:02.793

您可以尝试使用 T4 模板为我前段时间在 VS Gallery 上发布的 Code First 生成视图。您可以[在此处](http://blog.3d-logic.com/2012/06/13/entity-framework-codefirst-view-generation-templates-on-visual-studio-code-gallery/)找到更多详细信息。

# ios - ios nsnotificationcenter 程序中止

> ID：15933530
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:23:56.783
> 
> 标签：ios, nsnotificationcenter

我走了好几条路，想知道是否有人可以立即发现这一点：

我想在选择文本字段时显示一个按钮（因此加载了键盘）。

从我读到的 NSNotificationCenter 是一种方法：

所以在 viewWillAppear 我放置了以下内容

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidAppear:) name:UIKeyboardWillShowNotification object:self.view.window]; 
```

对于目的地（选择器），我有：

```
-(void)keyboardDidAppear{    
  _button2.hidden  = FALSE;
} 
```

程序中止到崩溃转储（当然似乎应该有比这更好的调试路径）

如果我注释掉keyboardDidAppear 中的唯一一行

```
// _button2.hidden = FALSE; 
```

程序仍然中止

所以很明显 NSNotificationCenter 正在触发并且由于某种原因不被容忍

任何简化的帮助将不胜感激。

说真的，当出现执行错误时，你得到的只是崩溃转储？这就是你所需要的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:26:54.357

您正在尝试向其发送消息，`keyboardDidAppear:`但您实施了`keyboardDidAppear`. 第一种方法是一个带参数的方法，但是您提供了一个不带参数的方法，这当然是不同的。

将您的方法定义更改为

```
-(void)keyboardDidAppear:(NSNotification *)n {    
  _button2.hidden = NO; //Please stick to Obj-C semantics and use NO, as opposed to FALSE.
} 
```

或致电

```
@selector(keyboardDidAppear) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:27:54.367

问题很简单。您注册了该方法`keyboardDidAppear:`，但您提供了一个名为`keyboardDidAppear`. 这些不一样（注意冒号）。

改变一个或另一个（但不能同时改变两者）。

另一种解决方案是实现该`UITextFieldDelegate`方法`textFieldDidBeginEditing:`并在调用它时显示按钮。

# xml - 这个推特提要会停止工作吗？

> ID：15933531
> 
> 赞同：0
> 
> 时间：2013-04-10T18:23:58.497
> 
> 标签：xml, twitter

我们可以通过以下 URL 获取 XML 格式的 twitter 用户数据：

```
https://twitter.com/users/show/twitter 
```

当 Twitter 关闭其 API 1.0 时，这是否也会停止工作？从这种 XML 格式获取数据是否安全？我无法从 twitter 文档中找到有关此的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:04:15.530

是的，它会的。你包括什么服务器端语言？

如果您使用的是 PHP，请尝试[这个](https://github.com/zkniebel/jquery-twitter-feed)（忽略名称 - 它已更新为与 Twitter API 1.1 一起使用），其中包含使用 PHP 向 Twitter 的 API 1.1 发出请求的示例。它还有一个 jQuery 插件，可以帮助更轻松地呈现推文，并且针对性能和稳健性进行了优化。

如果您使用 C#，您仍然可以使用上面链接中的 jQuery 插件来帮助您呈现推文，但使用[它](https://github.com/zkniebel/TweetNet)来调用 Twitter。它是一个名为 TweetNET 的库，正在持续开发并定期更新。此外，TweetNET 旨在尽可能地模仿 Twitter 的 API，因此您应该能够跟随 Twitter 的 API，并且几乎不需要其他参考。不过，TweetNET 包括 MSDN 风格的 API 文档以及说明。

# ruby-on-rails - Rails + Gems（一般）：gems 是如何工作的？

> ID：15933536
> 
> 赞同：10
> 
> 时间：2013-04-10T18:24:10.310
> 
> 标签：ruby-on-rails

我使用 Rails 已经有一段时间了，并且一直在我的 gemfile 中使用 gem，但我从来没有真正理解我安装的 gem 的功能是如何真正可用的。假设我使用 has_permalinks gem ( [http://haspermalink.org/](http://haspermalink.org/) )。它`.generate_permalink!`为我的模型提供了一种方法。这个方法在哪里定义？为什么我只是通过安装gem就可以突然使用这种方法？是否有某种`include`//来初始化 gem 的代码`require`，`load`以便应用程序的其余部分可以访问它？另外，当我安装 gem 时，这段代码存储在哪里？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-10T18:30:58.197

我分别回答了你的问题，而且不按顺序回答，但我认为它实际上可能更容易理解这个顺序的答案。

> 另外，当我安装 gem 时，这段代码存储在哪里？

如果您使用的是 Bundler，您可以这样做`bundle show has_permalink`，它会显示该 gem 的安装位置。`pg`这是我用gem做的一个例子：

```
✗ bundle show pg
/Users/jasonswett/.rvm/gems/ruby-1.9.2-p320@jason/gems/pg-0.11.0 
```

> 这个方法在哪里定义？

如果你这样做`bundle show`，它会返回一个路径——该方法是在其中的某个地方定义的。（如果需要，您可以使用它`grep -r 'def generate_permalink' /gem/path`来找到确切的位置。）

> 为什么我只是通过安装gem就可以突然使用这种方法？是否有某种包含/要求/加载来初始化 gem 的代码，以便应用程序的其余部分可以访问它？

查看有关 Rails 初始化过程的这部分文档：http: [//guides.rubyonrails.org/initialization.html#config-boot-rb](http://guides.rubyonrails.org/initialization.html#config-boot-rb)

> 在一个标准的 Rails 应用程序中，有一个 Gemfile 声明了应用程序的所有依赖项。config/boot.rb 将 ENV["BUNDLE_GEMFILE"] 设置为该文件的位置，然后需要 Bundler 并调用 Bundler.setup 将应用程序的依赖项（包括所有 Rails 部分）添加到加载路径，使其可用于要加载的应用程序。

看起来，在这个过程的早期，Rails 会查看您的 Gemfile 并通过 Bundler 加载您的所有 gem。所以有你的包括。

# pidgin - libpurple 媒体 api 是否需要 pidgin UI 才能启动视频屏幕？

> ID：15933537
> 
> 赞同：1
> 
> 时间：2013-04-10T18:24:13.333
> 
> 标签：pidgin, libpurple

lipurple 媒体 API 是否需要 Pidgin UI 才能启动视频屏幕？如果没有 pidgin UI，只需使用 libpurple 后端媒体 API，我们可以启动视频屏幕吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:46:45.900

就目前而言，libpurple 处理协议操作。libpurple 和 Pidgin 通过使用 gstreamer 渲染/覆盖到 Pidgin 中的 gtk 小部件，将 gstreamer 用于实际的视频腿工作。

理论上，您可以为 libpurple 创建一个客户端，将视频传输到文件或您决定编码的任何内容。

# ocaml - ocaml type over-binding due to specialized recursive use of type

> ID：15933543
> 
> 赞同：3
> 
> 时间：2013-04-10T18:24:52.230
> 
> 标签：ocaml, hindley-milner

I have a parameterized type that recursively uses itself but with a type parameter specialized and when I implement a generic operator, the type of that operator is bound too tightly because of the case that handles the specialized sub-tree. The first code sample shows the problem, and the second shows a workaround that I'd rather not use because the real code has quite a few more cases so duplicating code this way is a maintenance hazard.

Here's a minimal test case that shows the problem:

```
module Op1 = struct
  type 'a t = A | B  (* 'a is unused but it and the _ below satisfy a sig *)

  let map _ x = match x with
    | A -> A
    | B -> B
end

module type SIG = sig
  type ('a, 'b) t =
    | Leaf  of 'a * 'b
    (* Here a generic ('a, 'b) t contains a specialized ('a, 'a Op1.t) t. *)
    | Inner of 'a * ('a, 'a Op1.t) t * ('a, 'b) t

  val map : ('a -> 'b) -> ('a_t -> 'b_t) -> ('a, 'a_t) t -> ('b, 'b_t) t
end

module Impl : SIG = struct
  type ('a, 'b) t =
    | Leaf  of 'a * 'b
    | Inner of 'a * ('a, 'a Op1.t) t * ('a, 'b) t

  (* Fails signature check:
       Values do not match:
         val map :
           ('a -> 'b) ->
           ('a Op1.t -> 'b Op1.t) -> ('a, 'a Op1.t) t -> ('b, 'b Op1.t) t
       is not included in
         val map :
           ('a -> 'b) -> ('a_t -> 'b_t) -> ('a, 'a_t) t -> ('b, 'b_t) t
   *)
  let rec map f g n = match n with
    | Leaf  (a, b)    -> Leaf  (f a, g b)
    (* possibly because rec call is applied to specialized sub-tree *)
    | Inner (a, x, y) -> Inner (f a, map f (Op1.map f) x, map f g y)
end 
```

This modified version of `Impl.map` fixed the problem but introduces a maintenance hazard.

```
 let rec map f g n = match n with
    | Leaf  (a, b)    -> Leaf  (f a, g b)
    | Inner (a, x, y) -> Inner (f a, map_spec f x, map f g y)
  and map_spec f n = match n with
    | Leaf  (a, b)    -> Leaf  (f a, Op1.map f b)
    | Inner (a, x, y) -> Inner (f a, map_spec f x, map_spec f y) 
```

Is there any way to get this to work without duplicating the body of `let rec map`?

* * *

Applying gasche's solution yields the following working code:

```
let rec map
    : 'a 'b 'c 'd . ('a -> 'b) -> ('c -> 'd) -> ('a, 'c) t -> ('b, 'd) t
  = fun f g n -> match n with
    | Leaf  (a, b)    -> Leaf  (f a, g b)
    | Inner (a, x, y) -> Inner (f a, map f (Op1.map f) x, map f g y) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T20:14:14.197

This style of recursion in datatype definitions is called "non-regular": the recursive type `'a t` is reused at an instance `foo t` where `foo` is different from the single variable `'a` used in the definition. Another well-known example is the type of full binary trees (with exactly 2^n leaves):

```
type 'a full_tree =
  | Leaf of 'a
  | Node of ('a * 'a) full_tree 
```

Recursive functions that operate these datatypes typically suffer from the *monomorphic recursion* restriction of languages with type inference. When you do type inference you have to make a guess at what the type of a recursive function may be, before type-checking its body (as it may be use inside). ML languages refine this guess by unification/inference, but only monomorphic types may be inferred. If your function makes polymorphic uses of itself (it calls itself recursively on a different type that what it took as input), this cannot be inferred (it is undecidable in the general case).

```
let rec depth = function
| Leaf _ -> 1
| Node t -> 1 + depth t
                      ^
   Error: This expression has type ('a * 'a) full_tree
   but an expression was expected of type 'a full_tree 
```

Since 3.12, OCaml allows to use an explicit polymorphic annotation of the form `'a 'b . foo`, meaning `forall 'a 'b. foo`:

```
let rec depth : 'a . 'a full_tree -> int = function
| Leaf _ -> 1
| Node t -> 1 + depth t 
```

You could do the same in your example. However, I wasn't able to compile the type after using the annotation you have in your module signature, as it appear to be wrong (the `'a_t` are just weird). Here is what I used to make it work:

```
let rec map : 'a 'b . ('a -> 'b) -> ('a Op1.t -> 'b Op1.t) ->
                      ('a, 'a Op1.t) t -> ('b, 'b Op1.t) t
= fun f g n -> match n with
  | Leaf  (a, b)    -> Leaf  (f a, g b)
  | Inner (a, x, y) -> Inner (f a, map f (Op1.map f) x, map f g y) 
```

# r - 如何对 R 中所有列的每条记录取平均值

> ID：15933551
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:25:08.403
> 
> 标签：r, average

我有一个数据框，我想对所有列的每 60 条记录取平均值，然后返回一个新的数据框。

例如，我想取从第 1 行到第 60 行的每一列的平均值，然后是第 61 行到第 120 行，然后是 121-180，同样……并遍历整个数据帧。然后将所有这些方法汇总在一张表下作为新的数据框。

任何人都可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:46:57.480

我正在做一些令人费解的事情`lapply`，`colMeans`在我意识到使用from会***更***容易之前。为了完整起见，我展示了这两种方法如何在一些 5 列宽 x 120 行长的虚拟数据上产生相同的结果：`rollapply``package:zoo`

```
 data <- data.frame(matrix(runif(600),nrow=120))
    nrows <- 60
    t(sapply( rev(1:floor(nrow(data)/nrows)) , function(x){ colMeans(data[c(rev(seq.int( nrow(data)/x))[1:60]),]) } ))
                X1        X2        X3        X4        X5
#   [1,] 0.4706680 0.4780024 0.4749281 0.4910620 0.4815172
#   [2,] 0.5236926 0.4385900 0.4979433 0.4787086 0.5616210 
```

或者更简单地说`rollapply()`

```
 require(zoo)
    rollapply(data, 60, FUN = mean , by = 60 )
                X1        X2        X3        X4        X5
#   [1,] 0.4706680 0.4780024 0.4749281 0.4910620 0.4815172
#   [2,] 0.5236926 0.4385900 0.4979433 0.4787086 0.5616210 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:47:21.197

显然没有对您的数据进行测试，但在 help(aggregate) 中的第一个示例中进行了测试

```
dflen <- nrow(dfrm)
aggregate(dfrm, list(rep(1:(dflen/60 +1), each=60, length=dflen) ), mean) 
```

# vb.net - 使用 VB.NET VSTO 删除 Excel 任务窗格关闭按钮

> ID：15933552
> 
> 赞同：0
> 
> 时间：2013-04-10T18:25:13.340
> 
> 标签：vb.net, excel, winapi, vsto, customtaskpane

我相信标题说明了一切。有人知道如何使用 VSTO (VB.NET) 在 Excel 中删除任务窗格的关闭按钮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:51:51.487

我认为它应该是这样的：

```
taskPane.CloseButton = false; 
```

（我在我当前的插件中对此进行了测试，该插件使用了一些使用 TaskPane 管理器的 3rd 方软件并且它在那里工作。这就是为什么我不完全确定这是否对你有用，特别是在阅读[了这个主题](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/fa3118ed-ba37-4ee4-ba26-e81b7e2352c8/)后得出的结论是没有直接方法）。

# jquery - Jquery调整改变的iframe大小

> ID：15933554
> 
> 赞同：0
> 
> 时间：2013-04-10T18:25:26.890
> 
> 标签：jquery, iframe, window-resize

我的代码可以很好地调整 iframe 的大小。唯一的问题是它会立即适应新的大小并且不考虑转换时间。结果，任何随着转换时间而扩展的 div 都会强制 iframe 切断我的文档的底部。我对 jquery 真的很陌生，所以我不知道如何在我找到的这段代码中添加一个计时器。

```
function resizeFrame(ctrl) {

    $(ctrl.contentWindow.document).ready(function ()
    {
        var s;
        s = 100;
        ctrl.style.height = s;
        var doc = $(ctrl.contentWindow.document);

        s = doc.height() + "px";
        ctrl.style.height = s;
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:50:08.737

//延迟

```
function resizeFrame(ctrl) {

    $(ctrl.contentWindow.document).ready(function ()
    {

var myDelay = setTimeout(resizeMe, 2500); //2 1/2 second delay

function resizeMe(){
        var s;
        s = 100;
        ctrl.style.height = s;
        var doc = $(ctrl.contentWindow.document);

        s = doc.height() + "px";
        ctrl.style.height = s;
    });
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:28:28.957

如果您只需要延迟，您可以使用`[setTimeout](http://www.w3schools.com/js/js_timing.asp)`. 如果您需要逐渐改变大小，请查看 jQuery 动画工具。

# row - HBase 如何删除仍在 memstore 中的行？

> ID：15933557
> 
> 赞同：0
> 
> 时间：2013-04-10T18:25:37.260
> 
> 标签：row, hbase

假设我刚刚向表中添加了一行，并且该行仍在 memstore 中。此时，我将其删除。删除是怎么回事？我不确定我的理解是否正确：在 memstore 中为该行添加了一个标记。当 memstore 被刷新时，行和标记被写入 HFile。但如果是这样，为什么不从 memstore 中删除该行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:57:05.753

HBase 的工作方式是每次更改都是一个新的“插入”。这让我们以高效的方式工作。您还应该记住，在许多情况下，HBase 设置为保存每个值的 x 个版本。因此，该行仅在内存存储中并且应该只保留该行的一个版本的时间是一个非常特殊的边缘情况。系统最好以单一、预测和测试的方式工作，而不是处理这种边缘情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:40:33.420

磁盘上的 Store 文件中可能已经存在具有相同 rowkey 的行，在这种情况下，另一个具有相同 rowkey 的添加将更新现有行，从而生成该行的新版本。从 memstore 中使用删除标记保存新添加的行将允许主要压缩将该行的所有旧版本删除到具有删除标记的版本。

# javascript - 根据条件验证动态创建的 div

> ID：15933559
> 
> 赞同：2
> 
> 时间：2013-04-10T18:25:42.937
> 
> 标签：javascript, jquery, html

我有代码允许用户在一个人和 2 个选项之间进行`TYPEA`选择`TYPEB`。

```
SELECT PERSON - { TYPEA, TYPEB  } 
```

根据选择，它显示：

```
TYPEA - { TYPEA WITH ID, TYPEA WITHOUT ID }
TYPEB - { TYPEB WITH ID, TYPEB WITHOUT ID } 
```

它正在处理这个：

### html:

```
<div id="person-A-withID"    class="persons" style="display:none"></div>
<div id="person-A-withoutID" class="persons" style="display:none"></div>
<div id="person-B-withID"    class="persons" style="display:none"></div>
<div id="person-B-withoutID" class="persons" style="display:none"></div> 
```

### jQuery：

```
$(function () {
   $('#has_id').show();
   $('#select_person').change(function () {
     $('.persons').hide();
     if ($('#select_person').val() == 'typeA') {
        $("#has_id").html('');
        $("<option/>").val('0').text('--Choose Type A--').appendTo("#has_id");
        $("<option/>").val('person-A-withID').text('person-A-withID').appendTo("#has_id");
        $("<option/>").val('person-A-withoutID').text('person-A-withoutID').appendTo("#has_id");
     }

     if ($('#select_person').val() == 'typeB') {
        $("#has_id").html('');
        $("<option/>").val('0').text('--Choose Type B--').appendTo("#has_id");
        $("<option/>").val('person-B-withID').text('person-B-withID').appendTo("#has_id");
        $("<option/>").val('person-B-withoutID').text('person-B-withoutID').appendTo("#has_id");
     }
  });

  $('#has_id').change(function () {
    $('.persons').hide();
    $('#' + $(this).val()).show();
  });
}); 
```

我有一个函数可以使用以下代码验证该值是否为空或等于 0：

```
function validate(id, msg) {
    //search object
    var obj = $('#' + id);

    if(obj.val() == '0' || obj.val() == ''){
            //append error to particular div called #id__field_box 
        $("#" + id + "_field_box .form-error").html(msg)
        return true;
    }
    return false;
} 
```

我在这样的验证函数中调用它：

```
var validation = function(){
  var err = 0;
  err += validate('select_person', "select person.");

  //err += validate($('#select_person:first-child').attr('has_id'), "Select wether it has ID or not."); 
  //err += validate('has_id', "Select wether it has ID or not.");   

  if(err == 0){
         //continue
  }else{
         //stop
  }
}; 
```

现在，问题是我无法验证`has_id`零件，我只能验证第一个零件。如何使用它来搜索`has_id`？

[这是一个小提琴，请看一下](http://jsfiddle.net/LEfbX/27/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:00:49.587

在您的示例中，没有 id 为“selector_persona”的元素。这会阻止您的第二个验证功能工作。通过将您要验证的 id ('has_id') 传递给它，它会引用该对象并检查以确保它具有一个值。

选择一个人，将第二个选项保留为“--Choose Type A--”，然后单击确定。它返回您的错误。 [http://jsfiddle.net/zyglobe/LEfbX/131/](http://jsfiddle.net/zyglobe/LEfbX/131/)

```
var validation = function(){
    var err = 0;
    err += validate('select_person', "select person.");
    err += validate('has_id', "Select whether it has an ID or not.");           
    if(err == 0){
        alert('continue');
    } else{
        alert('error: ');
    }
}; 
```

你也可以检查这部分：

```
$('#select_person:first-child').attr('has_id') 
```

您正在尝试查找名称为 has_id 的属性，该属性适用于以下情况：

```
<select has_id="some_value" /> 
```

我认为您的意思是选择将返回“has_id”值的 attr('id')：

```
<select id="has_id" /> 
```

# actionscript-3 - AS3 - 使用 If 语句拖动到下一个场景。

> ID：15933561
> 
> 赞同：0
> 
> 时间：2013-04-10T18:25:54.437
> 
> 标签：actionscript-3, if-statement, drag-and-drop

我正在制作一个互动游戏——到目前为止我有这个代码。其中 drop1 是硬币，用户将其放入 target1（框）中，一旦完成，他们就可以在下一个场景中观看视频播放。如您所见，当 drop1（硬币）掉到盒子上时，硬币消失了

```
 //Array to hold the target instances, the drop instances,   
  //and the start positions of the drop instances.
  var hitArray:Array = new Array(hitTarget1);
  var dropArray:Array = new Array(drop1);
  var positionsArray:Array = new Array();

  //This adds the mouse down and up listener to the drop instances
  //and add the starting x and y positions of the drop instances
  //into the array.
  for (var i:int = 0; i < dropArray.length; i++) {
  dropArray[i].buttonMode = true;
  dropArray[i].addEventListener(MouseEvent.MOUSE_DOWN, mdown);
  dropArray[i].addEventListener(MouseEvent.MOUSE_UP, mUp);

  positionsArray.push({xPos:dropArray[i].x, yPos:dropArray[i].y});
  }

  //This drags the object that has been selected and moves it
  //to the top of the display list. This means you can't drag
  //this object underneath anything.
  function mdown(e:MouseEvent):void {
  e.currentTarget.startDrag();
  setChildIndex(MovieClip(e.currentTarget), numChildren - 1);
  }

  //This stops the dragging of the selected object when the mouse is
  //released. If the object is dropped on the corresponding target
  //then it get set to the x and y position of the target. Otherwise
  //it returns to the original position.
  function mUp(e:MouseEvent):void {
  var dropIndex:int = dropArray.indexOf(e.currentTarget);
  var target:MovieClip = e.currentTarget as MovieClip;

  target.stopDrag();

  if (target.hitTestObject(hitArray[dropIndex])) {
  target.x = hitArray[dropIndex].x;
  target.y = hitArray[dropIndex].y;
  drop1.visible = false;
  }else{
  target.x = positionsArray[dropIndex].xPos;
  target.y = positionsArray[dropIndex].yPos;

  }
  } 
```

现在...我希望代码知道用户何时将硬币放入盒子中，如果用户有，则他们可以观看视频，但如果他们将硬币放入盒子中，则只能观看视频。我该如何编码？

请帮忙。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:07:59.140

如果您仍在苦苦挣扎，您可以随时尝试阅读手册..？我怀疑这就是为什么你到目前为止还没有答案。在帧/场景之间移动需要 gotoAndPlay 或 gotoAndStop。检查：[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#gotoAndPlay()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#gotoAndPlay())

查看示例二的场景跳转代码。在上面写着“介绍”（帧标签）的地方，可以只使用一个数字，但场景必须有名称.. 例如：

```
mc1.gotoAndPlay("intro", "Scene 12"); 
```

或者在您的情况下，如下所示（假设您已将其命名为 scene_video）

```
if (target.hitTestObject(hitArray[dropIndex])) {
target.x = hitArray[dropIndex].x;
target.y = hitArray[dropIndex].y;
drop1.visible = false;
gotoAndStop(1, "scene_video");     } 
```

我再次假设您的视频播放器位于该场景的第 1 帧，因此停在那里可以让用户有机会观看视频播放器。

# scala - 结果/嵌套模式匹配

> ID：15933562
> 
> 赞同：2
> 
> 时间：2013-04-10T18:25:56.490
> 
> 标签：scala, pattern-matching

当我通过多个模式匹配发送变量时，这样做的命名约定是什么？

```
val somethingBetweenOriginalAndResult = original match {
  case ...
  case ...
}
val somethingElseBetweenOriginalAndResult = somethingBetweenOriginalAndResult match {
  case ...
  case ...
}
val result = somethingElseBetweenOriginalAndResult match {
  case ...
  case ...
} 
```

事实上，我只需要`original`并且`result`在它们之间引入的每个 val 都会涂抹我的命名空间，并要求我研究一个新的变量名。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:28:07.197

使用块和简短的临时变量名称（只要足够长的时间向某人建议您要完成的工作——如果很明显，`x`公司会做得很好）：

```
val original = ...
val result = {
  val x = original match { ... }
  val y = x match { ... }
  y match { ... }
} 
```

如果您愿意，您甚至可以完全省略变量名（尽管优先级是向后的，所以您需要添加括号或其他内容）：

```
val result = {
  ((original match {
    ...
  }) match {
    ...
  }) match {
    ...
  }
} 
```

因为上一场比赛的结果是下一场比赛的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:29:36.983

如果您真的不关心某事ElseBetweenOriginalAndResult，也许您应该尽量避免创建它。这实际上取决于原始的类型和您在模式匹配中考虑的情况，但可能有一种方法可以通过一个模式匹配来实现。最坏的情况，为什么不使用它：

```
val result = original match {
  case ...
  case ...
} match {
  case ...
  case ...
} match {
  case ...
  case ...
} 
```

我真的不喜欢它，但至少你不会创造一个你以后可能会不小心提到的不必要的值。

# java - 用新数字替换前一个数字的java循环

> ID：15933565
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:26:10.833
> 
> 标签：java, loops

我是学习java的新手，我正在创建一个水果机。

我希望老虎机号码在显示实际结果之前通过随机数旋转，从而产生旋转效果。

为此，我认为我需要创建一个随机数循环，其中每个新数字替换以前的数字，例如，如果生成的第一个随机数是“5”，下一个是“7”，则“7”将替换“5”显示时。我不知道如何也无法通过互联网研究找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:47:58.433

这是一个生成 n 个随机数的循环：

```
int num = 0;
for(int i = 0; i < n; i++) {
     num = Random.nextInt(9);
     doSomething();
} 
```

# windows - 在管理员帐户下调用 COM 服务器成功，但在 SYSTEM 帐户下失败

> ID：15933568
> 
> 赞同：0
> 
> 时间：2013-04-10T18:26:17.257
> 
> 标签：windows, com

我正在尝试从 COM 服务器（实际上是 Motorola MeshAPI）查询一些数据，但无法初始化。使用下面的代码片段，我在以管理员身份在命令行上运行时获得了成功的数据，但我使用此代码的实际程序作为 SYSTEM 帐户下的服务运行。使用“psexec -i -s cmd.exe”，我在 SYSTEM 帐户下运行了代码片段，我得到了与服务相同的错误。

是 CreateInstance() 调用失败，并显示错误消息“服务器执行失败”和错误代码 2148007941 (0x80080005)。在 Windows 事件查看器的“系统”窗格中，我看到源“DCOM”、事件 ID 10010 和描述“服务器 {....GUID} 未在所需超时内向 DCOM 注册”的错误。

我已经尝试了这个答案[https://stackoverflow.com/a/1157331](https://stackoverflow.com/a/1157331)中的提示，但我没有发现任何有助于解决这个问题的方法。

什么会导致它在管理员下工作但在系统下失败，我怎样才能让它在系统下运行时工作？

```
HRESULT hr=S_OK;
USHORT nLinkResistance;
if (!m_MeshNetInitialised)
{
    hr = m_pApiCardInterface.CreateInstance("MeshAPI.MeshNet");// mea interface smart pointer 
    if (SUCCEEDED(hr))
    {
        Sleep(1000);
        m_MeshNetInitialised = true;
    }
}
if (m_MeshNetInitialised)
{
    hr = m_pApiCardInterface->GetIAPLinkResistance(&nLinkResistance);   
    if( SUCCEEDED(hr) )
    {
        l_retval = nLinkResistance;
    }
    else
    {
        std::wcout << L"Error getting IAPLinkResistance" << std::endl;
    }
}
if (FAILED(hr))
{
    _com_error err(hr);
    std::wcout << err.ErrorMessage();
} 
```

# php - 在 php 中使用 javascript 函数变量

> ID：15933570
> 
> 赞同：0
> 
> 时间：2013-04-10T18:26:19.783
> 
> 标签：php, javascript

我有一个javascript函数。它有一个带有特定值的变量（由用户输入）。我需要将此值插入到 sql 数据库中。我知道我不能使用 javascript 连接到数据库，我需要为此使用 php。你能告诉我该怎么做吗？解释一下，我会写代码。我的意思是，我是否需要创建一个新的 php 文件（但是如果我创建一个新的 php 表，那么我如何访问这个变量 bcz 它在一个完全不同的 php 表中）或者我可以写在同一个文件中，东西像这样....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:28:30.413

在我看来，您需要对单独的 PHP 文件进行 AJAX 调用来处理脚本并将值返回给 JavaScript。

# objective-c - 使用 GData Objective-C api... 有没有办法从 YouTube 获取特定视频的统计信息？

> ID：15933573
> 
> 赞同：0
> 
> 时间：2013-04-10T18:26:38.607
> 
> 标签：objective-c, gdata-api

我能得到的只是片段变量......没有相关的统计数据。我正在尝试获取每个特定视频的喜欢、不喜欢和持续时间。

```
+(void) getListOfVideosFromSearchTerm: (NSString *) term usingCallback: (getListOfVideosCallback) callback{
    if (youTubeService.authorizer == nil) callback(nil);
  __block NSMutableArray *videosArray = [NSMutableArray array];

    GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"id,snippet"];
    query.maxResults = 10;
    query.q = term;
    query.videoEmbeddable = @"true";
    query.type = @"video";

    GTLServiceTicket *ticket = [youTubeService executeQuery:query
                                   completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error) {
                                       // This callback block is run when the fetch completes
                                       if (error == nil) {
                                           GTLYouTubeSearchListResponse *products = object;

                                           // iteration of items and subscript access to items.
                                           for (GTLYouTubeSearchResult *item in products) {
                                               ILVVideo *newVideo = [[ILVVideo alloc] init];
                                               newVideo.title = item.snippet.title;
                                               newVideo.description = item.snippet.descriptionProperty;
                                               newVideo.thumbnail.urlForHighResolution = item.snippet.thumbnails.high.url;
                                               newVideo.thumbnail.highResolutionSize = CGSizeMake([item.snippet.thumbnails.high.width floatValue], [item.snippet.thumbnails.high.height floatValue]);
                                               newVideo.thumbnail.urlForMediumResolution = item.snippet.thumbnails.medium.url;
                                               newVideo.thumbnail.mediumResolutionSize = CGSizeMake([item.snippet.thumbnails.medium.width floatValue], [item.snippet.thumbnails.medium.height floatValue]);
                                               newVideo.thumbnail.urlForStandardResolutionImage = item.snippet.thumbnails.standard.url;
                                               newVideo.thumbnail.standardResolutionSize = CGSizeMake([item.snippet.thumbnails.standard.width floatValue], [item.snippet.thumbnails.standard.height floatValue]);
                                               [videosArray addObject:newVideo];
                                               NSLog(@"%@",item.snippet.title);

                                           }
                                           callback(videosArray);
                                       }else{
                                           NSLog(@"Error: %@", error.description);
                                       }
                                   }];

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T19:19:29.453

分析可通过 YouTube 新的基于 JSON 的 API 获得。

[https://developers.google.com/youtube/analytics/](https://developers.google.com/youtube/analytics/)

在[基于 JSON 的 Objective-C 库](https://code.google.com/p/google-api-objectivec-client/)中有为 YouTube Analytics API[生成的类](https://code.google.com/p/google-api-objectivec-client/source/browse/#svn/trunk/Source/Services/YouTubeAnalytics/Generated)。

# mysql - 对如何查询此表感到困惑

> ID：15933574
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:26:39.747
> 
> 标签：mysql

我有两个简单的表格设置：

```
table: deals
dealID   |   dealDate    | storeName
1        |   2013-04-01  | bayport
2        |   2013-04-01  | staten island
3        |   2013-04-04  | bayport

table: phoneDetails
phoneID    |   dealID    | dateReceived
1          |   1         | 2013-04-04
2          |   1         | 2013-04-04
3          |   2         | 2013-04-06
4          |   3         | 2013-04-05
5          |   3         | 2013-04-05 
```

因此，基于此表，我需要查询我的数据库以显示交易日期以及每个商店在该日期收到的电话数量，或者甚至使用日历日期而不是交易日期也可以。例如：

```
dealDate    |  storeName     | Received
2013-04-01  |  bayport       | 0
2013-04-01  |  staten island | 0
2013-04-04  |  bayport       | 2 
```

任何帮助，将不胜感激。我知道如何查询 dealDate 和 storeName，但我对如何子查询“Received”计数感到困惑，因为 dealDate 和 dateReceived 不同。

@echo_me，我该怎么做才能将结果更改为基于日历而不是交易日期的结果。看看我是如何在 4 月 6 日收到 1 部电话的，尽管那天没有交易

```
date       |  storeName      |  received
2013-04-01 |                 |  0
2013-04-02 |         |                          
2013-04-03 |                 |
2013-04-04 | bayport         |  2
2013-04-05 | bayport         |  1
2013-04-06 | staten island   |  1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:41:06.747

我认为这将在您的示例中产生结果：

```
select d.dealDate dealDate, storeName, ifnull(count(*), 0) Received
from deals d
left join phoneDetails p on d.dealId = p.dealId and d.dealDate = p.dateReceived
group by dealDate, storeName 
```

对于您要求的第二个结果，应该这样做：

```
select dateReceived date, storeName, count(*) received
from phoneDetails p
join deals using (dealId)
group by date, storeName
order by date 
```

这不会显示没有收到任何内容的日期，您需要加入一个包含您关心的范围内所有日期的表，并且在 MySQL 中没有内置方法可以做到这一点（我认为 SQL-Server 或 Oracle可以做到）。有关使用所有日期填充临时表的方法，请参阅[此问题](https://stackoverflow.com/questions/10132024/how-to-populate-a-table-with-a-range-of-dates)，然后您可以将其与上述查询连接以生成所需的 0 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:03:58.953

尝试这个

```
SELECT a.dealDate as dealDate, a.storeName as storeName, count(dateReceived) as Received
FROM deals a 
LEFT JOIN phoneDetails b 
ON a.dealDate = b.dateReceived
GROUP BY dealDate, storeName 
```

[**在这里演示**](http://sqlfiddle.com/#!2/329a3/38)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:37:05.070

如果您尝试以下操作，它将返回接收日期晚于交易日期的计数。

```
select a.dealDate as dealDate, a.storeName as storeName, b.dateReceived as dateReceived,  count(*) as counts
  from deals a left outer join phoneDetails b on a.dealId = b.dealId
 where b.dateReceived >= a.dealDate
 group by dealDate, storeName, dateReceived 
```

这能让你得到你需要的吗？

# ios - 如何修复使用'ldid'签署cydia应用程序时给出的错误

> ID：15933578
> 
> 赞同：0
> 
> 时间：2013-04-10T18:26:55.063
> 
> 标签：ios, jailbreak, codesign

我已经使用该`ldid`实用程序对我的应用程序进行了代码设计，以便可以继续使用 cydia。是的，我使用该套件构建了我的应用程序`armv7`。

这是我在终端中使用的代码：

```
/// Before running the below code, I connected to my iDevice using SSH

root# ldid -S /Applications/(appname here).app/(appname here)

/// Here is the error
util/ldid.cpp(567): _assert(0:arch != NULL) 
```

有人对修复此错误有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:30:50.437

这似乎是随机出现的。我倾向于做些什么来解决这个问题：

1.  删除二进制文件（**从**应用程序包和构建目录中删除！）
2.  重新编译，重新链接源以生成新的二进制文件
3.  重试。如果错误仍然存​​在，则重复步骤 1.、2.，然后使用（注意小写）**删除**虚假代码，然后重试。`ldid -s <binary>``s`

# objective-c - 使 CCMenutItemSprite 禁用状态可点击

> ID：15933581
> 
> 赞同：1
> 
> 时间：2013-04-10T18:27:04.500
> 
> 标签：objective-c, cocos2d-iphone, ccmenuitem

我正在尝试使 CCMenuItem（例如 CCMenuItemSprite）在禁用状态下可点击。

我将 CCMenuItemSprite 子类化并覆盖了这些函数：

```
 -(void) selected
    {
         CCLOG(@"selected");
         [super selected];

         [self setScale:0.775];
         [normalImage_ setVisible:NO];
         [selectedImage_ setVisible:YES];
         [disabledImage_ setVisible:NO];
     }

     -(void) unselected
    {
        CCLOG(@"unselected");
        [super unselected];

        [self setScale:1];
        [normalImage_ setVisible:YES];
        [selectedImage_ setVisible:NO];
        [disabledImage_ setVisible:NO];
    }

    -(void) activate
    {
        CCLOG(@"activate");

        if( block_ )
             block_(self);
    } 
```

基本上我从这三个函数中取出了标志检查 isEnabled_ 。如果按下按钮以外的任何内容（包括关闭菜单），我的场景中有逻辑可以取消选择所有内容。现在发生的事情是在按下按钮后，它被禁用。如果我再次尝试按下它，它只会关闭所有东西，就像按钮不存在一样。

我需要的是这些按钮在禁用状态下可以点击（它将运行选中和未选中但不激活）。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:32:28.807

在禁用状态下可点击？那为什么要禁用菜单按钮？只需更改普通图像即可禁用图像框架。

```
[menuBtn setNormalImage:[CCSprite spriteWithSpriteFrame:@"frameDisableBtn.png"] ];
[menuBtn setSelectedImage:[CCSprite spriteWithSpriteFrame:@"frameDisableBtn.png"] ]; 
```

# python - 如何在 Matplotlib 动画中创建动态标题

> ID：15933588
> 
> 赞同：3
> 
> 时间：2013-04-10T18:27:19.677
> 
> 标签：python, numpy, matplotlib, scipy

我正在尝试创建一个 Matplotlib 动画，其中标题随每一帧而变化。这是我到目前为止所拥有的（几乎是从[matplotlib.org](http://matplotlib.org/examples/animation/basic_example.html)盲目复制/粘贴）；`A`包含我正在绘制的数据并`textVec`包含我要添加的标题：

```
fig = plt.figure()

textVec = ['Period ' + str(i[0]) + ' to ' + str(i[1]) + '.'
for i in sliceVec]

ims = []
for i in A:
   ims.append((ax = plt.pcolormesh(i), ))

plt.xlabel(r'$\omega$', size = 22)
plt.ylabel(r'$\gamma$', size = 22)

im_ani = animation.ArtistAnimation(fig, ims, interval=300,
   repeat_delay=1000, blit=True) 
```

以上工作，但如何添加这些标题？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-22T18:11:39.437

**老问题，但仍然花了我半天的**时间尝试并尝试使用`animation.ArtistAnimation()`. 它只是不工作。
我得到的最接近的方法是设置注释，但它一位于绘图上方（不知何故在绘制区域之外）就消失了。

对我有用的`animation.FuncAnimation()`
是最初的问题中没有给出数据，所以我设置了一些东西。

```
# generate dummy data
data = []
for i in range(10):
    # make these smaller to increase the resolution
    dx, dy = 0.05, 0.05
    # generate 2 2d grids for the x & y bounds
    y, x = np.mgrid[slice(-5, 5 + dy, dy),
                    slice(-5, 5 + dx, dx)]   
    z = np.cos((x*x + y*y) - i*2*np.pi/10)
    # x and y are bounds, so z should be the value *inside* those bounds.
    # Therefore, remove the last value from the z array.
    z = z[:-1, :-1]

    data.append((x, y, z))

# generate title
titles = ["frame nr {}".format(frame) for frame in range(len(data))]

def func(frame, ax, data, titles):

    ax.pcolormesh(*data[frame])
    ax.set_title(titles[frame])

    return ax

fig = plt.figure()
ax = fig.add_subplot(111)

frames = range(len(data))
ani = animation.FuncAnimation(fig, func, frames, interval=300,
                              repeat_delay=1000, blit=False,
                              fargs=(ax, data, titles)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:15:59.223

我没有在这里列出一个完整的解决方案，但是使用这些指针你应该能够得到你想要的：

您需要在函数`update_line`中包含应该在 python 代码中的一行（而不是在您的帖子中）。此行应在此函数的每次迭代中设置图形的标题。`plt.title()`为此目的应该可以正常工作。

# c# - Windows 8 商店应用程序的意外暂停行为

> ID：15933591
> 
> 赞同：0
> 
> 时间：2013-04-10T18:27:23.803
> 
> 标签：c#, windows-8, windows-runtime, lifecycle, suspend

[这是我阅读的链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)的摘录：

*当用户将应用移至后台时，Windows 会等待几秒钟以查看用户是否立即切换回应用。如果用户不切换回来，Windows 会挂起应用程序。*

*如果一个应用已经为 Suspending | 注册了一个事件处理程序。暂停事件，在应用程序暂停之前调用此事件处理程序。*

在我的应用程序代码文件`App.xaml.cs`中，我重写了方法`OnSuspending`。但是，在调试应用程序时，当我离开它或打开另一个应用程序时，似乎没有调用此方法。我也等了一段时间，没有任何反应。如果我使用关闭手势或按 Alt+F4，最终会按预期调用该方法。我在这里错过了什么吗？当您离开它时，该应用程序不应该被暂停吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:23:02.707

调试应用程序时不会暂停应用程序。它们只会在调试器之外暂停。

要强制您的应用在调试时暂停，请参阅以下答案：[https ://stackoverflow.com/a/14077958/1822514](https://stackoverflow.com/a/14077958/1822514)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T19:23:30.637

调试时，您需要使用 Visual Studio 中调试位置工具栏上的挂起、恢复和挂起和关闭来测试应用程序对这些事件的响应。我发现在模拟器中运行时这样做更容易。

您可以[在此处阅读有关它](http://msdn.microsoft.com/en-us/library/windows/apps/hh974425%28v=vs.110%29.aspx#BKMK_Trigger_Process_Lifecycle_Management_events)的更多信息，也可以查看[App Builder 程序](http://aka.ms/8in30SO)中提供的更多此类信息。

# android - 检查内容解析器是否有价值

> ID：15933592
> 
> 赞同：2
> 
> 时间：2013-04-10T18:27:29.960
> 
> 标签：android

按照这个关于如何在 android 活动中设置铃声的[答案](https://stackoverflow.com/a/1287415/1072062)，我正在使用以下代码：

```
File k = new File(path, "mysong.mp3"); // path is a file to /sdcard/media/ringtone

ContentValues values = new ContentValues();
values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
values.put(MediaStore.MediaColumns.TITLE, "My Song title");
values.put(MediaStore.MediaColumns.SIZE, 215454);
values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
values.put(MediaStore.Audio.Media.ARTIST, "Madonna");
values.put(MediaStore.Audio.Media.DURATION, 230);
values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
values.put(MediaStore.Audio.Media.IS_ALARM, false);
values.put(MediaStore.Audio.Media.IS_MUSIC, false);

//Insert it into the database
Uri uri = MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath());
Uri newUri = main.getContentResolver().insert(uri, values);

RingtoneManager.setActualDefaultRingtoneUri(
  myActivity,
  RingtoneManager.TYPE_RINGTONE,
  newUri
); 
```

但是，每次我运行我的程序时，这都会在我的内容解析器中创建一个新条目。如何检查内容解析器中是否已存在 Uri？我在文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:38:51.447

内容解析器只是处理您的应用程序和内容提供者之间的交互的东西。

您应该查看内容提供程序，尤其是 MediaStore 内容提供程序。

当你打电话时你在做什么

```
Uri newUri = main.getContentResolver().insert(uri, values); 
```

正在向 MediaStore 中插入新行。newUri 指向这一行。您可以通过调用获取行的 _ID 值

```
long newID=ContentUris.parseId(newUri); 
```

但是，我认为您要问的是“我如何判断我是否已经将歌曲添加到 MediaStore？” 我建议您在 MediaStore 上进行查询。请参阅 ContentResolver.query()。

如果我这样做了，我会查询 MediaColumns.DATA，看看你之前是否写过那个文件。除此之外，您还必须决定什么构成“已经存在”的铃声。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:32:45.123

你可以简单地查询这个 Uri

```
Cursor c = getContentResolver().query(uri, projection, selection, selectionArgs, sortOrder);
if (c.getCount == 1) {
    // already inserted, update this row or do sth else
} else {
    // row does not exist, you can insert or do sth else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:30:49.123

如果您不想插入新值，请使用[ContentResolver.update()](http://developer.android.com/reference/android/content/ContentResolver.html#update%28android.net.Uri,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)和合适的 where 子句来更新现有值。

# android - Android中的动态图像显示

> ID：15933593
> 
> 赞同：0
> 
> 时间：2013-04-10T18:27:30.717
> 
> 标签：android, image

我需要有一个下载图像的文件夹。然后遍历该文件夹的内容以在预设的时间段内一张一张地显示图像。我的屏幕分为三个部分：

*   在第一行，有 2 列：列表视图和图像视图
*   第二行有一个图像视图。

我的主要重点是显示图像。我的问题是如何创建图像视图，由于图像资源不在 Android 的 res 文件夹中，它是在运行时确定的。我无法使用`android:src="@drawable/android"`标签将图像放入图像视图中。

我运行了调试器，但控制没有进入`if (file.isDirectory())`块。我有电话卡中命名`ServiceMobile2`的文件夹。`H:/`

```
<-xml file->
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:stretchColumns="*" android:background="#ffffff">
    <!-- Row 1 with single column -->
     <TableRow
         android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:gravity="center_horizontal">
    <EditText
    android:id="@+id/personal_contacts"
    android:layout_width="200dip"
    android:layout_height="wrap_content"
    android:hint="number"
    android:inputType="number"
    android:imeOptions="actionSend" />
    <TableRow
         android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:gravity="center_horizontal">
     <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Save" />
     </TableRow>
      <TableRow
         android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:gravity="center_horizontal">
    <Button
        android:id="@+id/button2"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Delete" />
    </TableRow>
    </TableRow>
    <TableRow
         android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:gravity="center_horizontal">
      <ListView
        android:id="@+id/list2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView> 
      <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         />

     </TableRow>  
         <TableRow
         android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:gravity="center_horizontal">
      <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         />
      </TableRow> 
    </TableLayout>

public void getFromSdcard()
{   
    File file=  new File(android.os.Environment.getExternalStorageDirectory(),"serviceMobile2");
    Toast.makeText(getBaseContext(), "file printer",Toast.LENGTH_SHORT).show();
    if (file.isDirectory())
    {
        listFile = file.listFiles();

        for (int i = 0; i < listFile.length; i++)
        {
            mFileStrings[i] = listFile[i].getAbsolutePath();
            f.add(listFile[i].getAbsolutePath());
            System.out.println("...................................."+mFileStrings[i]);
            Toast.makeText(getBaseContext(), mFileStrings[i], Toast.LENGTH_SHORT).show();
            Bitmap bitmap = BitmapFactory.decodeFile(listFile[i].getAbsolutePath());
            ImageView iv= (ImageView) findViewById(R.id.imageView2);
            iv.setImageBitmap(bitmap);
        }
    }
} 
```

# wordpress - 联系表格 7（Wordpress 插件）

> ID：15933594
> 
> 赞同：0
> 
> 时间：2013-04-10T18:27:44.797
> 
> 标签：wordpress

我正在尝试使用联系表格 7。当我将简码放入页面并尝试使用表格时，不会发生任何操作。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:54:23.783

停用其他插件...这个错误发生在我身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T13:15:27.307

下载 fiddler 看看是否有任何内容发布，如果没有，则检查浏览器控制台以查看是否有任何 js 错误，如果页面上有自定义 JS 几乎可以保证它正在中断并且没有运行 CF7脚本

# java - 尝试为每个值将 1 添加到整数数组中。JAVA

> ID：15933596
> 
> 赞同：-2
> 
> 时间：2013-04-10T18:27:45.830
> 
> 标签：java, arrays, int

```
(int i=0; i < n; i++){
for(int j=0; j < n; j++){
    Array[i][j]=Array[i][j] + 1;
    }
} 
```

出于某种原因，我收到了一个错误。Array 是一个用 0 填充的 int 数组。n 可以是任意大小。我不断收到的错误是 Array 行的主线程中的异常。我没有正确地将 1 添加到数组中吗？

编辑：错误在线程“main”java.lang.ArrayIndexOutofBoundsException中被称为异常：3 at（那一行是）

编辑：它被初始化为

```
 Array = new int[n][n];
    for(int i=0; i < n; i++){
        for(int j=0; j < n; j++){
            Array[i][j] = 0;
        }
    } 
```

但这似乎不是错误的一部分

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:31:19.910

> 编辑：错误在线程“main”java.lang.ArrayIndexOutofBoundsException中被称为异常：3

对。这意味着您的阵列不够大。不清楚第*一个*维度是只有 2 还是第二个维度，但其中一个是不正确的。你应该有类似的东西：

```
int[][] array = new int[n][n]; 
```

某处。如果你没有，你应该看看你*实际上*有什么。

一个更好的选择 - 将使用`for`循环中数组的长度作为界限：

```
for (int i = 0; i < array.length; i++) {
    for (int j = 0; j < array[i].length; j++) {
        array[i][j] = array[i][j] + 1;
    }
} 
```

甚至：

```
for (int i = 0; i < array.length; i++) {
    int[] row = array[i];
    for (int j = 0; j < row.length; j++) {
        row[j] = row[j] + 1;
    }
} 
```

或者：

```
for (int i = 0; i < array.length; i++) {
    int[] row = array[i];
    for (int j = 0; j < row.length; j++) {
        row[j]++;
    }
} 
```

编辑：您现在*声称*它确实是这样初始化的：

```
Array = new int[n][n]; 
```

如果是这种情况，那么`n`自初始化以来 的值肯定已经改变，所以它实际上是无关紧要的。如果 的值`n`没有改变，您的原始代码根本不会抛出该异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:32:04.050

使用适当的长度，`Array.length`将是 1d 的长度`Array`并且`Array[i].length`是 2d 的长度 -

```
for(int i=0; i < Array.length; i++){
    for(int j=0; j < Array[i].length; j++){
        Array[i][j]=Array[i][j] + 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:59:27.273

如果它真的是这样初始化的：

```
int[][] Array;
Array = new int[n][n];
for(int i=0; i < n; i++){
    for(int j=0; j < n; j++){
        Array[i][j] = 0;
    }
} 
```

*如果*两者之间都没有改变，`Array`也`n`没有改变，那么下面的代码*将*起作用：`Array[i]``i`

 *```
for(int i=0; i < n; i++){
    for(int j=0; j < n; j++){
        Array[i][j]=Array[i][j] + 1;
    }
} 
```

所以要么你的代码改变了提到的事情之一，要么你的问题是假的......

（顺便说一句：我强烈建议称它为`Array`不同，至少称它为`array`......）*

# performance - 更低的占用率 - 更好的性能

> ID：15933607
> 
> 赞同：1
> 
> 时间：2013-04-10T18:28:28.903
> 
> 标签：performance, cuda

以下一直困扰着我。

使用两个不同的设备运行相同的内核，一个具有计算能力 1.3，另一个具有计算能力 2.0，在 1.3 中每个块的线程数更多（高占用率），但在 2.0 中，我获得了更好的性能。2.0 的性能峰值似乎是每个块 16 个线程，占用率为 17% 任何小于或大于此点的任何东西都具有最差的性能。

因为这很可能是内核本身的性质造成的。

```
__global__ void
kernel_CalculateRFCH (int xstart, int ystart, int xsize,
          int ysize, int imxsize, int imysize, int *test, int *dev_binIm, int *per_block_results)
{
  int x2, y2, bin, bin2;
  __shared__ int s_pixels[blockDim.x*blockDim.y];  //this wouldn't compile in reailty

  int tx = threadIdx.x;
  int ty = threadIdx.y;
  int tidy = threadIdx.y + blockIdx.y * blockDim.y;
  int tidx = threadIdx.x + blockIdx.x * blockDim.x;

  if (xstart + xsize > imxsize)
    xsize = imxsize - xstart;
  if (ystart + ysize > imysize)
    ysize = imysize - ystart;

  s_pixels[tx * blockDim.y + ty] = 0;

  if (tidy >= ystart && tidy < ysize + ystart && tidx >= xstart && tidx < xsize + xstart)
{
      bin = dev_binIm[tidx + tidy * imxsize];

      if (bin >= 0)
    {
      x2 = tidx;
      y2 = tidy;

         while (y2 < ystart + ysize)
          {
          if (x2 >= xstart + xsize || x2 - tidx > 10)
             {
                  x2 = xstart;
                  y2++;
                  if (tidx - x2 > 10)
                   x2 = tidx - 10;
                  if (y2 - tidy > 10)
                   {
                      y2 = ystart + ysize;
                      break;
                   }
                   if (y2 >= ystart + ysize)
                      break;
              }

          bin2 = dev_binIm[x2 + y2 * imxsize];

           if (bin2 >= 0)
              {
               test[(tidx + tidy * imxsize) * 221 + s_pixels[tx * blockDim.y + ty]] = bin + bin2 * 80;
               s_pixels[tx * blockDim.y + ty]++;
              }
          x2++;
        }           
     }          

  } 

  for (int offset = (blockDim.x * blockDim.y) / 2; offset > 0; offset >>= 1)
    {
     if ((tx * blockDim.y + ty) < offset)
       {
         s_pixels[tx * blockDim.y + ty] += s_pixels[tx * blockDim.y + ty + offset];
       }
      __syncthreads ();
     }

   if (tx * blockDim.y + ty == 0)
     {
        per_block_results[blockIdx.x * gridDim.y + blockIdx.y] = s_pixels[0];

     }

} 
```

我使用二维线程。

ptxas 信息：为 'sm_10' 编译入口函数 '_Z20kernel_CalculateRFCHiiiiiiPiS_' ptxas 信息：使用 16 个寄存器，128 字节 smem，8 字节 cmem[1]。

每个设备的每种情况下都显示了 16 个寄存器。

关于为什么会发生这种情况的任何想法都会非常有启发性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:28:06.340

除了上面所做的一般性评论之外，您的内核是一个非常特殊的情况，因为*大多数线程根本不做任何工作*。为什么不直接添加`xstart`和`ystart`并选择一个较小的网格`tidx`？`tidy`您在较小块大小上的更好性能可能只是感兴趣区域如何分割成块的人工制品。

这也解释了为什么您会发现计算能力 1.x 设备与 CC 2.0+ 设备之间存在巨大差异。从 CC 2.0 开始，Nvidia GPU 在处理运行时在块之间差异很大的内核方面已经变得更好。
在计算能力 1.x 中，只有在所有当前运行的块都完成后才会安排新的块浪潮，而从 CC 2.0 开始，只要任何旧块完成，就会启动新块。

# ios - 为什么从另一个视图控制器传递的弱属性会丢失？

> ID：15933613
> 
> 赞同：1
> 
> 时间：2013-04-10T18:28:53.667
> 
> 标签：ios, memory-management, automatic-ref-counting

我将类别 ID 传递给下一个视图控制器。

```
NSNumber *childCategoryId = [[NSNumber alloc] initWithInt:category.id];

if ([destination respondsToSelector:@selector(setCategoryId:)]) {
    [destination setValue:childCategoryId forKey:@"categoryId"];
} 
```

在下一个视图控制器中，接受数据的属性被声明为**弱**

```
@property (weak, nonatomic) NSNumber *categoryId; 
```

在**viewDidLoad**下，我使用**id**从互联网获取数据。当 NSNumber 不太大（<15）时，它可以正常工作。因此，代码能够在许多类别上工作，除了那些**id** >=15的类别

可以通过将**弱引用更改为强引用**来解决该问题，这样 categoryId 就会一直保留到下一个控制器需要的时间。我相信这个问题是由弱属性的损失引起的，但我不明白它的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:30:31.470

`strong`用于拥有该对象。它保留对象。而不`weak`保留它，它是`release`d。

**弱**引用表示您不想控制对象的生命周期。您弱引用的对象仅存在，因为至少有一个其他对象持有对它的强引用。一旦不再是这种情况，对象就会被销毁，并且你的弱属性将自动设置为 nil。

**强**引用“拥有”您使用此属性/变量引用的对象。只要您（或任何其他对象）使用强引用指向它，编译器就会注意您分配给此属性的任何对象都不会被破坏。只有将属性设置为 nil 后，对象才会被销毁（除非一个或多个其他对象也持有对它的强引用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:33:36.120

我假设您正在使用 ARC。

当您创建 NSNumber 时，它仅在您创建它的方法范围内保留（由编译器生成的代码）。当您在弱属性中设置它时，它不会被您的视图控制器保留（由于弱属性）。在作用域结束时，对象被释放（同样，由编译器生成的代码）。它适用于某些值而不适用于其他值的事实是内部实现细节。你应该假设它永远不会起作用。您确实应该将您的属性设置为`strong`or `copy`。

# java - XHTML 到 java 转换的最佳方式

> ID：15933614
> 
> 赞同：1
> 
> 时间：2013-04-10T18:28:54.437
> 
> 标签：java, xhtml, xml-parsing, jaxb

我们有一个将 xhtml 文件转换为 java 对象的请求（我无法更改源以更改格式或类型）。这是关于地址的，如果同一个人在系统中有两个地址，则前三个标签可以为空。将其转换为 java 对象的最佳方法是什么？jaxb 还是其他？你能给我一个简单的说明你是怎么做到的吗？

例如：

```
<table>
<tr>
<td>john</td>
<td>doe</td>
<td>1/1/09</td>
<td>cincinnati, OH</td>

</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td>Atlanta, GA</td>
</tr>

<tr>
<td>john1</td>
<td>doe1</td>
<td>1/1/89</td>
<td>cincinnati, OH</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:45:44.667

这是一种使用[jSoup](http://jsoup.org/)的方法：

```
import java.io.File;
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class so15933614 {

    public static void main(String[] args) throws IOException {
        String url = "so15933614.html";
        print("Fetching %s...", url);
        Document doc = Jsoup.parse(new File(url), "UTF-8");
        Elements rows = doc.select("tr");
        for (Element row : rows) {
            print("---------");
            Elements data = row.getElementsByTag("td");
            print("First Name:%s", data.get(0).text());
            print("Last Name:%s", data.get(1).text());
            print("Date:%s", data.get(2).text());
            print("City:%s", data.get(3).text());
        }
    }

    private static void print(String msg, Object... args) {
        System.out.println(String.format(msg, args));
    }
} 
```

输出是：

```
Fetching so15933614.html...
---------
First Name:john
Last Name:doe
Date:1/1/09
City:cincinnati, OH
---------
First Name:
Last Name:
Date:
City:Atlanta, GA
---------
First Name:john1
Last Name:doe1
Date:1/1/89
City:cincinnati, OH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:45:59.400

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以使用 MOXy 的`@XmlPath`扩展来按位置映射事物：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Person {

    @XmlPath("td[1]/text()")
    private String firstName;

    @XmlPath("td[2]/text()")
    private String lastName;

    @XmlPath("td[3]/text()")
    private String date;

    @XmlPath("td[4]/text()")
    private String city;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# perl - Perl 双点范围运算符 .. vs 三点...

> ID：15933615
> 
> 赞同：6
> 
> 时间：2013-04-10T18:28:54.383
> 
> 标签：perl

我正在扫描一个 XML 文件并遍历文档中的每一行：

```
while ($line = <$fh>) {
    if ($line =~ /<title>/.../<\/title>/) {
        # something...
    }
} 
```

我不确定关于`..`and`...`操作符到底发生了什么。以前当我使用双点运算符时，`..`我会收到错误

> 在模式匹配中使用未初始化的值 $_ (m//)

但是，当我使用三点运算符更改模式`...`时，不再发生错误并且脚本按预期工作。

我一般理解运营商的差异，但不是在这种情况下。

任何帮助解释这一点将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T18:34:53.547

[`perlop`](http://perldoc.perl.org/perlop.html#Range-Operators)说这个

> 如果您不希望它在下一次评估之前测试正确的操作数，例如在 sed 中，只需使用三个点（“...”）而不是两个点。在所有其他方面，“...”的行为就像“..”一样。

`</title>`因此，如果您的代码与开始标记出现在同一行，则使用三个点您的代码将不会注意到结束。

但是，问题是您正在测试`<title>`in`$line`和`</title>`in `$_`。你的意思是

```
if ($line =~ /<title>/ .. $line =~ /<\/title>/) { ... } 
```

但*请不要那样做*！您可能认为它按原样工作，但您显然已经在运行错误的代码。正则表达式是处理 XML 的错误工具：请使用 [`XML::Twig`](https://metacpan.org/module/XML::Twig) or [`XML::LibXML`](https://metacpan.org/module/XML::LibXML) 代替。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T18:38:08.650

这一行：

```
if ($line =~ /<title>/.../<\/title>/) 
```

解析为

```
if ( ($line =~ /<title>/) ... /<\/title>/ ) 
```

这意味着范围运算符的右侧正在尝试匹配`$_`而不是`$line`.

# android - 嵌套权重 Android 布局

> ID：15933617
> 
> 赞同：1
> 
> 时间：2013-04-10T18:28:56.257
> 
> 标签：android, button, android-layout-weight

我想要实现的是拥有一个 TextView，它占据了大约 70% 的屏幕，其余的 30% 被平均分配在并排设置的 2 个按钮之间（水平）。我实现这一目标的唯一方法是使用下面的代码......但是 xml 编辑器抱怨嵌套的 wights......虽然它有效，但我理解这不是好的做法......我应该怎么做呢？

```
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView android:id="@+id/news"
      android:textSize="14sp"
      android:textStyle="bold"
      android:textColor="#0033CC"
      android:layout_height="0px"
      android:layout_width="fill_parent"
      android:layout_weight="70"
      android:gravity="top"
/>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:orientation="horizontal"
    android:layout_weight="30">
    <Button
        android:id="@+id/new_order_button"
        android:layout_width="0px"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/new_order" 
    />

    <Button
        android:id="@+id/previous_orders_button"
        android:layout_width="0px"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/previous_orders" 
    />
</LinearLayout > 
```

编辑：更新的代码...警告仍然存在

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:00:27.937

您收到来自 Lint 的警告，因为计算嵌套权重很昂贵，并且必须在计算下一层之前计算最嵌套的部分。这会延迟将布局绘制到屏幕上，并且不利于性能。

您可以通过更改布局设计来解决此问题。`Button`与其让底部的 s 任意占据屏幕的 30%，不如使用让它们占据`layout_height`它们需要的`wrap_content`位置，或者使用 将它们设置为静态高度`#dp`。然后`TextView`顶部的 将占据屏幕顶部的其余部分。这对 Android 来说更容易绘制，因为没有任何嵌套权重需要计算。您的 Lint 警告应该消失：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/news"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="top"
        android:textColor="#0033CC"
        android:textSize="14sp"
        android:textStyle="bold" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/new_order_button"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:text="@string/new_order" />

        <Button
            android:id="@+id/previous_orders_button"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:text="@string/previous_orders" />
    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:01:11.383

作为最佳实践，您不应该更改控件​​（在这种情况下为按钮）的大小（高度），无论是绝对的还是相对的 - android 都会为您完成。在您的情况下，我只需创建一个 FlowLayout 作为根容器，然后将带有两个按钮（每个按钮产生 50% 的空间）的 LinearLayout 放在底部。然后，您可以将 TextView 布局到 LinearLayout 的顶部，其中按钮占据剩余空间。但是，您仍然可以嵌套加权布局，但它对渲染性能并不理想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:43:49.593

实际上，我认为编辑在抱怨，因为嵌套权重效率不高。布局权重需要对一个小部件进行两次测量，如果您有嵌套权重，则会以指数方式增加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:09:24.943

另一种可能性是在内部使用`LinearLayout`带有 2的 a `TableRows`，然后将权重分配给`TableRows`类似的东西：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="70" >

        <TextView
            android:id="@+id/news"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="top"
            android:textColor="#0033CC"
            android:textSize="14sp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="30" >

        <Button
            android:id="@+id/new_order_button"
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button1" />

        <Button
            android:id="@+id/previous_orders_button"
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button2" />
    </TableRow>

</LinearLayout> 
```

# hsqldb - 在 hsqldb 中调用 CHECKPOINT sql 是否可以，而另一个 sql 可能正在进行中？

> ID：15933626
> 
> 赞同：0
> 
> 时间：2013-04-10T18:29:26.620
> 
> 标签：hsqldb

换句话说，我必须将 CHECKPOINT 与另一个查询同步还是可以简单地在专用线程中定期执行它？

我的数据库不写日志。如果数据在崩溃时丢失，我可以，但我确实想定期刷新它并确保在应用程序终止时刷新它。

**编辑**

以下项目描述了我的方案：

1.  使用嵌入式 hsqldb 引擎运行一系列简短的单元测试，将项目插入到专用数据库中。
2.  将 hsqldb 作为连接到单元测试期间创建的数据库之一的独立服务器运行。
3.  打开[SQL Workbench/J](http://www.sql-workbench.net/)尝试连接到正在运行的独立 hsqldb 服务器。

SQL Workbench/J 根本没有显示任何表。但是，如果我在插入所有记录后添加 CHECKPOINT，那么一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:04:17.413

HSQLDB 总是安全地执行检查点。它使用一个单独的线程等待所有连接都提交，然后锁定数据库并执行检查点。

CHECKPOINT 可用于减少崩溃后重新启动数据库所需的时间。这不适用于已禁用日志的数据库。

如果您不编写日志，则可能不需要检查点。在这种情况下使用检查点是为了回收已删除 lob 的空间（在 2.3.0 版本中）。它还写出所有数据。

如果要在测试结束时刷新数据库，则可以改为执行 SHUTDOWN。

# java - 如何抑制编译器警告？

> ID：15933631
> 
> 赞同：1
> 
> 时间：2013-04-10T18:29:54.530
> 
> 标签：java, warnings, suppress-warnings

如何抑制此警告：

> ```
> LinkedList is a raw type. References to generic type LinkedList<E> 
> should be parameterized 
> ```

这不起作用：

```
@SuppressWarnings("unchecked") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:35:24.757

@SuppressWarnings("rawtypes") 是用于抑制这种情况的注释。

如果您不使用遗留代码，尽管您最好参数化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:40:41.863

根据您使用的 java 版本，听起来您需要更改链表实例化。

> 原始类型。
> 
> 当源代码被编译用于在 Java 5.0 之前开发的 Java 5.0 并使用 Java 5.0 中的通用类时，“未经检查”的警告是不可避免的。例如，如果“遗留”代码使用诸如 List 之类的类型，它在 Java 5.0 之前曾经是常规（非泛型）类型，但在 Java 5.0 中是泛型的，那么 List 的所有这些使用都被认为是原始类型的使用Java 5.0。使用原始类型将导致“未经检查”的警告。如果要消除“未检查”警告，则必须重新设计“遗留”代码，并将 List 的所有原始使用替换为 List 的适当实例，例如 List 、 List 、 List 等。所有“未检查”警告都可以消除这边走。
> 
> 在为 Java 5.0 开发的源代码中，您可以通过从不使用原始类型来防止“未经检查”的警告。使用泛型类型时始终提供类型参数。没有强制使用原始类型的情况。如有疑问，当您觉得您不知道哪种类型参数合适时，请尝试使用无界通配符“？”。
> 
> 从本质上讲，如果您可以访问遗留代码并愿意对其进行重新设计，则可以消除由于使用原始类型而导致的“未经检查”的警告。

[http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ001](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ001)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:38:18.107

如果您使用的是 eclipse，请将鼠标悬停在文本上（可能是黄色下划线）并执行 ctrl+1 以查找可用于解决问题的选项。

但是您应该始终参数化您的列表。

如果您不想参数化，请使用

```
@SuppressWarnings("rawtypes") 
```

# c# - 将数组传递给接受参数 object[] 或 IEnumerable 的函数

> ID：15933632
> 
> 赞同：24
> 
> 时间：2013-04-10T18:29:56.237
> 
> 标签：c#, arrays, string, overloading, enumerable

我想将一组自定义对象传递给`String.Join`具有以下签名的函数：

*   `public static string Join(string separator, params Object[] values)`
*   `public static string Join(string separator, IEnumerable<T> values)`

如果我这样调用函数：

```
var arr = new MyClass[]{ new MyClass(), new MyClass() };
string text = string.Join("\n", arr); 
```

我得到一个编译器错误：

> 以下方法或属性之间的调用不明确：'string.Join(string, params object[])' 和 'string.Join(string, System.Collections.Generic.IEnumerable)'

我可以通过使用以下`IEnumerable<T>`函数来解决歧义：

```
var arr = new MyClass[]{ new MyClass(), new MyClass() };
string text = string.Join<MyClass>("\n", arr); 
```

但是我可以调用这个`params object[]`函数吗？

我正在使用 C# 4.0，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-10T18:33:13.263

如果将 an`object[]`作为第二个参数传递，编译器应该选择`object[]`重载，因为它完全匹配。如果您有一个不同类型的数组（`MyClass[]`在这种情况下），只需将数组转换为`object[]`：

```
string.Join("\n", (object[])arr); 
```

您实际上并没有在运行时更改任何对象的类型或执行任何转换，您只是在向编译器提供有关使用哪个重载的提示。

关于您对性能的评论，如果性能如此关键，请不要忘记对这两个选项进行基准测试。不要假设一个比另一个快。（并且始终分析您的整个应用程序——任何瓶颈都可能在其他地方。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:33:44.430

如果您将`arr`变量的类型更改为`object[]`您将调用另一个重载：

```
object[] arr = new MyClass[] { new MyClass(), new MyClass() };
string text = string.Join("\n", arr); 
```

您还可以将其显式转换为`object[]`： string.Join("\n", (object[])arr);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:45:01.467

对您的代码最简单的更改是：

```
 var arr = new MyClass[]{ new MyClass(), new MyClass() };
    string text = string.Join("\n", arr); 
```

至：

```
 var arr = new object[]{ new MyClass(), new MyClass() };
    string text = string.Join("\n", arr); 
```

如前所述，铸造也有效：

```
 var arr = new MyClass[]{ new MyClass(), new MyClass() };
    string text = string.Join("\n", (object[])arr); 
```

要了解有关此主题的更多信息，请研究[C# 重载解析](http://msdn.microsoft.com/en-us/library/aa691336%28v=vs.71%29.aspx)。

重载解决方案本身就是一个有趣的主题，但我还没有发现它是性能问题的瓶颈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:37:51.523

您可以像这样调用另一个重载（这就是[param](https://stackoverflow.com/questions/7580277/why-to-use-the-params-keyword)的用途） -

```
string text = string.Join("\n", new MyClass(), new MyClass()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-25T20:18:44.993

如果您正在使用`IEnumerable`，您可以使用该方法的`<object>`通用重载`ToArray()`：

```
var allFoos = foo.GetAllFoos().ToArray<object>(); 
string s = string.Join(", ", allFoos); 
```

对我来说看起来不那么臃肿，更具可读性。

# model - Ember.js：计算所有子模型的属性之和

> ID：15933633
> 
> 赞同：15
> 
> 时间：2013-04-10T18:29:58.260
> 
> 标签：model, ember.js

我的应用程序具有以下模型：

```
App.Store = DS.Store.extend({
    revision: 11,
    adapter: 'DS.FixtureAdapter'
});

App.List = DS.Model.extend({
    name: DS.attr('string'),
    users: DS.hasMany('App.User'),
    tweetsUnread: function(){
        /////////////////////////////////////////
        // Code to dynamically calculate the sum 
        // of tweetsUnread property of all
        // App.User that are related to this list
        /////////////////////////////////////////
    }
});

App.User = DS.Model.extend({
    screenName: DS.attr('string'),
    tweets: DS.hasMany('App.Tweet'),
    tweetsUnread: function(){
        // TODO: check if this is the correct way to do it
        return this.get('tweets').get('length');
    }.property('tweets.@each'),
    list: DS.belongsTo('App.List')
});

App.Tweet = DS.Model.extend({
    text: DS.attr('string'),
    user: DS.belongsTo('App.User')
}); 
```

如何计算所有 App.User.tweetsUnread 的总和并使其自动更新 App.List.tweetsUnread？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-12-29T05:00:51.980

另一种选择是使用`Ember.computed.sum`see [here](http://emberjs.com/api/#method_computed_sum)

```
App.List = DS.Model.extend({
  name: DS.attr('string'),
  users: DS.hasMany('App.User'),

  tweetsUnread: Ember.computed.mapBy('users', 'tweetsUnread'),
  totalTweetsUnread: Ember.computed.sum('tweetsUnread')   
}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-10T19:35:26.700

以下应该做到这一点。使用reduce可能有一个更简洁的解决方案，但我自己从未使用过它:-)

```
App.List = DS.Model.extend({
    name: DS.attr('string'),
    users: DS.hasMany('App.User'),
    tweetsUnread: function(){
        var users = this.get("users");
        var ret = 0;
        users.forEach(function(user){
            ret += users.get("tweetsUnread");
        });
        return ret;
    }.property("users.@each.tweetsUnread")
}); 
```

**更新：**这是一个使用 reduce 的更优雅的解决方案。我从未使用过它，也没有经过测试，但我很有信心这应该可以工作：

```
App.List = DS.Model.extend({
    name: DS.attr('string'),
    users: DS.hasMany('App.User'),
    tweetsUnread: function(){
        var users = this.get("users");
        return users.reduce(0, function(previousValue, user){
            return previousValue + users.get("tweetsUnread");
        });
    }.property("users.@each.tweetsUnread")
}); 
```

**在 Ember 1.1 中，reduce 的 API 发生了变化！**感谢@joelcox 的提示，参数initialValue 和callback 已经改变了它们的位置。所以这里是正确版本的代码：

```
App.List = DS.Model.extend({
    name: DS.attr('string'),
    users: DS.hasMany('App.User'),
    tweetsUnread: function(){
        var users = this.get("users");
        return users.reduce(function(previousValue, user){
            return previousValue + user.get("tweetsUnread");
        }, 0);
    }.property("users.@each.tweetsUnread")
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-17T09:49:04.903

使用 coffeescript 时，我喜欢使用单行语法，首先使用获取属性值数组，`.mapBy('propertyName')`然后使用简单的 coffeescript `reduce`：

```
@get('users').mapBy('tweetsUnread').reduce (a, b) -> a + b 
```

# if-statement - 批次比较报表细分

> ID：15933636
> 
> 赞同：0
> 
> 时间：2013-04-10T18:30:11.747
> 
> 标签：if-statement, batch-file, goto

我有一个选择菜单，由于某种原因正在崩溃。编码：

```
: uninstallerMenu
echo REMOVE ME!  total items %count%
set uninstallNr=
set /P uninstallNr=Please select a number:  
echo %uninstallNr%
if /I %uninstallNr% LEQ %count% goto uninstaller
if /I '%uninstallNr%'=='M' goto menu
:: Uninstaller Error Handler
: uninstallerError
cls
echo.
echo ==================== INVALID INPUT ====================
echo _______________________________________________________
echo.
echo    Please select a number or 'M' to go to Main Menu
echo _______________________________________________________
echo.
echo ============== PRESS ANY KEY TO CONTINUE ==============
pause>null
cls
if '%opt%'=='64' goto progList64
if '%opt%'=='32' goto progList32
goto menu 
```

问题在于小于或等于检查。如果我输入 %uninstallRn% LEQ %count% 它会检查它并将其发送给卸载程序，如果它是真的，按 M 键会做它应该做的事情，但是按 enter 键会破坏脚本。

现在如果我添加

```
if '%uninstallNr%'=='' goto uninstallerError 
```

前

```
if /I %uninstallNr% LEQ %count% goto uninstaller
if /I '%uninstallNr%'=='M' goto menu 
```

然后一切都进入uninstallerError部分？！？！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:49:06.820

几个问题。

可能

```
if not defined uninstallnr goto wherever 
```

比引用的版本好。YMMV。

其次，如果你使用，`IF /I`那么比较是逐个字符进行的，所以 '12' 小于 '2' 因为 '1' 小于 '2'

第三，批处理只是通过标签直接收费，因此，如果您的 IF 语句由于条件不正确而没有转到任何地方，那么批处理将简单地继续通过`:uninstallerError`标签 - 顺便说一下，它可能不包含空格， ，至少，如果您要将它用作`GOTO`（或`CALL`就此而言）的目的地

哦 - 双引号是定义字符串的方式。使用单引号或`[]`仅在变量不包含空格（和一些其他字符）时才有效

此外，它不是`null`，它是`nul`（您将创建一个名为 的文件`null`）

* * *

AIUI，你当前的代码是

```
SETLOCAL
SET count=3
set uninstallNr=
set /P uninstallNr=Please select a number:  
echo %uninstallNr%
if '%uninstallNr%'=='' goto uninstallerError
if /I %uninstallNr% LEQ %count% goto uninstaller
if /I '%uninstallNr%'=='M' goto menu
:: Uninstaller Error Handler
:uninstallerError
ECHO AT uninstallererror
GOTO :eof
:uninstaller
ECHO AT uninstaller
GOTO :eof
:menu
ECHO AT menu
GOTO :eof 
```

或类似的。

我已经设置了 COUNT 内联。

1,2 或 3 的条目很高兴地进入卸载程序。m 到 Menu，否则到 UNINSTALLERROR。

（考虑一下输入“0”……但这是一个附带问题……）

# jquery - Jquery从div内部选择div

> ID：15933639
> 
> 赞同：0
> 
> 时间：2013-04-10T18:30:25.340
> 
> 标签：jquery, html

所以我有一个主 div，里面有多个 div，我将其中一个 div 悬停在主 div 内，我如何获取那个悬停 div 的 id ？

代码在这里：

```
<div id="main">
    <div id="div1" class="inner"></div>
    <div id="div2" class="inner"></div>
    <div id="div3" class="inner"></div>
    <div id="div4" class="inner"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T18:31:36.940

试试这个[JSFIDDLE](http://jsfiddle.net/z2WJA/)

```
$("#main >div").hover(function(){
 alert(this.id);

}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T18:32:15.280

```
$(".inner").hover(function() {
    alert(this.id);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T18:35:08.427

```
$('#main').on('mouseover', '.inner', function() {
    alert($(this).attr('id'));
}); 
```

# jquery-mobile - 在 jquery mobile 中 changePage 后在 Safari 中显示 iOS 键盘

> ID：15933641
> 
> 赞同：0
> 
> 时间：2013-04-10T18:30:27.893
> 
> 标签：jquery-mobile, mobile-safari

我知道在 iOS safari 上没有 onclick 的情况下，用常规的 focus() 显示键盘几乎是不可能的，但我正在尝试做一些不同的事情。使用 jquery mobile 我在 DOM 中加载了两个不同的页面（data-role="page"）。这两个页面上都有文本输入。当用户点击第一页上的输入时，我想向上滑动第二页并专注于第二页上的输入并显示键盘。我可以通过在第一个输入上创建焦点事件侦听器并使用常规 $('#secondpage').show() 后跟 $('#secondinput').focus() 来完成此操作。但是，如果我使用 changePage() 而不是 show() 甚至在 .show() 上放置动画，则该字段将不会被聚焦并且键盘将不会显示。

这是我在第一页的输入：

```
<input type="text" name="input1" id="input1" data-theme="A"> 
```

整个第二页：

```
<div data-role="page" id="page2">
<div>
    <form>
        <input type="text" id="input2" name="input2">
    </form>
</div>
</div> 
```

这是我的 javascript 可以工作但没有提供我想要的转换，它包含在第一页的 pageinit 中。此外，为了让它工作，我必须在#page2 上放置一个显示：无：

```
$('#input1').on('tap', function() {
    $('#page2').show();
    $('#input2').focus();
}); 
```

以下代码不起作用：

```
$('#input1').on('tap', function() {
    $('#page2').show("slide", { direction: "up" });
    $('#input2').focus();
}); 
```

这也不起作用（这将是最可取的解决方案）：

```
$('#input1').on('tap', function() {
    $.mobile.changePage('#page2', { transition: 'slideup' });
    $('#input2').focus();
}); 
```

我尝试过的另一件事是在#input1 上放置一个 onclick 属性，但无论我做什么，任何转换似乎都会杀死焦点和键盘。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:55:32.133

试试下面的代码，你应该只在 page2 完成加载后才关注 input2。

```
$(document).bind('pageinit', function() {
    $('#input1').on('tap', function() {
        $.mobile.changePage('#page2', { transition: 'slideup' });

    }); 
    $("#page2").bind('pageshow', function() {
        $('#input2').focus();
    });
}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/SgFXx/1/)**

# ruby-on-rails - Nokogiri失去属性

> ID：15933650
> 
> 赞同：0
> 
> 时间：2013-04-10T18:30:55.583
> 
> 标签：ruby-on-rails, ruby, nokogiri

我只是尝试使用 nokogiri 解析代理网站。

**我的控制器动作**

```
des show
  @url                = 'http://www.femmeactuelle.fr/'
  @with_nokogiri      = Nokogiri::HTML(open(@url).read).to_html
  @without_nokogiri   = open(@url).read

  if params.has_key? :nokogiri
    render text: @with_nokogiri, layout: false
  else
    render text: @without_nokogiri, layout: false
  end
end 
```

如果我将此操作与**?nokogiri=foo**一起使用，则正文将丢失其 ID。知道什么原因吗？我只是想要与浏览器在使用 nokogiri 解析后看到的相同的 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:58:15.110

我无法复制 Nokogiri从有效 HTML 中`id`的标记中剥离参数的问题。`<body>`这是我的 Nokogiri/LibXML 和 Ruby 细节：

```
nokogiri: 1.5.9
ruby:
  version: 1.9.3
  platform: x86_64-darwin10.8.0
  description: ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin10.8.0]
  engine: ruby
libxml:
  binding: extension
  compiled: 2.7.7
  loaded: 2.7.7 
```

这是对 Nokogiri 的简单测试：

```
doc = Nokogiri::HTML('<html><body id="foo">bar</body></html>')

puts doc.to_html 
```

回报：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body id="foo">bar</body></html> 
```

当我解析“ [http://www.femmeactuelle.fr/](http://www.femmeactuelle.fr/) ”时，Nokogiri 的`errors`方法返回了许多错误，包括在`<head>`and`<body>`中。Nokogiri 会在文档损坏时尝试修复它，这可能会导致标签被移动，或者，我怀疑在这种情况下，参数会丢失。

[验证文档会](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.femmeactuelle.fr%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)返回各种错误，所以我认为问题出在 Nokogiri 之外。如果你想在将它传递给 Nokogiri 之前尝试修复它，你可以通过 HTMLTidy 发送文件，然后看看 Nokogiri 是否可以更好地理解它。否则，花一些时间挖掘 HTML，找出问题所在，然后编写一些字符串操作代码来修补它。

您无法将浏览器呈现的页面源与解析器（如 Nokogiri）输出的源进行比较。它们是非常不同的代码，具有非常不同的目标。浏览器想要让页面呈现一些东西，并且有各种后备来处理损坏的 HTML。解析器不会，因为它的工作是将 HTML 或 XML 准确地翻译成它的真实结构，以便我们可以挖掘它。

# c# - 检测互联网是否正常工作的最佳方法

> ID：15933659
> 
> 赞同：1
> 
> 时间：2013-04-10T18:31:21.143
> 
> 标签：c#

我想知道识别互联网是否正常工作的最佳方法。我在考虑 Ping，但可能目标已关闭，这将使我的应用程序认为互联网已关闭。

因此，如果有人有任何想法，那将是很棒的分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:38:03.450

与其选择要 ping 的主机或 DNS，不如尝试 ping 您打算与之交互的 Web 资源。或者，实际上尝试与该端点交互并为无法访问该主机的情况做好充分准备，而不是 ping。

IE 一个 twitter 客户端可能会尝试连接到 twitter.com，如果无法连接（无论他们没有互联网连接还是 twitter.com 被阻止），程序可能会报告“Twitter 当前无法访问”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:34:54.450

Ping 一个正常工作的 DNS 就像`4.2.2.4`, `4.2.2.3`,`4.2.2.2, 8.8.8.8, 8.8.4.4`

```
Ping myPing = new Ping();
String host = "4.2.2.4;
byte[] buffer = new byte[32];
int timeout = 1000;
PingOptions pingOptions = new PingOptions();
PingReply reply = myPing.Send(host, timeout, buffer, pingOptions);
if (reply.Status == IPStatus.Success) {
  // presumably online
} 
```

# spring - Spring Framework：按名称搜索属性

> ID：15933661
> 
> 赞同：2
> 
> 时间：2013-04-10T18:31:23.343
> 
> 标签：spring

我有一个 .properties 文件。我可以根据需要将属性注入 bean。现在，我希望能够按名称搜索属性。

例子：

```
conf.properties:
a.persons=person1,person2,person3
a.gender=male 
```

我可以通过使用注释来注入这些属性。例如，

```
private @Value("${a.persons}") String[] persons 
```

除此之外，我想搜索给定名称的属性的值，但我不知道如何去做。一个例子是这样的：

```
properties.get("a.gender") 
```

这应该返回字符串“男性”。

这真的可能吗？

**更新**：我使用`PropertyPlaceholderConfigurer`如下所示：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:META-INF/config/server.properties</value>
                <value>classpath:META-INF/config/ke/dev.properties</value>
            </list>
        </property>
    </bean> 
```

我应该如何更改它以便可以将其注入到我的 bean 中？我将如何访问这些属性？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:25:24.080

答案取决于您如何配置这些属性的注入。

*   如果您使用[`PropertyPlaceholderConfigurer`](http://static.springsource.org/spring/docs/3.2.0.RELEASE/javadoc-api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)，您可以将您的声明`Properties`为 bean 并将其注入`PropertyPlaceholderConfigurer`as `properties`（而不是`locations`）。这样你也可以`Properties`直接将你的注入到你的 bean 中。

*   如果您使用[`PropertySourcesPlaceholderConfigurer`](http://static.springsource.org/spring/docs/3.2.0.RELEASE/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html)，您可以注入`Environment`到您的 bean 中，并且可以通过它获得属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:01:50.830

根据@axtavt 的建议，我创建了如下所示的 bean，以帮助我搜索给定该属性名称的属性。我在我的解决方案中利用了@Environment 和@PropertySource。我使用的是 Spring 3.1，因此此解决方案可能不适用于 Spring 的早期版本。

```
@Configuration
@PropertySource( "/META-INF/config/ke/dev.properties" )
@Service( value = "keConfigurer" )
public class ServiceConfiguration {

    @Autowired
    private Environment env;

    public Environment getEnv() {
        return env;
    }

    public void setEnv(Environment env) {
        this.env = env;
    }

} 
```

我将这个 bean 注入到我希望在其中使用它的任何其他类中。例如：

```
public class TestClass {

    @Autowired
    private ServiceConfiguration cfg;

    String testProp = cfg.getEnv().getProperty("prop.name");
} 
```

我希望它可以帮助别人。

# c# - 如何使效果仅在移动鼠标时显示？

> ID：15933663
> 
> 赞同：5
> 
> 时间：2013-04-10T18:31:36.677
> 
> 标签：c#

我已经从这里下载了放大镜效果的源代码文件：

[http://www.codeproject.com/Articles/18235/Simple-Magnifier](http://www.codeproject.com/Articles/18235/Simple-Magnifier)

这是主要的表单代码：

```
///----------------------------------------------------------------------------
/// Class     : MagnifierMainForm
/// Purpose   : Provide simple magnifier. 
/// Written by: Ogun TIGLI
/// History   : 31 May 2006/Wed starting date.
///             22 Dec 2006/Fri minor code fixes and hotsot support addition.
///             01 Apr 2007/Sun XML serialization support added.
///             
/// Notes: 
/// This software is provided 'as-is', without any express or implied 
/// warranty. In no event will the author be held liable for any damages 
/// arising from the use of this software.
/// 
/// Permission is granted to anyone to use this software for any purpose, 
/// including commercial applications, and to alter it and redistribute it 
/// freely, subject to the following restrictions:
///     1\. The origin of this software must not be misrepresented; 
///        you must not claim that you wrote the original software. 
///        If you use this software in a product, an acknowledgment 
///        in the product documentation would be appreciated. 
///     2\. Altered source versions must be plainly marked as such, and 
///        must not be misrepresented as being the original software.
///     3\. This notice cannot be removed, changed or altered from any source 
///        code distribution.
/// 
///        (c) 2006-2007 Ogun TIGLI. All rights reserved. 
///----------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace Magnifier20070401
{
    public partial class MagnifierMainForm : Form
    {
        public MagnifierMainForm()
        {
            InitializeComponent();

            GetConfiguration();

            //--- My Init ---
            FormBorderStyle = FormBorderStyle.None;
            TopMost = true;
            StartPosition = FormStartPosition.CenterScreen;

            mImageMagnifierMainControlPanel = Properties.Resources.magControlPanel;

            if (mImageMagnifierMainControlPanel == null)
                throw new Exception("Resource cannot be found!");

            Width = mImageMagnifierMainControlPanel.Width;
            Height = mImageMagnifierMainControlPanel.Height;

            HotSpot hsConfiguration = new HotSpot(new Rectangle(50, 15, 35, 30));
            hsConfiguration.OnMouseDown += new HotSpot.MouseEventDelegate(hsConfiguration_OnMouseDown);
            hsConfiguration.OnMouseUp += new HotSpot.MouseEventDelegate(hsConfiguration_OnMouseUp);
            hsConfiguration.OnMouseMove += new HotSpot.MouseEventDelegate(hsConfiguration_OnMouseMove);

            HotSpot hsMagnfier = new HotSpot(new Rectangle(10, 15, 30, 30));
            hsMagnfier.OnMouseMove += new HotSpot.MouseEventDelegate(hsMagnfier_OnMouseMove);
            hsMagnfier.OnMouseDown += new HotSpot.MouseEventDelegate(hsMagnfier_OnMouseDown);
            hsMagnfier.OnMouseUp += new HotSpot.MouseEventDelegate(hsMagnfier_OnMouseUp);

            HotSpot hsExit = new HotSpot(new Rectangle(95, 20, 15, 15));
            hsExit.OnMouseUp += new HotSpot.MouseEventDelegate(hsExit_OnMouseUp);

            mHotSpots.Add(hsConfiguration);
            mHotSpots.Add(hsMagnfier);
            mHotSpots.Add(hsExit);

            ShowInTaskbar = false;
        }

        protected override void OnShown(EventArgs e)
        {
            base.OnShown(e);

            if (mConfiguration.LocationX != -1 && mConfiguration.LocationY != -1)
            {
                Location = new Point(mConfiguration.LocationX, mConfiguration.LocationY);
            }            
        }

        private string mConfigFileName = "configData.xml";

        private void GetConfiguration() 
        {
            try
            {                
                mConfiguration = (Configuration)XmlUtility.Deserialize(mConfiguration.GetType(), mConfigFileName);                
            }
            catch 
            {
                mConfiguration = new Configuration();
            }
        }

        private void SaveConfiguration()
        {
            try
            {
                XmlUtility.Serialize(mConfiguration, mConfigFileName);
            }
            catch (Exception e)
            {
                Console.WriteLine("Serialization problem: " + e.Message);
            }
        }       

        private void hsConfiguration_OnMouseMove(Object sender)
        {

        }

        private void hsConfiguration_OnMouseUp(Object sender)
        {
            ConfigurationForm configForm = new ConfigurationForm(mConfiguration);
            configForm.ShowDialog(this);
        }

        private void hsConfiguration_OnMouseDown(Object sender)
        {

        }

        private void hsMagnfier_OnMouseUp(object sender)
        {

        }

        private void hsMagnfier_OnMouseDown(object sender)
        {
            int x = mLastCursorPosition.X;
            int y = mLastCursorPosition.Y;
            MagnifierForm magnifier = new MagnifierForm(mConfiguration, mLastCursorPosition);
            magnifier.Show();
        }

        private void hsMagnfier_OnMouseMove(object sender)
        {

        }        

        private void hsExit_OnMouseUp(Object sender)
        {
            SaveConfiguration();
            Application.Exit();
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            if (mImageMagnifierMainControlPanel != null)
            {
                g.DrawImage(mImageMagnifierMainControlPanel, 0, 0, Width, Height);
            }
        }

        protected override void OnMouseDown(MouseEventArgs e)
        {
            int x = e.X;
            int y = e.Y;

            mPointMouseDown = new Point(e.X, e.Y);
            mLastCursorPosition = Cursor.Position;

            foreach (HotSpot hotSpot in mHotSpots)
            {
                // If mouse event handled by this hot-stop then return!
                if (hotSpot.ProcessMouseDown(e)) return;                
            }            
        }

        protected override void OnMouseUp(MouseEventArgs e)
        {
            foreach (HotSpot hotSpot in mHotSpots)
            {
                // If mouse event handled by this hot-stop then return!
                if (hotSpot.ProcessMouseUp(e)) return;
            } 
        }

        protected override void OnMouseMove(MouseEventArgs e)
        {                        
            foreach (HotSpot hotSpot in mHotSpots)
            {
                // If mouse event handled by this hot-stop then return!
                if (hotSpot.ProcessMouseMove(e))
                {
                    Cursor = Cursors.Hand;
                    return;
                }
            }
            Cursor = Cursors.SizeAll;

            if (e.Button == MouseButtons.Left)
            {
                int dx = e.X - mPointMouseDown.X;
                int dy = e.Y - mPointMouseDown.Y;

                Left += dx;
                Top += dy;

                mConfiguration.LocationX = Left;
                mConfiguration.LocationY = Top;
            }
        }

        private Image mImageMagnifierMainControlPanel = null;
        private List<HotSpot> mHotSpots = new List<HotSpot>();
        private Point mPointMouseDown;
        private Point mLastCursorPosition;
        private Configuration mConfiguration = new Configuration();
    }
} 
```

现在它将适用于两种情况：

1.  鼠标应位于放大镜图标上的表格区域。
2.  鼠标左键应按住不放，然后拖动鼠标将移动放大镜。

我想将其更改为：

1.  单击一个按钮。
2.  单击按钮后，您可以将放大镜效果移动到任何地方，而无需一直按下鼠标左键。

我尝试了很多不同的东西，但不知道该怎么做。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:21:38.423

好的，所以这是一个完整的 hack，可能应该做得更干净一些，但这应该可以得到你想要的：

在 MagnifierMainForm.cs 中将`hsMagnfier_OnMouseDown`代码移动到`hsMagnfier_OnMouseUp`函数中。

在 MagnifierForm.cs 中完全删除 mTimer。在您看到的任何地方`mTimer.Enabled = true`（除了在构造函数中`MagnifierForm`），添加该行`HandleTimer(null, new EventArgs());`

我看到`OnMouseDown`了`OnMouseMove`

在 OnMouseMove 中，取消选中`e.Button == MouseButtons.Left`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-24T23:44:31.187

我是多年前在 codeproject ( [https://www.codeproject.com/Articles/18235/Simple-Magnifier](https://www.codeproject.com/Articles/18235/Simple-Magnifier) ) 中发布的代码的作者，现在在 GitHub 上公开发布。

请随时贡献和/或请求功能。

奥贡 (omt66)

# cakephp-2.0 - Cakephp 为什么更新不起作用？

> ID：15933667
> 
> 赞同：0
> 
> 时间：2013-04-10T18:32:02.410
> 
> 标签：cakephp-2.0

我的控制器代码是

```
if(!empty($this->request->data['Color']['color_name']))
          {
              $color_name = $this->request->data['Color']['color_name'];
              $id = $this->request->data['Color']['id'];
              $this->Color->query("UPDATE colors set color_name='$color_name' WHERE id='$id'");
              $this->Session->setFlash('Color\'s Updated Successfully.', 'default', array('class' => 'oMsg1 oMsgError1'));
              $this->redirect('add_color');
          } 
```

它完美地工作并更新了记录，但是当我输入“学生”之类的值时，它不能插入学生的。错误消息如下：

“错误：SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取在 's' WHERE id='4' 附近使用的正确语法'在第 1 行"

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:36:11.720

虽然我强烈建议使用[cakephp 的保存功能](http://book.cakephp.org/2.0/en/models/saving-your-data.html)进行查询，但在回答您的问题时，您需要转义“学生”中的 '。例如

```
UPDATE colors set color_name='student''s' WHERE id='$id' 
```

# asp.net - Web 窗体模型绑定复选框列表

> ID：15933672
> 
> 赞同：2
> 
> 时间：2013-04-10T18:32:29.870
> 
> 标签：asp.net, webforms, model-binding

我对.net 开发比较陌生，所以我不确定我是否正确地处理了这个问题。

基本上，我有一个名为 Games 的模型。一个游戏可以属于多个平台，例如 Windows。简单的多对多关系。我在我的代码优先模型中定义它如下：

```
public virtual ICollection<Platform> Platforms { get; set; } 
```

向站点添加新游戏时，用户必须从所有可用平台的复选框列表中进行选择。用 Platforms 表中的所有条目填充列表没有任何问题。这都包含在 FormView 控件中，InsertMethod 为 InsertItem。

但是，我不确定从那里去哪里。如何在 InsertItem 的上下文中检索复选框的回发值？我如何将复选框中的选中值表示为平台模型的实例，以及验证是否至少选中了一个平台。

谢谢！

# c - 多线程程序C中的分段错误

> ID：15933675
> 
> 赞同：-2
> 
> 时间：2013-04-10T18:32:46.977
> 
> 标签：c, linux, multithreading, segmentation-fault, pthreads

我已经将以下程序作为我的学术项目的一部分。我已经给出了整个程序，因为我无法确定实际问题。

```
#include<stdio.h>
#include<math.h>
#include<pthread.h>
//Structure for getting dam details
struct dam
{
    float max_height;
    float min_height;
    float sto_capacity;
    float pro_capacity;
    float stn_const;
    float crnt_lvl;
    float delay;
    float crnt_lvl_min;
    float crnt_lvl_max;
    float unit_vol;
    float water_req;
    float work_hr;
    int work_hr_int;
};
//global variables
int n, i, extra_w_hr_int, extra_w_hr_ref, j, k, flag, l, m, swap, pos=11, h, main_flag=1, days_count=0, temp_extra_w_hr_ref;
int jj, k1, flag1, l1, m1, swap1, g=0;
float extra_w_hr, extra_height, diff_level, extra_water;
int rank[24];
int rank1[24];
float rate[24];
float water_pu[24];
float sum_rate1[24];
float avg_rate1[24];
float std_dev_rate1[24];
float temp_rate1[24];
float sum_rate[24];
float avg_rate[24];
float std_dev_rate[24];
float temp_rate[24];
struct dam dam_obj[10];
pthread_t inner_thread[10];
//Thread for increasing water in lower dam after delay
void *inner_function(void *no)
{

    int *num = no;
    if(*num != (n-1))
    {

        sleep(dam_obj[*num-1].delay);

    }
    else if(*num == (n-1))
    {

        sleep(dam_obj[*num].delay);

    }
    dam_obj[*num+1].unit_vol = dam_obj[*num+1].sto_capacity/(dam_obj[*num+1].max_height - dam_obj[*num+1].min_height);
    extra_height = extra_water/dam_obj[*num+1].unit_vol;
    dam_obj[*num+1].crnt_lvl+=extra_height;
    pthread_exit(NULL);

}
//Thread for forcasting 7 day details
void *days_function()
{

    while(days_count<7)
    {

        h=n-2;

        while(h>=(pos-1))
        {

            printf("Day-%d\tWorking Hours of dam %d:\t18hrs to 22hrs\n", days_count+1, h);
            dam_obj[h].water_req = (dam_obj[h].pro_capacity*dam_obj[h].work_hr)/(1000*dam_obj[h].stn_const);
            if((h-1)>-1)
            {

                dam_obj[h-1].work_hr = dam_obj[h].water_req*1000*dam_obj[h].stn_const/dam_obj[h-1].pro_capacity;
                dam_obj[h-1].work_hr_int = dam_obj[h-1].work_hr*10;
                temp_extra_w_hr_ref = dam_obj[h-1].work_hr_int%10;
                dam_obj[h-1].work_hr_int/=10;
                if(temp_extra_w_hr_ref>2)
                {

                    dam_obj[h-1].work_hr_int++;

                }

                dam_obj[h-1].work_hr_int-=4;

                //calculate the average and standard deviation of the rates
                jj=0;
                k1=1;
                flag1=1;
                while(flag1=1)
                {

                    if(jj==0 && k1==0)
                    {

                        flag1=0;
                        break;

                    }

                    if(jj>=18 && jj<=22 && (jj+dam_obj[h-1].work_hr_int)>=18 && (jj+dam_obj[h-1].work_hr_int)<=22)
                    {

                        rank1[jj]=25;
                        jj++;
                        sum_rate1[jj]=0;
                        avg_rate1[jj]=0;
                        std_dev_rate1[jj]=0;
                        continue;

                    }

                    rank1[jj]=jj;
                    k1=0;
                    sum_rate1[jj] = 0;
                    for(l1=0;l1<dam_obj[h-1].work_hr_int;l1++)
                    {

                        m1 = jj+l1;
                        if(m1>23)
                        {

                            m1-=24;

                        }
                        sum_rate1[jj]+=rate[m1];

                    }

                    avg_rate1[jj]=sum_rate1[jj]/extra_w_hr_int;

                    for(l1=0;l1<dam_obj[h-1].work_hr_int;l1++)
                    {

                        m1 = jj+l1;
                        if(m1>23)
                        {

                            m1-=24;

                        }

                        temp_rate1[m1]=rate[m1];
                        temp_rate1[m1]=pow((temp_rate1[m1]-avg_rate1[m1]),2);
                        std_dev_rate1[jj]+=temp_rate1[m1];

                    }

                    jj++;

                    if(jj>23)
                    {

                        jj-=24;

                    }

                }

                //Sorting the values
                for(jj=0;jj<(n-1);jj++)
                {

                    for(l1=0;l1<n-jj-1;l1++)
                    {

                        if((avg_rate1[l1]>avg_rate1[l1+1]) || ((avg_rate1[l1]==avg_rate1[l1+1]) && (std_dev_rate1[l1]>std_dev_rate1[l1+1])))
                        {

                            swap1=rank1[l1];
                            rank1[l1]=rank[l1+1];
                            rank[l1+1]=swap1;

                        }

                    }

                }

                printf("Day-%d\tWorking Hours of dam %d:\t18hrs to 22hrs\tand\t%dhrs to %dhrs\n", days_count+1, h-1, rank1[0], rank1[0]+dam_obj[h-1].work_hr_int);

            }

            h--;

        }

        while(g<(pos-1))
        {

            printf("Day-%d\tWorking Hours of dam 1:\t18hrs to 22hrs\n", days_count+1);
            dam_obj[g].water_req = dam_obj[g].pro_capacity*dam_obj[g].work_hr/(1000*dam_obj[g].stn_const);
            dam_obj[g+1].work_hr = dam_obj[g].water_req*1000*dam_obj[g+1].stn_const/dam_obj[g+1].pro_capacity;
            dam_obj[g+1].work_hr_int = dam_obj[g+1].work_hr*10;
            temp_extra_w_hr_ref = dam_obj[g+1].work_hr_int%10;
            dam_obj[g+1].work_hr_int/=10;
            if(temp_extra_w_hr_ref>2)
            {

                dam_obj[g+1].work_hr_int++;

            }
            dam_obj[g+1].work_hr_int-=4;

            //calculate the average and standard deviation of the rates
            jj=0;
            k1=1;
            flag1=1;
            while(flag1=1)
            {

                if(jj==0 && k1==0)
                {

                    flag1=0;
                    break;

                }

                if(jj>=18 && jj<=22 && (jj+dam_obj[g+1].work_hr_int)>=18 && (jj+dam_obj[g+1].work_hr_int)<=22)
                {

                    rank1[jj]=25;
                    jj++;
                    sum_rate1[jj]=0;
                    avg_rate1[jj]=0;
                    std_dev_rate1[jj]=0;
                    continue;

                }

                rank1[jj]=jj;
                k1=0;
                sum_rate1[jj] = 0;
                for(l1=0;l1<dam_obj[g+1].work_hr_int;l1++)
                {

                    m1 = jj+l1;
                    if(m1>23)
                    {

                        m1-=24;

                    }
                    sum_rate1[jj]+=rate[m1];

                }

                avg_rate1[jj]=sum_rate1[jj]/extra_w_hr_int;

                for(l1=0;l1<dam_obj[g+1].work_hr_int;l1++)
                {

                    m1 = jj+l1;
                    if(m1>23)
                    {

                        m1-=24;

                    }

                    temp_rate1[m1]=rate[m1];
                    temp_rate1[m1]=pow((temp_rate1[m1]-avg_rate1[m1]),2);
                    std_dev_rate1[jj]+=temp_rate1[m1];

                }

                jj++;

                if(jj>23)
                {

                    jj-=24;

                }

            }

            //Sorting the values
            for(jj=0;jj<(n-1);jj++)
            {

                for(l1=0;l1<n-jj-1;l1++)
                {

                    if((avg_rate1[l1]>avg_rate1[l1+1]) || ((avg_rate1[l1]==avg_rate1[l1+1]) && (std_dev_rate1[l1]>std_dev_rate1[l1+1])))
                    {

                        swap1=rank1[l1];
                        rank1[l1]=rank[l1+1];
                        rank[l1+1]=swap1;

                    }

                }

            }

            printf("Day-%d\tWorking Hours of dam %d:\t18hrs to 22hrs\tand\t%dhrs to %dhrs\n", days_count+1, g+2, rank1[0], rank1[0]+dam_obj[g+1].work_hr_int);
            g++;

        }

        dam_obj[n-1].water_req = dam_obj[g].water_req - dam_obj[g-1].water_req;
        dam_obj[n-1].work_hr = dam_obj[n-1].water_req*1000*dam_obj[n-1].stn_const/dam_obj[n-1].pro_capacity;
        dam_obj[n-1].work_hr_int = dam_obj[n-1].work_hr*10;
        temp_extra_w_hr_ref = dam_obj[n-1].work_hr_int%10;
        dam_obj[n-1].work_hr_int/=10;
        if(temp_extra_w_hr_ref>2)
        {

            dam_obj[n-1].work_hr_int++;

        }
        dam_obj[n-1].work_hr_int-=4;

        //calculate the average and standard deviation of the rates
        jj=0;
        k1=1;
        flag1=1;
        while(flag1=1)
        {

            if(jj==0 && k1==0)
            {

                flag1=0;
                break;

            }

            if(jj>=18 && jj<=22 && (jj+dam_obj[n-1].work_hr_int)>=18 && (jj+dam_obj[n-1].work_hr_int)<=22)
            {

                rank1[jj]=25;
                jj++;
                sum_rate1[jj]=0;
                avg_rate1[jj]=0;
                std_dev_rate1[jj]=0;
                continue;

            }

            rank1[jj]=jj;
            k1=0;
            sum_rate1[jj] = 0;
            for(l1=0;l1<dam_obj[n-1].work_hr_int;l1++)
            {

                m1 = jj+l1;
                if(m1>23)
                {

                    m1-=24;

                }
                sum_rate1[jj]+=rate[m1];

            }

            avg_rate1[jj]=sum_rate1[jj]/extra_w_hr_int;

            for(l1=0;l1<dam_obj[h-1].work_hr_int;l1++)
            {

                m1 = jj+l1;
                if(m1>23)
                {

                    m1-=24;

                }

                temp_rate1[m1]=rate[m1];
                temp_rate1[m1]=pow((temp_rate1[m1]-avg_rate1[m1]),2);
                std_dev_rate1[jj]+=temp_rate1[m1];

            }

            jj++;

            if(jj>23)
            {

                jj-=24;

            }

        }

        //Sorting the values
        for(jj=0;jj<(n-1);jj++)
        {

            for(l1=0;l1<n-jj-1;l1++)
            {

                if((avg_rate1[l1]>avg_rate1[l1+1]) || ((avg_rate1[l1]==avg_rate1[l1+1]) && (std_dev_rate1[l1]>std_dev_rate1[l1+1])))
                {

                    swap1=rank1[l1];
                    rank1[l1]=rank[l1+1];
                    rank[l1+1]=swap1;

                }

            }

        }

        printf("Day-%d\tWorking Hours of dam %d:\t18hrs to 22hrs\tand\t%dhrs to %dhrs\n", days_count+1, n-1, rank1[0], rank1[0]+dam_obj[n-1].work_hr_int);

    }

    pthread_exit(NULL);

}
//Thread function for working of dams
void *dam_function()
{

    diff_level = dam_obj[i].crnt_lvl - dam_obj[i].crnt_lvl_max;
    dam_obj[i].unit_vol = dam_obj[i].sto_capacity/(dam_obj[i].max_height - dam_obj[i].min_height);
    extra_water = diff_level * dam_obj[i].unit_vol;
    water_pu[i] = dam_obj[i].pro_capacity/(dam_obj[i].stn_const * 1000);
    extra_w_hr = extra_water/water_pu[i];
    extra_w_hr_int = extra_w_hr*10;
    extra_w_hr_ref = extra_w_hr_int%10;
    extra_w_hr_int/=10;
    if(extra_w_hr_ref>2)
    {

        extra_w_hr_int++;

    }

    //calculate the average and standard deviation of the rates
    j=0;
    k=1;
    flag=1;
    while(flag=1)
    {

        if(j==0 && k==0)
        {

            flag=0;
            break;

        }

        if(j>=18 && j<=22 && (j+extra_w_hr_int)>=18 && (j+extra_w_hr_int)<=22)
        {

            rank[j]=25;
            j++;
            sum_rate[j]=0;
            avg_rate[j]=0;
            std_dev_rate[j]=0;
            continue;

        }

        rank[j]=j;
        k=0;
        sum_rate[j] = 0;

        for(l=0;l<extra_w_hr_int;l++)
        {

            m = j+l;
            if(m>23)
            {

                m-=24;

            }
            sum_rate[j]+=rate[m];

        }

        avg_rate[j]=sum_rate[j]/extra_w_hr_int;
        std_dev_rate[j]=0;

        for(l=0;l<extra_w_hr_int;l++)
        {

            m = j+l;
            if(m>23)
            {

                m-=24;

            }
            temp_rate[m]=rate[m];
            temp_rate[m]=pow((temp_rate[m]-avg_rate[m]),2);
            std_dev_rate[j]+=temp_rate[m];

        }

        j++;

        if(j>23)
        {

            j-=24;

        }

    }

    //Sorting the values
    for(j=0;j<(n-1);j++)
    {

        for(l=0;l<n-j-1;l++)
        {

            if((avg_rate[l]>avg_rate[l+1]) || ((avg_rate[l]==avg_rate[l+1]) && (std_dev_rate[l]>std_dev_rate[l+1])))
            {

                swap=rank[l];
                rank[l]=rank[l+1];
                rank[l+1]=swap;

            }

        }

    }

    printf("Hours of extra running: %d\nExtra Working Hours for dam-%d: %d Hours - %d Hours\n", extra_w_hr_int, i, rank[0], rank[0]+extra_w_hr_int);

    if(i+1<n)
    {

        pthread_create (&inner_thread[i], NULL, (void *) &inner_function, &i);
        if(i == pos)
        {

            pthread_create (&inner_thread[pos], NULL, (void *) &inner_function, &pos);

        }

    }

    pthread_exit(NULL);

}

int main()
{

    pthread_t thread[10],days_thread;
    FILE *file = fopen ( "values.txt", "r" );
    dam_obj[n-1].work_hr = 4;
    dam_obj[0].work_hr = 24;
    //printf("Enter the number of dams:\t\t");
    fscanf(file, "%d\n",&n);
    //printf("\n\nThe branched dam should be given as the \'n\'th dam in the set\n\n\n");
    for(i=0;i<n;i++)
    {

        //printf("Enter the maximum height of dam-%d:\t",i+1);
        fscanf(file, "%f\n",&dam_obj[i].max_height);    
        //printf("Enter the minimum height of dam-%d:\t",i+1);
        fscanf(file, "%f\n",&dam_obj[i].min_height);    
        //printf("Enter the storage capacity of dam-%d:\t",i+1);
        fscanf(file, "%f\n",&dam_obj[i].sto_capacity);  
        //printf("Enter the production capacity of dam-%d:\t",i+1);
        fscanf(file, "%f\n",&dam_obj[i].pro_capacity);  
        //printf("Enter the station constant of dam-%d:\t",i+1);
        fscanf(file, "%f\n",&dam_obj[i].stn_const); 
        //printf("Enter the current level of dam-%d:\t",i+1);
        fscanf(file, "%f\n",&dam_obj[i].crnt_lvl);  
        //printf("Enter the time delay of dam-%d:\t\t",i+1);
        fscanf(file, "%f\n",&dam_obj[i].delay);

    }

    //printf("Enter the rates for the following hours:\n");
    for(i=0;i<24;i++)
    {

        //printf("%d-%d:\t\t\t",i,i+1);
        fscanf(file, "%f\n",&rate[i]);

    }

    if(n>2)
    {

        //printf("Enter the position at which the stage occurs:\t");
        fscanf(file, "%d\n",&pos);

    }

    for(i=0;(i<n && days_count<7);i++)
    {

        dam_obj[i].crnt_lvl_min=dam_obj[i].max_height * 0.6;
        dam_obj[i].crnt_lvl_max=dam_obj[i].max_height * 0.8;

        //If the current level is greater than allowed maximum level
        if(dam_obj[i].crnt_lvl_max < dam_obj[i].crnt_lvl)
        {
            pthread_create (&thread[i], NULL, (void *) &dam_function, NULL);
            if(i==(n-1))
            {

                i = -1;
                days_count++;

            }

        }

        //Normal Working Condition
        else if(((dam_obj[i].crnt_lvl<dam_obj[i].crnt_lvl_max) && (dam_obj[i].crnt_lvl>dam_obj[i].crnt_lvl_min)) && (main_flag == 1))
        {

            main_flag=0;
            pthread_create (&days_thread, NULL, (void *) &days_function, NULL);

        }

    }

    pthread_exit(NULL);

} 
```

该文件的内容如下：

```
5
1758.69
1735.836
7.787
28
1.263
1758.69
2
847.6
844.86
1.614
36
.79
847.05
4
456.59
444
5.557
55
.41
452.9
3
253
237.74
4.55
116
.46
247.3
0
707.745
678.8
47.4
32
.472
703.8
2
7
5
6
3
8
3
6
4
5
7
9
1
3
2
4
5
7
8
4
6
7
3
5
9
3 
```

我在 linux 中编译了这个程序，`gcc -o project project.c -pthread -lpthread -lm` 但是在运行时它只返回了一个`Segmentation Fault`. 因此，我使用 gdb 编译了用于调试的代码，然后在运行时，gdb 显示以下内容：

```
Starting program: /home/anver/project
[Thread debugging using libthread_db enabled]
[New Thread 0xb7e2db70 (LWP 3778)]
[New Thread 0xb762cb70 (LWP 3779)]
[New Thread 0xb6e2bb70 (LWP 3780)]
[New Thread 0xb662ab70 (LWP 3781)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0xb762cb70 (LWP 3779)]
0x08049cd1 in dam_function () at project-file.c:504
504             std_dev_rate[j]+=temp_rate[m]; 
```

之后，当我打印 j、l 和 m 的值时，我发现 j、l 和 m 的值非常高，预计不会超过 23。无论如何我可以解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:15:13.873

pthreads 标准指定在一个线程上访问一个变量，而它正在或可能在另一个线程中被修改是未定义的行为。您的函数`days_function`使用 variables`days_count`以及许多其他地方的许多其他变量来执行此操作。

坦率地说，您似乎不知道如何正确使用线程。

# php - 如何在 Windows（WAMP 服务器）上安装 Twig（PHP）？

> ID：15933683
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:33:18.897
> 
> 标签：php, windows, templates, installation, twig

请问如何在 WAMP 服务器上安装 PHP 模板引擎 Twig？在他们的网站上，他们说我应该下载一个 .dll ( [http://twig.sensiolabs.org/doc/intro.html#id1](http://twig.sensiolabs.org/doc/intro.html#id1) )，但他们的链接不起作用，我在谷歌上找不到太多相关信息. 谢谢你的帮助 ：）

PS：如果重要的话，这是一个Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:24:38.180

从您的评论到@Theodore 的帖子，我只是想检查一下（但还没有代表发表评论）......

...您是否意识到您**不需要**DLL 来使用或“开发”树枝应用程序/树枝代码？

Twig 只是一个包含在项目源代码中的库，通常通过 Composer 或解压缩存档文件。DLL 只是使 twig 编译器更快的加速器。它是可选的，绝对*不需要*仅仅编写树枝模板。

基本上你应该遵循 twig 站点[http://twig.sensiolabs.org/doc/intro.html#installation](http://twig.sensiolabs.org/doc/intro.html#installation)上的一种安装方法（composer 是所有酷孩子都使用的，但 tar 也可以）

获得文件的本地副本后，只需在代码中添加如下一行：

```
require_once '/path/to/lib/Twig/Autoloader.php';
Twig_Autoloader::register(); 
```

然后你就可以走了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:01:55.783

用于非非常流行的 PHP 扩展（除了 Xdebug、APC 等）的自定义 Windows DLL 通常很难获得。它们通常需要 MS Visual Studio、大量专业知识，并且通常需要对扩展代码进行相当多的修改，这些代码很多时候从未在 Windows 上为 PHP 的目标版本编译过，或者以前从未在 Windows 上编译过任何版本。

我已经做到了，并且过去曾提供过我的服务，但是 SO 上的人们仅仅因为解释这种可悲的事态而将我投下地狱。我也从未能够通过 Visual Studio Express 编译扩展。

*因此，每个目标编译和 PHP 版本都*需要价值数百美元的软件（例如 Wamp 和 Z-Wamp 使用不同的 Visual Studio，即使对于相同的版本），并且可能需要 3-8 小时的工作时间。

将其与拒绝专业人士仅收取 250-500 美元以获得保证结果的文化相结合，您就会明白为什么 Windows 扩展如此罕见，而且越来越少。

只需查看 Xdebug windows 下载页面。 [http://xdebug.org/download.php](http://xdebug.org/download.php)

以下是他们支持的。每个“VC”都是不同的 Visual Studio 安装。每个包都需要不同的扩展代码调整、编译等。

1.  PHP 5.2 VC6（32 位）
2.  PHP 5.2 VC6 TS（32 位）
3.  PHP 5.2 VC9（32 位）
4.  PHP 5.2 VC9 TS（32 位）
5.  PHP 5.3 VC9（64 位）
6.  PHP 5.3 VC9（32 位）
7.  PHP 5.3 VC9 TS（64 位）
8.  PHP 5.3 VC9 TS（32 位）
9.  PHP 5.4 VC9（64 位）
10.  PHP 5.4 VC9（32 位）
11.  PHP 5.4 VC9 TS（64 位）
12.  PHP 5.4 VC9 TS（32 位）
13.  PHP 5.5 VC11（64 位）
14.  PHP 5.5 VC11（32 位）
15.  PHP 5.5 VC11 TS（64 位）
16.  PHP 5.5 VC11 TS（32 位）

# linux - Unix - 使用 fork() 的进程

> ID：15933684
> 
> 赞同：0
> 
> 时间：2013-04-10T18:33:29.093
> 
> 标签：linux, unix, process, fork

我正在尝试解决一个问题，但我不知道我必须做什么。这是问题所在：

“创建一个从命令行接收 n 个文件名 arg1,arg2,...,argn 的父进程。父进程创建 n-2 个子进程。每个子进程接收两个参数：i，argi。argi 文件将是如果 i>2 则修改：从 argi 文件中删除 i 位置倍数上的每个字节。”

这是我到目前为止所做的：

```
#include <stdio.h>
#include <unistd.h>

int main(int argc, char* argv[]){
printf("Creating a child\n");
int i;
for(i=0;i<argc-2;i++){
 if(fork()==0){
 printf("CHILD %d!\n",i+1);
 exit(0);
 }
}
wait(0);
} 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:40:08.157

你会更好地计算从 2 到 argc-1（包括）的循环。由于您正在执行 argc-2 分叉，因此您也应该有 argc-2 等待，而不是单个等待。除此之外，您只是在读取文件并在删除指定位后将其写回。

# django - 如何获取使用 django bulk_create 创建的对象的主键

> ID：15933689
> 
> 赞同：86
> 
> 时间：2013-04-10T18:33:39.570
> 
> 标签：django, django-models, django-views, django-queryset

有没有办法获取您使用 django 1.4+ 中的 bulk_create 功能创建的项目的主键？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2016-09-04T06:23:19.590

## 2016

由于 Django 1.10 -**现在支持**（仅在 Postgres 上）这里是[doc 的链接](https://docs.djangoproject.com/en/2.2/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)。

```
>>> list_of_objects = Entry.objects.bulk_create([
...     Entry(headline="Django 2.0 Released"),
...     Entry(headline="Django 2.1 Announced"),
...     Entry(headline="Breaking: Django is awesome")
... ])
>>> list_of_objects[0].id
1 
```

从更改日志：

> 在 Django 1.10 中更改：添加了在使用 PostgreSQL 时在使用 bulk_create() 创建的对象上设置主键的支持

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-06-07T10:16:54.920

根据文档你不能这样做：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#bulk-create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#bulk-create)

bulk-create 就是为此：以一种有效的方式创建大量对象，从而节省大量查询。但这意味着你得到的回应是不完整的。如果你这样做：

```
>>> categories = Category.objects.bulk_create([
    Category(titel="Python", user=user),
    Category(titel="Django", user=user),
    Category(titel="HTML5", user=user),
])

>>> [x.pk for x in categories]
[None, None, None] 
```

这并不意味着您的类别没有 pk，只是查询没有检索到它们（如果键是 an `AutoField`）。如果出于某种原因需要 pks，则需要以经典方式保存对象。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-06-09T00:10:19.067

我能想到的两种方法：

a）你可以做

```
category_ids = Category.objects.values_list('id', flat=True)
categories = Category.objects.bulk_create([
    Category(title="title1", user=user, created_at=now),
    Category(title="title2", user=user, created_at=now),
    Category(title="title3", user=user, created_at=now),
])
new_categories_ids = Category.objects.exclude(id__in=category_ids).values_list('id', flat=True) 
```

如果查询集非常大，这可能会有点贵。

b) 如果模型有一个`created_at`字段，

```
now = datetime.datetime.now()
categories = Category.objects.bulk_create([
    Category(title="title1", user=user, created_at=now),
    Category(title="title2", user=user, created_at=now),
    Category(title="title3", user=user, created_at=now),
])

new_cats = Category.objects.filter(created_at >= now).values_list('id', flat=True) 
```

这具有存储对象创建时间的字段的限制。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-06-10T06:13:25.953

实际上，我的同事提出了以下解决方案，现在看起来很明显。添加一个名为的新列`bulk_ref`，您使用唯一值填充该列并为每一行插入。之后只需使用`bulk_ref`预先设置的集合查询表，瞧，您插入的记录就会被检索到。例如：

```
cars = [Car(
    model="Ford",
    color="Blue",
    price="5000",
    bulk_ref=5,
),Car(
    model="Honda",
    color="Silver",
    price="6000",
    bulk_ref=5,
)]
Car.objects.bulk_create(cars)
qs = Car.objects.filter(bulk_ref=5) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-03-15T06:49:56.843

我将与您分享获取主键时`AUTO_INCREMENT`的处理方法和方法`InnoDB` `(MySQL)``bulk_create` `(Django)`

根据[bulk_create doc](https://docs.djangoproject.com/en/1.11/ref/models/querysets/#bulk-create) `If the model’s primary key is an AutoField it does not retrieve and set the primary key attribute, as save() does, unless the database backend supports it (currently PostgreSQL).`，我们需要在 Django 或 MySQL 中找出问题的原因，然后再寻找解决方案。

在`AUTO FIELD`Django 中实际上是`AUTO_INCREMENT`在 MySQL 中。它用于为新行生成唯一标识（[ref](https://dev.mysql.com/doc/refman/5.7/en/example-auto-increment.html)）

你想要`bulk_create`对象（Django）意味着`insert multiple rows in a single SQL query`. 但是如何检索最近自动生成的 PK（主键）？感谢[LAST_INSERT_ID](https://dev.mysql.com/doc/refman/5.7/en/information-functions.html#function_last-insert-id)。 `It returns first value automatically generated of the most recently executed INSERT statement...This value cannot be affected by other clients, even if they generate AUTO_INCREMENT values of their own. This behavior ensures that each client can retrieve its own ID without concern for the activity of other clients, and without the need for locks or transactions.`

我鼓励您阅读[InnoDB 中的 AUTO_INCREMENT 处理](https://dev.mysql.com/doc/refman/5.7/en/innodb-auto-increment-handling.html)并阅读 Django 代码`django.db.models.query.QuerySet.bulk_create`以了解为什么 Django 还不支持 MySQl。这真有趣。请回到这里并评论您的想法。

接下来，我将向您展示示例代码：

```
from django.db import connections, models, transaction
from django.db.models import AutoField, sql

def dict_fetch_all(cursor):
    """Return all rows from a cursor as a dict"""
    columns = [col[0] for col in cursor.description]
    return [
        dict(zip(columns, row))
        for row in cursor.fetchall()
    ]

class BulkQueryManager(models.Manager):
    def bulk_create_return_with_id(self, objs, batch_size=2000):
        self._for_write = True
        fields = [f for f in self.model._meta.concrete_fields if not isinstance(f, AutoField)]
        created_objs = []
        with transaction.atomic(using=self.db):
            with connections[self.db].cursor() as cursor:
                for item in [objs[i:i + batch_size] for i in range(0, len(objs), batch_size)]:
                    query = sql.InsertQuery(self.model)
                    query.insert_values(fields, item)
                    for raw_sql, params in query.get_compiler(using=self.db).as_sql():
                        cursor.execute(raw_sql, params)
                    raw = "SELECT * FROM %s WHERE id >= %s ORDER BY id DESC LIMIT %s" % (
                        self.model._meta.db_table, cursor.lastrowid, cursor.rowcount
                    )
                    cursor.execute(raw)
                    created_objs.extend(dict_fetch_all(cursor))

        return created_objs

class BookTab(models.Model):
    name = models.CharField(max_length=128)
    bulk_query_manager = BulkQueryManager()

    class Meta:
        db_table = 'book_tab'

def test():
    x = [BookTab(name="1"), BookTab(name="2")]
    create_books = BookTab.bulk_query_manager.bulk_create_return_with_id(x)
    print(create_books)  # [{'id': 2, 'name': '2'}, {'id': 1, 'name': '1'}] 
```

这个想法是`cursor`用来执行`raw insert sql`然后取回created_records。根据`AUTO_INCREMENT handling in InnoDB`，它确保不会有任何记录中断您`objs`的 PK `cursor.lastrowid - len(objs) + 1 to cursor.lastrowid`( [cursor.lastrowid](https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-lastrowid.html) )。

奖励：它正在我的公司进行生产。但是你需要关心`size affect`为什么 Django 不支持它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-17T08:22:50.090

我尝试了许多策略来解决 MariaDB/MySQL 的这个限制。最后我想出的唯一可靠的解决方案是在应用程序中生成主键。不要`INT AUTO_INCREMENT`自己生成 PK 字段，即使在具有隔离级别的事务中也不`serializable`行，因为 MariaDB 中的 PK 计数器不受事务锁的保护。

解决方案是向模型添加唯一`UUID`字段，在模型类中生成它们的值，然后将其用作它们的标识符。当您将一堆模型保存到数据库时，您仍然无法取回它们的实际 PK，但这很好，因为在随后的查询中，您可以使用它们的 UUID 唯一地标识它们。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-16T20:53:01.133

```
# datatime.py
# my datatime function
def getTimeStamp(needFormat=0, formatMS=True):
    if needFormat != 0:
        return datetime.datetime.now().strftime(f'%Y-%m-%d %H:%M:%S{r".%f" if formatMS else ""}')
    else:
        ft = time.time()
        return (ft if formatMS else int(ft))

def getTimeStampString():
    return str(getTimeStamp()).replace('.', '')

# model
    bulk_marker = models.CharField(max_length=32, blank=True, null=True, verbose_name='bulk_marker', help_text='ONLYFOR_bulkCreate')

# views
import .........getTimeStampString

data_list(
Category(title="title1", bulk_marker=getTimeStampString()),
...
)
# bulk_create
Category.objects.bulk_create(data_list)
# Get primary Key id
Category.objects.filter(bulk_marker=bulk_marker).values_list('id', flat=True) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-13T16:04:37.320

[django 文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)目前在限制下声明：

> 如果模型的主键是 AutoField，它不会像那样检索和设置主键属性`save()`。

但是，有好消息。有几张票`bulk_create`是凭记忆在谈论的。上面列出的[票](https://code.djangoproject.com/ticket/19527)最有可能有一个很快就会实施的解决方案，但显然不能保证按时或是否会成功。

所以有两种可能的解决方案，

1.  等着看这个补丁是否可以投入生产。您可以通过测试所述解决方案来帮助解决此问题，并让 django 社区知道您的想法/问题。[https://code.djangoproject.com/attachment/ticket/19527/bulk_create_and_create_schema_django_v1.5.1.patch](https://code.djangoproject.com/attachment/ticket/19527/bulk_create_and_create_schema_django_v1.5.1.patch)

2.  覆盖/编写您自己的批量插入解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-08T21:48:11.463

这在现有的 Django 中不起作用，但[Django 错误跟踪器中有一个补丁](https://code.djangoproject.com/ticket/19527)可以让 bulk_create 设置创建对象的主键。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-15T23:26:48.957

可能最简单的解决方法是手动分配主键。这取决于特定情况，但有时从表中的 max(id)+1 开始并为每个对象分配递增的数字就足够了。但是，如果多个客户端可能同时插入记录，则可能需要一些锁。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-13T14:50:56.653

@Or Duan 建议的方法在使用`bulk_create`with时适用于 PostgreSQL `ignore_conflicts=False`。当`ignore_conflicts=True`设置时，您不会`AutoField`在返回的对象中获得（通常是 ID）的值。

# c# - Rhino Mocks - 将模拟类作为参数传递时构造函数失败

> ID：15933697
> 
> 赞同：0
> 
> 时间：2013-04-10T18:34:00.437
> 
> 标签：c#, unit-testing, rhino-mocks

编辑：我完全重申了这个问题，因为我以前没有正确地表达它。

除了我的测试类之外的所有东西都是 API 的一部分。我将一个模拟接口传递给一个模拟类，然后将该模拟类传递给我的测试类。我的测试类扩展了一个类，构造函数的主体是空的。我的代码在我的构造函数处中断，这意味着失败出现在基类构造函数中，其实现被隐藏。如果有任何不清楚的地方，我深表歉意，请告诉我，我会改写任何不清楚的部分。预先感谢您的帮助。

这是一个代码示例：

```
public class TestClass : ApiClass0
{
    ApiClass1 apiClass1;
    public TestClass(ApiClass1 apiClass1) : base(apiClass1)
    { 
        this.apiClass1 = apiClass1;
    }
    public void MethodToTest() 
    {
        apiClass1.Method0();
    }
}

public class ApiClass0
{
    public ApiClass0(ApiClass1 apiClass1) { }
}

public class ApiClass1
{
    public ApiClass1(IApiInterface i) {}
    public Method0() { }
}

public interface IApiInterface0 {}

public class TestClassTest
{
    [TestInitialize()]
    public void TestInitialize()
    {
        IApiInterface0 mApiInterface0 = MockRepository.GenerateMock<IApiInterface0>();
        ApiClass1 mApiClass1 = MockRepository.GenerateMock<ApiClass1>(mApiInterface0);
        TestClass testClass = new TestClass(mApiClass1); //code breaks here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:31:38.943

for 的构造函数`ApiClass1`接受`IApiInterface`作为参数，但测试使用`IApiInterface0`. 更改其中任何一个，测试都会通过。

# node.js - 尝试使用 request.js 更新 Twitter 状态

> ID：15933702
> 
> 赞同：0
> 
> 时间：2013-04-10T18:34:15.547
> 
> 标签：node.js, twitter

这将返回“错误的身份验证数据”错误

```
 request.post({
    url: "https://api.twitter.com/1.1/statuses/update.json",
    oauth: {
      consumer_key: auth.twitter.consumerKey,
      consumer_secret: auth.twitter.consumerSecret,
      access_token_key: this.authToken,
      access_token_secret: this.authSecret
    },
    params: {
      status: "Check this out!!"
    }
  }, function(err, response, body) {
    return console.log(err, body); // null '{"errors":[{"message":"Bad Authentication data","code":215}]}'
  }); 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:40:05.873

有几件事阻止它运行：

`access_token_key`应该是`token`，而且`access_token_secret`应该是`token_secret`

使用请求模块发送 POST 数据的工作方式略有不同。尝试这样的事情

```
var r = request.post({url:url, oauth:params}, function(err, resp, body) {
    res.end("Tweet sent successfully");
});

var form = r.form();
form.append("status", "Check this out!!"); 
```

# html - VB.Net - 使用 GetElementByClass 选择一个类，然后以编程方式单击该项目

> ID：15933704
> 
> 赞同：0
> 
> 时间：2013-04-10T18:34:35.637
> 
> 标签：html, vb.net, webbrowser-control

现在在发布这个问题之前，我确实阅读了......

[如何通过 GetElementByClass 选择一个类并以编程方式单击它](https://stackoverflow.com/questions/3436116/how-to-select-a-class-by-getelementbyclass-and-click-on-it-programmically)

但这对我不起作用。显然我是个白痴，不知道如何使用该代码，或者它只是不适合我。如果有帮助的话，我也在 VB.NET 中使用 WebBrowser 控件...

我有以下我试图点击...

```
<div class="closewindow"></div> 
```

当然，现在它被埋在无数其他 div 的下方和内部，但它没有任何直接的“所有者”。没有或类似的东西。它只是独自坐着

这是它被阻止的html

```
<div class="main_class">  
<div id="FullItemView">  
<div style="width: 90%; float: left;">  
<div class="headline">  
<table style="width: 100%;">    
<tbody><tr>      
<td style="width: 15%; text-align: right; vertical-align: middle;">
<img class="switchImage" src="pictures/pic.png"></td>      
<td style="width: 70%; vertical-align: middle;">
<span class="ListItemTitle">Renegade</span></td>      
<td style="width: 15%; text-align: left;">
<img class="switchImage" src="pictures/pic.png"></td>    </tr>  </tbody></table>  
</div>  
</div>  
<div class="closeWindow"></div>
...... 
```

现在我只想能够挑出然后在这个 div 和这个 div 上调用“点击”。我知道它什么时候因为服务器上的一些 PHP 代码而被点击，但这需要很长时间才能解释它是如何工作的。

任何人都知道我怎么能把它挑出来，所以当我有一个变量 XITEM 或 .NET 内部的东西时，我可以调用它吗？就像我有...

```
For XITEM as HTMLELEMENT in WebBrowser1.Document.GetElementsByTagName("div")
......
item.invokeMember("click")
..... 
```

然后它只单击“选择”的 HTMLELEMENT。希望这对每个人都有意义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:03:47.690

在我在 stackoverflow.com 上找到的原始帖子混在一起后，我想通了

```
Dim theElementCollection As HtmlElementCollection = Nothing
        theElementCollection = WebBrowser1.Document.GetElementsByTagName("div")
        For Each curElement As HtmlElement In theElementCollection
            'If curElement.GetAttribute("classname").ToString = "example"  It doesn't work.  
            ' This should be the work around.
            If InStr(curElement.GetAttribute("classname").ToString, "closeWindow") Then
                ' Doesn't even fire.
                ' InvokeMember(test) after class is found.
                'MessageBox.Show(curElement.GetAttribute("InnerText"))
                curElement.InvokeMember("Click")
                curElement.InvokeMember("MouseDown")
                curElement.InvokeMember("MouseUp")
                curElement.RaiseEvent("OnClick")
                curElement.Focus()
            End If
        Next 
```

# python - 如何从文本文件中提取数据并导入新的输出文件？

> ID：15933708
> 
> 赞同：2
> 
> 时间：2013-04-10T18:34:43.957
> 
> 标签：python, file-io, python-2.7

假设以下是 ctf_output.txt 中的数据，我想从 Rod #、Surface Temp 和 Centerline Temp 中提取标题，然后只提取每个棒的最高温度。请注意，我在每列中都放置了特定且显着更高的温度，没有重复。

```
Rod 1  
Surface Temperature Centerline Temperature  
500         510    
501         511  
502         512  
503         513  
504         525  
505         515  
535         516  
507         517  
508         518  
509         519  
510         520  
Rod 2  
Surface Temperature   Centerline Temperature  
500               510  
501           511  
502           512  
503           513  
504           555  
505           515  
540           516  
507               517  
508           518  
509           519  
510           520  
Rod 3
Surface Temperature   Centerline Temperature  
500           510  
501           511  
502           512  
503           513  
567           514  
505           515  
506           559  
507           517  
508           518  
509           519  
510           520 
```

我怎么能用python做到这一点？我需要一个 python 脚本来提取数据并使用以下格式填充一个新的输出文件：

```
Rod 1  
Surface Temperature Centerline Temperature  
535         525  

Rod 2  
Surface Temperature   Centerline Temperature  
540           555  

Rod 3  
Surface Temperature   Centerline Temperature  
567           559 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:54:51.457

您将逐行读取文件，然后跟踪最大值并在下一部分开始时输出这些最大值：

```
with open('ctf_output.txt', 'r') as temps, open(outputfilename, 'w') as output:
    surface_max = centerline_max = None
    for line in temps:
        if line.startswith('Rod'):
            # start of new section
            if surface_max is not None or centerline_max is not None:
                # write maximum for previous section
                output.write('{}\t\t\t{}\n\n'.format(surface_max, centerline_max))
            # write out this line and the next to the output file
            output.write(line)
            output.write(next(temps, ''))
            # reset maxima
            surface_max = centerline_max = 0
        elif line.strip():
            # temperature line; read temperatures and track maxima
            surface, centerline = [int(t) for t in line.split()]
            if surface > surface_max:
                surface_max = surface
            if centerline > centerline_max:
                centerline_max = centerline
    if surface_max or centerline_max:
        # write out last maxima
        output.write('{}\t\t\t{}\n'.format(surface_max, centerline_max)) 
```

输出使用 3 个选项卡，就像您的输入一样。

对于您的示例输入，它写道：

```
Rod 1  
Surface Temperature Centerline Temperature  
535         525

Rod 2  
Surface Temperature   Centerline Temperature  
540         555

Rod 3
Surface Temperature   Centerline Temperature  
567         559 
```

# php - 使用 Javascript 验证电台选择

> ID：15933711
> 
> 赞同：0
> 
> 时间：2013-04-10T18:34:47.940
> 
> 标签：php, javascript

如果没有使用以下脚本选择单选按钮，我将尝试返回 false：

```
function validatefilling(){
    var a=document.getElementById("myfilling");
    if (fillingselected == 0){
        var resultloc=document.getElementById("fillingerror");
        resultloc.innerHTML =  "<span style='color:red;'>Please select a filling!<span>";
        return false;
    }
    var resultloc=document.getElementById("fillingerror");
    resultloc.innerHTML =  "";
    return true;
} 
```

然而，它似乎不起作用。我正在尝试发送消息“请选择填充物！” 如果在用户提交表单后没有选择任何内容，则会出现。“fillingselected”是提交的单选表单的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:39:23.090

尝试这个

```
if(!document.getElementById('myfilling').checked) {
    var resultloc=document.getElementById("fillingerror");
    resultloc.innerHTML =  "<span style='color:red;'>Please select a filling!<span>";
    return false;
} else {
    var resultloc=document.getElementById("fillingerror");
    resultloc.innerHTML =  "";
    return true;
} 
```

# vb.net - 如何使用 Linq 查询具有 group by 和两个计数的实体

> ID：15933718
> 
> 赞同：0
> 
> 时间：2013-04-10T18:35:11.550
> 
> 标签：vb.net, linq, entity-framework, linq-to-entities

我需要查询帮助。我想返回一个实体列表，对于每个实体，我需要两个计数。

使用从这些表生成的实体：

```
 /****** Objet :  Table [dbo].[Messages]    Date de génération du script : 03/12/2013 15:31:06 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
DROP TABLE [dbo].[Messages]
Go
CREATE TABLE [dbo].[Messages](
    [MessageID] [int] IDENTITY(1,1) NOT NULL,
    [UserCreation] [nvarchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [DateCreation] [datetime] NOT NULL  DEFAULT (getdate()),
    [UserModif] [nvarchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [DateModif] [datetime] NOT NULL  DEFAULT (getdate()),
    [Timestamp] [timestamp] NOT NULL,
    [Notification] [bit] NOT NULL  DEFAULT ((0)),
    [BounceTraite] [bit] NOT NULL  DEFAULT ((0)),
 CONSTRAINT [PK_Messages] PRIMARY KEY CLUSTERED 
(
    [MessageID] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

GO
/****** Objet :  Table [dbo].[MessageLocalisations]    Date de génération du script : 03/12/2013 15:31:06 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
DROP TABLE [dbo].[MessageLocalisations]
Go
CREATE TABLE [dbo].[MessageLocalisations](
    [MessageID] [int] NOT NULL,
    [CodeLocalisation] [char](5) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [From] [nvarchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Subject] [nvarchar](255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Message] [nvarchar](max) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [TargetedAudience] [nvarchar](255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 CONSTRAINT [PK_MessageLocalisations] PRIMARY KEY CLUSTERED 
(
    [MessageID] ASC,
    [CodeLocalisation] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF
GO
/****** Objet :  Table [dbo].[MessageRecipients]    Date de génération du script : 03/12/2013 15:31:06 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
DROP TABLE [dbo].[MessageRecipients]
Go
CREATE TABLE [dbo].[MessageRecipients](
    [MessageID] [int] NOT NULL,
    [Recipient] [nvarchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [DateRead] [datetime] NULL,
    [Email] [nvarchar](60) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Bounce] [bit] NOT NULL,
    [DateCreation] [datetime] NOT NULL,
    [DateModif] [datetime] NOT NULL ,
 CONSTRAINT [PK_MessageRecipients] PRIMARY KEY CLUSTERED 
(
    [MessageID] ASC,
    [Recipient] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF
GO 
```

在我的示例中，我的实体是消息。我需要一个收件人计数和一个已阅读邮件的收件人计数：

```
 (From msg In context.Messages.Include("MessageLocalisations")
                         Let countRecipients = msg.MessageRecipients.Count
                         Let countRecipientsRead = msg.MessageRecipients.Where(Function(x) x.DateRead.HasValue).Count
                         Where (msg.UserCreation.Equals(user, StringComparison.OrdinalIgnoreCase))
                         Group By msg.MessageID Into Group
                         Select msg, Group).ToList() 
```

我的例子不起作用。我的选择语句有误，他不认识味精。在 LINQ 中，当我使用 Group By 时，我不确定 Group 的工作方式以及 select 的工作方式。

我想要的结果是一个消息列表，其中包括 MessageLocalisations、每条消息的收件人数量、已阅读每条消息的收件人数量。

谢谢你的帮助！在 SQL 中，这很简单...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:24:33.720

这是最终解决我的问题的查询：

```
context.MessageSecuriseJeu.Include("MessageSecuriseLocalisations").
                            Where(Function(w) w.UtilisateurCreation.Equals(codeUtilisateurExpediteur, StringComparison.CurrentCultureIgnoreCase)).
                            Select(Function(msg) New With {.msg = msg, .nbrDest = msg.MessageSecuriseDestinataires.Count, .nbrLu = msg.MessageSecuriseDestinataires.Where(Function(w) w.DateLecture.HasValue).Count}).tolist() 
```

# mysql - 如何避免mysql死锁？

> ID：15933724
> 
> 赞同：1
> 
> 时间：2013-04-10T18:35:25.937
> 
> 标签：mysql, database-deadlocks

我遇到了无法删除记录的问题。我一直遇到死锁超时问题。

我正在运行一个简单的查询

```
delete from phone_calls where status =0 
```

过了一会儿我得到这个错误`Lock wait timeout exceeded; try restarting transaction`

我能做些什么来解决这个问题？我的查询有问题吗？

请注意，如果我添加限制 1000 它可以工作，但没有限制它会陷入死锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:42:38.557

首先，这不是死锁。这是一个简单的锁定等待超时。死锁给出的错误类似于“尝试获取锁时发现死锁”。

其次，其他一些事务仍在运行，并在 phone_calls 中的一个或几行上持有锁，状态 = 0。如果状态不是索引，你实际上是持有一个表锁，两个查询不能这样做同时。删除所有这些行可能需要一段时间，而且您的作业运行得太频繁了。

# javascript - 用户名的 JavaScript 正则表达式没有空格

> ID：15933727
> 
> 赞同：3
> 
> 时间：2013-04-10T18:35:42.867
> 
> 标签：javascript, regex

我正在寻求有关用户名的 JavaScript 正则表达式的帮助。基本上，我需要允许使用字母 AZ、数字、句点、破折号、下划线、美元符号、at 符号、星号和感叹号，并且用户名最长可达 30 个字符。例如，不应允许使用空格或逗号。

允许的字符：

```
[a-zA-Z0-9]
.
-
_
$
@
*
! 
```

*   用户名 = 通过
*   用户名 = 失败
*   用户，名称 = 失败
*   用户名eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee =失败

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T18:38:34.150

以下应该有效：

```
/^[a-zA-Z0-9.\-_$@*!]{3,30}$/ 
```

请注意，我还强制要求最小长度为 3 个字符，将其更改为您实际想要的任何内容。

JSFiddle：http: [//jsfiddle.net/5F5cQ/1/](http://jsfiddle.net/5F5cQ/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:40:45.590

您可以使用`^[-\w\.\$@\*\!]{1,30}$`, where`1`和`30`are 可以更改的界限，具体取决于密码至少需要多短。

`\w`提供数字、字母和下划线覆盖，然后是您允许的所有特殊字符。确保正确转义特殊字符，因为其中很多用于实际的正则表达式解析。

使用您提供的示例（和一些额外的示例），您可以看到正则表达式在[此处](http://rubular.com/r/IQPnmvFwiB)工作。

# c - 多次从子执行

> ID：15933731
> 
> 赞同：0
> 
> 时间：2013-04-10T18:36:04.487
> 
> 标签：c

所以我在一个子进程中执行一个带有 execv() 的文件，它的文件描述符可能会根据输入进行修改。

但是，我试图在子进程的下一个进程之后执行一个进程，但是因为 execv() 接管了子进程，所以在前一个调用之后调用 execv() 不起作用。

我将如何从一个孩子执行多个进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:43:35.463

当您调用`execv`进程时，原始进程映像将被您正在执行的程序中的新进程映像覆盖。这意味着您不能`execv`在同一进程中运行多个 '，因为只有第一个会被执行。

为了解决这个问题，您必须为每个`execv`计划运行的进程生成一个新进程。

# python - 我如何捕捉一个像异常一样的 numpy 警告（不仅仅是为了测试）？

> ID：15933741
> 
> 赞同：217
> 
> 时间：2013-04-10T18:36:21.917
> 
> 标签：python, exception, numpy, warnings, divide-by-zero

我必须在 Python 中为我正在做的项目制作拉格朗日多项式。我正在做一种重心风格，以避免使用显式的 for 循环，而不是使用牛顿的分差风格。我遇到的问题是我需要将除以零，但是 Python（或者可能是 numpy）只是让它成为警告而不是正常的异常。

所以，我需要知道如何处理这个警告，就好像它是一个异常一样。我在这个网站上找到的与此相关的问题没有以我需要的方式得到回答。这是我的代码：

```
import numpy as np
import matplotlib.pyplot as plt
import warnings

class Lagrange:
    def __init__(self, xPts, yPts):
        self.xPts = np.array(xPts)
        self.yPts = np.array(yPts)
        self.degree = len(xPts)-1 
        self.weights = np.array([np.product([x_j - x_i for x_j in xPts if x_j != x_i]) for x_i in xPts])

    def __call__(self, x):
        warnings.filterwarnings("error")
        try:
            bigNumerator = np.product(x - self.xPts)
            numerators = np.array([bigNumerator/(x - x_j) for x_j in self.xPts])
            return sum(numerators/self.weights*self.yPts) 
        except Exception, e: # Catch division by 0\. Only possible in 'numerators' array
            return yPts[np.where(xPts == x)[0][0]]

L = Lagrange([-1,0,1],[1,0,1]) # Creates quadratic poly L(x) = x^2

L(1) # This should catch an error, then return 1\. 
```

执行此代码时，我得到的输出是：

```
Warning: divide by zero encountered in int_scalars 
```

这就是我想要捕捉的警告。它应该出现在列表理解中。

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2013-04-10T18:53:50.580

您的配置似乎正在使用以下`print`选项[`numpy.seterr`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html)：

```
>>> import numpy as np
>>> np.array([1])/0   #'warn' mode
__main__:1: RuntimeWarning: divide by zero encountered in divide
array([0])
>>> np.seterr(all='print')
{'over': 'warn', 'divide': 'warn', 'invalid': 'warn', 'under': 'ignore'}
>>> np.array([1])/0   #'print' mode
Warning: divide by zero encountered in divide
array([0]) 
```

这意味着您看到的警告**不是**真正的警告，而只是打印到的一些字符`stdout`（请参阅文档[`seterr`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html)）。如果你想抓住它，你可以：

1.  使用`numpy.seterr(all='raise')`which 将直接引发异常。然而，这改变了所有操作的行为，所以这是一个相当大的行为变化。
2.  使用`numpy.seterr(all='warn')`，它将打印的警告转换为真正的警告，您将能够使用上述解决方案来本地化这种行为变化。

一旦你真正有一个警告，你可以使用该`warnings`模块来控制应该如何处理警告：

```
>>> import warnings
>>> 
>>> warnings.filterwarnings('error')
>>> 
>>> try:
...     warnings.warn(Warning())
... except Warning:
...     print 'Warning was raised as an exception!'
... 
Warning was raised as an exception! 
```

仔细阅读文档，[`filterwarnings`](http://docs.python.org/2/library/warnings.html#warnings.filterwarnings)因为它允许您仅过滤您想要的警告并具有其他选项。我还会考虑查看[`catch_warnings`](http://docs.python.org/2/library/warnings.html#warnings.catch_warnings)哪个是自动重置原始`filterwarnings`功能的上下文管理器：

```
>>> import warnings
>>> with warnings.catch_warnings():
...     warnings.filterwarnings('error')
...     try:
...         warnings.warn(Warning())
...     except Warning: print 'Raised!'
... 
Raised!
>>> try:
...     warnings.warn(Warning())
... except Warning: print 'Not raised!'
... 
__main__:2: Warning: 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-11-13T21:21:22.427

为@Bakuriu 的回答添加一点内容：

如果您已经知道警告可能发生的位置，那么使用上下文管理器通常会更干净[`numpy.errstate`](https://numpy.org/doc/stable/reference/generated/numpy.errstate.html)，而不是使用上下文管理器 [`numpy.seterr`](https://numpy.org/doc/stable/reference/generated/numpy.seterr.html)来处理相同类型的所有后续警告，而不管它们在您的代码中发生的位置：

```
import numpy as np

a = np.r_[1.]
with np.errstate(divide='raise'):
    try:
        a / 0   # this gets caught and handled as an exception
    except FloatingPointError:
        print('oh no!')
a / 0           # this prints a RuntimeWarning as usual 
```

* * *

### 编辑：

在我原来的例子中，我有`a = np.r_[0]`，但显然 numpy 的行为发生了变化，因此在分子全为零的情况下，除以零的处理方式不同。例如，在 numpy 1.16.4 中：

```
all_zeros = np.array([0., 0.])
not_all_zeros = np.array([1., 0.])

with np.errstate(divide='raise'):
    not_all_zeros / 0\.  # Raises FloatingPointError

with np.errstate(divide='raise'):
    all_zeros / 0\.  # No exception raised

with np.errstate(invalid='raise'):
    all_zeros / 0\.  # Raises FloatingPointError 
```

相应的警告消息也不同：`1\. / 0.`记录为`RuntimeWarning: divide by zero encountered in true_divide`，而`0\. / 0.`记录为`RuntimeWarning: invalid value encountered in true_divide`。我不确定为什么要进行此更改，但我怀疑这与`0\. / 0.`以下`1\. / 0.`事实`-1\. / 0.`有关，根据 IEE 754 标准。

如果你想捕获这两种类型的错误，你总是可以通过`np.errstate(divide='raise', invalid='raise')`，或者`all='raise'`如果你想在*任何*类型的浮点错误上引发异常。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-04-07T23:40:21.047

为了详细说明上面@Bakuriu的答案，我发现这使我能够以与捕获错误警告类似的方式捕获运行时警告，很好地打印出警告：

```
import warnings

with warnings.catch_warnings():
    warnings.filterwarnings('error')
    try:
        answer = 1 / 0
    except Warning as e:
        print('error found:', e) 
```

您可能可以随意放置 warnings.catch_warnings() 位置，具体取决于您要以这种方式捕获错误的雨伞的大小。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-12-20T04:46:29.953

删除 warnings.filterwarnings 并添加：

```
numpy.seterr(all='raise') 
```

# ruby-on-rails - Rails 多重身份验证

> ID：15933742
> 
> 赞同：0
> 
> 时间：2013-04-10T18:36:25.460
> 
> 标签：ruby-on-rails, facebook, authentication

我的应用程序提供两种类型的身份验证 - 通常的电子邮件/密码或使用 facebook 帐户。使用 FB 的身份验证由属于用户的单独模型“身份验证”处理。因此，当当前也通过 facebook 使用电子邮件用户日志登录时，这只是让他能够使用基于 FB API 的功能。但是，如果他没有帐户并尝试使用 FB 进行身份验证，就会出现问题。我绝对不想强迫他完成注册，因为我在这个 FB 交互中看不到任何意义，而且所有功能都可以通过 FB 插件设置。所以我有两种解决方法。首先，通过 FB 身份验证创建用户，跳过用户模型验证，只需将电子邮件和密码字段留空。第一个问题 - 它会导致一些非常糟糕的安全漏洞吗？第二种方式 - 从 FB api 获取他的电子邮件并自动生成密码。我想选择第一种方法，但潜在的安全问题确实让我很担心。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T15:30:50.993

我认为你不会有安全漏洞，因为在论文中，你做了所有你需要在你的模型中关闭它们的东西。

我认为您应该关注您的数据库完整性以及您将来可以创建的其他帮助者，这些帮助者可能会推断出该电子邮件或 fb 未提供的任何信息。

我认为你可以让 fb 为他们提供从 auth cookie 读取数据并让你的数据库完全填满。

# python - 从结尾到开头一次读取一个文件

> ID：15933743
> 
> 赞同：0
> 
> 时间：2013-04-10T18:36:30.100
> 
> 标签：python

嗨，我有兴趣从头到尾一次读取一个字节的文件。

这是我到目前为止所拥有的：

```
fileName = raw_input()
with open(fileName , "rb") as handler:
    while True:
        piece = handler.read(1)

        if piece =="":
            break
        print piece 
```

我怎样才能改变它，以便我能够从头到尾以字节为单位读取文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:46:53.437

关于什么？

```
with open(fileName , "rb") as handler:
    size = handler.seek(0, 2) #2= SEEK_END
    while size > 0:
        size -= 1
        handler.seek(size)
        b = handler.read(1)
        print b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:49:11.940

据我所知，这个问题有两种解决方案。

一方面，你可以使用tell and seek函数"

```
>>> fh = open("e:\\text.txt","rb")
>>> fh.seek(0,2)
>>> length = fh.tell()
>>> for i in range(length, 0, -1):
        fh.seek(i-1,0)
        char = fh.read(1)
        print(char) 
```

另一方面，您可以读取所有内容（如果文件不是太大），然后从头到尾处理它：

```
>>> fh = open("e:\\text.txt","rb")
>>> fc = fh.read()
>>> fh.close()
>>> for i in range(len(fc),0,-1):
     print(fc[i-1]) 
```

# java - 自定义会话 id 生成实现 UuidGenerator

> ID：15933744
> 
> 赞同：0
> 
> 时间：2013-04-10T18:36:31.557
> 
> 标签：java, session, jakarta-ee, glassfish

我想在glassfish服务器中为会话ID生成（自定义会话ID生成）设置自定义类，从我的搜索到现在我发现自定义类应该实现“com sun enterprise util uuid.UuidGenerator”类

所以我尝试创建自己的课程

```
import com.sun.enterprise.util.uuid;
public class Customsessionid implements UuidGenerator {

    public UuidGeneratorImpl() 
    {
    }

    public String generateUuid() {
        return UuidUtil.generateUuid();
    }

    public String generateUuid(Object obj) {
        return UuidUtil.generateUuid(obj);
    }

} 
```

但是由于找不到包，导入会出错

任何人都可以帮我实现 UuiGenerator 类请提供 sutom 会话 id 生成的代码，如果你能提前感谢的话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:14:13.663

您无法以您尝试的方式导入包。您必须使用通配符或导入特定类：

尝试这个：

```
import com.sun.enterprise.util.uuid.*; 
```

包和导入的详细解释可以在[这里](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.1)找到（特别是示例 7.5.1-3\. **No Import of a Subpackage**）

# haskell - 如何在数据中隐藏姓名和年龄 People a = Person { name::a , age::Int} deriving Show in haskell

> ID：15933746
> 
> 赞同：3
> 
> 时间：2013-04-10T18:36:36.167
> 
> 标签：haskell

假设我们有

```
data People a = Person { name::a , age::Int} deriving Show 
```

在我打字时拥抱

```
> Person "Alihuseyn" 20 
```

我得到`Person {name = "Alihuseyn", age = 20}` 但我想得到`Person Person "Alihuseyn" 20`。

我的意思是如何在不更改数据的情况下隐藏姓名和年龄的提及？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T18:39:34.523

如果需要，您始终可以`Show`为所有类型提供自定义实例：

```
data People a = Person { name::a , age::Int} 

instance (Show a) => Show (People a) where
    show (Person name age) == "Person " ++ show name ++ " " ++ show age 
```

或者，或者不太优雅，编写自定义访问器：

```
data People a = Person a Int deriving Show
name (Person n _) = n
age (Person _ a) = a 
```

无论哪种方式，您都必须更改 的声明`People`，否则您将陷入派生`Show`实例。

附带说明，如果您有一个只有一个构造函数的数据类型，您通常在类型之后命名构造函数，所以它是`data Person a = Person { name :: a, age :: Int }`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T19:19:23.870

这用于`GHC.Generics`提供一个`showsPrecDefault`，可以很容易地用来定义一个`Show`实例。

```
data Person a = Person { name :: a, age :: Int } deriving Generic

instance Show a => Show (Person a) where showsPrec = showsPrecDefault

>>> Person "Alihuseyn" 20
Person "Alihuseyn" 20 
```

的定义`showsPrecDefault`如下。

```
{-# LANGUAGE
    DeriveGeneric
  , FlexibleContexts
  , FlexibleInstances
  , KindSignatures
  , TypeOperators
  , TypeSynonymInstances #-}
import GHC.Generics

class GShow f where
  gshowsPrec :: Int -> f a -> ShowS

instance GShow U1 where
  gshowsPrec _ U1 = id

instance Show c => GShow (Rec0 c) where
  gshowsPrec p = showsPrec p . unK1

instance GShow f => GShow (D1 d f) where
  gshowsPrec p = gshowsPrec p . unM1

instance Constructor c => GShow (C1 c U1) where
  gshowsPrec _ c@(M1 U1) = showParen (isInfix c) (showString (conName c))

instance (Constructor c, GShow (M1 i c f)) => GShow (C1 c (M1 i c f)) where
  gshowsPrec = gshowsPrec'

instance (Constructor c, GShow (f :+: g)) => GShow (C1 c (f :+: g)) where
  gshowsPrec = gshowsPrec'

instance (Constructor c, GShow (f :*: g)) => GShow (C1 c (f :*: g)) where
  gshowsPrec = gshowsPrec'

gshowsPrec' :: (Constructor c, GShow f) => Int -> C1 c f p -> ShowS
gshowsPrec' p c@(M1 f) =
  showParen (p > 10) $
  showParen (isInfix c) (showString (conName c)) .
  showChar ' ' .
  gshowsPrec 11 f

isInfix :: Constructor c => t c (f :: * -> *) a -> Bool
isInfix c = case conFixity c of
  Infix _ _ -> True
  _ -> False

instance GShow f => GShow (S1 s f) where
  gshowsPrec p = gshowsPrec p . unM1

instance (GShow a, GShow b) => GShow (a :+: b) where
  gshowsPrec p (L1 a) = gshowsPrec p a
  gshowsPrec p (R1 b) = gshowsPrec p b

instance (GShow a, GShow b) => GShow (a :*: b) where
  gshowsPrec p (a :*: b) =
    gshowsPrec (p + 1) a .
    showChar ' ' .
    gshowsPrec (p + 1) b

showsPrecDefault :: (Generic a, GShow (Rep a)) => Int -> a -> ShowS
showsPrecDefault p = gshowsPrec p . from 
```

# twitter-bootstrap - Bootstrap 响应式图表和图形

> ID：15933748
> 
> 赞同：27
> 
> 时间：2013-04-10T18:36:49.543
> 
> 标签：twitter-bootstrap, google-visualization

我正在为我的一个应用程序使用 Twitter 的引导程序，并希望显示图形和图表。我尝试使用 Google 图表，并将其放置在 div 容器中。但是，这些图表没有响应。我想知道是否有任何其他框架可以显示响应并与引导程序一起使用的图表。

到目前为止是否可以显示响应式图表？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-10T18:59:36.943

我尝试过的选项：

1.  [jqPlot](http://www.jqplot.com/)它们是可点击的，但您可能需要应用自定义 CSS（[此处为示例](http://www.jqplot.com/deploy/dist/examples/dashboardWidget.html)）
2.  [Highcharts](http://www.highcharts.com/)无需使用 Flash 即可生成饼图和折线图。但你不能在移动设备上“点击”它们

# regex - Perl中正则表达式的问题

> ID：15933749
> 
> 赞同：2
> 
> 时间：2013-04-10T18:36:50.100
> 
> 标签：regex, perl, text-parsing, string-parsing

我正在尝试编写一个脚本来解析试算表。文件中每一行的布局始终相同，但我在让正则表达式正确匹配时遇到问题。该行的前 10 个字符始终是帐号。这是一个例子：

```
0000000099 S000 Doe, John  00 1,243.22  01/01/1901 
```

我试图将这些中的每一个捕获到一个单独的变量的列中，但我的表达式不起作用。

这是我到目前为止所拥有的。

```
#!/usr/bin/perl -w
use strict;

my $filename = "S:\\TELLERS\\GalaxyDown\\tbal";
my $answer   = undef;
open(FIN, $filename) || die "File not found";

do {
    print "Enter an account number: ";
    chomp(my $acctNum = <STDIN>);

    if ($acctNum =~ /\d{1,10}/) {
        $acctNum = pad_zeros($acctNum);

        #print "$acctNum\n";    #test to make sure the padding extends the account
                                #number to 10 digits - comment out after verification

        while (<FIN>) {

            #print "$_\n";

            if (m/(^[0-9]{10}/) {
                print "Passed\n";
            }
            else {
                print "Failed\n";
            }
        }

    }
    else {
        print "Invalid account number. Please try again.\n";
    }
    print "Would you like to view another account balance? (yes/no): ";
    chomp($answer = lc <STDIN>);

} while ($answer ne "no");

sub pad_zeros {
    my $optimal_length = 10;
    my $num            = shift;
    $num =~ s/^(\d+)$/("0"x($optimal_length-length$1)).$1/e;
    return $num;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:01:20.480

您的`pad_zeros`函数实际上是`sprintf '%0*d', $optimal_length, $num`.

您的`while(<FIN>)`循环读取 tbal 文件中的所有行，并为该文件中的每一行打印该行是否以十位数字开头，但仅针对输入的第一个帐号（readline 运算符`<>`实际上是一个迭代器，并且在您阅读后用尽所有行）。解决方案是打开`if`分支内的文件句柄。

还有其他一些可以改进的地方：

*   您不需要使用`undef`: 这已经是它们的默认值来初始化标量变量。
*   要打开文件句柄，您应该 (1) 为该文件句柄使用普通变量，以及 (2) 使用以下三参数形式`open`：

    ```
    open my $fin, "<", $filename or die "Can't open $filename: $!"; 
    ```

    where包含失败`$!`的原因。`open`指定显式模式`<`会使一些极端情况更加安全。

*   反斜杠路径很难看，但 Windows 处理正常的斜杠就好了 → `S:/TELLERS/...`。

要将一行拆分为多个字段，您必须考虑确切的格式：每个字段是否由一个公共分隔符分隔，例如空格？在这种情况下，

```
my @fields = split " ", $line; 
```

会成功的。将 更改为`" "`确定不同分隔符（制表符、逗号等）的分隔符的正则表达式。

但是，您的格式看起来并不那么简单，因为姓氏后面的逗号可能不是姓氏字段数据的一部分 (?)

一个正则表达式

```
my $regex = qr{\A
  \s* ([0-9]{10})
  \s+ (S[0-9]{3})
  \s+ ([^,]+),            # the surname
  \s+ ([^0-9]+(?<!\s))    # other names
  \s+ ([0-9]{2})
  \s+ ([0-9,]+\.[0-9]{2})
  \s+ ([0-9]{2})
   /  ([0-9]{2})
   /  ([0-9]{4})
   \s*\z
}x;
my @fields = $line =~ $regex; 
```

可能会更好，但这取决于您拥有的*确切*格式。

匹配名字很困难，因为有些人可能有多个名字。考虑这些条目`Gogh, Vincent van`，或者`Tucker, Charles III.`我决定匹配“任何不以空格字符结尾的非数字字符串”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:21:29.683

我没有得到任何积分。[Amon](https://stackoverflow.com/a/15934225/368630)几乎做到了，并为您提供了您需要知道的一切，包括一些很棒的建议。

您说您的帐户行如下所示：

```
0000000099 S000 Doe, John  00 1,243.22  01/01/1901 
```

问题是空格可以用作名称的一部分。*Mary Jane Von Corona*里面有四个空格。但是，它是名字*Mary Jane*和姓*Von Corona*。我怎么知道名字在哪里拆分？

最好的方法是使用固定长度的字段，或者使用文件中没有的分隔符。

```
0000000099|S000|Doe|John|00|1,243.22|01/01/1901 
```

在这里，我`|`用作字段分隔符。我可以这样做：

```
my ( $account,   $something,   $something2,
     $last,      $first,       $something3,
     $balance,   $date)                       = split /\|/, $line; 
```

这是在`|`.

如果字段具有固定宽度，我可以使用[substr](http://perldoc.perl.org/functions/substr.html)函数将这一行中的各个字段分开：

```
my $account = substr( $line, 0, 10 );   #First 10 characters is always the account number 
```

我还建议使用[autodie](http://perldoc.perl.org/autodie.html)。这样，您不必测试各种事情，例如您的文件是否已成功打开。当发生这样的事情时，Perl 会自动死掉（并且通常会带有一个很好的错误消息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:14:55.140

您的代码没有明显错误。您没有说出*“不工作”*的意思，但我注意到您正在多次阅读文件以搜索输入。到达文件末尾后，您需要`seek`重新开始或重新打开文件。

这里有一些建议

*   不要使用`-w`命令行限定符。`use warnings`好得多

*   使用单引号分隔包含反斜杠的字符串。然后它们不需要转义，除非它们中的一个以上或它们出现在字符串的末尾

*   `snake_case`如果你使用而不是`CamelCase`你的本地标识符，你会让很多经验丰富的 Perl 程序员更快乐

*   当前的最佳实践是使用词法文件句柄和`open`. 你应该把它`$!`放到你的`die`字符串中，这样你就可以*知道为什么*打开失败了

*   你检查`/\d{1,10}/`你的输入，它测试字符串是否在任何地方*包含*一串数字。你可能是说`/^\d{1,10}$/`

*   `sub pad_zeroes`最好写成`sprintf '%0*d', $optimal_length, $_[0]`

这是建议的重写。我修改了代码，检查输入文本指定的账号是否被读取，想必是你的本意。

**请注意**，对输入的每个新帐号依次搜索文件是非常低效的，并且仅适用于小型数据文件或一次性程序。我建议您[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)与指示要读取绑定数组的哪个元素以访问给定帐号的哈希一起使用。

**注意**您的文件似乎使用了固定宽度的字段，即字段始终在行中相同的字符位置开始和结束。如果是这样，那么不要使用正则表达式来处理您应该使用的数据`substr`或`unpack`. 更好的是，该模块[`Parse::FixedLength`](https://metacpan.org/module/Parse%3a%3aFixedLength)允许您简单地指定每个字段的长度，并为您完成其余的工作。

```
#!/usr/bin/perl

use strict;
use warnings;

my $filename = 'S:\TELLERS\GalaxyDown\tbal';
my $answer;

do {
    print "Enter an account number: ";
    chomp(my $acct_num = <STDIN>);

    if ($acct_num =~ /^\d{1,10}$/) {

        $acct_num = pad_zeroes($acct_num);

        #print "$acct_num\n";    #test to make sure the padding extends the account
                                 #number to 10 digits - comment out after verification

        open(my $fin, '<', $filename) || die "File not found: $!";
        while (<$fin>) {
            if (/^$acct_num/) {
              print "Passed\n";
            }
        }
    }
    else {
        print "Invalid account number. Please try again.\n";
    }
    print "Would you like to view another account balance? (yes/no): ";
    chomp($answer = lc <STDIN>);

} until $answer eq 'no';

sub pad_zeroes {
    my $optimal_length = 10;
    sprintf '%0*d', $optimal_length, $_[0];
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T19:13:17.127

如果你想检查整行，你可以使用这样的东西：

```
 while(<FIN>){

        if( @a = (m/^\s*(\d{1,10})\s+(S\d+)\s+(\w+)\s*,\s*(\w+)\s+(\d\d)\s+(\S+)\s+(\d\d?\/\d\d?\/(?:\d\d)\d\d)\s*/) ) {
            $a[0] = sprintf "%010d", $a[0];
            print "Account number:  $a[0]";
            print "Account series:  $a[1]";
            print "Account owner:   $a[3] $a[2]";
            print "Account type:    $a[4]";
            print "Account balance: $a[5]";
            print "Account date:    $a[6]";
        } else {
            print "Failed\n";
        } 
```

任何与所需格式的偏差都会打印“失败”您可以根据需要进行调整。

# vb.net - 视觉基础可视化

> ID：15933751
> 
> 赞同：0
> 
> 时间：2013-04-10T18:36:54.883
> 
> 标签：vb.net, graphics, ide, workflow, representation

我实际上正在寻找一个 IDE、一个工具或一个插件（用于 Visual Studio）来创建和自定义代码图片的关联：以便从“绘图”或图形连接中生成功能代码（即：从带有箭头、框、锥体等的可视化工作流到 VB 代码），以及从后者（从代码）具有可视化表示（即：从 VB 代码到工作流的图形表示）。如果你能帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:43:40.857

这对于代码创建来说太复杂了。

但是，如果您使用 Visual Studio Professional/Ultimate，则可以可视化现有代码

*   查看类图（在解决方案资源管理器中右键单击时）
*   在代码图上显示（右键单击实际代码时）

尝试它们，用一个小项目测试它们。您会注意到保持概览并不容易，因为它只显示完整代码的子集。

使用类图，您可以直观地添加类/字段/属性/方法，但是，需要使用真实的代码视图来填充它们。

# oracle - 循环创建 Oracle 用户

> ID：15933752
> 
> 赞同：0
> 
> 时间：2013-04-10T18:37:02.977
> 
> 标签：oracle, for-loop, oracle11g

我正在尝试创建 oracle 用户并使用循环授予连接。这就是我到目前为止所拥有的。

我得到一个错误`Encountered the symbol "USERID"`。我想我需要以`userid`某种方式逃避。

```
BEGIN
  FOR USERNAME IN (SELECT USERID FROM SCHEMA.TABLENAME WHERE USERID NOT IN(SELECT NAME FROM USER$))
  LOOP
    EXECUTE IMMEDIATE 'CREATE USER ' || USERNAME || ' IDENTIFIED BY ' USERNAME;
    EXECUTE IMMEDIATE 'GRANT CONNECT TO ' || USERNAME;                                  
  END LOOP;
END; 
```

任何解决该声明的帮助将不胜感激。

编辑：为清楚起见更改光标名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:38:49.830

您似乎`||`在 "IDENTIFIED BY" 字符串之后和第二个`USERID`.

```
EXECUTE IMMEDIATE 'CREATE USER ' || USERID || ' IDENTIFIED BY ' || USERID; 
```

您似乎还想引用光标中的`USERID`列。`USERNAME`假设是这种情况，您需要使用语法`USERNAME.USERID`

```
EXECUTE IMMEDIATE 'CREATE USER ' || USERNAME.USERID || ' IDENTIFIED BY ' || USERNAME.USERID;
EXECUTE IMMEDIATE 'GRANT CONNECT TO ' || USERNAME.USERID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-01T07:27:44.320

您不能在循环中创建具有像 1,2,3,4.... 这样的数值的用户。

如果您想与 abc1、abc2、abc3 等字符串值连接。abc 是默认值，循环中计数为 1,2,3..

```
declare
user varchar(10);
id number(10);
pwd varchar(10);

begin
for id in 1..3
loop
user:='abc';
pswd:='abcd';--password
user=user||id;--concate user+numeric value here.
execute immediate'create user'||user||'identifid by '||pswd;
execute immediate'grant connect to'||user;
execute immediate'grant resource to'||user;
end loop;
end; 
```

# emacs - 从 eslip 向 eshell 发送命令

> ID：15933756
> 
> 赞同：2
> 
> 时间：2013-04-10T18:37:13.937
> 
> 标签：emacs, elisp, eshell

我正在编写一个 elisp 函数，它将命令发送到现有的 eshell 缓冲区，等待命令完成，然后发送另一个命令。例如，我想发送：

```
python
2+3 
```

到目前为止，我尝试了以下方法，但均未成功：

1.让eshell进程使用`process-send-string`和`accept-process-output`：

```
(process-send-string eshell-proc "python")
(accept-process-output eshell-proc 100) 
```

但是我一直无法获得eshell进程。当前缓冲区为 eshell 时`(get-buffer-process (current-buffer))`返回。`nil`

2.在缓冲区中插入命令，使用`(eshell-send-input)`，并在发送下一个命令之前休眠一会儿：

```
(progn 
(insert "python")
(eshell-send-input)
(sleep-for 1)
(insert "2+3")
(eshell-send-input)) 
```

这种方法的问题是在 python 子进程启动之前发送了“2+3”。无论我睡觉的时间长短，都会发生这种情况。似乎睡眠冻结了所有 emacs 的子进程？

3.`eshell-gather-process-output`使用：如果我使用：

```
(eshell-gather-process-output "/usr/bin/python" nil) 
```

或者

```
(eshell-gather-process-output "/usr/bin/python" (list "somearg")) 
```

我明白了`Debugger entered--Lisp error: (wrong-type-argument arrayp nil)`

但如果我使用：

```
(eshell-gather-process-output "/usr/bin/python" (vector "somearg")) 
```

我明白了`Debugger entered--Lisp error: (wrong-type-argument listp ["somearg"])`

所以我真的很困惑这个命令需要什么类型的参数。我还没有找到一个使用这个命令的例子。

为什么这么简单的事情会变得这么复杂？感谢您的任何输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T02:47:58.873

我明白你在说什么，但这似乎并不是真正的“Emacs”做事方式。您可以在 python 模式下打开一个缓冲区并将区域说 2+2 发送到 python 解释器。或者你可以做

```
(python-shell-send-string "2 + 2") 
```

或者查看 python-mode 的源代码，特别是这个函数：

```
(defun python-shell-send-string (string &optional process msg)
  "Send STRING to inferior Python PROCESS.
When MSG is non-nil messages the first line of STRING."
  (interactive "sPython command: ")
  (let ((process (or process (python-shell-get-or-create-process)))
      (lines (split-string string "\n" t)))
  (and msg (message "Sent: %s..." (nth 0 lines)))
  (if (> (length lines) 1)
      (let* ((temporary-file-directory
            (if (file-remote-p default-directory)
                (concat (file-remote-p default-directory) "/tmp")
              temporary-file-directory))
           (temp-file-name (make-temp-file "py"))
           (file-name (or (buffer-file-name) temp-file-name)))
      (with-temp-file temp-file-name
        (insert string)
        (delete-trailing-whitespace))
      (python-shell-send-file file-name process temp-file-name))
  (comint-send-string process string)
  (when (or (not (string-match "\n$" string))
            (string-match "\n[ \t].*\n?$" string))
    (comint-send-string process "\n"))))) 
```

与您希望从 Emacs 向其发送命令的进程交互的过程将类似。如果您深入研究上述函数的代码，您将看到 python-mode 负责获取/启动所需的进程，在本例中为 python 解释器。

# ruby-on-rails - Rails 3 I/O 到后台进程和从后台进程

> ID：15933760
> 
> 赞同：0
> 
> 时间：2013-04-10T18:37:30.233
> 
> 标签：ruby-on-rails, ruby, io

**简短版本：**我需要从 Rails 控制器（使用 Rails 3）启动子进程（Ruby 脚本），并将`stdout`子进程中的消息渲染到网页，并从 Rails 视图将信息传递到子进程。

**设置：**我有一个 Ruby 脚本，它与名为[Ivy](http://www.tls.cena.fr/products/ivy/)的软件消息总线系统通信，使用 Ruby 1.9.3 将控制消息发送到我网络上其他地方运行的某些硬件并从其接收消息。我不能在这里使用替代的消息传递系统，它必须是 Ivy。该脚本当前将消息写入`stdout`.

**问题 1：**我想将此脚本作为子进程（或线程，我愿意接受建议）从 Rails 应用程序的控制器启动。我希望能够从这个脚本接收消息，以便它们可以显示在网页上。无需将这些消息持久地存储在数据库中，因此我正在考虑使用 Rails 缓存来临时存储和访问消息，并可能使用 AJAX 每隔一段时间轮询缓存以获取新消息。这可能吗？

**问题 2：**同一个 Rails 应用程序需要能够将控制消息从网页（例如，通过用户与按钮、下拉菜单或其他一些 UI 元素交互）发送到 Ivy 子进程，以便这些控制消息可以传播到硬件。

我已经研究[过 Sidekiq](http://sidekiq.org/)、[Delayed Job](https://github.com/collectiveidea/delayed_job)等潜在的解决方案，但我无法通过浏览文档找到确凿的证据表明这些潜在的解决方案可以同时解决问题 1 和问题 2。所以，我的问题如下：

1.  像 Sidekiq 或 DelayedJob 这样的现成解决方案可以处理这个任务吗？
2.  Rails 中是否已经内置了某种方法可以实现这一点？
3.  这个问题接近于意见，但无论如何我都会问。我有其他理由追求 Rails，但如果这项任务非常困难，他们可能会被击败。使用 Rails 做这样的事情会很痛苦，我应该研究替代解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:12:50.720

听起来有3个问题：

1.  监控 ivybus 的消息
2.  通过 ivybus 发送命令
3.  用户交互（网络界面）

Rails 框架只解决了第 3 个问题。这就是它的全部设计目的。然而，这并不意味着 Ruby/Rails 不是完成这项工作的好工具。以下是我对设置的一些想法：

问题 1 肯定应该发生在某种后台工作中。它不应该是标准 Web 请求的一部分。我认为关注点 2 在后台工作中也能更好地工作。任何容易出错或可能长时间运行的任务都应该尽可能远离 Web 请求。

有几种方法可以让这些任务进入后台。Sidekiq 是关注点 2（发送命令）的完美解决方案。控制器会收到用户的请求来做一些动作，控制器会向后台工作人员提交一个作业来做这件事。Sidekiq 也可以解决问题 1（监控），但您必须创建定期作业（如轮询）才能继续检查接口是否有新消息。Sidekiq 并不意味着运行将无限期运行的作业。

解决问题 1 最可靠的方法是创建一个守护进程。这可能看起来有点矫枉过正，但像“守护进程”这样的宝石使这成为一项非常容易的任务。该守护进程可以监控接口并将您关心的数据推送到某种数据存储（MySQL、Redis 等）中。

您可以使用这些后台解决方案中的一个或两个来解决这个问题，但我绝对认为您需要一个单独的过程来管理至少第一个问题。这将允许关注点 3（您的 Web 应用程序）仅处理从数据存储读取数据并将其呈现给用户，并将某些请求（命令）转换为后台作业。这可以让您的 Rails 应用程序做它最擅长的事情，但仍然可以让您做任何您需要的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:16:16.660

Rails（大部分）很好。

Sidekiq 或 Resque 将是进行 Ivy 投票的好方法。您可以安排工作人员定期轮询新消息。

虽然 Rails 4 可以进行直播，但它还没有准备好迎接黄金时段。我建议使用类似 Node.js/Socket.io 的设置通过 WebSockets 与客户端浏览器对话。或者，如果不需要花哨的实时更新并且客户端数量很少，只需让工作人员将结果转储到数据库中并让浏览器轮询更新。

但是，常春藤是症结所在。我没有看到太多关于从 Ruby/Rails 应用程序与 Ivy 交谈的内容。也许您可以使用 JRUby，然后使用 Java 包装器之一。

由于您不是超级嫁给 Rails，因此在 Python 或 Perl 中执行此操作可能会更容易，因为 Ivy 人已经拥有用这些语言编写的工具。

# html - 浏览器自动更改 Line-Height？

> ID：15933761
> 
> 赞同：-1
> 
> 时间：2013-04-10T18:37:30.633
> 
> 标签：html, css, google-chrome, firefox, browser

我试图将段落内的行高保持在 1.0。这是我正在使用的 CSS 类：

```
.bottombarinfo{
font-family: Verdana, Geneva, sans-serif;
font-size: 12px;
line-height: 1.0;} 
```

这是我在 HTML 代码中使用 CSS 类的地方，它是一个段落/跨度：

```
 <p><img src="images/1.jpg" alt="HTC ONE" width="238" height="168" class="floatleft">
<span class="bottombarinfo">From its beautifully designed aluminum chasse to its fluid Android OS, the HTC one is spectacular, but is it the phone to go agains the Galaxy S4 and
Apple's iPhone 5?</span></p> 
```

我尝试将图片放在段落之外并删除/更改跨度，但是所有三个主要浏览器，Firefox、chrome 和 IE 都以接近 2.0 的行高来分隔文本。那么我应该怎么做才能让浏览器显示 1.0 的行高呢？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:09:04.047

```
<p><img src="images/1.jpg" alt="HTC ONE" width="238" height="168" class="floatleft" />
<span class="bottombarinfo">From its beautifully designed aluminum chasse to its fluid Android OS, the HTC one is spectacular, but is it the phone to go agains the Galaxy S4 and 
```

苹果的 iPhone 5？

```
.bottombarinfo {
  font-family: Verdana, Geneva, sans-serif;
  font-size: 12px;
  line-height: 300%;
} 
```

[提琴手](http://jsfiddle.net/85nbh/1/)

在这里玩，把它拿到你想要的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:55:19.147

您是否尝试过使用重置样式表来阻止浏览器的默认样式？它们可以在网上找到并免费下载。请务必将其作为您的第一个样式表。

# objective-c - respondsToSelector 和 class_getInstanceMethod

> ID：15933762
> 
> 赞同：2
> 
> 时间：2013-04-10T18:37:39.720
> 
> 标签：objective-c, cocoa-touch, objective-c-runtime

在内部，`respondsToSelector`除了找出是否`class_getInstanceMethod`返回非零之外，还做更多的事情吗？

respondsToSelector 本质上是 class_getInstanceMethod 的包装器吗？像这样：

```
- (BOOL)respondsToSelector:(SEL)sel {
  return class_getInstanceMethod(self, sel) != nil;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:35:38.730

在 Apple 的开源[NSObject implementation](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/NSObject.mm)中，`respondsToSelector:`位于第 1472 行，如下所示：

```
- (BOOL)respondsToSelector:(SEL)sel { 
    if (!sel) return NO; 
    return class_respondsToSelector([self class], sel); 
} 
```

`class_respondsToSelector()`依次在[objc-class.mm](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-class.mm)的第 729 行：

```
BOOL class_respondsToSelector(Class cls, SEL sel)
{
    IMP imp;

    if (!sel  ||  !cls) return NO;

    // Avoids +initialize because it historically did so.
    // We're not returning a callable IMP anyway.
    imp = lookUpMethod(cls, sel, NO/*initialize*/, YES/*cache*/, nil);
    return (imp != (IMP)_objc_msgForward_internal) ? YES : NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:39:27.037

`-respondsToSelector:`返回一个`BOOL`指示，本质上，是否`class_getInstanceMethod()`会返回一个值。这是否回答你的问题？

`-respondsToSelector:`在传统的 Objective-C 代码中，与 的变体之一配对`-performSelector:*`更惯用；很少看到（或需要）直接调用运行时。

**编辑**：实际实现可能基于调用`class_respondsToSelector()`，但我希望该运行时方法的实现与您的代码片段没有根本不同。

# c# - 返回 FileStream 后无法删除临时文件

> ID：15933763
> 
> 赞同：8
> 
> 时间：2013-04-10T18:37:40.063
> 
> 标签：c#, asp.net-mvc, file-io, filestream, temporary-files

我在 C# MVC 应用程序中有一个函数，它创建一个临时目录和一个临时文件，然后使用 FileStream 打开文件，将 FileStream 返回给调用函数，然后需要删除临时文件。但是，我不知道如何删除临时目录和文件，因为它总是出错说“该进程无法访问该文件，因为它正在被另一个进程使用。” 这是我尝试过的，但 FileStream 仍在 finally 块中使用临时文件。如何返回 FileStream 并删除临时文件？

```
public FileStream DownloadProjectsZipFileStream()
{
    Directory.CreateDirectory(_tempDirectory);
    // temporary file is created here
    _zipFile.Save(_tempDirectory + _tempFileName);

    try
    {
        FileStream stream = new FileStream(_tempDirectory + _tempFileName, FileMode.Open);
        return stream;
    }
    finally
    {
        File.Delete(_tempDirectory + _tempFileName);
        Directory.Delete(_tempDirectory);
    }
} 
```

FileStream 返回的函数如下所示：

```
public ActionResult DownloadProjects ()
{
    ProjectDownloader projectDownloader = new ProjectDownloader();

    FileStream stream = projectDownloader.DownloadProjectsZipFileStream();
    return File(stream, "application/zip", "Projects.zip");
} 
```

**更新：**我忘了提到 zip 文件是 380 MB。使用 MemoryStream 时出现系统内存不足异常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-26T06:04:13.373

这是我使用的上述内容的缩减版本：

```
public class DeleteAfterReadingStream : FileStream
{
    public DeleteAfterReadingStream(string path)
        : base(path, FileMode.Open)
    {
    }

    protected override void Dispose(bool disposing)
    {
        base.Dispose(disposing);
        if (File.Exists(Name))
            File.Delete(Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T06:14:55.473

您可以创建一个包装类来实现`Stream`合同并包含`FileStream`内部合同，以及维护文件的路径。

所有标准`Stream`方法和属性都将被传递给`FileStream`实例。

当此包装类为`Dispose`d 时，您将（在`Dispose`ing 包装后`FileStream`）然后删除该文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-07T13:58:40.307

我使用了 Damien_The_Unbeliever（已接受的答案）的建议，写了出来，效果很好。只是想我会分享课程：

```
public class BurnAfterReadingFileStream : Stream
{
    private FileStream fs;

    public BurnAfterReadingFileStream(string path) { fs = System.IO.File.OpenRead(path); }

    public override bool CanRead { get { return fs.CanRead; } }

    public override bool CanSeek { get { return fs.CanRead; } }

    public override bool CanWrite { get { return fs.CanRead; } }

    public override void Flush() { fs.Flush(); }

    public override long Length { get { return fs.Length; } }

    public override long Position { get { return fs.Position; } set { fs.Position = value; } }

    public override int Read(byte[] buffer, int offset, int count) { return fs.Read(buffer, offset, count); }

    public override long Seek(long offset, SeekOrigin origin) { return fs.Seek(offset, origin); }

    public override void SetLength(long value) { fs.SetLength(value); }

    public override void Write(byte[] buffer, int offset, int count) { fs.Write(buffer, offset, count); }

    protected override void Dispose(bool disposing)
    {
        base.Dispose(disposing);
        if (Position > 0) //web service quickly disposes the object (with the position at 0), but it must get rebuilt and re-disposed when the client reads it (when the position is not zero)
        {
            fs.Close();
            if (System.IO.File.Exists(fs.Name))
                try { System.IO.File.Delete(fs.Name); }
                finally { }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T05:58:32.100

问题是您只能在将文件写入响应后删除文件，并且文件只有在从操作返回后才由 FileStreamResult 写入。

一种处理方法是创建一个将删除文件的 FileResult 的子类。

子类化更容易，`FilePathResult`以便类可以访问文件名。

```
public class FilePathWithDeleteResult : FilePathResult
{
    public FilePathResult(string fileName, string contentType)
        : base(string fileName, string contentType)
    {
    }

    protected override void WriteFile(HttpResponseBase response)
    {
        base.WriteFile(response);
        File.Delete(FileName);
        Directory.Delete(FileName);
    }
} 
```

**注意：我没有测试过上述内容。在使用它之前删除它的所有错误。**

现在将控制器代码更改为：

```
public ActionResult DownloadProjects ()
{
    Directory.CreateDirectory(_tempDirectory);
    // temporary file is created here
    _zipFile.Save(_tempDirectory + _tempFileName);

    return new FilePathWithDeleteResult(_tempDirectory + _tempFileName, "application/zip") { FileDownloadName = "Projects.zip" };
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-08T12:16:58.333

我使用@hwiechers 建议的方法，但使其工作的唯一方法是在删除文件之前关闭响应流。

这是源代码，请注意，我在删除之前刷新了流。

```
public class FilePathAutoDeleteResult : FilePathResult
{
    public FilePathAutoDeleteResult(string fileName, string contentType) : base(fileName, contentType)
    {
    }

    protected override void WriteFile(HttpResponseBase response)
    {
        base.WriteFile(response);
        response.Flush();
        File.Delete(FileName);
    }

} 
```

这是控制器应该如何调用它：

```
public ActionResult DownloadFile() {

    var tempFile = Path.GetTempFileName();

    //do your file processing here...
    //For example: generate a pdf file

    return new FilePathAutoDeleteResult(tempFile, "application/pdf")
    {
        FileDownloadName = "Awesome pdf file.pdf"
    };
} 
```

# javascript - 无法访问使用 jQuery 加载页面后创建的元素

> ID：15933771
> 
> 赞同：-2
> 
> 时间：2013-04-10T18:38:04.603
> 
> 标签：javascript, jquery, href, prop

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:53:04.280

好吧，您可以确保 JS 在加载 HTML 后通过将其包装到`document ready`. 我从未使用过`prop`，但`attr`获得属性很棒。我提供的示例应该有效。

[http://jsfiddle.net/mJzr8/](http://jsfiddle.net/mJzr8/)

```
$().ready(function() {
    alert($("#id").attr("href"));
}); 
```

# android - 提供 uri 时，Camera Intent 为空

> ID：15933772
> 
> 赞同：0
> 
> 时间：2013-04-10T18:38:07.283
> 
> 标签：android, android-camera, android-camera-intent

首先，我确实查看了有关此的其他问题，但他们说要做我正在做的事情。

我正在尝试启动相机拍摄这样的照片

```
PackageManager pm = getPackageManager();
        if(pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)){
                Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 

                File tempDir= new File(Environment.getExternalStoragePublicDirectory(
                          Environment.DIRECTORY_PICTURES), "My App");
                if(!tempDir.exists())
                {
                    if(!tempDir.mkdir()){
                        Toast.makeText(this, "Please check SD card! Image shot is impossible!", Toast.LENGTH_SHORT).show();
                    }
                }

                String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss",Locale.US).format(new Date());
                File mediaFile = new File(tempDir.getPath() + File.separator +
                "IMG_"+ timeStamp + ".jpg");

                photoUri = Uri.fromFile(mediaFile);
                camera.putExtra(MediaStore.EXTRA_OUTPUT, photoUri);
                startActivityForResult(camera, CAMERA_REQUEST);
        }else{
            Toast.makeText(this, "This device does not have a rear facing camera",Toast.LENGTH_SHORT).show();
        } 
```

但是当它回到`onActivityResult`意图是 null 但结果是`OK`. 我可以转到设备上的目录并查看它是否也已正确保存。

如果我取出`camera.putExtra(MediaStore.EXTRA_OUTPUT, photoUri);`并创建一个启动相机的基本意图，则返回时该意图不为空。

我想这`photoUri`仍然是有效且安全的，因为图像在目录中，但是为什么当我提供 uri 时返回的意图是空的？

# django - 包含模板标签在 django 中不起作用

> ID：15933773
> 
> 赞同：13
> 
> 时间：2013-04-10T18:38:08.267
> 
> 标签：django

我的 Views.py 文件如下所示

```
 def homepage(request):
      template = 'homepage.html'
      list_display_template = 'list.html'
      list = model.objects.all()

      return render_to_response(template,
           {'list_display_template': list_display_template,
            'list' : list,},
            context_instance=RequestContext(request)) 
```

我的 homepage.html 如下所示：-

```
 {% extends "base.html" %}

  {% block main_content %}
      {% include list_display_template %}
  {% endblock %} 
```

我的 list_display_template (list.html) 有以下信息

```
 < div class= "span10">
     {% for item in list %}
         <p> {{ item }}</p>
      {% endfor %}
  </div> 
```

以上在开发中工作正常，但在生产中包含标签不起作用，当我检查元素时，它没有显示 list.html 中的任何项目。有人可以帮忙吗？

编辑：-我的文件夹结构如下

```
project_name/
    project_name/
         settings.py
    static/
       css/
       images/
    templates/
      homepage.html
      list.html
      base.html 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-21T10:41:27.570

我有同样的问题，但我会以其他有类似问题的用户可以理解的方式回答这个问题。

您可能在包含的 html 文件中有某种模板块，该块要么期望包含某种类型，要么导致错误调用 django 传递的异常，因此您无法看到错误，如果您`{% load someLoad %}`在父模板中使用然后在包含的 html 中也使用它，我猜这会随着版本的变化而变化。

在我的（非常具体的）案例中，我在包含的 html 文件中缺少这个：

```
{% load i18n %} 
{% load cms_tags sekizai_tags %} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-02-12T22:29:11.947

另一种**包含**语句将失败而不引发错误的情况是，如果您正在使用扩展另一个模板的模板，并且您的**包含**位于命名**块**之外：

```
{% extends "my_base.html" %}

{% block content %}
    {{ block.super }}
    {% include "partials/file1.html" %}
{% endblock %}

{% include "partials/file2.html" %} 
```

在这种情况下，file2.html 将不会被包含，因为它不在一个块中，并且您不会收到任何警告消息，并且会在您意识到自己所做的事情之前尝试各种事情 :-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-15T12:25:59.710

我只是有一个类似的问题。我能够通过临时复制并粘贴我想直接包含在父页面（base.html）中的html（即navigation.html）来诊断它。似乎如果包含的 html 中有错误，它就不会被读入，也不会出现错误。

将 navigation.html 中的代码粘贴到 base.html 中，我收到 500 错误，因为 navigation.html 中的一个命名 url 没有反向。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-23T11:44:08.370

如果包含模板有任何问题/错误，django 默认不会显示错误。您可以使用设置变量启用它`TEMPLATE_DEBUG = True`然后当您尝试加载该页面时，您将能够在模板中查看错误。

在上述情况下`{% load xxx %}`，包含的模板中可能缺少一些加载标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-10T02:27:16.213

我有同样的问题，我尝试了所有的方法。但仍然没有包含“html”。然后，我尝试将“html”从应用程序/模板移动到项目/模板。它的工作。所以我将html文件移回，并在setting.py中添加关于模板路径的路径。解决了。即使您没有在 setting.py 中添加模板路径，pycharm 仍然可以将“包含文件”链接到确切位置。并毫无错误地运行 django 项目......我花了 3 天......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-10T14:43:24.120

如果您不想弄乱`template tags`,`load`和`include`选项，还有另一种方法可以做到这一点：

> 使用您的参数显式渲染模板，将其存储为字符串，然后作为上下文渲染到主模板中。

```
from django.template.loader import render_to_string 
```

```
 def get_context_data(self, **kwargs):
        ctx['loader'] = render_to_string('common/loader.html', {'loader': randint(0, 15)})
        return ctx 
```

# html - 即使没有设置高度也会出现垂直滚动条

> ID：15933780
> 
> 赞同：1
> 
> 时间：2013-04-10T18:38:22.443
> 
> 标签：html, css, overflow

如果您将下面的文件保存为 html 格式，您将出现一个垂直滚动条。由于高度为

```
<div class="tabData" id="tab3data" style="visibility: visible;"> 
```

没有设置，它不应该自动扩展以适应所有内容吗？

```
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style type="text/css">
        .tabData
        {
            width: 100%;
            background-color: Yellow;
            overflow: auto;
        }
    </style>
</head>
<body>
    <div class="tabData">
        <div style="height: 390px; background-color: Green;">
            <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br />
            </div> 
        Hello
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:08:51.043

由于您已经了解基于浏览器的开发人员工具，因此我假设您已经检查了有问题的 div。我假设在检查后您查看了为该 div 明确定义的样式。我还假设您还检查了可能影响该 div 的继承样式。

难道有问题的 div 不是具有滚动条的元素吗？我的意思是，也许你有另一个元素包裹在 div 周围，它产生了一个滚动条。或者也许 div 中有一个元素正在生成滚动条。换句话说，问题实际上可能不是有问题的 div。

正如已经提到的，除非我们看到实际的代码，否则其他人很难提供帮助。如果您只想摆脱滚动条，您可以按照@Adriano 的建议进行操作，并将溢出设置为无。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:49:18.250

您的内部有一个内联`height: 390px;`，`div`其`.tabData`内容不适合该高度，因此在您的 CSS 中`overflow: auto;`的父级 ( `tabData`) 上使其呈现垂直滚动。

如果您想保留当前结构，这里有一个修复：
**修复**：http: [//jsfiddle.net/QvMfJ/](http://jsfiddle.net/QvMfJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:22:00.910

您有一个父容器`div.tabData`，其高度由子元素的总高度决定，其中有两个，内部`<div>`块和包含单词“Hello”的匿名块。

内层`div`的高度为 390px，“Hello”行占据了大约 1.5em。因此，黄色背景的父元素刚好能将390px的内部div和一行文字围起来。

如果您向内部 div 添加足够多的内容，文本最终会流到具有绿色背景的内部 div 之外。这就是浏览器默认的工作方式，无论如何它们都会尝试使文本可见。

但是，就父元素而言，它具有基于 390px + height-of-1-line-of-text 的正确高度。当文本溢出固定高度的子元素时，浏览器不会重新计算块元素的高度。

如果继续往内部 div 中添加更多文本，它会开始流过父元素中的任何文本，最终会溢出父容器并导致出现一个垂直滚动条，因为您`overflow: auto`在父元素上设置。

另一方面，如果您没有固定内部 div 的高度，您会得到预期的行为，内部 div 扩展以包含其所有内容，而父 div 扩展以包含内部 div 和一行文本。

**例子**

如果您尝试以下小提琴[http://jsfiddle.net/audetwebdesign/s3bnJ/](http://jsfiddle.net/audetwebdesign/s3bnJ/)并调整水平宽度，您可以看到来自内部 div 的文本从内部 div 流出并进入父 div，最终，你会看到滚动条出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T22:46:12.507

如果您希望它扩展以填充必要的空间，请尝试使用 min-height ，或者如果您不想增长它或使用滚动条，请尝试使用 overflow:hidden 。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T15:34:45.250

用溢出设置div：无；

更新：

根据 div 内容的显示方式，您可以尝试：overflow:hidden;。例如，如果出现滚动条但您不必使用它来查看内容，则“隐藏”参数将解决问题。

# hadoop - hadoop 问题

> ID：15933782
> 
> 赞同：2
> 
> 时间：2013-04-10T18:38:30.723
> 
> 标签：hadoop

我想验证以下示例问题的答案

## 问题 1

您使用 hadoop fs -put 命令将 sales.txt 添加到 HDFS。该文件足够小，可以放入单个块中，该块被复制到集群中的三个节点。在这些节点之一发生故障后，集群何时以及如何处理复制？

A. 集群不会尝试重新复制这个块。
B. 此块将立即重新复制，并且在此过程中集群上的所有其他 HDFS 操作将停止。
C. 在管理员手动删除并重新创建文件之前，该块将保持复制不足。
D. NameNode 根据从 DataNode 收到的块报告确定文件复制不足后，将自动重新复制文件。

我相信答案是**D**

## 问题2

您需要编写代码来执行需要几个步骤的复杂计算。您已决定将这些作业链接在一起，并为存储中间计算结果的键开发自定义复合类。该键必须实现哪个接口？

A. 可写
B. 可转移
C. CompositeSortable
D. WritableComparable

我相信答案是**D**

## 问题 3

您正在开发一个使用一年作为密钥的应用程序。哪种 Hadoop 提供的数据类型最适合代表一年的键？

A. 文本
B. IntWritable
C. NullWritable
D. BytesWritable
E. 这些都不合适。您需要实现一个自定义键。

我相信答案是**B**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T01:50:11.620

1 - 正确，您可以在任何描述 HDFS 容错的文献中找到这一点。*Hadoop*的第 3 章：权威指南中有一节描述了客户端将数据写入 HDFS 的过程，并描述了这个失败过程是如何进行的。

2 - 正确，键必须是可写可比较的，以便它们不属于可能包括数组和其他不可比较类型的其他类别。

3 - 正确，一年是一个数值，所以在所有这些中，*最合适*的选项是可写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T21:28:29.963

Q3 可能非常棘手，但很可能是 B。

最好使用的一个是`ShortWritable`因为它需要 2 个字节，数字范围从`-32000 ~ +32000`. 因此可以使用`BytesWritable`并且只分配 2 个字节。需要 4 个字节，`IntWritable`范围从`-2 billion to +2 billion`，这只是浪费额外的 2 个字节。

即使您使用`Text`，它的字节大小（4 个字节，因为它有 4 个字符）与`IntWritable`. 但是，如果您正在`Int`使用 Key 进行任何相关操作，那么我认为`IntWritable`会更好。

我认为答案是 B 的唯一原因是许多 Java 开发人员总是使用 Int 而不管数字范围如何，并且很少使用`Short`。所以这个问题是“取决于”。如果我没有对键执行任何与整数相关的操作，那么我将使用`Bytes`，否则我将使用`IntWritabl`e。如果我必须选择一个答案，那么 B.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T01:56:32.550

对于 Q 1 和 2，答案 D 是正确的，但对于 Q 3，我认为是 D，我可能错了。

# objective-c - xcode 4.6.1 中的预期标识符或“（”

> ID：15933783
> 
> 赞同：0
> 
> 时间：2013-04-10T18:38:31.237
> 
> 标签：objective-c, xcode

我正在尝试获取一个添加按钮来将行添加到表中，然后可以对其进行编辑。我得到了第 10、17 和 30 行的预期标识符或“（”。这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    UILabel *lblName = (UILabel *)[cell viewWithTag:100];
    [lblName setText:[intervalArray objectAtIndex:[indexPath row]]];
    return cell;
}

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                   reuseIdentifier:CellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryNone;
}

if ([indexPath section]) == 0 {
    UITextField *workoutTextField = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 185, 30)];
    workoutTextField.adjustsFontSizeToFitWidth = YES;
    workoutTextField.textColor = [UIColor blackColor];
    if ([indexPath row] == 0) {
        workoutTextField.placeholder = @"...";
        workoutTextField.keyboardType = UIKeyboardTypeEmailAddress;
        workoutTextField.returnKeyType = UIReturnKeyNext;

 }}

// Configure the cell...

return cell; 
```

我已经尝试了您的建议，他们消除了所有错误，但我仍然无法使用按钮将行添加到我的表中。任何有关如何向表中添加行的建议将不胜感激，这是我的第一个 iOS 应用程序，我对一般编程相当陌生。感谢所有的帮助！我正在使用 OS X 10.8.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:42:22.020

我认为您在这里放错了括号：

```
if ([indexPath section]) == 0 { 
```

你的意思是：

```
if ([indexPath section] == 0) { 
```

这里的方括号包含一个*方法调用*或*消息发送*到`indexPath`；括号括起您正在进行的*条件*或*比较*`[indexPath section]`，即检查调用结果是否等于零。

**编辑：**您也可能过早地有一个闭合花括号 - 第`}`7 行关闭了您的整个方法实现`-tableView:cellForRowAtIndexPath:`。您可能希望将其一直移动到您的`return cell;`声明下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:45:31.763

第 10 行和第 17 行的条件句和第`return`30 行的语句属于什么方法？它们似乎卡在您的实现文件中，这使编译器感到困惑。

简单地移动结束的大括号`-tableView:cellForRowAtIndexPath:`将修复错误，但由于您在第 7 行返回一个值（结束方法的执行），其余代码将不会做任何事情。

# java - hql执行异常

> ID：15933795
> 
> 赞同：0
> 
> 时间：2013-04-10T18:38:58.677
> 
> 标签：java, hibernate, annotations, hql

我试图将表映射到实体类并对其使用 hql 查询。我在 Eclipse 中工作，我尝试在 Hibernate 控制台中执行 HQL 查询。查询按预期给出了结果，但是当我部署我的应用程序时出现错误：

```
 org.hibernate.exception.SQLGrammarException:
could not initialize a collection: [com.alu.mdm.entities.firmware.FirmwareImage.properties#3014]

     ORA-00904: "PROPERTIES0_"."FIRMWARE": invalid identifier 
```

当我看到启用 sql 的日志时，我发现查询是这样的：

```
select properties0_.FIRMWARE_ID as FIRMWARE4_23_1_,
properties0_.firmware as firmware1_,
properties0_.firmware as firmware19_0_,
properties0_.NAME as NAME19_0_,
properties0_.VALUE as VALUE19_0_ 
from FW_PROPERTIES properties0_ 
where properties0_.FIRMWARE_ID=? 
```

我有两张表，一张是 FIRMWAREIMAGE，另一张是 FW_PROPERTIES，看起来像这样

```
@Table(name = "FIRMWARE_IMAGE",uniqueConstraints=
@UniqueConstraint(columnNames = {"IMAGE_NAME"}))
@org.hibernate.annotations.Table(appliesTo = "FIRMWARE_IMAGE")
public class FirmwareImage extends PersistentObject {

@Id
@Column(name = "ID")
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="FIRMWARE_IMAGE_SEQUENCE")
private Long id;

@Column(name = "IMAGE_NAME", nullable = false)
private String name;

@OneToMany(fetch = FetchType.EAGER)
@Cascade({CascadeType.ALL, CascadeType.DELETE_ORPHAN})
@JoinColumn(name="FIRMWARE_ID")
@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region = "com.alu.mdm.entities.firmware")
private Set<FirmwareImageProperty> properties  = new LinkedHashSet<FirmwareImageProperty>(); 
```

//一些getter和setter

我的 FW_PROPERTIES 实体类就像

```
@Entity
@Table(name="FW_PROPERTIES", uniqueConstraints=@UniqueConstraint(columnNames=       {"FIRMWARE_ID","NAME","VALUE"}))
@org.hibernate.annotations.Table(appliesTo="FW_PROPERTIES")
public class FirmwareImageProperty extends Persistence implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 5574911511734379510L;

@Id
@PrimaryKeyJoinColumns(value={@PrimaryKeyJoinColumn(name="FIRMWARE_ID"), @PrimaryKeyJoinColumn(name="NAME")})

@ManyToOne(optional=true)
@JoinColumn(name="FIRMWARE_ID" , nullable=false)
@ForeignKey(name="FK_FW_PROPERTIES_FIRMWARE_ID")
private FirmwareImage firmware;

@Column(name="NAME")
private String name;

@Lob
@Column(name="VALUE")
private String value;

  //Some getters and setters 
```

我的 HQL 查询是“SELECT fw FROM FirmwareImage fw left join fw.properties as fp”

我无法弄清楚为什么我会得到那个例外。请有人提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:03:21.060

例如，将 @annotation 移动到 getter

```
private String name;

@Column(name="NAME")
public String getName(){
     return name;
} 
```

# opengl - OpenGL 对不完整类型“struct GLUquadric”的无效使用

> ID：15933797
> 
> 赞同：1
> 
> 时间：2013-04-10T18:39:03.550
> 
> 标签：opengl

在下面的代码段中，我尝试使用 glunewquadric()，但我不断收到一条错误消息，提示“无效使用不完整类型 'struct GLUquadric'”。据我所知，我已经做了我应该做的一切。我究竟做错了什么？

```
GLUquadricObj* quad;

glClearDepth(1);
glClearColor(0.0, 0.0, 0.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

glLightfv(GL_LIGHT1, GL_POSITION, LightPosition);

quad = gluNewQuadric(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:54:16.907

这不是 OpenGL 问题。基本上，您的编译器会告诉您，它不知道`GLUquadric`看起来如何（不完整类型）。您可以将其用作指针，但此错误表明您正试图在某处取消引用它。

要么您忘记包含包含结构定义的标头（在您的情况下可能是`GL/glu.h`），要么您尝试定义一个`GLUquadric`不是指针的变量。

* * *

顺便说一句：GLU 不是 OpenGL 的一部分。

# c++ - 线程安全的 TBB 可扩展分配器

> ID：15933798
> 
> 赞同：2
> 
> 时间：2013-04-10T18:39:09.070
> 
> 标签：c++, thread-safety, tbb

最近我从系统内存管理（malloc/free）切换到英特尔的 TBB 可扩展分配器。问题是如果它是线程安全的，我找不到任何信息。整个 TBB 是围绕线程构建的，所以看起来合乎逻辑，但没有具体证据，我不想假设这样的事情。然而，我也不想进行任何不必要的同步。有人有这方面的信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:09:52.243

那么这个源[Intel Threading Building Blocks](http://www.cs.rice.edu/~johnmc/comp522/lecture-notes/COMP522-2012-Lecture9-TBB.pdf)听起来更直接（参见“TBB Scalable Allocator”页面）-

> 每个线程都有自己的私有堆
> 
> – 大小隔离的 bin 提高了局部性
> – 私有堆减少了同步开销和错误共享

更新：从[这里](http://scott.wolchok.org/498/lecture17)-

> TBB 提供了一个具有每个线程池的可扩展分配器。它*可能*仍有虚假共享。
> 
> ```
>  example: false sharing could matter in pipelining.
> 
>    TBB also provides a cache-aligned allocator, which guarantees
>    that any two things you've allocated will never experience
>    false sharing. The downside is that it has larger memory
>    pressure. This is accomplished by making the minimum allocation
>    N cache lines, where N is a small integer.
> 
>    In the book, the conventional wisdom is to start with the
>    scalable allocator and see if switching to the cache-aligned
>    allocator speeds things up. 
> ```

但是错误共享是关于减速而不是线程安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:58:13.707

根据您链接的手册：

> 除非另有说明，否则该库的线程安全规则如下：
> 
> 两个线程可以在不同的对象上同时调用方法或函数，但不能在同一个对象上调用。两个线程在同一个对象上同时调用方法或函数是不安全的。类的描述与此约定不同。例如，并发容器更自由。从本质上讲，它们确实允许对同一个容器对象进行一些并发操作。

使用可伸缩分配器，这意味着两个线程不能同时释放相同的内存，这不足为奇。

# multithreading - Openmp 创建了许多线程，但似乎只使用一个内核

> ID：15933801
> 
> 赞同：2
> 
> 时间：2013-04-10T18:39:20.337
> 
> 标签：multithreading, openmp

我正在尝试使用 OpenMP 在 Fortran 中并行化 for 循环。

它似乎工作正常，它肯定会创建正确数量的线程并且比原始串行版本快得多。

但是，%CPU 使用率很大，让我担心线程只集中在一个或两个内核上（与我在网上看到的每个线程都有自己的 PID 的示例相反）。

```
$ export omp_num_threads=12
$ nohup ./z90nr&
$ ps aurx
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
ty       25350 7771  0.0 1564928 26868 pts/9   Rl   14:18 169:40 ./z90nr 
```

这是一个问题吗？如果是，我该如何解决？我尝试设置 GOMP_CPU_AFFINITY，这并没有解决问题。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:11:22.067

不; 这只是线程和进程之间的区别。

[线程](http://en.wikipedia.org/wiki/Thread_%28computing%29)都存在于一个[进程中](http://en.wikipedia.org/wiki/Process_%28computing%29)；所以只有一个PID。大的 %CPU 就是这些数字的报告方式；>100% 这里表示肯定使用了不止一个 CPU。该`top`命令在这里很有帮助；如果您运行`top -H`，您应该能够单独查看每个线程，如果您`1`在运行时按下，您将能够看到每个 CPU 的 CPU 使用情况，这也有助于分解所有正在运行的线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:33:16.137

请注意，OpenMP 将其所有环境变量定义为全部大写，并且在 Unix 上环境是区分大小写的，例如`OMP_NUM_THREADS`与`omp_num_threads`. 在我看来，您的程序可能运行超过 12 个线程，考虑到 7771% 的 CPU 使用率，我会说 80 个线程（您是否在具有 8 个 10 核 CPU 的系统上运行？）。默认情况下`libgomp`（GNU OpenMP 运行时）使用与可用逻辑 CPU 数量一样多的线程。

您可以通过or选项指示`ps`在每个进程中显示各个 LWP ，例如。对于所有 LWP 具有相同值的字段将替换为破折号，例如：`H``m``ps auxrm``m`

```
USER     PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
hristo   529  188  3.9 3078268 2574692 pts/21 -   15:16   0:03 ./omp_memset2
hristo     - 55.5    -      -     - -        Rl+  15:16   0:01 -
hristo     -  0.0    -      -     - -        Sl+  15:16   0:00 -
hristo     - 39.0    -      -     - -        Rl+  15:16   0:00 -
hristo     - 36.0    -      -     - -        Rl+  15:16   0:00 -
hristo     - 56.5    -      -     - -        Rl+  15:16   0:01 - 
```

这些字段具有`H`实际值，但由于它们是在不同的时间点采样的，因此值可能不同（并非所有 LWP 共享相同的进程页表，因此对于常驻集大小等内容不能具有不同的值）。这也是为什么单个`%CPU`值加起来不等于`%CPU`整个过程的值的原因。

# python - 如何将值从一个列表传输到另一个列表？

> ID：15933807
> 
> 赞同：1
> 
> 时间：2013-04-10T18:39:27.667
> 
> 标签：python, python-2.7

假设您有 3 个列表

```
List1 = [['_', '_', '_'], ['_', '_', '_'], ['_','_','_']]
List2 = [['Test', 'Word', 'Sudo'], ['Fu', 'Lu', 'Shou'], ['Ham', 'Spam', 'Eggs']]
List3 = [3, 5, 7,] 
```

使用 from 的值`List3`，我想`'Fu'`从`List2[0][2]`into转移`List1[0][2]`，因为 的第一个值`List3`是 3，这意味着取第三个值（从 0 开始计算它的 list2[0][2]）`List2`并将其放入同一个位置作为`List1`

使用 中的其他值的最终结果`List3`应该是：

```
List1 = [['_', '_', 'Fu'], ['_', 'Shou', '_'], ['Spam','_','_']] 
```

我已经用了几个小时但无法让它工作！

这是怎么做到的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T18:47:05.520

```
In [184]: List1 = [['_', '_', '_'], ['_', '_', '_'], ['_','_','_']]

In [185]: List2 = [['Test', 'Word', 'Sudo'], ['Fu', 'Lu', 'Shou'], ['Ham', 'Spam', 'Eggs']]

In [186]: List3 = [3, 5, 7,]

In [187]: for x in List3:
    q,r=divmod(x,3)
    List1[q][r]=List2[q][r]
   .....:     

In [188]: List1
Out[188]: [['_', '_', '_'], ['Fu', '_', 'Shou'], ['_', 'Spam', '_']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:59:04.613

```
>>> List1 = [['_', '_', '_'], ['_', '_', '_'], ['_','_','_']]
>>> List2 = [['Test', 'Word', 'Sudo'], ['Fu', 'Lu', 'Shou'], ['Ham', 'Spam', 'Eggs']]
>>> List3 = [3, 5, 7,]
>>> List4 = [item for sublist in List1 for item in sublist]
>>> List5 = [item for sublist in List2 for item in sublist]
>>> for val in List3:
...     List4[val] = List5[val]
>>> List1 = [ List4[i:i+3] for i in xrange(0,len(List4),3) ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:00:10.707

```
# If you must have original data as lists of lists:
def flat(lst):
    ret = []
    for x in lst:
        if hasattr(x, '__iter__'):
            ret += flat(x)
        else:
            ret.append(x)
    return ret

List1 = [['_', '_', '_'], ['_', '_', '_'], ['_','_','_']]
List2 = [['Test', 'Word', 'Sudo'], ['Fu', 'Lu', 'Shou'], ['Ham', 'Spam', 'Eggs']]
List3 = [3, 5, 7,]

lst1 = flat(List1)
lst2 = flat(List2)

# Now given flat lists, you can just do this:
def splitby(x, n=3):
    i = iter(x)
    while True:
        yield [next(i) for _ in range(n)]

for i in List3:
    lst1[i] = lst2[i]

print list(splitby(lst1)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T19:10:23.997

```
for index in List3:
    first, second = index/3, index%3 
    List1[first][second] = List2[first][second]
print List1 
```

# javascript - Javascript 闭包

> ID：15933810
> 
> 赞同：0
> 
> 时间：2013-04-10T18:39:32.997
> 
> 标签：javascript, closures

我正在尝试学习 JS 并且关于 javascript 闭包我有一个问题 -

```
function fooOuter(){
   var a = 10;
   var b = 20;
   return function fooinner(x){
      return a + b + x;
   };
} 
```

这是否意味着 Javascript 中的内部函数存储对位于同一范围内的所有变量的引用。即在这种情况下，fooinner 是否存储变量a 和b 的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:42:44.017

实际上，是的。运行时创建了一个所谓的“作用域链”，链中的链接只有在不再被引用时才会被释放。 `fooinner()`有自己的作用域，有一个“父作用域”链接到 的作用域`fooOuter()`，依此类推——这就是`fooinner()`作用域链。

因此，由它使用`fooinner()`和在其外部定义的变量将继续存在，至少只要该特定函数对象存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:42:09.440

fooInner 将为返回的每个 fooInner 实例保留 a 和 b 的值。换句话说，每个函数将等于 10 + 20 + x。实际上，它是一个闭包和一个部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:43:00.833

这是我从培训中得到的一些事实。我希望这有帮助

> 创建函数时，会为其分配一个 [[scope]] 属性，该属性引用外部词法范围的变量并防止它们被垃圾收集。因此，闭包是在函数创建时形成的。
> 
> 闭包引用变量而不是值。由于每个函数调用都发生在唯一的执行上下文中，因此我们保证参数变量在连续调用中的唯一性。
> 
> 需要注意的是，每个函数的闭包创建过程都是相同的，每个函数都会创建一个闭包

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:43:33.397

是的，它几乎可以做到这一点。

简单地说，*闭包*就是一个可以访问*其父上下文**数据*的上下文。在 Stackoverflow 或 Web 上都有很多很好的解释。

 *但无需详细说明，当你的内部函数被解析时，ECMAscript 解释器在内部设置了一个到外部函数的链接（我们分别`fooinner`称其为*Activation Object和**Lexical Environment Record*）。*

# strpos - 使用 PHP 提取前 2 个句子

> ID：15933815
> 
> 赞同：0
> 
> 时间：2013-04-10T18:39:46.037
> 
> 标签：strpos

我想出了这段代码，它从文本中提取第一句话。但是我需要提取前 2 个句子，但我不知道该怎么做。有任何想法吗？

```
$input = get_field('fl_description');

$pos = strpos($input, '.' , 1);
$output = substr($input, 0, $pos+1);

echo $output; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:42:14.410

尝试使用带有分隔符“.”的爆炸方法。将限制设置为 2，将创建包含 2 个元素的数组，其中前 2 个句子。

> $arrayOfSentences = explode ('.' , $input ,2 );
> 
> 回声 $arrayOfSentences[0]+" "+$arrayOfSentences[1];

更多关于爆炸方法： http: [//php.net/manual/pl/function.explode.php](http://php.net/manual/pl/function.explode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:42:25.307

```
$input = get_field('fl_description');
$pos = strpos($input, '.' , 1); 
$pos = strpos($input, '.' , $pos+1); 
$output = substr($input, 0, $pos+1);
echo $output; ' 
```

# jquery - jquery 在输入框焦点/模糊上的奇怪行为

> ID：15933817
> 
> 赞同：0
> 
> 时间：2013-04-10T18:39:47.740
> 
> 标签：jquery, css

我是 jQuery 的新手，在使用 jQuery css 属性时，我发现输入框在焦点/模糊上的奇怪行为。

我的代码是这样的

```
<body>

    Enter something <input type="text" id="text" />

<script>
    $(document).ready(function(){

    $("#text").focus(function(){
                $("#text").css("border","5px");
            } );

            $("#text").blur(function(){
                $("#text").css("border-color","#555");
            } );

    } );

    </script>
</body> 
```

模糊时效果最差，因为整个输入框从那里消失了。我尝试在 jQuery API 文档和其他一些来源上查找，但没有找到任何结果。如果我做错了什么，请告诉我，提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:45:08.560

这个作品 - - [**小提琴**](http://jsfiddle.net/mohammadAdil/Fj8XZ/1/)

```
$(document).ready(function () {

    $("#text").focus(function () {
        $("#text").css("border", "5px solid black");
    });

    $("#text").blur(function () {
        $("#text").css("border", "1px solid red");
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:46:16.537

```
$("#text").focus(function(){
   $("#text").css("border","5px solid");
                                  ^  should be set
}); 
```

这是[jsiddle](http://jsfiddle.net/aDJje/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:52:29.167

[小提琴](http://jsfiddle.net/8vC3R/)——你的焦点事件应该只指定你想要改变的属性。

```
$("#text").css("border-width","5px"); 
```

这实际上是一个 css 问题而不是 jquery。由于您刚刚指定了边框（这是一个 css 速记属性）并且只给了它一个参数，因此您覆盖了内置 css 的浏览器。

# hadoop - 无法使用自定义可执行文件运行 EMR Hadoop Streaming 作业

> ID：15933818
> 
> 赞同：1
> 
> 时间：2013-04-10T18:39:48.273
> 
> 标签：hadoop, amazon-web-services, hadoop-streaming, amazon-emr, emr

**编辑：**

查看 namenode 日志，我注意到定期引发异常。它可能是相关的吗？

```
2013-04-10 19:23:50,613 WARN org.apache.hadoop.security.ShellBasedUnixGroupsMapping (IPC Server handler 43 on 9000): got exception trying to get groups for user job_201304101854_0005
org.apache.hadoop.util.Shell$ExitCodeException: id: job_201304101854_0005: No such user

    at org.apache.hadoop.util.Shell.runCommand(Shell.java:255)
    at org.apache.hadoop.util.Shell.run(Shell.java:182)
    at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375)
    at org.apache.hadoop.util.Shell.execCommand(Shell.java:461)
    at org.apache.hadoop.util.Shell.execCommand(Shell.java:444)
    at org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getUnixGroups(ShellBasedUnixGroupsMapping.java:78)
    at org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getGroups(ShellBasedUnixGroupsMapping.java:53)
    at org.apache.hadoop.security.Groups.getGroups(Groups.java:79)
    at org.apache.hadoop.security.UserGroupInformation.getGroupNames(UserGroupInformation.java:1037)
    at org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.<init>(FSPermissionChecker.java:50)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkPermission(FSNamesystem.java:5218)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkTraverse(FSNamesystem.java:5201)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getFileInfo(FSNamesystem.java:2030)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.getFileInfo(NameNode.java:850)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:573)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1393)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1389)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1387)
2013-04-10 19:23:50,614 INFO org.apache.hadoop.security.ShellBasedUnixGroupsMapping (IPC Server handler 43 on 9000): add job_201304101854_0005 to shell userGroupsCache
2013-04-10 19:23:50,614 WARN org.apache.hadoop.security.UserGroupInformation (IPC Server handler 43 on 9000): No groups available for user job_201304101854_0005
2013-04-10 19:23:55,886 WARN org.apache.hadoop.security.UserGroupInformation (IPC Server handler 46 on 9000): No groups available for user job_201304101854_0005 
```

我们制作了自定义二进制文件来执行 map 和 reduce，使用常识“cat 文件 | map | sort | reduce > output”模式测试了它们的正确操作。我们确保静态编译二进制文件以引入尽可能多的依赖项，并且我们还通过手动将二进制文件上传到主服务器来确认二进制文件在 Amazon 的 EMR AMI 上运行。如果相关，我们选择的语言是 Haskell，编译结果是一个简单的、本机的、二进制可执行文件。

以最简单的情况为例：

```
bin/hadoop jar contrib/streaming/hadoop-streaming.jar \
    -input s3n://path/to/input \
    -output s3n://path/to/output \
    -mapper "s3n://path/to/Program map" \
    -reducer "s3n://path/to/Program reduce" 
```

这项工作确实开始了，但它卡在地图 0% 阶段并且没有让步。它不会从那里继续前进，并且没有任何日志似乎表明任何有用的东西。由于在 600 秒内“未报告”，每个地图任务都会被杀死。每个映射器都显示如下状态作为其状态，同时显示 0% 完成：

```
s3n://path/to/file.csv.gz:0+38175575 
```

计数器部分显示了从 s3n 读取的类似 17.5KB 的内容。

如果我们现在将作业修改为以下内容以进行测试：

```
bin/hadoop jar contrib/streaming/hadoop-streaming.jar \
    -input s3n://path/to/input \
    -output s3n://path/to/output \
    -mapper s3n://elasticmapreduce/samples/wordcount/wordSplitter.py \
    -reducer aggregate 
```

然后映射器阶段完成 100%，但减速器引发异常：

```
java.io.IOException: exception in uploadSinglePart
    at org.apache.hadoop.fs.s3native.MultipartUploadOutputStream.uploadSinglePart(MultipartUploadOutputStream.java:163)
    at org.apache.hadoop.fs.s3native.MultipartUploadOutputStream.close(MultipartUploadOutputStream.java:219)
    at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:70)
    at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:96)
    at org.apache.hadoop.mapred.TextOutputFormat$LineRecordWriter.close(TextOutputFormat.java:109)
    at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.close(ReduceTask.java:475)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:539)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:429)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.RuntimeException: exception in putObject
    at org.apache.hadoop.fs.s3native.Jets3tNativeFileSystemStore.storeFile(Jets3tNativeFileSystemStore.java:128)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:83)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
    at org.apache.hadoop.fs.s3native.$Proxy3.storeFile(Unknown Source)
    at org.apache.hadoop.fs.s3native.MultipartUploadOutputStream.uploadSinglePart(MultipartUploadOutputStream.java:160)
    ... 12 more
Caused by: Status Code: 403, AWS Service: Amazon S3, AWS Request ID: 8220819721FFE29E, AWS Error Code: AccessDenied, AWS Error Message: Access Denied, S3 Extended Request ID: TekkBZzgaBlK0e8SkoC7bcBsu1w7Nbpy2U7hPCGp5IPrrsqaPTxUg7QQ09xTXRYC
    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:619)
    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:317)
    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:170)
    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2943)
    at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1123)
    at org.apache.hadoop.fs.s3native.Jets3tNativeFileSystemStore.storeFile(Jets3tNativeFileSystemStore.java:121)
    ... 20 more 
```

令人沮丧的是，例如，在相同类型的 EMR 集群上运行 hive 似乎在 S3 上创建新的外部映射表和文件时没有任何问题。

尝试了几个想法后，如果有人能给我们正确的方向以使我们的设置正常工作，我将不胜感激。

谢谢你，OA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:55:18.303

我认为这很可能是您的问题：

```
-mapper "s3n://path/to/Program map" 
```

空格很可能会给您带来问题。我可能会尝试构建两个单独的二进制文件，一个用于 map，一个用于 reduce，您可以直接调用它们而不是传递参数。至少这将帮助您查明问题。

否则，这听起来像是 S3 许可或 mime 类型问题。我会检查您的存储桶的权限，以验证您用于 EMR 作业的凭据是否可以访问该存储桶。

一旦你确定在那里，我会检查二进制文件本身的权限和属性；当 S3 mime 类型设置不正确时，我遇到了奇怪的问题。例如，这里是 wordSplitter 信息：

```
$ s3cmd info s3://elasticmapreduce/samples/wordcount/wordSplitter.py
s3://elasticmapreduce/samples/wordcount/wordSplitter.py (object):
File size: 294
Last mod:  Wed, 29 Feb 2012 01:50:25 GMT
MIME type: text/x-python
MD5 sum:   f5b4829658cfbcd5fa5eb32c58163fa8 
```

您的二进制文件可能默认为某种阻碍执行的 mime 类型。

# javascript - 使用 JavaScript 库为 SVG 组对象设置动画

> ID：15933822
> 
> 赞同：1
> 
> 时间：2013-04-10T18:40:04.837
> 
> 标签：javascript, animation, d3.js, svg

我创建了一个 SVG 组对象并附加了包含 HTML 文本的矩形和 foreignObject-SVG 元素。我定义了一个动画函数，该函数在组的“mousedown”事件上调用。动画函数在由 id 指定的元素上进行转换。

这是不起作用的部分。如果我使用：

```
d3.select("#group").transition() 
```

我可以看到组的 x 坐标发生变化，但组内的元素没有移动。如果我将#Id 设置为 foreignObject 的 Id 或它们将移动的矩形。所以我假设我必须在“组的每个子元素”上调用转换，我不知道该怎么做。

这是我准备的一个例子：http: [//jsfiddle.net/YxfMH/](http://jsfiddle.net/YxfMH/)

我也想知道如何用鼠标拖动“整个组”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:03:36.643

SVG[`<g>`](http://www.w3.org/TR/SVG/struct.html#Groups)元素没有 x 或 y 属性。你可以像设置一个名为'foo'的属性一样设置这些东西，但它不会有任何效果。如果要移动组，则需要在其上设置平移变换，例如 transform="translate(10, 10)"

```
// Add a group to the canvas
var group = svg.append("svg:g")
    .attr("id", "group")
    .attr("transform", "translate(10, 10)")
    .on("mousedown", animate); 
```

和

```
function animate() {
    d3.select("#group").transition()
    .duration(1000)
    .attr("transform", "translate(100, 100)")
}; 
```

是你需要改变的位来得到[这个......](http://jsfiddle.net/longsonr/YxfMH/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T16:25:12.210

您可以直接访问 svg 元素的矩阵以更改位置或旋转

看这个例子“[不明飞行物动画](http://www.janvas.com/illustrators_designers_developers/projects/janvas2D_web/examples_EN.php?exampleName=ufo_animation_EN)”

[http://www.janvas.com/illustrators_designers_developers/projects/janvas2D_web/examples_EN.php?exampleName=ufo_animation_EN](http://www.janvas.com/illustrators_designers_developers/projects/janvas2D_web/examples_EN.php?exampleName=ufo_animation_EN)

# jsp - 访问网页中存储的图像

> ID：15933824
> 
> 赞同：1
> 
> 时间：2013-04-10T18:40:06.890
> 
> 标签：jsp

我允许用户在我的网站上上传图片，这些图片存储在我桌面上的文件夹中。现在，当我尝试在未显示的 Jsp 页面上显示这些图像时，我使用的是绝对路径但没有用...

请有人指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:48:41.507

您必须设置两件事：*上传*图像的方式和*下载*图像的方式。当您的 HTML 页面包含`<img>`标签时，会指示浏览器执行 HTTP GET 并检索由 URL 命名的内容。

根据您的问题，我想上传部分不是问题。我唯一建议的是不要使用您的桌面来保存图像，而是使用专用目录（这对于保护私人文件以及备份用户的内容很有用）。

然后，您必须使您的目录可以从 HTTP 服务器访问。您在这里有不同的选择，让我举两个：

1.  一个专门的 servlet（因为您使用 JSP，这意味着 Java 运行时可用）被映射到，例如`/img/{id}`，其目的是从文件系统读取图像并将其字节写入其输出流
2.  专门部署一个单独的 HTTP 服务器（如 Apache、Lighttpd、NGinX）来传递您的静态内容，并相应地编写您的 URL（例如主机将是`cdn.example.com`）

# java - Spring Security：登录认证控制器

> ID：15933826
> 
> 赞同：0
> 
> 时间：2013-04-10T18:40:11.483
> 
> 标签：java, spring, spring-mvc, spring-security

当身份验证失败以及一些错误消息时，我正在尝试重定向回登录页面。我想知道我们如何将某种参数传递给`/login`说`security-context.xml`这是未经身份验证的，然后附加一些错误文本？

```
<security:form-login login-page="/login"
                     username-parameter="email"
                     password-parameter="password"
                     default-target-url="/member/"
                     authentication-failure-url="/login"/> 
```

`/login`实际上是一个返回ModelAndView的Controller。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:44:26.373

尝试简单地将查询参数附加到`authentication-failure-url`这样的：

```
<security:form-login login-page="/login"
                     username-parameter="email"
                     password-parameter="password"
                     default-target-url="/member/"
                     authentication-failure-url="/login?error=true" /> 
```

然后，您的登录处理程序方法可以接收该可选查询参数，并相应地操作响应。这些方面的东西：

```
@RequestMapping(value = "/login", method = RequestMethod.GET)
public String getLoginPage(
        @RequestParam(required = false) boolean error,
        ModelMap model) {

    model.put("error", error ? "You have entered an invalid username or password!" : "");

    return "loginpage";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:17:54.257

您还可以使用 AuthenticationFailureHandler，它会根据您将收到的 AuthenticationException 做出不同的反应。

```
<security:form-login login-page="/login"
    username-parameter="email"
    password-parameter="password"
    default-target-url="/member/" 
    authentication-failure-handler-ref="myAuthenticationFailudeHandler"/> 
```

例如，它可以将用户重定向到 .../login?errorCode=errorCode1

然后您可以修改控制器以响应不同的错误代码：

```
@RequestMapping(value = "/login", method = RequestMethod.GET)
public String getLoginPage(
        ..., 
        @RequestParam(value="errorCode", required = false) String errorCode, 
        Model model, 
        ... ) {
    if (errorCode != null) {
        model.put("error", translateErrorCode(errorCode));
    }
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T06:14:32.210

我通常这样做

```
<security:form-login login-page="/" authentication-failure-url="/myapp/auth/login?error=true" default-target-url="/myapp/main/default"/> 
```

和控制器：

```
@RequestMapping(value = "/auth/login", method = RequestMethod.GET)
public ModelAndView indexp(@RequestParam(value = "error", required = false) boolean error, ModelMap model, Principal principal) {
ModelAndView mv = new ModelAndView("view");
// return your view....
} 
```

该参数有助于显示错误消息。

# c# - 为什么/何时应该使用 WebSecurity.cs

> ID：15933827
> 
> 赞同：0
> 
> 时间：2013-04-10T18:40:11.900
> 
> 标签：c#, webmatrix, formsauthentication

websecurity.cs 的目的是什么，如果我可以使用 System.Web.Security 中的 FormAuthentication 和 Membership 类来做到这一点，为什么我需要一个类来做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:43:09.180

`WebSecurity`是为 ASP.NET 网页开发的。它是一个更简单的 API，用于访问常规`SimpleMembershipProvider`.

您可以使用它来访问最常用的安全功能。因此，它并不能真正替代您的`FormsAuthentication`课程`Membership`。相反，它是一个简化开发的包装器。

[MSDN 文档](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity%28v=vs.111%29.aspx)显示了如何以及何时使用该类。

# java - 如何使用 ImageViews 和 PageAdapter 滑动缩放的图像

> ID：15933828
> 
> 赞同：1
> 
> 时间：2013-04-10T18:40:15.343
> 
> 标签：java, android

我正在尝试创建一个可以从给定 URL 加载图像的图像查看器。下面的代码实现了用户界面。

我的意图是让用户缩放图像并使用 Swipe 事件移动到下一个图像。但问题是当我缩放然后滑动时，它不会显示剩余部分，而是移动到下一个图像。

![在此处输入图像描述](https://i.stack.imgur.com/gcw4D.png)

我尝试在 TouchImageView 的（[https://github.com/MikeOrtiz/TouchImageView）onTouchListener](https://github.com/MikeOrtiz/TouchImageView)中使用 requestDisallowInterceptTouchEvent。在此之后，剩余部分可以显示，但现在我无法转到下一页。我想知道如何实现这一点，因为事件只能转到 TouchView 或 PageAdapter

```
public class PageActivity extends Activity {
private int numPages = 33;
private TouchImageView[] imageViews = new TouchImageView[numPages];

private String URL = "http://www.smbc-comics.com/comics/200905";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ViewPager viewPager = new ViewPager(this);

    for (int i = 0; i < numPages; i++) {
        imageViews[i] = new TouchImageView(this);
        imageViews[i].setBackgroundResource(R.drawable.banke);
        imageViews[i].setMaxZoom(4f);
    }

    setContentView(viewPager);
    ImagePagerAdapter adapter = new ImagePagerAdapter();
    viewPager.setAdapter(adapter);
    viewPager.setOffscreenPageLimit(2);
}

@SuppressWarnings("unused")
private class ImagePagerAdapter extends PagerAdapter {
    @Override
    public int getCount() {
        return numPages;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((TouchImageView) object);
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        Context context = PageActivity.this;

        String pageURL = URL;

        if (imageViews[position].getDrawable() == null) {
          ImageFetcher  imagefetcher = new ImageFetcher();
            imagefetcher.execute(
                    pageURL + String.format("%02d", position+1) + ".gif",
                    String.valueOf(position));
        }

        ((ViewPager) container).addView(imageViews[position], 0);
        return imageViews[position];
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {

        ((ViewPager) container).removeView((TouchImageView) object);
        imageViews[position].setImageDrawable(null);

    }

}
public class ImageFetcher extends AsyncTask<String, Integer, Drawable> {
    int fillthisPos;

    public Drawable doInBackground(String... urls) {
        try {
            InputStream is = (InputStream) new URL(urls[0]).getContent();
            fillthisPos = Integer.parseInt(urls[1]);
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        } catch (Exception e) {
            return null;
        }
    }

    @Override
    protected void onPostExecute(Drawable result) {
        super.onPostExecute(result);
        imageViews[fillthisPos].setImageDrawable(result);
        result = null;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T13:53:19.517

您可以在 TouchImageView 类中添加以下代码：

```
public boolean isZoomed () {
    return (normalizedScale > minScale);
}

private void onSwipeEvent(MotionEvent event) {
    boolean zoomed = this.isZoomed();

    if (!zoomed && (swipeLen > 0)) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            swipeStartPos = (int) event.getRawX();
        }
        else if (event.getAction() == MotionEvent.ACTION_MOVE) {
            int distance = ((int) event.getRawX()) - swipeStartPos;
            int swipeVector = SWIPE_RIGHT;
            if (distance < 0) swipeVector = SWIPE_LEFT;

            if (Math.abs(distance) > swipeLen) {
                onSwipeHandler.onSwipe(swipeVector);

                swipeStartPos = (int) event.getRawX();
                this.setScaleX(1f);
            }
            else {
                int swipeStDist = swipeLen - Math.round(((swipeLen / 100) * 50));
                if (Math.abs(distance) > swipeStDist) {
                    this.setScaleX(0.98f);
                }
            }
        }
        else if (event.getAction() == MotionEvent.ACTION_UP) {
            swipeStartPos = (int) event.getRawX();
            this.setScaleX(1f);
        }
    }
}

public static int SWIPE_LEFT = 0;
public static int SWIPE_RIGHT = 1;
    public int swipeStartPos = 0;
public onSwipeListener onSwipeHandler = new onSwipeListener() {
    public void onSwipe(int vector) {}
};
public static int swipeLen = 0;

public void setOnSwipeListener(onSwipeListener c, int swipeLength) {
    onSwipeHandler = c;
    swipeLen = swipeLength;
}
public interface onSwipeListener {
    public void onSwipe(int vector);
} 
```

并且还在 TouchImageView 的第 636 行下面添加 onSwipeEvent(event) ，如下所示：

```
 ......
            setImageMatrix(matrix);
            onSwipeEvent(event);
            //
            // indicate event was handled
            //
            return true;
        ........... 
```

在您的代码之后，您可以添加滑动事件侦听器，如下所示：

```
imageView.setOnSwipeListener(new TouchImageView.onSwipeListener() {
    @Override
    public void onSwipe(int vector) {
        if (vector == TouchImageView.SWIPE_LEFT) {
            Log.d("swipe", "swipe left!");
        }
        else if (vector == TouchImageView.SWIPE_RIGHT) {
            Log.d("swipe", "swipe right!");
        }
    }
}, 200);  //length of swiping - 200 dip 
```

此 onSwipeListener 忽略图像缩放的 onswipe +。它对我有用。

# windows - 文件夹背景中的 Windows shell 右键单击 扩展问题

> ID：15933829
> 
> 赞同：0
> 
> 时间：2013-04-10T18:40:15.510
> 
> 标签：windows, menu, registry, contextmenu, windows-shell

向 shell 上下文菜单添加自定义命令非常简单，如下所示：

```
[HKEY_CLASSES_ROOT\Directory\Background\shell\TestCommand]
@="My Test Command"

[HKEY_CLASSES_ROOT\Directory\Background\shell\TestCommand\command]
@="notepad.exe" 
```

这会在启动记事本的右键菜单中添加一个自定义命令。由于我在 Directory\Background\ 中添加了它，我的理解是该命令应该只在我右键单击目录背景时才会显示（例如，右键单击 Windows 资源管理器右窗格中的空白区域）。

我的问题是，当我右键单击资源管理器左窗格中的某个项目时（即右键单击树视图中的驱动器或文件夹），该命令也会显示。有什么办法可以防止这种情况发生吗？我正在启动一个带有参数的自定义应用程序，如果用户能够从左窗格启动它，结果是不可预测的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T06:50:17.363

添加;

```
[HKEY_CLASSES_ROOT\Directory\Background\shell\TestCommand]
@="My Test Command"
"NoWorkingDirectory"="" 
```

# php - 无法从 select2 搜索结果中选择结果

> ID：15933830
> 
> 赞同：13
> 
> 时间：2013-04-10T18:40:16.530
> 
> 标签：php, html, json, jquery-select2

我正在使用 select2 作为我的搜索框。我从我的 URL 获取结果，但我无法从中选择一个选项。我想使用“product.productName”作为选择后显示的文本。有什么我错过的或我犯的任何错误。我已经包含了 select2.css 和 select2.min.js,jquery.js

```
 function dataFormatResult(product) {
        var markup = "<table class='product-result'><tr>";

        markup += "<td class='product-info'><div class='product-title'>" +     product.productName + "</div>";
        if (product.manufacturer !== undefined) {
            markup += "<div class='product-synopsis'>" + product.manufacturer + "</div>";
        }
        else if (product.productOptions !== undefined) {
            markup += "<div class='product-synopsis'>" + product.productOptions + "</div>";
        }
        markup += "</td></tr></table>";
        return markup;
    }

    function dataFormatSelection(product) {
        return product.productName;
    }
    $(document).ready(function() {
        $("#e7").select2({
            placeholder: "Search for a product",
            minimumInputLength: 2,
            ajax: {
                url: myURL,
                dataType: 'json',
                data: function(term,page) {
                    return {
                        productname: term 
                    };
                },
                results: function(data,page) { 

                    return {results: data.result_object};
                }
            },
            formatResult: dataFormatResult, 
            formatSelection: dataFormatSelection, 
            dropdownCssClass: "bigdrop", 
            escapeMarkup: function(m) {
                return m;
            } 
        });
    }); 
```

这是我的resut_object

```
"result_object":[{"productName":"samsung galaxy s3","manufacturer":"Samsung","productOptions":"Color;Memory","productOptiondesc":"Silver;32GB"},{"productName":"samsung salaxy s3","manufacturer":"Samsung","productOptions":"Color;Memory","productOptiondesc":"Graphite;32GB"},{"productName":"samsung galaxy s3","manufacturer":"Samsung","productOptions":"Color;Memory","productOptiondesc":"Silver;16GB"}] 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-11T03:57:26.470

您缺少结果数据的 id 属性。如果没有，它会使选项“不可选择”。

例子：

```
 $('#e7').select2({
                    id: function(e) { return e.productName; },
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-23T15:43:50.470

因为我使用的是 AJAX，所以对我有用的是在 processResults 上返回一些作为 ID 的东西：

```
$(field).select2({
   ajax: {
        // [..] ajax params here
        processResults: function(data) {
            return {
                results: $.map(data, function(item) {
                    return {
                        // proccessResults NEEDS the attribute id here
                        id: item.code,
                        // [...] other attributes here
                        foo: item.bar,
                    }
                })
            }
        },
    },
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-07T12:12:53.413

id 参数可以是与对象属性名称相关的字符串，并且必须在对象的根目录中。数据对象内的文本。

```
var fruits = [{code: 222, fruit: 'grape', color:'purple', price: 2.2},
  {code: 234,fruit: 'banana', color:'yellow', price: 1.9} ];

$(yourfield).select2(
 {
   id: 'code',
   data: { results: fruits, text: 'fruit' }
 }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T05:51:25.527

我遇到了同样的问题，这个问题的其他解决方案是：-

在您的响应对象中（在上面的响应产品详细信息对象中）必须有一个“id”作为键和值。

示例：-您上面给出的响应对象必须是这样的

{"id":"1","productName":"samsung galaxy s3","manufacturer":"Samsung","productOptions":"Color;Memory","productOptiondesc":"Silver;32GB"}

所以你不需要这个 id：function(object){return object.key;}

# r - svyglm中的拟合模型

> ID：15933836
> 
> 赞同：0
> 
> 时间：2013-04-10T18:40:59.547
> 
> 标签：r

我正在使用 svyglm 模型，我需要获取“AIC”来比较不同的模型。

我的问题是，如果我使用我的模型：

```
 Modelo12=svyglm(formula = Asiste ~ sexo + E27 + JovenActivo + hijos + 
    +     jefe + LN_YSVL_sin_joven_prom + aniosed + climaeducativo + 
    +     icv2 + TV + Computadora + Telefono + Cable + Calefon + 
    +     DVD + Microhondas + Aire + Auto_o_moto + Secadora + Lavavajillas + 
    +     Refrigerador + Actividad_del_Jefe + Hacinamiento, family = quasibinomial(link  
    =    
    "probit"), data = Personas.con.muestra, design=diseno_personas_14_17) 
```

当我写摘要（Modelo12）时，AIC 没有出现。

另一方面，我不能逐步使用，这是错误：

```
 stepwise(Modelo12)

    Direction:  backward/forward forward/backward backward forward
    Criterion:  BIC 

    Error en extractAIC.svyglm(fit, scale, k = k, ...) : 
    svyglm not fitted by maximum likelihood 
```

谢谢！！！

娜塔莉亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:21:02.623

AIC 是基于可能性的度量。`svyglm`不使用最大似然拟合，作为错误`?svyglm`告诉你。在那里您还可以获得使用建议`regTermTest`，它提供 Wald 检验和调整后的 Rao-Scott 似然比检验。

# c# - 如何避免循环依赖：DAL.DbContext.DbSet

> ID：15933839
> 
> 赞同：1
> 
> 时间：2013-04-10T18:41:09.223
> 
> 标签：c#, entity-framework, architecture, interface, dependency-injection

如果 DbContext 在 DAL 中，则 DbSet 的泛型类型参数不能是 BLL 类（域模型）。分离这些层的最佳实践方法是什么？DAL 中的额外模型？接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:56:40.100

如果您正在做 DDD，我相信存储库（至少是它的接口）是您的业务/领域层的一部分。您的存储库实现将是一个单独的程序集，必须引用该业务/域层。因此，您的 DAL 知道您的业务对象，但反之则不然。要进行依赖注入，您可能会在 DAL 层中配置容器以将 Repository 用于 IRepository 接口。如果您需要一个工作单元模式，您的界面可能也必须是业务层的一部分。同样，您的实现将在您的 DAL 中，并且 DAL 将适当地配置 DI 容器。这实际上是我不喜欢存储库模式的地方之一，

在传统的 n 层架构中，情况有些不同。在这种情况下，您的业务层可以与 DAL 通信，并且我通常构建 DAL 以具有代表数据库中一行数据的 DTO。然后，业务层将使用这些 DTO 来对业务对象进行水合（或者，如果您使用的是 CSLA.Net 之类的东西，那么业务对象知道如何对自己进行水合）。

无论哪种方式，都不应该出现最终得到循环引用的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:44:58.340

我通常将域模型视为一个单独的层。
如果我们看一下经典的 MVC 范式，那么 View 和 Controller 都会使用该模型。
DAL 也没有理由不使用它。

然而，模型不会引用 DAL；针对数据存储的所有操作都将由控制器完成。

所以事情的一般流程是——
用户与`View` `View`调用方法交互`Controller` `Controller`使用`DAL`检索`Model`对象 `Controller`调用对象的方法，如果需要，`Model`保存它们（使用`DAL`），并返回一个答案到`View`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:17:41.143

您的 BLL 或域层不应该担心数据访问技术细节，BLL 应该是技术独立的。如果你想坚持使用实体框架，你应该生成 POCO 实体并将它们移动到单独的层，这样你可以避免循环引用。

# ios - 将谷歌地图分配给子视图时出现黑屏

> ID：15933843
> 
> 赞同：4
> 
> 时间：2013-04-10T18:41:28.827
> 
> 标签：ios, google-maps, google-maps-sdk-ios

我正在尝试在 iOS6 的 Google Map View 中加载地点。如何设置地图的框架？目前是全屏

```
 -(void)loadView {

   GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.00989
                                                        longitude:76.316142
                                                             zoom:15];
   mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];
   self.view = mapView_;

   } 
```

我尝试在当前视图中创建一个新的（小）视图并在其中添加地图，但当时页面没有被加载。它显示一个全黑屏

```
 -(void)loadView {

  GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.00989
                                                        longitude:76.316142
                                                             zoom:15];
   mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];

   [self.view Addsubview:newView];
   self.newView = mapView_;

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T18:09:29.020

终于找到了解决办法。去掉 loadview 方法，在视图 did load 方法中放入如下代码：

```
-(void)viewDidLoad{
    [super viewDidLoad];

    // Do any additional setup after loading the view from its nib.
    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.86
                                                            longitude:151.20
                                                                 zoom:6];

    mapView_ = [GMSMapView mapWithFrame:CGRectMake(0, 0, 100, 100) camera:camera];
    [self.view addSubview:mapView_];
    // Create a GMSCameraPosition that tells the map to display the
    // coordinate -33.86,151.20 at zoom level 6.

    mapView_.myLocationEnabled = YES;

    // Creates a marker in the center of the map.
    GMSMarker *marker = [[GMSMarker alloc] init];
    marker.position = CLLocationCoordinate2DMake(-33.86, 151.20);
    marker.title = @"Sydney";
    marker.snippet = @"Australia";
    marker.map = mapView_;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:54:32.030

尝试

```
mapView_ = [GMSMapView mapWithFrame:self.view.bounds camera:camera];

[self.view addSubview:mapView_]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:57:47.163

如果你放入 loadView 它不会有一个视图.. xib 甚至没有加载...把它放在**viewDidLoad**

做

```
mapView_ = [GMSMapView mapWithFrame:self.view.bounds camera:camera];
[self.view addSubview:mapView_]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-09T11:08:48.057

检查 GMSMapView 的 @property 声明，如果它是弱属性，则使其变强。

@property（强，非原子）GMSMapView *mapView;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-11T20:55:06.357

通过从我的代码中删除 func loadView 解决了我的问题

```
 override func loadView() {

} 
```

或者通过将这行代码放在 loadView 中

```
 override func loadView() {
            self.view = GMSMapView(frame: UIScreen.main.bounds)
} 
```

# r - rbindlist 两个 data.tables，其中一个具有因子，另一个具有列的字符类型

> ID：15933846
> 
> 赞同：15
> 
> 时间：2013-04-10T18:41:33.943
> 
> 标签：r, data.table

我刚刚在我的脚本中发现这个警告有点奇怪。

```
# Warning message:
# In rbindlist(list(DT.1, DT.2)) : NAs introduced by coercion 
```

* * *

**观察 1：**这是一个可重现的示例：

```
require(data.table)
DT.1 <- data.table(x = letters[1:5], y = 6:10)
DT.2 <- data.table(x = LETTERS[1:5], y = 11:15)

# works fine
rbindlist(list(DT.1, DT.2))
#     x  y
#  1: a  6
#  2: b  7
#  3: c  8
#  4: d  9
#  5: e 10
#  6: A 11
#  7: B 12
#  8: C 13
#  9: D 14
# 10: E 15 
```

但是，现在如果我将列转换`x`为`factor`（有序与否）并执行相同操作：

```
DT.1[, x := factor(x)]
rbindlist(list(DT.1, DT.2))
#      x  y
#  1:  a  6
#  2:  b  7
#  3:  c  8
#  4:  d  9
#  5:  e 10
#  6: NA 11
#  7: NA 12
#  8: NA 13
#  9: NA 14
# 10: NA 15
# Warning message:
# In rbindlist(list(DT.1, DT.2)) : NAs introduced by coercion 
```

但`rbind`这项工作做得很好！

```
rbind(DT.1, DT.2) # where DT.1 has column x as factor
# do.call(rbind, list(DT.1, DT.2)) # also works fine
#     x  y
#  1: a  6
#  2: b  7
#  3: c  8
#  4: d  9
#  5: e 10
#  6: A 11
#  7: B 12
#  8: C 13
#  9: D 14
# 10: E 15 
```

`x`如果 column也是 an ，则可以重现相同的行为`ordered factor`。由于帮助页面`?rbindlist`说：`Same as do.call("rbind",l), but much faster.`，我猜这不是所需的行为？

* * *

这是我的会话信息：

```
# R version 3.0.0 (2013-04-03)
# Platform: x86_64-apple-darwin10.8.0 (64-bit)
# 
# locale:
# [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
# 
# attached base packages:
# [1] stats     graphics  grDevices utils     datasets  methods   base     
# 
# other attached packages:
# [1] data.table_1.8.8
# 
# loaded via a namespace (and not attached):
# [1] tools_3.0.0 
```

* * *

# 编辑：

**观察 2：**遵循@AnandaMahto 的另一个有趣观察，颠倒顺序：

```
# column x in DT.1 is still a factor
rbindlist(list(DT.2, DT.1))
#     x  y
#  1: A 11
#  2: B 12
#  3: C 13
#  4: D 14
#  5: E 15
#  6: 1  6
#  7: 2  7
#  8: 3  8
#  9: 4  9
# 10: 5 10 
```

在这里， from 列`DT.1`被默默地强制转换为`numeric`。
**编辑：**`rbind(DT2, DT1)`澄清一下，这与 DT1 的 x 列是一个因素的行为相同。`rbind`似乎保留了第一个参数的类。我将把这部分留在这里，并提到在这种情况下，这是所需的行为，因为`rbindlist`它是`rbind`.

**观察 3：**如果现在，两列都转换为因子：

```
# DT.1 column x is already a factor
DT.2[, x := factor(x)]
rbindlist(list(DT.1, DT.2))
#     x  y
#  1: a  6
#  2: b  7
#  3: c  8
#  4: d  9
#  5: e 10
#  6: a 11
#  7: b 12
#  8: c 13
#  9: d 14
# 10: e 15 
```

在这里，`x`from列`DT.2`丢失（/ 替换为 of `DT.1`）。如果顺序相反，则会发生完全相反的情况（第 x 列`DT.1`被替换为`DT.2`）。

一般来说，`factor`处理`rbindlist`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T20:24:54.893

## **更新 - 此错误 ( [#2650](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2650&group_id=240&atid=975) ) 已于 2013 年 5 月 17 日在 v1.8.9 中修复**

* * *

我相信，`rbindlist`当应用于因素时，是结合因素的数值并仅使用与第一个列表元素相关的级别。

在这个错误报告中： [http ://r-forge.r-project.org/tracker/index.php?func=detail&aid=2650&group_id=240&atid=975](http://r-forge.r-project.org/tracker/index.php?func=detail&aid=2650&group_id=240&atid=975)

* * *

```
# Temporary workaround: 

levs <- c(as.character(DT.1$x), as.character(DT.2$x))

DT.1[, x := factor(x, levels=levs)]
DT.2[, x := factor(x, levels=levs)]

rbindlist(list(DT.1, DT.2)) 
```

* * *

作为对正在发生的事情的另一种看法：

```
DT3 <- data.table(x=c("1st", "2nd"), y=1:2)
DT4 <- copy(DT3)

DT3[, x := factor(x, levels=x)]
DT4[, x := factor(x, levels=x, labels=rev(x))]

DT3
DT4

# Have a look at the difference:
rbindlist(list(DT3, DT4))$x
# [1] 1st 2nd 1st 2nd
# Levels: 1st 2nd

do.call(rbind, list(DT3, DT4))$x
# [1] 1st 2nd 2nd 1st
# Levels: 1st 2nd 
```

* * *

### 根据评论编辑：

至于观察 1，发生的事情类似于：

```
x <- factor(LETTERS[1:5])

x[6:10] <- letters[1:5]
x

# Notice however, if you are assigning a value that is already present
x[11] <- "S"  # warning, since `S` is not one of the levels of x
x[12] <- "D"  # all good, since `D` *is* one of the levels of x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:55:36.297

`rbindlist`超快，因为它不检查`rbindfill`或`do.call(rbind.data.frame,...)`

您可以使用这样的解决方法来确保将因素强制转换为字符。

```
DT.1 <- data.table(x = factor(letters[1:5]), y = 6:10)
DT.2 <- data.table(x = LETTERS[1:5], y = 11:15)

for(ii in seq_along(DDL)){
  ff <- Filter(function(x) is.factor(DDL[[ii]][[x]]), names(DDL[[ii]]))
  for(fn in ff){
    set(DDL[[ii]], j = fn, value = as.character(DDL[[ii]][[fn]]))
    }
  }
 rbindlist(DDL) 
```

或（有效减少内存）

```
rbindlist(rapply(DDL, classes = 'factor', f= as.character, how = 'replace')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-07T18:48:28.407

该错误未在`R 4.0.2`和中修复`data.table 1.13.0`。当我尝试使用`rbindlist()`两个 DT 时，其中一个具有因子列，另一个为空，最终结果使该列损坏，并且因子值损坏（\n 随机发生；级别已损坏，引入了 NA）。
解决方法是不要将一个 DT 与一个空的 rbindlist 一起列出，而是将其与其他也具有有效负载数据的 DT 一起 rbindlist。虽然这需要一些样板代码。

# dom - dojo如何查询已从DOM中删除的节点

> ID：15933849
> 
> 赞同：1
> 
> 时间：2013-04-10T18:41:41.350
> 
> 标签：dom, dojo

根据我的测试，dojo 的功能似乎`query()`只从属于页面 DOM 的元素中进行选择。

例如，假设我有一个名为的节点，该节点`rootNode`具有一定数量的类后代`someClass`。这段代码：

`var nodeList = query(".someclass", rootNode);`

`rootNode`如果已从 DOM 中删除，将返回一个空 NodeList （当然，如果`rootNode`它是 DOM 的一部分，它将返回所有具有 class 的节点`someClass`。

**我的问题：有没有办法`query()`在这种情况下使用？** 如果没有，处理此问题的首选方法是什么？在我看来，NodeList 的一些方法可以与过滤器（删除和放置）一起使用，但这并不完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:16:47.083

你可以得到一个道场**`NodeList`**作为你的`dojo.query`. 然后你可以使用`nodes.map`或`nodes.every`找到你想要的元素。

[http://dojotoolkit.org/reference-guide/1.9/dojo/NodeList.html](http://dojotoolkit.org/reference-guide/1.9/dojo/NodeList.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:51:40.617

结果我的回答很简单：虽然我没有在文档中找到它，但您可以简单地调用`query()`NodeList。例如

```
var nodeList = query.NodeList();
nodeList.push(rootNode);
var results = nodeList.query(yourSelector); 
```

但是请注意：如果`yourSelector`是唯一 id 并且`rootNode`已从 DOM 中删除，则它似乎不起作用。其他类型的选择器（类、子类等）似乎也可以工作。我想知道这是否是Dojo中的一个错误......

# ajax - 在视图中返回 json 结果

> ID：15933853
> 
> 赞同：0
> 
> 时间：2013-04-10T18:41:59.397
> 
> 标签：ajax, asp.net-mvc, json

我有一个在 PartialView 中呈现的时事通讯文本框。这是获取操作：

```
[ChildActionOnly]
public PartialViewResult NewsLetterSidebar()
{
    return PartialView("_NewsLetterSidebar");
} 
```

这是 Razor 视图：

```
model Blog.Web.UI.ViewModels.NewsLetterViewModel 

@{
    ViewBag.Title = "_NewsLetterSidebar";
}

@using (Html.BeginForm("NewsLetter", "Home", FormMethod.Post))
{
    <h3>News Letter</h3>
    <div>
        @Html.TextBoxFor(news => news.EmailAddress)
        @Html.ValidationMessageFor(news => news.EmailAddress)
    </div>
    <div>
        <input type="submit" value="Verify">
    </div>
} 
```

如果输入有效，我希望成功消息显示在验证按钮下。这是我的帖子操作：

```
[HttpPost]
public JsonResult NewsLetter(NewsLetterViewModel newsLetter)
{
    var newsLetterViewModel = newsLetter.ConvertToNewsLetterModel();

    if (ModelState.IsValid)
    {
        _newsLetterRepository.Add(newsLetterViewModel);
        _newsLetterRepository.Save();
    }
    return Json("Done!");
} 
```

如何在视图下显示 JSON 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:10:29.230

未经测试，但会帮助您完成您想要的。

```
[HTTPGET]
public JsonResult NewsLetter(NewsLetterViewModel newsLetter)
{
    var newsLetterViewModel = newsLetter.ConvertToNewsLetterModel();

    if (ModelState.IsValid)
    {
        _newsLetterRepository.Add(newsLetterViewModel);
        _newsLetterRepository.Save();
    }
    return Json("Done!", JsonRequestBehavior.AllowGet);
} 
```

替换这个

```
@using (Html.BeginForm("NewsLetter", "Home", FormMethod.Post))
{} 
```

和

```
@using (Ajax.BeginForm("NewsLetter", "Home", new AjaxOptions{ onsuccess:"ShowMessage"}))
    {} 
```

JS

```
function ShowMessage(data){
alert(data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:59:56.807

如果您想使用我上面评论中的第一种方法，您需要稍微修改您的代码。首先，将`Message`属性添加到您的`NewsLetterViewModel`，然后更改部分视图：

```
@using (Ajax.BeginForm("NewsLetter", new AjaxOptions{UpdateTargetId = "newsletter-container"}))
{
    <h3>News Letter</h3>
    <span>@Model.Message</span>
    <div>
        @Html.TextBoxFor(news => news.EmailAddress)
        @Html.ValidationMessageFor(news => news.EmailAddress)
    </div>
    <div>
        <input type="submit" value="Verify">
    </div>
} 
```

请注意，您的部分视图应包含`id="newsletter-container"`在页面上的 html 元素中，例如：

```
<div id="newsletter-container">
    @{Html.RenderPartial("_NewsLetterSidebar", new NewsLetterModel());}
</div> 
```

现在，控制器中的一个小改动：

```
[HttpPost]
public ActionResult NewsLetter(NewsLetterViewModel newsLetter)
{
    var newsLetterViewModel = newsLetter.ConvertToNewsLetterModel();

    if (ModelState.IsValid)
    {
        _newsLetterRepository.Add(newsLetterViewModel);
        _newsLetterRepository.Save();
            model.Message = "Done!";
    }

    return PartialView("_NewsLetterSidebar", model);
} 
```

您还需要添加`jquery.unobtrusive-ajax.js`以使其工作。

# html - 是否可以使用 ajax 提交图像？

> ID：15933854
> 
> 赞同：0
> 
> 时间：2013-04-10T18:41:59.880
> 
> 标签：html, ajax, file-upload, enctype

我正在尝试使用 ajax 将包含图像的表单提交到服务器。

使用ajax很重要，那么是否可以使用ajax上传图片呢？谷歌并没有像我想的那样帮助我。我希望一旦我提交带有图像的表单，窗口就不会重新加载。我懒得为 uoloaded-site 制作另一个模板...

上传图片需要`enctype="multipart/form-data"`，但也有一些 ajax 解决方案吗？

谢谢，感谢任何意见和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:44:27.017

您可以使用 FILE API 上传任何文件，但最简单的方法可能是将该表单提交到 iframe 中......同样的结果更省力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:43:56.683

是的，您可以使用 AJAX 请求上传图片

有很多图书馆，但我正在使用[这个](http://blueimp.github.io/jQuery-File-Upload/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:50:33.753

您可以使用 jquery 和[表单](http://jquery.malsup.com/form/#file-upload)插件。该插件允许您使用 ajax 提交表单，包括文件上传。

# sql - SQL 根据其他 2 个表中的信息更新表

> ID：15933858
> 
> 赞同：0
> 
> 时间：2013-04-10T18:42:13.500
> 
> 标签：sql, oracle10g

我目前正在使用 3 张桌子。`USER`,`WORKSTATION`和`USER_WORKSTATION`（基本上是一个临时表）。

我的

`USER`表由`user_id`和`user_name`组成

`WORKSTATION`由和组成`workstation_id`_`workstation_name``user_id`

截至目前，`user_id`所有工作站的列都是空的，这是我的问题。

我创建了一个表（从 excel 导入）`USER_WORKSTATION`。它仅由`user_name`s 及其相应的工作站组成。有没有办法我可以编写一个更新查询，该查询将根据`WORKSTATION`表中的and组合使用在表中`user_id`找到的更新表？我目前没有设置任何约束，我正在使用 Oracle。`USER``user_name``workstation_name``USER_WORKSTATION`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:12:21.930

您可以为此使用 MERGE 语句：

```
MERGE
INTO    WORKSTATION W1
USING   (SELECT W2.rowid AS rid, U.user_id
           FROM USER_WORKSTATION UW
           JOIN USER U
             ON UW.user_name = U.user_name
           JOIN WORKSTATION W2
             ON UW.workstation_name = W2.workstation_name
        ) q
ON      (W1.rowid = q.rid)
WHEN MATCHED THEN
UPDATE
SET W1.user_id = q.user_id; 
```

你也可以这样做`UPDATE`，它有点混乱。

请参阅[Oracle 上使用内部联接的更新语句](https://stackoverflow.com/questions/2446764/oracle-update-statement-with-inner-join)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:21:11.637

嗨试试这个 plsql 块。我假设一个用户一个工作站。

```
Declare
user_id User.userid%type;
ws_name WorkStationUser.wsname%type;
Cursor WSUSER is select * from WorkStationUser;
user_name WorkStationUser.username%type;

Begin

Open WSUSER;

Loop
 Fetch WSUSER into user_name, ws_name;
 select userid into user_id from USER where username=user_name;
 select wsname into ws_name from WORKSTATIONUSER where username=user_name;
 update WORKSTATION set userid=user_id whrer wsname=ws_name;
 EXIT WHEN WSUSER%notfound;
END LOOP;
close WSUSER;
END; 
```

# sql - 创建表“缺少右括号”时出错

> ID：15933863
> 
> 赞同：0
> 
> 时间：2013-04-10T18:42:25.240
> 
> 标签：sql, oracle, parentheses

我一直被告知我缺少一个右括号，但我没有看到它，有人可以指出吗？

```
CREATE TABLE Member
( MEMBER_ID int NOT NULL AUTO_INCREMENT
, FIRST_NAME varchar(255) NOT NULL
, LAST_NAME varchar(255) NOT NULL
, STREET_ADDRESS varchar(255) NOT NULL
, CITY varchar(255) NOT NULL
, STATE varchar(2) NOT NULL
, ZIPCODE int NOT NULL
, PRIMARY KEY(MEMBER_ID)
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T18:45:27.103

oracle 中没有 AUTO_INCREMENT 这样的东西。

看看[这个问题](https://stackoverflow.com/questions/11296361/how-to-create-id-with-auto-increment-on-oracle)。这很可能是给你的错误。

# cakephp - 密码在存储到数据库之前没有经过哈希处理

> ID：15933865
> 
> 赞同：0
> 
> 时间：2013-04-10T18:42:28.270
> 
> 标签：cakephp, cakephp-2.3

这是`AppController`代码：

```
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'dashboard', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'admins', 'action' => 'index'),
        'authorize' => array('Controller')
    )
);

public function beforeFilter()
{
    $this->Auth->loginAction = array('controller' => 'admins', 'action' => 'login');
}

public function beforeSave()
{
    if(isset($this->data['Admin']['password']))
    {
        $this->data['Admin']['password'] = AuthComponent::password($this->data['Admin']['password']);
    }
    return true;
} 
```

这是`AdminsController`代码：

```
public $name = 'Admins';

public function beforeFilter()
{
    parent::beforeFilter();

    $this->Auth->fields = array('username' => 'email', 'password' => 'password');
    $this->Auth->allow('signup');
}

public function index()
{
    $this->Admin->recursive = 0;
    $this->set('admins', $this->Admin->find('all'));
}

public function login()
{
    $this->set('title_for_layout', 'Polkadot - Admin Login');

    if($this->request->is('post'))
    {
        if($this->Auth->login())
        {
            $this->Session->setFlash('Login successfull!');
            $this->redirect($this->Auth->redirect());
        }
        else
        {
            $this->Session->setFlash('Login failed!');
        }
    }
}

public function signup()
{
    $this->set('title_for_layout', 'Polkadot - Admin Sign Up');

    if($this->request->is('post'))
    {
        if($this->Admin->save($this->request->data))
        {
            $this->Session->setFlash('Account created successfully!');
            $this->redirect(array('action' => 'index'));
        }
        else
        {
            $this->Session->setFlash('Account could not be created, please try again!');
        }
    }
} 
```

我可以看到该帐户已创建，但数据库中的密码是纯文本。当我尝试登录时，它失败了。我做错了什么？

我希望管理员登录时打开控制器的`index`操作`Dashboard`。帐户注册使用四个输入字段：名称（文本），电子邮件（文本），密码（密码）和密码确认（密码）。因此，登录表单使用两个字段：电子邮件（文本）和密码（密码）。

使用的 CakePHP 版本是 2.3.1

所有帮助表示赞赏！

**[编辑]：**这是错误日志

```
2013-04-10 19:31:13 Error: [MissingControllerException] Controller class CssController could not be found.
Exception Attributes: array (
  'class' => 'CssController',
  'plugin' => NULL,
)
Request URL: /polkapanel/css/cake.generic.css
Stack Trace:
#0 C:\wamp\www\polkapanel\app\webroot\index.php(109): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}
2013-04-10 19:31:13 Error: [MissingControllerException] Controller class ImgController could not be found.
Exception Attributes: array (
  'class' => 'ImgController',
  'plugin' => NULL,
)
Request URL: /polkapanel/img/cake.power.gif
Stack Trace:
#0 C:\wamp\www\polkapanel\app\webroot\index.php(109): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}
2013-04-10 19:31:25 Error: [MissingControllerException] Controller class CssController could not be found.
Exception Attributes: array (
  'class' => 'CssController',
  'plugin' => NULL,
)
Request URL: /polkapanel/css/cake.generic.css
Stack Trace:
#0 C:\wamp\www\polkapanel\app\webroot\index.php(109): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}
2013-04-10 19:31:25 Error: [MissingControllerException] Controller class ImgController could not be found.
Exception Attributes: array (
  'class' => 'ImgController',
  'plugin' => NULL,
)
Request URL: /polkapanel/img/cake.power.gif
Stack Trace:
#0 C:\wamp\www\polkapanel\app\webroot\index.php(109): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:03:14.093

您必须将`beforeSave`函数放入`Admin`模型中：

Admin.php（或任何你称之为的）：

```
public function beforeSave() {
    if(isset($this->data['Admin']['password'])) {
        $this->data['Admin']['password'] = AuthComponent::password($this->data['Admin']['password']);
    }
    return true;
} 
```

# javascript - 确定是否启用地理位置的功能

> ID：15933874
> 
> 赞同：0
> 
> 时间：2013-04-10T18:42:53.910
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我有一个功能可以确定用户浏览器是否启用了地理位置，如果用户启用了地理位置，则显示谷歌地图，如果不是，则显示不同的地图。

```
function init_maps() {
  if (navigator.geolocation) { 
    navigator.geolocation.getCurrentPosition(geoInfo, noGeoInfo, { timeout: 20000 });
  } else {
    noGeoInfo();
  }

  function geoInfo(position) { 
    navigator.geolocation.getCurrentPosition(function (position) { 
      var latitude = position.coords.latitude;                    
      var longitude = position.coords.longitude;                 
      var coords = new google.maps.LatLng(latitude, longitude); 
      var directionsService = new google.maps.DirectionsService();
      var directionsDisplay = new google.maps.DirectionsRenderer();
      var mapOptions = {  
        zoom: 15,       
        center: coords, 
        mapTypeControl: true, 
        navigationControlOptions:
        {
          style: google.maps.NavigationControlStyle.SMALL 
        },
        mapTypeId: google.maps.MapTypeId.ROADMAP 
      };
      map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions); 
      directionsDisplay.setMap(map);
      var request = {
        origin: coords, //start point for directions
        destination: '54.861283, -6.326805', //end point for directions
        travelMode: google.maps.DirectionsTravelMode.DRIVING 
      };
      directionsService.route(request, function (response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
          directionsDisplay.setDirections(response);
        }
      });
    });
    //}

    function noGeoInfo() { 
      var location = new google.maps.LatLng(54.861283, -6.326805); 
      var mapOptions = { 
        center: location, 
        zoom: 15, 
        mapTypeId: google.maps.MapTypeId.ROADMAP 
      };
      var map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions);
      marker = new google.maps.Marker({  
        position: location, 
        map: map 
      });
    }
  }
} 
```

`init_maps()`当用户单击链接时调用该函数。问题是页面加载时没有显示任何内容`div`，如果我删除：

```
 if (navigator.geolocation) { 
    navigator.geolocation.getCurrentPosition(geoInfo, noGeoInfo, { timeout: 20000 });
  } else {
    noGeoInfo();
  }

  function geoInfo(position) { 
```

然后地图按预期加载。如果我`if else`可以确定是否启用了地理位置，为什么它不显示？

# php - 从多个字符串中提取标签的最有效方法

> ID：15933879
> 
> 赞同：0
> 
> 时间：2013-04-10T18:43:20.433
> 
> 标签：php, regex, preg-match

我有一个 html 页面，其中包含以下标签的多个实例：

```
<INCLUDEFILE-1-/var/somepath/file1.php>
<INCLUDEFILE-2-/var/somepath/file2.php>
<INCLUDEFILE-3-/var/somepath/file3.php>
<INCLUDEFILE-4-/var/somepath/file4.php>
<INCLUDEFILE-5-/var/somepath/file5.php> 
```

我可以使用什么代码来提取上面的所有路径？到目前为止，我已经获得了以下代码，但无法使其正常工作：

```
preg_match_all('/INCLUDEFILE[^"]+/m', $html, $result, PREG_PATTERN_ORDER);

for ($i = 0; $i < count($result[0]); $i++)
{
    $includefile = $result[0][$i];
} 
```

我需要提取：

```
/var/somepath/file1.php
/var/somepath/file2.php
/var/somepath/file3.php
/var/somepath/file4.php
/var/somepath/file5.php 
```

谁能看到明显的错误？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:11:06.297

通往幸福的捷径：

```
$pattern = '`<INCLUDEFILE-\d+-\K/[^>\s]+`';
preg_match_all($pattern, $subject, $results);
$results=$results[0];
print_r($results); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:59:14.110

我稍微更改了您的正则表达式并添加了括号来捕获您需要的子模式。我在发布的示例中没有看到引号（“），所以我改为检查“>”来检测结尾。我还添加了 ungreedy 修饰符，您可以尝试使用或不使用 ungreedy 的情况。我还检查结果[1] 将包含第一个子模式匹配项。

```
preg_match_all('/<INCLUDEFILE-[0-9]+-([^>]+)>/Um', $html, $result, PREG_PATTERN_ORDER);

for ($i = 0; $i < count($result[1]); $i++)
{
    $includefile = $result[1][$i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:54:31.330

你可以这样做：

```
$html = '
    <INCLUDEFILE-1-/var/somepath/file1.php>fadsf
    asdfasf<INCLUDEFILE-2-/var/somepath/file2.php>adsfaf
    <INCLUDEFILE-3-/var/somepath/file3.php>asdfadsf
    <INCLUDEFILE-4-/var/somepath/file4.php>
    <INCLUDEFILE-5-/var/somepath/file5.php>
';

$lines = explode(PHP_EOL, $html);
$files = array();

foreach($lines as $line)
{
    preg_match('/<INCLUDEFILE-\d+-(.+?)>/', $line, $match);
    if(!empty($match)) {
        $files[] = $match[1];
    }
}

var_dump($files); 
```

# c# - 如何限制此 HTML 辅助方法的参数值？

> ID：15933880
> 
> 赞同：1
> 
> 时间：2013-04-10T18:43:23.323
> 
> 标签：c#, .net, asp.net-mvc, facebook-like, html-helper

我为 facebook like 按钮制作了一个 html 助手。

```
public static MvcHtmlString FacebookLike(this HtmlHelper helper, bool send, bool showFaces, string layout, string href = null, int width = 450)
{
    var div = new TagBuilder("div");
    div.AddCssClass("fb-like");
    div.MergeAttribute("data-send", send.ToString());
    div.MergeAttribute("data-width", width.ToString());
    div.MergeAttribute("data-show-faces", showFaces.ToString());
    div.MergeAttribute("data-layout", layout);
    if (href != null)
    {
        div.MergeAttribute("data-href", href);
    }

    return new MvcHtmlString(div.ToString());
} 
```

layout 参数只有 3 个可能的值（standard、button_count 和 box_count）。我的问题是我怎样才能让它只接受这 3 个值？

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:48:16.017

使它成为`enum`：

```
public enum LayoutType
{
    standard,
    button_count,
    box_count
} 
```

然后稍微改变你的方法：

```
public static MvcHtmlString FacebookLike(this HtmlHelper helper, bool send, bool showFaces, LayoutType layout, string href = null, int width = 450)
{
    var div = new TagBuilder("div");
    div.AddCssClass("fb-like");
    div.MergeAttribute("data-send", send.ToString());
    div.MergeAttribute("data-width", width.ToString());
    div.MergeAttribute("data-show-faces", showFaces.ToString());
    div.MergeAttribute("data-layout", Enum.GetName(typeof(LayoutType), layout));
    if (href != null)
    {
        div.MergeAttribute("data-href", href);
    }

    return new MvcHtmlString(div.ToString());
} 
```

请注意，签名现在使用 the`enum`并且`data-layout`通过获取`enum`传入的名称来设置。

# php - 我递归地调用一个函数本身，但它似乎没有工作

> ID：15933882
> 
> 赞同：0
> 
> 时间：2013-04-10T18:43:23.913
> 
> 标签：php, recursion, web-crawler

我正在递归调用 crawl() 函数，它获取页面的内容并回显它。当我从函数外部手动调用它时它可以工作，但是当我从函数内部递归调用它时，递归调用没有输出。我得到的唯一输出来自一个手动调用。

为什么这不起作用，我做错了什么？

```
<?php
error_reporting( E_ERROR );

define( "CRAWL_LIMIT_PER_DOMAIN", 50 );

$domains = array();

$urls = array();

$dom = new DOMDocument();

$matches = array();

function crawl( $domObject, $url, $matchList )
{
    global $domains, $urls;
    $parse = parse_url( $url );
    $domains[ $parse['host'] ]++;
    $urls[] = $url;

    $content = file_get_contents( $url );
    if ( $content === FALSE ){
        return;
    } 
    echo  strip_tags($content) . "<br /><br /><br />";
        array_push($matchList, 'http://www.the-irf.com/hello/hello5.html');
        array_push($matchList, 'http://www.the-irf.com/hello/hello6.html');
        array_push($matchList, 'http://www.the-irf.com/hello/end.html');

    foreach( $matchList[0] as $crawled_url ) {
        $parse = parse_url( $crawled_url );
        if ( count( $domains[ $parse['host'] ] ) < CRAWL_LIMIT_PER_DOMAIN && !in_array( $crawled_url, $urls ) ) {
            sleep( 1 );
            crawl( $domObject, $crawled_url, $matchList );
        }
    }
}

crawl($dom, 'http://the-irf.com/hello/hello6.html', $matches);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:59:28.427

问题出在您使用 foreach 时。

```
foreach($matchList[0] as $crawled_url){ 
```

你的数组`$matchList`看起来像：`array('http://www.the-irf.com/hello/hello5.html', 'http://www.the-irf.com/hello/hello6.html', 'http://www.the-irf.com/hello/end.html')`.

`foreach`期望第一个参数是一个数组。`$matchList[0]`不是数组而是字符串`'http://www.the-irf.com/hello/hello5.html'`。

换句话说，如果您将该行更改为

```
foreach($matchList as $crawled_url){ 
```

您将开始递归调用该函数。

# advanceddatagrid - AdvancedDataGrid 宽度大于父容器？

> ID：15933886
> 
> 赞同：0
> 
> 时间：2013-04-10T18:43:33.693
> 
> 标签：advanceddatagrid

这是我的控件的层次结构：

```
<Canvas  width="100%" height="100%">
  <ViewStack  width="100%" height="100%">
     <box id="box1" width="100%" height="100%">
       <AdvancedDataGrid width="100%" height="100%"/>
     </box>
     <box id="box2" width="100%" height="100%">
       <SomeOtherControl width="100%" height="100%"/>
     </box>
</ViewStack>
</Canvas> 
```

我的 ADG 大约有 30 - 40 列，我看到两个水平滚动条，1 个来自 ADG，这没关系，但另一个来自父容器，所以似乎 ADG 的宽度分配得比父容器多。

我无法将 ADG 的宽度设置为显式值，因为它会导致缩放问题。

请建议/帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T19:01:44.577

Instead of setting width="100%" on your ADG, set it to width="{box1.width}"

# .net-4.0 - 自己签署未签署的第三方大会有什么注意事项吗？

> ID：15933892
> 
> 赞同：0
> 
> 时间：2013-04-10T18:43:47.500
> 
> 标签：.net-4.0, c++-cli, .net-assembly

我有一个第三方程序集，我需要从我们构建的已签名程序集中引用它。我知道如何做到这一点，但是，我自己签署他们的程序集可能会产生什么样的潜在影响？

以下是有关该场景的一些附加信息：

*   该程序集用于与我们不自己构建的第三方服务通信。
*   此时，未签名的程序集仅用于获取转换为内部开发的新格式的信息，因此我们不希望为获得签名程序集而向第三方支付支持，因为我们是逐步淘汰。
*   这个第三方程序集只是.NET 应用程序与不是用.NET 编写的第三方API 接口的程序集（我认为它是用C/C++ 编写的）。

我主要担心的是，如果我签署程序集，它将无法与服务交互/使用第三方安装的本机程序集时会出现问题，尽管我以前从未这样做过，所以我不需要知道在签署第三方程序集时是否还有其他需要注意的事项。非常感谢您在清除此问题方面的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:27:22.197

就我而言，当我签署我们的第三方程序集时，这一切都结束了。但是，在签署第三方程序集时需要考虑一些事项：

*   程序集中的任何本机调用都可能会失败
*   修改第三方程序集可能违反您的软件协议

这些是迄今为止我被告知的唯一问题（假设您首先正确签署了程序集）。

同样作为仅供参考，在我的情况下，最好从项目引用中删除未签名的 DLL，并使用 Assembly.Load 或 Assembly.LoadFile 从已签名的程序集中加载未签名的程序集。

# django - Django 模型方法中的“自我”

> ID：15933896
> 
> 赞同：0
> 
> 时间：2013-04-10T18:43:51.837
> 
> 标签：django, django-models, python-2.7

我有一些模型包含以“the”开头的标题。我编写了一个小正则表达式辅助函数来将“the”移到末尾（例如，“The Dogg Pound”->“Dogg Pound, The”）。`NameError: name 'self' is not defined`问题是，当我尝试验证我的模型时，我不断得到。我不完全确定为什么会这样，因为我认为我所做的与网站上的模型方法示例没有什么不同。我的代码：

```
from django.db import models
import re

def de_the(s):
    m = re.match(r'(th[ea]) (.*)', s, re.I | re.U)
    if m:
        return '{}, {}'.format(m.group(2), m.group(1))
    else:
        return s
...
class Album(models.Model):
    album = models.CharField(max_length=255, null=True, blank=True)
    artist = models.ForeignKey('Artist', null=True, blank=True)
    year = models.IntegerField(unique=False, null=True, blank=True)

    def _get_sort_name(self):
        return de_the(self.__unicode__())

    def __unicode__(self):
        try:
            return self.album
        except AttributeError, TypeError:
            return None

    s_n = property(_get_sort_name)
    sort_name = models.CharField(max_length=255, null=True, blank=True, default=self.s_n)

class Meta:
    ordering = ["sort_name"] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:46:27.790

在您的模型中`class Album`：

```
sort_name = models.CharField(max_length=255, null=True, blank=True, default=self.s_n) 
```

`self.s_n`应该是公正的`s_n`

```
sort_name = models.CharField(max_length=255, null=True, blank=True, default=s_n) 
```

# java - 缓冲 JavaScript 并附加到页面末尾的 JSP 库

> ID：15933901
> 
> 赞同：3
> 
> 时间：2013-04-10T18:44:04.750
> 
> 标签：java, javascript, jsp, tags

我有一个 JSP 主页，其中包含多个页面片段（页眉、主要内容、页脚等）。这些片段包含一些与它们相关的 Javascript 代码。

现在这些文件中的 js 在它们的末尾，包裹在 jQuery`$(document).ready`中。

是否有一个 JSP 标记/库可用于“缓冲”/排队这些片段中的所有内联 Javascript 并将其附加到主文档的最后？

我的如意用法：

**主.jsp**

```
<jsp:include page="header.jsp" />
<jsp:include page="main.jsp" />
...
<lib:js-out/> 
```

**头文件.jsp**

```
 <h1 id="hi">Hi there</h1>
   <lib:js-buffer>
       $("#hi").coolAnimation();
   </lib:js-buffer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:35:21.763

您可以编写自己的 js-buffer tag-lib 将这些全部保存到最后包含的文件中。但是，这对我来说似乎有问题。每次包含这些页面时，它都会写入文件......这是一种资源浪费，并且显然可能导致在繁忙的流量下写入访问违规。要么，要么您必须以某种方式跟踪您的 jsp 文件和标签库正在创建的包含文件的更新日期。

# css - 将鼠标悬停在某列上时如何保持该列突出显示？

> ID：15933907
> 
> 赞同：0
> 
> 时间：2013-04-10T18:44:30.933
> 
> 标签：css, hover, dreamweaver, highlight, css-tables

这学期我在上一门网络简介课，我最重要的是我必须做的事情，所以没有什么能阻止我学习我想使用的东西。我在第一行设置了一个包含类别的表格，接下来的几行是数字，就像 Jeopardy 游戏一样设置。当我滚动一列时，我希望整个列突出显示，以下列依此类推。我的问题是，当我将鼠标悬停在我的列上时，它会突出显示该列，但是当我向下查看该列中的每个特定单元格时，它们会逐渐取消突出显示。我只是想让他们保持突出！我从事 CSS 工作，我以前从未使用过 Jquery，只使用过一点 Javascript，但我愿意为所有人接收信息。如果可能的话，最好是 CSS。

**CSS**

```
td:hover{
    background-color: 5a5b93;
}

td {
    position: relative;
}

td:hover::after {
    background-color: #563A81;
    content: '\00a0';
    height: 10000px;
    left: 0;
    position:absolute;
    width: 100%;
    z-index: -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:14:14.433

我看不到如何使用 CSS 来完成此操作。这是一个jQuery 的[小提琴](http://jsfiddle.net/zp5mr/1/)。

## 片段

```
var th = $("th, td");

th.each(function() {
    var $this = $(this),
        n = $this.index() + 1;
    $this.hover(function() {
        var col = $("tr > td:nth-child(" + n + ")");
        col.addClass("hovered");
    });
}); 
```

## 用法

jQuery 是一个 Javascript 库。这意味着它需要源代码。在执行 jQuery 脚本之前，需要加载库本身，因为默认情况下浏览器不“知道”jQuery。您可以通过在文档中添加脚本来做到这一点。最好**在**您的样式表 ( *`*.css`*) 之后和其他样式表**之前***`<script>`*。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

现在已经解决了，我们可以将上面的代码添加到我们的文档中。不过要小心！JavaScript 只能在元素已经加载时调用它。那么，我们想要做的是在整个文档（以及我们需要的元素）被加载时执行我们的代码片段。我们可以通过将上述代码放入 doc-ready 函数中来做到这一点：

```
$(document).ready(function () {
    var th = $("th, td");

    th.each(function () {
        var $this = $(this),
            n = $this.index() + 1;
        $this.hover(function () {
            var col = $("tr > td:nth-child(" + n + ")");
            col.addClass("hovered");
        });
    });
}); 
```

请记住将此代码段放在`<script>`-tags 和jQuery 库**之后。**

您的文档的“头部”看起来有点像这样（按顺序）：

```
<head>
<!-- Bunch of meta tags -->
<link href="/stylesheet.css" rel="stylesheet" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        var th = $("th, td");

        th.each(function () {
            var $this = $(this),
                n = $this.index() + 1;
            $this.hover(function () {
                var col = $("tr > td:nth-child(" + n + ")");
                col.addClass("hovered");
            });
        });
    });
</script>
</head> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T23:37:16.650

我认为你需要一些 jquery ...这里有一个关于突出显示列[http://css-tricks.com/row-and-column-highlighting/](http://css-tricks.com/row-and-column-highlighting/)的很好的教程，这是一个带有工作示例的[jsfiddle](http://jsfiddle.net/dylanholmes222/XbKWA/)啧啧。

**HTML**

```
<table>  
<colgroup></colgroup>
<colgroup class="slim"></colgroup>
<colgroup class="slim"></colgroup>
<colgroup class="slim"></colgroup>
<colgroup class="slim"></colgroup>   
<thead>
      <tr>
           <th></th>
           <th></th>
           <th></th>
           <th></th>
           <th></th>
       </tr>
    </thead>       
    <tbody>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
   </tbody> 
```

**CSS**

```
* { margin: 0; padding: 0; }
body { font: 14px Georgia, serif; }

#page-wrap { width: 600px; margin: 0 auto; }

table { border-collapse: collapse; width: 100%; }
td, th { border: 1px solid #ccc; padding: 10px; }

.slim { width: 88px; }
.hover { background-color: #eee; } 
```

**JS**

```
$(function() {

  $("table").delegate('td','mouseover mouseleave', function(e) {
    if (e.type == 'mouseover') {
      $(this).parent().addClass("hover");
      $("colgroup").eq($(this).index()).addClass("hover");
    } else {
      $(this).parent().removeClass("hover");
      $("colgroup").eq($(this).index()).removeClass("hover");
    }
  });

}); 
```

# android - Android OBJ to VBO loader，垃圾回收循环，如何改进？

> ID：15933908
> 
> 赞同：0
> 
> 时间：2013-04-10T18:44:31.830
> 
> 标签：android, opengl-es, garbage-collection, vbo, wavefront

我最近刚刚获得了一个 OBJ 加载器，并查看了 Android 应用程序在顶点、法线和纹理坐标方面正常工作，但为了正确跟踪这些数据值，我最终创建了很多单独的对象。我在网上读到的一件事是长字符串或大字符串数组/数组列表占用了大量的内存。我试图摆脱这两种单独的方法，一种将文件解析为字符串的 ArrayList，另一种通过该 ArrayList 读取，方法是将两者结合起来，同时将文件中的行存储删除到一个大的 ArrayList 中。我替换了我的代码，以便它在读取文件时解释文件，但这也没有减少模型加载时间。我使用的测试模型是 Suzanne 猴头，在 Blender 中细分一次并导出为 OBJ，大约有 2000 个顶点。我不确定还能做什么来抵御垃圾收集器。另请注意，这是为 Android 2.2 构建的，因此我无法像在 Android 3.0 及更高版本中那样指定更大的堆大小。非常感谢任何可以给出的指针，因为我想让这个加载器尽快加载，但我不完全确定如何做到这一点。

这是迄今为止的来源：

```
public class OBJToolkit {
    private static ArrayList<String> parseOBJ(String modelLocation) throws IOException
    {
        BufferedReader reader = new BufferedReader(new FileReader(new File(modelLocation)));
        ArrayList<String> lines = new ArrayList<String>();
        while(reader.ready())
        {
            lines.add(reader.readLine());
        }
        reader.close();
        reader = null;
        return lines;
    }

    public static Mesh loadOBJ(String modelLocation) throws FileNotFoundException, IOException
    {
        Log.d("OBJToolkit", "Location searched for model: " + modelLocation);

        ArrayList<Vector3f> allVertices = new ArrayList<Vector3f>();
        ArrayList<Vector2f> allTextureCoords = new ArrayList<Vector2f>();
        ArrayList<Vector3f> allNormals = new ArrayList<Vector3f>();

        ArrayList<Face> faces = new ArrayList<Face>();

        Mesh mesh = new Mesh();

        ArrayList<String> lines = parseOBJ(modelLocation);

        Log.d("OBJToolkit", "About to read the contents of the model");
        for (String line : lines)
        {
            if (line == null)
                break;

            if (line.startsWith("v "))
            {
                allVertices.add(new Vector3f(Float.valueOf(line.split(" ")[1]), Float.valueOf(line.split(" ")[2]), Float.valueOf(line.split(" ")[3])));
            }

            if (line.startsWith("vt "))
            {
                allTextureCoords.add(new Vector2f(Float.valueOf(line.split(" ")[1]),Float.valueOf(line.split(" ")[2])));
            }

            if (line.startsWith("vn "))
            {
                allNormals.add(new Vector3f(Float.valueOf(line.split(" ")[1]), Float.valueOf(line.split(" ")[2]), Float.valueOf(line.split(" ")[3])));
            }

            if (line.startsWith("f "))
            {
                //Log.d("OBJToolkit", line);
                Face f = new Face();
                String[] faceVertexArray = line.split(" ");

                for (int index = 1; index < faceVertexArray.length; index++)
                {
                    String[] valueArray = faceVertexArray[index].split("/");

                    if (allTextureCoords.size() > 0)
                        f.addVertex(new Vertex(allVertices.get(Integer.valueOf(valueArray[0]) - 1), allNormals.get(Integer.valueOf(valueArray[2]) - 1), allTextureCoords.get(Integer.valueOf(valueArray[1]) - 1)));
                    else
                        f.addVertex(new Vertex(allVertices.get(Integer.valueOf(valueArray[0]) - 1), allNormals.get(Integer.valueOf(valueArray[2]) - 1), new Vector2f(0, 0)));
                }
                faces.add(f);
            }
        }

        Log.d("OBJToolkit", "Number of vertices: " + allVertices.size());
        Log.d("OBJToolkit", "Number of normals: " + allNormals.size());
        Log.d("OBJToolkit", "Number of texture coords: " + allTextureCoords.size());

        lines = null;
        allVertices = null;
        allNormals = null;
        allTextureCoords = null;

        ArrayList<Vector3f> VBOVertices = new ArrayList<Vector3f>();
        ArrayList<Vector2f> VBOTextureCoords = new ArrayList<Vector2f>();
        ArrayList<Vector3f> VBONormals = new ArrayList<Vector3f>();
        ArrayList<Integer> VBOIndices = new ArrayList<Integer>();

        Log.d("OBJToolkit", "About to reorganize each point of data");
        int counter = 0;
        for (Face f : faces)
        {
            for (Vertex v : f.vertices)
            {
                VBOVertices.add(v.position);
                VBONormals.add(v.normal);
                VBOTextureCoords.add(v.textureCoord);
                VBOIndices.add(counter);
                counter++;
            }
        }

        faces = null;

        mesh.createBuffers(vector3fListToFloatArray(VBOVertices), integerListToShortArray(VBOIndices), null, vector2fListToFloatArray(VBOTextureCoords), vector3fListToFloatArray(VBONormals));

        VBOVertices = null;
        VBONormals = null;
        VBOTextureCoords = null;
        VBOIndices = null;
        return mesh;
    }

    public static void printFloatArrayList(ArrayList<Float> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static String floatArrayToString(ArrayList<Float> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        return strToPrint;
    }

    public static String vector3fArrayToString(ArrayList<Vector3f> list)
    {
        String strToPrint = "";
        for (Vector3f v : list)
        {
            strToPrint += v.x + ", ";
            strToPrint += v.y + ", ";
            strToPrint += v.z + ", ";
        }
        return strToPrint;
    }

    public static void printStringArray(String[] list)
    {
        String strToPrint = "";
        for (String s : list)
        {
            strToPrint += s + ",";
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static void printIntegerArrayList(ArrayList<Integer> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static float[] floatListToFloatArray(ArrayList<Float> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Float");
        float[] returnArray = new float[list.size()];
        int counter = 0;
        for (Float i : list)
        {
            returnArray[counter] = i.floatValue();
            counter++;
        }
        return returnArray;
    }

    public static short[] integerListToShortArray(ArrayList<Integer> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Integer");
        short[] returnArray = new short[list.size()];
        int counter = 0;
        for (int i : list)
        {
            returnArray[counter] = (short)i;
            counter++;
        }
        return returnArray;
    }

    public static float[] vector3fListToFloatArray(ArrayList<Vector3f> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Vector3f");
        float[] returnArray = new float[list.size() * 3];
        int counter = 0;
        for (Vector3f v : list)
        {
            returnArray[counter] = v.x;
            counter++;
            returnArray[counter] = v.y;
            counter++;
            returnArray[counter] = v.z;
            counter++;
        }

        return returnArray;
    }

    public static float[] vector2fListToFloatArray(ArrayList<Vector2f> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Vector2f");
        float[] returnArray = new float[list.size() * 2];
        int counter = 0;
        for (Vector2f v : list)
        {
            returnArray[counter] = v.x;
            counter++;
            returnArray[counter] = v.y;
            counter++;
        }

        return returnArray;
    }
} 
```

我考虑过替换使用我制作的 Vector3f 和 Vector2f 类并改用数组，但我不确定这是否真的会减少内存使用量，因为数组对象具有所有额外的功能我不需要。

我还尝试将不再需要的东西设置为 null，希望 GC 会自动摆脱它们，在堆中留下更多内存，但这似乎根本没有帮助。

OBJToolkit 类是这里的主类，但以防万一我将在下面包含其他相关类：

网：

```
public class Mesh { 
    Bitmap bitmap = null;

    private FloatBuffer verticesBuffer;
    private ShortBuffer indicesBuffer;
    private FloatBuffer normalsBuffer;
    private int numOfIndices = -1;
    private float[] rgba = new float[] {1.0f, 1.0f, 1.0f, 1.0f};
    private FloatBuffer colorBuffer;
    private FloatBuffer mTextureBuffer;
    private int mTextureId = -1;
    private Bitmap mBitmap;
    private boolean mShouldLoadTexture = false;

    public float x = 0, y = 0, z = 0, rx = 0, ry = 0, rz = 0;

    public Mesh() {

    }

    public void draw(GL10 gl)
    {
        //Log.d("Mesh", "About to render mesh");
        gl.glFrontFace(GL10.GL_CCW);
        gl.glEnable(GL10.GL_CULL_FACE);
        gl.glCullFace(GL10.GL_BACK);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_NORMAL_ARRAY);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, verticesBuffer);
        gl.glNormalPointer(GL10.GL_FLOAT, 0, normalsBuffer);
        gl.glColor4f(rgba[0], rgba[1], rgba[2], rgba[3]);
        if (colorBuffer != null)
        {
            gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
            gl.glColorPointer(4, GL10.GL_FLOAT, 0, colorBuffer);
        }

        if (mShouldLoadTexture)
        {
            loadGLTexture(gl);
            mShouldLoadTexture = false;
        }

        if (mTextureId != -1 && mTextureBuffer != null)
        {
            gl.glEnable(GL10.GL_TEXTURE_2D);
            gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
            gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, mTextureBuffer);
            gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureId);
        }

        gl.glTranslatef(x, y, z);
        gl.glRotatef(rx, 1, 0, 0);
        gl.glRotatef(ry, 0, 1, 0);
        gl.glRotatef(rz, 0, 0, 1);
        gl.glDrawElements(GL10.GL_TRIANGLES, numOfIndices, GL10.GL_UNSIGNED_SHORT, indicesBuffer);
        gl.glDisableClientState(GL10.GL_NORMAL_ARRAY);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        if (mTextureId != -1 && mTextureBuffer != null)
        {
            gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
        }
        gl.glDisable(GL10.GL_CULL_FACE);
    }

    public void setTexture(Bitmap bitmap) {
        this.bitmap = bitmap;
    }

    public void createBuffers(float[] vertices, short[] indices, float[] colors, float[] textureCoords, float[] normals)
    {
        Log.d("MeshCreateBuffers", "Vertices: " + floatArrayToString(vertices));
        setVertices(vertices);
        Log.d("MeshCreateBuffers", "Indices: " + shortArrayToString(indices));
        setIndices(indices);
        if (colors != null)
            setColors(colors);
        if (textureCoords != null)
            setTextureCoordinates(textureCoords);
        if (normals != null)
            setNormals(normals);
        Log.d("MeshCreateBuffers", "Texture Coors: " + floatArrayToString(textureCoords));
    }

    public String floatArrayToString(float[] array)
    {
        String returnString = "";
        for (int i = 0; i < array.length; i++)
        {
            returnString += ", " + array[i];
        }
        if (returnString.length() > 2)
            return returnString.substring(2);
        else
            return returnString;
    }

    public String shortArrayToString(short[] array)
    {
        String returnString = "";
        for (int i = 0; i < array.length; i++)
        {
            returnString += ", " + array[i];
        }
        if (returnString.length() > 2)
            return returnString.substring(2);
        else
            return returnString;
    }

    protected void setVertices(float[] vertices)
    {
        ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
        vbb.order(ByteOrder.nativeOrder());
        verticesBuffer = vbb.asFloatBuffer();
        verticesBuffer.put(vertices);
        verticesBuffer.position(0);
    }

    protected void setIndices(short[] indices)
    {
        ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
        ibb.order(ByteOrder.nativeOrder());
        indicesBuffer = ibb.asShortBuffer();
        indicesBuffer.put(indices);
        indicesBuffer.position(0);
        numOfIndices = indices.length;
    }

    protected void setColor(float red, float green, float blue, float alpha)
    {
        rgba[0] = red;
        rgba[1] = green;
        rgba[2] = blue;
        rgba[3] = alpha;
    }

    protected void setColors(float[] colors)
    {
        ByteBuffer cbb = ByteBuffer.allocateDirect(colors.length * 4);
        cbb.order(ByteOrder.nativeOrder());
        colorBuffer = cbb.asFloatBuffer();
        colorBuffer.put(colors);
        colorBuffer.position(0);
    }

    protected void setTextureCoordinates(float[] textureCoords)
    {
        ByteBuffer byteBuf = ByteBuffer.allocateDirect(textureCoords.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mTextureBuffer = byteBuf.asFloatBuffer();
        mTextureBuffer.put(textureCoords);
        mTextureBuffer.position(0);
    }

    protected void setNormals(float[] normals)
    {
        ByteBuffer byteBuf = ByteBuffer.allocateDirect(normals.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        normalsBuffer = byteBuf.asFloatBuffer();
        normalsBuffer.put(normals);
        normalsBuffer.position(0);
    }

    public void loadBitmap(Bitmap bitmap)
    {
        this.mBitmap = bitmap;
        mShouldLoadTexture = true;
    }

    private void loadGLTexture(GL10 gl)
    {
        int[] textures = new int[1];
        gl.glGenTextures(1, textures, 0);
        mTextureId = textures[0];
        gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureId);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, mBitmap, 0);
    }
} 
```

脸：

```
public class Face {
    ArrayList<Vertex> vertices = new ArrayList<Vertex>();

    public Face()
    {

    }

    public void addVertex(Vertex vertex)
    {
        vertices.add(vertex);
    }
} 
```

顶点：

```
public class Vertex {
    public Vector3f position, normal;
    public Vector2f textureCoord;

    public Vertex(Vector3f pos, Vector3f norm, Vector2f textCoord)
    {
        position = pos;
        normal = norm;
        textureCoord = textCoord;
    }
} 
```

矢量3f：

```
public class Vector3f {
    public float x, y, z;

    public Vector3f()
    {
        setTo(0, 0, 0);
    }

    public Vector3f(float x, float y, float z)
    {
        setTo(x, y, z);
    }

    public void setTo(float x, float y, float z)
    {
        this.x = x;
        this.y = y;
        this.z = z;
    }

    public float lengthSquared()
    {
        return x*x + y*y + z*z;
    }

    public float length()
    {
        return (float) Math.sqrt(lengthSquared());
    }

    public Vector3f add(Vector3f v)
    {
        return new Vector3f(x + v.x, y + v.y, z + v.z);
    }

    public Vector3f addAndSet(Vector3f v)
    {
        x += v.x;
        y += v.y;
        z += v.z;
        return this;
    }

    public Vector3f crossProduct(Vector3f v)
    {
        return new Vector3f(y * v.z - z * v.y,
                z * v.x - x * z,
                x * v.y - y * v.x
                );
    }

    public Vector3f negate()
    {
        x *= -1;
        y *= -1;
        z *= -1;
        return this;
    }

    public Vector3f normalize()
    {
        float l = length();

        return new Vector3f(x / l, y / l, z / l);
    }

    public float dotProduct(Vector3f v)
    {
        return x * v.x + y * v.y + z * v.z;
    }

    public float angleBetween(Vector3f v)
    {
        float dls = dotProduct(v) / (length() * v.length());
        if (dls < -1f)
            dls = -1f;
        else if (dls > 1.0f)
            dls = 1.0f;
        return (float)Math.acos(dls);
    }

    public Vector3f scale(float scale)
    {
        return new Vector3f(x * scale, y * scale, z * scale);
    }

    public Vector3f scaleAndSet(float scale)
    {
        x *= scale;
        y *= scale;
        z *= scale;
        return this;
    }

} 
```

矢量2f：

```
public class Vector2f {
    public float x, y;

    public Vector2f()
    {
        setTo(0, 0);
    }

    public Vector2f(float x, float y)
    {
        setTo(x, y);
    }

    public void setTo(float x, float y)
    {
        this.x = x;
        this.y = y;
    }

    public float lengthSquared()
    {
        return x * x + y * y;
    }

    public float length()
    {
        return (float) Math.sqrt(lengthSquared());
    }

    public Vector2f add(float x, float y)
    {
        return new Vector2f(this.x + x, this.y + y);
    }

    public Vector2f addAndSet(float x, float y)
    {
        this.x += x;
        this.y += y;
        return this;
    }

    public Vector2f negate()
    {
        x *= -1;
        y *= -1;
        return this;
    }

    public Vector2f normalize()
    {
        float l = length();
        return new Vector2f(x / l, y / l);
    }

    public float dotProduct(Vector2f v)
    {
        return x * v.x + y * v.y;
    }

    public float angleBetween(Vector2f v)
    {
        float dls = dotProduct(v) / (length() * v.length());
        if (dls < -1f)
            dls = -1f;
        else if (dls > 1.0f)
            dls = 1.0f;
        return (float)Math.acos(dls);
    }

    public Vector2f scale(float scale)
    {
        return new Vector2f(x * scale, y * scale);
    }

    public Vector2f scaleAndSet(float scale)
    {
        x *= scale;
        y *= scale;
        return this;
    }
} 
```

主要活动：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        MyGLSurfaceView view = new MyGLSurfaceView(this);
        OpenGLRenderer renderer = new OpenGLRenderer();
        view.renderer = renderer;
        //renderer.plane.loadBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher));
        view.setRenderer(renderer);
        setContentView(view);
    }
}

class MyGLSurfaceView extends GLSurfaceView implements OnGestureListener, OnTouchListener
{
    OpenGLRenderer renderer;
    GestureDetector detector;

    float lastX = 0, lastY = 0;

    float onDown = 0, onUp = 0;

    public MyGLSurfaceView(Context context) {
        super(context);
        super.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        detector = new GestureDetector(this);
        setOnTouchListener(this);
    }

    @Override
    public boolean onTouchEvent(MotionEvent me)
    {
        detector.onTouchEvent(me);
        //Log.d("OBJToolkit", "X: " + me.getX());
        //Log.d("OBJToolkit", "Y: " + me.getY());
        return super.onTouchEvent(me);
    }

    @Override
    public boolean onTouch(View v, MotionEvent me)
    {
        Log.d("OBJToolkit", "Registered onTouch event");
        Log.d("OBJToolkit", "X: " + me.getX());
        Log.d("OBJToolkit", "Y: " + me.getY());
        if (me.getAction() == MotionEvent.ACTION_DOWN)
        {
            lastY = me.getY();
        }
        else if (me.getAction() == MotionEvent.ACTION_MOVE)
        {
            renderer.moveMesh(me.getY() - lastY);
        }
        /*
        if (lastX == 0)
        {
            lastX = me.getX();
        }
        if (lastY == 0)
        {
            lastY = me.getY();
        }
        Log.d("OBJToolkit", String.valueOf((me.getY() - lastY) * 0.1f));
        renderer.moveMesh(me.getY() - lastY);
        */
        lastY = me.getY();

        return true;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onDown Event");
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onFling Event");
        return false;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onLongPress Event");

    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onScroll Event");
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onShowPress Event");
    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        // TODO Auto-generated method stub
        //Log.d("OBJToolkit", "Registered onSIngleTapUp Event");
        return false;
    }

} 
```

OpenGL渲染器：

```
public class OpenGLRenderer implements Renderer
{
    //SmoothColoredSquare smoothSquare = new SmoothColoredSquare();
    //Cube cube = new Cube(1, 1, 1);
    public Mesh plane;

    public float meshMoveSpeed = .05f, planePosition = 0f;

    float zNear = 0.01f, zFar = 1000.0f, fieldOfView = 45.0f, size;

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        Log.d(getClass().getName(), "About to attempt to load model");
        try {
            plane = OBJToolkit.loadOBJ(Environment.getExternalStorageDirectory().getPath() + "/testModel.obj");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            Log.d("FNF", "testModel.obj not found");
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.d("IOE", "testModel.obj not found IOE");
            e.printStackTrace();
        }
        //.z = -7.7f;
        //plane.rx = -10;
        gl.glEnable(GL11.GL_DEPTH_TEST);
        gl.glDepthFunc(GL10.GL_LEQUAL);
        gl.glMatrixMode(GL11.GL_MODELVIEW);
        gl.glShadeModel(GL11.GL_SMOOTH);
        gl.glClearDepthf(1.0f);
        gl.glEnable(GL11.GL_LIGHTING);
        gl.glEnable(GL11.GL_LIGHT0);
        float ambientColor[] = {0.2f, 0.2f, 0.2f, 1.0f};
        float diffuseColor[] = {0.2f, 0.2f, 0.2f, 1.0f};
        float lightPosition[] = {-2f, 5f, -2f, 1f};
        gl.glLightfv(GL11.GL_LIGHT0, GL11.GL_AMBIENT, ambientColor, 0);
        gl.glLightfv(GL11.GL_LIGHT0, GL11.GL_DIFFUSE, diffuseColor, 0);
        gl.glLightfv(GL11.GL_LIGHT0, GL11.GL_POSITION, lightPosition, 0);
        gl.glLoadIdentity();
        gl.glClearColor(0.8f, 0.8f, 0.8f, 1.0f);
        gl.glHint(GL11.GL_PERSPECTIVE_CORRECTION_HINT, GL11.GL_NICEST);
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        //Reset viewport
        gl.glViewport(0, 0, width, height);
        //Select projection matrix
        gl.glMatrixMode(GL10.GL_PROJECTION);
        size = (float) (zNear * Math.tan((fieldOfView / 180.0f) * Math.PI) / 2.0f);
        gl.glFrustumf(-size, size, -size / (width / height), size / (width / height), zNear, zFar);
        gl.glViewport(0, 0, width, height);
        //Reset projection matrix
        gl.glLoadIdentity();
        //Calculate aspect ratio of window
        GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);
        //GLU.gluLookAt(gl, -5f, 2f, 0f, 0f, 0f, 0f, 0f, 1f, 0f);
        //Select modelview matrix
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        //Reset modelview matrix
        gl.glLoadIdentity();
    }

    @Override
    public void onDrawFrame(GL10 gl) {
        //Clear the screen before drawing
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        //plane.ry += 2f;
        //plane.rz += 2f;

        plane.x += meshMoveSpeed;
        plane.z = planePosition;
        if (plane.x > 3f)
        {
            meshMoveSpeed *= -1;
        }
        else if(plane.x < -3f)
        {
            meshMoveSpeed *= -1;
        }

        //Reset the current position held by OpenGL, otherwise the
        //camera will be pushed farther and farther back every frame
        gl.glLoadIdentity();

        //Move the camera backwards in order to actually see the face
        gl.glTranslatef(0, 0f, -15f);

        plane.draw(gl);
    }

    public void moveMesh(float distance)
    {
        planePosition += distance * 0.05f;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:42:55.223

字符串...太多的字符串让 GC 卡住试图清除它们。部分问题在于将文件读取到一个大的字符串数组列表中，但最大的问题在于 Mesh 类中的调试调用。它遍历传入数组中的每个对象，并通过 += 和逗号分隔符将其添加到字符串中。这导致内存中没有使用的数千个字符串。不用说，我已经重写了一些应用程序并删除了调试调用，因为它们现在无论如何都不需要了，但我想我会在某个时候重写它们以使用 StringBuilder。我真正改变的唯一代码是在 OBJToolkit 类中，所以这里是：

```
public class OBJToolkit {

    public static String getStringFromFile(String filePath) throws Exception
    {
        File fl = new File(filePath);
        FileInputStream fin = new FileInputStream(fl);
        String returnString = convertStreamToString(fin);
        fin.close();
        return returnString;
    }

    public static String convertStreamToString(InputStream is) throws Exception
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null)
        {
            sb.append(line).append("\n");
        }
        return sb.toString();
    }

    public static Mesh loadOBJ(String modelLocation) throws Exception
    {
        Log.d("OBJToolkit", "Location searched for model: " + modelLocation);

        ArrayList<Vector3f> allVertices = new ArrayList<Vector3f>();
        ArrayList<Vector2f> allTextureCoords = new ArrayList<Vector2f>();
        ArrayList<Vector3f> allNormals = new ArrayList<Vector3f>();

        ArrayList<Face> faces = new ArrayList<Face>();

        Mesh mesh = new Mesh();

        String lines = getStringFromFile(modelLocation);

        Log.d("OBJToolkit", "About to read the contents of the model");
        String[] individualLines = lines.split("\\n");

        int numberOfLines = individualLines.length;
        for (int i = 0; i < numberOfLines; i++)
        {
            String line = individualLines[i];
            if (line == null)
                break;

            if (line.startsWith("v "))
            {
                allVertices.add(new Vector3f(Float.valueOf(line.split(" ")[1]), Float.valueOf(line.split(" ")[2]), Float.valueOf(line.split(" ")[3])));
            }

            if (line.startsWith("vt "))
            {
                allTextureCoords.add(new Vector2f(Float.valueOf(line.split(" ")[1]),Float.valueOf(line.split(" ")[2])));
            }

            if (line.startsWith("vn "))
            {
                allNormals.add(new Vector3f(Float.valueOf(line.split(" ")[1]), Float.valueOf(line.split(" ")[2]), Float.valueOf(line.split(" ")[3])));
            }

            if (line.startsWith("f "))
            {
                //Log.d("OBJToolkit", line);
                Face f = new Face();
                String[] faceVertexArray = line.split(" ");

                for (int index = 1; index < faceVertexArray.length; index++)
                {
                    String[] valueArray = faceVertexArray[index].split("/");

                    if (allTextureCoords.size() > 0)
                        f.addVertex(new Vertex(allVertices.get(Integer.valueOf(valueArray[0]) - 1), allNormals.get(Integer.valueOf(valueArray[2]) - 1), allTextureCoords.get(Integer.valueOf(valueArray[1]) - 1)));
                    else
                        f.addVertex(new Vertex(allVertices.get(Integer.valueOf(valueArray[0]) - 1), allNormals.get(Integer.valueOf(valueArray[2]) - 1), new Vector2f(0, 0)));
                }
                faces.add(f);
            }
        }

        Log.d("OBJToolkit", "Number of vertices: " + allVertices.size());
        Log.d("OBJToolkit", "Number of normals: " + allNormals.size());
        Log.d("OBJToolkit", "Number of texture coords: " + allTextureCoords.size());

        lines = null;
        allVertices = null;
        allNormals = null;
        allTextureCoords = null;

        ArrayList<Vector3f> VBOVertices = new ArrayList<Vector3f>();
        ArrayList<Vector2f> VBOTextureCoords = new ArrayList<Vector2f>();
        ArrayList<Vector3f> VBONormals = new ArrayList<Vector3f>();
        ArrayList<Integer> VBOIndices = new ArrayList<Integer>();

        Log.d("OBJToolkit", "About to reorganize each point of data");
        int counter = 0;
        for (Face f : faces)
        {
            for (Vertex v : f.vertices)
            {
                VBOVertices.add(v.position);
                VBONormals.add(v.normal);
                VBOTextureCoords.add(v.textureCoord);
                VBOIndices.add(counter);
                counter++;
            }
        }

        faces = null;

        mesh.createBuffers(vector3fListToFloatArray(VBOVertices), integerListToShortArray(VBOIndices), null, vector2fListToFloatArray(VBOTextureCoords), vector3fListToFloatArray(VBONormals));

        VBOVertices = null;
        VBONormals = null;
        VBOTextureCoords = null;
        VBOIndices = null;
        return mesh;
    }

    public static void printFloatArrayList(ArrayList<Float> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static String floatArrayToString(ArrayList<Float> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        return strToPrint;
    }

    public static String vector3fArrayToString(ArrayList<Vector3f> list)
    {
        String strToPrint = "";
        for (Vector3f v : list)
        {
            strToPrint += v.x + ", ";
            strToPrint += v.y + ", ";
            strToPrint += v.z + ", ";
        }
        return strToPrint;
    }

    public static void printStringArray(String[] list)
    {
        String strToPrint = "";
        for (String s : list)
        {
            strToPrint += s + ",";
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static void printIntegerArrayList(ArrayList<Integer> list)
    {
        String strToPrint = "";
        for (float value : list)
        {
            strToPrint += (value + ", ");
        }
        Log.d("OBJToolkit", strToPrint);
    }

    public static float[] floatListToFloatArray(ArrayList<Float> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Float");
        float[] returnArray = new float[list.size()];
        int counter = 0;
        for (Float i : list)
        {
            returnArray[counter] = i.floatValue();
            counter++;
        }
        return returnArray;
    }

    public static short[] integerListToShortArray(ArrayList<Integer> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Integer");
        short[] returnArray = new short[list.size()];
        int counter = 0;
        for (int i : list)
        {
            returnArray[counter] = (short)i;
            counter++;
        }
        return returnArray;
    }

    public static float[] vector3fListToFloatArray(ArrayList<Vector3f> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Vector3f");
        float[] returnArray = new float[list.size() * 3];
        int counter = 0;
        for (Vector3f v : list)
        {
            returnArray[counter] = v.x;
            counter++;
            returnArray[counter] = v.y;
            counter++;
            returnArray[counter] = v.z;
            counter++;
        }

        return returnArray;
    }

    public static float[] vector2fListToFloatArray(ArrayList<Vector2f> list)
    {
        Log.d("OBJToolkit", "Converting ArrayList Vector2f");
        float[] returnArray = new float[list.size() * 2];
        int counter = 0;
        for (Vector2f v : list)
        {
            returnArray[counter] = v.x;
            counter++;
            returnArray[counter] = v.y;
            counter++;
        }

        return returnArray;
    }
} 
```

我希望这可以以某种方式帮助某人。

# wordpress - 密码保护 WordPress 博客页面模板中的类别输出

> ID：15933909
> 
> 赞同：1
> 
> 时间：2013-04-10T18:44:35.203
> 
> 标签：wordpress, categories, password-protection, output

我正在尝试编辑一个博客存档页面模板，该模板将隐藏所有输出，除非输入密码。Currently when "Password protected" is selected, it only hides content entered into the page and not the category output as well.

显然 WordPress 有一个名为 Post_Password_Required 的函数引用，它应该包含在模板中的类别输出周围。这样，如果博客模板被调用并且也受密码保护，WordPress 将阻止所有输出，直到输入密码。

[http://codex.wordpress.org/Function_Reference/post_password_required](http://codex.wordpress.org/Function_Reference/post_password_required)

现在，在任意尝试找出将此代码放置在 page-blog.php 中的位置并且失败后，我想知道是否有人对放置它的位置有更好的了解。

我正在使用一个优雅的主题模板，他们的支持是这个问题的关键。告诉我我需要找到一个插件来执行此操作并应对联系第 3 方开发人员来解决此问题。这是博客模板的代码供参考。我很感激任何帮助。

```
<?php 
/*
Template Name: Investor
*/
?>
<?php if (is_front_page()) { ?>
<?php get_template_part('home'); ?>
<?php } else { ?>   
<?php 
$et_ptemplate_settings = array();
$et_ptemplate_settings = maybe_unserialize( get_post_meta($post->ID,'et_ptemplate_settings',true) );

$fullwidth = isset( $et_ptemplate_settings['et_fullwidthpage'] ) ? (bool) $et_ptemplate_settings['et_fullwidthpage'] : false;

$et_ptemplate_blogstyle = isset( $et_ptemplate_settings['et_ptemplate_blogstyle'] ) ? (bool) $et_ptemplate_settings['et_ptemplate_blogstyle'] : false;

$et_ptemplate_showthumb = isset( $et_ptemplate_settings['et_ptemplate_showthumb'] ) ? (bool) $et_ptemplate_settings['et_ptemplate_showthumb'] : false;

$blog_cats = isset( $et_ptemplate_settings['et_ptemplate_blogcats'] ) ? (array) $et_ptemplate_settings['et_ptemplate_blogcats'] : array();
$et_ptemplate_blog_perpage = isset( $et_ptemplate_settings['et_ptemplate_blog_perpage'] ) ? (int) $et_ptemplate_settings['et_ptemplate_blog_perpage'] : 10;
?>

<?php get_header(); ?>

<div id="content-left">

<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<div class="entry post clearfix"<?php if ($fullwidth) echo ' style="padding-right: 10px;"'; ?>>
<?php $width = 140;
$height = 140;
$classtext = 'thumbnail alignleft';
$titletext = get_the_title();

$thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext);
$thumb = $thumbnail["thumb"]; ?>

<?php if($thumb <> '' && get_option('myproduct_page_thumbnails') == 'on') { ?>
<?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext , $width, $height, $classtext); ?>
<?php }; ?>
<?php the_content(); ?>
<?php wp_link_pages(array('before' => '<p><strong>Pages:</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>

<div id="et_pt_blog">
<?php $cat_query = ''; 
if ( !empty($blog_cats) ) $cat_query = '&cat=' . implode(",", $blog_cats);
else echo '<!-- blog category is not selected -->'; ?>
<?php 
$et_paged = is_front_page() ? get_query_var( 'page' ) : get_query_var( 'paged' );
?>
<?php query_posts("showposts=$et_ptemplate_blog_perpage&paged=" . $et_paged . $cat_query); ?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<?php if ( post_password_required() ) ?>
<div class="et_pt_blogentry clearfix">
<h2 class="et_pt_title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>

<p class="et_pt_blogmeta"><?php esc_html_e('Posted','MyProduct'); ?> <?php esc_html_e('on','MyProduct'); ?> <?php the_time(get_option('myproduct_date_format')) ?>

<?php $thumb = '';
$width = 184;
$height = 184;
$classtext = '';
$titletext = get_the_title();

$thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext);
$thumb = $thumbnail["thumb"]; ?>

<?php if ( $thumb <> '' && !$et_ptemplate_showthumb ) { ?>
<div class="et_pt_thumb alignleft">
<?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>
<a href="<?php the_permalink(); ?>"><span class="overlay"></span></a>
</div> <!-- end .thumb -->
<?php }; ?>

<?php if (!$et_ptemplate_blogstyle) { ?>
<p><?php truncate_post(550);?></p>
<a href="<?php the_permalink(); ?>" class="readmore"><span><?php esc_html_e('read more','MyProduct'); ?></span></a>
<?php } else { ?>
<?php
global $more;
$more = 0;
?>
<?php the_content(); ?>
<?php } ?>
</div> <!-- end .et_pt_blogentry -->

<?php endwhile; ?>
<div class="page-nav clearfix">
<?php if(function_exists('wp_pagenavi')) { wp_pagenavi(); }
else { ?>
<?php get_template_part('includes/navigation'); ?>
<?php } ?>
</div> <!-- end .entry -->
<?php else : ?>
<?php get_template_part('includes/no-results'); ?>
<?php endif; wp_reset_query(); ?>

</div> <!-- end #et_pt_blog -->

<?php edit_post_link(esc_html__('Edit this page','MyProduct')); ?>
<div class="clear"></div>
</div> <!-- end .post -->
<?php endwhile; endif; ?>
</div> <!-- end #content-left -->

<?php if (!$fullwidth) get_sidebar(); ?>
<?php get_footer(); ?>
<?php } ?> 
```

# php - 为电子表格导入构建具有多列的数据库表；规模化的可能性

> ID：15933911
> 
> 赞同：0
> 
> 时间：2013-04-10T18:44:39.943
> 
> 标签：php, mysql, wordpress, database-design

客户希望能够每月导入一个相当庞大的数据电子表格（至少在我看来）。目前它由大约 200 行和 41 列组成。

前两列是标识符（位置的 ID 和人类可读的名称）；接下来的 39 列都是数值。这些数字实际上是“评级”，分为 39 个类别 - 但是客户刚刚暗示他们可能希望在未来扩展这些类别。

我最初的想法是创建一个模仿电子表格的数据库结构（基本上是 41 列） - 但是客户可能希望稍后添加到它，我不知道这是否是解决这个问题的最佳方法和。

我不是受过经典训练的编码员；我只是根据需要选择了一些东西，所以解决方案越简单越好。我考虑过*可能*在每个位置的基础上序列化一个关联数组：

```
----------------------------------------------------------
 ID     Name        Data                            Date
----------------------------------------------------------
 1      Newport     {niceness:1, staff:6.5, etc.}   Mar 13
 2      Stobart     {niceness:7, staff:3.1, etc.}   Mar 13
---------------------------------------------------------- 
```

...但我不知道这是否是最好的方法，或者它是否一定会按照我设想的方式工作。想法是，如果**13 年 3 月**只有 39 个类别，而**13 年 7 月**有 42 个类别，那么数据库结构不会受到影响；只是存储了一个不同的关联数组。

这种事情还可能（？）消除导入表时出现列不匹配错误的可能性 - 例如，如果他们突然决定在没有警告的情况下删除一个类别，然后尝试导入一个短列的电子表格。

**注意事项：**

我正在开发这是一个 Wordpress 插件，所以数据库表结构写在那里，并且由于 WP 的[dbDelta](http://codex.wordpress.org/Creating_Tables_with_Plugins#Creating_or_Updating_the_Table)函数，更新起来相当简单。

我还希望使用 Matt Kruse 的[PHP ExcelReader](http://code.google.com/p/php-excel-reader/)，在我最初的测试中它似乎非常出色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:13:48.273

我会将表拆分为*名称、类别*和一个名为 *names_categories* （或类似名称）的链接表

**表名称**

```
----------------------------------------------------------
 ID     Name        Date                    
----------------------------------------------------------
 1      Newport     Mar 13
 2      Stobart     Mar 13 
```

**表类别**

```
----------------------------------------------------------
 ID     Category                                    
----------------------------------------------------------
 1      niceness
 2      staff 
```

**表名_类别**（链接表）

```
----------------------------------------------------------
 id_name    id_category value                           
----------------------------------------------------------
 1          1           1
 1          2           6.5
 2          1           7
 2          2           3.1 
```

This would give you more flexibility. Even if your solution works, it's not that flexible and could be hard to do maintenance of the database in future.

# java - 数组的最大大小 - 类型不匹配：无法从 long 转换为 int

> ID：15933919
> 
> 赞同：5
> 
> 时间：2013-04-10T18:45:07.753
> 
> 标签：java, arrays, language-design

我看到数组的最大大小只能是 Int 的最大大小。为什么 Java 不允许大小为 long-Max 的数组？

```
long no = 10000000000L;
int [] nums = new int[no];//error here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:47:25.893

您必须向 Java 设计人员提出“为什么”的问题。其他人只能猜测。我的猜测是，他们认为一个 20 亿个元素的数组应该对任何人都足够（公平地说，可能是这样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-25T06:05:15.950

1.  int 大小的长度允许包含 2 ^(31) -1（“~20 亿”）个元素的数组。在绝大多数的阵列用途中，这已经足够了。

2.  这么多元素的数组将占用 2 GB 到 16 GB 的内存，具体取决于元素类型。1995 年 Java 出现时，新的 PC 只有大约 8 兆字节的 RAM。那些 32 位操作系统，即使他们使用磁盘上的虚拟内存，对他们可以分配的*连续*内存块的大小有一个实际限制，这比 2 GB 小很多，因为其他分配的东西分散在周围在进程的地址空间中。因此，int 大小的数组长度的限制是不可测试的、不可预见的，而且非常遥远。

3.  在 32 位 CPU 上，整数运算比长整数运算要快得多。

4.  数组是一种基本的内部类型，它们被大量使用。长尺寸的长度将需要额外的 4 个字节来存储每个数组，这反过来可能会影响在内存中将数组打包在一起，从而可能在它们之间浪费更多字节。（即使更长的长度几乎永远不会有用。）

5.  如果您确实需要超过 20 亿个项目的内存存储，您可以使用数组数组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T18:52:37.807

不幸的是，Java 不支持超过 2^31 个元素的数组。

即 long[] 数组需要 16 GiB 的空间。

尝试创建这个...

```
Object[] array = new Object[Integer.MAX_VALUE - 4]; 
```

你应该得到 OUTOFMEMMORY 错误...所以最大大小将是`Integer.MAX_VALUE - 5`

# apache-flex - Adobe AIR 捕获舞台并转换为 RTMP 流

> ID：15933922
> 
> 赞同：1
> 
> 时间：2013-04-10T18:45:13.423
> 
> 标签：apache-flex, air, rtmp, screen-capture, flash-media-server

我正在创建一个将在我们的服务器上运行的 AIR 应用程序。我本质上希望应用程序对应用程序的各种阶段进行屏幕捕获并将其转换为 RTMP 流以发布到 FMS 或将视频文件直接写入磁盘。

RTMP Stream 可能是最理想的。

我知道您可以很容易地获取位图数据，但我不知道如何在位图数据发生变化时将其转换为流。

有人有线索吗？

提前致谢。

# java - 一次从所有 arrayLists 中获取元素

> ID：15933923
> 
> 赞同：0
> 
> 时间：2013-04-10T18:45:23.410
> 
> 标签：java, loops, arraylist

[考虑到http://prohost.lt/stack/q.png](http://prohost.lt/stack/q.png)中描述的结构

在主数组列表中，我们有 n 个元素（子数组列表）（对于图像，我们可以考虑 n=3）。

如何通过所有子数组列表进行动态循环以获得：

sarraylist1.get(0), sarrayList2.get(0), .. sarraylistN.get(0)

如果n = 3，它将是

```
for(sarraylist1){
    for( sarraylist2){
        for(sarraylist3){
            element from every list
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:59:08.220

也许我误解了你在问什么，但是像这样简单的事情行不通吗？

```
List<List> lists = new ArrayList<List>();
for(List l : lists){
    for(List subl: l)
        Object o = subl.get(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:59:19.417

看了你的评论后，我建议你用它`recursive approach`来解决你的问题。

```
public void recursiveCall(ArrayList list)
{
  for ( Object obj : list)
  {
    if (obj instanceOf ArrayList)
    {
      recursiveCall((ArrayList)obj);
    }
    else
    {
       System.out.print(obj);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:04:46.100

根据您的图像方案，您还可以使用“for while 循环”来执行此操作：

```
for (int mainArrayElements = 0; mainArrayElements < listOfLists.size(); mainArrayElements++) {
    List arraysInMain = ((List)listOfLists.get(mainArrayElements));
    for (int subArrayElements = 0; subArrayElements < arraysInMain.size(); subArrayElements++) {
        List deepArray = ((List)listOfLists.get(subArrayElements));
        for (int innerArrayElements = 0; innerArrayElements <  deepArray.size() ; innerArrayElements++) {
            System.out.println(deepArray.get(innerArrayElements));
        }
    }
} 
```

但如前所述，递归将是解决问题的一个非常好的组合:)。

此致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:11:47.627

如果我理解正确，你有一个`List`包含 n`List`的你想要获取每个列表的第一个、第二个等元素。这段代码就是这样做的。

```
for (int i = 0; i < highestSizeOfChildrenList; i++) {
 List<Object> lstOfItemInChild = new Arraylist<Object>();
  for (List childList : mainList) {
     if (i < childList.size()) {
       lstOfItemInChild.add(childList.get(i));
     }
  }

  // lstOfItemInChild now contains all the element i of the sub arrays
} 
```

您需要知道最大 subList 的大小才能获取该列表的所有元素，这就是它所`highestSizeOfChildrenList`代表的内容。

# dreamweaver - 带有 Dreamweaver 布局的选项卡式编码窗口？

> ID：15933926
> 
> 赞同：0
> 
> 时间：2013-04-10T18:45:37.167
> 
> 标签：dreamweaver

谁能告诉我是否有一种方法可以同时在 Dreamweaver 中管理多个网站？据我所知，每次我需要从网站获取页面时，我都必须通过在“文件”下拉列表中选择另一个网站来更改当前网站......有没有办法让你可以在其中拥有类似“标签”的东西无需单击“文件”下拉菜单，选择网站，等待 FTP 连接，然后浏览该网站，即可在不同网站之间即时切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:43:39.210

我正在使用 Adob​​e Dreamweaver CS6，当我打开多个网页时，它们已经在选项卡上。在我提供的第一个屏幕截图中，您可以看到 index.html 和 album.html 都打开了。如果您单击活动窗口上的恢复按钮（带圆圈的图标），则可以像我附加的其他图像一样对其进行管理。

![](https://i.stack.imgur.com/tUvHh.jpg)

![](https://i.stack.imgur.com/SwZjX.jpg)

# html - HTML 5 画布的视差

> ID：15933927
> 
> 赞同：2
> 
> 时间：2013-04-10T18:45:41.377
> 
> 标签：html, canvas, html5-canvas, parallax

我正在开发一个在页面顶部具有全尺寸背景图像的视差网站。它目前正在使用固定位置的容器，这些容器在滚动事件上使用 jquery 进行调整。

这是一个例子

CSS

```
#bg{
      z-index: -5;
      positioned: fixed;
      width: 100%
      height: auto;
   }

#skyline{
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: auto;
   } 
```

标记

```
<div id="bg">
  <img id="skyline" src="skyline.jpg" alt="Skyline"/>
</div> 
```

然后，当触发滚动事件时，我使用 jQuery 来调整顶部位置。结果有效，但非常不稳定。我曾尝试降低图像的质量/文件大小，但从我所做的研究来看，它看起来像是因为背景覆盖的区域（重绘越大，它会越不稳定）

从我一直在做的研究看来，使用 HTML 5 画布将有助于解决这个问题。我想知道是否有人可以建议如何使用 HTML5 Canvas 实现与窗口一起调整大小的全尺寸背景。

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:55:35.813

**编辑：**我想我理解你的困惑。所以

```
dx = 0
dy = 0
dWidth = window.innerWidth // use your favorite method for obtaining the width/height
... 
```

然后您所要做的就是改变每一帧的源坐标，而 sWidth 和 sHeight 将等于 dWidth 和 dHeight（这是切片的大小，您希望它与您的屏幕匹配）。

我希望这有帮助

* * *

查看[canvas 的文档](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images)。我认为解释得很好。

查看示例 3，您可以在其中指定图像的偏移量：

```
drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) 
```

您使用的图像到底有多大？如果您正在移动 3mb 的图片，我可以想象它在大多数机器上会很不稳定。

此外，对于动画，Chrome/Chromium 的表现要好得多，这就是为什么我将它用于开发，但在 Firefox 中进行一般浏览。

# c++ - 从原始数据创建虚拟类

> ID：15933934
> 
> 赞同：0
> 
> 时间：2013-04-10T18:46:01.920
> 
> 标签：c++, casting

我想将字符数组转换为具有相同布局的虚拟类，除了虚拟方法。我怎样才能做到这一点？

```
 class RecordStruct
    {
    private:
        virtual MStream& write2stream(MStream& os) const = 0;
    public:
        friend MStream& operator<<(MStream& os, const RecordStruct& stru)
        {
            return stru.write2stream( os );
        };

    };

    class VIRT_struct : public  RecordStruct
    {
        char A[7]; char B[8];
        virtual MStream& write2stream(MStream& os) const;

    };

    const RecordStruct* = some_cast<const RecordStruct*>( pdata ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:50:36.250

您不能直接转换指针，至少不能使用已定义的行为。一个`RecordStruct`对象有一个用于解析虚拟方法调用的 vtable，并且`pdata`不太可能包含这些数据。一旦您尝试在结果对象上调用虚拟方法，您几乎肯定会崩溃。（如果这确实有效，那么您*将*使用的演员运算符是`reinterpret_cast<>`。）

我建议在其上定义一个构造函数`VIRT_struct`，将`pdata`其作为参数并将数据从中提取到`A`and`B`中。

或者，您可以`VIRT_struct`简单地包含相同的指针`pdata`，并使用该指针来获取数据。（记住要明确定义谁拥有指向的分配，以便可以正确地释放它！）

# java - java mail - 通过消息ID获取消息

> ID：15933938
> 
> 赞同：4
> 
> 时间：2013-04-10T18:46:17.083
> 
> 标签：java, android, email, imap

我正在开发 Android 邮件客户端。我需要为每封电子邮件建立一个“对话”结构。我用

```
IMAPMessage.getInReplyTo() 
```

方法返回消息是回复的消息的消息 ID。不幸的是，似乎没有简单的方法可以从

```
IMAPFolder 
```

使用其消息 ID。只能通过其 UID 获取消息。有没有一种简单的方法可以通过消息 ID 获取 IMAP 消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-04T07:23:59.320

您可以像这样使用`IMAPFolder`'s`search`方法：

```
SearchTerm searchTerm = new MessageIDTerm(messageId);
Message[] messages = imapFolder.search(searchTerm); 
```

`IMAPFolder`在此处查看'`search`方法 的文档： [https ://javaee.github.io/javamail/docs/api/com/sun/mail/imap/IMAPFolder.html#search-javax.mail.search.SearchTerm-](https://javaee.github.io/javamail/docs/api/com/sun/mail/imap/IMAPFolder.html#search-javax.mail.search.SearchTerm-)

对于`MessageIDTerm`这里的课程： [https ://javaee.github.io/javamail/docs/api/javax/mail/search/MessageIDTerm.html](https://javaee.github.io/javamail/docs/api/javax/mail/search/MessageIDTerm.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:19:35.217

不幸的是，没有直接的解决方案......您可以尝试使用`body structures`所有邮件 ID 维护一个内部结构，然后执行一对一的 Message-ID 检查并获取邮件的 UID。无论如何，你会这样做，以显示邮件列表。添加一个新逻辑来映射消息 ID。

# visual-studio - 导航到 Visual Studio + ReSharper 中的特殊文件行

> ID：15933942
> 
> 赞同：7
> 
> 时间：2013-04-10T18:46:34.423
> 
> 标签：visual-studio, resharper

VS + ReSharper 中是否有任何方法可以导航到特殊行号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T18:56:34.390

不确定我理解您的意思，但如果您只是想导航到文件中的特定行，请使用`Ctrl + g`并输入行号。

这与`Edit -> Go To...`菜单项相同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-24T20:23:30.417

从 ReSharper 8 开始，您可以`Ctrl``T`输入类似的`Foo.cs 20`内容，然后转到文件 Foo.cs 中的第 20 行。

# javascript - 有没有办法让页面布局完美适应 100% 缩放，但也尊重更大的缩放系数？

> ID：15933943
> 
> 赞同：3
> 
> 时间：2013-04-10T18:46:40.950
> 
> 标签：javascript, css, layout, zooming

有几种方法可以布局网页以使其适合浏览器视口 (DOM `window`)。当我说“适合”时，我包括更改所使用字体的大小，更改 DIV、IMG 和其他渲染元素的宽度和高度，以及允许元素的“流畅”移动。目标是使页面在所有显示设备上看起来都“漂亮”，从小型手机到大型桌面屏幕。这些布局方式包括使用 CSS`em`和`%`尺寸、文本和元素的换行以及`onload`由`onresize`事件。布局拟合可以几乎完美地跨浏览器工作，但复杂的结果可能对浏览器缩放不敏感，因为缩放会神奇地改变窗口宽度，这意味着没有任何独立于浏览器的可靠方法来检测缩放（DOM 和CSS 标准忽略浏览器缩放）。无法检测由于设备屏幕小而导致的小窗口宽度与由于缩放因子大而导致的小窗口宽度之间的差异。我们希望以不同的方式处理这两种情况，因为视力受损的用户需要使用缩放因子。

有没有人以尊重缩放的方式成功地调整布局（包括更改字体大小）？例如，如果用户以 200% 的缩放比例访问页面，则最初只应显示页面的左上四分之一（其余部分可通过水平和垂直滚动获得），而同一页面将完全适合窗口对于另一个将缩放设置为 100% 的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:58:55.943

实际上，要拥有流畅的布局，您将不得不使用 % 来确定宽度而不是像素。并且为了适合屏幕使用 100%

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-28T17:33:13.460

只需添加以下元标记

```
<meta name="viewport" content="width=device-width,
                      initial-scale=1.0,
                      maximum-scale=1.0,
                      user-scalable=0"> 
```

# java - 如何在Java中检查对象是否实现特定接口，而不是该接口的后代

> ID：15933945
> 
> 赞同：1
> 
> 时间：2013-04-10T18:46:48.113
> 
> 标签：java, class, interface, instanceof

我有一个树结构，其中一些节点必须只包含实现特定接口的对象。但是有接口扩展了该接口，并且实现它们的对象不应该包含在节点中。
所以我需要检查对象是否实现了严格的特定接口。

```
public interface IProcessCell {...}
public interface IMethodCell extends IProcessCell {...}

IProcessCell processInstance = new IProcessCell() {...}
IMethodCell methodInstance = new IMethodCell() {...}

/** Method implementing desired check */
public boolean check(IProcessCell instance) {...} 
```

方法检查对于 processInstance 必须返回 true，但对于 methodInstance 必须返回 false

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:56:37.710

您可以使用[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getInterfaces()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getInterfaces%28%29)

但对我来说，你想做的事情就像修补写得不好的应用程序。对我来说，更好的方法是创建一个新接口（只有所需的对象才会实现）并使“树结构”节点需要该特定接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:50:23.000

[您可以使用getInterfaces](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getInterfaces%28%29)获取已实现接口的列表。

假设您已经将您的实例投射到所需的接口，您只需要测试它`yourInstance.getClass().getInterfaces().length==1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:59:02.587

类实现 getInterfaces() 方法。它返回一个类[]。使用它，您可以迭代并进行比较，直到找到或未找到。 [http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getInterfaces()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getInterfaces())

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:06:21.433

您可以`getClass().getInterfaces()`在节点上执行 a ，然后遍历返回的类并检查有多少可以从您关心的特定接口分配。因此，如果您有：

```
interface A {
}

interface B extends A {
}

class NodeA implements A {
}

class NodeB implements B {
} 
```

如果您正在寻找仅实现 A 的节点实例，您应该能够：

```
new NodeA().getClass().getInterfaces();
new NodeB().getClass().getInterfaces(); 
```

并在每种情况下检查 1) 接口之一是 A，并且 2)`A.class.isAssignableFrom(interface)`为其他返回的接口返回 false。

# c++ - 将数字转换为单词 c++

> ID：15933951
> 
> 赞同：0
> 
> 时间：2013-04-10T18:46:58.377
> 
> 标签：c++, numbers

```
#include <iostream> //including header files#include <string>
#include <string>

using namespace std;

//string array declared
string units[3][11] = {{"One","Two","Three", "Four", "Five", "Six","Seven","Eight", "Nine","Ten"},
{"Eleven", "Twelve", "Thirteen","Fourteen", "Fifteen", "Sixteen", "Seventeen","Eighteen", "Nineteen"},
{"Twenty", "Thirty", "Fourty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety", "", ""}};

//function defs
void func6  (int unsigned long i);
void func5 (int unsigned long i);
void func4 (int unsigned i);
void func3 (int unsigned i);
void func2 (int unsigned i);
void func1 (int unsigned t);
void func (int unsigned i);

int main() //main body of fcn
{
long int num; //declaring integers

int j=1;

 while (j==1) //start of while loop
  {
        cout << "Enter a number between -2 billion and 2 billion " << endl; //prompts user for i/p and stores it
        cin >> num;

        if ((num < -2000000000) || (num > 2000000000)) //exits program if not within these limits
        {
            cout << "Number Invalid " << endl;
            return 0;
        }
        else
        {
            func(num);  //call functions
            func1(num);
            func2(num);
            func3(num);
            func4(num);
            func5(num);
//            func6(num);
        }
    }
}

/*void func6 (int unsigned long i) //start of fcn5
{
    int unsigned long t; //declares integer t

    if (i>9999&&i<100000) //if within these limits statement executes
    {
        t=i%1000; //works out remainder
        i=i/1000; //works out new i value
        cout << units[1][i-11] << " Thousand "; //prints out result whilst looking up table

        if (t<10) //if remainder within limits calls function
        func(t);
        else if (t>=10&&t<20)
        func1(t);
        else if (t>19&&t<=100)
        func2(t);
        else if (t>99&&t<1000)
        func3(t);

    }
}
*/

void func5 (int unsigned long i) //start of fcn5
{
    int unsigned long t; //declaring integer
    if (i>9999&&i<100000) // if value within these limits then execute
    {
        t=i%10000; //works out remainder
        i=i/10000; //works out new value of i
        cout << units[2][i-2] << " Thousand "; //prints out result whilst looking up table

        if (t<10) //calls function if remainder within these limits
        func(t);
        else if (t>=10&&t<20)
        func1(t);
        else if (t>=20&&t<100)
        func2(t);
        else if (t>=100&&t<1000)
        func3(t);

    }
}

void func4 (int unsigned i) //start of function 4
{
    int unsigned t; //declares integer
    if (i>=1000&&i<10000) //if within these limits execute fcn
    {
        t=i%1000; //works out remainder
        i=i/1000; //works out new value of i
        cout << units[0][i-1] << " Thousand "; //prints out result whilst looking up table

        if (t<10) //calls function if remainder within limits
        func(t);
        else if (t>=10&&t<20)
        func1(t);
        else if (t>=20&&t<100)
        func2(t);
        else if (t>=100&&t<1000)
        func3(t);

    }
}

void func3 (int unsigned i) //start of fcn 3
{
    int unsigned t; //delcares integer
    if (i>=100&&i<1000) //statement executes if within limits
    {
        t=i%100; //works out remainder
        i=i/100; //works out new value
        cout << units[0][i-1] << " Hundred "; //prints out result whilst looking up table

        if (t<10)   //if remainder within these limits calls previous functions
        func(t);
        else if (t>=10&&t<20)
        func1(t);
        else if (t>=20&&t<100)
        func2(t);
    }
}

void func2(int unsigned i) //start of fcn2
{
    int unsigned t; //declares integer

    if (i>=20&&i<100) //if i within limits statement executes
    {
            t=i%10; //works out remainder
            i=i/10; //works out new i value
            cout << units[2][i-2] ; //prints result out whilst looking up table

            if (t < 10) //if remainder within these limits calls function
            func(t);
    }
}

void func1(int unsigned i) //start of func1
{
    int unsigned t; //declares integer
    if (i>10&&i<20) //if i within these limits statement executes
    {
        t=i%10; //works out remainder
        cout << units[1][t-1] << endl; //prints out value whilst looking up table
    }
}

void func(int unsigned t) //start of fcn
{
    if (t<=10) //if statement less than 10 executes
    {
        cout << " " << units[0][t-1] << endl; //prints out result whilst looking up table.
    }
} 
```

是的，我已经写出了这段代码，它适用于大多数数字，但是在尝试打印 10000、11000、12000、...90000、91000 等时遇到了困惑。它的内容与余数和 i 的值有关。我不知道该怎么办整天被困在上面。有任何想法吗？现在，当我输入一个数字时，它会返回它但随后崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:50:55.593

原来的帖子太可怕了。对不起。现在我**正确地**阅读了你的问题，我可以给你一些初步的版本。但是您必须对其进行一些修改才能对其进行调整。

```
string bases[6] = {"", "ten", "hundred", "thousand", "ten thousand", "million"};

string digit_to_word ( int n )
{
 if(n == 1)
   return "one";
 if(n == 2)
   return "two";
 if(n == 3)
   return "three";
 if(n == 4)
   return "four";

}

string number_to_word(int i, int pow) {
    if(i < 10) {
      return digit_to_word(i);
    }

    else {
      int k = i / 10;
      if(k > 10)
        return number_to_word(k, ++pow) + "^" + bases[pow] + " " + digit_to_word(i%10) ;
      else
        return digit_to_word(k) + "^" + bases[pow]  + " " + " " + digit_to_word(i%10);
    }
}

int main () {
   cin>>i;  
   cout << number_to_word(i, 1);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:56:35.243

不是循环，是递归

假设您有 123,456,789，然后使用上面的代码，您就有

十亿=0 百万=123 千=456

现在要输出“一亿二千四十五万六千……”，所以需要将123转换为“一百二十三”，需要将456转换为“四百五十六” ”。你是怎样做的？好吧，这与您已经尝试解决的问题完全相同，只是数字较小。

所以你是对的，你确实需要编写一个函数，当该函数需要将数百万转换为单词时，它会调用自己（即它是递归的）。转换千位数时也是如此。

# c# - 枚举值的最小和最大操作

> ID：15933955
> 
> 赞同：7
> 
> 时间：2013-04-10T18:47:06.490
> 
> 标签：c#

使用 C#，如何获取两个枚举值的最小值或最大值？

例如，如果我有

```
enum Permissions
{
    None,
    Read,
    Write,
    Full
} 
```

例如，有没有一种方法可以让我做`Helper.Max(Permissions.Read, Permissions.Full)`和得到`Permissions.Full`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T18:52:37.087

枚举实现`IComparable`，因此您可以使用：

```
public static T Min<T>(T a, T b) where T : IComparable
{
    return a.CompareTo(b) <= 0 ? a : b;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:51:51.050

由于枚举可以转换为整数类型，您可以这样做：

```
 var permissions1 = Permissions.None;
   var permissions2 = Permissions.Full;
   var maxPermission = (Permissions) Math.Max((int) permissions1, (int) permissions2); 
```

请注意，如果您的枚举基于无符号类型或长度超过 32 位的类型（即 long 或 ulong），这*可能*会导致问题，但在这种情况下，您只需更改要转换的枚举类型以匹配在您的枚举中声明的类型。

即，对于声明为的枚举：

```
enum Permissions : ulong
{
    None,
    Read,
    Write,
    Full
} 
```

你会使用：

```
 var permissions1 = Permissions.None;
   var permissions2 = Permissions.Full;
   var maxPermission = (Permissions) Math.Max((ulong) permissions1, (ulong) permissions2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-20T16:00:23.253

可以使用 2 个或更多参数调用

```
 public static T GetMaxEnum<T>(params T[] enums) where T : struct, IConvertible
    {
        if (enums.Length < 2)
        {
            throw new InvalidEnumArgumentException();
        }
        return enums.Max();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:47:06.490

这就是我想出的，因为我在 .NET 中找不到任何这样做的东西。

```
public static class EnumHelper
{
    public static T Min<T>(T a, T b)
    {
        return (dynamic)a < (dynamic)b ? a : b;
    }

    public static T Max<T>(T a, T b)
    {
        return (dynamic)a > (dynamic)b ? a : b;
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-22T18:39:57.907

我想你想要这样的东西：

```
public enum Enum1
{
    A_VALUE,
    B_VALUE,
    C_VALUE
}

public enum Enum2
{
    VALUE_1,
    VALUE_2,
    VALUE_3
}

class Program
{
    static void Main(string[] args)
    {
        Program p = new Program();

        Console.WriteLine(p.EnumMin<Enum1>());
        Console.WriteLine(p.EnumMax<Enum2>());

    }

    T EnumMin<T>()
    {
        T ret; ;
        Array x = Enum.GetValues(typeof(T));
        ret  = (T) x.GetValue(0);
        return ret;
    }

    T EnumMax<T>()
    {
        T ret; ;
        Array x = Enum.GetValues(typeof(T));
        ret = (T)x.GetValue(x.Length-1);
        return ret;
    }

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-03-10T17:20:20.277

有一种一站式方法可以获取任何枚举的最小值和最大值。它只假设表示类型是`int`.

```
 public Tuple<int,int> GetMinMaxOfEnumeration<T>()
    {
        if (!typeof (T).IsEnum)
        {
            throw new ArgumentException("Type must be an enumeration");
        }
        var valuesAsInt = Enum.GetValues(typeof (T)).Cast<int>().OrderBy(n => n).ToArray();
        return new Tuple<int, int>(valuesAsInt.First(), valuesAsInt.Last());
    } 
```

# emacs - Emacs lisp 高阶函数支持

> ID：15933957
> 
> 赞同：4
> 
> 时间：2013-04-10T18:47:11.890
> 
> 标签：emacs, functional-programming, lisp, elisp

我正在尝试使用闭包在 Elisp 中实现类似 Haskell 的高阶函数。

```
;;; -*- lexical-binding: t -*-
(defun foo (pair)
    (car pair))
(defun* .curry (fn)
    (lambda (x y &rest args) (apply fn (cons x y) args)))

((lambda (x y) (1+ x)) 2 3)
((lambda (&rest args) (apply (.curry #'foo) args)) 2 3)
(funcall (.curry #'foo) 2 3)
((.curry #'foo) 2 3) 
```

问题是最后一行返回错误`Invalid function`。所以，似乎闭包不被认为是正常的功能。我仍然可以使用`(.curry #'foo)`in `mapc`，但不能使用 hooks。我能做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T19:20:50.280

您`((.curry #'foo) 2 3)`在我所知道的任何 Lisp 中都是无效的，除了 Scheme（以及诸如 Racket 之类的 Scheme 衍生产品）。说明问题的最简单代码如下：

```
(defun f () (lambda ()))
(funcall (f)) ; tested in Emacs 23 and CLISP, works
((f)) ; tested in Emacs 23 and CLISP, results in an error 
```

# r - 折叠/连接/聚合一列到每个组中的单个逗号分隔字符串

> ID：15933958
> 
> 赞同：95
> 
> 时间：2013-04-10T18:47:13.000
> 
> 标签：r, aggregate, r-faq

我想根据两个分组变量聚合数据框中的一列，并用逗号分隔各个值。

这是一些数据：

```
data <- data.frame(A = c(rep(111, 3), rep(222, 3)), B = rep(1:2, 3), C = c(5:10))
data
#     A B  C
# 1 111 1  5
# 2 111 2  6
# 3 111 1  7
# 4 222 2  8
# 5 222 1  9
# 6 222 2 10 
```

“A”和“B”是分组变量，“C”是我想折叠成逗号分隔`character`字符串的变量。我努力了：

```
library(plyr)
ddply(data, .(A,B), summarise, test = list(C))

    A B  test
1 111 1  5, 7
2 111 2     6
3 222 1     9
4 222 2 8, 10 
```

但是当我尝试将测试列转换为它时，`character`它变成了这样：

```
ddply(data, .(A,B), summarise, test = as.character(list(C)))
#     A B     test
# 1 111 1  c(5, 7)
# 2 111 2        6
# 3 222 1        9
# 4 222 2 c(8, 10) 
```

如何保持`character`格式并用逗号分隔它们？例如，第 1 行应该只是`"5,7"`，而不是 c(5,7)。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-10T19:53:27.283

以下是一些使用 的选项`toString`，该函数使用逗号和空格连接字符串向量以分隔组件。如果您不想要逗号，则可以使用`paste()`with`collapse`参数。

**数据表**

```
# alternative using data.table
library(data.table)
as.data.table(data)[, toString(C), by = list(A, B)] 
```

**聚合**这不使用任何包：

```
# alternative using aggregate from the stats package in the core of R
aggregate(C ~., data, toString) 
```

**sqldf**

这是`group_concat`使用[sqldf 包](http://sqldf.googlecode.com)的 SQL 函数的替代方法：

```
library(sqldf)
sqldf("select A, B, group_concat(C) C from data group by A, B", method = "raw") 
```

**dplyr**另一种`dplyr`选择：

```
library(dplyr)
data %>%
  group_by(A, B) %>%
  summarise(test = toString(C)) %>%
  ungroup() 
```

**plyr**

```
# plyr
library(plyr)
ddply(data, .(A,B), summarize, C = toString(C)) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2019-04-11T12:45:21.813

这是`stringr`/`tidyverse`解决方案：

```
library(tidyverse)
library(stringr)

data <- data.frame(A = c(rep(111, 3), rep(222, 3)), B = rep(1:2, 3), C = c(5:10))

data %>%
 group_by(A, B) %>%
 summarize(text = str_c(C, collapse = ", "))

# A tibble: 4 x 3
# Groups:   A [2]
      A     B text 
  <dbl> <int> <chr>
1   111     1 5, 7 
2   111     2 6    
3   222     1 9    
4   222     2 8, 10 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-10T18:54:36.877

更改放置位置`as.character`：

```
> out <- ddply(data, .(A, B), summarise, test = list(as.character(C)))
> str(out)
'data.frame':   4 obs. of  3 variables:
 $ A   : num  111 111 222 222
 $ B   : int  1 2 1 2
 $ test:List of 4
  ..$ : chr  "5" "7"
  ..$ : chr "6"
  ..$ : chr "9"
  ..$ : chr  "8" "10"
> out
    A B  test
1 111 1  5, 7
2 111 2     6
3 222 1     9
4 222 2 8, 10 
```

请注意，在这种情况下，每个项目实际上仍然是一个单独的字符，而不是单个字符串。也就是说，这不是一个看起来像“5, 7”的实际字符串，而是两个字符，“5”和“7”，R 用逗号将它们显示出来。

与以下内容进行比较：

```
> out2 <- ddply(data, .(A, B), summarise, test = paste(C, collapse = ", "))
> str(out2)
'data.frame':   4 obs. of  3 variables:
 $ A   : num  111 111 222 222
 $ B   : int  1 2 1 2
 $ test: chr  "5, 7" "6" "9" "8, 10"
> out
    A B  test
1 111 1  5, 7
2 111 2     6
3 222 1     9
4 222 2 8, 10 
```

* * *

当然，基础 R 中的可比较解决方案是`aggregate`：

```
> A1 <- aggregate(C ~ A + B, data, function(x) c(as.character(x)))
> str(A1)
'data.frame':   4 obs. of  3 variables:
 $ A: num  111 222 111 222
 $ B: int  1 1 2 2
 $ C:List of 4
  ..$ 0: chr  "5" "7"
  ..$ 1: chr "9"
  ..$ 2: chr "6"
  ..$ 3: chr  "8" "10"
> A2 <- aggregate(C ~ A + B, data, paste, collapse = ", ")
> str(A2)
'data.frame':   4 obs. of  3 variables:
 $ A: num  111 222 111 222
 $ B: int  1 1 2 2
 $ C: chr  "5, 7" "9" "6" "8, 10" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-15T11:37:37.270

这里有一个小的改进以避免重复

```
# 1\. Original data set
data <- data.frame(
  A = c(rep(111, 3), rep(222, 3)), 
  B = rep(1:2, 3), 
  C = c(5:10))

# 2\. Add duplicate row
data <- rbind(data, data.table(
  A = 111, B = 1, C = 5
))

# 3\. Solution with duplicates
data %>%
  group_by(A, B) %>%
  summarise(test = toString(C)) %>%
  ungroup()

#      A     B test   
#   <dbl> <dbl> <chr>  
# 1   111     1 5, 7, 5
# 2   111     2 6      
# 3   222     1 9      
# 4   222     2 8, 10

# 4\. Solution without duplicates
data %>%
  select(A, B, C) %>% unique() %>% 
  group_by(A, B) %>%
  summarise(test = toString(C)) %>%
  ungroup()

#    A     B test 
#   <dbl> <dbl> <chr>
# 1   111     1 5, 7 
# 2   111     2 6    
# 3   222     1 9    
# 4   222     2 8, 10 
```

希望它能有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-22T03:42:03.597

使用`collap`来自`collapse`

```
library(collapse)
collap(data, ~ A + B, toString)
    A B     C
1 111 1  5, 7
2 111 2     6
3 222 1     9
4 222 2 8, 10 
```

### 数据

```
data <- data.frame(A = c(rep(111, 3), rep(222, 3)), B = rep(1:2, 3), C = c(5:10)) 
```

# javascript - 我可以使用 Javascript 显示/隐藏元标记吗

> ID：15933961
> 
> 赞同：0
> 
> 时间：2013-04-10T18:47:20.857
> 
> 标签：javascript, html, meta-tags

对于我的网站，我需要为我们的 3rd 方分析添加元标记，即

```
<meta name="WT_si" content="Content Group" /> 
```

基本上我想首先根据页面的 url 找出内容组名称

因此，在我编写元标记之前的头标记中，我想我想在内容组的元标记中放置某种 javascript 变量

```
<meta name="WT_si" content="Content Group" /> 
```

或者我正在考虑做类似的事情

```
if(contentGroup == "Business)

<meta name="WT_si" content="Content Group" />

else

<meta name="WT_si" content="Corporate" /> 
```

以上是否可以在带有元标记的头部的javascript中实现>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:58:56.567

`head`使用 Javascript 根据条件向文档添加元标记：

```
var metaTag=document.createElement("meta");
if(contentGroup == "business")
{
    metaTag.content = "Content Group";
    document.getElementsByTagName('head')[0].appendChild(metaTag);
}
else
{
    metaTag.content = "Corporate";
    document.getElementsByTagName('head')[0].appendChild(metaTag);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:52:03.290

像这样的东西应该适用于jquery

```
$('meta[content]').hide(); 
```

将添加样式

```
display:none on the meta tag 
```

但我不确定你为什么要这样做？

# iphone - 登录后更改视图时应用程序崩溃

> ID：15933966
> 
> 赞同：0
> 
> 时间：2013-04-10T18:47:41.757
> 
> 标签：iphone, objective-c

早上好！我对 iPhone/iPad 编程非常陌生 我的应用程序在登录后尝试更改视图后崩溃（信号 SIGABRT）

```
-(void)checkLogin {
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"LoginData" ofType:@"txt"];
    NSString *myText = [NSString stringWithContentsOfFile:filePath];
    //Parse lines into an NSArray;
    NSArray *results= [myText componentsSeparatedByString:@"\n"];// Assumes Mac line end return

    if([txtUsername.text isEqualToString: [results objectAtIndex:0]]&& [txtPassword.text isEqualToString: [results objectAtIndex:1]]) 
    {
        Clients * clients = [[Clients alloc] initWithNibName:@"clients" bundle:nil];
        [self presentModalViewController:clients animated:YES];     
    }

    else 
    {
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Login"
                                                        message:@"Wrong credentials"
                                                       delegate:nil
                                              cancelButtonTitle:@"Close"
                                              otherButtonTitles:nil];
            [alert show];
    }    
}
@end 
```

该应用程序在此行崩溃

```
 [self presentModalViewController:clients animated:YES]; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:04:49.733

```
Clients * clients = [[AboutUs alloc] initWithNibName:@"clients" bundle:nil];
[self presentModalViewController:clients animated:YES]; 
```

我认为第一行是您的应用程序卡住的地方。把它变成：

客户 *clients = [[Clients alloc] initWithNibName:@"clients" bundle:nil]; [自我presentModalViewController：客户端动画：是]；

`aboutUs`这段代码应该可以工作，但是在你的问题中，你在你的代码中加入了一个特定的内容。

从你的问题中我不知道你想用这个做什么，但是如果你想把这个`AboutUs`控制器放在你的`Clients`控制器中，你应该使用类似的东西：

```
Clients *clients = [[Clients alloc] initWithRootViewController:aboutUs]; 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:03:40.710

您是否尝试过这样做：

```
Clients *myClients = [[Clients alloc] init];
[self presentViewController:clients animated:YES completion:^(void) {

}]; 
```

它应该可以正常工作。如果它仍然崩溃，则 Clients 类中的某些内容出错了。

# r - R 编程 - 对具有共同值的行的元素求和

> ID：15933968
> 
> 赞同：14
> 
> 时间：2013-04-10T18:47:42.847
> 
> 标签：r, aggregate, rowsum

您好，提前感谢您的帮助，

（请注意评论部分以获得更多见解：即，以下示例中的成本列已添加到此问题中；西蒙提供了一个很好的答案，但成本列本身并未在他的数据响应中表示，尽管他提供的功能与成本列一起使用）

我有一个数据集，我们称之为“数据”，看起来像这样

```
NAME     DATE     COLOR   PAID    COST
Jim      1/1/2013 GREEN   150     100
Jim      1/2/2013 GREEN   50      25
Joe      1/1/2013 GREEN   200     150
Joe      1/2/2013 GREEN   25      10 
```

我想做的是将具有相同 NAME 值的记录的 PAID（和 COST）元素相加，并将行数（如本例中）减少到 2，这样我的新数据框如下所示：

```
NAME     DATE     COLOR   PAID    COST
Jim      1/2/2013 GREEN   200     125
Joe      1/2/2013 GREEN   225     160 
```

就日期而言，我并不真正关心哪一个在求和过程中幸存下来。

我已经了解了 rowSums(data)，但我不确定如何使用它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T18:58:11.733

`aggregate`是您正在寻找的功能：

```
aggregate( cbind( PAID , COST ) ~ NAME + COLOR , data = data , FUN = sum )
# NAME PAID
# 1  Jim  200
# 2  Joe  225 
```

# excel - 如何使我的文本打印在 Excel 表格单元格的顶部/开头

> ID：15933971
> 
> 赞同：0
> 
> 时间：2013-04-10T18:47:49.117
> 
> 标签：excel

我想从 Excel 单元格的开头开始编写文本。在一个单元格中，我使用 Alt+Enter 写了多行。对于所有其他单元格，当我开始输入时，它从最后一行开始。它应该从顶部开始，即在单元格的开头。请查看图片。

我正在尝试这样做：

[http://imgur.com/FwlQ1wX](http://imgur.com/FwlQ1wX)

现在我的问题是：我如何从单元格顶部开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:57:21.867

您需要将单元格的格式设置为垂直对齐“顶部”。我可以在您的图像中看到，功能区上的垂直对齐“底部”迷你图标已突出显示。这些是水平对齐图标上方和字体设置右侧的小图标。

# c# - 以电子邮件形式发送 PartialView 内容

> ID：15933972
> 
> 赞同：6
> 
> 时间：2013-04-10T18:47:53.507
> 
> 标签：c#, asp.net-mvc-3, sendmail, asp.net-mvc-partialview

我有一个包含带有 Razor 注释的 HTML 代码的 PartialView。它为我生成了一个我想通过电子邮件发送给任何人的页面。有没有办法将这个 PartialView 翻译成 HTML 内容来发送？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-19T16:09:21.013

我建议使用**MvcMailer**，它完全符合您的要求（您不必为它编写代码..它也可以异步执行）：

[https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)

**更新**

正如评论中所述，自己实现它的解决方案（我仍然认为 MvcMailer 会让你的生活更轻松）：

```
protected string RenderPartialViewToString(string viewName, object model)
{
    if (string.IsNullOrEmpty(viewName))
        viewName = ControllerContext.RouteData.GetRequiredString("action");

    ViewData.Model = model;

    using (StringWriter sw = new StringWriter()) {
        ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
        ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
        viewResult.View.Render(viewContext, sw);

        return sw.GetStringBuilder().ToString();
    }
} 
```

（[ASP.NET MVC Razor：如何在控制器操作中呈现 Razor 部分视图的 HTML](https://stackoverflow.com/questions/4344533/asp-net-mvc-razor-how-to-render-a-razor-partial-views-html-inside-the-controll/4344602#4344602)）

# opencl - OpenCL 遍历内核——进一步优化

> ID：15933974
> 
> 赞同：4
> 
> 时间：2013-04-10T18:47:57.510
> 
> 标签：opencl, gpgpu, traversal, raytracing

目前，我有一个类似遍历的 OpenCL 内核，如下所示。如果有人对这个相当大的内核的优化有一些看法，我会很高兴。

问题是，我正在使用 SAH BVH 运行此代码，我希望通过他的论文（Understanding the Efficiency of Ray Traversal on GPUs）中的遍历获得与 Timo Aila 相似的性能，当然他的代码使用 SplitBVH（其中我可能会考虑使用代替 SAH BVH，但在我看来，它的构建时间真的很慢）。但我问的是遍历，而不是 BVH（到目前为止，我只处理场景，SplitBVH 不会给你带来比 SAH BVH 更多的优势）。

首先，这是我目前所拥有的（标准的 while-while 遍历内核）。

```
__constant sampler_t sampler = CLK_FILTER_NEAREST;

// Inline definition of horizontal max
inline float max4(float a, float b, float c, float d)
{
    return max(max(max(a, b), c), d);
}

// Inline definition of horizontal min
inline float min4(float a, float b, float c, float d)
{
    return min(min(min(a, b), c), d);
}

// Traversal kernel
__kernel void traverse( __read_only image2d_t nodes,
                        __global const float4* triangles,
                        __global const float4* rays,
                        __global float4* result,
                        const int num,
                        const int w,
                        const int h)
{
    // Ray index
    int idx = get_global_id(0);

    if(idx < num)
    {
        // Stack
        int todo[32];
        int todoOffset = 0;

        // Current node
        int nodeNum = 0;

        float tmin = 0.0f;
        float depth = 2e30f;

        // Fetch ray origin, direction and compute invdirection
        float4 origin = rays[2 * idx + 0];
        float4 direction = rays[2 * idx + 1];
        float4 invdir = native_recip(direction);

        float4 temp = (float4)(0.0f, 0.0f, 0.0f, 1.0f);

        // Traversal loop
        while(true)
        {
            // Fetch node information
            int2 nodeCoord = (int2)((nodeNum << 2) % w, (nodeNum << 2) / w);
            int4 specs = read_imagei(nodes, sampler, nodeCoord + (int2)(3, 0));

            // While node isn't leaf
            while(specs.z == 0)
            {
                // Fetch child bounding boxes
                float4 n0xy = read_imagef(nodes, sampler, nodeCoord);
                float4 n1xy = read_imagef(nodes, sampler, nodeCoord + (int2)(1, 0));
                float4 nz = read_imagef(nodes, sampler, nodeCoord + (int2)(2, 0));

                // Test ray against child bounding boxes
                float oodx = origin.x * invdir.x;
                float oody = origin.y * invdir.y;
                float oodz = origin.z * invdir.z;
                float c0lox = n0xy.x * invdir.x - oodx;
                float c0hix = n0xy.y * invdir.x - oodx;
                float c0loy = n0xy.z * invdir.y - oody;
                float c0hiy = n0xy.w * invdir.y - oody;
                float c0loz = nz.x * invdir.z - oodz;
                float c0hiz = nz.y * invdir.z - oodz;
                float c1loz = nz.z * invdir.z - oodz;
                float c1hiz = nz.w * invdir.z - oodz;
                float c0min = max4(min(c0lox, c0hix), min(c0loy, c0hiy), min(c0loz, c0hiz), tmin);
                float c0max = min4(max(c0lox, c0hix), max(c0loy, c0hiy), max(c0loz, c0hiz), depth);
                float c1lox = n1xy.x * invdir.x - oodx;
                float c1hix = n1xy.y * invdir.x - oodx;
                float c1loy = n1xy.z * invdir.y - oody;
                float c1hiy = n1xy.w * invdir.y - oody;
                float c1min = max4(min(c1lox, c1hix), min(c1loy, c1hiy), min(c1loz, c1hiz), tmin);
                float c1max = min4(max(c1lox, c1hix), max(c1loy, c1hiy), max(c1loz, c1hiz), depth);

                bool traverseChild0 = (c0max >= c0min);
                bool traverseChild1 = (c1max >= c1min);

                nodeNum = specs.x;
                int nodeAbove = specs.y;

                // We hit just one out of 2 childs
                if(traverseChild0 != traverseChild1)
                {
                    if(traverseChild1)
                    {
                        nodeNum = nodeAbove;
                    }
                }
                // We hit either both or none
                else
                {
                    // If we hit none, pop node from stack (or exit traversal, if stack is empty)
                    if (!traverseChild0)
                    {
                        if(todoOffset == 0)
                        {
                            break;
                        }
                        nodeNum = todo[--todoOffset];
                    }
                    // If we hit both
                    else
                    {
                        // Sort them (so nearest goes 1st, further 2nd)
                        if(c1min < c0min)
                        {
                            unsigned int tmp = nodeNum;
                            nodeNum = nodeAbove;
                            nodeAbove = tmp;
                        }

                        // Push further on stack
                        todo[todoOffset++] = nodeAbove;
                    }
                }

                // Fetch next node information
                nodeCoord = (int2)((nodeNum << 2) % w, (nodeNum << 2) / w);
                specs = read_imagei(nodes, sampler, nodeCoord + (int2)(3, 0));
            }

            // If node is leaf & has some primitives
            if(specs.z > 0)
            {
                // Loop through primitives & perform intersection with them (Woop triangles)
                for(int i = specs.x; i < specs.y; i++)
                {
                    // Fetch first point from global memory
                    float4 v0 = triangles[i * 4 + 0];

                    float o_z = v0.w - origin.x * v0.x - origin.y * v0.y - origin.z * v0.z;
                    float i_z = 1.0f / (direction.x * v0.x + direction.y * v0.y + direction.z * v0.z);
                    float t = o_z * i_z;

                    if(t > 0.0f && t < depth)
                    {
                        // Fetch second point from global memory
                        float4 v1 = triangles[i * 4 + 1];

                        float o_x = v1.w + origin.x * v1.x + origin.y * v1.y + origin.z * v1.z;
                        float d_x = direction.x * v1.x + direction.y * v1.y + direction.z * v1.z;
                        float u = o_x + t * d_x;

                        if(u >= 0.0f && u <= 1.0f)
                        {
                            // Fetch third point from global memory
                            float4 v2 = triangles[i * 4 + 2];

                            float o_y = v2.w + origin.x * v2.x + origin.y * v2.y + origin.z * v2.z;
                            float d_y = direction.x * v2.x + direction.y * v2.y + direction.z * v2.z;
                            float v = o_y + t * d_y;

                            if(v >= 0.0f && u + v <= 1.0f)
                            {
                                // We got successful hit, store the information
                                depth = t;
                                temp.x = u;
                                temp.y = v;
                                temp.z = t;
                                temp.w = as_float(i);
                            }
                        }
                    }
                }
            }

            // Pop node from stack (if empty, finish traversal)
            if(todoOffset == 0)
            {
                break;
            }

            nodeNum = todo[--todoOffset];
        }

        // Store the ray traversal result in global memory
        result[idx] = temp;
    }
} 
```

今天的第一个问题是，如何在 OpenCL 中编写他的 Persistent while-while 和 Speculative while-while 内核？

**Ad Persistent while-while**，我是否正确，我实际上只是以与本地工作大小相等的全局工作大小启动内核，并且这两个数字都应该等于 GPU 的扭曲/波前大小？我得到了 CUDA 的持久线程实现如下所示：

```
 do
  {
        volatile int& jobIndexBase = nextJobArray[threadIndex.y];

        if(threadIndex.x == 0)
        {
              jobIndexBase = atomicAdd(&warpCounter, WARP_SIZE);
        }

        index = jobIndexBase + threadIndex.x;

        if(index >= totalJobs)
              return;

        /* Perform work for task numbered 'index' */
  }
  while(true); 
```

OpenCL 中的等价物怎么可能看起来像，我知道我必须在那里做一些障碍，我也知道应该在我将 WARP_SIZE 原子地添加到 warpCounter 的分数之后。

**Ad Speculative traversal** - 好吧，我可能不知道如何在 OpenCL 中实现它，所以欢迎任何提示。我也不知道在哪里放置障碍物（因为将它们放在模拟的 __any 周围会导致驱动程序崩溃）。

如果您在这里完成，感谢您的阅读，欢迎提供任何提示、答案等！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T10:50:44.603

您可以做的优化是使用向量变量和融合乘加函数来加快您的设置数学。至于内核的其余部分，它很慢，因为它是多枝的。如果您可以对信号数据做出假设，则可以通过减少代码分支来减少执行时间。我没有检查 float4 swizles（浮动 4 变量之后的 .xxyy 和 .x .y .z .w ），所以只需检查一下。

```
 float4 n0xy = read_imagef(nodes, sampler, nodeCoord);
            float4 n1xy = read_imagef(nodes, sampler, nodeCoord + (int2)(1, 0));
            float4 nz = read_imagef(nodes, sampler, nodeCoord + (int2)(2, 0));

            float4 oodf4 = -origin * invdir;

            float4 c0xyf4 = fma(n0xy,invdir.xxyy,oodf4);

            float4 c0zc1z = fma(nz,(float4)(invdir.z),oodf4);

            float c0min = max4(min(c0xyf4.x, c0xyf4.y), min(c0xyf4.z, c0xyf4.w), min(c0zc1z.z, c0zc1z.w), tmin);
            float c0max = min4(max(c0xyf4.x, c0xyf4.y), max(c0xyf4.z, c0xyf4.w), max(c0zc1z.z, c0zc1z.w), depth);

            float4 c1xy = fma(n1xy,invdir.xxyy,oodf4);

            float c1min = max4(min(c1xy.x, c1xy.y), min(c1xy.z, c1xy.w), min(c0zc1z.z, c0zc1z.w), tmin);
            float c1max = min4(max(c1xy.x, c1xy.y), max(c1xy.z, c1xy.w), max(c0zc1z.z, c0zc1z.w), depth); 
```

# qt - Qt：如何创建一个不最小化且不阻塞后台GUI的窗口

> ID：15933980
> 
> 赞同：1
> 
> 时间：2013-04-10T18:48:14.437
> 
> 标签：qt, pyqt, qmainwindow

我有一个`QMainWindow`那是一个孩子到另一个窗口。当用户单击父窗口中的任意位置时，我不希望子窗口最小化。子窗口应该失去焦点，用户应该能够继续在父窗口上工作。

此功能类似于 libreoffice/excel/openoffice 等中的查找/替换对话框，如下所示。我们可以看到任务栏只显示父应用程序窗口，而子窗口在任务栏中不可见。

![在此处输入图像描述](https://i.stack.imgur.com/YKz85.png)

是否有任何信号`QMainWindow`可以帮助我实现这一目标？或者最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T20:11:27.927

如果您打开新窗口[`Dialog`](http://qt-project.org/doc/qt-4.8/qt.html#WindowType-enum)并为其提供父窗口，则它应位于父窗口之上。由于您使用的是`QMainWindow`，因此您可以将 this 与构造函数一起传递。如果您决定使用`QDialog`，请确保使用`setModal(False)`. 否则它将阻止父级。

一个小例子：

```
import sys
from PyQt4 import QtGui, QtCore

class Window(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)

        w = QtGui.QWidget()
        layout = QtGui.QVBoxLayout(w)
        self.button = QtGui.QPushButton('Open Dialog')
        self.text = QtGui.QTextEdit()

        layout.addWidget(self.button)
        layout.addWidget(self.text)

        self.setCentralWidget(w)

        self.button.clicked.connect(self.openDialog)

    def openDialog(self):
        self.dialog = QtGui.QMainWindow(self, QtCore.Qt.Dialog)
        self.dialog.show()

app = QtGui.QApplication(sys.argv)
w = Window()
w.show()
sys.exit(app.exec_()) 
```

# python - 谷歌应用引擎python配置

> ID：15933982
> 
> 赞同：0
> 
> 时间：2013-04-10T18:48:25.793
> 
> 标签：python, google-app-engine

当我使用“Google App Engine Launcher”运行我的应用程序时，它会给我一个警告信号。

在日志控制台中，我发现它使用 Python 3.3，如何将其配置为使用 python 2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:55:39.977

在 Launcher 中，转到 Edit -> Preferences 并设置 Python Path 以匹配您的 python 27 路径。

# extjs - ST2中如何区分目标后退按钮？

> ID：15933987
> 
> 赞同：0
> 
> 时间：2013-04-10T18:48:42.393
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

Sencha Touch 2 有一个小问题：

我的应用有 2 个视图/列表：新闻和事件。两者都有详细视图。在新闻列表中，我显示了过滤器和排序按钮，在事件列表中，我只想显示过滤器按钮。

当我点击一个项目时，导航控制器会自动添加一个后退按钮。

我所做的 atm 是： - 当用户单击列表中的项目时：隐藏所有按钮 - 当用户单击后退按钮时：显示所有按钮

这就是问题所在......我看不出它是新闻详细视图还是事件详细视图上的后退按钮。

在我的控制器中，我有：

```
"mainnav[id=mainNav]": {
            back: 'showButtons',
        }, 
```

当我尝试时：

```
"panel[id=newsDetail]": {
            back: 'showButtons',
        }, 
```

事件不会被触发。那么我怎么知道它是新闻还是事件后退按钮？

谢谢！

编辑：它不容易解释......这里有更多信息：“mainNav”是一个导航视图，后退按钮被添加到它的工具栏。

```
Ext.define('MyApp.view.MainNav', {
extend: 'Ext.navigation.View',
alias: 'widget.mainnav',
config: {
    id: 'mainNav',
    maxWidth: '350px',
    items: [
    {
        xtype: 'tabpanel',
        layout : {
            type : 'card'
       },
...
 items: [
       {
        xtype: 'list',
        title: 'News',
        id: 'newsList',
        store: 'newsStore',
        grouped: true,
        onItemDisclosure: true,
...
    {
    xtype: 'list',
    title: 'Events',
    iconCls: 'team',
    id: 'eventList',
    store: 'eventStore',
    onItemDisclosure: true,
...
     tabBar: {
    docked: 'bottom'
}
...
and the navigation bar with its buttons:

navigationBar: {
minWidth: '',
width: '',
id: 'navBar',
layout: {
    align: 'center',
    type: 'hbox'
},
items: [
{
    xtype: 'button',
    id: 'settingsButton',
    align: 'left',
    iconCls: 'settings6',
    iconMask: true
},
    {
    xtype: 'button',
    id: 'filterbutton',
    align: 'right',
    iconCls: 'list',
    iconMask: true
}
]
}, 
```

我现在想做什么：

```
"mainnav[id=mainNav]": {
        back: 'showButtons',
    }, 
```

当用户点击后退按钮时触发（无论他是否在 newsDetail 或 eventsDetail 中标识），但我想知道用户在点击后退按钮后看到的是哪个视图。

如果他看到新闻列表，那么我想显示两个按钮（过滤器和查看），但是他看到事件列表我只想显示一个按钮。我需要类似的东西：

```
showButtons: function(component, options) {
  if(Ext.getCmp(backButton).down().getId() == 'newsList'){
    //show 2 buttons
  }else{
    //show one button
  }
} 
```

对不起，如果答案令人困惑......我不知道如何更好地解释它。无论如何，我将不胜感激任何帮助/想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:43:04.587

面板没有返回事件。所以它永远不会被解雇。

mainnav 是您定义的自定义 xtype 吗？否则该选择器也是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:53:48.830

得到了解决方案：

```
 var activePanel = Ext.getCmp('MainTabPanel').getActiveItem();
    var activeItem = activePanel.getItemId();

    if(activeItem == 'newsList'){
        this.filterNewsStore();
        Ext.getCmp('showSettingsButton').show();
        Ext.getCmp('filterButton').show();
    }

    if(activeItem == 'eventList'){
        this.filterEventsStore();
        Ext.getCmp('showSettingsButton').hide();
        Ext.getCmp('filterButton').show();
    } 
```

当后退按钮被触发时，我调用此代码。

# c - 内存中的复制功能

> ID：15933992
> 
> 赞同：0
> 
> 时间：2013-04-10T18:48:54.013
> 
> 标签：c, linux, assembly

我正在尝试挂钩一个 linux 程序的功能。基本上使用 mprotect 搜索解除对函数的保护，然后将 jmp 放入原始函数地址中，重定向到我的函数挂钩。

但是我想复制原始函数，以便在不需要修改的函数时调用它。我会有这样的钩子

```
int CallHookedFunctionFoobar(int param1, int param2)
{
      if (g_somevariable)
           Foobar_original(param1, param2);
      else
           Foobar_modified(param1, param2);
} 
```

所以我的问题是......我怎么知道函数的大小（以字节为单位），所以我可以将它 memcpy() 放到动态分配的缓冲区中执行它？

我考虑过可能嵌入一个小长度的反汇编程序并解析操作码，直到找到 RETN 光码，但我不确定它绝对适用于所有情况（例如，如果多个 RETN 驻留在同一个函数中：[）

因为我想这样做的另一个原因是因为同一个函数可能已被另一个库挂钩..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:57:58.733

首先，如果这是特定于 Linux 的，那么您的可执行文件很可能是`ELF`二进制文件。因此，您可以只解析 ELF 标头（`libelf`例如使用 ）来查找/计算函数的长度。

但是，我不明白你为什么需要这个。我能想到的一种更简单的方法是即时修补函数，将其前几条指令替换为 a `JMP`or`CALL`到钩子函数，同时保存那些被覆盖的指令以供以后修补。就像是：

```
void call_hooked(void (*fn)(), unsigned char *ctx, size_t *n)
{
    unsigned char hook_patch[] = { 0x15, 0x20, 0x7f, 0x48 }; // I bluffed
    *n = sizeof(hook_patch);
    memcpy(ctx, fn, sizeof(hook_patch));
    memcpy(fn, hook_patch, sizeof(hook_patch));
    fn();
}

void call_orig(void (*fn)(), unsigned char *ctx, size_t n)
{
    memcpy(fn, ctx, n);
    fn();
} 
```

# javascript - Javascript 获取 LI 标签中的元素

> ID：15933993
> 
> 赞同：1
> 
> 时间：2013-04-10T18:48:57.090
> 
> 标签：javascript

我有一个`li`看起来像：

```
<li temp="true">HELLO</li> 
```

我将如何获得“temp”以便我可以在 JS 中操作“HELLO”...我知道如何通过 id 甚至 className

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:52:45.027

在支持浏览器（即除古代 IE 之外的任何浏览器）中：

```
var li = document.querySelector("li[temp=true]"); 
```

如果需要对旧版 IE 的支持，请尝试以下操作：

```
var li = document.querySelector ? document.querySelector("li[temp=true]")
  : (function() {
      var lis = document.getElementsByTagName('li'), l = lis.length, i;
      for( i=0; i<l; i++) {
          if( lis[i].getAttribute("temp") == "true") return lis[i];
      }
      return false;
  })(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:50:24.940

在 jQuery 中，您可以使用属性选择器：

```
$('li[temp="true"]'); 
```

或者，您可以将该`document.querySelectorAll()`方法用于本机 JS 解决方案。但是，您应该意识到这对跨浏览器的影响：

```
var ele = document.querySelectorAll('li[temp="true"]'); 
```

你可以看到上面的一个[jsFiddle Demo](http://jsfiddle.net/b43Pe/)。

顺便说一句，您应该使用`data-`属性来存储带有 HTML 元素的自定义属性，例如正确的语法应该是：

```
<li data-temp="true">HELLO</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:52:44.403

遍历所有 li。

```
var li = document.getElementsByTagName("li");
var found;
for(var i=0; i< li.length;i++){

    if(li[i].getAttribute("temp") == "true"){
       found = li[i]; break;
   }
}

console.log(found); 
```

或者您可以使用本机查询

```
var found= document.querySelectorAll('li[temp="true"]'); 
```

[JSFiddle](http://jsfiddle.net/EvkgF/)

# wordpress - 如何按订单状态筛选

> ID：15933994
> 
> 赞同：0
> 
> 时间：2013-04-10T18:48:57.463
> 
> 标签：wordpress, filter, woocommerce, export, orders

我在 Wordpress 上使用 WooCommerce，现在一个名为 Parcelware 的插件允许我导出两个日期之间的任何订单，请参见下面的代码。我需要添加一个过滤器，这意味着只导出“处理”订单。

如果有人可以帮助我，那就太好了！

我在 WooCommerce 上找到了这个链接，不确定它是否有帮助。

[http://docs.woothemes.com/document/customer-order-csv-import-suite/#importingorders](http://docs.woothemes.com/document/customer-order-csv-import-suite/#importingorders)

```
/**
 * Read order variables from the database and store them in
 * their respective variable slot. This function is called 
 * on creation of the object.
 * 
 * @abstract
 */
abstract function read_order_settings();

/**
 * Get orders
 * 
 * @return mixed order
 */
static function get_orders( $date_from, $date_to ){
    // Get orders between the two defined dates, this function uses a filter.
    define('PARCELWARE_GET_ORDERS_FILTER_DATE_FROM', $date_from );
    define('PARCELWARE_GET_ORDERS_FILTER_DATE_TO', $date_to );
    add_filter('posts_where', array( __CLASS__, 'order_page_get_orders_where_dates_between') );
    $orders = get_posts( array(
        'numberposts' => -1,
        'offset' => 0,
        'orderby' => 'post_date',
        'order' => 'DESC',
        'post_type' => 'shop_order',
        'suppress_filters' => false
    ) );
    remove_filter('posts_where', 'order_page_get_orders_where_dates_between');

    return $orders;
}

/**
 * Applies a where clause on the get_posts call
 * 
 * @param string $where
 * @return string $where
 */
static function order_page_get_orders_where_dates_between( $where ){
    global $wpdb;

    if( ! defined('PARCELWARE_GET_ORDERS_FILTER_DATE_FROM') || ! defined('PARCELWARE_GET_ORDERS_FILTER_DATE_TO') )
        return $where;

    $where .= $wpdb->prepare(" AND post_date >= '%s' ", PARCELWARE_GET_ORDERS_FILTER_DATE_FROM);
    $where .= $wpdb->prepare(" AND post_date <= '%s' ", PARCELWARE_GET_ORDERS_FILTER_DATE_TO);

    return $where;
}

/**
 * Builds the header row for the csv file
 * 
 * @return string $csv
 */
static function get_csv_header(){
    return implode( self::$separator, array_keys( self::$variable_keys ) );
}

/**
 * Converts this object to a comma separated values line
 * 
 * @param mixed array $array
 * @return string $csv_line
 */
function to_CSV(){
    if( empty( $this->variables ) )
        return '';

    $csv = '';
    foreach( $this->variables as $variable )
        $csv .= $variable . self::$separator;

    return implode( self::$separator, $this->variables );
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:15:22.497

订单状态是一种分类，因此以下内容应为您过滤：

```
static function get_orders( $date_from, $date_to ){
    // Get orders between the two defined dates, this function uses a filter.
    define('PARCELWARE_GET_ORDERS_FILTER_DATE_FROM', $date_from );
    define('PARCELWARE_GET_ORDERS_FILTER_DATE_TO', $date_to );
    add_filter('posts_where', array( __CLASS__, 'order_page_get_orders_where_dates_between') );
    $orders = get_posts( array(
        'numberposts' => -1,
        'offset' => 0,
        'orderby' => 'post_date',
        'order' => 'DESC',
        'post_type' => 'shop_order',
        'suppress_filters' => false,
        'tax_query' => array(
                array(
                    'taxonomy' => 'shop_order_status',
                    'field' => 'slug',
                    'terms' => array('processing')
                )
            )
    ) );
    remove_filter('posts_where', 'order_page_get_orders_where_dates_between');

    return $orders;
} 
```

# apache-flex - 使用 FlexMojos 和 Maven 编译的 SWC 找不到类

> ID：15933999
> 
> 赞同：0
> 
> 时间：2013-04-10T18:49:25.557
> 
> 标签：apache-flex, maven, flexmojos

这是我的虚拟项目设置：

1.  一个使用开源媒体框架 (OSMF) 的 swc 库。该库作为 Maven 工件与 FlexMojos 一起安装。
2.  编译为 swf 并使用带有 OSMF 的库作为 Maven 依赖项的主应用程序。
3.  该项目编译得很好，但是当我尝试打开生成的 .swf 时，Flash Player 会抛出一个异常，指出缺少一个 OSMF 类（未找到 org.osmf.media.PluginInfo 类）。

swc 和 swf 的反编译表明 PluginInfo 不存在。

staticLinkRuntimeSharedLibraries 没有帮助。

是否可以使用 Mojos 和 Maven 强制库类包含在此设置中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:01:04.123

我没有使用过 Maven FlexMojo，但是使用 Ant，您需要指定 include-classes 属性以强制将类放入构建的库中。

flexmojo:compile-swc 目标具有 includeClasses 参数。我打赌这就是你需要包括的内容。