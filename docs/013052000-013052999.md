# StackOverflow 问答 13052000-13052999

# regex - 来自用户输入的 Perl 正则表达式匹配

> ID：13052001
> 
> 赞同：0
> 
> 时间：2012-10-24T15:05:53.113
> 
> 标签：regex, perl, variables, input, expression

我只是在学习 perl，同时我也在尝试学习正则表达式。基本上我正在尝试打开一个日志文件并打印出任何与用户输入匹配的行到一个新文件。使用下面的代码，如果我输入“Clinton”这个词，我根本不会得到任何输出。但如果我更换

```
print MYFILE if /\$string\; 
```

和

```
print MYFILE if /\Clinton\; 
```

它按预期运行。有任何想法吗？我知道我缺少一些简单的东西。

```
print "Enter a word to look up: ";
$string = <>;
print "You put $string";
open(LOG,"u_ex121011.log") or die "Unable to open logfile:$!\n";
open (MYFILE, '>>data2.txt');
while(<LOG>){   
   print MYFILE if /\Q($string)\E/;
}
close (MYFILE); 
close(LOG);
print "Check data2.txt"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:10:31.017

在 Perl 中，与某些语言不同，输入运算符不会默默地删除尾随的换行符。所以你`$string`实际上是`"Clinton\n"`而不是`"Clinton"`。要修复它，请使用[以下`chomp`功能](http://perldoc.perl.org/functions/chomp.html)：

```
$string = <>;
chomp $string;
print "You put $string\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:13:02.037

您还应该使用 3 参数版本的 open。

```
open( my $LOG, '<', 'u_ex121011.log' ) or die "Unable to open file:$!\n"; 
```

打开[http://perldoc.perl.org/functions/open.html](http://perldoc.perl.org/functions/open.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T15:14:37.157

除了ruakh所说的，您应该使用`$_`变量和`=~`运算符检查字符串是否在线。

```
print MYFILE "$_\n" if $_ =~ /\Q$string\E/; 
```

离开您的评论，您可以使用`split`. 这是您可以执行的操作的示例：

```
my @lines = split( ' ', $_ );
print MYFILE "$lines[0] $lines[1] $lines[2] $lines[3]\n"; 
```

这是拆分的文档：http: [//perldoc.perl.org/functions/split.html](http://perldoc.perl.org/functions/split.html)

# vb.net - 在 VB.NET 中表示三角矩阵？

> ID：13052007
> 
> 赞同：0
> 
> 时间：2012-10-24T15:06:07.403
> 
> 标签：vb.net, matrix

我有一个任务说我必须从文件中读取每个 20 个城市之间的距离。我想知道如何在应用程序中处理这些数据。我想到了多维数组，就像`Distances(0, 1, 0)=500`这意味着 city0 和 city1 之间的距离是 500 英里。我也认为这是浪费记忆，因为`Distances(0, 1, 0)`和`Distances(1, 0, 0)`是一回事。我的导师告诉我使用三角矩阵将数据保存到应用程序中。你能告诉我一个类似的数据处理的例子或如何处理数据的其他想法吗？我简直无法想象。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:10:20.907

我认为他的意思是这样的： [http ://www.arenalogisticsinc.com/images/chart4.jpg](http://www.arenalogisticsinc.com/images/chart4.jpg)

基本上是一个二维数组 - 如果你想节省空间，只需删除数组的上半部分，因为它会有重复。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:35:42.350

你想要一个数组数组。如果每个内部数组的数组大小一致，则多维数组很有用，但是您希望第一个数组的长度=0，第二个数组的长度=1，等等...所以，实际上，您不需要t 甚至需要第一个数组 - 因为它只是空的。

```
Dim triangle As Array(19)

For i = 0 To 18

    Dim innerArray(i+1) As Integer

    triangle(i) = innerArray

Next 
```

# php - 在构造函数中定义的未定义变量

> ID：13052009
> 
> 赞同：0
> 
> 时间：2012-10-24T15:06:16.717
> 
> 标签：php

嗨，我的代码似乎出现错误，似乎说我没有初始化我的变量，但是在构造函数中初始化了 veriabile：

```
Notice: Undefined variable: conn in D:\Program Files\xampp\htdocs\Tutorials\Login\classes\mysql.php on line 18

Fatal error: Cannot access empty property in D:\Program Files\xampp\htdocs\Tutorials\Login\classes\mysql.php on line 18 
```

这是我的代码：

```
<?php
require_once('includes/constants.php');
    class Mysql{

        private $conn;

        function __construct() {
            $this->conn = new mysqli(DB_SERVER , DB_USER , DB_PASSWORD , DB_NAME) or 
                   die('There was a problem connecting to the database');
        }
        function verify_Username_and_Pass($un , $pwd){

            $query = "SELECT * 
                      FROM users
                      WHERE username = ? AND password= ?
                      LIMIT 1";

            if($stmt = $this->$conn->prepare($query)){ //this is where the error points
                $stmt->bind_param('ss', $un, $pwd);
                $stmt->execute();

                if($stmt->fetch()){
                    $stmt->close;
                    return true;
                }
            }   
        }
    }
?> 
```

在第一个 if 语句时抛出错误。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:07:34.403

代替

```
$this->$conn 
```

和

```
$this->conn 
```

出现错误时上线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:07:46.610

```
$this->$conn 
```

这是错误的，应该是

```
$this->conn 
```

# php - 将未知数量的变量传递到新页面

> ID：13052011
> 
> 赞同：-1
> 
> 时间：2012-10-24T15:06:28.193
> 
> 标签：php, mysql

我创建了一个表单，允许用户进行多项选择测验。测验最多可以有 9999 个问题和每个问题的 99 个选项（如果他们真的需要它），然后将该测验存储在数据库中。

我的问题是我无法弄清楚如何将用户创建的测验放入数据库。我知道 mysql INSERT 命令，但无法解决（或找到）如何确定从一页到下一页传递了多少表单输入。

我通常会这样做：

```
$name = $_POST['name'];
$choices = $_POST['choices'];

$quizData = "INSERT INTO quiz
        (name, choices)
        VALUES
        ('$name',
         '$choices')" 
```

但是在不知道有多少问题和选择的情况下，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:11:02.107

由于 $_POST 是一个数组，因此请使用 foreach 将每个问题或答案设置到数据库或它自己的变量中。如果您的字段被称为问题，请将它们设置为，然后您可以使用[**count() 计算**](http://www.php.net/manual/en/function.count.php)`<input type='text' name='questions[]'`$_POST['questions'] 或任何您称之为问题字段数组的问题的数量。[](http://www.php.net/manual/en/function.count.php)

# html - HTML表格标题中的神秘行

> ID：13052014
> 
> 赞同：0
> 
> 时间：2012-10-24T15:06:33.067
> 
> 标签：html, html-table

我正在使用 HTML 标签构建一个简单的表格。源代码是这样的：

```
<table class="tableClass">
    <thead>
        <tr>
            <th>Column Header</th>
            <th>Column Header</th>
        <tr>
    </thead>
    <tbody>     
            <tr>
                <td>Column Data</td>
                <td>Column Data</td>
            </tr>       
    </tbody>
</table> 
```

当我在 Head 部分的 Browser 中尝试该表时，它似乎是一个空行。我在 Firefox 和 Chrome 中尝试过，调试器输出如下：

```
 <table class="tableClass">
        <thead>
            <tr>
                <th>Column Header</th>
                <th>Column Header</th>
            <tr>
            <tr></tr>
        </thead> 
```

该空行没有出现在代码中的任何位置，但调试器似乎找到了它。有什么想法可以从哪里来？它与表格样式有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:08:50.927

你没有关闭`<tr>`你的`<thead>`

```
<thead>
    <tr>
        <th>Column Header</th>
        <th>Column Header</th>
    </tr> <!-- here -->
</thead> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:08:51.410

在`<thead>`你没有关闭`<tr>`只是制作一个新的。

```
<table class="tableClass">
    <thead>
        <tr>
            <th>Column Header</th>
            <th>Column Header</th>
        <tr> <!-- NOT CLOSED! -->
    </thead>
    <tbody>     
            <tr>
                <td>Column Data</td>
                <td>Column Data</td>
            </tr>       
    </tbody>
</table> 
```

如果您验证您的 HTML，您将避免这些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:09:31.210

```
<table class="tableClass">
    <thead>
        <tr>
            <th>Column Header</th>
            <th>Column Header</th>
        <tr> //NOT CLOSED
    </thead> 
```

关闭表格行:)

# c# - 它叫什么 - 从关键字列表中获取最常用的词段？

> ID：13052020
> 
> 赞同：0
> 
> 时间：2012-10-24T15:06:47.977
> 
> 标签：c#, .net

假设我有一个关键字列表

```
free numerology compatibility
numerology calculator free
free numerology report
numerology reading
free numerology reading
etc... 
```

当我想得到以下结果时，我可以通过什么 c# 算法或它叫什么来进一步研究它？

```
6 instances of "numerology"
3 instances of "free numerology"
2 instances of "numerology reading"
1 instance of "numerology compatibility"
1 instance of "numerology calculator"
etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:09:32.123

您可以遍历单词数组并使用字典存储计数。

例如

```
Dictionary d = new Dictionary<string, int>();

foreach (string word in wordList)
{
    if (d.ContainsKey(word))
    {
       d[word]++;
    }
    else
    {
       d[word] = 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:10:40.200

您正在查看的主题名称为**Term Frequency Analysis**或**Word Frequency Analysis**。以下代码可以为您提供每个单词的频率。找到给定短语的频率也很容易，但是对整个文档进行分析并找到频率高于 1 的术语序列有点复杂。

```
void Analyze(ref String InputText, ref Dictionary<string, int> WordFreq)
{
    string []Words = InputText.Split(' ');

    for (int i = 0; i < Words.Length; i++)
    {
        if (WordFreq.ContainsKey(Words[i]) == false)
            WordFreq.Add(Words[i], 1);
        else
        {
             WordFreq[Words[i]]++;
        }
    }
}

void DoWork()
{
    string InputText = "free numerology compatibility numerology calculator free free numerology report numerology reading free numerology reading";
    Dictionary<string, int> WordFreq = new Dictionary<string,int>();

    Analyze(ref InputText,ref WordFreq);

    string result = null;
    foreach (KeyValuePair<string, int> pair in WordFreq)
    {
        result += pair.Value + " Instances of " + pair.Key + "\r\n";
    }

    MessageBox.Show(result);
}

private void Form1_Load(object sender, EventArgs e)
{
    DoWork();
} 
```

# google-maps - 具有固定实际（不在屏幕上）半径和 MarkerClusterer 的标记

> ID：13052021
> 
> 赞同：2
> 
> 时间：2012-10-24T15:06:50.273
> 
> 标签：google-maps, google-maps-api-3

我正在尝试创建一个地图，其中包含以米为单位的固定实际半径的标记。我正在使用 CIRCLE 符号样式，但尝试使用比例选项更改圆的大小似乎不是正确的方法，因为无论缩放级别如何，它在屏幕上都保持相同的大小。

因此，例如，我可能希望在特定点有一个 500m 半径的圆并使用：

```
var markerOptions = {
  icon: {
    path: google.maps.SymbolPath.CIRCLE,
    scale: 500
  },
  position: new google.maps.LatLng(0, 50)
};
marker = new google.maps.Marker(markerOptions); 
```

但是，当我更改缩放时，标记大小不会改变大小，无论缩放级别如何，都保持相同的像素数。

我尝试使用 google.maps.Circle 作为 google.maps.Marker 的替代品，虽然 Circle 有一个半径选项，并且在缩放方面工作得很好，但当有很多时我不能使用 MarkerClusterer 将它们组合在一起它们同时出现在屏幕上，这是另一个要求。

那么如何使聚集标记组和固定大小标记一起工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:45:16.613

感谢@geocodezip 的建议，我查看了 MarkerClusterer 的源代码，并通过一些调整设法让它与圆圈一起工作。如果其他人需要在这里做类似的事情，我对 markercluster.js 所做的更改：

*   将所有出现的 getPosition() 更改为 getCenter()
*   将 MarkerClusterer.prototype.pushMarkerTo_() 更改为以下内容：

    ```
    MarkerClusterer.prototype.pushMarkerTo_ = function (marker) {
      // If the marker is draggable add a listener so we can update the clusters on the dragend:
      marker.isAdded = false;
      this.markers_.push(marker);
    }; 
    ```

现在一切都可以使用 google.maps.Circle 和 MarkerClusterer。

# popup - 如何在单击和鼠标悬停时显示不同的弹出窗口？

> ID：13052023
> 
> 赞同：2
> 
> 时间：2012-10-24T15:06:54.473
> 
> 标签：popup, openlayers

类中的`SelectFeature`方法`Control`提供了一种通过监听事件`featureselected`和`featureunselected`分别在 Vector 层上添加和删除弹出窗口的方法。下面显示了我从openlayers 网站[的示例中获得的示例代码：](http://openlayers.org/dev/examples/light-basic.html)

```
// create the layer with listeners to create and destroy popups
var vector = new OpenLayers.Layer.Vector("Points",{
 eventListeners:{
  'featureselected':function(evt){
   var feature = evt.feature;
   var popup = new OpenLayers.Popup.FramedCloud("popup",
    OpenLayers.LonLat.fromString(feature.geometry.toShortString()),
    null,
    "<div style='font-size:.8em'>Feature: " + feature.id +"<br>Foo: </div>",
    null,
    true
   );
   feature.popup = popup;
   map.addPopup(popup);
  },
  'featureunselected':function(evt){
   var feature = evt.feature;
   map.removePopup(feature.popup);
   feature.popup.destroy();
   feature.popup = null;
  }
 }
});

vector.addFeatures(features);

// create the select feature control
var selector = new OpenLayers.Control.SelectFeature(vector,{
 hover:true, # this line
 autoActivate:true
}); 
```

上面的代码将允许在将鼠标悬停在 Geometry 对象（地图上的图标或标记）上时显示弹出窗口。如果`hover:true`删除了该线，则仅在鼠标单击 Geometry 对象时才会显示弹出窗口。

我想要的是能够在鼠标悬停时显示一种类型的弹出窗口（例如，图像加标题）和在鼠标单击时显示另一种类型（例如，详细描述）。我不确定如何做到这一点。一些帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:40:44.410

此外，还有另一种方式，它比正确使用 API 更像是 hack，但似乎有效。您可以覆盖和覆盖回调。

```
var selectControl = new OpenLayers.Control.SelectFeature(vectorLayer, {

    callbacks: {
        over: function(feat) {
            console.log('Show popup type 1');
        },
        out: function(feat) {
            console.log('Hide popup type 1');
        }
    },

    eventListeners: {
        featurehighlighted: function(feat) {
            console.log('Show popup type 2');
        },
        featureunhighlighted: function(feat) {
            console.log('Hide popup type 2');
        }
    }    
}); 
```

这是工作示例：http: [//jsfiddle.net/eW8DV/1/](http://jsfiddle.net/eW8DV/1/)

查看选择控件的源代码以了解详细信息。

# c++ - Lemon Graph Library C++ - 使用循环的 addNode

> ID：13052027
> 
> 赞同：3
> 
> 时间：2012-10-24T15:07:12.437
> 
> 标签：c++, graph, lemon-graph-library

是否有可能使用 C++ 中的循环创建柠檬图？

**我的问题：**

1.  具有列的数据库表（我们称之为 t_nodes）：节点
2.  带有图形信息的数据库表（我们称之为 t_edges）：node1 | 节点2 | 边缘分数
3.  超过 10000 个条目

**我想要的结果：**

1.  有向图：例如 N1 -> N2；N2 -> N3；N3 -> N1

**我的问题**

1.  是否可以对表中**的每个条目**使用循环**来将节点添加到图中**`t_nodes`

     ***   到目前为止，我只是找到了他们手动添加每个节点的实现（参见下面的示例）
    *   真的没有机会使用循环将节点添加到柠檬图中吗？** 
***   如何对 中提到的所有关系使用循环`t_edges`？** 

 **感谢您的宝贵时间，非常感谢您的帮助！

* * *

在周末有一些空闲时间并花一些时间骑自行车后，我找到了解决方案:)

**我的解决方案：**

看起来，柠檬没有提供支持图表边缘的附加信息的可能性。因此，我刚刚创建了一个额外的向量来存储这些信息。但是，出于某些目的，使用哈希图访问节点可能更明智。

看看开发的示例脚本（非常简单；））

* * *

Lemon C++-代码示例（参考： http: [//lemon.cs.elte.hu/pub/tutorial/a00022.html](http://lemon.cs.elte.hu/pub/tutorial/a00022.html)）：

```
 /* -*- mode: C++; indent-tabs-mode: nil; -*-
 *
 * This file is a part of LEMON, a generic C++ optimization library.
 *
 * Copyright (C) 2003-2010
 * Egervary Jeno Kombinatorikus Optimalizalasi Kutatocsoport
 * (Egervary Research Group on Combinatorial Optimization, EGRES).
 *
 * Permission to use, modify and distribute this software is granted
 * provided that this copyright notice appears in all copies. For
 * precise terms see the accompanying LICENSE file.
 *
 * This software is provided "AS IS" with no warranty of any kind,
 * express or implied, and with no claim as to its suitability for any
 * purpose.
 *
 */

#include <iostream>
#include <lemon/list_graph.h>

using namespace lemon;
using namespace std;

int main()
{
  ListDigraph g;

  ListDigraph::Node u = g.addNode();
  ListDigraph::Node v = g.addNode();
  ListDigraph::Arc  a = g.addArc(u, v);

  cout << "Hello World! This is LEMON library here." << endl;
  cout << "We have a directed graph with " << countNodes(g) << " nodes "
       << "and " << countArcs(g) << " arc." << endl;

  return 0;

  // Further development
  ListDigraph graph;

  vector <string> name;
  name.push_back("A");
  name.push_back("B");
  name.push_back("C");

  for (unsigned int n=0; n<name.size(); n++) {
      ListDigraph::Node node = graph.addNode();
      lemon_node_vector[n].id = n;
      lemon_node_vector[n].name = name[n];
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:09:35.497

当然，您可以循环执行 AddNode 和 AddArc。或者在递归函数中。或以您想要的任何其他方式。

你试过了吗？有什么错误吗？**

# database - 从 Linux shell 与 .db 文件交互

> ID：13052028
> 
> 赞同：5
> 
> 时间：2012-10-24T15:07:12.983
> 
> 标签：database, linux, shell, raspberry-pi

我最近在我的树莓派上安装了 minidlna，一个轻量级的 UPnP 服务器。由于它缺少其他程序（如 Mediatomb）的 Web 界面，我认为编写一个对我来说可能是一个有趣的项目。

我相信 minidlna 将库信息存储在一个名为“files.db”的文件中。

* * *

编辑：我被建议检查`file files.db`- 这是如下的输出：

`files.db: SQLite 3.x database, user version 8`

* * *

但是，我找不到可以让我从 shell 与 .db 文件交互的程序。我看过以下推荐的程序：

*   isql
*   数据库访问
*   sql
*   SQLite3
*   db.util

在前四种情况下，`sudo apt-get install`找不到程序。

`sudo apt-get install db.util`似乎已安装，但在安装过程中会产生以下消息：

```
Processing triggers for man-db ...
Setting up gcj-4.7-base (4.7.1-1) ...
Setting up libgcj-common (1:4.6.3-7) ...
Setting up libgcj13 (4.7.1-1) ...
Setting up libgcj13-awt (4.7.1-1) ...
Setting up gcj-4.7-jre-headless (4.7.1-1) ...
Illegal instruction
ERROR: gcj-dbtool did fail; known problem on armv6l
Setting up gcj-4.7-jre (4.7.1-1) ...
Setting up gcj-4.7-jre-lib (4.7.1-1) ...
Setting up gcj-jre-headless (4:4.7.1-1) ...
Setting up gcj-jre (4:4.7.1-1) ...
Setting up libservlet2.5-java (6.0.35-5) ...
Setting up libhsqldb-java (1.8.0.10-11) ...
Setting up hsqldb-utils (1.8.0.10-11) ... 
```

此后，`which db-util`、`which db.util`和`which dbutil`不产生任何结果。

db.util 是要安装以与 .db 文件交互的正确程序吗？如果是这样，如何使用 gcj-dbtool 修复报告的错误？如果没有，有人可以推荐一个更好的程序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T16:27:42.813

您必须安装一个名为“sqlite”或“sqlite3”的软件包。

然后，您将能够使用 .db 文件与您进行交互

```
$ sqlite3 files.db
> SELECT blah FROM your_table WHERE ...... 
```

在您的帖子中您提到“SQLite3”，包名称不应包含大写字母。

你跑了`apt-cache search sqlite`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-24T17:24:49.737

您也可以使用 python，因为它应该已经在您的 Raspberry Pi 上，并且包含电池 / [sqlite3](https://docs.python.org/3/library/sqlite3.html)。

```
python -c "import sqlite3; print(sqlite3.connect('example.db').cursor().execute('SELECT * FROM stocks ORDER BY price').fetchall())" 
```

# c++ - 从 msvc c++ 执行控制台应用程序

> ID：13052030
> 
> 赞同：1
> 
> 时间：2012-10-24T15:07:13.083
> 
> 标签：c++, visual-c++, command-line

[从 .NET 应用程序 (C#) 捕获控制台输出](https://stackoverflow.com/questions/186822/capturing-console-output-from-a-net-application-c)

除了我使用的是 c++ 而不是 c# 之外，我想做一个与该问题类似的事情。我有一个经过良好测试的小型 java 应用程序，它的一些功能即将在我的一些 c++ 代码中重写，我想为此使用 boost 单元编写一些单元测试来测试结果是否相同。本质上，我想从 c++ 调用这个 java 命令行应用程序。如果可能的话，我宁愿不使用 JNI，因此最好通过 c++ 代码执行其他命令行应用程序。

如何从我的 c++ 应用程序调用控制台应用程序并捕获控制台中生成的所有输出？（我宁愿不必写入中间文件，但如果这是唯一的方法，那就这样吧）

看起来这应该有点简单，但我在通过搜索网络找到任何东西时遇到了很大的麻烦，因为关键字往往会找到关于其他事物的结果（c# 和从命令行编译是 2 个示例）。如果这个问题是重复的，我一点也不感到惊讶，但我找不到另一个相同的问题。如果它已经存在，我很乐意在找到另一个问题的链接后关闭这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:31:59.213

这取决于您所针对的操作系统，因为标准 C++ 库中没有进程处理功能。例如，在 Windows 上，您将创建两个管道（使用[CreatePipe](http://msdn.microsoft.com/en-us/library/aa365152%28v=vs.85%29.aspx)函数）来重定向 Java 应用程序的输入和输出，然后使用[CreateProcess](http://msdn.microsoft.com/en-us/library/ms682425%28v=vs.85%29.aspx)函数运行 Java 应用程序。[这里](http://msdn.microsoft.com/en-us/library/ms682499%28VS.85%29.aspx)有一个例子。

但我真的建议改用 JNI，它是一种比管道更好的互操作/IPC 形式。你最终会意识到，如果你走管道路线。

# android - 填充 Android Spinner

> ID：13052035
> 
> 赞同：0
> 
> 时间：2012-10-24T15:07:27.103
> 
> 标签：android, spinner, simplecursoradapter

我正在尝试使用查询结果填充微调器，如下所示：

```
DataBaseHelper mDbH = new DataBaseHelper(this);
Spinner combo1 = (Spinner) findViewById(R.id.combo1);
mDbH.open();
Cursor c1 = null;
c1 = mDbH.consulta4();
startManagingCursor(c1);
if(c1.moveToFirst() == false){
  Log.e("cursor c ","vacio");
  c1.close();
  mDbH.close();
}else{
  SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,android.R.layout.simple_spinner_item,c1,new String[] {"nombre"},new int[] {android.R.id.text1});
  adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  combo1.setAdapter(adapter);
  c1.close();
  mDbH.close();
} 
```

但是当我测试我的应用程序时，它不起作用！LogCat 没有显示任何错误！我有点迷失在这里！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:25:44.940

将光标传递给 SimpleCursorAdapter 后，您将关闭光标。通过这样做，您可以让光标释放其数据并使其无法使用。因此，SimpleCursorAdapter 不能再使用它了。在代码的 else 部分中删除这一行（在 setAdapter 之后）：

```
c1.close(); 
```

然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:32:35.327

`startManagingCursor(c1)`已经为您处理关闭。在这里，您的适配器将需要光标在屏幕上渲染您的对象，因此您不应关闭它。

# android - 使用 android-async-http (loopj) 发布 JSON/XML

> ID：13052036
> 
> 赞同：47
> 
> 时间：2012-10-24T15:07:31.113
> 
> 标签：android, rest, post, loopj, android-async-http

我正在使用[android-async-http](http://loopj.com/android-async-http/)并且非常喜欢它。我遇到了发布数据的问题。我必须以以下格式将数据发布到 API：-

```
<request>
  <notes>Test api support</notes>
  <hours>3</hours>
  <project_id type="integer">3</project_id>
  <task_id type="integer">14</task_id>
  <spent_at type="date">Tue, 17 Oct 2006</spent_at>
</request> 
```

根据文档，我尝试使用`RequestParams`，但它失败了。这是任何其他方式吗？我也可以发布等效的 JSON。有任何想法吗？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-12-16T13:19:40.093

Loopj POST 示例 - 扩展自他们的 Twitter 示例：

```
private static AsyncHttpClient client = new AsyncHttpClient(); 
```

通过以下方式正常发布`RequestParams`：

```
RequestParams params = new RequestParams();
params.put("notes", "Test api support"); 
client.post(restApiUrl, params, responseHandler); 
```

要发布 JSON：

```
JSONObject jsonParams = new JSONObject();
jsonParams.put("notes", "Test api support");
StringEntity entity = new StringEntity(jsonParams.toString());
client.post(context, restApiUrl, entity, "application/json",
    responseHandler); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-10-12T19:56:11.057

@Timothy 的回答对我不起作用。

我定义了`Content-Type`of`StringEntity`以使其工作：

```
JSONObject jsonParams = new JSONObject();
jsonParams.put("notes", "Test api support");

StringEntity entity = new StringEntity(jsonParams.toString());
entity.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));

client.post(context, restApiUrl, entity, "application/json", responseHandler); 
```

祝你好运 ：）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-02T08:36:50.360

发布json的更好方法

```
RequestParams params = new RequestParams();
    params.put("id", propertyID);
    params.put("lt", newPoint.latitude);
    params.put("lg", newPoint.longitude);
    params.setUseJsonStreamer(true);

    ScaanRestClient restClient = new ScaanRestClient(getApplicationContext());
    restClient.post("/api-builtin/properties/v1.0/edit/location/", params, new AsyncHttpResponseHandler() {
        @Override
        public void onSuccess(int statusCode, Header[] headers, byte[] responseBody) {
        }

        @Override
        public void onFailure(int statusCode, Header[] headers, byte[] responseBody, Throwable error) {
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-17T05:51:32.633

发布 XML

```
protected void makePost() {
    AsyncHttpClient client = new AsyncHttpClient();
    Context context = this.getApplicationContext();
    String  url = URL_String;
    String  xml = XML-String;
    HttpEntity entity;
    try {
        entity = new StringEntity(xml, "UTF-8");
    } catch (IllegalArgumentException e) {
        Log.d("HTTP", "StringEntity: IllegalArgumentException");
        return;
    } catch (UnsupportedEncodingException e) {
        Log.d("HTTP", "StringEntity: UnsupportedEncodingException");
        return;
    }
    String  contentType = "string/xml;UTF-8";

    Log.d("HTTP", "Post...");
    client.post( context, url, entity, contentType, new AsyncHttpResponseHandler() {
        @Override
        public void onSuccess(String response) {
            Log.d("HTTP", "onSuccess: " + response);
        }
          ... other handlers
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T15:41:25.373

只需将您的 xml 或 json 写入字符串并发送到服务器，无论是否带有适当的标头。是的，将“Content-Type”设置为“application/json”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-17T16:54:59.663

如果有人遇到 httpclient 发送的问题`Content-Type: text/plain`，请参考此链接： [https ://stackoverflow.com/a/26425401/361100](https://stackoverflow.com/a/26425401/361100)

loopj httpclient 发生了一些变化（或有问题），无法将`StringEntity`本机 Content-Type 覆盖为`application/json`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-28T12:37:30.923

您可以将 JSON 字符串添加为某种 InputStream - 我使用了 ByteArrayStream，然后将其传递给 RequestParams 您应该设置正确的MimeType

```
InputStream stream = new ByteArrayInputStream(jsonParams.toString().getBytes(Charset.forName("UTF-8")));
multiPartEntity.put("model", stream, "parameters", Constants.MIME_TYPE_JSON); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-10T19:18:25.013

只需制作 JSONObject，然后将其转换为字符串“someData”并使用“ByteArrayEntity”发送

```
 private static AsyncHttpClient client = new AsyncHttpClient();
    String someData;
    ByteArrayEntity be = new ByteArrayEntity(someData.toString().getBytes());
    client.post(context, url, be, "application/json", responseHandler); 
```

它对我来说很好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-25T10:15:57.500

将 xml 文件发布到 php 服务器：

```
public class MainActivity extends AppCompatActivity {

/**
 * Send xml file to server via asynchttpclient lib
 */

Button button;
String url = "http://xxx/index.php";
String filePath = Environment.getExternalStorageDirectory()+"/Download/testUpload.xml";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    button = (Button)findViewById(R.id.button);

    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            postFile();
        }
    });
}

public void postFile(){

    Log.i("xml","Sending... ");

    RequestParams params = new RequestParams();

    try {
        params.put("key",new File(filePath));
    }catch (FileNotFoundException e){
        e.printStackTrace();
    }

    AsyncHttpClient client = new AsyncHttpClient();

    client.post(url, params, new AsyncHttpResponseHandler() {
        @Override
        public void onSuccess(int i, cz.msebera.android.httpclient.Header[] headers, byte[] bytes) {
            Log.i("xml","StatusCode : "+i);
        }

        @Override
        public void onFailure(int i, cz.msebera.android.httpclient.Header[] headers, byte[] bytes, Throwable throwable) {
            Log.i("xml","Sending failed");
        }

        @Override
        public void onProgress(long bytesWritten, long totalSize) {
            Log.i("xml","Progress : "+bytesWritten);
        }
    });
} 
```

}

将android-async-http-1.4.9.jar添加到android studio后，进入build.gradle并 `compile 'com.loopj.android:android-async-http:1.4.9'`在依赖项下添加：

并在 AndroidManifest.xml 添加：

`<uses-permission android:name="android.permission.INTERNET" /> <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />`

# performance - 哪个更快：内存中解压缩或访问 HDD 中的未压缩数据

> ID：13052043
> 
> 赞同：1
> 
> 时间：2012-10-24T15:07:57.437
> 
> 标签：performance, io, compression, in-memory

我有一个大于主内存的数据集。压缩后，它适合内存。但是，内存中的解压缩是一种计算密集型的。与访问硬盘中的未压缩数据相比，内存中解压在完成时间方面有什么优势吗？假设来自 HDD 的数据将全部加载到内存中（即在处理过程中不会随机访问 HDD）。任何人以前都做过任何基准测试。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T02:49:23.993

首先，数据必须是可压缩的。如果没有压缩，那么显然压缩到硬盘并解压回来会更慢。HDD 上的许多文件是不可压缩的，因为它们已经被压缩，例如图像文件、视频文件、音频文件和无损压缩档案，如 zip 或 .tar.gz 文件。

如果是可压缩的，[zlib](http://zlib.net/)解压很可能比HDD读取快，[lz4](https://code.google.com/p/lz4/)解压很有可能更快。

这是经典的问题，只能用“取决于”和“你需要根据你的情况来衡量”来正确回答。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T15:13:17.453

如果您的解压缩速度至少与 HDD 读取数据的速度一样快，并且与磁盘读取并行解压缩，那么压缩数据的读取几乎总是会更快（较小文件的读取将更快完成，并且解压缩只会增加最后一个块）。

根据[这个基准](http://tukaani.org/lzma/benchmarks.html)，一个[相当弱的 CPU](http://www.cpubenchmark.net/cpu.php?cpu=AMD+Athlon+XP+2400%2B)可以以超过 60MB/s 的速度解压缩 gzip。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T15:26:42.597

这取决于您的数据、处理方式以及机器的规格。如果不分析您的确切情况，一些考虑因素几乎不可能回答：

*   你的压缩效果如何？不同的压缩算法使用不同数量的 CPU。
*   数据是如何使用的？在处理之前需要缓冲的数据量会影响在解压和处理之间可以多线程的数量，这将极大地影响你的答案。
*   你的环境是什么？具有 1TB 数据要处理的 16 核服务器与具有 1GB 数据的精美手机有很大不同，但是从您的问题中不清楚您正在处理哪个（HDD 建议至少使用计算机而不是手机，但是服务器vs桌面仍然相关）。
*   加载数据后，您进行了多少随机访问？您建议加载后不会随机访问 HDD，但如果您要加载完整的压缩数据并且一次只解压缩一部分数据，那么访问数据的模式很重要 - 您可能已经解压缩一切都要处理两次（或更多！）。

归根结底，这个问题非常主观，如果您认为性能差异很重要，我建议您创建一些基本的测试场景并进行大量配置。

举一个更具体的例子：如果您正在执行重型音频或视频处理，则该过程是 CPU 密集型的，但通常会接受数据流。在这种情况下，压缩可能会减慢您的速度，因为瓶颈将是 CPU。

或者，如果您从文件中读取十亿行文本并计算每个文本中元音的总数，您的磁盘 IO 可能会成为瓶颈，您将受益于减少磁盘 IO 并通过解压缩更努力地工作 CPU文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-18T19:40:25.533

在我们的案例中，我们优化了批处理代码，该代码将在批处理模式下通过结构化消息（阅读：推文）；将表示从 JSON 切换到[msgpack](/questions/tagged/msgpack "显示标记为“msgpack”的问题")，并使用 映射整个文件`mmap`，我们进入了一种明显受 I/O 限制的状态，磁盘速度是限制因素。

我们发现大部分包含 UTF-8 文本的ed 消息可以使用[LZ4](https://github.com/lz4/lz4)`msgpack`以 3-4 的压缩比进行压缩；在切换到 LZ4 解压后，我们优化的代码仍然是 I/O-bound，但吞吐量显着增加。

在您的情况下，我将开始尝试 LZ4。

# django - django 如何仅从一个字段返回条目列表

> ID：13052045
> 
> 赞同：1
> 
> 时间：2012-10-24T15:08:02.863
> 
> 标签：django, object

我有一个模型，设计。这包含几个字段，其中之一是日期时间字段 date_submitted。

如何从对象列表中返回仅包含日期时间字段的列表？例如，我有：

```
design_list = Design.objects.all().order_by('-date_submitted')[:10] 
```

但这包含所有字段。如何仅将 date_submitted 字段隔离到列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:16:18.110

查看 QuerySet 的[values_list](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values-list)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:16:55.563

```
[design.date_submitted for design in Design.objects.all().order_by('-date_submitted')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:18:15.843

使用 values_list。

```
design_list = Design.objects.all().order_by('-date_submitted')[:10].values_list('design_list') 
```

更多关于[Django 文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#values-list)

# python - OSX中的python crypt

> ID：13052047
> 
> 赞同：12
> 
> 时间：2012-10-24T15:08:07.413
> 
> 标签：python, c, encryption

我有一个 Django 应用程序，它重置在 Ubuntu 机器上运行的 unix 用户密码，但我的开发环境是 OS X，我遇到了这种烦人的情况：

操作系统：

```
>>> import crypt
>>> crypt.crypt('test','$1$VFvON1xK$')
'$1SoNol0Ye6Xk' 
```

Linux：

```
>>> import crypt
>>> crypt.crypt('test','$1$VFvON1xK$')
'$1$VFvON1xK$SboCDZGBieKF1ns2GBfY50' 
```

通过阅读 pydoc `crypt`，我看到它使用了特定于操作系统的`crypt`实现，因此我还在两个系统中测试了以下代码，结果与 Python 相同：

```
#include <unistd.h>

int main() {
        char *des = crypt("test","$1$VFvON1xK$ls4Zz4XTEuVI.1PnYm28.1");
        puts(des);
} 
```

如何让 OS X 的`crypt()`实现产生与 Linux 相同的结果`crypt()`？
为什么 Python 实现没有涵盖这一点（正如我对跨平台部署的这种情况所期望的那样）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T15:59:29.520

这是因为 Linux 的 glibc 处理密码的方式不同 - Linux 上密码的盐值对应于它生成的散列类型。OSX crypt() 是普通的 DES 加密，（这很可怕）。

glibc 支持多种哈希算法（MD5、Blowfish、SHA-256 等）。

如果我们查看[crypt.3](http://www.kernel.org/doc/man-pages/online/pages/man3/crypt.3.html)联机帮助页，我们可以看到：

```
 If salt is a character string starting with the characters "$id$" followed by
   a string terminated by "$":

          $id$salt$encrypted

   then instead of using the DES machine, id identifies the encryption method
   used and this then determines how the rest of the password string is
   interpreted.  The following values of id are supported:

          ID  | Method
          ---------------------------------------------------------
          1   | MD5
          2a  | Blowfish (not in mainline glibc; added in some
              | Linux distributions)
          5   | SHA-256 (since glibc 2.7)
          6   | SHA-512 (since glibc 2.7) 
```

因此，鉴于这些信息.. 让我们使用 Linux 的 crypt 从第二个示例中获取您的密码

```
$1$VFvON1xK$SboCDZGBieKF1ns2GBfY50' ('test', encrypted with salt=VFvON1xK)

1                       == MD5
VFvON1xK                == Salt
SboCDZGBieKF1ns2GBfY50  == Hashed password 
```

幸运的是，有一个跨平台的解决方案[passlib.hash.md5_crypt](http://packages.python.org/passlib/lib/passlib.hash.md5_crypt.html)。

下面是你如何使用它：

```
from passlib.hash import md5_crypt
hash = md5_crypt.encrypt("test",salt="VFvON1xK")
print hash 
```

在 Linux 或 OSX 上运行时，生成以下 glibc 友好密码哈希：

```
$1$VFvON1xK$SboCDZGBieKF1ns2GBfY50 
```

与在 Linux 机器上生成的原始版本相同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T16:03:10.207

您正在将专门的盐字符串传递给调用特定于 glibc 的 crypt 行为的函数，这些行为在 Mac OS X 上不可用。来自 Debian 6 上的 crypt(3) 手册页：

> 如果 salt 是一个以字符“$id$”开头的字符串，后跟一个以“$”结尾的字符串......那么 id 不使用 DES 机器，而是标识使用的加密方法，然后确定其余部分如何密码字符串被解释。

在您的 python 示例中，您告诉 crypt 使用`id`1，这会导致使用 M​​D5 而不是基于 DES 的散列。`crypt`在严格基于 DES 的Mac OS X 上没有这样的扩展。（Mac OS X`crypt`有它自己的扩展——salt 可以是一个 9 字符的数组，以下划线开头，后跟 4 个字节的迭代计数和 4 个字节的 salt——在 glibc 的实现中没有类似物。）

如果您避免`crypt`在两个平台上进行扩展并使用传统`crypt`的 salt ，其中 salt 只能是两个字节，您将从两个平台上的函数中获得相同的结果，例如：

```
>>> crypt.crypt( "test", "S/" )
'S/AOO.b04HTR6' 
```

从安全的角度来看，这显然很糟糕。考虑改用[passlib](http://code.google.com/p/passlib/ "密码库")或[py-bcrypt](http://www.mindrot.org/projects/py-bcrypt/ "py-bcrypt")之类的东西。任何一个都可以同时为您带来更好的散列和跨平台可靠性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T15:29:19.400

为什么要在 Python 中使用单个 crypt 函数？如果您在 OSX 中运行，则需要 osx 版本的 crypt()，如果您在 ubuntu 中运行，它将使用 ubuntu 的 crypt()。

这是一个跨平台的解决方案——Python 使用 OS crypt 来确保环境中的兼容性。如果 Python 使用它自己的 crypt()，那么哈希值将是相同的——但它可以在 OSX 而不是 Ubuntu 上工作（反之亦然）

您可以编写一些东西或找到一个模块，以重新实现 crypt 在每个环境中使用的散列算法——但同样，这会破坏跨平台的目的。您将硬编码您的应用程序以在 Ubunutu 上工作，它可能使用不同的密码，不仅来自 OSX，而​​且来自其他 Unix 和 BSD 风格，如 RedHat、FreeBSD 等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-14T15:23:07.283

作为对@synthesizerpatel[答案](https://stackoverflow.com/a/13052999)的更新，该`.encrypt()`方法现在在 passlib 中已弃用，并由该`.hash()`方法替换：

```
from passlib.hash import md5_crypt
hash = md5_crypt.hash("test", salt="VFvON1xK")
print(hash) 
```

# cakephp - 分页器->在 CakePHP 2.2 中使用包含进行排序

> ID：13052049
> 
> 赞同：0
> 
> 时间：2012-10-24T15:08:20.720
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我正在使用包含行为，我希望能够像往常一样对数据进行排序，但我遇到了麻烦。

这可能是因为我要排序的列不是分页表上的列，而是包含表上的列。

*Subscriptions*表只包含“user_id”和“post_id”。

在控制器我有：

```
$this->paginate = array(
    'conditions' => array('Subscription.user_id' => $this->Session->read('Auth.User.id')),
    'paramType' => 'querystring',
    'limit' => 20,
    'contain'=> array('User', 'Post' => array('Priority', 'Status')) 
 );

$this->set('subscriptions', $this->paginate('Subscription')); 
```

在我看来，这是：

```
<!-- example of not working sort -->
<th class="td_subject"><?php echo $this->Paginator->sort('subject'); ?></th> 
```

例如，主题的数据包含在数组*$subscription*中，格式为：

```
$subscription['Post']['subject'] 
```

我这样打印：

```
foreach ($subscriptions as $subscription): 
    echo ...
    echo '<td>'.h($subscription['Post']['subject'].'</td>';
    echo ...
endforeach; 
```

在这种情况下如何使用分页？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:17:26.383

在这种情况下不要使用包含，手动加入表：

```
$this->paginate = array(
    'conditions' => array('Subscription.user_id' => $this->Session->read('Auth.User.id')),
    'paramType' => 'querystring',
    'limit' => 20,
    'joins'=>array(
        array(
            'table'=>'users',
            'alias'=>'User',
            'conditions'=>array(
                'Subscription.user_id = User.id
            )
        ),
        array(
            'table'=>'posts',
            ...
        ),
        array(
             'table'=>'priorities',
             ...
        ),
        array(
             'table'=>'status',
             ...
        )
    )
 ); 
```

您的看法：

```
<?php echo $this->Paginator->sort('Post.subject', 'Subject'); ?> 
```

# objective-c - 将 uitableview 填充为 uicollectionview 的子视图

> ID：13052053
> 
> 赞同：0
> 
> 时间：2012-10-24T15:08:27.870
> 
> 标签：objective-c, ios, uitableview

我在填充以编程方式创建的 uitableview 作为 uicollectionview 的子视图时遇到问题。

这是我的代码：

.h 文件

```
#import <UIKit/UIKit.h>

@interface TheViewController : UICollectionViewController<UITableViewDataSource>
@property (atomic,strong) IBOutlet UIBarButtonItem *plus;
-(IBAction) addTeamPressed:(id)sender;
@end 
```

.m 文件

```
- (void)viewDidLoad
{
    [super viewDidLoad];
   NSError *jsonParsingError = nil;

    teamsView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, self.view.window.bounds.size.width, self.view.window.bounds.size.height)];
    NSData *t = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://..."] options:NSDataReadingMappedIfSafe error:&jsonParsingError];

    NSArray *tmp = [NSJSONSerialization JSONObjectWithData:t options:0 error:&jsonParsingError];
    UITableViewCell * teamCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    teams = [[NSMutableArray alloc]init];
    [teamsView addSubview:teamCell];

teamsView.delegate = self;

teamsView.dataSource = self;
    for(int i =0;i<tmp.count;i++){
        [teams addObject:[tmp objectAtIndex:i]];
    }
    plus.title = @"Done";

    [self.view addSubview:teamsView];

}

#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    // If You have only one(1) section, return 1, otherwise you must handle sections
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [teams count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    TeamsNameCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell = [[SquadreNameCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.name.text = [NSString stringWithFormat:@"%@",[[teams objectAtIndex:indexPath.row] objectForKey:@"name"]];
    NSLog(@"%d teams",[teams count]);
    return cell;
} 
```

我的表格视图显示正确，这当然要归功于此处未提及的其他功能，但子视图中没有行。编译器打印出团队的数量，因此它调用委托方法，但它不填充子视图......

这有什么问题？

在此先感谢达里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:17:49.513

首先，您应该从您的`viewDidLoad`：

```
UITableViewCell * teamCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
[teamsView addSubview:teamCell]; 
```

然后确保您的`teams`数组被保留，只需将这一行放到头文件中：

```
@property (nonatomic, strong) NSMutableArray* teams; 
```

然后使用`self.teams`而不是仅仅`teams`

在`viewDidLoad`方法结束时，您应该调用`[teamsView reloadData];`

更改表数据源方法也很好：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    TeamsNameCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        // please make sure that you allocate required object here
        cell = [[TeamsNameCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // please make sure that you do have `name` property in your `TeamsNameCell` class
    cell.name.text = [NSString stringWithFormat:@"%@",[[teams objectAtIndex:indexPath.row] objectForKey:@"name"]];
    NSLog(@"%d teams",[teams count]);
    return cell; 
```

}

请确保您的`TeamsNameCell`班级有`name property in the header`：

```
@property(nonatomic, strong) UILabel* name; 
```

并且不要忘记在以下构造函数中分配此标签`TeamsNameCell`：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.name = [[UILabel alloc] initWithFrame:CGRectMake(0,0,100,50)];
        [self addSubview:self.name];
    }
    return self;
} 
```

或者也许最好使用默认单元格的标签：

而不是`cell.name.text = @"text";`使用`cell.textLabel.text = @"text";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:35:15.370

解决方案是，

```
 static NSString *CellIdentifier = @"Cell";

    TeamsNameCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[SquadreNameCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.labelText.text = [NSString stringWithFormat:@"%@",[[teams objectAtIndex:indexPath.row] objectForKey:@"name"]];
    NSLog(@"%d teams",[teams count]);
    return cell; 
```

# r - 绘制 R 中差异的分布

> ID：13052058
> 
> 赞同：1
> 
> 时间：2012-10-24T15:08:33.023
> 
> 标签：r, plot

我有一个数据集，其中的数字在某些方面表示每日差异。

[https://dl.dropbox.com/u/22681355/diff.csv](https://dl.dropbox.com/u/22681355/diff.csv)

我想创建一个差异分布图，特别强调罕见的大变化。

我尝试使用 hist() 函数绘制每一列，但它并没有真正提供数据的详细图片。

例如，绘制数据集的第一列会产生以下图：

[https://dl.dropbox.com/u/22681355/Rplot.pdf](https://dl.dropbox.com/u/22681355/Rplot.pdf)

我的问题是，这对罕见的大偏差提供了很少的细节。

最简单的方法是什么？

还有关于如何在表格中总结这些数据的任何建议？例如，除了显示最小值、最大值和平均值之外，您还会查看分位数吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:19:08.100

您可以使用[箱线图](http://en.wikipedia.org/wiki/Box_plot "箱线图")来可视化数据的分布：

```
sdiff <- read.csv("https://dl.dropbox.com/u/22681355/diff.csv")

boxplot(sdiff[,-1]) 
```

异常值打印为圆圈。

![在此处输入图像描述](../Images/80919805e60f2cf9d03c2251857036b6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:25:54.270

我支持@Sven 关于识别异常值的建议，但您可以通过指定一组比`hist`默认设置更密集的断点来在直方图中获得更多细化。

```
d <- read.csv('https://dl.dropbox.com/u/22681355/diff.csv', header=TRUE, row.names=1)
with(d, hist(a, breaks=seq(min(a), max(a), length.out=100))) 
```

![在此处输入图像描述](../Images/dae0a8f4958111cd7a36b6f398d4dc2a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:26:33.877

[小提琴图](http://en.wikipedia.org/wiki/Violin_plot)可能有用：

```
df <- read.csv('https://dl.dropbox.com/u/22681355/diff.csv')
library(vioplot)
with(df,vioplot(a,b,c,d,e,f,g,h,i,j)) 
```

![小提琴情节](../Images/517470e3c7297c147cdfcbab4b55416b.png)

我会在转换后的数据上使用箱线图，例如：

```
boxplot(df[,-1]/sqrt(abs(df[,-1]))) 
```

![箱线图（数据转换）](../Images/ebf44f80f4cc9857d1cff5c2fd537631.png)

显然，直方图在转换后也会更好看。

# linq - DefaultIfEmpty 上的 LINQ NullReferenceException

> ID：13052065
> 
> 赞同：6
> 
> 时间：2012-10-24T15:08:58.240
> 
> 标签：linq, nullreferenceexception, defaultifempty

我正在寻找一种解决方案，以解决`DefaultIfEmpty()`在 LINQ 外连接中使用时扩展方法不拾取空值的问题。

代码如下：

```
 var SummaryLossesWithNets = (from g in SummaryLosses
                                     join n in nets
                                     on g.Year equals n.Year into grouping
                                     from x in grouping.DefaultIfEmpty()
                                     select new
                                         {
                                             Year = g.Year,
                                             OEPGR = g.OccuranceLoss,
                                             AEPGR = g.AggregateLoss,
                                             OEPNET = ((x.OEPRecovery == null) ? 0 : x.OEPRecovery),
                                             AEPNET = ((x.AEPRecovery == null) ? 0 : x.AEPRecovery),
                                         }); 
```

在 List SummaryLosses 中，我希望将多年的数据加入到包含年份的子部分的“nets”表中。我假设 x 为空值时引发异常，因为 SummaryLosses 中的年份与网络中的年份不匹配会在分组列表中创建空值。

应该如何在这里检查空值？正如你所看到的，我试图检查 x 的属性是否为 null，但由于 x 为 null，这不起作用。

亲切的问候理查德

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T15:13:43.723

只需检查是否`x`为空：

```
OEPNET = x == null ? 0 : x.OEPRecovery,
AEPNET = x == null ? 0 : x.AEPRecovery 
```

或者如果`x.OEPRecovery`和`x.AEPRecovery`也是可以为空的属性，请使用：

```
OEPNET = x == null ? 0 : (x.OEPRecovery ?? 0),
AEPNET = x == null ? 0 : (x.AEPRecovery ?? 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T11:34:46.313

如果你有很多 join 语句

> 检查检查`all joined tables`并确保`foreign key you are using` （在比较或让我们说感兴趣）`is not null`

# search - 如何通过 search.ini 和operaprefs.ini 更改浏览器Opera 中的默认搜索

> ID：13052066
> 
> 赞同：0
> 
> 时间：2012-10-24T15:08:57.400
> 
> 标签：search, opera

如果我只是更改 search.ini 中的参数 - 将添加新搜索，但不会将其设置为默认值。

我发现 [State] 部分的operaprefs.ini 中有一个参数 - Data2=02827edd9d4c131d98daea963133db3d757

如果数字正确，那么一切都很完美！

如何正确生成这些数字？

谢谢你。

# ruby-on-rails - Ruby on Rails respond_with 和图像格式

> ID：13052068
> 
> 赞同：0
> 
> 时间：2012-10-24T15:08:58.783
> 
> 标签：ruby-on-rails, image, rendering, mime-types

我有一个响应 html 和 png 的控制器（我动态加载图像并将其呈现为文本）。这使得控制器代码变得混乱，今天我发现了 respond_with，它看起来很酷，但我不知道如何使它适用于不同于 html、json 和 xml 的格式（如 png）

我希望这会起作用，但它仍然会尝试查找模板文件并忽略我的方法:(

**模型/用户.rb**

```
class User < ActiveRecord::Base  
  def to_png
    File.read("some_file.png")
  end
end 
```

**控制器/users_controller.rb**

```
class UsersController < ApplicationController
  respond_to :html, :png

  # GET /users/1
  def show
    @user = User.find(params[:id])
    respond_with(@user)
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:16:34.017

尝试添加文件`[YOUR_APP]/config/initializers/mime_types.rb`：

```
Mime::Type.register "image/png", :png 
```

并重新启动您的应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:16:49.283

> 如果您需要使用默认不支持的 MIME 类型，您可以在 environment.rb 中注册自己的处理程序，如下所示。
> 
> `Mime::Type.register "image/jpg", :jpg`

[http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)

在环境中.rb

```
Mime::Type.register "image/png", :png 
```

然后

```
respond_to do |format|
   format.png do
      #do stuff here
   end
end 
```

或者

```
respond_with @user do |format|
   format.png do
      #do stuff here
   end
end 
```

# batch-file - 从批处理文件中查找和替换不起作用

> ID：13052072
> 
> 赞同：0
> 
> 时间：2012-10-24T15:09:10.607
> 
> 标签：batch-file, replace, find

我正在尝试在批处理文件中查找和替换字符串的值但遇到问题。我让用户运行批处理文件，它询问用户 1）文件在哪个驱动器上 2）TEST 父文件夹中的文件夹名称是什么 3）新服务器的名称是什么。我希望批处理文件在名为 importer.config 的文件中查找，并将名为 server_name 的值替换为用户输入的任何内容。这是我所拥有的：

```
@echo off
SET drive=
SET /P drive=Please enter the drive:

SET folder=
SET /P folder=Enter name of folder desired:

SET server=
SET /P server=Enter name of new server:

@echo off > newfile.txt
setLocal EnableDelayedExpansion

if exist newfile.txt del newfile.txt

for /f "tokens=* delims= " %%a in (%drive%\test\%folder%\importer.config) do (
set str=%%a
set str=!str:server_name=%server%!
echo !str! >> newfile.txt
)
del importer.config
rename newfile.txt importer.config

pause 
```

每次运行这个，cmd提示都会显示：系统找不到指定的文件c:\test\users_input_they_entered\importer.config。问题是该文件在那里，因此试图了解我缺少什么以及为什么找不到确实存在的文件。

然后它还指出“找不到 c:\windows\system32\importer.config”，这也不确定为什么会发生这种情况

我在stackoverflow上进行了搜索，但在任何帮助下都无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:15:59.830

你正在使用 for 循环来推动你的运气。

像 sed 这样的工具会很好用。

如果你看这篇文章，他们有一个 vbscript 实现，你可以使用 [cmd.exe 是否有类似 sed 的实用程序](https://stackoverflow.com/questions/127318/is-there-any-sed-like-utility-for-cmd-exe)

```
set input_file=importer.config
set output_file=temp.config
set new_server_name=server1984

cscript /Nologo sed.vbs s/server_name/%new_server_name%/ < %input_file% > %output_file% 
```

# asp.net - 在下拉框中插入“-- 选择项目--”

> ID：13052077
> 
> 赞同：0
> 
> 时间：2012-10-24T15:09:20.893
> 
> 标签：asp.net, c#-4.0

我的 asp.net 网页中有一个下拉框。我希望 dd 框在加载时以“-- Select a Project --”作为文本值。dd 框在设计时绑定到 EF 对象——没有自定义代码（抱歉）。它有（像一个经典的组合框）一个“ID”列（整数）和一个显示列。当我有一个只有一列的 dd 框时，过程很简单：

```
protected void ProjectDropDown_DataBound(object sender, EventArgs e)
    { 
        DropDownList list = sender as DropDownList; 
        if (list != null) 
            list.Items.Insert(0, "--Select a Project--"); 
    } 
```

这是 EF 数据源的图像： ![在此处输入图像描述](../Images/56ac39a594027dd0582a57969ecf9da3.png)

这是 DropDownBox 属性的图像...[ID 是一个整数，ProjectNbr 是一个字符串]....： ![在此处输入图像描述](../Images/d0358e0ac95143ba1c804824d015fbb2.png)

而且，由于这很难阅读，这里有一个特写： ![在此处输入图像描述](../Images/9daf891e2a7deb3be3196134d1ce9a14.png)

但这不适用于二元素下拉框。谁能帮我一把？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:14:45.507

使用 ListControl.AppendDataBoundItems 属性并将其设置为 true：

[AppendDataBoundItems 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)

来自文档：“AppendDataBoundItems 属性允许您在数据绑定发生之前将项目添加到 ListControl 对象。数据绑定后，项目集合包含来自数据源的项目和先前添加的项目。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:30:06.763

尝试这个

```
protected void ProjectDropDown_DataBound(object sender, EventArgs e)
{ 
    DropDownList list = sender as DropDownList; 
    if (list != null) 
        list.Items.Insert(0, new ListItem("--Select a Project--","")); 
} 
```

# cocoa - 可可 - 将 NSTextfield 添加到 NSRect

> ID：13052078
> 
> 赞同：0
> 
> 时间：2012-10-24T15:09:29.013
> 
> 标签：cocoa, nstextfield, nsrect

我很困惑为什么下面的代码不起作用，我想要实现的是在 NSRect 中有一个 NSTextfield 但我不确定它是否可能，如果它是如何做到的，我尝试了下面的代码，但它不工作......

```
NSRect city_label = NSMakeRect(20, 20, 7, 7);

NSTextField *label = [[NSTextField alloc] initWithFrame:city_label];

label.stringValue = @"Contents of NSTextfield"; 
```

NSRect 在 NSView 中绘制

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:19:46.300

NSRect 不是那种可以“绘制在`NSView`”中的实体——它不是`NSView`. NSRect 只是`C struct`描述大小（宽度和高度）和原点（x 和 y）。

在用它的框架初始化你之后`NSTextField`（请记住，这里的原点是相对于你将作为子视图添加文本字段的视图），你必须将它添加到你想要作为其父视图的视图中。假设我们在 NSViewController 的自定义子类中，您的代码只需要这一行

```
[self.view addSubview:label]; 
```

# database - Splunk 和其他数据库解决方案

> ID：13052081
> 
> 赞同：0
> 
> 时间：2012-10-24T15:09:34.753
> 
> 标签：database, hadoop, bigdata, splunk

我需要编写一个存储大量结构化和非结构化数据的系统。我的查询将查找文本以及二进制信息。

我正在寻找适合这些要求的解决方案。我遇到了 Splunk，它似乎非常用户友好并且提供了一个不错的 API。但是，它似乎非常面向日志，并且似乎只支持文本搜索（无二进制）。我的数据不是日志，它只是我需要搜索的大量原始文本/二进制数据......

所以我的问题是：

1.  Splunk 可以很好地解决我的问题吗？有没有办法进行二进制搜索？
2.  也许有更好的解决方案？也许是 Hadoop（我又读了一点，我不确定这是否是我正在寻找的）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:09:13.073

Splunk 将支持各种非结构化、半结构化和结构化机器数据，日志只是机器数据的其中一个示例。其他可能是系统日志提要、JMX/SNMP 指标、操作系统命令的输出、呼叫详细记录、点击流指标、专有管理/监控界面的输出、社交媒体提要等。列表非常庞大。

就二进制数据而言，您需要首先将其推出并将其解码为文本，许多人实际上都在这样做，即：捕获网络的二进制数据，例如专有协议，并对其进行解码。

另外 , 请注意 , Splunk 不使用数据库 , 它收集数据并将其索引为磁盘上的简单压缩文件格式。 然后它的架构允许它向外扩展以允许大规模收集和搜索所有这些数据.

# sqlite - 无法使用 SplitViewNavigator 容器

> ID：13052083
> 
> 赞同：0
> 
> 时间：2012-10-24T15:09:43.887
> 
> 标签：sqlite, actionscript-3, apache-flex, flex4.6

我想使用 SplitViewNavigator 容器制作一个应用程序，其中包含左视图中的城市列表和右视图中有关城市的详细信息，在右视图中有一个文本输入，通过我获取城市名称并存储在 SQLite 数据库中，以及该名称应该从 SQLite 数据库添加到左侧视图中的列表我开始使用 Main.mxml 中的流动代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
                        xmlns:s="library://ns.adobe.com/flex/spark" 
                        applicationDPI="160"
                        initialize="application1_initializeHandler(event)">
<fx:Script>
    <![CDATA[
        import model.DataModel;

        import mx.events.FlexEvent;
        import valueobject.CityValueObject;
        import utillities.CityUtils;

        public var sqlConnection:SQLConnection;
        protected var statement:SQLStatement;
        protected function application1_initializeHandler(event:FlexEvent):void
        {
            sqlConnection = new SQLConnection();
            sqlConnection.open(File.applicationStorageDirectory.resolvePath("cityDB.db"), SQLMode.CREATE);
            statement.sqlConnection = sqlConnection; // Here error occurs saying that Error #1009: Cannot access a property or method of a null object reference.
            statement.text = "CREATE TABLE IF NOT EXISTS CITYNAME (" +
                "id INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "nameofcity TEXT)";
            statement.execute();
            DataModel.getInstance().connection = sqlConnection;

            CityUtils.getAllCities();
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:SplitViewNavigator id="svn" width="100%" height="100%">
    <s:ViewNavigator width="30%" height="100%" id="list_of_cities" firstView="views.ListOfCities"/>
    <s:ViewNavigator width="70%" height="100%" id="display_contents" firstView="views.DisplayContents"/>
</s:SplitViewNavigator> 
```

我的 model.DataModel 是一个动作脚本类：

```
 package model
    {
    import flash.data.SQLConnection;

    import mx.collections.ArrayCollection;

    [Bindable]
    public class DataModel
    {
        public var connection:SQLConnection;
        public var cityList:ArrayCollection = new ArrayCollection();
        public var logs:String="Application Logs........\n";

        public static var _instance:DataModel;

        public function DataModel()
        {

        }

        public static function getInstance():DataModel
        {
            if(_instance == null)
            {
                _instance = new DataModel();
            }
            return _instance;
        }
    }
} 
```

我的 valueobject.CityValueObject 类是：

```
package valueobject
{
[Bindable]
public class CityValueObject
{
    public var id:uint;
    public var nameofcity:String;
}} 
```

我的 uttillities.CityUtils 类是 ::

```
package utillities
{
import flash.data.SQLResult;
import flash.data.SQLStatement;
import flash.display.Loader;
import flash.display.LoaderInfo;
import flash.events.Event;
import flash.net.URLRequest;
import flash.utils.ByteArray;

import model.DataModel;

import mx.collections.Sort;
import mx.collections.SortField;

import valueobject.CityValueObject;

public class CityUtils
{
    public static function getAllCities():void
    {
        var contactListStatement:SQLStatement = new SQLStatement();
        contactListStatement.sqlConnection = DataModel.getInstance().connection;
        contactListStatement.text = "SELECT * FROM CITYNAME";
        contactListStatement.execute();
        var result:SQLResult = contactListStatement.getResult();
        if( result.data!=null)
        {
            DataModel.getInstance().cityList.removeAll();

            for(var count:uint=0;count<result.data.length;count++)
            {
                var cityVO:CityValueObject = new CityValueObject();
                cityVO.id = result.data[count].id;
                cityVO.nameofcity = result.data[count].city;                    
                DataModel.getInstance().cityList.addItem(cityVO);
            }
        }
        sortData();     
    }

    public static function sortData():void
    {
        var dataSortField:SortField = new SortField();
        dataSortField.name = "cityName";
        dataSortField.numeric = false;

        /* Create the Sort object and add the SortField object created earlier to the array of fields to sort on. */
        var numericDataSort:Sort = new Sort();
        numericDataSort.fields = [dataSortField];

        /* Set the ArrayCollection object's sort property to our custom sort, and refresh the ArrayCollection. */
        DataModel.getInstance().cityList.sort = numericDataSort;
        DataModel.getInstance().cityList.refresh();
    }

    public static function updateLog(newLog:String):void
    {
        DataModel.getInstance().logs += new Date().time+" :-> "+newLog+"\n";
    }
} 
```

}

我左边的城市列表是：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="Cities"
    >
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import model.DataModel;

        import mx.collections.ArrayCollection;
        import mx.events.FlexEvent;
        import mx.events.IndexChangedEvent;

        import spark.components.SplitViewNavigator;
        import spark.components.ViewNavigator;
        import spark.transitions.ViewTransitionBase;
        protected function myList_changeHandler():void {
            // Create a reference to the SplitViewNavigator.
            var splitNavigator:SplitViewNavigator = navigator.parentNavigator as SplitViewNavigator;

            // Create a reference to the ViewNavigator for the Detail frame.
            var detailNavigator:ViewNavigator = splitNavigator.getViewNavigatorAt(1) as ViewNavigator;

            detailNavigator.transitionsEnabled = false;

            // Change the view of the Detail frame based on the selected List item.
            detailNavigator.pushView(DisplayContents, list_of_cities.selectedItem);             
        }           
    ]]>
</fx:Script>
<s:VGroup width="100%" height="100%">
    <s:List id="list_of_cities" height="100%" width="100%" change="myList_changeHandler();" 
            dataProvider="{DataModel.getInstance().cityList}" labelField="nameofcity">

    </s:List>       
</s:VGroup> 
```

最后我关于城市的显示详细信息是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="Detail About City"
    >
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->

</fx:Declarations>
<s:actionContent>
    <s:CalloutButton id="add_call_out_button" label="Add City" verticalPosition="after" 
                     icon="@Embed('assets/add.png')" calloutDestructionPolicy="never">
        <!-- layout the callout content here -->
        <s:calloutLayout>
            <s:VerticalLayout paddingTop="10" paddingBottom="10" paddingLeft="10" paddingRight="10" horizontalAlign="center" gap="5"/>
        </s:calloutLayout>
        <s:calloutContent>              
            <s:TextInput id="city_name_input" prompt="Enter City Name" text="Sydney"/>
            <s:HGroup gap="40">
                <s:Button id="add_city_name" label="Add City" width="150" height="40" click="add_city_name_clickHandler()"/>
                <s:CheckBox id="preferred_cbox" label="Preferred" height="40" />
            </s:HGroup>

        </s:calloutContent>
    </s:CalloutButton>
    <s:Button id="remove_city_name" label="Remove" width="120" height="40"
              click="remove_city_name_clickHandler()" icon="@Embed('assets/delete.png')"/>

</s:actionContent>

<s:Label id="nameSomeThing" text="{data.Description}"/>

<fx:Script>
    <![CDATA[
        import model.DataModel;

        import spark.components.SplitViewNavigator;
        import spark.components.ViewNavigator; 

        protected function add_city_name_clickHandler():void
        {
            var sqlStatement:SQLStatement = new SQLStatement();
            sqlStatement.sqlConnection = DataModel.getInstance().connection;
            sqlStatement.text = "INSERT INTO CITYNAME (nameofcity)" +
                                "VALUES(:nameofcity)";
            sqlStatement.parameters[":nameofcity"] = city_name_input.text;
            sqlStatement.execute();

            var splitNavigator:SplitViewNavigator = navigator.parentNavigator as SplitViewNavigator;

            // Create a reference to the ViewNavigator for the Detail frame.
            var detailNavigator:ViewNavigator = splitNavigator.getViewNavigatorAt(1) as ViewNavigator;

            detailNavigator.transitionsEnabled = false;

            // Change the view of the Detail frame based on the selected List item.
            detailNavigator.popToFirstView();
        }

        protected function remove_city_name_clickHandler():void
        {
            // TODO Auto-generated method stub

        }

    ]]>
</fx:Script> 
```

上面的视图（显示详细信息）仍在开发中，但在这个阶段我试图通过从城市名称输入文本输入中获取名称来将城市名称添加到城市列表中，但在：

```
statement.sqlConnection = sqlConnection; // Here error occurs saying that Error #1009: Cannot access a property or method of a null object reference. 
```

我得到那个错误并且无法继续。

任何人都可以通过我上面的代码给我解决这个问题的方法，或者通过这个应用程序建议我另一种方法来满足我的需求提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:12:47.453

正如错误消息所说，`statement`为空。

我没有看到任何可以初始化它的代码。你需要：

```
statement = new SQLStament(); 
```

（而且我看不出为什么这个变量需要在`application1_initializeHandler`函数之外。）

# php - CodeIgniter - 在 Helper 中访问数据库

> ID：13052085
> 
> 赞同：1
> 
> 时间：2012-10-24T15:09:55.737
> 
> 标签：php, codeigniter

我的视图中有这段代码。

```
$country = array(
    'id' => 'country',
    'name' => 'country',
    'value' => get_user_info('country'),
    'size' => 30
);

<tr>
            <td><?php echo form_label('Country', $country['id']); ?></td>
            <td><?php echo form_input($country); ?></td>
            <td style="color: red;"><?php echo form_error($country['name']); ?><?php echo isset($errors[$country['name']])?$errors[$country['name']]:''; ?></td>
    </tr> 
```

get_user_info() 是我的 form_helper 中定义的一个函数，如下所示：
**Form_Helper.php**

```
if(! function_exists('get_user_info')){

        function get_user_info($field)
        {
            $ci = & get_instance();
            $ci->load->model('users');
            return $ci->users->get_user_profile($field);
        }
} 
```

如您所见，在此函数中，我通过 users 模型访问数据库。用户模型

```
function get_user_profile($field)
        {
            $user_id = $this->session->userdata('user_id');

            $this->db->select($field);
            $this->db->where('user_id',$user_id);

            $query = $this->db->get($this->profile_table_name);
            if($query->num_rows()==1)return $query->row();

            return NULL;
        } 
```

这个想法是在页面加载时自动填写表单的 Country 字段。
但是在视图中我收到了这个错误

```
A PHP Error was encountered

Severity: Warning

Message: htmlspecialchars() expects parameter 1 to be string, object given

Filename: helpers/form_helper.php

Line Number: 646 
```

可能是什么问题？
有人可以知道发生了什么吗？或者过去有人做过这样的事情吗？
在辅助函数中访问模型是否正确？

谢谢

**编辑**
为了做得更好更快，我只需从控制器调用模型，然后将不同的值传递给视图。
*控制器*

```
$d = $this->users->get_user_profile('country, telephone, city, street, address, town');
        $d2 = Array(
            'telephone' => $d->telephone,
            'country' => $d->country,
            'city' => $d->city,
            'street' => $d->street,
            'address' =>$d->address,
            'town' => $d->town);
        $this->template->write_view('contentw','dashboard/profile', $d2);
        $this->template->render(); 
```

所以我删除了我添加到我的 Helper 文件中的函数。

这种方法对我有用。
谢谢大家的答案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T15:29:16.297

通常，助手被用作全局函数来做一些简单的工作。大多数人会说在助手中间调用模型是错误的。助手应该像 PHP 函数一样使用`explode`；它有一个任务，接收输入，并非常机械地根据输入提供输出。

控制器访问模型并获取该值，然后将其传递到视图并直接使用它可能会更好

至于错误：

您可能会收到该错误，因为您返回`$query->row()`的是该字段中的实际值而不是实际值。 `$query->row()`很可能是一个对象并且`$query->row()->country`是实际值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:50:18.673

据我所知，助手并没有被其他 CI 所吸引。我确信有*一些*方法可以让它们像那样工作，但也许只创建一个库会更有效率？

如果你创建了一个库，你可以通过 CI 访问所有很棒的东西，`&=get_instance();`这并没有太大的不同。您可以创建一个用户库并像这样调用它：

```
$this->load->library('users');

$this->users->get_user_info('country'); 
```

# vb.net - 将 xls 文件转换为 csv，但添加了额外的行？

> ID：13052091
> 
> 赞同：1
> 
> 时间：2012-10-24T15:10:16.533
> 
> 标签：vb.net, excel, csv

所以，我正在尝试将一些 xls 文件转换为 csv，一切都很好，除了一部分。Excel 互操作中的 SaveAs 函数似乎导出了所有行（包括空白行）。当我使用记事本查看文件时，我可以看到这些行。（我期望的所有行，15 行带有两个单引号，然后其余的只是空白）。然后我有一个存储过程，将这个 csv 导入所需的表（这适用于手动转换为 csv 的电子表格（例如打开、文件->另存为等）

这是我在代码中用于 SaveAs 的代码行。我尝试过 xlCSV、xlCSVWindows 和 xlCSVDOS 作为我的文件格式，但它们都做同样的事情。

```
wb.SaveAs(aFiles(i).Replace(".xls", "B.csv"), Excel.XlFileFormat.xlCSVMSDOS, , , , False) 'saves a copy of the spreadsheet as a csv 
```

那么，是否有一些额外的步骤/设置我需要做才能不让 extraneuos 行显示在 csv 中？

请注意，如果我打开这个新创建的 csv，然后单击另存为，然后选择 csv，我的程序会再次喜欢它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:29:20.257

当您从工作簿创建 CSV 时，将根据您的 UsedRange 生成 CSV。由于可以简单地通过将格式应用于单元格（没有任何内容）来扩展 UsedRange，这就是您得到空白行的原因。（由于这个问题，您也可以得到空白列。）

当您打开生成的 CSV 时，由于没有内容或格式，所有这些无内容单元格不再对 UsedRange 有贡献（因为只有值保存在 CSV 中）。

您可以通过在保存之前更新您使用的范围来纠正此问题。这是我在 VBA 中编写的一个简短的子程序，可以解决问题。此代码会使您丢失所有格式，但我认为这并不重要，因为您无论如何都要保存到 CSV。我将把转换为 VB.Net 留给你。

```
Sub CorrectUsedRange()
    Dim values
    Dim usedRangeAddress As String
    Dim r As Range
    'Get UsedRange Address prior to deleting Range
    usedRangeAddress = ActiveSheet.UsedRange.Address
    'Store values of cells to array.
    values = ActiveSheet.UsedRange
    'Delete all cells in the sheet
    ActiveSheet.Cells.Delete
    'Restore values to their initial locations
    Range(usedRangeAddress) = values
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:29:29.290

使用 VBA 和 Excel2007 测试了您的代码 - 效果很好。

但是，我可以通过将数据单元格下方的空单元格格式化为粗体来复制它。然后我会在 csv 中得到空的单引号。但是，当我使用 SaveAs 时，情况也是如此。

所以，我的建议是清除所有非数据单元格，然后保存您的文件。这样你至少可以排除这个错误点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T01:11:10.723

恐怕这还不够。似乎存在一个 Excel 错误，即使删除非数据单元格也不足以防止它们在保存为 csv 时被写为空单元格。

[http://answers.microsoft.com/en-us/office/forum/office_2010-excel/excel-bug-save-as-csv-saves-previously-deleted/2da9a8b4-50c2-49fd-a998-6b342694681e](http://answers.microsoft.com/en-us/office/forum/office_2010-excel/excel-bug-save-as-csv-saves-previously-deleted/2da9a8b4-50c2-49fd-a998-6b342694681e)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-24T15:23:42.413

另一种方式，没有脚本。点击 Ctrl+End 。如果这在您的真实数据之后出现在一行中，则从第一个行中选择行，直到至少该行结束，右键单击并“清除内容”。

# c# - 在 ASP.NET 2.0 和 C# 中执行这段代码时出现超时连接错误

> ID：13052092
> 
> 赞同：0
> 
> 时间：2012-10-24T15:10:19.120
> 
> 标签：c#, sql-server-2005, asp.net-2.0

我正在使用下面的代码从 SQL Server 2005 中创建的数据库中获取页面图块和元描述。我的网站是用 ASP.NET 2.0 和 C# 构建的。

在`page_load`我执行此代码时：

```
string query = "select MetaDescription, MetaKeywords, H1Text, Ptitle, H2Text FROM SeoText Where CatalogItemId ='" + this.CurrentEnsemble.ItemId + "'";

SqlConnection myconnection = new SqlConnection(ConfigurationManager.ConnectionStrings["DBconnection"].ConnectionString);

SqlCommand SqlCmd = null;
SqlCmd = new SqlCommand(query, myconnection);

SqlDataAdapter ad = new SqlDataAdapter(SqlCmd);

DataTable dt = new DataTable();
ad.Fill(dt);

if (dt.Rows[0]["Ptitle"].ToString() == "")
{
   this.Page.Title = this.CurrentEnsemble.Title;
}
else
{
   this.Page.Title = this.CurrentEnsemble.Title + " " + dt.Rows[0]["Ptitle"].ToString();
}

HtmlMeta metaDesc = (HtmlMeta)Page.Header.FindControl("metaDesc");

if (dt.Rows[0]["MetaDescription"].ToString() == "")
{
   metaDesc.Attributes.Add("Content", this.CurrentEnsemble.Title );
}
else
{
   metaDesc.Attributes.Add("Content", dt.Rows[0]["MetaDescription"].ToString());
}

HtmlMeta metaKey = (HtmlMeta)Page.Header.FindControl("metaKey");

if (dt.Rows[0]["MetaKeywords"].ToString() == "")
{
   metaKey.Attributes.Add("Content", "site general text");
}
else
{
   metaKey.Attributes.Add("Content", dt.Rows[0]["MetaKeywords"].ToString());
}

HtmlGenericControl h1 = (HtmlGenericControl)Master.Master.Master.FindControl("h1top");

if (dt.Rows[0]["H1Text"].ToString() == "")
{
    h1.InnerText = "site general text";
}
else
{
    h1.InnerText = this.CurrentEnsemble.Title + " " + dt.Rows[0]["H1Text"].ToString();
}

HtmlGenericControl h2 = (HtmlGenericControl)Master.Master.Master.FindControl("h2bottom");

if (dt.Rows[0]["H2Text"].ToString() == "")
{
    h2.InnerText = "site general text";
}
else
{
    h2.InnerText = this.CurrentEnsemble.Title + " " + dt.Rows[0]["H2Text"].ToString();
} 
```

错误被抛出

```
ad.Fill(dt) 
```

我不确定我在哪里犯了错误。

感谢并感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:26:55.840

尝试将**with (nolock)** 语句添加到您的语句中。类似的问题：[SqlDataAdapter.Fill() Timeout - Underlying Sproc Returns Quickly](https://stackoverflow.com/questions/769128/sqldataadapter-fill-timeout-underlying-sproc-returns-quickly)

# c# - 在 XAML 中从 DependecyProperty 绑定到 DataContext (ViewModel)

> ID：13052100
> 
> 赞同：4
> 
> 时间：2012-10-24T15:10:39.700
> 
> 标签：c#, wpf, mvvm, binding, dependency-properties

假设这种情况：
我用 DependencyProperty“SuperValue”创建了一个新控件（“MyControl”）。
现在，在 XAML 中，我将“SuperValue”设置为“TestValue”：

```
<local:MyControl SuperValue="TestValue" /> 
```

这个控件有一个 ViewModel (DataContext)。
我想将 DependencyProperty 的值（在本例中为“TestValue”）传递给 ViewModel 中的属性。

我怎样才能做到这一点？

假设我的控件的 ViewModel 做了一些计算，例如：用户输入国家名称，控件给他一个当前存在的时间。

问题是：如何提供计算结果？假设这是 ViewModel 中的公共属性“Results”。我想创建一个像“TextBox.Text”、“ListView.SelectedItem”这样的属性，它向“外部”提供一部分 ViewModel 数据。

例如 TextBox 和 Text 属性：

```
<TextBox Text={Binding GiveMeTextValue} /> 
```

在这种情况下，DP“文本”提供给当前存储输入文本的 ViewModel 属性之外。

我想以同样的方式使用我的控件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:44:26.237

我不知道我的问题是否正确：您想将 XAML 中的静态非绑定值设置为控件的 DependencyProperty 并将控件的 DataContext 上的属性设置为该静态值？如果您需要这样做，您的概念有问题，为什么不在相应字段中的 ViewModel 上提供此值并将控件的 DP 绑定到该字段？

但是，您可以做什么得到您想要的：

注册 DP 时定义一个*PropertyChangedCallback ：*

```
// Dependency Property
public static readonly DependencyProperty TestProperty =
DependencyProperty.Register("Test", typeof(string),
typeof(MyControl), new FrameworkPropertyMetadata("123", new PropertyChangedCallback(OnTestChanged))); 
```

在 OnTestChanged 方法中，将 DataContext 转换为 ViewModel 的类型，并将 ViewModel 上的相应值设置为新值：

```
private static void OnTestChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            MyControl c = d as MyControl;
            ViewModelType vm = c.DataContext as ViewModelType;
            vm.Property = e.New;
            Console.WriteLine(e.NewValue);
        } 
```

这是你要求的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:13:58.003

如何设置`MyDependencyProperty`from `setter`of 属性`SomethingValueInDataContext`。

**编辑**

您可以在使用控件`DependencyProperty`的位置而不是在其声明中设置控件。这将起作用（本地是控制所在的命名空间） -

```
<Grid>
   <local:MyOwnControl MyDependencyProperty="{Binding Test}"/>
</Grid> 
```

就像您在 xaml 中创建实例时可以设置的`Width`一样-`TextBox`

```
<TextBox Width="{Binding PropertyName}"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:47:08.397

由于您使用的是 MVVM 设计范例，因此所有数据都应与 ViewModel 相关。所以你的 DP 应该通过你的 VM 属性中的绑定来设置。

如果要在 Blend/VS 设计器中使用测试数据，您可以检查它与调试/发布...然后根据该检查对您的属性进行某种分配以进行测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T17:38:06.390

您可以添加一个属性来`MyControl`调用`InitialSuperValue`，当设置时，设置的值`SuperValue`。然后像这样编写一些 XAML：

```
<local:MyControl InitialSuperValue="TestValue" SuperValue="{Binding SuperValueInViewModel, Mode=OneWayToSource}" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T16:37:11.563

请注意，您的 xaml 的根是`UserControl`and *not* `MyOwnControl`。UserControl 是 MyOwnControl 的**基类**；您的属性未在基类中定义。这就是为什么您不能`MyDependencyProperty`从`UserControl`.

使用您的示例，您可以切换绑定并获得所需的效果。

```
<UserControl 
    x:Class="namespace.MyOwnControl"
    x:Name="root">
    <UserControl.DataContext>
         <local:ControlViewModel  
             Test={Binding MyDependencyProperty, ElementName=root}" />
    </UserControl.DataContext>
</UserControl> 
```

# android - 将 Eclipse 调试器附加到重新启动的应用程序

> ID：13052101
> 
> 赞同：9
> 
> 时间：2012-10-24T15:10:41.570
> 
> 标签：android, adt, ddms, eclipse-adt

我正在测试我的 android 应用程序的 onsave/onrestore 方法。

为此，我给我的设备打电话，看到它终止了进程，然后我挂断了电话。:) 我看到它重新启动了应用程序。

问题是：如何让它在调试模式下重新启动，以便我可以逐步完成恢复过程？有没有办法让它在启动时自动附加到调试器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-29T03:41:31.833

采用`android.os.Debug.waitForDebugger();`

基本上，从调试开始。退出您的应用程序。设置一些断点。回到你的应用程序（确保这条线被点击，所以把它放在你的 onCreate 或其他地方），它会重新连接到正在运行的调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:20:24.840

我认为没有办法确保应用程序在调试模式下重新启动。但是，如果您正在调试自己的应用程序并且不介意添加调试代码进行测试，您可能需要在启动方法的适当位置添加 Thread.sleep(5000) 或类似的东西。这应该让您有足够的时间通过 DDMS 重新连接调试器。当然，完成后删除；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T15:58:33.627

在 Android 设置 > 开发者选项 > 调试 > 选择要调试的应用中有一个配置选项。它的作用是每次打开某个应用程序时调用 eclipse 调试器，如果它连接到 adb 并且应用程序的项目已打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T21:35:04.887

**以编程方式：**使用`waitForDebugger()`. [文档在这里。](http://developer.android.com/reference/android/os/Debug.html#waitForDebugger%28%29)

请注意，该方法*会在调试器附加后立即*返回，因此最佳做法是在该调用之后立即放置断点。此外，您可以使用`isDebuggerConnected()`.

**在 Eclipse 中：**打开 Eclipse 的 DDMS 透视图，在您的设备上选择刚刚重新启动的应用程序，然后选择调试选项。这会将调试器附加到重新启动的实例。

**在设备上：在***某些**手机下有一个配置选项，允许您在配置 USB 调试时选择要调试的应用程序。它位于设备设置中的开发人员选项下。这将自动附加调试器。

*例如，我的 Galaxy S4 有它，我的 HTC Rezound 没有。我相信这可能是果冻豆特定的选择。

# sql-server - 加入非 PK 字段，varchar 数据类型的长度是否决定查询速度？SQL Server 2008

> ID：13052103
> 
> 赞同：1
> 
> 时间：2012-10-24T15:10:59.463
> 
> 标签：sql-server, database, indexing

我得到了一大堆杂乱无章的数据来分析，现在我陷入了困境。我有一个 ~200 万行表，其非唯一标识符为 datatype `varchar(50)`。此标识符对 a 是唯一的`personID`。在我弄清楚我需要如何规范化这个垃圾之前，我现在有另一个问题可能对我有帮助：如果我将数据类型更改`varchar(25)`为例如，这将有助于查询在非连接时运行得更快PK场？字符串中的所有字符都是整数，但尝试将它们转换为 int 会导致溢出。或者我可以暂时以某种方式索引该列以使某些查询运行得更快吗？

编辑：这`personID`将是另一个表的外键，其中包含一个人的人口统计信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:24:16.613

从技术上讲，varchar 的长度指定了它的最大长度。

实际长度是可变的（因此是名称），因此较低的最大值不会改变评估，因为它将在实际字符串上进行。

了解更多信息 ：

[检查此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms176089.aspx) 和此 [Stack overflow 帖子](https://stackoverflow.com/a/59686/971693)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:23:23.953

`Varchar(50)`to`varchar(25)`肯定会减少该表中记录的大小，从而减少包含该表的数据库页数，提高查询的性能（可能在一定程度上），但是这样的 ALTER TABLE 语句可能需要很长时间。

或者，如果您在连接列上定义索引，并且如果您的检索列表很小，您也可以在索引定义中包含这些列（[覆盖索引](http://en.wikipedia.org/wiki/Database_index#Covering_index)），这也会显着降低查询执行时间。

# jquery - 对 WebFlow 的 Ajax 调用

> ID：13052106
> 
> 赞同：3
> 
> 时间：2012-10-24T15:11:03.643
> 
> 标签：jquery, ajax, spring-webflow, thymeleaf

我正在尝试对我的 webflow 进行 Ajax 调用，并且只想为每个视图状态刷新页面的内容部分。

```
 function proposedInsured(){

("#myForm").submit(function() { 
   $.ajax({
      type: "POST",
      data: $("#myForm").serialize(),
      url: $("#myForm").attr("action") + "&_eventId=nextpage&ajaxSource=print_message",
      success: function(response) {
         alert("success" + response);
         $('#content').html(response);
      },
      error: function(response) {
      alert("error" + response); 
      }  
  });
  return false;
});
} 
```

流.xml

```
<view-state id="firstPage" view="firstPage" >
   <transition on="nextpage" to="proposedInsured"/> 
</view-state> 
<view-state id="proposedInsured" model="policyBean" view="proposedInsured">
   <binder>
     <binding property="name" />
   </binder>  
   <on-entry>
     <evaluate expression="pocContent.getContent('proposedInsured',productId)" result="flowScope.content"/>
          <render fragments="content"/>
   </on-entry>
   <transition on="nextpage" to="address" />
 </view-state>
 <subflow-state id="address" subflow="address">
    <transition on="saveAddress" to="nextpage">
    <evaluate expression="policyBean.setAddressDetail(currentEvent.attributes.addressDetail)"/>         
    </transition>
</subflow-state>` 
```

在首页上的 NextPage 提交按钮的单击事件中，我触发了我的 ajax 脚本，该脚本调用了我的 webFlow。

firstPage（使用 Thymeleaf2.0.12 作为视图部分）

```
 <!DOCTYPE html>
 <html xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org">
 <body>
  <div id="content" tiles:fragment="content">
   <form id="myForm" method="post" th:action="${flowExecutionUrl}">
     <input id="print_message" type="button" value="NextPage" name="_eventId_nextPage" onclick="proposedInsured();"/>
   </form>
  </div>
 </body>
</html> 
```

建议保险.html

```
 <html xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org">
  <body>
   <div id="content" tiles:fragment="content">
    <form id="myForm" name="myForm" method="POST">
      ...
    </form>
   </div>
  </body>
  </html> 
```

模板.html

```
<div id="page-container">
<div id="header" th:fragment="header">
...
</div>
<div id="content" th:fragment="content">
    ....
</div>
</div> 
```

问题：获取整个页面（标题和内容）以响应我的 Ajax 调用。根据我的理解
`<render fragment="content">`，应该从整个页面中提取内容片段并将其传递给客户端。并没有真正理解它的含义。我该怎么处理这个？

我观察到的第二件事是它对 flow 进行了 2 次调用，一个是 Post 失败，另一个是 Get 返回响应。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:16:22.093

尝试添加`&fragment=content`到您的 ajax 调用中的 URL。可能会解决您的第一个问题。

您还可以发布您的“地址”流程的代码吗？

[编辑] 尝试为您使用 Spring.remoting.submitForm ajax：

```
<input type="submit" value="NextPage" name="_eventId_nextPage" id="submitMyForm" onclick="Spring.remoting.submitForm('submitMyForm', 'myForm', {fragments:'content'}); return false;"/> 
```

或 AjaxEventDecoration：

```
<script type="text/javascript">
    Spring.addDecoration(new Spring.AjaxEventDecoration({
        elementId: "submitMyForm",
        event: "onclick",
        formId: "myForm",
        params: {fragments: "content"}
    }));
</script> 
```

看看这是否有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:34:06.270

将 Thymeleaf 与 Tiles 一起使用以使其正常工作。它不适用于 normal `th:fragment`。

要进行 ajax 调用，我们可以使用相关定义的 jquery 脚本（ajaxcall.js）或以这种方式使用 spring JS：

```
 Spring.addDecoration(new Spring.AjaxEventDecoration({
    elementId: "print_message",
    event: "onclick",
    formId:"myForm",
    })); 
```

瓷砖-def.xml

```
<tiles-definitions>
<definition name="base.definition"
    template="template">
    <put-attribute name="header" value="header :: header" />
    <put-attribute name="content" value="" />
    <put-attribute name="footer" value="footer :: footer" />
</definition> 

<definition name="firstPage" extends="base.definition">
    <put-attribute name="content" value="firstPage :: content" />
</definition>

<definition name="proposedInsured" extends="base.definition">
    <put-attribute name="content" value="proposedInsured :: content" />
</definition>

</tiles-definitions> 
```

template.html（使用瓷砖）

```
<html xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
 <title>Insert title here</title>
 <script type="text/javascript" th:src="@{/resources/dojo/dojo.js}"></script>
 <script type="text/javascript" th:src="@{/resources/spring/Spring.js}"></script>
 <script type="text/javascript" th:src="@{/resources/spring/Spring-Dojo.js}"> </script>
 <script type="text/javascript" th:src="@{/scripts/jquery-1.8.2.js}"></script>
 <script type="text/javascript" th:src="@{/scripts/ajaxcall.js}"></script> 
 <!-- <script type="text/javascript">
  Spring.addDecoration(new Spring.AjaxEventDecoration({
  elementId: "print_message",
  event: "onclick",
  formId:"myForm",
  }));
  </script>-->
 </head>
 <body>
 <table border="1">
  <tr>
     <td height="30" colspan="2">
       <div tiles:substituteby="header"></div>
     </td>
  </tr>
  <tr>
     <td width="350">
       <div tiles:substituteby="content"></div>
     </td>
  </tr>
  <tr>
     <td height="30" colspan="2">       
      <div tiles:substituteby="footer"></div>
     </td>
   </tr>
   </table>
   </body>
   </html> 
```

# eclipse - 我可以从 EPIC 语法检查器中排除文件夹吗？

> ID：13052110
> 
> 赞同：1
> 
> 时间：2012-10-24T15:11:15.643
> 
> 标签：eclipse, perl, epic

使用 Eclipse (Indigo r2) + EPIC (0.5.46)，我想从语法检查器中排除特定的文件/文件夹。这可能吗？

尝试在项目中执行任何脚本时，系统会提示我：

```
Errors in Workspace
Errors exist in required project(s):
...
Proceed with launch? 
```

该警告是良性的，不需要在启动前解决。

# c# - Roslyn：工作区在控制台应用程序中加载，但不在 msbuild 任务中

> ID：13052115
> 
> 赞同：6
> 
> 时间：2012-10-24T15:11:34.877
> 
> 标签：c#, windows, roslyn

我有一个使用此命令的自定义 msbuild 任务：

```
var workspace = Workspace.LoadStandAloneProject(csprojPath); 
```

当我运行它时，它会引发以下错误：

```
  System.InvalidCastException 未被用户代码处理
  消息=无法将透明代理转换为类型“Roslyn.Utilities.SerializableDataStorage”。
  来源=Roslyn.Services
  堆栈跟踪：
       在 Roslyn.Utilities.RemoteServices.CreateInstance[T]()
       在 Roslyn.Services.Host.TemporaryStorageServiceFactory.CreateService(IWorkspaceServiceProvider workspaceServices)
       在 Roslyn.Services.Host.WorkspaceServiceProviderFactory.Provider.c__DisplayClass7.b__4()
       在 Roslyn.Utilities.NonReentrantLazy`1.get_Value()
       在 Roslyn.Services.Host.WorkspaceServiceProviderFactory.Provider.GetService[TWorkspaceService]()
       在 Roslyn.Services.SolutionServices..ctor（IWorkspaceServiceProvider 工作空间服务，ILanguageServiceProviderFactory 语言服务工厂）
       在 Roslyn.Services.Solution..ctor（SolutionId id，字符串文件路径，VersionStamp 版本，VersionStamp latestProjectVersion，ILanguageServiceProviderFactory languageServiceProviderFactory，IWorkspaceServiceProvider workspaceServices）
       在 Roslyn.Services.Host.SolutionFactoryServiceFactory.SolutionFactoryService.CreateSolution（SolutionId id）
       在 Roslyn.Services.Host.TrackingWorkspace.CreateNewSolution（ISolutionFactoryService solutionFactory，SolutionId id）
       在 Roslyn.Services.Host.TrackingWorkspace..ctor（IWorkspaceServiceProvider workspaceServiceProvider，布尔 enableBackgroundCompilation，布尔 enableInProgressSolutions）
       在 Roslyn.Services.Host.HostWorkspace..ctor（IWorkspaceServiceProvider workspaceServiceProvider，布尔 enableBackgroundCompilation，布尔 enableInProgressSolutions，布尔 enableFileTracking）
       在 Roslyn.Services.Host.LoadedWorkspace..ctor（ILanguageServiceProviderFactory languageServiceProviderFactory，IWorkspaceServiceProvider workspaceServiceProvider，IProjectFileService projectFileFactsService，IDictionary`2 globalProperties，布尔 enableBackgroundCompilation，布尔 enableFileTracking）
       在 Roslyn.Services.Host.LoadedWorkspace..ctor（ExportProvider exportProvider，布尔解决方案LoadOnly，布尔 enableFileTracking）
       在 Roslyn.Services.Host.LoadedWorkspace..ctor（布尔 enableFileTracking）
       在 Roslyn.Services.Host.LoadedWorkspace.LoadStandAloneProject(String projectFileName, String configuration, String platform, String language, Boolean enableFileTracking)
       在 Roslyn.Services.Workspace.LoadStandAloneProject(String projectFileName, String configuration, String platform, String language, Boolean enableFileTracking)
       ...

```

相同的代码在控制台应用程序中运行时，具有相同的项目，运行良好。

有任何想法吗？谷歌搜索没有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:16:18.237

这是 Roslyn 的示例 MsBuild 任务。

为了重建 Workspace.LoadProjectFromCommandLineArguments 方法所需的命令行，我们必须将 msbuild 文件中的一些信息传递到我们的任务中。

*   引用的程序集：@(ReferencePath) 项组。
*   要编译的 cs 文件：@(Compile) 项目组。
*   基本目录：$(MSBuildProjectDirectory) 内置属性。

这就是 Roslyn 解析源文件所需的全部内容。（请参阅本文末尾的注释。）

所以创建一个 C# 类库项目。这些是您需要的项目参考：

```
Microsoft.Build.Framework
Microsoft.Build.Utilities.v4.0
Roslyn.Compilers
Roslyn.Services 
```

自定义 MsBuild 任务的代码：

```
using Microsoft.Build.Framework;
using Microsoft.Build.Utilities;
using Roslyn.Services;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace RoslynMsBuildTask
{
    public class RoslynTask : Task
    {
        [Required]
        public ITaskItem[] ReferencePath { get; set; }

        [Required]
        public ITaskItem[] Compile { get; set; }

        [Required]
        public ITaskItem BaseDirectory { get; set; }

        public override bool Execute()
        {
            Log.LogMessage(MessageImportance.High, "RoslynTask.Execute called...\n");

            // Format the command line with the minimal info needed for Roslyn to create a workspace.
            var commandLineForProject = string.Format("/reference:{0} {1}",
                ReferencePath.Select(i => i.ItemSpec).ToSingleString(",", "\"", "\""),
                Compile.Select(i => i.ItemSpec).ToSingleString(" ", "\"", "\""));

            // Create the Roslyn workspace.
            var workspace = Workspace.LoadProjectFromCommandLineArguments("MyProject", "C#", commandLineForProject, BaseDirectory.ItemSpec);

            // Make sure that Roslyn actually parsed the project: dump the source from a syntax tree to the build log.
            Log.LogMessage(MessageImportance.High, workspace.CurrentSolution.Projects.First()
                .Documents.First(i => i.FilePath.EndsWith(".cs")).GetSyntaxRoot().GetText().ToString());

            return true;
        }
    }

    public static class IEnumerableExtension
    {
        public static string ToSingleString<T>(this IEnumerable<T> collection, string separator, string leftWrapper, string rightWrapper)
        {
            var stringBuilder = new StringBuilder();

            foreach (var item in collection)
            {
                if (stringBuilder.Length > 0)
                {
                    if (!string.IsNullOrEmpty(separator))
                        stringBuilder.Append(separator);
                }

                if (!string.IsNullOrEmpty(leftWrapper))
                    stringBuilder.Append(leftWrapper);

                stringBuilder.Append(item.ToString());

                if (!string.IsNullOrEmpty(rightWrapper))
                    stringBuilder.Append(rightWrapper);
            }

            return stringBuilder.ToString();
        }
    }
} 
```

为了证明它确实有效，请在您的 csproj 文件末尾添加以下行（就在结束 Project 标记之前）。但前提是项目已经成功构建并且它可以在输出文件夹中找到您的任务 dll。

```
 <Target Name="AfterBuild" DependsOnTargets="RoslynTask"/>
  <UsingTask AssemblyFile="$(OutputPath)\RoslynMsBuildTask.dll" TaskName="RoslynMsBuildTask.RoslynTask" />
  <Target Name="RoslynTask">
    <RoslynTask ReferencePath="@(ReferencePath)" Compile="@(Compile)" BaseDirectory="$(MSBuildProjectDirectory)" />
  </Target> 
```

它会将您的第一个 cs 文件的源转储到构建输出中。

* * *

请注意，其他 csc.exe 开关（如 ConditionalDirectives、输出类型等）也可能很重要，具体取决于您尝试执行的分析类型。您还可以使用此模式将它们传递给您的任务。有关 MsBuild 传递给 csc.exe 的属性的完整列表，请参阅 $(MSBuildToolsPath)\Microsoft.CSharp.targets 文件、CoreCompile 目标、Csc 任务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T17:11:25.503

这是 MSBuild 的限制。Roslyn 无法在构建期间递归调用 MSBuild 以确定项目属性/文件/引用。为了`IProject`在构建任务期间创建 Roslyn，请尝试改用该`LoadFromCommandLineArgs()`方法。您需要构建您的任务以采用与 CscTask 最终传递给编译器相同的参数。

希望这可以帮助！

# java - Netbeans 平台更改不会产生任何影响

> ID：13052116
> 
> 赞同：0
> 
> 时间：2012-10-24T15:11:37.320
> 
> 标签：java, build, javafx-2, javafx, platform

我有一个默认 jdk7 平台的项目，不包括 JavaFX。

现在我需要使用 javafx.scene.media 包中的一些类，所以我定义了一个新的 Java 平台，包括 JavaFX。然后我转到项目属性> 库并将平台编辑为新平台。但是，我可以，清理和建造，重建或其他任何东西，但这并不重要。尝试重新启动 Netbeans，但它无论如何都不起作用（始终找不到所需的包）。

但是，如果我用我的平台创建一个新项目，一切都会很好，并且可以找到包。我的问题：我还需要做什么来执行平台更改？（请不要让我从一开始就用我的平台构建一个全新的项目，这是一个巨大的项目，所以我试图避免这种情况）。

# gwt - Telidos 平台中的打印功能（使用 GWT）

> ID：13052119
> 
> 赞同：0
> 
> 时间：2012-10-24T15:11:43.973
> 
> 标签：gwt

我们有一个在 Telidos 平台上开发的网站，它在其中使用 GWT。但是在那个网站中，我们需要包含打印功能。当用户单击打印按钮时，应用程序应打印搜索条件和该页面的内容。我不知道如何实现它。我搜索了所有我找不到任何解决方案的地方。

如果有人有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:07:22.590

Jothi，在 GWT 中，我们在 GWT 小部件中拥有一切。它可能是一个 RootPanel。VerticalPanel、SplitPanel 等等。所以试试这个，

例如。如果要打印添加到 VerticalPanel 中的 CellTable，

```
VerticalPanel vPanel = new VerticalPanel();
vPanel.add(cellTable); 
```

然后通过打印

```
String printText = vPanel.asWidget().getElement().getInnerHTML();
printMethod(printText); 
```

并有以下方法，

```
public static native void printMethod(String html) /*-{
var frame = $doc.getElementById('printing');
if (!frame) {
$wnd.alert("Error: Can't find printing frame.");
return;
}
frame = frame.contentWindow;
var doc = frame.document;
doc.open();
doc.write(html);
doc.close();
frame.focus();
frame.print();
}-*/; 
```

其中“打印”是 iframe id。

```
<iframe id="printing" style="width:0;height:0;border:0">
</iframe> 
```

这应该添加到您的 *.ui.xml 中，用于特定的小部件，例如

```
<g:Verticalpanel><iframe id="printing" style="width:0;height:0;border:0">
</iframe></g:Verticalpanel> 
```

# c# - 如何在 MS word Keypress 上引发事件

> ID：13052123
> 
> 赞同：6
> 
> 时间：2012-10-24T15:11:50.293
> 
> 标签：c#, ms-word, vsto, office-interop

我正在开发一个 MS-Word 插件，其中我的代码必须访问用户通过键盘输入的字母。

```
private void ThisDocument_Startup(object sender, System.EventArgs e)
{
    this.SelectionChange += new SelectionEventHandler(ThisDocument_SelectionChange);
}

void ThisDocument_SelectionChange(object sender, SelectionEventArgs e)
{
    MessageBox.Show(e.Selection.Text);
} 
```

我认为 SelectionChange 事件可以给我文本，但在按键时不会引发事件，有没有办法在按键时触发事件？此外，如果有更直接的方法或提供该功能的开源项目，那将是受欢迎的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T12:49:58.527

Microsoft 本身不会公开按键事件，但有一种解决方法。

我在下面链接的文章的帮助下实现了键盘检查：

[http://www.switchonthecode.com/tutorials/winforms-accessing-mouse-and-keyboard-state](http://www.switchonthecode.com/tutorials/winforms-accessing-mouse-and-keyboard-state)

这为您提供了一个名为 IsKeyDown 的静态方法，实现和调用您可以订阅的委托应该相当简单。

# .net - 无法访问 WSH/JScript 中的 COM 数组成员

> ID：13052125
> 
> 赞同：1
> 
> 时间：2012-10-24T15:11:54.930
> 
> 标签：.net, com, wsh, jscript

我正在尝试通过 Windows 7 上的 WSH 访问由 JScript 的 COM 方法返回的数组的成员。

该方法的文档如下（作为 C# 示例给出）：

```
public System.Array GetValues(); 
```

所以根据这个，它返回一个.NET System.Array。这一切都很好，但这是我的代码：

```
// report is Scripting.FileSystemObject file handle
// var is a COM object
arr = var.GetValues();
val = ??
report.WriteLine(val); 
```

这是我尝试过的：

```
val = arr.Length      // produces empty string
val = arr.GetLength() // "Object doesn't support this property or method"
val = arr.GetValue(0) // "Object doesn't support this property or method" 
```

所以显然它不是 System.Array 对象，因为这些方法不起作用。也许它是一个 JScript Array 对象？

```
val = arr[0]          // empty string
val = arr.length      // empty string
val = arr.pop()       // "Object doesn't support this property or method" 
```

所以它也不是一个 Array 对象？我猜它可能是一个内在类型数组：

```
val = typeof(arr[0])  // "undefined"
val = typeof(arr)     // "unknown" 
```

作为最后的手段，我将它加载到 Vbsedit 并在那里放置一个断点，Vbsedit 显示一个包含 800 个值的数组！我只是不知道如何访问它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:29:24.097

像往常一样，我在发布问题后不久就找到了答案。这是将任何类型的 Array "arr" 转换为适当的 JScript 数组的解决方案：

```
arr = var.GetValues().toArray();
val = arr[0];
report.WriteLine(val); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:17:33.673

该数组很可能作为 JScript[`VBArray`](http://msdn.microsoft.com/en-us/library/y39d47w8%28VS.84%29.aspx)对象返回。这样做是因为 JScript Array 对象本质上与 COM 和 VBScript 中使用的 SAFEARRAY 结构非常不同。您可以`VBArray`通过调用以下`toArray`方法将 转换为 JScript 数组：

```
var jsArr = arr.toArray(); 
```

# installation - 将 /SECURITYMODE 设置为 SQL Server 2012 安装的混合模式

> ID：13052127
> 
> 赞同：10
> 
> 时间：2012-10-24T15:12:14.993
> 
> 标签：installation, command-line-arguments, sql-server-2012

我正在从命令行安装 SQL Server 2012，作为我正在创建的安装程序的一部分。

我想使用混合安全性（例如，允许 SQL 和 Windows 身份验证）。

通过查看[Microsoft 安装指南](http://msdn.microsoft.com/en-us/library/ms144259.aspx)，我可以看到设置`/SECURITYMODE`为`SQL`和`/SAPWD`密码，将提供 SQL 模式，并且通过不设置它们，我可以获得默认值（Windows 身份验证）。

但是如何在命令行中指定我想使用混合模式呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-25T10:09:47.010

经过测试，我发现将 /SECURITYMODE 设置为 SQL 会以混合模式安装 SQL Server；并且不设置标志设置仅 Windows 身份验证模式。没有仅 SQL 的身份验证模式。

# javascript - 选择器中的jquery字符串连接

> ID：13052131
> 
> 赞同：1
> 
> 时间：2012-10-24T15:12:46.320
> 
> 标签：javascript, jquery, html, asp.net-mvc

我想将一些字符串（id）与父ID连接起来......所以我**试过**这个-------------->

```
$(' #cate_id2 > ul > li:has(ul) ').hover(function () {
                $('#cate_id2 > ul' + this + ' > ul').stop().slideDown('fast');
            }, 
```

想要**连接** `#cate_id2 > ul`而`this`不是**附加** `> ul`......

字符串应该在执行后变为`'#cate_id2 > ul' + li:has(ul) + ' > ul'`
我的意思**`li:has(ul)`是用它的值替换......**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:15:35.863

像这样试试

```
$(' #cate_id2 > ul > li:has(ul) ').hover(function () {
    $(this).children('ul').stop().slideDown('fast');
} 
```

# c# - C#（可能）使用泛型

> ID：13052133
> 
> 赞同：2
> 
> 时间：2012-10-24T15:12:58.203
> 
> 标签：c#

我对此很陌生，所以请多多包涵。

我有一个具有三个属性的类：几个整数和一组用户定义的对象。

```
public class Response
{
    public int num1 { get; set; }
    public int num2 { get; set; }
    public Drink[] drinks{ get; set; }
} 
```

我可以使用用户定义的对象来实例化该类，并且一切正常。

```
Response response = new Response
    {
        num1= 7, num2= 2, drinks= new Drink[] 
        { new Drink{Id=1, Name="Orange"}, new Drink{Id=2, Name="Apple"}}
    }; 
```

如何将 Response 类的第三个属性设置为可以使用不同的用户定义对象（例如“Snack”）拥有该类的另一个实例的位置。

寻找一个在线资源来阅读/学习/找出比答案更多的东西，尽管我们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:18:32.537

正如亚历克斯所建议的那样，泛型是您描述的问题的解决方案。你可以像这样重新定义你的类：

```
public class Response<T>
{ 
    public int num1 { get; set; } 
    public int num2 { get; set; } 
    public T[] items{ get; set; } 
} 
```

...然后像这样声明您的实例：

```
Response<Drink> drinkResponse = new Response<Drink>
{              
    num1= 7, num2= 2, items = new Drink[] { new Drink{Id=1, Name="Orange"}, new Drink{Id=2, Name="Apple"}}  
};  

Response<Snack> snackResponse = new Response<Snack>  
{              
    num1= 7, num2= 2, items = new Snack[] { new Snack{Id=1, Name="Orange"}, new Snack{Id=2, Name="Apple"}}  
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:17:23.067

我**认为**您在这里谈论的是[继承](http://www.csharp-station.com/Tutorial/CSharp/Lesson09)，您可以在其中拥有多个共享共同结构的类：

```
public class BaseResponse
{
    public int num1 { get; set; }
    public int num2 { get; set; }
}

public class DrinkResponse : BaseResponse
{
    public Drink[] drinks { get; set; }
}

public class SnackResponse : BaseResponse
{
    public Snack[] snacks { get; set; }
} 
```

[这是 C# 基础知识的极好资源](http://www.csharp-station.com/Tutorial.aspx)，一旦你掌握了它，我进一步建议你[在这里](http://www.codeproject.com/Articles/327916/C-Language-Features-From-C-2-0-to-4-0)查看高级 C# 4.0 特定的东西。

**编辑**

为了支持其他人，他们提出了一个很好的观点，我一开始没有想到**泛型**-[这是一篇关于它们用法的精彩文章](http://www.csharp-station.com/Tutorial/CSharp/Lesson20)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:18:30.880

就像 Alex Farber 说的，你可以创建一个 Generic 类。

```
public class Response<T>
{
    public int num1 { get; set; }
    public int num2 { get; set; }
    public T[] items{ get; set; }
} 
```

有关泛型类的更多信息：http: [//msdn.microsoft.com/en-us/library/sz6zd40f (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/sz6zd40f(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:20:55.270

```
public class Response<T>
{
    public int num1 { get; set; }
    public int num2 { get; set; }
    public T[] food { get; set; }
}

Response<Drink> response = new Response<Drink>
    {
        num1= 7, num2= 2, food = new Drink[] 
        { new Drink{Id=1, Name="Orange"}, new Drink{Id=2, Name="Apple"}}
    };

Response<Snack> response = new Response<Snack>
    {
        num1= 7, num2= 2, food = new Snack[] 
        { new Snack{Id=1, Name="Orange"}, new Snack{Id=2, Name="Apple"}}
    }; 
```

# c# - 继承列表和序列化

> ID：13052134
> 
> 赞同：1
> 
> 时间：2012-10-24T15:12:58.950
> 
> 标签：c#, inheritance, serialization

如果我有一个从通用列表继承的基类，并且派生类需要使用列表条目的自定义名称进行序列化，我该如何输入正确的序列化属性和/或引用基列表？

```
public abstract class SpecialList<T> : List<T>
{
    //Other methods here 
}

public class Cache : SpecialList<CacheEntry>
{

    [XmlElementAttribute("CustomName")]
    public List<CacheEntry> Entries {
        get { return ???; }
        set { ??? = value; }
    }
} 
```

在不覆盖基类方法、编写自定义序列化或实现 IXmlSerializable 的情况下，这实际上是否可行？

我期望产生类似这样的输出 XML：

```
<cache>
    <customname></customname>
    <customname></customname>
</cache> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:19:30.710

如果要编写具有自定义元素名称的元素，则需要覆盖基类属性..或编写新方法来封装基类属性。

# android - Android Widget 随机停止工作

> ID：13052138
> 
> 赞同：6
> 
> 时间：2012-10-24T15:13:10.837
> 
> 标签：android, android-intent, widget, broadcastreceiver, android-pendingintent

我已经处理这个问题三天了，我已经查看了这里的每一个问题以寻求答案。我有一个带有按钮的小部件，我想做的就是每次单击它时启动一个服务。问题是按钮随机停止工作。我根本无法重新创建它，我不知道是什么原因造成的。我的服务调用 stopSelf(); 但是我的广播接收器也遇到了这个问题，所以我相信问题出在小部件上，而不是服务上。这是代码

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[]     appWidgetIds) 
{

Log.i("Widget", "onUpdate");

final int N = appWidgetIds.length;

    for (int i=0; i<N; i++) 
    {

        int appWidgetId = appWidgetIds[i];

        Log.i("Widget", "onUpdateLoop");

        Intent intent = new Intent(context, ServiceWidgetAction.class);
        intent.setAction(Long.toString(System.currentTimeMillis()));
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        PendingIntent pendingIntent = PendingIntent
                .getService(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

        RemoteViews views = new RemoteViews(context.getPackageName(), 
               R.layout.widget);

        views.setOnClickPendingIntent(R.id.widgetButton, pendingIntent);

        views.setTextViewText(
                R.id.widgetTextView,
                "Some text");

        appWidgetManager.updateAppWidget(appWidgetId, views);

    }

} 
```

我一遍又一遍地检查了这段代码，我不知道它为什么这样做。它在 3 部不同的手机上执行此操作，我无法重新创建它。我试过强制停止应用程序，从任务管理器中清除它，添加新的小部件等，以使小部件停止工作，但它不会。但是，当我今天早上醒来时，小部件不再起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T22:40:09.957

我最终找出了问题所在。我正在从应用程序的其他地方更新小部件，但我没有每个地方的完整代码。换句话说，我的应用程序像这样更新了小部件中的文本视图

```
 RemoteViews views = new RemoteViews(context.getPackageName(), 
           R.layout.widget);

    views.setTextViewText(
            R.id.widgetTextView,
            "Some text");

    appWidgetManager.updateAppWidget(appWidgetId, views); 
```

但它需要整个代码来保持按钮注册如下：

```
 Intent intent = new Intent(context, ServiceWidgetAction.class);
    intent.setAction(Long.toString(System.currentTimeMillis()));
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    PendingIntent pendingIntent = PendingIntent
            .getService(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    RemoteViews views = new RemoteViews(context.getPackageName(), 
           R.layout.widget);

    views.setOnClickPendingIntent(R.id.widgetButton, pendingIntent);

    views.setTextViewText(
            R.id.widgetTextView,
            "Some text");

    appWidgetManager.updateAppWidget(appWidgetId, views); 
```

因此，底线是每当您从应用程序中更新小部件时，请确保它看起来与小部件本身中的代码完全相同。不要遗漏任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:34:04.063

您是否将小部件安装到 SD 卡中？

由于此类系统同步问题，Google 建议将所有小部件、警报和接收器应用类型安装到内部存储中。

也许不是解决方案，而是“必须检查”；）

```
android:installLocation="internalOnly" 
```

# android - 如何将文件从 PC 传输到 Android 设备

> ID：13052142
> 
> 赞同：0
> 
> 时间：2012-10-24T15:13:24.943
> 
> 标签：android, inputstream, httprequest, urldecode

如何在浏览器中从 Http 请求打开流文件并从 pc 传输到 android 设备

```
public class WebServer extends Thread {
        private static final String SERVER_NAME = "AndWebServer";

        private static final String MESSAGE_PATTERN = "/message*";
       public WebServer(Context context, NotificationManager notifyManager){
                super(SERVER_NAME);

                this.setContext(context);
                this.setNotifyManager(notifyManager);

                SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(context);

                serverPort = Integer.parseInt(pref.getString(Constants.PREF_SERVER_PORT, "" + Constants.DEFAULT_SERVER_PORT));
                httpproc = new BasicHttpProcessor();
                httpContext = new BasicHttpContext();

        httpproc.addInterceptor(new ResponseDate());
        httpproc.addInterceptor(new ResponseServer());
        httpproc.addInterceptor(new ResponseContent());
        httpproc.addInterceptor(new ResponseConnControl());

        httpService = new HttpService(httpproc, 
                                                                                new DefaultConnectionReuseStrategy(),
                                                                                new DefaultHttpResponseFactory());

        registry = new HttpRequestHandlerRegistry();

        registry.register(MESSAGE_PATTERN, new MessageCommandHandler(context,  
        httpService.setHandlerResolver(registry);
        }

        @Override
        public void run() { ...   }

}

public MessageCommandHandler(Context context, NotificationManager notifyManager){
            this.context = context;
            this.notifyManager = notifyManager;

    @Override
    public void handle(HttpRequest request, HttpResponse response, HttpContext httpContext) throws HttpException, IOException {
            String uriString = request.getRequestLine().getUri();
            Uri uri = Uri.parse(uriString);
            String message = URLDecoder.decode(uri.getQueryParameter("msg"));
            // get open stearm file and save 
            AppLog.logString("Message URI: " + uriString);

            displayMessage(message);

            HttpEntity entity = new EntityTemplate(new ContentProducer() {....
            }
    });

            response.setHeader("Content-Type", "text/html");
            response.setEntity(entity);
    }

    protected void displayMessage(final String message) { 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:01:53.900

看起来您有一个基于 Android 的 Web 服务器，它接受从桌面 Web 客户端发布的带有文件字段的表单。

首先，将表格行更改为：

```
<form action="insert" enctype="multipart/form-data" method="post"> 
```

那里的所有指南都说如果您想提交文件，您需要一个多部分表单（而不是 urlencoded）；如果不指定会发生什么`enctype`，我不确定；浏览器可能只是悄悄地将上传的内容类型更改为多部分。

要从`HttpRequest`对象表单中检索实体数据，请执行以下操作：

```
Entity en = ((BasicHttpEntityEnclosingRequest)request).getEntity();
InputStream ins = en.getContent(); //Lets you read from the entity 
```

该流不适用于上传的文件 - 它适用于整个实体。它包括所有表单域，文件就是其中之一。

现在棘手的部分开始了。Android 没有内置的多部分表单解析器。那里有一些免费的开放解析器，请查看

[http://www.servlets.com/cos/javadoc/com/oreilly/servlet/MultipartRequest.html](http://www.servlets.com/cos/javadoc/com/oreilly/servlet/MultipartRequest.html)

还有[http://blog.kieranties.com/2012/03/multipart-form-posting-in-android.html](http://blog.kieranties.com/2012/03/multipart-form-posting-in-android.html)

其他都失败了，你可以自己写。但在此之前，请尝试集成一个现成的。

# java - 需要行动听众的建议

> ID：13052145
> 
> 赞同：0
> 
> 时间：2012-10-24T15:13:57.907
> 
> 标签：java, swing, jpanel, jslider, changelistener

我试图获取我的 jslider 的值并输入它，以便它是从我的第一段代码中创建的 if 语句创建的每个形状的边界长度和面积的值，然后用答案更新我的 2 个 jtextfields到边界长度和面积，关于如何做到这一点的任何提示？

```
public class MyFrame extends javax.swing.JFrame {
    public MyFrame() {
        // Create the menu
        JMenuBar topMenu = new JMenuBar();
        this.setJMenuBar(topMenu);

        //create the menu button "shapes"
        JMenu shapes = new JMenu("Shapes");
        topMenu.add(shapes);
        //Create the 3 shapes for the menu
        JMenuItem square = new JMenuItem("Square");
        square.addActionListener(new ShapeAction());

        JMenuItem circle = new JMenuItem("Circle");      
        circle.addActionListener(new ShapeAction());

        JMenuItem triangle = new JMenuItem("Triangle");
        triangle.addActionListener(new ShapeAction());

        //add shapes to menu
        shapes.add(circle);
        shapes.add(triangle);
        shapes.add(square);

        //add the menu
        setJMenuBar(topMenu);

        MyControlPanel pane = new MyControlPanel();
        getContentPane().add(pane);

        this.add(pane);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        // <snip>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                new MyFrame().setVisible(true);
                }
                });
}
        class ShapeAction implements ActionListener{
            public void actionPerformed(ActionEvent e){
                JMenuItem clickedMenu = (JMenuItem)e.getSource();

                if (clickedMenu.getText().equals("Square")){
                    //implement abstract methods                
                    MyShape aSquare = new ASquare();

                }
                else if (clickedMenu.getText().equals("Circle")){ 
                    //implement abstract methods
                    MyShape ACircle = new ACircle();

                }
                else if (clickedMenu.getText().equals("Triangle")){ 
                    //implement abstract methods
                    MyShape ATriangle = new ATriangle();

                }
            }          
        }
    } 
```

* * *

```
package assignment;

//import java.awt.FlowLayout;
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.JTextField;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class MyControlPanel extends javax.swing.JPanel {

JSlider slider;
JLabel sliderLabel;
JLabel sliderdimension;
JLabel blank;
JLabel dl;
JLabel area1;

/**
 * Creates new form MyControlPanel
 */
public MyControlPanel() {

    slider = new JSlider();
    slider.setValue(50);
    slider.addChangeListener(new MyChangeAction());
    slider.setMajorTickSpacing(10);
    slider.setPaintLabels(true);
    slider.setPaintTicks(true);
    slider.setBounds(300, 50, 100, 50);

    sliderLabel = new JLabel("50");
    blank = new JLabel("     ");
    sliderdimension = new JLabel("Shape Dimension:");

    JTextField boundary_length = new JTextField("Boundary Length");
    JTextField area = new JTextField("Area");

    dl = new JLabel("Boundary Length =");
    area1 = new JLabel("Area =");

    setLayout(new BorderLayout());

    JPanel sliderPanel = new JPanel();
    sliderPanel.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 0));

    sliderPanel.add(sliderdimension);
    sliderPanel.add(sliderLabel);
    sliderPanel.add(slider);
    sliderPanel.add(dl);
    sliderPanel.add(boundary_length);
    sliderPanel.add(area1);
    sliderPanel.add(area);
    this.add(sliderPanel, BorderLayout.PAGE_END);

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );
}// </editor-fold>                        
// Variables declaration - do not modify                     
// End of variables declaration                   

public class MyChangeAction implements ChangeListener {

    //complete code here
    public void stateChanged(ChangeEvent ce) {
        int value = slider.getValue();
        String str = Integer.toString(value);
        sliderLabel.setText(str);

    }
} // end class

    } 
```

* * *

```
package assignment;

public abstract class MyShape
 {

double thelength;
double thearea;

public abstract double computeBoundaryLength(double Length);

public abstract double computeArea (double Length);
 } 
```

* * *

```
package assignment;

public class ACircle extends MyShape {

@Override
public double computeBoundaryLength(double Length) 
{
    thelength=(2*Length*Math.PI);
return thelength;
}

@Override
public double computeArea(double Length) 
{
    thearea=(Length*Length*Math.PI);
    return thearea;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:34:40.663

使您的文本字段类变量并将这两行放入您的`stateChanged`方法中：

```
boundary_length.setText(str);
area.setText(str); 
```

还要确保创建具有固定列数的文本字段，以便它们不会根据显示的文本改变长度。

**更新**

我对您的代码进行了一些更改，以便将滑块的值传递给您的自定义形状：

*   `MyControlPanel`成为一个内部类`MyFrame`
*   文本字段成为类变量`MyControlPanel`
*   滑块成为 的类变量`MyFrame`，因此可以在 中访问其值`ShapeAction`。

示例代码：

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.JTextField;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class MyFrame extends javax.swing.JFrame {

    JSlider slider;

    public MyFrame() {
        // Create the menu
        JMenuBar topMenu = new JMenuBar();
        this.setJMenuBar(topMenu);

        //create the menu button "shapes"
        JMenu shapes = new JMenu("Shapes");
        topMenu.add(shapes);
        //Create the 3 shapes for the menu
        JMenuItem square = new JMenuItem("Square");
        square.addActionListener(new ShapeAction());

        JMenuItem circle = new JMenuItem("Circle");      
        circle.addActionListener(new ShapeAction());

        JMenuItem triangle = new JMenuItem("Triangle");
        triangle.addActionListener(new ShapeAction());

        //add shapes to menu
        shapes.add(circle);
        shapes.add(triangle);
        shapes.add(square);

        //add the menu
        setJMenuBar(topMenu);

        MyControlPanel pane = new MyControlPanel();
        getContentPane().add(pane);

        this.add(pane);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        // <snip>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                new MyFrame().setVisible(true);
                }
                });
}
        class ShapeAction implements ActionListener{
            public void actionPerformed(ActionEvent e){
                JMenuItem clickedMenu = (JMenuItem)e.getSource();
                if (clickedMenu.getText().equals("Circle")){ 
                    int value = slider.getValue();
                    MyShape ACircle = new ACircle(value);
                }
            }          
        }

        public class MyControlPanel extends javax.swing.JPanel {

            JLabel sliderLabel;
            JLabel sliderdimension;
            JLabel blank;
            JLabel dl;
            JLabel area1;
            JTextField boundary_length = new JTextField("Boundary Length");
            JTextField area = new JTextField("Area");

            public MyControlPanel() {
                slider = new JSlider();
                slider.setValue(50);
                slider.addChangeListener(new MyChangeAction());
                slider.setMajorTickSpacing(10);
                slider.setPaintLabels(true);
                slider.setPaintTicks(true);
                slider.setBounds(300, 50, 100, 50);

                sliderLabel = new JLabel("50");
                blank = new JLabel("     ");
                sliderdimension = new JLabel("Shape Dimension:");

                dl = new JLabel("Boundary Length =");
                area1 = new JLabel("Area =");

                setLayout(new BorderLayout());

                JPanel sliderPanel = new JPanel();
                sliderPanel.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 0));
                sliderPanel.add(sliderdimension);
                sliderPanel.add(sliderLabel);
                sliderPanel.add(slider);
                sliderPanel.add(dl);
                sliderPanel.add(boundary_length);
                sliderPanel.add(area1);
                sliderPanel.add(area);
                this.add(sliderPanel, BorderLayout.PAGE_END);
            }

            public class MyChangeAction implements ChangeListener {
                public void stateChanged(ChangeEvent ce) {
                    int value = slider.getValue();
                    String str = Integer.toString(value);
                    sliderLabel.setText(str);
                    boundary_length.setText(str);
                    area.setText(str);
                }
            }
        }
} 
```

您还应该向形状类（例如`ACircle`）添加一个构造函数，该构造函数将滑块的值作为输入（在其他方法中使用它）

```
public class ACircle extends MyShape {

    int value;

    public ACircle(int value) {
        this.value = value;
    }

    // other methods
} 
```

# p2p - .NET 点对点技术是否允许在路由器后面进行通信？

> ID：13052151
> 
> 赞同：1
> 
> 时间：2012-10-24T15:14:15.813
> 
> 标签：p2p, net.p2p

最近我遇到了一个案例，我试图在两个应用程序之间使用 Microsoft PNRP 技术建立 p2p 连接。一个应用程序在局域网上，另一个在同一个局域网上（不同的计算机，但同一个服务提供商），但在 WiFi 路由器后面。因为，我在各自系统的所有云（全局和本地链接）中注册了两个对等点，但是当我尝试解决另一个问题时，我找不到各自的对等点。据我所知，这些同行必须是可发现的，因为我也在全球云（互联网）中注册了它们。我怎样才能实现上述场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:28:18.787

以这种方式使用 PNRP 取决于多种技术，其中最重要的是 Teredo 隧道。您可能遇到了 Teredo 隧道以及它在防火墙后如何工作的限制。

总而言之，Teredo 通过发送到具有 IPv4 的特定端口的 UDP 数据包路由 IPv6 流量。因此，直接连接仅支持某些类型的 NAT。您可能会发现，您的每个系统都可以解析自己和其他服务，但如果它们位于不同的网络上，则不能在防火墙内相互解析。

解决这个问题的最简单方法是让计算机连接到完全不同的网络，或者让它们在同一个网络上（因为 PNRP 也支持链路本地发现）。

更多信息可以在[维基百科](http://en.wikipedia.org/wiki/Teredo_tunneling)上找到。

# objective-c - Xcode 不会创建 iOS .app 发布文件（产品）。如何解决这个问题？

> ID：13052154
> 
> 赞同：2
> 
> 时间：2012-10-24T15:14:27.360
> 
> 标签：objective-c, ios, xcode, ios6, release

我已经更新到最新版本的 Xcode 4.5.1 并且遇到了一些问题。当我构建项目的调试版本并在 iOS 模拟器上运行它时，一切正常。但是当我切换到项目模式中的发布风格并构建项目时，什么也没发生。我的意思是项目在模拟器上运行，但`Build`我的项目文件夹仍然是空的。

我试图遵循这个建议 [为什么 Xcode 4 不创建任何产品？](https://stackoverflow.com/questions/5331270/why-doesnt-xcode-4-create-any-products)

但在创建的文件夹`DerivedData`中只有日志和索引文件夹，没有 .app 文件。`.app`所以问题是：如何在 Xcode 4.5.1中获取真实 iOS6 设备文件的可执行文件？我真的是一个新手，我不知道 iOS 中的交付/部署过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:02:00.740

将您选择的部署设备更改为实际的 iOS 设备（不要使用模拟器）。之后，执行“存档”构建（产品 -> 存档）。如果您不选择部署到实际的 iOS 设备，此选项将显示为灰色。

# asp.net-mvc - 在 MVC 中创建和返回 PDF 的工作流程

> ID：13052155
> 
> 赞同：0
> 
> 时间：2012-10-24T15:14:30.887
> 
> 标签：asp.net-mvc, pdf, itextsharp

我正在使用微软的 MVC 平台来创建一个 Web 应用程序。在这个应用程序中，用户将填写一个 HTML 表单，单击提交，被重定向到一个成功的消息页面，并收到一个表单的 pdf 格式的打印输出。此外，我还想将他们的条目以表格形式保存在数据库中。我正在使用 iTextSharp 创建和编辑 PDF。

我正在寻找有关在 MVC 中管理工作流的建议。具体来说，我有一个控制器方法可以指导工作流程：

1.  将表单条目保存到数据库中，
2.  创建和编辑 PDF，
3.  将用户引导至成功页面，
4.  返回 PDF 供用户下载。

我的主要问题是：我应该如何委派重定向到成功页面并返回 pdf 的任务？截至目前，我的控制器似乎只能返回一个或另一个。我可以重定向到“附带”PDF 的视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:41:52.613

在这种情况下，我所做的是创建一个控制器操作，该操作返回与数据库中给定条目 ID 关联的 PDF。

```
public FileResult DownloadPdf(int id)
{
    byte[] data;
    // ... Generate PDF
    return File(data, "application/pdf");
} 
```

然后处理表单 POST 的控制器操作执行以下操作：

1.  将条目值保存到数据库中。
2.  检索已保存表单条目集的主键。
3.  重定向到成功视图并将主键传递给它。

然后，成功视图可以使用它提供的 ID 来链接到 PDF（作为下载链接），或者可以将其嵌入到 iframe 中（糟糕！）。

请注意，这仅适用于您将值保存在数据库中。如果不使用数据库，则必须：

1.  编码查询字符串中的所有表单数据（大小有限）
2.  将表单数据存储在 Session 中（不推荐）

希望有帮助。

# ssl - 为什么 SSL 证书链总是至少有 2 个子 CA？

> ID：13052159
> 
> 赞同：0
> 
> 时间：2012-10-24T15:14:41.477
> 
> 标签：ssl, ssl-certificate, x509certificate, certificate-authority

我注意到在我的浏览器中，SSL 证书链总是至少有 2 个子 CA。总是这样吗？如果是真的，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:23:53.257

通常至少有一个中间 CA，因为它可以更轻松地管理子公司和管理展期，但这不是必需的。

# apache - URL重写规则使url不区分大小写

> ID：13052161
> 
> 赞同：0
> 
> 时间：2012-10-24T15:14:48.517
> 
> 标签：apache, .htaccess, url-rewriting

我正在尝试使以下 URL 不区分大小写并转到同一位置：

[http://www.mywebsite.com/test](http://www.mywebsite.com/test)

[http://www.mywebsite.com/TEST](http://www.mywebsite.com/TEST)

我有以下规则：

```
RewriteRule ^/([a-zA-Z0-9_\-]+)/?$ /?param=$1 [L] 
```

它适用于小写，但当我在网站名称后有“TEST”时，它不适用。

我明白了`The requested URL /TEST.php was not found on this server`。附加 .php 是上述规则之后的另一个 URL 规则。所以看起来，它不符合规则并继续下一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:28:30.590

**尝试以下操作：**

```
RewriteRule ^([a-zA-Z0-9_\-]+)?$ /index.php?param=$1 
RewriteRule ^([a-zA-Z0-9_\-]+)/?$ /index.php?param=$1 
```

显式引用索引文件会更清楚。如果您想匹配“测试”参数上的斜杠，则应添加第二条规则。

这适用于`http://www.mywebsite.com/test`和`http://www.mywebsite.com/TEST`

# algorithm - 欧拉计划 - 68

> ID：13052165
> 
> 赞同：1
> 
> 时间：2012-10-24T15:15:15.143
> 
> 标签：algorithm, language-agnostic

我已经读过[什么是“魔术”三边形环的“外部节点”？](https://stackoverflow.com/questions/6394577/project-euler-problem-68)我已经解决了 90 岁之前的问题，但是这个 n-gon 事情完全让我感到困惑，因为我根本不明白这个问题。

所以我拿了这个环，我知道外圈是 4、5、6，因为它们在内圈之外。现在他说有八种解决方案。下面列出的八种解决方案不再赘述。让我拿

```
9   4,2,3; 5,3,1; 6,1,2
9   4,3,2; 6,2,1; 5,1,3 
```

那么我们如何得出这两种解决方案呢？我知道 4、3、2 是直线，6、2、1 是直线，5、1、3 是直线，它们是顺时针的，所以第二种解决方案是有意义的。

问题

1.  为什么第一个解决方案 4,2,3; 5,3,1; 6、1、2逆时针方向？不应该是 423 612 然后是 531 吗？
2.  我们如何得出 8 个解决方案。它只是随机选择三个数字吗？解决“N-gon”究竟意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:36:42.630

第一个不是逆时针方向。这是你从配置中得到的

```
 4
         \
          2
         / \
        1---3---5
       /
      6 
```

当你顺时针走时，从外圈最小的数字开始。

> 我们如何得出 8 个解决方案。它只是随机选择三个数字吗？解决“N-gon”究竟意味着什么？

对于 N 边形，您有一个内部 N 边形，并且对于 N 边形的每一侧都有一个尖刺，例如

```
 X
        |
X---X---X
    |   |
    X---X---X
    |
    X 
```

这样尖刺与内 N 边形的边一起连接了一组三个地方。N-gon 的“解决方案”是一种配置，您将数字从 1 放置到 2*N，以便 N 组中的每一个总和为相同的值。

尖峰末端的位置每组只出现一组，内部 N 边形顶点上的位置为两组。所以所有组的总和是

```
 N
 ∑ k +  ∑{ numbers on vertices }
k=1 
```

内 N 边形的顶点上的数字之和至少`1 + 2 + ... + N = N*(N+1)/2`为 ，最多为`(N+1) + (N+2) + ... + 2*N = N² + N*(N+1)/2 = N*(3*N+1)/2`。

因此，所有组的总和在

```
N*(2*N+1) + N*(N+1)/2 = N*(5*N+3)/2 
```

和

```
N*(2*N+1) + N*(3*N+1)/2 = N*(7*N+3)/2 
```

包括在内，并且每组的总和必须介于

```
(5*N+3)/2 
```

和

```
(7*N+3)/2 
```

*   再次包容。

对于三角形 - `N = 3`- 边界是`(5*3+3)/2 = 9`和`(7*3+3)/2 = 12`。对于平方 - `N = 4`- 边界是`(5*4+3)/2 = 11.5`-`(7*4+3)/2 = 15.5`因为总和必须是整数，所以可能的总和是`12, 13, 14, 15`。

回到三角形，如果每组的和是9，那么和是27，那么顶点上的数字之和一定是`27 - (1+2+3+4+5+6) = 27 - 21 = 6 = 1+2+3`，所以顶点上的数字是1、2和3。

如果总和为 9，则连接 1 和 2 的一侧的尖峰末端值必须为 6，连接 1 和 3 的一侧的尖峰值必须为 5，连接 2 和 3 的一侧的尖峰值必须为 4 .

如果您从尖峰上的最小值开始 - 4 - 您知道您必须将 2 和 3 放置在尖峰突出的一侧的顶点上。有两种方法可以在那里排列这两个数字，从而得出总和 9 的两种解决方案。

如果每组的总和是 10，总和是 30，并且顶点上的数字总和必须是 9。要将 9 表示为从 1 到 6 的三个不同数字的总和，您有以下可能性

```
1 + 2 + 6
1 + 3 + 5
2 + 3 + 4 
```

对于第一组，您有一侧连接 1 和 2，因此您需要在尖峰末端有一个 7 才能产生 10 - 没有解决方案。

对于第三组，两个数字的最小和是 5，但是`5+6 = 11 > 10`，所以 6 没有位置 - 没有解决方案。

对于第二组，边的总和是

```
1 + 3 = 4  -- 6 on the spike
1 + 5 = 6  -- 4 on the spike
3 + 5 = 8  -- 2 on the spike 
```

并且您有两种方法可以安排 3 和 5，因此该组是`2-3-5`或`2-5-3`，其余的再次跟随。

总和 11 和 12 的解可以类似地获得，或者通过在总和 9 的解中分别`k`替换`7-k`。10.

要解决这个问题，你现在必须找出

*   获取 16 位字符串或 17 位字符串是什么意思
*   当数字以规定的方式连接时，组的总和会产生最大值。

（并使用铅笔和纸来获得最快的解决方案。）

# c# - 使用 Accord.Net 的 Codification 对象对第二个数据集进行编码

> ID：13052167
> 
> 赞同：1
> 
> 时间：2012-10-24T15:15:23.503
> 
> 标签：c#, machine-learning, bayesian, accord.net

我试图弄清楚如何使用[Accord.Net 框架](https://code.google.com/p/accord/)使用机器学习 NaiveBayes 类进行贝叶斯预测。我遵循了文档中列出的[示例代码](http://accord.googlecode.com/svn/docs/html/T_Accord_MachineLearning_Bayes_NaiveBayes.htm)，并且能够从示例中创建模型。

我不知道如何根据该模型进行预测。

Accord.Net 框架的工作方式是使用名为[Codification](http://accord.googlecode.com/svn/docs/html/T_Accord_Statistics_Filters_Codification.htm)的类将字符串表转换为这些字符串的数字符号表示。以下是我创建输入和输出 DataTable 来训练模型的方法（90% 的代码直接来自示例）：

```
 var dt = new DataTable("Categorizer");
        dt.Columns.Add("Word");
        dt.Columns.Add("Category");

        foreach (string category in categories)
        {
            rep.LoadTrainingDataForCategory(category,dt);
        }

        var codebook = new Codification(dt);
        DataTable symbols = codebook.Apply(dt);
        double[][] inputs = symbols.ToArray("Word");
        int[] outputs = symbols.ToIntArray("Category").GetColumn(0);

        IUnivariateDistribution[] priors = {new GeneralDiscreteDistribution(codebook["Word"].Symbols)};
        int inputCount = 1;
        int classCount = codebook["Category"].Symbols;
        var target = new NaiveBayes<IUnivariateDistribution>(classCount, inputCount, priors);

        target.Estimate(inputs, outputs); 
```

这一切都成功了。现在，我有了新的输入，我想针对我刚刚构建的训练数据模型进行测试。所以我尝试这样做：

```
 var testDt = new DataTable("Test Data");
        testDt.Columns.Add("Word");
        foreach (string token in tokens)
        {
            testDt.Rows.Add(token);
        }

        DataTable testDataSymbols = codebook.Apply(testDt);
        double[] testData = testDataSymbols.ToArray("Word").GetColumn(0);

        double logLikelihood = 0;
        double[] responses;
        int cat = target.Compute(testData, out logLikelihood, out responses); 
```

请注意，我使用的是之前构建模型时使用的相同码本对象。我希望使用与原始模型相同的码本对数据进行编码，否则同一个单词可能会使用两个完全不同的值进行编码（原始模型中的单词“bob”可能对应于数字 23，而在新模型中，数字 43... 不可能。）

但是，我在这一行收到 NullReferenceException 错误：

```
 DataTable testDataSymbols = codebook.Apply(testDt); 
```

这是错误：

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at Accord.Statistics.Filters.Codification.ProcessFilter(DataTable data)
   at Accord.Statistics.Filters.BaseFilter`1.Apply(DataTable data)
   at Agent.Business.BayesianClassifier.Categorize(String[] categories, String testText) 
```

我传入的对象都不是空的，所以这一定是代码中发生的更深层次的事情。但我不确定是什么。

谢谢你的帮助。如果有人知道一个实际是根据 Accord.Net 的贝叶斯示例进行预测的示例，如果您分享它，我将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T02:01:16.077

很抱歉最后部分缺少文档。为了获得新单词的相同整数编码，您可以使用码本的 Translate 方法：

```
// Compute the result for a sunny, cool, humid and windy day:
double[] input = codebook.Translate("Sunny", "Cool", "High", "Strong").ToDouble(); 

int answer = target.Compute(input);

string result = codebook.Translate("PlayTennis", answer); // result should be "no" 
```

但也应该可以调用 codebook.Apply 将相同的转换应用于新数据集。如果您觉得这是一个错误，您想在问题跟踪器中填写错误报告吗？

# mysql - 分组方式/排序方式 mysql

> ID：13052170
> 
> 赞同：-5
> 
> 时间：2012-10-24T15:15:28.547
> 
> 标签：mysql

我有一个包含客户 ID 和购买日期的表格，我按客户分组，但我希望最后一次购买日期显示不是第一次购买日期

我试过了

按客户分组

ORDER BY purchaseate DESC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:18:14.317

您需要哪个购买日期？如果是最后一次购买日期，那么查询应该是这样的：

```
SELECT *, max(purchasedate) FROM table1 GROUP BY customer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:18:37.150

您需要发布您的实际查询以及上下文，以便我们更好地为您提供帮助。

好像你错过了聚合。你可以试试这个：

```
SELECT customer, MAX(purchasedate)
FROM sparkles
GROUP BY customer 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T15:20:17.860

在没有看到您的实际查询的情况下，您可能可以使用类似于以下内容的内容：

```
select t1.customerid, t1.purchasedate, t1.othercol1, t1.othercol2, t1.othercol3
from yourtable t1
inner join
(
    select max(purchasedate) purchasedate, customerid
    from yourtable
    group by customerid
) t2
    on t1.customerid = t2.customerid
    and t1.purchasedate = t2.purchasedate
order by t1.purchasedate desc 
```

或者您可以将`max()`聚合函数应用于`purchasedate`列

# .htaccess - htaccess规则..无法解决

> ID：13052171
> 
> 赞同：0
> 
> 时间：2012-10-24T15:15:30.430
> 
> 标签：.htaccess

我正在努力让我的网站 htaccess 工作......但没有运气..

下面是代码

```
<IfModule mod_rewrite.c>
   Options +FollowSymLinks
   RewriteEngine On
   RewriteBase /
   RewriteCond %{HTTP_HOST} ^example\.com$ [NC] 
   RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d 
   RewriteRule ^([^/]+)/?  /profile.php?username=$1 [L,NC]
 </IfModule> 
```

这很好用没有问题..但是当我添加一些东西时它不会工作..在以下情况下 -

1）例如，当我输入 example.com/dinesh 时，它会将我重定向到 www.example.com（总是主页而不是我希望它是 www.example.com/dinesh

2）现在我有另一个带有两个参数的users.php问题是当我传递一个参数时它应该执行这个规则profile.php但是当我传递两个参数时它应该把我带到user.php我尝试了很多组合但是这个不管用。

如果任何专家可以给我至少一些提示，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:53:05.783

至于**1)**，它可能与上述规则没有任何关系。如果`/dinesh`存在，您应该在那里查看。如果它不存在，您应该查看`/profile.php`，这可能是将您重定向到主页的原因。

至于**2)**，你的规则：

```
RewriteRule ^([^/]+)/?  /profile.php?username=$1 [L,NC] 
```

匹配 URI: `/something/else`，因为正则表达式没有字符串结尾匹配。它与第一个匹配，这就`something`足够了。如果`$`在末尾添加 a ，它将不匹配`/something/else`。

```
RewriteRule ^([^/]+)/?$  /profile.php?username=$1 [L,NC] 
```

或者，您可以将路由到的其他规则放在路由到配置文件的规则`user.php` *之前*。但最好有`$`.

# git - 如何将本地未版本化代码关联到 git 远程存储库？

> ID：13052172
> 
> 赞同：23
> 
> 时间：2012-10-24T15:15:33.883
> 
> 标签：git, version-control, repository, git-remote

我需要将干净的未版本控制代码关联到现有的 git 远程存储库。

我更好地解释我的情况。我的项目从 svn 转移到了 git。我有一个 svn 本地工作副本，其中包含必须与新的 git 存储库同步的旧代码（没有新的提交内容）。我可以克隆 repo，但我应该手动恢复许多被忽略的配置文件，我会避免它。

因此，我删除了所有 .svn 目录，并使用 git 远程存储库跟踪我的代码。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-24T16:55:36.770

我会提交您的工作目录以确保它在获取之前存在于历史记录中。（确保您位于项目根文件夹中）

```
git init
git add -A
git commit -m "my latest' 
```

现在我们有了

```
git remote add origin url-to-your-remote
git fetch origin 
```

现在我们有了远程的历史

```
git reset origin/master 
```

现在我们当前的提交是来自远程的最新提交

```
git add -A
git commit -m "Committed my state" 
```

现在我们使用当前工作目录作为下一次提交的快照。

```
git push -u origin master 
```

推送您的更改并跟踪分支。

关键是`reset`没有`--hard`选项的命令。它使您的工作文件夹保持不变，同时将分支指向您从远程获得的内容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-13T14:03:44.040

好的，我根据[Adam Dymitruk](https://stackoverflow.com/users/217284/adam-dymitruk)和[Eugene Sajine](https://stackoverflow.com/users/673423/eugene-sajine)的答案发布了我的问题的正确答案。谢谢大家的支持：）

*   首先，删除`.svn`工作副本目录中的所有目录；
*   在工作副本目录中初始化新的 git 存储库

    ```
    cd /path/to/my/project
    git init 
    ```

*   添加 git 远程存储库并获取它

    ```
    git remote add origin url-to-your-remote
    git fetch origin 
    ```

*   将工作副本重置到远程存储库

    ```
    git reset --hard origin/master 
    ```

最后，本地存储库将与远程存储库同步。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T15:22:29.050

如果您真的是认真的，那么顺序将是：

```
cd {your-project}
git init
git remote add {remote_name} {address}
git fetch {remote_name} 
```

然后，您可以从远程具有的分支之一创建本地分支，例如：

```
git branch master {remote_name}/master 
```

然后你可以添加你的代码：

```
git add {files} 
```

或者

```
git add .
git commit 
```

更新：

OP 指定有问题的代码是旧的并且没有什么可提交的，因此似乎整个情况无缘无故地过于复杂。OP 应该克隆新的存储库并完成它。忽略配置应根据项目政策重做（.gitingore 是否存储在 repo 中等等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-13T16:36:48.183

下面的工作吗？我在我的一个项目上进行了尝试，它奏效了。

1) 将 git 存储库克隆到与包含未版本化代码的目录不同的位置。

2) 将 .git 文件夹从作为 (1) 的结果创建的目录复制到包含未版本化代码的目录。

这对我来说有效地实现了 Adam Dymitruk 在上面的回答中所采取的步骤。

# java - 无法添加时间戳

> ID：13052176
> 
> 赞同：0
> 
> 时间：2012-10-24T15:15:46.440
> 
> 标签：java, timestamp, add

为什么 getTime() 有错误？我已经尝试了一切，但无法弄清楚问题所在。据我所知，我已将 String arrayOpportunity[2] 转换为日期。（它最初是一个字符串。）谢谢！

```
SimpleDateFormat df = new SimpleDateFormat();
df.applyPattern("yyyy-MM-dd HH:mm:ss");

// Calendar timestamp = Calendar.getInstance();
// timestamp.setTime(df.parse(arrayOpportunity2)[0]);

arraySuspects.add(arrayGPS[0]);
// }
// long timediff = coord2.getTimestamp().getTimeInMillis() -
// coord1.getTimestamp().getTimeInMilis();

Date convertedDate = df.parse(arrayOpportunity[2]);

Date duration = df.parse("0000-00-00 00:14:59");
Date lastTime = df.parse(arrayOpportunity[2]);

// SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/mm/dd");

System.out.println(arrayOpportunity[2]);

//  arrayOpportunity[2].setTime(arrayOpportunity[2].getTime() + duration);
//  lastTime += duration;
arrayOpportunity[2].setTime(arrayOpportunity[2].getTime() + (((14 * 60) + 59)* 1000)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:23:08.323

调用`df.parse(arrayOpportunity[2]);`不会转换`arrayOpportunity[2]`为 a `Date`，而是将该值分配给`lastTime`。在您的代码调用中，`lastTime.getTime()`而不是`arrayOpportunity[2].getTime()`as`arrayOpportunity[2]`仍然是`String`

```
// Create your date parser
SimpleDateFormat df = new SimpleDateFormat();
// Set the date pattern
df.applyPattern("yyyy-MM-dd HH:mm:ss");
// Create a Date object by parsing the value of arrayOpportunity[2]
Date lastTime = df.parse(arrayOpportunity[2]);
// Set a new value to the Date object by performing a calculation on the result of getTime()
lastTime.setTime(lastTime.getTime() + (((14 * 60) + 59)* 1000)); 
```

# mysql - 比较 MySQL 中两个表中的两行，仅显示否定结果

> ID：13052177
> 
> 赞同：0
> 
> 时间：2012-10-24T15:15:46.220
> 
> 标签：mysql, compare, multiple-tables

所以我有一个名为“HoldingQueue”的表，我想将两行与两个值进行比较，并返回与这两个值都不匹配的每一行。以下是内容示例：

```
* * * * * * * * * * * *
* ItemCode * Channel  *
* * * * * * * * * * * *
* 1PX1     * Test     *
* * * * * * * * * * * *
* 2PX1     * Test     *
* * * * * * * * * * * *
* 3PX1     * Test2    *
* * * * * * * * * * * * 
```

和查询：

```
SELECT * FROM HoldingQueue WHERE ItemCode<>"1PX1" AND Channel<>"Test"; 
```

这仅返回“3PX1 | Test2” - 我希望它返回不是“1PX1 | Test”的所有内容 - 所以“2PX1 | Test”也应该返回。

有任何想法吗？有点把我的头撞到这里的墙上。

编辑：好的，所以它正在使用 OR 处理小型数据集......但我刚刚意识到我遇到的问题。我正在尝试提取“ItemCode”和“Channel”以将其与另一个具有多个条目的表进行比较，但我现在意识到，因为该表上有多个条目，所以每件事都至少有一次资格的一组值。

我认为我的问题比这更复杂。

**编辑＃2：明白了......**

```
SELECT Channel, ItemCode FROM HoldingQueue H
WHERE NOT EXISTS
(SELECT * FROM SKUList S
    WHERE
        H.ItemCode=S.SKU
        AND
        H.Channel=S.Channel
) GROUP BY H.Channel,H.ItemCode; 
```

我想要任何与第二个 SKUList 表中的任何内容都不匹配的项目。这做到了。将标记 Sergey Kudriavtsev 的答案，因为他确实正确回答了我最初的问题（遗漏了我面临的大部分问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:17:11.870

在您的查询中更改`AND`为`OR`，因此它将是

```
SELECT * FROM HoldingQueue WHERE ItemCode<>"1PX1" OR Channel<>"Test"; 
```

# tridion - 是否可以混合模块化模板和旧版 VBScript CT？

> ID：13052188
> 
> 赞同：6
> 
> 时间：2012-10-24T15:16:22.840
> 
> 标签：tridion

特别是，我想到的情况是：

```
@@RenderComponentPresentation(Component, "<vbs-legacy-ct-tcm-uri>")@@ 
```

我遇到的问题是，在我的情况下，VBS 代码在尝试访问组件字段时会中断，给出“错误 13 类型不匹配 ..”。

（所以，如果我要给出答案，我会说：“部分，没有实际用途”）

**编辑** 上面的 DWT 来自另一个 CT，因此它实际上是组件链接的渲染，这就是为什么按照 Nuno 的建议的无参数重载将无法正常工作的原因。顺便说一句，VBS 中的以下行不会中断并给出正确的值：

```
WriteOut Component.ID
WriteOut Component.Schema.Title 
```

**编辑 2**

Dominic 是绝对正确的：这是一个缺失的依赖项。

使此信息普遍有用的更多见解：

假设，原始 CT 看起来像这样（“VBScript [Legacy]”类型）：

```
[%
Call RenderComponent(Component)
%] 
```

该 CT 是从 PT 调用的，也是基于 VBS 的。那个 PT 一开始就有一大块“#include”语句。

现在情况发生了变化：同一个 CT 被另一个基于 DWT 的 CT 调用。显然（感谢大家的宝贵帮助！），现在任何地方都*没有*包含依赖项。

使原始 CT 再次工作的解决方案是明确手工挑选并包含所有必要的 VBS TBB，因此原始 CT 变为：

```
[%
#include "tcm:<uri-of-vbs-tbb>"
Call RenderComponent(Component)
%] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:00:22.910

是的 - 混合和匹配旧模板和模块化模板是完全可能的。`template building blocks`也许很明显，你不能在这两种技术之间混搭。

在 VBScript 中，“错误 13 类型不匹配”有时用作密码，这实际上意味着“我不认识您的变量之一的名称，（包括函数和子的名称）”在 VBScript 模板引擎中，来自页面模板可能在您的组件模板的范围内；例如，将#includes 放在PT 中以便CT 可以使用它们是很常见的。我的猜测是您的组件模板正在尝试使用这样的功能，但没有找到它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T15:19:41.740

我知道您可以使用 VBScript 组件演示呈现模块化页面模板，并且 VbScript 页面模板也可以呈现模块化组件模板。

您的错误可能是由于其他原因？您是否尝试过只使用常规`@@RenderComponentPresentation()@@`调用而不指定哪个模板？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T15:45:06.593

页面模板可以呈现不同风格的复合模板 - 例如 Razor、VBS 或 XSLT。

问题来自模板中包含的 TBB。Razor 模板通常需要调用仅存在于 VBScript 中的函数。因此，迁移模板的起点始终是从辅助函数和实用程序库开始。然后将您拥有的最通用的 PT / CT 迁移到新格式（Razor、XSLT、DWT 等）。这为您有时间迁移到新格式提供了一个很好的基础。

# python - Python keylistener - 树莓派

> ID：13052195
> 
> 赞同：2
> 
> 时间：2012-10-24T15:16:48.923
> 
> 标签：python, keylistener, raspberry-pi

我刚拿到我的树莓派，让它成为一个扬声器:)。现在我希望它根据您按下的键发出不同的声音。如何在 python 中实现关键监听器？我知道如何在java中做到这一点，但不知道python：/。如果您想知道我使用的是 linux 发行版并且确实安装了 python 等，我无法想象它在任何其他 linux 系统上会有所不同（可能是 Windows 的不同库）。

另外我只是从 LXTerminal 运行它，所以当我输入时，因为焦点设置在终端上，我最终只是在终端窗口中输入。我试过这个，但没有运气：

```
import Tkinter as tk
def keypress(event):
    x = event.char 
```

有任何想法吗？我真的很感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T18:20:12.217

在这个[链接](https://github.com/dxs/UGV/blob/master/Python/gui_1.1.py)上，有一个适用于树莓派的完整代码。获取其中的一部分，您将获得您的 keyListener。在您启动代码之前，请确保您已`xset r off`在终端中输入。这样，您将不会有任何键重复。

# django - 从 Django 查询中隐藏项目

> ID：13052202
> 
> 赞同：3
> 
> 时间：2012-10-24T15:17:02.777
> 
> 标签：django, sqlite

我们有一个 webapp，在 django db 中有几个产品名称。查询该表（？）的数据库并使用这些产品名称填充下拉列表。我想从查询/下拉列表中隐藏这些产品名称，而不将它们从数据库中删除。

有没有办法在sqlite中做到这一点？

我从一个已经离开的团队成员那里继承了这个项目，我学习 Django 已经两天了，所以欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:20:22.597

当然，查询时必须使用`Queryset.filter`方法！

例子：

```
items = Item.objects.filter(attribute = value) 
```

这只会选择`value`具有`attribute`.

如果你想反过来做，你可以使用`Queryset.exclude`

```
items = Item.objects.exclude(attribute = value) 
```

这只会选择`attribute`不等于 的项目`value`。

查看[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)以获得更多关于 django ORM 的乐趣！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:57:47.123

```
class Meta:
    model = ChangeRequest
    products = [(product.name, product.name) for product in Product.objects.all()]
    products = [('', '--------')] + products
    widgets = {
        'product': forms.Select(choices=products), 
```

这是我的代码片段，它返回 Product1 Product2 Product3 Product4

我正在尝试使用您在上面提供的排除行和文档，但运气不佳。我怎样才能让它只返回 Product2 和 Product4？

如果这完全不正确，我深表歉意，因为这是我第一次在这里提问。

# jquery - 如何删除 TinyMCE 编辑器中的所有 html？

> ID：13052203
> 
> 赞同：3
> 
> 时间：2012-10-24T15:17:03.380
> 
> 标签：jquery, tinymce

在 TinyMCE 编辑器中，当你删除“p”时，就像下面的代码一样。

怎么全部去掉？？？

```
tinyMCE.activeEditor.dom.remove(tinyMCE.activeEditor.dom.select('p')); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:19:05.750

尝试这个：

```
tinyMCE.activeEditor.setContent(''); 
```

[设置内容参考](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.setContent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:07:10.000

为确保只有段落被删除，请使用：

```
$(tinymce.activeEditor.getBody()).find('p').remove(); 
```

由于在`tinymce.activeEditor`用户第一次单击时设置它，因此使用显式编辑器实例可能是更好的选择（甚至在用户单击编辑器之前就可用）。要使用它：

```
tinymce.get('your_editor_id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-03T17:52:28.293

如果您在同一页面中有多个 tinymce textareas 实例，您可以使用：

```
tinyMCE.get('your-textarea-id').setContent(''); 
```

# google-earth-plugin - 来自爪哇的地球。这是可能的？

> ID：13052206
> 
> 赞同：0
> 
> 时间：2012-10-24T15:17:19.250
> 
> 标签：google-earth-plugin

我想知道是否可以在 Java 中为 web 创建一个 APP 而无需安装插件。例如，我使用 Google Earth Libraries for Java 并在网页中显示 Google Earth，而无需用户安装插件。这是可能的？如果是，我需要做什么？

我在质疑，因为插件有很多BUG。例如，插件突然停止在我的 Mac 的 Chrome 中工作。我有这个问题大约 5 个月。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:53:03.227

不，这是不可能的。您必须使用 Javascript API。有一个 COM API，但现在已经过时了（http://googlegeodevelopers.blogspot.com.es/2010/08/sunset-for-google-earth-com-api.html）。我在 Mac 中使用带有 Chrome 的 Google Earth API，是的，它有一些错误，但我认为它是可用的。

# sql - 如何编写 SQL 查询以生成报告

> ID：13052209
> 
> 赞同：2
> 
> 时间：2012-10-24T15:17:27.717
> 
> 标签：sql

我需要根据下表生成报告：

```
CALLS_FOR_PROPOSALS

ID|Name 
--+------
 1|Call 1
 2|Call 2
 3|Call 3

PROPOSALS

ID|Call ID|Title
--+-------+----------
 1|      1|Proposal 1
 2|      2|Proposal 2
 3|      2|Proposal 3

PROPOSAL_STATUSES

ID|Proposal ID|Status ID
--+-----------+---------
 1|          1|        1
 2|          2|        1
 3|          3|        1
 4|          3|        2

STATUSES

ID|NAME
--+------------
 1|Not Reviewed
 2|Processing
 3|Accepted
 4|Rejected 
```

有了这个样本数据，就有 3 个提案征集。共有三个提案；一个用于呼叫 1，两个用于呼叫 2。（呼叫 3 没有任何提案。）每个提案至少分配有一个状态。当一行被插入到 PROPOSALS 表中时，相应的行被插入到 PROPOSAL_STATUSES 中，给提案一个初始默认状态 1（未审查）。每次状态更改时，都会在 PROPOSAL_STATUSES 表中插入一个新行，从而保留状态更改的历史记录。我需要生成一份报告，显示每个呼叫、提交的提案数量以及具有多个状态的提案数量（即状态已从默认值更改至少一次。）对于上面的示例数据，结果将如下所示：

```
Call Name|Proposals Submitted|Proposals Reviewed|
---------+-------------------+------------------+
Call 1   |                  1|                 0|
Call 2   |                  2|                 1|
Call 3   |                  0|                 0| 
```

我将如何编写 SQL 查询以根据上述表结构生成此报告？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:33:50.617

类似的东西应该可以解决问题：[Demo](http://sqlfiddle.com/#!2/47f60/21)

```
 SELECT Name as 'Call name', 
         submitted as 'Proposals Submitted',
         SUM(CASE WHEN maxStatus > 1 THEN 1 ELSE 0 END) as 'Proposals Reviewed'
FROM
   (SELECT cfp.Name, 
    sum(case when ps.Status_ID = 1 then 1 else 0 end) as submitted,
    MAX(ps.Status_ID) as maxStatus
    FROM CALLS_FOR_PROPOSALS cfp
    LEFT JOIN PROPOSALS p on cfp.ID = p.CALL_ID
    LEFT JOIN PROPOSAL_STATUSES ps on ps.PROPOSAL_ID = p.ID
    GROUP BY cfp.Name) AS s

GROUP BY Name, submitted 
```

# python - urllib2 不读取整个页面

> ID：13052211
> 
> 赞同：0
> 
> 时间：2012-10-24T15:17:34.207
> 
> 标签：python, http, html-parsing, urllib2

我拥有的用于解析网站的部分代码不起作用。

我可以将问题追溯到`.read`我的 urllib2.urlopen 对象的功能。

```
page = urllib2.urlopen('http://magiccards.info/us/en.html')
data = page.read() 
```

直到昨天，这还不错；但是现在数据的长度始终是 69496 而不是 122989，但是当我打开较小的页面时，我的代码可以正常工作。

我已经在 Ubuntu、Linux Mint 和 windows 7 上对此进行了测试。它们都有相同的行为。

我假设 Web 服务器上发生了一些变化；但是当我使用网络浏览器时页面是完整的。我试图用wireshark诊断问题，但页面被完整接收。

有人知道为什么会发生这种情况，或者我可以尝试确定问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:51:00.587

除非您请求编码为 gzip 的内容，否则该页面似乎行为不端。试一试：

```
import urllib2
import zlib

request = urllib2.Request('http://magiccards.info/us/en.html')
request.add_header('Accept-Encoding', 'gzip')
response = urllib2.urlopen(request)
data = zlib.decompress(response.read(), 16 + zlib.MAX_WBITS) 
```

正如 Nathan 建议的那样，您还可以使用出色的[Requests](http://docs.python-requests.org/)库，它默认接受 gzip。

```
import requests

data = requests.get('http://magiccards.info/us/en.html').text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:00:02.593

是的，服务器正在关闭连接，您需要`keep-alive`被发送。urllib2 没有那个功能（:-(）。曾经有一个[urlgrabber](https://stackoverflow.com/a/1037423/18852)，你可以使用它有一个与 urllib2 开启器一起工作的 HTTPHandler。但不幸的是，我发现它也不起作用。目前，你可能是其他库，像其他答案或[httplib2](http://code.google.com/p/httplib2/)中所示的请求。

```
import httplib2
h = httplib2.Http(".cache")
resp, content = h.request("http://magiccards.info/us/en.html", "GET")
print len(content) 
```

# java - 重新加载PropertyPlaceholderConfigurer

> ID：13052212
> 
> 赞同：1
> 
> 时间：2012-10-24T15:17:35.923
> 
> 标签：java, spring

出于某种原因，ReloadablePropertiesFactoryBean 似乎并没有达到我的预期。当我更改 test.properties 文件中的属性时，我收到一条日志消息：

```
9979 [timer] INFO com.krest.core.properties.ReloadablePropertiesFactoryBean - Reloading Properties... 
```

但由于某种原因，什么也没有发生。旧的属性值仍然在我的测试 bean 上设置。有人知道这是为什么吗？我使用 Spring 3，我的配置如下所示：

```
<bean id="configproperties"
    class="com.krest.core.properties.ReloadablePropertiesFactoryBean">
    <property name="location"
        value="classpath:test.properties" />
</bean>

<bean id="propertyConfigurer"
    class="com.krest.core.properties.ReloadingPropertyPlaceholderConfigurer">
    <property name="properties" ref="configproperties" />
    <property name="reloadingPlaceholderPrefix" value="rel{" />
    <property name="reloadingPlaceholderSuffix" value="}" />
</bean>

<bean id="mybean" class="nl.mycompany.TestBean">
    <property name="message" value="rel{timer-delay}" />
</bean>

<!-- regularly reload property files. -->
<bean id="timer" class="org.springframework.scheduling.timer.TimerFactoryBean">
    <property name="scheduledTimerTasks">
        <bean id="reloadProperties"
            class="org.springframework.scheduling.timer.ScheduledTimerTask">
            <property name="period" value="1000" />
            <property name="runnable">
                <bean class="com.krest.core.properties.ReloadConfiguration">
                    <property name="reconfigurableBeans">
                        <list>
                            <ref bean="configproperties" />
                        </list>
                    </property>
                </bean>
            </property>
        </bean>
    </property>
</bean> 
```

# javascript - 我做错了什么，还是这是一个错误？（打字稿/Visual Studio 2012）

> ID：13052214
> 
> 赞同：7
> 
> 时间：2012-10-24T15:17:45.593
> 
> 标签：javascript, asp.net, visual-studio, debugging, typescript

# 解决：

谢谢大家的帮助。我不确定究竟是什么原因造成的，但我重新启动了 Visual Studio，一切恢复正常。不知道为什么，但从（昨天）开始它就一直在工作。

* * *

我昨晚没有遇到这些问题（使用相同的代码 - 未更改）：

![在此处输入图像描述](../Images/9a372f2158ad1b4ef8552ed848360aac.png)

我不明白问题是什么。

我得到的错误是：

> [path/app.ts] SCRIPT1004 中第 1 行第 9 列的 JavaScript 严重错误：应为“；”。

什么平分？！

如果您看不到图像，则错误是指这一行： `declare var document;`

**更新**

将 TypeScript 编译为 JavaScript 后的 javascript 文件如下所示：

```
window.onload = function () {
    start();
};
function sayHello(msg) {
    return msg = "Hello, therel ol!";
}
function start() {
    var element = document.getElementById("link");
    element.addEventListener("click", function () {
        var element = document.getElementById("response").innerText = sayHello("Hi");
    }, false);
    if(XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
} 
```

如您所见，一切看起来都很好。我不明白为什么它会抛出这个错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T16:31:59.120

我的猜测是您`app.ts`错误地引用了页面上的文件，而您应该引用了该`app.js`文件。

我假设您在运行应用程序时遇到此错误，而不是在设计时。

IE

```
<script src="app.ts"></script> 
```

应该

```
<script src="app.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:47:57.240

您不需要声明文件 - 它应该已经被声明。它来自默认引用的虚拟 lib.d.ts 文件。

尝试注释掉声明行。

# arm - 摘要 SAD（绝对差和）的霓虹灯实现总线错误

> ID：13052217
> 
> 赞同：3
> 
> 时间：2012-10-24T15:17:51.180
> 
> 标签：arm, simd, neon

我正在尝试编写 16 个 uint8_t 大小的输入的绝对差和的霓虹灯版本：

```
inline static int f_sad_16(const uint8_t* a, const uint8_t* b)
{
  int sad = 0;
  for (int i = 0; i < 16; i++) {
    sad += abs(static_cast<int>(a[i]) - static_cast<int>(b[i]));
  }
  return sad;
} 
```

我写的霓虹灯代码：

```
inline static int f_sad_16_neon(const uint8_t* a, const uint8_t* b)
{
  int32_t r[4] = { 0, 0, 0, 0 };
  uint8x16_t va, vb, vr;

  va = vld1q_u8(a);
  vb = vld1q_u8(b);

  vr = vabdq_u8(va, vb);

  uint16x8_t vr1 = vpaddlq_u8 (vr );
  uint32x4_t vr2 = vpaddlq_u16(vr1);
  uint64x2_t vr3 = vpaddlq_u32(vr2);

  vst1q_u64 (reinterpret_cast<uint64_t*>(r), vr3);

  return r[0] + r[2];
} 
```

出于某种原因，我收到了总线错误。我的测试程序`__attribute__ ((aligned (16)))`对两个输入使用 gcc 指令，我可以通过分配给它们的内存地址看到输入是 16 字节对齐的。

问题的根源是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:12:33.140

您需要确保`r`正确对齐 - 更改：

```
int32_t r[4] = { 0, 0, 0, 0 }; 
```

到：

```
int32_t r[4] = { 0, 0, 0, 0 } __attribute__ ((aligned(16))); 
```

但是请注意，此例程不太可能有益，因为它使用了大量的标量和 NEON 指令，这意味着它很可能具有与原始标量实现相似的性能。

# django - 如何在 Django Formwizard 1.4 中动态重复步骤？

> ID：13052224
> 
> 赞同：5
> 
> 时间：2012-10-24T15:18:10.930
> 
> 标签：django, django-1.4, formwizard

我正在尝试根据步骤中的复选框有条件地重复 Django Formwizard (Django 1.4) 中的步骤。该表单创建了一个对象，并有一个复选框（希望如此），允许他们重复该步骤并使用相同的表单创建另一个相同模型的对象。

我看到了这个答案：[Django FormWizard Dynamically Alter form_list](https://stackoverflow.com/questions/2164303/django-formwizard-dynamically-alter-form-list)但不幸的是我认为它只适用于旧版本的 FormWizard。

process_step 函数不再具有 form_list 属性。它也没有当前步骤属性（或步骤属性），但我可以通过表单的 QueryDict 访问当前步骤。它包含一个表单字典，但我认为在该字典中插入另一个步骤不会做任何事情，不幸的是，因为它是一个字典而不是一个列表，我必须在插入它之后修改每个步骤键。

那么，有没有一种使用 Django 1.4 FormWizard 向表单列表中添加新步骤的好方法？

更新——开始认为覆盖 get_next_step(self, step) 可能是要走的路，但任何输入都非常感谢。

更新 #2 - 尝试使用 get_next_step，但无法将新表单插入实例的 form_list。并不意味着不可能——想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:00:22.750

嗯，我想通了。您可以覆盖 get_form_list 以将内容插入表单列表，但您必须将它们保存在 self.form_list 中，并且只返回 form_list。就我的目的而言，这没关系，但如果你也使用 conditional_dict，你必须在这里小心。

```
def get_form_list(self):
    s = self.storage.current_step                                                                
    s_data = self.get_cleaned_data_for_step(s) or {}                                             
    add_another = s_data.get('add_another', False)                                   
    if add_another is True:                                                                      
        index = self.form_list.keyOrder.index(s)+1                                               
        key = "add_another-{0}".format(index)
        self.form_list.insert(index, key,                                                        
                wizard_forms.Wizard4)                                                   
    form_list = super(Wizard, self).get_form_list()
    return form_list 
```

我可能会稍微清理一下，但这就是要点。前几行获取当前步骤并获得用于确定是否在此步骤之后插入另一个步骤的标志。如果该标志为真，我们将获取表单中当前步骤的索引，将其加一，然后在该索引处插入（在给定索引之前插入插入）。我们使用基于索引的键，这样无论该步骤重复多少次，我们都不会得到重叠的键。然后，我们将新步骤插入到 self.form_list 中，使其具有实例范围，在 self 上调用 get_form_list（它具有新的 self.form_list），并根据需要返回 form_list。

需要注意的一些事项：

*   您必须使用 self.storage.current_step 而不是 self.steps.current 因为后者会导致无限递归。
*   我们在初始化后使用 self.form_list 的事实意味着如果您使用 conditional_dict，事情可能会变得有点混乱。也就是说，他们很可能不会，因为 conditional_dict 将键分配给条件，并且我们的 form_list 中的键都没有改变，只有索引。

嗯，就是这样！显然，您需要在 done() 中添加一些逻辑来弄清楚如何保存每一个，但这特定于您正在做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:42:49.163

我发布的上一个答案非常不一致，我认为这是一些奇怪的会话冲突错误，但事实证明这是因为 get_form_list 并不总是及时调用需要表单的操作。我将相同的逻辑移到 get_next_step 中，现在可以顺利运行。

```
def get_next_step(self, step=None):
    if step is None:
        step = self.steps.current
    s_data = self.get_cleaned_data_for_step(step) or {}
    add_another = s_data.get('add_another', False)
    if add_another is True:
        index = self.form_list.keyOrder.index(step)+1
        key = "add-another-{0}".format(index)
        self.form_list.insert(index, key,
                wizard_forms.Wizard4)
    return super(Wizard, self).get_next_step(step) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:16:23.197

结论是，这是不可能的。我还没有完全弄清楚为什么它*有时会*与前两种解决方案一起工作，但是在深入研究表单向导的代码之后，很明显每个请求都会重新初始化实例表单列表（嗯，从技术上讲，它是一个新实例），并且因此，即使您在存储中更新列表，或在 get_form_list() 中更新它，也有*一些*调用直接命中实例变量而不是通过 get_form_list() 访问它，并且需要进行一些重大的重构来调整它。

我为这个项目选择了另一条路线，但可能很快会尝试为此组合一些东西。

# jquery - 单击事件未触发 CSS 指针事件：无

> ID：13052225
> 
> 赞同：1
> 
> 时间：2012-10-24T15:18:11.847
> 
> 标签：jquery, css

我有两张图像堆叠在一起。`img_top`设置了 'pointer-events: none'，所以点击它会将点击传递给`img_bottom`. 但是，如果我调用 jQuery 的`trigger('click')`on `img_top`，点击将不会传递到`img_bottom`.

`trigger('click')`任何人都可以解释为什么并找到一种使用 jQuery和 CSS将点击传递到底部图像的方法`pointer-events`吗？

这是我正在使用的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<style type="text/css">
    #img_holder {
        position: relative;
        width: 20px;
        height: 20px;
    }

    #img_bottom {
        position: absolute;
        background: url('/images/cross.png');
        width: 16px;
        height: 16px;
        z-index: 1;
    }

    #img_top {
        pointer-events: none;
        position: absolute;
        background: url('/images/tick.png');
        width: 16px;
        height: 16px;
        z-index: 2;
    }
</style>

<script type="text/javascript">
    $(document).ready(function() {
        $(document).click(function() {
            alert('clicked');
            $("img_top").trigger('click');
        });

        $("#img_bottom").click(function() {
            alert('success');
        });
    });
</script>

<div id="img_holder">
    <div id="img_top"></div>
    <div id="img_bottom"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:22:25.093

这是因为在 javascript 事件中，DOM 会冒泡。`img_bttom`是 的兄弟`img_top`，所以事件永远不会冒泡。

您可以手动强制它：

```
$("#img_top").click(function(event) {
    $("#img_botton").trigger(event);
}) 
```

# sql-server - 是否有任何 .NET ORM 或 ADO.NET 框架支持连接重试？

> ID：13052226
> 
> 赞同：0
> 
> 时间：2012-10-24T15:18:12.230
> 
> 标签：sql-server, orm, ado.net

我已经开始使用 SQL Server 2012 的 Always On 功能，并且在发生故障期间，服务器数据库连接在故障转移过渡期间关闭了大约 15 秒。

在此期间，执行过程中的所有查询和所有新连接都将失败......因此，如果客户端应用程序检测到正在发生故障转移，则理想情况下支持重试连接。

是否有任何框架或 ORM 可以自动处理这种情况？

# ruby - 用Ruby替换字符串中出现的最有效方法？

> ID：13052228
> 
> 赞同：0
> 
> 时间：2012-10-24T15:18:14.113
> 
> 标签：ruby, json

我正在努力用 中的值替换环境变量`Ruby`，并试图找出最好的方法来做到这一点。我有一个`JSON`正在解析的提要，看起来像这样：`%MY_SERVER/json/data/mydata?someparameter`另一个看起来像`%MY_OTHER_SERVER/json/data/mydata?somethingdifferent=thisorthat`

每个服务器都有不同`URL`的需要输入。我环顾四周，看到谈论使用`replace`或寻找特定模式的事情，但我认为这不是最有效的方法。

谁能指出我正确的方向，或者就完成任务的最佳方式提供一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:28:58.170

我认为您正在寻找一种有效的方法

```
myString = "%MY_SERVER/json/data/mydata?someparameter"
myString.gsub!("%MY_SERVER",  ENV['MY_SERVER']) 
```

我认为这是最好的方法。我认为使用 gsub 比使用更快

```
myString["%MY_SERVER"] = ENV['MY_SERVER'] 
```

尽管

```
myString.replace 
```

将替换整个字符串，您不想使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:37:42.783

这是您寻求的动态方法：

```
urls = [
  '%MY_SERVER/json/data/mydata?someparameter',
  '%MY_OTHER_SERVER/json/data/mydata?somethingdifferent=thisorthat'
  ]

name_regex = /(%\w+)/

ENV['%MY_SERVER'] = 'http://google.com'

replaced = urls.map do |s|
  s.gsub name_regex do |env_name|
    if ENV[env_name]
      ENV[env_name] # replace
    else
      env_name # leave it untouched
    end

    # or, the same thing, but shorter
    # ENV[env_name] || env_name
  end
end

puts replaced
# >> http://google.com/json/data/mydata?someparameter
# >> %MY_OTHER_SERVER/json/data/mydata?somethingdifferent=thisorthat 
```

你只需要扫描你的输入字符串并找到所有看起来像占位符的东西。幸运的是，您的字符串格式清晰。然后，您只需在`ENV`. 如果占位符的值缺失，则不会被替换。

# file - 期望将写入文件

> ID：13052232
> 
> 赞同：1
> 
> 时间：2012-10-24T15:18:20.820
> 
> 标签：file, bash, expect, channel, puts

我正在编写一个期望脚本，它将 ssh 到几个 IP 以测试它们的连接性。我想包含一个“puts”语句，将每个测试的结果写入调用脚本的机器上的文件中。尽管我认为我正在遵循将 put 写入文件的手册，但它只写入 stdout。请参阅下面的脚本。最终结果是文件是在本地机器上创建的，但没有输出指向它。相反，输出到标准输出。

```
#!/bin/bash

USER=user
PASSWORD=password
IPSTART=12.34.56.
OUTFILE="TEST.log"
PROMPT="#"

for IPEND in `seq 200 231`
do

expect -c "
        set timeout 3
        set chan [open $OUTFILE w]
        spawn ssh $USER@$IPSTART$IPEND
                expect -re \".*ssword.*\" {send \"$PASSWORD\n\"}

                expect {
                        -re \".*Are you sure you want to continue connecting.*\" {send \"yes\n\"; exp_continue}
                        -re \".*$PROMPT.*\$.*\"  {puts $chan \"$IPSTART$IPEND\n\"; send \"exit\n\"}
                }

        close $chan
"

done 
```

我想知道引用是否有问题，但我无法弄清楚。

作为参考，这是来自[http://www.tcl.tk/man/tcl8.4/TclCmd/puts.htm的示例](http://www.tcl.tk/man/tcl8.4/TclCmd/puts.htm)

```
set chan [open my.log a]
set timestamp [clock format [clock seconds]]
puts $chan "$timestamp - Hello, World!"
close $chan 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:14:22.260

You're probable problem was that you were using double-quotes. Therefore you should escape the literal `$` that will be passed to expect (ie. `\$chan`):

```
#!/bin/bash

USER=user
PASSWORD=password
IPSTART=12.34.56.
OUTFILE="TEST.log"
PROMPT="#"

for IPEND in `seq 200 231`
do

expect -c "
        set timeout 3
        set chan [open $OUTFILE w]
        spawn ssh $USER@$IPSTART$IPEND
                expect -re \".*ssword.*\" {send \"$PASSWORD\n\"}

                expect {
                        -re \".*Are you sure you want to continue connecting.*\" {send \"yes\n\"; exp_continue}
                        -re \".*$PROMPT.*\$.*\"  {puts \$chan \"$IPSTART$IPEND\n\"; send \"exit\n\"}
                }

        close $chan
"

done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:09:33.597

好吧，我无法弄清楚如何在 bash 中执行此操作，因此我将整个脚本更改为期望。现在可以了。

```
#!/bin/expect

set USER "user"
set PASSWORD "password"
set IPSTART "12.34.56."
set OUTFILE "TEST.log"
set PROMPT "#"
set CHAN [open $OUTFILE w]

for {set IPEND 200} {$IPEND <= 231} {incr IPEND} {
        spawn ssh $USER@$IPSTART$IPEND
                set timeout 3
                expect {
                        -re ".*ssword.*" {send "$PASSWORD\n"}
                        timeout {puts $CHAN "$IPSTART$IPEND does not work"}
                }

                expect {
                        -re ".*Are you sure you want to continue connecting.*" {send "yes\n"; exp_continue}
                        -re ".*$PROMPT.*\$.*"  {puts $CHAN "$IPSTART$IPEND works"; send "exit\n"}
                }
}

close $CHAN 
```

# c# - 无法注册时间触发的后台任务

> ID：13052242
> 
> 赞同：9
> 
> 时间：2012-10-24T15:18:53.363
> 
> 标签：c#, windows-8, microsoft-metro

对于 Windows 8 应用程序，我尝试在 C#/Xaml 中注册后台任务。很难说，但我猜我的后台任务注册得很好，但是当我在调试位置工具栏上单击我的后台任务的名称时，我的应用程序停止工作而没有任何消息。

我查看了事件查看器上的日志，我得到：“具有入口点 MyApp.Pages.SampleBackgroundTask 和名称示例每小时后台任务的后台任务无法激活，错误代码为 0x80010008。”

这是我的代码：

```
 private async void Button_Click_BackgroundTask(object sender, RoutedEventArgs e)
    {
        string entryPoint = "MyApp.Pages.SampleBackgroundTask";
        string taskName = "Example hourly background task";
        TimeTrigger hourlyTrigger = new TimeTrigger(60, false);

        BackgroundTaskRegistration myBackGroundTaskRegistration =   RegisterBackgroundTask(entryPoint, taskName, hourlyTrigger, null);
        if(myBackGroundTaskRegistration != null)
        AttachProgressAndCompletedHandlers(myBackGroundTaskRegistration);
    }

   public static BackgroundTaskRegistration RegisterBackgroundTask(String taskEntryPoint,
                                                                    String name,
                                                                    IBackgroundTrigger trigger,
                                                                    IBackgroundCondition condition)
    {

        var taskRegistered = false;
        var iter = Windows.ApplicationModel.Background.BackgroundTaskRegistration.AllTasks;

        foreach (var item in iter)
        {
            var task = item.Value;
            if (task.Name == name)
            {
                taskRegistered = true;
                return item.Value as BackgroundTaskRegistration;
            }
        }

        var builder = new BackgroundTaskBuilder();

        builder.Name = name;
        builder.TaskEntryPoint = taskEntryPoint;
        builder.SetTrigger(trigger);

        if (condition != null)
        {

            builder.AddCondition(condition);
        }

        BackgroundTaskRegistration taskBack = builder.Register();

        return taskBack;
    }

       private void AttachProgressAndCompletedHandlers(IBackgroundTaskRegistration task)
    {
        task.Progress += new BackgroundTaskProgressEventHandler(OnProgress);
        task.Completed += new BackgroundTaskCompletedEventHandler(OnCompleted);
    }

  private void OnProgress(IBackgroundTaskRegistration task, BackgroundTaskProgressEventArgs args)
    {
        var progress = "Progress: " + args.Progress + "%";

    }

    private void OnCompleted(IBackgroundTaskRegistration task, BackgroundTaskCompletedEventArgs args)
    {
        Debug.WriteLine("Hi");
    } 
```

我在清单中添加了这个：

```
 <Extension Category="windows.backgroundTasks" EntryPoint="MyApp.Pages.SampleBackgroundTask">
      <BackgroundTasks>
        <Task Type="timer" />
      </BackgroundTasks>
    </Extension> 
```

我是不是忘记了什么？

谢谢您的帮助。

编辑：这是我的任务的代码，在我的项目页面之一中：

```
 public sealed class SampleBackgroundTask : IBackgroundTask
{
    public void Run(IBackgroundTaskInstance taskInstance)
    {
        BackgroundTaskDeferral _deferral = taskInstance.GetDeferral();

        _deferral.Complete();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T03:19:23.943

我也有这个问题。我在同一个项目中也有我的。我终于通过将任务转移到一个单独的项目中来实现它。我必须将项目输出设置为 Windows 运行时组件（在属性应用程序选项卡下）。也不要忘记添加项目作为参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T09:15:11.230

在运行 BackgroundTask 之前，您需要用户权限，您可以手动执行此操作：打开应用程序并单击 Settings Charm 中的 Permissions 并打开 Lock screen 设置。

您还可以在第一个屏幕加载时提示用户：

```
BackgroundAccessStatus status = await BackgroundExecutionManager.RequestAccessAsync(); 
```

毋庸置疑，后者将带来更好的用户体验。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-05T08:55:44.567

两年后，现在是 Windows 10 中的 WinRT，Visual Studio 2015。同样的问题。

提问者表示他们的后台任务驻留在同一个项目中。那行不通：[这里](https://visualstudiomagazine.com/Articles/2013/05/01/Background-Tasks-in-Windows-Store-Apps.aspx?Page=2 "Windows 应用商店应用中的后台任务")有一篇关于后台任务的非常详尽的文章。此外，正如 Tim 所指出的，必须首先调用 BackgroundExecutionManager.RequestAccessAsync()。但是，从 8.1 开始，如果省略它，[则在这种情况下后台任务注册将失败](https://msdn.microsoft.com/en-au/library/windows/apps/windows.applicationmodel.background.backgroundtaskbuilder.register)，因此您永远不会到达任务触发失败的地方。

总结一下要求：

*   'await BackgroundExecutionManager.RequestAccessAsync()' 首先
*   任务类必须在 Windows 运行时组件项目中
*   调用应用程序中必须引用 Windows 运行时组件项目
*   任务类必须像上面一样在应用程序的清单中声明，具有完整的命名空间名称
*   Windows 运行时组件项目和使用它的应用程序必须面向相同的 Windows 版本。Visual Studio 中的解决方案资源管理器 -> 右键单击​​项目 -> 属性 -> 应用程序。库选项卡 -> 目标 -> 目标和目标版本。

在我的示例中，我肯定已经完成了所有这些，但不会触发任务。调试跟踪显示“程序 '[0x72C] backgroundTaskHost.exe' 已以代码 1 退出”，调试器因 ExecutionEngineException 而中断，并且目标计算机的事件日志（应用程序和服务日志 -> Microsoft -> Windows -> BackgroundTaskInfrastructure -> Operational) 列出了各种创意完全无证的 windows 错误代码：

“具有入口点和名称的后台任务无法激活，错误代码为 0x8007001F（分别为 0x800706BE / 0x80131509）。”

失败是不稳定的：起初，它们很少发生，并且在连续几次程序运行后变得更糟，直到后台任务不再被调用。

当后台任务的命名空间名称发生变化时（在所有的任务注册、包清单和代码中），这首先修复了错误，然后随着时间的推移变得更糟。

这种情况下的特殊情况是应用程序是在远程目标机器上开发并使用远程调试器进行调试的。在每次调试器运行之前删除应用程序包可以消除错误。

因此，运行后台任务（0x8007001F / 0x800706BE / 0x80131509）时出现的这些错误似乎与未正确找到已注册的任务有关。确保正确取消注册任务并在运行新修改之前删除应用程序包可能会有所帮助。PowerShell命令：

```
Get-AppPackage | where name -eq <myAppPackageGuid> | Remove-AppPackage 
```

只是在这里记录一下，以防有人遇到同样的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T09:02:09.423

在参考和重建时将您的后台任务项目添加到主项目中。它会起作用的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-27T11:37:35.940

我在编写后台任务时遇到的问题是，在 Windows 10 中的设置->隐私->后台应用程序下，我必须启用允许应用程序在后台运行的选项。希望这对某人有帮助！

# sql-server-2008 - 对 MDX 交叉连接进行排序

> ID：13052244
> 
> 赞同：0
> 
> 时间：2012-10-24T15:19:01.837
> 
> 标签：sql-server-2008, ssis, mdx

我是 MDX 的新手，所以请耐心等待。

我已经交叉连接了两个维度，以便我可以在列中报告销售和目标（来自销售维度）和上周和去年本周（来自日期维度）的列和行中列出的位置。

伪代码..

```
Select 
    {[DateDim].[ReportingPeriod].[Week].&[2012]&[20],
     [DateDim].[ReportingPeriod].[Week].&[2013]&[20]}
    *
    {[Measures].[Total Sales],[Measures].[Target]} on Columns,

    DrillDownLevel([LocationDim].[LocationName].[All]) on Rows from [MyCube] 
```

我如何按今年的销售额对结果进行排序？(.. `[2013].[20]`)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:09:38.317

啊哈，搞定了！

答案是单独计算图形，然后在 order 函数中引用它

```
With Member SalesTY as
    SUM([Measures].[Total Sales,[DateDim].[ReportingPeriod].[Week].&[2013]&[20])

Select 
    {[DateDim].[ReportingPeriod].[Week].&[2012]&[20],
     [DateDim].[ReportingPeriod].[Week].&[2013]&[20]}
    *
    {[Measures].[Total Sales],[Measures].[Target]} on Columns,

    Order([LocationDim].[LocationName].[LocationName],SalesTY,DESC) on Rows from [MyCube] 
```

# android - Android：无法调试文件写入代码，因为我的 SD 卡已安装

> ID：13052247
> 
> 赞同：1
> 
> 时间：2012-10-24T15:19:14.440
> 
> 标签：android, debugging, sd-card, android-sdcard

我正在我的应用程序中编写一个临时文件下载器。该文件下载器正在崩溃。问题是：我无法调试它，因为当手机连接到电脑时，SD卡被锁定，无法写入文件。也就是说，它因此而崩溃，这就是我看到的错误 - 隐藏导致它在未安装时崩溃的实际错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:31:29.257

您应该在使用之前检查是否安装了 SD 卡：

```
if (android.os.Environment.getExternalStorageState().equals(
                        android.os.Environment.MEDIA_MOUNTED)) {

      // ok, you can use SD card...
} 
```

正如上述评论所述，在某些设备上，来自主机的 SD 卡访问可能会阻止设备对其的访问。同样以防万一，请确保您的清单也请求 SD 卡权限。

# c# - 排序方法并将结果写入 textFile

> ID：13052249
> 
> 赞同：0
> 
> 时间：2012-10-24T15:19:21.097
> 
> 标签：c#, winforms

我正在使用排序方法和随机。 `Button1`创建参数随机化数字、大小和最大数量限制。然后根据选择的线性方法，`Button2`对这些数字进行排序，然后使用秒表计时花费了多长时间。我目前正在实施以 在文本文件中显示: `sort method`、`size`和。所以我已经完成了第一部分，当程序加载时，我已经提示用户创建一个文件来存储结果。 `time_tosort``number of operations`

我可以通过哪些方法将结果附加到 textFile 并对结果进行平均？我还需要在用户完成排序后添加一个按钮来关闭写入功能吗？

**所需格式的示例** ：`sort method`、`size`和`time_tosort``number of operations`

```
Linear 10000 .9 100,000,000
Linear 10000 .8 110,000,000
Linear 10000 .75 150,000,000
Linear 10000 .50 70,000,000
Linear 10000 .7375  107,500,000 ---- AVG 
```

**代码**

```
namespace sortMachine
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();

        }

        private void Save()
        {
            var saveReport = new SaveFileDialog();
            saveReport.Filter = "Text Files | *.txt";
            var result = saveReport.ShowDialog();

            if (result == DialogResult.Cancel || string.IsNullOrWhiteSpace(saveReport.FileName))
                return;

            using (var writer = new StreamWriter(saveReport.FileName))
            {
                writer.Write(textBox1.Text);
                writer.Close();
            }
        }

        private List<string> messages = new List<string>() { "Linear", "Bubble", "Index", "Other" };
        private int clickCount = 0;

        Stopwatch sw = new Stopwatch();

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {

            }
            else if (textBox7.Text == "Bubble")
            {
            }
            else if (textBox7.Text == "Index")
            {
            }
            else if (textBox7.Text == "Other")
            {
            }
            else if (textBox7.Text == "")
            {
                MessageBox.Show("Please input a sorting method");
            }
        }

    private void Form1_Load(object sender, EventArgs e)
    {
        Save();
    }

    private void button3_Click(object sender, EventArgs e)
    {
        textBox7.Text = messages[clickCount];
        clickCount++;
        if (clickCount == messages.Count)
            clickCount = 0;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:46:36.007

我没有查看所有代码，但是您的问题有~~两个~~ **三个**部分：

**如何对结果进行排序/平均？** 获得`List`结果后，您可以调用[`.Average()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.average.aspx)、[`.OrderBy()`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)等。这些是`System.Linq`命名空间的一部分。[（这里](http://msdn.microsoft.com/en-us/library/bb341635.aspx)有用功能的完整列表。）

**如何将其输出到文本文件？**看一下`File.IO`命名空间。 [这是一个指南](http://support.microsoft.com/kb/304430)。

**如何获取结果的数据？**你最好的选择是创建一个新类：

```
class SortData
{
   public string SortMethod;
   public int Size;
   public TimeSpan TimeToSort;
   public int NumberOfOperations;
} 
```

创建一个`List<SortData>`并将所有结果放在那里，每个结果都作为`new SortData()`. 然后你可以按照以下方式做一些事情：

```
foreach (var data in myList)
{
   Console.WriteLine(SortMethod + "\t" + Size + "\t" + TimeToSort + "\t" + NumberOfOperations);
} 
```

您需要输出到文件而不是控制台，但想法是一样的。

# c++ - 类未定义引用

> ID：13052250
> 
> 赞同：1
> 
> 时间：2012-10-24T15:19:21.247
> 
> 标签：c++, class, reference, codeblocks, linker-warning

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

这应该是一个简单的问题，但我仍然有问题。我看过类似的问题，但它们似乎比我要找的要复杂一些。

我正在使用 Code::Blocks 10.05。

我收到了对我的类文件的未定义引用。我知道这是一个链接器错误，但我不确定如何修复它。我很害怕我对链接文件不太了解。

```
s\Desktop\the cool container\Test 1\Class2.o:Class2.cpp|| undefined reference to `Burrito::Burrito()'|
||=== Build finished: 1 errors, 0 warnings ===| 
```

我所有的文件都在同一个文件夹中。我的对象什么都不做，我只是在尝试，我不应该因为从另一个类创建对象而出错。

是的，这是来自 TheNewBoston 的教程......他能够完成这项工作，所以我应该能够让它工作。

如果我包含`#include "Burrito.cpp"`在 Class2.cpp 中，那么它可以工作，但他没有包含。

------------Class2.cpp------

```
#include <iostream>
#include "Burrito.h"
using namespace std;
int main(){

  Burrito Bo;
    return 0;
} 
```

---------------Burrito.h----------------

```
#ifndef BURRITO_H
#define BURRITO_H

class Burrito
{
    public:
        Burrito();

};

#endif // BURRITO_H 
```

---------------Burrito.cpp------

```
#include "Burrito.h"
#include<iostream>

using namespace std;
Burrito::Burrito()
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:27:43.580

> 如果我包含`#include "Burrito.cpp"`在 Class2.cpp 中，那么它可以工作，但他没有包含。

这很少（我会说永远不会）解决方案。不要`#include`在其他源文件中应该是源文件。解决方案是编译所有需要编译的文件，让链接器处理链接问题。

你没有编译 Burrito.cpp，所以你当然有链接问题。解决方案很简单：编译 Burrito.cpp 并将 Burrito.o 添加到您提供给链接器的文件集中。或者，您可以将 Class2.cpp 和 Burrito.cpp 都提供给编译器，创建一个可执行文件而不是目标文件作为输出。

# c# - 对字符串 00:00:00 的数组进行排序

> ID：13052251
> 
> 赞同：0
> 
> 时间：2012-10-24T15:19:20.553
> 
> 标签：c#, string

我有一些像

“00:00:00”

“00:02:00”

“00:07:02”

像 AZ 一样对它进行排序的最佳方法是什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:27:17.657

我猜数据类型是 a `TimeSpan`，在这种情况下你可以使用

```
var sortedArray = myArray.OrderBy(TimeSpan.Parse); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T15:23:23.693

我很懒所以我可能会这样：

```
string[] array = new string[] { "00:03:00", "00:00:00" };
Array.Sort(array); 
```

# ajax - wicket ajax 隐藏/取消隐藏可重复使用的面板而不提交表单

> ID：13052253
> 
> 赞同：3
> 
> 时间：2012-10-24T15:19:32.630
> 
> 标签：ajax, wicket, panel, behavior

我准备了一个可重复使用的面板并将其添加到我的页面中。我的页面表单中有 2 个下拉选项。[我使用来自https://cwiki.apache.org/WICKET/dropdownchoice-examples.html#DropDownChoiceExamples](https://cwiki.apache.org/WICKET/dropdownchoice-examples.html#DropDownChoiceExamples-Note)的 ajax 示例 - 注意两个 DDC 工作正常（更改一个值然后隐藏/取消隐藏另一个。但它不适用于我面板。我正在使用：

```
private final MyPanel panel1 = new MyPanel ("MyPanel"); 
panel1.setOutputMarkupPlaceholderTag(true); 
```

...在 DDC1 ajax 行为方法中：

```
onUpdate(AjaxRequestTarget target) { ...
    DDC2.setVisible(true); 
    panel1.setVisible(true); 
} 
```

我必须提交表单以隐藏/取消隐藏`panel1`。如何使其以与`DDC2`不提交表单相同的方式工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T15:31:28.493

你需要 ：

```
panel1.setOutputMarkupId(true); 
```

这

```
panel1.setOutputMarkupPlaceholderTag(true); 
```

实际上，Ajax 工作并不总是需要你所拥有的，但是从客户端进行刷新驱动时需要它。据我所知，它不会伤害任何东西......

在行为中，您需要告诉目标刷新它：

```
onUpdate(AjaxRequestTarget target) { ...
    DDC2.setVisible(true); 
    panel1.setVisible(true);
    target.addComponent(DDC2);
    target.addComponent(panel1); 
} 
```

# sql-server - 从由 sqoop 导入创建的 hive 表中导出 sqoop

> ID：13052255
> 
> 赞同：0
> 
> 时间：2012-10-24T15:19:39.467
> 
> 标签：sql-server, hadoop, export, sqoop

我已经使用 Cloudera CDH4.1 上的 SQOOP 成功地将一个简单的 2 列 SQL Server 数据导入 HIVE。- id (int) - 描述 (varchar(50))

当我尝试让同一个 HIVE 表返回到 SQL Server 时，它会将两列合并在一起，因此会创建一个 NumberFormatException。

我已经尝试了 --fields-terminated by \t --lines-terminated-by \n 但这没有任何区别。

我还尝试导出 Cloudera 提供的 sample_08 Hive 表，但得到 NoSuchElement 异常。希望它能给出它认为不存在的元素的线索！

我确保表结构和字段名称在两边都相同，包括大小写和下划线。

我可以导出一个单列表，但对于如何解决这个问题绝对感到困惑。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:08:21.857

参数 --filds-terminated-by 和 --lines-terminated-by 仅在“导入”操作期间使用。您需要使用参数 --input-fields-terminated-by 和 --input-lines-terminated-by 在“导出”情况下执行相同操作。

您介意共享整个异常堆栈跟踪以及可能触发您的问题的数据示例集吗？

# fonts - 使用 Wix 安装字体而不是本地字体文件夹

> ID：13052258
> 
> 赞同：19
> 
> 时间：2012-10-24T15:19:44.677
> 
> 标签：fonts, wix

我正在使用 Wix 为网站创建安装。

添加字体时，WiX 会选择 .ttf 扩展名并要求您将其安装到本地字体文件夹（使用 Directory Id="FontsFolder" 和 TrueType="yes" 时）。如果您删除这些属性，它就会崩溃。

有没有办法让 WiX 将字体安装到自定义文件夹 (../Content/fonts/) 而不会抱怨？

编辑：

```
 <Directory Id="dirFontsFolder" Name="fonts">
       <Component Id="cfont.ttf" Guid="BDEBACC8-D057-4406-87B9-B310BA6DFE27">
           <File Id="font.ttf" Source="$(var.SrcWebsite)\Content\fonts\font.ttf" KeyPath="yes" />
       </Component>
   </Directory> 
```

使用上面的代码，我得到了错误：

错误 LGHT1076：ICE60：文件 font.ttf 不是字体，它的版本不是伴随文件参考。它应该具有在语言列中指定的语言。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T12:52:47.800

几个月后提出问题后，我们设法找到了问题：

KeyPath 解决方案是答案的一半（参见 Alex 的答案）。如果不使用 WiX 中的 KeyPath 属性，以下解决方案将不起作用。

另一部分是 WiX 在打包 MSI 时通过链接器 (light.exe) 运行的内部一致性评估器 (ICE)。ICE 规则 ICE07，检查文件的内容，如果确定文件是字体，将强制文件在 Windows/Fonts 中。

要阻止这种情况发生，您需要在 light.exe 运行时禁用此规则。为此，您需要在 light.exe 之后添加 -sice: 参数。对于我们的示例，它将是：

```
light.exe -sice:ICE07 
```

您可以通过添加更多 -sice 参数来禁用多个规则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-03T15:46:20.600

您可以使用 VS 实现相同的目标：

右键单击设置项目，单击属性。

选择工具设置选项卡。

在 ICE 验证部分，您可以禁止所有警告，或特定的一个 ICEXX，在这种情况下

[冰60]

或者

在同一个 TAB（工具设置）上，您可以向编译器或链接器添加其他参数。所以，在链接器部分只需添加

[-sice:ICE60]

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-12T10:06:55.873

对于**引导 glyphicons_halflings.ttf**字体的特定情况，该字体通过设计放入网站的字体文件夹，此解决方案在**不抑制 ICE07 警告**的情况下工作：

因为您还将同时安装匹配的 woff、eot 和 svg webfonts，您可以指定 TTF 文件有一个伴随文件而不是 TrueType 字体。

如果您天真地创建一个 WiX 片段以将 Halflings 字体文件添加到您的站点字体文件夹，如下所示：（根据需要替换部分 GUID）

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="WebsiteFontsDir">
            <Component Id="CMP_WebsiteFonts" Guid="{********-482C-4924-B06E-9FAC34F89D1D}" KeyPath="yes">
                <File Id="glyphicons_halflings_regular.eot" Source="$(var.ViewerModule.TargetDir)Police\fonts\glyphicons-halflings-regular.eot" />
                <File Id="glyphicons_halflings_regular.svg" Source="$(var.ViewerModule.TargetDir)Police\fonts\glyphicons-halflings-regular.svg" />
                <File Id="glyphicons_halflings_regular.woff" Source="$(var.ViewerModule.TargetDir)Police\fonts\glyphicons-halflings-regular.woff" />
            </Component>
            <Component Id="CMP_WebsiteFonts2" Guid="{********-BFFE-441D-B8F4-156DD596B09F}" KeyPath="yes">
                <File Id="glyphicons_halflings_regular.ttf" Source="$(var.ViewerModule.TargetDir)Police\fonts\glyphicons-halflings-regular.ttf" DefaultVersion="1.001" TrueType="yes" />
            </Component>
     </DirectoryRef>
</Fragment> 
```

它将文件添加到正确的位置，但构建您的解决方案将产生一个**ICE07**验证警告，抱怨 TTF 字体文件必须放在 Windows 字体文件夹中。

鉴于这是一种网络字体，不应该去那里，这很烦人，但幸运的是，因为它是一种网络字体，你需要它以多种格式来安抚 IE、Edge、Chrome、Firefox 等......这意味着你可以制作使用存在的非 TTF 字体变体来消除警告。

像这样重构片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="WebsiteFontsDir">
            <Component Id="CMP_WebsiteFonts" Guid="{********-482C-4924-B06E-9FAC34F89D1D}" KeyPath="yes">
                <File Id="glyphicons_halflings_regular.eot" Source="$(var.AZViewerModule.TargetDir)fonts\glyphicons-halflings-regular.eot" />
                <File Id="glyphicons_halflings_regular.svg" Source="$(var.AZViewerModule.TargetDir)fonts\glyphicons-halflings-regular.svg" />
                <File Id="glyphicons_halflings_regular.woff" Source="$(var.AZViewerModule.TargetDir)fonts\glyphicons-halflings-regular.woff" />
            </Component>
            <Component Id="CMP_WebsiteFonts2" Guid="{********-BFFE-441D-B8F4-156DD596B09F}">
                <File Id="glyphicons_halflings_regular.ttf" 
                  Source="$(var.ViewerModule.TargetDir)fonts\glyphicons-halflings-regular.ttf" 
                  TrueType="no" 
                  KeyPath="no"
                  CompanionFile="glyphicons_halflings_regular.eot"/>
            </Component>
        </DirectoryRef>
    </Fragment>
</Wix> 
```

在这里，我们否认它是 TTF 字体，并为其提供一个伴随文件，该文件是其他 Web 字体文件之一。一切都安装在您期望的位置，并且不会产生 ICE07。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T08:00:42.840

```
<Directory Id="WixWorkshop" Name="WixWorkshop">
  <Component Id="Component1" Guid="DE1705EF-B96A-4746-AA9F-2C9D598E7D08">
    <File Id="File1" Name="arial.ttf" Source="arial.ttf" KeyPath="yes"/>
  </Component>
</Directory> 
```

效果很好 - 任何组件都应该引用目录

# adobe - ClientLibraryFolder 类型的 embed[] 和 dependencies[] 有什么区别？

> ID：13052261
> 
> 赞同：23
> 
> 时间：2012-10-24T15:19:53.720
> 
> 标签：adobe, aem

我曾多次尝试将多个类别交替添加到 embed[] 和 dependencies[] 中。但我总是在网站上看到 JavaScript 中的依赖项解析错误。

另外，如何在像 embed[] 这样的多值条目中指定类别的顺序？有什么方法可以控制网站启动期间加载的 JavaScript 源代码的顺序？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-07T17:47:16.087

`categories`是要在其下发布 clientlib 的标识符列表。

`dependencies`应该会导致您的页面对*其他*客户端库有额外的请求（外部“订阅”）

`embed`应该将那些其他客户端库“聚合”到当前客户端库中（内部订阅）

这两个属性都可以有多个值，并且 CRXDE Lite 接口允许更改值列表中项目的顺序。

给定客户端库：

*   /etc/clientlibs/depA 类别=[“depA”]
*   /etc/clientlibs/depB 类别=[“depB”]
*   /etc/clientlibs/depC 类别=[“depC”]
*   /etc/clientlibs/useA 类别=[“useA”]，依赖项=[“depA”，“depB”]
*   /etc/clientlibs/useB categories=["useB"], embed=["depB", "depC"]

如果页面使用 "useA" `<cq:includeClientLib categories="useA"/>`，那么 HTML 应该有对 depA、depB、useA 的请求（通过它们适当的 url，即`/etc/clientlibs/depA.css`

如果页面使用 "useB" `<cq:includeClientLib categories="useB"/>`，则 HTML 应该只有对 useB 的请求。的内容`/etc/clientlibs/useB.css`将是 depB、depC、useB 的内容的串联。

{localhost} 的库管理器`/system/console/configMgr/com.day.cq.widget.impl.HtmlLibraryManagerImpl`具有调试配置，以确定请求是否实际连接。这记录在[http://dev.day.com/docs/en/cq/current/deploying/configuring_osgi.html#par_variable_18](http://dev.day.com/docs/en/cq/current/deploying/configuring_osgi.html#par_variable_18)

要定义多个依赖项（假设您使用 maven 从文件系统构建并安装到 CQ5 中），clientlibs 文件夹将有一个文件“.content.xml”，该文件需要以下属性：

```
dependencies="[depB,depC]" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-15T13:33:13.120

要检查嵌入所需的客户端库，您可以使用来自以下网址的 ClientLibs Optimizer Tool：[https](https://adobe-consulting-services.github.io/acs-aem-tools/features/clientlibs-optimizer/index.html) ://adobe-consulting-services.github.io/acs-aem-tools/features/clientlibs-optimizer/index.html 它还为您提供您应该保留嵌入客户端库的顺序

# asana - 知道何时有新任务或更新任务的触发器？

> ID：13052265
> 
> 赞同：1
> 
> 时间：2012-10-24T15:20:05.390
> 
> 标签：asana

我正在开发 chrome 扩展程序，以便在有特定的新任务时收到通知。目前，这样做的唯一方法是每 X 秒查询一次体式。

有一个可以被asana直接调用的触发url不是很好吗？或者类似的东西有实时应用程序？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:33:27.583

此解决方案不适用于 Chrome 扩展程序，但可以帮助其他人在任务更改时尝试触发操作。

添加一个“虚拟”电子邮件地址作为关注者，这是一个由应用程序监控的系统电子邮件地址，该应用程序扫描电子邮件正文以找出哪个任务已被修改。

这不是一个很好的解决方案，但在 Asana 给我们某种钩子之前可能会有所帮助。

问候，韦恩·温德拉姆

# c# - 在 C# 中，我有一个子网位，需要创建一个子网掩码。我该怎么做？

> ID：13052267
> 
> 赞同：0
> 
> 时间：2012-10-24T15:20:07.933
> 
> 标签：c#, cisco, subnet

我有一个任务要在 C# 中完成。我有一个子网名称：192.168.10.0/24

我需要找到子网掩码，在本例中为 255.255.255.0。

但是，我需要能够在不使用 System.Net 库的情况下在 C# 中执行此操作（我正在编程的系统无法访问该库）。

看起来这个过程应该是这样的：

1) 将子网名称拆分为数字和位。

2）将位推入我在 SO 上找到的这个（感谢[将子网掩码“/”表示法转换为 Cisco 0.0.0.0 标准](https://stackoverflow.com/questions/3151431/converting-subnet-mask-notation-to-cisco-0-0-0-0-standard)）：

```
var cidr = 24; // e.g., "/24" 
var zeroBits = 32 - cidr; // the number of zero bits 
var result = uint.MaxValue; // all ones 

// Shift "cidr" and subtract one to create "cidr" one bits; 
//  then move them left the number of zero bits. 
result &= (uint)((((ulong)0x1 << cidr) - 1) << zeroBits); 

// Note that the result is in host order, so we'd have to convert 
//  like this before passing to an IPAddress constructor 
result = (uint)IPAddress.HostToNetworkOrder((int)result); 
```

但是，我遇到的问题是我无法访问我正在工作的系统中包含 IPAddress.HostToNetworkOrder 命令的库。另外，我的 C# 很差。有没有人有 C# 知识可以提供帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:46:58.163

您可以将该方法替换为以下内容：

```
static void ToNetworkByteOrder(ref uint n) {
    if(BitConverter.IsLittleEndian) {
        // need to flip it
        n = (
            (n << 24)
            |
            ((n & 0xff00) << 8)
            |
            ((n & 0xff0000) >> 8)
            |
            (n >> 24)
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:34:53.313

这是一个更简单的获取面具的方法：

```
int mask = -1 << (32 - cidr); 
```

您不需要`Net`程序集以正确的顺序获取字节，您可以使用`BitConverter`该类：

```
if (BitConverter.IsLittleEndian) {
  byte[] parts = BitConverter.GetBytes(mask);
  Array.Reverse(parts);
  mask = BitConverter.ToInt32(parts, 0);
} 
```

# r - R 计算的百分比总和不等于一 - 精度问题

> ID：13052274
> 
> 赞同：1
> 
> 时间：2012-10-24T15:20:25.237
> 
> 标签：r

我正在尝试处理 R 中的百分比，但我遇到了奇怪的问题。当我将向量的值转换为向量的百分比时`sum`，经常会发生它们加起来不等于一的情况。

最小的例子：

```
data <- rnorm(1000)*100
max <- 50
unlist(lapply(0:(1000/max-1), 
     function(i) 
        sum(
            data[(i*max+1):(i*(max+1))]
            /
            sum(data[(i*max+1):(i*(max+1))])
           )
        ))-1 
```

它应该给出零向量，但是我得到了这个：

```
[1]  0.000000e+00  0.000000e+00 -1.110223e-16 -1.110223e-16  0.000000e+00 -1.110223e-16  0.000000e+00  0.000000e+00  0.000000e+00
[10]  0.000000e+00  0.000000e+00  2.220446e-16  0.000000e+00 -4.440892e-16  0.000000e+00  0.000000e+00  0.000000e+00  4.440892e-16
[19] -1.110223e-16  0.000000e+00 
```

有什么补救办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:35:18.947

他们偏离了一个微不足道的数字。如果您想更改浮点运算中固有的这些微不足道的差异的显示方式，您可以使用 format 函数或其表亲之一，如 sprintf 或 formatC。这实际上是[FAQ 7.31 的一个实例。](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)如果您确实需要格式化方面的帮助，您应该描述一个特定的应用程序。如果您想强制查看零，您也可以使用 round()

```
round( unlist(lapply(0:(1000/max-1), 
 function(i) 
    sum(
        data[(i*max+1):(i*(max+1))]
        /
        sum(data[(i*max+1):(i*(max+1))])
       )
    ))-1  , digits=4) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T15:38:59.060

一个更重要的问题是为什么你认为这些应该是`0`？

您正在使用浮点运算，并非所有数字都可以在您的计算机中精确表示。[这在R FAQ 7.31](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)中涵盖（或相关），它解释了这种现象。

您可以忽略它（出于所有意图和目的，这些值为`0`）

```
> all.equal(tmp, rep(0, length(tmp))) ## tmp contain your numbers
[1] TRUE 
```

或学习为您的特定操作相应地处理它。一种方法是在某种程度上将它们四舍五入：

```
> round(tmp, 2)
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
> round(tmp, 3)
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
> round(tmp, 4)
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
> round(tmp, 5)
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

但这确实取决于你想用这些数字做什么。

# php - 提交表单后获取会话信息

> ID：13052278
> 
> 赞同：0
> 
> 时间：2012-10-24T15:20:43.737
> 
> 标签：php, mysql, database, mysqli, return-value

这在下面的代码中它无法检索任何结果，当我硬编码 member_username = 'admin' 它工作得很好，但是当我有 member_username = '$kdo' 时它失败了。即使当我回显 $kdo 时，它也会打印 'admin' （不带引号）

```
<?php

                    mysql_set_charset('utf8');
                    $result = mysql_query("SELECT * FROM members WHERE member_username = '$kdo'");
                    while ($row = mysql_fetch_array($result, MYSQL_NUM)) {

echo "
                        <fieldset>
                            <legend>Změnit kontaktní informace</legend>
                            <form method='post' action='zucet.php' class='menu_add'>
                                <p> 
                                    Email: <input type='text' name='aemail' id='aemail' value='$row[4]' size='30'/><br>
                                    Jméno: <input type='text' name='ajmeno' value='$row[8]' size='30'/><br>
                                    Příjmení: <input type='text' name='aprijmeni' value='$row[9]' size='30'/><br>
                                    Firma: <input type='text' name='afirma' value='$row[15]' size='30'/><br>
                                    Telefon: <input type='text' name='atel' value='$row[10]' size='30'/><br>
                                    Centrální tel.: <input type='text' name='actel' value='$row[11]' size='30'/><br>
                                    Město: <input type='text' name='amesto' value='$row[12]' size='30'/><br>
                                    Ulice: <input type='text' name='aulice' value='$row[13]' size='30'/><br>
                                    Čas doručení: <input type='text' name='acas' value='$row[14]' size='30'/><br>
                                    <input type='submit' name='zmenit' formaction='zucet.php' value='Změnit' /> 
                                </p>
                            </form>
                        </fieldset>";

                    }

                    mysql_free_result($result);

                ?> 
```

> zucet.php

```
<?php
    session_start();

    $con = mysql_connect("juxcore.ipagemysql.com", "*", "*") or
    die("Could not connect: " . mysql_error());

    mysql_select_db("jux_mms");
    mysql_set_charset('utf8');      

    $sql="UPDATE members SET member_email = '$_POST[aemail]' WHERE member_username = '$kdo'";

    if (!mysql_query($sql,$con))
      {
      die('Error: ' . mysql_error());
      }

    header('Location: http://www.juxcore.com/x/vita/ucet.php');

    mysql_close($con); 
```

感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:49:07.697

尝试这个：

```
$result = mysql_query("SELECT * FROM members WHERE member_username = '" . $kdo . "';"); 
```

# java - 如何在 Java 等 Object-C 中将变量设为私有

> ID：13052279
> 
> 赞同：-1
> 
> 时间：2012-10-24T15:20:50.210
> 
> 标签：java, objective-c

我不明白如何在 Object-C 中将变量设为私有，在 Java 中我可以这样做：

```
public class Counter {
private int cont;

public Counter(){
    cont = 0;
}
public Counter(int v){
    cont = v; }

public void setValue(int v){
    cont = v;
}
public void inc(){
    cont++; }

public int getValue(){
    return cont;
}
} 
```

进而：

```
public class MyClass extends Counter {

public static void main(String[] args) {

    Counter myC = new Counter();

    System.out.println(myC.getValue());
    //System.out.println(myC.cont); don't work because it's private
} 
```

}

所以我无法访问变量 myC.cont 因为显然它是私有的，在 Object-C 中我做了同样的事情但不起作用：

```
@interface Counter : NSObject {
@private int count;
}

- (id)initWithCount:(int)value;
- (void)setCount:(int)value;
- (void)inc;
-(int)getValueCount;

@end

#import "Counter.h"

@implementation Counter

-(id)init {

count = 0;

return self;
}

-(id)initWithCount:(int)value {

self = [super init];

[self setCount:value];

return self;

}

- (void)setCount:(int)value {

count = value;
}

- (void)inc {

count++;
}

-(int)getValueCount {

return count;
}

@end 
```

然后从 main.m 调用它：

```
#import "Counter.h"

int main(int argc, const char * argv[])
{

@autoreleasepool {

    NSLog(@"Hello, World!");
    Counter *myC = [[Counter alloc] init];
    [myC inc];
    [myC inc];
    [myC inc];

    myC.count = 1;
    NSLog(@"%d",myC.getValueCount); //it's 1 instead of 3

}
return 0;
} 
```

我不明白我可以访问 count 变量，我怎样才能像在 java 中一样将其设为私有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:47:44.103

`myC.count`不是访问您的变量，而是访问您定义的方法`-(int)count;`。因为 myC 是一个 Counter 类型的指针，所以您可以通过像这样取消引用指针来直接访问它的成员变量`myC->count`。然而，这是不可取的。Obj-C 内置了使用 @property 关键字生成 getter 和 setter 的功能。

但是一个断点``-(int)count`并观察该方法被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:24:55.487

最好的方法是使用类扩展并在`.m`文件中定义您的私有变量：

我的类.h

```
@interface MyClass
   <PUBLIC DECLARATIONS, variables and methods>
@end 
```

我的班级.m

```
@interface MyClass ()
@property (nonatomic,...) int count;
...
- (void)privateMethod:(...;
@end

@implementation MyClass
@synthesize count;
...
- (void)privateMethod:(...) {

}
...
@end 
```

# python - 在 Pygame 中移动时替换图像

> ID：13052282
> 
> 赞同：0
> 
> 时间：2012-10-24T15:20:58.007
> 
> 标签：python, pygame

我在 Pygame 中有这张在屏幕上移动的图像。我想做的是每隔一段时间交替一次。所以，我希望它从 image1.png 开始，然后在页面上移动，在 human1.png 和 human2.png 之间切换，最后回到 image1.png。这可能吗？

我的代码是：

```
if (human1_position.left <= 555):
    human1_position = human1_position.move(2, 0)  # move first human
    pygame.display.update()
else:
    move = STOP
screen.blit(human1, human1_position) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:33:51.287

这是一个可能的解决方案：

```
# Before main loop
human_files = ["human1.png", "human2.png"]
human_sprites = [pygame.image.load(filename).convert_alpha() for filename in human_files]
human1_index = 0

...

# During main loop
if (human1_position.left <= 555):
    human1_position = human1_position.move(2, 0)  # move first human
    human1_index = (human_index + 1) % len(human_sprites) # change sprite
else:
    move = STOP
    human1_index = 0
human1 = human_sprites[human1_index]
screen.blit(human1, human1_position)
pygame.display.update() 
```

我移动了 update() 调用，它应该在所有绘制之后每帧只发生一次。

# php - 如何检查 MySQL SELECT 字符串是否仅存在 SELECT？

> ID：13052284
> 
> 赞同：-2
> 
> 时间：2012-10-24T15:20:59.947
> 
> 标签：php, mysql, select

我有一个模块，用户可以在其中使用 MySQL 语句创建报告。他们只需要使用 SELECT 语句。我用`strpos("", $sSelect)`. 有什么解决方案，我如何检查所有其他危险语句（如`DROP, Replace, DELETE, TRUNCATE, ALTER,... etc.`）上的字符串。只允许选择。

格雷茨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:23:31.167

您是否可以更改创建报告的人的 MySQL 用户权限？如果是这样，您可以限制对 SELECT 栏的所有内容的访问？您只需要在创建报告时以该用户类型连接，并连接到您的普通用户帐户以进行其他所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:23:12.480

你可以使用正则表达式。

```
if (!preg_match('#^SELECT .*#i', ltrim($your_string))) {
    // not allowed...
} 
```

如果字符串不是以 SELECT 语句开头（不区分大小写），请执行某些操作...

但是，这不是最好的方法，您必须考虑限制用户权限！除了这种方法，“坏人”还可以通过这种方式执行另一个命令：`SELECT ...; DROP TABLE ...;`

# javascript - 如何减少选择的 Javascript 自动完成中的最大建议数量？

> ID：13052285
> 
> 赞同：0
> 
> 时间：2012-10-24T15:21:04.207
> 
> 标签：javascript, html, css, autocomplete, jquery-chosen

默认情况下，使用 jquery 选择会在下拉自动完成中默认显示大约 9 个结果。我想将此数字减少到 4 个结果..

我怎么做？

这是所选项目的链接..

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:22:31.617

没关系，经过一番探索，我想通了...

在 selected.css 中更改此 CSS：

```
.chzn-container .chzn-results {
  max-height: 100px; #100px used to be 240px...
} 
```

# javascript - 将文本文件显示到 html 表格中

> ID：13052286
> 
> 赞同：0
> 
> 时间：2012-10-24T15:21:05.660
> 
> 标签：javascript, html, html-table, html-parsing

我有一个文本文件，我想解析它并将结果作为 HTML 表格保存在我的页面中。

文本文件中的每一行都是制表符分隔的，具有不同特征的值。我想解析每一行，然后按制表符拆分并将每一行保存为 Javascript 对象。所以对于每一行保存一个对象，所以我会有一个对象数组。

然后我想将该对象数组显示到 html 页面中的表中。这是我的尝试，但它没有显示任何内容！我没有收到任何错误！在函数中`yolla()`，我正在阅读我的文本文件。我通过函数定义了对象`library_object()`。我阅读了文本文件的每一行并按制表符拆分行，然后将其保存到一个对象中。那么每一行都将是`var lib_info = new Array()`.

实际上，我不知道如何将该`lib_info[]`数组显示到表格中。

```
<div id="Summary">
    <p>In this page a summary of all available libraries in the HBase is shown! </p>
    <script type="text/javascript">
        var lib;
        var lib_info = new Array();

        if(navigator.appName.search('Microsoft')>-1) { 
            lib = new ActiveXObject('MSXML2.XMLHTTP'); 
        } else { 
            lib = new XMLHttpRequest(); 
        }

        function yolla() {
            lib.open('get', 'library.txt', true);
            lib.onreadystatechange= cevap;
            lib.send(null);
        }

        function cevap(){
            if(lib.readyState==4) {
                libArray = lib.responseText.split("\n");
                extract_libs(libArray);
            }
        }

        function extract_libs(libArray){
            var ORACLE_LIB_ID;
            var COMMON_NAME;
            var SCIENTIFIC_NAME;
            var GENETIC_BACKGROUND;
            var TISSUE;
            var DEV_STAGE;
            var TREATMENT;
            var ECTOPIC_ID;
            var ECTOPIC_TYPE;
            var EVENT_ID;
            var REPLICATE_NUMBER;
            var EXPERIMENT_DESC;
            var ADAPTOR_5;
            var ADAPTOR_3;
            var DATE_SENT;
            var DATE_RETURN;
            var LIB_NAME;
            var QC_NOTE;
            var SEQUENCER;
            for (i=0; i<libArray.length; i++){
                lib_tag = libArray[i].split("\t");
                for(j=0;j<lib_tag.length;j++){
                    switch(j){
                        case 0:
                            ORACLE_LIB_ID = lib_tag[0];
                        break;
                        case 1:
                            COMMON_NAME = lib_tag[1];
                        break;
                        case 2:
                            SCIENTIFIC_NAME = lib_tag[2];
                        break;
                        case 3:
                            GENETIC_BACKGROUND = lib_tag[3];
                        break;
                        case 4:
                            TISSUE = lib_tag[4];
                        break;
                        case 5:
                            DEV_STAGE = lib_tag[5];
                        break;
                        case 6:
                            TREATMENT = lib_tag[6];
                        break;
                        case 7:
                            ECTOPIC_ID = lib_tag[7];
                        break;
                        case 8:
                            ECTOPIC_TYPE = lib_tag[8];
                        break;
                        case 9:
                            EVENT_ID = lib_tag[9];
                        break;
                        case 10:
                            REPLICATE_NUMBER = lib_tag[10];
                        break;
                        case 11:
                            EXPERIMENT_DESC = lib_tag[11];
                        break;
                        case 12:
                            ADAPTOR_5 = lib_tag[12];
                        break;
                        case 13:
                            ADAPTOR_3 = lib_tag[13];
                        break;
                        case 14:
                            DATE_SENT = lib_tag[14];
                        break;
                        case 15:
                            DATE_RETURN = lib_tag[15];
                        break;
                        case 16:
                            LIB_NAME = lib_tag[16];
                        break;
                        case 17:
                            QC_NOTE = lib_tag[17];
                        break;
                        case 18:
                            SEQUENCER = lib_tag[18];
                        break;
                    }
                }

                lib_info[i] = new library_object(ORACLE_LIB_ID, COMMON_NAME, SCIENTIFIC_NAME, GENETIC_BACKGROUND, TISSUE, DEV_STAGE, TREATMENT, ECTOPIC_ID, ECTOPIC_TYPE, EVENT_ID, REPLICATE_NUMBER, EXPERIMENT_DESC, ADAPTOR_5, ADAPTOR_3, DATE_SENT, DATE_RETURN, LIB_NAME, QC_NOTE, SEQUENCER);
            }                           
        }
        function library_object(ORACLE_LIB_ID, COMMON_NAME, SCIENTIFIC_NAME, GENETIC_BACKGROUND, TISSUE, DEV_STAGE, TREATMENT, ECTOPIC_ID, ECTOPIC_TYPE, EVENT_ID, REPLICATE_NUMBER, EXPERIMENT_DESC, ADAPTOR_5, ADAPTOR_3, DATE_SENT, DATE_RETURN, LIB_NAME, QC_NOTE, SEQUENCER){
            this.libID = ORACLE_LIB_ID;
            this.ComName = COMMON_NAME;
            this.ScnName = SCIENTIFIC_NAME;
            this.background = GENETIC_BACKGROUND;
            this.tissue = TISSUE;
            this.devStage = DEV_STAGE;
            this.treatment = TREATMENT;
            this.ectopic = ECTOPIC_ID;
            this.ectType = ECTOPIC_TYPE;
            this.eventID = EVENT_ID;
            this.ReplicateNum = REPLICATE_NUMBER;
            this.ExpDesc = EXPERIMENT_DESC;
            this.adaptor5 = ADAPTOR_5;
            this.adaptor3 = ADAPTOR_3;
            this.dateSent = DATE_SENT;
            this.dateReturn = DATE_RETURN;
            this.libName = LIB_NAME;
            this.QcNote = QC_NOTE;
            this.sequencer = SEQUENCER;
        }                
    </script>
    <input type="button" value="show library" onclick="yolla()">
    <table>
        <tr>
            <th>Library ID</th>
            <th>Common Name</th>
            <th>Tissue</th>
            <th>BackGround</th>
        </tr>
        <script>
            for (i=0; i<lib_info.length; i++){
                document.write('<tr><td>' + lib_info[i].libID + '</td><td>'+ lib_info[i].ComName + '</td><td>' + lib_info[i].tissue + '</td><td>' + lib_info[i].background + '</td></tr>');
            }
        </script>
    </table>
    <div id="library"></div>
</div> 
```

谁能告诉我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:38:24.003

`XMLHttpRequest`是异步的，因此当您尝试循环时，数组的长度可能为 0。

您可以尝试将 HTML 片段写入文本变量，然后将其插入 div 元素

```
function cevap() {
    if(lib.readyState==4) {
        libArray = lib.responseText.split("\n");
        extract_libs(libArray);
        createTable() // <--------
    }
}

function createTable() {
    var table = '<table><tr><th>Library ID</th><th>Common Name</th>' +
                '<th>Tissue</th><th>BackGround</th></tr>';

    for (i=0; i<lib_info.length; i++){
        table += '<tr><td>' + lib_info[i].libID + '</td><td>' +
           lib_info[i].ComName + '</td><td>' + lib_info[i].tissue + '</td><td>' + 
           lib_info[i].background + '</td></tr>';
    }
    table += '</table>';
    document.getElementById('myCoolElement').innerHTML = table;
} 
```

# c# - 试图创建一种将文本框中的文本复制到剪贴板的方法

> ID：13052287
> 
> 赞同：0
> 
> 时间：2012-10-24T15:21:12.053
> 
> 标签：c#, asp.net, copy, clipboard

我是 C# 新手，我正在尝试创建一种将文本框中的文本复制到剪贴板的方法。我在网上搜索并发现 Clipboard.SetText 和 Clipboard.GetDataObject 作为一些可能的方法，但是当我开始输入它们时，intellisense 无法识别它们。我想我可能需要使用 system.windows.forms 命名空间，但是当我把它放在上面时也没有被识别。我应该提到这是在 .aspx 网站的网络表单上，如果这有所作为的话。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:28:03.440

那是行不通的。

文本框将位于客户端计算机上。

您尝试使用 C# 访问的剪贴板将位于服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:29:00.777

[来自 Microsoft 的关于复制到剪贴板和从剪贴板复制的大量资源。](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.copy.aspx)

# sharepoint - 通过rest访问sharepoint 2013预览站点的appCatalog

> ID：13052288
> 
> 赞同：1
> 
> 时间：2012-10-24T15:21:12.627
> 
> 标签：sharepoint, rest, sharepoint-2013

我需要通过 rest 接口从 SharePoint 2013 站点获取应用程序信息。通常它可以通过使用客户端对象模型来完成`AppCatalog.GetAppInstances()`。方法。当您尝试通过 rest 端点获取相同的信息时会出现问题。例如执行 https://.sharepoint.com/_api/SP.AppCatalog.GetAppInstances 返回

```
> <m:error><m:code>-1,
> Microsoft.SharePoint.Client.InvalidClientQueryException</m:code><m:message
> xml:lang="en-US">The method GetAppInstances cannot be invoked as its
> parameter web is not supported.</m:message></m:error> 
```

这是否意味着此方法不能通过休息运行，或者我错过了什么？或者如果有人知道访问相同信息的替代方法会很棒..

# c++ - 从 com0com 构建的虚拟串口读取数据的问题

> ID：13052292
> 
> 赞同：0
> 
> 时间：2012-10-24T15:21:26.200
> 
> 标签：c++, winapi, serial-port

我正在尝试读取写入使用[com0com](http://sourceforge.net/projects/com0com/)创建的串行端口的数据。当前配置有两个串口，即COM8和COM9相互连接。

[当我使用PuTTY](http://en.wikipedia.org/wiki/PuTTY)打开这两个串口并在一个终端中写入内容时，它会立即出现在另一个终端中。但是，当我尝试以编程方式进行时，情况就不同了。

我可以毫无问题地进行写入，但由于某些原因读取失败。我使用Tom Archer 和 Rick Leinecker 的[CSerial 库](http://www.codeguru.com/cpp/i-n/network/serialcommunications/article.php/c2503/CSerial--A-C-Class-for-Serial-Communications.htm)。

读取数据的函数如下所示。

```
int CSerial::ReadData( void *buffer, int limit )
{
    if( !m_bOpened || m_hIDComDev == NULL ) 
        return( 0 );

    BOOL bReadStatus;
    DWORD dwBytesRead, dwErrorFlags;
    COMSTAT ComStat;

    SetCommMask (m_hIDComDev, 0);
    SetCommMask (m_hIDComDev, EV_RXCHAR);
    ClearCommError( m_hIDComDev, &dwErrorFlags, &ComStat );
    if( !ComStat.cbInQue ) return( 0 );

    dwBytesRead = (DWORD) ComStat.cbInQue;
    if( limit < (int) dwBytesRead ) dwBytesRead = (DWORD) limit;

    bReadStatus = ReadFile( m_hIDComDev, buffer, dwBytesRead, &dwBytesRead, &m_OverlappedRead );
    if( !bReadStatus ){
        if (GetLastError() == ERROR_IO_PENDING ){
            WaitForSingleObject( m_OverlappedRead.hEvent, 2000 );
            cout<< "Read data" << endl;
            return( (int) dwBytesRead );
        }
        return( 0 );
    }
    return( (int) dwBytesRead );
} 
```

当程序在此行退出时，我无法从串行端口读取数据：

```
if( !ComStat.cbInQue )
    return( 0 ); 
```

这真的很奇怪，因为串行缓冲区有数据，但`cbInQue`它告诉数据是否可用于读取操作被设置为零。

这种情况有解决方法吗？或者 com0com 中是否有任何设置需要更改？

仅供参考，我在 Windows 7 64 位上使用带有[MinGW编译器的](http://en.wikipedia.org/wiki/MinGW)[Code::Blocks](http://en.wikipedia.org/wiki/Code%3a%3aBlocks) IDE 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:33:58.360

由于 cbInQue() 返回零，这意味着还没有可用的数据。您需要让程序进入休眠状态，直到某些数据可用。

像这样的东西：

```
/**

  Check for data waiting to be read

  @return  the number of bytes waiting to be read

*/
int cSerial::ReadDataWaiting( void )
{

    if( !m_bOpened || m_hIDComDev == NULL ) return( 0 );

    DWORD dwErrorFlags;
    COMSTAT ComStat;

    ClearCommError( m_hIDComDev, &dwErrorFlags, &ComStat );

    return( (int) ComStat.cbInQue );

}
/**

  Blocking wait for an amount of data to be ready

  @param[in] len number of bytes required
  @param[in] msec number of milliseconds to wait

  @return 1 if data ready, 0 if timeout

  */
int cSerial::WaitForData( int len, int msec )
{
    int timeout = 0;
    while( ReadDataWaiting() < len )
    {
        if( timeout++ > msec ) {
            return 0;
        }
        Sleep(1);
    }
    return 1;
} 
```

# php - url 中的会话 ID

> ID：13052293
> 
> 赞同：0
> 
> 时间：2012-10-24T15:21:28.980
> 
> 标签：php, session, sessionid

我在 php 中创建了一个站点，当我访问它时，它会在 url 中显示一个会话 ID。

[http://pandhuishaaglanden.nl/wat_wij_verkopen.php?PHPSESSID=f4d91f171d85b4ccabbb8d06e29b7308](http://pandhuishaaglanden.nl/wat_wij_verkopen.php?PHPSESSID=f4d91f171d85b4ccabbb8d06e29b7308)

我不知道为什么或如何，因为谷歌在 SEO 标准中看到了重复的内容。

有人可以告诉我这是什么或如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:26:46.000

那是为了支持禁用cookies/不支持cookies的浏览器。PHP 还支持通过 URL 参数（`session.use_only_cookies`设置为`0`）而不是 cookie 的会话身份验证。

要禁用它`session.use_trans_sid`，请`0`使用[ini_set](http://ch2.php.net/ini_set)设置。您可能还想设置`session.use_only_cookies`以`1`确保`PHPSESSID`根本不会使用 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:28:05.407

将此行添加到您的 .htacess 文件中：

`php_flag session.use_trans_sid off`

# c - 内联汇编分段错误

> ID：13052296
> 
> 赞同：0
> 
> 时间：2012-10-24T15:21:41.797
> 
> 标签：c, assembly, rot13

全部，

我试图用内联汇编函数编写一个 rot13 ......

以下代码适用于“a”，但是当 c 转到“z”时，它不再起作用了......

并且......它总是显示“分段错误”......请给我一些建议来解决

这个问题。

```
#include <stdio.h>

#define add(a,b)\
asm volatile(\
    "add %%ebx,%%eax" \
    :"=a"(a) \
    :"a"(a),"b"(b) \
)

#define rot13(a)\
asm (\
"rot:\n\t"\
    "add $13,%%eax\n\t"\
    "cmpl $64,%%eax\n\t"\
    "jle L5f\n\t"\
    "cmpl $90, %%eax\n\t"\
    "jg L5f\n\t"\
    "cmpl $90,%%eax\n\t"\
    "jle L5f\n\t"\
    "subl $26,%%eax\n\t"\
"L5f:\n\t"\
    "cmpl $96,%%eax\n\t"\
    "jle L6f\n\t"\
    "cmpl $122,%%eax\n\t"\
    "jg L6f\n\t"\
    "cmpl $122,%%eax\n\t"\
    "jle L6f\n\t"\
    "subl $26,%%eax\n\t" \
"L6f:\n\t"\
    "leave\n\t"\
    :"=r"(a)\
    :"r"(a)\
)

int main()
{
    int a=13, b=12,c='z';
    rot13(c);
    printf("c-> rot13= %c\n",c);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:24:41.803

我敢打赌你的分段错误是因为你有一个`leave`指令。内联汇编不像普通函数*那样*被调用，所以你不需要它，它会破坏堆栈。

另一个问题是您将所有程序集都硬编码为可以操作`%eax`，但您没有告诉编译器。*它认为它可以将输入粘贴到它想要的任何寄存器中，并从它想要的任何其他*寄存器读回输出。可以通过使用`%0`and`%1`而不是`%%eax`一直使用来调整代码，但是将输入和输出约束更改为

```
asm ( <your code here> : "=a" (a) : "0" (a) ) 
```

这意味着“此内联汇编的输出必须在 中`%eax`，并且输入必须与输出在同一个寄存器中”。（如果你在输入约束上再次加上“a”，它将*无法*正常工作。GCC 的寄存器分配器是一个 28 年的 hacks on hacks，你必须遵守它的规则。规则可以在“ [GCC 手册的](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/index.html)[Extended Asm](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Extended-Asm.html)和[Constraints for Asm Operands](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Constraints.html)部分；*仔细*阅读它们，包括第二部分的所有小节，并记住这实际上是内部“机器描述”语言的一个重新利用的特性，并且是为此进行了优化。）

 *这仍然没有给我 rot13('z') 的正确*答案*，但我认为剩下的问题是你的 rot13 算法中的错误，而不是它与程序其余部分的接口。*

# asp.net - 使用在类文件中声明的变量来包含控制文件

> ID：13052298
> 
> 赞同：0
> 
> 时间：2012-10-24T15:21:46.737
> 
> 标签：asp.net, user-controls

我们可以使用类文件中声明的变量来包含控制文件吗

例如，我在 test.ascx 的类文件中

```
public string username= "test"; 
```

然后在 ascx 我想要它：

```
< %@ Register TagPrefix="_test" TagName="usernametest" Src="~/portals/" + username + "/test.ascx" %> 
```

这工作正常如果我在这里用户测试而不是用户名但是这样会抛出错误

> 解析器错误消息：服务器块的格式不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:37:58.570

尝试在后面的代码中以编程方式添加控件：

```
 UserControl ctrl = new UserControl();
        ctrl.LoadControl("user/control/path.ascx");
        this.Page.Controls.Add(ctrl); 
```

# android - ObjectInputStream 在 Android 中抛出 NullpointerException

> ID：13052299
> 
> 赞同：1
> 
> 时间：2012-10-24T15:21:48.247
> 
> 标签：android, save, android-sdcard, objectinputstream

我在手机上本地保存和读取 ArrayList。当我尝试打开文件时出现 NullPointerException。但我找不到问题。

ArrayList 被全局定义为`private static ArrayList<Datapoint> XML = null;`和`private static ArrayList<Datapoint> itemsList = null;`

保存文件的代码：

```
//save arraylist as file 
            //change path to a non-root folder
            String filePath = context.getFilesDir().getPath().toString() + FileSeperator + Name;
            Log.d("FILESTREAMonFolder", "Filepath:"+filePath+ " Projektname:"+Name);
            File f = new File(filePath);
            try {
                FileOutputStream fileOut = new FileOutputStream(f);
                ObjectOutputStream out = new ObjectOutputStream(fileOut);
                out.writeObject(itemsList);
                out.close();
                fileOut.close();
            } catch(IOException ioe) {
                ioe.printStackTrace();
            } 
```

读取文件的代码：

```
//read ArrayList which is saved local
//change path to non-root folder
String filePath = context.getFilesDir().getPath().toString()+"/"+Name;
Log.d("FILESTREAMfromFolder", "Filepath:"+filePath+ " Projektname:"+Name);
File f = new File(filePath);
try
{
    FileInputStream fileIn = new FileInputStream(f);
    ObjectInputStream in = new ObjectInputStream(fileIn);
    XML = (ArrayList<Datapoint>) in.readObject();
    Log.d("XML",XML.toString());
    in.close();
    fileIn.close();
} catch(IOException ioe)
{
    ioe.printStackTrace();
    return;
} catch(ClassNotFoundException c)
{
    Log.d("FILESTREAM", ".Datapoint class not found.");
    c.printStackTrace();
    return;
} 
```

LogCat 输出：

```
10-24 17:19:51.210: D/FILESTREAMonFolder(15446): Filepath:/data/data/de.myapp./files/test Projektname:test
10-24 17:19:51.325: D/AbsListView(15446): Get MotionRecognitionManager
10-24 17:19:53.625: D/CREATED_FILE(15446): test.xml
10-24 17:20:04.110: I/System.out(15446): ..Tunneling, NAT ignored, TP1 medium
10-24 17:20:04.110: I/System.out(15446): ..Local  EP:connect:Exception = null
10-24 17:20:04.110: I/System.out(15446): Can not connect to KNX/IP-Router
10-24 17:20:04.140: D/dalvikvm(15446): GC_CONCURRENT freed 382K, 5% free 14931K/15559K, paused 2ms+6ms
10-24 17:20:04.145: D/AbsListView(15446): [unregisterDoubleTapMotionListener]
10-24 17:20:04.145: I/MotionRecognitionManager(15446):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@418fe150
10-24 17:20:04.195: D/AbsListView(15446): Get MotionRecognitionManager
10-24 17:20:04.200: D/FILESTREAMfromFolder(15446): Filepath:/data/data/de.bertrandt.bertrandtknx/files/test Projektname:test
10-24 17:20:04.200: D/AndroidRuntime(15446): Shutting down VM
10-24 17:20:04.200: W/dalvikvm(15446): threadid=1: thread exiting with uncaught exception (group=0x40c5d1f8)
10-24 17:20:04.205: E/AndroidRuntime(15446): FATAL EXCEPTION: main
10-24 17:20:04.205: E/AndroidRuntime(15446): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.myapp./de.myapp.ProjectView}: java.lang.NullPointerException
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.os.Looper.loop(Looper.java:137)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.app.ActivityThread.main(ActivityThread.java:4514)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at java.lang.reflect.Method.invokeNative(Native Method)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at java.lang.reflect.Method.invoke(Method.java:511)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at dalvik.system.NativeStart.main(Native Method)
10-24 17:20:04.205: E/AndroidRuntime(15446): Caused by: java.lang.NullPointerException
10-24 17:20:04.205: E/AndroidRuntime(15446):    at de.myapp.ProjectView.setup(ProjectView.java:220)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at de.myapp.ProjectView.onCreate(ProjectView.java:85)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.app.Activity.performCreate(Activity.java:4562)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
10-24 17:20:04.205: E/AndroidRuntime(15446):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
10-24 17:20:04.205: E/AndroidRuntime(15446):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:42:10.300

我必须将写入代码放在我的 AsyncTask 的 OnPostExecute() 方法中以下载文件，现在它可以工作了！

# c# - 从 ObservableCollection 获取 T 类型的优雅方法 在 .NET 4.0 中

> ID：13052303
> 
> 赞同：3
> 
> 时间：2012-10-24T15:22:02.903
> 
> 标签：c#, types, observablecollection

> **可能重复：**
> [C#泛型列表<T>如何获取T的类型？](https://stackoverflow.com/questions/1043755/c-sharp-generic-list-t-how-to-get-the-type-of-t)

这是一个简单的问题。获取未知类型的 ObservableCollection 类型的最优雅和简单的方法是什么？

我有一个方法：

```
public void DoSomething(object oc)
{
     //I know 'oc' is a ObservableCollection<T> 
     //How to get its type <T> without having to do
     //obj.GetType().GetProperties().....
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:31:55.547

您可以编写一个扩展方法来为您完成它

```
public static Type GetGenericType<T>(this ObservableCollection<T> o)
{
    return typeof(T);
} 
```

也可以在这里查看：[C# Get Generic Type Name](https://stackoverflow.com/questions/4185521/c-sharp-get-generic-type-name)

编辑：

这很有趣:)

我想出了一个使用动态的解决方案

```
public static void DoSomething(object o)
{
 var iCollection = o as ICollection;
 if(iCollection != null)
 {
    dynamic oc = iCollection;
    Type t = GetGenericType(oc); 
    // now you got your type :)
 }
}

public static Type GetGenericType<T>( List<T> o)
{
    return typeof(T);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:28:24.410

您可以将集合传递给通用函数

```
public static void AddUnknown<T>(this ObservableCollection<T> collection, object item){
      collection.Add((T)item);
} 
```

然后可以像这样使用`collection.AddUnknown(obj)`

如果编译器不知道您使用的是哪个 ObservableCollection，则必须提供该信息，除非您愿意使用反射

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:42:39.853

有两种方法可以处理对象：

*   使用反射（你告诉它是不可取的）
*   试错
*   使用足够广泛的基类或接口

**试错**

尝试所有您期望可能的变化：

```
var list1 = oc as ObservableCollection<int>;
var list2 = oc as ObservableCollection<string>;
var list3 = oc as ObservableCollection<MyClass>;

if (list1 != null)
    list1.Add(1);

else if (list2 != null)
    list2.Add("str");

else if (list3 != null)
    list3.Add(new MyClass());

else
    throw new Exception("Unexpected object type."); 
```

**使用广泛的基类**

```
 var list = oc as IList;
 list.Add(value); 
```

# c# - Windows 服务托管 WCF 库：app.config connectionStrings

> ID：13052305
> 
> 赞同：0
> 
> 时间：2012-10-24T15:22:10.950
> 
> 标签：c#, wcf, windows-services

我有一个 WCF 库，我正在尝试将它托管在 Windows 服务中。

当使用 WCF 测试客户端测试库时，一切都很好。`<connectionStrings>`在我的图书馆项目中，我在`<configuration>`元素中有一个 app.config 。我正在指定本地数据库的位置，如下所示：

```
data source=C:\test\smMonitorLocalDB.sdf; 
```

我已将库项目中的 app.config 中的所有内容复制到我的 Windows 服务项目中的 app.config 中，除了该`<connectionStrings>`部分。因为，如果我添加该`<connectionStrings>`部分，我的 Windows 服务将无法启动。

如果我省略了该`<connectionStrings>`部分，我的 Windows 服务就可以正常启动。它也可以正常工作（除了依赖的部分`<connectionStrings>`）。

所以我的问题是：我应该在哪里添加我的`<connectionStrings>`？或者我有更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:48:52.630

事实证明，`app.config`只有在安装 Windows 服务时才会读取该文件。我最初假设如果重新启动 Windows 服务，它会重新读取`app.config`.

如果您在尝试找出 Windows 服务未启动的原因时遇到困难，请查看[EventViewer](http://support.microsoft.com/kb/308427)，那里可能有一些日志。

如果没有启动 Windows 服务，调试它是非常困难的，但它是可能的。如果您遇到问题，请查看[此 SO 帖子。](https://stackoverflow.com/questions/2629720/debug-windows-service)

感谢@J0HN 的帮助。

# php - OpenCart 中的自定义辅助函数

> ID：13052307
> 
> 赞同：5
> 
> 时间：2012-10-24T15:22:18.887
> 
> 标签：php, opencart

尝试在 opencart 中创建自定义 PHP 函数。基本上我需要知道我们是否正在查看购物车或结帐页面。我了解完成此操作的最简单方法是访问路由请求参数。我想创建一个可重用的函数，但是它在站点范围内可用。

这可能吗？它会去哪里？

该函数看起来像这样：

```
function isCheckout() {

    $route = $this->request->get['route'];

    //is cart?
    if($route == 'checkout/cart')
        return 'cart';

    $parts = explode('/', $route);

    if($parts[0] == 'checkout')
        return 'checkout';

    return false;

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-24T10:53:29.870

将您的帮助文件放在系统目录内的帮助文件夹中

`system/helper/myhelper.php`

并将其包含在

`system/startup.php`文件

像这样

`require_once(DIR_SYSTEM . 'helper/myhelper.php');`

你就完成了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T18:58:55.263

将函数放在一个文件中，例如。myhelper.php 并将其保存到 ../system/library/

然后加

```
require_once(DIR_SYSTEM . 'library/myhelper.php'); 
```

到 ../system/startup.php

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-29T12:37:16.627

正确且推荐的方法是使用 OpenCart 的内置加载程序：

```
$this->load->helper('helper_name'); 
```

助手位于目录**system/helper 中。**加载时不需要附加 php 后缀，因为 OpenCart 的加载器引擎会自动附加它。

然后，因为帮助器不是一个类，所以您可以直接使用函数而无需**$this。** 例如：

```
$this->load->helper('general');

token(); 
```

结果将是一个 32 个字符的标记。**token()**函数位于**system/helper**目录中的**通用**助手中。

 **这是**通用**助手的示例：

```
<?php
function token($length = 32) {
    // Create token to login with
    $string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

    $token = '';

    for ($i = 0; $i < $length; $i++) {
        $token .= $string[mt_rand(0, strlen($string) - 1)];
    }   

    return $token;
} 
```**

# ruby-on-rails - 在 routes.rb 中使用数组

> ID：13052308
> 
> 赞同：0
> 
> 时间：2012-10-24T15:22:22.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3

使用 Rails 3。我有以下内容：

```
# shop.rb
SHOP_TYPES = %w(cafe restaurant station)

# routes.rb
resources :shops do
  member do
    get :nearby_cafes, :nearby_restaurants, :nearby_stations
  end
end 
```

不是`routes.rb`每次我在`SHOP_TYPES`数组中添加另一个成员时都更新我的，反正有没有读取数组中的`routes.rb`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:29:49.947

```
TYPES = :nearby_cafes, :nearby_restaurants, :nearby_stations
 ....
get *TYPES 
```

# c# - 在 ScatterViewItem 中将控制区域与图像分离

> ID：13052314
> 
> 赞同：2
> 
> 时间：2012-10-24T15:22:34.497
> 
> 标签：c#, wpf, xaml, scatterview

我想制作一个比 ScatterViewItem 自己小的选择区域。我尝试了很多东西，但没有任何效果。我将以下图像作为 ScatterViewItem ：

![在此处输入图像描述](../Images/89820cc13f8754aa7e8acad28d6dcfb7.png)

我只想将红色圆圈（及其内部）作为通常 Scatterview 操作的起点。

知道我应该继续谁吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:38:06.363

假设您通过设置 ScatterViewItem 的模板来设置其视觉外观，您可能会执行类似于下面示例的操作。它将`IsHitTestVisible`图像的属性设置为 false 并用较小的透明圆圈覆盖它以接收输入。

```
<s:ScatterViewItem>
    <s:ScatterViewItem.Template>
        <ControlTemplate>
            <Grid>
                <Image Source="..." IsHitTestVisible="False"/>
                <Ellipse Fill="Transparent" Margin="20"/>
            </Grid>
        </ControlTemplate>
    </s:ScatterViewItem.Template>
</s:ScatterViewItem> 
```

# php - 通过 FTP 删除 WordPress 中的文件不会改变任何内容，插件也不会删除

> ID：13052315
> 
> 赞同：0
> 
> 时间：2012-10-24T15:22:36.143
> 
> 标签：php, wordpress

我的 WordPress 安装发生了一些非常奇怪的事情；我最近将该站点移至新主机，但我做的一切都正确，例如

*   更改了设置中的域名
*   移动所有文件和数据库
*   将 WP Config 文件更改为新的数据库名称
*   使用数据库上的搜索和替换工具

该网站本身似乎工作正常，从前端和后端，直到我执行以下任何操作：

*   删除插件（无法删除插件错误）
*   安装插件，当我 FTP 进入时，它们安装良好并显示在插件文件夹中，但它们没有显示在 WP 仪表板的插件列表中

我可以编辑 WP Dashboard 中的所有文件，例如 CSS，它会在网站上进行更改。

但还有更多，我尝试删除 WP 配置文件作为测试，这应该会破坏网站吧？好吧，它并没有像从其他地方拉出文件一样正常进行，所以我尝试从 admin 文件夹中删除 plugins.php 文件，但它没有破坏任何东西，所以我检查了该元素，它正在从正确的位置拉出，因此它不会从旧服务器或任何东西中拉出。我在服务器上没有缓存，也没有插件。

此外，我对 .htaccess 文件所做的任何更改都不起作用，例如 301 重定向。

我真正关心的是无法安装插件并激活它们！

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:39:36.087

以防万一其他人遇到这个问题，我会解释是什么原因造成的。

NamesCo 更新了他们的服务器，这导致我们的服务器 IP 发生了变化。

# php - 将 CSV 行导入 SQL（INSERT 或 UPDATE）

> ID：13052320
> 
> 赞同：0
> 
> 时间：2012-10-24T15:22:49.620
> 
> 标签：php, insert, pdo, cron, sql-update

我试图编写一个 PDO PHP 文件以由 cron 作业执行。我的问题不是 cron 工作，而是我的脚本似乎不起作用的事实。

我找到了这个脚本

```
http://www.php.happycodings.com/Database_Related/code11.html
```

并更改了一些内容。例如，我不需要将邮件发送给我，而且我只有一个 .CSV 文件。问题在于这个脚本，我想检查每一行，看看它是否已经存在于数据库中。如果是这样，我想更新 SQL 中的行，如果不是，我想在 SQL 中插入行。

它没有显示任何错误或任何东西，但不知何故，它似​​乎没有在 SQL 中插入任何内容。每次我执行文件时，它都会在页面中运行并最终变成空白......对我来说似乎是正确的，因为我已经告诉它如果发生错误就死掉。

```
<?php 

try{
    $conn = new PDO("mysql:host=localhost;dbname=data", 'user', 'pass');
}
catch(PDOException $pe)
{
    die('Connection error, because: ' .$pe->getMessage());
}

$columnheadings = 1; 

$filecontents = file ('../../_resources/_csv/letters.csv');

for($i=$columnheadings; $i<sizeof($filecontents); $i++) { 

    list($f1, $f2, $f3)=explode(";",$filecontents[$i]); 

    $sth = $conn->prepare("SELECT * FROM test WHERE 1 = '".$f1."'");

    if ($sth->execute() && $row = $sth->fetch())
        {
            $update = $conn->execute("UPDATE test SET 1 = '$f1', 2 = '$f2', 3 = '$f3' WHERE id='".$row['id']."'");

        }
    else 
        {
            $insert = $conn->execute('INSERT INTO test VALUES ($filecontents[$i])');

        }

} 

?> 
```

在脚本中应该很容易看到我要做什么，所以如果您有任何想法或建议，请告诉我该怎么做。

```
SQL Database

 ----------------
| id | 1 | 2 | 3 |
|----------------|
|  1 | A | A | A |
|----------------|
|  2 | B | B | B |
 ----------------

.CSV File

 -----------
| 1 | 2 | 3 |
|-----------|
| A | A | A |
|-----------|
| B | B | B |
|-----------|
| C | C | C |
 ----------- 
```

这意味着我的脚本应该能够忽略 SQL 数据库中已经存在的 A 和 B，然后只插入 C。

这是@njk 想法的一个例子.. 但它似乎仍然不起作用.. 我需要一个服务器插件来接受传入的 .CSV 文件吗？

```
<?php 

try{
    $conn = new PDO("mysql:host=localhost;dbname=data", 'user', 'pass');
}
catch(PDOException $pe)
{
    die('Connection error, because: ' .$pe->getMessage());
}

$sth = $conn->execute("LOAD DATA 
                       INFILE '../../_resources/_csv/letters.csv'
                       [REPLACE] INTO TABLE test [FIELDS [TERMINATED BY ';']]
                       [LINES TERMINATED BY ' '] [IGNORE 1 LINES] (1, 2, 3)");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:30:43.410

如果您使用 Replace into 函数，您可以简化查询并避免对服务器的多次调用。

```
$conn->execute("replace into test values ('$f1','$f2', '$f3') WHERE id='".$row['id']."'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:37:56.300

你应该使用`LOAD DATA`.

该[资源](https://stackoverflow.com/questions/6114651/php-mysql-load-data-infile-help/679449)将帮助您入门。查看有关允许您复制行的语法和可选关键字的[手册。](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)`IGNORE`

根据您的示例数据，您的`LOAD DATA`语法可能类似于：

```
LOAD DATA INFILE 'file.csv'
    IGNORE                   # <= Skip duplicate input rows
    INTO TABLE test
    (1, 2, 3)                # <= The columns to insert into 
```

# xml - XML Schema 创建理论

> ID：13052321
> 
> 赞同：0
> 
> 时间：2012-10-24T15:22:53.860
> 
> 标签：xml, xsd

我有一个 Web 应用程序，它应该创建一个 xml 文件，但我有一段时间没有上学，需要一些帮助。这是我想放入 XML 文件的表单。如您所见，我只需要用户名/密码进行身份验证，以防选中复选框。而且我需要一个为身份验证方法定义的变量。身份验证无线电选择可能是属性？你会怎么做？

我将从：

```
<xsd:complexeType name="connection">
    <xsd:sequence>
        <xsd:element name="uri" text="xs:string"/ minOccurs="1" maxOccurs="1">
    </xsd:sequence>
</xsd:complexeType> 
```

但是我如何为复选框建模？如何将文件限制为：如果设置了代理密码，则必须有用户名。谢谢

![在此处输入图像描述](../Images/75c003756d004d27bbda281370cb6003.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:38:12.510

签出[XForms](http://en.wikipedia.org/wiki/XForms)。看起来你正在尝试解决同样的问题。

# python - 创建 .csv 文件的远程 python 脚本（权限被拒绝）

> ID：13052323
> 
> 赞同：2
> 
> 时间：2012-10-24T15:22:55.563
> 
> 标签：python, file, csv, ssh

我有一个正在远程执行的 python 脚本。该代码的最后一段应该在脚本的目录（远程）中创建一个输出文件，以供进一步报告。

该脚本正在通过 ssh 执行：

```
ssh -c blowfish remoteAddr python -u pythonScript.py $1 $2 $3 
```

这允许传递到脚本中的参数（我正在使用 bash）成为 python 脚本的输入。

在远程端，我创建输出文件 (.csv) 的尝试被证明是无用的：

```
csvFile = open('results.csv','w')
csvFile.write(someResults)
csvFile.close() 
```

返回 IOError (Errno 13): Permission denied 'results.csv'。该错误将我的打开标记为罪魁祸首。

在执行`ls -l`python 的目录上执行一个，我得到：

```
-rwxr-xr-x 1 jmschen operations 5003 <dateTimeStamp> pythonScript.py 
```

这让我认为我应该没有访问问题。另外，我尝试了以下方法：

```
os.chmod(<WherePythonScriptLives>,0777)
csvFile = open("results.csv","w")
csvFile.write(someResults)
csvFile.close() 
```

这也会产生同样的错误。

在本地运行此代码（在 ssh 进入终端后）会产生相同的 IOError；但是，我在目录 (test.py) 中创建了一个 python 脚本

```
import os
f = open("results.csv","w")
f.write("Blah Blah Blah")
f.close() 
```

工作得很好。这让我觉得我们远程执行 python 的事实可能是问题所在？

要求：

*   Unix 上的 Python 2.4.3（无法升级）
*   没有外部模块/包（不是我认为我们需要它们）
*   ~~无法更改`ssh -c blowfish remoteAddr python -u pythonScript.py $1 $2 $3`通话~~由于 ssh 调用可能是罪魁祸首，因此删除了此要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:57:44.543

如果我正确理解你的问题...

昨天我遇到了类似的情况，其中 php 旨在执行外部 python 脚本。我把我的用户权限误认为是 php-user 权限。我不得不在 php 中使用 chmod()。

通过研究您的问题，我发现了[Python 等价物](http://docs.python.org/library/os.html)。试试这个：

```
import os

os.chmod(path, mode)
csvFile = open('<fullpath>/results.csv','wt')
csvFile.write(someResults)
csvFile.close() 
```

这与我的 php 示例中的过程大致相同。请注意，`mode`默认是八进制，所以如果给予完全权限，模式应该是`0777`与终端的`777`.

我希望这有帮助！

*未经测试

# c++ - 静态数组初始化可以“重载”吗？

> ID：13052328
> 
> 赞同：2
> 
> 时间：2012-10-24T15:23:12.357
> 
> 标签：c++, overloading

我有这些语句，更具体地说是 MyDouble 对象的数组声明和常规 MyDouble 对象初始化：

```
MyDouble D[8]; //Creating 8 'MyDouble' objects (created with default constructor)
MyDouble t; 
```

主要目标是我想为在数组*D*中创建的 MyDouble 对象调用不同的构造函数，而不是 MyDouble *t*。上述陈述不能修改。

我的问题是是否有可能进入 C++ 现在自动执行的初始化过程？我可以通过在 MyDouble 类中放置某种函数（重载`operator[]`或类似的东西）来重载这个初始化过程吗？

我想这是不可能的，我只是想要一些反馈。我希望我解释得足够好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:25:41.053

不，你不能。（考虑到你的限制）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:28:08.137

从 8.5p6 开始，

> *默认初始化*类型的对象意味着：`T`[...] — 如果 T 是数组类型，则每个元素都是默认初始化的；[...]

因此对数组元素执行的初始化与对单独对象执行的初始化相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:13:40.533

There is a way to call a different constructor on the array as follow:

```
MyDouble D[8] = {
    MyDouble( 1 ),     // Create from an int
    MyDouble( "2.0" ), // Create it from an string
    MyDouble( 1.35 ),  // Create from a double
    // rest of the items will be initialized using default constructor
}; 
```

But if your goal is to call a different constructor for each array, the result is no!

```
MyDouble {
    MyDouble( /* I have nothing to put here to make this the choice for arrays */ );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:36:04.617

您可以使用`std::vector`而不是简单的数组。它将允许您使用 custom 控制数组元素创建的过程`allocator`，或者在简单的情况下，您可以从给定的元素中复制构建所有元素。

```
struct C
{
    C() { std::cout << "Constructed\n";}
    C(const C&) {std::cout << "Copy constructed\n";}
};

int main()
{
    std::vector<C> a(8, C()); //al elements are copy constructed
} 
```

# perl - Perl Glob 所有不以 zip 结尾的东西

> ID：13052334
> 
> 赞同：0
> 
> 时间：2012-10-24T15:23:29.823
> 
> 标签：perl, pattern-matching, glob

这是在 Windows 上 - 我如何在 perl 中将所有不以“.zip”结尾的文件都包含在内？

这是当前代码，就这个问题而言，它是不可更改的——所有可以更改的只是 $pattern 变量的值。

```
my @arr = map { glob( $_ ) } $pattern; 
```

顺便问一下，这段代码中 map 函数的目的是什么？它有效，但我不明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:51:58.483

这里的使用`map`表明一个人可能有多种模式可供`glob`选择。例如

```
my @arr = map { glob( $_ ) } ($pattern1, $pattern2); 
```

这将列出与任一模式匹配的所有文件（可能重复）。请注意，您还可以`@arr`使用[`readdir`](http://p3rl.org/readdir)内置函数填充数组。

如果您坚持提到的行，或者如果您使用`readdir`，则可以过滤掉结果，

```
use File::Basename;
@arr = grep { ! (fileparse $_, '.zip')[2] } @arr; 
```

为了更加严格，您可能希望过滤掉实际上是 zip 文件的文件，而不仅仅是名称以 结尾的文件`.zip`：

```
use File::MimeInfo::Magic;
@arr = grep { mimetype($_) ne 'application/zip' } @arr; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:13:06.040

根据[glob](http://perldoc.perl.org/functions/glob.html)，它更像是通配符匹配，而不是真正的正则表达式匹配。反正我从来都不喜欢 glob（结果在同一个脚本中是不可重复的，就像 glob 在循环中一样）。

我知道你说过你不能改变那个 glob 行（所以这可能是不可能的），但是这段代码做了你想做的事情，虽然使用了不同的代码：

```
opendir(DIR, ".") or die $!;
my @nonZipFiles = grep(!/^\.+|\.zip$/, readdir(DIR));
closedir(DIR);

print "$_\n" for @nonZipFiles; 
```

# android - Android 单选按钮文本为粗体

> ID：13052336
> 
> 赞同：1
> 
> 时间：2012-10-24T15:23:34.147
> 
> 标签：android, android-layout

我正在尝试使用 xml 添加单选按钮。但是，由于某种原因，文本是粗体的。有什么办法可以让它不粗体吗？我尝试了 android:textStyle 但它似乎对单选按钮文本没有影响

知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-15T12:01:51.350

试试下面的代码。

```
your_radioButton.setTypeface(null,Typeface.NORMAL); 
```

# javascript - Returning an element and filtering inner elements to get their contents

> ID：13052338
> 
> 赞同：0
> 
> 时间：2012-10-24T15:23:39.547
> 
> 标签：javascript, jquery, html

This is the selector I am trying to use in order to return the data below it.

```
$('.groupPopper').click(function(event){
    var name = $(this).index(".name").contents();
    alert(name);
});

<a class="groupPopper">
   [text class="name">Name here</a>
</a> 
```

How do I return the text element by it's class, by clicking element 'a' in jquery? My example won't work..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:25:29.010

Assuming what you've posted under your jQuery is supposed to be HTML, this should work:

```
$('.groupPopper').click(function(event){
    var name = $(".name", this).text();
    alert(name);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:25:38.487

Try this. [jsfiddle](http://jsfiddle.net/3euyA/)

```
$('.groupPopper').click(function(event){
    var name = $(".name", this).text();
    alert(name);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:25:59.220

```
try using `.text()`

$('.groupPopper').click(function(event){
    var name = $(this).find('.name').text();
    alert(name);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:28:09.213

To return a child by its class name, you can use `.find` in jQuery:

```
$('.groupPopper').click(function(event){
    var name = $(this).find(".name").text();
    alert(name);
}); 
```

Or if you have more than one child with this class, you can iterate them with `.each`:

```
$('.groupPopper').click(function(event){
    $(this).find(".name").each(function() {;
        var name = $(this).text();
        alert(name);
    });
}); 
```

# java - 使用 HBql Zookeeper 不会尝试使用 SASL 进行身份验证

> ID：13052339
> 
> 赞同：4
> 
> 时间：2012-10-24T15:23:39.700
> 
> 标签：java, linux, hadoop, hbase, apache-zookeeper

我想测试 HBql 以简单地使用 HBase。我按照 HBql 网站 ( [http://www.hbql.com/installation.html](http://www.hbql.com/installation.html) ) 上描述的步骤进行操作。最后，在 HBql-console 中键入 version-command 以验证我的安装时，我收到以下消息：

```
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:zookeeper.version=3.4.4-1386507, built on 09/17/2012 08:33 GMT
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:host.name=aleebi
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:java.version=1.6.0_18
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:java.vendor=Sun Microsystems Inc.
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:java.home=/usr/lib/jvm/java-6-openjdk/jre
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:java.class.path=:/usr/local/hbase-0.94.2/hbase-0.94.2.jar:/usr/local/hadoop-1.0.4/hadoop-core-1.0.4.jar:/usr/local/hadoop-1.0.4/contrib/index/hadoop-index-1.0.4.jar:/usr/local/hbql-0.90.0.1/hbql-0.90.0.1.jar:/usr/local/hbase-transactional-tableindexed/org/apache/hbase-trx-0.90.0RC3.jar:/usr/local/hbql-0.90.0.1/lib/antlr-runtime-3.1.3.jar:/usr/local/hbql-0.90.0.1/lib/jline-0.9.94.jar:/usr/local/commons-logging-1.1.1/commons-logging-1.1.1.jar:/usr/local/hbase-0.94.2/lib:/usr/local/hadoop-1.0.4/lib:/usr/local/commons-configuration-1.9/commons-configuration-1.9.jar:/usr/local/commons-configuration-1.9/apache-commons-lang.jar:/usr/local/zookeeper-3.4.4/zookeeper-3.4.4.jar:/usr/local/slf4j-1.7.2/slf4j-api-1.7.2.jar:/usr/local/slf4j-1.7.2/slf4j-simple-1.7.2.jar::/usr/local/hbql-0.90.0.1/lib/jline-0.9.94.jar:/usr/local/hbql-0.90.0.1/lib/antlr-runtime-3.1.3.jar:/usr/local/hbql-0.90.0.1/hbql-0.90.0.1
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:java.library.path=/usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64:/usr/lib/jvm/java-6-openjdk/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib/jni:/lib:/usr/lib
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:java.io.tmpdir=/tmp
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:java.compiler=<NA>
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:os.name=Linux
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:os.arch=amd64
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:os.version=2.6.32-5-amd64
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:user.name=aleebi
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:user.home=/home/aleebi
[main] INFO org.apache.zookeeper.ZooKeeper - Client environment:user.dir=/usr/local/hbql-0.90.0.1
[main] INFO org.apache.zookeeper.ZooKeeper - Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
[main-SendThread(localhost:2181)] INFO org.apache.zookeeper.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2181\. Will not attempt to authenticate using SASL (unknown error)
[main-SendThread(localhost:2181)] WARN org.apache.zookeeper.ClientCnxn - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:592)
    at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1068)
24.10.2012 12:57:55 org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper <init>
INFO: The identifier of this process is 4698@aleebi
24.10.2012 12:57:55 org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper retryOrThrow
WARNUNG: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
24.10.2012 12:57:55 org.apache.hadoop.hbase.util.RetryCounter sleepUntilNextRetry 
```

这些消息仅在使用 HBql 控制台时打印。HBase 在分布式模式下成功运行，在 Debian Squeeze 上将数据存储在 HDFS 中。您需要更多信息吗？我犯了什么错误？为什么这里需要 SASL，而在 HBase shell 这样的一般情况下不需要？

也许一些重要的配置：

*hbase-env.sh*

```
hbase_manage_zk=true 
```

*hbase-site.xml*

```
 <property>
      <name>hbase.zookeeper.property.clientPort</name>
      <value>2222</value>
    </property>
    <property>
      <name>hbase.zookeeper.quorum</name>
      <value>master</value>
    </property>
    <property>
      <name>hbase.zookeeper.property.dataDir</name>
      <value>/usr/local/zookeeper</value>
    </property> 
```

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:43:25.433

我最近使用 Nutch 和 Solr 安装了 HBase，并且遇到了类似的问题。我不确定是否完全相同，不幸的是我不再有日志，但它肯定与连接相关。

原来 ZooKeeper 的默认连接限制太低，增加这个值为`hbase-site.xml`我解决了这个问题：

```
<property>
    <name>hbase.zookeeper.property.maxClientCnxns</name>
    <value>1000</value>
</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T12:15:04.090

我有同样的问题。这个答案假设您在 linux 上工作并相应地编辑了您的 etc/hosts 文件（[https://stackoverflow.com/a/13540883/1607022](https://stackoverflow.com/a/13540883/1607022)）

Zookeeper 的客户端端口号必须在 HBase 的配置文件中以及您在其之上使用的任何内容中相同。解决方案是；（在我的情况下，HBASE 0.90.4 和 GORA 0.3）检查 HBASE_HOME/src/main/resources 下的 hbase-default.xml：

```
<name>hbase.zookeeper.property.clientPort</name>
<value>2181</value> 
```

并且在 HBql 下应该有一个 hbase-site.xml：

```
<property>
<name>hbase.zookeeper.property.clientPort</name>
<value>2181</value>
<description>Property from ZooKeeper's config zoo.cfg.
The port at which the clients will connect.
</description>
</property> 
```

端口号应该相同。

# python - 尽管脚本运行，但我似乎得到了一个错误，我不明白为什么

> ID：13052341
> 
> 赞同：0
> 
> 时间：2012-10-24T15:23:50.143
> 
> 标签：python

我这里有一段代码，它从配置文件中复制目录列表等。它运行并复制目录等，但每次运行时仍然出错，任何人都可以帮助我理解为什么会弹出错误或者有什么方法可以抑制它

错误如下：

```
Traceback (most recent call last):
      File "copydir.py", line 22, in <module>
        shutil.copytree(sourcefile, destfile)
      File "/usr/local/lib/python2.7/shutil.py", line 174, in copytree
        os.makedirs(dst)
      File "/usr/local/lib/python2.7/os.py", line 157, in makedirs
        mkdir(name, mode)
    OSError: [Errno 17] File exists: '/export/home/craigdba/My_backups/2012-10-24/' 
```

该代码是

```
#!/usr/local/bin/python

import shutil
import datetime
import os

today=datetime.date.today()
todaystr=today.isoformat()

confdir=os.getenv("my_config")
dropbox=os.getenv("dropbox")
conffile = ('services.conf')
conffilename=os.path.join(confdir, conffile)
sourcedir=(r'/export/home/craigdba/')
destdir=os.path.join(dropbox, "My_backups"+"/"+todaystr+"/")
#os.makedirs(destdir)

for file_name in open(conffilename):
  sourcefile=os.path.join(sourcedir, file_name.strip())
  destfile=os.path.join(destdir, file_name.strip())
  shutil.copytree(sourcefile, destfile) 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:31:39.697

好像你有一个空行`servicers.conf`，可能在文件末尾？

您可以通过检查来过滤代码中的内容：

```
fname = file_name.strip()
if fname:
    sourcefile = os.path.join(...)
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:30:16.310

我建议在尝试创建目标目录之前检查它是否存在：

```
if not os.path.exists(destdir):
    os.makedirs(destdir) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:32:43.627

解决此问题的一种简单方法是删除目标目录，然后无论如何都要用新目录替换它。

首先检查目录是否存在，如果不存在。

# php - 如何在动态创建的表中打印消息 - PHP

> ID：13052345
> 
> 赞同：0
> 
> 时间：2012-10-24T15:24:17.300
> 
> 标签：php

嗨如何更正以下代码？我相信代码中缺少一些东西。希望你能得到我想要做的。

谢谢，

```
echo "<td>if(!empty($tip1)) echo $tip1;</td>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:25:28.827

```
echo "<td>" . (!empty($tip1) ? $tip1 : "") . "</td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:25:37.323

```
echo "<td>".(!empty($tip1) ? $tip1 : "")."</td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:26:01.213

尝试

```
if(!empty($tip))
echo "<td>$tip</td>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:27:49.683

尝试：

```
 echo "<td>" .(!empty($tip1) ? $tip1 : ""). "</td>"; 
```

您混淆了连接字符串和 php 代码。

# google-analytics - 通过 JS 自动导出 Google Analytics 数据的最简单方法是什么？

> ID：13052346
> 
> 赞同：0
> 
> 时间：2012-10-24T15:24:25.797
> 
> 标签：google-analytics, google-analytics-api

我想知道是否可以将我的 GA 数据自动导出到公共 URL，例如 RSS 提要。然后我可以使用JavaScript来获取并显示它，无需授权。我只是不想编写服务器端代码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:35:16.430

[Google Analytics API](https://developers.google.com/analytics/)可以做到这一点，但据我所知，没有可公开使用的 JSON API。

根据以下资源，使用 Yahoo Pipes 可能是可行的：

*   [https://stackoverflow.com/a/2663700/94668](https://stackoverflow.com/a/2663700/94668)
*   [http://blogoscoped.com/archive/2008-01-17-n73.html](http://blogoscoped.com/archive/2008-01-17-n73.html)

# javascript - 使用javascript更改图像部分的颜色

> ID：13052347
> 
> 赞同：2
> 
> 时间：2012-10-24T15:24:30.417
> 
> 标签：javascript, jquery, html, html5-canvas

我有一个 PNG 图像，有两种颜色（例如：红色和蓝色），使用 javascript 或 html5 是否可以将红色变为黄色，将蓝色变为绿色或其他？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:13:00.647

我为演示创建了一个小提琴：http: **[//jsfiddle.net/tyduD/1/](http://jsfiddle.net/tyduD/1/)**

实际上，您可以更改每种颜色，但首先您需要获取三个主要颜色通道中每个像素的像素值（加上 alpha 通道，但这不是那么重要，但是您需要在循环数据时考虑频道）。`RGB`所有三个颜色分量 ( )都有单独的数据通道。

首先，您需要获取对画布上下文的引用，然后将 data 属性分配给将存储像素颜色值的像素数组：

```
var imageData = context.getImageData(0, 0, width, height);
var data = imageData.data; 
```

使用双循环，您可以遍历颜色通道，并在此处进行像素操作。

```
for (var y = 0; y < height; y++) {
    for (var x = 0; x < width; x++) {
        var index = (x + width * y) * 4;
        data[index+0] = data[index+2];
        data[index+1] = 255 - data[index+1];
        data[index+2] = 255 - data[index-1];

    }
} 
```

这是处理画布和像素操作的绝佳资源： [http ://dev.opera.com/articles/view/html-5-canvas-the-basics/#pixelbasedmanipulation](http://dev.opera.com/articles/view/html-5-canvas-the-basics/#pixelbasedmanipulation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:27:17.107

是的，你可以这么做。

首先，您必须获取图像的 imageData ：

```
var canvas = document.createElement('canvas');
var context = canvas.getContext('2d');
var img = document.getElementById('myimg');
context.drawImage(img, 0, 0 );
var myData = context.getImageData(0, 0, img.width, img.height); 
```

然后，您只需更改图像中每个`myData[i]`（红色）和`myData[i+2]`（蓝色）的值`i`。

最后，您使用 .将 imageData 放回画布中 `context.putImageData`。

请参阅此参考：[使用画布进行像素操作](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)

# jquery - jQuery 在 IE8 及更低版本和 iOS5 及更低版本中不起作用

> ID：13052350
> 
> 赞同：0
> 
> 时间：2012-10-24T15:24:39.217
> 
> 标签：jquery

我正在为[这个基于 CSS3 的手风琴开发一个 jQuery 后备。](https://www.msu.edu/~mirirfan/maurers/)

但是，经过测试，我注意到它在 iOS5 或更低版本或 IE8 - IE6 中不起作用。意思是，手风琴的面板/幻灯片不会打开/向下滑动。

我在 jQuery 论坛上询问了一些人，但他们对它为什么不起作用感到困惑。一个人说这可能是因为我在我的 jQuery 中使用了 :animated，IE 和 iOS 不支持。但是，如果没有它，该人没有替代方法来重写我的代码。

我想要实现的是在选中输入（复选框）/单击标签后获取与 slideDown 对应的内容，然后在未选中输入/再次单击标签时获取与 slideUp 对应的内容。

有人可以帮我修复我的代码，以便它在 IE 和 iOS 中工作吗？

我真诚地感谢任何和所有的帮助。

先感谢您！

**编辑：我正在寻找使用我的 HTML5 标记的 jQuery 解决方案。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:51:24.070

我知道这是花哨的 CSS3 和所有，但如果这是实现这一目标所需的那种糟糕透顶的无语义标记，我不会打扰。4行jquery，你就完成了：

标记：

```
<dl class="menu">
    <dt><a href="#">About Us</a></dt>
    <dd>
        <p>Well, the way they make shows is, they make one show. That show's called a pilot. Then they show that show to the people who make shows, and on the strength of that one show they decide if they're going to make more shows.</p>
    </dd>
    <dt><a href="#">How We Work</a></dt>
    <dd>
        <p>Like you, I used to think the world was this great place where everybody lived by the same standards I did, then some kid with a nail showed me I was living in his world, a world where chaos rules not order, a world where righteousness is not rewarded. That's Cesar's world, and if you're not willing to play by his rules, then you're gonna have to pay the price.</p>
    </dd>
    <dt><a href="#">References</a></dt>
    <dd>
        <p>You think water moves fast? You should see ice. It moves like it has a mind. Like it knows it killed the world once and got a taste for murder. After the avalanche, it took us a week to climb out. Now, I don't know exactly when we turned on each other, but I know that seven of us survived the slide... and only five made it out. Now we took an oath, that I'm breaking now. We said we'd say it was the snow that killed the other two, but it wasn't. Nature is lethal but it doesn't hold a candle to man. </p>
    </dd>
    <dt><a href="#">Contact Us</a></dt>
    <dd>
        <p>You see? It's curious. Ted did figure it out - time travel. And when we get back, we gonna tell everyone. How it's possible, how it's done, what the dangers are. But then why fifty years in the future when the spacecraft encounters a black hole does the computer call it an 'unknown entry event'? Why don't they know? If they don't know, that means we never told anyone. And if we never told anyone it means we never made it back. Hence we die down here. Just as a matter of deductive logic.</p>
    </dd>
</dl>​ 
```

jQuery：

```
$('.menu > dt > a').click(function(e) {
    e.preventDefault();
    $(this).parent().next('dd').slideToggle();
}); 
```

[这是一个小提琴。](http://jsfiddle.net/XNXRf/10/)

您可能可以将其调整为您的标记，但是上帝，您为什么要这样做？

# android - 在服务中重新启动 AsyncTask

> ID：13052355
> 
> 赞同：0
> 
> 时间：2012-10-24T15:24:52.723
> 
> 标签：android, service, android-asynctask, broadcastreceiver

我有 Service 和 AsyncTask ，这是由于检查服务器上的更新。如果它得到一些数据，如果它没有，它必须重新执行。所以我的 AsyncTask 实现是：

```
 private class DklabExecute extends AsyncTask<Void, String, Void> {
            int count;

            Calendar calendar = Calendar.getInstance();
             java.util.Date now = calendar.getTime();
             java.sql.Timestamp currentTimestamp = new java.sql.Timestamp(now.getTime());
            String url = "http://192.168.0.250:81/?identifier=nspid_"+md5(LoginActivity.passUserId)+
                      ",nspc&ncrnd="+Long.toString(currentTimestamp.getTime());

            HttpGet rplPost = new HttpGet(url);

            protected Void doInBackground(Void... args) 
            {

                Log.i("service count", Integer.toString(count));
                count ++;
             Log.i("md5 func", md5(LoginActivity.passUserId)); 

                String testData = "http://192.168.0.250/app_dev.php/api/comet/testOrder/";

                 JSONParser  parser = new JSONParser();
                 DefaultHttpClient testClient = new DefaultHttpClient();
                 DefaultHttpClient rplClient = new DefaultHttpClient();

                try {

                     List<NameValuePair> params = new ArrayList<NameValuePair>();
                     params.add(new BasicNameValuePair("", ""));
                     HttpGet httpTest = new HttpGet(testData);

                     httpTest.setHeader("Cookie", CookieStorage.getInstance().getArrayList().get(0).toString());
                     rplPost.setHeader("Cookie", CookieStorage.getInstance().getArrayList().get(0).toString());

                    try {

                        httpResponse = rplClient.execute(rplPost);
                    }

                     catch (ClientProtocolException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                    Header[] head = httpResponse.getAllHeaders();
                    Log.i("http Response",httpResponse.toString());
                    for (Header one:head)
                    {
                        Log.i("headers",one.toString());
                    }
                    Log.i("response code", Integer.toString(httpResponse.getStatusLine().getStatusCode()));
                    HttpEntity httpEntity = httpResponse.getEntity();
                    is = httpEntity.getContent();
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                        while ((line = reader.readLine()) != null)
                        {
                            sb.append(line);// + "n");
                        }
                        try
                        {
                            is.close();
                        }
                        catch (IOException e)
                        {
                            e.printStackTrace();
                        }
                    json = sb.toString();
                    Log.i("rpl response",json);
                    if (new JSONArray(json) != null)
                        jArr = new JSONArray(json);
                    else
                        this.cancel(true);
                     JSONObject toObj = jArr.getJSONObject(0);
                     JSONObject data = toObj.getJSONObject(KEY_DATA);
                    if (data.has(KEY_ORDER))
                    {
                        for (Order a : ServiceMessages.orderExport)
                          {
                             Log.i("service before list", a.toString());
                          }
                         Log.i(" ", "  ");
                          for (Order a : DashboardActivityAlt.forPrint)
                          {

                             Log.i("before dashboard list", a.toString());
                          }
                        JSONObject jsonOrder = data.getJSONObject(KEY_ORDER);
                        Gson gson = new Gson();
                        Order orderObj= gson.fromJson(jsonOrder.toString(), Order.class);
                        try
                        {
                            for (ListIterator<Order> itr = orderExport.listIterator(); itr.hasNext();)
                            {
                                Order a = itr.next();

                                Log.i("order count", a.toString());

                                if(orderObj.getOrderid()==a.getOrderid())
                                {
                                    Log.i("Service","order was changed");
                                    a = orderObj;
                                    someMethod("Your order  "+ orderObj.getTitle() + "  was changed");

                                }
                                else
                                {
                                    Log.i("Service","order"+ orderObj.getTitle()+" was added");
    //                              DashboardActivityAlt.forPrint.add(0, orderObj);
                                    ServiceMessages.orderExport.add(0,orderObj);
                                    Log.i("status",Integer.toString(orderObj.getProcess_status().getProccessStatusId()));
                                    someMethod("Your order  "+ orderObj.getTitle() + "  was added");
                                }

                            }
                        }
                        catch (Exception e)
                        {
                            e.printStackTrace();
                        }
                        for (Order a : ServiceMessages.orderExport)
                          {

                             Log.i("service after list", a.toString());
                          }
                         Log.i(" ", "  ");
                          for (Order a : DashboardActivityAlt.forPrint)
                          {

                             Log.i("after dashboard list", a.toString());
                          }
//                      intentOrder.putParcelableArrayListExtra("ordersService", orderExport);
                        sendBroadcast(intentOrder);
                        Log.i("after parse order",orderObj.toString());
                        Log.i("orders after updating",DashboardActivityAlt.orders.toString() );
                    }
                    else if (data.has(KEY_MESSAGE))
                    {

                        JSONObject jsonMessage = data.getJSONObject(KEY_MESSAGE);
                        Gson gson = new Gson();
                        Log.i("messages before parse", jsonMessage.toString());
                        for (Order a: DashboardActivityAlt.forPrint)
                        {
                            Log.i("messages count", Integer.toString(a.getCusThread().getMessages().size()));
                        }
                        Log.i("disparse message",jsonMessage.toString());
                        Message message =  gson.fromJson(jsonMessage.toString(),Message.class);
                        Log.i("incomming message",message.toString());
                        JSONObject jsonThread = jsonMessage.getJSONObject(KEY_THREAD);
                        Threads thread =  gson.fromJson(jsonThread.toString(),Threads.class);
                        Log.i("incomming thread",thread.toString());
                        Order orderChanged = new Order();
                        String orderName = null;
                        for(Order as : DashboardActivityAlt.forPrint)
                        {

                            if (as.getOrderid() == thread.getTreadOrder().getOrderid())
                            {
                                orderName = as.getTitle();
                                orderChanged = as;
                                Log.i("messages count after", Integer.toString(as.getCusThread().getMessages().size()));
                            }

                        }
                        Log.i("orderchanged",orderChanged.toString());
                        someMethod("Your order  "+ thread.getTreadOrder().getTitle() + "  was changed. Message was added");
                        orderChanged.getCusThread().addMessage(message);
                        sendBroadcast(intentMessage);
                        Log.i("messages service", "before sleep");

                        Log.i("messages service", "after sleep");

                    }
                    else

                    {

                        this.cancel(true);

                    }

                } 
                 catch (IllegalStateException e2) {
                    // TODO Auto-generated catch block
                    e2.printStackTrace();
                } catch (IOException e2) {
                     rplClient.getConnectionManager().shutdown();
                     testClient.getConnectionManager().shutdown();
                     someMethod("You've lost internet connection. You should try later.");
                    e2.printStackTrace();
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 

                return null;
             }
            protected void onPostExecute(Void bitmap) {

                 this.cancel(true);
                 new DklabExecute().execute();
             }
        } 
```

如果我向服务器发送一些数据，它会通过 rpl 服务器以 JSON 格式返回给我。一切正常，但问题是当我从服务器获取一些数据时，AsyncTask 在`onPostExecute()`方法中重新执行，并且在我的订单列表中重复一到两次数据。如果我不重新执行 AsyncTask 监听只发生在`onStartCommand()`方法中，而不是永久发生。请告诉我如何以最好的方式实现这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:30:19.013

如果它是一项服务，则没有理由使用 AsyncTask。AyncTask 的构建是为了将内容返回到原始线程（通常是 UI 线程），但服务没有这些。

我建议你使用 ScheduledExecutorService 代替[http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)

```
 private ScheduledExecutorService executor;

 // call those on startCommand
        executor = Executors.newSingleThreadScheduledExecutor();
        executor.scheduleWithFixedDelay(run, 250,3000, TimeUnit.MILLISECONDS); 
```

并有一个 Runnable 做这项工作

```
private Runnable run = new Runnable() {

      @Override
      public void run() {
              // do your network stuff
      }
}; 
```

并且不要忘记在您的服务停止时取消所有内容

```
 executor.shutdown(); 
```

## *编辑：*

或使用循环中的线程，您可以：

```
 boolean isRunning; 
```

.

```
 // this on your start
    Thread t = new Thread(run);
    isRunning = true;
    t.start(); 
```

可运行的

```
private Runnable run = new Runnable() {

      @Override
      public void run() {
              while(isRunning){
                    // do your network stuff
              }
      }
}; 
```

再一次，不要忘记在服务结束时完成它：

```
 isRunning = false; 
```

# java - 了解 zeromq java 绑定

> ID：13052358
> 
> 赞同：21
> 
> 时间：2012-10-24T15:25:00.120
> 
> 标签：java, message-queue, zeromq

我正在研究 zeromq 作为 java 项目中的消息传递解决方案，但我发现有关 java 绑定的说明有些难以遵循。 [http://www.zeromq.org/bindings:java](http://www.zeromq.org/bindings:java)

我不熟悉 java 绑定，所以这些可能是愚蠢的问题，但有人可以帮助我理解：

1.  为什么我需要安装任何东西？
2.  我在一台机器上构建的罐子可以在另一个系统上工作吗？我需要这个应用程序是可移植的。
3.  如果是这样，为什么我需要先构建自己的 jars？

我觉得 zeromq 上提供的说明需要基本熟悉构建我缺乏的 C 项目，所以也许我只是很密集，但这似乎需要做很多工作。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T16:40:42.923

作为 ZeroMQ 的 Java 绑定的用户，我很同情。ZeroMQ 绝对是更难管理的 Java 依赖项之一。从本质上讲，ZeroMQ 是本机 C 代码，Java 绑定是（相对）轻量级的包装器，围绕核心 ZeroMQ 库的 JNI 接口，这就是部署复杂的原因。

顺便说一句 - 如果 ZeroMQ 非常适合您的应用程序，那么麻烦是值得的，因为真的没有什么比得上它了。不幸的是，这意味着您需要完成所有这些步骤才能使其正常工作，以便您可以决定它是否是您真正需要的。

ZeroMQ for Java 基于三个组件：

*   libzmq - 核心 ZeroMQ 库（DLL - 任何语言都需要，而不仅仅是 Java）
*   jzmq - Java 绑定 (DLL) 的本机部分
*   zeromq.jar - Java 绑定 (JAR) 的 java 部分

> 我在一台机器上构建的罐子可以在另一个系统上工作吗？我需要这个应用程序是可移植的。

是的。罐子将是便携式的。您可以在任何机器上构建它并将其部署在任何其他机器上。然而，这是容易的部分。困难的部分是创建所需的各种 DLL，而这些 DLL 是不可移植的。假设您想支持 Windows、Mac 和 Fedora Linux。您将需要 Windows、Mac 和 Fedora 上的本地开发环境，并为您想要支持的每个平台构建 DLL。

我对 Linux 的了解还不够，无法说明构建在一个发行版（比如 Fedora）上的 DLL 是否会在另一个发行版（比如 Debian）上运行。如果没有，那么您还有更多工作要做。

无论如何，您的应用程序将是可移植的 - ZeroMQ 和 JZMQ 可以在大量平台上运行 - 但您需要严格控制部署过程，以确保在安装每个平台时，jar 和适当的 DLL 集是安装，并且它们安装在正确的位置。

> 为什么我需要安装任何东西？

从技术上讲，你没有。但我认为他们建议执行此`make install`步骤，以便包含和库文件位于编译器所期望的位置，并且 Java 可以在运行程序时加载它们。

> 如果是这样，为什么我需要先构建自己的 jars？

我不是提交者，所以我不能肯定地说。我希望部分原因是开发人员的效率——他们宁愿改进代码，也不愿为可以自己创建 jar 的用户创建 jar。

更重要的是 - 由于 jar 是不够的，而且无论如何您都必须构建 DLL，因此将 jar 和 DLL 一起构建更有意义。这样您就可以确定 JNI 包装器在 C 中实现了完全正确的本机方法，以匹配 Java 包装器类中的本机声明。

祝你好运。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T10:55:32.853

就我个人而言，我确实认为预制的 JAR 将对帮助 Java 中的 0MQ 大有帮助。虽然我在许多站点使用 Java 工作，但它们不提供 MSVS，并且为了获得 dll 和 jar 而必须经历如此冗长的设置对我来说似乎适得其反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-02T19:27:33.097

您还可以查看[JeroMQ](https://github.com/zeromq/jeromq/wiki)（libzmq 的纯 Java 实现）。

JeroMQ 是一个完整的 Java 堆栈，使用与 ZeroMQ 相同的协议和 API，是社区的官方项目。它使 Java 用户的生活变得更加简单，因为没有 JNI，没有 C++ 可以构建。除了 PGM 多播之外，它完成了 ZeroMQ 所做的一切。

# google-maps - 如何调整来自openstreetMap和谷歌地图的坐标之间的差异

> ID：13052359
> 
> 赞同：2
> 
> 时间：2012-10-24T15:25:07.433
> 
> 标签：google-maps, google-maps-api-3, openstreetmap, opengis

我已经从 OpenstreeMap 下载了 OSM，它带有地图中的所有节点及其各自的坐标。现在我必须在谷歌地图上绘制一个节点（纬度和经度），但所有坐标都在不同的地方。

为了说明我在谷歌地图和 openStreetMap 上得到了节点 -12.92122,-38.34991 (lat,long)，正如你在屏幕截图中看到的那样![开放街图](../Images/00ccfe3dde23e1eb2bfc37ed50ebbd5a.png)。

![谷歌地图](../Images/57cd68adce9a219b0ed2464522776443.png)

我的问题是如何调整这些值.. 这样我就可以在 openStreetMap 的同一位置的谷歌地图上绘制节点。

# expressionengine - 在 stash:embed 中使用带有 stash:variable 的条件

> ID：13052360
> 
> 赞同：4
> 
> 时间：2012-10-24T15:25:11.507
> 
> 标签：expressionengine

我在通道入口条件中使用 stash:variables 时遇到了 Stash 问题。

模板.html

```
{stash:embed name="pages" stash:paginate="y"} 
```

pages.html

```
{exp:channel:entries channel="page" dynamic="no" limit="{stash:limit}" disable="categories|category_fields|member_data"}
    <h2>{title}<h2>
    {if '{stash:paginate}' == 'y'}
        {!-- pagination code --}
    {/if}
{/exp:channel:entries} 
```

使用设置限制`{stash:limit}`效果很好，但我似乎无法使用`stash:paginate="y"`. 无论存储变量如何，分页似乎总是显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T23:19:43.300

我希望这是一个解析顺序的事情，你的第一个 var 正在工作，因为它被正确解析，而你的第二个 var 在 exp:channel 之前没有被解析。

试穿`parse=inward`你的`exp:channel`

我还不是藏匿大师，但类似的经验表明解析顺序正在发挥作用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T19:13:31.543

我最近第一次使用 stash，确实需要一些时间来适应。我发现我必须使用 Parse="inward" 标签并注意使用“value”与“value”（单引号与双引号）。像这样的小事让一切变得不同。底线...解析顺序是 EE 最重要的方面之一，但我和许多其他人还不够了解。这是我今天的作业：解析订单和所有细节。

# jquery - jQuery 日期时间选择器不呈现 CSS 文件

> ID：13052369
> 
> 赞同：0
> 
> 时间：2012-10-24T15:25:28.387
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我正在使用带有 ASP.Net MVC3 的 jQuery 日期时间选择器。出于某种原因，尽管显示了 datetimepicker，但样式表并没有正确呈现。

（我会发布一张照片，但我是新来的，所以我会描述它，因为我不能发布照片）

当我单击应该触发日期时间选择器的文本框时，就像为 jQuery 演示显示的默认示例一样，它会打开日历视图，但是缺少背景并且文本“prevnext”显示在月份和年份上方，所以它相对于它所在的表单的其余部分看起来是透明的。与这篇文章类似 - [Jquery DateTimePicker not display with CSS](https://stackoverflow.com/questions/10229668/jquery-datetimepicker-not-displaying-with-css)但我什至没有得到蓝色背景。

这篇文章的答案：[Jquery DateTimePicker not display with CSS](https://stackoverflow.com/questions/10229668/jquery-datetimepicker-not-displaying-with-css)是针对部分视图而不是完整视图，并且该解决方案对我没有帮助，所以我想知道完整视图是否有任何不同。

我在 Site.Master 中有以下代码：

```
<script src="<%: Url.Content("~/Content/themes/base/jquery-ui.css") %>" rel="stylesheet"></script>
<script src="<%: Url.Content("~/Content/themes/base/jquery.ui.datepicker.css") %>" rel="stylesheet"></script>
<script src="<%: Url.Content("~/Scripts/jquery-1.8.2.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.ui.core.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.ui.widget.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.ui.datePicker.js") %>" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $(".dp").datepicker({
        dateFormat: 'mm/dd/yy'
        });
    });
</script> 
```

在我的内容页面（视图）中，控件声明如下：

```
 <asp:TextBox ID="txtBirthday" runat="server" class="dp" /> 
```

我还专门声明了另一个现有样式表来设置页面的布局：

```
 <link href="../../Content/Site.css" rel="stylesheet" type="text/css" /> 
```

最后，一个辅助视图控件来识别设置为日期时间选择器的文本框：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<System.DateTime?>" %> 
```

```
<%: Html.TextBox("",  String.Format("{0:yyyy-MM-dd}", Model.HasValue ? Model : DateTime.Today), new { @class = "dp"})%> 
```

谁能帮我解释为什么 CSS 不呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:30:29.497

这个：

```
<script src="<%: Url.Content("~/Content/themes/base/jquery-ui.css") %>" rel="stylesheet"></script>
<script src="<%: Url.Content("~/Content/themes/base/jquery.ui.datepicker.css") %>" rel="stylesheet"></script> 
```

是完全不正确的。您需要在`<link>`标签中使用`<head>`标签来加载 CSS 文件：

```
<link rel="stylesheet" type="text/css" href="<%: Url.Content("~/content/themes/base/jquery-ui.css") %>" />
<link rel="stylesheet" type="text/css" href="<%: Url.Content("~/content/themes/base/jquery.ui.datepicker.css") %>" /> 
```

**编辑：**抱歉，没有注意到您正在使用 WebPages 视图引擎 - 我的示例是 Razor 语法。

# unit-testing - 在哪里放置“useLegacyV2RuntimeActivationPolicy”以在 TFS2012 中构建

> ID：13052374
> 
> 赞同：4
> 
> 时间：2012-10-24T15:25:39.887
> 
> 标签：unit-testing, tfsbuild

虽然我在本地得到单元测试中的错误：

```
Mixed mode assembly is built against version 'v2.0.50727' of 
the runtime and cannot be loaded in the 4.0 runtime without 
additional configuration information 
```

解决方案是添加

```
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0"/>
   </startup>
</configuration> 
```

到位于的配置文件

```
c:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE
\CommonExtensions\Microsoft\TestWindow\vstest.executionengine.x86.exe.config 
```

这在我们的 TFS2012 构建服务器上仍然出错。我还在TFS2012上的文件中添加了启动标签，但是构建服务器报错。

如何让它在构建定义中用于单元测试项目（使用 VS2012 和 TFS2012 的新单元测试框架）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:19:38.943

虽然在 TFS 上运行也有问题，但您可以尝试以编程方式设置它（例如，使用[这种方法](http://reedcopsey.com/2011/09/15/setting-uselegacyv2runtimeactivationpolicy-at-runtime/)）。虽然我不建议在生产代码中使用它，但对于 UnitTests，它应该是完全足够的。

# nsis - 针对不同操作系统的两个 .exe 版本

> ID：13052378
> 
> 赞同：4
> 
> 时间：2012-10-24T15:25:46.890
> 
> 标签：nsis

我的基于 NSIS 的安装程序将某个 .exe 文件部署到所有 Windows 平台的目标文件夹中。我们最近发现，如果我们在 Windows 8 上安装，我们需要部署一个稍微不同版本的 .exe 文件。

我们不想有两个安装程序。我们宁愿有一个安装程序来“保存”两个 .exe 文件，并为 windows8 部署正确的一个，为其余的部署另一个 .exe。

关于我们如何实现这一目标的任何指示？在安装时检测windows8，当我们检测到它时复制不同版本的.exe文件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:46:57.207

`LogicLib.nsh`您可以通过包含 NSIS 提供的和`WinVer.nsh`脚本来非常精确地测试平台。

这是我正在使用的一个函数，我在安装应用程序之前进行了一些健全性检查：

```
Function CheckUnsupportedPlatform
    ${if} ${AtLeastWin95}
    ${AndIf} ${AtMostWinME}
        ;NT4 and W95 use the same version number, we can use ${IsNT} if we need precise identification
        MessageBox MB_OK|MB_ICONEXCLAMATION "Sorry, but your version of Windows is unsupported platform.$\n\
Supported platforms are currently 2000 / XP / 2003 / Vista / Seven$\n \
            Cannot continue the installation." /SD IDOK
        abort
    ${elseIf} ${isWin2008}
    ${orIf} ${AtLeastWin2008R2}
        MessageBox MB_OK|MB_ICONINFORMATION "Please note that support for Windows 2008 and Windows 8 is in beta stage.$\n\
Supported platforms are currently 2000 / XP / 2003 / Vista / Seven" /SD IDOK
    ${endif}
FunctionEnd 
```

还有更多可能性，请查看标题以`WinVer.nsh`获取更多示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:29:31.240

我在 nsis 上遇到了类似的问题，检测到不同的 Windows 版本。我刚刚编写了一个三行 C++ 应用程序来调用 Windows API 以找出操作系统版本，然后将控制台输出写为字符串。从 nsis 中，您可以将这个输出读入一个变量，然后根据这个变量的值进行切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-17T03:20:26.923

我知道这已经很老了，但如果有人遇到`File`命令问题，这是预期的语法：

```
!include "WinVer.nsh"
...
; The stuff to install
Section "MyProgram (required)"
    ${If} ${AtMostWin2003}
        File /oname=MyFile.exe "MyFile2003.exe"  
    ${Else}
       File "MyFile.exe"
    ${EndIf} 
SectionEnd 
```

# php - symfony2 上的 ParameterNotFoundException

> ID：13052386
> 
> 赞同：1
> 
> 时间：2012-10-24T15:26:07.683
> 
> 标签：php, symfony, yaml

运行网站时出现此错误，

**`ParameterNotFoundException: You have requested a non-existent parameter "ppr.database.host.dev".`**

我把 var 放在我的终端环境中，环境返回我：

```
SYMFONY__PPR__DATABASE__HOST__DEV=localhost 
```

我还将 var 放在我的 2 个 php.ini 文件中，导出

`SetEnv SYMFONY__PPR__DATABASE__HOST__DEV localhost`

而这个 var 也出现在 app/config/parameters.ini 中，

```
database_host = %ppr.database.host.dev% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:37:03.643

对于parameters.ini，只需简单添加：

```
[parameters]
    ppr.database.host.dev = "localhost"
    database_host = %ppr.database.host.dev% 
```

使此参数可用于网站的另一种方法：您应该在主机配置中设置 evn。对于 arapache 它应该是这样的：

```
<VirtualHost *:80>
    ...
    SetEnv          SYMFONY__PPR__DATABASE__HOST__DEV localhost
    ...
</VirtualHost> 
```

# matlab - MATLAB海量多重赋值技术

> ID：13052387
> 
> 赞同：2
> 
> 时间：2012-10-24T15:26:16.187
> 
> 标签：matlab, image-processing

我正在尝试将约 100 万个值分配给 100x100 逻辑矩阵，如下所示：

```
CC(Labels,LabelsXplusOne) = true; 
```

其中 CC 是 100x100 逻辑和标签，LabelsXplusOne 是 1024x768 int32。

现在的问题是上述语句在现代 CPU 上大约需要 5 分钟才能完成。显然它在 MATLAB 中的实现很糟糕，那么我们如何在不使用循环的情况下使上述运行更快呢？

如果您想知道，我需要这个语句来计算整数（不是二进制）图像中的 blob。

并且：

```
max(max(Labels)) = 100
max(max(LabelsXplusOne)) = 100 
```

编辑：好的，我明白了。也许这将在未来对其他人有所帮助：

```
tic; CC(sub2ind(size(CC),Labels,LabelsXplusOne)) = true; toc;
Elapsed time is 0.026414 seconds. 
```

现在好多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:03:22.837

有几个问题让我跳出来...

1.  我感觉你在做[矩阵索引](http://www.mathworks.com/help/matlab/math/matrix-indexing.html)错误。就目前而言，将会发生的是in 中的*每个*值`Labels`都将与 中的*每个*值配对，`LabelsXplusOne`从而为您的行和列生成 (1024*768)^2 总索引对`CC`。这可能需要这么长时间。

    您*可能*想要的只是将每对值用作索引，例如`Labels(1,1),LabelsXplusOne(1,1)`,`Labels(1,2),LabelsXplusOne(1,2)`等。为此，您应该使用函数[SUB2IND将索引转换为](http://www.mathworks.com/help/matlab/ref/sub2ind.html)[线性索引](http://www.mathworks.com/help/matlab/math/matrix-indexing.html#f1-85511)。

2.  此外，您的矩阵`CC`仅包含 10,000 个条目，但您的索引矩阵每个都包含 786,432 个整数值。这意味着您最终将多次将值分配给*同一*`true`条目。[您应该首先使用函数UNIQUE](http://www.mathworks.com/help/matlab/ref/unique.html)删除冗余索引集，*然后*使用它们为.`CC` **`CC`**

 **这就是我认为你想要的：

```
CC(unique(sub2ind(size(CC), Labels, LabelsXplusOne))) = true; 
```**

# jenkins - Jenkins：使用命令行删除旧版本

> ID：13052390
> 
> 赞同：51
> 
> 时间：2012-10-24T15:26:41.177
> 
> 标签：jenkins

我删除了托管作业的旧詹金斯构建`rm`：

```
my_job/builds/$ rm -rf [1-9]* 
```

这些旧版本在工作页面中仍然可见。如何使用命令行删除它们？
（每个构建用户界面中没有删除按钮）

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-03-10T14:41:49.897

这是另一种选择：使用 cURL 远程删除构建。（将 URL 的开头替换为您用于通过浏览器访问 Jenkins 的任何内容。）

```
$ curl -X POST http://jenkins-host.tld:8080/jenkins/job/myJob/[1-56]/doDeleteAll 
```

上面删除了作业 myJob 的构建 #1 到 #56。

如果在 Jenkins 实例上启用了身份验证，则必须提供用户名和 API 令牌，如下所示：

```
$ curl -u userName:apiToken -X POST http://jenkins-host.tld:8080/jenkins/job/myJob/[1-56]/doDeleteAll 
```

API 令牌必须从 Jenkins 的 /me/configure 页面获取。只需单击“显示 API 令牌...”按钮即可显示用户名和 API 令牌。

编辑：正如 yegeniy 在下面的评论中指出的那样，根据配置，可能必须在上面的 URL 中替换`doDeleteAll`为`doDelete`才能使其工作。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-10-24T15:57:50.927

看起来这已添加到 CLI 中，或者至少正在处理中：http: [//jenkins.361315.n4.nabble.com/How-to-purge-old-builds-td385290.html](http://jenkins.361315.n4.nabble.com/How-to-purge-old-builds-td385290.html)

语法是这样的：`java -jar jenkins-cli.jar -s http://my.jenkins.host delete-builds myproject '1-7499' --username $user --password $password`

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-06-05T03:48:01.907

1.  检查你的家 jenkins 目录：
    *   **“管理 Jenkins” ==> “配置系统”** [![在此处输入图像描述](../Images/58da86311cd7dd139e78c28f0ba48f63.png)](https://i.stack.imgur.com/bPwPu.png)
    *   检查字段“主目录”（通常是 **/var/lib/jenkins**）

删除所有詹金斯作业构建的命令

```
/jenkins_home/jobs> rm -rf */builds/* 
```

2.  删除后应重新加载配置：

    *   **“管理 Jenkins” ==> “从磁盘重新加载配置”**

[![在此处输入图像描述](../Images/7ddddbbb3fe1ed57d6e55f2dd56d014c.png)](https://i.stack.imgur.com/F2myn.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-08-11T18:26:28.910

你可以通过 Groovy Scripts 使用 Hudson API 来做到这一点。访问你的詹金斯安装

```
http://localhost:38080/script. 
```

例如，使用以下脚本删除所有项目的所有旧版本： 注意：如果使用 Finger Prints ，请小心，您将丢失所有历史记录。

```
import hudson.model.*
// For each project
for(item in Hudson.instance.items) {
  // check that job is not building
  if(!item.isBuilding()) {
    System.out.println("Deleting all builds of job "+item.name)
    for(build in item.getBuilds()){
      build.delete()
    }  
  }
  else {
    System.out.println("Skipping job "+item.name+", currently building")
  }
} 
```

或用于清洁所有工作区：

```
import hudson.model.*
// For each project
for(item in Hudson.instance.items) {
  // check that job is not building
  if(!item.isBuilding()) {
    println("Wiping out workspace of job "+item.name)
    item.doDoWipeOutWorkspace()
  }
  else {
    println("Skipping job "+item.name+", currently building")
  }
} 
```

[Jenkins wiki](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+Script+Console)上有很多例子

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-10-25T17:34:37.183

您是否有理由需要手动执行此操作，而不是让 Jenkins 为您删除旧版本？

您可以更改作业配置以根据天数或构建数自动删除旧构建。无需再担心或不必跟踪，詹金斯只是为你做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-05T10:20:29.830

以下脚本清除旧版本的作业。如果您手动删除构建，您应该从磁盘重新加载配置：

```
import hudson.model.*

for(item in Hudson.instance.items) {
    if (!item.isBuilding()) {
        println("Deleting old builds of job " + item.name)
        for (build in item.getBuilds()) {
            //delete all except the last
            if (build.getNumber() < item.getLastBuild().getNumber()) {
                println "delete " + build
                try {
                    build.delete()
                } catch (Exception e) {
                    println e
                }
            }
        }
    } else {
        println("Skipping job " + item.name + ", currently building")
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-05T07:26:07.500

**此脚本将配置所有 Jenkins 作业的构建保留设置。**

将值从 30 和 200 更改为您需要的套件，运行脚本，然后重新启动 Jenkins 服务。

```
#!/bin/bash

cd $HOME
for xml in $(find jobs -name config.xml)
do
    sed -i 's#<daysToKeep>.*#<daysToKeep>30</daysToKeep>#' $xml
    sed -i 's#<numToKeep>.*#<numToKeep>200</numToKeep>#' $xml
done 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-26T18:14:58.500

```
def jobName = "MY_JOB_NAME"
def job = Jenkins.instance.getItem(jobName)
job.getBuilds().findAll { it.number < 10 }.each { it.delete() } 
```

如果您有 12 个构建，这将清除构建 0-9，您将剩下 12、11、10 个。只需放入脚本控制台

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-03T05:28:13.243

从 Jenkins Scriptler 控制台运行以下 Groovy 脚本以删除视图下列出的所有作业构建：

```
import jenkins.model.Jenkins

hudson.model.Hudson.instance.getView('<ViewName>').items.each() {
    println it.fullDisplayName

    def jobname = it.fullDisplayName
    def item = hudson.model.Hudson.instance.getItem(jobname)
    def build = item.getLastBuild()
    if (item.getLastBuild() != null) {
        Jenkins.instance.getItemByFullName(jobname).builds.findAll {
            it.number <= build.getNumber()
        }.each {
            it.delete()
        }

    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-21T10:16:21.040

从脚本控制台运行这个，但你需要更改作业名称：

```
def jobName = "name"
def job = Jenkins.instance.getItem(jobName)
job.getBuilds().each { it.delete() }
job.nextBuildNumber = 1
job.save() 
```

# php - DB 中的新行不会显示在 textarea 中

> ID：13052392
> 
> 赞同：1
> 
> 时间：2012-10-24T15:26:44.270
> 
> 标签：php, mysql

在不同的网站上使用相同的脚本会出现一些奇怪的行为。干得好：

我有一个文本区域，用户可以在其中输入文本。他们还使用 enter 进行换行。它存储在 mysql 数据库中，如下所示：

第一行\r\n第二行\r\n\r\n第三行

再次在文本区域内显示该文本时会出现问题。在大多数情况下，一切正常。文本区域内显示以下内容：

```
Line One
Line Two

Line Three 
```

然而，在某些网站上，文本区域内仅显示以下内容：

```
Line One
Line Two    
Line Three 
```

在 db 中，两个换行符 (\r\n\r\n) 仍然存在。但是只显示一个。

这就像我在某些网站上所说的那样，在大多数情况下，像 \r\n\r\n 这样的多个换行符都可以正常显示。

**更新：** 像 JSON 这样的接缝与它有关。它是一个 JSON 字符串，包含类似“Line One\r\nLine Two\r\n\r\nLine Three”的字符串。

```
{"mystring":"Line One\r\nLine Two\r\n\r\nLine Three"}

$row = $db->load(); // get the json string
var_dump($row); // \r\n\r\n still inside!
$jrow = json_decode($row);
var_dump($jrow->mystring); // on some servers multiple newlines are chopped to one 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T15:29:37.733

在 textarea 中显示 DB 值时尝试使用[n2lbr 。](http://php.net/manual/en/function.nl2br.php)这些帮助有用？过去它对我有用。

# java - java api运行windows批处理程序？

> ID：13052393
> 
> 赞同：0
> 
> 时间：2012-10-24T15:26:44.707
> 
> 标签：java, windows, api, class, batch-file

> **可能重复：**
> [如何从我的 Java 应用程序运行批处理文件？](https://stackoverflow.com/questions/615948/how-do-i-run-a-batch-file-from-my-java-application)

是否有运行 Windows 批处理文件的 Java 类？例如，启动批处理文件并接收批处理运行的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:30:10.103

[Apache Commons Exec](http://commons.apache.org/exec/)是一个不错的选择。解决了使用纯 ProcessBuilder 或 Runtime.exec 时会遇到的几个问题。

从项目描述：

> 从 Java 执行外部进程是一个众所周知的问题领域。它本质上是平台相关的，需要开发人员了解和测试平台特定的行为，例如在 Windows 上使用 cmd.exe 或有限的缓冲区大小导致死锁。JRE 对此的支持非常有限，尽管新的 Java SE 1.5 ProcessBuilder 类更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:46:02.943

如果您想使用本机 Java 而没有 3rd 方包，请尝试使用`Runtime`and `Process`。我不是世界上最好的 Java 编码器，但这应该能得到你想要的。它可能需要一些修改来添加一个循环来从输入流中读取所有内容。

```
import java.util.*;
import java.lang.*;
import java.io.*;

public class test
{
    public static void main(String args[])
    {
        try
        {
            Runtime rt = Runtime.getRuntime();
            Process batch = rt.exec("test.bat");

            batch.waitFor();

            //exitValue() contains the ERRORLEVEL from batch file
            System.out.println(batch.exitValue());

            //getInputStream will get all output from stdout
            //getErrorStream will get all error output from stderr
            InputStream inStream = batch.getInputStream();
            byte[] text = new byte[inStream.available()];
            inStream.read(text);

            System.out.println(new String(text));
        }
        catch (IOException ex)
        {
        }
        catch (InterruptedException ex)
        {
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:28:33.220

通常的[`ProcessBuilder`东西](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)适用于批处理文件，[`Runtime#exec`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29). 您正在执行的命令是`cmd.exe`，批处理文件名是它的参数。我相信参数序列是`cmd.exe`, `/c`, `batch_file_name`. *（编辑：是的，事实上，我在[这里发现了一个问题](https://stackoverflow.com/questions/615948/how-do-i-run-a-batch-file-from-my-java-application)，这个问题在答案中重复出现。）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:29:39.323

`Runtime.getRuntime().exec("cmd /c start batFileName.bat");`应该管用。但是要从 java 进程中读取输出，请`start`从上面的命令中删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T15:30:23.147

是的，据我所知，RunTime 类可以。当然，ProcessBuilder 也一样。我已经使用 Java 运行了多个批处理文件。以下是谷歌搜索结果。它具有同样重要的链接

[谷歌结果](http://www.google.lk/#hl=en&output=search&sclient=psy-ab&q=how+to+run+batch+files+using+java+and+get+its+results&oq=how+to+run+batch+files+using+java+and+get+its+results&gs_l=hp.3..33i21.142.13899.0.14103.53.40.0.4.4.5.2693.29898.3-2j3j10j5j5j5j2.32.0...0.0...1c.1.r6MD9zhEFcE&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=5babac200cee15c&bpcl=35466521&biw=1366&bih=643)

# java - 使用 PostgreSQL 获取索引的值

> ID：13052395
> 
> 赞同：0
> 
> 时间：2012-10-24T15:26:47.403
> 
> 标签：java, postgresql

我有一个有两个表的数据库。

一个表（表 A）有 3 列：

```
 idpms serial NOT NULL,
   iduser integer NOT NULL,
   iduser2 integer NOT NULL, 
```

和其他（表B）3列

```
 idmessage serial NOT NULL,
  idpms integer NOT NULL,
  text character varying(255), 
```

我正在使用 Java 来管理我的数据库。

首先，用用户一和用户二的值更新表 A。使用`idpms`插入此数据时生成的值，表 B 更新`idpms`为`text`

我有两个问题：

1.  `idpms`在表 A 中插入数据后如何检索 的值？

2.  在Java中，我可以以某种方式提取`idpms`并将其转换为int吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:21:28.830

Q1：是的。Q2：是的。

串行只是`autoincrementing integer`

插入后没有特殊的命令来获取值，您可以对其使用 sql 查询。如果你想在插入之前获得价值然后[`This article`](http://www.sqlines.com/postgresql/datatypes/serial)讨论它我希望你得到你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:52:24.327

```
insert into t (iduser, iduser2) values (1,2)
returning idpms 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:33:14.580

我认为您正在寻找 KeyHolder 对象。

假设您正在使用 Spring 执行数据库操作：

```
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.jdbc.support.KeyHolder;
// stuff...

    KeyHolder generatedKeyHolder = new GeneratedKeyHolder();

    // Execute the update
    namedJdbcTemplate.update(sqlQuery, params, generatedKeyHolder);

    // Retrieve the map of ALL the autoincremented fields in the table
    // Just get the desired one by field name
    Integer idpms = (Integer) generatedKeyHolder.getKeys().get("idpms");

    // use idbpms as parameter for your next query... 
```

希望有帮助

# aspectj - AspectJ : Aspect 扩展了多个抽象方面

> ID：13052396
> 
> 赞同：1
> 
> 时间：2012-10-24T15:26:58.233
> 
> 标签：aspectj

我有以下疑问：是否有可能以某种方式使用 AspectJ API 中的任何方法访问切入点名称或变量名称（某个类的）？

# c - C 无法调整哈希表的大小

> ID：13052402
> 
> 赞同：2
> 
> 时间：2012-10-24T15:27:19.543
> 
> 标签：c, pointers, hash, segmentation-fault, hashtable

我将在此处发布（我认为）与问题相关的代码片段，但如有必要，我可以粘贴。可能已经发布了足够多的代码：P

我的程序包含一个哈希表，当某个哈希桶达到 20 个条目时，该哈希表需要加倍。尽管我相信逻辑很好，并且它像魅力一样编译，但它抛出了 *Segmentation Fault*。当不调整大小时，代码运行起来就像一个魅力，但调整大小却把事情搞砸了。

谢谢你的帮助 ：）

**错误**

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000401012 in ml_add (ml=0x7fffffffe528, me=0x75a5a0) at mlist.c:74
74          while((cursorNode->next) != NULL){
Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.80.el6_3.5.x86_64
(gdb) backtrace
#0  0x0000000000401012 in ml_add (ml=0x7fffffffe528, me=0x75a5a0) at mlist.c:74
#1  0x0000000000401554 in main (argc=1, argv=0x7fffffffe638) at finddupl.c:39 
```

**哈希表的结构**

```
typedef struct bN { //linked list node containing data and next
    MEntry *nestedEntry;
    struct bN *next;
} bucketNode;

typedef struct bL { // bucket as linked list
    struct bN *first;
    int bucketSize;
} bucket;

struct mlist {
    struct bL *currentTable; //bucket array
}; 
```

**添加功能**

```
int ml_add(MList **ml, MEntry *me){

    MList *tempList;
    tempList = *ml;

    bucketNode *tempNode = (bucketNode *)malloc(sizeof(bucketNode));
    tempNode->nestedEntry = me;
    tempNode->next = NULL;

    unsigned long currentHash = me_hash(me, tableSize);

    if((tempList->currentTable[currentHash].bucketSize) == 0)   {
        tempList->currentTable[currentHash].first = tempNode;
        tempList->currentTable[currentHash].bucketSize = (tempList->currentTable[currentHash].bucketSize) + 1;
    }
    else if((tempList->currentTable[currentHash].bucketSize) == 20){
        printf("About to resize");
        printf("About to resize");
        tempList = ml_resize(&tempList, (tableSize * 2));
        tableSize = tableSize * 2;
        ml_add(&tempList,me);
    }
    else{
        bucketNode *cursorNode;
        cursorNode = tempList->currentTable[currentHash].first;
        while((cursorNode->next) != NULL){
            cursorNode = cursorNode->next;
        }
        cursorNode->next = tempNode;
        tempList->currentTable[currentHash].bucketSize = (tempList->currentTable[currentHash].bucketSize) + 1;
        return 1;
    }

    return 1;

} 
```

**调整大小功能**

```
MList *ml_resize(MList **ml, int newSize){
    MList *oldList;
    oldList = *ml;

    MList *newList;

    if ((newList = (MList *)malloc(sizeof(MList))) != NULL){
        newList->currentTable = (bucket *)malloc(newSize * sizeof(bucket));
        int i;
        for(i = 0; i < newSize; i++){
            newList->currentTable[i].first = NULL;
            newList->currentTable[i].bucketSize = 0;
        }
    }

    int j;
    for(j = 0; j < tableSize; j++){
        bucketNode *cursorNode = oldList->currentTable[j].first;
        bucketNode *nextNode;
        while(cursorNode != NULL){
            nextNode = cursorNode->next;
            ml_transfer(&newList, cursorNode, newSize); 
            cursorNode = nextNode;  
        }
    }

    free(oldList);

    return newList;
} 
```

**转移到新列表功能**

```
void ml_transfer(MList **ml, bucketNode *insertNode, int newSize){

    MList *newList;
    newList = *ml;

    bucketNode *tempNode = insertNode;

    tempNode->next = NULL;

    unsigned long currentHash = me_hash((tempNode->nestedEntry), newSize);

    if((newList->currentTable[currentHash].bucketSize) == 0)    {
        newList->currentTable[currentHash].first = tempNode;
        newList->currentTable[currentHash].bucketSize = (newList->currentTable[currentHash].bucketSize) + 1;
    }
    else{
        bucketNode *cursorNode;
        cursorNode = newList->currentTable[currentHash].first;
        while((cursorNode->next) != NULL){
            cursorNode = cursorNode->next;
        }
        cursorNode->next = tempNode;
        newList->currentTable[currentHash].bucketSize = (newList->currentTable[currentHash].bucketSize) + 1;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:11:29.327

问题很可能在于，无论何时调整哈希表的大小，该`ml_add()`函数都无法更新参数节点。`MList** ml`

当哈希表调整大小时，旧的哈希表被销毁（内部，ml_resize()），但指向调整大小的新哈希表的指针只是在 tempList 变量中更新，这只是 *ml 的本地副本。您还应该更新 *ml 以修改在函数外部保持对 hashTable 的引用的变量，否则，它会指向已删除的无效 Hashtable。尝试以下修改：

```
...
else if((tempList->currentTable[currentHash].bucketSize) == 20){
        printf("About to resize");
        printf("About to resize");
        tempList = ml_resize(&tempList, (tableSize * 2));
        tableSize = tableSize * 2;
        ml_add(&tempList,me);
        *ml = tempList;   // this is necesary to fix the pointer outside the
                           // function, that still points to the hashtable 
                           // memory freed by the resize function
}
... 
```

另请注意我对您的代码中存在的两个内存泄漏所做的评论，我还将考虑@hexist 指出的没有必要在头部的喜欢列表的末尾插入，从而简化了代码和让它更快。

# c# - 使用 SqlBulkCopy 时如何防止重复条目？

> ID：13052403
> 
> 赞同：4
> 
> 时间：2012-10-24T15:27:21.880
> 
> 标签：c#, asp.net, sql, sql-server, duplicates

我正在使用 SqlbulkCopy 将 excel 数据导入 sql server，但问题是我想防止输入任何重复的记录。有没有一种方法可以自动忽略或删除重复项？

```
protected void Button1_Click(object sender, EventArgs e)
{
    string strFileType = System.IO.Path.GetExtension(FileUpload1.FileName).ToString().ToLower();
    string strFileName = FileUpload1.PostedFile.FileName.ToString();

    FileUpload1.SaveAs(Server.MapPath("~/Import/" + strFileName + strFileType));
    string strNewPath = Server.MapPath("~/Import/" + strFileName + strFileType);

    string excelConnectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" + strNewPath + "; Extended Properties=Excel 8.0;");

    // Create Connection to Excel Workbook
    using (OleDbConnection connection = new OleDbConnection(excelConnectionString))
    {
        var command = new OleDbCommand("Select ID,Data FROM [Sheet1$]", connection);

        connection.Open();

        // Create DbDataReader to Data Worksheet
        using (DbDataReader dr = command.ExecuteReader())
        {
            // SQL Server Connection String
            string sqlConnectionString = "Data Source=ARBAAZ-1B14C081;Initial Catalog=abc;Integrated Security=True";

            con.Open();
            DataTable dt1 = new DataTable();
            string s = "select count(*) from ExcelTable";
            string r = "";
            SqlCommand cmd1 = new SqlCommand(s, con);

            try
            {
                SqlDataAdapter da1 = new SqlDataAdapter(cmd1);
                da1.Fill(dt1);
            }
            catch
            {
            }

            int RecordCount;
            RecordCount = Convert.ToInt32(cmd1.ExecuteScalar());
            r = RecordCount.ToString();
            Label1.Text = r;
            con.Close();
            int prv = Convert.ToInt32(r);

            // Bulk Copy to SQL Server
            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
            {
                bulkCopy.DestinationTableName = "ExcelTable";

                SqlBulkCopyColumnMapping mapping1 = new SqlBulkCopyColumnMapping("excelid", "id");
                SqlBulkCopyColumnMapping mapping2 = new SqlBulkCopyColumnMapping("exceldata", "data");

                bulkCopy.ColumnMappings.Add(mapping1);
                bulkCopy.ColumnMappings.Add(mapping2);

                bulkCopy.WriteToServer(dr);
            }

            con.Open();

            DataTable dt = new DataTable();
            s = "select count(*) from ExcelTable";
            r = "";
            SqlCommand cmd = new SqlCommand(s, con);

            try
            {
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                da.Fill(dt);
            }
            catch
            {
            }

            RecordCount = Convert.ToInt32(cmd.ExecuteScalar());
            r = RecordCount.ToString();
            Label1.Text = r;
            con.Close();
            int ltr = Convert.ToInt32(r);

            if (prv == ltr)
            {
                Label1.Text = "No records Added";
            }
            else
            {
                Label1.Text = "Records Added Successfully !";
            }
        }
    }
} 
```

可以通过创建触发器来删除重复项来解决此问题吗？如果是的话怎么办？我是新手，我从未创建过触发器。

另一个问题是，无论我尝试什么，我都无法让列映射工作。当 Excel 表和数据库中的列名不同时，我无法上传数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T15:53:17.043

您可以创建[索引](http://msdn.microsoft.com/en-us/library/ms188783.aspx)

```
CREATE UNIQUE INDEX MyIndex ON ExcelTable(id, data) WITH IGNORE_DUP_KEY 
```

当您将批量插入数据到数据库时，不会插入所有重复值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:59:29.413

不，您可以在将其加载到数据库之前在代码上的 dr 对象上管理它（例如运行 DISTINCT 操作），或者在数据库上创建一个触发器以进行检查。触发器会降低批量插入的性能。

另一种选择是批量插入临时表，然后使用选择 DISTINCT 从临时表中插入目标表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:42:47.310

据我记得，从 excel 文件本身导入时，您可以过滤掉多余的行。

应在 OleDbCommand 构造函数中使用以下 SQL 查询。

```
var command = new OleDbCommand("Select DISTINCT ID,Data FROM [Sheet1$]", connection); 
```

# php - 在这种情况下如何显示日期和时间

> ID：13052405
> 
> 赞同：-3
> 
> 时间：2012-10-24T15:27:26.717
> 
> 标签：php, datetime, time

> **可能重复：**
> [在 PHP 中将一种日期格式转换为另一种](https://stackoverflow.com/questions/2167916/convert-one-date-format-into-another-in-php)
> [日期格式 yyyy-mm-dd => dd-mm-yyyy](https://stackoverflow.com/questions/2487921/convert-date-format-yyyy-mm-dd-dd-mm-yyyy)

我想以 dd-mm-yyyy hr:min:sec 格式显示日期和时间。目前显示为 2012-10-24 16:25:49

$row['for_dataw'] - 是存储在 mySQL 数据库中的日期和时间。我该怎么做才能让它以我想要的方式显示？

```
print("
<tr><TD>
<A HREF=\"".$_SERVER['PHP_SELF']."?wid=".$row['id']."\">".$this->ptitle."</A></TD>
<TD ALIGN=\"center\">reactions:&nbsp;".$this->react."</TD><TD ALIGN=\"center\"  WIDTH=\"20%\">".$row['for_name']."</TD>
<TD ALIGN=\"center\"  WIDTH=\"20%\">".$row['for_dataw']."
</TD></tr>\n\n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:32:00.087

尝试这个：

在这里你创建一个日期时间对象，然后格式化输出。

```
$date = new DateTime($row['for_dataw']);
$date_formated = $date->format('d-m-Y H:i:s'); 
```

现在将 $row['for_dataw'] 替换为 $date_formated。

```
 print("<tr><TD><A HREF=\"".$_SERVER['PHP_SELF']."?wid=".$row['id']."\">".$this->ptitle."</A></TD><TD ALIGN=\"center\">reactions:&nbsp;".$this->react."</TD><TD ALIGN=\"center\"  WIDTH=\"20%\">".$row['for_name']."</TD><TD ALIGN=\"center\"  WIDTH=\"20%\">".$date_formated."</TD></tr>\n\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:32:17.027

```
 echo strftime('%d, %m , %D',strtotime($row['for_dataw'])); 
```

# actionscript-3 - as3xls > 张数始终为 0

> ID：13052409
> 
> 赞同：0
> 
> 时间：2012-10-24T15:27:38.743
> 
> 标签：actionscript-3, excel, air, as3xls

我正在尝试解析从谷歌文档导出的 .xlsx 文件。现在我没有尝试在线访问它，我正在手动下载它并在我的应用程序中复制。

我已经阅读[了在线提供的教程](http://code.google.com/p/as3xls/wiki/Tutorial)，这是我现在拥有的代码：

```
 var contentBA:ByteArray = new ByteArray ();
 var fileToLoad:File = File.applicationDirectory.resolvePath("textLabels.xlsx");        
 var stream:FileStream = new FileStream();
 stream.open(fileToLoad, FileMode.READ);
 stream.readBytes (contentBA, 0, contentBA.length);
 var xls:ExcelFile = new ExcelFile();
 xls.loadFromByteArray(contentBA); 
 trace ("N SHEETS ", xls.sheets.length); 
```

但它的张数始终为 0。我试图更改文件并加载最简单的 excel，但它一直说 0。

这是“.xlsx”扩展名的问题吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:41:08.897

AS3XLS 是为旧文件格式 BIFF Office 97 样式文档编写的。我为我在 AdvancedDataGrid 上的工作编写了一个 XLSX 导出器，但它是专有工作，所以很遗憾我无法共享代码。不过我可以给你一些方向。BIFF 格式使用特殊代码来编码诸如单元格或公式格式之类的东西，二进制格式似乎是为了减少文件大小（并且可能作为一种混淆形式）。相反，XLSX 采用更开放的 XML 方法，创建 BIFF 文件很复杂，并且在微软发布规范之前由 Open Office 团队进行了逆向工程，较新的 XML 格式有很好的文档记录。每个以 x 结尾的新 office 文件的扩展名都是一个存档（就像一个 zip 文件，您可以使用任何存档工具打开它），其中包含定义工作表的一堆 XML 文件。我基本上拿了一张没有任何内容的样本表（打开的 Excel 保存了一个新工作簿），然后将其拼凑起来，并编写了与每个 XML 文件相对应的 AS3 类，并且每个类都实现了一个接口，该接口说它必须有一个方法来获取 XMLString( ) 然后我编写了一个包装器，它将创建所有对象并使用容器模式/遍历来构建所需的所有 XML 文件，并使用 nochump AS3 zip 库将其打包在一起。

可以在此处找到检查 xlsx 或 docx 或任何文件的有用工具：http: [//www.microsoft.com/en-us/download/details.aspx?id=5124](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

如果您在此处讨论 Mac：http: [//openxmldeveloper.org/discussions/development_tools/f/27/p/1494/7453.aspx](http://openxmldeveloper.org/discussions/development_tools/f/27/p/1494/7453.aspx)

一般来说，上面的网站很有帮助 [http://openxmldeveloper.org/](http://openxmldeveloper.org/)

显示（最小）示例的文档 [http://www.ecma-international.org/news/TC45_current_work/Office%20Open%20XML%20Part%203%20-%20Primer.pdf](http://www.ecma-international.org/news/TC45_current_work/Office%20Open%20XML%20Part%203%20-%20Primer.pdf)

NoChump 的 AS3 Zip 库 [http://nochump.com/blog/archives/15](http://nochump.com/blog/archives/15)

基本上，对于更高级的功能，如表格或单元格跨越，我只是尝试了我希望能够在一个简单的 Excel 文件中以编程方式进行的更改，然后使用上面链接的第一个工具将它与另一个没有新功能的工具进行比较，并在适当的情况下实现了更改AS3 类（对应于已更改的 XML 文件的类）。

花了大约 2 周的时间才使课程的组织稳固，但这绝对是可以实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:35:19.020

ExcelFile 是自定义库中的一个类，它表示支持 Excel 2002-2003。您使用什么版本的 Excel？

# php - 为 REST API 传输用户密码

> ID：13052424
> 
> 赞同：8
> 
> 时间：2012-10-24T15:28:15.000
> 
> 标签：php, security, rest, web

我正在设计一个 REST API，但在验证用户的安全性方面存在一些问题。对于身份验证，我不希望密码以纯文本形式通过网络发送。

为了绕过这个问题，我可以发送密码的 SHA-256 哈希（用户名为 salt），因此密码永远不会以纯文本形式发送。在我的数据库中，我将存储以下哈希值：SHA256(password + salt)，如果两个哈希值匹配，我将进行比较。

此选项的问题是我将使用快速哈希算法计算哈希，并且盐不是随机的。

在安全方面，最佳实践是使用慢速签名算法，带有随机盐（如 bcrypt）。

慢速算法不是问题，我可以在客户端使用 bcrypt，但是对于 salt 我不知道该怎么做：

*   Bcrypt 需要一个定义大小的盐，所以我不能输入用户名
*   如果我使用的是随机盐，客户端如何在计算密码哈希之前知道这个盐的值？

所以我可以看到 3 个选项，但没有一个令人满意：

*   我以纯文本形式发送密码（我正在使用 SSL）并将 bcrypt 存储在数据库中 => 仍然容易受到中间人的攻击
*   我使用 SHA256 并发送盐为用户名的哈希（仍在使用 SSL）=> 数据库中的哈希不太安全
*   我使用 bcrypt，我有一个两步过程：我要求给定用户的 salt，然后发送该用户的哈希（仍然使用 ssl）=> 通过尝试使用其他用户名登录我可以获得他的 salt，而不是惊人的

有人有更好的解决方案或一些建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:43:40.367

我认为您可能在这里混淆/混淆了一些问题：

*   如果您将哈希（密码 + 用户名）存储在服务器上，并且身份验证涉及发送哈希（密码 + 用户名），那么除了将密码存储在服务器上之外，您并没有真正取得任何更好的成就。仅长期存储哈希的目标是，如果您有数据泄露（即，攻击者获得对数据库的访问权限），他们仍然无法产生正确的值来进行身份验证。但是如果你做一个简单的比较，这仍然是一个问题。
*   hashing+salt的正确用法是：（1）服务器存储（Salt，hash（Password + Salt）的元组；（2）用户发送（声称的密码）；（3）服务器计算哈希（声称的密码+盐）；（ 4) 如果 hash(claimed Password + Salt) == hash(Password + Salt)，那么它们是真实的。这样，即使攻击者可以访问数据库，他们也无法生成这样的声明密码哈希（声称的密码+盐）是有效的。
*   通过 SSL 发送明文密码并不是“明文”。根据@NullUserException 的评论，除非攻击者破坏了 SSL。只有服务器才能获得密码的值（假设服务器的公钥是有效的，这完全是另一回事）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:21:02.407

在客户端散列的方法有几个优点。其中之一是服务器永远不会获得真正的密码，因此如果服务器以任何方式受到损害，它仍然不会获得真正的密码。另一个是，如果您打算使用慢速散列，它可以减轻服务器端的负载。

但是，散列密码旨在保护您，以防数据库被破坏并且散列被盗。这意味着如果有人掌握了散列密码，他们仍然可以通过发送散列来冒充用户。这意味着，即使你在客户端散列，你仍然需要在服务器上重新散列。

另一个潜在的缺点是，这可能会疏远您未启用 JavaScript 的部分用户群。

* * *

为了解决您的观点：

> Bcrypt 需要一个定义大小的盐，所以我不能输入用户名

不要将用户名用作盐。盐应该是唯一的，用户名（及其派生词）当然不是唯一的。我所说的唯一并不是指服务器唯一，而是在任何地方都是唯一的。请改用加密随机数。

> 如果我使用的是随机盐，客户端如何在计算密码哈希之前知道这个盐的值？

只需让服务器事先发送盐（随机数）。您也可以在客户端上执行此操作，但据我所知，Javascript 没有 CSPRNG，您仍然需要将 nonce 发送回服务器。

> 我以纯文本形式发送密码（我正在使用 SSL）并将 bcrypt 存储在数据库中 => 仍然容易受到中间人的攻击

SSL 旨在防止中间人攻击。除非它以某种方式损坏，否则这不会成为问题。

> 我使用 SHA256 并发送盐为用户名的哈希（仍在使用 SSL）=> 数据库中的哈希不太安全

不要将用户名用作盐。就像我之前说的，你必须在服务器端进行散列，不管你是否在客户端做了。

> 我使用bcrypt，我有一个两步过程：我要求给定用户的盐，然后发送这个用户的哈希（仍然使用ssl）=>通过尝试用另一个用户名登录我可以获得他的盐，不是很棒

确实不厉害。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:48:23.840

1.  使盐保持不变，假设使其成为用户名的哈希值。`hash_val = HASH(HASH('username') + 'password')`存储在服务器端也是如此。
2.  对于身份验证，您的服务器会发送一个一次性随机值，即：`nonce = HASH(RAND())`
3.  您的客户端根据输入凭据计算以下内容`client_hash = HASH( nonce + HASH(HASH('username') + 'password'))`并将其发送回服务器。
4.  服务器执行相同的操作，比较结果哈希，并丢弃随机数。

通过这种方式，通过网络发送的哈希仅使用一次，并且您可以免受“重放”和 MITM 攻击。

另外，研究一下[PBKDF 之](http://en.wikipedia.org/wiki/PBKDF2)类的东西来存储密码而不仅仅是散列，这使得暴力破解和彩虹表完全不切实际。[这是我正在使用的 PHP 实现，因为它还没有在 PHP 中](https://defuse.ca/php-pbkdf2.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:01:58.630

如果可能，创建 API 密钥和密钥（API 用户名/密码，显然每个用户都是唯一的）以使用 API。您应该在您的站点界面中提供一个选项来激活/停用 API 访问以及重新生成 API 密钥和密钥的选项。在这里，用户将在此界面上看到 API 的 API/Secret key。

# php - 动画完成后执行表单JQuery

> ID：13052426
> 
> 赞同：-1
> 
> 时间：2012-10-24T15:28:20.417
> 
> 标签：php, jquery, html

我仅在动画完成并完成后才尝试提交表单

代码 ------> [http://pastie.org/5109573](http://pastie.org/5109573)

```
<form action='loginn.php' method='post'>
    <fieldset>
        <legend>Register</legend>
        <label for='username'>Username*:</label>
        <input type='text' name='username' id='username' maxlength="50"
        />
        <label for='password'>Password*:</label>
        <input type='password' name='password' id='password'
        maxlength="50" /> <a><input class ="animated" type='submit' name='Submit' value='Submit' /></a>

    </fieldset>
</form> 
<span></span>

<script src="jquery.js"></script>
<script>
    $("form").submit(function () {
        event.preventDefault();
        if ($("input:first").val() == "correct") {
            $("span").text("OKAY :D").show().fadeOut(1000);
            $("a").addClass('animated hinge');

            $("span").promise().done(function () {
                return true;
            });

        } else {
            $("span").text("Not valid!").show().fadeOut(1000);
            return false;
        }   
    });
</script>
</body>

</html> 
```

表单在动画完成之前提交！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:42:33.110

您需要使用动画回调函数在动画完成时提交表单，如下所示：

```
$("input[name='Submit']").on('click', function(e) {
    e.preventDefault();
    var form = $(this);
    if ($("input:first").val() == "correct") {
        $("span").text("OKAY :D").show().fadeOut(1000, function() {
            form.submit();
        });
        $("a").addClass('animated hinge');
    } else {
        $("span").text("Not valid!").show().fadeOut(1000);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:32:47.277

问题很可能在这里：

```
$("form").submit(function() {
    event.preventDefault(); 
```

你没有声明`event`. 尝试这个：

```
$("form").submit(function(event) { 
```

## 编辑：

此外，您传递给该`done()`方法的函数不执行任何操作。从该函数返回`true`不会影响事件；事实上，在该函数运行时，事件已经被处理并消失了。

如果您尝试使用`done`回调提交表单，则需要明确执行。为避免再次提交时出现无限循环，请尝试指定命名空间：

```
$("form").submit(function(event) {
    var that = this;
    if (event.namespace != 'verified') {
         event.preventDefault();
         if ($("input:first").val() == "correct") {
              $("span").promise().done(function () {
                   $(that).trigger('submit.verified');
              });
         }  else {  
             $("span").text("Not valid!").show().fadeOut(1000);                             
             return false;
         }
    } 
});​ 
```

# ruby-on-rails - 如何从 gem 定义一个方法以在模型中使用？

> ID：13052427
> 
> 赞同：0
> 
> 时间：2012-10-24T15:28:20.773
> 
> 标签：ruby-on-rails, rubygems

我正在尝试构建一个 gem，我想在`my_method`gem 中定义一个方法并在模型中使用它。

例子：

```
class MyModel < ActiveRecord::Base
    my_method
end 
```

我的宝石：

```
#lib/my_gem.rb
require "my_gem/model_inclusions"
module MyGem

end

#lib/my_gem/model_inclusions.rb
module MyGem
  def self.included(base)
    base.extend ClassMethods
  end

  module ClassMethods
    def my_method

    end

  end
end 
```

当我尝试这个例子时，它给了我`undefined method 'my_method' for <Class:0x00000045434> (NoMethodError)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:32:30.463

```
module NumberInternationalizer
 def my_method
  ...
 end

end

ActiveRecord::Base.send :extend, NumberInternationalizer 
```

# .net - 使用 vb.net 压缩字节数组

> ID：13052431
> 
> 赞同：2
> 
> 时间：2012-10-24T15:28:30.303
> 
> 标签：.net, vb.net, compression

我想用 vb.net 压缩一个字节数组

试试这段代码 但结果很糟糕

数组大小：压缩前 32768 压缩后 42737

```
 public static byte[] Compress(byte[] data)
    {
        MemoryStream ms = new MemoryStream();
        DeflateStream ds = new DeflateStream(ms, CompressionMode.Compress);
        ds.Write(data, 0, data.Length);
        ds.Flush();
        ds.Close();
        return ms.ToArray();
    }
    public static byte[] Decompress(byte[] data)
    {
        const int BUFFER_SIZE = 256;
        byte[] tempArray = new byte[BUFFER_SIZE];
        List<byte[]> tempList = new List<byte[]>();
        int count = 0, length = 0;

        MemoryStream ms = new MemoryStream(data);
        DeflateStream ds = new DeflateStream(ms, CompressionMode.Decompress);

        while ((count = ds.Read(tempArray, 0, BUFFER_SIZE)) > 0)
        {
            if (count == BUFFER_SIZE)
            {
                tempList.Add(tempArray);
                tempArray = new byte[BUFFER_SIZE];
            }
            else
            {
                byte[] temp = new byte[count];
                Array.Copy(tempArray, 0, temp, 0, count);
                tempList.Add(temp);
            }
            length += count;
        }

        byte[] retVal = new byte[length];

        count = 0;
        foreach (byte[] temp in tempList)
        {
            Array.Copy(temp, 0, retVal, count, temp.Length);
            count += temp.Length;
        }

        return retVal;
    } 
```

} } 请问你能告诉我为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:27:02.930

如上所述，不能保证生成的输出会小于输入。话虽如此，您可能想尝试[GZipStream](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)而不是 DeflateStream。平均而言，我有更好的运气获得不错的压缩效果。但是，如果您的输入数据小于 1000 字节左右，您最好存储未压缩的数据，因为您平均会拥有更大的输出大小。

祝你好运。

# html - 使用 drupal_render() 显示内部 html

> ID：13052436
> 
> 赞同：1
> 
> 时间：2012-10-24T15:28:44.317
> 
> 标签：html, drupal-7, drupal-theming, drupal-render

如何在 drupal 7 中使用 drupal_render() 显示内部 html 标签？例如，我在 a 中有一个标签，我想只显示 the 而不是整个 ，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:35:49.763

据我所知，Drupal 不能这样做，相反，您可以将内部 html 标签包装在另一个主题函数（或模板）中，并从主题函数（或模板）调用它，外部标签在哪里，您只需要内部标签标签

# assembly - 调整 mips-gcc 输出以使用 MARS

> ID：13052444
> 
> 赞同：7
> 
> 时间：2012-10-24T15:29:04.080
> 
> 标签：assembly, gcc, mips, mars-simulator, spim

mips-gcc 生成的 MIPS 汇编代码几乎（但不完全）在 Mars MIPS 模拟器上运行。例如：

*   编译器生成“j $31”而不是“jr $31”
*   编译器将 .align 指令放在文本段中，Mars 不允许这样做。

此外，生成的程序集还没有完全设置好，无法正常启动和停止（即最后没有 sycall 10）。

这些问题似乎都可以通过简单的脚本轻松解决；但是，在我重新发明轮子之前，我想知道：（1）是否有任何 gcc 标志可以使这些问题中的一些消失？(2) 有没有人知道现有的程序可以修复 mips-gcc 输出，以便在火星上运行？

（FWIW，我在 gcc 3.3.6 和 4.6.1 上都看到了相同的行为。）

# python - Python中数组中相同类型的平均分数

> ID：13052447
> 
> 赞同：0
> 
> 时间：2012-10-24T15:29:13.347
> 
> 标签：python, arrays, average

假设我有一个如下所示的示例数组：

```
color_values = [{'score': 3, 'color': u'blue'}, {'score': 1, 'color': u'red'}, {'score': 4, 'color': u'green'}, {'score': 4, 'color': u'red'}, {'score': 2, 'color': u'blue'}] 
```

如何在 python 中为一个新数组编写代码，该数组平均所有相同颜色的分数？所以新数组看起来像：

```
color_values = [{'score': 2.5, 'color': u'blue'}, {'score': 2.5, 'color': u'red'}, {'score': 4, 'color': u'green'}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:35:04.173

解决此类问题的最简单（如果不是最短）的方法是`dict`从键构建一个值列表，然后将其聚合：

```
by_color = {}
for obj in color_values:
    by_color.setdefault(obj['color'], []).append(obj['score'])
color_values = [{'score': float(sum(value)) / len(value), 'color': key}
                for key, value in by_color.items()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:41:39.383

使用列表推导：

```
average = lambda l: sum(l) / float(len(l))
[{'score': average([d['score'] for d in color_values if d['color'] is color]),
  'color': color} for color in set(d['color'] for d in color_values)] 
```

输出：

```
>>> color_values = [{'score': 3, 'color': u'blue'}, {'score': 1, 'color': u'red'}, {'score': 4, 'color': u'green'}, {'score': 4, 'color': u'red'}, {'score': 2, 'color': u'blue'}]
>>> average = lambda l: sum(l) / float(len(l))
>>> [{'score': average([d['score'] for d in color_values if d['color'] is color]),
...   'color': color} for color in set(d['color'] for d in color_values)]
[{'color': u'blue', 'score': 2.5}, {'color': u'green', 'score': 4.0}, {'color': u'red', 'score': 2.5}] 
```

# sql-server-2008 - 返回 DateTime 格式的存储过程

> ID：13052451
> 
> 赞同：0
> 
> 时间：2012-10-24T15:29:19.837
> 
> 标签：sql-server-2008, stored-procedures

我创建了一个存储过程如下，

```
CREATE PROCEDURE [dbo].[Access_GetDate]
(
    @Name varchar(255)
)
AS
    SELECT TOP(1) Employee.StartDate 
    FROM Employee 
    WHERE Employee.Name = @Name; 
```

它工作正常但以这种格式返回日期

```
2012-10-24 00:00:00.000 
```

但是我想要这种格式，

```
2012 10 24 
```

只要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:32:58.243

您可以使用以下内容：

```
USE [DBNAME]
GO
CREATE PROCEDURE [dbo].[Access_GetDate]
(
    @Name varchar(255)
)
AS

SELECT TOP(1) replace(convert(char(10), Employee.StartDate, 120), '-', ' ') StartDate
FROM Employee 
WHERE Employee.Name = @Name; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/5530)

# sql - 如何找到进度数据库的用户权限

> ID：13052455
> 
> 赞同：0
> 
> 时间：2012-10-24T15:29:21.883
> 
> 标签：sql, progress-4gl, openedge

列出用户并获取进度数据库的关联表权限的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:29:21.883

为了审计目的，我最终针对我的 odbc 编写了一个快速的 sql 查询。

```
SELECT * FROM sysprogress.systabauth ORDER BY grantee, tbl 
```

看起来还有几个存储过程（至少在我们的环境中）可以满足您的需求：

```
SQL_TABLE_PRIVILEGES
SQL_TABLE_PRIVILEGES2X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:46:39.723

4GL 引擎和 SQL-92 引擎的权限处理方式略有不同。

从 4GL 的角度来看，您希望查看 _User 表来查找用户。IE：

```
for each _user no-lock:
  display _user.
end. 
```

要查看表权限，请查看表的 CAN-* 字段：

```
for each _file no-lock where _hidden = no:
  display
    _file-name
    _can-read
    _can-write
    _can-create
    _can-delete
  .
end. 
```

Tim 指出的文档有更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:00:04.730

用户存储在 _user 表中。您可以通过在此处查阅他们的身份和安全文档来了解有关 Progress 如何进行安全和身份管理的更多信息：http: [//communities.progress.com/pcom/docs/DOC-107735](http://communities.progress.com/pcom/docs/DOC-107735)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:18:26.063

这将为您提供用户列表以及他们对当前数据库中每个表的权限：

```
FOR EACH _user
    NO-LOCK:
    DISPLAY
        _User._Userid
        _User._User-name.
    FOR EACH _File
        WHERE _File._Hidden = FALSE
        NO-LOCK:
        DISPLAY
            _File._file-name FORMAT "x(20)"
            CAN-DO(_File._can-read,_User._userid)
                FORMAT "Y/N" COLUMN-LABEL "Read"
            CAN-DO(_File._can-write,_User._userid)
                FORMAT "Y/N" COLUMN-LABEL "Write"
            CAN-DO(_File._can-create,_User._userid)
                FORMAT "Y/N" COLUMN-LABEL "Create"
            CAN-DO(_File._can-delete,_User._userid)
                FORMAT "Y/N" COLUMN-LABEL "Delete"
            .
    END.
END. 
```

此报告将很快变大，具体取决于数据库中的用户和表的数量。

# java - Tomcat 连接池 - 出厂设置

> ID：13052463
> 
> 赞同：0
> 
> 时间：2012-10-24T15:29:35.610
> 
> 标签：java, jdbc, connection-pooling

[我一直在通过这个](http://people.apache.org/~fhanik/tomcat/jdbc-pool.html)网站学习如何设置Tomcat的连接池。所以我做了一个context.xml文件，放到META-INF目录下。这就是我现在所拥有的。

```
<?xml version="1.0" encoding="UTF-8"?>

<Context>
    <Resource name="jdbc/gmustudent" auth="Container"
        type="javax.sql.DataSource" driverClassName="com.mysql.jdbc.Driver"
        username="root" password="root"
        url="jdbc:mysql://localhost:3306/official"
        maxActive="100" maxIdle="10" minIdle="5" initialSize="5" maxWait="10000" />
</Context> 
```

但是我想指定工厂的类名。但是每次我添加这个属性

```
factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 
```

我的控制台中出现大量错误。以下是其中一些，没有特别的顺序。

```
WARNING: Failed to register in JMX: javax.naming.NamingException: com.mysql.jdbc.Driver
WARNING: Unexpected exception resolving reference java.sql.SQLException: com.mysql.jdbc.Driver
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:gmustudent' did not find a matching property. 
```

因此，当我不指定工厂时，该站点可以正常工作。但是当我这样做时，会抛出错误并且没有任何效果。我对堆栈溢出做了一些研究，发现[了这篇](https://stackoverflow.com/questions/5723830/java-lang-classnotfoundexception-org-apache-tomcat-jdbc-pool-datasourcefactory)文章。因此，我将我的 tomcat 版本从 7.0.11 更改为最新版本，但仍然出现错误。所以后来我想这可能是我的 server.xml 文件中与我的工厂的某种冲突，但我几乎没有经验来打这个电话。但这是我 server.xml 文件中的资源

```
<Resource auth="Container" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase" pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase"/> 
```

那么这是否与我的 context.xml 文件中的工厂发生冲突？还是我在这里完全错了？简而言之，我想了解如何在我的 context.xml 文件中指定工厂而不会出现巨大错误。感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:35:44.997

如果需要，您实际上可以使用 Spring 管理 Web 应用程序中的整个连接。下面是一个使用 PostgreSQL 的例子：

```
<?xml version="1.0" encoding="windows-1252"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    <bean id="myDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.postgresql.Driver"/>
        <property name="url" value="jdbc:postgresql://localhost/mydb"/>
        <property name="username" value="postgres"/>
        <property name="password" value="postgres"/>
    </bean>
</beans> 
```

您可以将其放入 WEB-INF/classes 并使用以下命令加载它：

```
ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("/mycontext.xml"); 
```

在这一点上，我什至不会费心让 Tomcat 管理它。

# facebook - 选项卡调整大小不起作用

> ID：13052466
> 
> 赞同：1
> 
> 时间：2012-10-24T15:29:42.147
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我尝试了从各种来源（包括 Facebook 本身和 stackoverflow）中找到的几个代码片段，但它们都不能增加我为客户创建的自定义选项卡的默认长度。我在下面列出了我尝试过的方法。

我无法使用的一个变量是 Facebook 的 FB.Canvas.setSize 页面上描述的 Canvas Height 设置。在我的 App Dashboard 上找不到它。[http://developers.facebook.com/docs/reference/javascript/FB.Canvas.setSize/](http://developers.facebook.com/docs/reference/javascript/FB.Canvas.setSize/)

它说：“注意：只有在 App Dashboard 中将 Canvas Height 设置为“可设置（默认值：800px）”时才会启用此方法。”

以下是我尝试调整大小的各种方法。

```
<script type="text/javascript"> 
  window.fbAsyncInit = function() {
  FB.init({appId: '215615521792601', status: true, cookie: true, xfbml: true});

<!-- EACH OF THESE THREE LINES BELOW WAS TRIED ONE AT A TIME.-->
FB.Canvas.setAutoResize(true);
//  FB.Canvas.setAutoGrow(true);
// FB.Canvas.setSize({ width: 520, height: 1576 });
 }; 
```

这是我发现的另一种方法：

```
<!-- FACEBOOK TAB LENGTH FIX HEADER START -->
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js" type="text/javascript"></script>
<!-- FACEBOOK TAB LENGTH FIX HEADER END -->

<!-- FACEBOOK TAB LENGTH FIX BODY START --> 
    <script type="text/javascript">
window.fbAsyncInit = function() {
FB.Canvas.setAutoResize( 100 );
}
// Do things that will sometimes call sizeChangeCallback()
function sizeChangeCallback() {
FB.Canvas.setSize({ width: 520, height: 2400 });
}
</script>    
<!-- FACEBOOK TAB LENGTH FIX BODY END --> 
```

感谢您的任何帮助！我完全被难住和沮丧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:37:45.560

画布高度选项位于应用程序仪表板**基本**设置下的“ *Facebook 上的应用程序*”部分。

# android - 单击通知后，已禁用的 Keyguard Lock 会重新启用自身

> ID：13052470
> 
> 赞同：12
> 
> 时间：2012-10-24T15:29:57.843
> 
> 标签：android, notifications, lockscreen, keyguard

在我的应用程序中，我使用下面的代码禁用了键盘锁（即删除锁屏），它工作正常，直到我点击通知栏中的任何通知。如果我单击通知，锁定屏幕会自动重新启用。任何帮助表示赞赏。

```
private void remove_lockscreen() {
    final CheckBoxPreference lock = (CheckBoxPreference) findPreference("remove_lockscreen");
    KeyguardManager km = (KeyguardManager)getSystemService(KEYGUARD_SERVICE);
    KeyguardLock kl = km.newKeyguardLock("keyguard_lock");
    if (lock.isChecked()) {
        prefEdit("remove_lockscreen", 1);
        Toast.makeText(getBaseContext(), "Lockscreen will not be shown", Toast.LENGTH_SHORT).show();
        kl.disableKeyguard();
    }
    else if (!lock.isChecked()) {
        prefEdit("remove_lockscreen", 0);
        Toast.makeText(getBaseContext(), "Lockscreen will be shown", Toast.LENGTH_SHORT).show();
        kl.reenableKeyguard();
        android.os.Process.killProcess(android.os.Process.myPid());
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T10:26:58.793

我已经注意到同样的问题一段时间了。它只发生在 Honeycomb (Android 3.0) 及更高版本上。经过大量的实验和拉扯，我似乎找到了适合我的解决方案。目前尚不清楚到底发生了什么或为什么，但这就是我想出的。

似乎在 Android 3.0+ 上，禁用键盘保护后，当按下通知时，旧的 KeyguardLock 过期，但幸运的`ACTION_USER_PRESENT`是，此时广播被触发，所以我们有机会纠正这个问题。

文档中一点也不明显的一点是，似乎有必要在获得新的 KeyguardLock 并再次禁用它之前重新启用旧的 KeyguardLock。我发现的另一个“陷阱”是，在重新启用旧的 KeyguardLock 后立即禁用新的 KeyguardLock 只会产生间歇性的成功。我通过在禁用前等待 300 毫秒解决了这个问题。

这是我的代码的稍微简化的版本；它应该很容易适应您的应用程序：

```
private KeyguardLock kl;
private KeyguardManager km;

private final Handler mHandler = new Handler();

private final Runnable runDisableKeyguard = new Runnable() {
    public void run() {
        kl = km.newKeyguardLock(getPackageName());
        kl.disableKeyguard();
    }
};

private void setEnablednessOfKeyguard(boolean enabled) {
    if (enabled) {
        if (kl != null) {
            unregisterReceiver(mUserPresentReceiver);
            mHandler.removeCallbacks(runDisableKeyguard);
            kl.reenableKeyguard();
            kl = null;
        }
    } else {
        if (km.inKeyguardRestrictedInputMode()) {
            registerReceiver(mUserPresentReceiver, userPresent);
        } else {
            if (kl != null)
                kl.reenableKeyguard();
            else
                registerReceiver(mUserPresentReceiver, userPresent);

            mHandler.postDelayed(runDisableKeyguard,  300);
        }
    }
}

private final BroadcastReceiver mUserPresentReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (Intent.ACTION_USER_PRESENT.equals(intent.getAction())){
            if (sp_store.getBoolean(KEY_DISABLE_LOCKING, false))
                setEnablednessOfKeyguard(false);
        }
    }
}; 
```

# sql-server-2008 - SQL Server 2008 存储过程中的复合条件

> ID：13052474
> 
> 赞同：0
> 
> 时间：2012-10-24T15:30:15.670
> 
> 标签：sql-server-2008, tsql

您能否告诉我存储过程是否允许处理如下复合条件：

```
if(
    ( (select Count(*) from dbo.Membership where EmailID=@emailID) >0) 
                                  || 
    ((select Count(*) from dbo.Allocation where ResourceEmail=@emailID)>0))
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:39:40.420

使用`OR`代替`||`

如果只是检查是否存在更优化，我会使用 EXISTS 而不是 COUNT 因为它会在第一次存在时停止，而不是全部计数......

```
IF EXISTS(SELECT 1 FROM dbo.Membership WHERE EmailId = @emailID)
    OR EXISTS(SELECT 1 FROM dbo.Allocation where ResourceEmail=@emailID)
    BEGIN
       -- emailID exists in one of the 2 tables
    END 
```

# android - 地理编码器仅对一个地址返回空

> ID：13052478
> 
> 赞同：1
> 
> 时间：2012-10-24T15:30:20.117
> 
> 标签：android, google-geocoder

我正在使用`Geocoder`从地址列表中检索经纬度坐标。它适用于所有这些，除了一个，它返回空。我已经在谷歌地图（在设备应用程序和网络浏览器上）上尝试了该地址，它是一个有效的地址，显示了它的确切位置。

关于如何减轻这种情况的任何想法？

这是未处理的地址：“315 Iron Horse Way, Ste. 101, Providence, RI 02908”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:47:18.247

一种选择是直接调用地理编码 Web 服务。它确实返回了对该地址的有效响应，请自行检查：

```
http://maps.googleapis.com/maps/api/geocode/json?address=315%20Iron%20Horse%20Way,%20Ste.%20101,%20Providence,%20RI%2002908&sensor=false 
```

[在此处](https://developers.google.com/maps/documentation/geocoding/)查找更多信息。

顺便说一句，还要检查[使用限制](https://developers.google.com/maps/documentation/geocoding/#Limits)：

> 使用 Google 地理编码 API 的查询限制为每天 2,500 个地理定位请求。（Google Maps API for Business 的用户每天最多可以执行 100,000 个请求。）

# objective-c - UIButton UIWebView 错误

> ID：13052481
> 
> 赞同：0
> 
> 时间：2012-10-24T15:30:35.550
> 
> 标签：objective-c, uiwebview, uibutton

在 UIWebView didFailWithError 下，我创建了一个 UIButton 并将其添加到视图中：

```
 UIButton *refreshButton = [UIButton buttonWithType:UIButtonTypeCustom];
 ...
 ....
 [self.imageView addSubview:refreshButton]; 
```

单击按钮时，我请求 webView 重新加载给定的 URL。

这个方法完成后 UIButton 会发生什么`didFailWithError`，它会自动释放。

如果在重新加载后再次捕获了 didFailWithError ，那么我是否可以正确地说 UIButton 必须从头开始重新创建。

另外，我将如何从 webViewDidFinishLoad 中的视图中删除 UIButton

```
[refreshButton removefromsuperview] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:34:16.013

> 在这个 didFailWithError 方法完成后 UIButton 会发生什么，它会自动释放。

如果您不删除它或按钮的超级视图，则该按钮将保留在那里...

> 如果重新加载再次失败，我会说 UIButton 必须从头开始重新创建是否正确。

实际上，只有在您`self.imageView`被卸载或您明确删除它或按钮时才需要这样做......

> 另外，我将如何从 webViewDidFinishLoad 中的视图中删除 UIButton
> 
> ```
>  [refreshButton removefromsuperview] 
> ```

这是正确的，但你应该`refreshButton`在你的类中定义为一个属性（否则它将是一个局部变量`didFailWithError`，你不能从其他方法中引用它）。

可能，由于该按钮会触发重新加载，因此您还想在`webViewDidStartLoad:`.

# ruby-on-rails - 将带撇号的字符串传递给辅助方法无法正确显示

> ID：13052484
> 
> 赞同：3
> 
> 时间：2012-10-24T15:30:56.650
> 
> 标签：ruby-on-rails, string

我正在使用 rails 教程中的辅助方法，该方法将两个字符串连接在一起，以便在视图中的标题选择器中使用。它工作得很好，除非字符串中有撇号。

当 :group_name 包含撇号时，结果如下：

```
<title>The website | O&amp;#x27;Malley Brothers</title> 
```

这是方法：app/helpers/application_helper.rb

```
module ApplicationHelper

  def full_title(page_title)
    base_title = "Chicago Improv Festival"
    if page_title.empty?
      base_title
    else
      "#{base_title} | #{page_title}"
    end
  end
end 
```

这是它在布局视图中的使用方式。应用程序/视图/布局/application.html.erb：

```
<title><%= full_title(yield(:title)) %></title> 
```

这是在另一个视图文件中设置 :title 的位置：app/views/submissions/show.html.erb

```
<% provide(:title, @submission.group_name) %> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T15:34:47.043

您需要添加`.html_safe`，这样撇号就不会被转义。

```
"#{base_title} | #{page_title}".html_safe 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-16T09:47:37.997

随便打电话是个坏主意`.html_safe`。除非你完全控制`base_title`然后`page_title`你打开自己的攻击，虽然我不确定什么样的攻击可以利用`<title></title>`标签。

我有同样的问题。解决方案是不使用字符串插值，而是：

```
base_title + ' | ' + page_title 
```

# java - 定时状态机，这行得通吗？

> ID：13052485
> 
> 赞同：1
> 
> 时间：2012-10-24T15:30:58.917
> 
> 标签：java, concurrency

在jave中，我有一个状态机，我需要迁移到自动状态更改，在这我的意思是我需要在某些间隔之后发生状态更改..例如在5秒后状态一，10秒后状态2。

我正在考虑使用 ;

```
 ScheduledExecutorService executor = new ScheduledThreadPoolExecutor(1); 
```

安排一个基本上调用方法的任务，该方法将更改状态，然后安排另一个任务更改为下一个状态，依此类推。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:39:54.020

需要类似这样的代码：

```
ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);
exec.scheduleWithFixedDelay(new Runnable() {
        public void run() {
            // TODO: do something
        }
    }, 
    0, // no wait and start the 1st one
    5, // delay 5 seconds and do the next one
    TimeUnit.SECONDS); 
```

您还可以查看 scheduleAtFixedRate()。

# ruby - 如何在 ruby 中连接到 EC2 cassandra 实例

> ID：13052492
> 
> 赞同：0
> 
> 时间：2012-10-24T15:31:28.717
> 
> 标签：ruby, amazon-ec2, cassandra

我是 cassandra 的新手，所以我按照[本指南](http://www.datastax.com/docs/1.0/install/install_ami)了解如何在 EC2 实例上设置 Cassandra。我已经把它全部设置好并准备好了，但由于某种原因我无法从 ruby​​ 连接。这是我一直在尝试的：

```
 require 'cassandra'
 client = Cassandra.new('PERSON', 'ec2-xx-xx-xxx-xxx.compute-1.amazonaws.com:9160')
   # =>
   #  <Cassandra:0x100cda3b0
   #    @auto_discover_nodes = true,
   #    @column_name_class = {},
   #    @column_name_maker = {},
   #    @is_super = {},
   #    @sub_column_name_class = {},
   #    @sub_column_name_maker = {},
   #    attr_accessor :keyspace = "PERSON",
   #    attr_reader :servers = [
   #      [0] "ec2-xx-xx-xxx-xxx.compute-1.amazonaws.com:9160"
   #    ],
   #    attr_reader :thrift_client_class = ThriftClient < AbstractThriftClient,
   #    attr_reader :thrift_client_options = {
   #      :transport_wrapper => Thrift::FramedTransport < Thrift::BaseTransport,
   #      :thrift_client_class => ThriftClient < AbstractThriftClient,
   #      :protocol => Thrift::BinaryProtocolAccelerated < Thrift::BinaryProtocol
   #    }
   #  > 
```

然后，当我尝试使用客户端时，出现此错误：

```
client.keyspaces
  #=> ThriftClient::NoServersAvailable: No live servers in [ec2-xx-xx-xxx-xxx.compute-1.amazonaws.com:9160]. 
```

我可以通过 SSH 连接，所以我不确定我在这里做错了什么。

更新：

我的安全组包括：

端口：**9160**

协议：**tcp**

来源：**sg-xxxxxxxx**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:14:38.727

连接到 Cassandra 服务器的“来源”在哪里？

**您使用的安全组仅向sg-xxxxxxxx**组中的实例开放端口 9160 。如果您尝试从其他任何地方（例如外部世界）连接，您将不会成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:40:20.123

有两件事要检查：

*   您在客户端和/或服务器上运行防火墙吗？
*   您是否允许在您的 EC2 安全组中从您的客户端访问您的服务器？

# sql-server - 如何让 SQL Server 跟踪日志文件并将新行写入表？

> ID：13052494
> 
> 赞同：3
> 
> 时间：2012-10-24T15:31:43.240
> 
> 标签：sql-server, bulkinsert, tail, logfiles

我有一个创建文本日志文件的应用程序，并且我有一个每日 SQL Server 作业，它截断日志表并使用批量插入来加载当前日期日志。日志文件由许多线程写入，如果不按线程手动整理行，则很难阅读。

有没有办法让 SQL Server 'tail' 给定文件并使表保持最新而无需等待一天结束的批处理？我不想在白天多次运行批处理，因为该表将由 Web 服务监视/搜索/显示。从应用程序直接记录到表中目前也不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:15:23.693

I would have done it through CLR and the job.

1.  To have a job that runs at a certain intervals.
2.  Create CLR function that accepts file name and current line number in the file.

CLR will open file and based on a give number will fetch data after specified line and return back to sql server.

Line number will be stored in auxiliary table for the future synchronization purposes.

Here is article how to write CLR to return table back to sql server : [http://msdn.microsoft.com/en-us/library/ms131103.aspx](http://msdn.microsoft.com/en-us/library/ms131103.aspx)

Good luck.

# php - 从外部 php 脚本写入/读取 joomla 会话变量时如何防止竞争条件？

> ID：13052495
> 
> 赞同：9
> 
> 时间：2012-10-24T15:31:44.983
> 
> 标签：php, session, session-variables, joomla2.5, race-condition

**问题**

*   会话数据的间歇性丢失是否可能是由于竞态条件？如果不是，可能是什么问题？
*   从外部 php 脚本写入/读取 joomla 会话变量时，如何防止出现竞争条件？

**细节**

我在用着

*   Joomla 2.5
*   PHP 5.4.3
*   阿帕奇 2.2.22
*   mysql 5.5.24
*   本地主机上的 wampserver 2。
*   我的脚本在 Joomla 之外。
*   （cometchat 版本 3.0.1）

该脚本使用异步 ajax 请求多次获取和设置 joomla 变量。我在会话中存储的数据是一个数组。**一些阵列数据间歇性地丢失。**一旦用户登录并使用脚本，它似乎会更加一致地发生。

老实说，我不太确定问题出在哪里，但我开始认为我的代码遇到了竞态条件。我认为 Joomla 可能会在完成写入之前尝试读取会话信息，或者它只是没有设置。丢失的信息似乎是随机选择的，数据的丢失是间歇性发生的。

**脚本1**

脚本 1 使用异步 ajax 请求来获取/设置 Joomla 会话变量。这将被多次调用。由于设计原因，直到 ajax 响应成功后才能再次调用脚本 1。

```
$.ajax(
            {   cache:false,
                url: 'script2.php',
                data: { 'change': change},              
                dataType: 'json',               
                success: function(data) 
                {
                    //do something
                }
            }); 
```

这是我在脚本 2 中用于访问 Joomla 和获取/设置会话数据的代码的粗略概念。

**脚本2**

```
<?php
//some code omitted for brevity

$app = &JFactory::getApplication('site');/
$app->initialise();                     

$nottimedout=false;
$session = JFactory::getSession();
$jquizstart = date( 'Y-m-d H:i:s', time() );    //<<-- time of access       
$nottimedout = $session->has('jtimedout');

if ($nottimedout==true)
{
    $jqid = $session->get('jqid');                //<<-- get array from session
    if (isset($_GET['change'])) 
    { 
        $qnumber=$_GET['change'];   
        $firephp->log($qnumber, 'qnumber');
        $jqid[$qnumber][3]=$jquizstart;     //<<--  add time of access to array
        $firephp->log($jqid[$qnumber][3], '$jqid[$qnumber][3]');
        $session->set('jqid', $jqid);       //<<-- store array in Joomla with updated data
    } 
    else
    {
        $firephp->log('CHANGE NOT SET');
    }

    echo json_encode(
                      array("nottimedout" => $nottimedout) 
                    );                  
}
else 
{
    //Do something  
}
?> 
```

**比赛条件测试**

我认为数据可能会被覆盖，所以我使用下面的代码进行了快速测试。每次更新会话数组时，我都会使用更新的数据创建一个新的会话变量。

```
$qnum[$qnumber]=$jquizstart;
$session->set('var'.$qnumber, $qnum); 
```

在另一个脚本中，当网站完成更新时，我检查了每个单独的会话以查看它们是否已设置。

```
//Test for race condition in Joomla session

        for ($counter=0; $counter<=$totalnumber-1; $counter++)
        {
            $racecondition=$session->get('var'.$counter);               
            $firephp->log($racecondition, 'var'.$counter.'=');
        } 
```

**测试结果**

jqid 中缺少的数组信息也从相应的单个会话（仅包含更新数据的会话）中丢失，因此似乎不是数据被覆盖的问题。不过，我不确定这是否反驳了竞争条件。

任何关于您认为可能发生的事情以及如何解决此问题的建议都将受到欢迎。

**编辑**

即使是关于如何在 Joomla 中防止竞争条件的一般性答案也是受欢迎的。谢谢

**编辑2**

我开始怀疑 php5.4 和 Joomla 是否有问题。我听说他们一起玩得不好，我不记得在我从 php5.3 更新之前遇到过这个问题。不过我可能是错的。

**编辑3**

我无计可施。我使用 php 5.3.10 将网站安装在另一台服务器上。我以未登录用户的身份尝试了十次或更多次。没有数据丢失。然后我登录到 Joomla，几乎每次访问该页面时数据都丢失了。如果我不必使用 Joomla 会话就好了！GRRRrrrr

**编辑4**

现在变得绝望，只是尝试任何事情。JRequest 没有用，尽管我还是应该使用它。

由于登录时问题出现的频率更高，我认为这一定是因为会话中存储的内容比用户是访客时要多得多。Jqid 是一个大数组，所以我没有一直更新它，而是尝试制作几个较小的数组并在适当的时候更新每个数组。它完全没有效果。同样，无论如何我可能应该这样做。

**EDIT5B**

在尝试寻找临时解决方案时，我尝试测试会话是否已成功更新（这是在更新会话的同一脚本中完成的）。

**这是我用来检查 jstart 的代码。**

```
//jstart updated
$session->close('jstart');
$try_again_session = JFactory::getSession();
$newjstart=$try_again_session->get('jstart');
$firephp->log($newjstart[$qnumber], 'confirm_jstart_set='); 
```

我发现有趣的是，jstart 在检查期间包含更新的信息，但在完成时它丢失了。我不太确定这意味着什么，但我想如果我们将`JFactory::getSession()`其视为一个变量，那么该变量仅针对该脚本进行更新（有点像局部变量？），`JFactory::getSession()`无论出于何种原因，数据库值都没有写入数据库。`JFactory::getSession()`因此，稍后，当此脚本再次触发时，它会检索保存在数据库中的旧值。

仍然不知道是什么导致会话未写入数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T06:59:57.953

虽然我还没有找到解决问题的方法，但我找到了解决方法。这不是一个好方法，但它有效。每当更新会话变量时，将信息存储在 cookie 中作为备份。稍后在脚本中，检查是否缺少信息并根据需要从 cookie 进行更新。

我宁愿不这样做，但看起来我别无选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T01:03:26.243

终于看起来我找到了解决方案！

我碰巧检查了 apache_error.log (wamp/logs/apache_error.log) 中的错误日志 有很多与会话相关的错误，例如

```
PHP Warning:  session_start(): Cannot send session cache limiter - headers already sent (output started at Z:\\libraries\\joomla\\session\\session.php:96) in Z:\\libraries\\joomla\\session\\session.php on line 532, referer: http://localhost/cq
PHP Warning:  Cannot modify header information - headers already sent by (output started at Z:\\libraries\\joomla\\session\\session.php:96) in Z:\\cometchat\\cometchatcss.php on line 68, referer: http://localhost/cq
PHP Warning:  session_destroy(): Session object destruction failed in Z:\\libraries\\joomla\\session\\session.php on line 96, referer: http://localhost/cq 
```

关闭 cometchat 并重新启动服务器后，我发现间歇性会话数据丢失似乎停止了。更改后 apache_error.log 下不再出现错误

由于问题是间歇性的，我不能 100% 确定它是否已解决，但我有足够的信心将其写成解决方案。我正在使用

彗星版本 3.0.1

我会继续测试它。如果解决方案成立，我将尝试更新版本的 cometchat 并发布结果。

**更新：**它似乎与 cometchat 有关。我已经安装了最新版本 4.6.0，但会话丢失仍在发生。我可以通过在包含我的脚本的页面上排除 cometchat 来解决这个问题。

**有用信息：** 以防万一其他人发现自己在 Joomla 会话中苦苦挣扎-我发现这个网站非常有用[http://tutsforu.com/joomla-module-tutorial/8-joomla-tutorial/75-using-session-in-joomla .html](http://tutsforu.com/joomla-module-tutorial/8-joomla-tutorial/75-using-session-in-joomla.html)

具体来说

```
$session->getId();
$session->get('session.counter');
$session->isNew();
$session->getName();
$session->getState();
$session->getExpire(); 
```

# php - 从 txt 文件 PHP 获取数据（用户选择的单词长度）后显示单词

> ID：13052501
> 
> 赞同：3
> 
> 时间：2012-10-24T15:32:09.353
> 
> 标签：php, arrays

我对 PHP 有点陌生，并且有一个问题想了解一些不同的想法。我正在编写一个 PHP 脚本，它将作为一个带有介绍部分、几个单选按钮和一个提交按钮的 html 表单打开。当用户单击提交时，我选择了一个静态文本文件（电子书），我希望 PHP 脚本根据用户选择的长度从文件中删除单词（单选按钮标记为 1、2、3 ，ETC）。

这是我一直在玩的：

```
<?php
    $myTextFile = "ebook.txt";
    $fileContents = get_file_contents($myTextFile);
    $txtTok = strtok("allremoveddelimiters", $myTextFile);

    while ($txtTok != false){
    echo $txtTok;
    $myTok = strtok("allremoveddelimiters");
    }

?> 
```

我已经把我的字符串去掉了所有选择的分隔符，它在一行上全部回显。这就是我陷入困境的地方。我现在需要做的是从文本文件中提取一定长度的单词（用户通过单选按钮选择），然后将更改后的 txt 文件打印到屏幕上。我看过explode() 函数，但我不确定我是否真的理解它。我也玩过 str_replace() 但它似乎没有做我需要的事情，或者我只是不了解完整的功能。另外，我被建议不要使用 preg_() 函数。我假设我想要获取 txt 文件并将所有单词放入一个数组中，然后将用户选择长度的单词拉出，然后将更新后的数组作为字符串打印回来，但到目前为止我还没有

向任何方向推动肯定会受到赞赏。如果需要任何其他信息，请告知。

示例：完整的字符串将包含以下内容 -

> 如果你没有读过一本名为《汤姆索亚历险记》的书，你就不会了解我；但这没关系。那本书是马克吐温先生写的，他说的主要是实话。有些事情他是在夸大其词，但主要是他说的是实话。那没什么。

如果用户从选项中选择 3 -

> 如果没有读过一本名为《索耶历险记》的书，就不会了解我；那没关系。马克吐温先生写的那本书，他主要说的是实话。那里他伸展的东西，主要是他说实话。那没什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:41:26.623

快速考虑一下，我建议查看正则表达式。这应该很容易让您根据长度提取单词。但是，它们可能很难理解。

我会把你推向 preg_replace 的方向，[http](http://php.net/manual/en/function.preg-replace.php) ://php.net/manual/en/function.preg-replace.php 。这将允许您（一旦您拥有工作正则表达式）提取指定长度的单词，并将它们替换为空字符串。

我建议查看[http://public.kvalley.com/regex/regex.asp 之](http://public.kvalley.com/regex/regex.asp)类的网站来测试创建的正则表达式。

快速浏览后，我相信以下表达式匹配 4 个字母的单词：

```
\b(\w{4})\b 
```

将字符串中的 4 替换为要匹配的单词的长度。为了简单地分解正则表达式，\b 代表单词边界（即空格、句号），\w 代表单词字符（字母或数字），{4} 表示匹配前一项 4 次（所以 4字母词）。我相信以下将起作用。

```
$myReplacedString = preg_replace('/\b(\w{4})\b/', '', $myString);
$myTrimmedString = trim(preg_replace('/\s\s+/', ' ', $myReplacedString)); 
```

其中 $myString 是您从文件中获取的字符串。

我希望这能很好地解释它。

# c# - 必应地图应用程序的目标真的如此狭窄吗？

> ID：13052504
> 
> 赞同：0
> 
> 时间：2012-10-24T15:32:20.257
> 
> 标签：c#, windows-8, microsoft-metro, bing-maps

在[http://msdn.microsoft.com/en-us/library/hh846498.aspx](http://msdn.microsoft.com/en-us/library/hh846498.aspx)中，它指出：“将 Visual Studio 中的活动解决方案平台设置为以下选项之一。C#、Visual Basic：ARM、x86 或 x64 "

这是否意味着我无法创建一个可以在所有这些设备/场景上运行的解决方案？我希望我的应用程序可以在 x86 和 x64 的平板电脑、笔记本电脑和台式机上运行...“AnyCPU”不是一个选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:36:25.623

“AnyCPU”并不意味着您将在 ARM 上运行。它用于将作为 x86 或 x64 运行的代码，因此不包括 ARM。

但是，如果您依赖第三方库（尤其是那些包含非托管代码的库），您通常会发现您需要在 x86 和 x64 之间进行具体选择，以便使用您引用的特定版本的互操作库进行操作。

也就是说，x86 应用程序可以在 x64 机器上正常运行，因此您只需区分 x86 和 ARM。

如果您使用 WinRT 运行时创建应用程序，您应该能够针对 ARM 和 x86 进行交叉编译，但 Bing 地图 API 当前可能不支持 WinRT。

# layout - UICollectionView 中没有部分包装

> ID：13052509
> 
> 赞同：0
> 
> 时间：2012-10-24T15:32:39.853
> 
> 标签：layout, ios6, uicollectionview

我正在使用 UICollectionView 来显示单元格，但我想更改这些部分中的默认包装行为。我不想要任何包装，相反，我希望每个部分都有一个可变宽度的水平滚动视图，如下图所示。 ![在此处输入图像描述](../Images/deee1ceb6c4e37043cee6544429db707.png)

我可以在垂直滚动视图中使用水平滚动视图来做到这一点，但我想使用集合视图。关于如何使用自定义流布局来做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-17T20:26:05.113

您可以嵌套集合视图，但必须小心分离它们的委托，以避免一个集合视图受到另一个集合视图的调用影响。

创建第一个带有垂直滚动和任意多个部分的集合视图。它的委托必须是它嵌入的控制器视图。子类化它的单元格。

在第一个集合视图的单元格中创建第二个具有水平滚动的集合视图。它的委托是第一个集合视图的单元格。

你可以在这里找到一个例子：[嵌套 UICollectionViews的问题](https://stackoverflow.com/q/13741706/2252465)

# asp.net - 根据所选值更改下拉所选项目 (ASP.NET)

> ID：13052510
> 
> 赞同：1
> 
> 时间：2012-10-24T15:32:40.493
> 
> 标签：asp.net, vb.net

我的页面（ddlProgram）上有一个下拉列表，通过数据库查询填充，如下所示：

```
Using dbContext as IRFEntities = New IRFEntities
    Dim getPrograms = (From p in dbContext.IRF_Program _
                       Order By p.name _
                       Select p)
    ddlProgram.DataSource = getPrograms
    ddlProgram.DataTextField = "name"
    ddlProgram.DataValueField = "id"
    ddl.Program.DataBind()
End Using 
```

因此，例如，可能有一个“教育”的 DataTextField 和一个“221”的 ID。

现在，我使用有关访问该站点的个人的信息（如果有）预先填充表单 - 包括如下所示的下拉列表：

```
If getProspect IsNot Nothing Then
  If getProspect.user_id Is Nothing Then
    ddlProgram.SelectedValue = getProspect.Program
  End If
End If 
```

Program 属性包含一个与 Program 的 ID 匹配的数字。因此，例如，这个人可能有一个“221”计划，它与上述教育的“221”相匹配。

目前，应用程序成功地将 DropDownList (ddlProgram) 的 SelectedValue 设置为“221”，但 DDL 的 SelectedItem 保持不变（例如，如果它最初是“History”，在预填充后 ID 为“1”，则它是“历史”，ID 为“221”）。

我想要发生的事情是将 SelectedItem 更新为与 SelectedValue 对应的项目。因此，最后，如果个人在预填充表单时选择了“教育”的“221”，他们会将教育视为所选项目，并且所选值将被正确设置，而现在表单显示错误的 SelectedItem但在幕后拥有正确的 SelectedValue。

下面是来自 Page_Load 事件的代码流的更完整概念：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Page.IsPostBack = False Then
        ' If prospect is coming from unique url
        Dim prospect_url As String = Page.RouteData.Values("value")
        ' Save prospect_url into session variable
        Session("prospect_url") = prospect_url
        Using dbContext As IRFEntities = New IRFEntities
            ' Prepopulate the programs dropdown.
            Dim getPrograms = (From p In dbContext.IRF_Program _
                            Order By p.name _
                             Select p)
            ddlProgram.DataSource = getPrograms
            ddlProgram.DataTextField = "name"
            ddlProgram.DataValueField = "id"
            ddlProgram.DataBind()
        End Using
        Using dbContext As IRFEntities = New IRFEntities
            ' Prepopulate the states dropdown.
            Dim getStates = (From p In dbContext.IRF_States _
                             Order By p.name _
                            Select p)
            ddlState.DataSource = getStates
            ddlState.DataTextField = "name"
            ddlState.DataValueField = "id"
            ddlState.DataBind()
        End Using
        Using dbContext As IRFEntities = New IRFEntities
            ' Grab info. about prospect based on unique url.
            Dim getProspect = (From p In dbContext.IRF_Prospects _
                              Where p.url = prospect_url _
                              Select p).FirstOrDefault
            ' If they have a record...
            If getProspect IsNot Nothing Then
                If getProspect.user_id Is Nothing Then
                    ' Prepopulate the form with their information.
                    ' These must have a value, so we need to make sure that no column is null in the database.
                    ddlProgram.SelectedValue = getProspect.program
                    txtFirst.Text = getProspect.first_name
                    txtLast.Text = getProspect.last_name
                    txtAddress.Text = getProspect.address
                    txtCity.Text = getProspect.city
                    ddlState.SelectedValue = getProspect.state
                    txtZip.Text = getProspect.zip
                    txtPhone.Text = getProspect.phone
                    txtEmail.Text = getProspect.email_address
                    txtYearEnrolling.Text = getProspect.enrolling_in
                Else
                    ' Redirect them to login.
                    Response.Redirect("login.aspx")
                End If
            End If
        End Using
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:48:00.473

你在做什么看起来应该工作。如果在设置值后放置断点并检查 SelectedItem 文本和值，它们是否按预期显示或不匹配？

使用即时窗口检查：

```
ddlProgram.SelectedItem.Text
ddlProgram.SelectedItem.Value 
```

如果它们看起来相同，那么我会假设正在重新触发绑定代码并且正在重新生成列表并选择第一个项目。

要检查这一点，请在绑定代码上设置一个断点并查看它是否被多次触发并适当地更正方法的顺序。

补充：如果它适用于您的本地环境，它应该在发布时工作，如果代码相同？查看您的代码，我首先将一些数据绑定代码分离到单独的方法中，而不是将所有内容都放在 Page_Load 中，一个是因为它是一种很好的做法，二是因为它会使调试更容易。除此之外，我不确定还有什么建议。

# flash - Actionscript 中的 Flash 绘图 - 它比 attachMovie 快吗？

> ID：13052511
> 
> 赞同：2
> 
> 时间：2012-10-24T15:32:41.817
> 
> 标签：flash, actionscript, adobe, actionscript-2

我有一个包含歌曲列表的 Flash 应用程序。它使用 Actionscript 单独绘制每一行。现在，当歌曲数量很大时，应用程序在浏览器中速度较慢的机器上崩溃

`A script is causing Adobe Flash Player to run slowly. If it continues to run, your computer may become unresponsive. Do you want to abort the script?`

现在我想知道，在库中手动为每首歌曲创建行`MovieClip`，而不是绘制整行，只需使用`attachMovie`？

我尝试在 Actionscript 中绘制一次该行，然后尝试了`duplicateMovieClip`，但这并没有将绘图复制过来。

我使用它来检索数据，`LoadVars`这需要一些时间，具体取决于数据量，但时间无关紧要，然后我使用[Sephiroth Serializer](http://www.sephiroth.it/test/unserializer/)类对数据进行反序列化，然后开始绘制每一行。

请让我知道，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:37:02.550

当发生无限循环或给定循环执行时间过长时，会显示此警报。在 10 年的 ActionScript 经验中，我无法想象你会在导致它运行如此缓慢的循环中做什么，所以我猜你的问题只是你有一个无限循环运行（非常很容易做到，如果你不小心的话——我们都去过那里）。

请发布完整的循环代码，以便我们明确回答。

# mysql - SQL - 选择在不同表中具有最大非空行数的用户 ID

> ID：13052521
> 
> 赞同：0
> 
> 时间：2012-10-24T15:33:16.420
> 
> 标签：mysql, sql, oracle

我有 3 张桌子说 A、B、C。

表 A 有`userid`列。
表 B 有`caid`列。
表 C 有`lisid`和`image`列。

一个`userid`可以有一个或几个`caid`s。
一个`caid`可以有一个或几个`lisid`s。

如何选择一个`userid`具有最大行数的`image`列`not null`（在某些`lisid`s`image`列中为空白，在某些中它具有某些值）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:38:43.470

据推测，id 以合理的方式分布在表中。如果是这样，以下应该这样做：

```
select b.userid, count(*)
from TableB b join
     TableC c
     on b.caid = c.caid
where c.image is not null
group by b.userid
order by count(*) desc
limit 1 
```

评论中的问题是如何将 TableA 连接到 TableB 并将 TableB 连接到 TableC。合理的做法是在 TableB 中有 userid，在 TableC 中有 caid。

获得最大值的所有行需要更多的工作。本质上，您必须加入上述查询才能获取列表

```
select s.*
from (select b.userid, count(*) as cnt
      from TableB b join
           TableC c
           on b.caid = c.caid
     ) s
     (select count(*) as maxcnt
      from TableB b join
           TableC c
           on b.caid = c.caid
      group by b.userid
      order by count(*) desc
      limit 1
     ) smax
     on s.cnt = smax.cnt 
```

其他数据库有一组称为窗口函数/排名函数的函数，它们使这种查询变得更加简单。唉，MySQL 不提供这些。

# r - 如何在控制台窗口中离开 R browser() 模式？

> ID：13052522
> 
> 赞同：79
> 
> 时间：2012-10-24T15:33:16.420
> 
> 标签：r, debugging

我试图使用该`browser()`命令进行更早的调试。

现在，我在控制台输入窗口中不断收到以下信息：

```
Browse[13]> 
```

是否有可能摆脱这种情况并回到正常的控制台窗口？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-24T15:36:34.877

帮助页面`?browser`说，键入`c`并按 Enter 将使您退出浏览器并让函数继续运行，或者键入`Q`并按 Enter 将退出浏览器和函数并带您返回顶级提示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-11T19:49:07.073

您实际上需要先输入 f 按回车然后输入 Q。订单完成然后退出。否则你可能不会离开浏览。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-25T03:32:51.617

关闭全局调试

```
debuggingState(on=FALSE) 
```

# powershell - 递归显示未显示正确格式

> ID：13052524
> 
> 赞同：0
> 
> 时间：2012-10-24T15:33:32.833
> 
> 标签：powershell, powershell-2.0

我的 IF-ELSE 语句有问题，我的愚蠢大脑无法弄清楚它到底是什么！

如果我自己运行以下代码，它会以以下格式显示其中的每个目录和文件：

```
get-childitem E:\LogArchive -recurse | where-object {$_.lastwritetime -gt 60} 
```

输出格式：

```
 Directory: E:\LogArchive\W3SVC100

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-----        29/03/2007     15:03        663 ex070329.log.gz
-----        30/03/2007     15:44        860 ex070330.log.gz
-----        03/04/2007     13:41        354 ex070403.log.gz
-----        05/04/2007     14:00        704 ex070405.log.gz
-----        10/04/2007     17:56        921 ex070410.log.gz
-----        11/04/2007     14:55        987 ex070411.log.gz
-----        12/04/2007     15:12        539 ex070412.log.gz 
```

但是，当它在代码中运行时，它显示如下，没有所有文件夹结构和日期等：

```
W3SVC100
W3SVC102
W3SVC105
W3SVC106
W3SVC1108492480
W3SVC112
W3SVC116
W3SVC118
W3SVC1209046175
W3SVC123110214
W3SVC1262336480
W3SVC127
W3SVC134
W3SVC134239081
W3SVC137
W3SVC139
W3SVC145
W3SVC147
W3SVC1499983181
W3SVC15 
```

运行以下脚本时如何获得第一个结果 - 因此显示所有修改日期、上次写入时间等。如果在日期范围内未找到任何文件，我目前正在向用户输入一条消息，然后显示一条消息 - 但是，如果它确实找到了任何文件，则将它们显示为第一个输出类型中列出的......

我实际上认为故障出在这条线上，但无法弄清楚如何修改：

```
if ( $runchilditem.lastwritetime -gt DateToCompare) 
```

......事实上 - 我想把输出到 CSV - 有什么想法可以做到这一点吗？

代码：

```
$path = Read-Host "Please enter the path of the folder yu wish to check - this will check sub-folders as well"
Write-Host "`n"
$days = Read-Host "Please enter in number of DAYS you wish to go back"

$DateToCompare = (Get-Date).AddDays(-$days)

$runningtrue = Get-ChildItem $path -Recurse | where-object {$_.lastwritetime -gt $DateToCompare}

Write-Host "`n"
$runchilditem = @(Get-ChildItem $path -Recurse)
    if ( $runchilditem.lastwritetime -gt DateToCompare) 
        {
            Write-Host "No Files Matching Date Criteria Found"
        }
    else
        {
            $runningtrue
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:47:05.313

如果我了解您的需求，我会这样做：

```
$path = Read-Host 'Path'
[int]$dayDiff = Read-Host 'Number of days to go back'
$offset = $dayDiff * -1
$files = Get-ChildItem $path -Recurse | Where-Object{$_.LastWriteTime -gt (Get-Date).AddDays($offset)}
if(($files.Count -eq 0) -OR ($files -eq $null)){
    'There are no files after {0} in {1}' -f (Get-Date).AddDays($offset), $path
}else{
    $files
    $files | Export-CSV C:\PATH\TO\FILE.csv -NoTypeInfo
} 
```

# javascript - 更改使用 jquery 迭代的 javascript 对象中的值

> ID：13052525
> 
> 赞同：1
> 
> 时间：2012-10-24T15:33:35.763
> 
> 标签：javascript, jquery

好的所以我有这段代码：

```
var el = {a:"b","isSel":true};
$.each(el,function(k,v){
  if(k=="isSel"){
    v=false
  }
})
console.log(el); 
```

但这不会将 isSel 更改为 false ...任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:34:08.510

将其更改为

```
var el = {a:"b","isSel":true};
$.each(el,function(k,v){
  if(k=="isSel"){
    el[k]=false // <= this sets the property named k of el
  }
})
console.log(el); 
```

请注意，如果您只想更改名为`"isSel"`el 的属性，则不必迭代：您可以简单地做

```
el["isSel"] = false; 
```

或者

```
el.isSel = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:37:49.243

不需要循环。可以按如下方式访问该值：

```
el.isSel = false; 
```

或者

```
el["isSel"] = false; 
```

# ios - FBSession：用户拒绝系统范围的权限，但回调仍然通过“打开”状态

> ID：13052527
> 
> 赞同：1
> 
> 时间：2012-10-24T15:33:42.020
> 
> 标签：ios, ios6, facebook-ios-sdk

我正在使用以下代码（Facebook SDK 3.1.1）来确定用户是否已授予我的应用 Facebook 权限。我发现当 Facebook 凭据输入到 iOS 6 设置应用程序但为我的应用程序*关闭时*，会调用以下回调两次，首先是使用`FBSessionStateClosed`，然后是使用`FBSessionStateOpen`. 当没有系统范围的凭据的用户已经通过 OAuth 检索到令牌时，这也是我收到的同一组回调，因此我不确定如何区分这两种情况。

```
[FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    if (status == FBSessionStateOpen) {
        // Handle access

    } else if (status == FBSessionStateClosedLoginFailed) {                                          
        [FBSession.activeSession closeAndClearTokenInformation];

        // Handle no access
    }
}]; 
```

# jdbc - GlassFish 无法初始化 org.apache.cassandra.cql.jdbc.CassandraDriver

> ID：13052528
> 
> 赞同：1
> 
> 时间：2012-10-24T15:33:44.280
> 
> 标签：jdbc, glassfish, cassandra

我正在尝试使用 cassandra-jdbc 驱动程序在 GlassFish 中为 Cassandra 设置连接池。我已将驱动程序 jar（以及它所依赖的所有 jar）放在 ~glassfish-domain/lib/ext 文件夹中，但是当我尝试 ping 时出现以下错误：

```
java.lang.NoClassDefFoundError: Could not initialize class org.apache.cassandra.cql.jdbc.CassandraDriver Could not initialize class org.apache.cassandra.cql.jdbc.CassandraDriver 
```

GlassFish 似乎找到了该类，但无法加载它。由于所有的依赖关系都得到满足，一个可能的原因是静态块中存在异常。我检查了 CassandraDriver 的代码，它实际上有一个静态块：

```
 static
    {
        // Register the CassandraDriver with DriverManager
        try
        {
            CassandraDriver driverInst = new CassandraDriver();
            DriverManager.registerDriver(driverInst);
        }
        catch (SQLException e)
        {
            throw new RuntimeException(e.getMessage());
        }
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:08:06.073

似乎 slf4j 没有正确加载，因为它依赖于 log4j.jar。所以我在类路径中添加它之后，一切似乎都工作正常。这是我的库中所有 jar 的列表：

apache-cassandra-1.1.6.jar
apache-cassandra-clientutil-1.1.6.jar
apache-cassandra-thrift-1.1.6.jar
cassandra-jdbc-1.1.2.jar
commons-lang-2.4.jar
guava-r08 .jar
libthrift-0.7.0.jar
log4j-1.2.14.jar
slf4j-api-1.5.8.jar
slf4j-log4j12-1.5.8.jar

# trigger.io - 手机链接在 Android 中不起作用

> ID：13052529
> 
> 赞同：1
> 
> 时间：2012-10-24T15:33:44.640
> 
> 标签：trigger.io

我正在使用 tel:2125552345 格式链接到电话号码，但它似乎没有启动电话应用程序。我需要特定的权限集吗？我在 Trigger.io App Config 屏幕中找不到任何内容。有任何想法吗？

```
<script id="tpl_office_page" type="text/template">  

        <b>{{officeName}}</b>
        <p>{{addressLine1}}
        <br>{{addressLine2}}</br></p>

        <div class="ui-grid-a">
            <div class="ui-block-a">24x7 Service Desk Toll #</div>
            <div class="ui-block-b"><button type="submit" data-theme="b" data-mini="true" data-inline="true"><a href="tel:{{tollNumber}}">{{tollNumber}}</a></button></div>    
        </div>      

        <div class="ui-grid-a">
            <div class="ui-block-a">24x7 Service Desk Toll-Free #</div>
            <div class="ui-block-b"><button type="submit" data-theme="b" data-mini="true" data-inline="true"><a href="tel:{{tollFreeNumber}}">{{tollFreeNumber}}</a></button></div>    
        </div>

        <div class="ui-grid-a">
            <div class="ui-block-a">24x7 Service Desk Email</div>
            <div class="ui-block-b"><button type="submit" data-theme="b" data-mini="true" data-inline="true"><a href="mailto:{{SDeMail}}">{{SDeMail}}</a></button></div>       
        </div>

        <div class="ui-grid-a">
            <div class="ui-block-a">Local Contact #</div>
            <div class="ui-block-b"><button type="submit" data-theme="b" data-mini="true" data-inline="true"><a href="tel:{{localNumber}}">{{localNumber}}</a></button></div>      
        </div>  

    <ul data-role="listview" data-theme="b" id="office_details">
        <li><a href="">Meeting Room Map</a></li>
        <li>Walk Up Location <br> {{walkUpLocation}} </li>
        <li>Local Escalation Contact <P> {{localEscalationContact}} (<a class="inline" href="tel:{{localEscalationNumber}}">{{localEscalationNumber}}</a>) <P> <a href="mailto:{{localEscalationEmail}}">{{localEscalationEmail}}</a></li>
        <li>ITS Regional Contact <P> {{itsRegionalContact}} <br> <a href="mailto:{{itsEscalationEmail}}">{{itsEscalationEmail}}</a> </li>
        <li><a id="#show_office_map" href="#" data-params="lat={{latitude}}^lng={{longitude}}">Office Location Map</a></li>
    </ul>
</script> 
```

我相信这可能与css格式有关。这是我注意到的

以下作品

```
<p>This is a test: <a href="tel:+1 502 581 5000">+1 502 581 5000</a> 
```

但这不起作用

```
<div class="ui-grid-a">
            <div class="ui-block-a">24x7 Service Desk Toll #</div>
            <div class="ui-block-b"><button type="submit" data-theme="b" data-mini="true" data-inline="true"><a href="tel:+1 502 581 5000">+1 502 581 5000</a></button></div>      
        </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:15:46.897

To link to a phone number simply use html like this:

```
<a href="tel:123">Phone number</a> 
```

If that's not working for you then what Android version/device you are using would be useful to track down the issue.

# node.js - 通过 RTMP 的 NodeJS 和 RED 5 媒体服务器

> ID：13052530
> 
> 赞同：61
> 
> 时间：2012-10-24T15:33:50.100
> 
> 标签：node.js, audio-streaming, red5, rtmp, webrtc

这更像是一个概念问题，而不是直接的“如何做到这一点”。

*通常是否可以实现类似 Flash 的解决方案来在 HTML5 和 nodeJS/binaryJS 中流式传输音频（独立于我们从哪里获取流数据，例如 webRTC 或其他）。如果是这样，你会怎么做？*

从 2010 年开始，只有一个关于 stackoverflow 的查询。从那时起， [NodeJS](https://stackoverflow.com/questions/11891818/rtmp-implementation-in-nodejs-is-possible)和 HTML5 已经成长和成熟。

**人们通常做什么：当使用多媒体流（即视频或音频）到服务器时，在**[getUserMedia()](http://dev.w3.org/2011/webrtc/editor/getusermedia.html) 完全到达之前，在当前时间点肯定没有什么能比 Flash 更好——老实说，这可能[需要一段时间才能达到](http://caniuse.com/#search=getusermedia)99 % 的浏览器用户将完全使用它。

将数据流式传输到服务器的一般做法是使用客户端 Flash 或 Flex 应用程序，然后连接到支持 RTMP 协议的媒体服务器，如[RED5](http://www.red5.org/)、[FMS](http://www.adobe.com/products/adobe-media-server-family.html)或[Wowza](http://www.wowza.com)。例如，通过 RTMP 发送麦克风输入的客户端应用程序可能看起来像（简化版）

```
import flash.net.NetStream;

private var myMic:Microphone;
private var nc:NetConnection;
private var ns:NetStream

nc = new NetConnection();    
ns = new NetStream(nc);
nc.connect(rtmp://localhost/serverApp);
myMic = Microphone.getMicrophone();
ns.attachAudio(myMic); 
```

与服务器应用程序一起，可以轻松地将数据流式传输到服务器。

**我想做的：有一个在**[nodeJS](http://nodejs.org/) 上运行的应用服务器（可能实现[socketIO](http://socket.io/)和[binaryJS](http://binaryjs.com/)）来捕获传入的 RTMP 流。就像是

```
//require
var rtmp = require('node-rtmp'),
var fs = require('fs');

//rtmp server address
var rtmpServer = 'rtmp://localhost';

//create a binary server listening that receives stream data
var RTMPServer = rtmp.RTMPServer();
var server = RTMPServer ({port: 1935});

server.on('connection', function(client){
 //check if user is allowed to do so
 rtmp.newStream(client.stream);
}); 
```

可能最好使用 socketIO 来区分通过 eventEmitters 进行的用户交互。

**可能有什么优势：**一般来说，采用这种方法似乎有点开销，但对我来说可能有优势，我也希望你对此发表评论。

*   [通过运行例如express](http://expressjs.com/)和 socketIO轻松验证用户交互
*   flash（通过 RTMP）和 getUserMedia() 的混合实现（通过添加 binaryJS 和 Mozilla AudioAPI 的二进制传输机制）
*   如果 getUserMedia() 得到完全支持，则可以轻松删除 flash 实现
*   更好地控制 rtmp 跟进和一般用户交互
*   更容易实现到服务器框架中

**更新：** 我与 Malcontenti-Wilson 先生交谈过，他负责编写的[唯一一个 node-rtmp 包](https://github.com/adammw/node-rtmp)，但 8 个月前由于它写得不好而且他遇到了障碍而停产。有人使用过这个或能够检查代码吗？

**更新 2：** Malcontenti-Wilson 先生只是给我发了一封邮件，让我注意到[node-mtrude](https://github.com/nalply/mtrude)（有点奇怪的名字），它正在做我们可能想要的事情。有没有人使用这种包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:31:56.440

是的，这是可能的，但是您有一些问题。

1) Red5 的文档严重不足且漏洞百出。

2) rtmpe/rtmps

3) 性能/可扩展性

4) 1 到 3 是您可以克服的事情，但必须非常深入地了解媒体分发及其所有相关问题。当你完成时，你将成为那里真正了解它的大约 800 人中的一员。你必须走很长的路来解决意想不到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T12:15:35.617

现在有一个名为[vertx](http://vertx.io)的平台可以进行 polygot 开发。因此 red5 jar 可以与现有代码一起包含在您的服务器端，并且可以运行 rtmp 流服务器。在客户端，您可以使用 video.js 或 JW 播放器之类的东西来回放流，并获得 Flash 回退策略。客户端发布，我不确定是否有任何基于 javascript 的 RTMP 实现可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T21:29:37.083

[WCS](http://flashphoner.com/wcs4)是 Fl​​ash、WebRTC、SIP、Websockets 和 Wowza 兼容协议的混合实现：RTSP、RTMP。

流转换方案： [![在此处输入图像描述](../Images/c459ad4723af4a0cbda83146358388fb.png)](https://i.stack.imgur.com/ALAjO.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-18T06:53:45.393

这是一个老问题，但是，我正在为那些偶然发现这个问题的人发布这个替代方案。 **Node 媒体服务器**是一个非常好的媒体服务器，我在我的一个 poc 中使用过它，它支持 rtmp [https://www.npmjs.com/package/node-media-server](https://www.npmjs.com/package/node-media-server)

它的 git repo 也很活泼，实际上我在 poc 中使用它之前已经做了一些更改。而且代码也写得很好。 [https://github.com/illuspas/Node-Media-Server](https://github.com/illuspas/Node-Media-Server)

PS。它的工作原理就像 OBS 用于直播的魅力。

# java - 非 Spring Web 应用程序是否可以使用并行 Spring-MVC 应用程序？

> ID：13052542
> 
> 赞同：3
> 
> 时间：2012-10-24T15:34:20.047
> 
> 标签：java, spring, tomcat, spring-mvc

我有一个非常庞大的 Tomcat 应用程序。对业务非常重要（真正赚钱）。但它是遗留的 Java 代码。含义，JSP（带有大量的 Javascript、Java 代码）、Servlets（带有数千行代码）等等。我们想摆脱这个糟糕的代码。现在已经有另一个应用程序的请求（不同的目的，不同的功能）。我们需要它在另一个上下文根 /NewApp 让我们说在遗留应用程序目录结构下。就像一个迷你网站。它将有一个不同的 URL，甚至可以为一些虚拟主机提供服务。

我们不想扩展 Legacy 代码。我们希望转向更好的技术和更好的做事方式。我们强烈支持 Spring（tiles、jackson 等）以及它必须提供的所有东西，包括 portlet。因此，我们正在考虑将 DispatcherServlet/ContextLoaderListener/configLocation 等引入遗留应用程序 web.xml 并并排拥有一个 spring 应用程序的可能性。

主要原因是新应用严重依赖遗留服务和库。

1.  这种和平共处可能吗？
2.  我们可能面临的挑战是什么？
3.  您能否向我们指出任何示例配置？

不幸的是，我们无法将它们分开。感谢您对此的洞察力。

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:13:41.407

前段时间我们经历了一个类似的用例，同时将中等规模的应用程序从 EJB 2.1 迁移到 Spring。很长一段时间，Spring bean 与 EJB 共存。我们首先在依赖层次结构中选择叶子，因此 Spring bean 依赖于 EJB，而不是相反。这工作得很好，由于 Spring 代理和依赖注入，bean 像任何其他 bean 一样调用 EJB。

在同一个应用程序中，我们为新页面同时使用了 Struts 1 和 Wicket（该死，Struts 页面中甚至还有 Wicket iframe！），我们甚至还有基于 JDBC 的遗留持久性解决方案和 JPA。这一切都运作良好。

要记住的事情：

1.  它仍然是一个应用程序，注意后端缓存

2.  像 Spring bean 一样对待遗留服务。构建一些桥接器/代理/适配器，像注入其他 bean 一样注入遗留服务。不要依赖遗留 API（我想象一些单例、工厂、JNDI 查找）

3.  测试新旧之间的边界会很困难，为大量的嘲笑做好准备。

4.  想想网络安全，你能轻松地集成这两个“应用程序”吗？

5.  让我们面对现实吧，你永远不会将旧代码完全重写为新技术。到那个时候，新技术也会变老，新的开发人员也会进来。但是每次都要尝试一点一点地提高旧代码的质量。重构可以创造奇迹！

配置没有什么特别之处。Spring 必须统治你的整个应用程序是一种误解。它可以用作轻量级、轻薄的附加组件，与应用程序的其余部分相邻。

# r - 对图中的某个区域进行着色 - 基础 R 中的线和点图的组合

> ID：13052543
> 
> 赞同：6
> 
> 时间：2012-10-24T15:34:20.647
> 
> 标签：r, graph, base

我有以下问题：

```
set.seed(1234)
dis = seq(1, 800, 10)
 yvar = rnorm(length (dis), 50, 10)
myd <- data.frame (xvar = dis, yvar = yvar, yvarL = 
yvar - rnorm (length (yvar),5, 1), yvarU = yvar + rnorm (length (yvar), 5, 1))
plot(myd$xvar,myd$yvar,pch=19,cex=.75,col="blue")
points(myd$xvar,myd$yvarL,col="gray", pch=19,cex=.5)
points(myd$xvar,myd$yvarU,col="gray", pch=19,cex=.5) 
```

Y 具有三个值 - Y、上置信度和下置信度。我想在轴上的两个间隔之间着色。图表的其余部分仅是点。假设的产品图应该是相似的（不完全是）。

![在此处输入图像描述](../Images/dd7d2ad239a923bcdf0242433247a12e.png)

如何在 myd$xvar 中在 650 到 690 和 210 到 280 之间的两个区间之间着色和生成线图。我尝试根据这篇文章进行一些多边形拟合（[在 R 中的 xy 曲线图中着色](https://stackoverflow.com/questions/9449597/shading-within-xy-curve-plot-in-r)），但没有成功。

```
polygon(c(myd$xvar[1:200], myd$xvar[200:1]), c(myd$xvar[1:200],
   myd$yvar[200:1]), col="gray") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:08:20.130

您的数据的一个问题是 myd 只有 80 个观察值，但您试图绘制 200 个...只需将 x 变量输入两次`polygon()`（一次按原样，一次按相反顺序），然​​后输入 y 变量（首先是较低的按原样限制，然后按相反顺序设置上限）。然后你有你的阴影：

```
polygon(c(myd$xvar[20:40], myd$xvar[40:20]),c(myd$yvarL[20:40],
 myd$yvarU[40:20]), col="gray") 
```

但是，阴影会覆盖一些点，因此您必须重新绘制它们：

```
points(myd$xvar,myd$yvar,pch=19,cex=.75,col="blue")
points(myd$xvar,myd$yvarL,col="gray", pch=19,cex=.5)
points(myd$xvar,myd$yvarU,col="gray", pch=19,cex=.5) 
```

编辑：下面的 rfan 要求根据 x 坐标而不是索引进行着色，并在阴影区域添加一条线。为此，提取相关点的索引是有意义的（我们使用对 myd$xvar 进行排序）：

```
index <- which(myd$xvar>=200 & myd$xvar<=400) 
```

然后我们根据这个索引进行绘图，如果需要，我们可以轻松地修改它：

```
polygon(c(myd$xvar[index], myd$xvar[rev(index)]),c(myd$yvarL[index], 
 myd$yvarU[rev(index)]), col="gray") 
```

现在，添加一条线和附加点：

```
lines(myd$xvar[index],myd$yvar[index],pch=19,cex=.75,col="blue",type="o")
points(myd$xvar,myd$yvarL,col="gray", pch=19,cex=.5)
points(myd$xvar,myd$yvarU,col="gray", pch=19,cex=.5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:19:10.520

与斯蒂芬类似的答案：

```
plot(myd$xvar,myd$yvar,pch=19,cex=.75,col="blue")
points(myd$xvar,myd$yvarL,col="gray", pch=19,cex=.5)
points(myd$xvar,myd$yvarU,col="gray", pch=19,cex=.5)
polygon(c(smyd$xvar[1:nrow(smyd)], smyd$xvar[nrow(smyd):1]), 
 c(smyd$yvarL[1:nrow(smyd)], smyd$yvarU[nrow(smyd):1]), col="gray", border = NA)
points(smyd$xvar,smyd$yvar,col="red", pch=19,cex=1.5)
lines (smyd$xvar,smyd$yvar,col="red", pch=19,cex=1.5)

polygon(c(smyd1$xvar[1:nrow(smyd1)], smyd1$xvar[nrow(smyd1):1]),
c(smyd1$yvarL[1:nrow(smyd1)], smyd1$yvarU[nrow(smyd1):1]), col="yellow", border = NA)
points(smyd1$xvar,smyd1$yvar,col="green4", pch=19,cex=1.5)
lines (smyd1$xvar,smyd1$yvar,col="green4", pch=19,cex=1.5) 
```

给你： ![在此处输入图像描述](../Images/2c6e1ce3780b059af245c550e8ab5649.png)

# java - 在同一个项目中使用 ASM 和 Javassist 的注意事项

> ID：13052544
> 
> 赞同：2
> 
> 时间：2012-10-24T15:34:22.030
> 
> 标签：java, bytecode, javassist, java-bytecode-asm

ASM 和 Javassist 在生成/转换 Java 字节码方面似乎有不同的优点和缺点。例如，Javassist 的字节码生成工具非常易于使用，因为它就像在字符串中生成程序并即时编译一样简单。但是，有时 ASM 的访问者方法对于其他类型的任务（例如，将 Java 例程翻译成另一种语言）似乎更方便。

是否可以在同一个 Java 项目中使用这两个库，以便我可以根据每个不同场景的要求从最方便的库中获益？有什么特别的注意事项要记住吗？我有直觉，我不能使用这两个库来操作同一类的字节码，但也许这也是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:43:06.323

从常识来看，如果你费心学习 ASM 和低级 Java 字节码，那么 Javassist 就显得有些多余了。但从实际的角度来看，没有什么能阻止你同时使用这两种方法。如果我没记错的话，Hibernate 就是这样做的。

至于在同一个类上使用 ASM 和 Javassist，无需深入每个框架 API 的细节，如果您只使用字节数组，您可以使用一个工具加载和转换，获取结果字节数组并使用另一个框架来处理字节数组。

# .htaccess - Symfony2：如何在不输入“app.php”的情况下访问应用程序

> ID：13052546
> 
> 赞同：1
> 
> 时间：2012-10-24T15:34:23.030
> 
> 标签：.htaccess, symfony

将我的应用程序（由**1&1**托管）上线后，我可以通过键入**mydomain.com/app.php**正常访问它（我的域指向 /myapp/web），但是当我只键入**mydomain.com**时，我得到一个内部服务器错误 ：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 webadmin@kundenserver.de 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

但是，localhost/myapp/web 在我的计算机上工作正常（没有 app.php）

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:14:20.203

好的，我在[http://faq.1and1.fr/hebergements/htaccess/4.html上找到了答案](http://faq.1and1.fr/hebergements/htaccess/4.html)

我必须将以下行添加到我的 .htaccess 文件中：

```
RewriteBase / 
```

如果这可以帮助这里是我完整的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:57:06.407

我以前也遇到过这个问题。就我而言，这是因为 Web 服务器已配置，因此只要没有指示任何文件（当您访问 www.someurl.com 而不是 www.someurl.com/somefile.php 时就是这种情况），它会查找一个名为`index.php`.

您可能会遇到同样的问题，因为没有`web/index.php`文件。如果是这种情况，您只需要更改配置。

`.htaccess`在您的目录中创建一个名为的文件`web/`（如果它尚不存在）。然后添加（或修改）以下指令：

```
DirectoryIndex app.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:42:51.833

也许你可以检查你的系统日志。但是当您尝试在 1&1 网络空间上运行您的网站时出现一些错误，我遇到了同样的问题。它仅在我将 PHP 版本设置为 PHP6 时才运行，非常奇怪，但您可以尝试：

1.) 清除您的应用程序缓存
2.) 将您的 PHP 版本设置为 PHP5 或更高版本。
3.) 检查您的系统日志，它们应该位于根目录的文件夹中。

[1&1激活PHP5](http://amauf.de/1und1-php5-aktivieren/)

# hadoop - Hadoop设置ubuntu名称节点，数据节点不工作-jps

> ID：13052547
> 
> 赞同：1
> 
> 时间：2012-10-24T15:34:38.077
> 
> 标签：hadoop, ubuntu-12.04

我试图在我的电脑上使用 Ubuntu 12.10 设置 Hadoop 单节点集群。参考[Michael-noll.com 上的教程](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

*   一切都很顺利，直到我执行了' **/usr/local/hadoop/bin/start-all.sh** '命令

*   之后我执行了 java 进程状态“ **/usr/local/hadoop$ jps** ”

然后我发现 , `Data Node`,`Task Tracker`没有`Name Node`列出（即不工作）

任何人都可以在这种情况下提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T17:17:09.103

重置您的 core-site.xml 文件

```
 <property>
    <name>hadoop.tmp.dir</name>
    <value>/home/rlk/hduser</value>
  </property>
  <property>
    <name>fs.default.name</name>
    <value>hdfs://localhost/</value>
  </property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T22:40:49.123

1.  好吧，我认为您将 Hadoop 安装到`/usr/local/hadoop`

2.  当你运行时`start-all.sh`，hadoop 会将日志写入`/usr/local/hadoop/logs`目录，但是，可能 Hadoop 没有对该目录的写入权限。

3.  请检查所有的日志文件，`/usr/local/hadoop/logs/`看看是否有问题。

4.  如何解决？

    4.1 修改`/usr/local/hadoop/conf/hadoop-env.sh`，即添加`export HADOOP_LOG_DIR=/tmp/hadoop/logs`

    4.2 重启Hadoop，再次jps，查看日志文件

5.  如果您再次遇到问题，我建议您在此处发布相关日志。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T05:54:38.567

`core-site.xml`您应该对您在for property中提到的目录具有写权限`hadoop.tmp.dir`。我已在此链接[Hadoop 系列单节点安装中对此进行了解释。](http://lets-do-something-big.blogspot.in/2014/01/hadoop-series-single-node-installation.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-10T13:10:33.743

格式化名称节点并再次使用`start-all.sh`命令启动所有服务并检查使用的状态`jps`。如果您在不停止服务的情况下退出应用程序，则可能会发生这种情况。因此，在您退出应用程序之前，请确保您已停止使用`stop-all.sh`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-15T10:57:52.730

**包装验证**

1.  `$ rpm ­‐ql hadoop-­‐0.20-­‐conf-­‐pseudo`

**格式化 NameNode**

2.  `sudo ­‐u hdfs hdfs namenode-­‐format`

3.  `$ for service in` /etc/init.d/hadoop* `> do > sudo $service stop > done`

**启动 HDFS**

4.  启动 HDFS

    `$ for service in /etc/init.d/hadoop-­‐hdfs-­‐* > do > sudo $service start > done`

**更改本地主机属性**

5.更改 localhost 属性 [http://localhost:50070](http://localhost:50070) 通过执行上述步骤，您可以启动您的 namenode 和 datanode 服务。

# node.js - Node.js：如何附加到正在运行的进程并使用控制台调试服务器？

> ID：13052548
> 
> 赞同：53
> 
> 时间：2012-10-24T15:34:40.443
> 
> 标签：node.js, console

我使用“永远”来运行我的应用程序。我想附加到运行环境来检查我的应用程序。那么我能做什么呢？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-24T16:34:01.707

来自[http://nodejs.org/api/debugger.html](http://nodejs.org/api/debugger.html)：

> ### 高级用法
> 
> 可以通过使用 --debug 命令行标志启动 Node 或使用 SIGUSR1 向现有 Node 进程发送信号来启用和访问 V8 调试器。

找到您的进程的 PID，`node`然后发送`SIGUSR1`应该可以解决问题：

```
kill -s SIGUSR1 nodejs-pid 
```

然后运行`node-inspector`并浏览到它指示的 URL。[本教程](http://blog.nodeknockout.com/post/34843655876/debugging-with-node-inspector)中的更多内容。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2018-01-11T18:55:40.530

从**Node 6.3**开始，node 有一个内置的调试器，可以通过执行以下操作来触发（即使在生产应用程序中）：

```
kill -USR1 <node-pid> 
```

节点进程会吐出如下内容：

```
Debugger listening on ws://127.0.0.1:9229/f3f6f226-7dbc-4009-95fa-d516ba132fbd
For help see https://nodejs.org/en/docs/inspector 
```

*   如果您可以从浏览器访问服务器，则可以使用[`chrome://inspect`](https://medium.com/@paul_irish/debugging-node-js-nightlies-with-chrome-devtools-7c4a1b95ae27)on `http://host.domain:9229`。
*   如果您无法通过浏览器连接（例如，服务器位于防火墙生产集群中），您可以激活 REPL 以通过命令行进行检查：

    ```
    node inspect -p <node-pid> 
    ```

*   如果您无法从浏览器访问服务器，但您可以通过 SSH 连接到该服务器，然后设置 SSH 端口转发 ( )，几秒钟后`ssh -nNTL 9229:localhost:9229 <username>@<your_host> -i <keyfile>.pem`您将在下面找到您的脚本。`chrome://inspect`

在此版本之前，它[`node-inspector`](https://github.com/node-inspector/node-inspector)是用于调试 Node 进程的单独工具。但是，正如它自己的页面上所记录的那样，它大多已被弃用，因为现在捆绑的调试器得到了积极维护并提供了更高级的功能。有关此更改的更多信息，请参阅[此线程](https://github.com/nodejs/node/issues/8464)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-09-12T08:12:51.563

# Windows 用户

## */编辑 2022*

这是我目前使用的，在***settings.json***中配置。这将提示您选择一个进程，它会自动向它发送调试信号。阅读下面的更多内容以了解正在发生的事情。

[![在此处输入图像描述](../Images/1d5a99fabdc8efa67e260d8b860bcc88.png)](https://i.stack.imgur.com/O5DIM.png)

```
 "launch": {
    "version": "0.2.0",
    "configurations": [
      {
        "name": "Attach to Process (Pick)",
        "type": "node",
        "request": "attach",
        "processId": "${command:PickProcess}",
        "port": 9229,
      }
    ]
  }, 
```

* * *

## 之前

如果您在不支持 POSIX 信号的 Windows 上，您可以从**另一个** `cmd`.

```
node -e "process._debugProcess(PID)" 
```

* * *

如需**详细指南**，或在 VSCode 中设置调试，请按照以下简单步骤操作：

1.  在 VSCode 中，`launch.json`通过单击滚轮打开配置或新建
    ^(*（这是调试视图`Ctrl``Shift``D`）*)

[![在此处输入图像描述](../Images/9709aa77024b15587fc75dae7bea474b.png)](https://i.stack.imgur.com/QvhhY.png)

2.  [节点默认](https://nodejs.org/de/docs/guides/debugging-getting-started/#enable-inspector)会监听 9229 端口，所以添加这个配置：

```
{
  "type": "node",
  "request": "attach",
  "name": "Attach to 9229",
  "port": 9229
}, 
```

3.  打开任务管理器并找到你的节点进程的PID，我可以通过它所在的文件夹
    来识别我的。 `"build"``index.js`[![在此处输入图像描述](../Images/cae548feb059b01406a43e8e61a4da91.png)](https://i.stack.imgur.com/Lzjsy.png)
4.  打开**另一个** `cmd`或`git-bash`并运行此命令，您的进程的PID在
    哪里。`21392`

```
node -e "process._debugProcess(21392)" 
```

5.  你应该看到这个[![侦听 ws:9229 的调试器](../Images/05b1d9d6aee2d18f9cd6680aef57b0e5.png)](https://i.stack.imgur.com/knXRA.png)
6.  从 VSCode *Attach 到 9229开始调试*
    [![在此处输入图像描述](../Images/2b47bd5f14b97213bbab4ec77e9d2b88.png)](https://i.stack.imgur.com/2aa2C.png)

现在一切都应该准备好了。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-03-04T09:45:42.563

对我来说，运行节点版本 6.9.10 我必须：

`kill -USR1 <node-pid>`

然后

`node debug -p <node-pid>`

此版本节点的`node inspect -p <node-pid>`命令失败。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-25T14:22:00.330

您可以将[REPL](http://nodejs.org/api/repl.html)添加到您的应用程序。例如，如果您添加一个 REPL 来侦听 localhost 端口 5001，您将照常启动您的应用程序并使用 telnet: 登录`telnet localhost 5001`。这将带您进入一个提示，您可以在其中直接与您的应用进行交互。

或者，如果您需要让您的应用程序在达到某个状态时“暂停”，您需要添加“调试器；” 行到你想要这些断点的代码区域，然后在[调试](http://nodejs.org/api/debugger.html)模式下启动应用程序。

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-14T16:58:16.647

即使这是一个古老但已回答的问题，也有一种更简单的方法，即将参数传递给节点：

```
forever start -c 'node --debug-brk' main.js 
```

如果您不想等待附加调试器，请替换`--debug-brk`为`--debug`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-01T19:38:51.480

**要检查 nodejs 并对其进行调试，请使用此命令**

`forever -w -c 'node --inspect=IP:PORT' file.js`

*   **-c**如果用于**自定义命令**
*   如果文件被**重新保存**，使用**-w 重新加载**
***   您可以**通过 ip 和端口**进行**外部检查***   端口自定义为**9229****

# java - FFT Jtransformation与MATLAB的速度

> ID：13052552
> 
> 赞同：0
> 
> 时间：2012-10-24T15:34:56.357
> 
> 标签：java, matlab, fft

我在 JTransfroms 中有关于 {1850 000,1} 元素的向量 .. 但日志：

```
exception in thread "main" java.lang.OutOfMemoryError: Java heap space 1350 000 
```

它有效......但仍然需要大约 1 分钟！它对我来说太多了..有线程..在 matlab 中大约需要 2 秒。在 Jtrans 的官方网站上。

> :limitations: 非二次方大小的一维变换是顺序的（当使用混合基数时）。2 次幂大小的一维变换只能使用 2 或 4 个线程。
> 
> 线程数必须是二的幂数。

有人能解释一下这个二次方大小是多少吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:43:13.733

2 的幂是（在计算机如此存在的情况下）只有因子 2 的数字。那是 2、4、8、16、...、1024 2048 等。因此，如果您使用正好有 1024 个数字的向量作为输入，它应该走得更快。

我真的无法说出“大约 {1850 000,1} 个元素”是什么意思，尽管您的数字可能要高得多？该库显然不会使用超过 4 个线程（无论如何在许多系统上不会做太多事情），因此您不应该获得太多的速度增益。也许还有另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:49:56.590

我将发布一些 FFT 的背景知识来解释 radix-2 的限制。

首先要注意的是，大多数 FFT 实现都使用[CT FFT 算法。](http://en.wikipedia.org/wiki/Cooley%E2%80%93Tukey_FFT_algorithm)这是通过将 FFT 拆分为越来越小的 FFT 来实现的，就像合并排序首先将排序限制为基本情况一样。

CT 算法*最常用*的方法是将问题分**成两半**（`N = N0 / 2`）。这并不是说混合基数的情况是不可能的，但是由于以下原因，“二的幂”的情况是最有效的，因此也是最常用的。

现在大多数 FFT 实现的主要瓶颈不是算法的实现，而是硬件 - 处理器管道等等。显然，这些都建立在二进制逻辑基础之上，导致带宽几乎完全是 2 ^N。

出于这个原因，在内存中使用 2 ^N个字节的 FFT 将被更快地计算，这是由于寄存器中的精确拟合和原始问题的精确细分。

TL;DR：用不相关的数据（0）填充您的 FFT 向量，直到它达到最接近的 2 次方。然后只使用有效的结果数据。

但是，您的异常看起来好像您只是内存不足。您使用的是 32 位操作系统吗？如果是这样，由于您的大型操作，您可能会超出分配的 2GB 进程内存或其他一些限制。

# selenium - 使用新的查找方法扩展 WebElement

> ID：13052553
> 
> 赞同：3
> 
> 时间：2012-10-24T15:34:58.460
> 
> 标签：selenium, webdriver, selenium-webdriver

我有一些我经常使用的自定义查找方法，而不是 WebDriver.findElement 和 WebDriver.findElements。这些方法采用包含 By 定位器和正则表达式的自定义定位器对象，它们返回与 By 定位器匹配且其文本与正则表达式匹配的 WebElement 或 WebElement。

这些在很多场合都非常有用，我想为 WebElement.findElement 和 WebElement.findElements 提供相同的功能。我可以创建一个实现 WebElement 接口的新类，并且还包含这些新的 find 方法，但我对这是否真的有效感到困惑。毕竟，当我运行 FireFox 时，驱动程序返回的元素是 FireFoxWebElements。当我运行 IE 时，它们是 InternetExplorerElements。这两个都实现了 WebElement，但它们与我实现 WebElement 的自定义类完全无关，对吧？他们不会有这个额外的功能，他们不能被视为我的自定义类，因为他们......不是。

由于 WebDriver.findElement(s) 是 WebElements 的唯一“来源”，也就是说，它是 WebElements 到达我的代码的基本方式，然后我可以更改我的自定义 findElement(s) 方法（调用 WebDriver.findElement(s )，最终) 为任何包含我的特殊 element.find 方法的 WebElement 返回一个新的自定义包装器？这样，到达我的代码中的所有 WebElement 都将是这些自定义元素以及我想要的额外查找方法。对？如果是这样，这样的包装类会是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:06:47.277

一种更简洁的方法是子类化该类，并为和`By`提供自定义实现。该架构正是为这种类型的可扩展性而设计的。然后可以将此子类作为参数传递给两者的and方法，并且没有问题。`By.findElement()``By.findElements()``By``findElement()``findElements()``WebDriver``WebElement`

或者，您可以重新调整自定义查找方法的用途。如果他们当前接受一个`WebDriver`对象，请考虑将其更改为接受一个`SearchContext`参数，这是一个既扩展`WebDriver`又`WebElement`扩展的接口。`SearchContext`是`findElement()`and`findElements()`方法的实际来源。

# xcode - 如何使用 Xcode 自动创建分发证书？

> ID：13052554
> 
> 赞同：10
> 
> 时间：2012-10-24T15:34:59.897
> 
> 标签：xcode, certificate

随后苹果建议使用 Xcode 在此处创建分发证书和信息：http: [//developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html)

根本无法创建该证书！已经多次删除了我所有的密钥、证书和配置文件以从头开始，但什么也没有。Xcode 成功地仅自动创建了开发证书而不是分发证书（我在团队中具有管理员角色而不是代理）。

当我手动创建该证书时，我被迫在我的钥匙串中使用两个密钥 - 一个由 Xcode 在开发证书创建过程中创建，第二个（具有相同信息）我必须在 CSR 过程中手动创建分发证书！

那么，有没有人设法用 Xcode4.5 创建分发证书

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T00:36:55.850

每个开发团队只能拥有 1 个分发证书。您还必须从配置门户手动下载它，据我所知，您无法通过管理器安装它。

登录 developer.apple.com，单击 iOS 配置门户，单击证书，然后单击分发。您应该在那里看到分发证书，您可以下载该证书。注意 - 如果其他人安装了证书，我很确定您将无法从下载中安装它。您必须从他们的钥匙串中导出它。

6 年后编辑 - 现在每个团队可以拥有更多的分发证书。App Store 帐户 3 个，企业帐户 2 个。

# c# - 允许通过 Internet 安装 ClickOnce 应用程序

> ID：13052559
> 
> 赞同：1
> 
> 时间：2012-10-24T15:35:18.123
> 
> 标签：c#, clickonce

我有一个[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)应用程序，我想在 Internet 上的网站上提供下载。

我遇到了一个问题，因为 ClickOnce 安装文件的链接只能从[Internet Explorer](http://en.wikipedia.org/wiki/Internet_Explorer)运行（[Firefox](http://en.wikipedia.org/wiki/Mozilla_Firefox)和[Chrome](http://en.wikipedia.org/wiki/Google_Chrome)可以做到，但只能预装插件）。用户当时可能正在使用 Chrome，并且很可能没有安装扩展程序。

我的想法是克服这个问题，而不是指向安装的 ClickOnce 应用程序链接，而是让用户下载 setup.exe 文件（用[.NET](http://en.wikipedia.org/wiki/.NET_Framework)编写）。这个 setup.exe 文件除了使用 System.Process 启动 iexplore.exe 并将 ClickOnce 应用程序的 URL 作为命令行参数传递给它，通过 Internet Explorer启动[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)之外什么也不做。

我认为这应该可以正常工作并克服我的问题。您是否看到这种方法存在问题，或者您会推荐一种不同的方法来处理这个问题？

# postgresql - 当其他行有值时，Postgres 什么也不返回

> ID：13052562
> 
> 赞同：3
> 
> 时间：2012-10-24T15:35:18.950
> 
> 标签：postgresql

我正在尝试进行查询，其中在数据库中有多个行中有多个组，但如果其中一行满足某个条件，我希望查询不返回任何内容。

我尝试使用 CASE 但这似乎不起作用

```
select *, 
    CASE WHEN groupname = 'is_%' and groupname != 'is_banned' THEN false END 
from usersgroups 
WHERE username = 'tu1'; 
```

不知道该怎么办。

谢谢

编辑：

这就是我拥有数据库 atm 的方式

```
username|usergroup
tu1     |is_user
tu1     |is_banned
tu2     |is_user 
```

所以我想要得到的是查询仅在用户属于任何 is_ 组并且他们不是 is_banned 时才返回值，但问题是它们位于不同的行上

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:46:50.787

```
select *
from usersgroups 
WHERE
    username = 'tu1'
    and exists (
        select 1
        from usersgroups
        where
            username = 'tu1'
            and groupname like 'is_%'
    )
    and not exists (
        select 1
        from usersgroups
        where
            username = 'tu1'
            and groupname = 'is_banned'
    ) 
```

# gwt - GWT 数据网格分页

> ID：13052563
> 
> 赞同：1
> 
> 时间：2012-10-24T15:35:24.657
> 
> 标签：gwt

我正在尝试使用分页功能实现 DataGrid，但它似乎不起作用。我使用 SimplePager 对象遵循 GWT Showcase of Features 中 DataGrid 的示例实现，但是当我将此代码添加到我的 GWT 客户端类时

类属性：

```
DataGrid<List<String>> table = new DataGrid<List<String>>();  
private static List<ArrayList<String>> data = new ArrayList<ArrayList<String>>();
@UiField(provided = true)
SimplePager pager; 
```

方法：

```
SimplePager.Resources pagerResources = GWT.create(SimplePager.Resources.class);
pager = new SimplePager(TextLocation.CENTER, pagerResources, false, 10, true);
pager.setDisplay(table); 
```

我没有看到页面滚动箭头，也无法浏览我的表格页面。

# java - 在同一响应中设置多个 cookie

> ID：13052565
> 
> 赞同：8
> 
> 时间：2012-10-24T15:35:32.830
> 
> 标签：java, servlets, cookies

我需要在一个响应中创建多个**持久性cookie。**

做的像

```
response.addCookie(new Cookie("1","1"));
response.addCookie(new Cookie("2","2")); 
```

将创建一个带有 2 个“Set-Cookie”标头的响应。但他们不会坚持。我需要“到期”日期。

```
expires=Wed, 07-Nov-2012 14:52:08 GMT 
```

看到j​​avax.servlet.http.Cookie怎么不支持“过期”，我之前用过

```
String cookieString="cookieName=content;Path=/;expires=Wed, 07-Nov-2012 14:52:08 GMT;"
response.setHeader("Set-Cookie", cookieString); 
```

这就像一个魅力，但第二次使用 response.setHeader("Set-Cookie",newCookie) 会覆盖第一个。

那么，问题是是否有任何方法可以在响应中添加几个相同的命名标头？或者是否有其他正确的方法可以做到这一点？

我已经看到使用逗号分隔 cookie 的建议，但我的经验是浏览器只会读取第一个 cookie。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T15:40:04.627

你需要[`addHeader()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#addHeader%28java.lang.String,%20java.lang.String%29)而不是[`setHeader()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#setHeader%28java.lang.String,%20java.lang.String%29). 前者*添加*一个标题，而后者*设置*（并因此覆盖任何旧的）一个标题。

```
response.addHeader("Set-Cookie", cookieString1);
response.addHeader("Set-Cookie", cookieString2); 
```

然而，正确的方法是使用类[`setMaxAge()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#setMaxAge%28int%29)的方法`Cookie`（以秒为单位的过期时间）并使用`addCookie()`通常的方法。

```
Cookie cookie1 = new Cookie("1","1");
cookie1.setMaxAge(1209600);
response.addCookie(cookie1);
Cookie cookie2 = new Cookie("2","2");
cookie2.setMaxAge(1209600);
response.addCookie(cookie2); 
```

# iphone - 如何单独更改 iPhone4 的按钮大小？

> ID：13052566
> 
> 赞同：1
> 
> 时间：2012-10-24T15:35:34.703
> 
> 标签：iphone, objective-c, ios, cocoa-touch

如何分别更改 iPhone 4 屏幕尺寸的按钮尺寸？这些按钮非常适合 iPhone 5 的屏幕尺寸，但不适合 iPhone 4 的屏幕尺寸。所以我可能需要单独调整 iPhone 4 的按钮尺寸，除非我在这里遗漏了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:41:28.280

嗨，对于 iphone 4，您可以使用自动调整大小的蒙版或约束，或者您可以检测视图高度并更改按钮的框架

```
if(self.view.height == 568.0)
{
    //Set frame for iphone 5
}
else
{
    //Set frame for iphone 4
} 
```

# java - 编译时错误“最终变量未初始化”

> ID：13052571
> 
> 赞同：0
> 
> 时间：2012-10-24T15:35:45.527
> 
> 标签：java, constructor, final

我有一个问题，在尝试几个代码片段时我遇到了一个代码

```
class O
{
    final int i;
    O()
    {
        i=10;
    }
    O(int j)// error here as THE BLANK FINAL FIELD i IS NOT INITIALIZED
    {
        j=20;
        System.out.println(j);
    }
}
class Manager3
{
    public static void main(final String[] args) 
    {
        O n1=new O();
        //O n2=new O(10);
        //n1.i=20;
        //System.out.println(j1.i);
    }
} 
```

但是如果我用参数评论构造函数，我不会得到任何错误。

我的问题是为什么当我将构造函数都放入代码时会出现此编译时错误，以及为什么在删除参数化构造函数时不会出现任何错误。

我知道我们必须初始化我的最终变量，但我在构造函数中初始化它，因此如果我编写这段代码：-

```
class O
{
    final int i;
    O()
    {
        i=10;
    }

}
class Manager3
{
    public static void main(final String[] args) 
    {
        O n1=new O();

    }
} 
```

一切正常，代码正在编译。

我的问题是如果我引入另一个构造函数有什么问题。甚至错误也出现在我编写参数化缺点的那一行。

我对 JAVA 有所了解，但我对这段代码感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T15:36:56.967

```
final int i; 
```

您已定义`i`为`final`。您只能在构造函数中为最终变量赋值。

```
 O(int j)// error here as THE BLANK FINAL FIELD i IS NOT INITIALIZED
    {
        j=20;
        System.out.println(j);
    } 
```

在这里，您没有为`i`. 如果有人使用此构造函数（带参数的构造函数）创建对象，`i`则不会分配值。

**如何解决这个问题？**

正如你所说，要么你必须评论这个构造函数（或）`i`在这个构造函数中赋值，就像你在其他构造函数中所做的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T15:40:53.843

```
 O(int j){
        this(); // <----- you can add this line. 
        j=20;
        System.out.println(j);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:58:45.030

“i”是一个实例最终变量，因此我们需要在我定义的每个构造函数中初始化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:39:30.613

变量必须`final`在声明时初始化或分配给**构造函数主体**中的值。如果您不初始化`final`变量，则会出现编译器错误。

如果您调用第二个构造函数，则该变量永远不会被分配给一个值。

# php - PHP 正则表达式不匹配？

> ID：13052575
> 
> 赞同：0
> 
> 时间：2012-10-24T15:36:00.537
> 
> 标签：php

我有以下正则表达式

`@version:\'(?:CKEditor )?([\d\.]+)(?:.+revision:\'([\d]+))?@`

它应该匹配

`version:"4.0 Beta"`

并返回 4.0 Beta

但它似乎不起作用？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:37:42.600

您的正则表达式匹配单引号，而不是双引号。请尝试以下操作。

```
@version:\"(?:CKEditor )?([\d\.]+)(?:.+revision:\"([\d]+))?@ 
```

# scala - 第一个生成器会确定理解的结果类型吗？

> ID：13052577
> 
> 赞同：2
> 
> 时间：2012-10-24T15:36:05.110
> 
> 标签：scala

假设我有以下代码：

```
object ForComprehension {
  def generateSomeSeq(n: Int): List[Int] = (1 to n).toList
  def square(n: Int): List[Int] =
    for (x <- generateSomeSeq(n)) yield x * x
} 
```

一切正常。但是由于某种原因，我将第一种方法的结果修改`Set`为`List`：

```
object ForComprehension {
  def generateSomeSeq(n: Int): Set[Int] = (1 to n).toSet
  def square(n: Int): List[Int] =
    for (x <- generateSomeSeq(n)) yield x * x
} 
```

scala 编译器抱怨在第一个生成器中存在类型不匹配的理解。尽管它是有道理的，但我仍然希望它在这两种情况下都有效。毕竟，没有视觉线索可以理解它期望 a`List`而不是 a `Set`。我需要阅读两个签名来诊断类型不匹配错误。

或者我不应该期望这样的句法局部性首先用于理解，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:44:45.763

您示例中的 for 理解实际上只是调用的语法糖，`map`并且返回类型`map`确实由调用它的类型决定。更准确地说，它是由`CanBuildFrom`可用的隐式决定的。因此，为了使您的代码编译，您可以将 for 理解转换为 map 调用并显式传递通常隐含的参数：

```
object ForComprehension {
  def generateSomeSeq(n: Int): Set[Int] = (1 to n).toSet
  def square(n: Int): List[Int] = 
    generateSomeSeq(n).map(x => x * x)(scala.collection.breakOut)
} 
```

关于如何`breakOut`工作，请参阅[这个问题](https://stackoverflow.com/questions/1715681/scala-2-8-breakout)。

# wpf - WPF Catch Ctrl + N 不工作

> ID：13052579
> 
> 赞同：0
> 
> 时间：2012-10-24T15:36:23.630
> 
> 标签：wpf, keyboard-shortcuts, keyboard-events, kiosk

您好，感谢您的阅读。

我在 Kiosk 风格的 WPF 应用程序中有一个嵌入式 WebBrowser，我试图阻止用户使用 Ctrl + O 或 Ctrl + N 键盘快捷键来绕过我限制他们访问的页面。

这是我的代码，它位于应用程序的最顶部窗口中：

```
// This is in the constructor of the window under InitializeComponent();
AddHandler(Keyboard.PreviewKeyDownEvent, (System.Windows.Input.KeyEventHandler)HandleKeyDownEvent);

private void HandleKeyDownEvent(object sender, System.Windows.Input.KeyEventArgs e)
{
   Key key = (e.Key == Key.System) ? e.SystemKey : e.Key;
   if(e.KeyboardDevice.Modifiers == ModifierKeys.Control)
   {
      switch(key)
      {
         case Key.N:
         case Key.O:
         case Key.P:
            MessageBox.Show("BOOM");
            break;
      }
   }
} 
```

当我按下 Ctrl + N 时，事件处理程序正确触发，但 e.Key 是 Key.Control 而不是 Key.N。当按下 Ctrl 按钮时（如预期的那样），事件似乎立即触发，但未能捕获 N 键。我尝试过使用 Keyboard.IsKeyDown(Key.N) 并且它也返回 false。

欢迎任何意见或建议。

谢谢，

亚当

**编辑：我还尝试在浏览器本身上使用 NewWindow、NewWindow2 和 NewWindow3 事件来阻止新窗口。那里也没有运气。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:32:16.420

好吧，我感觉自己就像一个完全麻木的头骨！事实证明它就像添加以下代码行一样简单。我希望这可以帮助其他可能像我一样尝试非常复杂的解决方案的人。

```
 browser.WebBrowserShortcutsEnabled = false; 
```

# android - 指向 urlConnection.connect() 的 Android 运行时错误“无法启动活动”

> ID：13052581
> 
> 赞同：2
> 
> 时间：2012-10-24T15:36:25.450
> 
> 标签：android, httpwebrequest, runtime-error

我收到以下错误：

```
10-24 13:31:14.252: E/AndroidRuntime(21983): FATAL EXCEPTION: main
10-24 13:31:14.252: E/AndroidRuntime(21983): java.lang.RuntimeException: Unable to start activity ComponentInfo{br.com.campusfqm.cfqm/br.com.campusfqm.cfqm.Launch}: android.os.NetworkOnMainThreadException
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.os.Looper.loop(Looper.java:137)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.app.ActivityThread.main(ActivityThread.java:4507)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at java.lang.reflect.Method.invokeNative(Native Method)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at java.lang.reflect.Method.invoke(Method.java:511)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at dalvik.system.NativeStart.main(Native Method)
10-24 13:31:14.252: E/AndroidRuntime(21983): Caused by: android.os.NetworkOnMainThreadException
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at br.com.campusfqm.cfqm.Launch.onCreate(Launch.java:54)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.app.Activity.performCreate(Activity.java:4465)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
10-24 13:31:14.252: E/AndroidRuntime(21983):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
10-24 13:31:14.252: E/AndroidRuntime(21983):    ... 11 more 
```

指向

```
urlConnection.connect(); 
```

这是完整的代码

```
 URL url = new URL("http://www.google.com/");

        //create the new connection
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        //set up some things on the connection
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);

        //and connect!
        urlConnection.connect();

        //set the path where we want to save the file
        //in this case, going to save it on the root directory of the
        //sd card.
        File SDCardRoot = Environment.getExternalStorageDirectory();
        //create a new file, specifying the path, and the filename
        //which we want to save the file as.
        File file = new File(SDCardRoot,fileName);

        //this will be used to write the downloaded data into the file we created
        FileOutputStream fileOutput = new FileOutputStream(file);

        //this will be used in reading the data from the internet
        InputStream inputStream = urlConnection.getInputStream();

        //this is the total size of the file
        int totalSize = urlConnection.getContentLength();
        //variable to store total downloaded bytes
        int downloadedSize = 0;

        //create a buffer...
        byte[] buffer = new byte[1024];
        int bufferLength = 0; //used to store a temporary size of the buffer

        //now, read through the input buffer and write the contents to the file
        while ( (bufferLength = inputStream.read(buffer)) > 0 ) {
                //add the data in the buffer to the file in the file output stream (the file on the sd card
                fileOutput.write(buffer, 0, bufferLength);
                //add up the size so we know how much is downloaded
                downloadedSize += bufferLength;
                //this is where you would do something to report the prgress, like this maybe
                Log.v("cfqm",""+downloadedSize+"/"+totalSize);

        }
        //close the output stream when done
        fileOutput.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T15:38:52.363

这`android.os.NetworkOnMainThreadException`意味着您正在主线程上进行网络连接。用于`AsyncTask or thread`执行网络操作而不是 UI 线程

[在此处阅读有关 AsyncTask 的信息](http://developer.android.com/reference/android/os/AsyncTask.html)

[例子](http://labs.makemachine.net/2010/05/android-asynctask-example/)

[类似问题](https://stackoverflow.com/questions/8612406/android-os-networkonmainthreadexception-need-to-use-async-task)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T15:40:15.843

```
 Caused by: android.os.NetworkOnMainThreadException 
```

所有网络操作都需要在单独的线程上执行，不应该在主线程上。您需要使用 Async Task 来执行网络操作。

这是关于如何使用异步任务的好[android 教程](http://developer.android.com/training/basics/network-ops/connecting.html)

# solr - 搜索“$”时，当索引内容为“$1)”时，如何让 Solr 仅突出显示“$”？

> ID：13052582
> 
> 赞同：0
> 
> 时间：2012-10-24T15:36:25.483
> 
> 标签：solr, highlighting

我在突出显示时遇到问题。

我已设置 Solr 以返回特定字段的全部内容。 **这部分工作得很好，**即该字段的全部内容都与结果一起返回。**不起作用**的是突出显示字段内容的特定部分。

该字段包含`$1),`. 使用分析器，我去掉了括号和逗号，将美元符号分解成自己的单词，留下`$ 1`. 在 analysis.jsp 中，我使用`$1),`作为索引值，`$`作为查询值，它匹配`$`成功。但是，当我重新索引并点击选择处理程序 URL 时，突出显示的部分仍然是`<em>$1),</em>`.

我如何确保`$1),`实际突出显示的唯一部分是`$`，即`<em>$</em>1),`？

需要明确的是，我得到了这个`<em>$1),</em>`，但我真的想要这个`<em>$</em>1),`。

我正在使用具有 FastVectorHighlighting 和 SingleFragListBuilder 的 Solr 3.6。根据此处的建议，我尝试使用默认荧光笔，但也无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:00:26.730

您需要根据[此 wiki 部分](http://wiki.apache.org/solr/HighlightingParameters#hl.fragsize)修改您的 solrconfig.xml并告诉 solr 突出显示的片段的大小。我从来没有用 1 尝试过，但它应该可以工作（我们用 3 个或更多字符突出显示单词，并且 3 工作正常，所以我猜 1 是一样的）

# html - 在锚标签内创建锚标签

> ID：13052598
> 
> 赞同：84
> 
> 时间：2012-10-24T15:37:06.240
> 
> 标签：html

在我的随机测试中，我看到了我将一个锚标记放在另一个锚标记中的行为。我做了一个[jsfiddle](http://jsfiddle.net/3euyA/3/)。

```
<a class="groupPopper">
     <a class="name"> content</a>
</a>​ 
```

但在开发者工具中，它看起来不同：

![在此处输入图像描述](../Images/a95b2ad90b10a4f6c6b043c4e71d7bc1.png)

我相信我们不能将锚标记放在另一个锚标记中，因为单击内部锚将使单击事件冒泡到父锚标记，这是不允许的。

我的假设正确吗？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-24T17:55:25.387

正如@j08691 所述，`a`HTML 语法中禁止嵌套元素。HTML 规范没有说明原因；他们只是强调规则。

在实际方面，浏览器在其解析规则中有效地强制执行此限制，因此与许多其他问题不同，违反规范是行不通的。解析器有效地将`<a>`打开元素内的开始标记`a`视为在开始新元素之前隐式终止打开元素。

所以如果你写`<a href=foo>foo <a href=bar>bar</a> zap</a>`，你不会得到嵌套元素。浏览器会将其解析为`<a href=foo>foo</a> <a href=bar>bar</a> zap`，即两个连续链接后跟一些纯文本。

嵌套元素本身并没有什么不合逻辑的`a`：它们可以被实现为点击“foo”或“zap”激活外部链接，点击“bar”激活内部链接。但是我看不出使用这种结构的理由，HTML 的设计者可能也没有看到，所以他们决定禁止它，从而简化事情。

（如果您真的想模拟嵌套链接，可以使用普通链接作为外部链接，`span`使用具有合适事件处理程序的元素作为内部“链接”。或者，您可以复制链接：`<a href=foo>foo</a> <a href=bar>bar</a> <a href=foo>zap</a>`。）

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-24T15:38:25.483

[嵌套链接是非法的。](http://www.w3.org/TR/html401/struct/links.html#h-12.2.2)

> A 元素定义的链接和锚点不得嵌套；A 元素不得包含任何其他 A 元素。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-08-29T11:25:35.297

我遇到了与@thinkbonobo[相同的问题](https://stackoverflow.com/a/34797422)，并找到了一种无需 JavaScript 的方法：

```
.outer {
  position: relative;
  background-color: red;
}

.outer > a {
  position: absolute;
  top: 0; left: 0; bottom: 0; right: 0;
}

.inner {
  position: relative;
  pointer-events: none;
  z-index: 1;
}

.inner a {
  pointer-events: all;
}
```

```
<div class="outer">
  <a href="#overlay-link"></a>
  <div class="inner">
    You can click on the text of this red box. It also contains a
    <a href="#inner-link">W3C compliant hyperlink.</a>
  </div>
</div>
```

诀窍是让一个锚点覆盖整个`.outer`div，然后给内部 div 中的所有其他锚点一个正值`z-index`。完全归功于[https://bdwm.be/html5-alternative-nested-anchor-tags/](https://bdwm.be/html5-alternative-nested-anchor-tags/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-01-02T06:33:31.747

你可以使用对象标签来解决这个问题。如

```
<a><object><a></a></object></a> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-14T18:49:35.490

当我试图通过也有按钮来使 div 面板可点击时，我偶然发现了这个问题。我推荐的解决方法是使用 javascript 事件。

这是我创建的一个 codepen 示例.... [http://codepen.io/thinkbonobo/pen/gPxJGV](http://codepen.io/thinkbonobo/pen/gPxJGV)

这是它的html部分：

# 链接中嵌入的链接示例....

```
<div class=panel onclick="alert('We\'ll hi-ii-ii-ide')">
  If you say run<br>
  <button onclick="app.hitMe(event)">more</button><br>
  <br>
  And if you say hide...<br>
</div> 
```

请注意如何捕获内部链接的事件并使用 stopPropagation()。这对于确保外部触发器不运行至关重要。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-24T15:38:21.940

它是无效的 HTML。

您不能嵌套`a`元素。

因此，根据定义，行为是未定义的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-27T18:56:19.130

对于嵌套锚点，为了防止内部事件冒泡到外部事件，您希望在单击内部事件后立即停止传播。

OnClick 内部事件，使用 e.stopPropagation();

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-05T05:28:51.550

不要那样做。我在我的应用程序中遇到了同样的问题。您可以简单地`<div>`在顶部添加标签并`<a>`在子级别添加标签。就像是：

```
<div id="myDiv"><a href="#"></a>
     <a href="#"></a>
</div> 
```

确保在脚本文件中添加 myDiv 的点击事件。

`window.location.href = "#dashboardDetails";`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-25T08:52:48.423

您不能嵌套“a”标签。而是将外部容器设置为“位置：相对”，将第二个“a”设置为“位置：绝对”并增加其 z-index 值。你会得到同样的效果。

```
<div style="position:relative">
<a href="page2.php"><img src="image-1.png"></a>
<a style="position:absolute;top:0;z-index:99" href="page1.php"></a>
</div> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-17T19:04:02.237

我知道这是一篇旧帖子，但我想指出 user9147812 的回答比其他任何建议都好。这就是我堆叠整个东西的方式。

```
 <style>
    * {
      padding: 0;
      margin: 0 border:0;
      outline: 0;
    }

    .outer_anchor {
      display: inline-block;
      padding: 5px 8px;
      margin: 2px;
      border: 1px solid #252632;
      border-radius: 3px;
      background: #1c1d26;
      color: #fff;
      text-shadow: 0 1px 0 #616161;
      box-shadow: 1px 1px 3px #000;
      transform: translateY(0);
      transition: background 250ms;
    }
    .inner_anchor {
      display: inline-block;
      padding: 5px 8px;
      margin: 2px;
      border: 1px solid #252632;
      border-radius: 3px;
      background: #1c1d26;
      color: #fff;
      transform: translate(0px);
    }
    .inner_anchor:hover {
      background: #647915;
    }
    </style>

<a href="#">ItemX<object><a class="elim_btn" href="#" title='Eliminate'>&times;</a></object></a> 
```

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2013-11-25T12:45:39.880

这是一种不好的编码方式，但你可以试试这个 -

<a href="1">aaaa <table><tr><td><a href="2">bbbb </a></td></tr></table> </a>

# c# - 将“权限”属性添加到 ASP.NET 页面

> ID：13052599
> 
> 赞同：0
> 
> 时间：2012-10-24T15:37:10.927
> 
> 标签：c#, asp.net, properties, permissions

我有一个具有 3 种用户类型的 ASP.NET Web 应用程序：用户、成员、管理员。

现在我想为每个页面创建一个方法，我可以使用该方法检查用户的类型，如果不允许他访问此页面，则应将用户重定向到主页。

目前我在每个页面的 Page_Load 中都有这种代码：

```
if (Session["userID"] != null)
        {
            User user = userDALC.Read(Convert.ToInt32(Session["userID"]));

            if (user.Type == 1)
            {
                Response.Redirect("~/Home.aspx");
            }
        }
        else
        {
            Response.Redirect("~/Home.aspx");
        } 
```

此页面仅对成员和管理员 (2,3) 可见，如果用户 (1) 想要访问此页面，他将被重定向。

所以，很明显这段代码绝对不适合我使用，因为它经常重复。（在每一页上）

现在，我的想法是为每个页面添加一个属性“权限”，我可以在其中设置允许哪些用户类型访问该页面。而且我还需要一个方法来检查每个页面上的这个权限属性。

任何想法，我如何添加这样的属性以及可以添加此方法的任何想法？（也许是母版页？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:41:11.787

有几个地方可以实现这种方法。在母版页的页面加载中将起作用。

您可以创建自己的 Page 类，该类继承自核心 Page 类，在那里实现逻辑，并使用您的自定义 Page 类。

您可以完全从页面中取出逻辑并在 global.asax中的[Begin_Request处理程序期间运行它。](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.beginrequest.aspx)这里要注意的是，此方法适用于您的应用程序处理的*所有*请求，其中可能包括对 javascript、css、图像、文档等的请求。此外，此时您将无法访问页面对象，因此您需要根据 URL 确定要检查授权的请求。

您可以更进一步，实现一个[HttpHandler](http://support.microsoft.com/kb/308001)，它根据用户身份和请求的详细信息检查授权。逻辑类似于在 global.asax 中执行检查。

然而，正如已经指出的那样，asp.net 确实通过用户角色提供了开箱即用的所有这些东西。

# java - 如何将警卫添加到 JPA 多对多连接

> ID：13052613
> 
> 赞同：3
> 
> 时间：2012-10-24T15:38:03.053
> 
> 标签：java, hibernate, jpa

我的 JPA 测试应用程序会跟踪用户在我所在城镇访问过的酒吧数量。我在用户对象上有这个

```
@ManyToMany(mappedBy = "users")
private List<Pub> visited; 
```

而另一边的 pub 对象

```
@ManyToMany(cascade = CascadeType.ALL)
@JoinTable(
    joinColumns =
@JoinColumn(name = "pubid"),
inverseJoinColumns =
@JoinColumn(name = "userid"))
protected Set<User> users; 
```

但是，我已经更新了 pub 表，其中有一列指示 pub 已关闭。我只希望用户的访问列表包含活动的酒吧，所以问题是

**我怎样才能有条件地加入这些对象，以便只有通过测试（例如 table.closed=false）的 pub 才会被放入用户的访问列表中？**

我在下面使用hibernate和postgres。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:09:11.100

我暂时使用 Hibernate 特定的 @Where 注释解决了这个问题。我只需要在用户的 pub 集合上添加一个额外的注释，如下所示：

```
@ManyToMany(mappedBy = "users")
@Where(clause="closed='false'")
private List<Pub> visited; 
```

当然，我现在被锁定在 Hibernate 中，这对这个项目来说不是一个大问题，但如果有人有通用的 JPA 解决方案，我很想听听。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:42:59.927

有几种方法可以实现，或者更确切地说模拟你想要的，但不幸的是没有真正干净的方法。

您可以`@PostLoad`在 User 实体本身或专用侦听器中使用方法（使用注释您的实体`@EntityListeners(YourFilter.class)`以配置侦听器。）。在这种方法中，您可以按照您想要的方式过滤实体。

这种方法的主要问题是，当您持久化/合并时，过滤器所做的更改也将被持久化。

这是可以避免的——除了原始的持久列表之外，您还可以有一个单独的临时列表来保存过滤后的 pub。或者您可以保留 PostLoad 过滤并简单地在 getter 中过滤。这听起来可能很肮脏，但听者的方法是变相的肮脏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T09:09:06.797

您可以使用子类化来创建纯 JPA 解决方案：

*   在 Pub 上使用“封闭”字段作为 @DiscriminatorColumn。
*   创建一个新类“OpenPubs”并使用“false”作为@DiscriminatorValue
*   将“已访问”映射到子类“OpenPubs”

# flash - 强制浏览器重新加载缓存的 Flash 文件

> ID：13052614
> 
> 赞同：0
> 
> 时间：2012-10-24T15:38:10.260
> 
> 标签：flash

如何？我知道我可以在嵌入时附加一个随机数作为查询字符串的一部分，但是如果 Flash 文件本身加载另一个 Flash 文件怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:13:43.803

**简短的回答：**你不能。

**长答案：**如果此文件使用特定的类/框架加载其他数据，您可以通过在您的 swf 中创建一个具有相同名称的类来替换您自己的类。一个加载一个加载所有其他东西的那个。将使用修改后的类而不是加载的 SWF 中的类。

但如果使用简单的 Loader API，一切都会变得更加棘手。您必须解析加载的 swf 并修改 Loader.load 调用。Claus Wahlers有一个很好的[图书馆可以做到这一点。](http://www.as3commons.org/as3-commons-bytecode/introduction.html)

# javascript - 如何在日期选择器中突出显示特定日期

> ID：13052615
> 
> 赞同：0
> 
> 时间：2012-10-24T15:38:10.930
> 
> 标签：javascript, jquery, datepicker

如何在日期选择器中突出显示`BOLD`特定日期？我有日期数组，`var datesArray = new Array();`我知道我需要使用`beforeShowDay:`方法，但我无法弄清楚它是否可以工作。

这是我的功能：

```
 $(function() {
                $( "#datepicker" ).datepicker({ 
                    dateFormat: 'yy-mm-dd', 
                    onSelect: function(dateText, inst) {                             
                        dateSelected(dateText, tid) // run my function on click
                    }                     
                });
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:12:29.380

是的，您需要使用 beforeShowDay 事件，[这是测试](http://jsfiddle.net/RjKw6/)

```
 ...
   beforeShowDay: function(d_date){
        console.log(d_date);
        //Here compare your Date Array and the d_date
        var d_picker = new Date(d_date);
        var s_class_highligth = '';
        if($.inArray(d_picker.getDate(),a_date_array)>-1){
            s_class_highligth = 'my_cell_highligth';
        }

        return [true, s_class_highligth, 'this is optional tooltip'];
    }
    ... 
```

# matlab - matlab条件期望似乎不适用于对数正态

> ID：13052616
> 
> 赞同：2
> 
> 时间：2012-10-24T15:38:14.390
> 
> 标签：matlab, numerical-integration

我已经为其他分布（指数、正态等）尝试了类似的代码，并且在这些情况下代码有效。然而，对于对数正态分布情况，matlab 计算数值积分的方式似乎存在问题。

编码：

```
function y=condint(sigma,mi,phihat)
y=quad(@phipr,phihat,110,0.000000000000001)

    function y=phipr(x)
      y=1./(1-logncdf(phihat)).*1/(2*pi*sigma^2).^(1/2).*exp(-((log(x)-mi).^2)./(2*sigma^2));
    end
end 
```

它没有明显的属性，即更高截止值（phihat）的条件期望值应该更高。这是一个衰减非常快的分布的数值过程的一般问题吗？这是一个已知问题吗？谢谢您的帮助

Ps 在上面我用作上限 110，因为当使用参数 mi=0 和 sigma=0.25 时，使用更高的值即使对于 cdf 也会给出奇怪的结果。这又与梯形积分逼近中的问题有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:37:36.603

Error in the code: logncdf(phihat) should be logncdf(phihat,mi,sigma).

That solves it.

# c++ - 结束迭代器和分段错误

> ID：13052617
> 
> 赞同：1
> 
> 时间：2012-10-24T15:38:16.793
> 
> 标签：c++, unix, iterator, segmentation-fault

如果我们举这个例子：

```
std::map<int,foo*> intmap;
fillMap(intmap);

// I will force this to end(), in real life this could be a "find" output
std::map<int,foo*>::iterator iter = intmap.end(); 
if(iter->second != 0)
    iter->second->whatever(); 
```

我在“whatever()”调用上但在“->second”空指针检查中没有出现分段错误（这是预期的，该示例没有故意检查“iter！= intmap.end()”）：这是预期的行为吗？这个段会在“whatever()”调用上系统地出错，还是取决于特定的运行时内存条件？

提前感谢您的评论。贾科莫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T15:42:39.537

STL 容器的取消引用`end()`和结束迭代器是未定义的行为。没有什么可以称为*预期*的。一切都可能发生，它甚至可以工作。它可能取决于很多因素，例如编译器/libs/OS 版本、运行时环境状态、调试/发布构建等。因此，您永远不应该假设如果您做了不正当的事情会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:40:46.017

您不能取消引用“结束”迭代器。请记住，这与 ;`iter->`大致相同`(*iter).`。也就是说，有一个取消引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:40:47.780

取消引用`end()`迭代器是一种未定义的行为。它可能会或可能不会崩溃。

您必须检查这样的返回值`find`：

```
if(iter != intmap.end())
   iter->second->whatever(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:59:50.677

取消引用一个过去的迭代器的结果当然是未定义的行为，所以不能保证它会做什么。

但是，考虑可能发生的情况可能具有指导意义（并且在调试场景中很有用）。关联容器的典型实现是节点的二叉树，其中每个节点包含指向迭代顺序的`next`和节点的指针，迭代器是指向节点的指针的薄包装器。`previous`类似地，`list`实现为双向链表，其中每个节点都包含指向`next`和`previous`节点的指针。由于过去的迭代器需要是可递减的，最简单的实现是它指向一个始终存在的节点，其`previous`指针指向容器中的最后一个节点。

因为这个过去的节点总是需要存在的，即使对于一个空的容器，最简单的实现就是把它放在容器类本身里面，大多数库实现都会这样做。结果，它的存储是自动（函数本地）存储，并且它将是默认构造的，因此取消引用过去的迭代器将产生堆栈垃圾。

我们可以通过比较指针来检查：

```
#include <map>
#include <iostream>
int main() {
    std::map<int, int> m;
    std::cout << &m << ' ' << &*m.end() << ' ' << &m + 1 << '\n';
}

0xbf990034 0xbf990048 0xbf99004c 
```

如您所见，过去节点的存储包含在`map`的堆栈占用空间中。

# c++ - std::vector 有转换运算符吗？我在看什么？

> ID：13052625
> 
> 赞同：2
> 
> 时间：2012-10-24T15:38:45.357
> 
> 标签：c++, stl, vector

Windows 7 上的 Visual Studio 2010 Ultimate。

编辑：这是我没有编写的非常古老的代码，是一大堆旧混乱的一部分，深深植根于代码库。它不会很快改变。不过，我很高兴你们都证实了我的想法：这本身应该是不可能的。

我有等效的代码：

```
typedef std::vector<Widget*> widget_vector_t;

typedef struct
{
    widget_vector_t widget_array_[SOME_SIZE_CONSTANT];
} WIDGET_STRUCT; 
```

然后，在课堂上，我有一个 WIDGET_STRUCT 成员：

```
WIDGET_STRUCT widgets_; 
```

在一些成员方法的主体中，我看到了这个......这个......**事情**：

```
Widget *p = widgets_.widget_array_[SOME_INDEX_CONSTANT]; 
```

需要明确的是，据我了解，这是将 Widget 指针向量分配给 Widget 指针。

它有效。

STL 向量是否提供一些强制转换运算符或返回向量中第一个元素的*东西？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:56:54.773

我想通了，我很尴尬。

实际代码有一大堆可怕的名为 typedef，驼峰式大小写和缩短，都在一个地方，而且格式很差。不用说，读起来很笨，而且所有的名字都非常相似。

结构中的类型实际上是一个指针数组，“Widget *”的类型定义与 Widget 指针向量的名称非常相似。

代码表现完美正常，现有代码库是一堆热气腾腾的东西，问题最终出在椅子和键盘之间。

感谢参与。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:23:20.533

这是一个简单的误解。

向量定义如下：

```
vector<int*> a[10]; 
```

这并不意味着定义一个 (10-size, int*-type) 向量，而是你得到一个 (10-size, `vector<int*>-type)`array;

> STL 向量是否提供一些强制转换运算符或返回向量中第一个元素的东西？

相关的是数组返回元素类型的指针：

```
int* b[10]; 
```

然后

```
int** ptrb = b; 
```

是合法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:31:43.767

要回答您的直接问题：

> STL 向量是否提供一些强制转换运算符或返回向量中第一个元素的东西？

不，此代码无法编译：

```
#include <vector>
using namespace std;

class Widget {};

typedef std::vector<Widget*> widget_vector_t;

static const size_t SOME_SIZE_CONSTANT = 10;
static const size_t SOME_INDEX_CONSTANT = 0;
typedef struct
{
    widget_vector_t widget_array_[SOME_SIZE_CONSTANT];
} WIDGET_STRUCT;

int main()
{
    WIDGET_STRUCT widgets_;
    Widget *p = widgets_.widget_array_[SOME_INDEX_CONSTANT];
} 
```

编译器抱怨您试图在 a`vector<Widget*>`和 a之间进行转换`Widget*`，并且没有这样的转换可用。

要回答您不太直接的问题：

> 我在看什么？

*这里一定*发生了一些你没有向我们展示的事情。我有一个理论，但这只是一个理论。

在实际代码中，它可能实际上是为其提供了转换运算符的子类，而不是`widget_array_`a 。例如：`typedef vector<Widget*>``vector`

```
#include <iostream>
#include <iomanip>
#include <string>
#include <vector>
using namespace std;

class Widget {};

class widget_vector_t : public std::vector<Widget*>
{
public:
    operator Widget* () 
    {
        return front();
    }
};

static const size_t SOME_SIZE_CONSTANT = 10;
static const size_t SOME_INDEX_CONSTANT = 0;
typedef struct
{
    widget_vector_t widget_array_[SOME_SIZE_CONSTANT];
} WIDGET_STRUCT;

int main()
{
    WIDGET_STRUCT widgets_;
    Widget *p = widgets_.widget_array_[SOME_INDEX_CONSTANT];
} 
```

这*将*编译——它甚至是合法的，据我所知，合法的代码。这也是可怕的、可怕的代码，但我想你已经知道了。

# servicestack - 在服务处理程序中发现路由路径

> ID：13052630
> 
> 赞同：4
> 
> 时间：2012-10-24T15:39:17.900
> 
> 标签：servicestack

使用 ServiceStack 3.9.2x。

路由路径是通过使用 Route 属性装饰 DTO 来定义的。

有没有办法（除了反射）来找出服务处理程序中的路由路径是什么？当我说服务处理程序时，我指的是接受请求 DTO 并为请求提供服务的（Get、Put、Post 等）方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:56:11.037

您可以查看执行此操作的`IReturn<T>.ToUrl()` [扩展方法](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/UrlExtensions.cs)的实现，如果定义则使用自定义路由，否则返回预定义的 url。

### 用法：

```
[Route("/custom/route")]
public class RequestDto : IReturn<ResponseDto> { ... }

var relativeUrl = new RequestDto { ... }.ToUrl("GET", "json"); 
```

# json - AngularJS 仅在首次加载时请求新的 JSON 数据

> ID：13052635
> 
> 赞同：1
> 
> 时间：2012-10-24T15:39:39.020
> 
> 标签：json, angularjs

我正在使用 AngularJS 在本机 iOS 应用程序中获取应用程序，并且在加载动态数据时遇到问题。

我已经将**控制器**设置为通过基于每个页面视图的 http 查询`JSON data`从**iOS 应用程序**请求。

当**JSON**数据更改时，Web 视图会重新加载，但似乎 Angular 不会再次请求数据，而是从缓存中提取数据。

有没有一种方法可以持续要求 Angular 只请求数据而不缓存**JSON**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:09:19.700

尝试在您的网址上添加查询参数

```
'my/url?' + new Date().getTime() 
```

这是迄今为止确保它永远不会被缓存的最简单的事情。

服务器端还有一个替代方法，即确保将缓存过期标头设置为过去的日期，从而确保无法缓存。

# ios - 使用 Game Center 中新的 rematchWithCompletionHandler 方法时遇到问题

> ID：13052638
> 
> 赞同：2
> 
> 时间：2012-10-24T15:39:54.077
> 
> 标签：ios, game-center

我正在使用 gamecenter api 制作回合制游戏。我想制作一个按钮来重新匹配玩家，这样他们就不必通过游戏中心视图控制器并重新邀请同一个玩家。在这个问题[iOS Game Kit Turn Based Match Programatic Rematch](https://stackoverflow.com/questions/12148430/ios-game-kit-turn-based-match-programatic-rematch)中，提问者稍后指出 ios 6.0 使用 rematchWithCompletionHandler 使这变得非常容易。我尝试在我的游戏中使用它，但只收到未知的选择器错误或 NSErrors 说我试图创建的匹配是不可能的。

```
[currentMatch rematchWithCompletionHandler:^(GKTurnBasedMatch *match, NSError *error)
         {
             if (error) {
                 NSLog(@"%@", error);
             }

             else
             {
                 currentMatch = match;
                 currentMatch.message = @"Rematch";
             }

         }]; 
```

在调用重赛之前，比赛是否必须处于某个阶段？还是我想念的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T20:02:23.393

只有当两个玩家是 Game Center 的朋友时，它才对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:30:22.333

rematchWithCompletionHandler 似乎仅在参与比赛的所有玩家正确结束比赛时才有效。

# vb.net - 将小于整数变量添加到字符串搜索

> ID：13052639
> 
> 赞同：1
> 
> 时间：2012-10-24T15:39:56.980
> 
> 标签：vb.net

我正在扫描计算机上某些已安装程序的文本文档，并寻找一种简单的方法来在我正在扫描的字符串中包含大于或小于变量。这是我目前正在使用的一个非常丑陋和繁琐的示例，虽然它可以作为临时修复，但不实用或不可持续。

```
If CheckBox2.Checked Then
            sReader.Close()
            If text.Contains("Adobe Flash Player 11 Plugin") And
                text.Contains("Adobe Flash Player 11 ActiveX") Then
            Else
                If text.Contains("Adobe Flash Player 12 Plugin") And
                text.Contains("Adobe Flash Player 12 ActiveX") Then
                Else
                    If text.Contains("Adobe Flash Player 13 Plugin") And
                text.Contains("Adobe Flash Player 13 ActiveX") Then
                    Else

'(Goes ahead and does a silent install of the missing or outdated program) 
```

到目前为止，我在使用 Adob​​e Flash 和 Java RTE 时都遇到了这个问题，并且肯定会在未来的程序中遇到这个问题。基本上我需要扫描“Adobe Flash Player（任何小于 11 的数字）插件”、“Adobe Flash Player（任何小于 11 的数字）ActiveX”、“Java（小于 9 的数字）更新（任何数字）”。

我确信所提供的任何解决方案都可能适用于我以后可能会遇到的类似程序。谢谢

- - - 编辑 - - -

我已经尝试了以下代码，但它总是返回“找到”消息框，即使它正在扫描的文件中没有 adobe flash 版本。

```
 If CheckBox2.Checked Then
            sReader.Close()
            Dim options As RegexOptions = RegexOptions.None
            Dim regex As Regex = New Regex("Adobe Flash Player (?<version>\d+) (Plugin|ActiveX)", options)
            Dim input As String = "Adobe Flash Player 11 Plugin"
            ' Get match
            Dim match As Match = regex.Match(input)
            Dim version As String = match.Groups("version").Value
            If (match.Success) Then
                MessageBox.Show("Version 11 or higher found, skipping install")
            Else
                MessageBox.Show("Version 11 or higher not found, installing Version 11") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:43:19.150

如果您可以相当确信字符串将始终具有相同的格式，则可以使用正则表达式来查找匹配项并获取版本号。

编辑：

这是一个代码片段：

```
Dim options As RegexOptions = RegexOptions.None
Dim regex As Regex = New Regex("Adobe Flash Player (?<version>\d+) (Plugin|ActiveX)", options)
Dim input As String = "Adobe Flash Player 11 Plugin"
' Get match
Dim match As Match = regex.Match(input)

Dim version As String = match.Groups("version").Value 
```

“版本”变量现在包含版本号

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:50:27.690

您可能想尝试使用正则表达式进行匹配。

可能是这样的：

```
Dim regex As Regex = New Regex("Adobe Flash Player \d+ (Plugin|ActiveX)")
Dim match As Match = Regex.Match(input_to_match_against)

if(match.Success){
  ' do something here
  Dim version as String = m.Groups(1).Value ' Will give you the version of Adobe
} 
```

如果代码不能正常工作，我深表歉意，我是从 C# 翻译的，从未使用过 VB。

也可能对构建您的[正则表达式备忘单](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)有用。它适用于 C#，但由于您使用的是 .NET，因此我希望正则表达式语法应该相同。

# javascript - 将 onchange 事件添加到 Telerik 下拉列表使其成为静态

> ID：13052641
> 
> 赞同：0
> 
> 时间：2012-10-24T15:40:14.007
> 
> 标签：javascript, html, asp.net-mvc, telerik-mvc

我有一个行为正常的 Telerik 下拉列表，但是一旦我添加了一个触发 JS 函数的 onchange 事件，下拉列表就会变成静态的。

Telerik DDL：

```
<%= Html.Telerik().DropDownList().Name("Week")
            .HtmlAttributes(new { @id = "Week", @style = "width:104px;" }).ClientEvents(events => events.OnChange("Week_onChange"))%> 
```

JavaScript 函数：

```
function Week_onChange() {
    var link = '/Weeks/Week';
    week = $("#Week").val();
    $.ajax({
        type: 'POST',
        url: link,
        data: { date: week },
        dataType: 'json',
        success: function (result) {
            alert(result.message);
        },
        error: function (result) {
            alert(result.message);
        }
    });
}; 
```

以下是我填充 Week DDL 的方式：

```
$("#Week").data("tDropDownList").dataBind(weekArray);
$('#Week').data('tDropDownList').select(0); 
```

同样，如果我没有添加“Week_onChange”事件，Week DDL 表现得非常好。任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:20:38.373

从 html 属性中删除“@id”解决了这个问题。谢谢！全部

# ruby-on-rails - 那是一个变量，一个符号，一个方法，为什么这个有一个冒号而那个没有？

> ID：13052646
> 
> 赞同：4
> 
> 时间：2012-10-24T15:40:20.887
> 
> 标签：ruby-on-rails, ruby

Rails 中不一致的命名约定让我感到困惑。似乎语法无处不在。这里有些例子：

为什么下面的迁移中有逗号？而且，为什么关键字`default`前面没有冒号？这个`default`关键字是什么，一个方法，或者一个变量，一个符号？那是什么东西？：

```
add_column :zombies, :rotting, :boolean, default: false 
```

这是另一个例子：

为什么`age`不是`:age`（带冒号）？为什么在它之前`make_rotting`加上一个“ `:`”？

```
 class Zombie < ActiveRecord::Base
       before_save :make_rotting

   def make_rotting
      if age > 20
         self.rotting = true
      end
    end
 end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T15:50:08.953

Ruby 对于 Java 和 PHP 人员来说可能很难。:)

在 Ruby 中，并非一切都是它看起来的样子。以这个为例：

```
before_save :make_rotting 
```

这是一个方法调用，当然。但这不是`make_rotting`被调用的方法。这是`before_save`（`:make_rotting`是它的参数）。这就是 ActiveRecord 中所谓的钩子。`before_save`将方法名称作为参数，并在时机成熟时动态调用它。

```
if age > 20 
```

这`age`是一个方法调用，而不是一个符号。它可以写成：

```
if age() > 20 
```

但括号是可选的。最后：

```
add_column :zombies, :rotting, :boolean, default: false 
```

这个方法有四个参数，最后一个是哈希。哈希使用新的 Ruby 1.9 语法。以前它会这样写（冒号在正确的位置，以及所有）：

```
add_column :zombies, :rotting, :boolean, :default => false 
```

您应该阅读一本关于 Ruby 编程的好书，而不是从 Stack Overflow 帖子中获取知识。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T15:46:27.613

三个主要的东西：

1.  Ruby 中的方法不需要在其参数周围加上括号。`before_save`和`add_column`是方法，`:make_rotting`的论点也是如此`before_save`。
2.  任何以 a 开头的`:`都是符号。符号就像字符串，但无论您在代码中使用多少次相同的符号，它们只会在内存中分配一次。它们用于很多事情 - 经常作为哈希键。
3.  将散列作为最后一个参数的 Ruby 方法不需要`{}`' 围绕散列。

所以这：

```
add_column :zombies, :rotting, :boolean, default: false 
```

可以改写为：

```
add_column(:zombies, :rotting, :boolean, {default: false}) 
```

# objective-c - 将 CoreData 更改推送到 Web 服务的最佳实践？

> ID：13052647
> 
> 赞同：1
> 
> 时间：2012-10-24T15:40:25.410
> 
> 标签：objective-c, ios, cocoa-touch, core-data

我有一个使用 Web 服务填充的基于 CoreData 的应用程序。当用户更改我的 Web 服务中对象的数据时，我想将该更改推送回我的 Web 服务。

实现这一目标的最佳实践是什么？我可能有很多需要发送的更改对象，但用户可能没有连接，我希望它在后台发生。

我是否在 CoreData 中标记对象并需要远程保存？如果可能的话，然后每隔几分钟对它们进行批处理？我使用过 Flurry 和 Google Analytics，他们一定在做类似的事情，但我不确定最好的方法是什么。

也许 Core Data 中有一个单独的表，其中包含需要更新的 EntityName 和 ObjectID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:21:17.993

看看 NSIncrementalStore，特别是 AFIncrementalStore（它利用 NSIncrementalStore）。

在这里讨论两者的好文章：http: [//nshipster.com/nsincrementalstore/](http://nshipster.com/nsincrementalstore/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T00:22:07.277

它在某种程度上取决于服务器 API 以及它想要什么样的信息。

在您的核心数据实体上添加修改标志或日期是一种简单的方法。只需查找标记所在的每个对象`YES`或日期比上次同步更新的对象。但它是有限的——你如何处理告诉服务器你删除了一个对象？您可能需要保留某种外部日志——例如，包含等待发送的传出更改的 plist。

我使用的通用方案是这样的：

1.  添加观察者`NSManagedObjectContextWillSaveNotification`
2.  收到此通知后，向托管对象询问`insertedObjects`、`updatedObjects`和`deletedObjects`以找出更改的内容。
3.  根据这些结果更新我的传出更改列表。
4.  同步时，读取 plist，发送更改并将列表清零（确保这与 did-save 通知同步，这样您就不会在未发送更改的情况下意外清零）。

在此过程中，您还会遇到其他几个细节——例如，如果同步失败，请不要删除传出更改列表。

# hash - 基于物理身份的 Hashtbl.hash 替代方案

> ID：13052648
> 
> 赞同：8
> 
> 时间：2012-10-24T15:40:28.043
> 
> 标签：hash, ocaml, referenceequals

我正在尝试派生一个描述结构化值的 Graphviz 文件。这是出于诊断目的，所以我希望我的图表尽可能地反映内存中的实际结构。我正在使用以下内容将值映射到 Graphviz 顶点，以便在值具有两个或多个入站引用时可以重用顶点：

```
let same = (==)

module StateIdentity : Hashtbl.HashedType = struct
  type t = R.meta_t state
  let hash = Hashtbl.hash
  let equal = same
end

module StateHashtbl = Hashtbl.Make (StateIdentity) 
```

的文档`Hashtbl.hash`建议它适合在何时`StateIdentity.equal = (=)`和何时使用，`StateIdentity.equal = (==)`但我想确保哈希表访问尽可能接近 O(1)，因此宁愿不`Hashtbl.hash`走一个（在这种情况下可能很大）对象每次查找的图表。

我知道 Ocaml 会移动引用，但是 Ocaml 中是否有用于引用标识的 O(1) 代理？

[Ocaml中可变变量哈希表](https://stackoverflow.com/questions/10283350/hashtable-of-mutable-variable-in-ocaml)的答案表明不是。

我不愿意将序列号附加到状态，因为这是诊断代码，所以我所做的任何错误都有可能掩盖其他错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T15:49:56.263

`< ... >`如果您在 OCaml 的对象类型的意义上使用“对象”一词，那么您可以使用`Oo.id`来为每个实例获取唯一的整数标识。否则，“是否存在价值同一性的一般代理”的答案是“否”。在这种情况下，我的建议是从 开始`Hashtbl.hash`，评估它是否符合您的需要，否则设计您自己的散列函数。

您还可以使用`Hashtbl.hash_param`（参见[文档](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Hashtbl.html#VALhash_param)）在散列期间打开值遍历的旋钮。请注意，Hashtbl 代码对相同哈希值的桶使用链表，因此存在大量哈希冲突将触发线性搜索行为。使用冲突桶的二叉搜索树转移到其他实现可能会更好。但是话又说回来，您应该在转向更复杂（并且在“好案例”中表现更差）解决方案之前评估您的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T15:59:54.827

我发现使用物理相等性进行散列非常棘手。您当然不能使用值的地址之类的东西作为哈希键，因为（正如您所说）事情会被 GC 移动。一旦有了哈希键，只要您的值是可变的，您似乎就可以使用物理相等性进行比较。如果您的值不可变，OCaml 并不能保证 (==) 的含义。实际上，如果 OCaml 编译器或运行时希望（反之亦然），理论上可以将相等 (=) 的不可变对象合并为单个物理对象。

当我处理各种可能性时，我通常会在需要唯一 ID 时将序列号放入我的值中。正如gasche所说，`Oo.id`如果您的值是实际的OO风格对象，则可以使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T17:02:13.037

像其他人一样，我认为唯一的 ID 是要走的路。

唯一 ID 并不难安全地生成。一种解决方案是使用所谓的私人记录，如下所示。它可以防止模块的用户复制 id 字段：

```
模块类型 Intf =
签名
  类型 t = 私人 {
    身份证：整数；
    foo : 字符串；
  }

  val create_t : foo: string -> t
结尾

模块 Impl : Intf =
结构
  类型 t = {
    身份证：整数；
    foo : 字符串；
  }

  让 create_id =
    让 n = ref 0 在
    乐趣（）->
      如果 !n = -1 那么
        失败并显示“唯一 ID 不足”
      别的 （
        增加 n;
        !n
      )

  让 create_t ~foo = {
    id = create_id ();
    富
  }
结尾

```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-24T21:00:43.220

对不起，丑陋的黑客，但我前段时间做了类似的事情。

诀窍是确保值在插入表后不会在内存中移动。有两种情况可以在内存中移动值：从次要堆复制到主要堆和主要堆压缩。这意味着当你在表中插入一个值时，它必须在主堆中并且在表的两个操作之间你必须确保没有发生压缩。

可以使用 C 函数 is_young 检查值是否在次堆中，如果是这种情况，可以使用 Gc.minor() 强制将值迁移到主堆。

对于第二个问题，您可以完全停用压缩或在压缩上重建表。禁用它可以使用

```
Gc.set { Gc.get () with Gc.max_overhead = max_int } 
```

可以通过比较每次访问表时返回的数字来检测是否发生了压缩

```
( Gc.quick_stat () ).Gc.compactions 
```

请注意，您必须在访问表之前禁用压缩。如果您禁用压缩，您还应该考虑更改分配策略以避免堆的无限碎片。

```
Gc.set {(Gc.get ()) with Gc.allocation_policy = 1} 
```

如果你想在 OCaml 的旧版本（4.00 之前）中做一些非常丑陋的事情，压缩会在内存中保持相同的顺序，所以你可以实现基于物理地址的集合或映射而不必担心。

# iphone - 子类化 UIViewController 导致内存问题？

> ID：13052649
> 
> 赞同：0
> 
> 时间：2012-10-24T15:40:31.677
> 
> 标签：iphone, ios, xcode

我正在继承**UIViewController**以防止我的“masterButtons”和“subButtons”集的代码重复。

这一切似乎都运行得很好，直到我意识到**在大约 1200 次页面更改之后**- 仅在 3 个空白页面之间导航（仅显示按钮和一些其他对象）**，应用程序总是会崩溃！**

Instruments（+在设备上进行测试）**没有显示任何内存泄漏，但确实显示了这些按钮对象的数百个实例！**（已选择“已创建且仍然存在”过滤器。）此外，永远不会从任何 ViewController 调用 viewDidUnload / didReceiveMemoryWarning！

我在我的应用程序的其他页面上没有遇到这些问题（UIViewController 没有被子类化）。

所以看起来 ViewController 的内容正在重新创建，并且之前创建的任何内容都没有被删除。 **子类化 UIViewController 是否有任何常见的陷阱可能导致这种情况？**有什么我可能会丢失的吗？

建议将不胜感激。（**这个问题我想把我的mac扔出窗外！**）

```
Top_ViewController      (contains 'MasterButtons')
       v
Area1_ViewController    (subclass of TOP_ViewController) (contains 'subButtons', and  a few texts fields etc.)
       v
aPage_ViewController    (subclass of Area1_ViewController)  (currently blank page) 
```

（使用 ARC 和故事板。故事板视图控制器具有各自的“aPage_ViewController”作为它们的类。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:52:40.040

如果您以循环方式创建故事板，则可能会`viewControllers`一直创建新故事板。每个 segue 转换都在创建新的`viewController`，因此可能没有内存泄漏，但您的内存将被消耗。

您应该使用`UITabBarController`或`UINavigationController`来回移动并且永远不要创建循环。

此外`viewDidUnload`在iOS6中已弃用，也许您忽略了警告？

**编辑：**

尝试这样的事情：

```
-(void)tab1_IsPressed:(UIButton *)paramSender{
    Top_ViewController *target_VC = (Top_ViewController*)[self.storyboard instantiateViewControllerWithIdentifier:@"page_1"];
    [self.navigationController popViewControllerAnimated:NO];
    [self.navigationController pushViewController:target_VC animated:NO];
}
-(void)tab2_IsPressed:(UIButton *)paramSender{
    Top_ViewController *target_VC = (Top_ViewController*)[self.storyboard instantiateViewControllerWithIdentifier:@"page_2"];
    [self.navigationController popViewControllerAnimated:NO];
    [self.navigationController pushViewController:target_VC animated:NO];
} 
```

# ruby - 如何在测试中模拟 %x？

> ID：13052650
> 
> 赞同：4
> 
> 时间：2012-10-24T15:40:33.083
> 
> 标签：ruby, unit-testing, rspec, mocking, tdd

我有这样的事情：

```
class Something
  def some_method
    %x{xyz}
  end
end 
```

在规范中：

```
describe Something do
  describe "#some_method" do
    it "should execute xyz command in a subshell" do
      x = Something.new
      #What should come here?
      x.some_method
    end
  end
end 
```

我知道如何模拟“系统”。但我的问题是特定于 "%x" 的。那么如何模拟 %x 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:21:15.260

您正在寻找的线路是

```
x.should_receive(:`).once.with('xyz') 
```

反引号实际上是一个被调用的方法，它们之间的任何内容都作为字符串参数传递。`%x{...}`只是反引号的语法变体，因此会导致相同的方法调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:27:23.090

当你这样做时，`%x{xyz}`这相当于``xyz``调用内核上的方法的语法糖，```使用字符串参数“xyz”调用（方法名称实际上是单个反引号字符）。

因为 Ruby 语法不允许您定义此名称的方法，所以您需要使用`define_method`而不是`def`像这样：

```
module Kernel
  define_method(:"`") do |x|
    x + "blah"
  end
end 
```

现在``xyz``调用`%x{xyz}`这个新方法：

```
%x{xyz} #=> "xyzblah"
`foobar` #=> "foobarblah" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T23:02:03.383

基于[Scott Olson](https://stackoverflow.com/users/1535283/scott-olson)的评论，因为`%x`is just `Kernel#``，这对我有用：

```
 x = Something.new
  expect(x).to receive(:`).with(xyz)
  x.some_method 
```

# php - 在 PHP 中获取第一维数组

> ID：13052657
> 
> 赞同：3
> 
> 时间：2012-10-24T15:40:55.090
> 
> 标签：php, arrays

我彻底谷歌了，找不到关于如何丢弃 PHP 中的第二维数组只留下第一维数组的解决方案。

从：

```
array(
  ['type'] => 'func'
  ['function'] => 'Model_Statement_Transaction::sum'
  ['parameters'] =>  
    stdClass(
      statement_id = 8586
      transaction_type = 'raw_flour-import'
      column = 'quantity'
    )
) 
```

至：

```
array(
  ['type'] => 'func'
  ['function'] => 'Model_Statement_Transaction::sum'
  ['parameters'] => ''
) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T13:44:27.673

假设你只想要标量值，你可以简单地做

```
$result = array_filter($theArray, 'is_scalar') 
```

这将从数组的第一级中删除所有非整数、浮点数、字符串或布尔值的项目。

更多信息：

*   [`array_filter`— 使用回调函数过滤数组元素](http://php.net/array_filter)
*   [`is_scalar`— 判断变量是否为标量](http://php.net/is_scalar)

* * *

如果您不需要它是动态的，例如，如果您知道`parameters`它将是一个非标量，您可以简单地取消设置该值或分配 null 或任何您想要的值，例如

```
$array['parameters'] = null;
// or
unset($array['parameters']); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T15:50:08.387

你用`array_map`

```
$parameters = new stdClass();
$parameters->statement_id  = 8586 ;
$parameters->transaction_type   = 'raw_flour-import' ;
$parameters->column  = 'quantity' ;

$array = array('type' => 'func',
        'function' => 'Model_Statement_Transaction::sum',
        'parameters' => $parameters);

$array = array_map(function ($v){if (is_array($v) || is_object($v)) {return "";}return $v;}, $array);
var_dump($array); 
```

输出

```
array
  'type' => string 'func' (length=4)
  'function' => string 'Model_Statement_Transaction::sum' (length=32)
  'parameters' => string '' (length=0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T15:47:06.417

多维数组由包含第二级的第一级、包含第三级的第二级构建，依此类推...

获得第一个维度意味着您也将获得第二个级别。简单地说，因为**第二个级别是第一个级别的一部分**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T15:48:09.587

我不确定你想要的正是你想要的，但是通过这段代码：

```
<?php
foreach($array as $item)
{
   if(is_array($item) || is_object($item))
   {
      unset($item); // or just $item = '';
   }
}
?> 
```

您将从给定的 $array 中删除所有第二维数组和对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-08T16:05:03.443

我知道这是一个老问题，但我正在为搜索中的其他人发布我的解决方案。

此函数将解析原始数组，直到达到 max_d（最大维度），然后它将只返回该值。

```
<?php
/**
 * @param $v Curent value that is parsed
 * @param $r Return value when the max_d is reached
 * @param int $max_d Maximum dimension
 * @param int $d Current dimension
 *
 * @return array
 */
function parse($v, $r, $max_d = 1, $d = 0) {
  if (is_array($v)) {
    if ($d >= $max_d) {
      return $r;
    } else {
      $d++;
      return array_map(function ($v) use ($max_d, $r,  $d) {
        return parse($v, $r, $max_d, $d);
      }, $v);   
    }
  } else {
    return $v;
  }
}

// Example:
$new_array = array_map(function ($v) {
    return parse($v, "...", 2);
  }, $original_array);
?> 
```

# android - Android 谷歌地图使用谷歌地图进行更新 - 对吧？

> ID：13052663
> 
> 赞同：0
> 
> 时间：2012-10-24T15:41:18.117
> 
> 标签：android, google-maps

我要问一个问题来确认怀疑，但我只是想在回复客户之前先确认一下。该应用程序的一些消费者抱怨说，当谷歌地图时，Android 地图（使用谷歌地图）没有得到更新，就像在网络上一样。我的第一个想法是，这是错误的。我假设并且无法找到其他方法，当 Google 地图更新时，Android 设备上的地图也会更新。

它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:42:35.953

我相信他们会这样做。我已经看到 Satellite View 更新而没有更新实际的 Maps 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:50:48.417

如果它们查询不同的服务器，两者可能不会完全同步：Google 总是通过逐步推出来应用其更改。
因此，如果您在桌面上查询一台已经收到更新的服务器，而在您的手机上查询的那台尚未收到更新，您可能会发现差异。但这应该是非常罕见的情况。

# xml - 不生成空的 xml 属性

> ID：13052667
> 
> 赞同：3
> 
> 时间：2012-10-24T15:41:30.990
> 
> 标签：xml, cobol, xml-attribute

首先，如果我使用了错误的词汇，让我道歉，因为我对 COBOL 不太熟悉。我们正在尝试从 COBOL 中的固定数据结构生成 xml 文档。这很好用，使用 GENERATE 语句，但我们有一个问题。

如果数据如下：

```
First;Second;Age;Optional
JOHN;SNOW;18;Something
JOHN;DOE;45;Nothing
JOHN;ISSUE;30; 
```

然后生成的xml如下所示：

```
<Persons>
   <Person First="JOHN" Second="SNOW" Age="18" Optional="Something"/>
   <Person First="JOHN" Second="DOE" Age="45" Optional="Nothing"/>
   <Person First="JOHN" Second="ISSUE" Age="18" Optional=""/>
</Persons> 
```

当我们希望生成器在属性为空时不创建属性时：

```
<Persons>
   <Person First="JOHN" Second="SNOW" Age="18" Optional="Something"/>
   <Person First="JOHN" Second="DOE" Age="45" Optional="Nothing"/>
   <Person First="JOHN" Second="ISSUE" Age="18" />
</Persons> 
```

有没有简单的方法来实现这一点？一直在 IBM 文档和谷歌上四处寻找，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:33:47.253

我们已经成功地将[OCCURS 0 到 1 DEPENDING var](http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1/index.jsp?topic=/com.ibm.entcobol.doc_4.2/PGandLR/ref/rlddeoc2.htm)用于可选项目。我们将 var 设置为 0 或 1，具体取决于所指对象是否存在。

这是一个杂物。现有的 SHARE[要求](http://www.share.org/p/cm/ld/fid=131)使 kludge 变得不必要；我希望该功能在[v.Next](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14829871) COBOL 编译器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:04:06.800

在我看来，更简单的方法是使用 XML PARSE 动词为您的模式编写一个漂亮的打印机自定义。执行 GENERATE，然后通过漂亮的打印机将其输入以应用您的特定规则来生成最终输出。

# c# - 按字符串排序为浮点数

> ID：13052668
> 
> 赞同：1
> 
> 时间：2012-10-24T15:41:30.767
> 
> 标签：c#, linq-to-sql, floating-point, sql-order-by, varchar

我有一个表，其中有一个名为“长度”的字段，类型为 varchar(10)。这些字段包含“实数”（带小数点的分数。例如 647.45224） - 以字符串表示。我想调用一个 Linq-to-SQL 查询，该查询将按此字段（以其数字表示形式）对 SELECT 的结果进行排序，就像这个“本机”SQL 查询一样：

```
SELECT * FROM [Table] ORDER BY CAST(length AS float) DESC 
```

我已经尝试了几种方法来告诉 LinqToSQL 将字符串转换为浮点数，但是在运行它时 - 它返回一个转换错误（请注意，编译期间没有智能感知错误，也没有错误，只有在执行时）。

我试过了：

```
Results = dbx.[Items].Where([conditions]).OrderByDescending(b => float.Parse(b.length)) 
```

我还将满足于舍入并转换为 Int 并以此进行排序（尽管我当然更喜欢使用实数），我尝试过：

```
Results = dbx.[Items].Where([conditions]).OrderByDescending(b => Convert.ToInt32(b.length)) 
```

但这也给出了一个错误。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:01:27.320

你需要使用`Convert.ToDouble`

```
dbx.[Items].Where([conditions]).OrderByDescending(b => Convert.ToDouble(b.length)) 
```

它将生成以下SQL

```
ORDER BY CONVERT(Float,[t0].[length]) 
```

请注意，SQL server 类型`float`与 .NET 类型相同`double`（不是`float`）

# iphone - 模拟器在 UIManagedDocument 文档状态上停止？

> ID：13052670
> 
> 赞同：1
> 
> 时间：2012-10-24T15:41:35.830
> 
> 标签：iphone, objective-c, cocoa-touch, ios-simulator

在我好奇为什么执行似乎停止在下一行之前，我没有在 Xcode 模拟器上使用过 Core Data（见下文）。这在设备上工作得很好，但在模拟器上`[[self managedDocument] documentState]`返回`(null)`。我怀疑这是因为模拟器使用 Mac 并且没有在磁盘上创建数据库，但我只是想检查以确保在实际设备上运行时没有发生我遗漏的事情。

```
if([[self managedDocument] documentState] == UIDocumentStateNormal) {
    [self scanDataFromServer:kALL_REACTOR_TEMPS];
} 
```

**笔记：**

我不需要在模拟器上运行，我只是想检查应用程序如何在更大的 iPhone5 屏幕上运行，而 Apple 则可以将实际设备运送给我。

**还：**

1.  模拟器设置为视网膜 4 英寸，我使用的设备是 iPhone4。
2.  应用程序首先创建并填充核心数据，因此它不是丢失文件的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:14:01.307

首先，`UIDocumentState`是一个 NSInteger 枚举——它永远不能为 nil 或 null。它可以是未初始化的（垃圾），也可以是零。

我不确定你的意思是什么：

> 我怀疑这是因为模拟器使用 Mac 并且没有在磁盘上创建数据库

模拟器使用计算机的硬盘作为磁盘，存储系统在模拟器和设备之间没有区别。当然，您的应用程序在模拟器上的根文件夹路径与在设备上的不同，但这并不重要。您可以在 Mac 上的应用程序文件夹中找到数据库文件，该文件夹位于`~/Library/Application Support/iPhone Simulator/`.

创建后我会仔细检查您的`UIDocument`，并确保它不是`nil`. 此外，记录`fileURL`文档并在您的计算机上找到该文件以确保它存在。

# java - 如何在方法中更改 JComponent 属性

> ID：13052671
> 
> 赞同：0
> 
> 时间：2012-10-24T15:41:36.717
> 
> 标签：java, swing, jcomponent

我正在尝试编写一个包含我想要更改、添加、删除等元素（特别是 JLabels 和 JButton）的 GUI。但是，Java 告诉我这些对象的所有修饰符都是无效的（final 除外），这意味着我不能在定义它们的位置之外引用这些对象。我的问题是，我该如何设置，以便以后可以操作这些元素？

如果相关，我的 GUI 是一个 JFrame，其中包含一个菜单栏、一个画布和一个面板（其中包含我想要操作的元素）。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:15:30.013

> Java is telling me that all modifiers for these objects are invalid

From this description it would appear that you are creating components locally that need to be accessed elsewhere, for instance in an `ActionListener` class.

I would suggest not to create any components that that belong to the `JFrame` or GUI container or in a local scope e.g. `main` method, that may need to be accessed later. The simple example below shows how the component `label1` can be accessed easily by inner class `ButtonAction`:

```
public class SwingExample extends JFrame {
    private JButton button1;
    private JLabel label1;

    public SwingExample() {
        super("SwingExample");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(400, 300);
        button1 = new JButton("Test");
        button1.addActionListener(new ButtonAction());
        label1 = new JLabel("Swing Example", JLabel.CENTER);
        add(label1, BorderLayout.CENTER);
        add(button1, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        // don't create any locally scoped components here
        new SwingExample().setVisible(true);
    }

    class ButtonAction extends AbstractAction  {

        @Override
        public void actionPerformed(ActionEvent e) {
            label1.setText("label1 Accessed through global variable");
        }
    }
} 
```

# c# - 从 Azure Blob 存储下载文件

> ID：13052673
> 
> 赞同：6
> 
> 时间：2012-10-24T15:41:42.240
> 
> 标签：c#, azure, download, azure-blob-storage

我有一个允许用户上传照片的应用程序，这些照片存储在 Azure Blob 存储中。用户还可以查看这些照片。要查看它们，我们希望应用程序将图像下载到默认下载位置。目前，上传工作完美。但是我为 Azure API 找到的下载功能似乎没有做任何事情。此外，我无法真正指定下载位置，因为此功能需要在台式机/笔记本电脑以及具有不同默认目录的移动设备上运行。

这似乎应该很简单，但我找不到任何可以帮助我的东西。

这是我的代码示例：

```
CloudBlobContainer container = blobClient.GetContainerReference("photos");
CloudBlob blob = container.GetBlobReference(photo.BlobUrl);
//copy blob from cloud to local gallery
blob.DownloadToFile(photo.ImageName); 
```

导致服务器请求但没有任何反应，`blob.DownloadToFile(photo.ImageName);`也就是没有下载文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T22:52:34.647

有什么理由不能让客户端直接从 blob 存储下载文件并使用内置浏览器功能来保存它？如果文件是私有的，则很容易生成 SAS 签名。这将从您的服务器中卸载下载并消除该开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T18:31:14.743

这里：

```
blob.DownloadToFile(photo.ImageName); 
```

您需要告诉它保存文件的位置以及您想要的名称：

```
blob.DownloadToFile("C:\mycutepuppy.jpg"); 
```

您可以使用 System.Environment.SpecialFolder 枚举根据当前系统找出文件夹，然后附加您想要的图像名称；

这是一个更完整的示例：

```
var imgPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory), + photo.ImageName);

blob.DownloadToFile(imgPath); 
```

这会将图像保存到用户桌面目录所在的正确路径。这是有关特殊文件夹的枚举的文档。

[http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T16:15:00.573

I wonder what do you expect from this code, but especially in the case of different platform this would not work. I suggest that you use the [DownloadToStream](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.cloudblob.downloadtostream.aspx) method instead. Then you can decide what to do with the stream. For example ask the user where does he want to save the file.

# asp.net-mvc - 渲染全局标题

> ID：13052674
> 
> 赞同：1
> 
> 时间：2012-10-24T15:41:43.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, layout, viewbag

我正在尝试从数据库中提取已保存的标题。我希望它每次都加载而不使用视图来调用它。所以我希望在从布局中调用它时拉出一个变量。我怎样才能做到这一点？

在布局示例中：

```
@ViewBag.ShowTitle 
```

这将显示给呈现布局的每个页面。我不确定如何在没有控制器的情况下将数据库中的字段调用到屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:46:51.943

只需[`PartialView`](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)在您的`_Layout.cshtml`页面中调用 a 即可。

```
@Html.Partial("_Title") 
```

但是您确实需要 a`Controller`与数据库交互并将`Title`值分配给`ViewBag`.

**部分视图**

```
<div>
    <h2>
        @ViewBag.ShowTitle
    </h2>
</div> 
```

* * *

您也可以按照以下链接中的说明进行操作，在其中定义 a `ViewModel`、 a和内部`Controller`调用：`@Html.Action``_Layout.cshtml`

[ASP.NET MVC 3 _Layout.cshtml 控制器](https://stackoverflow.com/q/4692977/114029)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:54:50.150

[只有当您的数据库支持直接 Web 访问（如 Raven DB http://ravendb.net/docs/http-api](http://ravendb.net/docs/http-api)）时，您才能避免使用控制器。

但是您也可以在会话中使用技巧。例如，您可以在 global.asax 中读取并保存 Session 的标题，并在页面上使用 session 变量，但这样编写代码非常糟糕。

# rabbitmq - 具有 Spring 集成和 RabbitMQ 的持久 RPC

> ID：13052675
> 
> 赞同：3
> 
> 时间：2012-10-24T15:41:45.230
> 
> 标签：rabbitmq, amqp, spring-integration

我创建了一个简单的消息发送者和消费者，并使用 spring-integration 和 RabbitMq 将它们链接在一起。

我使用了出站网关和入站网关来创建 RPC（请求/响应）风格的消息传递。我没有指定回复通道，因为我将其留给 spring 来创建（我假设它将为回复创建一个匿名队列）。

当消费者在发送者之前启动时，这工作得很好，但如果消费者在发送者之后启动，我没有收到响应。我可以看到消费者收到了消息，但没有返回任何响应。

进一步检查，我可以看到发送者发送消息时在 rabbit 中创建了一个临时匿名队列，并且消息在回复标头中包含此队列名称。然而，在我启动消费者之前，这个队列在创建后不久就消失了。我猜随着队列不再存在，消费者无法发布对它的响应。

从rabbit管理工具可以看出，匿名队列设置为独占，自动删除设置为true。尽管队列是由弹簧集成创建的，但我无法控制这些属性。

有谁知道如何解决这个问题？我的配置如下：

发件人：

```
<import resource="classpath:rabbit.xml" />

<int:channel id="output" />

<int:gateway id="senderGateway" service-interface="gordon.outbound.SenderGateway" default-request-channel="output"/>

<int-amqp:outbound-gateway request-channel="output"
                                   amqp-template="amqpTemplate" exchange-name="silly-wabbit-exchange"
                                   routing-key="silly-wabbit-key"/> 
```

消费者：

```
<import resource="classpath:rabbit.xml" />

<int:channel id="input"/>

<int-amqp:inbound-gateway request-channel="input" queue-names="silly-wabbit-queue" connection-factory="connectionFactory"/>

<bean id="listenerService" class="gordon.inbound.ListenerService"/>

<int:service-activator input-channel="input" ref="listenerService" method="receiveMessage"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:59:44.473

默认回复超时为 5 秒。如果消费者在 5 秒内没有回复，则取消出站网关的消费者，移除临时队列。

您可以通过在 <rabbit:template/> 上配置回复超时（毫秒）来增加超时。

# c# - WebRequest.GetRequestStream 和 LOH

> ID：13052679
> 
> 赞同：2
> 
> 时间：2012-10-24T15:42:08.027
> 
> 标签：c#, .net, webrequest

我正在使用下面的代码将大文件上传到服务器，并注意到将 FileStream 复制到 GetRequestStream 字节数组被创建并保存在内存中。这增加了大对象堆，我不想要它。也许有人知道如何解决这个问题？

```
Stream formData = new FileStream(.....)

    HttpWebRequest request = WebRequest.Create(postUrl) as HttpWebRequest;
    using (Stream requestStream = request.GetRequestStream())
    {             
     Helpers.CopyStream(formData, requestStream);
     requestStream.Close();
    }

     public static void CopyStream(Stream fromStream, Stream toStream)
            {
                try
                {
                    int bytesRead;
                    byte[] buffer = new byte[32768];
                    while (fromStream != null && (bytesRead = fromStream.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        toStream.Write(buffer, 0, bytesRead);
                    }
                }
                catch (IOException)
                {
                    //suppress empty stream response
                }
            } 
```

内存分析器图表。字节数组在 GetRequestStream 内部创建

![内存分析器图表。 字节数组在 GetRequestStream 内部创建](../Images/68b9cfdb26968723bccd204b1a0686d6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:53:44.317

您可以使用[`HttpWebRequest.AllowWriteStreamBuffering`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowwritestreambuffering.aspx)禁用内部缓冲：

```
 HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

    request.AllowWriteStreamBuffering = false;

    using (Stream formData = File.Open(fileName, FileMode.Open))
    using (Stream requestStream = request.GetRequestStream())
    {
        formData.CopyTo(requestStream, 32768);
    } 
```

# objective-c - 从 NSMutableArray 中删除核心数据对象

> ID：13052680
> 
> 赞同：0
> 
> 时间：2012-10-24T15:42:09.637
> 
> 标签：objective-c, core-data, nsmutablearray, nsmanagedobject, nsmanagedobjectcontext

我有一个 NSMutableArray 目前拥有一堆核心数据实体，如下所示：

```
NSFetchRequest *fetchReq = [[NSFetchRequest alloc]init];
[fetchReq setEntity:[NSEntityDescription entityForName:@"Subject"
                                inManagedObjectContext:self.managedObjectContext]];

subjectsArray = [self.managedObjectContext executeFetchRequest:fetchReq error:nil]; 
```

然后我把这个数组放在字典里：

```
_childrenDictionary = [NSMutableDictionary new];
[_childrenDictionary setObject:subjectsArray forKey:@"SUBJECTS"]; 
```

然后将该字典用作我已实现的源列表的数据。我遇到的问题是从subjectArray 中删除一个对象。我已经使用以下代码进行了尝试：

```
_selectedSubject = [subjectsArray objectAtIndex:0];
[subjectsArray removeObject:subjectToDelete]; 
```

现在这工作正常，当我执行以下操作时：

```
for (Subject *s in subjectsArray) {
        NSLog(@"Subjects: %@", [s title]);
    } 
```

我选择删除的主题不再存在，并且我在调用后正确更新了源列表：

```
[_sidebarOutlineView reloadData]; 
```

我遇到的问题是，当我退出应用程序并再次打开它时，我之前删除的主题仍然存在。

将核心数据实体提取到数组和字典中是在*applicationDidFinishLaunching*内部完成的。目前所有这些代码都在 AppDelegate 文件中，该文件有一个 .h 文件，如下所示：

```
#import <Cocoa/Cocoa.h>
#import "Subject.h"

@interface LTAppDelegate : NSObject <NSApplicationDelegate, NSOutlineViewDelegate,     NSOutlineViewDataSource, NSMenuDelegate> {
    IBOutlet NSWindow *newSubjectSheet;
    IBOutlet NSWindow *newNoteSheet;
    IBOutlet NSWindow *newEditSheet;
    NSMutableArray *subjectsArray;
}

@property Subject *selectedSubject;
@property (assign)IBOutlet NSOutlineView *sidebarOutlineView;
@property NSArray *topLevelItems;
@property NSViewController *currentContentViewController;
@property NSMutableDictionary *childrenDictionary;
@property NSArray *allSubjects; 
```

关于是什么导致删除的主题重新出现的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:49:50.413

您正在从本地数组中删除对象，而不是 CoreData 存储本身。

要从 Core Data 存储中删除一个对象，你需要调用`managedObjectContext deleteObject:theObject`它，然后调用`managedObjectContent save:&error`它来持久化它。

如果您使用的是表格视图，我建议您也检查一下 NSFetchedResultsController。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:45:48.463

您需要将更改提交到`NSManagedObjectContext`以使其持久存在。

查看`save:&errorOut`该类的方法以获取详细信息。

# c++ - 从 UMDF 驱动程序 (C++) 调用 CreateFile 时出现“拒绝访问”错误

> ID：13052684
> 
> 赞同：4
> 
> 时间：2012-10-24T15:42:26.280
> 
> 标签：c++, windows-7, driver, createfile, umdf

我正在创建一个需要更改 LCD 背光亮度的 UMDF 驱动程序。

以下代码行在控制台应用程序中工作并成功返回设备句柄：

```
HANDLE hDevice = CreateFile(L"\\\\.\\LCD", GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, 0); 
```

但是，当我在驱动程序中使用完全相同的代码时，它返回 INVALID_HANDLE_VALUE 并且 GetLastError() 给出代码 5，即“访问被拒绝”

正在使用标准 WDKRemoteUser 配置文件在 x64 Windows 7 机器上远程调试驱动程序。

有谁知道问题可能是什么？我是否需要设置权限，如果需要，如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:41:33.080

听起来好像您需要[模拟驱动程序客户端。](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554861%28v=vs.85%29.aspx)

> UMDF 驱动程序通常在 LocalService 帐户下运行，并且无法访问需要用户凭据的文件或资源，例如受保护的文件或其他受保护的资源。UMDF 驱动程序通常对在客户端应用程序和设备之间流动的命令和数据进行操作。因此，大多数 UMDF 驱动程序不访问受保护的资源。
> 
> 该框架提供了一种模拟能力，允许驱动程序模拟驱动程序的客户端并获得客户端对受保护资源的访问权限。

# python - 访问拆分列表中的某些单词

> ID：13052686
> 
> 赞同：1
> 
> 时间：2012-10-24T15:42:32.943
> 
> 标签：python, list, random, split, shuffle

我正在尝试在 python 中创建一个程序，该程序从用户那里获取一个句子并混淆所述单词的中间字母，但保持其他字母完整......现在我有代码可以重新排列所有用户输入的内容，只是忘记了空格...我会让我的代码为自己说话..它适用于单个单词输入，我想我会总结一下...我需要随机化用户输入的每个单词，然后保持其他单词完整..

```
import random

words = input("Enter a word or sentence") #Gets user input

words.split()

for i in list(words.split()): #Runs the code for how many words there are

    first_letter = words[0] #Takes the first letter out and defines it

    last_letter = words[-1] #Takes the last letter out and defines it

    letters = list(words[1:-1]) #Takes the rest and puts them into a list

    random.shuffle(letters) #shuffles the list above

    middle_letters = "".join(letters) #Joins the shuffled list

    final_word_uncombined = (first_letter, middle_letters, last_letter)                       #Puts final word all back  in place as a list

final_word = "".join(final_word_uncombined) #Puts the list back together again

print(final_word) #Prints out the final word all back together again 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:06:51.677

您的代码几乎是正确的。修正后的版本是这样的：

```
import random

words = raw_input("Enter a word or sentence: ")
jumbled = []

for word in words.split(): #Runs the code for how many words there are
    if len(word) > 2:       # Only need to change long words
        first_letter = word[0] #Takes the first letter out and defines it
        last_letter = word[-1] #Takes the last letter out and defines it
        letters = list(word[1:-1]) #Takes the rest and puts them into a list
        random.shuffle(letters) #shuffles the list above
        middle_letters = "".join(letters) #Joins the shuffled list
        word = ''.join([first_letter, middle_letters, last_letter])

    jumbled.append(word)

jumbled_string = ' '.join(jumbled)
print jumbled_string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:54:04.673

如果我正确理解了您的问题，那么您似乎走上了正轨，您只需为每个单词都扩展它

```
randomized_words = []
for word in words.split():
   #perform your word jumbling
   radomized_words.append(jumbled_word)

print ' '.join(randomized_words) 
```

这会创建一个单独的混乱单词列表。用户单词输入中的每个单词都混杂在一起并添加到列表中以保持顺序。最后，打印出杂乱的单词列表。每个单词的顺序与用户输入的顺序相同，但字母混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:28:37.297

所以我读了这个问题，在公寓吃午饭的时候，我不得不涉水穿过交通。无论如何，这是我的单行贡献。说真的 alexeys 的答案是它在哪里。

```
sentence = input("Enter a word or sentence")
print " ".join([word[0] + ''.join(random.sample(list(word[1:-1]), len(list(word[1:-1])))) + word[-1] for word in sentence.split()]) 
```

# python - Python如果循环为每次迭代产生相同的输出字符串，如何只打印一次？

> ID：13052695
> 
> 赞同：1
> 
> 时间：2012-10-24T15:42:58.400
> 
> 标签：python, if-statement, output

```
a = [['jimmy', '25', 'pancakes'], ['tom', '23', 'brownies'], ['harry', '21', 'cookies']]
for i in range(len(a)):
    if (a[i][1] == '20' or a[i][1] == '26'):
        print 'yes'
    else:
        print 'Not found' 
```

这个输出是`Not found`三倍。如果 if 循环的每次迭代的输出都相同，我希望它遍历整个列表，然后`Not found`只打印一次。

如果我改变`a[i][1] == '25'`并且输出变为：

```
yes
Not found
Not found 
```

我想打印`yes`但不是`Not found`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:46:58.210

可能是您正在寻找`for-else`循环。

正如@Burhan Khalid 建议的`for i in a`那样，如果`range(len(a))`：

```
a = [['jimmy', '25', 'pancakes'], ['tom', '23', 'brownies'], ['harry', '21', 'cookies']]
for i in a:
    if (i[1] == '25' or i[1] == '26'):
        print 'yes'
else:
    print 'Not found' 
```

**输出：**

```
yes
Not found 
```

或者您可能正在寻找`any()`：

```
In [200]: if any((i[1]=='25' or i[1]=='26') for i in a):
    print 'yes'
else:    
    print 'not Found'
   .....: 

yes

In [204]: if any((i[1]=='20' or i[1]=='26') for i in a):
    print 'yes'
else:    
    print 'not Found'
   .....: 

not Found 
```

# ocean - 如何以编程方式在 Petrel 函数窗口中显示 BlackOil

> ID：13052697
> 
> 赞同：0
> 
> 时间：2012-10-24T15:43:00.087
> 
> 标签：ocean, petrel

如何在 FunctionWindow 上以编程方式显示 BlackOil 域对象的油/水/气成分？我尝试在 BlackOil.OilPhase 上调用 FunctionWindow.ShowObject 但收到一个错误，即在输入树上找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:11:02.580

我需要在这里说声抱歉，但是当您可以通过 FluidFunctionCollection 以编程方式访问对象（您可以创建/更新它），但您无法通过 InputTree 接口访问同一对象（您将收到当尝试从 Petrel UI 导航到此对象类型并将其发送到您的插件（尚未从该站点为 Ocean 公开）时，通过 GetType 方法的 UnknownEntity，因此您无法以编程方式显示此对象。我为您的案件提交了内部票证。

# xslt - xsl 样式表和空元素

> ID：13052702
> 
> 赞同：0
> 
> 时间：2012-10-24T15:43:04.407
> 
> 标签：xslt

我需要在 dublincore xml 上应用 xsl 来转换

```
<dc:description> blahblah </dc:description> 
```

在类似的东西：

```
<descriptions>
 <description descriptionType="Abstract"> blahblah </description>
</descriptions> 
```

我正在测试这个，但如果元素是空的，我不想显示任何东西，而不是`<descriptions/>`

你应该如何纠正这个？

```
 <xsl:if test="dc:description">
            <descriptions>
                <xsl:for-each select="dc:description">
                <xsl:variable name="description" select="."/>
                <xsl:if test="$description !=''">
                    <description descriptionType="Abstract">
                        <xsl:value-of select="."/>
                    </description>
                </xsl:if>
                </xsl:for-each>
            </descriptions>
        </xsl:if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:47:22.800

```
<xsl:if test="dc:description/text()"> 
```

只有当至少有一个 non-empty 时才应该是 true `dc:description`。或者重复使用你在内部 if 中所做的相同测试并说

```
<xsl:if test="dc:description != ''"> 
```

*如果集合中的任何*节点的值是另一侧，则一侧是节点集的`!=`测试成功（这就是为什么规范中的注释不一定与x 和 y 中的一个或两个相同的原因节点集）。*`!=``x != y``not(x = y)`*

# c# - 在 C# 中查找 AutoCAD 属性的单位

> ID：13052705
> 
> 赞同：1
> 
> 时间：2012-10-24T15:43:10.100
> 
> 标签：c#, autocad, autocad-plugin

我正在获取模型空间中的所有对象以绘制 AutoCAD 图形。这些对象有各种类型，如 Pipe、Duct、DuctFitting、Line、Mesh、Solid3D 等，所以我正在编写逻辑来通过使用 TypeDescriptor 反映来确定它们的属性。我想知道是否有一种更聪明的方法来获取对象的所有属性，以及是否有一种方法可以确定给定项目的度量单位。我知道如何查看绘图使用的单位，但我如何判断名为“长度”的属性实际上是使用绘图中的单位（如英尺或米）的长度？

这是我必须枚举所有我想要的项目的代码：

```
using (var transaction = database.TransactionManager.StartTransaction())
{
    BlockTable blockTable = (BlockTable)transaction.GetObject(database.BlockTableId, OpenMode.ForRead);
    BlockTableRecord blockTableRecord = (BlockTableRecord)transaction.GetObject(blockTable[BlockTableRecord.ModelSpace], OpenMode.ForRead);

    foreach (DBObject dbObject in blockTableRecord
        .Cast<ObjectId>()
        .Where(id => id.IsValid && !id.IsNull && !id.IsEffectivelyErased && !id.IsErased)
        .Select(id => transaction.GetObject(id, OpenMode.ForRead))
    {
        //DISCOVER PROPERTIES AND THEIR UNITS HERE
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:21:16.940

这将对您有所帮助。

```
UnitsValue unitValue=Application.DocumentManager.MdiActiveDocument.Database.Insunits; 
```

`UnitValue`是枚举，它支持 20 种单位类型，包括`LightYear`,`Armstrong`等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:38:30.700

反思对我来说似乎是一种合理的方法。

要查找具有与其关联的单位的属性，您可以检查每个属性的`Autodesk.AutoCAD.DatabaseServices.UnitTypeAttribute`. 例如，如果您正在使用`TypeDescriptor`并正在寻找距离属性，它可能如下所示：

```
var distanceAttribute = new UnitTypeAttribute(UnitType.Distance);
foreach (PropertyDescriptor property in TypeDescriptor.GetProperties(dbObject))
{
    if (property.Attributes.Matches(distanceAttribute))
    {
        // Here's a property that is a distance.
    }
} 
```

这依赖于 API 实际`UnitTypeAttribute`应用到您期望的地方。

# php - 用文本区域更新 SQL 表？

> ID：13052708
> 
> 赞同：0
> 
> 时间：2012-10-24T15:43:15.323
> 
> 标签：php, mysql, textarea

我正在尝试使用户可以在文本区域中键入文本，然后更新数据库'ptb_profiles'中的mysql表'bio'。

目前他们的信息被拉入这个文本区域，但我想要它，以便他们在其中输入的任何内容都会更新表格。

我正在使用以下代码，但它不起作用？我是 php 和 mysql 的新手，所以它一定是错误的。

任何帮助将非常感激。谢谢。

```
<?php 
//We check if the form has been sent
if(isset($_POST['bio']))
{
    $content = $_POST['bio'];
        //We remove slashes depending on the configuration
        if(get_magic_quotes_gpc())
        {
                $content = stripslashes($content);
        }
        //We check if all the fields are filled
        if($_POST['bio']!='')
        {
            $sql = "INSERT INTO ptb_profiles.bio VALUES (NULL, '".$_SESSION['user_id']."', '".$message['bio']."');";
            mysql_query($sql, $connection);

            echo "<div class=\"infobox-message\">Your Profile Information has been updated..</div>";
        }
}

?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">

<textarea id="bio"  rows="10" style="width: 456px; 
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 122px;
    resize: none; 
    border: hidden;"><?php echo $profile['bio'] ?> </textarea>

     <input type="submit" name="send_button" id="send_button" value="Send"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:46:14.543

您正在插入内容，`$message['bio']`但`$message`您的代码中没有数组（也没有`$profile`用于填充下面的 HTML）。

你`$content = stripslashes($content);`也没有意义，因为你不再使用`$content`任何东西，更不用说你应该通过 PHP config 或 .htaccess 禁用 magic_quotes_gpc 而不是签入代码。

最后，您可以接受 SQL 注入攻击。

编辑：正如@a​​ndrewsi 所发现的，您的`<textarea>`元素`name`也缺乏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:13:12.143

问题在于您的文本区域没有 name="bio" 属性。也使用 nl2br 和 htmlentities 然后保存在数据库中。当取回它时，取回真实的实体。

```
 <?php 
//We check if the form has been sent
if(isset($_POST['bio']))
{
        echo $content = htmlentities(nl2br($_POST['bio']));
        //We remove slashes depending on the configuration

        //We check if all the fields are filled

            $sql = "INSERT INTO ptb_profiles.bio VALUES (NULL, '".$_SESSION['user_id']."', '".$content."');";
            mysql_query($sql, $connection);

            echo "<div class=\"infobox-message\">Your Profile Information has been updated..</div>";
            //exit;

}

 $sql = "Select bio from ptb_profiles.bio WHERE user_id =  '".$_SESSION['user_id']."'";
 $res = mysql_query($sql, $connection);
 $profile = mysql_fetch_array($res);

 $nl = str_replace("<br />", "\n", $profile['bio']);
?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">

<textarea id="bio" name="bio" rows="10" style="width: 456px; 
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 122px;
    resize: none; 
    border: hidden;"><?php echo $nl; ?> </textarea>

     <input type="submit" name="send_button" id="send_button" value="Send"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T01:49:13.523

在我自己遇到这个问题并花了一些时间尝试通过许多论坛帖子的解决方案解决问题后，我设法解决了同样的问题。在我检查的所有论坛中，问题是使用 $_POST php 超全局变量将字符串值从 textarea 获取到 sql 'INSERT' 语句中

我能看到它实际上有效并且不会引发任何错误的唯一方法是在编写“INSERT”语句时忽略列名，而不是：

```
"INSERT INTO tbl_dbTable ( Colummn1, Colummn2...) VALUES( '$_POST[textarea]', 'Value2'..)" 
```

只需使用：

```
"INSERT INTO tbl_dbTable VALUES( '$_POST[textarea]', 'Value2'..)" 
```

唯一的缺点是您必须列出表中所有列的值，但它解决了将 textarea 值放入 sql 列的问题。

希望这可以帮助其他有同样问题的人

# oracle - 在gorm grails中保存带有虚拟列的实体

> ID：13052709
> 
> 赞同：2
> 
> 时间：2012-10-24T15:43:18.537
> 
> 标签：oracle, grails, grails-orm, virtual-column

所以，在我的应用程序中，我有一个带有虚拟列的实体。该列的值取决于我在另一列中保存的内容。

保存时出现以下错误：

java.sql.BatchUpdateException: ORA-54013: 在虚拟列上不允许插入操作

这是因为我在该字段上发送一个空值。

有人知道如何在gorm中映射虚拟列吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:18:49.970

Grails 派生属性可能会提供您需要的功能。

[http://grails.org/doc/latest/guide/GORM.html#derivedProperties](http://grails.org/doc/latest/guide/GORM.html#derivedProperties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:21:22.983

扩展的[GORM 映射](http://grails.org/plugin/extended-gorm-mappings)插件允许您将单个列标记为从插入和更新中排除。

例子：

```
static mapping = {
    readOnlyColumn updateable: false, insertable: false
} 
```

# hibernate - 休眠覆盖@transient

> ID：13052717
> 
> 赞同：7
> 
> 时间：2012-10-24T15:43:48.397
> 
> 标签：hibernate, jpa

我有一个映射的超类，它有一个我的数据库中的一些表共享的字段。

我希望用@Transient 注释这个字段，以便大多数实体会忽略它，但在子实体上取消@Transient 或取消@Transient。

这可能吗？

谢谢你，伊多布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:31:17.120

您也许可以使用鉴别器模式

[http://docs.jboss.org/hibernate/orm/3.3/reference/en-US/html/mapping.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en-US/html/mapping.html)

您必须设置一个父超类，然后对其进行子类化，例如

```
ClassWithSharedFields
ClassExtensionThatUpdatesCertainFields
ClassExtensionThatReadsCertainFields 
```

然后，`ClassExtensionThatReadsCertainFields`可以将您不打算更新的字段指定为只读。

这可能是一个含糊的建议，所以如果您需要更具体的帮助，可以提供一些更具体的示例，说明您的域类需要如何与您的数据库相关。

# asp.net - web.config 授权：允许基于方法调用？

> ID：13052718
> 
> 赞同：0
> 
> 时间：2012-10-24T15:43:49.240
> 
> 标签：asp.net, authentication, security

我正在尝试用一些基本的安全性改造一个仅限 Intranet 的 ASP.NET webapp。

我有一个授权用户的数据库表，以他们的 AD ID 为键，我有一个方法可以从 Request 对象中读取 AD ID 并将其与表进行匹配。我想使用 web.config “授权”元素来调用此函数，如下所示：

```
<location path="/">
    <system.web>
        <authorization>
            <allow method="checkDatabase()"/>
            <deny users="*"/>
        </authorization>
    </system.web>
</location> 
```

我意识到这种语法是无效的，但是是否有以这种方式起作用的等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:19:25.987

您可以使用 AD 成员资格提供程序。从 MSDN 示例：

```
 <membership defaultProvider="AspNetActiveDirectoryMembershipProvider">
      <providers>
        <add name="AspNetActiveDirectoryMembershipProvider" 
          type="System.Web.Security.ActiveDirectoryMembershipProvider, 
          System.Web, Version=2.0.3600, Culture=neutral, 
          PublicKeyToken=b03f5f7f11d50a3a" />
      </providers>
</membership> 
```

# objective-c - 翻译 iOS 堆栈跟踪 - viewDidUnload 上的 SIGSEGV/SEGV_ACCERR

> ID：13052724
> 
> 赞同：0
> 
> 时间：2012-10-24T15:44:34.407
> 
> 标签：objective-c, ios, segmentation-fault

我猜这个问题是一个生命周期问题。应用程序收到内存警告并尝试卸载一些用户界面项。但我不是 100% 确定如何在堆栈跟踪上最后报告的项目的上下文中解释错误。

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xa0d9f968
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x361dc026 objc_msgSend_stret + 18
1   TheApp                              0x000b4d31 -**[TheAppFeedController removeAdView]** (TheAppFeedController.m:**189**)
2   TheApp                              0x0000d68d -[TheAppViewController viewDidUnload] (TheAppViewController.m:177)
3   TheApp                              0x000b4a63 -[TheAppFeedController viewDidUnload] (TheAppFeedController.m:137)
4   UIKit                               0x32e66a37 -[UIViewController unloadViewForced:] + 251
5   UIKit                               0x32fae3ad -[UIViewController purgeMemoryForReason:] + 65 
```

所以堆栈跟踪指向这个方法，它为什么会抛出这个错误并没有真正的意义。

```
-(void) removeAdView {
    [super removeAdView];
    [self fixLayoutForAdRemoval:self.tableView];
} 
```

当您查找堆栈时，我确实注意到的一件事`[super viewDidUnload]`是被称为第一行代码。因此，在完成所有“卸载”工作后，我将其移至底部。无论这是否真的重要，网上似乎都存在一些分歧，[一些 SO 答案](https://stackoverflow.com/a/2365604/5416)说超类的`viewDidUnload`方法什么都不做，因此在开始或结束时调用它并不重要。

所以我做了那个改变，但是因为我从来没有能够重现这个错误，所以我不确定它是否是实际的修复。想获得更多关于这个问题的意见，看看我的推理是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:46:04.153

```
[super removeAdView];
[self fixLayoutForAdRemoval:self.tableView]; 
```

如果`removeAdView`正在拆除自己的一部分；如果它导致`self`被释放到释放点，那么随后的调用`fixLayoutForAdRemoval:`很容易失败。

在 Instruments 中打开 Zombie detection 并查看它检测到的内容。

# iphone - WhatsApp 如何知道我的联系人的国家代码？

> ID：13052728
> 
> 赞同：14
> 
> 时间：2012-10-24T15:44:59.430
> 
> 标签：iphone, objective-c, ios, timezone

我在美国，电话号码如下所示：

> 无国家代码：123-456-7890
> 
> 国家代码：+1 123-456-7890

现在，根据维基百科，意大利的电话号码具有以下格式：

> 347 xxxxxxx（来自意大利境内）

所以这可能看起来像一个美国号码：347-123-4567

当我在 WhatsApp 上打开所有联系人时，它会自动添加国家代码，所以如果我有一部美国电话 123-456-7890，它会添加 +1。但它怎么知道这是美国号码呢？它可能是任何东西。

我猜它使用我当前的语言环境或时区来确定我在哪里，以及任何没有国家代码的电话号码，只需添加当前用户的国家代码。但我更改了 iPhone 中的区域设置，它仍然能够猜出该号码属于哪个国家/地区。

知道这怎么可能吗？

**更新**：另外，我刚刚尝试在我的手机处于飞行模式时添加一个新的电话号码，而我的地区设置设置为意大利语，而我的时区设置为意大利罗马，它仍然知道我输入了一个美国号码，所以它可以'不可能连接到服务器以获取此信息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T05:40:04.740

WhatsApp 知道您所在的国家/地区代码，因为您已使用 WhatsApp 验证了自己的电话号码。没有明确国际格式的电话号码，即不以“+”或“00”开头的电话号码，将根据您自己的已验证国家/地区代码进行检查。这就是 WhatsApp 知道在您的情况下使用国家代码 1 的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T16:04:31.613

没有明确国家代码的电话号码被假定为您所在国家/地区的本地号码。您自己的国家/地区由区域格式设置（设置、常规、国际）确定。

因此，当您输入**(347) 123-4567**之类的号码时，这将被假定为美国电话号码，因为您在 Region Format 下选择了美国。所以 WhatsApp 可以假设 +1，因为号码中没有明确的国家代码。

假设您在意大利有一个朋友。意大利的国家代码是+39。因此，在“联系人”中，您可以将他们的号码输入为**+39 347 1234567**。

意大利的用户只需输入该号码**347 1234567**即可。WhatsApp 会将用户的区域格式视为意大利，并且会知道显示 +39。

# scala - 我对以下 scala 代码的理解是否正确？

> ID：13052735
> 
> 赞同：37
> 
> 时间：2012-10-24T15:45:32.950
> 
> 标签：scala

我只是想理解下面的代码：

* * *

这里声明了一个新类型别名 Set，它是一个接受 Int 参数并返回布尔值的函数

```
type Set = Int => Boolean 
```

* * *

这里声明了一个新方法“contains”，它接受两个类型为 Set 和 Int 的参数，返回一个布尔值。布尔值设置为前面声明的函数 ('type Set = Int => Boolean') 但是执行什么逻辑来确定 Int 'elem' 是否是 Set 's' 的成员

```
def contains(set: Set, elem: Int): Boolean = set(elem) 
```

* * *

这里定义了一个方法，它返回一个返回一个函数的集合？

```
def singletonSet(elem: Int): Set = set => set == elem 
```

* * *

带有注释的完整代码：

```
 /**
   * We represent a set by its characteristic function, i.e.
   * its `contains` predicate.
   */
  type Set = Int => Boolean

      /**
       * Indicates whether a set contains a given element.
       */
def contains(set: Set, elem: Int): Boolean = set(elem)

      /**
       * Returns the set of the one given element.
       */
      def singletonSet(elem: Int): Set = set => set == elem 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-24T16:26:44.073

让我们按逻辑顺序向后阅读。

假设您有一组有限的整数：`0, 1, 2, 3, 5, 8`例如

描述这组整数的一种方法是通过一个函数（其[特征或指示函数](http://en.wikipedia.org/wiki/Indicator_function)），对于每个整数，如果整数在集合中，则返回 true，否则返回 false。正如我们所描述的，这个函数的签名必须始终是`Int => Boolean`（“给我一个整数，我会告诉你它是否在集合中”），而它的实现将根据具体集合而有所不同。

对于我上面示例中的集合，您可以将此函数简单地编写为：

```
val mySet: Int => Boolean = x => Array(0,1,2,3,5,8) contains x 
```

或认识到集合中的整数是斐波那契数列的第一个整数，并以稍微复杂的方式定义 f（我不会在这里做......）。请注意，我使用的“包含”是为所有 scala 集合定义的。无论如何，现在你有一个函数可以告诉你什么在集合中，什么不在。让我们在 REPL 中尝试一下。

```
scala> val mySet: Int => Boolean = x => Array(0,1,2,3,5,8) contains x
mySet: Int => Boolean = <function1>

scala> mySet(3)
res0: Boolean = true

scala> mySet(9)
res1: Boolean = false 
```

现在， mySet 有 type `Int => Boolean`，如果我们将其定义为类型别名，我们可以使其更具可读性。

```
scala> type Set = Int => Boolean
defined type alias Set 
```

除了可读性之外，定义`Set`为 of 的别名`Int => Boolean`也明确表明，在某种程度上，集合**是**它的特征函数。`Set`我们可以使用类型别名以更简洁（但在其他方面等效）的方式重新定义 mySet ：

```
scala> val mySet: Set = x => Array(0,1,2,3,5,8) contains x
mySet: Int => Boolean = <function1> 
```

现在是这个长答案的最后一部分。让我们定义一个特征函数来描述这个 Singleton 集`3`：简单的：

```
val Singleton3 : Set = set => set == 3 
```

对于仅包含 4 个的单例集，它将是：

```
val Singleton4 : Set = set => set == 4 
```

所以，让我们概括一下这些函数的创建，并编写一个返回单例函数的方法，对于任何整数，该函数描述仅包含该整数的集合：

```
def singletonSet(elem: Int): Set = set => set == elem 
```

* * *

**附录：**

我跳过了这部分，因为它并不是真正需要的：`def contains(set: Set, elem: Int): Boolean = set(elem)`

我认为这有点毫无意义，并且（没有更多上下文）它看起来就像一个人为的例子来演示如何将函数作为参数传递，就像 scala 中的任何其他类型一样。它需要`Int => Bool`函数和`Int`并且只是将函数应用于`Int`你可以做

```
scala> contains(mySet, 3)
res2: Boolean = true 
```

这就像`mySet(3)`直接打电话一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-04T05:18:24.900

看了关于“Currying”的讲座视频，相信Paolo用更冗长的方式表达的解决方案是：

```
 def singletonSet(elem: Int): Set = {
    def innerFunction (givenElement: Int) = 
      if (elem == givenElement) true
      else false
      innerFunction
  } 
```

如果我错了，请纠正我！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-06T13:30:14.213

回答您的问题 -*但是执行什么逻辑来确定 Int 'elem' 是否是 Set 's' 的成员*

这是在您进行实际函数调用时执行的。考虑以下函数调用。

> 包含（单例集（1），1）

现在 singletonSet 定义为**def singletonSet(elem: Int): Set = x => x == elem**（为了清楚起见，我选择使用标识符 x）。singletonSet 的返回类型是 Set 类型的函数，它接受一个 Int 参数并返回 Boolean。所以上面调用函数的第一个参数 singletonSet(1) 等于函数**x => x == 1**因为这里的 elem 是 1。所以我们得到

> 包含((x => x == 1),1)

现在考虑包含函数**def contains(f: Set, elem: Int): Boolean = f(elem)**的定义。上面调用中的第一个参数是函数 x => x == 1，它替换了形式参数 f，第二个参数 1 替换了形式参数 elem。contains 的返回值是等于 f(1) 的函数 f(elem)。因为 f(x) 被定义为 (x == 1)，所以 f(1) 等于 (1 == 1)，它返回 true。

按照相同的逻辑，像 contains(singletonSet(1), 2) 这样的函数调用最终将等同于 (1 == 2)，它将返回 false。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-09T19:04:15.997

我现在正在上课，也很困惑，但我想我现在明白了。

`def singletonSet(elem: Int): Set = (x : Int) => x == elem`

这里的 singletonSet 是**一个函数，它返回一个 Set 类型的函数，**定义为`type Set = Int => Boolean`

因此，当您调用时`def contains(s:Set, elem:Int): Boolean = s(elem)`，例如：`contains(singletonSet(1), 2)`，singletonSet(1) 正在返回一个函数，其中 elem（在 singletonSet 的定义中）设置为 1，并且 2（也定义为 elem，但在 contains 的参数中定义）被传递在作为singletonSet定义中的x，我们需要摆脱java set的想法，我们不需要singletonSet来持久化我们设置的值。

为了更好地理解，我们可以将参数名称更改如下：

`def singletonSet(elemToStore: Int): Set = (x : Int) => x == elemToStore`

`def contains(s: Set, elemToCheck: Int): Boolean = s(elemToCheck)`

# android - Android 自动刷新按钮

> ID：13052736
> 
> 赞同：0
> 
> 时间：2012-10-24T15:45:33.983
> 
> 标签：android, button, refresh

我遇到了一些看起来应该很简单的问题。我有一个带有 2 个按钮的框架布局（一个自然位于另一个按钮之上）。当我单击顶部按钮时，它会自动将我带到一个网站，并且它下方的按钮将其替换为可见的。我想设置一个自动刷新，以便几秒钟后，原来在顶部的按钮再次变为顶部。感谢您提供的任何帮助！这是Java，我尝试创建自动刷新：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final ImageButton bJava1= (ImageButton)findViewById(R.id.button1);
    final ImageButton bJava2 = (ImageButton)findViewById(R.id.button2);
    final WebView webview1= (WebView)this.findViewById(R.id.webView1);
    final MediaPlayer sound= MediaPlayer.create(Youtube.this, R.raw.soundclip1);

    final Handler handler = new Handler();
    Refresh = new Runnable() {
        public void run() {

        bJava1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                webview1.loadUrl("http://www.google.com");
                if(sound.isPlaying()){
                    bJava1.setVisibility(ImageButton.VISIBLE);
                    bJava2.setVisibility(ImageButton.GONE);
                }else {
                    sound.start();
                    bJava1.setVisibility(ImageButton.GONE);
                    bJava2.setVisibility(ImageButton.VISIBLE);
                }
            }

        });
        handler.postDelayed(Refresh, 10000);
    }
};
handler.post(Refresh); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:10:38.850

问题是，您的 Refresh runnable 仅在第一个按钮上注册一个 onClickListener 并每 10 秒调用一次，您应该只在 Runnable 之外注册一次 onClickListener 并且只在 Refresh.run() 方法中调用 if 块：

```
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final ImageButton bJava1= (ImageButton)findViewById(R.id.button1);
final ImageButton bJava2 = (ImageButton)findViewById(R.id.button2);
final WebView webview1= (WebView)this.findViewById(R.id.webView1);
final MediaPlayer sound= MediaPlayer.create(Youtube.this, R.raw.soundclip1);
final Handler handler = new Handler();
Refresh = new Runnable() {
    public void run() {
       if(sound.isPlaying()){
                bJava1.setVisibility(ImageButton.VISIBLE);
                bJava2.setVisibility(ImageButton.GONE);
            }else {
                sound.start();
                bJava1.setVisibility(ImageButton.GONE);
                bJava2.setVisibility(ImageButton.VISIBLE);
            }
     }
};
bJava1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            webview1.loadUrl("http://www.google.com");
            handler.postDelayed(Refresh, 10000);
        }

    }); 
```

# android - 如何在android中使用url实现解析json

> ID：13052744
> 
> 赞同：0
> 
> 时间：2012-10-24T15:46:02.127
> 
> 标签：android, android-layout

我有这个网址：[http](http://shops.alpha-trend.com/mobileapp/productinfo.php?productId=4363&function=GetProductInfo&show=yes) ://shops.alpha-trend.com/mobileapp/productinfo.php?productId=4363&function=GetProductInfo&show=yes 。当我在浏览器中测试这个 url 时，它包含 json 数组，其中存在产品、图像和描述以及许多其他属性。我如何在 java 中解析这个 json 以显示产品、图像和描述。请通过正确的代码帮助我。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:51:09.183

有几个可用的示例，快速搜索出现了两个看起来不错的示例：

[JSON Android 列表视图](https://stackoverflow.com/questions/11318761/json-android-listview)

这个答案看起来非常完整，但缺少 HttpClient 步骤，您可以在下一个答案中找到示例实现：

[http://mobile.dzone.com/news/android-tutorial-how-parse](http://mobile.dzone.com/news/android-tutorial-how-parse)

# python - django：“元组”对象没有属性“strftime”

> ID：13052747
> 
> 赞同：1
> 
> 时间：2012-10-24T15:46:14.437
> 
> 标签：python, django, datetime

我创建了一个日期时间对象的值列表

```
a=design_list.values_list('date_submitted') 
```

所以我得到：

```
[(datetime.datetime(2012, 10, 21, 13, 56, 24),), (datetime.datetime(2012, 10, 21, 10, 33, 58),), etc... 
```

我正在尝试将它们转换为时间戳，例如：

```
timestamps[0] = a[0].strftime("%s") 
```

但我得到了错误：

```
AttributeError: 'tuple' object has no attribute 'strftime' 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:48:48.117

我在查询中添加了 flat=True ：

```
a=design_list.values_list('date_submitted', flat=True) 
```

这使：

```
[datetime.datetime(2012, 10, 21, 13, 56, 24), datetime.datetime(2012, 10, 21, 10, 33, 58), 
```

然后可以转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T15:47:59.947

您指的是元组而不是元组的第一个元素。试试`a[0][0].strftime('%s')`。

```
>>> a = [(datetime.datetime(2012, 10, 21, 13, 56, 24),)]
>>> a[0][0].strftime('%s')
'1350852984' 
```

这就是您收到错误的原因，但正如您正确指出的那样，展平结果列表是正确的方法。

# php - 在最近的帖子侧边栏中突出显示当前帖子，wordpress

> ID：13052753
> 
> 赞同：1
> 
> 时间：2012-10-24T15:46:29.493
> 
> 标签：php, wordpress

我只是想知道如何在另一个循环中获取我当前正在阅读的博客文章的帖子 ID（即侧边栏中的最近帖子循环）

在我的单个 post php 文件中，我有此代码创建一个变量

```
<?php while ( have_posts() ) : the_post(); ?>

                <?php get_template_part( 'content', 'single' ); ?>
                <?php $current_post_id = get_the_ID(); ?> 

            <?php endwhile; // end of the loop. ?> 
```

然后在我的默认小部件 php 文件中，在最近的帖子的循环中，我有这个......

```
<?php  while ($r->have_posts()) : $r->the_post(); ?>
    <?php $recent_post_id = get_the_ID(); ?>

    <li> <?php echo $recent_post_id; if ( $recent_post_id == $current_post_id ) { echo 'pass   '; } else { echo 'fail   ';} ?></li>
    <?php endwhile; ?> 
```

它每次都失败，所以很明显我在做什么没有意义（我还在学习）。我只是想知道有没有办法从第一个循环中获取帖子 ID，并在第二个循环中使用它。当我`current_post_id`在第二个循环中回显时，什么都没有出现。（关于突出显示当前帖子，一旦我开始工作，这将很容易。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:53:43.477

网上有很多关于如何在循环之外获取 ID 的示例。

在小部件代码中试试这个：

```
 <?php  

    global $post;
    $current_post_id = $post->ID;

while ($r->have_posts()) : $r->the_post(); ?>

        <li> <?php echo $recent_post_id; if ( $recent_post_id == $current_post_id ) { echo 'pass   '; } else { echo 'fail   ';} ?><a href="<?php the_permalink() ?>" title="<?php echo esc_attr(get_the_title() ? get_the_title() : get_the_ID()); ?>"><?php if ( get_the_title() ) the_title(); else the_ID(); ?></a></li>
        <?php endwhile; ?> 
```

让我们知道它是否有效。

# eclipse - 隐藏的键绑定 (?)

> ID：13052758
> 
> 赞同：5
> 
> 时间：2012-10-24T15:46:45.293
> 
> 标签：eclipse, key, key-bindings, eclipse-juno

在 Eclipse Juno 中，我无法取消绑定 ++ ，因为绑定的`CTRL`命令（在 SVN 中显示属性）正在使用此绑定，同时在 Preferences / General / Keys 选项卡中没有任何绑定到`ALT`++ 。此外，我将所有绑定解除绑定到.`W``CTRL``ALT``W``W`

问题是`ALTGR`+ `W`( `CTRL`+ `ALT`+ `W`) 是 '|' 匈牙利语键盘布局中的（管道）字符。所以，我不能输入'|' 在日食中。

也许，某处是否有隐藏的键绑定？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T09:20:51.020

我找到了决心！所有 keybindigs 都存储在 中`[your-workspace]\.metadata\.plugins\org.eclipse.e4.workbench\workbench.xmi`，我在这里找到了 CTRL+ALT+W （*我不知道为什么在 Preferences 中不可见*）。我将其更改为任何其他键，或将 a`<tags>deleted</tags>`插入`bindings`标签中。（我之前已经退出了 Eclipse）。一旦重新启动 Eclipse，CTRL+ALT+W 就会被释放。

现在 ALTGR+W 键入“|”。那是我的目标！

# python - python字典浮动搜索范围内

> ID：13052762
> 
> 赞同：2
> 
> 时间：2012-10-24T15:46:55.623
> 
> 标签：python, search

假设我有某种像这样的字典结构（或另一个代表相同事物的数据结构。

```
d = {
  42.123231:'X',
  42.1432423:'Y',
  45.3213213:'Z',
  ..etc
} 
```

我想创建一个这样的函数：

```
f(n,d,e):
    '''Return a list with the values in dictionary d corresponding to the float n
    within (+/-) the float error term e''' 
```

所以如果我用上面的字典调用这样的函数：

```
f(42,d,2) 
```

它会回来

```
['X','Y'] 
```

然而，虽然用循环编写这个函数很简单，但我不想做一些遍历字典中的每个值并彻底检查它的事情，但我希望它以某种方式利用索引结构（或甚至可以使用排序列表）以使搜索更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:49:19.267

字典是一个错误的数据结构。写一个搜索树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:02:30.160

带有数字键的字典通常按键值排序。但是您可能 - 为了安全起见 - 将其重新排列为 OrderedDictionary - 你只做一次

```
from collections import OrderedDict
d_ordered = OrderedDict(sorted(d.items(), key =lambda i:i[0])) 
```

然后过滤值相当简单 - 它会在上边界停止

```
import itertools    
values = [val for k, val in 
          itertools.takewhile(lambda (k,v): k<upper, d_ordered.iteritems()) 
          if k > lower] 
```

正如我已经说过的，排序字典并不是真正必要的——但有些人会说这个假设是基于当前的实现，并且将来可能会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:06:58.513

Python 字典是一个 hashmap 实现。它的键不能像在搜索树中那样进行比较和遍历。因此，如果不实际检查所有键，您根本无法使用 python 字典来做到这一点。

# android - 来自Node的Get0ingt值不起作用，android

> ID：13052765
> 
> 赞同：0
> 
> 时间：2012-10-24T15:46:58.347
> 
> 标签：android, xml, xml-parsing

一切都好。从互联网获取 xml，解析为 Document 但是当我试图从节点（）和一个节点之间获取一些值时（非常多云。）

```
private void parseWeather(Document srcDoc) throws Exception {

        for (int a = 0; a < srcDoc.getElementsByTagName("record").getLength(); a++){
            Node recordNode = srcDoc.getElementsByTagName("record").item(a);
            Node temperatureNode = srcDoc.getElementsByTagName("temperature").item(a);
            Node windNode = srcDoc.getElementsByTagName("wind").item(a);
            Node bioNode = srcDoc.getElementsByTagName("bio").item(a);

            RECORD = recordNode.getAttributes().getNamedItem("date").getNodeValue().toString();
            TEMPERATURE = temperatureNode.getAttributes().getNamedItem("min").getNodeValue().toString();
            WIND = windNode.getAttributes().getNamedItem("speed").getNodeValue().toString();
            BIO = bioNode.getAttributes().getNamedItem("value").getNodeValue().toString();
            Element element= (Element) srcDoc.getElementsByTagName("record").item(a);
            NodeList status = element.getElementsByTagName("status");
            NodeList text = element.getElementsByTagName("text");

            Node statusNode = status.item(0);
            Node textNode = text.item(0);
            String statusText = statusNode.getFirstChild().getNodeValue();
            String textText = textNode.getFirstChild().getNodeValue();

            Log.e("Values", "STatus is " + statusText + " and text is " + textText);

        }

    } 
```

这是xml文件

```
<root>
<forecast>
     <record date="24-10-2012">
<temperature max="17" min="3" unit="°C" />
<wind speed="2 až 5" direction="SV" unit="m/s" />
<bio value="2" />
<status symbol="3">Fair</status>
<text>Very fair today.</text>
<warnings />
     </record>
     <record date="25-10-2012">
<temperature max="16" min="2" unit="°C" />
<wind speed="2 až 5" direction="Juhozápadný" unit="m/s" />
<bio value="3" />
<status symbol="3">Cloudy</status>
<text>Very cloudy tommorow. </text>
<warnings />
      </record>
<record date="25-10-2012">
<temperature max="16" min="2" unit="°C" />
<wind speed="2 až 5" direction="Juhozápadný" unit="m/s" />
<bio value="3" />
<status symbol="3">Cloudy</status>
<text>Very cloudy tommorow. </text>
<warnings />
      </record> 
```

我得到了记录、温度、生物信息的输出，但没有状态和文本的输出。这个循环只会做一个。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:14:41.790

status 和 text 没有任何子节点，因为它们不是节点列表，它们只是节点。尝试将它们作为节点并`status.getNodeValue()`改为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:05:46.810

I found the solution [http://androidcodesnips.blogspot.sk/2011/05/dom-parsing-example.html](http://androidcodesnips.blogspot.sk/2011/05/dom-parsing-example.html)

It doesnt look like so easy

# wcf - 如何在自定义绑定中加密消息之前进行压缩？

> ID：13052772
> 
> 赞同：0
> 
> 时间：2012-10-24T15:47:19.740
> 
> 标签：wcf, encryption, compression, wshttpbinding, custom-binding

我已经按照 microsoft [http://msdn.microsoft.com/en-us/library/ms751458.aspx](http://msdn.microsoft.com/en-us/library/ms751458.aspx)上的示例创建自定义绑定以压缩消息。但是，我希望同时加密我的流量。这很好用，但是加密是在我的压缩之前执行的，这意味着消息的大小变得更大而不是更小......我的绑定配置为

```
<customBinding>
  <binding name="GZipBinding" >                 
    <gzipMessageEncoding innerMessageEncoding="textMessageEncoding"/>
    <transactionFlow />
    <security authenticationMode="SecureConversation" >
      <secureConversationBootstrap authenticationMode="UserNameForCertificate" />
    </security>                 
    <httpTransport  maxReceivedMessageSize="104857600" maxBufferSize="104857600"/>
  </binding>
</customBinding> 
```

在我加密消息之前是否可以以某种方式压缩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:06:46.353

不要这样做。压缩加密流中的数据会导致安全漏洞。如果攻击者可以影响被加密消息的内容，他们可以使用重复数据的压缩来读取加密文件的内容。[您可以在此处](https://security.stackexchange.com/a/19914/9451)查看此类攻击的详细信息，因为它最近出现在 SSL 中。

# c++ - 搅拌机：不可能的立方体

> ID：13052774
> 
> 赞同：6
> 
> 时间：2012-10-24T15:47:26.803
> 
> 标签：c++, graphics, transparency, blender, raytracing

我正在做一个图形项目，试图在 3D 中创建一个不可能的立方体。一个不可能的立方体看起来像这样：

![在此处输入图像描述](../Images/50092e3864c07c8993b7d3e7de965505.png)

这背后的技巧是两个被“切割”的边缘和一张从特定角度拍摄的照片，给人一种不可能的错觉。 ![在此处输入图像描述](../Images/c17416d3fa3567c96a79f47b35432662.png)

好吧，我正在尝试制作这个，但不是静态图像，而是希望能够对其进行动画处理（旋转）以保持不可能的属性。

我已经设法在搅拌机中制作了一个立方体，如下面的屏幕截图所示： ![在此处输入图像描述](../Images/798c8d1f7276daea12763f1b3ca3288e.png)

我想听听您对如何达到预期效果的建议。一个想法是使后面有一个（或更多）边缘的边缘部分透明，这样每次摄像机角度改变时，透明补丁都会移动。

它不必专门在 Blender 中完成，因此欢迎使用 OpenGL 等中的任何解决方案。

为了让您了解最终结果应该是什么，这是一个指向此类插图的链接：

[3D 不可能的立方体幻觉动画](http://www.youtube.com/watch?v=ZUByid1Qfzo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:19:16.163

这是不可能的（呵呵）。试着想象旋转立方体，使不可能在前面的位移动到左边。一旦它“越过”当前最左边的边缘，“它在前面”和“它在后面”这两个属性就不可能同时实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:32:18.110

如果您启用了边缘剔除，但禁用了剪裁（深度测试），并以正确的顺序绘制图元，您应该得到 Escher 立方体而无需任何剪裁。这应该相对容易制作动画。

# ruby - Sinatra-Synchrony 导致 HttpProtocolException: HTTP-headers - are expected Error for some users

> ID：13052777
> 
> 赞同：0
> 
> 时间：2012-10-24T15:47:38.197
> 
> 标签：ruby, sinatra, helicontech

我有一个 web 应用程序，它通过其中一个 API更新[Pardot中的数据。](http://pardot.com)

webapp 是用 Sinatra 编码的。用户添加 api url 和一个 csv 文件，其中包含需要在表单中更新的数据并点击提交。该代码解析 csv 数据并将其发送到提供的 url。后端服务器是带有 IIS 7.5 和 HeliconZoo 的 Windows Server 2008 R2。

由于性能问题，Helicon 技术支持向我推荐了[Sinatra::Synchrony](http://kyledrake.net/sinatra-synchrony/)，我决定实施它。

我在具有不同操作系统和浏览器的多台不同计算机上对其进行了测试，一切正常。当连接超过一台计算机并提交表单时，性能明显更快。

我遇到的问题是某些用户在每次提交表单后都会收到此错误：

```
Error
Helicon Zoo module has caught up an error. Please see the details below.
Worker Status
  %WorkerStatus%
Windows error
  %WindowsError% 
Internal module error
 message: HTTP-headers - are expected
 job: JobHttp[#3] - /
 transportStatus:Online
 getErrorMessage:
 RAW output bytes:0
 RAW output Begin
 Empty stderr
 End

type: ZooException
file: JobHttp.cpp 
line: 266
version: 1.1.57.268 
```

即使他们收到此错误，数据也已成功发送到 Pardot。

下面是 ZooError.log 文件中的一个条目：

```
[10/24/2012 10:44:01]   HttpProtocolException: HTTP-headers - are expected

job: JobHttp[#212]  - / 

transportStatus:Online 

getErrorMessage: 

RAW output bytes:0

RAW output Begin

Empty stderr

End 
```

我什至从哪里开始解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:25:21.513

尼尔。我来自 Helicon Tech，会尽力帮助你。请检查您的 Sinatra 应用程序的日志，根据我们的日志，Sinatra 以空响应响应，这是不好的。

[这可能是 Zoo 中的一些问题，因此如果您可以向我们的帮助台](http://support.helicontech.com/helpdesk/)提供一些测试应用程序和有关如何重现此类行为的说明，我们将尝试检测并修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:09:42.223

我要感谢 Tony 提供帮助，但这个错误与 Helicon Zoo 没有任何关系。Zoo 屏幕上显示的错误没有任何帮助，但这最终成为我自己的代码的问题。

我正在向 Pardot 发送来自 csv 文件的数据。通过从一个 excel 表复制到另一个表来从 excel 创建 .csv 文件的用户。通过这样做，excel 复制了一堆空白行，然后将这些空白行保存到 csv 文件中。

所以...一旦我检查了 csv 文件中的空白行：

```
if !row.empty? 
```

我停止收到错误。

# python - Eclipse Pydev 没有加载外部模块，终端工作正常

> ID：13052778
> 
> 赞同：2
> 
> 时间：2012-10-24T15:47:38.400
> 
> 标签：python, eclipse, pydev

我正在使用 Pydev 运行 Eclipse Juno。我编译了一个使用 ctypes 导入 C 库的 egg 包。它在终端上运行良好，但是当从 Eclipse 内部运行时，我得到

```
/usr/local/lib/python2.7/dist-packages/PhreeqPy-0.1.0-py2.7.egg/phreeqpy/iphreeqc
Traceback (most recent call last):
  File "/src/pywork/fddarcy/src/fddarcy.py", line 75, in <module>
    sys.exit(main())
  File "/src/pywork/fddarcy/src/fddarcy.py", line 35, in main
    freak  =phreeqc_mod.IPhreeqc()    
  File "/usr/local/lib/python2.7/dist-packages/PhreeqPy-0.1.0-py2.7.egg/phreeqpy/iphreeqc/phreeqc_dll.py", line 28, in __init__
    self.phreeqc = ctypes.cdll.LoadLibrary(dll_path)
  File "/usr/lib/python2.7/ctypes/__init__.py", line 443, in LoadLibrary
    return self._dlltype(name)
  File "/usr/lib/python2.7/ctypes/__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: libimf.so: cannot open shared object file: No such file or directory 
```

在 Pydev 中重新加载所有库后，Eclipse 在导入模块时甚至没有给出错误，但它不会加载模块。为了更加清楚，终端上的一切正常。

编辑：我认为问题在于 Eclipse 调用 python 的方式。它与从终端调用 python 的方式有什么不同吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T17:20:08.853

Eclipse 正在查看 ctypes 模块，只是 ctypes 找不到 DLL。

这样做的原因是 eclipse 不一定使用您系统的环境变量。要解决这个问题，您需要在 Eclipse 中设置 LD_LIBRARY_PATH。

第 1 步。找出“libimf.so”在您的系统上的位置。在 Linux 上，您可以使用：

```
 locate libimf.so 
```

在一个终端。那应该给你目录。例如，假设文件位于 "/home/sweetlibraries/libimf.so" 。

步骤 2\. 在 Eclipse* 中设置 LD_LIBRARY_PATH：

*   右键单击您正在运行的出现此错误的 python 文件。
*   点击“属性”
*   单击“运行/调试设置”
*   您应该看到该文件的一些配置。对我来说，它是“project_name python_file_name.py”。选择它。
*   点击“环境”
*   点击“新建”
*   将名称设置为“LD_LIBRARY_PATH”
*   将值设置为您找到 libimf.so 的任何位置，例如“/home/sweetlibraries/”
*   单击“确定”以退出所有这些菜单。

现在，当您运行它时，它应该可以工作了。如果没有，请确保使用正确的“运行配置”。单击大的绿色“运行”箭头旁边的小向下箭头。并选择配置名称（例如“project_name python_file_name.py”）。

*我正在使用 LiClipse，但我认为菜单结构应该相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:25:18.827

如果您还没有，您可能需要将它添加到 Eclipse 中的 PYTHONPATH。

窗口 -> 首选项 -> PyDev -> 解释器 - Python

添加您的 python.exe 或运行 autoconfig，然后添加您需要的库。

# c# - 这个从数据库中检索数据的查询是否正确？

> ID：13052781
> 
> 赞同：0
> 
> 时间：2012-10-24T15:47:41.053
> 
> 标签：c#, sql

我需要从数据库中的字段中检索一个值。我有使用以下代码。但值`checkOrderId`（我需要）显示的是 SQL 字符串，而不是数据库中的值。我不知道为什么会这样。有人可以帮我吗？

```
 string connectionString = "Data Source = xxyyzz;Initial Catalog = xyz; Integrated Security = True";

SqlConnection connection = new SqlConnection(connectionString);

connection.Open();

string tableName = "[GIS].[SecondaryTraffic].[PotentialBackHauls]";

string checkOrderId = "Select TOP 1 OrderID From" + tableName + "ORDER BY InsertDate DESC";

SqlCommand cmd = new SqlCommand(checkOrderId, connection);

//cmd.ExecuteNonQuery();

OpenPop.Pop3.Pop3Client popConn = new OpenPop.Pop3.Pop3Client();
if (orderIdentity == checkOrderId)
{
      popConn.DeleteMessage(messageNumber);
}

connection.Close(); 
```

我是新手，没有立即回答我的问题的声誉。在大家的帮助下，我解决了这个问题...很大的帮助，谢谢大家...以下是我的代码。

string connectionString = "数据源 = EAEDEV；初始目录 = GIS；集成安全 = True"；

```
 using (SqlConnection connection = new SqlConnection(connectionString))
                    {

                        connection.Open();

                        string tableName = "[GIS].[SecondaryTraffic].[PotentialBackHauls]";

                        string checkOrderId = "Select TOP 1 OrderID From " + tableName + " ORDER BY InsertDate DESC";

                        SqlCommand cmd = new SqlCommand(checkOrderId, connection);

                        string valueReturned = (string)cmd.ExecuteScalar();

                        OpenPop.Pop3.Pop3Client popConn = new OpenPop.Pop3.Pop3Client();

                        if (orderIdentity == valueReturned)
                        {
                            popConn.DeleteMessage(messageNumber);
                        }

                        connection.Close();

                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:51:58.977

您对设置结果的期望`checkOrderId`是不正确的。在这种情况下`checkOrderId`，只是要执行的查询，而不是实际结果。

您需要从执行命令中读取值：

```
using (var connection = new SqlConnection(connectionString))
using (var comm = new SqlCommand("Select TOP 1 OrderID From [GIS].[SecondaryTraffic].[PotentialBackHauls] ORDER BY InsertDate DESC", connection))
{
    connection.Open();

    object result = comm.ExecuteScalar(); // This is the key bit you were missing.

    if (result != null)
    {
        // You can cast result to something useful
        int orderId = (int)result;
    }
} // Both comm and connection will have Dispose called on them here, no need to Close manually. 
```

`ExecuteScalar`返回第一个单元格（即第 1 行第 1 行）中的值作为可以转换为更好类型的对象（取决于它在结果集架构中的类型）。

如果您需要读取多个值，则需要查看`ExecuteReader`.

还有其他方法可以使用输出参数来做到这一点，但这会污染答案的重点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:50:48.150

您需要执行查询并检查结果，这里您只是将字符串与查询 SQL 进行比较。

请看这里

[http://www.csharp-station.com/Tutorial/AdoDotNet/lesson03](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson03)

教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:49:32.277

您可以在查询中添加空间

```
"Select TOP 1 OrderID From " + tableName + " ORDER BY InsertDate DESC"; 
```

注意：我建议你使用`AddWithValue method`你的参数

```
string checkOrderId = "Select TOP 1 OrderID From @tableName ORDER BY InsertDate DESC";
SqlCommand cmd = new SqlCommand(checkOrderId, connection);
cmd.Parameters.AddWithValue("@tableName", tableName ); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:52:40.770

你实际上并没有在任何地方运行你的命令。而不是 commented-out `cmd.ExecuteNonQuery`，您应该查看该[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)方法，它允许您从查询中读回单个结果值 - 这就是您的查询返回的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T15:53:38.650

添加

```
int i = (Int32) cmd.ExecuteScalar(); 
```

紧接着

```
SqlCommand cmd = new SqlCommand(checkOrderId, connection); 
```

那么变量`i`将包含订单ID

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T15:56:25.233

不，这是不正确的。您正在将变量 orderId 与您的查询字符串进行比较。我怀疑这就是你想要做的。我想你最好调用 cmd.ExecuteScalar() 来检索实际的 OrderID 值。正如其他答案所指出的，您的查询字符串缺少空格。但最重要的是，在代码中构造 SQL 查询是一种不好的做法。虽然我看不出此代码存在安全问题，但如果您继续使用此方法，您可能会编写容易受到 SQL 注入攻击的代码。我建议您学习使用参数或 LINQ 来构建查询。

# xcode - Xcode 4.5.1 应用程序崩溃

> ID：13052785
> 
> 赞同：1
> 
> 时间：2012-10-24T15:47:56.687
> 
> 标签：xcode, ios5, crash

昨天我将 XCode 从 4.3 更新到 4.5.1 以在 iOS 6 和 iphone 5 上工作。我正在打开我以前的项目，在我的 iPad 2 (5.1.1) 上编译和运行它们，一切正常。

今天，我决定开发一个新项目，只是为了测试我选择的选项卡式应用程序并将部署目标更改为 4.3 的所有内容，但它不起作用，应用程序图标显示在 iPad 上，但我一打开它就崩溃了。

更新：当我从新项目菜单中选择一个单一的视图应用程序（其他不工作）并运行它而不改变它任何工作但只要我添加任何东西（甚至是标签）它就会崩溃。

我以前的xcode问题：

2) xcode 永远无法直接运行应用程序。当我部署它们时，应用程序打开但立即崩溃然后我再次点击图标，它运行良好

3) 针对 4.2.1 iPod 和 iphone 我需要做什么

日志文件

```
http://www.mediafire.com/view/?l6fcgq2lvqiby6o 
```

# java - 在java中剪切字符串的一部分

> ID：13052792
> 
> 赞同：0
> 
> 时间：2012-10-24T15:48:19.037
> 
> 标签：java, string, usb

```
String DeviceName = "Black USB (H:)"; 
```

如何从JAVA中的字符串中分离“黑色USB”并删除（H:)，我需要在其他类的方法中进一步传递。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T15:50:14.403

对于这样一个简单的问题，没有必要使用正则表达式或拆分操作，那将是矫枉过正的。尝试这个：

```
String name = deviceName.substring(0, deviceName.indexOf('(')-1); 
```

这是最简单的方法，它适用于 Windows 中设备名称的一般情况 - 无需事先知道设备的实际名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:49:54.063

很多方法可以实现你想要的（正则表达式、StringTokenizer、String 的 split()）。一种是：

```
String[] splitArray = deviceName.split("Black USB"); 
```

假设，它只是这个字符串（“黑色 USB”可以被硬编码）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:58:03.123

我会使用正则表达式。如果您需要捕获不同的格式，请对其进行一些修改：

```
String s = "Black USB (H:)";
Pattern p = Pattern.compile("(.*) \\((.*)\\)");
Matcher m = p.matches(s);
if (m.matches()) { 
   System.out.println(m.group(1));
   System.out.println(m.group(2));
} else { 
   System.out.prinln("No match");
} 
```

# c++ - 使用 C++“operator new”而不是 CoCreateinstance 创建 COM 对象是否安全？

> ID：13052793
> 
> 赞同：11
> 
> 时间：2012-10-24T15:48:20.343
> 
> 标签：c++, com

这可能是一个菜鸟 COM 问题，但在谷歌上搜索会引发比提供答案更多的问题：

对本地 COM 实例使用“operator new”而不是 CoCreateInstance 是否安全？

我做了什么：

1.  我通过使用公共继承实现了 IOperationsProgressDialog 接口 [http://msdn.microsoft.com/en-us/library/windows/desktop/bb775368(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775368(v=vs.85).aspx) ，从而也实现了 IUnknown 接口。

2.  我通过“new RecyclerProgressCallback”创建了一个实例，并将其放入 COM-Ptr 中进行生命周期管理。“RecyclerProgressCallback”是我的派生类的名称。

3.  我在 IFileOperation::SetProgressDialog [http://msdn.microsoft.com/en-us/library/windows/desktop/bb775803(v=vs.85).aspx中使用这个实例](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775803(v=vs.85).aspx)

摘要：我的方法“似乎”有效，但我不相信它，围绕 COM 对象创建的令人不安的信息太多，不能仅依赖于可观察的行为。

是否存在任何微妙的风险、谬误或其他问题？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:03:36.923

我什至把它们放在堆栈上。Andrey 的回答（现已删除）错误地暗示它不安全，因为您绕过了 COM 引用计数。这是错误的推理。COM 不计算引用；它将责任委托给您。在 COM在其最后一个接口上调用您的方法之后，您必须调用`delete`、 或或任何您的语言使用的方法。重要的词是*after*。不是*when*，因为您没有义务立即这样做。`free()``Release`

 **同样，`CoCreateInstance`这是一个很长的弯路，因为 COM 是语言中立的，并且不知道是否必须使用`malloc`or创建对象`new`。你这样做了，所以绕过整个 COM 逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:02:29.103

这取决于您要实例化的具体内容。当你应该提供一个 COM 指针时，没有人会问你它是用 COM API 实例化的，还是`new`，或者它有时甚至可以是堆栈上的对象（前提是你设法确保在所有引用被释放之前它不会在堆栈上被销毁） .

所以答案是肯定的，你可以使用`new`它就可以了。但是，无论如何它应该是一个有效的 COM 接口，它应该实现引用计数和`QueryInterface`COM 对象的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:04:56.940

`CoCreateInstance`API 将查找`registry`与指定匹配的模块`CLSID`，加载它并通过一种机制（取决于您的代码是`DLL`还是`EXE`）它将调用一些函数来创建您的对象。因此，为了使您的代码`CoCreateInstance`能够正常工作，您应该编写一个实现`IClassFactory`接口的类`COM`并将其注册到注册表中，然后调用它对`CoCreateInstance`您的代码进行一些额外的工作，以至少做您可爱的事情`operator new`，那么当然可以这是安全的。`operator new`通常，在您的代码中调用接口的实现（只为回调声明的接口）总是安全的`source`，这也是首选方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:04:11.973

这将正常工作。这就是 COM 服务器通常在内部创建其对象的方式（至少一个用 C++ 编写的）。从您的角度来看，RecyclerProgressCallback 类只是一些 C++ 代码。您可以将其视为程序中的任何其他类。

话虽如此，COM 是一个充满微妙陷阱的雷区。我不能保证你不会在课堂上遇到问题，但我可以向你保证，这些问题与你对 operator new 的使用无关。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-24T17:48:55.720

它通常不安全，不仅因为引用计数，还因为编组：类可能有一个需要编组的线程模型。如果是这种情况，CoCreateInstance 将创建一个代理和存根，而`new`不会。**

# jquery - 使用 enquire.js 注销脚本时遇到问题

> ID：13052796
> 
> 赞同：2
> 
> 时间：2012-10-24T15:48:32.583
> 
> 标签：jquery, html, css, media-queries, enquire.js

我一直在修改 enquire.js，到目前为止发现它非常方便。

我刚刚碰了壁，可以多用一双眼睛。这是我正在使用的脚本：

`// 来自[http://css-tricks.com/scrollfollow-sidebar/的脚本](http://css-tricks.com/scrollfollow-sidebar/)

```
$sidebar   = $(".modules");
$window    = $(window);
offset     = $sidebar.offset();
topPadding = 15;

    function scrollFollow() {
        if ($window.scrollTop() > offset.top) {
            $sidebar.stop().animate({
            marginTop: $window.scrollTop() - offset.top + topPadding
            }, 100);
        } else {
            $sidebar.stop().animate({
            marginTop: 0
            }, 100);
        }
    }

function inlineDisplay () {
    $('.module.description').css('display','none');
    var skillDesc = $(this).find(".desc").html();
    $(".inline.description").stop().fadeOut(200, function() {
        $(".inline.description").delay(200).empty();
        $(".inline.description").delay(200).prepend(skillDesc).fadeIn(500);
    });

}

function moduleDisplay () {
    $('.inline.description').css('display','none');
    var skillDesc = $(this).find(".desc").html();
    $(".modules .module.description").stop().fadeOut(200, function() {
        $(".modules .module.description").delay(200).empty();
        $(".modules .module.description").delay(200).prepend(skillDesc).fadeIn(500);
    });
}

enquire.register("screen and (max-width:69em)", {

    match : function(tablet) {
        console.log("handler max-width 69em");

        $('.skills').removeClass('module');
        $('.skills').addClass('inline');

        $(document).on('click', '.skills.inline li', inlineDisplay);

    },

    unmatch : function(tablet) {
        console.log("unmatched handler max-width 69em");

        $('.skills').removeClass('inline');

        $(".inline.description").stop().fadeOut(200, function() {
            $(".inline.description").delay(200).empty();
        });

        $(document).off('click', '.skills.inline li', inlineDisplay);
    }

}).register("screen and (min-width:70em)", {

    match : function(bigScreens) {
        console.log("handler min-width 70em");

        $('.skills').removeClass('inline');
        $('.skills').addClass('module');

        $('.modules').addClass('sidebar');

        $(document).on('click', '.skills.module li', moduleDisplay);
        $window.on('scroll', $sidebar, scrollFollow);

    },

    unmatch : function(bigScreens) {
        console.log("unmatched handler min-width 70em");

        $('.skills').removeClass('module');

        $('.modules').removeClass('sidebar');

        $(".modules .module.description").stop().fadeOut(100, function() {
            $(".modules .module.description").delay(100).empty();
        });

        $(document).off('click', '.skills.module li', moduleDisplay);

        $window.off('scroll', $sidebar, scrollFollow);

    }

}).listen();` 
```

目标是在屏幕足够宽时有一个滚动的侧边栏，但在没有空间的时候没有。我遇到的问题是它加载得很好，或者我可以加载宽度较小的页面，但是在我使用平板电脑并且我在纵向和横向之间更改方向的情况下，它可能会工作一次，但最终侧边栏不会跟随滚动。

我猜这是因为我没有正确加载或卸载它，但在媒体查询更改的情况下，我不确定在 JQuery on() / off() 事件处理程序中使用什么事件。

有问题的网站是[http://samuel-allen.com](http://samuel-allen.com)

有什么作为明显的错误或遗漏跳出来的吗？

提前致谢。

# eclipse - 无法在eclipse中导入github项目

> ID：13052798
> 
> 赞同：6
> 
> 时间：2012-10-24T15:48:43.380
> 
> 标签：eclipse, github, egit

刚刚从我的办公室在 github 上创建了项目，然后我回到家并试图在我的家用机器上导入该项目，但我无法做到。

以下是详细内容。

家用和办公机器都安装了 eclipse Juno 和 Egit 插件。我可以从办公室办理登机手续。但在家里我什至无法导入该项目。

我的工作区目录 - c:\gaurang git 本地目录 - d:\Gaurang\Webdriver-Data-Driven-Framework

现在，如果我选择“导入现有项目”，如果我选择“使用新项目向导”，它会显示 No project found - 如果我选择“作为常规项目导入”，它会创建空项目 - 它会创建项目但不是 java 项目，所以不会能够编译或运行。

我的 git 存储库 - [https://github.com/Gaurang033/Webdriver-Data-Driven-Framework.git](https://github.com/Gaurang033/Webdriver-Data-Driven-Framework.git)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T16:57:49.710

查看[https://github.com/angular/angular-seed.git时，我以类似的方式挣扎](https://github.com/angular/angular-seed.git)

问题是我希望一步完成。Github 项目不包含 eclipse 文件，因此您当然不能导入现有项目 - 其他选项应该可以，但是它们不

我的解决方案是：

1.  在本地克隆 github 存储库，例如 /home/name/git/angular-seed（从 Git/URI 导入.../Projects）
2.  以普通项目的形式获取工作副本（从 Git/本地导入.../Projects）

我认为这是一个错误

结果是我在 /home/name/git/angular-seed 中有克隆的存储库和一个带有指向该位置的“.project”文件的骨架项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:46:58.070

如果您希望能够使用向导导入项目，则必须将您的`.project`和文件推送到存储库。如果这些不存在，则 eclipse 无法检测到现有的 java 项目。`.classpath``"Import existing projects"`

# linq-to-xml - XDocument 多个命名空间

> ID：13052800
> 
> 赞同：0
> 
> 时间：2012-10-24T15:48:56.210
> 
> 标签：linq-to-xml

我有一个奇怪的问题，我尝试了有关 XDocument 的所有方法。

我想获取“CategoryClass”节点的值并在我自己的“ListBoxClass”类型对象中填充子节点。但是 LINQ 查询没有返回任何内容。

```
System.Xml.Linq.XNamespace lName = xDoc.Root.GetDefaultNamespace();
        System.Xml.Linq.XNamespace lANamespace = "http://schemas.datacontract.org/2004/07/KRefreshService";

        var lEle = from xml2 in xDoc.Element(lName + "GetCategoriesResponse").Element(lName + "GetCategoriesResult").Elements(lANamespace + "CategoryClass")
                                                    select new ListBoxClass 
                                                    {
                                                        Id =  (int)xml2.Element(lName + "ID"),
                                                        Name = xml2.Element(lName+ "CatName").ToString(),
                                                        Description = xml2.Element(lName + "CatDescription").ToString()
                                                    }; 
```

这是XML

```
<GetCategoriesResponse xmlns="http://tempuri.org/">
 <GetCategoriesResult xmlns:a="http://schemas.datacontract.org/2004/07/KRefreshService" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<a:CategoryClass>
  <a:CatDescription>General questions regarding IQ. These questions will help you prepare for the interviews.</a:CatDescription>
  <a:CatName>IQ</a:CatName>
  <a:ID>1</a:ID>
</a:CategoryClass>
<a:CategoryClass>
  <a:CatDescription>This category will help you improve your general knowledge. It have information from all the different subjects.</a:CatDescription>
  <a:CatName>General Knowledge</a:CatName>
  <a:ID>2</a:ID>
</a:CategoryClass>
<a:CategoryClass>
  <a:CatDescription>If you feel that you computer science basics are slipping by your head as you involve more in technology. No problem! subscribe to this category.</a:CatDescription>
  <a:CatName>Computer Science</a:CatName>
  <a:ID>3</a:ID>
</a:CategoryClass> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:52:16.703

问题是查询的这一部分：

```
select new ListBoxClass 
{
    Id =  (int)xml2.Element(lName + "ID"),
    Name = xml2.Element(lName+ "CatName").ToString(),
    Description = xml2.Element(lName + "CatDescription").ToString()
}; 
```

您在这里使用了错误的命名空间 - 这些元素具有`a`前缀：

```
<a:CatDescription>...</a:CatDescription>
<a:CatName>IQ</a:CatName>
 <a:ID>1</a:ID> 
```

...所以他们正在使用 namespace `http://schemas.datacontract.org/2004/07/KRefreshService"`。您正在使用在文档的根元素中声明的命名空间。

此外，我希望您想要each的*值*`XElement`，我倾向于通过显式转换来获取`string`. 调用`ToString()`将为您提供元素的缩进 XML。所以你要：

```
select new ListBoxClass 
{
    Id =  (int) xml2.Element(lANamespace + "ID"),
    Name = (string) xml2.Element(lANamespace + "CatName"),
    Description = (string) xml2.Element(lANamespace + "CatDescription")
}; 
```

（目前尚不清楚为什么你要完全限定`System.Xml.Linq.XNamespace`，或者为什么你`l`的变量有前缀......当你让它工作时，你可以做很多事情来使这段代码更清晰。）

编辑：你说的代码对我来说不起作用：

```
using System;
using System.Linq;
using System.Xml.Linq;

public class Test
{
    static void Main(string[] args)
    {
        XDocument doc = XDocument.Load("test.xml");
        XNamespace envelopeNs = doc.Root.GetDefaultNamespace();
        XNamespace resultNs = "http://schemas.datacontract.org/2004/07/KRefreshService";

        Console.WriteLine(doc.Element(envelopeNs + "GetCategoriesResponse")
                             .Element(envelopeNs + "GetCategoriesResult")
                             .Elements(resultNs + "CategoryClass")
                              .Count());
    }
} 
```

打印 3。因此，如果您遇到问题，一定有一些您没有告诉我们的事情。

# node.js - NodeJs 的 Pubsubhubbub 库

> ID：13052810
> 
> 赞同：1
> 
> 时间：2012-10-24T15:49:21.717
> 
> 标签：node.js, websub, superfeedr

我有一个添加各种 rss 提要的系统。我想关注内容并在提要中添加新内容时收到通知，而不必一一检查。

我发现有一个 pubsubhubbub 协议，发布者可以使用各种集线器在他们的提要中实现这个协议。这就是我发现 superfeedr 的方式，我正在尝试使用他们的 XMPP API。我安装了他们的[nodejs 库](http://blog.superfeedr.com/node-superfeedr/)并进行了一些运行良好的订阅测试。

*   是否可以使用节点 superfeedr 模块订阅不使用 superfeedr 的提要？例如，我发现一个具有：

    ```
    link rel='hub' href='http://pubsubhubbub.appspot.com/' 
    ```

*   我是否必须单独处理每个集线器，或者我可以根据协议向它们发送相同的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:50:21.923

Alex，我创建了 Superfeedr。

是的，当然可以订阅不使用 Superfeedr 的提要。Superfeedr 充当默认集线器。您可以添加任何提要，并且应该会收到通知。唯一的区别是您可能会看到延迟。我们每 15 分钟轮询一次提要，因此，除非有强大的缓存，否则您应该在消息发布后的 15 分钟内看到消息。

鉴于 1，2 和 3 可能不相关。但是，我相信还有其他几个 PubSubHubbub 库，但它们都要求您的端点位于防火墙之外......并且所有这些都只适用于使用 pubsubhubbub 协议的提要. 即使您的应用程序将单独使用每个集线器，代码也应该相同，因此对您来说是透明的。

我希望这有帮助。

# infragistics - 如何在 TemplatedColumn WebDataGrid InitializeRow 事件中搜索控件？

> ID：13052833
> 
> 赞同：0
> 
> 时间：2012-10-24T15:50:27.620
> 
> 标签：infragistics, webdatagrid

我想搜索 TemplatedColumn 中的下拉列表对象。我假设我可以像在 GridView 或 ListView 模板化控件中那样找到它。

e.Row.Cells 不可用 WebDataGrid 控件的 InitializeRow 事件。我正在使用 Infragistics 的最新下载。我没有使用 UltraWebGrid .. UI 认为它在旧版本的控制套装中可用 .. 如果我错了请纠正我

如果您能提供帮助，我将不胜感激......！

谢谢你 ！！- 尼莱什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:55:59.730

当您有对 GridRecordItem 的引用时，在其上调用 FindControl 以在模板中查找子项。GridRecordItem 由 GridRecord 的 Items 集合公开，这是 e.Row 在 InitializeRow 事件中公开的内容。

如果您在代码中定义模板，那么您可以在 InstantiateIn 方法中执行您需要的操作。NetAdvantage 帮助中有在代码中创建模板的示例： [http ://help.infragistics.com/NetAdvantage/ASPNET/Current/CLR4.0/?page=WebDataGrid_Refrence_a_Cell_When_Creating_an_Item_Template.html](http://help.infragistics.com/NetAdvantage/ASPNET/Current/CLR4.0/?page=WebDataGrid_Refrence_a_Cell_When_Creating_an_Item_Template.html)

# asp.net-mvc - 使用数据注释设置 html 属性

> ID：13052836
> 
> 赞同：1
> 
> 时间：2012-10-24T15:50:34.177
> 
> 标签：asp.net-mvc

当我的模型属性使用任何 Html 帮助器呈现时，如何设置属性？示例：我有我的自定义数据注释：

```
[MyCustomAttribute(AnyHtmlProperty = "100")]
public string Name{get;set;} 
```

所以，当这个属性被渲染时，我想要这样的东西：

```
<input type="text" anyHtmlProperty="100" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:57:01.320

您可以编写一个接受表达式的 HtmlHelper 扩展方法。这是 razor 语法的一个无效示例。

```
@Html.CustomInputFor(x => x.Name) 
```

# mysql - 基于连接添加列

> ID：13052838
> 
> 赞同：1
> 
> 时间：2012-10-24T15:50:39.450
> 
> 标签：mysql, sql, join

我有必须有一个连接列的巨大表（ *300 万条记录）。*这个值不会改变。

如何**添加**基于联接的列？还会有一些其他的查询。如果我使用加入，这将是一个较慢的过程。

前任：

主表：

```
add_cod | name
 1      | alfa
 2      | beta
 1      | zeta 
```

插件表：

```
cod | col_ext
 1  | jam
 2  | bam 
```

结果应该是主表，但带有 col_ext 列：

```
add_cod | name | col_ext
 1      | alfa |   jam
 2      | beta |   bam
 1      | zeta |   jam 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:52:29.090

这是一个简单的`JOIN`.

```
SELECT  a.*, b.col_ext
FROM    main a
        INNER JOIN addon b
            ON a.add_cod = b.cod 
```

如果您在表上正确实现了索引，则不必担心性能。

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/eb66f/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:53:04.960

您将使用`JOIN`：

```
select m.add_cod,
  m.name,
  a.col_ext
from main m
left join addon a
  on m.add_cod = a.cod 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/34aa6/1)

如果您在理解连接方面需要帮助，这里是连接的一个很好的[可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# xslt - 使用 XSLT 转换大型 XML 文件

> ID：13052840
> 
> 赞同：4
> 
> 时间：2012-10-24T15:50:47.500
> 
> 标签：xslt, client-side, large-data

我有一个以 HTML 格式输出报告的程序。平均而言，它们大约为 5-10 MB，但我看到了 500 MB 的极端情况。这些报告纯粹是客户端，这里不涉及服务器。

问题是浏览器会挂起，直到所有内容都加载完毕，有时甚至不会加载内容。我正在尝试找到一个解决方案，让打开报告的人始终可以打开它。打开报告的人应该能够使用浏览器和其中可用的任何技术打开它们。

我想出了一个解决方案，通过让我们的程序输出 xml 来打开以前 100MB 的报告，然后通过 xslt 将其转换为 html，但用户仍然需要等待整个内容加载到内存中。这些差异节点内的所有内容都加载到表的 2 行中，它们的顺序无关紧要。

XML:

```
 <diff>
        <parent loc="some string"/>
        <right> content</right>
        <left> content </left>
    </diff> 
```

执行此转换的 XSLT 如下：

```
<xsl:for-each select="./diff">
    <table align="center" border="1px" width="602">
    <tbody>
    <tr>
    <td colspan="2"><xsl:value-of select="./parent/@loc"/></td>
    </tr>
    <tr>
    <td width="50%" align="left">
    <xsl:if test="./left/text()">
        <xsl:value-of select="./left/text()"/>
    </xsl:if>
    <xsl:if test="not(./left/text())">
         <xsl:variable name="left">
             <xsl:apply-templates select="./left/*" mode="serialize"/>
         </xsl:variable>
         <xsl:value-of select="$left"/>
    </xsl:if>
    </td>
    <td width="50%" align="right">
    <xsl:if test="./right/text()">
        <xsl:value-of select="./right/text()"/>
    </xsl:if>
    <xsl:if test="not(./right/text())">
        <xsl:variable name="right">
            <xsl:apply-templates select="./right/*" mode="serialize"/>
        </xsl:variable>
    <xsl:value-of select="$right"/>
    </xsl:if>
    </td>
    </tr>
    </tbody>
    </table>
</xsl:for-each> 
```

我想知道是否有一种方法可以更快地加载文件，或者在显示页面之前不等待整个表加载到内存中。

我不想加载 javascript 库来执行此操作，因为我们不想在查看这些报告时担心连接性，也不想在每个人的机器上安装一堆文件，但我可以在 xslt 中使用一些脚本.

我知道这是一个奇怪的场景，并不是构建应用程序的理想方式，但我们没有时间改变生成这些报告的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:56:59.320

我最初的想法是输出一个html文件的目录。所以如果我们从

```
/supersize500MB.html 
```

到：

```
/container
    /first10percent.html
    /second10percent.html
    /third10percent.html
    ... 
```

然后在您生成的 HTML 中，您可以对以下内容进行硬编码：

```
<a href="first10percent.html">Last Page</a>
<a href="second10percent.html">Next Page</a> 
```

XSLT 2.0 具有从单个输入输出多个文档的能力。一个快速的谷歌给出了[这个](http://www.ibm.com/developerworks/xml/library/x-tipmultxsl/index.html)。XSLT 处理器必须将整个输入 XML 加载到内存中，但我假设输出 HTML 将按顺序生成。整体效果应该是浏览器不用加载一个500meg的源文件，而是整个50meg的片段。

# python - matplotlib：如何降低子图中刻度标签的密度？

> ID：13052844
> 
> 赞同：28
> 
> 时间：2012-10-24T15:50:51.210
> 
> 标签：python, plot, matplotlib, pandas

我正在寻找降低不同子图上刻度标签的密度

```
import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec
from StringIO import StringIO
data = """\
    a   b   c   d
z   54.65   6.27    19.53   4.54
w   -1.27   4.41    11.74   3.06
d   5.51    3.39    22.98   2.29
t   76284.53    -0.20   28394.93    0.28
"""
df = pd.read_csv(StringIO(data), sep='\s+')
gs = gridspec.GridSpec(3, 1,height_ratios=[1,1,4] )
ax0 = plt.subplot(gs[0])
ax1 = plt.subplot(gs[1])
ax2 = plt.subplot(gs[2])
df.plot(kind='bar', ax=ax0,color=('Blue','DeepSkyBlue','Red','DarkOrange'))
df.plot(kind='bar', ax=ax1,color=('Blue','DeepSkyBlue','Red','DarkOrange'))
df.plot(kind='bar', ax=ax2,color=('Blue','DeepSkyBlue','Red','DarkOrange'),rot=45)
ax0.set_ylim(69998, 78000)
ax1.set_ylim(19998, 29998)
ax2.set_ylim(-2, 28)
ax0.legend().set_visible(False)
ax1.legend().set_visible(False)
ax2.legend().set_visible(False)
ax0.spines['bottom'].set_visible(False)
ax1.spines['bottom'].set_visible(False)
ax1.spines['top'].set_visible(False)
ax2.spines['top'].set_visible(False)
ax0.xaxis.set_ticks_position('none')
ax1.xaxis.set_ticks_position('none')
ax0.xaxis.set_label_position('top')
ax1.xaxis.set_label_position('top')
ax0.tick_params(labeltop='off')
ax1.tick_params(labeltop='off', pad=15)
ax2.tick_params(pad=15)
ax2.xaxis.tick_bottom()
d = .015
kwargs = dict(transform=ax0.transAxes, color='k', clip_on=False)
ax0.plot((-d,+d),(-d,+d), **kwargs)
ax0.plot((1-d,1+d),(-d,+d), **kwargs)
kwargs.update(transform=ax1.transAxes)
ax1.plot((-d,+d),(1-d,1+d), **kwargs)
ax1.plot((1-d,1+d),(1-d,1+d), **kwargs)
ax1.plot((-d,+d),(-d,+d), **kwargs)
ax1.plot((1-d,1+d),(-d,+d), **kwargs)
kwargs.update(transform=ax2.transAxes)
ax1.plot((-d,+d),(1-d/4,1+d/4), **kwargs)
ax1.plot((1-d,1+d),(1-d/4,1+d/4), **kwargs)
plt.show() 
```

这导致 ![在此处输入图像描述](../Images/da5fef9fd70b4846810cfd724e5d22ce.png)

我想减少两个上部子图中的刻度标签。怎么做 ？谢谢。

奖励：1）如何在条形图的基础上去掉 y=0 上的虚线？2）如何摆脱子图0和1之间的x-trick标签？3）如何将情节的背面设置为透明度？（见右下方的断线 y 轴线消失在图的后面）

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-05-08T06:39:07.190

一种通用的方法是告诉 matplotlib 所需的刻度数：

```
plt.locator_params(nbins=10) 
```

由@Daniel Power 的评论编辑：要更改轴上的单个轴（例如`'x'`），请使用：

```
ax.locator_params(nbins=10, axis='x') 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-24T16:55:56.903

[对Aman](https://stackoverflow.com/users/484596/aman)的方法建议的改进如下：

```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)

# ... plot some things ...

# Find at most 101 ticks on the y-axis at 'nice' locations
max_yticks = 100
yloc = plt.MaxNLocator(max_yticks)
ax.yaxis.set_major_locator(yloc)

plt.show() 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-24T16:22:22.293

您可以将刻度设置到您想要的位置，就像设置 xticks 一样。

```
import numpy as np
ax0.yaxis.set_ticks(np.arange(70000,80000,2500)) 
```

这将为您的 ax0 子图创建四个均匀分布的刻度。您可以为其他子图做类似的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-30T15:10:23.157

**如果您使用的不是数字**的 x 轴值数组（例如日期），我建议使用以下方法：

```
import numpy as np
import matplotlib.pyplot as plt

distance_between_ticks = 10
reduced_xticks = x_arr[np.arange(0, len(x_arr), distance_between_ticks)]

fig, ax = plt.subplots()

# plot stuff

ax.set_xticks(reduced_xticks) 
```

该`numpy.arange`函数将生成一个等距索引数组，然后将其应用于 x 轴数组。

**警告**：`x_arr`数组必须支持这种索引方法（即我建议确保它是一个 numpy 数组）。

# javascript - 无法（以编程方式）将歌曲添加到播放列表

> ID：13052846
> 
> 赞同：1
> 
> 时间：2012-10-24T15:50:56.787
> 
> 标签：javascript, jquery, jplayer

我是 JavaScript 新手，所以对于有任何经验的人来说，我的问题可能很容易解决。我正在和几个朋友一起制作一个音乐博客，并且我正在尝试使用 jPlayer 制作我自己的自定义音乐播放器。

我想要一个简单的 JavaScript 函数，您可以提供歌曲的标题和 mp3，并将其自身添加到 jPlayer 播放列表中。这是我拥有的 JavaScript 函数...

```
function add_song(title, mp3)
{
    myPlaylist.add({
        title:"Tempered Song",
        mp3:"http://www.jplayer.org/audio/mp3/Miaow-01-Tempered-song.mp3"
    });
} 
```

我希望能够使用此代码在我身体的任何地方调用该函数...

```
<script>
    add_song("Your Face", "http://www.jplayer.org/audio/mp3/TSP-05-Your_face.mp3");
</script> 
```

但是，这实际上并没有添加歌曲。我猜这与必须在 $(document).ready() 函数中设置 jPlayerPlaylist 有关。我猜想当我尝试调用 add_song() 时，我的变量“myPlaylist”没有正确初始化。就像我说的，我是 JavaScript 新手，所以尽量让它对我来说很简单。

您可以查看[我网站](http://www.startingtofeelit.com/player3/player.php)上的代码，以更好地指导我解决问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:08:33.140

问题确实是你在打电话`jPlayerPlaylist` *后*`add_song`设置你的。`<script>`浏览器在遇到标记时立即阻止并运行标记中的 Javascript 代码，这在之前`document.onload`和 jQuery 等效项被触发。

你到底想完成什么？您真的想在页面加载时加载一些硬编码的播放列表元素，还是真的想将这些附加到按钮或链接？对于前者，将函数调用移至 onload 函数，对于后者，创建新的事件处理函数并将它们附加到适当的元素。

如果您真的只是要在地址栏中手动提供该功能或其他内容，它应该可以正常工作。在页面加载之前它根本不起作用。

# php - 每分钟在窗口 7 上运行 PHP 页面

> ID：13052847
> 
> 赞同：-1
> 
> 时间：2012-10-24T15:50:56.667
> 
> 标签：php, windows-7

我如何在 Windows 7 上每 x 分钟运行一个 php 页面？我尝试使用内置调度程序，但它不起作用！是否有类似 CronJob（cpanel 的）或类似不需要编写脚本的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:57:17.727

`cron`工作是 UNIX 的东西。

要使内部调度程序正常工作，您需要确保它不是按原样执行，而是通过打开 Web 浏览器 ( `Firefox.exe http://127.0.0.1/foobar.php`) 或使用命令行界面`php5-cli`来运行它。

但如果没有，还有一个替代解决方案。您需要下载[Windows Server 2003 资源工具包](http://www.microsoft.com/en-us/download/details.aspx?id=17657)。该包包含一个名为的`sleep.exe`文件，该文件在所述秒数内停止执行批处理文件。

由此，您将需要创建一个批处理 ( `.bat`) 脚本。

```
@echo off
:exec
php5-cli.exe C:\path\to\your\php\script.php
sleep.exe 3600
goto exec 
```

这将无限运行，始终调用自身，并随之调用脚本。（`goto exec`将执行程序跳回`:exec`线路，并`sleep 3600`使其停止一分钟）。当然，`sleep.exe`需要在您的`PATH`（最简单的解决方案是将其放入与批处理脚本相同的文件夹中）。

当然，`php5-cli`可能会因您的系统而异，甚至可以简单地称为`php.exe`，请务必先检查。

编辑：评论者也是对的，你不能**运行**PHP**页面**。您可以运行一个 PHP**脚本**（按照我上面描述的方式完成），或者**打开**一个 PHP 页面（这是浏览器方法）。

# jquery - Jquery在另一个字段中移动和显示内容

> ID：13052850
> 
> 赞同：0
> 
> 时间：2012-10-24T15:51:05.147
> 
> 标签：jquery, tabs, append

这就是我想要做的。我希望我的脚本获取内容（它确实如此）将它放在另一个 div 下方（也这样做）。这些段落都是隐藏的，直到您单击列表项之一，然后该列表项将在名为 info 的 div 中显示其段落。这是我的脚本。

```
$(document).ready(function() {
    var desc = $('.m-desc');
    var info = $(".desc li");
    var type = $('.type p');
    var part = $('.parts p');
    var paper = $('.paper p');
    var size = $('.size p');
    var imp = $('.imp-area p');
    $(".formFilling-preview").append(desc);
    $(type).hide();
    $('.parts').click(function() {
        $(".info").append(type);
        $(this).children().hide('slow');
    });
    $('.imp-area').click(function() {
        $(".info").append(imp);
    });
    $('.paper').click(function() {
        $(".info").append(paper);
    });
    $('.size').click(function() {
        $(".info").append(size);
    });
    $('.type').click(function() {
        $(".info").append(type);
        $(type).show();
    });
}); 
```

```
<div class="m-desc">
    <ul class="desc">
        <li class="type selected">Type:</li>
        <li class="parts">Parts: <p></p></li>
        <li class="paper">Paper Type: <p></p></li>
        <li class="size">Size: <p></p></li>
        <li class="imp-area">Imprint Area: <p></p></li> 
    </ul>
    <div class="info">
        <p style="display: none;">Lorem lipsum epsum</p></div>
    </div> 
```

这是我设置的 jsfiddle [http://jsfiddle.net/cornelas/4mzgV/](http://jsfiddle.net/cornelas/4mzgV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:24:11.503

Give this a try:

```
$(document).ready(function() {
    var desc = $('.m-desc');
    var descLi = $('.m-desc .desc li');
    var info = $('.info');

    $(".formFillingPreview").append(desc);
    descLi.click(function() {
        info.html($('p', $(this)).html());
        $('p', info).show();
    });
}); 
```

Check it out the whole example:

[http://jsfiddle.net/4mzgV/28/](http://jsfiddle.net/4mzgV/28/)

# javascript - JavaScript 取消函数

> ID：13052854
> 
> 赞同：0
> 
> 时间：2012-10-24T15:51:46.440
> 
> 标签：javascript, css, event-handling

我有一些代码，我有一个计时器。背景每 3 秒改变一次颜色，当您将鼠标悬停在停止按钮上时，颜色更改器会暂停，我有一个 onclick 事件，我正在与 mouseout 事件结合使用，但 mouseout 事件取消了我的 onclick 事件。在我将鼠标从停止按钮移动后，我该怎么做才能使 onclic 事件仍然有效？

代码：[jsfiddle](http://jsfiddle.net/8Usbx/)

```
<script>
var colors = new Array();
colors[0] = "green";
colors[1] = "blue";
colors[2] = "gray";
var i = 0;
var timer;

function changeOfPlans() {
    timer = setInterval("colorChange()", 3000);
}

function colorChange() {
    document.getElementById("one").style.backgroundColor = colors[i];
    document.getElementById("two").style.backgroundColor = colors[i];
    i++;
    if (i == 3 || i > 3) {
        //start over by setting i to 0
        i = 0;
    }
}

function stop() {
    clearTimeout(timer);
}​
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:59:52.920

您需要更新点击操作，以便它设置一个变量。然后让鼠标先检查是否设置了该变量，然后再重新开始颜色更改。[演示](http://jsfiddle.net/8Usbx/2/)。

我像这样修改了你的 JavaScript：

```
var stopped = false;

function changeOfPlans() {
    if (!stopped) {
        timer = setInterval("colorChange()",3000);
    }
}

function fullstop() {
  stopped = true;
  stop();
} 
```

然后我将您的 onclick 更新为 call`fullstop()`而不是`stop()`. 由于我将其他`stop()`功能保持不变，因此悬停停止移动重新启动功能仍然可以像最初那样工作。所有其他 JavaScript 保持不变。

```
<button type="button" onmouseover="stop()" onmouseout="changeOfPlans()" onclick="fullstop()">Stop</button> 
```

还有其他方法可以做到这一点——enhzflep 在评论中提出了一个好的方法——但这是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:00:19.880

你正在使用`setInterval`，所以取消你`clearInterval`不需要`clearTimeout`。我猜也不要在 mouseout 上再次运行它：

```
onmouseout="changeOfPlans()" 
```

# python - 使用大于或小于运算符比较两个列表

> ID：13052857
> 
> 赞同：46
> 
> 时间：2012-10-24T15:51:55.657
> 
> 标签：python, list

我注意到最近有一段代码直接比较了两个整数列表，如下所示：

```
a = [10,3,5, ...]
b = [5,4,3, ...,]
if a > b:
     ... 
```

这似乎有点奇怪，但我想`True`如果所有`list_a`' 元素都大于`list_b`' 和 False 如果每个元素相等或`list_b`' 元素都大于`list_a`'，它会返回。所以我测试了它：

```
>>> a=[3,3,3,3]
>>> b=[4,4,4,4]
>>> a>b
False
>>> b>a
True 
```

好的，这行得通。就像这样：

```
>>> b = [1,1,1,1]
>>> a = [1,1,1,1]
>>> a>b
False
>>> b>a
False 
```

但是当它变得更加模糊时：

```
>>> a=[1,1,3,1]
>>> b=[1,3,1,1]
>>> a>b
False
>>> b>a
True 
```

或者：

```
>>> a=[1,3,1,1]
>>> b=[1,1,3,3]
>>> a>b
True
>>> b>a
False 
```

结果有点奇怪。python实际上在做什么？似乎它返回的结果有利于第一个列表，其中最左边的元素大于对应的？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-24T15:54:27.593

来自Python 教程中的[比较序列和其他类型：](http://docs.python.org/tutorial/datastructures.html#comparing-sequences-and-other-types)

> 比较使用字典顺序：首先比较前两项，如果它们不同，则确定比较的结果；如果它们相等，则比较接下来的两项，依此类推，直到任一序列用完。

另请参阅有关[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)的 Wikipedia 文章。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-11-17T03:19:57.177

由于我一开始并没有发现使用“字典顺序”进行列表/元组比较的解释特别有启发性，因此这里尝试“用我自己的话”来解释它。首先，这里有一些示例列表，在下面的解释中提到：

```
a = [1, 2, 3]
b = [1, 2, 10]
c = [1, 2, 3, 100]
d = [1, 2, 3]
e = [1, 2, 3, 4, 'a']
f = ['a', 'b', 'c'] 
```

依次比较每个索引处的一对项目。所以，比较`a`会`b`导致`1`被比较`1`，`2`被比较`2`，和`3`被比较`10`。

*当发现不*相等的项目对*或*- 如果列表长度不同 - 到达较短列表的末尾时，对的比较将停止。

 *例如，当比较`a`和时，比较将在比较和`b`时停止。比较和时，比较将在比较和时停止。`3``10``b``c``10``3`

一旦找到不相等的对，整体结果就是比较不相等的项目的结果。无论列表的长度是否相同，这都适用——例如，列表`b`大于列表`c`，因为`100`in`c`永远不会发挥作用。

例如，与 比较`a`时`b`，整体结果将是与 比较的`3`结果`10`。`a < b -> True`因为`3`小于`10`。`a > b -> False`因为`3`不大于`10`。`a == b -> False`因为`3`不等于`10`。

如果其中一个列表较短且其 N 项等于较长列表的前 N ​​项，如`a`and `c`，则较短的列表将被视为小于较长的列表（因此`a`小于`c`）。

只有当两个列表的长度相同并且所有成对的项目比较相等时，它们才会比较相等*。*

关于类型的注意事项：如果一对中的项目不可比较，则比较将`TypeError`像往常一样失败。例如，与 比较时，比较 list to`a`将`f`失败。但还要注意，列表和可以进行比较，因为in永远不会与 in 中的任何内容进行比较。`1``'a'``d``e``'a'``e``d`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-25T00:47:59.430

The given answers don't account for duplicates in the larger list, you can iterate over the bigger list and slice it each time to compare it with the sub list, this will maintain the order as well as account for duplicates.

This code would work:

```
def check_sublist(List,Sublist)
    for i in range(len(List)):
        if List[i:] ==Sublist:
            return True
    return False 
```

Yes this is not time efficient but this is the only solution I could think since using set() would not maintain the order*

# html - 为什么不进行 box-sizing:border-box; 在 960.gs 中应用于容器时是否有效？

> ID：13052860
> 
> 赞同：2
> 
> 时间：2012-10-24T15:52:07.340
> 
> 标签：html, css, web, grid

我正在对页面上的所有内容使用 box-sizing:border-box 。但是，当我向 960.gs 网格中的容器元素添加填充时，它会将第二个网格撞到下一行。它确实可以，但是如果我将它添加到单个网格类中，它会按预期工作。

```
<header role="banner" id="header">
     <div class="container container_12">
          <div class="grid_4">
               logo here
          </div>
          <div class="grid_8">
               tagline here
          </div>
     </div> </header> 
```

向 .conatiner 添加 10px 的填充将 grid_8 包装到下一行。将 10px 添加到 grid_4 和 grid_8 不会（框大小有效）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:43:34.243

我相信它工作正常。

`box-sizing: border-box`覆盖向（非绝对大小的）元素添加填充和边框的默认行为会增加该元素的总大小。使用`border-box`时，所有元素的行为就好像它们已经相对于填充确定了绝对大小：添加填充会增加元素边框与其内容之间的内部空间，但不会增加元素的总大小。

所以发生的事情是，通过添加`padding: 10px`，`.container`您减少了可用于`.container`的内容的水平内部空间量。并且由于`.container`' 的宽度不会增长（如`box-sizing`规则所指定），并且子元素不会缩小，因此第二个子元素必须换行，因为两个子元素的组合宽度现在大于 的可用内部空间`.container`。

向`.grid_`元素“works”添加填充（您对“works”的定义假定为`.container`'s 的子元素适合一行并且不换行），因为根据`box-sizing`规则，这些元素除了设置的宽度之外不应增加宽度（由 960 gs 设置）当他们被给予填充时。添加填充的结果是增加`.grid_`元素边框与其内容之间的空间（“此处的徽标”/“此处的标语”），并减小`.grid_`元素的“内部宽度”。

基本上，`box-sizing: border-box`意味着填充（和边框！）是在内部而不是外部添加的，并且您的示例始终如一地展示了这种行为。

[这是有关`box-sizing`值的更多信息，以及一些演示](http://www.quirksmode.org/css/box.html)。

# asp.net-mvc-4 - MVC4 电子邮件验证网络安全令牌作为查询字符串参数，它安全吗？

> ID：13052863
> 
> 赞同：0
> 
> 时间：2012-10-24T15:52:18.437
> 
> 标签：asp.net-mvc-4, security, user-registration, email-verification

出于安全原因，我讨厌使用查询字符串参数的网站。

在我的注册过程中，我通过电子邮件向注册用户发送了一个网络安全令牌。用户检查他们的电子邮件并单击通过电子邮件发送给他们的链接以确认他们是谁。

我的问题是，我不希望我的网站上有一个页面接受可以自动登录的查询字符串参数，从而为黑客提供进入其他人帐户的后门。

我已经在令牌上设置了到期日期，但我想进一步保护它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:54:58.430

如果令牌是一次性的，这不是问题。在目标用户已经使用令牌之后尝试使用令牌的任何人都会看到错误。（或者您可以直接重定向到登录页面。）

# php - 暂时使整个网站在用户访问时不可用

> ID：13052866
> 
> 赞同：1
> 
> 时间：2012-10-24T15:52:21.333
> 
> 标签：php, javascript, html

我有一件奇怪的事情正在努力实现。

我想要的是当用户访问某个 HTML 页面时，在固定时间（如 20 分钟）内，所有用户都暂时无法使用一整套页面。之后，页面应该可以再次访问。也可能是临时重定向或审查页面。

为什么？我想对用户在基于 GPS 的游戏中进入禁区进行处罚，该游戏根据用户的 GPS 数据显示某些网页。最后一部分工作正常。

搜索后我认为它可能适用于 PHP，但我对此的经验很少。我知道 HTML 和 CSS，以及如何阅读和修改现有的 JavaScript 和 PHP 脚本，而不知道如何从头开始构建这些代码。

另一种选择（我无法真正弄清楚）是让网站在有人进入页面时发送电子邮件，并让另一个服务，如[“如果这样然后那样”](https://ifttt.com)使网站脱机/更改文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:57:51.973

在你的 PHP 页面上，我会做这样的事情：

```
<?php
   if(!can_view_page()){
       header('Location: other_page.php');
   }
?> 
```

在`can_view_page()`功能中，您需要检查是否满足条件（例如在正确的位置查看页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:16:02.513

像其他回答者建议的那样，创建一个函数，您可以使用它来检查用户是否可以访问该页面的条件。这是一些混合使用 php、python 和 javascript 语法的伪代码哈哈 :)

```
function isAllowedViewing(is_good) {
    if (is_good):
        if "/var/www/mysite/disable_visits" file exists:
            contents = (read contents)
            # If 20 minutes has elapsed since first being disabled
            if (now.toEpoch() - contents.toEpoch()) > 1200:
                remove file from file system
            else:
                header("Location: thats_bad.php")
    else:
        if "/var/www/mysite/disable_visits" file does not exist:
            create the file on the file system and write now.toEpoch() to it
        # Optional:
        else:
            re-write the current time to the file to reset the 20 minute counter (for every time the user re-visits the bad page)
} 
```

因此，要使用它，您将在每一页的顶部调用该函数。如果该页面是您允许正常访问的正常页面，则传递`true`给该函数。如果你想惩罚访问页面的用户，通过`false`.

# teamcity - TeamCity 将工件从一个代理复制到另一个代理

> ID：13052867
> 
> 赞同：3
> 
> 时间：2012-10-24T15:52:21.957
> 
> 标签：teamcity

我对 TeamCity 非常陌生，需要将文件从一个 TeamCity 代理复制到另一个。我基本上是在寻找一些概念上的方向，所以我可以开始研究如何完成以下工作：

1.  目前有一个构建程序并创建相应工件的 TeamCity 代理。我需要将这些工件复制到另一台 TeamCity Agent 机器上。

2.  我正在熟悉构建步骤，我们正在使用命令行构建运行器。所以我需要设置通过命令行复制文件的构建步骤——任何关于如何开始的提示都非常感谢。

对于任何概念或术语错误，我深表歉意。我想这就是我发布这个问题的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:47:42.693

公里，

如果您想在另一个构建中重用一个构建的结果（例如，使用编译结果运行测试），您应该看看两件事：

*   将您的构建工件发布到服务器（[此处](http://confluence.jetbrains.net/display/TCD7/Build+Artifact)有更多详细信息）
*   在构建开始之前从服务器下载一个工件（更多细节[在这里](http://confluence.jetbrains.net/display/TCD7/Dependent+Build#DependentBuild-ArtifactDependency)）

这将允许 TeamCity 确保工件在正确的时间到达正确的代理。TeamCity 还将跟踪此类工件的使用情况。

# c# - 调用 URL 来检查内容类型？

> ID：13052871
> 
> 赞同：4
> 
> 时间：2012-10-24T15:52:31.333
> 
> 标签：c#, asp.net, httpwebrequest, request, response

我需要检查 url 内容类型是否为 pdf？我有一个工作代码，但是我想知道从我拥有的东西中检查的最佳方法是什么。我不需要显示pdf，只需要检查内容类型是否为pdf？ **注意：此方法将使用不同的 url 多次调用，所以我不确定是否需要关闭响应。**

这是我的代码。

```
private bool IsValid(string url)
{
    bool isValid = false;
    var request = (HttpWebRequest)WebRequest.Create(url);
    var response = (HttpWebResponse)request.GetResponse();
    if(response.StatusCode == HttpStatusCode.OK && response.ContentType == "application/pdf")
    {
       isValid = true;
    }
    response.Close();
  return isValid;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T15:55:23.897

是的，因为您不会通过`response`任何需要处理它的地方。您还应该捕获 WebException 并从那里处理流（我也希望处理响应甚至请求会关闭所有相关资源，但不幸的是，我从未见过确认 Response 对象的这种级联处理行为的文档）。

您还需要关闭/处理请求，因为它是一次性对象。它在[GetResponse](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)的注释中指定：

> 多次调用 GetResponse 返回相同的响应对象；请求不会重新发出。

旁注：考虑发出 HEAD 请求，这样您就不会得到任何流（请参阅[方法属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.method.aspx_)以了解用法）。

```
var request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "HEAD"; 
```

# jquery - 添加的列表视图不响应点击

> ID：13052872
> 
> 赞同：0
> 
> 时间：2012-10-24T15:52:34.303
> 
> 标签：jquery, jquery-mobile

我有一个使用 JavaScript/jQuery 创建的列表视图。当我单击一个列表项时，我必须执行代码。

**场景1：** 我使用这个代码：

```
$("div#home ul#one li").live('click', function() { console.log('click') }); 
```

此代码拾取点击，但它拾取两次。因此，当我单击一个列表项时，它会输出两个 console.logs

**场景 2：** 我有此代码用于在普通 index.html 文件中创建的另一个列表。

```
$("div#home ul#two li").off('click').on('click', function() { console.log('click') }); 
```

此代码不会执行代码两次。

无论如何我可以让场景 2 在 JavaScript 创建的列表视图上工作吗？（也欢迎任何其他建议）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:58:02.330

如果您正在动态创建元素..您需要使用委托表单

```
$("div#home").on('click','li', function() { console.log('click') }); 
```

将事件处理程序绑定到绑定时存在的最近的静态父级

如果你`ul`的不是动态的 - 你可以将它绑定到 ul

```
$("div#home ul").on('click','li', function() { console.log('click') }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:58:23.063

要让场景 2 用于动态附加元素，请`on`与委托一起使用，如下所示：

```
$("#two").on('click', 'li', function() { console.log('click') }); 
```

我缩短了第一个选择器，因为如果您选择 by `id`，那么它应该是唯一的。

另外，我会假设第一个场景会两次记录到控制台，因为您有嵌套`li`元素？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:44:46.973

问题是您没有`on`在正确的位置绑定您的侦听器，您在**任何**页面的`pageinit`处理程序中声明以将您的侦听器添加到 li：**`on``$("div#home").on('click','li', function() { console.log('click') });`**

 **因此，您在页面上附加了一个侦听器，`div#login`并在第二页上附加了冗余的第二个侦听器`div#home`。当您单击`li`一个事件时，将触发两个侦听器，然后您将获得两次单击。

您应该做的是`$(document).on('pageinit', function()`将您的 on listener 声明包装在一个条件中，以检查您在哪个页面上：

```
if ($(this).attr(id') === 'home'){
     $("div#home").on('click','li', function() { console.log('click') });
} 
```

这是一个简单的解决方案，您真正应该做的是根据触发`pageinit`事件的页面分支代码并基于它调用正确的代码。请参阅：[我的关于构建 jQM 应用程序的指南](https://stackoverflow.com/questions/10538718/jquery-mobile-pageinit-pagecreate-not-firing/10542821#10542821)。

它的要点是将数据属性附加到`div[data-role=page]`描述您的页面的 etc 中，然后为每个页面调用单独的代码。*（而不是像本例中那样使用 ID，因为您可以在多页面 jQM 应用程序中轻松拥有多个页面实例）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:25:38.897

我无法创建 jsFiddle，因为这似乎无法加载我的函数。我已将脚本放在我自己的网站上。

[http://anjirorijo.com/webapp/](http://anjirorijo.com/webapp/)

登录设置正常。只需单击登录，就会出现屏幕（主页）。如果您单击其中一个 LI 标记并打开控制台日志，您将看到 2 次单击而不是 1 次。

如果您需要任何代码，请在下面评论。

* * *

我使用的当前代码：

```
$("div#home").on('click','li', function() { console.log('click') }); 
```

可以在 custom.js 文件中找到

*   旁注：在#home 页面上时不要刷新页面。这将导致 jQuery 不加载动态创建列表的函数。使用注销并再次登录。**

# mysql - 如何在同一个查询中计算所有结果并计算特定的 - MySql

> ID：13052876
> 
> 赞同：1
> 
> 时间：2012-10-24T15:52:43.227
> 
> 标签：mysql

我需要计算`FirstExtracted`特定日期的所有数据，并且需要计算`LastExtracted`同一日期的所有数据。所以，今天，我需要所有的`FirstExtracted`和`LastExtracted`那个相等的`2012-10-24`。

这是我到目前为止所拥有的，但它没有提出来`LastExtracted`。它输出与以下`LastExtracted`相同的计数`FirstExtracted`：

```
(SELECT LastExtracted,FirstExtracted,
COUNT(FirstExtracted) AS FirstCount,
COUNT(LastExtracted) AS LastCount,
DATE_FORMAT(`LastExtracted`,'%Y-%m-%d') AS Lastdate,
DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') AS Firstdate 
FROM results
WHERE DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') = DATE_FORMAT(`LastExtracted`,'%Y-%m-%d'))
UNION ALL
(SELECT LastExtracted,FirstExtracted,
COUNT(FirstExtracted) AS FirstCount,
COUNT(LastExtracted) AS LastCount,
DATE_FORMAT(`LastExtracted`,'%Y-%m-%d') AS Lastdate,
DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') AS Firstdate 
FROM results
WHERE DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') = DATE_FORMAT(`LastExtracted`,'%Y-%m-%d') GROUP BY Firstdate) 
ORDER BY Firstdate DESC
LIMIT 20 
```

也许我应该使用内部连接？

更新：所以使用你的查询我做了一些改变，让它现在为我做其他事情。如果您查看此页面，我会提出查询

semiold.com/code2.html

我想计算所有标题和 GROUP BY 艺术家。这将是一个数组。然后我希望子查询按艺术家匹配的搜索类型计数。所以如果分贝有阿肯、蕾哈娜、克里斯布朗。我希望它计算每个艺术家有多少个标题，比如 akon 有 100 个。然后我想显示标题的数量，然后计算这 100 个标题中有多少是 google、bing、akon 特定站点等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:33:24.457

我建议`DISTINCT`在您的查询中添加：

```
(SELECT LastExtracted,FirstExtracted,
COUNT(DISTINCT FirstExtracted) AS FirstCount,
COUNT(DISTINCT LastExtracted) AS LastCount,
DATE_FORMAT(`LastExtracted`,'%Y-%m-%d') AS Lastdate,
DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') AS Firstdate 
FROM results
WHERE DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') = DATE_FORMAT(`LastExtracted`,'%Y-%m-%d'))
UNION ALL
(SELECT LastExtracted,FirstExtracted,
COUNT(DISTINCT FirstExtracted) AS FirstCount,
COUNT(DISTINCT LastExtracted) AS LastCount,
DATE_FORMAT(`LastExtracted`,'%Y-%m-%d') AS Lastdate,
DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') AS Firstdate 
FROM results
WHERE DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') = DATE_FORMAT(`LastExtracted`,'%Y-%m-%d') GROUP BY Firstdate) 
ORDER BY Firstdate DESC
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:17:47.970

我将使用联合分别获取两个结果（FirstExtracted 和 LastExtracted），然后使用子查询将它们合并。

```
SELECT
    sub.date, sum(sub.FirstCount) AS FirstCount,
    sum(sub.LastCount) AS LastCount 
  FROM (
      SELECT
          DATE_FORMAT(`FirstExtracted`,'%Y-%m-%d') AS date,
          COUNT(FirstExtracted) AS FirstCount, 0 AS LastCount
        FROM results
        GROUP BY date
      UNION ALL
        SELECT
            DATE_FORMAT(`LastExtracted`,'%Y-%m-%d'),
            0, COUNT(LastExtracted)
          FROM results
          GROUP BY date
    ) AS sub 
    GROUP BY sub.date 
```

假设您今天首次提取了 220 个条目，而今天最近提取了 292 个条目。在其他日期的条目中，这将为您提供：

```
+------------+------------+-----------+
| date       | FirstCount | LastCount |
+------------+------------+-----------+
| 2012-10-24 |        220 |       292 |
+------------+------------+-----------+ 
```

**更新**`UNION`单独会给你以下结果。注意零占位符。

```
+------------+------------+-----------+
| date       | FirstCount | LastCount |
+------------+------------+-----------+
| 2012-10-24 |        220 |         0 |
+------------+------------+-----------+
| 2012-10-24 |          0 |       292 |
+------------+------------+-----------+ 
```

# cubism.js - 如何更改多维数据集指标的步骤？

> ID：13052877
> 
> 赞同：6
> 
> 时间：2012-10-24T15:52:45.973
> 
> 标签：cubism.js

我刚开始使用 cubism.js

剥离示例代码我能够显示两个指标..一个计算（kpi1）-随机函数，一个来自Cube（kpi2）。一旦我将其更改为 1e3 计算的一个 - 随机 - 在 1s 的分辨率下显示良好，而来自 Cube 的那个则根本不显示，它在 1e4 的上下文步骤中完美运行。

这有效：

```
var context = cubism.context()
    .serverDelay(0)
    .clientDelay(0)
    .step(1e4)
    .size(960); 
```

这不会：

```
var context = cubism.context()
    .serverDelay(0)
    .clientDelay(0)
    .step(1e3)
    .size(960); 
```

我究竟做错了什么？

```
<!DOCTYPE html>
<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8">

<title>Dashboard</title>

</head><body><div id="body">

<div id="kpi1"></div>
<div id="kpi2"></div>

<script src="../d3.v2.js"></script>
<script src="../cubism.v1.js"></script>

<script>function random(name) {
  var value = 0,
      values = [],
      i = 0,
      last;
  return context.metric(function(start, stop, step, callback) {
    start = +start, stop = +stop;
    if (isNaN(last)) last = start;
    while (last < stop) {
      last += step;
      value = Math.max(-10, Math.min(10, value + .8 * Math.random() - .4 + .2 * Math.cos(i += .2)));
      values.push(value);
    }
    callback(null, values = values.slice((start - stop) / step));
  }, name);
}</script>

<script>

var context = cubism.context()
    .serverDelay(0)
    .clientDelay(0)
    .step(1e4)
    .size(960);

var foo = random("foo");
var cube = context.cube();

d3.select("#kpi1").call(function(div) {

   div.selectAll(".horizon")
      .data([foo])
    .enter().append("div")
      .attr("class", "horizon")
      .call(context.horizon());

});

d3.select("#kpi2").call(function(div) {

   div.selectAll(".horizon")
      .data([cube.metric("median(cube_compute(ms))")])
    .enter().append("div")
      .attr("class", "horizon")
      .call(context.horizon());

});

</script>

</body></html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:57:30.313

Cubism.js 支持任何步骤，但 Cube 后端系统仅支持通过以下五个步骤之一从存储中聚合度量：

> ```
>  1e4 or 10 seconds
>   6e4 or 1 minute
>   3e5 or 5 minutes
>   36e5 or 1 hour
>   864e5 or 1 day 
> ```

如果您要使用介于或低于这些之间的台阶，Cube 将无法利用使用[金字塔减速器](https://github.com/square/cube/wiki/Queries#reduces)在较低和最低受支持水平上进行的预先计算。

# emacs - emacs 24 c++ 自动缩进损坏

> ID：13052878
> 
> 赞同：18
> 
> 时间：2012-10-24T15:52:47.963
> 
> 标签：emacs, indentation

我在 Ubuntu 10.04 上运行 Emacs 24，在默认的 c++ 环境中编码 c++。定期编码后，我的缩进引擎似乎中断了——按“制表符”缩进将任何行放在行首。选择整个缓冲区会导致整个缓冲区不缩进。此问题影响所有缓冲区，当前或以后打开。到目前为止，我发现修复它的唯一方法是重新启动 emacs 的（非常不方便的）步骤。还有其他方法可以重新启动我的缩进引擎吗？尝试加载不同的缩进样式并不能解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:11:28.090

你读过这个线程吗？

[http://lists.gnu.org/archive/html/help-gnu-emacs/2012-09/msg00216.html](http://lists.gnu.org/archive/html/help-gnu-emacs/2012-09/msg00216.html)

听起来您可以通过更新 cc-mode 来解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T11:49:07.813

我在 24.3 中看到了同样的情况，但我发现关闭并重新打开受影响的缓冲区也可以解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-30T09:47:56.260

[这是我的系统（Emacs 24.3 x86_64 Red Hat Linux）上反复出现的问题，从event_jr 发布](http://lists.gnu.org/archive/html/help-gnu-emacs/2012-09/msg00216.html)的链接来看，可能是 Emacs 24 中引入的错误。我经常遇到这个问题，通常通过重新加载我正在使用的任何缓冲区来解决它：

`M-x revert-buffer RET yes RET`

这样您就不必关闭缓冲区或 Emacs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T14:23:34.053

我发现不平衡的预处理器指令（#ifdef 等）可以把它扔进这种行为

# c - Format specifier of _int8 data type in C

> ID：13052880
> 
> 赞同：1
> 
> 时间：2012-10-24T15:52:53.517
> 
> 标签：c, integer, overflow

What is the format specifier for an _int8 data type?

I am using "%hd" but it is giving me an error about stack corruption. Thanks :)

This is a snippet of the code:

```
signed _int8 answer;

printf("----Technology Quiz----\n\n");
printf("The IPad came out in which year?\n");
printf("Year: ");
scanf("%hd", &answer);
printf("\n\n");
printf("The answer you provided was: %hd\n\n", answer); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:57:09.270

man scanf: `%hhd` "... but the next pointer is a pointer to a signed char or unsigned char". An `_int8` is equivalent to a `signed char` in any system you're going to be doing `scanf` on.

```
signed _int8 answer;
scanf("%hhd", &answer);
printf("You entered %d\n\n", answer); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:23:24.980

To use the "explicit width" typedefs like `int8_t` and `uint_fast16_t` portably in C99 in the format strings of `printf` and `scanf`, you need to `#include <inttypes.h>` and then use the string macros `PRIi8` and `PRIuFAST16`, like so:

```
#include <stdint.h>   // for the typedefs (redundant, actually)
#include <inttypes.h> // for the macros

int8_t a = 1;
uint_fast16_t b = 2;

printf("A = %" PRIi8 ", B = %" PRIuFAST16 "\n", a, b); 
```

See [the manual](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/inttypes.h.html) for a full list, and cross-reference it with the typedefs in [`<stdint.h>`](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/stdint.h.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:59:05.513

%hd will allow you to get a "short int", which is typically 16 bits, not 8 bits as might imagine. If %hhd is not supported, you may not have a good way to do this, other than scanning in as a short and assigning.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:03:17.687

`scanf` with `%hd` reads a `short int`, which might be 16 bit on a 32 bit machine. So you are reading into answer and one byte beyond, thus the stack corruption.

Up to C90 there is no type specifier to read an 8 bit int with scanf.

`%hhd` is only available since C99, see also [ANSI C (ISO C90): Can scanf read/accept an unsigned char?](https://stackoverflow.com/questions/2231056/ansi-c-iso-c90-can-scanf-read-accept-an-unsigned-char).

# asp.net-mvc - Razor 模板中的 @ 语句显示 HTML 符号而不是引号

> ID：13052889
> 
> 赞同：0
> 
> 时间：2012-10-24T15:53:35.093
> 
> 标签：asp.net-mvc, razor

我注意到`@`Razor 模板中的语句将字符串中的引号转换为 HTML 符号。

那么如何显示正确的 HTML 属性呢？示例代码：

```
<body@(ViewBag.Highlight == true ? " onload=\"prettyPrint()\"" : "")> 
```

结果：

```
 <body onload=&quot;prettyPrint()&quot;> 
```

这是完全不正确的。我怎样才能达到正常：

```
 <body onload="prettyPrint()"> 
```

在我的情况下？

我已经尝试过[这个答案](https://stackoverflow.com/questions/9665874/whats-the-correct-way-to-output-html-attributes-text-with-quotes-in-razor-m)`HtmlString`的对象。但即使使用显式类型转换也无法转换 为。`HtmlString``string`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:54:40.917

您将需要使用`Html.Raw()`. 试试这种方式：

```
@Html.Raw(String.Format("<body{0}>", ViewBag.Highlight == true ? " onload=\"prettyPrint()\"" : "")) 
```

正如[文档](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)所说：

> 返回非 HTML 编码的标记。

# xslt - 用于按元素名称升序排序的 XSLT 排序边缘情况

> ID：13052896
> 
> 赞同：3
> 
> 时间：2012-10-24T15:53:47.493
> 
> 标签：xslt

这是[问题]的后续：[xsl 多重排序层次结构](https://stackoverflow.com/questions/11829642/xsl-multiple-sort-heirarchy)

正在使用的 XSL 是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/> 

 <xsl:template match="/*">
  <xsl:copy>
    <xsl:apply-templates select="name">
     <xsl:sort select="@rank" data-type="number"/>
     <xsl:sort/>
    </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="name">
  <name rank="{@rank}">
    <xsl:copy-of select="text()"/>
    <xsl:apply-templates select="name">
     <xsl:sort select="@rank" data-type="number"/>   
     <xsl:sort/>
    </xsl:apply-templates>
  </name>
 </xsl:template>
</xsl:stylesheet> 
```

但是，我有一个排名相同的情况，但按元素名称（ASC）排序不正确。

```
<name rank="100000">Motor Sports
   <name rank="100000">Motorcycle Racing [MOCY]
      <name rank="100000">Motocross [MOCR]</name>
      <name rank="100000">Speedway [SPEE]</name></name>
   <name rank="100000">Motor Racing [MORA]
      <name rank="100000">Formula 1 [FO1]</name>
   </name>
</name> 
```

在这种情况下，“Motor Racing”应该在“Motorcycle Racing”之上。你们能帮我解决这个问题吗？我试过同时添加

```
<xsl:sort select="text()" order="ascending"/> 
```

和

```
<xsl:sort select="name" order="ascending"/> 
```

后

```
<xsl:sort select="text()" order="ascending"/> 
```

然而，这并没有奏效。

回答：感谢@MichaelKay 的回答，我解决这个问题的方法是将XSLT 处理器更改为Saxon 并使用default-collat​​ion="http://saxon.sf.net/collat​​ion?decomposition=full"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:50:51.647

你说

> “Motor Racing”应该在“Motorcycle Racing”之上

XSLT 没有定义详细的排序规则。这可能是忽略空格的排序规则。有些人这样整理，有些人则不然。检查您的 XSLT 处理器的文档，可能有一种方法会影响它使用的排序规则。

或者，您可以使用类似的方法获得所需的效果

```
<xsl:sort select="translate(xxx, ' ', '-')"/> 
```

# dropbox - 还原文件夹中的所有文件

> ID：13052897
> 
> 赞同：55
> 
> 时间：2012-10-24T15:53:49.117
> 
> 标签：dropbox

有没有办法在某个时间将文件夹中的所有文档恢复为修订版？我知道如何为单个文件执行此操作，但我将如何为整个文件夹执行此操作？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-08-03T02:24:46.760

我遇到了同样的问题，所以我编写了这个脚本来将任何保管箱文件夹恢复到给定日期的状态：

[https://github.com/clark800/dropbox-restore](https://github.com/clark800/dropbox-restore)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-06-04T11:40:20.703

你有几个选择：

1.  如果您最近对 Dropbox 中的大量文件进行了修改，并且您想要还原所有这些更改，您可以联系 Dropbox 的支持人员以回滚修改。有关详细信息，请参阅[https://www.dropbox.com/help/400/en](https://www.dropbox.com/help/400/en)。根据 Dropbox 论坛上的讨论，他们似乎也愿意并且能够将任何给定文件夹恢复到任意日期，只要它在 Dropbox 存储的范围内（基本帐户为 30 天；对于具有packrat 功能一直追溯到激活 packrat 时的功能）。

2.  您可以使用由 clark800 编写的脚本，链接到此问题的单独答案中。我没有使用它，所以不能保证它，但很多人似乎对它很满意！

3.  如果您使用的是 Mac（OS X 10.7 或更高版本），您可以试用我一直在开发的名为 Revisions 的新应用程序（可从[https://www.revisionsapp.com获得）。](https://www.revisionsapp.com)该应用程序允许您选择 Dropbox 中的任何文件夹，并向您显示该文件夹所有编辑的时间线。然后，您可以选择恢复或下载任何单个文件的任何版本，或者将整个文件夹（包括任何子文件夹）恢复或下载到任何所需时间点的状态（受上述 Dropbox 限制）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-24T16:03:43.687

据我所知，恢复到特定版本仅限于每个文件的操作。[使用他们的REST API](https://www.dropbox.com/developers/reference/api)可以完成您正在寻找的内容，但它需要自定义代码。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-10-23T16:24:11.163

如果您不想使用脚本，Dropbox 确实允许您同时选择多个文件并恢复它们（如果您在线登录到您的帐户）。右键单击并首先选择“显示已删除的文件”。然后，如果它只是几个文件夹，则可以通过按住“Ctrl”并选择它们来单独选择文件，或者使用“Ctrl”和“A”将它们全部选中。然后右键单击并选择恢复。

# windows - VBscript 在特定时间范围内检查文件是否存在（能够使用通配符）

> ID：13052900
> 
> 赞同：2
> 
> 时间：2012-10-24T15:53:56.597
> 
> 标签：windows, vbscript

大家早上好，我一直在尝试将脚本执行时从用户那里获取文件路径和文件名（其中可能包含通配符）的 VBscript 组合在一起。然后，该脚本将检查指定目录中是否存在与提供的文件名匹配的文件，然后查看上次修改日期以查看它是否在特定时间范围内（即早上 6 点正负 5 分钟）内创建/修改。然后它将所述文件复制到一个 zip 文件中。

到目前为止，我已经能够使参数正常工作，并且我将其设置为获取当前时间，查看文件夹中的文件并将硬编码的文件名与文件夹中的文件名匹配。这就是我迄今为止所拥有的。

```
currentTime = Now()

filePath = Wscript.Arguments.Item(0)
fileName = Wscript.Arguments.Item(1)

Set fileSystem = CreateObject("Scripting.FileSystemObject")
Set directory = fileSystem.GetFolder(filePath)

For each file in directory.Files
    If file.Name = fileName Then
        Wscript.echo file.Name & " " & file.DateLastModified
    end if
Next 
```

我是一个 VBscript 菜鸟，我期待学习方法！

帽3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T04:34:24.367

如果您使用 WMI，它支持通配符。

```
Dim strPath

strFile = "*.*"
If WScript.Arguments.Count > 1 Then
    strPath = WScript.Arguments.Item(0)
    strFile = WScript.Arguments.Item(1)
Elseif WScript.Arguments.Count = 1 Then
    strPath = WScript.Arguments.Item(0)
Else

End If

Set objFso = CreateObject("Scripting.FileSystemObject")
If Not objFso.FolderExists(strPath) Then
    WScript.Echo "Folder path does not exist."
    WScript.Quit
Else
    'Remove any trailing slash
    If Right(strPath, 1) = "\" Then
        strPath = Left(strPath, Len(strPath) - 1)
    End If
End If
Set objFso = Nothing

If Not IsNull(strPath) And strPath <> "" Then
    strQuery = strPath & "\" & strFile
Else
    strQuery = strFile
End If

strQuery = Replace(strQuery, "*", "%")
strQuery = Replace(strQuery, "?", "_")

strQuery = Replace(strQuery, "\", "\\")

strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}\\" & strComputer & "\root\cimv2")

Set colFiles = objWMIService.ExecQuery _
    ("Select * From CIM_DataFile Where FileName Like '" & strQuery & "'")

For Each objFile in colFiles
    WScript.Echo "Access mask: " & objFile.AccessMask
    WScript.Echo "Archive: " & objFile.Archive
    WScript.Echo "Compressed: " & objFile.Compressed
    WScript.Echo "Compression method: " & objFile.CompressionMethod
    WScript.Echo "Creation date: " & objFile.CreationDate
    WScript.Echo "Computer system name: " & objFile.CSName
    WScript.Echo "Drive: " & objFile.Drive
    WScript.Echo "8.3 file name: " & objFile.EightDotThreeFileName
    WScript.Echo "Encrypted: " & objFile.Encrypted
    WScript.Echo "Encryption method: " & objFile.EncryptionMethod
    WScript.Echo "Extension: " & objFile.Extension
    WScript.Echo "File name: " & objFile.FileName
    WScript.Echo "File size: " & objFile.FileSize
    WScript.Echo "File type: " & objFile.FileType
    WScript.Echo "File system name: " & objFile.FSName
    WScript.Echo "Hidden: " & objFile.Hidden
    WScript.Echo "Last accessed: " & objFile.LastAccessed
    WScript.Echo "Last modified: " & objFile.LastModified
    WScript.Echo "Manufacturer: " & objFile.Manufacturer
    WScript.Echo "Name: " & objFile.Name
    WScript.Echo "Path: " & objFile.Path
    WScript.Echo "Readable: " & objFile.Readable
    WScript.Echo "System: " & objFile.System
    WScript.Echo "Version: " & objFile.Version
    WScript.Echo "Writeable: " & objFile.Writeable
Next 
```

编辑..........

您可以使用 WMI 事件脚本`__InstanceCreationEvent`来监视特定文件夹中的新文件创建。它看起来像这样：

```
strSource = "C:\\somefilepath\\withdoubleshlashes"
strComputer = "."
Set objWMIService = GetObject("winmgmts:" & strComputer & "rootcimv2")

Set colEvents = objWMIService.ExecNotificationQuery _
    ("SELECT * FROM __InstanceCreationEvent WITHIN 10 WHERE " _
        & "Targetinstance ISA 'CIM_DirectoryContainsFile' AND " _
        & "TargetInstance.GroupComponent= " _
        & "'Win32_Directory.Name=""" & strSource & """'")

Do While True
    Set objEvent = colEvents.NextEvent()
    copyFile(objEvent.TargetInstance.PartComponent)
Loop 
```

有关完整说明，您可以在我的博客上阅读[监控和归档新创建的文件。](http://www.nilpo.com/2007/08/windows-xp/monitoring-and-archiving-newly-created-files/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-28T06:10:00.760

这个答案使用正则表达式。为了使其工作，它将您的模式格式重写为正则表达式格式。例如`*.txt`将成为`^.*[.]txt$`.

以下列出了在`C:\Temp`上午 5:55 和上午 6:05 之间最后修改的文本文件：

```
strPath = "C:\Temp"
strFile = "*.txt"
startTime = 555
endTime = 605

Set fso = CreateObject("Scripting.FileSystemObject")
Set folder = fso.GetFolder(strPath)
Set files = folder.Files

Set re = New RegExp
re.IgnoreCase = true
re.Pattern = "^" + Replace(Replace(strFile, ".", "[.]"), "*", ".*") + "$"

For Each f in Files
  Set matches = re.Execute(f.Name)
  If matches.Count > 0 Then
    HM = Hour(f.DateLastAccessed) * 100 + Minute(f.DateLastAccessed)
    If HM >= startTime And HM <= endTime Then
      WScript.Echo f.Name, f.DateLastAccessed
    End If
  End If
Next 
```

参考：

*   [正则表达式 (RegExp) 对象](https://msdn.microsoft.com/en-us/library/yab2dx62(v=vs.84).aspx)

*   [正则表达式和运算符](https://msdn.microsoft.com/en-us/library/aa976858(v=vs.71).aspx)

*   [微软用正则表达式强化 VBScript](https://msdn.microsoft.com/en-us/library/ms974570.aspx)

*   [嘿，脚本专家！对正则表达式挑眉](https://technet.microsoft.com/en-us/library/2008.05.heyscriptingguy.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-18T13:21:27.757

对于您的示例，最简单的方法是使用 inStr (In String) 函数。我发现它适用于我 99% 的外卡任务。因此，在您的示例中，而不是使用：

```
If file.Name = fileName Then 
```

采用：

```
If inStr(file.Name, filename) Then 
```

这实际上不允许通配符（*），因为它找不到匹配项（参数中带有星号），因此您需要从字符串中删除通配符并将其替换为任何内容（或者只是训练用户不使用通配符）：

```
Replace(filename,"*", "") 
```

但是， inStr 函数确实允许部分或完全匹配，这使其适用于大多数通配符任务。因此，如果你的文件名为 pic.jpg，用户是否搜索：

pic 或 jpg 或 p 或 c 或 pi 等。

它将返回一个匹配项。但请记住，instr 函数返回一个数字，匹配项出现在字符串中。因此，如果它没有创建匹配项，则结果将为 0。我遇到了`NOT`不起作用的示例，或者我需要使用完整的语法，在这种情况下是：

```
If inStr(file.Name, filename)<>0 Then 
```

# .net - 用 Visual Basic 编写的 Windows 窗体应用程序是否也需要 VB 运行时？

> ID：13052901
> 
> 赞同：3
> 
> 时间：2012-10-24T15:53:59.153
> 
> 标签：.net, vb.net, winforms, runtime

如果我在 Visual Studio（Windows 窗体应用程序）中创建应用程序并在 Visual Basic 中编写代码。将其编译为 .exe 后，是否需要 vb 运行时才能在其他 PC 上运行？或者它像 C++ 应用程序那样运行没有问题。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:55:07.277

您需要确保部署应用程序的计算机安装了适当的 .NET Framework（与您的目标相同）。

安装 .NET Framework 后，唯一的要求将是您的可执行文件以及您在项目中特别包含作为额外引用的任何依赖项（以及任何这些依赖项所需的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:29:04.233

您可能来自 VB6 和之前的那些旧时代，那时您必须在目标机器上安装 VB 运行时才能运行您的应用程序。与您现在安装 Visual C++ 可再发行组件以运行 Visual C++ 应用程序的方式相同。

了解 .NET 的重要一点是，您使用哪种语言编写 .NET 应用程序并不重要。它只需要在目标机器上安装 .NET 框架，它必须与您在应用程序中定位的版本相匹配。当然，如果您引用 3rd 方 DLL，那是额外的，与任何其他框架相同。

这就是为什么您可以自由选择您选择的语言，而不会影响您的开发策略，无论是 VB.NET、C# 还是[任何其他 .NET 语言](http://en.wikipedia.org/wiki/Category%3a.NET_programming_languages)，如果您决定，您可以在以后更改它。有可用于在不同 .NET 语言之间迁移的免费转换器，这使您作为开发人员可以灵活使用。

# sql - SQL Server 存储过程，从另一个查询执行

> ID：13052903
> 
> 赞同：1
> 
> 时间：2012-10-24T15:54:03.780
> 
> 标签：sql, sql-server-2008, stored-procedures

我正在学习 SQL，但在从新的/不同的查询中调用存储过程时遇到了一些问题。

我已经建立了一个`installDB.sql`文件，其中创建了一些表并另外用数据填充了这些表。

此外，我还使用存储过程来添加一些功能。

例子：

```
CREATE PROCEDURE Add_Book
    @User CHAR(50),
    @Book CHAR(50)
    AS
INSERT INTO Relationtable(book_id, user_id, current_dato) 
    VALUES(
        (SELECT book_id FROM Books WHERE book_title = @Book),
        (SELECT user_id FROM Users WHERE user_name = @User),
         GETDATE()
    ) 
```

在此查询（选项卡）中，我可以`exec`执行该过程（没有问题）：

```
exec Add_Book myUser, myBook 
```

但是，如果我在新查询（选项卡）中尝试此命令，它就不起作用。

我希望`installDB`构建我的所有函数，并能够稍后从另一个查询中调用它们。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:28:00.767

我们使用这种方法在我们的产品中设置和维护数据库。我们有许多单独的 SQL 脚本来安装所有必需的表、tempdb 表、视图、函数、存储过程等。稍后，当人们运行执行这些存储过程的代码时，proc 可以像正常一样执行。

如果此安装脚本在事务中运行并以 a 结束`ROLLBACK`或遇到错误，则安装到该点的所有内容都将失败。同样，如果安装脚本以 a 开头`BEGIN TRAN`，并且没有`COMMIT`，则 procs 还不存在。

另一种可能性是安装脚本针对与您预期不同的数据库或服务器运行。运行脚本后，您应该能够在 Microsoft SQL Management Studio 查询窗口中执行它。

# javascript - 如何在 JavaScript 命名空间中为对象创建静态成员？

> ID：13052904
> 
> 赞同：1
> 
> 时间：2012-10-24T15:54:07.777
> 
> 标签：javascript, namespaces, static-members, oop

我在 Javascript 中模拟了一个静态类变量。

```
MyObject.staticVariable = "hello world";

function MyObject() {
    // do something
}

MyObject.prototype.someFunction = function() ... 
```

我不明白为什么这种语法有效，因为在分配 staticVariable 属性之前我没有显式创建 MyObject （我怎么可能仍然有一个 MyObject 函数？）。但它确实有效，我在许多问题的答案中都看到了它：如何在 Javascript 中模拟静态类变量？

在命名空间中声明 MyObject 函数时，如何实现此功能？

```
var Namespace = {};

// Not allowed, and for good reason in my eyes, as NameSpace.MyObject does not exist
Namespace.MyObject.staticVariable = "hello world";

Namespace.MyObject = function() {
    // do something
}

Namespace.MyObject.prototype.someFunction = function() ... 
```

让我知道我是否可以澄清和/或我的想法是否错误。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:56:14.983

函数声明被“提升”到当前词法环境的顶部。

这意味着该函数在该环境中的任何其他代码运行之前就存在。

```
// This works

MyObject.staticVariable = "hello world";

function MyObject() {
    // do something
} 
```

* * *

```
// This does not

MyObject.staticVariable = "hello world";

var MyObject = function() {
    // do something
} 
```

在您的`Namespace`示例中，它实际上与第二个示例相同。这意味着您需要确保首先发生函数分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:57:55.743

函数声明被提升，也就是说，您可以在它们的实例化之上使用它们。但是，函数*表达式*不是。在您的示例中，您执行以下操作：

```
Namespace.MyObject.staticVariable = "hello world";

Namespace.MyObject = function() {
    // do something
} 
```

这不起作用，因为`Namespace.MyObject`没有（也不能）将其创建为函数声明。至于模拟功能，请使用函数：

```
function add( prop, val ) {
    Namespace.MyObject[ prop ] = val;
} 
```

这将允许您在显式创建对象之前向对象添加属性：

```
add( "staticVariable", "Hello World" );

Namespace.MyObject = function() {
    // do something
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:02:25.157

您能否阐明静态类变量的含义？JavaScript 与 Java 不同。

如果你想要一个客户端不能修改的常量，你可以使用闭包。例如：

```
var Namespace = {};
Namespace.MyObject = (function(){
  var staticVariable = "hello world";

  //this will be assigned to "MyObject"
  return {
    someFunction: function() {
       //refer to staticVariable here
       //no client can modify staticVariable directly; 
       //only through the methods you provide
    }
  };
})(); 
```

# c# - RESTful 服务未按预期返回 XML

> ID：13052905
> 
> 赞同：3
> 
> 时间：2012-10-24T15:54:10.677
> 
> 标签：c#, xml, wcf, rest

我有一个 WCF RESTful 服务，它应该将客户的姓名和姓氏作为 XML 响应返回，该服务的定义如下所示

```
[OperationContract]
    [WebInvoke(Method = "POST",
        RequestFormat = WebMessageFormat.Xml,
        ResponseFormat = WebMessageFormat.Xml,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "/GetNameAndSurname")]
    string GetNameAndSurname(); 
```

我遇到的问题是返回的 XML 响应不像预期的那样在正常 XML 中，例如

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
 &lt;Customer;&#xD;
  &lt;Name&gt;Andre&lt;/Name&gt;&#xD;
  &lt;SurnameName&gt;Lombaard&lt;/SurnameName&gt;&#xD;
 &gt;
</string> 
```

我不确定是服务以这种方式返回响应还是我正在读取数据的方式，只是为了提供信息，我包含了我用来读取下面响应的代码，

```
var request = HttpWebRequest.Create(url);
request.Method = "POST";
request.Timeout = 2 * 60 * 1000;
byte[] byteArray = Encoding.UTF8.GetBytes(xml);
request.ContentType = "text/xml";
request.ContentLength = byteArray.Length;
var dataStream = request.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();
var response = request.GetResponse();
dataStream = response.GetResponseStream();
StreamReader reader = new StreamReader(dataStream, Encoding.UTF8);
dataStream.Flush();
var results = reader.ReadToEnd();
reader.Close();
dataStream.Close();
response.Close(); 
```

如何在不必对响应中收到的字符执行各种替换的情况下获得正常的 XML。

目前我用下面的代码替换字符。这并不理想

```
results = results.Replace("</string>", String.Empty);
results = results.Replace("&lt;", "<");
results = results.Replace("&gt;&#xD;", ">");
results = results.Replace("&gt;", ">");
results = Regex.Replace(results, "<string .*?\\>", String.Empty); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T16:01:04.733

该服务正在做它所说的那样 - 它正在返回一个 XML 序列化的字符串。我猜服务代码`Customer`在返回之前将对象序列化为字符串。如果您希望返回类型为`Customer`，请让服务方法返回一个`Customer`对象而不是字符串，您应该很好。`Customer`将您序列化为适当的 XML 字符串将足够聪明。

为了测试您的数据，您可以使用 Fiddler 之类的工具来观察原始 HTTP 请求和响应，这样您就可以确定请求和响应的确切内容 - 但我的猜测是它会完全按照您的显示返回。

绝对不要用字符串替换做最后一件事。如果您确实需要这样做，请查看 XML 解码，可能使用[此处](https://stackoverflow.com/questions/6757019/how-to-decode-string-to-xml-string-in-c-sharp)找到的解决方案之一。

# php - 将数组转换为字符串

> ID：13052906
> 
> 赞同：0
> 
> 时间：2012-10-24T15:54:12.243
> 
> 标签：php

这是一个非常奇怪的问题，对于问题的标题，我很抱歉，但我想不出一个好的问题。

无论如何，我有一系列价格，一周中的每一天都有一个。

```
 array = (
   [Mon] => 0.40,
   [Tue] => 0.40,
   [Wed] => 0.40,
   [Thu] => 0.40,
   [Fri] => 0.40,
   [Sat] => 0.50,
   [Sun] => 
 ) 
```

如您所见，一天或多天可能是空的，价格可能每天都不同。

我需要得到一个字符串

```
 Mon - Fri 0.40, Sat 0.50 
```

我有点需要平板阵列，只要价格一样。

上面的只是一个例子，我可能在数组中有“洞”，例如，如果我没有周三的价格，那么结果字符串应该是

```
 Mon - Tue 0.40, Thu - Fri 0.40, Sat 0.50 
```

有什么建议我可以在 PHP 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:26:53.717

你可以试试这个...

你的阵列

```
$array = array(
        "Mon" => 0.40,
        "Tue" => 0.40,
        "Wed" => 0.40,
        "Thu" => 0.40,
        "Fri" => 0.40,
        "Sat" => 0.50,
        "Sun" => null); 
```

示例 1

```
var_dump(groupDateTime($array)); 
```

输出

```
array
  0 => 
    array
      's' => string 'Mon' (length=3)
      'e' => string 'Fri' (length=3)
      't' => float 0.4
  1 => 
    array
      's' => string 'Sat' (length=3)
      'e' => string 'Sat' (length=3)
      't' => float 0.5 
```

示例 2

```
 var_dump(groupDateTime($array,true));
                                ^---------- Optional Formatting 
```

输出

```
array
  0 => string 'Mon - Fri 0.4' (length=13)
  1 => string 'Sat 0.5' (length=7) 
```

使用的功能

```
function groupDateTime($array, $format = false) {
    $group = array();
    $x = 0;
    foreach ( $array as $day => $time ) {
        if (empty($group[$x]) === true) {
            $group[$x]['s'] = $day;
            $group[$x]['e'] = $day;
            $group[$x]['t'] = $time;
        }
        if ($group[$x]['t'] === $time) {
            $group[$x]['e'] = $day;
            continue;
        }
        $x ++;
        $group[$x]['s'] = $day;
        $group[$x]['e'] = $day;
        $group[$x]['t'] = $time;
    }

    $group = array_filter($group, function ($v) {
        return ! empty($v['t']);
    });
    if ($format === true)
        $group = array_map(function ($v) {
            if ($v['s'] == $v['e'])
                return "{$v['s']} {$v['t']}";
            return "{$v['s']} - {$v['e']} {$v['t']}";
        }, $group);
    return $group;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:54:15.653

这是一种方法。

```
$weekArr = array(
    'Mon' => 0.40,
    'Tue' => 0.40,
    'Wed' => 0.40,
    'Thu' => 0.30,
    'Fri' => 0.40,
    'Sat' => 0.50,
    'Sun' => NULL
);

$res = array();

foreach ($weekArr as $key => $value) {
    if (is_null($value)) continue;
    if (empty($res)) $res[] = array('begin'=>$key,'value'=>$value);
    else {
        $lastItem =& $res[count($res)-1];
        if ($lastItem['value'] == $value) $lastItem['end'] = $key;
        else $res[] = array('begin'=>$key,'value'=>$value);
        unset($lastItem);
    }
}
foreach ($res as &$arr) {
    $newVal = $arr['begin'];
    if (isset($arr['end'])) $newVal .= ' - ' . $arr['end'];
    $arr = $newVal . ' ' . $arr['value'];
}
unset($arr);

// and the output:  
print_r($weekArr);
print_r($res);
echo implode(', ',$res); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:50:58.013

作为您的问题的解决方案，请参考下面的代码片段，它在遍历数组时生成一个字符串。

```
$a=array('Mon'=>0.40,'Tue'=>0.40,'Wed'=>'','Thu'=>0.5,'Fri'=>0.4,'Sat'=>0.4,'Sun'=>0.4);
$t=array();
$x=array();
$keys=array_keys($a);
$current_element=current($a);
$x[$keys[0]]=$current_element;
foreach($a as $key=>$value)
{
if(!in_array($value,$t)& !in_array($value,$x) && !empty($value))
{
   $t[$key]=$value;

}
else if( !empty($value))
{
    $x[$key]=$value;
     }
 }
$m=array_keys($t);
$n=array_keys($x);
$s=current($n);
$s.='- '.end($n);
$s.=' '.current(array_values($x));
$s.= ' '.current($m);
$s.=' '.current(array_values($t));
echo $s; 
```

# java - 将外部 android 库导入 IntelliJ

> ID：13052912
> 
> 赞同：2
> 
> 时间：2012-10-24T15:54:40.583
> 
> 标签：java, android, intellij-idea

我浪费了一天时间尝试将外部库导入 IntelliJ。[我已经完成了这里](http://soledadpenades.com/2011/06/17/android-library-projects-with-intellij-idea/)提到的所有事情，但是当我尝试使用[快速操作库](https://github.com/lorensiuswlt/NewQuickAction)时，我不断收到*android.content.res.Resources$NotFoundException*。请帮忙，我真的不想使用 Eclipse。

# android - 在活动开始时播放声音

> ID：13052914
> 
> 赞同：0
> 
> 时间：2012-10-24T15:54:43.580
> 
> 标签：android

我是从服务器接收到一些数据时启动的一项活动。需要明确的是，当驾驶员有新工作时，应用程序中会弹出屏幕。有没有办法用声音通知用户这个屏幕。

活动代码如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Timers;
using Android.App;
using Android.Content;
using Android.Media;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using NorthStar.Driver.Application;
using TheNorthStar.Api.Requests;
using TheNorthStar.Api.Results;

namespace NorthStar.Driver
{
    [Activity(Label = "New Work Available")]
    public class NewWorkAvailableActivity : Activity
    {
        public string driverId;
        public string bookingId;
        public string fullAddress;
        public string customerPhoneNumber;

        private Timer jobTimer;
        private int timerCount = 9;
        private TextView jobTimerLabel;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            SetContentView(Resource.Layout.NewJobAvailable);

            fullAddress = Intent.GetStringExtra("fullAddress");
            customerPhoneNumber = Intent.GetStringExtra("customerPhoneNumber");
            driverId = Intent.GetStringExtra("driverID");
            bookingId = Intent.GetStringExtra("bookingId");

            TextView jobLocationLabel = FindViewById<TextView>(Resource.Id.newJobLocation);
            jobLocationLabel.Text = string.Format("at {0}", Intent.GetStringExtra("jobLocation"));

            jobTimerLabel = FindViewById<TextView>(Resource.Id.newJobTimerText);

            Button acceptBtn = FindViewById<Button>(Resource.Id.AcceptWorkBtn);
            acceptBtn.Click += (sender, args) =>
                                   {
                                       jobTimer.Stop();
                                       AcceptBookingAsync asyncTask = new AcceptBookingAsync(this);
                                       asyncTask.Execute();

                                   };

            Button rejectBtn = FindViewById<Button>(Resource.Id.RejectWorkBtn);
            rejectBtn.Click += (sender, args) => { Close(); };

            jobTimer = new Timer(1000);
            jobTimer.Elapsed += (sender, e) =>
                                    {
                                        CheckTimer();

                                    };
            jobTimer.Start();

            // Create your application here
        }

        private void Close()
        {
            jobTimer.Stop();
            Intent a = new Intent(this, typeof(MainActivity));
            a.PutExtra("driverID", driverId);
            a.AddFlags(ActivityFlags.ClearTop);
            StartActivity(a);
        }

        private void CheckTimer()
        {
            if(timerCount == 0)
            {
                //timeout so return home
                Close();
            }
            else
            {
                timerCount--;
                RunOnUiThread(() => { jobTimerLabel.Text = string.Format("{0} seconds to respond", timerCount); });

            }
        }
    }
} 
```

**我试过这个但是当屏幕被调用时它不起作用。**

```
protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            SetContentView(Resource.Layout.NewJobAvailable);

            string ns = Context.NotificationService;
            NotificationManager notificationManager = NotificationManager.FromContext(ApplicationContext);
            Notification notification = new Notification(Resource.Drawable.Icon, "NorthStar Taxi");
            notification.Defaults |= NotificationDefaults.All;
            Intent notifyIntent = new Intent(this, typeof(NewWorkAvailableActivity));
            PendingIntent contentIntent = PendingIntent.GetActivity(this, 0, notifyIntent, 0);

            fullAddress = Intent.GetStringExtra("fullAddress");
            customerPhoneNumber = Intent.GetStringExtra("customerPhoneNumber");
            driverId = Intent.GetStringExtra("driverID");
            bookingId = Intent.GetStringExtra("bookingId"); 
```

# java - 如何指向 Play2/Scala 中本机 java 库 jar 预期的属性文件？

> ID：13052915
> 
> 赞同：0
> 
> 时间：2012-10-24T15:54:44.407
> 
> 标签：java, scala, playframework

我正在尝试将用于圣路易斯联邦储备数据 (FRED) 的 API 绑定到 Play2 网络应用程序中。您可以在此处查看 API：http: [//api.stlouisfed.org/docs/fred/](http://api.stlouisfed.org/docs/fred/)在 java 下。

我将 FREDAPI.jar 放入 scala/play 类路径中，我可以毫无问题地导入 com.uniservsolutions.stlouisfed.fred。

但是 API 需要 API 密钥来实例化“会话”，并将其放入文件 .properties（我有 fred.properties）。API 文档指示我在命令行中声明以下内容：

```
java -Dcom.uniservsolutions.stlouisfed.fred.properties="fred" 
```

这将读取 fred.properties 的内容：

```
fredAPIKey=<my key>
fredURL=http://api.stlouisfed.org/fred/
sendGetRetryCount=5
sendGetTimeoutMilliseconds=10000
sendRequestRetryCount=5 
```

但我不熟悉如何在 Play 中执行此操作。我找到了关于 JAVA_OPTS 的信息，但我不确定在哪里声明或者是否确实有效。最后，当我部署这个（目前在 Heroku 上暂存）时，我将在哪里声明它（heroku 的 Procfile？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:45:08.437

我很偶然地发现您可以声明 java 命令行 args 进行播放，例如：

```
play -Dcom.uniservsolutions.stlouisfed.fred.properties="var" 
```

# javascript - 如何使用 Javascript 从 APEX_ITEM 设置页面元素的值

> ID：13052916
> 
> 赞同：1
> 
> 时间：2012-10-24T15:54:47.203
> 
> 标签：javascript, oracle-apex

我在 Oracle Apex 中编写了一些代码，而且我不是开发背景，所以请原谅我的错误代码。我正在动态生成一个表单，并且我想在用户更改特定表单元素的值时设置一个隐藏的页面项。这是我正在使用的代码：

```
 select APEX_ITEM.HIDDEN(2,base_data_seq_nbr)||APEX_ITEM.HIDDEN(6,case when substr(description,0,1)= chr(49838) then substr(description,-(length(description)-1)) else description end)||APEX_ITEM.HIDDEN(7,case when substr(description,0,1)= chr(49838) then 1 else 0 end)||APEX_ITEM.HIDDEN(9,
                 data_select(replace(replace(trim(substr(field_name,-(length(field_name)-instr(field_name,',',1)))),'BSBR',''),'C','L'), substr(field_name,0,instr(field_name,',',1)-1), :P721_XCASE,:P721_XRETSTAT,:P721_XID,:P721_XCUSNUM,:P721_DB_ID))||case when substr(description,0,1)= chr(49838)
         then '<img src="/i/themes/theme_2/images/required.gif" alt="Value Required" alt="Value Required" />'
         else null
       end as req_ind,
   case when substr(description,0,1)= chr(49838)
         then substr(description,-(length(description)-1))
         else description
       end as description,
   APEX_ITEM.DATE_POPUP(1,rownum,
                 to_date(data_select(replace(replace(trim(substr(field_name,-(length(field_name)-instr(field_name,',',1)))),'BSBR',''),'C','L'), substr(field_name,0,instr(field_name,',',1)-1), :P721_XCASE,:P721_XRETSTAT,:P721_XID,:P721_XCUSNUM,:P721_DB_ID),'MM/DD/YYYY'),'MM/DD/YYYY',10,10,'onkeyup="javascript:FormatDate(this);"' ||case when instr(substr(field_name,1,4),'DOB,',1)>0 then ' onchange="javascript:$s(''P721_DOB_RBD'',this);"' end,'datepicker_'||rownum)
        end
   end as field_format
from bcvsown.bcvs_base_data
    inner join v_lookup v
    on v.value_seq = stmt_type 
left join (select * from apex_collections where collection_name = 'ERR_COLLECTION') ac
    on base_data_seq_nbr=ac.n001
where caseno = :P721_XCASE
and v.value_cd = case when :P721_XDE_SEQ > 1 then decode(:P721_XIS_BSRS,'true','BSRS','BET') else v.value_cd end
and db_id = :P721_DB_ID
and v.type_cd = 'STMT_TYPE' 
order by base_data_seq_nbr 
```

页面按预期呈现，没有错误，页面源显示 `(onchange="javascript:$s(''P721_DOB_RBD'',this);")`仅应用于我目标元素的 javascript 设置。但是当我更改元素时，它似乎没有设置隐藏页面项的值`(P721_DOB_RBD)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:43:45.760

无意冒犯，这个标记非常可怕。花时间正确格式化和缩进你的代码！

至于您的问题，[这是 $s 的 Oracle apex javascript apis 参考](http://docs.oracle.com/cd/E37097_01/doc/doc.42/e35127/javascript_api.htm#CHDFBJGD)

> ```
> $s(pNd, pValue, pDisplayValue, pSuppressChangeEvent) 
> ```
> 
> 给定一个 DOM 节点或字符串 ID (pNd)，此函数设置 Application Express 项目值并考虑项目类型。pDisplayValue 是可选的。如果用于属性“Input Field”=“Not Enterable, Show Display Value and Store Return Value”的“Popup LOV”类型的页面项，则用于设置“Input Field”。pValue 的值存储在隐藏的返回字段中。pSuppressChangeEvent 参数是可选的。传递 FALSE 或不传递此参数值会导致正在设置的项目触发更改事件。传递 TRUE 以防止为正在设置的项目触发更改事件。
> 
> 参数
> 
> ```
> pNd (DOM Node | string ID)
> pValue  (String | Array)
> pDisplayValue(String)
> pSuppressChangeEvent(Boolean) 
> ```

传下去是`this`不行的。当你想传递一个值时，这将传递对象。由于您正在创建`APEX_ITEM.DATE_POPUP`将生成项目的 a，因此在事件发生时`input`您将需要该`value`项目的。`change`您可以通过使用`$v`( [ref](http://docs.oracle.com/cd/E37097_01/doc/doc.42/e35127/javascript_api.htm#autoId4) )

> ```
> $v(pNd) 
> ```
> 
> 给定一个 DOM 节点或字符串 ID (pNd)，此函数返回 Application Express 项的值，其格式与发布时的格式相同。
> 
> 参数
> 
> ```
> pNd (DOM Node | string ID) 
> ```

所以，试试这个：

```
(onchange="javascript:$s(''P721_DOB_RBD'',$v(this));") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T20:09:18.820

多年后 - 要格式化代码，使用 sqldeveloper 将代码复制到 sqldeveloper sql 工作表，右键单击并选择格式。

```
 SELECT APEX_ITEM.HIDDEN(2,base_data_seq_nbr)
  ||APEX_ITEM.HIDDEN(6,
  CASE
    WHEN SUBSTR(description,0,1)= chr(49838)
    THEN SUBSTR(description,-(LENGTH(description)-1))
    ELSE description
  END)
  ||APEX_ITEM.HIDDEN(7,
  CASE
    WHEN SUBSTR(description,0,1)= chr(49838)
    THEN 1
    ELSE 0
  END)
  ||APEX_ITEM.HIDDEN(9, data_select(REPLACE(REPLACE(trim(SUBSTR(field_name,-(LENGTH(field_name)-instr(field_name,',',1)))),'BSBR',''),'C','L'), SUBSTR(field_name,0,instr(field_name,',',1)-1), :P721_XCASE,:P721_XRETSTAT,:P721_XID,:P721_XCUSNUM,:P721_DB_ID))
  ||
  CASE
    WHEN SUBSTR(description,0,1)= chr(49838)
    THEN '<img src="/i/themes/theme_2/images/required.gif" alt="Value Required" alt="Value Required" />'
    ELSE NULL
  END AS req_ind,
  CASE
    WHEN SUBSTR(description,0,1)= chr(49838)
    THEN SUBSTR(description,-(LENGTH(description)-1))
    ELSE description
  END AS description,
  APEX_ITEM.DATE_POPUP(1,rownum, to_date(data_select(REPLACE(REPLACE(trim(SUBSTR(field_name,-(LENGTH(field_name)-instr(field_name,',',1)))),'BSBR',''),'C','L'), SUBSTR(field_name,0,instr(field_name,',',1)-1), :P721_XCASE,:P721_XRETSTAT,:P721_XID,:P721_XCUSNUM,:P721_DB_ID),'MM/DD/YYYY'),'MM/DD/YYYY',10,10,'onkeyup="javascript:FormatDate(this);"'
  ||
  CASE
    WHEN instr(SUBSTR(field_name,1,4),'DOB,',1)>0
    THEN ' onchange="javascript:$s(''P721_DOB_RBD'',this);"'
  END,'datepicker_'
  ||rownum)
END
END AS field_format
FROM bcvsown.bcvs_base_data
INNER JOIN v_lookup v
ON v.value_seq = stmt_type
LEFT JOIN
  (SELECT * FROM apex_collections WHERE collection_name = 'ERR_COLLECTION'
  ) ac
ON base_data_seq_nbr=ac.n001
WHERE caseno        = :P721_XCASE
AND v.value_cd      =
  CASE
    WHEN :P721_XDE_SEQ > 1
    THEN DECODE(:P721_XIS_BSRS,'true','BSRS','BET')
    ELSE v.value_cd
  END
AND db_id     = :P721_DB_ID
AND v.type_cd = 'STMT_TYPE'
ORDER BY base_data_seq_nbr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T06:20:06.707

如果要在Javascript中设置值应用项，除了一个没有办法。您可以在 Javascript 使用中设置页面级别的项目：

```
 $s(':P12_Item','value'); 
```

您可以使用以下方法获取页面级项目值：

```
$v('page item') 
```

您可以使用 JS 在 JS 中获取应用程序项值

```
 &APP_ITEM. 
```

但是你不能在Javascript中设置价值应用项。您必须创建一个流程来设置应用程序项目值并从 Javascript 顶点 Ajax 调用此流程。

```
<script>
var get = new htmldb_Get(null,&APP_ID.,'APPLICATION_PROCESS=SET_APS_CASEIDS',0);

get.addParam('x01',$caseIds);

gReturn = get.get();
if (gReturn) {
window.location='f?p=&APP_ID.:66:&SESSION.::NO:66';
}
</script> 
```

在我的情况下，我正在使用 Ajax 在应用程序项中设置值并处理并重定向到其他页面。该页面将使用应用程序项值。

申请流程代码。

首先从共享组件创建应用程序项。

```
Name: APS_CASEIDS
Session State protection:unrestricted 
```

从共享组件创建应用程序进程。

```
Name:SET_APS_CASEIDS (Name should be match in ajax call).
Process point:On Demand:run this application process when requested by process.
Process Text:

BEGIN

owa_util.mime_header('text/html', FALSE );
htp.p('Cache-Control: no-cache');
htp.p('Pragma: no-cache');
owa_util.http_header_close;

    APEX_UTIL.SET_SESSION_STATE('APS_CASEIDS',APEX_APPLICATION.G_X01);
END; 
```

# vb.net - VB.NET 应用程序在使用过程中随机生成另一个自身实例

> ID：13052917
> 
> 赞同：1
> 
> 时间：2012-10-24T15:54:48.233
> 
> 标签：vb.net, winforms, random, process, spawn

我有一个 Windows 窗体应用程序，我遇到了一些零星的问题。该应用程序将随机启动/生成另一个自身实例，而没有任何警告或原因。我在整个应用程序中只使用了一次 Process.Start（15 个表单/文件和大约 5000 行代码），它调用 net use 命令来映射网络驱动器。

我无法在我的测试中重现这一点，因此我将该项目设为 Windows Assembly Framework 单实例应用程序（我知道这个的优点/缺点）。这显然已经停止了应用程序的任何其他实例的运行，但现在他们的程序将随机间隔最小化并捕捉到他们正在运行的另一个应用程序。我不确定这是否相关，但它们听起来确实有点接近舒适！

任何想法/指针/想法表示赞赏。

谢谢，

杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:00:41.910

如果应用程序在某些时候调用[Application.Restart](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.restart.aspx) ，就会发生这种情况。

# wpf - WPF 中没有 Click 事件处理程序的 Treeview ContextMenu

> ID：13052922
> 
> 赞同：0
> 
> 时间：2012-10-24T15:55:02.487
> 
> 标签：wpf, treeview, contextmenu

我有一个 TreeView，我希望能够将子级添加到它以及它绑定到的 Linq to SQL 数据库中。

我能想到的最好方法（在我的脑海中）是让用户右键单击父节点并选择从上下文菜单中添加新项目。

我添加了一个上下文菜单，但是当我尝试在后端对其进行编程时，它说没有与之关联的事件处理程序。

```
 <TreeView Name="TreeView1" Margin="3" ItemsSource="{Binding ElementName=ManufacturerWarranty, Path=ManufacturerQuery, UpdateSourceTrigger=PropertyChanged}">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Path=WarrantyList}">
                    <TextBlock Name="txtManufacturerName" Text="{Binding Path=ManufacturerName}">
                        <TextBlock.ContextMenu>
                            <ContextMenu>
                                <MenuItem Name="mnuAddRecord" Header="Add Year Record"></MenuItem>
                            </ContextMenu>
                        </TextBlock.ContextMenu>
                    </TextBlock>
                    <HierarchicalDataTemplate.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Years}">
                                <TextBlock.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Name="mnuDelRecord" Header="Remove Year Record"></MenuItem>
                                    </ContextMenu>
                                </TextBlock.ContextMenu>
                            </TextBlock>
                        </DataTemplate>
                    </HierarchicalDataTemplate.ItemTemplate>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView> 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:05:33.657

你忘了`add handler`哪个会执行`click of menuItem`

```
<ContextMenu>
  <MenuItem Name="mnuAddRecord" Header="Add Year Record" Click="HandlerInClass"/>
</ContextMenu> 
```

# php - 如果是 ARRAY 值，则使用其他 ARRAY 值

> ID：13052923
> 
> 赞同：0
> 
> 时间：2012-10-24T15:55:04.077
> 
> 标签：php, arrays, json

```
{
    "Group": [
        {
            "name": "HolderOne",
            "operators": [
                {
                    "username": "ken",
                    "status": 3
                },
     .....etc..... 
```

大家好，

我已经成功地从我的 JSON 提要中提取了数据，感谢 SO 的帮助......但是......现在挠头了。

通过使用`print_r($obj->....)`，我能够从我的提要中提取所有信息，但我想要做的是......

**从上面看，如果用户名的值为 'ken'，则仅显示关联的状态 3。**

我认为它可能使用 print_r 分配给每个`Array(?)`例如上面的值`[0]`- 现在我不知道该值是什么，所以我可以获取`[n]`每个用户名的值以显示状态吗？

我在这里稍微超出了我的舒适区......不确定这是一个开始的 PHP 还是 JSON 问题。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:01:56.340

这是你想要的？

```
foreach($obj->Group as $group)
{
    foreach($group->operators as $operator)
    {
       if($operator->username == "ken")
       {
           echo $operator->status;
       }
    }
} 
```

# jquery - ReferenceError: jQuery 没有在 Coupons-for-Gravity-Forms 上定义

> ID：13052927
> 
> 赞同：1
> 
> 时间：2012-10-24T15:55:16.687
> 
> 标签：jquery, forms, wordpress, gravity

我有一个 wordpress 网站。我已经在我的重力表单副本中安装了一个优惠券插件，当我去那里测试它时，它在表单预览页面上运行良好，但是，我无法让该字段在网站的前端工作。我得到一个 ReferenceError: jQuery is not defined 出现。

已测试 jquery 已正确加载到 header 标记中并以正确的顺序加载。我尝试通过标准默认主题更改主题。并尝试将 jQuery 重新定义为其他东西。

该站点上运行的唯一插件是更好的安全性，因此默认安装之外没有任何内容。我正在运行 WP 3.4.2 和重力形式 1.6.9 和在 github 上找到的 Coupons-for-Gravity-Forms。

我的测试网站是[http://monkfish-uk.com/critical/order-form/](http://monkfish-uk.com/critical/order-form/)在表单第二页的优惠券字段旁边应该有一个按钮，上面写着应用。

我有点难过。

干杯

将要

仔细检查，实际上调用错误的页面中有一个 iframe，所以我猜测 iframe 中没有加载 jquery，这有关系吗？

# python - socket.io 喜欢 Python 2.7 + Bottle 框架

> ID：13052928
> 
> 赞同：4
> 
> 时间：2012-10-24T15:55:18.743
> 
> 标签：python, websocket, socket.io, bottle

我正在使用`Python 2.7 + Bottle`. 一切都很棒，python 是一种来自 ASP.NET 的神奇语言。我正在构建一个需要使用实时客户端/服务器通信的 Web 应用程序，并且想到了用于 node.js 的 socket.io。

我想知道如何使用 Python + 瓶实现类 socket.io。我已经阅读了[有关 bottle](http://bottlepy.org/docs/dev/async.html)的这篇文章，但我似乎仍然无法理解它是如何工作的——我需要安装什么，以及一切如何运作（代码示例？）。

我的下一个 Web 应用程序确实需要它，但需要帮助来理解我需要在我的项目中放入什么才能使其工作。我使用尚未稳定发布的“预览”代码没有问题。我正在Windows平台上开发。谢谢。

我也想知道它是否可扩展。我是否可以在后面使用redis，以便在多台服务器上运行我的网站时所有调用都会同步，所以当一个客户端发送数据时，连接到其他服务器的所有其他客户端都会得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:19:47.333

也许 websocket 可以帮助你，许多现代浏览器都支持这个协议，但是 bottle.py 现在不支持它，你可以从[tornado.websocket](https://github.com/facebook/tornado/blob/master/tornado/websocket.py)和[一些答案这里得到一些想法](https://stackoverflow.com/questions/10316374/bottle-websocket?rq=1)

因为可以保存每个连接，所以我想它可以在多台服务器上运行，但我从未实现。

由于瓶子是微框架，你应该自己做一些事情。

# linux - Linux 内存使用历史

> ID：13052930
> 
> 赞同：9
> 
> 时间：2012-10-24T15:55:22.157
> 
> 标签：linux, memory, process

我遇到了一个问题，我的服务器开始无法通过它的一些正常进程和检查，因为服务器的内存已完全填满并被占用。

我查看了日志记录历史，发现它杀死的是一些 Java 进程。

我使用“top”命令查看现在哪些进程占用了最多的内存（在问题解决之后），它是一个 Java 进程。所以本质上，我可以知道哪些进程现在占用了最多的内存。

我想知道的是，是否有办法查看在故障开始发生时哪些进程占用了最多的内存？也许 Linux 在特定时间跟踪或记录内存使用情况？我真的不知道，但如果我能看到那种细节，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-27T13:35:45.980

@Andy 已回答您的问题。但是，我想补充一点，以供将来参考使用监控工具。像[这样](https://unix.stackexchange.com/a/100748)的东西。这些将为您提供崩溃期间发生的情况，因为您显然无法始终监控所有服务器。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:00:32.717

你是说内核OOM杀手消失了吗？dmesg 中的日志说明了什么？请注意，您可以约束 JVM 使用固定的堆大小，这意味着它会在满时肯定失败，而不是让内核杀死其他东西。但是您的问题的一般答案是否定的：在 OOM 故障时无法可靠地运行**任何东西**，因为系统内存不足！充其量，您可以使用单独的进程来轮询进程表并记录进程大小以捕获内存泄漏情况等...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-26T08:21:57.513

默认情况下，linux 中没有内存使用历史记录，但是您可以使用一些简单的命令行工具来实现它，例如`sar`.

关于您的内存问题：如果 OOM-killer 在机器上造成了一些混乱，那么您有一个很好的选择来确保它不会再次发生（当然在减少 JVM 堆大小之后）。

默认情况下，Linux 内核分配的内存比实际分配的多。在某些情况下，如果没有用于内核任务的内存，这可能会导致 OOM-killer 杀死最消耗内存的进程。此行为由`vm.overcommit`sysctl 参数控制。

因此，您可以尝试将其设置为`vm.overcommit = 2`is`sysctl.conf`然后运行`sysctl -p`​​.

这将禁止过度使用，并使 OOM-killer 做出令人讨厌的事情的可能性非常低。您还可以考虑添加一点交换空间（如果您还没有）并设置`vm.swappiness`为一些非常低的值（例如`5`，默认值为`60`），因此在正常工作流程中，您的应用程序不会进入交换，但如果你的内存真的很短，它会暂时开始使用它，你甚至可以看到它`df`

**警告**如果您的服务器因内存过载，这可能会导致进程收到“无法分配内存”错误。在这种情况下：

1.  尝试限制应用程序的内存使用
2.  将其中的一部分移到另一台机器上

# wordpress - Wordpress - 从主题中提取页脚的静态 php 应用程序

> ID：13052933
> 
> 赞同：0
> 
> 时间：2012-10-24T15:55:39.700
> 
> 标签：wordpress

好吧，这几天我一直在打自己的脸……

我没有建立这个网站，我只是现在维护它......

这个 wordpress 站点在 wccm 文件夹中有一个自定义构建的 php 应用程序。因此，如果您访问 www.test.com/wccm，它会毫无问题地拉出索引页面，就像它是一个普通的非 wordpress 站点一样（请注意：这不使用模板，或文件夹内的任何 htaccess）。现在，当我复制文件夹并将其重命名为任何内容时，比如说 wccm2，然后转到 www.test.com/wccm2，页面会从我的主要 wordpress 主题加载页脚的**下半部分！**

这很疯狂，因为在顶部它会回显我们最后一个链接 html 代码的一半，如下所示：

est.com/contact-us/">联系我们

然后在其下，底部的版权信息，就像在我的主题页脚中一样。

我不知道为什么会这样，但我知道它与 wccm 文件夹中的 index.php 文件无关，因为无论我放什么 php 文件或它的名称是什么，它总是从我的主题页脚。

这是我的站点的主要 htaccess 文件，但看起来没有任何东西控制这个文件夹：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L] 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:06:18.070

呸，我想通了。

每当我将 FTP 文件上传到我的服务器上时，它都会使所有者/组成为“root”

在我使用 WinSCP 更改我的用户以匹配每个网站后，它运行良好。

cPanel 很痛苦。

# objective-c - ios中的多态方法

> ID：13052935
> 
> 赞同：0
> 
> 时间：2012-10-24T15:55:46.370
> 
> 标签：objective-c, ios, xcode4

我对在objective-c 中实现oops 概念有疑问。在objective-c 中是否可以实现全变。如何在objective-c中实现多态性。请举例说明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:23:32.590

```
- (HomeWorkResult *)homeWorkResultFromHomeWorkTask:(HomeWorkTask *)task
{
    if (!self.lazy) {
        return [self HW_performHomeWorkTask:task];
    }

    StackOverflowPost *post = [StackOverflow postHomeWorkTask:task];

    for (id user in post.responders) {
        // Here is the pholyorphism[sic].
        // First, test to see if a stack overflow user is able to do home work tasks.
        if ([user respondsToSelector:@selector(homeWorkResultFromHomeWorkTask:)]) {
            // Next, have the user do the home work task.
            HomeWorkResult *result = [user homeWorkResultFromHomeWorkTask:task];

            // If there is a result, return that result.
            if (result) {
                return result;
            }
        }
    }

    // Finally, if no stack overflow user does home work tasks or if there was no
    // result perform the task yourself.
    return [self HW_performHomeWorkTask:task];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:16:01.390

Every method, including class methods, is dynamic in Objective-C.

One very basic approach would be:

* * *

Declare the base interface:

```
@interface MONConstantColor : NSObject
- (UIColor *)color;
@end 
```

Define the base implementation:

```
@implementation MONConstantColor
- (UIColor *)color { return /* ...do/ret something appropriate */; }
@end 
```

Then create some variations:

```
@interface MONRedColor : MONConstantColor
@end

@implementation MONRedColor
- (UIColor *)color { return [UIColor redColor]; }
@end

@interface MONYellowColor : MONConstantColor
@end

@implementation MONYellowColor
- (UIColor *)color { return [UIColor yellowColor]; }
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T12:47:17.860

多态这个词意味着有多种形式

Objective-C 多态性意味着对成员函数的调用将导致执行不同的函数，具体取决于调用该函数的对象的类型。

考虑这个例子，我们有一个 Shape 类，它为所有形状提供基本接口。Square 和 Rectangle 派生自基类 Shape。

我们有方法 printArea 将展示 OOP 特征多态性。

```
#import <Foundation/Foundation.h>

@interface Shape : NSObject

{
    CGFloat area;
}

- (void)printArea;
- (void)calculateArea;
@end

@implementation Shape

- (void)printArea{
    NSLog(@"The area is %f", area);
}

- (void)calculateArea{

}

@end

@interface Square : Shape
{
    CGFloat length;
}

- (id)initWithSide:(CGFloat)side;

- (void)calculateArea;

@end

@implementation Square

- (id)initWithSide:(CGFloat)side{
    length = side;
    return self;
}

- (void)calculateArea{
    area = length * length;
}

- (void)printArea{
    NSLog(@"The area of square is %f", area);
}

@end

@interface Rectangle : Shape
{
    CGFloat length;
    CGFloat breadth;
}

- (id)initWithLength:(CGFloat)rLength andBreadth:(CGFloat)rBreadth;

@end

@implementation Rectangle

- (id)initWithLength:(CGFloat)rLength andBreadth:(CGFloat)rBreadth{
    length = rLength;
    breadth = rBreadth;
    return self;
}

- (void)calculateArea{
    area = length * breadth;
}

@end

int main(int argc, const char * argv[])
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    Shape *square = [[Square alloc]initWithSide:10.0];
    [square calculateArea];
    [square printArea];
    Shape *rect = [[Rectangle alloc]
    initWithLength:10.0 andBreadth:5.0];
    [rect calculateArea];
    [rect printArea];        
    [pool drain];
    return 0;
} 
```

使用此链接作为参考 [http://www.tutorialspoint.com/objective_c/objective_c_polymorphism.htm](http://www.tutorialspoint.com/objective_c/objective_c_polymorphism.htm)

# asp.net-mvc - Mvc Html.Label 或 Html.TextBox 不会创建

> ID：13052936
> 
> 赞同：1
> 
> 时间：2012-10-24T15:55:46.767
> 
> 标签：asp.net-mvc, html-helper

我正在为我正在处理的项目制作测试页面，到目前为止我已经取得了预期的进展，但我正在尝试从传递给视图的 List 模型创建 TextBoxes，但是，它似乎只是忽略我尝试过的任何东西。

```
<form id="form1" runat="server">
    <input id="btnsubmit" type="submit" name="Submit" onclick="Submit" />
    <div id="divControls">
     <% foreach (TextBox control in (this.Model as List<TextBox>))
        {
            Html.Label("lblLabel", control.Text);
            Html.TextBox(control.ID, control.Text, new { id = control.ID, style = "width:50", name = "txt" + control.ID });
        } %>
    </div>
</form> 
```

返回时控制器中的列表不为空。我不知道问题可能是什么。如果我抛出一个

某物

在 for 循环中，它执行了适当的次数，那么为什么不创建标签或文本框呢？起初我以为是我将它们添加到表单中，但我删除了表单标签，它仍然无法正常工作，所以我真的不知道，任何帮助将不胜感激。我对 MVC 比较陌生。

```
[HttpPost]
        public ActionResult Index(FormCollection form)
        {
            List<TextBox> controls = new List<TextBox>();
            foreach (String Key in form.Keys)
            {
                if (Key.Contains("txt"))
                {
                    TextBox textBox = new TextBox();
                    textBox.ID = Key;
                    textBox.Text = form.GetValues(Key)[0];
                    controls.Add(textBox);
                }
            }
            return View("Index", controls);
        } 
```

这是我的动作包，它很有帮助。另外，我还不够清楚，我在运行时使用 JQuery 向表单添加控件，然后该 Action 将成为提交的一部分，因此它必须将文本框发送回视图，以便它们不会被删除。就像我说的那样，我对整个 MVC 和异步事物都是新手，所以如果有更好的方法可以做到这一点，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:58:14.370

你没有打印 html

```
<% foreach (TextBox control in (this.Model as List<TextBox>))
        {%>
            <%=Html.Label("lblLabel", control.Text)%>
            <%=Html.TextBox(control.ID, control.Text, new { id = control.ID, style = "width:50", name = "txt" + control.ID })%>
<%        } %> 
```

您的代码正在循环通过控件，并且`Html.whaterever`正在返回一个字符串，但您没有对它做任何事情，只是将其丢弃。

您也不需要返回整个`TextBox`对象。这可能是低效的。只需返回一个`struct`或一个`class`包含您的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:58:02.987

`Html.Label`返回一个包含`<label>`标签的字符串。
您正在丢弃该字符串。

您需要通过 write 将其写入页面`<%= Html.Whatever() %>`。

# java - 单元测试困境：在不运行 JBoss 或 Spring 的情况下使用 JNDI 数据源

> ID：13052944
> 
> 赞同：19
> 
> 时间：2012-10-24T15:56:12.617
> 
> 标签：java, eclipse, unit-testing, junit, jndi

## 问题陈述

我希望能够对连接到数据库的方法运行 junit 测试。

## 当前设置

**Eclipse Java EE IDE** – Java 代码不使用任何框架。开发人员（包括我）希望在尝试将代码移动到 Spring 框架之前对当前遗留代码进行更健壮的测试，以便我们可以一路证明行为仍然正确。

**JBoss 4.2** – 供应商软件的版本限制（**Adobe LiveCycle ES2**）；我们的 Java Web 应用程序使用此 JBoss 设置来运行并使用 Adob​​e LiveCycle API。

*我们一直无法在 Eclipse 中成功运行供应商配置的 JBoss——*我们花了数周时间尝试这样做，包括联系为 Adob​​e LiveCycle 配置 JBoss 提供支持的公司。假设问题是 Eclipse 中设置的内存限制问题，但迄今为止，在 Eclipse 中成功启动 JBoss 服务器时更改内存设置失败。目前，让 JBoss 在 Eclipse 中运行的尝试被搁置。

数据库连接在 JBoss 启动时加载的 JNDI 数据源中定义。我们的 Web 应用程序和 Adob​​e LiveCycle 都需要创建到该数据源的连接。

## 代码

我在此代码片段中忽略了错误检查和类结构，以专注于问题的核心。希望这不会给其他人带来问题。方括号中的文本不是实际文本。

我们创建连接的代码是这样的：

```
Properties props = new Properties();
FileInputStream in = null;
in = new FileInputStream(System.getProperty("[Properties File Alias]"));
props.load(in);
String dsName = props.getProperty(“[JNDI data source name here]”); 
InitialContext jndiCntx = new InitialContext();
DataSource ds = (DataSource) jndiCntx.lookup(dsName);
Ds.getConnection(); 
```

我希望能够在不对其进行任何更改的情况下测试依赖于此代码的方法。

在 properties-service.xml 文件中引用属性文件别名：

```
 <!-- ==================================================================== -->
  <!-- System Properties Service                                            -->
  <!-- ==================================================================== -->

  <!-- Allows rich access to system properties.-->

<mbean code="org.jboss.varia.property.SystemPropertiesService" 
 name="jboss:type=Service,name=SystemProperties">
  <attribute name="Properties">
    [Folder Alias]=[filepath1]
    [Properties File Alias]=[filepath2]
  </attribute>
</mbean> 
```

来自位于 filepath2 的属性文件的片段

```
[JNDI data source name]=java:/[JNDI data source name] 
```

此数据源的 JNDI xml 文件设置如下：

```
<datasources>
  <local-tx-datasource>
    <jndi-name>[JNDI data source name here]</jndi-name>
    <connection-url>jdbc:teradata://[url]/database=[database name]</connection-url>
    <driver-class>com.teradata.jdbc.TeraDriver</driver-class>
    <user-name>[user name]</user-name>
    <password>[password]</password>
    <!-- sql to call on an existing pooled connection when it is obtained from pool -->
    <check-valid-connection-sql>SELECT 1+1</check-valid-connection-sql>
  </local-tx-datasource>
</datasources> 
```

## 我对解决方案可能在哪里的想法

Is there something I can do in a @BeforeClass method in order to make the properties the above code is looking for available without JBoss? Maybe somehow using the setProperty method of the java.util.Properties class? I would also like to use the same JNDI xml file that JBoss reads from, if possible, in order to reduce duplicate configuration settings.

So far all of my research ends with the advice “Use Spring”, but I don’t think we’re ready to open that can of worms yet. I am not an expert in JBoss, but if more details of our JBoss setup are needed for a helpful answer, I will do my best to get them, though I will likely need some pointers on where to look.

**Stackoverflow Research references:**
[Jndi lookup in junit using spring](https://stackoverflow.com/questions/9696195/jndi-lookup-in-junit-using-spring)
[Out of container JNDI data source](https://stackoverflow.com/questions/1615417/out-of-container-jndi-data-source)
**Other research references:**
[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html)
[http://docs.oracle.com/javase/jndi/tutorial/basics/prepare/initial.html](http://docs.oracle.com/javase/jndi/tutorial/basics/prepare/initial.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T16:43:49.810

There's a very simple answer to your problem, but you're not going to like it: **Don't.**

By definition, a unit test should verify the functionality of a single unit (the size of which may vary, but it should be self-sufficient). Creating a setup where the test depends upon web services, databases, etc. is counter-productive: It slows down your tests, it includes a gzillion of possible things that could go wrong (failed network connections, changes to data sets, ...) during the test, which have nothing to do with the actual code you are working on, and most importantly: It makes testing much, much harder and more complicated.

Instead, you should be looking for ways to **decouple** the legacy code from any data sources, so that you can easily substitute [mock objects](http://en.wikipedia.org/wiki/Mock_object) or similar [test doubles](http://en.wikipedia.org/wiki/Test_double) while you are testing.

You *should* create tests to verify the integrity of your entire stack, but those are called **integration tests**, and they operate at a higher level of abstraction. I personally like to defer writing those until the units themselves are in place, tested and working - at least until you have come to a point where you no longer expect changes to service calls and protocols on a daily basis.

In your case, the most obvious strategy would be to encapsulate all calls to the web service in one or more separate classes, extract an interface that the business objects can depend on, and use mocks implementing that same interface for unit testing.

For example, if you have a business object that calls an address database, you should copy the JNDI lookup code into a new service class called `AddressServiceImpl`. Its public methods should mimic all the method signatures of your JNDI datasource. Those, then, you extract to the `AddressService` interface.

You can then write a simple integration test to verify that the new class works: Call all the methods once and see if you get proper results. The beauty of this is that you can supply a JNDI configuration that points to a test database (instead of the original one), which you can populate with test datasets to make sure you always get the the expected results. You don't necessarily need a JBoss instance for this (though I have never had any problems with the eclipse integration) - any other JNDI provider should work, as long as the data source itself behaves the same way. And to be clear: You test this once, then forget about it. At least until the actual service methods ever change.

Once you verified that the service is functional, the next task is to go through all the dependent classes and replace the direct calls to the datasource with calls to the AddressService interface. And from that point on, you have a proper setup to implement unit tests on the actual business methods, without ever having to worry about things that should be tested elsewhere ;)

**EDIT**

I second the recommendation for [Mockito](http://code.google.com/p/mockito/). Really good!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T17:38:08.627

I had a very similar situation with some legacy code in JBoss AS7, for which refactoring would have been *way* out of scope.

I gave up on trying to get the datasource out of JBoss, because it does not support remote access to datasources, which I confirmed in trying.

Ideally though, you don't want to have your unit tests dependant on a running JBoss instance in order to run, and you really don't want them to have to run *inside* of JBoss. It would be counter to the concept of self-contained unit tests (even though you'll still need the database to be running :) ).

Fortunately, the initial context used by your app doesn't *have* to come from a running JBoss instance. After looking at [this article](http://blogs.oracle.com/randystuph/entry/injecting_jndi_datasources_for_junit) referred to by an answer to [another question](https://stackoverflow.com/questions/3461310/how-can-i-bind-a-datasource-to-an-initialcontext-for-junit-testing), I was able to create my own initial context, populate it with my own datasource object.

This works without creating dependencies in the code because the classes under test typically run inside the container, where they simply do something like this to get the container-provided context:

```
InitialContext ic = new InitialContext();
DataSource ds = (DataSource)ic.lookup(DATA_SOURCE_NAME); 
```

They don't need to specify any environment to the constructor, because it has already been set up by the container.

In order for your unit tests to stand in for the container and provide a context, you create it, and bind a name:

```
InitialContext ic = new InitialContext();

// Construct DataSource
OracleConnectionPoolDataSource ds = new OracleConnectionPoolDataSource();
ds.setURL("url");
ds.setUser("username");
ds.setPassword("password");

ic.bind(DATA_SOURCE_NAME, ds); 
```

This needs to happen in each test class's `@BeforeClass` method.

Now the classes being tested get *my* initial context when running in unit tests, and the *container's* when deployed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:58:59.903

If you are using tools like Git and Maven this can be done easily with them. Check in a UnitTest specific properties file along side development and qa. Use Maven and its `profile` facilities to specify a profile that copies your UnitTest file over to where it should go, same with your dev and qa when run with different profiles active.

There is no magic to this; Spring introduces complexity more than anything. it definitly doesn't introduce simplicity like this.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:19:54.677

You can run your tests with a fake `InitialContext` implementation, which returns whatever you need from calls to `lookup(String)`.

A mocking/faking tool which allows such fake implementations is [JMockit](http://code.google.com/p/jmockit). The fake implementation would be written like the following:

```
public class FakeInitialContext extends MockUp<InitialContext>
{
    @Mock
    public Object lookup(String name)
    {
        // Return whatever is needed based on "name".
    }
} 
```

To apply it to a JUnit/TestNG test run, add jmockit.jar to the runtime classpath (before junit.jar if this is the case) and set the "jmockit-mocks" system property to the name of the fake class: `-Djmockit-mocks=com.whatever.FakeInitialContext`.

Of course, you can also write true JUnit/TestNG unit tests where any dependency can be easily mocked, by using the "Expectations & Verifications" mocking API.

(PS: For full disclosure, I am the creator of the JMockit project.)

# .net - PackageManager.FindPackagesForUser 为允许为空的参数抛出 ArgumentNullException？

> ID：13052946
> 
> 赞同：0
> 
> 时间：2012-10-24T15:56:18.930
> 
> 标签：.net, windows-8, windows-runtime, windows-store, argumentnullexception

我正在尝试通过使用 [`PackageManager.FindPackagesForUser(string usersid, string packagename, string publisher)`

MSDN[文档](http://msdn.microsoft.com/en-us/library/windows/apps/br240967.aspx)特别说

> 用户安全 ID
> 
> ```
> Type: System.String [.NET] | Platform::String [C++]
> 
> The user security identifier (SID). If this parameter is null, the packages are retrieved for the current user. 
> ```

所以，我这样称呼它`FindPackageForUser(null, name, publisher)`，名称和发布者都不是空的（我在调试时检查过）。然而，它抛出了一个`ArgumentNullException`

这是这门课的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:36:25.107

文档是错误的。 [Windows 运行时中没有“空字符串”。](https://stackoverflow.com/a/12981103/151292) 传递一个空字符串以枚举当前用户的包。

# wix - WIX 刻录卸载？

> ID：13052950
> 
> 赞同：8
> 
> 时间：2012-10-24T15:56:34.563
> 
> 标签：wix, windows-installer, wix3.6, burn

我有一个 WIX_bundle (V1.0.0.0)，它安装了 4 个第三方 MSI 的版本 (5.0.0.0)。现在我的第三方 MSI 的新版本已经更新（6.0.0.0）。我使用 (v2.0.0.0) 创建了 WIX_Bundle 的新版本，并且两个 WIX 捆绑包具有相同的升级代码。我想要发生的是新版本的 WIX_Bundle 应该卸载以前的版本（v1.0.0.0 和 4 个 MSI）并安装新版本（v2.0.0.0 和新的 4 个 MSI）。

但是当我尝试安装 WIX_BUndle V2.0.0.0 时，它会尝试安装新版本，而不是卸载以前的版本。我在这里错过了什么吗？

我也添加了 RelatedBundle Action="Upgrade" Id="$(var.UpgradeCode)" 。但什么都没有做的伎俩？

我的预期是否正确，卸载应该在新版本安装之前发生？我希望卸载之前的 4 个 MSI，无论它们是否有升级，然后在新的 WIX_Bundle (v2.0.0.0) 中安装新版本。我可以强迫这发生吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:53:13.153

我错了。WIX 捆绑包在捆绑包级别和内部 MSI 级别处理升级。所以一切都很好。当我从 v1.0.0.0 升级到 v2.0.0.0 时，它将卸载所有 4 个 MSI 的 5.0.0.0 并正确安装 6.0.0.0 版本（前提是您的 MSI 应该升级）。

# javascript - 使用 QTReport.exe 打开 XML

> ID：13052958
> 
> 赞同：0
> 
> 时间：2012-10-24T15:57:07.557
> 
> 标签：javascript, file-io, open-with

我正在编写一个 Javascript 代码。我必须在其中使用 QTReport.exe 打开一个 XML 文件。QTReport.exe 用于读取 xml 文件并显示 QTP 执行结果。我可以在 Windows 资源管理器中执行以下操作。我做到了，右键单击 XML 文件并选择“打开方式”选项并将程序指定为“C:\Bin\QTReport.exe”。我的问题是，是否有任何 API 或函数可以指定为使用 QTReport.exe 打开 XML 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:12:14.487

对 qtreport.exe 使用以下命令行参数：

```
bin_dir\qtreport.exe -r path_to_xml_file 
```

# php - PHP：在数组中查找空值

> ID：13052961
> 
> 赞同：0
> 
> 时间：2012-10-24T15:57:19.977
> 
> 标签：php, arrays

如果用户提交的其中一个框为空，我想显示错误`<input>`，但我也想处理没有空名称的框。

这是表格：http: [//jsfiddle.net/Draven/rEPXM/27/](http://jsfiddle.net/Draven/rEPXM/27/)

PHP：

```
if(isset($_POST['addFolder']))
{    
    foreach($_POST['folder'] as $id => $value)
    {
        $database->query('INSERT INTO folders (name) VALUES (?)', array($value));
    }
    $success[] = "Folder(s) added";                 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:03:30.210

尝试如下

```
foreach($folder as $id => $value)
{
    if($value){
      $database->query('INSERT INTO folders (name) VALUES (?)', array($value));
    }
    else {
       $error[]=$id;
    }
} 
```

$error 包含所有没有价值的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:11:09.443

试试这个：

```
$folder = isset($_POST['folder']) && is_array($_POST['folder'])
        ? $_POST['folder']
        : array();
$errors = array();
foreach ($folder as $id => $value) {
    $value = is_array($value) ? '' : trim($value);
    if ($value == '') {
        $errors[$id] = 'Empty value';
        continue;
    }

    $database->query('INSERT INTO folders (name) VALUES (?)', array($value));
} 
```

编辑您的模板：

```
...

<div id="foldercontainer">
<?php foreach ($errors as $error): ?>
    <div>
        <div><?php echo $error ?></div>
        <input name="folder[]" type="text" size="20" value="" />
    </div>
<?php endforeach ?>
</div>

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:58:29.760

`if(!isset($folder) || $folder === "")`

但我不明白如果你`$folder`是空的，为什么你要运行查询......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:30:22.883

补充所说的。当您想测试一个值是否为空时，请使用 trim()。你不想用空值命名文件夹，对吧？​​：

```
$folder = array('aaaa', 'bbbb', ' ', '    ');

foreach($folder as $id => $value) {
    $value = trim($value);

    if(!empty($value)) {
      var_dump($value);
    } else {
       $error[]=$id;
    }
} 
```

在上升的路上，输出将是：

```
string 'aaaa' (length=4)

string 'bbbb' (length=4) 
```

现在，不使用 trim() 并测试它是否不为空，输出是（这是一个错误）：

```
string 'aaaa' (length=4)

string 'bbbb' (length=4)

string ' ' (length=1)

string '    ' (length=4) 
```

# sql - 如何从 2 个不同的视图将 2 个列连接在一起？

> ID：13052963
> 
> 赞同：1
> 
> 时间：2012-10-24T15:57:36.343
> 
> 标签：sql, oracle

使用 oracle SQL 开发人员，

我有两个具有不同列的视图。如何将第 1 列从视图 A 连接到视图 B？我想`AR_INVOICE_INQ_V.CLI_NAME CLI_NAME`从视图 B 加入视图 A。

## 查看 A

```
CREATE OR REPLACE FORCE VIEW "KPRD"."AC_INPUT_AUDIT" ("CLIENT", "SEQUENCE_CODE", "EMPLOYEE", "ORIGINAL_DATE", "HOURS_SPENT", "LONG_DESCRIPTION", "TIME_AT_ACTUAL", "MANAGER")
AS
  SELECT CLIENT,
    SEQUENCE_CODE,
    EMPLOYEE,
    ORIGINAL_DATE,
    HOURS_SPENT,
    LONG_DESCRIPTION,
    TIME_AT_ACTUAL,
    MANAGER
  FROM TIME_DETAILS
  WHERE MANAGER BETWEEN 'AAGG' AND 'AZJE'
  AND ORIGINAL_DATE    > '28/SEP/2012'
  AND TIME_AT_ACTUAL ! = 0; 
```

## 视图 B

```
CREATE OR REPLACE FORCE VIEW "KPRD"."AC_AR_INV_BAL" ("CLIENT", "CLI_NAME", "PARTNER", "PAR_NAME", "MANAGER", "REFERENCE", "STATUS_CODE", "INVOICE_DATE", "TIME_BILLED", "GROUP_CLIENT_CODE", "GRPCLI_NAME", "INVOICE_BALANCE")
AS
  SELECT AR_INVOICE_INQ_V.CLIENT CLIENT,
    AR_INVOICE_INQ_V.CLI_NAME CLI_NAME,
    AR_INVOICE_INQ_V.PARTNER PARTNER,
    AR_INVOICE_INQ_V.PAR_NAME PAR_NAME,
    AR_INVOICE_INQ_V.MANAGER MANAGER,
    AR_INVOICE_INQ_V.REFERENCE REFERENCE,
    AR_INVOICE_INQ_V.STATUS_CODE STATUS_CODE,
    AR_INVOICE_INQ_V.INVOICE_DATE INVOICE_DATE,
    AR_INVOICE_INQ_V.TIME_BILLED TIME_BILLED,
    AR_INVOICE_INQ_V.GROUP_CLIENT_CODE GROUP_CLIENT_CODE,
    AR_INVOICE_INQ_V.GRPCLI_NAME GRPCLI_NAME,
    AR_INVOICE_INQ_V.INVOICE_BALANCE
  FROM AR_INVOICE_INQ_V
  WHERE MANAGER BETWEEN 'AAGG' AND 'AZGG'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:51:45.957

为了加入`column 1`from `view A`into `view B`，表或视图都必须具有`column 1`. 如果`AR_INVOICE_INQ_V.CLI_NAME CLI_NAME`要从`view B`入入`view A`，`View A`必须要有栏目`CLI_NAME`。否则，您无法基于`CLI_NAME`列进行连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:01:22.370

连接视图的语法与表的相同。我不完全确定您要实现的目标，但我*认为*您想要 view 中的所有列和 view中的`A`另外一列`B`。假设`CLIENT`这两种语法都有一个共同的价值，就像：

```
SELECT AIA.CLIENT,
    AIA.SEQUENCE_CODE,
    AIA.EMPLOYEE,
    AIA.ORIGINAL_DATE,
    AIA.HOURS_SPENT,
    AIA.LONG_DESCRIPTION,
    AIA.TIME_AT_ACTUAL,
    AIA.MANAGER,
    AAIB.CLI_NAME
FROM AC_INPUT_AUDIT AIA
JOIN AC_AR_INV_BAL AAIB ON AAIB.CLIENT = AIA.CLIENT; 
```

这似乎假设两个视图中的记录之间存在一对一的关系，这似乎不太可能，特别是因为`MANAGER`过滤器不同。因此，您可能会得到与预期不同的一组结果，可能存在重复和/或缺失记录。外连接可能会解决这个问题，但也可能会使情况变得更糟，因此您需要更清楚视图之间的关系以及您想要实现的目标。

如果您可以访问基础表，您可能会发现加入这些表的性能更高，但您可能需要两种方式都对其进行测试。

# html - Z-Index 和 iFrame

> ID：13052965
> 
> 赞同：0
> 
> 时间：2012-10-24T15:57:48.853
> 
> 标签：html, css, iframe

我正在使用 iframe 将简单的 html 和 css 嵌入到另一个应用程序中。在我的代码中，当您将鼠标悬停在页面元素上时，我使用 CSS 创建上下文菜单。但是，当我使用悬停菜单靠近 iframe 的边缘时，它会被截断并停留在框架下方。我尝试了许多不同的 z-index 变体，但没有任何效果。有没有办法让这个菜单显示在父窗口上方？

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:08:00.313

属于 CSS 堆叠上下文的任何位置和规则都仅限于当前文档。这不能使用`z-index`，因为`iframe`-contents 是一个完全不同的文档。你不能让任何东西从框架中“流血”出来。如果你想有一个覆盖，根本不要使用`iframe`。

# c# - 基于DTO自动生成EF“where”子句

> ID：13052970
> 
> 赞同：2
> 
> 时间：2012-10-24T15:57:58.437
> 
> 标签：c#, entity-framework, automapper

我正在尝试将参数自动生成到 IQueryable.Where，这样我就可以从我的实体框架代码第一个数据上下文中选择实体，而无需编写和连接大量繁琐的映射代码。

我的项目包含一堆 DTO，如下所示：-

```
class FooDto
{
  public string SomeProperty { get; set; }
  public string SomeOtherProperty { get; set; }
} 
```

还有一堆看起来像这样的实体：-

```
class Foo
{
  public string SomeProperty { get; set; }
  public string SomeOtherProperty { get; set; }

  // Some other properties here.
} 
```

DTO 包含识别数据库中某些实体子集所需的字段。我使用 DTO 查询实体的 IQueryable：-

```
var result = queryable.Where(
  x => x.SomeProperty == dto.SomeProperty
    && x.SomeOtherProperty == dto.SomeOtherProperty) 
```

实际属性有所不同，但查询始终具有**“实体上的所有属性都匹配 DTO 上的所有匹配属性”的形式**。没有更复杂的查询对象功能。

有许多 DTO 和实体。创建/维护和连接所有这些谓词是一个具有挑战性的架构问题。我们目前正在使用策略模式：-

```
public class FooDtoSelectStrategy : ISelectStrategy<FooDto, FooEntity>
{
  public Func<FooEntity, bool> GetPredicate(FooDto dto)
  {
    return x => x.SomeProperty == dto.SomeProperty
             && x.SomeOtherProperty == dto.SomeOtherProperty;
  }
} 
```

除了一堆 ninject 绑定之外，我们已经有了几十个这样的绑定，随着我们的域的扩展，我们正在寻找数百个。

我们有一个类似的挑战，将值从实体映射到我们使用 AutoMapper 解决的 DTO。

**automapper（或类似工具）可以创建这些谓词并允许我们实现单个`GenericPredicateProvider<TDto, TEntity>`?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:48:25.490

**Update:-**

Here's my prototype using AutoMapper's type mapping to handle the simple case. It'll need more work later if I want it to handle e.g. complex type mapping, but for now this is doing the job.

```
internal class AutoMapperSelectStrategy<TEntity, TIdentity> :
    IIdentitySelectStrategy<TEntity, TIdentity>
{
    private IMappingEngine mappingEngine;

    internal AutoMapperSelectStrategy(
        IMappingEngine<TEntity, TIdentity> mappingEngine)
    {
        this.mappingEngine = mappingEngine;
    }

    public Expression<Func<TEntity, bool>> GetPredicateForIdentity(
        TIdentity identity)
    {
        var entityParameter = Expression.Parameter(typeof(TEntity));

        var identityScope = Expression.MakeMemberAccess(
            Expression.Constant(
                new ExpressionScope<TIdentity>() { Value = identity }),
                typeof(ExpressionScope<TIdentity>).GetProperty("Value"));

        var equalityExpressions = this.MakeEqualityExpressions(
            identityScope, entityParameter);

        var aggregateEquality = equalityExpressions.Aggregate(
            (x, y) => Expression.AndAlso(x, y));

        var predicate = Expression.Lambda<Func<TEntity, bool>>(
            aggregateEquality, entityParameter);

        return predicate;
    }

    public IEnumerable<BinaryExpression> MakeEqualityExpressions(
        MemberExpression identityScope, ParameterExpression entityParameter)
    {
        var mapExpression =
            mappingEngine.CreateMapExpression<TIdentity, TEntity>();

        var body = mapExpression.Body as MemberInitExpression;
        var bindings = body.Bindings;

        foreach (var binding in bindings.OfType<MemberAssignment>())
        {
            var memberExpression = binding.Expression as MemberExpression;

            var left = Expression.Property(
                identityScope, memberExpression.Member as PropertyInfo);
            var right = Expression.Property(
                entityParameter, binding.Member as PropertyInfo);

            var equalityExpression = Expression.Equal(left, right);

            yield return equalityExpression;
        }
    }

    private class ExpressionScope<TDto>
    {
        public TDto Value { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:37:32.620

您所做的实际上称为[规范模式](http://en.wikipedia.org/wiki/Specification_pattern)。所以你基本上重新设计了轮子，想出了一个稍微不同的轮子，基本上是一样的。

您可以使用诸如 T4 模板之类的东西来自动生成这些 Predicate 提供程序，但是您在一个对象中查询相同的对象似乎有点愚蠢。您已经拥有该对象，那么为什么要在所有字段中查询完全相同的内容呢？

# php - 在 wordpress 中集成数据库

> ID：13052971
> 
> 赞同：0
> 
> 时间：2012-10-24T15:57:58.920
> 
> 标签：php, mysql, sql, database, wordpress

我想知道你们是否可以帮助我。我们正在我们的网站上开发一个新的论坛组件。该论坛是使用 PHP 和 MySQL 创建的，我们希望将其与 Wordpress 集成。

问题是，我们不想创建一个全新的注册论坛，因为这将迫使用户创建两个帐户（一个用于站点，一个用于论坛），这对用户不友好。

因此，如果您知道一种将 wordpress 网站用户数据库与外部数据库一起使用的方法，那就太好了。

另一种选择是创建一个全新的数据库，但随后我们会强制用户退出 Wordpress 网站上的评论部分。因此，如果可以创建一个新的数据库，允许他们在网站和论坛上使用相同的帐户，那就太棒了。

我希望这里有人知道如何合并这两个数据库，请帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:41:59.437

Wordpress 数据库架构在此处记录。

[http://codex.wordpress.org/Database_Description](http://codex.wordpress.org/Database_Description)

特别是用户表在这里。

[http://codex.wordpress.org/Database_Description#Table:_wp_users](http://codex.wordpress.org/Database_Description#Table:_wp_users)

Wordpress 是开源的，因此您可以查看它的代码以了解它如何向其数据库验证自己的身份。您的应用程序将需要做同样的事情。

如果您的应用程序与您共享用户的 Wordpress 系统位于同一个域中，您可能能够弄清楚如何使用 Wordpress 用户身份验证浏览器 cookie 来实现单点登录方案。

[http://codex.wordpress.org/WordPress_Cookies](http://codex.wordpress.org/WordPress_Cookies)

Wordpress 开发人员创建了一个名为 bbpress 的论坛系统。您可以考虑使用它或分叉它。它具有用户级集成。

[http://bbpress.org/](http://bbpress.org/)

[Wordpress 在http://wordpress.stackexchange.com](http://wordpress.stackexchange.com)有自己的 stackExchange 站点

# android - 如何清除任务的后台堆栈并仅保留新活动？

> ID：13052972
> 
> 赞同：6
> 
> 时间：2012-10-24T15:57:59.007
> 
> 标签：android

当我开始新的活动意图时，我想清除后台堆栈。

我的问题的确切情况如下：我有这样的活动 A > B > C > D > E “A”是注册活动，“B”是确认注册活动。我希望当用户开始活动“B”时他不能再回到活动“A”，当用户到达活动“C”时，活动“A”和“B”都将没用，我不需要用户再回到他们身边。

此外，当用户从“C”移动到活动“D”时，他可以返回到“C”，但如果他进一步移动到“E”活动，他将无法返回到之前的“C”或“D”中的任何一个“ 活动。

经过大量研究，我得到的最好的方法是使用 flag: [FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)，但我的情况有两个问题：

1.  在活动“A”，如果用户离开我的应用程序（例如到主屏幕），它会破坏该活动，因此用户输入的所有信息都会丢失！
2.  活动“C”如果用户导航到“D”活动但当用户移动到“E”活动时我想将其删除，我希望将其保留在历史记录（backstack）中。

直到现在我都找不到这个问题的解决方案，我认为如果有一些东西可以清除当前任务的后台堆栈会更容易！

我的最低 SDK 支持是 5。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T16:09:23.047

如果您使用 API 级别 11 或更高级别，您只需在您的意图上添加[FLAG_ACTIVITY_CLEAR_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK)，这将清除您任务中的所有其他活动。

否则，这可能会有所帮助： [清除旧 SDK 上的完整 Android 活动堆栈（缺少 FLAG_ACTIVITY_CLEAR_TASK）](https://stackoverflow.com/questions/5154743/android-clearing-the-full-activity-stack)

另一种方法是让您完成您不再希望用户能够返回的活动。例如，如果您在移动到 B 之前调用 ActivityA.finish()，则该活动将从任务中删除。

当您启动活动 D 时，您可以使用 C 中的 startActivityForResult() 来启动它，当您关闭 D 时，将结果发送到 C，然后在导航到 E 之前完成活动 C。

# php - 在另一个域上安全设置会话 cookie 的最佳方法

> ID：13052977
> 
> 赞同：2
> 
> 时间：2012-10-24T15:58:03.007
> 
> 标签：php, security, cookies, hash

我们目前有 2 个站点`http://www.foo.co.uk`和`https://secure.foo.com`.

www 站点没有 SSL 证书并且位于不同的域中。

我们有一个登录按钮`http://www.foo.co.uk`，点击它会打开一个`https://secure.foo.com`带有表单的 iframe，当用户登录时，它会在该域上创建一个会话 cookie ( `foo.com`)。

然后需要将会话 cookie 复制到，`foo.co.uk`以便将您重定向到`http://www.foo.co.uk/setcookie.php?session=abcd1234`允许我们在源域上设置相同的 cookie。

这不是一个非常安全的解决方案，所以我一直在研究如何让它变得更好 - 我发现的最好的想法是使用类似于`hash_hmac`setcookie.php 脚本的参数发送哈希，然后在另一个上验证它在创建 cookie 之前结束。

虽然这更好，但它并不能阻止中间人攻击。请记住 www 不是 SSL 安全的，我认为您无法完全阻止这种情况，因此下一个最好的方法是在哈希中包含一个时间戳，使其在 5 分钟内有效。

有没有人对我如何使它变得更好有任何想法，或者指出这种方法的任何缺陷？我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:05:37.260

您可以在两个域之间共享秘密，并使用对称加密算法加密 cookie 值，或者在不安全域中设置公钥/私钥，并使用不安全域的公钥使安全域加密 cookie领域。

此外，请记住加密登录过程但随后通过不安全的通道传输会话 cookie 可能允许攻击者冒充您的用户（有关更多信息，请参阅[firesheep](http://codebutler.com/firesheep) Firefox 扩展）。

# mysql - 一侧的多对多限制

> ID：13052979
> 
> 赞同：1
> 
> 时间：2012-10-24T15:58:05.150
> 
> 标签：mysql

我有 3 张桌子

```
user
id | etc |

game
id | etc 

user_game
user_id | game_id 
```

我想创造一种情况，`n`当且仅当用户之间已经有游戏时，用户才能创建另一个游戏`n`。

例如，假设我们有`user_ids: 1,2`并且他们都在玩`game_id 1`，他们不能在他们之间创建另一个游戏，但是如果`user_id 3`加入游戏，他们可以创建一个新游戏。

是否有可能查询这样的事情，如果是这样 - 我该怎么办？尝试使用查询、连接、选择和 where 的时间太长了 :)

编辑：最终结果应该是我查询严重的用户，看看他们是否可以一起玩（即没有找到这些`n`用户一起玩的记录）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:48:09.363

假设您有一个包含建议用户列表的表。我将其称为 ProposedUsers。您可以执行以下操作来查找具有这些用户的任何 game_id：

```
select game_id
from user_game ug join
     ProposedUsers pu
     on ug.user_id = pu.user_id
group by game_id
having count(distinct ug.user_id) = (select count(distinct user_id) from ProposedUsers) 
```

关于与现有游戏的匹配是否准确（游戏中没有其他用户），您的问题有点不清楚。以上处理子集情况。完全匹配将是：

```
select game_id
from user_game ug left outer join
     ProposedUsers pu
     on ug.user_id = pu.user_id
group by game_id
having count(distinct ug.user_id) = (select count(distinct user_id) from ProposedUsers) 
```

# c++ - 用 C++ 编写的高质量开源文本转语音 (TTS) 引擎

> ID：13052980
> 
> 赞同：27
> 
> 时间：2012-10-24T15:58:10.520
> 
> 标签：c++, text-to-speech

我正在寻找用 C++ 编写的开源文本转语音 (TTS) 引擎。理想情况下，具有高质量的声音（请参阅下面的质量定义），但只要源可免费获得，较低质量的替代方案也是可以的。

有这样的开源项目吗？

“高质量”是指“人类的声音”、“非机器人”，最终结果与以下两个英语示例大致相当：[示例 1](http://translate.google.com/translate_tts?ie=UTF-8&tl=en&q=This+is+an+example+to+illustrate+the+desired+level+of+quality)、[示例 2](http://tts-api.com/tts.mp3?q=This+is+an+example+to+illustrate+the+desired+level+of+quality)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T16:03:19.613

我认为您会发现[Flite](http://www.speech.cs.cmu.edu/flite/index.html)是一个出色的项目。它应用广泛，开源，多平台。在 CMU 开发，它比随机开发人员的项目更严格。

但是，它完全是用 C 语言编写的，用于移动对象的可移植性，如果这就是你所追求的，可能会降低它对你的学术价值（寻找 C++）

如果您对 C 库不感兴趣，同一个站点有一个指向[Festival](http://festvox.org/festival/)的链接，这是一个来自爱丁堡大学的 C++ 库，它更加健壮。但是，它的便携性要差得多，我敢肯定，你必须努力让它在你的环境中工作。

# regex - 排除某些模式？

> ID：13052984
> 
> 赞同：3
> 
> 时间：2012-10-24T15:58:23.733
> 
> 标签：regex

我有以下模式

```
Administrator        yes
User                 yes
Userb                yes
userc                yes
userd                yes 
```

当有任何用户后跟yes（它们之间有任意数量的空格）不是Admin，User和Userb时，我想要一个匹配

我尝试过消极的前瞻和消极的后瞻。例如对于管理员的情况，我试过这个

```
(?<!Administrator)\s+yes 
```

但是，与管理员的行仍然匹配，我怀疑是因为 \s+。非常感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:02:33.040

你的假设是正确的。`\s+`只会匹配一个空格（例如！），然后这个空格前面不会有`Administrator`另一个空格。这并不容易解决，因为`\s+`仅在 .NET 中才允许将负向后查找包含在内（其他正则表达式引擎无法处理可变长度的向后查找）。

但是，如果您使用多行模式（如何激活它取决于您的语言/工具），那么您可以使用否定前瞻：

```
^(?!Administrator|User|Userb)\w+\s+yes 
```

在多行模式下`^`将匹配每行的开头。

**更新：**事实上，在写完这篇文章之后，我确实想出了一个使用lookbehind 的解决方案。只需确保您在一堆单词字符之后立即执行lookbehind：

```
\w+(?<!Administrator|User|Userb)\s+yes 
```

现在`\s+`必须匹配所有空格，否则它们前面不会有单词字符。

请注意，这两种解决方案都对非无前缀用户有问题。第一个将不匹配用户`Userbob`，而第二个将不匹配`ThatUser`。这可以使用单词边界来解决：

```
^(?!(?:Administrator|User|Userb)\b)\w+\s+yes
\w+(?<!\b(?:Administrator|User|Userb))\s+yes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:08:31.330

这有效：

```
^(?!Administrator|User).*yes 
```

[http://www.rubular.com/r/ijyZT0Eaas](http://www.rubular.com/r/ijyZT0Eaas)

# iphone - 移动 Safari 和移动 Chrome 上的网页呈现不正确

> ID：13052985
> 
> 赞同：0
> 
> 时间：2012-10-24T15:58:28.260
> 
> 标签：iphone, html, ios, mobile, safari

我想看看其他人是否曾经遇到过 Mobile Safari 或 Chrome 导致网页突然吐出大量垃圾的问题。

当我访问该站点并多次刷新时会出现此问题。突然之间，所有内容都无法正确呈现，而是看起来更像您在 Microsoft Word 中看到的字形类型。

以前有没有人见过这个，如果有，你是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:17:41.063

我在 iPhone 和 Android 上见过它。在 iPhone 上，我怀疑这是由于页面加载期间的中断（在 didFailLoadWithError 方法上获取 kCFURLErrorCancelled）。尽管我仍在寻找确认此问题并仍在寻找解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:55:43.747

从您发布的内容中很难说出任何内容。您应该检查页面的元标记。我建议您在[**此处**](http://validator.w3.org/)验证页面的 html 源代码和 css 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:40:14.050

您应该检查 HTML 页面的字符集。根据您的语言或页面中使用的特殊字符，您应该使用 apt 字符集。您可以在此处了解有关字符集的更多信息

*   [http://www.w3schools.com/tags/ref_charactersets.asp](http://www.w3schools.com/tags/ref_charactersets.asp)
*   [http://en.wikipedia.org/wiki/Character_encodings_in_HTML](http://en.wikipedia.org/wiki/Character_encodings_in_HTML)
*   [http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

# php - 图像调整大小和裁剪以适合框架

> ID：13052987
> 
> 赞同：1
> 
> 时间：2012-10-24T15:58:29.820
> 
> 标签：php, image, resize, crop

我正在尝试构建一个 PHP 库，它将图像大小调整为特定大小，但遇到了一些我无法完全解决的问题。

我正在尝试使其以下列方式调整图像大小和裁剪图像（所有缩放都保持为图像的纵横比）：

![在此处输入图像描述](../Images/ef85a2f83fa034d1489e18029b254188.png)

# python - 在python中引发异常的正确方法？

> ID：13052991
> 
> 赞同：21
> 
> 时间：2012-10-24T15:58:51.343
> 
> 标签：python, exception

这是简单的代码：

```
import sys

class EmptyArgs(StandardError):
    pass

if __name__ == "__main__":
    #first way to raise exception
    if len(sys.argv) == 1:
       raise EmptyArgs     
    #second way to raise exception
    if len(sys.argv) == 1:
       raise EmptyArgs() 
```

哪种方式“更”正确？两者都在工作。
注意：在我的真实代码中，异常与我声明的完全相同：没有消息和参数。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-24T16:00:09.537

两者都是正确的；后一种形式让您将参数附加到您的异常：

```
if len(sys.argv) == 1:
   raise EmptyArgs('Specify at least 1 argument') 
```

您还可以将参数作为第二个值作为 raise 语句中的元组传递：

```
if len(sys.argv) == 1:
   raise EmptyArgs, ('Specify at least 1 argument',) 
```

但是单个非元组值也可以工作，并被视为单个参数：

```
if len(sys.argv) == 1:
   raise EmptyArgs, 'Specify at least 1 argument' 
```

第三个值`raise`让您指定备用回溯，然后使用它代替将为代码中的当前位置生成的回溯：

```
if len(sys.argv) == 1:
   raise EmptyArgs, ('Specify at least 1 argument',), traceback_object 
```

请参阅[`raise`声明的文档](http://docs.python.org/reference/simple_stmts.html#the-raise-statement)

请注意，当您为异常使用参数时，[Python 样式指南 PEP 8](http://www.python.org/dev/peps/pep-0008/)更喜欢您提供异常实例，而不是类：

> 引发异常时，请使用`raise ValueError('message')`而不是旧形式`raise ValueError, 'message'`。
> 
> 首选使用括号的形式，因为当异常参数很长或包含字符串格式时，由于包含括号，您不需要使用行继续符。旧形式将在 Python 3 中删除。

Python 3 将不再支持这种形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:09:04.123

不建议在**没有**参数的情况下引发异常，即引发异常类不是要走的路。做这样的事情

```
raise MyException() 
```

因为在 Python 3.0 中，类似的情况已被永久删除

```
raise Exception, "foo" 
```

> 应该有一种——最好只有一种——明显的方法来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:00:23.077

这两种形式是等价的；他们最终都抛出了一个`EmptyArgs`. 从[文档中](http://docs.python.org/reference/simple_stmts.html#the-raise-statement)：

> 如果第一个对象是一个类，它就成为异常的类型。第二个对象用于判断异常值：如果是类的实例，则该实例成为异常值。如果第二个对象是一个元组，它被用作类构造函数的参数列表；如果它是 None，则使用空参数列表，并且任何其他对象都被视为构造函数的单个参数。通过调用构造函数创建的实例被用作异常值。

上面提到的“第二个对象”是（可选的）第二个参数`raise`：

```
raise EmptyArgs, 'Invalid input!' 
```

# php - 加快页面加载时间

> ID：13052992
> 
> 赞同：0
> 
> 时间：2012-10-24T15:58:52.657
> 
> 标签：php, jquery, ajax, pagespeed

有谁知道他们如何加快页面加载时间（在侧边栏文章列表之间切换并立即加载页面内容）？

```
http://gmailblog.blogspot.com 
```

或者有什么更好的方法建议？[我已经缩小了我的 js 和 css 文件] :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:08:00.507

您可以阅读[此页面](https://stackoverflow.com/questions/11777192/web-tips-for-improving-speed-of-my-website/11777250#11777250)以了解许多改进您的 speedtime 加载页面的方法。

[Yslow](http://developer.yahoo.com/yslow/)和[PageSpeed](https://developers.google.com/speed/pagespeed/?hl=fr)存在许多良好的实践。

对于样品：

*   最小化 HTTP 请求
*   使用内容交付网络
*   避免空 src 或 href
*   添加过期或缓存控制标头
*   Gzip 组件
*   将样式表放在顶部
*   将脚本放在底部
*   避免使用 CSS 表达式
*   使 JavaScript 和 CSS 外部化
*   减少 DNS 查找
*   缩小 JavaScript 和 CSS
*   避免重定向
*   删除重复的脚本
*   配置 ETag
*   使 AJAX 可缓存
*   将 GET 用于 AJAX 请求
*   减少 DOM 元素的数量
*   没有 404
*   减小 Cookie 大小
*   为组件使用无 Cookie 域
*   避免过滤器
*   不要在 HTML 中缩放图像
*   使 favicon.ico 小且可缓存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:02:25.123

你会想要研究 AJAX。我还推荐“PageSpeed Insights”插件，它提供了许多提高整体加载速度的建议。

# sql-server - 在 SQL Server 的列中输出逗号分隔的列表

> ID：13052994
> 
> 赞同：1
> 
> 时间：2012-10-24T15:59:02.827
> 
> 标签：sql-server, csv, string-aggregation

> **可能重复：**
> [在 SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-sql-server-2005)

实现这一目标的最佳方法是什么？编辑：在 MSSQL 2005

**桌子**

```
a   |  b
------------
x   |  1
x   |  4
y   |  6
y   |  1 
```

询问：

```
SELECT ? FROM Table 
```

所以输出是：

```
a   | ListOfB
------------
x   | 1, 4
y   | 6, 1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T16:03:31.693

在 SQL Server 中，您可以使用`FOR XML PATH`：

```
select distinct a,
  stuff(
  (
    select ','+ cast(b as varchar(10)) 
    from table1 t2 
    where t1.a = t2.a for XML path('')
  ),1,1,'') ListOfB
from table1 t1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/83f96/6)

# jquery - 在 jQuery 中构建一个切换器

> ID：13052997
> 
> 赞同：-2
> 
> 时间：2012-10-24T15:59:19.290
> 
> 标签：jquery, html, css, siblings

我试图基于这个[http://jsfiddle.net/Adib/fZc3L/](http://jsfiddle.net/Adib/fZc3L/)构建一个 切换器问题是我仍然找不到正确的兄弟姐妹在点击时切换，

```
<aside class="aside">
    <div class="element">
        <header><a href="#Cat1">Categorys</a></header>
        <section>
            <ul>
                <li><a href="">Category 1</a></li>
                <li><a href="">Category 2</a></li>
                <li><a href="">Category 3</a></li>
                <li><a href="">Category 4</a></li>
                <li><a href="">Category 5</a></li>
            </ul>
        </section>
    </div>
    <div class="element">
        <header><a href="#Cat1">Categorys:</a></header>
        <section>
            <ul>
                <li><a href="">Category 1</a></li>
                <li><a href="">Category 2</a></li>
                <li><a href="">Category 3</a></li>
                <li><a href="">Category 4</a></li>
                <li><a href="">Category 5</a></li>
            </ul>
        </section>
    </div>
    <div class="element">
        <header><a href="#Cat1">Categorys:</a></header>
        <section>
            <ul>
                <li><a href="">Category 1</a></li>
                <li><a href="">Category 2</a></li>
                <li><a href="">Category 3</a></li>
                <li><a href="">Category 4</a></li>
                <li><a href="">Category 5</a></li>
            </ul>
        </section>
    </div>
</aside> 
```

查看完整代码， [http://jsfiddle.net/Adib/PPmLe/](http://jsfiddle.net/Adib/PPmLe/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:06:06.277

我不是 100% 清楚你想要实现什么，但我认为这是为了确保只有一个类别是开放的。所以我修改了你的代码：

```
cat.on('click', function() {
    var $this = $(this),
        section = $this.parent('header').next('section');

    // hide open categories
    $('aside section').slideUp();
    // open clicked category
    section.slideDown();
}) 
```

看看完整的解决方案：http: [//jsfiddle.net/jkeyes/PPmLe/2/](http://jsfiddle.net/jkeyes/PPmLe/2/)

**更新**

以下是我解决问题的方法，它涉及存储可见的部分，因此很容易专门隐藏该部分，而不是隐藏除当前部分之外的所有部分：

```
$(function() {
    // hide all sections except the first
    $('.element section:not(:first)').hide();

    // store what section is visible
    var visible_section = $('.element section:first');

    $('.element header > a').click(function() {
        // hide the visible section
        visible_section.slideUp();
        // show the current section
        var section = $(this).parent().next('section');
        section.slideDown();
        // update the new visible section
        visible_section = section;
    })
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:06:56.533

你的部分不是兄弟姐妹。你可以这样做

```
cat.on('click', function() {
    var $this = $(this),
        section = $this.parent('header').next('section');        
        section.slideDown();
        $('.element section').not(section).slideUp(); // all sections but current one slide up
}) 
```

[http://jsfiddle.net/HVNJ2/](http://jsfiddle.net/HVNJ2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T16:09:21.550

这是另一种仅显示一个部分的解决方案。

```
$(function() {
    $("header a").click(function(event) {
        event.preventDefault();
        $("section").hide();
        $(this).parent().next("section").show();
    });

    $("section").not(".first").hide();
});​ 
```

[http://jsfiddle.net/PPmLe/3/](http://jsfiddle.net/PPmLe/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:30:34.427

试试我创建的这个 jsFiddle：http: [//jsfiddle.net/PPmLe/8/](http://jsfiddle.net/PPmLe/8/)

您的脚本和我的脚本之间的主要区别是：

```
 $this.parents('.element').siblings().find('section').slideUp(); 
```