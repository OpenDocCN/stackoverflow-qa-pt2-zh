# StackOverflow 问答 14803000-14803999

# c++ - C程序：通过inode编号获取inode头字段和信息

> ID：14803007
> 
> 赞同：0
> 
> 时间：2013-02-10T21:53:02.527
> 
> 标签：c++, c, shell, linux-kernel, inode

我需要用 C/C++ 编写一个程序，请求用户输入一个 inode 编号，然后返回所有 inode 标头字段和信息。我根本不熟悉 linux 系统和命令。我找到了一些命令并尝试了不同的东西，这些东西不像我需要的那样工作。

```
find -inum inodenumber 
```

会给我包含指定数字的文件的路径。我需要的所有信息都来自 istat（根据我的研究），但我无法让它发挥作用。我正在做

```
istat FILENAME.jpg 
```

我得到回应：

缺少图像名称和/或地址用法：istat[-B num] [-f fstype] [-i ingtype] [-b dev_sector_size] [-o imgoffset] [-z zone] [-s seconds] [ivV] image inum ...

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:58:26.910

[`istat`](http://www.sleuthkit.org/sleuthkit/man/istat.html)仅适用于磁盘映像，不适用于实时文件系统。

Linux 中没有系统调用可以通过其 inode 编号在实时文件系统中查找文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:57:05.320

当然是跑[`man istat`](http://www.sleuthkit.org/sleuthkit/man/istat.html)。

通常，您始终可以通过运行从终端本身获得帮助`man`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:54:57.870

尝试`find`使用 inode 编号运行，然后使用它生成的文件名`stat`.

# html - 使整个 可以在没有javascript的情况下使用内部元素点击

> ID：14803009
> 
> 赞同：24
> 
> 时间：2013-02-10T21:53:05.983
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-10T21:55:31.577

您需要添加`display:block`到您的`<a>`标签，然后您可以设置宽度和高度或填充 [on the `<a>`]，如果您想使可点击区域更大。

# nsstring - 使用 NSDateFormatter 遇到问题？

> ID：14803020
> 
> 赞同：1
> 
> 时间：2013-02-10T21:54:08.237
> 
> 标签：nsstring, nsdate, nsdateformatter

我正在尝试使用 NSDateFormatter 将诸如 2013-02-08T10:50:00.000 的 NSString 转换为上午 10:50，无论我做什么，我似乎都无法获得 AM 或让它与 12 岁以上的东西一起工作(2013-02-08T15:00:00.000) 有什么想法吗？

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH-mm"];
    NSString *datelocalformat= [dateFormatter stringFromDate:DepartTimeString]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:20:36.980

```
NSDate *today = [NSDate date];//get today's date
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];
 NSString *dateString = [dateFormatter stringFromDate:today];
[dateFormatter release];

// Get time - display in 12HR
NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
[timeFormatter setTimeStyle:NSDateFormatterLongStyle];
NSString *timeString = [timeFormatter stringFromDate:today];
[timeFormatter release]; 
```

# c# - LIVE SDK v5.3 & Window 8 - 如何区分使用 Microsoft 帐户登录的用户和使用本地帐户登录的用户？

> ID：14803027
> 
> 赞同：1
> 
> 时间：2013-02-10T21:54:54.493
> 
> 标签：c#, winrt-xaml, windows-store-apps, live-sdk

我正在为 Windows 8 应用商店应用程序 (XAML/C#) 使用 v5.3 Live SDK，我有一个问题。

1.  在我的应用程序中，如果用户使用 Microsoft 帐户登录 Windows，那么我想获取名字/姓氏/Microsoft ID。
2.  如果他们使用本地帐户登录到 Windows 并且没有登录到我的应用程序，那么我想显示一个“登录”按钮，以便他们可以输入他们的 Microsoft 帐户电子邮件/密码。

我知道如何使用 Live SDK 完成所有这些操作，但我的问题是 - 如何判断用户是使用 Microsoft 帐户登录 Windows 还是使用未登录 MS 帐户的本地帐户？

我可以使用以下内容：

```
var idAuth = new OnlineIdAuthenticator();
return idAuth.CanSignOut; 
```

但如果上述两个条件为真，这将返回假（如果用户使用本地帐户，但已使用 Microsoft 帐户详细信息登录到我的应用程序，则返回真）。

理论上，如果上面返回 false，我可以执行以下操作：

```
LiveAuthClient authClient = new LiveAuthClient();
LiveLoginResult authResult = await authClient.LoginAsync(new List<string>() { "wl.signin" });
if (authResult.Status == LiveConnectSessionStatus.Connected)
  { //Get user info here } 
```

问题是这对于使用 Microsoft 帐户登录到 Windows 的用户来说很好 - 他们的信息被很好地拾取，但如果它是使用本地帐户登录到 Windows 的用户，那么它将显示实时登录屏幕我的应用程序 - 那时我不想这样做，而只是在我的 UI 中显示一个登录按钮。

有人对如何区分上述两个标准有任何想法吗？

谢谢你的期待，理查德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T19:04:27.323

我最终在 MSDN 论坛上问了同样的问题并在那里得到了答案，所以我把它贴在这里以防万一它对其他人有帮助。

[http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/f6946851-‌​b495-45f6-95a4-eb3c2a004c0e](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/f6946851-%E2%80%8C%E2%80%8Bb495-45f6-95a4-eb3c2a004c0e)

# java - 在 Java 中使用 RFID (OMNIKey 6321)

> ID：14803030
> 
> 赞同：0
> 
> 时间：2013-02-10T21:54:58.733
> 
> 标签：java, rfid, mifare

对于我的本科论文，我使用 RFID 来标记和记录患者信息。我的顾问为我订购了硬件。他选择了 OMNIKEY 6321 和 Mifare 卡。对于我的生活，我无法弄清楚如何让这些工作。如果有人有建议或可以指出我正确的方向，那将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:11:58.557

Java 原生支持带有 Mifare 的 Omnikey - “import javax.smartcardio.*”。应用程序和开发人员指南的示例位于 HIDglobal 网站上。

# symfony - FOSUserBundle 表单注册在另一个表单中

> ID：14803031
> 
> 赞同：0
> 
> 时间：2013-02-10T21:55:01.853
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我想以另一种形式集成 FOSUserBundle 的注册表单。这是因为我与我的实体“Anagrafic”建立了一对多的关系。代码在这里：

```
AnagraficType.php

->add('utenze', new \FOS\UserBundle\Form\Type\RegistrationFormType($builder)) 
```

但是返回一个错误。我该怎么做呢？

编辑：好的..这样做问题就解决了..：

```
->add('utenze', new \My\UserBundle\Form\Type\RegistrationFormType('\My\UserBundle\Entity\User')) 
```

但我得到这个错误：

```
The form's view data is expected to be an instance of class \My\UserBundle\Entity\User,
but is an instance of class Doctrine\Common\Collections\ArrayCollection.
You can avoid this error by setting the "data_class" option to null or by adding a view
transformer that transforms an instance of class
Doctrine\Common\Collections\ArrayCollection to an instance of \My\UserBundle\Entity\User. 
```

为什么我会收到此错误？如果我将“data_class”设置为“null”，那么不要利用 Doctrine 的好处。我的关系是：

```
class Anagrafic
{
    //..
    /**
    * @ORM\OneToMany(targetEntity="My\UserBundle\Entity\User", mappedBy="anagrafic")
    */
    private $utenze;

    public function __construct()
    {
    $this->utenze = new \Doctrine\Common\Collections\ArrayCollection();
    }
 *****
 class User extends BaseUser
 {
  //..
    /**
 * @ORM\ManyToOne(targetEntity="My\BusinessBundle\Entity\Anagrafic", inversedBy="utenze")
 * @ORM\JoinColumn(name="anagrafic_id", referencedColumnName="id")
 */
private $anagrafic; 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:59:05.680

好的，我找到了解决方案。

```
->add('utenze', 'collection', array('type' => new \My\UserBundle\Form\Type\RegistrationFormType('\My\UserBundle\Entity\User'))) 
```

代替

```
->add('utenze', new \My\UserBundle\Form\Type\RegistrationFormType('\My\UserBundle\Entity\User')) 
```

# c - 表达式中的问号运算符

> ID：14803037
> 
> 赞同：15
> 
> 时间：2013-02-10T21:55:31.247
> 
> 标签：c, operators

*K&R 第二版*（第 71 页）——我一定错过了解释：

```
sign = (s[i] == '-') ? -1 : 1; 
```

this 的上下文是将字符串转换为双精度的函数。这部分特别是在函数跳过空格之后。**我推断它正在**检查正值或负值，并将其保存为 -1 或 +1 以在函数末尾进行符号转换......`return sign * val /power;`

**我想做的比推断更好……**我特别不确定`?`and`: 1`在这里（或任何地方，就此而言）在做什么。

这似乎是一个抽象的`if`陈述。在哪里`?`检查真相，`:`是`else`……是这样吗？是否仅限于`if/else`？

我是一个初学者，我以前没有遇到过这种表达式语法，所以我想知道是否有一个特殊的原因它似乎经常被正式的`if/else`- 除了可读性之外？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-10T21:59:11.650

> 这有点像一个抽象的 if 语句，在哪里`?`检查真假，`:`是不是……是这样吗？

是的，差不多。它被称为“条件运算符”（有时不完全准确地称为“三元运算符”，因为它是 C 中唯一的三元运算符）。它不是一个**语句**，它是一个**表达式，**它有一个值。如果第一个参数的计算结果为真，则计算第二个参数，如果为假，则计算第三个参数。所以

```
sign = (s[i] == '-') ? -1 : 1; 
```

相当于

```
if (s[i] == '-') {
    sign = -1;
} else {
    sign = 1;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-10T22:02:53.543

> 这似乎是一个抽象的 if 语句。

这是正确的。这称为“三元条件运算符”。

正常`if`适用于*语句*，而条件运算符适用于*表达式*。

* * *

> 我想知道是否有一个特殊的原因，它似乎经常被正式的 if/else 取代——除了可读性之外？

在某些情况下，仅在语句上进行分支是不够的，您需要在表达式级别上工作。

例如，考虑初始化：

```
const int foo = bar ? 5 : 3; 
```

这不能用普通的`if`/来写`else`。

* * *

无论如何，说它等同于`if`/`else`的人是不精确的。虽然生成的程序集通常相同，但它们并不等效，不应将其视为`if`. 简而言之，`if`尽可能使用，并且仅在需要对表达式进行分支时才使用条件运算符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T21:57:31.933

这是三元运算符。如果和否则`(s[i] == '-') ? -1 : 1;`返回。然后将该值分配给。换句话说，更长的写法是：`-1``s[i] == '-'``1``sign`

```
int sign;

if(s[i] == '-')
{
  sign = -1;
}
else
{
  sign = 1;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T21:57:48.247

`?:`是C中的*条件运算符。*

在您的示例中，它将产生与此`if`语句相同的结果：

```
if (s[i] == '-')
{
    sign = -1;
}
else
{
    sign = 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T21:57:47.773

```
sign = (s[i] == '-') ? -1 : 1; 
```

是以下的简写：

```
if (s[i] == '-')
{
    sign = -1;
}
else
{
    sign = 1;
} 
```

# android - android:versionName 是否必须是数字（形式为 0.0.0 等）？

> ID：14803042
> 
> 赞同：5
> 
> 时间：2013-02-10T21:55:47.710
> 
> 标签：android, android-ndk, android-manifest

我尝试`android:versionName=">0.3"`在我的`AndroidManifest.xml`文件中使用（作为我自己的说明，以便在下一个版本中增加它），但 NDK 不喜欢它：

```
Invalid attribute name: 
C:/Android/android-ndk-r8d/build/gmsl/__gmsl:512: *** non-numeric second argument to `wordlist' function: ''.  Stop. 
```

然而，[文档](http://developer.android.com/guide/topics/manifest/manifest-element.html)似乎表明我可以制作`versionName`任何我想要的东西：

> `android:versionName`
> 
> 向用户显示的版本号。此属性可以设置为原始字符串或字符串资源的引用。**该字符串除了显示给用户之外没有其他用途。**该 `versionCode`属性保存内部使用的重要版本号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:55:53.010

结果发现 NDK 在 versionName 字符串上使用了一些有趣的 GNU Make 整数编码函数。似乎这些可以处理字母和一些特殊字符（例如，、、、、和），但`?`不能处理其他字符（例如，`-`和）。`/``\``+``<``>`

我选择在`.0`我的 versionName 末尾附加 a 以指示下一个版本需要一个凹凸。在这种情况下，我使用`0.3.0`.

（有关 GMSL 的整数算术函数的更多信息，请参阅[源代码](https://github.com/cloudflare/keyless/blob/master/gmsl/__gmsl)的第 494 行）

*更新：*

我们已经切换到简单地附加一个`+`字符 - <code>0.3+。效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:20:06.913

我使用了命令 dos2unix AndroidManifest.xml，它为我清除了错误。我希望这会有所帮助。

[如何使用 ndk8 在 Windows 上为 Android 构建 Openssl？](https://stackoverflow.com/questions/14398053/how-to-build-openssl-for-android-on-windows-with-ndk8/15427318?noredirect=1#comment22119338_15427318)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:07:24.567

从技术上讲，放在那里的内容没有任何限制。

但是，请尽可能使其易于理解，尤其是对于最终版本。

对于 alpha/beta/RC/preview 版本，你可以放任何你想要的，但仍然可以放一些版本号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T17:42:50.427

只需`<uses-sdk android:minSdkVersion="8" />`在应用程序标记之前添加。

这对我有用。

# grammar - 寻找对块结构使用缩进的 Jison 语法示例

> ID：14803043
> 
> 赞同：6
> 
> 时间：2013-02-10T21:55:54.387
> 
> 标签：grammar, indentation, jison

有没有人有一个简单的例子来说明如何定义一个语法来解析使用 Jison 的块的类似 python 的缩进？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T03:23:59.090

我使用 Jison 创建了一种使用[python-style indentation](http://docs.python.org/release/2.5.1/ref/indentation.html "2.1.8 缩进")的语言。[它是一种名为Bianca](https://github.com/aaditmshah/bianca)的自动化白盒算法测试语言。

Bianca 只有两个依赖项——一个是 Jison，另一个是[Lexer](https://github.com/aaditmshah/lexer)。Jison 支持[自定义扫描仪](http://zaach.github.com/jison/docs/#custom-scanners "吉森/文档")，Lexer 就是这样一种扫描仪。

在 C 风格的编程语言中，代码块由花括号分隔。然而，在 python 风格的缩进中，你有`INDENT`和`DEDENT`标记。

在 Lexer 中编写规则来生成`INDENT`和标记非常简单。`DEDENT`事实上，Lexer 文档准确地展示了如何做到这一点。

这段代码直接取自 Bianca 的源代码 ( [lexer.js](https://github.com/aaditmshah/bianca/blob/master/lib/lexer.js#L18-L36) )：

```
var indent = [0];

lexer.addRule(/^ */gm, function (lexeme) {
    var indentation = lexeme.length;

    col += indentation;

    if (indentation > indent[0]) {
        indent.unshift(indentation);
        return "INDENT";
    }

    var tokens = [];

    while (indentation < indent[0]) {
        tokens.push("DEDENT");
        indent.shift();
    }

    if (tokens.length) return tokens;
}); 
```

可以在 Python 文档中找到有关此代码如何工作的简要说明：

> 在读取文件的第一行之前，将一个零压入堆栈；这将永远不会再次弹出。压入堆栈的数字将始终严格从下到上递增。在每个逻辑行的开头，将行的缩进级别与堆栈的顶部进行比较。如果相等，则什么都不会发生。如果较大，则将其压入堆栈，并`INDENT`生成一个令牌。如果它更小，它*必须*是堆栈上出现的数字之一；堆栈上所有较大的数字都被弹出，并且为每个弹出的数字`DEDENT`生成一个令牌。在文件的末尾，`DEDENT`为堆栈上剩余的大于零的每个数字生成一个令牌。

# python - Matplotlib 动画 MovieWriters 在 Ubuntu 12.04 上失败

> ID：14803044
> 
> 赞同：3
> 
> 时间：2013-02-10T21:55:58.270
> 
> 标签：python, ubuntu, ffmpeg, matplotlib

我正在尝试通过`ffmpeg`Ubuntu 12.04 LTS（32 位桌面）将 matplotlib 动画保存到电影中。在 matplotlib[示例](http://matplotlib.org/examples/animation/basic_example_writer.html)之后，它无法加载动画编写器：（`AttributeError: 'module' object has no attribute 'writers'`示例的第 15 行）：

```
import numpy as np
import matplotlib
matplotlib.use("Agg")
import matplotlib.pyplot as plt
import matplotlib.animation as animation

def update_line(num, data, line):
    line.set_data(data[...,:num])
    return line,

# Set up formatting for the movie files
Writer = animation.writers['ffmpeg'] 
```

通过`apt-get`，我尝试安装 ffmpeg，每个可以想象的编解码器，甚至尝试从源代码编译 ffmpeg。没有任何效果。

我如何`matplotlib`在 Ubuntu 上与 ffmpeg 交谈？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T05:45:39.947

如果您使用的是它的`unbuntu`打包版本，`matplotlib`则为`1.1.1rc1`. 该属性`writers`是在该标签后大约 3 个月添加的，并且在版本`1.2`及更高版本中。

您可以`matplotlib`从源代码安装（这就是我所做的，还不错）或使用[每日 ppa](https://launchpad.net/~takluyver/+archive/matplotlib-daily)。

我对从源代码编译的建议是尽可能多地使用打包系统并`matplotlib`手动安装（如果您确实想使用 pip，[请参阅此答案](https://stackoverflow.com/questions/11863775/python-scipy-install-on-ubuntu/11864996#11864996)）

```
git clone git://github.com/matplotlib/matplotlib.git
cd matplotlib
git checkout -b v1.2.0
python setup.py install --prefix=/home/username/local_installs/ 
```

（这将为您提供最新的稳定版本）然后确保安装它的路径在您的路径中，`$PYTHONPATH`这可以通过包含该行来完成

```
export PYTHONPATH=/home/username/local_installs/lib/python2.7/site-packages/:$PYTHONPATH 
```

在你的`~/.bashrc`文件中。根据您使用的 python 版本，您可能需要稍微改变该行。您可能需要这样做（并确保文件夹存在）`setup.py`才会满意。

# java - 在浏览器中显示字节数组中的图像

> ID：14803045
> 
> 赞同：3
> 
> 时间：2013-02-10T21:56:08.740
> 
> 标签：java, image, serversocket

我有一个简单的 TCP 服务器套接字，它将获取一个字节数组。此 GET 来自在此服务器上输入包含指向 gif 图像的 img src 链接的网站时，请求如下所示：

```
GET /myHome.htm HTTP/1.1
GET /house.gif HTTP/1.1 
```

现在字节数组是这样完成的：

```
byte[] fileByte = Files.readAllBytes(filePath); 
```

要打印包含此图像的网站，我这样做：

```
out.writeBytes(new String(fileByte)); 
```

出去：

```
DataOutputStream out= new DataOutputStream(socketClient.getOutputStream()); 
```

现在要使图像显示，我想我必须使用其他东西

```
out.writeBytes() 
```

但我不确定。有人知道如何使图像显示吗？现在图像根本不显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:30:40.733

首先，确保您的 GIF 文件没有损坏。（以前也发生在我身上）。

如果是这种情况，请尝试使用以下代码发送 GIF 文件：

```
byte[] fileByte = Files.readAllBytes(filePath);
writer.writeBytes("HTTP/1.1 200 OK\r\n");
writer.writeBytes("Content-Type: image/gif\r\n");
writer.writeBytes("Content-Length: "+fileByte.length+"\r\n");
writer.writeBytes("\r\n");
writer.write(fileByte, 0, fileByte.length); 
```

然后尝试直接导航到“house.gif”而不是“myHome.htm”。在评论中让我知道这是做什么的。

*以前的答案尝试：*

我想我可能误解了你的问题。让我尝试一个不同的答案：

您不确定如何在服务器上确定何时返回 HTML 文件 myHome.htm 以及何时返回 house.gif？

我认为为此您需要简单地解析出请求的 URL。只需检查它是否包含“house.gif”。然后，根据这一点，您可以返回如上所述的 HTML 文件，或者发送 .gif 文件，确保使用

```
writer.write(fileByte, 0, fileByte.length); 
```

发送二进制数据并设置**回复**标头

```
Content-Type: image/gif 
```

但是，在这两种情况下（对于 HTML 文件和 GIF 文件），您都应该在发送的数据前面加上正确的 HTTP 响应标头。不要以错误的方式使用页面标题，但此站点可能会有所帮助： http: [//net.tutsplus.com/tutorials/other/http-headers-for-dummies/](http://net.tutsplus.com/tutorials/other/http-headers-for-dummies/)

**并且只是为了确保**：您的服务器将接收两个独立的请求。第一个会要求 HTML 文件，第二个会要求 GIF 文件。所以你发送一个或另一个。因此，没有“特殊方式”来发送 GIF 而不是 HTML 文件。您使用相同的 clientSocket。但这是一种不同的联系。

*以前的答案：*

我认为您可能缺少返回数据的 mime 类型。尝试将以下 HTTP 标头添加到您的回复中：

```
Content-Type: image/gif 
```

实际上...您是否发送了正确的 HTTP 回复（包括标头，特别是 Content-Length）？如果没有，请给我留言，我会发布您需要的代码。

如果由于某种原因，您无法设置 content-type 标头以让浏览器知道您正在向其发送图像，则您可以使用 XMLHttpRequest 将客户端上的二进制数据加载到 JavaScript 函数中，而不是指定它作为 img 标签的源 URL。然后，您可以使用 JavaScript 将二进制数据编码为具有正确 mime 类型的 dataURI ( [http://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme) )，并将其设置为图像源。

**实际上，我只是注意到您的代码中有一些内容：**

```
new String(fileByte) 
```

可能将 fileBytes 解释为 unicode 字符而不是二进制。然后，当您将其写入编写器时，它可能会搞砸，因为图像中的所有数据可能不是有效的 unicode。尝试用这个替换该行：

```
writer.write(fileByte, 0, fileByte.length); 
```

也许这就是你需要做的全部修复它？？？

# rspec - 在 rspec 中测试模型查找器方法

> ID：14803049
> 
> 赞同：0
> 
> 时间：2013-02-10T21:56:19.907
> 
> 标签：rspec, ruby-on-rails-3.2

Ruby 新手在这里试图掌握 rspec、rails、cucumber。

我不确定为什么会返回以下错误：

```
1) User can be found by username
Failure/Error: user.should_not be_valid
NoMethodError:
    undefined method `valid?' for nil:NilClass
    # ./spec/models/user_spec.rb:26:in `block (2 levels) in <top (required)>' 
```

从以下模型规范文件中：

```
require 'spec_helper'

describe User do
  let(:user) { User.new(
      :username => 'username',
      :password => 'password'
    )
  }

  it "should be createable" do
    user.should be_valid
  end

  it "cannot have an empty username" do
    user.username = nil
    user.should_not be_valid
  end

  it "cannot have an empty password" do
    user.password = nil
    user.should_not be_valid
  end

  it "can be found by username" do
    user = User.find_by_username('username')
    user.should be_valid  
  end
  it "can be deleted"
end 
```

我确定这很简单，但我无法弄清楚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:03:17.397

在您的`let`通话中，您需要实际“创建”用户。您只是构建它而没有保存。所以当你打电话

```
user = User.find_by_username('username') 
```

这是返回`nil`，因为记录未保存且无法找到。

此外，`#find_by_username`它是 Rails 的一部分，您实际上不需要对其进行测试。

# php - get_object_vars 的非范围敏感替代方案？

> ID：14803050
> 
> 赞同：0
> 
> 时间：2013-02-10T21:56:28.813
> 
> 标签：php

是否有非范围敏感的替代方案`get_object_vars()`？

我需要从一个对象中获取所有公共属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:09:57.457

这可以通过[反射 API](http://www.php.net/manual/en/reflectionclass.getproperties.php)来完成：

```
<?php
class Foo {
    public    $foo  = 1;
    protected $bar  = 2;
    private   $baz  = 3;
}

$foo = new Foo();

$reflect = new ReflectionClass($foo);
$props   = $reflect->getProperties(ReflectionProperty::IS_PUBLIC);

var_dump($props);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:05:55.480

只需将其包装在一个函数中。

```
$get_vars = create_function('$object', 'return get_object_vars($object);'); 
```

现在您所要做的就是调用`$get_vars($object)`.

# git - git新手..我的笔记本在网络上获得的所有东西我总是需要做一个“git fetch”吗

> ID：14803054
> 
> 赞同：2
> 
> 时间：2013-02-10T21:56:46.440
> 
> 标签：git, version-control, github

我是 git 新手，我想知道每次上网本上网时是否必须执行“git fetch”，这样我就可以从存储库中获得最新版本的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:01:18.280

是的，`git`除非您明确告诉它，否则不会从远程存储库中获取更改。不，从某种意义上说，如果您不想，就*不必*抓住这些变化；您可以在闲暇时运行`git fetch`和合并它发现的任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:01:26.013

**你不必**，这就是为什么它是 DVCS。但是，如果您想获得最新版本，是的，您应该`pull`从远程获取。

[Git 初学者：权威实用指南](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide)

# c# - 使用流作为文件？

> ID：14803055
> 
> 赞同：1
> 
> 时间：2013-02-10T21:56:55.053
> 
> 标签：c#, stream, filestream, naudio, audio-converter

我正在开发一个**电话应用程序**，使用第三方库通过网络发送音频。

这个第三方库只接受一种非常特定的 wav 格式，并将**文件作为磁盘上的文件名路径**。我们当前的音频文件不是这种格式。我可以`NAudio`用来从我们的旧格式转换为这种新格式。

但是，我真的不希望有两组音频文件四处飘荡。

我基本上想要做的是获取`NAudio.WaveStream`并能够将其传递给第三方库**而不将其写入磁盘**，因为该库采用文件名的路径。如果性能不好，我将被迫拥有多组音频文件，但我想避免这种情况。我什至不确定谷歌的条款。

**这是内存映射文件的用例吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:12:25.260

可能不值得你花时间，但如果你完全坚持使用 3rd 方应用程序并且反对写入磁盘，你可以使用类似[http://dokan-dev.net/en/](http://dokan-dev.net/en/)的库创建一个虚拟驱动器。您可以拦截来自 3rd 方应用程序的请求，并在需要时将转换后的文件流式传输到它。

话虽如此，我可能会在将文件写入普通驱动器时受到打击。

如果不出意外，它将开始您的搜索。

# c++ - 使用 C++ 的上下文菜单外壳扩展内的级联子菜单

> ID：14803059
> 
> 赞同：0
> 
> 时间：2013-02-10T21:57:11.247
> 
> 标签：c++, windows, shell, contextmenu, submenu

您好，我正在尝试在 shell 扩展的上下文菜单中获取级联窗口。我在 .dll 扩展名的上下文菜单中添加了两个子菜单，**但想制作一个级联子菜单（我喜欢打开第一个菜单，然后单击里面的某个菜单，想要打开下一个子菜单）。**

如何从此代码中获取级联子菜单，我在哪里出错了？

```
 // OpenWithCtxMenuExt.cpp : Implementation of COpenWithCtxMenuExt

#include "stdafx.h"
#include "OpenWithExt.h"
#include "OpenWithCtxMenuExt.h"

#pragma comment(lib,"shlwapi")

/////////////////////////////////////////////////////////////////////////////
// COpenWithCtxMenuExt

HRESULT COpenWithCtxMenuExt::Initialize ( LPCITEMIDLIST pidlFolder,
                                          LPDATAOBJECT pDataObj,
                                          HKEY hProgID )
{
FORMATETC fmt = { CF_HDROP, NULL, DVASPECT_CONTENT, -1, TYMED_HGLOBAL };
STGMEDIUM stg = { TYMED_HGLOBAL };
HDROP     hDrop;

    // Look for CF_HDROP data in the data object.
    if ( FAILED( pDataObj->GetData ( &fmt, &stg )))
        {
        // Nope! Return an "invalid argument" error back to Explorer.
        return E_INVALIDARG;
        }

    // Get a pointer to the actual data.
    hDrop = (HDROP) GlobalLock ( stg.hGlobal );

    // Make sure it worked.
    if ( NULL == hDrop )
        return E_INVALIDARG;

    // Sanity check - make sure there is at least one filename.
UINT uNumFiles = DragQueryFile ( hDrop, 0xFFFFFFFF, NULL, 0 );

    if ( 0 == uNumFiles )
        {
        GlobalUnlock ( stg.hGlobal );
        ReleaseStgMedium ( &stg );
        return E_INVALIDARG;
        }

HRESULT hr = S_OK;

    // Get the name of the first file and store it in our member variable m_szFile.
    if ( 0 == DragQueryFile ( hDrop, 0, m_szSelectedFile, MAX_PATH ))
        hr = E_INVALIDARG;
    else
        {
        // Quote the name if it contains spaces (needed so the cmd line is built properly)
        PathQuoteSpaces ( m_szSelectedFile );
        }

    GlobalUnlock ( stg.hGlobal );
    ReleaseStgMedium ( &stg );

    return hr;
}

HRESULT COpenWithCtxMenuExt::QueryContextMenu ( HMENU hmenu, UINT  uMenuIndex, 
                                                UINT  uidFirstCmd, UINT  uidLastCmd,
                                                UINT  uFlags )
{
    // If the flags include CMF_DEFAULTONLY then we shouldn't do anything.
    if ( uFlags & CMF_DEFAULTONLY )
        return MAKE_HRESULT ( SEVERITY_SUCCESS, FACILITY_NULL, 0 );

    // First, create and populate a submenu.
HMENU hSubmenu = CreatePopupMenu();
HMENU hSubmenu1 = CreatePopupMenu();
UINT uID = uidFirstCmd;

    InsertMenu ( hSubmenu, 0, MF_BYPOSITION, uID++, _T("&Notepad") );
    InsertMenu ( hSubmenu, 1, MF_BYPOSITION, uID++, _T("&Internet Explorer") );
    InsertMenu ( hSubmenu, 2, MF_BYPOSITION, uID++, _T("&Mspaint") );
    InsertMenu ( hSubmenu, 3, MF_BYPOSITION, uID++, _T("&Pop") );

// provjeriti uID da se ne zbraja
    InsertMenu ( hSubmenu1, 0, MF_BYPOSITION, uID++, _T("&Notepad") );
    InsertMenu ( hSubmenu1, 1, MF_BYPOSITION, uID++, _T("&Mspaint") );

    // Insert the submenu into the ctx menu provided by Explorer.
MENUITEMINFO mii = { sizeof(MENUITEMINFO) };

    mii.fMask = MIIM_SUBMENU | /*MIIM_STRING*/ 0x00000040 | MIIM_ID;
    mii.wID = uID++;
    mii.hSubMenu = hSubmenu;
    mii.dwTypeData = _T("C&P Open With");

    InsertMenuItem ( hmenu, uMenuIndex, TRUE, &mii );

      // Insert the submenu into the ctx menu provided by Explorer.
MENUITEMINFO mii1 = { sizeof(MENUITEMINFO) };

    mii1.fMask = MIIM_SUBMENU | /*MIIM_STRING*/ 0x00000040 | MIIM_ID;
    mii1.wID = uID++;
    mii1.hSubMenu = hSubmenu;
    mii1.dwTypeData = _T("C&P pod_folder");

    InsertMenuItem ( hmenu, uMenuIndex, TRUE, &mii1 );

    return MAKE_HRESULT ( SEVERITY_SUCCESS, FACILITY_NULL, uID - uidFirstCmd );
}

HRESULT COpenWithCtxMenuExt::GetCommandString ( UINT  idCmd,      UINT uFlags,
                                                UINT* pwReserved, LPSTR pszName,
                                                UINT  cchMax )
{
USES_CONVERSION;

    // Check idCmd, it must be 0 or 1 since we have two menu items.
    if ( idCmd > 3 )
        return E_INVALIDARG;

    // If Explorer is asking for a help string, copy our string into the
    // supplied buffer.
    if ( uFlags & GCS_HELPTEXT )
        {
        LPCTSTR szNotepadText = _T("Open the selected file in Notepad");
        LPCTSTR szIEText = _T("Open the selected file in Internet Explorer");
        LPCTSTR szPintText = _T("Open the selected file with Mspaint");
        LPCTSTR szPopText = _T("Popout");

        LPCTSTR szNotepad1Text = _T("Open the selected file in Notepad");
        LPCTSTR szPint1Text = _T("Open the selected file with Mspaint");

        //LPCTSTR pszText = (0 == idCmd) ? szNotepadText : szIEText;
        LPCTSTR pszText;
        if(idCmd == 0){
            pszText = szNotepadText;
        }
        if(idCmd == 1){
            pszText = szIEText;
        }
        if(idCmd == 2){
            pszText = szPintText;
        }
        if(idCmd == 3){
            pszText = szPopText;
        }       
        if(idCmd == 4){
            pszText = szNotepad1Text;
        }       
        if(idCmd == 5){
            pszText = szPint1Text;
        }

        if ( uFlags & GCS_UNICODE )
            {
            // We need to cast pszName to a Unicode string, and then use the
            // Unicode string copy API.
            lstrcpynW ( (LPWSTR) pszName, T2CW(pszText), cchMax );
            }
        else
            {
            // Use the ANSI string copy API to return the help string.
            lstrcpynA ( pszName, T2CA(pszText), cchMax );
            }

        return S_OK;
        }

    return E_INVALIDARG;
}

HRESULT COpenWithCtxMenuExt::InvokeCommand ( LPCMINVOKECOMMANDINFO pCmdInfo )
{
    // If lpVerb really points to a string, ignore this function call and bail out.
    if ( 0 != HIWORD( pCmdInfo->lpVerb ))
        return E_INVALIDARG;

    // Get the command index.
    switch ( LOWORD( pCmdInfo->lpVerb ))
        {
        case 0:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("notepad.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

        case 1:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("iexplore.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

        case 2:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("mspaint.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

        case 3:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("mspaint.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

        case 4:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("notepad.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

        case 5:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("mspaint.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

        default:
            return E_INVALIDARG;
        break;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:45:35.280

经过一段时间找到在现有上下文菜单中制作级联上下文菜单的解决方案......这里是代码：

```
 // OpenWithCtxMenuExt.cpp : Implementation of COpenWithCtxMenuExt

#include "stdafx.h"
#include "OpenWithExt.h"
#include "OpenWithCtxMenuExt.h"

#pragma comment(lib,"shlwapi")

/////////////////////////////////////////////////////////////////////////////
// COpenWithCtxMenuExt

HRESULT COpenWithCtxMenuExt::Initialize ( LPCITEMIDLIST pidlFolder,
                                          LPDATAOBJECT pDataObj,
                                          HKEY hProgID )
{
FORMATETC fmt = { CF_HDROP, NULL, DVASPECT_CONTENT, -1, TYMED_HGLOBAL };
STGMEDIUM stg = { TYMED_HGLOBAL };
HDROP     hDrop;

    // Look for CF_HDROP data in the data object.
    if ( FAILED( pDataObj->GetData ( &fmt, &stg )))
        {
        // Nope! Return an "invalid argument" error back to Explorer.
        return E_INVALIDARG;
        }

    // Get a pointer to the actual data.
    hDrop = (HDROP) GlobalLock ( stg.hGlobal );

    // Make sure it worked.
    if ( NULL == hDrop )
        return E_INVALIDARG;

    // Sanity check - make sure there is at least one filename.
UINT uNumFiles = DragQueryFile ( hDrop, 0xFFFFFFFF, NULL, 0 );

    if ( 0 == uNumFiles )
        {
        GlobalUnlock ( stg.hGlobal );
        ReleaseStgMedium ( &stg );
        return E_INVALIDARG;
        }

HRESULT hr = S_OK;

    // Get the name of the first file and store it in our member variable m_szFile.
    if ( 0 == DragQueryFile ( hDrop, 0, m_szSelectedFile, MAX_PATH ))
        hr = E_INVALIDARG;
    else
        {
        // Quote the name if it contains spaces (needed so the cmd line is built properly)
        PathQuoteSpaces ( m_szSelectedFile );
        }

    GlobalUnlock ( stg.hGlobal );
    ReleaseStgMedium ( &stg );

    return hr;
}

HRESULT COpenWithCtxMenuExt::QueryContextMenu ( HMENU hmenu, UINT  uMenuIndex, 
                                                UINT  uidFirstCmd, UINT  uidLastCmd,
                                                UINT  uFlags )
{
    // If the flags include CMF_DEFAULTONLY then we shouldn't do anything.
    if ( uFlags & CMF_DEFAULTONLY )
        return MAKE_HRESULT ( SEVERITY_SUCCESS, FACILITY_NULL, 0 );

    // First, create and populate a submenu.
HMENU hSubmenu = CreatePopupMenu();
HMENU hSub = CreatePopupMenu();
UINT uID = uidFirstCmd;

    InsertMenu ( hSubmenu, 0, MF_BYPOSITION, uID++, _T("&Notepad") );
    InsertMenu ( hSubmenu, 1, MF_BYPOSITION, uID++, _T("&Internet Explorer") );
    InsertMenu ( hSubmenu, 2, MF_BYPOSITION, uID++, _T("&Mspaint") );
    InsertMenu ( hSubmenu, 3, MF_BYPOSITION, uID++, _T("&Pop") );

    InsertMenu ( hSub, 4, MF_BYPOSITION, uID++, _T("&Case") );
    InsertMenu ( hSub, 5, MF_BYPOSITION, uID++, _T("&Case") );

    // Insert the submenu into the ctx menu provided by Explorer.
MENUITEMINFO mii = { sizeof(MENUITEMINFO) };

    mii.fMask = MIIM_SUBMENU | /*MIIM_STRING*/ 0x00000040 | MIIM_ID;
    mii.wID = uID++;
    mii.hSubMenu = hSubmenu;
    mii.dwTypeData = _T("Open With&x");

    InsertMenuItem ( hmenu, uMenuIndex, TRUE, &mii );

    mii.hSubMenu = hSub;
    mii.dwTypeData = _T("Novi Subm&enu");

    InsertMenuItem ( hSubmenu, uMenuIndex, TRUE, &mii );

    return MAKE_HRESULT ( SEVERITY_SUCCESS, FACILITY_NULL, uID - uidFirstCmd );
}

HRESULT COpenWithCtxMenuExt::GetCommandString ( UINT  idCmd,      UINT uFlags,
                                                UINT* pwReserved, LPSTR pszName,
                                                UINT  cchMax )
{
USES_CONVERSION;

    // Check idCmd, it must be 0 or 1 since we have two menu items.
    if ( idCmd > 4 )
        return E_INVALIDARG;

    // If Explorer is asking for a help string, copy our string into the
    // supplied buffer.
    if ( uFlags & GCS_HELPTEXT )
        {
        LPCTSTR szNotepadText = _T("Open the selected file in Notepad");
        LPCTSTR szIEText = _T("Open the selected file in Internet Explorer");
        LPCTSTR szPintText = _T("Open the selected file with Mspaint");
        LPCTSTR szPopText = _T("Popout");
        //LPCTSTR pszText = (0 == idCmd) ? szNotepadText : szIEText;
        LPCTSTR pszText;
        if(idCmd == 0){
            pszText = szNotepadText;
        }
        if(idCmd == 1){
            pszText = szIEText;
        }
        if(idCmd == 2){
            pszText = szPintText;
        }

        if(idCmd == 3){
            pszText = szPopText;
        }

        if(idCmd == 4){
            pszText = szPopText;
        }

        if ( uFlags & GCS_UNICODE )
            {
            // We need to cast pszName to a Unicode string, and then use the
            // Unicode string copy API.
            lstrcpynW ( (LPWSTR) pszName, T2CW(pszText), cchMax );
            }
        else
            {
            // Use the ANSI string copy API to return the help string.
            lstrcpynA ( pszName, T2CA(pszText), cchMax );
            }

        return S_OK;
        }

    return E_INVALIDARG;
}

HRESULT COpenWithCtxMenuExt::InvokeCommand ( LPCMINVOKECOMMANDINFO pCmdInfo )
{
    // If lpVerb really points to a string, ignore this function call and bail out.
    if ( 0 != HIWORD( pCmdInfo->lpVerb ))
        return E_INVALIDARG;

    // Get the command index.
    switch ( LOWORD( pCmdInfo->lpVerb ))
        {
        case 0:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("notepad.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

        case 1:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("iexplore.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

        case 2:
            {
            ShellExecute ( pCmdInfo->hwnd, _T("open"), _T("mspaint.exe"),
                           m_szSelectedFile, NULL, SW_SHOW );

            return S_OK;
            }
        break;

            case 4:
            {
                MessageBox(0, "New command from sub menu", "Case 4", 0);
            return S_OK;
            }
        break;

        case 5:
            {
                MessageBox(0, "New second command from sub menu", "Case 5", 0);
            return S_OK;
            }
        break;

        default:
            return E_INVALIDARG;
        break;
        }
} 
```

# cuda - 如何计算哪个 SM 给定线程正在运行？

> ID：14803061
> 
> 赞同：1
> 
> 时间：2013-02-10T21:57:20.997
> 
> 标签：cuda, nvidia

*我是 CUDA 初学者。*

到目前为止，我了解到，每个 SM 有 8 个块（线程）。假设我将数组中的元素乘以 2 的简单工作。但是，我的数据比线程少。

没问题，因为我可以切断线程的“尾巴”以使它们空闲。但是，如果我理解正确，这将意味着一些 SM 将获得 100% 的工作，而一部分（甚至没有）。

因此，我想计算哪个 SM 正在运行给定线程并以这样的方式进行计算，即每个 SM 具有相同的工作量。

我希望它首先有意义:-)如果是这样，如何计算给定线程正在运行哪个SM？或者——当前SM的索引和它们的总数？换句话说，在 SM 术语中相当于 threadDim/threadIdx。

## 更新

评论太长了。

罗伯特，谢谢你的回答。当我尝试消化所有内容时，这就是我所做的——我有一个“大”数组，我只需将值相乘`*2`并将其存储到输出数组（作为热身；顺便说一句。我所做的所有计算，在数学上都是正确的）。所以首先我在 1 个块，1 个线程中运行它。美好的。接下来，我尝试以这样一种方式拆分工作，即每个乘法只由一个线程完成一次。结果我的程序运行**速度慢了大约 6 倍**. 我什至感觉到为什么——获取有关 GPU 的信息的小惩罚，然后计算我应该使用多少块和线程，然后在每个线程中而不是单次乘法，现在我有大约 10 个额外的乘法来计算数组中的偏移量一个线程。一方面我试图找出如何改变这种不受欢迎的行为，另一方面我想在 SM 之间平均分布线程的“尾巴”。

我改写 - 也许我错了，但我想解决这个问题。我有 1G`*2`的小作业（仅此而已）——我应该用 1K 线程创建 1K 块，还是用 1 个线程创建 1M 块，用 1M 线程创建 1 个块，等等。到目前为止，我阅读了 GPU 属性，划分、划分和盲目地使用网格/块的每个维度的最大值（或所需的值，如果没有要计算的数据）。

# 编码

`size`是输入和输出数组的大小。一般来说：

```
output_array[i] = input_array[i]*2; 
```

计算我需要多少块/线程。

```
size_t total_threads = props.maxThreadsPerMultiProcessor
                       * props.multiProcessorCount;
if (size<total_threads)
    total_threads = size;

size_t total_blocks = 1+(total_threads-1)/props.maxThreadsPerBlock;

size_t threads_per_block = 1+(total_threads-1)/total_blocks; 
```

Have`props.maxGridSize`和`props.maxThreadsDim`I 以类似的方式计算块和线程的尺寸 - 从`total_blocks`和`threads_per_block`.

然后是杀手部分，计算线程的偏移量（“内部”线程）：

```
size_t offset = threadIdx.z;
size_t dim = blockDim.x;
offset += threadIdx.y*dim;
dim *= blockDim.y;
offset += threadIdx.z*dim;
dim *= blockDim.z;
offset += blockIdx.x*dim;
dim *= gridDim.x;
offset += blockIdx.y*dim;
dim *= gridDim.y;

size_t chunk = 1+(size-1)/dim; 
```

所以现在我有了当前线程的起始偏移量，以及用于乘法的数组（块）中的数据量。我没有在`grimDim.z`上面使用，因为 AFAIK 总是 1，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T22:21:44.703

这是一件不寻常的事情。鉴于您是 CUDA 初学者，在我看来，这样的问题表明您试图不正确地解决问题。您要解决的问题是什么？如果您在 SM X 与 SM Y 上执行特定线程，它对您的问题有何帮助？如果您希望机器发挥最大性能，请以使所有线程处理器和 SM 都可以处于活动状态的方式构建您的工作，并且实际上对所有人来说“工作量绰绰有余”。GPU 依靠超额订阅的资源来隐藏延迟。

作为 CUDA 初学者，您的目标应该是：

*   在块和线程中创建足够的工作
*   有效地访问内存（这主要与*合并*有关 - 你可以阅读）

确保“每个 SM 的工作量相等”没有任何好处。如果您在网格中创建足够多的块，则每个 SM*的*工作量大致相等。这是调度器的工作，你应该让调度器来做。如果你没有创建足够的块，你的第一个目标应该是创建或找到更多的工作要做，而不是想出一个不会产生任何好处的每个块的花哨的工作分解。

Fermi GPU（例如）中的每个 SM 都有 32 个线程处理器。为了使这些处理器即使在由于内存访问等不可避免的机器停顿的情况下也保持忙碌，机器被设计为在发生停顿时通过交换另一个线程束 (32) 来*隐藏延迟*，以便处理可以继续. 为了促进这一点，您应该尝试为每个 SM 提供大量可用的经纱。这可以通过以下方式实现：

*   网格中的许多线程块（至少是 GPU 中 SM 数量的 6 倍）
*   每个线程块多个扭曲（可能至少 4 到 8 个扭曲，因此每个块有 128 到 256 个线程）

由于（Fermi）SM 一次总是执行 32 个线程，如果我的 GPU 中任何时刻的线程数少于 SM 数量的 32 倍，那么我的机器就没有得到充分利用。如果我的整个问题仅由 20 个线程组成，那么它的设计根本就不能很好地利用任何 GPU，并且将这 20 个线程分成多个 SM/线程块不太可能有任何明显的好处。

**编辑：**由于您不想发布您的代码，我将提出更多建议或意见。

1.  您尝试修改一些代码，发现它运行速度较慢，然后跳到（我认为）错误的结论。
2.  您可能应该熟悉一个简单的代码示例，例如[vector add](http://docs.nvidia.com/cuda/cuda-samples/index.html#vector-addition)。它不是将每个元素相乘，但结构很接近。使用单个线程执行此向量添加实际上不会运行得更快。我想如果你研究这个例子，你会找到一种直接的方法来扩展它来做数组元素乘以 2。
3.  没有人按照您概述的方式计算每个块的线程数。首先，每个块的线程数应该是 32 的倍数。其次，习惯上选择每个块的线程作为起点，并从中构建其他启动参数，而不是相反。对于一个大问题，只需从每个块 256 或 512 个线程开始，而无需为此进行计算。
4.  根据您选择的线程块大小构建您的其他启动参数（网格大小）。您的问题本质上是一维的，因此一维线程块的一维网格是一个很好的起点。如果这个计算在 x 维度的最大块方面超过了机器限制，那么您可以让每个线程循环处理多个元素，或者扩展到 2D 网格（1D 线程块）。
5.  您的偏移量计算不必要地复杂。请参阅向量添加示例，了解如何使用相对简单的偏移计算来创建线程网格来处理数组。

# macos - sudo: ./install.sh: command not found is not working on Lion

> ID：14803062
> 
> 赞同：17
> 
> 时间：2013-02-10T21:57:22.670
> 
> 标签：macos, terminal, osx-lion, simple-openni

我一直在学习本教程以便在我的 Mac 上安装 SimpleOpenNI，但我一直卡在安装 OpenNI 和 NITE 组件上，因为它需要我导航到终端中的文件夹，然后运行“sudo ./install.sh” . 我这样做，我得到这个错误：

sudo: ./install.sh: 找不到命令

我已经在 Xcode 和所有东西中安装了命令行工具。

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-30T13:43:58.963

发生这种情况的原因是您尝试执行的脚本需要正确的权限。

类型：

```
sudo chmod a+x install.sh 
```

然后再试一次。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-30T21:33:22.827

> 在 install.sh 目录中

```
prompt$ sh install.sh 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-09T12:46:23.923

首先打开终端，输入 cd 然后将地图拖到终端并按回车。现在输入 sudo ./install.sh 就可以了。我花了很长时间才知道。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-27T06:18:01.047

.sh 脚本应该有 "\n" 换行符。如果使用“\r\n”换行符，也会出现“找不到命令”。至少在 FreeBSD 上是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-05T09:28:32.917

你需要以`VBoxLinuxAdditions.run`root身份运行，`not autorun.sh`

插入 Guest Additions ISO 后，打开文件并从边栏中打开光盘。然后，在 autorun.sh 所在窗口的背景中右键单击并选择

> 打开 > 终端

现在您可以运行以下命令来安装 Guest Additions：

> sudo ./VboxLinuxAdditions.run

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-15T05:03:25.280

我是新手，但这里有一个可能有助于解决 sh 问题的答案...我在橙色 pi prime H5 SBC 上运行 Armbian，经过 2 小时的搜索和尝试，我已经下载并解压缩了 arduino ide ....打开您要打开或安装的文件所在的目录...现在在目录顶部打开一个终端（在文件下它会说在此处打开一个终端）。现在 sh filename.sh 将起作用.

# jquery - jQuery Mobile Listview 的替代品

> ID：14803063
> 
> 赞同：1
> 
> 时间：2013-02-10T21:57:26.897
> 
> 标签：jquery, cordova, jquery-mobile

我目前在我的 PhoneGap 应用程序中使用带有分隔符的 jQuery Mobile 列表视图作为联系人列表。但我发现列表中有大量项目时它非常不稳定。我发现的两个主要问题是

1.  滚动长列表效果不佳。需要与 iScroll 集成。
2.  当滚动注册为单击时，iScroll 集成通常会导致错误。

是否有一个简单的独立列表视图可以替换它？我不想在这个阶段完全替换 jQueryMobile。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:44:27.943

您可以考虑在表格中显示它并使用 jQuery Mobile CSS 中的类来快速设置它的样式。或者您可以删除 listview 的默认应用程序并自己设置样式。

可能值得退后一步，从用户的角度来看，考虑这么长的列表是否对最终用户友好（更不用说 jQuery 移动版了）。

# javascript - 如何阻止图片库运行 onClick？

> ID：14803069
> 
> 赞同：0
> 
> 时间：2013-02-10T21:57:43.243
> 
> 标签：javascript, image, xhtml, gallery

我有一个网站，它有一个图片库，每隔几秒就会使用 JavaScript 更改一次图片；但是，我想知道当用户单击其中一个图像时如何阻止图像发生变化。

到目前为止，图像正在按计划旋转，但是当用户单击图像时，我似乎无法让“onClick”脚本停止旋转。我不需要弹出警报或需要它做任何事情，我只需要它在有人单击其中一张图片时停止图像旋转。

**这是我拥有的 HTML 代码：**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:59:33.680

```
else (getValue=='STOP')
{
    alert("STOPPED");

} 
```

这不会做你可能希望它做的事情。它应该是：

```
else if (getValue=='STOP')
{
    alert("STOPPED");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:30:35.807

首先，您在其中一行代码中错过了关键字“IF”。

但是，创建可终止的重复动作的方法是 setInterval ，然后使用 clearInterval 终止重复。

```
semaphore = setInterval(somefunction, someinterval);
clearInterval(semaphore); 
```

示例（我即兴写了这个，所以可能会有一些错误，但你明白了）：

```
<img src="./images/image1.jpg" id="imageGallery" name="imageGallery"
 onclick="chooseImg(this)" />

<script>

var turn = setInterval(function(){imgTurn()},5000);
var images = function2CreateImgArray();
var imageN = 0;

function chooseImg(img){
  clearInterval(turn);
  function2DisplayImg(imageN); // or do whatever
}

function imgTurn(){
   if (imageN++ >= images.length) imageN = 0;
   function2DisplayImg(imageN++);
}

</script> 
```

您可以将 setInterval 替换为 setTimeout。

```
var turn = setTimeout(function(){imgTurn()},5000); 
```

但是你需要使用 clearTimeout 来停止它：

```
clearTimeout(turn); 
```

但是如果你使用 setTimeout，你需要 setTimeout 来显示下一个图像，所以你甚至不需要 clearTimeout 来停止旋转。

```
<img src="./images/image1.jpg" id="imageGallery" name="imageGallery"
 onclick="chooseImg(this)" />

<script>

setTimeout(function(){imgTurn()},5000);
var images = function2CreateImgArray();
var imageN = 0;
var turn = 1;

function chooseImg(img){
  turn = 0;
  function2DisplayImg(imageN); // or do whatever
}

function imgTurn(){
   if (turn==0) return;
   if (imageN++ >= images.length) imageN = 0;
   function2DisplayImg(imageN++);
}

</script> 
```

# android - Android SDK 中 content://sms/inbox 查询的状态

> ID：14803079
> 
> 赞同：0
> 
> 时间：2013-02-10T21:58:49.577
> 
> 标签：android, sms, android-contentprovider

我正在尝试使用

```
Uri uri = Uri.parse("content://sms/inbox");
Cursor c= getContentResolver().query(uri, null, null ,null,null); 
```

来自这个[博客](http://mobdev.olin.edu/mobdevwiki/FrontPage/Tutorials/SMS%20Messaging)，但我偶然发现了来自@CommonsWare 和他的博客[的](http://www.androidguys.com/2009/12/14/code-pollution-reaching-past-the-sdk/)[这个答案](https://stackoverflow.com/a/2744029/932307)

这一切都在2岁左右。

此代码是否仍在 android 4.1.1 上运行或已被阻止。我在接收三星 Galaxy SIII 中收到的 SMS 广播时遇到问题（我在[这里](https://stackoverflow.com/questions/14801658/unable-to-receive-sms-receive-broadcast-on-galaxy-siii-running-4-1-1)发布了另一个问题。）

因此，寻找替代方案以使其发挥作用。

**我的问题**

使用是否有效，`content://sms/inbox`是否适用于所有版本的android？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:39:54.093

> 使用是否有效`content://sms/inbox`

这取决于您所说的“有效”是什么意思。

无法保证此内容提供程序将存在于所有设备上，也无法保证用户选择的 SMS 客户端将在此内容提供程序中存储其消息，即使它确实存在。

话虽如此，我不知道有任何设备缺少此提供程序。

> 它适用于所有版本的android吗？

Android 本身没有这个内容提供者。它由应用程序提供。用于此目的的常规应用程序是 AOSP SMS 客户端。

# android - 将 Android Acceleromter 值从 MainActivity 传递到 My GameView 类

> ID：14803080
> 
> 赞同：0
> 
> 时间：2013-02-10T21:58:51.120
> 
> 标签：android, class, accelerometer, dynamic-variables

我正在开发一款涉及测量加速度计值并根据这些值操纵角色位置的游戏。我只使用 X 轴。我在我的主要活动中启动了我的加速度计管理器，但我需要在另一个类中使用这些值。显然，这些值是不断变化的。如何将这些值传递给我的 GameView 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:31:40.830

为什么不采用 Android 方式呢？:)

当你实现一个触摸监听器时，你会做这样的事情：

```
myView.setOnTouchlistener(this): 
```

这告诉视图在被触摸时给你回电。以下是如何做你自己的：

定义一个接口并使用回调让类知道值已更改。

```
public interface AccelerometerUpdateListener {
    void onUpdate(int arg1, string arg2); ..<----add arguments you want to pass back
} 
```

在您的活动中：

```
public class MainActivity extends Activity implements AccelerometerUpdateListener {

ArrayList<AccelerometerUpdateListener > listeners = new ArrayList<AccelerometerUpdateListener >();

...

@Override
public void onCreate(Bundle savedInstanceState) 
{
    ...
    myGameClass.setResponseReceivedistener(this);
    ...
}

public void setUpdateListener(AccelerometerUpdateListener listener){
    if (!listeners.contains(listener){
        listeners.add(listener);
    }
}

public void removeUpdateListener(AccelerometerUpdateListener listener){
    if (listeners.contains(listener){
        listeners.remove(listener);
    }
} 
```

更新值时

```
for (AccelerometerUpdateListener listener:listeners){
   listener.onUpdate(arg1, arg2);
} 
```

在你的接收班：

```
public class MyGameClass implements AccelerometerUpdateListener {

...

@Override
public void onUpdate(int arg1, string arg2){
    // do whatever you need to do
} 
```

全部凭记忆，如有错别字请见谅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:16:27.753

如果您使用过传感器侦听器，您可能会考虑将该逻辑移至 GameView 类。不过，如果不查看您的代码，则不能完全确定。你有样品吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:04:23.513

您可以将它们保存为 Activity 的静态成员，或者每次它们发生变化时将它们传递给 GameView 类（新值）

# cloud - 在部署在云中的 VM 上安装软件

> ID：14803091
> 
> 赞同：0
> 
> 时间：2013-02-10T22:00:03.050
> 
> 标签：cloud, virtualization, virtual-machine

是否有可能在我将虚拟机 (VM) 部署到云平台后，通过安装新软件来更新 VM，而无需重新部署 VM？

我知道这可能取决于我使用的云，但是否有可能无需重新部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:38:28.767

是的。根据您的操作系统，您可以安装任何您想要的软件。例如，如果您使用的是 Linux，则可以使用 apt-get 或 yum；如果您使用的是 Windows，则可以下载所需的任何安装程序。

但是，如果某些软件需要重新启动才能正确安装，您需要检查并查看您的云平台是否支持 VM 重新启动。

# java - 使用java的线程互斥

> ID：14803094
> 
> 赞同：0
> 
> 时间：2013-02-10T22:01:08.943
> 
> 标签：java, multithreading

我有这个代码，它是互斥算法

```
turn = 0 // shared control variable    

while (turn != i);

// CS

turn = (turn + 1) % n; 
```

我知道线程是如何工作的，但实际上我在 java 中使用线程方面有点弱，所以请任何建议来帮助我理解如何使用 java 的线程将其转换为实际代码

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:09:37.347

以最简单的形式，通常通过将方法标记为同步来实现互斥。通过将对象的方法标记为同步，一次只有一个线程可以执行该对象的方法。拥有该方法的对象是监视器。

此外，您可以在代码本身中定义一个同步块，将对象传递给它以充当监视器。

我相信您可以通过定义一个具有您想要完成的逻辑的 Runnable 对象以更简单的方式实现相同的目标。在需要互斥的地方，定义一个同步方法。

然后可以将该 Runnable 实例传递给您需要的任意数量的线程。由于它们都引用同一个 Runnable，因此对同步方法的调用将是互斥的。

这不是唯一的方法，但它应该是你所追求的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:49:51.223

此代码不是互斥的，请考虑此执行-

1.  线程 0 输入代码和 CS，然后在最后一行递增 turn 到 1。
2.  线程 1 在轮数等于 1 时进入 CS，并停留
3.  现在线程 0 回到第一行并将 turn 设置为 0，然后与线程 1 一起进入 CS

# java - 尝试将列表转换回数组时出现 NullPointerException

> ID：14803097
> 
> 赞同：4
> 
> 时间：2013-02-10T22:01:19.787
> 
> 标签：java, arrays, list, nullpointerexception

尝试将列表转换回数组时，我得到了 NPE。我调试了一遍，发现我的列表得到了一个额外的值为空的值。

为什么会发生，更重要的是我该如何解决这个问题？

```
List<String> attrList = new LinkedList<String>(Arrays.asList(attrArray))

//I loop through and remove unnecessary elements

 attrArray = attrList.toArray(attrArray);

//next line uses attrArray and is throwing NPE.

Here's what I found through debugging,

attrList = [1, 2, 3]

attrArray = [1, 2, 3, null] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T22:06:18.230

尝试更换

```
attrArray = attrList.toArray(attrArray); 
```

和

```
attrArray = attrList.toArray(new String[attrList.size()]); 
```

我认为它会起作用，因为你现在拥有的是

```
List<String> attrList = new LinkedList<String>(Arrays.asList(attrArray));
// I loop through and remove unnecessary elements
attrArray = attrList.toArray(attrArray); 
```

和[`List#toArray(T[] a)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5B%5D%29)状态的JavaDoc（我强调）：

> 如果列表适合指定的数组并有剩余空间（**即数组的元素多于列表**），则数组中紧随列表末尾的元素设置为`null`。（仅当调用者知道列表不包含任何空元素时，这对确定列表的长度很有用。）

# python - 联合分布生成列表

> ID：14803100
> 
> 赞同：1
> 
> 时间：2013-02-10T22:01:29.347
> 
> 标签：python, list, dynamically-generated

我很确定这是一个简单的问题，但我完全不知道如何解决这个问题。我正在尝试学习 coursera 上的 PGM 课程，它从联合概率分布开始。所以我试图生成给定n个变量的所有可能分布的列表，其中每个变量都可以在0...z之间取一些离散值

例如，假设我们有 3 个变量，每个变量只能取 0 和 1 我想生成这个：

```
[[0, 0, 1]
[0, 1, 0]
[1, 0, 0]
[1, 1, 0]
[0, 1, 1]
[1, 1, 1]
[1, 0, 1]
[0, 0, 0]] 
```

我在 python 中工作，我对如何动态生成它画了一个空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:27:22.513

如果您更喜欢列表理解：

```
[[a, b, c] for a in range(2) for b in range(2) for c in range(2)] 
```

而且我忘了提到你可以使用 pprint 来获得你想要的效果：

```
>>> import pprint  
>>> pprint.pprint([[a, b, c] for a in range(2) for b in range(2) for c in range(2)])  
[[0, 0, 0],  
 [0, 0, 1],  
 [0, 1, 0],  
 [0, 1, 1],  
 [1, 0, 0],  
 [1, 0, 1],  
 [1, 1, 0],  
 [1, 1, 1]]  
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:13:23.437

听起来您想要笛卡尔积：

```
from itertools import product
for x in product([0,1], [0,1], [0,1]):
    print x 
```

> [0, 0, 0]
> [0, 0, 1]
> [0, 1, 0]
> [0, 1, 1]
> [1, 0, 0]
> [1, 0, 1]
> [1, 1, 0]
> [ 1, 1, 1]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T03:29:11.793

比 Nathan 的方法略有改进：

```
>>> import itertools
>>> list(itertools.product([0, 1], repeat=3))
[(0, 0, 0),
 (0, 0, 1),
 (0, 1, 0),
 (0, 1, 1),
 (1, 0, 0),
 (1, 0, 1),
 (1, 1, 0),
 (1, 1, 1)] 
```

# php - 使用 Composer 替换库中更改的文件

> ID：14803105
> 
> 赞同：0
> 
> 时间：2013-02-10T22:02:09.620
> 
> 标签：php, composer-php

我正在使用已安装的库尝试一些事情，并最终更改了一些文件。我想将这些恢复到原来的状态。我知道我可以删除该库并再次安装它，但想知道是否有一个 composer 命令来仅替换已编辑的文件。我正在考虑诸如“git reset --hard HEAD”之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:15:30.917

如果库是从 zip 文件安装的，则不可能。删除 vendor/foo/bar 目录并运行 composer install 是最简单的方法。如果您有供应商的 git 克隆，那么显然您可以`git checkout .`重置所有内容。

# php - 这个算法是可逆的吗？

> ID：14803107
> 
> 赞同：0
> 
> 时间：2013-02-10T22:02:13.680
> 
> 标签：php, algorithm

我为我的项目用 PHP 编写了这个算法：

```
<?php
$s = "abc"; //input -- string

$n = strlen($s);
$b = 0;
for ($i = 0; $i < $n; $i++)
{
$b += ord($s[$i]) * pow(31, ($n - ($i + 1)));
}

echo $b; //output -- int
?> 
```

但是现在我必须将其反转以从整数中获取字符串。我试过了，但失败了，有**什么**办法可以扭转它吗？

**编辑：** “任何方式”我的意思是它不必反转到原始文本，而只需反转到给出该值的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:05:21.087

不，这不对...

更简单的例子：让我们为每个字母分配一个值：a=1,b=2,c=3,d=4 等等...

我们开始吧：你有“5”——你不知道它是“ad”还是“bba”还是“bc”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:09:46.210

如果可以保证字符串上只有小写字母，则可以；你必须弄清楚它的数学（我建议你在纸上算出算法，把字母作为变量；解方程，你会看到如何反转它）。

如果字符串是任意的，则否；因为您将每个字符转换为数字的 base-31 表示，将其移动并添加结果 - 但是，这种添加有很多进位，因此您不能仅从数字中计算出原始字符（即是，最终的数字）的结果。

**编辑：**鉴于您的编辑，是的，这是可能的。不过，这可能有点复杂——我会让你自己计算数学。试着用数字 31 玩一下。

# java - 将数据库连接释放回池？

> ID：14803109
> 
> 赞同：1
> 
> 时间：2013-02-10T22:02:21.360
> 
> 标签：java, database, jakarta-ee, transactions

在 Java EE 环境中，我定义了 2 个指向 2 个数据库的数据源。使用的驱动程序支持 XA 事务。

如果我开始一项涉及两个 Db 的事务

```
StartXaTran (){
Updatedb1();
UpdateDb2();
} 
```

何时将来自 db1 的连接返回到池中？

在 Xa 事务结束时的第一种方法之后？

谢谢

# grails - 为移动和桌面站点重用 Grails Webflow

> ID：14803110
> 
> 赞同：0
> 
> 时间：2013-02-10T22:02:24.807
> 
> 标签：grails

我有一个适用于我的桌面浏览器应用程序的 grails webflow。现在我想为我的移动网站重用 webflow。我不希望有 2 个单独的网络流，而只是更改用于每个状态的页面。我尝试了以下方法：

```
viewState{
    String view = 'viewState'
    boolean isMobile = this.isMobileUser()
    if(isMobile){
        view = "/flowDir/mobile/viewState"
    }       
    render(view:view)       
} 
```

但是，这是行不通的。如果首先访问移动站点，则桌面将获取移动页面，反之亦然。

有没有人遇到过这个问题？我真的很讨厌有 2 个做同样事情的 webflow。我也讨厌侵入 Sitemesh。任何关于如何重用此流程的想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:03:44.817

我同意 droggo 的观点，即响应式设计是最好的解决方案。

但是，作为替代方案，您可能会让所有 webflow 用户进入同一个视图，但在该视图本身内，您可以使用自己的 taglib 覆盖 g:layout taglib，该 taglib 能够确定您是否以移动用户与否，因此可以应用适当的布局。

在这种情况下，它可能有点笨拙，但它会为您提供一个可在整个应用程序中重用的解决方案，而不仅仅是在 webflow 中，并且它将特定于移动设备的代码保存在一个地方。

所以在你的网络流中：

```
viewState{
    String view = 'viewState'
    [snip] The rest of your code goes here     
    render(view:view)       
} 
```

然后你的观点：

```
<myapp:applyLayout name="someWebflowLayout">
    [snip] Your non-layout GSP code goes here    
</myapp:applyLayout> 
```

然后你的标签库：

```
class MyAppTagLib {
    static namespace = "myapp"

    def applyLayout = { attrs, body ->

        boolean mobileUser = false
        [snip] some logic to determine if this is a mobile user or not goes here

        if (mobileUser) {
            attrs.name = "mobileLayout/${attrs.name}"
        } else {
            attrs.name = "desktopLayout/${attrs.name}"
        }

        out << g.applyLayout(attrs, body)
    }
} 
```

然后，您将拥有两个名为 someWebflowLayout 的布局文件 - 一个位于 /layouts/mobileLayout 中，一个位于 /layouts/desktopLayout 中（尽管我很欣赏这些可能与您现有的结构不完全匹配）

上面 taglib 中的代码只是一个粗略的指导，它需要支持来处理 g:applyLayout 采用的其他参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:46:37.440

尝试将移动视图分辨率放入后过滤器中，以便您的 Web 流程执行相同的操作，但您拦截正在呈现的视图并重命名它。

[http://adammonsen.com/post/548](http://adammonsen.com/post/548)

# jquery - 页面提交后插件不呈现

> ID：14803111
> 
> 赞同：1
> 
> 时间：2013-02-10T22:02:30.720
> 
> 标签：jquery

嗨，我在 document.ready 函数的页面上初始化了几个 jquery 插件，如下所示：

```
jQuery(document).ready(function($){  

    /* Date Picker */
    $('#FromDate').Zebra_DatePicker({
        offset:[-600, 150],
        format:'<?php echo $OrisHandler->__SYSTEM_DATE_FORMAT_NOS ?>'
    });   

    ... other plugins ...    

}); 
```

问题是一旦提交此页面，插件就不会像第一次访问页面时那样呈现。我试图将代码以在文档就绪之外的函数中呈现插件，然后将其作为文档就绪的参数调用。该功能在页面重新加载时一直触发，但现在插件没有被呈现？也许与 DOM 结构有关。任何建议任何人

# c++ - 将 std::bind 成员函数绑定到对象实例的快捷方式，无需绑定参数

> ID：14803112
> 
> 赞同：12
> 
> 时间：2013-02-10T22:02:49.580
> 
> 标签：c++, stdbind

我有一个带有几个参数的成员函数。我想将它绑定到特定的对象实例并将其传递给另一个函数。我可以用占位符做到这一点：

```
// actualInstance is a MyClass*
auto callback = bind(&MyClass::myFunction, actualInstance, _1, _2, _3); 
```

但这有点笨拙——首先，当参数数量发生变化时，我也必须更改所有绑定调用。但此外，键入所有占位符非常繁琐，而我真正想要的是方便地创建一个包含对象引用的“函数指针”。

所以我想做的是：

```
auto callback = objectBind(&MyClass::myFunction, actualInstance); 
```

有谁知道一些不错的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T22:28:41.680

我认为这会起作用：

```
template<typename R, typename C, typename... Args>
std::function<R(Args...)> objectBind(R (C::* func)(Args...), C& instance) {
    return [=](Args... args){ return (instance.*func)(args...); };
} 
```

然后：

```
auto callback = objectBind(&MyClass::myFunction, actualInstance); 
```

注意：您需要重载来处理 CV 限定的成员函数。IE：

```
template<typename R, typename C, typename... Args>
std::function<R(Args...)> objectBind(R (C::* func)(Args...) const, C const& instance) {
    return [=](Args... args){ return (instance.*func)(args...); };
} 
```

# c++ - 如何使用 boost::asio 找到 UDP 数据包的目标地址？

> ID：14803119
> 
> 赞同：0
> 
> 时间：2013-02-10T22:03:37.957
> 
> 标签：c++, networking, boost, udp, boost-asio

我正在开发一个点对点通信网络，用于在工业环境中通过 LAN 使用。有些消息只是异步的，不需要响应。其他是请求-响应。请求消息（和异步消息）被发送到一个多播组，并且对请求的回复被单播发送。因此，每个端点接收发送到多播组的 UDP 数据包，并且还接收使用纯单播发送给它的消息。

到目前为止它工作正常，但在 boost::asio 中似乎没有任何方法可以找出接收到的 UDP 数据包的目标地址（使用 socket.async_receive_from）——无论它是发送到多播组还是实际界面。我可以使用消息的内容来推断它是通过多播还是单播发送的，但如果还能够检查目标地址，那就太好了。

我们目前使用的是 Windows 7，但将来会过渡到 Linux。

有没有办法找到使用 boost::asio 接收的 UDP 数据包的目标地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:31:10.410

不幸的是，这对于 boost::asio 是不可能的，而且通常不是“实现方式”，因为您尝试在[Application Layer访问](http://en.wikipedia.org/wiki/Application_layer)[Transport Layer](http://en.wikipedia.org/wiki/Transport_layer)信息。

所以你基本上有两个选择：

a) 在 Linux 上使用例如 IP_PKTINFO 或 SO_BINDTODEVICE 编写不可移植的系统代码。示例代码可以在 boost asio 邮件列表中[找到](http://osdir.com/ml/lib.boost.asio.user/2008-09/msg00000.html)

b) 使用两个不同的套接字，一个用于多播，一个用于单播。因此，您需要在每个套接字上指定一个非“0.0.0.0”的listen_address。

```
udp::endpoint(address_v4::from_string("239.192.152.143"), 6771) 
```

这个关于 SO 的问题也可能有帮助：[Using a specific network interface for a socket in windows](https://stackoverflow.com/questions/2065495/using-a-specific-network-interface-for-a-socket-in-windows)

# vb.net - 避免转义字符串中的所有双引号？

> ID：14803120
> 
> 赞同：0
> 
> 时间：2013-02-10T22:03:42.577
> 
> 标签：vb.net

在具有多个双引号的字符串中，是否有比转义每个人更简单的解决方案？

例如，这是一个 HTML 字符串：

```
Dim test As Regex = New Regex("^<div class="blah">\r\n<div class="blah"></div>\r\n</div>\r\n<div class="blah">\r\n(.+?)\r\n<div> class="blah">\r\n", RegexOptions.Singleline) 
```

或者，要保存字符串，可以告诉 VB.Net 使用双引号以外的另一个字符，例如。

```
New Regex(@my string="" my other string=""@) 
```

?

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:17:57.657

如果您确定 @ 符号不会出现在您的字符串中...

```
Dim s As String = Replace("^<div class=@blah@>\r\n<div class=@blah@></div>\r\n</div>\r\n<div class=@blah@>\r\n(.+?)\r\n<div> class=@blah@>\r\n", "@", """")
Dim test As Regex = New Regex(s, RegexOptions.Singleline) 
```

# matlab - 在 Matlab 发布的 PDF 中显示数字的问题

> ID：14803121
> 
> 赞同：2
> 
> 时间：2013-02-10T22:03:51.197
> 
> 标签：matlab

我无法在 R2012a 版本的 Matlab 中将我的 m 文件发布为 PDF 格式。我可以发布为 html 格式，但是当我尝试发布为 PDF 格式时，我的脚本中的任何数字（绘图）都会弹出，但一段时间后会关闭，而不会发布 PDF 文件本身。

我在 Linux 环境中运行并使用 Intel 机器。有谁知道发生了什么？提前致谢。

# vba - Word 2010宏设置保护只读不粘

> ID：14803124
> 
> 赞同：0
> 
> 时间：2013-02-10T22:03:59.783
> 
> 标签：vba, ms-word, ms-office, password-protection

我有一个 Word (2010) 宏，可以将链接广告集保护设置为只读。

If ActiveDocument.ProtectionType <> wdNoProtection Then ActiveDocument.Unprotect Password:="" End If

```
Selection.WholeStory
Selection.Fields.Unlink
Selection.StartOf

ActiveDocument.Protect Password:="", NoReset:=False, Type:= _
    wdAllowOnlyReading, UseIRM:=False, EnforceStyleLock:=False 
```

该文档仅作为表单域打开并包含一些复选框。当我运行宏并保存对文档的更改时，它仅作为表单字段重新打开，即使保护状态在保存前检查时只读。

奇怪的是，当我将保护设置为手动只读并保存时，只读属性仍然存在。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T05:44:15.957

```
Sub Test2()
If ActiveDocument.ProtectionType = wdNoProtection Then
ActiveDocument.Unprotect
End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T15:07:10.007

试试这个让你的文档只读：

```
Private Sub CommandButton1_Click()
Dim sPassword As String
sPassword = "YourPasswordHere"
.Protect NoReset:=True, _
Password:=sPassword, _
Type:=wdAllowOnlyReading
End With
End Sub 
```

然后，您可以使用您在代码中输入的密码通过开发人员选项卡取​​消对文档的保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:10:04.480

该`NoReset:=False`选项意味着表单将仅打开表单字段... - 换句话说，它将删除表单中的任何内容。如果这不是您想要的，则需要设置`NoReset:=True`.

# android - Andengine：FileNotFoundException：在 AssetBitmapTextureAtlasSource 中加载位图失败

> ID：14803128
> 
> 赞同：1
> 
> 时间：2013-02-10T22:04:28.540
> 
> 标签：android, filesystems, andengine

我正在尝试从已安装的 obb 扩展文件中加载纹理，但 AndEngine 无法打开此文件。那是我的代码：

```
 BuildableBitmapTextureAtlas atlas = new BuildableBitmapTextureAtlas(textureManager, 2048, 2048, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath(obbManager.getMainRoot() + "/");
    File file = new File(obbManager.getMainRoot() + "/background.png");
    if (file.exists()) {
        System.out.println("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
    }
    background = BitmapTextureAtlasTextureRegionFactory.createFromAsset(atlas, this, "background.png"); 
```

这就是我在 Logcat 中看到的：

```
02-10 22:40:09.170: INFO/System.out(20962): !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
02-10 22:40:09.180: ERROR/AndEngine(20962): Failed loading Bitmap in AssetBitmapTextureAtlasSource. AssetPath: /mnt/obb/8d6d9efb8ab5fbfaa452d7ff7e8047c5/background.png
        java.io.FileNotFoundException: /mnt/obb/8d6d9efb8ab5fbfaa452d7ff7e8047c5/background.png
        at android.content.res.AssetManager.openAsset(Native Method)
        at android.content.res.AssetManager.open(AssetManager.java:315)
        at android.content.res.AssetManager.open(AssetManager.java:289)
        at org.andengine.opengl.texture.atlas.bitmap.source.AssetBitmapTextureAtlasSource.create(AssetBitmapTextureAtlasSource.java:48)
        at org.andengine.opengl.texture.atlas.bitmap.source.AssetBitmapTextureAtlasSource.create(AssetBitmapTextureAtlasSource.java:39)
        at org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory.createFromAsset(BitmapTextureAtlasTextureRegionFactory.java:140)
        at org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory.createFromAsset(BitmapTextureAtlasTextureRegionFactory.java:132)
        at org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory.createFromAsset(BitmapTextureAtlasTextureRegionFactory.java:128) 
```

因此，该文件存在，但我仍然收到 FileNotFoundException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:02:16.370

我明白了：`createFromAsset`试图`/mnt/.../background.png`在 apk 中找到我的文件，而不是`assets/mnt/.../background.png`. 所以我应该使用 AndEngine 的 FileBitmapTextureAtlasSource：

```
BitmapTextureAtlasTextureRegionFactory.createFromSource(atlas, FileBitmapTextureAtlasSource.create(file)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T04:30:26.520

请尝试使用这个

```
background = BitmapTextureAtlasTextureRegionFactory.createFromAsset(atlas, getAssets(), "background.png"); 
```

代替

```
background = BitmapTextureAtlasTextureRegionFactory.createFromAsset(atlas, this, "background.png"); 
```

# php - 扩展时使用父类的方法

> ID：14803133
> 
> 赞同：0
> 
> 时间：2013-02-10T22:05:26.340
> 
> 标签：php

可能是一个愚蠢的问题..但是我如何在不覆盖它们的情况下正确使用 Testb 类中的 Test 类方法？

```
<?php
class Test {

    private $name;

    public function __construct($name) {
        $this->name = $name;
    }

    public function getName() {
        return $this->name;
    }

}

<?php

class Testb extends Test {

    public function __construct() {
        parent::__construct($name);
    }

}

<?php

include('test.php');
include('testb.php');

$a = new Test('John');
$b = new Testb('Batman');

echo $b->getName(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:10:17.853

如果您希望能够使用该参数对其进行初始化，则还需要为构造`Testb`函数提供一个参数。`$name`我修改了你的`Testb`类，使它的构造函数实际上接受了一个参数。您目前拥有它的方式，您应该无法初始化您的`Testb`类。我使用如下代码：

```
<?php
class Test {

    private $name;

    public function __construct($name) {
        $this->name = $name;
    }

    public function getName() {
        return $this->name;
    }

}

class Testb extends Test {

    // I added the $name parameter to this constructor as well
    // before it was blank.
    public function __construct($name) {
        parent::__construct($name);
    }

}

$a = new Test('John');
$b = new Testb('Batman');

echo $a->getName();
echo $b->getName();
?> 
```

也许您没有启用错误报告？无论如何，您可以在这里验证我的结果：http: [//ideone.com/MHP2oX](http://ideone.com/MHP2oX)

# c# - 使用 dataGridView 连接数据库

> ID：14803134
> 
> 赞同：0
> 
> 时间：2013-02-10T22:05:27.613
> 
> 标签：c#, database, datagridview

如何将我的 Trgovina.mdf 与 dataGridView 连接？我按照[本](http://tech.pro/tutorial/664/csharp-tutorial-binding-a-datagridview-to-a-database)教程进行操作，但该程序似乎找不到我的数据库。

连接字符串如下所示：

```
string connString = @"Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Users\Klemen\documents\visual studio 2012\Projects\Trgovina\Trgovina\Trgovina.mdf;Integrated Security=True"; 
```

其他一切与教程示例相同。错误字符串是`An OLE DB Provider was not specified in the ConnectionString. An example would be, 'Provider=SQLOLEDB;'`

完整代码如下[所示](http://pastie.org/6112613)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:16:54.123

您在问题中谈到的教程使用 Access 数据库，因此使用 OleDB 引擎来访问和使用数据库。相反，您的连接字符串使用为 SQLServer LocalDB 保留的语法。

您应该将对象更改为`SqlConnection`（而不是`OleDbConnection`），`SqlCommand`（而不是`OleDbCommand`）等等......

通过这些更改，您应该能够连接到 SqlServer LocalDB 的自动实例。本教程的其余部分是否有效，取决于所使用的 MDF 文件中存在的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:54:58.533

您尝试连接到数据库`.mdf file`，但您的提供者有误。

> An`MDF`是 Microsoft SQL Server 数据库，而不是像 Access (*.mdb) 这样的 Jet 数据库。您不能只连接到平面文件并阅读它。您需要将数据库安装在 SQL Server 实例中。您可以安装 SQL Server 2005 Express
> 
> [资源](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/e24a766f-a507-4755-9ceb-1ec0fbe70ed5)

**注意：**只需下载 MS SQL Server 2005 Express 或更高版本，您必须使用[System.Data.SqlClient](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.aspx)而不是[OLE DB](http://msdn.microsoft.com/en-us/library/aa288452%28v=vs.71%29.aspx)来解决您的问题。

# sql - 在 SQL 中连接 5 个表

> ID：14803135
> 
> 赞同：2
> 
> 时间：2013-02-10T22:05:28.073
> 
> 标签：sql, join

我在使用 SQL 语句时遇到问题。

基本上我有5张桌子，它们是：

书籍、记录、OrderedBooks、OrderedRecords 和 Orders。

My orders 包含客户下的所有订单，My orderedRecords 和 orderedBooks 包含与客户订单相关的所有账簿和记录，显然账簿和记录表包含与每本书和记录相关的信息。

我的orderedrecords 和orderedbooks 包含与相应书籍/记录相关的BookID 和RecordID。

我正在编写一个应用程序，它需要显示 booktitle、bookcost、bookQuantity、booksTotal(price*quantity) recordtitle、recordcost、recordQuantity、recordsTotal。

账簿和记录的总数不必使用 SQL 中的数学函数来计算。

到目前为止，我已经设法让它准确地给我想要的东西，但是，假设我有 3 个书籍订单和 1 个记录订单，对于记录订单的其余两行，它将复制数据而不是简单地空的。我尝试过左连接和右连接，但都没有用。

这是我的 SQL 语句...

```
SELECT Books.Title AS BookTitle
, Books.Cost AS BookCost
, OrderedBooks.Quantity AS BookQuantity
, OrderedBooks.Total AS BooksTotal
, Records.Title AS RecordsTitle
, Records.Cost AS RecordsCost
, OrderedRecords.Quantity AS RecordQuantity
, OrderedRecords.Total AS RecordsTotal 
-- Nothing wrong with select part
FROM Orders 
INNER JOIN OrderedBooks ON OrderedBooks.OrderID = Orders.ID 
FULL OUTER JOIN OrderedRecords ON OrderedRecords.OrderID = Orders.ID 
LEFT OUTER JOIN Books ON OrderedBooks.BookID = Books.ID 
LEFT OUTER JOIN Records ON OrderedRecords.RecordID = Records.ID 
WHERE (Orders.ID = 9) 
```

它为正确的订单号返回正确的订购书籍和记录，但是我似乎无法摆脱重复的行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-25T09:55:00.907

图书编号：

```
SELECT Books.Title AS BookTitle
, Books.Cost AS BookCost
, OrderedBooks.Quantity AS BookQuantity
, OrderedBooks.Total AS BooksTotal
, Records.Title AS RecordsTitle
, Records.Cost AS RecordsCost
, OrderedRecords.Quantity AS RecordQuantity
, OrderedRecords.Total AS RecordsTotal
FROM Orders 
INNER JOIN OrderedBooks ON OrderedBooks.OrderID = Orders.ID 
FULL OUTER JOIN OrderedRecords ON OrderedRecords.OrderID = Orders.ID 
LEFT OUTER JOIN Books ON OrderedBooks.BookID = Books.ID 
LEFT OUTER JOIN Records ON OrderedRecords.RecordID = Records.ID 
WHERE (Orders.ID = 9)
GROUP BY Books.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:14:11.243

一个简单的 SELECT DISTINCT 怎么样：

```
SELECT DISTINCT
Books.Title AS BookTitle
, Books.Cost AS BookCost
, OrderedBooks.Quantity AS BookQuantity
, OrderedBooks.Total AS BooksTotal
, Records.Title AS RecordsTitle
, Records.Cost AS RecordsCost
, OrderedRecords.Quantity AS RecordQuantity
, OrderedRecords.Total AS RecordsTotal 
-- Nothing wrong with select part
FROM Orders 
INNER JOIN OrderedBooks ON OrderedBooks.OrderID = Orders.ID 
FULL OUTER JOIN OrderedRecords ON OrderedRecords.OrderID = Orders.ID 
LEFT OUTER JOIN Books ON OrderedBooks.BookID = Books.ID 
LEFT OUTER JOIN Records ON OrderedRecords.RecordID = Records.ID 
WHERE (Orders.ID = 9) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T01:45:56.633

尝试使用 GROUP BY 语句

像这样：

```
SELECT Books.Title AS BookTitle
, Books.Cost AS BookCost
, OrderedBooks.Quantity AS BookQuantity
, OrderedBooks.Total AS BooksTotal
, Records.Title AS RecordsTitle
, Records.Cost AS RecordsCost
, OrderedRecords.Quantity AS RecordQuantity
, OrderedRecords.Total AS RecordsTotal
FROM Orders 
INNER JOIN OrderedBooks ON OrderedBooks.OrderID = Orders.ID 
FULL OUTER JOIN OrderedRecords ON OrderedRecords.OrderID = Orders.ID 
LEFT OUTER JOIN Books ON OrderedBooks.BookID = Books.ID 
LEFT OUTER JOIN Records ON OrderedRecords.RecordID = Records.ID 
WHERE (Orders.ID = 9)
GROUP BY BookTitle 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T23:50:43.040

由于属于一个订单的账簿和记录之间没有关系，因此不应将它们连接在一起，而应使用两个不同的查询来查找账簿和记录的信息。

那么一种可能性是：

```
SELECT 'Book' AS Type
, Books.Title AS Title
, Books.Cost AS Cost
, OrderedBooks.Quantity AS Quantity
, OrderedBooks.Total AS Total
FROM Orders 
INNER JOIN OrderedBooks ON OrderedBooks.OrderID = Orders.ID 
INNER JOIN Books ON OrderedBooks.BookID = Books.ID 
WHERE (Orders.ID = 9)

UNION

SELECT 'Record' AS Type
, Records.Title AS Title
, Records.Cost AS Cost
, OrderedRecords.Quantity AS Quantity
, OrderedRecords.Total AS Total
FROM Orders 
INNER JOIN OrderedRecords ON OrderedRecords.OrderID = Orders.ID 
INNER JOIN Records ON OrderedRecords.RecordID = Records.ID 
WHERE (Orders.ID = 9) 
```

# javascript - 如何在 html 页面中显示变化的变量（如数字）？

> ID：14803136
> 
> 赞同：0
> 
> 时间：2013-02-10T22:05:36.380
> 
> 标签：javascript, html

假设我有一个简单的页面，它只包含一个按钮，单击该按钮会将 1 添加到 java 脚本 num 变量：

HTML：

```
<body>
<div>
<button type="button" onclick="someFunction()">Clicking here adds 1 to the "count" variable</button>
</div>
<br>
<div id="output"></div>
</body> 
```

Javascript：

```
var count = new num;

someFunction() {
    count =+ 1;
} 
```

所以我的问题是你会在 js 中放入什么来显示 id 为“输出”的 div 中的“计数”变量？你使用innerHTML 吗？因为这似乎不起作用......

另外，是否可以使用或不使用 jQuery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:07:41.680

为什么不？但是，您必须注意，数字增量必须使用`count += 1`或更短的`count++`. 在以下示例中，我使用前缀增量在分配前进行计算。

```
var count = 0;
function someFunction() {
    document.getElementById("output").innerHTML = ++count;
} 
```

此外，请考虑使用如上所述的初始值初始化数值变量。

# nhibernate - 在 Get() 之后急切地加载关联

> ID：14803137
> 
> 赞同：1
> 
> 时间：2013-02-10T22:05:50.993
> 
> 标签：nhibernate, nhibernate-3

我试图找到比这更好的方法来加载关系：

```
result = session.Get<Author>(id);
Course course = result.Courses.FirstOrDefault(); 
```

我可以像这样使用 QueryOver API 做到这一点：

```
result = session.QueryOver<Author>()
                .Where(item => item.Id == id)
                .Fetch(item => item.Courses).Eager
                .SingleOrDefault(); 
```

我猜它会生成相同的 SQL，但它太冗长了。

有没有办法做类似下面的事情？

```
session.Fetch(result, author => author.Courses); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:49:55.477

获取是由映射驱动的。如果它真的有意义，请更改您的映射（但我不会这样做）。构造映射没有运行时切换。

根据我的经验，在 Get(id) 期间再选择几个语句不是问题......对于 N + 1 你已经在你的问题中展示了更好的解决方案。

关于 eagar 加载的有趣阅读：http: [//nhforge.org/wikis/howtonh/lazy-loading-eager-loading.aspx](http://nhforge.org/wikis/howtonh/lazy-loading-eager-loading.aspx)

# ruby-on-rails - 在 rails 中设置 has_one 关系

> ID：14803144
> 
> 赞同：0
> 
> 时间：2013-02-10T22:06:43.807
> 
> 标签：ruby-on-rails, ruby, has-one

我不知道为什么这**不起作用**：

```
home_team = Team.find_by_name! home_team["name"]
away_team = Team.find_by_name! away_team["name"]

fixture.home_team = home_team
fixture.away_team = away_team 
```

但这**确实**：

```
home_team = Team.find_by_name! home_team["name"]
away_team = Team.find_by_name! away_team["name"]

fixture.home_team_id = home_team.id
fixture.away_team_id = away_team.id 
```

夹具型号：

```
class Fixture < ActiveRecord::Base
  has_one :home_team, foreign_key: 'home_team_id', class_name: 'Team'
  has_one :away_team, foreign_key: 'away_team_id', class_name: 'Team'
  ...
end 
```

我没有收到任何错误，并且行保存，但是`home_team_id`两者`away_team_id`都是`null`...

有人可以解释吗？

# html - 在没有封闭表单的情况下使用“表单控件”和组织者在语义上是否不正确？

> ID：14803145
> 
> 赞同：1
> 
> 时间：2013-02-10T22:06:44.420
> 
> 标签：html, forms

我的问题源于 Web 应用程序的上下文，而不是网页。在这种情况下，提交数据通常没有任何意义。您想使用控件修改应用程序中的状态。

对我来说，使用表格没有任何意义。但是我仍然需要控件/小部件来修改。这意味着我需要诸如输入之类的标签，我理解它是一个“表单控件”，表明它们应该始终包含在表单中。此外，我想在字段集标签中组织我的控件。

所以我想知道我现在是否必须将所有控件包装在表单标签中，即使这对我来说似乎在语义上不正确（因为我不会提交）。

经过几次快速搜索后，我发现了以下两个有关主题的 breif 论坛讨论：

1.  [http://www.webmasterworld.com/forum21/8837.htm](http://www.webmasterworld.com/forum21/8837.htm)
2.  [http://doctype.com/can-fieldset-outside-form](http://doctype.com/can-fieldset-outside-form)

总而言之，在表单之外使用表单控件将在 w3c 上验证。然而，渲染可能无法在真正旧的浏览器中工作（比如 Netscape 4，我真的不在乎。）

在第一个链接中，似乎支持在表单之外使用表单控件作为在我的场景中做的语义正确的事情。然而，另一方面，当关心语义正确时，似乎应该严格在表单内使用字段集。

这是否意味着我可以随意使用表单之外的控件，但我必须将它们包装在 div 而不是字段集中，还是应该以其他方式阅读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:03:05.637

[w3c](http://www.w3.org/TR/html401/interact/forms.html)规定：

17.2.1 控制类型

> 用于创建控件的元素通常出现在 FORM 元素内，但在用于构建用户界面时也可能出现在 FORM 元素声明之外。这将在关于内在事件的部分中讨论。请注意，窗体外的控件不能是成功的控件。

17.10 向表单添加结构：FIELDSET 和 LEGEND 元素

> FIELDSET 元素允许作者对主题相关的控件和标签进行分组。

17.10 没有提及表单元素，对我来说，这意味着除了它应该围绕控件和标签外，它的使用位置没有任何限制。17.10.2 似乎允许我在表格之外使用那些。因此，我也可以在表单之外使用字段集，只要它包含控件和标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:55:38.213

我遇到过需要有表单控件而不需要实际提交表单的用例。

有时，包含在标签内只会让事情变得更糟，因为我可能对调用 JS 函数感兴趣，而表单只是提交并重新加载页面。我在 WindowsPhone 上使用 PhoneGap 应用程序时遇到过这种情况。

至于我，我不会太在意 W3C 验证，因为它让生活变得更加简单。

# windows-7 - Git bash `cp` - 排除“受保护的操作系统文件”（那些是什么？）

> ID：14803148
> 
> 赞同：1
> 
> 时间：2013-02-10T22:07:36.423
> 
> 标签：windows-7, cp, git-bash, protected-folders

如果我尝试使用`cp`Git bash（在 Windows 7 上）复制我的主目录，则会复制我想要的更多内容。以下是演示该问题的*示例。*实际上我想递归地复制，但在这个例子中我没有加快速度。

```
Simon@SIMONS-DATOR ~
$ mkdir /c/test

Simon@SIMONS-DATOR ~
$ cp ./* /c/test
cp: omitting directory `./AppData'
cp: omitting directory `./Contacts'
cp: omitting directory `./Cookies'
cp: omitting directory `./Desktop'
cp: omitting directory `./Documents'
cp: omitting directory `./Downloads'
cp: omitting directory `./Dropbox'
cp: omitting directory `./Favorites'
cp: omitting directory `./GodMode.{ED7BA470-8E54-465E-825C-99712043E01C}'
cp: omitting directory `./Links'
cp: omitting directory `./Lokala inst\303\244llningar'
cp: omitting directory `./Mallar'
cp: omitting directory `./Mina dokument'
cp: omitting directory `./Music'
cp: `./NTUSER.DAT.exe' and `/c/test/NTUSER.DAT' are the same file
cp: omitting directory `./N\303\244tverket'
cp: omitting directory `./Pictures'
cp: omitting directory `./Programdata'
cp: omitting directory `./Recent'
cp: omitting directory `./Saved Games'
cp: omitting directory `./Searches'
cp: omitting directory `./SendTo'
cp: omitting directory `./Skrivare'
cp: omitting directory `./Start-meny'
cp: omitting directory `./Videos'
cp: `./ntuser.dat.LOG1.exe' and `/c/test/ntuser.dat.LOG1' are the same file
cp: `./ntuser.dat.LOG2.exe' and `/c/test/ntuser.dat.LOG2' are the same file

Simon@SIMONS-DATOR ~
$ ls /c/test
NTUSER.DAT{016888bd-6c6f-11de-8d1d-001e0bcde3ec}.TM.blf
NTUSER.DAT{016888bd-6c6f-11de-8d1d-001e0bcde3ec}.TMContainer00000000000000000001.regtrans-ms
NTUSER.DAT{016888bd-6c6f-11de-8d1d-001e0bcde3ec}.TMContainer00000000000000000002.regtrans-ms
NTUSER.DAT{6a7ede06-4c18-11e0-86c3-00262d9124f7}.TM.blf
NTUSER.DAT{6a7ede06-4c18-11e0-86c3-00262d9124f7}.TMContainer00000000000000000001.regtrans-ms
NTUSER.DAT{6a7ede06-4c18-11e0-86c3-00262d9124f7}.TMContainer00000000000000000002.regtrans-ms
NTUSER.DAT{8ef111c8-e816-11df-8bd5-00262d9124f7}.TM.blf
NTUSER.DAT{8ef111c8-e816-11df-8bd5-00262d9124f7}.TMContainer00000000000000000001.regtrans-ms
NTUSER.DAT{8ef111c8-e816-11df-8bd5-00262d9124f7}.TMContainer00000000000000000002.regtrans-ms
NTUSER.DAT{e9e59e5b-940d-11e0-8662-00262d9124f7}.TM.blf
NTUSER.DAT{e9e59e5b-940d-11e0-8662-00262d9124f7}.TMContainer00000000000000000001.regtrans-ms
NTUSER.DAT{e9e59e5b-940d-11e0-8662-00262d9124f7}.TMContainer00000000000000000002.regtrans-ms
_.swp
_viminfo
ntuser.ini
php_errors.log 
```

我不希望复制这些 ntuser 文件。如果我递归复制，我不希望复制以下文件夹（翻译尝试向右）：

```
~/Contacts
~/Cookies
~/Lokala inställningar    (Local settings)
~/Mallar                  (Templates)
~/Mina dokument           (My documents)
~/Nätverket               (The network)
~/Programdata
~/Recent
~/SendTo
~/Skrivare                (Printers)
~/Start-meny              (Start menu) 
```

如果我确实尝试复制 recursivley，则上述所有文件夹都将在目的地创建，但它们将保持为空，因为对它们的权限似乎被拒绝：

```
cp: cannot access `/c/Users/Simon/Cookies': Permission denied
cp: cannot access `/c/Users/Simon/Documents/Min musik': Permission denied
cp: cannot access `/c/Users/Simon/Documents/Mina bilder': Permission denied
cp: cannot access `/c/Users/Simon/Documents/Mina videoklipp': Permission denied
cp: cannot access `/c/Users/Simon/Lokala inst\303\244llningar': Permission denied
cp: cannot access `/c/Users/Simon/Mallar': Permission denied
cp: cannot access `/c/Users/Simon/Mina dokument': Permission denied
`/c/Users/Simon/NTUSER.DAT' -> `/e/Backup/Simon/NTUSER.DAT'
cp: `/c/Users/Simon/NTUSER.DAT.exe' and `/e/Backup/Simon/NTUSER.DAT' are the same file
cp: cannot access `/c/Users/Simon/N\303\244tverket': Permission denied
cp: cannot access `/c/Users/Simon/Programdata': Permission denied
cp: cannot access `/c/Users/Simon/Recent': Permission denied
cp: cannot access `/c/Users/Simon/SendTo': Permission denied
cp: cannot access `/c/Users/Simon/Skrivare': Permission denied
cp: cannot access `/c/Users/Simon/Start-meny': Permission denied
`/c/Users/Simon/ntuser.dat.LOG1' -> `/e/Backup/Simon/ntuser.dat.LOG1'
cp: `/c/Users/Simon/ntuser.dat.LOG1.exe' and `/e/Backup/Simon/ntuser.dat.LOG1' are the same file
`/c/Users/Simon/ntuser.dat.LOG2' -> `/e/Backup/Simon/ntuser.dat.LOG2'
cp: `/c/Users/Simon/ntuser.dat.LOG2.exe' and `/e/Backup/Simon/ntuser.dat.LOG2' are the same file 
```

`~/Documents`从上面的日志中可以看出， （右侧的翻译尝试）中似乎还有其他不需要的文件夹：

```
./Min musik          (My music)
./Mina bilder        (My pictures)
./Mina videoklipp    (My video clips) 
```

无论如何，由于权限被拒绝，我不会因这个问题而受苦：在我的目标文件夹中只会有一些额外的不必要的空文件夹和一些额外的不必要的文件，以及一些“权限被拒绝”`cp`抱怨日志。

在使用`cp`命令进行实验之前，我什至不知道这些文件。显然，必须取消选中文件夹选项中的“隐藏受保护的操作系统文件（推荐）”，以便它们显示在 Windows 资源管理器中，然后，当它们出现时，它们上面有那个小箭头，就像快捷方式一样，并且它们是半透明的，就像隐藏文件一样（如`~/AppData`）。

真正的用途是一个小的备份脚本，它用于`cp $src "$dstdir" --update --archive --backup=numbered --verbose`执行实际的复制，如果有任何感兴趣的话，使用`shopt -s extglob; shopt -s dotglob`and `src="/c/Users/Simon/!(AppData)"`（注意这意味着递归复制）。**编辑：**应该注意的是，我想用提到的备份脚本实现的是备份我的用户文件夹中的大多数文件（最重要的是我的文档、图片和视频，还有例如 .ssh 和 .gitconfig ，它们恰好在那里（除非我遵循 VonC 回答的建议））。我只是碰巧使用了 Git bash，因为我已经安装了它，它提供了一种非常简单的方法来进行我想要的备份。它与 Git 无关。另请参阅下面的附加编辑。`--arcgive`

 **那么如何防止`cp`命令尝试复制这些文件呢？（或者，我应该使用其他东西`cp`吗？（模糊的问题，我知道，但这不是主要问题，如果需要我可以详细说明。））

*最初是一个子问题*：这些文件是什么？（据我记得，它们中的许多作为 Windows XP 上更“普通”的文件夹存在。）**编辑：**它们可能是 Windows XP 的剩余部分，至少[本地设置是](http://www.addictivetips.com/windows-tips/access-windows-7-local-settings-folder/).

**编辑：** 出于备份文件的目的，这似乎是我的根本问题，感谢 VonC，我现在有很多解决方案和选项：

我已设置`%HOME%`为`/c/git`，这是我已经保存了所有存储库的位置，因此所有 Git (bash) 文件都可以在一个地方使用。此外，它简化了备份：我可以轻松地指向更具体的目标，而不是备份`/c/Users/Simon/!(AppData)`（如前所述）：

```
"/c/Users/Simon/Documents/*"
"/c/Users/Simon/Music/*"
"/c/Users/Simon/Pictures/*"
"/c/Users/Simon/Videos/*"
"/c/Users/Simon/Desktop/*" 
```

因此，我*主要*避免了这个问题，左边仍然有不需要的文件夹`~/Documents`（见上文）。

`xcopy`我现在明白，Windows 特定工具（例如`xxcopy`或`robocopy`）可能更适合备份，但现在我更喜欢它的简单性，`cp`而不必深入研究 Windows 命令行。

我希望这些关于备份的冗长评论对某人有用。我考虑“我应该使用其他东西`cp`吗？” 问题得到了充分回答，我的主要问题大部分解决了。

不过，**“我怎样才能阻止`cp`命令尝试复制这些/此类文件？”** 问题仍未解决（除了“使用 Windows 特定工具”之类的答案）并且可能与许多人相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:12:26.983

如果脚本备份是您所追求的，最好避免使用 cp，并使用 Windows 实用程序，如[**xxcopy**](http://www.xxcopy.com/)：
它可以管理各种 bazckup 场景，包括增量场景，[带有排除列表](http://www.xxcopy.com/xxtb_005.htm)。

* * *

以 git 为中心的原始答案

[git-cmd.bat](https://github.com/msysgit/msysgit/blob/master/git-cmd.bat)和wil[`git-bash`](https://github.com/msysgit/msysgit/blob/master/share/WinGit/Git%20Bash.vbs)都尝试使用`%USERPROFILE%`if`%HOME%`没有定义。

我建议在调用 git 命令*之前***定义环境变量`%HOME%`** ，以便只包含使用 git ( , , , ...) 和开发所需的内容。*`HOME``.gitconfig``_netrc``.ssh`*

 *这样，您就可以准确地控制您需要做的事情`cp`，而不是试图解决大量的混乱`/c/Users/aLoginName`。***

# php - 使用“if”短格式时出现评估错误

> ID：14803149
> 
> 赞同：0
> 
> 时间：2013-02-10T22:07:36.970
> 
> 标签：php, eval, parse-error

当做类似的事情时

```
$date = mktime();
$xxx = 'if ( date("N",$date ) == 1 ) { return TRUE; } else { return FALSE; }';
$yyy = eval( $xxx );
echo $yyy; 
```

有用。

但是当做类似的事情时

```
$date = mktime();
$xxx = '( date("N",$date) == 1 ? return TRUE : return FALSE );';
$yyy = eval( $xxx );
echo $yyy; 
```

我收到一个错误，例如

> 解析错误：语法错误，/my_path/my_file.php(107) 中的意外 T_RETURN：第 1 行的 eval() 代码

为什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:14:33.670

这与`eval`.

让我们创建*真正的*测试用例：

```
<?php
function foo()
{
   $date = mktime();
   ( date("N",$date) == 1 ? return TRUE : return FALSE );
}

foo();
?> 
```

[输出](http://codepad.org/8rhnHHeF)：

```
Parse error: syntax error, unexpected T_RETURN on line 5 
```

`return`是一个语句，而不是一个表达式，所以你不能将它嵌套到一个你想要在这里做的表达式中。`if`条件运算符不是/的单行替换`else`。

要正确使用条件运算符：

```
return (date("N",$date) == 1 ? TRUE : FALSE); 
```

这简化为：

```
return (date("N",$date) == 1); 
```

在您的代码中，如下所示：

```
$date = mktime();
$xxx = 'return (date("N",$date) == 1);';
$yyy = eval($xxx);
echo $yyy; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T22:11:06.183

我很确定应该是

```
$xxx = 'return ( date("N",$date) == 1 ? TRUE : FALSE );'; 
```

三元运算符生成的东西是值（表达式）而不是命令。

# c++ - 在析构函数中调用 CloseHandle 会导致运行时内存错误，如何正确关闭结构/类中的文件句柄？

> ID：14803155
> 
> 赞同：0
> 
> 时间：2013-02-10T22:07:57.127
> 
> 标签：c++, oop, winapi, handle

错误消息是：“0x7c810eac”处的指令引用了“0x00000000”处的内存。内存无法“写入”。

如果我删除析构函数一切都很好。但我不明白这里发生了什么。我在任何地方都读到我应该关闭句柄，但这里的代码不允许我这样做。（是的，我知道我可以手动完成......但这是客户端代码中不必要的行，我认为应该由对象处理。）

```
#include <windows.h>
#include <iostream>
#include <string>

struct fileHandle {
  HANDLE hFile;
  fileHandle(std::string path) {
    hFile = CreateFile(path.c_str(), GENERIC_WRITE, FILE_SHARE_READ, NULL, CREATE_NEW, FILE_ATTRIBUTE_ARCHIVE, NULL);
    if (hFile == INVALID_HANDLE_VALUE) {
      printf("error: INVALID_HANDLE_VALUE");
    }
  }
  ~fileHandle() {
    CloseHandle(hFile);
  }
  void save(std::string data) {
    if (!WriteFile(hFile, data.c_str(), data.size(), NULL, NULL)) {
      printf("WriteFile failed: ", GetLastError());
    }
  }
};

int main() {
  fileHandle my_handle("test_file.txt");
  my_handle.save("some text");
} 
```

更新：当文件不存在时会发生这种情况。当文件确实存在程序打印错误时，但这是有意的。我在这里要求仅在创建文件时覆盖这种情况（我知道如何重写句柄创建以覆盖现有文件。）

编译器：http: [//sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev7。 7z](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev7.7z)

更新 2：我没有提到此代码有效并写入文件。最后触发内存错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:29:58.433

**请使用 -Wall 编译所有代码。节省大量时间。**

在您的代码`printf`中具有无效的格式字符串。正确的解决方案`printf`是（注意**%lu**）：

```
void save(std::string data) {
  if (!WriteFile(hFile, data.c_str(), data.size(), NULL, NULL)) {
    printf("WriteFile failed: %lu", GetLastError());
  }
} 
```

如果您使用 编译`-Wall`，您的代码会给出警告：

```
filehandle.cpp: In member function 'void fileHandle::save(std::string)':
filehandle.cpp:18:50: warning: too many arguments for format [-Wformat-extra-args] 
```

此外，您应该打印错误，`stderr`因为它是无缓冲的。`printf`使用缓冲区，这就是为什么你没有得到任何输出。`\n`在错误之后添加一个也是一个好主意。

另请阅读其他答案以改进您的代码。使用[三法则](https://stackoverflow.com/questions/11024438/rule-of-three-in-c)。

* * *

阅读评论后，我意识到这确实不是段错误的原因。（另请查看 Ron Burk 的解决方案，看看出了什么问题。）

根据 Windows API 文档，`lpNumberOfBytesWritten`参数`NULL`只能在`lpOverlapped parameter`is not时使用`NULL`。

所以你必须给一个指向一个 DWORD 的指针，WriteFile 可以在其中存储它实际读取的字节数。最后的保存将是：

```
void save(std::string data) {
  DWORD writtenBytes;
  if (!WriteFile(hFile, data.c_str(), data.size(), &writtenBytes, NULL)) {
    printf("WriteFile failed: %lu", GetLastError());
  }
} 
```

如果文件存在，则不会弹出错误，因为将 INVALID_HANDLE_VALUE 传递给 WriteFile 似乎使 WriteFile 在使用您的指针之前返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T23:18:34.270

WriteFile() 的参数错误。倒数第二个参数不能为 NULL。将其更改为您设置为 0 的 DWORD 的地址，一切都会正常工作。当它试图写回写入的字节数时，它在内核中的 WriteFile() 中死亡。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T07:43:04.793

CloseHandle 的文档清楚地说明了为什么会发生这种情况：

> 如果应用程序在调试器下运行，则如果函数接收到无效的句柄值或伪句柄值，则该函数将引发异常。

因此，当您对 CreateFile 的调用失败时，对 CloseHandle 的后续调用将引发 SEH 异常。

解决方案是，如果对 CreateFile 的调用成功，您的代码必须仅调用 CloseHandle。

正如其他人指出的那样，您对 WriteFile 的使用是错误的。我不会在这里重复细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T22:14:12.257

```
~fileHandle() {
    if(hFile != INVALID_HANDLE_VALUE)
        CloseHandle(hFile);
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T22:14:28.520

您没有遵循三原则-因此，由于编译器生成的复制构造函数和复制赋值运算符的浅层，所有权`hFile`在副本之间共享。`fileHandle`

例如：

```
fileHandle my_handle("test_file.txt");
fileHandle my_second_handle = my_handle; 
```

其中哪一个实际上应该关闭销毁句柄？首先？当第二个超出范围并调用析构函数时会发生什么？

在这种情况下，我会说您应该禁止复制或分配，或查明所有权。

编辑：在您的片段中，问题可能[是 Ron 指出](https://stackoverflow.com/a/14803207/673730)的问题，但这仍然是重要的一点。

**不过，我不会这样对待它。**我认为如果文件无法打开，`fileHandle`就不应该存在。拥有无效对象有什么意义？我只是在构造函数中抛出一个异常以禁止无效对象，而不是在析构函数中进行检查。

```
fileHandle(std::string path) {
    hFile = CreateFile(path.c_str(), GENERIC_WRITE, FILE_SHARE_READ, NULL, CREATE_NEW, FILE_ATTRIBUTE_ARCHIVE, NULL);
    if (hFile == INVALID_HANDLE_VALUE) {
       throw std::exception("file not found");
    }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T22:14:31.613

您需要检查文件是否已正确打开。

```
 if (hFile != INVALID_HANDLE_VALUE) CloseFile(hFile); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-13T17:49:21.760

为了安全起见，请使用

```
~fileHandle() 
{

            if (hfile != INVALID_HANDLE_VALUE)
            {
                CloseHandle(hfile);
                hfile = INVALID_HANDLE_VALUE;
            }
} 
```

# node.js - Nodejs从多个源文件中使用modules.export导入多个类

> ID：14803156
> 
> 赞同：0
> 
> 时间：2013-02-10T22:08:08.767
> 
> 标签：node.js

我有一个目录，其中包含在客户端网页上导入的多个 js 源文件。我还需要将所有这些源文件导入服务器端节点 js 应用程序。

到目前为止，我使用了以下方法

```
if( 'undefined' != typeof global ) {
    module.exports = global.Class= Class;
} 
```

代码附加到源文件的末尾

但是我需要避免编辑源文件。有没有一种很好的方法来导入包含源文件夹的所有类？而不是只运行源文件并为每个类都有一个 modules.exports？还有一种方法可以为 require() 调用提供一个目录并让它导入所有包含的源文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:28:31.893

通过将对象导出到全局命名空间中，您有点违背了 Javascript 中的最佳标准。中的要点`module.exports`是，您可以使用它`requireJS`来导入您需要的对象，而不是让**每个**对象都可供您使用。所以恐怕答案是否定的，require 调用只接受单个模块引用（由于将对象分配给变量的函数的返回值）。

“好”的方法是在客户端上包含一个文件，该文件包含您的主要 cilent 代码，该代码引用它需要继续工作的模块/对象。然后将在需要时包含源文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:37:49.247

如果您可以修改客户端文件，则可以使用此模式：[http ://caolanmcmahon.com/posts/writing_for_node_and_the_browser/](http://caolanmcmahon.com/posts/writing_for_node_and_the_browser/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:08:46.490

文件：tool.js

```
(function(exports) {

    exports.Hello = function(name) {
        console.log('Hello %s', name);
    }

})(exports || window); 
```

文件 index.js

```
require('./tool').Hello('username'); 
```

# java - Java - 添加约束

> ID：14803157
> 
> 赞同：0
> 
> 时间：2013-02-10T22:08:11.473
> 
> 标签：java, if-statement, constraints

我制作这个类是为了好玩，现在我想添加一些约束和 if 语句。但不知道如何。

**问题 1)**我不知道如何在 System.out.print 输出上执行 if 语句。比如说，如果用户输入超过 50 个字符，那么他们将被阻止。

我知道如何在 MySQL 中做到这一点，但在 Java 中却不知道，因为我对 ATM 非常缺乏经验。:|

**问题2）**如果是nextLine，我也想限制自己输入数字，如果是nextInt，我也想限制自己输入文本。

谁能帮我解决这两个问题？

```
import java.util.Scanner;

class AppForm {
   public static void main(String args[]){

      Scanner sc = new Scanner(System.in);

      System.out.print("Enter your name... ");
      System.out.println("Your name is " + sc.nextLine());

      System.out.print("Enter your age... ");
      System.out.println("Your age is " + sc.nextInt());

   }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:14:15.943

`nextLine()`您应该首先通过将结果存储在变量中来分解输入和输出代码：

```
System.out.print("Enter your name... ");
String line = sc.nextLine();
System.out.println("Your name is " + line); 
```

然后，您可以对`line`字符串变量执行所需的任何检查。交互式程序的典型范例是打印出错误消息并要求用户在输入无效的情况下重复输入：

```
System.out.print("Enter your name... ");

String line = sc.nextLine();

while (line.length() > 50) {
    System.out.println("Error: you entered more than 50 characters");

    // Ask the user for their name again...
    System.out.print("Enter your name... ");
    line = sc.nextLine();
}

System.out.println("Your name is " + line); 
```

不幸的是，没有办法阻止用户输入无效字符 - 您只能在用户完成输入并且您的程序接收到输入的行*之后检查该行的内容。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:19:58.157

我建议看一下 while 循环。一些可能性：

```
String name;
do {
    System.out.print("Enter your name... ");
    String line = sc.nextLine();
while (StringUtils.isEmpty(name) || name.length() > 50) 
```

或：字符串名称；

```
while (StringUtils.isEmpty(name)) {
    System.out.print("Enter your name... ");
    name = sc.nextLine();
    if (name.length >= 50) {
        System.out.println("Max name length is 50");
    }
} 
```

但是有很多流量控制选项。

# spring - 在运行时创建数据源的 Spring 事务

> ID：14803158
> 
> 赞同：0
> 
> 时间：2013-02-10T22:08:12.263
> 
> 标签：spring, transactions

我在 spring 中遇到了事务问题，因为在我的项目中，数据源是在运行时从边文件并根据[文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)创建的：

我应该注入`TransactionManager dataSource`并`@Transactional`使用`<tx:annotation-driven transaction-manager="txManager"/>`.

所以我的问题是当我想使用注释时该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:39:09.060

首先，您如何在运行时创建数据源。如果直接，`Datasource=new datasource...`我将在 Spring 3.2 中使用 BeanDefinitionBuilder 来创建`Datasourcebean`，然后通过`BeanDefinitionRegistry`. 然后从 Spring 上下文中获取 bean，它将被考虑使用事务。

# text - 以编程方式围绕UIButton在UILabel中弯曲文本

> ID：14803162
> 
> 赞同：1
> 
> 时间：2013-02-10T22:08:30.000
> 
> 标签：text, uibutton, uilabel

通过将cornerRadius 属性设置为UIButton 的宽度和高度值的一半，我创建了一个圆形UIButton。

```
btn.layer.cornerRadius = 75.f; 
```

这很好用，但我还想为 UIButton 创建一个标签，其中标签文本围绕 UIButton 的边缘弯曲。

如果这是可能的，有人可以发布一段代码，说明如何实现按钮边缘周围的弯曲文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T22:33:16.200

您可能会看看这个问题：[Curve text on existing circle](https://stackoverflow.com/questions/3841642/curve-text-on-existing-circle)

它实际上不是 UIButton，但您肯定会了解如何在曲线上绘制文本。

尤其是 Apple 的示例项目[CoreTextArcCocoa](https://developer.apple.com/library/mac/#samplecode/CoreTextArcCocoa/Introduction/Intro.html)。它适用于 OS X 而不是 iOS，但您可能想检查一下。

# maven - ant任务检索maven配置文件依赖

> ID：14803166
> 
> 赞同：0
> 
> 时间：2013-02-10T22:08:48.007
> 
> 标签：maven, ant

我有一个带有自动生成的 ant 文件的 java 项目。所以我不得不使用 ant 来构建项目。我需要添加一些新的库，我使用了下面的 maven pom 文件。然后我使用 ant 任务来检索 pom 依赖项并将它们复制到 lib 文件夹中。但是，以下 ant 任务错过了 pom.xml 中的配置文件依赖项。我想做的是一个 ant 任务，以便基于当前的操作系统，它将包含操作系统的相应 xurlrunner jar。这是由 pom 中的 maven 完成的，但我如何使用 ant 来完成？

---蚂蚁目标任务----

```
<typedef resource="org/apache/maven/artifact/ant/antlib.xml"
             uri="urn:maven-artifact-ant"
             classpathref="maven-ant-tasks.classpath"/>

    <target name="retrieve-dependencies">
        <artifact:dependencies filesetId="dependency.fileset"
                               sourcesFilesetId="profiles.dependency.fileset"
                               versionsId="dependency.versions">
            <pom file="${basedir}/nbproject/pom.xml"/>
        </artifact:dependencies>

        <delete dir="${lib.dir}/browser"/>
        <copy todir="${lib.dir}/browser">
            <fileset refid="dependency.fileset"/>
            <mapper classpathref="maven-ant-tasks.classpath" classname="org.apache.maven.artifact.ant.VersionMapper"
                    from="${dependency.versions}" to="flatten"/>
        </copy>

    </target> 
```

---pom.xml-------

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.drOffice.browser</groupId>
  <artifactId>embedded-browser</artifactId>
  <version>0.0.1-SNAPSHOT</version>
   <build>
                <plugins>
                        <plugin>
                                <artifactId>maven-compiler-plugin</artifactId>
                                <configuration>
                                        <compilerVersion>1.6</compilerVersion>
                                        <encoding>UTF-8</encoding>
                                        <source>1.6</source>
                                        <target>1.6</target>
                                        <showDeprecation>true</showDeprecation>
                                </configuration>
                        </plugin>
                        <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>

                </plugins>
        </build>
        <repositories>
                <repository>
                        <id>atomation-repository</id>
                        <name>atomation maven repository</name>
                        <url>http://atomation-repository.googlecode.com/svn/trunk</url>
                        <releases>
                                <enabled>true</enabled>
                                <updatePolicy>always</updatePolicy>
                                <checksumPolicy>warn</checksumPolicy>
                        </releases>
                        <snapshots>
                                <enabled>true</enabled>
                                <updatePolicy>always</updatePolicy>
                                <checksumPolicy>warn</checksumPolicy>
                        </snapshots>
                        <layout>default</layout>
                </repository>
        </repositories>
        <dependencies>
                <dependency>
                        <groupId>ru.atomation.jbrowser</groupId>
                        <artifactId>jbrowser</artifactId>
                        <version>1.9</version>
                        <scope>compile</scope>
                </dependency>
        </dependencies>

        <profiles>

            <profile>
                        <id>generic</id>
                        <activation>
                                <activeByDefault></activeByDefault>
                        </activation>
                </profile>
                <profile>
                        <id>linux</id>
                        <dependencies>
                                <dependency>
                                        <groupId>ru.atomation.native</groupId>
                                        <artifactId>xulrunner-linux</artifactId>
                                        <version>1.9</version>
                                </dependency>
                        </dependencies>
                </profile>
                <profile>
                        <id>solaris</id>
                        <dependencies>
                                <dependency>
                                        <groupId>ru.atomation.native</groupId>
                                        <artifactId>xulrunner-solaris</artifactId>
                                        <version>1.9</version>
                                </dependency>
                        </dependencies>
                </profile>
                <profile>
                        <id>macosx</id>
                        <dependencies>
                                <dependency>
                                        <groupId>ru.atomation.native</groupId>
                                        <artifactId>xulrunner-macosx</artifactId>
                                        <version>1.9</version>
                                </dependency>
                        </dependencies>
                </profile>
                <profile>
                        <id>windows</id>
                        <dependencies>
                                <dependency>
                                        <groupId>ru.atomation.native</groupId>
                                        <artifactId>xulrunner-windows</artifactId>
                                        <version>1.9</version>
                                </dependency>
                        </dependencies>
                </profile>
        </profiles>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:11:20.363

如果只使用 Ant 复制依赖项，我认为使用 maven 复制这些依赖项会简单得多。

如果你真的想使用 Ant，你可以简单地在你的 pom 中定义属性（在配置文件中），然后在 Ant 脚本中使用它。

就像是

```
<profile>
     <id>linux</id>
     <properties>
         <custom.property>linux</custom.property>
     <properties>

..... 
```

# mysql - 将相似的值分组到新的选择语句中

> ID：14803167
> 
> 赞同：2
> 
> 时间：2013-02-10T22:08:48.463
> 
> 标签：mysql, sql

我有一张看起来像这样的桌子......

```
supplier_name  status       count 
supplier_a     Unavailable  1
supplier_a     Refunded     5
supplier_a     Shipped      10
supplier_z     Refunded     2
supplier_z     Shipped      4 
```

我确切地知道我想要什么列，我想使用第一个表中的值来返回结构如下的值......

```
supplier_name   unavailable   refunded   shipped
supplier_a      1             5          10
supplier_z      0             2          4 
```

（注意：如果特定列没有值，则应将其设置为 0）

这可以在查询中实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:15:01.750

试试这个：

```
SELECT
   supplier_name,
   SUM(COALESCE(CASE WHEN status = 'unavailable' THEN  `count` END, 0)) unavailable,
   SUM(COALESCE(CASE WHEN status = 'refunded' THEN  `count` END, 0)) refunded,
   SUM(COALESCE(CASE WHEN status = 'shipped' THEN  `count` END, 0)) shipped
FROM tbl
GROUP BY supplier_name 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/6b5f1/3)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:18:23.077

我认为这样的事情应该有效：

```
SELECT Supplier_Name, 
  MAX(CASE WHEN STATUS = 'Unavailable' THEN Count ELSE 0 END) as Unavailable,
  MAX(CASE WHEN STATUS = 'Refunded' THEN Count ELSE 0 END) as refunded,
  MAX(CASE WHEN STATUS = 'Shipped' THEN Count ELSE 0 END) as shipped
FROM YourTable
GROUP BY Supplier_Name 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/46ed6/2)。

祝你好运。

# c - 这段代码中有竞争条件吗？

> ID：14803170
> 
> 赞同：0
> 
> 时间：2013-02-10T22:09:31.043
> 
> 标签：c, multithreading, thread-safety, race-condition

我正在尝试掌握多线程编程的概念，并且我认为我做得很好，但是后来我为一个简单的`echo`服务器找到了以下代码：

[http://www.cs.utah.edu/~swalton/listings/sockets/programs/part2/chap7/echo-thread.c](http://www.cs.utah.edu/~swalton/listings/sockets/programs/part2/chap7/echo-thread.c)

而且我认为代码是错误的，因为它使用相同的`main`局部变量来存储每个传入连接的数据套接字。特别是，我担心这部分`main()`：

```
while (1)
{   int client, addr_size = sizeof(addr);
    pthread_t child;

    client = accept(sd, (struct sockaddr*)&addr, &addr_size);
    printf("Connected: %s:%d\n", inet_ntoa(addr.sin_addr), ntohs(addr.sin_port));
    if ( pthread_create(&child, NULL, Child, &client) != 0 )
        perror("Thread creation");
    else
        pthread_detach(child);  /* disassociate from parent */
} 
```

据我了解，循环`client`本地的变量在`while`循环的每次迭代中都分配在完全相同的地址。因此，当第一个客户端被接受时，线程接收`&client`，当第二个客户端被接受时，`client`新的数据套接字会覆盖 的值，这会对已经在第一个客户端上运行的线程产生副作用.

观察函数的代码`Child`，也就是服务线程，我可以看到参数被复制到了一个局部变量中：

```
void* Child(void* arg)
{   char line[100];
    int bytes_read;
    int client = *(int *)arg;
    ...etc... 
```

并且可能作者认为这个副本允许他稍后篡改主`client`变量，但恕我直言，这可能会导致竞争条件。如果第二个客户端在第一个线程复制此变量时到达，则复制的值可能已损坏。

我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:11:54.513

是的，你是对的。有两种明显的方法可以解决这个问题：

1.  传递`client`给线程而不是`&client`.

2.  在堆上分配一个新的整数并将其地址传递给线程，并在完成后让线程释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:13:35.457

是的你是对的。

`sleep`您可以通过在第一个客户端线程时添加一个 long before`int client = *(int*)arg;`并连接到服务器两次来证明您是正确的。

# java - Java得到十六进制反转

> ID：14803181
> 
> 赞同：0
> 
> 时间：2013-02-10T22:10:43.853
> 
> 标签：java, file-io, hex, datainputstream

我正在尝试读取这样的文件：

```
private File infile;
private FileInputStream fis;
private DataInputStream dis; 
```

和

```
infile = new File("myfile");
fis = new FileInputStream(infile);
dis = new DataInputStream(fis); 
```

现在我想读一个这样的十六进制：

```
int current = dis.readInt();
System.out.println("0x" + Integer.toHexString(current)); 
```

对于任何需要它的人：这是我文件的第一个字节

> 3412 aa55 0200 0000

问题是我的输出是`0x3412aa55`但它应该是`0x55aa1234`。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:12:45.280

用于`Integer.reverseBytes()`反转字节。

# ruby-on-rails-3 - 回形针附件文件大小

> ID：14803185
> 
> 赞同：6
> 
> 时间：2013-02-10T22:11:52.527
> 
> 标签：ruby-on-rails-3, paperclip, attachment, filesize

如何获取回形针附件每种样式的文件大小？

`@user.attachment_file_size`似乎不起作用

```
@user.attachment(:style).size 
```

给出一个与实际文件大小无关的数字

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-21T18:09:59.837

除了原始样式之外，我也没有找到如何获取**给定样式的文件大小。**

如[回形针源代码](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/attachment.rb#L274)所示，`@user.attachment.size`返回最初分配的文件大小。没有办法获得它的特定风格......

一个解决方案是：

```
open(@user.attachment(:style)).size 
```

但根本没有效率。

为了做得好，您可能应该在附件表中添加一些“自定义大小”字段，一旦为每种样式保存附件，您将填写这些字段......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T13:42:35.627

用户按 ID 查找（例如）用户有：照片

```
@user.last.photo_file_size 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-20T23:26:17.793

[您可以使用Paperclip::Style#geometry](http://www.rubydoc.info/github/thoughtbot/paperclip/Paperclip%2FStyle%3Ageometry)在样式哈希中获取类似“WIDTHxHEIGHT”的字符串，以获取给定对象的样式：

```
string = @user.attachment.styles[:size].geometry 
```

您可以将字符串拆分为具有高度或宽度：

```
width = string.split("x")[0]

height = string.split("x")[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-08T14:46:04.980

**看来实际上是可能的**

只需要为每种样式设置临时文件并应用大小方法。

假设您有两种样式`large`，并且`small`为您的附件调用`image`，并且您在模型中创建了两个额外的字段`large_size`并`small_size`保存这些值。

只需将以下代码添加到您的模型中：

```
before_create :assign_sizes

private
def assign_sizes
    self.large_size = image.queued_for_write[:large].size.to_i
    self.small_size = image.queued_for_write[:small].size.to_i
end 
```

字段`large_size`和`small_size`将填充每个样式文件大小。例如，这将在文件发送到 S3 之前完成。所以没有额外从 S3 查询文件头。

# php - 名称值对查找长列表的最快方法

> ID：14803188
> 
> 赞同：0
> 
> 时间：2013-02-10T22:11:59.427
> 
> 标签：php, arrays, loops, logic, namevaluecollection

我正在处理一长串名称 - 值对的列表，我会经常检查这个列表，所以我想知道你们认为什么是进行命名值对查找的最快方法。我的问题的一个例子如下：

使用 PHP

变量位于它们应该代表的字符串值的左侧。大约有 68 个具有相应字符串值的变量。

```
rKid = Hiking
rSpo = Sports
rFly = Flying 
```

我需要查看每个网页以查看每个变量可能对应的内容。我正在考虑一个数组-> 列表值查找，但不确定如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:52:13.340

PHP 中的关联数组实际上是哈希映射，因此按键查找非常有效。你需要的是这个结构：

```
$map = array(
    'rKid' => 'Hiking',
    'rSpo' => 'Sports,'
    'rFly' => 'Flying'
); 
```

查找很简单：

```
echo $map['rKid']; // 'Hiking' 
```

# c# - 如何在asp.net c# treeview控件中绑定数据

> ID：14803189
> 
> 赞同：2
> 
> 时间：2013-02-10T22:12:13.577
> 
> 标签：c#, asp.net, treeview

我从未在 asp.net 中使用过 treeview 控件，但现在我需要将数据绑定到它。我的 sql server 存储过程返回的值如下。我正在使用 C#

```
TermID  ParentID  Name
2021    0          A. Geographic locations
3602    2021       Oceania
3604    3602       Australasia
3621    3604       New Zealand
3619    3604       Pacific Islands
3585    3619       Polynesia
3592    3585       Samoa
3594    3592       American Samoa 
```

每个 Term 都有 parentID，任何 ParentID=0 的 TermID 都是根节点。我们如何将这些数据绑定到树视图。我将不胜感激任何建议或示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:29:14.740

这可能有用：

TreeView 控件需要像 xml/sitemaps 这样的分层数据结构，因此我们不能直接将 DataTable 绑定到它。使用数据表 Select where ParentID = ID

请使用递归方法创建与当前菜单项 ID 相关的子项，请参阅下面的链接获取代码。

[http://www.charith.gunasekara.web-sphere.co.uk/2010/10/how-to-bind-datatable-to-aspnet.html](http://www.charith.gunasekara.web-sphere.co.uk/2010/10/how-to-bind-datatable-to-aspnet.html)

下面的链接将帮助您创建自己的树视图控件。

[http://www.codeproject.com/KB/tree/DataBoundTreeView.aspx](http://www.codeproject.com/KB/tree/DataBoundTreeView.aspx)

# performance - 两个示例之间哪个闭包实现更快

> ID：14803193
> 
> 赞同：0
> 
> 时间：2013-02-10T22:12:52.993
> 
> 标签：performance, groovy, closures

我正在为 Groovy 语言编写一些培训材料，并且正在准备一个解释闭包的示例。该示例是“昂贵”方法的简单缓存闭包，`withCache`

```
def expensiveMethod( Long a ) {
    withCache (a) {
        sleep(rnd())
        a*5
    }
} 
```

所以，现在我的问题是：以下两种实现中的哪一种是 Groovy 中最快且更惯用的？

```
 def withCache = {key, Closure operation ->

    if (!cacheMap.containsKey(key)) {
        cacheMap.put(key, operation())
    }
    cacheMap.get(key)
 } 
```

或者

```
def withCache = {key, Closure operation ->
    def cached = cacheMap.get(key)
    if (cached) return cached
    def res = operation()
    cacheMap.put(key, res)
    res
} 
```

我更喜欢第一个示例，因为它不使用任何变量，但我想知道访问 的`get`方法`Map`是否比返回包含计算结果的变量慢。

显然答案是“这取决于大小`Map`”，但出于好奇，我想听听社区的意见。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:40:04.837

首先，我同意 OverZealous 的观点，担心两个 get 操作是过早的优化。第二个例子也不等于第一个。例如，第一个允许 null，而第二个 on 在 if 中使用 Groovy-Truth，这意味着 null eval 为 false，例如空列表/数组/映射也是如此。所以如果你想显示调用 Closure 我会选择第一个。如果您想要更惯用的东西，我会为您的情况这样做：

```
def expensiveMethod( Long a ) {
    sleep(rnd())
    a*5
}
def cache = [:].withDefault this.&expensiveMethod 
```

# sql - 为什么 PLSQL 匿名块完成时没有输出？

> ID：14803195
> 
> 赞同：20
> 
> 时间：2013-02-10T22:12:55.497
> 
> 标签：sql, oracle, plsql

我刚刚进入 PL/SQL，我尝试运行以下代码，并且我正在**完成匿名块**，但我认为我应该得到**测试输出**。有谁知道我做错了什么？

```
DECLARE
   message varchar2(20) := 'Testing output';
BEGIN
   dbms_output.put_line(message);
END;
/ 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-10T22:14:44.870

查看 DBMS_OUTPUT 取决于程序。

**SQL*Plus 和 Oracle SQL Developer**

先跑`SET SERVEROUTPUT ON;`。这就是 SQL*Plus 或最新版本的 Oracle SQL Developer 所必需的。

```
SET SERVEROUTPUT ON;
begin
    dbms_output.put_line('Testing output');
end;
/ 
```

**PL/SQL 开发人员**

输出会自动检测并显示在“输出”选项卡中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-22T16:09:25.467

是的，在 Oracle SQL Developer 中放置以下语句：

```
SET SERVEROUTPUT ON; 
```

就在您的`DECLARE`关键字之前，这应该可以。

我找不到`View -> DBMS Output`，我使用的是 1.5.5 版。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-12T06:43:27.077

是的。有办法在 SQL Developer 中查看输出。

单击 ->查看->Dbms 输出，然后单击 Dbms 输出窗口上的 + 符号。现在您可以运行该过程并可以看到输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-09T17:12:26.607

`下面的语句将给出可能的解决方案试试这个

```
SET SERVEROUTPUT ON; 
```

**然后运行这段代码会得到如下输出**

```
declare
a integer :=10;
b integer :=20;
c integer;
f real;
begin
c := a+b;
dbms_output.put_line('value of c: ' || c);
f := 70.0/3.0;
dbms_output.put_line('value of f: ' || f); 
```

结尾; /

代码将给出以下输出

c 的值：30 f 的值：23.3333333333333333333333333333333333333

PL/SQL 过程成功完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T06:08:34.890

是的，这是正确的。您需要在此块之前使用：

`SET SERVEROUTPUT ON`

然后，消息会显示在窗口上。

否则我们可以检查 SQL Developer `select "View" -> "DBMS Output"`。
在标签`PLSQL developer`下，我们可以查看消息。`OutPut`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-12-11T05:21:15.507

```
**SET SERVEROUTPUT ON;**
DECLARE
   a INTEGER :=10;
   b INTEGER :=20;
   c float ;
   d real ;

BEGIN
   c :=a+b;
   dbms_output.put_line('the value of C is :'|| c);
   d := 70.0/3.3;
   dbms_output.put_line('the value of d is:'|| d);
END; 
```

这将为您提供输出

```
the value of C is: 30
the value of d is: 21.21212121212121212121212121212121212121 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-08-22T06:26:34.553

如果您在执行过程时通过键入“EXECUTE ;”得到“匿名块完成” 然后运行以下命令并再次执行该过程。命令是

设置服务器输出；

# c# - 解析包含文件的 HTML 以获取服务器端脚本

> ID：14803197
> 
> 赞同：1
> 
> 时间：2013-02-10T22:13:17.910
> 
> 标签：c#, string, parsing

我目前正在构建一个可以接收请求并发送回响应的网络服务器。我已经设法将 Google v8 JavaScript 引擎的一个端口嵌入到我的项目中，我想解析一个请求的文件并运行其中的服务器端 JavaScript 代码。我决定将此代码包含在 2 个字符的括号内，<: 用于打开，:> 用于关闭。我开始用我写的代码来解析它，但是在遇到一些使代码更加混乱并且可能效率不高的问题之后，我决定继续尝试使用 RegEx（我让你研究它，因为我以前从未使用过它）。可是等等。在和我的朋友讨论之后，他给我发了这篇文章[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)我明白这不是一个好主意......所以我的问题是，我该如何解析这样的事情？（考虑到效率和干净的代码，毕竟它是一个网络服务器）。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:31:28.230

如果我理解得很好，您想获取“<”和“>”之间的所有内容，甚至是其中的“<”和“>”？嗯......因为你可以使用正则表达式，也许尝试找到第一个“<”，使计数器每下一个“<”增加，每个“>”减少。当计数器为 0 并且出现下一个“>”时：这里你已经结束了服务器端脚本。如果您将有一些嵌入的 HTML 并希望摆脱它们，请尝试检测“”“”或类似的东西。这个解决方案很慢，但我能想象到最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:38:15.997

理想情况下，您想要做的是挂钩到 V8 的词法分析器，这样您最终就不会在字符串等内部捕获东西。但是，我查看了该 .NET 包装器的源代码，看起来它不允许进行太多自定义。相反，您可能想要创建一个小型状态机。您可能至少需要以下状态：

*   文字数据（用于您`<:`和`:>`标签之外的内容）
*   左尖括号（一旦您消耗了 a`<`并正在等待潜在的`:`）
*   脚本状态（用于你的`<:`和`:>`标签内的东西）
*   脚本双引号字符串状态
*   脚本双引号字符串转义状态
*   脚本单引号字符串状态
*   脚本单引号字符串转义状态
*   脚本斜线状态（用于注释和正则表达式¹）
*   脚本行注释状态
*   脚本块注释状态
*   脚本块注释星状态
*   脚本正则表达式状态
*   脚本冒号状态（当您遇到 a`:`并且不确定`>`接下来是 a 还是其他东西时）

写成正则表达式可能不会那么快，但它可以处理这样的代码：

```
Hello, world!
<:
    document.write("At least you won't think the script :> ends there.");
:> 
```

¹再想一想，检测正则表达式可能并不容易。

# javascript - window.onbeforeunload 不总是触发？

> ID：14803198
> 
> 赞同：1
> 
> 时间：2013-02-10T22:13:20.157
> 
> 标签：javascript, jquery

我的应用程序依赖于能够设置用户在线/离线状态。

我已经通过使用 window.onbeforeunload 查看用户何时离开页面解决了这个问题。

问题是下面的代码并不总是被执行，因此仍然说有些人离开页面时仍然在线。

这是我当前的代码：

```
window.onbeforeunload = function (event) {
    $.ajax({
        type: 'GET',
        url: './changeStatus.php?cid=' + ccID + '&status=0',
        contentType: "application/json",
        dataType: 'json',
        cache: false,
        async: false,
        success: function (data) {},
        error: function (e) {
            //console.log(e);
        }
    });
    return;
}; 
```

有什么想法我可以强迫它*总是*被执行吗？（在所有浏览器上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:30:22.020

该脚本可能总是在页面关闭时执行，但这并不意味着它总是成功调用服务器。

例如，如果用户在关闭页面之前断开 Internet 连接，则脚本无法向服务器发送任何内容。您根本不能依赖每次关闭页面时都从浏览器中获取呼叫。

您可以在用户最后一次听到用户时在服务器上进行跟踪，以便在用户有一段时间没有请求任何页面时将其设置为离线。另一种选择是只要用户在页面上就频繁地向服务器发送请求，当请求停止时，服务器就知道用户已经离开了。

# haskell - 获取列表元素的当前位置

> ID：14803202
> 
> 赞同：0
> 
> 时间：2013-02-10T22:13:43.637
> 
> 标签：haskell

我想知道是否有办法找出列表位置 x 在函数中的位置？

```
hep list = [if x=="you" then "u" else if x=="are" then "r" else x | x <- list] 
```

就像是：

```
hep list = [if x=="by" && elemAt(x+1)=="the" && elemAt(x+2)=="way" then "btw" else if x=="are" then "r" else x | x <- list] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T22:22:42.357

您可能不想以这种方式解决您的问题（索引到链表是一种算法气味等等），但如果您真的需要索引，您可以通过压缩索引列表来获得它们：

```
zip [0..] some_list 
```

然后，当您遍历这个新列表时，您将获得对而不是单个元素。每对的第一个元素将是您想要的索引，第二个元素将是项目。

或者你可能在问你用什么函数去另一种方式（在某个索引处获取元素）？为此，您使用`!!`：

```
some_list !! 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:24:15.063

您可以通过使用 压缩给定列表来获取索引`[0..]`，但是按索引访问列表项既不是惯用的方式，也不是执行您想做的事情的有效方式。

更好的解决方案是使用递归和模式匹配来遍历列表，一次获取多个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T22:36:06.440

要扩展 sepp2k 的答案，您可以尝试以下操作：

```
hep ("by" : "the" : "way" : rest) = "btw" : hep rest
hep ("are" : rest)                = "r"   : hep rest
hep (yadda : rest)                = yadda : hep rest
hep []                            = [] 
```

# ios - NSFetchedResultsController：在后台线程中获取

> ID：14803205
> 
> 赞同：11
> 
> 时间：2013-02-10T22:14:11.163
> 
> 标签：ios, multithreading, core-data, uiviewcontroller, nsfetchedresultscontroller

我或多或少有一个基本`UITableViewController`的`NSFetchedResultsController`. `UITableViewController`被推入`navigationController's`堆栈。但是推送动画并不流畅，因为 fetch`NSFetchedResultsController`是在主线程上执行的，因此会阻塞 UI。

我的问题是：如何`NSFetchedResultsController`在后台线程中执行获取以保持动画流畅？

和`NSFetchedResultsController`委托方法如下所示：

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"GPGrade" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    //Set predicate
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"parent == %@", self.subject];
    [fetchRequest setPredicate:predicate];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    NSArray *sortDescriptors = @[sortDescriptor];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"SubjectMaster"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
}

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{    
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }

}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{    
    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationTop];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationRight];
            break;

        case NSFetchedResultsChangeUpdate:
            //[self configureCell:(GPSubjectOverviewListCell *)[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-07-29T06:50:07.460

**TL;博士; 没有充分的理由在主队列上使用上下文。**

> 可以使用 NSFetchedResultsController 在后台获取数据

绝对地。`NSFetchedResultsController`可以与私有队列上下文一起使用。事实上，这样做是非常快乐和高效的。[当它使用私有队列时，有一个错误](http://www.openradar.me/radar?id=6704494012268544)会阻止`NSFetchedResultsController`使用它的缓存，但是缓存并没有像在 iOS 3.0 中那样赢得你的青睐。设置`cacheName`为零，你会没事的。

`1.`使用`NSPrivateQueueConcurrencyType`. 最好不是您用于 IO 的那个。

`2.`使用该上下文和缓存名称 nil 创建获取的结果控制器。

`3.`从`performBlock:`块中执行初始提取：

```
 [[[self fetchedResultsController] managedObjectContext] performBlock:^{
    NSError *fetchError = nil;
    if (![self fetchedResultsController] performFetch:&error]){
        /// handle the error. Don't just log it.
    } else {
        // Update the view from the main queue.
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [tableView reloadData];
         }];
    }
 }]; 
```

`4.`您的所有委托回调现在都将从上下文的队列中发生。如果您使用它们来更新视图，请通过像上面看到的那样分派到主队列来执行此操作。

`5.`...

`6.` **利润！**

[您可以在此处](http://quellish.tumblr.com/post/93190211147/secrets-of-nsfetchedresultscontroller-happiness)阅读有关此内容的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:05:35.400

Core Data 的一般规则是每个线程一个托管对象上下文，每个 MOC 一个线程。考虑到这一点，您需要在主线程上执行 Fetched Results Controller 的获取，因为这是将与 FRC 的托管对象交互的线程。（请参阅[核心数据编程指南 - 与核心数据并发](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreData/Concurrency.html "核心数据并发")）

如果您在动画中遇到性能问题，您可能应该考虑确保在推送视图之前或之后执行获取的方法。通常你会在视图控制器中执行获取`viewDidLoad:`，并且导航控制器在获取完成之前不会推送视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T14:35:38.410

你可以阅读这篇关于 Core Data with Multi-Threaded behavior 的非常[好的文章。](http://www.duckrowing.com/2010/03/11/using-core-data-on-multiple-threads/)

希望能帮助到你..！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T19:32:02.797

今天解决了这个问题。一个行之有效的解决方案是将 NSFetchedResultsController(FRC) 包装在一个操作 (FRCOperation) 中。本次操作完成后的目标是保留FRC并代理他。

```
// After completing the operation, it will proxy calls
// from "NSFetchedResultsControllerDelegate.controller(_:didChangeContentWith:)"
protocol FetchOperationDelegate {
    func didChangeContent(snapshot: NSDiffableDataSourceSnapshotReference)
}

// Exemple Operation
protocol FetchOperation: Operation, NSFetchedResultsControllerDelegate {
    weak var delegate: FetchOperationDelegate { get set }

    // To get objects from NSFetchedResultsController. Calls always on the main thread
    func object(at indexPath: IndexPath) -> NSManagedObject?
} 
```

逻辑：

1.  打开控制器
2.  首先创建 FetchOperation。不要忘记设置 FetchOperation.delegate = 控制器。因为执行后你应该在 FetchOperationDelegate 中得到第一个数据。
3.  将此 FetchOperation 保存在控制器的属性中（viewModel）
4.  执行抓取操作。NSFetchedResultsController.performFetch 在后台。**不要忘记使用背景上下文。**
5.  例如 5 秒后 FetchOperation 完成
6.  通过从操作中获取数据来更新您的控制器
7.  从这一刻开始。您应该通过 FetchOperationDelegate(NSFetchedResultsControllerDelegate) 从 FRC 接收更新。您还可以在主线程中从 FRC 访问对象。

如果您需要更改谓词或排序。您只需要创建一个新的 FetchOperation。当新操作正在进行时，您仍将继续使用上一个 FetchOperation 版本。

# python - ORM 列可以触发 SQLAlchemy 中的会话刷新吗？

> ID：14803208
> 
> 赞同：3
> 
> 时间：2013-02-10T22:14:15.200
> 
> 标签：python, postgresql, orm, sqlalchemy

# 问题

属性访问可以触发 SQLAlchemy 中的会话刷新吗？我的期望是，例如，通过 column_property() 或 @hybrid_property 附加到对象的查询会导致会话自动刷新，就像通过 session.Query() 进行的查询一样。情况似乎并非如此。

在下面的简单示例中，一个 Account 包含一个 Entry 集合。它还提供了一个使用 column_property() 构造的“平衡”属性，该属性公开了一个选择和查询。如果 session.flush() 被显式调用，新条目只会出现在帐户的余额中。

这种行为似乎不是最理想的：Account 类的用户需要根据对余额实现内部的了解，在他们的代码中散布 flush() 调用。如果实现发生变化——例如，如果“balance”以前是 Python @property——即使 Account 接口本质上是相同的，也会引入错误。有替代方案吗？

# 完整示例

```
import sys
import sqlalchemy as sa
import sqlalchemy.sql
import sqlalchemy.orm
import sqlalchemy.ext.declarative

Base = sa.ext.declarative.declarative_base()

class Entry(Base):
    __tablename__ = "entries"

    id = sa.Column(sa.Integer, primary_key=True)
    value = sa.Column(sa.Numeric, primary_key=True)
    account_id = sa.Column(sa.Integer, sa.ForeignKey("accounts.id"))
    account = sa.orm.relationship("Account", backref="entries")

class Account(Base):
    __tablename__ = "accounts"

    id = sa.Column(sa.Integer, primary_key=True)
    balance = sa.orm.column_property(
        sa.sql.select([sa.sql.func.sum(Entry.value)])
            .where(Entry.account_id == id)
        )

def example(database_url):
    # connect to the database and prepare the schema
    engine = sa.create_engine(database_url)
    session = sa.orm.sessionmaker(bind=engine)()

    Base.metadata.create_all(bind = engine)

    # add an entry to an account
    account = Account()

    account.entries.append(Entry(value = 42))

    session.add(account)

    # and look for that entry in the balance
    print "account.balance:", account.balance

    assert account.balance == 42

if __name__ == "__main__":
    example(sys.argv[1]) 
```

# 观察到的输出

```
$ python sa_column_property_example.py postgres:///za_test
account.balance: None
Traceback (most recent call last):
  File "sa_column_property_example.py", line 46, in <module>
    example(sys.argv[1])
  File "sa_column_property_example.py", line 43, in example
    assert account.balance == 42
AssertionError 
```

# 首选输出

我希望看到“account.balance: 42”，而不需要添加对 session.flush() 的显式调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:02:29.643

column_property 仅在查询时评估，即当您说查询（帐户）时，以及当属性过期时，即如果您说 session.expire("account", ['balance'])。

为了让一个属性每次都调用一个查询，我们使用@property（这里有一些小模块让脚本与 sqlite 一起工作）：

```
import sys
import sqlalchemy as sa
import sqlalchemy.sql
import sqlalchemy.orm
import sqlalchemy.ext.declarative

Base = sa.ext.declarative.declarative_base()

class Entry(Base):
    __tablename__ = "entries"

    id = sa.Column(sa.Integer, primary_key=True)
    value = sa.Column(sa.Numeric)
    account_id = sa.Column(sa.Integer, sa.ForeignKey("accounts.id"))
    account = sa.orm.relationship("Account", backref="entries")

class Account(Base):
    __tablename__ = "accounts"

    id = sa.Column(sa.Integer, primary_key=True)

    @property
    def balance(self):
        return sqlalchemy.orm.object_session(self).query(
                    sa.sql.func.sum(Entry.value)
                ).filter(Entry.account_id == self.id).scalar()

def example(database_url):
    # connect to the database and prepare the schema
    engine = sa.create_engine(database_url, echo=True)
    session = sa.orm.sessionmaker(bind=engine)()

    Base.metadata.create_all(bind = engine)

    # add an entry to an account
    account = Account()

    account.entries.append(Entry(value = 42))

    session.add(account)

    # and look for that entry in the balance
    print "account.balance:", account.balance

    assert account.balance == 42

if __name__ == "__main__":
    example("sqlite://") 
```

请注意，“冲洗”本身通常不是我们必须担心的；autoflush 功能将确保每次 query() 进入数据库以获取结果时都会调用刷新，因此它确实确保了查询的发生，这正是我们想要的。

解决这个问题的另一种方法是使用混合。我建议阅读[SQL Expressions as Mapped Attributes](http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html#sql-expressions-as-mapped-attributes)中所有三种方法的概述，其中列出了每种方法的权衡。

# php - 如果查询返回 false，则显示空/空白表

> ID：14803209
> 
> 赞同：0
> 
> 时间：2013-02-10T22:14:16.463
> 
> 标签：php

如果查询结果为空，显示空/空白表或仅表头的正确实现是什么？

**注意/条件
没有页面重定向
没有创建两张表，一张用于查询结果为空，一张用于查询结果

还是有更好的方法来做到这一点？
这是一个示例代码：

```
<?php if(isset($result)){ ?>  
<table>
<tr>
    <td>Name</td>
    <td>Email</td>
</tr>  

<?php foreach($result as $key => $data){?>
<tr>  
    <td><?php echo $data['name'];?></td>  
    <td><?php echo $data['email_add'];?></td>   
</tr>   
<?php }?>
</table>
<?php } ?> 
```

这里的问题是它仍然在 foreach 循环上引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:19:23.973

**关于异常：**

您检查是否`$results`已设置，但随后您尝试循环`$result`（没有尾随 s）。我相信你有一个错字，这可能是问题的一部分。修复错字并确保结果不为空（可能已设置，但仍为空）可能会修复引发的异常。

**关于始终显示标题：**

无论如何要显示标题，请将 if 语句移动到循环之前。

**仅供参考 - 关于格式良好的 HTML 表格：**

要在表格上声明标题，您通常使用`<thead>`元素 - 将其与表格的内容分开。格式良好的 HTML 表的示例：

```
<table>
   <thead>
       <tr>
          <th>Name</th>
          <th>Email</th>
       </tr>
   </thead>
   <tbody>
       <tr>
          <td>John</td>
          <td>john@email.com</td>
       </tr>
   </tbody>
</table> 
```

[**更多关于格式化表格**](https://developer.mozilla.org/en-US/docs/HTML/Element/table)

在您的情况下，我会将循环`<tr>`放在`<tbody>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:20:37.513

当查询结果返回 false 时，改为返回一个空数组

我希望这会有所帮助，并准备好在需要时提供更多帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:18:50.707

```
<?php if(isset($result) && !empty($result)): ?>  
    <table>
    <tr>
        <td>Name</td>
        <td>Email</td>
    </tr>  

    <?php foreach($result as $data): ?>
    <tr>  
        <td><?php echo $data['name'];?></td>  
        <td><?php echo $data['email_add'];?></td>   
    </tr>   
    <?php endforeach ?>
    </table>
<?php else: ?>
    No results found.
<?php endif ?> 
```

请注意，我更喜欢对 PHP 模板使用长格式的语句，因为它极大地提高了可读性。

# mysql - 电影列表的复杂 sql 查询

> ID：14803217
> 
> 赞同：2
> 
> 时间：2013-02-10T22:14:48.893
> 
> 标签：mysql, sql, join

我有一个数据库，里面有我在电影院看过的所有电影。它由几个表组成：

*   放映（主表，日期，电影院，电影等）
*   电影（有关电影的所有信息：标题、导演、长度......）
*   电影院（有关我观看的电影院的信息，在我的示例中未使用）
*   标签（连接到电影字段的标签：id，标签）
*   tag_scr（链接表将标签链接到筛选，字段：scr_id，tag_id）

大多数放映都连接一个标签（可以是电影节、3d、首映式、现场音乐之类的东西），但放映也可以有零个标签或多个标签，所以我要做的是创建一个我列出的查询所有筛选，以及连接到该筛选的所有标签连接到一个带有逗号的字符串。我的查询现在看起来像这样：

```
SELECT screenings.id, movies.title, tags.tag FROM screenings 
JOIN movies ON screenings.ft = movies.id
LEFT JOIN tag_scr ON screenings.id = tag_scr.scr_id
LEFT JOIN tags ON tag_scr.tag_id = tags.id 
```

除了在结果中多次列出具有多个标签的筛选之外，这就是我所需要的。如果我按screenings.id 分组，我只会在每次放映时获得第一个标签。是否可以使用 concat 函数、子查询或任何其他方法来做我想做的事？我的数据库是 MySQL 5.5.24。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:23:52.060

是的，你需要使用`GROUP_CONCAT`：

```
SELECT screenings.id, movies.title, GROUP_CONCAT(tags.tag SEPARATOR ',') tags
FROM screenings 
   JOIN movies ON screenings.ft = movies.id
   LEFT JOIN tag_scr ON screenings.id = tag_scr.scr_id
   LEFT JOIN tags ON tag_scr.tag_id = tags.id
GROUP BY screenings.id, movies.title 
```

默认情况下，您实际上并不需要 SEPARATOR 语法，它是一个逗号。

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

祝你好运。

# c++ - 没有找到 Prime Generation / Limited Generation 的时间

> ID：14803221
> 
> 赞同：0
> 
> 时间：2013-02-10T22:15:15.883
> 
> 标签：c++, sieve

这个程序是一个 c++ 程序，它使用 Eratosthenes 的筛子来计算素数来找到素数。然后*应该*存储执行此操作所需的时间，并重新执行计算 100 次，每次存储时间。在这个程序中有两件事我需要帮助：

首先，我只能测试高达 4.8 亿的数字，我希望得到更高的数字。

其次，当我给程序计时时，它只会得到第一个计时，然后打印零作为时间。这是不正确的，我不知道时钟有什么问题。-谢谢您的帮助

这是我的代码。

```
#include <iostream>
#include <ctime>
using namespace std;

int main ()
{

    int long MAX_NUM = 1000000;
    int long MAX_NUM_ARRAY = MAX_NUM+1;
    int long sieve_prime = 2;
    int time_store = 0;
    while (time_store<=100)
    {
        int long sieve_prime_constant = 0;

        int *Num_Array = new int[MAX_NUM_ARRAY];
        std::fill_n(Num_Array, MAX_NUM_ARRAY, 3);
        Num_Array [0] = 1;
        Num_Array [1] = 1;

        clock_t time1,time2;
        time1 = clock();
        while (sieve_prime_constant <= MAX_NUM_ARRAY)
        {
            if (Num_Array [sieve_prime_constant] == 1)  
            {

                sieve_prime_constant++;
            }
            else
            {
                Num_Array [sieve_prime_constant] = 0;  
                sieve_prime=sieve_prime_constant; 
                while (sieve_prime<=MAX_NUM_ARRAY - sieve_prime_constant)  
                {
                    sieve_prime = sieve_prime + sieve_prime_constant;
                    Num_Array [sieve_prime] = 1;
                }
                if (sieve_prime_constant <= MAX_NUM_ARRAY)
                {
                    sieve_prime_constant++;
                    sieve_prime = sieve_prime_constant;
                }
            }
        }
        time2 = clock();
        delete[] Num_Array;
        cout << "It took " << (float(time2 - time1)/(CLOCKS_PER_SEC)) << " seconds to    execute    this loop." << endl;
        cout << "This loop has already been executed " << time_store << " times." << endl;
        float Time_Array[100];
        Time_Array[time_store] = (float(time2 - time1)/(CLOCKS_PER_SEC));
        time_store++;
    }

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:27:59.733

这部分代码应该进入你的循环：

```
int *Num_Array = new int[MAX_NUM_ARRAY];
std::fill_n(Num_Array, MAX_NUM_ARRAY, 3);
Num_Array [0] = 1;
Num_Array [1] = 1; 
```

编辑：这个也需要在循环中：

```
int long sieve_prime_constant = 0; 
```

当我在我的机器上运行它时，每个循环需要 0.2 秒。如果我在 MAX_NUM_ARRAY 中添加两个零，则每次迭代需要 4.6 秒（直到第 20 个循环，我厌倦了等待超过 1.5 分钟）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:07:20.487

I think the problem is that you don't reset the starting prime:

```
int long sieve_prime = 2; 
```

Currently that is outside your loop. On second thoughts... That's not the problem. Has this code been edited to incorporate the suggestions in Mats Petersson's answer? I just corrected the bad indentation.

Anyway, for the other part of your question, I suggest you use `char` instead of `int` for `Num_Array`. There is no use using `int` to store a boolean. By using `char` you should be able to store about 4 times as many values in the same amount of memory (assuming your `int` is 32-bit, which it probably is).

That means you could handle numbers up to almost 2 billion. Since you are using `signed long` as your type instead of `unsigned long`, that is approaching the numeric limits for your calculation anyway.

If you want to use even less memory, you could use `std::bitset`, but be aware that performance could be significantly impaired.

By the way, you should declare your timing array at the top of `main`:

```
float Time_Array[100]; 
```

Putting it inside the loop just before it is used is a bit whack.

* * *

Oh, and just in case you're interested, here is my own implementation of the sieve which, personally, I find easier to read than yours....

```
std::vector<char> isPrime( N, 1 );

for( int i = 2; i < N; i++ )
{
    if( !isPrime[i] ) continue;
    for( int x = i*2; x < N; x+=i ) isPrime[x] = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:30:18.300

同意前面的评论。如果你真的想把事情搞定，你不会存储所有可能值的数组（如 int 或 char），而只保留素数。然后，您测试每个后续数字是否可通过迄今为止找到的所有素数进行整除。现在您只受到可以存储的素数数量的限制。当然，这不是您真正想要实现的算法......但由于它将使用整数除法，所以它非常快。像这样的东西：

```
int myPrimes[MAX_PRIME];
int pCount, ii, jj;
ii = 3;
myPrimes[0]=2;
for(pCount=1; pCount<MAX_PRIME; pCount++) {
    for(jj = 1; jj<pCount; jj++) {
        if (ii%myPrimes[jj]==0) {
            // not a prime
            ii+=2; // never test even numbers...
            jj = 1; // start loop again
        }
    }
    myPrimes[pCount]=ii;
} 
```

不是你所要求的，但也许它是有用的。

# scala - 是否有任何基本限制阻止 Scala 在函数上实现模式匹配？

> ID：14803222
> 
> 赞同：20
> 
> 时间：2013-02-10T22:15:20.387
> 
> 标签：scala, syntax, functional-programming, pattern-matching

在 SML、Erlang 和其他许多语言中，我们可以定义如下函数：

```
fun reverse [] = []
|   reverse x :: xs  = reverse xs @ [x]; 
```

我知道我们可以像这样在 Scala 中编写模拟（我知道，下面的代码中有很多缺陷）：

```
def reverse[T](lst: List[T]): List[T] = lst match {
  case Nil     => Nil
  case x :: xs => reverse(xs) ++ List(x)
} 
```

但我想知道，我们是否可以在 Scala 中编写以前的代码，也许对后者进行去糖。

将来实现这种语法是否有任何基本限制（我的意思是，非常基本 - 例如类型推断在 scala 或其他东西中的工作方式，显然解析器除外）？

**UPD**
以下是它的外观片段：

```
type T
def reverse(Nil: List[T]) = Nil
def reverse(x :: xs: List[T]): List[T] = reverse(xs) ++ List(x) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T10:48:31.270

这真的取决于你的意思**basic**。

如果您真的在问“*是否存在阻止实现此功能的技术证明*”，那么我会说答案是**否定**的。你在谈论脱糖，你在正确的轨道上。所要做的就是基本上将几个单独的案例拼接到一个函数中，这可以作为一个简单的预处理步骤来完成（这只需要句法知识，不需要语义知识）。但为了使这更有意义，我将定义一些规则：

*   函数签名是强制性的（例如在 Haskell 中，这将是可选的，但无论您是一次定义函数还是分几个部分定义函数，它始终是可选的）。我们可以尝试安排不使用签名并尝试从不同部分中提取它，但是缺少类型信息会很快让我们感到厌烦。一个更简单的论点是，如果我们要尝试推断隐式签名，我们不妨对所有方法都这样做。但事实是，在 scala 中有明确的签名是有充分理由的，我无法想象改变这一点。
*   所有部分必须定义在同一范围内。首先，它们必须在同一个文件中声明，因为每个源文件都是单独编译的，因此简单的预处理器不足以实现该功能。其次，我们最终还是得到了一个方法，所以所有部分都在同一个范围内是很自然的。
*   这种方法不可能重载（否则我们需要为每个部分重复签名，以便预处理器知道哪个部分属于哪个重载）
*   零件按声明的顺序添加（*缝合*）到生成的`match`

所以这就是它的样子：

```
def reverse[T](lst: List[T]): List[T] // Exactly like an abstract def (provides the signature)
// .... some unrelated code here...
def reverse(Nil) = Nil
// .... another bit of unrelated code here...
def reverse(x :: xs ) = reverse(xs) ++ List(x) 
```

可以简单地转换为：

```
def reverse[T](list: List[T]): List[T] = lst match {
  case Nil     => Nil
  case x :: xs => reverse(xs) ++ List(x)
}
// .... some unrelated code here...
// .... another bit of unrelated code here... 
```

很容易看出，上面的转换是非常机械的，只需操作一个源 AST（接受这个新结构的稍微修改的语法产生的 AST），然后将它转换成目标 AST（由标准的 scala 语法）。然后我们可以像往常一样编译结果。

所以你去吧，通过一些简单的规则，我们可以实现一个预处理器来完成所有工作来实现这个新特性。

* * *

如果从**根本上**说，您要问“*是否有任何东西会使这个功能不合适*”，那么可以说这*感觉不是很 scala*。但更重要的是，它并没有带来那么多。Scala 作者实际上倾向于使语言更简单（例如在较少的内置特性中，试图将一些内置特性移动到库中）并添加一种实际上并不更具可读性的新语法与简化的目标背道而驰。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T10:57:02.443

在 SML 中，您的代码片段实际上只是语法糖（语言规范术语中的“派生形式”）

```
val rec reverse = fn x =>
    case x of [] => []
            | x::xs  = reverse xs @ [x] 
```

这与您展示的 Scala 代码非常接近。因此，Scala 不能提供相同类型的语法并没有“根本”原因。主要问题是 Scala 需要更多的类型注释，这使得这种速记语法总体上没有吸引力，而且可能不值得。

另请注意，您建议的特定语法不会很好，因为无法从语法上区分一个案例函数定义和两个重载函数。您可能需要一些替代语法，类似于使用“ `|`”的 SML。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T10:28:52.277

我不知道 SML 或 Erlang，但我知道 Haskell。它是一种没有方法重载的语言。方法重载与这种模式匹配相结合可能会导致歧义。想象以下代码：

```
def f(x: String) = "String "+x
def f(x: List[_]) = "List "+x 
```

这应该是什么意思？它可能意味着方法重载，即方法是在编译时确定的。它也可以表示模式匹配。只有 af(x: AnyRef) 方法可以进行匹配。

Scala 也有命名参数，这可能也会被破坏。

我不认为 Scala 能够提供比您通常展示的更简单的语法。恕我直言，更简单的语法可能仅在某些特殊情况下有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-11T10:32:07.690

至少有两个问题：

1.  `[`并且`]`是保留字符，因为它们用于类型参数。编译器允许它们周围有空格，因此这不是一个选择。
2.  另一个问题是`=`返回`Unit`。所以后面的表达式`|`不会返回任何结果

我能想出的最接近的是这个（注意这对你的例子非常专业）：

```
// Define a class to hold the values left and right of the | sign
class |[T, S](val left: T, val right: PartialFunction[T, T])

// Create a class that contains the | operator
class OrAssoc[T](left: T) {
  def |(right: PartialFunction[T, T]): T | T = new |(left, right)
}

// Add the | to any potential target
implicit def anyToOrAssoc[S](left: S): OrAssoc[S] = new OrAssoc(left)

object fun {

  // Use the magic of the update method
  def update[T, S](choice: T | S): T => T = { arg =>
    if (choice.right.isDefinedAt(arg)) choice.right(arg)
    else choice.left
  }
}

// Use the above construction to define a new method
val reverse: List[Int] => List[Int] =
  fun() = List.empty[Int] | {
    case x :: xs => reverse(xs) ++ List(x)
  }

// Call the method
reverse(List(3, 2, 1)) 
```

# c# - 如何更改列表框中所选项目“文本”的前景色

> ID：14803225
> 
> 赞同：1
> 
> 时间：2013-02-10T22:15:39.157
> 
> 标签：c#, wpf, xaml, wpf-controls

我有一个带有 DataTemplate 的 ListBox。我正在尝试将列表框中所选项目的文本/前景颜色更改为白色。我已经认真尝试了 30 种不同的方法来做到这一点，我在谷歌上找到了这些方法。我只是无法让它工作。**如何更改前景色？**

另外，我想指出我不想依赖使用 SystemColors 的方法，因为我读到它**在 .net 4.5 中不起作用，**所以我不希望它在我们移动应用程序时中断某天4.5。这是我的列表框 xaml：

```
<ListBox Grid.Row="1" x:Name="Alerts" ItemsSource="{Binding Alerts}" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" AlternationCount="2">
<ListBox.ItemTemplate>
    <DataTemplate>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition></RowDefinition>
                    <RowDefinition></RowDefinition>
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0" Orientation="Horizontal">
                    <Label Content="{Binding Type}" HorizontalAlignment="Left" Padding="1,1,1,0" />
                    <Label Content=" - " Padding="1,1,1,0"></Label>
                    <Label Content="{Binding Date}" HorizontalAlignment="Left" Padding="1,1,1,0" />
                </StackPanel>
                <Label Grid.Row="1" Content="{Binding Message}" HorizontalAlignment="Left" Margin="0" Padding="1,0,1,1" />
            </Grid>
            <Button Grid.Column="1"
                    CommandParameter="{Binding .}"
                    Command="{Binding Path=DataContext.Commands.RemoveAlertCommand, RelativeSource={RelativeSource AncestorType={x:Type ListBox}}}"
                    Content="X" HorizontalAlignment="Right" Width="Auto" Height="Auto" Foreground="#FFD40000" FontWeight="Bold" VerticalAlignment="Center" />
        </Grid>
    </DataTemplate>
</ListBox.ItemTemplate>
<ListBox.ItemContainerStyle>
    <Style  TargetType="{x:Type ListBoxItem}">
        <Style.Triggers>
            <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                <Setter Property="Background" Value="LightGray"></Setter>
            </Trigger>
            <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                <Setter Property="Background" Value="Ivory"></Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
</ListBox.ItemContainerStyle>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T22:24:54.977

那这个呢：

```
<ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Foreground" Value="White"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</ListBox.ItemContainerStyle> 
```

在使用 TextBlocks 的 DataTemplate 中，该`Foreground`属性将被简单地继承：

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <TextBlock Text="{Binding}"/>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

在带有标签的 DataTemplate 控件中，`Foreground`值继承不起作用（请参阅[此处](https://stackoverflow.com/a/8030416/1136211)为什么）。但是您可能总是像这样绑定到 ListBoxItem 的 Foreground 属性：

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <Label Content="{Binding}"
               Foreground="{Binding Foreground,
                            RelativeSource={RelativeSource Mode=FindAncestor,
                                            AncestorType=ListBoxItem}}"/>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

或者您可以简单地用 TextBlocks 替换您的标签。

# java - Javamail 从 Gmail 获取抄送

> ID：14803231
> 
> 赞同：1
> 
> 时间：2013-02-10T22:16:26.097
> 
> 标签：java, jakarta-mail, carbon-copy

```
if ((a = m.getRecipients(Message.RecipientType.CC)) != null) {
    for (int j = 0; j < a.length; j++) {

    InternetAddress ia = (InternetAddress)a[j];
    if (ia.isGroup()) {
        InternetAddress[] aa = ia.getGroup(false);
        for (int k = 0; k < aa.length; k++) {
                    cc.append(aa[k].getAddress()).append("; ");
                }
    }
            else
            {
                cc.append(ia.getAddress()).append("; ");
            }

    }
} 
```

您好，我使用 Javamail 来获取 CC 地址，但是当我从消息对象调用 getRecipients() 时，我得到了 null。使用收件人类型 TO 它可以工作。我从 Gmail 收到邮件，并且 100% 的邮件都有抄送地址。这是一个错误？也许我做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:33:13.970

JavaMail 返回服务器告诉它的内容。打开[协议跟踪](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)以查看服务器返回给 JavaMail 的内容。Cc 信息将在来自 IMAP 服务器的 ENVELOPE 响应中。

# c - 为什么我不能声明结构已定义的变量？

> ID：14803233
> 
> 赞同：1
> 
> 时间：2013-02-10T22:16:32.123
> 
> 标签：c, windows, compiler-errors, macros, c-preprocessor

**这个问题可能不像你最初想象的那么容易解决。**

FILTER_MESSAGE_HEADER 是在头文件 fltUserStructures.h 中定义的结构，它是位于 SDK 包含路径的标准 Windows SDK 头文件，即

> “C:\Program Files (x86)\Windows Kits\8.0\Include\shared\fltUserStructures.h”。

```
typedef struct _FILTER_MESSAGE_HEADER {

    //
    //  OUT
    //
    //  Total buffer length in bytes, including the FILTER_REPLY_HEADER, of
    //  the expected reply.  If no reply is expected, 0 is returned.
    //

    ULONG ReplyLength;

    //
    //  OUT
    //
    //  Unique Id for this message.  This will be set when the kernel message
    //  satifies this FilterGetMessage or FilterInstanceGetMessage request.
    //  If replying to this message, this is the MessageId that should be used.
    //

    ULONGLONG MessageId;

    //
    //  General filter-specific buffer data follows...
    //

} FILTER_MESSAGE_HEADER, *PFILTER_MESSAGE_HEADER; 
```

但是，VC++ 2012 无法编译以下代码。

```
#include <fltUserStructures.h>

int main()
{
    //
    // error C2065: 'FILTER_MESSAGE_HEADER' : undeclared identifier
    //
    FILTER_MESSAGE_HEADER v; 
} 
```

或者

```
#define NTDDI_VERSION 0x06000000 // Vista or later
#include <FltUser.h>

int main()
{
    //
    // fltuserstructures.h(27): fatal error C1012:
    // unmatched parenthesis : missing ')'
    //
    FILTER_MESSAGE_HEADER v; 
} 
```

尽管我尝试了很多方法，但编译器总是拒绝上面的代码。根本原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:32:28.977

该结构（以及其中的大部分内容`fltUserStructures.h`都是有条件地编译的，`FLT_MGR_BASELINE`而后者又设置在`fltUser.h`：

```
#define FLT_MGR_BASELINE (((OSVER(NTDDI_VERSION) == NTDDI_WIN2K) && (SPVER(NTDDI_VERSION) >= SPVER(NTDDI_WIN2KSP4))) || \
                          ((OSVER(NTDDI_VERSION) == NTDDI_WINXP) && (SPVER(NTDDI_VERSION) >= SPVER(NTDDI_WINXPSP2))) || \
                          ((OSVER(NTDDI_VERSION) == NTDDI_WS03)  && (SPVER(NTDDI_VERSION) >= SPVER(NTDDI_WS03SP1))) ||  \
                          (NTDDI_VERSION >= NTDDI_VISTA)) 
```

因此，请`#include <fltuser.h>`确保`NTDDI_VERSION`正确设置（`WINVER`例如，使用 ）：

```
#define WINVER 0x0600
#include <windows.h>
#include <fltUser.h>

int main()
{
    //
    // error C2065: 'FILTER_MESSAGE_HEADER' : undeclared identifier
    //
    FILTER_MESSAGE_HEADER v; 
} 
```

# emacs - 在相等性检查中可能有超过 2 个值吗？(> NUM1 NUM2) ELISP

> ID：14803234
> 
> 赞同：1
> 
> 时间：2013-02-10T22:16:44.197
> 
> 标签：emacs, lisp, elisp

函数 "greaterthan",`(< NUM1 NUM2)`只允许返回 t/nil 来比较 2 个值。

我想测试 (var1 > var2 < var3 < var4)，有没有办法只使用 lisp 中的一个函数来做到这一点？如果不是，最好的程序是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T22:35:06.763

最好的程序是不要打扰：`(and (< var2 var1) (< var2 var3) (< var3 var4))`不是更难阅读您的`..>..<..<..`链条。

测试升序是有意义的：

```
(require 'cl)
(defun cl-< (&rest args)
   (every '< args (cdr args)) 
```

这些天我不再犹豫`(require 'cl)`了，但如果你这样做了，这里有另一个变体：

```
(defun cl-< (arg &rest more-args)
  (or (null more-args)
      (and (< arg (first more-args))
           (apply #'cl-< more-args)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T08:57:55.170

下面是variadic的宏实现`<`

```
(defmacro << (x y &rest args)
  (if args
      (if (or (symbolp y)
              (numberp y))
          `(and (< ,x ,y) (<< ,y ,@args))
          (let ((ys (make-symbol "y")))
            `(let (,ys)
               (and (< ,x (setq ,ys ,y))
                    (<< ,ys ,@args)))))
      `(< ,x ,y))) 
```

对于简单的情况，只是扩展到`(and ...)`链

```
(<< x y z) ==> (and (< x y) (< y z)) 
```

其中表达式不是数字也不是符号扩展为更复杂的形式以避免在存在副作用的情况下进行多次评估

```
(<< (f x) (g y) (h z)) ==> (let ((gy)) (and (< (f x) (setq gy (g y)))
                                            (< gy (h z)))) 
```

例如

```
(setq foo (list))
nil

(defun call (x) (push x foo) x)
call

(<< (call 1) (call 2) (call 5) (call 4) (call 0))
nil

foo
(4 5 2 1) 
```

每个函数都被调用了一次，除了`0`因为短路而不需要调用的函数（我不是 100% 确定短路是否是一个真正的好主意......`#'<`在 Common Lisp 中是一个常规函数所有参数都按从左到右的顺序精确计算一次，没有短路）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T07:15:49.977

```
(defun << (arg1 arg2 arg3 arg4)
 (when (and (< arg1 arg2) (< arg2 arg3) (< arg3 arg4)))
)

(<< 1 2 3 4) 
```

可能可以用任意数量的参数进行扩展，但这样的一般形式似乎很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:35:07.657

```
(defmacro << (&rest args)
  (let ((first (car args))
        (min (gensym))
        (max (gensym))
        (forms '(t)) iterator)
    (setq args (reverse (cdr args))
          iterator args)
    `(let ((,min ,first) ,max)
       ,(or 
         (while iterator
           (push `(setq ,min ,max) forms)
           (push  `(< ,min ,max) forms)
           (push `(setq ,max ,(car iterator)) forms)
           (setq iterator (cdr iterator))) `(and ,@forms)))))

(macroexpand '(<< 10 20 30 (+ 30 3) (* 10 4)))
(let ((G99730 10) G99731)
  (and (setq G99731 20)
       (< G99730 G99731)
       (setq G99730 G99731)
       (setq G99731 30)
       (< G99730 G99731)
       (setq G99730 G99731)
       (setq G99731 (+ 30 3))
       (< G99730 G99731)
       (setq G99730 G99731)
       (setq G99731 (* 10 4))
       (< G99730 G99731)
       (setq G99730 G99731) t)) 
```

这是类似于 6502 的想法，但它可能会在不那么琐碎的情况下创建更少的代码，但它会在琐碎的情况下创建更多的代码。

# git - 由于已添加文件，无法切换分支

> ID：14803236
> 
> 赞同：1
> 
> 时间：2013-02-10T22:17:02.273
> 
> 标签：git

在我的 gits 中有一个奇怪的问题。没有什么要添加的，但它不会让我切换或添加建议添加的文件。

```
git status
# On branch oop
nothing to commit (working directory clean)

git checkout LIVE
error: The following untracked working tree files would be overwritten by checkout:
    folder/file.js
    folder/file2.js
Please move or remove them before you can switch branches.
Aborting 
```

即使在这样做之后`git add folder/file.js;git add folder/file2.js`，也会出现相同的结果。

有人知道发生了什么吗？没有 .gitignore 文件...

奇怪的是，在此之前，我无法添加这些文件，所以我不得不重命名、添加、重命名它们以将它们放入存储库中（如[this answer](https://stackoverflow.com/a/1134387/1166285)所建议的那样） 。

这可能与该文件夹曾经是该仓库中自己的仓库这一事实有关吗？我删除了该文件夹中的所有隐藏文件夹（如 .git）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:34:21.033

不知道问题是什么，但我做了以下修复它：

*   删除文件夹（并保存备份）
*   `git add -u`; //阶段删除的文件
*   `git commit -m '...'`
*   将备份文件复制到 repo 的文件夹中
*   `git add .`// 暂存新文件
*   `git commit -m '...'`

在两个分支中都这样做了，到目前为止它似乎已经解决了..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:34:59.957

也可能有子模块和其他 .gitignore 文件。如果您也使用排除文件，请仔细检查您的排除文件。

在本地克隆这个 repo。查看结帐是否适用于克隆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:37:21.897

请记住，添加文件只会暂存文件。它不会将它们提交给 repo。使用后`git add`，您还需要执行 a`git commit`来提交更改。

# r - 是否有与 unlist() 等效的 S4？

> ID：14803237
> 
> 赞同：12
> 
> 时间：2013-02-10T22:17:02.667
> 
> 标签：r, s4

我有一些使用`S4`对象及其插槽的经验，所以我知道如何访问特定的插槽和子插槽。我想学习的是如何以`unlist`拆分`S3`列表的方式“去槽”一个对象。
我的直接目标是让我的一个玩具有一个 S4 对应物，它返回一个对象的元素数量：

```
lssize<-function(items){
            if (any(sapply(sapply(items,get),typeof)=='closure')){
        warning('Closures in list, will ignore.')
        items<-items[(sapply(sapply(bar,get),typeof)=='closure')!=TRUE]
    }
    sizes<-sapply(sapply(sapply(sapply(items,get,simplify=F), unlist,simplify=F), as.vector,simplify=F), length)
    return(sizes)
    } 
```

（不公平地嘲笑我的代码:-)）。我希望不必编写一些递归例程来一次提取一个插槽来转换它们。

编辑：我知道`object.size`会返回字节数；不是我在这里追求的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T01:25:59.357

（这被修改为更接近以前删除的答案，使用`slotName`而`slot`不是依赖`attributes`）。我们可以编写一个函数来测试一个实例是否是 S4 对象，如果是，则将所有插槽提取为一个列表并递归

```
f = function(x) {
    if (isS4(x)) {
        nms <- slotNames(x)
        names(nms) <- nms
        lapply(lapply(nms, slot, object=x), f)
    } else x
} 
```

接着

```
A = setClass("A", representation(x="numeric"))
B = setClass("B", representation(a="A", b="numeric"))
f(B()) 
```

得出一个简单的旧列表，我们可以将其用于我们想要的任何目的。

```
$a
$a$x
numeric(0)

$a$class
[1] "A"
attr(,"package")
[1] ".GlobalEnv"

$b
numeric(0)

$class
[1] "B"
attr(,"package")
[1] ".GlobalEnv" 
```

`f`可能需要增强，例如，处理 NULL 值或通过 S3 类创建的 S4 类`setOldClass`。代码`validObject`将是我寻找更全面遍历的地方的选择。

概括可能会使访问者，沿着

```
visitLeavesWith <-
    function(object, FUN, ...)
{
    f = function(x) {
        if (isS4(x)) {
            slots <- setNames(slotNames(x), slotNames(x))
            lapply(lapply(slots, slot, object=x), f)
        } else FUN(x, ...)
    }
    f(object)
} 
```

例如，

```
visitLeavesWith(B(), length) 
```

# python - 根据python中单词下方的行数解析文本文件中的行“簇”

> ID：14803241
> 
> 赞同：0
> 
> 时间：2013-02-10T22:17:25.970
> 
> 标签：python, file, parsing, search, count

所以我有一个统一格式的文本文件，我试图根据“cluster”这个词下面的行数来解析它。到目前为止，这是我的代码：

```
f = open('file.txt', 'r')
main_output = open('mainoutput.txt', 'w')
minor_output = open('minoroutput.txt', 'w')
f_lines = f.readlines()
main_list = []
minor_list = []
for n, line in enumerate(open('file.txt')):
    if 'cluster' in line:
        if 'cluster' in f_lines[n+1] or f_lines[n+2] or f_lines[n+3]:
            minor_list.append(line)
            minor_list.append(f_lines[n+1])
            minor_list.append(f_lines[n+2])
            minor_list.append(f_lines[n+3])
        if 'cluster' not in f_lines[n+1] or f_lines[n+2] or f_lines[n+3]:
            main_list.append(line)
            main_list.append(f_lines[n+1])
            main_list.append(f_lines[n+2])
            main_list.append(f_lines[n+3])
minor_output.write(''.join(minor_list))
main_output.write(''.join(main_list))
f.close()
main_output.close()
minor_output.close() 
```

文本文件的格式如下：

```
>Cluster 1
line 1
line 2
line 3
...

>Cluster 2
line 1
line 2
...

and so on for many clusters. 
```

每个簇下面都有可变数量的行，从 1 到 100+。我有兴趣按每个集群中的行数（项目）对这些集群进行排序。此代码有效，但两个输出文件相同。对我的代码或策略的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:12:25.087

如果我理解您正确发布的代码，您希望根据集群中的项目数将数据分类到两个不同的文件中。如果有 3 个或更少，则集群进入`minoroutput.txt`，如果超过 3 个，则进入`mainoutput.txt`。

我怀疑有几个重要的逻辑错误导致您的代码无法正确排序数据。

首先，您的测试以查看是否包含该单词的行与您在示例数据中的`"cluster"`大写字母不匹配。这可能只是您显示的示例数据的问题，通过在检查之前`"Cluster"`调用线路很容易解决。`lower()`

其次，您对后面几行的检查不正确。该代码`if 'cluster' in f_lines[n+1] or f_lines[n+2] or f_lines[n+3]`不会检查`"cluster"`三个字符串中的每一个，而是只检查第一个。在布尔上下文中，第二个和第三个字符串都是由它们自己评估的。如果它们不是空行，它们将是`True`，使整个表达式也几乎总是正确的。为此，您需要检查`'cluster' in f_lines[n+1] or 'cluster' in f_lines[n+2] or 'cluster' in f_lines[n+3]`（但我稍后会展示更好的选择）。另一个`if`语句也会出现同样的问题，你几乎总是会`True`从你的条件中得到一个结果，因为`f_lines[n+2]`和`f_lines[n+3]`可能都不都是空的。

最后，您写出集群的逻辑可能不正确。它目前总是准确地写出四行，即使许多集群的项目比这更多或更少。对于写入的每个集群`mainoutput.txt`，都会丢弃一些行（这可能是故意的）。然而，对于某些写入到的集群`minoroutupt.txt`，将会有一个明显的错误，它会在只有一个或两个项目的集群之后写出下一个集群的开始。

这是一些我认为对你有用的代码。我改变了循环，使它只读取文件一次，而不是将行一次读入列表，第二次读入`enumerate`. 我没有明确地查看接下来的三行，而是简单地将每一行放入一个列表中，每当其中有一行时重置`cluster`（任何大小写）。

```
with open('file.txt', 'r') as f, \
     open('mainoutput.txt', 'w') as main_out, \
     open('minoroutput.txt', 'w') as minor_out:
    cluster = [] # this variable will hold all the lines of the current cluster
    for line in f:
        if 'cluster' in line.lower(): # if we're at the start of a cluster
            if len(cluster) > 4: # long clusters go in the "main" file
                main_out.writelines(cluster) # write out the lines
                # main_out.writelines(cluster[:4])
            else:
                minor_out.writelines(cluster) # or to the other file

            cluster = [] # reset the cluster variable to a new, empty list

        cluster.append(line) # always add the current line to cluster

    if len(cluster) > 4: # repeat the writing logic for the last cluster
        main_out.writelines(cluster)
        # main_out.writelines(cluster[:4])
    else:
        minor_out.writelines(cluster) 
```

`writelines`如果您只想将集群中的前三个项目输出到`mainout.txt`（其余的被丢弃），请使用两个注释行代替它们之前的未注释行。我认为没有合理的替代方法可以将所有行打印在`minorout.txt`.

给出`file.txt`这些内容：

```
>Cluster 1
line 1
line 2
line 3
>Cluster 2
line 1
line 2
line 3
line 4
>Cluster 3
line 1
>Cluster 4
line 1
line 2
line 3
line 4
line 5 
```

上面的代码会输出两个文件：

`mainoutput.txt`：

```
>Cluster 2
line 1
line 2
line 3
line 4
>Cluster 4
line 1
line 2
line 3
line 4
line 5 
```

`minoroutput.txt`：

```
>Cluster 1
line 1
line 2
line 3
>Cluster 3
line 1 
```

# java - Android.widget textView 到 android.widget.button

> ID：14803243
> 
> 赞同：0
> 
> 时间：2013-02-10T22:17:58.997
> 
> 标签：java, android, xml, android-layout, android-widget

我是安卓新手。我正在尝试构建这个小应用程序，但是每次我以粗体添加代码时：

```
d = (Button) findViewById (R.id.tvDis); 
```

应用程序崩溃，如果我删除此行，一切正常。我在 android 2.2 api 8 版本和 nexus s 模拟器上运行它。

```
package com.maximusstudios.numtowords;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
/**Called when the activity is first created.*/
    int counter;
    Button add, sub;
    TextView d;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        counter = 0;
        add = (Button) findViewById (R.id.bAdd);
        **d = (Button) findViewById (R.id.tvDis);**
        sub = (Button) findViewById(R.id.bSub);
        add.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter++;

            }
        });
sub.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter--;
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:text="Your Total is 0"
        android:textSize="20dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:id="@+id/tvDis"

         />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add one"
        android:layout_gravity="center"
        android:textSize="20dp"
        android:id="@+id/bAdd"
        />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add one"
        android:layout_gravity="center"
        android:textSize="20dp"
        android:id="@+id/bSub"
        />

</LinearLayout> 
```

错误列表：

```
02-10 18:00:21.452: D/AndroidRuntime(910): Shutting down VM
02-10 18:00:21.452: W/dalvikvm(910): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-10 18:00:21.472: E/AndroidRuntime(910): FATAL EXCEPTION: main
02-10 18:00:21.472: E/AndroidRuntime(910): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.maximusstudios.numtowords/com.maximusstudios.numtowords.MainActivity}: java.lang.ClassCastException: android.widget.TextView
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.os.Looper.loop(Looper.java:123)
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-10 18:00:21.472: E/AndroidRuntime(910):  at java.lang.reflect.Method.invokeNative(Native Method)
02-10 18:00:21.472: E/AndroidRuntime(910):  at java.lang.reflect.Method.invoke(Method.java:521)
02-10 18:00:21.472: E/AndroidRuntime(910):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-10 18:00:21.472: E/AndroidRuntime(910):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-10 18:00:21.472: E/AndroidRuntime(910):  at dalvik.system.NativeStart.main(Native Method)
02-10 18:00:21.472: E/AndroidRuntime(910): Caused by: java.lang.ClassCastException: android.widget.TextView
02-10 18:00:21.472: E/AndroidRuntime(910):  at com.maximusstudios.numtowords.MainActivity.onCreate(MainActivity.java:23)
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-10 18:00:21.472: E/AndroidRuntime(910):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-10 18:00:21.472: E/AndroidRuntime(910):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:19:01.157

改成

```
d = (TextView) findViewById (R.id.tvDis); 
```

你的选角是错误的。使用您的代码，当您这样做时`(Button)`，您会尝试将`TextView`返回的内容`findViewById()`转换为 a `Button`，由于它们是不兼容的类型，因此无法正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T22:19:38.903

您将 d 定义为 a`TextView`并尝试将其转换为 a`Button`

应该

```
d = (TextView) findViewById (R.id.tvDis); 
```

你得到的错误是`ClassCastException`

# python - 使用 MSVC 编译 _ssl，主机应用程序崩溃（不在调试器中！）

> ID：14803244
> 
> 赞同：0
> 
> 时间：2013-02-10T22:18:00.283
> 
> 标签：python, windows, debugging, visual-c++, access-violation

我正在尝试`_ssl`使用 MSVC 编译器在 Windows 上为 Python 2.6 编译模块，因为嵌入到主机应用程序中的 Python 运行时是使用此编译器和此版本构建的。但是，运行时在 Windows 上不附带本机 ssl 支持，不是因为它不受支持，而是因为（在官方声明中）许可证尚未经过检查以与闭源应用程序兼容。

我已经从 Python 主页下载了[CPython 2.6.8 源](http://www.python.org/download/releases/2.6.8/)并将其提取`_ssl.c`并`socketmodule.h`（ssl 模块源需要包含）到一个单独的文件夹中。我还下载了[openssl-for-windows](http://code.google.com/p/openssl-for-windows/) win32 构建，以便将其与 ssl 模块源链接。

我的构建命令如下：

```
cl /I"C:\path\to\host\python\runtime\include" /I"include/" _ssl.c /Fo"_ssl.obj" /c
link _ssl.obj /DLL "C:\path\to\host\python\runtime\libs\python26.lib" lib/libeay32.lib lib/ssleay32.lib Ws2_32.lib /OUT:_ssl.pyd 
```

`libeay32.lib`并且`ssleay32.lib`来自 openssl-for-windows 发行版。该模块编译良好并输出一个 88KB 的共享库。

**问题**

当我启动主机应用程序并运行调用 Python 运行时运行代码导入并使用最近编译`_ssl`的模块的命令时，应用程序崩溃。宿主应用程序有自己的异常处理程序，在崩溃时会编写错误报告。

```
Exception
{
    ExceptionNumber = 0xC0000005
    ExceptionText = "ACCESS_VIOLATION"
    Address = 0x01A27058
    Thread = 4776
    Last_Error = 0x00000000
} 
```

异常点的调用堆栈不会在任何 Python 相关过程中结束。我假设在触发这个地方的错误之前发生了一些不正确的事情。

**怪异**

当我从 Win32 调试器 (WinDbg) 运行应用程序时，*不会*发生此错误并且一切运行正常。

**问题**

我在编译`_ssl`模块时做错了什么，或者什么会触发这个异常？

**附加信息**

*   嵌入式 Python 运行时如下：`2.6.4 (r264:75706, Mar 6 2012, 02:32:04) [MSC v.1600 32 bit (Intel)]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:31:56.183

崩溃最终是由于主机应用程序中的错误造成的。但是，只有在从 Web 获取数据时，才会出现此错误，而这只能通过 ssl 模块实现。

# cakephp - CakeEmail 和 SMTP 错误 535

> ID：14803249
> 
> 赞同：1
> 
> 时间：2013-02-10T22:18:39.473
> 
> 标签：cakephp, smtp, cakephp-2.3

我正在使用 cakephp 2.3.0，我想使用 devocot + postfix 发送电子邮件。SMTP 工作正常，因为我已经安装了 roundCube 并且你收到了电子邮件并发送了电子邮件。

```
class EmailConfig {
public $default = array(
    'host' => 'poczta.example.com',
    'port' => 25,
    'auth' => 'plain',
    'username' => 'username@poczta.example.com',
    'password' => '**********',
    'tls' => true,
    'transport' => 'Smtp',
    'from' => array('username@poczta.example.com' => 'Username'),
    'returnPath' => 'username@poczta.example.com',
    'layout' => false,
    'emailFormat' => 'html',
    'template' => 'only_text',
    'charset' => 'utf-8',
    'headerCharset' => 'utf-8',
); 
```

}

发送电子邮件的代码：

```
 try {
            $oEmail->reset();
            $oEmail->config('default');
            $oEmail->to(preg_replace('/&#?[a-z0-9]+;/i', '' , trim($v['Email']['email']) ));
            $oEmail->subject($subject);
            $content = str_replace('${id}', md5($v['Email']['id']), $context);
            $content = str_replace('queueId', $queueId, $content);
            $oEmail->viewVars(array('email' => $content));
            if($oEmail->send()) {
                $last = $v['Email']['id'];
                $send++;
            }
        }
        catch(Exception $e) {
            $this->out($e->getMessage());
        } 
```

我看到我在控制台：

```
SMTP Error: 535 5.7.8 Error: authentication failed: Invalid authentication mechanism 
```

使用 telnet 进行快速测试：

```
telnet 127.0.0.1 25
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
220 poczta.example.com ESMTP Postfix (Debian/GNU)
ehlo testing
250-poczta.example.com
250-PIPELINING
250-SIZE 10240000
250-VRFY
250-ETRN
250-STARTTLS
250-AUTH PLAIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250 DSN 
```

所以请帮助我如何使用蛋糕发送电子邮件？编辑：我在电子邮件配置文件中有 tls。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:12:23.770

它不像`tsl`你在配置中那样，它是`tls`

# c - 如何做shell重定向C

> ID：14803251
> 
> 赞同：0
> 
> 时间：2013-02-10T22:19:01.307
> 
> 标签：c

我有一个接受用户输入的分词器。从那里我继续扫描“>”或“<”以寻找潜在的重定向。

```
for(i=0;i<n;i++){  //I/O redirection
        //printf("extracted token is %s\n",tokens[i]);

        //get the
        if (strcmp(tokens[i],"<")==0) {
            printf("found <  !!!!\n");

            if(tokens[i+1] == NULL){  //if there isn't a input file
                printf("Please have a input file\n");
                break;
            }else if(tokens[i-1] == NULL){ //if there isn't a output file
                printf("Pleae have a output file\n");
                break;
            }
            infile = 1;
            outfile = 1;

            fd=fopen(tokens[i-1],"w");
            fclose(fd);
        }
 } 
```

上面的代码只处理“<”重定向。请注意，这只是围绕 while 循环（shell 设计）的一小段代码。在它通过这个for循环之后，我有这个：

```
for(i=0;i<n;i++){
        //printf("extracted token is %s\n",tokens[i]);
        char *ex = "exit";
        char *his = "history";

        if(strcmp(tokens[0],his) == 0 && max_cmd == 0 ){ //get history
            for(j=0;j<counter;j++){
                printf("%i. %s\n",j+1,historic_cmd[j]);         
            }

        }else if(strcmp(tokens[0], his) ==0 && max_cmd == 1){
            for(j=0; j<CMD_MAX;j++){
                printf("%i. %s\n",j+1,historic_cmd[j]);
            }
        }else if(strcmp(tokens[0],ex) == 0){ //exit program
            exit(2);
        }else{                      //forking
            pid = fork();
            if(pid){
                pid=wait(NULL);

                if(infile > 0)
                    dup2(fileno(fd),0);

                if(outfile > 0)
                    dup2(fileno(fd),1);

            }else{
                if(execvp(tokens[0],tokens)){
                    puts(strerror(errno));
                    exit(127);
                }

            }

        }

    } // end of for loop

}//end of while loop for user input 
```

我对它为什么不执行重定向感到困惑。如果我输入以下内容：

```
ps > s 
```

它在工作目录中创建文件 s，但它是空的。我是否错误地使用了“dup2”？

“ps > s”的示例输出：

```
user$>ps > s
ps: illegal option -- >
usage: ps [-AaCcEefhjlMmrSTvwXx] [-O fmt | -o fmt] [-G gid[,gid...]]
      [-u]
      [-p pid[,pid...]] [-t tty[,tty...]] [-U user[,user...]]
   ps [-L]
ps: illegal option -- >
usage: ps [-AaCcEefhjlMmrSTvwXx] [-O fmt | -o fmt] [-G gid[,gid...]]
      [-u]
      [-p pid[,pid...]] [-t tty[,tty...]] [-U user[,user...]]
   ps [-L]
ps: illegal option -- >
usage: ps [-AaCcEefhjlMmrSTvwXx] [-O fmt | -o fmt] [-G gid[,gid...]]
      [-u]
      [-p pid[,pid...]] [-t tty[,tty...]] [-U user[,user...]]
   ps [-L]
found > !!!!!---------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:43:24.820

这是您应该用来在 C 中进行重定向的流程。

```
int file_stdin;
int file_stdout;
int file_stderr;

/*--------------------------------------------------------------------
; code to set infile and outfile I'll assume that if redirection isn't
; being used, the appropriate filehandle will be -1.
;
; file_stdin  should be a file that is opened using O_RDONLY.
; file_stdout should be a file that is opened using O_WRONLY.
; file_stdout should be a file that is opened using O_WRONLY.
;
; Be wary of using a file descriptor opened for both reading and writing
; and using the same file descriptor---it will probably not do what you
; expect it to do.
;
; Also note, you can also use file descriptors from the pipe() system
; call (to allow piping from command to command) or network sockets, or
; anything that can be read/written from a file descriptor.
;---------------------------------------------------------------------*/

pid_t child;

child = fork();
if (child < 0)
  report_error(errno);
else if (child > 0)
{
  int status;
  int rc;

  /*------------------------------------------------------------------
  ; wait for the child process.  More code needs to be added to
  ; descriptor errors and what not, but that's left as an exercise for
  ; the reader
  ;-----------------------------------------------------------------*/

  rc = wait(&status);
}
else
{
  /*--------------------------------------------------------------------
  ; child process.  Set up redirection if required.  Once the rediretion
  ; has been set (using dup2()), the original file descriptor is closed   
  ; as it is no longer needed and just wastes file descriptors in the   
  ; child process.
  ;-------------------------------------------------------------------*/

  if (file_stdin > -1)
  {
    dup2(file_stdin,STDIN_FILENO);
    close(file_stdin);
  }

  if (file_stdout > -1)
  {
    dup2(file_stdout,STDOUT_FILENO);
    close(file_stdout);
  }

  if (file_stderr > -1)
  {
    dup2(file_stderr,STDERR_FILENO);
    close(file_stderr);
  }

  /*------------------------------------------------------------------
  ; close any unneeded open files here ... 
  ;------------------------------------------------------------------*/

  /*------------------------------------------------------------------
  ; PROGRAM, ARGV and ENVP need to be replaced with appropriate values
  ;------------------------------------------------------------------*/

  if(execve(PROGRAM,ARGV,ENVP) < 0)
    _exit(EXIT_FAILURE);
} 
```

显然，上面的代码需要适应您的项目，但这是一般流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:27:28.527

您替换*父*进程的`stdin`and （在 中），它不会影响您的孩子。将东西移到分支，就在.`stdout`*`if(pid)``dup2``else``execvp`*

# wcf - silverlight + wcf 部署 - 开发端口干扰

> ID：14803253
> 
> 赞同：0
> 
> 时间：2013-02-10T22:19:17.017
> 
> 标签：wcf, silverlight

我有一个 silverlight 5 应用程序，在我的 web 项目中有一个（非 RIA）WCF 服务。当然，它在我的机器上运行良好；-) - Windows 7，但是当我将它部署到我的开发服务器（带有 .NET 4 的 WinServer2008，使用 IIS 6）时，应用程序似乎没有完成加载 - 我得到了初始 silverlight 正在加载...然后我只有一个空白屏幕。我没有看到任何错误消息。

我认为问题可能是silveright应用程序假定WCF服务的端口与我机器上的端口相同（46133）。

我看过网上的文章说应该将ServiceReferences.ClientConfig中的endpoint地址设置为../Service.svc。如果我将其更改为此并进行部署，则没有任何变化。

在 web 项目的属性中，在 web 选项卡上，我选中了 Use Visual Studio Development Server，特定端口 46133，Virtual Path =/

我认为已部署的站点仍在尝试使用端口 46133，因为 Fiddler 显示 clientaccesspolicy.xml 文件的 502 红色项目，并带有消息

[Fiddler] 到 localhost 的套接字连接失败。
错误代码：10061
。无法建立连接，因为目标机器主动拒绝它 127.0.0.1:46133

有什么建议么？

这是 ServiceReferences.ClientConfig 文件：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                    <security mode="TransportCredentialOnly" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="../Service.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService" contract="ServiceReference1.IService"
                name="BasicHttpBinding_IService" />
        </client>
    </system.serviceModel>
</configuration> 
```

我的 web.config 是

```
 <system.web>
    <httpRuntime executionTimeout="180" />
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off"/>
  </system.web>

  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpStreamingBinding" maxBufferSize="2147483647"
          maxReceivedMessageSize="2147483647" transferMode="Streamed" receiveTimeout="01:00:00" sendTimeout="01:00:00">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" />
            <!--<transport clientCredentialType="Windows" />-->
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>

    <client />

    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment
        multipleSiteBindingsEnabled="true" />

    <services>
      <service name="CitationAir.MissionPlanning.WebService.Service">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamingBinding"
            contract="CitationAir.MissionPlanning.WebService.IService" />
      </service>
    </services>
  </system.serviceModel>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

# css - 给嵌入对象一个 z-index css

> ID：14803262
> 
> 赞同：0
> 
> 时间：2013-02-10T22:19:50.600
> 
> 标签：css, embed, z-index

我有这个全屏视频库，我想在页面上附加一个菜单，但我希望菜单与嵌入对象重叠。

我将菜单放置为`z-index:1`并且嵌入的对象仍然重叠，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:33:37.007

如果您使用的是 Flash，这里有一个很好的逐步操作方法： [http ://rijamedia.com/blog/2011/02/simple-fix-html-content-over-flash-content-in-all-browsers /](http://rijamedia.com/blog/2011/02/simple-fix-html-content-over-flash-content-in-all-browsers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:22:41.553

前段时间我有类似的问题，这是我的解决方案：

也将嵌入对象设置`z-index`为**-1**

# c - 将数组从函数传递到主函数

> ID：14803267
> 
> 赞同：1
> 
> 时间：2013-02-10T22:20:17.820
> 
> 标签：c, arrays, function

如何将数组从函数传递到C中的main？

```
#include<stdio.h>
int merge(int a[],int b[])
{
    int i=0;
    int j=0;    
    int k=0;
    int c[17];
    while(i<10&&j<8)
    {
        if(a[i]<b[j])
        {

            c[k]=a[i];
            i++;
        }
        else
        {
            c[k]=b[j];
            j++;
        }
        k++;
    }
    while(i<10)
    {
        c[k]=a[i];
        i++;
        k++;
    }
    while(j<10)
    {
        c[k]=b[j];
        j++;
        k++;
    }
    return c;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:35:20.620

一种解决方案是采用*三个*数组参数：

```
void merge(int a[], int b[], int c[]); 
```

然后你可以合并`a`并`b`把结果放入`c`. 调用函数的人负责创建`c`足够大的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:34:57.390

如果你想让你的函数返回数组，有两种方法：

1.  该函数必须返回指向数组中第一项的指针（实际上数组本身是 C 中的指针）。在这种情况下，您的函数必须声明为`int *merge(int a[], int b[])`.
2.  您必须将数组传递给将由函数本身修改的函数。您可以这样做：`int merge(int A[], int B[], int C[])`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T22:41:34.510

这里有三个想法...

1.  您不能在 C 中返回数组，但*可以*返回`struct`包含数组的 a，因此您可以这样做。
2.  如果您只是说如果它是静态或 malloc-ed`int x[3]; return x;`将返回`x.`That's OK 的地址，但如果它是普通的自动存储类本地，则会严重丢失。所以无论你做什么，你都应该`malloc(3)`在函数中使用对象，或者至少让它成为静态的。
3.  您可以将新数组作为参数传递，从而避免返回它的问题。

# colors - 网站上该区域的颜色值是多少

> ID：14803269
> 
> 赞同：-1
> 
> 时间：2013-02-10T22:20:26.123
> 
> 标签：colors

在本网站的顶部：[已删除] – 略带灰白色的颜色 – 我如何计算出该颜色的 RGB 值？

或者我可以在 Photoshop 中应用于图像的其他值...？

设置在该区域的横幅 - 照片和我的名字 - 这是一个 .gif，我的颜色略有不同 - 我想让颜色完全相同，所以它合并到它的背景中...... </p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:24:28.260

[ColorZilla](https://addons.mozilla.org/en-us/firefox/addon/colorzilla/)是一个很好的 Firefox 扩展，它在浏览器中为您提供了一个吸管。

另一种方法是使用 Chrome 开发人员工具、Firefox 中的 Firebug 等来检查元素。在 Chrome 中，您可以通过右键单击该区域并单击“检查元素”来执行此操作。这将为您提供与此类似的视图，希望向您显示颜色值：

![检查元素](../Images/52a65af69761d3058659d08b63329cd2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:24:00.127

[根据http://www.javascripter.net/faq/hextorgb.htm](http://www.javascripter.net/faq/hextorgb.htm) ，颜色是`#f8f8f8`RGB 中的248、248、248 。

如果你想弄清楚自己，你只需要检查页面的来源。如果您使用的是 Chrome，只需右键单击该元素，然后`Inspect element`从菜单中选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:24:14.560

将屏幕截图复制到 Photoshop：它是#f8f8f9。

如果您想经常这样做，您可能会发现使用 ColorPicker 之类的插件更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T22:25:00.893

简单的解决方案：制作一个打印屏幕并使用 Photoshop、Paint.NET 或任何其他带有颜色选择器的图像编辑器。使用颜色选择器选择该灰白色并检查颜色窗口的 RGB 值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T22:26:02.410

您可以在浏览器中安装颜色选择器。

1.  [火狐](http://www.colorzilla.com/)
2.  [铬合金](https://chrome.google.com/webstore/detail/colorpicker-09/jegimleidpfmpepbfajjlielaheedkdo?hl=en)

您可以截屏并使用图像编辑器检查颜色值。

1.  微软油漆
    *   在吸管中选择颜色
    *   单击它，您将在标准窗口颜色选择器中看到值
2.  伊尔凡观
    *   只需悬停像素
3.  GIMP
    *   再次使用颜色选择器

# css - div 100% 中的水平居中 div (wordpress)

> ID：14803275
> 
> 赞同：1
> 
> 时间：2013-02-10T22:21:13.897
> 
> 标签：css, wordpress, html

我正在尝试将 div 水平居中在 100% 宽度的 div 中。div 容器是“#post-area”，里面的所有 div 都有一个类“.post”。

这是链接：[http ://bit.ly/VOqkhv](http://bit.ly/VOqkhv)

调整浏览器大小时可能会看到效果不佳，实际上，所有 div 都没有以菜单为中心。这怎么可能？我也尝试了 margin: auto; 但什么都没有。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:28:25.443

将 100% div 设置为`position:relative`您想要居中的元素`position:relative; margin: 0 auto;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:36:28.873

那是因为它们向左浮动。您可以改用 inline-block 。

添加`text-align: center;`到#post-area

删除`float: left;`并添加`display: inline-block; vertical-align: top; text-align:left;`到 .type-post

# php - 使用文件检查器搜索和擦除数据库行

> ID：14803282
> 
> 赞同：0
> 
> 时间：2013-02-10T22:22:24.503
> 
> 标签：php, mysql, database, file, erase

您好我正在尝试从嵌入字段获取文件路径，使用该路径查看该路径中是否存在文件。如果文件不存在，则删除该条目。我正在运行一个游戏站点，并且下载游戏文件的脚本跳过了一些，所以它就像在 4000 个条目的数据库大海捞针中找到一根针。任何帮助表示赞赏。这是我的代码：

```
<?php
if(isset($_POST['clean'])) {
$query = "SELECT * FROM games WHERE embed";
$result = mysql_query($query) or die ("no query");

$result_array_path = array();
while($row = mysql_fetch_assoc($result))
{
    $result_array_path = $row;
}
$count = mysql_num_rows($result);
for($counter=0;$counter<$count;$counter++){
if (file_exists($result_array_path[$counter])){

}else{
    mysql_query("DELETE FROM games WHERE embed".$result_array_path[$counter]);
    echo $result_array_path[$counter]." ";
}
}
}
?> 
```

- - - - - - - 编辑 - - - - - - -

我将代码更新为但它决定删除我的整个数据库而不是删除丢失的游戏条目。这是修改后的代码：

```
 <?php
if(isset($_POST['clean'])) {
$query = "SELECT * FROM games WHERE embed NOT LIKE '%mochiads.com%'";
$result = mysql_query($query) or die ("no query");

$result_array_path = array();
while($row = mysql_fetch_assoc($result))
{
    $result_array_path[] = $row['embed'];
}
foreach($result_array_path as $path) {
  if(!file_exists($path)) {
    mysql_query("DELETE FROM games WHERE embed = '" . $path . "'");
    echo $path." | ";
  }
}
}
?> 
```

- - - - - -编辑 - - - - - - -

我调试了程序，所以它现在可以工作了。必须在程序中添加一个“ `$_SERVER['DOCUMENT_ROOT']`”。这是完成的程序

```
<?php
if(isset($_POST['clean'])) {
$query = "SELECT * FROM games WHERE embed NOT LIKE '%mochiads.com%'";
$result = mysql_query($query) or die ("no query");

$result_array_path = array();
while($row = mysql_fetch_assoc($result))
{
    $result_array_path[] = $row['embed'];
}
 foreach($result_array_path as $path) {
      $rel_path = str_replace('http://www.flamegame.net', '', $path);
      $rel_path = str_replace('http://flamegame.net', '', $rel_path);
      $rel_path = str_replace('%20', ' ', $rel_path);

      if(! file_exists($_SERVER['DOCUMENT_ROOT'] . $rel_path)) {
    mysql_query("DELETE FROM games WHERE embed = '" . $path . "'");
    echo $rel_path." | ";
  }
}
}
?> 
```

感谢所有的帮助，尤其是 Gargron。

对于那些想知道这个程序适用于我的网站的人： [http ://www.FlameGame.net](http://www.FlameGame.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:16:02.003

我看到一个可能是您的问题的错字：

```
$result_array_path = array();

while($row = mysql_fetch_assoc($result))
{
  // You want to append the row to the results array
  // instead of replacing the array each time, so []
  $result_array_path[] = $row['embed'];
  // That's assuming the table field containing the path is "embed"
} 
```

而不是使用`mysql_num_rows`，您可以像这样遍历项目`$result_array_path`：

```
foreach($result_array_path as $path) {
  if(! file_exists($path)) {
    // Delete
    // You missed a = in the query too
    mysql_query("DELETE FROM games WHERE embed = '" . $path . "'");
  }
} 
```

那应该使它起作用。

# css - 修复了后台附件 IE 问题

> ID：14803286
> 
> 赞同：1
> 
> 时间：2013-02-10T22:23:02.270
> 
> 标签：css

我最近试图在我的网站上放置一个固定的渐变背景，并且在 chrome 和 firefox 中运行良好，但旧版本的 IE 不喜欢它……它似乎根本不让我滚动……想知道是否有人可以帮助？

```
html,body,footer,#Top,#Bottom {height: 100%}
body,footer,#Top,#Bottom   {
    background-attachment: fixed !important;
    filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=#d4d4d4, endColorstr=#fefefe);
    background-image: -moz-linear-gradient(center top -90deg, #d4d4d4, #fefefe);
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#d4d4d4), to(#fefefe));
background-image: linear-gradient(#d4d4d4, #fefefe);
-pie-background: linear-gradient(#d4d4d4, #fefefe); 
} 
```

# javascript - 会话闪烁消息仅在单独刷新后显示，而不是在快速 POST 上显示

> ID：14803291
> 
> 赞同：2
> 
> 时间：2013-02-10T22:23:21.980
> 
> 标签：javascript, node.js, express

几周前从 Express 开始，终于遇到了我的第一个障碍。我试图弄清楚如何向我的视图发送一条闪光消息（layout.jade）。当我验证用户注册并且验证失败（使用 express-validator）时，我想写入会话 flash 消息，然后将其显示在页面上。

我现在所做的只有在我在发布后刷新（例如在控制器/index.js 中）时才有效，而且我还需要弄清楚如何只让这个 flash 消息显示一次：

/app.js

```
/*
 * Configuration
 */
app.configure(function() {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(expressValidator);
  app.use(express.cookieParser());
  app.use(express.bodyParser({ uploadDir : './' }));
  app.use(express.methodOverride());
  app.use(viewHelpers());
  app.use(function(req, res, next){
    res.locals.messages = req.session.messages || {};
    delete req.session.messages;
    next();
  });
  app.use(express.session({
    secret: config.secret,
    cookie: {
      maxAge: 365 * 24 * 60 * 60 * 1000
    },
    store: new MongoStore(config.db)
  }));
  app.use(express.static(__dirname + '/public'));
  app.use(app.router);
}); 
```

/views/layout.jade：

```
div.alert.alert-error
  - if (typeof messages !== "undefined")
    !=partial('session_flash', { messages : messages }) 
```

/views/partials/session_flash.jade：

```
div.alert.alert-error
  each message in messages
    =message 
```

/控制器/index.js

```
req.assert(['user', 'username'], 'Please enter a valid username').len(3, 23);
req.assert(['user', 'email'], 'Please enter a valid email').isEmail();
req.assert(['user', 'password'], 'Please enter a valid password').len(3, 23);
req.session.messages = 'Please fix the errors below';
    errors = req.validationErrors();

    if (errors) {
      console.log(errors);
      res.render('join', {
        title : 'Join -',
        errors: errors,
        params: params
      });
      return;
    } 
```

它是否仅在我刷新后（在 POST 之后）显示，因为我是从内部`/controllers/index.js`而不是渲染连接模板`/app.js`？`delete req.session.messages`另外，我应该在我的配置中做类似的事情吗？我在任何地方都找不到完整的示例，而且我发现的示例已经过时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:52:54.613

看起来你确实在使用一个过时的例子。Express v3.x 不再使用分词。请参阅在 wiki 中[查看系统更改。](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)而是使用[块](https://github.com/visionmedia/jade#block-append--prepend)和[包含](https://github.com/visionmedia/jade#includes)。

在登录时显示错误消息的一种简单方法是

index.js

```
app.locals.error = null;

app.post('/login', function(req, res){

  var name = req.body.name;
  var password = req.body.password;

  if (!name || !password) {
    res.status(400);
    return res.render('login', {
      error: 'All fields are required'
    });
  }

}) 
```

`app.locals.error = null`将错误的默认值设置为`null`。通过这样做，您不必在`error`每次渲染时都设置变量`login.jade`并且 no`error`存在。

```
res.render('login', {
  error: null
}); 
```

您的`login.jade`模板可能如下所示

```
extends layout

block content
  - if (error)
    p= error
  form(method='post', action='/login')
    p
      label(for='name') Username:
      input(type='text', name='name', id='name')
    p
      label(for='password') Password:
      input(type='password', name='password', id='password')
    p
      input(type='submit', value='Submit') 
```

# raphael - 如何在 Raphael.js 中调整画布的大小？

> ID：14803293
> 
> 赞同：5
> 
> 时间：2013-02-10T22:23:33.237
> 
> 标签：raphael

我在调整 Raphael.js 中的画布大小时遇到​​了困难。我以为我可以简单地使用：

```
var paper = Raphael("paper", 100, 100); 
```

这将使用 ID“paper”创建一个宽度和高度为 100 像素的画布。但是，当我尝试这样做时，画布不会使用这些设置进行初始化。我正在使用 Raphael.js 网站上的一些免费图标，我想知道如何更改图标的大小？我是否也必须使用转换功能？如果可以的话，请创建一个 jsfiddle 示例。

提前致谢。

抱歉，如果我没有很好地解释自己，但 Raphael.js 对我来说是全新的。

编辑：

我尝试了您的建议，但无济于事。这是我正在处理的代码。也许我有冲突或什么的。有任何想法吗？

```
<!DOCTYPE html>
<html>
    <head>
        <title>Logo Experiment</title>
        <link rel="stylesheet" href="css/960_16_col.css"/>
        <link rel="stylesheet" href="css/stylesheet.css"/>
        <script src="js/jquery.min.js"></script>
        <script src="js/raphael-min.js"></script>
        <script src="js/script.js"></script>
    </head>
    <body>
        <div class="container_16">  
            <div class="grid_4">
                <div id="design"></div>
            </div>
            <div class="grid_2">
                <div class="arrow"></div>
            </div>
            <div class="grid_4">
                <div id="build"></div>
            </div>
            <div class="grid_2">
                <div class="arrow"></div>
            </div>
            <div class="grid_4">
                <div id="deliver"></div>
            </div>  
            <div class="clear"></div>    
        </div>
    </body>
</html> 
```

```
window.onload = function() {
    var design = Raphael("design");
    design.path("M24.359,18.424l-2.326,1.215c0.708,1.174,1.384,2.281,1.844,3.033l2.043-1.066C25.538,20.822,24.966,19.652,24.359,18.424zM19.143,14.688c0.445,0.84,1.342,2.367,2.274,3.926l2.414-1.261c-0.872-1.769-1.72-3.458-2.087-4.122c-0.896-1.621-1.982-3.108-3.454-5.417c-1.673-2.625-3.462-5.492-4.052-4.947c-1.194,0.384,1.237,4.094,1.876,5.715C16.73,10.147,17.991,12.512,19.143,14.688zM26.457,22.673l-1.961,1.022l1.982,4.598c0,0,0.811,0.684,1.92,0.213c1.104-0.469,0.81-1.706,0.81-1.706L26.457,22.673zM24.35,15.711c0.168,0.339,2.924,5.93,2.924,5.93h1.983v-5.93H24.35zM18.34,15.704h-4.726l-3.424,5.935h11.66C21.559,21.159,18.771,16.479,18.34,15.704zM3.231,21.613l3.437-5.902H2.083v5.93h1.133L3.231,21.613zM15.048,10.145c0-0.93-0.754-1.685-1.685-1.685c-0.661,0-1.231,0.381-1.507,0.936l2.976,1.572C14.97,10.725,15.048,10.444,15.048,10.145zM14.343,12.06l-3.188-1.684L9.62,13.012l3.197,1.689L14.343,12.06zM3.192,26.886l-0.384,1.108v0.299l0.298-0.128l0.725-0.896l2.997-2.354l-3.137-1.651L3.192,26.886zM9.02,14.044l-4.757,8.17l3.23,1.706l4.728-8.186L9.02,14.044z").attr({fill: "#666", stroke: "#000"});

    var build = Raphael("build");
    build.path("M28.537,9.859c-0.473-0.259-1.127-0.252-1.609-0.523c-0.943-0.534-1.186-1.316-1.226-2.475c-2.059-2.215-5.138-4.176-9.424-4.114c-1.162,0.017-2.256-0.035-3.158,0.435c-0.258,0.354-0.004,0.516,0.288,0.599c-0.29,0.138-0.692,0.147-0.626,0.697c2.72-0.383,7.475,0.624,7.116,2.966c-0.08,0.521-0.735,1.076-1.179,1.563c-1.263,1.382-2.599,2.45-3.761,3.667l0.336,0.336c0.742-0.521,1.446-0.785,2.104-0.785c0.707,0,1.121,0.297,1.276,0.433c0.575-0.618,1.166-1.244,1.839-1.853c0.488-0.444,1.047-1.099,1.566-1.178l0.949-0.101c1.156,0.047,1.937,0.29,2.471,1.232c0.27,0.481,0.262,1.139,0.521,1.613c0.175,0.324,0.937,1.218,1.316,1.228c0.294,0.009,0.603-0.199,0.899-0.49l1.033-1.034c0.291-0.294,0.501-0.6,0.492-0.896C29.754,10.801,28.861,10.035,28.537,9.859zM13.021,15.353l-0.741-0.741c-3.139,2.643-6.52,5.738-9.531,8.589c-0.473,0.443-1.452,1.021-1.506,1.539c-0.083,0.781,0.95,1.465,1.506,2c0.556,0.533,1.212,1.602,1.994,1.51c0.509-0.043,1.095-1.029,1.544-1.502c2.255-2.374,4.664-4.976,6.883-7.509c-0.312-0.371-0.498-0.596-0.498-0.596C12.535,18.451,11.779,17.272,13.021,15.353zM20.64,15.643c-0.366-0.318-1.466,0.143-1.777-0.122c-0.311-0.266,0.171-1.259-0.061-1.455c-0.482-0.406-0.77-0.646-0.77-0.646s-0.862-0.829-2.812,0.928L7.44,6.569C7.045,6.173,7.203,4.746,7.203,4.746L3.517,2.646L2.623,3.541l2.1,3.686c0,0,1.428-0.158,1.824,0.237l7.792,7.793c-1.548,1.831-0.895,2.752-0.895,2.752s0.238,0.288,0.646,0.771c0.196,0.23,1.188-0.249,1.455,0.061c0.264,0.312-0.196,1.41,0.12,1.777c2.666,3.064,6.926,7.736,8.125,7.736c0.892,0,2.021-0.724,2.948-1.64c0.925-0.917,1.639-2.055,1.639-2.947C28.377,22.567,23.704,18.309,20.64,15.643z").attr({fill: "#666", stroke: "#000"});

    var deliver = Raphael("deliver");
    deliver.path("M17.078,22.004l-1.758-4.129l-2.007,4.752l-7.519-3.289l0.174,3.905l9.437,4.374l10.909-5.365l-0.149-4.989L17.078,22.004zM29.454,6.619L18.521,3.383l-3.006,2.671l-3.091-2.359L1.546,8.199l3.795,3.048l-3.433,5.302l10.879,4.757l2.53-5.998l2.257,5.308l11.393-5.942l-3.105-4.709L29.454,6.619zM15.277,14.579l-9.059-3.83l9.275-4.101l9.608,3.255L15.277,14.579z").attr({fill: "#666", stroke: "#000"});

    $('.arrow').each(function(i) {
        arrow = Raphael($(this)[0]);
        arrow.path("M10.129,22.186 16.316,15.999 10.129,9.812 13.665,6.276 23.389,15.999 13.665,25.725z").attr({fill: "#666", stroke: "#000"});
    });
}; 
```

```
#design {
    width: 100px;
    height: 100px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T22:37:50.790

要在标题中回答您的确切问题，您可以使用`paper.setSize(width, height)`

来自 Raphael 文档：

![在此处输入图像描述](../Images/b42ea1fee6d5dac0e39a7349248bb98b.png)

你的其他问题有不同的答案。

`var paper = Raphael("paper", 100, 100);`要求`id="paper"`您的页面上已有一些 DOM 元素。该 DOM 元素的宽度和高度应足以容纳您的画布（在本例中为 100x100）。或者，您可以省略宽度和高度，它将采用容器的宽度和高度（非常方便）。您还可以通过放入所有四个维度来生成没有 DOM 元素的画布，例如`var paper = Raphael(0, 0, 100, 100);`在文档的左上角制作一个 100x100 的画布。

要调整 Raphael 图标的大小，您可以使用变换功能。例如`icon.transform("s2");`使它变大两倍。

[这个小提琴](http://jsfiddle.net/daBT7/1/)展示了如何创建一个 Raphael 画布并将铅笔图标放在上面，使其变为黄色并放大两倍。请注意，我们需要围绕左上角缩放（通常它围绕中心缩放）以防止它从页面的顶部和左侧剪掉。

```
var pencil = "M25.31,2.872l-3.384-2.127c-0.854-0.536-1.979-0.278-2.517,0.576l-1.334,2.123l6.474,4.066l1.335-2.122C26.42,4.533,26.164,3.407,25.31,2.872zM6.555,21.786l6.474,4.066L23.581,9.054l-6.477-4.067L6.555,21.786zM5.566,26.952l-0.143,3.819l3.379-1.787l3.14-1.658l-6.246-3.925L5.566,26.952z"
var paper = Raphael(0,0,200,200);
var icon = paper.path(pencil).attr({fill: "yellow"}).transform("s2,2,0,0"); 
```

# javascript - HTML5 GeoLocation 不适用于 Android

> ID：14803297
> 
> 赞同：1
> 
> 时间：2013-02-10T22:24:00.447
> 
> 标签：javascript, android, html, mobile, geolocation

我的设备是 HTC One X，浏览器是 Chrome。我试图让 HTML5 GeoLocation 在浏览器中工作，但我无法做到，它适用于 iOS 和桌面，但对我的 Android 没有任何帮助。下面是我的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'>
      <title>HTML5 Test</title>
      <script src='http://cloud.keepiteasy.net/libs/modernizr.custom.89661.js' type='text/javascript'></script>
      <script src='http://cloud.keepiteasy.net/libs/jquery.js' type='text/javascript'></script>
    </meta>
  </head>
  <body>
    <script type="text/javascript">
      $(function() {
        if (Modernizr.geolocation) {
          navigator.geolocation.getCurrentPosition(success, error);
        }

        function success(position) {
          var lat = position.coords.latitude;
          var lng = position.coords.longitude;

          alert(lat);
          alert(lng);
        }

        function error(err) {
          if(err.code == 1) { 
            alert("Error: Access is denied!"); 
          }else if( err.code == 2) { 
            alert("Error: Position is unavailable!"); 
          } 
        }
      });
    </script>
  </body>
</html> 
```

更新：我修复了 doctype 更新：我更新了错误函数 更新：在我的 HTC 上，我仍然一无所获，甚至没有错误。在我的 Nexus 7 上（刚刚尝试过），它运行良好...... WTF，硬件问题？但其他基于 GPS 的应用程序工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:52:42.463

我在我的 HTC One X 上遇到了同样的问题。至少你可以通过添加超时来确保你的错误函数被调用：

```
navigator.geolocation.getCurrentPosition(success, error, {timeout:3000}); 
```

在此示例中，您的错误函数在 3 秒后被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:52:52.037

似乎是某种硬件问题，因为没有网站可以在我的 OneX 上获取我的地理位置，但是我的 Nexus 7 上面的代码工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T11:00:26.513

重启你的手机，伙计们。是的，这有点愚蠢，但这是解决方案。

# c# - 如何在 mvc 中启动任务并在任务完成时收到通知？

> ID：14803298
> 
> 赞同：4
> 
> 时间：2013-02-10T22:24:04.007
> 
> 标签：c#, asp.net-mvc, asynchronous

我以前从未尝试过在 mvc 中运行异步任务，所以我不确定该往哪个方向发展。

我有一个类可以从大量数据中生成一个 excel 文件，这可能需要一些时间。我想要它，所以当用户单击链接时，他们会收到一条消息，说“完成后会通知您”并且任务开始，然后他们可以继续使用网络应用程序，并且一旦完成，他们就会收到屏幕上的通知完成，最好通过 ajax 可能有几个任务同时运行。如果我能看到任务是否仍在运行，那就太好了。

这些任务从不安排，总是“按需”

哪种方法最适合这种情况？我已经看到有 system.threading、[signalr](http://signalr.net/)、[quartz.net](http://quartznet.sourceforge.net/)等，但有些可能是矫枉过正。

谢谢，

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:37:57.320

在客户端，您必须创建 javascript 轮询代码。
像这样的东西：

```
(function poll(){
   setTimeout(function(){
      $.ajax({ url: "server/checkStatus", success: function(data){
        // check notification data and react accordingly
      }, dataType: "json"});
  }, 30000);
})(); 
```

也可以看看：

*   [facebook、gmail如何发送实时通知？](https://stackoverflow.com/questions/1086380/how-does-facebook-gmail-send-the-real-time-notification)
*   [使用 JavaScript 进行服务器轮询](https://stackoverflow.com/questions/3583203/server-polling-with-javascript)

在服务器端创建这样的对象实例（简化）：

```
class MyTasks
{
   Dictionary<int, Task> tasks;

   public bool AllTasksDone {get;}
   public bool GetNumberOfRunnigTasksForUser(int userId){}

   public void AddTask(int userId, Task task){}
} 
```

您可以将其放入`Application`或放入`Session`（每个用户会话一个实例）。并用它来回答投票请求。

可以轻松创建任务`Task.StartNew(MethodName)`或`Task.StartNew(()=>{your code})`

顺便提一下 - 还有另一种方法 - WebSockets。但它的武器太重了。你可能不想要它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T22:36:08.053

我想到了 2 种可能性：AJAX 或 SignalR。第一种是天真的方法。你开始一个任务，然后你会定期使用 AJAX 调用来检查这个任务是否已经完成。缺点是您将向服务器发送大量请求。

第二种方法涉及使用 SignalR，它在现代浏览器中可以使用 WebSockets 并将通知推送到客户端。与 AJAX 轮询技术相反，使用 SignalR，服务器可以通知客户端某些任务已在服务器上进行或完成。它针对这些场景进行了更多优化。我个人建议您使用 SignalR 来完成此任务。

# php - 在检查变量是否存在之前必须使用 isset() 吗？

> ID：14803304
> 
> 赞同：0
> 
> 时间：2013-02-10T22:25:02.407
> 
> 标签：php

据我了解，与提供方便的 javascript 相反`if (var) {}`，即使`var`在 PHP 中不存在，您也必须使用`if (isset(var)) {}`, 或`if (isset(var) && var) {}`.

今天我偶然发现了一个似乎来自可靠来源的[登录教程](http://tutorialzine.com/2009/10/cool-login-system-php-jquery/)`isset`，其中未使用：

```
if(!$_SESSION['id']): 
```

[来自链接页面，demo.php 部分，第 15 行]

在我的本地服务器上，此行在未设置时会中断`$_SESSION['id']`，即恕我直言，这是一种预期的行为。`$_SESSION['id']`在此行之前未定义。

**有什么神秘的方法可以避免烦人的`isset()`检查吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T22:29:45.090

您的应用程序不会“中断”，因为它只是一个通知，是的：如果您不确定数组键是否存在，您应该*始终测试它们是否存在。*

```
$defaults = array('id' => null);
$session = array_merge($defaults, $_SESSION); 
```

现在您可以确定 $session 有一个 key `id`。

但是，您可以使用`@`

```
if (!@$_SESSION['id']) { /* .. */ } 
```

但通常，如果你曾经触摸过`@`按键：

*   你有一个*很好*的理由
*   你做错了什么:)

在一个干净的应用程序中，您`@`只需要在一些非常罕见的情况下。

最后一句话：*永远不要*在没有验证的情况下使用来自外部的值！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:30:28.387

`if(!$_SESSION['id'])`只会检查会话变量是否为空。`isset`检查它是否是`NULL`. 个人[`empty()`](http://php.net/manual/en/function.empty.php)是要走的路。它检查：

*   ""（一个空字符串）
*   0（0 为整数）
*   0.0（0 作为浮点数）
*   "0" (0 作为字符串)
*   空值
*   错误的
*   array() （一个空数组）
*   $var; （声明的变量，但没有值）

# apache - Apache 在 htaccess 中编写重写规则

> ID：14803305
> 
> 赞同：0
> 
> 时间：2013-02-10T22:25:15.387
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, apache2

我需要一些 .htaccess (Apache2 / Ubuntu) 的重写规则，这些是条件：

*   site.com -> www.site.com
*   subdomain.site.com -> www.site.com/data.php?a=subdomain
*   site.com/sub1 -> www.site.com/data.php?b=sub1
*   subdomain.site.com/sub1 -> www.site.com/data.php?a=subdomain&b=sub1
*   site.com/sub1/sub2 -> www.site.com/data.php?b=sub1&c=sub2
*   subdomain.com/sub1/sub2 -> www.site.com/data.php?a=subdomain&b=sub1&c=sub2

我的主机已经设置了子域通配符。

可能吗？谢谢。

# bash - bash awk 第一列和第三列之后的所有内容

> ID：14803308
> 
> 赞同：6
> 
> 时间：2013-02-10T22:25:25.437
> 
> 标签：bash, awk, xargs

我正在处理以下 bash 脚本：

```
# contents of dbfake file
1 100% file 1
2 99%  file name 2
3 100% file name 3

#!/bin/bash

# cat out data
cat dbfake |

# select lines containing 100%
grep 100% |

# print the first and third columns
awk '{print $1, $3}' |

# echo out id and file name and log
xargs -rI % sh -c '{ echo %; echo "%" >> "fake.log"; }'

exit 0 
```

这个脚本工作正常，但是我如何打印列 $3 中的所有内容，然后打印所有列？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T22:31:11.513

在这种情况下，您可以使用 cut 而不是 awk：

```
 cut -f1,3- -d ' ' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-10T22:29:54.057

```
awk '{ $2 = ""; print }' # remove col 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T22:31:09.690

如果你不介意一点空白：

```
awk '{ $2="" }1' 
```

但是[UUOC](http://it.toolbox.com/wiki/index.php/UUOC)和`grep`：

```
< dbfake awk '/100%/ { $2="" }1' | ... 
```

如果您想修剪该空白：

```
< dbfake awk '/100%/ { $2=""; sub(FS "+", FS) }1' | ... 
```

* * *

* * *

为了好玩，这是另一种使用方式`GNU sed`：

```
< dbfake sed -r '/100%/s/^(\S+)\s+\S+(.*)/\1\2/' | ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T23:20:50.647

其他人以各种方式回应，但我想指出，使用 xargs 来多路复用输出是一个相当糟糕的主意。

相反，你为什么不：

```
awk '$2=="100%" { sub("100%[[:space:]]*",""); print; print >>"fake.log"}' dbfake 
```

就这样。你不需要 grep，你不需要多个管道，而且绝对不需要为你输出的每一行 fork shell。

你可以这样做`awk ...; print}' | tee fake.log`，但如果 awk 也能处理它，那么分叉 tee 没有多大意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T00:48:25.283

所有你需要的是：

```
awk 'sub(/.*100% /,"")' dbfake | tee "fake.log" 
```

# iphone - 由于未捕获的异常，xcode 终止应用程序

> ID：14803309
> 
> 赞同：0
> 
> 时间：2013-02-10T22:25:54.260
> 
> 标签：iphone, ios, xcode, crash, terminate

我在 xcode 中制作了一个应用程序，每当我构建或运行该应用程序时，它都说没有问题，但是在显示启动图像后，该应用程序似乎崩溃并抛出此错误。

由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 high_score_outlet 的键值编码不兼容。” *** First throw call stack: (0x1c24012 0x1609e7e 0x1cacfb1 0xcae41 0x4c5f8 0x4c0e7 0x76b58 0x619019 0x161d663 0x1c1f45a 0x617b1c 0x6198da 0x3fb68b 0x3fb9a2 0x3fa876 0x40bcb5 0x40cbeb 0x3fe698 0x255fdf9 0x255fad0 0x1b99bf5 0x1b99962 0x1bcabb6 0x1bc9f44 0x1bc9e1b 0x3fa17a 0x3fbffc 0x211d 0x2055) libc++abi.dylib: terminate called throwing an exception

我不太确定它为什么会崩溃，因为它说在构建或运行应用程序时代码中没有问题。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:48:39.530

您可能已重命名属性并忘记将 IBOutlet 重新连接到 Interface Builder 文件中的组件。每当您更改代码中作为 IBOutlet 的属性时，您应该检查 Interface Builder 并在连接中断时重新连接该项目。

您的应用程序将编译得很好，因为 Interface Builder Outlets 在运行时连接，当 nib 被加载时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T23:03:24.170

它很可能`IBOutlet`已经过时了。

转到将加载到情节提要中的第一个控制器并检查`Connections Inspector`(⌥⌘6) 并寻找连接到的插座`high_score_outlet`。

![在此处输入图像描述](../Images/6a26c04d5740d552287aae2cef74ca27.png)

这可能是较早的重构遗留下来的。您需要断开它并设置正确的连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:40:58.777

检查哪个类具有该属性`-high_score_outlet`。您收到的消息意味着运行时找不到相关的属性实现，因此：

1.  你没有在课堂上正确定义它，或者
2.  你在一个不是你认为的类的对象上调用它。使用调试器来验证调用方法的对象的类。

# python - 使用 pip 安装 pylibmc 时出错

> ID：14803310
> 
> 赞同：75
> 
> 时间：2013-02-10T22:25:58.543
> 
> 标签：python, memcached, osx-lion, libmemcached

您好，当我尝试使用 pip 在 OSX Lion 上安装 pylibmc 时，出现以下错误：

```
./_pylibmcmodule.h:42:10: fatal error: 'libmemcached/memcached.h' file not found

#include <libmemcached/memcached.h>

         ^

1 error generated.

error: command 'clang' failed with exit status 1 
```

有关如何解决此问题的任何线索？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-10-17T17:03:11.883

libmemcached 也可以使用[Homebrew](http://brew.sh/)安装。

```
brew install libmemcached 
```

之后，`pip install pylibmc`为我工作而无需指定任何其他参数。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-19T23:27:49.373

它在 libmemcached 包中。使用 macports 安装它：

`sudo port install libmemcached`

然后，假设您使用的是 pip：

`pip install pylibmc --install-option="--with-libmemcached=/opt/local"`

或者

`LIBMEMCACHED=/opt/local pip install pylibmc`

如[pylibmc 文档](http://sendapatch.se/projects/pylibmc/install.html#from-pypi)中所述。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-11-12T01:48:39.630

我通过检查 memcached 的安装位置解决了这个问题

```
$ which memcached
/usr/local/bin/memcached 
```

然后在 pip install 之前设置 LIBMEMCACHED 环境变量：

```
$ export LIBMEMCACHED=/usr/local
$ pip install pylibmc 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-07-01T20:05:35.713

给 Ubuntu 用户的答案：

```
sudo apt install libmemcached-dev zlib1g-dev 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-20T13:00:11.840

我有同样的问题，因为我安装了 MEMCACHED 而不是 LIBMEMCACHED，所以，要解决：

```
brew uninstall memcached #to remove wrong package

brew install libmemcached #install correct lib

pip install pylibmc 
```

它对我有用！

:)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-06-07T22:38:00.770

对于那些在 Fedora 上找到这个答案的人：

`sudo yum install libmemcached-devel`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-10T22:44:42.647

我通过从端口安装 memcached 解决了这个问题

[你应该从http://www.macports.org/](http://www.macports.org/)安装第一个 macports

然后运行这个命令

```
sudo port install memcached 
```

之后从 pypi [http://pypi.python.org/pypi/pylibmc](http://pypi.python.org/pypi/pylibmc)下载 pylibmc 提取 .tar.gz 文件然后

```
python setup.py install --with-libmemcached=/opt/local 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-01-10T09:45:25.920

在 macOS High Sierra 中遇到同样的错误，Python3.6 与 brew 一起安装。我的解决方案是导出这些标志，在此评论中提到：[使用 pip 安装 pylibmc 时出错](https://stackoverflow.com/questions/14803310/error-when-install-pylibmc-using-pip/33663121#comment62898499_19432949)

```
export LDFLAGS="-L/usr/local/lib"
export CPPFLAGS="-I/usr/local/include" 
```

之后，`pip install`运行就好了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-05-30T17:19:38.347

这段代码对我有用

```
 sudo apt-get install libmemcached-dev zlib1g-dev

  LIBMEMCACHED=/opt/local pip install pylibmc 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-20T20:26:47.170

有时需要安装 X-Code 命令行工具。

```
 xcode-select -p 
```

# c++ - 为 i386 和 x86_64 架构构建 Lua？

> ID：14803312
> 
> 赞同：1
> 
> 时间：2013-02-10T22:26:01.360
> 
> 标签：c++, lua, x86-64, i386

我一直在构建一些 Lua 脚本来自动化我可以与我的音频 VST 插件一起使用的某些功能和配置。脚本本身工作正常，在嵌入 C++ 的单独项目中进行了测试。

但是，由于 VST 和 VSTGUI 需要针对 10.6 SDK 构建，架构设置为标准 32 位/64 位（有效架构包括 i386 和 x86_64），当我将其集成到 VST 插件项目中时，它忽略 i386 架构的 liblua.a，导致明显的链接错误。

注意：我可以只为 64 位构建 VST 插件并消除 i386 架构，但在某些主机上插件将无法加载。我认为这与一些仍然只实现基于 Carbon 的 UI 的主机以及它如何与 VSTGUI 一起工作有关。

无论如何，这个问题存在什么样的解决方案？我可以为任一架构构建 Lua，但不能同时为两者构建。除非我将它们放在单独的目录中并以某种方式告诉 Xcode？

这并不是一个真正重要的事情，但我希望能够编写插件之间的一些常见元素。谢谢！

# html - 简单的 html dom 显示特定

> ID：14803314
> 
> 赞同：1
> 
> 时间：2013-02-10T22:26:06.133
> 
> 标签：html, dom

如何仅显示包含 a.png 的那些？它应该显示所有`<tr></tr>`包含 a.png 的内容

```
<tr>
<td>57</td>   
<td><img src="z.png" width="40px" alt="z" title="z"></td>   
<td>Apples</td>     
<td>3341</td>
</tr>

<tr>
<td>44</td>   
<td><img src="a.png" width="40px" alt="a" title="a"></td>   
<td>Tree</td>     
<td>4341</td>
</tr>

<tr>
<td>57</td>   
<td><img src="a.png" width="40px" alt="a" title="a"></td>   
<td>Car</td>     
<td>1741</td>
</tr>

<tr>
<td>61</td>   
<td><img src="b.png" width="40px" alt="a" title="a"></td>   
<td>House</td>     
<td>4251</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:43:57.403

纯css是不可能的，你必须使用一些javascript

这是一个用 jQuery 编写的脚本：

```
$('tr').hide().has('img[src=a.png]').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:44:29.357

仅使用 HTML（正如您在标签中所说），您最好的选择是删除您不想要的那些。

使用 JavaScript，您可以找到`src`属性等于的图像，`a.png`然后获取该 (the) 的父级的父级`tr`并将其 CSS`display`属性设置为`none`。

# qt - 连接 QTableView selectionChanged 信号会使用 PyQt 产生段错误

> ID：14803315
> 
> 赞同：8
> 
> 时间：2013-02-10T22:26:10.083
> 
> 标签：qt, user-interface, pyqt, qtableview

我在 PyQt 应用程序中有一个 QTableView，我想跟踪选择何时更改。我尝试按如下方式将信号连接到插槽（使用[此页面](http://qt-project.org/doc/qt-4.8/qtableview.html)上的建议：

```
self.view.selectionModel().selectionChanged.connect(self.selChanged) 
```

它所连接的插槽定义为：

```
def selChanged(self, selected, deselected):
        print "Sel changed" 
```

但是，每当我加载 QTableView 所在的 QMainWindow 时，都会立即出现分段错误。

我在这里做傻事吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-01T12:42:04.497

我遇到了类似的问题，解决方法在这里： [PySide: Segfault(?) when using QItemSelectionModel with QListView](https://stackoverflow.com/questions/19211430/pyside-segfault-when-using-qitemselectionmodel-with-qlistview)

即，替换：

```
self.view.selectionModel().selectionChanged.connect(self.selChanged) 
```

有两个命令：

```
selectionModel = self.view.selectionModel()
selectionModel.selectionChanged.connect(self.selChanged) 
```

坦率地说，不确定为什么会这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:03:00.633

这个问题现在已经修复，原来我在那台机器上使用的是旧版本的 Qt - 这似乎导致了崩溃。

这个故事的寓意是：如果您的代码无缘无故崩溃，请检查您的所有依赖项（在本例中为 Qt 和 PyQt）是否是最新的。

# ms-office - Office Web Apps 中的实时协作

> ID：14803316
> 
> 赞同：0
> 
> 时间：2013-02-10T22:26:35.783
> 
> 标签：ms-office, google-docs

我想知道 Office Web Apps 中是否有插件或功能可以像 Google Drive 一样进行实时协作，我的意思是，同时不保存和保存同一个文档来检索更改。

谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:30:52.443

共同创作（微软称之为）可用于 docx（截至 2011 年 7 月）、pptx 和 xlsx。请参阅[http://blogs.office.com/b/officewebapps/archive/2012/10/22/updated-office-web-apps-now-available-to-all.aspx](http://blogs.office.com/b/officewebapps/archive/2012/10/22/updated-office-web-apps-now-available-to-all.aspx)

对于 docx，它曾经并且可能仍然是每个段落一个用户（因此不像 Google Docs 那样实时）。请参阅[http://gigaom.com/2011/07/08/microsoft-word-web-app-gets-co-authoring-capability/](http://gigaom.com/2011/07/08/microsoft-word-web-app-gets-co-authoring-capability/)

如果它不起作用，请参阅[http://office.microsoft.com/en-au/web-apps-help/troubleshoot-co-authoring-word-documents-HA102506022.aspx](http://office.microsoft.com/en-au/web-apps-help/troubleshoot-co-authoring-word-documents-HA102506022.aspx)或[http://office.microsoft。 com/en-au/sharepoint-server-help/document-collaboration-and-co-authoring-HA101812148.aspx](http://office.microsoft.com/en-au/sharepoint-server-help/document-collaboration-and-co-authoring-HA101812148.aspx)

# java - 内部类的原因

> ID：14803318
> 
> 赞同：1
> 
> 时间：2013-02-10T22:26:54.943
> 
> 标签：java, class, nested

我没有得到内部课程。在 Java 中使用内部类的原因是什么？你能给我一个静态和非静态嵌套类的好例子吗？它的优点/缺点是什么？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:29:43.717

匿名内部类对于使用很少的方法定义一次性类很有用，例如在实现事件侦听器或比较器时。在这些情况下，一个成熟的类将是矫枉过正，因为它不会在其他任何地方使用。

这是一个实现为匿名内部类的字符串列表的比较器的简单示例：

```
Collections.sort(myArrayList, new Comparator() {
    public int compare(Object a, Object b) {
        return ((String) a).compareToIgnoreCase((String) b);
    }
}); 
```

或者，如果`myArrayList`碰巧是一个通用列表，它会是这样的：

```
Collections.sort(myArrayList, new Comparator<String>() {
    @Override
    public int compare(String a, String b) {
        return a.compareToIgnoreCase(b);
    }
}); 
```

# objective-c - 使 NSTimer 的间隔越来越短

> ID：14803321
> 
> 赞同：0
> 
> 时间：2013-02-10T22:27:15.590
> 
> 标签：objective-c, cocoa-touch, nstimer

我是 Objective-C 的新手，所以请让你的答案尽可能简单。

这是在 Xcode 4.5 中制作的 Pong 游戏的 m 文件。在方法 viewDidLoad 中是一个计时器。我的问题是改变间隔（现在浮动间隙 = 0.05），所以球跑得越来越快。我想我必须在其他地方做一个新的计时器，而不是将重复设置为 YES。但我不知道把它放在哪里以及如何处理浮动间隙。

希望你明白我的意思。

PongOne.m:

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];
    paddle.center = CGPointMake(location.x, paddle.center.y);
}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    [self touchesBegan:touches withEvent:event];
}
-(void)CPU {
    ball.center = CGPointMake(ball.center.x + xgain, ball.center.y + ygain);
    if (ball.center.x < 15)
        xgain = abs(xgain);

    if (ball.center.y < 15)
        ygain = abs(ygain);
        gap = gap + 0.01;

    if (ball.center.x > 305)
        xgain = -abs(xgain);

    if (ball.center.y > 445){
        score++;
        if (score <= 2){
            ball.center = CGPointMake(100, 100);
            label1.text = [NSString stringWithFormat:@"%d", score];
        } else {
            [timer invalidate];
            timer = nil;
            [self performSegueWithIdentifier:@"byta1" sender:self];
        }
    }
    if (CGRectIntersectsRect(ball.frame, paddle.frame))
        ygain = -abs(ygain);
    if (CGRectIntersectsRect(ball.frame, paddle2.frame))
        ygain = abs(ygain);
    paddle2.center = CGPointMake(ball.center.x, paddle2.center.y);
}
- (void)viewDidLoad {
    [super viewDidLoad];
    timer = [NSTimer scheduledTimerWithTimeInterval:gap target: self selector:@selector(CPU)         userInfo:nil repeats:YES];
    xgain = 10;
    ygain = 10;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:45:20.667

`[timer invalidate]`您可以在想要更改时删除当前计时器，并像在`viewDidLoad`. 或者，让它不重复，然后在`CPU`每帧创建一个新的，无论当前间隔应该是什么。无论如何，我不会推荐`NSTimer`任何类型的运行循环。另外，我想说改变整个运行循环的时间只是为了改变一个对象的速度是一个坏主意。相反，您应该改变每帧移动它的数量。为什么不改变`{x,y}Gain`自己？

# java - 使用 php 将 mysql 连接到 Android 应用程序时出错

> ID：14803324
> 
> 赞同：0
> 
> 时间：2013-02-10T22:27:37.493
> 
> 标签：java, php, android, mysql, php-parser

我有一个将android应用程序与mysql DB连接起来的php脚本，但是当我运行它时，我遇到了我无法弄清楚的错误。

配置文件

```
<?php
define('DB_HOST', 'localhost');
define('DB_USER', 'root');
define('DB_PASSWORD', '');
define('DB_DATABASE', 'andro_test');?> 
```

脚本

```
<?php
//Start session
session_start();

//Include database connection details
require_once('config.php');

//Array to store validation errors
$errmsg_arr = array();

//Validation error flag
$errflag = false;

//Connect to mysql server
$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if(!$link) {
    die('Failed to connect to server: ' . mysql_error());
}

//Select database
$db = mysql_select_db(DB_DATABASE);
if(!$db) {
    die("Unable to select database");
}

//Function to sanitize values received from the form. Prevents SQL injection
function clean($str) {
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

//Sanitize the POST values
$name = clean($_POST['name']);
$password = clean($_POST['password']);
$cpassword = clean($_POST['cpassword']);

//Input Validations
if($name == '') {
    $errmsg_arr[] = 'Login ID missing';
    $errflag = true;
}
if($password == '') {
    $errmsg_arr[] = 'Password missing';
    $errflag = true;
}
if($cpassword == '') {
    $errmsg_arr[] = 'Confirm password missing';
    $errflag = true;
}
if( strcmp($password, $cpassword) != 0 ) {
    $errmsg_arr[] = 'Passwords do not match';
    $errflag = true;
}

//Check for duplicate login ID
if($login != '') {
    $qry = "SELECT * FROM test WHERE name='$name'";
    $result = mysql_query($qry);
    if($result) {
        if(mysql_num_rows($result) > 0) {
                // here I want to show a msg that auto disappear...
            $errmsg_arr[] = 'username  already in use';    
            $_SESSION['errmsg'] = 'username  already in use';
            unset($_SESSION['errmsg']);

            $errflag = true;
        }
        @mysql_free_result($result);
    }
    else {
        die("Query failed");
    }
}

//If there are input validations, redirect back to the registration form
if($errflag) {
    $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
    session_write_close();
    header("location: D:\Third Year\FYP\dawah\arabteam\src\andro\website");// here I need my php to direct the user to my next android file ".java" under the app. file in my PC
    exit();
}

//Create INSERT query
$qry = "INSERT INTO test(name, password) VALUES('$name','".md5($_POST['password'])."')";
$result = @mysql_query($qry);

//Check whether the query was successful or not
if($result) {
                // here I want to show a msg that auto disappear...
    $errmsg_arr[] = 'succefull registeration';
                    $_SESSION['errmsg'] = 'succefull registeration';
                    unset($_SESSION['errmsg']);

            $errflag = true;
}else {
    echo("registeration failed");
}?> 
```

我的安卓应用文件

我的主要java文件

```
package andro.website;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class ComminicateWithWebsiteActivity extends Activity 
{
TextView txtUserName;
TextView txtPassword;
TextView confpass;
Button btnReg;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initComponents();
}
private void initComponents()
{
    txtUserName=(TextView)findViewById(R.id.txtUserName);
    txtPassword=(TextView)findViewById(R.id.txtPassword);
    confpass= (TextView)findViewById(R.id.confirmpassword);
    btnReg=(Button)findViewById(R.id.btnReg);
    btnReg.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try
            {
                String usName=txtUserName.getText().toString();
                String pass=txtPassword.getText().toString();
                String url="http://10.0.2.2/register-exec.php?name="+usName+"&password="+pass;
                Server server=new Server(url, getApplicationContext());
                server.run();
            }
            catch(Exception c)
            {
                Log.e("Thread Exception", c.getMessage());
            }
        }
    });
}} 
```

服务器文件

```
package andro.website;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import android.content.Context;
import android.util.Log;
import android.widget.Toast;

public class Server
{
String url;
Context context;

public Server(String url,Context context)
{
    this.url=url;
    this.context=context;
}

public void run()
{
        try
        {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet(url);
            Log.d("request", "done");
            HttpResponse response = client.execute(request);
            Log.d("respone", "done");
            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));
            Log.d("Buffer", "readed");
            String line = "";
            while ((line = rd.readLine()) != null) 
            {
                Toast.makeText(context, line, Toast.LENGTH_LONG).show();
                Log.d("Toast", line);
            }
        }
        catch(Exception c)
        {
            Log.e("Exception",c.getMessage());
        }
}
} 
```

我的主要文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/txtUserName"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:ems="10" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/txtPassword"
    android:layout_width="178dp"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textPassword" />

<Button
    android:id="@+id/btnReg"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="reg" />

<EditText
    android:id="@+id/confirmpassword"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textPassword" /> 
```

我得到的错误没有出现在我的 logcat 中，而是出现在 android VM 屏幕中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:40:52.903

虽然你没有提到究竟是什么错误，但它可能是`NetworkOnMainThreadException`在你执行的时候

```
Server server=new Server(url, getApplicationContext());
server.run(); 
```

您应该考虑使用您的网络操作`AsynchTask`（[请参阅此示例）](https://stackoverflow.com/questions/9671546/asynctask-android-example)

快速修复您的代码是让您的`Server`类扩展`Thread`和调用`server.start()`，而不是`server.run()`

**编辑：**

此外，如果没有正当理由使用`ApplicationContext`，您应该使用您的活动上下文，例如

```
Server server=new Server(url, this); 
```

如果你想从服务器类中使用，你必须通过调用`Toast`来运行它`UI thread``Activity.runOnUiThread`

# wpf - 更改视图并获取：在“System.Windows.Controls.Grid”的名称范围内找不到网格名称

> ID：14803326
> 
> 赞同：1
> 
> 时间：2013-02-10T22:27:50.850
> 
> 标签：wpf, exception, mvvm

我使用 Expression Blend 通过状态变化来获取动画。当我按下按钮时，动画开始。它有效！！！！

但是......问题是，如果我导航到另一个用户控件并返回到想要动画的那个，当我点击按钮开始动画时，它一直向我显示异常'gridMain'网格名称无法找到'System.Windows.Controls.Grid' 的名称范围。

代码：

```
<Grid x:Name="grid1" HorizontalAlignment="Left" Height="314.5" VerticalAlignment="Top" Width="234.5" RenderTransformOrigin="0.5,0.5">
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="Animations">
            <VisualState x:Name="Normal"/>
            <VisualState x:Name="Options">
                <Storyboard>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="gridMain">
                        <EasingDoubleKeyFrame KeyTime="0" Value="196.5"/>
                    </DoubleAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
    <Grid.RenderTransform>
        <TransformGroup>
            <ScaleTransform/>
            <SkewTransform/>
            <RotateTransform/>
            <TranslateTransform/>
        </TransformGroup>
    </Grid.RenderTransform>
    <Grid x:Name="grid2" HorizontalAlignment="Left" Height="314.5" VerticalAlignment="Top" Width="234.5" Background="#FF818181" IsEnabled="{Binding CurrentViewModel.IsShowingOptions}">
        <xctk:WatermarkTextBox x:Name="textBoxPurchaseOrder" Margin="10,65.988,0,0" TextWrapping="Wrap" Text="{Binding CurrentViewModel.PurchaseOrderNo, NotifyOnTargetUpdated=True, UpdateSourceTrigger=PropertyChanged}" Watermark="Pedido de Compra" VerticalAlignment="Top" HorizontalAlignment="Left" Width="122" local:FocusExtension.IsFocused="{Binding CurrentViewModel.PurchaseOrderFocus}" Style="{DynamicResource TextBoxTemplate}">
            <xctk:WatermarkTextBox.InputBindings>
                <KeyBinding Key="Enter" Command="{Binding CurrentViewModel.FindCommand}" />
            </xctk:WatermarkTextBox.InputBindings>
        </xctk:WatermarkTextBox>
        <xctk:WatermarkTextBox x:Name="textBoxEanMaterial" HorizontalAlignment="Left" Margin="10,102.988,0,0" TextWrapping="Wrap" Text="{Binding CurrentViewModel.EAN, NotifyOnTargetUpdated=True, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="122" Watermark="EAN" Background="White" Style="{DynamicResource TextBoxTemplate}" >
            <xctk:WatermarkTextBox.InputBindings>
                <KeyBinding Key="Enter" Command="{Binding CurrentViewModel.FindCommand}" />
            </xctk:WatermarkTextBox.InputBindings>
        </xctk:WatermarkTextBox>
        <Button x:Name="buttonExit" Content="Saír" HorizontalAlignment="Left" Margin="10,265.54,0,0" VerticalAlignment="Top" Width="75" Height="38.96" Command="{Binding CurrentViewModel.ExitCommand}"/>
        <Button Content="Button" Margin="141.309,72.488,50.321,199.476" Style="{DynamicResource ButtonStyleFind}" Command="{Binding CurrentViewModel.FindCommand}"/>
        <Button Content="Button" Height="42.536" Margin="10,10,181.63,261.964" Style="{DynamicResource ButtonStyleHome}" Width="42.87" Command="{Binding CurrentViewModel.GoHomeCommand}"/>
        <Image Margin="146,240,40.5,26.5" Source="/SGAMobile;component/Resources/Button-Cross-blue-48.png" Stretch="Fill"/>
    </Grid>
    <Grid x:Name="gridMain" RenderTransformOrigin="0.5,0.5" Background="#FFFBFBFB" d:IsEffectDisabled="True">
        <Grid.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Grid.RenderTransform>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <Grid Height="34.96" VerticalAlignment="Top">
            <Grid.Background>
                <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                    <GradientStop Color="#FFD8D8D8" Offset="0"/>
                    <GradientStop Color="#6CEAEAEA" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
            <Button Content="Button" Margin="1.728,2.272,202.771,2.687" Style="{DynamicResource ButtonOptions}" Command="{Binding CurrentViewModel.ShowOptionsCommand}" Width="30" Height="30"/>
            <Label Content="{Binding CurrentViewModel.ViewName}" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold"/>
            <Path Data="M302,79 L600.42922,79" Fill="Red" HorizontalAlignment="Left" Height="5.5" Margin="0,34.167,0,-4.707" Stretch="Fill" Stroke="#FF979797" VerticalAlignment="Top" Width="234.5"/>
        </Grid>
        <ListView Width="234.5" Margin="0,34.96,0,52.333" ItemsSource="{Binding CurrentViewModel.PurchaseOrders}" ItemTemplate="{DynamicResource ListViewPOItemTemplate}" HorizontalAlignment="Left" BorderBrush="{x:Null}" SelectionMode="Single" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" SelectedItem="{Binding CurrentViewModel.SelectedItem}" Background="{x:Null}" Style="{DynamicResource ListViewTemplate}"/>
        <Button x:Name="buttonNext_Copy" Content="Voltar" HorizontalAlignment="Left" Margin="0,262.167,0,0" VerticalAlignment="Top" Width="117.25" Height="28" Command="{Binding CurrentViewModel.GoHomeCommand}" BorderBrush="#FFB0B0B0" Background="#FF03AEDA" Foreground="White" BorderThickness="0,0,1,0" Style="{DynamicResource ButtonPopupStyle}"/>
        <Button x:Name="buttonNext" Content="Seguinte" HorizontalAlignment="Left" Margin="117.125,262.167,0,0" VerticalAlignment="Top" Width="117.375" Height="28" Command="{Binding CurrentViewModel.GoNext}" Foreground="White" BorderThickness="1,0,0,0" BorderBrush="#FFB0B0B0" Background="#FF03AEDA" Style="{DynamicResource ButtonPopupStyle}"/>
        <Grid x:Name="grid3" Background="#33000000" Visibility="{Binding CurrentViewModel.IsLoading}" d:IsHidden="True">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0*"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseDown" SourceName="grid3" SourceObject="{Binding ElementName=grid3}">
                    <Custom:EventToCommand Command="{Binding CurrentViewModel.ShowOptionsCommand}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <Image x:Name="image" Margin="91,120,101.5,152.5" Source="/SGAMobile;component/Resources/Metro-Loading-Blue-64.png" Stretch="Fill" HorizontalAlignment="Center" VerticalAlignment="Center" Height="42" Width="42" RenderTransformOrigin="0.5,0.5" Grid.Column="1">
                <Image.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform/>
                        <TranslateTransform/>
                    </TransformGroup>
                </Image.RenderTransform>
            </Image>
        </Grid>
        <Grid HorizontalAlignment="Left" Height="24.333" Margin="-0.125,290.167,0,0" VerticalAlignment="Top" Width="234.625">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="93*"/>
                <ColumnDefinition Width="142*"/>
            </Grid.ColumnDefinitions>
            <Label Content="{Binding CurrentViewModel.Message}" HorizontalAlignment="Left" VerticalAlignment="Top" Width="234.625" Foreground="{Binding CurrentViewModel.MessageColor}" FontSize="10.667" FontWeight="Bold" Grid.ColumnSpan="2"/>
        </Grid>

    </Grid> 
```

我正在使用 MVVM 并通过在 MainViewModel 中定义一个属性来更改用户控件：

```
public ViewModelBase CurrentViewModel 
```

和 App.xaml

```
 <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
        <DataTemplate DataType="{x:Type vm:EntryViewModel}">
            <views:EntryView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:GoodsReceiptViewModel}">
            <views:GoodsReceiptView />
        </DataTemplate> 
```

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-15T20:56:01.497

每次触发情节提要时都会评估情节提要 TargetName，这与目标对象是异步的。尝试改用 Target={Binding ElementName=targetName}，这样可以保存绑定。 [在“System.Windows.Controls.Button”的名称范围内找不到名称](https://stackoverflow.com/questions/27714597/name-cannot-be-found-in-the-name-scope-of-system-windows-controls-button)

# mysql - 更新前触发不起作用

> ID：14803328
> 
> 赞同：1
> 
> 时间：2013-02-10T22:28:07.663
> 
> 标签：mysql, triggers

我有一个由 3 个字段的 PK 组成的表；2 个字段是 FK，每个字段都一对一地引用表。

**只有当IDsentiero**的新值等于旧值时，我才想让 UPDATE 工作。

**但是我没有任何信号...**

```
CREATE TRIGGER BEFORE_UPDATE_ON_SENTIERO
BEFORE UPDATE ON SENTIERO
FOR EACH ROW
BEGIN

IF      (NEW.IDsentiero<>OLD.IDsentiero) THEN

                SIGNAL SQLSTATE '45000'
                SET MESSAGE_TEXT = 'UPDATE: I sentieri devono mantenere lo stesso ID';

END IF;

END$$ 
```

# c++ - 对构造函数和析构函数的未定义引用

> ID：14803329
> 
> 赞同：4
> 
> 时间：2013-02-10T22:28:24.610
> 
> 标签：c++, linker, g++

我只看到过这种情况是由于人们在构建时没有将他们的类对象链接在一起，但我有，而且我不确定这是怎么回事。

来源：

```
//test.cpp
#include "Point.h"
#include "Sphere.h"
#include "Scene.h"

int main(){
    Sphere s;
    Scene sc;
    sc.img_plane.upper_left = Point(-1, 1, -3);
    sc.img_plane.upper_right = Point(1, 1, -3);
    sc.img_plane.lower_left = Point(-1, -1, -3);
    sc.img_plane.lower_right = Point(1, -1, -3);
    sc.width = 100;
    sc.height = 100;
    return 0;
} 
```

错误：

```
test.cpp:(.text+0x17): undefined reference to `Sphere::Sphere()'
test.cpp:(.text+0x26): undefined reference to `Scene::Scene()'
test.cpp:(.text+0x192): undefined reference to `Scene::~Scene()'
test.cpp:(.text+0x1a1): undefined reference to `Sphere::~Sphere()'
test.cpp:(.text+0x1bf): undefined reference to `Scene::~Scene()'
test.cpp:(.text+0x1d3): undefined reference to `Sphere::~Sphere()' 
```

生成文件：

```
CC = g++
SRC = ./src
BUILD = ./build

main : main.o Point.o colort.o Sphere.o Scene.o Ray.o HitRecord.o
    $(CC) $(BUILD)/main.o $(BUILD)/Point.o -o $(BUILD)/main

main.o : $(SRC)/test.cpp
    $(CC) -c $< -o $(BUILD)/main.o

Point.o : $(SRC)/Point.cpp $(SRC)/Point.h
    $(CC) -c $< -o $(BUILD)/Point.o

colort.o : $(SRC)/colort.cpp $(SRC)/colort.h
    $(CC) -c $< -o $(BUILD)/colort.o

Sphere.o : $(SRC)/Sphere.cpp $(SRC)/Sphere.h $(SRC)/colort.cpp $(SRC)/Point.cpp
    $(CC) -c $< -o $(BUILD)/Sphere.o

ImagePlane.o : $(SRC)/ImagePlane.cpp $(SRC)/ImagePlane.h
    $(CC) -c $< -o $(BUILD)/ImagePlane.o

Scene.o : $(SRC)/Scene.cpp $(SRC)/Scene.h
    $(CC) -c $< -o $(BUILD)/Scene.o 

Ray.o : $(SRC)/Ray.cpp $(SRC)/Ray.h
    $(CC) -c $< -o $(BUILD)/Ray.o

HitRecord.o : $(SRC)/HitRecord.cpp $(SRC)/HitRecord.h
    $(CC) -c $< -o $(BUILD)/HitRecord.o     

clean :
    rm $(BUILD)/*

test : main 
    $(BUILD)/main 
```

场景构造函数与 Sphere 相同：

球体.h：

```
#ifndef SPHERE_H_
#define SPHERE_H_

#include "colort.h"
#include "Point.h"
#include "Ray.h"

class Sphere {
public:
    Sphere();
    virtual ~Sphere();
    Point center;
    double radius;
    color_t diffuse, specular;
    double intersection(Ray r);
};

#endif /* SPHERE_H_ */ 
```

球体.cpp：

```
#include "Sphere.h"

#include <math.h>

Sphere::Sphere() {

}

Sphere::~Sphere() {

}

...other class functions 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T22:32:36.660

在你的`main`规则中：

```
main : main.o Point.o colort.o Sphere.o Scene.o Ray.o HitRecord.o
    $(CC) $(BUILD)/main.o $(BUILD)/Point.o -o $(BUILD)/main 
```

请注意，尽管您提到 Sphere.o 作为依赖项，但您没有*链接*它。您还需要将其包含在构建行中：

```
main : main.o Point.o colort.o Sphere.o Scene.o Ray.o HitRecord.o
    $(CC) $(BUILD)/main.o $(BUILD)/Point.o $(BUILD)/Sphere.o -o $(BUILD)/main 
```

您可能还想添加其他的，基于您将它们列为依赖项的事实。

# javascript - 将 URL 动态传递给自定义 SoundCloud 播放器

> ID：14803331
> 
> 赞同：1
> 
> 时间：2013-02-10T22:28:26.177
> 
> 标签：javascript, soundcloud

我正在尝试使用来自 SoundCloud 的自定义播放器，以及将 URL 直接传递给播放器的高级用法。我希望页面顶部有一个播放器，然后在播放特定曲目的页面上链接。我从红色皮肤示例中获取了切换播放器链接的代码，并尝试添加到它以使其无法成功运行，切换播放器有效，而不是播放按钮。我敢肯定这是我想念的微不足道的东西。谁能建议我哪里出错了？到目前为止，我的测试代码可以在[http://www.grecho.co.uk/samplesuperstore/test.htm看到](http://www.grecho.co.uk/samplesuperstore/test.htm)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:31:52.863

live 在最新的 JQuery 中已被弃用。`.on(`改为使用

的座位

```
$(function() {
  $('a.sc-remote-play1').live('click', function(event) {
    $('a.sc-player').scPlayer({
      links: [{url: "http://soundcloud.com/jacquesmirage/jacques-le-mac-air-race", title:   "Air Race"}],
    });
  });
}); 
```

删除 'a' （你指向一个锚元素而不是播放器）

```
$(function() {
  $('a.sc-remote-play1').live('click', function(event) {
    $('.sc-player').scPlayer({
      links: [{url: "http://soundcloud.com/jacquesmirage/jacques-le-mac-air-race", title:   "Air Race"}],
    });
  });
}); 
```

# sql - 这个数据结构有什么问题？

> ID：14803333
> 
> 赞同：7
> 
> 时间：2013-02-10T22:28:33.827
> 
> 标签：sql, database-design, data-modeling

我被要求描述这个数据结构有什么问题，以及我将如何改进它。

下面是数据结构：

![图片](../Images/f0be9213ac5c0e29622c29afbea1a57a.png)

这是我到目前为止所拥有的：

*   车价仅在车在陈列室时才设置，将车价放在车表中会更有意义

*   在 Car Table 中存储 NULL 数据是没有意义的，最好有类似这样的布局：

    ![车桌](../Images/24adafff5357c99f37c1b0b1753f0497.png)

*   需要有一个数量标题来显示陈列室中有多少辆特定的汽车，因为有些陈列室有多个相同的汽车

我画的新表还有重复的数据，我依稀记得画数据结构的时候是no no，所以我想我需要做第三张表吗？我真的不确定……

我只需要一些关于当前数据结构有什么问题的帮助，如果有任何方法可以改进它，我们将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T22:37:12.053

一个问题是 Car 表存储了两种不同的东西——它存储了品牌，它存储了模型。

所以你应该把它分开，比如：

使：列makename，makecode

模型：列 makecode（make 的外键）、modelname、modelcode

而且现在陈列室的桌子只会和模型有关，所以不能误引用一个牌子。

由于一个模型可以有许多与之相关的陈列室表格行，因此您无法有意义地合并这两个表格，因此请将它们分开并从那里开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T22:41:51.140

看起来 Car 结构同时存储了汽车制造商和汽车模型。这至少应该引起一些警报。福特、大众和标致等汽车制造商都有自己的`MakeCode`. 嘉年华和高尔夫等车型都有自己的`ModelCode`.

在原始结构中，汽车模型通过 引用其制造`ParentCarId`并*复制*其`MakeCode`. 汽车制造商不是特定型号，它们的 和 被分配了空`ModelCode`值`ParentCarId`。

这`ParentCarId`没有任何意义，汽车成为另一个汽车的孩子意味着什么？相反，汽车属于一个品牌，该品牌是由另一个表表示的另一个实体。此外，汽车不应该有`MakeCode`，因为这是它们所属品牌的属性。显然，品牌和型号非常不同，应该在不同的表格中表示。

将该表一分为二是有意义的：一张用于品牌，一张用于型号。Makes 会有一个`ID`, a`Name`和 a `MakeCode`。模型将具有 a `ID`、 a `Name`、 a`ModelCode`和 a （ a`MakeId`的外键）。`ID``Make`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T22:35:48.857

你是对的，重复数据是禁止的。

我会将“陈列室”更改为“模型”，因为模型可以有各种子类别。IE Golf TDI vs GTI 等。...并且基本价格 (MSRP) 将适用于该模型。陈列室状态对定价没有意义 - 有广告但不在陈列室或地段上的地段。

如果数据支持的话，我认为拥有 NULLable 列没有任何问题。两者都可以，一旦您拥有大量数据，您就可以进行基准测试，看看什么最适合您。但优化之后，而不是之前。

# android - 与简单的 AlertDialog 相比，使用 DialogFragment 的优势？

> ID：14803338
> 
> 赞同：14
> 
> 时间：2013-02-10T22:29:11.120
> 
> 标签：android, android-dialogfragment

我已经阅读了几个 stackoverflow.com 的答案，但仍然看不到使用 DialogFragment 相对于简单的 AlertDialog 的优势。显然，我有两种策略：

a) 使用 AlertDialog.Builder 配置 AlertDialog，.create() 它，然后在我的 Activity 中（在某些按钮处理程序中）使用 .show()，或者

b）子类DialogFragment，在onCreateDialog（）中编写相同的AlertDialog构建代码（除了我只返回.create（），然后在我的Activity中，实例化一个DialogFragment，并显示它。

输出看起来相同。

无论哪种方式，我都*没有*使用过时的代码——我将 .show() 与 AlertDialog 或 DialogFragment 一起使用。当我使用其他尺寸的设备时有优势吗？或者有什么意义...

感谢您的任何见解，

迈克尔

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-10T22:33:33.373

DialogFragment 为您处理许多生命周期管理案例，包括配置更改（例如屏幕旋转）和如果您的应用程序的进程在后台被终止并且用户稍后返回它时的状态恢复。如果您不使用 DialogFragment，则需要以另一种方式处理此类情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-06T07:02:52.393

除了@adamp 所说的之外，由于`DialogFragment`正在获取自己的生命周期回调，因此它将负责其生命周期，因此您的活动将不负责告诉它该做什么。

例如，当活动结束时，你的活动应该告诉对话框`dimiss()`，否则你会`leaked the window`在 logcat 中看到它有错误。

# c++ - 由 shared_ptr 管理的对象的 C++ 隐藏构造函数

> ID：14803341
> 
> 赞同：2
> 
> 时间：2013-02-10T22:29:25.037
> 
> 标签：c++, c++11, constructor, shared-ptr

我有一个继承自 enable_shared_from_this 的类。它有`shared_ptr`s 到子对象并且有一个“根”对象，所以整个层次结构由 shared_ptr 管理。这样一个对象可以有多个父对象并且可以安全地销毁。

我开始编写一个构造函数，然后我意识到用户应该`std::shared_ptr`像我在内部使用的那样管理对象，就像我在一些现有的库中看到的那样，例如 gtkmm。所以我可以做我看到其他人做的事情：隐藏构造函数，并编写一个静态成员函数 create() ，它将 a 返回`shared_ptr`给新对象。显然 create() 非常有用，因为没有它我需要调用`std::make_shared()`或稍后调用`std::shared_from_this()`.

但是我应该隐藏构造函数，为什么？我可以猜到一些很好的理由，例如它强制用户使用 shared_ptr，否则对象会被删除，因此可以保证用户不使用不受 shared_ptr 管理的“孤立”对象。它确保用户不会忘记手动创建 shared_ptr，因为忘记意味着对象被删除，即使它被复制（深拷贝，而不是指针的副本），然后用户很快就会注意到这一点。

另一个有趣的选择是不使用 create() 静态方法，而是使用 add_child() 方法作为创建新对象的唯一方法。这保证了它链接到层次结构。问题：灵活性。如果有人想单独使用一个对象，那是不可能的，除非你派生类。

你会做什么/我应该做什么？隐藏/不隐藏ctor？`add_child()`? `create()`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:56:57.200

在一般情况下，没有一个正确的答案。您可以从编写所有这些方法开始：构造函数、create() 和 create_child()，它们都是公共的。然后，在使用接口时，最好是在测试它时（如果可能的话，在你在“真实”代码中使用它之前完成它），检查不同构造选项的可能副作用、结果和便利性，并决定什么是对于您的特定用例，最好，什么是安全的。

当然，如果所有人都安全，您可以将这三个人都公开。否则，通过将它们设为私有（或者可能是受保护的，如果它是要派生的类的构造函数）来隐藏不安全的，并将安全的公开以供用户使用。

# batch-file - Batch File Live Title

> ID：14803347
> 
> 赞同：0
> 
> 时间：2013-02-10T22:29:48.553
> 
> 标签：batch-file, windows-xp, echo, title

I need to be able to change the title of batch A at the same time of execution of other parts of script.

i want to be able to have it say `Hello! world`. and `echo 1&2 simutaneously` and while the screen is switching between 1 and 2 i need the title to change from 2 to 3.

and please dont give me something like this.

```
echo Hello! world.
ping localhost 3 >nul
title 2
echo Hello! world. 1
ping localhost 3 >nul
title 3
echo Hello! world. 2
ping localhost 3 >nul
title 2
:loop 
```

Thanks in advance to anyone with an answer that works!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:22:01.033

You can't do that in pure Batch. Batch is a procedural language.

You could try writing a program in another language that can talk to the Windows API: [http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682073(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682073(v=vs.85).aspx)

You ***might*** be able to spawn a separate process that could get the Handle for your Console window and then change the title remotely.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-12T11:25:09.687

This can be done with pure batch.
You only need a second thread, that can be started with `start /b`.

The expample code updates the current time in the title until the user press enter.

```
@echo off
REM *** Trampoline to call a label included in the filename
FOR /F "tokens=3 delims=:" %%L in ("%~0") DO goto :%%L

start "" /b cmd /c %~d0\:change_title:\..\%~pnx0

2> lock.tmp (
set /p "value=Enter Text: "
)

echo End of prog
exit /b

:change_title
2> NUL ( > lock.tmp ( break ) ) || (
    title Current time %time%
    ping localhost -n 2 > NUL
    goto :change_title
)

del lock.tmp
title Thread finished
exit /b 
```

# html - Wampserver - 页面显示不同，具体取决于我如何访问它？

> ID：14803348
> 
> 赞同：0
> 
> 时间：2013-02-10T22:29:51.663
> 
> 标签：html, wampserver

为了习惯使用服务器软件（并使测试 PHP 脚本变得更容易），我想我会自己托管一个网站。我成功安装了 Wampserver，我可以通过转到 file:///C:/wamp/www/site/index.php 或 127.0.0.1/site/index.php 来访问该页面。转到前者会显示我想要的页面；[http://i49.tinypic.com/19xqn6.png](http://i49.tinypic.com/19xqn6.png)。但是当我在后者访问它时，它的显示会有所不同（“登录”通知会向下移动）；[http://i49.tinypic.com/sy9feg.png](http://i49.tinypic.com/sy9feg.png)。为什么显示不一样？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:38:12.530

如果您使用`file:///C:`，您将不会在服务器环境中运行。这意味着任何服务器端代码都不起作用（例如 PHP 代码）。您想使用`127.0.0.1/site`或`localhost/site`。

当您使用`file:///C:`所有 html 和 javascript 时，将正确显示，因为这是在客户端完成的。任何应该在服务器端运行的东西，例如 php 都不会执行。

# php - 如何从模板创建一个新的 php 文件

> ID：14803351
> 
> 赞同：0
> 
> 时间：2013-02-10T22:30:02.017
> 
> 标签：php

我当然不是 PHP 专家，并且已经彻底浏览过，但没有找到与此相关的任何内容。可能意味着这个问题很愚蠢，但我试图在注册时创建一个新的 php 文件（以便为每个注册的人提供 rss 提要），到目前为止我已经设法创建了一个漂亮的空文件。这是我最后编写的带有GET功能的测试文件的代码：

```
$USR = $_GET['usr'];
$FILE=$USR.'.rss.php';
$file1 = 'rssdemo.php'; 
$handle = fopen($file1, 'a'); 
$contents = fread($handle, filesize($file1)); 
fclose($handle); 
        $file2 =$FILE; 
        $handle = fopen($file2, 'wb'); 
        fwrite($handle, $contents);  //this should write something but does nothing   
        fclose($handle); 
```

如您所见，我试图从中复制的文件是一个 PHP 文件（它应该反过来生成 XML 文件）。有没有办法创建一个新的 php 文件，打开一个旧文件，复制它的内容并将其粘贴到新创建的文件中？或者也许 fwrite () 只能用于文本？请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:50:37.863

您应该只为每个用户提供一个 url，如下所示：[http ://www.example.com/index.php/greg0ire/rss](http://www.example.com/index.php/greg0ire/rss)

使用重写规则以便调用 index.php，并分析“greg0ire/rss”部分以路由到具有用户参数的 Rss 操作，并将“greg0ire”作为参数传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:59:54.307

我建议您使用一些 php 模板系统，例如[Templum](http://templum.electricmonk.nl/) ，或者您可以编写自己的模板引擎，这里有很多教程，例如[如何制作简单的 html 模板引擎](http://www.broculos.net/en/article/how-make-simple-html-template-engine-php)。谷歌教程你会发现很多模板引擎的例子。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T22:43:31.947

您可以使用 PHP[复制](http://php.net/manual/es/function.copy.php)功能：

```
copy("source/file.php", "destination/file.php"); 
```

# java - 在多线程代码中的两个表中存储相同的 ID

> ID：14803357
> 
> 赞同：1
> 
> 时间：2013-02-10T22:30:30.903
> 
> 标签：java, database, multithreading, concurrency, atomic

我已经开始研究一个项目，其中我在不同的数据库中有两个具有不同模式的表。所以我将有两个不同的连接参数来连接到数据库。并且在连接到每个数据库之后，我需要使用相应表中给出的 sql 在这两个表中插入。

我应该根据命令行参数使用 JDBC 插入所有两个表或其中任何一个表。这意味着单个线程将插入 Table1 和 Table2 或其中任何一个。

命令行参数：- 这里 10 是线程数，100 是任务数，table1 和 table2 是表名。

```
10 100 table1 table2 
```

下面是我的代码。在这段代码中会发生什么 - 假设如果我们只传递一个名为 的表`table1`，那么它将使用用于 table1 的 SQL 插入到该表中。

而且我还需要`id`在两者中插入相同的内容`table1`，`table2`并且将`id`其传递`AtomicInteger`给 Constructor `Task`。所以这意味着如果`id is 1`，那么这`1 id`应该在`table1`和中都有`table2`。

```
 final AtomicInteger id = new AtomicInteger(1);

 ExecutorService service = Executors. newFixedThreadPool(noOfThreads);

 for (int i = 0; i < noOfTasks * noOfThreads; i++) {

      for (String arg : tableNames) {
          String url = (String) prop.get(arg + ".url");
          String user = (String) prop.get(arg + ".user");
          String password = (String) prop.get(arg + ".password");
          String driver = (String) prop.get(arg + ".driver");
          String suffix = (String) prop.get(arg + ".suffix");
          String sql = (String) prop.get(arg + ".sql");

          service.submit( new Task(id, url, user, password, driver, sql, suffix));
        }
    } 
```

下面是实现Runnable接口的Task类

```
class Task implements Runnable {

    private final AtomicInteger id ;
    private final String url ;
    private final String username ;
    private final String password ;
    private final String sql ;
    private final String driver ;
    private final String suffix ;

    public Task(AtomicInteger id, String url, String user, String password, String driver, String sql, String suffix) {
        this.id = id;
        this.url = url;
        this.username = user;
        this.password = password;
        this.driver = driver;
        this.sql = sql;
        this.suffix = suffix;
    }

    @Override
    public void run() {

        try {

           dbConnection = getDBConnection(url , username , password , driver );
           callableStatement = dbConnection .prepareCall(sql);

           int userId = id .getAndIncrement();

           callableStatement.setString(1, String.valueOf(userId));

        //other callableStatement

        callableStatement.executeUpdate();
       }
    } 
```

因此，如果我使用多个线程运行上述程序，例如 Number of Threads as`10`和 Number of Tasks as`1000`并且`id`如果我选择 as `1`。

**然后在两个表中相同的 id 不存在**，这意味着 id 1 将只存在于一个表中`table1`or `table2`。我能想到的唯一原因是 -`id`每次`AtomicInteger`它都会`id`为每个线程获得一个新的。有什么方法可以使用相同的 id 在每个表中插入？然后确保 id 是`PrimaryKey`这样，如果每个线程在这些表中再次插入，它将获得一个新的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:12:56.690

如果我理解正确，您应该将计数器定义为静态以避免重复`PrimaryKey`：

```
static AtomicInteger id; 
```

然后像这样将增量代码移动到主循环（不要忘记删除类`int userId = id .getAndIncrement();`中的`Task`）：

```
for (int i = 0; i < noOfTasks * noOfThreads; i++) {
  // add following line
  int userId = id.getAndIncrement();

  for (String arg : tableNames) {
      String url = (String) prop.get(arg + ".url");
      String user = (String) prop.get(arg + ".user");
      String password = (String) prop.get(arg + ".password");
      String driver = (String) prop.get(arg + ".driver");
      String suffix = (String) prop.get(arg + ".suffix");
      String sql = (String) prop.get(arg + ".sql");

      service.submit( new Task(id, url, user, password, driver, sql, suffix));
    }
} 
```

此外，由于`id`计数器保存在内存中，您可能需要将其持久化，否则在重新启动应用程序后它将重置为 0。

# scala - sbt 发布的工件中的 scala-library.jar 版本

> ID：14803362
> 
> 赞同：11
> 
> 时间：2013-02-10T22:30:50.990
> 
> 标签：scala, sbt, sbt-0.12

由于 Scala 2.10.1 即将推出，我相信，我想确保我现在发布的工件将自动与该版本的 scala-library.jar 一起使用。我使用 sbt 0.12.2 发布，并设置为

```
scalaVersion := "2.10.0" 
```

我正确地将二进制兼容版本附加到*我的工件*上，例如

```
<artifactId>mylibrary_2.10</artifactId> 
```

...但 scala 库依赖项仍然显示 2.10.0：

```
 <dependency>
        <groupId>org.scala-lang</groupId>
        <artifactId>scala-library</artifactId>
        <version>2.10.0</version> <!-- !!! -->
    </dependency> 
```

我想这是不正确的，它应该在这里使用 2.10 或 2.10.+ 吗？

* * *

我也尝试添加`scalaBinaryVersion := "2.10"`，但这似乎并没有改变任何东西。

我的另一个想法是使用`scalaVersion := "2.10.+"`. Sbt 需要永远使用`Getting Scala 2.10.+ ...`，但它最终运行良好，并且`pom`现在为 scala-library.jar 提供了这个版本。所以也许这是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T20:17:38.230

您应该选择 2.10.x，因为它意味着在次要版本之间是二进制兼容的（如[发行说明](http://www.scala-lang.org/2.10.1)中所述）。

`crossScalaVersions`通常，您可以使用sbt.xml中的设置为任意版本的 Scala 生成工件。

*构建.sbt*

```
name := "so-14803362"

scalaVersion := "2.10.0"

crossScalaVersions := Seq("2.10.0", "2.10.1", "2.10.2") 
```

使用上述配置，您可以`+`在 sbt 命令前添加一个来为每个 Scala 版本运行它们：

```
> + publish 
```

这将使用列出的每个 Scala 版本构建和发布项目的工件`crossScalaVersions`。

有关更多信息，请参阅[sbt 文档](http://www.scala-sbt.org/release/docs/Detailed-Topics/Cross-Build.html#cross-building-a-project)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:29:35.343

我认为，如果您正在生成“胖 JAR”，那么一切都取决于直接依赖项的版本（如果我错了，请纠正我），因为它们的直接依赖项也被指定等等。当然，这并不能保证某些组件依赖于 Scala 库版本而不是您想要的，您不能保证组件依赖于某些库的不同版本，当然 Scala 处于积极开发阶段，但如果您坚持使用一些 Scala 库版本并经过良好测试，直到这一切发生变化，您就可以了。

但是你不能保证在下一个 Scala 库上一切都会好起来，因为你还有其他可能没有在同一天同步的组件，对吧？而且，是的，Scala 库的版本应该与使用的 Scala 编译器的版本相匹配。

# sql-server-2008 - 使用大量数据在 SQL Server 上加快查询的策略

> ID：14803363
> 
> 赞同：0
> 
> 时间：2013-02-10T22:31:02.043
> 
> 标签：sql-server-2008

我们有一个包含大量数据的 SQL Server 2008 R2 数据库。预计数据将在短时间内快速增长到数百万行。索引视图用于读取数据。

对某些视图进行查询大约需要 35-40 秒。我们将致力于微调查询，但不能保证这是唯一的选择。我认为有大量记录，执行时间是不可接受的。

现在我正在思考还有什么可以做的。

例如，有 2 个最期望使用的时间段：从当前日期回溯 1 年和过去 24 小时。

你对尝试这样做有什么看法？

创建 3 个数据库，`db_A`用于今天的记录、`db_B`昨天的负 365 和一个存档`db_C`- 超过一年的所有内容。因此，我们可能面临编写一个服务来复制到另一个数据库并从第一个数据库中删除。

然后也许可以使用链接服务器或编写一些 API 来确定要查询的数据库。当然，即使是年度期间也会包含大量记录，但这仍然更好。插入/更新`db_A`会更快，并且很有可能会遇到许多查询`db_A`。

对于这种情况，是否有一些识字的解决方案。在物理上不同的位置托管数据库将提高性能（由于并行执行）。

专业意见表示赞赏。

# python - 为python提供系统参数的正则表达式

> ID：14803367
> 
> 赞同：0
> 
> 时间：2013-02-10T22:31:23.800
> 
> 标签：python, command-line-interface, sys

本质上，我有一个 python 脚本，它将文件名列表作为系统参数：

`filelist = sys.argv[1:]`

我希望文件列表是目录中以某个前缀开头的所有文件。我认为最好的方法是使用正则表达式，但我不知道如何让它工作。

也就是说，我想要类似的东西

```
python test.py '^ex' 
```

产生一个`filelist`包含工作目录中所有以“ex”开头的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:43:47.640

您不一定需要正则表达式。一个简单的 for 循环就可以完成这项工作。例如

```
for filename in filelist:
    if ex == filename[0:len(ex)]:
        newFileList.append(filename) 
```

这还没有经过测试，可能需要进行微调。当然，正则表达式是很好的工具，但以上将是一个简单的替代方案。

# c# - 是否可以从数组中仅检索子文档的一个特定字段？

> ID：14803373
> 
> 赞同：1
> 
> 时间：2013-02-10T22:32:04.403
> 
> 标签：c#, asp.net, arrays, mongodb, projection

假设我在 MongoDB 集合上有以下文档结构：

```
{
  "Applications" : [{
      "JoinDate" : new Date("10/2/2013 18:06:30"),
      "Key" : "shtube",
      "Roles" : ["Administrator", "Moderator"]
    }],
  "Comment" : "Cool",
  "ConfirmationKey" : "981c69fe-6fff-47d6-bb82-3b5f1deeef25",
  "CreationDate" : new Date("8/2/2013 17:43:42"),
  ...
} 
```

如何使用 MongoCursor 中的**SetFields()**方法仅检索“角色”字段（针对性能问题）？此时我只知道检索子文档并访问“角色”。但我不需要整个子文档信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:02:50.093

您可以使用投影来使用点表示法（使用外壳）仅提取您想要的字段：

```
db.myCollection.find({ "Applications.Roles" : { $exists: true } },
             {  "Applications.Roles" : 1 }) 
```

在上面的示例中，它只是返回包含 Applications.Roles 结构的文档。

[您可以在此处](http://docs.mongodb.org/manual/core/read-operations/#result-projections)阅读有关预测的更多信息。

仅供参考：您不能有效地使用 LINQ 从 C# 进行投影。它在客户端本地进行投影。

另一种选择是使用 $elemMatch （但是，在这种情况下，如果您不进行特定查询，它可能不适合您的需求）。

# algorithm - 找到从特定输入计算特定输出的算法

> ID：14803375
> 
> 赞同：4
> 
> 时间：2013-02-10T22:32:16.433
> 
> 标签：algorithm, bit-manipulation

这个问题更多是在数学方面。我已经给出了十六进制的 4 字节 UID 列表和相应的 2 字节代码列表 - 我们称它们为哈希。

它看起来像这样：

```
7D04E214 --> 4A49
7D048DC3 --> A0E7
7D04DB2E --> 4191
... 
```

我有大约 50 个这样的元组，所以我想如果我找到一种算法可以为所有 UID 计算正确的哈希，我可以很确定这是正确的。

这是我的问题：我真的不知道如何开始。我不是数学家，对这类问题没有经验。我怀疑某种按位算法。看起来它可能是 CRC16，但我已经伪造了这一点。我不认为这是任何流行的算法。我也认为（或者更确切地说希望）算法不是太复杂。

我知道找到从某个输入计算某个输出的函数的一般问题是无法确定的。但是假设算法很简单，我有什么可能性？有什么工具可以帮助我吗？对于编写我自己的工具，您有什么建议可以阅读吗？我正在考虑某种蛮力，但我该如何系统地做到这一点？

提前致谢！

**更新：**由于我的问题有些不明确：我真的需要首先找到一种用于从 UID 创建散列的算法 - 或者至少一个对所有可能的 UID 行为相同的算法（即 4 -字节数）。既然有人指出有无限多的可能函数，我想我必须找到最简单的函数并针对更多的 UID 值测试它们。正如我所说，我实际上假设该算法很简单，并且没有充满晦涩的密钥。如果我错了，正如你所说，我注定要失败。但如果没有，也许我有机会试错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:22:35.260

正如其他人所评论/回答的那样，您遇到了一个不适定问题以及未知函数的鲜为人知的信息（好吧，它毕竟是未知的:)。虽然您可以尝试通过遗传编程来猜测一个函数，但您不能期望它实际上代表未知函数——而不是只有 50 个输入`->`输出。

但是，作为一个虚拟实验，我玩弄了遗传编程，它为您给出的 3 个示例找到了以下程序：

```
def guess(a, key=0xbeef): # The parameter 'a' is an input value.
    temp = (a % (-14)) << 3
    if temp == 0:
        temp = -4
    temp = ((a ^ (-2 * key)) - temp) >> 2
    res = (temp + a + (a % (-15))) % key
    return res 
```

这给出了以下结果：

```
Input      Output (guess)   Actual output    Diff
0x7d04e214 0x4a49           0x4a49           0
0x7d048dc3 0xa0e7           0xa0e7           0
0x7d04db2e 0x4191           0x4191           0 
```

因此生成的程序对于这些输入的总误差为 0 个单位，因此该函数对于给定的示例是正确的，但这没有任何意义。它需要几次运行、数千代等，才能生成一个对示例没有错误的程序。现在，这里要注意的最直接的问题是，我假设未知函数将`key`参数与输入一起使用——这可能是也可能不是。此外，我只是猜测关键可能是`0xbeef`主要是因为它是一个很好的十六进制值。这些决定的结果是程序将尝试生成一个程序来适应这些选择，这对于未知函数的作用可能是完全不正确的。这意味着您需要以某种方式使这个未知函数比现在更广为人知，以便获得任何相关结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:53:24.767

您应该尝试澄清您特别想要实现的目标。

如果您只想将 50 个 FIXED 输入值映射到其他 50 个 FIXED 输出值，正如已经建议的那样，创建某种从输入到输出值的映射表就足够了。

另一方面，如果给定大约 50 个输入值及其相应的 50 个输出值，并且希望能够正确预测任何其他输入值的相应输出值，至少从数学角度来看，您的问题是无法解决的，因为给定任何固定数量的输入对于输出值映射，仍然有无限数量的函数将迄今为止看到的所有输入值映射到迄今为止看到的完全相同的输出值，并且仍然为迄今为止未看到的任何值计算另一个结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:12:56.223

这是一个不可能完成的任务，除非您可以找到更多信息或组装所有可能输入及其输出的映射，以便您可以进行详尽的试验。

# javascript - 处理 javascript 和 Rails 之间时间的正确方法

> ID：14803388
> 
> 赞同：0
> 
> 时间：2013-02-10T22:34:15.743
> 
> 标签：javascript, ruby-on-rails, datetime, time

通过 Ajax 检索记录时，我只希望在上次请求之后更新记录，而不是所有记录。我知道查询应该如下所示：

```
Post.where("updated_at >= ?", last_requested_at) 
```

问题是，`last_requested_at`必须存储在 Javascript 变量中，并作为 HTTP 查询字符串传递。

如何在 Javascript 和 Rails 之间编码/解码时间？我需要担心时区吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:45:53.257

一个常见的解决方案是将所有时间作为 UTC 时间值发送。

Javascript 日期对象基于 UTC 时间值，该时间值是自 1970-01-01T00:00:00Z 以来的毫秒数，UNIX 时间值通常是自同一纪元以来的秒数，因此您只需根据需要将毫秒除以或乘以 1,000 将毫秒转换为秒（或者只是修剪最后三位数字或连接“000”），你就完成了。

因此，要从 UNIX 时间值创建 javascript 日期对象：

```
var date = new Date(UNIXTimevalue * 1000); 
```

并以另一种方式返回：

```
var UTCTimevalue = date.getTime() / 1000 | 0; 
```

客户端将根据系统设置处理时区偏移，因此只要它们正确，您就可以开始了。

# java - 多线程一个java rest服务

> ID：14803391
> 
> 赞同：1
> 
> 时间：2013-02-10T22:34:41.230
> 
> 标签：java, multithreading, rest

我是 java 新手，正在使用 CXF JAXRS 库构建 java rest 服务。

我希望该服务能够一次使用多个 http 请求。我如何实现这一目标？

我需要将服务托管在 Web 容器中吗？或者，即使我在没有（首选）Web 容器的情况下运行服务，我也可以实现多线程吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:06:05.660

您必须修改应用程序的体系结构以一次处理多个请求，同时保存传入的请求以供将来处理。

实施 Master-Worker 模式，这将解决您的问题。您可以按照以下步骤来实现此模式（它是一种方法而不是算法）：

1) 根据您的意愿使用 Java 5 的 Executor Framework 或 Java 7 的 Fork Join。假设我们使用的是 java 5。

2）使用共享队列临时保存数据（比如一些工作对象）以备将来使用。我使用了线程安全的 BlockingQueue。

3）创建一个主类，它将启动和停止工人的多个实例（n）。当收到新的请求时，master 会将数据放入工作对象中，并将该工作对象添加到队列中。在将工作对象添加到队列时，master 会在这个队列上调用 notifyAll 方法（唤醒所有等待的工作人员）。

4）创建一个工作线程类，它将监听这个队列（通过在其构造函数中引用共享队列）。从队列中一一获取工作对象，直到队列为空。当队列为空时，将工作人员置于等待状态。当 Master 将在此队列上调用 notifyAll 方法时，它将再次上线。

如果您需要任何其他说明，请告诉我。

Executor Framework（非 Master Worker 模式）的一个简单示例在[这里](https://stackoverflow.com/questions/13689245/use-threading-to-process-file-chunk-by-chunk/14869544#14869544)

# c - 当我从 C 中的数组中获取十六进制值时，如何保持十六进制格式？

> ID：14803392
> 
> 赞同：0
> 
> 时间：2013-02-10T22:34:45.557
> 
> 标签：c, gdb

我有一个这样的数组：

```
 unsigned char arr[] = {0x55}; 
   unsigned char byte = arr[0]; 
```

我想让 byte 成为十六进制表示，就像它在数组中一样。但是当我在 gdb 中查看它时，我不断得到那个字节是 85 'U'。发生了什么？为什么我看不到 0x55，甚至看不到二进制表示 110111？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:38:16.030

GDB 向您显示与字符代码对应的可打印字符`0x55`，因为您拥有的值是`char`. 要将其打印为十六进制，请使用：

```
(gdb) p/x byte 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T22:39:00.633

用来`p/x byte`看看。 `gdb`除非您另有说明，否则默认打印十进制。您会得到 ，`'U'`因为这也是打印`char`类型变量的默认值的一部分。

存储在变量中的值是二进制的——我认为只有你看待它的方式才会让你感到困惑。 `0x55`、`85`和`'U'`都是解释相同数据的不同方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T22:38:15.173

在 print 上使用正确的[格式标志](http://www.delorie.com/gnu/docs/gdb/gdb_55.html)：

任何我当然希望您的编译器将 0x55 变成 0x01010101 ，仅此而已。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T23:10:16.333

> 发生了什么？

什么都没发生。它不是数组中的十六进制。它在数组中是二进制的。它在源代码中是十六进制的。如果要将其格式化为十六进制，请执行此操作。没有人阻止你。

# ios - iOS 的 NSXML 解析

> ID：14803393
> 
> 赞同：0
> 
> 时间：2013-02-10T22:34:47.097
> 
> 标签：ios, xml, parsing, nsxml

我有一个具有这种结构的 xml(kml)：

```
<Document>
<Folder>
    <Folder>
        <name>A -</name>
        <Placemark>
            <name>Afghanistan</name>
            <description></description>
            <Style>
                <PolyStyle>
                    <color>aaffffff</color>
                    <colorMode>random</colorMode>
                </PolyStyle>
            </Style>
            <Polygon>
                <outerBoundaryIs>
                    <LinearRing>
                        <coordinates> 65.62729644775391,37.33319854736328,0 65.64692687988283,37.45888137817383,0</coordinates>
                    </LinearRing>
                </outerBoundaryIs>
            </Polygon>
        </Placemark>
        <Placemark>
            <name>Albania</name> 
```

我正在尝试获取每个国家/地区的名称及其坐标并将它们保存在数组中。这个给了我 elementValue 的“Placemark”和 urlValue 的“null”。

```
if ([elementName isEqualToString:@"Placemark"]){
    NSString *urlValue=[attributeDict valueForKey:@"name"];

    NSLog(@"I just found a start tag for %@ %@",elementName,urlValue);

} 
```

我应该使用任何其他代表吗？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:41:11.570

`<name>`不是 的属性`<Placemark>`，它是子元素。您需要设置一个标志或一些类似的方法，并等待解析器再次通过`parser:didStartElement:...`“名称”作为元素名称调用委托。`parser:didEndElement:...`当您进入“地标”以准备下一次迭代时，您可以再次关闭标志。

# mysql - 如果MYSQL中的值不为null，是否可以在语句中附加字符串

> ID：14803399
> 
> 赞同：1
> 
> 时间：2013-02-10T22:35:28.220
> 
> 标签：mysql

所以说我有这样的东西

```
SELECT CONCAT(fname, " " IFNULL(mname, ""), lname) FROM name 
```

如果 mname 不为空，我将如何在该语句中添加空格？我尝试过的任何方法都没有奏效，我有点迷失了。显然我可以做类似的事情

```
SELECT CONCAT(fname, " " IFNULL(mname, ""), " " lname) FROM name 
```

但这给了我两个空格而不是 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:39:59.107

`CONCAT`在中间名中使用另一个：

```
SELECT CONCAT(fname, 
              IF(mname is null, "", CONCAT(" ", mname)), 
              " " lname) 
  FROM name 
```

# php - 我想将 yii 框架文件夹移到 www 访问之外

> ID：14803400
> 
> 赞同：2
> 
> 时间：2013-02-10T22:35:33.417
> 
> 标签：php, frameworks

我即将开始在一些小型php项目中使用Yii框架（我之前习惯使用代码点火器框架）。

我想知道两件事：a）是否可以将 /framework 文件夹移到 linux（特别是 centOS）上的 web 根目录之外，例如：/var/framework_here

b）您能否指出有关此以及如何实际执行任务的资源或文章？

我已经将框架 DIR 移到 public_html 之外（在我的 web 根目录之外）并尝试修改演示项目中的路径，但它们不起作用 - 所以我想*我做错了*。

到目前为止，我只能找到有关在正常 Web 访问之外的 yii 项目中发送“受保护”目录的信息。

也许我误解了，但我认为做我想做的事会大大提高系统安全性——这实际上是我想这样做的主要原因，所以我再次接受建议/评论。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:29:07.020

您应该在每个演示项目中修改 index.php。找线

```
$yii=dirname(__FILE__).'/../../framework/yii.php'; 
```

并将其更改为类似

```
$yii='/Absolute path to framework folder/yii.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:43:21.880

You don't need to move it out. All you need to do is put a `.htaccess` file inside the folder of the framework with the following content:

```
# Access denied folder
Order Deny,Allow
Deny from all 
```

Doing so you disable the access the folder to anyone outside the server.

For more informations you can give a look here: [https://www.google.it/search?q=htaccess+tutorial](https://www.google.it/search?q=htaccess+tutorial)

# c# - 在 Windows RT 中持续保存数据的最佳实践

> ID：14803401
> 
> 赞同：1
> 
> 时间：2013-02-10T22:35:35.057
> 
> 标签：c#, windows-8, winrt-xaml

我正在开发一个允许用户输入各种数据的 Windows RT 应用程序。主要是整数和一些与字符相关的字符串。比如：名字、力量、灵巧等等。

我想看到的是每个角色都保存到自己的文件中，并且所做的任何更改都会立即保存到该角色的文件中，这样如果应用程序结束，数据就在那里。

加载时，我想用“新建”和文件夹中的字符填充屏幕。目前我专注于加载单个字符并适当地更新文件。

我的想法是在这里浏览漫游数据：http: [//msdn.microsoft.com/en-gb/library/windows/apps/hh700362.aspx](http://msdn.microsoft.com/en-gb/library/windows/apps/hh700362.aspx) 但这将涉及在加载时将容器中的每一位分别加载到变量中并每次更新两次（变量和漫游数据）。

我研究只是将它们加载为 XML 并在此[http://code.msdn.microsoft.com/windowsapps/XML-API-Scenario-Sample-42ce708b](http://code.msdn.microsoft.com/windowsapps/XML-API-Scenario-Sample-42ce708b)中保存示例 3 中的更改，尽管我没有找到一个简单的方法来使用 C# 将映射和 XML 文件转换为字符的模板。

理想情况下，将 XML 文件保存到漫游数据的东西对于多个设备来说会很好，我可以找到一种方法将 XML 文件加载到模板中以进行加载，但我不确定这是否可能。

做这样的事情的最佳方法是什么，上述想法是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:17:19.253

根据数据量，您可以只使用[Application 或 Roaming Settings](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx#app_settings)。两者都对数据大小和类型有限制，但如果只是几个字符串和整数，可能就足够了。您可以为每个字符创建[应用程序数据容器并](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdatacontainer.aspx)[以原子方式编写所有属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdatacompositevalue.aspx)。

或者，使用本地/漫游文件，但请注意漫游数据也有配额，因此您可能需要确定应用程序可能发送的数据量。还要注意，漫游数据有延迟并且可能永远不会同步（例如，如果超出配额）。如果您确实需要它用于多个设备并且有大量数据或者您需要更可靠地同步它，那么下一步将是云（您可以使用[Windows Azure 移动服务](http://www.windowsazure.com/en-us/home/scenarios/mobile-services/)或 Azure 中的其他存储）。

不知道您的应用程序的细节或需求的优先级，我可能会从[Local](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx#Local_application_data)或[Roaming Application Data](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx#roaming_app_data)开始，我非常喜欢[JSON.NET](http://json.codeplex.com/)序列化的易用性，它很容易添加到您的解决方案中通过 NuGet。如果您使用本地文件并仅构建一点抽象层，那么如果您的应用程序的大小或使用量增加，以后将这些文件移动到云中并不难。

# sql - SQL LEFT JOIN 在多个列上为 NULL

> ID：14803402
> 
> 赞同：2
> 
> 时间：2013-02-10T22:35:41.147
> 
> 标签：sql, ms-access-2007, left-join

我正在使用 Microsoft Access 2007，发现此 SQL 没有**EXCEPT**运算符。我了解到我可以使用**LEFT JOIN**和**IS NULL**来执行此操作。我几乎拥有它，但不能完全把我的拇指放在它上面。

我有两个表，表 A 有 personID、foodID 和 timePURCHASED 的数据。有身份证的人在特定时间购买身份证的食物。表 B 是其中的一个子集。（它从表 A 中选择了行。）

我的目标是做：表 A 除了表 B。

表 A

`personID``foodID``timePURCHASED             `
`1            ``1         ``2/6/2012 1:00:00 PM       `
`1            ``4         ``2/6/2012 6:00:00 PM       `
`2            ``3         ``2/7/2012 8:00:00 PM       `
`3            ``1         ``2/6/2012 9:00:00 PM       `
`3            ``3         ``2/6/2012 4:00:00 PM       `

表 B

`personID``foodID``timePURCHASED             `
`1            ``1         ``2/6/2012 1:00:00 PM       `
`3            ``3         ``2/6/2012 4:00:00 PM       `

目标

`personID``foodID``timePURCHASED             `
`1            ``4         ``2/6/2012 6:00:00 PM       `
`2            ``3         ``2/7/2012 8:00:00 PM       `
`3            ``1         ``2/6/2012 9:00:00 PM       `

这是我开始的代码：

```
SELECT A.personID, A.foodID, A.timePURCHASED  
FROM A  
LEFT JOIN B ON (A.personID = B.personID)   
WHERE ((B.personID) Is Null); 
```

我知道这将导致我的 GOAL 表没有任何匹配的 personID (1, 3) 并留下不匹配的 personID (2)。我知道我需要同时考虑所有三列，发现我可以在**LEFT JOIN中使用****AND**运算符：

 **```
SELECT A.personID, A.foodID, A.timePURCHASED  
FROM A  
LEFT JOIN B ON (A.personID = B.personID)  
AND (A.foodID = B.foodID)  
AND (A.timePURCHASED = B.timePURCHASED)  
WHERE (((B.personID) Is Null)  
AND ((B.foodID) Is Null)  
AND ((B.timePURCHASED) Is Null)); 
```

到目前为止，这还没有奏效，我正在寻找一些建议。对于格式，TLDR，或者如果这更容易回答，我深表歉意。我是新手，正在学习 SQL。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:54:47.717

您的第二个查询通常看起来不错。但是，您不需要所有 3`IS NULL`项检查，因为您的输入集中没有任何空值。你也可以去掉所有这些括号。

```
SELECT A.personID, A.foodID, A.timePurchased 
  FROM A 
  LEFT JOIN B 
  ON A.personID = B.personID
    AND A.foodID = B.foodID
    AND A.timePurchased = B.timePurchased
  WHERE B.personID is null; 
```

这在我根据您的规范设置的全新数据库上完美运行（意味着它准确输出您指定的“目标”关系），但您的第二个查询也是如此。

所以似乎设置有问题，而不是 SQL 本身。`CREATE TABLE`对于这两个表，您的陈述是什么样的？具体来说，您要比较的数据类型是什么？引擎盖下的`timePURCHASED`列是字符串吗？如果是这样，它们中是否有空格？一张桌子有字符串，另一张有`DATETIME`s 吗？在 Terje D. 看来，您看到的结果究竟是*什么？***

# javascript - Javascript for循环放置一个指针而不是一个变量的副本用于链接分配

> ID：14803410
> 
> 赞同：0
> 
> 时间：2013-02-10T22:36:27.217
> 
> 标签：javascript, pointers

这有多烦人？[http://jsfiddle.net/b3xyx/](http://jsfiddle.net/b3xyx/)

*   我正在使用 addEventListener 为我的每个链接分配一个 javascript 函数。
*   循环遍历每个链接，分配一个递增的变量 x
*   但实际上，当您单击链接时 - 不是提醒 x 的值，而是提醒 x 的*最终*值；即它刚刚分配了一个指向 x 的指针，而不是复制它。
*   在此处查看实际情况：http: [//jsfiddle.net/b3xyx/](http://jsfiddle.net/b3xyx/)单击任何链接都会提醒“4”。Grr。

    ```
     function goToSite(where){
            alert("This would take you to " + where + ".com")
        }

        for(var x=1; x<=3; x++){
            document.getElementById('link'+x).addEventListener('click', function(){goToSite(x)})
        } 
    ```

我该如何解决这个问题？在这种情况下，有没有办法创建变量的真实副本？

* * *

编辑：感谢您建议[重复](https://stackoverflow.com/questions/4091765/assign-click-handlers-in-for-loop)，但它似乎不是重复的。

[http://jsfiddle.net/aERRE/](http://jsfiddle.net/aERRE/)

^ 我的更新代码：

```
function goToSite(whichOne){
    return function(){
        alert("This would take you to " + whichOne + ".com");
    }
} 
```

还是不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:43:03.423

in javascript, the for(var x...) transforms,the var x is moved to the begin of the function. and therefor the x in the goToSite refers to the global x you increased in each iteration, read about closures to understand why it happens...

# ios - IOS 模型视图控制器通信，用于从弹出窗口中的滑块进行实时更新

> ID：14803419
> 
> 赞同：0
> 
> 时间：2013-02-10T22:37:20.707
> 
> 标签：ios, model-view-controller, uiviewcontroller, delegates, uislider

我有一个 iPad 应用程序，它由一个主视图和关联的视图控制器组成，它可以绘制一些精美的图形。绘制的东西由许多参数（主要是浮点数）控制，目前我存储在主视图控制器类中。主视图询问drawRect内部的参数。

我想从弹出菜单内的滑块实时更新主视图。然而，弹出框包含一个 UINavigationController，其中包含一个 UITableViewController，其中包含自定义 UITableViewCells，其中包含滑块，因此将正确的控件与正确的数据变量相关联的消息返回是一种痛苦。此外，消息必须双向发送，因为我必须在滑块首次出现时使用数据初始化滑块位置。

因此，我的主要问题是将滑块更改信息发送回主视图控制器并让它实时更新主视图的优雅方式是什么。我意识到我应该使用委托，但由于我可能有 30 个参数，我最终可能会编写很多选择器，而且我不确定我应该如何通过视图控制器堆栈向上传播有关主委托目标的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:48:04.217

在不了解您的整体结构的情况下很难说，但我可能会使用 NSNotification 来执行此操作。您可以通过通知从任何地方到达任何地方，并且可以在 userInfo 中传递一个 NSDictionary，它可以包含任意数量的浮点数（转换为 NSNumbers）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:49:48.563

我不会用 NSNotifications 来做这件事。

相反，我会简单地为层次结构中的每个控制器创建自定义视图控制器，直到最终的 UITableViewController，每个控制器都引用主视图控制器。就像他们可以直接获取和设置属性一样。

但是请注意，我不会将对主控制器的引用传递给 UITableViewCells 本身，而是处理表格视图中属性的任何设置和获取，但这可能是风格问题。

# html - 溢出-x html 问题

> ID：14803422
> 
> 赞同：0
> 
> 时间：2013-02-10T22:37:26.617
> 
> 标签：html, css, iframe

我在我的网站上使用的 iframe 有一个小问题。由于某种原因，我无法让 iframe 在底部不显示水平滚动条。

这是我的代码：

```
<center>
   <iframe height="1330" width="100%" src="http://SentinelGaming.spreadshirt.com/" name="Spreadshop" itemscope itemtype="http://www.sentinelgaming.net/store" id="spreadshop" frameborder="0" scrollbar="no" ></iframe>
</center>

<style>
#spreadshop {
overflow-x: hidden;
}
</style> 
```

这是您可以查看的页面以了解我在说什么：[http ://www.sentinelgaming.net/store](http://www.sentinelgaming.net/store)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:40:20.873

简而言之，它认为不可能隐藏 iframe 的溢出。我认为主要原因是安全性。这个想法是您不应该隐藏已加载源的某些部分以使其不被显示。

我做了一个[小例子](http://jsfiddle.net/Dujzq/)来展示溢出属性是如何被忽略的。

```
<iframe src="http://cnn.com"></iframe">

iframe {
    width: 100px;
    height: 100px;
    overflow: hidden;
} 
```

上面的示例将向 iframe 添加垂直和水平滚动条，即使我们明确告诉它不要这样做。

**可能的解决方法：**

一种可能的解决方法是通过 AJAX 加载内容，将内容添加到 div，并在该 div 上设置溢出属性。

*它需要用户启用 JavaScript，但我相信这是您最接近解决方案的方法。*

# go - 正确地将标准输入上的数据传递给命令，并在 golang 中从该命令的标准输出接收数据

> ID：14803425
> 
> 赞同：12
> 
> 时间：2013-02-10T22:37:56.480
> 
> 标签：go

我有以下程序：

```
package main

import "bytes"
import "io"
import "log"
import "os"
import "os/exec"
import "time"

func main() {
    runCatFromStdinWorks(populateStdin("aaa\n"))
    runCatFromStdinWorks(populateStdin("bbb\n"))
}

func populateStdin(str string) func(io.WriteCloser) {
    return func(stdin io.WriteCloser) {
        defer stdin.Close()
        io.Copy(stdin, bytes.NewBufferString(str))
    }
}

func runCatFromStdinWorks(populate_stdin_func func(io.WriteCloser)) {
    cmd := exec.Command("cat")
    stdin, err := cmd.StdinPipe()
    if err != nil {
        log.Panic(err)
    }
    stdout, err := cmd.StdoutPipe()
    if err != nil {
        log.Panic(err)
    }
    err = cmd.Start()
    if err != nil {
        log.Panic(err)
    }
    go populate_stdin_func(stdin)
    go func() {
            // Removing the following lines allow some output
            // to be fetched from cat's stdout sometimes
            time.Sleep(5 * time.Second)
            io.Copy(os.Stdout, stdout)
    }()
    err = cmd.Wait()
    if err != nil {
        log.Panic(err)
    }
} 
```

在循环中运行时，我没有得到任何结果，如下所示：

```
$ while true; do go run cat_thingy.go; echo ; done

^C 
```

这个结果是在 Ubuntu 12.04 上从 apt 在虚拟机（go 版本 go1）上安装 golang-go 之后出现的。我无法在 Macbook Air（go 版本 go1.0.3）上的 go 安装上进行复制。这似乎是某种竞赛条件。事实上，如果我设置了一个 sleep(1*time.Second)，我永远不会在我的代码中以随机睡眠为代价看到问题。

我在代码中做错了什么，还是这是一个错误？如果是错误，是否已修复？

**更新：可能的线索**

我发现 Command.Wait 将关闭与 cat 子进程通信的管道，即使它们仍有未读数据。我不太确定处理该问题的正确方法。我想我可以创建一个通道来通知何时完成对标准输入的写入，但我仍然需要知道 cat 进程是否已经结束，以确保不会将任何其他内容写入其标准输出管道。我知道我可以使用 cmd.Process.Wait 来确定进程何时结束，但是然后调用 cmd.Wait 是否安全？

**更新：越来越近**

这是代码的新剪辑。我相信这对于写入标准输入和从标准输出读取是有效的。我认为如果我从标准输出处理 goroutine 中替换 io.Copy 而没有流的东西，我可以让它正确地流式传输数据（而不是缓冲所有数据）。

```
package main

import "bytes"
import "fmt"
import "io"
import "log"
import "os/exec"
import "runtime"

const inputBufferBlockLength = 3*64*(2<<10) // enough to be bigger than 2x the pipe buffer of 64KiB
const numInputBlocks = 6

func main() {
    runtime.GOMAXPROCS(5)
    runCatFromStdin(populateStdin(numInputBlocks))
}

func populateStdin(numInputBlocks int) func(io.WriteCloser, chan bool) {
    return func(stdin io.WriteCloser) {
        defer stdin.Close()
        repeatedByteBases := []string{"a", "b", "c", "d", "e", "f"}
        for i := 0; i < numInputBlocks; i++ {
          repeatedBytes := bytes.NewBufferString(repeatedByteBases[i]).Bytes()
          fmt.Printf("%s\n", repeatedBytes)
          io.Copy(stdin, bytes.NewReader(bytes.Repeat(repeatedBytes, inputBufferBlockLength)))
        }
    }
}

func runCatFromStdin(populate_stdin_func func(io.WriteCloser)) {
    cmd := exec.Command("cat")
    stdin, err := cmd.StdinPipe()
    if err != nil {
        log.Panic(err)
    }
    stdout, err := cmd.StdoutPipe()
    if err != nil {
        log.Panic(err)
    }
    err = cmd.Start()
    if err != nil {
        log.Panic(err)
    }
    go populate_stdin_func(stdin)
    output_done_channel := make(chan bool)
    go func() {
        out_bytes := new(bytes.Buffer)
        io.Copy(out_bytes, stdout)
        fmt.Printf("%s\n", out_bytes)
        fmt.Println(out_bytes.Len())
        fmt.Println(inputBufferBlockLength*numInputBlocks)
        output_done_channel <- true
    }()
    <-output_done_channel
    err = cmd.Wait()
    if err != nil {
        log.Panic(err)
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:41:57.560

这是您的第一个代码的有效版本。请注意添加了 sync.WaitGroup 以确保在关闭命令之前完成发送和接收 go 例程。

```
package main

import (
    "bytes"
    "io"
    "log"
    "os"
    "os/exec"
    "sync"
    "time"
)

func main() {
    runCatFromStdinWorks(populateStdin("aaa\n"))
    runCatFromStdinWorks(populateStdin("bbb\n"))
}

func populateStdin(str string) func(io.WriteCloser) {
    return func(stdin io.WriteCloser) {
        defer stdin.Close()
        io.Copy(stdin, bytes.NewBufferString(str))
    }
}

func runCatFromStdinWorks(populate_stdin_func func(io.WriteCloser)) {
    cmd := exec.Command("cat")
    stdin, err := cmd.StdinPipe()
    if err != nil {
        log.Panic(err)
    }
    stdout, err := cmd.StdoutPipe()
    if err != nil {
        log.Panic(err)
    }
    err = cmd.Start()
    if err != nil {
        log.Panic(err)
    }
    var wg sync.WaitGroup
    wg.Add(2)
    go func() {
        defer wg.Done()
        populate_stdin_func(stdin)
    }()
    go func() {
        defer wg.Done()
        time.Sleep(5 * time.Second)
        io.Copy(os.Stdout, stdout)
    }()
    wg.Wait()
    err = cmd.Wait()
    if err != nil {
        log.Panic(err)
    }
} 
```

（这只是表达@peterSO 所说的另一种方式;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:49:40.573

> [Go statements](http://golang.org/ref/spec#Go_statements)
> 
> A "go" statement starts the execution of a function or method call as an independent concurrent thread of control, or goroutine, within the same address space.
> 
> GoStmt = "go" Expression .
> 
> The expression must be a call. The function value and parameters are evaluated as usual in the calling goroutine, but unlike with a regular call, program execution does not wait for the invoked function to complete. Instead, the function begins executing independently in a new goroutine. When the function terminates, its goroutine also terminates. If the function has any return values, they are discarded when the function completes.

Convert the gratuitous goroutines to function calls.

```
package main

import (
    "bytes"
    "io"
    "log"
    "os"
    "os/exec"
)

func main() {
    runCatFromStdinWorks(populateStdin("aaa\n"))
    runCatFromStdinWorks(populateStdin("bbb\n"))
}

func populateStdin(str string) func(io.WriteCloser) {
    return func(stdin io.WriteCloser) {
        defer stdin.Close()
        io.Copy(stdin, bytes.NewBufferString(str))
    }
}

func runCatFromStdinWorks(populate_stdin_func func(io.WriteCloser)) {
    cmd := exec.Command("cat")
    stdin, err := cmd.StdinPipe()
    if err != nil {
        log.Panic(err)
    }
    stdout, err := cmd.StdoutPipe()
    if err != nil {
        log.Panic(err)
    }
    err = cmd.Start()
    if err != nil {
        log.Panic(err)
    }
    populate_stdin_func(stdin)
    io.Copy(os.Stdout, stdout)
    err = cmd.Wait()
    if err != nil {
        log.Panic(err)
    }
} 
```

# winapi - 如何异步读取 WPD MTP 数据流？

> ID：14803426
> 
> 赞同：0
> 
> 时间：2013-02-10T22:37:56.453
> 
> 标签：winapi, com, wpd, moniker

我的示例应用程序从一个函数中获取一个`COM IStream`实例。`IPortableDeviceResources::GetStream()`我想使用这个 IStream 对象异步读取设备对象的内容。如何使用异步名字对象来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:50:42.663

IStream 在设计上是同步的。我首先会问你的场景是什么需要它是异步的。

例如，如果需要异步数据流的原因是为了不阻塞 UI 线程，则可以在工作线程中执行 IStream 操作。

如果原因是您可以发出多个并行读取，MTP 1.0 设备不支持这一点，因为在驱动程序级别，请求仍将在单个全局 MTP 会话中按顺序处理。MTP 2.0 支持多会话，允许多个并行连接到同一设备，但到目前为止，没有多少设备采用这种方式。市场上的大多数（如果不是全部）MTP 设备都是 MTP 1.0。

# android - Android：在非标准 UI 中创建按钮的最佳方法？即：是或否具有自定义背景和选项的屏幕

> ID：14803432
> 
> 赞同：1
> 
> 时间：2013-02-10T22:38:18.033
> 
> 标签：android, button

我一直在想这个问题。创建自定义按钮的最佳方法是什么？目前我有一个图像，它包含一个带有是和否的背景。我应该让我的艺术家用“是”和“否”分开来创建图像，还是有办法在这个背景上创建按钮？也许让按钮透明？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:47:47.870

使用带有自定义背景可绘制对象和所需文本样式的[Button类。](http://developer.android.com/reference/android/widget/Button.html)背景可绘制对象应该是一个[状态列表选择器](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)。这将允许您为每个状态定义一个单独的[9-patch](http://developer.android.com/guide/topics/resources/drawable-resource.html#NinePatch) - 按下、启用、禁用、聚焦等。文本本身将由系统在按钮顶部绘制，允许您使用本地化的字符串资源来支持多个语言。

# linux - 在 Linux 串口上接收/读取 BREAK 条件

> ID：14803434
> 
> 赞同：5
> 
> 时间：2013-02-10T22:38:36.607
> 
> 标签：linux, serial-port

我希望能够在 Linux 的串行端口上检测到 BREAK 条件。这是怎么做到的？

我想检测 BREAK 条件何时开始*以及*何时停止。

我希望如果我这样做：

```
int serial_status;
ioctl(serial_fd, TIOCMGET, &serial_status); 
```

然后会有一个显示 BREAK 条件的位值 - 但似乎没有这样的事情。

我找到[`tcsendbreak()`](http://linux.die.net/man/3/tcsendbreak)了`termios.h`发送*休息*时间。我还找到了描述如何发送中断的[`tty_ioctl`手册页。](http://linux.die.net/man/4/tty_ioctl)但是休息一下呢？

**注意：** `BRKINT`已建议（`SIGINT`在发生中断时生成信号）。但是获取 a`SIGINT`并不是一个有用的 API，原因如下：

*   在多串口场景中，我无法分辨它来自哪个串口。
*   `SIGINT`在终端上运行程序时，我也可以从按 Ctrl-C 的用户那里获得。
*   如果我将我的程序作为守护进程运行，那么“如果终端是前台进程组的控制终端”的附带条件就不会是真的，不是吗？
*   无法知道 BREAK 条件持续多长时间以及何时停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T02:09:05.440

到目前为止，我能找到的最佳答案来自结构中的手册[`tcsendbreak()`页](http://linux.die.net/man/3/tcsendbreak)描述`IGNBRK`和`BRKINT`常量。它说：`c_iflag``termios`

> 当既不设置`IGNBRK`也不`BRKINT`设置时，BREAK 读取为空字节 ( `'\0'`)，但`PARMRK`设置时除外，在这种情况下，它读取为序列`\377 \0 \0`。

（即`0xFF 0x00 0x00`）

所以我想我可能应该设置`PARMRK`并准备对读取的字节进行一些处理。这提供了关于奇偶校验/成帧错误的明确信息（尽管它是否`0xFF 0x00 0x00`代表 BREAK 或其他一些奇偶校验/成帧错误仍然不是完全明确的）。

但是请注意，我发现[了这个补丁`PARMRK`](http://lkml.indiana.edu/hypermail/linux/kernel/1207.3/02184.html)，这似乎暗示旧内核中存在串行字节在`PARMRK`使用时可能被丢弃的危险。

也不清楚这些字节是在 BREAK 条件持续时连续发送，还是在 BREAK 条件开始时只发送一次。所以不清楚是否可以通过这种方法检测到 BREAK 条件的*结束。*

# php - Yii 关系查询如何提供按类别细分的聚合？

> ID：14803437
> 
> 赞同：2
> 
> 时间：2013-02-10T22:38:56.500
> 
> 标签：php, sql, activerecord, yii, aggregate-functions

我有一个`Person`可以接收多种类型的`Income`. 我希望能够返回所赚取的`SUM`收入，按每个`Income Type`.

```
+---------------+-----------------+
| INCOME TYPE   | SUM AMOUNT      |
+---------------+-----------------+
| Salary        | $934.33         |
| Gambling      |  $27.99         |
| Tips          | $584.00         |
+---------------+-----------------+ 
```

我已经能够获得一个`self::STAT`关系查询来提供收到的总收入（1546.32 美元），但没有按`Income Type`.

结果，我试图将其作为模型中的`self::HAS_MANY`关系查询来执行`Person`，如下所示：

```
 public function relations() {
     return array(
        'incomes_total' => array(
           self::HAS_MANY,
           'Income',
           'person_id',
           'select' => array('income_type_id', 'SUM(amount) AS total'),
           'group' => "income_type_id"
     ));
  } 
```

这将导致生成以下 SQL：

```
SELECT
  "incomes_total"."income_type_id" AS "t1_c5"
, SUM(amount) AS total
, "incomes_total"."id" AS "t1_c0"
FROM "stwd_income" "incomes_total"
WHERE ("incomes_total"."person_id"=:ypl0)
GROUP BY income_type_id 
```

这非常接近所需的查询。

我无法弄清楚为什么在`, "incomes_total"."id" AS "t1_c0"`其中添加了该行。我不想要那个。它导致`CDbException`错误：

```
CDbCommand failed to execute the SQL statement: 
SQLSTATE[42803]: Grouping error: 7 ERROR: column "incomes_total.id" must 
appear in the GROUP BY clause or be used in an aggregate function. 
```

如何实现我需要的查询类型？

**更新 1：** Active Record 和自定义 SQL 查询之间的区别开始变得清晰，并且 Active Record 可能不适合这样的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:15:13.573

就我个人而言，除了非常基本的查询和 CRUD 之外，我不会将 ActiveRecord 用于其他任何事情。即使存在 STAT 关系，它们也更适合用于简单的计数或求和。HAS_MANY 关系在任何方面都是错误的，因为您不期望有一系列模型，是吗？您只需要一个简单的 id 和总和数组，因此在您的情况下，我只需在 Person 模型中创建一个方法，如下所示

```
private $_salaryInfo;

public function getSalaryInfo()
{
    //cache the value if possible to save unnecessary queries
    if(isset($this->_salaryInfo))
        return $this->_salaryInfo;

    //query database
    $command = Yii::app()->db->createCommand();
    $command->select('income_type_id, SUM(amount)')->where('person_id = '.$this->id)->groupBy('income_type_id');
    return $this->_salaryInfo = $command->queryAll();
} 
```

你现在应该可以做

```
foreach($person->salaryInfo as $type_id => $sum) 
```

# javascript - rails-api 应用程序中的会话或 HTTP 令牌身份验证？

> ID：14803441
> 
> 赞同：1
> 
> 时间：2013-02-10T22:39:23.700
> 
> 标签：javascript, ruby-on-rails, session, rails-api, http-token-authentication

我试图找出对 rails-api 应用程序进行身份验证的最佳方法，尽管我看到会话可能只是一种更好且更受支持的方法。

在这个问题上有什么传统的智慧吗？HTTP 令牌是否比让会话机制启动并自动获取我打算用令牌重新制作服务器端的所有功能有优势？

# javascript - 克隆带有内容的 div 不起作用

> ID：14803442
> 
> 赞同：-2
> 
> 时间：2013-02-10T22:39:39.247
> 
> 标签：javascript, jquery

我有另一个 div，它可以与这个 js 代码一起工作，但不知何故，它不能。谁能告诉我为什么它不起作用？

```
$(function () {
    var $scntDiv = $('#parts');
    var i = $('#parts input').size()-1;

    $('#addField').on('click', function () {
        var part = '<div id="parts' + i + '"><span>Part</span> <input type="text" id="auto_part' + i + '" name="auto_part' + i + '" /><br/>' +
            '<span>Description</span> <textarea type="text" id="auto_description' + i + '" name="auto_description' + i + '"></textarea> <br />' +
            '<a href="#" class="removefield">Remove</a></div>';
        $scntDiv.after(part);
        $("#row_count").val(i);
        i++;
        return false;
    });

    $(document).on("click", ".removefield", function () {
        if (i > 2) {
            $("#row_count").val(i-2);
            $(this).parent('div').remove();
            i--;
        }
        return false;
    });
});

$(function () {
    var $scntDiv = $('.brands');
    var i = $('.brands select').size()-1;

    $('#addBrand').on('click', function () {
        var brand = "<div class='brands'><span>Brands</span><br />"+
            '<select>'+
                '<option>Audi</option>'+
                '<option>BMW</option>'+
                '<option>Mercedes</option>'+
            '</select>'+
        '</div>';
        $scntDiv.after(brand);
        $("#countBrand").val(i);
        i++;
        return false;
    });

    $(document).on("click", ".removeBrand", function () {
        if (i > 2) {
            $("#countBrand").val(i-2);
            $(this).parent('div').remove();
            i--;
        }
        return false;
    });
}); 
```

第一个函数对我有用，但最后一个函数不行。

现场演示：http: [//jsfiddle.net/rEUPx/](http://jsfiddle.net/rEUPx/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-10T22:59:12.753

两件事，你必须将你的 jQuery 添加到页面中，并将 js 字符串的内部双引号替换为单引号，并使外部引号变为双引号。

[http://jsfiddle.net/rEUPx/4/](http://jsfiddle.net/rEUPx/4/)

`var a = '<a href="#">CLICK</a>'; // will result in an error`

`var a = "<a href='#'>CLICK</a>"; // is correct`

# c++ - 按数据成员对对象的向量进行排序

> ID：14803445
> 
> 赞同：0
> 
> 时间：2013-02-10T22:40:00.767
> 
> 标签：c++, sorting, vector

是的，我知道这是一个重复的问题，我已经知道我正在寻找的 anwser 在这里：

[按对象的属性对对象向量进行排序](https://stackoverflow.com/questions/5174115/sorting-a-vector-of-objects-by-a-property-of-the-object)

但是，我在将其转换为我自己的代码时遇到了问题。我正在查看上述问题中的这段代码片段：

```
struct SortByX
{
    bool operator() const(MyClass const& L, MyClass const& R) {
        return L.x < R.x;
    }
};

std::sort(vec.begin(), vec.end(), SortByX(); 
```

我不明白的是`MyClass const & L`, 和 代表什么`MyClass const & R`。而且我没有掌握如何将其应用于我的代码。

为了提供更多细节，我将 3 个排序方法放入具有 ( `string`, `double`, `double`, `double`, `bool`) 参数的对象向量的包装类中。总体目标是`vector`按`string`、`bool`和 3 个双打中的任何一个来排序。

这是我拥有的最新版本：

```
void StationVector::sortByGrade(int kindOfGas) {
struct SortByGrade {
    int kindOfGas;

    SortByGrade(int kindOfGas) :
            kindOfGas(kindOfGas) {
    }

    bool operator()(GasStation const &L, GasStation const & R) const {
        return L.getPrice(kindOfGas) < R.getPrice(kindOfGas);
    }
};

std::sort(localStations.begin(), localStations.end(),
        SortByGrade(kindOfGas));
} 
```

该行`SortByGrade(kindOfGas))`给了我以下错误：

调用 `sort(__gnu_cxx::__normal_iterator >>, __gnu_cxx::__normal_iterator >>, model::StationVector::sortByGrade(int)::SortByGrade)' 没有匹配函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:45:00.920

`SortByX`是一个二元谓词函子。二进制谓词意味着它接受两个参数并返回一个布尔值。Functor 意味着它的实例是可调用的。例如：

```
MyClass a = ....;
MyClass b = ....;
SortByX comp;
bool flag = comp(a,b); // call this SortByX instance with two MyClass instances 
```

现在，`std::sort`将在内部使用您传递它的实例的副本，`SortByX`以便执行对该`std::vector<MyClass>`向量进行排序所需的元素之间的比较。

```
std::vector<MyClass> v;
// fill the vector with MyClass objects
std::sort(v.begin(), v.end(), SortByX()); // sort the vector using a SortByX instance for comparisons 
```

注意：为此，二元谓词必须实现[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:47:53.053

> 我不明白的是 MyClass const & L 和 MyClass const & R 代表什么。

`L`和，在这种情况下，是正在比较的容器中`R`的两个项目（您的类的实例），在小于运算符的左侧和右侧。它们通过 const-reference 传入。`MyClass``L``R`

> 而且我没有掌握如何将其应用于我的代码。

在您自己的`bool operator() const(MyClass const& L, MyClass const& R)`问题中，您需要比较您在问题中提到的三个数据成员，重要的是要记住应用[**严格的弱排序**](https://stackoverflow.com/questions/979759/operator-and-strict-weak-ordering)。`true`如果`L`是“小于”则返回`R`，`false`否则返回。

* * *

随着问题的更新......

看起来您希望将变量传递给您的[***functor***](https://stackoverflow.com/questions/356950/c-functors-and-their-uses)。您可以通过创建一个构造函数来做到这一点，例如这个[SSCCE](http://sscce.org/)（[在此处编译](http://ideone.com/JhNLFx#)）：

```
#include <algorithm>
#include <vector>

namespace model {

struct GasStation
{
    double getprice(int kindOfGas) const
    {
        return kindOfGas;
    }
};

struct StationVector
{
    std::vector<GasStation> localStations;

    struct SortByGrade
    {
        int kindOfGas_;
        SortByGrade(int kindOfGas)
            :kindOfGas_(kindOfGas)
        {
        }

        bool operator() (GasStation const &L, GasStation const & R) const
        { 
            // You'll need other comparisons here, but this is a good start...
            return L.getprice(kindOfGas_) < R.getprice(kindOfGas_); 
        }
    };

    void sortByGrade(int kindOfGas) 
    {
        std::sort(localStations.begin(), localStations.end(), SortByGrade(kindOfGas));
    }
};

}

int main()
{
    model::StationVector sv;
    sv.sortByGrade(0);
} 
```

注意：`const`限定符出现在参数列表之后，而不是方法名称之后。

另外，请不要将整个方法放在一行中，这会使阅读变得非常困难。

# javascript - 如何制作具有完整尺寸的阅读更多内容的帖子缩略图？

> ID：14803451
> 
> 赞同：1
> 
> 时间：2013-02-10T22:40:28.980
> 
> 标签：javascript

**如何制作具有完整尺寸的阅读更多内容的帖子缩略图？这是我与博客一起使用的博客中阅读更多内容的代码，一切都很好，但帖子缩略图的大小被重新调整为 300 * 300，我希望它是全尺寸，也是水平居中的，也是帖子的摘要在帖子缩略图下不在它旁边**

```
<script type='text/javascript'>
summary_noimg = 460;
summary_img = 460;
img_thumb_height = 300;
img_thumb_width = 300;
</script>
<script type='text/javascript'>
//<![CDATA[

function removeHtmlTag(strx,chop){ 
    if(strx.indexOf("<")!=-1)
    {
        var s = strx.split("<"); 
        for(var i=0;i<s.length;i++){ 
            if(s[i].indexOf(">")!=-1){ 
                s[i] = s[i].substring(s[i].indexOf(">")+1,s[i].length); 
            } 
        } 
        strx =  s.join(""); 
    }
    chop = (chop < strx.length-1) ? chop : strx.length-2; 
    while(strx.charAt(chop-1)!=' ' && strx.indexOf(' ',chop)!=-1) chop++; 
    strx = strx.substring(0,chop-1); 
    return strx+'...'; 
}

function createSummaryAndThumb(pID){
    var div = document.getElementById(pID);
    var imgtag = "";
    var img = div.getElementsByTagName("img");
    var summ = summary_noimg;
    if(img.length>=1) { 
        imgtag = '<span style="float:left; margin:0px 10px -46px 0px;"><img src="'+img[0].src+'" width="'+img_thumb_width+'px" height="'+img_thumb_height+'px"/></span>';
        summ = summary_img;
    }

    var summary = imgtag + '<div>' + removeHtmlTag(div.innerHTML,summ) + '</div>';
    div.innerHTML = summary;
}

//]]>
</script> 
```

我试图改变这一点

```
summary_noimg = 460;
summary_img = 460;
img_thumb_height = 300;
img_thumb_width = 300; 
```

是

```
summary_noimg = 460;
summary_img = 460;
img_thumb_height = 100%;
img_thumb_width = 100%; 
```

**但它不工作所以我该怎么办？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T15:49:18.113

尝试使用：

`summary_noimg = 460; summary_img = 460; img_thumb_height = "100%"; img_thumb_width = "100%";`

# asp.net - 允许用户上传代码片段 - ASP.NET Web Pages (razor)

> ID：14803453
> 
> 赞同：0
> 
> 时间：2013-02-10T22:40:37.120
> 
> 标签：asp.net, razor

我正在我的网站中实现代码片段上传功能。我已经用[CodeMirror](http://codemirror.net/)替换了 textarea 。我计划让用户上传任何代码，包括 asp.net、javascript、html、css 等。我知道这可能是一个非常大的安全漏洞。

当我使用文本区域内的任何代码提交表单时，它给了我这个异常：

```
HttpRequestValidationException was unhandled by user code.
A potentially dangerous Request.Form value was detected from the client. 
```

我曾经`Html.Encode(Request.Form("mytextareaname"));`对片段进行编码，但错误仍然存​​在。

基本上我想让用户上传他们的代码，但网站不应该尝试执行它。也许注释掉？

我怎样才能做到这一点？

# jquery - 将 jQuery 菜单链接到 jQuery 选项卡

> ID：14803457
> 
> 赞同：0
> 
> 时间：2013-02-10T22:41:06.210
> 
> 标签：jquery, html

是否可以将 jQuery 菜单链接到选项卡？

例如，如果用户在下面的菜单中选择“按过滤器”，我希望它打开“按过滤器搜索”选项卡。我怎样才能做到这一点？

**JS**

```
$("#menu").menu();
$("#search").tabs(); 
```

**HTML**

```
<ul id="menu" style="border: 0px; background:none">
<li><a id="2" style="cursor: pointer">Search</a>
<ul style="z-index: 2">
<li><a id="2a" style="cursor: pointer">By Filter</a></li>
<li><a id="2b" style="cursor: pointer">By Room</a>    
</li>
</ul>
</li>
</ul>

<div id="search" style="z-index: 1;">
  <ul>
    <li><a href="#search-1">Search By Filters</a></li>
    <li><a href="#search-2">Search By Room</a></li>
  </ul>
  <div id="search-1">
  </div>
  <div id="search-2">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:14:03.543

是的，您可以这样做：
为每个搜索选项添加 ID

在菜单中创建一个 ID 2 的侦听器，然后单击，调用

```
$('#tabid').click(); 
```

这是完整的代码：

剧本：

```
$('#2a').click(function(){
    $('#sbf a').click(); 
}); 

$('#2b').click(function(){
    $('#sbr a').click(); 
}); 
```

HTML 代码：

```
<ul id="menu" style="border: 0px; background:none; width:50%; ">

<li><a id="2" style="cursor: pointer">Search</a>
<ul style="z-index: 2">
<li><a id="2a" style="cursor: pointer">By Filter</a></li>
<li><a id="2b" style="cursor: pointer">By Room</a>    
</li>
</ul>
</li>
</ul>
<div id="search" style="z-index: 1;">
  <ul>
    <li id="sbf"><a href="#search-1">Search By Filters</a></li>
    <li id="sbr"><a href="#search-2">Search By Room</a></li>
  </ul>
  <div id="search-1">
  </div>
  <div id="search-2">
  </div>
</div> 
```

检查这个小提琴

[http://jsfiddle.net/ej67Q/](http://jsfiddle.net/ej67Q/)

# c - 如何从 C 中的值数组格式化字符串？

> ID：14803464
> 
> 赞同：3
> 
> 时间：2013-02-10T22:41:29.013
> 
> 标签：c, c89

过去几年我一直在使用 C#，现在我正在尝试编写一些 C。我正在尝试从一个值数组格式化一个字符串。“格式字符串”和数组直到运行时才知道。

在 C# 中，我可以使用数组调用可变参数函数，如下所示：

```
using System;

namespace ConsoleApplication7
{
    class Program
    {
        static void Main(string[] args)
        {
            string formatString = "{0}.{1}.{2}.{3}";
            string[] formatValues = new[] { "a", "b", "c", "d" };

            string formatted = String.Format(formatString, formatValues);

            //Do something with formatted (now looks like "a.b.c.d")
        }
    }
} 
```

在 C 中我有这个：

```
#include <stdio.h>
#include <malloc.h>

    int main(int argc, char* argv[])
    {
        char *formatString = "%s.%s.%s.%s";
        char *formatValues[] = {"a","b","c","d"};

        char *buffer = (char*)malloc(100 * sizeof(char));

        //This doesn't work.....
        sprintf(buffer, formatString, formatValues);

        //... buffer is junk

        return 0;
    } 
```

我怎样才能在 C 中做到这一点？

（C 标准库中是否有一个很好的函数可以用来帮助我，或者有没有办法用数组调用 varargs 函数？）

请注意，参数的数量永远不会大于我拥有的数组的长度。并且类型将始终是字符串。所以我可能有

```
char *formatString = "My Formatted String %s.%s.%s";
char *formatValues[] = {"a","b","c","d","e"}; 
```

但我永远不会有太少的 %s。

注意：C 必须在 GCC for Linux 和 Visual Studio for Windows (C90) 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:00:42.847

我不认为 C 提供了一种标准化的方法来做到这一点。如果您了解`<stdarg.h>`系统上的内部实现，可能会拼凑出一个涉及*vprintf(3) 的特定于系统的解决方案，*但我有一个不同的、符合要求的拼贴给您……

可行的*方法*是声明一个大尺寸的数组，设置您拥有的值，然后在调用站点传递数组的每个元素，无论它们是否已设置。

```
char *a[5]; // or a[50], whatever you need

// assign the elements you actually have

printf(format_string, a[0], a[1], a[2], a[3], a[4], a[5]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:02:27.887

sprintf 接受的唯一数组类型是以空字符结尾的字符数组（即字符串）。这应该有效：

```
#include <stdio.h>
#include <malloc.h>
int main(int argc, char* argv[])
{
    char *formatStrings[]={"%s","%s","%s","%s"};
    char *buffer= (char*)malloc(100 * sizeof(char));
    char *formatValues[]={"a","b","c","d"};
    char *endofBuffer=buffer;
    int valueCount=4;
    int i;
    for (i=0; i<valueCount; ++i)
    {
        endofBuffer+=sprintf(endofBuffer, formatStrings[i], formatValues[i]);
        if (i<valueCount-1)
            endofBuffer+=sprintf(endofBuffer, "%c", '.');
    }
    printf("%s\n",buffer);
    return 0;
} 
```

# java - 使用理由 tags for class names and keywords in Javadocs?

> ID：14803470
> 
> 赞同：2
> 
> 时间：2013-02-10T22:41:55.423
> 
> 标签：java, javadoc

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:02:46.170

*   JavaDoc 用于[JavaDoc](http://docs.oracle.com/javase/7/docs/api/)（和 IDE）。没有其他的。使其尽可能易读，因此请使用您列出的代码标签。
*   **其他代码注释**应该有助于理解代码。由于它只是代码的一部分，并且只会与代码一起看到，因此不需要进一步的标记。

例子：

```
/**
 * This method returns <code>true</code> when the sun is shining.
 *
 * @param weather - A <code>package.name.Weather</code> implementation
 * representing the weather to be analyzed.
 * return <code>true</code> if the sun is shining, else <code>false</code>.
 */
public boolean isSunShining(Weather weather) {
    boolean result = false; // boolean variable for the result. Default is false.
    // some more code
    /*
     * Multiline comment w/o markup
     */
    return result;
} 
```

# xml - How to validate XML (via an XSD file) in Haskell?

> ID：14803471
> 
> 赞同：7
> 
> 时间：2013-02-10T22:42:04.597
> 
> 标签：xml, validation, haskell, xsd, hxt

I am already using HXT for transforming XML. Now I want to validate the input and output against a XSD-file.

HXT only seem to include [RELAXNG](http://hackage.haskell.org/package/hxt-relaxng-9.1.4) and [DTD validators](http://hackage.haskell.org/packages/archive/hxt/9.3.1.1/doc/html/Text-XML-HXT-DTDValidation-Validation.html).

I don't really care to use something else for just validating.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T17:04:21.280

我能想到的最接近的是 HaXml 和一些肘部油脂：[https ://hackage.haskell.org/package/HaXml-1.25.3](https://hackage.haskell.org/package/HaXml-1.25.3)

特别是，您拥有解析 XSD 和验证 DTD 的工具。但是，我没有“开箱即用”的方式来验证 XSD——它可以将你想要的信息粉碎成它们的 DTD 格式，或者你可以针对解析的 XSD 复制它们的验证逻辑。

至少这是一个开始……

# java - Spring managed JSF converter as singleton

> ID：14803474
> 
> 赞同：0
> 
> 时间：2013-02-10T22:42:12.617
> 
> 标签：java, spring, jsf-2, converter, instantiation

My Spring-based web application uses JSF as a presentation layer. To make working Spring `@Autowired` annotation in my backing beans and to have a clean project structure I do **not** use any JSF-managed bean, converter nor a validator. All my beans has a `@Component` and `@Scope` annotation with a particular attributes.

# Problem:

One of my converters uses database and its `EntityManager` should be injected via `@Autowired`. **I figured out, that the converter is properly created by Spring, but JSF manages it either!** JSF creates its own instances of my converter and uses them instead of using the instances created by Spring.

## Note:

I reference the converter though EL evaluation: `<f:converter binding="#{myConverter}"/>`

## Environment:

My environment is Oracle JDK 6, 64b Linux OS, com.sun JSF 2.1 implementation, Spring 3.1.3.

# Questions:

1.  Why JSF creates its own instances of my converter when I reference it via `#{myConverter}`
2.  How did JSF figure out the class of converter because I didn't used `@FacesConverter` neither defined it in `faces-config.xml`?
3.  Is there any way to force JSF to use only Spring-managed instances?

* * *

# Code to reproduce:

MyConverter.java

```
@Scope( "singleton" )
@Component( "myConverter" )
public class MyConverter implements Converter {

    private MyBean bean;

    public MyConverter() {
        System.out.println( "MyConverter created with no arg constructor" );
    }

    @Autowired
    public MyConverter( MyBean bean ) {
        System.out.println( "MyConverter created with parametrized constructor" );
        this.bean = bean;
    }

    @Override
    public Object getAsObject( FacesContext context, UIComponent component, String value ) {
        System.out.println( "Bean value is " + bean );
        return value;
    }

    @Override
    public String getAsString( FacesContext context, UIComponent component, Object value ) {
        System.out.println( "Bean value is " + bean );
        return value.toString();
    }
} 
```

JSF index.xhtml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">

<h:body>

    <h:form>

        <h:inputText value="#{myBean.text}">
            <f:converter binding="#{myConverter}"/>
        </h:inputText>

        <h:commandButton value="Create" action="#{myBean.action}"/>

    </h:form>

</h:body>

</html> 
```

# objective-c - 改变方向时的 iAD 底视图

> ID：14803477
> 
> 赞同：0
> 
> 时间：2013-02-10T22:43:00.500
> 
> 标签：objective-c, cocoa-touch, iad, device-orientation

目前我使用它来编写加载 iAD 横幅的代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    CGRect adFrame = adView.frame;
    adFrame.origin.y = self.view.frame.size.height;
    adView.frame = adFrame;

    [adView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];

    [self.view addSubview:adView];
    adView.delegate=self;

    self.bannerIsVisible=NO;

}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    if (!self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOn" context:NULL];

        CGRect adFrame = adView.frame;
        adFrame.origin.y = self.view.frame.size.height-adView.frame.size.height;
        adView.frame = adFrame;

        [UIView commitAnimations];
        self.bannerIsVisible = YES;
    }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    if (self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];

        CGRect adFrame = adView.frame;
        adFrame.origin.y = self.view.frame.size.height+adView.frame.size.height;
        adView.frame = adFrame;

        [UIView commitAnimations];
        self.bannerIsVisible = NO;
    }
} 
```

问题是我想在设备方向改变时也将 iAD 视图自动设置到视图的底部。我尝试了很多东西，但都没有奏效。

另外为什么我必须使用通知中心来检查设备方向？`DidRotateToInterfaceOrientation`似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:38:09.030

我可能理解错了，但是如果您设置以下内容：

```
[adView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin]; 
```

这应该意味着随着您的视图变大/变小（随着您旋转），它应该增加/减少“顶部”边距，因此应该坚持到底。

不过，我可能对此理解有误。如果上述想法不起作用，您能否提供当前正在发生的事情的屏幕截图？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:09:56.907

`viewDidLoad`在你的方法中试试这个：

```
CGRect adFrame = adView.frame;
adFrame.origin.y = self.view.frame.size.height-adView.frame.size.height;
adView.frame = adFrame; 
```

无论设备类型如何，它都会将您的 iAd 设置在视图的底部。不要在委托方法中设置 iAd 的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:30:18.500

此解决方案适用于 iOS 6

在视图控制器的 viewDidLoad 方法中使用通知来监听设备方向的变化：

```
UIDevice *device = [UIDevice currentDevice];
[device beginGeneratingDeviceOrientationNotifications];
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
[nc addObserver:self selector:@selector(orientationChanged:)name:UIDeviceOrientationDidChangeNotification object:device];

UIInterfaceOrientation destOrientation = self.interfaceOrientation; 
```

然后在 viewController 中使用 if 语句来监听变化，并在方向变化时重新定位 Ad Banner View：

```
if (destOrientation == UIInterfaceOrientationPortrait || destOrientation == UIInterfaceOrientationPortraitUpsideDown) {

    ADBannerView *bannerView = (ADBannerView *)[self.view viewWithTag:615];
    CGRect myAdBanner = bnrAd.frame;
    myAdBanner.origin.x = 0;
    myAdBanner.origin.y = 410;
    bannerView.frame = myAdBanner;

} else {

    ADBannerView *bannerView = (ADBannerView *)[self.view viewWithTag:615];
    CGRect myAdBanner = bnrAd.frame;
    myAdBanner.origin.x = 0;
    myAdBanner.origin.y = 265;
    bannerView.frame = myAdBanner;
} 
```

不要忘记调用将广告加载到视图中的方法：

```
- (void) bannerViewDidLoadAd:(ADBannerView *)banner {
    bnrAd = _bannerView;
}

- (BOOL) bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave {
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T09:55:12.097

请参阅下面的代码，我在需要支持 iOS 6 及更高版本的 iPad 应用程序中使用此代码：

**在你的 .h 文件中**

```
#import <iAd/iAd.h>

@interface MyViewController : UIViewController <ADBannerViewDelegate> {

    ADBannerView *bannerView;

    BOOL bannerIsVisible;

} 
```

**在你的 .m 文件中**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // detect device orientation change
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

    if (SYSTEM_VERSION_LESS_THAN(@"7.0")) {

        [[NSNotificationCenter defaultCenter]
         addObserver:self selector:@selector(orientationChanged:)
         name:UIDeviceOrientationDidChangeNotification
         object:[UIDevice currentDevice]];

    }

    [self showiAds];

}

- (void) showiAds{

    bannerView = [[ADBannerView alloc] initWithFrame:CGRectZero];

    if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"7.0")) {

        UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

        if(orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight) {

            [bannerView setAutoresizingMask:UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleBottomMargin];

        } else {

            [bannerView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin];

        }

    }

    if (SYSTEM_VERSION_LESS_THAN(@"7.0")) {

        [bannerView setAutoresizingMask:UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleBottomMargin];

    }

    bannerView.delegate = self;

    bannerView.hidden = YES;

    [self.view addSubview:bannerView];

    bannerIsVisible = NO;

}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    NSLog(@"bannerViewDidLoadAd");

    if (!bannerIsVisible) {

        bannerView.hidden = NO;

        [UIView beginAnimations:@"animateAdBannerOn" context:NULL];

        // banner is invisible now and moved out of the screen on 50 px
        banner.frame = CGRectOffset(banner.frame, 0, self.view.frame.size.height - bannerView.frame.size.height);

        [UIView commitAnimations];

        bannerIsVisible = YES;

    }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    NSLog(@"didFailToReceiveAdWithError : %@", [error localizedDescription]);

    if (bannerIsVisible) {

        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];

        // Assumes the banner view is placed at the bottom of the screen.
        banner.frame = CGRectOffset(banner.frame, 0, banner.frame.size.height);

        [UIView commitAnimations];

        bannerIsVisible = NO;

    }

} 
```

希望你理解上面的代码。祝你好运

Cheerio，马克天

# transactions - 如何多次更新 Ember Data 对象？

> ID：14803480
> 
> 赞同：1
> 
> 时间：2013-02-10T22:43:08.003
> 
> 标签：transactions, ember.js, ember-data

我有一个使用 Band 实体的简单应用程序。我创建了用户可以更新现有记录的表单。它由这个控制器处理：

```
App.BandEditController = Ember.Controller.extend({

    startEditing: function() {
        var band = this.get('model');
        var transaction = band.get('store').transaction();
        transaction.add(band); <-- THIS IS THE PROBLEM (IN 2ND RUN)
        this.transaction = transaction;
    },

    stopEditing: function() {
        // rollback the local transaction if it hasn't already been cleared
        var transaction = this.transaction;
        if (transaction) {
            transaction.rollback();
            this.transaction = undefined;
        }
        this.startEditing();
    },

    save: function() {
        this.transaction.commit();
        this.transaction = undefined;
        this.stopEditing();
    },

    cancel: function() {
        this.stopEditing();
    }
}); 
```

它受到了极大的启发：[https ://github.com/dgeb/ember_data_example/blob/master/app/assets/javascripts/controllers/contact_edit_controller.js](https://github.com/dgeb/ember_data_example/blob/master/app/assets/javascripts/controllers/contact_edit_controller.js)

当我显示表单并执行一次编辑时，一切正常。但是，我想保持表单显示并允许用户再次编辑它。使用我的方法，在将更新的记录发送到服务器后，当该`startEditing`方法再次尝试将波段添加到事务中时，我收到此错误：

```
Uncaught Error: assertion failed: Once a record has changed, you cannot move it into a different transaction 
```

我知道我不能用同一个对象创建另一个事务。但为什么？我该如何解决这个问题？

（顺便说一句，有没有比那些事务、startEditing 和 stopEditing 方法更简单的方法来更新记录？这对我来说似乎有点矫枉过正。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:58:07.143

你是从哪里来`this.startEditing();`的`stopEditing`——这看起来很奇怪。原始代码中没有这样的行。如果您`startEditing`从其他地方调用，这将导致它被调用两次..

另外，AFAIK，您需要等待服务器响应才能再次更改模型。

# html - how to have more secure urls?

> ID：14803481
> 
> 赞同：0
> 
> 时间：2013-02-10T22:43:11.013
> 
> 标签：html, jsp

when I am using img tag to show the images, I am using ../images/1.jpg address therefore when users have a look at the source code may easily change the address to /images and see all the pictures. What should I do? or which type of formatting should I use to avoid this, so they do not find the name or actual address of the pictures folder.

```
 www.example.com/images/1.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:49:01.897

Turn off directory listings in your httpd.conf, and in your images directory, create a blank file called index.html.

Also, instead of naming your images something guessable, you could concatenate the image id with a secret string and use a hashing algorithm on it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:48:51.787

如上所述，拒绝目录列表和/或根据参数从 JSP 页面提供目录列表以识别您想要的图像。

# python - 去除单词两侧的空格

> ID：14803490
> 
> 赞同：0
> 
> 时间：2013-02-10T22:44:02.697
> 
> 标签：python, regex

我将如何做相当于`str.strip()`使用正则表达式？

到目前为止，我有：

```
>>> s = ' Luca Bercovici (characters) '
>>> re.sub('^\s|\s$','',s)
'Luca Bercovici (characters) ' 
```

这似乎删除了所有前导空格，但没有删除尾随空格。

这看起来不错：`re.sub('^\s+|\s+$','',s)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:46:11.567

首先，你为什么不`.strip()`正常使用？

* * *

也就是说，您现有的代码对我有用：

```
>>> import re
>>> s = ' Luca Bercovici (characters) '
>>> re.sub('^\s|\s$','',s)
'Luca Bercovici (characters)' 
```

也就是说，如果一端有多个空白字符，则需要扩展模式以匹配多个：

```
re.sub('^\s+|\s+$','',s) 
```

# asp.net-mvc-3 - Asp.Net MVC3 网络网格

> ID：14803497
> 
> 赞同：0
> 
> 时间：2013-02-10T22:44:57.487
> 
> 标签：asp.net-mvc-3

为什么这个 webgrid 迭代网格中的每一行？

```
@model IEnumerable<Blog.Domain.Model.BlogPost>
@{
    ViewBag.Title = "Posts";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

@Html.ActionLink("Add Post", "Add", "Blog")

@{
    var grid = new WebGrid(Model);
}
@foreach (var items in Model)
{
    <div id="grid">
        @grid.GetHtml(columns: new[] {grid.Column("Title",header:""),
        grid.Column("",header:"",format:(item)=>Html.ActionLink("More Details","Details","Blog",new{postId=items.Id},null)),
        grid.Column("",header:"",format:(item)=>Html.ActionLink("Delete","Delete","Blog",new{postId=items.Id},null)),
        grid.Column("",header:"",format:(item)=>Html.ActionLink("Edit","Edit","Blog",new {postId=items.Id},null)), })

    </div>
} 
```

我的意思是：例如对于两个数据，它呈现 4 个数据，每个数据两次！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:47:47.867

你不需要`foreach`通过模型。`GetHtml()`会为你做一切。

当您将您`Model`的数据传递给`WebGrid()`构造函数时，网格现在知道在您调用时它必须呈现哪些数据，`GetHtml()`因此您无需执行任何其他操作。

这应该这样做：

```
@{
    var grid = new WebGrid(Model);

    <div id="grid">
        @grid.GetHtml(columns: new[] {grid.Column("Title",header:""),
        grid.Column("",header:"",format:(item)=>Html.ActionLink("More Details","Details","Blog",new{postId=item.Id},null)),
        grid.Column("",header:"",format:(item)=>Html.ActionLink("Delete","Delete","Blog",new{postId=item.Id},null)),
        grid.Column("",header:"",format:(item)=>Html.ActionLink("Edit","Edit","Blog",new {postId=item.Id},null)), })
     </div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:51:06.037

我不是 100% 确定，因为我不经常使用 WebGrid，但是你确定你需要它`@foreach`吗？不会`@grid.GetHtml()`返回所有记录吗？

# .htaccess - .htaccess 之后的 Xampp 内部服务器错误

> ID：14803498
> 
> 赞同：1
> 
> 时间：2013-02-10T22:44:57.797
> 
> 标签：.htaccess, xampp

.ht 访问：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^UniK/(.*)$ /UniKme/profile.php?username=$1 [L]
RewriteRule ^(.*)$ /UniKme/index.php?p=$1 [L] 
```

我不太了解.htaccess。这给了我一个关于 Xampp 的内部错误。

更新：这是日志：

这是错误日志：

```
[Sun Feb 10 15:04:02.159903 2013] [core:error] [pid 7976:tid 1704] [client ::1:65213] AH00124: Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

# css - 无法删除 CSS 类 a：悬停背景颜色

> ID：14803503
> 
> 赞同：17
> 
> 时间：2013-02-10T22:45:18.277
> 
> 标签：css, hyperlink, hover, background-color, css-reset

我创建了一个 CSS 类 .press-title，但是我无法删除悬停时应用的背景颜色。

```
.press-title a:hover { background-color: none; text-decoration: none;} 
```

想法？

链接在页面底部：

[http://domdemarcos.com/typography/](http://domdemarcos.com/typography/)

编辑以反映回复所做的更改。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-10T22:48:48.537

尝试

```
.press-title a:hover { background-color: transparent; text-decoration: none; } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T22:48:46.550

尝试：

```
background-color:transparent; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T22:48:19.920

您的选择器无效。Firefox 抛出此消息：`Expected identifier for pseudo-class or pseudo-element but found ' '. Ruleset ignored due to bad selector.`

它应该是：

```
.press-title a:hover 
```

# asp.net-mvc-4 - IISExpress 崩溃并出现 0xc0000008 错误

> ID：14803508
> 
> 赞同：44
> 
> 时间：2013-02-10T22:45:45.363
> 
> 标签：asp.net-mvc-4, mef, signalr, iis-express

有时，当使用 IISExpress 在 VS2012 中运行我的 MVC4 站点时，我会收到以下错误并且 IISExpress 停止：

```
iisexpress.exe: Managed (v4.0.30319)' has exited with code -1073741816 (0xc0000008) 'An invalid handle was specified 
```

事件日志中没有任何内容，我在互联网上找不到任何内容。

我有一些非常模糊的理论：

*   我的网站正在使用 MEF 在启动时动态加载模块。也许偶尔会出现竞争情况，因此 IIS 无法打开程序集，但我的跟踪日志显示 IIS 超出了启动周期的那部分。
*   它也有 SignalR，但除了启动集线器之外，它还没有做太多事情。SignalR 非常新且未经证实，但我更新了最新的 RC2 版本，结果相同。

哦，我在使用 VS Dev Web 服务器时也遇到了同样的错误。我还没有尝试过完整的 IIS。

其他人有线索吗？

谢谢

更新：

我修复了几个 nuget 引用，这些引用似乎使事情稳定了一点，然后今天早上又发生了。VS 输出窗口显示如下：

```
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.Mobile\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Web.Mobile.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Users\peter.jones\AppData\Local\Temp\Temporary ASP.NET Files\root\a4aa93f7\dfa23a50\App_Web_rpzlbjhw.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Users\peter.jones\AppData\Local\Temp\Temporary ASP.NET Files\root\a4aa93f7\dfa23a50\App_Web_c1rjct4s.dll', Symbols loaded.
The program '[11072] iisexpress.exe: Managed (v4.0.30319)' has exited with code -1073741816 (0xc0000008) 'An invalid handle was specified'. 
```

如果某处有一些更有用的日志记录，我会很乐意提供。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T09:43:22.913

vs2013 -> 工具 -> 选项 -> 项目和解决方案 -> web 项目 -> 取消使用 IIS Express 64

希望这可以帮到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T12:37:40.510

在 IIS 中启用失败的请求跟踪日志记录以捕获错误

[链接在这里](http://technet.microsoft.com/en-us/library/cc725786%28v=WS.10%29.aspx)

您可以在 IIS 论坛上获得有关该主题的更多信息

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T08:14:18.617

这似乎是从 VS2010 开始的 VS 中发生的事情，并且[无法使用调试器运行程序](http://social.msdn.microsoft.com/Forums/vstudio/en-US/6944ae5c-7572-4633-976b-636c109dd446/cannot-run-program-using-debugger-vs-2010?forum=vsdebug)引用了特定的错误号，[异常 0xC0000008](http://social.msdn.microsoft.com/Forums/vstudio/en-US/06714a48-2125-4ee7-b0bd-1df3fa329c77/exception-0xc0000008-an-invalid-handle-was-specified-thrown-during-file-creation-when-debugging?forum=vsdebug)提到了特定的异常。

此链接[AjaxControlToolkit Error with PopupControlExtender](http://forums.asp.net/t/1682308.aspx)还引用了第二个堆栈跟踪底部的异常和错误号，OP 继续解决该问题。

故障的所有链接/建议和链接到 MS 连接日志。希望这可以帮助您在寻求答案的过程中走得更远。

# php - 验证 MySQL 表创建 - PDO

> ID：14803514
> 
> 赞同：1
> 
> 时间：2013-02-10T22:46:51.547
> 
> 标签：php, mysql, pdo

所以我是 PDO 的新手，只是想了解它。我有以下代码：

```
$sql = $conn->prepare('

CREATE TABLE IF NOT EXISTS `users` (  
`UserID` INT(25) NOT NULL AUTO_INCREMENT PRIMARY KEY ,  
`Username` VARCHAR(65) NOT NULL ,  
`Password` VARCHAR(32) NOT NULL ,  
`EmailAddress` VARCHAR(255) NOT NULL,
`Name` VARCHAR(50) NOT NULL ) ');

$sql->execute(); 
```

有没有办法知道表是创建成功还是已经存在而没有执行？

我知道您可以检查 ->execute() 的真值或假值，但在这种情况下，表是否已经存在并不总是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:54:54.477

不，这正是`IF NOT EXISTS`它的用途——如果表已经存在，则什么也不做，而不会触发错误。

解决方案显然太明显了：只需省略`IF NOT EXISTS`. 如果表确实存在，则该语句将触发您可以捕获的异常（取决于配置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:07:04.973

解决了：

```
try {

    $sql = $conn->prepare('
        CREATE TABLE `users` (  
        `UserID` INT(25) NOT NULL AUTO_INCREMENT PRIMARY KEY ,  
        `Username` VARCHAR(65) NOT NULL ,  
        `Password` VARCHAR(32) NOT NULL ,  
        `EmailAddress` VARCHAR(255) NOT NULL,
        `Name` VARCHAR(50) NOT NULL,
        `Rank` INT(1) NOT NULL DEFAULT 0 ) 
        ');

        $sql->execute();

        echo "Table 'users' added to the database";

} catch(PDOException $ex) {
    $errors = $sql->errorInfo();
    echo($errors[2]);
} 
```

# shell - openwrt中的无限循环脚本？

> ID：14803517
> 
> 赞同：3
> 
> 时间：2013-02-10T22:47:22.017
> 
> 标签：shell, openwrt, ash

我在 openwrt 论坛上结束了，我有一个用户帮助我制作脚本，但我遇到了麻烦。

基本上我有一个带有麦克风的openwrt路由器，我想全天自动录制。他告诉我尝试while循环。我使用了while循环并尝试了arecord命令，该命令正确标记了文件，但由于某种原因它会放一个？在文件名的末尾，所以它像 2013-02-10-12:20:10.wav？似乎它让我无法通过 ftp 传输它。

我收到错误预期“完成”或类似的文件意外结束。

```
 while true
    do
      echo "recording started"
      arecord -f cd -d 10 `date +"%Y-%m-%d-%T"`.wav
    done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:41:55.773

它有效，我在**OpenWRT 姿态调整 r35725上测试了以下内容**

```
root@openwrt3:/# cat file 
while true
do
  echo `date +"%Y-%m-%d-%T"`
done
root@openwrt3:/# ./file 
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:01
2013-02-22-18:40:02
^C
root@openwrt3:/# 
```

# flash - Flash CS6 动作脚本 3.0

> ID：14803519
> 
> 赞同：0
> 
> 时间：2013-02-10T22:47:35.933
> 
> 标签：flash, adobe, flash-cs6

我创建文档 3.0 AC。我在 1 帧中画圆，符号“Movieclip”命名为“圆”并双击，我确实创建了补间圆。我从movieclip“circle”编写脚本gotoAndPlay（“startcircle”），但在下一帧2movieclip名称“circleup”中不起作用。

第一个movieclip -> circle 开始向左运行向右移动，第二个movieclip circle 运行放大圆圈。

测试影片：第一个影片剪辑 -> 圆圈开始向左运行向右移动，第二个影片剪辑圆圈不运行。

![在此处输入图像描述](../Images/fbaa413b991235517fed9567d5d689d2.png)

![在此处输入图像描述](../Images/cbd24a9b2069db79cd82d2e00b031288.png)

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:03:25.133

你的圈子需要告诉包含它的东西（它的`parent`）`gotoAndPlay`。这不是很整洁，但你可以这样做：

```
import flash.display.MovieClip;
(parent as MovieClip).gotoAndPlay("startcircle"); 
```

（您必须告诉 Flash 父级是 a `MovieClip`，因为更简单`DisplayObject`的 s 可能实际上没有帧到`gotoAndPlay`。如果您将父级的引用传递给 circle ，则不需要使用`as`。）

# objective-c - 倒计时计时器

> ID：14803520
> 
> 赞同：-6
> 
> 时间：2013-02-10T22:47:38.837
> 
> 标签：objective-c, cocoa-touch

如果按下按钮，我想要一个计时器。在计时器运行期间，无法再次按下该按钮。并且会出现警报..您知道如何实现吗？保护你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:51:37.407

第一次按下按钮时创建一个[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)，当计时器有效时，不要让动作发生，并弹出警报。

将您的 NSTimer 存储在对象的属性中。

界面：

```
@property (strong, nonatomic) NSTimer *timer; 
```

执行：

```
- (IBAction)buttonClicked:(id)sender
{
    if(self.timer == nil || ![self.timer isValid]) {
        // Allow the action (set the timer interval to what suits your needs)
        self.timer = [NSTimer scheduledTimerWithTimeInterval:1.0 invocation:nil repeats:NO];

        // DO THE ACTION HERE!
        NSLog(@"You can do it this time!");
    } else {
        // Deny the action (perhaps popup an alert)
        NSLog(@"Can't do that yet!");
    }
} 
```

# heroku - Rails/Heroku ...我可以以编程方式更改 procfile 吗？

> ID：14803521
> 
> 赞同：1
> 
> 时间：2013-02-10T22:47:43.813
> 
> 标签：heroku, scalability, procfile

我的 Heroku 系统上有一个 procfile，旨在让我扩展工作人员。我遇到的问题是我想扩展在撰写本文时未知的工人。即我不能对它们进行硬编码。

我希望能够在 Heroku 上动态创建一个新的工作类型。
我想为每个客户配备一名工人。或者，对于负载较重的客户来说，可能有很多工作人员。每个客户都为自己的工人付费。

proc 文件的所有示例都有“正常”、“优先级”三个不同的队列。我想要的是每个客户的不同队列。“client_1”、“client_2”、“client_3”....

我想我可以构建一个包含 2000 个条目的 procfile……但这感觉很难看。

好吧..所以我的问题。
我可以让我的 Rails 应用程序在运行时修改 procfile 吗？添加新行以说明新客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:54:37.740

不，Heroku 不支持动态指定新的进程类型。

但是，您确定这真的是您想要做的吗？为什么每个客户端都需要不同的队列？如果您让工作进程保持运行，它将为任何请求它们的客户端执行作业。如果您尝试隔离客户端环境，也许多个应用程序是更好的解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T23:19:31.777

Heroku 有一个平台 API [https://devcenter.heroku.com/articles/platform-api-reference](https://devcenter.heroku.com/articles/platform-api-reference)

那可能会做你想做的事。我还没有尝试过，但 Formation 和 Dyno 端点似乎可以在运行时直接操作。

# java - 将多个值传递给 Toast

> ID：14803526
> 
> 赞同：0
> 
> 时间：2013-02-10T22:47:58.337
> 
> 标签：java, android, radio-button, toast

我一直在尝试制作一个小应用程序来学习 android 开发，我设置了 4 个单选按钮，每个按钮代表不同的颜色。我的问题是，如果用户选择它们，我找不到将单选按钮中的值传递给 toast 的方法，例如，如果用户选择黄色和蓝色，则 toast 将输出用户选择了蓝色和黄色的颜色，我只能找到将一个值传递给 toast 的文档。

如何克服这个？

```
chooseColor.setOnClickListener(new View.OnClickListener()
{

    @Override
    public void onClick(View v) 
    {
        blue = (RadioButton) findViewById(selectedId);
        red = (RadioButton) findViewById(selectedId);
        yellow = (RadioButton) findViewById(selectedId);
        green = (RadioButton) findViewById(selectedId);
        brown = (RadioButton) findViewById(selectedId);

        Toast toast = Toast.makeText(getApplicationContext(), 
        blue.getText(), Toast.LENGTH_SHORT);            
        toast.setGravity(Gravity.CENTER|Gravity.CENTER_HORIZONTAL, 0, 0);                   
        toast.show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:51:37.710

您只能传递一个字符串以`Toast.makeText()`显示在 Toast 中。`+`但是，您可以通过将字符串连接在一起或`StringBuilder`更动态地创建一个字符串来轻松地构建一个包含您想要的所有信息的字符串。

附带说明一下，无论是否选择了蓝色单选按钮，您当前的代码都将显示“蓝色”。您将需要几个`if`语句来确定选择了哪些单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:13:37.277

我只是同意 Code-Guru，除了你应该检查你的 onClick 方法中是否检查了某些东西，最好这样：

```
chooseColor.setOnClickListener(new View.OnClickListener()
{

    @Override
    public void onClick(View v) 
    {

        blue = (RadioButton) findViewById(selectedId);
        red = (RadioButton) findViewById(selectedId);
        yellow = (RadioButton) findViewById(selectedId);
        green = (RadioButton) findViewById(selectedId);
        brown = (RadioButton) findViewById(selectedId);

        String str = ", ";
        str += blue.isChecked()?blue.getText()+", ":"";
        str += red.isChecked()?red.getText()+", ":"";
        str += yellow.isChecked()?yellow.getText()+", ":"";
        str += green.isChecked()?green.getText()+", ":"";
        str += brown.isChecked()?brown.getText()+", ":"";
        str = str.subString(0,str.length()-2);

        Toast toast = Toast.makeText(getApplicationContext(),str, Toast.LENGTH_SHORT);            
        toast.setGravity(Gravity.CENTER|Gravity.CENTER_HORIZONTAL, 0, 0);                   
        toast.show();

    }
}); 
```

此外，如果选择颜色是包含单选按钮的 RadioGroup，您可能无法检查多个单选按钮（我不确定，但这一定是这样。）

# binding - 制作 Vim 等午夜指挥官的键绑定

> ID：14803529
> 
> 赞同：18
> 
> 时间：2013-02-10T22:48:05.723
> 
> 标签：binding, mc, vifm

我想要 hjkl 键来浏览我的面板的目录/文件。这有点像使用 hjkl 的 elinks，更少使用 hjkl 或 vifm。

Ctrl+ 向左键执行一种 alt+i。

你知道这些捷径是否可行吗？

如果是，请您介意提供一些帮助或配置文件示例吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-03T09:02:20.333

检查这个出色的[答案](https://superuser.com/questions/532784/midnight-commander-doesnt-use-mc-ini-file)：

> 配置存储在
> 
> ```
> $HOME/.config/mc/ 
> ```
> 
> 在你的情况下编辑文件`$HOME/.config/mc/ini`。您可以使用以下命令检查午夜指挥官实际读取了哪些文件`strace`：
> 
> ```
> strace -e trace=open -o mclog mc 
> ```

我在 Ubuntu 12.04 上找到了我的键绑定`/etc/mc/mc.keymap`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:54:34.047

顺便说一句，寻找相同的信息。我想完全配置我的 mc 键绑定。希望有人来...

fwiw 我发现了这个：

> 6.1.1 默认键绑定糟透了！

```
>Problem    B_alertblock
>The default key bindings suck! I want to change them!
>
>Solution    B_alertblock
>Despite what the Internet tells you, with a recent enough
>Midnight Commander, one can change the key bindings.
>
>Quip    B_block
>But you'll need a PhD to figure out how. 
```

>

> 资料来源： http: [//www.nawaz.org/media/docs/mc/mc.html](http://www.nawaz.org/media/docs/mc/mc.html)

# api - 是否可以在 Twitter Mention 上接收通知？

> ID：14803531
> 
> 赞同：2
> 
> 时间：2013-02-10T22:48:16.823
> 
> 标签：api, http, twitter, twitter-oauth

我编写了一个应用程序，希望当 Twitter 用户在推文中提到我的 Twitter 用户名时更新其数据。简而言之，我编写了一个记分板应用程序，我希望 Twitter 用户能够发布他们最好的时间，然后我的应用程序会响应：

@汉克亨德里克斯 45:12

我是 Twitter API 的新手，我已经很难找到问题的答案。我什至找不到 IRC 频道！

我知道您可以通过 OAuth 获取用户的提及 - 我可以每 30 秒 CRON 一个脚本来执行此操作，然后更新我的数据库，但理想情况下我希望能够实时触发脚本（比如 long -轮询）。

这可能通过 Twitter 流 API 实现——但同样，文档似乎对菜鸟不友好。

有哪些解决方案？我对 Node 和 Web Sockets 等持开放态度。

# c - WaitForMultipleObjects 或 WaitForSingleObject 可以与异步 ReadFile() 一起使用吗？

> ID：14803534
> 
> 赞同：0
> 
> 时间：2013-02-10T22:48:33.787
> 
> 标签：c, asynchronous, io

我正在尝试使用 WaitForMultipleObjects() 来等待多个异步 ReadFile() 完成，但是它总是立即返回并且没有读取任何字节。另一方面，GetOverlappedResult() 总是成功的。我不确定我做错了什么。

我在下面的这段代码中只使用一个异步 ReadFile() 来测试它。

```
events = (HANDLE *)malloc(sizeof(HANDLE));
buffer = (BYTE*)malloc(BufferSize*sizeof(BYTE));
memset(buffer, 0, BufferSize*sizeof(BYTE));
hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
if (!hEvent){
    printf("can't create event\n");
    return 0;
}

memset(&testOv, 0, sizeof(testOv));
testOv.hEvent = hEvent; //event to use with waitformultipleobject()
testFile = CreateFile(SrcDst[0][0], GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_FLAG_OVERLAPPED, NULL);
if (INVALID_HANDLE_VALUE==testFile) 
{
printf("Unable to open file %s.  Error=%d\n",SrcDst[0][0], GetLastError());
return 0;
}

events[0] = testOv.hEvent; 

RF = ReadFile(testFile, buffer, 25, &byteRead, &testOv);

//WaitForMultipleObjects(1, events, TRUE, INFINITE); return before any byte is read
//WaitForSingleObject(testFile, INFINITE); waiting indefinitely

GetOverlappedResult(testFile, &testOv, &byteRead, TRUE);

for (i = 0; i < byteRead; i++){
    printf("%c", (char)buffer[i]);
}

printf("byteRead: %d\n", byteRead);
printf("error: %d\n", GetLastError()); 
```

# java - 如何从空白构造函数中绘制 LibGDX Sprite

> ID：14803544
> 
> 赞同：4
> 
> 时间：2013-02-10T22:49:49.343
> 
> 标签：java, android, constructor, sprite, libgdx

我正在尝试`Sprite`在 LibGDX 中绘制一个。如果我使用指定要使用的纹理的构造函数，我可以做到这一点，例如

```
Sprite sprite = new Sprite(new Texture(Gdx.files.internal("path"))); 
```

但如果我改为使用`Sprite();`并尝试使用`setTexture`and/or `setRegion`，则不会绘制任何图片。API 说在绘制任何东西之前需要设置“纹理、纹理区域、边界和颜色”。我已经调用了`setTexture`, `setRegion`，`setColor`尽管没有绘制任何内容。

主要问题：如果我使用默认`Sprite()`构造函数，之后我必须做什么才能确保它绘制到屏幕上（在 a 中`SpriteBatch`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:00:32.830

我假设代码需要执行与[Sprite(Texture) ctor](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/Sprite.java)相同的步骤：

```
public Sprite (Texture texture) {
    this(texture, 0, 0, texture.getWidth(), texture.getHeight());
}

public Sprite (Texture texture, int srcX, int srcY, int srcWidth, int srcHeight) {
    if (texture == null) throw new IllegalArgumentException("texture cannot be null.");
    this.texture = texture;
    setRegion(srcX, srcY, srcWidth, srcHeight);
    setColor(1, 1, 1, 1);
    setSize(Math.abs(srcWidth), Math.abs(srcHeight));
    setOrigin(width / 2, height / 2);
} 
```

这些都是公共方法。

# asp.net-mvc-3 - 本地化在某些局部视图中有效，而在其他视图中无效。

> ID：14803545
> 
> 赞同：0
> 
> 时间：2013-02-10T22:50:04.090
> 
> 标签：asp.net-mvc-3

我正在尝试使我的应用程序以 2 种语言可用，并且我按照本[指南](http://afana.me/post/aspnet-mvc-internationalization-part-2.aspx "指导")进行操作。我这样做了（2 个资源，ExecuteCore 中的代码等）我的视图由一个布局和许多局部视图组成。但是本地化在某些方面有效，但在其他方面无效，例如“登录”在页面标题处以法语显示，但在页面中间以英语显示，并且它们都具有相同的位置（例如: MyProject.Resource.LogOn) 你认为问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:40:51.377

等子操作执行时的断点并在即时窗口中键入 CultureInfo.CurrentUICulture。我怀疑文化是为那些人重新设置的

# mysql - 每小时平均时间（）

> ID：14803547
> 
> 赞同：1
> 
> 时间：2013-02-10T22:50:37.983
> 
> 标签：mysql, sql, time, average

是否有可能通过单个 SQL 查询来获取我的每小时平均数据？

我的表如下所示：

```
| count | time   | 
|   5   | time() |
|   4   | time() | 
```

它每 24 小时重复一次。我想获得一天中每个小时的平均计数。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:01:56.047

像这样的东西可能类似于你想要的

```
select hour(time) thehour, avg(count) average
from yourtable
group by hour(time) 
```

我希望这些不是您真正的列名。如果是，您将不得不做一些事情，因为它们也是 sql 关键字。我不使用 mySql，所以我不知道具体是什么。

# javascript - 我可以在除台式机之外的所有东西上隐藏 html5 视频标签吗？

> ID：14803550
> 
> 赞同：0
> 
> 时间：2013-02-10T22:51:16.290
> 
> 标签：javascript, css, html, html5-video

有没有办法做到这一点？我不希望视频出现在平板电脑或手机上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:53:08.917

使用这样的 CSS 媒体查询：

```
@media screen and (max-width: 680px)
{
    .video { display : none; }
} 
```

这将隐藏所有屏幕宽度为 680 像素的 .video 类

编辑：您当然也可以反过来执行此操作，并默认设置`.video`为`display: none`，然后`min-width`在媒体查询中使用以实际从某个宽度显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:57:23.927

1.  使用 css 媒体查询或 JS 检测宽度
2.  安卓平板电脑在他们的浏览器用户代理中有“移动”，ios很容易检测到。
3.  [使用modernizr](http://modernizr.com/)检测对视频标签的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:54:33.633

是的，使用媒体查询：

```
<div id="video">
  //Video here
</div>

@media only screen and (max-width: 500px) {

    #video {
      visibility: hidden;
    }

} 
```

对于小于 500 像素（或您确定的任何像素宽度）的屏幕尺寸，这将隐藏 ID 为“视频”的 div。

# ios-simulator - 如何在 iOS 模拟器中禁用同源策略？

> ID：14803551
> 
> 赞同：8
> 
> 时间：2013-02-10T22:51:22.960
> 
> 标签：ios-simulator, mobile-safari, same-origin-policy

我正在通过 Xcode 在 iOS 模拟器上测试 Web 应用程序，但我认为我正在使用 Mobile Safari 的相同来源策略。是否可以禁用它？

# java - 并行使用相同方法的线程

> ID：14803555
> 
> 赞同：0
> 
> 时间：2013-02-10T22:51:38.033
> 
> 标签：java, multithreading

是否有可能有这种行为：

一个线程 (T1) 调用某个方法，例如，`compute(10);`

当该函数仍在执行时，另一个线程再次调用它（使用其他参数），例如，`compute(20);`

如果方法

```
public int compute(int i) {
    return i+20;
} 
```

每个线程都会得到正确的结果吗？

我希望 T1 得到`20`，T2 得到`40`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:54:47.787

简短的回答，是的。每个线程都有自己的方法中使用的数据堆栈，该堆栈与其他线程完全分开。当线程之间***共享***数据（例如类级别变量）时，您只需要担心冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:04:34.823

由于您*仅使用局部变量*（方法参数是局部的），**是的，它是安全的。**

```
public class Computer {
    public int compute(int i) {
        return i+20;
    }
} 
```

如果您将使用*实例变量*或*静态变量*，那么您应该拥有`synchronized`每个变量`read`和`write`变量。

```
public class Computer {
    private int increment;

    public synchronized int compute(int i) {
        return i+increment;  // <-- reads increment
    }

    private synchronized void setIncrement(int increment) {
         this.increment = increment;  // <-- writes increment
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:55:53.270

假设您的`compute`方法实现是：

```
int compute(int i) {
  return i + 20;
} 
```

然后每个线程都会得到正确的结果，因为这个方法不使用共享状态。

# php - 电子邮件内容到 HTML（使用 php）

> ID：14803556
> 
> 赞同：0
> 
> 时间：2013-02-10T22:51:57.437
> 
> 标签：php, html, email

我正在构建一个简单的电子邮件程序。

我用它来获取 HTML：`$bodyHTML = imap_fetchbody($imap, $i, 2);`

当我使用：`$bodyHTML = imap_fetchbody($imap, $i, 1.2);`输出为空...

当我回显 $bodyHTML。我看到这个：

```
=EF=BB=BF<!DOCTYPE HTML PUBLIC =22-//W3C//DTD HTML 4.0 Transitional//EN=22>
<HTML><HEAD><TITLE>Country Linedance Just Can't See It www.country4all.eu</=
TITLE>
<META name=3DGENERATOR content=3D=22MSHTML 8.00.6001.19019=22>
<STYLE>A:hover {
=09BACKGROUND-COLOR: yellow; COLOR: rgb(0,0,153)
}
</STYLE> 
```

现在我的问题是：如何将其正确设置为 HTML？（所以它显示在浏览器中）

**更新：我发现这是一个常见问题。人们建议`$bodyHTML = imap_fetchbody($imap, $i, 1.2);`，但大多数时候这不起作用。所以人们使用这个：
1）`$bodyHTML = imap_fetchbody($imap, $i, 2);`
2）`quoted_printable_decode($bodyHTML)`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:07:25.463

您可以使用该[`quoted_printable_decode`](http://www.php.net/manual/en/function.quoted-printable-decode.php)方法将编码的特殊字符（如`=22`）解码为常规字符。

# javascript - 使用 Google Chrome 扩展检测 Flash Player 全屏模式并在其上注入 CSS

> ID：14803558
> 
> 赞同：0
> 
> 时间：2013-02-10T22:52:01.820
> 
> 标签：javascript, css, google-chrome-extension, flash

我正在寻找一种使用在 Chrome 扩展中运行的注入内容脚本来检测切换到完整 Flash 视频的方法。有人会碰巧知道这怎么可能吗？一旦完成，我也希望能够以某种方式在现在全屏 Flash 窗口的顶部显示 CSS 或任何其他类型的风格化数据。基本上，一个“Hello World！” 此扩展程序的版本在切换到全屏后只会在视频（来自 Youtube 或使用 Flash 播放器的任何其他网站）的顶部显示一条消息。如果您对能够做到这一点有更多了解，请分享您的经验，因为我只是不知道 Flash 与浏览器的交互发生了什么。如果您需要更多详细信息，请告诉我。谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:19:50.693

我能想到的唯一方法是全屏使用 webkit

```
document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT); 
```

并将闪存宽度/高度属性设置为 100% 并可能缩放为 noScale 这听起来有点骇人听闻，不太确定您要达到的目标。

# php - 在输入字段旁边显示错误消息

> ID：14803559
> 
> 赞同：0
> 
> 时间：2013-02-10T22:52:06.600
> 
> 标签：php

有人可以帮我在输入字段旁边显示错误消息吗？我尝试如下回显，但它不起作用......我在输入旁边得到的只是单词`Array`。任何帮助表示赞赏。

```
<?php
$out['error'][]=''; //this is what I added
function uploadFile ($file_field = null, $check_image = false, $random_name = false) {

//Config Section    
//Set file upload path
$path = 'productpic/'; //with trailing slash
//Set max file size in bytes
$max_size = 2097152;
//Set default file extension whitelist
$whitelist_ext = array('jpg','png','gif');
//Set default file type whitelist
$whitelist_type = array('image/jpeg', 'image/png','image/gif');

//The Validation
// Create an array to hold any output
$out = array('error'=>null);

if (!$file_field) {
$out['error'][] = "Please specify a valid form field name";           
}

if (!$path) {
$out['error'][] = "Please specify a valid upload path";               
}

if (count($out['error'])>0) {
return $out;
}

//Make sure that there is a file
if((!empty($_FILES[$file_field])) && ($_FILES[$file_field]['error'] == 0)) {

// Get filename
$file_info = pathinfo($_FILES[$file_field]['name']);
$name = $file_info['filename'];
$ext = $file_info['extension'];

//Check file has the right extension           
if (!in_array($ext, $whitelist_ext)) {
$out['error'][] = "Invalid file Extension";
}

//Check that the file is of the right type
if (!in_array($_FILES[$file_field]["type"], $whitelist_type)) {
$out['error'][] = "Invalid file Type";
}

//Check that the file is not too big
if ($_FILES[$file_field]["size"] > $max_size) {
$out['error'][] = "We are sorry, the image must be less than 2MB";
}

//If $check image is set as true
if ($check_image) {
if (!getimagesize($_FILES[$file_field]['tmp_name'])) {
$out['error'][] = "The file you trying to upload is not an Image, we only accept images";
}
}

//Create full filename including path
 if ($random_name) {

// Generate random filename
$tmp = str_replace(array('.',' '), array('',''), microtime());

if (!$tmp || $tmp == '') {
$out['error'][] = "File must have a name";
}     
$newname = $tmp.'.'.$ext;                                
} else {
$newname = $name.'.'.$ext;
}

//Check if file already exists on server
if (file_exists($path.$newname)) {
$out['error'][] = "The image you trying to upload already exists, please upload only once";
}

if (count($out['error'])>0) {
//The file has not correctly validated
return $out;
} 

if (move_uploaded_file($_FILES[$file_field]['tmp_name'], $path.$newname)) {
//Success

$out['filepath'] = $path;
$out['filename'] = $newname;
return $out;
} else {
$out['error'][] = "Server Error!";
}

} else {
$out['error'][] = "Please select a photo";
return $out;
}      
}
?>

<?php

if (isset($_POST['submit'])) {

$file = uploadFile('file', true, false);
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
$message .= '<p>'.$msg.'</p>';    
}
} else {
$message = "File uploaded successfully";
$sub=1;
}
echo $message;
}
?>
<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?>
<input name="file" type="file" size="20" /><span><?php echo $out['error'] ;?></span> //It displays here just the word Array
<input name="submit" type="submit" value="Upload" />
<?php
}
?>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:54:11.657

采用

```
foreach ($out['error'] as $e) {
    echo $e;
} 
```

而不是 echo `$out['error']`。

`$out`您可能还想将其转换为数组，或者在对其执行 foreach 之前确保它不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:14:37.563

$sub 永远不会等于 0：

```
$sub=0;
if (is_array($file['error'])) {
    $message = '';
    foreach ($file['error'] as $msg) {
        $message .= '<p>'.$msg.'</p>';    
    }
} else {
    $message = "File uploaded successfully";
    $sub=1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:19:43.360

我通过将第二行 php 代码移动到输入字段旁边解决了我的问题，它工作正常.. 我做了如下..

```
<input name="file" type="file" size="40" /><span><?php

if (isset($_POST['submit'])) {

$file = uploadFile('file', true, false);
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message .= '<span>'.$msg.'</span>';    
}
} else {
$message = "File uploaded successfully";
$sub=1;
}
echo $message;
}
?></span>

<input name="submit" type="submit" value="Upload" /> 
```

# wordpress - 将自定义用户配置文件字段保存到特定表

> ID：14803560
> 
> 赞同：1
> 
> 时间：2013-02-10T22:52:08.473
> 
> 标签：wordpress

我已成功将自定义字段添加到编辑配置文件页面：

```
function directoryFields() { ?>

    <h3>Directory Info</h3>

    <table class="form-table">

        <tr>
            <th><label for="responsibilities">Primary work responsibilities</label></th>
            <td><textarea name="responsibilities" id="responsibilities" rows="5" cols="30">Load info here...</textarea><br />
        </tr>
        <tr>
            <th><label for="ask">Ask me about</label></th>
            <td><textarea name="ask" id="ask" rows="5" cols="30">Load info here...</textarea><br />
        </tr>
        <tr>
            <th><label for="ask">Memberships and Affiliations</label></th>
            <td><textarea name="memberships" id="memberships" rows="5" cols="30">Load info here...</textarea><br />
        </tr>
        <tr>
            <th><label for="ask">Education</label></th>
            <td><textarea name="education" id="education" rows="5" cols="30">Load info here...</textarea><br />
        </tr>

    </table>

<?php }

add_action('show_user_profile', 'directoryFields'); 
```

但是如何将这些值保存到特定的数据库表中呢？我需要将它们与相应的电子邮件一起保存在另一个表中。我还需要重新加载这些值。任何方向都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:04:09.770

您将需要以下 WordPress 类：

> ### [类参考/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)
> 
> 该`$wpdb`对象可用于从 WordPress 数据库中的任何表中读取数据，而不仅仅是 WordPress 创建的标准表。
> 
> 该`$wpdb`对象可以与任意数量的表对话，但只能与一个数据库对话：WordPress 数据库。在极少数情况下，您需要连接到另一个数据库，您必须使用适当的连接详细信息从 wpdb 类实例化您自己的对象。

还要检查 Codex 的其他条目：

> ### [使用插件创建表](http://codex.wordpress.org/Creating_Tables_with_Plugins)
> 
> 如果您正在为 WordPress[编写插件](http://codex.wordpress.org/Writing_a_Plugin)，您几乎肯定会发现您需要在 WordPress 数据库中存储一些信息。

还有一篇关于自定义表的博客文章：

> ### [在 WordPress 中使用自定义数据库表](http://www.makeuseof.com/tag/working-custom-database-tables-wordpress/)
> 
> 如果您已经有一个客户信息数据库，但您希望能够查询该数据并将其显示在 WordPress 模板中怎么办？今天我将向您展示如何在 WordPress 引擎中安全地执行此操作。

# xsd - 如何将 XML 模式 (XSD) 转换为 Relax NG？

> ID：14803562
> 
> 赞同：8
> 
> 时间：2013-02-10T22:52:20.187
> 
> 标签：xsd, converter, relaxng

[Relax NG 主页](http://relaxng.org/#conversion)列出了 Sun RELAX NG 转换器，它显然能够将 XSD 文件转换为松弛文件 - 但链接已失效，有关二级来源的博客[条目](http://postneo.com/2007/01/16/all-i-want-to-do-is-convert-my-schema)似乎也已过时。

我对基于 Web 的转换器不感兴趣。

顺便说一句，我要转换的 XML 模式使用继承。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T02:44:21.050

Kohsuke Kawaguchi 的 Relax NG 转换器（又名 Sun Relax NG 转换器）目前可在[http://java.net/projects/msv](http://java.net/projects/msv)和[http://search.maven.org/#search%7Cga%7C1%7Cg%3A%获得22net.java.dev.msv%22](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22net.java.dev.msv%22)（感谢 KK 提供的信息）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T21:02:36.593

旧的 Sun RELAX NG 转换器现在与 (Sun) ['Multi-Schema Validator'](http://java.net/projects/msv) - msv 捆绑在一起。使用该术语，您可以在您的分发包存储库中进行搜索。

例如 Fedora (eg 17) 包含它。

## 在 Fedora 上安装

```
# yum install msv-rngconv msv-manual 
```

## 在 Fedora 上的使用

```
$ rngconv my.xsd > my.rng 
```

测试结果：

```
$ xmllint --relaxng my.rng --noout some.xml 
```

转换为紧凑语法：

```
$ trang -I rng -O rnc my.rng my.rnc 
```

（trang 也可以通过主要的 Fedora 软件包存储库获得）

另一种方式（可能在向紧凑语法文件添加内容之后）：

```
$ trang -I rnc -O rng my.rnc my.rng 
```

Msv 似乎非常强大——我用一个相当大的 xsd 文件对其进行了测试，该文件使用继承、扩展模式并包含另一个 xsd 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T00:50:33.980

你试过[董里](http://www.thaiopensource.com/relaxng/trang.html)吗？（我不知道它如何处理继承）

有关将 XSD 转换为 RELAXNG 的一般讨论，另请参见[xsd 到 rnc（或 rng）转换（unix 命令行） 。](https://stackoverflow.com/questions/122089/xsd-to-rnc-or-rng-conversion-unix-command-line)看起来 Sun RELAX NG 转换器的名称为 rngconv，并且仍然隐藏在某些地方：[http ://rpm.pbone.net/index.php3?stat=3&search=msv-rngconv&srodzaj=3](http://rpm.pbone.net/index.php3?stat=3&search=msv-rngconv&srodzaj=3)

# python - 类似字符串处理的 DRY 版本

> ID：14803563
> 
> 赞同：0
> 
> 时间：2013-02-10T22:52:21.283
> 
> 标签：python

执行以下操作的更有效方法是什么：

```
directors = get_element_or_none(title_node, 'Director')
producers = get_element_or_none(title_node, 'Producer')
writers = get_element_or_none(title_node, 'Writer')

if directors:
    directors = [director.strip() for director in directors.split(',')]
if producers:
    producers = [producer.strip() for producer in producers.split(',')]
if writers:
    writers = [writer.strip() for writer in writers.split(',')] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:54:49.547

要始终生成列表（可能为空）：

```
directors = [director.strip() for director in directors.split(',')] if directors else []
# etc. 
```

或使用`map(str.strip, ...)`：

```
directors = map(str.strip, directors.split(',')) if directors else [] 
```

但在 Python 3 中需要显式调用`list()`：

```
directors = list(map(str.strip, directors.split(','))) if directors else [] 
```

因为`map()`返回一个迭代器。

或使用辅助函数：

```
def tolist(commaseparated):
    return [s.strip() for s in commaseparated.split(',')] if commaseparated else []

directors = tolist(directors)
producers = tolist(producers)
writers   = tolist(writers) 
```

或者，使用地图版本：

```
def tolist(commaseparated):
    return map(str.strip, commaseparated.split(',')) if commaseparated else [] 
```

拆分和剥离操作可能会通过`get_element_or_none()`调用合并到一个函数中，但这取决于您可能使用该`tolist()`功能的其他用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:00:18.503

不是很激进，但是：

```
def clean_element(node, tag):
    elements  = get_element_or_none(node, tag)
    if elements:
        elements = [element.strip() for element in elements.split(',')]
    return elements

directors = clean_element(title_node, 'Director')
producers = clean_element(title_node, 'Producer')
writers   = clean_element(title_node, 'Writer') 
```

就像一辆有两个轮子的自行车一样激进。

```
import functools
get_them  = functools.partial(clean_element, title_node)

directors = get_them('Director')
producers = get_them('Producer')
writers   = get_them('Writer') 
```

*以重用衡量效率。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:01:02.643

如果你的意图是干的——比如不重复某些事情并引入更多出错的机会——那么这样的事情呢：

```
cast={}
for title in ('Director','Prodcer','Writer'):
    name=get_element_or_none(title_node, title)
    if name:
        cast [title]=[x.strip() for x in name.split(',')] 
```

# iteration - 如何遍历列表？

> ID：14803569
> 
> 赞同：2
> 
> 时间：2013-02-10T22:53:26.553
> 
> 标签：iteration, sml, smlnj, currying

我正在尝试学习标准毫升的新泽西州，但我不明白如何迭代列表。

我正在尝试创建一个函数，该函数接受一个值和一个函数列表，并返回另一个字符串列表，如果当前函数在给定值时返回 true。

一个函数就是这样`('a -> bool) * string`，即一对函数和一个字符串的名字。

该函数是一个柯里化函数，因此其定义为“fun itr x xs”。

我想以非递归方式执行此操作。

谁能帮我开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:55:36.453

使用递归可以很容易地编写一个自然而直接的函数。

```
fun itr x fs =
  case fs
    of [] => []
     | (f, s) :: fs' => if f x
                        then s :: itr x fs'
                        else itr x fs' 
```

或者，如果您不想在函数中显式递归，则可以使用`foldr`.

```
fun itr x fs =
  List.foldr (fn ((f, s), ss) =>
    if f x
    then s :: ss
    else ss) [] fs 
```

此外，`itr`这不是一个信息量很大的名称，因此您可能需要选择一个更好地描述您正在尝试做的事情的不同名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T18:31:06.373

因此，如果我理解正确，您希望能够像这样调用您的函数：

```
itr
    3
    [ ((fn i => i > 3), "greaterThanThree"),
      ((fn i => i mod 2 = 1), "odd"),
      ((fn i => 12 mod i = 0), "dividesTwelve")
    ] 
```

并得到类似的结果`["odd", "dividesTwelve"]`（因为`odd`和是应用到 时`dividesTwelve`返回的两个函数）。`true``3`

我有这个权利吗？

因此，我们可以从编写开始：

```
(* Given a value and a list of named Boolean functions, returns a list of the names of the
 * functions that return true for value.
 *)
fun itr value namedFunctions =
  ... 
```

既然您说您想“以非递归方式执行此操作”，我假设您的意思是您想要使用标准 ML 基础库中的列表函数，它允许您通过提供处理列表元素的函数来处理列表隔离; 当然，这些函数是使用递归实现的，但如果`itr`只是委托给它们，那么`itr`它本身就不需要递归。

鉴于这些要求，我看到了两种方法。

* * *

一种方法是首先使用`List.filter`（[请参阅`List.filter`此处的文档](http://sml-family.org/Basis/list.html#SIG:LIST.filter:VAL)）在调用时仅获取`namedFunctions`该返回的元素。为此，我们需要一个函数，它接受一个命名函数（a ，其中是 的类型）并在命名函数返回时返回；那是：`true``value``('a -> bool) * string``'a``value``true``true`

```
(* A function that, given a named Boolean function, returns whether it returns true for
 * value.
 *)
fn (f, _) => f value 
```

这让我们可以`List.filter`这样调用：

```
(* A list of the elements of namedFunctions that return true for value. *)
List.filter (fn (f, _) => f value) namedFunctions 
```

一旦我们有了它，我们需要使用`List.map`（[参见`List.map`此处的文档](http://sml-family.org/Basis/list.html#SIG:LIST.map:VAL)）来获取每个函数的名称：

```
(* A list of the names in namedFunctions that return true for value. *)
List.map #2 (List.filter (fn (f, _) => f value) namedFunctions) 
```

（其中`#2`是提取`2`元组或记录的组件的函数；在命名函数的情况下，`#2 namedFunction`是名称）。

把它放在一起：

```
(* Given a value and a list of named Boolean functions, returns a list of the names of the
 * functions that return true for value.
 *)
fun itr value namedFunctions =
  List.map #2 (List.filter (fn (f, _) => f value) namedFunctions) 
```

* * *

另一种方法是通过使用将过滤和映射组合成一个步骤`List.mapPartial`（请参阅[`List.mapPartial`此处的文档](http://sml-family.org/Basis/list.html#SIG:LIST.mapPartial:VAL)）。不是首先使用一个接受命名函数并返回布尔值的函数来选择我们想要的元素，然后使用一个接受命名函数并返回其名称的函数将它们转换为我们想要的形式，我们可以组合逐步使用一个函数，该函数接受一个命名函数并*仅在我们需要时才*返回其名称。

在标准 ML 中，当我们想要表示一个并不总是存在的值时，我们使用`option`; 例如，`string option`表示“要么是一个字符串，要么什么都没有”（[请参阅`Option.option`​​此处](http://sml-family.org/Basis/option.html#SIG:OPTION.option:TY)的文档；请注意，虽然它被记录为`Option.option`，但它也可以作为 just 使用`option`）。所以，这里有一个函数，它接受一个命名函数，并且只有当它返回 true 时才返回它的名字`value`：

```
(* A function that, given a named Boolean function, returns its name if it returns true
 * for value, and nothing if it returns false.
 *)
fn (f, name) => if f value then SOME name else NONE 
```

这样的函数称为“部分函数”——它仅返回其域的*一部分*的值——我们可以使用`List.mapPartial`它仅在它返回一个的情况下检索它的结果：

```
(* Given a value and a list of named Boolean functions, returns a list of the names of the
 * functions that return true for value.
 *)
fun itr value namedFunctions =
  List.mapPartial (fn (f, name) => if f value then SOME name else NONE) namedFunctions 
```

通常，任何时候您想应用`List.map`到结果`List.filter`或反之亦然，您都可以使用`List.mapPartial`. （然而，在任何给定的情况下，这样做可能是一个好主意，也可能不是一个好主意。我建议哪个更清楚。）

# c++ - C++ 中的非类类型错误

> ID：14803570
> 
> 赞同：0
> 
> 时间：2013-02-10T22:53:37.720
> 
> 标签：c++, compiler-errors, g++, non-type

我需要一些关于我正在开发的 C++ 程序的帮助。

我正在上操作系统课程，所以我们最初的几周是 C 编程速成课程，但现在我们应该将 C 程序升级到 C++。我的教授向我们展示了一些示例代码，并向我们展示了一些教程，但他们只让我到目前为止。

我们正在使用一个头文件、一个 .cpp 文件来实现这些功能，以及一个测试文件（这是我的错误的来源。

```
//dll.h

#ifndef _DLL_H
#define _DLL_H
using namespace std;
#include <iostream>
#include <string>

class dll{
public:
typedef struct _Node
{

    struct _Node *pNode;
    struct _Node *nNode;
    int nodeValue;

}sNode;

typedef struct
{

    sNode first; 

}DLList;

dll();
~dll();
void init(DLList *DLL,int d);
void sort(DLList *DLL);
void print(DLList *DLL);

};

#endif 
```

主 .cpp 文件：

```
//dll.cpp

using namespace std; 
#include <iostream>
#include <string>
#include <stdio.h>
#include <cstdlib>
#include "dll.h"

dll::dll(){

    cout<<"Constructor called"<<endl;

}

dll::~dll(){

    cout<<"Destructor called"<<endl;

}

void dll::init(DLList *DLL, int d)
{

    sNode *node;    
    sNode *pNode;
    pNode = &(DLL-> first);
    pNode->pNode = NULL;
    int i;
    for(i=0; i<d; i++)
    {

            node = (sNode*) malloc(sizeof(node));
            node-> nodeValue = rand();
            node-> pNode = pNode;
            node-> nNode = NULL;
            pNode-> nNode = node;
            pNode = node;

    }

}

void dll::print(DLList *DLL)
{

    int i= 1;
    sNode *nNode = DLL-> first.nNode;   
    while(nNode != NULL)

    {

            cout<<("%d.  %d\n",i,nNode-> nodeValue);
            cout<<("");
            nNode = nNode-> nNode;
            i++;

    }

}

void dll::sort(DLList *DLL)
{

    int change = 1;
    while(change== 1)

    {

            change = 0;     
            sNode *current = DLL-> first.nNode;
            while(current-> nNode != NULL)

            {

                    if(current-> nodeValue > current-> nNode-> nodeValue)
                    {

                            int temp = current-> nodeValue;
                            current-> nodeValue = current-> nNode-> nodeValue;
                            current-> nNode-> nodeValue = temp;
                            change = 1;

                    }

                    current = current-> nNode;
            }

    }

    } 
```

现在是测试文件，这是我的错误不断弹出的地方：

```
//testDLL.cpp

using namespace std; 
#include <iostream>
#include <string>
#include <stdio.h>
#include <cstdlib>
#include "dll.h"

int main()
{

    cout<<("Doubly Linked List before sorting: \n");    
    dll::DLList DLL;
    dll *test =  new dll();
    test.dll::init(&DLL,5);
    test.dll::print(&DLL);
    test.dll::sort(&DLL);
    cout<<("\nDoubly Linked List after sorting: \n");
    test.dll::print(&DLL);
    return 0;
} 
```

由于现在编写程序，每次我尝试编译时都会遇到这个问题（在 linux 命令行上使用 g++）：

```
testDLL.cpp: In function ‘int main()’:
testDLL.cpp:17:7: error: request for member ‘init’ in ‘test’, which is of non-class type ‘dll*’
testDLL.cpp:19:12: error: request for member ‘dll:: print’ in ‘test’, which is of non-class type ‘dll*’
testDLL.cpp:21:12: error: request for member ‘dll:: sort’ in ‘test’, which is of non-class type ‘dll*’
testDLL.cpp:25:12: error: request for member ‘dll:: print’ in ‘test’, which is of non-class type ‘dll*’ 
```

我完全被这个难住了，所以你们能给我的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:14:48.447

如果您将`dll`其用作指针，则声明是正确的。

```
dll* test = new dll(); 
```

如果您将`dll`其用作对象，则声明应为：

```
dll test; 
```

这将导致构造函数和析构函数自动调用。

如果您使用`dll`指针作为调用`init`应该是（您不必检查 NULL，但这将有助于防止您的程序崩溃）：

```
if (dll != NULL) {
    dll->init(&DLL, 5);
} 
```

如果您将`dll`其用作对象，则调用`init`应该是：

```
 dll.init(&DLL, 5); 
```

# c++ - 多次调用访问器方法或声明临时变量是否更有效？

> ID：14803582
> 
> 赞同：0
> 
> 时间：2013-02-10T22:55:12.387
> 
> 标签：c++, variables, accessor

假设我有一些代码多次调用诸如 vector::length() 之类的方法...确实创建了一个临时变量，例如

```
int length=myVector.length() 
```

使其比多次调用该方法更有效？

这是一个有点假设的问题，所以让我们假设调用 vector::length() 是获得我们想要的结果的唯一方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:05:27.610

将值存储在局部变量中的成本几乎为零。调用内联的“获取此成员变量”的成本也几乎为零。

另一方面，如果对象不是向量，`length`也不保存在成员变量中，但必须进行计数 - 比如说 like `strlen()`，那么将其存储在局部变量中会有很大的好处。特别是如果字符串的长度超过几个字符。

另一个问题当然是您执行以下操作：

```
int number_of_widgets = my_widgets.length();
...   // more code here, but none that affect my_widgets. 

last_widget = my_widgets[number_of_widgets-1]; 
... 
```

然后其他人去编辑 cdoe：

```
int number_of_widgets = my_widgets.length();
... some code.
my_widgets.erase(some_widget_iterator);

...   // more code here

last_widget = my_widgets[number_of_widgets-1]; 
... 
```

现在您的代码正在访问有效范围之外，可能会崩溃和烧毁......

一如既往，魔鬼在细节中。如果您想知道您的代码中最快的是什么，请使用您的代码对其进行基准测试...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T23:02:58.807

在这种情况下你不需要担心速度，直接调用length()会很快。为了可读性，除非您真的多次调用它，否则我会说 - 直接调用它。如果它确实使代码难看，例如在 10 行上调用 10 次，那么您可以将其缓存在一个变量中以使代码看起来更好。

优化规则 1：不要优化。反正很快。我认为 vector::length() 不会减慢您的程序，但无论如何，只要您没有速度问题，就没有充分的理由尝试手动优化它。如果相关，智能编译器应该决定并优化它。

在 IDE 上，您有代码完成功能，因此甚至不是输入更多内容的问题，只是代码的视觉可读性（同样，除非这个特定功能会减慢程序速度，我对此表示怀疑）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T22:58:27.690

唯一可以确定的方法是分析您的代码。

就个人而言，如果我知道向量在当前范围内不会改变，我会首先优化可读性，并在*需要时根据*[分析](https://stackoverflow.com/questions/tagged/profiling) 进行任何调整：

 *```
const int number_of_widgets = myVector.size(); 
```

> “我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源”——Donald Knuth

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T23:01:47.513

真正的答案是，如果可以的话，你应该使用**迭代器**，因为它们通常更快，并且它们完全避免了这个问题（假设向量没有重新分配）。

您可能正在寻找的答案是：它通常在简单的情况下被优化掉，但并非总是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T23:20:12.300

我会假设它们都将被编译为相同的代码。但是假设不好，所以我尝试了一个测试程序。我首先编译：

```
#include <iostream>
#include <vector>

int main()
{
    int myints[] = {16,2,77,29};
    std::vector<int> myVector (myints, myints + sizeof(myints) / sizeof(int) );
    int length=myVector.size();
    std::cout << length << std::endl;
    std::cout << length*3 << std::endl;
    return 0;
} 
```

这正确地给出了 4 和 12 的输出。然后我尝试了这个程序，我不使用变量“长度”。

```
#include <iostream>
#include <vector>

int main()
{
    int myints[] = {16,2,77,29};
    std::vector<int> myVector (myints, myints + sizeof(myints) / sizeof(int) );
    std::cout << myVector.size() << std::endl;
    std::cout << myVector.size()*3 << std::endl;
    return 0;
} 
```

该程序还正确地给出了 4 和 12 的输出，并且做了完全相同的事情，但两者之间没有可变长度。我可以声明，使用编译标志 -O3 或 -O2 它们会给出完全相同的二进制代码。这是使用 gcc 编译器完成的。因此，这两种方法都不是更快，而且它们都使用相同数量的内存。

因此，只需使用看起来最好且最容易阅读的那个。

虽然我不确定我们是否可以从我的测试中完全概括，因为可能还有其他优化在起作用。例如，myVector.size() 可能在编译时计算为 4，因此可能已经硬编码到文件中，而不是在运行时计算出来。这将使我的测试毫无意义。

希望这可以帮助。（虽然我在写这篇文章时可以看到其他 4 个答案）所以其他人可能已经在测试这个方面做得更好。*

# jasmine - 使用 grunt-contrib-jasmine 插件将 jQuery 加载到 Grunt.js

> ID：14803583
> 
> 赞同：2
> 
> 时间：2013-02-10T22:55:24.507
> 
> 标签：jasmine, gruntjs

我正在尝试使用 Grunt.js 和 grunt-contrib-jasmine 插件将 jQuery 加载到我的测试中。这是我的 Gruntfile.js 的要点，我在 jasmine.options.vendor 数组中引用了 jQuery，正如[文档](https://npmjs.org/package/grunt-contrib-jasmine)所建议的那样。

[https://gist.github.com/anonymous/4751371](https://gist.github.com/anonymous/4751371)

但是，当我运行一个非常简单的测试时，它失败了，因为 jQuery 没有被加载：

```
describe('like module', function() {
    var $ul;

    beforeEach(function() {
        $ul = $('<ul><li class="no-results"></li></ul>');
    });

    it('should test the value of some numbers', function() {
        expect(9).toEqual(9);
    });

}); 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-04T10:15:42.633

我有同样的问题。在看到@ludder 的链接后，我将 Jasmine 任务配置更改为：

```
jasmine: {
  src: ['./someFile.js'],
    options: {
      specs: 'test/*Spec.js',
      keepRunner : false,
      vendor: 'http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'
    }
  } 
```

关键是用`http`而**不是** `https`。

测试现在正在通过。

# c - 为什么在反转字符串时不使用指针指针？

> ID：14803585
> 
> 赞同：0
> 
> 时间：2013-02-10T22:55:44.180
> 
> 标签：c, function, pointers, scope

我看过这段代码：

```
void reverse_string(char *str)
{
    /* skip null */
    if (str == 0)
    {
        return;
    }

    /* skip empty string */
    if (*str == 0)
    {
        return;
    }

    /* get range */
    char *start = str;
    char *end = start + strlen(str) - 1; /* -1 for \0 */
    char temp;

    /* reverse */
    while (end > start)
    {
        /* swap */
        temp = *start;
        *start = *end;
        *end = temp;

        /* move */
        ++start;
        --end;
    }
} 
```

而且我不明白为什么函数中没有传递指向指针的指针。如果在函数内部制作了传递的指针的副本，那么如何反转它呢？变化是如何向外传播的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:57:56.330

> 如果在函数内部制作了传递的指针的副本，那么如何反转它呢？变化是如何传播到外部的

它之所以有效，是因为您正在更改**该指针指向的内存**。所以在函数结束后，指针仍然指向它以前的位置，但是内容（字符的顺序）已经改变了。换句话说，没有必要改变地址`str`指向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:58:12.180

数组的内存内容`char *`被原地修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:58:19.547

字符串被反转到位。也就是说，指向字符串的指针保持不变，但它指向的字符串是相反的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T22:59:04.033

看一下 while 循环，您会看到字符串在原地反转。

```
 while (end > start)
    {
        /* swap */
        temp = *start;
        *start = *end;
        *end = temp;

        /* move */
        ++start;
        --end;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T23:01:39.060

反转字符串**不是对指针的操作**。这是**对指针指向**的数据的操作。这就是指针本身可以按值传递给函数的原因，即在函数内部，它实际上是传递给函数的指针的副本——没关系，因为不需要修改指针，只需修改指向的数据。

# java - 没有调用 Repaint()

> ID：14803590
> 
> 赞同：1
> 
> 时间：2013-02-10T22:57:02.820
> 
> 标签：java, swing, paint, repaint

最近我一直在研究一个用空的彩色方块绘制区域的程序。它们在屏幕上的位置基于文本文件中的值 1 和 2。1s 应该制作红色盒子，2s 应该制作绿色盒子。但是，当我运行程序时，只绘制了红色框。我做了一些测试，发现 repaint 方法只被调用了两次（有时出于某种原因一次），即使文件中有接近 300 个值，并且`repaint()`应该为每个值调用一次。这是我的代码：

```
public class MAP extends JFrame {

    public static void main(String[] args) throws IOException {
        MAP map = new MAP();
    }

    Shape shape;
    int x = -32;
    int y = 0;
    ArrayList<Shape> shapes = new ArrayList<Shape>();
    Graphics2D g2;
    Color coulor = null;

    private class PaintSurface extends JComponent {

        public PaintSurface() {
        }

        public void paint(Graphics g) {
            g2 = (Graphics2D) g;
            g2.setColor(coulor);
            for (Shape s : shapes) {
                g2.draw(s);
            }

        }
    }

    public MAP() throws FileNotFoundException, IOException {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        frame.add(panel);
        frame.setTitle("Grid Maker");
        frame.setSize(400, 200);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.add(new PaintSurface(), BorderLayout.CENTER);
        frame.setVisible(true);

        readNextLine();
    }

    private void readNextLine() throws IOException {
        File file = new File("map.txt");
        BufferedReader in = new BufferedReader(new FileReader(file));
        String line = in.readLine();

        while (line != null) {
            for (int i = 0; i < line.length(); i++) {
                char c = line.charAt(i);
                if (c == '1') {
                    coulor = Color.RED;
                    x += 32;
                    int smallX = x / 32;
                    int smallY = y / 32;
                    shape = new Rectangle2D.Float(x, y, 32, 32);
                    shapes.add(shape);
                    repaint();
                } else if (c == '2') {
                    coulor = Color.GREEN;
                    x += 32;
                    int smallX = x / 32;
                    int smallY = y / 32;
                    shape = new Rectangle2D.Float(x, y, 32, 32);
                    shapes.add(shape);
                    repaint();

                }
            }

            line = in.readLine();
            x = -32;
            y += 32;
        }
    }
} 
```

为什么这段代码不能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:49:40.280

绘画是短暂的，或无状态的。

`repaint`是向重绘管理器发出的“请求”，告诉它应该在未来的某个时间，当它准备好时，它应该绘制它认为是脏的屏幕的某些部分。

这意味着当你调用`g2.setColor(coulor)`你的`paint`方法时，它使用的是它设置为的 LAST 值（当`paint`被调用时）......这可能是`RED`.

Raufio 是对的，您应该提供颜色信息以及形状。就个人而言，我会设置一个`List`只包含`Color`对象的第二个，其中列表的每个索引都`Shape`直接对应`Color`于`Color` `List`.

查看[在 AWT 和 Swing](http://www.oracle.com/technetwork/java/painting-140037.html)中的绘画，了解更多关于如何在 Swing 中进行绘画的详细信息。

现在，到发牢骚的部分；）

不建议覆盖`paint`. 这有很多原因，`paint`负责调用一些重要的方法，包括`paintChildren`and `paintComponent`，它们执行非常重要的任务。

相反，您应该覆盖`paintComponent`（并确保您调用`super.paintComponent`）

查看[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)以获取更多详细信息。

**用粗略的例子更新**

所以这是我所说的一个粗略的例子......

![在此处输入图像描述](../Images/c9098b5b61b5f5f48a81a6f892998d2a.png)

```
public class TestPainting {

    public static void main(String[] args) {
        new TestPainting();
    }

    public TestPainting() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new PaintingPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintingPane extends JPanel {

        private static final int WIDTH = 200;
        private static final int HEIGHT = 200;

        private List<Shape> shapes;
        private List<Color> colors;

        public PaintingPane() {
            shapes = new ArrayList<>(25);
            colors = new ArrayList<>(25);

            for (int index = 0; index < (int) Math.round(Math.random() * 100); index++) {

                int x = (int) Math.round(Math.random() * (WIDTH * 0.75f));
                int y = (int) Math.round(Math.random() * (HEIGHT * 0.75f));
                int width = (int) Math.round(Math.random() * (WIDTH * 0.25f));
                int height = (int) Math.round(Math.random() * (HEIGHT * 0.25f));

                if (width < 5) {
                    width = 5;
                }
                if (height < 5) {
                    height = 5;
                }

                if (x + width > WIDTH) {
                    x -= width - WIDTH;
                }
                if (y + height > HEIGHT) {
                    y -= height - HEIGHT;
                }
                if (x < 0) {
                    x = 0;
                }
                if (y < 0) {
                    y = 0;
                }

                Color color = ((int)Math.round(Math.random() * 2)) == 1 ? Color.RED : Color.GREEN;

                shapes.add(new Rectangle(x, y, width, height));
                colors.add(color);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(WIDTH, HEIGHT);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            for (int index = 0; index < shapes.size(); index++) {
                g2d.setColor(colors.get(index));
                g2d.draw(shapes.get(index));
            }
            g2d.dispose();

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T23:52:40.280

只是为了添加其他答案，这里有一段代码（基于你的），看起来已经好多了（但仍然存在一些问题，但你还没有）：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Shape;
import java.awt.geom.Rectangle2D;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JComponent;
import javax.swing.JFrame;

public class MAP extends JFrame {

    public static void main(String[] args) throws IOException {
        MAP map = new MAP();
    }

    public static class ColoredShape {
        private Shape shape;
        private Color color;

        public ColoredShape(Shape shape, Color color) {
            super();
            this.shape = shape;
            this.color = color;
        }

        public Shape getShape() {
            return shape;
        }

        public Color getColor() {
            return color;
        }
    }

    int x = -32;
    int y = 0;
    List<ColoredShape> shapes = new ArrayList<ColoredShape>();
    Graphics2D g2;

    private class PaintSurface extends JComponent {

        public PaintSurface() {
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g2 = (Graphics2D) g;
            for (ColoredShape s : shapes) {
                g2.setColor(s.getColor());
                g2.draw(s.getShape());
            }

        }
    }

    public MAP() throws FileNotFoundException, IOException {
        JFrame frame = new JFrame();
        frame.setTitle("Grid Maker");
        frame.setSize(400, 400);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.add(new PaintSurface(), BorderLayout.CENTER);
        frame.setVisible(true);

        readNextLine();
    }

    private void readNextLine() throws IOException {
        BufferedReader in = new BufferedReader(new StringReader("11121\n1221\n2212\n221121\n111221\n11221\n222\n2222\n"));
        String line = in.readLine();

        while (line != null) {
            for (int i = 0; i < line.length(); i++) {
                char c = line.charAt(i);
                Color color = null;
                if (c == '1') {
                    color = Color.RED;
                } else if (c == '2') {
                    color = Color.GREEN;
                }
                if (color != null) {
                    shapes.add(new ColoredShape(new Rectangle2D.Float(x, y, 32, 32), color));
                    x += 32;
                    repaint();
                }
            }

            line = in.readLine();
            x = -32;
            y += 32;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:08:42.733

我看到的第一件事是您一次只能为形状着色一种颜色。所以在这里：

```
public void paint(Graphics g) {
    g2 = (Graphics2D) g;
    g2.setColor(coulor);        //set the drawing color
    for (Shape s : shapes) {
         g2.draw(s);            //draw in that color
    }
} 
```

当您想为它们着色时，您所有的形状都以相同的颜色绘制。我认为更好的方法是将所有形状添加到列表中，跟踪它们的颜色，然后调用`repaint()`一次。另外，我会将paint方法更改为以下效果：

```
public void paint(Graphics g) {
    g2 = (Graphics2D) g;
    for (Shape s : shapes) {
         g2.setColor(coulor[indexOfShape]);   //set the drawing color
         g2.draw(s);            //draw in that color
    }
} 
```

此外，`repaint`只被调用两次：它可能是抛出一个`IOException`. 尝试使用`try {...} catch(IOException e) {...}`块而不是仅仅将其扔到线上。就像是：

```
private void readNextLine() {
    try {
       File file = new File("map.txt");
       BufferedReader in = new BufferedReader(new FileReader(file));
       String line = in.readLine();
       ...
       ...
    } catch (IOException e) {
       e.printStackTrace();
    }
} 
```

如果阅读不正确，它应该抱怨一些事情。

# arrays - 从这些标题的数组中按列标题对 excel 矩阵进行排序

> ID：14803591
> 
> 赞同：0
> 
> 时间：2013-02-10T22:57:05.083
> 
> 标签：arrays, excel, matrix

我觉得这应该是您可以在 excel 中轻松完成的事情，但我似乎无法弄清楚如何去做。我想做的是按名称对值矩阵进行排序，但不是按字母顺序或按值或任何东西，而是按另一行名称。例如：

```
Headers    A B C
Val1       1 2 3
Val2       4 5 6

sorted_headers C B A 
```

我希望矩阵是：

```
Headers    C B A
Val1       3 2 1
Val2       6 5 4 
```

基于另一行“sorted_headers”，我知道我可以编写一些程序来做到这一点，但这似乎是你应该能够在没有一行 VBA 的情况下完成的事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:02:50.920

当您从功能区中选择排序时或在选择排序范围的情况下右键单击后，选择自定义排序，选择选项，然后将排序设置为从左到右。然后设置要使用的排序行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:53:35.100

你可以：

1.  在您的表中添加一个额外的行，它使用 MATCH() 来获取每个标题在“排序”列表中的位置

2.  使用常规 Excel 排序功能在该行上从左到右排序

# haskell - Haskell 迷你函数实现

> ID：14803593
> 
> 赞同：4
> 
> 时间：2013-02-10T22:57:20.900
> 
> 标签：haskell

我一直在尝试使用这个函数并使用 iterate 和 takeWhile 进行小实现。它不一定要使用那些功能，我只是想把它变成一条线。我可以看到其中的模式，但如果不制作相同的代码，我似乎无法利用它，只需使用迭代而不是递归。

```
fun2 :: Integer -> Integer
fun2 1 = 0
fun2 n 
    | even n = n + fun2 (n `div` 2)
    | otherwise = fun2 (3 * n + 1) 
```

任何帮助都会很棒。我已经为此苦苦挣扎了好几个小时。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T02:04:00.900

如果你想用 来做到这一点`iterate`，关键是将它分成更小的逻辑部分：

*   使用规则生成序列

    a [k+1] = a [k] /2 如果 a [k]偶数

    a [k+1] = 3a [k] +1 如果[k]奇数

*   [在j] = 1处停止序列（如果[collat​​z 猜想](http://en.wikipedia.org/wiki/Collatz_conjecture)为真，所有这些都可以）。

*   过滤掉路径上的偶数元素
*   总结他们

那么这就变成了：

```
 f = sum . filter even . takeWhile (>1) . iterate (\n -> if even n then n `div` 2 else 3*n + 1) 
```

但是，我确实认为使用辅助功能会更清楚

```
 f = sum . filter even . takeWhile (>1) . iterate collatz
    where collatz n | even n    = n `div` 2
                    | otherwise = 3*n + 1 
```

这可能不会为您节省任何行，但会将您的递归转换为数据的生成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T00:08:16.443

首先，我同意汤姆的评论，即您的四行版本没有任何问题。它完全可读。然而，偶尔将 Haskell 函数变成一个内衬是一种有趣的练习。谁知道，你可能会学到一些东西！

此刻你有

```
fun 1 = 0
fun n | even n    = n + fun (n `div` 2)
      | otherwise = fun (3 * n + 1) 
```

您始终可以将使用警卫的表达式转换为`if`

```
fun 1 = 0
fun n = if even n then n + fun (n `div` 2) else fun (3 * n + 1) 
```

您始终可以将一系列模式匹配转换为 case 表达式：

```
fun n = case n of
            1 -> 0
            _ -> if even n then n + fun (n `div` 2) else fun (3 * n + 1) 
```

最后，您可以将 case 表达式转换为`if`s 链（实际上，通常这需要一个`Eq`实例作为函数的参数，但由于您使用的是`Integer`s ，所以没关系）。

```
fun n = if n == 1 then 0 else if even n then n + fun (n `div` 2) else fun (3 * n + 1) 
```

我想你会同意这比你开始的可读性要差得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T00:09:53.657

一个班轮；）

```
fun2 n = if n==1 then 0 else if even n then n + fun2 (n `div` 2) else fun2 (3 * n + 1) 
```

我的感觉是缺少查找表，如果没有递归，这个函数就无法实现，因为递归中传递的参数似乎不可预测（n 为 2 的幂除外）。

另一方面，rampion 帮助我学习了一些新东西。

# vi - 如何使用 ex 命令在 vi 中使用大写字母缩进每一行？

> ID：14803595
> 
> 赞同：0
> 
> 时间：2013-02-10T22:57:25.160
> 
> 标签：vi

如何使用 ex 命令在 vi 中使用大写字母缩进每一行？我使用的具体版本是 elvis。我需要为作业做这个。我已经搜索了帮助，但仍在试图弄清楚如何导航它。我以美国宪法为例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:06:02.233

您可以同时使用全局命令和替换命令：

```
:g/^[A-Z]/s/^/^I/ 
```

在这里，`^I`使用 [Control-V][TAB] 获得。

# javascript - 我正在尝试在 xPage 的按钮中调试一些 Javascript。有没有办法做到这一点？

> ID：14803596
> 
> 赞同：-1
> 
> 时间：2013-02-10T22:57:25.270
> 
> 标签：javascript, debugging, xpages

我在 xPage 上有一个按钮，它正在调用 jsLibrary 中的一些代码并且行为不正确。如果可能的话，我很想通过调试器。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T07:37:27.623

如果您需要调试服务器端 javascript，您必须使用称为 print 语句的 poormans 调试器（在 Notes 9.0 中，您将能够调试 ssjs）。

当您需要调试 CLIENTside javascript 时。您可以使用浏览器可用的工具。

*   firefox > Firebug（使用 f12 键）
*   IE > 开发工具栏（使用 f12 键）
*   Chrome > 开发者工具栏（使用 f12）键）

# java - 如何为 Java 应用程序设置工作目录？

> ID：14803597
> 
> 赞同：1
> 
> 时间：2013-02-10T22:57:38.800
> 
> 标签：java, filesystems

我用以下代码编写了一个简单的 java 应用程序：

```
String currentDir = new java.io.File(".").getCanonicalPath();
javax.swing.JOptionPane.showMessageDialog(null, currentDir); //This line shows a graphical dialog with the current dir 
```

当我通过终端运行它时，它会为我提供 jar 文件所在的目录。但是当我使用 GUI 文件管理器运行它时（即右键单击 jar 文件 -> 打开方式 -> OpenJDK Java 7 运行时） - 工作目录是我的用户主目录（/home/angstrem）。如何将工作目录设置为 jar 文件所在的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:05:00.363

你可以这样做：

```
String jarPath = YourClass.class.getProtectionDomain().getCodeSource().getLocation().getPath(); 
```

替换`YourClass`为您的 jar 中定义的实际类。

然后，您可以使您的文件路径相对于`jarPath`，并且您的程序无论其工作目录如何都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:08:06.837

你不能，也不应该能。例如考虑多线程。您只能使您的应用程序对当前路径不敏感。

# c++ - OSX pthreads：cthread_set_errno_self segfault

> ID：14803603
> 
> 赞同：0
> 
> 时间：2013-02-10T22:58:37.433
> 
> 标签：c++, macos, pthreads, segmentation-fault

我时不时地遇到一个小问题，我的程序在创建新线程后立即出现段错误。

新线程有一个回溯，如：

```
Thread 24 Crashed:
0   libsystem_c.dylib                   0x00007fff8ea3c358 _spin_lock$VARIANT$mp + 8
1   libsystem_c.dylib                   0x00007fff8e9e9f25 _pthread_exit + 55
2   libsystem_c.dylib                   0x00007fff8e9ea27d pthread_exit + 30
3   libsystem_c.dylib                   0x00007fff8e9a022b cthread_set_errno_self + 76
4   libsystem_kernel.dylib              0x00007fff87cd701d cerror + 33
5   libsystem_c.dylib                   0x00007fff8e9e88bf _pthread_start + 335
6   libsystem_c.dylib                   0x00007fff8e9ebb75 thread_start + 13 
```

崩溃时CPU的状态如下：

```
Thread 24 crashed with X86 Thread State (64-bit):
  rax: 0x0000000000000000  rbx: 0x0000000000000001  rcx: 0x00007fff87cd55ba  rdx: 0x00000000ffffffff
  rdi: 0x0000000101f0e010  rsi: 0x0000000000000001  rbp: 0x0000000101f0de70  rsp: 0x0000000101f0de08
   r8: 0x0000000101f0e010   r9: 0x0000000000000001  r10: 0x00007fff87cd5ca6  r11: 0x0000000000000202
  r12: 0x0000000000000032  r13: 0x0000000101f0e000  r14: 0x0000000101f0e000  r15: 0x0000000007010101
  rip: 0x00007fff8ea3c358  rfl: 0x0000000000010286  cr2: 0x0000000101f0e010
Logical CPU: 0 
```

`cr2`==`rdi`和`r8`; 在没有看到这些实际代码的情况下，我只能冒险猜测为什么这个地址无效。

这似乎是一个问题`errno`，哪个（AFAIK）是线程本地存储？

这可能是由于程序中其他地方的堆或其他内存损坏造成的吗？这个特殊问题非常难以重现，但如果可能的话，解决这个问题会很棒。

# perl - perl 在查询后向数组添加虚拟元素

> ID：14803604
> 
> 赞同：6
> 
> 时间：2013-02-10T22:58:42.923
> 
> 标签：perl

正如标题所说，perl 在查询到不存在的元素后将虚拟元素添加到数组中。查询后数组大小增加。行为说明：

```
 my $rarr;
    $rarr->[0][0] = 'S';
    $rarr->[0][1] = 'MD';
    $rarr->[1][0] = 'S';
    $rarr->[1][1] = 'PRP';

    my $crulesref;
    $crulesref->[0]  = $rarr;

     check_rule('aa', 0);
     if($rarr->[3][0] == 'M'){  # just check a not existing element
        print "m\n";   
     }

     check_rule('bb', 0);
     if($rarr->[5][0] == 'M'){  # again: just check a not existing element
        print "m\n";
     }
     check_rule('cc', 0);

     sub check_rule($$)
     {
         my ($strg,$ix) = @_;
         my $aref = $crulesref->[$ix];
         my $rule_size = @$aref;
         {print "-----$strg aref:$aref rs:$rule_size aref:'@$aref'\n";
           for(my $t1 = 0; $t1 <$rule_size; $t1++){
             print "t1:$t1 0:$aref->[$t1][0] 1:$aref->[$t1][1]\n";
           }
         }
       } 
```

运行的结果是：

```
 en@en-desktop ~/dtest/perl/forditas/utf8_v1/forditas/test1 $ perl v15.pl
    -----aa aref:ARRAY(0x90ed8c8) rs:2 aref:'ARRAY(0x9106cac) ARRAY(0x9106d24)'
    t1:0 0:S 1:MD
    t1:1 0:S 1:PRP
    m                     <-------------- finds the non existing
    -----bb aref:ARRAY(0x90ed8c8) rs:4 aref:'ARRAY(0x9106cac) ARRAY(0x9106d24)          ARRAY(0x9107508)'
    t1:0 0:S 1:MD
    t1:1 0:S 1:PRP
    t1:2 0: 1:               <-- undesired dummy due to inquiry
    t1:3 0: 1:               <-- undesired dummy due to inquiry
    m                      <-------------- finds the non existing
    -----cc aref:ARRAY(0x90ed8c8) rs:6 aref:'ARRAY(0x9106cac) ARRAY(0x9106d24) ARRAY(0x9107904) ARRAY(0x9107508)  ARRAY(0x910e860)'
    t1:0 0:S 1:MD
    t1:1 0:S 1:PRP
    t1:2 0: 1:               <-- undesired dummy due to inquiry
    t1:3 0: 1:               <-- undesired dummy due to inquiry
    t1:4 0: 1:               <-- undesired dummy due to inquiry
    t1:5 0: 1:               <-- undesired dummy due to inquiry 
```

如果被询问的元素存在，除了在每次询问之前询问之外，没有其他方法可以避免这种情况吗？我尝试提高速度，但这些查询会减慢代码速度，并使其不易阅读。

提前感谢有用的提示。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T23:21:34.123

这是你看到的[自动复活。](http://en.wikipedia.org/wiki/Autovivification)如果您`$ref->[3][0]`仅通过检查即可访问内存：

```
if ($ref->[3][0] eq 'M' ) 
```

然后首先`$ref->[3]`必须存在，然后才能检查其元素编号为零，因此它是通过自动生存创建的。您需要首先检查是否`$ref->[3]`存在或已定义以避免创建它。

```
if (defined($ref->[3]) && $ref->[3][0] eq 'M') 
```

此外，您应该始终使用：

```
use strict;
use warnings; 
```

然后你会看到警告

```
Argument "M" isn't numeric in numeric eq (==) at ...
Use of uninitialized value in numeric eq (==) at ... 
```

if 子句在这里给出了误报，因为字符串`'M'`被转换为数字 ( `0`)，因为数字相等运算符强加的上下文`==`。LHS 值为`undef`，它也被转换为数字 ( `0`)，这就是表达式计算结果为 true 的原因。

# 3d - 无法从 tut 代码中理解光线投射数学

> ID：14803608
> 
> 赞同：-1
> 
> 时间：2013-02-10T22:59:05.910
> 
> 标签：3d, raycasting

提前原谅我对数学的无知。我没有找到任何可以帮助我的资源，否则我不会打开这个话题

我想用javascript创建一个简单的光线投射引擎，我处理了瓷砖系统并不难，而且我过去有过这方面的经验。

我的资料来源[http://www.permadi.com/tutorial/raycast/index.html](http://www.permadi.com/tutorial/raycast/index.html) 和 [http://dev.opera.com/articles/view/creating-pseudo-3d-games-with-html-5-can- 1/](http://dev.opera.com/articles/view/creating-pseudo-3d-games-with-html-5-can-1/)

我的问题是理解大部分数学，我理解他使用的一些三角函数（在第二个链接中），但我不理解他大部分的光线投射植入。

像这一行： `// where on the screen does ray go through?`

```
 `var rayScreenPos = (-numRays/2 + i) * stripWidth;` 
```

pos什么的？xy坐标？屏幕上的lins？

`castSingleRay`我了解一些数学，但不了解他所说的倾斜或“垂直地图/墙线”。

我需要学习什么才能理解它？数学或编程有哪些主题？我可以下载任何好书或在线资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:00:53.037

理解基本光线投射的最佳方式就是阅读[那篇很棒的文章](http://www.permadi.com/tutorial/raycast/index.html)。

无论如何，您正在谈论的方程式来自[第 3 步找到墙壁](http://www.permadi.com/tutorial/raycast/rayc6.html#FINDING%20WALLS)。正如[关于FOV](http://www.permadi.com/tutorial/raycast/rayc5.html)（视野）的部分解释，结果图像可能被分成垂直部分（在opera教程中称为strips），其大小可能以px为单位（opera教程使用4px宽度）。

然后，您试图找出`x`屏幕上的哪个坐标是您当前的 px 条带（您当前用于光线投射计算的条带）。这就是`rayScreenPos`变数。您可以通过取左轴边界（作为查看器，您正在寻找中间条纹，而不是最左边的！）加上当前条纹，乘以像素大小的条纹大小来确定值（`x`以 px 为单位的位置）。`x``-numRays/2``i``stripWidth`

然后，您可以轻松地计算出与刚刚计算的条纹的观看者距离。因此，您将使用勾股定理并计算`rayViewDist`.

**编辑**

我的第一个光线追踪器花了我几个星期的时间实施（所以我理解你的绝望），但在那之后一切都到位了。通过查看器，我的意思是“相机的位置”。在opera dev tut中是FOV = 60，stripeSize = 4px，那么光线的数量是numberOfStripesInImage = sizeOfImage / sizeOfSplice -> 320/4 -> 80条光线。那么第一条rayScreenPos是(-80/2 + 0) * 4 -> -160，这是相对于中间条纹屏幕中心的 x 位置（视图在屏幕中心查看）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-10T16:30:32.900

检查我的教程。我正在努力为所有事情创造一个完美的解释。我没有为此使用硬渲染方法或硬逻辑。我正在研究 RayCasting 逻辑并选择简单的东西，因为对我来说，简单就是最好的！我想它会对你有所帮助。

单击[此处](https://github.com/vinibiavatti1/RayCastingTutorial/wiki)访问教程。它在 github wiki 中。

[![在此处输入图像描述](../Images/566219f61b911caab5019711a33c55bc.png)](https://i.stack.imgur.com/OjWvV.png)

# symfony - 回显变量获取“资源ID”

> ID：14803609
> 
> 赞同：2
> 
> 时间：2013-02-10T22:59:07.143
> 
> 标签：symfony, twig

使用 symfony2 我加载了一些实体，然后尝试在树枝模板中迭代它们。

但是，我得到的不是可变内容：

```
Resource id #23 
```

我的树枝模板如下所示：

```
<ol>
{% for post in posts %}
    <li>
        <div>
            {{ post.content }}
        </div>
    </li>
{% endfor %}
</ol> 
```

我的控制器代码是：

```
$repository = $this->getDoctrine()
    ->getRepository('AppPostBundle:Post');

$reviews = $repository->findBy(
    array('title' => 'my title'))
; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T16:47:19.737

也许这个答案为时已晚（肯定是 LOL），但我最近遇到了同样的问题，问题是 blob 数据类型被视为缓冲区，因此您必须使用缓冲区函数读取信息。

在您的实体`Post`代码中，您可以添加此方法：

```
public function readContent(){
    $content = '';
    while(!feof($this->getContent())){
        $content.= fread($this->getContent(), 1024);
    }
    rewind($this->getContent());
    return $content;
} 
```

然后在您的视图中，您可以调用该`readcontent`方法而不是`content`：

```
<ol>
{% for post in posts %}
    <li>
        <div>
            {{ post.readcontent }}
        </div>
    </li>
{% endfor %}
</ol> 
```

迟到总比没有好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T09:41:43.437

我的实体名称是：“测试”

Blob 类型字段为：“详细信息”

在'/src/Vendorname/Bundlename/Entity/entityname.php'

```
 **
 * Get details
 *
 * @return string 
 */
public function getDetails()
{
    return $this->details;
}
/**
 * Reading the blob type of content.
 * @return data
 */
public function readDetails(){
  $details = '';
  while(!feof($this->getDetails())){
    $details.= fread($this->getDetails(), 1024);
   }
  rewind($this->getDetails());
  return $details;
} 
```

并在 '*.html.twig' 文件中

```
{% for match in matches %} 
    {{match.readdetails}}
{%endfor%} 
```

# c# - 用于良好编程实践的 Visual Studio 工具

> ID：14803611
> 
> 赞同：2
> 
> 时间：2013-02-10T22:59:24.573
> 
> 标签：c#, c++, visual-studio

如标题所示，我想知道是否有任何工具或插件可以添加到 Visual Studio 中，以帮助程序员编写高效的代码（即：命名标准、变量初始化......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:02:18.430

是的，来自 www.jetbrains.com 的 resharper 很好。www.wholetomato.com 的 Visual Assist 也不错。

这些都是付费工具。

Style cop 将帮助您执行编码标准。

# .htaccess - 子域 mod_rewrite (htaccess) 到相对目录

> ID：14803612
> 
> 赞同：3
> 
> 时间：2013-02-10T22:59:29.777
> 
> 标签：.htaccess, mod-rewrite, subdomain, relative-path

我在将子域重写到位于Web 根目录*之上的目录时遇到了一些麻烦。*我以前在 mod_rewrite 方面有很多经验，但这个特殊问题超出了我的范围。

据我所知，mod_rewrite 是在发脾气，因为我坚持使用相对目录 ( `..`) 来确定子域文件所在的目录。

不幸的是，我的客户的规格有两个限制：

*   将子域作为 Web 根目录的子目录不是一种选择。除特定子域外，不得从任何地方访问子域（可能存在目录冲突）。**这**意味着`http://subdomain.example.com/`不能从该目录访问，因为该目录可能在根域上的应用程序中使用。**`http://example.com/subdomain/`**
***   客户端不知道子域文件的绝对路径，因为将使用共享主机。**

 **如果有人可以帮助我解决这个问题，将不胜感激！我也很想在未来的项目中开始使用它，与我们目前处理子域的方式相比，这是一个非常优雅的解决方案......如果有人能让它工作的话！

**编辑**：认为指出在请求时返回`http://subdomain.example.com/`a`400 Bad Request`而不是`500 Internal Server Error`我预期的 a 可能很有用。请求根域时，一切都按预期工作。

## 当前`.htaccess`文件。

```
# Begin Rewrite Module for http://*.example.com/
# ==============================================
<IfModule mod_rewrite.c>

    # Turn the rewrite engine on.
    RewriteEngine On
    RewriteBase /

    # Map subdomains to their respective directories.
    RewriteCond %{HTTP_HOST} ^([^.]+)\.example\.com$
    RewriteRule (.*) /../public_subdomains/%1/$1 [L]

    # Rewrite all requests for the root domain to always be served through "index.php".
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule (.*) /index.php/$1 [L]

</IfModule> 
```

## 当前目录结构。

```
/
    application/
    cgi-bin/
    framework/
    public_html
        public/
            css/
            images/
            js/
        .htaccess
        index.php
    public_subdomains/
        mysubdomain/
            index.php
        anothersubdomain/
            index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:39:30.393

您如何实现这一点取决于您的主机如何实现子域。有些只是映射到您的 DOCROOT。其他人提供了一个控制面板，允许您自己执行该子域 -> 子域 docroot。如果（2）适用，那么你想要的已经提供了，所以我会在这个答案中假设（1）。

首先要注意的是，在每个目录的 htaccess 上下文中重写实际上是将 URI 映射到 DOCROOT 层次结构上。“..”是不允许的，会抛出 500。实际上，您被困在域的 DOCROOT 中。

所以 public_domains*必须*是 DOCROOT 的子目录——在你的情况下`public_html`。

*但是*，您仍然可以`public_html/public_domains` 通过简单的规则简单地阻止任何直接访问：

```
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteCond %{REQUEST_URI}         /public_domains(/|$)
RewriteRule ^                      -                 [F,L] 
```

有关更多提示，请参阅我[的调试 .htaccess 重写规则](https://stackoverflow.com/questions/9153262/tips-for-debugging-htaccess-rewrite-rules)的技巧。您只想在入口通行证上使用 public_domains 请求。另请记住，您不包括前导 / 并且目标是相对于 DOCROOT 以 / 为基数的。**

# ubuntu - 捕获当前正在运行的程序作为启动程序

> ID：14803614
> 
> 赞同：0
> 
> 时间：2013-02-10T22:59:41.167
> 
> 标签：ubuntu, ubuntu-12.04

我记得在以前的 Ubuntu 版本中，曾经有一个功能可以捕获当前正在运行的程序，并自动将它们设置为启动程序。在 12.04 中，我再也找不到这个功能了。这还能用吗？有一种手动添加启动程序的方法，但我想使用以前在其他版本中可用的自动功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:55:08.607

如果您使用的是 11.04 或更早版本，您可以通过转到系统菜单 -> 首选项 -> 启动应用程序 -> 选项选项卡来执行此操作，在这里您可以检查“记住当前正在运行的应用程序”。

但是，如果您使用的是更新版本（11.10 或更新版本），则该选项不再存在，并且由于许多副作用，没有计划在不久的将来实施。

因此，因为您使用的是 12.04，所以我认为这是不可能的。我不确定KDE。

此外，如果您仍想手动将应用程序添加到启动中，只需[在此处查看 - Ubuntu 12.10](http://imacify.com/2012/11/how-to-add-application-to-the-startup-on-ubuntu-12-10/)

# css - 悬停时更改背景图像

> ID：14803616
> 
> 赞同：0
> 
> 时间：2013-02-10T23:00:04.947
> 
> 标签：css, background, hover

截图[在这里](https://docs.google.com/folder/d/0BxVxYQK45ve2bjU0Q002cTlkLVU/edit?usp=sharing)

我正在尝试使用 CSS 为全屏背景图像设置悬停动画。（屏幕截图 1 和 2）但我也希望我的导航使用我的列表类样式，而不是我在[本](http://designshack.net/articles/css/swap-your-pages-background-image-on-navigation-hover/)教程中使用的导航。（屏幕截图 3 和 4）。如何让类充当悬停图像的相邻兄弟而不是锚？

这是我的 CSS

```
html { 
background: url(scarf6.jpg) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;}

.container {
  position: absolute;
  overflow: hidden;
  width: 100%;
  height: 100%;
  top:0;
  left:0;
}

.container img {
  position: absolute;
  top: 0%;
  left:0%;
  z-index: -60;
  height:100%;
}

.container li img {
  position: absolute;
  top: 0%;
  left: 100%;
  height:100%;
  z-index: -50;
  -webkit-transition: all .5s ease;
  -moz-transition: all .5s ease;
  -o-transition: all .5s ease;
  -ms-transition: all .5s ease;
  transition: all .5s ease;
}

ul {
  list-style: none;
}

nav {
    top:0%;
    right:0%;
    left:100%;
    height:100%; 
    width:30px; 
    z-index: 1;
    display: block;
}

li a:hover + img {
  left: 0px;
}

.red {
    background: #FF9999;
}

.white {
    background:#FAF0E6;
}

.pink {
    background: #FFC0CB;
}

.fuscia {
    background:#FF0033;
}

.l1 {
    height:4%;
    width:100%;
}

.l2 {
    height:.7%;
    width:100%;
}

.l3 {
    height:1.3%;
    width:100%;
}

.l4 {
    height:.7%;
    width:100%;
}

.l5 {
    height:1.3%;
    width:100%;
}

.l6 {
    height:.7%;
    width:100%;
}

.l7 {
    height:2.7%;
    width:100%;
}

.l8 {
    height:3.3%;
    width:100%;
}

.l9 {
    height:5.4%;
    width:100%;
}

.l10 {
    height:1.7%;
    width:100%;
}

.l11 {
    height:6.7%;
    width:100%;
}

.l12 {
    height:.8%;
    width:100%;
}

.l13 {
    height:4.2%;
    width:100%;
}

.l14 {
    height:5%;
    width:100%;
}

.l15 {
    height:5.8%;
    width:100%;
}

.l16 {
    height:3.3%;
    width:100%;
}

.l17 {
    height:2.5%;
    width:100%;
}

.l18 {
    height:1.1%;
    width:100%;
}

.l19 {
    height:34.5%;
    width:100%;
}

.l20 {
    height:3.1%;
    width:100%;
}

.l21 {
    height:5%;
    width:100%;
}

.l22 {
    height:6.2%;
    width:100%;
} 
```

还有我的 HTML

```
 <body>
<div class="container">
<div class="overlay">
<nav>
    <li class="l1 pink">
        <a href="#">Home</a>
        <img src="../../Cover.png" alt="">
    </li>
    <li>
        <a href="#">About</a>
        <img class="hidden">
    </li>
    <li>
        <a href="#">Clients</a>
        <img class="hidden">
    </li>
    <li>
        <a href="#">Work</a>
        <img class="hidden">
    </li>
    <li>
        <a href="#">Contact</a>
        <img class="hidden">
    </li>
    </nav>
    </div>
    </div>
</body> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:14:28.080

将图像放置为 li 或 a 的背景图像。如果您不想显示图像，请通过 background-position 将其放置到某个非生成区域 - 例如，如果图像高 32px，则将其放置：

```
background-position: left 32px; 
```

它会使这个图像不知何故不可见。（重要提示：更好的是，具有此背景的元素为 display: block）。然后，当悬停时，您会将图像放回：

```
...:hover {
  background-position: left top;
} 
```

我在很多情况下都在使用它。同样在切换两个图像时-实际上，它们都在一个图像中，并且仅在悬停时移动背景位置。

# visual-studio-2010 - Visual Studio 脚本项目

> ID：14803618
> 
> 赞同：5
> 
> 时间：2013-02-10T23:00:19.173
> 
> 标签：visual-studio-2010, visual-studio

我想做的是创建一个超级简单的 VS2010 项目，该项目将使用批处理脚本生成一个文件。这个项目将是另一个项目的依赖项。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T02:12:04.963

好问题，唐。您可以做的是在您的解决方案中创建一个新目录并将您的脚本放在那里。然后，您将创建一个名为*MyProject.csproj*的 MSBuild 脚本，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project
    ToolsVersion   = "4.0"
    DefaultTargets = "Build"
    xmlns          = "http://schemas.microsoft.com/developer/msbuild/2003"
    >
    <ItemGroup>
        <InputTxt  Include="$(MSBuildProjectDirectory)\input.txt" />
        <OutputTxt Include="$(MSBuildProjectDirectory)\output.txt" />
        <Script    Include="$(MSBuildProjectDirectory)\script.cmd" />
    </ItemGroup>
    <Target
        Name    = "Build"
        Inputs  = "@(InputTxt);@(Script)"
        Outputs = "@(OutputTxt)"
        >
        <Exec Command = '"@(Script)" "@(InputTxt)" "@(OutputTxt)"' />
    </Target>
</Project> 
```

# ruby-on-rails - 资产管道

> ID：14803619
> 
> 赞同：1
> 
> 时间：2013-02-10T23:00:25.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sass, asset-pipeline

我在生产模式下遇到了资产管道问题。我`bundle exec rake assets:precompile`在开发中运行，它工作正常。但是，当我在生产服务器中运行它时（部署后），无法正确加载 css 和 js 文件。当我通过 url 访问 css 或 js 文件时`/assets/[file_name]`，出现 500 错误。我认为这是一个权限问题，但所有文件`/public/assets`都可以访问。Production.rb 和 development.rb 文件都是完整的（来自脚手架）。不过，我可以看到 html 中列出的所有文件。任何提示将不胜感激。谢谢

生产.rb：

```
# Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify 
```

宝石文件（快照）：

```
gem 'rails', '3.2.11'

gem 'pg'
gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
#  gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'compass-rails'
# Deployment related
gem 'capistrano'
gem 'capistrano-ext'

gem 'jquery-rails', '~> 2.0.0'
gem 'jquery-datatables-rails'

group :development do
  gem 'guard'
end 
```

应用程序.css：

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require dataTables/jquery.dataTables
 *= require bootstrap.scss
 *= require bootstrap-responsive.scss
 *= require_tree .
 */ 
```

我有另一个与 sass 相关的 application.css.scss：

```
@import "compass";
@import "compass/utilities/tables";

.ftr-ticker {
  background: #333;
  height: 25px;
  width: 100%;
}
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:34:21.053

您修改了清单文件`application.css`，我认为这会带来问题。我的建议是将您的`scss`文件重命名为其他名称，而不是`application`（可能是`custom.css.scss`）并将其包含在清单`application.css`文件中，如下所示：

```
*= require custom 
```

如您所见，样式表文件的名称没有前缀。你`*= require bootstrap.scss`应该是`*= require bootstrap`。我也建议`require_tree`在所有其他要求之后搬家。[本 Railsguide](http://guides.rubyonrails.org/asset_pipeline.html)将帮助您使用 Rails 3.2 中的资产管道。

# breeze - Breezejs EntityManager MetadataStore 和 fetchEntityByKey

> ID：14803621
> 
> 赞同：5
> 
> 时间：2013-02-10T23:00:45.320
> 
> 标签：breeze, durandal

我有一个 SPA 应用程序（durandaljs），并且我有一个特定的路线，我在其中映射我想要获取的实体的“id”。

模板是“/#/todoDetail/:id”。

例如，“/#/todoDetail/232”或“/#/todoDetail/19”。

在 viewmodel 的激活功能上，我得到了路线信息，所以我可以获取 id。然后我创建一个新的微风 EntityManager 实例来获取具有给定 id 的实体。

问题是当我调用 manager.fetchEntityByKey("Todos", id) 时，EntityManager 还没有来自服务器的元数据，所以它抛出异常“无法通过名称找到‘类型’：Todos”。

仅当我在调用 fetchEntityByKey 之前首先对存储 (manager.executeQuery) 执行查询时，它才有效。

这是预期的行为还是错误？有没有办法在 EntityManager 的实例化过程中自动修改元数据？

注意：我认为在我的情况下很难使用共享的 EntityManager，因为我希望允许用户直接在浏览器上键入路由。

**编辑**：作为临时解决方法，我正在这样做：

```
BreezeService.prototype.get = function (id, callback) {
    var self = this;

    function queryFailed(error) {
        app.showMessage(error.message);
        callback({});
    }

    /* first checking if metadatastore was already loaded */

    if (self.manager.metadataStore.isEmpty()) {
        return self.manager.fetchMetadata()
        .then(function (rawMetadata) {
            return executeQuery();
        }).fail(queryFailed);
    } else {
        return executeQuery();
    }

    /* Now I can fetch */
    function executeQuery() {
        return self.manager.fetchEntityByKey(self.entityType, id, true)
                        .then(callback)
                        .fail(queryFailed);
    }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T06:49:42.427

你已经了解了`fetchMetadata`. 这很重要。如果您的应用程序可以在不发出查询的情况下开始，您必须使用`fetchMetadata`并等待它返回，然后才能直接对缓存执行任何操作（例如，在回退到数据库查询之前通过缓存中的键检查实体） .

但我感觉到发生了其他事情，因为你提到了多个经理。默认情况下，新经理不知道任何其他经理的元数据。但是您知道**您可以在管理人员之间共享一个 metadataStore**吗？你可以。

我经常做的（你会在 DocCode 示例的元数据测试中看到它）是为应用程序获取一个 metadataStore，编写一个 EntityManager 工厂函数，该函数使用该 metadataStore 创建新的管理器，然后每当我使用工厂我在做新的经理……就像你在启动 ViewModel 以查看 TodoDetail 时所做的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:20:19.687

来自 Silverlight 背景，我使用了很多 WCF RIA 服务和 Caliburn Micro，我使用这种方法将 Breeze 与 Durandal 集成。

我在应用程序的 App 文件夹中创建了一个名为 services 的子文件夹。在那个文件夹中，我创建了一个名为 datacontext.js 的 javascript 文件。这是我的数据上下文的一个子集：

```
define(function (require) {

    var breeze = require('lib/breeze'); // path to breeze
    var app = require('durandal/app');  // path to durandal

    breeze.NamingConvention.camelCase.setAsDefault();

    // service name is route to the Web API controller
    var serviceName = 'api/TeamData',

    // manager is the service gateway and cache holder
    manager = new breeze.EntityManager(serviceName),

    store = manager.metadataStore;

    function queryFailed(error) {
        app.showMessage("Query failed: " + error.message);
    }

    // constructor overrides here

    // included one example query here
    return datacontext = {
        getSponsors: function (queryCompleted) {
            var query = breeze.EntityQuery.from("Sponsors");
            return manager
                .executeQuery(query)
                .then(queryCompleted)
                .fail(queryFailed)
        }
    };
} 
```

然后在您的 durandal 视图模型中，您可以只需要服务/数据上下文。例如，这是我的应用程序中示例视图模型的一部分：

```
define(function (require) {

    var datacontext = require('services/datacontext');

    var ctor = function () {
        this.displayName = 'Sponsors',
        this.sponsors = ko.observable(false)
    };

    ctor.prototype.activate = function () {
        var that = this;
        return datacontext.getSponsors(function (data) { that.sponsors(data.results) });
    }

    return ctor;
}); 
```

这将使您不必担心在每个视图模型中初始化元数据存储，因为它都在一个地方完成。

# c++ - 如何针对在 xcode/clang/macos 中使用 libc++ 编译的静态库编译应用程序？

> ID：14803622
> 
> 赞同：4
> 
> 时间：2013-02-10T23:00:46.863
> 
> 标签：c++, xcode, static-libraries, clang, libc++

当我尝试编译测试控制台应用程序以在同一工作区上测试静态库上的某些功能时，我在二进制文件的链接阶段遇到了问题，只有当我选择使用 libc++ 标准库时才会发生这种情况。

缺少符号错误如下：

```
 Undefined symbols for architecture x86_64:
  "std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::empty() const", referenced from:
      libtorrent::torrent::replace_trackers(std::__1::vector<libtorrent::announce_entry, std::__1::allocator<libtorrent::announce_entry> > const&) in libLibOFFTorrent-xcode.a(torrent.o)
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

![xcode中的错误在静态库上缺少符号](../Images/d4898f7cd148d837810b825aa09170f1.png)

当我在两个目标中选择 stdlibc++ 时，一切都编译正常并且运行正常。

![标准库选项 (xcode)](../Images/72cf642635d26f8c1302658e391c0be8.png)

我的问题是：

1.  在静态库上使用 libc++ 有一些限制吗？
2.  它是苹果/clang++ 链接器工具中的一个错误？
3.  如何配置项目以将 libc++ 与我的静态库一起使用？
4.  为什么链接器工具在静态库上找不到标准 c++ 库的符号？（任何其他依赖的库都是针对 libc++ 编译的）
5.  我应该忘记使用 libc++ 的想法吗？

笔记：

1.  静态库依赖于 libboost_system，我用 libc++ 和 libstdc++ 编译，结果相同
2.  当我使用“bjam”工具运行测试时，它运行正常，也许 jam 文件选择 libstdc++ 来编译文件。
3.  我知道更改标准库可以解决链接问题，我只想知道这是为什么。

**更新**：当我在静态库项目中删除对 string::empty 的引用时，依赖于 libc++ 的项目可以正常编译并运行，但它会进入无限循环。

**更新 2**：当我用 libstdc++ 编译整个东西时，删除 string::empty 引用没有任何效果，它运行良好。没有循环，这让我认为这是一个错误或类似的东西。

**更新 3**：当它编译时，这是程序无限循环的地方：![在此处输入图像描述](../Images/0ceacdfc2ad413f845de34d3b2038822.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:46:53.977

似乎您的依赖项之一 ( `libtorrent`) 是针对`libstdc++`.

检查命名空间：`std::__1::basic_string`。它有`__1`前缀，通常表示`libstdc++`)。

我可能错了，但我认为如果你绝对想使用这个，你需要重建你的`libtorrent`反对。`libc++`

请注意，使用`stdlibc++`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:33:54.643

你有没有机会用 -D_LIBCPP_INLINE_VISIBILITY="" 编译 libtorrent？

我问的原因是它`std::string::empty()`不在 libc++.dylib 中，因为它被标记为“always_inline”。所以它应该在使用时被内联到 libtorrent 中。

# sql-server - Excel VBA 和 ADODB：检索从 VBA 插入 SQL Server 的行的自动标识

> ID：14803623
> 
> 赞同：3
> 
> 时间：2013-02-10T23:00:47.207
> 
> 标签：sql-server, excel, ado, vba

在 Excel 的 VBA 模块中。使用 ADODB.Connection 和此连接字符串：

```
"Provider=SQLOLEDB;Data Source=MARS;Initial Catalog=automation;Trusted_connection=yes;" 
```

我想要：

1.  插入测试（数据）值（“某事”）
2.  检索新插入行的自动递增标识 (test.data_id)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:39:08.467

```
Dim identity as integer
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset

cn.ConnectionString = "whatever..."
cn.Open
cn.Execute ("INSERT INTO test(data) VALUES ('hello world')")
rs.Open "SELECT @@identity AS NewID", cn
identity = rs.Fields("NewID") 
MsgBox (identity) 
```

# php - 字符串到值比较优化 MySQL 查询

> ID：14803628
> 
> 赞同：1
> 
> 时间：2013-02-10T23:01:25.173
> 
> 标签：php, mysql, query-optimization, laravel

我的问题如下：我有两个长度相同的数组`$first`，`$second`包含字符串。每个字符串在名为 的表中被赋予一个正值`Fullhandvalues`：

```
Field: board : string(7) PRIMARY KEY
Field: value : int (11) 
```

我想计算 $first[$i] 有多少次比 $second[$i] 有更好的价值，有多少次它们具有相同的价值，以及有多少次 $first[$i] 的价值比 $ 更差第二[$i]。

我现在所做的是通过

```
$values[0]= DB::table('Fullhandvalues')->where_in("board",$first)->get(Array("value"));
$values[1]= DB::table('Fullhandvalues')->where_in("board",$second)->get(Array("value")); 
```

然后比较值。但这似乎很慢（大约 6 秒，对于表中 5000 和 50000 个条目的数组长度）

首先十分感谢

编辑：我如何遍历它们：

```
$win=0;$lose=0;$tie=0;
for($i=0;$i<count($values[0]);$i++)
    {
        if ($values[0][$i]>$values[1][$i])
            $win++;
        elseif ($values[0][$i]<$values[1][$i])
            $lose++;
        else $tie++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:57:46.267

你的问题是`where_in`。您基本上是在构建一个长度为`implode(',', $second)`（加上更改）的查询。这必须首先由 Laravel (PHP) 生成，然后由您的 DBMS 分析。

生成的查询也将使用`IN(...)`表达式，这在 MySQL 中是众所周知的。

如果没有有关应用程序以及如何选择板 ID 的更多信息，您可以选择以下选项：

*   创建一个临时表并用您的数组数据填充它（这应该很快，但最好这些数据应该已经在数据库中）
*   不要忘记在临时表上创建索引。
*   使用内部选择`join`。

# java - 使用哈希表根据其等效字母显示图像

> ID：14803629
> 
> 赞同：-2
> 
> 时间：2013-02-10T23:01:28.117
> 
> 标签：java, android, hashtable

我很难根据其等效字母显示图像，因为我当前的代码不适用于数组

```
Hashtable<String, Integer> images = new Hashtable<String, Integer>();       
    images.put("A"+"a",R.drawable.a);  
    images.put("B"+"b",R.drawable.b);  
    images.put("C",R.drawable.c);  
    images.put("D",R.drawable.d);  
    images.put("E",R.drawable.e);  
    images.put("F",R.drawable.f);  
    images.put("G",R.drawable.g);  
    images.put("H",R.drawable.h);  
    images.put("I",R.drawable.i);  
    images.put("J",R.drawable.j);  
    images.put("K",R.drawable.k);  
    images.put("L",R.drawable.l);  
    images.put("M",R.drawable.m);  
    images.put("N",R.drawable.n);  
    images.put("O",R.drawable.o);  
    images.put("P",R.drawable.p);  
    images.put("Q",R.drawable.q);  
    images.put("R",R.drawable.r);  
    images.put("S",R.drawable.s);  
    images.put("T",R.drawable.t);  
    images.put("U",R.drawable.u);  
    images.put("V",R.drawable.v);  
    images.put("W",R.drawable.w);  
    images.put("X",R.drawable.x);  
    images.put("Y",R.drawable.y);  
    images.put("Z",R.drawable.z);  

        //String [] search = {"A"+"a","B"+"b"};    <<< this wont work
        String search = "A"+"a";
        if(images.containsKey(search)){

            ImageView image = (ImageView)findViewById(R.id.imageView1);
            image.setImageResource(images.get(search));
        } 
```

如果我手动执行，我只会得到“a”或“A”，如果我输入字母“b”或“B”，这次我将使用什么正确的代码？
因为我认为如果我继续这种方法，我认为我的代码会很尴尬

*编辑我现在想要做的是这个代码将进行一个字符搜索，然后这个字符将搜索到 res/drawable 文件夹到它的等效图像......但我的问题是如何使用其他字母进行搜索。 ..正如我在上面发布的代码...我当前的代码仅适用于“a”或“A”字母

...任何建议都可以改善我的申请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:42:53.977

你可以试试：

```
 Collection<String> search = new HashSet<String>{
{add("Aa");
add("Bb");}
};    

        if(images.keySet().containsAll(search)){
... 
```

# javascript - 将自定义数据传递给模拟的 javascript 事件

> ID：14803633
> 
> 赞同：2
> 
> 时间：2013-02-10T23:01:54.843
> 
> 标签：javascript, javascript-events

我希望能够将自定义数据传递给模拟的 JavaScript 事件，以便我可以在事件侦听器回调中唯一标识此模拟事件。例如，如果我要调用：

```
var event = document.createEvent("MouseEvents");
var args = ['mousemove', true, true, window, 1, 0, 0];
event.initMouseEvent.apply(event, args);
target.dispatchEvent(event); 
```

我如何能够将数据传递给此事件，然后从事件侦听器回调中检索它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:30:42.900

只需将该数据添加到您的`event`对象就足够了：

```
target.addEventListener("mousemove", function(e) {
    console.log(e.data);
}, false);

var event = document.createEvent("MouseEvents");
var args = ['mousemove', true, true, window, 1, 0, 0];
event.data = "foobar";
event.initMouseEvent.apply(event, args);
target.dispatchEvent(event); 
```

PS 请注意，在某些浏览器中 args 是不够的，所有这些都是必需的，否则会引发异常。我不确定您要支持哪些浏览器。对于所有参数，请参阅：[https ://developer.mozilla.org/en/docs/DOM/event.initMouseEvent](https://developer.mozilla.org/en/docs/DOM/event.initMouseEvent)

# bash - 减法的 Bash 错误

> ID：14803636
> 
> 赞同：1
> 
> 时间：2013-02-10T23:02:17.950
> 
> 标签：bash

我在减法方面遇到了一些问题，我不知道为什么:(这是我的代码：

```
#!/bin/bash
w3m http://www.weather.com/weather/hourbyhour/graph/PLXX0027 > plik.txt
image= grep -o 'http.*' plik.txt
t= cat plik.txt |sed '105q;d' | grep -o '[0-9][0-9]'
a=32
temp=$((t-a))
echo $temp 
```

我收到了类似的东西：

```
name@name ~/Desktop $ sh p.sh
http://s.imwx.com/v.20120328.084252//img/wxicon/70/14.png
25
-32 
```

但我想接受 25-32 的减法...（当然 25 取决于网页中的值）但为什么它不想减去它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:14:22.463

尝试正确定义所有变量，并在它们周围加上 $()。

```
#!/bin/bash
w3m http://www.weather.com/weather/hourbyhour/graph/PLXX0027 > plik.txt
image=$(grep -o 'http.*' plik.txt)
t=$(cat plik.txt |sed '105q;d' | grep -o '[0-9][0-9]')
a=32
temp=$((t-a))
echo $temp 
```

# javascript - 用于解析 xml 文件的 getElementsByTagName 仅适用于 IE8

> ID：14803639
> 
> 赞同：1
> 
> 时间：2013-02-10T23:02:23.313
> 
> 标签：javascript, internet-explorer-8, xml-parsing, getelementsbytagname

我想通过一个 xml 文件找到“标记”简单标签并读取它们的“lat”和“lng”属性以显示在 gmap 上。与我在十分之一线程上发现的相反，GetElementsByTagName 仅在 IE8 中有效，而在 IE9、Firefox 或 Chrome 中无效。该代码是 joomla 组件的一部分（所以不是我的），我不想完全改变它。

```
 var request = GXmlHttp.create();
  request.open("GET", $mapfile, true);

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      var xmlDoc = GXml.parse(request.responseText);
      var markers = xmlDoc.documentElement.getElementsByTagName("marker");
      alert(markers.length);
      for (var i = 0; i < markers.length; i++) {
        var lat = parseFloat(markers[i].getAttribute("lat"));
        var lng = parseFloat(markers[i].getAttribute("lng"));
      }
    }
  } 
```

xml中没有什么复杂的

```
<?xml version="1.0" encoding="utf-8" ?>
<markers>
    <marker lat="53.0" lng="48.0"/> 
    <marker lat="55.0" lng="32.0"/> 
    <marker lat="42.0" lng="21.0"/> 
    <marker lat="-3.0" lng="-79.0"/> 
    <marker lat="10.0" lng="-66.0"/>
</markers> 
```

尽管我的代码正确读取了 xml（request.responseText 包含 xml 文本），但是 markers.length 为零。更奇怪的是，当我的网站在另一台服务器上时，相同的代码运行良好。我应该在...（？）服务器设置上查看相关内容吗？

我试过没有.documentElement，没有区别。我什至将我的代码文件保存在 utf-8 中，因此“标记”文本也采用相同的编码，但没有。

我对 javascript 没有经验，尝试使用 jQuery 对我来说并不容易。

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:45:13.670

解决了！我不知道为什么，但是 xml 文件的第一行导致了问题。删除，一切正常。有谁明白为什么？

# jquery - 缓解不适用于 IE

> ID：14803641
> 
> 赞同：0
> 
> 时间：2013-02-10T23:02:33.500
> 
> 标签：jquery, internet-explorer, scroll, easing

我有一个带有简单点击/滚动导航的单页网站，我知道这很愚蠢，但我无法在 IE 上使用它！

Chrome、Firefox 都可以，但 IE 对我一点帮助都没有。如果有人能告诉我我做错了什么，那就太棒了：D

```
$(document).ready(function () {
    $('.menu a').click(function () {
        var link = $(this).attr('href');
        if (link.match(/^#.+/)) {
            var scroll = $(link).offset().top;
            if (scroll < 0) { scroll = 0; }
            $('body').animate({ scrollTop: scroll, easing: 'easeOut' }, 200, function () {
                location.hash = link;
                return false;
            });
            return false;
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:27:17.667

见：http: [//jsfiddle.net/HFhCD/2/](http://jsfiddle.net/HFhCD/2/)

为了获得最大的兼容性，您必须匹配“body”和“html”。

```
 $('body, html').animate({
        scrollTop: scroll + "px"
    }, 2000); 
```

# python - 有效检查单词是否与集合中的模式匹配（Python）

> ID：14803643
> 
> 赞同：1
> 
> 时间：2013-02-10T23:02:40.650
> 
> 标签：python, glob

我有一组许多简单的 globbing 模式和整个单词，如下所示：

```
s = set(['ALE', 'BREAD*', 'BREAKFAST*', 'BROTH' ...]) 
```

我也是一大串词。我想检查此列表中的每个单词是否与 a) 集合中的通配模式或 b) 集合中的单词匹配。

如果没有 globbing 模式，我会做类似的事情：

```
for word in words:
    if word in s:
        # do something 
```

但是由于该集合也包含通配符模式，如果我想将“BREADY”匹配到“BREAD*”，它将找不到匹配项

我能想到的唯一方法是使用嵌套的 for 循环将每个单词与集合中的每个模式进行比较。有没有一种方法可以检查每个单词在集合中是否有匹配项，而无需将其与集合中的每个元素进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:37:55.513

授予 OP 不想循环。

```
import re
import fnmatch
s = set(['ALE', 'BREAD*', 'BREAKFAST*', 'BROTH'])
patterns = [re.compile(fnmatch.translate(p)) for p in s]

for word in "BEING PALE I LIKE ALE WITH BREADDY ABROTH FOR BREAKFASTY TREATS AND BROTH".split():
    for pattern in patterns:
        if pattern.match(word):
            print "HIT", word 
```

给出：

```
HIT ALE
HIT BREADDY
HIT BREAKFASTY
HIT BROTH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:14:20.617

您应该将要匹配的完整字符串与要匹配的前缀分开存储。对于您的前缀，将它们进一步划分为一组等长前缀（即一组长度为 1 的前缀、一组长度为 2 的前缀等）。

IE

```
fullstrings = set(["BREAKFAST", "LUNCH", "DINNER", ...])
prefixes_by_length = {} # dict of length -> prefix string
...
prefixes_by_length[4] = set(["CORN", "DESK", ...])
prefixes_by_length[5] = set(["BREAD", "TABLE", ...]) 
```

完整的字符串匹配很简单 - 只需检查 if `word in fullstrings`。

对于前缀，您将分别检查每个长度，从长度 1 到您要匹配的最大前缀长度。对于每个长度`n`，检查是否`word[:n] in prefixes_by_length[n]`.

如果您有很多前缀，这将比每次循环遍历所有前缀要有效得多。

```
for word in words:
    if word in fullstrings:
        "Match! do something"
    for n in prefixes_by_length:
        if word[:n] in prefixes_by_length[n]:
            "Match! do something" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:07:24.417

Suppose we have a wordlist `words`, and a search list `searches`. For the simple examples you gave, the following should suffice.

```
for word in words:
    for search in searches:
        if search[-1] == "*":
            search = search[:-1]
            if word.lower().startswith(search.lower()):
                yield word
        else:
            if word.lower() == search.lower():
                yield word 
```

# c++ - 解释区别：

> ID：14803649
> 
> 赞同：-3
> 
> 时间：2013-02-10T23:02:55.360
> 
> 标签：c++, c, operators

```
int i=1,2,3,4;  // Compile error

// The value of i is 1

int i = (1,2,3,4,5);

// The value of i is 5 
```

C 中 i 的这些定义有什么区别，它们是如何工作的？

编辑：第一个是编译器错误。第二个如何工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T23:06:12.157

`=`优先于`,`¹。所以第一条语句是声明和初始化`i`：

```
int i = 1; 
```

……后面是很多逗号分隔的表达式，它们什么都不做。

另一方面，第二个代码由一个声明和*一个*初始化表达式组成（括号优先，因此 和 的相应优先级`,`不再`=`相关）。

再说一次，这纯粹是学术性的，因为第一个代码在 C 和 C++ 中都是无效的。我不知道您正在使用哪个编译器接受此代码。我的（正确）抱怨

> 错误：数字常量之前的预期不合格 id

* * *

¹无论如何使用运算符，C++ 中的优先规则都适用。`=`并且`,`在 OP 的代码中不要引用`operator=`or `operator,`。然而，就C++ 而言，它们是*运算符*`=`（标准的第 2.13 节），并且标记的优先级`,`并不取决于它们的用法——它的优先级`,` *总是*低于`=`，无论语义如何。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T23:05:47.163

不确定 C++，但至少对于 C 来说，第一个是无效的语法，所以你不能真正谈论声明，因为**它不编译**。第二个只是误用了逗号运算符，结果为 5。

因此，坦率地说，区别在于第一个不是 C，而第二个是。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-10T23:05:53.947

您遇到了逗号运算符 ( `,`) 的一个有趣的极端情况。

基本上，它获取上一条语句的结果并将其丢弃，并用下一条语句替换它。

~~第一行代码的问题是`operator precedence`。因为`=`运算符的优先级高于`,`运算符，所以您会得到逗号链 (1) 中第一条语句的结果。~~

更正（感谢@jrok！） - 第一行代码既不编译，也不使用逗号作为运算符，而是作为表达式分隔符，它允许您一次定义多个相同类型的变量名称。

在第二个中，所有第一个值都被丢弃，您将获得项目链中的*最终结果 (5)。*

# java - 如何在小程序中使用 2 个面板？

> ID：14803652
> 
> 赞同：0
> 
> 时间：2013-02-10T23:03:24.067
> 
> 标签：java, swing, user-interface, cardlayout

我正在尝试解决如何在摇摆中浏览多个面板。我想通过使用 CardLayout 而不是使用玻璃面板来做到这一点，因为从我读过的内容来看，这似乎是这项工作的正确工具（但是，如果您不知道，请随时纠正我）。我写了一个测试用例，它几乎实现了这一点，但在两个方面都达不到要求。它使用了已弃用的“show()”方法，而且在切换到第二张卡片后，card1 中的按钮又开始神秘地浮出水面！

```
public class test extends JPanel implements ActionListener{
    final static int extraWindowWidth = 100;
    JButton jbtnOne = new JButton("Button 1");
        JPanel cardPanel = new JPanel(new CardLayout());
        JPanel card1 = new JPanel();
        JPanel card2 = new JPanel();

    public void addComponentToPane(Container pane) {

        //Create the "cards".
        JPanel card1 = new JPanel() {
            public Dimension getPreferredSize() {
                Dimension size = super.getPreferredSize();
                size.width += extraWindowWidth;
                return size;
            }
        };

        card1.add(jbtnOne);
        card1.add(new JButton("Button 2"));
        card1.add(new JButton("Button 3"));     
        card2.add(new JTextField("TextField", 20));

        cardPanel.add(card1, "card1");
        cardPanel.add(card2, "card2");

        pane.add(cardPanel, BorderLayout.CENTER);
        jbtnOne.addActionListener(this);
    }

    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("TabDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        test demo = new test();
        demo.addComponentToPane(frame.getContentPane());

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub
        if(e.getSource() ==  jbtnOne){
            System.out.println("HERE");
            card2.show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:20:19.567

正在管理组件，`CardLayout`因此您需要调用`show`而`CardLayout`不是`JPanel#show`：

```
CardLayout cardLayout = (CardLayout) cardPanel.getLayout();
cardLayout.show(cardPanel, "card2"); 
```

或者，在切换卡组件时，您也可以使用

```
cardLayout.next(cardPanel); 
```

# c++ - 编译器错误 __ZTVN13..6..E

> ID：14803655
> 
> 赞同：0
> 
> 时间：2013-02-10T23:03:35.547
> 
> 标签：c++, compiler-errors, mosync

我目前正在努力解决编译器问题。问题是，我使用名为“欧洲国家”（用 C++ 编写）的 MoSync 示例应用程序之一来编写自己的应用程序。但是当我编译修改后的代码时，它给了我以下错误响应：

> Controller.cpp:24：错误：未解析的符号“__ZTVN13Flightmanager6FlightE”，

我已经多次查看示例，并且已经将示例中的代码复制到我的示例中，但它没有解决任何问题。在 paticutlar 中，我可能理解错误的含义（我确实有 c 经验），但我从未见过这样的结构化错误。我还查看了命名空间约定，但应该没有任何问题。

//飞行.h

```
namespace Flightmanager
{

class Flight
{
    public:

    static int flightCounter;

    /**
     * The constructor creates the user interface.
     */

    Flight(char *flightnumber, char *gate, char *departure, char *additionalinfo, char *destinationairport, char *destinationairportshort) {

        this->_id = flightCounter;
        flightCounter ++;

        this->_flightnumber = flightnumber;
        this->_gate = gate;
        this->_departure = departure;
        this->_additionalinfo = additionalinfo;
        this->_destinationairport = destinationairport;
        this->_destinationairportshort = destinationairportshort;
    }

    virtual ~Flight();
} 
```

//控制器.h

```
#include [all other includes]
#include "../Model/Flight.h"

namespace Flightmanager
    {
        Controller::Controller():
                mFlightArray(NULL),
                mCurrentlyShownScreen(NULL)
    {
    initScreenSizeConstants();
    initPlatformType();

//error: Unresolved symbol '__TZVN13Flightmanager6FlightE'.
        initData();
//error: Unresoled symbol '__TZVN13Flightmanager6Flight13flightCounterE'.
        mFlightTableView = new TableViewController(*this);//error: Unresoled symbol '__TZVN13Flightmanager6Flight13flightCounterE'.
        mFlightDetailView = new DetailViewController();
        }
    } 
```

我使用 MoSync 版本 3.2 构建日期：121219-1556

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:12:19.300

您需要链接具有以下定义的内容：

```
Flight::flightCounter

Flight::~Flight() 
```

这是（或某些源文件）的`.o`目标文件`Flight.cpp`还是库取决于您的项目。

# sql - PostgreSQL GROUP BY：在另一个 WHERE 第三列 = x 的 MAX 上选择列

> ID：14803656
> 
> 赞同：3
> 
> 时间：2013-02-10T23:03:35.937
> 
> 标签：sql, postgresql, greatest-n-per-group

假设我们在 PostgreSQL 中有两个表：

表“公民”

```
country_ref   citizen_name    entry_date
-----------------------------------------------------
0             peter           2013-01-14 21:00:00.000
1             fernando        2013-01-14 20:00:00.000
0             robert          2013-01-14 19:00:00.000
3             albert          2013-01-14 18:00:00.000
2             esther          2013-01-14 17:00:00.000
1             juan            2013-01-14 16:00:00.000
3             egbert          2013-01-14 15:00:00.000
1             francisco       2013-01-14 14:00:00.000
3             adolph          2013-01-14 13:00:00.000
2             emilie          2013-01-14 12:00:00.000
2             jacques         2013-01-14 11:00:00.000
0             david           2013-01-14 10:00:00.000 
```

表“国家”

```
country_id     country_name   country_group
-------------------------------------------
0              england        0
1              spain          0 
2              france         1
3              germany        1 
```

现在我想获取给定国家组的每个国家在“公民”表中最后输入的公民。

到目前为止，我最好的尝试是这个查询（我们称之为 Query_1）：

```
SELECT country_ref, MAX(entry_date) FROM citizens 
LEFT JOIN countries ON country_id = country_ref 
WHERE country_group = 1 GROUP BY country_ref 
```

输出：

```
country_ref   max
---------------------------------
3             2013-01-14 18:00:00
2             2013-01-14 17:00:00 
```

那么我可以这样做：

```
SELECT citizen_name FROM citizens WHERE (country_ref, entry_date) IN (Query_1) 
```

...这将为我提供我正在寻找的输出：`albert`和`esther`.

但我更愿意在*单个查询*中实现这一点。我想知道这是否可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T06:25:08.823

这应该是最简单和最快的：

```
SELECT DISTINCT ON (i.country_ref)
       i.citizen_name
FROM   citizens  i
JOIN   countries o ON o.country_id = i.country_ref
WHERE  o.country_group = 1
ORDER  BY i.country_ref, i.entry_date DESC 
```

您可以轻松地从两个表中返回更多列，只需将它们添加到`SELECT`列表中即可。
[**SQL小提琴。**](http://www.sqlfiddle.com/#!12/851fc/1)

此相关答案中的详细信息、链接和说明：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T23:32:47.723

```
SELECT citizen_name, 
       country_ref, 
       entry_date
from (
  SELECT cit.citizen_name, 
         cit.country_ref, 
         MAX(cit.entry_date) over (partition by cit.country_ref) as max_date,
         cit.entry_date
  FROM citizens cit
    LEFT JOIN countries cou ON cou.country_id = cit.country_ref 
  WHERE cou.country_group = 1 
) t
where max_date = entry_date 
```

SQLFiddle 演示：[http ://www.sqlfiddle.com/#!12/50776/1](http://www.sqlfiddle.com/#!12/50776/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T23:10:15.823

你为什么不简单地：

```
SELECT citizen_name FROM citizens WHERE (country_ref, entry_date) IN (
    SELECT country_ref, MAX(entry_date) FROM citizens 
    LEFT JOIN countries ON country_id = country_ref 
    WHERE country_group = 1 GROUP BY country_ref
) 
```

这可能不是最好的计划，但它取决于很多因素，而且写起来很简单。

# qt - 如何继承 QGLWidget 以使用 glew？

> ID：14803658
> 
> 赞同：2
> 
> 时间：2013-02-10T23:03:50.677
> 
> 标签：qt, qt5, glew, qglwidget

我正在努力获得一个使用 glew 编译的 QGLWidget 子类。我在 Windows 7 上运行 Qt 5.0.1 + MinGW 4.7。Glew 1.7.0 已经用所述 MinGW 编译。

我将 QGLWidget 与 UGGLWidget 子类化，并`"GL/glew.h"`在 QGLWidget 包含之前包含在内。编译时出现 200 个错误：

*   “功能”*重新声明为不同类型的符号*
*   *冲突的声明*'typedef'

所以我的问题： **如何获得使用在 Qt5 下编译的 glew 的 QGLWidget 子类？**

* * *

编辑：我用另一个设置（Qt4.7 + MinGW4.4）尝试了同样的方法。它编译并运行得很好。我也尝试过使用更新版本的 glew (Qt5.0.1 + MinGW4.7 + glew1.9.0) 这也不能编译并给出相同的编译错误。

* * *

这是编译器输出的混乱片段：

```
> In file included from
> ..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include/QtGui/qopengl.h:55:0,
>                  from ..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtOpenGL/qgl.h:47,
>                  from ..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtOpenGL/QGLWidget:1,
>                  from src\UGGLWidget.h:4,
>                  from src\UGGLWidget.cpp:2: ..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include/GLES2/gl2.h:614:153:
> error: 'void __glewVertexAttribPointer(GLuint, GLint, GLenum,
> GLboolean, GLsizei, const GLvoid*)' redeclared as different kind of
> symbol In file included from src\UGGLWidget.cpp:1:0:
> ..\3rdPartyLibs\glew\include/GL/glew.h:13609:46: error: previous
> declaration of 'void (__attribute__((__stdcall__)) *
> __glewVertexAttribPointer)(GLuint, GLint, GLenum, GLboolean, GLsizei, const GLvoid*)' 
```

最后但并非最不重要的是子类的头文件和源文件。它现在真的只是空的。

来源：

```
//UGGLWidget.cpp
#include "GL/glew.h"
#include "UGGLWidget.h"

UGGLWidget::UGGLWidget(QWidget *parent) : QGLWidget(parent) { ... } 
```

标题：

```
//UGGLWidget.h
#ifndef UGGLWIDGET_H
#define UGGLWIDGET_H
#include <QGLWidget>

class UGGLWidget : public QGLWidget
{
    Q_OBJECT
public:
    explicit UGGLWidget(QWidget *parent = 0);
};
#endif // UGGLWIDGET_H 
```

哦，也许 .pro 文件中的相关部分

```
QT       += core gui opengl
greaterThan(QT_MAJOR_VERSION, 4): QT += widgets
LIBS += -L$$quote(../3rdPartyLibs/glew/lib/) -lglew32
LIBS += -lopengl32 -lglu32
INCLUDEPATH += $$quote(../3rdPartyLibs/glew/include) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:13:46.730

以下解决了我的问题，这无处不在，我包括 glew：

```
#include "GL/glew.h"
#define QT_NO_OPENGL_ES_2 
```

`-opengl desktop`另一种选择：在配置步骤中从源代码构建 Qt5.0.1 。

* * *

由于某种原因`QT_OPENGL_ES_2`在我的 Qt5.0.1 安装中定义。查看来自 QGLWidget.h 的包含内容，我在*QtCore/qconfig.h中找到了以下内容*

```
#if defined(QT_OPENGL_ES_2) && defined(QT_NO_OPENGL_ES_2)
# undef QT_OPENGL_ES_2
#elif !defined(QT_OPENGL_ES_2)
# define QT_OPENGL_ES_2
#endif 
```

这导致包含*GLES2/gl2.h*与 glew 不兼容。知道这个问题与 GLES2 有关，我遇到了一个[错误报告](https://bugreports.qt-project.org/browse/QTBUG-28821?page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel)和一个[QtProject 帖子](http://qt-project.org/forums/viewthread/23459)。如果我理解正确，那么已经构建了为 Qt5.0.1 提供的 QtSDK 安装程序，以便启用 GLES。

祝你有美好的一天，
~莫里茨

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T22:09:47.273

请注意，QT 4.8RC 发行说明说：包括 QtOpenGL 将无法与 GLEW 结合使用，因为 QGLFunctions 将取消定义 GLEW 的定义。

# ruby-on-rails - Rails STI：实现子类编辑表单

> ID：14803664
> 
> 赞同：0
> 
> 时间：2013-02-10T23:04:18.023
> 
> 标签：ruby-on-rails, routing, sti

关于 Rails 3 STI 以及如何使用表单有很多讨论，但 StackOverflow 上没有明确的答案。我似乎遇到了类似的问题，并尝试了其他解决方案但没有结果。

我有两个具有以下继承设置的模型：

```
User.rb
class User < ActiveRecord::Base
attr_accessible :email, :first_name, :last_name, #more follows

Waiter.rb
class Waiter < User 
```

在 /waiters/users/[:id]/edit 的表单上，我正在尝试创建一个用于编辑服务员的表单。但是，加载编辑视图时出现以下错误：

```
undefined method `waiter_path' for #<#<Class:0x007fbd08cef9d8>:0x007fbd09532fa0> 
```

这是我在 /app/controllers/admin/waiters/users_controller.rb 找到的控制器：

```
 def edit
    form_info
    @user = Waiter.find(params[:id])
  end

  def update
    @user = Waiter.find_by_id(params[:id])
    if @user.update_attributes(params[:user])
      flash[:notice] = "Successfully assigned Waiter."
      redirect_to admin_waiters_users_url()
    else
      form_info
      render :action => 'edit'
    end
  end 
```

这是位于编辑视图中的表单：

```
 <%= simple_form_for @user do |f| %>

  <%= f.input :first_name %>
  <%= f.input :last_name %>
  <%= f.input :email %>

      <%= button_tag(type: 'submit', class: "btn btn-primary") do %>
      <i class="icon-ok icon-white"></i> Save
      <% end %>
  <% end %> 
```

我在 STI 和路由方面做错了什么？

更新：这是我的耙子路线：

```
admin_waiters_users GET    /admin/waiters/users(.:format)                                                            admin/waiters/users#index
                                                                POST   /admin/waiters/users(.:format)                                                            admin/waiters/users#create
                                        new_admin_waiters_user GET    /admin/waiters/users/new(.:format)                                                        admin/waiters/users#new
                                       edit_admin_waiters_user GET    /admin/waiters/users/:id/edit(.:format)                                                   admin/waiters/users#edit
                                            admin_waiters_user GET    /admin/waiters/users/:id(.:format)                                                        admin/waiters/users#show
                                                                PUT    /admin/waiters/users/:id(.:format)                                                        admin/waiters/users#update 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:27:24.197

您应该使用您的路线来查看您定义的路线：

您可以使用以下方式运行您的路线：

```
rake routes 
```

我看不到您的路线，但可能`waiter_path`不存在。

也许是`user_waiter_path(@user)`或其他路由器。

请粘贴您的路线，以便 stackoverflow 上的人员可以为您提供帮助。

我在您的路线上看不到`waiter_path`路线，如果您在视图`waiter_path`内，`edit`则将其删除。

此外，您可以指定什么控制器和动作命中，

```
<%= simple_form_for @user, :url => { :controller => "admin/waiters/users", :action => "update"} do |f| %>
 <%= f.input :first_name %>
 <%= f.input :last_name %>
 <%= f.input :email %>
 <%= f.button :submit, "save", class: "btn btn-primary"%>
<% end %> 
```

您可以`f.button`改为检查`button_tag`

问候！

# powershell - 从另一个 .csv 中删除一个 .csv 中存在的行（windows、powershell、notepad++）

> ID：14803671
> 
> 赞同：2
> 
> 时间：2013-02-10T23:05:02.450
> 
> 标签：powershell, csv, notepad++

我有 notepad++、powershell 和 excel 2007。我有两个名为 *database.csv*和*import.csv*的 .csv 文件。Import.csv 包含我想在线放入我的数据库的新条目。Database.csv 包含该数据库中的当前记录。这两个文件都包含一个简单的逗号换行符分隔的唯一值列表。

但是，数据库可能已经包含新文件中的一些条目。并且，新文件包含不在数据库中的条目。并且，数据库文件包含仍保留用于记录目的但不在输入文件中的条目。

简单地将它们组合起来会导致任何持续存在的记录的重复。它还导致仅存在于数据库中的记录的单个副本和仅存在于输入文件中的记录。

我想要的是一个仅包含仅存在于输入文件中的记录的文件。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:52:47.583

假设您的 csv 文件具有列 a、b 和 c：

```
$db = Import-Csv database.csv
$import = Import-Csv import.csv
$new = Compare-Object -ReferenceObject $db -DifferenceObject $import -Property a,b,c -PassThru | ? { $_.SideIndicator -eq "=>" } | Select a,b,c 
```

只需将 a、b 和 c 替换为您要比较的列的名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T00:36:24.063

电源外壳：

```
Get-Content <database file> -TotalCount 1 |
 Set-Content C:\somedir\ToUpload.csv

$import = @{}

Get-Content <import file> |
 select -Skip 1
 foreach {
          $import[$_] = $true
         }

Get-Content <Database file> |
select -Skip 1 |
 foreach {
           if ($import[$_])
             {
              $import[$_].remove()
             }
         }

 $import.Keys |
  Add-Content C:\Somedir\ToUpload.csv 
```

或者，将这两个文件读入内存：

```
Get-Content <database file> -TotalCount 1 |
 Set-Content C:\somedir\ToUpload.csv

$import = Get-Content <import file>
 select -Skip 1

$database = Get-Content <database file>
 select -Skip 1

$import |
 where {$database -notcontains $_} |
 Add-Content C:\somedir\ToUpload.csv 
```

使用导入/导出 csv 的解决方案将起作用，但与将文件作为文本数据处理相比，会产生额外的内存和进程开销。差异可能很小或很大，具体取决于文件的大小和 csv 文件中的列数。恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:12:10.777

`Compare-Object`如果您没有任何要匹配的特定属性，有时会遇到从 csv 导入的自定义对象。

如果你想要性能（对于大型 csv 文件），你可以试试这个：

```
$i = @{}
[IO.File]::ReadAllLines("C:\input.csv") | % { $i[$_] = $true }

$reader = New-Object System.IO.StreamReader "C:\db.csv"

#Skip header. This way the output file(new.csv) will get input.csv's header
$reader.ReadLine() | Out-Null

while (($line = $reader.ReadLine()) -ne $null) {
    #Remove row if it exists in db.csv
    if ($i.ContainsKey($line)) {
        $i.Remove($line)
    }
}
$reader.Close()

$i.Keys | Add-Content c:\new.csv 
```

# objective-c - 如何从另一个视图控制器 IBAction 引用主视图控制器文本字段？

> ID：14803673
> 
> 赞同：0
> 
> 时间：2013-02-10T23:05:37.443
> 
> 标签：objective-c

我有一个主视图控制器和一个“首选项”视图控制器。首选项视图控制器上有一个“保存”按钮。它`IBAction`位于主 ViewController.m 文件中。

将首选项保存到 后`NSUserDefaults`，IBAction 会弹回主视图控制器。

此处的最后一个操作是“清除”`UITextField`该主视图控制器窗口上的一个 s。

问题是，我似乎无法弄清楚如何简单地引用该主视图控制器。

在 VisualBasic 中我们会说： Window1.finalTextField.text = "";

找到'Window1'的obj-c等价物是什么？我已经尝试过 ViewController 的子类，但这似乎只适用于*其他*Windows，而不适用于主视图控制器。

最后一行代码不起作用： **self.finalTextField.text = @"";**

```
- (IBAction)savePrefButton:(id)sender
    {
    int yPref = prefYsegmentedControl.selectedSegmentIndex;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setInteger:yPref forKey:@"yPref"];
    [defaults synchronize];

    NSLog(@"Data saved");

    [self.navigationController popViewControllerAnimated:YES];

    self.finalTextField.text = @"";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:41:10.163

如果`finalTextField`在您的主视图控制器中被定义为一个 IBOUlet，那么您可以通过它的名称从该视图控制器中访问它：

```
[finalTextField setText:@""]; 
```

当然，请务必将变量链接到 IB 中的文本字段。

如果您想`finalTextField`从您的首选项视图控制器访问您的主视图控制器，那么您需要 1）在您的主视图控制器上创建一个属性以公开该变量，以及 2）为您的主视图传递一个对您的首选项视图控制器的引用控制器。

例如在属性视图控制器 .h 中：

```
MainViewController *mainViewController;

@property (nonatomic, weak) MainViewController *mainViewController; 
```

然后在属性视图控制器.m：

```
[self.mainViewController.finalTextField setText:@""]; 
```

然后，当您推送您的 segue（在主视图控制器中）时，请务必将引用设置回来：

在 prepareForSegue 中：

```
if([segue.identifier isEqualToString:@"XXXX"])
{    
    PropertyViewController *propertyViewController = segue.destinationViewController;
    propertyViewController.mainViewController = self;
} 
```

注意：将 PropertyViewController 和 MainViewController 更改为您的属性视图控制器和主视图控制器的类名。

# ruby-on-rails - 模仿 var_dump // 退出行为 - Rails

> ID：14803676
> 
> 赞同：1
> 
> 时间：2013-02-10T23:06:01.823
> 
> 标签：ruby-on-rails, yaml, abort, var-dump

在此站点上出现一些相关问题后，我正在尝试调试我的 ror 代码，使用 puts YAML::dump(object) 在我的控制器的某些留置权中（试图模仿 var_dump() 行为）。但我在我的 chrome 控制台中看不到任何输出。顺便说一句，如果
我添加`puts YAML::dump(object) abort('message')`（试图模仿 var_dump() 行为），我也没有得到任何输出（我有一个错误页面，但没有我的对象转储的痕迹）。怎么做

# opencv - 最大颜色数量和可能的最大深度

> ID：14803680
> 
> 赞同：0
> 
> 时间：2013-02-10T23:06:55.353
> 
> 标签：opencv, colors, color-depth

图片的最大颜色数是多少？

最大深度是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:20:15.597

我假设您正在询问使用 RGB 颜色模型的图像。

使用了多种不同的颜色深度 - 8 位（2^24 种可能的颜色，但实际上图像上可能仅使用 2^8 种），16 位（2^15 或 2^16 种可能的颜色，具体取决于实现）有问题），24 位（2^24 种可能的颜色）和某些设备可能很好地使用 48 位深度（2^48 种可能的颜色）。

今天，24 位颜色被认为是大多数图像格式的标准，并且通常扩展为 32 位 ARGB 或 RGBA。

# signalr - SignalR groups not invoked

> ID：14803682
> 
> 赞同：1
> 
> 时间：2013-02-10T23:07:11.620
> 
> 标签：signalr

I am doing my first tests with SignalR. I am toying with chat messages, but that's only a first step to replace all the polling from client to server which I have today on my site.

I have a lot of scenarios where I want to notify certain users either by their login or by their ID. The idea is that I am adding each user to two groups as soon as he connects. I do this in OnConnected and that event is called.

When I send a chat message, I have two modes: either public or personal. If it is personal the sender is notified and the recipient should be notified. The sender gets a message but the group never does. It seems to be impossible to found out how many members a group has.

Any ideas what's going wrong here?

```
public class GlobalHub:Hub
{
    private Users user;

    private void AuthenticateUser()
    {
        var ydc = new MyDataContext();
        user = ydc.Users.First(u => u.Login == HttpContext.Current.User.Identity.Name);
    }

    public override Task OnConnected()
    {
        var ydc = new MyDataContext();
        user = ydc.Users.First(u => u.Login == HttpContext.Current.User.Identity.Name);

        Groups.Add(Context.ConnectionId, user.Login);
        Groups.Add(Context.ConnectionId, user.ID.ToString());
        return base.OnConnected();
    }

public void SendChatMessage(string message, string recipient)
{
    AuthenticateUser();
    var cm = ChatController.AddChatMessage(user.Login, user.ID, recipient, tmessage);

    if (recipient != "")
    {
        Clients.Caller.NewMessage(cm);
        Clients.Group(recipient).NewMessage(cm);
    }
    else
    {
        Clients.All.NewMessage(cm);
    } 
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:22:20.660

看起来 Groups.Add 并没有立即加入到组的连接，而是返回一个需要启动的任务。尝试返回 Groups.Add 的结果作为 OnConnectedMethod 的结果。

另见更详细的解释：[https ://stackoverflow.com/a/15469038/174638](https://stackoverflow.com/a/15469038/174638)

# php - How to implement FIFO with php coding?

> ID：14803683
> 
> 赞同：0
> 
> 时间：2013-02-10T23:07:15.393
> 
> 标签：php, arrays, stock

I would like to Implement FIFO with PHP coding.

How can I write php coding minus stock by using FIFO?

In Examle,

```
Sotck In

ID Itemname QtyIn Price Total Date
1  A         2   $3    5$   01-jan-2013
2  A         4   $2    8$   02-jan-2013 
3  B         3   $2    6$   01-jan-2013

Sotck Out

ID Itemname QtyOut  Date
1  A         3   05-jan-2013

Than i will insert into transactions as the following:

ID Itemname QtyOut Price Total Date
1  A         2   $3    6$   05-jan-2013
2  A         1   $2    2$   05-jan-2013 

Sotck In Remain Balance :

ID Itemname Qty Price Total Date
1  A         0   $3    0$   01-jan-2013
2  A         3   $2    6$   02-jan-2013 
3  B         3   $2    6$   01-jan-2013 
```

Please give solution and tell flow in php check and minus qtyIn by date asc.

Regards,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:26:39.910

FIFO has nothing to do with your problem. Just use a MySQL database and learn about the ORDER BY keyword. Your goal seems to be some sort of persistent data storage anyhow.

# java - 如何覆盖Java子类中Super对象的字段？

> ID：14803690
> 
> 赞同：0
> 
> 时间：2013-02-10T23:07:36.293
> 
> 标签：java, oop, inheritance

我有这两个类：

```
class Parent
{ 
   protected static String table;

   public static long getRow()
   {
      String query = "SELECT * FROM " + table + " WHERE id =? " ;
      //other code...
   }
} 
```

然后我扩展这个类：

```
class Child extends Parent
{
    protected static String table = "tableName";
   //other code..
} 
```

但是，当我尝试这样做时：

`long id = Child.getRow();`

我收到一个错误，因为查询正在将“null”放入`table`应该是值的位置。即`SELECT * FROM null`。

我认为`table`在子类中设置的值会导致它在它继承的方法中也被更新，但显然不是。我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:10:05.017

**实例变量**（也是静态变量）是`not overridden in your subclass`. 如果它们被标记为受保护、公共或默认，它们仅在您的子类中可见。多态性和继承不适用于实例变量。为了让您的代码正常工作，唯一的选择是让您的 getRow() 方法在您的子类中公开覆盖它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:13:14.080

您不能以这种方式覆盖变量。在您的示例中，每个类都有自己的`table`变量版本，并且在`getRow`定义方法的父级中，变量未定义。这是您可以使用的更好的设计：

```
abstract class Parent {

   public abstract String getTable();

   public static long getRow() {
      String query = String.format("SELECT * FROM %s WHERE id = ?", getTable()) ;
      //other code...
   }
}

class Child extends Parent {
    public String getTable() {
        return "tableName";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:09:49.590

用 getter/setter 方法替换裸字段访问。

当您覆盖子类中的 getter/setter 时，您可以控制它读取和写入的变量。

Java 不提供对字段访问的这种级别的控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T23:16:16.377

只是一件小事。在方法内部，您可以使用 super 访问阴影字段。如果将此代码放在 Child 类中：

```
public void foo() {

    this.table="this belongs to the child";
    super.table="this belongs to the parent";
} 
```

请注意 this.table 和 super.table 是不同的。无论如何，不​​建议使用阴影字段。

# javascript - Jquery onclick for anything inside a div

> ID：14803692
> 
> 赞同：0
> 
> 时间：2013-02-10T23:07:57.257
> 
> 标签：javascript, jquery, html, css

I know this is pretty easy, and I am probably missing something very obvious, but here it goes.

I have an `<ul>` with a bunch of stuff inside.

I have set jquery, so that when `<ul>` is clicked, to assign it a class name, but it doesn't work.

```
$(document).ready(function() {
    $('#list').click(function(event) {
        event.stopPropagation();
        $(this).addClass('left');
    });
}); 
```

It works however, if the `<ul>` is wider than the stuff in it, and I click where there is no stuff.

Here is the HTML

```
 <ul id="list">
        <li>
          <a href="#" class="pos1">
            <span class="ei_preview"></span>
            <span class="ei_image"></span>
          </a>
          <div class="ei_descr">
            <h2>Name</h2>
            <h3>Last Name</h3>
            <p>
           Herp derp derp, hurr durr
            </p>
            <p>
           Herp derp derp, hurr durr
            </p>
          </div>
        </li>
        <li>
          <a href="#" class="pos2">
            <span class="ei_preview"></span>
            <span class="ei_image"></span>
          </a>
          <div class="ei_descr">
            <h2>Name</h2>
            <h3>Last name</h3>
            <p>
           Herp derp derp, hurr durr
            </p>
            <p>
            Herp derp derp, hurr durr
            </p>
          </div>

        </li>
</ul> 
```

EDIT: After looking at the CSS, when I click a `<li>`, it doesn't work for the `<ul>` because `<li>` is set as `position: relative;`. Any idea how to overcome this without removing the position property ?

CSS as requested : [http://hastebin.com/pahaxexabo.css](http://hastebin.com/pahaxexabo.css)

The `.left` is the class I want to assign to the `<ul>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:12:00.137

那么没有html，很难调试你的javascript。

查看您的 java 脚本，当单击具有 id 'list' 的元素时，您的函数将触发。

您的 ul 标签是否具有属性 id="list" ？

如果要单击任何 ul 标记来触发事件，请将 jquery 中的第二行更改为以下内容：

```
...
$('ul').click(function(event) {
... 
```

另外，我不确定你为什么需要下面的代码，看起来它是多余的

```
event.stopPropagation(); 
```

你的javascript似乎很好。问题可能出在您的 CSS 上。尝试使用已添加的类编写 HTML，并检查 ul 是否具有所需的样式。一旦它具有所需的 css 样式，然后再次尝试使用 jquery。

# android - 有没有其他方法可以在 Android 中启动振动？

> ID：14803696
> 
> 赞同：0
> 
> 时间：2013-02-10T23:08:15.117
> 
> 标签：android, vibration

抱歉，如果这个问题有点糟糕，但一位用户报告说我的应用程序中的振动不适用于他的三星 Galaxy S3。有没有人遇到过这种手机型号的问题？

我正在使用振动的标准代码：

```
Vibrator vibe = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
vibe.vibrate(1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:21:24.513

刚试过它正在我的S3上工作。安卓版本是4.1.2，

*PS：这个问题可能对未来的目的没有帮助，它可能会被关闭。*

# ios - iOS in-app purchase server model

> ID：14803697
> 
> 赞同：1
> 
> 时间：2013-02-10T23:08:23.017
> 
> 标签：ios, in-app-purchase

I understand that in server model of in-App purchases in iOS, the products(non-consumables in my case) would have to be hosted on my own server. Now, with iOS 6, it seems apple allows you to upload content to their servers. Does that mean that if I have to add more products in the future, I only have to upload more content, add description and pricing, associate it with my app and submit it for approval? or do I still need to have a list of products on my own server which will be updated(with new products in the future) and downloaded by the app after purchasing and which will fetch products?

Sorry if I am sounding confusing but I could do with some clarification.

THanks.

# css - CSS 悬停不工作？

> ID：14803701
> 
> 赞同：0
> 
> 时间：2013-02-10T23:08:54.353
> 
> 标签：css, hover

在您将鼠标悬停在菜单上之前，我不想显示菜单上的简短说明。我不能让它工作，也不知道为什么。在我的示例中，预期的结果是`My Work`最初应该隐藏单词，然后在悬停时单词`My Work`变得可见。悬停不工作。

[这是一个工作小提琴](http://jsfiddle.net/Lynda333/2Wrj7/1/)和代码：

***HTML***

```
<ul id="sdt_menu" class="sdt_menu">
<li>
    <a href="#">
        <img src="images/1.jpg" alt=""/>
        <span class="sdt_active"></span>
        <span class="sdt_wrap">
            <span class="sdt_link">Portfolio</span>
            <span class="sdt_descr">My work</span>
        </span>
     </a>
   </li>
 </ul> 
```

***CSS***

```
ul.sdt_menu li .sdt_descr{
   visibility:hidden;
}
ul.sdt_menu li .sdt_descr:hover{
   visibility:visible;
} 
```

如果这是一个更好的解决方案，我不介意使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:18:13.003

这是一种奇怪的行为（在用户悬停之前隐藏某些东西）。它本质上是一个隐藏的功能，因此可能是一个用户体验问题。

除此之外，该元素没有注册为“悬停”，因为它是隐藏的。您可以使用`opacity`（及其特定于 IE 的对应物`filter:alpha`）使元素在悬停之前完全透明，从而获得所需的效果：

```
ul.sdt_menu li .sdt_descr{
    opacity: 0;
    filter:alpha(opacity=0);
}
ul.sdt_menu li .sdt_descr:hover{
    opacity: 1;
    filter:alpha(opacity=100);
} 
```

应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:24:14.937

而不是这个：

```
ul.sdt_menu li .sdt_descr:hover{
   visibility:visible;
} 
```

把这个：

```
ul.sdt_menu li:hover .sdt_descr{
   visibility:visible;
} 
```

这将允许您在用户悬停 li 元素时显示描述。[http://jsfiddle.net/2Wrj7/3/](http://jsfiddle.net/2Wrj7/3/)

# javascript - 使用 JavaScript 创建标签数组

> ID：14803708
> 
> 赞同：0
> 
> 时间：2013-02-10T23:09:29.293
> 
> 标签：javascript, arrays

```
var buttonArray = [
    document.getElementById('underline'),
    document.getElementById('bold'),
    document.getElementById('italic'),
    document.getElementById('tnr'),
    document.getElementById('ss'),
    document.getElementById('red'),
    document.getElementById('green'),
    document.getElementById('blue')
]; 
```

你能做这个吗？还是太抽象了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:11:06.210

是的; 那会很好用。

你可以像这样使它更优雅：

```
var buttonArray = [ "underline", ... ]
                  .map(document.getElementById.bind(document)); 
```

# java - 尝试在数组中添加字母的出现

> ID：14803709
> 
> 赞同：0
> 
> 时间：2013-02-10T23:09:31.460
> 
> 标签：java

所以我正在做的是创建一个读取 2 个文本文件的程序，1 个是纯文本文件，另一个是文本文件的加密版本。

我将字符串（对于每一行）设置为大写，并获取字符串索引 0-65 的字符，这就是我在数组中的位置。

```
 import java.util.Scanner;
   import java.io.File;
   import java.io.FileNotFoundException;
   public class ReadIn {
public void fileReader(){
try{
    Scanner inFile1 = new Scanner(new File("plaintext.txt"));
    //Scanner inFile2 = new Scanner(new File("ciphertext.txt"));
    int lol[] = new int[27];
    while(inFile1.hasNextLine()){
        String base = inFile1.nextLine();
        base.toUpperCase();
        String placeHolder = base;
        for(int i=0;i<base.length();i++){
            if(placeHolder.charAt(0)==' '){}
            else if(base.charAt(0)=='.'){}else if(base.charAt(0)==','){}
            else if(base.charAt(0)=='"'){}else if(base.charAt(0)==':'){}
            else if(base.charAt(0)=='-'){}else if(base.charAt(0)=='?'){}
            else if(base.charAt(0)=='!'){}else{lol[(base.charAt(0)-65)]++;}
            placeHolder = placeHolder.substring(1);
        }
    }
    for(int j=0;j<lol.length;j++){
        System.out.println(lol[j]);
        //To show what is inside the Index.
    }

    }catch(FileNotFoundException e){
        System.out.println("File is not in the correct directory!");
    }catch(ArrayIndexOutOfBoundsException e){
        System.out.println("Array Index is to small!!");
    }
  }
} 
```

这是我将数组大小设置为 60 时得到的输出

> 142 119 0 0 0 62 60 0 682 0 0 179 24 232 0 62 0 0 0 184 0 0 440 0 63 0 0 0 0 0 0 0 471 182 215 94 60 409 0 242 174 079 30 52 89 7 472 673 101 62 324 0 124 0 0 0

问题是，当我运行程序时，为什么我的数组很小。如果所有字母都大写，则从 'A' 之类的字符中减去 65 应为 0，因此将 1 添加到数组中的索引 [0]。

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

更新

好的，所以我通过“base = base = base.toUpperCase();”将字符串设置为自己大写 这完美无缺，除了我的数组必须设置为 91 以补偿 ascii 中的 Z (90) 当我尝试转到数组的索引点添加我使用 [(base.charAt(0)-65) ]++ 但它抛出 ArrayIndexOutOfBoundsException -21

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:26:27.640

您`base`仍然包含小写字符，因为您没有使用`toUpperCase()`. 您的测试数据证实了这一点：您的输出跨越了从 65 ( `A`) 到 122 ( `z`) 的 ASCII 范围，计算了 58 个不同的字符代码。

Java中的字符串是不可变的，它们的值在构造后不会改变。因此，`base.toUpperCase()`返回一个*新字符串*并且不修改原始`base`字符串。您想`base`用它的大写版本替换，因此您应该覆盖它的值，使其指向返回的字符串：

```
base = base.toUpperCase(); 
```

# javascript - 将鼠标悬停在子级上但排除父级 div

> ID：14803710
> 
> 赞同：0
> 
> 时间：2013-02-10T23:09:35.447
> 
> 标签：javascript, jquery, css

我在同一个类的父 div 中有一个子 div。现在，如果您将鼠标悬停在父级内的子级 div 上，则会为子级和父级添加一个边框。我想确保只有悬停的 div 才会应用边框。

```
$(document).ready(function () {
                            $(".content").hover(function () {
                                $(this).parents().removeClass('divHoverBorder');
                                $(this).siblings().removeClass('divHoverBorder');
                                $(this).addClass("divHoverBorder");
                                $(this).parents().find(".addContentItemDiv").hide();
                                $(this).find(".addContentItemDiv:first").show();

                            }, function () {
                                $(this).removeClass("divHoverBorder");
                                $('.addContentItemDiv').hide();
                            });
                        });

<div class="content" style="width: 500px; height: 300px;">
    <div class="content" style="width: 500px;  height: 200px;">

</div>
</div> 
```

这是我所指的 JSFiddle：

[JS小提琴](http://jsfiddle.net/mbishop2140/tTUaj/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:11:27.507

你的主要问题在这里：

```
<div class="content" style="width: 500px; height: 300px;">
    <div class="content" style="width: 500px;  height: 200px;">    
</div> 
```

由于两个 div 具有相同的类，因此您实际上是在它们上放置了一个悬停事件，并且您的 JQuery 无法区分它们。

既然你表明你必须这样做，你去：

```
$(document).ready(function () {
    $(".content").mouseover(function (e) {
        $(this).parents().removeClass('divHoverBorder');
        $(this).siblings().removeClass('divHoverBorder');
        $(this).addClass("divHoverBorder");
        $(this).parents().find(".addContentItemDiv").hide();
        $(this).find(".addContentItemDiv:first").show();
        var p = $(this).parent('.content');
        if (p.length) { p.removeClass('divHoverBorder'); e.stopPropagation(); }
    });
    $('.content').mouseout(function (e) {
        $(this).removeClass("divHoverBorder");
        $('.addContentItemDiv').hide();
    });
}); 
```

请注意，您不能使用`hover`. 悬停在 JQuery 中使用`mouseenter`and`mouseleave`事件，这将防止当鼠标从子级移到父级时触发事件。我们必须同时移除父边界（在进入子边界的情况下）*并*停止传播以防止它重新应用自己的边界。

`mouseenter`这是 JQuery 文档中关于和之间区别的解释`mouseover`：

> ^(mouseenter 事件在处理事件冒泡的方式上与 mouseover 不同。如果在这个例子中使用了 mouseover，那么当鼠标指针移动到 Inner 元素上时，将触发处理程序。这通常是不受欢迎的行为。另一方面，mouseenter 事件仅在鼠标进入它所绑定的元素而不是后代元素时触发其处理程序。所以在这个例子中，当鼠标进入 Outer 元素而不是 Inner 元素时，会触发处理程序。)

您更新的小提琴：http: [//jsfiddle.net/tTUaj/10/](http://jsfiddle.net/tTUaj/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:32:39.493

使用这样的东西：

```
 $(".content").hover(function (ev) {
    if ($(ev.currentTarget).parent().hasClass(".content")){
     //this is a child
    } else {
    //this is a parent
    }
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T23:41:37.877

我会推荐这样的东西：http: [//jsfiddle.net/3SVGe/1/](http://jsfiddle.net/3SVGe/1/)

```
$(".cell").hover(function () {
    $(".cell").removeClass("over");
    $(this).addClass("over");
}, function () {
    $(this).removeClass("over");
}); 
```

您的问题是，当悬停在子元素上时，会在父元素上触发悬停事件。这回避了这个问题。

或者，您可以遵循一个稍微复杂的解决方案，这将允许将鼠标悬停在父级上，然后是子级，然后是父级。一个例子在这里：http: [//jsfiddle.net/3SVGe/2/](http://jsfiddle.net/3SVGe/2/)

# java - 为什么添加一个空的 for 循环会修复此代码？

> ID：14803713
> 
> 赞同：1
> 
> 时间：2013-02-10T23:09:48.307
> 
> 标签：java, android, ringtone

我正在尝试播放用户选择的铃声。

当我使用此代码时：

```
RingtoneManager ringtoneManager = new RingtoneManager(this);
Uri uri = ringtoneManager.getRingtoneUri(position);

if(uri == null) {
    Log.d("ALARM", "uri is null");
}

try {
    mediaPlayer.setDataSource(getApplicationContext(), uri);
    mediaPlayer.prepare();  
    mediaPlayer.setLooping(true);
    mediaPlayer.start();
} catch (Exception e) {
    // Handle exception
} 
```

我得到“uri is null”并且没有任何反应，但是如果我像这样预先放入一个空的for循环：

```
for(int i = 0; i < ringtoneManager.getCursor().getCount(); ++i) {
//WTF
}

RingtoneManager ringtoneManager = new RingtoneManager(this);
Uri uri = ringtoneManager.getRingtoneUri(position);

if(uri == null) {
    Log.d("ALARM", "uri is null");
}

try {
    mediaPlayer.setDataSource(getApplicationContext(), uri);
    mediaPlayer.prepare();  
    mediaPlayer.setLooping(true);
    mediaPlayer.start();
} catch (Exception e) {
    // Handle exception
} 
```

uri 不为空，铃声播放...

谁能解释这里发生了什么，以及我应该做些什么来避免这种黑客攻击？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:16:07.450

`RingtoneManager` [有两个构造函数](http://developer.android.com/reference/android/media/RingtoneManager.html#RingtoneManager%28android.content.Context%29)。其中一个接受一个上下文，另一个接受一个活动。根据文档，接受 Activity 的那个将为您管理光标。接受 Context 的人不会。

如果要相信文档，听起来您`this`不是 Activity，因此，`RingtoneManager`您获得的实例不是管理光标，而是希望您调用`getCursor()`.

# c - 使用 gcc -c 生成 .o 文件

> ID：14803717
> 
> 赞同：4
> 
> 时间：2013-02-10T23:09:55.017
> 
> 标签：c, gcc, linked-list

所以我必须创建一些代码来制作一个列表并对它做各种事情。专门打印它，对其进行排序，然后查看其中是否包含值。做到了，运行良好。现在我必须使用这些函数并将它们拆分为单独的文件，然后使用 gcc -c （我不确定我是否正确使用）来获取 .o 文件，以及用于测试程序的 .o . 然后我必须使用 gcc 将我的 .o 文件链接到一个可执行文件中。提示说它将识别 .o 并实现如何链接它们。

所以这是我的问题：为什么下面的代码会返回错误（以下面定义的方式）？我到底应该在命令行中写入什么来链接这些人？

所以代码如下：（首先是 .h 文件，然后是主 .c 文件）

节点.h

```
typedef struct Node{
    int data;
    struct Node *next;
    struct Node *prev;
}node; 
```

打印.h

```
#include<stdio.h>
#include"node.h"
void print(node *pointer){
    if (pointer == NULL){
        return;
    }

    printf("%d ",pointer->data);
    print(pointer->next);
} 
```

初始化.h

```
#include<stdio.h>
#include"node.h"
int init(node *pointer,int find){
    pointer = pointer->next;

    while (pointer != NULL){
        if (pointer->data == find)//found find
        {
            printf("The data is in the list.");
            return 1;
        }
        pointer = pointer->next;// Search in the next node.
    }

    //find is not found
    printf("The data is not in the list.");
    return 0;
} 
```

排序.h

```
#include<stdio.h>
#include"node.h"

void swap (node *x, node *y){
    int temp = x->data;
    x->data = y->data;
    y->data = temp;
}

void sort(node*pointer){
    int i;

    while (pointer->next != NULL){
        if (pointer->data>pointer->next->data){
            swap(pointer,pointer->next);
        }

        pointer = pointer->next;
        sort(pointer);
    }
} 
```

列表.c

```
#include<stdio.h>
#include<stdlib.h>
#include"node.h"
#lnclude"print.h"
#include"sort.h"
#include"init.h"
int i;
node *p;
node *n;

void insert(node *pointer, int data){
    //go through list till ya find the last node
    while (pointer->next != NULL){
        pointer = pointer->next;
    }

    //allocate memory for new node and put data in it
    pointer->next = (node *)malloc(sizeof(node));
    (pointer->next)->prev = pointer;
    pointer = pointer->next;
    pointer->data = data;
    pointer->next = NULL;
}

int main(){
    //start is used to point to the first node
    //temp is for the last node
    node *start, *temp;
    int z;
    start = (node *)malloc(sizeof(node));
    temp = new;
    temp->next = NULL;
    temp->prev = NULL;

    for (z = 0; z < 10; z++){
        insert(start,(3*10) - z);
    }

    init(start,12);
    init(start,3);
    init(start,27);
    init(start,7);
    print(start);
    sort(start);
    print(start);

} 
```

现在，除了 node.h （它始终是一个单独的文件）之外，所有代码都运行得非常好。.h 文件将完美编译，但是当我尝试编译 .c 文件时，它返回错误，声称我正在尝试重新定义每个 .h 文件中的节点。这可能是因为我将它包含在每个 .h 文件中吗？

我也收到错误，我试图将不适当的参数传递给 init 函数，这似乎并非如此。但我可能只是在看东西。

预先感谢您的任何帮助。

编辑：在输入“gcc list.c”时将 main 中的变量从 new 更改为 start 错误

```
In file included from init.h:2:0,
                 from list.c:4:
node.h:1:16 error: redefinition of'struct Node'
node.h:1:16 note: originally defined here
node.h:5:2  error: conflicting types for 'node'
node.h:5:2  note: previous declaration of 'node' was here

In file included from sort.h:2:0;
                 from list.c:5:
node.h:1:16 error: redefinition of'struct Node'
node.h:1:16 note: originally defined here
node.h:5:2  error: conflicting types for 'node'
node.h:5:2  note: previous declaration of 'node' was here

list.c: In function 'main':
list.c:41:1: warning: passing argument 1 of 'init' from incompatible pointer type[enabled by default]
init.h:4:5: note: expected 'struct node *' but argument is of type 'struct node *' 
```

（然后main中的每个单独的init调用都有错误）

```
list.c:45:1: warning:passing argument 1 of 'print' from incompatible pointer type [enabled by default]
print.h:3:6: note expected 'struct node *' but argument is of type 'struct node *' 
```

（然后还有另一个用于第二个打印功能）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T23:14:52.777

在 .h 文件中放置包含障碍。例如，对于 sort.h

```
#ifndef INCLUDE_SORT_H
#define INCLUDE_SORT_H

// contents of file

#endif 
```

* * *

**编辑**

实际上，我只是更仔细地查看了您的代码。您已经在 .h 文件中定义了函数，这不是要做的事情。真的，我认为根本没有理由将它分成单独的文件。

因此，将它们全部组合到一个文件中并编译：

```
gcc -o list -Wall list.c 
```

如果您真的想要单独的文件，则将函数放入 C 文件中，并将结构和原型放入 .h 文件（您将其包含在每个 C 文件中）。然后使用类似的东西编译和链接：

```
gcc -o list -Wall list.c node.c main.c 
```

# android - Android：以编程方式强制平板电脑的不同方向

> ID：14803724
> 
> 赞同：0
> 
> 时间：2013-02-10T23:10:28.310
> 
> 标签：android, orientation, landscape-portrait

我想在我的应用程序中强制使用两个不同的方向。仅适用于智能手机的纵向，仅适用于平板电脑的横向。由于我必须在每个活动的清单中定义它，我无法弄清楚如何以编程方式进行！

我在我的活动 onCreate 中尝试使用 setRequestedOrientation(int requestedOrientation) ，但它并没有真正从我请求的方向开始。在设置我的请求方向之前有一些日子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:23:36.990

开发两个不同的版本，每个版本都强制它自己的方向并针对特定的屏幕尺寸和分布。

# php - 将 mysqli 传递给类以供函数使用

> ID：14803727
> 
> 赞同：2
> 
> 时间：2013-02-10T23:10:50.733
> 
> 标签：php, oop, constructor, mysqli

可能被问了很多次，但我很顽固。

我有以下课程来管理 MySQL 数据库。

```
class blog {        
    function show ($mysqli) {
    // Code working on $mysqli here
    }
} 
```

因为我将在这个类的许多函数中使用 $mysqli，所以我读到我可以创建构造函数，以便将 $mysqli 变量传递给类并在每个函数中使用它，这样我就可以执行以下操作：

```
$blog = new blog($mysqli);
$blog -> show(); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:16:08.157

这称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

只需`$mysqli`在您的类中使用一个字段并在您的构造函数中初始化它并通过以下方式使用它`$this->mysqli`：

```
class blog {  
    private $mysqli;

    function __construct(mysqli $mysqli) {
        $this->mysqli = $mysqli;
    }

    function show () {
        // Code working on $this->mysqli here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:16:17.313

要将其存储在类中，将类似于：

```
class blog {
    private $mysqli;
    function __construct($dbi) {
        $this->mysqli = $dbi;
    }        
    function show () {
    $this->mysqli->query(); //example usage
    // Code working on $mysqli here
    }
} 
```

然后在您的代码中使用该类：

```
$blog = new blog($mysqli);
$blog->show(); 
```

# mysql - mysql dll 永远不会出现在 bin 文件夹中

> ID：14803731
> 
> 赞同：3
> 
> 时间：2013-02-10T23:11:13.373
> 
> 标签：mysql, visual-studio, dll

我的网站使用 MySql 作为其数据库。我使用添加引用和浏览到它们的位置添加了对 MySql.Data、MySql.Data.Entity、MySql.Web dll 的引用。但是，这些 dll 永远不会在我的 bin 文件夹中，因此当我发布到主机服务器时不会随站点一起发布。如果我再次添加它们，则会在浏览部分检查它们，因此该站点知道它们应该被引用但不在 bin 文件夹中。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T13:07:00.973

`MySql.Data.dll`位于 GAC（全局程序集缓存）中，这就是为什么 Visual Studio 不会将其复制到 bin 文件夹中的原因，*即使它* `Copy Local`是真的。

您可以从安装目录复制程序集（我能够在其中找到它`Program Files/MySQL/MySQL Connector xxx/Assemblies`并将其手动复制到 bin 文件夹以进行部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:24:25.703

If you select your MySQL References in the solution browser, you can control if it gets copied or not to your bin folder. I forget the exact name of the propery, but it should be fairly easy to spot.

# ios - 有人可以建议我向服务器发送 Get、Post 和 Put 请求的库吗？

> ID：14803734
> 
> 赞同：-1
> 
> 时间：2013-02-10T23:11:50.720
> 
> 标签：ios, ios5, ios6

我对 iOS 很陌生（刚开始），需要实现对 REST Web 服务（Get、Post、Put）的请求。有人可以为此推荐我图书馆吗？（我找到了 SIKHttpRequest 但我在演示中找不到在 Get、Post 和 Put 之间进行选择。我使用的是 ios 6）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:15:26.463

AFNetworking 是最好的开源通信库之一。

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:05:53.620

[RestKit](http://restkit.org/)在那里。想想也是。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T04:57:41.840

ASI 是一个很棒的库[asi-http-request](https://github.com/pokeb/asi-http-request)。另请参阅[此处](https://stackoverflow.com/questions/7491517/objective-c-asynchronously-populate-uitableview-how-to-do-this)了解有关它的意见。

# java - 创建一个带有图标和名称的快捷按钮，如三星的时钟应用程序

> ID：14803740
> 
> 赞同：0
> 
> 时间：2013-02-10T23:12:35.647
> 
> 标签：java, android, button, android-intent, shortcut

我想制作一个 Button 或 ImageView 或类似的东西来启动应用程序。在某些时候，我想做几个来继续添加三星桌面时钟[应用程序](https://dl.dropbox.com/u/21682671/Untitled-1.png)等快捷方式。

目前，我设置了一些我希望能够单击的空白按钮，选择我想要的应用程序，然后应用程序为按钮创建图标和名称（如上），然后在我单击它时启动意图。

任何想法、例子等都很棒，我在寻找一种方法来做到这一点时感到头疼：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:11:41.793

查看这篇文章：[https ://stackoverflow.com/a/7107138/1337412](https://stackoverflow.com/a/7107138/1337412)

如果您搜索 StackOverflow 和 Google，您基本上是在尝试创建自定义“启动器应用程序”，您应该能够找到大量启动器应用程序示例。

# python - 在误差范围内近似 pi

> ID：14803742
> 
> 赞同：2
> 
> 时间：2013-02-10T23:12:55.540
> 
> 标签：python

首先，这就是问题所在。

> 数学常数 π (pi) 是一个无理数，其值约为 3.1415928... π 的精确值等于以下无穷和：π = 4/1 - 4/3 + 4/5 - 4/7 + 4 /9 - 4/11 + ... 我们可以通过计算前几项的总和来得到 π 的一个很好的近似值。编写一个函数 approxPi()，将浮点值误差作为参数，并通过逐项计算上述总和，直到当前总和与前一个总和之间的差值的绝对值（用少一项）不大于误差。一旦函数发现差值小于误差，它应该返回新的和。请注意，此函数不应使用数学模块中的任何函数或常量。您应该使用所描述的算法来近似 π，

如果有人能帮助我理解问题所在，我将不胜感激，因为我已经阅读了很多次，但仍然无法完全理解它在说什么。我翻阅了我的教科书，发现使用 e 的无限和来近似 e 的类似问题：1/0！+ 1/1！+ 1/2！+ 1/3！+...

```
def approxE(error):
    import math
    'returns approximation of e within error'
    prev = 1 # approximation 0
    current = 2 # approximation 1
    i = 2 # index of next approximation
    while current-prev > error:
        #while difference between current and previous
        #approximation is too large
                            #current approximation
        prev = current      #becomes previous
                            #compute new approximation
        current = prev + 1/math.factorial(i) # based on index i
        i += 1              #index of next approximation
    return current 
```

在此之后，我尝试对我的程序进行建模，但我觉得我离解决方案还差得远。

```
def approxPi(error):
    'float ==> float, returns approximation of pi within error'
    #π = 4/1 - 4/3 + 4/5 - 4/7 + 4/9 - 4/11 + ...
    prev = 4 # 4/1 = 4 : approx 0
    current = 2.6666 # 4/1 - 4/3 = 2.6666 : approx 1
    i = 5 # index of next approx is 5
    while current-prev > error:
        prev = current
        current = prev +- 1/i
        i = i +- 2
    return current 
```

成功的程序应该返回

approxPi(0.5) = 3.3396825396825403 和 approxPi(0.05) = 3.1659792728432157

同样，任何帮助将不胜感激。我只想了解我在这方面做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:24:52.813

如果您尝试使用该系列来近似 pi，请先写出一些术语：

```
π = 4/1 - 4/3 + 4/5 - 4/7 + 4/9 - 4/11 + ...
     0     1     2     3     4     5     ... 
```

然后编写一个函数，返回系列的第 n 项：

```
def nth_term(n):
    return 4 / (2.0 * n + 1) * (-1) ** n 
```

从那里开始，代码非常通用：

```
def approximate_pi(error):
    prev = nth_term(0)  # First term
    current = nth_term(0) + nth_term(1)  # First + second terms
    n = 2  # Starts at third term

    while abs(prev - current) > error:
        prev = current
        current += nth_term(n)
        n += 1

    return current 
```

它似乎对我有用：

```
>>> approximate_pi(0.000001)
    3.1415929035895926 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:22:09.993

有几个问题：

A)`i = i +- 2`没有按照你的想法去做，不确定它是什么。

正确的代码应该是这样的（有很多方法）：

```
if i < 0:
    i = -(i-2)
else:
    i = -(i+2) 
```

同样适用于：

```
current = prev +- 1/i 
```

它应该是：

```
current = prev + 4.0/i 
```

或其他东西，具体取决于`i`. 谨防！在 python2 中，除非您从未来导入新的部门，否则您必须键入`4.0`，而不仅仅是`4`.

就我个人而言，我更喜欢变量、除数的绝对值和符号，以便每次迭代：

```
current = current + sign * 4 / d
d += 2
sign *= -1 
```

那好多了！

B）循环结束时应检查错误的绝对值：

就像是：

```
while abs(current-prev) > error: 
```

因为当前值越过目标值，大一小，所以误差一正，一负。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T23:45:56.800

这是我的做法：

```
def approxPi(error):
    # pi = 4/1 - 4/3 + 4/5 - 4/7 + 4/9 - 4/11 + ...
    value = 0.0
    term = 1.0e6
    i = 1
    sign = 1
    while fabs(term) > error:
        term = sign/i
        value += term
        sign *= -1
        i += 2
    return 4.0*value

print approxPi(1.0e-5) 
```

# wordpress - 需要将 wordpress 帖子分类到子文件夹中，而无需在子文件夹中单独安装 wordpress

> ID：14803747
> 
> 赞同：2
> 
> 时间：2013-02-10T23:13:40.663
> 
> 标签：wordpress, cpanel, subdirectory

我目前正在开发一个与体育相关的 wordpress 网站。我所有的帖子都在同一个地方，分为足球、网球等。我想改变我博客的结构，比如足球，应该是`domain.com/football`，网球，应该是`domain.com/tennis`等等。一种方法是在所有子文件夹中安装 wordpress 并导入分类帖子，但这会导致维护多个 wordpress 网站。有什么方法或任何 wordpress 插件可以让我做同样的事情，但只使用一个 wordpress 网站？谢谢。我用cpanel。

PS 好吧，它并不是真的需要成为任何子文件夹，但我所需要的只是其中显示的地址栏`domain.com/*sports_name*`。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T01:24:59.183

你会去`Settings -> Permalinks`并设置一个自定义的永久链接结构`/%category%/%postname%/`

然后您创建“网球”和“足球”等类别并将帖子添加到相关类别。

永久链接上的 Codex 条目在这里 - [https://wordpress.org/support/article/using-permalinks/](https://wordpress.org/support/article/using-permalinks/)

在过去，由于性能原因，不建议将永久链接结构用于真正的大型博客，但我的理解（支持反对投票！）现在不再是这种情况了。

# mysql - 带有外键的简单数据库设计

> ID：14803757
> 
> 赞同：1
> 
> 时间：2013-02-10T23:14:28.143
> 
> 标签：mysql, sql, database

我正在尝试设计创建一个应用程序，该应用程序应该跟踪已完成的工作和这些工作的文书工作状态。它需要以下格式的数据库（MySQL）：

5张桌子：

1.  工作
2.  船员（执行工作的人）
3.  商店（在地点执行的工作）
4.  状态（是否收到文件？）
5.  评论（沟通和笔记）

以下是表应如何关联：

*   一个工作人员可以有很多工作，一份工作不能有很多工作人员（一对多）
*   一个商店可以有很多工作，一份工作不能有很多商店（一对多）
*   状态属于工作（一对一）
*   评论属于工作（一对一）

约束：

1.  工作不能没有商店，也不能没有工作人员
2.  没有工作就不能存在评论和状态

我的 sql：

```
USE ppwk;

CREATE TABLE store (
  id INT(11) AUTO_INCREMENT PRIMARY KEY,
  account VARCHAR(3) NOT NULL,
  secondary_account VARCHAR(64),
  number VARCHAR(11) NOT NULL,
  address VARCHAR(64),
  address2 VARCHAR(64),
  city VARCHAR(64),
  state VARCHAR(2),
  zip VARCHAR(12),
  phone VARCHAR(14)
);

CREATE TABLE crew (
  crew_code VARCHAR(6) PRIMARY KEY NOT NULL,
  address VARCHAR(64),
  address2 VARCHAR(64),
  city VARCHAR(64),
  state VARCHAR(2),
  zip VARCHAR(12),
  phone VARCHAR(14),
  phone2 VARCHAR(14),
  phone3 VARCHAR(14),
  phone4 VARCHAR(14),
  fax VARCHAR(14),
  email VARCHAR(64)
);

CREATE TABLE job (
  work_order INT(6) PRIMARY KEY NOT NULL,
  svc_date DATE NOT NULL,
  resvc_date DATE,
  level VARCHAR(2),
  description TEXT,
  store_id INT(11),
  crew_code VARCHAR(6),
  FOREIGN KEY (store_id) REFERENCES store(id),
  FOREIGN KEY (crew_code) REFERENCES crew(crew_code)
);

CREATE TABLE status (
  work_order INT(6) PRIMARY KEY,
  status VARCHAR(64) NOT NULL,
  added_on DATETIME,
  closed_on DATETIME,
  FOREIGN KEY (work_order) REFERENCES job(work_order)
    ON UPDATE CASCADE
    ON DELETE CASCADE
);

CREATE TABLE comment (
  id INT(11) PRIMARY KEY AUTO_INCREMENT,
  work_order INT(6),
  act_comment TEXT,
  clr_comment TEXT,
  act_last_updated DATETIME,
  clr_last_updated DATETIME,
  INDEX (work_order),
  FOREIGN KEY(work_order) REFERENCES job(work_order)
    ON UPDATE CASCADE
    ON DELETE CASCADE
); 
```

问题1：这个sql是否完全符合我的要求？

问题2：我对外键有点困惑。如果我将外键添加到指向“商店”的“工作”，它是否会将“工作”变成属于“商店”的子表？或者是周围的其他方式？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T18:52:02.070

![模型](../Images/cb9b2bd5ebac48c151b5579ef967bcb5.png)

只要存在 Store 和 Crew，您就可以创建新工作。

```
CREATE TABLE JOB (
IDJOB CHAR(20) NOT NULL, 
IDCREW CHAR(20) NOT NULL, 
IDSTORE CHAR(20) NOT NULL,
PRIMARY KEY (IDJOB,IDCREW,IDSTORE)) 
TYPE = MYISAM
ROW_FORMAT = DEFAULT;

CREATE TABLE CREW (
IDCREW CHAR(20) NOT NULL,
PRIMARY KEY (IDCREW)) 
TYPE = MYISAM
ROW_FORMAT = DEFAULT;

CREATE TABLE STORE (
IDSTORE CHAR(20) NOT NULL,
PRIMARY KEY (IDSTORE)) 
TYPE = MYISAM
ROW_FORMAT = DEFAULT;

CREATE TABLE STATUS (
IDSTATUS CHAR(20) NOT NULL,
PRIMARY KEY (IDSTATUS)) 
TYPE = MYISAM
ROW_FORMAT = DEFAULT;

CREATE TABLE COMMENT (
IDCOMMENT CHAR(20) NOT NULL,
PRIMARY KEY (IDCOMMENT))
TYPE = MYISAM
ROW_FORMAT = DEFAULT; 
```

# java - 如何使用与 PHP mail() 相同的机制在 Java 中发送邮件

> ID：14803761
> 
> 赞同：2
> 
> 时间：2013-02-10T23:15:16.417
> 
> 标签：java, email, send

我在从我的应用程序发送邮件时遇到问题。我不能在我的应用程序上使用简单的 SMTP 服务器。并且不知道如何处理在 JAVA 中发送邮件。我应该使用与 PHP 的 mail() 相同/相似的机制。不幸的是，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:24:36.077

[Java Mail API](http://www.oracle.com/technetwork/java/javamail/index.html)支持发送和接收电子邮件。API 提供了一种插件架构，在该架构中，可以在运行时动态地发现和使用供应商对其专有协议的实现。Sun 提供了一个参考实现，它支持以下协议：

*   互联网邮件访问协议 (IMAP)
*   简单邮件传输协议 (SMTP)
*   邮局协议 3 (POP 3)

以下是如何使用它的示例：

```
import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.Message.RecipientType;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SendMail {

    private String from;
    private String to;
    private String subject;
    private String text;

    public SendMail(String from, String to, String subject, String text){
        this.from = from;
        this.to = to;
        this.subject = subject;
        this.text = text;
    }

    public static void main(String[] args) {

            String from = "abc@gmail.com";
            String to = "xyz@gmail.com";
            String subject = "Test";
            String message = "A test message";
            SendMail sendMail = new SendMail(from, to, subject, message);
            sendMail.send();
    }

    public void send(){

        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.port", "465");
        Session mailSession = Session.getDefaultInstance(props);
        Message simpleMessage = new MimeMessage(mailSession);
        InternetAddress fromAddress = null;
        InternetAddress toAddress = null;
        try {
            fromAddress = new InternetAddress(from);
            toAddress = new InternetAddress(to);
        } catch (AddressException e) {
            e.printStackTrace();
        }

        try {
            simpleMessage.setFrom(fromAddress);
            simpleMessage.setRecipient(RecipientType.TO, toAddress);
            simpleMessage.setSubject(subject);
            simpleMessage.setText(text);    
            Transport.send(simpleMessage);
        } catch (MessagingException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T23:19:02.580

您需要检查[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html) API，并且根据 PHP 的 mail() 的要求，它需要一个 SMTP 服务器来发送该电子邮件。

如果您需要 SMTP 服务器，我建议您在 Google 中搜索适合您操作系统的 SMTP 服务器，或者您可以使用 ISP 或服务器主机提供的 SMTP 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:51:51.770

您可以将 JavaMail api 与[Apache James](http://james.apache.org/server/)等本地 SMTP 服务器一起使用，因此在安装并运行 James 服务器后，您可以将 SMTP 服务器 ip 设置为`127.0.0.1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T00:51:22.877

> 我应该使用与 PHP 的 mail() 相同/相似的机制。

你不能，因为它不存在。如果这是要求，请更改它。

> 不幸的是，我不知道该怎么做。

请参阅 JavaMail API。

# wordpress - 当我在我的 wordpress 页面上包含我的 PDO 样式注册时，它显示为空白

> ID：14803770
> 
> 赞同：0
> 
> 时间：2013-02-10T23:16:13.757
> 
> 标签：wordpress, pdo

当我将以下代码包含到我的 wordpress 页面（我正在创建它以允许用户注册单独的服务）时，它会强制页面显示为空白，不包括标题。无论如何都不会抛出任何错误。

```
<?php

// First we execute our common code to connection to the database and start the session
require("includeinall.php");

// This if statement checks to determine whether the registration form has been submitted
// If it has, then the registration code is run, otherwise the form is displayed
if (!empty($_POST)) {
    // Ensure that the user has entered a non-empty username
    if (empty($_POST['username'])) {
        // Note that die() is generally a terrible way of handling user errors
        // like this.  It is much better to display the error with the form
        // and allow the user to correct their mistake.  However, that is an
        // exercise for you to implement yourself.
        die("Please enter a username.");
    }

    // Ensure that the user has entered a non-empty password
    if (empty($_POST['password'])) {
        die("Please enter a password.");
    }

    // Make sure the user entered a valid E-Mail address
    // filter_var is a useful PHP function for validating form input, see:
    // http://us.php.net/manual/en/function.filter-var.php
    // http://us.php.net/manual/en/filter.filters.php
    if (!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) {
        die("Invalid E-Mail Address");
    }

    // We will use this SQL query to see whether the username entered by the
    // user is already in use.  A SELECT query is used to retrieve data from the database.
    // :username is a special token, we will substitute a real value in its place when
    // we execute the query.
    $query = "
            SELECT
                1
            FROM members
            WHERE
                username = :username
        ";

    // This contains the definitions for any special tokens that we place in
    // our SQL query.  In this case, we are defining a value for the token
    // :username.  It is possible to insert $_POST['username'] directly into
    // your $query string; however doing so is very insecure and opens your
    // code up to SQL injection exploits.  Using tokens prevents this.
    // For more information on SQL injections, see Wikipedia:
    // http://en.wikipedia.org/wiki/SQL_Injection
    $query_params = array(
        ':username' => $_POST['username']
    );

    try {
        // These two statements run the query against your database table.
        $stmt   = $db->prepare($query);
        $result = $stmt->execute($query_params);
    }
    catch (PDOException $ex) {
        // Note: On a production website, you should not output $ex->getMessage().
        // It may provide an attacker with helpful information about your code. 
        die("Failed to run query: " . $ex->getMessage());
    }

    // The fetch() method returns an array representing the "next" row from
    // the selected results, or false if there are no more rows to fetch.
    $row = $stmt->fetch();

    // If a row was returned, then we know a matching username was found in
    // the database already and we should not allow the user to continue.
    if ($row) {
        die("This username is already in use");
    }

    // Now we perform the same type of check for the email address, in order
    // to ensure that it is unique.
    $query = "
            SELECT
                1
            FROM members
            WHERE
                email = :email
        ";

    $query_params = array(
        ':email' => $_POST['email']
    );

    try {
        $stmt   = $db->prepare($query);
        $result = $stmt->execute($query_params);
    }
    catch (PDOException $ex) {
        die("Failed to run query: " . $ex->getMessage());
    }

    $row = $stmt->fetch();

    if ($row) {
        die("This email address is already registered");
    }

    // An INSERT query is used to add new rows to a database table.
    // Again, we are using special tokens (technically called parameters) to
    // protect against SQL injection attacks.
    $query = "
            INSERT INTO members (
                username,
                password,
                email,
                points,
                memip,
                completed_surveys,
                salt
            ) VALUES (
                :username,
                :password,
                :email
                :points
                :memip
                :completed_surveys
                :salt
            )
        ";

    // A salt is randomly generated here to protect again brute force attacks
    // and rainbow table attacks.  The following statement generates a hex
    // representation of an 8 byte salt.  Representing this in hex provides
    // no additional security, but makes it easier for humans to read.
    // For more information:
    // http://en.wikipedia.org/wiki/Salt_%28cryptography%29
    // http://en.wikipedia.org/wiki/Brute-force_attack
    // http://en.wikipedia.org/wiki/Rainbow_table
    $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647));

    // This hashes the password with the salt so that it can be stored securely
    // in your database.  The output of this next statement is a 64 byte hex
    // string representing the 32 byte sha256 hash of the password.  The original
    // password cannot be recovered from the hash.  For more information:
    // http://en.wikipedia.org/wiki/Cryptographic_hash_function
    $password = hash('sha256', $_POST['password'] . $salt);

    // Next we hash the hash value 65536 more times.  The purpose of this is to
    // protect against brute force attacks.  Now an attacker must compute the hash 65537
    // times for each guess they make against a password, whereas if the password
    // were hashed only once the attacker would have been able to make 65537 different 
    // guesses in the same amount of time instead of only one.
    for ($round = 0; $round < 65536; $round++) {
        $password = hash('sha256', $password . $salt);
    }

    // Here we prepare our tokens for insertion into the SQL query.  We do not
    // store the original password; only the hashed version of it.  We do store
    // the salt (in its plaintext form; this is not a security risk).
    $query_params = array(
        ':username' => $_POST['username'],
        ':password' => $password,
        ':email' => $_POST['email'],
        ':points' => $bonuspoints,
        ':memip' => $_SERVER['REMOTE_ADDR'],
        ':completed_surveys' => 0,
        ':salt' => $salt
    );

    try {
        // Execute the query to create the user
        $stmt   = $db->prepare($query);
        $result = $stmt->execute($query_params);
    }
    catch (PDOException $ex) {
        // Note: On a production website, you should not output $ex->getMessage().
        // It may provide an attacker with helpful information about your code. 
        die("Failed to run query: " . $ex->getMessage());
    }

    // This redirects the user back to the login page after they register
    header("Location: login.php");

    // Calling die or exit after performing a redirect using the header function
    // is critical.  The rest of your PHP script will continue to execute and
    // will be sent to the user if you do not die or exit.
    die("Redirecting to login.php");
}

?>
<h1>Register</h1>
<form action="register.php" method="post">
    Username:<br />
    <input type="text" name="username" value="" />
    <br /><br />
    E-Mail:<br />
    <input type="text" name="email" value="" />
    <br /><br />
    Password:<br />
    <input type="password" name="password" value="" />
    <br /><br />
    <input type="submit" value="Register" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:13:05.757

It will be the file path (or lack of one) in `require("includeinall.php");`

Have a look at this answer;

[how to write php require_once `<?php bloginfo('url'); ?>/database.php`](https://stackoverflow.com/questions/4998066/how-to-write-php-require-once-php-bloginfourl-database-php)

# c++ - 如何在 Xcode 中创建一个新的 C++ 项目？

> ID：14803774
> 
> 赞同：73
> 
> 时间：2013-02-10T23:16:57.963
> 
> 标签：c++, xcode, xcode4.6

我不确定如何使用 Xcode 4.6 创建*纯*C++ 项目：

![尝试创建新项目的图像](../Images/ce49c730680115b5620060c5628cfcbe.png)

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-02-10T23:31:50.570

我将解释如何在新的 XCode 4 或更高版本中制作 C++ 或 C 项目。（这在 XCode 6.2 中有效）

![第一步](../Images/b9a525c23204c6c35a8ca1c6cd297885.png) ![第二步](../Images/8f4b42a946703b55ae4bfbdaf28bdd87.png)

# ruby - Capistrano 的每个角色设置

> ID：14803775
> 
> 赞同：4
> 
> 时间：2013-02-10T23:16:58.947
> 
> 标签：ruby, capistrano

我目前正在使用多阶段扩展，但在每个阶段中，我都有一个需要不同：user 和 :deploy_to 路径的角色。

示例部署/生产.rb：

```
role :web, 'myhost1'
role :queue, 'myhost2' 
```

两台服务器都需要签出版本，但 :web 角色使用`/var/www/html`where :queue uses `/home/username/path/to/releases`，并且都使用不同的 SSH 用户。

我也有类似配置的 staging 和 qa 阶段（在不同的服务器上都有 :web 和 :queue 角色）。

如何设置这些特定于角色的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:12:41.477

you simply specify role-specific options as a hash argument to role:

```
role :web, 'myhost1', {
  :user => 'bill',
  :deploy_to => '/var/www/html'
} 
```

for more flexibility, try [https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)

# html - html5 web 应用程序清单样板？

> ID：14803776
> 
> 赞同：0
> 
> 时间：2013-02-10T23:17:15.853
> 
> 标签：html, web-applications, manifest, boilerplate

是否有 html5 网络应用程序的样板文件？

例如，Safari 有关于清单的特定指南，以便将网站变成应用程序，Firefox 也有类似的指南，Chrome 也有。

有没有快速启动 html5 webapp 的样板文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-09T07:19:58.243

可以参考谷歌的Web Starter Kit：[https ://github.com/google/web-starter-kit/blob/master/app/manifest.json](https://github.com/google/web-starter-kit/blob/master/app/manifest.json)

还有一个生成器：[https ://tomitm.github.io/appmanifest/](https://tomitm.github.io/appmanifest/)

还有一个验证器： http: [//manifest-validator.appspot.com/](http://manifest-validator.appspot.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-09T09:47:26.567

[https://html5boilerplate.com](https://html5boilerplate.com)

> Mobile Boilerplate 可帮助您创建丰富、高性能和现代的移动 Web 应用程序。使用数十种移动优化和助手启动您的项目。

# javascript - 为什么 Safari 会检测到 Firefox 没有检测到的循环引用？

> ID：14803778
> 
> 赞同：0
> 
> 时间：2013-02-10T23:17:18.027
> 
> 标签：javascript

运行时发现的循环引用`JSON.stringify.`

它检测到循环引用的对象在控制台中如下所示。

```
LOG|ES5|Object>>{
 "state": true,
 "model": "MAppAMDeleter",
 "client": {},
 "time": {},
 "bin": {
  "arg_this": {},        // I'm guessing this is the culprit
  "foo_id": "610"
 },
 "server": {
  "smalls": {
   "name": "The Foos",
   "page": "ma",
   "h_token": "1FOO",
   "remember": "0",
   "pane": "",
   "privacy": "0",
   "h_file": "1FOO",
   "picture": "1",
   "special": "0"
  },
  "tweets": {},
 }
} 
```

我认为唯一可能导致错误的是我实际分配给对象文字的这一行。

```
pipe.bin.arg_this = this; // when I assign this, it points to a different object all together. 
```

我试图理解为什么 Safari 会假设它指向包含结构化数据的对象文字（我在上面复制的那个），而 Firefox 似乎知道它指的是我分配它的初始对象 - 实际上是一个页面元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:58:30.447

试试这个：

```
....
initDynamic: function (event) {
    var pipe;
    event.preventDefault();
    pipe = $A.definePipe('MAppAMDeleter');
    pipe.bin.arg_this = event.target;                  // edited here.
    pipe.bin.arcmark_id = this.id;
    $A.machine(pipe);
}, .... 
```

The reason is, that `this` can be overwritten by the time the javascript parser tries to fetch the object. different browsers handle JavaScript in (slightly) different ways, so one could be slightly faster fetching the clicked-object, whereas another one could be slower and read `this` as the latest class in charge ;)

`event.target` always points to the clicked object, no matter what ;)

# python - Python 模块依赖

> ID：14803780
> 
> 赞同：0
> 
> 时间：2013-02-10T23:17:25.173
> 
> 标签：python, dependencies

我正在尝试制作自己的模块，以便于个人使用的简单精灵渲染和创建。唯一的问题是，它需要 pygame。如果我要放在`import pygame`模块的顶部，那么我可以在另一个程序中设置 pygame 而不是在模块中设置它吗？一般来说，在一个程序中导入模块，然后将该程序导入主模块，主程序是否继承相同的依赖项，还是需要显式重新导入它们？

要使用的模块：

```
import pygame
def makeSprite():
    # todo write code INCLUDING PYGAME DEPENDENCIES
    pass
def updateSprite():
    # todo write code INCLUDING PYGAME DEPENDENCIES
    pass 
```

程序使用模块：

```
import myModule  # myModule is the name of the module above
pygame.init()
makeSprite(arg1, arg2)
updateSprite(arg1, arg2)
pygame.functionCallFromPygame() 
```

主程序也可以使用模块吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:21:37.227

那应该不是问题。只要在`pygame.init()`调用之前没有尝试实际使用 pygame 功能，它就可以正常工作。

（换句话说，只要`pygame.init()`在调用库函数之前调用任何使用库的程序，就可以了。）

# performance - 查询性能以将日期与许多连接和实体框架进行比较

> ID：14803781
> 
> 赞同：0
> 
> 时间：2013-02-10T23:17:32.653
> 
> 标签：performance, linq, database-design, lambda, entity-framework-5

我有这个数据库模型：

![我的数据模型](../Images/b69a326b3dc4ed97e53fa5bb3e94c3b1.png)

我使用这个查询：

```
public List<Film> ListFilmsSortiesDes7DerniersJoursDVD()
{
    DateTime dateDans7Jours = DateTime.Now.AddDays(7);
    DateTime dateIlYa7Jours = DateTime.Now.AddDays(-7);
    return Query(f => f.Releases.Where(r => r.Langue.langue_code == "FR" && r.TypeRelease.typerelease_code == "DVD").FirstOrDefault().release_date > dateIlYa7Jours
        && f.Releases.Where(r => r.Langue.langue_code == "FR" && r.TypeRelease.typerelease_code == "DVD").FirstOrDefault().release_date < dateDans7Jours && !string.IsNullOrEmpty(f.film_image)).ToList();
} 
```

但是生成的 SQL 性能很差，大约需要 1.3 秒才能返回结果（使用 SQL Server Express 2008 并且我已经在正确的字段上有索引）：

```
SELECT [Extent1].[film_id]              AS [film_id],
       [Extent1].[film_image]           AS [film_image],
       [Extent1].[film_image_thumb]     AS [film_image_thumb],
       [Extent1].[film_format]          AS [film_format],
       [Extent1].[film_motsclefs]       AS [film_motsclefs],
       [Extent1].[film_nom]             AS [film_nom],
       [Extent1].[film_nomvf]           AS [film_nomvf],
       [Extent1].[film_synopsis]        AS [film_synopsis],
       [Extent1].[film_anneeproduction] AS [film_anneeproduction],
       [Extent1].[film_budget]          AS [film_budget],
       [Extent1].[film_dateajout]       AS [film_dateajout],
       [Extent1].[film_actif]           AS [film_actif],
       [Extent1].[utilisateur_id]       AS [utilisateur_id],
       [Extent1].[film_francais]        AS [film_francais],
       [Extent1].[film_revenue]         AS [film_revenue],
       [Extent1].[filmgroupe_id]        AS [filmgroupe_id]
FROM   [dbo].[Film] AS [Extent1]
       OUTER APPLY (SELECT TOP (1) [Filter1].[release_date] AS [release_date]
                    FROM   (SELECT [Extent2].[film_id]        AS [film_id],
                                   [Extent3].[release_date]   AS [release_date],
                                   [Extent3].[typerelease_id] AS [typerelease_id]
                            FROM   [dbo].[FilmRelease] AS [Extent2]
                                   INNER JOIN [dbo].[Release] AS [Extent3]
                                     ON [Extent3].[release_id] = [Extent2].[release_id]
                                   INNER JOIN [dbo].[Langue] AS [Extent4]
                                     ON [Extent3].[langue_id] = [Extent4].[langue_id]
                            WHERE  N'FR' = [Extent4].[langue_code]) AS [Filter1]
                           INNER JOIN [dbo].[TypeRelease] AS [Extent5]
                             ON [Filter1].[typerelease_id] = [Extent5].[typerelease_id]
                    WHERE  ([Extent1].[film_id] = [Filter1].[film_id])
                           AND (N'CINEMA' = [Extent5].[typerelease_code])) AS [Limit1]
       CROSS APPLY (SELECT TOP (1) [Filter3].[release_date] AS [release_date]
                    FROM   (SELECT [Extent6].[film_id]        AS [film_id],
                                   [Extent7].[release_date]   AS [release_date],
                                   [Extent7].[typerelease_id] AS [typerelease_id]
                            FROM   [dbo].[FilmRelease] AS [Extent6]
                                   INNER JOIN [dbo].[Release] AS [Extent7]
                                     ON [Extent7].[release_id] = [Extent6].[release_id]
                                   INNER JOIN [dbo].[Langue] AS [Extent8]
                                     ON [Extent7].[langue_id] = [Extent8].[langue_id]
                            WHERE  N'FR' = [Extent8].[langue_code]) AS [Filter3]
                           INNER JOIN [dbo].[TypeRelease] AS [Extent9]
                             ON [Filter3].[typerelease_id] = [Extent9].[typerelease_id]
                    WHERE  ([Extent1].[film_id] = [Filter3].[film_id])
                           AND (N'CINEMA' = [Extent9].[typerelease_code])) AS [Limit2]
WHERE  ([Limit1].[release_date] > '2013-02-04T00:07:48' /* @p__linq__0 */)
       AND ([Limit2].[release_date] < '2013-02-18T00:07:48' /* @p__linq__1 */)
       AND ([Extent1].[film_image] IS NOT NULL) 
```

你有什么想法可以提高这个查询的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:05:26.783

好的，当答案很简单时，为什么搜索复杂：

```
 public List<Film> ListFilmsSortiesDes7DerniersJoursCinema()
    {
        DateTime dateDans7Jours = DateTime.Now.AddDays(7);
        DateTime dateIlYa7Jours = DateTime.Now.AddDays(-7);
        return Query(f => f.Releases.Where(r => r.Langue.langue_code == "FR" && r.TypeRelease.typerelease_code == "CINEMA" && r.release_date > dateIlYa7Jours && r.release_date < dateDans7Jours).Any()).ToList();
    } 
```

我也加入了

# java - 代码行未初始化导致 nullpointerexecption

> ID：14803782
> 
> 赞同：0
> 
> 时间：2013-02-10T23:17:34.860
> 
> 标签：java, android

我有一行代码，当我调试空指针异常时，我可以看到这是我的应用程序崩溃的原因。

导致空指针的代码行是这样的：

```
ListView storeList = (ListView) findViewById(R.id.storeList); 
```

然后在调试模式下，当它尝试分配它时它会崩溃：

```
storeList.setAdapter(arrayAdapter2); 
```

我不知道为什么对象没有初始化。下面`ArrayAdapter`它初始化很好。如果你

下面是实际的 java 活动文件：

```
public class StoreListView extends Activity {
UserFunctions userFunctions  = new UserFunctions();
ArrayAdapter<String> arrayAdapter2;
ArrayList<String> spinnerArray;

protected void onCreate(Bundle savedInstanceState) {
    ListView storeList = (ListView) findViewById(R.id.storeList);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.storelistviewpage);
    arrayAdapter2 = new ArrayAdapter<String>(StoreListView.this,android.R.layout.simple_list_item_1);
    spinnerArray = getIntent().getStringArrayListExtra("cusName");
    arrayAdapter2.addAll(spinnerArray);
    storeList.setAdapter(arrayAdapter2);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main_screen, menu);
    return true;
}

} 
```

下面是xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/storeList"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal|center_vertical" >

</ListView> 
```

编辑：如果有人想知道我将活动添加到 android mainfest

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:19:39.130

移动

```
ListView storeList = (ListView) findViewById(R.id.storeList); 
```

通话后`setContentView()`。

由于您当前的代码分配了`findViewById()` *before* `setContentView()`被调用的结果，因此您将**始终**得到`storeList`being `null`，因此您将获得一个 NPE。

# android - OpenGL上下文丢失后如何重新加载libgdx非托管纹理

> ID：14803783
> 
> 赞同：5
> 
> 时间：2013-02-10T23:17:34.720
> 
> 标签：android, libgdx

我正在通过网络下载图像并将它们作为图像演员添加到我的 libgdx UI 中，使用以下命令：

```
Pixmap pm = new Pixmap(data, 0, data.length);
Texture t = new Texture(pm);
TextureRegion tr = new TextureRegion(t,200,300);
TextureRegionDrawable trd = new TextureRegionDrawable(tr);
Image icon = new Image();
icon.setDrawable(trd); 
```

鉴于此，我需要一些重新加载纹理数据的方法，因为当 OpenGL 上下文丢失时（例如，因为屏幕进入睡眠状态），纹理数据也会丢失。

我尝试制作自己的经理课程，添加

```
DynamicTextureManager.register(t, pm); // Register texture together with the source pixmap 
```

到上面的片段，在`resume()`我做：

```
DynamicTextureManager.reload(); 
```

经理类：

```
public class DynamicTextureManager {
    private static LinkedHashMap<Texture, Pixmap> theMap = new
      LinkedHashMap<Texture,Pixmap>();
    public static void reload() {
        Set<Entry<Texture,Pixmap>> es = theMap.entrySet();
        for(Entry<Texture,Pixmap> e : es) {
            Texture t = e.getKey();
            Pixmap p = e.getValue();

            t.draw(p, 0, 0);
        }   
    }

    public static void register(Texture t, Pixmap p) {
        theMap.put(t, p);
    }
} 
```

但这无济于事 - 我最终仍然会卸载纹理和白色区域而不是图像。

这应该怎么做？我还没有找到任何代码来证明这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:25:45.830

添加我的解决方案作为参考。我现在向我的经理注册 Image 对象和 Pixmap 对象，在 reload() 上，从 Pixmap 重新创建纹理，并为旧图像设置新纹理。对我有用，但欢迎使用更优雅的解决方案。

```
import java.util.Map.Entry;
public class DynamicTextureManager {
    private static final class MapData {
        Pixmap pixmap;
        int width;
        int height;
    }

    private static WeakHashMap<Image, MapData> theMap = new WeakHashMap<Image, MapData>();

    public static void reload() {
        Set<Entry<Image, MapData>> es = theMap.entrySet();
        for (Entry<Image, MapData> e : es) {
            Image i = e.getKey();
            MapData d = e.getValue();

            Texture t = new Texture(d.pixmap);
            TextureRegion tr;
            if(d.width == -1 || d.height == -1) {
                tr = new TextureRegion(t);
            }
            else {
                tr = new TextureRegion(t,d.width, d.height);                
            }
            TextureRegionDrawable trd = new TextureRegionDrawable(tr);
            i.setDrawable(trd);
        }
    }

    public static void register(Image i, Pixmap p) {
        MapData d = new MapData();
        d.pixmap = p;
        d.width = -1;
        d.height = -1;
        theMap.put(i, d);
    }

    public static void register(Image i, Pixmap p, int width, int height) {
        MapData d = new MapData();
        d.pixmap = p;
        d.width = width;
        d.height = height;

        theMap.put(i, d);
    }

} 
```

# vim - 如何通过空行折叠 vim（rspec 示例）？

> ID：14803784
> 
> 赞同：1
> 
> 时间：2013-02-10T23:17:47.917
> 
> 标签：vim, folding

我试图让 vim 以我想要的方式折叠，但是遇到了麻烦。

我在一些测试代码中使用空格以使其更清晰，我无法让 vim 折叠空白行。

我有的：

```
describe 'Troubles' do

  describe 'Home' do

    let( :troubles ) { be_over}

    describe 'Pain' do
      it "shouldn't be this hard" { puts "but it is" }
    end
  end
end 
```

它希望它像这样折叠：

```
describe 'Troubles' do

  describe 'Home' do
+--- 6  lines: -------------------
  end
end 
```

有什么办法可以做到这一点？

这是我的 .vim 折叠设置

```
set tabstop=2
set shiftwidth=2
set expandtab

set foldmethod=indent
set foldnestmax=10
set nofoldable
set foldlevel=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:40:22.773

你用的是什么折叠方法？使用缩进折叠方法对我来说效果很好（它折叠了 5 行，因为第一个是空白的未缩进行。

```
set foldmethod=indent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-07T07:53:37.843

如果你有兴趣专门为 RSpec 文件折叠，这里是我在周末拼凑的[一个小 RSpec foldexpr 插件。](https://github.com/rlue/vim-fold-rspec)它的作用很大（~150 SLOC），但它以我喜欢的方式处理折叠（*例如，*折叠包含一个块之后的尾随换行符，这不完全是你的问题，但非常接近）。

这是您的示例代码的折叠列：

```
-    describe 'Troubles' do
|
|-     describe 'Home' do
||
||       let( :troubles ) { be_over}
||
||-      describe 'Pain' do
|||        it "shouldn't be this hard" { puts "but it is"}
|||      end
||     end
|    end 
```

这是折叠后的样子：

```
describe 'Troubles' do

- describe 'Home' ---------------------------------------------------- [4] -
end 
```

# ruby - Ruby local_variable 一直引用@instance_variable

> ID：14803787
> 
> 赞同：1
> 
> 时间：2013-02-10T23:18:17.357
> 
> 标签：ruby, pointers

```
class Foo
  def bar
    @instance_variable = [['first']]

    # make a duplicate object with the :dup method
    local_variable=@instance_variable.dup

    # They have different object_id
    p @instance_variable.object_id
    p local_variable.object_id

    local_variable.each{|n|n.push('second')}
    @instance_variable
  end
end

f=Foo.new
p f.bar

=> 2000
=> 2002
=> [["first", "second"]] 
```

似乎 local_variable 仍然引用@instance_variable，尽管它是一个不同的对象。这种行为在每个块中都有`push`。`unshift`使用像这样的正常分配`local_variable='second'`，结果符合预期`=> [['first']]`

不明白为什么`local_variable.each{|n|n.push('second')}`会影响`@instance_variable`

使用 Ruby-1.9.2p318

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:26:14.713

Both `local_variable` and `@instance_variable` have references to the same object, the inner array `['first']`. And because it's a mutable Array, you can effect changes to one array through the other.

`Object#dup` in Ruby [provides a shallow copy](http://ruby-doc.org/core-1.9.3/Object.html#method-i-dup). In order to make a deep copy of an Array, you'd need to write some code (or find a library) that recursively walks the data structure, deep-cloning its pieces of mutable state.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:30:06.960

问题是您没有测试正确的对象。你说：

```
p @instance_variable.object_id
p local_variable.object_id 
```

但这不是你要推动的对象。试试这个：

```
p @instance_variable[0].object_id
p local_variable[0].object_id 
```

它们*是*同一个对象。

换句话说，更改的情况*并非*如此，而是恰好它们都*包含*对同一对象的引用，因此显然更改一个指向*的*对象会更改另一个指向的对象。`local_variable``@instance_variable`

# c++ - 使用模板和向量编译错误

> ID：14803788
> 
> 赞同：0
> 
> 时间：2013-02-10T23:18:19.383
> 
> 标签：c++, templates, vector, 64-bit, codeblocks

我被告知要编写一个函数，该函数将允许给它任何数据类型的向量并返回两个向量的交集（需要很少的错误处理，这让我很恼火，但没关系）。为了解决这个问题，我编写了以下`vectorHelper.h`头文件：

```
template <typename t>
std::vector<t> intersect( const std::vector<t> & v1, const std::vector<t> & v2); 
```

以下`vectorHelper.cpp`文件：

```
#include <cmath>
#include <vector>
#include "vectorHelper.h"

using namespace std;

template <typename t>

vector<t> intersect( const vector<t> & v1, const vector<t> & v2)
{
    vector<t> results;
    for (int i=0; i<v1.size(); i++)
    {
        for (int j=0; j<v2.size(); j++)
        {
            if (v1[i] == v2[j])
            {
                results.push_back(v1[i]);
                break;
            }
        }
    }
    return results;
} 
```

`main.cpp`以及运行该方法的以下文件：

```
#include <iostream>
#include <string>
#include <limits>
#include <vector>
#include "vectorHelper.h"

using namespace std;

int main()
{
    const int CAPACITY = 5;
    vector<string> v1;
    vector<string> v2;
    string input;

    cout << "Enter five strings for vector 1: ";
    for (int i=0; i<CAPACITY; i++)
    {
        cin >> input;
        v1.push_back(input);
    }

    cin.ignore(INT_MAX, '\n');
    cout << "\n";

    cout << "Enter five strings for vector 2: ";
    for (int i=0; i<CAPACITY; i++)
    {
        cin >> input;
        v2.push_back(input);
    }

    vector<string> results = intersect(v1, v2);
    cout << "The common strings ( the intersection ): ";
    for (int k=0; k<results.size(); k++)
        cout << results[k] << " ";
} 
```

并在 Code::Blocks 中构建和运行会出现以下错误：

```
g++  -o bin/Debug/Problem3 obj/Debug/main.o obj/Debug/vectorHelper.o    
Undefined symbols for architecture x86_64:
  "std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > intersect<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >(std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)", referenced from:
  _main in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我的同学在他们自己的机器上编译过类似的程序（我们都在 MacBook Pro 上运行 Mac OSX 10.8.2），但是当给我的项目时，他们在他们的机器上得到了同样的错误。因此，我最初认为我安装了一些 Code::Blocks 错误已被“证明”（可能）。最终，我需要程序在 32 位机器上的 Code::Blocks 中编译和运行。有谁知道如何解决这些错误？

在原始帖子之前更新：我刚刚发现[这个问题](https://stackoverflow.com/questions/1631398/c-class-with-templates-compilation-error)说模板需要在头文件中完全定义。但是，我的同学似乎并没有受到这样的限制。在头文件中定义我的模板确实解决了这个问题，但有什么方法不需要这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:33:53.773

显然，模板必须（很可能）在声明它们时在同一个文件中定义，因为编译器需要在构建模板之前查看定义和填充模板的特定类型。

```
<template Foo>
//must be in same file as...
Foo<int> 
```

将我的模板定义移动到头文件中解决了所有错误，并且我能够成功运行该程序。

# c++ - C++ Visual Studio DLL 文件

> ID：14803789
> 
> 赞同：0
> 
> 时间：2013-02-10T23:18:23.010
> 
> 标签：c++, database, visual-studio, dll, header

我的目标是创建一个 dll 和 lib 文件，所以我遵循[本指南](http://msdn.microsoft.com/en-us/library/ms235636)
1）我在 VS 中创建了一个新的 win32 控制台应用程序项目，选择 DLL 作为“应用程序类型”并清空项目
2）我正在尝试创建一个数据库在 C++ 中。所以我有 5 个只有函数声明的标题。
3) Database.h 是我的顶部标题，它看起来像这样：

```
#ifdef DBDLL_EXPORTS
#define DBDLL_API __declspec(dllexport) 
#else
#define DBDLL_API __declspec(dllimport) 
#endif
#ifndef __Database_H
#define __Database_H

#include "Table.h"

class DBDLL_API Database { ... };
#endif 
```

4）现在只有标题，我尝试编译项目。它已编译，但我在项目文件夹中的任何地方都看不到任何 DLL 或 Lib。我如何创建它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:58:18.860

This is because headers are not compiled -- only CPP files are compiled (which pull in the headers -- a source file and all the headers it pulls in is called a "translation unit", which is the thing actually being compiled (independent of other TUs)).

So, in effect, the build system thinks you're building an empty project, and in this case generates nothing at all. Note that even if the headers are pulled in and compiled, unless an exported symbol is actually referenced somewhere, it may be optimized out. In such cases, you will get an (empty) DLL, but no `.lib` file (which can cause errors down the line if you have dependent projects looking for this `.lib` before there's anything in the DLL).

You'll need to create some CPP files that implement the functions declared in the headers. If you have everything in the headers and don't need any CPP files at all, then there's no point in having a DLL! (Since you could include the headers in any other project without needing any other dependency.)

Finally, your include guard (`#ifndef ...`) should encompass the entire header, including the DLL export macros, otherwise you'll eventually get macro redefinition warnings.

I would suggest using `#pragma once` instead of include guards since it's simpler and recognized by pretty much every compiler. I would also put the DLL macro goop into its own header (e.g. "dllmacros.h") and include that where it's needed (this will reduce duplication).

# database - 在 postgresql 中将三个表组合在一起

> ID：14803791
> 
> 赞同：0
> 
> 时间：2013-02-10T23:18:49.093
> 
> 标签：database, postgresql, inner-join

问题是：“列出所有官方语言及其使用该语言的人数（不是百分比）。对于表格中的每条记录，还应显示国家名称和大写字母。您的结果应首先按国家名称排序（从 A到 Z），然后是发言者的数量（从大到小）。”

我拥有的表是 lab2.country、lab2.city 和 lab2.country_language。

```
$query5 = "SELECT c.name AS country, c.capital,l.language,c.population,l.percentage, ((c.population * (l.percentage * 0.01)) :: bigint) AS speakers

FROM lab2.country c INNER JOIN lab2.city ci ON (c.country_code = ci.country_code) INNER        JOIN lab2.country_language
ON (c.country_code = l.country_code) 
```

^这是我需要 INNER JOIN lab2.country、lab2.city 和 lab2.country_language 的地方^

```
WHERE l.is_official is true
ORDER BY c.name ASC, speakers DESC"; 
```

问题是加入三个表。第一个国家和城市，然后是国家和国家语言。主键是 country_code。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:24:43.720

```
"SELECT c.name AS country, ci.name AS capital, l.language,
((c.population * (l.percentage * 0.01)) :: bigint) AS speakers 
```

**FROM lab2.country c INNER JOIN lab2.country_language l ON (c.country_code = l.country_code) JOIN lab2.city ci ON (c.country_code = ci.country_code)**

```
WHERE l.is_official is true AND (ci.id = c.capital)
ORDER BY c.name ASC, speakers DESC"; 
```

粗体字是我一直在寻找的答案。这是 country_language 上的 INNER JOINING 国家/地区，然后是已经 INNER JOINED 表上的城市。谢谢！

# seo - robots.txt 禁止哪些文件夹 - SEO？

> ID：14803792
> 
> 赞同：4
> 
> 时间：2013-02-10T23:18:53.107
> 
> 标签：seo, robots.txt, googlebot, robot

我目前正在编写我的 robots.txt 文件，在决定是否应该允许或禁止某些文件夹用于 SEO 目的时遇到了一些麻烦。

这是我拥有的文件夹：

*   /css/ (css)
*   /js/ (javascript)
*   /img/（我用于网站的图像）
*   /php/（PHP 将返回一个空白页面，例如 checkemail.php 检查电子邮件地址或 register.php 将数据放入 SQL 数据库并发送电子邮件）
*   /error/（我的错误 401,403,404,406,500 html 页面）
*   /include/（我包括header.html和footer.html）

我正在考虑只禁止 PHP 页面，让其余的。

你怎么看？

非常感谢

洛朗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:28:13.043

/css 和 /js -- CSS 和 Javascript 文件可能会被 googlebot 抓取，无论您是否在 robots.txt 中有它们。Google 使用它们来呈现您的页面以进行站点预览。谷歌很好地要求你**不要**把它们放在 robots.txt 中。

/img -- 即使在 robots.txt 中，Googlebot 也可以像 CSS 和 Javascript 一样抓取它。将您的图片放入 robots.txt 通常会阻止它们在 Google 图片搜索中被编入索引。Google 图片搜索可能是您网站访问者的来源，因此您可能希望在那里被索引。

/php - 听起来您不希望蜘蛛访问执行操作的 url。使用 robots.txt 的好电话

/error——如果你的站点设置正确，蜘蛛可能永远不会知道你的错误页面是从哪个目录提供的。他们通常会在有错误的 url 处获得服务，并且蜘蛛永远不会看到他们的实际 url。如果您重定向到它们，则情况并非如此，无论如何都不建议这样做。因此，我想说没有必要把它们放在 robots.txt

# css - 从子窗口刷新父级？

> ID：14803794
> 
> 赞同：1
> 
> 时间：2013-02-10T23:18:57.467
> 
> 标签：css

我正在尝试创建一个星级评分系统，我现在只需要专注于它的 css 部分。

当用户用鼠标悬停在上面时，它会填充星星，但它是从右到左的，我想让它从左到右工作。

有人可以告诉我我需要改变什么来做到这一点。谢谢。

```
<span class="rating">
    <input type="radio" class="rating-input"
        id="rating-input-1-5" name="rating-input-1">
    <label for="rating-input-1-5" class="rating-star"></label>
    <input type="radio" class="rating-input"
        id="rating-input-1-4" name="rating-input-1">
    <label for="rating-input-1-4" class="rating-star"></label>
    <input type="radio" class="rating-input"
        id="rating-input-1-3" name="rating-input-1">
    <label for="rating-input-1-3" class="rating-star"></label>
    <input type="radio" class="rating-input"
        id="rating-input-1-2" name="rating-input-1">
    <label for="rating-input-1-2" class="rating-star"></label>
    <input type="radio" class="rating-input"
        id="rating-input-1-1" name="rating-input-1">
    <label for="rating-input-1-1" class="rating-star"></label>
</span> 
```

CSS：

```
<

    style>
    .rating {
        overflow: hidden;
        display: inline-block;
    }
    .rating-input {
        position: absolute;
        left: 0;
        top: -50px;
    }
    .rating-star {
        display:inline-block;
        width: 30px;
        height: 30px;
        background: url('assets/img/icons/stars.png') 0 0px;
        background-repeat:no-repeat;
        background-size: 22px 20px;
    }
    .rating-star:hover {
        background-position: 0 16;
        background: url('assets/img/icons/favorites.png') 0 0px;
        background-size: 22px 20px;
    }
    .rating-star:hover,
    .rating-star:hover ~ .rating-star,
    .rating-input:checked ~ .rating-star {
        background-position: 0 0;
        background: url('assets/img/icons/favorites.png') 0 0px;
        background-size: 22px 20px;
        background-repeat:no-repeat;
    }

    </style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:24:47.117

Simply inverse the star order (in your mark-up too):

```
.rating-star {
  float:right;
  margin-right: 5px; 
} 
```

# c# - ItemsControl 中的水平方向 WrapPanel 垂直列出

> ID：14803803
> 
> 赞同：9
> 
> 时间：2013-02-10T23:20:03.430
> 
> 标签：c#, wpf, .net-4.0, itemscontrol

我在我的 XAML 中定义了两个 DataTemplate，每个都用于单独的 ItemsControl 面板。

主 ItemsControl 列出了存储在 ObservableCollection 对象中的 Foo 对象。

Foo 对象本身有自己的一组项目，作为 ObservableCollection 对象存储在其中。

我试图以一种允许每个 ObservableCollection Foo 项目在标题中显示其名称的方式定义 XAML（第一个 ItemsControl）。由此，每个 Foo 项目本身内的列表应水平显示（使用第二个 ItemsControl），并在下方直接显示相关字段。如果存在足够的项目，那么它们应该在必要时换行到下一行。

这是 UI 当前的状态：

![不正确的用户界面](../Images/4f09376e177fdcad021c14e29048ea78.png)

这就是我希望 UI 实际出现的方式：

![正确的用户界面](../Images/ec5702bc9f26d989ee446cdc08f42027.png)

我的标记（按钮控件用于 UI 的另一个方面）：

```
<Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
            <ItemsControl x:Name="ContentList" ItemTemplate="{StaticResource GameTemplate}" Grid.Column="0" />
        </ScrollViewer>
        <StackPanel Grid.Column="1" Background="DarkGray">
            <Button Click="OnLoad">_Load</Button>
            <Button Click="OnSave">_Save</Button>
            <Button Click="OnAdd">_Add</Button>
            <Button Click="OnDelete">_Delete</Button>
        </StackPanel>
    </Grid> 
```

用于列出 Foo 项目的 DataTemplate：

```
<DataTemplate x:Key="GameTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Label Content="{Binding Name}" Grid.Row="0" Background="Gray" FontSize="16" />
                <ItemsControl x:Name="imageContent" 
                              ItemsSource="{Binding FileList}" 
                              ItemTemplate="{StaticResource GameImagesTemplate}" 
                              Grid.Row="1" />
            </Grid>
        </DataTemplate> 
```

DataTemplate 用于列出每个 Foo 项目中的项目：

```
<DataTemplate x:Key="GameImagesTemplate">
            <WrapPanel Orientation="Horizontal">
                <StackPanel Orientation="Vertical" >
                    <Image Source="{Binding FileInfo.FullName}" 
                       Margin="8,8,8,8" 
                       Height="70" 
                       Width="70" />
                    <Label Content="{Binding Name}" />
                </StackPanel>
            </WrapPanel>
        </DataTemplate> 
```

我对 WPF 相当陌生，所以我觉得这是由我如何使用控件引起的问题。

为了生成我想要的 UI，我需要进行哪些 WPF 更改？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-11T00:14:41.830

我认为这是因为您将每个图像项添加到一个新`WrapPanel`的 in 中`GameImagesTemplate`，您应该只`ItemsControl` `ItemsPanelTemplate`需要`WrapPanel`在`GameTemplate`

**例子：**

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="252.351" Width="403.213" Name="UI" >
    <Window.Resources>

        <DataTemplate x:Key="GameImagesTemplate" >
            <StackPanel>
                <Image Source="{Binding FileInfo.FullName}" Margin="8,8,8,8" Height="70" Width="70" />
                <Label Content="{Binding Name}" />
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="GameTemplate">
            <StackPanel>
                <Label Content="{Binding Name}" Grid.Row="0" Background="Gray" FontSize="16" />
                <ItemsControl x:Name="imageContent" ItemsSource="{Binding FileList}" ItemTemplate="{StaticResource GameImagesTemplate}" >
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal" ScrollViewer.HorizontalScrollBarVisibility="Disabled" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <ItemsControl ItemsSource="{Binding ElementName=UI, Path=FileList}" Grid.Column="0" ItemTemplate="{StaticResource GameTemplate}" />
        </ScrollViewer>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    private ObservableCollection<Foo> _fileList = new ObservableCollection<Foo>();

    public MainWindow()
    {
        InitializeComponent();
        foreach (var item in Directory.GetDirectories(@"C:\StackOverflow"))
        {
            FileList.Add(new Foo
            {
                Name = item,
                FileList = new ObservableCollection<Bar>(Directory.GetFiles(item).Select(x => new Bar { FileInfo = new FileInfo(x) }))
            });
        }
    } 

    public ObservableCollection<Foo> FileList
    {
        get { return _fileList; }
        set { _fileList = value; }
    }
}

public class Foo
{
    public string Name { get; set; }
    public ObservableCollection<Bar> FileList { get; set; }
}

public class Bar
{
    public FileInfo FileInfo { get; set; }
} 
```

结果

![在此处输入图像描述](../Images/173b225b6ef88e79fa1133b17f344d20.png)

# c++ - 未定义的参考编译器错误

> ID：14803804
> 
> 赞同：2
> 
> 时间：2013-02-10T23:20:10.133
> 
> 标签：c++

我想我已经接近了，但我遇到了这个错误，我已经把头撞在墙上好几个小时了。我错过了一些愚蠢的东西，我已经逐个字符地走了，但我找不到它。

编译器给了我

```
main.cpp:16: undefined reference to `translator::translator(std::istream&)'
collect2: error: ld returned 1 exit status 
```

当我尝试编译我的程序时。我用来编译的命令是：

```
clear && g++ -g -Wall main.cpp -o Pear 
```

三个部分的使用如下：

主文件

```
int main(int argc, char* argv[])
{

std::ifstream myFile;

myFile.open(argv[1]);

translator example(myFile); 

myFile.close(); 

return 0; 
} 
```

翻译器.cpp

```
#include <fstream>
#include <iostream>
#include <string>

#include "translator.h"

translator::translator(std::istream& in)
{   
table1(in);
table2(in);
} 
```

翻译器.h

```
#ifndef TRANSLATOR
#define TRANSLATOR

#include <fstream>
#include <iostream>
#include <string>

#include "translationTable.h"

class translator
{
private:

translationTable<std::string, int> table1;

translationTable<int, std::string> table2;

translator(); 

public:

translator(std::istream& in); 

};

#endif 
```

有任何想法吗？我已经尝试了很多，并且我查找了类似的问题，但它们都有不同的来源。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T23:21:39.710

的命令行`g++`需要包含两个源文件，如下所示：

```
g++ -g -Wall main.cpp translator.cpp -o Pear 
```

否则，编译器不知道从哪里获得`translator::translator(std::istream&)`成员函数的实现。

**编辑：**（来自评论）

> 我认为基本上使用头文件是为了让它知道从哪里获取文件的每个实现？

这部分过于简单化了，但它应该可以帮助您了解情况。回想一下，从 C++ 源代码生成可执行文件的过程包括两个主要步骤 - 编译和链接。该`g++`程序同时执行它们（如果您指定`-c`标志，它可以只执行一个，或者只传递`.o`文件）。

编译器和链接器阶段`g++`不直接相互“对话”。编译器为链接器生成输入，这就是通信结束的地方。

头文件用于编译器。具体来说，它们用于编译的第一阶段 -*预处理*。一旦预处理器完成，就不知道定义的来源。连编译器都不知道，更不用说链接器了。这就是为什么您需要通过提供所有相关来源来“帮助”链接器`g++`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T23:22:04.867

您没有将 translate.o 与您的应用程序相关联。

```
g++ -g -c translator.cpp 
```

其次是

```
g++ -g -Wall main.cpp translator.o -o Pear 
```

# asp.net - ASP.NET - 使用条件运算符更改变量

> ID：14803812
> 
> 赞同：1
> 
> 时间：2013-02-10T23:21:09.313
> 
> 标签：asp.net, forms, razor, sendmail, conditional-operator

基本上这里是包含错误的代码的主要部分：

```
...

var lname = Request["lastName"];
var comment = Request["comment"];
var sex = Request["sex"];
var title = "";

if(sex = "woman"){
    title = "Misses ";
} else {
    title = "Mister ";
}

... 
```

当我运行该站点并提交表单时，它给了我以下编译器错误消息：*CS0029：无法将类型“字符串”隐式转换为“布尔”：*

有人对此有解决方案吗？每一个建议都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:30:13.040

它应该是

```
if(sex == "woman") 
```

你可以考虑使用三元运算符

```
title = (sex == "woman") ? "Misses" : "Mister"; 
```

# visual-studio-lightswitch - 日期范围的自定义搜索屏幕在 VS Lightswitch 中不起作用

> ID：14803816
> 
> 赞同：0
> 
> 时间：2013-02-10T23:21:32.937
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

我在 Visual Studio 2012 LightSwitch 中基于具有 TransactionDate 字段的 Transactions 表创建了一个自定义搜索屏幕。我还在我想要过滤的自定义搜索屏幕中添加了几个其他字段。

当 LightSwitch 生成我的页面时，我立即通过使用参数填写必要的 WHERE 子句来编辑查询。我添加了一个 BeginDate 和一个 EndDate 参数。LightSwitch 使用适当的控件生成我的屏幕，以便我在同一屏幕上过滤相应的数据网格。

但是，当我在前两个字段中输入值时，数据网格会在我切换到下一个字段时自动过滤。但是当我输入 BeginDate 和 EndDate 时，当我从它们中的任何一个上移开时，数据网格不会刷新。谁能解释为什么会这样？对于日期范围，我是否必须做一些不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:07:40.850

对于您所描述的内容，我能想到的唯一原因是查询参数是否实际上未绑定到屏幕控件。如果它们绑定正确，当单击参数或控件时，您将看到一条连接它们的线。

![在此处输入图像描述](../Images/7fc1994b7e39b314065e61820a70eb4c.png)

# php - 将编码的 JSON 加载到 Dojo Grid

> ID：14803818
> 
> 赞同：0
> 
> 时间：2013-02-10T23:21:37.187
> 
> 标签：php, mysql, json, dojo

我正在用 php 编程，我想取一个`array`我拥有的（从 mysql 结果集中提取），将其转换为`JSON`然后在`dojox.grid.DataGrid`.

我从[这个链接得到了一个想法：](http://mail.dojotoolkit.org/pipermail/dojo-interest/2011-June/056055.html)

我在`array`（在一个名为的文件中`getJSON.php`）使用了以下内容

```
echo $ajax = "{identifier: 'db_id', 'items':".json_encode($array)."}"; 
```

然后我尝试这样做（在我的主页中）：

```
var store = new dojo.data.ItemFileWriteStore({ url: 'getJSON.php' }); 
```

其他一切都与 Dojo 文档指定的完全相同。网格显示，但不加载数据，而是写入`Sorry, an error occurred`

有谁知道原因？希望我给了你足够的继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:51:18.993

我不为此使用 ItemFileWriteStore ！自 Dojo 1.6 以来，它们发生了很大变化，所以也许你看到了一些不是最新的东西。

试试这个代码：

> // 加载必要的组件（这是 AMD 的 dojo）！
> 
> require(["dojo/aspect",'dojo/_base/lang', 'dojox/grid/DataGrid','dojo/dom', 'dojo/store/JsonRest','dojo/data/ObjectStore', 'dojo/ domReady!'],
> 
> function(aspect,lang, DataGrid, dom,JsonRest,ObjectStore){ // 将组件映射到 vars...
> 
> ```
> var store = new JsonRest({    
>       target: "getJSON.php" // Use a URL that you can open up in a browser.
>   });
> 
> /*layout for the grid, you will have to adapt this to your columns !!!*/
> var layout = [[
>   {'name': 'Filename', 'field': 'documentName', 'width': '300px'},
>   {'name': 'Size', 'field': 'fileSize', 'width': '100px'},
>   {'name': 'Id', 'field': 'id', 'width': '200px'}
> ]];
> 
> dataStore=ObjectStore({objectStore: store}); // Transform to Objectstore !
> 
> /*Now we create a new grid*/
> var grid = new DataGrid({
>     id: 'grid',
>     store:dataStore, // Connect the store
>     autoWidth:false,
>     structure: layout, // Connect the layout
>     rowSelector: '0px'});
> 
> grid.placeAt("yourTargetDivId"); // Has to be an existing DOM Element with id !
> grid.startup(); // START IT ! 
> ```
> 
> });

请先通过回显类似这样的简单内容来尝试此代码：

> echo '[{"id":"1","fileSize":"100kb","documentName":"Lucian !"}, {"id":"2","fileSize":"900kb","documentName" :"皮尤皮尤！"}]';

然后用你自己的 JSON ......

# android - 安卓菜单文件

> ID：14803821
> 
> 赞同：1
> 
> 时间：2013-02-10T23:21:41.783
> 
> 标签：android, compiler-errors, abstract

我正在开发一个具有多个活动的 Android 应用程序。为了避免在每个 Activity 中写入相同的菜单和 Intent 监听器代码，我决定创建一个文件并在每个 Activity 上实现它，如下所示：

```
public class MainActivity extends Activity implements CommonTools{ ... 
```

包含我的菜单代码的 commonTools 文件如下：

```
import android.view.Menu;

public interface CommonTools {

    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        menu.findItem(R.id.menu_home).setIntent(
            new Intent(this, MainActivity.class));
        menu.findItem(R.id.menu_articles).setIntent(
            new Intent(this, ArticlesActivity.class));
        return true;
    }
} 
```

问题是我收到“抽象方法不指定正文”错误消息。

我没有声明任何抽象的东西，也不明白问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:23:20.130

接口不能包含任何代码。您需要做的是扩展 Activity 然后扩展该类。例如

```
public class CommonTools extends Activity {

  public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    menu.findItem(R.id.menu_home).setIntent(
        new Intent(this, MainActivity.class));
    menu.findItem(R.id.menu_articles).setIntent(
        new Intent(this, ArticlesActivity.class));
    return true;
  }
} 
```

然后定义你的活动：

```
public class MainActivity extends CommonTools {
 ....
} 
```

# vba - Excel VBA 复制操作（中间有隐藏列）

> ID：14803822
> 
> 赞同：0
> 
> 时间：2013-02-10T23:21:42.020
> 
> 标签：vba, excel

我陷入了一个奇怪的要求。以下是对我的问题的模拟。

> 在单元格 E1 中，我的值为 1。
> 
> 在单元格 F1 中，我的值为 2。
> 
> B 列被隐藏。
> 
> 现在使用 VBA，我需要将 E1 和 F1 复制到单元格 A1，这样 A1 包含“1”，C1 包含“2”（因为 B 列被隐藏）
> 
> 简而言之，我需要在粘贴时跳过隐藏的列。

我知道我可以进行 2 次复制操作，但隐藏列的数量和要复制的单元格数量并不总是相同。所以我需要一次性完成复制操作。

如何使用 Excel VBA 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:46:12.477

```
Sub Tester()
    CopySkippingHidden ActiveSheet.Range("A1:C1"), _
                       ActiveSheet.Range("F1")
End Sub

Sub CopySkippingHidden(rngToCopy As Range, pasteStart As Range)
    Dim c As Range
    For Each c In rngToCopy.Cells
        Do While pasteStart.EntireColumn.Hidden
            Set pasteStart = pasteStart.Offset(0, 1)
        Loop
        c.Copy pasteStart
        Set pasteStart = pasteStart.Offset(0, 1)
    Next c
End Sub 
```

# javascript - 使用 javascript 激活 css 动画/翻译

> ID：14803824
> 
> 赞同：3
> 
> 时间：2013-02-10T23:21:55.543
> 
> 标签：javascript, css, css-animations

我正在尝试摆脱 javascript 动画并改用 CSS 动画。我目前正在使用 jQuery 的动画功能。

我偶然发现了[这个](http://www.dte.web.id/2011/11/berbagai-efek-transisi-pada-gambar.html#.URgp9fhky7w)网站，里面有很多很棒的 CSS 动画。如：

```
.demo1 {
  -webkit-transition:all .5s ease-out;
  -moz-transition:all .5s ease-out;
  -ms-transition:all .5s ease-out;
  -o-transition:all .5s ease-out;
  transition:all .5s ease-out;
}

.demo1:hover {
  -webkit-transform:translate(0px,10px);
  -moz-transform:translate(0px,-10px);
  -ms-transform:translate(0px,-10px);
  -o-transform:translate(0px,10px);
  transform:translate(0px,-10px);
} 
```

我不知道如何以编程方式激活这些动画。因此，例如，`hover`我如何通过调用而不是 on a 来翻译元素`elem.translate()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T01:07:18.077

我可能误解了您的要求，但我认为您可能对元素上的“翻译”有错误的印象。DOM 元素有一个名为“translate”的属性，以及一个 css 属性“translate”。但是，元素属性[“translate”只是一个布尔标志，指定元素中的文本是否应在语言意义上进行翻译](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#the-translate-attribute)，它不是可调用函数，与 css 属性无关。

除此之外，还有很多方法可以以编程方式翻译元素。其他一些人已经对如何使用 jQuery 做到这一点给出了很好的想法。如果您不想使用 jQuery，您仍然可以手动添加和删除类（样式也是如此）。

* * *

这是我为添加/删除类而准备[的示例。](http://jsbin.com/ilibew/1/edit)这很简单，但这里是类修改的相关代码：

```
.translator {
  -webkit-transform:translate(0px,100px);
  -moz-transform:translate(0px,-100px);
  -ms-transform:translate(0px,-100px);
  -o-transform:translate(0px,100px);
  transform:translate(0px,-100px);
}
...
function move_box() {
  var the_box = document.getElementById("the-box");
  if (the_box.classList.contains("translator")) {
    the_box.classList.remove("translator");
  } else {
    the_box.classList.add("translator");
  }
} 
```

通过应用该类，动画将开始（删除它会反转它）。这可以发生任意多次。

一个重要的注意事项：对于这个例子，我仍然有样式“transition:all .5s ease-out;” 在发生任何事情之前应用于 div。这只是一个通用的默认值，它控制动画效果如何应用于元素。有几种不同的方法可以解决这个问题，但为了简单起见，我将就这样离开它。

否则，您可以[直接添加样式，如下所示](http://jsbin.com/ulapud/1/edit)：

```
function move_box() {
  var the_box = document.getElementById("the-box");
  set_translate(the_box, 100);
}

function set_translate(e, pix) {
  e.style["-webkit-transform"] = "translate(0px, "+ pix +"px)";
  e.style["-moz-transform"] = "translate(0px, -" + pix +"px)";
  e.style["-ms-transform"] = "translate(0px, -" + pix + "px)";
  e.style["-o-transform"] = "translate(0px, " + pix  + "px)";
  e.style["transform"] = "translate(0px, -" + pix + "px)";
} 
```

这里没有什么太复杂的——它通过操纵元素上的样式直接设置每个相关元素。和以前一样，它依赖于一个单独的类来指定过渡样式。

* * *

就个人而言，我认为课程添加/删除要优越得多。从技术上讲，直接修改样式更灵活，但如果这是您的目标，您可能应该使用像 jQuery transit 这样的好库（如评论中所述）。但是，如果您只是希望能够以编程方式应用一些预设效果，那么动态修改类是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T23:33:21.630

如果您已经有了 CSS，您可以在 jquery 中通过`$('.demo1').trigger('hover');`模拟悬停事件来触发它，或者将您的 css 选择器从更改`.demo:hover`为，`.class-name`然后使用添加该类`$('.demo').addClass('class-name');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:34:34.087

您可以使用`jQuery.css.fn`来应用 css 规则。

```
$('.demo1').click(function(){
    $(this).css({
        transform: 'translate(0px,-10px)'
    });
}); 
```

或者给元素添加一个类：

```
$('.demo1').click(function(){
    $(this).toggleClass('translate');
});

.translate {
  -webkit-transform:translate(0px,10px);
  -moz-transform:translate(0px,-10px);
  -ms-transform:translate(0px,-10px);
  -o-transform:translate(0px,10px);
  transform:translate(0px,-10px);
} 
```

# c# - 帮助我确定此示例中的确切转换逻辑

> ID：14803826
> 
> 赞同：-4
> 
> 时间：2013-02-10T23:22:02.277
> 
> 标签：c#, hex, logic, ascii

有人告诉我这是一个十六进制数据： **5920CDB68401B5E3**

将其转换为 ASCII 并变为： **5920<=;68401;5>3**

无论我如何试图找出转换逻辑并在代码中实现相同的目标——我都做不到。

您能帮我确定十六进制如何以及通过哪个概念变成 ASCII 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:25:46.447

Try this conversion table:

```
0 : 0
1 : 1
...
9 : 9
A : :
B : ;
C : <
D : =
E : >
F : ? 
```

# iteration - 如何让地图函数不返回一些东西？

> ID：14803827
> 
> 赞同：1
> 
> 时间：2013-02-10T23:22:03.360
> 
> 标签：iteration, sml, smlnj, currying, higher-order-functions

在 sml nj 中，如果您使用 map 函数，您基本上是对列表中的每个元素说，`x`在其上应用该函数`f`，并返回新值的列表，但可以说`f`返回一个字符串，并`f`完成比较，如果比较为真，则返回字符串，但如果为假，则不返回任何内容，并且不会将任何内容放入该地图当前正在构建的列表中。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:31:33.667

不要使用，而是使用(或)`map`的变体之一。当然，另一种选择是在执行.`fold``foldl``foldr``filter``map`

举个简单的例子，假设您想要返回一个平方整数列表，但前提是原始整数是偶数。filter-then-map 方法可能如下所示：

```
fun square_evens xs =
  (List.map (fn x => x * x)) (List.filter (fn x => x mod 2 = 0) xs) 
```

或者，您可以使用一种`foldr`方法。

```
fun square_evens xs =
  List.foldr (fn (x, xs') =>
    if x mod 2 = 0
    then (x * x) :: xs'
    else xs') [] xs 
```

稍微长一点，但可以说更清晰，并且可能更有效。

# jquery - toggleClass 在鼠标移动时闪烁

> ID：14803829
> 
> 赞同：1
> 
> 时间：2013-02-10T23:22:05.513
> 
> 标签：jquery, css, toggleclass

[http://esp-platform.ice.im/](http://esp-platform.ice.im/)

查看上面的 URL 并将鼠标悬停在右上角的向下箭头或搜索图标上。当用类将鼠标悬停在这个 li 上时，`cp-dropdown`我想切换类`showme`但是由于某种原因，当你移动鼠标时，类似乎闪烁？有没有人有任何想法？

使用的jQuery：

```
function navShow() {
  $('.cp-dropdown').mouseenter(function() {
    $('.site_tint').toggleClass('showme');
  });
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:35:11.383

该`mouseenter`事件一遍又一遍地触发，因此不断切换您的课程。实施`mouseleave`以删除类：

```
function navShow() {
  $('.cp-dropdown').mouseenter(function() {
    $('.site_tint').addClass('showme');
  }).mouseleave(function(){
    $('.site_tint').removeClass('showme');
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:18:35.877

感谢上面的@james246，我能够很容易地解决这个问题，我已经调整了他的代码来彻底解决这个问题；我基本上需要`z-index`在我的下拉菜单上应用与子 div 相同的内容。请参阅下面的我的补充：

```
function navShow() {
  $('.cp-dropdown').mouseenter(function() {
    $('.site_tint').addClass('showme');
    $(this).addClass('current')
  }).mouseleave(function(){
    $('.site_tint').removeClass('showme');
    $(this).removeClass('current')
  });
} 
```

希望这会有所帮助，请参阅问题中的 url 以获取工作示例:)

# vb.net - vb.net 中的 Google Chrome 框架

> ID：14803833
> 
> 赞同：2
> 
> 时间：2013-02-10T23:22:21.617
> 
> 标签：vb.net, google-chrome, browser, controls, frame

我需要在应用程序中加载网站，而该网站仅适用于谷歌浏览器

安装 Google Chrome Frame 后，我看到我有一个新的参考： `ChromeTabLib`

我正在尝试使用它，但我不知道如何使用它。

有人知道我如何在 Visual Basic.net 中使用带有 Google Chrome Frame 的浏览器控件吗？

更新：我尝试使用 Webkit，但该网站不适用于 Webkit。哈哈

UPDATE2：我添加了 ChromeFrame COM 工具，当我放在表单上时，我得到： [这条消息](http://fotos.subefotos.com/e1136899e41415ebe3d51ef7c092e123o.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T00:14:13.750

您可能需要改用 WebKit。WebKit 驱动 Chrome。有一些开源选项。

**这个看起来很有前途：[WebKit.NET](http://sourceforge.net/projects/webkitdotnet/)。它有相当活跃的[论坛](http://sourceforge.net/projects/webkitdotnet/forums/forum/939856)。**

> WebKit .NET 是用 C# 编写的 WebKit 控件库包装器。其目的是使用户可以轻松地将 WebKit 合并到他们的 .NET 应用程序中。

这是一个很有前途的[教程](http://webkitdotnet.sourceforge.net/basics.php)。从教程：

> 要在设计器中使用该控件，请右键单击工具箱并选择选择项 -> .NET Framework 组件。单击“浏览...”，导航到 WebKit .NET 目录并选择 WebKitBrowser.dll。WebKitBrowser 控件应出现在如下列表中

您可以使用控件的导航功能来加载页面：

```
private sub button1_Click(byref sender as object, byval e as EventArgs)
    webKitBrowser1.Navigate(textBox1.Text)
end sub 
```

**相关问题**：[.net 的 Google chrome 控件](https://stackoverflow.com/questions/1534843/google-chrome-control-for-net)

# python-unicode - 从字符串中制作繁体中文字符列表

> ID：14803834
> 
> 赞同：0
> 
> 时间：2013-02-10T23:22:34.597
> 
> 标签：python-unicode

我目前正在尝试估计每个字符在大量繁体汉字样本中的使用次数。我对*字符*而不是文字感兴趣。该文件还包括标点符号和西方字符。

我正在阅读繁体中文字符的示例文件。该文件包含大量繁体中文字符样本。这是一个小子集：

映鼓掌10分钟评语指不及《花样年华》该片在柏林首映，首场后获全场10分钟。影展功放的《李一代师》版本教小龙武叶问决战散打王</p>

另一个增加的戏分是开场时叶问（梁朝伟饰）</p>

我的策略是读取每一行，将每一行拆分为一个列表，然后检查每个字符以查看它是否已存在于列表或字符字典中。如果该字符尚不存在于我的列表或字典中，我会将其添加到该列表中，如果它确实存在于我的列表或字典中，我将增加该特定字符的计数器。我可能会使用两个列表，一个字符列表和一个包含计数的并行列表。这将是更多的处理，但也应该更容易编码。

我还没有接近这一点。

我能够成功读取示例文件。然后我可以为我的文件的每一行列出一个列表。我可以将这些单独的行打印到我的输出文件中，然后重新构建原始文件，繁体中文就完好无损。

但是，当我尝试列出特定行上的每个字符时，我遇到了麻烦。

我已经阅读了以下文章。我理解了许多评论，但不幸的是，无法理解足够多的评论来解决我的问题。 [如何在不使用空格作为单词分隔符的语言（如中文）上执行 Python split()？](https://stackoverflow.com/questions/3797746/how-to-do-a-python-split-on-languages-like-chinese-that-dont-use-whitespace)

我的代码如下所示

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import codecs

wordfile = open('Chinese_example.txt', 'r')

output = open('Chinese_output_python.txt', 'w')

LINES = wordfile.readlines() 
```

通过各种测试，我确信以下行没有将字符串 LINES[0] 拆分为其组成汉字。

```
A_LINE = list(LINES[0])

output.write(A_LINE[0]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:44:18.167

成功分割一行繁体中文字符..我只需要知道处理编码字符的正确语法..非常基本。

my_new_list = list(unicode(LINE[0].decode('utf8')));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:43:09.230

我的意思是你想使用这个，来自[How to do a Python split() on Languages (like Chinese) that don't use whitespace as word separator？](https://stackoverflow.com/questions/3797746/how-to-do-a-python-split-on-languages-like-chinese-that-dont-use-whitespace/3798790#3798790)：

```
from re import compile as _Re

_unicode_chr_splitter = _Re( '(?s)((?:[\ud800-\udbff][\udc00-\udfff])|.)' ).split

def split_unicode_chrs( text ):
  return [ chr for chr in _unicode_chr_splitter( text ) if chr ] 
```

# eclipse - Eclipse 崩溃“java 已启动但返回退出代码 = -805306369”

> ID：14803836
> 
> 赞同：4
> 
> 时间：2013-02-10T23:22:38.697
> 
> 标签：eclipse, eclipse-rcp

我知道这里有一个相同的帖子[，](https://stackoverflow.com/questions/10157794/java-was-started-but-returned-exit-code-805306369 "上一篇")但是所提出的解决方案都没有改变任何东西，而且它们已经很老了（与 Java6 有关的问题）并且似乎指的是与 Eclipse 相关的错误。

我的问题是当我在[Eclipse 中为 RCP 和 RAP 开发人员进行开发](http://www.eclipse.org/downloads/packages/eclipse-rcp-and-rap-developers/junosr1 "我正在使用的 Eclipse 版本")时；要么更改 java 文件或更改依赖项等，Eclipse 随机挂起然后冻结。我必须强制关闭日食，并收到此消息

![Eclipse RCP 错误消息](../Images/6c852425e9f3acc2aa596d82f9fe15bf.png)

到目前为止我尝试过的事情：

*   重启eclipse和PC
*   将该`-clean`命令添加到 eclipse.ini 文件的最开头
*   创造了一个全新的工作空间，并试图在其中发展

我正在运行最新版本的 Java (1.7.0_13)，但不知道下一步该做什么。

这个问题在许多不同的场合发生了 4 到 5 次：

*   当我尝试将新包添加到 src 文件夹时
*   当我尝试将类添加到 src 文件夹中的包时
*   当我试图在 src 文件夹中的包中编辑一个类时
*   在 src 文件夹中的类中使用 Ctrl+Space 时

任何建议/提示将不胜感激！需要解决这个问题，这样我才能为我的大学三年级项目进行开发:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-27T00:24:09.797

> java 已启动但返回退出代码 = -805306369

是由 Eclipse 的工作空间损坏引起的，我通过以下 3 个步骤解决了我的问题：

### 1）转到您的工作区并重命名它。

### 2）启动你的eclipse，默认情况下它会创建一个工作区。

### 3) 转到文件-> 切换工作区，选择您原来的工作区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T17:05:49.303

经过大量研究和提交错误报告无济于事后，我尝试了最后一次清除 Java 和全新安装的 Eclipse 以尝试修复错误，它似乎已经奏效。

这是我所做的：

*   为 RCP 和 RAP 开发人员卸载 Eclipse
*   从我的 PC 中卸载 Java 并删除所有遗留的旧 Java 文件夹（我在之前的清除中没有这样做，所以可能是旧版本的 Java 搞砸了）
*   为 RCP 和 RAP 开发人员重新安装了 Eclipse，并重新安装了最新的 Java
*   我还在环境变量中删除了 Java 的旧 PATH 变量，并将新变量放在所有其他条目的前面

这似乎已经修复了这个错误，所以希望它不会是一个短期的修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T09:06:32.190

我打开了另一个 Eclipse 实例，它提示我选择一个新的工作区。我这样做了，它在那里得到了解决。然后我关闭了新的工作区并像往常一样回到旧的工作区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T14:53:23.530

如果使用 Maven 项目，请检查 pom.xml，这可能已损坏。通过修复 pom 文件解决了我的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-22T14:11:55.010

`java was started but returned exit code = -805306369`由于 Eclipse 的工作空间损坏，我通过以下 4 个步骤解决了我的问题：

1.  关闭 Eclipse。
2.  从任务管理器中杀死 adb。
3.  启动 Eclipse，默认情况下它将创建一个工作区或从新的工作区开始。
4.  转到文件-> 切换工作区，选择您原来的工作区。

# php - Loop through directory

> ID：14803840
> 
> 赞同：0
> 
> 时间：2013-02-10T23:23:20.330
> 
> 标签：php

I'm trying to use PHP to bring in every image from a specific directory and turn them into HTML objects by wrapping some markup around them.

Right now I am just trying to get the images on the page. In the future I would also like to bring in a text file that has the same file name as the image(slide#4.jpg and slide#4.txt).

This is what I have so far.

```
<?php

    $dir = "includes/pages/products/*.jpg";

    $images = glob( $dir );

    foreach( $images as $image ):
        $file = basename($image);
        $file = basename($image, ".jpg");
        echo "<div class='"prod-cont"'>" . "<h4>" . $file . "</h4>" . "<img src'" . $image "' />" . "</div>";
    endforeach;
?> 
```

I'm not having much luck getting this going, any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:27:03.237

Remove the second `$file =` line, and make sure you're generating correct HTML.

```
echo "<div class='prod-cont'><h4>".$file."</h4><img src='".$image."' /></div>"; 
```

# excel - change a cell that was just entered based on multiplying with an adjacent field

> ID：14803841
> 
> 赞同：0
> 
> 时间：2013-02-10T23:23:51.947
> 
> 标签：excel, vba

I have a form that I need to have change when the data is entered. Tough to explain but this is the best way I can describe my situation:

> A b
> 1 .5 10
> 2 .5 5
> 3 The end user will be entering 10 in b1 and I want it to change to 5 as they enter it. I can not alter the columns as this is set form.

Any ideas? Thank you.

Sorry I can not figure out the formatting...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:09:20.313

您可以在工作表代码中添加一些这样的内容：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Address = Range("B1").Address Then

    If Range("B1") = 10 Then

        Range("B1").Value =  5

    Else

        Range("B1").Value = 5

    End If

End If

End Sub 
```

# r - How to create a word grouping report using R language and .Net?

> ID：14803842
> 
> 赞同：-2
> 
> 时间：2013-02-10T23:23:56.030
> 
> 标签：r, c#-4.0, statistics

I would like to create a simple application in C# that takes in a group of words, then returns all groupings of those individual words from a data set.

For example, given car and bike, return a list of groups/combinations of words (with the number of combinations found) from a data set.

To further clarify - given a category named "car", I would like to see a list of word groupings with the word "car". This category could also be several words rather than just one.

With a sample data set of:

CAR:

*   Another car for sale
*   Blue car on the horizon
*   For Sale - used car
*   this car is painted blue

should return

```
car : for sale : 2
car : blue : 2 
```

I'd like to set a threshold, say 20 or greater, so if there are over 20 instances of the word(s) with car, then display them - `category`, `words`, `count`, where only `category` is known; `words` and `count` is determined by the algorithm.

The data set is in a SQL Server 2008 table, and I was hoping to use something like a .Net implementation of R to accomplish this.

I am guessing that the best way to accomplish this may be with the R programming language, and am only now looking at R.Net.

I would prefer to do this with .Net, as that is what I am most familiar with, but open to suggestions.

Can someone with some experience with this lead me in the right direction?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:32:45.113

您的问题似乎由 4 个部分组成：

1.  从 SQL Server 2008 获取数据
2.  从一组字符串中提取子字符串
3.  设置何时接受该数字的阈值
4.  生成包含此内容的某些文档或其他输出（？）。

对于 1，我认为这是一个不同的问题（请参阅`RODBC`包），但我不会在这里处理这个问题，因为这不是你问题的主要部分。你留下了 4\. 有点模糊，我认为这也是你问题的核心。

第 2 部分可以使用正则表达式轻松处理：

```
countstring <- function(string, pattern){
  stringcount <- sum(grepl(pattern, string, ignore.case=TRUE), na.rm=TRUE)
  paste(deparse(substitute(string)), pattern, stringcount, sep=" : ")
} 
```

这个函数基本上得到一个字符串向量和一个要搜索的模式。它找到它们中的哪一个匹配并获得匹配的数字的总和（即计数）。然后它将这些一起打印在一个字符串中。例如：

```
car <- c("Another car for sale", "Blue car on the horizon", "For Sale - used car", "this car is painted blue")
countstring(car, "blue")
## [1] "car : blue : 2" 
```

第 3 部分需要对函数稍作改动

```
countstring <- function(string, pattern, threshold=20){
  stringcount <- sum(grepl(pattern, string, ignore.case=TRUE), na.rm=TRUE)

  if(stringcount >= threshold){
    paste(deparse(substitute(string)), pattern, stringcount, sep=" : ")
  }

} 
```

# java - Using the right builder in the right place

> ID：14803844
> 
> 赞同：3
> 
> 时间：2013-02-10T23:24:10.880
> 
> 标签：java, multithreading, design-patterns, builder, qa

I very interested in the builder pattern, I use it often but I am not sure if the builders I make are good enough and also I have doubts about all the surroundings where I can use them. This is an example of how I create a builder:

```
public class Person {

    private String name;
    private String secondName;
    private int age;

    public static class Builder {
        private boolean isBuilt;
        private Person person = new Person();

        private void check() {
            if (isBuilt) {
                throw new IllegalStateException(
                        "The object cannot be modified after built");
            }
        }

        public Builder withName(String name) {
            check();
            person.name = name;
            return this;
        }

        public Builder withSecondName(String secondName) {
            check();
            person.secondName = secondName;
            return this;
        }

        public Builder withAge(int age) {
            check();
            person.age = age;
            return this;
        }

        public Person build() {
            check();
            isBuilt = true;
            return person;
        }
    }

    @Override
    public String toString() {
        return "Name: " + name + "\nSecond name:" + secondName + "\nAge:" + age;
    }
} 
```

Just a quick usage example:

```
Person person = new Person.Builder()
        .withName("John")
        .withSecondName("Smith")
        .withAge(50)
        .build();
        System.out.println(person); 
```

Here some of my doubts:

*   Do you think it is really immutable?If no, How can I improve it?
*   About thread safety. Well this is probably my main doubt. Is this really thread safe? I saw examples on the internet that say that the class level variables must be final and passed via a constructor. Also I saw one example where the variables were declared as volatile. What do you think about it?
*   Do you think that this builder would have any limitation in what regards the scenario where it can be used? What I mean is would it be suitable to be called in either an EJB, a JSF backing bean, an MDB,or become a JPA entity...?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:47:45.053

> 你认为它真的是一成不变的吗？[...] 这真的是线程安全的吗？

您的代码中没有任何部分是不可变的。这也可能会妨碍线程安全；也就是说，很难以二进制方式声明一个类是否是线程安全的。我也不明白为什么你会首先在线程之间共享构建器实例，但我可能会被你的代码示例的简单性误导。

为了更容易实现线程安全，您`Builder`的 s 本身应该是不可变的。这意味着每个`withXXX()`方法都应该返回一个代表新状态的新构建器。（可能有更聪明的方法可以做到这一点，但那将是直接的方法。）

只是重申一下：我不确定是否有必要使构建器线程安全 - 大多数情况下它们是生命周期和可见范围非常短的对象。是否要使它们不可变取决于用例，您可能希望存储部分填充的构建器，但这也很少见。`with`（但主观上，对于名称以 开头的方法而言，不就地修改对象似乎更直观，而不是名称以 开头的方法`set`。）

> 你认为这个构建器在它可以使用的场景方面有什么限制吗？

这通常是无法回答的，但是如果您确实使您的`Person`对象不可变，因此只能由您的构建器构造，它们将无法用作 JPA 实体，我的猜测也是作为 JSF 支持 bean。Java 框架通常会为您创建/管理某些对象，而不是期望它们是 JavaBean，这意味着可以通过反射调用无参数构造函数和属性设置器来创建这些对象。

# .net - Clickonce app with admistrative privileges

> ID：14803845
> 
> 赞同：0
> 
> 时间：2013-02-10T23:24:10.620
> 
> 标签：.net, wpf, clickonce

Is posible to deploy desktop application(wpf o other) using clickonce and let users to decide if they will let the app to to elevate?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:54:35.300

刚刚由 SeanBaker [http://social.msdn.microsoft.com/Forums/en-US/windowscompatibility/thread/2dfd23ee-ebfa-412c-a5dd-761ec1b55683/](http://social.msdn.microsoft.com/Forums/en-US/windowscompatibility/thread/2dfd23ee-ebfa-412c-a5dd-761ec1b55683/)找到并回答。似乎通过设计 clickonce 部署的应用程序只能通过附加进程（asInvoker 执行级别）来提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:39:35.583

ClickOnce 与使用 Windows 安装程序 (msi) 安装不同，因为该操作不仅受用户权限限制，而且是内置的。

它们之间有一个比较，请参阅

*   [http://msdn.microsoft.com/en-us/library/e2444w33.aspx](http://msdn.microsoft.com/en-us/library/e2444w33.aspx)
*   [http://msdn.microsoft.com/en-us/library/ms973805.aspx](http://msdn.microsoft.com/en-us/library/ms973805.aspx)

如果您不需要访问 reg 密钥或驱动程序等，那没关系，否则就可以了。

PS当用户安装/运行clickonce时从内存中提示他们无论如何他们都会允许它但不是管理权限作为上述原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T13:35:24.817

我也遇到过这个问题。经过多次尝试，我找到了一个非常简单的解决方案。我创建了一个快捷方式，它通过 cmd.exe 调用 clickonce 快捷方式。通过这个快捷方式“以管理员身份运行”上下文菜单变得可用，或者您可以默认调整管理​​员权限。

您只需要创建一个标准快捷方式并将其粘贴到目标文本框中，并插入您的应用程序路径：

%SYSTEMROOT%\System32\cmd.exe /C "[你的 "*.appref-ms" 文件的路径]"

好处：您可以以管理员或普通用户的身份运行您的应用程序。您仍然可以享受 clickonce 安装的所有好处。

ps：最灵活的解决方案是当您参考应用程序的开始菜单快捷方式时。

如果 clickonce 安装程序也将此快捷方式的副本复制到应用程序快捷方式旁边的开始菜单中，那就更好了。我很感兴趣这是怎么可能的。

# c++ - list node pointer 'not declared in this scope'?

> ID：14803846
> 
> 赞同：2
> 
> 时间：2013-02-10T23:24:11.300
> 
> 标签：c++, list, linked-list, g++

I've searched high and low trying to debug this, but so far I can't figure it out.

I've got a class declaration in a file named DataList.h, the methods in a file named DataList.cc file, and the main program in a separate .cc file.

DataList.cc has an #include header to include DataList.h.

whenever I run

```
g++ DataList.cc 
```

in Ubuntu terminal, it spits out

```
DataList.cc: In function ‘bool TransactOnce(int&, TRANS&, std::string&)’:
DataList.cc:395:2: error: ‘ListNodeT’ was not declared in this scope
DataList.cc:395:13: error: ‘nodeTPtr’ was not declared in this scope
DataList.cc:396:13: error: ‘headTrans’ was not declared in this scope 
```

What's weird is that I declare variables of these type ALL OVER THE PLACE in my other member functions in DataList.cc, but the compiler doesn't give me any other errors besides those above. I'm trying to figure out what it is that g++ doesn't like about those particular declarations in that one function.

'ListNodeT' is a struct within my main class, and the struct includes a pointer to another object that struct type. 'nodeTPtr' is simply a pointer to a 'ListNodeT' object, and 'headTrans' is a pointer (contained privately in the class) that points to an object of type ListNodeT, particularly, the very first node in the linked list.

The class "List" is intended for linked lists.

Here's the "DataList.h" file:

```
#ifndef DATALIST_H
#define DATALIST_H

#include <iostream>
#include <fstream>
#include <ostream>
#include <iomanip>

using namespace std;
const int MAXDISCIPLINES = 4;
const int MAXBREEDS = 4;
struct HORSE {
    int    ID;
    string    name; // maximum 25 alphanumeric characters, spaces included
    double    height;// in inches?
    int    age;
    char    genderCode;//'m', 'f', 'M', or 'F'
    int    breed; 
    int    disciplineCount;
    int    discipline[MAXDISCIPLINES];  
    double    lowBid; // minimum selling price
};
struct TRANS {
    char transCode;    //'A' for add, 'D' for delete or updating disciplines, or 'P' for updating lowBid price
    HORSE transHorse;
};
class List {
    private:
        struct ListNodeT {
            TRANS trans;
            struct ListNodeT *nextLNT;
        };
        ListNodeT *headTrans;

        struct ListNodeH {
            HORSE horse;
            struct ListNodeH *nextLNH;
        };
        ListNodeH *headHorse;
    public:
        //ListNodeH *headHorse;
        //ListNodeT *headTrans;

        List();
        List(const List &obj);
        ~List();
        bool InsertHorse(HORSE newHorse);
        bool InsertTrans(TRANS newTrans);

        bool DeleteHorse(int target);
        bool DeleteTrans(int target);

        bool ViewHorse(int target, HORSE &viewHorse);
        bool ViewTrans(int target, TRANS &viewTrans);

        int getNumHorses();
        void getNumTrans(int &numA, int &numDel, int &numDisc, int &numP);

        bool TransactOnce(int &skip, TRANS &thisTrans, string &failString);
        bool UpdateDisc(TRANS thisTrans);
        bool UpdatePrice(TRANS thisTrans);

        void ReportOneTransaction(fstream &strm, TRANS thisTrans);

};    //end List class definition
//methods are in file DataList.cc and compiled separately.

#endif 
```

And below is my "DataList.cc" file. The problematic "TransactOnce()" is towards the bottom.

```
#include "DataList.h"
#include <iostream>
#include <sstream>
#include <fstream>
#include <ostream>
#include <iomanip>

using namespace std;

//constructor
List::List(){
    headHorse = NULL;
    headTrans = NULL;
}

//copy constructor
List::List(const List &obj){
    //copy the linked list of horses
    ListNodeH *nodeHPtr;
    ListNodeH **newListHPtr;
    headHorse = NULL;
    newListHPtr = &headHorse;    //means &(this->headHorse), not &(obj.headHorse)
    nodeHPtr = obj.headHorse;
    while (nodeHPtr != NULL) {
        *newListHPtr = new ListNodeH;
        (*newListHPtr)->horse = nodeHPtr->horse;
        (*newListHPtr)->nextLNH = NULL;
        newListHPtr = &((*newListHPtr)->nextLNH);
        nodeHPtr = nodeHPtr->nextLNH;
    }

    //copy the linked list of transactions
    ListNodeT *nodeTPtr;
    ListNodeT **newListTPtr;
    headTrans = NULL;
    newListTPtr = &headTrans;
    nodeTPtr = obj.headTrans;
    while (nodeTPtr != NULL) {
        *newListTPtr = new ListNodeT;
        (*newListTPtr)->trans = nodeTPtr->trans;
        (*newListTPtr)->nextLNT = NULL;
        newListTPtr = &((*newListTPtr)->nextLNT);
        nodeTPtr = nodeTPtr->nextLNT;
    }
}//end copy constructor

//destructor
List::~List(){
    //destroy the list of horses
    ListNodeH *nodeHPtr;
    ListNodeH *nextHNode;
    nodeHPtr = headHorse;
    while(nodeHPtr != NULL){
        nextHNode = nodeHPtr->nextLNH;
        delete nodeHPtr;
        nodeHPtr = nextHNode;
    }//end walkthrough

    //destroy the list of transactions
    ListNodeT *nodeTPtr;
    ListNodeT *nextTNode;
    nodeTPtr = headTrans;
    while(nodeTPtr != NULL){
        nextTNode = nodeTPtr->nextLNT;
        delete nodeTPtr;
        nodeTPtr = nextTNode;
    }//end walkthrough
}//end List::~List()

//********************************************************************
// FUNCTION NAME: InsertHorse()
// FUNCTION PURPOSE: inserts a new HORSE struct into our list
// INPUT PARAMETERS:
//      1\. HORSE newHorse    - the object of type DATA to be inserted into the List.
//RETURN VALUE – bool
//********************************************************************
bool List::InsertHorse(HORSE newHorse){
    bool success = false;
    ListNodeH *newNodeHPtr;
    ListNodeH *nodeHPtr;
    ListNodeH *prevNodeHPtr = NULL;

    newNodeHPtr = new ListNodeH;    
    newNodeHPtr->horse = newHorse;

    if(!headHorse){    //if head==NULL, our list is empty
        headHorse = newNodeHPtr;
        newNodeHPtr->nextLNH = NULL;
        success = true;
    }
    else {    //perhaps add?  Our list is currently not empty.
        nodeHPtr = headHorse;
        //prevNodePtr;    [sic] in my notes.  I think it's supposed to be prevNodePtr = NULL;, but this should already be true
        while(nodeHPtr != NULL && nodeHPtr->horse.ID < newHorse.ID){    //searches for approriate place
            prevNodeHPtr = nodeHPtr;
            nodeHPtr = nodeHPtr->nextLNH;
        }
        if(nodeHPtr != NULL && nodeHPtr->horse.ID == newHorse.ID){    //checks for duplicates
            delete newNodeHPtr;
            success = false;    //note: this is the only way that Insert could return false
        }
        else {    //insert the node
            success = true;
            newNodeHPtr->nextLNH = nodeHPtr;
            if(prevNodeHPtr == NULL)        //we're at the beginning of the list
                headHorse = newNodeHPtr;
            else                //not at the beginning of the list
                prevNodeHPtr->nextLNH = newNodeHPtr;
        }//successful insertion
    }
//    delete newNodeHPtr;
    return success;
}
//end List::InsertHorse()

//********************************************************************
// FUNCTION NAME: InsertTrans()
// FUNCTION PURPOSE:     inserts a new TRANS struct into our list.
//            if the transaction is trying to delete or update a horse that does not exist,
//            returns false, and transaction is not inserted.
// INPUT PARAMETERS:
//      1\. TRANS newTrans    - the object of type TRANS to be inserted into the List.
//RETURN VALUE – bool
//********************************************************************
bool List::InsertTrans(TRANS newTrans){
    bool success = false;
    ListNodeT *newNodeTPtr;
    ListNodeT *nodeTPtr;
    ListNodeT *prevNodeTPtr = NULL;

    newNodeTPtr = new ListNodeT;    
    newNodeTPtr->trans = newTrans;

    HORSE dummyHorse;    //dummy variable to be passed by reference to ViewHorse()

    //we need to ensure a few things
        //no duplicate IDs in transactions
        //no Del, Disc, or P transactions for which the horse dosn't already exist in inventory

    if(!headTrans){    //if head==NULL, our list is empty
        headTrans = newNodeTPtr;
        newNodeTPtr->nextLNT = NULL;
        success = true;
    }
    else {    //perhaps add?  Our list is currently not empty.
        nodeTPtr = headTrans;
        //prevNodePtr;    [sic] in my notes.  I think it's supposed to be prevNodePtr = NULL;, but this should already be true
        while(nodeTPtr != NULL && nodeTPtr->trans.transHorse.ID < newTrans.transHorse.ID){    //searches for approriate place
            prevNodeTPtr = nodeTPtr;
            nodeTPtr = nodeTPtr->nextLNT;
        }
        //check for duplicates
        if(nodeTPtr != NULL && nodeTPtr->trans.transHorse.ID == newTrans.transHorse.ID){
            delete newNodeTPtr;
            success = false;
        }
        //in the case of Delete or Update transactions for which the horse does not already exist in inventory
        else if((newTrans.transCode == 'D' || newTrans.transCode == 'P') && !List::ViewHorse(newTrans.transHorse.ID, dummyHorse)){
            delete newNodeTPtr;
            success = false;
        }
        else {    //insert the transaction node
            success = true;
            newNodeTPtr->nextLNT = nodeTPtr;
            if(prevNodeTPtr == NULL)        //we're at the beginning of the list
                headTrans = newNodeTPtr;
            else                    //not at the beginning of the list
                prevNodeTPtr->nextLNT = newNodeTPtr;
        }//successful insertion
    }
//    delete newNodeTPtr;
    return success;
}//end List::InsertTrans()

//********************************************************************
// FUNCTION NAME: DeleteHorse()
// FUNCTION PURPOSE: deletes a HORSE struct from our object of class List.
// INPUT PARAMETERS:
//      1\. int target    - the ID of the object of type HORSE to be deleted from List
//RETURN VALUE – bool
//********************************************************************
bool List::DeleteHorse(int target){
    bool success = false;
    ListNodeH *nodeHPtr;    
    ListNodeH *prevHPtr;

    if (!headHorse)    //empty list
        success = false;
    else if (headHorse->horse.ID == target) {    //found target at the beginning of list, delete it
        nodeHPtr = headHorse->nextLNH;
        delete headHorse;
        headHorse = nodeHPtr;
        success=true;
    }
    else {    // maybe delete?
        nodeHPtr = headHorse;
        while(nodeHPtr!=NULL && nodeHPtr->horse.ID < target){    //searching...
            prevHPtr = nodeHPtr;
            nodeHPtr = nodeHPtr->nextLNH;
        }
        if(nodeHPtr == NULL && nodeHPtr->horse.ID != target)    //we're at the end of the list, and if target's not here...
            success=false;                    //deletion failed.  This is the only case where Delete() returns false.
        else {                        //we're between the beginning and end, and we found the target
            prevHPtr->nextLNH = nodeHPtr->nextLNH;
            delete nodeHPtr;                //delete target.
            success = true;
        }
    }
    return success;
}

//********************************************************************
// FUNCTION NAME: DeleteTrans()
// FUNCTION PURPOSE: deletes a TRANS struct from our object of class List.
// INPUT PARAMETERS:
//      1\. int target    - the ID of the object of type TRANS to be deleted from List
//RETURN VALUE – bool
//********************************************************************
bool List::DeleteTrans(int target){
    bool success = false;
    ListNodeT *nodeTPtr;    
    ListNodeT *prevTPtr;

    if (!headTrans)    //empty list
        success = false;
    else if (headTrans->trans.transHorse.ID == target) {    //found target at the beginning of list, delete it
        nodeTPtr = headTrans->nextLNT;
        delete headTrans;
        headTrans = nodeTPtr;
        success=true;
    }
    else {    // maybe delete?
        nodeTPtr = headTrans;
        while(nodeTPtr!=NULL && nodeTPtr->trans.transHorse.ID < target){    //searching...
            prevTPtr = nodeTPtr;
            nodeTPtr = nodeTPtr->nextLNT;
        }
        if(nodeTPtr == NULL && nodeTPtr->trans.transHorse.ID != target)    //we're at the end of the list, and if target's not here...
            success=false;                    //deletion failed.  This is the only case where Delete() returns false.
        else {                        //we're between the beginning and end, and we found the target
            prevTPtr->nextLNT = nodeTPtr->nextLNT;
            delete nodeTPtr;                //delete target.
            success = true;
        }
    }
    return success;
}

//********************************************************************
// FUNCTION NAME: ViewHorse()
// FUNCTION PURPOSE: finds the HORSE struct whose ID is target, then returns the HORSE by reference.
// INPUT PARAMETERS:
//      1\. int target        - the ID to be searched for
//      2\. HORSE &viewHorse    - the object of type HORSE to be found and returned (by reference)
//RETURN VALUE – bool
//********************************************************************
//returns by reference the HORSE in the list with ID == target
//if View() returns false, then the target was not found and &viewHorse was not changed by ViewHorse().
bool List::ViewHorse(int target, HORSE &viewHorse){
    bool success = false;
    ListNodeH *nodeHPtr;
    nodeHPtr = headHorse;        //start at the beginning of the list

    while(nodeHPtr != NULL && nodeHPtr->horse.ID < target)    //search...
        nodeHPtr = nodeHPtr->nextLNH;

    //which test failed?
    if(nodeHPtr == NULL || nodeHPtr->horse.ID != target)    //we're at the end of the list, or didn't find the target.
        success = false;                //Note: this is the ONLY way that ViewHorse() returns false.
    else {        //nodeHPtr != NULL && nodeHPtr->horse.ID == target, we found the target
        success = true;
        viewHorse = nodeHPtr->horse;    //return by reference the HORSE in the list with ID == target
    }
    return success;
}//end List::ViewHorse()

//********************************************************************
// FUNCTION NAME: ViewTrans()
// FUNCTION PURPOSE: finds the TRANS struct whose ID is target, then returns the TRANS by reference.
// INPUT PARAMETERS:
//      1\. int target        - the ID to be searched for
//      2\. TRANS &viewTrans    - the object of type TRANS to be found and returned (by reference)
//RETURN VALUE – bool
//********************************************************************
//returns by reference the TRANS in the list with ID == target
//if ViewTrans() returns false, then the target was not found and &viewTrans was not changed by ViewTrans().
bool List::ViewTrans(int target, TRANS &viewTrans){
    bool success = false;
    ListNodeT *nodeTPtr;
    nodeTPtr = headTrans;        //start at the beginning of the list

    while(nodeTPtr != NULL && nodeTPtr->trans.transHorse.ID < target)    //search...
        nodeTPtr = nodeTPtr->nextLNT;

    //which test failed?
    if(nodeTPtr == NULL || nodeTPtr->trans.transHorse.ID != target)    //we're at the end of the list, or didn't find the target.
        success = false;                //Note: this is the ONLY way that ViewTrans() returns false.
    else {        //nodeTPtr != NULL && nodeTPtr->horse.ID == target, we found the target
        success = true;
        viewTrans = nodeTPtr->trans;    //return by reference the TRANS in the list with ID == target
    }
    return success;
}//end List::ViewTrans

//********************************************************************
// FUNCTION NAME: getNumHorses()
// FUNCTION PURPOSE: returns the number of nodes in our list of horses
// INPUT PARAMETERS: [none]
//RETURN VALUE – int
//********************************************************************
int List::getNumHorses(){
    int horseCounter = 0;
    ListNodeH *nodeHPtr;
    nodeHPtr = headHorse;
    while(nodeHPtr != NULL){
        nodeHPtr = nodeHPtr->nextLNH;
        horseCounter++;
    }
    return horseCounter;
}//end List::getNumHorses()
//********************************************************************
// FUNCTION NAME: getNumTrans()
// FUNCTION PURPOSE: returns (by reference) the numbers of various types of transactions in our list of transactions
// INPUT PARAMETERS:
//    1.int &numA    - number of "Add" transactions
//    2.int &numDel    - number of "Delete" transactions
//    3.int &numDisc    - number of "update discipline" transactions
//    4.int &numP    - number of "update lowBid" transactions
//RETURN VALUE – void
//********************************************************************
void List::getNumTrans(int &numA, int &numDel, int &numDisc, int &numP){
    numA = 0;
    numDel = 0;
    numDisc = 0;
    numP = 0;

    ListNodeT *nodeTPtr;
    nodeTPtr = headTrans;

    while(nodeTPtr != NULL){
        if(nodeTPtr->trans.transCode == 'A')
            numA++;
        else if(nodeTPtr->trans.transCode == 'D'){
            if (nodeTPtr->trans.transHorse.disciplineCount == 0)
                numDel++;
            else
                numDisc++;
        }
        else if(nodeTPtr->trans.transCode == 'P'){
            numP++;
        }        
        nodeTPtr = nodeTPtr->nextLNT;
    }
}//end List::getNumTrans()

//********************************************************************
// FUNCTION NAME: TransactOnce()
// FUNCTION PURPOSE: Performs a single transaction.  
//            [skip] number of transactions at the beginning of the linked list of trans are skipped.
//            The transaction immediately after the skipped transactions is attempted.
//            If the transaction fails, skip is incremented and the function returns false.
//            In any case, thisTrans is returned by reference as the transaction that was just attempted.
// INPUT PARAMETERS:
//      1\. int &skip        - the number of transactions to skip
//      2\. TRANS &thisTrans    - the returned transaction that was just attempted
//      3\. string &failString    - the ERROR, if any.
//RETURN VALUE – bool
//********************************************************************
bool TransactOnce(int &skip, TRANS &thisTrans, string &failString){
    bool success = true;
    stringstream failStream;

    ListNodeT *nodeTPtr;
    nodeTPtr = headTrans;
    HORSE dummyHorse;    //for ViewHorse()

    //if 'A', the ID must not already exist in our list of horses
    //if 'D' or 'P', the horse must already exist in our list of horses.
    //if 'D' and disciplineCount != 0, then
        //the existing horse must already have disciplineCount <4
        //transaction's transHorse.discipline[] must not have duplicates in the array
        //each of transaction's transHorse.discipline[]s must be valid (1<= discipline <=4)

    //find the transaction in question
    for (int i=0; i < skip; i++){
        nodeTPtr = nodeTPtr->nextLNT;
    }
    //nodeTPtr is now pointing to the appropriate ListNodeT.

    if (nodeTPtr->trans.transCode == 'A' && !List::InsertHorse(nodeTPtr->trans.transHorse)){
            failStream << "ERROR for horse transaction" << nodeTPtr->trans.transHorse.ID << " via InsertHorse().";
            success = false;
    }
    else if (nodeTPtr->trans.transCode == 'D'){    //delete or update disciplines
        if(nodeTPtr->trans.transHorse.disciplineCount == 0 && !List::DeleteHorse(nodeTPtr->trans.transHorse.ID)){    //for deletion
            failStream << "ERROR for horse transaction" << nodeTPtr->trans.transHorse.ID << " via DeleteHorse().";
            success = false;
        }
        else if(nodeTPtr->trans.transHorse.disciplineCount != 0 && !List::UpdateDisc(nodeTPtr->trans)){    //update disciplines
            failStream << "ERROR for horse transaction" << nodeTPtr->trans.transHorse.ID << " via UpdateDisc().";
            success = false;
        }
    }
    else if (nodeTPtr->trans.transCode == 'P' && !List::UpdatePrice(nodeTPtr->trans)){
        failStream << "ERROR for horse transaction" << nodeTPtr->trans.transHorse.ID << " via UpdatePrice().";
        success = false;
    }
    else {
        failStream << "ERROR for horse transaction" << nodeTPtr->trans.transHorse.ID << ", not a valid transCode.";
        success = false;
    }

    if (success){    //attempt to delete the transaction
        if (!List::DeleteTrans(nodeTPtr->trans.transHorse.ID)){
            failStream << "ERROR, could not delete transaction " << nodeTPtr->trans.transHorse.ID << ".";
            success = false;
        }
        else    //return true and error free
            failStream << "No error to report.";
    }
    if (!success)
        skip++;

    failStream << "\n";
    failString = failStream.str();
    return success;
}//end TransactOnce()

//********************************************************************
// FUNCTION NAME: UpdateDisc()
// FUNCTION PURPOSE: for an "update discipline" transaction, update the disciplines of that horse in inventory.
// INPUT PARAMETERS:
//      1\. TRANS thisTrans    - the transaction to be executed
//RETURN VALUE – bool
//********************************************************************
bool List::UpdateDisc(TRANS thisTrans){
    bool success = true;
    ListNodeH *nodeHPtr = headHorse;        //no need for a ListNodeT
    //obtain a pointer to the horse in question
    while (nodeHPtr != NULL && nodeHPtr->horse.ID < thisTrans.transHorse.ID)
        nodeHPtr = nodeHPtr->nextLNH;
    if(nodeHPtr == NULL)            //failed to find the horse
        success = false;
    //horse found; nodeHPtr->horse.ID == thisTrans.transHorse.ID
    else if(thisTrans.transCode != 'D')    //this isn't even a "D" transaction...
        success = false;
    else if(thisTrans.transHorse.disciplineCount == 0)    //nothing to do, this is for deletion
        success = false;
    else if(nodeHPtr->horse.disciplineCount + thisTrans.transHorse.disciplineCount > 4)
        success = false;        //too many disciplines
    else {
        //update the disciplines
        while(thisTrans.transHorse.disciplineCount !=0){
        nodeHPtr->horse.discipline[nodeHPtr->horse.disciplineCount] = thisTrans.transHorse.discipline[thisTrans.transHorse.disciplineCount-1];
            nodeHPtr->horse.disciplineCount++;
            thisTrans.transHorse.disciplineCount--;
        }//disciplines are now updated but perhaps not sorted

        //bubble-sort the horse's array of disciplines.
        int i, j;
        bool swaped = true;
        int tempInt;
        for(i = 1; (i <= nodeHPtr->horse.disciplineCount)&&swaped; i++){
            swaped = false;
            for (j=0; j< nodeHPtr->horse.disciplineCount-1; j++){
                if(nodeHPtr->horse.discipline[j] > nodeHPtr->horse.discipline[j+1]){
                    tempInt = nodeHPtr->horse.discipline[j];
                    nodeHPtr->horse.discipline[j] = nodeHPtr->horse.discipline[j+1];
                    nodeHPtr->horse.discipline[j+1] = tempInt;
                    swaped = true;
                }    
            }    
        }
    }//end update and sort horse's disciplines

    return success;
}//end List::UpdateDisc()

//********************************************************************
// FUNCTION NAME: UpdatePrice()
// FUNCTION PURPOSE: for an "update lowBid" transaction, update the lowBid of that horse in inventory.
// INPUT PARAMETERS:
//      1\. TRANS thisTrans    - the transaction to be executed
//RETURN VALUE – bool
//********************************************************************
bool List::UpdatePrice(TRANS thisTrans){
    bool success = true;
    ListNodeH *nodeHPtr;
    nodeHPtr = headHorse;
    //obtain a pointer to the horse in question
    while (nodeHPtr != NULL && nodeHPtr->horse.ID < thisTrans.transHorse.ID)
        nodeHPtr = nodeHPtr->nextLNH;
    if(nodeHPtr == NULL)            //failed to find the horse
        success = false;
    //else, horse found; nodeHPtr->horse.ID == thisTrans.transHorse.ID
    else if(thisTrans.transCode != 'P')    //this isn't even a "P" transaction...
        success = false;
    else {    //update lowBid
        nodeHPtr->horse.lowBid = thisTrans.transHorse.lowBid;
    }

    return success;
}//end List::UpdatePrice()

//********************************************************************
// FUNCTION NAME: ReportOneTransaction()
// FUNCTION PURPOSE: prints to Report.out a single transaction.  called by Transact().
// INPUT PARAMETERS:
//      1\. fstream &strm        - the stream to print to.
//      2\. TRANS oneTrans        - the transaction being reported.
//RETURN VALUE – void
//********************************************************************
void List::ReportOneTransaction(fstream &strm, TRANS oneTrans){
    //some "Ragged Arrays"
    string breedDescription[MAXBREEDS+1] = {"Dummy", "Pleasure Saddle Horse", "American Fox Trotter", "Virginia Highlander", "Arabian"};//21
    string disciplineDescription[MAXDISCIPLINES+1] = {"Dummy", "Dressage", "Jumper", "Hunter", "Western Pleasure"};//16
    if (oneTrans.transCode == 'A')
        strm << "Horse ADDED to inventory named '" ;
    else 
        strm << "Horse REMOVED from inventory named '" ;
    strm << oneTrans.transHorse.name << "'"<< endl;
    strm << "______________________________________________________________________\n";//70
    strm <<"ID  Height Age M/F LowBid     "<< oneTrans.transHorse.disciplineCount << " Discipline(s):  Breed\n";
    strm << left << setw(3)  <<oneTrans.transHorse.ID        <<" ";//ID
    strm << left << setw(5)  <<setprecision(2) <<oneTrans.transHorse.height        <<"  ";//height (double)
    strm << left << setw(3)  <<oneTrans.transHorse.age        <<" ";//age
    strm << left << setw(1)  <<oneTrans.transHorse.genderCode;    //genderCode (char)
    strm << "   "<<left<<'$';
    strm << right << fixed << setw(8) << setprecision(2) << oneTrans.transHorse.lowBid ;//lowBid (double)
    strm << left << "  " << setw(16) << disciplineDescription[oneTrans.transHorse.discipline[0]] ;
    strm << "  " << breedDescription[oneTrans.transHorse.breed] << endl;

    for (int j=1; j < oneTrans.transHorse.disciplineCount; j++){
        strm << "                              ";
        strm << disciplineDescription[oneTrans.transHorse.discipline[j]] << endl;
    }
    strm << endl << endl;
}//end ReportOneTransaction() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T23:26:22.160

You forgot `List::` on `TransactOnce` so it's trying to parse it as a stand-alone function. I did this myself just a couple days ago...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:31:24.697

该`TransactOnce`函数应按照声明的方式实现，作为以下成员函数`List`：

改变这个：

```
bool TransactOnce(int &skip, TRANS &thisTrans, string &failString){ 
```

对此：

```
bool List::TransactOnce(int &skip, TRANS &thisTrans, string &failString){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:41:46.400

在这里。我想到了。

定义 TransactOnce() 时

```
bool TransactOnce(.....) 
```

本来应该

```
bool List::TransactOnce(....) 
```

# java - 互斥代码

> ID：14803850
> 
> 赞同：0
> 
> 时间：2013-02-10T23:24:42.083
> 
> 标签：java, multithreading

我正在尝试将此代码转换为 java 并使用线程来实现它

```
turn = 0 // shared control variable    
while (turn != i);
// CS
turn = (turn + 1) % n; 
```

我真的很努力地找到正确的代码，但我失败了这是我的代码

```
/*
 * Mutual exclusion using thread
 */
class gV{
int turn=0;
}

class newThread extends Thread{

    static int i;
    int n=10;
    newThread(gV obj){
    this.i=obj.turn;
    start();
    }

    public void run(){

    while(obj.turn!=i&&obj.turn<n);
    criticalSection(i);
    obj.turn=(obj.turn+1);
    i++;
    }

    public void criticalSection(int numOfProcess){
    System.out.println("Process " + numOfProcess + " done!!");
    }
}

class MutualExclusion{
    public static void main(String args[]){
    gV obj = new gV();
    new newThread(obj);
    }
} 
```

我知道我的代码有一些错误。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:31:14.837

使用`AtomicInteger`.

原子意味着在任何其他线程可以看到结果之前对其进行的任何操作都将完全完成。这意味着您不会有两个同时操作“破坏”它。例如，假设您有一个非原子整数，并且两个线程试图同时递增它——假设它的值为 1，它们都将其读取为 1 并尝试将其设置为 2。它们都将它递增一次——但不是它变成了3，变成了2！`AtomicInteger`通过给你解决这个问题`IncrementAndGet`，这保证在增量完成之前没有其他线程可以访问`AtomicInteger`' 值。

特别是，使用这些方法：

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html#get()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html#get())

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet())

您可能会注意到这会增加它，但它不会以 n 为模。好吧，您可以在读取它的值时对其取模，您不需要以这种方式存储它。

编辑：顺便说一句，做这样的事情：

```
while (turn != i); 
```

被称为忙等待，这是一个坏主意，因为这意味着 CPU 使用率将是 100%，每秒检查变量数十万次。`wait` 在这种情况下，您希望拥有线程并在`notify`轮到该线程继续执行时被另一个线程编辑，而不是尽可能频繁地检查每个线程。

我相信在 Java 中，使用`lock`和`synchronized`实现互斥也会给你这个属性，例如，如果你尝试锁定某个东西或进入一个同步块但它已经在使用中，那么线程进入睡眠状态并在它被唤醒时被唤醒轮到它了。所以，你也可以调查一下。

# python - Generating Sentences Using Python

> ID：14803854
> 
> 赞同：-1
> 
> 时间：2013-02-10T23:25:01.240
> 
> 标签：python

I need to generate sentences using python. I have the words I need intact but can't figure out how to make it so only correct sentences come out after I run it.

Here's my code

```
import random

def S():
    print DP(), VP()

def DP():
    detPhrase = D() + ' ' + N()
    return detPhrase

def VP():
    randInt = random.randint(0,1)
    if randInt == 0:
        return V() 
    else:
        return V() + ' ' + DP()

def N():
    nouns = ['cat', 'dog', 'Bella']
    randInt = random.randint(0,len(nouns)-1)
    return nouns[randInt]

def D():
    articles = ['the', 'to']
    randInt = random.randint(0,len(articles)-1)
    return articles[randInt]

def V():
    verbs = ['ran','kissed','gave']
    randInt = random.randint(0,len(verbs)-1)
    return verbs[randInt]

for num in range(30):
    S() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:32:53.930

阅读有关乔姆斯基层次结构的信息：[http ://en.wikipedia.org/wiki/Chomsky_hierarchy#Formal_grammars](http://en.wikipedia.org/wiki/Chomsky_hierarchy#Formal_grammars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-29T20:47:28.437

你可以通过正确识别词性来做出很大的改进：**“to”是介词，而不是冠词**。

```
articles = ['the', 'a'] 
```

这不是莎士比亚，但至少我们在球场上：

```
a dog kissed the dog
a dog kissed the dog
the cat kissed
a cat kissed
a cat gave the dog
a dog kissed the cat
the dog gave
a dog kissed the dog 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T23:42:45.263

大约 6 个月前，我想起了旧的[racter](http://en.wikipedia.org/wiki/Racter)程序，并拼凑了一个 Python 变体。它可能比实际的句子生成更接近 MadLib。我将它打包为 Utility Mill 的在线实用程序：http: [//utilitymill.com/utility/Graduation_speech](http://utilitymill.com/utility/Graduation_speech)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T00:38:22.373

在圣诞节假期里，我写了[hornet](https://github.com/pillmuncher/hornet)，它是 Python 3.3 中类似 Prolog 的嵌入式 DSL。它还不是很好 - 只是一个概念证明 - 并且没有文档可言，但有一个文件*[parsing.py](https://github.com/pillmuncher/hornet/blob/master/parsing.py)*包含简单德语句子的 DCG 规则。您可以尝试一下并查看代码。也许它对你有一些帮助。

# python - 压缩交替元素

> ID：14803860
> 
> 赞同：1
> 
> 时间：2013-02-10T23:25:47.637
> 
> 标签：python

鉴于以下情况：

```
list = [('[', "'Conrad Clifton'"), ('[', "'Rippa'")] 
```

我将如何获得表格中的列表

```
[('Conrad Clifton', 'Rippa')] 
```

类似于：

```
new_list = []
for first, second in list:
    new_list.append(second) 
```

然后将列表转换为元组。有没有办法通过列表理解来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:28:05.750

```
>>> tuple(second for first, second in li)
("'Conrad Clifton'", "'Rippa'") 
```

并且不要将您的列表命名为`list`. 它是一种内置类型。您不应该使用内置名称来命名您的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T23:27:44.057

```
your_output = tuple(y for x,y in your_input) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T23:34:01.493

另一种解决方案（python 2.x）：

```
>>> x = [('[', "'Conrad Clifton'"), ('[', "'Rippa'")]
>>> zip(*x)[1]
("'Conrad Clifton'", "'Rippa'") 
```

避免`list`用作变量名，它会隐藏内置名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T23:37:43.817

你也可以使用`operator.itemgetter`：

```
>>> import operator
>>> l = [('[', "'Conrad Clifton'"), ('[', "'Rippa'")]
>>> map(operator.itemgetter(1), l)
    ["'Conrad Clifton'", "'Rippa'"] 
```

# performance - ASP.NET Web API StreamContent vs IIS Static File handler

> ID：14803867
> 
> 赞同：5
> 
> 时间：2013-02-10T23:26:40.517
> 
> 标签：performance, iis, asp.net-web-api, httpmodule

I'm putting together a document-management service using ASP.NET Web API, and performance is of *some* concern.

Based on [this article](http://www.nathanaeljones.com/blog/2009/20-image-resizing-pitfalls) by Nathanael Jones, author of the IIS / ASP.NET ImageResizer module, I've developed a few preconceptions on what's necessary for "optimal" performance of serving static files. The precis of that being:

1.  Use a `HttpModule` because it's very early in the ASP.NET pipeline (less pipeline = more optimised) and turns out to be easier to deal with this sort of thing than a `HttpHandler`.
2.  `Response.WriteFile(filename)` is better than `Response.Write(memBuffer)` where memBuffer is an in-memory C# buffer.
3.  A URL rewrite (i.e. `Context.RewritePath(virtualPath)`) is better than `Response.WriteFile(filename)`, because it will use the IIS static file handler, which is well optimised.

Trouble is, thanks to some bizarre caching issue I still can't get to the bottom of ([here](https://stackoverflow.com/questions/14743458/asp-net-httpmodule-rewritepath-virtual-directory-cache-not-refreshing)), my URL rewrite technique isn't behaving itself.

So now I'm left wondering about a more Web API-centric implementation like the following:

```
public Task<HttpResponseMessage> DoTheFoo()
{
    return Task<HttpResponseMessage>.Factory.StartNew(() =>
    {
        var response = new HttpResponseMessage();
        response.Headers.Add("Content-Disposition", "inline; filename=\"" + attachmentFileName + "\"");
        response.Headers.Add("content-type", mimeType);
        response.Content = new StreamContent(File.OpenRead("somefile.doc"));

        return response;
    });
} 
```

For a Web API solution this obviously makes things a bit neater, since the file-serving portions of the service can go right alongside the other actions in controllers, but how well is it going to perform and scale? The factors I ponder:

1.  **Network bandwidth.** Presumably no difference here, all techniques are writing the same number of bytes.
2.  **Speed of writing to the outgoing network stream.** IIS static file handler might be a bit better at this than the ASP.NET pipeline? Maybe less of an issue with integrated pipeline? The service will be serving on anything between a consumer-level couple-of-hundred kbits DSL line, up to a gbit LAN.
3.  **RAM usage.** I'm assuming the StreamContent implementation won't be as efficient as IIS static file handler.
4.  **CPU usage.** As with RAM, I'm assuming StreamContent is going to be a little more demanding than the IIS static file handler.
5.  **Server-side caching.** IIS static file handler offers this (and is precisely what's giving me hassle because it doesn't seem to be behaving itself), but presuming I could get it to behave itself, that's going to offer benefits ahead of the StreamContent implementation. I'm not so worried about this aspect though as the service is more likely to be responding to a lot of *different* file requests, as opposed to the same ones repeatedly.

I'm not in a position to put together a server-farm to test this to get real performance numbers, and I have my doubts that factoring up small-scale test results will give anything accurate. So from those in the know, what sort of differences could I expect? I'm almost ready to abandon the URL rewrite implementation, but if it's going to give me a noticeable performance hit, I'll persevere.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T19:11:20.563

不确定您是否计划在 Azure 中托管，但如果您是，您可以为您的图像使用专用的公共 blob 存储容器。然后使用 CDN 服务为您提供（和缓存）静态文件。这会将问题从您的 API 转移到 CDN 中，该 CDN 旨在处理静态资源。

# php - 使用 PHP 在单个网页中管理多个 highchart 图表

> ID：14803868
> 
> 赞同：0
> 
> 时间：2013-02-10T23:27:02.017
> 
> 标签：php, javascript, jquery, highcharts

在我的页面中，我可以选择同时显示一个图表还是所有图表。当我选择要查看的所有图表时，就可以了。当我选择“图表 a”时，就可以了。当我选择“图表 b”时，它不会显示任何图表。

我注意到当我选择“图表 a”或所有图表时，它会显示两个警报。当我选择“图表 b”时，它只显示第一个警报。

难道我做错了什么？任何帮助都感激不尽。

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>

<script type="text/javascript">
 $(document).ready(function() {
   Highcharts.setOptions({
    chart: {                            
      defaultSeriesType: 'spline',
    },
    xAxis: {
      type: 'datetime',         
    },        
  });

  var options1 = {
   chart: {
     renderTo: ''   
   },        
   series: []       
  };

  var options2 = {
   chart: {
     renderTo: ''   
   },    
   series: []       
  };

alert("chart1");
options1.series.push({name: "Temperatura",data: _VARS['data1'],lineWidth: 1,color: '#3e5bc1'});     
options1.chart.renderTo = 'chart_1';
var chart1 = new Highcharts.Chart(options1);

alert("chart2");
options2.series.push({name: "HR",data: _VARS['data2'],lineWidth: 1,color: '#3e5bc1'});          
options2.chart.renderTo = 'chart_2';
var chart2 = new Highcharts.Chart(options2);

});
</script>

</head>
<body>
<script>
  var _VARS = new Array();
  _VARS['data1'] = [[Date.UTC(2012,7,14,12,0),26.1],[Date.UTC(2012,7,14,13,0),27.2],[Date.UTC(2012,7,14,14,0),28],[Date.UTC(2012,7,14,15,0),28.4],[Date.UTC(2012,7,14,16,0),27.1],[Date.UTC(2012,7,14,17,0),27.2],[Date.UTC(2012,7,14,18,0),26.1],[Date.UTC(2012,7,14,19,0),24.8],[Date.UTC(2012,7,14,20,0),22.5],[Date.UTC(2012,7,14,21,0),21.3],[Date.UTC(2012,7,14,22,0),20.1],[Date.UTC(2012,7,14,23,0),19],[Date.UTC(2012,7,15,0,0),18.3]];
  VARS_AMBIENTE['data2'] = [[Date.UTC(2012,7,14,12,0),43],[Date.UTC(2012,7,14,13,0),44.1],[Date.UTC(2012,7,14,14,0),46.8],[Date.UTC(2012,7,14,15,0),49.3],[Date.UTC(2012,7,14,16,0),60.1],[Date.UTC(2012,7,14,17,0),57],[Date.UTC(2012,7,14,18,0),60.7],[Date.UTC(2012,7,14,19,0),69.5],[Date.UTC(2012,7,14,20,0),77.8],[Date.UTC(2012,7,14,21,0),80.5],[Date.UTC(2012,7,14,22,0),81.4],[Date.UTC(2012,7,14,23,0),83.1],[Date.UTC(2012,7,15,0,0),85.3]];
</script>

<h2>Choose Chart Test</h2>
<?php 
    // when i choose a, it's OK
    // when i choose b, it's NOT OK
    // when i choose c, it's OK

    //$param ="a";   
    $param ="b";    
    //$param ="c"; 

    if($param == 'a'){  
        echo "<p>chart a</p>
        <div id='chart_1'></div>";
    }elseif($param == 'b'){
        echo "<p>chart b</p> 
        <div id='chart_2'></div>";
    }else{
        echo "all charts\n";
        echo "<p>chart a</p><div id='chart_1' ></div></br></br>";
        echo "<p>chart b</p><div id='chart_2'></div></br></br>";
    }
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:38:38.667

当您选择选项 b) 时，该行：

```
var chart1 = new Highcharts.Chart(options1); 
```

导致javascript出错并停止执行脚本。Highcharts 找不到 chart_1 div 并以错误退出。当您选择选项 a) 时，脚本会通过此行但在此行停止：

```
var chart2 = new Highcharts.Chart(options2); 
```

你甚至没有注意到这一点。检查开发人员工具（Chrome 或 Firefox），javascript 控制台中存在错误。我做到了，在情况 b) 存在错误：Highcharts 错误 #13：未找到渲染 div

为了让它正确，您应该检查每个 div 是否存在于 html 中。尝试为此使用 jQuery：

```
alert("chart1");
options1.series.push({name: "Temperatura",data: _VARS['data1'],lineWidth: 1,color: '#3e5bc1'});     
options1.chart.renderTo = 'chart_1';
// checking if div#chart_1 exists
if ($("#chart_1").length > 0) {
    var chart1 = new Highcharts.Chart(options1);
}

alert("chart2");
options2.series.push({name: "HR",data: _VARS['data2'],lineWidth: 1,color: '#3e5bc1'});          
options2.chart.renderTo = 'chart_2';
// checking if div#chart_2 exists
if ($("#chart_2").length > 0) {
    var chart2 = new Highcharts.Chart(options2);
} 
```

# mongodb - 如何对 mongodb 文档进行大量操作？

> ID：14803877
> 
> 赞同：-2
> 
> 时间：2013-02-10T23:28:31.687
> 
> 标签：mongodb, tornado

这是我的架构：

```
"_id" : "tofla@darhoum.dz"

"modif" : 1

"prs" :
{
"pass" : "sdfdsf"
}

"reset" :
[
{
"code" : "1680"
"timr" : "AQQOAAMGCQMcBgodAAYYAgIMDAkLBAEeAAcNAAEG"
}
] 
```

我想**在同一行代码中执行很多操作**

```
yield tornado.gen.Task(db.users.update, {"_id":email}, {"$set":{"prs.pass":password}}, {"$inc":{"modif":1}}, {"$pop":{"reset":1}}) 
```

我得到了这个错误：

```
assert isinstance(upsert, bool), "upsert must be an instance of bool"
AssertionError: upsert must be an instance of bool 
```

但是当我将操作分成三个时它可以工作，

```
yield tornado.gen.Task(db.users.update, {"_id":email}, {"$set":{"prs.pass":password}})
yield tornado.gen.Task(db.users.update, {"_id":email}, {"$pop":{"reset":1}})
yield tornado.gen.Task(db.users.update, {"_id":email}, {"$inc":{"modif":1}}) 
```

我发现[了这个](https://stackoverflow.com/questions/9823140/multiple-mongo-update-operator-in-a-single-statement)，但认为它在异步调用中不是一回事，这是 mongodb 锁吗？

更新：试过这个并且工作：

```
yield [tornado.gen.Task(db.users.update, {"_id":email}, {"$set":{"prs.pass":password}}),
      tornado.gen.Task(db.users.update, {"_id": email}, {"$pop":{"reset":1}}),
      tornado.gen.Task(db.users.update, {"_id":email}, {"$inc":{"modif":1}})] 
```

但是危险吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T00:37:58.847

您可以将提供的多个运算符传递`dict`给`document`更新的参数：

```
yield tornado.gen.Task(db.users.update, {"_id":email}, {"$set":{"prs.pass":password}, "$inc":{"modif":1}, "$pop":{"reset":1}}) 
```

# javascript - UIWebViews 中网站的最佳缩放/大小

> ID：14803880
> 
> 赞同：1
> 
> 时间：2013-02-10T23:28:47.637
> 
> 标签：javascript, objective-c, ipad, uiwebview, scale

我熟悉两种在 UIWebViews 中缩放内容的方法，它们位于较小的一侧（>~320 点宽度）。

第一种方法是在 web 视图和 scalesPagesToFit 属性上设置适当的框架大小。这可以正常工作，但可能很容易导致内容以不易被消费的大小呈现。

另一种方法是注入 JavaScript 以编程方式设置内容的视口宽度。这适用于旨在用于移动演示的网站（例如，响应式网页设计）。如果您正在展示一个为移动消费而编码的网站，那么与使用 scaleToFit 属性相比，其结果在内容易读性方面要好得多。

问题是这两种方法是相互排斥的，或者看起来是这样。如果你缩放一个*没有*响应式设计的网站的内容，然后注入 JS 来设置 viewPort，你最终会得到一个难以辨认的内容框架，这会破坏 scalesToFit 的良好工作。

有没有办法以编程方式检测页面何时会按预期响应 javascript 注入并针对演示大小优化网站，而页面何时不会响应 javascript 但注入它会导致自动缩放的撤消?

# html - 如何设置单个 WordPress 菜单项的样式？

> ID：14803882
> 
> 赞同：2
> 
> 时间：2013-02-10T23:28:59.993
> 
> 标签：html, css, wordpress, styles

我试图在我的网站上只设计一个菜单项。我的 WordPress 网站上有一个“联系我们”菜单项​​，我正在尝试将其更改为 color `#FF860C`。

我刚试过这个但不行：

```
li#menu-item-155.menu-item menu-item-type-post_type menu-item-object-page menu-item-155 {
  color:#FF860C;
} 
```

我也尝试过只使用 ID 而没有其他任何东西，但没有成功。我知道我在这里缺少一些东西。`a`可以在样式中添加某个地方吗？如果我有令人困惑的个人 ID，它仍然没有意义。

我要更改颜色的项目是我的 WordPress 菜单上的“联系我们”选项，您可以在[http://www.SimonSaysWebsites.com/上看到它](http://www.SimonSaysWebsites.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:31:02.980

```
#menu-item-155 a{
  color: #FF860C;
} 
```

似乎有效（在里面的链接上应用颜色）

# c# - 从 XML 元素中读取空格字符

> ID：14803890
> 
> 赞同：1
> 
> 时间：2013-02-10T23:30:17.883
> 
> 标签：c#, .net, xml, whitespace

这次出乎意料的简单问题！:-) 有一个这样的 XML 文件：

```
<xml>
  <data> </data>
</xml> 
```

现在我需要准确地阅读元素中的任何`<data>`内容。无论是像 U+0020 这样的单个空格。我天真的猜测：

```
XmlDocument xd = new XmlDocument();
xd.Load(fileName);
XmlNode xn = xd.DocumentElement.SelectSingleNode("data");
string data = xn.InnerText; 
```

但这会返回一个**空字符串**。白色空间丢失了。任何其他数据都可以正常读取。

我需要做什么才能让我的空间角色在这里？

浏览网页一段时间后，我尝试使用允许我设置的 XmlReader 读取 XML 文件，`XmlReaderSettings.IgnoreWhitespace = false`但这并没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T23:34:02.473

`xml:space="preserve"`根据 W3C 标准和[MSDN 文档](http://msdn.microsoft.com/en-us/library/6f00zs65%28v=vs.71%29.aspx)，您必须在 XML 中使用。

> W3C 标准规定根据文档中空白的位置以及 xml:space 属性的设置，对空白进行不同的处理。如果字符出现在混合元素内容中或 xml:space="preserve" 范围内，则必须保留它们并在不修改的情况下传递给应用程序。不需要保留任何其他空白。XmlTextReader 仅保留出现在 xml:space="preserve" 上下文中的空白。

```
 XmlDocument xd = new XmlDocument();
        xd.LoadXml(@"<xml xml:space=""preserve""><data> </data></xml>");
        XmlNode xn = xd.DocumentElement.SelectSingleNode("data");
        string data = xn.InnerText; // data == " "
        Console.WriteLine(data == " "); //True 
```

[在这里](http://ideone.com/H7AstJ)测试。

# php - 如何防止在php中两次回显相同的值

> ID：14803894
> 
> 赞同：1
> 
> 时间：2013-02-10T23:30:42.997
> 
> 标签：php, forms, drop-down-menu

所以我在我的表单中有这个下拉列表，它从数据库中提取“标签”作为下拉选项的值：

```
<select name="cartags">
   <?php $result = mysql_query("SELECT * FROM Products WHERE ID > '0'");
   while($row = mysql_fetch_array($result))
   {
      echo "<option value=\""; echo $row['Tag']; echo "\""; echo ">"; echo $row['Tag']; echo "</option>";
   } 
   ?>   
</select> 
```

我的问题是什么？我的问题是我在我的数据库中添加了很多产品，并且我的代码创建了带有所有这些产品标签的下拉列表，即使它们具有相同的标签。所以我需要的是如何防止同一个标签在我的下拉列表中出现两次的解决方案。

我对 PHP 很陌生，这是我在这里的第一个问题，所以我真的希望我能很好地解释我的问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:37:48.497

目的是`WHERE ID > '0'`什么？如果`ID`是自动增量，那么它将始终为正。如果没有，它应该是。

你为什么使用`mysql_fetch_array`然后只使用关联键？你应该`mysql_fetch_assoc`改用。

`echo`为什么每次要输出变量时都使用 new ？只是串联。

为什么要设置与`value`选项文本相同的字符串？没有值，无论如何它默认为文本。

为什么不在列名和表名周围使用反引号？

试试这个：

```
<select name="cartags">
<?php
  $result = mysql_query("SELECT DISTINCT `Tag` FROM `Products`");
  while(list($tag) = mysql_fetch_row($result)) {
      echo "<option>".$tag."</option>";
  }
?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:44:33.510

试试这个

```
<select name="cartags">
<?php $result = mysql_query("SELECT Tag, COUNT(Tag) tg Products WHERE ID > '0'  GROUP BY Tag HAVING COUNT(Tag)>0 ORDER BY tg DESC");
while($row = mysql_fetch_array($result))
{
   echo "<option value=\""; echo $row['tg']; echo "\""; echo ">"; echo $row['tg']; echo " </option>";
 } 
?>   
</select> 
```

它还将显示最先出现的顶部标签。

# module - Zend 框架 2 中的路由

> ID：14803898
> 
> 赞同：3
> 
> 时间：2013-02-10T23:31:09.807
> 
> 标签：module, zend-framework2

我几乎没有尝试将某些控制器的路由放在 zend 框架 2 中，即使在我阅读了很多内容之后，我也无法理解为什么它仍然告诉我请求的控制器无法映射到现有的控制器类。我有一个名为 CRM 的模块，在 src 文件夹中我有联系人和公司，他们每个人都有控制器/表单/模型。这是我的 module.config 文件：

```
 array(
         'controllers' => array(
         'invokables' => array(
              'CRM\Controller\Contacts' => 'CRM\Controller\ContactsController',
          'CRM\Controller\Companies' => 'CRM\Controller\CompaniesController',
    ),
),

'router' => array(
    'routes' => array(
        'contacts' => array(
            'type'    => 'Segment',
            'options' => array(
                'route'    => '/contacts[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Contacts\Controller\Contacts',
                    'action'     => 'index',
                ),
            ),
        ),

        'companies' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/companies[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Companies\Controller\Companies',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
),

'view_manager' => array(
    'template_path_stack' => array(
        'contacts' => __DIR__ . '/../view/crm',
        'companies' => __DIR__ . '/../view/crm',
    ),
), 
```

);

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:02:59.520

在配置的顶部，您有 Controller invokables 配置：

```
'CRM\Controller\Contacts' => 'CRM\Controller\ContactsController', 
```

上面的第一个值是一个标识符。这就是您要在路由定义中使用的内容。例如您的`contacts`路线 - 尝试更改以下内容：

```
'defaults' => array(
     'controller' => 'CRM\Controller\Contacts',
     'action'     => 'index',
), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T13:14:19.460

如果我正确理解了问题和结构，则需要在自动加载器配置中设置命名空间...

```
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                // CRM
                __NAMESPACE__  => __DIR__ . '/src/' . __NAMESPACE__,
                // Contacts
                'Contacts' => __DIR__ . '/src/Contacts',
                // Companies
                'Companies' => __DIR__ . '/src/Companies',
            ),
        ),
    );
} 
```

# backbone.js - 主干：尝试在失败的 ajax 请求中在“this”上设置错误消息

> ID：14803899
> 
> 赞同：0
> 
> 时间：2013-02-10T23:31:11.430
> 
> 标签：backbone.js

我在发出 ajax 请求的 Backbone 应用程序中有一个用户模型。在错误回调中，我希望设置一条错误消息以传递给视图。但是，如果我尝试做

```
this.set({errors: result.errors}); 
```

我被告知“this”没有设置方法。在这种情况下，我相信“this”是 ajax 响应对象（而不是具有 set 方法的 User 模型）

```
Object {url: "/users.json", isLocal: false, global: true, type: "POST", contentType: "application/x-www-form-urlencoded; charset=UTF-8"…} 
```

但是，我也尝试过

```
 this.model.set({errors: result.errors}); 
```

但它说我不能调用未定义的“集合”。我假设从模型中说“this.model”是没有意义的，但是，如上所述，如果我只说“this”，它指的是响应对象。

这是错误的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T01:28:22.113

我假设您在保存模型时正在做这样的事情

```
model.save({
  success: function() {},
  error: function() {
    this.set({ errors: result.errors });
  }
}); 
```

如果是这种情况，那么您可以更改`this.set`为`model.set`，一切都会正常进行。

但是，将错误消息存储为模型属性并没有多大意义。

当服务器上的保存调用失败时，模型将触发一个事件（查看[主干事件目录](http://backbonejs.org/#Events-catalog)）。

因此，如果您有一个带有附加模型的视图，您可以告诉该视图侦听此错误事件。

```
var MyView = Backbone.View.extend({
  initialize: function() {
    // if your using backbone v0.9.10
    this.listenTo(this.model, 'error', this.handleModelError);
    // or for earlier versions
    this.model.on('error', this.handleModelError, this);
  },

  handleModelError: function(model, xhr, options) {
    // show an error message, or whatever
  }

});

var view = new MyView({ model: aModel });

// if the server returns an error, view.handleModelError will be called
aModel.save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:04:20.300

我认为这可能会失去背景。尝试使用 var self = this。就像是：

```
var self = this;
model.save("author", "F.D.R.", 
{error: function()
{ 
    self.model.set({errors: result.errors}); 
}}); 
```

# android - 为什么这个年生成3913

> ID：14803901
> 
> 赞同：0
> 
> 时间：2013-02-10T23:31:16.143
> 
> 标签：android, date

我写了一些代码，我试图将它们用作订阅的比较，所以这段代码应该转储当前日期。月份和日期是正确的，但年份相差约 1900 年左右

```
 Calendar calendar=Calendar.getInstance();
Date validDate = new Date(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));
    complain(validDate.toString()); 
```

抱怨是我编写的一个函数，它只是将字符串的值转储到警报框中的屏幕上

它显示了这个 3913-02-10

我需要在开始比较之前解决这个问题，所以越快越好

好的，我添加了一些新代码，不再使用过时的日期，但现在我的月份是 1，它显示 2013 1 10

```
 Calendar cal = Calendar.getInstance();

    int year = cal.get(Calendar.YEAR);
    int month = cal.get(Calendar.MONTH);
    int day = cal.get(Calendar.DAY_OF_MONTH);

    complain(String.valueOf(year) + " " + String.valueOf(month) + " " + String.valueOf(day)); 
```

经过进一步研究，我发现 MONTH 返回正确的值，但我不得不说这是非常不直观的，我认为这与对日期格式的正常理解相吻合 这已将一月设置为 0，二月设置为 1，三月设置为 2，等等. 这是不直观的。

谢谢大家

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T23:35:54.237

您正在使用一个[已弃用的构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28int,%20int,%20int%29)，该构造函数将年份 - 1900 作为其第一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:23:38.743

根据您最终要使用该应用程序做什么，请谨慎对待：

只需从年份中减去 1900 并将其发送到您的方法或您正在做的任何事情。

注意：这是一个糟糕的编程实践，如果这不是自学，请找到更好的方法。

# c++ - 列表迭代器擦除“调试断言失败”

> ID：14803905
> 
> 赞同：1
> 
> 时间：2013-02-10T23:31:33.753
> 
> 标签：c++, list, iterator

我有 2 个 std::lists。我想从列表 1 中删除所有项目并将其插入第二个，反之亦然。我的代码不起作用（出现访问冲突和“列表迭代器不可取消引用”）

```
for ( std::list<Item *>::iterator it = list1.begin(); it != list1.end(); ++it ) {
        it = list1.erase( it ); 
        list2.push_back( *it ); 
    }
it = list1.begin();
it = list2.erase( it ); // because the last element is not deleted in the above loop
list2.push_back( *it ); 
```

第二种方法的对称代码。我设法在 2 个列表之间转移项目一次，但下一次我得到了错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:35:13.780

`std::list`使用的[`swap`](http://en.cppreference.com/w/cpp/container/list/swap)成员函数可以轻松有效地完成此操作：

```
list1.swap(list2); 
```

这具有恒定的时间复杂度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:53:28.277

当然你必须使用`list::swap`. 但是您的代码表明您有一些误解。

```
for ( std::list<Item *>::iterator it = list1.begin(); it != list1.end(); ++it ) {
   it = list1.erase( it ); // this effectively erase and destroy *it, 
                 // and erase() return an iterator to the NEXT element. 
                 // Now it=it+1
   list2.push_back( *it ); // you copy the NEXT element!!  
   // here is where we efectively get the ++it of the 'for'. 
   // When erase was used when ‘it’ was at end()-1, erase return end()
   // The attempt to do it=end()+1 is an error probably detected by an assertion. 
} 
```

如果`list1`最初有偶数个元素，例如 0,1,2,3,4,5,6,7,8,9，迭代器`end()`将指向不存在的 10，而您不需要（不能）擦除。这个 '<code>for' 将删除偶数元素 (0,2,4,6,8) ，并复制到`list2`奇数元素 (1,3,5,7,9)。但是如果最初`list1`有奇数元素，例如 0,1,2,3,4,5,6,7,8 最后删除的是 8，则`erase`返回一个迭代器到不存在的 9 =`end(),`并且 'for' 尝试递增它不通过断言。

# android - 在运行时重新排序android线性布局？

> ID：14803908
> 
> 赞同：1
> 
> 时间：2013-02-10T23:32:05.303
> 
> 标签：android, layout

我有一个水平线性布局作为我的布局文件中的根元素。线性布局包含两个相对布局，每个布局都有几个子元素。如何交换这两个相对布局的位置？

我试过了

```
ViewGroup vg = (ViewGroup)findViewById(R.id.horizontalLayout);
RelativeLayout rl1 = (RelativeLayout)findViewById(R.id.panelLayout);
RelativeLayout rl2 = (RelativeLayout)findViewById(R.id.boardLayout);
vg.removeAllViews();
vg.addView(rl2);
vg.addView(rl1); 
```

我也试过

```
vg.removeView(rl2);
vg.addView(rl2, 0); 
```

两者都会导致第二个相对布局 (rl2) 占据整个宽度。如果需要，我可以发布我的 xml 文件，但它很长。两个相对布局也有 height=match_parent 和 width=wrap_content。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/horizontalLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<RelativeLayout
    android:id="@+id/panelLayout"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/next" />

    <com.mydomain.tetrisv2.PreviewGridView
        android:id="@+id/previewGridView1"
        android:layout_width="100dp"
        android:layout_height="150dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1" />

    <TextView
        android:id="@+id/txtScore"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/previewGridView1"
        android:text="Score: 0" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="@string/pausestr"
        android:onClick="btnPause_Click" />

    <TextView
        android:id="@+id/lblPaused"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtScore"
        android:layout_marginTop="20dp"
        android:text="@string/pausedstr"
        android:visibility="gone" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button1"
        android:layout_alignRight="@+id/previewGridView1"
        android:layout_marginBottom="41dp"
        android:text="@string/savestr"
        android:onClick="btnSave_Click" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/boardLayout"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <com.mydomain.tetrisv2.GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <ImageButton
        android:id="@+id/btnDrop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:src="@drawable/downarrow"
        android:background="@null"
        android:onClick="btnDrop_Click" />

    <ImageButton
        android:id="@+id/btnLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/leftarrow"
        android:background="@null"
        android:onClick="btnLeft_Click" />

    <ImageButton
        android:id="@+id/btnRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:src="@drawable/rightarrow"
        android:background="@null"
        android:onClick="btnRight_Click" />

</RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:43:12.140

尝试切换到`addView()`以 a`LayoutParams`作为第二个值的风格，并提供`LinearLayout.LayoutParams`与您当前在 XML 中设置的值相匹配的 a（“height=match_parent 和 width=wrap_content”）。

# events - MouseOver 的 JqPlot 事件

> ID：14803914
> 
> 赞同：2
> 
> 时间：2013-02-10T23:32:36.233
> 
> 标签：events, graph, mouseover, jqplot

我正在将 JqPlot 与 Javascript 一起使用，并希望为 GraphMouseOver 事件提供一些帮助。我看到有以下内容：

```
jqplotDataMouseOver 
```

我希望与上面相同，但不是仅针对数据的 MouseOver，而是为整个图表寻找 MouseOver。

是否有我可以查看的 JqPlot 事件列表，或者有人可以帮我知道这个事件的名称吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:42:40.110

尝试使用`jqplotMouseMove`. 例如，

```
$('#chart1').bind('jqplotMouseMove', 
    function (ev, seriesIndex, pointIndex, data) {
        alert('here');
    }
); 
```

通过`jquery.jqplot.js`文件，引发以下事件：

```
'jqplotClick'
'jqplotDblClick'
'jqplotMouseDown'
'jqplotMouseUp'
'jqplotRightClick'
'jqplotMouseUp'
'jqplotMouseMove'
'jqplotMouseEnter'
'jqplotMouseLeave' 
```

# objective-c - 来自外部 Nib 的基于视图的 NSTableView，子视图未初始化

> ID：14803920
> 
> 赞同：1
> 
> 时间：2013-02-10T23:33:22.993
> 
> 标签：objective-c, macos, nstableview

我试图了解 OS X 上基于视图的 NSTableViews。

我的问题是，在加载的视图单元（NSView 子类）中，当我尝试在我的委托中分配值时，子视图没有初始化。

目前显示正确的计数和正确的视图，但我无法访问子视图来分配正确的值。

**到目前为止我做了什么：**

*   在 Interface Builder 中使用自定义视图单元创建 xib。
*   为单元创建自定义类并在 IB 中分配它。

这工作正常，我可以在调试器中看到属性。正确的类和属性是连接到正确字段的 IBOulet。

**我可以看到调用：**

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
```

**在我的 NSViewController 中：`awakeFromNib`我这样做：**

```
// Make my view controller the delegate
_applicationTableView.delegate = self;
// set the correct datasource
_applicationTableView.dataSource = [NWDataHolder sharedInstance];
// register the nib with the custom cell
[_applicationTableView registerNib:cellNib forIdentifier:@"ApplicationListViewCell"]; 
```

**在我的`- (NSView *)tableView:viewForTableColumn:row:`我做：**

```
NWApplicationListViewCell *cell = [_applicationTableView makeViewWithIdentifier:@"ApplicationListViewCell" owner:self]; 
```

返回正确的类和单元格，我可以访问这些属性。问题是，该子视图未初始化，属性为 nil 并且无法设置新值：

```
Log(@"Application Name Label %@", cell.applicationNameLabel); => nil 
```

我已经看到了一些暗示子视图被延迟初始化的提示，但是我找不到使急切初始化的方法。

有什么建议我做错了吗？

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:33:50.583

修复了问题。但我不明白为什么会发生这种情况。

我将 IB 中的字段连接到文件所有者，但没有连接到我的 ApplicationViewCell。将属性连接到两者后，一切正常。

# c++ - 如何将 boost::bind(&myClass::fun, this, _1, _2, _3) 转换为 typedef void (*fun)(arg1, arg2, arg3)？

> ID：14803922
> 
> 赞同：9
> 
> 时间：2013-02-10T23:33:36.987
> 
> 标签：c++, boost, boost-bind, c++03

在 lib Bullet 中定义了一个类型：

```
typedef void (*btNearCallback)(btBroadphasePair& collisionPair, btCollisionDispatcher& dispatcher, const btDispatcherInfo& dispatchInfo); 
```

在那里的文档中提供了一个[使用示例（第 23 页）](http://www.bulletphysics.com/ftp/pub/test/physics/Bullet_User_Manual.pdf)：

```
void MyNearCallback(btBroadphasePair& collisionPair, btCollisionDispatcher& dispatcher, const btDispatcherInfo& dispatchInfo) {
        // Do your collision logic here
        // Only dispatch the Bullet collision information if you want the physics to continue
        dispatcher.defaultNearCallback(collisionPair, dispatcher, dispatchInfo);
} 
```

我将此示例代码复制到我的班级防御中，因此我的班级获得了此功能，并且我将能够执行以下转换：

```
 dispatcher->setNearCallback(boost::bind(&BulletAPIWrapper::MyNearCallback, this, _1, _2, _3)); 
```

`dispatcher->setNearCallback(MyNearCallback);`而不是Bullet 教程中的 C。

然而我的 VS2010 sp1 给了我一个错误：

```
Error   44  error C2664: 'btCollisionDispatcher::setNearCallback' : cannot convert parameter 1 from 'boost::_bi::bind_t<R,F,L>' to 'btNearCallback' 
```

所以我想知道如何将 boost::bind 转换为这样的 typedef？

是否有可能具有静态类函数（或至少像全局函数）：

```
void MyNearCallback(btBroadphasePair& collisionPair, btCollisionDispatcher& dispatcher, const btDispatcherInfo& dispatchInfo, BulletAPI* api) {
} 
```

称呼`dispatcher->setNearCallback( boost::bind(MyNearCallback, _1, _2, _3, this));`

因为它对我来说几乎是相同的错误：

```
Error   44  error C2664: 'btCollisionDispatcher::setNearCallback' : cannot convert parameter 1 from 'boost::_bi::bind_t<R,F,L>' to 'btNearCallback' 
```

我也尝试[过这里描述的](https://stackoverflow.com/a/13238113/1973207)：

```
template<unsigned ID,typename Functor>
boost::optional<Functor> &get_local()
{
    static boost::optional<Functor> local;
    return local;
}

template<unsigned ID,typename Functor>
typename Functor::result_type wrapper(btBroadphasePair& collisionPair, btCollisionDispatcher& dispatcher, const btDispatcherInfo& dispatchInfo)
{
    return get_local<ID,Functor>().get()(collisionPair, dispatcher, dispatchInfo);
}

template<typename ReturnType>
struct Func
{
    typedef ReturnType (*type)(btBroadphasePair& collisionPair, btCollisionDispatcher& dispatcher, const btDispatcherInfo& dispatchInfo);
};

template<unsigned ID,typename Functor>
typename Func<typename Functor::result_type>::type get_wrapper(Functor f)
{
    (get_local<ID,Functor>()) = f;
    return wrapper<ID,Functor>;
}

struct NearCallbackWrapper
{
    class BulletAPI;
    void MyNearCallback(btBroadphasePair& collisionPair, btCollisionDispatcher& dispatcher, const btDispatcherInfo& dispatchInfo) {
        std::cout << "called" << std::endl;
    }
};

//....
dispatcher->setNearCallback( get_wrapper<0>(  boost::bind(&NearCallbackWrapper::MyNearCallback,this) ) ); 
```

但是我从中得到了这样的错误：

```
error C2664: 'btCollisionDispatcher::setNearCallback' : cannot convert parameter 1 from 'void (__cdecl *)(btBroadphasePair &,btCollisionDispatcher &,const btDispatcherInfo &)' to 'btNearCallback' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T23:46:26.093

为什么你认为你“应该能够像..一样投射”？setNearCallback 当然期望传递一个普通的函数指针，而 BIND 产生一些完全不同的东西..

Bind 产生一个“可调用的东西”而不“需要'this'指针”这一事实并不意味着它产生了一个普通的函数！

要正确处理绑定成员函数，您仍然需要至少两个指针的空间，而普通函数指针是 ONE 指针。所有允许您注册回调的**理智***) API 还允许您与回调一起传递一些“用户数据”——在这种情况下，您可以使用它来创建小型包装器，将调用重定向到绑定的成员函数。这已经在很多地方讨论过了。请参见例如：[https ://stackoverflow.com/a/3453616/717732](https://stackoverflow.com/a/3453616/717732)

如果你不能在回调中传递任何额外的数据，我的意思是，如果回调注册允许你只提供回调指针，那么它几乎是死路一条。除非你用 ie 做一些或多或少丑陋或有风险的变通办法，否则你无法逃避。全局静态数据或动态代码生成..

*) 这纯粹是个人观点。我所说的“理智”是指“对象友好”。低级 API 通常并不是严格意义上的，而是它们试图尽可能地节省资源——因此它迫使你自己做这些肮脏的工作，因为它们真的想节省那些 4/8 字节。有时，有时，这实际上会产生巨大的影响——它们可能更容易传递 4/8b 回调，它很容易复制，因为它适合单个寄存器（而指针+用户数据需要 2 个以上的寄存器），对它的操作“更原子" 等等。然而，大多数情况下，这样做是为了**痛苦地强调**只有一个**回调可能被注册**. 在这种情况下，它实际上使您几乎没有什么不同，无论它是绑定某个对象的成员函数，还是只是一个全局静态函数：总而言之，只能有一个，所以呃，无论如何，让它工作。如果是这种情况，那么只需对对象指针和小型包装器使用全局静态变量。好吧，除了美学..：

```
static MyObject* target;
void wrapper(..params..)
{
    target->method_to_be_called(..params..);
}

// then, register it:

target = &object_to_be_called;  // \ there can be only one object
setCallback(&wrapper);          // / and only one callback registered 
```

# r - 如何在 R 的点图中并排绘制多个变量？

> ID：14803923
> 
> 赞同：11
> 
> 时间：2013-02-10T23:33:41.807
> 
> 标签：r, plot, ggplot2

我对 R 还是很陌生，遇到了一个我找不到答案的绘图问题。

我有一个看起来像这样的数据框（虽然更大）：

```
df <- data.frame(Treatment= rep(c("A", "B", "C"), each = 6),
                 LocA=sample(1:100, 18), 
                 LocB=sample(1:100, 18), 
                 LocC=sample(1:100, 18)) 
```

我想要看起来像在 Excel 中生成的[点图。](http://www.flickr.com/photos/65916813@N02/)这正是我想要的格式：每个位置的每个治疗并排的点图，多个位置的数据一起显示在一个图表上。（非常抱歉无法在此处发布图片；发布图片需要 10 声望。）

![在此处输入图像描述](../Images/b9b4ce00b6103077f1b90ddaab99fdd9.png)

为每个位置绘制一个图是没有问题的，用颜色编码的点，等等：

```
ggplot(data = df, aes(x=Treatment, y=LocA, color = Treatment)) + geom_point() 
```

但我不知道如何将位置 B 和 C 添加到同一个图表中。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T23:58:54.157

正如一些人所提到的，您需要“融化”数据，将其变成“长”形式。

```
library(reshape2)
df_melted <- melt(df, id.vars=c("Treatment"))
colnames(df_melted)[2] <- "Location" 
```

在 ggplot 行话中，通过“躲避”来实现不同的组，例如并排治疗。通常对于像条形图这样的东西，你可以说`position="dodge"`，但`geom_point`似乎需要更多的手动规范：

```
ggplot(data=df_melted, aes(x=Location, y=value, color=Treatment)) +
  geom_point(position=position_dodge(width=0.3)) 
```

![在此处输入图像描述](../Images/112aed9fdf02e81301a7af1eb69c9cbc.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T23:53:17.143

您需要重塑数据。这是一个使用示例`reshape2`

```
library(reshape2)
dat.m <- melt(dat, id.vars='Treatment')
library(ggplot2)
ggplot(data = dat.m, 
        aes(x=Treatment, y=value,shape = Treatment,color=Treatment)) + 
                  geom_point()+facet_grid(~variable) 
```

![在此处输入图像描述](../Images/d93c341c34bcededa721e338b885742f.png)

既然你想要一个`dotplot`，我也建议一个格子解决方案。我认为在这种情况下更合适。

```
dotplot(value~Treatment|variable,
        groups = Treatment, data=dat.m,
        pch=c(25,19),
        par.strip.text=list(cex=3),
        cex=2) 
```

![在此处输入图像描述](../Images/a6d04936994137bc5fff79315c5efb0a.png)

# android - Android布局：进行更改时屏幕滚动到表单顶部

> ID：14803929
> 
> 赞同：1
> 
> 时间：2013-02-10T23:34:32.820
> 
> 标签：android, scrollview, tablelayout

我目前正在开发一个使用创建日历合同事件的 android 应用程序......本质上是一个轻量级日历应用程序。我创建的表单使用滚动视图内的表格布局。我注意到，当我从表单的下拉列表中选择一个值时，页面会滚动回表单的顶部。我不希望这种情况发生。我希望用户留在他们在页面上的位置，而不是页面滚动回到表单的顶部。我搜索了论坛，但找不到任何理由。我不确定是否需要在布局标签中添加一些内容或不需要。有没有人遇到过这种情况。下面是我用来创建表单的 xml。如果您需要澄清我在说什么，请告诉我。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" android:background="#76766e">

    <TableLayout android:stretchColumns="*" android:background="#b8b9c8" android:layout_width="wrap_content" android:layout_height="wrap_content">
        <TableRow android:background="#FFFFFA" android:layout_marginTop="2dp"><TextView android:text="@string/event"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginBottom="1dp"><EditText android:id="@+id/eventTitle" android:hint="@string/enterEventTitle" android:layout_span="2"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginTop="1dp"><TextView android:text="@string/from"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginBottom="1dp"><Button android:id="@+id/fromDateBtn"/><Button android:id="@+id/fromTimeBtn"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginTop="1dp"><TextView android:text="@string/to"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginBottom="1dp"><Button android:id="@+id/toDateBtn"/><Button android:id="@+id/toTimeBtn"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginTop="1dp"><TextView android:text="@string/timezone"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginBottom="1dp"><Spinner android:id="@+id/timeZones" android:layout_span="2"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginTop="1dp" android:layout_marginBottom="1dp"><TextView android:text="@string/allDay"/><CheckBox android:id="@+id/allDay"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginTop="1dp"><TextView android:text="@string/calendar"/></TableRow>
        <TableRow android:background="#FFFFFA"><Spinner android:id="@+id/calendars" android:layout_span="2"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginBottom="1dp"><TextView android:textColor="#d81417" android:id="@+id/chosenCalendar"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginTop="1dp"><TextView android:text="@string/repeat"/></TableRow>
        <TableRow android:background="#FFFFFA"><Spinner android:layout_span="2" android:id="@+id/repeatChoices"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginBottom="1dp"><TextView android:id="@+id/chosenRepeat" android:textColor="#d81417"/></TableRow>

        <TableLayout android:background="#FFFFFA" android:id="@+id/reminderTable" android:layout_width="match_parent" android:layout_height="wrap_content">
            <TableRow android:id="@+id/reminderRow"><ImageButton android:id="@+id/addReminderBtn" android:src="@drawable/delete_icon"/></TableRow>  
            <!-- rows get added here for adding reminders -->
        </TableLayout>
        <TableRow android:background="#FFFFFA" android:layout_marginBottom="1dp" ><TextView android:id="@+id/chosenReminder" android:layout_span="2"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginTop="1dp"><TextView android:text="@string/descriptionTxt"/></TableRow>
        <TableRow android:background="#FFFFFA" android:layout_marginBottom="2dp"><EditText android:layout_span="2" android:id="@+id/calendarDescription" android:hint="@string/enterDescription"  android:inputType="textMultiLine" android:lines="8" android:minLines="6" android:maxLines="10" android:layout_height="wrap_content" android:layout_width ="0dip"/></TableRow> 
        <TableRow android:background="#FFFFFA" android:layout_marginTop="2dp"><Button android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/saveBtn" android:text="@android:string/ok"/><Button android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/cancelBtn" android:text="@android:string/cancel"/></TableRow>
    </TableLayout>

</ScrollView> 
```

# asp.net - 使用包含多个表的实体集配置 entitydatasource

> ID：14803931
> 
> 赞同：1
> 
> 时间：2013-02-10T23:34:49.083
> 
> 标签：asp.net, data-binding, entity-framework-5

我有一个包含两个实体的实体数据模型。一个名为 Posts 的实体包含博客文章，另一个名为 Comment 的实体包含评论。我将关联设置为一对多关系，并且主键在帖子和评论中都是 postid。

但是，当我尝试将其绑定到 entitydatasource 控件时，它只允许我选择 Posts 或 Comment 实体集，而不是两者。我想要做的是能够将帖子及其评论绑定到数据源，但我似乎无法找到一种方法来做到这一点。

任何帮助，将不胜感激！

# javascript - 按值排序对象

> ID：14803932
> 
> 赞同：0
> 
> 时间：2013-02-10T23:35:10.543
> 
> 标签：javascript, sorting

我可以想象这个问题已经被问过几次了，但我真的找不到解决我想要解决的特定问题的例子。

所以我有一个对象，像这样：

```
var collection = [{ id: 0 }, { id: 1 }, { id: 2 }]; 
```

然后我有一个数组，即“订单”，如下所示：

```
var order = [2, 0, 1]; 
```

我想使用 'order' 数组以特定顺序重新排序集合。我一直在尝试使用 .sort 函数的多种解决方案，但找不到适合的解决方案。任何人都可以启发我吗？可能很简单，我希望。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:40:57.513

您可以使用该`sort()`方法来完成此操作`indexOf`：

```
collection.sort(function(a, b){
    return order.indexOf(a.id) > order.indexOf(b.id);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T23:43:52.467

您可以`indexOf`在自定义排序函数中对订单数组使用函数，如下所示：

```
collection.sort(function(x, y) {
                     return order.indexOf(x.id) > order.indexOf(y.id);
                }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T23:37:59.900

似乎就这么简单：

```
var collection = [{ id: 0 }, { id: 1 }, { id: 2 }];
var order = [2, 0, 1];
var sorted = [];
for(var i=0,c=order.length;i<c;i++){
    sorted.push(collection[order[i]]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T23:40:07.767

试试看：

```
var collection = [{ id: 0 }, { id: 1 }, { id: 2 }];
var order = [2, 0, 1];
var sortedCollection = [];
for ( var i = 0; i < order.length; i++ ) 
  sortedCollection.push(collection[order[i]]);
console.log(sortedCollection); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T23:45:05.843

您在这里要避免的事情是扫描这些阵列中的任何一个，而不是您必须这样做。

这是避免这种情况的一种解决方案：

```
/*
 * Map the indexes of the objects in collection to their final location
 */
var sortIndex = {};
order.forEach(function(value, index) {
  sortIndex[value] = index;
});

/*
 * Put the objects in collection into their new, sorted collection
 */
var sortedCollection = [];
collection.forEach(function(value) {
  var sortedLocation = sortIndex[value.id];
   sortedCollection[sortedLocation] = value;

}); 
```

因此，我们对每个阵列进行一次扫描，将工作量降至最低。

我在`forEach`这里使用是为了方便；您可以使用 Lodash 或 Underscore 之类的库，或者重写它以对数组使用显式迭代。

# ruby-on-rails - Rails 路线.rb

> ID：14803935
> 
> 赞同：1
> 
> 时间：2013-02-10T23:35:19.477
> 
> 标签：ruby-on-rails, routes

`routes.rb`如果文件仅指定：rails 如何知道如何映射到控制器中的每个函数：

```
resources :users 
```

但在`UsersController`你里面

```
class UsersController < ApplicationController
  # GET /users
  # GET /users.json
  def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @users }
    end
  end

  # GET /users/1
  # GET /users/1.json
  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @user }
    end
  end

  # GET /users/new
  # GET /users/new.json
  def new
    @user = User.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @user }
    end
  end

  # GET /users/1/edit
  def edit
    @user = User.find(params[:id])
  end

  # POST /users
  # POST /users.json
  def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, :notice => 'User was successfully created.' }
        format.json { render :json => @user, :status => :created, :location => @user }
      else
        format.html { render :action => "new" }
        format.json { render :json => @user.errors, :status => :unprocessable_entity }
      end
    end
  end

  # PUT /users/1
  # PUT /users/1.json
  def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, :notice => 'User was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @user.errors, :status => :unprocessable_entity }
      end
    end
  end

  # DELETE /users/1
  # DELETE /users/1.json
  def destroy
    @user = User.find(params[:id])
    @user.destroy

    respond_to do |format|
      format.html { redirect_to users_url }
      format.json { head :no_content }
    end
  end
end 
```

rails 如何确定例如`index function maps`to`GET/users`而`create function`map to `POST/users`？

怎么`resources :users`知道映射到的`UsersController`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:42:25.807

Rails 基于“约定优于配置”范式。

因此，“resources :users”行表明所有标准 CRUD 方法都由相应的 UsersController < 支持 - 'Users' 前缀与控制器、模型等匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T10:40:32.513

请查看 rails 路线指南： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

并在实践中查看路由声明在您的项目目录中发出此命令：

> 耙路线

同样如前所述，坚持约定并记住 Rails 是一个非常固执己见的软件。

# ruby-on-rails - 在 RABL 模板中，如何舍入某些数字而不舍入其他数字？

> ID：14803937
> 
> 赞同：1
> 
> 时间：2013-02-10T23:35:26.237
> 
> 标签：ruby-on-rails, ruby, rabl

在我的应用程序的 JSON 输出中，我需要将大多数非整数（即浮点数）数值四舍五入到一个小数位，即 1.7777 将显示为 1.8。

我通过猴子修补 Float 的 as_json 方法做到了这一点：

```
class Float
  def as_json(options={})
    self.round 1
  end
end 
```

我什至不确定这是否是一个好主意，我刚刚做到了，因为我无法确定在我的 RABL 模板中为数值指定格式。

但现在我还需要显示某些值（纬度和经度），而不需要任何舍入：

```
object @foo
attributes :bar, :latitude, :longitude 
```

如何告诉 RABL 舍入某些值（条形）而不是其他值（纬度、经度）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:04:01.500

To answer your question in your original context, in a RABL template, you'd simply create custom nodes for those attributes that you need additional processing on, e.g.

```
object @foo
attributes :bar
node(:latitude) { |foo| f.latitude.round(1) }
node(:longitude) { |foo| f.longitude.round(1) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:35:51.153

听起来您想要做的是创建一个视图模型来为您处理此逻辑。查看[draper 宝石](https://github.com/drapergem/draper)。

将对象包装在视图模型中允许您定义特定于“显示”对象（在本例中为 JSON 表示）功能的方法。您将在视图模型上定义 bar 方法，该方法相应地对值进行四舍五入。由于 draper 使用装饰器模式，因此您可以免费获得经度和纬度方法，因为它们是底层对象的一部分。然后，您会将您的视图模型传递给 rabl 模板。

# android - 捕捉安卓应用程序的所有点击

> ID：14803943
> 
> 赞同：0
> 
> 时间：2013-02-10T23:36:10.820
> 
> 标签：android, click

我需要从 App 的所有活动中捕获所有点击（**仅限按钮**）并仅放置 Log.v("","") 方法。目标：用于对设备和用户行为进行小组测试的工具。我有它们的不同变体：

1)

```
extends activity implements OnClickListener {
....
@Override
    public void onClick(View arg0) {
.... 
```

2)

```
button1.setOnClickListener() {

.... 
```

3) xml 内部

```
android:onClick="method" 
```

至少需要找到 1) 和 2) 的解决方案。

我需要使用哪些解决方案：

1）使用 OnClickListener 创建某种全局活动类并扩展我的所有活动。

2) 或者使用一些广播消息创建处理程序。

3) 任何建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:34:35.650

我认为这样做的唯一方法是创建您自己的 Button 类的子类，该子类将在调用按钮的 OnClickListener 实例之前执行您所需的日志记录。

然后，您将不得不使用此子类实现，而不是 xml 布局中的标准 Button 实例和/或以编程方式创建的 Button 实例。

# excel - Excel：在单元格中搜索多个术语

> ID：14803944
> 
> 赞同：22
> 
> 时间：2013-02-10T23:36:46.580
> 
> 标签：excel, excel-2007, excel-formula, excel-2010, excel-2013

我使用这个方便的公式在 Excel 中的单元格内搜索一个术语。

```
=IF(ISNUMBER(SEARCH("*Gingrich*",C1)),"1","") 
```

此等式搜索 C1 中是否存在 Gingrich，如果存在，则显示 1。

我想做的就是一次搜索多个词。任何人都知道如何在其中添加 OR 函数，以便我可以搜索 Gingrich OR Obama OR Romney 等...？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-11T00:45:51.750

其他方式

```
=IF(SUMPRODUCT(--(NOT(ISERR(SEARCH({"Gingrich","Obama","Romney"},C1)))))>0,"1","") 
```

此外，如果您在 A1 到 A3 中保留一个值列表，那么您可以使用

```
=IF(SUMPRODUCT(--(NOT(ISERR(SEARCH($A$1:$A$3,C1)))))>0,"1","") 
```

Search() 函数中根本不需要通配符，因为 Search() 返回找到的字符串的位置。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-11T09:03:02.503

尝试使用这样的 COUNT 函数

`=IF(COUNT(SEARCH({"Romney","Obama","Gingrich"},C1)),1,"")`

请注意，您不需要通配符（如 teylyn 所说），除非有特定原因，“1”不需要引号（实际上这使它成为文本值）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-11T00:41:27.403

这将为您完成：

```
=IF(OR(ISNUMBER(SEARCH("Gingrich",C3)),ISNUMBER(SEARCH("Obama",C3))),"1","") 
```

给定名称右侧列中的此函数（位于 C 列中），结果为：

```
Romney  
Gingrich    1
Obama       1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-20T08:04:51.963

除了@teylyn的答案，我想补充一点，您可以将多个搜索词的字符串放在一个单元格中（而不是为每个词使用不同的单元格，然后使用该范围作为参数`SEARCH`），使用命名范围和`EVALUATE`我从[这个链接](https://www.myonlinetraininghub.com/excel-factor-12-secret-evaluate-function)中找到的函数。

例如，我将以下术语作为文本放入单元格中`$G$1`：

```
"PRB", "utilization", "alignment", "spectrum" 
```

然后，我为该单元格定义了一个命名范围`search_terms`，如上面链接中所述，如下图所示：

[![命名范围定义](../Images/2bb42cabd06b78b23fefcbe73e685334.png)](https://i.stack.imgur.com/xf8be.png)

在该`Refers to:`字段中，我输入了以下内容：

```
=EVALUATE("{" & TDoc_List!$G$1 & "}") 
```

上面的`EVALUATE`表达式很简单，用于模拟文字字符串

```
{"PRB", "utilization", "alignment", "spectrum"} 
```

用作`SEARCH`函数的输入：在内部使用对 SINGLE 单元格的直接引用`$G$1`（在这种情况下用大括号增加）`SEARCH`不起作用，因此使用命名范围和`EVALUATE`.

现在的诀窍在于用 -augmented 命名 range 替换对的`$G$1`直接`EVALUATE`引用`search_terms`。

[![公式](../Images/604dfe9ef54cd60a829f4b33da0b8d3d.png)](https://i.stack.imgur.com/wd6uy.png)

它确实有效，并再次展示了 Excel 的强大功能！

[![真的行！](../Images/c70c5d58d88a6e1290c193d5d93c36eb.png)](https://i.stack.imgur.com/dIVDE.png)

希望这可以帮助。

# java - 如何将列表类型转换为 double 数组或 int 数组？

> ID：14803945
> 
> 赞同：0
> 
> 时间：2013-02-10T23:37:15.543
> 
> 标签：java, arrays, list

所以我想整理一副牌。构造函数 DeckOfCards 设置并洗牌一副牌。但是卡片存储在 List 类型的列表中，其中 Card 类型属于 Card 类。在调用 DeckOfCards 之后，我应该询问用户应该使用哪种排序算法来对卡片组进行排序。例如，我刚刚在末尾包含了插入排序。但是插入排序函数接受一个双精度数组。所以我需要将 List 列表转换为双数组。我该怎么做？

代码：

```
import java.util.List;
import java.util.Arrays;
import java.util.Collections;
import java.util.Scanner;

// class to represent a Card in a deck of cards
class Card 
{    
public static enum Face { Ace, Deuce, Three, Four, Five, Six,
  Seven, Eight, Nine, Ten, Jack, Queen, King  };
public static enum Suit { Clubs, Diamonds, Hearts, Spades };

private final Face face; // face of card
private final Suit suit; // suit of card

// two-argument constructor
public Card( Face cardFace, Suit cardSuit ) 
{   
   face = cardFace; // initialize face of card
   suit = cardSuit; // initialize suit of card
} // end two-argument Card constructor

// return face of the card
public Face getFace() 
{ 
  return face; 
} // end method getFace

// return suit of Card
public Suit getSuit() 
{ 
  return suit; 
} // end method getSuit

// return String representation of Card
public String toString()
{
   return String.format( "%s of %s", face, suit );
} // end method toString
} // end class Card

// class DeckOfCards declaration
public class DeckOfCards 
{
private List<Card> list; // declare List that will store Cards

// set up deck of Cards and shuffle
public DeckOfCards()
{
  Card[] deck = new Card[ 52 ];
  int count = 0; // number of cards

  // populate deck with Card objects
  for ( Card.Suit suit : Card.Suit.values() )  
  {
     for ( Card.Face face : Card.Face.values() )   
     {
        deck[ count ] = new Card( face, suit );
        count++;
     } // end for
  } // end for

  list = Arrays.asList( deck ); // get List
  Collections.shuffle( list );  // shuffle deck
} // end DeckOfCards constructor

// output deck
public void printCards()
{
  // display 52 cards in two columns
  for ( int i = 0; i < list.size(); i++ )
     System.out.printf( "%-20s%s", list.get( i ),
        ( ( i + 1 ) % 2 == 0 ) ? "\n" : "" );
} // end method printCards

public static void main( String args[] )
{
  DeckOfCards cards = new DeckOfCards();
  cards.printCards();
  //add code here to take input from user and sort
  int a;
  System.out.println("\nSort the deck of cards");
  System.out.println("\nEnter your choice: \n1.Selection Sort \n2.Insertion Sort 
\n3.Merge       Sort\n");
  //take input
  Scanner reader = new Scanner(System.in);
  a=reader.nextInt();
  switch(a)
  {
    case 1:
        //call Selection sort
        break;
    case 2:
        //call Insertion sort
        break;
    case 3:
        //call Merge sort
        break;
  }
 } // end main  

//Insertion sort

} // end class DeckOfCards
public class InsertionSort {
/** The method for sorting the numbers */
public static void insertionSort(double[] list) {
for (int i = 1; i < list.length; i++) {
  /** insert list[i] into a sorted sublist list[0..i-1] so that
       list[0..i] is sorted. */
  double currentElement = list[i];
  int k;
  for (k = i - 1; k >= 0 && list[k] > currentElement; k--) {
    list[k + 1] = list[k];
  }

  // Insert the current element into list[k+1]
  list[k + 1] = currentElement;
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:01:54.337

If you wanted to convert a list of `Card` objects, i.e. `List<Card> list` you could easily change it to a `Card` array (i.e. `Card[]`) using a method provided by `List` itself called [`toArray`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5B%5D%29)

However, you have some confusion in what you're asking. You are expecting that a method that expects an array of `double` suddenly magically knows how to treat objects of type `Card`. How can a `Card` suddenly behave like a double precision number?

You should change the method `insertionSort()` first (which you probably copied from somewhere without trying to understand what its doing) to take a `Card[]` array first, and then modify what its doing internally so that the comparison happens on the properties of the `Card` object rather than the `double` primitive.

On the other hand, you might be interested to know that Java already provides sorting functions through the `Arrays` class. You can have a look at the function [`Arrays.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29). However you still need to implement the [`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html) interface so that Java knows how to sort the array, it doesn't know how your `Card` objects should be sorted (by face? by suit? in which order? Java doesn't know how to play cards), so you need to make your `Card` objects implement `Comparable` and have a [`compareTo()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29) method which helps Java decide which `Card` instance comes before which. You can use the same approach if you still want to implement the sorting yourself and change the method `insertionSort()` to take an array of `Comparable` items and inside it you call `compareTo()` to know which item comes before what.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:05:26.277

如果我理解正确，您想使用不同的算法对卡片进行排序。并且您的算法实现只接受`double`数组。

你需要思考的两个问题：

*   纸牌比较规则，例如 Heart Ace > Diamonds Ace？

*   如果所有排序都是**比较排序**算法？

如果第二个问题的答案是： **YES**

我建议您停止考虑将 Card Array 类型转换为 double 数组。相反，让你的所有算法实现更通用，例如，接受`Comparable[] arr`数组，甚至`Card[] arr`. 然后让你的`Card`类实现 Comparable 接口。在方法中实现您的卡片比较规则`compareTo(Card c)`。

# javascript - Javascript“参数”关键字

> ID：14803947
> 
> 赞同：8
> 
> 时间：2013-02-10T23:37:37.280
> 
> 标签：javascript

我的理解是我可以调用`Array.prototype.slice.call(arguments, 1)`来返回数组的尾部。

为什么这段代码不返回`[2,3,4,5]`？

```
function foo() {  
    return Array.prototype.slice.call(arguments,1);
}

alert(foo([1,2,3,4,5])); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-10T23:38:44.740

因为你只传递**了一个**参数——数组。

尝试`alert(foo(1,2,3,4,5));`

在 JavaScript 中，参数从 0 开始编号，所以当你从 1 开始切片并传递 1 个参数时，你什么也得不到。

请注意，它可能会妨碍优化以允许`arguments`对象“泄漏”出函数。由于形式参数和形式参数之间的别名，`arguments`如果对象被发送到其他地方，优化器实际上无法对函数进行任何静态分析`arguments`，因为它不知道参数变量可能会发生什么。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-10T23:41:16.823

`arguments`是一个类似数组的对象，它列出了参数和一些其他属性（例如对当前函数的引用`arguments.callee`）。

在这种情况下，您的`arguments`对象如下所示：

```
arguments {
    0: [1,2,3,4,5],
    length: 1,
    other properties here
} 
```

我认为这很好地解释了您所看到的行为。尝试删除函数调用中的数组括号，或使用`arguments[0]`来访问数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T23:40:09.727

因为`arguments`is `{0: [1,2,3,4,5], length: 1}`，它是一个具有一个元素的类数组对象。具有一个元素的数组的尾部是空数组。

要么改变函数的定义：

```
function foo(arr) {  
    return Array.prototype.slice.call(arr,1);
} 
```

或调用函数：

```
foo(1,2,3,4,5); 
```

# php - 通过 PHP 邮件功能发送电子邮件不适用于长电子邮件

> ID：14803949
> 
> 赞同：3
> 
> 时间：2013-02-10T23:37:45.423
> 
> 标签：php

我正在尝试使用 php 邮件功能从我的网站发送电子邮件。网站上的用户以 html 形式键入他们的电子邮件。我已经测试了邮件功能，当电子邮件文本很小时它可以工作，例如：

```
this is an email 
```

但是，当我输入长电子邮件时，`mail()`函数返回`1`但实际上没有收到电子邮件。发送电子邮件的代码很简单：

```
$email_message = $_POST['email_mssg_from_form'];
$ret = mail($to, $subject, $email_message); 
```

我试图规范`$email_message`使用的内容：

```
$email_message = wordwrap($email_message, 70, "\r\n");      
$email_message = addslashes($email_message); 
```

但这没有帮助。我不确定如何处理引号和长行。通常，当用户在表单上键入电子邮件时，会有连续的文本行，只有段落将被分隔`\r\n`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T02:28:04.473

我遇到过类似的问题，消息的长度导致不一致。这就是我的诀窍：

使用此行使用 base64 对整个消息进行编码：

```
$email_message = chunk_split(base64_encode($email_message)); 
```

然后，在邮件中添加一个标头，将其附加到您的标头中：

```
$headers = "Content-Transfer-Encoding: base64\r\n\r\n"; 
```

这将告诉邮件客户端您的邮件是 base64 编码的。

您必须修改对 mail() 函数的调用，如下所示：

```
mail($to, $subject, $email_message, $headers); 
```

# javascript - 使用javascript的drupal模块自定义块内容

> ID：14803955
> 
> 赞同：0
> 
> 时间：2013-02-10T23:38:53.320
> 
> 标签：javascript, drupal-6

我正在使用以下 hook_block 开发一个自定义模块：

```
<?php
 function mytwitter_block($op = 'list', $delta = 0, $edit = array()) {
 switch ($op) {
 case 'list':
 $blocks['hashtag_search'] = array(
    'info' => t('Hashtag Search'),
    'cache'=> BLOCK_CACHE_GLOBAL
);
$blocks['eclap_timeline'] = array(
    'info' => t('Timeline @UserTwitter')
);
return $blocks;

case 'configure':

case 'save':

return _mytwitter_block_settings_save($delta, $edit);

case 'view':
default:
 switch ($delta) {
   case 'hashtag_search':             
     $block['subject'] = t('#Hashtag search');
     $block['content'] = ***##i want put here the java script##***
     break;
   case '_timeline':
     $block['subject'] = t('My Twitter user timeline');
     $block['content'] = t('andremo ad installare qui la timeline');
 }
 return $block;
 }
}
?> 
```

我想使用以下代码javascript：

```
var HASHTAG = 'TEATRO'; // don't include the #
var UPDATE_INTERVAL = 1000; // how often to update the hash tag in milliseconds
var MAX_TWEETS = 5; // max number of tweets at a time. make this larger if the topic is popular
var ANIM_SPEED = 500; // speed of animation
var tweets = new Array();
var count = 0;
var tweets_per_call = 0;
var firstID = -1;

(function() {
// call the twitter api on a set interval
setInterval(function() {
    $.getJSON("http://search.twitter.com/search.json?q=%23" + HASHTAG + "&result_type=recent&rpp=5&callback=?", {}, function(data) {
        tweets_per_call = data.results.length;
        firstID = -1;
        // for each response, create a visual tweet
        $.each(data.results, handleTweets);
    });
}, UPDATE_INTERVAL);
})();

// handle the data from twitter

function handleTweets(key, data) {
tweetFound = false;

// see if tweet already exists, if so don't handle it and exit
for (var i = 0; i < tweets.length; i++) {
    if (tweets[i].tweet == data.text) {
        tweets_per_call--;
        return;
    }
}

// increase tweet counter
count++;

// if its the first tweet in a request, set it to the current counter
if (firstID == -1) {
    firstID = count;
}

// add tweet to array
tweets.push({
    id: count,
    tweet: data.text
});

// add tweet to page
addTweet(count, data);

// remove the oldest tweet if there are more than 
if (tweets.length > MAX_TWEETS) {
    $('#' + tweets[0].id).hide(ANIM_SPEED, removeTweet(tweets[0].id));
    tweets.shift();
}
 }  

 // add tweet to html

 function addTweet(id, data) {
var delayTime = ANIM_SPEED;

// set delay time for each tweet
delayTime = (id - firstID) * ANIM_SPEED;

// use jquery to add html to the page
$('#tweets').prepend("<article id='" + id + "'><table><tr><td><span class='user'>@" + data.from_user + "</span> " + data.text + "</td></tr></table></article>");

// hide the tweet so it can be animated in
$('#' + id).hide(0);

// delay the display of the tweet until the ones in front of it have finished
setTimeout(function() {
    $('#' + id).slideDown(ANIM_SPEED);
}, delayTime);

 }

 // remove a tweet

 function removeTweet(id) {
$('#' + id).remove();
 } 
```

使用这种样式的 css：

```
 html, body, #tweets
{
overflow: hidden;
font-family: Verdana, Arial, sans-serif;
font-size: 12px;
 }

#tweets
{
position: absolute;
width: 900px;
left: 50%;
margin-left: -450px;
top: 20px;
color: #FFF;
 } 

 /* each tweet box */
 article
 {
width: 300px;
height: 60px;
background-color: #222;
border-radius: 0px;
margin-bottom: 40px;    
 }

  table
{
height: 100%;
width: 100%;
 }

  td
 {
vertical-align: middle;
padding: 0px 20px 0px 20px;
  }

  /* twitter user name */
 .user
 {
font-weight: bold;
font-size: 15px;
color: #7e9137;
  } 
```

在这种情况下如何使用函数 drupal_add_js？...我必须在 javascript 中更改一些内容..帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:24:33.113

我会使用一些主题函数/模板，并在主题函数中添加自定义 CSS/JS 使用`drupal_add_css`and `drupal_add_js`。沿着这些代码行的东西。当然在必要时调整它（比如路径和东西）。我假设你会把你的 CSS 和 JS`mytwitter.css`和`mytwitter.js`文件放在与文件相同的文件夹中`mytwitter.module`。但请随意选择您需要的任何文件夹结构。

```
function mytwitter_block($op = 'list', $delta = 0, $edit = array()) {
  case 'view':
  default:
    switch ($delta) {
      case 'hashtag_search':             
        $block['subject'] = t('#Hashtag search');
        // This is where we call our theme function to output some content
        // and add the CSS/JS files.
        $block['content'] = theme('mytwitter_output');
        break;
      case '_timeline':
        $block['subject'] = t('My Twitter user timeline');
        $block['content'] = t('andremo ad installare qui la timeline');
      }
  return $block;
}

/**
* Implementation of hook_theme()
*/
function mytwitter_theme() {
  // Register a theme function
  return array(
    'mytwitter_output' => array(
      'arguments' => array('some_vars' => NULL),
    ),
  );
}

/**
* Adds the module's CSS and JS files
* @file mytwitter.js is where the JS script stay.
* @file mytwitter.css is where the custom CSS is put
*/
function mytwitter_init() {
  // Adjust the path if necessary
  $module_path = drupal_get_path('module', 'mytwitter');

  // Add the JS  
  drupal_add_js($module_path . '/mytwitter.js');

  // Add the CSS
  drupal_add_css ($module_path . '/mytwitter.css');
}

/**
* The theme function where the JS files are added.
* If you need a larger, more complex HTML structure,
* use a template implementation instead.
*/
function theme_mytwitter_output($some_vars) {
  mytwitter_init();

  $output = '<p>Hello World</p>';
  return $output;
} 
```

# android - 动作酒吧夏洛克。栏/子菜单未出现在 v4.x 上

> ID：14803958
> 
> 赞同：0
> 
> 时间：2013-02-10T23:39:40.870
> 
> 标签：android, actionbarsherlock

我已将 Actionbarsherlock 添加到我的应用程序中，并向操作栏添加了一个子菜单。在模拟器（v2.2）上它工作得很好。当我将它安装在自己的手机（v4.1.2）上时，操作栏不显示。

这是主类中的代码

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    SubMenu subMenu1 = menu.addSubMenu("Action Item");
    subMenu1.add("Sample");
    subMenu1.add("Menu");
    subMenu1.add("Items");

    MenuItem subMenu1Item = subMenu1.getItem();
    subMenu1Item.setIcon(R.drawable.abs__ic_menu_moreoverflow_normal_holo_dark);
    subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    return true;
} 
```

我在清单中设置了以下内容

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

关于我在 v4.1.2 以后的工作中缺少什么的任何想法？

编辑我在 JAVA 端（动态）设置了一个主题，该主题设置在 SetContectView 之前。看来这正在删除操作栏

```
activity.setTheme(R.style.Theme_BlackRed); 
```

我删除了设置它的行，因此它不会被设置并且操作栏出现。所以现在的问题是如何设置使操作栏以这种设置主题的方式出现

例如在 theme.xml 中

```
<style name="Theme" parent="android:Theme">

    </style>

    <style name="Theme.BlackRed">
<!-- Number of item -->
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:07:00.953

确保您的主题扩展了 ActionBarSherlock 主题之一。查看他们的文档以获取一些示例：[http ://actionbarsherlock.com/theming.html](http://actionbarsherlock.com/theming.html)

# javascript - Javascript 从部分匹配中获取 .pdf 文件

> ID：14803960
> 
> 赞同：0
> 
> 时间：2013-02-10T23:39:55.343
> 
> 标签：javascript, jquery, html, regex

完整和完整的 javascript 新手在这里根据部分匹配从 Web 服务器获取 .pdf 文件时遇到问题。我制作了一个将数据输出到网络服务器的程序，其中一个组件是 .pdf 文件的文件夹。我希望能够单击一个链接，该链接将根据生成的数据表中的值提取相应的 .pdf 文件（我为此使用了 slickgrid）。每个 .pdf 文件都包含数据表中的值，并且可以很好地查询 .pdf 文件夹，并且我已经成功地使用以下代码获得了我想要的 .pdf：

```
var value = grid.getData().getItem(row)['data'];
var locpath = window.location.pathname.substring(0,window.location.pathname.lastIndexOf('/'));
var plotsFolder = window.location.protocol + "//" + window.location.host + locpath + "/CovPlots/";
var href = plotsFolder + value + ".pdf";
return "<a href='" + href + "'>" + value + "</a>"; 
```

这里的问题是，有时生成的 .pdf 文件是两个或多个（到目前为止我已经看到多达 4 个）“数据”字符串的串联，由于不值得得到的原因，用“_”作为分隔符分隔进入。所以，如果 .pdf 文件是“somestring.pdf”，我可以毫无问题地得到它。但是，如果 .pdf 文件是“somestring_anotherstring.pdf”，如果我将“somestring”或“anotherstring”作为“data”的值，我无法弄清楚如何获取该 .pdf 文件。

我已经尝试了很多不同的方法来获得某种查找，我可以使用这些查找来根据部分匹配提取正确的文件。最新的尝试是使用 javascript 中的 FilenameFilter 对象，但是在没有任何 javascript 知识的情况下，我很难让它工作。我试图创建一个新函数，我可以调用它来查找 .pdf URL：

```
function lookup() {
    File directory = new File(plotsFolder);
    String[] myFiles = directory.list(new FilenameFilter() {
        public boolean accept(File directory, String fileName) {
        return fileName.match(value);
        }
    });
} 
```

这似乎只会引发错误。谁能指出我正确的方向，以便能够根据部分匹配下载正确的 .pdf 文件？我还尝试查看是否有 jquery 方法可以做到这一点，但似乎找不到有效的方法。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:49:52.193

如果没有服务器的支持，JavaScript 无法从部分文件名中找到文件。但是，您可以做的是在服务器上有一个小脚本，为 JavaScript 进行部分文件名匹配，然后 JavaScript 可以要求服务器进行匹配，然后当它得到匹配时，它可以使用那个文件名。

如果您不介意一次加载所有 PDF 的整个索引，您可以使用这个 Python 小脚本生成一个漂亮的、JavaScript 友好的 JSON 格式的索引：

```
#!/usr/bin/env python
# Create an index of a bunch of PDF files.
# Usage: python make_index.py directory_with_pdf_files

import os
import sys
import json

def index(directory):
    index = {}

    for filename in os.listdir(directory):
        base, ext = os.path.splitext(filename)
        if ext.lower() != '.pdf':
            continue
        for keyword in base.split('_'):
            index[keyword] = filename

    with open(os.path.join(directory, 'index.json'), 'w') as f:
        f.write(json.dumps(index))

if __name__ == '__main__':
    index(sys.argv[1]) 
```

然后你可以`index.json`用 jQuery 或你有什么来加载。当您需要查找特定 PDF 的文件名时，您可以执行以下操作（假设从中加载的对象`index.json`在`indexOfPDFs`变量中）：

```
var href = plotsFolder + indexOfPDFs[value]; 
```

# python - While 循环，在语句中有两个 if i

> ID：14803966
> 
> 赞同：0
> 
> 时间：2013-02-10T23:40:33.293
> 
> 标签：python, if-statement, time, while-loop

好的，这里有两个问题。

首先，我试图显示开始时间。我正在使用 program_time 执行此操作。其次，我还想显示经过的时间。我也想以微秒为单位显示这一点。

```
import time
a= time.time()
print a
while True:
    program_time= time.time()
    elapsed=program_time - a
    for i in [program_time]:
        print "%s\r" % i, 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:44:12.143

您的代码看起来几乎正确。这应该显示开始时间，以及随着 while 循环继续进行的每个后续程序时间（尽管非常快）。也许您需要在循环中执行一些计算？

```
import time
a = time.time()

print "Starting time is %s" % str(a)

while True:
    # Clear the screen each iteration to "recycle" the lines
    print chr(27) + "[2J"

    program_time = time.time();
    elapsed      = int(round((program_time - a) * 1000)) * 100

    print "Start time is %s" % a 
    print "Elapsed time is %s" % elapsed

    # Simulate some work
    time.sleep(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:45:46.727

假设您的问题是“为什么我的程序输出当前时间而不是经过时间”，答案是“因为`program_time`正在打印而不是`elapsed`.”。

# php - 使用 cronjob 运行 php 脚本

> ID：14803973
> 
> 赞同：0
> 
> 时间：2013-02-10T23:41:18.370
> 
> 标签：php, linux, path, cron

所以这是我的 cronjob

```
PATH=/package/host/localhost/php-5.4.7-1/bin:/bin:/usr/bin
PHPRC=/home/stuff/etc
* * * * * php /home/stuff/private/xFEklnTekl/cmd.php 
```

这是 cmd.php 文件

```
<?php
$c = file("c.txt");
$f = fopen("c.txt", "w+");
$g = $c[0]+1;
fwrite($f, $g);
fclose($f);
?> 
```

遗憾的是，它没有按应有的方式更新 c.txt 文件。我认为 php 脚本中的给定路径有问题。我已经尝试过只是 /c.txt 但它也没有工作。那么，可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:59:31.363

您的 crontab 不应包含除 cronjobs 之外的任何内容。尝试使用这个：

```
* * * * * /bin/php /home/stuff/private/xFEklnTekl/cmd.php 
```

并确保您具有 +x 执行权限，并且 crontab 用户有权访问该目录。

另外，将完整路径放入

```
$c = file("c.txt");
$f = fopen("c.txt", "w+"); 
```

到

```
$c = file("/home/stuff/private/xFEklnTekl/c.txt");
$f = fopen("/home/stuff/private/xFEklnTekl/c.txt", "w+"); 
```

**编辑** 如评论中所见，`/bin/php`您必须使用来自`which php`. 在你的情况下，

```
* * * * * /package/host/localhost/php-5.4.4/bin/php  /home/stuff/private/xFEklnTekl/cmd.php 
```

# d3.js - 添加新数据时删除json数组中的元素？

> ID：14803976
> 
> 赞同：0
> 
> 时间：2013-02-10T23:41:44.810
> 
> 标签：d3.js

当从 mySQL 数据库中提取新数据时，我有一个每 5 秒更新一次的折线图。

[https://gist.github.com/Majella/5fc4cd5f41a6ddf2df23](https://gist.github.com/Majella/5fc4cd5f41a6ddf2df23)

每次调用数据以停止压缩行/路径时，如何从数组中删除第一个/最旧的元素？

我尝试在调用数据后在更新函数中添加 data.shift() 但仅适用于第一次调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:01:48.363

我不知道 getdata.php 背后的详细信息，但我认为它每次都会逐渐返回更多数据点，因此仅删除第一个数据点仍然会让您拥有比您想要的更大的数据集。所以你有几个选择：

1.  更改 getdata.php 的服务器端以仅返回最新的 x 数据点（或者可能添加查询字符串参数以获取多少点/分钟/要检索的任何内容）

2.  在 updateData 中更改客户端以检查数组的长度并 .slice 从 lengthYouWant 减去 lengthYouReceived 开始的元素（假设数据已经正确排序）

# macos - npm 全局路径前缀

> ID：14803978
> 
> 赞同：153
> 
> 时间：2013-02-10T23:42:16.480
> 
> 标签：macos, node.js, npm, zsh

我比平时更加​​谨慎，因为我`npm`对过去的行为感到困惑。

我在 Mac 上并通过`brew install node`.

现在我想`jslint.js`在命令行上作为命令运行，`jslint`我发现完成此操作的规范方法是`sudo npm install -g jslint`使用此输出成功运行：

```
$ sudo npm install -g jslint
npm http GET https://registry.npmjs.org/jslint
npm http 200 https://registry.npmjs.org/jslint
npm http GET https://registry.npmjs.org/jslint/-/jslint-0.1.9.tgz
npm http 200 https://registry.npmjs.org/jslint/-/jslint-0.1.9.tgz
npm http GET https://registry.npmjs.org/nopt
npm http 200 https://registry.npmjs.org/nopt
npm http GET https://registry.npmjs.org/nopt/-/nopt-1.0.10.tgz
npm http 200 https://registry.npmjs.org/nopt/-/nopt-1.0.10.tgz
npm http GET https://registry.npmjs.org/abbrev
npm http 200 https://registry.npmjs.org/abbrev
npm http GET https://registry.npmjs.org/abbrev/-/abbrev-l.0.4.tgz
npm http 200 https://registry.npmjs.org/abbrev/-/abbrev-1.0.4.tgz
/usr/local/share/npm/bin/jslint -> /usr/local/share/npm/lib/node_modules/jslint/
bin/jslint.js
jslint@0.1.9 /usr/local/share/npm/lib/node_modules/jslint
└── nopt@1.0.10 (abbrev@1.0.4) 
```

随后

```
$ jslint ply.js
zsh: command not found: jslint 
```

由于`/usr/local/share/npm/bin`不在我的`$PATH`.

1）为什么没有`brew`安装全局`npm` `bin`路径到路径？也许确实如此，但`zsh`确实有些事情搞砸了。我在哪里可以找到那个？
2）我应该这样做吗？（附加到my 底部`:/usr/local/share/npm/bin`的导出内容）`$PATH``~/.zshrc`

看起来这不是正确的方法，因为如果我稍后安装其他东西（使用 Homebrew 或其他东西），我需要将它附加到我的 zsh 启动脚本中以设置路径。我想在这个特定的例子中，这只是`npm install -g`没有在“适当的”位置（比如`/usr/local/bin`可能）创建正确的符号链接的问题。

我认为我要做的就是`/usr/local/bin`为我遇到问题的任何程序手动构建符号链接，它应该足以满足我的目的。

**编辑**：我将在 2019 年更新这个问题，因为这个老问题很受欢迎，但现在就我的个人工作流程以及如何最好地安装节点和管理其各种依赖项而言已经过时了。

我个人的工作流程现在是使用从 nodejs.org 获得的安装程序在系统上安装 node。我实际上比自制软件包本身更信任它，因为它最了解如何管理文件。如果您想将系统节点从 8.10 更改为 10.15，无论是在 Mac 还是 Windows 上，只需从 nodejs.org 下载适用于您操作系统的 10.15 的安装程序。根据我的经验，尝试升级通过自制软件安装的节点总是被证明是一种更困难的方法。

另外，要指出的最重要的一点是，非常不鼓励使用上面我的 npm install of jslint 示例中所示的 sudo ；我相当肯定自制软件包永远不应该使用超级用户以任何方式安装或交互。这不应该是必要的，并且会导致文件权限问题！

此外，我推荐 ESLint 而不是 jslint，并且多年来没有使用过 jslint。

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2013-02-12T19:32:14.373

扩展您`PATH`的：

 ~~~~```
export PATH=/usr/local/share/npm/bin:$PATH 
```~~  ~~这不是一个可怕的主意。话虽如此，你不应该这样做。

运行这个：

```
npm config get prefix 
```

OS X 上的默认值是`/usr/local`，这意味着 npm 会将二进制文件符号链接到`/usr/local/bin`，这应该已经在你的`PATH`（特别是如果你使用 Homebrew 时）。

所以：

1.  `npm config set prefix /usr/local`如果是别的东西，并且
2.  不要`sudo`与 npm 一起使用！根据[jslint docs](https://github.com/reid/node-jslint)，您应该能够`npm install`做到。

如果您将 npm 安装为 sudo ( `sudo brew install`)，请尝试使用普通 ol' 重新安装它`brew install`。Homebrew 应该可以帮助您保持`sudo`自由。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-10T03:33:02.233

在这个问题上花了一段时间，PATH 开关没有帮助。我的问题是在此处找到的 Homebrew/node/npm 错误 - [https://github.com/npm/npm/issues/3794](https://github.com/npm/npm/issues/3794)

如果您已经使用 Homebrew 安装了节点，请尝试 ****注意每条评论，这可能不安全。它对我有用，但可能会产生意想不到的后果。最新版本的 Homebrew 似乎也正确安装了 npm。我很可能会在尝试之前尝试`brew update`,`brew doctor`等`brew upgrade node`****：

```
npm update -gf 
```

或者，如果您想使用 Homebrew 安装节点并让 npm 工作，请使用：

```
brew install node --without-npm
curl -L https://npmjs.org/install.sh | sh 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-16T19:56:32.427

我使用 brew 并且前缀已经设置为：

```
$ npm config get prefix
/Users/[user]/.node 
```

我确实注意到 bin 和 lib 文件夹归 root 所有，这阻止了通常的非 sudo 安装，所以我将它们重新拥有给用户

```
$ cd /Users/[user]/.node
$ chown -R [user]:[group] lib
$ chown -R [user]:[group] bin 
```

然后我只是将路径添加到位于 /Users/[user] 的 .bash_profile

```
PATH=$PATH:~/.node/bin 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-11T00:19:40.960

即使在使用 -g 运行 npm 时，brew 也不应该要求您使用 sudo。这实际上可能会在未来产生更多问题。

通常，brew 或 port 允许您更新路径，因此它不会冒弄乱您的 .zshrc、.bashrc、.cshrc 或您使用的任何外壳的风险。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-04-11T15:41:39.860

我通过执行以下操作设法修复了 Vue Cli no command 错误：

*   在终端`sudo nano ~/.bash_profile`中编辑您的 bash 配置文件。
*   添加`export PATH=$PATH:/Users/[your username]/.npm-packages/bin`
*   保存文件并重启终端
*   现在你应该可以使用`vue create my-project`等了`vue --version`。

我从[https://cli.vuejs.org/安装了最新的 Vue Cli 后这样做了](https://cli.vuejs.org/)

我通常使用 yarn，但我使用 npm 全局安装了它`npm install -g @vue/cli`。如果你愿意，你也可以使用纱线`yarn global add @vue/cli`

注意：如果您已经安装了它，您可能需要先全局卸载它：`npm uninstall -g vue-cli`

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-28T01:14:11.033

尝试运行：

```
PATH=$PATH:~/npm/bin 
```

然后通过`express`在命令行中运行进行测试。这对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-22T04:10:35.080

如果您使用 sudo 命令链接了节点包

然后转到全局安装 node_modules 的文件夹。

在 Unix 系统上，当全局安装时，它们通常放置在 /usr/local/lib/node 或 /usr/local/lib/node_modules 中。如果将 NODE_PATH 环境变量设置为此路径，则可以通过节点找到模块。

Windows XP - %USERPROFILE%\Application Data\npm\node_modules Windows 7 - %AppData%\npm\node_modules

然后运行命令

```
ls -l 
```

这将给出所有全局 node_modules 的列表，您可以轻松查看链接的节点模块。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-01T16:53:43.837

sudo brew 不再是一个选项，所以如果你此时使用 brew 安装，你会得到 2 个非常讨厌的东西： A：它喜欢安装到`/usr/local/opts`/usr/local/shared 中或根据这个安装。起初这没什么大不了的，但我遇到了节点 PATH 的问题，尤其是在我安装 lint 时。B：在您以这种方式卸载并安装它或者您可以从[Bitnami获取堆栈之前，您有点卡在 sudo 命令中](https://bitnami.com/stack/mean)

我推荐这种方法而不是堆栈选项，因为如果您有多个项目，它就可以使用了。如果你使用预制的 MEAN 堆栈，你必须在 httpd.conf 中设置虚拟主机（这个堆栈比 XAMPP 更痛苦）加上通常更新你的 extra/vhosts.conf 和 /etc/hosts 为每个额外的项目，除非您想在完成更新后重新指向并重新启动服务器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-15T16:05:47.837

任何人都遇到与 brew 和 npm 之间的冲突有关的相同问题 请检查此解决方案[https://gist.github.com/DanHerbert/9520689](https://gist.github.com/DanHerbert/9520689)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-01T05:00:59.010

我从 M1 Apple Silicon 上的自制软件中卸载了节点，而是使用了来自[https://nodejs.org/en/download/](https://nodejs.org/en/download/)的 Mac 安装程序。之后，我可以使用 npm 和 npx 进行安装。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2019-05-06T10:52:34.940

简单的解决方案是...

只需输入以下命令：

1.  `sudo npm config get prefix`

    如果不是这些`/usr/local`，则需要使用以下命令对其进行修复。

2.  `sudo npm config set prefix /usr/local`...

现在它 100% 工作正常~~~~

# java - EPS阅读器java

> ID：14803982
> 
> 赞同：4
> 
> 时间：2013-02-10T23:42:41.500
> 
> 标签：java, jmagick

[我在这里](http://www.spectotechnologies.com/projets-ouverts/plugiciel-eps-pour-imageio)下载了用于处理 EPS 文件的库。

并编写了一些代码来解析 EPS 文件：

```
EPSImageReaderSPI spi = new EPSImageReaderSPI();
EPSImageReader eps = new EPSImageReader(spi);

File file = new File("file.eps");
InputStream in = null;
try {
    in = new FileInputStream(file);
} catch (FileNotFoundException e) {
    e.printStackTrace();  
}
ImageInputStream iis = null;
iis = ImageIO.createImageInputStream(in);
eps.setInput(iis);
eps.getHeight(0); 
```

我的代码崩溃并说：

> 线程“main”javax.imageio.IIOException 中的异常：在 Main.main(Main) 的 epsLib.EPSImageReader.getHeight(EPSImageReader.java:148) 的 epsLib.EPSImageReader.readHeader(EPSImageReader.java:307) 不支持数据类型 -1 .java:39) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java. lang.reflect.Method.invoke(Method.java:597) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

你能帮我吗？

**更新：**

当我尝试安装**jmagick**时，但是当我运行命令时：

```
./configure --with-java-home=/System/Library/Frameworks/JavaVM.framework/Versions/Current --with-magick-home=/usr/local/Cellar/imagemagick/6.8.0-10 --with-magick-inc-dir=/usr/local/Cellar/imagemagick/6.8.0-10/include 
```

得到这个错误：

> 检查 MagickCore-config... /usr/local/Cellar/imagemagick/6.8.0-10/bin/MagickCore-config /usr/local/Cellar/imagemagick/6.8.0-10/bin/MagickCore-config: line 50：pkg-config：找不到命令/usr/local/Cellar/imagemagick/6.8.0-10/bin/MagickCore-config：第53行：pkg-config：找不到命令/usr/local/Cellar/imagemagick/6.8 .0-10/bin/MagickCore-config: 第 47 行: pkg-config: command not found 检查magick/api.h 可用性...不检查magick/api.h 存在...不检查magick/api.h ...没有配置：错误：无法找到 ImageMagick 头文件

* * *

**更新：**

我修复它！只需将命令更改为：

```
./configure --with-java-home=/System/Library/Frameworks/JavaVM.framework/Versions/Current --with-magick-home=/usr/local/Cellar/imagemagick/6.8.0-10 --with-magick-inc-dir=/usr/local/Cellar/imagemagick/6.8.0-10/include/ImageMagick/ 
```

然后我尝试了：

```
make all 
```

并得到错误：

> make [1](http://www.spectotechnologies.com/projets-ouverts/plugiciel-eps-pour-imageio) : 进入目录`/Users/olegsuzaev/jmagick-6.4.0/src'make[2]: Entering directory`/Users/olegsuzaev/jmagick-6.4.0/src/magick'../../Make.rules:175: *** 缺少分隔符。停止。make[2]: 离开目录`/Users/olegsuzaev/jmagick-6.4.0/src/magick' make[1]: *** [dir_target] Error 2 make[1]: Leaving directory`/Users/olegsuzaev/jmagick-6.4.0/src' make: *** [dir_target] 错误 2

有人可以帮助解决新错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:53:04.420

我建议您联系此代码的作者或自己查看代码以找出发生此异常的原因。

作为替代方案，似乎有许多可用于 Java 的 EPS API。这里有几个：

*   [jlibeps](http://jlibeps.sourceforge.net/)
*   [EPS 图形 API](http://www.abeel.be/epsgraphics/)
*   [轻巧EPS](http://www.jibble.org/epsgraphics/)
*   [Java EPS 图形](https://github.com/matmas/java-eps-graphics)

此外，[ImageMagick （一个 C 库）支持 EPS 来读取 EPS，并且有一个名为](http://www.imagemagick.org/script/index.php)[JMagick](http://www.jmagick.org/)的 ImageMagick 的 JNI 包装器，它允许从 Java 访问 ImageMagick。

# php - CakePHP - 使用菜单动态生成不同的页面/视图

> ID：14803987
> 
> 赞同：1
> 
> 时间：2013-02-10T23:43:15.480
> 
> 标签：php, cakephp, menubar

我是 CakePHP 的初学者，我正在尝试在这里建立一个非常基本的网站，它有一个菜单 + 一些 UI 内容，比如一个将在所有页面中持续存在的页脚。

我现在遇到的问题是，在我的控制器中，我有几个不同的功能对应于从数据库中获取数据的网站菜单选项，但显然我不想创建相同数量的视图，因为每个页面都有完全相同的设置。

所以我的问题是实现这一目标的标准或最佳实践是什么？我阅读了元素，但仍然对如何做到这一点感到困惑；我将如何跟踪用户当前正在浏览的页面？如果他们点击一个菜单选项，它将如何编码以便将他们从“blah.com/home”带到“blah.com/contact”？

我知道我的问题有点长而且很无聊，但如果我能在开始 CakePHP 时得到一些帮助，我会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:18:24.730

对于从数据库中获取数据的网站菜单选项对应的函数，将它们放在**App Controller 的 beforefilter() 中，**并使用 $this->set 设置变量并为菜单制作元素，您可以在布局中调用这些元素。您可以在控制器中设置布局，例如 var $layout=''。

# c++ - 变量 answer 正在使用而不被初始化？

> ID：14803989
> 
> 赞同：-4
> 
> 时间：2013-02-10T23:44:03.713
> 
> 标签：c++

有什么帮助吗？当我输入这两个数字时，它说答案没有被初始化......？

```
#include <iostream>
using namespace std;
int main()
{
  int num;
  int num2;
  int working;
  int answer;
  int uChoice;
  int work( int one, int two, int todo );
  cout << "Welcome to my Basic Mini-Calculator!" << endl;
  do
    {
      cout << endl << "What do you want to do?" << endl;
      cout << "1) Add" << endl;
      cout << "2) Subtract" << endl;
      cout << "3) Multiply" << endl;
      cout << "4) Divide" << endl;
      cout << endl << "Waiting for input... (enter a number): ";
      cin >> uChoice;
      cout << endl;

    } while( uChoice != 1 && uChoice != 2 && uChoice != 3 && uChoice != 4 );

  switch ( uChoice )
    {
    case 1:
      cout << endl << "You chose addition." << endl;
      cout << "Enter a number: ";
      cin >> num;
      cout << "Enter another number: ";
      cin >> num2;
      working = num + num2;
      cout << "Your answer is: " << answer;
      break;

    case 2:
      cout << endl << "You chose subtraction." << endl;
      cout << "Enter a number: ";
      cin >> num;
      cout << "Enter another number: ";
      cin >> num2;
      working = num - num2;
      cout << "Your answer is: " << answer;
      break;

    case 3:
      cout << endl << "You chose multiplication." << endl;
      cout << "Enter a number: ";
      cin >> num;
      cout << "Enter another number: ";
      cin >> num2;
      working = num * num2;
      cout << "Your answer is: " << answer;
      break;

    case 4:
      cout << endl << "You chose division." << endl;
      cout << "Enter a number: ";
      cin >> num;
      cout << "Enter another number: ";
      cin >> num2;
      working = num / num2;
      cout << "Your answer is: " << answer;
      break;
      return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:46:43.197

正是这样。您声明答案：

```
int answer; 
```

然后您多次使用它而不对其进行初始化或为其分配任何值：

```
cout << "Your answer is: " << answer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:48:29.377

您使用`answer`时无需为其分配值，就像警告状态一样:-)

语句部分可能如下：

```
working = num + num2;
cout << "Your answer is: " << answer; 
```

实际上应该有：

```
answer = num + num2; 
```

反而。

在这种情况下，您可能可以完全摆脱`working`。

# java - 从 InputStream 读取时丢失的第一个字符

> ID：14803992
> 
> 赞同：-1
> 
> 时间：2013-02-10T23:44:25.537
> 
> 标签：java, stream

我有以下代码：

```
public class Interface {

    public void exec(){
        try {
            _inputStream.read();
            BufferedReader br = new BufferedReader( new InputStreamReader( _inputStream ));
            System.out.println( br.readLine() );
        } catch (IOException e) {
        }

    }

    public void setInputStream( InputStream inputStream ){
        _inputStream = inputStream;
    }

    private InputStream _inputStream;

}

public class Run {

    public static void main(String[] args) {
        Interface ui = new Interface();
        ui.setInputStream( new ByteArrayInputStream( "2 4 N".getBytes( Charset.defaultCharset() ) ) );
        ui.exec();
    }
} 
```

每当我运行这段代码时，我打印出来的只是

```
" 4 N" 
```

第一个字符丢失了。我的流发生了什么，我可以做些什么来防止它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T23:46:10.720

```
_inputStream.read(); 
```

消耗一个不去的字符`BufferedReader`。你自己丢弃了那个角色。只需删除该行，就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T23:47:49.500

因为你`_inputStream.read();`先打电话。只需删除该行。

# c# - 构建唯一 ID 集合及其计数的最佳方式

> ID：14803994
> 
> 赞同：2
> 
> 时间：2013-02-10T23:44:38.713
> 
> 标签：c#, .net, collections

我已经研究了数组、数组列表、字典的各种不同方式......但由于我习惯了 PHP，我并不完全确定我可以收集以下信息的最佳方式。

我的程序循环遍历每个用户，如果他们是位置 ID，我想将其添加到某种集合/数组中。预计不同的用户将具有相同的位置 ID。

如果位置 ID 相同，我需要增加该位置 ID 出现次数的整数。

例子：

```
User1 - Location1
User2 - Location3
User3 - Location3

Location1 = 1
Location3 = 2 
```

**我还**需要以某种方式将每个用户 ID 附加到这个集合中。所以 Location3 / 2 次出现 / user2/user3

大约两个小时以来，我一直在试图找出最好的方法，多维数组、数组列表、字典的所有不同方法都有点令人困惑，因为这对我的 PHP 知识来说似乎很抽象。我认为 C# 以完全不同的方式处理数组。

本质上，具有唯一位置 ID / 出现次数 / 和用户集合的集合需要存储在可以作为参数传递到我程序中其他地方的东西中。

**我制作了一个 PHP 脚本，它完全符合我的要求**

```
foreach($call["data"] as $v)
{
    // Foreach USER ($v containing their unique ID and location ID.)

    $user_id        = $v["id"];
    $location_id    = $v["location"]["id"];

    // This adds the location ID as the key within the array, followed by every user who has it. I don't need a count in this case, as I could just count the number of users.
    $collection[$location_id][$user_id] = null;
} 
```

这反过来在使用 print_r 打印时创建此数组

```
[106078429431815] => Array
(
    [620790873] => 
    [626276302] => 
    [100000152470577] => 
) 
```

（输出的一小部分）。- 添加了 PHP 示例。任何人都知道如何让 C# 以与我的 PHP 数组相同的方式收集相同的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:49:02.870

```
using System.Linq;

var grouppingByLocation = users.GroupBy(u => u.LocationID);
foreach (var g in grouppingByLocation)
{
     Console.WriteLine("Location id: {0}", g.Key);
     foreach (var u in g)
     {
          Console.WriteLine("User id: {0}", u.ID);
     }
} 
```

有关详细信息，请参阅[Enumerable.GroupBy() 。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)

这是由任何内置集合（例如 Array 、、等）实现的接口上的扩展方法，它接受指向[您](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)分组所依据的类集合的属性的[lambda 表达式。](http://msdn.microsoft.com/en-us/library/bb397687.aspx)[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)`T[]``List<T>``Dictionary<K,V>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:53:05.973

如果要构建循环遍历初始数据的列表，可以像这样创建对象：

```
var list = new Dictionary<int, Tuple<int, List<int>>(); 
```

并将其填充到循环中

```
if(list[locationID]==null) list[locationID] = Tuple.Create(0,new List<int>());
//..
list[locationId].Item1++;  // counter    
list[locationId].Item2.Add(userId); //list of users 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:55:55.280

创建一个对象来保存每一项数据。

```
public Class Model{
        public int LocationId {get;set;}
        public int Occurences{get;set;}
        public IList<User> Users{get;set;}
    } 
```

将容器初始化为项目列表。

```
var container = List<Model>(); 
```

处理您的用户列表。

```
foreach(var user in userList){
    var model = container.SingleOrDefault(x=> x.LocationId == user.LocationId);

    if(model != null){

       model.Users.Add(user);

    } else{
      model = new Model{
      model.Users = new List<User>.Add(user);
      model.LocationId = user.LocationId;
      container.Add(model)
    }
    model.Occruences ++;
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T23:56:15.127

```
var byLocation = users.Where(u => !string.IsNullOrEmpty(u.Location))
    .GroupBy(u => u.Location);

var stats = byLocation.Select(l => string.Format("{0} / {1} occurrences / {2}",
    l.Key, l.Count(), string.Join("/", l.Select(u => u.User)));

// And just to print the result
foreach (var location in stats)
    Console.WriteLine(location); 
```

# python - mlabwrap 设置查询

> ID：14803996
> 
> 赞同：11
> 
> 时间：2013-02-10T23:44:40.283
> 
> 标签：python, matlab, mlabwrap

我碰巧偶然发现了[用户 brentlance 发布的](https://stackoverflow.com/questions/13311415/run-a-matlab-script-from-python-pass-args)关于将 Matlab 链接到 Python 的答案，我想知道我是否可以就 mlabwrap 模块的初始设置向社区寻求一些建议。

我在 Windows 7 32 位上，使用 Matlab R2012a 和 Python 2.7（来自 Python(x,y) 科学计算包）。当我尝试运行时：

```
python setup.py install 
```

在 malbwrap 目录中，控制台返回一个非常大的错误，如下所示：

```
WINDOWS SPECIFIC ISSUE? Unable to remove c:\users\nathan\appdata\local\temp\tmpv
tzipc; please delete it manually
[Error 32] The process cannot access the file because it is being used by anothe
r process: 'c:\\users\\nathan\\appdata\\local\\temp\\tmpvtzipc'

running install
running build
running build_py
running build_ext
building 'mlabraw' extension
Traceback (most recent call last):
  File "setup.py", line 189, in <module>
    extra_compile_args=EXTRA_COMPILE_ARGS,
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\install.py", line 563, in run
    self.run_command('build')
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\build.py", line 127, in run
    self.run_command(cmd_name)
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\build_ext.py", line 340, in run
    self.build_extensions()
  File "C:\Python27\lib\distutils\command\build_ext.py", line 449, in build_exte
nsions
    self.build_extension(ext)
  File "C:\Python27\lib\distutils\command\build_ext.py", line 499, in build_exte
nsion
    depends=ext.depends)
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 474, in compile
    self.initialize()
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 384, in initialize
    vc_env = query_vcvarsall(VERSION, plat_spec)
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 300, in query_vcvarsal
l
    raise ValueError(str(list(result.keys())))
ValueError: [u'path'] 
```

为了应对各种其他问题，到目前为止，我尝试了以下方法：

1.  [我按照此处](http://obasic.net/how-to-install-mlabwrap-on-windows)发布的安装指南进行操作
2.  已安装 Microsoft VS Express 2010 和 SDK 版本 7.1
3.  在 Matlab 中将 SDK C++ 编译器设置为默认值
4.  将 msvc9compiler.py 脚本 (C:\Python27\Lib\distutils\msvc9compiler.py) 指向我的 VS Express 安装的 Common Tools 文件夹，以避免出现“无法找到 vcvarsall.bat”错误，如此[处](http://web.archive.org/web/20101221084639/http://nukeit.org/compile-python-2-7-packages-with-visual-studio-2010-express/)所述。

你们可以提供的任何帮助将不胜感激。非常感谢。

# php - 做 JQuery/AJAX 和 php，文件结构的正确方法是什么？

> ID：14803999
> 
> 赞同：0
> 
> 时间：2013-02-10T23:45:37.730
> 
> 标签：php, jquery

在 PHP 中执行 Jquery AJAX 请求时，我应该以什么方式构建我的文件。

IE

*   showRecords.htm - 包含从下面的 php 文件中获取数据 (HTML) 的 jQuery/AJAX。
*   showRecords.php - 包含执行某些处理的 php，可能从 DB 获取数据并回显一些 HTML。

或者

一个文件：

*   showRecords.php - 包含 JQuery/AJAX 并且是 php 文件并从自身请求数据。

> 还有你们聪明的人，请注意我是 JQuery 和 AJAX 的初学者，所以如果这是一个愚蠢的问题或琐碎的问题，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:56:21.850

显然不是：一个文件。

我会这样做：

*   showRecords.php - 表单处理，数据库请求
*   templates/showSomeHtml.php - 显示您的用户可以看到的所有内容
*   showRecords.js - 获取数据的 jQuery/AJAX

如果 jQuery/Ajax 修改了 HTML，您还可以将其（动态 HTML）移动到模板中（阅读有关[javascript 模板](https://developer.mozilla.org/en-US/docs/JavaScript_templates)的信息）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:51:36.630

我想这取决于你。如果您有一个快速的 ajax 调用，并且您知道它不会在任何地方使用，那么我认为将所有内容都放在一个文件中没有问题。另一方面，您可能需要在站点的多个位置访问该处理脚本。如果是这种情况，将它们全部放在一个文件中并不理想。我认为两个文件可以避免混淆。保持一切独立和整洁。