# StackOverflow 问答 15799000-15799999

# javascript - 以编程方式更改内容后，scrollHeight 未重置

> ID：15799001
> 
> 赞同：7
> 
> 时间：2013-04-03T22:01:47.323
> 
> 标签：javascript, resize, user-input

我正在尝试在没有 jQuery 的情况下学习一些东西。这是我面临的挑战之一。

我有一个固定的**contenteditable** div，当向 div 添加文本时，如果`scrollHeight`超过`clientHeight`我缩小字体直到内容适合 div。

有时我“重建”以`innerHTML`编程方式替换的文本。或者用户可以删除*应该*减少的文本`scrollHeight`，但在这两种情况下，`scrollHeight`仍然是最大值。我需要一些方法来增加字体大小以再次“适合” div。（理想情况下不是很贵）

例子：

我的`clientHeight`= 142，和`scrollHeight`= 158。一个循环减小字体大小，直到`scrollHeight`是 142。然后，用户删除了一行文本，但`scrollHeight`仍然是 142，没有变化。

减少/增加高度的代码：

```
 var textBox = document.getElementById('text');
    var current, min = 6, max = 14;
    current = textBox.style.fontSize.substr(0, textBox.style.fontSize.length - 2);
    current = parseInt(current);
    if (textBox.clientHeight < textBox.scrollHeight) {
        while (textBox.clientHeight < textBox.scrollHeight) {
            current--;
            if (current < min) break;
            textBox.style.fontSize = '' + current + 'pt';
        }
    } else if (textBox.clientHeight > textBox.scrollHeight) {
        while (textBox.clientHeight > textBox.scrollHeight) {
            current++;
            if (current > max) break;
            textBox.style.fontSize = '' + current + 'pt';
        }
    } 
```

html（以防万一）：

```
<div id="text" contenteditable="true"></div> 
```

css（以防万一）：

```
#text {
    position: relative;
    border: 1px solid blue;
    top: 180px;
    left: 31px;
    width: 300px;
    height: 132px;
    padding: 5px;
    font-family: 'mplantin';
    font-size: 14pt;
    font-weight: 200;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-21T20:02:41.047

我在同一条船上，但有一个`iframe`; 我不确定我的解决方案是否适合您的聊天窗口，因为它用于页面转换，但经过一些测试，这是我的 hack。`"content"`是 an 的 id，它`iframe`在需要更改页面时调用的 javascript 函数内执行：

```
var c=document.getElementById("content");
c.width=0;
c.height=0;
c.src="page.html"; 
```

`src' 赋值方法紧接着将设置为 0 的值展开，达到预期的结果；可能有一种方法可以让您不断调整文本区域的大小；但是，我遇到了你的视觉问题；我最终使用了计时器，以便在页面之间的转换透明时进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-16T17:02:34.263

这似乎解决了我的问题：

```
element.style.height = "auto"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-16T18:19:57.187

@nixahn 和 @jeff 的两个答案都对我有用（chrome，ff）

```
iframe.style.height ="0"; // or "auto"
iframe.contentWindow.document.open();
iframe.contentWindow.document.write('<style>'+css+'</style>');
iframe.contentWindow.document.write(html);
iframe.contentWindow.document.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-24T08:36:43.020

我使用了一个具有固定高度的 div，而 auto 的问题是它调整了元素的大小，我在设置内部 HTML 后使用以下代码修复了这个问题：

`element.style.height = "auto"; element.style.height = "400px";`

现在 scrollHeight 已正确重置并给出内部 HTML 的真实高度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-11T08:24:21.777

我遇到了同样的问题——一个内容可编辑的 div，`scrollHeight`当删除行时它不会缩小。

接受的答案并没有解决我的问题，但是，删除了 div 的父母`display: flex;`。

# javascript - JavaScript Map Reduce：奇怪的行为

> ID：15799005
> 
> 赞同：3
> 
> 时间：2013-04-03T22:01:56.720
> 
> 标签：javascript, mapreduce

```
var t = [-12, 57, 22, 12, -120, -3];

t.map(Math.abs).reduce(function(current, previousResult) {
    return Math.min(current, previousResult);
}); // returns 3

t.map(Math.abs).reduce(Math.min); // returns NaN 
```

我不明白为什么第二种形式不起作用。欢迎任何解释。

**编辑**：技术背景：Chrome 和 Firefox JavaScript 引擎。见 ES5 减少[http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.21](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.21)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T22:04:22.130

[`Math.min`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/min)接受多个参数。这与 this 不适用于`parseInt`或其他类似功能的原因完全相同。您需要自己绑定参数。

减少提供值，例如`index`和`array``Math.min`

如果我们遵循以下步骤，我们可以确认这一点：

首先，我们代理 Math.min：

```
var oldMath = Math.min;
Math.min = function (){
   console.log(arguments)
   return oldMath.apply(Math, arguments);
} 
```

然后我们运行第二个版本：

```
[-12, 57, 22, 12, -120, -3].reduce(Math.min); 
```

哪些日志：

```
[-12, 57, 1, Array[6]] 
```

由于 Array[6] 不是数字，因此结果为 NaN

* * *

这是来自 MDN 的一个非常相似的示例：

```
["1", "2", "3"].map(parseInt); 
```

虽然可以预期 [1, 2, 3] 实际结果是 [1, NaN, NaN]

`parseInt`通常与一个参数一起使用，但需要两个。第二个是基数 对于回调函数，Array.prototype.map 传递 3 个参数：元素、索引、数组。 parseInt 忽略第三个参数，但不会忽略第二个，因此可能会造成混淆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T22:08:45.453

[reduce](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)的回调被称为传递四个参数： `previousValue`、`currentValue`和. 因为[Math.min](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/min)是一个[可变参数](http://en.wikipedia.org/wiki/Variadic_function)函数，所以您的代码：`index``array`

```
t.map(Math.abs).reduce(Math.min); // returns NaN 
```

相当于：

```
t.map(Math.abs).reduce(function(current, previousResult, index, array) {
  return Math.min(current, previousResult, index, array);
}); 
```

这就是为什么结果是`NaN`: 最后一个参数 ,`array`不是数字。

[您还可以使用像这样的高阶函数](http://en.wikipedia.org/wiki/Higher-order_function)来解决此类问题：

```
function binary (fn) {
  return function (a, b) {
     return fn.call(this, a, b);
  }
} 
```

进而：

```
t.map(Math.abs).reduce(binary(Math.min)); 
```

将起作用。

# python - 如何使用自定义环境变量通过 subprocess.Popen 获取 PID？

> ID：15799012
> 
> 赞同：3
> 
> 时间：2013-04-03T22:02:26.627
> 
> 标签：python, subprocess, popen, pid

使用 Python，如何使用修改后的环境变量运行子进程并获取其 PID？我假设 subprocess.Popen() 是在正确的轨道上......

在 shell (bash) 中，我会这样做：

```
MY_ENV_VAR=value ./program_name arg1 arg2 etc & 
```

这`program_name`在后台运行，传入“arg1”、“arg2”和“etc”，并带有修改后的环境变量“MY_ENV_VAR”，其值为“value”。该程序`program_name`要求将环境变量`MY_ENV_VAR`设置为正确的值。

如何在 Python 中做同样的事情？我绝对需要进程的PID。（我的目的是保持 python 脚本运行并同时检查一些`program_name`正在做的事情，我需要进程 ID 以确保它仍在运行。）

我试过了：

```
proc = subprocess.Popen(['MY_ENV_VAR=value', './program_name', 'arg1', 'arg2', 'etc']) 
```

但当然，它希望第一项是程序，而不是环境变量。

也试过：

```
environ = dict(os.environ)
environ['MY_ENV_VAR'] = 'value'
proc = subprocess.Popen(['./program_name', 'arg1', 'arg2', 'etc', env=environ]) 
```

接近，我想，但没有雪茄。同样，这个：

```
environ = dict(os.environ)
environ['MY_ENV_VAR'] = 'value'
proc = subprocess.Popen(['echo', '$MY_ENV_VAR'], env=environ) 
```

这在字面上与“$MY_ENV_VAR”相呼应，我想是因为没有外壳可以解释它。好的，所以我尝试上面的方法，但改用这一行：

```
proc = subprocess.Popen(['echo', '$MY_ENV_VAR'], env=environ, shell=True) 
```

这很好，很漂亮，除了回显的值是空白的（显然不存在）。即使它确实有效，我也会得到 shell 的 PID，而不是我试图启动的实际进程。

我需要使用自定义环境变量启动一个进程并获取它的 PID（不是 shell 的 PID）。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:11:27.473

您的上一个版本非常接近，但不完全在那里。

你不想`$MY_ENV_VAR`成为`echo`. 该`echo`程序将`MY_ENV_VAR`在其环境中，但`echo`不进行任何环境变量扩展。你需要它被 shell 扩展，甚至在它到达`echo`.

这实际上可能与您的实际测试用例无关。您已经*在*所有测试中为子进程获取了环境变量，只是对`echo`那个环境变量没有任何作用。如果您的真实程序只需要设置环境变量，那么您就完成了：

```
proc = subprocess.Popen(['./program_name', 'arg1', 'arg2', 'etc'], env=environ) 
```

但是，如果您的程序需要*替换*它，例如`echo`，那么您必须在参数传递给您的程序*之前将其替换为参数。*

最简单的方法是只给 shell 一个命令行而不是参数列表：

```
proc = subprocess.Popen('echo "$MY_ENV_VAR"', env=environ, shell=True) 
```

人们会告诉你，你永远不应该在其中使用命令字符串`subprocess`——但这样做的原因是你总是想防止 shell 以一种不安全的方式扩展变量等。在极少数情况下，当您*希望*shell 执行其外壳操作时，您*需要*一个命令字符串。

当然，如果你使用 shell，在大多数平台上，你最终会得到 shell 的 PID，而不是实际程序的 PID。如果没有做一些特定于平台的挖掘来枚举 shell 的孩子（或者将整个事情包装在一些简单的`sh`代码中，间接地给你孩子的 PID），没有办法解决这个问题。shell 就是你正在运行的东西。

另一种选择是在 Python 中扩展变量，而不是让 shell 来做。然后你甚至*不需要*外壳：

```
proc = subprocess.Popen(['echo', os.path.expandvars('$MY_ENV_VAR')]) 
```

……或者，更简单地说：

```
proc = subprocess.Popen(['echo', os.environ['MY_ENV_VAR']]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:33:43.777

这是一个吐出当前环境的程序。

```
#!/usr/bin/env python
##program_name
import os
for k,v in os.environ.iteritems():
    print k, '=', v 
```

这是一个调用另一个程序的程序，但首先改变了环境

```
#!/usr/bin/env python
import subprocess, os
newenv = os.environ.copy()
newenv['MY_ENV_VAR'] = 'value'
args = ['./program_name', 'arg1', 'arg2', 'etc']
proc = subprocess.Popen(args, env=newenv)
pid = proc.pid
proc.wait()
print 'PID =', pid 
```

# apache - mod_rewrite 不适用于查询字符串重定向

> ID：15799020
> 
> 赞同：2
> 
> 时间：2013-04-03T22:02:56.527
> 
> 标签：apache, .htaccess, mod-rewrite

目前我有一个漂亮的 url 的重写规则，它工作正常。我试着在一秒钟内添加，这给我带来了问题：

```
# redirect /?p=xyz to /xyz
RewriteCond     %{QUERY_STRING}         ^p=(.*)$
RewriteRule    ^(.*)$                   /index.php/%1 [L]

# Removes index.php from ExpressionEngine URLs
RewriteCond                     $1 !\.(gif|jpe?g|png)$  [NC]
RewriteCond                     %{REQUEST_FILENAME} !-f
RewriteCond                     %{REQUEST_FILENAME} !-d
RewriteRule                     ^(.*)$ /index.php/$1 [L] 
```

第二个工作正常，但第一个给我内部服务器错误。基本上我想要 ?p=* 中的任何东西去 /index.php/*

[编辑] 澄清一下，我需要[http://domain.com/?p=test](http://domain.com/?p=test)等同于[http://domain.com/test/](http://domain.com/test/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:20:15.740

> `domain.com/test` 到 `domain.com/?p=test`

试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} !p=   [NC]
RewriteRule  ^([^/]+)/?   /?p=$1 [L,NC] 
```

### 选项：

如果情况相反：
`domain.com/?p=test`到`domain.com/test/index.php`

试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} p=([^/]+)  [NC]
RewriteRule  .*   /%1/index.php?   [L,NC] 
```

`index.php`如果不需要，请删除，如下所示：

```
RewriteRule  .*   /%1/?    [L,NC] 
```

# android - Android listview 选择的背景在 2.3 中不起作用

> ID：15799021
> 
> 赞同：5
> 
> 时间：2013-04-03T22:02:58.063
> 
> 标签：android, listview, background

我试图让我的应用程序在 2.3 中正常工作（它在 4.0+ 中工作正常），我遇到的一个问题是，在我的列表视图中，我无法更改所选项目的背景。我不确定我需要改变什么 - 有人知道吗？

这是列表视图本身：

```
<ListView
    android:id="@+id/score_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/keyboard"
    android:layout_below="@+id/sort_header"
    android:choiceMode="singleChoice"
    android:divider="#CCCCCC"
    android:dividerHeight="1dp"
    android:listSelector="@drawable/selector" /> 
```

这是适用于 4.0+ 的选择器（在 2.3 中没有颜色变化）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@color/highlight"/>
    <item android:state_pressed="true" android:drawable="@color/highlight"/>
    <item android:state_activated="true" android:drawable="@color/highlight"/>
    <item android:state_selected="true" android:drawable="@color/highlight"/>
</selector> 
```

我实际上并不需要所有这四个，但我想尝试一切。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-16T09:24:17.767

我有完全相同的问题。我还没有找到如何在 XML 中执行此操作的方法，但我在代码中找到了解决方法。以下代码在支持 API 级别 7+ 的应用程序中进行了测试

首先，您需要稍微改变一下适配器`ListView`：

```
public class ListViewAdapter extends BaseAdapter {
  private int selectedItemPosition = -1;

  // your code

  public void selectItem(int i) {
    selectedItemPosition = i;
  }

  @Override
  public View getView(int i, View view, ViewGroup viewGroup) {

    // your code

    if (i == selectedItemPosition) {
      // set the desired background color
      textView.setBackgroundColor(context.getResources().getColor(R.color.highlight));
    }
    else {
      // set the default (not selected) background color to a transparent color (or any other)
      textView.setBackgroundColor(Color.TRANSPARENT);
    }
    return view;
  }
} 
```

接下来，您必须通知适配器您`OnItemClickListener`的 's中的选择已更改`onItemClickMethod`：

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
  // select the item
  ((ListViewAdapter) listview.getAdapter()).selectItem(position);
  // force redraw of the listview (invalidating just "view" is not enough)
  ((ListView) parent).invalidateViews();

  // your code
} 
```

应该是这样的。现在，每当您不想更改所选项目时，您都可以使用 中使用的相同代码`onItemClick()`，即。`selectItem()`其次是`invalidateViews()`。也可以使用`invalidateViews()`适配器而不是调用。`notifyDataSetChanged()`

此外，您还应该将适当的 listSelector 添加到列表视图中，以避免单击项目时默认选择器的短暂闪烁。但是，当整个视图的背景发生变化时，API 7 和 8 上的列表选择器存在一个错误。[您可以在此处](https://stackoverflow.com/a/10490435/1096429 "这里")找到解决方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T08:55:31.943

尝试在您的 listview 中设置属性`android:cacheColorHint="@null`。列表视图背景不会通过触摸突出显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-17T10:19:41.977

正如 AwdKab 响应中所写的那样，在 API 级别 11 中引入了。解决方案是为您的列表项布局顶部`android:state_activated`实现`Checkable`接口，请参阅我[的帖子here](https://stackoverflow.com/a/26969013/861661)。`View`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T22:21:10.253

`android:state_activated`在 API 级别 11 中引入。

请参阅此链接[可绘制资源](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

**更新**

我在我的应用程序中使用它（API 级别 8）

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Selector style for listrow -->
<item 
 android:state_selected="false"
    android:state_pressed="false" 
    android:state_focused="false"
    android:drawable="@color/normal"/> 

<item android:state_pressed="true"
        android:drawable="@color/highlight"/>

<item android:state_selected="true"
     android:state_pressed="false"
     android:drawable="@color/highlight"/>

<item android:state_focused="true"
     android:state_pressed="false"
     android:drawable="@color/highlight"/>
</selector> 
```

# java - 如何平均输出小数？

> ID：15799024
> 
> 赞同：1
> 
> 时间：2013-04-03T22:03:18.850
> 
> 标签：java, while-loop, sum, average, sentinel

我在显示平均小数时遇到问题。它一直显示 0.00 或 0.1。我试图把它加倍，但我仍然得到相同的结果。另外，我想将我输入的第一个整数包含在总和中，但我不知道如何。请帮助：

```
import java.io.*;
import java.util.*;

public class WhileSentinelSum 
{
static final int SENTINEL= -999;

public static void main(String[] args)
{
    // Keyboard Initialization
        Scanner kbin = new Scanner(System.in);

    //Variable Initialization and Declaration
        int number, counter;
        int sum =0;
        int average;

    //Input
        System.out.print("Enter an integer number: " );
        number = kbin.nextInt();
        counter=0;

    //Processing
    //Output
        while(number != SENTINEL)
        {
            counter++;
            System.out.print("Enter an  integer number: ");
            number = kbin.nextInt();
            sum += number;
        }

        if (counter !=0)
            System.out.println("\nCounter is: " + counter);
        else
            System.out.println("no input");

        average= sum/counter;
        System.out.println("The sum is " + sum);
        System.out.println("The average is " + average);

        System.out.println();

    }//end main
}//end class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T22:07:48.833

即使您声明`average`为`double`，`sum`and`counter`变量也是`int`，因此Java在将其分配给之前仍然使用[整数除法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)`average`，例如`5 / 10`结果`0`而不是`0.5`。

将变量之一转换`double`为除法之前强制进行浮点运算：

```
double average;

...
average = (double) sum / counter; 
```

您可以通过在进入 while 循环之前处理它来将第一个数字包含在计算中（如果它不是哨兵值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:07:40.910

```
average = sum/counter; 
```

该行正在执行*整数除法*（即，它切断了真实结果的小数部分）。你应该把它改成

```
average = (double) sum / counter;  // perform double division, not int division 
```

它首先转换`sum`为 a `double`，因此执行常规的双重除法。

请注意，您需要将`average`变量的类型更改为`double`.

* * *

只是为了说明我的观点：

```
int a = 3;
int b = 2;

System.out.println(a / b);
System.out.println((double) a / b); 
```

```
1
1.5

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:08:02.253

看起来问题出在上面的行中

```
average = sum/counter; 
```

即使你做`average`a `double`,`sum/counter`仍然是整数除法，它会产生一个整数答案。你可以试着说

```
double average = ((double)sum)/counter; 
```

另一种解决方案是制作`sum`or`counter`类型`double`并`average`制作`double`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T22:09:34.107

将总和和平均值初始化为加倍。使用 kbin.nextDouble()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T22:19:56.053

据说：**永远不要使用`double`or `float`，当需要确切的结果时。**你应该更喜欢`BigDecimal`。原语不使用大多数人期望的舍入模式。

# cakephp - CakePHP auth 组件在注销后重定向到登录

> ID：15799025
> 
> 赞同：5
> 
> 时间：2013-04-03T22:03:28.553
> 
> 标签：cakephp, cookies, cakephp-2.0

我开始使用 CakePHP，但在设置 Auth 组件时遇到问题。**每次用户注销时，cake 都会将他们重定向回登录。** 您会看到我在注销（）期间尝试删除/取消设置一些 cookie。这是因为我正在使用 Wordpress 站点设置单点登录，因此我希望用户从两个站点都注销。

我的应用控制器：

```
class AppController extends Controller {    

public $components = array(
    'Session',
    'Cookie',
    'Auth'      => array(
        'loginRedirect'     => array('controller' => 'questions', 'action' => 'index'), 
        'logoutRedirect'    => array('controller' => 'pages', 'action' => 'display', 'home')            
    )
);
public function beforeFilter() {
    $this->Auth->allow('index', 'view', 'login', 'logout', 'display');
}
} 
```

用户控制器：

```
class UsersController extends AppController {

public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('add', 'logout', 'login');
} 
```

...

```
public function login() {
//who cares
}

public function logout() {

    $wp_cookie = grab_wp_cookie(); //this grabs a specific cookie
    $cookie_name = (isset($wp_cookie['name'])) ? $wp_cookie['name'] : NULL;
      //NONE OF THESE WORK...
    $this->Cookie->write($cookie_name, '', false, time()-3600);
    $this->Cookie->delete($cookie_name);
    $this->Cookie->destroy();

    $this->redirect($this->Auth->logout());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:50:16.827

您似乎无法在未登录的情况下访问该页面。（您可以尝试在不登录的情况下访问 URL 来检查它）

`beforeFilter`解决方案是在您的 PagesController中添加此功能：

```
public function beforeFilter(){
    parent::beforeFilter();

    $this->Auth->allow();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T15:44:49.287

PagesController 将采用 AppController 的 beforeFilter。我可能会这样做：

```
/**
 * GET /users/logout
 */
public function logout() {
    $this->Auth->logout();
    $this->redirect(array('controller' => 'pages', 'action' => 'display', 'home'));
} 
```

您不需要允许注销，因为注销没有视图。您的应用控制器 beforeFilter 应如下所示：

```
public function beforeFilter() {
    $this->Auth->allow('index', 'view', 'display');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T11:04:40.483

尝试使用：

```
return $this->redirect($this->Auth->logout()); 
```

在中找到片段： [简单的身份验证和授权组件](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

并且不要忘记从 beforeFilter 中删除“Login”和“logOut”。

# javascript - 文本框的固定标题

> ID：15799026
> 
> 赞同：0
> 
> 时间：2013-04-03T22:03:34.850
> 
> 标签：javascript, jquery, html, css, javascript-events

当您缩小浏览器窗口时，您会看到不同的布局....下来....我使用了另一个示例中的代码，但问题是当我用我的新代码实现它时它不起作用....我正在尝试使用数据表搜索框....不知道是什么我的代码错了....

[http://jsfiddle.net/bz2C4/11/](http://jsfiddle.net/bz2C4/11/)

```
$(function() {
        var search = $('.dataTables_filter').detach();
        $('.page-title').before(search);
        search.css('margin-left','0');

        var div = $('.dataTables_filter');
                var start = $(div).offset().top;

                $.event.add(window, "scroll", function() {
                    var p = $(window).scrollTop();
                    $(div).css('position', ((p) > start) ? 'fixed' : 'static');
                    $(div).css('top', ((p) > start) ? '0px' : '');
                });
    }); 
```

# c# - 如何格式化具有更多数字的双精度数？

> ID：15799028
> 
> 赞同：1
> 
> 时间：2013-04-03T22:03:42.243
> 
> 标签：c#, double, number-formatting

我有一个双精度值，我想将其转换为超过默认 15 位数字的字符串。我怎样才能做到这一点？

```
(1.23456789987654321d).ToString(); // 1.23456789987654
(12.3456789987654321d).ToString(); // 12.3456789987654
(1.23456789987654321d).ToString("0.######################################"); // 1.23456789987654
(1.23456789987654321d).ToString("0.0000000000000000000000000000000"); // 1.2345678998765400000000000000000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T22:08:57.197

> 我有一个双精度值，我想将其转换为超过默认 15 位数字的字符串。

为什么？15位数之后基本上就是垃圾了。您可以使用我的课程获得*确切的*[`DoubleConverter`](http://pobox.com/~skeet/csharp/DoubleConverter.cs)值：

```
string exact = DoubleConverter.ToExactString(value); 
```

...但在 15 位数之后，剩下的只是噪音。

如果您想要超过 15 位有效数字的*有意义*数据，请使用`decimal`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:22:59.593

使用 double 是不可能的，因为它不支持超过 15 位的精度。您可以尝试使用十进制数据类型：

```
using System;

namespace Code.Without.IDE
{
    public class FloatingTypes
    {
        public static void Main(string[] args)
        {
            decimal deci = 1.23456789987654321M;
            decimal decix = 1.23456789987654321987654321987654321M;
            double doub = 1.23456789987654321d;
            Console.WriteLine(deci); // prints - 1.23456789987654321
            Console.WriteLine(decix); // prints - 1.2345678998765432198765432199
            Console.WriteLine(doub); // prints - 1.23456789987654
        }
    }
} 
```

# c# - 在随后的循环中调用 Prepare 会伤害、帮助还是没有区别？

> ID：15799029
> 
> 赞同：1
> 
> 时间：2013-04-03T22:03:45.047
> 
> 标签：c#, sql-server-ce

使用此代码，它位于 foreach 块内：

```
if (!First)
{
    cmd.Parameters[0].Value = Dept.AccountID;
    cmd.Parameters[1].Value = Dept.AccountName;
    // should this call cmd.Prepare() too?
}

if (First)
{
    cmd.Parameters.Add("@account_id", Dept.AccountID);
    cmd.Parameters.Add("@name",Dept.AccountName); 
    cmd.Prepare();
    First = false;
} 
```

...我在“不是第一个”条件的末尾添加了评论。

是否应该每次都调用 Prepare()，或者当 First 为 true 时调用 Prepare() 是否足以满足每个后续循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:50:24.397

一次调用 cmd.Prepare() 就足够了。它不关心参数值，只关心参数大小。多次调用它不会引起问题，但也没有必要。

# java - 如何使我的数据库连接类允许并发使用

> ID：15799030
> 
> 赞同：0
> 
> 时间：2013-04-03T22:03:45.380
> 
> 标签：java, class, concurrency, thread-safety, database-connection

我创建了一个名为的类`databaseconnect`，它负责：连接到数据库、填充组合框的方法、身份验证方法、插入、删除、修改方法......

我遇到的问题是我实际上只能使用这个类一次。

例如，我创建了一个`JFrame`名为**Login**，在这个 JFrame 中我使用“databaseconnect”来调用它的方法`authentification`。

在另一个`JFrame`我调用“databaseconnect”来填充组合框并在表格中填充数据。

但是当我`databaseconnect`多次使用“”时，程序停止运行。

这是代码示例：

1-`Login`形式：

```
 private void LoginActionPerformed(java.awt.event.ActionEvent evt) {                                      
    con=new databaseconnect();
    String a=u.getText();
    String b=pas.getText();
    con.authentification(a,b); 
    this.setVisible(false); 
} 
```

2-在另一个名为`Client`：

```
public Client() {
  databaseconnect con= new databaseconnect();
 initComponents();

          con.opencn();
       con.fillcombo(combobox);
  } 
```

现在当我运行这个程序时它没有打开

3-数据库连接： `Databaseconnect`类：

```
public class databaseconnect extends Login 
{

Admin ad=new Admin();

Client cl= new Client();

String url="jdbc:mysql://localhost:3307/bookstore";
String driver="com.mysql.jdbc.Driver";

String user="root";
String pass="root";
Connection cn;

public void opencn()
{
try
    {
        Class.forName(driver).newInstance();
        cn=DriverManager.getConnection(url,user,pass);
          System.out.println("Connected To Database");        
    }catch(Exception e)
    {
           System.out.println("Error Connecting To Database");

    }
}
public void authentification(String a, String b)
{

   String sql="SELECT * from admin_login ";
      try{

         Statement stmt=cn.createStatement();
         ResultSet rs = stmt.executeQuery(sql);

         System.out.println(sql);
       String resultat="";
   while(rs.next()) 
     {
         System.out.println(a);
       System.out.println(b);
       String uname= rs.getString("username");
       String p= rs.getString("password");

         if ((uname.equals(a)) && (p.equals(b)))
         {

         System.out.println("Login Successful"); 

       ad.setVisible(true);

         }
         else{
             System.out.println("wrong username/password");
         }

     }
        }catch(Exception e)
    {
       System.out.println(e.getMessage());     
    }

   }
 public void fillcombo(JComboBox cmb)
{ String sql= "SELECT * from client";

    try{
        opencn();
    Statement st=cn.createStatement();

    ResultSet rs=st.executeQuery(sql);
    while(rs.next())
    {

        cmb.addItem(rs.getString("Client_Name"));
    }
      }catch(SQLException e){
         System.out.println(e.getMessage());
      }
           }

         } 
```

先感谢您 ：）

# symfony - 在 Symfony2 中覆盖实体管理器

> ID：15799031
> 
> 赞同：1
> 
> 时间：2013-04-03T22:03:48.003
> 
> 标签：symfony

**更新以反映讨论**

我想实现一些自定义逻辑来选择正确的实体管理器。我认为这就像覆盖doctrine.class 参数、扩展Doctrine\Bundle\DoctrineBundle\Registry 和覆盖getManager() 方法一样简单。但是，当我这样做时，我收到以下错误：

```
ErrorException: Warning: strtolower() expects parameter 1 to be string, object given in /Applications/MAMP/htdocs/nmevent/app/bootstrap.php.cache line 119 
```

这是代码：

```
<?php

namespace NM\Bundle\MultiTenantBundle\Doctrine;

use Doctrine\Bundle\DoctrineBundle\Registry;

class TenantRegistry extends Registry
{
    /**
     * {@inheritdoc}
     *
     * @throws \InvalidArgumentException
     */

    public function getManager($name = null)
    {
        if (null === $name) {
            $name = $this->defaultManager;
        }

        $managers = $this->getManagers();

        if (!isset($managers[$name])) {
            throw new \InvalidArgumentException(sprintf('Doctrine %s Manager named "%s" does not exist.', $this->getName(), $name));
        }

        return $this->getService($managers[$name]);
    }
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:42:46.797

您正试图在第**21**行获取该类的`name`不存在属性：`TenantRegistry`

 **```
 here
throw new \InvalidArgumentException(sprintf(                 ↓
    'Doctrine %s Manager named "%s" does not exist.', $this->name, $name)); 
```

**更新**：

属性`name`在类中定义，`AbstractManagerRegistry`并且具有私有访问权限。因此，您无法直接获取此属性。请改用该`getName()`方法。**

# algorithm - 插入排序与选择排序

> ID：15799034
> 
> 赞同：129
> 
> 时间：2013-04-03T22:04:08.553
> 
> 标签：algorithm, sorting, insertion-sort, selection-sort

我试图了解插入排序和选择排序之间的区别。

它们似乎都有两个组成部分：未排序列表和排序列表。他们似乎都从未排序的列表中取出一个元素并将其放入已排序列表的适当位置。我看过一些网站/书籍说选择排序通过一次交换一个来做到这一点，而插入排序只是找到正确的位置并插入它。但是，我看到其他文章说了什么，说插入排序也可以交换。因此，我很困惑。有没有规范的来源？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-04-03T22:07:26.610

## 选择排序：

给定一个列表，取出当前元素并将其与当前元素右侧的最小元素交换。 ![选择排序](https://i.stack.imgur.com/1SKb2.jpg)

## 插入排序：

给定一个列表，取出当前元素并将其插入列表的适当位置，每次插入时调整列表。这类似于在纸牌游戏中排列纸牌。 ![插入排序](https://i.stack.imgur.com/CK6vC.jpg)

选择排序的时间复杂度总是`n(n - 1)/2`，而插入排序的时间复杂度更好，因为它的最坏情况复杂度是`n(n - 1)/2`。一般来说，它会进行较少或相等的比较`n(n - 1)/2`。

来源：[http ://cheetahonfire.blogspot.com/2009/05/selection-sort-vs-insertion-sort.html](http://cheetahonfire.blogspot.com/2009/05/selection-sort-vs-insertion-sort.html)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-04-03T22:42:50.187

插入排序和选择排序都有一个外循环（在每个索引上）和一个内循环（在索引子集上）。内部循环的每一遍都将已排序的区域扩展一个元素，代价是未排序的区域，直到它用完未排序的元素。

不同之处在于内部循环的作用：

*   在选择排序中，内部循环位于*未排序*的元素之上。每遍选择一个元素，并将其移动到其最终位置（在排序区域的当前末端）。

*   在插入排序中，内循环的每一次遍历都会遍历已*排序*的元素。已排序的元素会被替换，直到循环找到插入下一个未排序元素的正确位置。

因此，在选择排序中，排序的元素按输出顺序找到，一旦找到就留在原地。相反，在插入排序中，*未排序*的元素保持原位，直到按输入顺序被消耗，而排序区域的元素不断移动。

就交换而言：选择排序每次通过内部循环进行一次交换。插入排序通常将要插入的元素保存在内循环`temp` *之前*，为内循环留出空间将已排序的元素向上移动一个，然后复制`temp`到插入点。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2018-10-02T15:06:12.583

**选择排序**
假设有一组以特定/随机方式写入的数字，假设我们要按递增顺序排列..所以，一次取一个数字并用最小的数字替换它们。在列表中可用。通过执行此步骤，我们最终会得到我们想要的结果。

[![在此处输入图像描述](https://i.stack.imgur.com/mGSJZ.gif)](https://i.stack.imgur.com/mGSJZ.gif)

**插入排序**
记住类似的假设，但唯一的区别是这次我们一次选择一个数字并将其插入预排序的部分，这减少了比较，因此效率更高。

[![在此处输入图像描述](https://i.stack.imgur.com/k8kmg.gif)](https://i.stack.imgur.com/k8kmg.gif)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-04-03T22:55:37.090

混淆可能是因为您将排序*链表*的描述与排序*数组*的描述进行比较。但我不能确定，因为你没有引用你的消息来源。

理解排序算法最简单的方法通常是获取算法的详细描述（不是模糊的东西，比如“这种排序使用交换。某处。我没说在哪里”），拿一些扑克牌（5-10 应该足够了对于简单的排序算法），并手动运行算法。

选择排序：扫描未排序的数据，寻找最小的剩余元素，然后将其交换到紧跟排序数据的位置。重复直到完成。如果对列表进行排序，则不需要将最小元素交换到位，而是可以将列表节点从其旧位置移除并将其插入新位置。

插入排序：取紧跟在排序后的数据的元素，扫描排序后的数据，找到放置的地方，然后放在那里。重复直到完成。

插入排序*可以*在其“扫描”阶段使用交换，但不是必须的，而且这不是最有效的方式，除非您对具有以下数据类型的数组进行排序： (a) 不能移动，只能复制或交换；(b) 复制比交换更昂贵。如果插入排序确实使用交换，它的工作方式是同时搜索该位置*并将*新元素放在那里，通过重复将新元素与它之前的元素交换，只要它之前的元素大于它。一旦你到达一个不大的元素，你就找到了正确的位置，然后你继续下一个新元素。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-12-27T17:55:12.360

两种算法的逻辑非常相似。它们在数组的开头都有一个部分排序的子数组。唯一的区别是它们如何搜索要放入排序数组的下一个元素。

*   **插入排序**：在正确位置*插入下一个元素；*

*   **选择排序**：*选择*最小的元素并与当前项交换；

此外，与**选择排序相反，****插入排序**是稳定的。

 **我在 python 中实现了两者，值得注意的是它们有多么相似：

```
def insertion(data):
    data_size = len(data)
    current = 1
    while current < data_size:
        for i in range(current):
            if data[current] < data[i]:
                temp = data[i]
                data[i] = data[current]
                data[current] = temp

        current += 1

    return data 
```

只需稍作改动，就可以创建选择排序算法。

```
def selection(data):
    data_size = len(data)
    current = 0
    while current < data_size:
        for i in range(current, data_size):
            if data[i] < data[current]:
                temp = data[i]
                data[i] = data[current]
                data[current] = temp

        current += 1

    return data 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-07-21T16:36:21.100

简而言之，

**选择排序：**从未排序的数组中选择第一个元素并将其与剩余的未排序元素进行比较。它类似于冒泡排序，但不是交换每个较小*的元素，而是更新最小元素索引并在每个循环结束时交换它*。

**插入排序：**与选择排序相反，它从未排序的子数组中选择第一个元素并将其与已排序的子数组进行比较，然后*插入找到的最小元素并将所有已排序的元素从其右侧移动到第一个未排序的元素。*

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-12-25T18:52:30.523

两种算法通常都是这样工作的

第 1 步：然后从未排序列表中取出下一个未排序元素

第2步：将其放在排序列表中的正确位置。

对于一种算法，其中一个步骤更容易，反之亦然。

**插入排序**：我们取出未排序列表的第一个元素，将其放入已排序列表的*某处*。我们知道将下一个元素放在哪里（未排序列表中的第一个位置），但是需要一些工作才能找到将它放在哪里（*某处*）。第 1 步很简单。

**选择排序**：我们从未排序列表中的*某处*获取元素，然后将其放在已排序列表的最后位置。我们需要找到下一个元素（它很可能不在未排序列表的第一个位置，而是在*某处*），然后将其放在已排序列表的末尾。第 2 步很简单

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-09-27T21:57:26.620

简而言之，我认为选择排序首先搜索数组中的最小值，然后进行交换，而插入排序取一个值并将其与留给它的每个值（在它后面）进行比较。如果值较小，则交换。然后，再次比较相同的值，如果它小于它后面的值，则再次交换。我希望这是有道理的！

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-08-05T18:26:23.337

这两种排序算法的选择归结为使用的数据结构。

当您使用数组时，请使用选择排序（尽管为什么，何时可以使用 qsort？）。当您使用链表时，请使用插入排序。

这是因为：

*   链表遍历比数组更昂贵。
*   链表插入比数组便宜得多。

插入排序将新值注入到已排序段的中间。因此，需要“推回”数据。但是，当您使用链表时，通过扭曲 2 个指针，您有效地将整个列表推回。在数组中，您必须执行 n - i 交换以将值推回，这可能非常昂贵。

选择排序总是追加到末尾，所以在使用数组时不存在这个问题。因此，数据不需要被“推回”。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-02-12T02:08:52.097

我再试一次：考虑一下在几乎排序数组的幸运情况下会发生什么。

在排序时，数组可以被认为有两部分：左侧 - 已排序，右侧 - 未排序。

插入排序 - 选择第一个未排序的元素并尝试在已排序的部分中为它找到一个位置。由于您从右到左搜索，很可能会发生您要比较的第一个排序元素（最大的元素，左侧最右边的元素）小于选择的元素，因此您可以立即继续下一个未排序的元素。

选择排序 - 选择第一个未排序的元素并尝试找到整个未排序部分的最小元素，如果需要，交换这两个元素。问题是，由于正确的部分是未排序的，因此您每次都必须考虑每个元素，因为您无法确定是否存在比选择的元素更小的元素。

顺便说一句，这正是[heapsort对选择排序的改进——由于](http://en.wikipedia.org/wiki/Heapsort)[heap](http://en.wikipedia.org/wiki/Heap_(data_structure))，它能够更快地找到最小的元素。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-05-27T13:47:37.627

选择排序：当您开始构建已排序的子列表时，该算法确保已排序的子列表始终是完全排序的，不仅在它自己的元素方面，而且在完整的数组方面，即已排序和未排序的子列表。因此，从未排序的子列表中找到的新的最小元素将被附加到已排序的子列表的末尾。

插入排序：算法再次将数组分成两部分，但这里的元素是从第二部分挑选出来的，并在正确的位置插入到第一部分。这永远不能保证第一部分是根据完整数组排序的，尽管在最后一遍中，每个元素当然都处于正确的排序位置。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-12-02T14:38:55.853

基本上插入排序通过一次比较两个元素来工作，选择排序从整个数组中选择最小元素并对其进行排序。

从概念上讲，插入排序通过比较两个元素继续对子列表进行排序，直到整个数组被排序，而选择排序选择最小元素并将其交换到第一个位置第二个最小元素到第二个位置，依此类推。

插入排序可以显示为：

```
 for(i=1;i<n;i++)
        for(j=i;j>0;j--)
            if(arr[j]<arr[j-1])
                temp=arr[j];
                arr[j]=arr[j-1];
                arr[j-1]=temp; 
```

选择排序可以显示为：

```
 for(i=0;i<n;i++)
        min=i;
        for(j=i+1;j<n;j++)
        if(arr[j]<arr[min])
        min=j;
        temp=arr[i];
        arr[i]=arr[min];
        arr[min]=temp; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-08-05T17:36:15.963

虽然选择排序和插入排序的时间复杂度是一样的，都是n(n - 1)/2。平均性能插入排序更好。在我的 i5 cpu 上使用随机 30000 个整数进行测试，选择排序平均需要 1.5 秒，而插入排序平均需要 0.6 秒。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-11-27T17:04:24.860

插入排序的内部循环遍历已经排序的元素（与选择排序相反）。这允许它在**找到正确位置时中止内部循环**。意思就是：

1.  在一般情况下，内部循环只会遍历其一半的元素。
2.  如果数组几乎已排序，内部循环将更快中止。
3.  如果数组已经排序，内部循环将立即中止，在这种情况下，插入排序的复杂性是线性的。

选择排序必须始终遍历所有内部循环元素。这就是为什么插入排序比选择排序更受欢迎的原因。但是，另一方面，选择排序进行的元素交换要少得多，这在某些情况下可能更重要。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-11-28T13:55:26.267

插入排序和选择排序都在前面有一个排序的列表，在最后有一个未排序的列表，算法的作用也相似：

1.  从未排序的列表中取出一个元素
2.  将其放入排序列表

区别在于：

*   **插入排序**取未排序列表的第一个元素，然后在排序列表中进行比较和交换以确保元素进入正确的位置，工作主要在步骤＃2中进行插入

> ```
> auto insertion_sort(vector<int>& vs)
> {
>   for(int i=1; i < vs.size(); ++i)
>   {
>     for(int j=i; j > 0; --j)
>     {
>       if(vs[j] < vs[j-1]) swap(vs[j], vs[j-1]);
>     }
>   }
>   return vs;
> } 
> ```

*   **选择排序**比较并标记未排序列表的最小元素，然后将其与未排序列表的第一个元素交换，实际上将此元素作为已排序列表的一部分 - 工作主要在步骤＃1中进行选择

> ```
> auto selection_sort(vector<int>& vs)
> {
>   for(int i = 0; i < vs.size(); ++i)
>   {
>     int iMin = i;
>     for(int j=i; j < vs.size(); ++j)
>     {
>       if(vs[j] < vs[iMin]) iMin = j;
>     }
>     swap(vs[i], vs[iMin]);
>   }
>   return vs;
> } 
> ```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-07T08:50:32.453

我想从上面用户@thyagostall 的一个几乎很好的答案中添加一点改进。在 Python 中，我们可以进行一行交换。下面的 selection_sort 也已通过将当前元素与右侧的最小元素交换来修复。

在插入排序中，我们将从第二个元素开始运行外循环，并在当前元素的左侧执行内循环，将较小的元素向左移动。

```
def insertion_sort(arr):
    i = 1
    while i < len(arr):
        for j in range(i):
            if arr[i] < arr[j]:
                arr[i], arr[j] = arr[j], arr[i]
    i += 1 
```

在选择排序中，我们也运行外循环，但不是从第二个元素开始，而是从第一个元素开始。然后内部循环将当前 + i 元素循环到数组的末尾以找到最小元素，我们将与当前索引交换。

```
def selection_sort(arr):
    i = 0
    while i < len(arr):
        min_idx = i
        for j in range(i + 1, len(arr)):
            if arr[min_idx] > arr[j]:
                min_idx = j
        arr[i], arr[min_idx] = arr[min_idx], arr[i]
    i += 1 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-09-22T16:51:20.890

插入排序会做更多的交换选择。这是一个例子：

[![在此处输入图像描述](https://i.stack.imgur.com/TkVxD.png)](https://i.stack.imgur.com/TkVxD.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-07-08T11:20:22.793

插入排序不交换东西。即使它使用了一个临时变量，使用 temp var 的目的是当我们发现索引处的值与其前一个索引的值相比要小时，我们将较大的值移动到较小值的位置会覆盖东西的索引。然后我们使用 temp var 在前一个索引处进行替换。示例：10、20、30、50、40。迭代 1：10、20、30、50、50。[temp = 40] 迭代 2：10,20、30、40（温度值）、50。所以，我们只需从某个变量在所需位置插入一个值。

但是当我们考虑选择排序时，我们首先找到具有较低值的索引并将该值与第一个索引中的值交换，并不断重复交换直到所有索引都被排序。这与传统的两个数字交换完全相同。示例：30, 20 ,10, 40, 50。迭代 1：10,20,30,40,50。这里 temp var 专门用于交换。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-06-19T14:37:22.790

一个简单的解释可能如下：

**Given**：未排序的数组或数字列表。

**问题陈述**：按升序对数字列表/数组进行排序，以了解选择排序和插入排序之间的区别。

**插入排序：**您可以从上到下查看列表以便于理解。我们将第一个元素视为我们的初始最小值。现在，我们的想法是我们线性遍历该列表/数组的每个索引，以找出任何索引处是否有任何其他元素的值小于初始最小值。如果我们找到这样的值，我们只需交换它们索引处的值，即假设 15 是索引 1 处的最小初始值，并且在索引的线性遍历期间，我们遇到一个值较小的数字，例如索引 9 处的 7 . 现在，索引 9 处的这个值 7 与索引 1 交换，索引 1 的值是 15。此遍历将继续与当前索引的值与剩余索引进行比较以换取较小的值。这一直持续到列表/数组的倒数第二个索引，

**选择排序：**假设列表/数组的第一个索引元素已排序。现在从第二个索引处的元素，我们将它与之前的索引进行比较，看看该值是否更小。遍历可以可视化为两部分，已排序和未排序。一种是可视化列表/数组中给定索引从未排序到排序的比较检查。假设您在索引 1 处具有值 19，在索引 3 处具有值 10。我们考虑从未排序到已排序的遍历，即从右到左。所以，假设我们必须在索引 3 处排序。当我们从右到左比较时，我们看到它的值小于索引 1。一旦确定，我们只需将索引 3 的数字 10 放在索引 1 的值为 19 的位置。索引 1 处的原始值 19 向右移动了一个位置。

*我没有添加任何代码，因为问题似乎是关于理解遍历方法的概念。*

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-03-26T22:01:02.407

它们的共同点是它们都使用分区来区分数组的已排序部分和未排序部分。

不同之处在于，通过选择排序，您可以保证在将元素添加到已排序分区时，数组的已排序部分不会改变。

原因是，因为选择搜索未排序集的最小值并将其添加到排序集的最后一个元素之后，从而将排序集增加1。

另一方面，插入只关心遇到的下一个元素，即数组未排序部分的第一个元素。它将获取此元素并简单地将其放入已排序集中的适当位置。

对于仅部分排序的数组，插入排序通常总是更好的候选者，因为您正在浪费操作来找到最小值。

**结论：**

**选择排序**通过在未排序部分中找到最小元素来递增地将一个元素添加到末尾。

**插入排序**将在未排序部分中找到的第一个元素传播到已排序部分的任何位置。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2017-02-01T19:00:48.790

用外行的话来说，（可能是获得对问题的高级理解的最简单方法）

冒泡排序类似于站成一排并试图按高度对自己进行排序。您不断与您旁边的人切换，直到您在正确的位置。这从左侧（或右侧，具体取决于实现）一直进行，并且您不断切换，直到每个人都被排序。

然而，在选择排序中，您正在做的事情类似于安排一手牌。您查看卡片，取出最小的一张，将其一直放在左侧，依此类推。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2018-04-24T15:33:31.937

selection - 选择特定项目（最低）并将其与第 i（迭代次数）元素交换。（即，第一，第二，第三......）因此，在一侧制作排序列表。

插入 - 比较第一个和第二个比较第三个和第二个和第一个比较第四个和第三个，第二个和第一个......

[比较所有排序的链接](https://www.toptal.com/developers/sorting-algorithms/)**

# c# - DataGridView 仅显示标题

> ID：15799035
> 
> 赞同：0
> 
> 时间：2013-04-03T22:04:14.057
> 
> 标签：c#, datagridview

我有一个 WinForms 应用程序，我试图让 DataGridView 在运行时填充。在我拥有的表单的 initializeComponent 代码下：

```
 _BackEndDataSet DS = new _BackEndDataSet();
 DataView theDataView = new DataView(DS.Tables["CLIENTS"]);
 dataGridViewClients.AutoGenerateColumns = true;
 dataGridViewClients.DataSource = theDataView; 
```

其中 _BackEndDataSet 是数据集，而 CLIENTS 是我想查看的表。

表的列显示但没有数据。

有任何想法吗？

# regex - 正则表达式替换几个特殊字符

> ID：15799037
> 
> 赞同：0
> 
> 时间：2013-04-03T22:04:27.980
> 
> 标签：regex

我正在尝试查找所有数字或字母以及`.`and`-`和 and的字符`_`

这是我尝试过的：

```
[^A-Za-z0-9\.\-\_] 
```

这不起作用。

当我做所有事情时，除了`-`和`_`

```
[^A-Za-z0-9\.] 
```

然后它确实有效

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:06:40.833

```
 /[\w\.\-]/ 
```

匹配单词字符（字母、数字、下划线）、点和`-`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:06:32.663

```
[^A-Za-z0-9\.\-_] 
```

下划线不需要转义。

# lambdaj - LambdaJ index() 和键类型转换

> ID：15799039
> 
> 赞同：1
> 
> 时间：2013-04-03T22:04:35.770
> 
> 标签：lambdaj

我刚开始研究 LambdaJ，马上就遇到了问题。我不认为我在做任何奇怪的事情，但我不知道该怎么做。

我有一个管理员列表：

```
List<Administrator> allAdmins; 
```

我有一张地图，我希望将这些管理员映射到：

```
Map<String, Administrator> adminIdToAdmin = new HashMap<String, Administrator>(); 
```

问题是 Administrator 类中的 ID 是 Long，而不是 String。所以，我尝试了以下方法：

```
adminIdToAdmin = index(allAdmins, on(Administrator.class).getAdministratorId().toString()); 
```

这是行不通的。它失败了：

```
ch.lambdaj.function.argument.ArgumentConversionException: Unable to convert the placeholder -2147483647 in a valid argument
    at ch.lambdaj.function.argument.ArgumentsFactory.actualArgument(ArgumentsFactory.java:92)
    at ch.lambdaj.function.convert.ArgumentConverter.<init>(ArgumentConverter.java:29)
    at ch.lambdaj.Lambda.index(Lambda.java:1133) 
```

如果我将地图更改为包含 Longs 并删除 toString()，错误就会消失。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:38:26.203

根据 Mario Fusco（LambdaJ 创建者）：

这是 lambdaj 的一个众所周知且有据可查的限制：您不能进一步引用像 Long 这样的最终类，因为它不可代理。

两种可用的解决方案是：

1.  将 getAdministratorIdAsString() 添加到管理员类
2.  编写自己的 Converter 并将其传递给 index 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T09:59:48.487

我遇到了完全相同的问题，具有相同的占位符值：-2147483647。我用对集合的经典迭代替换了将 lambdaj extract 方法应用于集合的所有元素的代码块，现在我的应用程序可以工作了。我猜这是与 om.googlecode.lambdaj lambdaj version 2.3.3 的 2.3.3 版本相关的错误。

之前（失败）

```
 return ch.lambdaj.Lambda.extract(sourceMsg.getAttachments(), on(Attachment.class)
                .getDataHandler().getDataSource()) 
```

（工作）之后

```
List<DataSource> lds= new ArrayList<DataSource>();
        Collection<Attachment> attachmentList = sourceMsg.getAttachments();
        for(Attachment a:attachmentList)
        {
            result.add(a.getDataHandler().getDataSource());
        }
        return lds; 
```

# php - func_get_args() 参数列表用法

> ID：15799043
> 
> 赞同：4
> 
> 时间：2013-04-03T22:04:53.163
> 
> 标签：php

PHP的[`func_get_args()`](http://php.net/manual/en/function.func-get-args.php)文档提到：

> 此函数现在可以在参数列表中使用。

谁能解释这意味着什么以及如何应用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:06:23.490

在 5.3 之前不可能做到这一点：

```
function foo($a,$b)
{
   var_dump(func_get_args());
} 
```

为了检索函数的参数（即出于调试目的），您必须`func_get_args`先将返回值分配给变量，然后才能使用实际值：

```
function foo($a,$b)
{
    $args = func_get_args();
    var_dump($args);
} 
```

`func_get_args`从 PHP 5.3 开始可以使用（不带临时变量）的立即返回值。

# c# - 如何解析 Axis XML 文件？

> ID：15799044
> 
> 赞同：0
> 
> 时间：2013-04-03T22:04:53.827
> 
> 标签：c#, asp.net, xml, rest

我在尝试解析使用 C# 中的 Axis Java Web 服务生成的 XML 文件时遇到了一些问题。该文件具有以下格式：

```
<ns:getAcctsDetailResponse xmlns:ns="http://paymentdata.com">
    <ns:return xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ax21="http://paymentdata.com/xsd" xsi:type="ax21:AcctsDetail">
    <ax21:Status>15</ax21:Status>
    <ax21:Name>John James</ax21:Name>
</ns:return>
</ns:getCustomerAcctsDetailResponse> 
```

我使用下面的代码尝试访问所需的元素，但得到以下错误：

> **':' 字符，十六进制值 0x3A，不能包含在名称中。**

```
XDocument xDoc = XDocument.Load(xml);
string accountName= xDoc.Root.Element("ns:return").Element("ax21:Name").Value; 
```

对你的帮助表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:54:01.560

我看到两个问题：

首先，该 XML 格式不正确。开始标签与结束标签`ns:getAcctsDetailResponse`不匹配`ns:getCustomerAcctsDetailResponse`。也许这是一个错字？

其次，您需要为命名空间做一些特殊的事情。尝试这样的事情：

```
XNamespace ns = "http://paymentdata.com"; 
XNamespace ax21 = "http://paymentdata.com/xsd";

XDocument xDoc = XDocument.Load(xml); 
string accountName = xDoc.Root.Element(ns + "return")
  .Element(ax21 + "Name").Value; 
```

# ruby - 试图删除在 Centos 中受保护的 yum

> ID：15799047
> 
> 赞同：8
> 
> 时间：2013-04-03T22:05:02.853
> 
> 标签：ruby, linux, centos, rvm

好吧，我正在尝试执行以下命令。

```
yum remove libffi-3.0.9-1.el5.rf.i386 
```

因为我需要那个文件（？），但是在使用 rvm 安装 ruby​​ 时遇到问题，因为 libffi-devel 是 rvm 安装 ruby​​ 的依赖项。

但是它给了我以下错误，当然它不会删除任何东西。

```
Error: Trying to remove "yum", which is protected
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

我已经尝试过 --skip-broken 并且得到了这个：

```
Error: Trying to remove "yum", which is protected
 You could try running: rpm -Va --nofiles --nodigest 
```

如您所见，我不是 Linux 专家，但我需要使用 rvm 安装 Ruby，但由于此错误而无法安装，你们中的任何人都知道我在做什么错吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T15:24:55.987

做我正在寻找的正确方法是：

```
rpm -e --nodeps PACKAGE 
```

在命令行中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-11T16:55:23.420

该命令`yum remove <package>` 删除包以及依赖它的任何包。

在您的情况下，您正在尝试删除一个包含许多其他包的包，包括`yum`包本身。就好像您运行`yum remove yum`，这就是您收到此错误消息的原因。

命令：

```
rpm -e --nodeps <package> 
```

可用于删除一个包而不删除依赖它的包，**但这显然会破坏所有这些其他包。**

> 使用 rpm --nodeps 安装或删除软件包可能会导致应用程序行为异常和/或崩溃，并可能导致严重的软件包管理问题，或者可能导致系统故障。

有关详细信息，请参阅[https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Removing.html](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Removing.html)

# php - PHP-SMTP 标头和用户参数

> ID：15799050
> 
> 赞同：1
> 
> 时间：2013-04-03T22:05:09.663
> 
> 标签：php, email, header, smtp

通过 smtp 发送邮件时，电子邮件标头中的“发件人”值是否应该与连接到主机服务器的用户名相同？

因为主机服务器上的用户邮件帐户正在用于发送邮件。所以我认为将“来自”的标题值放入正确的值。只是想要确认。

在这种情况下，我将它（mysmtp@mydomain.com）分配给 $mysmtpmail 分配给 $username 和 $from

```
// Setup mail + session parameters
$host = $mysmtphost;
$username = $mysmtpmail;
$password = $mysmtppass;
$from = $mysmtpmail;
$to = $myemail;
$subject = "Form Mail";
$body = $_POST['name'] . "\n <br />" . $_POST['email'] . "\n <br />" . $_POST['msg'];

// Assign header parameters
$headers = array ('From' => $from,
    'To' => $to,
     'Subject' => $subject,
    'Date'      => date('r', time()),);

// Assign Session Parameters
$mail = Mail::factory('smtp',
array ('host' => $host,
'port' => $port,
'auth' => true,
'username' => $username,
'password' => $password));

$mail->send($to, $headers, $body); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:40:41.977

理想情况下是的，发件人字段应该与用户名相同，除非用户选择了必须从中发送邮件的替代邮件 ID。

客户喜欢`outlook/thunderbird`给你一个选项来选择邮件需要发送的邮件ID。（这些ID是Outlook中已经配置的邮件ID，仅当配置超过1个ID时）

此外，rediffmail、outlook.com 等邮件程序使 ua 可以灵活地配置多个电子邮件 ID（通常通过设置`Pull mails`），并且在发送邮件时，您可以选择任何电子邮件 ID 作为邮件来源。理想情况下，此 ID 必须位于“来自”字段中。

因此，如果您要为任何支持此类功能的知名邮寄者发送邮件，请注意。

# directory - DOS命令删除文件夹YYY中所有名为XXX的文件夹

> ID：15799055
> 
> 赞同：0
> 
> 时间：2013-04-03T22:05:31.167
> 
> 标签：directory, dos

在YYY文件夹下，有很多不同名字的子文件夹，我想把XXX文件夹全部删掉，怎么办？

我知道`del /s YYY/XXX.*`，但它用于删除文件，而不是文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:26:45.043

从命令行：

```
for /D %f in (XXX*) do rmdir %f /s 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T22:11:35.500

您可以通过 CMD 行执行此操作。

```
RD /S /Q "Full Path of Folder" 
```

这是有关如何执行此操作的链接：[Link1](http://www.sevenforums.com/tutorials/55721-folder-delete-command-prompt.html)

# java - 如何返回 callableStatement 结果？

> ID：15799060
> 
> 赞同：0
> 
> 时间：2013-04-03T22:06:07.783
> 
> 标签：java, function, postgresql, plpgsql, callable-statement

我正在使用 PostgreSQL，并且我有一个返回记录的函数：

```
CREATE OR REPLACE FUNCTION fn_lisMatricula()
  RETURNS record AS
$BODY$
SELECT mat.codigo as codmatr, mat.codigoalumno as codal, mat.codigoempresa as codemp ,mat.codigopresentacion as codpre,
    mat.codigosecretaria as codsec, mat.fecha as fechamat, mat.estado as estadomat,
    mat.vigencia as vigmat, p.apellidos as apeAl,
    p.nombres as nomAl,razonsocial ,pre.codigocurso as codcur,cur.nombre as curso
    FROM matricula mat join alumno al on mat.codigoalumno = al.codigoalumno
    join persona p on  al.codigoalumno = p.codigo
    join persona pe on mat.codigoalumno = pe.codigo
    left join empresa emp on mat.codigoempresa = emp.codigo
    join presentacion pre on mat.codigopresentacion = pre.codigo
    join curso cur on cur.codigo = pre.codigocurso
    order by p.apellidos
$BODY$
  LANGUAGE sql VOLATILE 
```

我用这个来称呼它，因为我必须声明输出值的类型，这在 Postgres 中可以正常工作：

```
select * from fn_lisMatricula() as (codmatr integer,codal integer,codemp integer,codpre integer,codsec integer,fechamat date,
estadomat char,vigmat boolean,apeal varchar,nomal varchar,razonsocial varchar,codcur integer,curso varchar) 
```

但是要在 java 中的 callableStatement 中调用它，我使用：

```
proc = this.cn.prepareCall("{call fn_lisMatricula()}") 
```

但我得到一个 postgreSQL.exception：

> 返回 «record» 的函数需要列的定义列表

所以我使用preparedStatement在Java中临时解决了这个问题：

```
PreparedStatement ps;
String SQL = "select * from fn_lisMatricula() as (codmatr integer,codal integer,codemp integer,codpre integer,codsec integer,fechamat date,\n"
                    + "estadomat char,vigmat boolean,apeal varchar,nomal varchar,razonsocial varchar,codcur integer,curso varchar)";

ps = this.cn.prepareStatement(SQL); 
```

我想使用 callableStatement。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:24:01.973

SQL 要求在调用语句时知道返回类型。如果您将返回类型声明为匿名记录，则必须在每次调用时提供列定义列表。非常笨拙。
而是在函数中声明返回类型。

这是与所有详细信息密切相关的答案：
[PostgreSQL：错误：42601：返回“记录”的函数需要列定义列表](https://stackoverflow.com/questions/8605174/postgresql-error-42601-a-column-definition-list-is-required-for-functions-ret/8611675#8611675)

这里有一些针对各种半动态返回类型的高级黑魔法：
[重构 PL/pgSQL 函数以返回各种 SELECT 查询的输出](https://stackoverflow.com/questions/11740256/refactor-a-pl-pgsql-function-to-return-the-output-of-various-select-queries/11751557#11751557)

需要明确的是：返回类型的定义与 PL/pgSQL 和 SQL 函数的工作方式相同。

### 询问

这实际上可能只是一个[**SQL 函数**](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html)，这更简单：

```
CREATE OR REPLACE FUNCTION fn_lis_matricula()
  RETURNS TABLE (
        codmatr integer
      , codal integer
      , codemp integer
      , codpre integer
      , codsec integer
      , fechamat date
      , estadomat char
      , vigmat boolean
      , apeal varchar
      , nomal varchar
      , razonsocial varchar
      , codcur integer
      , curso varchar) AS
$BODY$
SELECT mat.codigo               -- as codmatr
      , mat.codigoalumno        -- as codal
      , mat.codigoempresa       -- as codemp
      , mat.codigopresentacion  -- as codpre
      , mat.codigosecretaria    -- as codsec
      , mat.fecha               -- as fechamat
      , mat.estado              -- as estadomat
      , mat.vigencia            -- as vigmat
      , p.apellidos             -- as apeAl
      , p.nombres               -- as nomAl
      , emp.razonsocial
      , pre.codigocurso         -- as codcur
      , cur.nombre              -- as curso
FROM matricula mat
JOIN alumno al ON mat.codigoalumno = al.codigoalumno
JOIN persona p ON al.codigoalumno = p.codigo
JOIN persona pe ON mat.codigoalumno = pe.codigo
JOIN presentacion pre ON mat.codigopresentacion = pre.codigo
JOIN curso cur ON cur.codigo = pre.codigocurso
LEFT JOIN empresa emp ON mat.codigoempresa = emp.codigo
ORDER BY p.apellidos;
$BODY$ 
LANGUAGE sql; 
```

*   请注意，函数体中的列别名只是噪音。它们被丢弃以支持`RETURN`类型中的名称。只有列的位置是相关的。我将别名作为文档注释留下。

*   我的常备建议是不要在 PostgreSQL 中使用 CamelCase 标识符。**当没有被双引号**包围时，它们将折叠为小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:09:49.970

我用这个解决了它......我从create table子句中读了一些......谢谢=）

```
CREATE OR REPLACE FUNCTION fn_lisMatricula()
  RETURNS TABLE (codmatr integer,codal integer,codemp integer,codpre integer,codsec integer,fechamat date,
estadomat char,vigmat boolean,apeal varchar,nomal varchar,razonsocial varchar,codcur integer,curso varchar) AS
$BODY$
BEGIN
RETURN QUERY
SELECT mat.codigo as codmatr, mat.codigoalumno as codal, mat.codigoempresa as codemp ,mat.codigopresentacion as codpre,
    mat.codigosecretaria as codsec, mat.fecha as fechamat, mat.estado as estadomat,
    mat.vigencia as vigmat, p.apellidos as apeAl,
    p.nombres as nomAl,emp.razonsocial ,pre.codigocurso as codcur,cur.nombre as curso
    FROM matricula mat join alumno al on mat.codigoalumno = al.codigoalumno
    join persona p on  al.codigoalumno = p.codigo
    join persona pe on mat.codigoalumno = pe.codigo
    left join empresa emp on mat.codigoempresa = emp.codigo
    join presentacion pre on mat.codigopresentacion = pre.codigo
    join curso cur on cur.codigo = pre.codigocurso
    order by p.apellidos;
END
$BODY$ 
LANGUAGE plpgsql;

select * from fn_lisMatricula() 
```

# c++ - 具有范围限定符的模板语法的含义

> ID：15799075
> 
> 赞同：4
> 
> 时间：2013-04-03T22:06:49.097
> 
> 标签：c++, templates, syntax, semantics

我最近看到了这个：

```
template <class U> struct ST
{
...
};
template <class U, class V>
struct ST<U V::*>
{
...
}; 
```

我假设第二个模板是第一个模板的特化。

但是`U V::*`???的语义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:08:36.493

这意味着“指向成员类型为的类`V`的成员`U`”。例如，

```
struct X
{
    int x = 0;
};

// ...

int X::*p = &X::x;     // <== Declares p as pointer-to-member

ST<decltype(&X::x)> s; // <== Will instantiate your template specialization,
                       //     with U = int and V = X

ST<int X::*> t;        // <== Will instantiate your template specialization,
                       //     with U = int and V = X 
```

# linux - 在 Linux 中通过蓝牙从 Neurosky Mindset 访问串行数据

> ID：15799076
> 
> 赞同：1
> 
> 时间：2013-04-03T22:06:52.130
> 
> 标签：linux, bluetooth, serial-port

我正在尝试通过蓝牙访问从 Neurosky Mindset 传输的串行数据流。这是使用此处提到的 ThinkGear 通信协议的一个步骤：

[http://developer.neurosky.com/docs/doku.php?id=which_api_is_right_for_me](http://developer.neurosky.com/docs/doku.php?id=which_api_is_right_for_me)

有几个程序应该为我做这件事（Puzzlebox、Mindstream 等），我要么有明显无法解决的依赖问题，要么他们没有完全按照我的意愿做。

我可以使用 blueman（特别是 blueman-manager）将 Mindset 与我的机器配对，我可以将串行端口连接到 /dev/rfcomm0。我首先想知道的是：我如何从这个数据流中读取数据。如果我在设备上运行 sdptool 记录，我会得到以下输出：

服务名称：Dev B Service RecHandle：0x10005 服务类 ID 列表：“串行端口”（0x1101） 协议描述符列表：“L2CAP”（0x0100）“RFCOMM”（0x0003） 通道：3 语言库属性列表：code_ISO639：0x656e 编码： 0x6a base_offset: 0x100

（我得到的不止这些，但那是我想要访问的服务。）

我想我的主要问题是：如果 cat /dev/rfcomm0 什么都不显示，这是否意味着没有数据正在传输？问题是因为它是原始的而没有显示吗？如果正在传输，是否有一个命令可以保证给我任何串行数据？是否有启动 SPP 传输的蓝牙标准命令（我已经搜索了 bluez 的文档，但效果并不理想）？

我已将所有内容都以 root 和常规方式运行，因此似乎无法修复它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:43:22.973

好的，花了一些时间来让 MindSet 可靠地连接起来。

命令行蓝牙工具或多或少没用。读取 Mindset 的唯一可重复方法（通过 BlueMan 配对后）是这样做：

```
 bash$ sudo /etc/init.d/bluetooth stop
  bash$ sudo /etc/init.d/bluetooth start
  bash$ sudo rfcomm connect /dev/rfcomm0 00:13:##:##:##:## 1
  bash$ ./mindset_capture.rb 
```

...但是在接收到有效的 ThinkGear 数据包之前就达到了 EOF。

相反，使用 Blueman 配对。

设置：

1.  bash$ blueman-manager &
2.  在 MindSet 上启用配对
3.  在 BlueMan 中单击搜索
4.  选择 MindSet 设备
5.  点击配对
6.  输入密码 (0000)

连接：

1.  bash$ blueman-manager &
2.  右键单击 MindSet 并选择“连接到：Dev B”（串行连接器图标）
3.  运行捕获实用程序（例如 bash$ ./mindset_capture.rb）
4.  右键单击 MindSet 并选择“断开连接：开发 B”
5.  退出布鲁曼
6.  重新启动蓝牙以释放 rfcomm0（感谢 BlueMan！）

    bash$ sudo /etc/init.d/蓝牙停止；sudo /etc/init.d/蓝牙启动

拥有一个完全命令行驱动的解决方案不是更好吗？是的，是的。不幸的是，Linux 上的蓝牙堆栈似乎处于 GUI 工具和命令行工具不合作的状态 - 并且命令行工具不支持配对（* 更新 - 见评论）。

从设备中读取很简单。它连续传输字节，因此从它读取，直到遇到两个 SYNC 字节 (0xAA)，这标志着数据包的开始。数据包的结构在 MDT 中提供的**minding_communications_protocol.pdf**中进行了描述。

从 MindSet 读取的 Ruby 代码：

```
 require 'rubygems'      # gem install serialport
  require 'serialport' 
  conn = SerialPort.new "/dev/rfcomm0", 57600
  while true
    next if conn.readbyte != 0xAA
    next if conn.readbyte != 0xAA
    while true
      c = conn.readbyte
      break if c == 0xAA
      puts "%02X" % c
    end
  end 
```

它并不完美，因为它没有真正的解析，但这就是从设备读取字节的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T13:44:41.517

经过一番麻烦后，我发现许多新的微型蓝牙适配器（包括耳机随附的和我已经拥有的）中的芯片组无法处理插入 USB 集线器，必须直接插入树莓派——尽管它确实出现在设备列表中。一旦我将它从集线器 bluez-simple-agent 中移出，它就可以很好地工作并且没有大惊小怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T10:55:29.070

我有旧的 NeuroSky Mindwave 和 BrainLink_Lite 神经小工具，在这里我使用了 BrainLink。Neurosky 和 ​​Brainlink 使用相同的协议以相同的方式工作，因为 BrainLink 使用了 NeuroSky 芯片 ( [TGAM](http://neurosky.com/biosensors/eeg-sensor/biosensors/) )。我按照下一条路解决了这个问题：

首先我得到：

```
$ dmesg | tail -n 50
....
[243709.823581] Bluetooth: hci0: BCM: chip id 63
[243709.839507] Bluetooth: hci0: ShisiusStation
[243709.840576] Bluetooth: hci0: BCM20702A1 (001.002.014) build 0000
[243709.840606] bluetooth hci0: Direct firmware load for brcm/BCM20702A1-13d3-3404.hcd failed with error -2
[243709.840608] Bluetooth: hci0: BCM: Patch brcm/BCM20702A1-13d3-3404.hcd not found
... 
```

通过**blueman-manager**连接后，我进入**dmesg 输出**：

```
[254803.943803] Bluetooth: TIOCGSERIAL is not supported
[254804.299425] Bluetooth: bad checksum in packet
[254817.417375] Bluetooth: TIOCGSERIAL is not supported
[254817.417498] Bluetooth: TIOCGSERIAL is not supported
[254823.416967] Bluetooth: TIOCGSERIAL is not supported
[254865.049149] ERROR @wl_inform_single_bss : cfg80211_inform_bss_frame error 
```

没关系！顺便说一句，我无法通过以下方式连接到 BrainLink 大约 1-2 秒

```
 bash$ sudo rfcomm connect /dev/rfcomm0 8C:DE:52:44:AB:23 1 
```

我还修补了我的蓝牙设备错误（brcm/BCM20702A1-13d3-3404.hcd 的直接固件加载失败，错误 -2）在该[文档链接](https://forums.linuxmint.com/viewtopic.php?t=194758)之后（没有描述的模块重新编译）

```
wget https://www.dropbox.com/s/krg2ulkxdrqxham/bluetooth-hogfan.tar.gz
tar -zxvf bluetooth-hogfan.tar.gz
cd bluetooth
sudo cp fw-13d3_3404.hcd /lib/firmware/brcm
sudo cp fw-13d3_3404.hcd /lib/firmware/brcm/BCM20702A1-13d3-3404.hcd
sudo modprobe -r btusb
sudo modprobe btusb 
```

结果，我可以使用通道 6（不是 1、2、3、4、5，...）连接 BT。我不知道为什么。

```
# in real rfcomm0 became rfcomm59 by the end of experimintations.
sudo rfcomm connect rfcomm0 8C:DE:52:44:AB:23 6
Connected /dev/rfcomm0 to 8C:DE:52:44:AB:23 on channel 6
Press CTRL-C for hangup 
```

在另一个外壳中：

```
$: sudo cat /dev/rfcomm0 | hexdump -C
...
000f7f80  00 7b 02 aa aa 04 80 02  00 2c 51 aa aa 04 80 02  |.{.......,Q.....|
000f7f90  ff f9 85 aa aa 04 80 02  ff f9 85 aa aa 04 80 02  |................|
000f7fa0  00 44 39 aa aa 04 80 02  00 5b 22 aa aa 04 80 02  |.D9......[".....|
000f7fb0  00 31 4c aa aa 04 80 02  00 07 76 aa aa 04 80 02  |.1L.......v.....|
000f7fc0  ff ba c4 aa aa 04 80 02  ff 7e 00 aa aa 04 80 02  |.........~......|
000f7fd0  ff b3 cb aa aa 04 80 02  ff f9 85 aa aa 04 80 02  |................|
000f7fe0  00 1b 62 aa aa 04 80 02  00 45 38 aa aa 04 80 02  |..b......E8.....|
000f7ff0  00 36 47 aa aa 04 80 02  00 27 56 aa aa 04 80 02  |.6G......'V.....|
000f8000  00 66 17 aa aa 04 80 02  00 c5 b8 aa aa 04 80 02  |.f..............|
000f8010  00 e6 97 aa aa 04 80 02  00 91 ec aa aa 04 80 02  |................|
000f8020  ff f3 8b aa aa 04 80 02  ff d3 ab aa aa 04 80 02  |................|
000f8030  00 28 55 aa aa 04 80 02  00 36 47 aa aa 04 80 02  |.(U......6G.....|
... 
```

数据含义的详细信息[在此处](http://developer.neurosky.com/docs/doku.php?id=thinkgear_communications_protocol#code_definitions_table)、[此处](http://developer.neurosky.com/docs/doku.php?id=thinkgear_communications_protocol)和[此处](http://developer.neurosky.com/docs/lib/exe/fetch.php?media=app_notes:mindwave_rf_external.pdf)进行了描述。有时它可以长时间正常工作，有时神经串行流会带来**EOF**，因此在断开连接后的一段时间内读取 /dev/rfcomm0 很有用。如果连接到通道 3，我得到：

```
sudo rfcomm connect rfcomm0 8C:DE:52:44:AB:23 3
Connected /dev/rfcomm43 to 8C:DE:52:44:AB:23 on channel 3
Press CTRL-C for hangup
# since 10 secs it is disconnect....
Disconnected 
```

输出是：

```
$ sudo cat /dev/rfcomm43 | hexdump -C
00000000  55 04 00 38 00 00 c4 55  04 00 38 00 00 c4 55 04  |U..8...U..8...U.|
00000010  00 38 00 00 c4 55 04 00  38 00 00 c4 55 04 00 38  |.8...U..8...U..8|
...
000000a0  c4 55 04 00 38 00 00 c4  55 04 00 38 00 00 c4     |.U..8...U..8...|
000000af
# (and disconnect) 
```

顺便说一句，我尝试运行[NeuroPy 示例](https://pypi.python.org/pypi/NeuroPy/0.1)并且只得到了一次注意力测量：)。接下来我还要做：

```
sudo chmod 777 /dev/rfcomm0
sudo python neuropyexample.py 
```

*在所有描述的实验中，BrainLink 已从 blueman 配对设备中删除。我[还在 TuSion](http://tusion.xyz/) via-Art 神经应用程序开发过程中进行了测试。这里是 Facebook[社区组](https://www.facebook.com/tusionapp)。*我的最后一句话：

```
# Ubuntu 16.04 
$ uname -a
Linux SlavikBoss 4.4.0-81-generic #104-Ubuntu SMP Wed Jun 14 08:17:06 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-31T03:08:21.617

我参考了 Jo Ja 的回答解决了这个问题。详细过程如下：

1.  hcitool scan ---找到你的brainlink的地址。如果它不起作用，请再试一次，或者使用您计算机上 [的蓝牙 这是ubuntu中蓝牙的图像](https://i.stack.imgur.com/R0ddS.png)

    `$ hcitool scan Scanning ... B0:C0:90:B3:ED:7A DESKTOP-JA7BUAI 0D:00:18:A1:54:DD BrainLink_Lite`

2.  `sudo rfcomm connect /dev/rfcomm0 0D:00:18:A1:54:DD 2` -----最后一个数字2表示将你的brainlink连接到通道2，这可能与计算机不同，我猜原因是蓝牙的频率范围是从2401mhz到2479mhz，每个通道占1MHz，总共79个通道。因此，您应该尝试在您的计算机中使用哪个频道。

    `$ sudo rfcomm connect /dev/rfcomm0 0D:00:18:A1:54:DD 2 Connected /dev/rfcomm0 to 0D:00:18:A1:54:DD on channel 2 Press CTRL-C for hangup`

    /dev/rfcomm1 或 /dev/rfcomm2 或其他数字都可以，然后 rfcommX 将出现在'/dev/'的路径中，并在断开连接时消失。

    使用命令`$ rfcomm -i --device`，可以看到你的brainlink已经连接到0C:DD:24:16:ED:69(你本地的蓝牙地址)

    `$ rfcomm -i --device rfcomm0: 0C:DD:24:16:ED:69 -> 0D:00:18:A1:54:DD channel 2 connected [reuse-dlc release-on-hup tty-attached]`

3.  在另一个外壳中：

    `sudo cat /dev/rfcomm0 | hexdump -C 00000000 7a aa aa 04 80 02 00 6c aa aa 04 80 02 00 21 5c |z......l......!\| 00000010 aa aa 04 80 02 00 31 4c aa aa 04 80 02 00 35 48 |......1L......5H| 00000020 aa aa 04 80 02 00 6a aa aa 04 80 02 ff ef 8f aa |......j.........| 00000030 aa 04 80 02 00 06 77 aa aa 04 80 02 00 34 49 aa |......w......4I.| 00000040 aa 04 80 02 63 aa aa 04 80 02 00 0a 70 aa aa 04 |....c.......p...| 00000050 80 02 00 17 66 aa aa 04 80 02 00 16 67 aa aa 04 |....f.......g...| 00000060 80 02 00 24 59 aa aa 04 80 02 00 34 49 aa aa 04 |...$Y......4I...| 00000070 80 02 00 3b 42 aa aa 04 80 02 00 31 4c aa aa 04 |...;B......1L...| 00000080 80 02 00 6a aa aa 04 80 02 00 01 7c aa aa 04 80 |...j.......|....| 00000090 02 00 6a aa aa 04 80 02 00 20 5d aa aa 04 80 02 |..j...... ].....| 000000a0 00 04 79 aa aa 04 80 02 ff f5 89 aa aa 04 80 02 |..y.............|`

    如果输出如下所示，说明您在第 2 步中没有选择正确的通道，您应该在计算机中尝试正确的通道：

    `$ sudo cat /dev/rfcomm0 | hexdump -C 00000000 ff 55 02 00 ee 10 ff 55 02 00 ee 10 ff 55 02 00 |.U.....U.....U..| 00000010 ee 10 ff 55 02 00 ee 10 ff 55 02 00 ee 10 ff 55 |...U.....U.....U| 00000020 02 00 ee 10 ff 55 02 00 ee 10 ff 55 02 00 ee 10 |.....U.....U....| 00000030 ff 55 02 00 ee 10 ff 55 02 00 ee 10 ff 55 02 00 |.U.....U.....U..| 00000040 ee 10 ff 55 02 00 ee 10 ff 55 02 00 ee 10 ff 55 |...U.....U.....U| 00000050 02 00 ee 10 ff 55 02 00 ee 10 ff 55 02 00 ee 10 |.....U.....U....| 00000060 ff 55 02 00 ee 10 ff 55 02 00 ee 10 ff 55 02 00 |.U.....U.....U..| 00000070 ee 10 ff 55 02 00 ee 10 ff 55 02 00 ee 10 ff 55 |...U.....U.....U|`

4.  运行[NeuroPy 示例](https://pypi.org/project/NeuroPy/0.1/)并引起注意。NeuroPy 示例在 python2 中工作，您应该对其进行更改以使其在 python3 中工作

    `$ sudo python neuropyexample.py`

    不要忘记在 sudo 模式下运行，并`$ sudo cat /dev/rfcomm0 | hexdump -C`提前使用 ctrl+c 停止终端。

# silverstripe - Silverstripe 批量保存所有数据对象

> ID：15799077
> 
> 赞同：0
> 
> 时间：2013-04-03T22:06:53.320
> 
> 标签：silverstripe

我已将 URLSegments 添加到 DataObjects（产品），因此我可以将 ProductName 显示为 URL ....代码工作正常：

```
public function onBeforeWrite(){
    if($this->Name){
        $this->URLSegment = SiteTree::GenerateURLSegment($this->Name);
        if($object = DataObject::get_one($this->ClassName, "URLSegment='".$this->URLSegment."' AND ID !=".$this->ID)){
            $this->URLSegment = $this->URLSegment.'-'.$this->ID;
        }
    } else {
        $this->URLSegment = SiteTree::GenerateURLSegment($this->ClassName.'-'.$this->ID);
    }
    parent::onBeforeWrite();
} 
```

但是，我有超过 1000 个产品...有没有办法为代码中的所有产品数据对象生成批量保存（即一次性），所以我不必通过 CMS 手动保存每个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:44:38.387

只需创建一个具有索引功能的控制器并使用或多或少相同的代码。

```
<?php

class UpdateProducts extends Controller {
    public function index() {

        $products = DataObject::get('Products');

        foreach ($products as $product) {

            if (!$product->URLSegment) {
                $product->write();
            }
        }
    }
} 
```

[然后您可以在http://example.com/UpdateProducts](http://example.com/UpdateProducts)从浏览器调用该函数一次

这不是超级有效，所以它真的只是一个关闭。如果脚本超时，您可以再次运行它，因为其中的 if 语句意味着只有没有 URLSegment 的产品将被更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:41:01.827

我开始实现 drzax 解决方案，然后找到了这个，它将它作为一个任务来实现。创建此任务是为了将 URLSegments 添加到产品中，因此非常适合我的需求...

[http://www.balbuss.com/creating-tasks/](http://www.balbuss.com/creating-tasks/)

# mysql - 如何从 MySQL 中非表格式的表中返回数据？

> ID：15799080
> 
> 赞同：0
> 
> 时间：2013-04-03T22:06:59.797
> 
> 标签：mysql, sql, database

我已经在整个互联网甚至这个网站上寻找答案，也许我只是用一种没有让我得到正确结果的方式来表达我的问题，但我只是想知道是否有办法使用SQL 以非表格形式从表格中返回数据？

基本上，我有一张关于不同书籍的信息表，我想找到一种方法以这种格式返回信息：“作者；标题（出版商：出版年份）”而不使用 PHP 或任何其他类型的编程语言？只使用SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:11:25.973

您可以使用连接。

见下面的例子

选择 concat(COALESCE(AUTHOR,''),';',COALESCE(TITLE,''),' (',COALESCE(PUBLISHER,''),':',COALESCE(YEAROFPUBLISH,''),')' ) 作为来自 YOUR_TABLE 的 your_result

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:14:08.590

这可能对你有帮助。

```
 select COALESCE(Author,'')+';'+COALESCE(TITLE,'') + ' ('+COALESCE(Publisher,'')+':'+cast([Year of publication]) as varchar) + ')' as Result from yourtable 
```

# arrays - CUDA：如何将 3D 阵列从主机复制到设备？

> ID：15799086
> 
> 赞同：1
> 
> 时间：2013-04-03T22:07:12.737
> 
> 标签：arrays, 3d, cuda, memcpy

我想了解如何将 3 维数组从主机内存复制到设备内存。假设我有一个包含数据的 3d 数组。例如 int host_data[256][256][256]; 我想以这样的方式将该数据复制到 dev_data （设备数组），以便 host_data[x][y][z]=dev_data[x][y][z]; 我该怎么做？我应该如何访问设备中的 dev_data 数组？一个简单的例子会很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T22:24:10.700

常见的方法是展平数组（使其成为一维）。然后，您必须进行一些计算以从`(x,y,z)`三元组映射到一个数 - 扁平一维数组中的一个位置。

示例 2D：

```
int data[256][256];
int *flattened = data;
data[x][y] == fattened[x * 256 + y]; 
```

示例 3D：

```
int data[256][256][256];
int *flattened = data;
data[x][y][z] == flattened[x * 256 * 256 + y * 256 + z]; 
```

或使用包装器：

```
__host__ __device___ inline int index(const int x, const int y, const int z) {
     return x * 256 * 256 + y * 256 + z;
} 
```

知道了这一点，您可以像往常一样使用 cudaMalloc 分配一个线性数组，然后使用`index`函数访问设备代码中的相应元素。

**更新：**[这个问题](https://stackoverflow.com/questions/15799086/cuda-how-to-copy-a-3d-array-from-host-to-device) 的作者声称已经找到了更好的解决方案（至少对于 2D），您可能想看看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:26:14.760

对于固定尺寸（例如 [256][256][256]），让编译器为您完成工作并遵循[此示例](https://stackoverflow.com/questions/14920931/3d-cuda-kernel-indexing-for-image-filtering/14926201#14926201)。这很有吸引力，因为我们只需要使用单个指针执行单个 cudaMalloc/cudaMemcpy 来传输数据。如果您必须具有可变尺寸，由于复杂性，最好考虑处理此问题的替代方法，但您可能希望查看[此示例](https://stackoverflow.com/questions/12924155/sending-3d-array-to-cuda-kernel/12925014#12925014)（参考我发布的第二个示例代码）。请注意，此方法相当复杂且难以遵循。如果可以避免，我建议不要使用它。

编辑：如果您愿意展平您的阵列，推荐@Ixanezis 提供的答案，并且是常用的。我的回答是基于您确实想在主机和设备上使用 3 个下标访问数组的假设。但是，正如在另一个答案中指出的那样，您可以使用宏或函数模拟 3 个下标访问来计算一维数组的偏移量。

# apache - 隐藏网址扩展

> ID：15799087
> 
> 赞同：0
> 
> 时间：2013-04-03T22:07:14.023
> 
> 标签：apache, .htaccess

我想在我的网站 url 中隐藏文件名的扩展名，主要是 ".php" 。

因此，如果用户访问“www.mysite.com/home.php”，那么这将在 url 中显示为“www.mysite.com/home”。

我正在使用 GoDaddy 托管，它支持 Apache，我正在使用以下 .htaccess（重写引擎）方法：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L] 
```

我已尝试上传此文件，但它仍然没有隐藏扩展名，我也尝试将我的 URL 从 重新`<a hrefe="home.php">`指向`<a href="home">`.

我尝试将服务器上的文件保留为“home.php”，并尝试删除“.php”，因此它只是“home”。
无论我做什么，我都无法让它发挥作用。

请问有人可以告诉我这样做的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:08:59.463

删除`\`. 替换值不是正则表达式。

# c# - MonoMac / Xamarin.Mac：AudioSession.Initialize() 的 EntryPointNotFoundException

> ID：15799092
> 
> 赞同：2
> 
> 时间：2013-04-03T22:07:20.150
> 
> 标签：c#, macos, mono, xamarin, monomac

我对 C#、MonoMac 和 Xamarin 非常陌生，我正在尝试使用[这个很棒的示例](https://stackoverflow.com/a/11812441/1240061)使用 C# 和 Xamarin.Mac 播放一些生成的音频。

不幸的是第一行：

```
AudioSession.Initialize(); 
```

抛出一个**EntryPointNotFoundException**。

我偶然发现了[这个论坛帖子](http://lists.ximian.com/pipermail/mono-osx/2013-January/005173.html)，其中有人遇到了类似的问题，并暗示它与不正确的绑定有关。

我真的可以让它工作吗？如果没有，我可以用什么代替？

非常感谢你的帮助。

# 我的系统

> Xamarin.Mac：1.2.43
> 
> Xamarin.Studio 版本 4.0.3（内部版本 13）
> 
> 单声道 2.10.12 (mono-2-10/c9b270d)
> 
> GTK 2.24.16
> 
> GTK# (2.12.0.0)
> 
> 包版本：210120000

# 堆栈跟踪

```
System.EntryPointNotFoundException: AudioSessionInitialize
  at at (wrapper managed-to-native) MonoMac.AudioToolbox.AudioSession.AudioSessionInitialize (intptr,intptr,MonoMac.AudioToolbox.AudioSession/InterruptionListener,intptr) <IL 0x00011, 0x0007b>
  at MonoMac.AudioToolbox.AudioSession.Initialize (MonoMac.CoreFoundation.CFRunLoop,string) [0x00013] in /Users/builder/data/lanes/xamcore-lion-bs1/0c83ca0e/source/xamcore/maccore/src/AudioToolbox/AudioSession.cs:225 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:48:59.927

我认为在 OS X 上不使用 AudioSession。

您正在使用的示例代码可能适用于 iOS。

如果您查看AudioSession的[文档，您将看到：](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html)

```
These functions apply only to iOS. They do not apply to Mac OS X. 
```

此外，请参阅此[讨论](https://stackoverflow.com/questions/13932954/port-ios-app-to-mac-os-xaudio-capture-and-playback)。AudioSession 根本不可用，这就是为什么在尝试调用它时会得到 EntryPointNotFoundException ......

# jquery - jquery slideToggle 调用一次

> ID：15799094
> 
> 赞同：1
> 
> 时间：2013-04-03T22:07:22.563
> 
> 标签：jquery, toggle, slide, slidetoggle

那可能很简单，但现在大约是凌晨 2 点，而且很困 :)

我有一个简短的脚本，其中“slideToggle” div 不被显示。

```
$('#cmnt_add').click(function () { $('.dark_div_add').slideToggle(1100); }); 
```

有没有机会让它锻炼一次，所以如果打开未显示的DIV，单击相同的链接不会做任何事情？

先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T22:09:04.510

使用`.one()`：

```
$('#cmnt_add').one("click", function () { $('.dark_div_add').slideToggle(1100); }); 
```

来自[jQuery 的文档](http://api.jquery.com/one/)：

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

此外，如果您知道它最初会被隐藏，那么使用`.slideDown()`代替`.slideToggle()`可能是一个好主意......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:09:26.630

使用[slideDown](http://api.jquery.com/slideDown/)而不是[slideToggle](http://api.jquery.com/slideToggle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:10:37.453

```
$('#cmnt_add').click(function () { $('.dark_div_add').slideDown(1100); }); 
```

# mysql - MySQL：基于列传输数据而不传输该列

> ID：15799099
> 
> 赞同：0
> 
> 时间：2013-04-03T22:07:49.457
> 
> 标签：mysql

我的表存储我的 CMS 条目的修订数据。每个条目都有一个 ID 和一个修订日期，并且有多个修订：

```
Table: old_revisions
+----------+---------------+-----------------------------------------+
| entry_id | revision_date |               entry_data                |
+----------+---------------+-----------------------------------------+
|        1 |    1302150011 | I like pie.                             |
|        1 |    1302148411 | I like pie and cookies.                 |
|        1 |    1302149885 | I like pie and cookies and cake.        |
|        2 |    1288917372 | Kittens are cute.                       |
|        2 |    1288918782 | Kittens are cute but puppies are cuter. |
|        3 |    1288056095 | Han shot first.                         |
+----------+---------------+-----------------------------------------+ 
```

我想将其中一些数据传输到另一个表：

```
Table: new_revisions
+--------------+----------------+
| new_entry_id | new_entry_data |
+--------------+----------------+
|              |                |
+--------------+----------------+ 
```

我想将`entry_id`and转移`entry_data`到`new_entry_id`and `new_entry_data`。但我只想传输每个条目的最新版本。

我得到了这个查询：

```
INSERT INTO new_revisions (
    new_entry_id,
    new_entry_data
)
SELECT
entry_id,
entry_data,
MAX(revision_date)
FROM old_revisions
GROUP BY entry_id 
```

但我认为问题在于我试图将 3 列数据插入 2 列。

如何在不传输修订日期的情况下根据修订日期传输数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:14:33.767

您可以使用以下查询：

```
insert into new_revisions (new_entry_id, new_entry_data)
select o1.entry_id, o1.entry_data
from old_revisions o1
inner join
(
  select max(revision_date) maxDate, entry_id
  from old_revisions
  group by entry_id
) o2
  on o1.entry_id = o2.entry_id
  and o1.revision_date = o2.maxDate 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/cddd2/1)。此查询获取`max(revision_date)`for each `entry_id`，然后在 the 和 max 日期连接回您的表`entry_id`以获取要插入的行。

请注意，子查询仅返回`entry_id`日期和日期，这是因为我们希望将 应用于`GROUP BY`选择列表中不在聚合函数中的项目。MySQL 使用对`GROUP BY`子句的扩展，允许选择列表中的列被排除在 group by 和聚合中，但这可能会导致意外结果。通过仅包括聚合所需的列和分组依据将确保结果是您想要的值。（参见[MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:15:31.567

如果要输入最后一个条目，则需要先对其进行过滤：

```
select entry_id, max(revision_date) as maxDate
from old_revisions
group by entry_id; 
```

然后将其用作子查询来过滤您需要的数据：

```
insert into new_revisions (new_entry_id, new_entry_data)
select entry_id, entry_data
from old_revisions as o
    inner join (
        select entry_id, max(revision_date) as maxDate
        from old_revisions
        group by entry_id
    ) as a on o.entry_id = a.entry_id and o.revision_date = a.maxDate 
```

# batch-file - 寻找一种在 DOS 批处理文件中计算对数的方法

> ID：15799105
> 
> 赞同：1
> 
> 时间：2013-04-03T22:08:32.617
> 
> 标签：batch-file

快速提问。我一直在拼命寻找一种在 DOS 批处理数据中计算对数的方法。请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:23:57.687

最好的方法是制作可执行的对数文件并在你的批处理文件中使用它，msdos 没有任何日志功能。你可以使用一些源代码，如下所示： [http://en.literateprograms.org/Logarithm_Function_(Python)](http://en.literateprograms.org/Logarithm_Function_%28Python%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T00:12:32.930

您可以使用这个非常简单的 Batch-JScript 混合文件：

```
@if (@CodeSection == @Batch) @then

@echo off

rem JSExpr.bat: Evaluate a JScript (aritmethic) expression
rem Antonio Perez Ayala

Cscript //nologo //E:JScript "%~F0" %1
goto :EOF

End of Batch section

@end

// JScript section

WScript.Echo(eval(WScript.Arguments.Unnamed.Item(0))); 
```

例如：

```
C:>jsexpr Math.log(10)
2.30258509299405 
```

事实上，您可以使用以前的程序计算*任何*有效的 JScript 算术表达式。例如：

```
C:>jsexpr Math.E
2.71828182845905 
```

搜索“jscript reference”（数学对象），例如： http: [//msdn.microsoft.com/en-us/library/ie/b272f386 (v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/b272f386(v=vs.94).aspx)

安东尼奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:34:06.967

有几个免费的 DOS 命令行计算器可用。例如[EVAL](http://tp.lc.ehu.es/anonym/msdos/eval100.zip)。这是有据可查的。

或[Mathfc24](http://archives.scovetta.com/pub/simtelnet/msdos/calculte/mathfc24.zip)

# php - 在 JS 中使用 PHP if/else 是不好的做法吗？

> ID：15799116
> 
> 赞同：6
> 
> 时间：2013-04-03T22:09:17.713
> 
> 标签：php, jquery, wordpress, if-statement

我正在为 WordPress 构建一个自定义模板，并且在几个地方我使用了 PHP if else 语句，例如页脚中的 JS 中的以下示例。它工作正常，但我想知道这是否被认为是“不好的做法”，如果是这样，有什么更好的方法来处理它？

```
<script type="text/javascript">
var $submenu = $('.submenu');
// SUBMENU animation
<?php if ( in_category('Collection') == false ) { ?> // if not a Collection subpage
    $('.menu li a').each(function() { 
        if ( $(this).text() == 'Collection' ) { // If is Collection link show submenu on hover
            $(this).mouseenter(function() { 
                $submenu.slideDown(); 
            });
        } else { // else close submenu on hover over other menu links
            $(this).mouseenter(function() { 
                $submenu.slideUp(); 
            });
        }
    });
    $('.nav').mouseleave(function() { // close submenu
        $submenu.slideUp(); 
    });
<?php } else { ?> // If a Collection subpage always show subnav
    $submenu.show();
<?php } ?>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:37:48.340

虽然混合 PHP 和 JavaScript 并没有什么真正的问题，但我个人觉得阅读和修改很尴尬，而且移动代码也很棘手。例如，如果您决定将该 JavaScript 导出到外部文件，这有很多好处：

```
<script src="myjs.js.php"></script> 
```

如果您的 JavaScript 需要知道某些值以便计算`in_category('Collection')`，因为您必须开始使用 GET 参数（除非您依赖会话变量，这可能会变得非常复杂和不可预测，尤其是通过资产请求），这会变得很笨拙：

```
<script src="myjs.js.php?random_vars_required=123"></script> 
```

需要注意的另一点是，当 JavaScript 文件根据服务器端逻辑更改其内容时，您必须小心浏览器缓存的内容（为避免此类问题，这基本上意味着您必须更改js 文件的每个可能结果的请求 URL）。IE

```
<script src="myjs.js.php?collection=true"></script>
<script src="myjs.js.php?collection=false"></script> 
```

另一个缺点是通过将 PHP 与 JS 混合使用，您最终可能会在许多地方复制 PHP 代码，这违反了 DRY 原则。这就是为什么建议的“将数据导出到 javascript 变量”是一个更好的主意的原因。但是，如果可能，最好避免使用全局 js 命名空间中的变量。如果您需要跨多个 JavaScript 文件共享逻辑并且不希望在每个文件的顶部导出变量，那么避免使用全局命名空间可能会很棘手。

### 另一种可能

如果您要测试的逻辑本质上是纯布尔型的，并且它也以页面分类（或子区域分类）为中心，那么以下是处理您要实现的目标的好方法。这很好，主要是因为它将您的 PHP 和 HTML 放在一起，而您的 JS 是分开的。

以下内容应放置在用于生成外部 HTML 的任何模板中：

```
<?php

    $classes = array();
    if ( in_category('Collection') ) {
      $classes[] = 'collection';
    }
    $classes = implode(' ', $classes);

?>
<!-- 
  obviously you'd render the rest of the html markup
  I've removed it for simplicity
//-->
<body class="<?php echo $classes; ?>"></body> 
```

然后在你的 JavaScript / jQuery 中：

```
if ( $('body.collection').length ) {
  /// if collection sub page
}
else {
  /// else do otherwise
} 
```

如果您不想向`body`元素添加类，则始终可以根据页面的一个版本而不是另一个版本上已经存在的内容来定义布尔检查。虽然我个人喜欢保持清洁，并且只有在我知道 HTML 标记在未来不会发生太大变化时才使用这些检查。

当今世界应该担心的几乎所有浏览器都支持元素上的多个类。所以这意味着即使你有多个想要检查的东西，只要有意义，你可以将这些类放在你的`html`or`body`标记上，并使用 jQuery 的 Sizzle 实现来为你找到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T23:00:37.777

构建 javascript 服务器端可能是我们都做过的事情，尽管不这样做的主要论点 - 即 js 不能（容易）验证（例如 jsLint），也不能（容易）被放入 .js 文件中 - 允许浏览器仅缓存脚本的两个或多个可能版本之一是没有意义的。

您可以考虑将服务器端分支换成客户端分支，这可以说使代码更具可读性，但更重要的是，这是我最终建议的中间步骤（请耐心等待）：

```
var $submenu = $('.submenu');
// SUBMENU animation
var isCollection = <?php echo in_category('Collection') ? 'false' : 'true' ?>;
if ( !isCollection ) { // if not a Collection subpage
    $('.menu li a').each(function() { 
        if ( $(this).text() == 'Collection' ) { // If is Collection link show submenu on hover
            $(this).mouseenter(function() {
                $submenu.slideDown(); 
            });
        } else { // else close submenu on hover over other menu links
            $(this).mouseenter(function() {
                $submenu.slideUp(); 
            });
        }
    });
    $('.nav').mouseleave(function() { // close submenu
        $submenu.slideUp();
    });
} else { // If a Collection subpage always show subnav
    $submenu.show();
} 
```

**但是**，如果布尔值`isCollection`可以通过其他方式确定（例如，通过查询 DOM 的某些方面，例如`data-xxx`属性），那么您就是在用煤气做饭。只需要一个版本的 js 脚本；它可以很容易地用 jsLint 进行验证；如果需要，可以移动到 .js 文件中。

当然，您需要`data-xxx`在服务器端代码的其他地方设置属性（或其他）（完整的解释性注释），这可能是一个缺点，但可能不是一个大问题。

也许不是所有的 js 都适合这种方法，但我认为问题中的例子是。

在我看来，这是一个可行的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:34:48.980

至少它不是伟大代码的标志。有替代方案：

*   [生成](http://www.php.net/manual/en/function.json-encode.php)一个 JSON 对象并在 JavaScript 中解析它
*   JS文件的动态包含
*   只需设置条件：

    ```
    if(<?= (int)$mybool ?>) {
        doSomething();
    } 
    ```

# c# - 选择项目后立即执行的操作

> ID：15799121
> 
> 赞同：0
> 
> 时间：2013-04-03T22:09:54.230
> 
> 标签：c#, .net, combobox

我有这个代码：

```
 private void button1_Click(object sender, EventArgs e)
    {

        if (comboBox1.SelectedItem.ToString() == "blahblah")
        {
            processing ps = new processing();
            pictureBox1.Image = ps.blahblah(bmp);
        }
        else
        {...
        }
    } 
```

所以ComboBox的动作是通过点击button1来完成的。选择项目后是否可以立即采取行动？没有按钮点击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:14:15.580

订阅`SelectedIndexChanged`活动

```
comboBox1.SelectedIndexChanged += OnSelectedIndexChanged;

private void OnSelectedIndexChanged(object sender, EventArgs e) {
  // Handle combo box changing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:17:14.127

尝试使用此事件，

```
ComboBox1.SelectedIndexChanged 
```

做

```
AutoPostBack = "true" 
```

如果您想在选择项目后立即检查所选项目，请在您的标记中。

# c# - 如何在c#中添加对象列表

> ID：15799122
> 
> 赞同：-4
> 
> 时间：2013-04-03T22:09:54.780
> 
> 标签：c#, list, object

我有一个拥有多辆车的用户。我需要创建他所有汽车的所有属性的对象列表。

他的车桌

```
UserID   UserCarID
 101       C101
 101       C102
 101       C103 
```

他的汽车属性表

```
UserCarID   Model  Year  Color
C101        Audi   2012  Black
C102        BMW    2012  Silver
C103        VW     2012  White
C104        Audi   2013  Black
C105        VW     2013  White 
```

我想要一个列表，以便只显示他的汽车列表

```
UserID UserCarID   Model  Year  Color
101    C101        Audi   2012  Black
101    C102        BMW    2012  Silver
101    C103        VW     2012  White 
```

我试过

```
using (SqlConnection con = .....)
        {
            con.Open();
            SqlCommand cmd = con.CreateCommand();
            cmd.CommandText = "Select * FROM CarTable Where UserID = @ID";
            cmd.Parameters.Add(new SqlParameter("@ID", UserID));

            SqlDataReader reader = cmd.ExecuteReader();

                if (reader.HasRows)
                {
                    for (int i = 0; i <= tempID.Length - 1; i++)
                    {
                        tempID[i] = -1;
                    }
                    int j = 0;
                    while (reader.Read())
                    {
                        tempID[j] = (int)reader["ID"];
                        j++;
                    }
                    reader.Close();
                }
            con.Close();

        }
        foreach (int carID in tempID)
        {
            if (carID > -1) return JsonConvert.SerializeObject(getAllCars(carID));
        }

        public static object getAllCars(int id){
            .........
            return carPropertiesObject;
        } 
```

getAllCars 返回 Car 的所有属性的列表。这行得通，但我只得到 C101 的属性。我该怎么做呢？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:17:40.120

我对你的确切问题有点不清楚，但我会试一试：

似乎是创建 Car 类的好时机：

```
class Car
{
    int UserID;
    int UserCarID;
    string Model; 
    int Year;  
    string Color;
} 
```

然后

```
List<Car> cars = new List<Car>();
while(reader.read())
{
     Car newCar = new Car();
     newCar.UserId = Convert.ToInt32(reader["UserId"]); //Should probably use TryParse here, but I will use ToInt32 for simplicity sake
     //same for other columns
     cars.Add(newCar);
} 
```

您用来处理查询结果的方法对我来说看起来很奇怪。你这样做有什么特别的原因吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:18:38.110

你的问题不是很清楚。这似乎是 SQL 查询问题，而不是列表加入问题。

假设这两个表都是 SQL Server 中的表，您可以通过单个查询从数据库中获取结果：

```
Select * FROM CarTable, CarPropertiesTable
WHERE CarTable.UserId = CarPropertiesTable.UserId
AND CarTable.UserId = @ID 
```

然后遍历返回的 DataRows 并将它们转换为您的对象（请参阅有关创建 Car 类的另一个答案，一个非常好的主意），然后将它们序列化为 JSON。

# cakephp - cakephp -- 在复杂关系中获取合适的模型数据

> ID：15799132
> 
> 赞同：1
> 
> 时间：2013-04-03T22:10:35.370
> 
> 标签：cakephp, model, has-many-through, cakephp-2.3

好的。试图尽可能简洁地表达我的问题。我有这个庞大的项目，主要目的是从模型数据生成配置文件。在收集数据库以获取配置信息时，我不知道如何以有效的方式获取适当的信息。模型：**地区、部门、用户、运营商。**

*   **区**
    *   有很多**部门**
    *   `| id | name |`
*   **部门**
    *   hasMany **User** *通过* **DepartmentPosition**
    *   `| id | name | district_id | tone_name | tone_length |`
*   **用户**
    *   *通过*DepartmentPosition有**很多****部门**
    ****   属于**承运人***   `| id | name | phone | email | carrier_id | notify_method (tiny int) |`***
****   **载体**
    *   hasMany**用户**
    *   `| id | name | mms_gateway |`*   **部门职位**
    *   属于**用户、部门**
    *   `| id | user_id | department_id | role |`***

 ***使用与上述所有模型相关联的字段为每个区域生成一个配置文件。对于一个地区的每个部门，以下内容将添加到一个字符串中，完成后将保存到配置文件中：

```
[tone_name] //comes from department name
    tone = 123 //from department tone
    tone_length = 4 //from department tone_length
    mp3_emails = person@gmail.com, person2@gmail.com ... //comes from user email
    amr_emails = 5551239999@vzwipix.com //concat of user phone and carrier mms_gateway 
```

基本上，一个部门的 mp3_emails 和 amr_emails 的列表*应该*基于该部门的用户，基于`notify_method`User 字段生成。除了这些电子邮件字段之外，我已经能够使用以下内容将所有内容放入配置文件中：

```
//districts controller
public function generate_config(){
    $districts = $this->District->find('All'); 
    $this->set(compact('districts'));
} 
```

现在，对于视图文件：

```
 <?php
    $output = '';
    $br = " \r\n";
    $unrelated = array('id', 'name', 'district_id', 'tone_name');
    foreach($districts as $district){
        $name = $district['District']['name'];
        $output .= "#{$name} configuration".$br;
        $departments = $district['Department'];
        foreach($departments as $department){
            $output .= "[".$department['tone_name']."]".$br;
            foreach($department as $key => $value){
                if(!empty($value)&&(!in_array($key, $unrelated))){
                    $output .= $key." = ".$value.$br;   
                }

            }
            $output .= $br;
        }
    }
    echo nl2br($output);
    ?> 
```

输出这样的东西

```
#District 1 config
[Department1]
    tone = 123
    tone_length = 4

[Department2]
    tone = 24.7
    tone_length = 2 
```

我需要做的是为每个部门生成电子邮件列表，但我想不出一个明智的方法来做到这一点。`departments`我觉得如果and使用 HABTM 关系会容易得多`users`，而不是 hasMany through，我觉得我必须使用它，因为我正在为关系保存额外的数据。有什么建议么？？不要犹豫，问我是否应该对任何事情更清楚，但我试图提供所有相关信息，同时尽量减少压倒性的细节。谢谢你！！！

**编辑**

感谢@Drewdiddy611，我的理智得以幸免。可包含的行为非常适合这个问题。所以，希望有人会避免彻底的项目大修——我离做的事情还差一点——并使用可包含的行为。

只需将以下内容添加到我的模型中： public $actsAs = array('Containable'); 然后我能够运行 find 查询，按照下面的建议实现可包含的行为，我能够在每个`District`/上为我的迭代添加更大的深度`Department`。这非常简单，因为返回的数组就像下面选择的答案中写的一样！！！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:56:17.100

我认为根据您的表格/数据使用“hasMany through”关系是正确的。在 cakephp 2.1 中，他们为 HABTM 关系添加了一个“唯一”键，您可以将其设置为“keepExisting”，它应该可以规避丢失的数据。

[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through) - 查看主标题下方的“2.1 更改”部分。

也许试试看？

您还可以查看可包含的行为。然后您可以执行以下操作：

```
<?php
//model
var $actsAs = array('Containable');

//controller
$this->District->contain(array(
    'Department' => array(
        'DepartmentPosition' => array(
            'User' => array(
                'Carrier'
            )
        )
    )
));
$districts = $this->District->find('all');
$this->set(compact('districts'));

// I believe this will be the outcome after the find.
///////////////////////////////////////////////////////
// array(
//     [0] => array(
//        'District' => array(...),
//        'Department' => array(
//            [0] => array(
//                '...' => '...', // repeated...
//                'DepartmentPosition' => array(
//                    [0] => array(
//                        '...' => '...', // repeated...
//                        'User' => array(
//                            '...' => '...', // repeated...
//                            'Carrier' => array(
//                                '...' => '...', // repeated...
//                            )
//                        )
//                    )
//                ) 
//            )
//        )
//    )
// )

?> 
```

-安德鲁***

# iphone - 如何正确填充pickerView

> ID：15799134
> 
> 赞同：0
> 
> 时间：2013-04-03T22:10:38.430
> 
> 标签：iphone, objective-c, uipickerview

我有一个 UIPickerView，我希望它有 2 列填充我的数组中的项目，但我不知道如何，有我的数组：

```
-(void)fillingStandartWeightArray{

    if (!standartWeightArray){
        for (int i=25; i<150 ;i++){
            NSString *weightString;
            weightString = [NSString stringWithFormat:@"%d kg", i];
            [standartWeightArray addObject:weightString];
            NSLog(@"%@", weightString);
        }
    }

}

-(void)fillingStandartHeightArray{

    if (!standartHeightArray){
        for (int i=85; i<250; i++){
            NSString *heightString;
            heightString = [NSString stringWithFormat:@"%d cm", i];
            [standartHeightArray addObject:heightString];
            NSLog(@"%@", heightString);
        }
    }

} 
```

更具体地说，我不知道如何“告诉” UIPickerView 用一个数组填充其中一个轮子，而另一个用另一个数组填充轮子。我试过这个：

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{

    if (component == 0){
        return [standartWeightArray count];
    }   else {
        return [standartHeightArray count];
    }
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{

    return 2;
}

-(NSString*)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{

    if (component == 0)
        return [standartWeightArray objectAtIndex:row];
    else if (component == 1)
        return [standartHeightArray objectAtIndex:row];
} 
```

我确实在 viewDidLoad 部分调用了函数：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self fillingStandartWeightArray];
    [self fillingStandartHeightArray];
    NSLog(@"%@", standartWeightArray);

} 
```

但这行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:18:51.303

当然看起来你对我来说一切都是正确的。

但请确保将 UIPickerView 委托和数据源设置为 PickerView 数据源方法所在的相同对象/类（ViewController？）。

您可以在 Xcode 的 Interface Builder 中设置它，也可以在“ `viewDidLoad:`”时间以编程方式设置（如果您将选择器视图设置为 IBOutlet）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:49:27.697

您的数据源/委托方法非常完美。

注意以下事项

1）正确分配`standartHeightArray`和`standartWeightArray` 对象。如果您还没有这样做，请按如下方式分配数组对象。

```
-(void)fillingStandartWeightArray{

    if (!standartWeightArray){
   // Allocate the array
       standartWeightArray = [NSMutableArray new];
        for (int i=25; i<150 ;i++){
            NSString *weightString;
            weightString = [NSString stringWithFormat:@"%d kg", i];
            [standartWeightArray addObject:weightString];
            NSLog(@"%@", weightString);
        }
    }

}

-(void)fillingStandartHeightArray{

    if (!standartHeightArray){
   // Allocate the array
        standartHeightArray = [NSMutableArray new];
        for (int i=85; i<250; i++){
            NSString *heightString;
            heightString = [NSString stringWithFormat:@"%d cm", i];
            [standartHeightArray addObject:heightString];
            NSLog(@"%@", heightString);
        }
    }

} 
```

2）`delegate/datasource`正确连接picker的属性。您可以在界面生成器或代码中执行此操作（在`viewDidLoad`）

# ruby-on-rails - Ruby on Rails：使用 submit_tag 放置类

> ID：15799137
> 
> 赞同：9
> 
> 时间：2013-04-03T22:10:41.127
> 
> 标签：ruby-on-rails

我想知道为什么我们必须`nil`在放置时添加`:class => "class_name"`

```
<%= submit_tag nil, :class => "class_name" %> 
```

但为此：

```
<%= f.submit class: "class-Name" %> 
```

我不需要添加`nil`

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-13T05:13:15.053

```
 <%= submit_tag("Update", :id=>"button", :class=>"Test", :name=>"submit") %> 
```

第一个参数是必需的，它是值，您想要指定的任何参数都可以在哈希中完成，例如：key=>“value”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-03T22:14:39.870

看看[submit_tag 方法的实现方式可以](https://github.com/rails/rails/blob/4179470f0116a08a1838c474ba5541bb33658c9d/actionpack/lib/action_view/helpers/form_tag_helper.rb#L417)清楚地回答您的问题。

```
 def submit_tag(value = "Save changes", options = {})
    options = options.stringify_keys

    if disable_with = options.delete("disable_with")
      options["data-disable-with"] = disable_with
    end

    if confirm = options.delete("confirm")
      options["data-confirm"] = confirm
    end

    tag :input, { "type" => "submit", "name" => "commit", "value" => value }.update(options)
  end 
```

它有两个参数，第一个是`value`默认情况下“保存更改”，第二个是选项哈希。如果您不通过`nil`，那么它将假定这是您想要的输入值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:14:30.783

因为它们是两种不同的方法...

“提交”方法不带标题，因为它可以从调用该方法的表单中推断出一个标题，以及用于构建表单的对象。

不会在表单对象上调用“submit_tag”方法。它用于更自定义的表单构建（例如，与您的 activerecord 模型更分离），因此代码无法推断标题，并且必须获取一个值作为第一个参数。所有“formelement_tag”方法（例如，[在此处](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)记录）都是这样的，并且可以根据您的数据模型进行较少的推断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T22:14:00.343

显而易见的答案是，`submit_tag`并且`submit`只是采用不同参数的不同表单辅助方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T22:16:14.053

_tag 系列方法通常需要一个 name 参数（否则它们将是相当无用的标签，因此它始终是第一个参数而不是哈希的一部分。因为提交帮助程序是作为表单的一部分调用的，Rails 可以假定该字段的name 属性，然后可以使选项散列第一个参数。

# html - 背景未显示在具有 2 个 Div Html 的 DIV 上

> ID：15799141
> 
> 赞同：0
> 
> 时间：2013-04-03T22:11:17.800
> 
> 标签：html, css, css-float

我有一个“容器”DIV，里面有 2 个不同高度的浮动 DIV，当我在“容器”DIV 上应用背景属性时，它不起作用。

```
<div id="container">
    <div id="left"></div>
    <div id="right"></div>
</div> 
```

![在此处输入图像描述](https://i.stack.imgur.com/zuF7h.png)

[http://jsfiddle.net/arthurg/XUmsU/](http://jsfiddle.net/arthurg/XUmsU/)

如何在容器上显示背景（使用 CSS）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:12:07.860

添加溢出：隐藏；到容器。像这样：

```
#container{
    height:100%;
    background:red;
    overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:15:16.857

[http://jsfiddle.net/XUmsU/1/](http://jsfiddle.net/XUmsU/1/)

```
<div id="container">
  <div id="left"></div>
  <div id="right"></div>
</div>

#container{
   height:100%;
   background:red;
  overflow:hidden;
 }

#left{
   width:100px;
   background:green;
   height:30px;
   float:left;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:13:38.907

你需要清除浮动。

`<br style="clear: both"/>`在这两个浮动 div 之后添加它。

HTML：

```
<div id="container">
    <div id="left"></div>
    <div id="right"></div>
    <br style="clear: both"/>
</div> 
```

[http://jsfiddle.net/XUmsU/3/](http://jsfiddle.net/XUmsU/3/)

clearfix 还有其他（新）方法（[带有伪类`:before`和`:after`](http://css-tricks.com/snippets/css/clear-fix/)）。

# css - 我怎样才能让这个粘性页脚工作？

> ID：15799155
> 
> 赞同：0
> 
> 时间：2013-04-03T22:12:31.503
> 
> 标签：css, padding, sticky-footer, sticky, jsbin

我已经在我的网站上应用了从[这里](http://www.cssstickyfooter.com/)获得的 CSS 粘性页脚教程，但由于某种原因我无法让它工作？

[JSBin](http://jsbin.com/eyoric/5/edit)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:33:48.893

从#body 中删除上边距并用填充替换它：

```
#body {
    width: 1200px;
    margin: 0 auto;
    overflow:auto;
    padding-top: 80px;
    padding-bottom: 170px;
} 
```

将 100% 高度添加到 html（不仅是正文）：

```
html, body {
  background-color: #FFF;
  margin: 0;
  padding: 0;
  height: 100%;
} 
```

[完整的 JSBin 解决方案](http://jsbin.com/eyoric/9/edit)和[预览](http://jsbin.com/eyoric/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:16:44.950

您是否在 HTML 代码中应用了正确的`#footer`id？

```
<div id="footer">

</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:19:32.023

我无法立即看到您的代码有什么问题（它有很多 css，而且您使用了像中心这样的奇怪标签）。我发誓这个版本的粘性页脚但是：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

对我来说效果很好，并且非常兼容旧版/跨浏览器。也许这是你的一个选择......

# java - 一起使用 BufferedWriter 和 BufferedOutputStream 是不是有点矫枉过正？

> ID：15799157
> 
> 赞同：10
> 
> 时间：2013-04-03T22:12:35.690
> 
> 标签：java, sockets, networking, outputstream

我想写一个套接字。通过阅读有关网络 IO 的信息，在我看来，写入它的最佳方法是执行以下操作：

```
OutputStream outs=null;
BufferedWriter out=null;
out =
  new BufferedWriter(
    new OutputStreamWriter(new BufferedOutputStream(outs),"UTF-8")); 
```

`BufferedWriter`会将输入缓冲到推荐的，`OutputStreamWriter`因为它会阻止编写器为每个字符启动编码器。

然后`BufferedOutputStream`将缓冲来自 的字节，`Writer`以避免一次将一个字节潜在地放到网络上。

看起来有点矫枉过正，但这一切似乎都有帮助？感谢任何帮助..

编辑：从 javadoc 上`OutputStreamWriter`：

> 每次调用 write() 方法都会导致对给定字符调用编码转换器。结果字节在写入底层输出流之前累积在缓冲区中。可以指定此缓冲区的大小，但默认情况下它对于大多数用途来说足够大。请注意，传递给 write() 方法的字符不会被缓冲。
> 
> 为了获得最高效率，请考虑将 OutputStreamWriter 包装在 BufferedWriter 中，以避免频繁的转换器调用。例如：

```
Writer out = new BufferedWriter(new OutputStreamWriter(System.out)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T22:36:52.580

Buffered* 类的目的是将小的写操作合并成一个更大的写操作，从而减少系统调用的数量，并提高吞吐量。

由于 BufferedWriter 已经在缓冲区中收集写入，然后将缓冲区中的字符转换为另一个缓冲区，并在单个操作中将该缓冲区写入底层 OutputStream，因此已使用大型写入操作调用 OutputStream。因此， BufferedOutputStream 找不到可组合的内容，而且只是多余的。

顺便说一句，这同样适用于 BufferedWriter：只有一次只向写入器传递几个字符时，缓冲才会有所帮助。如果您知道调用者只写入大字符串，那么 BufferedWriter 将找不到任何可组合的内容，而且也是多余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:17:37.313

> BufferedWriter 会将输入缓冲到 outputStreamWriter，这是推荐的，因为它可以防止编写器为每个字符启动编码器。

由谁推荐，在什么情况下推荐？“启动编码器”是什么意思？无论如何，您是否一次只写一个字符给作者？（我们不太了解您如何使用编写器……这可能很重要。）

> 然后 BufferedOutputStream 将缓冲来自 Writer 的字节，以避免一次将一个字节潜在地放到网络上。

是什么让您认为它会一次写入一个字节？我认为一次向底层写入器写入一个字节的可能性很小`OutputStreamWriter`，除非你真的一次写入一个字符。

此外，我希望网络输出流使用类似[Nagle 的算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)来避免发送单字节数据包。

与优化一样，您应该根据证据进行...您是否在使用和不使用这些缓冲层的情况下进行了任何测试？

编辑：澄清一下，我并不是说缓冲类没有用。在某些情况下，它们*绝对*是正确的方法。我只是说，与*所有*优化一样，不应盲目使用它们。您应该考虑您要优化的内容（处理器使用情况、内存使用情况、网络使用情况等）并进行测量。这里有很多因素很重要——尤其是写入模式。如果你已经在写“大块”——写大块的字符数据——那么缓冲区的影响相对较小。如果您实际上一次只写一个字符给作者，那么它们会更重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T02:38:44.197

是的，这是矫枉过正。来自[Javadoc`OutputStreamWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStreamWriter.html)：“每次调用 write() 方法都会导致在给定字符上调用编码转换器。结果字节在写入底层输出流之前累积在缓冲区中。”。

# php - 我如何从这个 php 文件中获取值？

> ID：15799158
> 
> 赞同：0
> 
> 时间：2013-04-03T22:12:37.150
> 
> 标签：php, javascript, random, d3.js

我最近进入了 d3 javascript 库。

我制作了一个散点图，可以从数组中获取随机值

这是代码

```
<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <script type="text/javascript" src="d3.v3.js"></script>
    <style>
        .axis path,
        .axis line
        {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }

        .axis text
        {
            font-family: sans-serif;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <script type="text/javascript">

        //Width and height
        var w = 500;
        var h = 300;
        //fix padding issues
        var padding = 30;

        //var dataset = [
            //          [5, 20], [480, 90], [250, 50], [100, 33], [330, 95],
                //      [410, 12], [475, 44], [25, 67], [85, 21], [220, 88], [600, 150], [77, 69], [290, 68]

                     // ];

        var dataset = [];
        var numDataPoints = 50;
        var xRange = Math.random() * 1000;
        var yRange = Math.random() * 1000;
        for (var i = 0; i < numDataPoints; i++) {
            var newNumber1 = Math.round(Math.random() * xRange);
            var newNumber2 = Math.round(Math.random() * yRange);
            dataset.push([newNumber1, newNumber2]);
            }

        //Create scale functions
        var rScale = d3.scale.linear()
                 .domain([0, d3.max(dataset, function(d) { return d[1]; })])
                 .range([2, 5]);

        var xScale = d3.scale.linear()
            .domain([0, d3.max(dataset, function(d) { return d[0]; })])
            .range([padding, w - padding * 2]);

        var yScale = d3.scale.linear()
            .domain([0, d3.max(dataset, function(d) { return d[1]; })])
            .range([h - padding, padding]);

        //Create SVG element
        var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        //create circles
        svg.selectAll("circle")
           .data(dataset)
           .enter()
           .append("circle")
           .attr("cx", function(d) {
                return xScale(d[0]); //use scale function
           })
           .attr("cy", function(d) {
                return yScale(d[1]); //use scale function
           })
           .attr("r", function(d) {
                 return rScale(d[1]);
           });

        //create svg text   
        //svg.selectAll("text")
         //  .data(dataset)
         //  .enter()
         //  .append("text")
         //  .text(function(d) {
         //         return d[0] + "," + d[1];
         //  })
         //  .attr("x", function(d) {
         //         return xScale(d[0]);
         //  })
          // .attr("y", function(d) {
         //         return yScale(d[1]);
         //  })
         //  .attr("font-family", "sans-serif")
          // .attr("font-size", "11px")
          // .attr("fill", "red");

        //create axis
        var xAxis = d3.svg.axis()
            .scale(xScale)
            .orient("bottom")
            .ticks(5);
        //place axis    
        svg.append("g")
            .attr("class", "axis")
            .attr("transform", "translate(0," + (h - padding) + ")")
            .call(xAxis);

        //define y axis
        var yAxis = d3.svg.axis()
              .scale(yScale)
              .orient("left")
              .ticks(5);
        //place y axis    
        svg.append("g")
            .attr("class", "axis")
            .attr("transform", "translate(" + padding + ",0)")
            .call(yAxis);

    </script>
</body> 
```

如您所见，它绘制了随机创建并放入数组中的值。这很棒，但我想做一个小改动。我想创建一个生成随机数的 php 文件并改为绘制这些文件。

php文件很简单

```
<?php
echo rand(1, 50);
?> 
```

那么我实际上如何
1\. 获取 php 文件以生成 20 个随机数
2\. 实际上将这些数字放入散点图的数组中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:20:58.437

这个 PHP 代码可以解决问题：

```
<?php
$i=20;
while($i > 0) {
    echo rand(1, 50);
    $i--;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:23:21.717

要在 PHP 中生成随机数，请将项目推送到数组，然后回显：

```
$count = 0;
while($count < 20) {
    $numbers[$count] = rand(1, 50);
    $count++;
}
echo json_encode($numbers); 
```

这应该产生类似的东西：

`[35,5,46,25,22,47,23,27,15,17,30,27,17,36,24,40,10,30,14,20]`

使用 JavaScript 和 AJAX，获取 PHP 页面并使用解析`JSON.parse`

获取 PHP 页面并解析（使用 jQuery）：

```
var random = [];
$.get("random.php",function(data) {
    random = JSON.parse(data);
} 
```

注意：对于 PHP 脚本，您也可以使用`array_push`，但我使用上面的只是因为我们已经有一个`while`循环。

# salesforce - 行号在范围内的 SOQL 查询

> ID：15799160
> 
> 赞同：1
> 
> 时间：2013-04-03T22:12:46.893
> 
> 标签：salesforce, force.com, soql

如何在 SOQL 中创建查询，例如：

`SELECT Id FROM User WHERE rownum > 101 AND rownum < 200`

我正在尝试在加载前 100 个的位置进行分页，然后如果您单击“加载更多”，我可以查询下一个 100。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:35:19.320

出于分页的目的，您通常只需进行整个查询（在您的示例中只是 SELECT Id FROM User），将批量大小设置为页面大小，然后使用[queryMore()](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_querymore.htm#kanchor680)获取下一批. 此方法确实需要您存储从初始查询中获得的 QueryResult 中的 QueryLocator —— 我在上面链接到的文章中的示例代码显示了一些很好的示例。

如果您使用 Visualforce 页面执行此操作，您还有另一个选择—— SOQL 还有一个 OFFSET 子句，您可以使用它来滚动到特定行。 [这是一篇描述它的文章。](http://www.redpointsolutions.com/add-pagination-to-your-visualforce-pages-using-the-soql-offset-clause) 不过要小心——OFFSET 会受到一些限制，如果用户翻页太多，可能会妨碍您（有关详细信息，请参阅本页的 SOSL 和 SOQL 限制部分[）](http://www.salesforce.com/us/developer/docs/api/index.htm)。

# python - Pandas MultiIndex 中的重采样

> ID：15799162
> 
> 赞同：74
> 
> 时间：2013-04-03T22:12:51.567
> 
> 标签：python, pandas, time-series, multi-index, hierarchical-data

我有一些分层数据，这些数据最终变成时间序列数据，看起来像这样：

```
df = pandas.DataFrame(
    {'value_a': values_a, 'value_b': values_b},
    index=[states, cities, dates])
df.index.names = ['State', 'City', 'Date']
df

                               value_a  value_b
State   City       Date                        
Georgia Atlanta    2012-01-01        0       10
                   2012-01-02        1       11
                   2012-01-03        2       12
                   2012-01-04        3       13
        Savanna    2012-01-01        4       14
                   2012-01-02        5       15
                   2012-01-03        6       16
                   2012-01-04        7       17
Alabama Mobile     2012-01-01        8       18
                   2012-01-02        9       19
                   2012-01-03       10       20
                   2012-01-04       11       21
        Montgomery 2012-01-01       12       22
                   2012-01-02       13       23
                   2012-01-03       14       24
                   2012-01-04       15       25 
```

我想对每个城市进行时间重采样，所以像

```
df.resample("2D", how="sum") 
```

会输出

```
 value_a  value_b
State   City       Date                        
Georgia Atlanta    2012-01-01        1       21
                   2012-01-03        5       25
        Savanna    2012-01-01        9       29
                   2012-01-03       13       33
Alabama Mobile     2012-01-01       17       37
                   2012-01-03       21       41
        Montgomery 2012-01-01       25       45
                   2012-01-03       29       49 
```

照原样，`df.resample('2D', how='sum')`让我

```
TypeError: Only valid with DatetimeIndex or PeriodIndex 
```

很公平，但我有点希望这能奏效：

```
>>> df.swaplevel('Date', 'State').resample('2D', how='sum')
TypeError: Only valid with DatetimeIndex or PeriodIndex 
```

在这一点上我真的没有想法了......有什么方法可以帮助我吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-03T22:28:18.550

[`pd.Grouper`](http://pandas.pydata.org/pandas-docs/version/0.14.1/generated/pandas.Grouper.html) 允许您指定“目标对象的 groupby 指令”。特别是，您可以使用它按日期分组，即使`df.index`它不是`DatetimeIndex`：

```
df.groupby(pd.Grouper(freq='2D', level=-1)) 
```

`level=-1`告诉`pd.Grouper`在 MultiIndex 的最后一级中查找日期。此外，您可以将其与索引中的其他级别值结合使用：

```
level_values = df.index.get_level_values
result = (df.groupby([level_values(i) for i in [0,1]]
                      +[pd.Grouper(freq='2D', level=-1)]).sum()) 
```

它看起来有点尴尬，但`using_Grouper`结果比我原来的建议要快得多，`using_reset_index`：

```
import numpy as np
import pandas as pd
import datetime as DT

def using_Grouper(df):
    level_values = df.index.get_level_values
    return (df.groupby([level_values(i) for i in [0,1]]
                       +[pd.Grouper(freq='2D', level=-1)]).sum())

def using_reset_index(df):
    df = df.reset_index(level=[0, 1])
    return df.groupby(['State','City']).resample('2D').sum()

def using_stack(df):
    # http://stackoverflow.com/a/15813787/190597
    return (df.unstack(level=[0,1])
              .resample('2D').sum()
              .stack(level=[2,1])
              .swaplevel(2,0))

def make_orig():
    values_a = range(16)
    values_b = range(10, 26)
    states = ['Georgia']*8 + ['Alabama']*8
    cities = ['Atlanta']*4 + ['Savanna']*4 + ['Mobile']*4 + ['Montgomery']*4
    dates = pd.DatetimeIndex([DT.date(2012,1,1)+DT.timedelta(days = i) for i in range(4)]*4)
    df = pd.DataFrame(
        {'value_a': values_a, 'value_b': values_b},
        index = [states, cities, dates])
    df.index.names = ['State', 'City', 'Date']
    return df

def make_df(N):
    dates = pd.date_range('2000-1-1', periods=N)
    states = np.arange(50)
    cities = np.arange(10)
    index = pd.MultiIndex.from_product([states, cities, dates], 
                                       names=['State', 'City', 'Date'])
    df = pd.DataFrame(np.random.randint(10, size=(len(index),2)), index=index,
                      columns=['value_a', 'value_b'])
    return df

df = make_orig()
print(using_Grouper(df)) 
```

产量

```
 value_a  value_b
State   City       Date                        
Alabama Mobile     2012-01-01       17       37
                   2012-01-03       21       41
        Montgomery 2012-01-01       25       45
                   2012-01-03       29       49
Georgia Atlanta    2012-01-01        1       21
                   2012-01-03        5       25
        Savanna    2012-01-01        9       29
                   2012-01-03       13       33 
```

* * *

这是在 5000 行 DataFrame 上比较`using_Grouper`,`using_reset_index`的基准：`using_stack`

```
In [30]: df = make_df(10)

In [34]: len(df)
Out[34]: 5000

In [32]: %timeit using_Grouper(df)
100 loops, best of 3: 6.03 ms per loop

In [33]: %timeit using_stack(df)
10 loops, best of 3: 22.3 ms per loop

In [31]: %timeit using_reset_index(df)
1 loop, best of 3: 659 ms per loop 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2019-05-10T11:54:03.143

您需要该[`groupby()`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html)方法并为[`pd.Grouper`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Grouper.html)您希望在生成的 DataFrame 中维护的 MultiIndex 的每个级别提供一个。然后，您可以应用选择的操作。

要重新采样日期或时间戳级别，您需要使用选择的频率设置参数 -不推荐`freq`使用类似的方法 using以支持参数集。`pd.TimeGrouper()``pd.Grouper()``freq`

这应该为您提供所需的 DataFrame：

```
df.groupby([pd.Grouper(level='State'), 
            pd.Grouper(level='City'), 
            pd.Grouper(level='Date', freq='2D')]
          ).sum() 
```

pandas 文档中的[时间序列指南](http://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#resampling)描述`resample()`为：

> ...基于时间的 groupby，然后是对其每个组的归约方法。

因此，使用在技术上应该与在具有单个索引的 DataFrame 上`groupby()`使用相同的操作。`.resample()`

同一段指向[关于重采样的食谱部分以](http://pandas.pydata.org/pandas-docs/stable/user_guide/cookbook.html#resampling)获取更高级的示例，其中“[使用 MultiIndex 进行分组](https://stackoverflow.com/questions/41483763/pandas-timegrouper-on-multiindex)”条目与此问题高度相关。希望有帮助。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-04T14:16:04.557

使用堆栈/取消堆栈的替代方法

```
df.unstack(level=[0,1]).resample('2D', how='sum').stack(level=[2,1]).swaplevel(2,0)

                               value_a  value_b
State   City       Date
Georgia Atlanta    2012-01-01        1       21
Alabama Mobile     2012-01-01       17       37
        Montgomery 2012-01-01       25       45
Georgia Savanna    2012-01-01        9       29
        Atlanta    2012-01-03        5       25
Alabama Mobile     2012-01-03       21       41
        Montgomery 2012-01-03       29       49
Georgia Savanna    2012-01-03       13       33 
```

笔记：

1.  不知道性能比较
2.  可能的熊猫错误 - stack(level=[2,1]) 工作，但 stack(level=[1,2]) 失败

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-06-07T14:44:14.840

这有效：

```
df.groupby(level=[0,1]).apply(lambda x: x.set_index('Date').resample('2D', how='sum'))

                               value_a  value_b
State   City       Date
Alabama Mobile     2012-01-01       17       37
                   2012-01-03       21       41
        Montgomery 2012-01-01       25       45
                   2012-01-03       29       49
Georgia Atlanta    2012-01-01        1       21
                   2012-01-03        5       25
        Savanna    2012-01-01        9       29
                   2012-01-03       13       33 
```

如果 Date 列是字符串，则预先转换为 datetime：

```
df['Date'] = pd.to_datetime(df['Date']) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-22T18:53:41.547

我有同样的问题，有一段时间让我头疼，但后来我阅读了[0.19.2 文档](http://pandas.pydata.org/pandas-docs/version/0.19.2/generated/pandas.DataFrame.resample.html#pandas-dataframe-resample)`.resample`中的函数文档，我看到有一个新的称为“级别”，您可以使用它来指定一个级别多索引。`kwarg`

[编辑： “新增功能”](http://pandas.pydata.org/pandas-docs/version/0.19.2/whatsnew.html#other-enhancements)部分中的更多详细信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-20T19:38:50.147

我知道这个问题已经有几年的历史了，但我遇到了同样的问题，并找到了一个需要 1 行的更简单的解决方案：

```
>>> import pandas as pd
>>> ts = pd.read_pickle('time_series.pickle')
>>> ts
xxxxxx1  yyyyyyyyyyyyyyyyyyyyyy1  2012-07-01     1
                                  2012-07-02    13
                                  2012-07-03     1
                                  2012-07-04     1
                                  2012-07-05    10
                                  2012-07-06     4
                                  2012-07-07    47
                                  2012-07-08     0
                                  2012-07-09     3
                                  2012-07-10    22
                                  2012-07-11     3
                                  2012-07-12     0
                                  2012-07-13    22
                                  2012-07-14     1
                                  2012-07-15     2
                                  2012-07-16     2
                                  2012-07-17     8
                                  2012-07-18     0
                                  2012-07-19     1
                                  2012-07-20    10
                                  2012-07-21     0
                                  2012-07-22     3
                                  2012-07-23     0
                                  2012-07-24    35
                                  2012-07-25     6
                                  2012-07-26     1
                                  2012-07-27     0
                                  2012-07-28     6
                                  2012-07-29    23
                                  2012-07-30     0
                                                ..
xxxxxxN  yyyyyyyyyyyyyyyyyyyyyyN  2014-06-02     0
                                  2014-06-03     1
                                  2014-06-04     0
                                  2014-06-05     0
                                  2014-06-06     0
                                  2014-06-07     0
                                  2014-06-08     2
                                  2014-06-09     0
                                  2014-06-10     0
                                  2014-06-11     0
                                  2014-06-12     0
                                  2014-06-13     0
                                  2014-06-14     0
                                  2014-06-15     0
                                  2014-06-16     0
                                  2014-06-17     0
                                  2014-06-18     0
                                  2014-06-19     0
                                  2014-06-20     0
                                  2014-06-21     0
                                  2014-06-22     0
                                  2014-06-23     0
                                  2014-06-24     0
                                  2014-06-25     4
                                  2014-06-26     0
                                  2014-06-27     1
                                  2014-06-28     0
                                  2014-06-29     0
                                  2014-06-30     1
                                  2014-07-01     0
dtype: int64
>>> ts.unstack().T.resample('W', how='sum').T.stack()
xxxxxx1  yyyyyyyyyyyyyyyyyyyyyy1  2012-06-25/2012-07-01      1
                                  2012-07-02/2012-07-08     76
                                  2012-07-09/2012-07-15     53
                                  2012-07-16/2012-07-22     24
                                  2012-07-23/2012-07-29     71
                                  2012-07-30/2012-08-05     38
                                  2012-08-06/2012-08-12    258
                                  2012-08-13/2012-08-19    144
                                  2012-08-20/2012-08-26    184
                                  2012-08-27/2012-09-02    323
                                  2012-09-03/2012-09-09    198
                                  2012-09-10/2012-09-16    348
                                  2012-09-17/2012-09-23    404
                                  2012-09-24/2012-09-30    380
                                  2012-10-01/2012-10-07    367
                                  2012-10-08/2012-10-14    163
                                  2012-10-15/2012-10-21    338
                                  2012-10-22/2012-10-28    252
                                  2012-10-29/2012-11-04    197
                                  2012-11-05/2012-11-11    336
                                  2012-11-12/2012-11-18    234
                                  2012-11-19/2012-11-25    143
                                  2012-11-26/2012-12-02    204
                                  2012-12-03/2012-12-09    296
                                  2012-12-10/2012-12-16    146
                                  2012-12-17/2012-12-23     85
                                  2012-12-24/2012-12-30    198
                                  2012-12-31/2013-01-06    214
                                  2013-01-07/2013-01-13    229
                                  2013-01-14/2013-01-20    192
                                                          ...
xxxxxxN  yyyyyyyyyyyyyyyyyyyyyyN  2013-12-09/2013-12-15      3
                                  2013-12-16/2013-12-22      0
                                  2013-12-23/2013-12-29      0
                                  2013-12-30/2014-01-05      1
                                  2014-01-06/2014-01-12      3
                                  2014-01-13/2014-01-19      6
                                  2014-01-20/2014-01-26     11
                                  2014-01-27/2014-02-02      0
                                  2014-02-03/2014-02-09      1
                                  2014-02-10/2014-02-16      4
                                  2014-02-17/2014-02-23      3
                                  2014-02-24/2014-03-02      1
                                  2014-03-03/2014-03-09      4
                                  2014-03-10/2014-03-16      0
                                  2014-03-17/2014-03-23      0
                                  2014-03-24/2014-03-30      9
                                  2014-03-31/2014-04-06      1
                                  2014-04-07/2014-04-13      1
                                  2014-04-14/2014-04-20      1
                                  2014-04-21/2014-04-27      2
                                  2014-04-28/2014-05-04      8
                                  2014-05-05/2014-05-11      7
                                  2014-05-12/2014-05-18      5
                                  2014-05-19/2014-05-25      2
                                  2014-05-26/2014-06-01      8
                                  2014-06-02/2014-06-08      3
                                  2014-06-09/2014-06-15      0
                                  2014-06-16/2014-06-22      0
                                  2014-06-23/2014-06-29      5
                                  2014-06-30/2014-07-06      1
dtype: int64 
```

`ts.unstack().T.resample('W', how='sum').T.stack()`就是这样！非常简单，而且看起来非常高效。我正在阅读的泡菜是 331M，所以这是一个非常强大的数据结构；在我的 MacBook Pro 上重新采样只需几秒钟。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-14T14:32:11.583

我还没有检查过它的效率，但我对多索引执行日期时间操作的本能方式是通过一种使用字典理解的手动“拆分-应用-组合”过程。

假设您的 DataFrame 未编制索引。（你可以先做`.reset_index()`），它的工作原理如下：

1.  按非日期列分组
2.  将“日期”设置为索引并对每个块重新采样
3.  使用重新组装`pd.concat`

最终代码如下所示：

```
pd.concat({g: x.set_index("Date").resample("2D").mean()
                   for g, x in house.groupby(["State", "City"])}) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-25T00:34:57.300

我自己试过这个，很短也很简单（我只会使用 2 个索引，你会得到完整的想法）：

**第 1 步**：重新采样日期，但这会给你没有其他索引的日期：

```
new=df.reset_index('City').groupby('crime', group_keys=False).resample('2d').sum().pad() 
```

这会给你日期和它的计数

**第 2 步**：以与日期相同的顺序获取分类索引：

```
col=df.reset_index('City').groupby('City', group_keys=False).resample('2D').pad()[['City']] 
```

这将为您提供一个包含城市名称且与日期顺序相同的新列。

**第 3 步**：将数据框合并在一起

```
new_df=pd.concat([new, col], axis=1) 
```

这很简单，你可以让它变得更短。

# c# - MouseButton.LeftButton 在拖放期间错误地报告为已释放 GiveFeedback

> ID：15799163
> 
> 赞同：3
> 
> 时间：2013-04-03T22:12:54.397
> 
> 标签：c#, .net, wpf, drag-and-drop

不知道为什么会这样。我在拖放时订阅了 GiveFeedback。

在此 GiveFeedback 中，我正在检查鼠标左键的状态。如果它发布了，我想做“某事”（不重要）。

下面总是返回“鼠标按钮释放”。

我的代码：

```
private void GiveDragFeedback(object sender, GiveFeedbackEventArgs args)
{
  var mouseArgs = new MouseEventArgs(Mouse.PrimaryDevice, 0);

  if (Mouse.LeftButton == MouseButtonState.Pressed)
    Console.WriteLine("Mouse Button PRESSED");
  else
    Console.WriteLine("Mouse Button RELEASED");

  if (Mouse.PrimaryDevice.LeftButton == MouseButtonState.Pressed)
    _adorner_MouseMove(sender, new MouseEventArgs(Mouse.PrimaryDevice, 0));
  else
    _adorner_MouseUp(sender, mouseArgs);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-24T07:01:25.453

改为这样做：

```
 protected override void OnQueryContinueDrag(QueryContinueDragEventArgs e)
    {
        if (!e.KeyStates.HasFlag(DragDropKeyStates.LeftMouseButton))
        {
             e.Action = DragAction.Cancel;
        }
        else
        {
            e.Action = DragAction.Continue;
        }
    } 
```

# php - php 是用户会话/cookie 有效重定向错误

> ID：15799168
> 
> 赞同：0
> 
> 时间：2013-04-03T22:13:11.573
> 
> 标签：php, session

以下代码应检查是否存在有效会话或有效 cookie，`include_once file A.php`如果不存在则检查`include_once login.php`。

到目前为止，`login.php`and`logout.php`正在正确执行（会话/cookie）正在创建和销毁，但以下代码仍然没有显示正确的内容。

正如这段代码所代表的那样，我看到了`login.php`不管是有效的会话还是 cookie。

任何帮助都会很棒。谢谢你。

```
<?php
include_once '../accounts/dbc.php'; 

if (isset($_SESSION['user_id']) && isset($_SESSION['user_name']) ) 
{
    include_once 'A.php';
}
else if(isset($_COOKIE['user_id']) && isset($_COOKIE['user_key'])){
    /* we double check cookie expiry time against stored in database */

    $cookie_user_id  = filter($_COOKIE['user_id']);
    $rs_ctime = mysql_query("select `ckey`,`ctime` from `users` where `id` ='$cookie_user_id'") or die(mysql_error());
    list($ckey,$ctime) = mysql_fetch_row($rs_ctime);
    // coookie expiry
    if( (time() - $ctime) > 60*60*24*COOKIE_TIME_OUT) {

        include_once '../login.php';
        }
/* Security check with untrusted cookies - dont trust value stored in cookie.       
/* We also do authentication check of the `ckey` stored in cookie matches that stored in database during login*/

     if( !empty($ckey) && is_numeric($_COOKIE['user_id']) && isUserID($_COOKIE['user_name']) && $_COOKIE['user_key'] == sha1($ckey)  ) {
          session_regenerate_id(); //against session fixation attacks.

          $_SESSION['user_id'] = $_COOKIE['user_id'];
          $_SESSION['user_name'] = $_COOKIE['user_name'];
        /* query user level from database instead of storing in cookies */  
          list($user_level) = mysql_fetch_row(mysql_query("select user_level from users where id='$_SESSION[user_id]'"));

          $_SESSION['user_level'] = $user_level;
          $_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);

          include_once 'A.php';
       } 
       else {
          include_once '../login.php';
       }

  } else {
  include_once '../login.php';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-08T23:07:29.763

花了两天 13 小时并得到了一些帮助，但在第三次重写之后，事情似乎只处理了一个小的服务器因果错误，我只能忍受。这个问题可以关闭。谢谢你。

# ios - 为不工作的单元格分配颜色

> ID：15799169
> 
> 赞同：0
> 
> 时间：2013-04-03T22:13:12.307
> 
> 标签：ios, uitableview

例如，我正在尝试将表格视图中第一个单元格的背景颜色设置为蓝色，但它不起作用。每次我开始滚动时，蓝色都会跳到不同的单元格。我试过这些代码。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{

if([[self.menu objectAtIndex:indexPath.row] isEqual:@"a string"]){

    cell.contentView.backgroundColor=[UIColor blueColor] ;

}

} 
```

和

```
 - (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell       forRowAtIndexPath:(NSIndexPath *)indexPath
 {

if(indexPath.row==0){

    cell.contentView.backgroundColor=[UIColor blueColor] ;

}

} 
```

我也在索引路径的 cellfro 行中尝试过。我错过了什么吗？

这是我用于 cellforrowatindexpath 的代码：

```
 if(indexPath.row==0){

    cell.contentView.backgroundColor=[UIColor blueColor] ;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:18:00.860

在 if 上添加 else ...

```
if(indexPath.row==0){

        cell.contentView.backgroundColor=[UIColor blueColor] ;

    }
else
 cell.contentView.backgroundColor=[UIColor whiteColor] ; 
```

uitableviewCell 正在被重用......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T22:24:11.903

在您的情况下，单元格会跳转颜色，因为滚动时会重用表格视图中的单元格以节省内存，以避免发生任何奇怪的事情，您需要专门为任何单元格设置颜色。

您已经完成了第一步，即在 indexPath.row == 0 现在为单元格着色以覆盖第二部分：

你需要遵循这样的模式：

```
if(indexPath.row == 0){
    //if its the first cell then keep it this color
    cell.contentView.backgroundColor = [UIColor blueColor];
}
else {
    //Any other cell keep it this color
    cell.contentView.backgroundColor = [UIColor whiteColor];
} 
```

# php - 为 foreach() 提供的参数无效，is_array() 返回 true

> ID：15799170
> 
> 赞同：0
> 
> 时间：2013-04-03T22:13:18.513
> 
> 标签：php

我有以下代码，我无法弄清楚它有什么问题。我提供一个数组作为参数，并且 is_array($primes) 返回 true。我在这里缺少什么吗？

```
function generate_primes($max)
{
$i = 4;
$primes = [2, 3];

while($i < $max)
{
    $isPrime = true;

    foreach($primes as $value)
    {
        if($i % $value == 0)
        {
            $isPrime = false;
            break;
        }

    }
    if($isPrime)
        $primes = $i;

    $i++;
}

return $primes;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:17:34.063

`$primes = $i;`表明您`$primes`在找到第一个素数 5 后重新分配了变量。此时它不再是数组。

相反，使用这个：

```
if($isPrime)
    array_push($primes,$i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:20:03.857

使用 php 数组类型：

```
$primes = array(2, 3); 
```

然后，在向数组添加新素数时：

```
array_push($primes, $i); 
```

# php - 更改自定义帖子类型的 WP 管理员帖子状态过滤器

> ID：15799171
> 
> 赞同：5
> 
> 时间：2013-04-03T22:13:25.383
> 
> 标签：php, wordpress, wordpress-hook

您如何更改/重命名 WP 自定义帖子类型页面顶部的帖子状态文本

全部 | 发表 | 预定 | 草稿

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T23:06:47.457

使用过滤器`views_edit-{$post_type}`。修改数组以设置所需的帖子类型：

```
foreach( array( 'post', 'portfolio' ) as $hook )
    add_filter( "views_edit-$hook", 'modified_views_so_15799171' );

function modified_views_so_15799171( $views ) 
{
    $views['all'] = str_replace( 'All ', 'Tutti ', $views['all'] );

    if( isset( $views['publish'] ) )
        $views['publish'] = str_replace( 'Published ', 'Online ', $views['publish'] );

    if( isset( $views['future'] ) )
        $views['future'] = str_replace( 'Scheduled ', 'Future ', $views['future'] );

    if( isset( $views['draft'] ) )
        $views['draft'] = str_replace( 'Drafts ', 'In progress ', $views['draft'] );

    if( isset( $views['trash'] ) )
        $views['trash'] = str_replace( 'Trash ', 'Dustbin ', $views['trash'] );

    return $views;
} 
```

![预习](https://i.stack.imgur.com/1Mjnt.png)

# arrays - 使用 VBA 获取唯一值以在 VBA 中使用？

> ID：15799172
> 
> 赞同：4
> 
> 时间：2013-04-03T22:13:26.397
> 
> 标签：arrays, vba, excel, unique

我目前会在 Range、Cells 或类似的许多不同方式中使用类似的东西，它们的基本原理相同。

```
Range("A1", Range("A1").End(xlDown)).AdvancedFilter Action:=xlFilterCopy, _
    CopyToRange:=Range("IV1"), Unique:=True

Dim myArr as Variant 
myArr = Range("IV1", Range("IV1").End(xlDown))
Columns("IV").Delete 
```

有没有办法直接将这些唯一值加载到 VBA 中的任何类型的对象中，而无需复制到另一个位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T22:18:12.453

您可以使用 a`Collection Object`创建唯一条目。例如

```
Sub Sample()
    Dim Col As New Collection
    Dim itm
    Dim i As Long
    Dim CellVal As Variant

    '~~> Lets say looping through Row 1 to 22 For 
    '~~> Range("A1:A22") as mentioned in your recent comment
    For i = 1 To 22
        CellVal = Sheets("Sheet1").Range("A" & i).Value
        On Error Resume Next
        Col.Add CellVal, Chr(34) & CellVal & Chr(34)
        On Error GoTo 0
    Next i

    For Each itm In Col
        Debug.Print itm
    Next
End Sub 
```

**截图**：

![在此处输入图像描述](https://i.stack.imgur.com/7I9D7.png)

# c++ - c++ 指针向量 放置派生类但切片打印

> ID：15799175
> 
> 赞同：2
> 
> 时间：2013-04-03T22:13:48.810
> 
> 标签：c++, pointers, vector, derived-class

我正在研究 C++ 的指针和继承。\

我创建了向量 Employee 类的指针，其中包含名称和薪水。此外，它还具有打印功能，可以打印出姓名和工资。

我把它变成了虚拟的

```
 virtual void print() const; 
```

这里也是函数的实现

```
void Employee::print() const
{
    cout << "Inquiry Employee info..." << endl;
    cout <<  "Name:" << get_name() << "\n";
    cout << "Salary:" <<  get_salary() << "\n" << "\n";
} 
```

在派生类中，我又添加了一个私有数据部门名称并覆盖了打印功能。我将派生类放在指针向量中，并尝试在派生函数上调用该函数。但是，它只调用基类中的函数。

当我自己创建派生类对象并调用该打印函数时，它起作用了。

我应该改变什么以使基类指针向量中的派生类对象可以调用派生类中的函数？

添加 ＃＃

```
#ifndef MANAGER_H
#define MANAGER_H

#include <string>
#include<iostream>
#include "ccc_empl.h"
#include <iomanip>

class Manager : public Employee
{
public:
    Manager();
    Manager(string name, double salary, string dept);
    ~Manager();
    virtual string get_department() const;
    void print();

private:
    string deptName;
};
#endif 
```

执行

```
#include <iostream>
#include <string>

#include "manager.h"
#include "ccc_empl.h"
Manager::Manager(){}
Manager::Manager(string name, double salary, string dept)
: Employee(name,salary)
{
    deptName = dept;
}
Manager::~Manager(){}
string Manager::get_department() const
{
    return deptName;
}
void Manager::print()
{
    cout << "Inquiry Manager info..." << endl;
    cout << "Name:" << get_name()  << "\n";
    cout << "Salary:";
    cout  << get_salary() << "\n";
    cout <<  "Department:"<< get_department() << endl << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:22:55.740

您没有向我们展示 Derived 类打印函数，但我猜您忘记将其声明为 const。容易犯错误。

# c++ - 从另一个数组 C++ 复制随机元素到数组中的最快方法

> ID：15799179
> 
> 赞同：0
> 
> 时间：2013-04-03T22:14:10.907
> 
> 标签：c++, c, sorting, fill

标题几乎说明了一切，但我将举例说明：假设您有一个字符数组 a 和另一个字符数组 b。有没有更好的方法只放入位于 b 中主要位置的字符？假设我们有一个包含素数位置的数组。现在我的天真代码看起来像这样。

```
for(i = 0; i < n; i++)
 a[i] = b[j + prime[i]]; 
```

这里 prime[i] 存储了 b 的素数位置，b 远大于 a，j 是 b 中的任意位置（不会出现越界问题，因为 j+prime[i] 不超过 b 的边界） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:32:24.473

什么是更好的？一种方法是：如果在编译时知道 prime[] 位置，那么我们可以添加一个预取来提前获取缓存行。

这使得内存访问时间更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:23:44.800

您可以在将值读取（或复制）到数组中时执行此操作，使用素数函数告诉您一个数字是否为素数。

**我快速绘制的一种方法是生成素数，直到它们达到您的**数组容量，然后简单地遍历它们并从数组中复制所需的元素。我可以想到几种优化方法，例如在程序中使用“预处理”函数生成素数，这样你就可以重用列表。

质数列表将被缓存，并且访问时间会减少很多（您不太可能拥有非常庞大的质数列表）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T03:08:51.530

让我们从算法的角度来看这个。

您想对数组 A 中的每个条目执行哈希函数。假设您对数组 A 中的项目的状态一无所知，那么算法的运行时间下限为 O(n)，线性时间。您必须遍历每个成员，因为您没有更多信息可以帮助您“跳过”某些元素或优化流程。

也就是说，挑战变成了将算法保持在 O(n)。您演示的代码会执行此操作，假设您随后以相同的方式复制非质数。因此，对于复制步骤，从算法的角度来看，没有办法让它更快。但这并不意味着您执行散列步骤的方式不会影响速度。

# android - CSS -webkit-transform：Android 浏览器上的 translate()

> ID：15799182
> 
> 赞同：3
> 
> 时间：2013-04-03T22:14:19.517
> 
> 标签：android, css, webkit, webkit-transform

尽管在 iOS 和每个桌面浏览器中都取得了成功，但我似乎无法让 translate 属性或 -webkit-transform 在 Android 浏览器上正常工作。

我的“完整”解决方案是一个像这样的小型 jQuery 函数：

```
$.fn.transition = function (properties, options) {
    var $element = $(this);
    options = $.extend({}, cssDefaults, options);
    properties['webkitTransition'] = 'all ' + options.duration + 'ms ' + options.easing;
    $element.css(properties);
    return this;
}; 
```

像这样调用：

```
$element.css("transform","translate(1000px,0px)"); 
```

我在某些地方读到过，Android 同时破坏了对多个 css3 操作的支持；但是，即使我用这个简单的虚拟调用替换所有这些代码，转换也不会发生：

```
$element.css("-webkit-transform","translate(1000px,0px)"); 
```

我做错了什么是特定于android的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T20:20:47.233

我刚刚遇到了这个

```
-webkit-transform: translate3d(0,200px,0); 
```

所以我希望这会对你有所帮助。我相信这是 Android 浏览器中“损坏”的 css3 元素之一。

我不得不用`top: 200px;`

在您的情况下，我会尝试使用简单的方法`left`，例如`left: 1000px;`

`position`如果您需要更准确的控制，请记住您的陈述

# matlab - 使用向量 B 计算 B 的每个元素与 B 的每个其他元素的绝对差之和，从而产生另一个数组

> ID：15799189
> 
> 赞同：2
> 
> 时间：2013-04-03T22:14:43.673
> 
> 标签：matlab

因此，例如，给定：

```
B=[1:10] 
```

`res`应该：

```
res =

    45 37 31 27 25 25 27 31 37 45 
```

的第一个元素`res`是`45`因为

```
|1-1| + |1-2| + ....+ |1-10| = 45 
```

第二个因素是`37`因为

```
|2-1| + |2-2| + ...+ |2-10| = 37 
```

等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:20:54.893

代码：

```
sum(abs(bsxfun(@minus,B,B'))); 
```

输出：

```
ans =

    45    37    31    27    25    25    27    31    37    45 
```

# python - parsing non GNU-standard options using optparse in python

> ID：15799194
> 
> 赞同：2
> 
> 时间：2013-04-03T22:15:11.797
> 
> 标签：python, arguments, command-line-arguments, optparse

For some reason, I have non standard command line options for my program. My program takes in a long option also with a single '-'. For example, a valid command line option would be '-f' / '-foo'. Both short and long options need to have an argument separated by space or an '='.

I am trying to parse this using the optparse, but I understand that optparse does not support non GNU-standard options. Is there a way to tweak optparse to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:04:24.260

Here's a mildly hackish way to do what you need.

Subclass `Option` and `OptionParser` and patch some of the methods:

```
from optparse import Option, OptionError, OptionParser

class MyOption(Option):
    def _set_opt_strings(self, opts):
        for opt in opts:
            if len(opt) < 2:
                raise OptionError(
                    "invalid option string %r: "
                    "must be at least two characters long" % opt, self)
            elif len(opt) == 2:
                self._short_opts.append(opt)
            else:
                self._long_opts.append(opt)

class MyOptionParser(OptionParser):
    def _process_args(self, largs, rargs, values):
        while rargs:
            arg = rargs[0]
            if arg == "--":
                del rargs[0]
                return
            elif arg[0:2] == "--":
                self._process_long_opt(rargs, values)
            elif arg[:1] == "-" and len(arg) > 1:
                if len(arg) > 2:
                    self._process_long_opt(rargs, values)
                else:
                    self._process_short_opts(rargs, values)
            elif self.allow_interspersed_args:
                largs.append(arg)
                del rargs[0]
            else:
                return 
```

Now you can do

```
parser = MyOptionParser()
parser.add_option(MyOption("-f", "-file", dest="filename",
                 help="write report to FILE", metavar="FILE"))
parser.add_option(MyOption("-q", "-quiet",
                 action="store_false", dest="verbose", default=True,
                 help="don't print status messages to stdout")) 
```

With this, `parser` will accept `-file` as an option (and will not accept e.g. `-fq`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:22:37.640

From the [optparse documentation](http://docs.python.org/2/library/optparse.html#terminology)

> **option:**
> an argument used to supply extra information to guide or customize the execution of a program. There are many different syntaxes for options; the traditional Unix syntax is a hyphen (“-”) followed by a single letter, e.g. `-x` or `-F`. Also, traditional Unix syntax allows multiple options to be merged into a single argument, e.g. `-x -F` is equivalent to `-xF`. The GNU project introduced `--` followed by a series of hyphen-separated words, e.g. `--file` or `--dry-run`. *These are the only two option syntaxes provided by optparse*.

(emphasis added)

So no, you cannot specify other ways of handling arguments with `optparse`. You can, however, parse the arguments yourself by using `argv` from the [sys module](http://docs.python.org/2/library/sys.html#sys.argv).

This is going to be more work, but it might look something like:

```
from sys import argv
for arg in argv:
    if arg.startswith("-") or arg.startswith("--"):
        # Parse the argument 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:21:16.843

I don't think there's any way to tweak `optparse` (though I don't know for certain), but [`getopt`](http://docs.python.org/2/library/getopt.html) is your alternative that will handle C style command-line options.

# ios - 核心动画 - 按顺序播放 2 个动画

> ID：15799201
> 
> 赞同：0
> 
> 时间：2013-04-03T22:15:34.533
> 
> 标签：ios, animation

我正在尝试制作一个有点像速度计的动画。

第一个动画得到了针

```
CFTimeInterval localMediaTime = [needle convertTime:CACurrentMediaTime() fromLayer:nil];

CABasicAnimation *needAni = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
needAni.duration = 0.5f;
needAni.fromValue = [NSNumber numberWithFloat:0.0];
needAni.toValue = [NSNumber numberWithFloat:(rotVal * M_PI / 180.0)];
needAni.timingFunction = [CAMediaTimingFunction functionWithControlPoints:0.195: 0.600: 0.790: 0.405];
needAni.fillMode = kCAFillModeBackwards;

[needle.layer addAnimation:needAni forKey:nil]; 
```

在那之后，我想让针在达到全速时来回弹跳一点。这个动画就是这样做的：

```
CABasicAnimation *needAni2 = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
needAni2.duration = 0.1f;
needAni2.fromValue = [NSNumber numberWithFloat:(rotVal * M_PI / 180.0)];
needAni2.toValue = [NSNumber numberWithFloat:((rotVal+5) * M_PI / 180.0)];
needAni2.fillMode = kCAFillModeBackwards;
needAni2.autoreverses = YES;
needAni2.repeatCount = HUGE_VAL;
needAni2.beginTime = localMediaTime + 0.5f;

[needle.layer addAnimation:needAni2 forKey:nil]; 
```

现在，当我把它放在一起时，只会播放第二个动画。

我厌倦了将这两个动画放在一个组中，但我似乎不能只重复第二个动画，它会重复整个过程。如果我将组持续时间设置为 HUGE_VAL 是否存在性能问题，或者是否有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:35:18.157

我认为您可以坚持使用您的方法，因为这似乎是 CAGroupAnimation 的预期用途。只需确保为组设置适当的持续时间即可。如果您使组的持续时间短于您的预期动画，它将缩短您的动画。如果您使持续时间长于动画，则动画对象可能会在内存中逗留，直到该持续时间结束。

另一种选择是实现委托方法 -animationDidStop:finished: ，并在第一个动画调用时添加第二个动画。

CAAnimation 参考： [https ://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAAnimation](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAAnimation)

# sql - 计数/分组 T-SQL

> ID：15799204
> 
> 赞同：0
> 
> 时间：2013-04-03T22:16:04.723
> 
> 标签：sql, sql-server, sql-server-2008, tsql

您好以下是示例数据。

```
DateGroupID     StartDate       EndDate
1               2013-01-01      2013-01-07
2               2013-01-08      2013-01-14
3               2013-01-15      2013-01-21
.
.
.
15              2013-04-01      2013-04-07

EMPID   GroupID     JoinDate            TerminationDate
1       A           2013-01-01          2013-03-24
2       B           2013-01-05          NULL
3       C           2013-01-05          NULL
4       A           2013-01-05          2013-03-20
5       B           2013-01-17          NULL
6       D           2013-02-01          NULL
7       A           2013-02-24          NULL
8       A           2013-02-28          NULL
9       B           2013-03-02          NULL
10      B           2013-03-12          NULL
11      C           2013-03-22          NULL
12      C           2013-03-22          NULL
13      D           2013-03-26          NULL
14      D           2013-03-29          NULL
15      A           2013-04-01          NULL 
```

我正在尝试计算每天活跃的员工的数量，并根据我选择的 DateGroupID 按 GroupID 对其进行分组。

例如，如果我选择 DateGroupID = 1（在我假设的 WHERe 子句中），我想获取 StartDate 和 EndDate 之间每天的 ACTIVE 用户数。所以我的输出应该是

```
GROUPID     COUNT       Date
A           1           2013-01-01  (1 EMP was added to this group on this day)
B           0           2013-01-01  (NO Emp for this group were active on this day)
C           0           2013-01-01  (NO Emp for this group were active on this day)
D           0           2013-01-01  (NO Emp for this group were active on this day)

A           1           2013-01-02  (NO Emp for this group were added but 1 is active from the past)
B           0           2013-01-02  (NO Emp for this group were active on this day)
C           0           2013-01-02  (NO Emp for this group were active on this day)
D           0           2013-01-02  (NO Emp for this group were active on this day)

A           1           2013-01-03  (NO Emp for this group were added but 1 is active from the past)
B           0           2013-01-03  (NO Emp for this group were active on this day)
C           0           2013-01-03  (NO Emp for this group were active on this day)
D           0           2013-01-03  (NO Emp for this group were active on this day)

A           1           2013-01-04  (NO Emp for this group were added but 1 is active from the past)
B           0           2013-01-04  (NO Emp for this group were active on this day)
C           0           2013-01-04  (NO Emp for this group were active on this day)
D           0           2013-01-04  (NO Emp for this group were active on this day)

A           2           2013-01-05 (1 more Emp was added to this group on this day)
B           1           2013-01-05 (1 EMP was added to this group on this day)
C           1           2013-01-05 (1 EMP was added to this group on this day)
D           0           2013-01-05 (NO Emp for this group were active on this day)
.
.
.
.
A           2           2013-01-17 (2 EMP active on this day for this group)
B           2           2013-01-17 (1 more Emp was added to this group on this day))
C           1           2013-01-17 (NO Emp for this group were added but 1 is active from the past)
D           0           2013-01-17 (NO Emp for this group were active on this day)
.
.
.
A           2           2013-03-24 (2 EMP were removed and added as for this day, 2 active EMP)
B           4           2013-03-24 (So far 4 active EMP for this group)
C           3           2013-03-24 (So Far 3 active EMP for this group)
D           2           2013-03-24 (So far 2 active EMP for this group) 
```

或者在更好的视野中

当我选择 DateGoupID = 3

```
GroupID     2013-01-15      2013-01-16      2013-01-17      2013-01-18      2013-01-19      2013-01-20      2013-01-21
A               2               2               2               2               2               2               2
B               1               1               2               2               2               2               2
C               1               1               1               1               1               1               1
D               0               0               0               0               0               0               0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:25:08.417

你需要 DateGroup 表吗？

如果不：

```
 Select GroupID, Count(EmpId), JoinDate
     from dbo.[EmployeeStartDateTableName]
     group by GroupID, JoinDate 
```

如果是这样：

```
 SELECT   GroupID, Count(EmpId), JoinDate,   
     FROM         dbo.[EmployeeStartDateTableName] INNER JOIN
                  dbo.[DateGroupTableName] ON [EmployeeStartDateTableName].JoinDate =
     dbo.[DateGroupTableName].StartDate
     Where groupID = [InsertGroupId]
     group by GroupID, JoinDate 
```

然后，如果您希望标准是 DateGroupID

# c++ - 使用 MapWindowPoints 时堆栈损坏

> ID：15799205
> 
> 赞同：0
> 
> 时间：2013-04-03T22:16:06.010
> 
> 标签：c++, visual-studio-2010, visual-c++, stack

尝试`Stack around the variable "rc" was corrupted`测试此代码时出错（使用返回的坐标将鼠标移动到那里）
请参见下面的代码：

```
int TestPluginAPI::getmidX()
{
//RECT rect; 
HWND hWnd;
hWnd = getBrowserHwnd();
RECT rc;
if(GetClientRect(hWnd, &rc))  // get client coords 
{
MapWindowPoints(hWnd, NULL, reinterpret_cast<POINT*>(&rc.left), 2); // convert top-left x
MapWindowPoints(hWnd, NULL, reinterpret_cast<POINT*>(&rc.right), 2); // convert bottom-right x
MapWindowPoints(hWnd, NULL, reinterpret_cast<POINT*>(&rc.top), 2); // convert top-left y
MapWindowPoints(hWnd, NULL, reinterpret_cast<POINT*>(&rc.bottom), 2); // convert bottom-right y
return rc.left;
}
else {return 0;}
} 
```

你能告诉我，有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:20:21.510

是的，应该就是这个

```
if(GetClientRect(hWnd, &rc))  // get client coords 
{
    MapWindowPoints(hWnd, NULL, reinterpret_cast<POINT*>(&rc), 2);
    return rc.left;
} 
```

矩形是两个点（左上角和右下角）。所以你只需要调用一次 MapWindowPoints，计数为 2。

# android - 从列表中选择时 onActivityResult 没有响应

> ID：15799209
> 
> 赞同：0
> 
> 时间：2013-04-03T22:16:24.230
> 
> 标签：android

嗨，伙计们，我是 android 编程和 Java 的新手。我正在尝试制作一个旅行应用程序。我的问题是如何将数据从列表中的选定项目传递到 editText 文件。这是我到目前为止所做的事情。请。be kind 我是 newbee
使用 ListActivity 的活动类

```
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class SelectStationActivity extends ListActivity {

    String stations[] = { "Acton Main Line","Ealing","Great Western","Albany Park"};
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ArrayAdapter <String> adapter =new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, stations);
        setListAdapter(adapter);
    }

    protected void OnListItemClick(ListView l, View v, int position, long id) {
        String values = stations[(int) id];
        Intent result = new Intent().putExtra("SELECTED_STATION_NAME", values);
        setResult(RESULT_OK, result);
        finish();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        getMenuInflater().inflate(R.menu.select_station, menu);
        return true;
    } 
```

主要班

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter.ViewBinder;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class TravelActivity extends Activity {

    // The request code for the selectChkInBt
    protected static final int SelectChkin_REQUEST_CODE = 1; 
    // The request code for the selectChkOutBt
    protected static final int SelectChkout_REQUEST_CODE = 2;

    private String checkinStation;
    private String checkoutStation;

    private Button checkinButton, checkoutButton, selectChkInButton, selectChkOutButton;
    private EditText checkinEditText, checkoutEditText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_travel);

        checkinButton = (Button) findViewById(R.id.btCkIn);
        checkoutButton = (Button) findViewById(R.id.BtChkOut);

        selectChkInButton = (Button) findViewById(R.id.btselectChkIn);
        selectChkOutButton = (Button) findViewById(R.id.btselectChkOut);

        checkinEditText = (EditText) findViewById(R.id.EditTxtChkIn);
        checkoutEditText = (EditText) findViewById(R.id.EditTxtChkOut);

        checkinButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (checkinEditText.getText().toString().equals("")) {
                    Toast.makeText(TravelActivity.this,
                            "Enter Check-in Station", Toast.LENGTH_LONG).show();
                } else {
                    checkinStation = checkinEditText.getText().toString();

                    // Enable the check-out EditText and Button
                    checkinEditText.setEnabled(false);
                    checkinEditText.setTextColor(Color.CYAN);
                    checkinButton.setEnabled(false);

                    // Disable the check-in- EdiText AND Button
                    checkoutEditText.setEnabled(true);
                    checkoutButton.setEnabled(true);
                    checkoutEditText.requestFocus();
                }
            }
        });

        checkoutButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (checkoutEditText.getText().toString().equals("")) {
                    Toast.makeText(TravelActivity.this,
                            "Enter Check-Out station", Toast.LENGTH_LONG)
                            .show();
                } else {
                    checkoutStation = checkoutEditText.getText().toString();

                    // Clear edit Text
                    checkoutEditText.setText("");
                    // Enable the check-in EditText and Button
                    checkoutEditText.setEnabled(false);
                    checkoutButton.setEnabled(false); 
```

/* * 禁用签出 EditText 和 Button，以允许 * 签入和签出的永恒循环再次开始 */

```
 checkinEditText.setText("");
                    checkinEditText.setEnabled(true);
                    checkinButton.setEnabled(true);
                    checkinEditText.requestFocus();

                    Toast.makeText(getApplicationContext(),
                            "Travel information added!", Toast.LENGTH_SHORT)
                            .show();
                }
            }
        }); 
```

我可以为两个选择按钮实现一个内部类，但我很难做到。请。提供一些帮助我如何实现它谢谢。

```
selectChkInButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(TravelActivity.this,
                            SelectStationActivity.class);
                    startActivityForResult(intent, SelectChkin_REQUEST_CODE);
                }
            });

            selectChkOutButton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(TravelActivity.this,SelectStationActivity.class);
            startActivityForResult(intent, SelectChkout_REQUEST_CODE);

                }
            });

        } 
```

onActivityResult 在这里没有响应

```
 @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
                    super.onActivityResult(requestCode, resultCode, data);
                    if (resultCode== RESULT_OK){
                        if (requestCode == 1) {
                    checkinEditText.setText(data.getStringExtra("SELECTED_STATION_NAME"));
                }

            }

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {

            MenuItem item = menu.add(Menu.NONE, Menu.FIRST, Menu.NONE, "Recipt");
            item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            return true;
        }

        public boolean OnMenuItemSelected(int featureId, MenuItem item) {

            String Recipt = "Recipt" + item.getItemId() + "\nCheck-in: "
                    + checkinStation + "\nCheck-Out: " + checkoutStation;
            Toast.makeText(getApplicationContext(), Recipt, Toast.LENGTH_LONG)
                    .show();
            return true;

        }

        protected void OnSaveInstanceState(Bundle outState) {
            outState.putString("lAST_CHECKIN", checkinStation);
            outState.putString("lAST_CHECKOUT", checkoutStation);
        }

        protected void onRestoreInstance(Bundle savedInstanceState) {
            checkinStation = savedInstanceState.getString(checkinStation);
            checkoutStation = savedInstanceState.getString(checkoutStation);

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T08:50:50.700

你应该使用这个

checkinEditText.setText(data.getStringExtra("SELECTED_STATION_NAME"));

作为

checkinEditText.setText(data.getStringExtra("SELECTED_STATION_NAME").toString());

# ios - 询问用户意见，自定义UIAlertView，有什么限制可以通过？

> ID：15799211
> 
> 赞同：0
> 
> 时间：2013-04-03T22:16:31.183
> 
> 标签：ios, uialertview

我正在创建一个应用程序，有一次我想通过自定义 UIAlertView 询问用户意见。经过大量研究并阅读了有关此主题的内容后，我对某些事情感到有些困惑...

我们可以将哪些对象（UITextfields、UIImages...）添加到 UIAlertView 中？

因为我发现了这个：

> UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。

但这本可以被接受，例如：

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"title" message:@"msg" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
UITextField *txtField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
[alertView addSubview:txtField];
[alertView show];
[alertView release]; 
```

（有关更多信息，请参阅[此链接）](https://stackoverflow.com/questions/5717292/how-to-customize-uialertview-will-apple-approve-it)

因此，例如，如果我不想要带有消息和标题参数的蓝框，我只能执行以下代码：

```
UIAlertView *alert = [[UIAlertView alloc] init];
[alert addSubview:a_UIButton];
[alert addSubview:a_UIImageview]; 
[alert show]; 
```

因此，使用这种代码，我可以获得将所有应用程序置于暂停模式的优势（如果它有效！），所有这些都是自定义的。但有可能吗？可以拒绝吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:28:50.443

与其尝试自定义“ `UIAlertView`”，不如直接创建自己的自定义 AlertView（来自“ `UIView`”）并在要显示时将**其添加为子视图？**

我们不知道 Apple 是否（或如何）在未来的 iOS 版本（例如 iOS 7）中改变 UIAlertView 的内部架构，这将破坏迄今为止所有应用程序中对其所做的所有各种定制. 这就是苹果在他们的文档中提出这个警告的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:30:36.937

相反，我建议您制作一个自定义 UIView，并使用与 UIAlertView 类似的动画来显示它。然后，您可以添加任何您想要的 UI 元素。如果文档说视图层次结构是私有的，我会不理会它。

如果您只想在警报视图中添加一个文本字段，则 iOS 5 及更高版本支持该功能：

```
[alertView setAlertViewStyle:UIAlertViewStylePlainTextInput]; 
```

# html - 侧边栏低于内容和页脚不是 100%

> ID：15799212
> 
> 赞同：0
> 
> 时间：2013-04-03T22:16:37.913
> 
> 标签：html, css

我不知道发生了什么，也不知道是什么原因造成的。

这是有问题的页面：[http ://www.brandroot.com/resources](http://www.brandroot.com/resources)

侧边栏低于主要内容，页脚不是 100% 像网站上的其他页面一样在页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:19:06.873

看起来您的侧边栏位于错误的元素内。现在它在里面`<div class="left">` ，它应该在外面，在那个元素之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:26:26.620

您的“主要”不足以容纳该列。我将宽度扩大到 850 像素，并减少了右列的填充，它出现了。

通常，如果您将某些内容浮动到正确位置，则最好将该内容（即浮动到右侧的 div）按源顺序放在它旁边浮动的内容之上。然后，您只需在包装器上获得整体宽度，然后在浮动对象上获得整体宽度。其余的需要它需要的东西。

# javascript - 即时创建链接区域

> ID：15799213
> 
> 赞同：2
> 
> 时间：2013-04-03T22:16:44.210
> 
> 标签：javascript, jquery, jquery-events, imagemap

我想创建一个带有链接图的图像。该地图将包含许多必须经常更改的区域。我不想每隔几秒钟重新创建一次区域，我只想在用户真正点击图像时创建它们。

我希望通过在`mousedown`触发事件后创建区域来实现这一点-但这似乎不起作用（未处理对新创建区域的单击）。

到目前为止我的javascript代码（[小提琴](http://jsfiddle.net/gFVVh/)）：

```
$(document).ready(function () {
    $('#overlayDiv').mousedown(function () {
        $('#image').click(function () {
            $('#linkmap').children().remove();
            $(document.createElement('area'))
                .attr("shape", "rect")
                .attr("onclick", "alert('click');")
                .attr("coords", "0,0, 400,400")
                .appendTo('#linkmap');
        });
    });
}); 
```

**应该发生什么的“工作流程”**

1.  点击图片
2.  删除所有现有区域
3.  该区域被重新创建
4.  在**新**区域上处理点击

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:03:26.880

这对您不起作用，因为您的地图标签中没有名称属性。

查看更新的小提琴：http: [//jsfiddle.net/gFVVh/1/](http://jsfiddle.net/gFVVh/1/)

```
<img src="https://www.google.de/logos/2013/henry_van_de_veldes_100th_birthday-1402005-hp.jpg" usemap="#linkmap" id="image" />
<map id="linkmap" name="linkmap"></map> 
```

# vb.net - System.ServiceModel.ServiceHost.AddServiceEndpoint 构造函数导致抛出异常

> ID：15799215
> 
> 赞同：0
> 
> 时间：2013-04-03T22:16:45.480
> 
> 标签：vb.net, wcf, .net-3.5

我有一段导致异常的代码。**异常只抛出一次，场景无法复制**。但我仍然想理解这个错误。这是代码：

```
1 Dim myHost As System.ServiceModel.ServiceHost = New ServiceHost(New ClientService())
2 myBinding = New NetTcpBinding(SecurityMode.None)
3 Dim clientAddress As String = "net.tcp://127.0.0.1:3500/Client"
4 myHost.AddServiceEndpoint(GetType(IClientService), myBinding, clientAddress) 
```

IP 地址仅作为示例。在生产中，它是客户端机器的有效 IP 地址。在第 4 行抛出异常。这是堆栈：

```
1   System.UriFormatException: Invalid URI: The hostname could not be parsed.
2   at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
3   at System.Uri..ctor(String uriString, UriKind uriKind)
4   at System.ServiceModel.ServiceHost.AddServiceEndpoint(Type implementedContract, Binding binding, String address, Uri listenUri)
5   at System.ServiceModel.ServiceHost.AddServiceEndpoint(Type implementedContract, Binding binding, String address) 
```

问题：

1.  如果我只调用**AddServiceEndpoint(Type implementContract, Binding binding, String address) ，**为什么会调用重载**AddServiceEndpoint(Type implementContract, Binding binding, String address, Uri listenUri** ) ？

***   该异常的可能原因是什么？** 

 **谢谢你。

编辑：

clientAddress 字符串的实际代码是：

```
clientAddress = String.Format(My.Resources.UrlTemplate,ip.AddressList(0).ToString(), CInt(Int((1024 - 808 + 1) * Rnd() + 808))) 
```

在哪里

```
Dim ip As IPHostEntry = Dns.GetHostEntry(Dns.GetHostName()) 
```

为了清楚起见，我简化了第一个代码示例。Resources.resx 是生产代码中的嵌入资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:34:32.993

1.  有很多重载`AddServiceEndpoint`，通常的做法是让一个重载完成大部分工作，而其他重载（通常）采用较少的参数并只调用更完整的重载 - 就是这种情况，正如您在堆栈跟踪。`AddServiceEndpoint(Type, Binding, String)`内部调用`AddServiceEndpoint(Type, Binding, String, Uri)`。

2.  您说它不再重现，因此如果没有实际值，很难猜测可能出了什么问题。根据异常， 的值`clientAddress`肯定有问题，但在不知道导致该问题的值的情况下，我们只能猜测。`"net.tcp://"`例如，如果您用作该变量的值，您可以获得相同的异常。**

# c++ - 通过覆盖加入多个重叠的类？

> ID：15799220
> 
> 赞同：4
> 
> 时间：2013-04-03T22:17:14.480
> 
> 标签：c++, inheritance, virtual

我想知道以下案例，但我显然缺少足够的术语来在任何地方找到任何答案。

让我们从一个常见的案例开始：我总共有 3 个类。其中 2 个继承自第 3 个，被视为专业化。

现在这 3 个类仍然是部分抽象的，并且每个都引入了新的纯虚函数，因为这种“类结构”可以根据不同的目的以不同的方式实现。并且这三个类中的每一个都从内部访问纯虚函数，因此它们不能在以后实现。

然后是第 4 类，它继承自第 2 类，以便专门化第 2 类的纯虚函数的用途。还有一个 5th class ，它对 3rd class 做同样的事情。

现在还有第一类的纯虚函数，需要根据第四类和第五类进行专门化。这是我遇到一些问题的地方，我可以想出两种方法来解决这个问题，但这并不能真正让我满意。

*   让第 6 类继承自第 1 类，并专门针对第 4 类和第 5 类的需求，并让这些类从第 6 类继承。这将导致“可怕的钻石”。

![在此处输入图像描述](https://i.stack.imgur.com/TdkV7.png)

*   有一个第 6 类，它不从第 1 类继承，但它实现了适合第 4 和第 5 类的专用目的。然后让第 4 类和第 5 类从第 6 类继承，并添加第 1 类的纯虚函数的实现。这些实现除了调用 6th 的类似函数，同时传递相同的参数等，什么都不做。

![在此处输入图像描述](https://i.stack.imgur.com/G50dP.png)

我目前倾向于第二种解决方案，因为我想避免“钻石恐惧”。但我不喜欢它附带的额外实现代码。难道没有更简单的方法来组合不同的（接口/）类吗？

例如，使用第二个解决方案，我想在第 6 类中使用与第 1 类中声明的相同的函数原型，而不是告诉编译器第 1 类的函数应该被第 6 类的函数覆盖. 可悲的是，`using myfunction;`在第 4 和第 5 类的类声明中不起作用。

或者一般问：有没有办法加入“接口” - 这意味着一个类的纯虚函数可以由一个完全不同的类定义，只要原型相同并且它们都是从孩子那里继承。我想尽可能避免重复代码，因为我不想要“重”类。

如果这种照明过于抽象，我会举一个例子。

**€dit：**征求您的意见：在这种情况下，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:24:52.373

我会采用与第一个非常相似的解决方案：

1.  完全按照您的描述创建第 6 类。
2.  现在使用**Bridge 设计模式**- 在类型 1 的 2 和 3 中都有一个内部成员。将一个类 6 的实例注入这个内部成员。
3.  为您在第 4 类和第 5 类中缺少的虚拟方法创建一个隧道实现。实现应该是一个单行代码，只调用来自 6 的具体实现。

希望这可以帮助。如果您需要更多帮助，我会尝试详细说明。

===============

根据您的评论，希望这会有所帮助：

不完全是。采取第一个解决方案并从 4 和 5 中删除 6 的继承（4 继承 2，5 继承 3，仅此而已）。

类 6 继承 1。让我们称类 1 - Base。在类 4 和 5 中添加一个 Base 类型的成员（我们称之为 impl）。

假设第 4 类是 foo，第 2 类是 Base2。它看起来像（对不起，糟糕的 c++ 语法，我已经有一段时间没有编写实际的 c++ 代码了）：

```
class foo: Base2
{ 
     private Base* impl; 

     public foo(Base* impl) { this.impl = impl; } 

     void virtualMethod() { 
            this.impl->virtualMethod() 
     } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:46:25.693

*最初的想法来自 Avi，但我不知道这是否是最好的解决方案。我仍然会发布它以获得一个完整的线程*

我将第 6 类的接口作为第 1 类的集合。聚合的实际类型将在第 4 层（第 4/第 5 类）控制，其中适当类的常量动态实例将通过构造函数调用传递到第 1 类。指针将存储在这里。虽然它将是第 7 类的指针，它只定义了第 6 类的接口。我还让 1st class 成为 7th class 的朋友，这样界面就只能从那里访问。

![在此处输入图像描述](https://i.stack.imgur.com/E3UHs.png)

# saml - ADFS2.0 SP 发起的 URL？

> ID：15799222
> 
> 赞同：0
> 
> 时间：2013-04-03T22:17:26.640
> 
> 标签：saml, adfs

我们部署了 ADFS 服务器及其关联代理，我们的应用程序作为依赖方，云身份提供者 (Covisint) 作为声明提供者。

我们已经测试了使用 Active Directory 作为声明提供程序的 ADFS 服务器，并且端到端的身份验证过程是成功的。

当我们将应用程序的主域切换到使用云提供商时，该过程似乎有效，直到云提供商将现在登录的用户返回到 https://[adfs url]/adfs/ls

这是我们为 SP 发起的 URL 提供给云身份提供商的内容，以便他们将登录的用户返回到，但它似乎不正确或配置不正确，因为它向用户显示以下错误。

云提供商应该为 ADFS2.0 上的 SAML2.0 发布登录用户的 URL 是什么？

我还应该注意，即使登录的用户在访问应用程序时也会被重定向到云提供商，这让我相信必要的 SAML>ADFS 帖子还没有发生。

错误：

`There was a problem accessing the site. Try to browse to the site again. If the problem persists, contact the administrator of this site and provide the reference number to identify the problem. Reference number: 4973cca5-db6f-43dd-bd9b-59fa9872e97c`

使用的跟踪或管理日志中没有任何内容。

谢谢！

# c# - 从另一个应用程序获取树视图的节点文本

> ID：15799235
> 
> 赞同：3
> 
> 时间：2013-04-03T22:18:09.497
> 
> 标签：c#, winapi, text, treeview

我已经为这个问题苦苦挣扎了很长时间，但我仍然找不到合适的文档或示例。

我只是想在 C# 中使用 WinApi 获取位于另一个应用程序上的树视图的节点文本，但我在任何地方都找不到这样做的方法。

我尝试探索 TVM_GETITEM 消息，但无法从中获取 TVITEM。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-03T15:05:16.623

所以我自己遇到了这个问题，并认为我会分享我的发现。它需要首先获取 TreeView 控件的 IntPtr 句柄，因此此示例假定该部分已完成。

```
private string getTVNodeText(IntPtr tvHandle, IntPtr nodeHandle)
{

    TVITEM tvi = new TVITEM();
    IntPtr pszText = LocalAlloc(0x40, 260);

    tvi.mask = TreeViewMsg.TVIF_TEXT;
    tvi.hItem = nodeHandle;
    tvi.cchTextMax = 260;
    tvi.pszText = Convert.ToInt32(pszText);

    SendMessageTVI(tvHandle, TreeViewMsg.TVM_GETITEM, 0, tvi);
    string nodeText = Marshal.PtrToStringAnsi((IntPtr)tvi.pszText, 260);

    LocalFree(pszText);

    return nodeText;
} 
```

以下是您需要的 PInvoke 声明：

```
[DllImport("user32", EntryPoint = "SendMessageW")]
public int SendMessageTVI(IntPtr hWnd, int wMsg, int wParam, ref TVITEM tvi { }

[DllImport("kernel32.dll")]
public IntPtr LocalAlloc(uint flags, uint cb) { }

[DllImport("kernel32.dll")]
public IntPtr LocalFree(IntPtr p) { } 
```

这是 TVITEM 结构

```
public struct TVITEM
{
    public int mask;
    public int hItem;
    public int state;
    public int stateMask;
    public int pszText;
    public int cchTextMax;
    public int iImage;
    public int iSelectedImage;
    public int cChildren;
    public int lParam;
    public int iIntegral;
} 
```

以下是 SendMessage 调用的常量

```
[Flags()]
public enum TreeViewMsg
{
    BN_CLICKED = 0xf5,
    TV_CHECKED = 0x2000,
    TV_FIRST = 0x1100,
    TVGN_ROOT = 0x0,
    TVGN_NEXT = 0x1,
    TVGN_CHILD = 0x4,
    TVGN_FIRSTVISIBLE = 0x5,
    TVGN_NEXTVISIBLE = 0x6,
    TVGN_CARET = 0x9,
    TVM_SELECTITEM = (TV_FIRST + 11),
    TVM_GETNEXTITEM = (TV_FIRST + 10),
    TVM_GETITEM = (TV_FIRST + 12),
    TVIF_TEXT = 0x1
} 
```

您可以类似地查看 TVITEM 的状态以确定是否检查了节点。TV_CHECKED 常量 (8192) 对我有用，但我会在运行时检查它以查看 TVITEM.state 值在检查时是什么。

[这](http://bytes.com/topic/c-sharp/answers/621199-tvm_getitem-does-not-return-unicode-label)是我从试图以 Unicode 格式取回文本的人那里找到的链接。

# linux - 如何裁剪图像，使用 imagemagick 图像中的颜色边框

> ID：15799244
> 
> 赞同：1
> 
> 时间：2013-04-03T22:18:39.203
> 
> 标签：linux, imagemagick, command-line-interface

我想知道有人将如何将图像裁剪成 8 个不相等且尺寸未知的部分（我可以尝试一些，但大小不相等）。

示例：http: [//i.imgur.com/YG92jJH.jpg](http://i.imgur.com/YG92jJH.jpg)

通过使用灰色框之间的空白区域。

基本上要上交例如（原件的右上角）：http: [//i.imgur.com/swKDTnn.jpg](http://i.imgur.com/swKDTnn.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:49:46.027

您应该从使用[multicrop](http://www.fmwconcepts.com/imagemagick/multicrop/index.php)的[imagemagick](/questions/tagged/imagemagick "显示标记为“imagemagick”的问题")脚本的开关开始。

```
$ bash多作物

多作物：
由 Anthony Thyssen 修订以添加 -b 选项 ... 2010 年 8 月 24 日修订
由 Fred Weinhaus 开发 2010 年 1 月 30 日 .... 2010 年 7 月 7 日修订

用法：multicrop [-c coords] [-b bcolor] [-f fuzzval] [-g grid] [-u unrotate] [-m mask] infile outfile
用法：多作物 [-h 或 -help]

选项：

-c 协调像素坐标以提取背景颜色；
                           可以表示为重力值（西北等）
                           或作为“x，y”值；默认为 NorthWest=(0,0)
-b bcolor 使用背景颜色代替选项 -c；
                           任何有效的 IM 颜色；默认是使用选项 -c
-f fuzzval 用于分离背景颜色的模糊值；
                           表示为（整数）百分比 0 到 100；
                           默认=0（统一颜色）
-g x 和 y 中的网格间距为百分比
                           图像宽度和高度；用于定位图像；
                           整数>0；默认=10；                                                                                                                                                          
-u unrotate unrotate 方法；-deskew 的选择是 1，                                                                                                                                     
                           2 表示不旋转脚本，3 表示不旋转；                                                                                                                                    
                           默认=1                                                                                                                                                                       
-m 掩码掩码表示方法；选择是观点，                                                                                                                                     
                           仅保存（到文件）或输出掩码；默认                                                                                                                                     
                           以上都不是，只输出图片                                                                                                                                    

名称：多作物                                                                                                                                                                                            

目的：从扫描图像中裁剪和取消旋转多个图像。                                                                                                                                        

描述： MULTICROP 从扫描图像中裁剪和旋转多个图像。                                                                                                                           
图像必须很好地分开，以便在它们之间显示背景颜色。                                                                                                                             
该过程使用基于种子坐标和模糊的浮动填充技术                                                                                                                              
值以将单个图像与扫描背景分开。                                                                                                                                   
模糊因子的正确选择非常重要。如果太小，图像                                                                                                                              
不会分开。如果太大，部分图像的外部区域                                                                                                                                  
包含相似颜色的图像会丢失，图像可能会被分成                                                                                                                                 
多个部分。有两种不旋转的方法。第一个使用 IM 纠偏
功能，但仅限于 5 度或更少的旋转。第二个使用我的
取消旋转脚本。它允许更大的旋转，但会更慢。如果
使用第二种方法，必须下载并安装我的 unrotate 脚本。

重要提示：扫描文件中的图像必须在 x 和 y 中很好地分开
这样它们的边界框就不会重叠。这是特别重要的
如果图像有明显的旋转。

输出图像将从指定的输出文件和-0、-1、
等，将附加在 .suffix 之前。

论据：

-c coords ... COORDS 是背景（非图像）区域内的任何位置
让算法找到背景颜色。它可以用术语来指定  
重力参数（西北，北，东北，东，东南，南，
SouthWest 或 West）或作为像素坐标“x,y”。默认值为
左上角=西北=“0,0”。

-b bcolor ... BCOLOR 是用于填充填充的背景颜色
从图像中提取这种颜色。当图像有
没有与边缘硬的子图像的边界。任何有效的 IM 颜色都是
允许。默认使用选项 -c。

-f fuzzval ... FUZZVAL 是指定为整数百分比的模糊量
介于 0 到 100 之间的值（不带 % 符号）。绒毛的正确选择
因素非常重要。如果太小，图像将不会分开。
如果太大，图像的外部区域部分包含相似的
颜色会丢失，图像可能会分成多个部分。
典型值可能在 5% 到 20% 之间。默认值=10

-g grid ... GRID 是输入图像中测试点的网格间距
看看它们是背景还是图像。网格值指定为
宽度和高度的大于 0 且小于 100 的整数百分比
的输入图像。默认值 = 10。

-u unrotate ... UNROTATE 是不旋转的方法。选项有：1、2 或 3。
默认为 unrotate=1，速度快，使用 IM -deskew 功能，
但仅限于在扫描中旋转不超过 5 度的图像。
选项 unrotate=2 使用我的 unrotate 脚本。它可以处理更大的旋转，
但速度较慢。如果使用后一种方法，我的 unrotate 脚本必须是
下载并安装，以便此脚本可以使用它。
选项 unrotate=3 不尝试取消旋转图像。

-m mask ... MASK 提供了几个用于查看初始掩码的选项
由模糊值生成。选项有：视图（显示到 X11 窗口），
与图像一起保存（到磁盘），或输出（不处理图像）。
默认设置是简单地处理图像而不显示或保存蒙版。
如果使用查看模式，则处理将停止，直到图像关闭。
但这允许您在掩码不合适的情况下终止脚本。
一个好的方法是重复使用输出模式和各种 fuzzvals
直到创建一个合理的掩码。请注意，面具必须分开
图像，但背景可以“吃”一点图像，只要没有
完整边缘丢失或图像被分成多个部分。

注意：如果使用 unrotate 方法 2，则需要我的脚本 unrotate
也是。

警告：不保证此脚本适用于所有平台，
不一致参数的捕获也不完整，并且
万无一失。使用风险自负。
```

# javascript - 移动页面的滑动面板

> ID：15799248
> 
> 赞同：0
> 
> 时间：2013-04-03T22:18:54.067
> 
> 标签：javascript, jquery, css, html

我有一个 div 大部分不在页面上，但在悬停时使用翻译来显示在主页上。

这是我的[网站](http://www3.carleton.ca/clubs/sissa/html5/)。

但是，在移动设备上，这并不是显示此 div 的最佳解决方案。悬停效果不好，我必须经常点击才能显示出来。我想知道是否可以像移动应用程序那样做，如果我将页面移动到足够的右边缘，这个内容将显示或带有一个按钮。像这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/J0C1M.png)

关于这是否可能或如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:47:18.870

这种模式称为“Off Canvas 布局”。[在http://jasonweaver.name/lab/offcanvas/](http://jasonweaver.name/lab/offcanvas/)记录（带有一些 CSS）

您可以查看多种实现，也许从 Zurb 的这个不错的演示开始：[http ://www.zurb.com/playground/off-canvas-layouts](http://www.zurb.com/playground/off-canvas-layouts)

至于悬停的使用，最好在桌面和移动设备上点击/单击以保持一致性。如今，[三栏式菜单按钮](http://css-tricks.com/three-line-menu-navicon/)已广为人知。

# excel - 如何在vba（excel）中使用给定范围的一部分，即范围内的某些行

> ID：15799253
> 
> 赞同：2
> 
> 时间：2013-04-03T22:19:12.007
> 
> 标签：excel, vba, charts, range

我有一个引用 excel 表格的范围。我需要创建一个图表，因此使用我的表格范围设置源数据。我希望源数据是表中的第一行和最后 2 行（标题和总共 2 行）。鉴于范围是使用变量形成的，有没有办法选择任何给定范围的那些部分（假设范围由三行或更多行组成）。到目前为止，这是我的代码：

```
 Sub addchart(ByVal TableRange As Range, SheetName As Worksheet, TblLabel As String, TableLabel As String)

    Dim ChtPosition As Range
    Dim ChtRow As Long
    Dim ChtSourceData As Range

    Set ChtSourceData = Union(Top row of TableRange here, Last 2 rows of TableRange here)

    ChtRow = SheetName.Cells(SheetName.Rows.Count, "B").End(xlUp).Row + 2
    ChtPosition = SheetName.Cells(ChtRow, 2)

    SheetName.Shapes.addchart.Select
    With ActiveChart
        .SetSourceData Source:=SheetName.Range(ChtSourceData)
        .ApplyChartTemplate ("\\graphtemplatefilepath")
        .Parent.Name = "Cht" & TblLabel
    End With

    With SheetName.ChartObjects("Cht" & TblLabel)
        .Width = (16 * 29)
        .Height = (7 * 29)
        .Left = ChtPosition.Left
        .Top = ChtPosition.Top
        .Chart.ChartTitle.Characters.Text = TableLabel & " by Month"
    End With

    End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T22:58:22.400

逻辑是找到**第一行**，**第一列**，**总行数**，**总列数**，然后推断出你想要的范围。让我用一个例子来解释它。我已经对代码进行了注释，以便您理解它不会有任何问题。

```
Sub Sample()
    Dim TestRange As Range
    Dim rng1 As Range, rng2 As Range, rng3 As Range, FinalRange As Range
    Dim ws As Worksheet
    Dim r As Long, c As Long

    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        Set TestRange = .Range("A3:B10")

        Debug.Print "Our Sample Range is " & TestRange.Address

        '~~> This will give you 8
        Debug.Print "Total Rows in the range is " & TestRange.Rows.Count

        '~~> This will give you 3 From A3
        Debug.Print "The First Row in the range is " & TestRange.Row

        '~~> This will give you 1 From A3
        Debug.Print "The First Column in the range is " & TestRange.Column

        r = TestRange.Row
        c = TestRange.Column

        '~~> This will give you 2
        Debug.Print "Total Columns in the range is " & TestRange.Columns.Count
        ColCount = TestRange.Columns.Count

        '~~> This is give you the 1st row in that range $A$3:$B$3
        Debug.Print "The First Row address is " & Range(.Cells(r, c), _
        .Cells(r, c + ColCount - 1)).Address
        Set rng1 = Range(.Cells(r, c), .Cells(r, c + ColCount - 1))

        '~~> This will give you the last row
        Debug.Print "The Last Row address is " & _
        Range(.Cells(r + TestRange.Rows.Count - 1, c), _
        .Cells(r + TestRange.Rows.Count - 1, c + ColCount - 1)).Address

        Set rng2 = Range(.Cells(r + TestRange.Rows.Count - 1, c), _
        .Cells(r + TestRange.Rows.Count - 1, c + ColCount - 1))

        '~~> This will give you the Second last row
        Debug.Print "The Second Last Row address is " & _
        Range(.Cells(r + TestRange.Rows.Count - 2, c), _
        .Cells(r + TestRange.Rows.Count - 2, c + ColCount - 1)).Address

        Set rng3 = Range(.Cells(r + TestRange.Rows.Count - 2, c), _
        .Cells(r + TestRange.Rows.Count - 2, c + ColCount - 1))

        '~~> This will give you the final range i.e $A$3:$B$3,$A$9:$B$10
        Set FinalRange = Union(rng1, rng2, rng3)
        Debug.Print "The Final Range address is " & FinalRange.Address
    End With
End Sub 
```

当您运行上述代码时，您会在即时窗口中获得此输出

```
Our Sample Range is $A$3:$B$10
Total Rows in the range is 8
The First Row in the range is 3
The First Column in the range is 1
Total Columns in the range is 2
The First Row address is $A$3:$B$3
The Last Row address is $A$10:$B$10
The Second Last Row address is $A$9:$B$9
The Final Range address is $A$3:$B$3,$A$9:$B$10 
```

**编辑**

所以上面的代码减去调试语句和正确的变量声明可以写成

```
Sub Sample()
    Dim TestRange As Range
    Dim rng1 As Range, rng2 As Range, rng3 As Range, FinalRange As Range
    Dim ws As Worksheet
    Dim r1 As Long, c1 As Long, rCount As Long, cCount As Long

    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        Set TestRange = .Range("A3:B10")

        rCount = TestRange.Rows.Count
        r1 = TestRange.Row

        cCount = TestRange.Columns.Count
        c1 = TestRange.Column

        Set rng1 = Range(.Cells(r1, c1), .Cells(r1, c1 + cCount - 1))

        Set rng2 = Range(.Cells(r1 + rCount - 1, c1), _
        .Cells(r1 + rCount - 1, c1 + cCount - 1))

        Set rng3 = Range(.Cells(r1 + rCount - 2, c1), _
        .Cells(r1 + rCount - 2, c1 + cCount - 1))

        Set FinalRange = Union(rng1, rng2, rng3)

        Debug.Print "The Final Range address is " & FinalRange.Address
    End With
End Sub 
```

# c++ - 带有 Xaml 应用程序的 Directx 工具包

> ID：15799255
> 
> 赞同：1
> 
> 时间：2013-04-03T22:19:14.293
> 
> 标签：c++, xaml, directx, windows-phone-8

我正在尝试使用 XAML 应用程序制作 Direct3D，并且我想使用 DirectX Toolkit（适用于 Windows Phone 8）。我只是在**使用 XAML App**模板修改 VS2012 Windows Phone Direct3D。

我一直在使用 DirectX Toolkit 的 Codeplex Samples 页面中的两个示例。主要是[这个。](http://www.developer.nokia.com/Community/Wiki/DirectX_on_Windows_Phone%3a_2D_Game_Example_using_DirectX_Toolkit)

当我尝试加载 ID3D11ShaderResourceView* 时出现错误。如果我有以下代码

```
DX::ThrowIfFailed(
        CreateDDSTextureFromFile(m_d3dDevice.Get(),
                    L"CatTexture.dds",
                    nullptr,
                    &m_catTexture,
                    MAXSIZE_T)
        ); 
```

在 CreateDeviceResources() 方法 (CubeRenderer.cs) 中，我得到一个 InvalidAccessException 就行了：

```
DrawingSurfaceBackground.SetBackgroundContentProvider(
         m_d3dBackground.CreateContentProvider()
); 
```

在 MainPage.xaml.cs

是否可以使 DirectX 工具包与 xaml 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:17:15.697

您面临的问题似乎与**CreateDDSTextureFromFile 无关**，请确保您已将文件 CatTexture.dds 作为内容添加到项目中，并且它位于根路径上，或者将路径添加到文件名 "/path/CatTexture .dds”。

# ms-access - MS Access 报告给出“数据类型不匹配”错误，但基础查询没有

> ID：15799256
> 
> 赞同：0
> 
> 时间：2013-04-03T22:19:17.037
> 
> 标签：ms-access, report, type-mismatch

我有一个 vba 子例程，它在调用打开基于查询的报告之前向查询添加 WHERE 子句。我知道这样做而不是使用参数化查询有点荒谬，但是当我在截止日期前构建函数时，由于某种原因我无法让参数查询工作，这是我能想到的最快的解决方案和。后来我的退出例程恢复了查询的原始 SQL。

但这不是问题。该查询在添加 WHERE 子句之前和之后都运行良好，我通过单步执行 sub 并将构​​造的 SQL 语句复制并粘贴到新的 Access 查询中来确认这一点。它运行得很好。

问题出在报告上。它给了我“标准表达式中的数据类型不匹配”错误，无论我在子添加 WHERE 子句之前还是在添加 WHERE 之后运行它都是如此。

这已经正常工作了数周，然后它昨天突然爆炸，抛出错误，现在报告根本不会打印任何东西。这不是 NULL 值的问题；这不是数据类型错误。不知何故，它在报告中。

我认为数据库中可能存在一些损坏，因此对其进行了压缩，甚至将数据库的所有对象导入到一个新的干净数据库中。但错误仍然存​​在。

有没有人知道“数据类型不匹配”错误出现在报告中而不是查询中？我以前从未发布过，因为我通常可以通过搜索找到我的答案，但这次我被卡住了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:01:14.463

经过一夜好眠后，我能够遵循 ElectricLlama 的建议并找出错误。

查询中的一个字段被计算并返回废话（#Error），该字段是报告中的“排序依据”字段。这就是报告中“数据类型不匹配错误”的来源。

因此，要回答我自己的问题，如果您在报告中收到“条件表达式中的数据类型不匹配错误”错误但不是查询，请检查报告和查询中的任何计算字段，并检查所有组并按字段排序那个报告。

感谢你们两位的建议。

# python - Numpy：考虑项目的邻居及其在数组中的位置的快速计算

> ID：15799261
> 
> 赞同：6
> 
> 时间：2013-04-03T22:19:46.780
> 
> 标签：python, numpy

我有 4 个 2D numpy 数组，称为`a, b, c, d`，每个数组都由`n`行和`m`列组成。我需要做的是给每个元素`b`和`d`一个如下计算的值（伪代码）：

```
min_coords = min_of_neighbors_coords(x, y)
b[x,y] = a[x,y] * a[min_coords];
d[x,y] = c[min_coords]; 
```

where`min_of_neighbors_coords`是一个函数，给定数组元素的坐标，返回具有较低值的“邻居”元素的坐标。即，考虑数组：

```
1, 2, 5
3, 7, 2
2, 3, 6 
```

`min_of_neighbors_coords(1, 1)`将引用值为 的中心元素`7`，并返回元组`(0, 0)`：数字的坐标`1`。

我设法使用 for 循环（每个元素的元素）来做到这一点，但算法非常慢，我正在寻找一种改进它的方法，避免循环并要求计算 numpy。

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T00:11:21.100

**编辑**我将原始答案保留在底部。正如保罗在评论中指出的那样，原始答案并没有真正回答 OP 的问题，并且可以使用 ndimage 过滤器更容易地实现。以下更繁琐的功能应该做正确的事情。它需要两个数组`a`和`c`，并返回 的窗口最小值和中窗口最小值位置处的`a`值：`c``a`

```
def neighbor_min(a, c):
    ac = np.concatenate((a[None], c[None]))
    rows, cols = ac.shape[1:]
    ret = np.empty_like(ac)

    # Fill in the center
    win_ac = as_strided(ac, shape=(2, rows-2, cols, 3),
                        strides=ac.strides+ac.strides[1:2])
    win_ac = win_ac[np.ogrid[:2, :rows-2, :cols] +
                    [np.argmin(win_ac[0], axis=2)]]
    win_ac = as_strided(win_ac, shape=(2, rows-2, cols-2, 3),
                        strides=win_ac.strides+win_ac.strides[2:3])
    ret[:, 1:-1, 1:-1] =  win_ac[np.ogrid[:2, :rows-2, :cols-2] +
                                 [np.argmin(win_ac[0], axis=2)]]

    # Fill the top, bottom, left and right borders
    win_ac = as_strided(ac[:, :2, :], shape=(2, 2, cols-2, 3),
                        strides=ac.strides+ac.strides[2:3])
    win_ac = win_ac[np.ogrid[:2, :2, :cols-2] +
                    [np.argmin(win_ac[0], axis=2)]]
    ret[:, 0, 1:-1] = win_ac[:, np.argmin(win_ac[0], axis=0),
                             np.ogrid[:cols-2]]
    win_ac = as_strided(ac[:, -2:, :], shape=(2, 2, cols-2, 3),
                        strides=ac.strides+ac.strides[2:3])
    win_ac = win_ac[np.ogrid[:2, :2, :cols-2] +
                    [np.argmin(win_ac[0], axis=2)]]
    ret[:, -1, 1:-1] = win_ac[:, np.argmin(win_ac[0], axis=0),
                             np.ogrid[:cols-2]]
    win_ac = as_strided(ac[:, :, :2], shape=(2, rows-2, 2, 3),
                        strides=ac.strides+ac.strides[1:2])
    win_ac = win_ac[np.ogrid[:2, :rows-2, :2] +
                    [np.argmin(win_ac[0], axis=2)]]
    ret[:, 1:-1, 0] = win_ac[:, np.ogrid[:rows-2],
                             np.argmin(win_ac[0], axis=1)]
    win_ac = as_strided(ac[:, :, -2:], shape=(2, rows-2, 2, 3),
                        strides=ac.strides+ac.strides[1:2])
    win_ac = win_ac[np.ogrid[:2, :rows-2, :2] +
                    [np.argmin(win_ac[0], axis=2)]]
    ret[:, 1:-1, -1] = win_ac[:, np.ogrid[:rows-2],
                             np.argmin(win_ac[0], axis=1)]
    # Fill the corners
    win_ac = ac[:, :2, :2]
    win_ac = win_ac[:, np.ogrid[:2],
                    np.argmin(win_ac[0], axis=-1)]
    ret[:, 0, 0] = win_ac[:, np.argmin(win_ac[0], axis=-1)]
    win_ac = ac[:, :2, -2:]
    win_ac = win_ac[:, np.ogrid[:2],
                    np.argmin(win_ac[0], axis=-1)]
    ret[:, 0, -1] = win_ac[:, np.argmin(win_ac[0], axis=-1)]
    win_ac = ac[:, -2:, -2:]
    win_ac = win_ac[:, np.ogrid[:2],
                    np.argmin(win_ac[0], axis=-1)]
    ret[:, -1, -1] = win_ac[:, np.argmin(win_ac[0], axis=-1)]
    win_ac = ac[:, -2:, :2]
    win_ac = win_ac[:, np.ogrid[:2],
                    np.argmin(win_ac[0], axis=-1)]
    ret[:, -1, 0] = win_ac[:, np.argmin(win_ac[0], axis=-1)]

    return ret 
```

返回是一个`(2, rows, cols)`数组，可以解包成两个数组：

```
>>> a = np.random.randint(100, size=(5,5))
>>> c = np.random.randint(100, size=(5,5))
>>> a
array([[42, 54, 18, 88, 26],
       [80, 65, 83, 31,  4],
       [51, 52, 18, 88, 52],
       [ 1, 70,  5,  0, 89],
       [47, 34, 27, 67, 68]])
>>> c
array([[94, 94, 29,  6, 76],
       [81, 47, 67, 21, 26],
       [44, 92, 20, 32, 90],
       [81, 25, 32, 68, 25],
       [49, 43, 71, 79, 77]])
>>> neighbor_min(a, c)
array([[[42, 18, 18,  4,  4],
        [42, 18, 18,  4,  4],
        [ 1,  1,  0,  0,  0],
        [ 1,  1,  0,  0,  0],
        [ 1,  1,  0,  0,  0]],

       [[94, 29, 29, 26, 26],
        [94, 29, 29, 26, 26],
        [81, 81, 68, 68, 68],
        [81, 81, 68, 68, 68],
        [81, 81, 68, 68, 68]]]) 
```

然后可以将OP的案例解决为：

```
def bd_from_ac(a, c):
    b,d = neighbor_min(a, c)
    return a*b, d 
```

尽管性能受到严重影响，但速度仍然非常快：

```
In [3]: a = np.random.rand(1000, 1000)

In [4]: c = np.random.rand(1000, 1000)

In [5]: %timeit bd_from_ac(a, c)
1 loops, best of 3: 570 ms per loop 
```

* * *

除了获取它之外，您并没有真正将最小相邻元素的坐标用于其他任何事情，因此您不妨跳过该部分并创建一个`min_neighbor`函数。如果您不想使用 cython 进行快速循环，您将不得不使用滚动窗口视图，例如 Paul 的链接中概述的。这通常会将您的`(m, n)`数组转换为`(m-2, n-2, 3, 3)`相同数据的视图，然后您将应用于`np.min`最后两个轴。

不幸的是，您必须一次应用一个轴，因此您必须创建`(m-2, n-2, 3)`数据的副本。幸运的是，您可以分两步计算最小值，首先沿一个轴开窗和最小化，然后沿另一个轴，并获得相同的结果。所以最多你会有输入大小的中间存储。如果需要，您甚至可以重用输出数组作为中间存储并避免内存分配，但这[留作练习](http://abstrusegoose.com/12)......

下面的函数就是这样做的。它有点冗长，因为它不仅要处理中心区域，还要处理四个边缘和四个角的特殊情况。除此之外，它是一个非常紧凑的实现：

```
def neighbor_min(a):
    rows, cols = a.shape
    ret = np.empty_like(a)

    # Fill in the center
    win_a = as_strided(a, shape=(m-2, n, 3),
                       strides=a.strides+a.strides[:1])
    win_a = win_a.min(axis=2)
    win_a = as_strided(win_a, shape=(m-2, n-2, 3),
                       strides=win_a.strides+win_a.strides[1:])
    ret[1:-1, 1:-1] = win_a.min(axis=2)

    # Fill the top, bottom, left and right borders
    win_a = as_strided(a[:2, :], shape=(2, cols-2, 3),
                       strides=a.strides+a.strides[1:])
    ret[0, 1:-1] = win_a.min(axis=2).min(axis=0)
    win_a = as_strided(a[-2:, :], shape=(2, cols-2, 3),
                       strides=a.strides+a.strides[1:])
    ret[-1, 1:-1] = win_a.min(axis=2).min(axis=0)
    win_a = as_strided(a[:, :2], shape=(rows-2, 2, 3),
                       strides=a.strides+a.strides[:1])
    ret[1:-1, 0] = win_a.min(axis=2).min(axis=1)
    win_a = as_strided(a[:, -2:], shape=(rows-2, 2, 3),
                       strides=a.strides+a.strides[:1])
    ret[1:-1, -1] = win_a.min(axis=2).min(axis=1)

    # Fill the corners
    ret[0, 0] = a[:2, :2].min()
    ret[0, -1] = a[:2, -2:].min()
    ret[-1, -1] = a[-2:, -2:].min()
    ret[-1, 0] = a[-2:, :2].min()

    return ret 
```

您现在可以执行以下操作：

```
>>> a = np.random.randint(10, size=(5, 5))
>>> a
array([[0, 3, 1, 8, 9],
       [7, 2, 7, 5, 7],
       [4, 2, 6, 1, 9],
       [2, 8, 1, 2, 3],
       [7, 7, 6, 8, 0]])
>>> neighbor_min(a)
array([[0, 0, 1, 1, 5],
       [0, 0, 1, 1, 1],
       [2, 1, 1, 1, 1],
       [2, 1, 1, 0, 0],
       [2, 1, 1, 0, 0]]) 
```

你原来的问题可以解决为：

```
def bd_from_ac(a, c):
    return a*neighbor_min(a), neighbor_min(c) 
```

作为性能基准：

```
In [2]: m, n = 1000, 1000

In [3]: a = np.random.rand(m, n)

In [4]: c = np.random.rand(m, n)

In [5]: %timeit bd_from_ac(a, c)
1 loops, best of 3: 123 ms per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T23:03:40.103

查找`a[min_coords]`是滚动窗口操作。[我们在这篇文章](https://stackoverflow.com/questions/4936620/using-strides-for-an-efficient-moving-average-filter)中概述了几个巧妙的解决方案。您需要使 c[min_coords] 数组的创建成为您选择的任何解决方案的副作用。

我希望这有帮助。稍后我有时间可以发布一些示例代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T23:39:18.423

我有兴趣帮助你，我相信在你的问题范围之外可能有更好的解决方案，但是为了把我自己的时间用于编写代码，我必须得到你的一些反馈，因为我不是 100% 确定我了解你需要什么。

需要考虑的一件事：如果您是 C# 开发人员，也许 C# 的“蛮力”实现可以胜过 Numpy 的巧妙实现，因此您可以考虑至少测试您在 C# 中实现的相当简单的操作。Geotiff（我想你正在阅读）有一个相对友好的规范，我想可能有 .NET GeoTiff 库。

但是假设你想尝试一下 Numpy（我相信你应该），让我们看看你想要实现的目标：

1.  如果要`min_coords(array)`在数组的每个元素中运行`a`and `c`，则可以考虑使用`numpy.dstack()`and将同一数组的九个副本“堆叠”，每个副本滚动一些偏移量`numpy.roll()`。然后，您应用`numpy.argmin(stacked_array, axis=2)`并获得一个包含 0 到 8 之间值的数组，其中每个值都映射到包含偏移索引的元组。

然后，使用此原理，您的`min_coords()`函数将被矢量化，一次在整个数组中操作，并返回一个数组，该数组为您提供一个偏移量，该偏移量将是包含偏移量的查找表的索引。

如果您有兴趣详细说明这一点，请发表评论。

希望这可以帮助！

# c# - 使用冒泡排序和 IComparable 接口对文本文件进行排序

> ID：15799265
> 
> 赞同：0
> 
> 时间：2013-04-03T22:19:56.067
> 
> 标签：c#

我基本上想从我的硬盘读取一个文本文件，然后使用冒泡排序对文本文件中的字符串元素进行排序（使用`IComparable`界面）。我知道这可能是一个愚蠢的问题，但我被困在这里：下面的代码

```
using System.IO;

namespace Pratictice
{
    public partial class CfrmPractice : Form
    {
        public CfrmPractice()
        {
            InitializeComponent();
        }

        private static T[] BubbleSort<T>(T[] list) where T : IComparable
        {
            T temp;
            bool isSorted = false;

                while (!isSorted)
                {
                    isSorted = true;
                    for (int i = 0; i < list.Length - 1; i++)
                    {
                        if (list[i].CompareTo(list[i + 1]) > 0)
                        {
                            temp = list[i];
                            list[i] = list[i + 1];
                            list[i + 1] = temp;
                            isSorted = false;

                            return (T) Convert.ChangeType(isSorted[bool],typeof(T));
                        }
                    }
                }
        }

        private void btnSort_Click(object sender, EventArgs e)
        {

        }

        public void LoadDataSource()
        {
            ofdLoadData.InitialDirectory = Application.StartupPath;
            //ofdLoadData.FileName = "Text FIles (.txt)|*.txt|All Files (*.*)|*.*|";

            if (ofdLoadData.ShowDialog() == DialogResult.OK)
            {
                try
                {
                    using (StreamReader f = new StreamReader(ofdLoadData.FileName))
                    {
                        string sLine;
                        string[] Fields;

                        while (!f.EndOfStream)
                        {
                            sLine = f.ReadLine();
                            Fields = sLine.Split(' ');
                            lstLoadData.Items.Add(Fields[0]);
                        }
                    }
                }
                catch (Exception error)
                {
                    MessageBox.Show(error.Message, "Practice");
                }

            }
        }

        private void LoadData_Click(object sender, EventArgs e)
        {

            LoadDataSource();
        }

        private void lstLoadData_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        class Compare : IComparable
        {
            public string FileName;

            public int CompareTo(object obj)
            {
                if (this.FileName == ((Compare)obj).FileName)
                    return 0;
                else if (this.FileName != ((Compare)obj).FileName)
                    return 1;
                else
                    return -1;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:50:55.983

好吧，我看到一些时髦的事情发生了。我不明白为什么在修改传递给方法的列表时需要返回类型。我也不明白你想用 Convert.ChangeType 实现什么。这对你有用吗？

```
private static void BubbleSort<T>(T[] list) where T : IComparable
{
    T temp;
    bool isSorted = false;

    while (!isSorted)
    {
        isSorted = true;
        for (int i = 0; i < list.Length - 1; i++)
        {
            if (list[i].CompareTo(list[i + 1]) > 0)
            {
                temp = list[i];
                list[i] = list[i + 1];
                list[i + 1] = temp;
                isSorted = false;
            }
        }
    }
} 
```

# r - 将文件复制到 R 中的共享点库

> ID：15799268
> 
> 赞同：6
> 
> 时间：2013-04-03T22:20:16.667
> 
> 标签：r, authentication

我正在尝试将文件从网络驱动器位置复制到 R 中的共享点库。共享点库位置需要用户身份验证，我想知道如何复制这些文件并在代码中通过身份验证。一个简单的 file.copy 不起作用。我试图使用库中的`getURL()`函数，`RCurl`但这也没有奏效。我想知道如何完成这项任务 - 在通过身份验证时复制文件。

以下是我迄今为止尝试过的一些代码片段：

```
library(RCurl)
from <- "filename"
to <- "\\\\sharepoint.company.com\\Directory" #First attempt with just sharepoint location
to <- "file://sharepoint.company.com/Directory" #Another attempt with different format
h = getCurlHandle(header = TRUE, userpwd = "username:password")
getURL(to, verbose = TRUE, curl = h)
status <- file.copy(from, to) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-01T13:32:46.240

不是最优雅的解决方案，但如果您希望保存到 SharePoint 上的单个库中，您可以首先将该库映射为本地计算机上的驱动器。

只需使用`setwd()`指向您将库映射到的任何驱动器号。然后，您可以将该 Sharepoint 库视为任何其他共享驱动器位置，从中读取和写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-04T20:09:01.063

我只是使用以下函数将文件复制到 SharePoint。唯一的问题是，在手动签入文件以供其他人使用之前，传输的文件将保持签出状态。

```
 saveToSharePoint <- function(fileName) 
   { 
     cmd <- paste("curl --max-time 7200 --connect-timeout 7200 --ntlm --user","username:password", 
              "--upload-file /home/username/FolderNameWhereTheFileToTransferExists/",fileName, 
              "teamsites.OrganizationName.com/sites/PageTitle/Documents/UserDocumentation/FolderNameWhereTheFileNeedsToBeCopied/",fileName, sep = " ")
     system(cmd)
   } 

 saveToSharePoint("SomeFileName.Ext") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-16T17:29:55.490

如果您有 SharePoint 在线，您可以导航到该库并单击“同步到计算机”按钮（有一个带箭头的图标和一台计算机）。然后你可以把它作为一个oneDrive并直接写入它。

# sql - 制作 XML 文件时收到 PL/SQL 错误

> ID：15799269
> 
> 赞同：3
> 
> 时间：2013-04-03T22:20:18.183
> 
> 标签：sql, xml, plsql, oracle11g, plsqldeveloper

我正在尝试使用以下代码使用 PL/SQL 过程制作 XML 文件：-

```
create or replace directory temp_dir as 'C:\XML';
grant read, write on directory temp_dir to hr;

DECLARE
      doc  DBMS_XMLDOM.DOMDocument;
      xdata  XMLTYPE;

      CURSOR xmlcur IS
      SELECT xmlelement("Employee",XMLAttributes('http://www.w3.org/2001/XMLSchema' AS "xmlns:xsi",
                                    'http://www.oracle.com/Employee.xsd' AS "xsi:nonamespaceSchemaLocation")
                                ,xmlelement("EmployeeNumber",e.employee_id)
                                ,xmlelement("EmployeeName",e.first_name)
                               ,xmlelement("Department",xmlelement("DepartmentName",d.department_name)
                                                       ,xmlelement("Location",d.location_id)
                                          )
                    )
      FROM   employees e
      ,departments d
     WHERE  e.department_id=d.department_id;

   BEGIN
     OPEN xmlcur;
     FETCH xmlcur INTO xdata;
     CLOSE xmlcur;
     doc := DBMS_XMLDOM.NewDOMDocument(xdata);
     DBMS_XMLDOM.WRITETOFILE(doc, 'temp_dir/myXML1.xml');
     EXCEPTION
    WHEN OTHERS THEN
      RAISE_APPLICATION_ERROR(-20002,'Error writing out XML.');
   END; 
```

但我收到以下错误：-

```
Line 185: ORA-29280: invalid directory path
ORA-06512: at "SYS.UTL_FILE", line 41
ORA-06512: at "SYS.UTL_FILE", line 478
ORA-06512: at "XDB.DBMS_XSLPROCESSOR", line 217
ORA-29280: invalid directory path
ORA-29280: invalid directory path
ORA-06512: at "XDB.DBMS_XMLDOM", line 5292
ORA-06512: at line 23 
```

我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T23:02:32.193

首先，您正在尝试写入数据库服务器上的文件，对吗？不是您的客户端计算机上的文件？ `c:\xml`似乎是您的客户端计算机上可能存在的目录，而不是服务器上。

该[`DBMS_XMLDOM`文件](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_xmldom.htm#ARPLS399)指出

> 注意：数据库启动前，必须指定init.ORA文件中的read-from和write-to目录；例如：UTL_FILE_DIR=/mypath/insidemypath。
> 
> 读取和写入文件必须位于服务器文件系统上。

似乎`DBMS_XMLDOM`不支持目录对象。它似乎仍然依赖于旧`UTL_FILE_DIR`参数。

就个人而言，我可能会使用该`getClobVal()`方法将 XMLType 转换为 CLOB，然后使用包中的`clob2file`过程将`DBMS_XSLPROCESSOR`其写出来

```
DBMS_XSLProcessor.Clob2File( 
  xdata.getClobVal(),
  'TEMP_DIR',
  'myXML1.xml' ); 
```

这适用于我的系统

```
SQL> ed
Wrote file afiedt.buf

  1  DECLARE
  2    xdata  XMLTYPE;
  3    CURSOR xmlcur IS
  4    SELECT xmlelement("Employee",
  5                      XMLAttributes('http://www.w3.org/2001/XMLSchema' AS "xmlns:xsi",
  6                                    'http://www.oracle.com/Employee.xsd' AS "xsi:nonamespaceSchemaLocation")
  7                     ,xmlelement("EmployeeNumber",e.employee_id)
  8                     ,xmlelement("EmployeeName",e.first_name)
  9                     ,xmlelement("Department",
 10                                 xmlelement("DepartmentName",d.department_name)
 11                                ,xmlelement("Location",d.location_id)
 12                                )
 13                      )
 14    FROM   employees e
 15          ,departments d
 16    WHERE  e.department_id=d.department_id;
 17  BEGIN
 18    OPEN xmlcur;
 19    FETCH xmlcur INTO xdata;
 20    CLOSE xmlcur;
 21    DBMS_XSLProcessor.Clob2File(
 22        xdata.getClobVal(),
 23        'TEMP_DIR',
 24        'myXML1.xml' );
 25*    END;
SQL> /

PL/SQL procedure successfully completed. 
```

如果您实际上想从游标中获取所有数据而不仅仅是第一行，则需要一个循环

```
SQL> ed
Wrote file afiedt.buf

  1  DECLARE
  2    xdata  XMLTYPE;
  3    CURSOR xmlcur IS
  4    SELECT xmlelement("Employee",
  5                      XMLAttributes('http://www.w3.org/2001/XMLSchema' AS "xmlns:xsi",
  6                                    'http://www.oracle.com/Employee.xsd' AS "xsi:nonamespaceSchemaLocation")
  7                     ,xmlelement("EmployeeNumber",e.employee_id)
  8                     ,xmlelement("EmployeeName",e.first_name)
  9                     ,xmlelement("Department",
 10                                 xmlelement("DepartmentName",d.department_name)
 11                                ,xmlelement("Location",d.location_id)
 12                                )
 13                      )
 14    FROM   employees e
 15          ,departments d
 16    WHERE  e.department_id=d.department_id;
 17    l_clob clob;
 18  BEGIN
 19    dbms_lob.createtemporary( l_clob, true );
 20    OPEN xmlcur;
 21    LOOP
 22      FETCH xmlcur INTO xdata;
 23      EXIT WHEN xmlcur%notfound;
 24      l_clob := l_clob || xdata.getClobVal();
 25    END LOOP;
 26    DBMS_XSLProcessor.Clob2File(
 27      l_clob,
 28      'TEMP_DIR',
 29      'myXML1.xml' );
 30    CLOSE xmlcur;
 31* END;
SQL> /

PL/SQL procedure successfully completed. 
```

# sql-server - excel和sql之间的SSIS日期时间转换问题

> ID：15799270
> 
> 赞同：0
> 
> 时间：2013-04-03T22:20:21.263
> 
> 标签：sql-server, excel, tsql, datetime, ssis

如果我再把头撞在桌子上 1 次，我可能会永远消失。

资料来源：Excel

数据：2012-10-05T11:14:00

转换：

2012-10-05T11:14:00 在 Excel 中到字符串 [DT_STR]

目的地：SQL

列数据类型：日期时间

我不断收到以下错误：

[PostBindInspectionsBucket [20]] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80004005 描述：“转换规范的字符值无效”。

[PostBindInspectionsBucket [20]] 错误：输入“OLE DB 目标输入”(33) 上的输入列“RequestTimestamp 的副本”(112) 存在错误。返回的列状态为：“由于可能丢失数据，无法转换该值。”。

[PostBindInspectionsBucket [20]] 错误：SSIS 错误代码 DTS_E_INDUCEDTRANSFORMFAILUREONERROR。“输入“OLE DB 目标输入”(33)”失败，因为发生错误代码 0xC0209077，并且“输入“OLE DB 目标输入”(33)”上的错误行处置指定错误失败。指定组件的指定对象发生错误。在此之前可能会发布错误消息，其中包含有关失败的更多信息。

[SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。处理输入“OLE DB 目标输入”(33) 时，组件“PostBindInspectionsBucket”(20) 上的 ProcessInput 方法失败，错误代码为 0xC0209029。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。

我究竟做错了什么？来自 Excel 的格式是有效的日期时间格式。

我创建了一个包含“日期时间”类型列的表，然后我将其粘贴到“2012-10-05T11:14:00”中，它工作正常。

我也跑了一个

```
SELECT ISDATE('2012-10-05T11:14:00') 
```

它返回 1，这意味着它是 SQL 中的有效日期时间。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T02:44:38.143

这里的问题是“T”。

我从它穿过的字符串中删除了 T 。

# c# - Winform程序启动，并且button1聚焦，为什么？

> ID：15799273
> 
> 赞同：-5
> 
> 时间：2013-04-03T22:20:30.077
> 
> 标签：c#, .net, winforms

我有一个 C# winform 应用程序。当我构建它时，焦点在我的button1上，为什么？任何地方都没有代码......如果我直接写到form1_load的方法：button2.Focus（），没有改变......

我认为这将是一个非常简单的问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:23:15.420

是的，这是一个简单的问题，`TabIndex`当您在表单表面添加控件时，Visual Studio IDE 会自动定义控件的属性。

[`TabIndex`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tabindex.aspx)您可以手动更改此属性，或者更好的是，使用菜单`View`然后使用`Tab Order`子菜单。
窗体表面上的每个控件都将在左上角显示一个带有数字的小蓝色框，您可以单击该数字来更改 TabIndex 顺序。这样做更容易解释。

当您的表单显示时，TabIndex=0 且支持焦点的控件将首先获得焦点。（标签和其他无法聚焦的控件被排除在外）

# dojo - 来自 DropDownMenu.getChildren() 的 Dijit MenuItem

> ID：15799284
> 
> 赞同：0
> 
> 时间：2013-04-03T22:21:36.840
> 
> 标签：dojo, menuitem

我创建了一个按钮 (dijit/form/DropDownButton)，单击该按钮会显示项目 (dijit/MenuItems) 的下拉菜单 (Dijit/DropDownMenu)。我试图在创建控件后操纵 MenuItems。我可以使用 getChildren() 函数从 DropDownMenu 获取 MenuItems；但是，无法从返回的数组/对象中获取 MenuItem 对象。

```
require(["dojo/ready"], function (ready) {
   ready(function () {
      var menu = dijit.byId("drpMenu");
      var menuChildern = menu.getChildren();

    });
 }); 
```

如何解析 getChildren() 数组以获取各个 MenuItems？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:23:56.130

您需要使用 menuChildern[i] 或像用户 Default 发布的那样访问数组。如果您需要查看 javascript 元素的结构，请执行

```
console.log(menuChildren); 
```

使用 firebug&firefox 并保持控制台打开，以便您可以浏览结构。

# vb.net - 如何实现链表快速排序？（大部分代码完成）

> ID：15799285
> 
> 赞同：0
> 
> 时间：2013-04-03T22:21:37.223
> 
> 标签：vb.net, sorting, recursion, linked-list, quicksort

我在 Visual Basic 中实现链表快速排序时遇到了一些困难，问题是经典的堆栈溢出。因为它是一种递归算法，所以我认为它是我所缺少的相当简单的东西，但我已经盯着它看了好几个小时，在纸上追踪它——它只能处理三个或更少的项目，有时是四个。任何帮助将非常感激。

我遵循的算法是

1.  从列表中选择一个元素，称为枢轴。
2.  重新排序列表，使所有值小于枢轴的元素都在枢轴之前，而所有值大于枢轴的元素都在它之后（相等的值可以去任何一种方式）。在此分区之后，枢轴处于其最终位置。这称为分区操作。
3.  递归地将上述步骤应用于具有较小值的元素的子列表和具有较大值的元素的子列表。

变量“countABC”保存列表中的项目数。

这是节点类的代码：

```
Public Class Node
    'Each node contains the values for one value and is stored 
    'in the dynamic linked list.
    Public Name As String
    Public NextNode As Node
    Public PKey As Integer
    Public Sub New()
        'Initializes a new node
        Name = ""
        NextNode = Nothing
        PKey = 0
    End Sub
End Class
Public start As Node
Public Sub New()
    'Initializes a new linked list by setting start as the first node
    start = New Node
End Sub 
```

对于添加例程：

```
Public Sub AddABC(ByVal Name As String, ByVal PKey As Integer)
    'Adds items to a dynamic linked list ordered in alphabetical order
    Dim NewNode As New Node
    Dim ptr As Node = start.NextNode
    Dim prev As Node = start
    NewNode.PKey = PKey
    While ptr IsNot Nothing AndAlso ptr.Name < NewNode.Name
        prev = ptr
        ptr = ptr.NextNode
    End While
    NewNode.Name = Name
    NewNode.NextNode = ptr
    prev.NextNode = NewNode
    countABC += 1
End Sub 
```

以及排序所需的两个函数（连接列表用于连接）

```
Public Function SortAlphabetically() As AllColumns
    'This is a quicksort routine that creates a new linked list 
    '(that is not saved) in alphabetical order
    If countABC > 1 Then
        Dim pivotPkey As Integer = Math.Ceiling(countABC / 2)
        Dim pivot As New Node
        Dim ptr As Node = start.NextNode

        While ptr IsNot Nothing
            If ptr.PKey = pivotPkey Then
                pivot = ptr
            End If
            ptr = ptr.NextNode
        End While

        Dim lower As New AllColumns
        Dim higher As New AllColumns

        ptr = start.NextNode

        While ptr IsNot Nothing
            If ptr.Name < pivot.Name Then
                lower.AddABC(ptr.Name, ptr.PKey)
            Else
                higher.AddABC(ptr.Name, ptr.PKey)
            End If
            ptr = ptr.NextNode
        End While

        Return (Joinlists(lower.SortAlphabetically, pivot, 
                                         higher.SortAlphabetically))

    Else
        Return Me
    End If
End Function

Private Function Joinlists(ByVal lower As AllColumns, 
                           ByVal pivot As Node, 
                           ByVal higher As AllColumns) As AllColumns
    'Joins two dynamic linked lists together with a pivot value 
    'separating them
    Dim list As AllColumns = lower
    list.AddABC(pivot.Name, pivot.PKey)

    Dim ptr As Node = higher.start.NextNode

    While ptr IsNot Nothing
        list.AddABC(ptr.Name, ptr.PKey)
        ptr = ptr.NextNode
    End While
    Return list

End Function 
```

感谢阅读，我希望我已经很好地解释了这个问题并且没有遗漏任何东西（这是可能的，因为它是一个更大的程序的一部分）。

**编辑**

这是完整的类定义和第一个子类，希望能更好地解释它：

```
Public Class AllColumns
Public countABC As Integer = 0
Public Class Node
    'Each node contains the values for one value and is stored in the dynamic linked list.
    Public Name As String
    Public NextNode As Node
    Public PKey As Integer
    Public Sub New()
        'Initialises a new node
        Name = ""
        NextNode = Nothing
        PKey = 0
    End Sub
End Class

Public start As Node

Public Sub New()
    'Initialises a new linked list by setting start as the first node
    start = New Node
    countABC = 0
End Sub 
```

是不是越来越低被声明为“New Allcolumns”，它们将有自己的 countABC 值，当节点放入列表时会增加？

我不认为例程是导航到枢轴然后对它之后的所有值进行排序，例程的这一部分是实际的排序，并且“ptr”设置为“start.nextnode”即。事先在列表中的第一项。

```
 ptr = start.NextNode

    While ptr IsNot Nothing
        If ptr.Name < pivot.Name Then
            lower.AddABC(ptr.Name, ptr.PKey)
        Else
            higher.AddABC(ptr.Name, ptr.PKey)
        End If
        ptr = ptr.NextNode
    End While

    Return (Joinlists(lower.SortAlphabetically, pivot, 
                                     higher.SortAlphabetically)) 
```

一开始我应该说得更清楚，道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:19:44.007

```
Public Function SortAlphabetically() As AllColumns
    'This is a quicksort routine that creates a new linked list 
    '(that is not saved) in alphabetical order
    If countABC > 1 Then
        ...
        Return (Joinlists(lower.SortAlphabetically, pivot, 
                                         higher.SortAlphabetically)) 
```

`countABC`似乎是您的全局节点数，而不是您当前正在排序的子部分的节点数，因此此条件始终为真，因此您将拥有无限递归。

另外，究竟是`start`从哪里来的（它在哪里更新）？

最后，在我看来，您正在导航到枢轴节点，然后根据比较添加到左右子列表，但是枢轴之前的节点呢？

# ios - 如何确定是否正在等待调度信号量？

> ID：15799288
> 
> 赞同：8
> 
> 时间：2013-04-03T22:21:53.337
> 
> 标签：ios, objective-c, multithreading, grand-central-dispatch, semaphore

您如何确定是否`dispatch_semaphore_t`正在等待是否导致等待？我最初是在想：

```
if ( dispatch_semaphore_wait(mySemaphore, DISPATCH_TIME_NOW) ) {
    NSLog(@"No more resources, wait");
} else {
    NSLog(@"Resources available, shouldn't wait");
} 
```

但是做`dispatch_semaphore_wait()`信号量的行为减少了，所以我在想：

```
if ( dispatch_semaphore_wait(mySemaphore, DISPATCH_TIME_NOW) ) {
    NSLog(@"No more resources, wait");
} else {
    dispatch_semaphore_signal(mySemaphore);
    NSLog(@"Resources available, shouldn't wait");
} 
```

哪个最终结果不会减少信号量但似乎是一个黑客，建议？

**编辑**

当我输入我在做什么以及我是如何得出这个结论时，我意识到我确实在以错误的方式思考解决方案，我只是想知道我是否在等待资源并能够显示'等待'对话框给用户。我认为这是*正确*的方法：

```
 [self showWait];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        dispatch_semaphore_wait(mySemaphore, DISPATCH_TIME_FOREVER);
        dispatch_async(dispatch_get_main_queue(), ^{
            [self hideWait];
        });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T23:08:10.983

`dispatch_semaphore_wait()`仅在返回 0 时才减少信号量值。

如果超时到期（即它返回非零），则信号量值没有递减。

将成功案例中的递减视为获得由计数信号量管理的资源之一的所有权，如果您在成功等待后立即发出信号，则表明您已立即停止使用该资源，这可能不是您的想。

你想做什么 ？

# cuda - GPU中的Cuda填充数组

> ID：15799290
> 
> 赞同：0
> 
> 时间：2013-04-03T22:22:06.163
> 
> 标签：cuda

我想在 GPU 端填充我的数组：

为了做到这一点：

首先，我为主机端和设备端创建了数组：

```
int *d_A = NULL;
int *h_A = NULL; 
```

然后我为主机阵列分配内存：

```
h_A = (int *)malloc(numOfData*sizeof(int)); 
```

然后我为设备数组分配：

```
cudaMalloc((void **) &d_A, numOfData * sizeof(int)); 
```

然后我将 d_A 传递给 gpu 端

```
cudaMemcpy(d_A, h_A, numOfData, cudaMemcpyHostToDevice); 
```

并调用函数

```
 generateVector<<<1,2>>>(d_A,numOfData); 
```

生成函数如下：

```
_global__ void generateVector(int * d_Data,int count) {

    for (int i = 0; i < count; i++) {
        d_Data[i] = rand_from_0_to_100_gen();
    }
} 
```

我知道 GPU 端现在允许我使用 rand 函数来填充我的数组。那我该怎么办？可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T22:52:37.283

我相信，到目前为止，最简单的方法是使用[CURAND](http://docs.nvidia.com/cuda/curand/index.html)库。您可以在 CUDA SDK 中找到一些示例 - 看看 Monte-Carlo 的示例。

# java - 从 void 方法返回数组

> ID：15799292
> 
> 赞同：0
> 
> 时间：2013-04-03T22:22:12.070
> 
> 标签：java, arrays, matlab

我是 Java 新手，无法解决我遇到的范围问题。我有一个需要的 Matlab Connect( `MConnect1()/MConnect2()`) 方法`void`。我正在尝试从另一个类访问方法中的变量，但得到一个`NullPointerException`. 我尝试创建一个方法，`getResult()`但这也不起作用。我应该采取哪一步？

我正在尝试从 void MConnect2() 获取 array1。

```
package OMatlab;

import matlabcontrol.*;
import matlabcontrol.extensions.*;
import java.util.Arrays;

public class MatlabConnectVariable extends MatlabProxyFactory{

 private String MConnectStatus;
 public double result1;
 public String result2;
 public double[][] array1;
 public double[][] array2;
 public int i;
 public boolean conStat;

    public String getMConnectStatus() {
        return MConnectStatus;
    }

    //Default Constructor
    MatlabConnectVariable()
    {       
        if (conStat = true) {   
            MConnectStatus="The MatlabConnect class instance has been initiated";}
        else {MConnectStatus="WARNING: The MatlabConnect class instance could not been initiated";}

    }

    public void MConnect1() throws MatlabConnectionException, MatlabInvocationException
    {

        MatlabProxyFactoryOptions options = new MatlabProxyFactoryOptions.Builder()
        .setUsePreviouslyControlledSession(true)
        .setHidden(true)
        .setMatlabLocation(null).build(); 

//       MatlabProxyFactoryOptions options =
//             new MatlabProxyFactoryOptions.Builder()
//                 .setUsePreviouslyControlledSession(true)
//                 .build();

       MatlabProxyFactory factory = new MatlabProxyFactory(options);
       //MatlabProxyFactory factory = new MatlabProxyFactory();

       // create proxy
        MatlabProxy proxy = factory.getProxy();

        conStat = proxy.isConnected();   

//        ////Set a variable, add to it, retrieve it, and print the result
//        proxy.setVariable("a", 5);
//        proxy.eval("a = a + 6");
//        result = ((double[]) proxy.getVariable("a"))[0];
//        System.out.println("Result: " + result);

      //call user-defined function (must be on the path)
        //proxy.eval("addpath('C:\\Users\\odogu1\\Documents\\MATLAB')");
        proxy.feval("data_loading_script");
        //proxy.eval("rmpath('C:\\Users\\odogu1\\Documents\\MATLAB')");

        proxy.setVariable("a", 1);
        result1 = ((double[]) proxy.getVariable("new_data_added"))[0];          

        // close connection
        proxy.disconnect();

 }

    public void MConnect2() throws MatlabConnectionException, MatlabInvocationException
    {

        MatlabProxyFactoryOptions options = new MatlabProxyFactoryOptions.Builder()
        .setUsePreviouslyControlledSession(true)
        .setHidden(true)
        .setMatlabLocation(null).build(); 

        MatlabProxyFactory factory = new MatlabProxyFactory(options);
           //MatlabProxyFactory factory = new MatlabProxyFactory();

           // create proxy
            MatlabProxy proxy = factory.getProxy();

            conStat = proxy.isConnected();   

            //call user-defined function (must be on the path)
//          proxy.feval("data_loading_script");

            //Create a 4x3 array filled with random values
            proxy.eval("array1 = randn(4,1)");

            //Print a value of the array into the MATLAB Command Window
            proxy.eval("disp(['entry: ' num2str(array1(1, 1))])");

            //Get the array from MATLAB
            MatlabTypeConverter processor = new MatlabTypeConverter(proxy);
            double[][] array1 = processor.getNumericArray("array1").getRealArray2D();

            //Print out the same entry, using Java's 0-based indexing
//          System.out.println("entry: " + array1.getRealValue(2, 1));

            //Convert to a Java array and print the same value again    
//          double[][] result2 = array1.getRealArray2D();

//          System.out.println("ENTRY: " + result2[0][0]);

            int p=0;
            for(int i = 0; i < array1.length; i++)
            {
                System.out.println(Arrays.toString(array1[i]));
//              result2 = Arrays.toString(array1[i]);

            }

//          System.out.println(Arrays.toString(result2));

//          proxy.setVariable("a", 110);
//          result2 = ((double[]) proxy.getVariable("a"))[0];

            //result2 = ((double[]) proxy.getVariable("new_data"));

            // close connection
            proxy.disconnect();
    }

    public double[][] getResult2() {

        return array1;
    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:27:00.167

看起来您将数组定义为字段，但您从未使用过它。您在该方法中使用以下几行定义了另一个具有相同名称的名称：

```
 MatlabTypeConverter processor = new MatlabTypeConverter(proxy);
 double[][] array1 = processor.getNumericArray("array1").getRealArray2D(); 
```

所以你不会让 array1 充满任何数据。做就是了：

```
 array1 = processor.getNumericArray("array1").getRealArray2D(); 
```

并尝试调用 getResult2()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T00:47:49.523

在方法 getResult2() 中，您将返回定义为类成员的 array1，您永远不会对其进行初始化（因此，您将始终将其设为 null）。你应该换行

`double[][] array1 = processor.getNumericArray("array1").getRealArray2D();`

进入

`array1 = processor.getNumericArray("array1").getRealArray2D();`

# python - Python NLTK 分类语料库创建

> ID：15799293
> 
> 赞同：0
> 
> 时间：2013-04-03T22:22:13.747
> 
> 标签：python, nltk

在尝试创建我的语料库时，我目前在处理所有子文件夹中包含文件的问题时遇到了一些愚蠢的问题。

```
CorpusList = CategorizedPlaintextCorpusReader('X:\\HardPath\\SF001\\SF001_009\\TextForAnalysis\\', r'.*/.txt', cat_file='CAT.txt', cat_delimiter=',') 
```

我的问题是我所有的文本文件都不在一个文件夹中。它们都在子文件夹中。如何包含此目录和所有子目录中的所有文本文件？如果我在“TextForAnalysis”文件夹中有所有文件，那么一切都只是文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:19:33.467

尝试使用以下`cat_pattern`选项：

```
CorpusList = CategorizedPlaintextCorpusReader(
    'X:\\HardPath\\SF001\\SF001_009\\TextForAnalysis\\',
    r'.*/.txt',
    cat_file='CAT.txt',
    cat_delimiter=',',
    cat_pattern='(.+)/*') 
```

# c# - 为什么没有任务 实现 IObservable

> ID：15799294
> 
> 赞同：9
> 
> 时间：2013-04-03T22:22:20.953
> 
> 标签：c#, task-parallel-library, system.reactive

`Task<T>.ContinueWith`具有与 相同的基本基本概念`IObservable<T>.Subscribe`。它们与 Reactive Extension 非常相似，可以提供转换扩展方法。由于`IObservable<T>`是 BCL 的一部分，因此没有理由不实施`IObservable<T>`. `Task<T>`那么，不执行的原因是什么`IObservable<T>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T01:01:54.360

[Rx 团队在他们的 2.0 beta 博客文章](http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx)中很好地涵盖了这一点。这是一个*巨大*的帖子，虽然里面有很多很棒的信息。

preemptive tl;dr = IObservable 用于未来结果序列，Task 用于单个未来结果

我认为最能解释这种关系的图表在那个帖子中，但不幸的是，它离得很远（正如我提到的，这是一个非常大的帖子:)

![Rx 与任务](https://i.stack.imgur.com/NxolT.png)

虽然整篇文章都值得一读（恕我直言），但有关 Rx/Task/async/await 如何组合在一起的相关文本从标题“Rx v2.0 和 .NET 4.5 “async”/“await”开始——更好的结合故事”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T23:06:01.130

我只能猜测，但我认为有一些很好的理由：

1.  `Task<T>`并且`IObservable<T>`实际上没有相同的基本概念。是的，两者都是异步的，但这几乎是所有共性结束的地方。两者之间的最大区别在于，它`Task<T>`始终只有一个值，`IObservable<T>`可以有尽可能多的值（或尽可能少，包括零）。

    如果已`Task<T>`实现`IObservable<T>`，则类似于`T`.Net 中的每个已实现`IEnumerable<T>`，返回单个结果，即对象本身。

2.  转换`Task<T>`为`IObservable<T>`. 要么使用Rx[的`ToObservable()`扩展方法，要么](http://msdn.microsoft.com/en-us/library/hh244341%28v=vs.103%29.aspx)[自己编写](http://blogs.msdn.com/b/pfxteam/archive/2010/04/04/9990349.aspx)。这使得你所要求的变得不那么必要了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T08:38:03.647

我希望引用 MSFT (*) 的 Stephen Toub 的话是恰当的：

# [ParallelExtensionsExtras Tour - #2 - Task.ToObservable](http://blogs.msdn.com/b/pfxteam/archive/2010/04/04/9990349.aspx) MSDN 博客文章：

> 事实证明，虽然**目前**`Task<TResult>`没有实现，但实际上非常适合这样做。一个 observable 代表任意数量的由流的结尾或异常终止的值。A**符合**此描述：它以单个值或异常完成。虽然 .NET Framework 的未来版本可能会实现，但我们现在可以通过将其实现为 ; 的扩展方法来获得相关行为；事实上，**Rx**就包含了这样一个扩展方法，就像**`IObservable<T>``Task<TResult>` **`Task<TResult>``IObservable<T>``Task<TResult>`**`ParallelExtensionsExtras`******

 ******(*) 不知道“FT”是什么意思，除了 MSFT 是纳斯达克股票代码，意思是 MS，但[“MSFT”中的“MS”肯定是指微软](http://social.msdn.microsoft.com/profile/stephen%20toub%20-%20msft/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T22:30:33.040

原因是，虽然`Task<T>`类型在 .NET 框架中，但 Reactive Extensions (Rx) 并`IObservable<T>`没有。该`System.Reactive`程序集具有`System.Threading.Tasks`依赖项，因此后者中的任何内容都不能引用前者。

如果并且当他们将 Rx 添加到 .NET 时，他们可能会按照您的建议进行操作。

# 编辑：

实际上，我可能说得太快了。[查看文档。](http://msdn.microsoft.com/en-us/library/dd990377.aspx)看来该`IObservable<T>`接口实际上存在于`mscorlib`.NET 4 和 4.5 的程序集中。所以我上面说的并不是一个完全正当的理由。我正在将我的猜测原因修改为“因为他们还没有将 Rx 集成到 .NET 中”，而不是“由于循环依赖，目前不可能”。******

# java - Java fillOval 不会填充窗口

> ID：15799295
> 
> 赞同：1
> 
> 时间：2013-04-03T22:22:21.993
> 
> 标签：java, swing, jpanel, render

** 请随时提供有关流程的反馈。可能有更好的方法来完成我正在做的事情，我只是不知道。

我有一个扩展 JPanel 的 Game 类。在该`paintComponent()`方法中，它根据游戏（菜单）的状态呈现不同的类。只有欢迎屏幕会显示整个窗口。即使我在 640x480 窗口上手动分配 (0, 0, 1000, 1000) 的坐标，其他人也不会填满窗口。

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    if (state == State.WELCOME) {

        welcome.render(g);

    } else if (state == State.SELECTPOSITION) {

        selectPosition.render(g);

    } else if (state == State.SELECTSCENARIO) {

        selectScenario.render(g);
... 
```

列下列出了更多具有相同逻辑的状态`selectScenario()`。

前`render()`2个方法如下：

```
welcome.render(g)

public void render(Graphics g) {
    g.setColor(Color.red);
    g.fillRect(0, 0, 640, 480);
    g.setColor(Color.white);
    g.drawString("Welcome", 50, 150);
}

selectPosition.render(g)

public void render(Graphics g) {
    g.setColor(Color.blue);
    g.fillRect(0, 0, 1000, 1000);
} 
```

在 SelectPosition 屏幕期间，屏幕底部有一条大约 50px 高的红线。

如果您需要更多信息，请告诉我。我试图只分享相关的行。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:01:37.597

我们不熟悉您的大部分代码、逻辑和程序结构，您可能希望创建并发布一个[sscce](http://sscce.org)让我们自己实际体验您的体验。但在我看来，您真正想做的是根据状态交换视图，例如可以使用 CardLayout 来完成。

# python - 使用 openerp 7.0 在 eclipse Juno 中断点不起作用

> ID：15799297
> 
> 赞同：1
> 
> 时间：2013-04-03T22:22:32.757
> 
> 标签：python, eclipse, pydev, openerp

我遵循了[Debugging in OpenERP 7.0](https://stackoverflow.com/questions/13703644/debugging-in-openerp-7-0)的答案， 一切正常，除了断点，eclipse 永远不会停止。我什至添加了一条打印线并在其上打了一个断点（右键单击“添加断点”），它显示在控制台中，但断点不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:01:48.287

您是否使用“Debug As->Python Run”选项启动了 openerp-server？

可能是您正在使用“Run As-> Python Run”运行 openerp-server，这就是为什么执行不会在给定断点处停止的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:09:14.523

将您的 openerp-server 文件重命名为 openerp-server.py 然后按照 Arya 的步骤进行操作:-)

在我的电脑中，它与该配置完美配合。

# excel - 将均匀分布变为正态分布

> ID：15799302
> 
> 赞同：0
> 
> 时间：2013-04-03T22:22:52.617
> 
> 标签：excel, statistics, uniform, normal-distribution

我如何将均匀分布转变为正态分布我有 0 到 1 之间的 2000 个数字的随机样本，我为 10 列做了这个

我得到所有十列的平均值并将其放在第 11 列；2000X1 矩阵 然后创建了一个图表，但是它看起来像一个均匀分布而不是正态分布。为什么？ [http://www.statisticalengineering.com/central_limit_theorem.htm](http://www.statisticalengineering.com/central_limit_theorem.htm)

我如何切换 x 和 y 轴使其看起来像正态分布

![在此处输入图像描述](https://i.stack.imgur.com/Rn5Br.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:39:42.473

更新：我不确定您的目标是什么：

*   A：显示从 0 到 1 之间的 10 个随机数平均得到的值的轻微正态性？

*   B：获得一组服从正态分布的随机数（随机+正态意味着获得每个值的概率与均值0，标准差1的正态模型的概率密度函数完全成正比）？

如果 A 是您的目标，那么您只需要制作一个适当的值直方图，它看起来会略微呈钟形，但也有相当多的散射。

如果 B 是您的目标，那么您只需在 Excel 中创建两列即可轻松完成。第一列填充了介于 0 和 1 之间的 rand() 值，第二列包含公式 NORM.S.INV() 正在使用其左侧单元格中包含的值进行评估。

...

要将在 0 和 1 之间均匀分布的数字更改为任何其他分布，比方说 S，所需要做的就是将这些数字插入 S 的累积分布函数的逆函数。

由于您想要正态分布，因此累积正态分布函数的倒数是您需要将数字插入其中以获得随机、正态分布的值范围的函数。

Excel 中的此函数称为 NORM.S.INV()

要制作直方图，您可以转到 Excel 菜单，然后转到加载项/管理 Excel 加载项/转到/通过分析工具包选中该框/然后单击功能区中的数据选项卡。

您将需要创建一个包含“Bins”的列，用于分隔直方图的组件。您可以通过 1 执行 0、0.1、0.2、0.3、0.4、0.5 等。（提示：只需在前两个单元格中键入 0 和 0.1，然后选择这两个单元格（都必须选中），然后拖动角直到达到 1.0。）

然后单击“数据”选项卡中的“数据分析”按钮，选择“直方图”，为输入范围选择包含平均数的列，为“箱范围”选择从 0 到 1 的箱，然后单击“确定”。选择生成的数据，并从中制作散点图。

很抱歉，当有更清晰的直方图制作教程时，我试图给出指示：http: [//www.wikihow.com/Create-a-Histogram-in-Excel](http://www.wikihow.com/Create-a-Histogram-in-Excel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:41:39.713

您需要计算这些 Y 值的直方图，因此您计算了很多，例如介于 0.4 和 0.45、0.45 到 0.5、0.5 到 0.55 等之间。该直方图看起来很正常。

在一行 Python 中，这就是您的图表的样子。

```
hist([sum(random.random() for i in range(10))/10.0 for y in range(20000)], 100) 
```

![平均均匀随机数的近似正态分布](https://i.stack.imgur.com/LNiJS.jpg)

# android - 将图像从相机获取到 ImageView Android

> ID：15799307
> 
> 赞同：4
> 
> 时间：2013-04-03T22:23:09.620
> 
> 标签：android, android-camera, galaxy-nexus

以下代码可以很好地获取从相机拍摄的照片的缩略图。我想获得完整的图像，而不仅仅是缩略图。我有三星 Galaxy Nexus

```
private static final int CAMERA_PIC_REQUEST = 1111;

private ImageView mImage;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_camera);
        mImage = (ImageView) findViewById(R.id.imageView1);
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(intent, CAMERA_PIC_REQUEST);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_PIC_REQUEST) {
            Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
            mImage.setImageBitmap(thumbnail);
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            thumbnail.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
            File file = new File(Environment.getExternalStorageDirectory()+File.separator + "image.jpg");
            try {
                file.createNewFile();
                FileOutputStream fo = new FileOutputStream(file);
                fo.write(bytes.toByteArray());
                fo.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T23:47:01.960

要获得完整大小的图片，您需要先将其保存到文件中，然后从中提取位图，请执行以下操作：

```
 Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
 File file = new File(Environment.getExternalStorageDirectory()+File.separator + "image.jpg");
 intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
 startActivityForResult(intent, CAPTURE_NEW_PICTURE); 
```

然后在`onActivityResult`：

```
 File file = new File(Environment.getExternalStorageDirectory()+File.separator + "image.jpg");
 mImage = (ImageView) findViewById(R.id.imageView1);
 mImage.setImageBitmap(decodeSampledBitmapFromFile(file.getAbsolutePath(), 500, 250)); 
```

什么时候`decodeSampledBitmapFromFile`：

```
 public static Bitmap decodeSampledBitmapFromFile(String path,
        int reqWidth, int reqHeight) { // BEST QUALITY MATCH

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        int inSampleSize = 1;

        if (height > reqHeight) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        }

        int expectedWidth = width / inSampleSize;

        if (expectedWidth > reqWidth) {
            //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger SampSize..
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }

    options.inSampleSize = inSampleSize;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

    return BitmapFactory.decodeFile(path, options);
  } 
```

您可以使用数字（在本例中为 500 和 250）来更改`ImageView`.

# javascript - 书签覆盖内容与 YouTube 存在 z-index 问题

> ID：15799314
> 
> 赞同：0
> 
> 时间：2013-04-03T22:23:48.740
> 
> 标签：javascript, css, youtube, z-index, bookmarklet

我们的网站有一个非常基本的书签功能，用户可以使用该功能将来自任何其他网站的任何链接发布到他们在我们的个人资料中。它插入了一些覆盖，所有这些都是 position: absolute 并且有一些可笑的高 z-index 数字，所以它几乎总是会出现在任何其他网站的内容之上。

但是，当用户在 YouTube 上并单击书签以将其分享到我们的网站时，这似乎不起作用。因为 YT 的内部视频播放器，只是播放器本身，现在无论如何都会占用最高的 z-index。页面的其余部分，只是视频播放器，现在覆盖了所有小书签的插入内容。

这似乎发生在直到 IE10 的每个版本中，甚至在 Linux/Ubuntu 上的 Firefox 上。我已经阅读了很多描述编辑 YouTube 嵌入代码以解决问题的解决方案。显然，当您使用 YT 本身而不是嵌入时，这不会发生。（或者可以吗？）

如果有帮助，这里是书签代码。

```
 javascript:(function(){

    var d=document.createElement('div');
    d.setAttribute('id','mySite-url');
    d.innerHTML='https://www.mySite.com';
    d.style.display='none';
    document.body.appendChild(d);

    var e=document.createElement('script');
    e.setAttribute('type','text/javascript');
    e.setAttribute('charset','UTF-8');
    e.setAttribute('src','https://www.mySite.com/js/bookmarklet.js');
    document.body.appendChild(e);

    })(); 
```

# php - PHP 从字符串中提取

> ID：15799315
> 
> 赞同：1
> 
> 时间：2013-04-03T22:23:54.603
> 
> 标签：php, regex, string, extract

我有一个字符串，其中有一个带有变量的 url，例如：

```
http://www.example.com/?foo=example1&foo1=example2&foo2=example3 
```

我对 PHP 很陌生，在查看分隔符和修饰符时，我无法完全理解如何将它们正确地应用于我的情况而不会出现某种错误。我想知道是否有人可以指出我如何将“foo1”提取到它自己的变量中以便在其他地方使用的正确方向。我需要提取“&foo1=”和以下“&”之间的数据。

这就是我所拥有的（不正确的分隔符/修饰符）：

```
("&foo1=[^&]+?\&'", $getData)) 
```

那么我该如何解决这个问题以提取“foo1”的数据呢？

**编辑：**这个带有我需要的变量的 URL 在一个字符串中，而不是 URL 本身，它是一个外部链接。变量也不总是采用 URL 形式，它们通常只是在字符串中，因为变量如下所示：

```
foo=example1&foo1=example2&foo2=example3 
```

那么从这样的字符串中，我将如何提取“foo1”的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T22:27:28.870

首先[`parse_url`](http://php.net/manual/en/function.parse-url.php)它，然后将查询部分传递给[`parse_str`](http://www.php.net/manual/en/function.parse-str.php)

```
$url ="http://www.example.com/?foo=example1&foo1=example2&foo2=example3";
$parsedUrl = parse_url($url);
$query = array();
parse_str($parsedUrl['query'],$query);
var_dump($query);

-- array (
  'foo' => 'example1',
  'foo1' => 'example2',
  'foo2' => 'example3',
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:31:15.207

是*你的*网站吗？你想知道传递的值是什么吗？ `$_GET['...']`.

否则，如果您想*解析*URL 并提取变量，

`preg_match_all('/([^?&=#]+)=([^&#]*)/', $url, $matches);`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-03T22:28:58.843

只是扩展“类”的答案以帮助您理解，例如`?foo=example1`意味着它`foo`是一个带有 value 的变量`example1`。

在 php 中，要从 url 获取这些值，只需使用`$_GET['myvariablename']`，在您的情况下，它将是

```
$var1 = $_GET['example1'];
$var2 = $_GET['example2'];
$var3 = $_GET['example3']; 
```

# recursion - Scheme中的递归搜索

> ID：15799316
> 
> 赞同：0
> 
> 时间：2013-04-03T22:23:54.607
> 
> 标签：recursion

我目前遇到以下问题：

我有一个包含 n 个元素的数据库，我想进行递归搜索，以便获得所有可能的匹配项。

所以，可以说，我得到了第一个模式的 k 个匹配项。对于我发现的每 k 个匹配项，我使用下一个模式重新搜索数据库并获取新的关联列表 ....等等。这是我的问题，我无法制作一个能给我所有结果的函数。

我真的无法让自己想出一个解决这个问题的“计划”。我总是想知道如何保存我当前的关联列表，同时，当我走到最后时将其删除。

我的想法总结：如果我有一个 database=db 并且需要匹配 n 个模式。我从模式 0 开始，获取 k assoc-list 并且我想继续匹配模式 1 ，记住我有前一个的 k assoc-lists。我完成模式 1 并获得 M assoc-list ，对于每个 m assoc-list 我前进......最后我要么得到一个大小为 n（模式数）的 assoc-list 要么得到错误。

我真的只想要一些想法，这样我就可以越过这堵“砖墙”。请判断，刺伤，扼杀我的想法，任何事情。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:42:44.027

我不确定您是否希望根据后续搜索缩小或扩大搜索范围。这是扩展的伪代码：

```
recursive_search (list_of_patterns)
  if is_empty(list_of_patterns)
    return empty_list
  pattern = pop_first(list_of_patterns)
  return query(pattern) + recursive_search(list_of_patterns) 
```

编辑以将您的模式与查询保持为 alist ......我的方案 foo 很弱，但这里有：

```
(define query_alist (lambda x)(x . query-exec(x)))

(define r_query (lambda pattern__list)
  (cond
    ((null pattern_list) ())
    (else ((query_alist (first pattern_list) (r_query (rest pattern_list)))
  )
) 
```

# batch-file - 批处理编程

> ID：15799320
> 
> 赞同：1
> 
> 时间：2013-04-03T22:24:04.490
> 
> 标签：batch-file

我是一批新人。尝试了几天批量制作一些东西，但有一个我无法解决的问题。我读了很多你的评论，但没有找到答案。也许你能帮助我？

重点是：

1.  我从键盘输入字符串（例如 10 个字符）。它的名字是“allinputstring”
2.  长度的计算是可以的（通过在 txt 文件中重定向并扩展其字节）。名称“长度”
3.  解析 10 段（字符串）中的字符串是可以的。

所以这里有一个问题，我想回显这些片段，所以我使用下一个代码，我使用计数器来找出计数器是否给我很好的计数作为输出变量，然后回显它以在屏幕上查看它是否很好。计数器似乎不错，片段字符串的结束回声就足够了。但我想放入第 5 行。Variable`count`而不是`"%%m"`, 并且找不到如何做到这一点的语法方式。

```
setlocal enabledelayedexpansion
for /l %%m in (1,1,!lenght!) do (
  set /a count=0
  set /a count=count+%%m
  echo !count!!allinputstring:~%%m,1!
)
endlocal 
```

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:49:28.127

试试这个：

```
@echo off &setlocal enabledelayedexpansion
set /a lenght=9
set "allinputstring=ABCDEFGHIJ"
for /l %%m in (0,1,%lenght%) do (
  set /a count=0
  set /a count+=%%m
  echo !count! !allinputstring:~%%m,1!
)
endlocal 
```

输出是：

```
0 A
1 B
2 C
3 D
4 E
5 F
6 G
7 H
8 I
9 J 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T01:24:02.400

```
@ECHO off
setlocal ENABLEDELAYEDEXPANSION
SET allinputstring=abcdefghijk
SET lenght=10
for /l %%m in (1,1,!lenght!) do (
  set /a count=0
  set /a count=count+%%m
  FOR %%z IN (!count!) DO echo !count! !allinputstring:~%%z,1!
)
GOTO :eof 
```

这是否符合您的要求？

* * *

所以...让 COUNT 显示（我已将其分配给 KOWNT，但语法`endlocal&set count=%count%`会将其分配给`COUNT`）

我更改了 的起始值，`FOR/L`因为字符计数从字符串中的字符#0 开始。

```
@ECHO off
setlocal ENABLEDELAYEDEXPANSION
SET allinputstring=abcdefghij
SET lenght=9
for /l %%m in (0,1,!lenght!) do (
  set /a count=0
  set /a count=count+%%m
  FOR %%z IN (!count!) DO echo !count! !allinputstring:~%%z,1!
)
endlocal&SET KOWNT=%count%
ECHO Now KOWNT=%KOWNT% but count=%count% because we have exited the SETLOCAL
GOTO :eof 
```

当`ENDLOCAL`遇到 时，解析器替换该行中变量的当前值，**然后**执行该行。

因此，该行被执行为

```
endlocal&set KOWNT=9 
```

因为当时的值为`count`9。

执行时`SETLOCAL`，自匹配以来对环境的所有更改都将`SETLOCAL`被丢弃。环境变量在`SETLOCAL`执行时恢复到它们的状态并`count`再次变为空（就像在例程之前一样）。**然后**执行`SET`指令，设置`KOWNT`为 9。

# android - Facebook 在 Android 上的 FriendPickerFragment 似乎很慢

> ID：15799324
> 
> 赞同：1
> 
> 时间：2013-04-03T22:24:34.793
> 
> 标签：android, facebook

有没有其他人遇到过 Facebook 的 FriendPickerFragment 的性能问题？我正在关注显示朋友的教程（[https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/show-friends/](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/show-friends/)），但是向下滚动少于 300 个朋友的列表需要几分钟.

由于没有其他人发布此问题，我倾向于认为我做错了什么。有没有人对如何让它发挥作用以及 Facebook 的 Android 应用程序中的“原生”朋友列表有任何建议？

非常感谢您的指导！-蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:02:20.257

您可以尝试使用[Universal image loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

如果您的 listView 包含来自 Web 的图像，这用于 listView 优化和提高性能。

**特征：**

*   多线程图像加载 广泛调整 ImageLoader 的可能性

*   配置（线程执行器、下载器、解码器、内存和磁盘

*   缓存、显示图像选项等）图像的可能性

*   在内存和/或设备的文件系统（或 SD 卡）中缓存

*   可以“收听”加载过程 可以使用单独的选项自定义每个显示图像调用 小部件支持

# python - Django TypeError 'QueryDict' 对象不可调用

> ID：15799328
> 
> 赞同：4
> 
> 时间：2013-04-03T22:25:10.520
> 
> 标签：python, django, django-forms, django-views

我一直在寻找与我目前面临的相同问题的帖子。但我还没有找到解决办法。我的问题是：

我有一个标签列表。由 生成`{% for tag in all_tags %}`。每个标签都有一个标签状态表单。当用户从下拉列表中选择一个选项时，表单提交并应该保存 TagStatus 对象（标签是外键到 TagStatus）。但是，返回的是：

```
Exception Type: TypeError
Exception Value: 'QueryDict' object is not callable 
```

**html:**

```
<form class="nice" id="status-form" method="POST" action="">
     {% csrf_token %}
     <input type="hidden" name="status_check" />
     <input type='hidden' name="tag" value="{{ tag }}" />
     <select name="select" id="positionSelect" class="input-text category" onchange="this.form.submit()">
          <option name="all" value="0">Your Status</option>
          <option name="investing" value="1">Status 1</option>
          <option name="selling" value="2">Status 2</option>
          <option name="interested" value="3">Status 3</option>
     </select>
</form> 
```

**视图.py：**

```
@login_required
def tags(request):
    all_tags = Tag.objects.all()
    context = base_context(request)
    if request.method == 'POST':
        if 'status_check' in request.POST:
            status = request.GET('status')
            tag = request.GET('tag')
            user = request.user
            tag_status, created = TagStatus.objects.get_or_create(status=len(status), tag=tag, user=user).save()

            response = simplejson.dumps({"status": "Successfully changed status"})
        else:
            response = simplejson.dumps({"status": "Error"})
            return HttpResponse (response, mimetype='application/json')
    context['all_tags'] = all_tags
    return render_to_response('tags/tag.html', context, context_instance=RequestContext(request)) 
```

**models.py**（如果相关）：

```
class TagStatus(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)
    status = models.CharField(max_length=2, choices=tag_statuses)
    tag = models.ForeignKey(Tag, null=True, blank=True)

    def __unicode__(self):
        return self.status

    def save(self, *args, **kwargs):
        super(TagStatus, self).save(*args, **kwargs) 
```

据我所知，这与状态不是数字有关。但是当我将其转换为 int 时。我犯了同样的错误。请帮我。为什么会这样？解决方法是什么？我不太确定如何解决这个问题。提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-03T22:33:18.903

我相信您遇到的错误在以下几行中：

```
status = request.GET('status')
tag = request.GET('tag') 
```

request.GET 是一个 QueryDict，并在它尝试“调用”不可调用对象后添加 ()。您正在寻找的语法似乎是字典查找语法：

```
status = request.GET['status']
tag = request.GET['tag'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-24T15:24:36.587

或者只是调用 GETs get 来获取您的值

```
status = request.GET.get('status')
tag = request.GET.get('tag') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-15T04:09:32.037

```
def add(request):
    var1 = int(request.GET.get("num1"))
    var2 = int(request.GET.get("num2"))

    res= var1+var2
    return render(request,'calc/result.html',{'Result':res}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-01T05:47:21.620

```
status = request.GET.get['status']

tag = request.GET.get['tag'] 
```

# c# - 从实体框架更新 SQL 位列

> ID：15799329
> 
> 赞同：0
> 
> 时间：2013-04-03T22:25:13.110
> 
> 标签：c#, sql-server-2008, entity-framework

我在使用 C# 和实体框架更新 SQL 数据库中的“位”列时遇到问题。

我有一个“设置”表，其中包含一个名为“活动”的 NOT NULL 位列。当我在表中创建记录并在代码中将“活动”指定为“真”或“假”时，所创建的数据库中的记录是准确的，并且“活动”列包含代码中指定的正确值。当我更新记录并将代码中的“活动”从“假”更改为“真”时，它也可以正常工作。但是，当我将记录从“真”更新为“假”时，数据库中的“活动”列仍包含“1”（真）。

这是一个已知的问题？如果是这样，是否有解决方法？我做了相当多的研究，却找不到任何东西。

这是我的更新代码：

```
public int UpdateSetting(SettingModel settingModel)
{
    using (var db = new EfMyDB())
    {
        // Create a new setting record with the ID of the record to update.
        Setting updatedSetting = new Setting { Id = settingModel.Id };

        // Attach the record.
        db.Settings.Attach(updatedSetting);

        // Update the attached record.
        updatedSetting.Name = settingModel.Name;
        updatedSetting.Value = settingModel.Value;
        updatedSetting.Active= settingModel.Active;

        // Save the database changes.
        return db.SaveChanges();
    }
} 
```

EF“活动”列属性：

![EDMX 文件中“活动”列的属性。](https://i.stack.imgur.com/L1etX.png)

**版本**：.NET 4.0、SQL Server 2008、实体框架 4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:02:58.237

我认为这是因为当您创建一个 Setting 对象时。Active 字段采用的是默认值：即为 false。因此，当您将 Active 设置为 false 时，不会发生任何变化。您必须在更新之前从 Db 加载实体。

# vba - Microsoft Access，在 DataSheet 子窗体中自动生成列

> ID：15799331
> 
> 赞同：2
> 
> 时间：2013-04-03T22:25:20.143
> 
> 标签：vba, ms-access, ms-access-2003

我想在 MS Access 2003 中创建一个表单，让用户从任何现有查询中进行选择，然后让它在表单中显示结果（作为 DataSheet 视图中的子表单）。然后，用户将能够选择一个或多个记录并单击父表单上的按钮以根据选择执行某些操作。我希望它能够处理任何查询，限制很少，并显示查询的完整结果（所有列）。我可能有的唯一要求是它包含某些操作的某些字段。例如，如果我有一个“发送电子邮件”操作，查询将需要一个名为“电子邮件”的字段，或者可能是“收件人”和“主题”。

在运行时更改 DataSheet 子表单的 DataSource 不是问题，我在使用 VBA 之前已经这样做了。让显示的列发生变化是问题所在。

在 .NET WinForms 应用程序中，这可以通过 GridView 控件上的“自动生成列”来完成，或者直接在代码中使用 GridView.Columns 集合。在 VBA 中，我看不到从 DataSheet 视图中添加/删除列的方法。我也看不到根据查询自动生成它们的方法。看起来这些列是由放置在表单上的控件控制的（在表单视图中），虽然可以使用 VBA 添加/删除控件，但表单必须放在设计视图中并且需要对数据库的独占访问权限 - - 听起来很乱，我想避免独占访问部分。

我错过了什么吗？是否有捷径可寻？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T21:51:29.993

这就是我将如何去做。在主窗体上创建一个空白 subForm 控件。要更改源和列，只需将源对象留空，然后当您使用代码设置它时，列将重置为您使用的任何源。所以这样设置：

```
Private Sub setSource()
    Me.subForm.SourceObject = "Query.myQuery"
End Sub 
```

然后要获取选定的项目，假设您知道您想要的列，您将执行以下操作：

```
Private Sub getSelected()
    Dim rs As Recordset
    Dim f As Form

    Set f = Me.subForm.Form
    Set rs = f.RecordsetClone

    Debug.Print f.SelTop
    rs.MoveLast
    rs.MoveFirst

    rs.Move f.SelTop - 1
    Debug.Print rs!ID
End Sub 
```

如果您不明确知道该列，您可以使用它来遍历所选项目的列并对每个名称运行一些分析，直到您确定它是您想要的列。

```
Dim i as Integer
For i = 0 To rs.Fields.Count - 1
        Debug.Print rs.Fields(i).Name
Next 
```

# python - 重叠的正则表达式匹配

> ID：15799332
> 
> 赞同：1
> 
> 时间：2013-04-03T22:25:49.107
> 
> 标签：python, regex, overlapping-matches

我正在尝试创建以下正则表达式：从以下 RNA 字符串返回介于`AUG`and ( `UAG`or `UGA`or ) 之间的字符串: ，以便找到所有匹配项，包括重叠的匹配项。`UAA``AGCCAUGUAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAGUAGCAUCUCAG`

我已经尝试了几个正则表达式，结果是这样的：

```
matches = re.findall('(?=AUG)(\w+)(?=UAG|UGA|UAA)',"AGCCAUGUAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAGUAGCAUCUCAG") 
```

你能告诉我我的正则表达式模式中的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:46:31.107

使用一个正则表达式执行此操作实际上非常困难，因为大多数用途特别*不*希望重叠匹配。但是，您可以通过一些简单的迭代来做到这一点：

```
regex = re.compile('(?=AUG)(\w+)(?=UAG|UGA|UAA)');
RNA = 'AGCCAUGUAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAGUAGCAUCUCAG'
matches = []
tmp = RNA
while (match = regex.search(tmp)):
    matches.append(match)
    tmp = tmp[match.start()-2:]  #Back up two to get the UG portion.  Shouldn't matter, but safer.

for m in matches:
    print m.group(0) 
```

虽然，这有一些问题。在 的情况下，您期望回报是`AUGUAGUGAUAA`多少？是否有两个字符串要返回？还是只有一个？现在，您的正则表达式甚至无法捕获`UAG`，因为它继续匹配`UAGUGA`并在`UAA`. 为了解决这个问题，您可能希望使用`?`运算符使您的运算符变得懒惰 - 这种方法将无法捕获更长的子字符串。

也许对字符串进行两次迭代是答案，但是如果您的 RNA 序列包含`AUGAUGUAGUGAUAA`怎么办？那里的正确行为是什么？

通过遍历字符串及其子字符串，我可能更喜欢无正则表达式的方法：

```
RNA = 'AGCCAUGUAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAGUAGCAUCUCAG'
candidates = []
start = 0

while (RNA.find('AUG', start) > -1):
    start = RNA.find('AUG', start) #Confound python and its lack of assignment returns
    candidates.append(RNA[start+3:])
    start += 1

matches = []

for candidate in candidates:
    for terminator in ['UAG', 'UGA', 'UAA']:
        end = 1;
        while(candidate.find(terminator, end) > -1):
            end = candidate.find(terminator, end)
            matches.append(candidate[:end])
            end += 1

for match in matches:
    print match 
```

这样，无论如何，您都一定会获得所有匹配项。

如果您需要跟踪每个匹配项的位置，您可以修改您的候选数据结构以使用保持起始位置的元组：

```
RNA = 'AGCCAUGUAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAGUAGCAUCUCAG'
candidates = []
start = 0

while (RNA.find('AUG', start) > -1):
    start = RNA.find('AUG', start) #Confound python and its lack of assignment returns
    candidates.append((RNA[start+3:], start+3))
    start += 1

matches = []

for candidate in candidates:
    for terminator in ['UAG', 'UGA', 'UAA']:
        end = 1;
        while(candidate[0].find(terminator, end) > -1):
            end = candidate[0].find(terminator, end)
            matches.append((candidate[1], candidate[1] + end, candidate[0][:end]))
            end += 1

for match in matches:
    print "%d - %d: %s" % match 
```

打印：

```
7 - 49: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAU
7 - 85: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAG
7 - 31: UAGCUAACUCAGGUUACAUGGGGA
7 - 72: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCC
7 - 76: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAA
7 - 11: UAGC
7 - 66: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAA
27 - 49: GGGAUGACCCCGCGACUUGGAU
27 - 85: GGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAG
27 - 31: GGGA
27 - 72: GGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCC
27 - 76: GGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAA
27 - 66: GGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAA
33 - 49: ACCCCGCGACUUGGAU
33 - 85: ACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAG
33 - 72: ACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCC
33 - 76: ACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAA
33 - 66: ACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAA
78 - 85: AUCCGAG 
```

见鬼，再多写三行，你甚至可以根据它们在 RNA 序列中的位置对匹配进行排序：

```
from operator import itemgetter
matches.sort(key=itemgetter(1))
matches.sort(key=itemgetter(0)) 
```

放置在最终印刷品之前的内容让您：

```
007 - 011: UAGC
007 - 031: UAGCUAACUCAGGUUACAUGGGGA
007 - 049: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAU
007 - 066: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAA
007 - 072: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCC
007 - 076: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAA
007 - 085: UAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAG
027 - 031: GGGA
027 - 049: GGGAUGACCCCGCGACUUGGAU
027 - 066: GGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAA
027 - 072: GGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCC
027 - 076: GGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAA
027 - 085: GGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAG
033 - 049: ACCCCGCGACUUGGAU
033 - 066: ACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAA
033 - 072: ACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCC
033 - 076: ACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAA
033 - 085: ACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAG
078 - 085: AUCCGAG 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:37:39.120

不幸的是，该`re`模块目前不支持重叠匹配，但您可以轻松地分解解决方案，如下所示：

```
'AGCCAUGUAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAGUAGCAUCUCAG'
matches = []

for m in re.finditer('AUG', str):
    for n in re.finditer('(UAG)|(UGA)|(UAA)', str[m.start():]):
        matches.append(str[m.start()+3:m.start()+n.end()-3]

print matches 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:26:14.243

如果您不考虑“匹配”，而是考虑“间隔”，我认为您会发现它更容易。这就是@ionut-hulub 所做的。正如我在下面演示的那样，您可以一次性完成，但是您可能应该使用更简单的 finditer() 方法，除非您有足够的 RNA 字符串（或者它们足够长），您需要避免多余的遍历字符串。

```
s = 'AGCCAUGUAGCUAACUCAGGUUACAUGGGGAUGACCCCGCGACUUGGAUUAGAGUCUCUUUUGGAAUAAGCCUGAAUGAUCCGAGUAGCAUCUCAG'

def intervals(s):
    state = []
    i = 0
    max = len(s) - 2
    while i < max:
        if s[i] == 'A' and s[i+1] == 'U' and s[i+2] == 'G':
            state.append(i)
        if s[i] == 'U' and (s[i+1] == 'A' and s[i+2] == 'G') or (s[i+1] == 'G' and s[i+2] == 'A') or (s[i+1] == 'A' and s[i+2] == 'A'):
            for b in state:
                yield (b, i)
        i += 1

for interval in intervals(s):
    print interval 
```

# javascript - 是否可以在诺基亚地图中放置网格？

> ID：15799333
> 
> 赞同：0
> 
> 时间：2013-04-03T22:25:58.023
> 
> 标签：javascript, here-api

我使用诺基亚地图 javascript api，是否可以在地图中放置网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:40:01.053

最简单的方法是使用透明网格 PNG 作为覆盖。

首先创建一个 256x256 的 PNG 文件，如下所示。

![网格.PNG](https://i.stack.imgur.com/M1ncK.png)

然后将其用作您的`getTileUrl()` 函数，因此它会在地图上的所有地图图块上返回。

```
var getTileUrl = function (zoom, row, column) {            
       return "http://i.stack.imgur.com/M1ncK.png";
}; 
```

结果是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/NPBDj.png)

下面可以看到一个示例，当然还有您自己的 PNG 文件、[应用程序 ID 和令牌](http://www.developer.nokia.com/Community/Wiki/How_to_Obtain_Your_Own_Nokia_appID_and_Token)。

```
 /*  Set authentication token and appid 
    *
    *   please register on http://api.developer.nokia.com/ 
    *   and obtain your own developer's API key 
    */
    nokia.Settings.set("appId", "MY APP ID"); 
    nokia.Settings.set("authenticationToken", "MY TOKEN");

        // Get the DOM node to which we will append the map
        var mapContainer = document.getElementById("mapContainer");
        // Create a map inside the map container DOM node
        var map = new nokia.maps.map.Display(mapContainer, {
        	// initial center and zoom level of the map
        	center: [52.515, 13.405],
        	zoomLevel: 14,
        	components: [
        		// ZoomBar provides a UI to zoom the map in & out
        		new nokia.maps.map.component.ZoomBar(), 
        		// We add the behavior component to allow panning / zooming of the map
        		new nokia.maps.map.component.Behavior()
        	]
        });
        var getTileUrl = function (zoom, row, column) {

        		return "http://i.stack.imgur.com/M1ncK.png";
        	};

        	tileProviderOptions = {
        		getUrl: getTileUrl, // Obligatory function
        		max:20, // The highest zoom level for the overlay.
        		min:1, // The lowest zoom level for the overlay.
        		opacity: 0.5, // Overlay opacity.0 is fully transparent, 1 is fully opaque.
        		alpha:true // This value tells the renderer to read the alpha channel; required if opacity is used.
        	},
        	// Create an overlay by calling the constructor for ImgTileProvider
        	gridOverlay = new nokia.maps.map.provider.ImgTileProvider(tileProviderOptions);

        // Add the overlay to the map
        map.overlays.add(gridOverlay);
```

```
html {
        				overflow:hidden;
        			}

        			body {
        				margin: 0;
        				padding: 0;
        				overflow: hidden;
        				width: 100%;
        				height: 100%;
        				position: absolute;
        			}

        			#mapContainer {
        				width: 100%;
        				height: 100%;
        				left: 0;
        				top: 0;
        				position: absolute;
        			}
```

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        	<head>
        		<meta http-equiv="X-UA-Compatible" content="IE=7; IE=EmulateIE9; IE=EmulateIE10;"/>
        		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        		<title>Nokia Maps Example: Adding an overlay to the map</title>
        		<script type="text/javascript" charset="UTF-8" src="http://api.maps.nokia.com/2.2.4/jsl.js?with=all"></script>
        		<style type="text/css">

        		</style>
        	</head>
        	<body>
        		<div id="mapContainer"></div>
        		<div id="uiContainer"></div>

        	</body>
        </html>
```

# javascript - 使用 jQuery 引用同一对象中的另一个变量

> ID：15799334
> 
> 赞同：0
> 
> 时间：2013-04-03T22:26:04.243
> 
> 标签：javascript, jquery

好的，所以我对 jQuery 完全陌生，所以这里是：

我有一个 GameCard 对象，它在它的“构造函数”中接受一个 div，然后将其分配给一个变量。在对象中，我想在单击该 div 时执行一个功能。

```
function GameCard(imageSource, div)
{
    this.cardImage = new Image();
    this.cardImage.src = imageSource;

    this.hiddenImage = new Image();
    this.hiddenImage.src = HIDDEN_SOURCE;

    this.div = div;

    $(this).WHAT_HERE_?.click(function()
    {
    });
} 
```

几乎你如何使用 javascript 引用同一对象中的另一个变量？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:31:00.793

`div`您使用该`jQuery`功能包装。

```
$(div).on('click',function(){
  //do stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:33:20.670

你的 div 的 id 是什么？

不要在这种情况下使用 $(this)。

```
$("#IdOfDiv").click(function(){}); 
```

但是把上面的内容包起来；

```
$(function(){}); 
```

这确保了 jQuery 代码在文档加载之前不会运行。

所以;

```
$(function(){   $("#IdOfDiv").click(function(){
     //Do someting   
  }); 
}); 
```

# c# - 在 C# 中是否有可能知道谁调用了静态属性/访问器？

> ID：15799336
> 
> 赞同：4
> 
> 时间：2013-04-03T22:26:08.903
> 
> 标签：c#, properties, static, accessor

我的代码：

```
public class CLASS_A {    

public static Dictionary<int, CLASS_A> List = new Dictionary<int, CLASS_A>;
public static PP_CLASS pp = null;

 public static CLASS_A ID
 {
  get
  {
   int key = get_threadID;
   if (List.ContainsKey(key))
     return List[key];
   else
     return null;
   }
   set
   {
    int key = get_threadID;
    List[key] = value;
    }
   }

  public virtual void init(lib, name)
  {
    ...
    if (name != "")
    {
      if (pp == null)
       PP = this;
    } 
    ...
  }
} 
```

因此，无论哪个线程调用 init，它的 id 都用于存储它（无论谁调用）。例如，我的列表如下所示：

```
45 = CLASS_A_object0
67 = CLASS_A_object1
... 
```

但是现在当另一个线程调用 pp 上的方法时，比如说 pp `CLASS_A.pp.setWelcome`，这将为 pp 返回 null，并抛出 null 异常！因为当调用 set 时，线程 id 会不同，并且不会在列表中。

那么我是否有可能知道调用了哪个对象以便进行反向查找？或者也许是不同的解决方案？

**为什么我想要这个：** 最初我们连接到一个设备，所以没关系。现在有多个设备，每个设备都有自己的 ip/port。初始代码刚刚`public static PP_CLASS pp = null;`所以其他人将只是使用类名调用 pp 上的方法，事情很好。

**以前**的行为：软件从文件中选择设备列表，由于 pp 是静态的，它只与第一个设备对话。我添加了`pp==null`我在最初的帖子中忘记的那一行。因此，当代码开始时`pp==null`将为真并分配第一个设备，但现在对于其他设备`pp==null`将是假的，因此我无法与其他设备交谈。

如果需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:54:22.387

从[C# 5.0](http://blogs.msdn.com/b/mvpawardprogram/archive/2012/03/26/introduction-of-new-features-in-c-5-0.aspx)（2012 年 8 月）开始，有一个新功能“[调用者信息属性](http://msdn.microsoft.com/en-us/library/hh534540.aspx)”。如果您的类存储在单独的文件中，您可以使用`CallerFilePathAttribute`来注册实际调用的类。

[来自MSDN](http://msdn.microsoft.com/en-us/library/hh534540.aspx)的示例：

```
// using System.Runtime.CompilerServices 
// using System.Diagnostics; 

public void DoProcessing()
{
    TraceMessage("Something happened.");
}

public void TraceMessage(string message,
        [CallerMemberName] string memberName = "",
        [CallerFilePath] string sourceFilePath = "",
        [CallerLineNumber] int sourceLineNumber = 0)
{
    Trace.WriteLine("message: " + message);
    Trace.WriteLine("member name: " + memberName);
    Trace.WriteLine("source file path: " + sourceFilePath);
    Trace.WriteLine("source line number: " + sourceLineNumber);
}

// Sample Output: 
//  message: Something happened. 
//  member name: DoProcessing 
//  source file path: c:\Users\username\Documents\Visual Studio 2012\Projects\CallerInfoCS\CallerInfoCS\Form1.cs 
//  source line number: 31 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:13:31.643

您可以尝试检查堆栈跟踪。

```
var trace = new System.Diagnostics.StackTrace(); 
```

或仅获取呼叫线路它应该是这样的：

```
var caller = new System.Diagnostics.StackTrace().GetFrame(1) 
```

# android - 永远不会调用 onGpsStatusChanged(int event)

> ID：15799337
> 
> 赞同：2
> 
> 时间：2013-04-03T22:26:12.420
> 
> 标签：android, gps

我正在尝试第一次修复做某事。在 GPS 修复后，我只需要一个位置。我不知道该怎么做。我尝试了 onLocationChanged，但从未调用过我尝试过 onGpsStatusChanged，也从未调用过。

有什么选择如何获得第一个位置？

```
public class CenyActivity extends FragmentActivity implements LocationListener, OnMapClickListener, GpsStatus.Listener{ 
```

* * *

```
@Override
public void onGpsStatusChanged(int event) {
 if (event == GpsStatus.GPS_EVENT_STARTED) {
        Log.d("zmenaGPS" , "GPS event started ");

    } else if (event == GpsStatus.GPS_EVENT_STOPPED) {
        Log.d("zmenaGPS" , "GPS event stopped ");
        GpsStatus gs = locationManager.getGpsStatus(null);
        Log.d("zmenaGPSgps status" , String.valueOf(gs));

    } else if (event == GpsStatus.GPS_EVENT_FIRST_FIX) {
        Log.d("zmenaGPS" , "GPS fixace ");

    } else if (event == GpsStatus.GPS_EVENT_SATELLITE_STATUS) {
        Log.d("zmenaGPS" , "GPS EVET NECO ");

    } 
}

public void onLocationChanged(Location location) {

Log.d("Location", "change");
} 
```

GPS 修复得很好，位置可以得到......但我想在第一次修复后运行一些方法（如果 GPS 没有修复 berore lounch 活动）

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:51:36.953

您需要添加 `addGpsStatusListener`

```
LocationManager locMgr = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
locMgr.addGpsStatusListener(this); 
```

# c++ - 部分专业化和友谊

> ID：15799339
> 
> 赞同：9
> 
> 时间：2013-04-03T22:26:16.443
> 
> 标签：c++, templates, friend, partial-specialization

假设你有这样的 A 类：

```
template <typename T, typename U>
class A; 
```

B类是这样的：

```
template <typename T>
class B; 
```

现在当 T 是同一类型时，您希望两个类成为朋友，这可能吗？

例如`A<int, long>`，与`B<int>`while`B<int>`的朋友是与`A<int, U>`where的朋友，`U`可以是任何类型。

# ruby-on-rails - 如何在 Rails 控制器中验证存在和正则表达式格式？

> ID：15799342
> 
> 赞同：7
> 
> 时间：2013-04-03T22:26:40.057
> 
> 标签：ruby-on-rails, ruby, model-view-controller, controller, nosql

我正在尝试验证电子邮件地址..它是否存在..以及它是否符合正则表达式标准 (/xyz/)。我真的需要在 Rails 中的控制器或视图级别上执行此操作，因为我打算为我的应用程序转储 ActiveRecord，因为我计划稍后使用 nosql 数据库。

有什么提示吗？建议？

在模型中，它将是以下代码..但我试图在控制器或视图中执行此操作：

```
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates :email, presence: true, 
                    format: { with: VALID_EMAIL_REGEX }, 
                    uniqueness: { case_sensitive: false } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T22:53:11.550

```
class UsersController < ApplicationController
  def create
    user = User.new(params[:user])
    if valid_email?(user.email)
      user.save
      redirect_to root_url, :notice => 'Good email'
    else
      flash[:error] = 'Bad email!'
      render :new
    end
  end

private
  def valid_email?(email)
    VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
    email.present? &&
     (email =~ VALID_EMAIL_REGEX) &&
     User.find_by(email: email).empty?
  end
end 
```

但是，我会说验证仍然属于模型，即使它不是基于 ActiveRecord 的。请看一下如何使用 ActiveModel::Validations：

[http://api.rubyonrails.org/classes/ActiveModel/Validations.html](http://api.rubyonrails.org/classes/ActiveModel/Validations.html) [http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/) [http:// /asciicasts.com/episodes/219-active-model](http://asciicasts.com/episodes/219-active-model)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T23:11:36.637

即使您稍后使用 nosql，也可以将其保留在模型中。只需使用 ActiveModel 而不是 ActiveRecord。例如，不要从 ActiveRecord 继承。

```
class ModelName
  include ActiveModel::Validations

  attr_accessor :email

  validates :email, presence: true, 
                format: { with: VALID_EMAIL_REGEX }, 
                uniqueness: { case_sensitive: false } 
```

# sql - 从 Excel 工作表数据更新 Access 数据库

> ID：15799353
> 
> 赞同：1
> 
> 时间：2013-04-03T22:27:45.237
> 
> 标签：sql, excel, vba, ms-access

我使用宏将 Access 数据库中的数据提取到 Excel 工作表中。我首先打开到数据库的连接，在字符串 var 中定义我的 sql 语句，然后将该数据转储到记录集中：

```
Dim db As Database
Dim rs As RecordSet
Dim sql As String
Dim dbLocation As String

dbLocation = ThisWorkbook.Path & "\database\data.accdb"
Set db = OpenDatabase(dbLocation)
sql = "Select * FROM [Master Table]"
Set rs = db.OpenRecordSet(sql, dbOpenSnapshot)

If Not rs.EOF Then
   Worksheets("Sheet1").Range("A1").CopyFromRecordset rs
End If

rs.Close
Set rs = Nothing
db.Close
Set db = Nothing 
```

这完美地工作。我将此分发给一些人并要求他们更新字段。然后，我需要使用传回的数据更新 Access 数据。设计上简单的一点是提取的excel数据在结构上镜像了access db，所以更新查询应该很简单。还有一个主键，所以我只需要映射到那个字段。

任何想法如何做到这一点？我可以将整个 excel 数据表加载到记录集中并运行一些时髦的更新查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:55:10.103

您需要遍历工作表 1 上的行，并为每一行制作如下所示的 sql 字符串：

```
"update [Master table] set
  TableField1 = " & Range(Row, Col1).Value & ","
  TableField2 = " & Range(Row, Col2).Value & ","
  ...
where IDTableField = " & Range(Row, IDColNum).Value 
```

然后做

```
db.Execute thatString 
```

PS：我的语法可能有错误。并且在制作字符串时需要将单元格值转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:24:10.940

使用 DAO 扩展 shibormot 的解决方案：

```
Set objConnection = CreateObject("DAO.DBEngine.36")
Set db = objConnection.OpenDatabase(strDBPath, blnExclusive, blnReadOnly, strPassword)

For Each row In Range("A1:C3").Cells
    strSQL = "UPDATE table SET "
    strSQL = strSQL & "Field1 = " & Chr(34) & row.Cells(1) & Chr(34) & ","
    strSQL = strSQL & "Field2 = " & Chr(34) & row.Cells(2) & Chr(34) & ","
    strSQL = strSQL & "Field3 = " & Chr(34) & row.Cells(3) & Chr(34)
    Db.Execute
Next 
```

为字符串数据抛出 chr(34)

# java - 即使 CSV 行中没有值，OpenCSV 也会返回一个字符串

> ID：15799354
> 
> 赞同：2
> 
> 时间：2013-04-03T22:27:57.840
> 
> 标签：java, arrays, string, csv, opencsv

我正在编写一个程序来检查前两行（不包括标题）是否包含任何数据。如果不存在，则忽略该文件，并且如果前两行中的任何一行包含数据，则处理该文件。我正在使用[OpenCSV](http://opencsv.sourceforge.net/)将标题、第一行和第二行检索到 3 个不同的数组中，然后检查它们是否符合我的要求。我的问题是，即使前两行是空的，也会`reader`返回类似于`[Ljava.lang.String;@13f17c9e`第一行和/或第二行的输出（取决于我的测试文件）。

为什么它会返回任何东西，除了 a `null`，也就是说？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:33:57.647

我现在不在我的电脑前，所以请原谅任何错误~ OpenCSV API Javadocs 相当简短，但似乎没有太多内容。读取一行应将内容解析为字符串数组。一个空行应该产生一个空字符串数组，`[Ljava.lang.String;@13f17c9e`如果你尝试打印出来，它会给出类似的东西......

我会假设以下示例文件：

```
1 |
2 |
3 | "The above lines are empty", 12345, "foo" 
```

如果你做了 myCSVReader.readAll()

```
// List<String[]> result = myCSVReader.readAll();
0 : []
1 : []
2 : ["The above lines are empty","12345","foo"] 
```

要执行您在问题中描述的内容，请测试长度而不是某种空值检查或字符串比较。

```
List<String> lines = myCSVReader.readAll();

// lets print the output of the first three lines
for (int i=0, i<3, i++) {
  String[] lineTokens = lines.get(i);
  System.out.println("line:" + (i+1) + "\tlength:" + lineTokens.length);
  // print each of the tokens
  for (String token : lineTokens) {
    System.out.println("\ttoken: " + token);
  }
}

// only process the file if lines two or three aren't empty
if (lineTokens.get(1).length > 0 || lineTokens.get(2).length > 0) {
  System.out.println("Process this file!");
  processFile(lineTokens);
}
else {
  System.out.println("Skipping...!");
}

// EXPECTED OUTPUT:
// line:1  length:0
// line:2  length:0
// line:3  length:3
//         token: The above lines are empty
//         token: 12345
//         token: foo
// Process this file! 
```

# ruby-on-rails - 为 css shim 预编译 scss 文件

> ID：15799357
> 
> 赞同：0
> 
> 时间：2013-04-03T22:28:32.343
> 
> 标签：ruby-on-rails, asset-pipeline, shim

我正在尝试使用 html shim 来包含 IE 特定的样式表。但是，一旦部署到heroku，就会一直遇到“ActionView::Template::Error（ie/IE9.css 未预编译）：”错误。它似乎在本地工作。

我一直在为资产尝试不同的组合和位置，但到目前为止没有任何效果。

我当前的配置如下。

IE 特定文件位于：

```
app/assets/stylesheets/ie/index.css.scss
app/assets/stylesheets/ie/IE9.css.scss
app/assets/stylesheets/ie/IE8.css.scss
app/assets/stylesheets/ie/IE7.css.scss
app/assets/stylesheets/ie/IE6.css.scss 
```

index.css.scss

```
/*
*= require_tree .
*/ 
```

应用程序.html.haml

```
/[if gte IE 9]
  = stylesheet_link_tag "ie/IE9", media: "all" 
```

应用程序.css.scss

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require bootstrap
 *= require baseline
 *= require base10creations/gallery_required
 *= require ie
 *= require_self

*/

@import 'baseline.css.scss';
@import 'rem.css.scss';
@import 'common.css.scss';
@import 'admin.css.scss';
@import 'layout.css.scss';
@import 'pages.css.scss';
@import 'components.css.scss';
@import 'forms.css.scss';
@import 'override.css.scss'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:02:43.953

您的情况有几个选择：

*   在您的`application.css`添加中：

    *= 要求树。

*   使用[索引文件技术](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)，它只需要在您的`ie/`目录中创建一个具有相同内容的新“索引”文件（`*= require_tree .`）；

我建议删除

```
config.assets.precompile += ["IE9.css", "IE8.css", "IE7.css", "IE6.css"] 
```

从您`production.rb` 和您对游览布局文件中的 IE 垫片的有条件调用`application.html.haml`。

编辑：为 IE 提供更好的 js：

```
 /[if lt IE 9]
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:29:47.350

我最终只使用了一个链接标签而不是 rails stylesheet_link_tag。虽然我不知道为什么 stylesheet_link_tag 不合适。

工作文件是：

**目录结构**

```
app/assets/stylesheets/ie/index.css.scss
app/assets/stylesheets/ie/IE9.css.scss
app/assets/stylesheets/ie/IE8.css.scss
app/assets/stylesheets/ie/IE7.css.scss
app/assets/stylesheets/ie/IE6.css.scss 
```

**index.css.scss**

```
/*
*= require_tree .
*/ 
```

**应用程序.html.haml**

```
!!!
%html
  %head
    %meta{:charset => "UTF-8"}/
    %title= "Title"
    = stylesheet_link_tag "application", media: "all"
    = javascript_include_tag "application"
    = csrf_meta_tags
    /[if lt IE 9]
      %script{ src: "http://html5shim.googlecode.com/svn/trunk/html5.js", type: "text/javascript" }
    /[if gte IE 9]
      %link{ href: "ie/IE9.css" }
  %body
    #container
      = render :partial => "layouts/header"
      #content
        #messages
          - flash.each do |name, msg|
            = content_tag :div, msg, :id => "flash_#{name}"
        = yield
      = render :partial => "layouts/footer" 
```

**应用程序.css.scss**

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require bootstrap
 *= require baseline
 *= require base10creations/gallery_required
 *= require ie
 *= require_self

*/

@import 'baseline.css.scss';
@import 'rem.css.scss';
@import 'common.css.scss';
@import 'admin.css.scss';
@import 'layout.css.scss';
@import 'pages.css.scss';
@import 'components.css.scss';
@import 'forms.css.scss';
@import 'override.css.scss'; 
```

# java - 有没有办法强制 Arrays.asList 的返回类型

> ID：15799359
> 
> 赞同：51
> 
> 时间：2013-04-03T22:28:49.130
> 
> 标签：java, generics

我有一个返回基类集合的方法：

```
import java.util.*;
class Base { }
class Derived extends Base { }

Collection<Base> getCollection()
{
    return Arrays.asList(new Derived(),
                         new Derived());
} 
```

这无法编译，因为`Arrays.asList`( `List<Derived>`) 的返回类型与方法 ( ) 的返回类型不匹配`Collection<Base>`。我理解为什么会发生这种情况：由于泛型类型不同，这两个类没有继承关系。

有很多方法可以修复编译器错误，从将方法的返回类型更改为不使用 Arrays.asList 到将派生对象之一转换为 Base。

有没有办法告诉编译器在解析 Arrays.asList 调用的泛型类型时使用不同但兼容的类型？（我一直在尝试使用这种模式并遇到这个问题，所以如果有办法让它工作，我想知道它。）

我以为你可以做类似的事情

```
Collection<Base> getCollection()
{
    return Arrays.asList<Base>(new Derived(),
                               new Derived());
} 
```

当我尝试编译它（java 6）时，编译器抱怨它在逗号处期待一个'）'。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-03T22:32:36.490

您的语法几乎是正确的；`<Base>`方法名称之前：

```
return Arrays.<Base>asList(new Derived(),
                           new Derived()); 
```

**爪哇 8**

对于 Java 8，由于其[改进了目标类型推断](https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)，因此不需要显式类型参数。因为方法的返回类型是`Collection<Base>`，所以类型参数会被推断为`Base`。

```
return Arrays.asList(new Derived(),
                     new Derived()); 
```

Java 7 及更低版本仍然需要显式类型参数。您仍然可以在 Java 8 中提供显式类型参数；这是可选的。

# scala - 使用复合有界泛型类型扩展 scala 集合

> ID：15799363
> 
> 赞同：0
> 
> 时间：2013-04-03T22:29:00.923
> 
> 标签：scala, implicit-conversion, scala-collections, generic-collections, higher-kinded-types

我对 Scala 比较陌生，我觉得我已经跳入了 Scala 的深处。我需要编写一组（错误，扩展）集合（一个类似于 ArrayBuffer，一个类似于 Array），它们适用于通用（但有界）类型。我对如何解决这个问题有一个想法，但我的整个方法也完全有可能是错误的。

我正在尝试做的事情的本质应该从下面的代码中清楚。我希望能够制作一个“复合对象”的集合，每个组件对象都以某种类型为界。在下面的代码中，`Meal`对象可以是`Meal[Beef, Broccoli]`但不能是`Meal[Carrots, Broccoli]`。然后，我想为复合对象创建两个集合类（Buffer-like 和 IndexedSeq-like）。作为参考，我一直在使用[The Architecture of Scala Collections](http://docs.scala-lang.org/overviews/core/architecture-of-scala-collections.html)。

```
package food

import collection.mutable.ArrayBuffer
import collection.{mutable, IndexedSeqLike}
import collection.generic.CanBuildFrom

// basic objects
abstract class Food {
  val isCooked: Boolean
}
abstract class Protein extends Food
abstract class Vegetable extends Food

case class Beef(isCooked: Boolean) extends Protein
case class Fish(isCooked: Boolean) extends Protein

case class Carrots(isCooked: Boolean) extends Vegetable
case class Broccoli(isCooked: Boolean) extends Vegetable

// Composite Object
class Meal[Protein, Vegetable](protein: Protein, vegetable: Vegetable)

// Buffer Container
class MealsBuffer[Protein, Vegetable] extends ArrayBuffer[Meal[Protein, Vegetable]]

// Fixed-Size Container
final class MealsSeq[Protein, Vegetable] private (data: Array[Meal[Protein, Vegetable]])
  extends IndexedSeq[Meal[Protein, Vegetable]]
  with IndexedSeqLike[Meal[Protein, Vegetable], MealsSeq[Protein, Vegetable]] {

  import MealsSeq._

  // Mandatory re-implementation of `newBuilder` in `IndexedSeq`
  override protected[this] def newBuilder: mutable.Builder[Meal[Protein, Vegetable], MealsSeq[Protein, Vegetable]] = MealsSeq.newBuilder

  // Mandatory implementation of `apply` in `IndexedSeq`
  def apply(idx: Int): Meal[Protein, Vegetable] = {
    if (idx < 0 || length <= idx)
      throw new IndexOutOfBoundsException
    data(idx)
  }

  def length: Int = data.size

}

// Fixed-Size Container Companion Object
object MealsSeq { 

  def fromBuffer(buf: MealsBuffer[Protein, Vegetable]): MealsSeq[Protein, Vegetable] = fromIndexedSeq(buf.toArray)

  def fromBuffer(buf: ArrayBuffer[Meal[Protein, Vegetable]]): MealsSeq[Protein, Vegetable] = fromIndexedSeq(buf.toArray)

  def fromIndexedSeq(buf: Array[Meal[Protein, Vegetable]]): MealsSeq[Protein, Vegetable] = new MealsSeq[Protein, Vegetable](buf)

  def fromSeq(buf: Seq[Meal[Protein, Vegetable]]): MealsSeq[Protein, Vegetable] = new MealsSeq[Protein, Vegetable](buf.toArray)

  def apply(bases: Meal[Protein, Vegetable]*) = fromSeq(bases)

  def newBuilder: mutable.Builder[Meal[Protein, Vegetable], MealsSeq[Protein, Vegetable]] = new ArrayBuffer mapResult fromSeq

  implicit def canBuildFrom: CanBuildFrom[MealsSeq[Protein, Vegetable], Meal[Protein, Vegetable], MealsSeq[Protein, Vegetable]] =
    new CanBuildFrom[MealsSeq[Protein, Vegetable], Meal[Protein, Vegetable], MealsSeq[Protein, Vegetable]] {
      def apply(): mutable.Builder[Meal[Protein, Vegetable], MealsSeq[Protein, Vegetable]] = newBuilder
      def apply(from: MealsSeq[Protein, Vegetable]): mutable.Builder[Meal[Protein, Vegetable], MealsSeq[Protein, Vegetable]] = newBuilder
  }
} 
```

这段代码无法编译，正如我所指出的，我在伴生对象中尤其遇到了麻烦，特别是在单例对象中实现泛型方面。

正如我所说，我对我所提出的最终*不是*我最终想要完成的目标的正确解决方案持开放态度。我应该以某种方式使用特征而不是抽象类吗？隐式转换而不是有界泛型和多态？有没有办法强制执行我正在尝试使用组合而不是继承组合`Meals`对象？这在某种程度上是使用更高种类的类型的地方吗？Scala 有很多 Java 没有的东西，我有点头晕。

**更新**

澄清一下，我需要做的范围如下：我需要两个集合，一个类 Array 和一个类 ArrayBuffer。集合包含一个由一对子实体组成的实体，每个子实体都有特定的限制。在此处的示例中，集合是针对仅由一种蛋白质和一种蔬菜组成的膳食。这些集合最终将需要使用专门的行为和方法进行扩展，还需要能够覆盖方法的特定实现，以使它们对特定用例更有效。这就是任务的范围。我只是在寻找最简单的方法来完成它。

# c# - 如果搜索项为空或为空，则返回所有记录的 Linq 查询

> ID：15799365
> 
> 赞同：2
> 
> 时间：2013-04-03T22:29:10.573
> 
> 标签：c#, linq

我不太精通 linq，我试图消除在我的代码中复制一堆 linq 查询的需要。`description`如果字符串的值为 null 或空，我希望我可以修改此 linq 查询以返回一整页结果。目前它在这种情况下不返回任何结果。

所以基本上我想要这个查询......

```
return _entities.Schedules.Where(s => s.Description.ToLower().Contains(description.ToLower())))
                        .OrderByWithDirection(x => x.Description, dir)
                        .Skip((pageNumber - 1) * pageSize)
                        .Take(pageSize)
                        .ToList(); 
```

...还返回此查询如果`description`为空或为空时的结果。

```
return _entities.Schedules.OrderByWithDirection(x => x.Description, dir)
                            .Skip((pageNumber - 1) * pageSize)
                            .Take(pageSize)
                            .ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T22:33:01.340

LINQ 是可组合的，因此您可以非常简单地执行以下操作：

```
IQueryable<Schedule> results = _entities.Schedules;

// Only filter on description if a search term has been given
if (!string.IsNullOrEmpty(description)) {
    results = results.Where(s => 
                  s.Description.ToLower().Contains(description.ToLower())))
}

return results.OrderByWithDirection(x => x.Description, dir)
              .Skip((pageNumber - 1) * pageSize)
              .Take(pageSize)
              .ToList(); 
```

# xamarin.ios - Monotouch mapkit mkannotation 集合给出错误

> ID：15799366
> 
> 赞同：0
> 
> 时间：2013-04-03T22:29:10.680
> 
> 标签：xamarin.ios, mapkit, mkannotation, xamarin, pins

monotouch 又名 xamarin ios 的新手。试图让一个强大的 mapkit 工作，可以占用许多引脚。试验一个我从各种我能找到的来源拼凑而成的基本示例。

收到零星的 SIGSEGV 错误。当单击引脚以显示有时有效但有时无效的警报框时，似乎是某种内存错误。

我不确定我哪里出错了。这是正确的路线吗？这是代码

```
 using System;
    using System.Drawing;

    using MonoTouch.Foundation;
    using MonoTouch.UIKit;
    using MonoTouch.MapKit;
    using MonoTouch.CoreLocation;
    using System.Collections.Generic;

    namespace singleview
    {
    public partial class singleviewViewController : UIViewController
    {
        public singleviewViewController () : base ("singleviewViewController", null)
        {

        }

        private LocationService locationService;
        private MKMapView mapView;

        List<BasicMapAnnotation> pins = new List<BasicMapAnnotation>();

        public override void ViewDidLoad()
        {
            base.ViewDidLoad();

            // example of a series of map points
            pins.Add(new BasicMapAnnotation(new CLLocationCoordinate2D(37.766995, -122.419580), "h", "sub1", "id1"));
            pins.Add(new BasicMapAnnotation(new CLLocationCoordinate2D(37.776880, -122.418485), "i", "sub2", "id2"));
            pins.Add(new BasicMapAnnotation(new CLLocationCoordinate2D(37.786775, -122.417390), "j", "sub3", "id3"));
            pins.Add(new BasicMapAnnotation(new CLLocationCoordinate2D(37.796685, -122.416283), "k", "sub4", "id4"));

            var currentLocation = new LocationService().GetCurrentLocation();
            var visibleRegion = BuildVisibleRegion(currentLocation);

            mapView = BuildMapView(true);
            mapView.SetRegion(visibleRegion, true);

            this.View.AddSubview(mapView);

            // i have a vague idea that this delegate helps to redraw pins as user moves around screen
            mapView.Delegate = new MapViewDelegate();

            // this pin sometimes has a working callout that activates an alert and sometimes doesnt
            var testAnnotationX = new BasicMapAnnotation (new CLLocationCoordinate2D(37.786999,-122.500222), 
                                                     "made in viewdidload", "outside", "id5");
            mapView.AddAnnotation(testAnnotationX);

            // this pin collection also sometimes works but most often not
            mapView.AddAnnotations(pins.ToArray());
        }

        private MKMapView BuildMapView(bool showUserLocation)
        {
            var view = new MKMapView()
            {
                ShowsUserLocation = showUserLocation, 
            };

            view.Delegate = new MapViewDelegate();

            var testAnnotationY = new BasicMapAnnotation (new CLLocationCoordinate2D(37.800000, -122.450777), 
                                                    "made in buildmapview", "inside", "id6");

            view.AddAnnotation(testAnnotationY);

            view.SizeToFit();
            view.Frame = new RectangleF(0, 0, this.View.Frame.Width, this.View.Frame.Height);
            return view;
        }

        protected class MapViewDelegate : MKMapViewDelegate {
            protected string annotationIdentifier = "BasicAnnotation";
            UIButton detailButton; // avoid GC

            public override MKAnnotationView GetViewForAnnotation (MKMapView mapView, NSObject annotation)
            {
                if (annotation is MKUserLocation) return null;  //ignore user marker

                annotationIdentifier = (annotation as BasicMapAnnotation).Id;

                // try and dequeue the annotation view
                MKAnnotationView annotationView = mapView.DequeueReusableAnnotation(annotationIdentifier);   
                // if we couldn't dequeue one, create a new one
                if (annotationView == null)
                {
                    annotationView = new MKPinAnnotationView(annotation, annotationIdentifier);
                    //annotationView.RightCalloutAccessoryView = new UIButton(UIButtonType.DetailDisclosure); //- not required as its at bottom??

                    // configure our annotation view properties 
                    annotationView.CanShowCallout = true;
                    (annotationView as MKPinAnnotationView).AnimatesDrop = true;
                    (annotationView as MKPinAnnotationView).PinColor = MKPinAnnotationColor.Green;
                    annotationView.Selected = true;

                    // you can add an accessory view; in this case, a button on the right and an image on the left
                    detailButton = UIButton.FromType(UIButtonType.DetailDisclosure);
                    detailButton.TouchUpInside += (s, e) => {
                        Console.WriteLine ("Clicked");
                        new UIAlertView("Annotation Clicked", "You clicked on " +
                                        (annotation as MKAnnotation).Coordinate.Latitude.ToString() + ", " +
                                        (annotation as MKAnnotation).Coordinate.Longitude.ToString() , null, "OK", null).Show();
                    };

                    annotationView.RightCalloutAccessoryView = detailButton;
                }
                else // if we did dequeue one for reuse, assign the annotation to it
                    annotationView.Annotation = annotation;
                /*
                // configure our annotation view properties
                annotationView.CanShowCallout = true;
                (annotationView as MKPinAnnotationView).AnimatesDrop = true;
                (annotationView as MKPinAnnotationView).PinColor = MKPinAnnotationColor.Green;
                annotationView.Selected = true;
                */

                // fix and uncomment
                //annotationView.LeftCalloutAccessoryView = new UIImageView(UIImage.FromBundle("29_icon.png"));
                return annotationView;
            }     

            // as an optimization, you should override this method to add or remove annotations as the
            // map zooms in or out.
            public override void RegionChanged (MKMapView mapView, bool animated) {}
        }

        private MKCoordinateRegion BuildVisibleRegion(CLLocationCoordinate2D currentLocation)
        {
            var span = new MKCoordinateSpan(0.2,0.2);
            var region = new MKCoordinateRegion(currentLocation,span);

            return region;
        }

        public override void DidReceiveMemoryWarning ()
        {
            // Releases the view if it doesn't have a superview.
            base.DidReceiveMemoryWarning ();

            // Release any cached data, images, etc that aren't in use.
        }

        public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            // Return true for supported orientations
            return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
        }
    }

    public class BasicMapAnnotation : MKAnnotation{
        public override CLLocationCoordinate2D Coordinate {get;set;}
        string title, subtitle;
        public override string Title { get{ return title; }}
        public override string Subtitle { get{ return subtitle; }}

        public string Id {get ;set;}

        public BasicMapAnnotation (CLLocationCoordinate2D coordinate, string title, string subtitle, string id) {
            this.Coordinate = coordinate;
            this.title = title;
            this.subtitle = subtitle;
            this.Id = id;
        }
    }

    public class LocationService
    {
        private CLLocationManager locationManager;

        public LocationService()
        {
            locationManager = new CLLocationManager();
        }

        public CLLocationCoordinate2D GetCurrentLocation()
        {
            //dirty for now just to get some info.
            locationManager.StartUpdatingLocation();
            while(locationManager.Location == null);
            locationManager.StopUpdatingLocation();

            //return new CLLocationCoordinate2D ( 37.786995, -122.419280);
            return locationManager.Location.Coordinate;
        }
    }
} 
```

错误：

堆栈跟踪：

在 (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) 在 MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] 在 /Developer /MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 at singleview.Application.Main (string[]) [0x00000] in .../singleview/Main.cs:17 at (wrapper runtime-invoke) 。 runtime_invoke_void_object (object,intptr,intptr,intptr)

本机堆栈跟踪：

```
0   singleview                          0x00091eac mono_handle_native_sigsegv + 284
1   singleview                          0x00005788 mono_sigsegv_signal_handler + 248
2   libsystem_c.dylib                   0x938658cb _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   UIKit                               0x0274f258 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
5   UIKit                               0x02810021 -[UIControl sendAction:to:forEvent:] + 66
6   UIKit                               0x0281057f -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
7   UIKit                               0x0280f6e8 -[UIControl touchesEnded:withEvent:] + 546
8   UIKit                               0x0277ecef -[UIWindow _sendTouchesForEvent:] + 846
9   UIKit                               0x0277ef02 -[UIWindow sendEvent:] + 273
10  UIKit                               0x0275cd4a -[UIApplication sendEvent:] + 436
11  UIKit                               0x0274e698 _UIApplicationHandleEvent + 9874
12  GraphicsServices                    0x04d40df9 _PurpleEventCallback + 339
13  GraphicsServices                    0x04d40ad0 PurpleEventCallback + 46
14  CoreFoundation                      0x012bfbf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
15  CoreFoundation                      0x012bf962 __CFRunLoopDoSource1 + 146
16  CoreFoundation                      0x012f0bb6 __CFRunLoopRun + 2118
17  CoreFoundation                      0x012eff44 CFRunLoopRunSpecific + 276
18  CoreFoundation                      0x012efe1b CFRunLoopRunInMode + 123
19  GraphicsServices                    0x04d3f7e3 GSEventRunModal + 88
20  GraphicsServices                    0x04d3f668 GSEventRun + 104
21  UIKit                               0x0274bffc UIApplicationMain + 1211
22  ???                                 0x0f4d71ad 0x0 + 256733613
23  ???                                 0x0f4d4e40 0x0 + 256724544
24  ???                                 0x0f4d4a48 0x0 + 256723528
25  ???                                 0x0f4d4b9e 0x0 + 256723870
26  singleview                          0x00009b52 mono_jit_runtime_invoke + 722
27  singleview                          0x0016d02e mono_runtime_invoke + 126
28  singleview                          0x00171224 mono_runtime_exec_main + 420
29  singleview                          0x00176615 mono_runtime_run_main + 725
30  singleview                          0x000671e5 mono_jit_exec + 149
31  singleview                          0x00204fd4 main + 1988
32  singleview                          0x00002b75 start + 53

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
 a fatal error in the mono runtime or one of the native libraries 
 used by your application.
================================================================= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:13:20.260

看起来像旧的 GC 错误。

看看这个类和行的 Monotouch-Samples 应用程序：

[https://github.com/xamarin/monotouch-samples/blob/master/MapCallouts/MainViewController.cs#L108](https://github.com/xamarin/monotouch-samples/blob/master/MapCallouts/MainViewController.cs#L108)

您需要将所有 Pinview 存储在某个 Collection 中，因此 Garbage Collection 不会尝试收集它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:50:19.020

'var testAnnotationX' 呢？您可能还需要移动它。

# javascript - 根据祖父元素设置div的左值

> ID：15799368
> 
> 赞同：0
> 
> 时间：2013-04-03T22:29:27.947
> 
> 标签：javascript, jquery, html, css

我有一个绝对 div 嵌套在相对 div 中。我希望绝对 div 的左值相对于祖父母的位置，但仍然允许它的高度相对于它的父元素。这是页面所在的位置：http: [//pixeloft.com/clients/supportcenter/facilitators/](http://pixeloft.com/clients/supportcenter/facilitators/)

我希望 bio 元素的左值在单击时始终具有第一个“Frank Abdale”的左值。

这可以通过js设置div的left值来实现吗？

这是我的代码：http: [//jsfiddle.net/6RQ3u/](http://jsfiddle.net/6RQ3u/)

HTML：

```
 <div class="person">
    <div class="person-info">   <a class="showBio" target="1">
    <h4>Name 1</h4></a>

        <div class="arrow" id="arrow-1">^</div>
    </div>
    <div class="bio-wrapper">
        <div class="bio" id="bio-box-1"><a class="hideBio" target="1">X</a>Bio</div>
    </div>
</div>
<div class="person">
    <div class="person-info">   <a class="showBio" target="2">
    <h4>Name 2</h4></a>

        <div class="arrow" id="arrow-2">^</div>
    </div>
    <div class="bio-wrapper">
        <div class="bio" id="bio-box-2"><a class="hideBio" target="2">X</a>Bio</div>
    </div>
</div>
<div class="person">
    <div class="person-info">   <a class="showBio" target="3">
    <h4>Name 3</h4></a>

        <div class="arrow" id="arrow-3">^</div>
    </div>
    <div class="bio-wrapper">
        <div class="bio" id="bio-box-3"><a class="hideBio" target="3">X</a>Bio</div>
    </div>
</div> 
```

CSS：

```
.person a h4 {
    color: #000;
    font-weight: normal;
    font-size: 18px;
    line-height: 21px;
    width: 100px;
}
.bio {
    border-top: 18px solid #387496;
    position:absolute;
    width:618px!important;
    float:left;
    background-color:#d8edf4;
    padding:15px 170px;
    top:284px;
    left:-19px;
    display:none;
    z-index:200;
    clear: both;
}
.person {
    width:164px;
    margin-right:20px;
    float:left;
    display:inline;
    margin-bottom:30px;
    position: relative;
}
.person-info {
    float:left;
}
.showBio {
    float:left;
}
.hideBio {
    float:right;
    color:#fff!important;
    font-size:11px;
    position: absolute;
    right: 10px;
    top: -14px;
}
.arrow {
    display:none;
    background: url('images/bio-arrow.jpg') no-repeat -2px -6px #fff;
    float: left;
    display: block;
    clear: both;
    width: 30px;
    height: 15px;
    text-indent: -3000px;
}
a{cursor:pointer;} 
```

查询：

```
jQuery(function () {
    jQuery('.bio').hide();
    jQuery('.arrow').hide();
    jQuery('.showBio').click(function () {
        jQuery('.bio').hide();
        jQuery('.arrow').hide();
        jQuery('#bio-box-' + $(this).attr('target')).slideToggle('fast');
        jQuery('#arrow-' + $(this).attr('target')).slideToggle('fast');
    });
    jQuery('.hideBio').click(function () {
        jQuery('#bio-box-' + $(this).attr('target')).slideToggle('slow');
        jQuery('#arrow-' + $(this).attr('target')).slideUp();
    });

}); 
```

感谢你的帮助！

# django - userena：没有这样的表：userena_userenasignup

> ID：15799371
> 
> 赞同：0
> 
> 时间：2013-04-03T22:30:05.450
> 
> 标签：django

我正在尝试让 userena 为我工作，并按照他们的文档设置帐户应用程序、URI 等。我刚刚下载并安装了 userena，所以它将是最新版本。我的 django 版本是 1.5.1。

我确实运行了 manage.py syncdb 并启动了帐户应用程序——URI 生成正确等。

但是，在填写注册表单并单击提交时，我收到以下错误：

```
DatabaseError at /accounts/signup/
no such table: userena_userenasignup
Request Method: POST
Request URL:    http://localhost:8000/accounts/signup/
Django Version: 1.5.1
Exception Type: DatabaseError
Exception Value:    no such table: userena_userenasignup
Exception Location: /usr/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py in execute, line 362 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:08:30.170

userena 使用 South 来设置它的数据库。

如果您安装了 South，只需运行`./manage.py migrate userena`.

# matlab - 如何优化从 3D 矩阵生成线性索引的 matlab 函数

> ID：15799377
> 
> 赞同：0
> 
> 时间：2013-04-03T22:30:24.750
> 
> 标签：matlab, optimization, vectorization, mathematical-optimization

我在 MATLAB 中编写了一小段代码。这实际上是一个从 3D 矩阵生成线性索引的函数。这实际上是一个更大项目的一部分。问题是代码有效，但没有优化，而且速度很慢。当我在 MATLAB 上运行分析器时，该函数消耗了 90% 的计算时间。如何优化此代码？

```
%
A = rand(3,3);
H = 1200;
W = 1500;
S = rand(H,W,3,'uint8')
R = zeros(H,W,3,'uint8');
lIR = zeros(1,H*W*3);
lIC = zeros(1,H*W*3);
count = 0;
for rY = 1:1:H
    for rX = 1:1:W
        [oX,oY] = func1(rX,rY);
        cP = A*[oX; oY; 1];
        cP = cP / cP(3);
        cX = round(cP(1)); cY = round(cP(2));
        if cX < size(S,2) && cX > 1 && cY < size(S,1) && cY > 1
            lIR(count+1:count+3) = sub2ind([size(R) 1],[rY rY rY], [rX rX rX],1:3);
            lIC(count+1:count+3) = sub2ind([size(S) 1],[cY cY cY],[cX cX cX],1:3);
            count = count + 3;
        end
    end
end
%
function [oX,oY] = func1(rX,rY)
C1 = 1000;
C2 = 1200;
C3 = 1500;
C4 = 1700;
oX = C1 + (C3 - C1) * ((rX - 1) / (W - 1));
oY = C2 + (C4 - C2) * ((rY - 1) / (H - 1));
end 
```

（更新）好的，我从循环中取出函数，现在这部分使用向量计算，速度更快

```
[rX,rY] = meshgrid(1:W,1:H);
[oX,oY] = func1(rX,rY); 
```

现在代码如下所示：

```
%
A = rand(3,3);
H = 1200;
W = 1500;
S = rand(H,W,3,'uint8')
R = zeros(H,W,3,'uint8');
lIR = zeros(1,H*W*3);
lIC = zeros(1,H*W*3);
count = 0;
[rX,rY] = meshgrid(1:W,1:H);
[oX,oY] = func1(rX,rY);

for j = 1:1:H
    for i = 1:1:W

        cP = A*[oX(i); oY(j); 1];
        cP = cP / cP(3);
        c = round(cP);
        if cp(1) < size(S,2) && cp(1) > 1 && cp(2) < size(S,1) && cp(2) > 1
            lIR(count+1:count+3) = sub2ind([size(R) 1],[rY rY rY], [rX rX rX],1:3);
            lIC(count+1:count+3) = sub2ind([size(S) 1],[cY cY cY],[cX cX cX],1:3);
            count = count + 3;
        end
    end
end
%
function [oX,oY] = func1(rX,rY)
C1 = 1000;
C2 = 1200;
C3 = 1500;
C4 = 1700;
oX = C1 + (C3 - C1) * ((rX - 1) / (W - 1));
oY = C2 + (C4 - C2) * ((rY - 1) / (H - 1));
end 
```

我还尝试制作内部函数 sub2ind 的优化版本：

```
function ndx = sub2ind_optimized(siz,varargin)
siz = double(siz);
numOfIndInput = nargin-1;
k = [1 siz(1) siz(1)*siz(2)];
ndx = 1;
for i = 1:numOfIndInput
    v = varargin{i};
    ndx = ndx + (v-1)*k(i);
end 
```

这部分代码仍然很慢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:06:18.490

只需使用[sub2ind](http://www.mathworks.com/help/matlab/ref/sub2ind.html) - 一个将下标转换为线性索引的内置函数。

`linearInd = sub2ind(arraySize, dim1Sub, dim2Sub, dim3Sub, ...)`为大小为 arraySize 的 N 维数组的每个维度返回指定下标的线性索引等效项。arraySize 输入是一个 n 元素向量，用于指定数组中的维数。dimNSub 输入是为矩阵指定一个或多个行列下标的正整数标量或向量。

例如，

```
A = rand(3, 4, 2);
linearInd = sub2ind(size(A), 2, 1, 2);

linearInd =
14 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:44:24.400

优化此代码的最佳方法是将其矢量化，但我现在似乎无法弄清楚如何做到这一点，但是，我看到一些可以优化的东西可能会给你一个小的加速，首先，线

```
[oX,oY] = func1(rX,rY); 
```

可以从循环中取出并`func1`更新以生成两个矩阵 [oX(ry,rj)] 和 [oY(ry,rj)] 然后您只需访问这些值而不是`func1`再次调用，这将消除时间消耗了近 1.800.000 次调用`func1`，同时消耗了大约 30 MB 更多内存（我在 matlab 中创建了一个 1200x1500 随机矩阵，它大约为 14.4 MB）。

同样，这条线

```
cX = round(cP(1)); cY = round(cP(2)); 
```

可能只是

```
c=round(CP(1:2)) 
```

然后你可以一次又一次地raplace `cX`，再次消除近 1.800.000 次调用`c(1)``cY``c(2)``round`

另外，我认为没有必要使用

```
cX < size(S,2) && cX > 1 && cY < size(S,1) && cY > 1 
```

因为`size(S,2)=W`和`size(S,1)=H`

最后，由于 matlab 的方式，列向量比行向量快一点，因此更改`lIR`和`lIC`列可以为您节省一些额外的时间。

我认为这可以帮助您稍微提高代码的速度，但它不会给您带来几乎与矢量化一样好的加速。

问题是我似乎无法想出一种方法来正确矢量化这个块的行为

```
 if cX < size(S,2) && cX > 1 && cY < size(S,1) && cY > 1
        lIR(count+1:count+3) = sub2ind([size(R) 1],[rY rY rY], [rX rX rX],1:3);
        lIC(count+1:count+3) = sub2ind([size(S) 1],[cY cY cY],[cX cX cX],1:3);
        count = count + 3;
    end 
```

如果我有什么新想法我明天会更新，我现在真的需要睡觉了。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:28:16.787

对于一个你可以摆脱func1。您可以将其替换为

```
for ox = C1:(  (C3-C1)/(W-1) ):C3 
```

oy 是类似的。

实际上我想知道在 if 条件中增加计数器是否是错误的。因为那么 lIR 和 lIC 中的位置取决于结果。它也是唯一依赖于循环之前运行的值——如果你摆脱了这种依赖，循环可以与 parfor 一起使用。

# python - restructuredtext：提取书目和其他字段的最佳方法是什么？

> ID：15799378
> 
> 赞同：1
> 
> 时间：2013-04-03T22:30:31.920
> 
> 标签：python, restructuredtext

我正在整理一个网站，其中内容被维护为重组文本，然后转换为 html。我需要比 rst2html.py 更多的控制，所以我使用了我自己的 python 脚本，它使用了类似的东西

```
docutils.core.publish_parts(source, writer_name='html') 
```

创建 html。

publish_parts() 为我提供了有用的部分，例如标题、正文等。但是，似乎我必须在别处查看以获取 rst 字段的值，例如

```
:Authors:
:version: 
```

等等。为此，我一直在使用 publish_doctree()

```
doctree = core.publish_doctree(source).asdom() 
```

然后使用 getElementsByTagName() 递归地进行此操作，如

```
doctree.getElementsByTagName('authors')
doctree.getElementsByTagName('version') 
```

等等

使用 publish_doctree() 来提取字段可以完成这项工作，这很好，但它似乎比使用例如 publish_parts() 更复杂。我的问题只是这是否是提取这些第一个字段的最佳推荐方法，还是有更直接和不那么复杂的方法？如果没有，那很好，但我想我会询问以防我遗漏了什么。

# php - 跨子域和服务器的 Cookie - PHP 和 Apache2

> ID：15799393
> 
> 赞同：0
> 
> 时间：2013-04-03T22:31:40.237
> 
> 标签：php, cookies, apache2, subdomain

我运行一个有许多不同子域的网站。我们正在引入一个新的下载服务器，它使用主域的子域。我们通常检查用户信息的方式是使用跨子域 cookie 等，但我知道这不会起作用，因为它们来自不同的服务器，我想知道检查用户是否在主服务器上登录等的最佳方法是什么。

我想要做的是以下

Sub1.domain.tld = 主服务器

当您要下载文件时，它会将您指向存储文件的适当服务器

Sub2.domain.tld = 下载服务器

请问有什么方法可以保留或检查用户是否已登录。

我们通常使用跨子域的 cookie 的方式是

```
setcookie('LoginVariable1', $LoginVariable1, $expiretime, '/', '.domain.tld');
setcookie('LoginVariable2', $LoginVariable2, $expiretime, '/', '.domain.tld'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:35:44.380

如果子域映射到不同的服务器，我认为您有两种方法。

1）您可以在服务器 A 上共享 php 将会话写入的目录，并将服务器 B 指向那里。

2）您可以使用数据库会话并让两台服务器连接到单个数据库来验证/检索会话。

在这两种情况下，您最终都会得到一个单一的中心位置来存储会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:35:18.747

跨域 cookie 将完全适用于您的情况。它们不起作用的唯一情况是如果您有“www.somedomain.example”和“download.someotherdomain.example”，因为您不能将 cookie 定义为顶级域“example”的跨域。

所以这归结为有一个 cookie 告诉所有服务器用户的会话 id 或他在登录期间获得的身份验证令牌等信息，然后所有服务器必须询问某个中央身份验证服务此会话或令牌当前是否已登录。

# mysql - SELECT IF 行到多列

> ID：15799394
> 
> 赞同：0
> 
> 时间：2013-04-03T22:31:40.240
> 
> 标签：mysql, select, if-statement, group-by

您好，我正在寻求有关我的查询的帮助，该查询当前运行没有错误，但也没有显示我需要的数据。我的表存储电话号码，相关字段是 id、phonetype 和 phonenumber。

运行时它返回列`id`, `HOME PHONE`, `WORK PHONE`,`CELL PHONE`尽管它只显示最后一个数字。假设在给定的行中有一个家庭电话和一个工作电话号码......我只在该 ID 的工作电话列中获取数据。如果连续有一个家庭电话、工作电话和一个手机......我只在 CELL PHONE 列中获取数据。

我需要按电话类型在唯一列中为给定 ID 的所有电话号码中的一行。我希望这是有道理的，如果不是，查询应该让您知道我在寻找什么...谢谢

```
SELECT id,
(IF(phonetype = 'HOME PHONE', phonenumbers.phonenumber, '')) AS 'HOME PHONE',
(IF(phonetype = 'WORK PHONE', phonenumbers.phonenumber, '')) AS 'WORK PHONE',
(IF(phonetype = 'CELL PHONE', phonenumbers.phonenumber, '')) AS 'CELL PHONE'
FROM phonenumbers
GROUP BY id; 
```

我正在查询的表看起来像这样

```
id | name | phonetype | phonenumber

1  |  Jim  |  HOME PHONE | 0000000001        
1  |  Jim  |  WORK PHONE | 0000000002
2  |  Kim  |  HOME PHONE | 0000000003
2  |  Kim  |  WORK PHONE | 0000000004
2  |  Kim  |  CELL PHONE | 0000000005 
```

我正在寻找的结果看起来像这样......

```
id | name | home phone | work phone | cell phone

 1 | Jim | 0000000001 | 0000000002 | 
 2 | Kim | 0000000003 | 0000000004 | 0000000005 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:42:42.797

假设每个 ID 对应的每种类型只有一个电话号码：

```
SELECT a.id,
(SELECT phonenumbers.phonenumber FROM phonenumbers WHERE phonetype = 'HOME PHONE' AND id = a.id) AS 'HOME PHONE',
(SELECT phonenumbers.phonenumber FROM phonenumbers WHERE phonetype = 'WORK PHONE' AND id = a.id)  AS 'WORK PHONE',
(SELECT phonenumbers.phonenumber FROM phonenumbers WHERE phonetype = 'CELL PHONE' AND id = a.id)  AS 'CELL PHONE'
FROM phonenumbers a
GROUP BY a.id; 
```

可能有帮助。干杯。

# jquery - 使用 jQuery 查找使用 $.load 加载的 div 内的元素

> ID：15799396
> 
> 赞同：0
> 
> 时间：2013-04-03T22:31:55.910
> 
> 标签：jquery, html, dynamic, jquery-load

这是我的代码：

```
<script type='text/javascript'>
    $(document).ready(function() {
        $('#test').load('http://foobar.com/view.php?id=1186', function() {        
            console.log($('.weekdates'));

            var weeks = $('.weekdates');
            weeks.each(function(i, val) {
                alert($(this).text());                        
            });                              
        });                
    });
</script> 
```

调用的结果`console.log`是：

```
[prevObject: b.fn.b.init[1], context: document, selector: ".weekdates", jquery: "1.9.1", constructor: function…]
context: document
length: 0
prevObject: b.fn.b.init[1]
selector: ".weekdates"
__proto__: Object[0] 
```

任何想法为什么在结果集中找不到元素？它与动态加载 HTML 有关吗？

这是添加的 HTML：

```
<h3 class="weekdates"> 23 de enero -  29 de enero</h3> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:53:24.307

要直接回答您的问题，您可以在从 ajax 调用返回的 HTML 上使用 jquery 选择器，一旦您将其加载到 jQuery 对象变量中......

```
<script type='text/javascript'>
    $(document).ready(function() {
        $('#test').load('http://foobar.com/view.php?id=1186', function(html) {        
            var $html = $(html);                            
        });                
    });
</script> 
```

但老实说，您似乎正在尝试遍历结果。如果这是您从服务器返回的 JSON，则需要 $.getJSON()

```
$.getJSON('http://foobar.com/view.php?id=1186', function(data) {
  $.each(data, function(key, val) {
    // deal with item
  });
}); 
```

# wpf - 样式 WPF 正常控件取决于 Windows 主题

> ID：15799399
> 
> 赞同：3
> 
> 时间：2013-04-03T22:32:23.753
> 
> 标签：wpf, styles, themes, resourcedictionary, windowsversion

我已经阅读了很多关于 WPF 主题、皮肤、样式等的内容......但仍有一些我无法实现的东西。

我有自定义控件，它们的样式取决于操作系统主题，通过在每个主题文件（Aero.NormalColor.xaml、Luna.NormalColor.xaml 或 Aero2.NormalColor.xaml）中具有不同的样式，这就像一个魅力.

我不在 App.xaml 中加载/强制任何主题，每个控件（如按钮）根据操作系统主题保持样式。所以我在 XP 上看到 XP 按钮，在 Windows 7 上看到 Win7 按钮，在 Windows 8 上看到 Win8 按钮。

我还有 ResourceDictionaries 加载在 App.xaml 中，其中包含不同普通 wpf 控件的“命名”（显式 x：Key）样式。它们看起来像这样：

```
<Style x:Key="BlackComboBox" TargetType="{x:Type ComboBox}"></Style> 
```

我像这样使用它们

```
<ComboBox Style="{StaticResource BlackComboBox}"></ComboBox> 
```

所以现在，我的 BlackComboBox 在每个 Windows (XP/7/8) 上都是一样的。

我试图实现的是根据操作系统主题为这些普通控件设置不同的样式，而不必对控件进行子类化（我认为为每个需要特定于操作系统的控件创建一个子类将是矫枉过正），所以 BlackComboBox 在每个操作系统上可能会有所不同。

我已经尝试在主题文件中放置具有相同键的样式，但这似乎不起作用。

我考虑过在运行时加载一个不同的 ResourceDictionary ，其中包含所需操作系统版本的样式：

*   但它看起来像一个丑陋的解决方案。
*   我不喜欢检查 System.Environment.OSVersion。
*   它不会依赖于主题，而是依赖于操作系统。

对我来说，最好的方法似乎是能够在主题文件中使用“命名”样式，这种样式会覆盖 ResourceDictionaries 中的样式。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T13:24:58.513

我相信这样做的唯一方法是为每个主题创建资源字典，就像您创建自定义控件并希望每个主题具有不同的外观一样。然后，您将在每个 ComboBox 中创建一个 Style 并提供一个 ResourceKey 派生类（例如 ComponentResourceKey）作为 Style 的 x:Key，使用每个主题的资源字典中 x:Key 的相同值。然后，当您引用样式时，您将使用该 ResourceKey 的 DynamicResource。

因此，一个简化的示例是创建一个新的 WpfApplication（例如，我将其命名为 WpfResourceKeys）。在这种情况下，我将把主题资源字典放在主程序集中，因此我进入**AssemblyInfo.cs**并将**ThemeInfo**的第一个参数（即**themeDictionaryLocation**）设置为**SourceAssembly**。

然后创建一个名为“**主题**”的文件夹，并在其中为您要支持的每个主题创建一个资源字典。*例如 aero.normalcolor.xaml*、*aero2.normalcolor.xaml*、*luna.normalcolor.xaml*、*classic.xaml*等。

在每个 ResourceDictionary 中，为 ComboBox 或任何您想要的控件定义一个样式，并为其提供相同 ResourceKey 的**x:Key**。最容易使用的是**[ComponentResourceKey](http://msdn.microsoft.com/en-us/library/system.windows.componentresourcekey.aspx)**。在我的情况下，我将使用 TextBox，因为我将设置背景，并且无论为每个主题定义的模板如何，都会得到尊重。例如

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:local="clr-namespace:WpfResourceKeys"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style TargetType="TextBox" 
        x:Key="{ComponentResourceKey 
            ResourceId=Foo, 
            TypeInTargetAssembly={x:Type local:MainWindow}}">
        <Setter Property="Background" Value="Purple" />
    </Style>
</ResourceDictionary> 
```

在我的情况下，我只是将它放入每个主题 xaml 文件中，但背景设置器使用不同的值来测试它。因此，在我的 aero2.normalcolor.xaml 中，setter 值为 Purple，而在 classic.xaml 中，setter 值为 Orange。当我在 Windows 8 中使用默认主题运行测试时，TextBox 为紫色，但如果我切换到高对比度主题之一，则 TextBox 为橙色。

然后在您要引用它的地方，您将使用 DynamicResource 而不是 StaticResource，因为您不会在窗口或 app.xaml 的资源中定义样式（因为您希望框架在考虑操作系统的情况下找到它主题）。

```
<Window x:Class="WpfResourceKeys.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfResourceKeys"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox Style="{DynamicResource ResourceKey={ComponentResourceKey 
            ResourceId=Foo, 
            TypeInTargetAssembly={x:Type local:MainWindow}}}" Text="ABC" />
    </Grid> 
```

您只需要确保使用与在主题词典中定义它的方式等效的资源键。在 ComponentResourceKey 的情况下，这意味着 ResourceId 和 TypeInTargetAssembly 是等价的。

# android - RoboGuice：方法每次调用都需要一个新实例，注入可能吗？

> ID：15799401
> 
> 赞同：0
> 
> 时间：2013-04-03T22:32:34.183
> 
> 标签：android, tdd, guice, roboguice

如果我想每次都创建一个注入类的新实例，我该怎么做？这是我想要做的例子：

```
class Jet
{
  List<Missile> mAllMissiles;

  // 
  // make a new missile, and add it to the table.
  //
  void fireMissile()
  {
     Missile missile = new Missile();
     missile.doSomething();
     mAllMissiles.add(missile);
  }
} 
```

现在，我可以注入导弹，但每次都不是同一个导弹吗？这是我需要注入提供者的情况吗？

[http://code.google.com/p/google-guice/wiki/InjectingProviders](http://code.google.com/p/google-guice/wiki/InjectingProviders)

还是有其他方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:27:24.557

是的，注入一个`Provider<Missile>`. 如果可以注入`X`，则可以注入`Provider<X>`，反之亦然。注入提供者是从注入器请求类的多个实例的最佳方式。

# user-interface - Java - 将字符串转换为一系列图像。

> ID：15799404
> 
> 赞同：2
> 
> 时间：2013-04-03T22:32:48.323
> 
> 标签：user-interface

我创建了一个使用地图的游戏。地图是一个字符串，看起来像这样 -

```
######
#....#
#..I.#
#.T..#
###### 
```

其中 # = 墙，I,T = 项目，点 = 空间。

我现在正在尝试构建一个 GUI，我想将地图显示为一系列小图像。例如，每个 # 将由一个墙壁图标表示。无论如何将其转换为一系列小图标？将字符串转换为二维数组会更好吗？

非常感谢！

# ios - 核心数据迁移技术：移动属性 -> 建模关系

> ID：15799406
> 
> 赞同：7
> 
> 时间：2013-04-03T22:32:55.003
> 
> 标签：ios, core-data, database-migration

我有一个相当大的基于 Core Data 的数据库模式（约 20 个实体，超过 140 个属性），当它从我们的 1.x 代码库迁移到我们的 2.x 代码库时，它正在经历巨大的变化。

我对执行轻量级迁移非常熟悉，但我对这个特定的迁移有点困惑，因为有一些实体用于将相关对象存储为实体本身的可转换属性，但现在我想将它们迁移到实际实体.

这似乎是一个*完美*的例子，说明何时应该使用重迁移而不是轻量迁移，但我对此也不太满意。我不熟悉大量迁移，具有此数组的实体之一 -> 发生建模关系转换占用了数据库中约 90% 的行，这些数据库的大小往往超过 200 MB，我知道我们的大部分客户都在使用 iPad 1s。再加上 Apple 文档和 Marcus Zarra 的（优秀的）Core Data 书中关于大量迁移的速度和内存使用的反复警告，让我*非常*谨慎，并寻找另一种方法来处理这种情况。

WWDC 2010 的“掌握核心数据”第 118 场会议（[幻灯片在这里](http://adcdownload.apple.com//wwdc_2010/wwdc_2010_video_assets__pdfs/118__mastering_core_data.pdf)，需要登录，倒数第 9 张幻灯片，标题为“迁移后处理”是我所指的）提到了一种解决此问题的方法 - 执行迁移，然后使用存储元数据来标记是否或未完成您要执行的自定义后期处理。我认为这可能是要走的路，但对我来说感觉有点 hacky（因为没有更好的词）。另外，我担心会留下那些在实践中被弃用的属性。前任。如果我将实体 foo 的 barArray 属性移动到实体 foo 和实体 bar 之间的关系中，并且我将 barArray 设为 nil，barArray 仍然作为可以写入和读取的属性存在。解决此问题的一种潜在方法是通过将这些属性的名称更改为“已弃用”来表示已弃用这些属性

这变成了比我预期的更多的大脑转储，所以为了清楚起见，我的问题是：
1）在我工作的限制下，大量迁移是一个特别糟糕的选择吗？（业务关键型应用程序，缺乏大量迁移经验，数据库大小超过 200 MB，数万行，使用运行 iOS 5+ 的 iPad 1 的客户）
2) 如果是这样，是会话中描述的迁移后处理技术118我最好的选择？
3）如果是这样，我怎样才能立即/最终消除那些“弃用”的属性，以便它们不再污染我的代码库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T00:28:04.347

我的建议是远离大量迁移；句号。它在 iOS 上太贵了，很可能会导致不可接受的用户体验。

在这种情况下，我会进行惰性迁移。创建具有关联对象的轻量级迁移。

然后进行迁移，但*不要移动任何数据*。

更改该新关系的访问器，使其首先检查旧的可转换对象，如果填充了可转换对象，则将数据拉出，将其复制到新关系，然后将 nil 取出可转换对象。

这样做会导致数据在使用时移动。

现在这种设计存在一些问题。

如果您想对这些新对象使用谓词，那将是……混乱。您将需要进行两次获取。 *即*使用不会命中该新对象的谓词进行提取，然后在它们是内存后进行部分提取，以便将可转换对象移过。

# objective-c - 如何从目标c中的不同类访问数组

> ID：15799408
> 
> 赞同：1
> 
> 时间：2013-04-03T22:33:00.707
> 
> 标签：objective-c, arrays, class

我知道这个问题已经被问过好几次了，但是经过广泛的搜索，到目前为止，没有一个对我有用。如果可能，我想避免使用单例。抱歉，如果这被视为重复问题。

我的 ViewController.m 文件中有一个 MutableArray，其中包含 5 个对象，名为 storyList。我希望能够在我的 DetailViewController.m 文件中访问这个 storyList 数组。

我尝试过的一种方法是：（storyListArrayinDetail 是 detailviewcontroller 中的一个新数组，storyList 是 ViewController.h 中包含 5 个对象的数组）在 ViewController.h

```
DetailViewController *controller; 
```

在 ViewController.m 中

```
 controller = [[DetailViewController alloc]init];
 controller.storyListArrayinDetail = [[NSMutableArray alloc]init];       
 controller.storyListArrayinDetail = storyList; 
```

当我在 ViewController.m 中记录 controller.storyListArrayinDetail 时，我得到了正确的 5 个对象数组。但是，当我在 DetailViewController.m 中记录 storyListArrayinDetail 时，我什么也得不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:49:40.103

尝试覆盖`(id)init`DetailViewController.m 上的方法，并在此处初始化 storyListArrayinDetail。然后，每当初始化 DetailViewController 时，您也将初始化 storyListArrayinDetail。因此，要发送您的故事列表，只需使用您的代码：

```
controller = [[DetailViewController alloc]init];
controller.storyListArrayinDetail = storyList; 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:09:08.580

您可以在 DetailViewController 中创建一个新的 init 方法，并在初始化时传入数组。

*//假设DetailViewController实际上是一个UIViewController，从OP中的init方法不确定。*

详细视图控制器.h

```
@interface DetailedViewController : UIViewController
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withDataArray:(NSArray*)dataArray;
@end 
```

详细视图控制器.m

```
@interface DetailedViewController () {
   NSArray *myDataArray;
}

@end

@implementation DetailedViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withDataArray:(NSArray*)dataArray
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self) {
            // Custom initialization
            myDataArray = [NSArray arrayWithArray:dataArray];
        }
        return self;
    }

... 
```

然后在DetailedViewController 中你可以使用`myDataArray`. 希望有帮助。

编辑：包括 Hot_Licks 建议：

详细视图控制器.h

```
@interface DetailedViewController : UIViewController
@property(nonatomic, assign)NSArray *myDataArray;
@end 
```

视图控制器.m

```
DetailedViewController *controller = [[DetailViewController alloc]init];
[controller setMyDataArray:xyArray]; 
```

# ios - 适用于 iOS 的 Google Maps SDK 不显示地图内容

> ID：15799411
> 
> 赞同：12
> 
> 时间：2013-04-03T22:33:07.373
> 
> 标签：ios, iphone, google-maps-sdk-ios

我正在使用适用于 iOS 的 Google Maps SDK 的当前版本 1.1.2。地图仅显示 Google 徽标、当前位置和添加的标记。但没有任何地图内容：

![在此处输入图像描述](https://i.stack.imgur.com/nxdHU.png)

我正确注册了 API 密钥：

```
BOOL result = [GMSServices provideAPIKey:@"<my key>"]; 
```

结果是`YES`，我验证了 bundleIdentifier 与 API 控制台匹配。我从情节提要加载 GMSMapView 并将相机设置在我的`-viewDidLoad`：

```
self.mapView.camera = [GMSCameraPosition cameraWithLatitude:0 longitude:0 zoom:2]; 
```

这是由 GMSMapView 记录的：

```
Failed to make complete framebuffer object 8cd6
Failed to make complete framebuffer object 8cd6
Google Maps SDK for iOS version: 1.1.2.2533
GMSZoomTableQuadTree lacks root zoom table for tile type (mapType: 10)
GMSZoomTableQuadTree lacks root zoom table for tile type (mapType: 15) 
```

知道什么可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T10:21:28.480

自己找到了解决方案。

我正在使用自动布局。显然，在`-viewDidLoad`自动布局中还没有完成它的工作，我`GMSMapView`仍然有一个 CGRectZero 框架。`GMSMapView`似乎对零帧的反应非常挑剔。

```
[self.view layoutIfNeeded]; 
```

在设置相机之前为我解决了这个问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-07-28T19:41:53.487

这也可能是由于在您的 Google API 控制台的 API 密钥下没有输入正确的捆绑 ID。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-14T22:50:44.247

以防万一有人来到这里没有任何效果......

我遇到了这个问题并且感到无聊，所以我取消缩放地图，发现我的位置搞砸了，我的地图中心在沙漠中间！地图工作得很好。

因此，请尝试取消缩放，以防万一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-15T07:21:31.353

如果您在 XCode 项目中同时包含**GoogleMaps.framework**和**GoogleMapsM4B.framework (Maps for Business)，请删除****GoogleMapsM4B.framework**。

否则，您需要通过企业支持门户启用**Google Maps Mobile SDK for Work** ，而不是通过Cloud Console启用**适用于 iOS 的 Google Maps SDK 。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-26T11:24:21.593

我也遇到了同样的问题。问题是我在代码中的 2 个不同位置使用了两个 iOS Api 密钥。请检查您是否使用了来自 google Api 控制台的**正确 API 密钥（iOS 密钥） 。在您的应用程序中使用相同的密钥。**

# php - PHP PDO - dblib MSSQL - SQL 连接问题

> ID：15799412
> 
> 赞同：0
> 
> 时间：2013-04-03T22:33:08.353
> 
> 标签：php, sql, sql-server, pdo

我已经在这个问题上苦苦挣扎了几天，我似乎无法提出解决方案，我也看不出我哪里出错了。

我试图在 sql 中编写一个有几个连接的查询，因为我需要显示在几个不同的表中找到的信息。

我的问题在于连接，每当我做最简单的连接时，我的查询都不会返回任何内容。下面是我尝试过的两个例子。希望我只是在语法中遗漏了一些东西。

```
dbo.VehicleJobHistory:

VehicleID           Number
BookingID           Text
DriverID            Number
PickupSuburb        Text
DestinationSuburb   Text
ReasonDispatched    Text
TimeJobRequired     Date/Time
TimeCarAccepted     Date/Time
TimeCarPickup       Date/Time
TimeCarComplete     Date/Time
KmToPickup          Number
KmOfJob             Number
_timestamp          DateTime 
```

dbo.VehicleJobHistory 中的示例日期：

$STH = $DBH->query('SELECT * FROM dbo.VehicleJobHistory WHERE TimeJobRequired > "02/03/2013" AND VehicleID = "451"');

> 451/30162090/8387/Springwood/Springwood//2013 年 2 月 3 日 12:58:23:800AM///0/0/ 451/30163071/8387/Loganholme/Loganholme//2013 年 2 月 3 日 01:23:45:263AM/ //1200/4250/ 451/30163856/8387/Shailer Park/Shailer Park//2013 年 2 月 3 日 01:45:50:450AM///0/0/ 451/30163965/8387/Loganholme/Runcorn//2013 年 2 月 3 日01:48:31:200AM///2950/16050/451/30164712/8387/八英里平原/八英里平原//2013 年 2 月 3 日上午 02:09:33:017///2450/5750/451/30165778/ 8387/Springwood/Springwood//2013 年 2 月 3 日 02:44:51:363AM///800/2100/ 451/30166370/8387/Loganholme/Loganholme//2013 年 2 月 3 日 03:06:28:103AM///0/ 0/ 451/30166916/8387/Shailer Park///2013 年 2 月 3 日 03:28:46:553AM///0/13950/451/30169626/11979/Logan Central///2013 年 2 月 3 日 07:18:05： 633AM///0/0/ 451/30169632/11979/洛根中央/洛根中央//2013 年 2 月 3 日 07:18:33：120AM///0/0/ 451/30169783/11979/伍德里奇/斯普林伍德//2013 年 2 月 3 日 07:38:32:377AM///1250/6400/ 451/30170203/11979/Logan Central///2013 年 2 月 3 日08:31:52:960AM///0/1050/

```
dbo.Vehicle:

VehicleID          Number 
CarNumber          Text 
PrimaryFleetID     Number 
Conditions         Text 
RegoNum            Text 
RegoExpiry         Date/Time 
TaxiLicNum         Number 
TaxiLicExpiry      Date/Time
VehicleMake        Text 
VehicleModel       Text 
VehicleYear        Text 
OwnerID            Number 
OperatorID         Number 
```

来自 dbo.vehicle 的样本数据

```
$STH = $DBH->query('SELECT * FROM dbo.Vehicle WHERE  VehicleID = "451"');

echo $row->VehicleID  . "/"; 
echo $row->CarNumber  . "/"; 
echo $row->PrimaryFleetID . "/"; 
echo $row->Conditions . "/"; 
echo $row->OwnerID . "/"; 
echo $row->OperatorID . "/"; 
```

451/4/5/120395399168/-1/3/

当我尝试运行任何包含连接的查询时，我没有得到任何结果......

这什么都不返回：

> $STH = $DBH->query("SELECT dbo.VehicleJobHistory.BookingID, dbo.VehicleJobHistory.DriverID FROM dbo.Vehicle INNER JOIN dbo.VehicleJobHistory ON dbo.Vehicle.VehicleID = dbo.VehicleJobHistory.VehicleID WHERE TimeJobRequired > '09/03 /2013' AND VehicleID = $VehicleID");

这会从 VehicleJobHistory 表中返回一个 bookingID 和 DriverID 的数组：

> $STH = $DBH->query("SELECT BookingID, DriverID FROM dbo.VehicleJobHistory WHERE TimeJobRequired > "02/03/2013" AND VehicleID = $VehicleID");

我已经尝试了几乎所有其他我能想到的组合，但是一旦我在我的查询中添加一个连接，我似乎没有任何工作。

如果有人对此问题有经验或可以指出正确的方向，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:32:44.173

SQL 需要是左连接。

```
SELECT dbo.VehicleJobHistory.BookingID
    , dbo.VehicleJobHistory.DriverID
FROM dbo.Vehicle
LEFT JOIN dbo.VehicleJobHistory
    ON dbo.Vehicle.VehicleID = dbo.VehicleJobHistory.VehicleID
        AND dbo.VehicleJobHistory.TimeJobRequired > '09/03/2013'
WHERE dbo.Vehicle.VehicleID = $VEHICLEID 
```

# c++ - 如何保证只构造一个按值返回的对象？

> ID：15799414
> 
> 赞同：2
> 
> 时间：2013-04-03T22:33:12.133
> 
> 标签：c++, raii

我正在尝试实现一个`Foo`遵循 RAII 的类，例如，该类的对象按值返回给客户端，即

```
class SomeClass {
public:
  class Foo {
    public:
      ~Foo() { /* follow raii */ }
    private:
      friend class SomeClass;
      Foo() { /* follow raii */ }
  };

  Foo getFoo() { return Foo(); }
}; 
```

我的直接问题是有没有办法确保`Foo`在调用时只构造一个类型的对象`SomeClass::getFoo()`？我认为大多数编译器都知道只需要构造一个对象，但我知道在大多数情况下不能保证这一点。我可以采取更好的方法吗？

我尝试在构造共享指针时返回 a`boost::shared_ptr<Foo>`并仅分配一个`Foo`对象，这很好用。但是，它似乎并不理想，因为它需要堆分配并且导致接口不太干净。

谢谢！

**澄清**

Visual Studio 2005 编译器，所以我不认为 R-val 引用和 C++11 相关功能可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:35:06.080

你已经采取了最好的方法。编译器几乎肯定会忽略副本（或实际上是 C++11 中的移动）。事实上，即使是从返回值到调用代码中某个对象的复制也可能会被省略。所以这只会调用一个构造函数：

```
Foo foo = sc.getFoo(); 
```

允许省略这两个副本（或移动）的规则是：

> 当尚未绑定到引用 (12.2) 的临时类对象将被复制/移动到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到目标中来省略复制/移动操作省略的复制/移动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:38:56.237

# boost::optional + boost::in_place

如果复制构造函数很危险，最好完全禁用它。尽管大多数编译器会在您的情况下省略副本，但有时可以禁用复制省略，例如[-fno-elide-constructors](http://en.wikipedia.org/wiki/Copy_elision) - 如果“相信”复制省略的代码碰巧在这样的设置上运行 - 那里可能是[烟花](http://www.detroitmommies.com/wp-content/uploads/2009/06/fireworks.jpg)。

在 C++98 中，您可以使用[boost::optional](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/index.html) + [boost::in_place](http://www.boost.org/doc/libs/1_53_0/libs/utility/in_place_factories.html) - 没有堆分配，因为 boost::optional 保留了足够的位置。并且**保证**不会有任何副本。

[现场演示](http://coliru.stacked-crooked.com/a/e68a1c3135d07f9e)

```
#include <boost/utility/in_place_factory.hpp>
#include <boost/noncopyable.hpp>
#include <boost/optional.hpp>
#include <iostream>
#include <ostream>

using namespace boost;
using namespace std;

struct Foo: private noncopyable
{
    explicit Foo(int i)
    {
        cout << "construction i=" << i << endl;
    }
};

void make(optional<Foo> &foo)
{
    foo = in_place(11);
}

int main()
{
    optional<Foo> foo;
    cout << "*" << endl;
    make(foo);
    cout << "!" << endl;
} 
```

输出是：

```
*
construction i=11
! 
```

此代码确实适用于 MSVC2005。

* * *

# Boost.Move

另一种选择是对 C++98 - [Boost.Move](http://www.boost.org/doc/libs/1_53_0/doc/html/move.html)使用移动语义仿真。副本被禁用：

[现场演示](http://coliru.stacked-crooked.com/a/45d33f43aefda6e5)

```
#include <boost/move/utility.hpp>
#include <iostream>
#include <ostream>

using namespace std;

class Movable
{
    BOOST_MOVABLE_BUT_NOT_COPYABLE(Movable)
    bool own_resource;
public:
    Movable()
        : own_resource(true)
    {}
    ~Movable()
    {
        cout << (own_resource ? "owner" : "empty") << endl;
    }
    Movable(BOOST_RV_REF(Movable) x)
        : own_resource(x.own_resource)
    {
        x.own_resource = false;
    }
    Movable& operator=(BOOST_RV_REF(Movable) x)
    {
        own_resource = x.own_resource;
        x.own_resource = false;
        return *this;
    }
};

Movable make()
{
    return Movable();
}

int main()
{
    Movable m = make();
} 
```

输出是：

```
empty
empty
owner 
```

此代码也适用于 MSVC2005。

* * *

# C++11

在 C++11 中使用以下方法：

[现场演示](http://coliru.stacked-crooked.com/a/fd1bdb12ec9fd0e8)

```
struct Foo
{
   Foo(const Foo &)=delete;
   Foo(Foo &&)=delete;
   Foo &operator=(const Foo&)=delete;
   Foo &operator=(Foo &&)=delete;

   Foo(int){}
};

Foo create()
{
   //return Foo{0}; // ERROR: needs Foo(self &&)
   return {0};
}

int main()
{
   auto &&t=create();
} 
```

Foo 只创建一次，它的复制和移动构造函数被删除 -**保证**不会有任何复制或移动。

# javascript - 具有相同类的容器具有单独的jquery效果

> ID：15799416
> 
> 赞同：0
> 
> 时间：2013-04-03T22:33:19.477
> 
> 标签：javascript, jquery, class, hide, show

好的，所以我制作了一个快速程序，当您单击一个框时会显示隐藏的文本。问题是，当您单击任何一个框时，它都会显示它们中的文本。我只希望它显示您单击的框中的文本。

Javascript：

```
$(document).ready(function(){
    $('.insidebox').hide ();

    $('.box').on('click', function(){

        $('.insidebox').fadeToggle();        

    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:36:10.083

您需要专门访问当前*元素*，例如，通过`this`.

```
$( this ).find( '.insidebox' ).fadeToggle(); 
```

没有它，jQuery 将只查询`.insidebox`整个 DOM 中的任何元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:36:43.847

```
 $(".box").on("click", function(){

    $(this).children(".insidebox").fadeToggle();        

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:37:13.753

使用隐式对象：

```
$(document).ready(function(){
    $('.box').on('click', function(){

        $(this).fadeToggle();        

    });

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T22:38:29.313

你可以这样做：

```
$(document).ready(function(){
   $('.insidebox').hide ();

   $('.box').on('click', function(){

      $(this).fadeToggle();        

  });

}); 
```

# html - 在现有网站上方添加标题

> ID：15799421
> 
> 赞同：0
> 
> 时间：2013-04-03T22:33:53.413
> 
> 标签：html, css, header, proxy

我正在设置代理站点，我正在尝试在每个页面的顶部添加一个小标题（大约 40 像素，足以让文本框允许用户更改他们正在浏览的网站代理）。不幸的是，到目前为止，我尝试的所有内容都将标题放在现有页面的顶部，覆盖了页面的顶部。我试图找出一种将页眉放在页面上方的方法，将页面的所有内容向下移动 40 像素。非常感谢任何帮助。

谢谢。

PS 我发现似乎导致最多问题的内容是绝对位于页面顶部的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:41:52.043

```
<br clear="all" /> 
```

将其放在新 div 下方，以及您希望站点顶部栏位于上方的所有内容之上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:33:25.623

没有看到 HTML，我们是盲目的，但根据您的描述，我认为您有一个网站，其中 body 元素的直接子元素绝对位于顶部。我将寻求的解决方案包括将这些直接子级包装在相对定位的 div（或部分​​）中，然后在该 div 上方插入您的新内容。

你的结构应该从

```
<body>
   <div>this is absolutely positioned</div>
</body> 
```

至

```
<body>
    <div>this is your new header</div>
    <div class="relatively position wrapped">
        <div>this is absolutely positioned</div>
    </div>
</body> 
```

这将允许您的新内容影响后续内容的定位。

您正在查看的问题是基于绝对定位元素在文档流中没有位置的事实，因此为了获得最佳控制，您将它们放置在影响文档流的相对定位元素中，并受周围元素的影响.

如果所有有问题的元素都位于顶部，您可以只给每个样式属性，如 style="top: 40px"（更好的是，在 css 中这样做）。

如果你想包装有问题的元素但又不想弄乱 html，你可以使用 jquery：

```
jQuery(body).innerWrap('<div style="position: relative;"></div>');
jQuery(body).prepend('<div>your new content</div>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:48:15.063

这应该在您的页面中显示 40 像素的标题：

```
<div style="height:40px;width:100%;display:block">My small header</div> 
```

# css - 子 Div 的相对位置推动其他父按钮

> ID：15799422
> 
> 赞同：0
> 
> 时间：2013-04-03T22:33:55.777
> 
> 标签：css, position, css-position

（我真的不知道如何命名这个。无论如何！）

我有几个垂直堆叠的 HTML 按钮，我认为它们是父级。当您将鼠标悬停在按钮上时，按钮右侧会出现一个 div（或子级别）。为了强制 div 向右，我使用 position:relative;...

```
position:relative;
top:-25px;
left:200px; 
```

但是悬停按钮下方的按钮被按下，就像按钮下方存在的 div 一样。

如何在不按下按钮的情况下显示子 div，同时保持父按钮和子 div 的顶部对齐？

这里以 jsfiddle 为例：http: [//jsfiddle.net/8Mbyu/](http://jsfiddle.net/8Mbyu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:38:21.243

你反对使用绝对定位还是可以？[jsFiddle](http://jsfiddle.net/8Mbyu/2/)在这里。

```
.hiddenButtons { /*blue div*/
    display:none;
    background:#0af;
    width:100px;
    padding:5px;
    text-align:center;
    position:absolute;
    top:9px;
    left:210px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:42:55.630

经过一夜的思考，我想我可以将绝对定位与通过 javascript 获取父按钮的位置结合使用：

在行动：http: [//jsfiddle.net/8Mbyu/8/](http://jsfiddle.net/8Mbyu/8/)

```
.hiddenButtons { /*blue div*/
    display:none;
    background:#0af;
    width:100px;
    padding:5px;
    text-align:center;
    position:absolute;
    left:210px;
} 
```

和javascript：

```
$('.parentButton').hover(function () {
    $('.hiddenButtons').hide();
    var childID = '#' + this.id + 'Child';
    var rect = document.getElementById(this.id).getBoundingClientRect();
    var top = rect.top;
    $(childID).css("top", top+1);
    $(childID).show();
}); 
```

谢谢[https://stackoverflow.com/a/11396681/1178486](https://stackoverflow.com/a/11396681/1178486)！

我愿意看到更清洁的解决方案。

# ruby-on-rails-3 - heroku_san 未在 heroku 上以“暂存”模式运行

> ID：15799426
> 
> 赞同：0
> 
> 时间：2013-04-03T22:34:20.617
> 
> 标签：ruby-on-rails-3, heroku, heroku-san

`heroku_san`我有一个用于部署到 heroku的 rails 应用程序。当我运行`rake staging console`它时，它给了我一个到 heroku 暂存站点的控制台。但是，当我跑步时

```
>Rails.env
=> "production" 
```

这是输出。这是我的 heroku.yml 文件：

```
production:
  app: live
  stack: cedar
  config: &default_config
    RAILS_ENV: production
    RACK_ENV: production
    BUNDLE_WITHOUT: "development:test"
  addons:
    - sendgrid:starter
    - heroku-postgresql:dev

staging:
  app: staging
  stack: cedar
  config: 
    <<: *default_config
    RAILS_ENV: staging
    RACK_ENV: staging
    BUNDLE_WITHOUT: "development:test"
  addons:
    - sendgrid:starter
    - heroku-postgresql:dev 
```

我究竟做错了什么？其他一切似乎都在工作，但无论我做什么，它都在生产环境中运行。这是我尝试无济于事的其他一些heroku.yml配置：

```
staging:
  app: staging
  stack: cedar
  config: 
    <<: *default_config
    RAILS_ENV: staging
    RACK_ENV: staging
    BUNDLE_WITHOUT: "development:test"
  addons:
    - sendgrid:starter
    - heroku-postgresql:dev 
```

...

```
staging:
  app: staging
  stack: cedar
  config: default_config
    RAILS_ENV: staging
    RACK_ENV: staging
    BUNDLE_WITHOUT: "development:test"
  addons:
    - sendgrid:starter
    - heroku-postgresql:dev 
```

对于我做错了什么，任何见解都会有很大帮助。我想在此文件中设置一些其他值，但我需要它们不同才能使应用程序正常工作。

请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:18:40.010

弄清楚了。直到我跑了：

```
heroku config:add RAILS_ENV=staging --remote staging
heroku config:add RACK_ENV=staging --remote staging 
```

它实际上显示为在heroku上以“暂存”模式运行。

# jquery - 将用户控件的 JavaScript 插入 _layout.cshtml 中的一个部分

> ID：15799427
> 
> 赞同：0
> 
> 时间：2013-04-03T22:34:27.297
> 
> 标签：jquery, asp.net-mvc, razor, user-controls, master-pages

我有一个使用 jQuery`ready`方法的用户控件。由于该控件的 JS 需要 jQuery，因此需要在控件的 JS 之前包含 jQuery。

我在我的母版页的页脚中包含了 jQuery，然后定义了一个部分（“FooterJS”），所有页面都可以在其中插入它们的 JS 代码：

**_Layout.cshtml**

```
<script>{path to jquery}</script>
@section FooterJS 
```

问题是用户控件不直接使用母版页。相反，该控件包含在 Index.cshtml 页面中，因此它无法将其 JS 添加到 FooterJS 部分。

```
@Html.Partial("MyControl") 
```

在母版页上包含 jquery 后，如何添加控件的 JS？

# html - 如何在 HTML 中围绕圆形创建透视文本？

> ID：15799428
> 
> 赞同：0
> 
> 时间：2013-04-03T22:34:28.397
> 
> 标签：html, css, text, rotation, transform

我必须在其菜单和内容上制作一个带有一些透视文本的网页。以下是我应该达到的效果图像的链接。是否可以？从哪儿开始？我一无所知，甚至不知道什么是最好的。我很感激任何帮助。

[http://goo.gl/Wlz5b](http://goo.gl/Wlz5b)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:01:29.687

## 旋转文本

如果您只需要旋转文本元素，可以使用 CSS3 来完成，使用[2D-transform](http://www.w3.org/TR/css3-2d-transforms/) [rotation](http://www.w3schools.com/cssref/css3_pr_transform.asp)。

支持 IE8 和更早版本需要使用[IE 矩阵过滤器](http://msdn.microsoft.com/en-us/library/ms533014%28v=VS.85%29.aspx)（以及一些额外的工作来正确定位文本）。

[JSFiddle 演示](http://jsfiddle.net/EYtuS/3/)

**HTML**

```
<div class="content">
    <p class="text text1">This is a short sentence.</p>
    <p class="text text2">This is a second sentence.</p>
    <p class="text text3">This is a third sentence.</p>
</div> 
```

**CSS**

```
.text {
    -webkit-transform-origin: 0% 0%;
       -moz-transform-origin: 0% 0%;
        -ms-transform-origin: 0% 0%;
            transform-origin: 0% 0%;
}
.text1 {
    -webkit-transform: rotate(-4deg);
       -moz-transform: rotate(-4deg);
        -ms-transform: rotate(-4deg);
            transform: rotate(-4deg);

}
.text3 {
    -webkit-transform: rotate(4deg);
       -moz-transform: rotate(4deg);
        -ms-transform: rotate(4deg);
            transform: rotate(4deg);

} 
```

## 3D旋转

如果您需要真正的 3D 透视图（使得文本的一端比另一端大），那么跨浏览器管理将更加困难。问题中的模型似乎没有 3D 透视图。

# java - 为什么将对象添加到 ArrayList - Java 时出现此错误

> ID：15799429
> 
> 赞同：0
> 
> 时间：2013-04-03T22:34:29.560
> 
> 标签：java, oop, error-handling, arraylist

我正在尝试将对象添加到我的 ArrayList 朋友...我收到此错误，

> ArrayList 类型中的方法 add(int, Person) 不适用于参数 (int, String)

我正在尝试添加我的人对象的一些实例以最终创建一棵朋友树。

```
import java.util.*;

public class Person
{
    public int     id;     // some identification number unique to the person
    public boolean zombie; // true if the person is a zombie
    public char    state;  // p means human, z means zombie

    public static ArrayList<Person> friends;  // list of friends

    public Person(int id, char state)
    {
        this.id = id;
        this.state = state;
        //this.zombie = zombie;
    }

    public static void addPeople() 
    {
        friends = new ArrayList<Person>();
        friends.add(1, 'p');
    }

    public boolean isZombie() 
    {
        if (state == 'p')
        {
            return zombie=false;
        }
        else if (state == 'z')
        {
            return zombie=true;
        }

        return zombie;  
    }
} 
```

该错误位于“添加”字下。我还想知道如何命名对象的实例，所以我只调用名称而不是两个属性。

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:37:17.093

```
import java.util.ArrayList;
import java.util.List;

/**
 * Person description here
 * @author Michael
 * @link http://stackoverflow.com/questions/15799429/why-am-i-getting-this-error-when-adding-object-to-arraylist-java/15799474?noredirect=1#comment22468741_15799474
 * @since 4/3/13 9:45 PM
 */
public class Person {
    private Integer id;
    private boolean zombie;
    private List<Person> friends;

    public static void main(String [] args) {
        List<Person> lastPeopleStanding = new ArrayList<Person>();
        for (int i = 0; i < 3; ++i) {
            lastPeopleStanding.add(new Person(i));
        }
        lastPeopleStanding.get(0).addFriend(lastPeopleStanding.get(1));
        lastPeopleStanding.get(0).addFriend(lastPeopleStanding.get(2));
        System.out.println(lastPeopleStanding);
    }

    public Person(Integer id) {
        this.id = id;
        this.zombie = false;
        this.friends = new ArrayList<Person>();
    }

    public boolean isZombie() { return this.zombie; }

    // Irreversible!  Once you go zombie, you don't go back
    public void turnToZombie() { this.zombie = true; }

    // Only add a friend if they're not a zombie
    public void addFriend(Person p) {
        if (p != null && !p.isZombie()) {
            this.friends.add(p);
        }
    }

    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder("Person{");
        sb.append("id=").append(id);
        sb.append(", zombie=").append(zombie);
        sb.append(", friends=").append(friends);
        sb.append('}');
        return sb.toString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:37:53.150

您忘记创建一个新`Person`的添加到您的`ArrayList`：

根据您的评论，您可以创建一个名为`idCount`并在添加 a 时递增的类成员变量`Person`：

```
public void addPeople() {
    friends.add(new Person(++idCount, 'p'));
} 
```

对于可以具有状态的类，使用`static`方法通常被认为是糟糕的设计。

# objective-c - 使用 UIImage 的 UICollectionView 滚动性能不佳

> ID：15799432
> 
> 赞同：8
> 
> 时间：2013-04-03T22:34:33.903
> 
> 标签：objective-c, performance, uicollectionview, rubymotion, uicollectionviewcell

我的应用程序中有一个 UICollectionView，每个单元格都是一个 UIImageView 和一些文本标签。问题是当我让 UIImageViews 显示他们的图像时，滚动性能很糟糕。它远不如 UITableView 的滚动体验，甚至没有 UIImageView 的相同 UICollectionView 的滚动体验那么流畅。

我从几个月前发现[了这个问题](https://stackoverflow.com/questions/13864958/how-to-get-a-snappy-uicollectionview-with-lots-of-images-50-200 "这个问题")，似乎找到了答案，但它是用 RubyMotion 编写的，我不明白。我试图看看如何将它转换为 Xcode，但由于我也从未使用过 NSCache，所以有点难。那里的张贴者还在[这里](https://stackoverflow.com/questions/10400209/custom-uitableviewcell-with-large-uiimageview-causing-scroll-lag?answertab=oldest#tab-top)指出除了他们的解决方案之外还要实现一些东西，但我也不知道该把代码放在哪里。可能是因为我不理解第[一个问题](https://stackoverflow.com/questions/13864958/how-to-get-a-snappy-uicollectionview-with-lots-of-images-50-200 "这个问题")的代码。

有人可以帮助将其翻译成 Xcode 吗？

```
def viewDidLoad
  ...
  @images_cache = NSCache.alloc.init
  @image_loading_queue = NSOperationQueue.alloc.init
  @image_loading_queue.maxConcurrentOperationCount = 3
  ...
end

def collectionView(collection_view, cellForItemAtIndexPath: index_path)
  cell = collection_view.dequeueReusableCellWithReuseIdentifier(CELL_IDENTIFIER, forIndexPath: index_path)
  image_path = @image_paths[index_path.row]

  if cached_image = @images_cache.objectForKey(image_path)
    cell.image = cached_image
  else
    @operation = NSBlockOperation.blockOperationWithBlock lambda {
      @image = UIImage.imageWithContentsOfFile(image_path)
      Dispatch::Queue.main.async do
        return unless collectionView.indexPathsForVisibleItems.containsObject(index_path)
        @images_cache.setObject(@image, forKey: image_path)
        cell = collectionView.cellForItemAtIndexPath(index_path)
        cell.image = @image
      end
    }
    @image_loading_queue.addOperation(@operation)
  end
end 
```

这是第一个问题的提问者所说的第二个问题的代码[解决](https://stackoverflow.com/questions/13864958/how-to-get-a-snappy-uicollectionview-with-lots-of-images-50-200 "这个问题")了[这个](https://stackoverflow.com/questions/10400209/custom-uitableviewcell-with-large-uiimageview-causing-scroll-lag?answertab=oldest#tab-top)问题：

```
UIImage *productImage = [[UIImage alloc] initWithContentsOfFile:path];

CGSize imageSize = productImage.size;
UIGraphicsBeginImageContext(imageSize);
[productImage drawInRect:CGRectMake(0, 0, imageSize.width, imageSize.height)];
productImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

同样，我不确定如何/在哪里实现它。

非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T23:02:53.490

这是我遵循的模式。始终加载异步并缓存结果。当异步加载完成时，不要假设视图的状态。我有一个简化负载的类，如下所示：

```
//
//  ImageRequest.h

// This class keeps track of in-flight instances, creating only one NSURLConnection for
// multiple matching requests (requests with matching URLs).  It also uses NSCache to cache
// retrieved images.  Set the cache count limit with the macro in this file.

#define kIMAGE_REQUEST_CACHE_LIMIT  100
typedef void (^CompletionBlock) (UIImage *, NSError *);

@interface ImageRequest : NSMutableURLRequest

- (UIImage *)cachedResult;
- (void)startWithCompletion:(CompletionBlock)completion;

@end

//
//  ImageRequest.m

#import "ImageRequest.h"

NSMutableDictionary *_inflight;
NSCache *_imageCache;

@implementation ImageRequest

- (NSMutableDictionary *)inflight {

    if (!_inflight) {
        _inflight = [NSMutableDictionary dictionary];
    }
    return _inflight;
}

- (NSCache *)imageCache {

    if (!_imageCache) {
        _imageCache = [[NSCache alloc] init];
        _imageCache.countLimit = kIMAGE_REQUEST_CACHE_LIMIT;
    }
    return _imageCache;
}

- (UIImage *)cachedResult {

    return [self.imageCache objectForKey:self];
}

- (void)startWithCompletion:(CompletionBlock)completion {

    UIImage *image = [self cachedResult];
    if (image) return completion(image, nil);

    NSMutableArray *inflightCompletionBlocks = [self.inflight objectForKey:self];
    if (inflightCompletionBlocks) {
        // a matching request is in flight, keep the completion block to run when we're finished
        [inflightCompletionBlocks addObject:completion];
    } else {
        [self.inflight setObject:[NSMutableArray arrayWithObject:completion] forKey:self];

        [NSURLConnection sendAsynchronousRequest:self queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
            if (!error) {
                // build an image, cache the result and run completion blocks for this request
                UIImage *image = [UIImage imageWithData:data];
                [self.imageCache setObject:image forKey:self];

                id value = [self.inflight objectForKey:self];
                [self.inflight removeObjectForKey:self];

                for (CompletionBlock block in (NSMutableArray *)value) {
                    block(image, nil);
                }
            } else {
                [self.inflight removeObjectForKey:self];
                completion(nil, error);
            }
        }];
    }
}

@end 
```

现在单元格（集合或表）更新相当简单：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];

    NSURL *url = [NSURL URLWithString:@"http:// some url from your model"];
    // note that this can be a web url or file url

    ImageRequest *request = [[ImageRequest alloc] initWithURL:url];

    UIImage *image = [request cachedResult];
    if (image) {
        UIImageView *imageView = (UIImageView *)[cell viewWithTag:127];
        imageView.image = image;
    } else {
        [request startWithCompletion:^(UIImage *image, NSError *error) {
            if (image && [[collectionView indexPathsForVisibleItems] containsObject:indexPath]) {
                [collectionView reloadItemsAtIndexPaths:@[indexPath]];
            }
        }];
    }
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-29T12:42:17.077

通常，UICollectionViews 或 UITableViews 的不良滚动行为会发生，因为单元格在 iOS 的主线程中出列和构造。预缓存单元格或在后台线程中构建它们几乎没有自由，而是在您滚动阻塞 UI 时将它们出列并构建。（就我个人而言，我发现 Apple 的这种糟糕设计虽然确实简化了问题，因为您不必了解潜在的线程问题。我认为他们应该提供一个挂钩来为 UICollectionViewCell/UITableViewCell 池提供自定义实现可以处理单元的出队/重用。）

性能下降的最重要原因确实与图像数据有关，并且（按数量级递减）根据我的经验：

*   同步调用以下载图像数据：始终异步执行此操作，并在主线程中准备好构建的图像时调用 [UIImageView setImage:]
*   同步调用以从本地文件系统上的数据或其他序列化数据构建图像：也可以异步执行此操作。（例如 [UIImage imageWithContentsOfFile:]、[UIImage imageWithData:] 等）。
*   调用 [UIImage imageNamed:]：第一次加载此图像时，它是从文件系统提供的。您可能想要预缓存图像（只需在实际构造单元之前加载 [UIImage imageNamed:] 以便可以立即从内存中提供它们。
*   调用 [UIImageView setImage:] 也不是最快的方法，但通常无法避免，除非您使用静态图像。对于静态图像，有时使用您设置为隐藏或不隐藏的不同图像视图会更快，具体取决于它们是否应该显示而不是更改同一图像视图上的图像。
*   第一次出列单元格时，它要么从 Nib 加载，要么使用 alloc-init 构造，并设置一些初始布局或属性（如果您使用它们，可能还有图像）。这会在第一次使用单元格时导致不良的滚动行为。

因为我对平滑滚动非常挑剔（即使这只是第一次使用单元格），所以我构建了一个完整的框架来通过子类化 UINib 来预缓存单元格（这基本上是您进入 iOS 使用的出队过程的唯一挂钩）。但这可能超出了您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-21T00:33:43.283

我有关于`UICollectionView`滚动的问题。

什么对我来说（几乎）像一个魅力：我用 90x90 的 png 缩略图填充了单元格。我说几乎是因为第一个完整的滚动不是那么顺利，但再也没有崩溃过。

在我的例子中，单元格大小是 90x90。

我之前有很多原始 png 大小，当 png 原始大小大于 ~1000x1000 时，它非常不稳定（第一次滚动时很多崩溃）。

因此，我选择 90x90（或类似）`UICollectionView`并显示原始 png（无论大小）。希望它可以帮助别人。

# php - 在 PHP 中打印 MySQL 查询

> ID：15799435
> 
> 赞同：1
> 
> 时间：2013-04-03T22:34:48.907
> 
> 标签：php, mysql

```
function MattsScript()
{
    $query = 'SELECT * FROM `ACCOUNTING` WHERE  `ACCTSTATUSTYPE` = "start" AND `Process_status` IS NULL LIMIT 0,100';
    $result = mysql_query($query);
    $row = mysql_fetch_assoc($result);

    while ($row = mysql_fetch_assoc($result)) 
    {
        echo $row['USERNAME'] . "<br />";
        echo $row['ACCTSTATUSTYPE'];
    }
} 
```

我正在尝试回显查询的结果。我认为这里发生的是我将查询保存到变量中，前 100 个结果（LIMIT 0,100）然后使用循环将每一行回显到页面。

但是什么都没有发生，没有错误，也没有写入页面。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:03:20.460

如果您只期望一个结果，请删除**while 循环**如果不离开 while 循环并删除行**$row = mysql_fetch_assoc($result);** 在while循环之前。还要确保您正确查询数据库。

例子：`$result = mysql_query($query) or die(mysql_error());`

# java - 业务对象和传输对象的区别？

> ID：15799445
> 
> 赞同：1
> 
> 时间：2013-04-03T22:35:13.643
> 
> 标签：java, dao, dto, business-logic, business-objects

虽然存在许多关于这个问题的 stackoverflow 答案，但他们很少清楚地区分两者之间的区别。结果，我在理解它们时感到困惑。

在这里，我正在使用这种[模式](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)

参考图 9.1，同时使用了*业务对象*和*传输对象*。虽然两者的定义如下：

*通常被认为是代表实体的类，例如书或商店。这样的类具有某些属性，例如价格、颜色、宽度、isbn 编号等。在 Java 或 .NET 中，它由所谓的 setter 和 getter 组成*

现在 DTO 具有相同的定义。在我看来，它就像一个代表对象的 Bean。因此，在独立应用程序中，可能是业务对象和 DTO。请根据上面的模式链接区分两者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:40:27.933

DTO 用于将数据从一层传输到另一层（例如从数据访问层到模型）。

BO 包含业务逻辑。

但是这种模式中最重要的是将层分开，以使软件更易于维护。

例如，如果将数据访问层分开，无论是使用数据库获取数据，还是使用套接字，还是使用管道分隔的纯文本文件，都可以更改它，它不会影响其余的层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:50:16.850

那篇文章定义：

> BusinessObject 代表数据客户端。它是需要访问数据源才能获取和存储数据的对象。除了访问数据源的 servlet 或 helper bean 之外，BusinessObject 还可以实现为会话 bean、实体 bean 或一些其他 Java 对象。

和

> 这表示用作数据载体的传输对象。DataAccessObject 可以使用传输对象将数据返回给客户端。DataAccessObject 还可以在传输对象中接收来自客户端的数据，以更新数据源中的数据。

您肯定可以看到想要在数据源中获取和存储数据的类与仅在层之间携带数据的对象之间的区别吗？

# ruby - rbx-2.0.0-rc1 和 rbx-2.0.0-dev 有什么区别？

> ID：15799455
> 
> 赞同：0
> 
> 时间：2013-04-03T22:36:05.847
> 
> 标签：ruby, rbenv, rubinius

在 rbenv (ruby-build) 上，rbx-2.0.0-rc1 和 rbx-2.0.0-dev 有什么区别？

我遇到了[https://twitter.com/veganstraightedge/status/315641493245267969](https://twitter.com/veganstraightedge/status/315641493245267969)，但这让我更加困惑，而不是更少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T01:22:44.630

rbx-2.0.0-rc1 是 Rubinius 2.0.0 的候选版本 1。rbx-2.0.0-dev 是 Rubinius 2.0.0 的开发版本，不管你运行 ruby​​-build 时 Git 存储库的 HEAD 是什么。

# svn - 使用 c2000 texas Instruments 代码编辑器从单个代码库生成多个产品固件

> ID：15799456
> 
> 赞同：0
> 
> 时间：2013-04-03T22:36:06.300
> 
> 标签：svn, merge, signal-processing, texas-instruments, code-composer

在工作中，我们使用 C2000 内核 Texas Instruments TMS320F DSP 微控制器。我们从单一代码库和单一核心产品开始。客户要求导致从我们的 svn 存储库中针对不同的配置和不同的产品创建了许多修改分支。它们都共享相同的控制单元 PCB 和微控制器，有时会在外部连接不同的外围设备。不同配置的一个示例是使用修改后的 ADC 例程和序列器配置（以及 ADC 校准的不同偏移和比例值）以及不同控制例程/PID 调整值等的产品。

维护和更新产品的所有不同固件项目已成为负担，而我是唯一的开发人员。我们正在反复思考，例如使用差异报告来最小化所有固件项目之间的差异，然后使用正确设置 #defines 和 #ifdef 和 #ifndef 语句来有条件地编译所有固件项目，并且可能构建所有 10 个左右的固件立刻。

那么是否可以设置构建环境以输入#define _BUILD_CFG_1，完成编译，然后输入#define _BUILD_CFG_2 等，然后我剩下10个已编译的固件，所有版本相同但配置不同。

我们的另一个想法是设置闪存并在运行时根据闪存中代表不同配置的某些位运行不同的代码部分。这意味着我们对所有产品都有一个固件。由于我们的其他设置及其工作方式，此方法可能不实用。我们还担心性能下降，因为我们被迫占用 CPU 资源。

仅供参考，我们使用的是德州仪器 Code Composer V4。

还有其他方法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:47:28.520

IIRC Code Composer 创建一个 Makefile 以在所有漂亮的 IDE 下运行。

您可以创建另一个 Makefile 来设置适当的变量，调用 IDE 创建的 Makefile，然后将生成的可执行文件移动到其最终的静止位置。

# c - IP 到 Unsigned Int 不匹配

> ID：15799460
> 
> 赞同：2
> 
> 时间：2013-04-03T22:36:22.433
> 
> 标签：c, ip

我按照[这个](https://stackoverflow.com/questions/7443846/converting-ip-from-c-string-to-unsigned-int)问题和答案将 IP 地址（数字和点表示法）转换为其各自的无符号整数等效项。换句话说，我使用了 inet_aton 函数

我用 c 编写了一个非常快速的程序来测试该功能。以下是代码：

```
int main(int argc, char** argv) {
    char* ip1 = "125.113.200.068";
    char* ip2 = "125.113.200.068";
    struct in_addr ip1s;
    inet_aton(ip1, &ip1s);
    struct in_addr ip2s;
    inet_aton(ip2, &ip2s);

    if (ip1s.s_addr == ip2s.s_addr) {
        printf("equal: %u = %u", ip1s.s_addr, ip2s.s_addr);
    }else{
        printf("not equal: %u != %u", ip1s.s_addr, ip2s.s_addr);
    }

    return (EXIT_SUCCESS);
} 
```

尽管两个字符串给出了相同的 ip，但我得到以下输出：

> 不等于：15774463！= 0

此外，如果我删除 0 以将 ips 设置为 125.113.200.68，则该函数返回两个相等的无符号整数。前面的 0 是否会使 IP 无效？但如果是这种情况，为什么我在前一个示例中得到一个 ips 的非零值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:44:10.003

您必须检查[`inet_aton`](http://www.beej.us/guide/bgnet/output/html/multipage/inet_ntoaman.html)的返回值：

> `inet_aton()`如果地址有效则返回非零，如果地址无效则返回零。

您的地址无效。`068`由于前导零而被解释为八进制，并且`8`不是有效的八进制数字。如果`inet_aton`失败，它不会改变`in_addr`结构，所以你打印出来的是随机堆栈垃圾。

无论如何，`inet_aton`不​​推荐用于新代码。改为使用[`inet_pton`](http://www.beej.us/guide/bgnet/output/html/multipage/inet_ntopman.html)。

# php - 如何在php中有效地管理includes和require_once？

> ID：15799472
> 
> 赞同：1
> 
> 时间：2013-04-03T22:37:09.627
> 
> 标签：php, path, require, autoload

我的**index.php**中有一些定义，其值指向一些文件夹。我想避免烦人的要求：

```
require_once("something/../../../file.php") 
```

问题（因为范围）是当我尝试在另一个 php 文件中使用它们时，这些定义会丢失，然后我需要再次进行 require_once("/../../......etc") ，或再次定义它们。

我怎样才能避免这种情况：

```
require_once(PATH_LIBRARY1."/my_file.php")? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:38:36.660

1.  您必须了解[自动加载](http://www.php.net/manual/en/function.spl-autoload-register.php)。它有助于避免使用 require 或 include 。

2.  关于[psr-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)标准。它有助于正确管理文件系统中的类。并使用简单的自动加载功能。

3.  关于[作曲家](http://getcomposer.org/doc/)。它有助于避免为自动加载编写任何内容。即使您不使用 psr-0，它也可以创建类映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:39:59.140

在现代 PHP 应用程序中，对 require/include 的需求非常小，因为包含代码的最有效方法是使用 OOP 类和自动加载功能。这样您就不必担心任何类的代码位于何处，您只需使用该类。

唯一仍然需要手动包含的东西是类之外的函数以及配置数组等本身也没有定义类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:39:40.207

几个选择：

*   使用自动加载
*   为应用程序定义一个基本路径常量并依赖它
*   定义一个中央库，负责加载您需要的类

# java - 64 位 java 不会分配超过 2GB 的堆内存

> ID：15799476
> 
> 赞同：7
> 
> 时间：2013-04-03T22:37:33.037
> 
> 标签：java, eclipse, heap-memory

我正在从 Eclipse 运行我的程序并使用 64 位 java，但我仍然无法让它分配超过 2GB 的内存。我正在运行一些基准测试，所以我需要大量内存。

我的 eclipse.ini 中有这个：-Xmx8g

我希望它使用我所有的记忆。这可能是由于 32 位版本的 eclipse 造成的吗？我不确定我对日食有什么。

我尝试在运行程序时将 -Xmx8g 发送到 VMArgs。我正在运行 64 位 Windows 7 和 64 位 JRE。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T22:46:32.760

在运行配置屏幕中，转到参数选项卡，添加`-Xmx8g`到 VM 参数文本框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:59:40.660

在尝试了其他所有方法之后，看起来 VMArguments 根本无法在 Eclipse 中工作。

在 Eclipse 中更改 DEFAULT VM 参数有效（终于！）：

将 VM 参数插入您的 JRE：当 Eclipse 打开时，打开 Preferences（对于 Windows：位于 Window 菜单项下。对于 Mac：位于 Eclipse 菜单项下），打开 Java 部分，单击 Installed JREs，单击 JRE使用过（可能是 jre6），单击 Edit... 按钮，并将其插入到 Default VM Arguments 中：

-Xms256M -Xmx8192M

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:42:21.920

尝试这样做：

```
System.getProperty("sun.arch.data.model") 
```

并查看它是否在您的程序中返回 32 或 64

此外，您需要将 -Xmx 添加到您的程序的启动参数中，而不仅仅是 Eclipse。

您可以通过执行以下操作来验证您的程序的 -Xmx 配置是否正确：

```
Runtime.getRuntime().maxMemory(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T17:35:12.403

您只需添加`-d64`到您的`eclipse.ini`

# ruby-on-rails - 已达到预算和应用程序请求限制的分数

> ID：15799478
> 
> 赞同：0
> 
> 时间：2013-04-03T22:37:42.350
> 
> 标签：ruby-on-rails, ruby, facebook-graph-api

我对 Facebook 的速率限制有点困惑，需要澄清一下。

据我所知，每个应用程序每天每个应用程序会收到 1 亿次 API 调用，每个访问令牌每秒会收到 600 次调用。

根据 Insight，我目前每天总共为我的应用程序拨打约 500K 次电话，但收到大量“达到应用程序请求限制”。同样在 Insight 中，我看到一个表格，其中有一个名为“预算分数”的列。其中列出的端点中有四个超过 100%（一个约为 3000%）。

Facebook 每个端点是否也受到限制，有什么方法可以确保我没有收到这些应用程序请求限制达到错误？据我所知，我什至没有接近 Facebook 列为上限的每个应用程序每天 100M 的 api 调用。

编辑：作为澄清，我收到错误代码 4（API 调用过多）而不是错误代码 17（API 用户调用过多）。[https://developers.facebook.com/docs/reference/api/errors/](https://developers.facebook.com/docs/reference/api/errors/)

# android - 并行图像检测和相机预览 OpenCV Android

> ID：15799487
> 
> 赞同：5
> 
> 时间：2013-04-03T22:38:19.910
> 
> 标签：android, opencv, image-processing

我正在使用 OpenCV 来检测图像。这是我的问题：我的函数`detect_image(mRgba)`需要一些时间来执行操作并给出一些结果。虽然功能正在计算相机预览被冻结，因为它只在代码到达时显示图像`return inputFrame.rgba()`我想知道如何使这些操作并行，当相机预览以正常速度工作时，功能将在后台计算。

```
public Mat onCameraFrame(CvCameraViewFrame inputFrame) {
mRgba = inputFrame.rgba();
detect_image(mRgba);
return inputFrame.rgba();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T00:10:27.447

为了体验并行化，简单的方法是使用 AsyncTask 来处理图像：

[AsyncTask 参考页面](http://developer.android.com/reference/android/os/AsyncTask.html "AsyncTask 参考页")

更友好的介绍可以在这里找到：

[http://android-developers.blogspot.co.il/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.co.il/2010/07/multithreading-for-performance.html)

而这：

[http://developer.att.com/developer/forward.jsp?passedItemId=11900176](http://developer.att.com/developer/forward.jsp?passedItemId=11900176)

是对 Android 上多线程的全面介绍。

*如果你想开始*，一个简单的算法应该是这样的：

*   从您的“onCameraFrame”方法中检查您是否有一个 AsyncThread 用于处理已经运行的图像
*   如果答案是“是”，只需在预览窗口中显示 mRgba 并返回
*   如果答案是“否”，则启动一个新的 AsyncThread 并让它在 mRgba 上运行“detectImage”，确保结果保存在 onPostExecute 方法中。

使用此算法，如果您的系统可以在以 60fps 进行预览时每秒检测 4 张图像（例如），您将能够在单个处理器设备上获得流畅的视频，其中大约每 20-30 帧有一个新结果，在实际假设 detect_image 是 CPU 密集型的，而相机预览/显示是 I/O 密集型的。

```
   捕获：xxxxxxxxxxxxxxxxxxxxx...
   处理：1.......1........1.......1......1........1....
                时间------------------------------------>

```

从 HoneyComb 开始，一种更精细的方法是考虑 CPU 中的内核数量（多核手机/平板电脑变得越来越普遍）并并行启动 N 个 AsyncTask（每个内核一个），为每个内核提供不同的预览图像一个（也许使用线程池......）。

如果您通过固定延迟（大约为 detectImage/N 的持续时间）将每个线程分开，您应该得到一个恒定的结果流，其频率应该是单线程版本的倍数。

```
   捕获：xxxxxxxxxxxxxxxxxxxxx...
   处理：1.2.3.4.1.2.3.4.1.2.3.4.1.2.3.4.1.2.3.4....
                时间------------------------------------>

```

希望这可以帮助

# android - Proguard 保留 R 类

> ID：15799493
> 
> 赞同：1
> 
> 时间：2013-04-03T22:38:46.293
> 
> 标签：android, proguard

我正在将亚马逊的广告集成到我的应用程序中，并且我使用 Proguard。他们告诉我，如果我使用 Proguard，我必须“确保 R 类在混淆过程中保留其名称”

有谁知道这意味着什么，如果是的话，我怎么能做到这一点？

**更新**

我已经尝试了很多不同的选项，但我仍然从亚马逊的 SDK 中得到一个错误，即我的资源被混淆了。我试过了：

```
-keepnames com.my.app.*.R;

-keeppackagenames com.my.app.*.R;

-keepclassmembers com.my.app.*.R;

-keep class com.my.app.*.R;

-keepclassmembers class **.R$* {
    public static <fields>;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:48:17.223

Proguard 通过将所有类名和方法替换为 A、B、C、D 等来混淆您的代码。

要保留类名，请添加`-keepnames`到您的 proguard 文件中。

示例可能是`-keepnames com.example.myproject.R`

另请参阅此 SO 帖子：[Proguard keep class names?](https://stackoverflow.com/questions/10971810/proguard-keep-class-names)

另请参阅 proguard 项目以了解有关它的作用以及可以使用哪些选项的更多信息：http: [//proguard.sourceforge.net/#manual/introduction.html](http://proguard.sourceforge.net/#manual/introduction.html)

# linq - 使用 .Contains(Id) 时保留返回实体的顺序

> ID：15799494
> 
> 赞同：0
> 
> 时间：2013-04-03T22:38:50.437
> 
> 标签：linq, entity-framework, ef-code-first, code-first

我想通过传入一个 ID 列表来补充实体集合并保留顺序。

另一个 SO 答案[https://stackoverflow.com/a/15187081/1059911](https://stackoverflow.com/a/15187081/1059911)建议使用这种方法来为实体补水，效果很好

```
var entities = db.MyEntities.Where(e => myListOfIds.Contains(e.ID)).ToList(); 
```

但是集合中实体的顺序与 ID 的顺序不同

有没有办法保留订单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:33:34.940

可能会有所帮助：

```
var entities = db.MyEntities
    .Where(e => myListOfIds.Contains(e.ID))
    .OrderBy(e => myListOfIds.IndexOf(e.ID)).ToList(); 
```

**编辑**

**JohnnyHK**澄清说这不适用于 LINQ to Entities。为此，您需要订购*IEnumerable*而不是*IQueryable*，因为*IQueryProvider*在向服务器发送查询时不知道如何处理本地列表*IndexOf方法。*但是在*AsEnumerable()* *OrderBy*方法处理本地数据之后。所以你可以这样做：

```
var entities = db.MyEntities
    .Where(e => myListOfIds.Contains(e.ID))
    .AsEnumerable()
    .OrderBy(e => myListOfIds.IndexOf(e.ID)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:12:37.053

实体框架包含所有 LINQ 命令的子集，因此您不会拥有 LINQ to Objects 拥有的所有命令。

以下方法应该以与 myListOfIds 提供的相同顺序为您提供 MyEntities 列表：

```
var entities = myListOfIds.Join(db.MyEntities, m => m, e => e.ID, (m,e) => e)
               .ToList(); 
```

# macos - 使用 Delphi Firemonkey 应用程序让 firebird 在 OSX 下工作

> ID：15799498
> 
> 赞同：2
> 
> 时间：2013-04-03T22:38:57.017
> 
> 标签：macos, delphi, firebird, firemonkey

有谁知道让 Firebird 在 OSX 下为 Delphi 应用程序工作的指南？

我正在使用 InterBase Express 组件，但是当我启动我的应用程序时，我收到错误消息说 libgds.dylib 丢失。我已将 libfbclient.dylib 重命名为 libgds.dylib。我什至在原始路径中制作了一个副本，并做了一个到 /usr/local/lib 文件夹的符号链接（就像 libfbclient.dylib 的情况一样）。这是我尝试过的...

1.  我已将“/usr/local/lib”添加到目标配置文件中的路径。
2.  我尝试将文件复制到包中
3.  我已将文件复制到我的 Windows 机器，然后使用项目部署选项分发它。

似乎没有任何效果。在这一点上，我不想创建一个可再分发的包。我只想让应用程序进行调试。

还有一点信息。我安装了标准的 Firebird 包而不是 Lipo 包。我承认我并没有真正理解其中的区别。我现在将尝试安装 Lipo 包，看看是否有什么不同。

在此先感谢，马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:49:06.020

找到解决方案。问题是我安装的软件包。安装 Lipo 包后，它似乎找到了 dylib 并继续。

我还没有到那里，因为现在我在尝试在 Documents 文件夹中创建数据库时遇到 Permission Denied 错误。我想如果我无法深入了解这个问题，我会发布另一个问题。

# javascript - 为什么 javascript getMonth 从 0 开始计数，而 getDate 从 1 开始计数？

> ID：15799514
> 
> 赞同：79
> 
> 时间：2013-04-03T22:40:44.433
> 
> 标签：javascript, date

这个问题纯粹是为了满足我的好奇心。

在 JavaScript Date 对象中，当您调用`getMonth()`它时会返回月份，但它从 0 开始计数。

```
0 = January
1 = February 
... 
```

但是当你打电话时，`getDate()`它从 1 开始计数

```
1 = 1
2 = 2
... 
```

为什么不一致？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-03T22:45:38.033

我认为这是因为在名称数组中引用它会更容易，即

```
var months = ["January", "February", "March", "April", "May", "June", "July",
         "August", "September", "October", "November", "December"];

var d = new Date();

var namedMonth = months[d.getMonth()]; 
```

如果`getMonth()`返回`1-12`，那么程序员`d.getMonth()-1`每次想要一个花哨的命名月份时都必须这样做。

一个月中的日子本身没有特定的“名称”。`getDate()`回报`1-(28-31)`。_ 我们通常只用他们的号码来称呼他们。

同样的概念也`getMonth()`适用于`getDay()`，它`0-6`根据星期几返回

```
var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

var namedDay = days[d.getDay()]; 
```

所有这些都返回如下内容：

```
console.log("Month: month[" + d.getMonth() + "]: " + namedMonth); 
//Month: month[3]:  April
console.log("Day: days[" + d.getDay() + "]: " + namedDay); 
// Day: days[4] : Thursday 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-07-20T09:51:31.827

有点晚了，但正确的答案在这里：

[https://stackoverflow.com/a/41992352/134120](https://stackoverflow.com/a/41992352/134120)

他们（JavaScript 的创建者）从 Java 中的相应类中复制了功能（这又似乎是从 C 中复制的）。所以我们在传播过去的错误‍♂️</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T23:04:46.547

如果你想说它不一致 - 你需要询问语言规范的创建者。根据这个[页面](https://developer.mozilla.org/en-US/docs/JavaScript/Language_Resources) `JavaScript`是基于`ECMAScript`（编辑：见@MichaelGeary评论）。

当您从[此处](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)的第 165 页阅读时，您会发现一切都完全按照设计的方式工作。

对你来说，这可能是不一致的。对我来说，这是一个功能 - 基于 0 的值让您`Array`无需进行计算即可直接访问（请参阅@Christopher 的答案）。如果是一个月中的某一天，您将无法真正访问任何`Array`. `Array`有一个月中的日子的名字会很奇怪......像这样：

```
var namesOfDays = [
    "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", // and again at least 4 times ...
    "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday",
    "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday",
    "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday",
    "Sunday", "Monday", "Tuesday"
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-27T03:10:59.323

[链接1](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)

> Date.prototype.getDate()
> 根据本地时间返回指定日期的月份日期 (1-31)。

[链接2](https://docs.microsoft.com/en-us/scripting/javascript/reference/date-object-javascript)

> Date 对象包含一个数字，该数字表示在毫秒内的特定时刻。例如，如果您指定 150 秒，JavaScript 会将该数字重新定义为 2 分 30 秒。

当您在 Javascript 中实现方法以查找以毫秒为单位指定的两个时间之间的差异时，您需要返回 a `date`，这是`greater than 0`出于显而易见的原因。

```
var startTime = new Date('1/1/1990');  
var startMsec = startTime.getMilliseconds();  
startTime.setTime(5000000);  
var elapsed = (startTime.getTime() - startMsec) / 1000;   
document.write(elapsed);  

// Output: 5000 
```

* * *

正如“SomeShinyObject”所解释的那样

```
var months = ["January", "February", "March", "April", "May", "June", "July",
         "August", "September", "October", "November", "December"]; 
```

有助于通过数组索引引用它们。

因此`getDay`, `getHours`,`getMonths`从 0 开始。

# sql - 这个长时间运行的选择查询是否运行最佳？

> ID：15799515
> 
> 赞同：2
> 
> 时间：2013-04-03T22:40:53.720
> 
> 标签：sql, oracle, indexing, sql-execution-plan

我有一个由我无法控制的应用程序生成的长时间运行的查询（约 10 分钟）。但是，运行查询的基础表在我的控制范围内。我在此处粘贴查询及其执行计划。我没有足够的专业知识来解释执行计划并确定可以对基础表进行哪些更改（例如添加/删除索引），以帮助更快地执行此操作。

查询本身看起来像一个直截了当的星型模式连接，其中一个大型事实表正在与多个维度表连接。有人可以建议对这些表进行任何更改，尤其是大约 5000 万行的主要事实表，以使此类查询运行得更快吗？

所涉及的表的记录数如下所列

```
/B28/EUDIQSBV   58,528,276
/B28/SUDDX6I4   7,330
/B28/SUDDHZNC   312
/B28/SUDDZMED   267
/B28/SUDDFNH0   84
/B28/SUDD8DGN   76
/B28/SUDDDY4S   75
/B28/SUDDCQ0M   46
/B28/SUDD741B   36
/B28/SUDDC4PW   23
/B28/SUDD94IW   21
/B28/DUDIQSBVD  11
/B28/SUDDXGOI   8
/B28/DUDIQSBVP  7
/B28/SUDDCD88   5
/B28/SUDD8UPI   2
/BI0/0600000051 0 
```

**编辑：**

根据要求，这里是 /B28/EUDIQSBV 表中的索引列表。

```
Index using Dimension /CPMB/UDIQSBV1
Index using Dimension /CPMB/UDIQSBV2
Index using Dimension /CPMB/UDIQSBV3
Index using Dimension /CPMB/UDIQSBV4
Index using Dimension /CPMB/UDIQSBV5
Index using Dimension /CPMB/UDIQSBV6
Index using Dimension /CPMB/UDIQSBV7
Index using Dimension /CPMB/UDIQSBV8
Index using Dimension /CPMB/UDIQSBV9
Index using Dimension /CPMB/UDIQSBVA
Index using Dimension /CPMB/UDIQSBVB
Index using Dimension /CPMB/UDIQSBVC
Index using Dimension /CPMB/UDIQSBVD
Non-Unique Index (Key Fields) for Table /B28/EUDIQSBV 
```

而表定义本身如下： ![表定义](https://i.stack.imgur.com/W55Jp.png)

**查询：**

```
SELECT
  "S1080"."/B28/S_UDDZMED" AS "/CPMB/UDDZMED" ,
  "S1081"."/B28/S_UDD8DGN" AS "/CPMB/UDD8DGN" ,
  "S1082"."/B28/S_UDDFNH0" AS "/CPMB/UDDFNH0" ,
  "S1083"."/B28/S_UDDX6I4" AS "/CPMB/UDDX6I4" ,
  "S1084"."/B28/S_UDDXGOI" AS "/CPMB/UDDXGOI" ,
  "S1085"."/B28/S_UDD741B" AS "/CPMB/UDD741B" ,
  "S1086"."/B28/S_UDDC4PW" AS "/CPMB/UDDC4PW" ,
  "S1087"."/B28/S_UDD8UPI" AS "/CPMB/UDD8UPI" ,
  "S1088"."/B28/S_UDD94IW" AS "/CPMB/UDD94IW" ,
  "S1089"."/B28/S_UDDCD88" AS "/CPMB/UDDCD88" ,
  "S1090"."/B28/S_UDDDY4S" AS "/CPMB/UDDDY4S" ,
  "S1091"."/B28/S_UDDCQ0M" AS "/CPMB/UDDCQ0M" ,
  "S1092"."/B28/S_UDDHZNC" AS"/CPMB/UDDHZNC" , 
  SUM ("F"."/B28/S_SDATA") AS "/CPMB/SDATA"
FROM "/B28/EUDIQSBV" "F"
JOIN "/B28/DUDIQSBVP" "DP" ON "F"."KEY_UDIQSBVP" = "DP"."DIMID"
JOIN "/BI0/0600000051" "Z10" ON "F"."KEY_UDIQSBV4" = "Z10"."SID"
JOIN "/B28/SUDDZMED" "S1080" ON "F"."KEY_UDIQSBV1" = "S1080"."SID"
JOIN "/B28/SUDD8DGN" "S1081" ON "F"."KEY_UDIQSBV2" = "S1081"."SID"
JOIN "/B28/SUDDFNH0" "S1082" ON "F"."KEY_UDIQSBV3" = "S1082"."SID"
JOIN "/B28/SUDDX6I4" "S1083" ON "F"."KEY_UDIQSBV4" = "S1083"."SID"
JOIN "/B28/SUDDXGOI" "S1084" ON "F"."KEY_UDIQSBV5" = "S1084"."SID"
JOIN "/B28/SUDD741B" "S1085" ON "F"."KEY_UDIQSBV6" = "S1085"."SID"
JOIN "/B28/SUDDC4PW" "S1086" ON "F"."KEY_UDIQSBV7" = "S1086"."SID"
JOIN "/B28/SUDD8UPI" "S1087" ON "F"."KEY_UDIQSBV8" = "S1087"."SID"
JOIN "/B28/SUDD94IW" "S1088" ON "F"."KEY_UDIQSBV9" = "S1088"."SID"
JOIN "/B28/SUDDCD88" "S1089" ON "F"."KEY_UDIQSBVA" = "S1089"."SID"
JOIN "/B28/SUDDDY4S" "S1090" ON "F"."KEY_UDIQSBVB" = "S1090"."SID"
JOIN "/B28/SUDDCQ0M" "S1091" ON "F"."KEY_UDIQSBVC" = "S1091"."SID"
JOIN "/B28/DUDIQSBVD" "DD" ON "F"."KEY_UDIQSBVD" = "DD"."DIMID"
JOIN "/B28/SUDDHZNC" "S1092" ON "DD"."/B28/S_UDDHZNC" = "S1092"."SID"
WHERE (((("F"."KEY_UDIQSBV6" = 28))
        AND (("F"."KEY_UDIQSBV2" = 40))
        AND (("F"."KEY_UDIQSBV8" = 2))
        AND (("F"."KEY_UDIQSBV9" IN (2 , 3 , 5 , 7, 8 , 10 , 11 , 
            13 , 14 , 15 , 16 , 18 , 19 , 20 , 21)))
        AND (("F"."KEY_UDIQSBV7" IN (2 ,3 ,4 ,5,6 ,7 ,8 ,9 ,10 ,11, 
            12 ,13 ,15 ,17 , 18 , 19 , 20)))
        AND (("F"."KEY_UDIQSBVA" = 153))
        AND (("F"."KEY_UDIQSBVC" IN (7 ,9 , 17 , 18 ,19 ,20,26 ,
            27 ,28 , 29 ,30 , 31 , 33 ,35 ,37 ,39 ,40 ,41 ,43 ,44 ,46)))
        AND (("F"."KEY_UDIQSBVB" IN (15 , 17 ,18 ,19 ,22 ,23 ,24 ,
            25 ,26 ,28 ,30 ,31 ,32 ,33 ,34 ,35 ,36 ,37 ,38 ,39 ,40 ,
            42 ,43 ,44 ,45 ,46 ,47 ,48 ,51 ,54 ,55 ,59 ,60 ,63 ,64 ,
            65 ,66 ,67 ,68 ,69 ,70 ,72 ,73 ,74 ,75)))
        AND (("F"."KEY_UDIQSBV3" IN (3 ,5 ,13 ,16 ,21 ,25 ,26 ,31 ,
            32 ,33,39 ,40 ,41 ,42 ,43 ,44 ,48 ,53 ,54 ,55 ,56 ,57 ,
            59 ,60 ,63 ,67 ,72 ,73 ,76 ,79)))
        AND (("DD"."/B28/S_UDDHZNC" = 360))
        AND (("F"."KEY_UDIQSBV5" IN (2 ,3 ,4 ,7 ,8)))
        AND (("F"."KEY_UDIQSBV1" IN (59 ,190)))
        AND (("DP"."SID_0CHNGID" = 0))
        AND (("DP"."SID_0RECORDTP" = 0))
        AND (("DP"."SID_0REQUID" <= 122208))))
  AND "Z10"."SID" <> 2000008999
GROUP BY
  "S1080"."/B28/S_UDDZMED", 
  "S1081"."/B28/S_UDD8DGN",
  "S1082"."/B28/S_UDDFNH0",
  "S1083"."/B28/S_UDDX6I4",
  "S1084"."/B28/S_UDDXGOI",
  "S1085"."/B28/S_UDD741B",
  "S1086"."/B28/S_UDDC4PW",
  "S1087"."/B28/S_UDD8UPI",
  "S1088"."/B28/S_UDD94IW",
  "S1089"."/B28/S_UDDCD88",
  "S1090"."/B28/S_UDDDY4S",
  "S1091"."/B28/S_UDDCQ0M",
  "S1092"."/B28/S_UDDHZNC" 
```

**这是解释计划：**

```
 SELECT STATEMENT ( Estimated Costs = 117,703 , Estimated #Rows = 2,613,944 )
  |
  ---   91 TEMP TABLE TRANSFORMATION
      |
      |--   6 LOAD AS SELECT SYS_TEMP_0FD9D6DF0_8B5A52DE
      |   |
      |   ---   5 NESTED LOOPS
      |       |   ( Estim. Costs = 2 , Estim. #Rows = 1 )
      |       |   Estim. CPU-Costs = 23,804 Estim. IO-Costs = 2
      |       |
      |       |--   2 TABLE ACCESS BY INDEX ROWID /B28/SUDDHZNC
      |       |   |   ( Estim. Costs = 1 , Estim. #Rows = 1 )
      |       |   |   Estim. CPU-Costs = 15,463 Estim. IO-Costs = 1
      |       |   |
      |       |   ------1 INDEX UNIQUE SCAN /B28/SUDDHZNC~001
      |       |           ( Estim. Costs = 1 , Estim. #Rows = 1 )
      |       |           Search Columns: 1
      |       |           Estim. CPU-Costs = 8,171 Estim. IO-Costs = 1
      |       |           Access Predicates
      |       |
      |       ---   4 TABLE ACCESS BY INDEX ROWID /B28/DUDIQSBVD
      |           |   ( Estim. Costs = 1 , Estim. #Rows = 1 )
      |           |   Estim. CPU-Costs = 8,341 Estim. IO-Costs = 1
      |           |
      |           ------3 INDEX RANGE SCAN /B28/DUDIQSBVD~010
      |                   Search Columns: 1
      |                   Estim. CPU-Costs = 1,050 Estim. IO-Costs = 0
      |                   Access Predicates
      |
      ---   90 HASH GROUP BY
          |    ( Estim. Costs = 117,701 , Estim. #Rows = 2,613,944 )
          |    Estim. CPU-Costs = 9,692,785,028 Estim. IO-Costs = 117,393
          |
          ---   89 HASH JOIN
              |    ( Estim. Costs = 1,018 , Estim. #Rows = 2,613,944 )
              |    Estim. CPU-Costs = 4,919,768,467 Estim. IO-Costs = 862
              |    Access Predicates
              |
              |--   11 VIEW index$_join$_026
              |   |    ( Estim. Costs = 2 , Estim. #Rows = 71 )
              |   |    Estim. CPU-Costs = 15,820,708 Estim. IO-Costs = 1
              |   |    Filter Predicates
              |   |
              |   ---   10 HASH JOIN
              |       |    Access Predicates
              |       |
              |       |--   8 INLIST ITERATOR
              |       |   |
              |       |   ------7 INDEX UNIQUE SCAN /B28/SUDDDY4S~001
              |       |           Search Columns: 1
              |       |           Estim. CPU-Costs = 478,575 Estim. IO-Costs = 0
              |       |           Access Predicates
              |       |
              |       ------9 INDEX FAST FULL SCAN /B28/SUDDDY4S~0
              |               ( Estim. Costs = 1 , Estim. #Rows = 71 )
              |               Estim. CPU-Costs = 26,652 Estim. IO-Costs = 1
              |
              ---   88 HASH JOIN
                  |    ( Estim. Costs = 1,008 , Estim. #Rows = 2,613,944 )
                  |    Estim. CPU-Costs = 4,626,808,323 Estim. IO-Costs = 861
                  |    Access Predicates
                  |
                  |--   16 VIEW index$_join$_006
                  |   |    ( Estim. Costs = 2 , Estim. #Rows = 257 )
                  |   |    Estim. CPU-Costs = 15,859,258 Estim. IO-Costs = 1
                  |   |    Filter Predicates
                  |   |
                  |   ---   15 HASH JOIN
                  |       |    Access Predicates
                  |       |
                  |       |--   13 INLIST ITERATOR
                  |       |   |
                  |       |   ------12 INDEX UNIQUE SCAN /B28/SUDDZMED~001
                  |       |            Search Columns: 1
                  |       |            Estim. CPU-Costs = 71,490 Estim. IO-Costs = 0
                  |       |            Access Predicates
                  |       |
                  |       ------14 INDEX FAST FULL SCAN /B28/SUDDZMED~0
                  |                ( Estim. Costs = 1 , Estim. #Rows = 257 )
                  |                Estim. CPU-Costs = 73,152 Estim. IO-Costs = 1
                  |
                  ---   87 HASH JOIN
                      |    ( Estim. Costs = 998 , Estim. #Rows = 2,613,944 )
                      |    Estim. CPU-Costs = 4,333,781,729 Estim. IO-Costs = 860
                      |    Access Predicates
                      |
                      |-----17 TABLE ACCESS FULL /B28/SUDDX6I4
                      |        ( Estim. Costs = 7 , Estim. #Rows = 7,126 )
                      |        Estim. CPU-Costs = 1,460,670 Estim. IO-Costs = 7
                      |        Filter Predicates
                      ---   86 HASH JOIN
                          |    ( Estim. Costs = 982 , Estim. #Rows = 2,613,944 )
                          |    Estim. CPU-Costs = 4,054,123,372 Estim. IO-Costs = 853
                          |    Access Predicates
                          |
                          |--   22 VIEW index$_join$_010
                          |   |    ( Estim. Costs = 2 , Estim. #Rows = 82 )
                          |   |    Estim. CPU-Costs = 15,809,908 Estim. IO-Costs = 1
                          |   |    Filter Predicates
                          |   |
                          |   ---   21 HASH JOIN
                          |       |    Access Predicates
                          |       |
                          |       |--   19 INLIST ITERATOR
                          |       |   |
                          |       |   ------18 INDEX UNIQUE SCAN /B28/SUDDFNH0~001
                          |       |            Search Columns: 1
                          |       |            Estim. CPU-Costs = 363,600 Estim. IO-Costs = 0
                          |       |            Access Predicates
                          |       |
                          |       ------20 INDEX FAST FULL SCAN /B28/SUDDFNH0~0
                          |                ( Estim. Costs = 1 , Estim. #Rows = 82 )
                          |                Estim. CPU-Costs = 29,402 Estim. IO-Costs = 1
                          |
                          ---   85 HASH JOIN
                              |    ( Estim. Costs = 972 , Estim. #Rows = 2,613,944 )
                              |    Estim. CPU-Costs = 3,761,172,378 Estim. IO-Costs = 852
                              |    Access Predicates
                              |
                              |-----23 TABLE ACCESS FULL /BI0/0600000051
                              |        ( Estim. Costs = 2 , Estim. #Rows = 3,013 )
                              |        Estim. CPU-Costs = 638,207 Estim. IO-Costs = 2
                              |        Filter Predicates
                              ---   84 HASH JOIN
                                  |    ( Estim. Costs = 961 , Estim. #Rows = 2,614,378 )
                                  |    Estim. CPU-Costs = 3,482,910,035 Estim. IO-Costs = 850
                                  |    Access Predicates
                                  |
                                  |--   28 VIEW index$_join$_028
                                  |   |    ( Estim. Costs = 2 , Estim. #Rows = 46 )
                                  |   |    Estim. CPU-Costs = 15,784,258 Estim. IO-Costs = 1
                                  |   |    Filter Predicates
                                  |   |
                                  |   ---   27 HASH JOIN
                                  |       |    Access Predicates
                                  |       |
                                  |       |--   25 INLIST ITERATOR
                                  |       |   |
                                  |       |   ------24 INDEX UNIQUE SCAN /B28/SUDDCQ0M~001
                                  |       |            Search Columns: 1
                                  |       |            Estim. CPU-Costs = 152,460 Estim. IO-Costs = 0
                                  |       |            Access Predicates
                                  |       |
                                  |       ------26 INDEX FAST FULL SCAN /B28/SUDDCQ0M~0
                                  |                ( Estim. Costs = 1 , Estim. #Rows = 46 )
                                  |                Estim. CPU-Costs = 20,402 Estim. IO-Costs = 1
                                  |
                                  ---   83 HASH JOIN
 |    ( Estim. Costs = 950 , Estim. #Rows = 2,614,378 )
 |    Estim. CPU-Costs = 3,189,946,691 Estim. IO-Costs = 849
 |    Access Predicates
 |
 |--   33 VIEW index$_join$_018
 |   |    ( Estim. Costs = 2 , Estim. #Rows = 21 )
 |   |    Estim. CPU-Costs = 15,768,808 Estim. IO-Costs = 1
 |   |    Filter Predicates
 |   |
 |   ---   32 HASH JOIN
 |       |    Access Predicates
 |       |
 |       |--   30 INLIST ITERATOR
 |       |   |
 |       |   ------29 INDEX UNIQUE SCAN /B28/SUDDC4PW~001
 |       |            Search Columns: 1
 |       |            Estim. CPU-Costs = 66,045 Estim. IO-Costs = 0
 |       |            Access Predicates
 |       |
 |       ------31 INDEX FAST FULL SCAN /B28/SUDDC4PW~0
 |                ( Estim. Costs = 1 , Estim. #Rows = 21 )
 |                Estim. CPU-Costs = 14,152 Estim. IO-Costs = 1
 |
 ---   82 HASH JOIN
     |    ( Estim. Costs = 940 , Estim. #Rows = 2,614,378 )
     |    Estim. CPU-Costs = 2,897,002,547 Estim. IO-Costs = 848
     |    Access Predicates
     |
     |--   38 VIEW index$_join$_022
     |   |    ( Estim. Costs = 2 , Estim. #Rows = 20 )
     |   |    Estim. CPU-Costs = 15,766,258 Estim. IO-Costs = 1
     |   |    Filter Predicates
     |   |
     |   ---   37 HASH JOIN
     |       |    Access Predicates
     |       |
     |       |--   35 INLIST ITERATOR
     |       |   |
     |       |   ------34 INDEX UNIQUE SCAN /B28/SUDD94IW~001
     |       |            Search Columns: 1
     |       |            Estim. CPU-Costs = 56,250 Estim. IO-Costs = 0
     |       |            Access Predicates
     |       |
     |       ------36 INDEX FAST FULL SCAN /B28/SUDD94IW~0
     |                ( Estim. Costs = 1 , Estim. #Rows = 20 )
     |                Estim. CPU-Costs = 13,902 Estim. IO-Costs = 1
     |
     ---   81 HASH JOIN
         |    ( Estim. Costs = 930 , Estim. #Rows = 2,614,378 )
         |    Estim. CPU-Costs = 2,604,061,103 Estim. IO-Costs = 847
         |    Access Predicates
         |
         |--   43 VIEW index$_join$_014
         |   |    ( Estim. Costs = 2 , Estim. #Rows = 8 )
         |   |    Estim. CPU-Costs = 15,750,358 Estim. IO-Costs = 1
         |   |    Filter Predicates
         |   |
         |   ---   42 HASH JOIN
         |       |    Access Predicates
         |       |
         |       |--   40 INLIST ITERATOR
         |       |   |
         |       |   ------39 INDEX UNIQUE SCAN /B28/SUDDXGOI~001
         |       |            Search Columns: 1
         |       |            Estim. CPU-Costs = 10,650 Estim. IO-Costs = 0
         |       |            Access Predicates
         |       |
         |       ------41 INDEX FAST FULL SCAN /B28/SUDDXGOI~0
         |                ( Estim. Costs = 1 , Estim. #Rows = 8 )
         |                Estim. CPU-Costs = 10,902 Estim. IO-Costs = 1
         |
         ---   80 HASH JOIN
             |    ( Estim. Costs = 919 , Estim. #Rows = 2,614,378 )
             |    Estim. CPU-Costs = 2,311,137,359 Estim. IO-Costs = 846
             |    Access Predicates
             |
             |-----44 TABLE ACCESS FULL SYS_TEMP_0FD9D6DF0_8B5A52DE
             |        ( Estim. Costs = 2 , Estim. #Rows = 1 )
             |        Estim. CPU-Costs = 7,291 Estim. IO-Costs = 2
             ---   79 HASH JOIN
                 |    ( Estim. Costs = 909 , Estim. #Rows = 2,614,378 )
                 |    Estim. CPU-Costs = 2,033,957,731 Estim. IO-Costs = 844
                 |    Access Predicates
                 |
                 |--   57 NESTED LOOPS
                 |   |    ( Estim. Costs = 6 , Estim. #Rows = 5 )
                 |   |    Estim. CPU-Costs = 71,420 Estim. IO-Costs = 6
                 |   |
                 |   |--   55 NESTED LOOPS
                 |   |   |    ( Estim. Costs = 4 , Estim. #Rows = 1 )
                 |   |   |    Estim. CPU-Costs = 33,366 Estim. IO-Costs = 4
                 |   |   |
                 |   |   |--   52 NESTED LOOPS
                 |   |   |   |    ( Estim. Costs = 3 , Estim. #Rows = 1 )
                 |   |   |   |    Estim. CPU-Costs = 25,024 Estim. IO-Costs = 3
                 |   |   |   |
                 |   |   |   |--   49 NESTED LOOPS
                 |   |   |   |   |    ( Estim. Costs = 2 , Estim. #Rows = 1 )
                 |   |   |   |   |    Estim. CPU-Costs = 16,683 Estim. IO-Costs = 2
                 |   |   |   |   |
                 |   |   |   |   |--   46 TABLE ACCESS BY INDEX ROWID /B28/SUDDCD88
                 |   |   |   |   |   |    ( Estim. Costs = 1 , Estim. #Rows = 1 )
                 |   |   |   |   |   |    Estim. CPU-Costs = 8,341 Estim. IO-Costs = 1
                 |   |   |   |   |   |
                 |   |   |   |   |   ------45 INDEX UNIQUE SCAN /B28/SUDDCD88~001
                 |   |   |   |   |            Search Columns: 1
                 |   |   |   |   |            Estim. CPU-Costs = 1,050 Estim. IO-Costs = 0
                 |   |   |   |   |            Access Predicates
                 |   |   |   |   |
                 |   |   |   |   ---   48 TABLE ACCESS BY INDEX ROWID /B28/SUDD8UPI
                 |   |   |   |       |    ( Estim. Costs = 1 , Estim. #Rows = 1 )
                 |   |   |   |       |    Estim. CPU-Costs = 8,341 Estim. IO-Costs = 1
                 |   |   |   |       |
                 |   |   |   |       ------47 INDEX UNIQUE SCAN /B28/SUDD8UPI~001
                 |   |   |   |                Search Columns: 1
                 |   |   |   |                Estim. CPU-Costs = 1,050 Estim. IO-Costs = 0
                 |   |   |   |                Access Predicates
                 |   |   |   |
                 |   |   |   ---   51 TABLE ACCESS BY INDEX ROWID /B28/SUDD741B
                 |   |   |       |    ( Estim. Costs = 1 , Estim. #Rows = 1 )
                 |   |   |       |    Estim. CPU-Costs = 8,341 Estim. IO-Costs = 1
                 |   |   |       |
                 |   |   |       ------50 INDEX UNIQUE SCAN /B28/SUDD741B~001
                 |   |   |                Search Columns: 1
                 |   |   |                Estim. CPU-Costs = 1,050 Estim. IO-Costs = 0
                 |   |   |                Access Predicates
                 |   |   |
                 |   |   ---   54 TABLE ACCESS BY INDEX ROWID /B28/SUDD8DGN
                 |   |       |    ( Estim. Costs = 1 , Estim. #Rows = 1 )
                 |   |       |    Estim. CPU-Costs = 8,341 Estim. IO-Costs = 1
                 |   |       |
                 |   |       ------53 INDEX UNIQUE SCAN /B28/SUDD8DGN~001
                 |   |                Search Columns: 1
                 |   |                Estim. CPU-Costs = 1,050 Estim. IO-Costs = 0
                 |   |                Access Predicates
                 |   |
                 |   ------56 TABLE ACCESS FULL /B28/DUDIQSBVP
                 |            ( Estim. Costs = 2 , Estim. #Rows = 5 )
                 |            Estim. CPU-Costs = 38,054 Estim. IO-Costs = 2
                 |            Filter Predicates
                 |
                 ---   78 TABLE ACCESS BY INDEX ROWID /B28/EUDIQSBV
                     |    ( Estim. Costs = 893 , Estim. #Rows = 3,032,059 )
                     |    Estim. CPU-Costs = 1,714,945,175 Estim. IO-Costs = 838
                     |    Filter Predicates
                     |
                     ---   77 BITMAP CONVERSION TO ROWIDS
                         |
                         ---   76 BITMAP AND
                             |
                             |--   60 BITMAP OR
                             |   |
                             |   |-----58 BITMAP INDEX SINGLE VALUE /B28/EUDIQSBV~040
                             |   |        Search Columns: 1
                             |   |        Access Predicates
                             |   ------59 BITMAP INDEX SINGLE VALUE /B28/EUDIQSBV~040
                             |            Search Columns: 1
                             |            Access Predicates
                             |
                             |--   64 BITMAP MERGE
                             |   |
                             |   ---   63 BITMAP KEY ITERATION
                             |       |
                             |       |-----61 TABLE ACCESS FULL SYS_TEMP_0FD9D6DF0_8B5A52DE
                             |       |        ( Estim. Costs = 2 , Estim. #Rows = 1 )
                             |       |        Estim. CPU-Costs = 7,271 Estim. IO-Costs = 2
                             |       ------62 BITMAP INDEX RANGE SCAN /B28/EUDIQSBV~160
                             |                Search Columns: 1
                             |                Access Predicates
                             |
                             |-----65 BITMAP INDEX SINGLE VALUE /B28/EUDIQSBV~050
                             |        Search Columns: 1
                             |        Access Predicates
                             |--   71 BITMAP OR
                             |   |
                             |   |-----66 BITMAP INDEX SINGLE VALUE /B28/EUDIQSBV~080
                             |   |        Search Columns: 1
                             |   |        Access Predicates
                             |   |-----67 BITMAP INDEX SINGLE VALUE /B28/EUDIQSBV~080
                             |   |        Search Columns: 1
                             |   |        Access Predicates
                             |   |-----68 BITMAP INDEX SINGLE VALUE /B28/EUDIQSBV~080
                             |   |        Search Columns: 1
                             |   |        Access Predicates
                             |   |-----69 BITMAP INDEX SINGLE VALUE /B28/EUDIQSBV~080
                             |   |        Search Columns: 1
                             |   |        Access Predicates
                             |   ------70 BITMAP INDEX SINGLE VALUE /B28/EUDIQSBV~080
                             |            Search Columns: 1
                             |            Access Predicates
                             |
                             ---   75 BITMAP MERGE
                                 |
                                 ---   74 BITMAP KEY ITERATION
|
|-----72 TABLE ACCESS FULL /BI0/0600000051
|        ( Estim. Costs = 2 , Estim. #Rows = 3,013 )
|        Estim. CPU-Costs = 638,207 Estim. IO-Costs = 2
|        Filter Predicates
------73 BITMAP INDEX RANGE SCAN /B28/EUDIQSBV~070
         Search Columns: 1
         Access Predicates Filter Predicates 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:08:10.320

看起来其中一位 DBA 想出了一些绝对可以帮助查询运行得更快的东西。他在主事实表上引入了复合位最大索引。索引定义如下：

```
CREATE BITMAP INDEX "SAPSR3"."/B28/EUDIQSBV~TEST" 
ON "SAPSR3"."/B28/EUDIQSBV" 
("KEY_UDIQSBV6",
 "KEY_UDIQSBV2",
 "KEY_UDIQSBV8",
 "KEY_UDIQSBV9",
 "KEY_UDIQSBV7",
 "KEY_UDIQSBVA",
 "KEY_UDIQSBVC",
 "KEY_UDIQSBVB",
 "KEY_UDIQSBV3") 
TABLESPACE "PSAPSR3"; 
```

这将查询时间从 7 分钟以上加快到了 1.5 分钟。

# ios - iOS 中视频文件和视频“描述”文件的存储文件夹 - Apple 指南

> ID：15799518
> 
> 赞同：0
> 
> 时间：2013-04-03T22:41:21.960
> 
> 标签：ios, file-storage

目前我正在开发一个应用程序，它将从“计算机设备”下载一些视频。这些视频将在应用程序中播放 -> 以便正确同步。需要另一个文件（每个视频都有其对应的文件）。我已经对我应该在哪里存储它进行了一些研究......但是没有确定的答案（至少在这一点上对我来说）。

[阅读本指南](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

我假设“/cache”文件夹是合适的？在这种情况下我应该使用哪个文件夹？我希望视频可以在“离线”情况下播放。这些视频可能会“加重”一点，因此我不希望为它们进行任何 iCloud 同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:41:26.293

虽然缓存目录中的项目不会备份到 iCloud，但如果面临回收磁盘空间的压力，它们可能会被系统清除。如果它是“用户生成的”数据，您可能会将其存储在用户文档目录中。

应用程序支持目录（库/应用程序支持）是存储应用程序需要离线下载的内容的合适位置。

```
NSArray *appSupportURLs = [[NSFileManager defaultManager] URLsForDirectory:NSApplicationSupportDirectory inDomains:NSUserDomainMask];
NSURL *applicationSupportDirectory = appSupportURLs[0]; 
```

如果您不希望备份位于其他位置的文件（应用程序支持、文档等），您还应该设置它们的属性。您可以在这里找到更多信息：http: [//developer.apple.com/library/ios/#qa/qa1719/_index.html](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:41:54.613

使用 NSCachesDirectory。它不会在 iTunes 或 iCloud 中备份。

```
NSArray *cachedirs = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cachedir = cachedirs[0]; 
```

# c++ - 如何在vim中默认折叠（折叠）Doxygen评论？

> ID：15799519
> 
> 赞同：4
> 
> 时间：2013-04-03T22:41:37.473
> 
> 标签：c++, vim

我们正在考虑将 Doxygen 文档添加到 C++ 头文件中，但有些人不希望默认看到冗长的 Doxygen 文档。

.vimrc 中是否有默认折叠（折叠）Doxygen 注释的方法？

注意：我尝试过`autocmd FileType c,cpp set foldmethod=syntax`将折叠所有匹配的语法，但我无法弄清楚如何避免折叠函数、类等，即只折叠 Doxygen 文档格式。

如果 vim 的 C-fold 插件，另一种看起来可能是一个不错的解决方案。这是使其正常工作的详细安装顺序：

1.  添加 Doxygen 语法高亮

(a) 从[http://vim.sourceforge.net/scripts/script.php?script_id=5](http://vim.sourceforge.net/scripts/script.php?script_id=5)安装它，它将创建`~/.vim/syntax/doxygen.vim`.

(b)`~/.vim\ftdetect\doxygen.vim`用这一行添加：

```
au BufNewFile,BufRead *.doxygen setfiletype doxygen 
```

(c)`~/.vim/syntax/doxygen_load.vim`加上这两行：

```
au! Syntax {cpp,c,idl}
au Syntax {cpp,c,idl} runtime syntax/doxygen.vim 
```

1.  在末尾添加`~/.vimrc`：

    let mysyntaxfile='/home/dchinner/.vim/syntax/doxygen_load.vim' autocmd FileType c,cpp set foldmethod=syntax autocmd FileType c,cpp set foldlevel=10

请注意， foldlevel 确定最初将折叠多少。高值将确保大多数是开放的。

1.  将 C 折叠添加到（取消）折叠代码或注释

(a) 从[http://vim.sourceforge.net/scripts/script.php?script_id=1145](http://vim.sourceforge.net/scripts/script.php?script_id=1145)安装它，它将安装`~/.vim/plugins/cfold.vim`和`~/.vim/after/syntax/c.vim`.

(b) 在末尾添加`~/.vim/syntax/doxygen.vim`：

```
syn region doxygenComment start= ... keepend fold 
```

完毕！您现在可以使用这些 C-fold 插件组合键：

*   `z[`打开所有 doxygen 风格的评论
*   `z]`关闭所有 doxygen 风格的评论
*   `z{`打开所有代码块
*   `z}`关闭所有代码块

vim 一个带有 Doxygen 注释的文件，然后点击`z]`折叠 Doxygen 注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:54:32.057

两者都`syntax/c.vim`使用`syntax/doxygen.vim`语法折叠。由于 中的折叠定义周围没有条件`c.vim`，因此您不能只关闭一个部分。

您必须将默认设置`$VIMRUNTIME/syntax/c.vim`为`~/.vim/syntax/c.vim`，并从语法命令中删除所有`fold`属性。这应该只留下折叠的 doxygen 部分（使用`:set foldmethod=syntax`）。缺点是您必须`c.vim`从现在开始维护您的特殊版本。

# android - Facebook SDK 3.0：在会话期间状态 CLOSED_LOGIN_FAILED 之后无法调用 openForPublish

> ID：15799524
> 
> 赞同：1
> 
> 时间：2013-04-03T22:42:04.567
> 
> 标签：android, facebook, session, login

我在调用 openForPublish 打开带有发布流请求的会话并收到 CLOSED_LOGIN_FAILED 状态时遇到问题。当我尝试在登录对话框中取消时收到此会话状态。当我在 CLOSED_LOGIN_FAILED 状态下再次尝试调用 openForPublish 时，我收到一个异常消息“会话：尝试打开已打开的会话。”。当我检查 session.isOpened 我有 FALSE 并且 isClosed 是 TRUE。

这是我的代码：

```
 Session session = Session.getActiveSession();

    if (session == null) { 
        Log.w("Facebook Session", "TopicShow object is null");
        if (savedInstanceState != null) {
            Log.w("Facebook Session", "TopicShow Restoring Session");
            session = Session.restoreSession(activity, null, fbSessionStateCallback, savedInstanceState);
        }
        if (session == null) {
            session = new Session(activity.getApplicationContext());
        } 
    }

    Session.setActiveSession(session);

    Log.w("Facebook", "Session inital state when clicked " + session.getState().name());
    Log.w("SessionState", "isOpen = " + !session.isOpened() + " isClosed = " + !session.isClosed());
    if (!session.isOpened()) {
        Log.w("Facebook", "openForRead " + session.getState().name());
        /* Prevent it from getting error if no internet. */

            OpenRequest request = new Session.OpenRequest(activity);

            request.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO);
            request.setPermissions(Arrays.asList("publish_stream"));  
            request.setCallback(fbPublishRequestStateCallback);

            isBlock = false;

            session.openForPublish(request);     
    } 

    else if (session.isOpened()) {
        Request request = Request.newMeRequest(session, graphUserCallback);
        request.executeAndWait();
        isBlock = true; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:58:07.097

这是设计使然。您无法重新打开已关闭的会话。相反，只需创建一个新的 Session() 或调用其中一个 activeSession 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T11:24:07.097

SDK 中有一个 Facebook 示例项目建议如何处理此问题。请参阅我的答案：[Android Facebook 会话问题](https://stackoverflow.com/questions/16688235/android-facebook-session-issue/17675473#17675473)

# java - 使按钮或图像居中

> ID：15799528
> 
> 赞同：1
> 
> 时间：2013-04-03T22:42:26.450
> 
> 标签：java, android, button, attributes

我正在使用 Eclipse 为 Android 创建一个应用程序。我知道您在文件中设置了诸如将按钮或图像居中之类的属性，`XML`但是您将如何在 Java 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:53:57.400

你有没有尝试过 ：

```
Button button = new Button(getApplicationContext());
button.setLayoutParams(newLayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
button.setGravity(Gravity.CENTER_HORIZONTAL|Gravity.CENTER_VERTICAL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:46:27.920

很难说不知道你有什么。但是，如果您查看文档，每个 xml`attribute`在 Java 中都有一个相关的方法。例如，[查看 View Docs](http://developer.android.com/reference/android/view/View.html)，您可以看到一个列表`attributes`及其对应的 Java 方法以及它实际作用的描述。您应该能够使用它来帮助您开始，然后您可以使用您尝试过的代码、您遇到的确切问题以及您可能收到的任何错误消息提出问题。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:49:08.423

使用代码来集中你的东西，而不是`XML`文件中的属性。

**居中一个按钮：**

使用`FlowLayout`. 这将使按钮在容器中水平居中，但不是垂直居中。

```
JButton button = new JButton("Click Me!");
panel.setLayout(new FlowLayout(FlowLayout.CENTER));
panel.add(button); 
```

如果您希望它在两个方向上居中，您可以使用`BoxLayout`.

```
JButton button = new JButton("Click Me!");
button.setAlignmentX(Component.CENTER_ALIGNMENT);
panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));
panel.add(Box.createVerticalGlue());
panel.add(button);
panel.add(Box.createVerticalGlue()); 
```

**中心图片：**

```
@Override 
public void paintComponent(Graphics g) 
{
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;
    int xCenter = (this.getWidth() - image.getWidth()) / 2;
    int yCenter = (this.getHeight() - image.getHeight()) / 2;
    g2d.drawImage(image, xCenter, yCenter, null); 
} 
```

# php - 使用 PHP 的登录表单输入字段验证

> ID：15799533
> 
> 赞同：-2
> 
> 时间：2013-04-03T22:42:52.883
> 
> 标签：php

请告诉我如何验证用户输入，仅限字母。

```
<form action="#" method="post" name="form1">
<table>
<tr>
<td id="CA_Tbl_Title">Name</td>
</tr>
<tr>
<td>
<input type="text" name="First_Name" onclick="make_blank_First();"    
autofocus="First_Name" id="Form_Input_User"
value="<?php echo $First_Name; ?>"/>
<span class="Error"><?php echo $Msg_First_Name; ?></span></p>
</td>
</tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:45:00.817

检查`ctype_alpha`方法。

```
bool ctype_alpha ( string $text ) 
```

检查提供的字符串 text 中的所有字符是否都是字母。在标准 C 语言环境中，字母只是`[A-Za-z]`并且`ctype_alpha()`等同于`(ctype_upper($text) || ctype_lower($text))`if`$text`只是单个字符，但其他语言的字母既不大写也不小写。

`TRUE`如果文本中的每个字符都是来自当前语言环境的字母，则返回，`FALSE`否则。

参考： http: [//php.net/manual/en/function.ctype-alpha.php](http://php.net/manual/en/function.ctype-alpha.php)

# javascript - 在 ScrollTop 之后立即调整高度对于 jQuery 来说非常生涩/不连贯

> ID：15799539
> 
> 赞同：0
> 
> 时间：2013-04-03T22:43:12.823
> 
> 标签：javascript, jquery, css

我正在尝试创建一个包含一堆块的页面（通常包含“溢出：隐藏”文本，可以通过单击框展开）。但是，当我单击框以调整其高度（以显示所有文本）时，我还想通过使用 ScrollTop 使该框成为焦点。如果您单击该框以扩展其高度，如果它在浏览器窗口中仍然看不见，这看起来很奇怪。

我有一个 jQuery 函数，它可以动画高度变化并很好地动画 ScrollTop 重新定位，但它对我来说通常看起来很不稳定。这是不一致的。有时它很平滑，有时它会调整框的高度，然后非常突然地滚动，这会产生非常令人不快的生涩效果。添加到奇怪的行为是，在函数完成后的几秒钟内，我无法使用鼠标手动滚动窗口。就好像它阻止了手动鼠标滚动一样。

我创建了一个小 jsfiddle（没有我通常放在右侧框中的文本）。

[jsfiddle](http://jsfiddle.net/ZC8zW/1/)

```
$(document).ready(function() {
  $(".right").click(function() {
      var currentHeight = $(this).height();
      $(this).animate({
      height: (currentHeight == 100 ? 200 : 100)
      }, 400, function() {
      var offset = $(this).offset();
      $('html, body').animate({
          scrollTop: offset.top
      }, 1000);
      });
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:51:27.093

也许我误解了你，但是你设置它的方式，高度会改变，**然后**完成后，它会移动滚动位置，甚至速度更慢。

您不想同时以速度而不是按顺序执行这些操作吗？

```
$(".right").click(function () {

    var currentHeight = $(this).height();
    $(this).animate({
        height: (currentHeight == 100 ? 200 : 100)
    }, 400);

    var offset = $(this).offset();
    $('html, body').animate({
        scrollTop: offset.top
    }, 400);

}); 
```

演示：http: [//jsfiddle.net/NpdDN/](http://jsfiddle.net/NpdDN/)

此外，这将在动画期间基本上“阻止”鼠标滚动，因为它不断设置绝对滚动位置，覆盖鼠标所做的任何事情。

# java - java扫描仪上的NotSerializableException？

> ID：15799541
> 
> 赞同：1
> 
> 时间：2013-04-03T22:43:19.563
> 
> 标签：java

我在解决 notSeriazable 时遇到了问题，我的所有班级都实现了可序列化，但它总是给我一个错误。

```
 java.io.NotSerializableException: java.util.Scanner
 at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeObject(Unknown Source)
at Assign3.main(Assign3.java:119) 
```

Scanner 是一个正确的类，我没有意义.. 我认为 Scanner 也应该被序列化？但我不能碰 Scanner 类。

```
Bank b = new Bank(100.0);
    try{
        ObjectOutputStream save = new ObjectOutputStream(new FileOutputStream("try.txt"));

        save.writeObject(b);

        save.close();

        }catch(Exception ex){ex.printStackTrace();}

import java.io.Serializable;
import java.util.Scanner;

public class Bank implements Serializable{
/**
 * 
 */
private static final long serialVersionUID = 1L;
private int Maxtransaction = 1000;
public Transaction[] transactions = new Transaction[Maxtransaction];
private int numTransactions = 0;
private double balance;
Scanner sn = new Scanner(System.in);

public Bank()
{
}

public Bank(double balance)
{
    this.balance = balance;
}

public double getBalance()
{
    return balance;
}

public void display()
{
    System.out.print("\nTRANSACTION RECORD:\n");
    for(int i = 0; i<numTransactions;i++)
        {
        System.out.print(transactions[i].toString()+"\n"); 
        }
    System.out.print("BALANCE : $"+getBalance()+"\n");

}

public boolean addTransaction(Category categories)
{
    if(numTransactions>Maxtransaction){return false;}
    else{
    String[] chooseaccountletter = {"c","d"};
    String chooseaccount;
    boolean erroraccount = true;

    System.out.print("\n");
    do{
    System.out.print("Enter a c for credit or d for debit: ");
        chooseaccount = sn.nextLine();
        for(int i = 0 ; i<chooseaccountletter.length;i++)
            {
              if(chooseaccountletter[i].equals(chooseaccount))
              {
                  erroraccount = false;
                  break;
              }
            }
      }while(erroraccount);

    if(chooseaccountletter[0].equals(chooseaccount))
    {
        Transaction credit = new CreditTransaction();
        credit.getTransactionInfo(categories);
        credit.getAmout();
        balance += credit.getAmout();
        transactions[numTransactions] = credit;
    }//end credit

    if(chooseaccountletter[1].equals(chooseaccount))
    {
        Transaction debit = new DebitTransaction();
        debit.getTransactionInfo(categories);
        debit.getAmout();
        balance += debit.getAmout();
        transactions[numTransactions] = debit;
    }//end debit
    numTransactions++;
    return true;
    }

}

public void displayCategory(String Category)
{   
    double total = 0;
    System.out.print("\nTransactions for Category "+Category+" :\n");

    for(int i = 0; i<numTransactions;i++){
        if(transactions[i].getCategory() == Category)
            {
                System.out.print(transactions[i].toString()+"\n");
                total += transactions[i].getAmout(); 
            }
        }

    System.out.print("Category Balance : $"+total+"\n");
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:49:37.783

No[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)不实现`Serializable`，所以如果你的`Bank`类包含一个`Scanner`对象，它也不会是可序列化的。您必须删除`Scanner`或将其标记为`transient`或者`static`，才能使`Bank`对象可序列化。（请注意，将扫描仪标记为静态会使它属于该类，而不是 . 的单个实例`Bank`。您最好将其设为瞬态。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:48:33.550

请显示成员`Bank`有什么。如果它的任何成员没有实现`Serializable`，那么类本身就不能被序列化，除非用瞬态明确标记为排除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:52:07.973

`Scanner`将 Bank 类中的对象标记为`transient`使其可序列化，或将`Scanner`对象移动到方法中。

# gwt - GWT Google Map Api V3 - 更改时损坏

> ID：15799547
> 
> 赞同：4
> 
> 时间：2013-04-03T22:43:47.200
> 
> 标签：gwt, google-maps-api-3, gwt-2.5

第一次渲染它对我来说工作正常。但是，如果我在地图上更改任何内容或重新创建它，它就会损坏。

这是其外观的屏幕截图。 ![这里](https://i.stack.imgur.com/sqCi0.png)

这是我更改每页结果值后的屏幕截图。 ![这里](https://i.stack.imgur.com/WJggn.png)

这是我的代码。

```
@UiField DivElement mapPanel;

private GoogleMap googleMap;

public void loadAllMarkers(final List<LatLng> markers)
{
    if(!markers.isEmpty())
    {
        final MapOptions options = MapOptions.create();
        options.setMapTypeId(MapTypeId.ROADMAP);

        googleMap = GoogleMap.create(mapPanel, options);

        final LatLngBounds latLngBounds = LatLngBounds.create();

        for(LatLng latLng : markers)
        {
        final MarkerOptions markerOptions = MarkerOptions.create();

        markerOptions.setPosition(latLng);
        markerOptions.setMap(googleMap);

        final Marker marker = Marker.create(markerOptions);
        latLngBounds.extend(marker.getPosition());

        }

        googleMap.setCenter(latLngBounds.getCenter());
        googleMap.fitBounds(latLngBounds);

    }
} 
```

每当需要加载新结果时，我都会调用 loadAllMarkers() 方法。

有人可以指出我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T17:19:29.323

这似乎来自以下内容（我从 Google+ 社区 - [GWT Maps V3 API](https://plus.google.com/u/0/communities/105780740892495987648)中提取）：

> 布兰登·唐纳尔森 2013 年 3 月 5 日
> 
> 我已经发生了这种情况并忘记了为什么会这样，但是 mapwidget.triggerResize() 会重置图块。这似乎发生在 onAttach 发生并且存在动画时，这意味着 div 开始变小并在侧面增加，但地图已经附加。在动画结束时，地图不会自动调整大小。我一直想研究自动调整大小，但我还没有时间攻击它。

在您的情况下，您将在完成更改后调用 googleMap.triggerResize() 。当我遇到完全相同的问题时，这解决了我的问题。我知道这有点晚了，但我希望它有帮助！

另一个答案是使用以下内容扩展 Map 小部件：

```
 @Override
protected void onAttach() {
    super.onAttach();
    Timer timer = new Timer() {

        @Override
        public void run() {
            resize();
        }
    };
    timer.schedule(5);
}

/*
 * This method is called to fix the Map loading issue when opening
 * multiple instances of maps in different tabs
 * Triggers a resize event to be consumed by google api in order to resize view
 * after attach.
 *
 */
public void resize() {
    LatLng center = this.getCenter();
    MapHandlerRegistration.trigger(this, MapEventType.RESIZE);        
    this.setCenter(center);
} 
```

# sql - regexp_replace oracle 的替换部分

> ID：15799548
> 
> 赞同：1
> 
> 时间：2013-04-03T22:44:01.450
> 
> 标签：sql, database, oracle, plsql

我有一个 regexp_replace 我想让替换部分成为被替换字符串的子部分。在下面的示例中 /2 应该始终给出第一部分，即 MON 例如

```
SELECT REGEXP_REPLACE('Test MON 234','^(.*? )(MON|FRI|SAT|SUN).*$', '\1\2') FROM dual;
==> Test MON
SELECT REGEXP_REPLACE('QA FRI 111','^(.*? )(MON|FRI|SAT|SUN).*$', '\1\2') FROM dual;
should give ==>  QA MON 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:24:13.907

琐碎的答案：

```
SELECT REGEXP_REPLACE('Test MON 234','^(.*? )(MON|FRI|SAT|SUN).*$', '\1MON') FROM dual;
SELECT REGEXP_REPLACE('QA FRI 111','^(.*? )(MON|FRI|SAT|SUN).*$', '\1MON') FROM dual; 
```

不那么简单的答案：从正则表达式中提取替换字符串的冻结部分。

```
SELECT REGEXP_REPLACE('^(.*? )(MON|FRI|SAT|SUN).*$', '^[^(]*\([^(]*\(([^)|]+).*$', '\1') FROM dual; 
```

请注意此解决方案的假设： - 您需要第二个捕获组的第一个替代方案。- 没有嵌套的捕获组 - 没有转义的捕获组分隔符

对于任何更复杂的事情（实际上，对于这个用例也是如此），您可能希望考虑从确定的任何来源获取冻结的替换，而不是通过从正则表达式模式中提取它。否则会有人面临代码维护的噩梦。

# javascript - DIV 在 iframe 上扩展

> ID：15799549
> 
> 赞同：0
> 
> 时间：2013-04-03T22:44:02.050
> 
> 标签：javascript, jquery, css, html, iframe

是否可以将自定义上下文菜单 ( `DIV`) 扩展到多个`iframes`?
我有 2 个`iframes`（`DIV`由于某种原因在每个中）。在`iframe 1`我有一个自定义上下文菜单（另一个`DIV`）。`iframe 1`当我在边框旁边右键单击时，上下文菜单出现在`iframe 2`：
![怎么样](https://i.stack.imgur.com/aAWBY.gif)

应该是这样的：
![应该如何](https://i.stack.imgur.com/taljN.gif)

我已经给出了 99 的上下文菜单 a `z-index`。

**编辑：**
这是我的 3 个站点。( `iframes`, ) 和 , 它们链接的`left`地方。 对不起，我不知道如何导入到 fiddlejs，所以我不得不单独链接它们。`right``index`
`iframes`

[index.html](http://jsfiddle.net/YkZSr/)
[left.html](http://jsfiddle.net/3GhXS/)
[right.html](http://jsfiddle.net/GgBUz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:46:17.000

指定`z-index: 1`两个`iframe`s。将带有“上下文菜单”的 div 保留在`z-index:99`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:46:30.420

你在浮动div吗？

```
.contextmenu{float: left; z-index: 999999} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:48:17.627

使用类似的东西

```
z-index: 999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999 
```

当我想要一些东西漂浮在其他一切之上时，这就是我所做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T00:12:49.040

一种选择是添加智能定位上下文菜单的逻辑。

换句话说，如果上下文菜单 div 太靠近 iFrame 的边缘，请添加重新定位*上下文菜单 div的代码。*

换句话说：

**如果** *弹出窗口的 x 位置* **大于**（*iFrame 的大小* **减去** *弹出窗口的宽度*）

**然后将***弹出窗口*重新定位到左侧

此过程有时称为固定*上下文*菜单的位置。

**注意**：

除非最终用户知道两个 iFrame 之间的逻辑分离，否则这不会很优雅。

# c# - 将 Excel 保存为 SQL Server 字段中的图像

> ID：15799552
> 
> 赞同：0
> 
> 时间：2013-04-03T22:44:19.693
> 
> 标签：c#, sql-server, image, excel

我正在将 MS Access 2003 应用程序转换为 C# (VS 2010) 和 SQL Server 2008。

除了一件事之外，这一切都很基本。我在应用程序中嵌入了 excel 电子表格。在 Access 中，它们被编辑并保存为 OLE DB 对象。然后电子表格在报告中显示为图像。我已将 Access Reports 转换为 Crystal Reports，并且转换后的数据在报告中显示得很好。

我可以创建电子表格并将其保存到文件中，但我不知道如何创建 Excel 电子表格并将其保存为我的 SQL Server 字段中的图像，以便 Crystal 可以将其放入报告中。

我也知道图像在 SS 2008 中已被弃用，因此任何关于如何将我的整个报告移至其他内容的想法将不胜感激。

仅供参考：较早的帖子建议了 Lenni Lobel 的文章，但它们不再存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:27:03.150

听起来这里有两个要求：

1.  能够通过 Crystal 访问文件数据
2.  能够有效地将电子表格存储在 SQL Server 2012 数据库列中。

您的选择（图像列除外）似乎是 FileStream 和 VarBinary。这是一个比较： [VARBINARY 与 FILESTREAM](http://coolthingoftheday.blogspot.com/2009/01/sql-server-varbinary-vs-filestream-code.html)。

不幸的是，我无法评论 Crystal 访问其中任何一个的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T23:29:37.317

您可以在 Crystal 报表中使用 OLE 对象来显示 excel 文件（不将其保存为图片）这可能适用于所有安装了 Excel 的计算机。

# php - 使用查询 php mysql 自动完成

> ID：15799554
> 
> 赞同：0
> 
> 时间：2013-04-03T22:44:24.530
> 
> 标签：php, mysql, jquery-autocomplete

我的表单中有三个字段。

例如：`Brand`, `Model`, `Engine`。

当我插入 时`Brand`，我希望该`Model`字段可以让我`Model`使用自动完成从数据库中插入文本和列表。

我使用 db 从数据库构建自动完成脚本没有问题`SELECT model FROM cars WHERE brand = 'the_brand_field'`，但我想弄清楚如何`Brand`从前一个字段中获取变量。

我可以在`Model`字段收到时运行查询`focus`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:54:18.060

使用`jQuery`, 等待`Model`字段获得焦点并触发对 PHP 的 AJAX 调用以加载数据以进行自动完成。返回 JSON 并在 jQuery 中解析数据并显示它们。

有一些免费的自动完成 jQuery 插件，只需 google 并选择一个你喜欢的。

通常这些插件使用它的值来搜索和自动完成并在事件之后触发具体输入`keydown`，`keyup`所以你必须稍微改变/修改这个行为......应该比实现你自己的自动完成工作更少。

# postgresql - 来自 3 个表的 PostgreSQL JOIN 数据

> ID：15799556
> 
> 赞同：82
> 
> 时间：2013-04-03T22:44:28.160
> 
> 标签：postgresql

我是 PostgreSQL 新手，正在尝试编写查询。我很确定对于知道自己在做什么的人来说这很容易——我只是不知道！:)

基本上我有三张桌子。首先，我存储有关患者的详细信息。在第二个中，我存储了对它们的每个图像的引用。第三，我将链接存储到图像的文件路径。我没有设计数据库，所以我不确定为什么图像文件表是分开的，但确实如此。

我想要做的是从第一个表中选择数据，从第二个然后第三个表中加入数据，这样我最终得到了结果中的名称和文件路径。

所以基本结构是：

```
Table 1:
person_id | name

Table 2:
person_id | image_id

Table 3:
image_id | `path filename` 
```

我想要做的是在一个查询中，获取该人的“姓名”和图像“路径文件名”。

我对我需要的加入的“模板”样式答案感到满意。我不需要用实际代码编写它。（即我想你可以给我写一个答案，上面写着`SELECT table1.name, table3.pathfilename FROM JOIN ... etc...`）。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-04-03T22:50:31.853

就像是：

```
select t1.name, t2.image_id, t3.path
from table1 t1 
inner join table2 t2 on t1.person_id = t2.person_id
inner join table3 t3 on t2.image_id=t3.image_id 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-03T22:50:53.437

也许您正在寻找以下内容：

```
SELECT name, pathfilename
  FROM table1
  NATURAL JOIN table2
  NATURAL JOIN table3
  WHERE name = 'John'; 
```

# mysql - MySQL查询连接，每个结果条件的位置

> ID：15799558
> 
> 赞同：1
> 
> 时间：2013-04-03T22:44:42.650
> 
> 标签：mysql, join

我有两个表：对象和标签。我创建了一个名为 objects_tags 的交叉表（对不起，我不熟悉术语...），其中每个与对象关联的标签都有一行。对象可能有许多标签，标签可能与许多对象相关联。

所以，对象可能看起来像这样

```
 +--------+----------------------------------------+
  | Object | Data                                   |
  |--------|----------------------------------------|
  |Object1 | Lorem Ipsum                            |
  |Object2 | Lorem Ipsum                            |
  |Object3 | Lorem Ipsum                            |
  |        |                                        |
  |        |                                        |
  |        |                                        |
  |        |                                        |
  |        |                                        |
  +--------+----------------------------------------+ 
```

数据无所谓。标签看起来基本相同，例如：

```
 +--------+----------------------------------------+
  | Tag    | Data                                   |
  |--------|----------------------------------------|
  |Tag1    | Lorem Ipsum                            |
  |Tag2    | Lorem Ipsum                            |
  |Tag3    | Lorem Ipsum                            |
  |        |                                        |
  |        |                                        |
  |        |                                        |
  |        |                                        |
  |        |                                        |
  +--------+----------------------------------------+ 
```

我的“交叉表”看起来像

```
 +--------+----------------------------------------+
  | Object | Tag                                    |
  |--------|----------------------------------------|
  |Object1 | Tag1                                   |
  |Object2 | Tag1                                   |
  |Object2 | Tag2                                   |
  |Object1 | Tag3                                   |
  |Object3 | Tag2                                   |
  |Object3 | Tag3                                   |
  |        |                                        |
  |        |                                        |
  +--------+----------------------------------------+ 
```

我想做的是获取所有同时具有 Tag1 和 Tag2 的对象（例如）。在这里，我只会返回 object2。

不起作用的 MySQL 命令是这样的：

```
SELECT * FROM objects JOIN objects_tags ON objects_tags.id=objects.id WHERE ( objects_tags.tag = ? AND objects_tags.tag = ? ) 
```

? 被替换为我要搜索的标签，包装为 PDO。此查询不返回任何内容，因为从联接返回的单行没有多个关联的标签，并且我请求匹配多个标签的行（这里我使用 AND，使用 OR 也不起作用，因为它返回的任何行匹配任何搜索词。此结果太宽泛，我希望匹配所有搜索词）。它应该返回多行，每行有一个标签，我想搜索每一行。我只想返回由用户指定的一些标签标记的对象，但我不知道如何形成所述查询。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:48:41.193

你有两个`objects_tags`要求，所以你需要两个`objects_tags`连接。

```
SELECT objects.Object
FROM objects
JOIN objects_tags ot1 ON (objects.Object = ot1.Object AND ot1.Tag = 'Tag1')
JOIN objects_tags ot2 ON (objects.Object = ot2.Object AND ot2.Tag = 'Tag2') 
```

# javascript - Highcharts：在鼠标悬停时定位列组信息

> ID：15799562
> 
> 赞同：2
> 
> 时间：2013-04-03T22:45:12.883
> 
> 标签：javascript, highcharts

我正在研究一个相当复杂的 Highcharts 实现并且遇到了障碍。我正在使用分组柱形图，其系列数据结构非常像这样：http:
[//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples /highcharts/demo/column-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/)

例如

```
series: [{
    name: 'Tokyo',
    data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0]
}, {
    name: 'New York',
    data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5]
},
... 
```

当用户将鼠标悬停在特定月份的任何列上时，我试图捕获以下内容：

1.  月份组的索引（例如 Jan == 0、Feb == 1 或类似的东西）
2.  整个组的 x,y 和 height,width 坐标。

问题是 plotOptions.column.events.mouseOver 中的“this”包含如此庞大的数据量，我无法确定该信息存在于海量数据结构中的哪个位置。此外，mouseOver 事件似乎与被鼠标悬停的单个列相关联，而不是与组本身相关联。

任何的想法？（提前致谢！）

*   本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T00:54:34.217

所以我花了一些时间研究这个，你是对的，`event`传递给`mouseOver`方法的对象并不是那么有帮助。我尝试查找对当前突出显示的列的引用，但无济于事。但是，我找到了另一种方法，它依赖于图表的 DOM 结构。这意味着如果他们在未来版本中更改图表布局，它可能会中断，但它现在应该可以工作。

图表的基本结构如下所示：

```
<g class="highcharts-series-group">
   <g class="highcharts-series">
      <rect x="11" y="223" width="5" height="55" />
      <rect x="61" y="199" width="5" height="79" />
      <rect x="111" y="160" width="5" height="118" />
      <rect x="161" y="135" width="5" height="143" />
      <rect x="211" y="118" width="5" height="160" />
      <rect x="261" y="83" width="5" height="195" />
      <!-- More <rect/>'s -->
   </g>
   <g class="highcharts-series">
      <rect x="19" y="185" width="5" height="93" />
      <rect x="69" y="191" width="5" height="87" />
      <rect x="119" y="169" width="5" height="109" />
      <rect x="169" y="175" width="5" height="103" />
      <rect x="219" y="161" width="5" height="117" />
      <rect x="269" y="184" width="5" height="94" />
      <!-- More <rect/>'s -->
   </g>
   <!-- More <g class="highcharts-series"/>'s -->
</g> 
```

这些直接对应于图表创建时传入的系列信息，我相信您指的是`x`、`y`、`width`和属性。`height`我们可以使用这种结构来使用一些老式的事件处理来检索您正在寻找的信息。

```
// Loop over each series element and bind a 
// 'mouseover' event to it.
$('.highcharts-series rect').on('mouseover', function() {
    var self = $(this);
    // Determine the offset (equal to the number of 'rect'
    // objects before it)
    var xIndex = self.prevAll('rect').length;
    var groupInfo = [];
    // Retrieve the '.highcharts-series-group' node
    // NOTE: $(this).parents('.highcharts-series-group')
    // does not appear to work (perhaps a limitation with 
    // jQuery and SVG?)
    $(this.parentNode.parentNode)
        // Loop over all series nodes within the current chart
        .find('.highcharts-series')
        .each(function(){
            // Retrieve the matching entry within each series
            // (represented by the nth 'rect' node)
            var element = $(this).find('rect:eq(' + xIndex + ')');
            if (!element.length) {
                return;
            }

            // Populate the Group Info element
            groupInfo.push({
                x: element.attr('x'),
                y: element.attr('y'),
                width: element.attr('width'),
                height: element.attr('height')
            });
        });

    // Do what you want with the groupInfo object and xIndex here:
    console.log(xIndex, groupInfo);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:42:39.810

在 mouseover venet for point 中，您可以访问有关列的所有参数。

[http://jsfiddle.net/amKuZ/](http://jsfiddle.net/amKuZ/)

```
 mouseOver: function() {
                    $report.html('coordinate: x: ' +this.plotX+'coordinate y: ' +this.plotY+'column width' + this.pointWidth + ' x value:'+this.x);
                } 
```

[http://api.highcharts.com/highcharts#plotOptions.column.point.events.mouseOver](http://api.highcharts.com/highcharts#plotOptions.column.point.events.mouseOver)

# html - 在调整 HTML5 画布大小期间闪烁

> ID：15799564
> 
> 赞同：4
> 
> 时间：2013-04-03T22:45:24.367
> 
> 标签：html, canvas, html5-canvas, flicker

在调整动画画布控件的大小期间，我观察到一些闪烁。

[您可以在此页面上](http://smoothiecharts.org/builder/)看到它的实际效果。左右拖动*“宽度”*滑块亲自尝试。我在 Linux 上运行的 Chrome 26.0.1410.43 中看到了这种闪烁。目前该页面在 Firefox 中无法运行，直到它支持 HTML5 的`<input type="range">`.

我试图在[这个 jsFiddle](http://jsfiddle.net/drewnoakes/Uz5Pt/)中以较小的规模重现这个问题。它不那么明显，但是当画布大约是可用宽度的 90% 时会发生。

代码陷阱`requestAnimationFrame`，调整大小会擦除画布。我希望在绘制浏览器的框架之前调用渲染回调。情况似乎并非如此，因为在调整大小时偶尔会出现白色背景。

有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T08:42:20.993

当您设置 canvas.width 或 canvas.height 时，它会清除画布，再加上重绘，这会导致您看到的闪烁。

您可以通过在调整大小之前将画布保存到临时画布，然后再将其重新绘制来在合理范围内减轻这种情况。

这是我的调整大小功能：

```
 function resize(width, height) {
        //Create temp canvas and context
        var tempContext = Utils.Canvas.Create2DContext(context.canvas.width, context.canvas.height);

        //Draw current canvas to temp canvas
        tempContext.drawImage(context.canvas, 0, 0);

        //Resize current canvas
        context.canvas.height = height;
        context.canvas.width = width;

        //Draw temp canvas back to the current canvas
        context.drawImage(tempContext.canvas, 0, 0);
    } 
```

如果您将大小调整为较小的尺寸，则临时画布将“过度绘制”，因此它将完全填满当前画布。但是，如果您调整到更大的尺寸，那么您的临时画布将仅填充当前画布的一部分。未填充的部分在重绘时仍会闪烁。

如果您想更花哨，可以尝试绘制正确（最终）大小的临时画布，而不是简单地复制当前画布。这会更慢，但可以很好地消除所有闪烁。

就我而言，我正在调整大小以填充 div，因此在底部和右侧边缘有一点闪烁是可以容忍的，而且肯定比整个闪烁要好得多。

编辑：

这是您的 jsFiddle 的更新，其中应用了我的更改：

[jsfiddle.net/Uz5Pt/13](http://jsfiddle.net/Uz5Pt/13)

它似乎比我在我的应用程序中使用它的地方更好！您几乎看不到任何新创建的画布上的任何闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:03:03.850

您可以尝试使用双缓冲区。这是一篇不错的文章，介绍了您可以尝试的一些技术：

[http://www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)

# ruby-on-rails - 如何添加到 ActiveAdmin 视图的链接

> ID：15799566
> 
> 赞同：18
> 
> 时间：2013-04-03T22:45:29.643
> 
> 标签：ruby-on-rails, activeadmin

我有：

```
ActiveAdmin.register User do
  show :title => :name do     
    attributes_table do
      row :username
      row :email
      row :last_request_at
      row :foo
    end
  end
end 
```

我希望 foo`<a href="/foo">foo</a>`在视图中创建一个。

所以我定义：

```
def foo
  <a href="/foo">foo</a>
end 
```

在 user.rb 模型中。它会显示，但标签已转义，因此不可点击。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-29T11:35:38.780

如果你正在使用一个有很多的你也可以遍历列表，重要的是不要忘记`.html_safe`

```
row "Bars" do |foo|
  foo.bars.each.map do |bar|
    link_to(bar.title, admin_bar_path(bar)) 
  end.join(', ').html_safe
end 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-04T00:20:37.693

你可以试试：

```
row :foo do
  link_to('foo','#')
end 
```

并替换`'#'`为您的路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T16:20:41.643

`= link_to 'List Users', admin_users_path`在您看来应该有效。检查您的 ActiveAdmin 命名空间是否实际`admin`使用`ActiveAdmin.application.default_namespace.to_s`（在控制台中）。

希望对某人有所帮助。

# css - 是否可以为用户输入设置两列布局样式（因此它溢出到第二列）

> ID：15799569
> 
> 赞同：0
> 
> 时间：2013-04-03T22:45:34.877
> 
> 标签：css, internet-explorer-7, user-input

我正在创建一个用户稍后将通过 CMS (Joomla!) 编辑的网站。

我想知道是否有一种方法来设置样式（css），以便当用户键入文本时，它会在达到设定高度时自动将其流入第二列。

所以一个两列布局......只是文本......当文本达到 300 像素的高度时，我希望它进入顶部右侧的第二列。

我很好奇是否有一种方法可以仅使用 css 来实现这一点，它肯定会为我节省一些 javascripting 时间。

再次感谢Stack的朋友们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:47:11.037

查看 CSS3 [column-count 属性](https://developer.mozilla.org/en-US/docs/CSS/column-count)。有一个[polyfill](https://github.com/BetleyWhitehorne/CSS3MultiColumn)可以让它在旧浏览器中工作。

```
textarea {
   -webkit-column-count: 3; /* Safari & Chrome */
      -moz-column-count: 3; /* Firefox */
       -ms-column-count: 3; /* Internet Explorer */
        -o-column-count: 3; /* Opera */
           column-count: 3; /* W3C */
    height: 300px;
} 
```

演示：http: [//jsfiddle.net/nPxSL/1/](http://jsfiddle.net/nPxSL/1/)

# oracle - 如何优化流水线、弱类型引用游标的使用

> ID：15799573
> 
> 赞同：4
> 
> 时间：2013-04-03T22:45:54.570
> 
> 标签：oracle, optimization, plsql, cursor, pipelined-function

我在程序上遇到了一些问题；当运行“大”组（800 多个父母，1300 多个孩子）时，它*非常*慢（30 - 60 秒）。

基本思想是获取符合特定搜索条件的所有父记录（及其各自的子记录），以及必须计算的 3 条附加信息。

我解决这个问题的方法是

1.  为计算值创建带有附加字段的自定义记录类型。
2.  然后可以将对该记录类型的引用传递给由主处理函数控制的每个函数。
3.  为每个父记录计算一个值时，将其附加到记录上。

每个过程每次搜索调用一次`GET_PARENT_RECORDS`，`GET_CHILD_RECORDS`每个计算函数运行 N 次（其中 N 是父记录和/或子记录的数量）。

* * *

**问题1**：这是正确的方法吗？（弱类型游标，流水线函数）如果不是，那么我应该如何解决这个问题，假设我可以重做？

**问题 2**：除非完全重写，提供的代码有什么明显可以改进的地方吗？

**问题 3**：或者其他什么问题，因为我注意到当我运行了几次程序时，同样的慢查询在 20 秒内返回？

* * *

包定义

```
create or replace
PACKAGE THIS_PKG AS

  Type parentCursor IS REF CURSOR;
  Type childCursor IS REF CURSOR;

  Type ParentRecordType IS RECORD (
    other_columns,
    Extra_column_A,
    Extra_column_B, 
    Extra_column_C,
    Row_num);    

  --associative array
  TYPE ParentArray IS TABLE OF ParentRecordType;

  FUNCTION processParents(
      p IN THIS_PKG. parentCursor
  )  RETURN ParentArray
  PIPELINED
  ;

  FUNCTION countSomething(some params…)
      RETURN INT;

  FUNCTION checkCondX (SomeParent IN ParentRecordType) 
      RETURN VARCHAR2;

  FUNCTION checkCondY (SomeParent IN ParentRecordType)
      RETURN VARCHAR2;

  PROCEDURE GET_PARENT_RECORDS( other_parameters, Parents OUT THIS_PKG.parentCursor);

  PROCEDURE GET_CHILD_RECORDS( other_parameters, Children OUT THIS_PKG.childCursor);

END THIS_PKG; 
```

包体

```
-- omitted

FUNCTION processParents(
      p IN THIS_PKG.parentCursor
  )  RETURN ParentArray
  PIPELINED
  IS
      out_rec  ParentArray;
      someParent   ParentRecordType;
  BEGIN
    LOOP
        FETCH p BULK COLLECT INTO out_rec LIMIT 100;

        FOR i IN 1 .. out_rec.COUNT
        LOOP
        out_rec(i).extra_column_A := countSomething (out_rec(i).field1, out_rec(i).field2);
        out_rec(i).extra_column_B := checkCondX(out_rec(i));
        out_rec(i).extra_column_C := checkCondY(out_rec(i));
        pipe row(out_rec(i));
        END LOOP;

        EXIT WHEN p%NOTFOUND;
    END LOOP;
    RETURN;
  END processParents;

PROCEDURE GET_PARENT_RECORDS(
      some_columns,
      Parents OUT THIS_PKG. parentCursor) IS
  BEGIN   
      OPEN Parents FOR
      SELECT *
      FROM TABLE(processParents (CURSOR(
        SELECT *
        FROM (
              --some select statement with quite a few where clause 
          --to simulate dynamic search (from pre-canned search options)
       )
     ))) abc
      WHERE abc.extra_column_C like '%xyz%' --(xyz is a user given value)
      ;
END GET_PARENT_RECORDS; 
```

* * *

**更新** 昨天做了一些探索，发现了 Quest Batch SQL Optimizer（来自 Toad）。我插入了包裹，这就是我得到的。

批处理优化器结果 ![批处理优化器结果](https://i.stack.imgur.com/IQ611.jpg)

复杂查询 ![复杂查询](https://i.stack.imgur.com/lrpKT.jpg)

有问题的查询 ![有问题的查询](https://i.stack.imgur.com/feeGT.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T23:11:29.753

行处理部分发生了什么？在这些 countSomething、checkCondX/Y 函数上可能会花费大量时间。他们是否也在进行 SQL 调用？我会先检查没有附加谓词的表函数的性能。简单地创建一个在 SQL 中而不是在函数中完成这一切的查询可能会更好——如果你能做到这一点，它将比为每一行调用一个函数要快得多。

```
 out_rec(i).extra_column_A := countSomething (out_rec(i).field1, out_rec(i).field2);
    out_rec(i).extra_column_B := checkCondX(out_rec(i));
    out_rec(i).extra_column_C := checkCondY(out_rec(i)); 
```

您提供的解释计划也很有趣，因为优化器认为所有表只返回 1 行（基数 1）。如果不是这种情况，那么查询计划将不是最优的。可能需要收集统计信息、使用动态采样或表函数的[基数提示](https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2233040800346569775)。

最后，查看[DBMS_SQLTUNE.REPORT_SQL_MONITOR](https://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sqltun.htm#CHDGAJCI)，它提供了有关您的 sql 的详细报告。除非查询被动态识别为需要监控，否则您需要添加 /*+ MONITOR */ 提示。这提供了更多详细信息，例如返回的行数、执行计数和解释计划中没有的其他有趣的花絮。

```
SELECT /*+ MONITOR */
FROM slow_query;

-- then run sqltune to get a report
SELECT *
FROM TABLE(DBMS_SQLTUNE.REPORT_SQL_MONITOR()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T16:25:57.357

Quest Batch SQL Optimizer（来自 Toad）或任何其他工具将无法帮助您，因为他们不了解您在函数中所做的事情。问题出在“FETCH p BULK COLLECT INTO out_rec LIMIT 100;”中。传递给 p 的查询质量实际上定义了最终的执行计划和运行时间。流水线不是缓慢的原因。当您多次运行您的过程时，Oracle 使用缓存数据。我最好的建议是：为此特定目的使用 Java 而不是 PL/SQL，它会更容易理解。

# ruby-on-rails - 如何迭代 ThinkingSphinx 中的分组结果？

> ID：15799586
> 
> 赞同：0
> 
> 时间：2013-04-03T22:46:42.507
> 
> 标签：ruby-on-rails, ruby, thinking-sphinx

我无法弄清楚如何遍历已设置为`group_by`. 我目前有以下内容：

```
search = Event.search(
  {
    group_by: 'category_id', 
    group_function: :attr
  }
)
search.each_with_groupby_and_count do |event, group, count|
  puts [event, group, count].join(' - ')
end 
```

但是，这只会返回每个类别的一条记录。似乎 group 和 count 值是正确的，但我只得到每个类别的第一个 Event，我本来希望它是组中的所有事件。是否可以获得哈希数组或类似数组？此外，如果这是可能的，`per_page`选项会是每个组吗？

我希望 each_with_group_and_count 迭代这样的东西：

```
[
   {group: 1, hits: [Event1, Event2], count: 2},
   {group: 2: hits: [Event3], count: 1}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:01:11.350

恐怕 Sphinx 的分组功能在这方面不起作用——它只返回每个组值的一个文档（在这种情况下，一个事件）。

仅按 category_id 排序可能更合适，并在迭代时跟踪它何时更改（或用于`Enumerable#group_by`按 category_id 对所有事件进行分组） - 请记住，Sphinx 对结果进行分页，因此您可能需要增加默认页面大小（带`:per_page`）取决于您如何使用这些结果。

# mysql - MySQL 用同一张表中另一个字段的查询结果填充一个新字段

> ID：15799589
> 
> 赞同：1
> 
> 时间：2013-04-03T22:47:01.583
> 
> 标签：mysql, sql, bigdata, sql-insert

我有一个包含“名称”字段的大型（100 万+行）数据库/表。但是，我需要一个名字和姓氏字段。

我能够运行查询以在新字段（解析）中以我需要的方式显示拳头和姓氏，但我似乎无法将这些查询结果插入到表中。

我能够在表中创建字段，但不能填充它们。

我在 phpMyAdmin 中工作，并且该表是通过 ODBC 从 Access 导出的。

下面是几个不起作用的代码示例。自从我不得不使用 SQL 以来已经有几年了，我认为这种方法的逻辑可能是错误的。我当然感谢任何帮助。

不起作用的示例：

```
INSERT INTO fed2012_aquabarndesign_com (lastname)
select left(Name,InStr(Name,',')) AS lastname
from fed2012_aquabarndesign_com 
```

或者

```
INSERT INTO fed2012_aquabarndesign_com (lastname)
Values (select left(Name,InStr(Name,',')) from fed2012_aquabarndesign_com); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:55:00.843

以下是您如何使用`UPDATE`-- 不确定是否要将`INSERT`这些记录返回到同一个表中的方法：

```
update fed2012_aquabarndesign_com
set firstname = trim(left(name, instr(name, ' ' ))),
  lastname = trim(right(name, length(name) - instr(name, ' ' ))) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/fe511/1)

这确实假设每个全名在名字和姓氏字段之间都有一个空格。

如果您*真的*想重新插入这些行，那么这应该可以：

```
insert into fed2012_aquabarndesign_com (firstname, lastname)
select trim(left(name, instr(name, ' ' ))),
   trim(right(name, length(name) - instr(name, ' ' )))
from fed2012_aquabarndesign_com; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/7412a/1)

# ios - 如何在 iOS 应用中重置所有 Facebook 权限？

> ID：15799590
> 
> 赞同：1
> 
> 时间：2013-04-03T22:47:03.653
> 
> 标签：ios, facebook, sdk, permissions

我正在为 iOS 和测试应用程序开发应用程序，我需要清除/重置所有 facebook 权限......怎么能这样做？

如果检查权限白图路径，我会看到这个日志

```
[PF_FBRequestConnection startWithGraphPath:@"me/permissions"
                         completionHandler:^(PF_FBRequestConnection *connection, id result, NSError *error) {

                             NSLog(@"facebook_permission: %@",result);

                         }]; 
```

结果是

```
[6412:c07] facebook_permission: {
data =     (
            {
        "create_note" = 1;
        email = 1;
        installed = 1;
        "photo_upload" = 1;
        "publish_actions" = 1;
        "publish_stream" = 1;
        "share_item" = 1;
        "status_update" = 1;
        "user_about_me" = 1;
        "user_birthday" = 1;
        "user_location" = 1;
        "video_upload" = 1;
    }
); 
```

我想清除所有权限..有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-09T21:13:39.353

是的。这是一个例子。

```
[FBRequestConnection startWithGraphPath:@"/me/permissions"
                     parameters:nil HTTPMethod:@"delete"
                     completionHandler:^(FBRequestConnection *connection, id result,    NSError *error)                                                                               {
                      if (!error && result == true) {
                        // Revoking the permission worked
                        NSLog(@"Permission successfully revoked");
                      } else {
                        // There was an error, handle it
                        NSLog(@"here was an error");
                        // See https://developers.facebook.com/docs/ios/errors/
                      }
}]; 
```

例如，如果您想删除特定权限只需更改路径，这里我将撤销 publish__actions 权限`startWithgraphPath:@"/me/permissions/publish_actions"`

[这里](https://developers.facebook.com/docs/facebook-login/permissions#reference)，是有权限的列表。

# php - 在输出数据之前运行 While 循环并检查另一个表的变量

> ID：15799595
> 
> 赞同：0
> 
> 时间：2013-04-03T22:47:46.143
> 
> 标签：php, while-loop

我有一个while语句。这循环通过我的“客户”表并输出数据。

```
while($row = mysql_fetch_array($result))
        {
echo ".$row['category_id'].<br>
.$row['name'].<br>
.$row['address'].<br>
.$row['status'].<br>"

} 
```

这一切都很好。
我遇到的问题是“category_id”作为数字存储在“客户”表中，不同的类别与它们的唯一编号和相关的书面名称一起存储在单独的“类别”表中。

例如客户表有，类别 id - 150 名称 - Stackoverflow 地址 - 123 Main Street 状态 - 活动

例如类别表有 id - 150 名称 - 留言板

当我运行 while 循环以输出客户数据时，我需要查询类别表以获取并显示与 category_id 关联的“名称”。

我在一个while循环中想出了一个while循环，你们怎么看？我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:53:14.960

你会想要做一个 MySQL 连接并立即获取所有信息：[http ://www.tizag.com/mysqlTutorial/mysqljoins.php](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

您的查询将如下所示：

```
SELECT
    c.name,
    c.address,
    c.status,
    ca.name as category_name
FROM
    customer c
JOIN
    category ca
ON
    ca.id = c.category_id 
```

您的 PHP 将如下所示：

```
while($row = mysql_fetch_array($result)) {
    echo "$row[category_name]<br>
          $row[name]<br>
          $row[address]<br>
          $row['status']<br>";
} 
```

# c# - 将 Json 字符串转换为对象列表

> ID：15799597
> 
> 赞同：6
> 
> 时间：2013-04-03T22:48:00.847
> 
> 标签：c#, asp.net, c#-4.0

我从外部 webapi 获取带有 json 对象的字符串。我有一个将对象放入 ExpandoObject 列表的代码，但必须有另一个解决方案而不使用动态对象。

这是代码：

```
System.Net.HttpWebRequest request = 

(System.Net.HttpWebRequest)System.Net.WebRequest.Create("https://example.com/api/users.json");
request.Credentials = System.Net.CredentialCache.DefaultCredentials;
request.Headers["Authorization"] = "API key="+somekey;
// Ignore Certificate validation failures (aka untrusted certificate + certificate chains)
System.Net.ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true);

System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
Stream resStream = response.GetResponseStream();
StreamReader reader = new StreamReader(resStream);
//response from the api
string responseFromServer = reader.ReadToEnd();
//serialize the data
var jss = new System.Web.Script.Serialization.JavaScriptSerializer();
System.Collections.IList users = (System.Collections.IList)((IDictionary<string, object>)((IDictionary<string, object>)jss.DeserializeObject(responseFromServer))["data"])["users"];

List<System.Dynamic.ExpandoObject> api_users = new List<System.Dynamic.ExpandoObject>();
//putting the expandable objects in list
foreach (var u in users)
{
    var user = ((Dictionary<string, object>)((IDictionary<string, object>)u)["User"]);
    dynamic data = new System.Dynamic.ExpandoObject();
    //putting the user attributes into dynamic object
    foreach (var prop in user)
    {
        ((IDictionary<String, Object>)data).Add(prop.Key, prop.Value);
    }
    api_users.Add(data);
} 
```

这是 json 字符串的示例：

```
"data": {
    "users": [
      {
        "User": {
          "user_id": "6741",
          "email": "mail@mail.com",
          "first_name": "Mark",
          "last_name": "Plas",
          "street_address": "",
          "post_code": "",
          "city": ""
        },
        "CreatedBy": {
          "id": null,
          "name": null
        },
        "ModifiedBy": {
          "id": null,
          "name": null
        }
      },...(can have more users here) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:21:41.853

您可以使用众多 C# JSON 解析器之一来执行此操作。我个人更喜欢[JSON.Net](http://json.codeplex.com/)（可以通过 NuGet 安装）。它可以反序列化为动态对象以及您自己的静态类型类。

# java - Objectify - 如果同时创建实体，事务是否会抛出 ConcurrentModException？

> ID：15799599
> 
> 赞同：0
> 
> 时间：2013-04-03T22:48:12.187
> 
> 标签：java, google-app-engine, transactions, objectify

如果在两个不同的事务中同时（之前不存在）创建具有相同键（没有父级）的实体，Objectify 是否会引发 ConcurrentModificationException？我刚刚找到了有关实体已经存在并被修改的情况的信息，但如果它还不存在的话……

```
 ofy().transactNew(20, new VoidWork() {

            @Override
            public void vrun() {
                Key<GameRequest> key = Key.create(GameRequest.class, numberOfPlayers + "_" + rules);
                Ref<GameRequest> ref = ofy().load().key(key);

                GameRequest gr = ref.get();
                if(gr == null) {

                    // create new gamerequest and add... 
                    // <-- HERE
                } else {
                    ...
                }

            }
        }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:17:35.823

是的，如果该实体组中的任何内容发生变化（包括实体创建和删除），您将获得 CME。

您显示的代码应该可以正常工作。除非您真的知道自己在做什么，否则最好只使用 transact() 方法，而不是尝试限制重试或强制执行新事务。99% 的时间，transact() 只是做正确的事。

# javascript - JavaScript createElement：for循环冻结；while 循环没有。为什么？

> ID：15799604
> 
> 赞同：5
> 
> 时间：2013-04-03T22:48:30.483
> 
> 标签：javascript, for-loop, while-loop, ubuntu-12.04, createelement

这是一个纯粹出于好奇的问题，因为它让我感到困惑。我在 Ubuntu 12.04 上，我在 Firefox 19.0.2 和 Chromium 25.0.1364.160 上试过这个。查看以下两段 JavaScript 代码（这些是一段较大代码的摘录）：

```
var Div = document.createElement('div');
var limit = 5;

var i = 0;
while (i<limit){
    var img = document.createElement('img');
    img.setAttribute('src', anImage);
    Div.appendChild(img);
    i++;
}
return Div; 
```

和

```
var Div = document.createElement('div');
var limit = 5;

for (i=0; i<limit; i++){
    var img = document.createElement('img');
    img.setAttribute('src', anImage);
    Div.appendChild(img);
}
return Div; 
```

现在'while' 循环按预期工作，而'for' 循环冻结浏览器。为什么这样做？区别在哪里？

我在 Interwebs 上寻找了一个类似的案例，但没有一个是完美的答案。这里有类似的，但不完全相同。

[在循环结构中将元素附加到 DOM](https://stackoverflow.com/questions/3198540/appending-elements-to-dom-in-a-loop-structure#)

[For循环冻结Javascript？](https://stackoverflow.com/questions/12399340/for-loop-freezes-javascript#)

实际上，第二个给了我首先尝试一个while循环的想法，但它从未被解释过，为什么它会有所作为......

感谢您的任何澄清:)

# elasticsearch - elasticsearch自动发现机架空间不起作用

> ID：15799609
> 
> 赞同：5
> 
> 时间：2013-04-03T22:48:41.263
> 
> 标签：elasticsearch, rackspace-cloud, rackspace, autodiscovery

我正在尝试将[ElasticSearch](http://www.elasticsearch.org/)用于我正在构建的应用程序，并将其托管在[Rackspace](http://www.rackspace.com/)服务器上。但是，该`auto-discovery`功能不起作用。我认为这是因为`auto-discovery`使用广播和多播来查找具有匹配集群名称的其他节点。我发现这篇[文章](http://www.rackspace.com/blog/cloud-networks-the-next-chapter-in-the-open-cloud/)说 Rackspace 现在通过他们的新云网络功能支持多播和广播。然后按照文章的说明，我创建了一个网络，并将该网络添加到运行节点的两台服务器上。然后我尝试`ElasticSearch`在两个节点上重新启动，但它们没有找到彼此，并且每个都将自己声明为“主节点”（这是日志的输出）：

```
[2013-04-03 22:14:03,516][INFO ][node                     ] [Nemesis] {0.20.6}[2752]: initializing ...
[2013-04-03 22:14:03,530][INFO ][plugins                  ] [Nemesis] loaded [], sites []
[2013-04-03 22:14:07,873][INFO ][node                     ] [Nemesis] {0.20.6}[2752]: initialized
[2013-04-03 22:14:07,873][INFO ][node                     ] [Nemesis] {0.20.6}[2752]: starting ...
[2013-04-03 22:14:08,052][INFO ][transport                ] [Nemesis] bound_address {inet[/0:0:0:0:0:0:0:0:9300]}, publish_address {inet[/166.78.177.149:9300]}
[2013-04-03 22:14:11,117][INFO ][cluster.service          ] [Nemesis] new_master [Nemesis][3ih_VZsNQem5W4csDk-Ntg][inet[/166.78.177.149:9300]], reason: zen-disco-join (elected_as_master)
[2013-04-03 22:14:11,168][INFO ][discovery                ] [Nemesis] elasticsearch/3ih_VZsNQem5W4csDk-Ntg
[2013-04-03 22:14:11,202][INFO ][http                     ] [Nemesis] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/166.78.177.149:9200]}
[2013-04-03 22:14:11,202][INFO ][node                     ] [Nemesis] {0.20.6}[2752]: started
[2013-04-03 22:14:11,275][INFO ][gateway                  ] [Nemesis] recovered [0] indices into cluster_state 
```

另一个节点的日志：

```
[2013-04-03 22:13:54,538][INFO ][node                     ] [Jaguar] {0.20.6}[3364]: initializing ...
[2013-04-03 22:13:54,546][INFO ][plugins                  ] [Jaguar] loaded [], sites []
[2013-04-03 22:13:58,825][INFO ][node                     ] [Jaguar] {0.20.6}[3364]: initialized
[2013-04-03 22:13:58,826][INFO ][node                     ] [Jaguar] {0.20.6}[3364]: starting ...
[2013-04-03 22:13:58,977][INFO ][transport                ] [Jaguar] bound_address {inet[/0:0:0:0:0:0:0:0:9300]}, publish_address {inet[/166.78.63.101:9300]}
[2013-04-03 22:14:02,041][INFO ][cluster.service          ] [Jaguar] new_master [Jaguar][WXAO9WOoQDuYQo7Z2GeAOw][inet[/166.78.63.101:9300]], reason: zen-disco-join (elected_as_master)
[2013-04-03 22:14:02,094][INFO ][discovery                ] [Jaguar] elasticsearch/WXAO9WOoQDuYQo7Z2GeAOw
[2013-04-03 22:14:02,129][INFO ][http                     ] [Jaguar] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/166.78.63.101:9200]}
[2013-04-03 22:14:02,129][INFO ][node                     ] [Jaguar] {0.20.6}[3364]: started
[2013-04-03 22:14:02,211][INFO ][gateway                  ] [Jaguar] recovered [0] indices into cluster_state 
```

添加网络还不够吗（Rackspace 还给了我这个网络的 IP）？使用多播查找其他节点时，是否需要以某种方式在 conf 文件中指定以检查该网络？

我还发现这篇[文章](http://www.elasticsearch.org/2010/05/11/here-comes-the-cloud/)提供了一种不同的方法。根据文章的说明，我将其放入`/config/elasticsearch.yml`：

```
cloud:
    account: account #
    key: account key
    compute:
        type: rackspace
discovery:
    type: cloud 
```

但是，当我尝试重新启动时，`ElasticSearch`我得到了这个：

```
Stopping ElasticSearch...
Stopped ElasticSearch.
Starting ElasticSearch...
Waiting for ElasticSearch.......
WARNING: ElasticSearch may have failed to start. 
```

它确实无法启动。我检查了日志文件是否有任何错误，但这就是那里的全部：

```
[2013-04-03 22:31:00,788][INFO ][node                     ] [Chamber] {0.20.6}[4354]: initializing ...
[2013-04-03 22:31:00,797][INFO ][plugins                  ] [Chamber] loaded [], sites [] 
```

它停在那里没有任何错误，也没有继续。

以前有没有人成功地`ElasticSearch`在 Rackspace 云中工作过？我知道单播选项也可用，但我希望不必单独指定每个 IP 地址，因为我希望以后可以轻松添加其他节点。谢谢！

**更新**

我还没有解决这个问题，但经过一番搜索，我发现这篇[文章](http://elasticsearch-users.115913.n3.nabble.com/Rackspace-CloudServers-td2825705.html)说“旧”云插件已停止使用，并仅替换为亚马逊云的[Ec2](http://www.elasticsearch.org/guide/reference/modules/discovery/ec2/)插件，这解释了为什么我对配置文件所做的更改确实如此不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T13:19:54.123

出于安全原因，在公共云上禁用了多播（可以用 验证`ifconfig`）。这是一篇文章，应该可以满足您的需求：

[https://developer.rackspace.com/blog/elasticsearch-autodiscovery-on-the-rackspace-cloud/](https://developer.rackspace.com/blog/elasticsearch-autodiscovery-on-the-rackspace-cloud/)

# jquery - Jquery 必须双击提交表单

> ID：15799610
> 
> 赞同：0
> 
> 时间：2013-04-03T22:48:41.520
> 
> 标签：jquery, forms, submit

如果我双击提交按钮，我有一个只会提交的表单。此外，如果我不取消绑定（'submit'），那么它根本不会触发。我需要更改的任何想法，只需单击一下即可。提前致谢。

```
$('#formID').submit(function (event) 
{
    event.preventDefault();
    var InspectionDate = $('#datepicker').val().split('/');
    InspectionDate.reverse();
    InspectionDate = InspectionDate.join('-');
    InspectionHour = $('#time_hour').val();
    InspectionMinutes = $('#time_minutes').val();
    var InspectionDateTime = InspectionDate + ' ' + InspectionHour + ':' + InspectionMinutes + ':00';
    $.ajax(
    {
        type: "POST",
        url: "ajax_booking_check.php",
        data: 'InspectionDateTime=' + InspectionDateTime,
        cache: false,
        success: function (response) 
        {
            if (response == 1) 
            {
                alert("An appointment for the selected Date and Time already exists.\n\nDouble Bookings are not possible.\n\nPlease refer to the calender to find an available appointment.");
            } 
            else 
            {
                $('#formID').unbind('submit').submit();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:07:50.487

我不熟悉`validationEngine`，但我快速浏览了它的源代码，并且玩过你发布的小提琴。这是我想出的（精简代码）：

```
jQuery(document).ready(function(){
    var ischecking=false;
    function mychecker(event) {
        if(event.isDefaultPrevented()){
            return false;
        }
        event.preventDefault();
        if(ischecking){
            return false;
        }
        ischecking=true;
        $.ajax({
            // ...
            cache: false,
            success: function(response){
                // ...
                $('#formID').off('submit',mychecker).submit();
            },
            complete: function(){
                ischecking=false;
            }
        });
    }
    jQuery('#formID').validationEngine().submit(mychecker);
}); 
```

注意两个变化：

1.  我添加了一个检查以确保该事件尚未被验证器取消，并确保它尚未与服务器进行检查；
2.  我给函数起了一个名字 ( `mychecker`) 并专门删除了它，而不是删除所有绑定的事件。

此代码有效，并修复了一些需要修复的问题，但我不能肯定它会解决您的问题。

# html - 如何获得图像周围的边框

> ID：15799611
> 
> 赞同：0
> 
> 时间：2013-04-03T22:49:07.227
> 
> 标签：html, css, xhtml, lightbox

嗨，我在玩灯箱。我想要做的是在我的缩略图周围设置一个边框，这样当用户将鼠标悬停在它上面时，它会改变颜色。

示例： http: [//lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

您可以看到，当您将缩略图悬停时，它会更改图像周围的边框颜色。谁能帮我用我的图像做到这一点？我把它们放在一个 div 中，我得到了 6 个。谢谢您的帮助。

html:

```
<div class = "lightbox">
    <a href="images/image1.jpg" rel="lightbox[group]"><img src="images/image1t.jpg" /></a>
    <a href="images/image2.jpg" rel="lightbox[group]"><img src="images/image2t.jpg" /></a>
    <a href="images/image3.jpg" rel="lightbox[group]"><img src="images/image3t.jpg" /></a>
    <a href="images/image4.jpg" rel="lightbox[group]"><img src="images/image4t.jpg" /></a>
    <a href="images/image5.jpg" rel="lightbox[group]"><img src="images/image5t.jpg" /></a>
    <a href="images/image6.jpg" rel="lightbox[group]"><img src="images/image6t.jpg" /></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:50:22.477

尝试这样的事情

```
a img
{
border:3px solid #ccc;
}
a:hover img
{
border:3px solid #666;
} 
```

更好的例子检查这个[小提琴](http://jsfiddle.net/UBpd4/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:53:21.083

您不需要边框，只需在锚点上添加一些`padding`和 a即可。`background-color`然后改变它的颜色`:hover`

# java - AspectJ 中的局部变量

> ID：15799623
> 
> 赞同：0
> 
> 时间：2013-04-03T22:50:13.427
> 
> 标签：java, compiler-construction, aspectj

我正在实现对 java 语言的不变量扩展。我正在为我的新语言实现解析器，并将 AST 注释为中间表示。现在我正在考虑使用 AspectJ 来控制在访问 AST 以控制变量时注入代码的位置，但我发现了一个问题。AspectJ 没有局部变量的连接点。具有此功能的 aspectj 或其他方面编程框架是否有任何扩展？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:12:54.223

局部变量访问没有作为 AspectJ 中的连接点公开，而且我不知道 AspectJ 有任何扩展可以做到这一点。

也许像 ASM 这样的低级字节码检测库可能对您的情况有所帮助。使用 ASM，您可以在 JVM 字节码级别上工作。

# java - 作业 - 迭代到递归方法

> ID：15799627
> 
> 赞同：0
> 
> 时间：2013-04-03T22:50:23.170
> 
> 标签：java, recursion

我的老师要求我们创建两种方法来确定字符串是否为回文。一个必须是递归方法，另一个必须是迭代方法，我已经弄清楚了迭代版本，但我不知道如何使它成为递归方法。欢迎任何和所有帮助。谢谢

```
static boolean isPalindrome(String s)
{
    String noSpaces = s.replaceAll("\\W", ""); //remove all non-word chars from string
    String revString = ""; //store reversed string 

    //for loop working from outter chars to inner
    //to reverse the string

    for(int i = 1; i <= noSpaces.length(); i++)
    {
        //if true add char to revString String 
        if(noSpaces.charAt(i - 1) == noSpaces.charAt(noSpaces.length() - i))
            revString = revString + noSpaces.charAt(i - 1);
    }

    //return true if original string matches reversed string
    if(noSpaces.equals(revString))
        return true;
    else
        return false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:54:18.733

创建一个递归方法，它接受一个字符串并返回一个布尔值，就像迭代方法一样。

*   它将检查第一个和最后一个字符，如果它们不同 return `false`，

*   如果它们是同一个调用并返回方法，其中第一个和最后一个字符作为参数

*   如果它是单个字符或空字符串，它将返回`true`。

关于迭代方法的提示：

*   区分大小写重要吗？

*   虽然您的方法是一种方法，但还有另一种方法只需要检查一半的字符串（而不是 from `1`to `noSpaces.length()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:57:49.853

递归通过调用自身的方法工作。递归的一个著名例子是阶乘：`n! = n * (n-1)!`. 递归之所以有效，是因为输入每次都在变化；如果没有，它基本上将是一个无限循环占用内存并最终导致程序崩溃。关于递归的最后一件事：有一点答案是已知的，比如阶乘，`0! = 1`. 递归方法需要给出这个已知值的答案，否则它将继续运行，直到它崩溃或抛出错误（因为被问到不可能的事情）。在您的示例中，如果某事物具有一个字符或两个完全相同的字符，您就知道它是否是回文。

递归：您想要的方法是获取一个字符串，执行 replaceAll 以删除非单词字符，**（添加一个 .toLowerCase() 到它）**，然后检查第一个和最后一个字符是否相同。如果是，则再次运行该方法，输入已`noSpaces`删除第一个和最后一个字符。但是，如果 String 的长度 <= 3 并且第一个和最后一个字符相同，那么您可以继续并返回 true。如果您不添加它，当您尝试删除不存在的字符时会出现错误（不过还有另一种方法）。

您的迭代方法很大，您可以将其缩小。您不需要检查所有字符，只需检查其中一半（如果您的长度为奇数，则为 1/2 + 1）。您也不需要复制字符串，而是在同一个字符串上使用两个 charAt 方法。

**编辑：**我确实删除了我的代码，因为这是家庭作业。如果你真的需要看，看一下编辑历史

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-05T17:26:06.423

试试这个：

```
public static boolean palindrome(String Str){
        if(Str.length()<=0)
            return true;
        if(Str.charAt(0)!=Str.charAt(Str.length()-1))
            return false;
        else
            return palindrome(Str.substring(1,Str.length()-1));
    } 
```

# c++ - C++ 基础知识

> ID：15799628
> 
> 赞同：-3
> 
> 时间：2013-04-03T22:50:23.920
> 
> 标签：c++, visual-studio

在使用 C# 一段时间后，我决定深入研究 C++，因为我喜欢编写视频游戏。C++ 在整个行业中被广泛使用，所以我想试一试。

我注意到的第一件事是 C++ 似乎不像 C# 那样使用“对象”。在 C# 中，所有编程都是在对象（即类）中完成的，不能在对象之外声明任何方法，甚至不能声明入口点。

C++ 似乎使用了这个，但不那么频繁，有时它似乎更像是事后的想法，或者我完全误解了 C++ 中“对象/类”的目的。

这让我想到了另一件事我感到困惑：标题。据我所知，这是您定义要在程序中使用的对象/方法的地方。它是一种主程序的框架。

基本上我对项目组成感到困惑。我正在尝试像 C# 一样使用它，但它不起作用。理想情况下，这里有人熟悉这两种语言并且可以帮助缩小差距，但只需简要说明常见的 C++ 程序结构就足够了。

非常感谢您！

PS我想可能没有“通用” C++结构之类的东西，但是对象和方法之间的关系或缺少它们是我正在寻找的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:00:28.217

您可以在 C++ 中尽可能多地或尽可能少地使用类，但绝对正确的是，它们对于 C# 中的所有内容都不是强制性的（尽管不是，入口点不能在 C++ 中的类中，但是您可以对大多数其他事情做出自己的决定）。

至于你*应该*如何编写 C++：随着时间的推移，人们对此的看法已经发生了变化。回到（比如说）1990 年代初期，大多数人写 C++ 的程度就像他们今天写 Java 或 C# 一样，基本上所有的代码、类型等都被汇总到某种类中。然而，随着时间的推移，这种情况变得越来越不常见——以至于大多数 C++ 程序员现在倾向于在完全合理的情况下更喜欢自由函数（即，不是类成员的函数），并且仅在以下情况下才使用成员函数替代品明显逊色。

标头是理论上非常简单的东西之一，但在实践中可能会相当混乱。标头只是包含在其他文件中的文件。您可以根据`#include`需要将基本上任何文件的内容包含到另一个文件中。

在实践中，您通常希望将函数、类型、常量等的声明放入头文件中，这样您就可以将它们包含在多个源文件中，这样所有这些源文件都会得到匹配的声明。

然而，使用模板，您通常不仅需要将声明，而且将整个定义放入头文件中，因此在您实例化该模板的任何地方，编译器都可以看到它。无论好坏，C++ 为模板的单独编译提供的支持正好处于“最小”和“无”之间的参差不齐的边缘。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T22:56:50.277

win32 与 Visual c++ clr/cli 或 c# 完全不同.. 但一旦有经验.. 你会看到相似之处。在 win32 中，您拥有主消息循环，并且必须自己中继所有内容……甚至是面向对象的复杂……在 c· 或 Visual c++ 之类的人工代码中……您像按钮一样的控件可以拥有自己的消息循环和您不必自己收集垃圾....考虑到它做得对。

在 win32 c++ 中，您需要非常好地处理数据，否则会发生内存漏洞/溢出。你会像建筑师一样工作，记录你的变量，不要隐瞒任何事情。这是主要区别！

# java - 如何将 int 变量传递给另一个活动？

> ID：15799637
> 
> 赞同：0
> 
> 时间：2013-04-03T22:51:10.297
> 
> 标签：java, android

我试图将一个带有意图的 int 值传递给另一个活动，但我总是得到 0。而且它不是 0，我检查了。我正在尝试从 int 变量 brojPoena 传递值。我试过这个：

```
Intent i = new Intent(Game.this, Popup_opis.class);
i.putExtra("brojPoenaPrimljeno", brojPoena); 
```

在我的接收活动中：

```
Intent mIntent = getIntent(); 
        if(mIntent !=null) {
           int brojPoena = mIntent.getIntExtra("brojPoenaPrimljeno", 0);
        }
tvBrojPoena.setText("You won " + brojPoenaPrimljeno + " points"); 
```

我也试过这个：

```
Intent i = new Intent(getApplicationContext(), Popup_opis.class);
i.putExtra("brojPoenaPrimljeno", brojPoena); 
```

在我的接收活动中：

```
Bundle extrasPoeni = getIntent().getExtras(); 
        if(extrasPoeni !=null) {
           brojPoenaPrimljeno = extras.getInt("brojPoena");
        } 
```

我的收货活动：

```
public class Popup_opis extends Activity implements OnClickListener{

    TextView tvOpis,tvNaslov,tvBrojPoena;
    String poslatOpis, primljenOpis;
    int brojPoenaPrimljeno;
    Button OK;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.popup_opis);

        Bundle extras = getIntent().getExtras(); 
        if(extras !=null) {
           primljenOpis = extras.getString("poslatOpis");
        }

        Bundle extrasPoeni = getIntent().getExtras(); 
        if(extrasPoeni !=null) {
           brojPoenaPrimljeno = extras.getInt("brojPoena");
        }

        initVariables();

    }

    private void initVariables() {

        Typeface tv = Typeface.createFromAsset(getAssets(), "ARIALN.TTF");
        OK = (Button) findViewById(R.id.bOK);
        tvOpis = (TextView) findViewById(R.id.tvOpis);
        tvBrojPoena = (TextView) findViewById(R.id.tvBrojPoena);
        tvBrojPoena.setTypeface(tv);
        tvNaslov = (TextView) findViewById(R.id.tvNaslov);
        tvNaslov.setTypeface(tv);
        tvOpis.setTypeface(tv);
        tvOpis.setText(primljenOpis);
        tvBrojPoena.setText("Osvojili ste " + brojPoenaPrimljeno + " poena u ovoj igri.");

    OK.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            finish();

        }
    });
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:55:59.473

这个变量在哪里`brojPoenaPrimljeno`？你有这个

```
int brojPoena = mIntent.getIntExtra("brojPoenaPrimljeno", 0); 
```

但是在调用时使用了不同的变量名`setText()`

您正在尝试使用`value`而不是接收值`key`。当您创建`Intent`

```
i.putExtra("brojPoenaPrimljeno", brojPoena);  // brojPoenaPrimljeno is the key be trying to use to 
```

尝试

```
 brojPoenaPrimljeno = getIntent().getIntExtra("brojPoenaPrimljeno", 0); 
```

此外，这是次要的，不是您的问题，但效率低下并可能导致问题。你在两个不同的地方得到了“意图”。这里

```
Bundle extras = getIntent().getExtras(); 
```

和这里

```
Bundle extrasPoeni = getIntent().getExtras(); 
```

**处理来自不同的意图`Activities`**

如果这有帮助，如果我有来自多个地方的`Activity`接收，我将使用 a来告诉接收它来自哪里。例如：`Intents``String extra``Activity`

Intent intent = new Intent(SendingActivity.this, ReceivingActivity.class); intent.putExtra("source", "activityName"); // 这将用于了解意图的来源

```
//receiving activity
Intent recIntent = getIntent();
if (recIntent.getStringExtra("source") != null)
{
     String source = recIntent.getStringExtra("source");
    if (source.equals("activityName"))
    {
         // do stuff
    }
    if (source.equals("differentActivityName"))
    {
         // do other stuff
    }
} 
```

# angularjs - Angularjs e2e 测试与 testacular 断开所有浏览器

> ID：15799641
> 
> 赞同：1
> 
> 时间：2013-04-03T22:51:27.220
> 
> 标签：angularjs, karma-runner

我正在尝试使用 testacular 在我的 AngularJs 项目上进行 e2e 测试。我成功启动了一个基于 node.js 的 Web 服务器，我可以看到加载 url 时文件是如何发送的，即使我可以在浏览器上看到视觉结果，但 Testacular 测试不起作用。我收到此错误：

```
[2013-04-04 00:31:00.499] [WARN] config - "/" is proxied, you should probably change urlRoot to avoid conflicts
INFO [testacular]: Testacular server started at http://localhost:9876/
INFO [launcher]: Starting browser Chrome
INFO [launcher]: Starting browser Firefox
INFO [Chrome 26.0 (Mac)]: Connected on socket id EN7sZuseiLuwlddbBkqn
INFO [Firefox 13.0 (Mac)]: Connected on socket id lBTUcn8b75p5O_cPBkqo
Chrome 26.0 (Mac): Executed 0 of 3
Chrome 26.0 (Mac): Executed 0 of 3 DISCONNECTED (0.413 secs / 0 secs)
Firefox 13.0 (Mac): Executed 0 of 3 DISCONNECTED (0.31 secs / 0 secs)
WARN [Chrome 26.0 (Mac)]: Disconnected 
```

这是我的睾丸配置文件：

```
basePath = '../';

files = [
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
  'test/e2e/**/*.js'
];

autoWatch = true;
browsers = ['Chrome', 'Firefox'];
singleRun = false;

proxies = {
  '/': 'http://localhost:8000/'
};

junitReporter = {
  outputFile: 'test_out/e2e.xml',
  suite: 'e2e'
}; 
```

知道我在做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T23:14:15.377

我遇到了类似的问题。我正在使用 index.html 异步风格，事实证明您还需要`ng-app`放入`document.body`.

```
angular.bootstrap(document, ['app']);

document.body.className = document.body.className + ' ng-app'; 
```

参考：[https ://github.com/karma-runner/karma/issues/422](https://github.com/karma-runner/karma/issues/422)

# .net - 什么会导致项目突然忘记其中一个参考？

> ID：15799642
> 
> 赞同：1
> 
> 时间：2013-04-03T22:51:29.217
> 
> 标签：.net, visual-studio, compiler-errors, opennetcf, assembly-references

我成功编译了我的项目，关闭了它，在上面运行了 7-zip，然后重新打开它，在尝试构建它时，找到了三个类似的错误消息：

> *   类或命名空间“OpenNETCF”中不存在类型或命名空间名称“Windows”（您是否缺少程序集引用？）
> *   类或命名空间“OpenNETCF”中不存在类型或命名空间名称“Threading”（您是否缺少程序集引用？）
> *   类或命名空间“OpenNETCF”中不存在类型或命名空间名称“IO”（您是否缺少程序集引用？）

OpenNETCF 仍在我的参考列表中，所以...？？？

我删除了 OpenNETCF.dll，然后将其添加回来并重建，但这并没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:07:39.560

我在我的应用程序中使用了[Teklynx LabelView](http://www.teklynx.com/en/products/label-design-solutions/labelview) DLL。

要使用 DLL，必须在 PC 上安装产品，并且我的项目中必须有 DLL，以便我的代码可以访问它。

我的产品也安装在我的开发 PC 上。有时，我会在尝试一个版本后将其卸载。

每次卸载我的产品时，LabelView 应用程序都会在系统上取消注册。我在 VS 部署项目中将 DLL 设置为**SharedLegasyFile**和**Permanent**，但在删除我的应用程序后，我可以立即尝试重建我的 VS2010 项目并得到未定义的项目错误。

要修复它，我所要做的就是打开 LabelView 程序，再次将其关闭，我的 VS 程序将毫无问题地编译。

我不知道为什么，但我知道它有效。

不过，我不知道 ctacke 的 OpenNETCF 包是否有一个可以用来打开它的接口，以便它可以重新注册自己。

# web-services - WSDL 到 XML 到 FLEX 数据网格

> ID：15799644
> 
> 赞同：-1
> 
> 时间：2013-04-03T22:51:35.223
> 
> 标签：web-services, apache-flex, datagrid, null, wsdl

我设置了一个 Web 服务来访问我的数据库，当 SWF 调用它时，它返回一个 XML 来填充一个 Datagrid。这一切都在工作，但有一个例外。如果表中没有任何数据要返回，则会收到 1088 错误，指出 XML 为 NULL。

我想要发生的是 Datagrid 只会显示一个空网格，直到有数据填充它并且不会收到错误消息。这是一个仅显示板，类似于机场的航班状态显示，因此无需用户交互来重置错误消息。

如果这很重要，我将 PHP 与 MySQL 和 Builder 4.6 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:38:58.583

这看起来像是 Flash Player[运行时错误](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/runtimeErrors.html)，而不是 PHP 生成的错误：“错误 1088：文档中根元素之后的标记必须格式正确”）。

如果是这种情况，只需让您的服务器在没有结果时返回一些有效的 XML：`<root></root>`或`<root><data></data></root>`类似的东西。

也许你已经在做类似的事情了。如果是这样，您应该展示您的 XML 的样子（当没有结果时），以及您如何在 Flash 端使用 XML（您是使用它作为网格的 dataProvider 还是尝试在其上使用 e4x 表达式， ETC。）

# jquery - 流沙元素在初始加载时看起来不合适

> ID：15799647
> 
> 赞同：0
> 
> 时间：2013-04-03T22:51:42.723
> 
> 标签：jquery, css, quicksand

我在初始页面加载时遇到了流沙元素的奇怪问题。[http://bvh.delineamultimedia.com/?page_id=2](http://bvh.delineamultimedia.com/?page_id=2) -> 您可能需要刷新几次才能看到我看到的内容，所以我发布了一张图片... [http://i.imgur.com/ 026HYeH.png](http://i.imgur.com/026HYeH.png)

如果您确保您的鼠标不在页面上并不时重新加载它，那么流沙元素就会脱节，如随附的屏幕截图所示。我已经尝试过调试它，但每次我查看检查器时，元素都会弹回原位。如果有人可以帮助我了解为什么会发生这种情况，我将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:55:58.733

如果您使用 jQuery 插件放置元素，那么在加载页面并且插件有机会运行之前，它们不会“卡入”到位。

如果您有加载时间问题，那么“快照”问题将很突出。

所以，在这种情况下，我会做的是隐藏所有元素，然后让 jQuery 排列它们，一旦加载页面，就显示它们。

我知道这是一个软糖，但是当我在您的网站上时，加载需要很长时间，所以除非您可以减少它...

**编辑**

```
$(function(){
  //Your code here.  This ensures page is loaded before this is executed
}); 
```

**编辑 2**

此外，请考虑在加载过程中使用缩略图或减小图像的大小。

例如，如果您单击一个图像，您会通过 ajax 加载完整大小的图像，但在主页上您应该有一个缩略图，这将减小页面的大小并因此减少加载时间

# ruby - 'require'：没有要加载的文件（LoadError）：运行工头时

> ID：15799658
> 
> 赞同：0
> 
> 时间：2013-04-03T22:52:51.753
> 
> 标签：ruby, rubygems, foreman

我有一个运行 ruby​​ 脚本的工头 Procfile：

`concat: ruby bin/compile_scripts_for_dev_automatically.rb`

当我运行脚本时，我收到以下错误：

`bin/compile_scripts_for_dev_automatically.rb:10:in 'require': no such file to load -- listen (LoadError)`

我需要“听”`require 'listen'`

我检查过我的电脑上只有一份 ruby​​：

```
$ which -a ruby
/usr/bin/ruby 
```

当我尝试`listen`在 IRB 中要求时，它可以工作：

```
$ irb
>> require 'listen'
=> true 
```

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:42:34.730

我试过的两件事奏效了。

我可以将其添加到脚本的顶部：

```
require 'rubygems' 
```

或者我可以按如下方式运行脚本：

```
ruby -rubygems myscript.rb 
```

我选择后者是因为这篇文章[https://gist.github.com/rtomayko/54177](https://gist.github.com/rtomayko/54177)建议您的脚本中不需要 ruby​​gems，因为它们会强制用户使用 ruby​​gems 来管理 gem。

# c# - 如何在c#中仅突出显示没有整个区域的图像？

> ID：15799660
> 
> 赞同：1
> 
> 时间：2013-04-03T22:53:08.620
> 
> 标签：c#, image, highlight

我想制作高亮图像，就像它在谷歌应用程序（html 中的谷歌 g+）中一样，当鼠标在它上面时只突出显示图像（没有边界边框，整个区域）。

在 c# 中，我使用图像来做到这一点，但是每次当我用鼠标移动到图像时，它都会突出显示所有区域（边界边框 + 图像）。

所以现在我的问题是：**如何仅突出显示没有整个区域的图像？**

图片显示 C# APPS 突出显示图像以及整个区域（灰色矩形）。 **如何绕过那些灰色矩形？**

![在此处输入图像描述](https://i.stack.imgur.com/FDBQp.png)

更多详细信息：Framework 4.5 或更高版本，WinForms，Win7 如果其他控件以更智能的方式执行此操作，则应用程序不一定使用图像控件...请告诉我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:39:57.983

Button 控件，就像您说的那样，是一个好的开始。您需要一个按钮才能使图像具有焦点和可点击性。PictureBox 不支持其中任何一个。您显然可以编写代码来手动处理这些事情，但是没有任何意义，因为 Button 已经内置了它。所以现在战斗变成了自定义 Button 控件以执行您想要的操作。

从您的屏幕截图中也可以看出，您已经发现需要处理`Enter`and`Leave`事件才能将图像从“正常”状态更改为“热”状态，然后再返回。为了获得您想要的外观，您已将 Button 的`FlatStyle`属性设置为`FlatStyle.Flat`并将该`FlatAppearance.BorderSize`属性设置为 0。

所以唯一的问题是，当 Button 控件获得焦点时，焦点提示会围绕它绘制。通常，您会*希望*这样做，因为使用键盘导航您的应用程序的人需要某种方法来确定当前哪个控件具有焦点。但是你通过改变它显示的图像给他们一个，所以你可以安全地禁用这些焦点提示。做到这一点的方法是从 Button 类继承并覆盖[`ShowFocusCues`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.showfocuscues.aspx)。

将包含以下类声明的新代码文件添加到您的项目中：

```
public class ImageButton : Button
{
   public ImageButton()
   {
      // Set default properties.
      this.FlatStyle = System.Windows.Forms.FlatStyle.Flat;
      this.FlatAppearance.BorderSize = 0;
   }

   protected override bool ShowFocusCues
   {
      get  { return false; }
   }
} 
```

然后，`ImageButton`为您的按钮控件使用该类，而不是内置`Button`类。这种类型的控件将自动具有您想要的行为。

![](https://i.stack.imgur.com/pPYQC.png)

如果您需要对自定义按钮的外观进行更多控制，则可以覆盖其[`OnPaint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)方法。如果您不想要任何默认行为，请跳过调用基类实现。例如，我们可以简单地擦除按钮的背景并绘制其图像：

```
protected override void OnPaint(PaintEventArgs pevent)
{
   // do not call the base class implementation
   // base.OnPaint(e);

   // erase the background
   pevent.Graphics.FillRectangle(SystemBrushes.Control, this.ClientRectangle);

   // draw the image at the top-left
   pevent.Graphics.DrawImage(this.Image, Point.Empty);
} 
```

# android - 列表视图懒惰适配器

> ID：15799663
> 
> 赞同：0
> 
> 时间：2013-04-03T22:53:18.320
> 
> 标签：android, listview, hashmap, lazy-loading, android-lazyadapter

我喜欢将所选项目值从 ListView 传递到另一个活动。

我正在使用此代码来获取与哈希图关联的详细信息，但我得到**java.lang.Integer cannot be cast to java.util.HashMap**。

```
public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                HashMap<String, String> o = (HashMap<String, String>) list.getItemAtPosition(position);
                Toast.makeText(CustomizedListView.this, "ID '" + o.get("KEY_TITLE") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            } 
```

我该如何解决它。我非常感谢您的帮助。

提前致谢。

```
public class CustomizedListView extends Activity {
    // All static variables
    static final String URL = "https://itunes.apple.com/us/rss/topalbums/limit=20/json";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL(URL);

        try {
            JSONObject arr2 = json.getJSONObject("feed");
            JSONArray arr = arr2.getJSONArray("entry");

            for (int i = 0; i < arr.length(); i++) {
                JSONObject e1 = arr.getJSONObject(i);

                JSONArray arr3 = e1.getJSONArray("im:image");

                JSONObject arr8 = e1.getJSONObject("im:name");

                JSONObject arr10 = e1.getJSONObject("im:artist");

                    JSONObject e12 = arr3.getJSONObject(0);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            map.put(KEY_THUMB_URL,  e12.getString("label"));

            map.put(KEY_ARTIST, arr8.getString("label"));
            map.put(KEY_TITLE, arr10.getString("label"));
            // adding HashList to ArrayList
            songsList.add(map);
            }

        } catch (JSONException e) {
            // Log.e("log_tag", "Error parsing data "+e.toString());
            Toast.makeText(getBaseContext(),
                    "Network communication error!", 5).show();
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @SuppressWarnings("unchecked")
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                HashMap<String, String> o = (HashMap<String, String>) list.getItemAtPosition(position);
                Toast.makeText(CustomizedListView.this, "ID '" + o.get("KEY_TITLE") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });     
    }   
} 
```

**但下面的相同代码有效：为什么？**

在这种情况下，它是一个**SimpleAdapter 。**

```
public class Main extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL("http://api.geonames.org/earthquakesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&username=demo");

        try{

            JSONArray  earthquakes = json.getJSONArray("earthquakes");

            for(int i=0;i<earthquakes.length();i++){                        
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = earthquakes.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("name", "Earthquake name:" + e.getString("eqid"));
                map.put("magnitude", "Magnitude: " +  e.getString("magnitude"));
                mylist.add(map);            
            }       
        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                        new String[] { "name", "magnitude" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(Main.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:48:27.737

尝试更换

```
 HashMap<String, String> o = (HashMap<String, String>) list.getItemAtPosition(position); 
```

和

```
int o = (int) list.getItemAtPosition(position); 
```

似乎您的列表视图项目包含`int`类型值

# ruby-on-rails - 在 Rails 片段缓存工作的情况下，为什么 SELECT 语句会出现在缓存片段内的日志中？

> ID：15799671
> 
> 赞同：0
> 
> 时间：2013-04-03T22:54:02.980
> 
> 标签：ruby-on-rails, caching, memcached, fragment-caching

我刚刚使用 memcachier 和 dalli 在 Heroku 上托管的网站上设置了 memcached。我已将主页包装在片段缓存块中。在我的日志中，我可以看到片段正在被缓存并正确读取，并且我已经发现负载测试的结果有了很大的改善。但我想知道为什么我仍然看到所有这些模型查找发生。我的理解是，我应该可以完全避免数据库之行。我的日志中的“国家负载”语句是否仅表示从缓存中加载模型？或者我可以通过改变缓存的方式来避免它们吗？

谢谢你的帮助！

```
2013-04-03T22:48:03+00:00 app[web.1]: Read fragment views/home (15.4ms)
2013-04-03T22:48:03+00:00 app[web.1]:   Rendered shared/_home.html (18.8ms)
2013-04-03T22:48:03+00:00 app[web.1]:   Rendered cities/index.html within layouts/application (51.6ms)
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (9.7ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'united states' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (5.0ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'france' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (4.1ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'spain' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (4.3ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'united kingdom' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (3.4ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'brazil' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (3.5ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'china' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (3.0ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'germany' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (2.8ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'argentina' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (12.9ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'japan' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (2.9ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'italy' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (3.6ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'canada' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (3.3ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'thailand' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (3.2ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'colombia' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (3.6ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'south korea' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (10.7ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'sweden' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]:   Country Load (3.0ms)  SELECT "countries".* FROM "countries" WHERE "countries"."name" = 'singapore' LIMIT 1
2013-04-03T22:48:03+00:00 app[web.1]: Completed 200 OK in 743ms (Views: 359.6ms | ActiveRecord: 382.2ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:24:11.897

视图中的片段缓存不会捕获布局 - 您是否有显示国家/地区的页眉或页脚元素？您也可以将它们包装在另一个片段缓存中。

# css - 3列css如何使列均匀？

> ID：15799677
> 
> 赞同：1
> 
> 时间：2013-04-03T22:54:29.463
> 
> 标签：css, layout

我有这个模板：[http ://demitogroup.com/dgroup/sample.html](http://demitogroup.com/dgroup/sample.html)

我的问题是即使在最后我也无法制作三列。实际上问题只是左列，因为它比其他列短，颜色就在那里结束。

我尝试了几种解决方案，但总是出现问题。我想得很清楚：两者兼而有之；可以帮助，但它没有做任何事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:58:33.680

您可以`display: table-cell`在每列和`display: table`父级 (*) 上使用。这将迫使您的“单元格”具有相同的高度并保持在同一行。

(*) 添加`table-layout: fixed`您希望应用精确宽度的同一父级，否则浏览器也会适应每个“单元格”的内容。

小提琴：http: [//jsfiddle.net/PhilippeVay/sFBGX/2/](http://jsfiddle.net/PhilippeVay/sFBGX/2/)

兼容性是 IE8+，如果需要，IE6/7 的回退与`inline-block`

以前的答案中更长的解释：**[这里](https://stackoverflow.com/questions/11359407/sidebar-height-stretch-with-the-content-height-css/11359442#11359442)**和**[那里](https://stackoverflow.com/questions/12019386/html-css-how-to-create-four-equal-size-tabs-that-fill-100-width/12019783#12019783)**还有很好的旧方法*仿列*（你的设计必须考虑到这种技术）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:02:09.173

将以下内容添加到您的样式表中：

```
#content {
  overflow: hidden;
  clear: both;
}

#tertiaryContent, #secondaryContent {
  padding-bottom: 100000px;
  margin-bottom: -100000px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T23:24:16.213

我知道 jQuery 没有被标记，但如果所有其他 CSS 解决方案都失败了，这里有 jQuery 代码来支持这一点。（因为网站上有奇怪的 hrml 标记，带有浮动和其他东西）

我创建了这个 jQuery 代码

```
$(document).ready(function(){
        var left = $("#left").height();
        var right = $("#right").height();

        if (left<=right) $("#left").css("height", right);
        else $("#right").css("height", left);
}); 
```

对于这个 HTML 标记

```
<div id="container">
    <div id="left">Short one</div>
    <div id="right">Long one</div>
<div> 
```

有了这个 CSS

```
#container {
    width: 100%;
}

#left {
    background: red;
    width: 100px;
    float: left;
}

#right {
    background: red;
    width: 100px;
    float: right;
} 
```

[http://jsfiddle.net/cQUep/1/](http://jsfiddle.net/cQUep/1/)

# c++ - 列表将类转换为父级

> ID：15799678
> 
> 赞同：0
> 
> 时间：2013-04-03T22:54:43.560
> 
> 标签：c++, polymorphism

我有以下课程：

```
class A
{
public:
    A();
    virtual void doSomething() const;
};

class B : public A
{
public:
    B();
    void doSomething() const;
}; 
```

然后我有功能：

```
void putToList(const A &a)
{
   a.doSomething(); // this one depends on what was set as argument A or B class (putToList(A()) or putToList(B()))
   std::list<A> As;
   As.push_back(a);
   As.back().doSomething(); //this always calls doSomething from A
} 
```

我的问题是，为什么从列表中取出对象是 A 以及如果我传递给函数的对象属于 B 类，如何防止它更改类型并将其变为 B。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T22:59:23.390

的类型`As`是`std::list<A>`。它存储`A`对象。如果你试图把一个`B`物体放进去，它会被*切片*，你只会得到`A`它的一部分。每当您从列表中获取一个元素时，它就是一个`A`对象，因此您调用它的任何函数都将是`A`.

在 C++ 中有两种获得多态行为的方法：指针或引用。例如，您可以`A`在列表中存储指向的指针：

```
std::list<A*> As;
As.push_back(&a);
As.back()->doSomething(); 
```

当然，最好将其包装在智能指针中。

要使用引用，您可以使用 a`std::list<std::reference_wrapper<A>>`代替。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T22:59:43.230

这是***对象切片***问题的一个很好的例子，其中的实例`B`被切片到实例的实例，`A`因此丢失了特定的内容`B`（参见[什么是对象切片？](https://stackoverflow.com/q/274626/1168156)）。

在使用对象列表时，您不会实现这种运行时多态性。您可以改用指针列表：

```
std::list<A*> As;
As.push_back(new B());
As.back()->doSomething(); // method of B is invoked 
```

甚至更好：再次利用 RAII 并使用智能指针而不是裸指针（即`A*`如我的示例中所示）。

# c# - 加入两个具有一对多关系的列表

> ID：15799681
> 
> 赞同：2
> 
> 时间：2013-04-03T22:54:58.453
> 
> 标签：c#

我有两个这样的课程。一个有另一个类的列表，并由 key1 链接。

```
public class Alpha
{
    public key1 { get; set; }
    public List<Bravo> { //getter and setter }
}

public class Bravo
{
    public key1 { get; set; }
    public someProp { get; set; }
} 
```

我有一个方法可以获取两个 Alpha 和 Bravo 列表，我需要将它们加入一个 Alpha 列表。每个 Alpha 都与 Bravo 有一对多的关系，但现在我有很多 Alpha。我知道我可以遍历这两个列表，但有更快的方法吗？

```
public List<Alpha> Join (List<Alpha> alphaList, List<Bravo> bravoList)
{
    //match each Bravo with it's corresponding Alpha
} 
```

例子：

```
alphaList = { 
    item1 { key1 = 1, bravoList { } }
    item2 { key1 = 2, bravoList { } }
    item3 { key1 = 3, bravoList { } }
}

bravoList = {
    itemA { key1 = 1, someProp }
    itemB { key1 = 2, someProp }
    itemC { key1 = 2, someProp }
    itemD { key1 = 3, someProp }
    itemE { key1 = 3, someProp }
}

finalList = {
    item1 { key1 = 1, bravoList { itemA } }
    item2 { key1 = 2, bravoList { itemB, itemC } }
    item3 { key1 = 3, bravoList { itemD, itemE } }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:00:40.777

您可以使用[`Enumerable.Join`](http://msdn.microsoft.com/en-us/library/bb344797.aspx)：

```
public List<Alpha> Join(List<Alpha> alphaList, List<Bravo> bravoList)
{
    return alphaList.Join(bravoList, a => a.key1, b => b.key1, (a,b) => a)
                    .ToList();
} 
```

`Alphas`这将返回列表中的所有`key1`列表`Bravos`。

**更新**：

```
public List<Alpha> Join(List<Alpha> alphaList, List<Bravo> bravoList)
{
    List<Alpha> finalList = alphaList
        .Select(a => new Alpha { 
             key1 = a.key1, 
             bravoList =  bravoList.Where(b => b.key1 == a.key1).ToList()
         }).ToList();
    return finalList;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T23:00:17.917

```
public class Helper
{
    public List<Alpha> Join(List<Alpha> alphaList, List<Bravo> bravoList)
    {
        return alphaList.Select(a => new Alpha() { key1 = a.key1, list = bravoList.Where(b => b.key1 == a.key1).ToList() }).ToList();
    }
}

public class Alpha
{
    public int key1 { get; set; }

    public List<Bravo> list { get; set; }
}

public class Bravo
{
    public int key1 { get; set; }

    public string someProp { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T23:00:25.263

根据您的评论，`Bravo`'s on列表`Alpha`几乎是无关紧要的，因为它不是由 ORM 以任何方式管理的。

如果你想加入，这里是最简单的使用方法：

```
public IEnumerable<Tuple<Alpha, Bravo>> Join (IEnumerable<Alpha> alphaList, IEnumerable<Bravo> bravoList)
{
    return (from a in alphaList
            join b in bravoList on a.key1 equals b.key1
            select Tuple.Create(a, b))
           .ToList();
} 
```

由于这是一个多对一的关系，这可能会更有用：

```
public Lookup<Alpha, Bravo> Join (IEnumerable<Alpha> alphaList, IEnumerable<Bravo> bravoList)
{
    return (from a in alphaList 
            join b in bravoList on a.key1 equal b.key1 into g
            select new { a, g })
           .ToLookup(x => x.a, x.g)
} 
```

注意`into`条款；它允许您将连接的项目组合在一起。然后我将分组变成一个[`Lookup`](http://msdn.microsoft.com/en-us/library/bb460184.aspx)以便于访问。

如果您*确实*想保留列表，那么如果没有-loop 或大量构建您自己的 mini-ORM 的工作`Alpha`，可能无法做到这一点。`foreach`

# c# - 查找直线和三次样条之间的交点

> ID：15799685
> 
> 赞同：3
> 
> 时间：2013-04-03T22:55:15.080
> 
> 标签：c#, algorithm, computational-geometry

![图表](https://i.stack.imgur.com/pIQLs.png)

我需要一种方法来以编程方式找到源自原点的线 f(x) 与由 4 个点定义的三次样条曲线之间的交点。保证该线与样条的中心段相交，在 X1 和 X2 之间。

我尝试了多种方法，但似乎无法获得预期的结果。我怀疑我的问题出在我处理复数的某个地方。

谁能找到我的代码的问题，或者提出不同的方法？

```
 private Vector2 CubicInterpolatedIntersection(float y0, float y1, 
                            float y2, float y3, float lineSlope, lineYOffset)
    {
        // f(x) = lineSlope * x + lineYOffset
        // g(x) = (a0 * x^3) + (a1 * x^2) + (a2 * x) + a3

        // Calculate Catmull-Rom coefficients for g(x) equation as found 
        // in reference (1). These 
        double a0, a1, a2, a3;
        a0 = -0.5 * y0 + 1.5 * y1 - 1.5 * y2 + 0.5 * y3;
        a1 = y0 - 2.5 * y1 + 2 * y2 - 0.5 * y3;
        a2 = -0.5 * y0 + 0.5 * y2;
        a3 = y1;

        // To find POI, let 'g(x) - f(x) = 0'. Simplified equation is:
        // (a0 * x^3) + (a1 * x^2) + ((a2 - lineSlope) * x) 
        //                         + (a3 - lineYOffset) = 0

        // Put in standard form 'ax^3 + bx^2 + cx + d = 0'
        double a, b, c, d;
        a = a0;
        b = a1;
        c = a2 - lineSlope;
        d = a3 - lineYOffset;

        // Solve for roots using cubic equation as found in reference (2).
        //  x = {q + [q^2 + (r-p^2)^3]^(1/2)}^(1/3) 
        //         + {q - [q^2 + (r-p^2)^3]^(1/2)}^(1/3) + p
        //  Where...
        double p, q, r;
        p = -b / (3 * a);
        q = p * p * p + (b * c - 3 * a * d) / (6 * a * a);
        r = c / (3 * a);

        //Solve the equation starting from the center.
        double x, x2;
        x = r - p * p;
        x = x * x * x + q * q;
        // Here's where I'm not sure. The cubic equation contains a square 
        // root. So if x is negative at this point, then we need to proceed
        // with complex numbers.
        if (x >= 0)
        {
            x = Math.Sqrt(x);
            x = CubicRoot(q + x) + CubicRoot(q - x) + p;
        }
        else
        {
            x = Math.Sqrt(Math.Abs(x)); 
            // x now represents the imaginary component of 
            //                       a complex number 'a + b*i'
            // We need to take the cubic root of 'q + x' and 'q - x'
            // Since x is imaginary, we have two complex numbers in 
            // standard form. Therefore, we take the cubic root of 
            // the magnitude of these complex numbers
            x = CubicRoot(Math.Sqrt(q * q + x * x)) + 
                 CubicRoot(Math.Sqrt(q * q + -x * -x)) + p;
        }

        // At this point, x should hold the x-value of 
        //      the point of intersection.
        // Now use it to solve g(x).

        x2 = x * x;
        return new Vector2((float)Math.Abs(x), 
           (float)Math.Abs(a0 * x * x2 + a1 * x2 + a2 * x + a3));
    } 
```

参考：

1.  [http://paulbourke.net/miscellaneous/interpolation/](http://paulbourke.net/miscellaneous/interpolation/)
2.  [http://www.math.vanderbilt.edu/~schectex/courses/cubic/](http://www.math.vanderbilt.edu/~schectex/courses/cubic/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:33:46.537

编码

```
if (x >= 0)
{  // One real root and two imaginaries.
    x = Math.Sqrt(x);
    x = CubicRoot(q + x) + CubicRoot(q - x) + p;
}
else
{  // Three real roots.
    x = Math.Sqrt(Math.Abs(x)); 

    x_1 = Math.Sign(q)*2*(q*q + x*x)^(1/6)*Math.Cos(Math.Atan(x/q)/3) + p;
    x_2 = Math.Sign(q)*2*(q*q + x*x)^(1/6)*Math.Cos(Math.Atan(x/q)/3 + Math.PI*2/3) + p;
    x_3 = Math.Sign(q)*2*(q*q + x*x)^(1/6)*Math.Cos(Math.Atan(x/q)/3 + Math.PI*4/3) + p;
} 
```

您可以`( )^(1/6)`使用`Math.Pow( , 1/6)`or your `Math.Sqrt(CubicRoot( ))`or计算`Math.Sqrt(Cbrt( ))`。请参阅[Microsoft 论坛上的以下主题](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/784cfdc1-1e47-448e-83e8-a94197f58e24/)。

小心`q = 0`。`( Atan(x/0) = pi/2 radians. Cos(Atan(x/0)/3) = Sqrt(3)/2 )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:49:07.523

对于二次方程，至少存在 1 个单实根。使用此方法查找根[http://en.wikipedia.org/wiki/Cubic_function#General_formula_of_roots](http://en.wikipedia.org/wiki/Cubic_function#General_formula_of_roots)

# java - 在 Java 中从泛型类型创建列表

> ID：15799686
> 
> 赞同：1
> 
> 时间：2013-04-03T22:55:19.703
> 
> 标签：java, reflection

我有一个形式的界面：

```
public interface Tester<K1, V1> {
    ...
} 
```

客户端将实现此接口，然后将其子类的 .class 文件传递​​给我。然后我通过以下方式从界面中解析出 K1、V1：

```
// Assume only Tester<K1, V1> is implemented for now:
Type genericInterface = ClientClass.class.getGenericInterfaces()[0]; 
if(genericInterface instanceof ParameterizedType){
    Type[] genericTypes = ((ParameterizedType) genericInterface).getActualTypeArguments();
    List<?> myList = new ArrayList<genericTypes[1]>(); // THIS DOES NOT WORK!
} 
```

我正在尝试根据在其接口中声明的泛型类型实例化一个列表。在java中执行此操作的正确方法是什么？这可能吗？我的做法似乎行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:03:04.693

而不是`List<?> myList`说`List<Object> myList`甚至更旧的风格：`List myList`. 后者会给你编译器警告，这是泛型帮助之前的风格。我不能完全理解你想要做什么。您是否基本上尝试在运行时确定泛型的类型？引入了泛型，因此您可以进行编译类型错误检查。除非有一个非常好的理由，否则尽量避免使用泛型（我只能想到如果你构建一些缓存框架，你真的必须处理所有事情，我已经看到了）。尝试在您将尝试处理/存储的对象中找到最常见的分母基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:07:48.670

在您的情况下，这**是**可能的。但是，创建 ArrayList 的方式在语法上是非法的，因为泛型类型参数必须在编译时已知。改为使用`new ArrayList<Object>`（在构造函数调用和声明中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T23:01:44.700

我不认为在 Java 中可以使用动态值，例如您的示例中的 genericTypes[1]。Java 中的泛型基本上是在编译时应用的语法糖。在大多数情况下，类型信息在运行时被删除。Java 教程中提供了一些附加信息，网址为[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

# php - 通过电子邮件接收表单数据

> ID：15799690
> 
> 赞同：0
> 
> 时间：2013-04-03T22:55:56.470
> 
> 标签：php, forms

我如何才能在电子邮件中收到此表格的数据？

```
<form class="pa">
    <fieldset>
        <label>Name <em>*</em></label>
        <input type="text" placeholder="">
        <label>Email <em>*</em></label>
        <input type="text" placeholder="">
        <label>Age <em>*</em></label>
        <input type="text" placeholder="">
        <label>Phone <em>*</em></label>
        <input type="text" placeholder="">
        <label>Zip Code <em>*</em></label>
        <input type="text" placeholder="">
        <a class="submit pa" href="#"><img src="wp-content/themes/child/img/submit.png"</a>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:58:08.600

您需要一个服务器端脚本来接受表单数据，并使用它发送电子邮件。你可以做到这一点 PHP 和其他几种语言。从您的示例代码来看，您拥有 WordPress，因此您可能会查看[ContactForm 插件](http://wordpress.org/extend/plugins/contact-form-7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:00:47.827

用类似的东西包装你的输入

```
<form class="pa" action="yourscript.php" method="post">
    .
    .
    <label for="name">Name <em>*</em></label>
    <input type="text" placeholder="" id="name" name="name">
    .
    <input type="submit" value="Submit" />
    <!-- remove the a tag because that won't submit your form data or use type="image" -->
    <input type="image" src="wp-content/themes/child/img/submit.png" />
</form> 
```

然后用于`$_POST['name']`检索您必须添加`name=''`到每个输入以将它们发送到您的脚本的值，例如`<input type="text" id="name" name="name">`，它们必须不同，否则它们可能会被覆盖。您的标签也需要`for=`使用例如`id``input``<label for="name">Name <em>*</em></label>`

# javascript - 如何在 pageshow 上调用相同的代码并滚动顶部

> ID：15799691
> 
> 赞同：0
> 
> 时间：2013-04-03T22:55:56.990
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jQuery Mobile，我有一堆像这样执行的 javascript 代码

```
$(document).on("pageshow", function () {
  $(function () {
    var $container;
    $container = $(".items-section");
    return $container.imagesLoaded(function () {
      $container.masonry({
        itemSelector: "article.hlisting"
      });
      return $container.masonry({
        isFitWidth: true
      });
    });
  });
}); 
```

但由于我通过 ajax 检索对象并在屏幕上重绘它们，一些相同的代码也需要在 `$(document).on("scrollstop", function()`

我的问题是。如何重构代码以便在两种情况下调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:58:23.277

如果它与您想要调用的代码完全相同，那么只需将多个空格分隔的事件作为第一个参数传递：

```
 $(document).on("pageshow scrollstop", function() {
     // your code here
 }); 
```

# maps - 带有 Bing 地图的信息框的动态操作

> ID：15799694
> 
> 赞同：1
> 
> 时间：2013-04-03T22:56:01.117
> 
> 标签：maps, bing-maps

我正在创建一个实现 Bing 地图控件的站点。我已经放置了图钉，当用户单击图钉时它们会显示信息框。

我现在需要做的是向信息框添加操作。我可以使用 action: 选项静态地做到这一点。我想动态地做到这一点，因为每个站点都可以有一组不同的我想呈现给用户的操作。

我已经构建了其中包含操作的字符串，不幸的是信息框想要一个对象，而不是字符串，而且我不知道它想要哪个对象，也不知道如何将字符串变成正确的对象。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:56:14.950

虽然您没有“setActions”，但您可以使用 Infobox 上的“setOptions”。

```
infobox.setOptions(infoboxOptions); 
```

参考：http: [//msdn.microsoft.com/en-us/library/gg675208.aspx](http://msdn.microsoft.com/en-us/library/gg675208.aspx)

选项本身可以像这样创建，只需执行以下操作：

```
var infoboxOptions = {
    actions:[
        {label: 'test1', eventHandler: testEvent1}, 
        {label: 'test2', eventHandler: testEvent2}]}; 
```

参考：http: [//msdn.microsoft.com/en-us/library/gg675210.aspx](http://msdn.microsoft.com/en-us/library/gg675210.aspx)

您可以随时调用它，从而向信息框添加例如更多操作。

现在，你提到你有一个字符串？我猜你在谈论“infoboxOptions”等的JSON表示。你可以使用类似的东西

```
jQuery.parseJSON(jsonString); //if using jQuery 
```

您也可以以编程方式执行此操作，因此可能使用一些条件逻辑：

```
var myActions = [];

if(A) {
    myActions.push( {label: 'test1', eventHandler: testEvent1});
}
if(B) {
    myActions.push( {label: 'test2', eventHandler: testEvent2});
}
if(C) {
    myActions.push( {label: 'test3', eventHandler: testEvent3});
}
infobox.setOptions({ actions: myActions}); 
```

# python - 如何在 Python 中构建 URL

> ID：15799696
> 
> 赞同：91
> 
> 时间：2013-04-03T22:56:11.443
> 
> 标签：python

我需要知道如何在 python 中构建 URL，例如：

```
http://subdomain.domain.com?arg1=someargument&arg2=someotherargument 
```

你会推荐使用什么库，为什么？这种图书馆有“最佳”选择吗？

另外，您能否为我提供开始使用该库的示例代码？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2015-01-18T16:23:50.907

我会选择 Python 的`urllib`，它是一个内置库。

**蟒蛇2**

```
import urllib
url = 'https://example.com/somepage/?'
params = {'var1': 'some data', 'var2': 1337}
print(url + urllib.urlencode(params)) 
```

**蟒蛇 3**

```
import urllib.parse
url = 'https://example.com/somepage/?'
params = {'var1': 'some data', 'var2': 1337}
print(url + urllib.parse.urlencode(params)) 
```

输出：

```
https://example.com/somepage/?var1=some+data&var2=1337 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-04-03T22:57:35.133

[`urlparse`](http://docs.python.org/2/library/urlparse.html)python标准库中的所有内容都是关于构建有效的url。检查 urlparse 的文档

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-06-14T18:32:56.830

下面是一个`urlparse`用于生成 URL 的示例。这为向 URL 添加路径提供了便利，而无需担心检查斜杠。

```
import urllib

def build_url(base_url, path, args_dict):
    # Returns a list in the structure of urlparse.ParseResult
    url_parts = list(urllib.parse.urlparse(base_url))
    url_parts[2] = path
    url_parts[4] = urllib.parse.urlencode(args_dict)
    return urllib.parse.urlunparse(url_parts)

>>> args = {'arg1': 'value1', 'arg2': 'value2'}
>>> # works with double slash scenario
>>> build_url('http://www.example.com/', '/somepage/index.html', args)

http://www.example.com/somepage/index.html?arg1=value1&arg2=value2

# works without slash
>>> build_url('http://www.example.com', 'somepage/index.html', args)

http://www.example.com/somepage/index.html?arg1=value1&arg2=value2 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-05-12T09:47:32.740

```
import urllib

def make_url(base_url , *res, **params):
    url = base_url
    for r in res:
        url = '{}/{}'.format(url, r)
    if params:
        url = '{}?{}'.format(url, urllib.urlencode(params))
    return url

>>>print make_url('http://example.com', 'user', 'ivan', aloholic='true', age=18)

http://example.com/user/ivan?age=18&aloholic=true 
```

# php - Php / Jquery - 单击并显示 MySQL 数据

> ID：15799708
> 
> 赞同：-1
> 
> 时间：2013-04-03T22:57:45.940
> 
> 标签：php, jquery, mysql, parent

基本上我只是在询问我的想法的最佳方法。所以，我现在拥有的是一个从 MySql 存储我的所有表信息的类，有效地允许我提取数据，例如 ->username ->age。

这是我接下来要实现的目标的模型。

[https://dl.dropbox.com/u/61550675/mockup.png](https://dl.dropbox.com/u/61550675/mockup.png)

当一个人点击一个头像时，我希望信息块 div 与来自该人的 mySql 数据一起向下滑动（容易）（不确定）。因此，它会使用单击的人员数据进行刷新。

最好的方法是什么？我会喜欢一些想法！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:01:58.783

使用 javascript 在元素单击时对服务器进行 ajax 调用，将用户信息加载到 DIV 中，然后将其滑动打开。您可以使用像[jQuery](http://jquery.com)这样的库来完成所有这些工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:06:11.590

1.  注意“*什么是最好的方法*”问题——这些不是建设性的。

2.  您不需要使用 AJAX 调用 - 只需加载用户信息并将其输出到隐藏的 div（例如，使用具有`display: none;`规则的 CSS 类，或者只需编写内联 CSS 属性`<div style="display: none;">CONTENT</div>`）

3.  在`mouseover`or之后`click`（这是您的选择，但`mouseover`我猜更好）只显示隐藏的 div。
4.  在`mouseout`（或另一个`click`）上再次隐藏该 div 。
5.  为此使用`slideDown()`+`slideUp()`或简单的`show()`+`hide()`函数（甚至`fadeIn()`+ `fadeOut()`）。

* 函数调用来自`jQuery`框架...

应该够了。

**编辑：** 为了长期和（页面加载）加速目的，正如**BotskoNet 所**建议的那样，使用 AJAX将是一个更好的解决方案。出于这个原因，在检索用户及其头像时 -`SELECT`只有一个具体的列，这意味着，如果您需要`avatar`, `name`, `surname`, `user_id`，请执行以下操作：

```
SELECT `avatar`, `name`, `surname`, `user_id` FROM `users` ORDER BY `name`, `surname` ASC 
```

**不要做**

```
SELECT * FROM `users` 
```

由于这种类型的查询会加载不必要的信息，因此需要更多资源（线性取决于用户数量）。

然后将在 AJAX 请求之后检索剩余的信息，例如：

```
SELECT `short_bio`, `rating`, `country`, `website` FROM `uesers` WHERE `user_id` = <USER_ID FROM POST/GET> 
```

那应该没问题。

# java - Java：超类对象上子类的受保护访问限制

> ID：15799709
> 
> 赞同：13
> 
> 时间：2013-04-03T22:57:46.873
> 
> 标签：java

我知道这个论坛之前已经问过这个问题，但我会再问一次，因为我没有看到任何好的答案（到目前为止）。

它是这样的：

```
package a;
public class A{
    protected int a;
}

package b;
public class B extends A{
}

package c;
public class C extends B｛
    public void accessField(){
        A ancient = new A();
        ancient.a = 2;  //A - That wouldn't work.

        a = 2;   //B - That works.
    }

｝ 
```

为什么条款 A) 不起作用？在子类 C 中限制超类对象古代访问的原因是什么？
谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T23:01:51.110

受保护的成员只有通过继承才能在同一个包之外访问——即在层次结构中。

因此，当您从不同的包创建 A 的另一个实例时，这不是继承关系，因此会失败。

与往常一样，这在 JLS 6.6.2 中有所介绍：

> 对象的受保护成员或构造函数可以从包外部访问，在该包中，仅由负责实现该对象的代码声明它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T23:22:51.760

实际上，您不需要两个级别的继承，下面的代码将导致相同的行为：

```
public class B extends A{
     public void accessField() {
        A ancient = new A();
        ancient.a = 2;  //A - That wouldn't work.

        a = 2;   //B - That works.
    }
} 
```

工作的原因`a = 2`是[JLS 6.2.2.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.2.1)：

> 令 C 为声明受保护成员的类。只有在 C 的子类 S 的主体内才允许访问。

请注意，它没有说*直接*子类，而只是说子类。所以`a = 2`在`B`班级或`C`班级内工作。

另一方面，`ancient.a = 2;`由同一部分中的下一个要点介绍：

> 如果通过限定名称 Q.Id 进行访问，其中 Q 是 ExpressionName，则当且仅当表达式 Q 的类型是 S 或 S 的子类时才允许访问。

在您的情况下，`Q.Id`is `ancient.a`=> 只有在 is 的`ancient`类型`B`或`B`. 例如，这将编译：

```
public class B extends A{
     public void accessField() {
        C ancient = new C();
        ancient.a = 2;  //A - That wouldn't work.
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T23:17:36.680

引用《Java 编程语言 3 版》一书。由 Gosling 等人撰写 - 第 81 页 sec 3.5

**“受保护的真正含义”** - .. 除了可在类本身中访问以及在同一包中进行代码之外，还可以通过与类*至少具有相同类型的*对象引用从类中访问受保护的成员- 即类的类型或其子类之一的引用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T23:31:40.467

引用[JLS 6.6.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.2)

*对象的受保护成员或构造函数可以从包外部访问，在该包中，仅由负责实现该对象的代码声明它。*

当你说，

```
A ancient = new A();
ancient.a = 2; 
```

您没有从古代（A 对象）继承任何东西，因此不对其实现负责。通过使*C 扩展 A*，您已经从不同的 A 对象继承了“a”，因此下面的语句有效。

```
a = 2; 
```

如果，

```
ancient.a = 2; 
```

有效，那么公共和私有访问说明符之间没有区别。

# php - 当我使用密码时，用户 'myuser'@'localhost' 的访问被拒绝（使用密码：否）

> ID：15799711
> 
> 赞同：1
> 
> 时间：2013-04-03T22:57:47.490
> 
> 标签：php, mysql, mysql-connect

这是我的代码，在远程服务器上：

```
$username = 'myuser';
$password = 'password';
mysql_connect('localhost', $username, $password) or die ('blah blah blah'); 
```

**偶尔**，它会给我这个错误：

> 用户'myuser'@'localhost'的访问被拒绝（使用密码：否）

此错误持续约**6 分钟**，然后消失

为什么会这样？我该如何解决？

PS：请不要担心我使用`mysql_*`. 我也是用mysqli的，问题也出现了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:33:37.317

因为，您收到的错误是

> 用户'myuser'@'localhost'的访问被拒绝（使用密码：否）

并不是

> 等等等等等等

`die ('blah blah blah');`如分段中所定义；该错误不是因为您连接到 MySQL 服务器。

这很可能是因为用户**myuser**不必`PRIVILEGES`执行您要求它执行的任务（可能是`DELETE`，可能是，`UPDATE`甚至可能是`SELECT`）

# mysql - 如何在 Play Framework 2.0 中为生产和测试设置时区为 UTC？

> ID：15799713
> 
> 赞同：3
> 
> 时间：2013-04-03T22:58:08.093
> 
> 标签：mysql, timezone, playframework-2.0

我们希望我们的 Play Framework 2.0 Scala 应用程序能够以 UTC 格式处理应用程序服务器和 MySQL 数据库服务器中的所有日期和时间信息。

诀窍是：

*   无需改变部署环境
*   无需更改 CI（测试）环境
*   不改变本地（开发）环境

是否有标准的最佳实践来做到这一点？我们希望测试在 UTC 中运行，而不必传递`-Duser.timezone=GMT`所有命令行。使用`play start`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T22:58:08.093

这比我们预期的要容易。

首先，在 中，使用[另一个 StackOverflow 问题中描述](https://stackoverflow.com/questions/10488529/gettimestamp-does-timezone-converstion-twice-in-mysql-jdbc-connector)`application.conf`的参数配置 JDBC URL ：

```
# Set MySQL Connector/J to use UTC server connection and time conversions
#   see https://stackoverflow.com/questions/10488529/gettimestamp-does-timezone-converstion-twice-in-mysql-jdbc-connector
db.default.url="jdbc:mysql://localhost/database?useGmtMillisForDatetimes=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&useTimezone=true&serverTimezone=UTC" 
```

二、在 中`Build.scala`，设置Java系统属性和默认值：

```
// Setting this property here forces the JVM to run in UTC time, 
// both for test (`play test`) and development (`play start`) modes, 
// but not for production (`play dist`).
System.setProperty("user.timezone", "GMT")
TimeZone.setDefault(TimeZone.getTimeZone("GMT")) 
```

这两个更改将同时处理**测试**（`play test`）和**开发**（`play start`）模式。

对于**生产**( `play dist`)，仍然必须在启动前设置属性。例如，通过：

1.  编辑生成的`start`脚本以添加`export _JAVA_OPTIONS=-Duser.timezone=GMT`
2.  调用`start`脚本`-Duser.timezone=GMT`
3.  调用后在现有 JVM 中启动`System.setProperty("user.timezone", "GMT")`

# ruby-on-rails - 嵌套属性的 ActiveModel::MassAssignmentSecurity::Error

> ID：15799720
> 
> 赞同：0
> 
> 时间：2013-04-03T22:58:26.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

嗨，我试图在我的 Rails 应用程序中创建一对多的关系。

拳头我创建我的模型

```
class Produto < ActiveRecord::Base
  attr_accessible :compra, :descricao, :estoque, :venda

  has_many :precos
  accepts_nested_attributes_for :precos
end

class Preco < ActiveRecord::Base
  attr_accessible :compra_decimal, :produto_id, :venda_decimal

  belongs_to :produto
end 
```

然后我创建了我的控制器

```
class ProdutosController < ApplicationController
  def new
    @produto = Produto.new
    @produto.precos.build
  end

  def create
    @produto = Produto.new(params[:produto])

    if @produto.save?
        redirect_to produtos_path
    end
  end
end 
```

在此之后，我创建了我的 .html.erb 页面：

**_形式**

```
<%= form_for @produto do |f| %>
 <p>
    <%= f.label :descricao %><br/>
    <%= f.text_field :descricao %>
 </p>
 <p>
    <%= f.label :compra %><br/>
    <%= f.text_field :compra %>
 </p>
 <p>
    <%= f.label :venda %><br/>
    <%= f.text_field :venda %>
 </p>
 <p>
    <%= f.label :estoque %><br/>
    <%= f.text_field :estoque %>
 </p>
<%= f.fields_for :precos do |builder| %>
 <%= render "precos", :f => builder %>
<% end %>
 <p><%= f.submit %></p>
<% end %> 
```

**_precos**

```
<p>
    <%= f.label :venda_decimal %><br/>
    <%= f.text_field :venda_decimal %>
</p>
<p>
    <%= f.label :compra_decimal %><br/>
    <%= f.text_field :compra_decimal %>
</p> 
```

**新的**

```
<%= render "form" %> 
```

然后，当我提交表单时出现此错误：

```
ActiveModel::MassAssignmentSecurity::Error in ProdutosController#create

Can't mass-assign protected attributes: precos_attributes 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:01:37.313

只需更改您的模型：

```
class Produto < ActiveRecord::Base
  attr_accessible :compra, :descricao, :estoque, :venda, :precos_attributes

  has_many :precos
  accepts_nested_attributes_for :precos
end 
```

# java - 能够从不同的类访问文本区域

> ID：15799721
> 
> 赞同：3
> 
> 时间：2013-04-03T22:58:31.823
> 
> 标签：java, swing, class, function

我如何能够从我的 main() 运行此函数来构建 gui，然后使用其他地方的代码来处理按钮单击并从文本字段中检索输入？

```
package main;

import javax.swing.*;
import java.awt.*;

public class Gui {

public static void mainGUI() {
    UIManager.put("swing.boldMetal", Boolean.FALSE);
    java.net.URL imgApp = ClassLoader.getSystemResource("res/app.png");
    JFrame mainWin = new JFrame("jIRC");
    mainWin.setSize(1024, 720);
    mainWin.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainWin.setIconImage(new ImageIcon(imgApp).getImage());

    Container panel = mainWin.getContentPane();
    panel.setLayout(null);

    JTextArea inputBox = new JTextArea();
    inputBox.setSize(300, 100);
    inputBox.setLocation(500, 250);

    JButton sendButton = new JButton();
    sendButton.setText("Send");
    sendButton.setFont(new Font("Helvetica", Font.ITALIC, 16));
    sendButton.setSize(72, 32);
    sendButton.setLocation(500, 500);

    panel.add(inputBox);
    panel.add(sendButton);
    mainWin.setVisible(true);
}
} 
```

这是我的主要功能课程：

```
public class Run{

public static void main(String[] args) {

    main.Debug.startupDebug();
    main.Gui.mainGUI();
}
} 
```

我将如何将我的一些代码放在非静态字段中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T23:04:20.980

您已经将所有内容都放在了静态方法中，这将不允许您使用任何面向对象编程的强大功能。考虑创建符合 OOP 的类非静态字段和方法以及公共 getter 和 setter 方法，这样其他类可以影响此类的行为。

**编辑**
您发布：

```
public class Run{ 
  public static void main(String[] args) { 
    main.Debug.startupDebug(); 
    main.Gui.mainGUI(); 
  } 
} 
```

但是您需要做的是：

```
public class Run{ 
  public static void main(String[] args) { 
    GUI gui = new GUI();
    Debug debug = new Debug();

     debug.setGui(gui);
     gui.setDebug(debug);

     gui.startGui();
  } 
} 
```

或类似的东西。再次避免使用静态的任何东西。

# php - 填充 CI 的下拉列表时出错 (form_helper)

> ID：15799728
> 
> 赞同：0
> 
> 时间：2013-04-03T22:59:35.010
> 
> 标签：php, arrays, codeigniter

这是我尝试填充 CI 的下拉列表（使用 from 助手）：

```
foreach ($freetables as $t) :
    $tableNo          = $t['tableNo'];                  
    $tableDescription = $t['description1'];

    $data=array($tableNo=>$tableDescription1);
endforeach;

print_r($data);

//echo form_dropdown('table',$data,$this->session->userData('queueNo'));
echo form_dropdown('table',$data); 
```

但是我只能看到下拉列表中的最后一项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:43:45.510

数组在`$data`每次迭代时都被覆盖，这里：`$data=array($tableNo=>$tableDescription1);`

该解决方案假设`tableno`是唯一的，并且*value*属性是作为对应选项的`tableno`with 。`description1`（并且它避免了覆盖问题！）。

```
foreach ($freetables as $t)
{
    $data[$t['tableNo']] = $t['description1'];
}

echo form_dropdown('table', $data); 
```

# xaml - CompositionTarget.Rendering 不喜欢我在 XAML 中的事件处理程序

> ID：15799730
> 
> 赞同：0
> 
> 时间：2013-04-03T22:59:40.217
> 
> 标签：xaml, windows-store-apps

我正在将 Windows Phone 7 应用程序转换为 Windows 应用商店，因此我将转向 Xaml。我有一种方法可以在某个时间点运行以更新屏幕上的数据。它为 CompositionTarget.Rendering 事件分配或删除事件处理程序委托。我得到的消息是“OnCompositionTargetRendering”没有重载匹配委托“System.EventHandler”

这是我所拥有的：

```
 private void CheckCompleted()
    {
        Color completeColor;
        if (this.DecryptedText.ToString().ToUpper() == this.ThisPuzzle.QuoteText.ToUpper())
        {
            // We're done!!!                ...
            CompositionTarget.Rendering -= this.OnCompositionTargetRendering;// new EventHandler(this.OnCompositionTargetRendering);
            ...
        }
        else
        {
            ...
            CompositionTarget.Rendering += this.OnCompositionTargetRendering;// new EventHandler(this.OnCompositionTargetRendering);
            ...
        }
    }

    protected void OnCompositionTargetRendering(object sender, EventArgs args)
    {
        this.DisplayTime();
        if (ThisPuzzle != null)
        {
            foreach (UIElement thisElement in Letters.Children)
            {
                ...
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:50:51.717

如果您检查文档`CompositionTarget.Rendering`是[Windows 应用商店应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.compositiontarget.rendering.aspx)`EventHandler<object>`中的类型，而不是[Silverlight](http://msdn.microsoft.com/en-us/library/system.windows.media.compositiontarget.rendering%28v=vs.95%29.aspx)中的类型。`EventHandler`

这意味着您需要将事件处理程序的签名相应地更改为：

```
protected void OnCompositionTargetRendering(object sender, object args) 
```

# django - Django 查询结果是 NoneType？

> ID：15799737
> 
> 赞同：0
> 
> 时间：2013-04-03T23:00:20.053
> 
> 标签：django, python-3.x, django-views

我有这样的查询：

```
blah = Blah.objects.filter(foo=title) 
```

它工作正常，所以我可以在模板中使用结果。但是，我需要将其中的一个值从整数更改为 timedelta，以便在模板输出中显示时间。在执行此操作时遇到困难，我想知道为什么键入结果是 & 发现`type(blah)`，告诉我它是一个 NoneType，即使它实际上具有可用的值。这非常令人费解，我在 Django 文档中找不到任何关于此的内容。

我尝试使用`blah['length']`, 来获取我的特定整数，但这没有用。所以看起来类型不是字典、集合或列表。

**那么，Django 查询结果是什么类型，为什么它告诉我它是 NoneType 即使它不是？**

我真的在这个问题上摸不着头脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:13:23.303

Django 查询集有它们自己的类型。他们的想法是检索对象集，并为此提供 Django 的公共查询集 API ( [docs](https://docs.djangoproject.com/en/dev/ref/models/querysets/) )。因此，更改任何查询集属性可能不是一个好主意，因为不能保证未来的 Django 版本将具有相同的属性。但是，您可以更改它们返回的模型实例的属性：

```
qs = FooModel.objects.all()
for model in qs:
    model.attr = 'foo' 
```

因此，在您的情况下，您可以执行以下操作：

```
# assuming you allow your integer field to be null
class FooModel(models.Model):
    time = models.IntegerField(null=True)

qs = FooModel.objects.all()
for model in qs:
    # handle case when time is null - model.time will be None
    t = model.time or 90
    model.time = timedelta(seconds=t) 
```

但是，如果您只需要检索一个对象（模型实例），那么您可能应该使用`get`queryset 方法而不是`filter`：

```
foo = FooModel.objects.get(...)
foo.time = timedelta(seconds=foo.time) 
```

# xml - 尝试将无效 XML 加载到 XDocument 时，为什么 TFS 2012 构建代理会崩溃？

> ID：15799744
> 
> 赞同：1
> 
> 时间：2013-04-03T23:01:06.780
> 
> 标签：xml

在解析 MSTest 结果 (.TRX) 文件时发现了这个问题：我们有一些将字符输出到标准输出的单元测试。MSTest 将此输出存储`<stdout>`在 TRX 文件中的节点中。在这个 TRX 文件上调用 XDocument.Load() 应该抛出，因为这些字符对于 XML 文档是无效的。相反，这会触发 TFS 构建代理崩溃。

使用默认 TFS 2012 工作流“DefaultTemplate.11.1.xaml”，在“TryToCompiletheProject”部分，添加对执行此操作的代码活动的调用：

```
protected override void Execute(CodeActivityContext context)
{
    string xmlText = @"<stdout>... &#x1D; ...</stdout>";
    XDocument doc = XDocument.Parse(xmlText);
} 
```

在这个工作流的这个区域中，有一个 try/catch 应该捕获异常、记录异常消息并停止构建。相反，这会使 TFS 构建代理崩溃。

在 Windows 事件日志中注意到：

```
The build machine will be stopped because an unhandled exception was thrown.
Type: System.ArgumentException
Message: '', hexadecimal value 0x1D, is an invalid character.
Stack Trace:    at System.Xml.XmlUtf8RawTextWriter.InvalidXmlChar(Int32 ch, Byte* pDst, Boolean entitize)
   at System.Xml.XmlUtf8RawTextWriter.WriteAttributeTextBlock(Char* pSrc, Char* pSrcEnd)
   at System.Xml.XmlUtf8RawTextWriter.WriteString(String text)
   at System.Xml.XmlWellFormedWriter.WriteString(String text)
   at System.Xml.XmlWriter.WriteAttributeString(String localName, String value)
   at Microsoft.TeamFoundation.Build.Workflow.Tracking.BuildInformationNode.ToXml(XmlWriter writer)
   at Microsoft.TeamFoundation.Build.Workflow.Tracking.FileTrackingParticipant.FlushToFile(IList`1 nodesToSave, String file) 
```

为了避免这种崩溃，我捕获了生成的异常并抛出了一个信息较少的新异常。我不喜欢这样做（松散的堆栈跟踪到问题的实际来源，无法显示原始异常消息），并且更愿意学习另一种记录原始异常信息的方法。并避免使 TFS 构建代理崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:22:09.327

试试这个（未经测试）：

```
protected override void Execute(CodeActivityContext context)
{
    try {
        string xmlText = @"<stdout>... &#x1D; ...</stdout>";
        XDocument doc = XDocument.Parse(xmlText);
    } catch (Exception ex) {
        throw new Exception("Can't parse XML Document", ex);
    }
} 
```

如果这仍然使构建过程崩溃（可能 ex.Message 字符串包含错误的 XML），那么向 Microsoft 提交错误

# c# - 引用的javascript中的剃刀语法

> ID：15799747
> 
> 赞同：3
> 
> 时间：2013-04-03T23:01:28.140
> 
> 标签：c#, javascript, razor

如何转义我的 javascript，以便执行以下操作？

这是一个例子：

它不输出“Month1”、“Month2”等，而是实际输出“Month@i”。

```
 @for (int i = 0; i < 12; i++)
       { 
           <text>
           {
               field: 'Month@i',
               title: ,
               width: 10
           },
           </text>
       } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:04:05.730

您可以在 for 循环的顶部格式化字段名称：

```
for (int i = 0; i < 12; i++)
{ 
    var field = string.Format("Month{0}", i);
    <text>
    {
       field: '@field',
       title: ,
       width: 10
    },
    </text>
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T23:05:31.113

主要问题是 Month@i 被错误地解释为电子邮件地址，因此您需要使用显式表达式 @(...) 来告诉 Razor 这是一个代码表达式。这是最好的解决方案：

```
@for (int i = 0; i < 12; i++)
{ 
    <text>
    {
        field: 'Month@(i):',
        title: ,
        width: 10
    },
    </text>
} 
```

# bash - Shell 脚本中的 grep

> ID：15799756
> 
> 赞同：0
> 
> 时间：2013-04-03T23:01:49.207
> 
> 标签：bash, shell, grep

我正在尝试编写一个 shell 脚本，允许我登录到远程计算机以查看哪些用户正在运行 vtwm 进程超过 14 天。这是我到目前为止所写的。

有两个问题

1.  此活动进程可能有多个用户。如何将它们全部保存在变量中？

2.  如何确定哪个登录时间超过 14 天？

以下代码是在假设只有一个用户具有活动 vtwm 进程的情况下编写的。但它不起作用，因为 grep 命令无法识别变量 $u。所以我永远无法获得用户登录的日期。由于 grep 的问题，我无法让 mth1 和 day1 工作。

```
u=$(ssh host "w | grep vtwm | cut -d' ' -f1")
echo "USER:"$u
if [ -n "$u" ] then           
mth1=$(who | grep -i $u | cut -d' ' -f10 | cut -d'-' -f2)
mth2=$(date +"%m")
day1=$(who | grep -i $u | cut -d' ' -f10 | cut -d"-" -f2)
day2=$(date +"%d")
if [ $mth1==$mth2 ] then
#do something
elif[ $mth1!=$mth2 ] then
#do something
fi
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:04:30.147

假设所有这些环境都是Linux（你没有提到），下面的代码也许可以帮助你。

*   为了确定过程的年龄，我使用了`ps -o etime, user, cmd`
*   该脚本接收 2 个参数、天数限制和要搜索的过程
*   ps 显示所有进程，无论是否分配了 TTY...
    如果您需要使用 TTY 限制进程，请删除`x`=>`ps a -o ...`
*   根据您的环境调整 ssh 命令。

示例如何调用此脚本：`bash ./mytest.sh 5 bash`，将显示**+5 天的****bash**会话。

 **```
# mytest.sh
#--debug-only--# set -xv

[ $# -ne 2 ] && echo "please inform : <#of_days> <regexp>" && exit 1
# receive the # of days
vLimit=$1
# name of proc to search
vProc=$2

vTmp1=/tmp/tmp.myscript.$$

# With this trap , the temp file will be erased at any situation, when
# the script finish sucessufully or interrupted (kill, ctrl-c, ...)
trap "rm $vTmp1 2>/dev/null ; exit" 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15

# ps manpage :
# etime       ELAPSED   elapsed time since the process was started, in the form [[DD-]hh:]mm:ss.

ssh cinacio@jdivm04 "ps ax -o etime,user,command | grep -i '$vProc' "  >$vTmp1
while read etime user cmd
do

  # if not found the dash "-" on etime, ignore the process, start today...
  ! echo "$etime" | grep -q -- "-" && continue
  vDays=$(echo "$etime" | cut -f1 -d-)
  [ -z "$vDays" ]  && continue
  if [ $vDays -ge $vLimit ]; then
    echo "The user $user still running the proc $cmd on the last $vDays days...."
  fi
done < $vTmp1

#--debug-only--# cat $vTmp1 
```**

# iphone - Cocos2D 中没有 CCLOG 代码将无法运行

> ID：15799758
> 
> 赞同：0
> 
> 时间：2013-04-03T23:01:55.633
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我目前正在开发一款将为玩家随机生成地牢的游戏。这是由从不同文件调用的一大堆不同方法组成的。我似乎让代码能够计算出门的另一侧有多少可用空间。

但是有一个问题。该代码似乎仅在我使用 CCLOG 输出到控制台时才有效。我在没有测试的情况下编写了一大段代码，然后决定逐步完成它以查看代码是如何工作的（我想我会让它在没有错误的情况下运行，接下来我将检查我的值）。

在我确定代码已成功检查每个方向的可用空间并列出它检查过的位置后，我决定要删除 CCLOG 输出。不幸的是，这样做会导致代码停止工作。

```
//First check "forward"
bottom = CGPointMake(startLocation.x + forwardDirectionModifier.x, startLocation.y + forwardDirectionModifier.y);

top = bottom;

do
{
    currentLocation = CGPointMake(top.x + forwardDirectionModifier.x, top.y + forwardDirectionModifier.y);
    tileType = [tileCache getTileType:currentLocation];
    if (tileType == TileTypeFiller)
    {
        top = currentLocation;
        CCLOG(@"Top location is %@", NSStringFromCGPoint(top));
    }

} while (tileType == TileTypeFiller || top.y != 63); 
```

这是代码中的一小段；这是我认为最有可能出现问题的代码部分。本质上的问题是，如果我注释掉或删除该行`CCLOG(@"Top location is %@", NSStringFromCGPoint(top));`，它将停止工作。

以下是更多细节：

*   我有好几小块这样的代码，只要我CCLOG在每一个，它就能移动到下一个。如果我要注释掉其中的任何一个，它将停止进入下一个块。
*   我可以更改 CCLOG 以输出任何内容，它仍然可以工作，它必须在那里。
*   我试过清理项目。
*   还有更多的 CCLOG 没有在任何循环中使用，它们可以被删除而不会产生任何后果。

有人对此有解决方案吗？据我所知，无论我是否将某些内容输出到控制台，它都不应该影响代码是否会执行。

提前致谢。

**编辑：**在 Ben Trengrove 的建议下，我正在添加更多使用 CCLOG 的示例。

此代码紧跟前面列出的代码。

```
//Check left relative to door
farLeft = CGPointMake(startLocation.x + leftDirectionModifier.x, startLocation.y + leftDirectionModifier.y);

do
{
    currentLocation = CGPointMake(farLeft.x + leftDirectionModifier.x, farLeft.y + leftDirectionModifier.y);
    tileType = [tileCache getTileType:currentLocation];
    if (tileType == TileTypeFiller)
    {
        farLeft = currentLocation;
        CCLOG(@"Far Left location is %@", NSStringFromCGPoint(farLeft));
    }

} while (tileType == TileTypeFiller || farLeft.x !=0);

//Check forwards from far left
top2 = farLeft;

do
{
    currentLocation = CGPointMake(top2.x + forwardDirectionModifier.x, top2.y + forwardDirectionModifier.y);
    tileType = [tileCache getTileType:currentLocation];
    if (tileType == TileTypeFiller)
    {
        top2 = currentLocation;
        CCLOG(@"Top2 location is %@", NSStringFromCGPoint(top2));
    }

} while ((tileType == TileTypeFiller)|| (top2.y != 63)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:30:19.693

当 currentLocation 没有切片时，您的切片缓存会以 tileType 的形式返回什么？TileTypeFiller 有没有机会？如果是的话，在适当的情况下，你几乎可以肯定那里有一个永无止境的循环......

编辑 ：

请在循环后添加一行

```
CCLOG(@""); 
```

并在该行上放置一个断点。看看程序是否停在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:56:27.580

所以问题现在已经解决了，看来我的逻辑有一部分是错误的。这是我现在所做的工作：

```
do
{
    currentLocation = CGPointMake(top.x + forwardDirectionModifier.x, top.y + forwardDirectionModifier.y);
    tileType = [tileCache getTileType:currentLocation];
    if (tileType == TileTypeFiller)
    {
        top = currentLocation;
    }
    locationCount++;

} while ((tileType == TileTypeFiller) && (locationCount != 15));
CCLOG(@"Top location is %@", NSStringFromCGPoint(top)); 
```

变化是我已经切换到 AND 而不是 OR。我还更改了第二部分，因为我意识到由于我的最大房间大小，我不需要在任何给定方向检查超过 15 个位置。

非常感谢所有帮助过的人。我仍然不完全确定 CCLOG 的使用如何能够以某种方式帮助克服逻辑错误，但至少它现在正在工作。

# scala - 如何从 java 方法中推断类型

> ID：15799762
> 
> 赞同：1
> 
> 时间：2013-04-03T23:02:12.167
> 
> 标签：scala, type-inference

我试图通过围绕它编写一个包装器来使用 Scala 中的外部 Java 服务 API。每个 API 调用都有一个 Request 类和 Response 类，以及一个在底层 java 客户端中设置调用的工厂方法，即

```
val caller = serviceClient.newDoSomething()
val request = DoSomethingRequest(...)

val response = caller.call(request) 
```

其中 response 的类型为`DoSomethingResponse`。

这种模式重复了一堆不同的操作，只是在请求/响应类和工厂方法的名称上有所不同。我想干掉代码并使用类型推断，同时注意到 java 方法的关键观察

`caller.call`是类型`Request => Response`。

鉴于我尝试了以下操作：

```
class ServiceAPI {
    val client = Service.getDefaultClient

    def serviceCall[Req, Resp](auth: String, caller: Req => Resp)
                              (func: Req => Unit)(implicit m:Manifest[Req]):Resp = {

        val request = m.erasure.newInstance.asInstanceOf[Req]
        request.setAuth(auth)

        func(request)

        caller(request)
    }
} 
```

我最终想要的是一个可消耗的 scala API，可以像这样调用：

```
serviceCall(myAuth, client.newEventCall.call(_)) {
    _.setFoo("foo") // On request
    _.setBar(2) // On request
} 
```

我希望通过提供部分函数`client.newEventCall.call(_)`Scala 能够完全推断`Req`并`Resp`从中推断，然后正确调用其余部分。

但是，这失败了：

```
error: missing parameter type for expanded function ((x$4) => client.newEventCall.call(x$4)) 
```

显然我可以通过以下方式手动提供类型：

```
serviceCall(myAuth, client.newEventCall.call(_:EventRequest)) { ... } 
```

但我想避免这种情况。有任何想法吗？

如果这可以进一步简化，也可以加分。

# python - 为我的宠物 Python 从 Eclipse 迁移到 Vim

> ID：15799768
> 
> 赞同：2
> 
> 时间：2013-04-03T23:02:38.503
> 
> 标签：python, eclipse, vim, plugins

我是一名经历过早中期编码危机的程序员。我是在 Elipse 上长大的，就像我学习 java 一样学习它。当我不得不学习 CI 时，我又回到了它，因为它的代码完成、调试器和可理解的界面就像一个旧的安全毯，而学校希望我们使用一种极其缓慢和无情的淡化形式的 emacs。但是现在我的 IDE 的旧二手福特环面出现了故障。几乎所有东西都很慢，而且它的代码完成在 python 中并不是那么好。所以我认为是时候把老女孩放在棚子里，挑选一个新的时尚、快速的 Miata 来接受代码了。我听说 Vim 很不错，而且它装在敞篷车里，总是很棒。但是我很昏暗，害怕新事物，所以除了vim网站上给定的教程之外，有没有关于python的好教程，我的眼睛在走，所以照片很好看。我还听说 Vim 很棒，因为它的所有插件。那么对于 python 有什么好的，比如 eclipse，我想要智能代码完成、智能错误检查（像 eclipse 一样的红色曲线）和一个调试器，虽然不是必须的，但很高兴拥有，也许还有红色的东西赛车条纹。此外，我不认为使用鼠标是一件坏事，或者可能还没有，所以任何插件或提示也会很好。

# html - 需要将 div 拉伸到用户浏览器窗口的高度

> ID：15799769
> 
> 赞同：0
> 
> 时间：2013-04-03T23:02:41.903
> 
> 标签：html, css

新手又来了，我很确定我曾经知道这一点，但我不再记得了。

这是我的小提琴 [http://jsfiddle.net/rachelcat/PHG6U/](http://jsfiddle.net/rachelcat/PHG6U/)

显然这不是我使用的字体，但让我们来处理它。

```
height: 100% 
```

^ 我试过这个，它让一切都消失了。

我知道我将线条设置为 800 像素，这就是它们停止的原因，但是如果没有使它们像“4000 像素”高度，我将如何使它始终更正浏览器大小？（无论大小如何）向下滚动时不一定有额外的 1000 像素？

我认为这有一个简单的答案，我真的很愚蠢。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:11:00.547

将父元素的高度以及边线 div设置[为 100% 。](http://jsfiddle.net/PHG6U/23/)使用百分比时，元素的高度是相对于生成框的包含块的高度计算的。

```
html { 
    background: #FFFDDB;
    margin:0px 0px 0px 0px;
    padding:0px 0px 0px 0px;
    height: 100%;
}

body {
    font-family: 'Pompiere', cursive;
    margin:0px 0px 0px 0px;
    padding:0px 0px 0px 0px;
    height: 100%;
} 
```

# css - 为什么 IE9 媒体查询直到页面接近 20px 范围内才会响应？

> ID：15799770
> 
> 赞同：0
> 
> 时间：2013-04-03T23:02:52.787
> 
> 标签：css, internet-explorer-9, media-queries

我的媒体查询在所有接受 MQ 的浏览器中都能正常工作。但是，在 IE9 中，直到我在查询范围内才会响应。例如，我的 959 - 768 在我进入 942 像素之前不会响应。在 959 和 941 之间，我有一个水平滚动条。

我研究了填充和边距，但这似乎不是问题（可能是错误的）。任何人都知道导致此问题的任何 IE 错误或之前已经看到并解决了该问题吗？

多谢你们！

- - 编辑 - -

需要明确的是，这似乎发生在每个断点上，而不仅仅是 959

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:03:43.100

我找不到答案，最后用条件样式表隐藏了 IE9 上的溢出。请注意，这几乎不是一个好的解决方案，但我时间紧迫，这是不得已而为之。

# google-maps - jquery mobile google maps 客户端当前位置

> ID：15799777
> 
> 赞同：1
> 
> 时间：2013-04-03T23:03:12.287
> 
> 标签：google-maps, jquery-mobile

我正在使用带有 jquery mobile 的谷歌地图我想添加用户当前位置。我正在使用谷歌地图。显示当前位置是谷歌地图属性，但在我的项目中（[这是我的项目链接](http://teknonova.com/Map/Home/Index1)：）我看不到显示当前位置图标我应该怎么办？

你可以看到在谷歌地图中显示我的位置图标：[在这里](https://maps.google.com/)

# java - Gdx.files 无法解析为类型

> ID：15799783
> 
> 赞同：0
> 
> 时间：2013-04-03T23:03:51.887
> 
> 标签：java, eclipse, libgdx

典型`... cannot be resolved to a type`错误。但是，在这种情况下，项目是由 libgdx 创建者设置的，因此所有引用都应该已正确创建。Gdx.jar 位于项目的 Java Build 路径中。Javadoc 说它在 中`com.badlogic.gdx.Gdx`，我已经包含了（eclipse 对此没有问题，但如果我试图包含 `com.badlogic.gdx.Gdx.files 它会反抗）。可能发生了什么？

Java 文档链接 - [http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/Gdx.html](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/Gdx.html)

# asp.net - 刷新大型内容后 Kendo UI 窗口居中

> ID：15799789
> 
> 赞同：4
> 
> 时间：2013-04-03T23:04:31.387
> 
> 标签：asp.net, css, asp.net-mvc, kendo-ui

使用`MVC 4`我添加`blank window`并隐藏它。单击按钮时，我调用此 javascript 来获取内容和`center`窗口：

```
 var win = $("#myWindow").data("kendoWindow");
        win.content("Loading...");
        win.refresh({
            url: "@Url.Action("MyAction", "MyController")",
            data: { userloginid: "AAA" }
        });
        win.center();
        win.open(); 
```

内容是`larger than a default window`这样的`win.center()`计算是关闭的，把窗口放得太低了。

如何根据通过**refresh()**命令获得的内容使窗口**居中。**

 *** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T07:48:53.173

问题似乎是，您将窗口居中，然后过了一段时间，新内容已完成加载。

换句话说：在窗口通过加载的内容获取其新大小之前调用中心。

为了防止这种情况，您应该绑定到窗口的**刷新**事件，并以该事件为中心。

类似的东西（**注意：只注册一次这个事件**）：

```
var win = $("#myWindow").data("kendoWindow");
win.bind("refresh", function() {
    win.center();
    win.open();
}); 
```**

# node.js - nodejs couchapp不链接css文件

> ID：15799791
> 
> 赞同：-1
> 
> 时间：2013-04-03T23:04:55.763
> 
> 标签：node.js, couchdb, couchapp

我已经制作了一个 couchdb 设计文档，它可以在以下 url 上完美运行 `http://localhost:5984/db/_design/app/index.html` 现在的问题是我正在尝试从节点 js 获取页面内容并显示它，但只显示 html 页面链接的 css 和 js 文件不起作用以及何时我试图缩小问题范围我发现css和js文件应该具有couchdb的登录凭据并且没有链接我什至尝试在响应参数中添加auth标头但仍然没有运气

```
var http = require('http');

var json;
var root = new Buffer("admin:pass").toString('base64');
http.createServer(function(req, res) {
res.setHeader('Authorization', root);
res.writeHead(200, { 'Content-Type':'text/html' });
couchPage();
res.end(json);  
}).listen(8080);

function couchPage() {
var options = {
    hostname: 'localhost',
    port: 5984,
    path: '/db/_design/app/index.html',
    auth: 'admin:pass',
    method: 'GET'
};

var req = http.request(options, function(res) {
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
        json = chunk;
    });
});

req.end();
} 
```

谁能指导我我哪里错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:37:54.163

我认为这与 couchdb 授权无关。问题是您没有在 nodejs 服务器上执行任何路由。也就是说，浏览器向 localhost:8080 发出请求，并接收到 /db/_design/app/index.html 的内容作为应答。现在，浏览器检测到样式表的链接，比如“style.css”。它向 localhost:8080/style.css 执行请求，但您的 nodejs 服务器只是忽略了请求的“style.css”部分。相反，客户端将再次收到 /db/_design/app/index.html 的内容！

如果要通过 nodejs 提供设计文档的附件，则必须先解析请求，然后从 couchdb 中检索相应的文档。但是，我认为您实际上并不想这样做。要么您想在 nodejs 后面以传统方式使用 couchdb（不能从客户端直接访问），然后您只需将其用作数据库，并将您的 html（或模板）文件存储在磁盘上。或者您想直接向客户端公开 couchdb 并让 nodejs 通过 couchdb _changes 提要监听事件。

# asp.net-mvc - Asp.net MVC Exception logging 只获取页面异常

> ID：15799792
> 
> 赞同：0
> 
> 时间：2013-04-03T23:04:57.593
> 
> 标签：asp.net-mvc, nlog

我的 .net MVC 代码中有一个围绕异常的过滤器。它会愉快地记录异常，但几乎总是记录同一异常的变体。

```
Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerWrapper'. (Exception of type 'System.Web.HttpUnhandledException' was thrown.)
   at System.Web.UI.Page.HandleError(Exception e)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest()
   at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context)
   at System.Web.UI.Page.ProcessRequest(HttpContext context)
   at System.Web.Mvc.ViewPage.ProcessRequest(HttpContext context)
   at ASP.views_metric_details_aspx.ProcessRequest(HttpContext context) in c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\25795fa7\3c9cc227\App_Web_0hhowapn.1.cs:line 0
   at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.<>c__DisplayClass1.b__0()
   at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.<>c__DisplayClass4.b__3()
   at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.Wrap[TResult](Func`1 func)
   at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.Wrap(Action action)
   at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.ProcessRequest(HttpContext context)
   at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride) 
```

这是我的过滤器：

```
public void OnException(ExceptionContext context)
    {
        // http://blog.tonysneed.com/2011/10/09/using-nlog-with-dependency-injection/

        var exception = context.Exception;
        string assemblyProp = string.Empty;
        string classProp = string.Empty;
        string methodProp = string.Empty;
        string messageProp = string.Empty;
        string innerMessageProp = string.Empty;

        if (exception != null)
        {
            assemblyProp = exception.Source;
            classProp = exception.TargetSite.DeclaringType.FullName;
            methodProp = exception.TargetSite.Name;
            messageProp = exception.Message;
            object[] parameters = new object[1];

            LogEventInfo logEvent = new LogEventInfo(LogLevel.Error, _logger.Name, null, context.Exception.Message, parameters, context.Exception);

            if (exception.InnerException != null)
            {
                innerMessageProp = exception.InnerException.Message;
                assemblyProp = exception.InnerException.Source;
                classProp = exception.InnerException.TargetSite.DeclaringType.FullName;
                methodProp = exception.InnerException.TargetSite.Name;

                logEvent = new LogEventInfo(LogLevel.Error, _logger.Name, null, exception.InnerException.Message, parameters, exception.InnerException);
            }

            logEvent.Properties["error-source"] = assemblyProp;
            logEvent.Properties["error-class"] = classProp;
            logEvent.Properties["error-method"] = methodProp;
            logEvent.Properties["error-message"] = messageProp;
            logEvent.Properties["inner-error-message"] = innerMessageProp;

            Dictionary<String, object> parent = new Dictionary<string, object>();

            Dictionary<String, String> routeData = new Dictionary<string, string>();

            foreach (string key in context.RouteData.Values.Keys)
            {
                try
                {
                    routeData[key] = context.RouteData.Values[key].ToString();
                }
                catch (System.InvalidCastException)
                {
                    routeData[key] = context.RouteData.Values[key].GetType().ToString();
                }
            }

            parent["route_data"] = routeData;

            Dictionary<String, String> server = new Dictionary<string, string>();
            foreach (string key in HttpContext.Current.Request.ServerVariables.AllKeys)
            {
                if (HttpContext.Current.Request.ServerVariables[key] != null && key != "AUTH_PASSWORD")
                {
                    try
                    {
                        var x = HttpContext.Current.Request.ServerVariables[key].ToString();
                        server[key] = x;
                    }
                    catch (System.InvalidCastException) { }
                }
            }

            parent["server"] = server;

            var cookies = new Dictionary<string, string>();

            foreach (string key in HttpContext.Current.Request.Cookies.AllKeys)
            {
                if (HttpContext.Current.Request.Cookies[key].Value != null && key != "AUTH_PASSWORD")
                {
                    try
                    {
                        var x = HttpContext.Current.Request.Cookies[key].Value.ToString();
                        cookies[key] = x;
                    }
                    catch (System.InvalidCastException) { }
                }

            }
            parent["cookies"] = cookies;
            logEvent.Properties["variables"] = JsonConvert.SerializeObject(parent);

            _logger.Log(logEvent);

            HttpContext.Current.ClearError();
            HttpContext.Current.Response.TrySkipIisCustomErrors = true;

        }
        else
        {
            _logger.Error(context.Exception);
        }
    } 
```

我不确定如何从中获得更有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:22:07.760

创建一个基本控制器并使用基本控制器派生所有控制器。在基本控制器下定义以下代码

```
protected override void OnException(ExceptionContext filterContext)
    {
        if (filterContext.Exception == null)
            return;

       .........................
       .........................
        base.OnException(filterContext);
    } 
```

# iphone - 为我的 iPhone 应用程序使用谷歌分析？

> ID：15799797
> 
> 赞同：0
> 
> 时间：2013-04-03T23:05:29.393
> 
> 标签：iphone, google-analytics

我有一个本机 iPhone 应用程序，它实际上只是 Web 应用程序的 UIWebView。我计划在网络应用程序中包含谷歌网络分析，以跟踪移动应用程序用户如何使用该应用程序。

您可以看到这有什么问题吗？当然我不会得到崩溃数据，但我只是在寻找 UU 的数量、页面浏览量和页面外点击次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:27:58.920

谷歌分析网络应该做得很好。问题是如果您的应用程序只是一个 UIWebView，它可能会被 Apple 拒绝。

# c++ - 在 Gentoo 下使用 Interix 构建的库可以在 Gentoo 之外工作吗？

> ID：15799799
> 
> 赞同：1
> 
> 时间：2013-04-03T23:05:39.673
> 
> 标签：c++, dependencies, runtime, gentoo, interix

Gentoo Linux 发行版有一个适用于 Interix x86 Windows 的版本。如果我使用 gcc 构建 C++ 库，这些库是否可以与不是在 Gentoo 中构建但仅在 Interix 中构建的可执行文件一起使用？我是否为运行时创建了对任何 Gentoo 安装的依赖项，或者 Interix 是此类库的唯一依赖项，因此在编译时使用它不会创建运行时依赖项？

# python - Python 模块和对象名称冲突

> ID：15799800
> 
> 赞同：12
> 
> 时间：2013-04-03T23:05:45.500
> 
> 标签：python, naming-conventions, name-clash

请考虑以下 Python 模块摘录：

foo.py：

```
class Foo:
  (...) 
```

酒吧.py：

```
import foo

foo = foo.Foo() 
```

变量 foo 是一个模块对象，被 Foo 对象覆盖。

我知道我可以为对象使用其他名称，例如：

```
foobar = foo.Foo() 
```

但从语义上讲，在我的代码中将它称为 foo 更有意义，因为它将是唯一的实例。

（我试图通过删除类并仅使用模块来解决此问题，但我又回到使用类，因为使用模块只有“健壮性”问题。）

这是一个哲学问题，但是处理这种潜在的对象/模块名称冲突的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T23:14:11.577

在我看来，您目前正在做的事情没有任何问题，但为了让每个阅读代码的人更清楚，我建议您将代码更改为如下所示：

```
import foo as foo_mod

foo = foo_mod.Foo() 
```

或者：

```
from foo import Foo

foo = Foo() 
```

这可以防止名称冲突，因此`foo`模块中的变量不会引用同名模块会更加明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-12T12:09:18.867

我现在也一直喜欢以下风格：

```
import foo

my_foo = foo.Foo() 
```

我更喜欢这个，因为它保持模块名称不变，而且它们比局部变量更全局和更神圣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T17:13:20.990

这种模式似乎不会打扰使用[Flask + Celery](https://flask.palletsprojects.com/en/1.1.x/patterns/celery/)的窥视者，

```
from celery import Celery

def make_celery(app):
    celery = Celery(
        app.import_name,
        backend=app.config['CELERY_RESULT_BACKEND'],
        broker=app.config['CELERY_BROKER_URL']
    )
    ... 
```

*显然*，创建这个类的实例的正确方法是`stalk = Celery()`（呵呵）

# .htaccess - 隐藏 url 扩展名时找不到 css 文件？

> ID：15799801
> 
> 赞同：1
> 
> 时间：2013-04-03T23:05:46.660
> 
> 标签：.htaccess

我已经找到了一种在适用于我的网站的用户浏览器中隐藏 url 扩展名的方法，因此 www.mysite.com/home.php 现在是 www.mysite.com/home/

我遇到的问题是css现在没有被拉出/没有被找到，有没有办法可以从.htaccess重写中排除css、jpg、png gif和js？

这是我使用的代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/$ $1.php
RewriteRule ^([^/]+)/([^/]+)/$ /$1/$2.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L] 
```

我试过添加这个，但它不起作用：

```
RewriteCond %{REQUEST_URI}  !\.css$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:15:21.967

尝试改变

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/$ $1.php
RewriteRule ^([^/]+)/([^/]+)/$ /$1/$2.php 
```

至

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/$ $1.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/([^/]+)/$ /$1/$2.php 
```

虽然不能确定。

# java - 从 Java 应用程序创建/模拟 Android 上下文

> ID：15799802
> 
> 赞同：4
> 
> 时间：2013-04-03T23:05:55.470
> 
> 标签：java, android, mocking, mockito, android-context

我正在尝试编写一个在 Android 项目中使用某些功能的 java 程序。我不需要Android设备或模拟器，我只需要使用Android项目的一些功能。

我遇到的问题是：我正在尝试从 JAVA 运行类似的东西：

```
AndroidProject testService = new AndroidProject(_context);
testService.start(); 
```

但是“上下文”是 Android 的东西，我只是不知道如何创建一个，或模拟一个，或从我的 Java 类中获取一个。

我实际上对上下文并不感兴趣，我真的只是对 感兴趣`testService.start()`，但没有 AndroidProject 的 () 构造函数，只有`AndroidProject(context)`构造函数可用。

我试过了

```
Context _context;
_context = null;
AndroidProject testService = new AndroidProject(_context);
testService.start(); 
```

但我得到一个`Exception in thread "main" java.lang.RuntimeException: Stub!`错误

我也试过

```
MainActivity myMainActivity = new MainActivity();
Context _context;
_context = myMainActivity.getBaseContext(); // also tried getApplicationContext() 
```

我已经开始研究模拟，但不知道我是否让它太复杂了......

*   “ ***Mockito*** ”只模拟接口，我想模拟 `MainActivity`类，
*   “ ***Android Mock*** ”太复杂了，我无法构建我的项目 `MainActivity myMockObject = AndroidMock.createMock(MainActivity.class);`
*   “ ***Robotium*** ”看起来像是一个测试Android应用程序的Android应用程序。

**我只想创建某种 Android 虚拟上下文并在我的 java 应用程序中使用它，以获取该 Android 类的其他功能......**这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:49:40.063

`android.jar`仅包含类的**存根**实现。它为您的应用程序提供了构建方式，一旦您拥有 APK，您必须在 Android 设备或模拟器上运行它。

即使你模拟你需要的组件（即`Context`），你也会到达某个地方的**存根**。如果您不这样做，那么您尝试运行的代码不依赖于 android，您可以将其分解为`jar`可以在 Java 和 Android 项目之间共享的外部代码。

# c++ - 运算中的整数溢出

> ID：15799803
> 
> 赞同：1
> 
> 时间：2013-04-03T23:06:00.143
> 
> 标签：c++, x86, x86-64, integer-overflow

以下代码：

```
UINT32 dword = 4294967295;

if(dword + 1 != 0) // condition 
```

在此类操作中，是否始终使用最大（整个）寄存器（可用于架构）？以上条件在 64 位模式下始终为真，而在 32 位模式下为假？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:12:21.617

这将取决于`UINT32`真正的类型。

如果它是无符号类型（如您所料），则保证结果以可以表示的最大值 + 1 为模减少，因此代码如下：

```
if (std::numeric_limits<T>::is_unsigned)
    assert(std::numeric_limits<T>::max()+1==0); 
```

...应该成功。OTOH，根据名称，我们通常希望它是 32 位类型，而不管实现、寄存器大小等如何，所以我们希望无论如何都能得到相同的结果。

编辑：[对不起，不得不停下来喂宝宝几分钟]我应该补充更多细节。尽管我们当然希望它在实践中不太可能，但可以想象它`UINT32`可能真的是（比如说）16 位`unsigned short`. 为了便于讨论，我们假设它`int`是 32 位。

在这种情况下，`dword+1`将涉及 an`unsigned short`和 an `int`（的隐式类型`1`）之间的数学运算。在这种情况下，`dword`实际上将初始化为 65535。然后，当您进行加法时，`65535`它将提升为 32 位`int`，并`1`添加为`int`，因此结果将是 65536。

至少在理论上，如果 UINT32 是无符号的 32 位类型（正如我们所期望的那样）但是`int`是 64 位类型，则可能会发生相同的基本情况。再次，`dword`将`int`在进行数学运算之前提升，因此数学运算将在 64 位而不是 32 位上完成，因此（再次）结果不会回绕为 0。

# objective-c - 如何在 Scrollview 中捕获缩放的 UIImageView 以进行裁剪？

> ID：15799805
> 
> 赞同：0
> 
> 时间：2013-04-03T23:06:01.220
> 
> 标签：objective-c, uiimage, cgimage

问题：缩小图像进行裁剪很好。使用放大的图像进行裁剪显示图像高于应有的图像。我在那里的 yOffset 是因为我想要的裁剪方块从滚动视图的下方开始。

代码：

```
CGRect rect;
float yOffset = 84;
rect.origin.x = floorf([scrollView contentOffset].x * zoomScale);
rect.origin.y = floorf(([scrollView contentOffset].y + yOffset) * zoomScale);
rect.size.width = floorf([scrollView bounds].size.width * zoomScale);
rect.size.height = floorf((320 * zoomScale));

if (rect.size.width > 320) {
    rect.size.width = 320;
}

if (rect.size.height > 320) {
    rect.size.height = 320;
}

CGImageRef cr = CGImageCreateWithImageInRect([[imageView image] CGImage], rect);

UIImage *img = imageView.image; //[UIImage imageWithCGImage:cr];

UIGraphicsBeginImageContext(rect.size);

// translated rectangle for drawing sub image
CGRect drawRect = CGRectMake(-rect.origin.x, -rect.origin.y, 320.0f, 320.0f);
NSLog(@"drawRect: %@", NSStringFromCGRect(drawRect));
NSLog(@"rect: %@", NSStringFromCGRect(rect));

// draw image
[img drawInRect:drawRect];

// grab image
UIImage *cropped = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

CGImageRelease(cr);

[self.delegate imageCropper:self didFinishCroppingWithImage:cropped]; 
```

我在做什么导致图像在缩放时得到错误的高度？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T06:35:53.107

```
UIImage* imageFromView(UIImage* srcImage, CGRect* rect)
{
    CGImageRef cr = CGImageCreateWithImageInRect(srcImage.CGImage, *rect);
    UIImage* cropped = [UIImage imageWithCGImage:cr];

    CGImageRelease(cr);
    return cropped;
}
-(void) doneEditing
{
    //Calculate the required area from the scrollview
    CGRect visibleRect;
    float scale = 1.0f/scrollView.zoomScale;
    visibleRect.origin.x = scrollView.contentOffset.x * scale;
    visibleRect.origin.y = scrollView.contentOffset.y * scale;
    visibleRect.size.width = scrollView.bounds.size.width * scale;
    visibleRect.size.height = scrollView.bounds.size.height * scale;

    FinalOutputView* outputView = [[FinalOutputView alloc] initWithNibName:@"FinalOutputView" bundle:[NSBundle mainBundle]];
    outputView.image = imageFromView(imageView.image, &visibleRect);

    [self.navigationController pushViewController:outputView animated:YES];
    [outputView release];
} 
```

**加载原始图像：**

![在此处输入图像描述](https://i.stack.imgur.com/mTz2u.png)

**缩放图像：**

![在此处输入图像描述](https://i.stack.imgur.com/sRl4s.png)

**最终捕获图像**

![在此处输入图像描述](https://i.stack.imgur.com/FZLQO.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T10:17:04.727

如果您想从 scrollView 的整个视图中截取屏幕截图（缩放后），您可以这样做：

```
UIImage* image = nil;
UIGraphicsBeginImageContext(self.scrollView.contentSize);
{
    //save previous frames
    CGPoint savedContentOffset = self.scrollView.contentOffset;
    CGRect savedFrame = self.scrollView.frame;
    CGRect imgFrame  = self.imageView.frame;

    //set the frames with current content size
    self.scrollView.contentOffset = CGPointZero;
    self.scrollView.frame = CGRectMake(0, 0, self.scrollView.contentSize.width, self.scrollView.contentSize.height);
    self.imageView.frame = self.scrollView.frame;

    //render image now :)
    [self.scrollView.layer renderInContext: UIGraphicsGetCurrentContext()];
    image = UIGraphicsGetImageFromCurrentImageContext();

    //now set the frames again with old ones :)
    self.scrollView.contentOffset = savedContentOffset;
    self.scrollView.frame = savedFrame;
    self.imageView.frame = imgFrame;
    [self viewForZoomingInScrollView:self.scrollView];
}
UIGraphicsEndImageContext();

//get the documents path
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
//save file as savedImage.png
NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"];

//get the png data from image
NSData *imageData = UIImagePNGRepresentation(image);
//write it now
[imageData writeToFile:savedImagePath atomically:NO]; 
```

# c# - 当使用继承的模型发布回操作时，强类型视图会解析错误的类型

> ID：15799806
> 
> 赞同：1
> 
> 时间：2013-04-03T23:06:06.283
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我正在为我正在为大学电子邮件系统构建的网站上的用户帐户系统开发多类型用户配置文件编辑器。

我有 3 个视图模型`Administrator`， 它们从一个`Faculty`类 继承。当它们使用它们显示在视图中时，它们显示正确的编辑器就好了，但是当我向控制器提交更改时，它们被解析为基类（我已经使用 Visual Studio 调试器验证了这一点）而不是正确提交的视图模型类。因此，当它到达操作方法时，我会丢失重要的编辑器数据。在将其发布回控制器而不为每种模型类型创建完全独立的视图时，如何使其解析正确的类型？`Student``Person``EditorForModel()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:18:06.583

我想出了以下解决方案：

```
public class InheritanceBinder : DefaultModelBinder
    {

        public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var modelType = bindingContext.ModelType;
            object model = modelType.Assembly.CreateInstance(modelType.FullName);

            var inheritedtypes = Assembly.GetExecutingAssembly().GetTypes().Where(t => model.GetType().IsAssignableFrom(t)).ToList();
            HttpRequestBase req = controllerContext.HttpContext.Request;
            var keys = req.Form.Keys.Cast<string>().Where(q => q != "__RequestVerificationToken").ToList();

            List<KeyValuePair<Type, int>> matches = new List<KeyValuePair<Type,int>>();

            inheritedtypes.ForEach(t => {
                int p_matches = 0;

                Array.ForEach(t.GetProperties(), item =>
                {
                    if (keys.Any(key => item.Name == key))
                        p_matches++;
                });

                matches.Add(new KeyValuePair<Type, int>(t, p_matches));
            });

            var bestmatches = matches.Where(q => q.Value == matches.Max(s => s.Value));
            if (!bestmatches.Any())
                throw new TargetInvocationException("Could not determine model to bind based on the form values provided", null);

            var usematch = bestmatches.First().Key;

            object bindObj = Activator.CreateInstance(usematch);

            bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => bindObj, usematch);

            return base.BindModel(controllerContext, bindingContext);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:15:59.753

您确定您在操作方法中所期望的模型不是 Person 类型吗？这可能会导致您出现问题。

# php - 需要首先 ul 有 1 li，每个 ul 有 5 li

> ID：15799808
> 
> 赞同：1
> 
> 时间：2013-04-03T23:06:09.793
> 
> 标签：php

我在 PHP foreach 循环中需要这种类型的结构。我尝试了这段代码：

```
<ul>
    <li>1</li>
</ul>
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
</ul>
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
</ul>
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
</ul> 
```

我在循环中尝试了这个条件并且工作正常，但我需要 1 li 在第一个 ul 上。

```
<?php
$counter = 1;
foreach( $myposts as $post ) :

  setup_postdata($post); 

  if ($counter % 5 == 1) {
    echo '<ul>';
  }
  echo '<li>testing ...</li>'

  if($counter % 5 == 0) {
    echo '</ul>';
  }
  $counter++;
endforeach;
?> 
```

任何人扩展我的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:20:45.753

这就是我想出的：

```
$myposts = array(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16);

$counter = 0;
echo '<ul>';
foreach( $myposts as $k=>$post ) :
    //setup_postdata($post); 
    echo '<li>'.$post.'</li>';
    if($counter==0 || $counter==5){
        echo "</ul>".($k!=count($myposts)-1 ? "<ul>" : "");
        $counter = 0;
    }
    $counter++;
endforeach;
if($counter==5){
    echo '</ul>';
} 
```

这个最大的误解大多数人都懒得关闭最后一个标签（在你的情况下`ul`），或者他们不应该打开一个新标签（在你的情况下`ul`）。

Ps 我不得不对此发表评论`setup_postdata`。

**注意：**在数组中添加或删除元素不会影响 1,5,5,...,的结构（然后剩余部分取决于剩下的内容）

# php - php composer.phar 更新失败 - 包名中的拼写错误

> ID：15799810
> 
> 赞同：10
> 
> 时间：2013-04-03T23:06:15.350
> 
> 标签：php, composer-php, symfony-2.2

我创建了一个新的 Symfony 2.1 项目并添加了一个由 SVN 存储库下载的自定义包。现在我正在尝试将项目升级到 Symfony 2.2，但每当我尝试执行命令`php ~/bin/composer.phar update`时，都会出现以下错误消息：

```
Loading composer repositories with package information
Updating dependencies (including require-dev)         
Your requirements could not be resolved to an installable set of packages.

  Problem 1
  - The requested package custom/utils could not be found in any version, there may be a typo in the package name.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-stability setting
   see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> for more details.

Read <http://getcomposer.org/doc/articles/troubleshooting.md> for further common problems. 
```

这是 Symfony 2.2 `composer.json`：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "repositories": [
        {
            "type": "vcs",
            "url": "svn+ssh://sources.de.ext/usr/local/svnroot/utils"
        }
    ],
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.2.*",
        "doctrine/orm": "~2.2,>=2.2.3",
        "doctrine/doctrine-bundle": "1.2.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.2.*",
        "symfony/monolog-bundle": "2.2.*",
        "sensio/distribution-bundle": "2.2.*",
        "sensio/framework-extra-bundle": "2.2.*",
        "sensio/generator-bundle": "2.2.*",
        "jms/security-extra-bundle": "1.4.*",
        "jms/di-extra-bundle": "1.3.*",
        "custom/utils": "*"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "alpha",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web",
        "branch-alias": {
            "dev-master": "2.2-dev"
        }
    }
} 
```

自定义实用程序具有以下内容`composer.json`：

```
{
    "name": "custom/utils",
    "version": "1.0.0",
    "description": "The Custom Libraries",
    "autoload": {
        "psr-0": { 
            "Blogo": "src/",
            "WideImage": "lib/"
        }
    },
    "require": {
        "symfony/console": "2.*",
        "symfony/yaml": "2.*"
    }
} 
```

谁能帮我理解新的 2.2 Symfony 有什么问题？因为这个错误信息只出现在 Symfony 2.2 升级。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T23:33:42.010

尝试运行`composer update --verbose`或`composer show custom/utils --verbose`. 两者都会显示一些关于加载 SVN 存储库的输出。它应该指示哪些版本已加载或未加载。

我的猜测是你有一个`dev-trunk`可用的版本，如果你需要它，它很可能会工作。您不应`version: 1.0.0`在 composer.json 中指定，因为 composer 从您的 VCS 中的标签/分支中读取版本信息。

# scala - 动态类型如何工作以及如何使用它？

> ID：15799811
> 
> 赞同：101
> 
> 时间：2013-04-03T23:06:25.910
> 
> 标签：scala

我听说通过`Dynamic`某种方式可以在 Scala 中进行动态类型化。但我无法想象它会是什么样子或它是如何工作的。

我发现一个人可以继承特质`Dynamic`

```
class DynImpl extends Dynamic 
```

[API](http://www.scala-lang.org/api/current/index.html#scala.Dynamic)说可以像这样使用它：

> foo.method("blah") ~~> foo.applyDynamic("method")("blah")

但是当我尝试它时它不起作用：

```
scala> (new DynImpl).method("blah")
<console>:17: error: value applyDynamic is not a member of DynImpl
error after rewriting to new DynImpl().<applyDynamic: error>("method")
possible cause: maybe a wrong Dynamic method signature?
              (new DynImpl).method("blah")
               ^ 
```

这是完全合乎逻辑的，因为在查看了[源代码](https://github.com/scala/scala/blob/v2.10.1/src/library/scala/Dynamic.scala)之后，发现这个 trait 完全是空的。没有`applyDynamic`定义方法，我无法想象如何自己实现它。

有人可以告诉我我需要做什么才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2013-04-03T23:06:25.910

Scalas 类型`Dynamic`允许您在不存在的对象上调用方法，或者换句话说，它是动态语言中“方法缺失”的复制品。

没错，[`scala.Dynamic`](https://github.com/scala/scala/blob/v2.10.1/src/library/scala/Dynamic.scala#L32)没有任何成员，它只是一个标记接口——具体实现由编译器填写。至于 Scalas[字符串插值](http://docs.scala-lang.org/overviews/core/string-interpolation.html)功能，有定义明确的规则来描述生成的实现。实际上，可以实现四种不同的方法：

*   `selectDynamic`- 允许编写字段访问器：`foo.bar`
*   `updateDynamic`- 允许写入字段更新：`foo.bar = 0`
*   `applyDynamic`- 允许使用参数调用方法：`foo.bar(0)`
*   `applyDynamicNamed`- 允许使用命名参数调用方法：`foo.bar(f = 0)`

要使用其中一种方法，编写一个扩展类`Dynamic`并在那里实现这些方法就足够了：

```
class DynImpl extends Dynamic {
  // method implementations here
} 
```

此外，还需要添加一个

```
import scala.language.dynamics 
```

或设置编译器选项`-language:dynamics`，因为该功能默认隐藏。

## 选择动态

`selectDynamic`是最容易实现的。编译器会转换对`foo.bar`to的调用`foo.selectDynamic("bar")`，因此要求此方法有一个期望 a 的参数列表`String`：

```
class DynImpl extends Dynamic {
  def selectDynamic(name: String) = name
}

scala> val d = new DynImpl
d: DynImpl = DynImpl@6040af64

scala> d.foo
res37: String = foo

scala> d.bar
res38: String = bar

scala> d.selectDynamic("foo")
res54: String = foo 
```

可以看到，也可以显式调用动态方法。

## 更新动态

因为`updateDynamic`用于更新此方法需要返回的值`Unit`。此外，要更新的字段的名称及其值由编译器传递给不同的参数列表：

```
class DynImpl extends Dynamic {

  var map = Map.empty[String, Any]

  def selectDynamic(name: String) =
    map get name getOrElse sys.error("method not found")

  def updateDynamic(name: String)(value: Any) {
    map += name -> value
  }
}

scala> val d = new DynImpl
d: DynImpl = DynImpl@7711a38f

scala> d.foo
java.lang.RuntimeException: method not found

scala> d.foo = 10
d.foo: Any = 10

scala> d.foo
res56: Any = 10 
```

代码按预期工作 - 可以在运行时向代码添加方法。另一方面，代码不再是类型安全的，如果调用了不存在的方法，则也必须在运行时处理。此外，此代码不如动态语言有用，因为无法创建应在运行时调用的方法。这意味着我们不能做类似的事情

```
val name = "foo"
d.$name 
```

where`d.$name`将`d.foo`在运行时转换为。但这并没有那么糟糕，因为即使在动态语言中，这也是一个危险的特性。

这里要注意的另一件事是，它`updateDynamic`需要与`selectDynamic`. 如果我们不这样做，我们会得到一个编译错误——这个规则类似于 Setter 的实现，它只有在有一个同名的 Getter 时才有效。

## 应用动态

使用参数调用方法的能力由以下方式提供`applyDynamic`：

```
class DynImpl extends Dynamic {
  def applyDynamic(name: String)(args: Any*) =
    s"method '$name' called with arguments ${args.mkString("'", "', '", "'")}"
}

scala> val d = new DynImpl
d: DynImpl = DynImpl@766bd19d

scala> d.ints(1, 2, 3)
res68: String = method 'ints' called with arguments '1', '2', '3'

scala> d.foo()
res69: String = method 'foo' called with arguments ''

scala> d.foo
<console>:19: error: value selectDynamic is not a member of DynImpl 
```

方法的名称及其参数再次被分隔到不同的参数列表中。如果我们愿意，我们可以用任意数量的参数调用任意方法，但是如果我们想调用不带任何括号的方法，我们需要实现`selectDynamic`。

提示：也可以使用 apply-syntax with `applyDynamic`：

```
scala> d(5)
res1: String = method 'apply' called with arguments '5' 
```

## 应用动态命名

最后一个可用的方法允许我们根据需要命名参数：

```
class DynImpl extends Dynamic {

  def applyDynamicNamed(name: String)(args: (String, Any)*) =
    s"method '$name' called with arguments ${args.mkString("'", "', '", "'")}"
}

scala> val d = new DynImpl
d: DynImpl = DynImpl@123810d1

scala> d.ints(i1 = 1, i2 = 2, 3)
res73: String = method 'ints' called with arguments '(i1,1)', '(i2,2)', '(,3)' 
```

方法签名的不同之处在于它需要`applyDynamicNamed`形式为任意类型的元组。`(String, A)``A`

* * *

上述所有方法的共同点是它们的参数都可以参数化：

```
class DynImpl extends Dynamic {

  import reflect.runtime.universe._

  def applyDynamic[A : TypeTag](name: String)(args: A*): A = name match {
    case "sum" if typeOf[A] =:= typeOf[Int] =>
      args.asInstanceOf[Seq[Int]].sum.asInstanceOf[A]
    case "concat" if typeOf[A] =:= typeOf[String] =>
      args.mkString.asInstanceOf[A]
  }
}

scala> val d = new DynImpl
d: DynImpl = DynImpl@5d98e533

scala> d.sum(1, 2, 3)
res0: Int = 6

scala> d.concat("a", "b", "c")
res1: String = abc 
```

幸运的是，还可以添加隐式参数 - 如果我们添加[`TypeTag`](https://stackoverflow.com/questions/12218641/scala-2-10-what-is-a-typetag-and-how-do-i-use-it)上下文绑定，我们可以轻松检查参数的类型。最好的事情是即使返回类型也是正确的——即使我们必须添加一些强制转换。

但是，当无法找到解决这些缺陷的方法时，Scala 就不会是 Scala。在我们的例子中，我们可以使用类型类来避免强制转换：

```
object DynTypes {
  sealed abstract class DynType[A] {
    def exec(as: A*): A
  }

  implicit object SumType extends DynType[Int] {
    def exec(as: Int*): Int = as.sum
  }

  implicit object ConcatType extends DynType[String] {
    def exec(as: String*): String = as.mkString
  }
}

class DynImpl extends Dynamic {

  import reflect.runtime.universe._
  import DynTypes._

  def applyDynamic[A : TypeTag : DynType](name: String)(args: A*): A = name match {
    case "sum" if typeOf[A] =:= typeOf[Int] =>
      implicitly[DynType[A]].exec(args: _*)
    case "concat" if typeOf[A] =:= typeOf[String] =>
      implicitly[DynType[A]].exec(args: _*)
  }

} 
```

虽然实现看起来不太好，但它的力量不容质疑：

```
scala> val d = new DynImpl
d: DynImpl = DynImpl@24a519a2

scala> d.sum(1, 2, 3)
res89: Int = 6

scala> d.concat("a", "b", "c")
res90: String = abc 
```

最重要的是，还可以`Dynamic`与宏结合：

```
class DynImpl extends Dynamic {
  import language.experimental.macros

  def applyDynamic[A](name: String)(args: A*): A = macro DynImpl.applyDynamic[A]
}
object DynImpl {
  import reflect.macros.Context
  import DynTypes._

  def applyDynamic[A : c.WeakTypeTag](c: Context)(name: c.Expr[String])(args: c.Expr[A]*) = {
    import c.universe._

    val Literal(Constant(defName: String)) = name.tree

    val res = defName match {
      case "sum" if weakTypeOf[A] =:= weakTypeOf[Int] =>
        val seq = args map(_.tree) map { case Literal(Constant(c: Int)) => c }
        implicitly[DynType[Int]].exec(seq: _*)
      case "concat" if weakTypeOf[A] =:= weakTypeOf[String] =>
        val seq = args map(_.tree) map { case Literal(Constant(c: String)) => c }
        implicitly[DynType[String]].exec(seq: _*)
      case _ =>
        val seq = args map(_.tree) map { case Literal(Constant(c)) => c }
        c.abort(c.enclosingPosition, s"method '$defName' with args ${seq.mkString("'", "', '", "'")} doesn't exist")
    }
    c.Expr(Literal(Constant(res)))
  }
}

scala> val d = new DynImpl
d: DynImpl = DynImpl@c487600

scala> d.sum(1, 2, 3)
res0: Int = 6

scala> d.concat("a", "b", "c")
res1: String = abc

scala> d.noexist("a", "b", "c")
<console>:11: error: method 'noexist' with args 'a', 'b', 'c' doesn't exist
              d.noexist("a", "b", "c")
                       ^ 
```

宏给了我们所有的编译时间保证，虽然在上述情况下它不是很有用，但它可能对某些 Scala DSL 非常有用。

如果您想获得更多关于`Dynamic`有更多资源的信息：

*   引入Scala的[官方 SIP 提案](http://docs.scala-lang.org/sips/pending/type-dynamic.html)`Dynamic`
*   [Scala 中动态类型的实际使用](https://stackoverflow.com/questions/4709183/practical-uses-of-a-dynamic-type-in-scala)- 关于 SO 的另一个问题（但非常过时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T13:12:36.623

kiritsuku的回答更好。这是为了展示一个实用的 TL;DR 用例。

动态可用于使用构建器模式动态构造对象。

```
import scala.language.dynamics

case class DynImpl(
  inputParams: Map[String, List[String]] = Map.empty[String, List[String]]
) extends Dynamic {

  def applyDynamic(name: String)(args: String*): DynImpl = {
    copy(inputParams = inputParams ++ Map(name -> args.toList))
  }

}

val d1 = DynImpl().whatever("aaa", "bbb").cool("ccc")
println(d1.inputParams) // Map(whatever -> List(aaa, bbb), cool -> List(ccc))

val d2 = DynImpl().whatever("aaa", "bbb").fun("haha")
println(d2.inputParams) // Map(whatever -> List(aaa, bbb), fun -> List(haha)) 
```

# android - 如何根据从 web 服务收到的结果构建 ArrayAdapter？

> ID：15799814
> 
> 赞同：0
> 
> 时间：2013-04-03T23:06:39.757
> 
> 标签：android, ksoap2

我正在使用在 asp.net 中开发的返回数据类型`List (List(of String))`的 Web 服务，我正在使用 Ksoap2 api 调用上述 Web 服务并从中获取结果，如下所示：

**从 Web 服务收到的结果：**

```
anyType{string=username1; string=username2; string=username3; string=username4; }
anyType{string=Text_news1; string=Text_News2; string=Text_News3; string=Text_News4; }
anyType{string=01-Apr-2013; string=01-Apr-2013; string=02-Apr-2013; string=02-Apr-2013; } 
```

上面收到的第一个结果是关于发布新闻的用户的用户名，而第二个结果是 Text_News 本身，第三行是用户发布该 text_News 的日期，以及我用来获取以上结果如下：

**我用的`doInBackground(String...params)`方法**

```
List<String> data= new ArrayList<String>();
    SoapObject result = (SoapObject)envelope.bodyIn;
    if(result != null)
    {
        data.add(((SoapObject)result.getProperty(0)).getPropertyAsString(0));
            data.add(((SoapObject)result.getProperty(0)).getPropertyAsString(1));
            data.add(((SoapObject)result.getProperty(0)).getPropertyAsString(2));
    } 
```

并将结果通过以下方法处理以得出上述结果

```
protected void onPostExecute(List<String> result){
dialog.dismiss();
if(!result.isEmpty())
 {
   System.out.println("First Element :"+result.get(0));
   System.out.println("Second Element :"+result.get(1));
   System.out.println("Third Element :"+result.get(2));
}
} 
```

**但我真的不知道如何构建一个`ArrayAdapter`用于将数据插入到以下表单的列表视图**

```
Username1    Text_News1   date1   to be the first Item in listView 
userName2    Text_News2   date2   to be the second item in listView
.........
....... 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:20:38.760

为你自己定义一个对象，比如“Row”：

```
Class Row{
    String text;
    String date;
    .... 
```

然后在解析响应时创建`ArrayList`这些对象中的一个：

```
List<Row> rows = new ArrayList<Row>();
for (all your parsed string data)
{
    Row row = new Row();
    row.setText("your parsed text");
    row.setDate("your parsed date");
    rows.add(row); 
} 
```

最后创建一个适配器：

```
private class CustomAdapter extends ArrayAdapter<Row>
{   
    private ArrayList<Row> list;

    public CustomAdapter(Context context, int textViewResourceId, ArrayList<Row> rowsList) 
    {
        super(context, textViewResourceId, rowsList);
         this.list = new ArrayList<SubTask>();
         this.list.addAll(rowsList);
    }

    public View getView(final int position, View convertView, ViewGroup parent)
    {
        ViewHolder holder = new ViewHolder();

            LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflator.inflate(R.layout.list_item_new, null);

            holder.text = (TextView) convertView.findViewById(R.id.tvText);
            holder.date = (TextView) convertView.findViewById(R.id.tvDate); 

            holder.text.setText(rows.get(position).getText());
            holder.date.setText(rows.get(position).getDate());
            return convertView;
    }
} 
```

你`ViewHolder`什么时候会：

```
static class ViewHolder 
{
     TextView text;
     TextView date;
} 
```

并且不要忘记创建`list_item_new`哪个将是您的列表项自定义布局文件。

# java - 在netty中汇集客户渠道的正确方法？

> ID：15799820
> 
> 赞同：0
> 
> 时间：2013-04-03T23:07:20.557
> 
> 标签：java, netty

我在下面的代码中得到了一个 java.nio.channels.NotYetConnectedException，因为我正在尝试写入一个尚未打开的通道。

本质上，我拥有的是一个频道池，如果一个频道空闲，我会在其中抓取一个要写入的频道，如果一个频道不可用，我会创建一个新频道。我的问题是，当我创建一个新通道时，当我调用connect时，通道还没有准备好写入，我不想等待连接打开后再返回，因为我不想阻塞线程。最好的方法是什么？另外，我检索/返回频道的逻辑是否有效？请参阅下面的代码。

我有一个简单的连接池，如下所示：

```
private static class ChannelPool {
    private final ClientBootstrap cb;
    private Set<Channel> activeChannels = new HashSet<Channel>();
    private Deque<Channel> freeChannels = new ArrayDeque<Channel>();
    public ChannelPool() {
        ChannelFactory clientFactory =
                new NioClientSocketChannelFactory(
                        Executors.newCachedThreadPool(),
                        Executors.newCachedThreadPool());
        cb = new ClientBootstrap(clientFactory);
        cb.setPipelineFactory(new ChannelPipelineFactory() {
            public ChannelPipeline getPipeline() {
                return Channels.pipeline(
                        new HttpRequestEncoder(),
                        new HttpResponseDecoder(),
                        new ResponseHandler());
            }
        });
    }

    private Channel newChannel() {
        ChannelFuture cf;
        synchronized (cb) {
            cf = cb.connect(new InetSocketAddress("localhost", 18080));
        }
        final Channel ret = cf.getChannel();
        ret.getCloseFuture().addListener(new ChannelFutureListener() {

            @Override
            public void operationComplete(ChannelFuture arg0) throws Exception {
                System.out.println("channel closed?");
                synchronized (activeChannels) {
                    activeChannels.remove(ret);
                }
            }
        });
        synchronized (activeChannels) {
            activeChannels.add(ret);
        }
        System.out.println("returning new channel");
        return ret;
    }

    public Channel getFreeChannel() {
        synchronized (freeChannels) {
            while (!freeChannels.isEmpty()) {
                Channel ch = freeChannels.pollFirst();
                if (ch.isOpen()) {
                    return ch;
                }
            }
        }
        return newChannel();
    }

    public void returnChannel(Channel ch) {
        synchronized (freeChannels) {
            freeChannels.addLast(ch);
        }
    }
} 
```

我正在尝试在处理程序中使用它，如下所示：

```
private static class RequestHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, final MessageEvent e) {
        final HttpRequest request = (HttpRequest) e.getMessage();
        Channel proxyChannel = pool.getFreeChannel();
        proxyToClient.put(proxyChannel, e.getChannel());
        proxyChannel.write(request);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:54:22.977

不必立即将新通道添加到`activeChannels`之后`bootstrap.connect(..)`，您必须将侦听器添加到`ChannelFuture`由 返回的`bootstrap.connect(..)`，然后将通道添加到`activeChannels`添加的侦听器中。这样，`getFreeChannel()`将永远不会获得尚未连接的通道。

`activeChannels`因为即使你调用它也可能是空的`newChannel()`（`newChannel()`甚至在连接建立之前就会返回），你必须决定在这种情况下该怎么做。如果我是你，我会将 from 的返回类型更改为`getFreeChannel()`to `Channel`，`ChannelFuture`以便在免费频道准备好时通知调用者。

# firebird - 使用 MyBatis Generator 映射的只读列

> ID：15799823
> 
> 赞同：2
> 
> 时间：2013-04-03T23:07:42.163
> 
> 标签：firebird, mybatis, firebird2.5, ibator

Firebird 数据库支持只读列。已计算其值但未更新的列。如果我使用 MyBatis Generator 映射一些带有只读列的表，我在插入或更新表时收到以下错误：

`org.firebirdsql.jdbc.FBSQLException: GDS Exception. 335544359\. attempted update of read-only column`.

如何使用 MyBatis Generator 处理这种列？是否有可能忽略这种列的插入和更新语句？

**注意**：使用`insertSelective`和`updateSelective`传递只读列值 as`null`而不是使用`insert`and`update`只会解决我不想将其他字段更新为`null`. 所以，我需要另一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T18:29:32.050

MyBatis 不提供对只读列的额外支持。因此，周转解决方案是使用标记设置只读列，`ignoreColumn`并使用映射器中的@Select 注释手动编写需要该列值的查询。

```
<table tableName="...">
    ...
    <ignoreColumn column="<read only column>" /> 
    ...
</table> 
```

# vim - Toad Oracle 客户端是否有 Vi 或 Vim 插件？

> ID：15799825
> 
> 赞同：3
> 
> 时间：2013-04-03T23:07:48.400
> 
> 标签：vim, editor, vi, toad

我在使用 Oracle 时使用 Toad 客户端和它的编辑器。我发现自己缺少 Vi/Vim 键绑定。在使用 SQL Server 时，我拥有出色的[ViEmu for SQL](http://www.viemu.com/viemu-vi-vim-sql-server-management-studio.html)插件，它让我可以在 SQL 管理工作室中使用 Vi/Vim 键绑定。蟾蜍有类似的东西吗？

# c++ - C++ 中是否存在链接哈希集？

> ID：15799830
> 
> 赞同：10
> 
> 时间：2013-04-03T23:08:29.483
> 
> 标签：c++, set

Java 有一个[LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)，它是一个具有可预测迭代顺序的集合。C++ 中最接近的可用数据结构是什么？

目前我正在使用集合和向量来复制我的数据。我将我的数据插入到集合中。如果数据插入成功（意味着数据集中不存在），那么我 push_back 进入向量。当我遍历数据时，我使用向量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T23:20:06.823

如果可以使用它，那么带有和索引的[Boost.MultiIndex](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html)与.`sequenced``hashed_unique``LinkedHashSet`

如果做不到这一点，请保留某种类型的`unordered_set`（或者`hash_set`，如果这是您的实现所提供的），其中包含一个列表节点，并使用该列表节点自己处理顺序。

您当前正在做的事情（`set`和`vector`）的问题是：

*   数据的两个副本（当数据类型很大时可能会出现问题，这意味着您的两个不同的迭代返回对*不同对象*的引用，尽管具有相同的值。如果有人编写了一些比较以两种不同方式获得的“相同”元素的地址，期望地址相等，或者如果您的对象具有`mutable`被顺序比较忽略的数据成员，并且有人编写的代码期望通过查找发生变异并看到更改时依次迭代）。
*   与 不同`LinkedHashSet`的是，没有快速的方法可以删除序列中间的元素。如果要按值而不是按位置删除，则必须在向量中搜索要删除的值。
*   `set`具有与散列集不同的性能特征。

如果您不关心这些事情中的任何一个，那么您所拥有的可能就很好。如果重复是唯一的问题，那么您可以考虑保留指向集合中元素的指针向量，而不是重复向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-15T15:10:25.117

`LinkedHashSet`要在 C++ 中从 Java复制，我认为您将需要两个 vanilla `std::map`（请注意，您将得到`LinkedTreeSet`而不是真正的`LinkedHashSet`，而不是得到 O(log n) 用于插入和删除）才能工作。

*   一种使用实际值作为键和插入顺序（通常是 int 或 long int）作为值。
*   另一个是相反的，使用插入顺序作为键，实际值作为值。

当您要插入时，您`std::map::find`首先使用`std::map`以确保其中不存在相同的对象。

*   如果已经存在，则忽略新的。
*   如果没有，则将此对象与递增的插入顺序映射到`std::map`我之前提到的两者。

当您要按插入顺序遍历它时，您将遍历第二个`std::map`，因为它将按插入顺序排序（任何属于`std::map`or的`std::set`内容都会自动排序）。

当您要从中删除一个元素时，您可以使用它`std::map::find`来获取插入顺序。使用此插入顺序从第二个元素中删除元素`std::map`并从第一个元素中删除对象。

请注意，此解决方案并不完美，**如果您打算长期使用**此解决方案，则需要在删除一定数量后“压缩”插入订单，因为您最终会用完插入订单（2 ^32 个索引用于 unsigned int 或 2^64 个索引用于 unsigned long long int）。为此，您需要将所有“值”对象放入向量中，清除两个映射中的所有值，然后将向量中的值重新插入两个映射。此过程需要 O(nlogn) 时间。

如果您使用的是 C++11，则可以将第一个替换为`std::map`以`std::unordered_map`提高效率，但您将无法用它替换第二个。原因是`std::unordered map`使用哈希码进行索引，因此在这种情况下无法可靠地对索引进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T23:14:37.487

您可能想知道 std::map 不会像“null”查找时间那样为您提供任何类型的 (log n)。并且使用 std::tr1::unordered 是有风险的业务，因为它会破坏任何排序以获得恒定的查找时间。

尝试 bash 一个 boost 多索引容器以更自由地使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T23:21:29.383

除了使用（相当于Java的HashSet）和（双向链表）之外，您描述组合的方式`std::set`听起来`std::vector`像您应该做的事情。您还可以使用将键（用于查找）与迭代器一起存储到列表中，以查找您存储的实际对象（如果键与对象不同（或仅其中一部分））。`std::unordered_set``std::list``std::unordered_map`

boost 库确实提供了许多此类容器和查找索引的组合。例如，[这个具有快速查找示例的双向列表](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/tutorial/basics.html#list_fast_lookup)。

# python - 抓取网页的策略，最大限度地收集信息

> ID：15799832
> 
> 赞同：2
> 
> 时间：2013-04-03T23:08:45.440
> 
> 标签：python, web-scraping, beautifulsoup, classification

这是问题所在：

用户注册一个站点，可以选择 8 个工作类别之一，或者选择跳过此步骤。我想根据电子邮件地址中的域名将跳过该步骤的用户分类为工作类别。

当前设置：

使用 Beautiful Soup 和 nltk 的组合，我抓取主页并寻找指向网站上包含“关于”一词的页面的链接。我也刮掉了那个页面。我已经复制了在这篇文章末尾进行抓取的代码。

问题：

我没有获得足够的数据来制定良好的学习程序。我想知道我的抓取算法是否为成功而设置——换句话说，我的逻辑中是否有任何漏洞，或者有什么更好的方法来确保我有大量的文本来描述什么样的工作一家公司呢？

（相关）代码：

```
import bs4 as bs
import httplib2 as http
import nltk

# Only these characters are valid in a url
ALLOWED_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~:/?#[]@!$&'()*+,;="

class WebPage(object):
    def __init__(self, domain):
        """
            Constructor

            :param domain: URL to look at
            :type domain: str
        """
        self.url = 'http://www.' + domain

        try:
            self._get_homepage()
        except: # Catch specific here?
            self.homepage = None

        try:
            self._get_about_us()
        except:
            self.about_us = None

    def _get_homepage(self):
        """
            Open the home page, looking for redirects
        """
        import re

        web = http.Http()
        response, pg = web.request(self.url)

        # Check for redirects:
        if int(response.get('content-length',251)) < 250:
            new_url = re.findall(r'(https?://\S+)', pg)[0]
            if len(new_url): # otherwise there's not much I can do...
                self.url = ''.join(x for x in new_url if x in ALLOWED_CHARS)
                response, pg = web.request(self.url)

        self.homepage = self._parse_html(nltk.clean_html(pg))
        self._raw_homepage = pg

    def _get_about_us(self):
        """
            Soup-ify the home page, find the "About us" page, and store its contents in a
            string
        """
        soup = bs.BeautifulSoup(self._raw_homepage)
        links = [x for x in soup.findAll('a') if x.get('href', None) is not None]
        about = [x.get('href') for x in links if 'about' in x.get('href', '').lower()]

        # need to find about or about-us
        about_us_page = None
        for a in about:
            bits = a.strip('/').split('/')
            if len(bits) == 1:
                about_us_page = bits[0]
            elif 'about' in bits[-1].lower():
                about_us_page = bits[-1]

        # otherwise assume shortest string is top-level about pg.
        if about_us_page is None and len(about):
            about_us_page = min(about, key=len)

        self.about_us = None
        if about_us_page is not None:
            self.about_us_url = self.url + '/' + about_us_page
            web = http.Http()
            response, pg = web.request(self.about_us_url)
            if int(response.get('content-length', 251)) > 250:
                self.about_us = self._parse_html(nltk.clean_html(pg))

    def _parse_html(self, raw_text):
        """
            Clean html coming from a web page. Gets rid of
                - all '\n' and '\r' characters
                - all zero length words
                - all unicode characters that aren't ascii (i.e., &...)
        """
        lines = [x.strip() for x in raw_text.splitlines()]
        all_text = ' '.join([x for x in lines if len(x)]) # zero length strings
        return [x for x in all_text.split(' ') if len(x) and x[0] != '&'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:28:41.320

这超出了您的要求，但我会考虑调用已经收集此信息的外部数据源。可以在[Programmable Web](http://www.programmableweb.com/)上找到此类服务的好地方（例如[Mergent Company Fundamentals](http://www.programmableweb.com/api/mergent-company-fundamentals)）。并非 Programmable Web 上的所有数据都是最新的，但似乎有很多 API 提供商在那里。

# java - CardLayout 在最后一张卡片上关闭

> ID：15799834
> 
> 赞同：0
> 
> 时间：2013-04-03T23:09:10.187
> 
> 标签：java, swing, cardlayout

所以我有一个带有 CardLayout 的 JPanel。正如预期的那样，此 CardLayout 管理框架中面板的切换。切换由两个按钮完成：“返回”和“下一步”。

我想知道`System.exit(0)`当它在最后*一张卡上*并且再次按下“下一步”时是否有办法关闭整个应用程序（即 call ）。

我到处寻找解决方案，但我找不到任何东西。

问题是：我不知道如何检查哪个是最后一个。

这是我的代码的监听器摘录：

```
public void actionPerformed(ActionEvent arg0) {
        CardLayout l = (CardLayout) holder.getLayout();
        if(arg0.getSource() == opt[1]){ //opt[1] is the "Next" button

                //Insert if statement here to check if
                //the CardLayout is on the last card
                {
                System.exit(0);
                } else {
                    l.next(holder); //holder is the JPanel with the CardLayout
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:11:57.287

[`dispose()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#dispose())继承自哪个[`Window`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html)呢？~~确保您设置：~~

 ~~```
jframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```~~  ~~```
JFrame frame = ...

// ...

frame.setVisible(false); // hide the GUI
frame.dispose(); // destroy and release the GUI resources 
```

* * *

例如：

![在此处输入图像描述](https://i.stack.imgur.com/QqcLq.png)

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class CardLayoutGUI
{
    private JFrame frame;
    private JButton btnBack;
    private JButton btnNext;
    private CardLayout cLayout;
    private JPanel panUp;
    private JPanel panDown;

    private static final String[] cards =
    {"card1", "card2", "card3", "card4", "card5"}; 

    private int currentCard = 0;

    public void init()
    {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ((JPanel)frame.getContentPane()).setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

        btnBack = new JButton("Back");
        btnNext = new JButton("Next");

        btnBack.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                btnNext.setText("Next");
                currentCard--;
                cLayout.show(panUp, cards[currentCard]);
                if(currentCard == 0) btnBack.setVisible(false);
            }
        });

        btnNext.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                btnBack.setVisible(true);
                currentCard++;

                if(currentCard == cards.length - 1) // last card
                {
                    btnNext.setText("Exit");
                    cLayout.show(panUp, cards[currentCard]);
                }
                else if(currentCard >= cards.length)
                {
                    frame.setVisible(false);
                    frame.dispose();
                }
                else
                {
                    cLayout.show(panUp, cards[currentCard]);
                }
            }
        });

        cLayout = new CardLayout();
        panUp = new JPanel(cLayout);
        panDown = new JPanel();
        frame.add(panUp, BorderLayout.CENTER);
        frame.add(panDown, BorderLayout.SOUTH);
        panDown.add(btnBack);
        panDown.add(btnNext);

        for(int i = 0; i < cards.length; i++) createPanels(panUp, cards[i]);

        frame.pack();
        frame.setLocationRelativeTo(null);

        btnBack.setVisible(false);
    }

    public void showGUI()
    {
        frame.setVisible(true);
    }

    private void createPanels(JPanel container, String label)
    {
        JPanel pan = new JPanel();
        pan.add(new JLabel(label));
        container.add(pan, label);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                CardLayoutGUI clg = new CardLayoutGUI();
                clg.init();
                clg.showGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T01:26:18.193

我扩展了 CardLayout 以添加一些功能。其中一个特点是一种`isNextCardAvailable()`方法。有关所有功能，请参阅[卡片布局焦点](http://tips4java.wordpress.com/2008/10/31/card-layout-focus/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T23:21:01.643

问题是确定哪张卡是最后一张。您可以使用卡片`String`数组索引来管理当前位置，并使用[show](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29)方法显示下一个“卡片”。当您超过卡片数组索引时，您可以处理您的`JFrame`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T23:14:39.953

如果您运行 System.exit(0)，则关闭所有应用程序，但如果您只关闭 JFrame，您可以使用 JFrameObject.dispose()。~~

# sql - 为什么存储过程被重新创建，而它使用的表被删除了？

> ID：15799835
> 
> 赞同：1
> 
> 时间：2013-04-03T23:09:20.037
> 
> 标签：sql, sql-server, sql-server-2012

从 SQL Server 2012 数据库中删除旧表和存储过程时，我遇到了一个奇怪的问题。整个想法是首先删除旧表（100+），然后重新创建所有存储过程。因此，如果任何存储过程包含已删除表的引用，则不会创建它。但令人惊讶的是，即使表不存在，所有的存储过程都在创建！

我尝试过重新启动 SQL Server 实例、刷新本地架构、尝试过`WITH RECOMPILE`选项以及一些`DBCC`命令，但没有任何效果。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:24:36.397

没有表存在，仍然可以创建存储过程，只是当你运行它们时，会抛出异常。因此，您不能依靠表来决定是否创建存储过程。

您可以做的是，在您删除所有那些 100+ 旧表后，您可以检查您的存储过程依赖关系，您可以使用 SSMS GUI，只需右键单击存储过程，查看依赖关系，然后选择查看 [Objects on which [. .] 依赖]，那么你就可以知道哪个存储过程有未解析的实体，然后你可以删除存储过程。

# mysql - mysql - 仅当 TABLE EXIST 时执行 SELECT 查询

> ID：15799836
> 
> 赞同：1
> 
> 时间：2013-04-03T23:09:34.373
> 
> 标签：mysql, joomla2.5, joomla-extensions

我正在开发一个 Joomla 模块，其中可以显示图像并链接到 Joomla 文章、Virtuemart 产品或外部链接。

为了必须选择 Virtuemart 产品，我在模块清单 xml 中添加了以下参数：

```
<field 
                    name="image_1_product" 
                    type="sql" 
                    default="10"
                    query="SELECT #__virtuemart_products.virtuemart_product_id, #__virtuemart_products_en_gb.product_name
                        FROM #__virtuemart_products, #__virtuemart_products_en_gb
                        WHERE #__virtuemart_products.virtuemart_product_id = #__virtuemart_products_en_gb.virtuemart_product_id
                        AND #__virtuemart_products.published = 1"
                    key_field="virtuemart_product_id"
                    value_field="product_name"
                    label="LABEL_PRODUCT" 
                    description="DESC_PRODUCT">
                </field> 
```

当安装 Virtuemart 时，这工作得很好。未安装 Virtuemart 时，您会收到错误“未知列” - 这是有道理的。

因为这是一个模块清单选项，所以我只能使用 1 个查询。有没有办法在执行选择之前运行查询来检查表是否存在？喜欢：

```
IF EXISTS TABLE `table_a` (SELECT * FROM table_a) 
```

## 如果是这样，它可以返回如下一行：

## | 编号 | 价值 |

## | 0 | 未找到 Virtuemart |

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:59:47.793

恐怕仅使用单个数据库查询是不可能的。

我能想到的唯一解决方法是为您的模块创建一个参数助手并使用`addfieldpath`您的模块`fieldset`标签。使用此解决方案，您可以编写一个方法来执行查询并创建输出，然后您可以在创建参数之前检查表是否存在。

*例如：*

```
<config>
    <fields name="params">
        <fieldset name="basic" addfieldpath="/modules/mod_mymodule/elements/">
            <field name="image_1_product" type="product" default="10" label="LABEL_PRODUCT" description="DESC_PRODUCT"/>
        </fieldset>
    </fields>
</config> 
```

现在`/modules/mod_mymodule/elements/`创建一个名为的 PHP 文件`product.php`，并按照 Joomla 文档中的说明编写您的自定义查询和字段描述。

Joomla 文档可用于[自定义参数类型](http://docs.joomla.org/Custom_parameter_types)和[创建自定义模板参数类型](http://docs.joomla.org/Creating_custom_template_parameter_types)

# javascript - 强制下载不起作用

> ID：15799837
> 
> 赞同：0
> 
> 时间：2013-04-03T23:09:43.377
> 
> 标签：javascript, node.js, download, geddy

我想在用户单击链接而不是在浏览器中打开链接时提示他们下载。

使用 expressJS，它应该是这样的：

```
app.get('/download', function (req, res) {
  res.download('public/uploads/sample.pdf');
}); 
```

我怎么能用 GeddyJS 做到这一点？

我试过这段代码，但它仍然在浏览器中打开它，这意味着“resp.setHeader”不起作用。

```
this.download = function (req, resp, params) {
  var filename = 'sample.pdf';
  var file = 'public/uploads/sample.pdf';

  resp.setHeader('Content-Disposition', 'attachment; filename="' + filename + '"');
  resp.sendFile(file);
}; 
```

我错过了什么？

之前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:47:18.773

问题是 Geddy 的响应对象没有“setHeader”方法，因此您需要进入并在真正的 Node 响应对象上设置标题。

```
resp.resp.setHeader('Content-Disposition', 'attachment; filename="' + filename + '"'); 
```

# fosuserbundle - 如何在 symfony2.2 中将 FOSUserBundle 与 SonataAdminBundle 集成？

> ID：15799838
> 
> 赞同：1
> 
> 时间：2013-04-03T23:09:45.710
> 
> 标签：fosuserbundle, symfony-sonata, sonata-admin, symfony-2.2

我尝试通过 sonatauserbundle 将 FOSUserBundle 与 symfony2.2 中的 SonataAdminBundle**集成**，但我想打开这个 URL [http://dev.test.com/app_dev.php/register](http://dev.test.com/app_dev.php/register)它说

> “在类 'Application\Sonata\UserBundle\Document\User' 中找不到字段 'username' 的映射。”

我想登录管理面板，但我的测试管理员用户无法登录。

这是我的 composer.js

```
"require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.2.*",
        "doctrine/orm": "~2.2,>=2.2.3",
        "doctrine/doctrine-bundle": "1.2.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.2.*",
        "symfony/monolog-bundle": "2.2.*",
        "sensio/distribution-bundle": "2.2.*",
        "sensio/framework-extra-bundle": "2.2.*",
        "sensio/generator-bundle": "2.2.*",
        "jms/security-extra-bundle": "1.4.*",
        "jms/di-extra-bundle": "1.3.*",
        "doctrine/mongodb-odm": "1.0.*@dev",
        "doctrine/mongodb-odm-bundle": "3.0.*@dev",
        "friendsofsymfony/user-bundle": "*",
        "sonata-project/easy-extends-bundle" : "dev-master",
        "sonata-project/cache-bundle": "dev-master",
        "sonata-project/jquery-bundle": "1.8.x-dev",
        "sonata-project/exporter": "1.2.1",
        "sonata-project/block-bundle": "dev-master",
        "sonata-project/user-bundle": "dev-master",
        "sonata-project/admin-bundle": "dev-master",
        "sonata-project/doctrine-mongodb-admin-bundle": "dev-master",
        "knplabs/knp-menu-bundle": "1.1.x-dev"
    } 
```

这是我的 config.yml

```
# Mongodb Configuration
doctrine_mongodb:
    connections:
        default:
            server: mongodb://localhost:27017
            options: {}
    default_database: test
    document_managers:
        default:
            auto_mapping: true

#FOSUserBundle Configuration
# fos_user:
#     db_driver: mongodb # other valid values are 'mongodb', 'couchdb' and 'propel'
#     firewall_name: main
#     user_class: Acme\UserBundle\Entity\User

sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts:   [admin]

        sonata.block.service.text:
        sonata.block.service.rss:

sonata_admin:
    title:      Admin Panel
    templates:
        ## default global templates
        layout:  SonataAdminBundle::standard_layout.html.twig
        ajax:    SonataAdminBundle::ajax_layout.html.twig

        ## default actions templates, should extend a global templates
        list:    SonataAdminBundle:CRUD:list.html.twig
        show:    SonataAdminBundle:CRUD:show.html.twig
        edit:    SonataAdminBundle:CRUD:edit.html.twig

fos_user:
    db_driver: mongodb
    firewall_name: main
    user_class: Application\Sonata\UserBundle\Document\User

sonata_user:
    security_acl: false
    manager_type: mongodb

# Swiftmailer Configuration
swiftmailer:
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%
    spool:     { type: memory } 
```

我开发使用symfony2.2和mongodb，如果你知道请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T17:43:28.380

也许 Symfony 2 无法读取映射。

在您的 app/config/config.yml 中，您可以查找教义配置。

```
doctrine_mongodb:
    connections:
        default:
            server: mongodb://localhost:27017
            options: {}
    default_database: hello_%kernel.environment%
    document_managers:
        default:
            mappings:
                AcmeDemoBundle: ~ 
```

为映射部分添加捆绑包

我希望这有助于祝福

# android - MotionEvent.ACTION_UP 未调用

> ID：15799839
> 
> 赞同：77
> 
> 时间：2013-04-03T23:10:07.183
> 
> 标签：android, listview

考虑下面的方案（为了更好地理解我的问题）。 ![在此处输入图像描述](https://i.stack.imgur.com/VmKEk.png)

如您所见，我正在考虑使用填充包围的列表视图。现在，如果用户按下列表视图项，作为我为其提供浅蓝色背景颜色的操作。现在，我的应用程序正在处理 onTouch 事件本身以确定诸如

*   点击
*   从左到右滑动
*   从右向左滑动

这是我的代码。

```
public boolean onTouch(View v, MotionEvent event) {
        if(v == null)
        {
            mSwipeDetected = Action.None;
            return false;
        }
        switch (event.getActionMasked()) {
        case MotionEvent.ACTION_DOWN: {
            downX = event.getRawX();
            downY = event.getRawY();
            mSwipeDetected = Action.Start;

         // Find the child view that was touched (perform a hit test)
            Rect rect = new Rect();
            int childCount = listView.getChildCount();
            int[] listViewCoords = new int[2];
            listView.getLocationOnScreen(listViewCoords);
            int x = (int) event.getRawX() - listViewCoords[0];
            int y = (int) event.getRawY() - listViewCoords[1];
            View child;
            for (int i = 0; i < childCount; i++) {
                child = listView.getChildAt(i);
                child.getHitRect(rect);
                if (rect.contains(x, y)) {
                    mDownView = child;
                    break;
                }
            }

            return false; // allow other events like Click to be processed
        }
        case MotionEvent.ACTION_MOVE: {
            upX = event.getRawX();
            upY = event.getRawY();
            float deltaX=0,deltaY=0;
             deltaX = downX - upX;
             deltaY = downY - upY;

                if(deltaY < VERTICAL_MIN_DISTANCE)
                {
                            setTranslationX(mDownView, -(deltaX));
                            setAlpha(mDownView, Math.max(0f, Math.min(1f, 1f - 2f * Math.abs(deltaX) / listView.getWidth())));
                            return false;
                }
                else
                {
                    forceBringBack(v);
                }

                          return false;              

        }
        case MotionEvent.ACTION_UP:
        {

             stopX = event.getX();
             float stopValueY = event.getRawY() - downY;             
             float stopValue = stopX - downX;

             if(!mDownView.isPressed())
             {
                 forceBringBack(mDownView);
                 return false;
             }             

             boolean dismiss = false;
             boolean dismissRight = false;

             if(Math.abs(stopValue)<10)
             {
                 mSwipeDetected = Action.Start;
             }
             else
             {
                 mSwipeDetected = Action.None;

             }
             String log = "";
             Log.d(log, "Here is Y" + Math.abs(stopValueY));
             Log.d(log, "First Comparison of Stop Value > with/4" + (Math.abs(stopValue) > (listView.getWidth() /4)));
             Log.d(log, "Second Comparison " + (Math.abs(stopValueY)<VERTICAL_MIN_DISTANCE));
             Log.d(log, "Action Detected is " + mSwipeDetected + " with Stop Value  " + stopValue);

             if((Math.abs(stopValue) > (listView.getWidth() /4))&&(Math.abs(stopValueY)<VERTICAL_MIN_DISTANCE))
             {
                 dismiss = true;
                 dismissRight = stopValue > 0;

                 if(stopValue>0)
                 {
                 mSwipeDetected = Action.LR;

                 }
                 else
                     mSwipeDetected = Action.RL;
             }
             Log.d(log, "Action Detected is " + mSwipeDetected + " with Stop Value after dissmiss" + stopValue);

             if(dismiss)
             {
                 if(dismissRight)
                     mSwipeDetected = Action.LR;
                 else
                     mSwipeDetected = Action.RL;
                 animate(mDownView)
                 .translationX(dismissRight ? listView.getWidth() : - listView.getWidth())
                 .alpha(0)
                 .setDuration(mAnimationTime)
                 .setListener(new AnimatorListenerAdapter() {
                     public void onAnimationEnd(Animator animation)
                     {

                     }
                });
             }
             else
             {
                 animate(mDownView)
                 .translationX(0)
                 .alpha(1)
                 .setDuration(mAnimationTime)
                 .setListener(null);
             }

             break;           

        }
        }
        return false;
    } 
```

如您所见，我在 MotionEvent.ACTION_UP 中确定了执行的动作，并相应地设置了 Enum Action 的值。如果用户没有跨越列表视图边界，这个逻辑就像一个魅力。

现在，如果用户在滑动时（或具体而言），沿着列表项移动他的手指从蓝色变为橙色，则 MotionEvent.ACTION_UP 不会提供给 listview，这会导致我的代码无法做出决定并且由于 translationX () 方法和 setAlpha()，由于在这种情况下没有确定任何操作，因此该特定列表项变为空白。

问题并不止于此，因为我不是每次都在膨胀视图，每次都会膨胀相同的 translateX() 行，从而导致多次出现空白/白名单项目。

有什么办法可以做到，即使我没有遇到 MotionEvent.ACTION_UP，我仍然可以做出一些决定吗？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2013-05-11T08:43:02.843

你应该`return true;`在`case MotionEvent.ACTION_DOWN:`，所以`MotionEvent.ACTION_UP`将被处理。

* * *

正如[View.OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)所解释的：

> **返回**：
> 
> 如果侦听器已经消费了事件，则为 true，否则为 false。

`MotionEvent.ACTION_UP`在发生之前不会被调用`MotionEvent.ACTION_DOWN`，对此的合乎逻辑的解释是，`ACTION_UP`如果`ACTION_DOWN`在它之前从未发生过，它就不可能发生。

此逻辑使开发人员能够在`ACTION_DOWN`.

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-04-18T05:09:35.237

另请注意，在某些情况下（例如屏幕旋转），手势可能会被取消，在这种情况下`MotionEvent.ACTION_UP`不会发送 a。而是`MotionEvent.ACTION_CANCEL`发送 a 。因此，一个正常的动作 switch 语句应该如下所示：

```
switch (event.getActionMasked()) {
    case MotionEvent.ACTION_DOWN:
        // check if we want to handle touch events, return true
        // else don't handle further touch events, return false
    break;

    // ... handle other cases

    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_CANCEL:
        // finish handling touch events
        // note that these methods won't be called if 'false' was returned
        // from any previous events related to the gesture
    break;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-19T01:48:17.670

我不认为添加`return true;`案例`MotionEvent.ACTION_DOWN:`最终会解决问题。`return false`它只是使本可以像魅力一样完成工作的情况变得复杂。

需要注意的是：`MotionEvent.ACTION_DOWN: /*something*/ return true;`将阻止任何其他可用于视图的侦听器回调，甚至是 onClickListenerm，而正确地`return false`in`MotionEvent.ACTION_UP:`可以帮助 MotionEvent 传播到正确的目的地。

参考他的原始代码源：[https ://github.com/romannurik/android-swipetodismiss](https://github.com/romannurik/android-swipetodismiss)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T20:53:06.323

正如[Danpe 在他简洁的回答中解释的那样](https://stackoverflow.com/a/16495363/2162226)- 我必须添加`ACTION_DOWN`代码才能`ACTION_UP`识别。

```
 case MotionEvent.ACTION_DOWN:

                return true;

            case MotionEvent.ACTION_UP:

                XyPos xyPos = new XyPos();
                xyPos.x = last_x;
                xyPos.y = last_y;
                handleViewElementPositionUpdate(xyPos);

                break; 
```

无论如何，我的整个`onTouch(..)`方法都返回了 true，所以我不确定为什么这还不够……但很高兴有这个快速的解决方案……（谢谢！）

# mysql - 使用 Java Servlet 访问 MySQL？

> ID：15799841
> 
> 赞同：2
> 
> 时间：2013-04-03T23:10:17.680
> 
> 标签：mysql, jsp, web-applications, servlets, insert

解决方案：

我添加了这段代码

```
Class.forName("com.mysql.jdbc.Driver"); 
```

兄弟

```
Connection con = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/test", "root", "root"); 
```

谢谢大家回复我的问题

=====================

我有问题，我尝试使用 servlet 将数据插入 mysql db，**但我无法访问 MySQL**

*   数据库名称：test
*   表名：测试
*   我已经在项目库中添加了 jdbc 连接器
*   我正在使用 JDK 1.7、NetBeans 7.3、MySQL 5.6、Tomcat 7.0、Connector/J 5.1.24

**1-这是 sign_up.jsp 页面中的“表单操作”：**

```
<form action="RegisterUser" method="post">
    <td><input type="submit" value="Submit"></td>
</form> 
```

**2-这是 RegisterUser.java servlet：**

```
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import com.mysql.jdbc.Driver;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.logging.Level;
import java.util.logging.Logger;

@WebServlet(urlPatterns = {"/RegisterUser"})
public class RegisterUser extends HttpServlet {
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException, SQLException {

    try{
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost/test", "root", "root");
        Statement s = (Statement) con.createStatement();

        String name = "Hassan3";
        int phone = 123456;

        String insert = "INSERT INTO test VALUES ('\" + name + \"', \" + phone + \")";

        s.executeUpdate(insert);

        s.close();
        con.close();

    }catch(Exception e){
        throw new SecurityException("Class not found " + e.toString());
    }
}

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    try {
        processRequest(request, response);
    } catch (SQLException ex) {
        Logger.getLogger(RegisterUser.class.getName()).log(Level.SEVERE, null, ex);
    }
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    try {
        processRequest(request, response);
    } catch (SQLException ex) {
        Logger.getLogger(RegisterUser.class.getName()).log(Level.SEVERE, null, ex);
    }
}

@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold> 
```

}

**3-异常结果：**

```
HTTP Status 500 - Class not found java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/test

type Exception report

message Class not found java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/test

description The server encountered an internal error that prevented it from fulfilling this request.

exception
java.lang.SecurityException: Class not found java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/test
    RegisterUser.processRequest(RegisterUser.java:66)
    RegisterUser.doPost(RegisterUser.java:173)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.39 logs. 
```

**4-但是当我使用相同的代码但在“没有 servlet 或 web 应用程序”的 java 文件中它工作正常：**

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.Statement;

public class Test {
    public static void main(String[] args){
    try{
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost/test", "root", "root");
        Statement s = (Statement) con.createStatement();

        String name = "Hassan4";
        int phone = 8985895;

        String insert = "INSERT INTO test VALUES ('" + name + "', " + phone + ")";

        s.executeUpdate(insert);

        s.close();
        con.close();
        System.out.println("done");
    }catch(Exception e){
        throw new SecurityException("Class not found " + e.toString());
    }
} 
```

}

那么servlet有什么问题？**为什么代码适用于 java 应用程序。但它不适用于网络应用程序。？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:21:31.573

你得到`Class not found java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/test`

这意味着当您从 Web 应用程序运行它时，JRE 在 Classpath 中找不到 Class。

如果此代码在您的 Standalone 中有效，则意味着您需要在某处包含 c`om.mysql.jdbc.Driver`类（所谓的**JDBC**驱动程序）的 JAR 文件。这个 JAR 需要在 Tomcat 中可见。因此，我建议将其放置在项目目录的`mysql-jdbc.jar`物理位置。`/WEB-INF/lib`

或者，您可以在此处添加第三方库，例如 JDBC 驱动程序，使用

> 右键单击项目名称--> 属性

![在此处输入图像描述](https://i.stack.imgur.com/HMERf.png)

从您的`NetBeans`IDE

然后重新启动Tomcat应该可以工作。

第二，你不需要

```
import com.mysql.jdbc.Driver; 
```

在你的 Servlet 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:21:47.167

大卫是对的，我想补充一下，您也可以通过将jar文件粘贴到java的安装文件夹中来安装驱动程序。

```
\Program Files\Java\jre7\lib\ext 
```

好吧，我不太喜欢 mysql，并且总是在 windows server 2008 上使用 mssql。这是我使用的代码，我可能是你的答案，因为 mysql 连接的工作方式与 sql 几乎相同。

```
 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
 conn = DriverManager.getConnection("jdbc:sqlserver://localhost:1433;databaseName="+database+";user="+user+";password="+password); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T23:13:53.197

首先，您应该将其放入持久层。

1) 确保您的 JDBC 驱动程序就位。将它复制到您的类路径中，例如 /WEB-INF/lib 目录。链接：[MySQL JDBC驱动下载页面](http://dev.mysql.com/downloads/connector/j/)

2）检查您的连接字符串：`jdbc:mysql://<server>:<port>/<database>`，看起来端口丢失了。尝试`jdbc:mysql://127.0.0.1:3306/test`

# xna - 可以导出 3dsmax 模型以包含照明效果吗？

> ID：15799842
> 
> 赞同：1
> 
> 时间：2013-04-03T23:10:41.630
> 
> 标签：xna, export, effects, 3dsmax

我创建了一个非常基本的圆柱体，添加了一个材质和一个发光效果我可以导出一个模型以包含发光效果，以便模型看起来像渲染吗？

[http://imgur.com/VaNJLj4](http://imgur.com/VaNJLj4)

澄清：我可以将模型导出到 .fbx 或 .x 并让它包含闪电信息，这样如果我将它导入到 unity 或 xna 中，模型会看起来像渲染吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:52:31.693

“发光”实际上是一种后期处理效果。其实是一片模糊。有很多关于如何在 XNA 中执行此操作的教程，但我怀疑您是否可以轻松地从建模软件中导出它（因为根本不可能）。

原因是这样做通常需要设置多个渲染目标、自定义着色器等，这些都是您必须自己完成的。

您需要多个渲染目标的原因；渲染模型时，像素着色器仅处理（可见的）外部顶点内的像素。因此，您不能像图片中那样在模型本身之外渲染平滑的“淡出”。

您通常做的是使用一个着色器，它可以正常渲染您的对象，但也会将“发光颜色”渲染到其他渲染目标。当所有模型都完成渲染后，您对第二个 RT 进行模糊效果。然后将主 RT 与模糊发光 RT 混合。

这是非常肤浅的，我还没有在 AGES 中做过，所以请查看一些教程。此外，这个bloom-sample 基本上做同样的事情，但在整个场景中，我认为：http: [//xbox.create.msdn.com/en-US/education/catalog/sample/bloom](http://xbox.create.msdn.com/en-US/education/catalog/sample/bloom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:13:54.590

在 3dsmax 中添加带有滤镜的发光，然后它会自动渲染。小通知，3dsmax 是一个非常大的程序，有很多可能性，只要花点时间找出一切。相信我，这需要时间。

# c# - 如何返回 Oracle Custom Rec 类型

> ID：15799843
> 
> 赞同：0
> 
> 时间：2013-04-03T23:10:50.560
> 
> 标签：c#, .net, oracle11g, odp.net

我必须返回一条记录，并且 dba 创建一个返回自定义记录类型的包。我在网上找不到任何帮助。我希望你能帮助我。

以下是 Oracle 中定义的函数。在 C# 中，我使用 ODP.NET 4

```
FUNCTION calcAcct(p_1  IN VARCHAR2, p_2 IN DATE) RETURN AcctRecType; 
```

这是我在 SQL 中获取记录的方法，只是很难使用 C#。

```
DECLARE
    myRec PKG_PORTAL.ACCTRECTYPE;
BEGIN
    myRec := PKG_PORTAL.calcAcct('P1',TO_DATE('03/01/2013','mm/dd/yyyy'));
    DBMS_OUTPUT.PUT_LINE(myRec.column1);
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:56:06.083

```
DECLARE
    myRec PKG_PORTAL.ACCTRECTYPE;
BEGIN
    myRec := PKG_PORTAL.calcAcct('P1',TO_DATE('03/01/2013','mm/dd/yyyy'));

    SELECT myRec.column1, myRec.column2 FROM DUAL;
END; 
```

# python - 如何使用 linux bash shell 工具在服务器上搜索文件名列表

> ID：15799850
> 
> 赞同：0
> 
> 时间：2013-04-03T23:11:20.483
> 
> 标签：python, linux, search

我正在查看服务器是否具有我正在寻找的文件名。我在文本文件上有文件名列表，并想查看这些文件是否存在于服务器中。有没有一种方法可以在 python 或 linux bash shell 工具中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:42:41.113

假设文件将名称保存为每行一个，则以下内容应该有效：

```
find / -type f | grep -f **filenames** 
```

如果您的机器速度慢或文件很多，请等待很长一段时间才能完成。

如果 locate (updatedb) 可用/正在运行，则以下可能会更快。

```
locate -r . | grep -f **filenames** 
```

# unit-testing - angularjs - 测试控制器

> ID：15799853
> 
> 赞同：5
> 
> 时间：2013-04-03T23:11:42.613
> 
> 标签：unit-testing, angularjs

我刚从 angular 开始，我想为我的控制器编写一些简单的单元测试，这就是我得到的。

应用程序.js：

```
'use strict';

// Declare app level module which depends on filters, and services
angular.module('Prototype', ['setsAndCollectionsService']).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/dashboard', {templateUrl: 'partials/dashboard.html', controller: 'DashboardController'});
    $routeProvider.when('/setsAndCollections', {templateUrl: 'partials/setsAndCollections.html', controller: SetsAndCollectionsController});
    $routeProvider.when('/repetition', {templateUrl: 'partials/repetition.html', controller: RepetitionController});
    $routeProvider.otherwise({redirectTo: '/dashboard'});
  }]); 
```

和controllers.js

```
'use strict';

/* Controllers */

    var myApp = angular.module('Prototype');

    myApp.controller('DashboardController', ['$scope', function (scope) {
        scope.repeats = 6;
    }]);

/*function DashboardController($scope) {
 $scope.repeats = 5;
 };*/

function SetsAndCollectionsController($scope, $location, collectionsService, repetitionService) {
    $scope.id = 3;
    $scope.collections = collectionsService.getCollections();
    $scope.selectedCollection;
    $scope.repetitionService = repetitionService;

    $scope.switchCollection = function (collection) {
        $scope.selectedCollection = collection;
    };

    $scope.addCollection = function () {
        $scope.collections.push({
            name: "collection" + $scope.id,
            sets: []
        });
        ++($scope.id);
    };

    $scope.addSet = function () {
        $scope.selectedCollection.sets.push({
            name: "set" + $scope.id,
            questions: []
        });
        ++($scope.id);
    };

    $scope.modifyRepetition = function (set) {
        if (set.isSelected) {
            $scope.repetitionService.removeSet(set);
        } else {
            $scope.repetitionService.addSet(set);
        }

        set.isSelected = !set.isSelected;
    };

    $scope.selectAllSets = function () {
        var selectedCollectionSets = $scope.selectedCollection.sets;

        for (var set in selectedCollectionSets) {
            if (selectedCollectionSets[set].isSelected == false) {
                $scope.repetitionService.addSet(set);
            }
            selectedCollectionSets[set].isSelected = true;
        }
    };

    $scope.deselectAllSets = function () {
        var selectedCollectionSets = $scope.selectedCollection.sets;

        for (var set in selectedCollectionSets) {
            if (selectedCollectionSets[set].isSelected) {
                $scope.repetitionService.removeSet(set);
            }
            selectedCollectionSets[set].isSelected = false;
        }
    };

    $scope.startRepetition = function () {
        $location.path("/repetition");
    };
}

function RepetitionController($scope, $location, repetitionService) {
    $scope.sets = repetitionService.getSets();
    $scope.questionsLeft = $scope.sets.length;
    $scope.questionsAnswered = 0;
    $scope.percentageLeft = ($scope.questionsLeft == 0 ? 100 : 0);

    $scope.endRepetition = function () {
        $location.path("/setsAndCollections");
    };
} 
```

现在我正在将全局函数控制器转换为由 Angular API 定义的控制器，如`DashboardController`.

现在在我的测试中：

```
describe("DashboardController", function () {
    var ctrl, scope;

    beforeEach(inject(function ($rootScope, $controller) {
        scope = $rootScope.$new();
        ctrl = $controller('DashboardController', {$scope: scope});
    }));

    it("has repeats attribute set to 5", function () {
        expect(scope.repeats).toBe(5);
    });
}); 
```

我正进入（状态

```
 Error: Argument 'DashboardController' is not a function, got undefined 
```

我想知道，我的错误在哪里？如果我理解这一点，`ctrl = $controller('DashboardController', {$scope: scope});`应该将我新创建的范围注入到 my`DashboardController`中以使用属性填充它 - 在这种情况下，`repeats`.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-04T01:35:48.703

您需要先设置原型模块。

```
beforeEach(module('Prototype')); 
```

将其添加到您的测试中，高于当前`beforeEach`将起作用。

```
describe("DashboardController", function () {
  var ctrl, scope;

  beforeEach(module('Prototype'));

  beforeEach(inject(function ($rootScope, $controller) {
    scope = $rootScope.$new();
    ctrl = $controller('DashboardController', {$scope: scope});
  }));

  it("has repeats attribute set to 5", function () {
    expect(scope.repeats).toBe(5);
  });
}); 
```

# mysql - 需要帮助解决Mysql中的这个子查询

> ID：15799855
> 
> 赞同：-3
> 
> 时间：2013-04-03T23:11:54.427
> 
> 标签：mysql

我需要你的帮助来解决这个问题：

```
select idiomas.bandeira,conteudos.nid, dreg, titulo, tag from conteudos 
            inner join conteudos_tag on conteudos.nid = conteudos_tag.cod_conteudo
            inner join tagstree on conteudos_tag.cod_tag = tagstree.nid
            inner join idiomas on conteudos.nid_idioma = idiomas.nid
            order by conteudos.nid desc limit 5 
```

而这个回报：

```
img/idiomas/pt.png;30;2013-04-04 12:41:00;titulo;Voip
img/idiomas/pt.png;30;2013-04-04 12:41:00;titulo;Linux
img/idiomas/pt.png;28;2012-08-07 01:50:18;Números e Tarifários;Números e tarifários
img/idiomas/pt.png;27;2012-08-07 01:33:48;Terminais VoIP2;Terminais
img/idiomas/pt.png;26;2012-08-03 19:06:13;Rede Estruturada;Rede Estruturada 
```

我需要返回这个：

```
img/idiomas/pt.png;30;2013-04-04 12:41:00;titulo;Voip, Linux
img/idiomas/pt.png;28;2012-08-07 01:50:18;Números e Tarifários;Números e tarifários
img/idiomas/pt.png;27;2012-08-07 01:33:48;Terminais VoIP2;Terminais
img/idiomas/pt.png;26;2012-08-03 19:06:13;Rede Estruturada;Rede Estruturada 
```

更改位于第 1 行

崔睿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:13:51.840

好吧，这有点难说，因为我真的不知道哪一列是哪一列，但我估计：

```
select idiomas.bandeira,conteudos.nid, dreg, titulo,
GROUP_CONCAT(tag, SEPARATOR ', ') AS tag from conteudos 
        inner join conteudos_tag on conteudos.nid = conteudos_tag.cod_conteudo
        inner join tagstree on conteudos_tag.cod_tag = tagstree.nid
        inner join idiomas on conteudos.nid_idioma = idiomas.nid
GROUP BY conteudos.nid
        order by conteudos.nid desc limit 5 
```

这会将所有结果按看似唯一的分组`nid`。如果同一个标签有多个标签`nid`，它们将存储在一列中并用 分隔`,`。*对所有*非聚合列进行分组可能更准确，或者`GROUP_CONCAT`如果有其他非唯一列也使用它。

# php - 需要非常有趣的特殊课程。如何重新分配'$this'或如何计算这个？

> ID：15799859
> 
> 赞同：0
> 
> 时间：2013-04-03T23:12:29.407
> 
> 标签：php, class, object, this

我有一个类似于这个的代码：

```
class A
{
   public function a()
   {
       echo "I'm at 'a' function of the class 'A'<br>";
   }

    public function b()
   {
       echo "I'm at 'b' function of the class 'A'<br>";
   }
   // ... and several other functions.

   public function z()
   {
       echo "I'm at 'z' function of the class 'A'<br>";
   }

}

class B
{
   public function a()
   {
       echo "I'm at 'a' function of the class 'B'<br>";
   }

    public function b()
   {
       echo "I'm at 'b' function of the class 'B'<br>";
   }
   // ... and several other functions.

   public function z()
   {
       echo "I'm at 'z' function of the class 'B'<br>";
   }

}

class Special
{
    public function construct($param)
    {
         //This code will not work. Is there an alternative?
         $this = new $param;
    }
}

$special = new Special("A");
$special->a();

$special = new Special("B");
$special->b();

Ouput:

    I'm at 'a' function of the class 'A'
    I'm at 'b' function of the class 'B' 
```

问题是我真的很想写一个类（在这种情况下`Special`），它可以执行传递的类中的方法。

我能想到的唯一丑陋的方法是为我在 A 和 BI 上的每个函数编写一个类似于这个的代码：

```
public function h()
{
    // $param could be 'A' or 'B';
    $this->param->h();
} 
```

但我真的不喜欢这样做，因为对于我在“A”或“B”类上的每个功能，我都需要这样做。

我想要的主要是`Special`该类可以运行函数，就好像它是作为构造方法的参数传递的另一个类一样。

我该如何计算这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:22:52.170

我看到了两种方法来做到这一点。第一个更像是工厂模式，第二个使用重载。

工厂：

```
class Special
{
    public static function inst($param)
    {
         //This code will not work. Is there an alternative?
        return new $param;
    }
}

$special = Special::inst("A");
$special->a();

$special = Special::inst("B");
$special->b(); 
```

[http://codepad.viper-7.com/LWl1Sn](http://codepad.viper-7.com/LWl1Sn)

[http://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)

在工厂模式中，您从静态方法返回类的实例。然后变量真正具有的是对其他类的引用，您只是`Special`用来进行实例化。

第二种方法将实例化保持在内部，但使用 php 的 __GET、__SET 和 __CALL 来获取/设置/调用该对象。

```
class Special
{
    private $internal;

    public function __construct($param)
    {
         $this->internal = new $param;
    }

    public function __get($key)
    {
        return $this->internal->$key;
    }

    public function __set($key,$value)
    {
        $this->internal->$key=$value;
    }

    public function __call($method,$args)
    {
        return call_user_func_array(array($this->internal,$method),$args);
    }

}

$special = new Special("A");
$special->a();

$special = new Special("B");
$special->b(); 
```

[http://codepad.viper-7.com/AlaR6D](http://codepad.viper-7.com/AlaR6D)

两者都应该用工厂做同样的事情，很可能是首选方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:16:14.240

我*想*我明白你的意思——你可以将一个对象作为参数传递给另一个类。

像这样的东西：

```
class A {
    public function calledByB(){}  
}
class B {

    public function callsA( A $obj ){
        $obj->calledByB();
    }
}

$b = new B();
$b->callsA( new A() ); 
```

您创建一个对象的新实例`A`并将其传递给另一个类的方法或构造函数。

# mysql - SQL和模糊比较

> ID：15799861
> 
> 赞同：9
> 
> 时间：2013-04-03T23:12:42.927
> 
> 标签：mysql, sql, select, fuzzy-logic, fuzzy-comparison

假设我们有一张 People 表（姓名、姓氏、地址、SSN 等）。

我们想找到与指定人员 A“非常相似”的所有行。我想对 A 和表 People 中的所有行进行某种模糊逻辑比较。将有几个模糊推理规则分别在几个列上工作（例如，3 个名称模糊规则，2 个姓氏规则，5 个地址规则）

问题是以下两种方法中哪一种更好，为什么？

1.  将所有模糊规则实现为存储过程，并使用一个繁重的 SELECT 语句来返回与 A“非常相似”的所有行。这种方法可能包括使用 soundex、sim metric 等。

2.  实现一个或多个更简单的 SELECT 语句，该语句返回不太准确的结果，与 A“相当相似”，然后将 A 与所有返回的行（数据库外部）进行模糊比较以获得“非常相似”的行。所以模糊比较将用我最喜欢的编程语言来实现。

表 People 应该有多达 500k 行，我想每天进行大约 500-1000 次这样的查询。我使用 MySQL（但这还有待考虑）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:28:19.467

我真的不认为有一个明确的答案，因为它取决于问题中没有的信息。无论如何，评论太长了。

DBMS 擅长根据索引检索信息。除非它专门用于此特定目的（如@Adrian 所回答），否则让数据库服务器在繁重的计算中浪费时间是没有意义的。

因此，您的客户端应用程序应委托 DBMS 检索规则所需的信息。

如果计算量很小，都可以在服务器上完成。否则，将其拉入客户端系统。

第二种方法的缺点在于从服务器传输到客户端的数据量以及要建立的连接数。因此，通常它是服务器中计算和数据传输之间的折衷。根据模糊规则的特殊性来实现平衡。

编辑：我在评论中看到您几乎肯定必须在客户端中实现代码。在这种情况下，出于维护目的，您应该考虑一个额外的标准，代码局部性，即尝试将所有相关的代码放在一起，而不是在系统（和语言）之间传播。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:10:53.023

我会说你最好使用简单的选择来获得最接近的匹配，而不用锤击数据库，然后在你的应用程序层做繁重的工作。我建议这个解决方案的原因是可扩展性：如果您在应用程序层进行繁重的工作，那么您的问题是 map-reduce 样式解决方案的完美用例，您可以在节点之间分配相似性处理并获得结果比通过数据库更快地返回；另外，这样，您不会锁定数据库并减慢可能同时进行的任何其他操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T00:02:03.437

由于您仍在考虑使用什么数据库 PostgreSQL 具有提供 Levenshtein 和 Soundex 函数的模糊字符串匹配模块[。](http://www.postgresql.org/docs/current/static/fuzzystrmatch.html)此外，您可能想查看[此处](https://stackoverflow.com/a/7747765/2115135)描述的 pg_trm 模块。也许您也可以使用 soundex() 将索引放在列上，这样您就不必每次都计算它。但是您似乎过早地进行了优化，因此我的建议是使用 pg 进行测试，然后想知道您是否需要优化，考虑到您几乎有两分钟的时间运行一个查询，您提供的数字确实看起来并不多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:39:25.483

我会考虑的一个选项是在“People Talbe”中添加一个列，即该人的 SoundEx 值。

我已经使用

```
Select [Column}
From People P 
    Inner join TableA A  on Soundex(A.ComarisonColumn) = P.SoundexColumn 
```

这将返回 TableA 中与 People Tables SoundEx 列中具有相同 SoundEx 值的任何内容。

我没有在那种大小的表上使用过这种查询，但我认为尝试它没有问题。您还可以索引该 SoundExColumn 以帮助提高性能。

# ios - 更新 CoreData iOS

> ID：15799865
> 
> 赞同：0
> 
> 时间：2013-04-03T23:13:08.657
> 
> 标签：ios, xcode, uitableview, core-data, nsmanagedobject

我想知道如何更新从 tableView 中选择的 coredata 记录我的代码以保存 coredata 是：

```
- (IBAction)juardar:(id)sender {

NSUserDefaults *defs=[NSUserDefaults standardUserDefaults];

NSString *sedef_mat=[NSString stringWithFormat:@"%@",[defs objectForKey:@"Materia"]];
//NSLog(@"%@",sedef_mat);

NSManagedObjectContext *context = [self managedObjectContext];

// Create a new managed object
NSManagedObject *newtarea = [NSEntityDescription insertNewObjectForEntityForName:@"Tareas" inManagedObjectContext:context];
[newtarea setValue:self.Nombre.text forKey:@"nombre"];
[newtarea setValue:self.Descripcion.text forKey:@"descripcion"];
[newtarea setValue:sedef_mat forKey:@"materia"];

NSError *error = nil;
// Save the object to persistent store
if (![context save:&error]) {
    //NSLog(@"Can't Save! %@ %@", error, [error localizedDescription]);
} 
```

}

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:29:27.000

只需设置新值，然后像上面一样保存上下文。但是您将使用获取的结果：

```
for (Tareas *object in fetchedResultsController.fetchedObjects)
{
    Tareas *t = (Tareas *)object;
    if ([t.nombre isEqualToString:@"NewValue1"])
    {
        Tareas.nombre = @"NewValue1";
        Tareas.description = @"NewValue2";
        Tareas.materia = @"NewValue3";
    }
} 
```

然后像上面一样保存上下文：

```
if (![context save:&error])
    etc. 
```

# php - 追加而不是覆盖

> ID：15799873
> 
> 赞同：0
> 
> 时间：2013-04-03T23:13:40.603
> 
> 标签：php, jquery

我有这段代码，我正在处理，我试图追加而不是覆盖#preview div。我正在为 jquery 使用 JqueryForm 插件。

```
 $(document).ready(function() { 
    $('#photoimg').on('change', function() { 
        $("#preview").html('<img src="load.gif" alt="Uploading"/>');
        $("#imageform").ajaxForm({
        target: '#preview'
    }).submit();

        });
    }); 
```

我不太确定我怎么能做到这一点。

稍后编辑：我有这个表格：

```
<form id="imageform" method="post" enctype="multipart/form-data" action='ajaximage.php'>
Upload your image <input type="file" name="photoimg" id="photoimg" />
</form>
<div id='preview'>
</div> 
```

当我浏览并选择图像时，ajaximage.php 会验证并上传图像，如果成功，它将回显 #preview div 中显示的消息。问题是即使我使用附加它也会覆盖 div。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T23:14:40.930

你很接近了：

```
$("#preview").append('<img src="load.gif" alt="Uploading"/>'); 
```

这是[文档](http://api.jquery.com/append/)。

* * *

编辑：根据您更新的问题，您可能需要动态创建一个目标供`ajaxForm`插件使用。这是一个例子：

```
$(document).ready(function() { 
    $('#photoimg').on('change', function() { 
        $("#preview").html('<img src="load.gif" alt="Uploading"/>');
        // create a dynamic target that we'll add to #preview
        var $target = $('<div />').appendTo('#preview');
        $target.attr('id', 'preview-target-' + Math.ceil(Math.random()*999999));
        $("#imageform").ajaxForm({
            // use the new target element's id for the ajaxForm target
            target: '#' + $target.attr('id')
        }).submit();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:17:41.563

杰马尔是对的。

这是它的填写示例命令，以供将来参考。

`$('#idoftarget').append('<div>new stuff</div>');`

# python - Django：通过注释字段的总和订购查询集？

> ID：15799874
> 
> 赞同：7
> 
> 时间：2013-04-03T23:13:43.413
> 
> 标签：python, sql, django, django-orm

我正在建立一个 Django 站点进行讨论。用户可以参与讨论，也可以对讨论和讨论中的消息投赞成票。一个简化的数据模型如下：

```
class Discussion:
    name = models.CharField(max_length=255)

class Message:
    owner = models.ForeignKey(User, related_name='messages')
    body = models.TextField()
    discussion = models.ForeignKey(Discussion, related_name='messages')

class MessageApprovalVote:
    owner = models.ForeignKey(User, related_name='message_approval_votes')
    message = models.ForeignKey(Message, related_name='approval_votes')

class DiscussionApprovalVote:
    owner = models.ForeignKey(User, related_name='discussion_approval_votes')
    discussion = models.ForeignKey(Discussion, related_name='approval_votes') 
```

我想选择前 20 个“最活跃”的讨论，这意味着按该讨论的消息数、消息批准投票总数和讨论批准投票数的总和排序，或者（在伪代码中）：

```
# Doesn't work
Discussion.objects.
    order_by(Count('messages') + 
             Count('approval_votes') + 
             Count('messages__approval_votes')) 
```

使用注释，我可以计算三个评分因素的总和：

```
scores = Discussion.objects.annotate(
    total_messages=Count('messages', distinct=True),
    total_discussion_approval_votes=Count('approval_votes', distinct=True),
    total_message_approval_votes=Count('messages__approval_votes', distinct=True)) 
```

然后，当我找到`extra`方法时，我以为我正在做某事：

```
total_scores = scores.extra(
    select={
        'score_total': 'total_messages + total_discussion_approval_votes + total_message_approval_votes'
    }
) 
```

然后就可以做到：

```
final_answer = total_scores.order_by('-score_total')[:20] 
```

但`extra`电话给出了一个`DatabaseError`：

```
DatabaseError: column "total_messages" does not exist
LINE 1: SELECT (total_votes + total_messages + total_persuasions) AS... 
```

因此我被挫败了。该`extra`方法不能引用`annotate`d 字段吗？除了使用原始 sql 查询之外，还有其他方法可以做我想做的事情吗？如果这有所作为，我正在使用 Postgres。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T01:21:03.980

我认为这在单个顶级 SQL 查询中是不可能的。score_total 值取决于三个聚合结果，但您要求同时计算它们。

在直接 SQL 中，您可以使用子查询来执行此操作，但我不确定如何将其注入 Django。在使用您的模型设置一个简单的 Django 应用程序之后，以下查询似乎对 SQLite 数据库起到了作用：

```
SELECT  id, name,
    total_messages, total_discussion_approval_votes, total_message_approval_votes,
    (total_messages +
     total_discussion_approval_votes +
     total_message_approval_votes) as score_total
FROM
   (SELECT
    discussion.id,
    discussion.name,
    COUNT(DISTINCT discussionapprovalvote.id) AS total_discussion_approval_votes,
    COUNT(DISTINCT messageapprovalvote.id) AS total_message_approval_votes,
    COUNT(DISTINCT message.id) AS total_messages
    FROM discussion
    LEFT OUTER JOIN discussionapprovalvote
         ON (discussion.id = discussionapprovalvote.discussion_id)
    LEFT OUTER JOIN message
         ON (discussion.id = message.discussion_id)
    LEFT OUTER JOIN messageapprovalvote
         ON (message.id = messageapprovalvote.message_id)
    GROUP BY discussion.id, discussion.name)

ORDER BY score_total DESC
LIMIT 20; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T16:00:00.290

实际上有一种方法可以使用带有[F 表达式](https://docs.djangoproject.com/en/1.9/ref/models/expressions/#django.db.models.F)的额外注释：

```
Discussion.objects.annotate(
    total_messages=Count('messages', distinct=True),
    total_discussion_approval_votes=Count('approval_votes', distinct=True),
    total_message_approval_votes=Count('messages__approval_votes', distinct=True)),
    total_score=F('total_messages') + F('total_discussion_approval_votes') + F('total_message_approval_votes')
).order_by('total_score') 
```

# jquery - 通过动态生成的按钮使用 jquery ajax 加载内容

> ID：15799878
> 
> 赞同：0
> 
> 时间：2013-04-03T23:13:56.293
> 
> 标签：jquery, ajax

我正在使用这个 Fiddle [http://jsfiddle.net/wNDaG/](http://jsfiddle.net/wNDaG/)中的代码，它动态生成一些按钮。但是，我想做的是让每个按钮也执行通过 ajax 加载一些内容（将其附加到 div）的功能。

这是小提琴的代码：

```
$('#tabs div').first().attr('class', 'current');

$('#tabs div').each(function(i) {
    i = i + 1;

$(this).attr('id', 'tab-' + i);

    if(i !== $('#tabs div').size()) {
    $(this).append('<button class="tabPagination" rel="tab-' + (i + 1) + '">Next</button>');
}
    if(i !== 1) {
    $(this).append('<button class="tabPagination" rel="tab-' + (i - 1) +    '">Previous</button>');
    }                
});            

$('#tabs div[class!="current"]').hide();

$('.tabPagination').live('click', function() {
    $('.current').removeAttr('class');
    $('#tabs div[class!="current"]').hide();
    $('#' + $(this).attr('rel')).show();
}); 
```

首先，我要做的第一件事是在附加按钮中添加类似这样的内容：

```
href="some-content/next-pagenum_' + (i + 1) + '" 
```

在那之后，我需要帮助来组合如下函数，该函数将通过 ajax 附加内容：

```
$('.tabPagination').live('click', function(event) {
    var url = $(this).attr('href');
$('#content-target-div').load(url); // load the html into your chosen DOM element
    event.preventDefault(); // prevent the browser from navigating to this page  

    return false;
 }); 
```

在这里的任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:13:06.573

我设法使用以下代码解决了这个问题：

```
$(document).on("click", ".tabPagination", function(){
    var link = $(this).attr('href');

    $('#ajaxcontent').fadeOut('fast', function() {
        $.get(
            link +' #ajaxcontent', 
            function(data) {
                $("#ajaxcontent").html(data).fadeIn('fast');
            }, 
            "html"
        );
    });
    return false;
}); 
```

注意我没有使用 .live()，[这就是原因](http://api.jquery.com/live/)，而是使用 .on()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:17:19.697

最简单的方法是执行以下操作：

```
$.get(url, function(content) {
    $('#content-target-div').append(content);
}); 
```

代替

```
$('#content-target-div').load(url); 
```

# ms-office - Visio 外键

> ID：15799879
> 
> 赞同：0
> 
> 时间：2013-04-03T23:13:58.400
> 
> 标签：ms-office, visio, erd

我正在使用 Microsoft Visio 2010 和数据库模型图设计实体关系图。

我有 2 个表，学生表有学生 ID（主键）和课程 ID（应该是外键），我有一个课程表，它有课程 ID（主键）。我的问题是我无法将课程表中的课程 ID 链接到学生表中的课程 ID 作为多对一关系。每次我这样做时，学生 ID 都会显示在课程表中，并且它会自动将其设为外键。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T09:25:17.470

我多么想念 ERD，去年他们在 Uni 上吗……如果您从“学生”中删除课程代码，您的模型是否不起作用？它仍然不能读作 1:m----- 1 门课程可以容纳许多学生......否则它只是 1:1 1 名学生参加 1 门课程

那有意义吗？？我知道我要如何解释它....如果它没有帮助，我将尝试打印我去年的 ERD，以在今天/今晚晚些时候为您提供帮助。

# string - Maple 中的全局与局部变量估值问题

> ID：15799884
> 
> 赞同：0
> 
> 时间：2013-04-03T23:14:28.430
> 
> 标签：string, global, local, maple, expression-evaluation

出于某种原因，Maple 代码

```
testproc := proc()
  LOCAL abc;
  abc[1] := 123;
  print(eval(parse(cat("abc[", 1, "]"))))
end proc

testproc(); 
```

生产

```
abc_1 
```

而（相同，但现在 abc 是一个 GLOBAL 变量）

```
testproc := proc()
  GLOBAL abc;
  abc[1] := 123;
  print(eval(parse(cat("abc[", 1, "]"))))
end proc 
```

产生（我想要的）

```
123 
```

我需要做什么才能评估涉及局部变量的连接字符串？非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:00:08.930

当您使用 parse 时，它​​的操作就像文本在其自己的文件中或在顶层输入一样。它没有词法范围变量的上下文。

你可以做类似的事情

```
eval(parse(cat("abc[",1,"]")),convert('abc',`global`)='abc'); 
```

如果要处理多个本地变量，请使用 set 作为 eval 的第二个参数。

我假设你有一些理由要通过字符串形式。对于直接的对象操作，这通常不是一个好主意。

# heroku - 我可以将 Sailsjs 部署到 AppHarbor 或 Heroku 吗？

> ID：15799887
> 
> 赞同：2
> 
> 时间：2013-04-03T23:14:39.327
> 
> 标签：heroku, appharbor, sails.js

AppHarbor 支持使用 iisnode 的 Node。我现在可以将 Sails.js 应用程序部署到 AppHarbor，如果可以，如何部署？

老实说，我不知道我在用节点部署做什么，但我正在尝试跟随我在网上阅读的内容。当我将代码部署到我的存储库并 AppHarbor 构建它时，我收到以下错误：当前身份 (...) 没有对 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary 的写访问权限ASP.NET 文件”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T04:47:45.200

> ### 更新（2013 年 9 月）
> 
> 这里有更新的部署指南：
> 
> [https://github.com/balderdashy/sails-wiki/blob/0.9/deployment.md](https://github.com/balderdashy/sails-wiki/blob/0.9/deployment.md) ...</p>
> 
> @chadn 在此处发布了使用 Sails.js 的示例 Heroku 部署：
> 
> [https://github.com/chadn/heroku-sails](https://github.com/chadn/heroku-sails)

**原帖**

一般来说，我对 Windows 部署知之甚少，但我们这里有一个部署指南：

[https://github.com/balderdashy/sails/wiki/Guide:-部署](https://github.com/balderdashy/sails/wiki/Guide:-Deployment)

另外，我知道 Nodejitsu 和 Modulus 的伙计们/姑娘们已经帮助人们设置了他们的 Sails 应用程序，所以这可能也是一个不错的起点。

祝你好运！

# twitter-bootstrap - 使用 Sammy 时，Bootstrap 下拉菜单未关闭

> ID：15799890
> 
> 赞同：2
> 
> 时间：2013-04-03T23:14:40.930
> 
> 标签：twitter-bootstrap, sammy.js

首先，我在我的应用程序中使用 Bootstrap 和 Sammy.js。我在下拉菜单（下拉按钮）中配置了一些锚点，分别导航到 #/login 和 #/register。问题是当我点击登录/注册链接时，下拉菜单没有关闭。

我还附上了在 Firefox 中运行时截取的屏幕截图。

我在这里做错了什么？

谢谢你。

![截屏](https://i.stack.imgur.com/X2VEo.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T19:07:37.630

我最终使用的解决方案是手动处理这些点击。Bellow 是执行此操作的代码。

```
$('#header').delegate('a[href="#login"],a[href="#register"]', 'click', function() {
    sammy.setLocation($(this).attr('href'));
    $(this).closest('.dropdown-menu').trigger('click');
    return false;
}); 
```

其中： sammy 是通过 Sammy(...) 获得的实例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-09T06:36:34.430

它对我不起作用，但它帮助我找到了解决方案。

当您单击下拉菜单上的上部解决方案，然后单击不在同一下拉菜单中的另一个菜单项时，它不会再次关闭。所以我插入了 sammy 路线来关闭所有打开的路线：

```
this.get('#/', function() {
  $(".navbar-nav .dropdown").removeClass("open");
  $('#main').load('home.html');
}); 
```

在这里看小提琴：http: [//jsfiddle.net/ehs70rLL/](http://jsfiddle.net/ehs70rLL/)

我玩了一下，也尝试了我的第一个片段:)

```
;(function($) {
  var app = $.sammy(function() {

    this.get('#/:page', function() {
      var jmnu = $( 'a[href="#/' + this.params['page'] + '"]' );
      $(".navbar .dropdown").removeClass("open");  //close all open Dropdowns
      $('.navbar li').removeClass('active');
      $(jmnu).parent().addClass('active');
      $(jmnu).parents('li').addClass('active');
      $('#mainpage').html('<span>>> ' + this.params['page'] + '</span>');
    });

  });
  $(function() {
    app.run('#/One')
  });
})(jQuery);
```

```
/* No own CS is needed at all for functionality */
#mainpage { 
  padding-left: 60px; 
  font-size: 120%;
}

/* Non-responsive overrides, not needed for anything than snippet-preview in small window */
.navbar-header {
  float: left;
}
.navbar-collapse {
  display: block !important;
  height: auto !important;
  padding-bottom: 0;
  overflow: visible !important;
  visibility: visible !important;
}
.navbar-collapse {
  border-top: 0;
}
.navbar-nav {
  float: left;
  margin: 0;
}
.navbar-nav > li {
  float: left;
}
.navbar-nav > li > a {
  padding: 15px;
}
.navbar .navbar-nav .open .dropdown-menu {
  position: absolute;
  float: left;
  background-color: #fff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, .15);
  border-width: 0 1px 1px;
  border-radius: 0 0 4px 4px;
}
.navbar-default .navbar-nav .open .dropdown-menu > li > a {
  color: #333;
}
.navbar .navbar-nav .open .dropdown-menu > li > a:hover,
.navbar .navbar-nav .open .dropdown-menu > li > a:focus,
.navbar .navbar-nav .open .dropdown-menu > .active > a,
.navbar .navbar-nav .open .dropdown-menu > .active > a:hover,
.navbar .navbar-nav .open .dropdown-menu > .active > a:focus {
  color: #fff !important;
  background-color: #428bca !important;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="https://raw.githubusercontent.com/quirkey/sammy/master/lib/min/sammy-latest.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

<section id="navi">
  <!-- Navbar -->
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#/One">One</a></li>
          <li><a href="#/Two">Two</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Three<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="#/Three-A">A</a></li>
              <li><a href="#/Three-B">B</a></li>
              <li><a href="#/Three-C">C</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Four<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="#/Four-A">A</a></li>
              <li><a href="#/Four-B">B</a></li>
              <li><a href="#/Four-C">C</a></li>
            </ul>
          </li>
        </ul>
      </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
  </nav>
</section>

<section id="mainpage"></section>
```

# java - Web Service 使用 MySQL 和 Hibernate 教程

> ID：15799898
> 
> 赞同：0
> 
> 时间：2013-04-03T23:15:58.833
> 
> 标签：java, eclipse, web-services, hibernate, netbeans

是否有任何好的教程可以解释如何使用 MySQL 配置 Hibernate，然后可以使用它来运行 Web 服务？理想情况下，Android 应用程序可以通过 http:// 连接到它并带回结果。

我最好寻找使用 JavaEE 框架的 REST Web 服务。

Eclipse 或 Netbeans 的教程都很好。我真的找不到任何解释这种组合的好教程。分别看hibernate和web service教程的时候，是不是一定要自己主动呢？只要我知道我在这里没有遗漏什么就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:23:24.440

是的，您应该分别查看休眠和 Web 服务教程。

Hibernate 是一个专注于数据访问层的框架， [官方页面](http://www.hibernate.org/)。

并且 eclipse 带有一个向导，它允许您轻松地从一个类创建 Web 服务（只需单击几下）

我会首先开始研究hibernate（首先找出你想要使用的东西......）

然后是网络服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:05:37.853

[https://netbeans.org/kb/docs/web/hibernate-webapp.html](https://netbeans.org/kb/docs/web/hibernate-webapp.html)使用 hibernate 和 mysql，不确定它是否将其公开为 Web 服务。请注意，您可以注册 MySQL，创建一个 Web 应用程序，然后使用来自数据库文件模板的 REST 服务来生成所有内容。我认为您可以在那里选择 Hibernate 作为您的持久性提供程序。

# iphone - 使用视图控制器查找 RefCt 问题而不使用 Instruments 调用 dealloc

> ID：15799901
> 
> 赞同：1
> 
> 时间：2013-04-03T23:16:03.850
> 
> 标签：iphone, ios, xcode, instruments

我正在尝试使用工具来发现为什么我的视图控制器在从导航控制器弹出时不调用 dealloc。在查看分配时，我发现当我弹出视图控制器时，它的 RefCt 保持为 2。我尝试查看所有的 retain<->release 消息，我确实发现了一组似乎不正常的分配。其中有 30 条消息，其中 16 条保留和 14 条释放。这是我的问题吗？这些电话甚至在做什么？我假设我将自己保留在某个街区的某个地方..？

```
Retain  __copy_helper_block_335
Retain  __copy_helper_block_361
Retain  __copy_helper_block_391
Retain  __copy_helper_block_387
Retain  __copy_helper_block_91
Retain  __copy_helper_block_84
Retain  __copy_helper_block_1797
Retain  __copy_helper_block_2139
Retain  __copy_helper_block_2143
Retain  __copy_helper_block_1647
Retain  __copy_helper_block_2139
Retain  __copy_helper_block_2143
Retain  __copy_helper_block_1678
Retain  __copy_helper_block_2139
Retain  __copy_helper_block_2143
Retain  __copy_helper_block_57
Release __destroy_helper_block_392
Release __destroy_helper_block_336
Release __destroy_helper_block_388
Release __destroy_helper_block_92
Release __destroy_helper_block_85
Release __destroy_helper_block_2140
Release __destroy_helper_block_2144
Release __destroy_helper_block_1648
Release __destroy_helper_block_2140
Release __destroy_helper_block_2144
Release __destroy_helper_block_1679
Release __destroy_helper_block_2140
Release __destroy_helper_block_2144
Release __destroy_helper_block_58 
```

我已经阅读了许多其他关于视图控制器不调用 dealloc 的问题，但仍然无法将我的 RefCt 设置为 0。确保我的所有代表都很弱，并且在所有块中都受到冲击，以确保我没有将 self 保留在块中. 但是，在某些地方我使用 self 而不是 __weak（例如 [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite)）。我需要在这里使用weakSelf吗？

```
- (void) setupInvitationHandler {
    [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {

        ( ... )

        GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite];
        mmvc.matchmakerDelegate = [self.navigationController.viewControllers objectAtIndex:0];
        [self presentViewController:mmvc animated:YES completion:^{
            [self.navigationController popToRootViewControllerAnimated:NO];
        }];
    }];
} 
```

# python - 向 polls urls.py 添加额外的过滤器会导致测试失败

> ID：15799905
> 
> 赞同：2
> 
> 时间：2013-04-03T23:16:26.187
> 
> 标签：python, django, django-urls, django-testing

按照 djangoproject 上的教程，我尝试让 urls.py 过滤掉投票，而下面的 urlpattern 没有选择。

```
urlpatterns = patterns('',
    url(r'^$',
        ListView.as_view(
            queryset=Poll.objects.filter(choice__choice_text__isnull=False) \
                .filter(pub_date__lte=timezone.now) \
                .order_by('-pub_date')[:5],
            context_object_name='latest_polls',
            template_name='polls/index.html'),
        name='index'),
    url(r'^(?P<pk>\d+)/$',
        DetailView.as_view(
            queryset=Poll.objects.filter(choice__choice_text__isnull=False) \
                .filter(pub_date__lte=timezone.now),
            model=Poll,
            template_name='polls/detail.html'),
        name='detail'),
    url(r'^(?P<pk>\d+)/results/$',
        DetailView.as_view(
            queryset=Poll.objects.filter(choice__choice_text__isnull=False) \
                .filter(pub_date__lte=timezone.now),
            model=Poll,
            template_name='polls/results.html'),
        name='results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'polls.views.vote', name='vote'),
) 
```

但是，当我从本教程运行测试时，每个创建 past_poll 的测试都会发生断言错误，类似于下面的错误。

```
AssertionError: Lists differ: [] != ['<Poll: Past poll.>']

Second list contains 1 additional elements.
First extra element 0:
<Poll: Past poll.>

- []
+ ['<Poll: Past poll.>'] 
```

在我更改查询集以过滤掉所有没有选择的轮询之前，测试没有失败。我已经在 shell 中测试了过滤器，它可以工作并且在 django 服务器上运行应用程序似乎也没有任何问题。出了什么问题？

这是我使用的 tests.py 文件

```
import datetime

from django.utils import timezone
from django.core.urlresolvers import reverse
from django.test import TestCase

from polls.models import Poll

def create_poll(question, days):
    """
    Creates a poll with the given `question` published the given number of
    `days` offset to now (negative for polls published in the past,
    positive for polls that have yet to be published).
    """
    return Poll.objects.create(question=question,
        pub_date=timezone.now() + datetime.timedelta(days=days))

class PollIndexDetailTests(TestCase):
    def test_detail_view_with_a_future_poll(self):
        """
        The detail view of a poll with a pub_date in the future should
        return a 404 not found.
        """
        future_poll = create_poll(question='Future poll.', days=5)
        response = self.client.get(reverse('polls:detail', args=(future_poll.id,)))
        self.assertEqual(response.status_code, 404)

    def test_detail_view_with_a_past_poll(self):
        """
        The detail view of a poll with a pub_date in the past should display
        the poll's question.
        """
        past_poll = create_poll(question='Past Poll.', days=-5)
        response = self.client.get(reverse('polls:detail', args=(past_poll.id,)))
        self.assertContains(response, past_poll.question, status_code=200)

class PollIndexResultsTests(TestCase):
    def test_results_view_with_a_future_poll(self):
        """
        The results view of a poll with a pub_date in the future should
        return a 404 not found.
        """
        future_poll = create_poll(question='Future poll.', days=5)
        response = self.client.get(reverse('polls:results', args=(future_poll.id,)))
        self.assertEqual(response.status_code, 404)

    def test_results_view_with_a_past_poll(self):
        """
        The results view of a poll with a pub_date in the past should display
        the poll's question.
        """
        past_poll = create_poll(question='Past Poll.', days=-5)
        response = self.client.get(reverse('polls:results', args=(past_poll.id,)))
        self.assertContains(response, past_poll.question, status_code=200)

class PollViewTests(TestCase):
    def test_index_view_with_no_polls(self):
        """
        If no polls exist, an appropriate message should be displayed.
        """
        response = self.client.get(reverse('polls:index'))
        self.assertEqual(response.status_code, 200)
        self.assertContains(response, "No polls are available.")
        self.assertQuerysetEqual(response.context['latest_polls'], [])

    def test_index_view_with_a_past_poll(self):
        """
        Polls with a pub_date in the past should be displayed on the index page.
        """
        create_poll(question="Past poll.", days=-30)
        response = self.client.get(reverse('polls:index'))
        self.assertQuerysetEqual(
            response.context['latest_polls'],
            ['<Poll: Past poll.>']
        )

    def test_index_view_with_a_future_poll(self):
        """
        Polls with a pub_date in the future should not be displayed on the
        index page.
        """
        create_poll(question="Future poll.", days=30)
        response = self.client.get(reverse('polls:index'))
        self.assertContains(response, "No polls are available.", status_code=200)
        self.assertQuerysetEqual(response.context['latest_polls'], [])

    def test_index_view_with_future_poll_and_past_poll(self):
        """
        Even if both past and future polls exist, only past polls should be
        displayed.
        """
        create_poll(question="Past poll.", days=-30)
        create_poll(question="Future poll.", days=30)
        response = self.client.get(reverse('polls:index'))
        self.assertQuerysetEqual(
            response.context['latest_polls'],
            ['<Poll: Past poll.>']
        )

    def test_index_view_with_two_past_polls(self):
        """
        The polls index page may display multiple polls.
        """
        create_poll(question="Past poll 1.", days=-30)
        create_poll(question="Past poll 2.", days=-5)
        response = self.client.get(reverse('polls:index'))
        self.assertQuerysetEqual(
            response.context['latest_polls'],
             ['<Poll: Past poll 2.>', '<Poll: Past poll 1.>']
        )

class PollMethodTests(TestCase):

    def test_was_published_recently_with_future_poll(self):
        """
        was_published_recently() should return False for polls whose
        pub_date is in the future
        """
        future_poll = Poll(pub_date=timezone.now() + datetime.timedelta(days=30))
        self.assertEqual(future_poll.was_published_recently(), False)

    def test_was_published_recently_with_old_poll(self):
        """
        was_published_recently() should return False for polls whose pub_date
        is older than 1 day
        """
        old_poll = Poll(pub_date=timezone.now() - datetime.timedelta(days=30))
        self.assertEqual(old_poll.was_published_recently(), False)

    def test_was_published_recently_with_recent_poll(self):
        """
        was_published_recently() should return True for polls whose pub_date
        is within the last day
        """
        recent_poll = Poll(pub_date=timezone.now() - datetime.timedelta(hours=1))
        self.assertEqual(recent_poll.was_published_recently(), True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:57:19.230

我认为问题在于，在测试中，您正在创建一个全新的民意调查，还没有任何选择。在详细视图中，您将过滤掉这个民意调查。所以它什么也没返回，所以测试失败了。

您还可以为刚刚在 past_test 上创建的民意调查创建一些选择，以便该民意调查通过过滤。

就像是：

```
...
past_poll = create_poll(question='Past Poll.', days=-5)
past_poll.choice_set.create(choice_text='Choice 1', votes=0)
past_poll.choice_set.create(choice_text='Choice 2', votes=0)
... 
```

# vim - 跳转 git diff

> ID：15799907
> 
> 赞同：3
> 
> 时间：2013-04-03T23:16:30.673
> 
> 标签：vim, vim-fugitive

我使用并喜欢[Tim Pope 为 VIM 提供的出色的 Fugitive 插件](https://github.com/tpope/vim-fugitive)，我一直希望能够加载`:Glog`quickfix 中所有文件的差异并将它们循环到 HEAD 中的文件（或者可能是任何修订版！）。当我切换到以前的版本时，使用`:diffthis`不会持续存在差异，并且宏似乎是一种解决它的方法。

有没有规范的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:42:02.727

不幸的是，*目前*没有办法做到这一点；有很多方法可以让这个过程相对轻松，我绝对可以为你编写脚本，除了一件事；当您`fugitive-revision`在 diff 模式下卸载 a 的缓冲区时，逃犯向后弯腰（tpope 自己的话）为您停止原始文件中的差异。

我*真的很*喜欢你提出的行为，所以我继续[在 GitHub 上向项目提交了一个问题](https://github.com/tpope/vim-fugitive/issues/329)。Tpope 愿意，这将很快得到解决，我将非常乐意发布一个脚本，届时将完全自动化此行为。

# php - 无法发送会话 cookie 和缓存限制器

> ID：15799908
> 
> 赞同：0
> 
> 时间：2013-04-03T23:16:33.740
> 
> 标签：php, header

我收到两个警告：

**警告**：session_start() [function.session-start]：无法发送会话 cookie - 标头已在第 2 行发送 **警告：** session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在第 2 行发送

这是我的 index.php（首先调用此文件）：

```
include ('funkcije.php');
session_start();
if(!isset($_SESSION)) {session_start();}
if(isset($_POST['login']))
            { 
    Log($skripta);
            } 
```

这是我的代码（funkcije.php //包含这个文件，这里是函数定义）：

```
<?php
if(!isset($_SESSION)) {session_start();} // On this line is problem

$skripta=$_SERVER['SCRIPT_NAME'];
$skripta=basename($skripta);

function Menu() {
?>
<html>
<ul>
<li> <a href="index.php?akc=logout"> Logout </a> </li>
</ul>
</body>
</html>
<?php
} 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:24:45.030

这个错误意味着你在调用 session_start 函数之前已经输出了一些东西。确保您的`<?php`标签上方没有任何东西，并且在 session_start 之前没有输出。

**随着问题的发展进行编辑：**

试试这个：index.php

```
if(session_id() == '') session_start();
include ('funkcije.php');
if(isset($_POST['login']))
{ 
    Log($skripta);
} 
```

funkcije.php

```
<?php    
$skripta=$_SERVER['SCRIPT_NAME'];
$skripta=basename($skripta);

function Menu() {
    echo '<html>
    <ul>
    <li> <a href="index.php?akc=logout"> Logout </a> </li>
    </ul>
    </body>
    </html>';
} 
```

# fiddler - Fiddler 扩展开发：仅对 composer 的请求进行操作

> ID：15799909
> 
> 赞同：1
> 
> 时间：2013-04-03T23:16:43.673
> 
> 标签：fiddler

我正在尝试创建一个提琴手（v4.x）扩展，该扩展构建并添加自定义标头到作曲家生成的请求。我开始创建一个在 AutoTamperRequestBefore 事件上添加标头的 IAutoTamper 实现。我很快意识到这个事件会针对通过 fiddler 代理的每个请求触发，而不仅仅是针对从 composer 生成的请求。

有什么方法可以检测作曲家是否生成了请求？或者，除了通过 AutoTamper 之外，还有更好的扩展点来处理这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:13:47.870

如果您右键单击 Web 会话列表中的会话，您可以选择属性以查看在该会话上设置的所有[会话标志](http://www.fiddler2.com/fiddler/dev/SessionFlags.asp)。您会注意到来自作曲家的所有请求都有一个名为**X-From-Builder**的标志。

因此，在您的扩展程序代码中，您可以简单地编写：

```
// Inside AutoTamperRequestAfter
if (oSession.oFlags.ContainsKey("X-From-Builder")) { 
  // Whatever...
} 
```

# c++ - Visual Studio 2012 微型筛选器项目模板中的错误

> ID：15799910
> 
> 赞同：0
> 
> 时间：2013-04-03T23:16:44.380
> 
> 标签：c++, templates, visual-studio-2012, wdk, minifilter

我开始在 VS2012、Win8 中编写一个微型过滤器。创建新项目过滤器驱动程序：文件系统微型过滤器后，我收到 6 个错误。

> 7 IntelliSense：“void (*)(PCFLT_RELATED_OBJECTS FltObjects, PFLT_IO_PARAMETER_BLOCK ParameterSnapshot, NTSTATUS OperationStatus, PVOID RequesterContext)”类型的参数与“PFLT_GET_OPERATION_STATUS_CALLBACK”类型的参数不兼容
> 
> 5 IntelliSense：“void (*)(PCFLT_RELATED_OBJECTS FltObjects, FLT_INSTANCE_TEARDOWN_FLAGS Flags)”类型的值不能用于初始化“PFLT_INSTANCE_TEARDOWN_CALLBACK”类型的实体
> 
> 6 IntelliSense：“void (*)(PCFLT_RELATED_OBJECTS FltObjects, FLT_INSTANCE_TEARDOWN_FLAGS Flags)”类型的值不能用于初始化“PFLT_INSTANCE_TEARDOWN_CALLBACK”类型的实体
> 
> 3 IntelliSense：“NTSTATUS (*)(PCFLT_RELATED_OBJECTS FltObjects, FLT_INSTANCE_SETUP_FLAGS Flags, ULONG VolumeDeviceType, FLT_FILESYSTEM_TYPE VolumeFilesystemType)”类型的值不能用于初始化“PFLT_INSTANCE_SETUP_CALLBACK”类型的实体
> 
> 4 IntelliSense：“NTSTATUS (*)(PCFLT_RELATED_OBJECTS FltObjects, FLT_INSTANCE_QUERY_TEARDOWN_FLAGS Flags)”类型的值不能用于初始化“PFLT_INSTANCE_QUERY_TEARDOWN_CALLBACK”类型的实体
> 
> 2 IntelliSense：“NTSTATUS (*)(FLT_FILTER_UNLOAD_FLAGS Flags)”类型的值不能用于初始化“PFLT_FILTER_UNLOAD_CALLBACK”类型的实体

大多数错误所在的主要功能

```
CONST FLT_REGISTRATION FilterRegistration = {
    sizeof( FLT_REGISTRATION ),         //  Size
    FLT_REGISTRATION_VERSION,           //  Version
    0,                                  //  Flags
    NULL,                               //  Context
    Callbacks,                          //  Operation callbacks
    FsFilter1testUnload,                           //  MiniFilterUnload
    FsFilter1testInstanceSetup,                    //  InstanceSetup
    FsFilter1testInstanceQueryTeardown,            //  InstanceQueryTeardown
    FsFilter1testInstanceTeardownStart,            //  InstanceTeardownStart
    FsFilter1testInstanceTeardownComplete,         //  InstanceTeardownComplete
    NULL,                               //  GenerateFileName
    NULL,                               //  GenerateDestinationFileName
    NULL                                //  NormalizeNameComponent
}; 
```

另一个功能

```
status = FltRequestOperationStatusCallback(Data,
                                           FsFilter1testOperationStatusCallback,
                                           (PVOID)(++OperationStatusCtx)); 
```

所有实体都以类似的方式声明

```
NTSTATUS    
FsFilter1testInstanceSetup (
_In_ PCFLT_RELATED_OBJECTS FltObjects,
_In_ FLT_INSTANCE_SETUP_FLAGS Flags,
_In_ DEVICE_TYPE VolumeDeviceType,
_In_ FLT_FILESYSTEM_TYPE VolumeFilesystemType
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:12:43.260

这是智能感知问题。该项目将被构建并完美运行，除非您做一些磨损或出现一些编译错误。在错误列表窗口中，只需右键单击 -> 关闭“显示 IntelliSense 错误”。

# ruby-on-rails - Rails - 将“星期二”缩短为“T”

> ID：15799916
> 
> 赞同：1
> 
> 时间：2013-04-03T23:17:12.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的 show.html 中有这个字符串：<%= deal.tuesday%>。在我的网站上，它显示为“星期二”。有什么办法可以从我的 show.html 页面将其更改为“T”？

我不想更改我的控制器或任何东西，我只想使用类似 truncate 的东西，这将允许我仅为视图页面更改它。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:19:27.850

如果`tuesday`返回一个字符串，你可以这样做

```
<%= deal.tuesday[0] %> 
```

# html - Opera 中某些页面中基于 Zurb 的 Foundation 3.2.5 的布局和额外宽度

> ID：15799917
> 
> 赞同：0
> 
> 时间：2013-04-03T23:17:17.380
> 
> 标签：zurb-foundation, html, css, opera, zurb-foundation

我使用[zurb-foundation](/questions/tagged/zurb-foundation "显示标记为“zurb-foundation”的问题")来维护我的网站的布局。该[网站](http://quran.2index.net)的主页在 Opera 12.14 中与其他页面完美呈现。但是，某些页面（例如[此页面](http://quran.2index.net/viewSura/93)）仅在 Opera 上的右侧有额外的空白区域。我试图检查空白额外空间中的元素，它提到了 html 标签？！我将 html 源代码复制到我的编辑器（netbeans）中，以查看是否缺少一些结束标记，但我没有找到它们。我的网站是rtl。什么应该导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:24:30.630

我在 Opera 中找到了这个布局问题的原因。这是由于[soundmanager2](/questions/tagged/soundmanager2 "显示标记为“soundmanager2”的问题")。仅在 Opera 中，它会在结束 body 标记之前生成一个 div 标记，如下所示：

```
<div id="sm2-container" class="movieContainer sm2_debug" style="position: absolute; width: 6px; height: 6px; top: -9999px; left: 9999px;">
  <embed name="sm2movie" id="sm2movie" src="/quran/themed/slate/js/swf/soundmanager2_flash9_debug.swf" quality="high" allowscriptaccess="always" bgcolor="#ffffff" pluginspage="www.macromedia.com/go/getflashplayer" title="JS/Flash audio component (SoundManager 2)" type="application/x-shockwave-flash" haspriority="true">
</div> 
```

由于我不知道如何让 Soundmanager2 停止生成这个 div，我决定使用 CSS 解决它，如下所示：

```
#sm2-container .movieContainer .sm2_debug{ 
 display: none; 
} 
```

然而，上面的 CSS 解决方案修复了布局问题，但它导致 Soundmanager 停止在 Opera 上工作！到目前为止，我认为这是我关于布局的问题的答案。

## 最终解决方案：

来自官方 SM2 论坛上的[这个答案。](https://getsatisfaction.com/schillmania/topics/quirks_with_hiding_the_sm2_container)我必须制作一个 id 为 sm2_container 的 div 并将其设置为如下样式，然后将其放置在源中我想要的任何位置：

```
<div id="sm2-container" style="width:1px; height:1px; visibility: hidden" class="movieContainer sm2_debug" >

</div> 
```

真正有用的样式是可见性隐藏，因为它只是一个白色背景的 swf 正方形，我想隐藏它。

# python - Python 打包——即 __init__.py

> ID：15799921
> 
> 赞同：0
> 
> 时间：2013-04-03T23:17:30.907
> 
> 标签：python, python-module

假设我有这样的目录结构：

```
mydir
    __init__.py
    innerdir
        __init__.py
        mymodule.py 
```

的内容`mymodule.py`很简单：

```
def hi():
    print 'hello, welcome' 
```

而两个`__init__.py`s 都是**空**的。

现在，如果我在`mydir`目录之外，我打开 Python 提示符并尝试`import mydir`然后使用`mydir.innerdir`，我得到一个错误（an `NameError: 'innerdir' is not defined`）。

如果我进入`mydir`目录，提示那里并尝试`import innerdir`和`innerdir.mymodule`.

我可以成功`import mydir.innerdir`，但是我只能用它作为`mydir.innerdir`，而不是作为`innerdir`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:25:39.727

你描述的一些东西，我什至不确定你期望它做什么。但是从你的最后一段来看，听起来你已经很接近了，所以让我们从那里开始。

> 我可以成功导入 mydir.innerdir，但是我只能将其用作 mydir.innerdir，而不能仅用作 innerdir。为什么我必须指定整个路径？

这就是`import`Python 中的工作原理，即使您忽略包并且只有一堆扁平的东西，甚至只是标准库。例如，如果你`import os`，你可以做`os.listdir('.')`，但你不能只做`listdir('.')`。

这里的解决方案与那里的解决方案相同：

```
from mydir import innerdir 
```

这实际上不是很有用，因为`innerdir`它是一个没有直接定义的包。您可能*真正*想做的是`from mydir.innerdir import mymodule`. 但这就是你问的方法。

* * *

如果您想知道为什么`import mydir`后面跟着`mydir.innerdir`不起作用，我可以解释一下。

从教程的[包](http://docs.python.org/2/tutorial/modules.html#packages)部分：

> …当使用类似的语法时`import item.subitem.subsubitem`，除了最后一项之外的每一项都必须是一个包；最后一项可以是模块或包，但不能是前一项中定义的类或函数或变量。

所以，你所做的根本不应该做任何有用的事情。但它实际上做了什么？

它像一个模块一样导入包。这意味着你在包本身中定义的任何东西——函数、类，甚至模块——都可以作为`mydir`. 但这不会自动导入包目录中的任何子包或子模块——请记住，您将其*作为模块*导入，而不是*作为包*导入。

* * *

如果您询问从内部运行时会发生什么`mydir`（或将其添加到您的 PYTHONPATH）......好吧，在这种情况下，`mydir`它根本不是一个包，它只是一个充满模块和包的目录（在这种情况下，只有一个包，`innerdir`）。这很像做`from mydir import innerdir`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:57:56.323

直接导入的包不会自动将子包或子模块放入其命名空间：

```
>>> import mydir
>>> dir(mydir)
['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__'] 
```

（注意这里没有`innerdir`。）

但是如果你*通过*包导入，Python 会将命名空间连接在一起：

```
>>> import mydir.innerdir
>>> dir(mydir)
['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', 'innerdir']
>>> dir(mydir.innerdir)
['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__'] 
```

`mymodule`（请注意，中没有`mydir.innerdir`。）

`__all__`Python 允许您使用 中的魔法变量明确说明要在包中自动包含哪些子模块`__init__.py`，但默认情况下它只会在代码中运行`__init__.py`代码而不做任何其他事情。

您可以执行以下任何操作：

```
import mydir.innerdir.mymodule; mydir.innerdir.mymodule.hi()
from mydir.innerdir import mymodule; mymodule.hi()
from mydir.innerdir.mymodule import hi; hi() 
```

或者，您可以编辑`__init__.py`文件以包含`__all__`用于通配符导入的变量。

```
# file mydir/innerdir/__init__.py
print 'Running mydir/innerdir/__init__.py'
__all__ = ['mymodule'] 
```

然后你可以做这样的事情：

```
from mydir.innerdir import *; mymodule.hi() 
```

更疯狂的是，您可以急切地导入子包和模块（我不推荐这样做！）：

```
# file mydir/__init__.py
print 'Running mydir/__init__.py'
import innerdir

# file mydir/innerdir/__init__.py
print 'Running mydir/innerdir/__init__.py'
import mymodule 
```

现在这些将起作用：

```
import mydir; mydir.innerdir.mymodule.hi()
from mydir import innerdir; innerdir.mymodule.hi() 
```

您可能想复习一下[packages 的文档](http://docs.python.org/2/tutorial/modules.html#packages)，它解释了所有这些，并且具有与您在此处显示的完全一样的目录结构。

# iphone - iOS 状态保存和容器视图

> ID：15799925
> 
> 赞同：19
> 
> 时间：2013-04-03T23:17:55.327
> 
> 标签：iphone, ios, uikit-state-preservation

我在故事板中有一个使用容器视图的视图控制器。两者都设置了恢复标识符。父母正在被保存和恢复得很好。然而孩子不是。在子视图控制器上既不调用`-encodeRestorableStateWithCoder:`也不调用。`-decodeRestorableStateWithCoder:`

保存使用视图容器创建的子视图控制器的正确方法是什么？我可以将子视图控制器保存在 parents`-encodeRestorableStateWithCoder:`中，这将导致它被保存，但我无法在恢复期间使用它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-24T07:32:54.383

容器视图控制器“*不会自动保存对任何包含的子视图控制器的引用。如果您正在实现自定义容器视图控制器，如果您希望它们被保留，您必须自己编码子视图控制器对象*”。

我发现了一些简单的规则：

1.Embedded（子）视图控制器应该已经创建并在状态保存过程中添加到父视图控制器。因此，如果您使用故事板，则不必做任何事情，否则您必须实例化子视图控制器并手动添加它：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"Did load");
    MyChildViewController *childViewController = [MyChildViewController new];
    [self addChildViewController:childViewController];
    [childViewController didMoveToParentViewController:self];
    self.childVC = childViewController;
} 
```

`-viewDidLoad`您可以在或以后添加子视图。用于`self.childVC.view.frame = [self frameForChildController]; [self.view addSubview:self.childVC.view];`此。

2.您无需将子视图控制器保存在父视图控制器中*，*`-encodeRestorableStateWithCoder:`但您应该使用. 如果你有参考，你可以这样做：*`-encodeObject:forKey:`*

 *```
-(void)encodeRestorableStateWithCoder:(NSCoder *)coder
{
    NSLog(@"Encode");
    UIViewController *childViewController = self.childVC;
    [coder encodeObject:childViewController forKey:@"ChildVC"];
    [super encodeRestorableStateWithCoder:coder];
} 
```

如果您使用 Storyboard，请参阅[https://stackoverflow.com/a/13279703/2492707](https://stackoverflow.com/a/13279703/2492707)以获取对子 VC 的引用。或者你可以写一些像这样简单的东西：

```
-(void)encodeRestorableStateWithCoder:(NSCoder *)coder
{
    NSLog(@"Encode");
    UIViewController *childViewController = [self.childViewControllers objectAtIndex:0]; //[self.childViewControllers lastObject];
    [coder encodeObject:childViewController forKey:@"ChildVC"];
    [super encodeRestorableStateWithCoder:coder];
} 
```

3.**嵌入式（子）视图控制器应该已经创建并在状态恢复过程中添加到父视图控制器**。因此，如果您在第一段中做了所有事情，那么这里就没有什么可做的了。

4.“然而，在这种情况下，我们不解码子视图控制器。我们*可以*，但实际上我们不需要它。MyChildViewController 对象将恢复它自己的状态。我们只对这个引用进行编码以获得运行时将链向下移动到 MyChildViewController 实例并对其进行保存和恢复”。

```
-(void)decodeRestorableStateWithCoder:(NSCoder *)coder
{
    NSLog(@"Decode");
    [super decodeRestorableStateWithCoder:coder];
} 
```

[这](http://www.apeth.com/iOSBook/ch19.html#_state_restoration)本书帮助我理解容器视图的状态保存。也为这本书[寻找一个很好的例子](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch19p663stateRestoration3)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-20T10:33:56.963

我认为答案在[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html) 中说：

" UIViewController 类保存对呈现的视图控制器和用于创建视图控制器的情节提要（如果有）的引用。视图控制器还要求其视图层次结构中的视图保存任何相关信息。**然而，这个类不会自动保存对任何包含的子视图控制器的引用。如果您正在实现自定义容器视图控制器，如果您希望保留子视图控制器对象，则必须自己对它们进行编码。** "

所以你可以做这样的事情：

```
-(void)encodeRestorableStateWithCoder:(NSCoder *)coder {
    [super encodeRestorableStateWithCoder:coder];
    [self.myChildViewController encodeRestorableStateWithCoder:coder];
}

-(void)decodeRestorableStateWithCoder:(NSCoder *)coder {
    [super decodeRestorableStateWithCoder:coder];
    [self.myChildViewController decodeRestorableStateWithCoder:coder];
} 
```

并且在 MyChildViewController 中不要调用 super :)*

# search - 全文搜索和关键字搜索有什么区别？

> ID：15799926
> 
> 赞同：3
> 
> 时间：2013-04-03T23:18:17.223
> 
> 标签：search, full-text-search, search-engine, information-retrieval

全文搜索和关键字搜索有什么区别？

定义还可以。任何人都可以简要说明有什么区别，哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:22:21.057

对于您在此处提到的信息检索，您的理想搜索将是关键字。实际上也很普遍，为什么？

好吧，您可以想象每个人都有自己的方式来解释一个主题，并且提供全文搜索将为您提供更准确的信息，或者根本没有命中只是因为您将其写在“自己的”中语言。正确选择关键字并保持简短和全面，不仅会给您带来更好的结果，而且还会让您聪明地记笔记以供将来参考，并由于实际单词卡在您的脑海中而更深入地学习。

# ruby-on-rails - 在 Rails 中向模型添加方法时出现未定义的方法错误

> ID：15799930
> 
> 赞同：5
> 
> 时间：2013-04-03T23:18:43.883
> 
> 标签：ruby-on-rails, rails-activerecord

我有错误

未定义的方法 events_and_repeats' for`#<Class:0x429c840>`

app/controllers/events_controller.rb:11:in `index'

我的 app/models/event.rb 是

```
class Event < ActiveRecord::Base
  belongs_to :user

  validates :title, :presence => true,
                    :length => { :minimum => 5 }
  validates :shedule, :presence => true

  require 'ice_cube'
  include IceCube

  def events_and_repeats(date)
    @events = self.where(shedule:date.beginning_of_month..date.end_of_month)

    return @events
  end

end 
```

应用程序/控制器/events_controller.rb

```
def index
    @date = params[:month] ? Date.parse(params[:month]) : Date.today
    @repeats = Event.events_and_repeats(@date)

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @events }
    end
  end 
```

怎么了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T23:26:20.710

就像斯沃兹所说，你在一个类上调用了一个实例方法。重命名它：

```
def self.events_and_repeats(date) 
```

我只是在答案中写这个，因为评论太长了，查看 ice-cube github 页面，它严格说：

```
Include IceCube inside and at the top of your ActiveRecord model file to use the IceCube classes easily. 
```

我也认为你不需要`require`在你的模型中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T23:25:53.093

您可以通过以下两种方式进行：

```
class Event < ActiveRecord::Base
  ...

  class << self
    def events_and_repeats(date)
      where(shedule:date.beginning_of_month..date.end_of_month)
    end
  end

end 
```

或者

```
class Event < ActiveRecord::Base
  ...

  def self.events_and_repeats(date)
    where(shedule:date.beginning_of_month..date.end_of_month)
  end    
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-28T07:45:52.037

只是为了更清楚：

```
class Foo
  def self.bar
    puts 'class method'
  end

  def baz
    puts 'instance method'
  end
end

Foo.bar # => "class method"
Foo.baz # => NoMethodError: undefined method ‘baz’ for Foo:Class

Foo.new.baz # => instance method
Foo.new.bar # => NoMethodError: undefined method ‘bar’ for #<Foo:0x1e820> 
```

[类方法和实例方法](http://www.railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/)

# jquery - 是否有任何干净的方法来获取放置在使用 jQuery 中的 HTML 模板？

> ID：15799931
> 
> 赞同：0
> 
> 时间：2013-04-03T23:18:45.637
> 
> 标签：jquery, html, client-side-templating

根据 Nicholas Zaka 的书 'Maintainable JavaScript'，我知道在我的页面中放置一个小型 HTML 模板的最佳方法是添加如下内容：

```
 <script type="text/x-templates" class="templates">
            <div class="template1"> ... </div>
            <div class="template2"> ... </div>
            ...
    </script> 
```

我更喜欢这种方法，而不是将我的模板放入`<body>`并使用 css 隐藏它们，因为这些仍然会显示在像 dillo 这样的浏览器中。

我目前使用 jQuery 获取它们的方式是：

```
 var $templates = $('<div/>').append($('.templates').text()).children(); 
```

我尝试过但不起作用的事情是：

```
 var $templates = $('.templates');
    var $templates = $($('.templates').text());
    var $templates = $($('.templates').html()); 
```

我现在的解决方案有效，但在我看来并不是很优雅。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:24:01.077

编辑：我想我最初误解了你的问题——我没有意识到你在同一个标​​签中有*多个*`script`模板。我建议将每个模板分解成它自己的标签，因为这可能更容易管理（然后你没有额外的解析和`div`标签来保持它们分开）。例如，为您的模板标记考虑这个：

```
<script type="text/x-templates" class="template" id="template1">
    [template 1]
</script>

<script type="text/x-templates" class="template" id="template2">
    [template 2]
</script> 
```

在你的 JavaScript 中是这样的：

```
// create a map of templates (keyed by the template's id)
var templates = {};
$('.template').each(function() {
    var $template = $(this);
    templates[$template.attr('id')] = $(this).html();
});

//usage
$('body').append(templates.template1);
$('body').append(templates.template2); 
```

这是它的实际演示：http: [//jsfiddle.net/KyWj6/](http://jsfiddle.net/KyWj6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:24:21.723

试试这个：

```
var $templateHtml = $('.templates').html();
var $templates    = $('<div/>').html(templateHtml); 
```

或者，将其设为一行：

```
var $templates    = $('<div/>').html($('.templates').html()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T23:35:33.440

`$($('.templates').html())`如果“模板”类的内部 HTML 以空格开头，将会很困难，所以你需要`$($('.templates').html().trim())`。你最终会遇到更多麻烦，因为你的脚本标签的内部 HTML 没有根节点，所以你需要类似的东西：

```
<script type="text/x-templates" class="templates">
    <div>
        <div class="template1">temp1</div>
        <div class="template2">temp2</div>
        ...
    </div>
</script> 
```

然后，您可以使用以下内容获取 template1 的 HTML：

```
var templatesCollection = $($(".templates").html().trim());
alert(templatesCollection.children(".template1").html()); 
```

**但是**，说了这么多，为什么不把每个模板放在自己的带有 ID 的脚本标签中呢？（除非您计划拥有多个实例，否则类没有多大意义，并且在模板场景中，我认为这不是您想要的。）

所以更像是：

```
<script type="text/html" id="template1">
   <div>temp1</div>
</script> 
```

然后是一个非常简单的选择器：`$("#template1").html()`

# opencv - 计算机视觉：裸露检测解决方案比较（基于 opencv 或自定义代码）和哈希列表和客户端

> ID：15799932
> 
> 赞同：0
> 
> 时间：2013-04-03T23:18:57.890
> 
> 标签：opencv, computer-vision, benchmarking, vision, computer-forensics

**服务器端：**

*   项目清单：
*   ...：找到 x% 匹配项，y% 误报*（opencv +10 行代码）*
*   ...：找到 x% 匹配项，y% 误报*（自 1995 年以来的大型自定义代码）*
*   其他：
*   最小的 OpenCV C++ 代码：

    ```
    ....
    .... 
    ```

**哈希列表：**

*   ..：（*由公共资金资助，自...开始限制访问）*
*   ...：（*开放访问）*
*   ...: , y 百万条目, y % new last years *(commercial $y / month)*
*   ...：，x 百万个条目，x % 去年新增*（商业 $x / 月）*

**（服务器端和）众包/众包验证：**

*   谷歌图片过滤器：... *（限制访问，但甚至在自有网站的网站管理员工具中也没有）*

**客户端：**

*   另一个：... *（将在 i5 2540 手机上每 50 毫秒扫描 x 百万像素）*
*   裸体.js（帕特里克·维德）：...

* * *

我完全重写了这个问题，它总是被关闭，显然似乎是广泛的而不是具体的，并且“促进链接”而不是替代方案？

*现在*这里的任务是：
“为这个开发特定但广泛未知的任务盘点世界上所有现有的方法。” （=填补上表中的空白，也许是示例代码/实现）

虽然某些 Windows 软件是面向孩子上网的父母销售的 ，但从开发的角度来看，这个假设不会很快出现在维基百科文章*“裸露检测软件的比较”中。*（也不是在 alternative.to/... ）

这也是具体的，但广泛服务不足或实践。因此，没有任何一个答案/链接会成为自我推销/垃圾邮件，相反，这个问题比一般问题更容易出现。然而，根本不需要任何链接，也不会有个人意见的答案，如果有的话，这将比没有帮助更多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:23:48.947

要运行nude.js，请查看[此站点上的示例。](http://davidwalsh.name/nudejs)

本质上，您需要包含 JS 文件，然后在要运行它的图像上运行检查算法。有[3个功能](http://www.patrick-wied.at/blog/nude-js-update-1/)：`nude.init()` `nude.load(param)`和`nude.scan(function optional)`。

**从链接的示例网站：**

```
nude.load(node);
// Scan it
nude.scan(function(result){ 
    alert(result ? "Nudity found in " + node.id + "!" : "Not nude");
}); 
```

还值得注意的是，[开发人员的一篇文章](http://www.patrick-wied.at/blog/nude-js-update-1/)建议不要在生产模式下使用它。

> 我现在不建议在生产模式下使用该库，因为检测率约为 60%

您可能想查看有关此问题的链接和SO 上的[答案以获取替代方案。](https://stackoverflow.com/a/6163021/761793)

# objective-c - 视图在过渡后更改高度

> ID：15799933
> 
> 赞同：0
> 
> 时间：2013-04-03T23:19:00.360
> 
> 标签：objective-c, uiview, uiviewcontroller, uiviewanimationtransition

我正在使用 UIViewAnimationOptionTransitionCrossDisolve 从一个视图转换到另一个视图。

我遇到的问题是，在过渡生效后，我的屏幕顶部有 20 个像素的间隙，并且新的 UIViewController 向上推，因此屏幕看起来很正常。

我该如何解决？

这是我的转换代码：

```
- (IBAction)logInButtonTapped
{
    [self performTransition:UIViewAnimationOptionTransitionCrossDissolve];
}

-(void)performTransition:(UIViewAnimationOptions)options
{
    //Step 1:  Create your Controllers
    _frontViewController = [[UINavigationController alloc] initWithRootViewController:[[ViewController alloc] init]];
    NSLog(@"ViewController Frame: %@", NSStringFromCGRect(_frontViewController.view.frame));
    _frontViewController.wantsFullScreenLayout = NO;
    self.navigationController.navigationBar.frame = CGRectOffset(self.navigationController.navigationBar.frame, 0.0, -20.0);
    UIViewController * leftViewController = [[LeftSideViewController alloc] init];

    //Step 2:  Instantiate your PKRevealController
    self.revealController = [PKRevealController revealControllerWithFrontViewController:_frontViewController leftViewController:leftViewController rightViewController:nil options:nil];

    UIView * fromView, *toView;

    if ([self.view superview] != nil)
    {
        fromView = self.view;

        toView = self.revealController.view;

        NSLog(@"After Transition ViewController Frame: %@", NSStringFromCGRect(_frontViewController.view.frame));
    }

    [UIView transitionFromView:fromView toView:toView duration:0.5
                       options:options completion:^(BOOL finished){}];
} 
```

这是我的 NSLog 显示的内容：

```
2013-04-03 18:14:30.560 AppName[24631:c07] {{0, 0}, {320, 548}}
2013-04-03 18:14:31.691 AppName[24631:c07] ViewController Frame: {{0, 0}, {320, 568}}
2013-04-03 18:14:31.692 AppName[24631:c07] After Transition ViewController Frame: {{0, 0}, {320, 548}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:07:57.700

我解决了我的问题。我必须将 WantsFullScreenLayout 设置为 YES。

# java - 通过 JNI 从外语（Prolog）与 JavaFX 应用程序的控件交互

> ID：15799940
> 
> 赞同：2
> 
> 时间：2013-04-03T23:19:59.143
> 
> 标签：java, javafx-2, instrumentation, agent

我想与来自外语应用程序（Prolog）的JavaFX应用程序的控件进行交互（从Java的角度尽可能透明地）。Java 和 Prolog 是通过 JNI 连接的，我已经解决了 JNI 交互问题。

我的问题是：

检测任意 JavaFX 应用程序的最佳方法是什么，以便在主[Stage](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html)被实例化后立即在某处注入代码以调用 Prolog 中的例程？（因此 Prolog 将能够引用舞台[场景图](http://docs.oracle.com/javafx/2/scenegraph/jfxpub-scenegraph.htm)中的[节点](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)）。

我认为[Scenic View使用](http://fxexperience.com/scenic-view/)[代理](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/package-summary.html)来执行类似的操作，以检测没有任何与 Scenic View 相关的代码的任意 JavaFX 应用程序。

在我的问题中，目标是可以在没有 JNI 相关代码且仅具有表示逻辑的情况下创建 JavaFX 接口。使用 JNI 启动 Prolog 程序的代码应该在接口准备好后以某种方式注入。所以我的想法是只将Java用于我的程序的接口，而我的应用程序的核心逻辑是在Prolog中实现的。

# excel - 如何更轻松地更改系列名称？

> ID：15799943
> 
> 赞同：0
> 
> 时间：2013-04-03T23:20:28.073
> 
> 标签：excel, graph

有没有更简单的方法来为 Excel 中的图形设置系列名称？我制作了一个包含多条线的图表，每条线只有一个名称 Series #，但单独编辑每条线很乏味。有没有更简单的方法？

# javascript - 通过 jQuery 操作 Spotify 播放按钮

> ID：15799944
> 
> 赞同：0
> 
> 时间：2013-04-03T23:20:32.573
> 
> 标签：javascript, jquery, spotify

是否可以通过 jQuery 操作 Spotify 播放按钮？例如，暂停和播放、更改歌曲等？我尝试使用 .contents() 修改播放按钮所在的 iframe 的内容，但运气不佳。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:28:30.900

不幸的是，Spotify 播放按钮没有公开 JS Api 来控制播放。

# c - 静态变量和静态内存分配的区别？

> ID：15799945
> 
> 赞同：-5
> 
> 时间：2013-04-03T23:20:37.383
> 
> 标签：c, memory-management, static-variables, static-memory-allocation

一位经验丰富的 C 开发人员告诉我，静态变量的概念与静态内存分配的概念不同。这个对吗？如果是这样，这两个概念有什么区别？

**静态内存分配**的正式定义是什么？它与**静态变量**的正式定义有何不同？

这个问题仅涉及这些概念如何映射到 C 编程语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:29:57.930

## 这两个概念在含义上没有本质区别。

本质上，*静态变量*是使用*静态内存分配分配*内存的变量。

下列术语的使用支持这一点：

*   GNU 的[libc 手册](http://www.gnu.org/software/libc/manual/html_node/Memory-Allocation-and-C.html)。

    > *   静态分配是在声明静态或全局变量时发生的。每个静态或全局变量定义一个固定大小的空间块。当您的程序启动（执行操作的一部分）时，空间被分配一次，并且永远不会被释放。
    > *   当您声明一个自动变量（例如函数参数或局部变量）时，就会发生自动分配。自动变量的空间在输入包含声明的复合语句时分配，并在退出该复合语句时释放。在 GNU C 中，自动存储的大小可以是一个变化的表达式。在其他 C 实现中，它必须是常量。

*   [K&R 第二版](http://cm.bell-labs.com/cm/cs/cbook/)，附录 A，第 4.1 节“存储类”

    > 有两种存储类：自动和静态。几个关键字与对象声明的上下文一起指定其存储类。自动对象是块的本地对象（Par.9.3），并在退出块时被丢弃。如果没有提及存储类规范，或者使用了 auto 说明符，则块内的声明会创建自动对象。声明为寄存器的对象是自动的，并且（如果可能）存储在机器的快速寄存器中。
    > 
    > 静态对象可能是块的本地对象或所有块的外部，但在任何一种情况下，在退出和重新进入函数和块时都会保留它们的值。在一个块中，包括一个为函数提供代码的块，静态对象是用关键字 static 声明的。在所有块之外声明的对象，与函数定义处于同一级别，始终是静态的。通过使用 static 关键字，它们可以成为特定翻译单元的本地；这给了他们内部联系。通过省略显式存储类或使用关键字 extern，它们成为整个程序的全局；这给了他们外部联系。

    这似乎证实了等价性。

*   [编译器、原理、技术和工具](http://dragonbook.stanford.edu/)第 7.1.1 节静态与动态存储分配

    > *静态*和*动态*这两个形容词分别区分编译时间和运行时间。

*   [操作系统，基于概念的方法](http://books.google.co.uk/books?id=kbBn4X9x2mcC&printsec=frontcover)DM Dhamdhere，第 194 页

    > > **定义5.1（静态和动态绑定）**静态绑定是在程序（或软件系统）开始运行之前执行的绑定，而动态绑定是在其运行期间执行的绑定。
    > 
    > [...]
    > 
    > **静态和动态内存分配**静态内存分配可以由编译器、链接器或加载器在读取程序执行时执行。动态内存分配以惰性方式执行。也就是说，内存分配是在程序执行期间第一次使用实体之前分配给实体的。
    > 
    > [...]
    > 
    > 静态内存分配在程序执行期间不需要任何内存分配操作。相比之下，动态分配会产生在程序执行期间执行的内存分配操作的开销。其中一些动作甚至在程序执行期间重复多次。

*   [Programming in C -](http://books.google.co.uk/books?id=rC6la__FTU4C&dq=static+memory+allocation&source=gbs_navlinks_s) Ajay Mittal 的实用方法。第 7.7 节，概念性问答，第 25 期，第 444 页

    > 运行时（即程序执行时）的内存分配称为**动态内存分配**。`malloc`在 C 中，内存可以通过调用`calloc`或`realloc`函数来动态分配。编译时的内存分配称为**静态内存分配**

    后面是一个表格，详细解释了差异。你可以[在谷歌图书中看到它](http://books.google.co.uk/books?id=rC6la__FTU4C&pg=PA444&dq=static+memory+allocation&hl=en&sa=X&ei=vL1cUYK8JIqi0QW1-IGQCQ&ved=0CEAQ6AEwAg)

*   [内存作为 C 和 C++ 中的编程概念](http://www.cambridge.org/9780521520430)第 15 页：

    > [...] 因此我们说的是*静态内存分配*或（*编译时*的内存分配或*编译器的内存分配*），尽管严格来说，编译器在程序运行时不会分配任何内存。甚至在运行程序时，用于编译该程序的编译器可能不再存在。

*   Wikipedia 确认了两个概念之间的等价性：[静态内存分配](http://en.wikipedia.org/wiki/Static_memory_allocation)和[静态变量](http://en.wikipedia.org/wiki/Static_variable)都相互引用并明确表示静态变量是已静态分配的变量。

# php - 以 JSON 形式返回类属性

> ID：15799948
> 
> 赞同：0
> 
> 时间：2013-04-03T23:20:47.723
> 
> 标签：php

我正在尝试将 php 中的类中的一些属性编码为 JSON，但我返回的所有方法都是 {}

这是我的代码，我哪里出错了？

谢谢。

```
 <?php

    class Person  
    {  
        private $_photo;  
        private $_name;  
        private $_email;  

        public function __construct($photo, $name, $email)  
        {  
    $this->_photo = $photo;  
            $this->_name = $name;  
            $this->_email = $email;  

        }  

       public function getJsonData() {
          $json = new stdClass;
          foreach (get_object_vars($this) as $name => $value) {
             $this->$name = $value;
          }
          return json_encode($json);
       }

    }  

    $person1 = new Person("mypicture.jpg", "john doe", "doeman@gmail.com");  

    print_r( $person1->getJsonData() ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:26:14.257

这是因为您没有使用 $json 变量，而是使用了 $this->$name。您还指的是哪个 $this ？您没有使用我所看到的 $json 变量。

```
class Person  
{  
    private $_photo;  
    private $_name;  
    private $_email;  

    public function __construct($photo, $name, $email)  
    {  
$this->_photo = $photo;  
        $this->_name = $name;  
        $this->_email = $email;  

    }  

   public function getJsonData() {
      //I'd make this an array
      //$json = new stdClass;
      $json = array();

      foreach (get_object_vars($this) as $name => $value) {
         //Here is my change
         //$this->$name = $value;
         $json[$name] = $value
      }
      return json_encode($json);
   }

}  

$person1 = new Person("mypicture.jpg", "john doe", "doeman@gmail.com");  

print_r( $person1->getJsonData() ); 
```

希望它能解决你的问题。我就是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:36:26.710

从 PHP 5.4 开始，在您的类中实现[JsonSerializable接口。](http://www.php.net/manual/en/class.jsonserializable.php)

# python - 小写python字符串，引用字典

> ID：15799951
> 
> 赞同：0
> 
> 时间：2013-04-03T23:21:11.960
> 
> 标签：python

我有一本字典，`values`。在下面的：

```
<cleared_for_sale>%(cleared_for_sale)s</cleared_for_sale>""" % values 
```

`cleared_for_sale`变量是`True`或`False`。但是，我需要它显示为`true`or `false`。我将如何小写这个？我不想更改我正在使用的字符串格式的类型（我不能使用`"string" % str(var).lower()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:24:02.470

怎么样

`("""<cleared_for_sale>%(cleared_for_sale)s</cleared_for_sale>"""%values).lower()`

或许

`str(values).replace("T","t").replace("F","f")`?

因为您没有解释为什么不能使用 str(values).lower() ...这两种解决方案都可以按照您目前的措辞回答您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:29:41.287

在进行格式化之前，将字典中的值从布尔值更改为字符串：

```
values['cleared_for_sale'] = str(values['cleared_for_sale']).lower() 
```

还有一个替代方案，因为你有一些厌恶`str(var).lower()`：

```
values['cleared_for_sale'] = 'true' if values['cleared_for_sale']) else 'false' 
```

`% values`现在，在格式字符串上使用 use时，`%(cleared_for_sale)s`将替换为`true`or`false`而不是`True`or `False`，而不会修改任何其他行为。

# ios - 在 iOS 上处理 Internet 访问网站身份验证

> ID：15799956
> 
> 赞同：0
> 
> 时间：2013-04-03T23:21:19.170
> 
> 标签：ios, objective-c, authentication, wifi, nsconnection

我正在为一所可能会在校园内使用的大学编写应用程序。学院的 wifi 需要凭据才能通过网页（例如 AT&T 热点）访问互联网。我希望我的应用程序检测它是否“连接”到互联网。过去，我看到其他应用程序重定向到 Safari，以便用户可以进行身份​​验证，然后返回应用程序。有谁知道如何检测这种事情，而无需简单地尝试从连接（例如 google.com）中获取 NSData，然后假设是否没有获取数据，这就是问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:14:18.323

当您尝试连接到具有强制门户的网络时，iOS 会自动显示 Web 视图。为确保您在应用程序中已连接并经过身份验证，您应该`UIRequiresPersistentWiFi`在`Info.plist`.

**编辑：**我上面的答案仅适用于*需要*互联网连接的应用程序。如果您只是检查您是否已连接并经过身份验证，我相信您只需要使用`Reachability`并检查您是否是`ReachableViaWiFi`. （如果您未通过身份验证，我相信`SystemConfiguration`不会说您可以通过 Wi-Fi 访问。）

如果您希望在您的应用程序中而不是在 iOS 默认 Web 视图中处理强制网络身份验证，您可以使用[CaptiveNetwork](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html) API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:57:50.420

如果您不想使用可达性，您可以在校园 wifi 上启动一个随机网站的 NSURLConnection 并检查身份验证挑战。

设置`NSURLConnection`：

```
// Create the request.
NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.apple.com/"]
                        cachePolicy:NSURLRequestUseProtocolCachePolicy
                    timeoutInterval:60.0];
// create the connection with the request
// and start loading the data
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if (theConnection) {
    // Create the NSMutableData to hold the received data.
    // receivedData is an instance variable declared elsewhere.
    receivedData = [[NSMutableData data] retain];
} else {
    // Inform the user that the connection failed.
} 
```

实现 auth challenge 委托方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
     NSLog(@"I'm being challenged.");
} 
```

然后在挑战之后做你想做的事。

如果您不去查看可达性，如果您尝试使用它来访问主机并且它遇到了身份验证挑战，它可能会返回没有连接，因为它无法到达指定的主机。同样，不能 100% 确定此声明是否准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T01:32:44.410

由于您不想使用 NSData 方式（我也不喜欢抓取 NSData 以及使用可达性）这是我想出的更轻量级的方法，因为它只检查 HEAD 响应:)：

```
- (BOOL)connectedToInternet
{
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:
    [NSURL URLWithString:@"http://www.google.com/"]];

    [request setHTTPMethod:@"HEAD"];

    NSHTTPURLResponse *response;

    [NSURLConnection sendSynchronousRequest:request
    returningResponse:&response error: NULL];

    return ([response statusCode] == 200) ? YES : NO;
}

- (void)yourMethod
{                  
    if([self connectedToInternet] == NO)                  
    {   
        // Not connected to the internet
    }
    else
    {
        // Connected to the internet
    }
} 
```

# php - 新用户注册或登录或注销时如何显示弹出窗口？

> ID：15799962
> 
> 赞同：1
> 
> 时间：2013-04-03T23:22:09.737
> 
> 标签：php, popup

当新用户注册或登录然后在管理员页面上显示弹出窗口时是否有可能我有弹出代码但问题是我如何在每次用户登录或注销时显示它应该在管理员页面上显示弹出窗口？

```
<link rel="stylesheet" type="text/css" href="popup-window.css" />
<script type="text/javascript" src="jquery/jquery.js"></script>
<script type="text/javascript" src="popup-window.js"></script>

<body onload="popup_window_show('#sample', 
{ pos : 'window-right-bottom', width : '270px' });"> 

<div   class="popup_window_css" id="sample">

<table class="popup_window_css">
<tr class="popup_window_css">
<td class="popup_window_css">

<div   class="popup_window_css_head">
<img src="images/close.gif" alt="" width="9" height="9" />
User Has Been Login</div>

<div   class="popup_window_css_body">
<div style="border: 1px solid #808080; padding: 6px; background: #FFFFFF;">

Lorem ipsum dolor 
</div></div>

</td></tr></table></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:48:08.347

一种解决方案是确保当用户登录或注册时，在另一个名为“通知”的表中，“userId”被写入其中。然后每隔一段时间，也许每 5 秒（但我不建议这样做）你可以查询“通知”表，如果有的话，调用你写的一些 javascript 函数来获取一些函数的信息返回有关该 userId 的信息，并使用用 javascript 编写的弹出**模拟**函数弹出该函数，这可能是因为调用*alert()*过多会导致浏览器开始激怒您。

哦......并且不要忘记在检索“通知”表中的数据后删除它只是为了让事情变得更容易。

请记住，用户必须首先发出请求，这可以使用 javascript 完成。然后剩下的就是关于你使用 php 和 mysql 返回的内容。

这不是最有效的方法，但它只是完成工作。毕竟，您希望为每个登录的用户看到一个弹出窗口，这意味着它有几个用户。如果它有很多，你就不会这样做。

它需要一些编码，但实现起来并不难。除非你想要一些高效的东西，否则你最好在绘图板上简化这个解决方案。:-)

希望它能给你一个关于如何去做的想法。

# perl - 如何将 perl 模块合并到脚本中

> ID：15799963
> 
> 赞同：0
> 
> 时间：2013-04-03T23:22:14.557
> 
> 标签：perl, perl-module, cpan

我是 Perl 的初学者，我需要使用 Perl 模块 Date::Easter 中的函数来创建一个程序，该程序将需要一年的用户输入并显示那一年的复活节日期，我需要知道你是如何会将该模块合并到脚本中以获得所需的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:29:23.653

很简单：

```
#!/usr/bin/perl

use strict;
use warnings;
use Date::Easter;

chomp (my $year = <STDIN>);
my ($m1, $d1) = easter ($year);
my ($m2, $d2) = julian_easter ($year);
my ($m3, $d3) = orthodox_easter ($year);

print "Gregorian => Month: $m1 Day: $d1\n";
print "Julian    => Month: $m2 Day: $d2\n";
print "Orthodox  => Month: $m3 Day: $d3\n"; 
```

# r - 哪个-在两个长度不等的向量上？

> ID：15799964
> 
> 赞同：0
> 
> 时间：2013-04-03T23:22:15.197
> 
> 标签：r

我有两个长度不等的向量，a 和 b，长度（a）小于 b。

我想在“a”中找到包含相交（a，b）中的值的索引。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T23:24:38.310

就像是

```
a <- list(1,2,3,4,5)
b <- list(6,2,1,5,7,9,10) 
```

并且您想确定 in 元素的位置`a`，请`b`使用：

```
which(a %in% b)
# [1] 1 2 5 
```

`a`如果和`b`是向量，这也有效，例如`a <- c(1,2,3,4,5)`和`b <- c(6,2,1,5,7,9,10)`

# php - 如何改进 PHP IP 生成器功能

> ID：15799966
> 
> 赞同：1
> 
> 时间：2013-04-03T23:22:30.830
> 
> 标签：php, random, ip

我正在尝试使用 PHP 生成随机公共 IP 地址。我将不胜感激有关我为此所做的功能的反馈，如下所示。您认为在编码方式上有哪些方面可以改进？可以用更少的代码行来完成吗？是否有我没有满足的保留号码？我应该使用 mt_rand() 而不是 rand() 吗？所有反馈表示赞赏。谢谢。

```
function generateIP() {
    $q1 = rand(3,253);

    //stop the first quadrant being one from a resrved range
    while ($q1 == '10'|| $q1 == '100'|| $q1 == '127' || $q1 == '169' || $q1 == '172' || $q1 == '192' || $q1 == '198' || $q1 == '203' || $q1 == '224' || $q1 == '240') {
        $q1 = rand(3,253);
    }

    $q2 = rand(0,255);
    $q3 = rand(0,255);
    $q4 = rand(0,255);
    $ip = $q1.'.'.$q2.'.'.$q3.'.'.$q4;
    return $ip;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:40:16.053

这个怎么样？

```
function generateIP() {
$q1 = 0;
do
{
    $q1 = rand(1,255);

}
while($q1 != '0'|| $q1 != '10'|| $q1 != '100'|| $q1 != '127' || $q1 != '169' || $q1 != '172' || $q1 != '192' || $q1 != '198' || $q1 != '203' || $q1 != '224' || $q1 != '240'){

    $q2 = rand(0,255);
    $q3 = rand(0,255);
    $q4 = rand(0,255);
    $ip = $q1.'.'.$q2.'.'.$q3.'.'.$q4;
    return $ip;
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-17T21:05:37.537

在 RANGE 中生成 IP

```
public static function generateRandomIp($start, $end) {
    if (strcmp($start, $end) > 0) {
        return false;
    }

    $arrStart = explode('.',$start);
    $arrEnd = explode('.', $end);

    // First
    $arrIp[0] = rand($arrStart[0], $arrEnd[0]);

    // Second
    if ($arrIp[0] == $arrStart[0] && $arrIp[0] == $arrEnd[0]) {
        $arrIp[1] = rand($arrStart[1], $arrEnd[1]);
    } elseif ($arrIp[0] == $arrStart[0]) {
        $arrIp[1] = rand($arrStart[1], 255);
    } elseif ($arrIp[0] == $arrEnd[0]) {
        $arrIp[1] = rand(0, $arrEnd[1]);
    } else {
        $arrIp[1] = rand(0, 255);
    }

    // Third
    if ($arrIp[1] == $arrStart[1] && $arrIp[1] == $arrEnd[1]) {
        $arrIp[2] = rand($arrStart[2], $arrEnd[2]);
    } elseif ($arrIp[1] == $arrStart[1]) {
        $arrIp[2] = rand($arrStart[2], 255);
    } elseif ($arrIp[1] == $arrEnd[1]) {
        $arrIp[2] = rand(0, $arrEnd[2]);
    } else {
        $arrIp[2] = rand(0, 255);
    }

    // Fourth
    if ($arrIp[2] == $arrStart[2] && $arrIp[02] == $arrEnd[2]) {
        $arrIp[3] = rand($arrStart[3], $arrEnd[3]);
    } elseif ($arrIp[2] == $arrStart[2]) {
        $arrIp[3] = rand($arrStart[3], 255);
    } elseif ($arrIp[2] == $arrEnd[2]) {
        $arrIp[3] = rand(0, $arrEnd[3]);
    } else {
        $arrIp[3] = rand(0, 255);
    }

    return implode(".", $arrIp);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-20T12:13:00.613

```
sprintf("%s.%s.%s.%s",
    rand(0,255),
    rand(0,255),
    rand(0,255),
    rand(0,255)         
); 
```

# php - 如何将用户与最近的地址匹配？

> ID：15799971
> 
> 赞同：0
> 
> 时间：2013-04-03T23:22:59.363
> 
> 标签：php, mysql, google-maps, geolocation, geocoding

我正在做一个网站，每个用户都输入他的地址，并且该网站将与最接近的人匹配每个人，我嵌入了谷歌地图 API 的方向但是该网站如何匹配用户？

如果你能给我一些例子或任何可以帮助我实现目标的策略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:08:26.907

你可以学习如何获取纬度/经度：[Get latitude and longitude automatically using php, API](https://stackoverflow.com/questions/8633574/get-latitude-and-longitude-automatically-using-php-api)

将每个用户的纬度/经度存储在数据库中的数据中。

此外，存储每个用户的 COUNTRY 是明智之举 - 这样您的查询就会减少。强烈建议同时存储 ZIP/POSTAL 等区域数据，以进一步减少查询负载。

然后在您使用的任何 php 页面上，您将已经拥有正在搜索的用户的区域数据（如上所述）。使用该数据循环遍历同一 ZIP/POSTAL 区域内的所有其他成员并查询其存储的纬度/经度。

一旦您在同一 ZIP/POSTAL 区域内获得其他人的纬度/经度，您就可以使用以下功能：[http ://snipplr.com/view/2531/](http://snipplr.com/view/2531/)

或者，您可以通过 SQL 语句执行很多此操作，如[https://stackoverflow.com/a/7672821/797620](https://stackoverflow.com/a/7672821/797620)所述，但我自己从未测试过该语句。

谷歌的这个页面提供了另一种非常详细的方法，您可以尝试一下：[https ://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:16:55.390

这个问题需要 PostgreSQL/POSTGIS 解决方案。如有必要，将经纬度存储在带有一些元信息的表中。然后让 POSTGIS 的魔力发挥作用。

PostgreSQL/Postgis 已针对这些地理空间相关查询进行了优化！实际上在 > 9.1 的新版本中引入了 K-Nearest Neighbor 运算符，它返回 N-最近邻（因此得名）：

```
SELECT * FROM your_table ORDER BY your_table.geom <-> "your location..." LIMIT 10 
```

所以这很容易:)

<-> 是一个“距离”运算符，但它只在出现在 ORDER BY 子句中时才使用索引。在将运算符放入 ORDER BY 和使用 LIMIT 截断结果集之间，我们可以非常非常快（在这种情况下，在 2M 记录表上不到 10 毫秒）获得离我们测试点最近的 10 个点。”

[在这里阅读更多。](http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/)

# jquery - 为什么 jquery 不能在我的本地机器上运行？

> ID：15799973
> 
> 赞同：2
> 
> 时间：2013-04-03T23:23:07.740
> 
> 标签：jquery

以下脚本适用于 jsfiddle（见下文），但不适用于我的本地机器。

[http://jsfiddle.net/gFaZn/](http://jsfiddle.net/gFaZn/)

```
<!DOCTYPE HTML>

<html>

<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script type="text/javascript" src="script.js"></script>
<link type="text/css" rel="stylesheet" href="stylesheet.css">

</head>

<body>

<div></div>

</body>

</html> 
```

谁能告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T23:25:46.757

`//`告诉浏览器匹配当前协议。如果您在网络服务器上也没问题，因为它会切换到`http`或`https`，但您可能会直接使用浏览器加载文件，所以它会扩展为`file://`.

您需要明确指定协议：

```
src="http://... 
```

更好的是，使用本地网络服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T23:24:19.200

尝试更换

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> 
```

和

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T23:26:51.573

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> 
```

不会理解在本地运行。添加`http://`并尝试agian。仅供参考，JQuery 只是 javascript，并且始终在您的浏览器中运行。因此，如果在使用 javascript 时某些东西不起作用，或者是编程错误或指向 JQuery 文件的错误链接。无论哪种方式，它都不会是 javascript 它自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T23:25:35.240

您的源网址可能没有链接到您的机器可以看到的任何内容？

快速测试可能是

```
$(function(){
  alert(9);
}); 
```

如果您没有看到警报，则没有加载 jQuery。完全限定路径

# ruby-on-rails-3 - 生成带有前缀的随机资源 ID？

> ID：15799978
> 
> 赞同：0
> 
> 时间：2013-04-03T23:23:42.953
> 
> 标签：ruby-on-rails-3, random, model, helper

我有一个带有以下模型的简单 Rails 3 发票应用程序：

```
Brand
Client
Invoice 
```

一个品牌有很多张发票，客户有很多张发票，发票属于客户和品牌。基本上，品牌是创建发票的公司，客户是发票的接收者，发票是实际发票。

我正在尝试找出最好的方法，让每张发票都有一个简单的随机参考号，每个发票都以每个品牌独有的东西为前缀。

我正在考虑将 invoice_prefix 添加到品牌表中。然后每个品牌都有一个三位数的前缀，例如`DAN-`.

将品牌前缀后跟 5 位随机数添加到发票表中的列的最佳方法是什么？

我愿意接受有关更好方法的建议！

我想要的最终结果是每张发票都有一个类似于`DAN-98372`.

我认为最好的方法是将前缀列添加到品牌表中，然后为发票创建一个 before_create 操作，在品牌前缀之后插入一个随机数。我只是不确定最好的方法来做到这一点。

```
before_create :generate_reference

private
def generate_reference
  self.invoice_number = self.brand.prefix
end 
```

上面的代码正确地提取了品牌前缀，但我不确定之后如何添加一个随机的 5 位数字。

我认为类似的东西`<%= rand(1000..9999) %>`会起作用，但我不确定如何将其添加到 before_create 中的品牌前缀中。

我对 after_create 方法不是很熟悉，所以任何建议都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:56:41.617

从提供的信息来看，它是多态关联的一个案例。参考[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)。

在提供的代码中，您应该调用“generate_reference”“before_create”而不是“after_create”，因为您希望保存分配的值。指定“after_create”将进入无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:59:33.163

您可以使用

[https://github.com/patdeegan/integer-obfuscator](https://github.com/patdeegan/integer-obfuscator)

或[https://github.com/namick/obfuscate_id](https://github.com/namick/obfuscate_id)

这样你就可以隐藏你真正拥有的发票数量并且它是独一无二的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T13:01:51.810

生成随机数据资源

[https://github.com/wemersonblend/fakejs](https://github.com/wemersonblend/fakejs)

# c# - 从 C# 更新 SSRS 2012 部署的数据源和数据集参考

> ID：15799996
> 
> 赞同：2
> 
> 时间：2013-04-03T23:25:02.733
> 
> 标签：c#, soap, reporting-services

编辑：我想我可以稍微简化一下这个问题，只询问需要知道的内容：

我正在使用 SSRS 2010 Web 服务使用 C#：'ReportService2010.asmx' [http://technet.microsoft.com/en-us/library/ee640743.aspx](http://technet.microsoft.com/en-us/library/ee640743.aspx)

我可以使用“CreateDataSource”方法在 SSRS 服务器 http:// (servername)/ReportServer 的实例上创建数据源。

我还可以使用“CreateCatalogItem”方法在服务器上创建报告，通过引用项目的 RDL 本地文件将其序列化为字节数组，然后将其作为“定义”传递给在服务器上创建它的方法。

现在，我所做的一切都带有一个警告，一个主要的。我只能将所有内容部署到同一个文件夹。如果我部署一个数据源来表示“数据源”文件夹，然后部署一个报告说：“测试报告”，则报告不知道它有一个共享数据源可以在不同的位置引用。所以我在technet文章中挖掘了一点，并尝试了“GetItemDataSources”方法，但它只给出了 ReportingService2010.DataSource 返回类型的名称和类型。 **有谁知道链接“数据源”的“报告”或“数据集的 CatalogItem 属性”的方法，**所以它在部署时指向SSRS服务器上不同文件夹中的引用？ 必须有一种方法可以做到这一点，因为我知道我可以从 Business Intelligence Development Studio 进行部署并且它可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:21:23.847

我在部署报告文件时遇到了类似的问题；通过 rs.exe 或代码进行部署时，您会遇到报告丢失与数据源的链接的这些问题。

我们通过在应用程序部署后立即将报表显式指向服务器端数据源解决了这个问题；这与您尝试做的类似吗？

无论如何，这是我们在报表部署应用程序中使用的稍微修改过的代码：

```
static void SetReportDataSource(string reportPath)
    {
      string dsPath = CombinePath(DataSourcePath, DataSourceFolder, DataSourceName);

      DataSourceReference dsRef = new DataSourceReference()
      {
        Reference = dsPath
      };
      DataSource ds = new DataSource();
      ds.Item = dsRef as DataSourceDefinitionOrReference;
      ds.Name = DataSourceName;

      var rptDataSources = Server.GetItemDataSources(reportPath);
      foreach (var rptDs in rptDataSources)
      {
        Server.SetItemDataSources(filePath, new DataSource[] { ds });
      }   
    } 
```

因此，基本上我们有定义信息的变量，例如数据源名称、服务器上的数据源位置以及报表的相同信息。它们可以位于不同的文件夹中。

基于此，我们创建一个对数据源的新引用，然后使用`SetItemDataSources`.

无论如何，这为我解决了数据源问题。不确定共享数据集以及它们如何处理所有这些，但希望这会有所帮助。

另外，只是认为这将使用`ReportService2005`端点，但对于`ReportService2010`.

**编辑：**

对于这里提到的路径，这些是相对于服务器的，例如`/Reports/`. 在定义包含目标`Url`的对象的属性时，您不需要完全限定名称。`ReportService2010`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-27T17:02:37.347

也许这可能会有所帮助。我用它来重置给定父文件夹中所有报告的数据源，它是子文件夹：

```
using System;
using GetPropertiesSample.ReportService2010;
using System.Diagnostics;
using System.Collections.Generic;   //<== required for LISTS
using System.Reflection;

namespace GetPropertiesSample
{
class Program
{
    static void Main(string[] args)
    {
        GetListOfObjectsInGivenFolder_and_ResetTheReportDataSource("0_Contacts");  //<=== This is the parent folder
    }

    private static void GetListOfObjectsInGivenFolder_and_ResetTheReportDataSource(string sParentFolder)
    {
        // Create a Web service proxy object and set credentials
        ReportingService2010 rs = new ReportingService2010();
        rs.Credentials = System.Net.CredentialCache.DefaultCredentials;

        CatalogItem[] reportList = rs.ListChildren(@"/" + sParentFolder, true);

        int iCounter = 0;

        foreach (CatalogItem item in reportList)
        {
            iCounter += 1;
            Debug.Print(iCounter.ToString() + "]#########################################");

            if (item.TypeName == "Report")
            {
                Debug.Print("Report: " + item.Name);
                ResetTheDataSource_for_a_Report(item.Path, "/DataSources/Shared_New");   //<=== This is the DataSource that I want them to use
            }
        }
    }

    private static void ResetTheDataSource_for_a_Report(string sPathAndFileNameOfTheReport, string sPathAndFileNameForDataSource)
    {
        //from: http://stackoverflow.com/questions/13144604/ssrs-reportingservice2010-change-embedded-datasource-to-shared-datasource

        ReportingService2010 rs = new ReportingService2010();
        rs.Credentials = System.Net.CredentialCache.DefaultCredentials;

        string reportPathAndName = sPathAndFileNameOfTheReport;
        //example of sPathAndFileNameOfTheReport  "/0_Contacts/207_Practices_County_CareManager_Role_ContactInfo";

        List<ReportService2010.ItemReference> itemRefs = new List<ReportService2010.ItemReference>();
        ReportService2010.DataSource[] itemDataSources = rs.GetItemDataSources(reportPathAndName);

        foreach (ReportService2010.DataSource itemDataSource in itemDataSources)
        {
            ReportService2010.ItemReference itemRef = new ReportService2010.ItemReference();
            itemRef.Name = itemDataSource.Name;

            //example of DataSource i.e. 'itemRef.Reference':    "/DataSources/SharedDataSource_DB2_CRM";
            itemRef.Reference = sPathAndFileNameForDataSource;

            itemRefs.Add(itemRef);
        }

        rs.SetItemReferences(reportPathAndName, itemRefs.ToArray());
    }
} 
```

}

# java - 在 int 上执行方法

> ID：15799997
> 
> 赞同：0
> 
> 时间：2013-04-03T23:25:15.213
> 
> 标签：java, methods, compiler-errors, int

我正在尝试通过一种方法为 int 生成一个随机数。我知道这是无法做到的，因为 int 是原始类型，并且我得到一个 int cannot be deferenced 错误。它周围有没有我仍然可以使用该方法来获取 int 值的地方？

* * *

```
public int move()
 {
     Random random = new Random();
     int generatedNum = random.nextInt(7 - 1) + 1;

     return generatedNum;
 }

public static void main(String[] args)
{
    int player1 = 0;
    int player2 = 0;

    player1 = player1.move();
    player2 = player2.move();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:28:11.390

你想做什么？这会起作用，但不知道它是否是你想要的......

```
// made this static so you don't need a class reference
public static int move()
 {
     Random random = new Random();
     int generatedNum = random.nextInt(7 - 1) + 1;

     return generatedNum;
 }

public static void main(String[] args)
{
    int player1 = 0;
    int player2 = 0;

    // Now we just call the static method move to set the ints.
    player1 = move();
    player2 = move();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:30:39.917

int 是原始类型，而 Integer 是最终类型，所以不，您将永远无法编写 5.move()。您可以编写一个只包装整数的类，但不能用它进行算术运算。

也许`Iterator<Integer>`是一个值得实现的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T23:32:54.753

您可以创建自己的类，类似于 Integer 类（不幸的是，`final`或者您可以对其进行子类化）。然后将您想要的任何方法添加到该类。当您想要检索值时使用起来有点不方便，但不会太乱。

# emacs - 在 Emacs 中为 .tikz 文件激活乳胶模式

> ID：15799999
> 
> 赞同：1
> 
> 时间：2013-04-03T23:25:25.710
> 
> 标签：emacs

如何使乳胶模式应用于 Emacs 中扩展名为 .tikz 的文件？（我正在使用 Auctex）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:38:58.267

您可以`M-x latex-mode`在文件缓冲区中运行。如果您想为您访问的每个文件自动执行此操作，请将以下内容添加到`.emacs`，

```
 (setq auto-mode-alist
     (append
         '(("\\.tikz\\'" . latex-mode))
          auto-mode-alist)) 
```

`auto-mode-alist`是您可能已经猜到的文件类型和应用模式的列表。您可以运行`C-h v auto-mode-alist`以获取您的 emacs 变量的描述。