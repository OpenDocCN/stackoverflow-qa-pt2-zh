# StackOverflow 问答 15669000-15669999

# c++ - C++ - 客户端-服务器应用程序 - 服务器上的 recv() 可以正常工作，但客户端上的 recv() 会阻止程序

> ID：15669001
> 
> 赞同：0
> 
> 时间：2013-03-27T20:41:37.647
> 
> 标签：c++, client-server

我正在编写客户端-服务器应用程序。到目前为止一切正常，客户端发送了一个请求，服务器接收到它，解析它。但是现在我想发回一个答案，所以我复制了这两个函数，我把 write() 从客户端放到服务器，把 read() 从服务器放到客户端。
当我现在运行程序时，一切都阻塞了，服务器等待，客户端也在等待。当我 ctrl+c 客户端时，服务器解除阻塞并解析正确的请求并等待另一个请求。请问有什么问题吗？

来自客户端的部分代码：

```
 params.port = atoi(params.pvalue.c_str());  
  hostent *host;              
  sockaddr_in socketHelper;    
  int clientSocket;           
  char buf[BUFFER_LEN];     
  int size;                   
  string data;                
  string recieved;

  // gets info about server
  host = gethostbyname(params.hvalue.c_str());
  if(host == NULL) {
    printErr(ERR_HOSTNAME);
    return ERR_HOSTNAME;
  }

  // makes a socket
  if((clientSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == -1) {
    printErr(ERR_SOCKET);
    return ERR_SOCKET;
  }

  socketHelper.sin_family = AF_INET;
  socketHelper.sin_port = htons(params.port);
  memcpy(&(socketHelper.sin_addr), host->h_addr, host->h_length);

  // connects the socket
  if(connect(clientSocket, (sockaddr *)&socketHelper, sizeof(socketHelper)) == -1) {
    printErr(ERR_CONNECTION);
    return ERR_CONNECTION;
  }

  // sends data
  if((size = write(clientSocket, request.c_str(), request.length())) == -1) {
    printErr(ERR_SEND);
    return ERR_SEND;
  } 

  // recieves data
  while ((size = read(clientSocket, buf, BUFFER_LEN)) != 0) {
    recieved.erase();
    recieved.append(buf, size);

    data = data + recieved;
  }

  // closes a connection
  close(clientSocket); 
```

以及来自服务器的部分代码：

```
while(1) {
    int clientSocket = accept(GodParticle, (struct sockaddr*) &GodAddr, &clientSocketSize);
    if(clientSocket == -1) {
      printErr(ERR_ACCEPT);
      return ERR_ACCEPT;
    }

    if((pid = fork()) == 0) {
      while ((size = read(clientSocket, buf, BUFFER_LEN)) != 0) {
        recieved.erase();
        recieved.append(buf, size);

        request = request + recieved;
      }

      parserInput(request);
      getData();
      parserOutput();

      if((size = write(clientSocket, sendback.c_str(), sendback.length())) == -1) {
        printErr(ERR_SEND);
        return ERR_SEND;
      } 

      close(clientSocket);
      exit(ERR_OK);
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:46:22.463

好吧，让我这样回答。recv() 默认情况下会阻止您的程序，直到它从服务器接收到一些消息。

而 recv() 之所以不会阻塞你的服务器程序，是因为你使用了 fork() 创建了一个子进程。

所以你必须使用其他方法来避免这个块（可能像使用 select 或其他一些东西）。

# python - 如何在目录中打开随机文件夹

> ID：15669005
> 
> 赞同：-4
> 
> 时间：2013-03-27T20:41:42.617
> 
> 标签：python, random, cmd, directory

我想知道如何使用批处理文件或 Python 从目录中的多个文件夹中打开一个随机文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:45:49.373

```
>>> import random
>>> import os
>>> files = os.listdir('/tmp')
>>> dirs = [f for f in files if os.path.isdir(f)]
>>> random.sample(dirs,1)
['tempdir'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:14:20.637

在`cmd`你可以这样做：

```
@echo off

setlocal EnableDelayedExpansion

set root=C:\base\folder

for /f %%d in ('dir /b /a:d "%root%" ^| find /c /v ""') do set count=%%d

set /a num=%RANDOM% %% %count%

for /f "skip=%num% tokens=*" %%d in ('dir /b /a:d "%root%"') do (
  set folder=%%~fd
  goto :FIN
)

:FIN
echo %folder%

endlocal 
```

# arduino - 不能在库中使用 attachInterrupt

> ID：15669017
> 
> 赞同：5
> 
> 时间：2013-03-27T20:42:08.933
> 
> 标签：arduino, static-libraries, interrupt

我正在为超声波距离传感器编写一个简单的库，并认为我会尝试使用中断。

但是我无法在`attachCallback`方法中正确设置我的功能。

当引脚分别变为高电平和低电平时，我想要`HCSR04Interrupt::echoHigh()`并调用它。`HCSR04Interrupt::echoLow()`

我用谷歌搜索了这个无济于事。Ardiuno IDE 说明如下：

```
./Arduino/libraries/HCSR04/HCSR04Interrupt.cpp: In member function 'void HCSR04Interrupt::getDistance()':
./Arduino/libraries/HCSR04/HCSR04Interrupt.cpp:31: error: argument of type 'void (HCSR04Interrupt::)()' does not match 'void (*)()'
./Arduino/libraries/HCSR04/HCSR04Interrupt.cpp: In member function 'void HCSR04Interrupt::echoHigh()':
./Arduino/libraries/HCSR04/HCSR04Interrupt.cpp:47: error: argument of type 'void (HCSR04Interrupt::)()' does not match 'void (*)()' 
```

这是我的标题：

```
#ifndef _HCSR04Interrupt_
#define _HCSR04Interrupt_

#include "Arduino.h"

#define HCSR04_CM_FACTOR 58.0
#define HCSR04_IN_FACTOR 148.0
#define HCSR04_CM_MODE 0
#define HCSR04_IN_MODE 1

class HCSR04Interrupt {
  public:
    double distance;

    HCSR04Interrupt(int trigger_pin, int echo_pin, void (*callback)());

    void setUnits(int units);

    void getDistance();
  private:
    int _trigger_pin;
    int _echo_pin;
    int _units;
    unsigned long _micros_start;
    void (*_callback)();

    void initialize();
    void echoHigh();
    void echoLow();
};

#endif 
```

我的实现（不完整，因为我无法通过 attachInterrupt 步骤）：

```
#include "Arduino.h"
#include "HCSR04Interrupt.h"

HCSR04Interrupt::HCSR04Interrupt(int trigger_pin, int echo_pin, void (*callback)()) {
  _trigger_pin = trigger_pin;
  _echo_pin = echo_pin;
  _callback = callback;

  initialize();
}

void HCSR04Interrupt::setUnits(int units) {
  _units = units;
}

void HCSR04Interrupt::initialize() {
  pinMode(_trigger_pin, OUTPUT);
  pinMode(_echo_pin, INPUT);

  digitalWrite(_trigger_pin, LOW);
}

void HCSR04Interrupt::getDistance() {
  //Listen for the RISING interrupt
  attachInterrupt(_echo_pin - 2, echoHigh, RISING);

  //The trigger pin should be pulled high,
  digitalWrite(_trigger_pin, HIGH);

  //for 10 us.
  delayMicroseconds(20);

  //Then reset it.
  digitalWrite(_trigger_pin, LOW);
}

void HCSR04Interrupt::echoHigh() {
  _micros_start = micros();

  detachInterrupt(_echo_pin - 2);
  attachInterrupt(_echo_pin - 2, echoLow, FALLING);
}

void HCSR04Interrupt::echoLow() {
  detachInterrupt(_echo_pin - 2);

  unsigned long us = micros() - _micros_start;

  distance = us;

  (*_callback)();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T20:48:39.540

所以**编译器**（而不是 IDE）会告诉你到底出了什么问题：

```
argument of type 'void (HCSR04Interrupt::)()' does not match 'void (*)() 
```

因此，虽然`attachInterrupt()`采用 type 的函数指针`void (*)()`，但您试图向它传递一个**非静态成员函数，**但您不能这样做。您可以尝试制作成员函数`static`和强制转换：

```
static void echoHigh();

// ...

attachInterrupt(_echo_pin - 2, reinterpret_cast<void (*)()>(&echoHigh), RISING); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T20:47:36.020

Arduino 中断处理程序只能是函数。您正在尝试使**对象**的方法成为中断处理程序。因此编译器抱怨。

更准确地说，对象方法就像函数一样，但就好像它们带有一个“隐藏”参数，它指定了对象实例。因此，它们实际上具有与普通函数不同的类型签名。当函数正在寻找的是普通函数指针时，这不允许传递方法指针。

解决方案是将您的`echoHigh()`和`echoLow()`移出`HCSR04Interrupt`课堂，并使它们成为简单的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-17T18:51:12.060

当我偶然发现这个问题并且它没有被接受的答案时，我写了我发现的东西，这对我有用：

中断必须由全局包装器调用。这个包装器需要调用`handleInterupt`类的一个函数。因此它必须知道类。这可以通过将其存储在全局变量中来完成。如果应该使用该类的多个实例，则必须使用多个这样的全局变量。但是由于中断引脚只是几个，您可以为每个引脚编写一个全局变量和函数：

```
MyClass theInstance_pin3 = NULL;
MyClass theInstance_pin7 = NULL;

// Somewhere, fill in an initialized copy of MyClass,
// and set theInstance_pin3 or theInstance_pin7 to it

void ISR_3()
{
   if (theInstance_pin3)
       theInstance_pin3->handleInterrupt();
}
void ISR_7()
{
   if (theInstance_pin7)
       theInstance_pin7->handleInterrupt();
} 
```

作为参考，请参阅： http: [//forum.arduino.cc/index.php?](http://forum.arduino.cc/index.php?topic=41713.0) topic=41713.0 或[http://forum.arduino.cc/index.php?topic=160101.0](http://forum.arduino.cc/index.php?topic=160101.0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-30T10:59:53.147

我通过创建一个代表整个硬件的[单例基类来解决这个问题（无论如何在这种情况下这有点道理）。](http://en.wikipedia.org/wiki/Singleton_pattern%20singleton)

然后可以将任何函数指针传递给子组件类，并由单例处理，其成员变量和方法都是静态的。

示例标题（未经测试）：

```
// Sub-component
class LampButton {
public:
    LampButton(int pin, void(*pushHandler)());
}

// Sub-component
class LampLed {
public:
    LampLed(int pin);
    void toggle();
}

// Singleton represents the hardware in it's entirety
class Lamp {
public:
    // Call this instead of a constructor
    static void initialize(int buttonPin, int ledPin);

    // Function implemented inline for clarity - don't do this
    static void handleButtonPush() {
        led.toggle();
    }

private:
    static LampButton button;
    static LampLed led;
} 
```

# algorithm - 一种在 ELO 系统中进行排名匹配的方法

> ID：15669019
> 
> 赞同：0
> 
> 时间：2013-03-27T20:42:10.383
> 
> 标签：algorithm, sorting

我正在尝试为我的 iOS 游戏创建排名匹配算法，但我不知道如何开始。

游戏非常像国际象棋，因此**排名系统是用 ELO 完成的**。我能够以**字符串形式接收所有排队用户的（可能很大）列表**，但这就是我所拥有的。**当他/她加入队列时，**我一直在连接用户的 elo+timestamp （这会创建 5-6 个额外的解析步骤来对数组 + 对象进行排序）。另一种选择是存储我认为没有意义的自定义用户数据，因为在我请求拉取该用户的那条信息之前，我无法知道玩家的 elo。由于根据此列表的长度对整个列表进行排序可能无法选择，因此我正在考虑这种方法：

在 elo 系统中，如果我只是从列表中获得随机 (100) 数量的用户......我假设 elo 的范围将是 ELO 分布中位数附近的一部分。这对于 ELO 接近中位数的玩家来说可能很好，但对于更高或更低 ELO 的玩家，这个子数组必须更大，从而让我回到原来的问题。

**我的问题：是否有任何记录在案的随机配对方法？**我真的只是要求一些众所周知的方法来做到这一点，因为我无法想出一个听起来可行的方法。

这似乎是一个涉及大量图论和研究等的问题，因此我可能无法从头开始弄清楚。我尝试进行非常彻底的谷歌搜索，但似乎每个人都只想对 LOL 的配对感到愤怒:(

# java - 导航文件中的 Intellij 过滤器目标文件夹

> ID：15669020
> 
> 赞同：2
> 
> 时间：2013-03-27T20:42:15.430
> 
> 标签：java, intellij-idea

如何强制 IntelliJ 避免在目标文件夹中搜索。

例如：

如果我导航到文件 foo.properties，我将在我正在寻找的一个 .properties 旁边有一些 target/.../classes/foo.properties

# ruby-on-rails - 渲染部分时找不到“堆栈级别太深”错误的根源

> ID：15669022
> 
> 赞同：2
> 
> 时间：2013-03-27T20:42:21.290
> 
> 标签：ruby-on-rails, spree

我已经被这个问题困了一个星期。如果你能弄明白的话，我会给你寄一瓶苏格兰威士忌。严重的是，它来贿赂。

在`taxons#show`我正在渲染一个产品部分，`_products.html.erb`它列出了表格上的所有产品到分类单元控制器的显示视图。当您单击产品时，默认情况下，应用程序会将用户重定向到`products#show`，在此处`_cart_local.html.erb`呈现部分以显示“添加到购物车”选项。

但是`taxons#show`，当单击产品时，我会打开一个灯箱，因此用户不必离开页面。灯箱代码在里面`_products.html.erb`，我正在尝试`_cart_form.html.erb`在灯箱内部进行渲染。当我这样做时，我得到“堆栈级别太深”错误并且`taxons#show`不会渲染。

但是购物车在`products#how`. 我`@product`将部分更改为 just `product`。那没有帮助。我渲染了一个空的部分并加载了页面，这让我认为问题出在`_cart_local`（但为什么它会渲染`products#show`？）。

然后我取出了开始表单标记和结束 div/end 标记之间的所有代码，页面也被渲染了，这让我觉得它在那个块中，但我不能再把它缩小了。我被困住了

这是 的代码`_cart_local`，如果我取出`<!-- Here -->`和`<!-- AND HERE -->`注释之间的代码，页面将呈现：

```
<%= form_for :order, :url => populate_orders_path do |f| %>
<div id="inside-product-cart-form" data-hook="inside_product_cart_form" itemprop="offers" itemscope itemtype="http://schema.org/Offer">

<% if product.has_variants? %>  <!-- HERE --> 
  <div id="product-variants" class="columns five alpha">
    <h6 class="product-section-title"><%= t(:variants) %></h6>
    <ul>
      <% has_checked = false
      product.variants.active(current_currency).each_with_index do |v,index|
        next if v.option_values.empty? || (!v.in_stock && !Spree::Config[:show_zero_stock_products])
        checked = !has_checked && (v.in_stock || Spree::Config[:allow_backorders])
        has_checked = true if checked %>
        <li>
          <%= radio_button_tag "products[#{product.id}]", v.id, checked, :disabled => !v.in_stock && !Spree::Config[:allow_backorders], 'data-price' => v.price_in(current_currency).display_price %>
          <label for="<%= ['products', product.id, v.id].join('_') %>">
            <span class="variant-description">
              <%= variant_options v %>
            </span>
            <% if variant_price v %>
              <span class="price diff"><%= variant_price v %></span>
            <% end %>
          </label>
        </li>
      <% end%>
    </ul>
  </div>
<% end%>

<% if product.price_in(current_currency) and !product.price.nil? %>  
  <div data-hook="product_price" class="columns five <% if !product.has_variants? %> alpha <% else %> omega <% end %>">

    <div id="product-price">
      <h6 class="product-section-title"><%= t(:price) %></h6>
      <div><span class="price selling" itemprop="price"><%= product.price_in(current_currency).display_price %></span></div>
    </div>

    <div class="add-to-cart">
      <% if product.on_sale? %>      
        <%= number_field_tag (product.has_variants? ? :quantity : "variants[#{product.master.id}]"),
          1, :class => 'title', :in => 1..product.on_hand, :min => 1 %>
        <%= button_tag :class => 'large primary', :id => 'add-to-cart-button', :type => :submit do %>
          <%= t(:add_to_cart) %>
        <% end %>
      <% else %>
        <%= content_tag('strong', t(:out_of_stock)) %>
      <% end %>
    </div>
  </div>
<% else %>
    <div id="product-price">
      <br>
      <div><span class="price selling" itemprop="price"><%= t('product_not_available_in_this_currency') %></span></div>
    </div>
<% end %> <!-- AND HERE -->   

</div>
<% end %> 
```

这`_products.html.erb`是加载所有产品的文件，包含灯箱，并具有渲染车部分代码：

```
<div class="overlay-container">
</div>
<%
 paginated_products = @searcher.retrieve_products if params.key?(:keywords)
 paginated_products ||= products
%>
<% if products.empty? %>
 <%= t(:no_products_found) %>
<% elsif params.key?(:keywords) %>
 <h6 class="search-results-title"><%= t(:search_results, :keywords =>  h(params[:keywords])) %></h6>
 <% end %>
 <div class="product_grid_container">
 <div class="grid_2"><%= image_tag("store/featured/#{@featured}.jpg") %></div>
 <% if products.any? %>
  <ul id="products" class="inline product-listing" data-hook>
  <% products.each do |product| %> 
   <% if product.on_display? %>
    <%# ******LIGHTBOX******* %>
     <div id="product_popup_<%= product.id %>" class="product_popup" data-popid="<%= product.id %>">
        <div class="related-products">
          <ul class="related_products_list" id="related_products_list_<%= product.id %>" data-listid="<%= product.id %>">
         <% @related_products.each do |related_product| %>
         <li class="related_products_item"><%= link_to large_image(related_product, :itemprop => "image", :data => {:imageid => related_product.id}, :id => "related_" + related_product.id.to_s, :class => "related_products_image dimmed"), url_for(related_product) %></li>
         <% end %>
    </ul>
        </div>
        <div class="popup-image">
        <%= large_image(product, :itemprop => "image", :class => "product-image-popup") %>
        </div><!-- popup-image -->
        <div class="popup_right_content">
      <h2 class="popup-title"><%= product.name %></h2>
      <p class="popup-price">$<%= product.price %></p>
      <p><%= product.description %></p>
      <p class="popup-color">color:</p>
      <div class="popup-images" data-productid="<%= product.id %>">
            <% if (product.images + product.variant_images).uniq.size > 1 %>
            <ul id="popup-thumbnails-taxon" class="thumbnails inline" data-hook>
            <% product.images.each do |i| %>
                <li class='tmb-all' id='tmb-<%= i.id %>'>
                    <%= link_to(image_tag(i.attachment.url(:small)), i.attachment.url(:popup), :class => 'tmb-all', :id => "tmb-#{i.id}") %>
                </li>
            <% end %>
            </ul>
        <% end %>
    </div><!-- popup-images -->
    </div><!-- popup_right_content -->
        <%= render 'spree/shared/cart_local', :locals => {:product => product} %>
 </div><!-- product_popup -->   
    <%# ******END LIGHTBOX******* %>
  <div class="grid_1">
  <li id="product_<%= product.id %>" class="columns product three <%= cycle("alpha", "secondary", "", "omega secondary", :name => "classes") %>" data-hook="products_list_item" itemscope itemtype="http://schema.org/Product">
    <div class="main-image" id="single_<%= product.id %>" data-productid="<%= product.id %>">

      <%= link_to large_image(product, :itemprop => "image", :class => "product-image", :id => product.id), product_path(product), :remote => true, :html => {:class => "product_popup"}  %>
    </div><!-- main-image-->
    <div class="prod_info_box">
    <%= link_to truncate(product.name, :length => 50), product, :class => 'info', :itemprop => "name", :title => product.name %>
    <span class="price selling" itemprop="price"><%= product.price_in(current_currency).display_price %></span>

    <!-- BRINGS THUMBNAILS INTO TAXONS PAGE -- PULLED FROM _THUMBNAILS.HTML.ERB -->
    <div class="product-images" data-productid="<%= product.id %>">
    <% if (product.images + product.variant_images).uniq.size > 1 %>
        <ul id="product-thumbnails-taxon" class="thumbnails inline" data-hook>
            <% product.images.each do |i| %>
                <li class='tmb-all' id='tmb-<%= i.id %>'>
                    <%= link_to(image_tag(i.attachment.url(:mini)), i.attachment.url(:normal), :class => 'tmb-all', :id => "tmb-#{i.id}") %>
                </li>
            <% end %>
        </ul>
    <% end %>
    </div><!-- product-images -->
    <!-- END THUMBNAILS INTO TAXONS PAGE -->
    <div id="product-description-taxon">
        <p><%= product.description %></p>
    </div><!-- product-description-taxon -->
    </div><!-- prod_info_box -->
  </li>
  </div>
<% end %>
<% end %>

 <% reset_cycle("classes") %>
 </ul>
 <% end %>
 </div><!-- product_grid_container -->
 <% if paginated_products.respond_to?(:num_pages) %>
 <%= paginate paginated_products %>
 <% end %> 
```

需要帮助请叫我。我很感激。

这是帮助者的链接，也许问题在那里？ [https://github.com/spree/spree/tree/v1.3.2/core/app/helpers/spree](https://github.com/spree/spree/tree/v1.3.2/core/app/helpers/spree)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T14:42:08.953

在您的`_products.html.erb`部分更改中：

```
<%= render 'spree/shared/cart_local', :locals => {:product => product} %> 
```

对此：

```
<%= render partial: 'spree/shared/cart_local', :locals => {:product => product} %> 
```

并且问题应该得到解决。

为什么？因为按照您的方式执行它不会传递`locals`到部分，这就是您收到错误的原因，请通过删除`locals`. 当然，最有趣的部分是为什么你会`stack level too deep`在这里出错，但我现在无法找到答案。

哦，调试器是你的朋友；）

# javascript - 臭名昭著的循环机会

> ID：15669026
> 
> 赞同：2
> 
> 时间：2013-03-27T20:42:33.387
> 
> 标签：javascript

[本页](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)讨论臭名昭著的循环问题：

```
function addLinks () {
    for (var i=0, link; i<5; i++) {
        link = document.createElement("a");
        link.innerHTML = "Link " + i;
        link.onclick = function () {
            alert(i);
        };
        document.body.appendChild(link);
    }
}
window.onload = addLinks; 
```

一个解决方案：

```
function addLinks () {
    for (var i=0, link; i<5; i++) {
        link = document.createElement("a");
        link.innerHTML = "Link " + i;
        link.onclick = function (num) {
            return function () {
                alert(num);
            };
        }(i);
        document.body.appendChild(link);
    }
}
window.onload = addLinks; 
```

这是我的问题：如果您正在调用的函数在父函数之外（例如，在 addLinks 之外），臭名昭著的循环问题仍然是一个问题吗？

```
function addLinks () {
    for (var i=0, link; i<5; i++) {
        link = document.createElement("a");
        link.innerHTML = "Link " + i;
        link.onclick = Outside(i);
        document.body.appendChild(link);
    }
}
function Outside(i) {
    alert(i);
};
window.onload = addLinks; 
```

我认为这会是因为当 onclick 被作为函数调用时 addLinks 尚未创建，所以问题已被创建。因此，将函数放在 addLInks 之外应该可以缓解臭名昭著的循环问题，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:44:40.630

您的代码中的问题是它不起作用。

```
link.onclick = Outside(i); 
```

不绑定函数，因为`Outside(i)`返回未定义。

一个类似的工作解决方案是定义`Outside`为

```
function Outside(i) {
    return function() {
       alert(i);
    }
}; 
```

它的工作原理与您的第二个代码工作的原因相同：调用该函数`Outside`会为变量创建一个新范围`i`（称为闭包）。

您将从循环构建的任何解决方案可能不仅仅涉及函数调用：它需要使用`var`关键字或作为该函数的参数来声明变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T20:46:22.637

```
link.onclick = Outside(i); 
```

这实际上将调用`Outside(i)`而不是将侦听器设置为等于具有该默认值的该函数。诸如 Ext 之类的各种工具包提供了一种创建代表的方法，类似于 dystroy 所展示的。例如，在 Ext 3.X 中，您可以这样做：

link.onclick = Outside.createDelegate(link, [i]) 创建一个委托，该委托具有`link`上下文`this`和`i`默认参数`Outside`。

要使您的示例正常工作，您需要执行以下操作：

```
function Outside(i) {
    return function() { alert(i); }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T20:46:51.413

我相信你写的代码不会运行。

外面不返回任何东西。所以调用 Outside(i) 将返回 undefined。这意味着您正在设置 link.onclick=undefined。

# html - 提交成功后重置表单的输入字段

> ID：15669028
> 
> 赞同：0
> 
> 时间：2013-03-27T20:42:41.960
> 
> 标签：html, jsf-2, primefaces, ejb

我有一个创建新的`Employee`. 我的支持 bean 是`@SessionScoped`. 当我创建第一个员工时，一切都很顺利。但是，当我要创建第二个员工时，表单仍会在输入字段中显示第一个员工的属性。

如何在不更改 bean 范围的情况下重置它们？范围对于其他目的是强制性的。我使用托管 Bean（控制器），其中我有“创建员工”

```
public String createEmploye()

{

    employe = new Employe();

    employe.setId(this.id);
    employe.setNom(this.nom);
    employe.setPrenom(this.prenom);
    employe.setNum_telephone(this.num_telephone);
    employe.setAdresse(this.adresse);
    employe.setNum_poste(this.num_poste);

    employeBean.addEmploye(employe);

    employe.setNom("");

    return "ListEmployes.xhtml?faces-redirect=true";
    // return ("ListEmployes.xhtml");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:47:22.390

`Employee`将实例保存在数据库中后重新创建实例。

```
public void save() {
    service.save(employee);
    employee = new Employee(); // <--- Just add this line.
} 
```

* * *

**与具体问题无关**，但我强烈建议重新考虑您的 bean 设计。它不应该被分成两个豆子吗？一个请求/视图的范围为表单本身，另一个会话的范围为真正的会话范围的数据，这些数据被注入到请求/视图范围的数据中。这样，您可以在保存后执行重定向到同一个视图，以便从一个干净的表单开始（并具有额外的好处，即当您在提交后刷新页面时，同一员工不会在数据库中重复） .

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

* * *

**根据更新**进行更新，您似乎正在复制/展平`Employee`支持 bean 中的所有属性，而不是让表单直接引用它们。我强烈建议不要将模型属性复制/展平到控制器中。

```
@ManagedBean
@SessionScoped
public class Manager {

    private Employee employee = new Employee();

    @EJB
    private EmployeeService service;

    public void createEmployee() {
        service.create(employee);
        employee = new Employee();
    }

    public Employee getEmployee() {
        return employee;
    }

} 
```

和

```
<h:inputText value="#{manager.employee.firstname}" />
<h:inputText value="#{manager.employee.lastname}" />
<h:inputText value="#{manager.employee.telephone}" />
<h:inputText value="#{manager.employee.street}" />
... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-06T16:03:15.273

我可以通过创建一个使我使对象无效并在页面 jsf 上的表单中调用它的方法来解决这个问题。

```
public void clear_objet() {
  this.producto = null;
} 
```

```
<h:form id="form">
  #{bean.limpiar_objeto()} 
</h:form> 
```

# php - PDO 清除绑定参数

> ID：15669031
> 
> 赞同：1
> 
> 时间：2013-03-27T20:42:45.403
> 
> 标签：php, mysql, pdo

我创建了一个“快捷方式”方法的子对象，例如 return_all 和其他方法，以将 PDO 作为数据库对象运行。

简而言之，我的所有查询（无论是插入、更新、删除还是选择）都通过 2 种不同的方法，我调用的最后一种方法如下所示：

/* * execute_prepared_sql() 将根据用户参数准备 SQL： * */

```
private function execute_prepared_sql() {
    if ($this->prepare_sql() == true) {
        try {
            $this->stmt = $this->pdo->prepare($this->sanitized_sql);
            $this->stmt->execute($this->bound_parameters);
        } catch (PDOException $e) {
            set_debug($e->getMessage(), true);
            return false;
        }
        return true;
    }
    return false;
} 
```

然后我有看起来像这样的方法：

```
 public function return_active_partners() {
    if ($this->select(array("query_tables" => $this->table_name, "conditions" => array("AND" => array("partners.status" => 1))))) {
        $this->stmt->setFetchMode(PDO::FETCH_ASSOC);
        return $this->stmt->fetchAll();
    }
} 
```

然后，上述方法将有效地返回结果（$this->select() 调用 execute_prepared_sql() 方法。

这一切都很好，但我有一个非常烦人的问题，有时（而且真的是随机的）我得到一个“SQLSTATE [HY093]：无效的参数号：没有参数被绑定”错误。当我在彼此之后执行 2 次查询时，它似乎会发生更多（比如我删除一行，然后返回剩余行的结果集）

似乎发生的是在 execute_prepared_sql() 调用期间绑定参数没有被删除。我的印象是，当调用 execute() 时，所有绑定参数都将被“重置”或清除，但情况似乎并非如此。

我的问题是，如何清除 PDO 语句可能存储的任何绑定参数，以确保我不会两次使用相同的参数？还是您可以看到我做错了什么，这可能是问题所在？

# networking - 这个 bittorrent 网络流量是什么？

> ID：15669041
> 
> 赞同：1
> 
> 时间：2013-03-27T20:43:18.653
> 
> 标签：networking, wireshark, bittorrent, utorrent

我在家中记录了一些仅在运行 BitTorrent 或 uTorrent 时出现的网络流量。
我一直在阅读[bittorrent 协议描述](http://www.bittorrent.org/beps/bep_0000.html)，但我一直在试图找出特定的网络流。

有人可以帮我确定以下 bittorrent 网络流量到底是什么吗？
即使停止下载，它也会持续很长时间。所有数据包都在一个方向 - 从我运行 Bittorrent 的本地机器到远程机器。

这是一个数据包的数据有效负载（从 Wireshark 复制）：

```
00000000  60 00 00 00 00 00 3b 15  20 01 00 00 9d 38 6a b8 `.....;.  ....8j.
00000010  04 b9 18 bf 9c 90 d8 81  20 01 00 00 9d 38 6a b8 ........  ....8j.
00000020  20 5a 01 45 bd 13 b1 65  01 04 44 4a e7 d5 04 04  Z.E...e ..DJ....
00000030  01 00 00 00 05 02 ea cf                          ........ 
```

网络流中的所有数据包都是相似的，这里还有两个：

```
00000038  60 00 00 00 00 00 3b 15  20 01 00 00 9d 38 6a b8 `.....;.  ....8j.
00000048  04 b9 18 bf 9c 90 d8 81  20 01 00 00 9d 38 6a b8 ........  ....8j.
00000058  20 5a 01 45 bd 13 b1 65  01 04 08 8e 35 9f 04 04  Z.E...e ....5...
00000068  01 00 00 00 05 02 ea cf                          ........ 
00000070  60 00 00 00 00 00 3b 15  20 01 00 00 9d 38 6a b8 `.....;.  ....8j.
00000080  04 b9 18 bf 9c 90 d8 81  20 01 00 00 9d 38 6a b8 ........  ....8j.
00000090  20 5a 01 45 bd 13 b1 65  01 04 12 3e ba 6c 04 04  Z.E...e ...>.l..
000000A0  01 00 00 00 05 02 ea cf                          ........ 
```

这些 bittorrent 数据包通常相隔几秒钟，而且这个流似乎无限期地继续下去。哪一个[bittorrent 协议](http://www.bittorrent.org/beps/bep_0000.html)描述了这个网络流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:23:44.330

我刚刚在我们的[邮件列表](https://groups.google.com/a/bittorrent.com/forum/#!topic/bt-developers/qQxyBKPUpeY)上给你发了一个回复，但我也会在这里发帖，以防其他人偶然发现它并发现它有用。

> 它们是 Teredo 数据包（没有有效负载）。Wireshark 可以解码这些，但它不会在没有强制的情况下这样做。
> 
> [http://en.wikipedia.org/wiki/IPv6_packet](http://en.wikipedia.org/wiki/IPv6_packet) [http://en.wikipedia.org/wiki/Teredo_tunneling](http://en.wikipedia.org/wiki/Teredo_tunneling)
> 
> 剖析了您的一个数据包：

```
IP Version: 6 
Traffic Class: 0 0 
Flow Label: 0 00 00 
Payload Length: 00 00 
Next Header: 3b (indicates that there is no payload present) 
Hop Limit: 15 
Source: 20 01 00 00 9d 38 6a b8 04 b9 18 bf 9c 90 d8 81
Destination: 20 01 00 00 9d 38 6a b8 20 5a 01 45 bd 13 b1 65 
```

> 源和目标还对源和目标公共 ipv4 地址和端口进行编码。
> 
> 在这种情况下，后面是逐跳选项标头（以类型长度值格式）。可以在这里找到可能的类型：
> 
> [http://www.iana.org/assignments/ipv6-parameters/ipv6-parameters.xml](http://www.iana.org/assignments/ipv6-parameters/ipv6-parameters.xml)
> 
> 所以我们有这个：

```
01 04: c3 ae 60 38 ("PadN", random bytes)
04 04: 01 00 00 00 ("Tunnel Encapsulation Limit")
05 02: ea cf ("Router Alert") 
```

> 不知道路由器警报字段的值是什么。我希望它会在这里列出：
> 
> [http://www.iana.org/assignments/ipv6-routeralert-values/ipv6-routeralert-values.xml](http://www.iana.org/assignments/ipv6-routeralert-values/ipv6-routeralert-values.xml)
> 
> 但它看起来要么已经过时，要么您使用的 Teredo 实现正在做一些非标准的事情（或者我错过了一些事情）。
> 
> 无论如何，这些显然是保活数据包。据我所知，我们并没有直接在客户端触发它们。我相信它们是您的 Teredo 司机派来的，目的是让您的隧道保持畅通。

# matlab - Matlab，关于循环的基础知识

> ID：15669044
> 
> 赞同：-1
> 
> 时间：2013-03-27T20:43:21.313
> 
> 标签：matlab, loops

我需要向用户询问温度，k 或 K 代表开尔文，c 或 C 代表摄氏度，f 或 F 代表华氏度。我怎样才能把所有这些都放在一个循环中？我需要不断询问用户，直到他们输入上述字母之一。这就是我到目前为止所拥有的。

```
 tempType = input('What type of temperature would you like to use: ', 's');

  value = ['k','K','c','C','f','F'];

  while strcmp(tempType, value) == 1  

     tempType = input('What type of temperature would you like to use: ', 's');

  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:36:02.470

我宁愿这样做以避免两条完全相同的行（在 R2011b 中测试）：

```
AllowedTemperature = {'k','K','c','C','f','F'};
SelectedTemperature = '';
while ~any(strcmp(SelectedTemperature,AllowedTemperature))
    SelectedTemperature = input('What type of temperature would you like to use: ', 's');
end
disp( [ 'SelectedTemperature: ' SelectedTemperature ] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:12:31.087

你想`(length(tempType)~=1 || length(findstr(tempType,value))==0)`成为你的条件

# php - PHP按字母顺序排序数组

> ID：15669047
> 
> 赞同：6
> 
> 时间：2013-03-27T20:43:29.470
> 
> 标签：php, multidimensional-array, sorting, asort

我正在为此苦苦挣扎。我有一个包含国家和地区的数组。我想在键上按升序对两组信息进行排序。

这是我正在使用的数组：

```
Array
(
    [Country] => Array
        (
            [United Kingdom] => Array
                (
                    [London] => Array
                        (
                            [0] => 1
                            [1] => 5
                            [2] => 23
                            [3] => 71
                        )

                    [Manchester] => Array
                        (
                            [0] => 800
                        )

                )

            [United States] => Array
                (
                    [New York] => Array
                        (
                            [0] => 147
                            [1] => 111
                        )

                    [Washington] => Array
                        (
                            [0] => 213
                        )

                    [Florida] => Array
                        (
                            [0] => 6
                        )

                    [Texas] => Array
                        (
                            [0] => 9
                        )

                )

            [Brazil] => Array
                (
                    [Brasília] => Array
                        (
                            [0] => 64
                        )

                )

        )

) 
```

所以重新排序的数组将是：

巴西
- 巴西利亚

英国
- 伦敦
- 曼彻斯特

美国
- 佛罗里达
- 纽约
- 德克萨斯
- 华盛顿

数据结构应该保持不变，但数字的顺序（例如伦敦：1、5、23、71）可以保持不变。

我尝试了几种排序方法： http: [//php.net/manual/en/array.sorting.php](http://php.net/manual/en/array.sorting.php)

但他们似乎什么也没做。也许是因为它是一个多维数组，或者它在逻辑上不是 100% 结构化的......但我坚持使用数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:49:12.167

你可以试试：

```
ksort_recursive($data);
print_r($data); 
```

使用的功能

```
function ksort_recursive(&$array) {
    ksort($array);
    foreach ( $array as &$a ) {
        is_array($a) && ksort_recursive($a);
    }
} 
```

请参阅测试多个 PHP 版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T20:48:14.650

第 1 步：
按关键字对国家/地区进行排序。

```
ksort($arr['Country']); 
```

第 2 步：遍历国家/地区并对这些键进行排序。

```
foreach ($arr['Country'] as $country=>$data) {
    ksort($arr['Country'][$country]);
} 
```

# rvm - 最新的 rvm 不会显示要求

> ID：15669048
> 
> 赞同：4
> 
> 时间：2013-03-27T20:43:29.780
> 
> 标签：rvm

所以我不确定我是否遗漏了什么，但是否有 autolibs 的特定设置

```
rvm requirements 
```

显示需求而不是检查它们是否已安装？还是我错过了一些其他选项来简单地显示需求？我正在使用版本 1.19.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:01:57.390

来自[https://rvm.io/rvm/autolibs](https://rvm.io/rvm/autolibs) - 有两种模式对您有用：

1.  `rvm autolibs read-only`- 它将完成所有步骤，只显示所需的命令/缺少的库
2.  `rvm autolibs enable`- 它会为你安装所有东西，它可能需要 sudo 密码，所以像 capistranos 这样的工具的一个不错的技巧是：

    ```
    rvm autolibs read-only
    sudo rvm --autolibs=enabled requirements ruby-2.0.0
    rvm install ruby-2.0.0 
    ```

关于 autolibs 的文章[https://blog.engineyard.com/2013/rvm-ruby-2-0](https://blog.engineyard.com/2013/rvm-ruby-2-0)

# objective-c - 有没有办法将 b2Body 转换为 Objective-C 对象

> ID：15669049
> 
> 赞同：3
> 
> 时间：2013-03-27T20:43:40.957
> 
> 标签：objective-c, box2d

我需要遍历某些机构。为此，我想将这些主体添加到 NSMurableArray。但是由于 NSMutableArray 只接受objective-c 对象，我需要一种将b2Body 转换为id 的方法。尝试`[bodiesArray addObject:(id)body];`无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T21:39:22.140

您可以使用 [NSValue](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html)的 `valueWithPointer`

```
NSValue *bodyValue = [NSValue valueWithPointer:body];
[bodiesArray addObject:bodyValue]; 
```

并取回您的 b2Body 对象

```
b2Body *body = (b2Body*) [[bodiesArray objectAtIndex:0] pointerValue]; 
```

# rest - 如何从 CLI CURL 的请求输出中抑制标头

> ID：15669050
> 
> 赞同：30
> 
> 时间：2013-03-27T20:43:44.210
> 
> 标签：rest, curl, command-line-interface

有很多关于如何防止 curl 在请求 PHP 版本时显示标头信息的信息，但对于 CLI 版本似乎没有。

我的要求是

```
curl -i -X POST -H 'Content-Type: application/json; charset=UTF-8' -H 'X-Accept: application/json' -H '-d '{"somedata":"12ihiuhihihed994f63dbef6b012b"}' https://myurl.com/v3/oauth/request 
```

哪个有效，但返回：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: application/json
Date: Wed, 27 Mar 2013 20:42:11 GMT
P3P: policyref="/w3c/p3p.xml", CP="ALL CURa ADMa DEVa OUR IND UNI COM NAV INT STA PRE"
Server: Apache/2.2.23 (Amazon)
Status: 200 OK
X-Powered-By: PHP/5.3.20
Content-Length: 54
Connection: keep-alive

{"code":"jkhjhhjhaa","state":null} 
```

当我真正想要的是：

```
{"code":"jkhjhhjhaa","state":null} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-27T20:47:50.987

只需从您的命令中删除`-i`开关。`curl`

```
man curl 
```

说过 ：

> -i, --include
> (HTTP) 在输出中包含 HTTP 标头。HTTP 标头包括服务器名称、文档日期、HTTP 版本等内容...

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-06-26T01:33:47.707

为了抑制 CURL CLI 的输出，可以使用 --silent 选项。当 curl 输出也通过管道传输时，它也能完美运行。

```
-s, --silent        Silent mode (don't output anything) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-14T19:11:46.613

如果这不明显，也不要将 -v（详细）开关与 -s（静音）一起使用

# python - 当两个蓝牙设备在树莓派中配对时运行 python 脚本

> ID：15669051
> 
> 赞同：0
> 
> 时间：2013-03-27T20:43:44.707
> 
> 标签：python, python-3.x, raspberry-pi

我有一个项目，我必须通过连接到我的 pi 的蓝牙模块将从加速度计获取的数据发送到智能手机。将设计一个 python 脚本来获取数据并将其发送到树莓派的 UART。当我的智能手机的蓝牙和连接到 pi 的蓝牙模块配对时，我想运行我的脚本。那可能吗？

# android - 在 Android 开发人员中使用 DatePicker：如何将选择的日期与今天的日期进行比较？

> ID：15669053
> 
> 赞同：0
> 
> 时间：2013-03-27T20:43:50.767
> 
> 标签：android, parsing, rss, onclick, datepicker

我真的被某个问题困住了，我希望有人可以帮助我理解问题并找到解决方案。我在网上看了很多，但看不到答案，除非它一直盯着我看：-/

基本上，我正在创建一个非常基本的电视指南应用程序。它解析来自具有天数偏移量的 RSS 提要的数据（昨天是 -1。今天是 0，明天是 1，等等），我正在尝试实现一个 DatePicker，它允许用户查看特定频道上的内容他们选择昨天、今天、明天等。但如果他们选择了超出范围的日期（目前是提前一周），则会显示一条简单的 Toast 消息。

我想我的问题是，首先，我如何使用 IF ELSE 来解析用户想要的那一天的特定频道数据或显示错误 Toast 消息，以及，我如何去转换用户想要的日期与今天的实际日期相比是否已放入整数？如果他们选择昨天的日期，它将转到 URL“ [http://example.com/-1/channel](http://example.com/-1/channel) ”，如果他们选择明天的日期，它将转到 URL“ [http://example.com/1/channel](http://example.com/1/channel) ”等等等

如果有人需要查看代码，则可以使用代码，但我认为如果有人愿意解释逻辑，我想看看我是否可以自己来回答......

非常感谢各位！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:18:07.647

您应该使用 a`DatePicker`来允许用户选择何时。

Android 中的时间存储在`long`（不是`int`）上。时间可以很容易地在（总是毫秒）和一个对象`long`之间来回转换。`long``Date`

该`Date`对象为您提供了各种工具来比较前后，查看月份、分钟、小时等。

当前时间由以下因素确定：

```
long nowMs = System.currentTimeMillis();
int nowSec = (int)(nowMs / 1000); 
```

还有一个非常重要的`Calendar`对象。这允许您解析由 http 函数传入和传出的各种日期的文本日期格式。

例如：

```
Calendar cal = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-mm-dd hh:mm:ss Z");
String text = sdf.format(cal.getTime(); 
```

您必须将所有这些工具与一个`DatePicker`示例（例如此处[的创建日期选择](http://developer.android.com/guide/topics/ui/controls/pickers.html)器）放在一起，以完成您的电视指南应用程序。

**参考**：

*   [日期](http://developer.android.com/reference/java/util/Date.html)
*   [日历](http://developer.android.com/reference/java/util/Calendar.html)
*   [日期选择器](http://developer.android.com/reference/android/widget/DatePicker.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:09:05.320

编辑：检查大卫的答案更好。

首先用今天的日期过滤选择的日期。您可以通过 date.isbefore(date) 或 date.isafter(date) 进行比较，这些布尔值会让您知道日期是过去还是未来还是现在。然后进一步计算中间的天数，您可以使用 switch 语句创建一个方法，该方法基本上将所选日期和当前日期转换为毫秒（Date.getTimeinmiliseconds）

如果日期是过去的，则以毫秒为单位的当前时间和以毫秒为单位的过去日期之差。如果日期是未来，则相反。取差异并将其转换为具有适当符号（负/正）的天数差异。

请参考[此](https://stackoverflow.com/questions/3838527/android-java-date-difference-in-days)链接以获得更好的编码示例

# java - 如何在字符串变量中添加 Char 变量

> ID：15669062
> 
> 赞同：0
> 
> 时间：2013-03-27T20:44:40.240
> 
> 标签：java, string, char

我想制作一个从键盘读取一个字符的代码，我想将该字符添加到字符串变量中

例子

```
char c = sc.next().charAt(0);
String l = ""; 
```

[我的键盘字符现在在“c”和“l”中是空的]

我怎样才能让“l”增加它的价值来自“c”的字符

我想让“l”存储所有引入的字符，所以它需要将“l”与“c”连接起来......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:45:43.510

您可以使用

```
String l = "";
char c = sc.next().charAt(0);
l = l + String.valueOf(c); 
```

或者，

```
StringBuilder sbuilder = new StringBuilder();
char c = sc.next().charAt(0);
sBuilder.append(String.valueOf(c));
String l = sBuilder.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:45:51.030

您需要一个[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)可以附加`char`字符的对象，然后将其转换为`String`with `toString()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T20:46:55.727

使用**[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)**. 它有一种**[`append(char c)`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#append%28char%29)**方法可以完全按照您的意愿行事。

此外，在处理结束时，您可以使用它的**[`toString`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#toString%28%29)**方法来获取等效`String`对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T20:49:11.320

```
 Scanner sc = new Scanner(System.in);
 char c = sc.next().charAt(0);
 String l = "";
 l=l+c;
 System.out.println(l); 
```

# javascript - JS如果有滑块显示它

> ID：15669065
> 
> 赞同：0
> 
> 时间：2013-03-27T20:44:45.783
> 
> 标签：javascript

我不是 JS 专家，但我正在尝试更改它，以便如果有一个royalslider 显示它……如果没有显示静态图像以及标题和描述。关于为什么这不起作用的任何想法？我的头正在旋转……我在我试图添加到代码中的部分周围留了一些空间 //royal 滑块修复，目前它只显示 if 语句中的标题和描述。但是，标记显示滑块 div 并输出代码。

任何帮助将不胜感激！您可以预览此代码以及我在这里尝试执行的操作... [http://bvh.delineamultimedia.com/?page_id=2](http://bvh.delineamultimedia.com/?page_id=2)

```
;(function($) {

$.fn.SuperBox = function(options) {

    var superbox      = $('<div class="superbox-show"></div>');
    var superboximg   = $('<img src="" class="superbox-current-img">');
    var superboxclose = $('<div class="superbox-close"></div>');

    superbox.append(superboximg).append(superboxclose);

    return this.each(function() {

        $('.superbox').on('click', '.superbox-list', function() {

            //allows for superbox to work inside of quicksand
            $('ul.filterable-grid').css({overflow: 'visible'});

            var currentimg = $(this).find('.superbox-img');
            superbox.find('.title').remove(); 
            superbox.find('.description').remove(); 

            var imgData = currentimg.data();
            superboximg.attr('src', imgData.img);
            if (imgData.title) { superbox.append('<h3 class="title">'+imgData.title+'</h3>'); }
            if (imgData.description) { superbox.append('<div class="description">' + imgData.description + '</div>'); }

//royal slider fix              
superbox.find('.royalSlider').remove(); // remove the slider from previous events
var imgData = currentimg.data();
var sliderData = currentimg.next('.royalSlider'); // grab the slider html that we want to insert

superboximg.attr('src', imgData.img); 

if (sliderData) { // show the slider if there is one
    superbox.clone().append(sliderData); // clone the element so we don't loose it for the next time the user clicks
} else { // if there is no slider proceed as before
    if (imgData.img) {
        superbox.append(imgData.img);
    }
    if (imgData.title) {
        superbox.append('<h3 class="title">' + imgData.title + '</h3>');
    }
    if (imgData.description) {
        superbox.append('<div class="description">' + imgData.description + '</div>');
    }
}

            if($('.superbox-current-img').css('opacity') == 0) {
                $('.superbox-current-img').animate({opacity: 1});
            }

            if ($(this).next().hasClass('superbox-show')) {
                superbox.toggle();
            } else {
                superbox.insertAfter(this).css('display', 'block');
            }

            $('html, body').animate({
                scrollTop:superbox.position().top - currentimg.width()
            }, 'medium');

        });

        $('.superbox').on('hover', '.superbox-list', function(e) {
            $(this).find('.overlay').stop()[(e.type == 'mouseenter') ? 'fadeIn' : 'fadeOut']('slow');
        });

        $('.superbox').on('click', '.superbox-close', function() {
            $('.superbox-current-img').animate({opacity: 100}, 200, function() {
                $('.superbox-show').slideUp();
            });
        });

    });
};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:57:11.213

这只是作为提示，而不是试图解决整个问题。

尝试这个：

```
var superbox      = $('<div class="superbox-show"/>');
var superboximg   = $('<img src="" class="superbox-current-img"/>');
var superboxclose = $('<div class="superbox-close"/>'); 
```

* * *

```
if (sliderData.length > 0) 
```

imgData.img 的价值在哪里？

# java - 在java中将整数转换为字符串的最快方法

> ID：15669067
> 
> 赞同：6
> 
> 时间：2013-03-27T20:44:55.210
> 
> 标签：java, performance, optimization, benchmarking

每次我必须将 a 转换`int`为 a时`String`，我都会选择`""+a`或`Integer.toString(a)`。现在我想知道哪种方式更快，所以我编写了一个简单的基准测试，调用 function_1、function_2 和 function_3 10000000 次，并打印处理这些函数需要多长时间。以下是功能：

```
public static String i="";
public static String j="";
public static String k="";

public static void function_1()
{
    i=Integer.toString(getOne());
}

public static void function_2()
{
    j=""+1;
}

public static void function_3()
{
    j=""+getOne();
}

public static int getOne()
{
    return 1;
} 
```

输出是：

```
Benchmarking starting...
Executing function_1 10000000 time(s)...
Done executing function_1 in 476 ms.
Executing function_2 10000000 time(s)...
Done executing function_2 in 8 ms.
Executing function_3 10000000 time(s)...
Done executing function_3 in 634 ms.
Benchmarking complete! 
```

我认为function_2是如此之快，因为它被编译为

```
public static void function_2()
{
    j="1";
} 
```

所以为了避免这种情况，我使用了这个函数`getOne()`。但这里是有趣的部分（对我来说）：`function_3`必须在不使用原始`toString`方法的情况下编译`Object`（在这种情况下`Integer.toString(1)`因为`int`是原始的）。我的问题是：编译器实际上是如何威胁的`""+1`，所以它比调用慢`Integer.toString(1)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T21:05:31.213

`""`并且`1`在编译时已知。这就是为什么 in`function_2` `"" + 1`真正被`"1"`while 转换为字节码所取代的原因。

`getOne()`结果在编译时是未知的，因此连接将在运行时完成。但是因为连接（+）效率不高，编译器很可能会将其更改为`StringBuilder.append()`基于实现。

不相信我？试试：`javap -c ClassName.class`你会看到这样的：

```
public static void function_2();
Code:
   0: ldc           #39                 // String 1
   2: putstatic     #16                 // Field j:Ljava/lang/String;
   5: return        

public static void function_3();
Code:
   0: new           #42                 // class java/lang/StringBuilder
   3: dup           
   4: invokespecial #44                 // Method java/lang/StringBuilder."<init>":()V
   7: invokestatic  #28                 // Method getOne:()I
  10: invokevirtual #45                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
  13: invokevirtual #49                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
  16: putstatic     #16                 // Field j:Ljava/lang/String;
  19: return 
```

`function_2()`只有一个字符串“1”，而 function_3 有所有这些方法调用，里面有额外的 StringBuilder :)

请记住，运行时可能会发生一些优化，但这种行为是 JVM 并且它依赖于配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T20:47:58.697

我在 10,000,000 次迭代中测试了以下函数：

```
public static void no_func_maybe_constant()
{
    j= "" + 1;
}

public static void no_func_no_constant()
{
    j = "";
    j = j + 1;
}

public static void yes_func_maybe_constant()
{
    j = "" + getOne();
}

public static void yes_func_no_constant()
{
    j = "";
    j = j + getOne();
} 
```

我的结果：

```
no_func_maybe_constant Took 0.028058674s
no_func_no_constant Took 1.449465242s
yes_func_maybe_constant Took 1.275561897s
yes_func_no_constant Took 1.263362257s 
```

不调用函数和调用函数之间的区别确实可以忽略不计，所以在它的情况下似乎`"" + 1`确实在进行一些编译时常量计算。有趣的是，如果没有功能，有时会花费更少的时间......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T20:50:37.440

2 和 3 之间的差异可能是由于必须调用方法来获取整数。当您调用一个方法时，它会创建一个新的激活记录，这会使调用堆栈变得复杂，因此除非 JVM 的 JIT 能够将静态函数调用内联到单个返回值（几乎可以肯定这里不会发生），否则这里会发生更多事情。

# javascript - 检查 iOS 原生智能横幅支持

> ID：15669068
> 
> 赞同：1
> 
> 时间：2013-03-27T20:45:07.527
> 
> 标签：javascript, iphone, ios

iOS6 在浏览器中支持原生智能横幅。如果不支持智能横幅，我试图回退，然后显示我自己的横幅。如果浏览器支持原生 iOS 智能横幅，有谁知道如何签入 js。

智能横幅的详细信息：[在此处输入链接描述](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

# ios - iOS - cellForRowAtIndexPath 代码说明

> ID：15669070
> 
> 赞同：1
> 
> 时间：2013-03-27T20:45:12.370
> 
> 标签：ios, core-data, uitableview

这是整个代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
    static NSString *CellIdentifier = @"DetailCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2
                                  reuseIdentifier:CellIdentifier];

    NSUInteger sectionIndex = [indexPath section];
    NSUInteger rowIndex = [indexPath row];

    NSDictionary *section = [self.sections objectAtIndex:sectionIndex];
    NSArray *rows = [section objectForKey:@"rows"];
    NSDictionary *row = [rows objectAtIndex:rowIndex];
    cell.textLabel.text = [row objectForKey:@"label"];
    cell.detailTextLabel.text = [[self.myManagedObject valueForKey:[row objectForKey:@"key"]] description];
    return cell;
} 
```

我的问题是：

```
cell.textLabel.text = [row objectForKey:@"label"]; 
cell.detailTextLabel.text = [[self.myManagedObject valueForKey:[row objectForKey:@"key"]] description];  //This is NSDate 
```

1.  为什么这段代码使用两种不同的格式：objectForKey 和 valueForKey？
2.  为什么不需要使用 objectForKey 调用 self.myManagedObject？
3.  描述的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:56:49.873

> 为什么这段代码使用两种不同的格式：objectForKey 和 valueForKey？
> 
> 为什么不需要使用 objectForKey 调用 self.myManagedObject？

`self.myManagedObject`是一个`NSManagedObject`。没有`objectForKey:`办法`NSManagedObject`。

`row`是一种`NSDictionary`类型。`objectForKey:`是一种字典方法。

> 描述的目的是什么？

`[self.myManagedObject valueForKey:[row objectForKey:@"key"]]`应该返回一个包含`NSString`类型属性的对象`description`。

它们就像一条线。您可以将其拆分为多行，如下所示

```
YourCustomClass *customclassObj = [self.myManagedObject valueForKey:[row objectForKey:@"key"]];

cell.detailTextLabel.text = customclassObj.description; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T05:58:31.420

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        //create new cell
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    [tableView setRowHeight: 50.00];

    UILabel *name=[[UILabel alloc]initWithFrame:CGRectMake(10, 5, 70, 30)];
    name.text=@"Ajay";
    [cell.contentView addSubview:name];
    [name release];

   // cell.selectionStyle = UITableViewCellSelectionStyleNone;
    //cell.contentView.backgroundColor=[UIColor whiteColor];
    UIButton *btn1=[[UIButton alloc]initWithFrame:CGRectMake(80, 5, 70, 30)];
    //UIButton *btn1=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    //btn1.frame=CGRectMake(80, 5, 40, 30);
    [btn1 setTitle:@"Name" forState:UIControlStateNormal];
    [btn1 setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    //[btn1 addTarget:self action:@selector(Nam:) forControlEvents:UIControlEventTouchUpInside];
    btn1.backgroundColor=[UIColor greenColor];
    [[btn1 layer]setCornerRadius:8.0f];
    [[btn1 layer]setBorderWidth:1.0f];
    [cell.contentView addSubview:btn1];
    [btn1 release];

    UILabel *add=[[UILabel alloc]initWithFrame:CGRectMake(10, 56, 70, 50)];
    add.text=@"Biliya";
    [cell.contentView addSubview:add];
    [add release];

    // cell.selectionStyle = UITableViewCellSelectionStyleNone;
    //cell.contentView.backgroundColor=[UIColor whiteColor];
    UIButton *btn2=[[UIButton alloc]initWithFrame:CGRectMake(80, 56, 70, 30)];
    //UIButton *btn1=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    //btn1.frame=CGRectMake(80, 5, 40, 30);
    [btn2 setTitle:@"Address" forState:UIControlStateNormal];
    [btn2 setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    //[btn1 addTarget:self action:@selector(Nam:) forControlEvents:UIControlEventTouchUpInside];
    btn2.backgroundColor=[UIColor greenColor];
    [[btn2 layer]setCornerRadius:8.0f];
    [[btn2 layer]setBorderWidth:1.0f];
    [cell.contentView addSubview:btn2];
    [btn2 release];

    return cell;

} 
```

# php - 带有条件 isset 和比较的 if 语句不能一起工作

> ID：15669075
> 
> 赞同：0
> 
> 时间：2013-03-27T20:45:31.460
> 
> 标签：php, if-statement

我在`if`发表声明时遇到问题：

```
<?php if (isset($detail) == 1) { ?>
    // code if detail variable exists and is equal to 1
<?php } else { ?>
    // code if detail variable doesn't exist or is not equal 1
<?php }?> 
```

由于某种原因，这种情况不起作用。我怎样才能解决这个`if`问题，所以它会起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:47:12.110

`isset`是一个布尔运算符，它返回`TRUE`or `FALSE`。您无需将其与`1`.

```
if( isset($detail) ) 
```

作为旁注，仅仅因为设置了变量，并不意味着它不是空的。您可能只想检查它是否为空：

```
if( !empty($detail) ) 
```

# android - 摩托罗拉 Droid X，Android 2.3.3 列表视图行分隔符

> ID：15669086
> 
> 赞同：4
> 
> 时间：2013-03-27T20:45:52.577
> 
> 标签：android, listview, android-listview

我是 android 开发的新手，我有一个用于显示图像的列表视图。每行都是自定义行，每个单元格也是自定义布局。

一切正常，但是当我在运行 android 2.3.3 的摩托罗拉 Droid X 上测试我的代码时，我可以看到每行分隔线上方出现一条白线。

我知道 droid x 2.3.3 的列表视图页脚问题，我觉得这也是一个问题，因为它使用了默认的列表视图布局。

但我无法找到隐藏白线的方法。任何帮助是极大的赞赏。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T19:16:04.203

为了防止死链接，如果将来有人需要有关摩托罗拉列表视图的帮助，您需要做的就是将其添加到 XML 中的列表视图中：

```
android:background="@android:color/transparent"
android:cacheColorHint="@android:color/transparent"
android:descendantFocusability="afterDescendants"           
android:overScrollFooter="@null" 
```

# git - Bower 仅使用 https 安装？

> ID：15669091
> 
> 赞同：256
> 
> 时间：2013-03-27T20:46:05.193
> 
> 标签：git, bower, git-clone

我正在尝试在我们组织的数据中心的构建服务器上设置 Bower，但`git`在数据中心的防火墙上似乎没有打开的端口。我可以使用 git 命令行客户端通过 克隆`https://[repo]`，但不能`git://[repo]`。

是否有一个开关或首选项会指示 bower 使用`https`而不是`git`协议执行 git clone ？

我已经查看了源代码，并考虑将分辨率代码更改为替换`git://`为`https://`，但我想我会在进行这些长度之前询问。

* * *

## 回答 #1

> 赞同：627
> 
> 时间：2013-03-28T14:48:27.020

您可以让 git 为您替换协议。赶紧跑：

```
git config --global url."https://".insteadOf git:// 
```

使用 HTTPS 协议而不是 Git。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-10T22:52:36.820

基于@Sindre 的答案，我在 BASH 中编写了一个小辅助函数，该函数位于我的`~/.bashrc`文件中。像你一样调用它`grunt`，只是现在它被调用了`nngrunt`。享受！

```
function nngrunt
{
    # Add a section to the global gitconfig file ~/.gitconfig that tells git to
    # go over http instead of the git protocol, otherwise bower has fits...
    # See http://stackoverflow.com/questions/15669091/bower-install-using-only-https
    git config --global url."https://".insteadOf git://

    # Run grunt w/ any supplied args
    grunt "$@"

    # Now cleanup the section we added to the git config file
    # Of course we have our own extra cleanup to do via sed since the unset command
    # leaves the section around
    # See http://git.661346.n2.nabble.com/git-config-unset-does-not-remove-section-td7569639.html
    git config --global --unset url."https://".insteadOf
    sed -i 's/\[url "https:\/\/"\]//' ~/.gitconfig
    sed -i '/^$/d' ~/.gitconfig
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-05T04:39:37.727

为我工作 `git config --global url."git://".insteadOf https://`

# java - 将树插入转换为迭代函数

> ID：15669094
> 
> 赞同：0
> 
> 时间：2013-03-27T20:46:11.610
> 
> 标签：java, recursion, red-black-tree

我的问题是如何将此函数对转换为单个非递归调用？据我了解，任何递归调用都可能变成产生相同结果的迭代算法。

```
public void insert(Key key, Value value){
       root = insert(root, key, value);
       root.color = BLACK;
}
private Node insert(Node h, Key key, Value value) {

       /*1*/ if (h == null)      return new Node(key, value);

       /*2*/ if (isRed(h.left) && isRed(h.right)) colorFlip(h);

       /*3*/ int cmp = key.compareTo(h.key);
       /*4*/ if (cmp == 0) h.val = value;
       /*5*/ else if (cmp < 0) h.left = insert(h.left, key, value); 
       /*6*/ else              h.right = insert(h.right, key, value);

       /*7*/ if (isRed(h.right) && !isRed(h.left))     h = rotateLeft(h);
       /*8*/ if (isRed(h.left)  && isRed(h.left.left)) h = rotateRight(h);
             return h; 
  } 
```

我看到第 2 行在将节点推入堆栈时对其进行评估。我还注意到在第 5 行和第 6 行中，一个节点被推送到用户定义的堆栈上。当我开始思考第 7 行和第 8 行将出现的位置以及如何弹出节点并将它们正确链接到左侧或正确的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:53:55.003

我的直觉是，这样做“应该”会产生一些像这样的混乱......

```
public void insert(Key key, Value value) {

Stack<Node> nodeStack = new Stack<>();
Stack<Key> keyStack = new Stack<>();
Stack<Value> valStack = new Stack<>();

nodeStack.push(root);
keyStack.push(key);
valStack.push(value);

boolean done = false;

while(!done) {
   //here you cut-past the 3-parameter insert method...
   //BUT...
   //replace all uses have h, key, and value with stack.peek() calls
   //push new items to each stack everytime you call insert(Node n, Key k, Value v) (and do a continue)
   //pop items from each stack each time you leave insert
   //set done to true when the recurssion should end

         //you also MAY need some a Node var to hold the last returned value
}

 root.color = BLACK;
} 
```

故事的寓意是……您需要用自己的一些堆栈替换软件堆栈。上面的大纲可能并不完美，但它是一个开始。

出于好奇，你问什么？

# ssis - 如何为每个输入行执行一项事务？

> ID：15669105
> 
> 赞同：0
> 
> 时间：2013-03-27T20:46:46.190
> 
> 标签：ssis, ssis-2008

我有一个具有 oledb 数据源的数据流。然后我有一个执行三个 Web 服务调用的脚本组件，它有两个输出（实际上）与输入行同步（每个输入行一个输出行），一个异步输出（每个输入输出很多行排）。每个输出都转到一个 sql update 命令。还有一个错误日志输出（也是异步的）。

我希望以某种方式将输出包装在事务中，以便对于每个输入行，如果该行没有完全处理和更新，那么该输入行的更新都不会成功。

据我所知，它的工作方式是脚本处理每个输入行并将所有内容输出到缓冲区，然后再继续执行更新命令。相反，我希望在每行的基础上执行所有更新，在处理和更新每个输入行时提交更改。

我如何构建我的数据流来实现这一点？

我可能正在考虑执行源代码，然后通过 foreach 容器运行记录，但我不确定如何通过 ForEach 容器将多个 DataFlow 链接在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:41:08.643

我怀疑唯一的方法是将**所有内容**（包括更新）放在一个脚本中。SSIS 没有公开足够多的数据流缓冲策略来为您提供良好的控制级别。事实上，它不遗余力地在管道中加快速度，这与您正在寻找的节流策略相反。（有关可用的调整功能的讨论，请参阅 MSDN 上的[数据流性能功能。）](http://msdn.microsoft.com/en-us/library/ms141031%28v=sql.105%29.aspx)

或者，您可以构建一个完全自定义的目标管道组件。鉴于在 SSIS 2008 中调试脚本组件是多么痛苦，这甚至可能是一种更可取的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:15:47.893

这里的解决方案是我创建了一个数据流任务，它将用户选择到一个记录集中，该记录集中放置在一个变量中。

然后我使用 For Each 容器读取记录集，并将用户名放入变量中。在 For Each 中，我有一个数据流，它有一个 OLEDB 源，它使用变量作为参数来再次选择用户（这会导致对数据集的每次迭代进行查找，但这没关系）。

这会输入到我的脚本中。

此外，我在 for each 循环中的包之前和之后放置了执行 SQL 任务，因此我不必使用 DTC 事务，并且可以将每个输入行作为单独的事务处理。

# android - 活动的缓慢过渡：LogCat 中的多个“初始化膨胀状态”

> ID：15669108
> 
> 赞同：6
> 
> 时间：2013-03-27T20:46:50.840
> 
> 标签：android, android-listview, custom-component, android-logcat

为了在我的 中提供自定义字体，我[在此处](https://stackoverflow.com/questions/4576441/custom-font-in-android-listview)`ListActivity`编写了一个根据此示例`CustomAdapter`扩展的类。`BaseAdapter`

但是，如那里所述，我编写了`getView()`如下方法：

```
public View getView(int position, View convertView, ViewGroup parent){
    String gameName = gameNames[position]; // gameName ist the String[] of the Custom Adapter

    TextView tv = new TextView(context);
    tv.setText(gameName);
    tv.setTypeface(Typeface.createFromAsset(context.getAssets(), "fonts/gulim.ttf"));

    return tv;
} 
```

这按预期工作。唯一令人不安的是，列表显示大约需要三到四秒钟（在这种情况下，这是一个很长的时间）。但是，在`ListActivity`我这样设置`onItemClickListener`s ：

```
private void setOnItemClickListener(){
    getListView().setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int pos, long id){
            onClickEntryButton(((TextView) view).getText().toString());
        }
    });
}

private void onClickEntryButton(String gameName){
    Intent intent = new Intent(this, GameActivity.class);
    intent.putExtra("gameName", gameName);
    startActivity(intent);
    finish();
} 
```

现在，当单击 a 时`ListItem`，需要更多时间才能`GameActivity`打开。这`Activity`只是几个`TextView`从 SQLite 数据库中获取的信息。同样在这里，我为每个`TextView`. 即使屏幕变黑 2-3 秒（出现应用程序崩溃），也会发生这种情况，然后出现新`Activity`的。`Activity`从应用程序的其他地方访问它不会发生这种情况。

在这两种情况下 - 访问`ListActivity`和访问`GameActivity`从`ListActivity`- 几个

> “szipinf - 初始化膨胀状态”

消息出现在 LogCat 中。它们在这种情况下意味着什么？`onItemClickListener`将s设置`getView()`为 my 的方法会更好`CustomAdapter`吗？有些东西似乎真的抑制了转换，但我不知道是什么，因为没有什么大的需要计算或处理（事实上，在 SQLite 数据库中恰好有两个条目，每 5 个字段）？

**编辑** 如果需要或需要，我当然可以提供更多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-12T10:47:35.137

我有完全相同的问题，你的问题给了我答案！

我仍然不知道确切的根本原因，但这是因为在我的情况下多次从资产中读取自定义字体。如果我的屏幕上有 10 个小部件，并且每个小部件都使用自定义字体，Android 每次都会从资产中加载它。这不仅导致我的活动转换变慢，而且在玩了多个时间后也导致崩溃。

所以我为我的字体创建了一个缓存，以避免每次都从资产中获取字体。

我在我的实用程序类中添加了这段代码：

```
private static final Hashtable<String, Typeface> cache = new Hashtable<String, Typeface>();

public static final String ASSET_PATH="assetPath";

public static Typeface getFont(Context c, String assetPath) {
    synchronized (cache) {
        if (!cache.containsKey(assetPath)) {
            try {
                Typeface t =(Typeface.createFromAsset(c.getAssets(),
                        "fonts/arial.ttf"));
                cache.put(assetPath, t);
            } catch (Exception e) {
                return null;
            }
        }
        return cache.get(assetPath);
    }
} 
```

我创建了我的自定义类来 setTypeface

```
public class MyButton extends Button {

public MyButton(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public MyButton(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public MyButton(Context context) {
    super(context);
}

@Override
public void setTypeface(Typeface tf) {

    super.setTypeface(Util.getFont(getContext(), Util.ASSET_PATH));
}

} 
```

变量assetPath可用于在运行时提供不同的字体

**编辑**：[这](https://github.com/NayaneshGupte/RobotoTypefaceManager)是我作为库创建的自定义字体管理器，以使其更通用。

# activerecord - Active Record Join 与最近的关联对象属性

> ID：15669110
> 
> 赞同：3
> 
> 时间：2013-03-27T20:46:51.663
> 
> 标签：activerecord, rails-activerecord

我有一个有很多笔记的联系人模型。在我的应用程序的一个页面上，我显示了一个联系人表的几个属性（姓名、电子邮件、最新创建的笔记）。

对于 note 列，我正在尝试编写一个 join 语句来获取所有联系人以及他们的最新注释（甚至只是它的 created_at

我想出的是不正确的，因为它限制和订购联系人，而不是他们的笔记：

```
current_user.contacts.joins(:notes).limit(1).order('created_at DESC') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T09:50:52.837

如果您只想要`created_at`每个联系人的最新注释的值，您可以首先创建一个查询以找到最大值，然后加入该查询：

```
max_times = Note.group(:contact_id).select("contact_id, MAX(created_at) AS note_created_at").to_sql
current_user.contacts.select("contacts.*, note_created_at").joins("LEFT JOIN (#{max_times}) max_times ON contacts.id = max_times.contact_id") 
```

如果您想使用 Note 对象来获取最新的笔记，一个选项是选择笔记并按`contact_id`. 然后，您可以在处理每个联系人时从哈希中读取它们。

```
max_times = Note.group(:contact_id).select("contact_id, MAX(created_at) AS note_created_at").to_sql
max_notes = Note.select("DISTINCT ON (notes.contact_id) notes.*").joins("INNER JOIN (#{max_times}) max_times ON notes.contact_id = max_times.contact_id AND notes.created_at = note_created_at").where(contact_id: current_user.contact_ids)
max_notes.group_by(&:contact_id) 
```

这用于`DISTINCT ON`在两个音符具有完全相同的`contact_id`和`created_at`值的情况下删除副本。如果您不使用 PostgreSQL，您将需要另一种方法来处理重复数据。

# node.js - 为什么 Q 延迟在 Node.js 上这么慢？

> ID：15669116
> 
> 赞同：10
> 
> 时间：2013-03-27T20:47:04.403
> 
> 标签：node.js, deferred, promise, q

所以我在 Node.js 中创建了这个简单的测试服务器，
每当我进行直接响应时，我都会收到**2200**个请求/秒（快！）。当我只在它周围包裹一个简单的 Q 延迟时，它会下降到**580**个请求/秒（**慢 4 倍**！）。任何人都可以解释这种巨大的差异吗？

```
// Requires
var server = require('http');
var q = require('q');

// Start server
var http = require('http');
http.createServer(function(request, response) {

    // Comment out either of two below sections

// Without deferred
// 2200 reqs/second
response.writeHead(200, {"Content-Type": "text/html"});
response.write("test");
response.end();

// Q deferred
// 580 reqs/second
var deferred = q.defer();
deferred.promise.then(function() {
    response.writeHead(200, {"Content-Type": "text/html"});
    response.write("test");
    response.end();
});
deferred.resolve();
}).listen(1234); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T00:32:50.923

**编辑：**自从 Q 0.9.6 以来堆栈跟踪已关闭，性能已大大提高。（可以重新启用它们以进行调试`Q.longStackSupport = true;`）

原文：Q Promise 很慢，因为它们会在每个 Promise 上捕获完整的堆栈跟踪以帮助调试。这是非常缓慢的。您可以关闭它们`Q.longStackJumpLimit = 0;`（这可能是下一个版本的默认设置）。通过关闭它们，我们发现了大约 30 倍的加速。你可以在这里找到更多信息[https://github.com/kriskowal/q#long-stack-traces](https://github.com/kriskowal/q#long-stack-traces)

nextTick 实现也有一些[性能工作](https://github.com/kriskowal/q/pull/195)，但我认为以上是主要原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T13:13:58.160

我知道的原因是：

1.  Q 使用 Object.freeze，这会大大降低 V8 的速度

2.  许多 nextTick 调用（已经在评论中提到）。然而，对于最新的 Node.js 版本（v0.10）来说，这种情况不应该如此，因为 nextTick 开销很小。

# php - 第一个查询中返回的第二个查询的结果

> ID：15669123
> 
> 赞同：2
> 
> 时间：2013-03-27T20:47:39.343
> 
> 标签：php, mysql, mysqli

在我的代码中，我正在检查数据库中是否存在值。如果确实存在，则应返回错误。但是，如果不存在，则应在数据库中创建该值。这是我的代码：

```
/**
 * Check if the string has been used before
 *
 * @return bool
 */
private function _checkStringBeenUsed ()
{
    echo "Running check!\n";

    if ($this->_sString === null) {
        parent::showErrorMessage('Invalid shared String', 1005);
    }

    $this->_validateString();

    $sSql     = "SELECT * FROM operator_string WHERE
                    operatorId = '{$this->_sOperator}' AND
                    sharedString = '{$this->_sString}' AND
                    time >= DATE_SUB(
                        NOW(),
                        INTERVAL 1 DAY
                    )";
    $rQur     = $this->_oDb->query($sSql);

    echo $sSql;
    echo "\n\n";
    echo "Rows: " . $rQur->num_rows;
    echo "\n\n";

    if ($rQur->num_rows > 0) {
        parent::showErrorMessage('Shared string already used', 1005);
    } else {
        $sSql = "INSERT INTO operator_string
                    (operatorId, sharedString, time, hash)
                    VALUES
                    ('{$this->_sOperator}',
                        '{$this->_sString}',
                        NOW(),
                        '{$this->_sHash}'
                    )";
        $this->_oDb->query($sSql);
    }
}

/**
 * Validates the string and the hash
 *
 * @return void
 */
private function _validateString ()
{
    $sHashString = $this->_sOperator . $this->_sSharedSecret . $this->_sString;
    $sHash = hash('sha256', $sHashString);

    if ($sHash != $this->_sHash) {
        parent::showErrorMessage('Invalid authentication hash send', 1006);
    }
} 
```

这是我从 iPhone 运行命令时的输出：

```
2013-03-27 21:43:08.560 MyApp[45315:c07] Result: Running check!
SELECT * FROM operator_string WHERE
                        operatorId = 'a8198231u82' AND
                        sharedString = 'cqCEYGIbNvF7HU1' AND
                        time >= DATE_SUB(
                            NOW(),
                            INTERVAL 1 DAY
                        )

Rows: 1

<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE error>
<error>
    <errorCode>1005</errorCode>
    <errorMessage>Shared string already used</errorMessage>
</error> 
```

如果在运行调用之前表中没有数据，它怎么可能是 1 行？该方法只运行一次，插入完成**后**执行选择。

***编辑 1***
如果我注释掉插入 SQL 行，它不会向数据库添加任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:55:29.257

似乎[自动提交](http://php.net/manual/en/mysqli.autocommit.php)默认设置为`True`. `mysqli_autocommit($this, false);`我在我的子类中将其切换为 false`MySqli`并解决了我的问题。

# php - 递归遍历数组

> ID：15669131
> 
> 赞同：0
> 
> 时间：2013-03-27T20:48:14.457
> 
> 标签：php

```
$arr = array('aaa' => 
   array('bbb' => 
      array('ccc' => 
         array('ddd' => 
            'finally'))));

function walk($args) {
   $keys = get_func_args();
   // ...
}

walk('aaa', 'bbb', 'ccc', 'ddd'); 
```

我希望这个函数遍历这个多维数组并获得“最终”值。walk() 函数检索随机数量的参数，因此数组维度的数量是未知的。

我怎么做？

我虽然有一些递归方式......但是，我只是想不出任何东西。你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:06:28.277

创建一个接收键数组和索引的新函数。对于每个新调用，将索引增加 1，直到它是最后一个键。那就是你知道你有答案的时候！

```
 $arr = array('aaa' => 
   array('bbb' => 
      array('ccc' => 
         array('ddd' => 
            'finally'))));

function walk($myArray, $keys, $index) {
   if ($index == count($keys) -1){
      return $myArray[$index];
   }
   return walk($myArray[$keys[$index]],$keys,$index+1);
}

$keys = array('aaa', 'bbb', 'ccc', 'ddd');
$result = walk ($arr,$keys,0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T20:55:51.227

```
$arr = array('aaa' => 
   array('bbb' => 
      array('ccc' => 
         array('ddd' => 
            'finally'))));

function walk() {

  $keys = func_get_args();

  $array = array_shift($keys);

  foreach ($keys as $key)
  {
    $array = $array[$key];
  }

  return $array;

}

echo walk($arr, 'aaa', 'bbb', 'ccc', 'ddd'); // finally 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:04:42.203

你可以使用这个小班

```
$walker = new Walker($arr);
echo $walker->find('aaa', 'bbb', 'ccc', 'ddd'); //finally 
```

班级

```
class Walker {
    private $a; // array
    function __construct($a) {
        $this->a = $a;
    }

    function find() {
        $temp = $this->a;
        foreach ( func_get_args() as $key ) {
            $temp = isset($temp[$key]) ? $temp[$key] : null;
        }
        return $temp;
    }
} 
```

# java - 如何正确处理非英文字符？

> ID：15669134
> 
> 赞同：3
> 
> 时间：2013-03-27T20:48:19.130
> 
> 标签：java, string, unicode, character-encoding, char

所以我正在使用 last.fm API。有时，查询会产生包含以下字符的曲目：

`Æther`, `é`,`Hṛṣṭa`

或像这样的非英文字符：

`水鏡`.

在 Eclipse 中调试时，我看到它们很好（原样），但在控制台上打印会将它们打印为`???`- 这对我来说没问题。

现在，我该如何处理这些？起初，我虽然可以删除所有具有除英语之外的任何字符的歌曲。我使用了正则表达式`^\\w+$`，但它没有用。我也试过了`\\w+`。那也没有用。

然后我进一步思考如何正确处理这些问题。任何人都可以帮助我吗？我完全可以让这些曲目脱离等式，即。我很满意只有英文字符轨道。

另一个问题：显示控制台和/或 Swing GUI 的这些字符的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:54:38.237

首先读取输入时，您必须确保使用正确的编码。

其次确保您开发的平台上Eclipse 中使用的字体能够显示所有这些字符。如果您正确阅读，Swing 必须显示 unicode 字符。

您可能希望在任何地方都使用 UTF-8。

# javascript - IE 中的 JavaScript 问题，但不是 Firefox

> ID：15669137
> 
> 赞同：1
> 
> 时间：2013-03-27T20:48:27.393
> 
> 标签：javascript, internet-explorer, firefox, contains

我有一个 MVC3 C# .Net Web 应用程序。我在 onclick 事件上触发提交按钮的 javaScript 方法。它在 Firefox 中工作得很好，我看到了确认框，但在 IE 8 中没有。在 IE 中它总是返回 true 并且不显示确认框。这是javascript：

```
<script type="text/javascript">

    function DoCopy() {
      return confirm(($("#myField").val().contains(";" + $("#myOtherField").val() + ";")));
    }
</script> 
```

这是按钮：

```
<input type="submit" id="thePageSubmit" name="Command" value="Save" onclick="return DoCopy();" /> 
```

我正在使用 jQuery，但即使我直接使用 javaScript (document.forms[0].elements["myField"])，它也适用于 Firefox，但不适用于 IE。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:59:28.103

我在这个链接上找到了答案：It's not compatible in IE [string.contains](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/contains)

![兼容性](../Images/5c1994bce3a323afefe3301064470d0b.png)

# javascript - jquery关闭点击功能？

> ID：15669139
> 
> 赞同：6
> 
> 时间：2013-03-27T20:48:30.347
> 
> 标签：javascript, jquery

这听起来像是一个愚蠢的问题，但有什么我可以要求取消点击事件的，例如我目前有这个；

```
$("#frame_left").click(function() {
    $("#navLeft").show();
}); 
```

`#navLeft`用户单击单选按钮后，我想隐藏内容吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T20:50:21.003

为整个文档添加点击事件：

```
$(document).click(function(e) {
  $('#navLeft').hide();
}); 
```

然后停止在元素上的传播，这样它就不会冒泡到文档中：

```
$("#frame_left").click(function(e) {
  e.stopPropagation();
  $("#navLeft").show();
}); 
```

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T20:51:01.357

这应该适合你：

```
$('html').click(function() {
    $("#navLeft").hide();
}); 
```

`#frame_left`然后确保在单击元素时阻止事件传播：

```
$("#frame_left").click(function(e) {
    $("#navLeft").show();
    e.stopPropagation();
}); 
```

# knockout.js - knockout.js - 将类存储到 viewModel

> ID：15669144
> 
> 赞同：1
> 
> 时间：2013-03-27T20:49:01.127
> 
> 标签：knockout.js

我正在通过 jQuery 向 div 添加一个类，并且我想将该类传递回我的 viewModel。我查看了 ko.datafor() ，它似乎没有完成我想要的（或者我完全有可能只是不知道如何正确使用它）。实现这一目标的最佳方法是什么？

**编辑**- 让我再解释一下：

我正在将颜色选择器与淘汰赛集成在一起。您单击颜色选择器图标，然后我会构建要从中选择的颜色列表，如下所示：

```
 for (var i = 1; i < self.SponsorFilters().length; i++) {
                        var filter = self.SponsorFilters()[i];
                        if (filter.CssStyle() != null) {
                            $('.simplecolorpicker.picker').append('<div class="swatch' + i + '" role="button" tabindex="0">&nbsp;&nbsp;&nbsp;&nbsp;</div>');
                            $(".simplecolorpicker.picker .selected").hide();

                        }
                    } 
```

然后，当您选择所需的颜色时，它会通过 反映在图标上`"swatch+i"`。我需要将该类传递回我的 viewModel。
呃，只是把这个打出来是没有意义的。我可能需要重新评估我的策略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:02:30.880

我尝试在没有任何 jQuery 选择器的情况下编写我的淘汰赛。没有任何。0\. 你用 jQuery 做的所有事情（嗯，大多数）都可以用敲除绑定来完成，或者至少是一个自定义绑定，将 jQuery 东西从你的视图模型中抽象出来。

因此，与其手动循环通过赞助商过滤器来创建下面的样本，为什么不直接使用 foreach 绑定呢？

在您的视图模型中

```
self.SponsorFiltersWithCSS = ko.computed(function() {
  var sponsorFilters = self.SponsorFilters();
  var filteredFilters = []
  for(var i = 0;i<sponsorFilters.length;i++) {
    if(sponsorFilters[i].CssStyle() != null) {
      filteredFilters.push(sponsorFilters[i]);
    }
  }
  return filteredFilters;
}) 
```

标记

```
<div class="swatches" data-bind="foreach:SponsorFiltersWithCSS">
  <div role="button" data-bind="attr:{'class':'swatch' + $index}">&nbsp;&nbsp;&nbsp;&nbsp;</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:50:16.987

我最终编写了一个自定义绑定处理程序 - 谢谢 Tyrsius！

昏死

```
 ko.bindingHandlers.colorPicker = {
            init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                var value = valueAccessor();
                $(element).val(ko.utils.unwrapObservable(value));
                $(element).colorPicker();
                $(element).change(function () {
                    value(this.value);
                });
            }
        }; 
```

HTML

```
 <input class="jqColourPicker" type="text" data-bind="colorPicker: ColorCode, event: { change: $root.AdminSaveSponsorStyle }"  /> 
```

# php - 无法弄清楚如何创建这个 if 语句

> ID：15669147
> 
> 赞同：1
> 
> 时间：2013-03-27T20:49:09.117
> 
> 标签：php, if-statement

这是有史以来创建的世界上最简单的 php if 语句，但我无法弄清楚如何做到这一点。基本上我有一个难过的时刻，需要社区的帮助。

这是我的功能：

```
protected function _traverse_options($name, $type = ''){

    if(isset($this->_options[$name][$type])){
        echo $this->_options[$name][$type];
    }
} 
```

我需要的 if 语句是检查三件事：

*   如果 type 不是 null**但**type 不是 'before'
*   如果类型不为空**但**类型不是“之后”

我试着做：

```
if($type != '' && $type != 'before' || $type != '' && $type != 'after'){} 
```

这怎么行不通。

我知道这很简单，但我想不通？应该`||`是`&&`？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:52:10.550

所以任何非空字符串既不是`before`也不是`after`。

```
if ('' !== $type && !in_array($type, array('before', 'after')))
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:53:20.183

这将完成这项工作：

```
if( $type != '' && $type != 'before' && $type != 'after'){} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T20:53:23.353

如果我理解正确，您不需要 OR 在该声明上。尝试：

```
if (!is_null($type) && strlen($type) > 0 && $type !== 'before' && $type !== 'after') { ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T21:13:55.160

使用括号，以便您可以看到什么属于什么。

```
if ($type != null && ($type !== 'before' && $type !== 'after')) {
    // ...
} 
```

如果您不小心，最终可能会遇到问题，例如在数学中，根据您首先执行的操作，计算可能会产生两种不同的结果。例如`2*5-10`，可以是`0`或`-10`取决于乘法或减法的顺序：`(2*5)-10`或`2*(5-10)`。

您还可以通过将逻辑分解为变量来使其更容易理解，从而使`if`语句更简单：

```
$notNull = ($type != null);
$notBeforeAndAfter = ($type !== 'before' && $type !== 'after');
if ($notNull && $notBeforeAndAfter) {
    // ...
} 
```

如果您确切知道`$type`变量必须包含什么，那么您也可以使用`switch`语句。这更容易理解：

```
switch ($type) {
    case 'before':
        echo '$type is "before"';
        break;
    case 'after':
        echo '$type is "after"';
        break;
    // $type is not 'before' or 'after', which means that
    // it is something else which we cannot use...
    default:
        echo '$type is an unknown value. Error maybe?';
        break;
} 
```

# android - 使用硬件键盘时，Android TabHost 选项卡会窃取焦点

> ID：15669152
> 
> 赞同：11
> 
> 时间：2013-03-27T20:49:19.670
> 
> 标签：android, tabs, keyboard, android-tabhost

我目前有一个`TabHost`包含 4 个选项卡。在一些片段上，我们`EditText`在布局中有许多视图。

我们注意到，当您尝试`EditText`使用硬件键盘输入任何视图时，焦点会`EditText`从`TabHost`. 这只发生在带有标签的屏幕上。有没有一种快速简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:39:14.630

很长一段时间以来，这一直是一个已知的错误：

[http://code.google.com/p/android/issues/detail?id=2516](http://code.google.com/p/android/issues/detail?id=2516)

一种解决方法是在选择选项卡后强制`TabHost`失去焦点。这是通过在方法中设置 a并调用`OnTabChangeListener`来完成的。`TabHost``clearFocus``onTabChanged`

```
tabHost.setOnTabChangedListener(new OnTabChangeListener(){    
    public void onTabChanged(String tabID) {    
        tabHost.clearFocus(); 
    }   
}); 
```

编辑：如果这不起作用，您可以尝试相反的方法。改为强制 EditText 字段获得焦点：

```
OnTouchListener focusHandler = new OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent event) {
        // TODO Auto-generated method stub
        view.requestFocusFromTouch();
        return false;
    }
};

editText.setOnTouchListener(focusHandler); //For each EditText with this issue 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-02T21:28:01.137

我在[http://code.google.com/p/android/issues/detail?id=2516](http://code.google.com/p/android/issues/detail?id=2516)找到了这个解决方案，它比这里或错误报告页面上的任何解决方案都更好，因为它解决了根本原因解决它。我会让作者 (g1adrift) 解释一下：

> 在深入研究了 Android 源代码之后，我发现了这个错误：如果当前选项卡内容视图没有焦点，TabHost 在 onAttachedToWindow() 中注册了一个 OnTouchModeChangeListener，它在离开触摸模式（也就是有人按下键时）时会窃取焦点。虽然如果整个布局是选项卡，这可能是有意义的，但如果只有一部分布局具有选项卡，则会导致问题。
> 
> 此解决方法删除了该侦听器，因此使用它的所有工件都应该消失：
> 
> 在 onCreate() 中，添加：

```
TabHost mTabHost = (TabHost) findViewById(android.R.id.tabhost);
mTabHost.addOnAttachStateChangeListener(new OnAttachStateChangeListener() {

    @Override
    public void onViewDetachedFromWindow(View v) {}

    @Override
    public void onViewAttachedToWindow(View v) {
        mTabHost.getViewTreeObserver().removeOnTouchModeChangeListener(mTabHost);
    }
}); 
```

据说它只适用于 SDK 12+。作者还发布了针对早期 SDK 的解决方案。如果您需要它，请单击上面的链接并搜索“g1adrift”的帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:12:23.280

```
 @Override
    public void onPageSelected(int position) {
        // Unfortunately when TabHost changes the current tab, it kindly
        // also takes care of putting focus on it when not in touch mode.
        // The jerk.
        // This hack tries to prevent this from pulling focus out of our
        // ViewPager.
        TabWidget widget = mTabHost.getTabWidget();
        int oldFocusability = widget.getDescendantFocusability();
        widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
        mTabHost.setCurrentTab(position);
        widget.setDescendantFocusability(oldFocusability);

    } 
```

从 android 支持库示例中复制粘贴

# batch-file - 批处理文件查找文件，并将其复制粘贴到另一个位置

> ID：15669157
> 
> 赞同：0
> 
> 时间：2013-03-27T20:49:25.350
> 
> 标签：batch-file, copy, location, find, paste

需要批处理文件的帮助。我需要的是：找到确切的调用文件（例如从 C: 驱动器）并将其复制粘贴到同一磁盘上的另一个位置。

示例：我需要从 C: 驱动器中找到名为“textfile.txt”的文件，如果找到，它将复制它并粘贴到位置 C:\Program Files\Internet Explorer

那么有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:37:17.837

试一试：

```
for /f "delims=" %%i in ('dir /s /b /a-d c:\textfile.txt') do copy /b "%%~i" "C:\Program Files\Internet Explorer" 
```

# django - 如何使用 django-auth-ldap 实现身份验证？

> ID：15669161
> 
> 赞同：12
> 
> 时间：2013-03-27T20:49:46.780
> 
> 标签：django, ldap, django-authentication, openldap, django-auth-ldap

我有一个使用 django 运行的应用程序。现在我只希望通过 openldap 服务器进行身份验证的用户看到“他们的视图”（因此我只需要他们的 uid 在成功身份验证后）

我怎样才能做到这一点？

我想 django-auth-ldap 是要走的路，所以我尝试了一整天来了解身份验证实际发生的位置以及如何获取请求视图的用户的 uid。

我使用了[settings.py 的文档，](http://pythonhosted.org/django-auth-ldap/)但我不知道如何“实际使用”它。也许有人可以指出我正确的方向？

设置.py：

```
import ldap

AUTHENTICATION_BACKENDS = (
    'django_auth_ldap.backend.LDAPBackend',
    'django.contrib.auth.backends.ModelBackend',
)

AUTH_LDAP_SERVER_URI = "ldap://123.60.56.61"

AUTH_LDAP_BIND_DN = ""
AUTH_LDAP_BIND_PASSWORD = ""
AUTH_LDAP_USER_DN_TEMPLATE = "uid=%(user)s,dc=rd,dc=corpintra,dc=net" 
```

（顺便说一句：我已经可以使用 python-ldap 执行 ldap-searche 并在命令行上获得类似 ldapsearch 的结果，所以其他一切都很好......）

我的观点需要什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T11:48:18.433

这是我们网站之一的片段。

```
# Django Auth Ldap
main_dn = 'dc=____,dc=organisation,dc=com'
groups_dn = 'ou=Groups,'+main_dn
users_dn = 'ou=Users,'+main_dn

AUTHENTICATION_BACKENDS = (
    'django_auth_ldap.backend.LDAPBackend',
    'django.contrib.auth.backends.ModelBackend',
)

AUTH_LDAP_SERVER_URI = "ldap://ldap.organisation.com"
AUTH_LDAP_BIND_DN = 'cn=___,'+main_dn
AUTH_LDAP_BIND_PASSWORD = "__________________"
AUTH_LDAP_USER_SEARCH = LDAPSearch(users_dn, 2, "(uid=%(user)s)")
AUTH_LDAP_USER_ATTR_MAP = {
    "first_name": "givenName",
    "last_name": "sn",
    "email": "mail"
}
AUTH_LDAP_MIRROR_GROUPS = True
AUTH_LDAP_ALWAYS_UPDATE_USER = True
AUTH_LDAP_GROUP_TYPE = PosixGroupType()
AUTH_LDAP_GROUP_SEARCH = LDAPSearch(groups_dn, ldap.SCOPE_SUBTREE, "(objectClass=posixGroup)")

AUTH_LDAP_USER_FLAGS_BY_GROUP = {
    "is_staff":         "cn=admins,"+groups_dn,
    "is_superuser":     "cn=developers,"+groups_dn,
} 
```

编辑：

由于问题是“我的视图中需要什么？”，答案是此配置会将用户的 uid 保存为用户模型上的用户名字段，因此在您的视图中，您需要

```
uid = request.user.username 
```

希望这能让你启动并运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:21:56.437

由于 django-auth-ldap 是一个普通的 Django 身份验证后端，`request.user`应该设置为经过身份验证的用户（假设您安装了标准中间件 - 请参阅 Django 文档）。使用典型设置，`request.user.username`将是用户 DN 的 uid。如果您需要更多信息，可以从[`request.user.ldap_user`](http://pythonhosted.org/django-auth-ldap/users.html#direct-attribute-access).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T05:34:14.383

我不使用 django-auth-ldap，我编写了自己的 ldap 身份验证后端。

```
#define your backend authentification
AUTHENTICATION_BACKENDS = (
    'netipa.managment.ldapwm.netipaldapdjango.NetIpaLdap',
    #'django.contrib.auth.backends.ModelBackend ',
) 
```

有关扩展用户模型的更多信息，请参阅[https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#specifying-a-custom-user-model](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#specifying-a-custom-user-model)

```
#!/usr/bin/env python
#coding:utf-8
# Author:  peter --<pjl@hpc.com.py>
# Created: 22/04/12 
from django.conf import settings
import ldap
#this is a abstrac class to add some custom fields to the default django User model
#see https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#specifying-a-custom-user-model, for more informacion
from netipa.contrib.accesos.models import LdapUsers as User    
from django.contrib.auth.backends import ModelBackend
#import logging

class NetIpaLdap(object):

    supports_inactive_user = False

    def authenticate(self, username=None, password=None):
#        logging.basicConfig(format='%(asctime)s %(message)s',filename="/tmp/auth.log",level=logging.DEBUG)

        if username is None:
            return None

        try:
            # a variable's define in settings
            ip_server = settings.LDAP_BASES.get('ip')
            userdn = settings.LDAP_BASES.get('users')
            ldap.initialize('ldap://%s' % ip_server)
            lop =  ldap.simple_bind_s(
                                            "uid=%s,%s" % (username, userdn),
                                            password
                                            )
        except ldap.LDAPError, e:
            print e
            return None
        except Exception,e:
            print e
            return None

        try:
            user = User.objects.get(username=username)
        except User.DoesNotExist:
            ldap_at = lop.search(settings.LDAP_BASES.get('users'),
                                                    fil='uid=%s' % username,
                                                    types=1,
                                                    attr=['uidnumber', 'mail'])
            user = User(username=username, password=password, ldap_id=ldap_at[0][-1].get('uidnumber')[0],
                        ldap_mail=ldap_at[0][-1].get('mail')[0])
            user.is_staff = True
            user.is_superuser = True
            user.save()
        return user

    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None 
```

这是我的扩展用户类模型

```
from django.db import models
from django.contrib.auth.models import AbstractUser

# Create your models here.

class LdapUsers(AbstractUser):
    ldap_id = models.IntegerField()
    ldap_mail = models.EmailField() 
```

# dart - 向 javascript 公开 Dart 函数

> ID：15669163
> 
> 赞同：14
> 
> 时间：2013-03-27T20:49:54.770
> 
> 标签：dart, dart-js-interop

我对飞镖有点陌生，并试图通过在其中编写一些库函数来弄湿我的脚。

虽然我从 dart 调用 javascript 函数没有问题，但我希望能够从 javascript 调用 dart 函数，但到目前为止，我不太喜欢。

例如，我希望能够从 dart 中公开一些基本功能，例如：

```
main() {
  String foo() {
    return "bar!";
  }

  js.scoped(() {
    js.context.foo = foo;
  });
} 
```

然后能够从 javascript 调用它们，如下所示：

```
<script>
  window.onload = function() {
    alert("foo() = " + foo());
  }
</script> 
```

这样的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T21:06:35.490

没问题 ！请参阅[从 JavaScript 调用 Dart](http://www.dartlang.org/articles/js-dart-interop/#calling-dart-from-javascript)。

在你的情况下：

```
import 'dart:js' as js;
main() {
  String foo() {
    return "bar!";
  }

  js.context['foo'] = foo;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-09T11:11:13.303

在 Dart 1.20 中，我必须添加`allowInterop()`

```
import 'dart:js' as js;
main() {
  String foo() {
    return "bar!";
  }

  js.context['foo'] = allowInterop(foo);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-22T20:24:51.327

在 Dart 2.3.0 中，我不得不稍微调整一下解决方案`allowInterop`才能玩得更好。

```
 import 'dart:js' as js;
    main() {
      String foo() {
        return "bar!";
      }

      js.context['foo'] = js.allowInterop(foo);
    } 
```

# url - MS Word 2010 邮件合并：动态 url，相同文本

> ID：15669164
> 
> 赞同：2
> 
> 时间：2013-03-27T20:49:57.273
> 
> 标签：url, ms-word, ms-office, mailmerge

我有一个 MS word 2010 邮件合并，需要一个个人 url 作为 href 和所有用户的通用标题

我可以发送一个显示为完整 url 的 url，但我想要一个通用的显示文本，这样用户就看不到所有参数或一个巨大的 url

我试图先插入超链接然后 ALT+F9，这没有通过合并字段

```
 {HYPERLINK "http://domain.wufoo.com/form1/def/Field1={MERGEFIELD id_number}" } 
```

然后我在插入超链接后尝试调用一个新字段作为 url，这并没有删除原始插入的超链接，因为它似乎在插入时需要一个 url 值

```
 {HYPERLINK {MERGEFIELD url} \* MERGEFORMAT } 
```

我试图按照这里的说明[http://support.microsoft.com/kb/912679](http://support.microsoft.com/kb/912679)方法 #1 但 2002-2003 菜单这个词不同，我无法插入没有 url 的超链接（'“错误！超链接参考无效”出现在文档中。”）

我只是不知道该怎么做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:25:31.810

[一旦我从http://support.microsoft.com/kb/912679](http://support.microsoft.com/kb/912679)方法 #1弄清楚如何插入没有 url 的超链接，这一切顺利

在 Word 2010 中，转到插入 -> 快速部件 -> 字段并选择超链接，然后点击确定

这将插入一个没有链接地址的 URL，然后您可以按照其余步骤将合并字段作为 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:27:37.553

{ HYPERLINK { MERGEFIELD url } } 方法应该可以工作，但要获得正确的显示文本，请选择超链接字段（无论是显示字段还是显示结果，并在 VB 编辑器的即时窗口中运行以下 VBA：

selection.Fields(1).Result.Text = "你想要的显示文本"

# ruby - 我可以在 Ruby 中覆盖系统时区吗？

> ID：15669166
> 
> 赞同：9
> 
> 时间：2013-03-27T20:50:02.420
> 
> 标签：ruby, timezone, environment-variables

我在*Ubuntu 12.04*上，我可以看到：

```
$ cat /etc/timezone 
America/Phoenix 
```

因此`Time`将返回一个非 UTC 区域的时间：

```
$ irb
> Time.now
=> 2013-03-27 13:44:49 -0700
> Time.at 0
=> 1969-12-31 17:00:00 -0700 
```

`TZ`我可以使用环境变量覆盖系统时区：

```
$ TZ=UTC irb
> Time.now
=> 2013-03-27 20:47:19 +0000
> Time.at 0
=> 1970-01-01 00:00:00 +0000 
```

无论如何，我可以在 Ruby 进程中以编程方式进行此更改吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T21:02:50.940

`ENV`您还可以通过访问哈希从 ruby​​ 中设置环境变量：

```
ENV['TZ'] = 'UTC'
Time.at 0
#=> 1970-01-01 00:00:00 +0000 
```

另请参阅此答案：[Set time zone offset in Ruby](https://stackoverflow.com/questions/4703830/set-time-zone-offset-in-ruby)，它提供了一种编写类似内容的方法

```
with_time_zone 'UTC' do
  # do stuff
end

# now TZ is reset to system standard 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T20:55:34.353

您可以使用`Time#gmtime`. 例如

```
Time.now
# => Wed Mar 27 16:55:11 -0400 2013 
Time.now.gmtime
# => Wed Mar 27 20:55:14 UTC 2013 
Time.at(0)
# => Wed Dec 31 19:00:00 -0500 1969 
Time.at(0).gmtime
# => Thu Jan 01 00:00:00 UTC 1970 
```

`Time#utc`也可以工作并且是`Time#gmtime`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:22:45.953

根据用例，ActiveSupport 提供了很多与 TimeZone 相关的优点。

```
$ gem install activesupport
$ irb
> require 'active_support/time'            # => true
> Time.zone = 'Pacific Time (US & Canada)' # => "Pacific Time (US & Canada)"
> Time.zone.now                            # => Wed, 27 Mar 2013 16:14:19 PDT -07:00 
```

ActiveSupport 可能是一个比您想要的更大的依赖项，但您不应忽视它。

# javascript - 使用 Facebook 的示例代码“加载资源失败”

> ID：15669167
> 
> 赞同：34
> 
> 时间：2013-03-27T20:50:11.400
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在尝试运行 Facebook JS SDK 文档中的第一个示例。我创建了一个新应用程序，创建了一个名为“facebookTest.html”的空白文档，粘贴了示例中的代码，并插入了新应用程序的 App ID。代码如下：

```
<html>
<head>
<title>Login with facebook</title>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'my app ID', // App ID from the App Dashboard
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here

  };

  // Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might 
  // contain some type checks that are overly strict. 
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = document.location.protocol+"//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));
</script> 
```

当我加载页面时，在 Javascript 控制台上我收到以下错误消息：

`Failed to load resource`

我究竟做错了什么？

编辑：当我按照[这里](https://stackoverflow.com/a/9849572/619177)的建议添加`document.location.protocol`之前，屏幕保持空白，控制台显示以下内容：`"//connect.facebook.net/..."`

```
GET file://connect.facebook.net/en_US/all.js 
```

这就是所有这些代码应该做的吗？还是仍然失败？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2018-02-23T18:22:04.423

只是禁用adblock，它对我有用

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-04-01T17:06:58.033

这里有几件事不对：

1.  需要将`js.src`分配更改为： `js.src="https://connect.facebook.net/en_US/all.js";`

2.  Facebook 不再支持从本地文件进行的 JS SDK 调用，[根据 Facebook 上的这个错误报告](https://developers.facebook.com/bugs/165982843535513/)`http://`，该脚本必须在具有或`https://`URI的文件上运行。我需要将文件上传到 Web 服务器，相应地更改画布 URL，然后重新测试。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-02T05:27:02.307

首先，您需要将 http 或 https 附加到 js.src url

其次，您需要在服务器上托管您的 html 文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-08-22T09:16:10.450

如果您的网址包含“广告”、“广告”、“双击”、“点击”或类似的字词……</p>

*例如：*

*   `GET googleads.g.doubleclick.net/pagead/id`
*   `static.doubleclick.net/instream/ad_status.js`

…然后广告拦截器将阻止它。

参考：[在某些 AJAX 调用中出现“net::ERR_BLOCKED_BY_CLIENT”错误](https://stackoverflow.com/questions/23341765/getting-neterr-blocked-by-client-error-on-some-ajax-calls/32916582)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-05T10:25:04.227

转到 Facebook 开发人员并添加您的网站域并获取 id 并粘贴如下：

```
 appId : 'my app ID', // App ID from the App Dashboard 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-05T20:00:24.233

添加我在这里没有看到的另一件事：如果您在 Firefox 中进行调试，请在开发时禁用增强跟踪保护和 Facebook 容器。

# c# - C# 格式化数字的不同语法

> ID：15669168
> 
> 赞同：2
> 
> 时间：2013-03-27T20:50:11.560
> 
> 标签：c#, number-formatting

我有一个关于在 C# 中格式化数字的简单问题。

我有这样的格式

```
{0:0.00######################} 
```

这是由[这个网站](http://www.daveoncsharp.com/2009/09/formatting-decimals-in-csharp/)建议的，它基本上显示了一个数字的至少 2 位小数。

然后[这个网站](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SpecifierPt)建议了一个不同的格式字符串

```
0.00###################### 
```

现在，我明白前者和后者在功能上有区别。例如，我应该在 string.Format() 调用中使用前者，在 Decimal.ToString() 调用中使用后者。但我想知道的是，拥有花括号和

```
0: 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:52:16.940

当您使用`String.Format`时，您可以拥有多个将被格式化的“项目”。这是通过使用值列表`{n}`中`n`的索引来确定的：

```
var result = string.Format("Arg1 == {0}, Arg2 == {1}", arg1, arg2); 
```

这不是必需的，`Decimal.ToString`并且类似，因为只有一个值。

`0:`真的只是`{0}`, 并且`:`用于打破格式规范（之后的所有内容都与方法使用`:`的内容相同`ToString`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T20:52:37.767

使用`String.Format`时，花括号表示您正在放置要替换为字符串的参数。`0`表示它是第一个参数，因此例如考虑以下内容：

```
Console.WriteLine(String.Format("{0} {1} {2}", "A", "B", "C")); 
```

将输出“AB C”。然而：

```
Console.WriteLine(String.Format("{2} {0} {1}", "A", "B", "C")); 
```

将输出“CA B”。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T20:53:37.670

花括号用作要替换为值的“符号”。花括号中的数字（基于 0 的索引）是指向该值的索引。

例子：

`string.Format("{0:#,##0} {1:#,##0} {0:#,##0}", 2345, 6789);`

将导致：

`2,345 6,789 2,345`

# events - Sencha Touch 2.x 单击按钮但在释放鼠标按钮之前移动指针不起作用

> ID：15669169
> 
> 赞同：0
> 
> 时间：2013-03-27T20:50:12.663
> 
> 标签：events, button, click, sencha-touch, drag

直到我的客户提到他点击我正在开发的应用程序上的按钮时，我才真正认为这是一个问题。我询问了一下他到底在做什么，结果发现他正在点击（使用鼠标，这是一个嵌入在 Windows 应用程序中的 sencha 触摸应用程序，最终将在 Windows 7 UMPC“平板电脑”上运行）在按钮上并释放，但指针已在单击和释放之间移动（移动了几个像素）。但是，这似乎不会触发按钮的点击处理程序。它起作用的唯一方法是，如果您在完全相同的位置单击并释放，而根本没有在按钮内部拖动。

我认为这有点奇怪 - 单击并移动指针然后释放，同时仍在按钮内部 - 应该触发事件处理程序 IMO。不应该在按钮的外部单击、移动和释放（正如预期的那样）。

还有其他人经历过这种情况或知道如何抵消这种行为吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:06:11.903

事实证明，这只发生在应用程序托管在 WebKit.NET 浏览器控件中时——如果我只是在 Chrome 中运行它，点击行为很好——可以点击并移动鼠标并释放（在按钮内）并且 onTap 事件触发美好的。

# html - 如何使用剩余宽度？

> ID：15669174
> 
> 赞同：0
> 
> 时间：2013-03-27T20:50:26.357
> 
> 标签：html, css

我想让 div2 在 div1 的右侧水平对齐。Div2 还应该拉伸剩余的宽度，这是一个可变数字（浏览器宽度）。如果我将 div2 宽度设置为绝对值（300 像素），我会得到正确的对齐方式，但不会消耗剩余的宽度。

这应该怎么做？

```
<div id="1" style="float:left;width:100px">
    the first box
</div>
<div id="2" style="float:left;width:100%">
    the second box
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:52:24.433

只需让左边的一个浮动，第二个将调整其宽度：

```
<div id="1" style="float:left;">
    the first box
</div>
<div id="2">
    the second box
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T20:57:59.747

如果您不希望 div2 包裹在 div 下，那么有多少内容并不重要

[http://jsfiddle.net/h424c/2/](http://jsfiddle.net/h424c/2/)

```
div {
    display: table-cell;
} 
```

HTML

```
<div id="a1" style="width:100px">
    the first box
</div>
<div id="a2">
    the second box sfsdf dsf sdfasdf sadf sadf sadf asdf sadf sdaf sadf sdfsadf sdaf asdf sdf sdf sdaf asdf sadf sdaf sdaf sdf sdaf sadf sdf sdf sdaf sdf sadf dsaf sdf sdaf ds
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T20:57:43.850

您可以通过将两个 div 用作一个父级和一个子级来做到这一点。您应该跨浏览器对其进行测试，因为我不知道它是否在 IE 中工作；-) ...“清晰”也会很棒:-)

```
<div style="width: 100%; border: 1px solid blue;  ">

    <div id="1" style="float:left;width:100px; border: 1px solid red; ">
        the first box
    </div>
        the second box
</div> 
```

示例：http: [//jsfiddle.net/5t6Ak/](http://jsfiddle.net/5t6Ak/)

**注意：您的 ID 不应以数字开头！**

# java - 数组递增和 i++ 问题

> ID：15669175
> 
> 赞同：1
> 
> 时间：2013-03-27T20:50:36.063
> 
> 标签：java, arrays, string, arraylist

我正在尝试将`i++`数组的某些部分存储在一个循环中。但不是增加 1，我真的需要它增加 2。

例如：

```
import java.util.ArrayList;
import java.util.Arrays;
import javax.swing.JOptionPane;

public class PeerTutoring
{
    public static void main(String[] args)
    {
        ArrayList<String> list = new ArrayList<String>();

        int a = 0;
        int b = 1;
        String name, degree;
        String line;
        line = JOptionPane.showInputDialog("Inputs");
        String[] userinput = line.split("\\s+");

        for(int i = 0; i < userinput.length; i++)
        {
            name = userinput[a];
            degree = userinput[b];
            a+=2;
            b+=2;
        }
    }

    public static String sort(String name)
    {
        String tutors = "Tutor List";
        ArrayList<String> names = new ArrayList<String> ();
        names.add(userinput[0]);
        names.add(userinput[2]);
        names.add(userinput[4]);
        names.add(userinput[6]);
        names.add(userinput[8]);
        names.add(userinput[10]);
        names.add(userinput[12]);
        names.add(userinput[14]);
        names.add(userinput[16]);
        names.add(userinput[18]);
    }
} 
```

我想`a`从 0 和`b`1 开始，然后每次我希望它增加 2。（因为每个名字都用空格分隔）我想我将不得不合并一些类似的东西`userinput[a + 1]`。但我只是想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:51:32.903

```
for(i=0, i < linesize; i += 2) 
```

附带说明一下，如果您打算之后使用它们，请确保在循环之外初始化变量，否则它们将丢失。

```
 int a = 0;
        int b = 1;
        String name, degree;

        for(i=0, i < linesize; i += 2)
        {
            int linesize = line.size();
            String line;
            line = JOptionPane.showInputDialog("Please enter tutor name and 
            their highest earned degree.");
            String[] userinput = line.split("\\s+");
            name = userinput[a];
            degree = userinput[b];
            a++;
            b++;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:00:50.533

您的选择是：

`i++; i++;`（您不能在`for`循环构造中使用它，因为您需要一条语句。）

`i += 2;`

`i = i + 2;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:02:16.407

```
 String line;
    line = JOptionPane.showInputDialog("Please enter tutor name and 
    their highest earned degree.");
    String[] userinput = line.split("\\s+");

    for(int i=0, i < userinput.length; ){
    String name = userinput[i++];
    String degree = userinput[i++]; 
```

...

```
} 
```

# jquery - ajax 发布错误：NETWORK_ERR：XMLHttpRequest 异常 101

> ID：15669177
> 
> 赞同：5
> 
> 时间：2013-03-27T20:50:39.900
> 
> 标签：jquery, ajax, http-post

我有以下 ajax 帖子：

```
$.ajax( {
    type: "POST",
    url: "http://192.168.7.9/api",
    dataType: 'json',
    data: { username: "john.doe", password: "123456", method: "search_samples" },
    success: function ( data ) {
       // Never get here
    },
    error: function ( XMLHttpRequest, textStatus, errorThrown ) {
        // Always here: if async true, errorThrown has no message
        // otherwise I se the NETWORK_ERR message
    }
} ); 
```

它返回此错误：NETWORK_ERR: XMLHttpRequest Exception 101。

我已经阅读了一堆关于此错误的 SO 帖子，大多数建议我将 async 设置为 true。这确实删除了错误消息 - 但它仍然是一个错误，我从来没有得到有效的数据。它似乎只是删除了无用的错误消息。

在提琴手中，在同一台开发机器上，这可以完美运行-这是 chrome 问题吗？产地问题？我的语法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:07:32.223

好的，您似乎遇到了[相同来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的问题。按照您的操作方式，您无法从与托管应用程序的服务器不同的服务器访问 AJAX 数据。

为此，您要么必须将`http://192.168.7.9/api`功能移动到服务器上，要么使用 JSONP 传输数据。[这](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)是一个如何执行此操作的示例。

# bash - 循环从bash中的列表中减去一个字符串

> ID：15669179
> 
> 赞同：2
> 
> 时间：2013-03-27T20:50:43.187
> 
> 标签：bash, for-loop

我有一个字符串列表（a_001 a_002 a_003 等），我想在命令中使用它，每次运行时减去一个字符串。也就是说，我想运行一个循环，其中第一次包含 a_002 和 a_003，然后是 a_001 和 a_003，然后是 a_001 和 a_002。这可以在bash中设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:57:26.400

试试这个 ：

```
#!/bin/bash

x=( a_001 a_002 a_003 )

set -- "${x[@]}"

while [[ $@ ]]; do
    echo "command $@"
    shift
done 
```

是你所期望的吗？

## 输出

```
command a_001 a_002 a_003
command a_002 a_003
command a_003 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:10:18.030

给定一组字符串`S`，你想`S - {x}`为每个`x`in使用`S`。

这是一种方法：

```
 S=( a_001 a_002 a_003 )
 set -- "${S[@]}"
 for x; do
     shift                          # Removes x from the positional arguments
     echo "Use $@ without $x"       # Some action involving `S - {x}`
     set -- "$@" "$x"               # Put x back on the end, put
 done 
```

# api - 如何刷新 LinkedIn 授权令牌

> ID：15669181
> 
> 赞同：4
> 
> 时间：2013-03-27T20:50:43.937
> 
> 标签：api, grails, linkedin

我有一个 grails 应用程序，我想将我的用户帐户连接到他们的 LinkedIn 帐户。

所以我的步骤是：

*   让用户单击重定向到的按钮：

> [https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id=MY_API_KEY&scope=r_network&state=SOME_TEXT&redirect_uri=MY_REDIRECT_URI](https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id=MY_API_KEY&scope=r_network&state=SOME_TEXT&redirect_uri=MY_REDIRECT_URI)

*   然后 LinkedIn 重定向到指定的 redirect_uri，我将授权代码作为响应中的参数。使用该代码，我将发布到：

> [https://www.linkedin.com/uas/oauth2/accessToken?grant_type=authorization_code&code=MY_AUTHORIZATION_CODE&redirect_uri=SAME_REDIREC_URI_AS_BEFORE&client_id=MY_API_KEY&client_secret=MY_API_SECRET](https://www.linkedin.com/uas/oauth2/accessToken?grant_type=authorization_code&code=MY_AUTHORIZATION_CODE&redirect_uri=SAME_REDIREC_URI_AS_BEFORE&client_id=MY_API_KEY&client_secret=MY_API_SECRET)

*   这就像魅力！我获得了**访问令牌**，并将其与到期日期一起保存在用户域类中。

现在我的问题来了，当我想要一段代码在访问令牌过期之前刷新访问令牌的逻辑以避免用户不时点击按钮。我知道您将帐户链接到 LinkedIn 并且无需再次刷新令牌的应用程序。

在文档中：http: [//developer.linkedin.com/documents/handling-errors-invalid-tokens](http://developer.linkedin.com/documents/handling-errors-invalid-tokens)你可以找到一个名为**Refreshing Access Tokens**的部分，上面写着：

> 刷新访问令牌非常简单，并且可以在没有为用户显示授权对话框的情况下进行。换句话说，这是一个不会影响应用程序用户体验的无缝过程。
> 
> 只需让您的应用程序通过授权流程，以获取具有额外 60 天生命周期的新访问令牌。

那么，如果从用户单击按钮开始，我该如何遵循上述相同的过程。

我尝试使用来自 groovy 的*HTTPClient*类进行 GET，如下所示：

```
new RESTClient(accessTokenRequestUrl, ContentType.URLENC) 
```

其中 accessTokenRequestUrl 与上面在按钮 href 中使用的相同。这最终应该调用我的redirect_uri，我使用授权代码来请求访问令牌，但它永远不会到达那一点。

我已经尝试使用 Firefox 的 RESTClient 插件，它工作正常，但如果调用是从应用程序内完成的，它就不行。

有什么想法吗？提前致谢！

干杯，

胡安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:53:50.740

如果您使用 Linkedin JavaScript API，则访问令牌将自动刷新，无需任何用户干预。确保在您设置的初始化字符串内，`authorize: true`以便按如下方式无缝完成刷新：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: YOUR_KEY_HERE
  authorize: true
</script> 
```

# php - 回复未正确填写的电子邮件

> ID：15669182
> 
> 赞同：0
> 
> 时间：2013-03-27T20:50:49.010
> 
> 标签：php, phpmailer

当我点击回复按钮时，我希望能够回复使用 $email 而不是我用来发送表单的电子邮件 (someone@gmail.com) 发送电子邮件的用户。名称是正确的，只是不是电子邮件 [http://oi50.tinypic.com/1z3auc0.jpg](http://oi50.tinypic.com/1z3auc0.jpg) 现在我认为这些代码应该可以工作，但事实并非如此！我究竟做错了什么？

```
 $mail->From     = $email;
   $mail->FromName = $name;
   $mail->SetFrom($email, $name); 
```

这是完整的邮件。

```
 $mail = new PHPMailer;
    $mail->IsSMTP();                     // Set mailer to use SMTP
    $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only
    $mail->SMTPAuth = true;             // Enable SMTP authentication
    $mail->SMTPSecure = 'ssl';          // Enable encryption, 'ssl' also accepted
    $mail->Host = 'smtp.gmail.com';     // Specify main and backup server
    $mail->Port = 465;        // specify port
    $mail->Username = 'someone@gmail.com';      // SMTP username
    $mail->Password = 'password';                    // SMTP password
    $mail->WordWrap = 50;                                 // Set word wrap to 50   
    $mail->IsHTML(true);                                  // Set email format to HTML
    $mail->Subject = 'Quick Comment';
    $mail->AltBody = 'This is the body in plain text for non-HTML mail clients';

   // gets info from form
   $name = $_POST['name'] ;
   $email = $_POST['email'] ;
   $phone = $_POST['phone'] ;
   $message = $_POST['message'] ;

    // defines how message looks in email
   $mail->Body="
   Name: $name<br>
   Telephone: $phone<br>
   Email: $email<br>
   -------------------<br>
   Message:<br>
   $message";

    // makes email reply to user
   $mail->From     = $email;
   $mail->FromName = $name;
   $mail->SetFrom($email, $name);
   $mail->AddAddress('someone@gmail.com');  // send to

if(!$mail->Send()) {
   echo 'Message could not be sent.';
   echo 'Mailer Error: ' . $mail->ErrorInfo;
   exit;
}

echo 'Message has been sent';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:59:54.167

大多数邮件服务器不允许您位于“发件人”标头中。这是一件好事，因为垃圾邮件过滤器会对撒谎做出反应。无论您做什么，他们要么将您的邮件地址强制放入“发件人”标头，要么拒绝将其发送出去，或者其他疯狂的东西。

“回复”标题似乎在您的屏幕截图中设置正确。它是唯一有效的标题，可以使电子邮件的回复转到与最初发送电子邮件的地址不同的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:08:07.317

我认为这篇文章对您有用： [phpmailer：仅使用“回复”地址回复](https://stackoverflow.com/questions/10396264/phpmailer-reply-using-only-reply-to-address?rq=1) 我认为 AddReplyTo() 函数是您需要的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:09:01.823

就像是`$mail->AddReplyTo('example@example.com', 'Reply to name');`

# python - 使用 IPython 作为有效的调试器

> ID：15669186
> 
> 赞同：3
> 
> 时间：2013-03-27T20:51:01.700
> 
> 标签：python, ipython

如何在我的代码中嵌入 IPython shell 并让它**自动显示调用它的行号**和**函数**？

我目前有以下设置来在我的代码中嵌入 IPython shell：

```
from IPython.frontend.terminal.embed import InteractiveShellEmbed
from IPython.config.loader import Config

# Configure the prompt so that I know I am in a nested (embedded) shell
cfg = Config()
prompt_config = cfg.PromptManager
prompt_config.in_template = 'N.In <\\#>: '
prompt_config.in2_template = '   .\\D.: '
prompt_config.out_template = 'N.Out<\\#>: '

# Messages displayed when I drop into and exit the shell.
banner_msg = ("\n**Nested Interpreter:\n"
"Hit Ctrl-D to exit interpreter and continue program.\n"
"Note that if you use %kill_embedded, you can fully deactivate\n"
"This embedded instance so it will never turn on again")   
exit_msg = '**Leaving Nested interpreter'

# Put ipshell() anywhere in your code where you want it to open.
ipshell = InteractiveShellEmbed(config=cfg, banner1=banner_msg, exit_msg=exit_msg) 
```

这使我可以在我的代码中的任何地方启动一个完整的 IPython shell，只需使用`ipshell()`. 例如，下面的代码：

```
a = 2
b = a
ipshell() 
```

在调用者范围内启动一个 IPython shell，允许我检查 和 的`a`值`b`。

我想做的是在我调用时**自动运行**以下代码`ipshell()`：

```
frameinfo = getframeinfo(currentframe())
print 'Stopped at: ' + frameinfo.filename + ' ' +  str(frameinfo.lineno) 
```

这将始终显示 IPython shell 启动的上下文，以便我知道我正在调试的文件/函数等。

也许我可以使用装饰器来做到这一点，但到目前为止我的所有尝试都失败了，因为我需要**在原始上下文**`ipshell()`中运行（以便我可以访问和从 IPython shell 访问）。**`a``b`**

 **我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T23:03:28.927

您可以`ipshell()`从另一个用户定义的函数中调用，例如`ipsh()`

```
from inspect import currentframe

def ipsh():
    frame = currentframe().f_back
    msg = 'Stopped at {0.f_code.co_filename} and line {0.f_lineno}'.format(frame)
    ipshell(msg,stack_depth=2) # Go back one level! 
```

然后`ipsh()`在您想进入 IPython shell 时使用。

### 解释：

*   `stack_depth=2`在检索新 IPython shell 的命名空间时要求`ipshell`上一级（默认为`1`）。
*   `currentframe().f_back()`检索**前一帧**，以便您可以打印`ipsh()`调用位置的行号和文件。**

# java - 声音不会播放两次

> ID：15669187
> 
> 赞同：2
> 
> 时间：2013-03-27T20:51:05.487
> 
> 标签：java, audio

我已经工作了好几天试图修复我的程序。它成功播放了一首歌曲，但它无法重新播放该歌曲。

奇怪的是，在尝试创建一个简短的、独立的示例时，我发现相同的代码可以播放一首歌曲、停止，然后播放另一首不同的歌曲，但不会连续两次播放同一首歌曲。鉴于在我的应用程序上，我不知道用户是否会再次选择同一首歌曲，因此*必须*关闭并重新打开流。

这是一个演示损坏代码的示例（不会再次播放歌曲）：

```
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.LineUnavailableException;
import java.io.IOException;

public class test{
    static Clip musicplayer;
    static AudioInputStream currentSong;

    public static void main(String[] args){
        try{
            musicplayer = AudioSystem.getClip();
            AudioInputStream ais = AudioSystem.getAudioInputStream(new test().getClass().getResource("test.wav")); 
            playMusic(ais);
            System.out.println("Playing Music");
            Thread.sleep(4000);
            stopMusic();
            System.out.println("Stopping Music");
            Thread.sleep(3000);
            playMusic(ais);
            System.out.println("Playing Music for the Second time");
            Thread.sleep(5000);
            System.out.println("Finished Program");
        }catch(Exception ex){ex.printStackTrace();}
    }

    public static void playMusic(AudioInputStream music){
         if(music == null)
             return;

         if(currentSong != null){
             if(currentSong.equals(music))
                 return;
         }

         currentSong = music;

         try {  
               musicplayer.setFramePosition(0);
               musicplayer.stop();
               musicplayer.open(currentSong);    
        } catch (LineUnavailableException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
        musicplayer.loop(Clip.LOOP_CONTINUOUSLY);
    }

    public static void stopMusic(){
        musicplayer.close();            
    }
} 
```

如果我添加另一个 AudioInputStream 并将其作为我的第二首歌曲播放，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:57:10.550

这段代码有两个问题

当前歌曲永远不会重置，因此如果您尝试两次播放相同的流，它将中止。

```
...
     if(currentSong != null){
         if(currentSong.equals(music))
             return;
     }

... 
```

清除它。

```
public static void stopMusic(){
    musicplayer.close();            
    currentSong = null;  // we do not have a current song anymore.
} 
```

另一个问题是您没有重置输入流。最简单的方法是重新加载它。流不是您可以赋予某些东西的数组，它会神奇地从一开始就开始。任何访问 Stream 的东西都只能得到下一个，如果你给一个 Stream 下一位是结束的东西，那么什么都不会发生。

```
 AudioInputStream ais = AudioSystem.getAudioInputStream(new test().getClass().getResource("test.wav")); 
    playMusic(ais);

    ais = AudioSystem.getAudioInputStream(new test().getClass().getResource("test.wav")); 
    playMusic(ais); 
```

要注意的一件事是 AudioInputStream 没有实现 equals 所以

```
 AudioSystem.getAudioInputStream(new test().getClass().getResource("test.wav")).equals( AudioSystem.getAudioInputStream(new test().getClass().getResource("test.wav"))) 
```

将评估为假。

# c# - 显示多个相关 ViewModel 的 MVC 页面使用 ajax 更新

> ID：15669191
> 
> 赞同：2
> 
> 时间：2013-03-27T20:51:31.633
> 
> 标签：c#, asp.net-mvc, razor, mvvm, viewmodel

我有一些简单的列表管理页面，每个页面都是针对以下 ViewModel 进行强类型化的

```
public class ListManagementIndexViewModel
{
    public Guid Id { get; set; }
    public string Name { get; set; }
} 
```

我有类别、优先级、状态和其他一些下拉列表的视图，有一些 AutoMapper 配置可确保`Name`属性绑定到域模型可能对实体具有的任何内容。这个想法是系统管理员能够管理这些列表中的内容（新建、编辑现有和删除）。这给了我一个这样的索引视图：

![优先列表管理](../Images/099e544672606944f5e4712ad5f4958d.png)

我想将所有这些放在一个页面上，而不是为每个页面设置单独的视图。~~我*认为* *可能*`partials`是这样做的方法，但我不清楚这是否是推荐的方法？~~

 *我也不清楚如何处理控制器。就目前情况而言；使用 PriorityController 我有以下索引`ActionResult`

```
public ActionResult Index(string searchString, string currentFilter, int? page)
    {
        if (Request.HttpMethod == "GET")
            searchString = currentFilter;

        ViewBag.CurrentFilter = searchString;
        int pageNumber = page ?? 1;

        var query = Session.QueryOver<Priority>();

        if (!string.IsNullOrWhiteSpace(searchString))
            query.WhereRestrictionOn(p => p.PriorityName)
                 .IsInsensitiveLike(String.Format("%{0}%", searchString));

        var result = query.OrderBy(p => p.PriorityName).Asc.List();

        var viewModel = AutoMapper.Mapper.Map<IEnumerable<Priority>, 
                          IEnumerable<ListManagementIndexViewModel>>(result)
                                  .ToPagedList(pageNumber, PageSize);

        return View(viewModel);
    } 
```

虽然我*可以*将其移至~~“主”~~单一列表管理页面，但我也需要对其他列表类型执行相同操作，但是我的 ViewModel 需要看起来像什么，目前有 5 个列表需要管理，所以我有5 个控制器做的事情完全相同，只是类型不同。如果我将所有这些都放在 1 个~~“主”~~单一视图页面上，我会以某种方式需要将所有 5 个 PagedList 集合填充到 1 个 ViewModel 中，然后在~~“主”~~单一版本中将数据传递给相关的~~`Partials`~~剃须刀代码？

另外我将如何处理其他控制器操作（编辑、创建和删除）？

**更新**
我的想法 - 如果统一/单一视图页面 ViewModel 是：

```
public class ListManagementIndexViewModel
{
    public Dictionary<string, IPagedList<T>> ManagementLists { get; set; }
} 
```

和 SinglePageController 是

```
public ActionResult Index(string searchString, string currentFilter, int? page)
{
    var priorities = GetPriorities(searchString, currentFilter, page);
    var categories = GetCategories(searchString, currentFilter, page);

    Dictionary<string, IPagedList> viewModel
       = new Dictionary<string, IPagedList<T>>();

    viewModel.Add("Priorities", priorities);
    viewModel.Add("Categories", categories);
    return View(viewModel);
} 
```

我可以将现有逻辑移出私有方法

```
private IPagedList<Priority> GetPriorities(string searchString, 
                                           string currentFilter, int? page) 
{
    if (Request.HttpMethod == "GET")
        searchString = currentFilter;

    ViewBag.CurrentFilter = searchString;
    int pageNumber = page ?? 1;

    var query = Session.QueryOver<Priority>();

    if (!string.IsNullOrWhiteSpace(searchString))
        query.WhereRestrictionOn(p => p.PriorityName)
             .IsInsensitiveLike(String.Format("%{0}%", searchString));

    var result = query.OrderBy(p => p.PriorityName).Asc.List();

    var priorities = AutoMapper.Mapper.Map<IEnumerable<Priority>, 
                          IEnumerable<ListManagementIndexViewModel>>(result)
                                  .ToPagedList(pageNumber, PageSize);

    return priorities;
} 
```

然后在我的视图中，模型将包含`ManagementLists`集合，我可以`foreach`将结果放入 html 表中，就像我目前正在做的那样，但在单独的页面上。

但是，对结果进行分页会导致所有列表表分页，而不仅仅是优先级表。我将如何使用 Ajax 进行每次更新，因此在一个表中分页只会更新该表中的列表？如果我要重新包含搜索，它当前在 ActionResult 方法中，但未在 UI 中实现，也需要仅更新 Priorities 表。例如，如果我在优先级搜索中输入“高”，我只想查询优先级表并更新它，而不是对数据库运行 5 次查询以在类别或任何其他列表中搜索“高”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:59:58.653

**如果您打算再次使用它，**我认为您应该只使用部分。我经常看到人们创建它们来帮助分解代码，但它们再也没有被使用过。

将 5 个列表放在一个页面下会更有条理，这样它们都在一个模型中，并由一个控制器/模型*集中管理。**

# php - 在共享服务器上使用 PDFtk

> ID：15669192
> 
> 赞同：0
> 
> 时间：2013-03-27T20:51:31.740
> 
> 标签：php, pdf, command-line, pdftk

我正在研究使用[PDFtk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)，但我有几个问题要捆绑在一起。（让我知道是否应该单独询问他们。）

1.  如何将它安装在我的共享 Web 服务器上？我使用[WebHostingHub](http://www.webhostinghub.com/)，他们的服务器运行 CentOS。
2.  你如何使用它？我不确定如何通过 PHP 运行命令行工具，这是我认为我需要做的。我没有任何将任何命令行作为这样的自动化过程运行的经验。（我使用 domPDF 将表单结果转换为 .pdf，但我需要在用户上传的单独文档的末尾附加一个附加页面。这就是我使用 PDFtk 的原因。）

请注意，我的服务器不提供 ssh 访问。但是，如果绝对必要，我可以联系支持人员，他们可能会为我安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-21T00:01:37.703

> 如何将它安装在我的共享 Web 服务器上？

您可以在应用程序中包含二进制文件，然后将环境路径设置为`bin`包含二进制文件的文件夹。

```
$ mkdir -p [my_project]/vendor/pdftk/lib [my_project]vendor/pdftk/bin
$ cd /tmp
$ git clone https://github.com/millie/pdftk-source.git
$ cd pdftk-source
$ tar xzvf pdftk.tar.gz
$ mv bin/pdftk [my_project]/vendor/pdftk/bin/
$ mv lib/libgcj.so.12 [my_project]/vendor/pdftk/lib/
$ cd [my_project] 
```

> 你如何使用它？

首先，阅读[PDF Labs 文档](http://www.pdflabs.com/docs/pdftk-man-page/)，如果您对如何执行特定操作有疑问，请发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T01:32:55.333

首先，您需要具有 root 访问权限才能安装 PDFtk，而您没有使用共享主机帐户。我能找到的唯一一家在所有服务器上都预装了它的共享托管公司是 BlueHost.com。我从一个共享主机帐户开始，现在拥有自己的 VPS。当您获得他们的帐户时，您无需在服务器端进行任何设置，所有内容都已预先安装。

下面是 PDFtk 手册页的链接。你也可以谷歌很多代码示例。 [http://www.pdflabs.com/docs/pdftk-man-page/](http://www.pdflabs.com/docs/pdftk-man-page/)

# android - 旋转 ImageView 及其背景而不裁剪

> ID：15669201
> 
> 赞同：7
> 
> 时间：2013-03-27T20:51:45.197
> 
> 标签：android, imageview

我一直在寻找很多，但我无法为我的问题找到解决方案。我不能使用`android:rotation`，因为我希望这个应用程序与 11 版本以下的 Android API 兼容。我的问题与此类似：[Rotating a view in Android](https://stackoverflow.com/questions/1930963/rotating-a-view-in-android)

我已经这样做了：

```
@Override
public void draw(Canvas canvas) {
    canvas.save();
    Drawable d = getDrawable();
    canvas.rotate(-10, d.getIntrinsicWidth() / 2, d.getIntrinsicHeight() / 2);
    super.draw(canvas);
    canvas.restore();
} 
```

ImageView 是我放置图像和一些文本的 RelativeLayout 的一部分。

但是图像在边缘被裁剪。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-27T21:26:35.703

您只需添加：

```
android:clipChildren="false" 
```

给父母`ViewGroup`。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    android:layout_width="300dp"
    android:layout_height="300dp"
    android:clipChildren="false">
    <com.yourcompany.views.RotateImageView
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:background="@android:color/white"
        android:src="@drawable/ic_launcher" />
</FrameLayout> 
```

旋转图像视图：

```
public class RotateImageView extends ImageView {
    @Override
    public void draw(Canvas canvas) {
         canvas.save();
         int height = canvas.getHeight();
         int width = canvas.getWidth();
         canvas.rotate(45, height / 2, width / 2);
         super.draw(canvas);
         canvas.restore();
    }
} 
```

它在 API 级别 11 之前提供了一个干净的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T15:34:07.513

尝试将您的 ImageView 添加为 FrameLayout 的子视图，并将 FrameLayouts 的宽度和高度设置为与您的 ImageView 相同。[在此处](https://stackoverflow.com/a/16465481/2266500)查看我的类似答案。原始答案从 Pavlo Viazovskyy 的帖子转达[在这里](https://stackoverflow.com/a/12528483/2266500)。希望这可以帮助！

# c# - 何时在 C# 中使用 Properties.Settings.Default

> ID：15669205
> 
> 赞同：0
> 
> 时间：2013-03-27T20:51:53.233
> 
> 标签：c#, .net, properties, configuration, settings

在 C# 中使用 Properties.Settings.Default 配置设置的最佳实践是什么？我经常看到它，但我经常不知道什么时候使用它，什么时候应该硬编码值。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:55:42.093

基本上，我尽量避免在代码中硬编码值，主要是因为如果需要更改它们的值，则需要重新编译应用程序。

拥有某种通过公共属性公开所有设置的通用对象通常是有益的，这样您就可以在整个应用程序中以相同的方式引用设置。

例子：

```
public static SomeReferenceClass
{
     public static string TimeOfDay { get{ return Properties.Settings.Default.TimeOfDay; }}
} 
```

然后稍后调用它

```
SomeReferenceClass.TimeOfDay; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:57:09.910

我的经验法则一直是，如果属性的值需要在不修改代码的情况下更改，则将它们设为外部/可配置属性。如果您永远不需要更改它们的值，那么它们就是一个常量并且可以进行硬编码。

基本上，如果需要配置/更改这些值，请将它们放入`Properties.Settings.Default`. 您可以对常量进行硬编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T20:57:14.107

就个人而言，当未指定或保留用户或应用程序设置时，我使用默认设置。

我永远不会硬编码可能会根据环境、用户、应用程序等任何数量的变量而改变的设置。

我通常创建实现接口的设置提供程序。这样，您可以轻松更改如何收集配置设置，而无需更改业务逻辑。

# c# - 使用 Linq 找到嵌套属性？

> ID：15669206
> 
> 赞同：0
> 
> 时间：2013-03-27T20:51:54.240
> 
> 标签：c#, linq, reflection, lambda

我有一个如下所示的对象模型。

```
public class Class1
{
    public Class2 @Class2;
}

public class Class2
{
    public Class3 @Class3;
    public Class4 @Class4;
}

public class Class3
{
    public Class5 @Class5;
}

public class Class4
{
    public Class5 @Class5;
}

public class Class5
{
    public Class6 @Class6;
}

public class Class6
{
} 
```

谁能推荐一种迭代层次结构的方法，直到我可以获得 Class5 的实例，它是 Class4 的属性？在 VS2012、C# 上使用 .NET 4.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:09:56.733

执行此操作的典型方法是使用访问者模式。在您的情况下，您的 Visit 方法将使用反射来“破解”传入的类型。

这里有一个很好的[例子来](http://msdn.microsoft.com/en-au/library/bb882521%28v=vs.90%29.aspx)说明如何构造一个表达式树访问者，它正在做与你想要的类似的事情（层次结构爬行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:20:37.583

假设“入口点”位于层次结构的“顶部”（例如`Class1`或`Class2`），我可以想到一些扩展方法，这些方法类似于建议的访问者模式。

```
public static class FieldAndTypeExtensions {
    public static IEnumerable<FieldInfo> walk(this Type t) {
        foreach (FieldInfo f in t.GetFields()) {
            foreach (FieldInfo nextField in f.walk()) {
                yield return nextField;
            }
        }
    }
    public static IEnumerable<FieldInfo> walk(this FieldInfo f) {
        yield return f;
        FieldInfo[] fieldInfos = f.FieldType.GetFields();
        foreach (FieldInfo nextField in fieldInfos) {
            foreach (FieldInfo anotherNext in nextField.walk()) {
                yield return anotherNext;
            }
        }
    }
} 
```

可能的用法是：

```
Type t = typeof(Class1);
var allFieldsFound = from field
                     in t.walk()
                     where field.FieldType == typeof(Class5)
                     select field;
var firstFound = allFieldsFound.FirstOrDefault(); 
```

两者`firstFound`和其中的条目`allFieldsFound`都是类型[`FieldInfo`](http://msdn.microsoft.com/en-us/library/d8c2tewk.aspx)，因此您可以通过其`DeclaringType`属性获取声明（封闭）类。

也许这不是最优雅的解决方案，但可能是一个基本的想法。

# javascript - 谷歌地图 - 动画

> ID：15669215
> 
> 赞同：0
> 
> 时间：2013-03-27T20:52:08.893
> 
> 标签：javascript, google-maps

我整天都在使用 Google Maps API。我可以拉入所有标记并将自定义图标放在大约 50 点上。但是，我无法为标记滴设置间隔。我究竟做错了什么？

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Golf</title>
    <script src="http://maps.google.com/maps/api/js?sensor=false"
            type="text/javascript"></script>

<style type="text/css">

.mapInfo {
  font-size:12px; 
  text-transform:capitalize;
}

</style>

    <script type="text/javascript">
    //<![CDATA[ 

    function load() {

      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(41.449799, -86.241248),
        zoom: 9,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("golf-xml.php", function(data) {

        var xml = data.responseXML;

        var markers = xml.documentElement.getElementsByTagName("marker");

        for (var i = 0; i < markers.length; i++) {
          //var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("value");
          var value = markers[i].getAttribute("value");
          var town = markers[i].getAttribute("town");

          //var erase = markers[i].getAttribute("erase");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          //var html = "<span class='mapInfo'><b>Address:</b> " + address + ", " + town + "<br/><b>Price:</b> " + value + "</span>";
          var html = "<span class='mapInfo'><b>Price:</b> " + value + "<br/><b>Address:</b> " + address + ", " + town + "</span>";

          var icon = customIcons[type] || {};
          //alert (point);

          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: '1364428325_golf.png',
            animation: google.maps.Animation.DROP,
            shadow: icon.shadow
          });

          bindInfoWindow(marker, map, infoWindow, html);
        }

      });
    }

    function drop() {
      for (var i =0; i < point.length; i++) {
        setTimeout(function() {
          marker();
        }, i * 200);
      }
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>
  </script>

  </head>

  <body onLoad="load()" style="margin: 0; padding: 0;" >
  <div class="land"><span class="land">Copy</span>
      <br />
  </div>
    <div id="map" style="width: 100%; height: 620px"></div>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:40:01.910

试试这个...（更改第 34 行中的标记图标路径）

```
<html>
<head>
    <style type="text/css">
        html {
          height: 100%
        }
        body {
          height: 100%;
          margin: 0;
          padding: 0
        }
        #map_canvas {
          height: 100%
        }
     </style>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdTuWJjEUMvQZ6VVPGksE12XNgQgs__Qk&sensor=false&libraries=visualization"></script>
    <script language="javascript">

   var myLatlng = new google.maps.LatLng(41.7833, 5.2167);
   var markersArray = [
            new google.maps.LatLng(20.11, 73.06),
            new google.maps.LatLng(10.11, 77.18),
            new google.maps.LatLng(33.11, 75.18),
            new google.maps.LatLng(25.11, 77.18),
                    new google.maps.LatLng(31.37, 74.55),
                    new google.maps.LatLng(22.56, 88.36),
                    new google.maps.LatLng(12.98, 77.58) 
                 ];

   var markers = [];
   var iterator = 0;
   var map; 
   var image = '/home/aravi/heatmap/gdot.png' ;

  function drop() {
             for ( i = 0; i < markersArray.length; i++) 
              {
                    setTimeout(function() 
                 {
                   addMarker();
                 }, i*300);
              }
              }

  function addMarker() {

    markers.push(new google.maps.Marker({
      position: markersArray[iterator],
      map: map,
      draggable: false,
      opacity: 0.5,
     // animation: google.maps.Animation.DROP,
      icon: image
    }));
    iterator++;
      }
function view() {
              var styles = [
    {
      stylers: [
      { hue: "#e0e0e0" },
      { saturation: -100 },
      {invert_lightness: false}
      ]
    },{
      featureType: "all",
      elementType: "geometry.fill",
      stylers: [
        { visibility: "on" }
      ]
    }
      ];
        var mapOptions = {
                   zoom:2,
                   center: myLatlng,    
                   mapTypeId: google.maps.MapTypeId.ROADMAP, 
                               opacity: 0.2,
                               draggable: false,
                   disableDefaultUI: true,
                   styles: styles
                     };
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        drop ();    
}
</script>

</head>
<body onLoad="view()">
    <div id="map_canvas" style="width:53%; height:70%; margin-left: 500px; margin-top: 38px;"> </div>       
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T17:25:58.480

把它放在一个单独的`function`例如`addMarker()`

```
function addMarker()
{
var marker = new google.maps.Marker({
map: map,
position: point,
icon: '1364428325_golf.png',
animation: google.maps.Animation.DROP,
shadow: icon.shadow
});
} 
```

然后`addMarker()`在你的`setTimeout()`函数中调用

在你的代码中，我看不到你在 setTimeOut() 中描述的方法 marker()

您可以随时访问[https://gist.github.com/donpaul120/dc97f4ec4785521b3a66](https://gist.github.com/donpaul120/dc97f4ec4785521b3a66)并实施它。

我希望这有帮助...

# asp.net - 从查询获取 SCOPE_IDENTITY() 到 dataTable 的问题

> ID：15669218
> 
> 赞同：0
> 
> 时间：2013-03-27T20:52:20.523
> 
> 标签：asp.net, sql-server, c#-3.0

这是我正在构建的一个例程，用于处理 SQL Server 中的 5 个表的插入和选择。Select 语句返回具有行数的数据表，而 Insert 则不返回。我相信问题在于 SQLAdapter 和 DataTable 之间的绑定。如何从插入数据表中的一行中获取 SCOPE_IDENTITY？我知道我可以将它作为 int 提取，但代码的主体需要从中返回数据表。

```
 public DataTable dbQuery(string queryType, modelsClass model)
{
    string query = null;
    char subQueryType = 'd';
    SqlConnection connectionString = new SqlConnection(ConfigurationManager.ConnectionStrings["inventory_v2ConnectionString"].ConnectionString);
    SqlCommand queryCommand = new SqlCommand(@query, connectionString);
    SqlDataAdapter sqlAdapt = new SqlDataAdapter();
    sqlAdapt.Dispose();
    DataTable dt = new DataTable("return");

    try
    {

        switch(queryType)
        {
            case "OEMSelect":
                {

                    query = "SELECT [ID] FROM [Models_OEMs] WHERE Manufacturer = @OEM";
                    subQueryType = 'S';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@OEM",model.OEM);

                    break;
                }
            case "PriSelect":
                {
                    query = "SELECT [ID]FROM [Models_PriModels] WHERE PriModel = @PriModel";
                    subQueryType = 'S';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@PriModel", model.PriModel);
                    break;
                }
            case "SecSelect":
                {
                    query = "SELECT [ID] FROM [Models_SecModels] WHERE SecModel = @SecModel";
                    subQueryType = 'S';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@SecModel", model.SecModel);
                    break;
                }
            case "FormSelect":
                {
                    query = "SELECT [ID] FROM [Models_FormFactor] WHERE Form = @Form";
                    subQueryType = 'S';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@Form", model.FormFactor);
                    break;
                }
            case "ModelSelect":
                {
                    //Does Model Already exist?
                    query = "SELECT [ID] FROM [Models_OEMs] WHERE Manufacturer = @Manufacturer AND PriModel = @PriModelID AND SecModel  = @SecModelID AND FormFactor = @FormFactorID";
                    subQueryType = 'S';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@Manufacturer", model.OEMID);
                    queryCommand.Parameters.AddWithValue("@PriModel", model.PriModelID);
                    queryCommand.Parameters.AddWithValue("@SecModel", model.SecModelID);
                    queryCommand.Parameters.AddWithValue("@FormFactor", model.FormFactorID);
                    break;
                }
            case "OEMInsert":
                {
                    query = "INSERT INTO Models_OEMs (Manufacturer) VALUES (@OEM); SELECT SCOPE_IDENTITY();";
                    subQueryType = 'I';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@OEM", model.OEM);

                    break;
                }
            case "PriInsert":
                {
                    query = "INSERT INTO Models_PriModels (PriModel) VALUES (@PriModel); SELECT SCOPE_IDENTITY();";
                    subQueryType = 'I';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@PriModel", model.PriModel);
                    break;
                }
            case "SecInsert":
                {
                    query = "INSERT INTO Models_SecModel (SecModel) VALUES (@SecModel); SELECT SCOPE_IDENTITY();";
                    subQueryType = 'I';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@SecModel", model.SecModel);
                    break;
                }
            case "FormInsert":
                {
                    query = "INSERT INTO Models_FormFactor (Form) VALUES (@FormFactor); SELECT SCOPE_IDENTITY();";
                    subQueryType = 'I';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@FormFactor", model.FormFactor);
                    break;
                }
            case "ModelInsert":
                {
                    query = "INSERT INTO Models (Manufacturer, PriModel, SecModel, FormFactor, Active) VALUES (@Manufacturer, @PriModel, @SecModel, @FormFactor, 'Y'); SELECT SCOPE_IDENTITY();";
                    subQueryType = 'I';
                    queryCommand.Parameters.Clear();
                    queryCommand.Parameters.AddWithValue("@Manufacturer", model.OEMID);
                    queryCommand.Parameters.AddWithValue("@PriModel", model.PriModelID);
                    queryCommand.Parameters.AddWithValue("@SecModel", model.SecModelID);
                    queryCommand.Parameters.AddWithValue("@FormFactor", model.FormFactorID);

                    break;
                }
            default:
                {
                    subQueryType = 'D';  //Do nothing. The program should never get here.
                    break;
                }

        }

        queryCommand.CommandText = query;

        switch (subQueryType)
        {
            case 'S':
                {
                    sqlAdapt.SelectCommand = queryCommand;
                    connectionString.Open();
                    queryCommand.ExecuteNonQuery();
                    sqlAdapt.Fill(dt);
                    queryCommand.Dispose();
                    connectionString.Close();
                    break;
                }
            case 'I':
                {

                    sqlAdapt.InsertCommand = queryCommand;
                    connectionString.Open();
                    try
                    {
                        DataColumn dc1 = new DataColumn();
                        dc1.DataType = typeof(String);
                        dc1.ColumnName = "ReturnedID";
                        dt.Columns.Add(dc1);
                        DataRow dr = dt.NewRow();
                        dr["ReturnedID"] = queryCommand.ExecuteScalar();
                        dt.Rows.Add(dr);                          
                    }
                    catch(Exception ex)
                    {
                        DEBUG.Text = DEBUG.Text + " Insert failed! Error: " + ex.Message;
                    }
                    queryCommand.Dispose();
                    connectionString.Close();                         
                    break;
                }
            default:
                {
                    break;
                }
        }

        return dt;
    }

    catch (IOException ex)
    {
        DEBUG.Text += "Oops! I errored. : " + ex.Message;
    }
    return dt;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:54:44.713

谢谢@Melanie 让我的大脑跳跃起来......我通过替换解决了这个问题

```
queryCommand.ExecuteScalar(); 
```

和：

```
DataColumn dc1 = new DataColumn();
dc1.DataType = typeof(String);
dc1.ColumnName = "ReturnedID";
dt.Columns.Add(dc1);
DataRow dr = dt.NewRow();
dr["ReturnedID"] = queryCommand.ExecuteScalar();
dt.Rows.Add(dr); 
```

# javascript - 使用 CSS 过滤器后保存图像

> ID：15669221
> 
> 赞同：1
> 
> 时间：2013-03-27T20:52:29.070
> 
> 标签：javascript, image, css, webkit

我正在建立一个新网站，让用户可以对图像应用过滤器（就像 Instagram 一样）。我会用`-webkit-filter`它。

用户必须能够保存过滤后的图像。有什么方法可以使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T20:55:50.977

您不能直接保存图像，但可以在 Canvas 中渲染它们，然后从那里保存。

请参阅：[将带有图像的 HTML5 画布保存为图像](https://stackoverflow.com/questions/12620763/save-html5-canvas-with-images-as-a-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T10:08:00.887

没有直接/直接的方法可以使用 CSS 过滤器导出图像。

按照以下步骤保存/导出应用了 -webkit-filter 的图像：
1\. 将图像渲染到画布：

```
var canvas = document.createElement('canvas');
canvas.id="canvasPhoto";
canvas.width = imageContaainer.width;
canvas.height = imageContaainer.height;
var ctx = canvas.getContext('2d');
ctx.drawImage(imageContaainer, 0, 0, canvas.width, canvas.height); 
```

2.  从画布中获取 ImageData 并应用过滤器。例如：我将对下面的 ImageData 应用灰度滤镜：

    ```
    function grayscale(ctx) {
    var pixels = ctx.getImageData(0,0,canvas.width, canvas.height);
    var d = pixels.data;
    for (var i=0; i<d.length; i+=4) {
        var r = d[i];
        var g = d[i+1];
        var b = d[i+2];
        var v = 0.2126*r + 0.7152*g + 0.0722*b;
        d[i] = d[i+1] = d[i+2] = v
    }
    context.putImageData(pixels, 0, 0);
    } 
    ```

3.  添加事件并使用以下代码触发下载

    ```
    function download(canvas) {
       var data = canvas.toDataURL("image/png");
       if (!window.open(data)) 
       {
           document.location.href = data;
       }
    } 
    ```

# ios - UIButton在返回VC时没有响应removeFromSuperView

> ID：15669225
> 
> 赞同：0
> 
> 时间：2013-03-27T20:52:51.840
> 
> 标签：ios, objective-c, rotation, uibutton, uitabbarcontroller

我有一个以编程方式实现的 UIButton，因为它仅在我旋转设备时才需要。

当我旋转时按钮需要消失，当我去横向时出现。

只要我留在同一个 ViewController 中，我就没有问题。无论如何，我都可以旋转设备，按钮会按预期出现和消失。该应用程序是基于 TabController 的应用程序，当我转到另一个选项卡时，会发生相同的行为。

**这就是问题** 当我回到原来的视图时，按钮出现了，但之后就再也没有消失过。这几乎就像`removeFromSuperView`没有被调用，但即使是，按钮也不会被删除。

任何想法为什么会这样？

```
-(void)autoRotationDetection
{
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter]
     addObserver:self selector:@selector(orientationChanged:)
     name:UIDeviceOrientationDidChangeNotification
     object:[UIDevice currentDevice]];
}

- (void) orientationChanged:(NSNotification *)note
{
    UIDevice * device = note.object;
    switch(device.orientation)
    {
        case UIDeviceOrientationPortrait:
            /* start special animation */
            [_menuButton removeFromSuperview];
            break;

        case UIDeviceOrientationPortraitUpsideDown:
            /* start special animation */
            break;

        default:
            break;
    };
} 
```

然后我打电话

```
-(void)viewWillAppear:(BOOL)animated
{

    [self autoRotationDetection];
} 
```

抱歉应该补充一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:06:37.887

当忽略对 [super viewWillAppear] 的调用时，我已经看到了这种行为（在转到另一个选项卡并再次返回后表现不同）。尝试添加它，看看它是否修复它。

**编辑后：**

我认为一个更简单的方法是只查看 viewWillLayoutSubviews 中的视图边界，每次旋转时都会调用它（其他时候也是如此，但对于像这样的简单事情，这无关紧要） . 在这个例子中，我隐藏或显示而不是删除，但这个概念应该适用于两者。

```
-(void)viewWillLayoutSubviews {
    BOOL portrait = self.view.bounds.size.height > self.view.bounds.size.width;
    if (portrait) {
        self.button.hidden = YES;
    }else{
        self.button.hidden = NO;
    }
} 
```

您可以通过跟踪上次调用此方法时的肖像值来提高效率，并且仅在肖像已更改时才更改按钮的状态。

# jquery - 如何在 Lightbox 2 中限制图像大小

> ID：15669226
> 
> 赞同：1
> 
> 时间：2013-03-27T20:52:55.557
> 
> 标签：jquery, css, lightbox2

我正在使用[`Lightbox 2`](http://lokeshdhakar.com/projects/lightbox2/). 我想知道如何将图像大小限制为`800px`？

我尝试直接在 CSS 中编辑 tje 图像大小，但这导致外部容器仍保持其旧大小......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:44:30.677

如果您希望图像在宽度为 800 像素后停止扩展。试试`.lb-image { max-width: 800px }`吧。

# extjs - Extjs：如何为特定单元添加/删除类？

> ID：15669237
> 
> 赞同：0
> 
> 时间：2013-03-27T20:53:23.327
> 
> 标签：extjs, extjs4

免责声明：我对 Extjs 完全陌生。

我在 ComboBox 上有一个选择侦听器。选择后，我可以设置不同的单元格值：

```
'select': function (combo, records, Opts) {
    e.record.set('value', 'hello world'); //set text for the "value" cell
    .... 
```

挑战在于我可能需要为该单元添加或删除一个类。我无法在 Sencha Docs 中找到如何选择或操作超出设置值的单元格。一种可能性是在列上使用自定义渲染器，但这不能按预期工作（除了文本/值设置正确）。想法取自：[http ://snipplr.com/view/40942/](http://snipplr.com/view/40942/)

```
 ,renderer: function (value, meta, record, rowIndex, colIndex, store) {
            meta.css += ' rw-no-edit';
            return 'hello again'; 
```

为记录上的特定列添加和删除类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T21:31:44.330

到目前为止，我见过的最好的网格样式指南来自裙子：

[http://skirtlesden.com/articles/styling-extjs-grid-cells](http://skirtlesden.com/articles/styling-extjs-grid-cells)

我认为自定义渲染器是适合您的方式。小心返回实际值而不是“hello world”字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:30:34.083

工作解决方案：

```
 ,renderer: function (value, meta, record, rowIndex, colIndex, store) {
            var numberOfEditFields = K.kreports.whereOperators.bh(record.get('operator'), record.get('type'));
            if (!K.kreports.EditView) {
                if (record.get('usereditable') == 'yo1' || record.get('usereditable') == 'yo2') numberOfEditFields = 0;
            }

            //de-emphasize cells that are not needed
            var base_css = 'x-grid-cell x-grid-cell-value';
            meta.tdCls = base_css;
            if(numberOfEditFields === 0) {
                meta.tdCls = base_css+' rw-no-edit'; 
            }

            return value;
        } 
```

# apache - 在 Windows 7 上配置 Apache

> ID：15669242
> 
> 赞同：0
> 
> 时间：2013-03-27T20:53:42.137
> 
> 标签：apache

在上传到实时站点之前，我想在 localhost 上测试一些代码。所以我决定安装 Apache。我正在运行 64 位 Windows 7 企业版。我下载了 httpd-2.0.64-win32-x86-no_ssl.msi。我将它安装在 C:\Program Files (x86)\Apache Group\Apache2 我在安装中将域名和服务器名称设置为 localhost，并在所有其他步骤中使用默认值。在我的配置文件 httpd.conf 中，我有 ServerName localhost:80。

我遵循了在线 apache 安装教程中可以找到的所有内容。但是当我在浏览器中输入 localhost 时，出现 404 错误:(

我知道这种方式很难诊断，但我只是想知道是否有人能发现我错过的重要步骤。

我觉得这可能与我的 64 位机器和长文件夹名称 Program Files (x86) 有关。但是我尝试直接在 C:\Apache 上安装也失败了（甚至在安装过程中出错）。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:19:10.297

终于想通了。Apache 服务没有启动，因为另一个系统进程正在监听 80 端口。参考这两个帖子的解决方案： [http ://forums.zpanelcp.com/archive/index.php/t-5265.html](http://forums.zpanelcp.com/archive/index.php/t-5265.html) [http://www .softaculous.com/board/index.php?tid=1575&title=Apache_won%27t_start 祝大家好运](http://www.softaculous.com/board/index.php?tid=1575&title=Apache_won%27t_start) ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:15:46.783

如果您收到 404 错误，则表明网络服务器正在运行，或者您无法启动它*，并且*您机器上的现有网络配置存在严重问题。

后者更有可能——您可以通过查看它生成的日志来检查这一点——访问和错误日​​志中都应该有条目。

如果问题是路径中的空格（您将在启动时从添加到 error_log 的条目中看到与 documentroot 相关的错误）然后（IIRC）您可以将路径括在双引号中或使用文档的路径没有空格的根目录 - 内容不必位于您安装 Apache 的目录之下 - 事实上，使用不同的路径是一种很好的做法是有争议的。请注意，即使您引用它们，mod_fcgid 的几个版本也不喜欢带有空格的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:05:13.673

你启动服务了吗？

此外，您应该安装 XAMPP 或 WAMPP，它们提供 Apache、PHP 和 MySQL 支持，无需所有配置麻烦。

# ruby-on-rails-3 - rails 3如何在没有质量分配错误的情况下关联新对象

> ID：15669245
> 
> 赞同：0
> 
> 时间：2013-03-27T20:53:48.087
> 
> 标签：ruby-on-rails-3, associations, mass-assignment

我回到了相对“老书”Head First rails，它是为 Rails 2.3 出版的。现在，再次回顾这些示例并使用 Rails 3，我提出了一些问题。

假设我正在为椰子航空公司调整样本，而不是航班和座位，我有一个项目和任务。

该页面显示项目描述，并在下方显示与该项目关联的任务列表。到目前为止，一切都很好。现在下面有一个创建新任务的表格。此任务需要一个 Task 对象和 project_id。这是事情不像以前那样工作的时候。

如果你想像旧风格那样做，你会输入：

```
<%= render :partial => "new_task", 
    :locals =>  {:task => Task.new(@project.id)} %> 
```

好吧，这显示了质量分配错误。

然后我尝试将两者都作为参数传递：

```
<%= render :partial => "new_task", 
    :locals =>  {:task => Task.new, :project_id  => @project.id} %> 
```

并将其分配给部分

```
<%= f.hidden_field :project_id, :value => project_id %> 
```

任何提示？

编辑：

类任务 < ActiveRecord::Base belongs_to :project attr_accessible :title end

类项目 < ActiveRecord::Base has_many :tasks attr_accessible :description, :title end

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:38:57.173

如果您更改模型的 attr_accessible，您可以包含这些要进行的分配。有关 attr_accessible 和批量分配的更多信息，请参阅：[Ruby on Rails API](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)

# php - “未定义的偏移量”和“试图获取非对象的属性”通知是什么意思？

> ID：15669253
> 
> 赞同：0
> 
> 时间：2013-03-27T20:54:19.190
> 
> 标签：php, warnings

我可以看到我想看到的输出，但有 2 个我无法理解的错误：

```
 Notice: Undefined offset: 0 in C:\wamp\www\dash\handle_dashim.php on line 23
 Notice: Trying to get property of non-object in C:\wamp\www\dash\handle_dashim.php on line 23 
```

代码的重要部分：

```
//move the objects into array.
$dasharr=array();
$i=1;
while(($row = mysql_fetch_array($dashim))) { 
    $dasharr[$i]=new dash($row["name"],$row["msg"],$row["msg_date"],$row["votes"]);
    $i++;
}

//checks the object with the most votes.
$numofdash=count($dasharr); 
$mostvotes=$dasharr[$numofdash];
while($numofdash>0){
    if(($mostvotes->votes)<($dasharr[$numofdash-1]->votes)){ //line 23
    $mostvotes=$dasharr[$numofdash-1];
    }
    $numofdash--;
}

echo $mostvotes->name; //I can see the output that I want

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:57:32.253

`$i=1`在文件的顶部。

所以你的第一行是`$dasharr[$i]`哪个是`$dasharr[1]`和向上。所以在你的循环中的第一次`$dasharr[1-0]`或`$dasharr[0]`将是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:57:27.973

你有：`$dasharr[$numofdash-1]`if `$numofdash`is 1 then you are references `$dasharr[0]`which is not set above in while loop.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:03:41.690

请`$i`从前 6 行代码中删除：

```
$dasharr=array();
while(($row = mysql_fetch_array($dashim))) { 
    $dasharr[] = new dash($row["name"],$row["msg"],$row["msg_date"],$row["votes"]);
} 
```

由于所有数组索引都以 0 开头，而您以 1 开头，因此您的数组成为关联数组。这意味着，您应该使用例如`foreach`语句来枚举它。

例如，如果您有 5 行，您将拥有以下 $dasharr 结构：

```
[1] => dash object,
[2] => dash object,
[3] => dash object,
[4] => dash object,
[5] => dash object 
```

同样，您的代码`count($dasherr)`将`5`永远不会到达带有 index 的元素，`5`并且在您的情况下，您在请求带有 index 的元素时出错`0`。

为了避免以后出现此类问题，请使用`var_dump()`函数进行调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T21:07:22.207

**回答**

这两个通知都指的是同一个问题。您开始`$dasharr`从索引中分配索引，`1`这有点不寻常并且与编程约定不一致。然后你正在做一个向后的 while 循环测试`while($numofdash > 0)`并尝试检索`$dasharr[$numofdash-1]`哪个将是`$dasharr[0]`（你没有设置的那个） when `$numofdash = 1`。

您有两个快速解决此问题的方法：

*   将您的 while 循环设置为进行`$numofdash > 1`测试
*   `$dasharr`从`0`（建议）开始

**其他调整**

如果您打算遵循后者，您可以通过以下方式轻松删除`$i`变量的使用：

```
$dasharr = array();
while(($row = mysql_fetch_array($dashim)))
    $dasharr[] = new dash($row["name"], $row["msg"], $row["msg_date"], $row["votes"]); 
```

符号将`$a[] = ...`对象推送到数组中最近的空索引（自动从 开始`0`）。

我还可以建议您在代码的最后一部分使用`for`循环而不是循环吗？`while`

```
$mostvotes = $dasharr[$numofdash];
for ($numofdash = count($dasharr); $numofdash > 0; $numofdash--)
    if(($mostvotes->votes) < ($dasharr[$numofdash-1]->votes))
        $mostvotes = $dasharr[$numofdash-1]; 
```

# html - 输入文本上的 css 文本缩进在 Internet Explorer 10 中不起作用

> ID：15669256
> 
> 赞同：4
> 
> 时间：2013-03-27T20:54:30.547
> 
> 标签：html, css

我正在尝试使用 css 自定义文本输入，我希望其中的文本向左留出 10px 的边距，所以我使用：

```
#text{
text-indent: 10px;
border: 1px solid #333;
outline: none;
padding: 0;
margin: 0;
width: 168px;
height: 20px;
border-radius: 4px;
} 
```

它适用于所有浏览器，除了 IE10 似乎忽略了该`text-indent`属性，我该如何修复它？

```
<input type="text" id="text" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T20:56:38.393

您可以使用 padding-left，它适用于所有浏览器：

```
#text {
    padding: 0 0 0 10px;
    border: 1px solid #333;
    outline: none;
    margin: 0;
    width: 158px; //decrease width with the same padding vale so that the width would stay the same
    height: 20px;
    border-radius: 4px;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T04:12:54.987

如果您想为 IE 使用特殊规则，添加`display: inline-block`和 a`line-height`以及该`text-indent`规则也可以解决此问题。这对于 IE7-9 来说也是一个老把戏。

```
input.special {
    text-indent: 150px;
    display:inline-block;
    line-height: 18px;
} 
```

行得通。

如果您使用的是流动或响应宽度，并且您不想因为填充而调整输入的宽度，这很好。

# ruby-on-rails - Ruby on Rails：替换反斜杠，除了 \a \b \c ... \n ... \t .... \z

> ID：15669258
> 
> 赞同：0
> 
> 时间：2013-03-27T20:54:33.723
> 
> 标签：ruby-on-rails, regex

我正在寻找一个正则表达式来将反斜杠替换为双反斜杠，除非涉及 '\a' '\b' '\c' ... '\n' ... '\t' .... '\uXXXX' ' \xHH' '\z' 序列。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:03:27.863

关于什么：

```
/\\[^a-z]?/ 
```

如果你想要一个精确的列表：

```
/\\[^abcntuz]?/ 
```

# asp.net - asp.net土耳其字符问题

> ID：15669264
> 
> 赞同：0
> 
> 时间：2013-03-27T20:54:53.943
> 
> 标签：asp.net, sql-server

我有土耳其语字符问题。如果我的搜索字符串包含“İ”，它不会返回现有数据。当我在 MSSQL TOOL 中执行下面的 select 语句时，它可以工作，但是当我在 ASP.NET 中调用相同的 select 语句时，它不起作用。

这是选择

```
select * from product where name like N'%GALVANİZ%' 
```

这适用于 mssql 工具并返回预期的数据行。但是在 asp.net 中调用时它不返回任何数据

我怎样才能让它在 asp.net 中返回数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:04:33.990

如果您使用土耳其语字符，请确保您的列是 nchar 或 nvarchar。

然后，如果您在 asp.net 端获取它时遇到问题，请尝试将其编码更改为“windows-1254”`Encoding.GetEncoding("windows-1254")`

# php - PHP：如何自动加载接口和抽象

> ID：15669266
> 
> 赞同：9
> 
> 时间：2013-03-27T20:54:56.223
> 
> 标签：php, spl-autoloader

我最初有这个**自动加载器**类来自动加载，但现在我也`classes`想自动加载。`interfaces``abstracts`

所以我在这个[答案](https://stackoverflow.com/questions/7924782/autoload-differnece-between-class-and-interface-php)之后做出了改变，

```
$reflection = new ReflectionClass($class_name);

# Return boolean if it is an interface.
if ($reflection->isInterface())
{
    $file_name = 'interface_'.strtolower(array_pop($file_pieces)).'.php';
}
else
{
    $file_name = 'class_'.strtolower(array_pop($file_pieces)).'.php';

} 
```

我对其进行了测试，但这个**自动加载器**类根本不加载接口。有什么我错过的想法吗？

例如，这是我的接口文件，

```
interface_methods.php 
```

及其内容，

```
interface methods 
{
    public function delete();
} 
```

下面是我的整个这个**自动加载器**类。

```
class autoloader
{
    /**
     * Set the property.
     */
    public $directory;
    public $recursive;

    public function __construct($directory, $recursive = array('search' => 'models') ) 
    {
        # Store the data into the property.
        $this->directory = $directory;
        $this->recursive = $recursive;

        # When using spl_autoload_register() with class methods, it might seem that it can use only public methods, though it can use private/protected methods as well, if registered from inside the class:
        spl_autoload_register(array($this,'get_class'));
    }

    private function get_class($class_name)
    {
        # List all the class directories in the array.
        if ($this->recursive)
        {
            $array_directories =  self::get_recursive_directory($this->directory);
        }
        else
        {
            if (is_array($this->directory)) $array_directories =  $this->directory;
            else $array_directories =  array($this->directory);
        }

        # Determine the class is an interface.
        $reflection = new ReflectionClass($class_name);

        $file_pieces = explode('\\', $class_name);

        # Return boolean if it is an interface.
        if ($reflection->isInterface())
        {
            $file_name = 'interface_'.strtolower(array_pop($file_pieces)).'.php';
        }
        else
        {
            $file_name = 'class_'.strtolower(array_pop($file_pieces)).'.php';

        }

        # Loop the array.
        foreach($array_directories as $path_directory)
        {
            if(file_exists($path_directory.$file_name)) 
            {
                include $path_directory.$file_name;
            } 
        }

    }

    public function get_recursive_directory($directory)
    {
        $iterator = new RecursiveIteratorIterator
                    (
                        new RecursiveDirectoryIterator($directory),
                        RecursiveIteratorIterator::CHILD_FIRST
                    );

        # This will hold the result.
        $result = array();

        # Loop the directory contents.
        foreach ($iterator as $path) 
        {

            # If object is a directory and matches the search term ('models')...
            if ($path->isDir() && $path->getBasename() === $this->recursive['search']) 
            {

                # Add it to the result array.
                # Must replace the slash in the class - dunno why!
                $result[] = str_replace('\\', '/', $path).'/';
                //$result[] = (string) $path . '/';

            }

        }

        # Return the result in an array.
        return $result;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T22:47:23.193

PHP 在任何类、接口或抽象类之间没有区别。您定义的自动加载器函数总是获取要自动加载的事物的名称，并且没有任何提示它是哪一个。

因此，您的命名策略无法自动加载，因为您在接口前面加上“interface_”，在类前面加上“class_”。我个人觉得这样的命名约定很烦人。

另一方面，您的自动装载机完全没有性能。它递归地扫描整个目录树只是为了找到一个类！下一堂课必须重新做所有的工作，而没有以前做过的好处！

如果您真的想自己做（而不是使用[composer](http://getcomposer.org)之类的东西为您做），请务必实现 PSR-0 自动加载器，并坚持类和接口的这种命名方案。

并且请选择一个有区别的类名前缀或命名空间，作为第一步，在你的自动加载器中检查要加载的类是否有这个前缀。如果没有，请立即返回。这使您不必旋转硬盘驱动器并查看该类的文件名是否存在。

如果前缀不匹配，则不是“您的”类要加载，因此您的自动加载器不知道如何执行此操作，甚至不应该尝试，但是已注册的不同自动加载器会知道。

# android - 如何从带有 gen 和 auto-gen 文件的文件夹运行 Android 项目

> ID：15669267
> 
> 赞同：-2
> 
> 时间：2013-03-27T20:54:56.830
> 
> 标签：android

这是一个简单的问题，但我坚持，我已经准备好所有文件，比如 java xml 文件，我也准备好了 Eclipse，但是如何运行 thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:57:34.427

通过以下路径打开现有项目：

> 文件->新建->其他->来自现有代码的Android项目

然后单击运行按钮运行您的代码。

要生成 APK，您需要遵循以下路径：

> 文件->导出->安卓->导出安卓应用

享受 ：-）

# javascript - Javascript / Jquery 货币格式 onChange & percent calc

> ID：15669268
> 
> 赞同：0
> 
> 时间：2013-03-27T20:55:01.693
> 
> 标签：javascript, jquery, decimal-point, currency-formatting

这可能是睡眠不足，但尝试将函数格式化为：

*   字段 2 = 字段 1 * 1.15 返回美元金额
*   字段 3 = 用户定义的整数百分比
*   字段 4 = 字段 3 * 字段 2 返回美元金额

我试图添加 jquery 货币格式，但显然它没有正确链接。我会很感激任何关于我哪里出错的指导 - 我已经研究过这个并且没有理解一些答案。提前感谢您的时间。

```
<!DOCTYPE html>
    <html>
      <head>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b1/jquery.mobile-1.0b1.css" />

   <style>

.quote {width:600px; font-family:Arial, Helvetica, sans-serif; font-size:14px; padding-top:20px; padding-bottom:20px; font-weight:bold;}
.data {font-family:Arial, Helvetica, sans-serif; font-size:14px; padding-top:20px; padding-left:40px;}
.data1 {font-family:Arial, Helvetica, sans-serif; font-size:14px; padding-top:20px; padding-left:40px; font-weight:bold}
.input {width:10px;}
.label1 {padding-top:5px; padding-bottom:20px; }
.label2 {padding-top:5px; padding-bottom:20px;}
.field {padding-left:75px;}

   </style>

        <script src="js/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/mobile/1.0b1/jquery.mobile-1.0b1.js">
        </script>
        <script src="js/jquery.formatCurrency.js"></script>
    <script type="text/javascript">
     $(document).ready(function() {

       function compute() {
              var a = $('#a').val(); //field1

              var total = a * 1.15; //field2
              $('#total').val(total); //field1 * 1.15 = field2
              var c = $('#c').val(); //field3 percent defined
              var calc = (c /10) * total;  
               $('#calc').val(calc); //calc field4
                var calc2 = (calc + total);  
               $('#calc2').val(calc2); //calc field5 (field2 + field3)
               var calc3 = (total * .20);  
               $('#calc3').val(calc3); //calc field6 (field2 x 20%)
               var calc4 = (total * .80);  
               $('#calc4').val(calc4); //calc field7 (field2 x 80%)
               var d = $('#d').val(); //field8 percent defined
               var calc5 = (d /10) * total;  
               $('#calc5').val(calc5); //calc field9
               var calc6 = (a * 1);  
               $('#calc6').val(calc6); //calc field10
               var calc7 = (calc3 - calc4);  
               $('#calc7').val(calc7); //calc field11
               var calc8 = (a * 1);  
               $('#calc8').val(calc8); //calc field12
               var calc9 = (a - calc5);  
               $('#calc9').val(calc9); //calc field13      
            }

            $('#a, #c, #calc, #calc2, #calc3, #calc4, #calc5, #d, #calc6, #calc7, #calc8, #calc9, #input').change(compute)

         $('#input').currency();

     });
    </script>
      </head>
      <body>
        <div data-role="page" id="irr">
          <div data-role="header">

          </div>
          <div data-role="content">
            <div data-role="fieldcontain">
            <div class="quote">
              <label for="a">Field 1</label>
              <input width:"10px" type="number" name="a" id="a" value=""  /> </div>
              <div class="data1">
               <br>
          <label for="total"> = Field 2</label>
          <input type="text" name="total" id="total" value=""  />   </div>
          <div class="data">
         <label for="c">- Field 3 </label>
          <input type="number" name="c" id="c" maxlength="2" value=""  />%

         Field 4 (<label for="calc"> </label>
          <input type="number" name="calc" id="calc" value=""  />)</div>
            <div class="data1">      
                 <label for="calc2">= Field 5</label>
          <input type="number" name="calc2" id="calc2" value=""  /></div>
       <div class="data">    
      <label for="calc3">- Field 6 (20%)</label>
          <input type="number" name="calc3" id="calc3" value=""  /></div>
          <div class="data1">    
                    <label for="calc4">= Field 7</label>
          <input type="number" name="calc4" id="calc4" value=""  /></div>
        <div class="data">    
          <label for="d">- Field 8</label>
          <input type="number" name="d" id="d"maxlength="2" value=""  />

                        <label for="calc5"></label>
         Field 9 (<input type="number" name="calc5" id="calc5" value=""  />)</div>
 <div class="data1">  
        <label for="calc6">= Field 10</label>
          <input type="number" name="calc6" id="calc6" value=""  />

          <label for="calc7">Field 11</label>
          <input type="number" name="calc7" id="calc7" value=""  /></div>
          <div class="data1">  
          <label for="calc8">Field 12 on</label>
          <input type="number" name="calc8" id="calc8" value=""  />

          <label for="calc9">Field 13</label>
          <input type="number" name="calc9" id="calc9" value=""  /></div>

              </div>
            </div>
          </div>
         </div>
      </body>
    </html> 
```

# javascript - Highcharts 不渲染

> ID：15669269
> 
> 赞同：0
> 
> 时间：2013-03-27T20:55:04.490
> 
> 标签：javascript, python, highcharts, flask, getjson

所以我写了一个 python 应用程序来获取 highcharts 的股票数据。我在终端得到这个

```
127.0.0.1 - - [28/Mar/2013 13:47:02] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [28/Mar/2013 13:47:02] "GET /favicon.ico HTTP/1.1" 404 -
127.0.0.1 - - [28/Mar/2013 13:47:15] "GET /json/msft/?startdate=2010-01-01?enddate=2011-01-01 HTTP/1.1" 200 - 
```

这是我的javascript代码

```
<script type="text/javascript">
function stock() {
console.log('pass 1')
url = 'http://127.0.0.1:5000/json/' + document.getElementById("ticker").value + '/?startdate=' + document.getElementById("startdate").value + '?enddate=' + document.getElementById("enddate").value
$.getJSON(url, function(data) {
    console.log('pass 2')
    // split the data set into ohlc and volume
    var ohlc = [],
        volume = [],
        dataLength = data.length;

    for (i = 0; i < dataLength; i++) {
        ohlc.push([
            data[i]["date"], // the date
            data[i]["open"], // open
            data[i]["high"], // high
            data[i]["low"], // low
            data[i]["close"] // close
        ]);

        volume.push([
            data[i]["date"], // the date
            data[i]["volume"] // the volume
        ])
    }

    // set the allowed units for data grouping
    var groupingUnits = [[
        'week',                         // unit name
        [1]                             // allowed multiples
    ], [
        'month',
        [1, 2, 3, 4, 6]
    ]];

    // create the chart
    $('#container').highcharts('StockChart', {

        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'AAPL Historical'
        },

        yAxis: [{
            title: {
                text: 'OHLC'
            },
            height: 200,
            lineWidth: 2
        }, {
            title: {
                text: 'Volume'
            },
            top: 300,
            height: 100,
            offset: 0,
            lineWidth: 2
        }],

        series: [{
            type: 'candlestick',
            name: 'AAPL',
            data: ohlc,
            dataGrouping: {
                units: groupingUnits
            }
        }, {
            type: 'column',
            name: 'Volume',
            data: volume,
            yAxis: 1,
            dataGrouping: {
                units: groupingUnits
            }
        }]
    });
});
}
</script> 
```

和我的 json 请求的 python 代码

```
@app.route('/json/<ticker>/', methods = ['GET'])
def json_route(ticker):
startdate = request.args.get('startdate','')
enddate = request.args.get('enddate','')
check = datecheck(startdate,enddate)
if check != 'pass':
    return check
check = datacheck(ticker,startdate,enddate)
if check != 'got data':
        urldata(ticker)
print '-----------------data-----------------'
conn = engine.connect()
entries = conn.execute(select([Stocks]).where(Stocks.symbol == ticker ).where(Stocks.date.between(startdate,enddate))).fetchall()
stocklist = []
print entries
for x in entries:
    stocklist.append({
        'volume': float('%f' %x[7]),
        'high': float('%.2f' %x[4]),
        'open': float('%.2f' %x[3]),
        'low': float('%.2f' %x[5]),
        'close': float('%.2f' %x[6]),
        'date': str(x[2]),
        'stock': x[1],
                     })
conn.close()
return json.dumps(stocklist) 
```

我究竟做错了什么？我假设 getjson 如果它在同一个域 localhost 上是可行的。在检查元素时，只有 console.log('pass one') 有效并显示在控制台中。第二次传球永远不会被击中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:59:51.047

从错误信息“ *only supported for HTTP* ”来看，它需要一个 HTTP URL。你有没有尝试过：

```
url = 'http://127.0.0.1:5000/json/... 
```

# java - '选项 SQL_SELECT_LIMIT=DEFAULT'

> ID：15669270
> 
> 赞同：26
> 
> 时间：2013-03-27T20:55:04.627
> 
> 标签：java, mysql

**我在Netbeans**上有一个**mysql**数据库，我想查看该视图数据，但我有. 我该如何解决？谢谢。**`a error 1064 'OPTION SQL_SELECT_LIMIT=DEFAULT'`**

 *** * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-27T21:11:40.237

一些 google foo 引导我这样做：

[http://bugs.mysql.com/bug.php?id=66659](http://bugs.mysql.com/bug.php?id=66659)

该错误报告听起来很像您的问题 - 没有适合您的解决方案。但是还有更多阅读的线索。

与您的问题相似：

1.  也是涉及到的jdbc驱动
2.  错误信息是一样的
3.  问题发生在最近的 mysql 服务器版本上

所以我试图在 mysql-connector-java 源代码中找到问题，并`StatementImpl.java`在 5.1.18 版本中找到了该语句 - 可以在此处找到旧版本：

[http://www.docjar.com/html/api/com/mysql/jdbc/StatementImpl.java.html](http://www.docjar.com/html/api/com/mysql/jdbc/StatementImpl.java.html)

在文件中查找“ `SET OPTION SQL_SELECT_LIMIT=DEFAULT`”，您会找到它。

我还检查了最新版本

我检查了 mysql-connector-java 5.1.22 的来源，问题似乎已解决：

```
SET SQL_SELECT_LIMIT=DEFAULT 
```

因此建议用户修复：请下载较新版本的 connector/j 并修改数据库中的驱动程序条目。

建议修复：更新捆绑的连接器/j 版本

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-22T14:40:13.330

从另一个问题中找到答案......步骤非常简单。

1.  从这里下载最新的 jar 文件：[http](http://dev.mysql.com/downloads/mirror.php?id=412737) ://dev.mysql.com/downloads/mirror.php?id=412737 。解压 将 jar 文件“ `mysql-connector-java-5.1.25-bin.jar`”复制到该文件夹​​：`C:\Program Files\NetBeans 7.3\ide\modules\ext`

2.  在 Netbeans IDE 中：断开与数据库的连接。单击服务。展开驱动程序。右键单击 MySQL，然后按自定义。添加最新驱动程序删除以前的驱动程序。

重新连接到 IDE 中的数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-16T17:36:53.777

只需重新启动 MySql 服务器（WAMP，XAMP）。解决了我的问题。

如果您使用的是 glassfish，请升级到 4.1 版，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-05T17:24:45.923

我可以通过设置我自己的查询限制来绕过这个错误。这对我有用，因为我可以完全控制 sql 语句。通过自己指定限制，它不依赖于“默认”。我还确保以“;”结束查询 但不确定这是否有任何区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-28T14:55:28.573

我注意到的是，如果您在同一个地方有多个连接器，BO 将采用他找到的第一个连接器，就像您在这些图像中看到的那样。

![WEBI 不适用于连接器 5.0.8，即使 Designer 可以](../Images/627f9ad9bc573fbeaf5fad0804c3c58f.png)

![BO 拿走他找到的第一个 SQL 连接器](../Images/8af7d003df1b5415020e8e1580e8840f.png)**

# objective-c - 向格式字符串中的多个 %@ 提供相同参数的方法？

> ID：15669271
> 
> 赞同：3
> 
> 时间：2013-03-27T20:55:07.120
> 
> 标签：objective-c, string-formatting

假设我有一些代码：

```
NSString *query = [NSString stringWithFormat:@"SELECT %@ FROM %@ ORDER BY %@", columnName, tableName, columnName]; 
```

有什么办法可以指定我想去`columnName`第一个*和*第三个`%@`s？这只是一个例子。我很好奇是否有任何可能的组合，真的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:57:24.970

当然：

```
NSString *query = [NSString stringWithFormat:@"SELECT %1$@ FROM %2$@ ORDER BY %1$@", columnName, tableName]; 
```

（请注意，这不是特定于`NSString`: 在 POSIX 中，您可以使用任何`printf()`函数族来执行此操作。）

# mysql - 使用在 select 语句中设置的变量

> ID：15669272
> 
> 赞同：1
> 
> 时间：2013-03-27T20:55:09.340
> 
> 标签：mysql, sql

我可以使用我在`select`语句中设置的变量吗？

我想做这样的事情（这显然是行不通的）：

```
SELECT 
    YEAR(date_of_spend), 
    @current := SUM(spend_amount),
    @half := (SUM(spend_amount) / 2),
    (@current - @half)
FROM `sales_data`
GROUP BY YEAR(date_of_spend) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:43:33.210

不，根据mysql手册：

> 作为一般规则，您永远不应为用户变量赋值并在同一语句中读取该值。您可能会得到预期的结果，但这不能保证。涉及用户变量的表达式的求值顺序是未定义的，并且可能会根据给定语句中包含的元素而改变；此外，不保证此顺序在 MySQL 服务器的版本之间是相同的。

[http://dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)

您需要再次重复表达式或使用子查询

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T20:57:37.287

只需要设置它们：

```
SELECT 
    YEAR(date_of_spend), 
    @current := SUM(spend_amount),
    @half := (SUM(spend_amount) / 2),
    (@current - @half)
FROM `sales_data`,
    (SELECT @current := 0, @half := 0) r
GROUP BY YEAR(date_of_spend) 
```

[请参阅演示](http://sqlfiddle.com/#!2/19182/1)。

# javafx-2 - 有没有办法在 javafx 2.x webview 中使用 adsense

> ID：15669274
> 
> 赞同：0
> 
> 时间：2013-03-27T20:55:13.063
> 
> 标签：javafx-2, adsense

我创建了一个简单的 html 页面，包括 css 和 js。

当页面在 webview 中使用时我如何添加 adsense ？AdSense 工作正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:27:00.160

[WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)只是一个 html 查看器。它没有理由不能与[Google AdSense](http://www.google.com/adsense/)一起使用。Adsense 生成应该在 WebView 中可见的 html 广告。

1.  [按照Google 的文档](https://support.google.com/adsense/bin/answer.py?hl=en&answer=181947&topic=29033&ctx=topic)创建适当的 html 以将 Adsense 包含在文档中。
2.  在 Chrome 等标准浏览器中加载您的 html，并确保广告在那里正确显示。
3.  一旦您的广告在 Chrome 中正确显示，然后将相同的 html 加载到 WebView - 它应该可以正常工作。

# d3.js - D3 数据连接无法添加所有元素

> ID：15669279
> 
> 赞同：0
> 
> 时间：2013-03-27T20:55:32.710
> 
> 标签：d3.js

所以我有一个标准化的对象数组。

```
termometerData = [Object { word="syria",  series=[10] }, Object { word="temporarily",  series=[10] }, ... ] 
```

我加入他们。

```
this.dataPoint = this.chart.selectAll('text')
    .data(function() { return termometerData; })
    .enter().append('text')
    .text(function(d) { console.log(d); return d.word; }); 
```

唯一向我展示了原始数组中的`console.log(d)`一半元素。调用`console.log(this.dataPoint)`向我显示，连接适用于被拾取`console.log(d)`但另一半为空的那一半元素。

为 null 的元素是数组的前 9 个元素。

为什么另一半元素的连接失败。我检查了原始数组，它似乎是完全标准化的？

# ios - reloadData 后翻转回 tableView 时出现非法约束错误

> ID：15669291
> 
> 赞同：2
> 
> 时间：2013-03-27T20:55:56.293
> 
> 标签：ios, autolayout

这个实在是太诡异了。这是错误：

***** 由于未捕获的异常“NSGenericException”而终止应用程序，原因：“无法在视图上安装约束。约束是否引用了视图子树之外的内容？那是违法的。约束：视图：>'**

所以我的自定义单元格有一个子视图，我是在配置步骤中添加的。也就是说，我 deuque 一个单元格，然后使用数据对象对其进行配置。在配置步骤中，如果不存在，则添加第三方子视图：

```
if (!self.thirdPartyAnswerView) {
    self.thirdPartyAnswerView = [TCThirdPartyAPIHelper thirdPartyAnswerViewForThirdPartyAPIServiceType:answer.thirdPartyObject.thirdPartyAPIType];
    self.thirdPartyAnswerView.translatesAutoresizingMaskIntoConstraints = NO;
    [self.contentWrapperView addSubview:self.thirdPartyAnswerView];
    NSDictionary *metrics = @{
                              @"TC_CELL_TOP_PADDING": [NSNumber numberWithFloat:TC_CELL_TOP_PADDING],
                              @"TC_CELL_BOTTOM_PADDING": [NSNumber numberWithFloat:TC_CELL_BOTTOM_PADDING],
                              @"TC_CELL_RIGHT_PADDING": [NSNumber numberWithFloat:TC_CELL_RIGHT_PADDING],
                              @"TC_CELL_LEFT_PADDING": [NSNumber numberWithFloat:TC_CELL_LEFT_PADDING],
                              };
    [self.contentWrapperView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|-TC_CELL_LEFT_PADDING-[_thirdPartyAnswerView]-TC_CELL_RIGHT_PADDING-|" options:0 metrics:metrics views:NSDictionaryOfVariableBindings(_thirdPartyAnswerView)]];
    [self.contentWrapperView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-TC_CELL_TOP_PADDING-[_thirdPartyAnswerView]-TC_CELL_BOTTOM_PADDING-|" options:0 metrics:metrics views:NSDictionaryOfVariableBindings(_thirdPartyAnswerView)]];
} 
```

这一切都很好。事实上，它工作得很好。我步入我的答案单元格（呈现模态编辑/创建流程），然后完成并返回同一屏幕。我用动画很好地更新了行，而不是调用`reloadData`.

![屏幕](../Images/273f0f1e70b4020e0d294a528c9caa87.png)

当我在拥有现有数据后点击类别按钮时，问题就出现了。它拉出一个类别选择模式。当我选择一个类别时，它`reloadData`会在前一个屏幕中调用，然后将类别模式动画化。好吧，至少这是它应该做的。**相反，它会在动画开始时立即崩溃。它调用`reloadData`没有问题，但动画一开始，就轰隆隆。**它要么抛出我上面显示的崩溃，不提供任何解释，要么崩溃并抱怨`_supportsContentDimensionVariables`选择器被发送到错误的对象。

由于使用的视图可能因单元格而异，因此在调用中`prepareForReuse`我删除了`thirdPartyAnswerView`. 如果我删除它，它不会崩溃（但是我的单元格中有一个我不想要的视图）。我尝试在前后删除约束：

```
if (self.thirdPartyAnswerView) {
    [self.contentWrapperView removeConstraints:self.thirdPartyAnswerView.constraints];
    [self.thirdPartyAnswerView removeFromSuperview];
    self.thirdPartyAnswerView = nil;
} 
```

那没有用。我尝试将这些东西移出`prepareForReuse`并移入配置部分（在添加新子视图之前删除子视图）。那没有用。我不知所措。

## 更新

以下是选择模式中的类别时调用的代码：

```
categorySelectionVC.didTouchCategoryBlock = ^(TCCategory *category) {
    TCQuestionBuilderViewController *sself = weakself;
    sself.category = category;
    [sself.tableView reloadData];
    [sself.tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:TableSectionCategory] animated:NO scrollPosition:UITableViewScrollPositionNone];
    [sself dismissViewControllerAnimated:YES completion:^{
    }];
}; 
```

~~我已经确定，如果我`selectRowAtIndexPath`在重新加载后注释掉该位，它就可以正常工作。我不明白为什么。我已经用过很多次了。我重新加载数据，重新选择选择的内容，以便在再次看到 tableView 时动画“关闭”。~~

**我错了。虽然删除它最初确实解决了它，但如果您再次进入模式然后再次选择一个类别，它就会崩溃。**

# 解决了

感谢 sapi，我发现约束没有被正确删除。使用`constraints`关闭的属性`thirdPartyView`不包括存储在父视图上的约束。不得不使用这种语法，虽然我猜有一个更短的方法来做到这一点：

```
for (NSLayoutConstraint *constraint in self.contentWrapperView.constraints) {
    if (constraint.firstItem == self.thirdPartyAnswerView || constraint.secondItem == self.thirdPartyAnswerView) {
        [constraints addObject:constraint];
    }
}
[self.contentWrapperView removeConstraints:constraints]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:54:22.990

约束是双向的，但反向关系由与正向关系不同的对象表示。

例如，如果您使用以下命令创建约束：

```
[self.contentWrapperView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|-TC_CELL_LEFT_PADDING-[_thirdPartyAnswerView]-TC_CELL_RIGHT_PADDING-|" options:0 metrics:metrics views:NSDictionaryOfVariableBindings(_thirdPartyAnswerView)]]; 
```

then`self.contentWrapperView`和`_thirdPartyAnswerView`两者都添加了约束，但是虽然它们都表示相同的关系，但它们是*不同的对象*。

你打电话时：

```
[self.contentWrapperView removeConstraints:self.thirdPartyAnswerView.constraints]; 
```

这试图删除与 上的相同的`self.contentWrapperView`所有*约束*`self.thirdPartyAnswerView`，即没有。

要删除适当的约束，您必须遍历数组并识别引用的那些`thirdPartyAnswerView`（有关执行此操作的一种方法，请参阅问题编辑）。

# mysql - 回滚原始事务后，Mysql触发器插入仍然存在

> ID：15669292
> 
> 赞同：2
> 
> 时间：2013-03-27T20:55:56.880
> 
> 标签：mysql, triggers, transactions

我在 Mysql 5.5 版中实现了一个典型的“审计日志”触发器。我使用*AFTER INSERT*将插入的行从表*用户*复制到我的“audit_log”表中。

所以对于这个序列：

```
BEGIN;
insert into user (name) values ('joe');
<--trigger fires, adds new row to audit_log table-->
COMMIT; 
```

然后我在 'audit_log' 中得到一个带有 'joe' 的新行。伟大的。

但是，即使触发触发器的插入被其封闭事务中止，似乎我的触发器的结果也会被应用。

所以对于这个序列：

```
BEGIN;
insert into user (name) values ('mary');
<--trigger fires, adds new row to audit_log table-->
ROLLBACK; 
```

我仍然在 audit_log 中得到一个新行“mary”，它指的是从未提交到我的用户表的数据。这似乎很明显是错误的。

似乎在 Postgres 中执行的触发器更新在原始事务中执行，这是我期望发生的。有人在 MySQL 中有这方面的经验吗？也许有一个设置我错了？

我注意到[这个问题](https://stackoverflow.com/questions/2634787/question-about-mysql-transaction-and-trigger?rq=1)意味着所有更新都发生在原始事务中。但是，答案是指关于触发器的 Mysql 手册页，实际上根本没有提到“事务”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:01:08.467

原来我的审计表正在使用 MyISAM 引擎，这当然会阻止它正确地遵守事务。

我的同事说我欠拉里·埃里森一个道歉。

拉里，对不起，我怀疑 Mysql 的事务语义。

# jquery - 从我的函数中删除 HTML

> ID：15669293
> 
> 赞同：1
> 
> 时间：2013-03-27T20:55:57.050
> 
> 标签：jquery, json, each

使用 JSON，我已成功将结果检索为对象。经过一番努力，我设法让它发挥作用。但是，我将非常感谢“清理”解决方案的任何帮助，因为我已经读过，作为最佳实践，您应该始终将 HTML 和 jQuery 分开。

代码片段可以在下面的链接中找到：

[http://jsfiddle.net/xunZU/](http://jsfiddle.net/xunZU/)

```
var results = $.map(data.GSP.RES.R, function (result) {
    return {
        title: result.T,
        snippet: result.S,
        url: result.U
    };

}); //var results

$.each(results, function (index, obj) {
    $('#results_holder').append('<h2><a href="' + obj.url + '">' + obj.title + '</a></h2>' + '<p>' + obj.snippet + '</p>');
}); //each 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:58:50.853

如果你经常做这种事情，我发现使用模板库非常有帮助。个人使用handlebars.js。使从您的 javascript 中分离标记变得非常简单。

[http://handlebarsjs.com/](http://handlebarsjs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:05:17.743

将 JS 与 HTML、CSS 与 HTML 等分开是一个好主意，因为它符合分离功能、样式和形式等的做法。

另一方面，时不时地用javascript创建一些元素并没有错，为了清理它，我会这样做：

```
var results = $.map(data.GSP.RES.R, function (result) {
    return {
        title  : result.T,
        snippet: result.S,
        url    : result.U
    };
});

$.each(results, function (index, obj) {
    var h2 = $('<h2 />'),
        a  = $('<a />', {text: obj.title, href: obj.url}),
        p  = $('<p />', {text: obj.snippet});

    $('#results_holder').append( h2.append(a), p );
}); 
```

也`$.each`适用于对象，这`$.map`不是真正必要的，你也可以这样做：

```
$.each(data.GSP.RES.R, function (index, obj) {
    var h2 = $('<h2 />'),
        a  = $('<a />', {text: obj.T, href: obj.U}),
        p  = $('<p />', {text: obj.S});

    $('#results_holder').append( h2.append(a), p );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:05:09.640

当然，您可以像这样滚动自己的伪模板引擎：http: [//jsfiddle.net/joeframbach/xunZU/1/](http://jsfiddle.net/joeframbach/xunZU/1/)

通过添加隐藏模板：

```
<div id="templates" style="display:none;">
<h2><a></a></h2><p></p>
</div>

<div id="results_holder"></div> 
```

并克隆它：

```
var data = [
    {T: 'foo1', S: 'bar1', U: 'bat1'},
    {T: 'foo2', S: 'bar2', U: 'bat2'},
    {T: 'foo3', S: 'bar3', U: 'bat3'},
    {T: 'foo4', S: 'bar4', U: 'bat4'},
    {T: 'foo5', S: 'bar5', U: 'bat5'},
]
var results = $.map(data, function (result) {
    return {
        title: result.T,
        snippet: result.S,
        url: result.U
    };

}); //var results

$.each(results, function (index, obj) {
    var tpl_h2 = $('#templates h2').clone();
    var tpl_p = $('#templates p').clone();
    tpl_h2.find('a').attr('href',obj.url).html(obj.title);
    tpl_p.html(obj.snippet);
    $('#results_holder').append(tpl_h2).append(tpl_p);
}); //each 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T21:50:18.837

因此，您正在为 DOM 操作寻找“干净”的解决方案。清洁是一个相对的术语。我认为您只想要可维护的东西。如果 HTML 和 Javascript 不同步，它们会变得很麻烦。我不相信有一个*正确*的答案，但您肯定可以找到适合您或您的团队需要的东西。

正如 joeframbach 所建议的那样，我将建议使用 .clone()，但我会改为使用整个 DOM 元素和一些子类，而不是单独复制元素。那么就不需要对底层元素或结构有任何了解。

这是我的小提琴分支：http: [//jsfiddle.net/krets/sESy2/2/](http://jsfiddle.net/krets/sESy2/2/)

```
$.each(results, function (index, obj) {
    var tpl = $('#templates').clone();
    tpl.attr('id','unique'+index)
    tpl.find('.linkOne').attr('href',obj.url).html(obj.title);
    tpl.find('.one').html('unique'+index);
    tpl.find('.two').html(obj.snippet);
    tpl.removeClass('hidden')
    $('#results_holder').append(tpl);
}); //each 
```

# java - Java：replaceAll 和 .split 换行不起作用

> ID：15669297
> 
> 赞同：0
> 
> 时间：2013-03-27T20:56:16.077
> 
> 标签：java, string, while-loop, bufferedreader

我想拆分一条线（inputLine），它是

```
Country: United Kingdom
City: London 
```

所以我正在使用这段代码：

```
public void ReadURL() {

    try {
        URL url = new URL("http://api.hostip.info/get_html.php?ip=");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(url.openStream()));

        String inputLine = "";
        while ((inputLine = in.readLine()) != null) {
            String line = inputLine.replaceAll("\n", " ");
            System.out.println(line);
        }

        in.close();
    }   catch ( Exception e ) {
        System.err.println( e.getMessage() );
    }
} 
```

当您运行该方法时，输出仍然是

```
Country: United Kingdom
City: London 
```

不像是这样：

```
Country: United Kingdom City: London 
```

现在我尝试使用

```
\n,\\n,\r,\r\n 
```

和

```
System.getProperty("line.separator") 
```

但他们都没有工作和使用，`replace`但没有任何工作。`split``replaceAll`

那么如何删除换行符以制作一行字符串？

更多细节：我想要它，所以我有两个单独的字符串

```
String Country = "Country: United Kingdom"; 
```

和

```
String City = "City: London"; 
```

那太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:59:28.777

你应该而不是使用`System.out.println(line);`use `System.out.print(line);`。

新行是由`println()`通过写入行分隔符字符串来终止当前行的方法引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:00:27.247

[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html#readLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html#readLine())

读那个。readLine 方法不会在文本中返回任何回车或换行，并且会用换行符中断输入。因此，您的循环确实会接收整个文本块，但会逐行读取。

您还可以通过调用 println 获得额外的换行符。它将打印读入的行，添加新行，然后打印空白行 + 换行符，然后打印结束行 + 换行符，为您提供与输入完全相同的输出（减去几个空格）。

您应该使用 print 而不是 println。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:10:17.027

我建议看看番石榴[`Splitter.MapSplitter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)

在你的情况下：

```
// input = "Country: United Kingdom\nCity: London"
final Map<String, String> split = Splitter.on('\n')
    .omitEmptyStrings().trimResults().withKeyValueSeparator(": ").split(input);
// ... (use split.get("Country") or split.get("City") 
```

# authentication - Laravel PHP Starter 书中示例中的 Laravel Auth::attempt 仅返回 false

> ID：15669299
> 
> 赞同：0
> 
> 时间：2013-03-27T20:56:21.573
> 
> 标签：authentication, login, laravel

我相信我完全按照书中的步骤进行操作，但即使我手动提供了数组中的凭据，也无法让用户登录。

有人可以看看下面，看看我哪里出错了吗？

有一个名为 users 的表，它是之前使用 Migrations 创建的，并且有一个电子邮件 = 'test@test.com' 和密码 = 'test' 的行。

非常感谢。

## 路由.php

```
Route::any('login', 'auth@login'); 
```

## 控制器/auth.php

```
class Auth_Controller extends Base_Controller 
{
    public function get_login()
    {
        return View::make('auth.login');
    }

    public function post_login()
    {
        $credentials = array(
            'username' => Input::get('email'),
            'password' => Input::get('password')
        );

        if(Auth::attempt($credentials))
        {
            return "User has been logged in.";
        }
        else
        {
            //return Redirect::back()->with_input();
            return "User has not been logged in.";
        }        
    }
} 
```

## auth/login.blade.php

```
{{ Form::open() }}

    Email: {{ Form::text('email', Input::old('email')) }} <br />

    Password: {{ Form::password('password') }} <br />

    {{ Form::submit('Login') }}

{{ Form::close() }} 
```

## 配置/auth.php

```
'driver' => 'eloquent',
'username' => 'email',
'password' => 'password',
'model' => 'User',
'table' => 'users', 
```

## 模型/user.php

```
class User extends Eloquent
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:32:24.813

Laravel 论坛的 AndrewB 回答了这个问题：

> 好的，内置身份验证需要对密码进行哈希处理 - 您可以使用 Hash::make('mypassword') 创建哈希并将结果放入数据库，然后您应该能够登录。
> 
> @AndrewB，做到了。书中的示例没有使用哈希，但是当我将您的建议添加到 post_update 函数以编辑用户时，它起作用了。
> 
> 谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:06:11.510

我看到您正在使用 restful 控制器“get_login() 和 post_login()”，但您没有将其声明为 restful。您需要将该属性添加到“用户”控制器

```
class Auth_Controller extends Base_Controller 
{
    public $restful = true;
    ... 
```

你也可以将它添加到基本控制器中

```
class Base_Controller extends Controller
{
    public $restful = true;
    .... 
```

我的（复制和粘贴）代码顺便说一句:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:32:27.407

确保字段用户名实际存储电子邮件地址。

# c# - ASP.net用C#在哪里添加列表框的方法，即每个caritem的总价（单价*数量）

> ID：15669301
> 
> 赞同：0
> 
> 时间：2013-03-27T20:56:38.610
> 
> 标签：c#, asp.net

我有一个产品页面，在点击事件时会从 sql 数据源中带来带有价格的选定产品，它还允许用户添加数量。我将它发送到一个名为 cart 的新页面上的列表框，并用它显示它，它是 caritem 类的一部分

```
public string Display()
{
    return cproduct.Description + " (" + cquantity.ToString() + " at " + cproduct.UnitPrice.ToString("c") 
        + " each) " ;
} 
```

这来自 cart.aspx.cs 页面

```
public partial class Cart : System.Web.UI.Page
{
CartItemList cart;
protected void Page_Load(object sender, EventArgs e)
{
    cart = CartItemList.GetCart();
    if (!IsPostBack)
    {
        this.DisplayCart();
    }
}
protected void DisplayCart()
{
    lstCart.Items.Clear();
    CartItem item;
    for (int i = 0; i < cart.count; i++)
    {
        item = cart[i];
        lstCart.Items.Add(item.Display());
    }
} 
```

我要补充的是最后每件商品的总和（单价*数量）。但我似乎无法弄清楚我究竟会在哪里添加这个。我有 product.aspx 页面和 cart.aspx 页面，每个页面都有列表框和代码页。产品页面是来自 sql 数据库的简单下拉列表和用于输入数量的文本框。我我们有一个 caritem、caritemlist 和 product 类。我会发布更多代码，但我认为这没有必要，但如果需要我可以。任何帮助都会非常感激，因为我会对此感到沮丧。谢谢琳达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:07:00.850

好吧，您可以将其附加到显示方法上：

```
public string Display()
{
    return cproduct.Description + " (" + cquantity.ToString() + " at " + cproduct.UnitPrice.ToString("c") + " each) Total  " + (cquantity*cproduct.UnitPrice).ToString("c") ;
} 
```

虽然老实说，我对您为什么为此使用列表框感到有些困惑？这似乎是一个奇怪的选择。我可能会用表格或数据列表做一个列表视图，这会给你很多免费的功能（比如编辑数量和删除行的能力）。

# iphone - 如何在 iOS 6 的 Google 地图 API 中使用委托

> ID：15669308
> 
> 赞同：1
> 
> 时间：2013-03-27T20:57:09.703
> 
> 标签：iphone, ios, objective-c, mkmapview, google-maps-sdk-ios

在我的 iphone 应用程序中，我使用谷歌地图 SDK 来显示附近的餐馆。我能够显示这些地方。我有些疑惑..

**1.如何找到地图的中心坐标？？**

**2.如何恢复到当前位置？**

**3.如何找出地图被移动了-即中心坐标发生了变化（就像MKMapView中的regionChanged委托一样）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:29:17.390

然而，这可能应该是三个独立的问题：

1.

```
GMSMapView* _mapView = ...;
CLLocationCoordinate2D centre = _mapView.camera.target; 
```

2.

```
GMSMapView* _mapView = ...;
CLLocationCoordinate2D currentPosition = _mapView.myLocation.coordinate;
CGFloat currentZoom = _mapView.camera.zoom;
GMSCameraPosition* camera = 
    [GMSCameraPosition cameraWithTarget: currentPosition zoom: currentZoom];
_mapView.camera = camera; 
```

3.

使用`[mapView:didChangeCameraPosition:]`委托方法。

# asp.net-ajax - Ajax 工具包 2013 版本错误

> ID：15669321
> 
> 赞同：1
> 
> 时间：2013-03-27T20:57:39.737
> 
> 标签：asp.net-ajax, webforms

我下载了带有 ajax 4.5 版本的包，我将 DDL 添加到了工具箱中，引用了相同的 DDL 作为添加到工具箱的项目，在 aspx 上使用它

```
<ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></ajaxToolkit:ToolkitScriptManager>

<ajaxToolkit:CalendarExtender ID="TextBox1_CalendarExtender" runat="server" Enabled="True" TargetControlID="TextBox1">
    </ajaxToolkit:CalendarExtender> 
```

但是出现这个错误，我做错了什么？

```
Unhandled exception at line 3, column 412 in http://localhost:6944/View/Chart/Chart.aspx?_TSM_HiddenField_=ToolkitScriptManager1_HiddenField&_TSM_CombinedScripts_=;;AjaxControlToolkit,+Version=4.5.7.123,+Culture=neutral,+PublicKeyToken=28f01b0e84b6d53e:en-US:e669ce41-1aa1-4541-aae9-fa5dc37e70db:de1feab2:fcf0e993:f2c8e708:720a52bf:f9cec9bc:589eaa30:698129cf:fb9b4c57:ccb96cf9 
```

0x800a139e - JavaScript 运行时错误：AjaxControlToolkit 需要 ASP.NET Ajax 4.0 脚本。确保引用了正确版本的脚本。如果您使用的是 ASP.NET ScriptManager，请切换到 AjaxControlToolkit.dll 中的 ToolkitScriptManager。

所有都是从工具箱中添加的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:54:35.213

当你创建一个 WEB API 时，项目已经有一个 AJAX 版本并且给出了很多问题，我创建一个空的 WebForms 来解决它。将 ajaxtoolkit 添加到收费箱，如果添加了任何版本，将自动添加正确的 DLL，并且很高兴。

# jquery - javascript侧边菜单整洁

> ID：15669323
> 
> 赞同：0
> 
> 时间：2013-03-27T20:57:43.237
> 
> 标签：jquery, html, css, navbar

我一直在修复我的一个朋友的网站，我需要一些帮助。他有一个侧边栏，其中包含一些按如下顺序排列的子菜单：

```
<ul id="nav">
<div id="nav-scroll">
  <li id="hasnav1"><a href="#">item 1</a>
    <ul id="nav1">
        <li><a href="#">item 1-1</a></li>
        <li><a href="#">item 1-2</a></li>
    </ul></li>
  <li><a href="#">item 2</a></li>
  <li id="hasnav2"><a href="#">item 3</a>
    <ul id="nav2">
        <li><a href="#">item 3-1</a></li>
    </ul</li>
  </div>
</ul> 
```

目前总共有 3 个不同的 hasav id-tags，索引中的 javascript 如下：

```
<script>
$(document).ready(function(){
$("#hasnav1").hover(function(){
$("#nav1").stop();
$("#nav1").show();
$("#nav1").animate({opacity:1, left:250},500);
},
function(){
$("#nav1").stop();
$("#nav1").animate({left:"0px", opacity:0},400) }); });

</script><script>

$(document).ready(function(){
$("#hasnav2").hover(function(){
$("#nav2").stop();
$("#nav2").show();
$("#nav2").animate({opacity:1, left:250},500);
},
function(){
$("#nav2").stop();
$("#nav2").animate({left:"0px", opacity:0},400)}); });

</script><script>

$(document).ready(function(){
$("#hasnav3").hover(function(){
$("#nav3").stop();
$("#nav3").show();
$("#nav3").animate({opacity:1, left:250},500);
},
function(){
$("#nav3").stop();
$("#nav3").animate({left:"0px", opacity:0},400)}); }); </script> 
```

我必须找到一种方法将此代码合并到一个简单的脚本中，而不是合并到 3 个不同的脚本中，因为我必须在其中再添加 4 个子菜单......

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:06:26.100

**如果你不能改变 HTML**，试试这个，只有**一个** `script`标签和一些方法链接，用一个`^`（以选择器开头）将它压缩成一个方法：

**如果您可以更改 HTML，请使用类然后更改`hasnav`选择器**

```
<script>
    $(function(){
        $("id[^=hasnav]").hover(function(){
            $(this).children("ul").stop().show().animate({opacity:1, left:250},500);
        },
        function(){
            $(this).children("ul").stop().animate({left:"0px", opacity:0},400);
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:08:58.757

第一的。使用类名...这就是它们的用途。

```
<ul id="nav-main">
  <li class="hasnav"><a href="#">item 1</a>
    <ul class="nav">
        <li><a href="#">item 1-1</a></li>
        <li><a href="#">item 1-2</a></li>
    </ul></li>
  <li><a href="#">item 2</a></li>
  <li class="hasnav"><a href="#">item 3</a>
    <ul class="nav">
        <li><a href="#">item 3-1</a></li>
    </ul>
  </li>
</ul> 
```

有了这个，你可以简化你的代码：

```
$(function(){
    $(".hasnav").hover(function(){
        $(".nav",this).stop().show().animate({opacity:1, left:250},500);
    },function(){
        $(".nav",this).stop().animate({left:"0px", opacity:0},400)
    }); 
}); 
```

对于未来的读者来说，`$(".nav",this)`就是说**“找到一个具有类 'nav' 的元素，它是当前悬停的元素的子元素”**。这称为指定选择器的“上下文”。

# php - Codeigniter 2.1，MySQL - 使用塞尔维亚字符搜索

> ID：15669327
> 
> 赞同：0
> 
> 时间：2013-03-27T20:57:49.367
> 
> 标签：php, mysql, codeigniter

我有按特定单词进行搜索的搜索查询，有时会发生冲突，因为某些塞尔维亚语和英语单词的拼写相似。例如单词**cilim**和**ćilim**。当对这两个单词进行搜索时，我总是会得到单词**cilim**的结果。似乎 MySQL 将字母**c**和**ć**读取为同一个。DB 设置为**utf8_general_ci**并且在**数据库**配置文件中我得到了这部分**$db['default']['dbcollat​​'] = 'utf8_general_ci';** . 如何通过塞尔维亚字符进行 MySQL 搜索？

# php - javadoc/phpdoc 应该选择哪些原因和情况而不是常规注释？

> ID：15669333
> 
> 赞同：0
> 
> 时间：2013-03-27T20:58:10.427
> 
> 标签：php, coding-style, comments, javadoc, phpdoc

javadoc/phpdoc 应该选择哪些原因和情况而不是常规注释？我知道语法差异是什么，但为什么要使用其中一种。它主要是语义还是有其他原因为什么我应该使用一个而不是另一个，它们是什么？

我真的不明白 javadoc/phpdoc 注释的目的。下一个代码块有什么问题？...`/**`只是使某些评论在编辑器中变成不同颜色的一种方式...有些编辑器不区分（香草崇高似乎没有）？

```
/*
 * This block is wrapped in /** */ not /* */
 * Some documentation goes here
 * Below is copied from http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html
 * @param  url  an absolute URL giving the base location of the image
 * @param  name the location of the image, relative to the url argument
 * @return      the image at the specified URL
 * @see         Image
 */ 
```

另一个问题......有什么理由我应该在同一个文件中同时`/** */`使用两者吗？`/* */`

最后一个问题...为什么 javadoc/phpdoc 注释似乎与类相关联...但是我看到它们被用作对我最初理解的页面的介绍性注释？

实际上还有另一个......冒着回答我自己的问题的风险我想知道 javadoc/phpdoc 注释真的只是区分工具自动编写的注释和开发人员编写的注释的一种方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T21:32:46.787

人们使用 Javadoc 的全部原因是为了**一致性**和**可读性**——如果您知道语法，就可以轻松查看其他人的代码（反之亦然），并立即理解其含义。而不是有类似的东西：

```
// This method is used for counting sheep just before bed time
// It's really awesome, and takes the bed-time, and also age,
// And also number of sheep, in reverse order. 
```

这需要时间来处理；更好地看到：

```
/**
 * Count the number of sheep at bedtime
 *
 * @author Tom Walters 
 *
 * @param sheep   The number of sheep to count
 * @param age     The age of the person going to bed
 * @param bedTime The time of going to bed in 24hr format
 * @return The sheep were counted successfully
 */ 
```

您可以立即看到有多少参数，以及每个参数的用途。返回类型也是如此。在团队合作时，让作者站在那儿也非常有用，然后你就知道当羊误入歧途时该向谁大喊大叫。

至于`/**`- 它有助于将此样式与随机注释和在线注释等内容区分开来，并且是一个很好的约定，可以帮助 Javadoc 在浏览代码时脱颖而出。

通常，您维护代码的时间比编写代码的时间要多，因此拥有像这样定义良好的语法是一个好主意 - 它会导致您分配更多时间来思考解决问题，而不是**破译大块文本**以获取基本信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T21:31:22.437

该表格`/** */`通常用于**文档**。所以如果你想记录一个类、一个文件、一个函数、一个类方法、一个类字段或一个变量，你应该使用那种形式。

该表单`/* */`仅包含代码注释，就像`//`.

一些 IDE 将使用块中包含的 phpDoc 信息`/** */`来向您显示一些提示。此外，像[phpDocumentor](http://www.phpdoc.org/)这样的软件使用`/** */`块来生成文档文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-24T20:47:02.990

回顾上面的所有评论和讨论，听起来您仍然对仅在函数上使用 Javadoc 评论有疑问。答案是**肯定**的，您可以对不需要在类定义中的函数使用 javadoc 注释。

为什么使用 javadoc 注释而不是常规注释？主要原因是使用 Javadoc 工具，该工具将创建一个本地 API (html) 参考文档，解释如何使用您的函数以及这些函数（和类方法）期望的返回类型。如果没有 javadoc 注释，Javadoc 工具将无法将任何内容放入生成的 API 文档中。您在 javadoc 注释中输入的内容将被格式化为您自己的 API 的 html 文件。javadoc 工具将 /** 视为特殊注释并读取该内容。Java 编译器（或 PHP 解释器）会看到 /** 并认为它是 /* 在下一个 */ 之前忽略所有内容，他们将其视为任何常规注释。

因此，如果您打算拥有一个易于阅读的可点击链接参考文档，那么 javadoc 注释是绝对必要的，如果没有，它们没有任何区别。但是，将 Javadoc API 作为参考可以节省大量时间，无需在代码中查找函数即可查看函数的工作方式。

如果我需要其他人来帮助我完成一个项目，那么拥有我的文件的 Javadoc API 非常棒。在 Web 浏览器中单击超链接以查看函数的解释比查找文件、打开文件、查找函数、阅读代码并确定它的作用要容易得多。

让我们使用这个例子：

```
public int addSquares( int x, int y ) {
  int value = x*x + y*y;
  return value;
} 
```

就其本身而言，您必须阅读该函数需要两个整数，将两者平方并返回两个平方的总和。如果我们要使用 Javadoc 来编写函数：

```
/**
* Squares two numbers, and returns the sum of those squared numbers.
* @param x first value to square
* @param y second value to square
* @return value of x*x + y*y
*/ 
```

如果您通过 Javadoc 工具运行 .java 文件，您将拥有一个显示以下内容的 html 文件：

```
int addSquares( int x, int y )
    Squares two numbers, and returns the sum of those squared numbers. 
```

这为您提供了函数的返回类型、参数和简短描述。此外，“addSquares”将是指向同一 HTML 页面中更具描述性部分的超链接，类似于：

**addSquares**
*public int addSquares( int x, int y )*
对两个数求平方，并返回这些平方数之和。

*参数：*
x 第一个值平方
y 第二个值平方

*返回：*
x*x + y*y 的值

是的，对于这个例子来说，阅读代码非常简单，但是当你的函数/方法/类变得更加复杂时，使用由 Javadoc 注释创建的参考 API 会更快。因此，除非您计划创建参考 API 文档，否则 javadoc 注释与常规注释没有什么不同，只是它们在您的编辑器中提供了不同的颜色。

# wordpress - Wordpress htaccess 不是目录规则，无论如何都会继续触发

> ID：15669335
> 
> 赞同：1
> 
> 时间：2013-03-27T20:58:20.753
> 
> 标签：wordpress, .htaccess, mod-rewrite

我在服务器上安装的网站有一个奇怪的问题，完全相同的代码在其他地方也可以工作，所以我被困在这里试图找出什么不起作用。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

这是标准的 Wordpress htaccess。从技术上讲，“！-d”规则应该允许我列出或访问任何目录，但在这个安装中，情况并非如此。

我有一个“admin”文件夹，wordpress 不断启动并将管理 url 处理为“wp-admin”，但这不是我想要的。我已经有其他服务器，其中我有一个与 wordpress 混合的自定义“admin”文件夹，它启动良好，但这里似乎发生了一些奇怪的事情。

我们所做的：

*   禁用重写引擎，wordpress 关闭文件夹响应
*   禁用/重新启用重写引擎（以刷新可能的现有规则）不
*   尝试添加“RewriteCond %{REQUEST_URI} !^/admin”，不起作用，WP 仍然启动

各位能不能推荐点别的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:30:27.397

经过一些测试，我们发现 wordpress 可以捕获所有错误消息，甚至是我们服务器上的 401。它一直显示 404，因为那是 Wordpress 唯一呈现的错误。

为此，我们只放了一个

```
RewriteEngine Off 
```

在我们试图访问的文件夹中并指责！现在一切正常！

我希望这可以帮助别人！

# java - 如何从 RestTemplate postForLocation 获得 STRING 响应？

> ID：15669337
> 
> 赞同：9
> 
> 时间：2013-03-27T20:58:28.520
> 
> 标签：java, spring, rest

我正在使用 Spring Framework 中的 RestTemplate 在 Java 中创建一个 REST 客户端。

一切都很好，直到我不得不用**postForLocation 发帖**。

我有权访问的 Web 服务返回一个 json，其中包含有关 POST ACTION 的信息。

在 PHP 中很好，但我真的不明白如何在 Java 中使用 RestTemplate。

```
public String doLogin()
    {
        Map<String, String> args = new HashMap<String, String>();

        args.put("email", AUTH_USER);
        args.put("token", AUTH_PASS);

        String result = restTemplate.postForLocation(API_URL + "account/authenticate/?email={email}&token={token}", String.class, args);

        return result;
    } 
```

这将返回 NULL。

使用相同的代码但使用**getForObject**（当然，将 URL 更改为正确的内容）我有一个完整的响应，即这有效：

`String result = restTemplate.getForObject(url, String.class);`

那么......如何从**postForLocation**获得响应？

Obs.：对不起，如果这个问题很愚蠢。我是Java的初学者

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T21:02:46.670

该`postForLocation`方法返回 Location 标头的值。您应该`postForObject`与`String`返回服务器响应的类一起使用。

所以像这样：

```
String result = restTemplate.postForObject(API_URL + "account/authenticate/?email={email}&token={token}", String.class, args); 
```

这会将响应作为字符串返回。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T21:26:44.007

感谢其中一个答案，我已经弄清楚如何使用 postForObject 从带有 Spring 的 POST 中获取响应

```
String result = restTemplate.postForObject(API_URL + "account/authenticate/?email="+ AUTH_USER +"&token="+ AUTH_PASS, null, String.class); 
```

出于某种原因，我不能在 MAP 中使用参数，而必须将它们内联在 URL 中。但这对我来说很好。

# apache - Apache ProxyPass 和错误

> ID：15669340
> 
> 赞同：0
> 
> 时间：2013-03-27T20:58:32.883
> 
> 标签：apache, proxy, glassfish

我有两个 ProxyPass 指令：

```
ProxyPass /client/ http://10.0.0.8:8080/client/
<Location /client/>
    RequestHeader edit X-GWT-Module-Base ^(.*)/client/(.*)$ $1/client/$2
</Location>

ProxyPass / http://10.0.0.8:8080/client/
<Location />
    RequestHeader edit X-GWT-Module-Base ^(.*)/(.*)$ $1/client/$2
</Location> 
```

`10.0.0.8`在端口 8080 上运行 Glassfish，并且`http://10.0.0.8:8080/client/`是基于 GWT 的应用程序的 URL。两个代理都可以正常工作，但 Glassfish 端出现错误除外。如果我通过 /client/ 代理，那么我会看到 Glassfish 端产生的实际错误。如果我通过 / 代理，那么我只会看到“服务器上的错误 500 调用失败，请参阅服务器日志”。我试过设置`ProxyErrorOverride Off`，但没有帮助。

为什么我没有通过 /proxy 看到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T06:46:10.263

[https://groups.google.com/d/msg/google-web-toolkit/2P15JslejXg/dldFRN_pIeEJ](https://groups.google.com/d/msg/google-web-toolkit/2P15JslejXg/dldFRN_pIeEJ)

是我现在使用的方法，它有效：

```
ProxyPass / http://10.0.0.8:8080/myGWTApp/    
<Location />
    RequestHeader edit X-GWT-Module-Base ^(http)://([^/]+)/(.*)$ $1://$2/myGWTApp/$3
</Location> 
```

# python - 在 Chameleon 中使用代码块时出现 builtins.NameError

> ID：15669342
> 
> 赞同：-1
> 
> 时间：2013-03-27T20:58:36.163
> 
> 标签：python, chameleon, template-tal

我希望这个片段能够工作：

```
<div class="footer">
  <? python import time; year = time.strftime('%Y') ?>
  &copy; Copyright 2008-${year}, Agendaless Consulting.
</div> 
```

相反，它失败了：

```
NameError: year

 - Expression: " python import time; year = time.strftime('%Y') ?>
      &copy; Copyright 2008-${year}, Agendaless Consulting."
 - Filename:   /tmp/foo/foo/foo/foo/templates/mytemplate.pt
 - Location:   (74:8)
 - Source:     ... python import time; year = time.strftime('%Y') ?>
                  ^
 - Arguments:  view: <function my_view at 0x7f48d0bca3b0>
               repeat: {...} (0)
               req: <Request - at 0x7f48d29173d0>
               renderer_name: templates/mytemplate.pt
               project: foo
               request: <Request - at 0x7f48d29173d0>
               renderer_info: <RendererHelper - at 0x7f48d0bd1450>
               context: <DefaultRootFactory None at 0x7f48d2917450> 
```

作为背景，我们的想法是避免每年都更新年份：

```
<div class="footer">
  &copy; Copyright 2008-2012, Agendaless Consulting.
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:58:36.163

`?`第一个和之间不应有空格`python`。以下效果很好：

```
<div class="footer">
  <?python import time; year = time.strftime('%Y') ?>
  &copy; Copyright 2008-${year}, Agendaless Consulting.
</div> 
```

奇怪的。

# android - 具有按文本过滤的图像和文本的 ListView

> ID：15669346
> 
> 赞同：2
> 
> 时间：2013-03-27T20:58:45.537
> 
> 标签：android, image, listview, text

原始帖子：我有一个带有图像和文本的 ListView 和一个 TextView 来按文本过滤行。当我运行我的应用程序时，它不显示图像，而是显示对象引用而不是文本。

编辑后：我更新了 MainActivity.java 并添加了两个新类 MeetingAdapter.java 和 MeetingFilter.java 现在问题是我的应用程序没有根据搜索的文本过滤结果

**main_activity_layout.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- Meeting name filter -->
<EditText
    android:id="@+id/find_meeting_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/find_meeting_name_hint"
    android:inputType="text" />

<!-- Meeting list -->
<ListView
    android:id="@+id/meeting_name_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

**meeting_list_item.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<!-- Meeting image -->
<ImageView
    android:id="@+id/meeting_image"
    android:layout_width="48dip"
    android:layout_height="48dip"
    android:contentDescription="@string/meeting_image_description" />

<!-- Meeting name -->
<TextView android:id="@+id/meeting_name"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:layout_weight="1.0"
    android:textIsSelectable="true"
    android:textSize="12sp" /> 
```

**MainActivity.java**

```
import java.util.ArrayList;
import java.util.Date;

import android.app.Activity;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.Menu;
import android.widget.EditText;
import android.widget.ListView;

public class MainActivity extends Activity {

    private EditText findMeetingName;
    private MeetingAdapter meetingAdapter;
    private ListView meetingNameList;

    private ArrayList<Meeting> meetings;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity_layout);

        findMeetingName = (EditText) findViewById(R.id.find_meeting_name);
        findMeetingName.addTextChangedListener(new TextWatcher() {

            @Override
            public void afterTextChanged(Editable s) {
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            }

            @Override
            public void onTextChanged(CharSequence charSequence, int start, int before, int count) {
                MainActivity.this.meetingAdapter.getFilter().filter(charSequence);
                meetingAdapter.notifyDataSetChanged();
            }

        });

        meetings = new ArrayList<Meeting>();
        Meeting meeting = null;
        for (int i = 0; i < 5; i++) {
            meeting = new Meeting();
            meeting.setId(i + 1);
            meeting.setName("Cita #" + (i + 1));
            meeting.setDescription("Descripción #" + (i + 1));
            meeting.setImage(BitmapFactory.decodeResource(getBaseContext().getResources(), R.drawable.icon48x48_1));
            meeting.setInitialDate(new Date());
            meetings.add(meeting);
        }

        meetingAdapter = new MeetingAdapter(this, meetings);
        meetingNameList = (ListView) findViewById(R.id.meeting_name_list);
        meetingNameList.setAdapter(meetingAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

**会议适配器.java**

```
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Filter;
import android.widget.Filterable;
import android.widget.ImageView;
import android.widget.TextView;

public class MeetingAdapter extends BaseAdapter implements Filterable {

    LayoutInflater inflater;
    ArrayList<Meeting> meetings;

    public MeetingAdapter(Activity activity, ArrayList<Meeting> meetings) {
        this.meetings = meetings;
        inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        return meetings.size();
    }

    @Override
    public Object getItem(int position) {
        return meetings.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup mainViewGroup) {
        View mRow = inflater.inflate(R.layout.meeting_list_item, mainViewGroup, false);

        // Se setean los valores para cada componente de la lista
        TextView meetingName = (TextView) mRow.findViewById(R.id.meeting_name);
        meetingName.setText(meetings.get(position).getName());
        ImageView meetingImage = (ImageView) mRow.findViewById(R.id.meeting_image);
        meetingImage.setImageBitmap(meetings.get(position).getImage());

        return mRow;
    }

    @Override
    public Filter getFilter() {
        MeetingFilter filter = new MeetingFilter(meetings);
        return filter;
    }

} 
```

**会议过滤器.java**

```
import java.util.ArrayList;

import android.widget.Filter;

public class MeetingFilter extends Filter {

    //MeetingAdapter meetingAdapter;
    ArrayList<Meeting> meetings;

    public MeetingFilter(ArrayList<Meeting> meetings){
        //this.meetingAdapter = meetingAdapter;
        this.meetings = meetings;
    }

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults filteredResults = new FilterResults();
        if(constraint.length() == 0) {
            filteredResults.values = meetings;
            filteredResults.count = meetings.size();
            return filteredResults;
        }

        ArrayList<Meeting> filteredMeetings = new ArrayList<Meeting>();
        for (Meeting meeting : meetings) {
            // TODO Revisar problemas de internacionalización
            if(meeting.getName().toLowerCase().contains(constraint.toString().toLowerCase())) {
                filteredMeetings.add(meeting);
            }
        }
        filteredResults.values = filteredMeetings;
        filteredResults.count = filteredMeetings.size();

        return filteredResults;
    }

    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        meetings = (ArrayList<Meeting>) results.values;
        //meetingAdapter.notifyDataSetChanged();
    }

} 
```

**会议.java**

```
import java.util.Date;

import android.graphics.Bitmap;

public class Meeting {

    private int id;

    private String name;

    private String description;

    private Bitmap image;

    private Date initialDate;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public Bitmap getImage() {
        return image;
    }

    public void setImage(Bitmap image) {
        this.image = image;
    }

    public Date getInitialDate() {
        return initialDate;
    }

    public void setInitialDate(Date initialDate) {
        this.initialDate = initialDate;
    }

} 
```

一世

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:08:43.763

正如上面提到的@Pragnani，您需要像这样创建一个自定义适配器：

```
public class customAdapter extends BaseAdapter
{
    public int getCount() 
    {
        return list.length;
    }

    public Object getItem(int itemData) 
    {
        return null;
    }

    public long getItemId(int itemPosition) 
    {
        return itemPosition;
    }

    public View getView(int position, View mainView, ViewGroup mainViewGroup) 
    {
        LayoutInflater maniInFlater = getLayoutInflater();
        View mRow = maniInFlater.inflate(R.layout.yourlayout_layout, mainViewGroup, false);
        TextView sampleText = (TextView) mRow.findViewById(R.id.sample_id);
        return mRow;
    }
} 
```

然后将其设置为您的`ListView`适配器：

```
lv.setAdapter(new customAdapter()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:03:18.817

因为你只`TextView`在你的`ArrayAdapter` ie中使用

```
arrayAdapter = new ArrayAdapter<Meeting>(this, R.layout.meeting_list_item, R.id.meeting_name, meetings); 
```

您尝试仅在 TextView 中打印会议名称，ArrayAdapter 会将 TextView 作为资源来填充列表中的数据。所以`try to take a custom Adapter which extends ArrayAdapter or Base Adapter`或者干脆使用`SimpleAdapter`

# excel - 替换 MCONCAT 公式中的分隔符

> ID：15669350
> 
> 赞同：0
> 
> 时间：2013-03-27T20:59:06.193
> 
> 标签：excel, delimiter, array-formulas

我正在使用 MCONCAT 公式（在其他人的成功和帮助下）创建多个附件名称的单个字符串，以将它们与单个记录相关联#（我正在通过平面文件和数据加载器）。

一个例子：| 合同 1 | 文件名.pdf，文件名2.doc |

但是，当第一次加载运行时，名称中带有逗号的记录会出错，因为数据加载器将逗号视为文件之间的分隔符。经过一番研究，我们决定使用“@”作为单元格中多个文件之间的分隔符。现在我被困在试图用“@”替换我的 MCONCAT 公式中的逗号分隔符并且到目前为止没有结果。

这是我现在使用的代码：

```
=SUBSTITUTE(MCONCAT(IF($A$2:$A$11133=$D2,", "&$B$2:$B$11133,"")),", ","",1) 
```

这可能吗？如果是这样，如何&也许（如果要求不高）简短的解释，以便我能完全理解。

一个有希望的解决方案的例子：| 合同 1 | 文件名.pdf @ 文件名2.doc |

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:26:30.657

根据带逗号的文件名的复杂性，您可以简单地使用 excel 的查找和选择/替换功能来做您想做的事情。

如果您尝试任何建议，请使用您的工作簿的*副本*。

如果您的分隔符*始终* `[list item][comma][space][list item]`是并且您不`[list item(s)]`包含任何内容，`[comma][space]`则使用“查找内容”术语“，”（注意空格！）和“替换为”术语“@”，使用`[at][space]`而不是`[space][at][space]`可能更好，并选择列包含列表应该可以解决您的问题。

VBA 解决方案是可能的，但它可能会比它的价值更多的努力。你可能需要编写很多规则来告诉它如何拆分和连接东西，最终它仍然不完美。

虽然手动操作可能不是一个有趣的想法，但您可以使用“文本到列”之类的方法来拆分列表，然后查看结果并修复错误，然后使用新的分隔符重新加入。

# ruby - Rubygems 预期之前的 Gem 版本出现问题

> ID：15669352
> 
> 赞同：0
> 
> 时间：2013-03-27T20:59:19.477
> 
> 标签：ruby, rubygems

我使用的 gem 的版本似乎有问题。我没有互联网访问权限，我直接从 Rubyforge 下载了 gem，然后将它 SCPed 到目标机器上，我曾经`gem install --force --local`安装它。Ruby/Rubygems 来自大约一个月前拍摄的 EPEL 存储库的快照。它托管在网络中的一台机器上，并且 YUM 被配置为跨网络指向正确的位置。

我正在尝试使用 Net::SSH 宝石系列（Net:SSH、Net::SSH::Shell、Net::SSH::Multi、Net::SSH::Gateway、Net::SCP）。当我运行我的时，`file.rb`我得到了这个：

```
/usr/lib/ruby/site_ruby/1.8/rubygems.rb:779:in `report_activate_error': RubyGem version error: net-ssh(2.6.6 not ~> 2.1.0) (Gem::LoadError)
        from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:214:in `activate'
        from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:249:in `activate' 
        from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:248:in `each'
        from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:248:in `activate'
        from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:35:in `require'
        from ./cluster_config.rb:12 
```

我在互联网上看到了很多关于实际版本低于预期版本的问题，但我只发现实际版本比预期更新的示例，但它已通过来自的响应“解决” OP 说“我的朋友知道了，谢谢。”

这也是我第一次看到`~>`运营商在这方面的使用。通常我在这里见过`>=`运营商。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:09:11.460

`~>`在 Gemfiles 中使用以允许使用补丁版本大于或等于指定版本的 gem，前提是主要和次要版本相同。例如：

`~> 2.1.0`将允许 version `2.1.9`，但不允许`2.2.0`or `2.0.0`。

`~> 2.1.3`也允许`2.1.9`但不允许`2.1.0`or `2.2.0`。

此外，您可能可以直接从 RubyGems 下载您需要的确切版本。在您的情况下，链接将是[http://rubygems.org/downloads/net-ssh-2.1.0.gem](http://rubygems.org/downloads/net-ssh-2.1.0.gem)。

# plone - 更改 Plone 新闻源项目的发布日期

> ID：15669354
> 
> 赞同：0
> 
> 时间：2013-03-27T20:59:22.307
> 
> 标签：plone

有没有办法在 Plone 中更改新闻源项目的发布日期？我有一个 Plone 4.1 实例。我们做得不对，其中一项包含很多新闻。我将它们分成单独的项目，但它们不再按时间顺序排列。

我知道有一个内容选项卡，您可以通过拖动一个项目来重新排序。但是它不粘。

无论如何，我看不到在 ZMI 中这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:16:10.567

RSS 提要使用标签的生效（或发布）日期，回退到修改日期`<dc:date/>`。

为您的内容提供正确的生效日期以更正 RSS 提要中的日期，请参阅`Edit`-> `Dates`-> `Publishing Date`。

# c# - 功能的表现 和继承

> ID：15669358
> 
> 赞同：13
> 
> 时间：2013-03-27T20:59:32.513
> 
> 标签：c#, .net, performance, generics, inheritance

在使用继承和泛型时，我一直无法理解在`Func<...>`整个代码中使用的性能特征——这是我发现自己一直在使用的组合。

让我从一个最小的测试用例开始，这样我们都知道我们在说什么，然后我将发布结果，然后我将解释我的期望以及为什么......

**最小测试用例**

```
public class GenericsTest2 : GenericsTest<int> 
{
    static void Main(string[] args)
    {
        GenericsTest2 at = new GenericsTest2();

        at.test(at.func);
        at.test(at.Check);
        at.test(at.func2);
        at.test(at.Check2);
        at.test((a) => a.Equals(default(int)));
        Console.ReadLine();
    }

    public GenericsTest2()
    {
        func = func2 = (a) => Check(a);
    }

    protected Func<int, bool> func2;

    public bool Check2(int value)
    {
        return value.Equals(default(int));
    }

    public void test(Func<int, bool> func)
    {
        using (Stopwatch sw = new Stopwatch((ts) => { Console.WriteLine("Took {0:0.00}s", ts.TotalSeconds); }))
        {
            for (int i = 0; i < 100000000; ++i)
            {
                func(i);
            }
        }
    }
}

public class GenericsTest<T>
{
    public bool Check(T value)
    {
        return value.Equals(default(T));
    }

    protected Func<T, bool> func;
}

public class Stopwatch : IDisposable
{
    public Stopwatch(Action<TimeSpan> act)
    {
        this.act = act;
        this.start = DateTime.UtcNow;
    }

    private Action<TimeSpan> act;
    private DateTime start;

    public void Dispose()
    {
        act(DateTime.UtcNow.Subtract(start));
    }
} 
```

**结果**

```
Took 2.50s  -> at.test(at.func);
Took 1.97s  -> at.test(at.Check);
Took 2.48s  -> at.test(at.func2);
Took 0.72s  -> at.test(at.Check2);
Took 0.81s  -> at.test((a) => a.Equals(default(int))); 
```

**我期望什么以及为什么**

我希望这段代码对于所有 5 种方法都以完全相同的速度运行，更准确地说，甚至比其中任何一种方法都快，即与以下方法一样快：

```
using (Stopwatch sw = new Stopwatch((ts) => { Console.WriteLine("Took {0:0.00}s", ts.TotalSeconds); }))
{
    for (int i = 0; i < 100000000; ++i)
    {
        bool b = i.Equals(default(int));
    }
}
// this takes 0.32s ?!? 
```

我预计它需要 0.32 秒，因为我看不出 JIT 编译器在这种特殊情况下不内联代码的任何理由。

仔细观察，我根本不了解这些性能数字：

*   `at.func`传递给函数并且在执行期间不能更改。为什么这不是内联的？
*   `at.Check`显然比 快`at.Check2`，而两者都不能被覆盖并且 at.Check 在类 GenericsTest2 的情况下像石头一样固定
*   `Func<int, bool>`在传递内联`Func`而不是转换为的方法时，我认为没有理由放慢速度`Func`
*   为什么测试用例 2 和 3 之间的差异高达 0.5 秒，而案例 4 和 5 之间的差异是 0.1 秒——它们不应该是相同的吗？

**问题**

我真的很想理解这一点......这里发生了什么，使用通用基类比内联整个批次慢 10 倍？

所以，基本上问题是：为什么会发生这种情况，我该如何解决？

**更新**

根据到目前为止的所有评论（谢谢！）我做了更多的挖掘。

首先，重复测试并将循环放大 5 倍并执行 4 次时的一组新结果。我使用了诊断秒表并添加了更多测试（也添加了描述）。

```
(Baseline implementation took 2.61s)

--- Run 0 ---
Took 3.00s for (a) => at.Check2(a)
Took 12.04s for Check3<int>
Took 12.51s for (a) => GenericsTest2.Check(a)
Took 13.74s for at.func
Took 16.07s for GenericsTest2.Check
Took 12.99s for at.func2
Took 1.47s for at.Check2
Took 2.31s for (a) => a.Equals(default(int))
--- Run 1 ---
Took 3.18s for (a) => at.Check2(a)
Took 13.29s for Check3<int>
Took 14.10s for (a) => GenericsTest2.Check(a)
Took 13.54s for at.func
Took 13.48s for GenericsTest2.Check
Took 13.89s for at.func2
Took 1.94s for at.Check2
Took 2.61s for (a) => a.Equals(default(int))
--- Run 2 ---
Took 3.18s for (a) => at.Check2(a)
Took 12.91s for Check3<int>
Took 15.20s for (a) => GenericsTest2.Check(a)
Took 12.90s for at.func
Took 13.79s for GenericsTest2.Check
Took 14.52s for at.func2
Took 2.02s for at.Check2
Took 2.67s for (a) => a.Equals(default(int))
--- Run 3 ---
Took 3.17s for (a) => at.Check2(a)
Took 12.69s for Check3<int>
Took 13.58s for (a) => GenericsTest2.Check(a)
Took 14.27s for at.func
Took 12.82s for GenericsTest2.Check
Took 14.03s for at.func2
Took 1.32s for at.Check2
Took 1.70s for (a) => a.Equals(default(int)) 
```

我从这些结果中注意到，当您开始使用泛型时，它会变得慢得多。深入挖掘我为非泛型实现找到的 IL：

```
L_0000: ldarga.s 'value'
L_0002: ldc.i4.0 
L_0003: call instance bool [mscorlib]System.Int32::Equals(int32)
L_0008: ret 
```

对于所有通用实现：

```
L_0000: ldarga.s 'value'
L_0002: ldloca.s CS$0$0000
L_0004: initobj !T
L_000a: ldloc.0 
L_000b: box !T
L_0010: constrained. !T
L_0016: callvirt instance bool [mscorlib]System.Object::Equals(object)
L_001b: ret 
```

虽然其中大部分都可以优化，但我认为这`callvirt`可能是一个问题。

为了让它更快，我在方法的定义中添加了 'T : IEquatable' 约束。结果是：

```
L_0011: callvirt instance bool [mscorlib]System.IEquatable`1<!T>::Equals(!0) 
```

虽然我现在对性能有了更多了解（它可能无法内联，因为它创建了一个 vtable 查找），但我仍然感到困惑：为什么它不简单地调用 T::Equals？毕竟，我*确实*指定它会在那里......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T10:55:11.937

始终运行微基准测试 3 次。第一个将触发 JIT 并排除它。检查第 2 次和第 3 次运行是否相等。这给出了：

```
... run ...
Took 0.79s
Took 0.63s
Took 0.74s
Took 0.24s
Took 0.32s
... run ...
Took 0.73s
Took 0.63s
Took 0.73s
Took 0.24s
Took 0.33s
... run ...
Took 0.74s
Took 0.63s
Took 0.74s
Took 0.25s
Took 0.33s 
```

线

```
func = func2 = (a) => Check(a); 
```

添加一个额外的函数调用。删除它

func = func2 = this.Check;

给出：

```
... 1\. run ...
Took 0.64s
Took 0.63s
Took 0.63s
Took 0.24s
Took 0.32s
... 2\. run ...
Took 0.63s
Took 0.63s
Took 0.63s
Took 0.24s
Took 0.32s
... 3\. run ...
Took 0.63s
Took 0.63s
Took 0.63s
Took 0.24s
Took 0.32s 
```

这表明 1\. 和 2\. run 之间的（JIT？）效果由于删除了函数调用而消失了。**前 3 个测试现在相等**。

在测试 4 和 5 中，编译器可以将函数参数内联到 void test(Func<>)，而在测试 1 到 3 中，编译器要确定它们是常量还有很长的路要走。有时，从我们的编码人员的角度来看，编译器存在一些不容易看到的约束，例如 .Net 和 Jit 约束来自 .Net 程序的动态特性，与由 c++ 生成的二进制文件相比。无论如何，在这里有所不同的是函数 arg 的内联。

4和5的区别？好吧，test5 看起来编译器也可以很容易地内联函数。也许他为闭包构建了一个上下文并解决它比需要的更复杂一些。没有深入了解 MSIL。

使用 .Net 4.5 进行上述测试。这里有 3.5，证明编译器通过内联变得更好：

```
... 1\. run ...
Took 1.06s
Took 1.06s
Took 1.06s
Took 0.24s
Took 0.27s
... 2\. run ...
Took 1.06s
Took 1.08s
Took 1.06s
Took 0.25s
Took 0.27s
... 3\. run ...
Took 1.05s
Took 1.06s
Took 1.05s
Took 0.24s
Took 0.27s 
```

和.Net 4：

```
... 1\. run ...
Took 0.97s
Took 0.97s
Took 0.96s
Took 0.22s
Took 0.30s
... 2\. run ...
Took 0.96s
Took 0.96s
Took 0.96s
Took 0.22s
Took 0.30s
... 3\. run ...
Took 0.97s
Took 0.96s
Took 0.96s
Took 0.22s
Took 0.30s 
```

**现在将 GenericTest<> 更改为 GenericTest ！**

```
... 1\. run ...
Took 0.28s
Took 0.24s
Took 0.24s
Took 0.24s
Took 0.27s
... 2\. run ...
Took 0.24s
Took 0.24s
Took 0.24s
Took 0.24s
Took 0.27s
... 3\. run ...
Took 0.25s
Took 0.25s
Took 0.25s
Took 0.24s
Took 0.27s 
```

**嗯，这是来自 C# 编译器的一个惊喜，类似于我遇到的密封类以避免虚函数调用。也许埃里克·利珀特对此有话要说？**

删除对聚合的继承可以恢复性能。我学会了从不使用继承，很少使用，并且强烈建议您至少在这种情况下避免使用它。（这是我对这个问题的务实解决方案，没有任何火焰战争的意图）。我一直使用接口，它们没有性能损失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T12:55:29.213

我将解释我认为在这里和所有泛型发生了什么。我需要一些空间来写，所以我将其发布为答案。感谢大家的评论和帮助解决这个问题，我会确保在这里和那里奖励积分。

开始...

**编译泛型**

众所周知，泛型是编译器在运行时填写类型信息的“模板”类型。它可以根据约束做出假设，但不会更改 IL 代码……（稍后会详细介绍）。

我的问题中的一种方法：

```
public class Foo<T>
{
    public void bool Handle(T foo) 
    {
        return foo.Equals(default(T));
    }
} 
```

这里的约束`T`是一个，这意味着对 Object.Equals`Object`的调用。`Equals`由于 T 正在实现 Object.Equals，这将如下所示：

```
L_0016: callvirt instance bool [mscorlib]System.Object::Equals(object) 
```

我们可以通过添加约束来明确`T`实现这一点来改进这一点。这会将调用更改为：`Equals``T : IEquatable<T>`

```
L_0011: callvirt instance bool [mscorlib]System.IEquatable`1<!T>::Equals(!0) 
```

但是，由于 T 还没有填写，显然 IL 不支持`T::Equals(!0)`直接调用，即使它肯定存在。编译器显然只能假设约束已经满足，因此它需要调用`IEquatable`1` 来定义方法。

显然，像`sealed`这样的提示并没有什么不同，即使它们应该有。

结论：因为`T::Equals(!0)`不支持，所以需要vtable查找才能使其工作。一旦它变成了`callvirt`.JIT 编译器就很难确定它应该只使用`call`.

应该发生什么：基本上微软应该`T::Equals(!0)`在这种方法明确存在时支持。这将调用更改为`call`IL 中的正常调用，使其更快。

**但它变得更糟**

那么调用 Foo::Handle 呢？

令我惊讶的是，对的调用`Foo<T>::Handle`也是 a`callvirt`而不是 a `call`。可以为 f.ex 找到相同的行为。`List<T>::Add`等等。我的观察是，只有使用的调用`this`才会成为正常的`call`；其他所有内容都将编译为`callvirt`.

结论：这种行为就像你得到了一个类结构`Foo<int>:Foo<T>:[the rest]`，这实际上没有任何意义。显然，从该类外部对泛型类的所有调用都将编译 vtable 查找。

应该发生什么：如果方法是非虚拟的， Microsoft 应该将其更改`callvirt`为 a 。`call`callvirt 真的没有任何理由。

**结论**

如果您使用其他类型的泛型，请准备好使用 a`callvirt`而不是 a `call`，即使这不是必需的。由此产生的性能基本上是您可以从这样的调用中所期望的......

恕我直言，这是一个真正的耻辱。类型安全应该帮助开发人员，同时让你的代码更快，因为编译器可以对正在发生的事情做出假设。我从这一切中学到的教训是：**不要使用泛型，除非你不关心额外的 vtable 查找（直到微软修复了这个）**。

**未来的工作**

首先，我将在 Microsoft Connect 上发布此内容。我认为这是 .NET 中的一个严重错误，它会在没有任何充分理由的情况下降低性能。（[https://connect.microsoft.com/VisualStudio/feedback/details/782346/using-generics-will-always-compile-to-callvirt-even-if-this-is-not-necessary](https://connect.microsoft.com/VisualStudio/feedback/details/782346/using-generics-will-always-compile-to-callvirt-even-if-this-is-not-necessary)）

* * *

**来自 Microsoft Connect 的结果**

是的，我们有了结果，我要感谢 Mike Danes！

方法调用`foo.Equals(default(T))`将编译为，`Object.Equals(boxed[new !0])`因为所有 T 的唯一共同点是`Object.Equals`. 这将导致装箱操作和 vtable 查找。

如果我们希望事物使用正确的 Equals，我们必须给编译器一个提示，即类型 implement `bool Equals(T)`。这可以通过告诉编译器类型`T`实现来完成`IEquatable<T>`。

换句话说：更改类的签名如下：

```
public class GenericsTest<T> where T:IEquatable<T>
{
    public bool Check(T value)
    {
        return value.Equals(default(T));
    }

    protected Func<T, bool> func;
} 
```

当你这样做时，运行时会找到正确的`Equals`方法。呸...

要彻底解决这个难题，还需要一个元素：.NET 4.5。.NET 4.5 的运行时能够内联此方法，从而使其再次达到应有的速度。在 .NET 4.0（这是我目前正在使用的）中，此功能似乎不存在。在 IL 中调用仍然是 a `callvirt`，但运行时无论如何都会解决这个难题。

如果你测试这段代码，它应该和最快的测试用例一样快。**有人可以确认一下吗？**

# hibernate - 序列化休眠对象时避免延迟加载异常

> ID：15669359
> 
> 赞同：1
> 
> 时间：2013-03-27T20:59:34.743
> 
> 标签：hibernate

我想将休眠对象添加到 HTTP 会话。HTTP Session 参与集群环境并通过序列化进行复制。在序列化 HTTP 会话时，会抛出延迟加载异常，因为它超出了会话的范围。似乎应该有一种方法来指示休眠状态不要尝试序列化尚未延迟加载的对象。毕竟，那是对象图的状态，而序列化转储对象图的状态。如果一个对象只是一个代理，因为它没有被加载，那么只有代理应该被序列化。正确的？无论如何，这是我希望看到的行为。关于如何实现这一点的任何想法？

当然，期望序列化的对象可以在另一台服务器上反序列化，并且会话将得到适当的处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:04:55.670

在集群环境中，您可能只想在 HTTP 会话中存储 objectId。这样集群节点就可以查询数据库中的真实节点。

另一种选择是从 Hibernate Session 中分离 Hibernate 对象并对其进行序列化。（在这种情况下，您可能需要初始化延迟字段）。为了初始化延迟加载的字段，您可能需要使用[它](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Hibernate.html#initialize%28java.lang.Object%29)

通常，如果您在服务器之间传递对象，则必须初始化所有延迟加载的字段，否则在序列化时会出现异常，因为您将无法序列化/反序列化休眠会话。

是的，不要将 HTTP 会话与 Hibernate 会话混合。这些是完全不同的东西。

# android - Android - 如何在通话期间检索对话伴侣的号码

> ID：15669362
> 
> 赞同：0
> 
> 时间：2013-03-27T20:59:56.327
> 
> 标签：android

我正在尝试在通话过程中检索对方的电话号码。我认为在这里收听 PhoneStateListener 的解决方案并不好，因为我宁愿在用户请求时获取号码，而不是在电话状态更改时获取号码。

此外，无论是谁发起呼叫，我都想找回那个号码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:01:50.690

这是我为此写的一堂课。它有关于开始、结束和未接来电的通知以及时间和电话号码。只需从它派生并覆盖抽象函数。

```
package com.gabesechan.android.reusable.receivers;

import java.util.Date;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;

public abstract class PhonecallReceiver extends BroadcastReceiver {

    //The receiver will be recreated whenever android feels like it.  We need a static variable to remember data between instantiations
    static PhonecallStartEndDetector listener;
    String outgoingSavedNumber;
    protected Context savedContext;

    @Override
    public void onReceive(Context context, Intent intent) {
        savedContext = context;
        if(listener == null){
            listener = new PhonecallStartEndDetector();
        }

        //We listen to two intents.  The new outgoing call only tells us of an outgoing call.  We use it to get the number.
        if (intent.getAction().equals("android.intent.action.NEW_OUTGOING_CALL")) {
            listener.setOutgoingNumber(intent.getExtras().getString("android.intent.extra.PHONE_NUMBER"));
            return;
        }

        //The other intent tells us the phone state changed.  Here we set a listener to deal with it
        TelephonyManager telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE); 
        telephony.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);
    }

    //Derived classes should override these to respond to specific events of interest
    protected abstract void onIncomingCallStarted(String number, Date start);
    protected abstract void onOutgoingCallStarted(String number, Date start);
    protected abstract void onIncomingCallEnded(String number, Date start, Date end); 
    protected abstract void onOutgoingCallEnded(String number, Date start, Date end);
    protected abstract void onMissedCall(String number, Date start);

    //Deals with actual events
    public class PhonecallStartEndDetector extends PhoneStateListener {
        int lastState = TelephonyManager.CALL_STATE_IDLE;
        Date callStartTime;
        boolean isIncoming;
        String savedNumber;  //because the passed incoming is only valid in ringing

        public PhonecallStartEndDetector() {}

        //The outgoing number is only sent via a separate intent, so we need to store it out of band
        public void setOutgoingNumber(String number){
            savedNumber = number;
        }

        //Incoming call-  goes from IDLE to RINGING when it rings, to OFFHOOK when it's answered, to IDLE when its hung up
        //Outgoing call-  goes from IDLE to OFFHOOK when it dials out, to IDLE when hung up
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            super.onCallStateChanged(state, incomingNumber);
            if(lastState == state){
                //No change, debounce extras
                return;
            }
            switch (state) {
                case TelephonyManager.CALL_STATE_RINGING:
                    isIncoming = true;
                    callStartTime = new Date();
                    savedNumber = incomingNumber;
                    onIncomingCallStarted(incomingNumber, callStartTime);
                    break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    //Transition of ringing->offhook are pickups of incoming calls.  Nothing donw on them
                    if(lastState != TelephonyManager.CALL_STATE_RINGING){
                        isIncoming = false;
                        callStartTime = new Date();
                        onOutgoingCallStarted(savedNumber, callStartTime);                      
                    }
                    break;
                case TelephonyManager.CALL_STATE_IDLE:
                    //Went to idle-  this is the end of a call.  What type depends on previous state(s)
                    if(lastState == TelephonyManager.CALL_STATE_RINGING){
                        //Ring but no pickup-  a miss
                        onMissedCall(savedNumber, callStartTime);
                    }
                    else if(isIncoming){
                        onIncomingCallEnded(savedNumber, callStartTime, new Date());                        
                    }
                    else{
                        onOutgoingCallEnded(savedNumber, callStartTime, new Date());                                                
                    }
                    break;
            }
            lastState = state;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:04:35.547

对于来电，您必须注册`ACTION_PHONE_STATE_CHANGED`以获取电话号码。对于拨出电话，您必须注册`ACTION_NEW_OUTGOING_CALL`才能获得号码。你需要两者。

# php - 当没有从 SQL 数据库中检索到行时，不显示 div

> ID：15669371
> 
> 赞同：1
> 
> 时间：2013-03-27T21:00:30.907
> 
> 标签：php, jquery, sql, html

我在 jquery 中尝试了空选择器，但它不起作用。内容仍在显示中。我正在从 SQL 数据库中检索一些行。如果没有数据库，那么我不想显示该 div。

```
<div id="scrollingText">
<div class="scrollWrapper">
<div class="scrollableArea">
<marquee behavior="scroll" direction="left">
<p>
<?php
$con = mysql_connect("localhost","fraptech_test","");
mysql_select_db("fraptech_test", $con);
if (mysqli_connect_errno($con))
  {
echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
mysql_select_db("fraptech_ndsnotice", $con);
$result = mysql_query("SELECT * FROM ndsnotice");
while($row = mysql_fetch_array($result))
  {
  echo $row['Notice'];
  }
?>
</p>
</marquee>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:07:34.067

那是你的全部代码吗？你在使用ajax吗？如果您使用没有 ajax 的纯 PHP，只需将输出 div 设置为“if”条件？

如果您想使用 jQuery，请尝试：

```
if (  ($("div.scrollableArea p").text()).length > 0  )
{  
$("div.scrollableArea p").show();
}
else
{
$("div.scrollableArea p").hide();
} 
```

但是我猜你可以不用 jQuery 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:16:07.360

您需要将 HTML 放在 php if 子句中。

简单的例子：

```
<div id="scrollingText">
<?php
$con = mysql_connect("localhost","fraptech_test","");
mysql_select_db("fraptech_ndsnotice", $con);
$result = mysql_query("SELECT * FROM ndsnotice");
if (mysqli_connect_errno($con)) {
<div class="scrollWrapper">
<div class="scrollableArea">
<marquee behavior="scroll" direction="left">
<p>
<?php
while($row = mysql_fetch_array($result))
{
   echo $row['Notice'];
 }
?>
</p>
</marquee>
</div>
</div>
<?php } else { ?>
<div class="errordiv">Display this on error</div>
<?php } ?>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:52:27.220

谢谢你们的帮助，我做了一些改变。下面的代码做到了：

```
<?php
$con = mysql_connect("localhost","fraptech_test","");
mysql_select_db("fraptech_test", $con);
if (mysqli_connect_errno($con))
  {
echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
mysql_select_db("fraptech_ndsnotice", $con);
$result = mysql_query("SELECT * FROM ndsnotice");
if (mysql_num_rows($result) > 0) 
{
?><div id="scrollingText">
<div class="scrollWrapper">
<div class="scrollableArea">
<marquee behavior="scroll" direction="left">
<p>
<?php while($row = mysql_fetch_array($result))
  {
  echo $row['Notice'];
  }
 ?> </p>
</marquee>
</div>
</div>
</div>  
<?php } ?> 
```

# javascript - 传递函数不计算

> ID：15669379
> 
> 赞同：1
> 
> 时间：2013-03-27T21:01:18.597
> 
> 标签：javascript, function

请考虑这个javascript：

```
var a = function(arg1) {
    alert(arg1);
}

a("hello");

a(function() { return "world"; }); 
```

如何让它在第二次通话中返回“世界”？现在它以字符串的形式返回整个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:03:03.387

只需执行函数表达式，它将返回`world`并传递给`a`函数

```
a((function() { return "world"; })()); 
```

[**演示**](http://jsfiddle.net/h2z6R/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:02:27.407

您需要调用该函数，而不仅仅是引用它：

```
alert(arg1()); 
```

如果您需要处理使用`a`字符串或函数调用的情况，则需要检查参数的类型`typeof`并以不同方式处理它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:02:37.703

第二个调用`arg1`是一个函数。

要获得结果，您必须执行该函数：

```
alert(arg1()); 
```

# java - 这对我来说是最好的存储选择吗？

> ID：15669381
> 
> 赞同：0
> 
> 时间：2013-03-27T21:01:26.083
> 
> 标签：java, android

我想保存从服务器下载的图像。我希望这些图像只能从应用程序本身访问。我不希望从其他任何地方访问图像，即有人可以删除/修改它，就像它在 SD 卡上或从另一个不同的应用程序一样。我认为最好使用内部存储，因为它对我的应用程序是私有的。

[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

有更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:02:57.510

如果您想将文件保密，内部存储是最佳选择。

但是，在大多数设备上，内部存储空间非常有限，如果您使用过多，用户可能会卸载您的应用程序（图像可能非常大）。

您应该考虑使用外部存储来保存图像，如果您真的想将它们保密，可能会对其进行加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:06:13.700

正如 Raghav 已经提到的那样，这将是一个不错的选择，并且如前所述，内部存储非常有限（主要在旧设备上），但是如果您使用的是 root 设备，则无论如何都可以删除您的文件。考虑到有限的存储空间，因为人们也在他们的 SD 卡上制作“交换分区”，因为内部存储空间非常有限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:06:16.943

这是最简单的解决方案。另一个典型的解决方案是将图像作为 blob 存储在应用程序的数据库中。这将使它在您的应用程序之外完全无法访问。您可以使用此处显示的方法执行此操作：

[如何在 SQLite 数据库中存储和检索字节数组（图像数据）？](https://stackoverflow.com/questions/4191136/how-to-store-and-retrieve-a-byte-array-image-data-to-and-from-a-sqlite-databas)

这样做的缺点是您将为您的数据库（<60MB）提供相对较小的内存空间，因此这仅适用于您拥有少量图像的情况。

# entity-framework - 如何在实体框架 5 中增加/减少多用户安全

> ID：15669383
> 
> 赞同：11
> 
> 时间：2013-03-27T21:01:32.193
> 
> 标签：entity-framework, tsql

什么是增加或减少整数字段的干净、安全的方法。

我将 sql server 2012 与 entityframework 5.x 结合使用

我寻找一个等效于互锁增量/减量。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-27T21:26:27.967

标准方法是使用乐观并发。

假设您有一个简单的实体，其中包含`Counter`要递增或递减的整数字段：

```
public class SomeEntity
{
    public int SomeEntityId { get; set; }
    public int Counter { get; set; }
} 
```

您可以将`Counter`then 标记为并发令牌。使用 Fluent API 它是：

```
modelBuilder.Entity<SomeEntity>()
    .Property(s => s.Counter)
    .IsConcurrencyToken(); 
```

然后你可以`Counter`像这样增加或减少例子：

```
public void IncDecCounter(int someEntityId, bool dec)
{
    using (var context = new MyContext())
    {
        var someEntity = context.SomeEntities.Find(someEntityId);
        if (someEntity != null)
        {
            bool saveFailed;
            do
            {
                saveFailed = false;

                if (dec)
                    --someEntity.Counter;
                else
                    ++someEntity.Counter;

                try
                {
                    context.SaveChanges();
                }
                catch (DbUpdateConcurrencyException e)
                {
                    saveFailed = true;
                    e.Entries.Single().Reload();
                }
            } while (saveFailed);
        }
    }
} 
```

`SaveChanges`如果加载实体时`DbUpdateConcurrencyException`的值（在本例中，可以是任何其他查询）与在数据库中执行 UPDATE 语句时数据库中的值不同，则将失败，这意味着已经同时被其他用户修改。从技术上讲，这是通过生成的 UPDATE 语句的扩展子句来实现的，该子句不仅尝试通过 Id 过滤，而且还通过 的旧值进行过滤，基本上类似于：。`Counter``Find``Counter``Counter``WHERE``Counter``WHERE SomeEntityId = someEntityId AND Counter = oldCounterWhenTheEntityHasBeenLoaded`

该`catch`块使用数据库中的当前`Counter`值重新加载实体，并且下一个循环尝试再次增加或减少重新加载的值，直到它成功而没有并发冲突。

# ios - 基于时区字符串的 NSDate 更改

> ID：15669385
> 
> 赞同：0
> 
> 时间：2013-03-27T21:01:38.287
> 
> 标签：ios, json, twitter

我正在使用 twitter 开发 iOS 应用程序，在以我想要的格式检索日期时遇到问题。当我对 JSON 进行分阶段时，我会发布每条推文和它们的发布日期，但是它位于不同的时区。我可以使用什么转换器来获取 ex: "time_zone" = "Pacific Time (US & Canada)" 并将时间转换为本地化时间。我已经将日期字符串转换为 NSDate，所以我只是不知道如何应用时区更改。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:14:09.753

您可以使用 NSDateFormatter 的时区属性。

举个例子，如果您希望日期在 EST 中，您可以使用：

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@\"EST\"]]; 
```

这是使用 NSTimeZone 支持的缩写的完整列表。

```
ADT = "America/Halifax";
AKDT = "America/Juneau";
AKST = "America/Juneau";
ART = "America/Argentina/Buenos_Aires";
AST = "America/Halifax";
BDT = "Asia/Dhaka";
BRST = "America/Sao_Paulo";
BRT = "America/Sao_Paulo";
BST = "Europe/London";
CAT = "Africa/Harare";
CDT = "America/Chicago";
CEST = "Europe/Paris";
CET = "Europe/Paris";
CLST = "America/Santiago";
CLT = "America/Santiago";
COT = "America/Bogota";
CST = "America/Chicago";
EAT = "Africa/Addis_Ababa";
EDT = "America/New_York";
EEST = "Europe/Istanbul";
EET = "Europe/Istanbul";
EST = "America/New_York";
GMT = GMT;
GST = "Asia/Dubai";
HKT = "Asia/Hong_Kong";
HST = "Pacific/Honolulu";
ICT = "Asia/Bangkok";
IRST = "Asia/Tehran";
IST = "Asia/Calcutta";
JST = "Asia/Tokyo";
KST = "Asia/Seoul";
MDT = "America/Denver";
MSD = "Europe/Moscow";
MSK = "Europe/Moscow";
MST = "America/Denver";
NZDT = "Pacific/Auckland";
NZST = "Pacific/Auckland";
PDT = "America/Los_Angeles";
PET = "America/Lima";
PHT = "Asia/Manila";
PKT = "Asia/Karachi";
PST = "America/Los_Angeles";
SGT = "Asia/Singapore";
UTC = UTC;
WAT = "Africa/Lagos";
WEST = "Europe/Lisbon";
WET = "Europe/Lisbon";
WIT = "Asia/Jakarta"; 
```

# c# - Reflection.Emit 和泛型类型

> ID：15669387
> 
> 赞同：4
> 
> 时间：2013-03-27T21:01:46.230
> 
> 标签：c#, reflection.emit

我正在使用`Reflection.Emit`并且我想创建一个与 C# 中定义的以下类型等效的类型：

```
class A
{
    public Tuple<A, int> GetValue(int x)
    {
         return new Tuple<A, int>(this, x);
    }
} 
```

诀窍是我需要使用 BCL 中的泛型类型，它使用我的自定义类型作为泛型参数。

我弄乱了以下代码段：

```
var asmName = new AssemblyName("Test");
var access = AssemblyBuilderAccess.Run;
var asm = AppDomain.CurrentDomain.DefineDynamicAssembly(asmName, access);
var module = asm.DefineDynamicModule("Test");

var aType = module.DefineType("A");
var tupleType = typeof(Tuple<,>).MakeGenericType(aType, typeof(int));

var attrs = MethodAttributes.Public;
var method = aType.DefineMethod("GetValue", attrs, tupleType, new [] { typeof(int) });
var gen = method.GetILGenerator();

gen.Emit(OpCodes.Ldarg_0);
gen.Emit(OpCodes.Ldarg_1);

// here is the fail:
var ctor = tupleType.GetConstructor(new [] { typeof(int), aType } );
gen.Emit(OpCodes.Newobj, ctor); 
```

调用`GetConstructor`失败，但出现以下异常：

> NotSupportedException：不支持指定的方法。

因此，基本上，它不会让我获得仅引用我的自定义类型的类型的构造函数，并且我也无法在发出其方法的主体之前完成类型。

真的不可能走出这个恶性循环吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T21:47:27.313

出于某种原因，您需要使用[静态重载`GetConstructor()`](http://msdn.microsoft.com/en-us/library/ms145822.aspx)来执行此操作。在您的情况下，代码可能如下所示：

```
var ctor = TypeBuilder.GetConstructor(
    tupleType, typeof(Tuple<,>).GetConstructors().Single()); 
```

# sorting - 将 2 个已排序的大型 CSV 文件合并为一个文件

> ID：15669388
> 
> 赞同：1
> 
> 时间：2013-03-27T21:01:46.427
> 
> 标签：sorting, csv, go

我有一个大小约为 50GB 的存档文件。

每周，我必须获取一个 CSV 文件并将其与 50GB 的超大 CSV 文件合并。

我是 Go 新手，希望在 Go 中有一个不错的 elagent 解决方案。

这些文件看起来像：

```
"a:123", 101010
"b:123", 101010
"some-key-here:123", 101010
"some-key-here:234", 101010 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:48:33.613

如果这两个文件是单独排序的，那么您可以使用合并排序的合并功能将它们组合成一个排序数组。

通过数组，我的意思是我们可以使用另一个 CSV 文件即时写入排序数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:44:19.813

`compare()`虽然我自己没有编译它来检查，但一旦你实现了这个功能，它应该可以做你想做的事。它本质上是 Mergesort 算法的“合并”步骤。由于您已经按排序顺序获得了这两个文件，因此您只需要合并步骤，这可以以流式方式完成。

```
package main

import (
    "encoding/csv"
    "io"
    "log"
    "os"
)

const outFile = "your/output/file/path.ext"

func main() {
    // make sure there are only 2 args
    if len(os.Args) != 3 {
        log.Panic("\nUsage: command file1 file2")
    }

    // open the first file
    f1, e := os.Open(os.Args[1])
    if e != nil {
        log.Panic("\nUnable to open first file: ", e)
    }
    defer f1.Close()

    // open second file
    f2, e := os.Open(os.Args[2])
    if e != nil {
        log.Panic("\nUnable to open second file: ", e)
    }
    defer f2.Close()

    // create a file writer
    w, e := os.Create(outFile)
    if e != nil {
        log.Panic("\nUnable to create new file: ", e)
    }
    defer w.Close()

    // wrap the file readers with CSV readers
    cr1 := csv.NewReader(f1)
    cr2 := csv.NewReader(f2)

    // wrap the out file writer with a CSV writer
    cw := csv.NewWriter(w)

    // initialize the lines
    line1, b := readline(cr1)
    if !b {
        log.Panic("\nNo CSV lines in file 1.")
    }
    line2, b := readline(cr2)
    if !b {
        log.Panic("\nNo CSV lines in file 2.")
    }

    // copy the files according to similar rules of the merge step in Mergesort
    for {
        if compare(line1, line2) {
            writeline(line1)
            if line1, b = readline(cr1); !b {
                copy(cr2, w)
                break
            }
        } else {
            writeline(line2)
            if line2, b = readline(cr2); !b {
                copy(cr1, w)
                break
            }
        }
    }

    // note the files will be closed here, since we defered it above
}

func readline(r csv.Reader) ([]string, bool) {
    line, e := r.Read()
    if e != nil {
        if e == io.EOF {
            return nil, false
        }
        log.Panic("\nError reading file: ", e)
    }
    return line, true
}

func writeline(w csv.Writer, line []string) {
    e := w.Write(line)
    if e != nil {
        log.Panic("\nError writing file: ", e)
    }
}

func copy(r csv.Reader, w csv.Writer) {
    for line, b := readline(r); !b; r, b = readline(r) {
        writeline(w, line)
    }
}

func compare(line1, line2 string) bool {
    /* here, determine if line1 and line2 are in the correct order (line1 first)
       if so, return true, otherwise false
    */
} 
```

**注意：**此答案已经过大量编辑，以包含内联代码而不是链接。此外，自从我的初稿以来，代码已经有了很大的改进，但由于这里没有任何活动，我只是把旧版本吹走并重写我的答案。

# emacs - 如何从 Erlang 脚本调用 Emacs？

> ID：15669389
> 
> 赞同：3
> 
> 时间：2013-03-27T21:01:48.193
> 
> 标签：emacs, erlang

受 Git 的启发，当您键入“git commit”时，它会为您打开一个 Emacs 或 Vim 会话。我正在编写一个 Erlang escript，我希望它在 escript 执行结束时打开一个 Emacs 会话。我试过了

```
os:cmd("emacs -nw file.txt") 
```

但它似乎不起作用。在 Erlang shell 中评估上述命令会产生

```
"emacs: standard input is not a tty\n" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:33:45.757

一种方法是让 Emacs 在服务器[模式下](http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html)运行（放入`(server-mode)`您`~/.emacs`的. 这将在现有的 Emacs 会话中打开该文件。 一旦你在 Emacs 中点击，退出并将控制权返回给你的 Erlang 程序。`emacsclient``emacs``emacsclient``C-x #`

# java - 部分代码未初始化

> ID：15669394
> 
> 赞同：0
> 
> 时间：2013-03-27T21:02:03.650
> 
> 标签：java, initialization

在过去的几天里，我一直在重新学习 Java，到目前为止，我还没有遇到任何问题。我正在尝试编写一段示例代码来打印一个句子，然后索引程序中的所有字符，最后按顺序显示它们。但它告诉我这里没有初始化“i”是我得到的代码：

```
 String sentence = "This is a basic sentence sequence using letters and spaces in unicode!";
    int index = sentence.offsetByCodePoints(0, i);
    int cp = sentence.codePointAt(i);
    System.out.println(index);
    if (Character.isSupplementaryCodePoint(cp)) i += 2;
    else i++;
    System.out.println(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:04:24.840

> 但它告诉我这里没有初始化“i”是我得到的代码：

我假设`i`这里是一个局部变量。在 java 中，局部变量没有默认值。你应该在使用它们之前初始化它们。

```
public void localVarTest() {
int i;
System.out.println(i);//error cuz you have not initialized local var i
} 
```

使用默认值初始化它，例如：

```
 public void localVarTest() {
    int i=0;
    System.out.println(i);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:04:38.630

明白了，我必须像这样实际初始化“i”：

```
 String sentence = "This is a basic sentence sequence using letters and spaces in unicode!";
    int i = 0; // Added this part to the code!
    int index = sentence.offsetByCodePoints(0, i);
    int cp = sentence.codePointAt(i);
    System.out.println(index);
    if (Character.isSupplementaryCodePoint(cp)) i += 2;
    else i++;
    System.out.println(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:05:04.043

如果在方法中创建变量，则必须为它们赋值：

```
int i = 0; 
```

成员变量使用 ( `0`/ `null`)自动初始化

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T21:05:12.730

在字符串语句之后或之前初始化标识符“i”，例如：

```
String sentence = "This is a basic sentence sequence using letters and spaces in unicode!";
int i = 0;
int index = sentence.offsetByCodePoints(0, i);
int cp = sentence.codePointAt(i);
System.out.println(index);
if (Character.isSupplementaryCodePoint(cp)) i += 2;
else i++;
System.out.println(i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T21:05:36.107

您应该确保`i`已声明并初始化它，还应确保`i`您的代码是否有一个名为其作用域的变量。

# python - paraview中如何批量保存截图？

> ID：15669396
> 
> 赞同：2
> 
> 时间：2013-03-27T21:02:14.430
> 
> 标签：python, paraview

有谁知道如何在批处理模式下调用 paraview 然后保存屏幕截图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T23:52:24.707

这是一个示例脚本：

```
from paraview import simple
simple.Sphere()
simple.Show()
simple.Render()
simple.WriteImage("/tmp/foo.png") 
```

有关可用于 WriteImage() 的选项，请参阅 ParaView Python 文档

[http://www.paraview.org/ParaView3/Doc/Nightly/www/py-doc/paraview.simple.html#paraview.simple.WriteAnimation](http://www.paraview.org/ParaView3/Doc/Nightly/www/py-doc/paraview.simple.html#paraview.simple.WriteAnimation)

# python - 惯用/快速 Django ORM 检查 mysql/postgres 上是否存在

> ID：15669397
> 
> 赞同：0
> 
> 时间：2013-03-27T21:02:14.480
> 
> 标签：python, sql, django, orm, django-models

如果我想检查是否存在并在可能的情况下检索对象，以下哪种方法更快？更地道？为什么？如果不是我列出的两个示例中的任何一个，那么人们将如何去做呢？

```
if Object.objects.get(**kwargs).exists():
    my_object = Object.objects.get(**kwargs)

my_object = Object.objects.filter(**kwargs)
if my_object:
    my_object = my_object[0] 
```

如果相关，我关心 mysql 和 postgres。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:07:25.713

为什么不在 try/except 块中执行此操作以避免多个查询/查询然后是 if？

```
try:
    obj = Object.objects.get(**kwargs)
except Object.DoesNotExist:
    pass 
```

只需在 except 下添加您的 else 逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:05:26.090

django 提供了一个很好的概述[`exists`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.exists)

[根据文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.exists)，使用您的第一个示例，它将执行两次查询：

> 如果 some_queryset 还没有被评估，但你知道它会在某个时候被评估，那么使用 some_queryset.exists() 将做更多的整体工作（一个查询用于存在检查加上一个额外的查询以稍后检索结果）而不是简单地使用 bool(some_queryset) 检索结果，然后检查是否返回了任何结果。

因此，如果您要使用该对象，在检查存在之后，文档建议只使用它并强制评估 1 次使用

```
if my_object:
  pass 
```

# javascript - 可以访问 JavaScript 中的参数“类”吗？

> ID：15669400
> 
> 赞同：1
> 
> 时间：2013-03-27T21:02:19.480
> 
> 标签：javascript

所有其他内置函数都附加到全局对象：

```
> Object.prototype.toString.call(new Date)
'[object Date]'
> new Date instanceof Date
true
> Object.prototype.toString.call(new Function)
'[object Function]'
> new Function instanceof Function
true
> Object.prototype.toString.call(new Number)
'[object Number]'
> new Number instanceof Number
true 
```

`Arguments`，然而，不是：

```
> args = null; (function() { args = arguments }()); Object.prototype.toString.call(args)
'[object Arguments]'
> new Arguments instanceof Arguments
ReferenceError: Arguments is not defined 
```

有什么方法可以访问它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:10:25.033

如果您的意思是要手动创建 的实例`Arguments`，那么这是不可能的。没有`Arguments`构造函数。

该类型的对象实际上是由内部算法创建的（参见ECMAScript 规范的[第 10.6 节](http://es5.github.com/#x10.6)）。您所看到的输出`Object.prototype.toString.call`只是`[[Class]]`对象内部属性中存储的值。它可以是任何东西。在这种情况下，规范定义它应该设置为字符串“Arguments”。

# jquery - .prop("checked") 只选择第一个元素

> ID：15669403
> 
> 赞同：1
> 
> 时间：2013-03-27T21:02:21.387
> 
> 标签：jquery

```
$(function() {
    $('.checkbox').change(function () {
    if ($('.checkbox').prop("checked")) {
        alert('checked');
        if ($('#print').length == 0) {
            $('#post').append('<input type="button" id="print" value="Print">');
        }
    } else {
        alert('unchecked');
        if ($('#print').length != 0) {
            $('#print').remove();
        }
    }
    });
}); 
```

在上面的示例中，当我选中第一个复选框`alert('checked');`时，它会在我取消选中时触发，它会触发`alert('unchecked');`. 按预期工作。

但是，对于除第一个（第二个、第三个...复选框等）以外的任何其他元素，如果我选中复选框，它总是`False`从`$('.checkbox').prop("checked")`.

如何让它监视所有复选框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:06:10.540

`$('.checkbox')`不会给你复选框的状态，因为类选择器不返回单个元素。

用途：`$('.checkbox').eq(0).prop("checked")`用于获取第一个，或用于`.each()`在循环中访问结果列表。

```
$('.checkbox').each(function() {
    if($(this).prop("checked")) {
         alert("checked!");
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:09:46.457

*这将选择页面上带有类复选框*的所有元素：

```
if ($('.checkbox').prop("checked")) { 
```

但是，这将选择触发事件的元素：

```
if ($(this).prop("checked")) { 
```

# postgresql - Openerp 7.0 错误数据库

> ID：15669404
> 
> 赞同：1
> 
> 时间：2013-03-27T21:02:23.693
> 
> 标签：postgresql, debian, openerp

我有 Openerp 的问题，你能帮我吗？

```
ERROR ? openerp.sql_db: Connection to the database failed
Traceback (most recent call last):
  File "/opt/openerp/server/openerp/sql_db.py", line 440, in borrow
    result = psycopg2.connect(dsn=dsn, connection_factory=PsycoConnection)
OperationalError: fe_sendauth: no password supplied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T01:38:51.007

检查您的 /etc/openerp/openerp-server.conf 并确保您至少设置了以下选项：

```
db_host = (usually localhost)
db_port = (usually 5432)
db_user =
db_password = 
```

尝试通过运行手动连接到数据库：

```
psql -d postgres -U <YOUR DATABASE USERNAME> -W 
```

如果这可行（你应该得到类似“postgres=>”的提示，按 ctrl+d 退出它）但 OpenERP 中仍然存在错误，这可能是因为你运行 Ubuntu/Debian 并且刚刚安装了 OpenERP 包。出现该错误是因为 init 脚本无法在软件包安装后自动终止由 dpkg 启动的第一个 openerp Python 进程。要解决此问题，请运行：

```
# ps aux|grep openerp 
```

您将看到如下所示的一行：

```
openerp  14438  0.3  0.8 235096 69060 ?        Sl   03:23   0:00 /usr/bin/python /usr/bin/openerp-server --config=/etc/openerp/openerp-server.conf --logfile=/var/log/openerp/openerp-server.log 
```

第一个数字是 Python 进程的 pid。通过运行终止进程：

```
kill -9 14438 
```

然后通过运行再次重新启动您的 openerp 服务器：

```
/etc/init.d/openerp restart 
```

您`openerp-server.conf`现在应该被 OpenERP 重新读取并且错误应该消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:27:22.820

在 Google 和 Stack Overflow 上搜索“fe_sendauth：未提供密码”。

您的 PostgreSQL 设置为需要您连接的（地址、数据库、用户）组合的密码，并且您没有发送密码。

您可以通过阅读[PostgreSQL 文档的客户端身份验证章节](http://www.postgresql.org/docs/current/static/client-authentication.html)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:49:12.933

使用此命令创建一个 postgres 用户。确保用户的名称与您的系统用户相同。

```
sudo su postgres

createuser -d -S -R <your system user>

psql

alter user <your system user> with password <your password>; 
```

希望它能解决您与数据库建立连接的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-05T00:53:22.570

转到您的 opererp-server.conf 并查找 addons_path。确保你有 /openerp/addons 和 /openerp/web/addons。如果您有其他东西，只需将其取下并重新启动服务器。它会起作用的。

# javascript - Javascript keydown 事件仅触发最多两个键

> ID：15669410
> 
> 赞同：0
> 
> 时间：2013-03-27T21:02:48.523
> 
> 标签：javascript, browser, keyboard, keyboard-events, dom-events

我有一个用于捕获和注册箭头键输入的系统。它一直有效。只要按下两个或更少的键，它就会正确记录是否同时按下多个键。如果同时按下第三个或第四个，它将停止触发 keydown 事件。请查看[这个 jsFiddle](http://jsfiddle.net/9W4dq/)并查看控制台的输出。

这是浏览器设置的限制还是我的代码错误？任何帮助将非常感激。

这是代码：

```
var keysPressed = {
    37: false,
    38: false,
    39: false,
    40: false
};
var LEFT = 'left';
var RIGHT = 'right';
var UP = 'up';
var DOWN = 'down';
var ON = '_on';
var OFF = '_off'

document.addEventListener('keydown', function(evt){
    var keycode = evt.keyCode;
    if(!checkKeyPressed(keycode)){
        keysPressed[keycode] = true;
        switch(keycode){
            case 37: 
                registerInput(LEFT+ON);
                break;
            case 38:
                registerInput(UP+ON);
                break;
            case 39:
                registerInput(RIGHT+ON);
                break;
            case 40:
                registerInput(DOWN+ON);
                break;
            default:
                break;
        }
    }
});

document.addEventListener('keyup', function(evt){
    var keycode = evt.keyCode;
    if(checkKeyPressed(keycode)){
        keysPressed[keycode] = false;
        switch(keycode){
            case 37: 
                registerInput(LEFT+OFF);
                break;
            case 38:
                registerInput(UP+OFF);
                break;
            case 39:
                registerInput(RIGHT+OFF);
                break;
            case 40:
                registerInput(DOWN+OFF);
                break;
            default:
                break;
        }
    }
});

function checkKeyPressed(keycode){
    if (keysPressed === null) {
        return false;
    } else return keysPressed[keycode];
}

function registerInput(inputType){
    console.log(keysPressed);
    //Game.Engine.playerInput(inputType);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:11:52.347

虽然这不一定是我实现它的方式，但我认为您的实现工作得很好。

请记住这一点：

不同的键盘将有不同的按键总线。
在更高质量的键盘上，您可能会在每次可以按住的键盘“区域”中获得更多键......
但取决于键盘是什么，键的打印方式，区域的划分方式等等，您将拥有或多或少的钥匙，可以一次在任何给定的地方使用。

例如，当我玩 FPS 游戏和类似的动作游戏时，使用我的常规映射，我无法在键盘上蹲下、向前+向左移动、拉起排行榜和重新加载。

我最后做的任何事情都会被忽略。

# ubuntu - VMware Player 上的 GLSL 支持

> ID：15669415
> 
> 赞同：0
> 
> 时间：2013-03-27T21:02:59.923
> 
> 标签：ubuntu, glsl, vmware, vmware-player, mesa

我设法使用[此处](http://www.mesa3d.org/vmware-guest.html)描述的方法在 VMware ubuntu 客户机上安装了 OpenGL 驱动程序。

我想知道这种方法是否会在此 VM 下提供 GLSL 支持，如果是，我在哪里可以获得包含 OpenGL GLSL 相关函数声明的包含文件，例如 glCreateShader() 或 glShaderSource() 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:34:36.213

我做了更多的测试，结果证明，是的，支持 GLSL。我获得这些功能的方式是构建 GLEW 库并将其添加到我的项目中。

# java - 如何在没有背景图像的情况下擦除我的对象？

> ID：15669421
> 
> 赞同：0
> 
> 时间：2013-03-27T21:03:14.750
> 
> 标签：java, android, paint

我想擦除我的位图，但我不想擦除背景图像。当我尝试擦除时，它是白色的，并且在帧中绘制非常困难。

这是来自**CanvasView**

```
erasePaint.setColor(Color.WHITE);
//erasePaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

erasePaint.setAntiAlias(true);
erasePaint.setStyle(Paint.Style.STROKE);
erasePaint.setStrokeJoin(Paint.Join.ROUND);
erasePaint.setStrokeWidth(12);

//....

protected void onDraw(Canvas canvas) {
    paint.setPathEffect(null);

    if(bitmap!=null){

        for(MyEraser e:eraserList){
            canvas.drawPath(e.p,erasePaint);
            invalidate();
        }

        final OnTouchListener eraseListener = new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {

                //  erasePaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
                //FirstActivity.ll.setVisibility(LinearLayout.GONE);

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        myEraser = new MyEraser();
                        lastTouchX = event.getX();
                        lastTouchY = event.getY();
                        myEraser.mouseDown(event.getX(), event.getY());
                        return true;

                    case MotionEvent.ACTION_MOVE:
                    case MotionEvent.ACTION_UP:
                        resetDirtyRect(event.getX(),event.getY());
                        int historySize = event.getHistorySize();
                        for(int i=0;i<historySize;i++){
                            float historicalX = event.getHistoricalX(i);
                            float historicalY = event.getHistoricalY(i);
                            expandDirtyRect(historicalX, historicalY);

                            myEraser.mouseUp(historicalX, historicalY);
                        }
                        myEraser.mouseUp(event.getX(), event.getY());
                        eraserList.add(myEraser);
                        break;

                    default:
                        Log.d("mock it up", "Unknown touch event  " + event.toString());
                        return false;
                }

                invalidate(
                    (int) (dirtyRect.left - HALF_STROKE_WIDTH),
                    (int) (dirtyRect.top - HALF_STROKE_WIDTH),
                    (int) (dirtyRect.right + HALF_STROKE_WIDTH),
                    (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

                lastTouchX = event.getX();
                lastTouchY = event.getY();
                return true;
            }
        };
    }
} 
```

这是我的**橡皮擦**

```
public class MyEraser {

    Paint paint = new Paint();
    Path p = new Path();

    public MyEraser(){
        paint.setColor(Color.WHITE);
        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
        paint.setStyle(Paint.Style.STROKE);
        paint.setAntiAlias(true);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(5);
    }

    public void mouseDown(float x, float y) {
        //path.addCircle(x,y,5,Path.Direction.CW);
        p.moveTo( x, y );
        // path.lineTo(x, y);
    }

    public void mouseMove(Path path, float x, float y) {
        // path.addCircle(x,y,5,Path.Direction.CW);
    }

    public void mouseUp(float x, float y){
        //path.addCircle(x,y,5,Path.Direction.CW);
        p.lineTo(x, y);
    }

    public void draw(Canvas c,Path path){
        //paint.setColor(Color.WHITE);
        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
        paint.setStyle(Paint.Style.STROKE);
        paint.setAntiAlias(true);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(7);
        c.drawPath(p, paint);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:14:51.910

**编辑**：重新开始以获得更好的解释:)

我不熟悉Android，实际上我从未使用过它。使用此代码作为如何组织代码的示例，而不是功能代码。

```
class MyView extends View {
    private Eraser myEraser;
    private Bitmap myBackgroundImage;
    private Canvas myForegroundCanvas;

    public MyView(Context context, Attributes, attrs) {
        myEraser = new Eraser()
        myBackgroundImage = BitmapFactory.decodeResource(getResources(), R.drawable.your_background_name);
        Bitmap image = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888); // the width and height of the view
        myForegroundCanvas = new Canvas(image);
    }

    public boolean onTouchEvent(MotionEvent event) {
        // update your eraser path
        return true;
    }

    protected void onDraw(Canvas canvas) {
        canvas.drawBitmap(myBackgroundImage, 0, 0, null);

        //for (Eraser item : eraserList) {
            // if you have multiple eraser, add them to a list
            myEraser.draw(myForegroundCanvas);
        //}

        canvas.drawCanvas(myForegroundCanvas, 0, 0, null);
    }
} 
```

主要思想是保持背景和前景图像之间的分离。这样，您可以轻松更改背景并对其进行更新。您还可以在前台进行重置以擦除所有内容等。

我希望这可以帮助你。

# jquery - jQuery如何防止事件函数中的事件

> ID：15669422
> 
> 赞同：0
> 
> 时间：2013-03-27T21:03:18.380
> 
> 标签：jquery, html-table, onchange

我有一个表，当用户连续更改 ID 时，我必须根据这个新 ID 将行重新定位到新位置。

所以我创建了一个更改函数来管理它，但是在我的代码中，我在移动行时再次触发了更改。

有一种方法可以在移动时不触发更改，或者我必须以不同的方式触发更改？

有任何想法吗？

HTML 代码：

```
<table id='eap'>
    <tr><th>ID</th><th>INFO1</th><th>INFO2</th></tr>
    <tr><td><input name="ID1" value='1'/></td><td>1.1</td><td>1.2</td></tr>
    <tr><td><input name="ID2" value='2'/></td><td>2.1</td><td>2.2</td></tr>
    <tr><td><input name="ID3" value='3'/></td><td>3.1</td><td>3.2</td></tr>
    <tr><td><input name="ID4" value='4'/></td><td>4.1</td><td>4.2</td></tr>
    <tr><td><input name="ID5" value='5'/></td><td>5.1</td><td>5.2</td></tr>
</table> 
```

查询代码：

```
$('#eap tbody tr input[name^="ID"]').change(function () {
    alert('start');

    //changed row
    var $row = $(this).closest('tr');

    //New ID
    var $newID = this.value;

    //Loop all in search for the correct ID position
    $('#eap tr input[name^="ID"]').each(function (i){
        if ( (parseInt($newID) <= parseInt($(this).val())) && $row.index() != $(this).closest('tr').index() ){
            //found position
            $newrow = $(this).closest('tr');

            //move row
            //this trigger change again
            $($newrow).before($($row));

            return false;
        }
    });

    //put id in order
    $id=1;
    $('#eap tr input[name^="ID"]').each(function (i){           
        $(this).val($id);
        $id++;                          
    });        
}); 
```

[JSFIDDLE 上的演示](http://jsfiddle.net/pedsann/yLc5s/ "点击查看演示")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:11:33.997

我希望我能理解你。我会使用[`blur`](http://api.jquery.com/blur/)事件而不是[`change`](http://api.jquery.com/change/)事件。

```
$('#eap tbody tr input[name^="ID"]').blur(function () {
... 
```

# java - Servlet 3.0：如何将异步处理卸载到不同的 JVM？

> ID：15669424
> 
> 赞同：2
> 
> 时间：2013-03-27T21:03:19.910
> 
> 标签：java, servlets, java-ee-6, distributed-computing, servlet-3.0

Servlet 3.0 允许“请求”线程（或“主”线程）将长时间运行的处理委托给其他线程，以便释放自己以接收更多请求。同意。也就是说，我们正在通过利用多线程来实现（请求的）可伸缩性。

但这要求我的“Servlet 容器 JVM”能够进行此类处理。如果我有一个多层架构，其中“Servlet 容器 JVM”只是入口点，而服务请求的逻辑位于其他 JVM 中的其他地方（在本文中称为“服务 JVM”），该怎么办？

如果我想将传入的“请求”（或至少请求的相关属性）发布到 JMS 队列并让“请求”被“服务 JVM”池中的一个抓取和处理怎么办？将发送“响应”（例如 JSON）的责任也委托给该服务 JVM 会更好吗？

我认为“AsyncContext”不能在 Servlet 容器 JVM 之外有意义地传递。那么，如何真正委派请求处理和响应发送，由分布式服务 (JVM) 完成？

在代码/伪代码方面，我的问题是：

```
@WebServlet(urlPatterns = "/AsyncServlet", asyncSupported=true)
public class AsyncServlet extends HttpServlet {

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response)
        throws ServletException, IOException {

        AsyncContext asyncCtx = request.startAsync();
        // Put the asyncCtx in a JMS queue so as to be picked by another 
        // service JVM that can really service this request.
        // return back to receiving requests and dont worry abt sending a response
        // The service JVM will take care of sending the appropriate response
        // as it has the data necessary for the response.
    }
} 
```

一种选择似乎是让工作线程（在 Servlet 容器 JVM 中）等待来自服务 JVM 的响应。在 Service JVM 进行实际处理之后，它可以将结果（通过消息或其他方式）传达给相应的 Worker 线程，并让 Worker 线程发送 GET 响应。

我想知道是否有（肯定有！）比这更好的选择，因为这看起来很复杂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:24:40.717

1.  将上下文设置为异步
2.  在单例 bean 中存储上下文
3.  发送 jms 请求
4.  处理 jms 请求
5.  发送 jms 回复
6.  从单例 bean 获取回复的上下文
7.  发送回复给客户

您可能想要设置一个计时器进行清理，并且可以将 jms 替换为异步单向 ejb 调用

# google-app-engine - 从 dev_appserver.py 提供服务时，如何查看索引条目计数和存储？

> ID：15669431
> 
> 赞同：0
> 
> 时间：2013-03-27T21:03:37.603
> 
> 标签：google-app-engine, google-cloud-datastore

当我点击[https://appengine.google.com/datastore/indexes](https://appengine.google.com/datastore/indexes)查看我的应用程序的生产索引时，该表包含“索引条目计数”和“索引存储”列。当我点击`http://127.0.0.1:8080/_ah/admin/datastore_indexes`查看我的应用程序的本地索引时，这些列丢失了。如何在本地检索该信息？

我尝试在 Datastore Stats 页面上单击“Generate Datastore stats”，以及直接调用`db.get_indexes()`.

我正在尝试估计/验证我想创建的新索引的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:19:30.053

如果我单击 Generate Datastore Stats，我将收到一条如下所示的消息：

> 扫描了 123 个实体，共 42729 字节，2208 个索引条目，共 201760 字节，8 个复合索引条目，共 1080 字节。插入了 120 条新记录。

这是你需要知道的吗？

此外，如果您升级到最新版本，您将拥有一个更好的开发控制台，默认情况下该控制台提供：`http://localhost:8000`

# javascript - Javascript 文件是否应该包含 BOM？

> ID：15669438
> 
> 赞同：13
> 
> 时间：2013-03-27T21:04:20.453
> 
> 标签：javascript, web-standards, byte-order-mark

我相信大多数人建议使用 UTF-8 作为 Javascript 文件的编码。

是否有关于这些文件是否包含*Byte-Order Mark*或不包含它的标准？（即是否应该使用/不使用 UTF-8 BOM 来提供 JS 文件？）

我希望看到一个 RFC 或“事实上的”标准，而不是个人更喜欢的意见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T20:51:00.090

Wikipedia 很好地解释了为什么不在 UT8 中包含 BOM。

[http://en.wikipedia.org/wiki/Byte_order_mark#cite_note-3](http://en.wikipedia.org/wiki/Byte_order_mark#cite_note-3)

“对于 UTF-8 既不需要也不建议使用 BOM，但在 UTF-8 数据从使用 BOM 的其他编码形式转换或 BOM 用作 UTF-8 签名的情况下可能会遇到”

# java - 使用 'SEARCH' 或 'PATCH' 与码头

> ID：15669441
> 
> 赞同：2
> 
> 时间：2013-03-27T21:04:32.490
> 
> 标签：java, jetty

这基本上让我不知所措，并且已经将近一个星期。我正在研究公司架构的一部分，试图将 REST 全部设置好。javax.ws.rs 包中没有两种方法 - SEARCH 和 PATCH。我在我们的项目中创建了以下接口来实现搜索：（主要是示例的复制/粘贴）

```
/** imports and such as appropriate **/
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@HttpMethod("SEARCH")
public @interface SEARCH {

} 
```

如果直接调用它，使用它的代码可以完美地工作。但是，与主服务对话的 Web 服务每次都会失败`500 Invalid HTTP method: SEARCH`。因此，需要明确的是，有两个支持 Web 的服务。使用上述代码的第一个工作正常。第二个，应该只是第一个服务的代理失败。

有问题的第二个服务在码头上运行。进行代理的 servlet 是 org.mortbay.servlet.ProxyServlet 的扩展——唯一的覆盖是在 init 和 proxyHttpUrl 上进行一些 URL 调整。我知道第二个服务没有将响应传递给第一个，因为我可以关闭第一个，而第二个仍然给我那个错误。

我的问题是，我是否缺少启用“自定义”（即不在 javax.ws.rs 包中）http 方法的配置片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:15:51.997

首先，除非我弄错了，否则代理 servlet 代码非常旧，来自 jetty-6。我们现在已经发布了 jetty-9，并且最后三个版本的 jetty 都来自 eclipse，所以你应该使用的 ProxyServlet 是 org.eclipse.jetty.servlets.ProxyServlet 类。

现在，从 jetty-7 开始，我们为该代理 servlet 添加了一些自定义项，因此您可以修改更多的客户端交换……您可能需要利用它来使其他 http 方法正常工作。可能是 http-client 仅排除标准 http 方法，在这种情况下，我们必须为您的用例修复它（如果是这种情况 [，请在 RT/Jetty 下的 bugs.eclipse.org 上打开一个错误）。](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Jetty&format=guided)

# java - 需要批评：将对象存储在数组中

> ID：15669442
> 
> 赞同：0
> 
> 时间：2013-03-27T21:04:33.817
> 
> 标签：java, performance, memory

为了提高我的 java 应用程序的性能，我正在考虑创建一个具有描述对象的静态最终字段的类，然后放置从数组中检索对象的所有数据的静态方法。

示例：假设我要创建一个对象人：假设一个人有年龄、身高、体重、眼睛颜色和世界坐标。

通常我会做这样的事情：

```
 public class Person {
    private int age;
    private int height;
    private int weight;
    private int eyeR;
    private int eyeG;
    private int eyeB;
    private float x;
    private float y;
    private float z;
    //... getters and setters
  } 
```

我想将人从客户端发送到服务器，所以我必须序列化对象并将它们发送到服务器，这将反序列化对象并复活另一端的人，现在我们都知道 java 对象存储在堆，并且每个对象都分配了最少的字节来描述该对象。

我想做的是：创建一个描述对象 person 的类：

```
public class Person {
 // size contains the number of bytes to describe my person
 public static final int size; 
 //this byte here is used to identify a Person in a float array
 public static byte classID = 0;
 //these variables contains the position of my attributes inside a float array
 // since floats / int are all coded in 4 bytes
 public static final int age = 0;
 public static final int height = 1;
 public static final int eyeR = 2; 
 public static final int eyeG = 3;
 public static final int eyeB = 4;
 public static final int x = 5;
 public static final int y = 6;
 public static final int z = 7;

 //i don't check for nullity, i trust myself.
 public static int getAge(final float[] person) {
    return person[Person.age]; 
 }
 public static void setAge(final float[] person, float age) {
    return person[Person.age] = age; 
 }

 ... do the same thing for the rest also you can store 
```

}

我真的很想知道这个解决方案是否可行，因为我只使用浮点数组来存储我的个人数据，我可以在内存中获得我的数据的空间接近度，所以我想如果我访问我不会制作的数据任何页面丢失。

我也不必序列化或反序列化我的对象，因为我的浮点数组是好的，我将使用我的静态方法来访问我的浮点数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:06:43.560

> 现在我们都知道 java 对象存储在堆中，并且每个对象都有最少的字节分配来描述该对象。

是的，这也适用于数组。

我看不到您的代码可以节省大量内存，但在我看来，它会使代码更难阅读和维护。

真的，只是不要这样做。

> 因为因为我只使用浮点数组来存储我的人员数据，所以我可以在内存中获得我的数据的空间接近度，所以我想如果我访问数据我不会丢失任何页面。

使用`Person`实例中的所有数据，您也将具有空间接近性。这是另一个非好处。

# javascript - 如何替换js中的文字？

> ID：15669445
> 
> 赞同：1
> 
> 时间：2013-03-27T21:04:38.497
> 
> 标签：javascript, html

假设我有以下内容：

```
var s = "This is a test of the battle system." 
```

我有一个数组：

```
var array = [
"is <b>a test</b>",
"of the <div style=\"color:red\">battle</div> system"
] 
```

是否有一些功能或方法可以使我可以处理字符串 s 使得输出为：

```
var p = "This is <b>a test</b> of the <div style=\"color:red\">battle</div> system." 
```

基于数组中的任意元素？

请注意，数组元素应按顺序执行。因此，查看数组 1 中的第一个元素，在字符串“s”中找到“替换”的正确位置。然后查看数组元素 2，在字符串“s”中找到“替换”的正确位置。

请注意，字符串可以包含数字、括号和其他字符，如破折号（虽然没有 <>）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T21:06:06.643

更新：在 Colin DeClue 的评论之后，我认为你想做一些与我最初想的不同的事情。

以下是您如何做到这一点

```
//your array
var array = [
    "is <b>a test</b>",
    "of the <div style=\"color:red\">battle</div> system"
];
//create a sample span element, this is to use the built in ability to get texts for tags
var cElem = document.createElement("span");

//create a clean version of the array, without the HTML, map might need to be shimmed for older browsers with a for loop;
var cleanArray = array.map(function(elem){
   cElem.innerHTML =  elem;
   return cElem.textContent;
});
//the string you want to replace on
var s = "This is a test of the battle system."

//for each element in the array, look for elements that are the same as in the clean array, and replace them with the HTML versions
for(var i=0;i<array.length;i++){
  var idx;//an index to start from, to avoid infinite loops, see discussion with 6502 for more information
  while((idx = s.indexOf(cleanArray[i],idx)) > -1){
    s = s.replace(cleanArray[i],array[i]);
    idx +=(array[i].length - cleanArray[i].length) +1;//update the index
  }
}
//write result 
document.write(s); 
```

工作示例：http: [//jsbin.com/opudah/9/edit](http://jsbin.com/opudah/9/edit)

* * *

原始答案，万一这毕竟是你的意思

是的。使用[`join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

```
var s = array.join(" "); 
```

[这是codepen中的一个工作示例](http://codepen.io/anon/pen/vshyz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:24:06.853

~~我想你有一`original --> replacement`对数组。~~ 要从 HTML 中提取文本，一个可能对您有用的技巧实际上是创建一个 DOM 节点，然后提取文本内容。

获得文本后，您可以将该`replace`方法与正则表达式一起使用。一件烦人的事情是，搜索一个确切的字符串并非易事，因为`escape`Javascript 中没有预定义的函数：

```
function textOf(html) {
    var n = document.createElement("div");
    n.innerHTML = html;
    return n.textContent;
}

var subs = ["is <b>a test</b>",
            "of the <div style=\"color:red\">battle</div> system"];

var s = "This is a test of the battle system"

for (var i=0; i<subs.length; i++) {
    var target = textOf(subs[i]);
    var replacement = subs[i];
    var re = new RegExp(target.replace(/[\\[\]{}()+*$^|]/g, "\\$&"), "g");
    s = s.replace(re, replacement);
}

alert(s); 
```

# facebook - fb:comments-count 返回错误值

> ID：15669447
> 
> 赞同：0
> 
> 时间：2013-03-27T21:04:39.533
> 
> 标签：facebook, comments, facebook-comments

我用

```
<fb:comments-count href=http://e-drpciv.ro/intrebare/963/></fb:comments-count> 
```

我也尝试使用引号

```
<fb:comments-count href="http://e-drpciv.ro/intrebare/963/"></fb:comments-count> 
```

并且回报始终为零：

```
/**/ FB.__globalCallbacks.fdd5cbfe8aa94c({"data":[{"name":"index_link_stat_url","fql_result_set":[{"url":"http:\/\/e-drpciv.ro\/intrebare\/963\/","commentsbox_count":0}]}]}); 
```

其他一些链接报告的评论比真实的少。例如。[http://e-drpciv.ro/intrebare/35](http://e-drpciv.ro/intrebare/35)仅报告 3 条评论

我需要更新我的代码中的某些内容吗？还是只是 Facebook 的问题，我需要等待？这个问题持续了两天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T13:28:00.740

如果有人分享了其他人的故事，它不会在您的 /home 中向您显示之前分享的评论，但是当您查询 fql 以获取该对象的 comment_count 时，`"SELECT comment_info FROM photo WHERE object_id = 1234567890"`它将计算所有分享中的所有评论，这就是为什么当您使用 FB API 查询 /home 你会发现没有评论的帖子，但`SELECT ...`它会返回正数的评论计数。我相信有一些加入或只能获得当前用户。

# iphone - Xcode 断点不显示当前对象

> ID：15669451
> 
> 赞同：1
> 
> 时间：2013-03-27T21:04:47.627
> 
> 标签：iphone, ios, xcode, xcode4, breakpoints

我最近遇到了一个非常令人沮丧的问题。当我设置断点并且我的程序停止时，对象不会显示在 Xcode 中。我没有得到典型的“自我”或任何其他对象。我尝试重新启动 Xcode 和我的计算机。我真的不知道还能做什么。

我正在运行 Xcode 4.6.1。有没有其他人遇到过这个问题？

![在此处输入图像描述](../Images/0055c8ab4ccc2bbea08a46b2b169329d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:35:53.470

当我打开编译器优化时，我通常会收到此错误。编译器将生成不一定遵循您的代码逻辑流程的代码。

在导航器中转到您的项目 -> 目标 -> 构建设置 -> 搜索优化级别 -> 展开优化级别 -> 选择调试行 -> 在项目和目标的两列中更改为无。

希望这可以帮助。

# android - 链接在我的 HTML5 应用程序上无法正常工作

> ID：15669462
> 
> 赞同：1
> 
> 时间：2013-03-27T21:05:20.720
> 
> 标签：android, html, cordova, hyperlink

我一直在转来转去，试图应用尽可能多的不同解决方案，试图自己解决这个问题。事实是我不能！

我正在 Adob​​e PhoneGap 上用 HTML5 开发一个非常简单的应用程序。该应用程序只是用户应单击并访问相应网站的链接列表。问题？问题是网站是在应用程序上打开的，而不是在浏览器上。我已经尝试了我所知道的一切......设置目标_blank，应用[这个解决方案](http://community.phonegap.com/nitobi/topics/make_links_use_external_broswer_consistently)，[这个](https://stackoverflow.com/questions/14070841/phonegap-open-link-in-browser)，[这个](https://stackoverflow.com/questions/15446833/html-5-androind-native-app-link-target-new-window)和[这个](https://stackoverflow.com/questions/9373015/phonegap-app-admob-opens-in-the-app-need-to-open-in-separate-browser)。我也一直在谷歌搜索，但结果完全相同：我的问题没有解决方案。

一定是我做错了什么，现在我想我没有洞察力来看看它是什么！它让我发疯......这是代码：

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />

        <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
        Remove this if you use the .htaccess -->

        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <title>Northern Landscape APP</title>
        <meta name="description" content="Northern Landscape APP - With this APP you can keep up with the latest news of our group: Features, Group Messages, new magazine issues and more!" />
        <meta name="author" content="LFS" />

        <meta name="viewport" content="width=device-width; initial-scale=1.0" />

        <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->

        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

        <link rel="stylesheet" href="style.css">

        <script type="text/javascript">
  $('.link').live('tap', function() {
    url = $(this).attr("rel");   
    loadURL(url);
});

function loadURL(url){
    navigator.app.loadUrl(url, { openExternal:true });
    return false;
} 
        </script>

    </head>

    <body>
        <div id="contentor">

            <header>

            </header>

            <nav>

            <div id="cabeca">
              <img src="imgs/cabecalho.png"> 
            </div>

            <br>
            <br>
            <br>
            <div id="botoeswraper">

              <div id="linha1">

                <div id="b1">
                  <div id="icone"><img src="imgs/logo_compus.png"></div>
                  <div id="texto">
                  <a href="#" class='link' rel='http://www.northernlandscape.org'>Official Website</a> </div>
                </div>

              </div>

              <div id="linha2">

                <div id="b2">
                  <div id="icone"><img src="imgs/rblogo.png"></div>
                  <div id="texto">
                  <a href="#" class='link' rel='http://www.redbubble.com/groups/northern-landscape'>Redbubble group</a> </div>
                </div>

              </div>

              <div id="linha3">

                <div id="b3">
                  <div id="icone"><img src="imgs/groupmsg.png"></div>
                  <div id="texto">
                  <a href="#" class='link' rel='http://www.redbubble.com/groups/northern-landscape/forums/7330'>Group messages</a> </div>
                </div>

               </div>

               <div id="linha4">

                 <div id="b4">
                  <div id="icone"><img src="imgs/issues.png"></div>
                  <div id="texto">
                   <a href="#" class='link' rel='http://www.northernlandscape.org/alli.php'>All NL magazine issues</a> </div>
                 </div>

               </div>

               <div id="linha5">

                 <div id="b5">
                   <div id="icone"><img src="imgs/tweeter.png"></div>
                   <div id="texto">
                   <a href="#" class='link' rel='https://twitter.com/NL_host'>Check us on Tweeter</a> </div>
                 </div>

              </div>

              </div>

            </nav>

<p>&nbsp;</p>
<p>&nbsp;</p>

            <footer>
                <p>
                    NL APP version 1.0 - Developed by LFS&copy; 
                </p>
            </footer>
        </div>
    </body>
</html> 
```

我非常感谢我能得到的任何帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T17:51:59.477

我已经完成了以下更改，每个更改都对我有用。

```
<!-- Opens in new tab -->
<a href="http://www.northernlandscape.org" target="_blank">Official Website</a>

<!-- Opens in new window -->
<a href="#" onClick="window.open('http://www.redbubble.com/groups/northern-landscape', '_system', 'location=yes');">Redbubble group</a> 
```

# linux - 跟踪程序通过文件读取的进度？

> ID：15669463
> 
> 赞同：2
> 
> 时间：2013-03-27T21:05:21.743
> 
> 标签：linux

有没有办法找出程序从文件中读取的位置？似乎可以使用[strace](https://stackoverflow.com/questions/9614184/how-to-trace-per-file-io-operations-in-linux)或[dtrace](http://linux.die.net/man/1/dtrace)？

为了澄清问题并提供动力，假设我有一个 10GB 的日志文件，并且正在计算唯一行的数量：

`$ cat log.txt | sort | uniq | wc -l`

我可以检查文件`cat`当前的位置，有效地给出命令的进度吗？使用`lsof`，我似乎无法获得上次读取文件的偏移量，我认为这可以解决问题：

```
$ lsof log.txt
COMMAND   PID USER   FD   TYPE DEVICE    SIZE/OFF       NODE NAME
cat     16021 erik    3r   REG   0,22 13416118210 1078133219 
```

编辑：我很抱歉，我给出的例子太狭窄了，没有抓住重点。理想情况下，对于任意程序，我想查看文件读取的位置（无论管道如何）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:08:35.687

而不是 cat ：

```
pv log.txt | sort | uniq | wc -l 
```

管道与 pv ：

```
SIZE=$( ls -l log.txt | awk '{print $5}'); cat log.txt | sort | pv -s $SIZE | uniq | wc -l 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-20T10:03:32.533

`progress` [你可以用命令](https://github.com/Xfennec/progress)做你想做的事。它显示了 coreutils 工具`cat`或其他程序在读取其文件时的进度。

文件和偏移信息在 Linux`/proc/<PID>/fd`和`/proc/<PID>/fdinfo`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:27:25.543

如果该示例确实是您的用例，那么我建议您使用[pipe viewer](http://www.ivarch.com/programs/pv.shtml)。 ![来自 pv 网站的示例图片](../Images/7d55a2021e7c95edbe189dc2a4bd2fff.png)

# node.js - 如何在 nodejs 中在与我的主应用程序相同的端口上设置 Mongo 查看器（如 Mongo-Express）？

> ID：15669468
> 
> 赞同：0
> 
> 时间：2013-03-27T21:05:36.497
> 
> 标签：node.js, mongodb, express, port, appfog

我对 nodejs 和 Mongodb 的所有内容都很陌生，但我设法启动并运行了一个简单的应用程序，现在我想要一个数据库查看器。我找到了 Mongo-Express 并将其安装在我的本地主机上，它工作正常。查看器在配置文件中配置，主机为 baseUrl 和端口。

问题出在实时服务器（AppFog）上，我只有一个可用的端口被我的主应用程序占用。我该如何解决这个问题？它们可以在同一个端口上运行，还是有另一个不需要在单独的端口上运行的可用查看器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:55:35.393

我可以推荐[MongoMate](http://mongomate.bensbit.co.uk/)，它既可以作为独立的 MongoDB 浏览器运行，也可以（你想要的）它可以安装在[Express](http://expressjs.com)应用程序中。有关更多信息，请参阅网页。

PS。我建立了 MongoMate ：P

# android - 从字符串到长的空指针异常

> ID：15669469
> 
> 赞同：0
> 
> 时间：2013-03-27T21:05:42.570
> 
> 标签：android

我有一项活动：

```
...
super.onCreate(savedInstanceState);
        setContentView(R.layout.configure);

        edit1=(EditText) findViewById(R.id.edit1);
        edit2=(EditText) findViewById(R.id.edit2);
        edit11=edit1.getText().toString();
        edit22=edit2.getText().toString();
        btn=(View) findViewById(R.id.btn);
        btn.setOnClickListener(this);

}

     public void onClick(View v) {
        switch (v.getId()){
        case R.id.btn:
             Intent i=new Intent(this,selection.class);
             i.putExtra("code_value",edit11);
             i.putExtra("time_value",edit22);
             startActivity(i);  
             break;

     } 
```

在选择活动中：

```
...
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selection);

        String code_value=getIntent().getExtras().getString("code_value");
        String time_value=getIntent().getExtras().getString("time_value");
        long thetime=Long.parseLong(time_value);
..

// Start service using AlarmManager
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.SECOND, 10);
        Intent intent = new Intent(selection.this, selection.class);
        PendingIntent pintent = PendingIntent.getService(selection.this, 0, intent,
                0);
        AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                thetime, pintent); 
```

我想在alarm.setRepeating中使用它的长“时间”。但它给了我空指针异常..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:08:53.857

您将需要从edittext的内部按钮单击而不是`onCreate`Activity中获取文本

```
 public void onClick(View v) {
        switch (v.getId()){
        case R.id.btn:

             // retrieve text here from EditText 

             edit11=edit1.getText().toString();
             edit22=edit2.getText().toString();
             Intent i=new Intent(this,selection.class);
             i.putExtra("code_value",edit11);
             i.putExtra("time_value",edit22);
             startActivity(i);  
             break;

     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:09:10.637

您的问题是您`getText()`在初始化后立即调用并且它总是返回空字符串。

您需要在要处理文本的那一刻准确调用**getText()**`onClick()` ，因此您需要将其移至方法：

```
public void onClick(View v) {
        switch (v.getId()){
        case R.id.btn:
             String e1 = edit1.getText().toString();
             String e2 = edit2.getText().toString();
             Intent i=new Intent(this,selection.class);
             i.putExtra("code_value", e1);
             i.putExtra("time_value", e2);
             startActivity(i);  
             break;

     } 
```

# ios - addSubview 离线时不调用 QLPreviewControllerDataSource 实例

> ID：15669472
> 
> 赞同：1
> 
> 时间：2013-03-27T21:05:55.873
> 
> 标签：ios, addsubview, qlpreviewcontroller

我有以下代码来添加`QLPreviewController`子视图

```
{
    QLPreviewController *preview = [[QLPreviewController alloc] init];
    preview.delegate = self;
    preview.dataSource = self;
    [self addChildViewController:preview];
    [self.view addSubview:preview.view];
    [preview didMoveToParentViewController:self];
    self.previewController = preview;
}

-(NSInteger) numberOfPreviewItemsInPreviewController:(QLPreviewController *)controller
{
    return 1;
}

-(id) previewController:(QLPreviewController *)previewController previewItemAtIndex:(NSInteger)index
{
    return self.url;
} 
```

`self.url`是一个`NSURL that`位于 NSTemporaryDirectory - file://localhost//.../blah.pdf

我的问题是，当我的笔记本电脑连接到互联网时，文档显示为子视图，但是当我的笔记本电脑未连接时，并且`numberOfPreviewItemsInPreviewController`不会`previewItemAtIndex`被调用。

*   我尝试了一个带有简单视图控制器的香草程序，它似乎工作正常。（我的应用程序比这更复杂）。
*   当我尝试将文档显示为模态视图时，无论模拟器是否连接到互联网，它似乎都可以工作。 `[self presentViewController:preview animated:NO completion:nil];`--> 始终如一地工作。

我需要让子视图适用于在线和离线模式，如果有人可以提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:13:14.290

您可能会遇到奇怪的行为，因为 QLPreviewController 的视图并非旨在嵌入到另一个视图中。从[QLPreviewController 类参考](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html)概述：

> 要显示 Quick Look 预览控制器，您有两个选择：您可以使用 UINavigationController 对象将其推送到视图中，或者可以使用其父类 UIViewController 的 presentModalViewController:animated: 方法以模态方式全屏显示它。

话虽如此，您可以尝试：

1.  强制 QLPreviewController （重新）显示其内容。尝试添加`[self.previewController reloadData];`到第一个方法的末尾。这应该强制触发数据源方法。

2.  强制视图“刷新”它的子视图：（`[self.view setNeedsLayout]`实际上可能会像第一个选项一样强制 reloadData）。

祝你好运！

# c++ - Boost 预处理器不扩展

> ID：15669480
> 
> 赞同：3
> 
> 时间：2013-03-27T21:06:15.910
> 
> 标签：c++, boost, boost-preprocessor

我有以下代码：

```
#include <boost/preprocessor.hpp>

#define ARGS(r, data, elem) \
    BOOST_PP_COMMA_IF(BOOST_PP_SUB(r, 2)) \
    BOOST_PP_SEQ_ELEM(0, elem) BOOST_PP_SEQ_ELEM(1, elem)

#define DEF_FUN(name, args) void name(BOOST_PP_SEQ_FOR_EACH(ARGS,,args));

#define DEF_FUNCTIONS_ELEM(r, data, elem) DEF_FUN(BOOST_PP_SEQ_ELEM(0, elem), BOOST_PP_SEQ_ELEM(1, elem))

#define DEF_FUNCTIONS(funSeqs) \
    BOOST_PP_SEQ_FOR_EACH(DEF_FUNCTIONS_ELEM,, funSeqs)

DEF_FUNCTIONS_ELEM(2,, (fun0) (((int)(arg0))   ((char)(arg1))))

DEF_FUNCTIONS
(
    ((fun0) (((int)(arg0))   ((char)(arg1))))
    ((fun1) (((char)(arg0))  ((long)(arg1)) ((short)(arg2))))
    ((fun3) ())
) 
```

当我使用 Clang 3.2 或 g++ 4.6.3 对其进行预处理时，我得到：

```
void fun0( int arg0 , char arg1 );

void fun0(BOOST_PP_SEQ_FOR_EACH(ARGS,,((int)(arg0)) ((char)(arg1)))); 
void fun1(BOOST_PP_SEQ_FOR_EACH(ARGS,,((char)(arg0)) ((long)(arg1)) ((short)(arg2)))); 
void fun3(BOOST_PP_SEQ_FOR_EACH(ARGS,,)); 
```

（为了清楚起见，我添加了换行符）

问题是，为什么内部的 BOOST_PP_SEQ_FOR_EACH 没有展开？

再次传递此输出会扩展预期结果。

编辑：经过大量搜索，我读到一个宏如果被调用两次就不会扩展，我认为这就是原因。

编辑：我应该使用 PP_SEQ_FOR_EACH_I，R 并不意味着用作下标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:01:10.700

`BOOST_PP_SEQ_FOR_EACH`是不可[重入](http://www.boost.org/doc/libs/1_53_0/libs/preprocessor/doc/topics/reentrancy.html)的。Boost.PP 中只有少数宏是可重入的（`BOOST_PP_FOR`、、`BOOST_PP_WHILE`和`BOOST_PP_REPEAT`）。但是，您可以通过使用延迟表达式来解决它，如下所示：

```
#include <boost/preprocessor.hpp>

#define EXPAND(...) __VA_ARGS__
#define EMPTY()
#define DEFER(x) x EMPTY()
// An indirection macro to avoid direct recursion
#define BOOST_PP_SEQ_FOR_EACH_ID() BOOST_PP_SEQ_FOR_EACH

#define ARGS(r, data, elem) \
    BOOST_PP_COMMA_IF(BOOST_PP_SUB(r, 2)) \
    BOOST_PP_SEQ_ELEM(0, elem) BOOST_PP_SEQ_ELEM(1, elem)

// Defer BOOST_PP_SEQ_FOR_EACH_ID here
#define DEF_FUN(name, args) void name(DEFER(BOOST_PP_SEQ_FOR_EACH_ID)()(ARGS,,args));

#define DEF_FUNCTIONS_ELEM(r, data, elem) DEF_FUN(BOOST_PP_SEQ_ELEM(0, elem), BOOST_PP_SEQ_ELEM(1, elem))

// Add EXPAND here to apply another scan to expand the deferred expression
#define DEF_FUNCTIONS(funSeqs) \
    EXPAND(BOOST_PP_SEQ_FOR_EACH(DEF_FUNCTIONS_ELEM,, funSeqs))

DEF_FUNCTIONS
(
    ((fun0) (((int)(arg0))   ((char)(arg1))))
    ((fun1) (((char)(arg0))  ((long)(arg1)) ((short)(arg2))))
    ((fun3) ())
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:41:18.043

```
#include <boost/preprocessor.hpp>

#define ARGS(r, data, index, elem) \
    BOOST_PP_SEQ_ELEM(0, elem) BOOST_PP_SEQ_ELEM(1, elem) BOOST_PP_COMMA_IF(BOOST_PP_NOT_EQUAL(index, BOOST_PP_DEC(data)))

#define DEF_FUN(name, args) void name(BOOST_PP_SEQ_FOR_EACH_I(ARGS,BOOST_PP_SEQ_SIZE(args),args));

#define DEF_FUNCTIONS_ELEM(r, data, elem) DEF_FUN(BOOST_PP_SEQ_ELEM(0, elem), BOOST_PP_SEQ_ELEM(1, elem))

#define DEF_FUNCTIONS(funSeqs) \
    BOOST_PP_SEQ_FOR_EACH(DEF_FUNCTIONS_ELEM,, funSeqs)

DEF_FUNCTIONS_ELEM(2,, (fun0) (((int)(arg0))   ((char)(arg1))))

DEF_FUNCTIONS
(
    ((fun0) (((int)(arg0))   ((char)(arg1))))
    ((fun1) (((char)(arg0))  ((long)(arg1)) ((short)(arg2))))
    ((fun3) ())
) 
```

# haskell - yesod 破包

> ID：15669481
> 
> 赞同：1
> 
> 时间：2013-03-27T21:06:16.353
> 
> 标签：haskell, yesod

在全新的 Haskell 安装（来自 Haskell 包的 OSX）上，我运行：

1.  cabal 安装 yesod 平台
2.  是的初始化
3.  是的发展

输出是：

```
..
..
yesod-static-1.1.2.2 (reinstall) changes: conduit-1.0.2 -> 0.5.6,
crypto-conduit-0.5.0 -> 0.4.3
me2-0.0.0 (new package)
cabal: The following packages are likely to be broken by the reinstalls:
yesod-platform-1.1.8
http-conduit-1.9.0
yesod-json-1.1.2.1
yesod-test-0.3.5
warp-1.3.7.4
wai-test-1.3.0.4
wai-extra-1.3.2.4
Use --force-reinstalls if you want to install anyway. 
```

请问，这个我该怎么办？

# string - 如何在 Arduino 上数字读取引脚并将数据转换为字符串？

> ID：15669483
> 
> 赞同：0
> 
> 时间：2013-03-27T21:06:23.503
> 
> 标签：string, arduino, serial-port

我正在用 2 Arduinos Leonardo 做一个通信系统。要传输，我必须将字符串转换为位并通过 PWM 引脚发送它们。问题是，我该如何做接收器？

我的想法是在数字引脚中接收数据，因此我可以将 LOW/HIGH 转换为“0”和“1”，将 8 位放入字符串中，转换为 char，然后我就有了最终的字符串。

一些信息：-我正在使用 PWM，因为我想实现 FSK 调制，逐位发送；--我有一些硬件可以使通信系统正常工作；- 我的物理通信渠道是串行（通过 Arduino 引脚）；- 在接收器硬件中会为我提供 TTL 信号，所以我会有 0V/5V。这就是为什么我认为 digitalRead() 应该起作用的原因；- 数据通过 PWM 发送，并以两级信号接收；- 我必须做一些协议来发送/接收数据，但仍然不知道如何......

这是我写的代码：

```
void setup() {
  Serial.begin(9600);
  while (!Serial) {;}
}
void loop() {
  char bitPosition = 0;
  String inMessage = 0;
  while (Serial.available() > 0) {
    char outChar;
    boolean digValue = digitalRead(inPin);
    for(bitPosition = 7; bitPosition >= 0;  ){
      if(digValue == LOW){
        bitWrite(outChar, bitPosition, 0);
      }
      if(digValue == HIGH){
        bitWrite(outChar, bitPosition, 1);
      }
    bitPosition--;
    }
  inMessage.concat(outChar);
  if(inMessage != 0){
    Serial.println("Received:  " + inMessage);
  }
 }
} 
```

我希望此代码将数字读取中的高/低状态转换为字符串。0/1 -> 字符 (outChar) -> 字符串 (inMessage)。我不知道我是不是想错了。建议？我应该对波特率做些什么来接收/传输数据吗？如何？

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:21:02.617

好吧，如果您认为问题要复杂得多，那么您的问题。我已经阅读了您在 EE.SE 上发布的类似（相同？）问题。

看起来你还没有抓住关于你的问题的基本信息。这不是软件问题。如果我在全球范围内总结您的问题。

您想将数据从 arduino A 发送到 arduino B。

您计划使用 arduino A 的 PWM 引脚生成 FSK 信号。

第一条评论：怎么样？指针根据相位调制移动的正弦波查找表？这似乎很容易。所以让我们相信这是你选择的方式。（这里你说它是逻辑信号，但在 EE.SE 上你说它是无线信号）

现在你有一个 XX kHz 的信号（我们不知道 XX 值。但根据你的 Arduino 的 Xtal 速度，我不能大于 ~500Khz）

在 arduino B 上，您必须解决时钟恢复问题，因为在 arduino B 上，您无法访问 arduino A 的时钟。这意味着您无法将获得的信号与参考时钟进行比较。当您分析接收到的信号时，您会得到相对于本地时钟的特定相位。但是因为你不知道ardunio A的参考相位，所以你不能说接收位是-90°还是+90°。因此，您不能为接收到的信号分配 0 或 1。

这不是一个小问题。根据您在此处或 EE.SE 上对问题和评论的回答，您正在尝试解决可能无法正常工作的算法的实现问题。您应该首先尝试找到可以使用 MATLAB（或免费的 OCTAVE）模拟的合适算法，确保它正常工作，然后尝试在嵌入式硬件上实现它。

你会在 EE.SE 上收到很多关于你想做什么的答案。这是因为解决一个在专家看来是错误的东西的问题是没有意义的。

因此，如果您想要有意义的答案。请花更多时间从概念上向我们解释您计划解决问题的内容和方式。

添加有关您认为 FSK 工作方式的信息。你打算如何使用 PWM 来做 FSK，这不是微不足道的。以及您如何计划，从概念上检测接收到的符号是 1 还是 0。

事实上，我的回答是：如果我们能解决你的拷贝位问题，它不会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:12:29.183

查看 SoftwareSerial 是如何在 Arduino 中实现的，以了解如何完成这项工作。

[http://arduino.cc/en/Reference/SoftwareSerial](http://arduino.cc/en/Reference/SoftwareSerial)

“SoftwareSerial 库的开发允许在 Arduino 的其他数字引脚上进行串行通信，使用软件来复制功能（因此名称为“SoftwareSerial”）。”

# facebook - 将照片上传到我的 Facebook 相册

> ID：15669485
> 
> 赞同：0
> 
> 时间：2013-03-27T21:06:27.923
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

有没有办法在没有任何授权的情况下使用 javascript SDK 将照片上传到我现有的 facebook 相册？例如，我知道我的 Facebook ID 和我想要上传的图片 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:27:26.223

未经授权，您不能将图像上传到 Facebook 相册。

看看这个答案： [Facebook Graph API - 在 stackoverflow 上使用 javascript 上传照片](https://stackoverflow.com/questions/4999024/facebook-graph-api-upload-photo-using-javascript)

# symfony - twig 中教义的输出变量

> ID：15669487
> 
> 赞同：1
> 
> 时间：2013-03-27T21:06:34.137
> 
> 标签：symfony, symfony-2.1

我是 symfony 的新手，接下来我要尝试的是：

1.  从表中选择所有内容并计算行数。
2.  在树枝模板中访问和显示这些信息。

这是我在专用于从数据库中获取数据的控制器中的代码的一部分：

```
 .
 .
 .
$em=$this->getDoctrine()->getManager();
            $query=$em->createQuery('SELECT b,COUNT(b.id) FROM AcmeWebBundle:baza b ORDER BY b.id DESC');
    $users = $query->getResult();
    if (!$em) {
        throw $this->createNotFoundException('Something went wrong!');

    }
    return $this->render('AcmeWebBundle:Default:index.html.twig',array('users'=>$users));
} 
```

在名为 baza 的表中，我有以下字段：id、username、date..etc

并从名为 index.html.twig 的树枝文件中提取

```
{% extends 'AcmeWebBundle:Default:master.html.twig' %}
{% block body %}
<h1> something</h1><br></br>
{% for user in users %}

{{ ...how to access to the number of rows and other data...}}

{% endfor %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:17:53.400

查询：

```
$query = $this->createQueryBuilder()
          ->from('AcmeWebBundle:baza', 'b')
          ->getQuery();

$user = $query->select('b')
           ->getQuery()
           ->getResult();

$total = $query->select('COUNT(b)')
           ->getQuery()
           ->getSingleScalarResult(); 
```

......

```
return $this->render('AcmeWebBundle:Default:index.html.twig',array('users' => $users, 'count' => $total)); 
```

模板：

```
{% extends 'AcmeWebBundle:Default:master.html.twig' %}

{% block body %}
  <h1> something</h1><br></br>
  {% for user in users %}
    {{ user.id }}
    {{ user.name }}
  {% endfor %}
{% endblock %}

Total users: {{ count }} 
```

*数据库中的id*和*name*字段在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:19:05.697

您可以尝试以下方法：

```
{{ user.id }}
{{ user.username }}
{{ user.date }}
...etc... 
```

# regex - 带有两位小数的整数或浮点数的正则表达式

> ID：15669490
> 
> 赞同：5
> 
> 时间：2013-03-27T21:06:37.860
> 
> 标签：regex

我想用正则表达式验证我的货币字段。我想允许以下模式条目

```
1.23
1
.45
0.56
56.00 
```

不允许使用逗号。我试过`\d+(\.\d\d)`了，但它只允许第一个、第四个和第五个条目。`\d+(?:\.\d\d+)?`允许除了第三个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T21:11:37.240

在小数点前使用`\d*`而不是`\d+`匹配零个或多个数字。还要添加锚点（`^`和`$`），否则只要有任何匹配项，它就会通过。这也将验证一个空字符串，因此如有必要，您可以使用前瞻来确保至少有一个数字：

```
^(?=.*\d)\d*(?:\.\d\d)?$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:13:39.350

[浮点数的](http://www.regular-expressions.info/floatingpoint.html)正则表达式是一个已解决的问题：

```
\d*\.?\d+ 
```

至少两位小数：

```
(\d*\.\d)?\d+ 
```

为了使其更易于理解：

```
\d+|\d*\.\d{2,} 
```

并且恰好是两位小数：

```
\d+|\d*\.\d{2} 
```

根据您的语言，不要忘记[锚定](http://www.regular-expressions.info/anchors.html)表达式，使其必须匹配整个字符串。

# ember.js - Ember js 中的多个观察者

> ID：15669492
> 
> 赞同：2
> 
> 时间：2013-03-27T21:06:44.447
> 
> 标签：ember.js

在 ember 中，让多个观察者为一个属性或让一个观察者拥有内部的所有条件有区别吗？

```
observer_3(
// do stuff here

).observes(var1)

observer_2(
// do stuff here

).observes(var1)

observer_1(
// do stuff here

).observes(var1) 
```

**或者**

```
observersvar1(
// do everything here

).observes(var1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T10:24:05.237

一个属性有多个观察者**将毫无问题地工作**。

**当他们的功能代表不同的关注点时，**我会选择多个观察者。相反，当您想控制逻辑执行的顺序时，我会选择一位观察者。因此**，当它是一个关注点的一部分时，请使用一位观察者。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T10:21:27.777

好吧，如果您将所有内容都放在一个观察者中，则您可以更好地控制代码的执行顺序。另一方面，当您从应用程序的不同（或多或少独立）部分查看属性时，使用多个观察者是有意义的。

# javascript - Jquery在TD单击时选择单选按钮，同时将类添加到活动TD

> ID：15669494
> 
> 赞同：0
> 
> 时间：2013-03-27T21:06:48.923
> 
> 标签：javascript, jquery

我正在寻找一个允许用户选择他们想要的单元格的网格，这将选择一个单选按钮。理想情况下，我将能够隐藏单选按钮并在活动单元格中添加一个类，以便用户知道他们选择了哪一个。我现在遇到的问题是，当用户单击单元格时选择单选按钮时，仅在单击实际单选按钮时才添加该类。此外，当单击另一个框时，它并不总是删除该类。

这是用于添加类的脚本：

```
$(document).ready(function() {
    $("td input").change(function () {
        var $this = $(this);
        var td = $this.parent();
        td.siblings().filter(function() {
            return !!$(this).find('input[name="'+$this.attr('name')+'"]:radio').length;
        }).removeClass('activecell');
        if(this.checked) {
            td.addClass('activecell');
        }
    });
}); 
```

[以及页面http://jsfiddle.net/VU6dN/](http://jsfiddle.net/VU6dN/)的演示

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:24:55.333

将单击处理程序放在单元格而不是单选按钮上，单击单元格时选择单选按钮并将 CSS 类分配给隐藏它的单选按钮。类似于以下内容。此外，这是一个更新的[小提琴，它可以工作](http://jsfiddle.net/VU6dN/4/)。

```
$('td').click(function() {
    var $cell = $(this);
    $('td.activecell').removeClass('activecell');
    $cell.addClass('activecell');
    $cell.children('input').attr('checked', 'checked');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:28:43.460

摆脱`onclick`HTML 中那些讨厌的处理程序并使用 a[`.trigger('click')`](http://api.jquery.com/trigger)代替：

```
 $('td').click(function () {
      $(this).find('input').trigger('click');
  }); 
```

# android - 检查是否修改了 EditText

> ID：15669495
> 
> 赞同：1
> 
> 时间：2013-03-27T21:06:53.517
> 
> 标签：android, android-edittext

我的应用程序应该在编辑文本中打开一个文件以将其显示给用户。如果用户想修改它，只需按下 textwiw 并写入。按下后退按钮后执行此操作，如果文本被修改，则应保存更改，否则，只需关闭当前活动并转到父项。有没有办法查看文本是否被编辑？我的想法是明确比较文件和编辑文本的字符长度，但有什么比这种“粗鲁”的方法更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:12:35.680

您可以使用 TextWatcher：

```
boolean changed = false;
EditText edit = (EditText)findViewById(R.id.medittext);
    edit.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

            changed = true;

        } 

    }); 
```

如果更改与文本中的删除长度相同，则仅比较长度可能会导致误报。

当用户按下返回时，只需检查是否`changed`为真。如果用户进行了编辑然后撤消了它，这可能会导致误报，但最好有一些误报而不是丢失用户更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T21:12:18.553

实际上，您必须比较文本而不是长度，没有什么比这更好的了。用户可以只替换一个单词。TextWatcher 会告诉您用户正在编辑，但他可能会更改并更改回来。所以你真的需要比较字符串。

# android - 使用 asynctask 下载后更新 gridview

> ID：15669500
> 
> 赞同：0
> 
> 时间：2013-03-27T21:07:10.153
> 
> 标签：android, android-asynctask, android-adapter

如何`GridView`在下载文件后使用`AsyncTask`.

我使用“文件名、图像名和 URLFile”`MainActivity`加载数据，然后调用适配器来填充以下项目：`ArrayList``GridView`

```
gridView.setAdapter(new AdapterFiles(getApplicationContext(), mArray); 
```

我的适配器 extends `BaseAdapter`，并为每个项目添加名称、图像和按钮。如果 PDF 文件不存在，应用程序会添加名称为“下载”的按钮：

```
if (!pdfFile.exists(){
    viewHolder.imageButon.setImageResource(R.drawable.btn_download);
} else {
    viewHolder.imageButon.setImageResource(R.drawable.btn_read);
} 
```

单击此按钮时，将`AsyncTask`调用一个新类来下载文件：

```
viewHolder.imageButon.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        FileDownloadTask task = new FileDownloadTask(item, localdownload);                                            
        task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
    }
} 
```

问题是，我还没有找到重新加载适配器的方法，并“重新检查”文件是否存在并更改名称为“READ”的按钮。

我需要**重新调用**我的适配器`onPostExecute`，`FileDownloadTask`但我不知道最好的方法。

PS：我相信这`notifyDataSetChanged()`不是解决方案，因为我不改变我的`ArrayList`.

非常感谢

# visual-studio - Visual Studio Team Services 构建问题

> ID：15669510
> 
> 赞同：4
> 
> 时间：2013-03-27T21:07:33.270
> 
> 标签：visual-studio, tfs, azure-devops

我在用[Visual Studio Team Services](http://www.visualstudio.com)作为源代码控制并启用了持续集成。

我的项目是一个使用 Entity Framework 5 的 ASP.NET 应用程序。当我签入代码并且构建控制器尝试构建它时，出现以下错误

> DataModel\GenomicsTutorDataModel.Context.cs (40)：找不到类型或命名空间名称“DbSet”（您是否缺少 using 指令或程序集引用？）
> 
> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets (1578)：无法解析此引用。找不到程序集“EntityFramework”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。

在我的解决方案中，我制作了 system.data.entity CopyLocal = True 但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:11:24.850

可能您使用的是**64 位**机器而 TFS 服务器不是？尝试为**Any CPU**或**x86**构建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:55:35.350

将您引用的 DLL 添加到您`System.Data.Entity`的文件夹中`project`或文件夹中的某个位置`Source Control`并引用该 DLL。签入并尝试再次构建您的应用程序。

# c++ - 为什么我无法使用 DirectInput 获取键盘？

> ID：15669513
> 
> 赞同：2
> 
> 时间：2013-03-27T21:07:45.057
> 
> 标签：c++, keyboard, directinput

我今天刚开始接触 DirectInput，在 Windows 7 Ultimate N 上使用 DirectInput8 和[MinGW](http://nuwen.net/mingw.html)。我从一个简单的程序开始，每秒报告哪些键当前处于关闭状态（只是代码，不可读的键）。但是，我什至无法在键盘出错之前获得它：

```
#define _WIN32_WINNT 0x0601
#include <dinput.h>
//link to dinput8.lib and dxguid.lib

int main() {
    IDirectInput8 *dinput;
    DirectInput8Create(GetModuleHandle(nullptr), DIRECTINPUT_VERSION, IID_IDirectInput8, (void **)&dinput, nullptr);

    IDirectInputDevice8 *kb;
    dinput->CreateDevice(GUID_SysKeyboard, &kb, nullptr);

    kb->SetDataFormat(&c_dfDIKeyboard);
    kb->SetCooperativeLevel(GetConsoleWindow(), DISCL_FOREGROUND | DISCL_NONEXCLUSIVE);
    kb->Acquire(); //fails with DIERR_INVALIDPARAM
} 
```

我省略了错误检查，但发生的情况是每次调用都成功（根据`FAILED`宏的判断）直到`Acquire()`. 该调用因错误而失败`DIERR_INVALIDPARAM`。我查看了 MSDN 页面和整个网络，但我找不到任何原因，基于它存在和工作之前的所有内容，它会失败。

为了更好地衡量，我还尝试循环`Acquire()`调用，直到它成功，然后在它运行时使用 windows 和键盘，但程序在它运行的所有时间都没有成功获取键盘。如何成功获取键盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-29T04:51:06.510

**在控制台程序中试验键盘和操纵杆的直接输入**

使用直接输入不需要窗口句柄。您可以在参数中使用 null 作为窗口句柄。

代替：

```
kb->SetCooperativeLevel(GetConsoleWindow(), DISCL_FOREGROUND | DISCL_NONEXCLUSIVE); 
```

利用：

```
kb->SetCooperativeLevel(NULL, DISCL_FOREGROUND | DISCL_NONEXCLUSIVE); 
```

这是一个示例程序，它使用直接输入在按下这些键时显示键“a”和“d”。当这些键被按住 300 毫秒时，它将重复这些键。该示例程序也是高分辨率计数器的一个很好的示例。无需在 Visual Studio 中添加属性即可添加库 dinput8.lib 和 dxguid.lib。程序顶部的#pragma 注释代码行会为您执行此操作。

```
 #include <dinput.h>
#include <iostream>
#include <Windows.h>

#pragma comment(lib,"dinput8.lib")
#pragma comment(lib,"dxguid.lib")

using std::cout;
using std::endl;

LPDIRECTINPUT8 di;
LPDIRECTINPUTDEVICE8 keyboard;

class CTimer
{
public:
    CTimer() {
        QueryPerformanceFrequency(&mqFreq);
    }
    ~CTimer() {}

    void Start() {
        QueryPerformanceCounter(&mqStart);
    }
    void End() {
        QueryPerformanceCounter(&mqEnd);
    }
    double GetTimeInSeconds() {
        return (mqEnd.QuadPart - mqStart.QuadPart)/(double)mqFreq.QuadPart;
    }
    double GetTimeInMilliseconds() {
        return (1.0e3*(mqEnd.QuadPart - mqStart.QuadPart))/mqFreq.QuadPart;
    }
    double GetTimeInMicroseconds() {
        return (1.0e6*(mqEnd.QuadPart - mqStart.QuadPart))/mqFreq.QuadPart;
    }
    double GetTimeInNanoseconds() {
        return (1.0e9*(mqEnd.QuadPart - mqStart.QuadPart))/mqFreq.QuadPart;
    }

private:
    LARGE_INTEGER mqStart;
    LARGE_INTEGER mqEnd;
    LARGE_INTEGER mqFreq;
};

HRESULT initializedirectinput8() {
    HRESULT hr;
    // Create a DirectInput device
if (FAILED(hr = DirectInput8Create(GetModuleHandle(NULL), DIRECTINPUT_VERSION, 
                                   IID_IDirectInput8, (VOID**)&di, NULL))) {
    return hr;
}
}

void createdikeyboard() {
    di->CreateDevice(GUID_SysKeyboard, &keyboard, NULL);
    keyboard->SetDataFormat(&c_dfDIKeyboard);
    keyboard->SetCooperativeLevel(NULL,DISCL_FOREGROUND | DISCL_EXCLUSIVE);
    keyboard->Acquire();
}

void destroydikeyboard() {
    keyboard->Unacquire();
    keyboard->Release();
}

#define keydown(name,key) (name[key] & 0x80)

void main() {
    HRESULT hr;
    BYTE dikeys[256];
    CTimer timeint;
    CTimer timekeywaspressedclass;
    double gettime;
    double lastkeywasa=false;
    double timekeywaspressed=0;
    bool lasttimetherewasakeypress=false;
    bool akeywaspressed=false;
    initializedirectinput8();
    createdikeyboard();
    hr=keyboard->GetDeviceState(256,dikeys);
    timeint.Start();
    while (!keydown(dikeys,DIK_ESCAPE)) {
        timeint.End();
        gettime=timeint.GetTimeInMilliseconds();
        if (gettime >=5) {
            hr=keyboard->GetDeviceState(256,dikeys);
            akeywaspressed=false;
            if (keydown(dikeys,DIK_A)) {
                akeywaspressed=true;
                if (timekeywaspressed >=300) {
                    cout << "a";
                    lasttimetherewasakeypress=false;
                }

            }
            if (keydown(dikeys,DIK_D)) {
                akeywaspressed=true;
                if (timekeywaspressed >=300) {
                    cout << "d";
                    lasttimetherewasakeypress=false;
                }
            }
            if (lasttimetherewasakeypress==false && akeywaspressed==true) {
                timekeywaspressedclass.Start();
                timekeywaspressed=0;
                lasttimetherewasakeypress=true;
            }
            if (lasttimetherewasakeypress==true && akeywaspressed==true) {
                timekeywaspressedclass.End();
                gettime=timekeywaspressedclass.GetTimeInMilliseconds();
                timekeywaspressed+=gettime;
                timekeywaspressedclass.Start();
            }
            if (akeywaspressed==false) {
                lasttimetherewasakeypress=false;
                timekeywaspressed=0;
            }

        } // end if (gettime >=5)

        } // end while
destroydikeyboard();

} // end main 
```

这是操纵杆的示例控制台程序。

```
#include <dinput.h>
#include <iostream>
#include <Windows.h>

#pragma comment(lib,"dinput8.lib")
#pragma comment(lib,"dxguid.lib")

using std::cout;
using std::endl;

LPDIRECTINPUT8 di;
LPDIRECTINPUTDEVICE8 joystick;
LPDIRECTINPUTDEVICE8 keyboard;
DIJOYSTATE2 js;
BOOL CALLBACK enumCallback(const DIDEVICEINSTANCE* instance, VOID* context);
BOOL CALLBACK enumAxesCallback(const DIDEVICEOBJECTINSTANCE* instance, VOID* context);

HRESULT selectjoystick() {
    HRESULT hr;
    // Look for the first simple joystick we can find.
if (FAILED(hr = di->EnumDevices(DI8DEVCLASS_GAMECTRL, enumCallback,
                                NULL, DIEDFL_ATTACHEDONLY))) {
    return hr;
}

// Make sure we got a joystick
if (joystick == NULL) {
  //  printf("Joystick not found.\n");
    return E_FAIL;
}
}

DIDEVCAPS capabilities;

HRESULT setjoystickproperties() {
    HRESULT hr;
    // Set the data format to "simple joystick" - a predefined data format 
//
// A data format specifies which controls on a device we are interested in,
// and how they should be reported. This tells DInput that we will be
// passing a DIJOYSTATE2 structure to IDirectInputDevice::GetDeviceState().
if (FAILED(hr = joystick->SetDataFormat(&c_dfDIJoystick2))) {
    return hr;
}

// Set the cooperative level to let DInput know how this device should
// interact with the system and with other DInput applications.
if (FAILED(hr = joystick->SetCooperativeLevel(NULL, DISCL_EXCLUSIVE |
                                              DISCL_FOREGROUND))) {
    return hr;
}

// Determine how many axis the joystick has (so we don't error out setting
// properties for unavailable axis)

capabilities.dwSize = sizeof(DIDEVCAPS);
if (FAILED(hr = joystick->GetCapabilities(&capabilities))) {
    return hr;
}
}

BOOL CALLBACK enumCallback(const DIDEVICEINSTANCE* instance, VOID* context)
{
    HRESULT hr;

    // Obtain an interface to the enumerated joystick.
    hr = di->CreateDevice(instance->guidInstance, &joystick, NULL);

    // If it failed, then we can't use this joystick. (Maybe the user unplugged
    // it while we were in the middle of enumerating it.)
    if (FAILED(hr)) { 
        return DIENUM_CONTINUE;
    }

    // Stop enumeration. Note: we're just taking the first joystick we get. You
    // could store all the enumerated joysticks and let the user pick.
    return DIENUM_STOP;
}

HRESULT enumaxes() {
    HRESULT hr;
// Enumerate the axes of the joyctick and set the range of each axis. Note:
// we could just use the defaults, but we're just trying to show an example
// of enumerating device objects (axes, buttons, etc.).
if (FAILED(hr = joystick->EnumObjects(enumAxesCallback, NULL, DIDFT_AXIS))) {
    return hr;
}
}

BOOL CALLBACK enumAxesCallback(const DIDEVICEOBJECTINSTANCE* instance, VOID* context)
{
    HWND hDlg = (HWND)context;

    DIPROPRANGE propRange; 
    propRange.diph.dwSize       = sizeof(DIPROPRANGE); 
    propRange.diph.dwHeaderSize = sizeof(DIPROPHEADER); 
    propRange.diph.dwHow        = DIPH_BYID; 
    propRange.diph.dwObj        = instance->dwType;
    propRange.lMin              = -1000; 
    propRange.lMax              = +1000; 

    // Set the range for the axis
    if (FAILED(joystick->SetProperty(DIPROP_RANGE, &propRange.diph))) {
        return DIENUM_STOP;
    }

    return DIENUM_CONTINUE;
}

HRESULT polljoy() {
    HRESULT     hr;

    if (joystick == NULL) {
        return S_OK;
    }

    // Poll the device to read the current state
    hr = joystick->Poll(); 
    if (FAILED(hr)) {
        // DInput is telling us that the input stream has been
        // interrupted. We aren't tracking any state between polls, so
        // we don't have any special reset that needs to be done. We
        // just re-acquire and try again.
        hr = joystick->Acquire();
        while (hr == DIERR_INPUTLOST) {
            hr = joystick->Acquire();
        }

        // If we encounter a fatal error, return failure.
        if ((hr == DIERR_INVALIDPARAM) || (hr == DIERR_NOTINITIALIZED)) {
            return E_FAIL;
        }

        // If another application has control of this device, return successfully.
        // We'll just have to wait our turn to use the joystick.
        if (hr == DIERR_OTHERAPPHASPRIO) {
            return S_OK;
        }
    }

    // Get the input's device state
    if (FAILED(hr = joystick->GetDeviceState(sizeof(DIJOYSTATE2), &js))) {
        return hr; // The device should have been acquired during the Poll()
    }

    return S_OK;
}

class CTimer
{
public:
    CTimer() {
        QueryPerformanceFrequency(&mqFreq);
    }
    ~CTimer() {}

    void Start() {
        QueryPerformanceCounter(&mqStart);
    }
    void End() {
        QueryPerformanceCounter(&mqEnd);
    }
    double GetTimeInSeconds() {
        return (mqEnd.QuadPart - mqStart.QuadPart)/(double)mqFreq.QuadPart;
    }
    double GetTimeInMilliseconds() {
        return (1.0e3*(mqEnd.QuadPart - mqStart.QuadPart))/mqFreq.QuadPart;
    }
    double GetTimeInMicroseconds() {
        return (1.0e6*(mqEnd.QuadPart - mqStart.QuadPart))/mqFreq.QuadPart;
    }
    double GetTimeInNanoseconds() {
        return (1.0e9*(mqEnd.QuadPart - mqStart.QuadPart))/mqFreq.QuadPart;
    }

private:
    LARGE_INTEGER mqStart;
    LARGE_INTEGER mqEnd;
    LARGE_INTEGER mqFreq;
};

HRESULT initializedirectinput8() {
    HRESULT hr;
    // Create a DirectInput device
if (FAILED(hr = DirectInput8Create(GetModuleHandle(NULL), DIRECTINPUT_VERSION, 
                                   IID_IDirectInput8, (VOID**)&di, NULL))) {
    return hr;
}
}

void createdikeyboard() {
    di->CreateDevice(GUID_SysKeyboard, &keyboard, NULL);
    keyboard->SetDataFormat(&c_dfDIKeyboard);
    keyboard->SetCooperativeLevel(NULL,DISCL_FOREGROUND | DISCL_EXCLUSIVE);
    keyboard->Acquire();
}

void destroydikeyboard() {
    keyboard->Unacquire();
    keyboard->Release();
}

void closejoystick() {
    if (joystick) { 
    joystick->Unacquire();
    }
    if (joystick) {
        joystick->Release();
    }
}

#define keydown(name,key) (name[key] & 0x80)

void main() {
    HRESULT hr;
    CTimer pollintclass;
    hr=initializedirectinput8();
    createdikeyboard();
    hr=selectjoystick();
    hr=setjoystickproperties();
    hr=enumaxes();
    bool endloop=false;
    double gettime;
    BYTE dikeys[256];
    pollintclass.Start();
    while (endloop==false) {
        pollintclass.End();
        gettime=pollintclass.GetTimeInMilliseconds();
        if (gettime >=5) {
            hr=keyboard->GetDeviceState(256,dikeys);
            if (FAILED(hr)) 
                keyboard->Acquire();
            if (keydown(dikeys,DIK_ESCAPE)) 
                endloop=true;
            polljoy();
            cout << "joy x-axis=" << js.lX << " " << "joy y-axis=" << js.lY << endl;
            pollintclass.Start();
        }
    }
destroydikeyboard();
    closejoystick();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:48:13.717

你试过`DISCL_BACKGROUND`代替`DISCL_FOREGROUND`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:34:13.193

实际上，当我将它从与控制台窗口（明显存在）关联更改为我在`SetCooperativeLevel()`调用中创建的一个时，错误会神奇地消失。为什么不能使用控制台窗口我不知道，所以我会暂时不接受这个，代替一个回答者，但这确实解决了问题。

# ipython - ipython 0.13 zmq 错误

> ID：15669514
> 
> 赞同：0
> 
> 时间：2013-03-27T21:07:46.963
> 
> 标签：ipython, pyzmq, ipython-parallel

我遇到了 ipython 集群的奇怪行为。计算完成，但许多结果从未到达客户端（并且引擎在完成第一次计算后只是空闲）。

我怀疑 zmq 有问题，因为 1）我不时看到以下错误：

```
 File "/data/misc/nano/python/env_stable/lib/python2.7/site-packages/IPython/parallel/client/asyncresult.py", line 118, in get
    if not self.ready():
  File "/data/misc/nano/python/env_stable/lib/python2.7/site-packages/IPython/parallel/client/asyncresult.py", line 132, in ready
    self.wait(0)
  File "/data/misc/nano/python/env_stable/lib/python2.7/site-packages/IPython/parallel/client/asyncresult.py", line 142, in wait
    self._ready = self._client.wait(self.msg_ids, timeout)
  File "/data/misc/nano/python/env_stable/lib/python2.7/site-packages/IPython/parallel/client/client.py", line 1058, in wait
    self.spin()
  File "/data/misc/nano/python/env_stable/lib/python2.7/site-packages/IPython/parallel/client/client.py", line 1015, in spin
    self._flush_results(self._task_socket)
  File "/data/misc/nano/python/env_stable/lib/python2.7/site-packages/IPython/parallel/client/client.py", line 814, in _flush_results
    idents,msg = self.session.recv(sock, mode=zmq.NOBLOCK)
  File "/data/misc/nano/python/env_stable/lib/python2.7/site-packages/IPython/zmq/session.py", line 642, in recv
    idents, msg_list = self.feed_identities(msg_list, copy)
  File "/data/misc/nano/python/env_stable/lib/python2.7/site-packages/IPython/zmq/session.py", line 673, in feed_identities
    idx = msg_list.index(DELIM)
ValueError: '<IDS|MSG>' is not in list

Additionally IPython.zmq has two test failures:

======================================================================
ERROR: test_send (IPython.zmq.tests.test_session.TestSession)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/clusterdata/python/env_stable/lib/python2.7/site-packages/IPython/zmq/tests/test_session.py", line 76, in test_send
    socket = MockSocket(zmq.Context.instance(),zmq.PAIR)
  File "/clusterdata/python/env_stable/lib/python2.7/site-packages/IPython/zmq/tests/test_session.py", line 34, in __init__
    self.data = []
  File "/clusterdata/python/env_stable/lib/python2.7/site-packages/zmq/sugar/attrsettr.py", line 38, in __setattr__
    self.__class__.__name__, upper_key)
AttributeError: MockSocket has no such option: DATA

======================================================================
ERROR: test_send (IPython.zmq.tests.test_session.TestSession)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/clusterdata/python/env_stable/lib/python2.7/site-packages/zmq/tests/__init__.py", line 108, in tearDown
    raise RuntimeError("context could not terminate, open sockets likely remain in test")
RuntimeError: context could not terminate, open sockets likely remain in test

---------------------------------------------------------------------- 
```

我使用 pyzmq 13.0.0（由 pip 安装）和 zeromq 3.2.2，由 pyzmq 的安装程序编译。我使用 ipython 13.1 和 python 2.7.3。

关于这可能是什么的任何建议，如果不是，我如何找出更多信息为什么会发生这些错误？

更新：事实证明，减速是由于 ipcontroller 的任务队列很长，然后占用了 100% 的 CPU 并且严重滞后。那是一个单独的问题，但我仍然希望得到有关上述内容的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:35:49.870

@minrk 在评论中回答。ZMQ 错误并不重要，性能是由于调度造成的，通过设置`TaskScheduler.hwm=0`.

# android - 从资产文件夹加载图像到 ImageView 失去透明度

> ID：15669516
> 
> 赞同：1
> 
> 时间：2013-03-27T21:07:53.163
> 
> 标签：android, bitmap, imageview, transparency, assets

我希望有人可以帮助我解决这个问题。我正在从资产文件夹中加载位图并在之后显示它们。到目前为止一切都很好，**除了**我所有的照片都失去了透明度之外，一切都很好。

这就是我的 XML 的样子

```
<ImageView
        android:id="@+id/picture_iv"
        android:layout_height="150dp"
        android:layout_width="150dp"
        android:layout_marginTop="10dp"
        android:background="@android:color/transparent"
        android:cacheColorHint="@android:color/transparent"
        android:src="@drawable/prod_2"/> 
```

这就是我从资产加载图片的方式。

```
public static Bitmap getBitmapFromAsset(Context context, String file) {
    Bitmap bitmap = null;

    BitmapFactory.Options op = new BitmapFactory.Options();
    op.inPreferredConfig = Bitmap.Config.ARGB_8888;

    InputStream is = context.getAssets().open(file);
    bitmap = BitmapFactory.decodeStream(is, null, op);

    return bitmap;
} 
```

这些是我的活动中的行。

```
ImageView iv = (ImageView) a.findViewById(R.id.picture_iv);
iv.setImageBitmap(getBitmapFromAssets(getActivity(), picPath)); 
```

我已经尝试过与我的问题相关的建议，例如设置 android:cacheColorHint=@android:color/transparent 或 imageView.setBackgroundColor(0);

但没有任何帮助。有人能指出我正确的方向吗？我迷路了。

提前致谢，

* * *

## 编辑

我使用 PNG，它们都具有透明度。通过将图片移动到可绘制文件夹中并通过**iv.setBackgroundResource(R.drawable.picture) 或 android:src="@drawable/picture"**加载它们将显示它应该如何，具有透明度；

只是从 Assets 接缝加载会产生问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:17:57.907

代替使用 ImageView 尝试使用 ImageButton，因为它是透明的，它看起来像一个 ImageView

# c++ - 找不到 GLEW 函数

> ID：15669526
> 
> 赞同：1
> 
> 时间：2013-03-27T21:08:08.137
> 
> 标签：c++, opengl, glew, glfw

我在 Ubuntu 上，使用 OpenGL、GLEW 和 GLFW 编写应用程序。我使用 Eclipse 作为我的 IDE，但在尝试使用**glGenRenderbuffer**等函数时遇到问题。我在 Windows 下设置了一个非常相似的结构，但无法让它在 Linux 上运行。

我正在链接到库*glfw*和*GLEW*。我能够编译和运行我的应用程序的一部分，并且可以初始化 GLFW 和 GLEW。从这些测试运行中，我了解到以下内容：

```
OpenGL version: 4.2.0 NVIDIA 304.64
Using GLEW 1.6.0 
```

但是，我无法编译函数**glGenRenderbuffer**（或其他帧缓冲区函数）。我曾尝试将 EXT 和 ARB 添加到名称中，以及在没有任何运气的情况下使用 glex.h。据我所知，GLEW 的目的是处理所有的扩展问题，对吧？

包含的源文件 ( *VolumeRenderer.cpp* ) 是这样完成的：

```
#include <glm/gtc/matrix_transform.hpp>
#include <VolumeRenderer.h>
#include <GL/glew.h>
#include <GL/glfw.h> 
```

再往下，我正在尝试使用这样的功能（当然只是部分完整的功能）：

```
bool VolumeRenderer::InitFramebuffers()
{
  glGenRenderbuffers(1, &renderBufferObject_);
  return true;
} 
```

我得到的只是**“无法解析函数'glGenRenderBuffers'”。**

查看我包含的 GL/glew.h 标头，我发现了以下几行：

```
#define glGenRenderbuffers GLEW_GET_FUN(__glewGenRenderbuffers)
#define glGenRenderbuffersEXT GLEW_GET_FUN(__glewGenRenderbuffersEXT) 
```

但是编译器仍然找不到该函数。有什么我忘记的吗，或者我可以运行一些测试和检查来看看发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:03:08.030

好的，所以我通过基本上将我的 Eclipse 项目文件逐个文件复制到一个新的空项目中来让它工作。不过，在那之前我还做了一些其他的事情。首先，我按照有用的评论中的建议移动了包含。我还删除了 glm 之类的东西。没有成功！然后我用一个 .cpp 文件在 Eclipse 中创建了一个简单的项目，并链接到 glfw 和 GLEW：

```
#include <GL/glew.h>
#include <GL/glfw.h>
#include <iostream>
#include <cstdlib>

int main()
{
  if (glfwInit() != GL_TRUE) {
    std::cout << "glfwInit() failed\n";
    exit(1);
  }
  if (!glfwOpenWindow(800, 600, 8 , 8, 8, 8, 8, 8, GLFW_WINDOW)) {
    std::cout << "glfwOpenWindow() failed\n";
    exit(1);
  }
  char *glVersion = (char*)glGetString(GL_VERSION);
  if (glVersion) {
    std::cout << "OpenGL version: " << glVersion << "\n";
  }
  GLenum err = glewInit();
  if (err != GLEW_OK) {
    std::cout << "GLEW init failed: " << glewGetErrorString(err) << "\n";
    exit(1);
  } else {
    std::cout << "Using GLEW " << glewGetString(GLEW_VERSION) << "\n";
  }
  GLuint buf;
  glGenRenderbuffers(1, &buf);
  exit(0);
} 
```

这就像一个魅力。然后我尝试通过使用类似文件和包含结构制作另一个项目来重新创建我的旧问题，它似乎也可以正常工作。然后我开始了第三个空项目，我只是简单地复制了最初给我带来麻烦的文件。现在我有一个原始项目的精确副本（现在包含顺序已更改）与完全相同的库链接到它，并且它可以工作。我仍然不知道发生了什么，但我怀疑我在 Eclipse 中的项目不知何故搞砸了，即使我做了一些更改，也从未恢复过。

# php - 如何发布 $variable

> ID：15669531
> 
> 赞同：0
> 
> 时间：2013-03-27T21:08:24.853
> 
> 标签：php, variables, post

我正在尝试将变量发布到另一个页面，但是当我给出手动值时它可以工作。作为;

```
echo '<input type="hidden" name="productid" value="8" />'; 
```

在第二页我可以得到它；

```
$p_id = $_POST['productid']; 
```

我想做的是；

而不是手动写入值，而是编写类似的东西；

```
$product_id = $this->product->pr_id; 
```

并使用 $product_id 的价值。

我尝试了很多类似的事情

```
value="<?php echo $product_id ; ?> 
```

但没有用。或者发送变量的正确方法是什么？

任何帮助都会得到帮助。

**编辑：**

第 1 页；

```
<?php 
$product_id = $this->product->virtuemart_product_id;
echo $product_id;

echo ' <input type="file" name="files[]" id="upload" size="50" class="inputbox" multiple/><br />';
echo '<input type="hidden" name="productid" value="' . $product_id . '" />';
var_dump($product_id); 
```

?>

第二页；

```
$p_id = $_POST['productid'];
$query2=mysql_query("INSERT into jos_virtuemart_product_medias (`virtuemart_product_id`,`virtuemart_media_id`) VALUES ($p_id,$media_id)  "); 
```

这只有当我在第一页手动写一个数字值时才有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:11:11.180

如果`$product_id`实际设置，这应该工作：

```
echo '<input type="hidden" name="productid" value="' . $product_id . '" />'; 
```

或者：

```
<input type="hidden" name="productid" value="<?php echo $product_id ; ?>" /> 
```

# c# - 网络流接收数据与 '\0' 混合

> ID：15669532
> 
> 赞同：2
> 
> 时间：2013-03-27T21:08:27.587
> 
> 标签：c#, encoding, tcp, networkstream

我的服务器正在发送以下数据：

```
{
  "command": 23
} 
```

我的客户正在接收以下数据：

```
"{\0\r\0\n\0 \0 \0\"\0c\0o\0m\0m\0a\0n\0d\0\"\0:\0 \02\03\0\r\0\n\0}\0" 
```

正如你所看到的，我正在接收发送的数据，但与那些`\0`混合在一起的数据。`What is causing this?`也许与编码有关？

来自发送数据的服务器的方法：

```
public void GetBasicInfo()
        {
            JObject o = new JObject();

            o.Add(COMMAND, (int)Command.GetBasicInfo);

            byte[] package = GetBytes(o.ToString());
            System.Diagnostics.Debug.WriteLine(o.ToString());
            networkStream.Write(package, 0, package.Length);
            networkStream.Flush();
        }

private static byte[] GetBytes(string str)
        {
            byte[] bytes = new byte[str.Length * sizeof(char)];
            System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
            return bytes;
        } 
```

客户端读取数据的方法：

```
private void CommsHandler(TcpClient tcpClient)
        {
            NetworkStream networkStream = tcpClient.GetStream();

            while (true)
            {
                try
                {
                    string message = ReadResponse(networkStream);
                    System.Diagnostics.Debug.WriteLine(message);
                    ParseMessage(message);
                }
                catch (Exception)
                {
                    break;
                }

            }

            Logger.Log(LogType.Warning, "Communication with server closed");

            tcpClient.Close();
            SearchForServer();
        }

private static string ReadResponse(NetworkStream networkStream)
        {
            // Check to see if this NetworkStream is readable.
            if (networkStream.CanRead)
            {
                var myReadBuffer = new byte[256]; // Buffer to store the response bytes.
                var completeMessage = new StringBuilder();

                // Incoming message may be larger than the buffer size.
                do
                {
                    var numberOfBytesRead = networkStream.Read(myReadBuffer, 0, myReadBuffer.Length);
                    completeMessage.AppendFormat("{0}", Encoding.ASCII.GetString(myReadBuffer, 0, numberOfBytesRead));
                } while (networkStream.DataAvailable);

                return completeMessage.ToString();
            }
            return null;
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T21:11:36.410

> 正如你所看到的，我正在接收发送的数据，但与那些 \0 混合在一起。这是什么原因造成的？也许与编码有关？

是的。就是这个方法：

```
private static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

它以二进制形式复制`char`数据——每个字符两个字节。根本不要使用它 - 只需使用`Encoding.GetBytes`，选择合适的编码......我建议`Encoding.UTF8`。在接收端使用相同的编码。请注意，您不能只使用`Encoding.GetString`，因为您可能会收到在字符中途结束的数据（如果您有任何非 ASCII 数据）。

我还建议不要将`DataAvailable`其用作消息是否已完成的指示。如果您在同一个流上发送多条消息，您应该为每条消息添加长度前缀（可能是最简单的方法）或使用一些特定数据来指示流的结束。

# windows-8 - 弹出窗口的操作增量 - XAML Windows 8

> ID：15669536
> 
> 赞同：1
> 
> 时间：2013-03-27T21:08:41.193
> 
> 标签：windows-8, popup, winrt-xaml

我正在尝试将浮动弹出窗口放在屏幕上。我希望用户能够将该弹出窗口移动到屏幕上的任何位置。

所以我正在使用：

```
<Popup x:Name="myPopup" Grid.Row="0" Grid.RowSpan="2" Margin="0, 0, 0, 0"  ManipulationMode="All" ManipulationDelta="PopupManipulationDelta" IsLightDismissEnabled="False" Visibility="Collapsed" IsOpen="false"> 
```

后面的代码：

```
private void PopupManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
    {
        var ct = (CompositeTransform)addShapesPopup.RenderTransform;
        ct.TranslateX += e.Delta.Translation.X;
        ct.TranslateY += e.Delta.Translation.Y;               
        UpdateLayout();
    } 
```

但这不起作用。函数 PopupManipulationDelta 甚至没有被调用。

我尝试在矩形、椭圆等形状上使用相同的逻辑，它在那里工作得很好。

你能帮我理解为什么它不能与弹出窗口一起工作吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:17:11.917

我相信 Popup 没有任何视觉表示，因此它无法响应命中测试，从而无法响应操纵事件。只需在其中放置一些控件并使其响应输入事件。如果您不希望它可见，它可以是`Grid`with 。`Background="Transparent"`

# java - 二维数组

> ID：15669548
> 
> 赞同：0
> 
> 时间：2013-03-27T21:09:15.633
> 
> 标签：java

我想计算 2 个矩阵的元素之间的差异：示例：

```
s1 = tuple[0][0]-vector[0][0]+tuple[0][1]-vector[0][1]
s2 = tuple[0][0]-vector[1][0]+tuple[0][1]-vector[1][1]
s3 = tuple[0][0]-vector[2][0]+tuple[0][1]-vector[2][1]

static double Distance1(double[][] tuple, double[][] vector)
{
    double sumSquaredDiffs =0.0;
    int i;
    int j;
    for(i=0; i<tuple.length;i++)
        for(j=0; j<vector.length; j++){
            sumSquaredDiffs = tuple[i][0] - vector[j][0]+ tuple[i][1] - vector[j][1];
        }
        return sumSquaredDiffs;
    }
} 
```

我希望结果如下所示：

```
13.0
125.0
123.0
10.0
122.0
120.0 
```

有人可以帮我纠正这个功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:15:32.003

您可以进行如下操作：

```
//Assuming that no. of rows and columns in both matrices are same 
static double Distance1(double[][] arr1, double[][] arr2)
{
  double[][] result = new double[arr1.length][arr2[0].length];
  for (int i = 0 ; i < arr1.length ; i++)
  {
    for (int j = 0 ; j < arr1[i].length ; j++)
    {
        result[i][j] = arr1[i][j] - arr2[i][j];
    }
  }
 //Printing Result
 for (int i = 0 ; i < result.length ; i++)
 {
    for (int j = 0 ; j < result.length ; j++)
    {
        System.out.print(result[i][j]+"\t");
    }
    System.out.print("\n");
 }
} 
```

# networking - 镜像网络流量进行流量拦截

> ID：15669549
> 
> 赞同：0
> 
> 时间：2013-03-27T21:09:19.637
> 
> 标签：networking, network-programming, libpcap, winpcap

我想开发一个应用程序，将来自网段的所有流量镜像到 Windows 站，以便能够查看所有 tcp-ip 请求/响应数据（过滤）。

我知道应该可以使用 WinPcap 捕获所有数据包，但在这种情况下，问题是我必须实现能够区分 tcp 数据流所需的所有处理（例如握手、关闭、重新传输、重新排序，也许还有其他？）。我需要数据流，因为我将进行应用程序级别（例如 http）过滤。

我想知道某处是否有为我提供 tcp 数据流的驱动程序/解决方案，可以在网关机器上使用或使用端口镜像的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:15:34.700

对于初学者，在 WinPCap 中，您可以定义一个叫做[filter](http://www.winpcap.org/docs/docs_40_2/html/group__language.html)的东西。
该过滤器会过滤掉除您指定的类型之外的所有流量，因此如果您只想捕获 HTTP 流量，我建议您对`TCP Port 80`用于 HTTP 的任何其他端口或任何其他端口进行过滤。

捕获这些数据包后，您可以检查 TCP 的有效负载，解析 HTTP 标头并根据系统策略做任何您想做的事情。

如果您想熟悉如何使用 WinPCap 以及如何使用过滤器，请查看[此链接（在此示例中，它们通常捕获 TCP 流量，您应该将“端口 80”添加到它们的过滤器中）。](http://www.codeproject.com/Articles/20501/TCP-Session-Reconstruction-Tool)

# java - 像 HashCalc 一样获取 HexString 的 SHA1

> ID：15669550
> 
> 赞同：1
> 
> 时间：2013-03-27T21:09:25.523
> 
> 标签：java, hash, hex, sha1, sha

[HashCalc](http://www.slavasoft.com/hashcalc/)在顶部有一个名为“数据格式”的字段，我将其切换为“HexString”，然后`9a`在数据字段中输入测试值。我在其上运行 SHA-1 哈希，答案是：`13cba177bcfad90e7b3de70616b2e54ba4bb107f`

（注意：在线哈希器会将“9a”作为字符串进行哈希处理，导致答案为`e8eef065fb7295044d65b305bab18a9a645d1abf`。这对于此应用程序是错误的）

现在，我需要将这种类型的散列嵌入到我的 Java 程序中。这是我到目前为止得到的（包装在 try/catch 中）：

```
String ss = "9a";
ByteBuffer bb = ByteBuffer.allocate(8);  
byte[] ba = bb.putLong(Long.decode("0x"+ss).longValue()).array();
MessageDigest md = MessageDigest.getInstance("SHA-1");
String results = encodeHex(md.digest(ba));
System.out.println("sha:"+results); 
```

但是，我的结果是`E73C417858807239DD5BC30BA978C14D57F80834`

我究竟做错了什么？

编辑：添加了十六进制标签，很明显数据必须是某种十六进制格式。因为 HashCalc 必须设置为“HexString”而不是“TextString”，它返回不同的结果。解决方案很可能包括改变我处理这些十六进制数字的方式。--> 原来是真的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:30:59.630

**免责声明**

**OP（Pimp Trizkit）是找到[正确解决方案](https://stackoverflow.com/a/15672400/814702)**的人。我只是使用他的解决方案（稍作改动）来展示结果并获得乐趣。版权所有）

此外，OP 提供的字节数组到十六进制字符串的转换算法比我的示例代码中的**要快得多。**请参阅[**他**](https://stackoverflow.com/a/15672400/814702)的实施解决方案。
（有关详细信息，请阅读下面的评论）

* * *

手动解决方案之一：（
重要**！这是我的第一个答案，但它仅用于从***文本字符串*中获取哈希，而不是从OP 要求的*十六进制字符串中获取哈希值。请参阅下面的***更新**）：

```
import java.security.MessageDigest;

public class TestHash {

    public static void main(String[] args) throws Exception {
        String password = "9a";

        MessageDigest md = MessageDigest.getInstance("SHA-1");
        md.update(password.getBytes());
        byte[] byteData = md.digest();
        // byte[] byteData = md.digest(password.getBytes());    // both updates and completes the hash computation

        // Method 1 of converting bytes to hex format
        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < byteData.length; i++) {
            sb.append(Integer.toString((byteData[i] & 0xFF) + 0x100, 16).substring(1));
        }

        System.out.println("1) Hex format : " + sb.toString());

        // Method 2 of converting bytes to hex format
        StringBuffer hexString = new StringBuffer();
        for (int i = 0; i < byteData.length; i++) {
            String hex = Integer.toHexString(0xff & byteData[i]);
            // NB! E.g.: Integer.toHexString(0x0C) will return "C", not "0C"            
            if (hex.length() == 1) {
                hexString.append('0');
            }
            hexString.append(hex);
        }
        System.out.println("2) Hex format : " + hexString.toString());      
    }
} 
```

输出：

```
1) Hex format : e8eef065fb7295044d65b305bab18a9a645d1abf
2) Hex format : e8eef065fb7295044d65b305bab18a9a645d1abf 
```

* * *

**更新**

根据[OP 找到的解决方案](https://stackoverflow.com/a/15672400/814702)，这里是代码，展示了从**十六进制字符串**而不是*文本字符串*获取 SHA-1 哈希。此外，它还提供了几种手动将字节数组转换为十六进制字符串的方法（只是为了好玩）。对不起，我有心情））

**有关重要时刻的解释，请参见`main`方法内部和不同方法内部的**评论。**`bytesToHexString()`**

 **```
import java.security.MessageDigest;
import java.math.BigInteger;
import javax.xml.bind.DatatypeConverter;

public class TestHash3 {

    public static void main(String[] args) throws Exception {
        String hexString = "1234";

        /*
         * NB!
         * Before passing hex string to DatatypeConverter.parseHexBinary(),
         * we need to check if the hex sting is even-length, 
         * otherwise DatatypeConverter.parseHexBinary() will throw a
         * java.lang.IllegalArgumentException: hexBinary needs to be even-length
         */
        hexString = (hexString.length() % 2 == 0) ? hexString : "0" + hexString;
        byte[] bytes = DatatypeConverter.parseHexBinary(hexString);

        MessageDigest md = MessageDigest.getInstance("SHA-1");
        byte[] byteData = md.digest(bytes);

        System.out.println("1) SHA-1 hash for the hex string " + hexString + ": " +
                            bytesToHexString1(byteData));
        System.out.println("2) SHA-1 hash for the hex string " + hexString + ": " +
                            bytesToHexString2(byteData));
        System.out.println("3) SHA-1 hash for the hex string " + hexString + ": " +
                            bytesToHexString3(byteData));
        System.out.println("4) SHA-1 hash for the hex string " + hexString + ": " +
                            bytesToHexString4(byteData));
    }

    public static String bytesToHexString1(byte[] bytes) {
        StringBuffer hexBuffer = new StringBuffer();
        for (int i = 0; i < bytes.length; i++) {
            hexBuffer.append(Integer.toString((bytes[i] & 0xFF) + 0x100, 16).substring(1));
        }

        return hexBuffer.toString();
    }

    public static String bytesToHexString2(byte[] bytes) {
        StringBuffer hexBuffer = new StringBuffer(bytes.length * 2);
        for (byte b: bytes) {
            int n = b & 0xFF;   // casting to integer to avoid problems with negative bytes
            if (n < 0x10) {
                hexBuffer.append("0");
            }
            hexBuffer.append(Integer.toHexString(n));
        }

        return hexBuffer.toString();
    }       

    public static String bytesToHexString3(byte[] bytes) {
        StringBuffer hexBuffer = new StringBuffer();
        for (int i = 0; i < bytes.length; i++) {
            String hexString = Integer.toHexString(0xff & bytes[i]);
            // NB! E.g.: Integer.toHexString(0x0C) will return "C", not "0C"            
            if (hexString.length() == 1) {
                hexBuffer.append('0');
            }
            hexBuffer.append(hexString);
        }

        return hexBuffer.toString();
    }

    public static String bytesToHexString4(byte[] bytes) {
        String hexString = new BigInteger(1, bytes).toString(16);

        /*
         * NB!
         * We need an even-length hex string to propely represent bytes in hexadecimal.
         * A hexadecimal representation of one byte consists of two hex digits.
         * If the value is less than 16 (dec), it is prepended with zero
         * E.g.:
         * 1  (byte)    ==> 01 (hex)    // pay attention to the prepended zero
         * 15 (byte)    ==> 0F (hex)
         * 16 (byte)    ==> 10 (hex)    // no need to prepend
         * 255(byte)    ==> FF (hex)
         *
         * BigInteger.toString(16) can return both even and odd-length hex strings.
         * E.g.:
         * byte[] bytes = {15, 16}  // two bytes
         * BigInteger(1, bytes).toString(16) will produce (NB!): f10
         * But we need (NB!): 0f10
         * So we must check if the resulting hex string is even-length,
         * and if not, prepend it with zero.
         */
        return ((hexString.length() % 2 == 0) ? hexString : "0" + hexString);
    }
} 
```

输出：

```
1) SHA-1 hash for the hex string 1234: ffa76d854a2969e7b9d83868d455512fce0fd74d
2) SHA-1 hash for the hex string 1234: ffa76d854a2969e7b9d83868d455512fce0fd74d
3) SHA-1 hash for the hex string 1234: ffa76d854a2969e7b9d83868d455512fce0fd74d
4) SHA-1 hash for the hex string 1234: ffa76d854a2969e7b9d83868d455512fce0fd74d 
```

顺便说一句，检查十六进制字符串内部是否为偶数长度，`byteToHexString4()`以便可以独立使用。

* * *

**更新 2**

用户[@kan](https://stackoverflow.com/users/438742/kan)带来了另一种将字节数组转换为十六进制字符串的方法，非常简单的一种方法，是继 OP 方法之后**第二快的方法。**

[DatatypeConverter.printHexBinary(byte[] val)](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/DatatypeConverter.html#printHexBinary(byte[]))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:53:43.060

我使用一个小型实用程序类：

```
public abstract class Sha1Util
{
    private static final Charset UTF8 = Charset.forName("UTF-8");

    public static MessageDigest newSha1Digest()
    {
        try
        {
            return MessageDigest.getInstance("SHA-1");
        } catch (NoSuchAlgorithmException e)
        {
            throw new Error(e);
        }
    }

    public static void update(final MessageDigest digest, final String s)
    {
        digest.update(s.getBytes(UTF8));
    }

    public static String sha1sum(final MessageDigest digest)
    {
        return String.format("%040x", new BigInteger(1, digest.digest()));
    }
} 
```

测试：

```
@Test
public void testSha1For9a()
{
    final MessageDigest md = SecUtil.newSha1Digest();
    SecUtil.update(md, "9a");// you could use several updates e.g. for salted passwords
    assertEquals("e8eef065fb7295044d65b305bab18a9a645d1abf", SecUtil.sha1sum(md));

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T00:54:56.620

我想到了！感谢[Louis Wasserman](https://stackoverflow.com/users/869736/louis-wasserman)在他对我的问题的评论中获得灵感。当我`000000000000009a`与 HashCalc 一起使用时，它返回的结果与我的函数相同！我意识到我在强制一定的数据长度（ a 的长度`long`）。事实证明它需要是任意长度（就像 HashCalc ......正如我所说，我需要复制 HashCalc 行为，不仅仅是`9a`我们使用的小测试用例，而是所有可能的数据）。甚至比`long`. 所以这些其他解决方案在这里不起作用。

我通过将原始十六进制字符串转换为 char[] 数组然后将它们成对连接在一起并在循环中转换为一个字节，将每个字符串存储在传递给摘要的 byte[] 中来解决这个问题。这行得通！然后我看到[Kan](https://stackoverflow.com/users/438742/kan)对他的回答的评论，并告诉我我只是在那里重新发明轮子。

所以这是最终的代码，它的大小与原始代码惊人的相同：

```
private String HexToSHA1(String ss) throws IllegalArgumentException {
    MessageDigest md = null;
    try { md = MessageDigest.getInstance("SHA-1"); }
    catch ( Exception e ) {}
    return byteArrayToHexString(md.digest(DatatypeConverter.parseHexBinary(ss)));
} 
```

这运行得很快，不确定是否有更快的方法。当然，这也取决于您的`byteArrayToHexString`功能有多快。这是我的：

```
private String byteArrayToHexString(byte[] data) {
    char[] toDigits =  {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'};
    int l = data.length;
    char[] out = new char[l << 1];
    for (int i = 0, j = 0; i < l; i++) {
        out[j++] = toDigits[(0xF0 & data[i]) >>> 4];
        out[j++] = toDigits[0x0F & data[i]];
    }
    return new String(out);
} 
```

而且它非常快。归功于某个地方的某人。我没写。

编辑：移动`char[] toDigits = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'};`到全局（或“在范围内”）使其更快。**

# java - JAVA：在管道上拆分并将值附加到字符串

> ID：15669551
> 
> 赞同：0
> 
> 时间：2013-03-27T21:09:35.103
> 
> 标签：java, string, replace, split

需要建议以更好的方式处理这个问题吗？

我的数据存储为 TAX|CHURCH, Texas, San Antonia, 250.00 | SCHOOL, NEVADA, Park-SCHOOL, 122.1 其中 TAX,CHURCH, SCHOOL 是我不感兴趣但它们的价值的代码。

```
if (input != null && !"NOTFOUND".equalsIgnoreCase(input)) {
    String[] list_str = input.split("\\|");
    int list_length = list_str.length;
    int i;

    for (String asset : list_str) {
        System.out.println(" asset : " + asset);
        if (asset.contains("TAX")) {
            /* get values for "TAX" */
            /* replace "TAX" from values */
        }

        if (asset.contains("CHURCH")) {
            input = input.replaceFirst("CHURCH", "");
        }

        if (asset.contains("SCHOOL")) {
            input = input.replaceAll("SCHOOL", "");
        }
    }
}

System.out.println(" input : " + input); /* final input */ 
```

**输入条件：**

我的输入字符串可能看起来像 =
"TAX|CHURCH, Texas, San Antonia, 250.00 | SCHOOL, NEVADA, Park-SCHOOL, 122.1"
**或**"CHURCH, Texas, San Antonia, 250.00 | SCHOOL, NEVADA, Park-SCHOOL, 122.1"
**或** "TAX|CHURCH, Texas, San Antonia, 250.00"
**或** "CHURCH, Texas, San Antonia, 250.00"

我得到的最终输入是“ **,Texas, San Antonia, 250.00 | , NEVADA, Park-, 122.1** ”，但我希望我的最终字符串是

输入=“**德克萨斯州，圣安东尼亚，250.00，内华达州，帕克学校，122.1** ”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:43:11.990

如果输入格式保证是您提到的格式之一，则以下代码将起作用：

```
public class TestClass {

public static void main(String[] args) {
    String input = "TAX|CHURCH, Texas, San Antonia, 250.00 | SCHOOL, NEVADA, Park-SCHOOL, 122.1";
    String[] parts = input.split(" \\| ");
    String result = parts[0].split("CHURCH, ")[1];

    if (parts.length > 1) {
        result += ", " + parts[1].substring(8); 
    }

    System.out.println(result);
}

} 
```

这会将整个表达式分成两部分，使用正则表达式检查字符串`|`，使用单独的正则表达式获取`CHURCH,`第一部分之外的所有内容，如果存在表达式的第二部分，则使用硬编码索引来获取您需要的子字符串，因为第二部分总是以`SCHOOL,`

我建议阅读在这种情况下非常有用的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:37:39.603

我只是添加这样的空格：

```
 String input = "CHURCH, Texas, San Antonia, 250.00 | SCHOOL, NEVADA, Park-SCHOOL, 122.1";
    String i = "";
    if (input != null && !"NOTFOUND".equalsIgnoreCase(input)) {

        String[] list_str = input.split(" \\| ");

        for (String asset : list_str) {
            System.out.println(asset);
            i = i + asset+" ";
            if (asset.contains("TAX")) {
                /* get values for "TAX" */
                /* replace "TAX" from values */
            }

            if (input.contains("CHURCH,")) {
                i =  i.replaceFirst("CHURCH,", "");
            }

            if (input.contains(" SCHOOL,")) {
                i =  i.replaceAll(" SCHOOL,", "");
            }

        }

    }
    System.out.println(" input : " + i); /* final input */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:45:03.647

试试这个

```
String input = "CHURCH, Texas, San Antonia, 250.00 | SCHOOL, NEVADA, Park-SCHOOL, 122.1";

if (input != null && !"NOTFOUND".equalsIgnoreCase(input)) {
    String[] list_str = input.split("\\|");

    for (String asset : list_str) {
        System.out.println(" asset : " + asset);
        if (asset.contains("TAX")) {
            /* get values for "TAX" */
        /* replace "TAX" from values */
        }

        if (asset.contains("CHURCH")) {
            input = input.replaceFirst("CHURCH,", "");
        }

        if (asset.contains("SCHOOL")) {
            input = input.replaceFirst("SCHOOL", "");
        }
    }
    input = input.replaceAll(" \\| ", "");
}

System.out.println(" input : " + input); /* final input */ 
```

# c# - ExecuteNonQuery 导致“连接属性尚未初始化”。

> ID：15669553
> 
> 赞同：2
> 
> 时间：2013-03-27T21:09:36.860
> 
> 标签：c#, sqlconnection

我正在使用 VS2010 和 SQL Server 2008 Management Studio

```
protected void btnsave_click(object sender, EventArgs e)
{
    SqlConnection myConnection = new SqlConnection("Data Source=SAAD-CH-HP;Initial Catalog=ovms;Integrated Security=True;");
    myConnection.Open();
    SqlCommand cmd = new SqlCommand(@"INSERT INTO request(reqtype, source,employeeID, vehID, destination) VALUES ('" 
    + official + "','" + source + "','" + emp_id + "','" + DropDownList1 + "','" + destination + "')");
    cmd.ExecuteNonQuery();
    myConnection.Close();
} 
```

当我运行程序时，会发生此异常

> ExecuteNonQuery：连接属性尚未初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:15:53.333

您尚未将命令与连接关联。

您需要`SqlCommand`使用连接句柄向构造函数添加另一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:17:04.633

请在下面更新您的代码。设置 SQLCommand 的连接属性。

```
protected void btnsave_click(object sender, EventArgs e)
        {
            SqlConnection myConnection = new SqlConnection("Data Source=SAAD-CH-HP;Initial Catalog=ovms;Integrated Security=True;");
            myConnection.Open();
            SqlCommand cmd = new SqlCommand(@"INSERT INTO request(reqtype, source,employeeID, vehID, destination) VALUES ('" + official + "','" + source + "','" + emp_id + "'," + DropDownList1.Text + ",'" + destination + "')");
            cmd.Connection = myConnection;
            cmd.ExecuteNonQuery();
            myConnection.Close();
        } 
```

或者在你 SQL 测试之后的构建中，添加 myConnection

```
SqlCommand cmd = new SqlCommand(@"INSERT INTO request(reqtype, source,employeeID, vehID, destination) VALUES ('" + official + "','" + source + "','" + emp_id + "'," + DropDownList1.Text + ",'" + destination + "')",myConnection); 
```

# c# - 如何从 xsd 创建 wsdl

> ID：15669554
> 
> 赞同：2
> 
> 时间：2013-03-27T21:09:39.510
> 
> 标签：c#, xsd, wsdl

我想使用 3 个 xsd 文件创建一个 wsdl。你是怎么做到的？

我在命令提示符下试过这个：

```
wsdl.exe /language:cs /parameters: c:\myService\Contract\HeaderData.xsd c:\myService\Contract\MyData.xsd c:\myService\Contract\Messages.xsd /out: MyWsdl.wsdl 
```

我错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T00:06:16.030

我相信这里有一个误解。您插图中的最有可能`wsdl.exe`指的是[Microsoft 的 tool](http://msdn.microsoft.com/en-us/library/7h3ystb6%28v=vs.100%29.aspx)，它被描述为：

*Web 服务描述语言工具**从 WSDL 契约文件、XSD 模式和 .discomap 发现文档**为 XML Web 服务和 XML Web 服务客户端**生成代码**。*

 **从您通过要求输出为 WSDL 文件所暗示的内容来看，我可以安全地假设您确实尝试从 XSD 文件开始创建 WSDL 文件。下面我试图解释为什么你不能那么容易地做到这一点，以及你有什么选择。

下图向您展示了 WSDL 1.1 规范背后的模型。

![WSDL 1.1 XSD 的 QTAssistant DataSet 视图](../Images/3391179f8975aea55658b69b18bdeb47.png)

您的 XSD 完全适合，并且**仅**在**types**下。它是 WSDL 术语，`types`表示您的类型系统，用于描述组成消息的部分，然后用于描述操作的输入/输出和故障，这些操作组织为绑定到应用程序/传输协议的端口（抽象接口），并最终生成（物理上） ) 可作为服务在一个或多个网络端点访问。

要从 XSD 生成 WSDL，您现在已经意识到您需要向可以自动为您生成 WSDL 的工具提供更多数据。例如，您想在 WSDL 中描述哪些操作？对于它们中的每一个，输入是什么，最有可能是输出，可能还有一个或多个故障？您将如何对它们进行分组（portType = interface）？您想使用什么绑定：HTTP、SOAP？什么版本的 SOAP？SOAP over：HTTP、MQ？SOAP 动作？多少个 WSDL 文件：1 个，或者 3 个？

一些工具可能会按照上述思路向您提出一系列问题（数据输入/向导），然后为您创建 WSDL。其他人，在 XSD 模式构造的实现中使用预定义的模式（例如，[IFX](http://www.ifxforum.org/home/)有某种方式来定义请求/响应元素），所以基于这些假设，一个专门的工具，如[QTAssistant](http://www.paschidev.com)（我与它相关联）会问你更少问题，同时仍然创建 WSDL。

我记得有一两个在线工具能够允许用户上传 XSD 文件，然后在提示您几个问题后创建 WSDL，但我似乎再也找不到它们了......有点[像这个](http://marin.jb.free.fr/wsdl/)...... .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:12:31.607

据我了解，您不会使用 xsd->wsdl，但我可能是错的。

[不过，从 XSD 文件生成 WSDL](https://stackoverflow.com/questions/920086/generating-a-wsdl-from-a-xsd-file?lq=1)可能会帮助您清除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:25:51.550

您不能以这种方式从 XSD 自动生成 WSDL。为了创建 WSDL，您需要从一个新的 WSDL 开始并导入这个 XSD。

XSD 定义了可用于服务的数据类型。有些 XSD 通常嵌入在 WSDL 中，有些是专门导入的。

另一种方法是使用 C# 中的 XSD 生成服务，然后从该服务中提取具体的 WSDL，但这不是首选，因为许多团队更喜欢[契约优先的 Web 服务](http://abrahamdybvig.blogspot.com/2012/08/contract-first-web-services.html)。**

# json - Restful JSON 到 Backbone Marionette CompositeView

> ID：15669555
> 
> 赞同：0
> 
> 时间：2013-03-27T21:09:45.033
> 
> 标签：json, parsing, rest, backbone.js, marionette

您好，我正在尝试在 Backbone Marionette 中创建类似于 Addy Osmani 的 Backbone Fundamentals 中的“Rest Backbone Example，Exercise 2”的东西。

见这里：http: [//github.com/addyosmani/backbone-fundamentals/tree/gh-pages/exercise-2](http://github.com/addyosmani/backbone-fundamentals/tree/gh-pages/exercise-2)

我了解其中的大部分内容，但是在将 json 解析/获取到骨干木偶复合视图时遇到了困难。

我试图做的一个简单的渲染示例是这样的：http://jsfiddle.net/w3r5B/（灵感来自 David Sulc 的教程，http: [//davidsulc.github.com/backbone.marionette-collection-example/](http://davidsulc.github.com/backbone.marionette-collection-example/)）

* JSfiddle 示例是 JSON 到 Marionette，但我试图直接从服务器发送数据。

我正在使用节点、快递、猫鼬、mongodb 顺便说一句。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:52:21.393

我想到了。我只需要在骨干集合之外获取集合。谢谢。

# regex - 正则表达式：匹配模式，只要它不在开头

> ID：15669557
> 
> 赞同：54
> 
> 时间：2013-03-27T21:09:50.993
> 
> 标签：regex, regex-negation

假设以下字符串：

```
aaa bbb ccc
bbb aaa ccc 
```

`aaa`只要它不在字符串的开头，我就想匹配。我试图通过做这样的事情来否定它：

```
[^^]aaa 
```

但我认为这是不对的。使用`preg_replace`.

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-27T21:11:40.133

您可以使用向后看来确保它不是在开头。`(?<!^)aaa`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2017-04-05T13:28:31.293

因为我是通过谷歌搜索来到这里的，并且**对不使用后视的解决方案感兴趣，所以**这是我的 2 美分。

该[`[^^]aaa`](https://regex101.com/r/71Q093/1)模式匹配字符串中*任何位置*`^`的字符，然后是 3 `a`s 。这是一个不被视为特殊字符的[*否定字符类。*](http://www.regular-expressions.info/charclass.html#negated)请注意，紧随其后的第一个是特殊的，因为它表示否定，第二个只是文字插入符号。*`[^...]`[](http://www.regular-expressions.info/charclass.html#negated)*`^``^``[`**

 **因此，a`^`不能在内部`[...]`表示字符串的开始。

一个解决方案是使用任何负面的环视，这两个将同样有效：

```
(?<!^)aaa 
```

和前瞻：

```
(?!^)aaa 
```

为什么前瞻也有效？[Lookarounds](http://www.regular-expressions.info/lookaround.html)是零宽度的断言，而锚点也是零宽度的——它们不消耗任何文本。从字面上看，`(?<!^)`检查当前位置左侧是否没有字符串开始位置，并`(?!^)`检查当前位置右侧是否没有字符串开始位置。正在检查相同的*位置，这就是为什么两者都运行良好的原因。*

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-27T21:20:06.503

如果您不想使用lookbehind，请使用此正则表达式：

```
/.(aaa)/ 
```

并使用`matched group # 1`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-23T08:36:37.927

这种情况是我第一次看到lookarounds跑赢大盘`\K`。有趣的。

通常捕获组和环视需要额外的步骤。但是由于这项任务的性质，正则表达式引擎可以更快地导航字符串以搜索`aaa`然后回溯以查找字符串锚点的开始。

我将添加几个`\K`模式进行比较。

我使用`s`模式修饰符以防前导字符可能是换行符（`.`通常不匹配）。我只是想我会添加这个考虑来抢先解决我可能会提出的边缘案例。

同样，这是一个很有启发性的场景，因为在我处理过的所有其他正则表达式案例中都`\K`击败了其他技术。

步数比较矩阵：

```
 | `~.\Kaaa~s` | `~.+?\Kaaa~s` | `(?<!^)aaa` | `(?!^)aaa` | `.(aaa)` |
--------------|-------------|---------------|-------------|------------|----------|
`aaa bbb ccc` |   12 steps  |    67 steps   |   8 steps   |  8 steps   | 16 steps |
--------------|-------------|---------------|-------------|------------|----------|
`bbb aaa ccc` |   15 steps  |    12 steps   |   6 steps   |  6 steps   | 12 steps | 
```

要点是：要了解您的模式的效率，请将它们发送到 regex101.com 并比较步数。

此外，如果您确切*知道*要查找的子字符串并且不需要正则表达式模式，那么您应该将其`strpos()`用作最佳实践（并且只需检查返回值是否为`> 0`）

...换句话说：

```
if (strpos($haystack, 'aaa')) {
    // 'aaa' is "truthy"
    // 'aaa' is found and not positioned at offset zero
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-27T21:20:10.167

这将有助于找到您正在寻找的内容：

`(?<!^)aaa`

使用示例：[http ://regexr.com?34ab2](http://regexr.com?34ab2)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-23T16:14:15.013

我来这里是为了寻找 re2 引擎的解决方案，它被 google 电子表格使用，它不支持环视。但是这里的答案给了我使用以下内容的想法。我不明白为什么我必须用捕获的组替换，但无论如何，它有效。

> aaa bbb ccc
> bbb aaa ccc

```
([^^])aaa 
```

替换为：

```
$1zzz 
```

结果：

> aaa bbb ccc
> bbb zzz ccc**

# dependency-injection - Angular 拍摄 DOM 快照

> ID：15669560
> 
> 赞同：0
> 
> 时间：2013-03-27T21:10:02.313
> 
> 标签：dependency-injection, angularjs, clone, angularjs-directive

我正在尝试记录使用 ng-repeat 填充的 div 的内容，有点像在某些时刻拍摄该 div 的快照，这样我就不必编写更多代码来保存数据。

链接：函数（范围，元素，属性）{ scope.game = 游戏；

```
 var $element = $(element),
            $clone = $element.children().clone();

            scope.$watch('someVariable',function(array){
                if (array[array.length - 1] === scope.id){
                    record($compile($clone)(scope));
                    console.log($compile($clone)(scope));
                }
            },true);

        } 
```

我一直在尝试这样的代码变体，但没有任何运气，我从来没有能够深度复制由 ng-repeat 生成的 div 的内容

关于如何在某个时间点复制 div 的确切动态生成内容的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:27:05.080

如果您有要在 ng-repeat 中呈现的数据，那么您已经在模型中拥有数据，您只需将该数据的快照保存到 Scope 中的其他对象。您应该在控制器中操作数据，而不是尝试直接访问 DOM，这在 angularjs 中是一个很大的禁忌。然后，如果您需要一个 Div 来重用，只需制作一个知道如何呈现您保存在模型中的那些快照的指令。

# php - 插入重复第一个插入，但不是任何其他插入

> ID：15669561
> 
> 赞同：0
> 
> 时间：2013-03-27T21:10:05.333
> 
> 标签：php, html, mysql, forms, codeigniter

我有一个看起来像这样的 PHP 脚本：

```
foreach($_POST as $key => $value) {
      $value = $this->input->post($key);
      $ingredientQTY = $this->input->post('ingredientQTY');
      $measurements = $this->input->post('measurements');
      $ingredientNAME = $this->input->post('ingredientNAME');
      $ingredientsROW[] = array($ingredientQTY, $measurements, $ingredientNAME);

      for ($i = 0, $count = count($ingredientQTY); $i < $count; $i++) {
            $rows[] = array(
                'ingredientamount'         => $ingredientQTY[$i],
                'ingredientType' =>  $measurements[$i],
                'ingredientname'        => $ingredientNAME[$i],
                'recipe_id' => $recipe_id,
                'order' => $i + 1,
                'user_id' => $user_id
            );
            $sql = "INSERT `ingredients` (`ingredientamount`,`ingredientType`,`ingredientname`, `recipe_id`, `order`, `user_id`) VALUES ";
            $coma = '';
            foreach ($rows as $oneRow) {
                $sql .= $coma."('".implode("','",$oneRow)."')";
                $coma = ', ';
            }
            $this->db->query($sql);
      }
      break;
    } 
```

它插入到一个名为成分的数据库中。我的表格如下所示：

![在此处输入图像描述](../Images/1cd58d0f0dddf3b0e0b45acadcfe5b6e.png)

这是我的 HTML：

```
<span>
  <input type="text" class='pluralizer small' name="ingredientQTY[]" placeholder='QTY'/>
  <select name='measurements[]'>
    <option value='' name='' checked='checked' data-single="--" data-other="--">--</option>
    <?foreach ($measurements as $m):?>
        <option value='<?=$m->measurement;?>' data-single="<?=$m->measurement;?>" data-other="<?=$m->measurementPlural;?>">
          </option>
    <?endforeach;?>
  </select>
  <input type="text" name="ingredientNAME[]" class="ingredient" placeholder='Ingredient'/>
  <a class='float-right delete-button deleteThis' style='margin:10px 2px;' href='#'><img src='<? echo base_url()."public/img/delete.png";?>' height='11' width='11' /></a>
</span> 
```

出于某种原因，当我插入时（工作正常，除了我要提到的问题）我插入的第一行在 mysql table 中重复`ingredients`，但所有后续行只插入一次。为什么它会这样做？

感谢大家的帮助！如果您需要更多详细信息，请询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:32:24.060

您需要移出`$this->db->query($sql);`for 循环并在 foreach 循环的每次迭代中重置`$rows`为空数组。

试试这个：

```
foreach($_POST as $key => $value) {
  $value = $this->input->post($key);
  $ingredientQTY = $this->input->post('ingredientQTY');
  $measurements = $this->input->post('measurements');
  $ingredientNAME = $this->input->post('ingredientNAME');
  $ingredientsROW[] = array($ingredientQTY, $measurements, $ingredientNAME);
  $rows = array();
  for ($i = 0, $count = count($ingredientQTY); $i < $count; $i++) {
        $rows[] = array(
            'ingredientamount'         => $ingredientQTY[$i],
            'ingredientType' =>  $measurements[$i],
            'ingredientname'        => $ingredientNAME[$i],
            'recipe_id' => $recipe_id,
            'order' => $i + 1,
            'user_id' => $user_id
        );
        $sql = "INSERT `ingredients` (`ingredientamount`,`ingredientType`,`ingredientname`, `recipe_id`, `order`, `user_id`) VALUES ";
        $coma = '';
        foreach ($rows as $oneRow) {
            $sql .= $coma."('".implode("','",$oneRow)."')";
            $coma = ', ';
        }
  }
  $this->db->query($sql);
  break;
} 
```

# c# - 如何使用 C# Excel“Microsoft.Office.Interop.Excel”来计算一列中非空单元格的数量

> ID：15669562
> 
> 赞同：0
> 
> 时间：2013-03-27T21:10:06.953
> 
> 标签：c#, excel, office-interop

所以我有这个电子表格，它有 Fname、Lname、Pnumber、Email、Cid。Cid 是唯一真正重要的，其余的在技术上是可选的。

因此，我知道您可以使用

WorksheetFunction.CountA（我不理解但也是可选的大约 30 个不同的变量）；

获得填充单元格的实际数量，并且是即时的。我不知道该怎么做。

这就是我要做的 viva 循环，但我知道 CountA() 函数可以在一行中完成。

```
int i = 1;
while (i <= 200)
{
    cell = (Microsoft.Office.Interop.Excel.Range)worksheet.Cells[i, 5];
    if (cell.Value2 > 0)
    {i++;}
    else
    {break;}
}
int totalCol = i; 
```

* * *

好的，这就是我现在所拥有的，谢谢大家。

```
var cell = (Microsoft.Office.Interop.Excel.Range)worksheet.Cells[1, 1];
    cell.Formula = "=CountA(E1:E200)";
                    double totalCells = (cell.Value2) -1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:13:55.957

我现在不在 IDE 中，但这应该可以解决问题：

```
 Dim cl As Microsoft.Office.Interop.Excel.Range
    cl.Formula = "=CountA(E1:E200)"
    myVal = cl.Value 
```

# wso2 - 如何使用 WSO2 GREG 中的 API 访问服务的属性？

> ID：15669564
> 
> 赞同：1
> 
> 时间：2013-03-27T21:10:11.270
> 
> 标签：wso2, soa

我可以像这样使用治理 API 添加和读取属性：

```
 registry = Util.initialize();
        governanceRegistry = Util.getGovernanceRegistry(registry);

        serviceManager = new ServiceManager(governanceRegistry);

        services = Arrays.asList(serviceManager.getAllServices());
        services.get(2).addAttribute("what", "isthis");
        serviceManager.updateService(services.get(2)); 
```

但是，当我使用 WSO2 Governance Registry Management Console 并打开刚刚添加参数/值“what”/“isthis”的服务时，我在*Properties*列表中看不到它。

如何使用 API 访问属性列表（不是属性）*？*我很难弄清楚这些是如何相互关联的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:18:56.070

您可以使用以下代码检索它。

```
List<Resource> paths = getServicePath(registry, "/_system/governance/trunk/services");

 for (Resource service : paths) {
                // we've got all the services here

               Properties props = service.getProperties();
                for (Object prop : props.keySet()) {
                    System.out.println(prop + " - " + props.get(prop));
                }
        } 
```

有关完整代码，请参阅此示例[博客文章](http://java.dzone.com/articles/access-wso2-registry)。

----稍后添加---

这更符合您的代码。

```
 Registry governanceRegistry = GovernanceUtils.getGovernanceUserRegistry(registry, "admin");
       ServiceManager serviceManager = new ServiceManager(governanceRegistry);
       Service[] services = serviceManager.getAllServices();

        for(int i =0 ; i<services.length ; i++){
            Service service = services[i];
            Resource resource = governanceRegistry.get(service.getPath());
            System.out.println(resource.getProperties());
        } 
```

# vb.net - 如何访问在另一个文件中声明的“typedef”之类的导入？

> ID：15669570
> 
> 赞同：1
> 
> 时间：2013-03-27T21:10:26.863
> 
> 标签：vb.net

我看到在 VB.net 中我可以使用 Imports 语句定义类似于 typedef 的东西：

```
Imports MyDict = System.Collections.Generic.Dictionary(Of String, System.Collections.Generic.Dictionary(Of String, System.Collections.Generic.Dictionary(Of String, String))) 
```

现在我想在我的项目的一些文件中使用这个 MyDict。假设上面的语句是在 MyForm.vb 文件中定义的，我应该在 AnotherForm.vb 文件中做什么来访问这个定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:13:15.810

`Imports`像这样只是该特定文件的别名-它们不会创建新的“类型”。如果您想以`MyDict`相同的方式使用，您需要将整行复制到您的其他文件中。

话虽如此，我会考虑使用三层嵌套字典结构来处理自定义类型。这是一个相当复杂的“字典”，拥有一个自定义类型可以让你以更干净、更安全的方式编写代码。

# opengl - 制作 cairo-gl 时出错

> ID：15669572
> 
> 赞同：0
> 
> 时间：2013-03-27T21:10:33.283
> 
> 标签：opengl, cairo, msys

我正在 Windows 上使用 MSYS 构建 Cairo 1.12.14。

使用 --enable-gl=yes 成功配置，但是，当我运行 make 时，我收到以下错误：

```
make  all-recursive
make[1]: Entering directory `/c/Users/Nathan/BuildCairo/cairo'
Making all in src
make[2]: Entering directory `/c/Users/Nathan/BuildCairo/cairo/src'
make  all-am
make[3]: Entering directory `/c/Users/Nathan/BuildCairo/cairo/src'
  CC     cairo-png.lo
  CC     cairo-gl-composite.lo
In file included from cairo-gl-composite.c:48:0:
cairo-gl-private.h:250:40: error: unknown type name 'GLsizeiptr'
cairo-gl-private.h:258:8: error: unknown type name 'GLchar'
cairo-gl-private.h:262:22: error: unknown type name 'GLchar'
cairo-gl-private.h:273:23: error: unknown type name 'GLchar'
cairo-gl-private.h:276:5: error: unknown type name 'GLchar'
cairo-gl-private.h:290:5: error: unknown type name 'GLchar'
cairo-gl-composite.c: In function '_cairo_gl_texture_set_extend':
cairo-gl-composite.c:193:18: error: 'GL_MIRRORED_REPEAT' undeclared (first use i
n this function)
cairo-gl-composite.c:193:18: note: each undeclared identifier is reported only o
nce for each function it appears in
cairo-gl-composite.c: In function '_cairo_gl_set_operator':
cairo-gl-composite.c:387:9: error: implicit declaration of function 'glBlendFunc
Separate' [-Werror=implicit-function-declaration]
cairo-gl-composite.c:387:9: warning: nested extern declaration of 'glBlendFuncSe
parate' [-Wnested-externs]
cairo-gl-composite.c: In function '_cairo_gl_composite_begin':
cairo-gl-composite.c:751:41: warning: ignoring return value of '_cairo_gl_set_op
erands_and_operator', declared with attribute warn_unused_result [-Wunused-resul
t]
cc1.exe: some warnings being treated as errors
make[3]: *** [cairo-gl-composite.lo] Error 1
make[3]: Leaving directory `/c/Users/Nathan/BuildCairo/cairo/src'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/c/Users/Nathan/BuildCairo/cairo/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/c/Users/Nathan/BuildCairo/cairo'
make: *** [all] Error 2 
```

有任何想法吗？配置有这样说：

```
--- The OpenGL surface backend feature is still under active development and
--- is included in this release only as a preview. It does NOT fully work yet
--- and incompatible changes may yet be made to OpenGL surface backend
--- specific API. 
```

这个版本可以解决这个问题吗？

# c# - 将值从网格写入xml c#

> ID：15669576
> 
> 赞同：0
> 
> 时间：2013-03-27T21:10:48.067
> 
> 标签：c#, xml, list, datagrid

我正在尝试将数据网格的单元格值输出到 XML 。网格的单元格是组合框单元格，其值为 ALLOCATED、AVAILABLE、OCCUPIED。我的 xml 输出需要采用如下形式：（其中 status 是从每个单元格的组合框中选择的值，Xloc 是行索引，YLoc 是该特定单元格的列索引）

```
<Cell XLoc="1" YLoc="1" Status="AVAILABLE"/>
<Cell XLoc="1" YLoc="2" Status="OCCUPIED"/>
<Cell XLoc="1" YLoc="3" Status="OCCUPIED"/> 
```

目前我正在创建一个列表并从网格中保存组合框选择的值，即 AVAILABLE、OCCUPIED....

```
private List<string> Grid_Values()
{
    List<string> CellValues = new List<string>();

    for (int i = 0; i < ToolMapGrid.Rows.Count; i++)
    {
        for (int j = 0; j < ToolMapGrid.ColumnCount; j++)
        {
            CellValues.Add(ToolMapGrid.Rows[i].Cells[j].Value.ToString());

        }
    }
    ...
} 
```

我以这种方式将上述值写入 XML：

```
List<string> GridValues = Grid_Values();
foreach (string item in GridValues)
{
    writer.WriteStartElement("Cell");
    writer.WriteAttributeString("Status",item);
    writer.WriteEndElement();
} 
```

我不明白如何将 Xloc 和 Yloc 值写入 XML 文件。我将组合值作为列表返回，但是如何使相同的方法也返回行和列索引以及如何将其写入 XML 文件。

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:22:09.553

创建一个名为 XmlInfo 的新类，它具有三个属性，如下所示：

```
class XmlInfo
{
    string value{get; set;}
    int column {get: set;}
    int row {get; set; }
} 
```

之后像这样更改您的代码：

```
private List<XmlInfo> Grid_Values()
{
    List<XmlInfo> CellValues = new List<XmlInfo>();

    for (int i = 0; i < ToolMapGrid.Rows.Count; i++)
    {
        for (int j = 0; j < ToolMapGrid.ColumnCount; j++)
        {
            XmlInfo nfo = new XmlInfo { 
                value = ToolMapGrid.Rows[i].Cells[j].Value.ToString(), 
                row = i,
                column = j}
            CellValues.Add(nfo);
       }
    }
} 
```

然后你可以使用这样的代码：

```
List<XmlInfo> GridValues = Grid_Values(); 
foreach (XmlInfo item in GridValues) 
{ 
     writer.WriteStartElement("Cell"); 
     writer.WriteAttributeString("Status", item.value); 
     writer.WriteAttributeString("XLoc", item.column); 
     writer.WriteAttributeString("YLoc", item.row); 
     writer.WriteEndElement(); 
} 
```

您可能想查看语法错误，因为我直接在编辑器中输入了它，我可能遗漏了一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:32:22.893

这就是我实施的方式并且它起作用了:)

```
 for (int i = 0; i < ToolMapGrid.Rows.Count; i++)
        {
            for (int j = 0; j < ToolMapGrid.ColumnCount; j++)
            {
                writer.WriteStartElement("Cell");
                writer.WriteAttributeString("XlOC", (i + 1).ToString());
                writer.WriteAttributeString("YLOC", (j + 1).ToString());
                writer.WriteAttributeString("Status", ToolMapGrid.Rows[i].Cells[j].Value.ToString());
                writer.WriteEndElement();
            }
        } 
```

# javascript - 使用嵌入式 PDF 检测 iframe 中的鼠标和键盘事件

> ID：15669584
> 
> 赞同：1
> 
> 时间：2013-03-27T21:11:12.257
> 
> 标签：javascript, jquery, pdf, iframe

我正在编写一些 Javascript 来检测用户在单个 HTML 页面上花费的时间。我不想计算空闲时间，所以我使用jQuery来检测鼠标和键盘事件，这样我就可以重置空闲计时器。尝试检测包含嵌入式 PDF 的 iframe 中的活动时遇到问题。您可以在此处查看未能触发的事件示例：

[http://jsfiddle.net/89s7q/41/](http://jsfiddle.net/89s7q/41/)

JS：

```
var frameSelected = false, i = 0;

var selected = function(e) {
  if (frameSelected !== true)
  {
    frameSelected = true;
    $("#console").prepend((++i) + " Selected<br/>");
  }
};

var deselected = function() {
  if (frameSelected === true)
  {
    frameSelected = false;
    $("#console").prepend((++i) + " Deselected<br/>");
  }
};

$("iframe").mouseout(deselected);
$("iframe").mouseover(selected); 
```

有没有办法让事件在 iframe 中触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:13:55.150

您可以在 iframe 顶部放置一个透明叠加层，这样用户仍会看到 iframe 内容，但您可以在叠加层上跟踪鼠标事件。

# regex - DOS findstr 查找引号之间的所有行

> ID：15669589
> 
> 赞同：0
> 
> 时间：2013-03-27T21:11:38.440
> 
> 标签：regex, dos, findstr

如何用findstr检索多行中“”之间的所有文本？例如我有：
Line1
Line2
Line3
"Line 4
Line 5
Line 6
"
Line 7
Line 8

我需要返回
第 4
行 第 5
行 第 6 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:22:07.493

使用您的样本数据......这是我可以得到的最好的结果，而无需过多的努力。

'file'txt' 包含您的数据...

```
@echo off
setlocal enabledelayedexpansion

set quote=

for /f "tokens=*" %%a in (file.txt) do (
  set str=%%a
  set str=!str:"=:!

  if not "!str!"=="!str::=!" (
    if defined quote (
      set quote=
      for %%b in (^"%%a) do set str=%%~b
      if not "!str!"=="" if not "!str: =!"=="" echo !str!
    ) else (
      set quote=1
      for %%b in (%%a^") do set str=%%~b
    )
  )

  if defined quote (
    if not "!str!"=="" if not "!str: =!"=="" echo !str!
  )
) 
```

# c++ - 概念和模板约束有什么区别？

> ID：15669592
> 
> 赞同：99
> 
> 时间：2013-03-27T21:11:46.253
> 
> 标签：c++, c++11, d, c++-concepts

我想知道 C++ 完整概念提案和模板约束之间的语义差异是什么（例如，出现在 Dlang 中的约束或[C++1y 的新概念精简提案](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3580.pdf)）。

什么是成熟的概念能够比模板约束不能做的？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-03-27T23:13:35.577

> **以下信息已过时。它需要根据最新的 Concepts Lite 草案进行更新。**

[约束提案的](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3580.pdf)第 3 节对此进行了合理深入的讨论。

[概念提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3351.pdf)被搁置了一段时间，希望约束（即概念精简版）可以在更短的时间范围内充实和实施，目前的目标是至少在 C++14 中有所作为。约束提议旨在平滑过渡到后来的概念定义。约束是概念提案的*一部分，*并且是其定义中的必要组成部分。

在[Design of Concept Libraries for C++](http://www.stroustrup.com/sle2011-concepts.pdf)中，Sutton 和 Stroustrup 考虑了以下关系：

> 概念 = 约束 + 公理

快速总结它们的含义：

1.  约束 - 一种类型的静态可评估属性的谓词。纯粹的语法要求。不是领域抽象。
2.  公理 - 假定为真的类型的语义要求。没有静态检查。
3.  概念 - 算法对其论点的一般抽象要求。根据约束和公理定义。

因此，如果您将公理（语义属性）添加到约束（句法属性），您就会得到概念。

* * *

# 概念-精简版

精简概念提案只为我们带来了第一部分，即约束，但这是迈向成熟概念的重要且必要的一步。

## 约束

约束都是关于**语法**的。它们为我们提供了一种在编译时静态识别类型属性的方法，以便我们可以根据其句法属性限制用作模板参数的类型。在当前的约束提议中，它们用命题演算的子集表示，使用逻辑连接词`&&`和`||`。

让我们看一下约束的作用：

```
template <typename Cont>
  requires Sortable<Cont>()
void sort(Cont& container); 
```

在这里，我们定义了一个名为`sort`. 新增内容是*requires 子句*。requires 子句对该函数的模板参数给出了一些约束。特别是，此约束表示类型`Cont`必须是`Sortable`类型。一个整洁的事情是它可以写​​成更简洁的形式：

```
template <Sortable Cont>
void sort(Cont& container); 
```

现在，如果您尝试将任何不考虑的内容传递`Sortable`给此函数，您将收到一个很好的错误，立即告诉您推导的类型`T`不是`Sortable`类型。如果您在 C++11 中执行此操作，您会从函数*内部*`sort`抛出一些对任何人都没有意义的可怕错误。

约束谓词与类型特征非常相似。它们采用一些模板参数类型并为您提供一些有关它的信息。约束试图回答以下关于类型的问题：

1.  这种类型是否有这样那样的运算符重载？
2.  这些类型可以用作此运算符的操作数吗？
3.  这种类型有这样那样的特征吗？
4.  这个常量表达式等于那个吗？（对于非类型模板参数）
5.  这种类型是否有一个名为 yada-yada 的函数返回该类型？
6.  这种类型是否满足所有的语法要求？

然而，约束并不意味着*取代*类型特征。相反，他们将携手合作。现在可以根据概念定义一些类型特征，而根据类型特征定义一些概念。

### 例子

所以关于约束的重要一点是，它们一点也不关心语义。约束的一些很好的例子是：

*   `Equality_comparable<T>`：检查该类型是否`==`具有相同类型的两个操作数。

*   `Equality_comparable<T,U>``==`: 检查给定类型的左右操作数是否存在

*   `Arithmetic<T>`: 检查类型是否为算术类型。

*   `Floating_point<T>`: 检查类型是否为浮点类型。

*   `Input_iterator<T>`：检查类型是否支持输入迭代器必须支持的语法操作。

*   `Same<T,U>`: 检查给定的类型是否相同。

[您可以使用GCC 的特殊概念精简版](http://concepts.axiomatics.org/~ans/)来尝试所有这些。

* * *

# Beyond Concepts-精简版

现在我们进入概念精简版提案之外的所有内容。这比未来本身更具未来感。*从现在开始，一切都可能发生很大变化。*

## 公理

公理都是关于**语义**的。它们指定关系、不变量、复杂性保证和其他类似的东西。让我们看一个例子。

虽然`Equality_comparable<T,U>`约束会告诉你有一个`operator==` 接受类型`T`和的`U`，但它不会告诉你这个操作*意味着*什么。为此，我们将有公理`Equivalence_relation`。这个公理说，当这两种类型的对象与`operator==`给与比较时`true`，这些对象是等价的。这似乎是多余的，但肯定不是。您可以轻松地定义一个`operator==`，而不是表现得像一个`operator<`. 你这样做是邪恶的，但你可以。

另一个例子是`Greater`公理。说两个类型的对象`T`可以与`>`和`<`运算符进行比较，这很好，但它们是什么*意思*？`Greater`公理说 iff`x`大于，`y`则`y`小于`x`。提议的规范这样的公理看起来像：

```
template<typename T>
axiom Greater(T x, T y) {
  (x>y) == (y<x);
} 
```

所以公理回答了以下类型的问题：

1.  这两个运营商之间有这种关系吗？
2.  某某类型的这个操作符是这个意思吗？
3.  对该类型的此操作是否具有这种复杂性？
4.  该运算符的这个结果是否暗示这是真的？

也就是说，它们完全关注类型的语义和对这些类型的操作。这些东西不能静态检查。如果需要对此进行检查，则类型必须以某种方式声明它遵守这些语义。

### 例子

以下是一些常见的公理示例：

*   `Equivalence_relation`：如果两个对象比较`==`，它们是等价的。

*   `Greater`: 无论何时`x > y`，那么`y < x`。

*   `Less_equal`: 无论何时`x <= y`，那么`!(y < x)`。

*   `Copy_equality`: for `x`and `y`of type `T`: if `x == y`，通过复制构造创建的相同类型的新对象，`T{x} == y`并且仍然`x == y`（即，它是非破坏性的）。

## 概念

现在概念很容易定义；它们只是**约束和公理的组合**。它们提供了对类型的语法和语义的抽象要求。

例如，考虑以下`Ordered`概念：

```
concept Ordered<Regular T> {
  requires constraint Less<T>;
  requires axiom Strict_total_order<less<T>, T>;
  requires axiom Greater<T>;
  requires axiom Less_equal<T>;
  requires axiom Greater_equal<T>;
} 
```

首先要注意，模板类型`T`要为`Ordered`，还必须满足`Regular`概念的要求。这个`Regular`概念是一个非常基本的要求，即类型是行为良好的——它可以被构造、销毁、复制和比较。

除了这些要求之外`Ordered`，`T`满足一个约束和四个公理的要求：

*   约束：一个`Ordered`类型必须有一个`operator<`. 这是静态检查的，因此它*必须*存在。
*   公理：对于`x`和`y`类型`T`：
    *   `x < y`给出严格的总排序。
    *   当`x`大于时`y`，`y`小于`x`，反之亦然。
    *   当`x`小于或等于 时`y`，`y`不小于`x`，反之亦然。
    *   当`x`大于或等于 时`y`，`y`不大于`x`，反之亦然。

像这样结合约束和公理可以为您提供概念。它们定义了用于算法的抽象类型的句法和语义要求。当前的算法必须假设所使用的类型将支持某些操作并表达某些语义。有了概念，我们将能够确保满足要求。

在[最新的概念设计](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3351.pdf)中，编译器只会检查模板参数是否满足概念的句法要求。公理没有被检查。由于公理表示不可静态评估（或通常无法完全检查）的语义，因此类型的作者必须明确声明其类型满足概念的所有要求。这在以前的设计中被称为概念图，但后来被删除了。

### 例子

以下是一些概念示例：

*   `Regular`类型是可构造的、可破坏的、可复制的和可比较的。

*   `Ordered`类型支持`operator<`，并具有严格的总排序和其他排序语义。

*   `Copyable`类型是可复制的，可破坏的，如果`x`等于`y`并被`x`复制，则该副本也将比较等于`y`。

*   `Iterator`类型必须具有关联的类型`value_type`、`reference`、`difference_type`，并且`iterator_category`它们本身必须满足某些概念。它们还必须支持`operator++`并且可以取消引用。

## 概念之路

约束是迈向 C++ 完整概念特性的第一步。它们是非常重要的一步，因为它们提供了类型的静态可执行要求，因此我们可以编写更清晰的模板函数和类。现在我们可以避免一些困难和丑陋的`std::enable_if`和它的元编程朋友。

但是，约束提案没有做的事情有很多：

1.  它不提供概念定义语言。

2.  约束不是概念图。用户不需要专门注释他们的类型以满足某些约束。它们使用简单的编译时语言功能进行静态检查。

3.  模板的实现不受其模板参数的约束。也就是说，如果您的函数模板对受约束类型的对象做了不应该做的任何事情，编译器就无法诊断。一个功能齐全的概念提案将能够做到这一点。

约束提案经过专门设计，因此可以在其之上引入完整的概念提案。运气好的话，这种过渡应该是相当顺利的。概念组正在寻求为 C++14 引入约束（或在不久之后的技术报告中），而完整的概念可能会在 C++17 前后的某个时候开始出现。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-28T23:03:34.167

另请参阅最近（3 月 12 日）Concepts telecon 会议纪要和讨论记录的第 2.3 节中的“concepts lite 的“精简”是什么”，这些记录于同一天发布在此处：http: [//isocpp.org/blog/2013/03 /new-paper-n3576-sg8-concepts-teleconference-minutes-2013-03-12-herb-sutter](http://isocpp.org/blog/2013/03/new-paper-n3576-sg8-concepts-teleconference-minutes-2013-03-12-herb-sutter)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T23:50:14.740

我的 2 美分：

1.  精简概念提案并不意味着对模板*实现*进行“类型检查” 。即，Concepts-lite 将确保（名义上）模板实例化站点的接口兼容性。从论文中引用：“concepts lite 是 C++ 的扩展，它允许使用谓词来约束模板参数”。就是这样。它并没有说将根据谓词（孤立地）检查模板主体。这可能意味着当您谈论概念精简版时，没有一流的*原型概念。*如果我没记错的话，archtypes 在概念繁重的提案中是提供不少或不多的类型来满足模板的*实现*。

2.  概念精简版使用美化的 constexpr 函数和编译器支持的一些语法技巧。查找规则没有变化。

3.  程序员不需要编写概念图。

4.  最后，再次引用“约束提议不直接解决语义的规范或使用；它仅针对检查语法。” 这意味着公理不在范围内（到目前为止）。

# php - 修改现有的 Fulfillment 意外返回 404 页面

> ID：15669594
> 
> 赞同：0
> 
> 时间：2013-03-27T21:11:59.697
> 
> 标签：php, api, shopify, fulfillment

我目前在github [https://github.com/sandeepshetty/shopify.php上使用sandeepshetty 的shopify.php 插件](https://github.com/sandeepshetty/shopify.php)

该插件似乎可以工作，并且逻辑相当简单。我已经使用“**创建一个新的 Fulfillment ”对其进行了测试，但是在使用“** **Modify an existing Fulfillment** ”API 调用时我收到一条错误消息。

我提交以下字符串并收到 404 错误

```
$orders = $shopify('PUT', "/admin/orders/160387514/fulfillments/791851111396.json", $fulfillment_put, $response_headers); 
```

**$fulfillment_put**转换为有效负载的位置

```
{ "fulfillment": { "tracking_number": "987654321", "id": 255858046 } } 
```

以下是 PUT 命令的详细转储。如上所示，我对路径使用了以下格式。我确实用 hidden 或 alt 替换了一些变量，仅供参考。

/admin/orders/#{order_id}/fulfillments/#{product_id}.json

```
* About to connect() to alt.myshopify.com port 443 (#0)
*   Trying 204.93.213.40... * connected
* Connected to alt.myshopify.com (204.93.213.40) port 443 (#0)
* successfully set certificate verify locations:
*   CAfile: /usr/share/curl/curl-ca-bundle.crt
  CApath: none
* SSL connection using RC4-SHA
* Server certificate:
* subject: /serialNumber=Hidden/C=CA/ST=Ontario/L=Ottawa/O=Jaded Pixel Technologies Inc./CN=*.myshopify.com
* start date: 2010-05-10 22:23:08 GMT
* expire date: 2015-08-12 19:17:14 GMT
* subjectAltName: alt.myshopify.com matched
* issuer: /C=US/O=Equifax/OU=Equifax Secure Certificate Authority
* SSL certificate verify ok.
* Server auth using Basic with user 'hidden for privacy'
> PUT /admin/orders/160387514/fulfillments/791851111396.json HTTP/1.1
Authorization: Basic hidden for privacy=
User-Agent: HAC
Host: alt.myshopify.com
Accept: */*
Content-Type: application/json; charset=utf-8
Content-Length: 62

< HTTP/1.1 404 Not Found
< Server: nginx
< Date: Thu, 21 Mar 2013 21:39:06 GMT
< Content-Type: application/json; charset=utf-8
< Transfer-Encoding: chunked
< Connection: keep-alive
< Vary: Accept-Encoding
< Status: 404 Not Found
< X-Shopify-Shop-Api-Call-Limit: 2/500
< HTTP_X_SHOPIFY_SHOP_API_CALL_LIMIT: 2/500
< X-Request-Id: 7ec529327cd022e973f22be4a9e86916
< X-UA-Compatible: IE=Edge,chrome=1
< Set-Cookie: _secure_session_id=hidden; path=/; secure; HttpOnly
< X-Runtime: 0.042757
< 
* Connection #0 to host alt.myshopify.com left intact
* Closing connection #0 
```

PS 我想指出我使用了以下 API 文档 [http://docs.shopify.com/api/fulfillment#create](http://docs.shopify.com/api/fulfillment#create)

它建议我使用 PUT /admin/orders/#{id}/fulfillments/#{id}.json

但是，#{id} 在那里被引用了两次，这表明我应该连续两次使用订单 ID，但是文档清楚地显示了 /admin/orders/450789469/fulfillments/255858046.json 的示例我想要更多说明关于实际的#{id} 代表什么以及如何使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T04:30:48.183

我认为您只是在 /admin/orders/#{id}/fulfillments/#{id}.json 中为第二个 ID 使用了错误的 ID。第一个是正确的，它是订单 ID，但第二个是履行 ID。在创建履行响应中返回履行 ID。

# alfresco - 将列添加到 Alfresco Pooled Tasks 表

> ID：15669595
> 
> 赞同：0
> 
> 时间：2013-03-27T21:12:09.823
> 
> 标签：alfresco

是否可以在 Alfresco 中更改 Pooled Tasks 表的列布局（添加/删除/重新排序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:51:25.700

是的，您应该修改 YUI 数据表。即，看一下文件 share/components/task-list.js。

有一个 columnDefs 变量，它显示列：

```
 columnDefinitions:
               [
                  { key: "id", sortable: false, formatter: this.bind(this.renderCellIcons), width: 40 },
                  { key: "title", sortable: false, formatter: this.bind(this.renderCellTaskInfo) },
                  { key: "name", sortable: false, formatter: this.bind(this.renderCellActions), width: 200 }
               ], 
```

现在，您可以在那里添加或删除列。

当然，YUI 从这个 URL 的数据源中获取数据：

```
var url = Alfresco.constants.PROXY_URI + "api/task-instances?authority=" + encodeURIComponent(Alfresco.constants.USERNAME) +
               "&properties=" + ["bpm_priority", "bpm_status", "bpm_dueDate", "bpm_description"].join(",") +
               "&exclude=" + this.options.hiddenTaskTypes.join(","); 
```

这意味着您还需要修改该 web 脚本或找到您需要的额外数据。有关更多信息，请查看从文件**“alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/workflow/workflow.lib.ftl”中获得的 JSON**

# scala - Scala 中的一切都是对象

> ID：15669596
> 
> 赞同：7
> 
> 时间：2013-03-27T21:12:11.723
> 
> 标签：scala

我是 Scala 的新手，听说过很多东西都是 Scala 中的对象。我不明白“一切都是对象”的优势是什么？如果一切都不是对象，有哪些事情是我不能做的？欢迎举例。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:30:54.333

让“一切”成为对象的好处是，抽象中断的情况要少得多。

例如，方法不是 Java 中的对象。所以如果我有两个字符串，我可以

```
String s1 = "one";
String s2 = "two";
static String caps(String s) { return s.toUpperCase(); }
caps(s1);  // Works
caps(s2);  // Also works 
```

因此，我们在制作大写字母的操作中抽象出了字符串标识。但是，如果我们想抽象出操作的身份——也就是说，我们对一个返回另一个字符串的字符串做*一些事情*，但我们想抽象出细节是什么？现在我们被困住了，因为方法不是 Java 中的对象。

在 Scala 中，方法可以转换为*函数*，即对象。例如：

```
def stringop(s: String, f: String => String) = if (s.length > 0) f(s) else s
stringop(s1, _.toUpperCase)
stringop(s2, _.toLowerCase) 
```

现在我们已经抽象出对非空字符串执行一些字符串转换的想法。

如果这是我们需要做的，我们可以列出操作等并传递它们。

还有其他不太重要的情况（对象与类、原始与非、值类等），但最重要的是打破方法和对象之间的区别，以便传递和抽象功能就像传递一样容易围绕和抽象数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T21:44:24.500

优点是您没有不同的运算符在您的语言中遵循不同的规则。例如，在 Java 中执行涉及对象的操作时，您使用`dot name`调用代码的技术（静态对象仍然使用该`dot name`技术，但有时会推断出 the`this object`或 the `static object`），而内置项（不是对象）使用不同的方法，即内置运算符操作。

```
Number one = Integer.valueOf(1);
Number two = Integer.valueOf(2);
Number three = one.plus(two); // if only such methods existed.

int one = 1;
int two = 2;
int three = one + two; 
```

主要区别在于该`dot name`技术受多态性、运算符重载、方法隐藏以及您可以使用 Java 对象做的所有好事情的影响。该`+`技术是预定义的并且完全不灵活。

`+`Scala通过基本上将其作为运算符处理，并定义此类运算符到*对象方法*`dot name`的强大的一对一映射来规避该方法的不灵活性。因此，在 Scala 中，*一切都是对象*意味着*一切*都是对象，因此操作

 ***```
 5 + 7 
```

导致创建了两个对象（一个 5 对象和一个 7 对象），使用参数 7 调用 5 个对象的 plus 方法（如果我的 scala 内存正确地为我服务）和一个“12”对象作为值返回`5 + 7`手术。

这一切都是对象在函数式编程环境中有很多好处，例如，代码块现在也是对象，使得可以将代码块（没有名称）作为参数来回传递，但仍然绑定到严格的类型检查（代码块只返回`Long`或子类`String`或其他）。

归根结底，它使某些解决方案非常容易实现，并且由于不需要处理“移入原语、操作、移出原语”编组代码，通常会减轻效率低下的情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T22:01:04.050

我想到的一个特定优势（因为您要求提供示例）是 Java 中的原始类型 ( `int, boolean ...`) ，Scala 中的对象是可以通过隐式转换添加功能的对象。例如，如果你想向`toRoman`int 添加一个方法，你可以编写一个隐式类，如：

```
implicit class RomanInt(i:Int){
  def toRoman = //some  algorithm to convert i to a Roman representation
} 
```

然后，您可以从任何`Int`文字中调用此方法，例如：

```
val romanFive = 5.toRoman  // V 
```

通过这种方式，您可以“拉皮条”基本类型以使其适应您的需求

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T22:06:27.270

除了其他人提出的观点外，我总是强调 Scala 中对所有值的统一处理在一定程度上是一种错觉。在大多数情况下，这是一个非常受欢迎的错觉。Scala 非常聪明地尽可能多地使用真正的 JVM 原语，并且只在必要时执行自动转换（通常称为装箱和拆箱）。

但是，如果自动装箱和拆箱应用的动态模式非常高，则可能会产生与之相关的不良成本（内存和 CPU）。这可以通过使用*specialization*来部分缓解，当特定类型参数是（程序员指定的）原始类型时，它会创建泛型类的特殊版本。这避免了装箱和拆箱，但代价是`.class`正在运行的应用程序中有更多文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-12T15:15:35.847

在 Scala 中，并非所有事物都是对象，尽管 Scala 中的对象多于 Java 中的对象。

对象的优点是它们是状态包，它们也有一些与之相关的行为。通过添加多态性，对象为您提供了更改隐式行为和状态的方法。诗歌说完了，让我们来看一些例子。

该`if`语句在 scala 或 java 中都不是对象。如果是这样，您可以对其进行子类化，在其位置注入另一个依赖项，并在您的代码使用该`if`语句时使用它来执行诸如记录到文件之类的事情。那不是很神奇吗？在某些情况下，它会帮助您调试东西，而在其他情况下，它会让您的头发变白，然后您才发现有人覆盖了`if`.

访问一个无对象、有陈述的世界：想象你最喜欢的 OOP 编程语言。想想它提供的标准库。那里有很多课，对吧？他们提供了定制的方法，对吧？他们接受其他对象的参数，他们创建其他对象。您可以自定义所有这些。你有多态性。现在想象一下，所有的标准库都只是关键字。您将无法自定义几乎一样多的内容，因为您无法覆盖关键字。你会被语言设计者决定实施的任何情况所困，并且你将无助于在那里定制任何东西。这样的语言存在，你很了解它们，它们是类似续集的语言。你几乎不能在那里创建函数，但是为了自定义`SELECT`声明，必须出现该语言的新版本，其中包含最需要的功能。这将是一个极端的世界，您只能通过向语言设计人员询问新功能来进行编程（您可能无法获得，因为其他更重要的人需要一些与您想要的不兼容的功能）

总之，并非所有东西都是 scala 中的对象：类、表达式、关键字和包肯定不是。然而，更多的东西是，比如函数。恕我直言，一个很好的经验法则是更多的对象等于更多的灵活性

例如，Python 中的 PS，更多的东西是对象（比如类本身，类似的概念`packages`（即 python 模块和包）。你会看到那里，黑魔法更容易做到，这带来了好和不良后果。***

# jquery - jQuery 属性问题 - 尝试检索 div id 和类信息

> ID：15669597
> 
> 赞同：0
> 
> 时间：2013-03-27T21:12:12.060
> 
> 标签：jquery, attributes

这可能很简单，但对 jQuery 来说很新。

我正在尝试检索 div id 和 div 类的最后一部分以使它们显示：无。

这是我目前拥有的一个例子：

```
<div id="content-right">
<div class="item107 item-image">..content here..</div>
</div>

<script>
$("document").ready(function()
{
$("[id="#content-right"][class$=item-image]").css({"display": "none"});  

}); </script> 
```

* * *

("[id="#content-right"][class$=item-image]") ...这是我无法弄清楚的代码部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:13:14.607

你可以这样做：

```
$("#content-right .item-image").css({"display": "none"}); 
```

或者：

```
$("#content-right .item-image").hide(); 
```

这隐藏了带有`item-image`类的 div。

如果你想隐藏两者，你可以隐藏它的父母：

```
$('#content-right').hide(); 
```

如果要同时选择两者，可以执行以下操作：

```
$("#content-right, .item-image"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:13:58.383

要在示例中隐藏 div，请使用：

```
$("#content-right .item-image").hide(); 
```

这将选择任何具有类的元素，该类`item-image`是具有 id 的元素的后代`content-right`，并将显示属性更改为无。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:14:10.853

您的选择器对于您要实现的目标过于复杂，而且您似乎错误地使用了引号，您可以将代码减少为：

```
$("#content-right .item-image").hide(); 
```

该[`hide()`](http://api.jquery.com/hide/)功能与 具有相同的效果`css({'display':'none'})`。

查看[这篇文章](http://sunali.com/2010/02/03/introduction-to-jquery-and-jquery-selectors/)，**了解所有不同类型的选择器**。

# c# - 倍增双倍。答案不断四舍五入

> ID：15669598
> 
> 赞同：-2
> 
> 时间：2013-03-27T21:12:12.977
> 
> 标签：c#, asp.net

我正在尝试将一个双倍价格变量与一个 int 项目数量变量相乘。

目前，我在显示计算结果的正确格式方面存在问题。例如：

我的数据库中有两个项目，一个的价格值为 2.99，另一个为 4.00。每个项目数量为 1。这使总数达到 6.99。我希望显示它，但我的整数值四舍五入为 7。

这是代码：

```
 object foundQty = ds.Tables[0].Rows[i]["coffeeQty"];
 int Qty = Convert.ToInt32(foundQty);

 double price = setPriceList(IDOfCart);

 combinedPrice = price * Qty;

 holdingPrice += Convert.ToInt32(combinedPrice); 
```

谁能告诉我为什么没有显示这个双精度值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:20:03.277

根据定义，整数始终是整数。

如果要显示双精度值然后显示双精度值，请不要转换为然后显示整数；-)

# jquery - 如果为空，则设置默认值

> ID：15669601
> 
> 赞同：6
> 
> 时间：2013-03-27T21:12:15.253
> 
> 标签：jquery

我正在根据输入更改元素的文本：

```
$("input#txtName").keyup(function(){
      $(".website-info h3 strong").text($(this).val());
    });
$("input#txtUrl").keyup(function(){
      $(".website-info h3 small").text($(this).val());
    }); 
```

它有效，但我想在文本为空或用户没有输入任何内容以防止空白时立即显示默认值。我尝试了这个`if... is.(:empty)`条件，但它没有帮助，因为`.text`似乎没有设置默认值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T21:15:40.703

执行此操作的一种简洁且非常标准的方法是使用`||`运算符。

```
$("input#txtName").keyup(function(){
      $(".website-info h3 strong").text($(this).val() || "Default text");
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:28:36.550

考虑使用`placeholder`输入元素的 HTML 属性。在 HTML 中设置属性

```
<input type="text" id="txtName" placeholder="default text here" /> 
```

或在页面加载后使用 jQuery

```
$("input#txtName").attr("placeholder", "default text here"); 
```

这是元素上[的 MDN 页面](https://developer.mozilla.org/en-US/docs/HTML/Element/input)`<input>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:17:47.613

将您的两个文本分配更改为以下变体：

`$(".website-info h3 small").text(($(this).val().length) ? $(this).val() : "Your default value here");`

请注意，如果用户输入空格，这不会抛出默认值 - 如果您想这样做，您需要相应地编辑三元运算符。

# java - 在android中具有单顶模式的意图附加功能

> ID：15669604
> 
> 赞同：2
> 
> 时间：2013-03-27T21:12:19.840
> 
> 标签：java, android, android-intent

[Android：new Intent() 使用 android:launchMode="singleTop" 启动新实例](https://stackoverflow.com/questions/2424488/android-new-intent-starts-new-instance-with-androidlaunchmode-singletop)

根据上面的链接，我得到了单顶工作，但我很难将“额外”放在意图中，然后对我的原始活动执行功能..这可能吗？

```
Intent I= new Intent(context, away.class);
I.putExtra("number",  number);
I.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |       Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

这个片段来自我的广播接收器，它引用了我的主类..在我的主类中，我的代码就像这样..

```
Intent I = getIntent();
int number = I.getIntExtra("number", -1); 
```

所以我的问题如下......我怎样才能让我的主要活动来评估我发回的号码，然后在我的接收器类触发它时触发一个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:17:19.570

你必须重写 onNewIntent 并在那里获得额外的东西。

```
You have to override onNewIntent and get the extra there.  

@Override
protected void onNewIntent(Intent intent)
{
    super.onNewIntent(intent);

    int number = intent.getIntExtra("number", -1);
} 
```

在您的广播接收器中

```
Intent I = new Intent(context, away.class);
I.putExtra("number",  number);
Log.d("here", "number = " + number);
I.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(I); 
```

# rows - 与带宽和延迟相关的 Amazon SDB 列 VS 行

> ID：15669606
> 
> 赞同：2
> 
> 时间：2013-03-27T21:12:24.303
> 
> 标签：rows, amazon-simpledb, overhead

我们正在创建一个包含 3 个字段的 SDB 域，本质上创建了一个类似于“多对多”关系表的结构。这些字段是：Employe_ID、Project_ID、职位（快速示例）。

在与 Amazon Simple DB 交互的流量、延迟和成本方面，使用以下任一方法的优缺点是什么：

1) 为导致大量行的 3 个值组合中的每一个创建一行：

*   1,1,铅
*   1,2,开发
*   1,3,经理
*   1,4,测试仪
*   2,1,测试仪
*   ETC...

2）为每个员工创建 1 ROW，并使用某种分隔键值字符串：

*   1、1~Lead；2~Dev；3~Manager；4~测试仪
*   2、1~测试仪
*   ETC...

我知道 1024 限制，但是在特定域中我们不会超过这个限制。主要关心的是不会有很多Project_id~Position的key/value组合，所以方法1)和2)有区别，哪一种更适合节省同步时间和带宽传输成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T17:58:09.627

这两种方法显然都行得通，但它们的区别主要在于可维护性。

使用方法 2 可能会节省一些带宽（减少重复信息），但我真的怀疑亚马逊节省的成本是否可以抵消实施/扩展/维护此结构所花费的精力/工时。

另外，如果您扩展此系统，您将面临实际达到 1024 限制的真正危险，这（尽管不太可能）是您不应该为边际节省而承担的风险。

# windows-phone-7 - 在模拟器上工作，在设备上崩溃（wp 8）

> ID：15669613
> 
> 赞同：0
> 
> 时间：2013-03-27T21:12:48.453
> 
> 标签：windows-phone-7, windows-phone-8, isolatedstorage

这是声明`save_g`

```
public static IsolatedStorageSettings save_g = IsolatedStorageSettings.ApplicationSettings; 
```

这里 cons.term[7] 是字符串类型

```
save_g[cons.term[7]] = (double)save_g[cons.term[7]] + 1; 
```

上面的语句在模拟器上执行没有问题。但是当我在设备（Lumia 820）上运行它时会出错。

```
A first chance exception of type 'System.InvalidCastException' occurred in PhoneApp2.DLL

An exception of type 'System.InvalidCastException' occurred in PhoneApp2.DLL but was not handled in user code 
```

而且我不知道出了什么问题。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:36:06.630

无效的强制转换异常意味着它`save_g[cons.term[7]]`不是`double`. 该值很可能为空。您应该检查`save_g[cons.term[7]]`第一次分配值的代码部分。

如果它是您分配此值的唯一位置，您应该添加代码来处理这种情况：

```
double value = save_g[cons.term[7]] == null ? 0 : save_g[cons.term[7]];
save_g[cons.term[7]] = value + 1; 
```

# jquery - 使用 jquery，需要隐藏一个 div 并同时为另一个 div 的宽度设置动画

> ID：15669614
> 
> 赞同：1
> 
> 时间：2013-03-27T21:12:51.047
> 
> 标签：jquery, jquery-ui

我正在创建一个嵌入谷歌地图和右侧图例的页面。单击“隐藏图例”按钮时，我想隐藏图例 div 并将地图 div 的宽度从 720 像素增加以填充页面宽度（1000 像素）。

然后我还隐藏了“隐藏图例”按钮并显示“显示图例”按钮。

它基本上可以工作，但地图 div 闪烁并且动画不流畅。它以 720 像素开始；图例平滑地滑过，然后 mp div 以 1000 像素填充页面。

这让我发疯……我已经搜索过，但找不到我的确切情况。在此先感谢您的任何指点。

这是我的jQuery：

```
<script>
$(document).ready(function() {

$(".hideLegend").click(function () {
   $(this).hide(); 
   $("#legend").hide("slide", { direction: "left" }, 500);
   $("#map").animate({ width: "1000"}, 500); 
   $(".showLegend").show(); 

});

  });
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:18:31.630

`hide`并`animate`在动画完成时执行一个函数。使用它来开始下一个动画，然后在完成后，执行`show`. 就像是：

```
$("#legend").hide("slide", { direction: "left" }, 500, function () {
    $("#map").animate({ width: "1000"}, 500, function () {
        $(".showLegend").show();
    });
}); 
```

**编辑：从评论中，结合你的小提琴，这会产生预期的结果**：

```
$(".hideLegend").click(function () {
    $(this).hide(); 
    $("#legend").animate({ width: "0"}, 500);
    $("#map").animate({ width: "1000"}, 500, function () {
       $(".showLegend").show();
       $("#tabs").hide();
    });
});

$(".showLegend").click(function () {
    $(this).hide(); 
    $("#tabs").show();
    $("#legend").animate({ width: "280" }, 500);
    $("#map").animate({ width: "720"}, 500, function () {
        $(".hideLegend").show();
    });
}); 
```

**演示：http: [//jsfiddle.net/2Mpdc/3/](http://jsfiddle.net/2Mpdc/3/)**

# django - 有条件地覆盖模型 Django 管理员成功保存消息

> ID：15669615
> 
> 赞同：1
> 
> 时间：2013-03-27T21:12:53.620
> 
> 标签：django, django-models, django-admin

我正在覆盖 Django 模型上的保存方法。在某些情况下，我不保存模型。在这些情况下，我似乎无法弄清楚如何有条件地覆盖“引文 1111 已成功添加”。返回到管理列表界面（与输入表单界面相反）后显示的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:46:06.273

我认为您不能仅通过覆盖`save`Django 的管理界面使用模型表单和消息框架来覆盖它。

我认为会发生这样的事情，它比这更复杂，但或多或​​少：

### 模型.py

```
class MyModel(models.Model):
    foo = models.CharField(...)
    bar = models.CharField(...)

    def save(self, *args, **kwargs):
        if self.foo == self.bar:  # We only save if foo == bar
            super(MyModel, self).save(*args, **kwargs) 
```

### forms.py（Django 管理员使用模型表单，所以这是一个示例）

```
class MyModelForm(ModelForm):
    class Meta:
        model = MyModel 
```

### 视图.py

```
def save(request):
    if request.method == 'POST':
        form = MyModelForm(request.POST)
        if form.is_valid():
            form.save()
            messages.success(request, 'MyModel was saved!.') 
```

现在无论 form.save() 实际做了什么，消息仍然被发送出去，我们无法知道你是否在覆盖的保存方法中保存，这可能是 django 管理系统中发生的事情。

另一种方法是为管理员创建一个自定义模型表单以用于此模型并定义自定义验证方法，因此除非 foo == bar，否则该表单不会验证。或者您可以覆盖表单上的保存方法，您需要查看 django 管理代码，这可能是可能的，只是有点棘手：p

# css - Boostrap 流体，两种颜色背景渐变

> ID：15669616
> 
> 赞同：0
> 
> 时间：2013-03-27T21:12:58.893
> 
> 标签：css, twitter-bootstrap, background-color

我正在尝试使用 twitter bootstrap 为我的网站做一个垂直的两色调背景（使用 css 渐变），这样渐变在连续流体中的跨度之间的排水沟中心结束。我已经有了渐变代码（如下所示），并试图弄清楚要为 x 放置什么，以便背景改变我想要的位置。这是一个视觉示例：

<---------颜色 1----------><--------颜色 2------ ------------>

<-----span 4--------><-gutter-><------------span 8 ------------- --->

下面的 x 应该是什么？

```
 background: #333333; /* Old browsers */
  background: -moz-linear-gradient(left, #333333 0%, #333333 x, #ffffff x, #ffffff 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, right top, color-stop(0%,#333333), color-stop(x,#333333), color-stop(x,#ffffff), color-stop(100%,#ffffff)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(left, #333333 0%,#333333 x,#ffffff x,#ffffff 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(left, #333333 0%,#333333 x,#ffffff x,#ffffff 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(left, #333333 0%,#333333 x,#ffffff x,#ffffff 100%); /* IE10+ */
  background: linear-gradient(to right, #333333 0%,#333333 x,#ffffff x,#ffffff 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#333333', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */ 
```

同样相关：我没有对大型显示器和移动设备使用响应式引导程序，这会改变排水沟大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:38:44.330

原来有一个简单的解决方案。对于我来说，使用 span4 和 span8，将“x”设置为 33.333% (1/3) 就可以了。流体助推器的美妙之处在于它保持了整个页面的跨度比率。

如果您认为这不起作用，请发表评论。

# double - 无法找到主类：XXXXXX .程序将退出

> ID：15669618
> 
> 赞同：0
> 
> 时间：2013-03-27T21:13:11.663
> 
> 标签：double, minecraft

MM 嘿 ^_^ 我在[此处](http://words-from-scarystuff.blogspot.com/2011/09/minecraft-and-mods.html)关注此帖子，打开 .bat 文件时出现错误消息：无法删除主类：net.minecraft.LauncherFrame。程序将退出。有什么建议么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:16:03.537

您可能应该粘贴您使用的实际 .bat 文件，但我相信该方法不再适用于启动 minecraft 启动器可执行文件。

# ios - Core Plot Scroll Horizo ntally Scroll Show 显示正象限

> ID：15669620
> 
> 赞同：2
> 
> 时间：2013-03-27T21:13:15.643
> 
> 标签：ios, core-plot

我在 iOS 应用程序中使用核心图，并让它显示一个仅水平滚动的条形图。这是为了允许比垂直屏幕更适合的数据集（我不打算使用横向屏幕）。

我有那一点工作得很好。不过，我想

1) 防止用户滚动超过零值进入表格未使用的负象限。

2) 当用户到达图表中的最后一个栏时停止水平滚动。

我确实在此线程中查询了第三张海报：[Here。](https://stackoverflow.com/questions/1892544/allow-horizontal-scrolling-only-in-the-core-plot-barchart)但没有得到回应。他提出了一种不可能奏效的方法（或者至少在我拥有的版本中不行）。他正在使用这行代码分配只读变量 CPTPlotRange 范围类（他将其称为 CPPlotRange，因为我猜他使用的是早期版本）。

```
newRange.location = CPDecimalFromFloat(0.0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-16T20:18:06.680

我知道这有点晚了，但对于任何寻找简单快速答案的人（就像我来找的）

把这个放进去

```
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;

CPTPlotRange *globalYRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0) length:CPTDecimalFromDouble(HOW HIGH YOU WANT YOUR GRAPH)];
plotSpace.globalYRange = globalYRange;
CPTPlotRange *globalxRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble() length:CPTDecimalFromDouble(HOW WIDE YOU WANT YOUR GRAPH)];
plotSpace.globalXRange = globalxRange; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:06:25.007

将`globalXRange`绘图空间的设置为`location`= 零和`range`= 最后一个条的位置（加上条宽度的偏移量）的范围。

# javascript - 如何处理对象文字中的错误处理？

> ID：15669622
> 
> 赞同：2
> 
> 时间：2013-03-27T21:13:24.610
> 
> 标签：javascript

如何在对象文字中进行一些错误处理？
至少我希望它像这样工作：

```
window.App={
  Variables:{
    "views_data":
      try{
        json_parse(Drupal.settings.royal)
      }
      catch(e){
        JSON.parse(Drupal.settings.royal)
      }        
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:17:57.270

您可以使用立即调用的函数：

```
window.App = {
    Variables: {
        views_data: (function(){
            var data;
            try{
                data = json_parse(Drupal.settings.royal)
            }
            catch(e){
                data = {}
            }
            return data;
        }())
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:19:51.747

作为`try{...}catch(err){...}`控制结构，您不能将其添加到 javascript 中的对象文字中。根据您想要存储的位置`Drupal.settings.royal`，您可以这样编写对象：

```
window.App = {
    Variables: {
        views_data: null    // this is optional
    }
}; 
```

现在，当您的对象准备就绪时，您可以尝试将解析后的 json 添加到其中：

```
try{
    window.App.Variables.views_data = json_parse(Drupal.settings.royal);
}catch(err){
    window.App.Variables.views_data = JSON.parse(Drupal.settings.royal);
} 
```

干净整洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:20:54.170

1) 使用立即调用函数表达式

```
views_data : (function () {
    var result = "",
        json = Drupal.settings.royal;

    try { result = json_parse(json); }
    catch (e) { result = JSON.parse(json); }
    return result;
}()) 
```

2) 除非您的 有什么特别之处`json_parse`，否则我实际上建议您以相反的方式执行此操作 -`JSON.parse`改为使用浏览器的 . 本机实现将比您自己编写的任何东西都要快。`JSON`如果不存在，则回退到手写解决方案。当然，前提是您在实现中没有做任何特别的事情。

# google-maps-api-3 - 在单独的 HTTP 请求中加载谷歌地图库

> ID：15669632
> 
> 赞同：3
> 
> 时间：2013-03-27T21:14:02.160
> 
> 标签：google-maps-api-3

我想知道是否有办法在单独的 HTTP 请求中加载谷歌地图库？我的兴趣是知道是否可以这样做，因为我找不到任何相关的文档...

例如：

```
<script type="text/javascript" scr="//maps.google.com/maps/api/js?language=en&sensor=false"></script>
<!--
    First map which does not need extra google map libraries
-->
<script type="text/javascript" scr="library_url"></script>
<!--
    Second map which needs extra google map libraries
--> 
```

谢谢

# c# - DateTime.ToString(format) 不同电脑上的意外行为

> ID：15669643
> 
> 赞同：3
> 
> 时间：2013-03-27T21:14:35.743
> 
> 标签：c#, sql-server, .net-4.0

那里。我正在开发一个简单的接口来从 SQLServer 获取数据并使用该函数`DateTime.ToString(String)`

实际代码是`DP.Value.ToString("yyyy-MM-dd HH:mm:00")`，其中 DP 是 DateTimePicker 控件。

当我在自己的笔记本电脑上测试时，一切正常。但是当我将编译后的代码移到另一台电脑上时，结果就不同了。例如：它从`2013-03-27 22:02`to传递`2013-03-27 22.02`，替换 '.' 用'：'在一小时内。但这足以让我的应用程序崩溃，因为 SQLServer 会生成无效日期。

罪魁祸首可能是什么？两台电脑都安装了 SQLServer 2008 R2（和相同的排序规则）和 .NET Framework 4.0 客户端配置文件。我看到的一个区别是我的 SQLServer 有英语（美国）语言属性，而另一个有意大利语设置，但我应该用格式字符串克服它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:16:20.040

您没有指定文化，因此正在使用当前文化。在另一个系统上，“。” 用于时间说明符，而不是“：”。

但是，您可以[明确指定文化](http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx)，以避免这种情况：

```
var str = DP.Value.ToString("yyyy-MM-dd HH:mm:00", CultureInfo.InvariantCulture); 
```

话虽如此，使用参数化查询并将值保留为 a`DateTime`比将日期作为字符串传递更好的习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:15:51.917

> 罪魁祸首可能是什么？

用户的文化设置。

一些文化使用`.`, 一些`:`作为时间分隔符。

解决方案？

使用`CultureInfo.InvariantCulture`（或选定的`CultureInfo`）来确保一致性：

```
DP.Value.ToString("yyyy-MM-dd HH:mm:00", CultureInfo.InvariantCulture) 
```

# php - 在 PHP 中编程 OOP 时出现意外错误？

> ID：15669646
> 
> 赞同：0
> 
> 时间：2013-03-27T21:14:46.297
> 
> 标签：php, session, fatal-error

出于某种原因，我收到此错误：

> 致命错误：第 13 行 C:\xampp\htdocs\school\blom\inlog dinkie\engine\class.php 中允许的内存大小为 134217728 字节已用尽（试图分配 36 字节）

在这段代码上：

```
<?php

class gebruiker extends start{

    private $_login_form;
    public $log_in;
    public $logged_in;

    function __construct(){

        $this->logged_in = false;

        $this->_login_form = new login_form();

        parent::html($this->_login_form);

    }

    function log_in(){

        $html = $this->_login_form;

        if($this->log_in){

            $go = true;
            if(!$_REQUEST['naam']){
                $this->_login_form->error_naam = 'vul je naam in!';
                $go = false;
            }
            else{
                $this->_login_form->naam = $_REQUEST['naam'];
            }

            if(!$_REQUEST['pass']){
                $this->_login_form->error_pass = 'vul je pass in!';
                $go = false;
            }
            else{
                $this->_login_form->pass = $_REQUEST['pass'];
            }
            //go log in

            $html = $dom->saveHTML();
        }

        parent::html($this->_login_form->form());
    }

}

class login_form extends gebruiker{

    protected $html;
    protected $error_naam = '&nbsp;&nbsp;&nbsp;';
    protected $error_pass = '&nbsp;&nbsp;&nbsp;';
    protected $naam = ''; 
    protected $pass = '';

    function form(){
        $this->html = ' <center>
                            <div style="border:1px dotted rgb(169, 169, 169); width:572px; height:196px; background-color:rgba(40, 152, 250, 0.670588);margin-top:200px;">
                                <h4 id="title">Inloggen</h4>
                                <br>
                                <form action="./?login" method="post">
                                <table>
                                    <tr>
                                        <td id="error_naam">'.$error_naam.'</td>
                                        <td id="error_pass">'.$error_pass.'</td>
                                    </tr>
                                    <tr>
                                        <td><input id="naam" type="text" placeholder="naam" name="naam" value="'.$naam.'" /></td>
                                        <td><input id="pass" type="password" placeholder="wachtwoord" name="pass" value="'.$pass.'" /></td>
                                    </tr>
                                    <tr>
                                        <td><input type="submit" value="Inloggen" /></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </div>  
                        </center>';
        return $this->html;
    }
}

?> 
```

这是这个的后端：

```
<?php

include_once('engine/database.php');
include_once('engine/class.php');

$start = new start();

class start{

    private $_html;

    function __construct(){

        session_start();
        if(isset($_SESSION['gebruiker'])){

            if(isset($_REQUEST['login'])){
                $_SESSION['gebruiker']->log_in = true;
                $_SESSION['gebruiker']->log_in();
            }
            elseif(isset($_REQUEST['register'])){
                //register
            }
            elseif(!$_SESSION['gebruiker']->logged_in){
                $_SESSION['gebruiker']->log_in = false;
                $_SESSION['gebruiker']->log_in();
            }
            else{
                switch($_REQUEST['actie']){
                    case 'iets':
                        //dostuf
                        break;
                    default:

                        echo 'deafauasdfasdr';

                        break;
                }                   
            }
        }
        else{
            $_SESSION['gebruiker'] = new gebruiker();
            //$new = new gebruiker();
        }
    }

    protected function html($html = 'emty'){
        $this->_html = $html;
    }

    function __destruct(){
        echo $this->_html;
    }

}

?> 
```

现在我认为我收到此错误是因为我将`gebruiker()`类存储在`$_SESSION`. 我没有声明很多代码，所以我不明白为什么会达到内存限制。

或者是因为我不能在 a 中存储一个有这么多扩展的函数类`$_SESSION`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:21:20.363

那是因为你在`gebruiker`. 您在 gebruiker 的构造函数中创建了一个新的 login_form 对象，该对象继承自 gebruiker 并且因为您也继承了`__construct`gebruiker 的方法，所以您创建了越来越多的 login_forms 并最终导致内存错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:27:28.643

像您这样的内存分配失败通常是由于无限递归，在您的情况下，在第 13 行（由错误指定）。问题是由于构造函数继承。

当你扩展一个类时，如果所述构造函数是公共的，你也会继承扩展类的构造函数（尽管在你的扩展类中定义一个新的构造函数会覆盖它）。在您的情况下，流程如下：

*   您创建一个起始对象
*   您的起始对象创建了一个 gebruiker
*   您的 gebruiker 对象创建一个 login_form 对象（*扩展 gebruiker 并且没有理由这样做*），没有显式构造函数，因此在创建时运行 gebruiker::__construct()
*   此对象创建自己的 login_form。

这就是发生无限循环的地方。

修复它的两种方法：

**删除继承：** 这样做不会有任何损失，因为您的 login_form 只输出静态 HTML，实际上不需要 gebruiker 的单个函数。

**向 login_form 添加显式构造函数定义**：这将阻止父构造函数运行。

希望这可以帮助！

# paypal - 无法在 Windows 2008 上的 IIS7 中创建 Paypal Payflow 对象

> ID：15669653
> 
> 赞同：1
> 
> 时间：2013-03-27T21:15:04.550
> 
> 标签：paypal, payflowpro

我正在将我的网站从 Windows 2003 转移到 Windows 2008 IIS7.5，并且我已经在 SysWOW64 文件夹中安装了 Payflow_dotnet_2（重命名为 payflow_dotnet.dll）。regsam 和 gacutil 也做了。但是当我去运行示例代码时

设置客户端 = Server.CreateObject("PayPal.Payments.Communication.PayflowNETAPI")

我收到错误 ActiveX 组件无法创建对象

不知道出了什么问题。想不通。任何帮助将不胜感激。

谢谢肖恩

# c - 为什么全局静态变量优先于函数中的外部变量？

> ID：15669654
> 
> 赞同：2
> 
> 时间：2013-03-27T21:15:04.897
> 
> 标签：c, static, extern

这很难用文字解释，所以我举个例子。

```
//f1.c
int a = 5;

int main()
{
    printf("func2() output is: %i\n", func2() );
    return 0;
}

//f2.c
static int a = 3

int func2()
{
    extern int a;
    return a;
} 
```

当我编译并运行它时，我得到 3，而我期待 5。谁能向我解释为什么我得到 3？我会认为通过在函数中使用 extern，它不会使用静态变量的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:19:12.703

类修饰符表示该`static`变量仅在此翻译单元中可见 ( `f2.c`) 通过使用`extern`for `a`，您仅声明了该变量，但未定义它。然而，`a`在 translation-unit 中有一个可用的`f2.c`，所以将使用这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:23:46.190

从 n1256 §6.2.2 ¶4：

> 对于在该标识符的先前声明可见的范围内使用存储类说明符`extern`声明的标识符，如果先前声明指定内部或外部链接，则后面声明的标识符的链接与指定的链接相同在事先声明。如果前面的声明不可见，或者前面的声明没有指定链接，则标识符具有外部链接。

因此，`extern`在函数范围内意味着该变量*默认具有外部链接，*但如果有另一个可见定义，则使用该定义。

# html - 如何使用 Scala 模板重定向到另一个页面

> ID：15669656
> 
> 赞同：0
> 
> 时间：2013-03-27T21:15:16.123
> 
> 标签：html, scala, playframework-2.0

我有两个 html 页面：`/algorithrms`并`/algorithms/add`用 scala 模板编写。路由文件包含以下几行：

```
GET     /algorithms                 controllers.Application.algorithms()
GET     /algorithms/add             controllers.Application.newAlgorithmForm() 
```

我想在页面中添加一个按钮，`/algorithms`当我单击该按钮时，它只是重定向到第二页`/algorithms/add`。我知道如何在 JavaScript 中做到这一点。我只想通过单击按钮调用一个动作，然后让该动作将我重定向到登录页面。

所以我在第一页的html模板中添加了以下代码：

```
 @form(action=routes.Application.newAlgorithmForm()){
        <input type="submit" value="Add">
    } 
```

它有效，但登陆网址是：`http://localhost:9000/algorithms/add?`

我不要那个问号。我想知道 1）我做错了什么导致问号生成和 2）如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:47:50.427

我不知道你是否使用 Twitter 引导程序，但超链接也可以看起来像按钮，而且`redirect to another page`对我来说听起来像一个普通的超链接：

```
<a class="btn" href="@controllers.routes.Application.newAlgorithmForm()" >
  @Messages("add.newAlgorithmForm")
</a> 
```

# c - libcurl curl/curl.h 没有这样的文件或目录 Win xp 32 MinGW

> ID：15669659
> 
> 赞同：0
> 
> 时间：2013-03-27T21:15:29.660
> 
> 标签：c, gcc, mingw, libcurl

我已经搜索了几个小时，发现了几个具有相同问题的线程并尝试了他们的所有建议。

我的 curl.h 在 C:\MinGW\msys\1.0\curl-7.29.0\include\curl 中，我在编译时包含了它，但由于某种原因 gcc 声称它找不到它：

```
gcc -o curl.exe curl.c -IC:/MinGW/msys/1.0/local/ -IC:/MinGW/msys/1.0/curl-7.29.0/lib/.libs/ -IC:/MinGW/msys/1.0/curl-7.29.0/include/curl -IC:/MinGW/msys/1.0/OpenSSL-Win32/ -lcurl -lws2_32 
```

结果：

```
curl.c:4:32: fatal error: curl/curl.h: No such file or directory 
```

**更新：（**根据 H2CO3 的建议）

```
$ gcc -o curl.exe curl.c -IC:/MinGW/msys/1.0/local -IC:/MinGW/msys/1.0/curl-7.29.0/lib/.libs/ -IC:/MinGW/msys/1.0/curl-7.29.0/include/ -IC:/MinGW/msys/1.0/OpenSSL-Win32/include/ -lws2_32

C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0xa8): undefined reference to `_imp__curl_global_init'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0xe6): undefined reference to `_imp__curl_formadd'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x124): undefined reference to `_imp__curl_formadd'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x162): undefined reference to `_imp__curl_formadd'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x169): undefined reference to `_imp__curl_easy_init'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x183): undefined reference to `_imp__curl_slist_append'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x1b8): undefined reference to `_imp__curl_easy_setopt'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x211): undefined reference to `_imp__curl_easy_setopt'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x237): undefined reference to `_imp__curl_easy_setopt'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x245): undefined reference to `_imp__curl_easy_perform'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x25e): undefined reference to `_imp__curl_easy_strerror'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x288): undefined reference to `_imp__curl_easy_cleanup'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x296): undefined reference to `_imp__curl_formfree'
C:\DOCUME~1\J10441\LOCALS~1\Temp\ccHP6WWt.o:curl.c:(.text+0x2a4): undefined reference to `_imp__curl_slist_free_all' 
```

collect2: ld 返回 1 个退出状态

如果我尝试使用 -lcurl 进行编译，它会说..... ld.exe：找不到 -lcurl 是因为它找不到 dll 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:21:31.220

你包括`<curl/curl.h>`，而**不是** `<curl.h>`。所以你必须告诉编译器在`include`目录中查找头文件，而**不是**在`include/curl`：

```
gcc -IC:\MinGW\msys\1.0\curl-7.29.0\include etc. etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-16T00:43:37.580

这可能超出了您所做的范围，但是，我发现最好将 cURL(libcurl) 版本安装到 MinGW/MSYS 环境中。安装后，可以编译任何程序以使用典型的 <curl/curl.h> 和 -lcurl 约定，因为它安装在 GCC 期望的位置。我[在这里](http://cacogenics.blogspot.com/2015/02/using-libcurl-openssl-and-gtk-with-mingw.html)记录了我的过程。

# c# - 从 FileStream 获取文件描述符句柄

> ID：15669662
> 
> 赞同：6
> 
> 时间：2013-03-27T21:15:35.397
> 
> 标签：c#, mono, monomac

我正在使用这个库[https://github.com/ahawker/NLibsndfile](https://github.com/ahawker/NLibsndfile)从 C# 转换带有 libSndFile 的音频文件，我做了这个方法，用于转换（将 wav 转换为 aiff）：

```
 string sourcePath = "/User/Dev/Desktop/a.wav";
        string targetPath = "/User/Dev/Desktop/b.aiff";

        var file = File.Create(targetPath);
        file.Close();
        file.Dispose();
        IntPtr ptrTargetFile = file.SafeFileHandle.DangerousGetHandle();

        LibsndfileInfo wavInfo = new LibsndfileInfo();
        LibsndfileInfo aiffInfo = new LibsndfileInfo();
        LibsndfileApi api = new LibsndfileApi();

        var wavFile = api.Open(sourcePath, LibsndfileMode.Read, ref wavInfo);
        var aiffFile = api.OpenFileDescriptor((int)ptrTargetFile, LibsndfileMode.Rdwr, ref aiffInfo, 0);

        aiffInfo.Channels = wavInfo.Channels;
        aiffInfo.SampleRate = wavInfo.SampleRate;
        aiffInfo.Format = LibsndfileFormat.Aiff;

        short[] buffer = new short[512];

        long countOfItemsWritten = 0;
        long countOfItemsReaded = 0;

        while ((countOfItemsReaded=api.ReadItems(wavFile, buffer, buffer.Length))>0)
            countOfItemsWritten = api.WriteItems(aiffFile, buffer, countOfItemsReaded);

        api.Close(wavFile);
        api.Close(aiffFile); 
```

问题是在打开 aiff 文件的时候，该方法`api.OpenFileDescriptor`总是返回一个空指针。库方法是这样的：`internal static extern IntPtr sf_open_fd(int handle, LibsndfileMode mode, ref LibsndfileInfo info, int closeHandle);`

知道为什么操作失败了吗？或者如何从 FileStream 中获取文件描述符处理程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T21:40:54.457

您可以像这样获取描述符：

首先使用[`FileStream.SafeFileHandle`](http://msdn.microsoft.com/en-GB/library/system.io.filestream.safefilehandle.aspx)并使用那个值来访问[`SafeHandle.DangerousGetHandle()`](http://msdn.microsoft.com/en-GB/library/system.runtime.interopservices.safehandle.dangerousgethandle.aspx)

所以：`IntPtr handle = fileStream.SafeFileHandle.DangerousGetHandle();`

# c# - 在 C# 中使用 DataTable 填充 DataGridView 变得非常慢

> ID：15669671
> 
> 赞同：0
> 
> 时间：2013-03-27T21:15:59.543
> 
> 标签：c#, .net, datagridview, datatable

我是 C# 新手，并尝试使用 DataGridView 显示后端生成的一些数据。甚至填充三行大约需要两分钟。我参考了 msdn 上的教程和其他一些来源。这是代码的一部分：

```
public partial class OrderBook : Form
{
    private static DataTable order_dt = new DataTable();

    public OrderBook()
    {
        InitializeComponent();

        // columns in the DataTable
        order_dt.Columns.Add("c1", typeof(string));
        order_dt.Columns.Add("c2", typeof(string));
        order_dt.Columns.Add("c3", typeof(int));
        order_dt.Columns.Add("c4", typeof(string));
        order_dt.Columns.Add("c5", typeof(int));
        order_dt.Columns.Add("c6", typeof(string));
        order_dt.Columns.Add("c7", typeof(int));
        order_dt.Columns.Add("c8", typeof(int));

        dgvOrderPanel.DataSource = order_dt; //dgvOrderPanel is the 
                                             //DataGridView component
        foreach (DataGridViewColumn dgvc in dgvOrderPanel.Columns)
            dgvc.Width = 65;
    }

    // add a new row to the DataTable on each call
    public static void addRow(string order_info)
    {
        string[] fields = order_info.Split(' ');

        order_dt.Rows.Add(fields[0], fields[1], int.Parse(fields[2]), fields[3],
                          int.Parse(fields[4]), fields[5], int.Parse(fields[6]), 
                          int.Parse(fields[7]));
    }
    // the CellFormatting handler to determine the color of the row
    private void dgvOrderPanel_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (dgvOrderPanel.Rows[e.RowIndex].Cells["c2"].Value.Equals("B"))
        {
            dgvOrderPanel.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Blue;
        }
        else
        {
            dgvOrderPanel.Rows[e.RowIndex].DefaultCellStyle.ForeColor = Color.Red;
        }
    }
    // other methods...
} 
```

每当后端通过套接字向前端发送包含 order_info 的字符串时，就会调用 addRow()。每个order_info 对应DataTable 和DataGridView 中的单行。

整个过程在同一个线程中执行。有没有想过为什么这么慢？任何建议表示赞赏！

# jquery - 我如何扩展参数

> ID：15669674
> 
> 赞同：1
> 
> 时间：2013-03-27T21:16:09.107
> 
> 标签：jquery, fancybox

我如何扩展我的fancybox中的参数？**参数**应与功能一起提供。

```
contentOverlayBox = function(headline, content, params){
    $.fancybox({
        fitToView   : true,
        autoSize    : true,
        content     : '<strong>'+headline+'</strong><br /><br />'+content
    }); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:19:34.300

您可以在将对象传递给 fancybox 之前使用[$.extend扩展对象，如下所示：](http://api.jquery.com/jQuery.extend/)

```
contentOverlayBox = function(headline, content, params){
    var options = {
        fitToView   : true,
        autoSize    : true,
        content     : '<strong>'+headline+'</strong><br /><br />'+content
    }

    $.extend(options, params);

    $.fancybox(options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:20:48.017

```
$.fancybox($.extend({
    fitToView   : true,
    autoSize    : true,
    content     : '<strong>'+headline+'</strong><br /><br />'+content
}, params)); 
```

# macros - 评估宏形式的参数

> ID：15669675
> 
> 赞同：6
> 
> 时间：2013-03-27T21:16:09.337
> 
> 标签：macros, common-lisp

有选择地将评估参数传递给宏形式的最佳实践是什么？

详细说明：宏的用处在于它能够接收未评估的参数，这与函数形式的默认评估规则不同。但是，评估宏参数有一个合法的用例。

考虑一个人为的例子：

```
(defparameter *func-body* '((print i) (+ i 1))) 
```

假设`*func-body*`可以用作`our-defun`定义为的宏的主体会很好：

```
(defmacro our-defun (fun args &body body)
  `(defun ,fun ,args ,@body)) 
```

所以之后`(our-defun foo (i) (+ 1 i))`，我们可以说`(foo 1)`得到`2`。但是，如果我们使用`(our-defun foo (i) *func-body*)`，则 的结果`(foo 1)`将是`((PRINT I) (+ I 1))`（即 的值`*func-body*`）。如果我们可以强制将评估`*func-body*`作为宏的参数，那就太好了`our-defun`。

目前，我可以想到一种使用`compile`并`funcall`做到这一点的技术，如

```
(funcall (compile nil `(lambda () (our-defun foo (i) ,@*func-body*)))) 
```

之后将按预期`(our-defun 1)`打印出 1 并返回。我`2`可以考虑使用.`eval``eval`

这导致我一开始的问题，有没有更直接或本地的方式来做到这一点？

PS，

一个不太人为的例子是在 function[`(UPDATE-HOOK)`](https://github.com/pw4ever/clfswm/commit/3597eb2789db40b0b2b2b639b71a8f88f5e228f9#L0R34)中，它使用两个库宏`(ADD-HOOK)`并且`(REMOVE-HOOK)`需要评估它的参数。这里使用了上面的`(funcall (compile nil `(lambda () ...)))`技术。

```
(defun update-hook (hook hook-name &optional code)
  (funcall (compile nil `(lambda () (remove-hook ,hook ',hook-name))))
  (unless (null code)
    (compile hook-name `(lambda () ,@code))
    (funcall (compile nil `(lambda () (add-hook ,hook ',hook-name)))))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:56:37.650

这有点困惑。宏不接收未评估的参数。

宏获取源代码并从中创建源代码。还要记住，Lisp 中的源代码实际上是作为数据提供的。宏创建代码，它评估一些形式而一些不评估。

宏需要在编译系统中工作。运行前。在编译期间。宏看到的只是源代码，然后它从中创建源代码。将宏视为代码转换，而不是评估参数。

> 如果我们可以强制将评估`*func-body*`作为宏 our-defun 的参数，那就太好了

那不是很干净。在已编译的系统中，您需要确保它`*func-body*`实际上具有有用的绑定并且可以在**COMPILE TIME**解决。

如果您有一个类似 的宏`DEFUN`，则将源代码设为静态是有意义的。如果你想在表单中插入一些源代码，那么在读取时这样做是有意义的：

```
(defun foo (i) #.`(,@*foo*)) 
```

但这是我通常想要避免的代码。

> 两个库宏`(ADD-HOOK)`，`(REMOVE-HOOK)`并且需要评估其参数。

为什么应该`ADD-HOOK`和`REMOVE-HOOK`是宏？如果你没有真正的理由，它们就应该是函数。已经因为它们使重用变得困难。

如果您出于某种原因想要制作`ADD-HOOK`和宏，那么通常也应该是宏。`REMOVE-HOOK``UPDATE-HOOK`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:37:32.850

您提供给宏的列表具有以下形式

```
(Quote (...)) 
```

所以你真正想要的列表是你得到的列表的 CADR。

# python - 使用向量作为索引切片 numpy 矩阵

> ID：15669678
> 
> 赞同：3
> 
> 时间：2013-03-27T21:16:23.073
> 
> 标签：python, matlab, vector, matrix, numpy

假设我们有一个大小为 639 x 668 的矩阵*s*，这个矩阵完全由 -1 的值组成。我们想要访问和替换 28X28 的一部分（例如，左上角），在该特定子矩阵周围留下 -1 的边框。对于该任务，我们已初始化以下向量*p*（在 MATLAB 中），然后访问该部分：

```
>> s = -ones(639, 668);
>> p = 2:29;
>> section = s(p, p); %Size 28X28
>> size(section)

   ans =

   28    28 
```

现在我们想在 Numpy/Python 中重写该代码，假设切片是等价的：

```
>>> import numpy as np
>>> s = -np.ones((639, 668))
>>> p = np.arange(1, 29)
>>> section = s[p, p]
>>> section.shape
(1, 28) 
```

在这种情况下，无法使用相同的向量访问相同的部分（请注意，numpy 中的索引基于 0）。¿ 可以使用与 MATLAB 中类似的过程在 numpy 中访问该部分吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:28:36.063

您想使用[切片表示法](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)，如 中`a[1:29,1:29]`，而不是列表。

如果你愿意，你可以创建一个`slice`对象`p = slice(1,29)`来获得更多的 matlab 行为。

```
In [9]: a = -np.ones((10,10))

In [10]: a
Out[10]: 
array([[-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.]])

In [11]: a[1:4,1:4] = 9

In [12]: a
Out[12]: 
array([[-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1.,  9.,  9.,  9., -1., -1., -1., -1., -1., -1.],
       [-1.,  9.,  9.,  9., -1., -1., -1., -1., -1., -1.],
       [-1.,  9.,  9.,  9., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.]])

In [13]: p = slice(1,4)

In [14]: a[p,p]
Out[14]: 
array([[ 9.,  9.,  9.],
       [ 9.,  9.,  9.],
       [ 9.,  9.,  9.]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:30:09.587

`slice`你可以用一个对象做你想做的事：

```
>>> p = slice(1, 29)
>>> section = s[p, p]
>>> section.shape
(28L, 28L) 
```

通过广播索引数组，您可以获得类似但不同的结果：

```
>>> p = np.arange(1, 19)
>>> section_bis = s[p[:, None], p]
>>> section_bis.shape
(28L, 28L) 
```

问题是您现在拥有的是副本，而不是原始数组的视图，因为您使用了精美的索引：

```
>>> section_bis[:] = 0
>>> s
array([[-1., -1., -1., ..., -1., -1., -1.],
       [-1., -1., -1., ..., -1., -1., -1.],
       [-1., -1., -1., ..., -1., -1., -1.],
       ..., 
       [-1., -1., -1., ..., -1., -1., -1.],
       [-1., -1., -1., ..., -1., -1., -1.],
       [-1., -1., -1., ..., -1., -1., -1.]]) 
```

但：

```
>>> section[:] = 0
>>>
array([[-1., -1., -1., ..., -1., -1., -1.],
       [-1.,  0.,  0., ..., -1., -1., -1.],
       [-1.,  0.,  0., ..., -1., -1., -1.],
       ..., 
       [-1., -1., -1., ..., -1., -1., -1.],
       [-1., -1., -1., ..., -1., -1., -1.],
       [-1., -1., -1., ..., -1., -1., -1.]]) 
```

# spring - 使用 Spring MVC 框架设置 Intellij

> ID：15669679
> 
> 赞同：3
> 
> 时间：2013-03-27T21:16:31.060
> 
> 标签：spring, spring-mvc, intellij-idea

我一直在谷歌搜索和阅读很多内容，但我根本无法将 spring 框架添加到我的应用程序中。

在 IntelliJ 网站上，它说只需单击“添加模块”，然后在技术下选择 Spring。我唯一可用的技术是 Groovy？！

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T21:30:59.247

IntelliJ 的社区版对 Spring（以及一般的 EE 开发）没有与 Ultimate Edition 相同的开箱即用支持。

[功能和版本比较](http://www.jetbrains.com/idea/features/index.html)

您可能仍然使用 Spring，但不会获得相同的 IDE 集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-11T11:19:11.547

我建议使用以下两个 Youtube 视频之一尝试官方春季网站教程：

关于 Intellij 的 Spring 官方网站： [使用 Spring MVC 提供 Web 内容，使用您的 IDE 构建](https://spring.io/guides/gs/serving-web-content/)

关于使用 Intellij 设置 spring 的 Youtube 视频教程： [Spring MVC with Intellij Full Java Config。没有 web.xml 或 Servlet.xml](https://www.youtube.com/watch?annotation_id=annotation_2978606867&feature=iv&src_vid=_SOXs4xdurE&v=5BY9YxdMg8I "带有 Intellij 完整 Java 配置的 Spring MVC。 没有 web.xml 或 Servlet.xml")

或者

[带有 Intellij Idea 的 Spring MVC 应用程序（带有 xml 配置）](https://www.youtube.com/watch?v=_SOXs4xdurE)

# java - 为手形 GUI 使用 Spring 布局

> ID：15669680
> 
> 赞同：0
> 
> 时间：2013-03-27T21:16:40.373
> 
> 标签：java, swing, layout-manager, springlayout

我有一个带有标签和两个单选按钮的 jframe。

我使用弹簧布局，但我的第二个 radioButton 在页面左上角看到！

```
public class tester extends JFrame {

public tester() {
    add(create());
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(400, 500);
    setVisible(true);
}

public JPanel create() {
    JPanel panel = new JPanel();
    ButtonGroup group = new ButtonGroup();
    JRadioButton r1 = new JRadioButton("Yes");
    JRadioButton r2 = new JRadioButton("No");
    group.add(r1);
    group.add(r2);
    JLabel lable = new JLabel("Today is sunday?");
    panel.add(lable);
//        panel.add(group);      // How add this?

    panel.add(r1);
    panel.add(r2);

    JButton savebt= new JButton("Save");
    JButton cancelbt=new JButton("Cancell");
    panel.add(savebt);
    panel.add(cancelbt);

    panel.setLayout(new SpringLayout());
    SpringUtilities.makeCompactGrid(panel, 1, 3, 50, 100, 25, 50);
    return panel;
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new tester();
        }
    });
}
} 
```

现在发生此异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: No such child: 5 
```

我想在单选按钮行的下方显示我的两个按钮！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:28:26.533

您的面板中有三个项目，因此列数应为 3：

```
SpringUtilities.makeCompactGrid(panel, 1, 3, 50, 100, 25, 50); 
```

> // panel.add(group); // 这个怎么加？

你不需要这个。ButtonGroups 不会被添加到面板中。它们用于按钮选择管理，不显示。

# python - 使用 Python 在 Neo4j 中重置索引

> ID：15669683
> 
> 赞同：1
> 
> 时间：2013-03-27T21:16:57.217
> 
> 标签：python, python-2.7, neo4j

删除节点后是否有可能重置索引，就像手动删除整个文件夹一样？

我正在使用 node.delete() 和 relationship.delete() 删除整个数据库，只是希望索引再次从 1 开始，而不是我实际停止的地方......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:04:20.107

我假设您指的是节点和关系 ID 而不是[索引](http://api.neo4j.org/1.8.2/org/neo4j/graphdb/index/Index.html)？

快速回答：您不能明确强制计数器重置。

稍微长一点的答案：一般来说，这些 ID 在您的应用程序中不应该有任何相关性。Neo4j 邮件列表和 Stack Overflow 中对此进行了多次讨论，因为 ID 是内部工件，不应像主键一样使用。它的目的更类似于内存中的地址，如果您需要唯一标识符，最好考虑使用 UUID 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-13T14:59:07.857

您可以停止数据库，删除数据库文件夹中的所有文件，然后重新启动它。

这样，ID 生成将从 1 开始。

此过程会完全擦除您的数据，因此请小心处理。

现在你当然可以使用 Python 做到这一点。

见[https://stackoverflow.com/a/23310320](https://stackoverflow.com/a/23310320)

# clojure - 使用 Clojure/ClojureScript 交叉库

> ID：15669684
> 
> 赞同：2
> 
> 时间：2013-03-27T21:17:01.107
> 
> 标签：clojure, clojurescript

我正在开发一个同时适用于 Clojure 和 ClojureScript 的库。

这是该库的 project.clj：

```
(defproject libtest "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]]
  :plugins [[lein-cljsbuild "0.3.0"]]
  :cljsbuild
    {:crossovers [libtest],
     :crossover-jar true
     :jar true
    :builds
    [{:source-paths ["src/libtest"], :crossover-path "src/libtest"}]}) 
```

我将它作为依赖项包含在另一个项目中。为了让它在我的项目的 ClojureScript 端工作，我必须在我的 project.clj 的 cljsbuild 键下添加确切的命名空间作为交叉点：

```
 (defproject some-other-project
    ...
    :dependencies [[org.clojure/clojure "1.5.0"]
                   [libtest "0.1.0-SNAPSHOT"]]
    :cljsbuild {
        :builds [{
    ...
            :crossovers [libtest.core]
    ... 
```

**我的问题是，这有必要吗？如果它在类路径上，为什么我必须明确告诉它我将使用哪些命名空间？**如果我需要使用几十个命名空间，这不能很好地扩展，其中一些会引用其他命名空间等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:43:48.637

这不是一个完美的解决方案，但对我有用。当命名空间被指定为交叉时，它的子代被递归添加。所以`:crossovers [libtest]`也会加`libtest.core`。如果您指定 a `:crossover-path`，您可以看到在该目录中生成了哪些文件。

# asp.net-mvc-3 - IIS 7 中的 ASP MVC 3 和 HTTP 错误 403.14 - 禁止

> ID：15669692
> 
> 赞同：1
> 
> 时间：2013-03-27T21:17:36.607
> 
> 标签：asp.net-mvc-3, google-chrome, iis-7, visual-studio-2012, visual-studio-debugging

## IIS 7 中的 ASP MVC 3 和 HTTP 错误 403.14 - 禁止

我现在一直在**ASP.NET MVC 3**中工作，但是一些事情默默地发生了，我无法意识到它出了什么问题。该项目突然停止使用**IIS**，在调试模式下 VS 2012 不再打开浏览器窗口（**Google Chrome v.25 beta，Mozilla Firefox 19.0**）。我访问了几个引用的链接，但解决方案不包含。当我按下在 IIS 本地 Web 服务器上创建虚拟目录的按钮时，它会响应 OK，但从未在池中创建该站点。任何帮助表示赞赏。

*   操作系统架构是**Windows x64**
*   **VS 2012 终极版**
*   **IIS v7**

我已经尝试过这些建议但没有成功：

*   [IIS 7 中的 ASP MVC 导致：HTTP 错误 403.14 - 禁止](https://stackoverflow.com/questions/1741439/asp-mvc-in-iis-7-results-in-http-error-403-14-forbidden)
*   [MVC 诊断 NuGet 包](http://haacked.com/archive/2010/12/05/asp-net-mvc-diagnostics-using-nuget.aspx)
*   [IIS 7.5 上的 ASP.NET MVC](https://stackoverflow.com/questions/2374957/asp-net-mvc-on-iis-7-5)
*   [让 MVC 路由工作时不要使用 runAllManagedModulesForAllRequests="true"](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)
*   [HTTP 错误 403.14 - 访问网站时出现禁止错误](https://stackoverflow.com/questions/7880852/http-error-403-14-forbidden-error-when-accessing-website)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:52:29.703

找到解决方案。我希望这有助于他人***堆叠***。以前的所有文章都很有用，帮助我更好地理解 IIS 工程。

如果站点没有正确的路由，它将显示不受欢迎的页面代码**403.14**。无法从没有获得必要权限的目录显示页面。当路由不正确时，它默认重定向到受服务器保护的目录。

我之前列出的这篇文章是最完整的。在 VS 2010/2012 安装过程之后部署第一个项目时出现此错误。所以，不要担心，它会发生。

*   [IIS 7.5 上的 ASP.NET MVC](https://stackoverflow.com/questions/2374957/asp-net-mvc-on-iis-7-5)
*   [ASP.NET MVC 3：未配置默认文档](http://geeklit.blogspot.com/2012/03/aspnet-mvc-3-default-document-is-not.html)

    ```
     <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true"></modules> <!--THIS ONE -->
    <!--<modules>
      <remove name="UrlRoutingModule-4.0" />
      <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
      --><!-- any other modules you want to run in MVC e.g. FormsAuthentication, Roles etc. --><!--
    </modules>--> 
    ```

## ![当路由错误并且这部分在 *Web.config **<system.WebServer>*** 部分中启用时发生](../Images/4eca3fe183a17dd1192c3c19f71c9272.png)

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
  <!--  <modules runAllManagedModulesForAllRequests="true"></modules> -->

<modules> <!--THIS ONE -->
      <remove name="UrlRoutingModule-4.0" />
      <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
      <!-- any other modules you want to run in MVC e.g. FormsAuthentication, Roles etc. -->
    </modules>
  </system.webServer> 
```

## ![当路由错误并且这部分在 *Web.config **<system.WebServer>*** 部分中启用时发生](../Images/21e00d4124619e6a1ad9e92245d6db09.png)

**我的贡献：** 如果有人是 ReSharper 重构功能或任何其他重构工具的追随者，请注意不要随意使用它，因为它会出人意料地改变事情。不要误解我的话，它是一个迷人的 VS 插件，我在日常工作中使用它。但在我的情况下，它修改了 Global.asax.cs 文件的 RegisterRoutes (...) 中的路由参数，当然站点无法正确加载（甚至主页也不行）。

这是发生了什么{ **id** }：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL ORIGINAL VALUES
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

通过这个地狱{ **referenceId** }：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{referenceId}", // URL MODIFIED VALUES
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-06T11:14:31.090

一直在用这个错误敲我的头，直到我意识到我已在 Appplication_OnStart 上将该成员标记为静态。

这错误地发生在我没有抑制的代码分析警告中，所以我没有头绪，我遵循了 CA1822 警告的最佳实践。

```
 protected static void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T15:30:37.897

Another way for this error : If you put that in your global.asax :

```
 protected void Application_OnStart()
    {

    } 
```

You'll get the 403.1 error.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T22:11:53.450

如果有人仍在查看 MVC 和 Web 部署的任何 403 错误，并且之前的答案都没有帮助（就像我一样），那么我发现还有一件事要看。

dll

**解释**：虽然我在很多论坛上发现 403 的一个可能原因是 dll 相关的。我最终检查了那个区域，并注意到我丢失了很多 dll。我复制了所有的 dll，网站开始正常工作。我相信这些 dll 丢失了，因为它们没有设置为复制本地，所以它们没有与网站一起发布（尽管我没有确认这一点）（也没有缩小“哪个”丢失的 dll 是问题的范围），但认为它可以有助于发布。

# windows - 如何通过批处理文件使用给定目录中的列表文件而不显示完整路径？

> ID：15669696
> 
> 赞同：0
> 
> 时间：2013-03-27T21:17:42.853
> 
> 标签：windows, batch-file, path, dir

我到处都在搜索这个，所以我希望它还没有被问到，但是我有一个批处理文件，如果你愿意，用户可以在其中编写他/她自己的“脚本”。第一次运行批处理文件时，它将在 %appdata%\Mellow\Mango\scripts 下创建一个目录，这些脚本将只是 .txt 文件。反正...

我正在尝试通过使用向用户列出“脚本”，`dir /b /s *.txt`输出为`C:\Users\Tate\AppData\Roaming\Mellow\Mango\scripts\template.txt`

我的问题是，对不起，如果我之前跑题了，如何只显示 template.txt 而不是完整的文件路径。我只是想列出脚本文件夹中包含的所有 .txt 文件。提前致谢！

电流输出：

```
C:\Users\Tate\AppData\Roaming\Mellow\Mango\scripts\template.txt
C:\Users\Tate\AppData\Roaming\Mellow\Mango\scripts\another_script.txt 
```

期望的输出：

```
template.txt
another_script.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:28:29.520

只需删除 /s

目录 /b *.txt

应该这样做:)

# javascript - 使用变量作为参数键 Javascript/Backbone.js

> ID：15669699
> 
> 赞同：0
> 
> 时间：2013-03-27T21:17:53.487
> 
> 标签：javascript, jquery, backbone.js

我有一些看起来像这样的代码：

```
var selectedValue = event.currentTarget.value;
var selectTarget = event.currentTarget.id;
Backbone.sync('read', this.collection, {data: $.param({selectTarget: selectedValue })}); 
```

两者`selectTarget`和都`selectedValue`需要是变量。经过一番研究，我了解到我不能将变量作为参数键传递。但是，我不知道如何重组我的代码来解决这个问题。有没有办法构建 Backbone.sync 调用，以便我可以为键和值传递变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:19:50.387

```
var paramObject = {};
paramObject[selectTarget] = selectedValue;

$.param(paramObject); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:20:47.873

首先创建对象并使用索引语法设置属性：

```
var param = {};
param[selectTarget] = selectedValue;
Backbone.sync('read', this.collection, {data: $.param(param)}); 
```

# c - 必须有更好的方法来 substr

> ID：15669705
> 
> 赞同：1
> 
> 时间：2013-03-27T21:18:25.083
> 
> 标签：c

大家好，我目前正在使用下面的代码，我很确定有更好的方法来做到这一点。代码的作用是查看是否有分隔符 (~~~~)，将 ~~~~ 之前的所有内容放在 cmd 中，将 ~~~~ 之后的所有内容放在 param 中。如果有人能让我知道我应该怎么做，那将不胜感激！我不习惯低级语言，所以字符串和指针仍然让我感到困惑！

谢谢！

```
char buffer[1024], *tempCharPointer, cmd[100], param[1024];

if(strstr(buffer, "~~~~"))
{
   strcpy(cmd, buffer);
   tempCharPointer = strstr(buffer, "~~~~");
   index = (tempCharPointer-buffer) + 4;
   strcpy(param, &tempCharPointer[4]);
   memmove(&cmd[index-4], "", (index-4));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:22:18.833

您可以按如下方式简化代码：

```
char cmd[1024], *tempCharPointer, *param = "";
// Fill in cmd from somewhere...
...
char *delim = strstr(cmd, "~~~~");
if(delim)
{
    param = delim+4;
    *delim = '\0';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:20:35.020

您可以简化代码并`\0`在定界符之前插入（修改定界符的第一个字符并使其成为`\0`），并让 command 成为指向字符串开头的指针，并将参数指向定界符之后的第一个字符的指针。节省你的记忆和所有这些动作等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:23:53.167

```
char buffer[1024], *tempCharPointer, cmd[100], param[1024];

tempCharPointer = strstr(buffer, "~~~~");

if (tempCharPointer){
   *tempCharPointer = '\0';
   tempCharPointer +=4;

    //now buffer points to the first half, and tempCharPointer points to second half
    //do with them what you will
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T21:31:17.420

C 库中的`strtok`函数（从字符串中提取标记）在这里很有用。

下面是一个小例子。`man strtok`了解更多信息。请注意，strtok_r（在下面使用）用于可重入支持。

```
#include <string.h>
#include <stdio.h>

int main(const int argc, const char const** argv)
{
    char buffer[1024];
    sprintf(buffer, "~~~~foo~~~~bar~~~~baz");

    char* saveptr = NULL;
    char* token = strtok_r(buffer, "~~~~", &saveptr);
    while(token != NULL)
    {
        printf("TOKEN: %s\n", token);
        token = strtok_r(NULL, "~~~~", &saveptr);
    }
} 
```

# docx4j - Docx4j 测试 - 没有文件输出

> ID：15669709
> 
> 赞同：0
> 
> 时间：2013-03-27T21:18:42.827
> 
> 标签：docx4j

尝试用 docx4j ( [http://www.docx4java.org](http://www.docx4java.org) ) 编写我的第一堂课。基本上这个想法是在 .docx 文件中找到一个文本字符串，然后用另一个文本字符串替换它。本质上是邮件合并。虽然我没有收到任何错误，但合并的文档本身并没有保存在我建议的路径中。这让我觉得这是一个文件路径问题，但我看不出有什么问题。

```
package efi.mailmerge.servlets;

import java.util.List;
import javax.xml.bind.JAXBElement;
import org.docx4j.openpackaging.exceptions.Docx4JException;
import org.docx4j.openpackaging.packages.WordprocessingMLPackage;
import org.docx4j.wml.Text;

public class WordDocTest {

    /**
     * Open word document /Users/Jeff/Development/ReServe-Unleashed/Dev/MailMerge/uploads/Sample.docx, replace a piece of text and save
     * the result to /Users/Jeff/Development/ReServe-Unleashed/Dev/MailMerge/uploads/Sample-Out.docx.
     *
     * The text <<CUS_FNAME>> will be replaced with John.
     *
     * @param args
     */
    public static void main(String[] args) {

        // Text nodes begin with w:t in the word document
        final String XPATH_TO_SELECT_TEXT_NODES = "//w:t";

        try {
            // Open the input file
            WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(new java.io.File("/Users/Jeff/Development/ReServe-Unleashed/Dev/MailMerge/uploads/Sample.docx"));

            // Build a list of "text" elements
            List texts = wordMLPackage.getMainDocumentPart().getJAXBNodesViaXPath(XPATH_TO_SELECT_TEXT_NODES, true);

            // Loop through all "text" elements
            for (Object obj : texts) {
                Text text = (Text) ((JAXBElement) obj).getValue();

                // Get the text value
                String textValueBefore = text.getValue();

                // Perform the replacement
                String textValueAfter = textValueBefore.replaceAll("<<CUS_FNAME>>", "John");

                // Show the element before and after the replacement
                System.out.println("textValueBefore = " + textValueBefore);
                System.out.println("textValueAfter = " + textValueAfter);

                // Update the text element now that we have performed the replacement
                text.setValue(textValueAfter);

            }

            wordMLPackage.save(new java.io.File("/Users/Jeff/Development/ReServe-Unleashed/Dev/MailMerge/uploads/Sample-Out.docx"));

        } catch (Docx4JException e) {
            Logger.getLogger(WordDocTest.class.getName()).log(Level.SEVERE, null, e);
            e.printStackTrace();
        } catch (Exception e) {
            Logger.getLogger(WordDocTest.class.getName()).log(Level.SEVERE, null, e);
            e.printStackTrace();
        }
    }

} 
```

在第 26 行和第 50 行，您可以看到输入/输出路径。我已经确认 Sample.docx 输入文件确实存在并且上传目录具有写入权限。你能在这里看到我的文件路径有什么问题吗？我可能完全走错了路，但这对我来说都是全新的，所以我边走边学。

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:48:44.397

乍一看，我建议尝试使用以下方式编写您的路径：

```
wordMLPackage.save(new java.io.File("\\Users\\Jeff\\Development\\ReServe-Unleashed\\Dev\\MailMerge\\uploads\\Sample-Out.docx")); 
```

如果它仍然不起作用，请提供堆栈跟踪？它可以提供帮助。（如果没有保存doc，肯定是抛出异常）

# java - 如何在多个链表中关联读取的用户输入？

> ID：15669712
> 
> 赞同：1
> 
> 时间：2013-03-27T21:18:57.337
> 
> 标签：java, linked-list, user-input

所以现在我正在编写一个程序，它将接受用户输入，例如：

*   “杰夫”的名字
*   “亨德森”作为姓氏
*   与他们的电话号码
*   要存储在他们的银行帐户中的金额

并将其全部存储到链接列表中。

如果我要添加具有此类似信息的另一个人，那么它将如何存储在链接列表中，以便我可以分别访问两个人的信息？

现在我在输入新用户时使用它来建立所有存储：

```
private final Scanner keyboard;

private final LinkedList<String> firstName;
private final LinkedList<String> lastName;
private final LinkedList<String> teleNumber;
private final LinkedList<String> accountBalance;

public bankdata() 
{
    this.keyboard = new Scanner(System.in);
    this.firstName = new LinkedList<String>();
    this.lastName = new LinkedList<String>();
    this.teleNumber = new LinkedList<String>();
    this.accountBalance = new LinkedList<String>();
} 
```

我打算用来`keyboard.next();`读取用户输入，然后使用我编写的添加方法将信息存储到每个链表中。

它的设置方式是每个对象变量都有一个链接列表，例如：

*   名字的链接列表
*   最后一个链接列表
*   电话号码的链接列表
*   帐户余额的链接列表

如果我想调用与某个特定人相关联的信息，那么当我请求用户信息时，如果他们在另一个链接列表中，我可以看到他的所有东西，我该如何获得它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:26:17.650

这里的事情是创建自己的数据结构。我会说更多关于 LinkedList 的研究。几乎每个在线链表示例都可以帮助您。

提示：为您的节点创建一个类，并将与每个人有关的所有信息存储在该节点中。

**编辑**：只是为了完成答案：[如何在 Java 中创建链接列表数据结构？](https://stackoverflow.com/questions/10042/how-do-i-implement-a-linked-list-in-java)

**编辑 2**：根据您编辑的 OP，我认为您想要 4 个 LinkedList，并找到一个人的所有信息。我假设您将按此人的姓名进行搜索（如果没有，过程仍然相同）。此外，假设一个人的信息存储在正确的对应节点上。因此，`person1`所有 4 个列表的第一个节点中都有所有信息，`person2`所有节点都位于“索引”1。

因此，您开始搜索存储名称的 LinkedList，并在找到名称后立即停止（如果未找到则抛​​出错误）。还要跟踪您看到的节点数。这将是您获取所有其他列表信息所需的索引。

现在，使用`for`循环，在其余 3 个列表中的每一个上遍历适当的次数，并返回遇到的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:36:28.527

将所有数据分组到一个类中然后使用 Hashtable 作为您的数据结构会更容易，您应该在网上找到许多关于 Hashtable 的资源，还请查看[http://javarevisited.blogspot.com/2012/01/java-hashtable -example-tutorial-code.html](http://javarevisited.blogspot.com/2012/01/java-hashtable-example-tutorial-code.html)。关于获取输入..您可以将其存储在数组中，因为变量的数量是固定的，然后使用 Arrays.toList() 将其转换为列表，并可能在循环内使用开关来初始化变量。请注意，哈希表结构还有其他选择，但我建议您稍后再检索数据，并且它可能会变大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:08:19.453

这是典型的[**原始痴迷**](http://sourcemaking.com/refactoring/primitive-obsession)。

您应该使用对象来保存数据。它将更加灵活和易于使用。

# android - 动态显示新闻文章（文本、图像）的最佳方式？除了WebView？

> ID：15669720
> 
> 赞同：1
> 
> 时间：2013-03-27T21:19:21.820
> 
> 标签：android, html

我正在编写一个 Android 应用程序，它可以读取`RSS`提要、获取`HTML`文章、处理文章`HTML`以仅存储重要内容（故事正文，包括段落和图像/图像标题等），并将**其显示给用户**。

除了最后一步，我什么都做了。

这些文章显然会有不同的文本、不同的图像位置等，我希望能够**保留**这些元素的顺序（就像它们在获取时一样）。

实现这一点的最佳方法是什么？我真的不想用`WebView`...

提前致谢。

**编辑** 请查看我的解决方案接受的答案的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:59:44.363

我能看到做这样的事情的最好方法是转义每个 html 标签并适当地处理每个标签。假设您对 head 元素和元数据不感兴趣，您可以为以下 html 页面执行类似下面的伪代码

```
<html>  
...
<head>
...
</head>
<body>
<h1> some text probably your title </h1>
<p1> first paragraph </p1>
<p2> second paragraph </p2>
<img src='/some_url' title='some_title'>
</body> 
</html> 
```

现在，对于您需要做的事情，还请注意，html 页面的实际设置方式将取决于网页/rss 提要，因此可能需要对许多站点进行修改，但您仍想做这样的事情：不是当我说 llok 时，我的意思是一些如何搜索子字符串（如果在设备上，则为 java）任何你希望从设备上下来的东西

```
 find("<body>") everything before can be thrown away
  find ("<img" or "<p1" or "<h1" or "<div") handle accordingly 
```

（这很可能会在页面来源上发生变化）

```
 but for say <p1 found 

     find (">") represents end of tag attribute pull all of this until delimiter tag "</p1>" 
```

你有你的第一段图像标签

```
 ie. find("<img")
    then find("title=") or find("src=") 
```

这些之后的子字符串将分别是图像的图像标题和源文件，而不是这些值将被包装在其中之一`'`或`"`

这不是一个完整的解决方案，但是嘿，我已经看到了您的尝试，因此这是一个起点

# javascript - Three.js - 一次加载 JSON 模型并多次添加

> ID：15669721
> 
> 赞同：3
> 
> 时间：2013-03-27T21:19:22.257
> 
> 标签：javascript, json, three.js, webgl

是否可以一次加载 JSON 模型并以不同的比例、位置等多次将其添加到场景中？

如果我将 Object3D() 添加到数组中，为数组中的对象指定位置和比例，将其添加到场景中，然后重复此过程，数组中的每个对象的位置和比例都会被覆盖。

我想不出任何可行的方法，所以我希望有人能给我一个我正在努力完成的工作示例。

这是我失败的尝试（其中之一）。如果我的解释不充分，应该让您对我正在尝试做的事情有一个基本的了解。

```
 function addModels(){

            var models = [];    

            var model = new THREE.Object3D();       
            var modelTex = THREE.ImageUtils.loadTexture( "textures/model.jpg" );
            var loader = new THREE.JSONLoader();
            loader.load( "models/model.js", function( geometry ) {
                mesh = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial( { map: modelTex }) );
                model.add(mesh);
            } );

            for(var i = 0; i < 5; i++){ 
                model.scale.set(i,i,i);
                model.position.set(i,i,i);
                models[i] = model;

                scene.add(models[i]);
            }   

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:34:26.853

您需要先克隆模型，然后设置位置和比例。

```
 for(var i = 0; i < 5; i++){ 
        var newModel = model.clone();
            newModel.position.set(i,i,i);
            newModel.scale.set(i,i,i);

            scene.add(newModel); 
} 
```

更新：示例如何在不加载的情况下创建 json 模型：[小提琴示例](http://jsfiddle.net/YFkMy/25/)或只是在加载函数中简单地添加循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T08:18:43.653

您可以从相同的几何形状和材料创建新的网格：

```
loader.load( "models/model.js", function( geometry ) {
        var mat = new THREE.MeshLambertMaterial( { map: modelTex });
        for (var i = 0; i < 5; i++) { 
            var mesh = new THREE.Mesh( geometry, mat );
            mesh.position.set(i, i, i);
            mesh.scale.set(i, i, i);
            scene.add(mesh);
        }
}); 
```

# facebook - 有没有办法知道 Facebook 开发人员何时发布对 Facebook API 的更改？

> ID：15669723
> 
> 赞同：0
> 
> 时间：2013-03-27T21:19:30.987
> 
> 标签：facebook, facebook-graph-api, health-monitoring

我支持的一个应用程序今天被我认为是对 API 的无证更改破坏了。

依赖 Facebook 的网站开发人员如何监控 API 的变化？

我知道开发人员博客，并且我确信还有其他“非自动化”方式，但我对任何可用于健康检查对我的应用程序至关重要的 API 部分的自动化服务特别感兴趣。

我也知道“平台状态​​”页面，[http://developers.facebook.com/live_status](http://developers.facebook.com/live_status)但这只是一个基本的“Facebook 是否活跃”检查。

有什么想法或经验可以分享吗？

我应该使用 Watin 或 Selenium 之类的工具设置一系列自动化测试用例吗？ [Watin](http://watin.org/ "瓦廷")或[硒](http://docs.seleniumhq.org/)

或者是否有特定的 Facebook 工具/RSS 提要可用？

另外：是否有人知道 Facebook 团队是否会在构建或 API 更改集“上线”时发布发布说明的公开时间表或时间表，这可用于触发自动化测试？有谁成功地愿意分享吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:00:07.957

没有自动发布说明或明确的变更日志，但有一个 RSS 提要显示最近推送到生产的日期：[https ://www.facebook.com/feeds/api_status.php](https://www.facebook.com/feeds/api_status.php)

该`push`项目包含上次推送 Facebook 代码的日期和时间

# c# - 带有访问数据源的Gridview不会更新或删除asp c#

> ID：15669725
> 
> 赞同：0
> 
> 时间：2013-03-27T21:19:35.807
> 
> 标签：c#, asp.net, gridview

我翻遍了，研究了书籍，教程视频和大量文章，但我无法解决这个问题。在 Visual Studio 2010 中插入一个网格视图，我将数据源指定为访问数据库。在规范中，我包括插入、更新和删除记录的选项。网格视图出现在屏幕上，当我测试网页时，它会加载更新和插入等相关按钮。测试页面时，我单击更新按钮，更改一行，然后单击更新。页面恢复到以前的状态，记录保持不变。我刷新页面以确保它没有更新，它肯定没有。我完全按照教程进行操作，使用此方法时无法更新或删除字段。我使用的数据库是一个访问数据库，一个 mdb 文件。

我确定我在这里遗漏了一些非常简单的东西，但我不确定是什么。如果有人可以提供一些帮助，我将不胜感激！谢谢

这是我的表单代码。

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="Book Id" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" 
                ShowSelectButton="True" />
            <asp:BoundField DataField="Book Id" HeaderText="Book Id" InsertVisible="False" 
                ReadOnly="True" SortExpression="Book Id" />
            <asp:BoundField DataField="ISBN Number" HeaderText="ISBN Number" 
                SortExpression="ISBN Number" />
            <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
            <asp:BoundField DataField="Author" HeaderText="Author" 
                SortExpression="Author" />
            <asp:BoundField DataField="Publisher" HeaderText="Publisher" 
                SortExpression="Publisher" />
            <asp:BoundField DataField="Date Published" HeaderText="Date Published" 
                SortExpression="Date Published" />
            <asp:CheckBoxField DataField="Availability" HeaderText="Availability" 
                SortExpression="Availability" />
            <asp:BoundField DataField="Price" HeaderText="Price" SortExpression="Price" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConflictDetection="CompareAllValues" 
        ConnectionString="<%$ ConnectionStrings:booksellerConnectionString %>" 
        DeleteCommand="DELETE FROM [tblBooks] WHERE [Book Id] = ? AND (([ISBN Number] = ?) OR ([ISBN Number] IS NULL AND ? IS NULL)) AND (([Title] = ?) OR ([Title] IS NULL AND ? IS NULL)) AND (([Author] = ?) OR ([Author] IS NULL AND ? IS NULL)) AND (([Publisher] = ?) OR ([Publisher] IS NULL AND ? IS NULL)) AND (([Date Published] = ?) OR ([Date Published] IS NULL AND ? IS NULL)) AND [Availability] = ? AND (([Price] = ?) OR ([Price] IS NULL AND ? IS NULL))" 
        InsertCommand="INSERT INTO [tblBooks] ([Book Id], [ISBN Number], [Title], [Author], [Publisher], [Date Published], [Availability], [Price]) VALUES (?, ?, ?, ?, ?, ?, ?, ?)" 
        OldValuesParameterFormatString="original_{0}" 
        ProviderName="<%$ ConnectionStrings:booksellerConnectionString.ProviderName %>" 
        SelectCommand="SELECT * FROM [tblBooks]" 
        UpdateCommand="UPDATE [tblBooks] SET [ISBN Number] = ?, [Title] = ?, [Author] = ?, [Publisher] = ?, [Date Published] = ?, [Availability] = ?, [Price] = ? WHERE [Book Id] = ? AND (([ISBN Number] = ?) OR ([ISBN Number] IS NULL AND ? IS NULL)) AND (([Title] = ?) OR ([Title] IS NULL AND ? IS NULL)) AND (([Author] = ?) OR ([Author] IS NULL AND ? IS NULL)) AND (([Publisher] = ?) OR ([Publisher] IS NULL AND ? IS NULL)) AND (([Date Published] = ?) OR ([Date Published] IS NULL AND ? IS NULL)) AND [Availability] = ? AND (([Price] = ?) OR ([Price] IS NULL AND ? IS NULL))">
        <DeleteParameters>
            <asp:Parameter Name="original_Book_Id" Type="Int32" />
            <asp:Parameter Name="original_ISBN_Number" Type="String" />
            <asp:Parameter Name="original_ISBN_Number" Type="String" />
            <asp:Parameter Name="original_Title" Type="String" />
            <asp:Parameter Name="original_Title" Type="String" />
            <asp:Parameter Name="original_Author" Type="String" />
            <asp:Parameter Name="original_Author" Type="String" />
            <asp:Parameter Name="original_Publisher" Type="String" />
            <asp:Parameter Name="original_Publisher" Type="String" />
            <asp:Parameter Name="original_Date_Published" Type="String" />
            <asp:Parameter Name="original_Date_Published" Type="String" />
            <asp:Parameter Name="original_Availability" Type="Boolean" />
            <asp:Parameter Name="original_Price" Type="Decimal" />
            <asp:Parameter Name="original_Price" Type="Decimal" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="Book_Id" Type="Int32" />
            <asp:Parameter Name="ISBN_Number" Type="String" />
            <asp:Parameter Name="Title" Type="String" />
            <asp:Parameter Name="Author" Type="String" />
            <asp:Parameter Name="Publisher" Type="String" />
            <asp:Parameter Name="Date_Published" Type="String" />
            <asp:Parameter Name="Availability" Type="Boolean" />
            <asp:Parameter Name="Price" Type="Decimal" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="ISBN_Number" Type="String" />
            <asp:Parameter Name="Title" Type="String" />
            <asp:Parameter Name="Author" Type="String" />
            <asp:Parameter Name="Publisher" Type="String" />
            <asp:Parameter Name="Date_Published" Type="String" />
            <asp:Parameter Name="Availability" Type="Boolean" />
            <asp:Parameter Name="Price" Type="Decimal" />
            <asp:Parameter Name="original_Book_Id" Type="Int32" />
            <asp:Parameter Name="original_ISBN_Number" Type="String" />
            <asp:Parameter Name="original_ISBN_Number" Type="String" />
            <asp:Parameter Name="original_Title" Type="String" />
            <asp:Parameter Name="original_Title" Type="String" />
            <asp:Parameter Name="original_Author" Type="String" />
            <asp:Parameter Name="original_Author" Type="String" />
            <asp:Parameter Name="original_Publisher" Type="String" />
            <asp:Parameter Name="original_Publisher" Type="String" />
            <asp:Parameter Name="original_Date_Published" Type="String" />
            <asp:Parameter Name="original_Date_Published" Type="String" />
            <asp:Parameter Name="original_Availability" Type="Boolean" />
            <asp:Parameter Name="original_Price" Type="Decimal" />
            <asp:Parameter Name="original_Price" Type="Decimal" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

下面的 asp.cs 文件；

```
namespace Second
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:55:36.367

我不一定有一个直接的答案，但有一些建议：

这可能是因为您的复杂性`UPDATE`：

```
UPDATE [tblBooks] SET [ISBN Number] = ?, [Title] = ?, [Author] = ?, [Publisher] = ?, [Date Published] = ?, [Availability] = ?, [Price] = ? WHERE [Book Id] = ? AND (([ISBN Number] = ?) OR ([ISBN Number] IS NULL AND ? IS NULL)) AND (([Title] = ?) OR ([Title] IS NULL AND ? IS NULL)) AND (([Author] = ?) OR ([Author] IS NULL AND ? IS NULL)) AND (([Publisher] = ?) OR ([Publisher] IS NULL AND ? IS NULL)) AND (([Date Published] = ?) OR ([Date Published] IS NULL AND ? IS NULL)) AND [Availability] = ? AND (([Price] = ?) OR ([Price] IS NULL AND ? IS NULL)) 
```

因为你有一个相当沉重的`WHERE`条款。如果您只是将其缩减为：

```
UPDATE [tblBooks] SET [ISBN Number] = ?, [Title] = ?, [Author] = ?, [Publisher] = ?, [Date Published] = ?, [Availability] = ?, [Price] = ? WHERE [Book Id] = ? 
```

并相应地削减你的`<UpdateParameters>`，这有什么影响吗？

另外（对我来说已经有一段时间了）我注意到您的参数名称（例如`Book_Id`）与数据字段绑定（例如）不完全匹配，`Book Id`因此可能会导致问题。我相信他们需要匹配（或者他们这样做是好的）以实现[绑定](http://msdn.microsoft.com/en-us/library/ms228051%28v=vs.80%29.aspx)目的，但在这种情况下他们不需要。

可能值得修改您的数据库，以便列名类似于 [Book_Id]、[ISBN_Number] 等...我认为数据库列中很少有空格（根据我的经验当然很少见...但我是没那么有经验！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:35:17.367

只是为了踢，尝试删除线 `ConflictDetection="CompareAllValues"`。现在会更新吗？

# android - 对 Android 5.0 的旧 Linux 内核支持

> ID：15669728
> 
> 赞同：0
> 
> 时间：2013-03-27T21:19:48.307
> 
> 标签：android, linux-kernel, kernel

预计将于 2013 年第二季度发布的 Android 5.0(Key Lime Pie) 将基于 Linux 3.8 Kernel 引起了很多热议。这是否意味着具有 Linux 3.4 或 3.3 内核的旧设备将无法升级到 Android 5.0？

PS如果这个问题看起来很愚蠢，我很抱歉。我只是一个新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:22:32.257

在 Android 团队的某个人出现或下一个版本真正发布之前，这个问题无法真正得到解答。

但是，当前使用旧内核的旧设备应该能够很好地运行这个新内核，假设硬件支持它并且为该设备提供了 ROM。内核版本不必在更新中相同（Nexus S 可以运行 2.3、4.0 和 4.1，它们使用多个内核）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:34:55.370

您还可以更新使用不同 Linux 内核的 Ubuntu。安卓手机也一样。但是，这取决于制造商是否允许您更新和发布一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:35:51.130

您必须了解操作系统、驱动程序和内核之间的基本交互。

在最低级别，您拥有设备驱动程序。对于微软来说，所使用的驱动模型是代代相传的，驱动的设计是固定的，然后微软让硬件制造商拿出驱动。使微软不负责创建驱动程序已使其成为“如果您的设备无法工作，则不是我们的问题”的情况。

一旦处理了基础驱动层，那么您只需要操作系统的其余部分与该驱动层对话并根据屏幕分辨率等进行扩展。您可能已经注意到，显卡驱动程序有很多关于质量的讨论，主要是在 AMD 和 NVIDIA 之间，因为英特尔在图形领域（除了集成的东西）没有竞争力。

其余的，这不是什么大不了的事。现在，由于硬件公司不会为旧产品制作更新版本的移动操作系统的驱动程序，这使得更新旧手机变得更加困难，如果不是不可能的话。

您可能还记得 Vista 最初的稳定性问题。NVIDIA 没有准备好驱动程序，因此 Vista 附带的驱动程序相当不稳定，并导致 BSoD 问题。Vista 在发布时可能需要做一些工作，但大多数真正的问题是由错误的驱动程序引起的（以及人们试图用 1GB 或更少的 RAM 运行它）。

如果/当 Android 使驱动程序层保持不变而操作系统的其余部分可以发展时，这将有所帮助，但 Linux 内核本身最近已跃升至 3.4，如果不重新编译旧的驱动程序将无法工作，再一次，芯片制造商在制造驱动程序方面并不是很好。

因此，最终取决于 Android-OS 开发人员和芯片制造商。如果 Android 5.0 使用 Linux 3.8 Kernel 的高级功能，那么它可能不支持旧的内核版本。但拯救总是掌握在芯片制造商手中，他们可以重新定义（调整）操作系统代码以适应设备的相应内核版本。

PS 如果您尝试 root/flash ROM 以安装最新的操作系统，请首先检查与目标内核的兼容性，否则您可能会得到一部变砖的手机。

# android - 每隔几秒使用 GpsStatus 对一些数据进行采样

> ID：15669729
> 
> 赞同：0
> 
> 时间：2013-03-27T21:19:50.017
> 
> 标签：android, gps

我正在尝试使用我的应用程序中`GpsStatus`的`getSatellites()`函数每 5 秒对数据进行一次采样。我似乎不明白如何初始化`GpsStatus`。有人可以指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:26:15.590

您通过侦听器获得 GpsStatus

```
mlocationManager.addGpsStatusListener(your listener); 
```

或致电`getGpsStatus (GpsStatus status)`

检索有关 GPS 引擎当前状态的信息。这只应从 onGpsStatusChanged(int) 回调中调用，以确保以原子方式复制数据。调用者可以传入一个 GpsStatus 对象来设置最新的状态信息，或者传递 null 来创建一个新的 GpsStatus 对象。

# objective-c - NSNumberCurrencyFormatter 负格式

> ID：15669731
> 
> 赞同：0
> 
> 时间：2013-03-27T21:19:50.520
> 
> 标签：objective-c, nsnumberformatter

我有一个问题，如果您将我的应用程序上的货币更改为与区域设置不同的货币，我的应用程序会错误地显示负值，例如应用程序货币设置为 £，区域设置为美国，我的负数显示为 ( 278.00 美元）。我希望它显示 - £278.00。我使用以下格式格式化数字：

```
// Get the currency from the user settings/preferences
NSString *currency = [[NSUserDefaults standardUserDefaults] objectForKey:CURRENCY_KEY];

// Set the format, currency and negative format so that we don't display the default (xx.xx)
NSNumberFormatter *numberCurrencyFormatter = [[NSNumberFormatter alloc] init];
[numberCurrencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[numberCurrencyFormatter setCurrencySymbol:currency];

[numberCurrencyFormatter setCurrencyDecimalSeparator:[[NSLocale currentLocale] objectForKey:NSLocaleDecimalSeparator]];

if ([[[NSLocale currentLocale] objectForKey:NSLocaleDecimalSeparator] isEqualToString:DECIMAL]) {
    [numberCurrencyFormatter setCurrencyGroupingSeparator:COMMA];
    [numberCurrencyFormatter setNegativeFormat:[currency stringByAppendingString:@"-#,##0.00"]];
} else {
    [numberCurrencyFormatter setCurrencyGroupingSeparator:DECIMAL];
    [numberCurrencyFormatter setNegativeFormat:[currency stringByAppendingString:@"-#.##0,00"]];
}

return [numberCurrencyFormatter stringFromNumber:number]; 
```

# bash - Bash：如何从 CSV 文件的列中获取带有“分隔符”的列？

> ID：15669738
> 
> 赞同：0
> 
> 时间：2013-03-27T21:20:07.450
> 
> 标签：bash, awk, text-parsing

我有一些从在线数据库下载的 CSV 文件。我试图减少它们，以便我可以将我需要的部分数据插入到我的 SQL 数据库中。

CSV 文件具有逗号分隔的字段，如下所示：

```
1,Peptidoglycan synthetase ftsI,ftsI,1574687,L42023,P45059,FTSI_HAEIN,"",,,,
3,Histidine decarboxylase,HDC,32109,X54297,P19113,DCHS_HUMAN,,HDC,HDC,HGNC:4855,00817
5,"Glutaminase liver isoform, mitochondrial",GLS2,6650606,AF110330,Q9UI32,GLSL_HUMAN,,GLS2,GLS2,HGNC:29570,05901
6,Coagulation factor XIII A chain,F13A1,182309,M22001,P00488,F13A_HUMAN,1FIE,F13A1,F13A1,HGNC:3531,00604
7,"Nitric oxide synthase, inducible",NOS2,292242,L09210,P35228,NOS2_HUMAN,2NSI,NOS2A,NOS2A,HGNC:7873,01225 
```

这就是问题所在。查看第 3 行和第 5 行。这两行的第二列有逗号！我通常使用 awk 来处理这样的事情，因为逗号在那里，所以 $2 被搞砸了。

例如：

```
awk -F ',' '{print $2}' myfile.csv ## Obviously I will be printing a lot more stuff 
```

如果如上所示对该部分执行此操作，则第 3 行和第 5 行将被搞砸，因为这两行的第 2 列中有一个逗号，并用引号括起来。

我能做些什么来解决这个问题？

编辑：如果可能的话，我想仍然坚持在 shell 中这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:23:10.307

您应该使用像[perl](/questions/tagged/perl "显示标记为“perl”的问题")的[Text::CSV](https://metacpan.org/module/Text%3a%3aCSV)之类的 CSV 解析器（如果您愿意，可以在单行中（所以仍然在 shell 中）），它会为您完成所有的魔法。

如果您更喜欢[python](/questions/tagged/python "显示标记为“python”的问题")，请参阅[csv](http://docs.python.org/2/library/csv.html)模块

[shell](/questions/tagged/shell "显示标记为“外壳”的问题") + [python](/questions/tagged/python "显示标记为“python”的问题")中的一个例子：

```
$ python<<EOF
import csv

f = open("test.csv", 'rt')
try:
    reader = csv.reader(f)
    for row in reader:
        print row
finally:
    f.close()
EOF 
```

# c# - 插入方法应该返回对象还是抛出异常

> ID：15669744
> 
> 赞同：3
> 
> 时间：2013-03-27T21:20:27.787
> 
> 标签：c#, api, design-patterns

我正在设计一个 API（第一次），它将是一个非常公开的 API（用于免费在线服务）。

我正在考虑返回结构，例如`InsertResult`哪个可以具有失败或成功时的属性（即多少行），错误消息等等。现在，另一种方法是从 API 插入方法中抛出异常。我知道这是一个“一般和开放”的问题，但是对于 API，什么被认为更干净和优美？

**设想**

API 是一个 DLL（它在内部调用和使用来自 4 或 5 个不同来源的 Web 服务，并且取决于地理位置等决定与哪个服务交互）。它是使用 C# 和 Mono 构建的。使用场景包括来自桌面、移动和 Web 客户端的 API 作为库。这确实是问题所在，假设一个离线用例，从网络客户端它根本不会发生，但从移动设备或桌面它可以（更频繁地从移动设备）那该怎么办？如何在离线时管理说插入调用以存储来自移动应用程序的模拟。或者当另一个（与服务器相关的）错误发生时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:27:35.657

一般来说，如果用户试图做一些无效的事情，你应该抛出一个异常。但是，您还应该提供一个代码路径，允许用户在发生异常之前合理地检查可能引发异常的条件。如果它很重要（可能出于性能原因），您可能希望包含一个`TryInsert`安全处理无效插入并简单地返回`bool`有效以指示成功的方法。

这适用于纯 C# API 以及服务 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:27:47.940

抛出异常是在 C#/.NET 中处理错误和意外情况的更*自然的方式。*此外，.NET 为您提供了定义自己的异常或使用现有异常之一的可能性。
此外，通过提供诸如`finally{}`-blocks 之类的东西，您可以在出现问题时创建非常顺利的操作。
检查返回值很容易出错，如果用户没有正确地对您的返回值做出反应，它可能会使过程不稳定。未处理的异常通常会停止进程，因此会强制用户检查背景。不过，这是我的看法。

在[MSDN](http://msdn.microsoft.com/en-us/library/ms173163%28v=vs.110%29.aspx)上，他们说，抛出异常是一个很好的理由，例如，如果参数错误并且您不能继续使用错误的输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T21:29:19.397

由于问题是“一般性和开放性”，我认为如果我们考虑最常用的网络服务，如谷歌、亚马逊，我认为它们都遵循尽可能精确地提供细节的原则，这样任何使用它的人都知道他们做错了什么。

如果您只是抛出异常，那么您的 API 的用户可能会给您带来更多的错误。

因此，总结一下定义众所周知的错误代码并将相同的信息传递给客户/消费者总是一个好主意，这样他们就可以很容易地找出呼叫有什么问题或者我应该做些什么来纠正它。仅出于某种原因您的 api 仅接受特定编码的示例，然后用户会对此感到沮丧。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T21:36:39.583

我建议返回一个详细的错误。由于您使用 Web 服务进行消费，因此并非每个人都会使用相同的技术与之交互。如果您在哪里制作框架，那么我会说使用异常，因为开发人员将使用相同的技术来使用它。在框架级别，这是异常更有用的地方。

**更新（有问题的 API 实际上是一个框架）：** 由于您现在正在谈论使用框架，因此您应该抛出异常，因为客户端必须引用 DLL 并且将了解可能的框架异常。要使用这些库，它必须是符合 CLR 的语言，因此它们应该具有相同的概念、类、异常等......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T21:30:59.793

对于 API，异常总是更好。API 使用者可以使用 catch 块处理各种异常。如果您使用错误消息和错误代码，则要求您的 API 使用者编写 If 语句。下面的代码片段总是比你有 If 条件来检查错误的东西更干净。

因此，从 API 消费者的角度来看，API 抛出异常总是更干净

```
try
{
    yourAPIClass.YourMethod();
}
catch(YourException1 ex)
{
   action1();

}
catch(YourException2 ex)
{
   action1();

} 
```

这是编写和抛出异常的一个很好的指南 [http://blogs.msdn.com/b/kcwalina/archive/2005/03/16/396787.aspx](http://blogs.msdn.com/b/kcwalina/archive/2005/03/16/396787.aspx)

# java - 无法从 AppEngine java 访问 BigQuery

> ID：15669749
> 
> 赞同：2
> 
> 时间：2013-03-27T21:20:44.850
> 
> 标签：java, google-app-engine, google-api, google-bigquery

我有一个与 BigQuery 项目关联的 AppEngine 帐户，但是当我尝试运行查询时，我在响应中收到“拒绝访问”。我已经像这样设置了 AppIdentityCredential：

```
 private static AppIdentityCredential getCredential() throws IOException, GeneralSecurityException {
    return new AppIdentityCredential(BigqueryScopes.BIGQUERY);
  }

  public static Bigquery createAuthorizedClient() throws IOException, GeneralSecurityException {
    return new Bigquery(TRANSPORT, JSON_FACTORY, getCredential());
  } 
```

我还尝试按照此处的指示让我的 AppEngine 帐户成为 BigQuery“团队”的成员：[https ://developers.google.com/bigquery/docs/authorization#service-accounts-appengine](https://developers.google.com/bigquery/docs/authorization#service-accounts-appengine)

但是，Google API 控制台上的团队页面在我的 AppEngine 服务帐户名称旁边显示“已发送邀请。等待响应”。即使我是 AppEngine 和 BigQuery 双方的所有者和唯一的团队成员，我也没有收到邀请（18 小时以上）。这让我认为 BigQuery/AppEngine 服务集成刚刚损坏，但如果有人看到我做错了什么，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:59:43.273

我的猜测是您在控制台项目中的团队选项卡链接到应用程序引擎权限，也就是说，它会显示您希望提供访问权限的邮件地址的待处理。

请尝试在启用 Bigquery API（可选 GS API）的情况下创建新的控制台项目。之后添加您的 appengine 服务帐户 (xxxxxx@appspot.gserviceaccount.com) 并具有可编辑权限。

希望你当然可以做你想做的事。

[另请参阅Michael Manoochehri](https://stackoverflow.com/questions/10524576/bigquery-and-oauth2)的帖子以获取片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:34:59.797

我重试了几次创建新项目并按照+ Gunasekaran的回答建议的不同顺序进行设置。它最终奏效了，但我不确定我能不能再做一次，更不用说解释正确的步骤顺序了。

# asterisk - 使用 Asterisk 动态创建扩展

> ID：15669754
> 
> 赞同：2
> 
> 时间：2013-03-27T21:21:00.413
> 
> 标签：asterisk, agi

我对 Asterisk 很陌生，并且在 CentOS 上使用 AsteriskNOW。

我目前无法确定是否可以动态创建扩展。是否有我可以编写的拨号方案代码来完成此操作，或者我应该使用 AGI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:48:30.400

用于`_.`匹配拨号方案中的任何分机（或者，如果您的动态分机遵循某种模式，则使用该模式），并使用 的值`${EXTEN}`来动态处理呼叫。一个简单的例子：

```
exten => _.,1,Answer()
same => n,SayDigits(${EXTEN})
same => n,Hangup() 
```

你是否使用 AGI 只是你想如何处理呼叫的一个函数——你仍然需要在你的拨号方案中将控制权传递给 AGI，为此你需要像上面那样匹配呼叫。

# android - 是否可以在android中单击带有标签项的弹出菜单？

> ID：15669755
> 
> 赞同：1
> 
> 时间：2013-03-27T21:21:06.643
> 
> 标签：android

我有五个选项卡，第四个用于消息，我希望当用户单击它时首先看到一个弹出菜单，其中包含由列表视图显示的最后 10 条消息，然后通过单击其中任何一个，将打开单击的消息。但是现在我想在单击消息选项卡时制作一个弹出菜单，我知道它可以使用操作栏和简单的按钮，但是在这里我想要一个弹出菜单而不是 Activity，这可能吗？

# silverstripe - 使用核心扩展挂钩的安全 PermissionFailure 重定向

> ID：15669756
> 
> 赞同：2
> 
> 时间：2013-03-27T21:21:07.377
> 
> 标签：silverstripe

我正在使用securefiles 扩展来防止非成员直接访问他们浏览器中的文件。

如果权限检查失败，扩展调用如下方法：

```
 function fileNotAuthorized($body = "") {
    Security::permissionFailure($this, $body);
} 
```

我查看了 Security::PermissionFailure 并注意到在类的末尾有一个扩展钩子：

```
// Audit logging hook
$controller->extend('permissionDenied', $member); 
```

默认情况下，PermissionFailure 方法将用户重定向到管理员登录页面：

```
$controller->redirect(
            Config::inst()->get('Security', 'login_url')
            . "?BackURL=" . urlencode($_SERVER['REQUEST_URI'])
        ); 
```

我希望用户在被拒绝访问文件的权限后被引导到主页或我的自定义登录表单页面。

我尝试通过扩展连接到该方法：

```
class SecurityExtension extends Extension {
function permissionDenied($member) {
    $this->owner->redirect('member-login/login/?BackURL=/thevault/home/');
}
} 
```

然后在我的 _config.php 文件中分配这个扩展名：

```
Object::add_extension('Security', 'SecurityExtension'); 
```

不幸的是，我的代码没有被访问，该方法继续将用户重定向到管理员登录页面。扩展上方的注释和传递的参数似乎表明它是用于记录成员的，所以我不确定是否可以使用这个钩子进行重定向。如果没有，是否有更优雅的解决方案来在 Security::PermissionFailure 上设置自定义重定向？我想避免破解扩展程序。

附带说明一下，我还尝试将 set_login_url 设置为我的自定义登录表单。虽然这确实将非授权用户正确重定向到我的自定义登录表单，但它也将 /admin 重定向到自定义登录表单 - 这是我不想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T11:07:41.030

我今天也面临这个问题。我刚试过

```
Config::inst()->update('Security', 'login_url', '/myCustomLoginFormURL'); 
```

在 mysite/_config.php 中，它可以工作:)

# class - 在 Groovy 脚本中使用不在当前目录中的类

> ID：15669758
> 
> 赞同：2
> 
> 时间：2013-03-27T21:21:26.220
> 
> 标签：class, groovy, load, classpath

MyClass.groovy 有

```
def static a(){ ... } 
```

MyScript.groovy 使用 MyClass，例如：

```
x = MyClass.a() 
```

如果 MyClass.groovy 与 MyScript.groovy 位于同一目录中，则此方法可以正常工作。如果我将 MyClass.groovy 放在 ~/.groovy/lib 或其他属于 CLASSPATH 的目录中，则它不起作用。如果 MyClass.groovy 不在当前目录中，是否有另一种方法告诉 Groovy 在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:48:18.200

使用命令行，`groovy`我们会自动使用 a `GroovyClassLoader`，它能够即时编译脚本。

如果您有`MyClass.groovy`并且`MyScript.groovy`在类路径文件夹中并且它们尚未编译，`GroovyClassLoader`则将自动编译它们。由于当前目录是类路径的一部分，因此当您在当前目录中有两个文件时，它就可以工作。

因此，只要两个文件都包含在类路径中，它就应该可以工作。

关于`./groovy/lib`，如果您在其中放置一个`.jar`包含`MyClass.class`或`MyClass.groovy`文件的文件，则可以使其工作。`GROOVY_HOME/conf/groovy-starter.conf`控制加载的内容：

```
# load required librarieS
load !{groovy.home}/lib/*.jar

# load user specific libraries
load !{user.home}/.groovy/lib/*.jar

# tools.jar for ant tasks
load ${tools.jar} 
```

因此，您可以编辑此配置以添加一个路径，您可以在其中放置您想要自动加载的脚本。例如，

```
# test
load !{user.home}/.groovy/myscripts/ 
```

# c - 在 C99 标准中将 unsigned int 转换为 unsigned char 的行为是什么？

> ID：15669761
> 
> 赞同：2
> 
> 时间：2013-03-27T21:21:32.760
> 
> 标签：c, casting, c99, endianness, type-conversion

例如：

```
#include <stdio.h>

int main(void){
    unsigned int x = 64;
    x += 1023;

    unsigned char y = x;

    printf("%u\n", y);
    return 0;
} 
```

该变量`y`保存`63`我机器上的值。**C99 标准是否保证将unsigned int**转换为**unsigned char**时将存储最低有效字节，或者机器的字节顺序是否会影响转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:27:56.750

该标准说明了如何转换为无符号类型：

> 当整数类型的值转换为_Bool以外的其他整数类型时，如果该值可以用新类型表示，则保持不变。
> 
> 否则，如果新类型是无符号的，则在新类型可以表示的最大值的基础上重复加减一，直到该值在新类型的范围内。

这是一种奇特的说法，如果它不合适，价值就会环绕。因此，在您的情况下**，您将始终在所有机器上获得 63**，除非您`unsigned char`实际上可以存储超过 255 ：它与字节顺序无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:28:31.703

字节顺序对演员来说并不重要。只有 C 值很重要。

# python - Selenium Chrome 找不到开始位置或死机，Firefox 工作正常

> ID：15669762
> 
> 赞同：1
> 
> 时间：2013-03-27T21:21:36.377
> 
> 标签：python, google-chrome, selenium

我安装了 Selenium，也安装了 Chrome。我在linux上使用python绑定。Firefox 工作正常，但我无法让 Chrome 工作。

如果我没有在 chrome 驱动程序中指定参数，我会得到：

```
>>> driver = webdriver.Chrome()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/chrome/webdriver.py", line 60, in __init__
    self.service.start()
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/chrome/service.py", line 68, in start
    and read up at http://code.google.com/p/selenium/wiki/ChromeDriver")
selenium.common.exceptions.WebDriverException: Message: 'ChromeDriver executable needs to be available in the path.                 Please download from http://code.google.com/p/selenium/downloads/list                and read up at http://code.google.com/p/selenium/wiki/ChromeDriver' 
```

然后我读了那个链接。它说 selenium 期望安装 chrome 的地方是`/usr/bin/google-chrome`

我查了一下，果然...

```
$ which google-chrome 
/usr/bin/google-chrome 
```

所以，再试一次，带参数：

```
>>> driver = webdriver.Chrome('/usr/bin/google-chrome') 
```

太好了，Chrome 启动了，所以我知道 webdriver 可以找到它。但是，任务没有完成。它运行并挂起。与 Firefox 不同，运行它不会释放对脚本的控制。我必须按 ctrl-C 才能夺取控制权，并且无​​法使用驱动程序对象。

另一方面，在Firefox中...

```
>>> driver = webdriver.Firefox()
>>> driver.method # etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:26:12.887

你下载了[Chrome驱动](http://code.google.com/p/selenium/wiki/ChromeDriver)吗？

该驱动程序与 google chrome borwser 一起需要。

要进行设置，首先下载适当的预建服务器。确保服务器可以位于您的 PATH 或通过 webdriver.chrome.driver 系统属性指定其位置。

# mysql - 外键约束因没有外键而失败

> ID：15669763
> 
> 赞同：0
> 
> 时间：2013-03-27T21:21:40.253
> 
> 标签：mysql, foreign-keys

我正在尝试执行此查询：

> DROP TABLE 类别`

但我有一个错误：

`#1217 - Cannot delete or update a parent row: a foreign key constraint fails`

我也有一个不同的表`items`，我也不能删除它。这两个表曾经有一个连接（`items`表有一个外键`category_id`），但我删除了连接。目前，根本没有索引（PK 除外）。

如何删除这些表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:27:19.447

您可以使用[`information_schema`](http://dev.mysql.com/doc/refman/5.5/en/key-column-usage-table.html)来找出哪个表正在引用您的`categories`表：

```
select table_Schema,table_name 
from information_schema.key_column_usage 
where referenced_table_name = 'categories'; 
```

# php - 如何在我的自动建议脚本中使用表 B 中的数据从表 A 中检索数据？

> ID：15669764
> 
> 赞同：2
> 
> 时间：2013-03-27T21:21:40.433
> 
> 标签：php, mysql, sql, autosuggest

我正在学习php和mysql，现在遇到了一个问题。

我正在使用自动建议 php/javascript 脚本，它开箱即用，基本上以 html 形式接受用户输入，使用 javascript 将用户输入发送到我的 php 文件，在该文件中，它使用“LIKE”查询命令搜索数据库，然后返回一个 html 列表，其中的列表项包含查询找到的“名称”数据。

**现在我的问题是：**我的数据库中有两个表，wp_terms 和 wp_term_taxonomy（参见下面的插图）。目前，查询搜索“wp_terms”表中的所有条目并选择“name”条目。但我想添加一种过滤器。我希望只获取具有整数“2”作为“父”的条目的名称。

我认为解决这个问题的方法是搜索“wp_term_taxonomy”，将整数“2”作为父项存储条目的“term_id”。然后有另一个查询，它通过“wp_terms”表并输出存储的“term_id”的“名称”。

我不知道这是否是正确的方法。我已经尝试了几天，但没有成功，非常感谢一些帮助。

**数据库表说明：** ![在此处输入图像描述](../Images/cb94daec0249b47e1c9d7e5e44ffba0f.png)

**我的 autosuggest.php 代码。这是神奇的事情发生了：**

```
<?php
   $db_host = 'localhost';
   $db_username = 'user';
   $db_password = 'passw';
   $db_name = 'db';

   $db = new mysqli($db_host, $db_username ,$db_password, $db_name);

    if(!$db) {

        echo 'Could not connect to the database.';
    } else {

        if(isset($_POST['queryString'])) {
            $queryString = $db->real_escape_string($_POST['queryString']);

            if(strlen($queryString) >0) {

                $query = $db->query("SELECT name FROM wp_terms WHERE name LIKE '$queryString%' LIMIT 10");

                if(mysqli_num_rows($query) > 0) {
                    if($query) {
                    echo '<ul>';
                        while ($result = $query ->fetch_object()) {
                            echo '<li onClick="fill(\''.addslashes($result->name).'\');">'.$result->name.'</li>';
                        }       
                    echo '</ul>';

                    } else {
                        echo 'OOPS we had a problem :(';
                    }
                } else {
                    echo '<ul>';
                    echo '<span style="color:#0196E3";>'.$queryString.'</span> no matches found.';
                    echo '</ul>';
                }   
            } else {
                // do nothing
            }
        } else {
            echo 'There should be no direct access to this script!';
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:25:30.587

您需要使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)来完成此操作。

```
SELECT `wp_terms`.`name`
FROM `wp_terms`
INNER JOIN `wp_term_taxonomy`
ON `wp_terms`.`term_id`=`wp_term_taxonomy`.`term_id`
AND `wp_term_taxonomy`.`parent`=2
WHERE `wp_terms`.`name` LIKE '$queryString%'
LIMIT 10 
```

[在这里查看连接如何工作的视觉解释。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

基本上，当您进行连接时，您将根据您使用的连接组合两个表。此查询内部连接基于 的表`term_id`，并确保您只返回`parent`等于 2 的行。

顺便说一句，您确实应该使用[PDO](http://php.net/manual/en/book.pdo.php)和[绑定参数](http://php.net/manual/en/pdostatement.bindparam.php)。[从长远来看](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)， MySQLi会让你失望，我相信它的使用甚至可能会被弃用。

# c++ - C++ 指针已分配-> 错误：被释放的指针未分配

> ID：15669766
> 
> 赞同：0
> 
> 时间：2013-03-27T21:21:46.697
> 
> 标签：c++, pointers, malloc, free, destructor

我有一个析构函数，它检查是否已分配指针，如果已分配，则将其删除：

```
ShadeRec::~ShadeRec(){

    cout << "before deleting ShadeRec" << endl;
    if(material){
        cout << material << endl;
        delete material;
        material = NULL;
    }
    cout << "after deleting ShadeRec" << endl;
} 
```

第一个指针很好，然后在第二个指针上程序给了我错误。

我已经检查了`cout`s 并且指针内部有一些东西，这是有道理的，因为它进入了 if 语句......那为什么它会给我错误？

构造函数：

```
ShadeRec::ShadeRec(World& world)
    :   hit(false),
        material(NULL),
        hitPoint(),
        localHitPoint(),
        normal(),
        ray(),
        depth(0),
        colour(0),
        t(0.0),
        w(world)
{}

ShadeRec::ShadeRec(const ShadeRec& sr)
    :   hit(sr.hit), 
        material(sr.material), 
        hitPoint(sr.hitPoint), 
        localHitPoint(sr.localHitPoint), 
        normal(sr.normal), 
        ray(sr.ray), 
        depth(sr.depth), 
        colour(sr.colour), 
        t(sr.t),
        w(sr.w)
{} 
```

材料操作员=

```
Material& 
Material::operator= (const Material& rhs) {
    if (this == &rhs)
        return (*this);

    return (*this);
} 
```

Matte 是 Material 的子对象：

```
Matte* matte1 = new Matte; 
```

这两个：

```
Matte& operator= (const Matte& rhs);

virtual Material* clone(void) const; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:27:06.307

最有可能的是：

*   `material`如果是成员变量`ShadeRec`
*   您的构造函数`ShadeRec`获取/设置指针
*   copy-ctor 没有定义，或者，如果是，只是复制指针，*而不是*创建它指向的对象的新实例。
*   至少有两个实例`ShadeRec`，也许它被复制为参数或返回值。
*   第一个 dtor 删除对象并将自己的指针设置为`NULL`
*   第二个 dtor 在不同的对象上工作，*它的*指针仍然设置
*   砰！

要使其可见，还要`this`在您的 dtor 中打印，您会看到它是`ShadeRec`.

* * *

编辑后：这是这一行：

```
material(sr.material), 
```

它应该创建对象的副本，而不仅仅是复制普通指针。另一种选择，通常更可取，是使用 a `std::shared_ptr`（如果您可以使用 C++11，否则请查看`boost::shared_ptr`），但请注意， 的副本`ShadeRec`将共享相同的材质实例。

鉴于您到目前为止所显示的内容，请将上面的行从 copy-ctor 替换为

```
material(sr.material->clone()), 
```

看看它是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:26:50.743

**问题**

您没有定义深拷贝构造函数。当您复制`ShadeRec`对象时，指针会被复制，因为它们会导致两个类之间发生冲突。

像这样使用它时：

```
ShadeRec a;
ShadeRec b(a); 
```

两个实例包含相同的地址，这意味着当第一个正确释放其指针时，第二个仍必须释放其指针（已被另一个释放）。

**解决方案示例**

这是一个正确的深拷贝构造函数的例子。考虑`material`是指向动态分配`Material`对象的指针，并且`Material`该类具有正确定义的复制构造函数：

```
ShadeRec::ShadeRec(const ShadeRec& sr)
    :   hit(sr.hit), 
        material(0), // <--- NULL 
        hitPoint(sr.hitPoint), 
        localHitPoint(sr.localHitPoint), 
        normal(sr.normal), 
        ray(sr.ray), 
        depth(sr.depth), 
        colour(sr.colour), 
        t(sr.t),
        w(sr.w)
{
    if (sr.material)
        material = new Material(*(sr.material));
} 
```

这是一个如何编写正确的赋值运算符的示例：

```
Material& 
Material::operator= (const Material& rhs) {
    if (this != &rhs) {
        if (material)
            delete material;
        // make member per member assignments here
        material = new Material(*(rhs.material));
    }
    return (*this);
} 
```

**更多的**

如果可以，您应该使用从 C++11`std::shared_ptr`开始在 STL 上实现的智能指针，或者在 C++11 之前，在 boost 库中以`boost::shared_ptr`.

# perl - Perl - 捕获退出状态和捕获外部命令日志的最佳方法

> ID：15669768
> 
> 赞同：1
> 
> 时间：2013-03-27T21:21:50.360
> 
> 标签：perl, db2

需要运行外部命令，将输出写入日志文件并捕获退出状态

```
`my $cmd = "db2 \"insert into schema.tablea (id, name, city) values (99, 'Micheal', 'London')\" ";
open my $log, ">", "logfile.log";
my $rt = open(OUTPUT,"$cmd 2>&1 | " );
while (<OUTPUT>){
   chomp;
   print $log $_, "\n";
   print $_, "\n";
}
close(OUTPUT);
close($log);
print "Exit status is $rt\n";` 
```

`任何帮助都将不胜感激。`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:15:19.870

`close`因为这种句柄将按`$?`原样设置[`system`](http://perldoc.perl.org/functions/system.html)。

```
die $! if $? == -1;
die "Killed by ".( $? & 0x7F ) if $? & 0x7F;
die "Exited with ".( $? >> 8 ) if $? >> 8; 
```

如果你无论如何都要掏钱，你不妨考虑

```
use String::ShellQuote qw( shell_quote );
system("$cmd 2>&1 | tee ".shell_quote($log)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:02:36.727

你可以使用 Capture::Tiny:

```
 use Capture::Tiny ':all';
    use File::Slurp;
    use autodie;

    ($stdout, $stderr, $exit) = tee sub {
        system("echo hello; exit 15");
    };

    write_file('logfile.log', $stdout);
    print "exit: ", $exit >> 8, "\n"; 
```

“$exit >> 8”的解释见“perldoc -f system”。`

# ravendb - 更新 RavenDB 中的现有文档时调用 _documentSession.Store 有什么缺点吗？

> ID：15669770
> 
> 赞同：5
> 
> 时间：2013-03-27T21:21:58.423
> 
> 标签：ravendb

在 RavenDB 中创建新文档或更新现有文档时，文档说要按照以下方式进行：

```
public string Save(Blogpost post)
{
    Blogpost model;

    if (String.IsNullOrEmpty(post.Id))
    {
        model = new Blogpost();
        _documentSession.Store(model);
    }
    else
    {
        model = _documentSession.Load<Blogpost>(post.SimpleId);
    }

    model.Text = template.Text;
    model.Name = template.Name;
    _documentSession.SaveChanges();

    return model.Id;
} 
```

我团队中的某个人正在做另一种方法来创建新文档或更新现有文档：

```
public string Save(Blogpost post)
{
    _documentSession.Store(post);
    _documentSession.SaveChanges();
    return post.Id;
} 
```

`.Store()`即使文档已经存在，总是调用有什么缺点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T09:00:50.353

Jason，您的代码将始终*覆盖*文档。那是你想做的事情吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T19:36:31.297

如果您正在做一个富客户端应用程序并将完整的**BlogPost**序列化到客户端，如下所示：

```
//GET BlogPost/1
public BlogPost Get(int id)
{
    return _documentSession.Load<BlogPost>(id)
} 
```

然后在用户进行更改后在服务器上重新加载完整的**BlogPost 。**下面的代码似乎比先加载再存储更有效：

```
//POST BlogPost/
public void Post(BlogPost post)
{
    //blog post already has an Id in this example
    _documentSession.Store(post)
    _documentSession.SaveChanges(); 
} 
```

当你做一个

```
documentSession.Load<Blogpost>(id) 
```

RavenDB 返回您*已经拥有*的博客文章的完整 JSON，以便您覆盖它，转身并重新保存，将博客文章的完整 JSON 通过网络再次发送回 Raven。

这意味着当您已经拥有所有数据时执行加载和存储会导致 Raven 的网络流量增加一倍，而我使用 Fiddler 并没有看到额外的好处。

即使您只更改对象的一部分（例如 BlogPost 的名称），RavenDB .NET API 在执行以下操作时仍会通过线路发送完整对象：

*   加载（）
*   进行*一些*更改（但不是对所有内容进行更改）
*   店铺（）
*   保存更改（）

也许 Ayende Rahien 可以启发我们了解我在这里错过的任何事情？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T23:27:19.847

Store 会将此对象存储在一个新文档中。使用会话对象中内置的更改跟踪功能，也就是工作单元模式，就像文档建议的那样。

# split - Jasper-Reports 中的子报表不拆分

> ID：15669773
> 
> 赞同：0
> 
> 时间：2013-03-27T21:22:13.270
> 
> 标签：split, jasper-reports, subreport, page-break

我被 Jasper Reports 中的子报表困住了。我正在使用 Jasper Reports 5.0.1，我在子报表中设计了一个子报表：

```
main-report
- detailband 1 => outer subreport

outer subreport
- detailband 1 => inner subreport
- detailband 2 => summary info 
```

除非内部子报表的内容变得太大而无法放在一页上，否则一切正常。报告没有添加分页符，而是在第 1 页之后结束，甚至不在下一个详细信息中打印摘要信息。

我对可以在 iReport 中设置的所有选项感到有些困惑。我必须使用拆分类型/拉伸类型/位置类型的哪种组合才能使其正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:00:46.130

在玩了几个小时后终于让它工作了。以供参考：

*   所有细节带都需要*拆分类型*=`Stretch`
*   所有子报表组件都需要*Position Type* =`Fix Relative to Top`
*   所有子报表组件都需要*Stretch Type* =`No stretch`
*   所有子报告都需要设置报告属性*忽略分页*= `false`（未选中）

希望这对其他人有帮助

# wordpress - 你如何将你的 wordpress 插件内容放到前端？

> ID：15669774
> 
> 赞同：-1
> 
> 时间：2013-03-27T21:22:16.657
> 
> 标签：wordpress

我刚开始使用 Wordpress 开发并创建了一个非常简单的常见问题解答插件。为了显示它，我想使用一些手风琴风格的 JavaScript 等，所以我需要以某种方式将一些自定义 HTML 放到前端。其次，我想在主导航中添加一个“FAQ”按钮，单击该按钮会显示所有已创建的常见问题解答。

实现这一目标的典型方法是什么？我是否将自定义模板添加到我的插件中？我要创建一个简码吗？一个小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:49:21.400

如果您在插件中完成了这些工作，那么您已经被声明为打印您的需求的函数，因此您可以在模板的页面中调用该函数。

# mysql - 存储体育赛事得分数据的最佳方法是什么？

> ID：15669779
> 
> 赞同：2
> 
> 时间：2013-03-27T21:22:40.833
> 
> 标签：mysql, database, database-design

我对 MySQL（以及整个数据库）相当陌生，所以我不确定存储此类数据的最佳方法。

我想存储体育赛事的统计数据，我们将从冰球开始。每个球员都有他们的职业统计数据，但我也有每场比赛的得分（我们希望在每场比赛结束时向球员提供比赛表）。

我有一个日程表，其中包含每个事件所涉及的团队、日期和游戏 ID。我还有一个玩家表，将他们的身份与玩家 ID 联系起来。

到目前为止，这是我想到的两种方法：

1.  使用存储过程为日程表上的每场比赛创建一个表格，并在该表格中存储所有玩家 ID 和该特定比赛的统计数据。当得分比赛发生时，它会更改当前比赛表格的表格数据和该球员的职业统计表格。

2.  还是创建一个“游戏得分”表并使用 gameid 和 playerid 作为参考将每个得分（进球、点球等）记录到该表上更好？

如果我们预计一个赛季有 100 场比赛，第一种方法可能会很快变得混乱（个人比赛统计数据将在赛季结束时删除，然后保留长期统计数据）

第二种方法可能很快就会得到一个非常长的表，随着它的继续增长，查询可能会很慢。

我倾向于第二种方法，但如果可能的话，我想听听一些意见。或者，也许我对此采取了完全错误的方法，并且希望有人让我走上正确的道路。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:41:06.237

这实际上取决于您希望获得数据的粒度，但我倾向于远离存储过程，而是更喜欢在代码中执行任何业务逻辑，因为它更易于维护。

我将有以下表格：

```
Player -> contains player specific items such as size, right-handed, age, etc
PlayerStats-> contains player id, year (of current season), and aggregated stats... you could +1 to this table for scores and penalties for example

Teams -> contains player id, and venue id, team name
Venue -> Items about the arena such as location, average indoor temperature, etc
Games -> contains a home team id (id from teams table) and away team (id from teams table), venue_id, home_box_score, and away_box_score, game_date
PlayerGames -> contains player id, game id, and the game specific goals... For example any player that was in the game goes in here. If some one scores you +1 their score in this table AND the PlayerStats 
```

一般来说，表格应该是特定事物的属性，因为它可以让您更灵活地加入数据以创建许多不同的报告......

例如，通过我刚刚提供的列表，您可以找出像 fleury 这样的守门员打过 ovechkin 的次数，并显示 ovechkin 在 fleury 上打进多少球的统计数据比较，以及按盒子得分（例如 do fleury）的比赛结果如果 ovechkin 在比赛中打进 2 球或更多球，则赢得或输掉比赛）。

# c# - 在 linq 的两列之间选择最大值

> ID：15669782
> 
> 赞同：3
> 
> 时间：2013-03-27T21:22:46.947
> 
> 标签：c#, asp.net, linq

我在产品表中有 dateSend Column 和 dateEdit Column，我可以使用以下代码选择 max dateSend：

```
(from pro in Products.ToList()
select new { pro.DateSend }).Max(); 
```

但我在 dateSend 和 dateEdit 之间有最大值，请帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T21:25:50.493

```
(from pro in Products.ToList()
let max = Max(pro.DateSend, pro.DateEdit)
select max).Max()

static DateTime? Max(DateTime? a, DateTime? b)
{
    if (!a.HasValue && !b.HasValue) return a;  // doesn't matter

    if (!a.HasValue) return b;  
    if (!b.HasValue) return a;

    return a.Value > b.Value ? a : b;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T21:36:10.550

如果您不反对放弃查询语法，则更简单：

```
DateTime max = Products.Max(p=>p.DateSend > p.DateEdit ? p.DateSend : p.DateEdit); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:25:30.690

```
((from pro in Products.ToList()
select pro.DateSend).Union(
from pro2 in Products.ToList()
select pro.DateEdit
)).Max(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-07T16:50:47.443

**相同的代码，但使用 One LinQ**

```
 (From pro in Products.ToList
    Let max = {pro.DateSend, pro.DateEdit}.Max
    select max).Max 
```

如果 pro 项目不是有效的 DateTime，它将崩溃或返回意外结果。

**其他解决方案（解析产品列表项）：**

```
 (From pro in Products.ToList
    Let DSend as DateTime = Convert.ToDateTime(Iif(ValidDateTime(pro.DateSend), pro.DateSend, DateTime.MinValue))
    Let DEdit as DateTime = Convert.ToDateTime(Iif(ValidDateTime(pro.DateEdit), pro.DateEdit, DateTime.MinValue))
    Let MaxDate as DateTime= {DSend, DEdit}.Max
    select MaxDate).Max

private function ValidDateTime(ByVal Dat as Object) as Boolean
   if Dat Is Nothing OrElse IsDbNull(Dat) OrElse String.IsNullOrEmpty(Dat)  then
      return false
   end if

   return true
end function 
```

您可以将 ValidDateTime 替换为“Iif”。

其他示例返回 Double 项目的最大值，但在个性化对象（MyObject）中，项目是字符串类型。

```
 (From Item as MyObject in MyListOfObject
    Let Frec as Double = Convert.ToDouble(Iif(String.IsNullOrEmpty(Item.Frecuency),0,Item.Frecuency))
    Let Pot as Double = Convert.ToDouble(Iif(String.IsNullOrEmpty(Item.Power),0,Item.Power))
    Let max as Double= {Frec, Pot}.Max
    select max).Max 
```

**回顾**

1.  单独声明列项。解析它（如果需要）
2.  创建一个项目以存储行的最大值（所有列）
3.  创建一个数组，放入所有声明的项目并将数组分配给之前声明的项目（在步骤2中创建的项目）
4.  在数组末尾附加 Max 属性，如下所示：{Item1, Item2,...}.Max
5.  Create Select fr 返回 Max 项
6.  最后附加 linq Max 属性。(MyLinQ).Max

我希望这段代码对某人有所帮助。对不起我的英语不好。

# groovy - (Jira) Script Runner getCustomFieldValue ( 获取不带 html 元素的值)

> ID：15669787
> 
> 赞同：1
> 
> 时间：2013-03-27T21:23:00.953
> 
> 标签：groovy, jira-plugin

我想使用 Groovy Script Runner 获取自定义 Jira 字段的值。但是当我在 Script Runner 中运行以下脚本时：

```
import com.atlassian.jira.ComponentManager
import com.atlassian.jira.issue.CustomFieldManager
import com.atlassian.jira.issue.fields.CustomField

ComponentManager componentManager = ComponentManager.getInstance()
CustomFieldManager customFieldManager = componentManager.getCustomFieldManager()
CustomField cf= customFieldManager.getCustomFieldObject("customfield_10301") 
issue = componentManager.getIssueManager().getIssueObject("PM-72")

def value = issue.getCustomFieldValue(cf) 
```

结果是：

```
<img src="/images/icons/priority_critical.gif"/> High 
```

我怎样才能得到`High`没有 html`<img>`元素的？

* * *

**更新：**在@doelleri 的帮助下，我发现将脚本中的最后一行更改为此行：

```
def value =  issue.getCustomFieldValue(cf).getValue().tokenize().last() 
```

...但这确实感觉像是一种黑客行为。是不是有一些内置的方法可以做到这一点？例如，如果这不是自定义字段（例如“优先级”），则代码将是：

```
def value =  issue.getPriority().getString("name"); 
```

自定义字段有可比性吗？

# mysql - 优化生成的字符串以存储到数据库中

> ID：15669788
> 
> 赞同：0
> 
> 时间：2013-03-27T21:23:05.327
> 
> 标签：mysql, database, sqlite, postgresql, indexing

我有一个 64 位整数时间戳和一个 Sting 用户名，它们组合成一个字符串并最终存储到一个数据库列中。撇开为什么我不能将它们存储在具有适当类型的单独列中，我的问题是如何组合它们以从底层数据库中获得更好的性能。那将是 sqlite、PostgreSQL 或 MySQL，还不确定。

我想象他们将使用 b-trees 作为索引，并且像 (timestamp-username) 这样连接会很糟糕，因为时间戳通常总是会进行，而树需要经常平衡。username-timestamp 应该要好得多，但每个用户记录仍然会随着每个新条目而增加。我正在考虑也将时间戳与位的相反顺序。

还有什么我可以做的吗？一些聪明的异或什么的？什么是*合理*的最佳模式？数据将永远通过请求生成的确切字符串来访问，没有范围等。

唯一的要求是在生成的字符串和源数据之间以两种方式进行相对快速的转换。

更新：伙计们，我正在获取信息，哪种字符串更适合作为数据库的主键存储（sqlite、mysql和postgresql之一）。也许答案是没关系，或者取决于数据库引擎。我正在使用的架构或缓存解决方案没有特别的问题。我只是问是否有任何改进的空间以及如何改进。我会很感激一些关于主题的答案。

UPDATE2：对我来说，很好的答案仍然不确定： [增量列是否会使列上的 b-tree 索引不平衡？](https://stackoverflow.com/questions/10901558/does-incremented-column-makes-the-b-tree-index-on-the-column-unbalanced) [https://stackoverflow.com/a/2362693/520567](https://stackoverflow.com/a/2362693/520567)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:39:53.843

您的问题存在矛盾，您指定不能拆分它们并将它们存储在单独的列中，但是您正在谈论分别索引这两个部分 - 如果不拆分它们，您将无法做到这一点。

我可以看到你真的有两个选择：

1.  将它们存储在单独的列中
2.  散列输出以降低索引内存占用

理想情况下，如果您总是以相同的顺序一起搜索它们，则应该将它们存储在两列中并创建一个复合索引。在这种情况下，如果不先提供更多信息，就很难给出准确的建议 - 但是，如果您按用户查询，通常用户名，时间戳将是合乎逻辑的，或者如果您想按时间戳查询，则将其反转。如果您需要搜索一个或另一个，您还可以在每列上创建一个索引。

散列生成的字符串

```
INSERT INTO table (crc_hash_column, value_column_name)
values (CRC32(@generated_value), @generated_value) 
```

会将大小减小到 32 位整数（每行只有 4 字节的索引），远小于所需的等效 VARCHAR 或 CHAR 索引空间。

如果你采用这种方法，那么你应该采取措施避免冲突，由于生日悖论它会发生，并且随着数据集的增长更有可能发生。即使有冲突，考虑到索引的大小，额外的过滤仍然会产生比替代方案更好的性能。

```
SELECT * FROM table
WHERE crc_hash_column = CRC32(@search_value) 
AND value_column_name = @searchvalue 
```

使用散列会导致更多的 CPU 周期 - 但 CRC32 散列非常快，因此即使您每次搜索时都必须重新散列，但对于索引大量数据所带来的好处而言，这项额外工作是微不足道的。

一般来说，我更喜欢第一个选项，但在不了解您的用例的情况下几乎不可能推荐。

您应该分析这两个选项，看看它们是否符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:24:49.680

你说你不能把它们放在单独的列中（你甚至不能设置一个具有 1:1 关系的新表/使用触发器将数据镜像到物化视图/用更正表上的视图替换现有表结构????!!!!) 意味着任何解决方案都将是一个丑陋的黑客。

是的，数据变化的多少以及它的结构将影响更新的效率。然而，索引的目的是加快检索速度——您没有向我们提供有关如何访问数据/如何更改数据的信息。

> 我正在考虑也将时间戳与位的相反顺序

为什么？这更有可能加速索引碎片而不是减少它。

MariaDB 支持虚拟列 - 以及虚拟列上的索引，因此您可以做一些愚蠢的事情，例如将规范化规则扔出窗外 - 但如果您无法解决架构中的一个小问题，那么替换 DBMS 可能不会是非常实用的解决方案。

坦率地说，如果花时间和金钱为问题开发一个糟糕的解决方案是值得的，而这个解决方案的成本已经与一个正确的解决方案一样高，并且可能会产生未来的成本，那么选择糟糕的解决方案就是浪费时间和金钱。

# c++ - 当我在没有调试的情况下运行时，Visual Studio C++ 程序不起作用，但在调试下运行时程序运行良好？

> ID：15669792
> 
> 赞同：-1
> 
> 时间：2013-03-27T21:23:34.293
> 
> 标签：c++, visual-studio-2010

我在没有调试的情况下运行该程序时收到此错误，但在调试下运行它时我没有收到任何错误。

* * *

```
Debug Assertion Failed!

Program: C:\Users\Desktop\130913\nevolver\Debug\nevolver.exe
 File: f:\dd\vctools\crt_bld\self_x86\crt\src\fscanf.c
 Line: 52

Expression: (stream!=NULL)

For information on how your program can cause an assertion failure, see the Visual C++ documentation on asserts.

(Press Retry to debug the application) 
```

* * *

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:26:11.020

该错误可能正是它所说的......您显然正在将一个 NULL 流传递给`fscanf`.

您应该检查您对 的调用`fscanf`，并验证您*认为*正在读取的文件指针是否不为 NULL。

# javascript - 为什么网页会在 Websocket.onmessage 上重新加载

> ID：15669798
> 
> 赞同：0
> 
> 时间：2013-03-27T21:24:00.493
> 
> 标签：javascript, websocket

我正在编写一个基于 websocket 的页面，它应该发送一条消息，然后获取一堆消息，更新 UI 并等待下一个用户操作。

然而，似乎每条传入的消息（即页面上的多个 onmessage）都会撤消前一个消息所做的事情，这不是我想要的。

我添加了警报，似乎在每次 send() 的接收中，都调用了 $document.ready() 和 websocket.onload（尽管发送到同一发送的多条消息不会这样做）。有什么办法可以防止这种情况发生，还是我必须维护一个本地数据结构？或者我可能需要在每条消息上发送整个数据体？

```
<script language="javascript" type="text/javascript">
<!--
var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket;
var wsUri = "ws://localhost:9000/nodeWS";

window.addEventListener("load", init, false);

function init() {
  alert("init")
  $("#addNodeForm").submit(function(evt){
    addNode();
  }); 
  testWebSocket();
}

function testWebSocket() {
  /*var createSocket = new WS("@routes.Nodes.watchNodeCollection");*/
  if ('WebSocket' in window) {
    try{
      websocket = new WebSocket(wsUri);
  /*      alert("WebSocket created");*/
    } catch (e) {
      alert("exception creating WebSocket: " + e);
    }
  }
  else if ('MozWebSocket' in window) {
    try{
      websocket = new MozWebSocket(wsUri);
  /*      alert("MozWebSocket created");*/
    } catch (e) {
      alert("exception creating MozWebSocket: " + e);
    }
  }
  else {

    alert("no websocket support found");
  }   
  /*  alert("websocket created");*/
    websocket.onopen = function(evt) {
      alert("onopen")
      getAllNodes();
    };
    websocket.onclose = function(evt) { 
      onClose(evt);
      alert("onClose ended");
    };
  websocket.onmessage = receive
}

var receive = function onMessage(evt) { 
  evt.stopPropagation()
  evt.preventDefault()
  var data = JSON.parse(evt.data);

  if (data.error){   document.getElementById("messageBox").removeClass().addClass("errorbox").innerHTML(data.error).fadeIn(2000).fadeOut(4000);
  } 
  if (data.message){
document.getElementById("messageBox").removeClass().addClass("confirmbox").innerHTML(data.message)/*.fadeIn(2000).fadeOut(4000);
  }
  if (data._id) { 
      addNodeRowToTable(data.doc);
  }
}
function addNodeRowToTable(data){
...add node to table...
}

function addNode() {
  var address = document.getElementById("address")

  websocket.send(JSON.stringify({
    type : "addNode",
    address : address.value.length>0 ? address.value : null
  }))      
}

function getAllNodes(){
  websocket.send(JSON.stringify(
      {
      type : "getAllNode"
    }
    )) 
}

var handleReturnKey = function(e) {
  if(e.charCode == 13 || e.keyCode == 13) {
    e.preventDefault()
    addNode()
    return false;
  }
} 
```

# java-me - 在 J2ME 中更改 TextField 的宽度和字体？

> ID：15669799
> 
> 赞同：1
> 
> 时间：2013-03-27T21:24:03.967
> 
> 标签：java-me, textfield, midp, lcdui

首先我要强调的是，我说的是 J2ME 中的 TextField (javax.microedition.lcdui.TextField)，而不是 AWT (java.awt.TextField) 中的 TextField。

你能告诉我这在 J2ME 中是否可行？我想更改 TextField 的字体（字体系列、字体大小、字体颜色），我还想更改它在表单上呈现的宽度。我尝试使用 setMaxSize() 但这也限制了 TextField 可以包含的字符数。我想要的是在不限制字符数的情况下更改 TextField 的宽度。

如果这些都做不到，我不认为程序员可以让他们的 J2ME 应用程序看起来最好。或者至少他们会有另一个支持这些功能的控件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:12:16.197

如果你想自定义 J2ME 中的 TextField 等组件，我强烈建议你使用[LWUIT](http://www.oracle.com/technetwork/java/javame/javamobile/download/lwuit/index.html) (Light Weight User Interface Toolkit)。您可以通过 LWUIT 为 Java 手机创建良好的 UI，并根据需要自定义它们。顾名思义，它真的很轻。

在 LWUIT 中自定义 TextField 的简单代码如下：

```
TextField myTextField = new TextField();
myTextField.getStyle().setPadding(9,9,9,9); // Top , Left , Bottom , Right padding
myTextField.getStyle().setMargin(7,7,7,7);  // Top , Left , Bottom , Right padding
myTextField.getStyle().setFont(*use the font whatever you wish*); 
```

注意：请参阅 .RES 文件和资源编辑器，这对更改应用程序的外观和感觉很有帮助。您可以将字体导入 .RES 文件并在代码中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:16:26.353

您不能在 Java ME 中更改 TextField 的宽度和字体，此类的[API Javadocs与字体没有任何关系（实际上，这些文档中没有提到字体这个词）。](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/TextField.html#setInitialInputMode%28java.lang.String%29)

> 如果这些都做不到，我不认为程序员可以让他们的 J2ME 应用程序看起来最好。

你是对的，但这个限制的原因是 TextField 和其他高级 UI API 旨在允许程序员编写简单的高度可移植的代码（将在大/小屏幕上使用什么字体的细节留给系统）。

[这在lcdui 包 API 文档](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/package-summary.html)中得到了很好的解释，在**MIDP UI API 的结构**部分：

> 高级 API 专为客户端部分在 MID 上运行的业务应用程序而设计。对于这些应用程序，跨设备的可移植性很重要。为了实现这种可移植性，高级 API 采用了高级抽象，并且对外观和感觉的控制非常少。这种抽象进一步体现在以下方面：
> 
> *   实际绘制到 MID 的显示是由实现执行的。应用程序不定义组件的视觉外观（例如，形状、颜色、字体等）。
> *   导航、滚动和其他原始交互由实现封装，应用程序不知道这些交互。
> *   应用程序无法访问具体的输入设备，例如特定的单个键。
> 
> 换句话说，在使用高层 API 时，假设底层实现会对设备的硬件和原生 UI 风格做必要的适配……

关于字体，高级 UI API 类的[选择](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Choice.html)实现，例如`List`并`ChoiceGroup`具有一些功能，但这些功能非常有限，如果您有兴趣，请查阅 API 文档以获取详细信息。

* * *

为了更全面地访问您要查找的功能，请研究 API 的“低级”部分，如上面提到的包文档中所述：

> 此 API 专为需要精确放置和控制图形元素以及访问低级输入事件的应用程序而设计。一些应用程序还需要访问特殊的、特定于设备的功能... 编写到低级 API 的应用程序不能保证是可移植的，因为低级 API 提供了访问特定设备特定细节的方法...

特别是，[Graphics](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Graphics.html)类具有获取和设置字体的方法 - 分别被调用，`getFont`并且`setFont`.

请注意，Graphics 提供的功能可以使用[CustomItem API](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/CustomItem.html) “嵌入”到 Form 中。

# curl - 使用 curl 和 php 检索 google 文档演示文稿时遇到问题

> ID：15669805
> 
> 赞同：0
> 
> 时间：2013-03-27T21:24:26.670
> 
> 标签：curl, google-docs, google-docs-api, google-drive-api

当我尝试通过 php 使用 curl 访问已发布的演示文稿时，就会出现问题。普通文档可以通过 curl 访问，但不能通过演示文稿访问。我正在寻找使这种检索文档的方法起作用或找到替代方法。谷歌支持没有给我答案，建议堆栈溢出。

起初，尝试通过 curl 访问演示文稿给了我这个错误：

```
Secure Connection Failed

An error occurred during a connection to develop.willf-rtb-dev.switchsoft.com.

SSL received a record that exceeded the maximum permissible length.

(Error code: ssl_error_rx_record_too_long) 
```

我在我的开发框中为我的测试域添加了一个虚拟主机以启用 ssl。此虚拟主机以以下行开头：

```
<VirtualHost *:443>
    SSLEngine on
    SSLCertificateFile    /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key 
```

添加此虚拟主机后，尝试通过 curl 访问演示文稿会将我重定向到此页面：

[https://support.google.com/accounts/bin/answer.py?hl=en&answer=32050](https://support.google.com/accounts/bin/answer.py?hl=en&answer=32050)（由于我的 cookie 设置有问题，告诉我清除我的 cookie）

我的 curl 代码也写了一个 cookie 文件——在尝试通过 curl 访问演示文稿后，该文件的内容如下。清除文件的内容没有好处，告诉 curl 不要写入这个文件也没有好处。

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

#HttpOnly_.google.com    TRUE    /    FALSE    1380146248    NID    67=q47Xyj4FU2_uuYosZzvr_50-o2q9qD0PG8avG3oTg0s2qlmjzGFqT0UhWpwLOEt9TWqP1jf77npfX9OBebQ8fqn6ID7b4b-jBoFbyEbCFkrQhcBIKekLS1fQI-mLw3Pg 
```

我的 php curl 代码如下所示：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_SSLVERSION,3);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,3);

$cookieFile = TMP_DIRECTORY . '/curlcookies.txt';
if (!file_exists($cookieFile)) {
file_put_contents($cookieFile, '');
}
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookieFile);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookieFile);

curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (X11; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.4");
curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
curl_setopt($ch, CURLOPT_FAILONERROR, 1);

$result = curl_exec($ch);
curl_close($ch);
return $result; 
```

我尝试使用这种风格的 url 来下载演示文稿的 html：

[https://docs.google.com/feeds/download/presentations/Export?exportFormat=html&format=html&id=1RDANgsJWv841KvQUROKhyikTuwQGXC5Q1XFvXDwAfMw](https://docs.google.com/feeds/download/presentations/Export?exportFormat=html&format=html&id=1RDANgsJWv841KvQUROKhyikTuwQGXC5Q1XFvXDwAfMw)

这需要我登录，当我签名时它给了我这个错误：

```
Sorry, the file you have requested does not exist.

Please check the address and try again. 
```

使用 exportFormat=pdf 时我没有收到此错误——只要我登录了它就可以工作，但这不是我需要的。

我还没有尝试使用它，但我在这里找到了一些可能值得研究的 php 代码：

[https://developers.google.com/drive/manage-downloads](https://developers.google.com/drive/manage-downloads)

任何人都可以在这个主题上给我的任何提示或帮助将不胜感激。

此致

威尔·费雷尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:19:46.057

我认为问题在于您尝试将其导出为 HTML 的导出语句

[https://docs.google.com/feeds/download/presentations/Export?exportFormat=html&format=html&id=1RDANgsJWv841KvQUROKhyikTuwQGXC5Q1XFvXDwAfMw](https://docs.google.com/feeds/download/presentations/Export?exportFormat=html&format=html&id=1RDANgsJWv841KvQUROKhyikTuwQGXC5Q1XFvXDwAfMw)

请注意，在 google 演示前端，它只允许您导出为 pdf、pptx、txt、jpg、png、svg。

[https://developers.google.com/google-apps/documents-list/v2/reference#ExportParameters](https://developers.google.com/google-apps/documents-list/v2/reference#ExportParameters)

在 google 文档中，它还指出演示文稿的值仅如下：“pdf”、“png”和“ppt”。

# ios - 显示 UIWebView 时如何防止初始白色闪烁？

> ID：15669809
> 
> 赞同：32
> 
> 时间：2013-03-27T21:24:36.613
> 
> 标签：ios, cocoa-touch

我使用 a`UIWebView`通过显示捆绑的 HTML 文件来显示“关于”屏幕。我的应用程序的视图层次结构是：`UITabBarController`// `UIViewController`。`UIWebView`

问题是 HTML 页面的背景很暗，第一次点击选项卡时，在显示 Web 视图之前会短暂看到白色背景。我尝试设置的背景颜色`UIWebView`，但这并不能解决问题。无论我将内容加载到`viewDidLoad`或中，都会出现问题`viewWillAppear`。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-27T21:56:05.320

迅速：

```
webView.isOpaque = false
webView.backgroundColor = UIColor.clear 
```

目标-C：

```
webView.opaque = NO;
webView.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-22T12:17:51.157

// 加载 index.html

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"www"]];
self.webview.delegate = self;

self.webview.alpha = 0; // flicker fix 

[self.webview loadRequest:[NSURLRequest requestWithURL:url]]; 
```

加载后将此添加到委托

```
// flicker fix

- (void)webViewDidFinishLoad:(UIWebView *)webView  
{
    [UIView beginAnimations:nil context:nil];

    [UIView setAnimationDuration:0.30];

    self.webview.alpha = 1;

    [UIView commitAnimations];

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-06T10:54:25.920

我也遇到了同样的问题，我找到的解决方法如下。

```
-(void)viewDidLoad {
  [super viewDidLoad];

  [_webView setOpaque:NO];
  _webView.backgroundColor = [UIColor clearColor];
  self.webView.hidden = YES;
}

-(void)webViewDidFinishLoad:(UIWebView *)webView {

 //...........................

 self.webView.hidden = NO;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-21T14:43:46.570

通过添加 webView 设置修复：

```
myWebView.setBackgroundColor(0x00000000); 
```

# ruby - Ruby 2.0 无法在 OS X 上提取源代码

> ID：15669811
> 
> 赞同：1
> 
> 时间：2013-03-27T21:24:47.520
> 
> 标签：ruby, macos, rvm

我正在尝试使用以下步骤在我的 Mac OS X 10.8 上安装 Ruby 2.0 [http://www.interworks.com/blogs/ckaukis/2013/03/05/installing-ruby-200-rvm-and-homebrew-mac -os-x-108-山狮](http://www.interworks.com/blogs/ckaukis/2013/03/05/installing-ruby-200-rvm-and-homebrew-mac-os-x-108-mountain-lion)

所有步骤都成功完成，直到最后。我跑之后

`rvm install 2.0.0`

它给了我以下输出：

```
/Users/aaron/.rvm/src/ruby-2.0.0-p0 has already been removed.
/Users/aaron/.rvm/rubies/ruby-2.0.0-p0 has already been removed.
Searching for binary rubies, this might take some time. No binary
rubies available for: osx/10.8/x86_64/ruby-2.0.0-p0\. Continuing with
compilation. Please read 'rvm mount' to get more information on binary
rubies. Installing requirements for osx, might require sudo password.
Already up-to-date. Certificates in '/usr/local/etc/openssl/cert.pem'
already are up to date. Installing Ruby from source to:
/Users/aaron/.rvm/rubies/ruby-2.0.0-p0, this may take a while
depending on your cpu(s)... ruby-2.0.0-p0 - #downloading
ruby-2.0.0-p0, this may take a while depending on your connection...
tee: /Users/aaron/.rvm/log/ruby-2.0.0-p0/extract.log: Permission
denied tee: /Users/aaron/.rvm/log/ruby-2.0.0-p0/extract.log:
Permission denied ruby-2.0.0-p0 - #extracting ruby-2.0.0-p0 to
/Users/aaron/.rvm/src/ruby-2.0.0-p0 Error running
'__rvm_package_extract
/Users/aaron/.rvm/archives/ruby-2.0.0-p0.tar.bz2
/Users/aaron/.rvm/tmp/rvm_src_856', please read
/Users/aaron/.rvm/log/ruby-2.0.0-p0/extract.log There has been an
error while trying to extract the source. Halting the installation.
There has been an error fetching the ruby interpreter.  Halting the
installation. 
```

看起来它无法提取源。有什么建议可以让我正常工作吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:03:40.017

您可能有权限问题，请尝试：

```
sudo chown -R $USER: $rvm_path 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:39:26.360

再次尝试`rvm get head`运行安装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T11:23:00.450

这是一个已知问题。确保您拥有来自[https://developer.apple.com/downloads](https://developer.apple.com/downloads)的最新命令行工具并运行 rvm install ruby​​ --with-gcc=clang

我基本上只是从[这里重复答案](https://stackoverflow.com/questions/15643486/cant-install-ruby-2-0-0-p0-with-rvm-error-running-make-j8)

# ios - 添加 UIImageView 并处理大小/适合

> ID：15669815
> 
> 赞同：0
> 
> 时间：2013-03-27T21:24:58.530
> 
> 标签：ios, ios5, uiview, uiimageview, uiimage

我创建一个视图如下：

```
// Create sub view for Logo
logoView =[[UIView alloc] initWithFrame:CGRectMake(0,0,screen.size.width,(screen.size.height - 230))];
[logoView setBackgroundColor:[UIColor blueColor]];
UIImageView *bgLogoView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bg-welcomeLogoView.png"]];
[logoView addSubview:bgLogoView];
//NSLog(@"the button view height is %f",(screen.size.height - 230));
logoView.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

我有一个用于 logoView 的设置框。它的高度为 230 (iphone4<) 和 318(iphone5)。我为这个块创建了一个 640x460px 的图像。

如何使此图像适合视图。目前，它将完整尺寸的图像加载到实际上只有一半大小的块中......图像被制作成两倍大小以提高质量。我正在运行 ios5 的 iphone4 上进行测试。

我确信有一两行遗漏了以某种方式使图像适合周围视图的视图边界。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:36:28.550

您需要重置图像视图的框架。正如你所拥有的，图像视图的框架将是图像的大小。另外，设置图像视图的`contentMode`. 最后，设置图像视图的`autoresizingMask`.

```
logoView =[[UIView alloc] initWithFrame:CGRectMake(0,0,screen.size.width,(screen.size.height - 230))];
[logoView setBackgroundColor:[UIColor blueColor]];
UIImageView *bgLogoView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bg-welcomeLogoView.png"]];
bgLogoView.frame = logoView.bounds; // reset the frame
bgLogoView.contentMode = UIViewContentModeScaleAspectFit; // or other desired mode
bgLogoView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
[logoView addSubview:bgLogoView];
//NSLog(@"the button view height is %f",(screen.size.height - 230));
logoView.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:30:52.183

就像是

```
bgLogoView.contentMode = UIViewContentModeScaleAspectFit; 
```

查看 UIView 的 contentMode 属性。可能的值是：

```
typedef enum {
   UIViewContentModeScaleToFill,
   UIViewContentModeScaleAspectFit,
   UIViewContentModeScaleAspectFill,
   UIViewContentModeRedraw,
   UIViewContentModeCenter,
   UIViewContentModeTop,
   UIViewContentModeBottom,
   UIViewContentModeLeft,
   UIViewContentModeRight,
   UIViewContentModeTopLeft,
   UIViewContentModeTopRight,
   UIViewContentModeBottomLeft,
   UIViewContentModeBottomRight,
} UIViewContentMode; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:32:26.923

试试这个：

```
UIImageView *bgImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 230)];
NSString *bgFilePath = [[NSBundle mainBundle] pathForResource:@"bg-welcomeLogoView"
                                                       ofType:@"png"];
UIImage *img = [[UIImage alloc] initWithContentsOfFile:bgFilePath];
[bgImageView setImage:img];
[logoView addSubview:bgImageView]; 
```

您可以在 initWithFrame 中更改 UIImageView 的大小：

# css - 列表 's 分成两列并且具有自动/等宽

> ID：15669817
> 
> 赞同：1
> 
> 时间：2013-03-27T21:25:03.860
> 
> 标签：css, multiple-columns

如果我有一个生成`<li>`的 s 列表，我将它们分成[这样](http://jsfiddle.net/HeyVian/kr9PE/)的列，那么有可能以某种方式让列的宽度与最宽的 s 一样宽`<li>`。

我有一个下拉导航，目前我在`<li>`s 上只有一个固定宽度，但是对于像“常见问题解答”这样的较小导航项目，客户要求我删除很多“空白空间”。

问题是代码是为我生成的，所以我不能添加任何额外的标记。我的经验告诉我这是不可能的，但如果有人能证明我错了，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:35:36.210

这是使用 jQuery 的解决方案：http: [//jsfiddle.net/kr9PE/2/](http://jsfiddle.net/kr9PE/2/)。

它循环遍历所有`<li>`元素，节省最宽的宽度。然后它将该宽度（加上两侧的填充）应用于所有`<li>`元素。

```
var items = $('#attempt ul').children();
var widestItemWidth = 0;
var padding = 10;

items.each(function() {
    var thisItemWidth = $(this).width();

    console.log($(this));

    if (thisItemWidth > widestItemWidth) {
        widestItemWidth = thisItemWidth;
    }
});

items.css('width', widestItemWidth + padding + 'px'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:27:08.483

使用 CSS，使`UL`宽度是 的两倍，`LI`并`float:left;`在`LI`.

# javascript - MongoDB拒绝大容量（10000）插入/写入的连接

> ID：15669818
> 
> 赞同：1
> 
> 时间：2013-03-27T21:25:09.127
> 
> 标签：javascript, node.js, mongodb

我们通过 Node.js 应用程序插入数据并使用[node-mongodb-native](https://github.com/mongodb/node-mongodb-native)库连接到 mongodb。Mongo DB 共有 5 个分片。节点和 mongos 实例包含在具有 14980MB RAM 的四核 AWS 实例上。两个分片和配置服务器包含在一个单核实例中，其余三个分片位于具有单核处理器的不同实例上。

我们可以使用 Node.js 测试脚本在 9 秒内有效地同时插入 1000 条记录。

对于 10000 个并发插入，其中大约 2000 个失败并返回以下错误消息：

```
 [Error: failed to connect to [ip address of mongos]] 
```

在这 10000 次插入过程中，前 5000 或 6000 次插入是成功的，没有错误。在此期间，CPU 使用率保持相对较低（13% 的使用率）。然后一个核心上的 CPU 跳到 75% 左右，MongoDB 抛出错误消息拒绝连接。在一些插入失败之后，一些写入间歇性地成功。

我们在 linux 上将 ulimit -n 设置为 20000。我们在 Node.js api 的插入函数中传递了 poolSize=5 参数。

```
var responseHandlers = require('./responseHandlers')
    ,schemaValidation = require('./schemaValidation')
    ,mongoDb = require('mongodb')
    ,md5 = require('MD5')
    ,ObjectID = require('mongodb').ObjectID;

function insert(data, timestamp, response) {
  // validating the data to be inserted
  schemaValidation.validate(data, function(err) {
    if(err) {
      console.log(err);
      responseHandlers.invalidRequest(response, 2); 
    } else {
      //console.log("opening db..");
      server = new mongoDb.Server(mongoConfig.host,mongoConfig.port,{'auto_reconnect': true, 'poolSize': 5});
      db = new mongoDb.Db(mongoConfig.database, server, {w: 1});
      db.open(function(err, db) {
        if(err) { 
          console.log(err);
          responseHandlers.invalidRequest(response, 2); 
        } else {
          db.collection(mongoConfig.collection, function(err, collection) {
            if(err) {
              console.log(err);
              responseHandlers.invalidRequest(response, 2); 
            } else {
              //going to instantiate document fields
              var time = new Date().getTime(),
              oid = new ObjectID(),
              hash = md5(oid.toHexString()),
                            obj = {'data_utc' : timestamp, 'server_utc' : time, '_id' : oid,    'hash' : hash}; 
                            obj.data = data;
              //inserting..
              collection.insert(obj, {w:1}, function(err, result) {
                if(err) {
                  console.log(err);
                  responseHandlers.invalidRequest(response, 2); 
                } else {
                  console.log('Insert successful');
                  responseHandlers.validRequest(response, false, result);
                }   
              db.close();
              }); 
            }   
          }); 
        }   
      });   
    }   
  }); 
}   
exports.insert = insert; 
```

谁能帮忙解释为什么它会拒绝连接，无法插入？为什么它对一部分插入有效，然后在中途失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-08T15:22:59.910

您似乎在循环中创建了太多连接。最好的方法是创建一个 mongoDB 客户端的单例实例，并为每次更新使用相同的对象，并在集合中插入。MongoDB 对连接池有限制，默认大小为 5 个连接。之后的任何尝试都将简单地拒绝服务器，但是您可以增加默认连接池大小，但这不是一个好主意。
另一点需要注意的是 MongoDB：在执行并发写入的线程数量有限的情况下表现更好。对于集合中的写入（使用最新的驱动程序 3.2），mongoDB 对集合执行行级锁定。它一次获取 1000 条记录的锁，并随着记录的更新而滑动锁。所以如果你把更多的并发线程做并行操作，它最终会等待锁被释放。最好使用 2 个线程进行写入，或者最多使用 4 个，块大小为 20k 或 40K。

您可以考虑实现受控读写的生产者/消费者模式。

有关详细信息，请在此处阅读：[https ://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html](https://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T20:17:34.690

要解决此问题，您应该观察在 mongod 控制台中打开的连接数。根据您提供的代码示例，您可能会在每次插入时打开一个新的 mongodb 连接。要纠正此问题，请尝试将“服务器”的实例化移动到您用来调用此函数的控制循环范围之外。

# vb.net - .EXE 在哪里？

> ID：15669820
> 
> 赞同：-1
> 
> 时间：2013-03-27T21:25:13.100
> 
> 标签：vb.net

我已经使用 Vb10 中的“发布”过程部署了一个应用程序。此应用程序需要一些用户可以修改的配置参数，因此我将它们放在应用程序读取的 .INI 文件中。问题是我需要将这个 .INI 文件放在与 .EXE 相同的文件夹中才能让它工作。现在我无法在我安装了应用程序的 PC 中找到 .EXE 的位置（它工作正常，除了没有找到 .INI）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:30:27.013

解决此问题的最佳方法是将 .ini 文件与您的应用程序一起部署。这可以通过更改 Visual Studio 中的一些属性来自动化。

*   右键单击ini文件并选择属性
*   将“构建操作”设置为“内容”
*   将“复制到输出目录”设置为“始终复制”

现在，当您发布时，ini 文件将与它一起复制

![在此处输入图像描述](../Images/26e935f6c2d7debd8a26b8122be87ae2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:26:47.403

这将告诉您当前正在执行的程序集的完整路径名：

```
System.Reflection.Assembly.GetExecutingAssembly().Location 
```

# sql - 如何在 SQL Server 中为仅包含部分单词的表中的属性编写 SQL 查询

> ID：15669826
> 
> 赞同：0
> 
> 时间：2013-03-27T21:25:43.470
> 
> 标签：sql, sql-server

以下是我的表的脚本：

```
create table PRODUCTS
(ProdID   integer      Not null,
 Descrip  varchar(50)  Not null,
     Price    decimal(4,2),
     Primary key(ProdID));

insert into PRODUCTS values (100860,'ace tennis racket I',65.00);
insert into PRODUCTS values (100861,'ace tennis racket II',58.00);
insert into PRODUCTS values (100870,'ace tennis balls-3 pack',15.80);
insert into PRODUCTS values (100871,'ace tennis balls-6 pack',10.00);
insert into PRODUCTS values (100890,'ace tennis net',74.00);
insert into PRODUCTS values (101860,'sp tennis racket',37.00);
insert into PRODUCTS values (101863,'sp junior racket',25.00);
insert into PRODUCTS values (102130,'rh: "guide to tennis"',8.95);
insert into PRODUCTS values (200376,'sb energy bar-6 pack',7.00);
insert into PRODUCTS values (200380,'sb vita snack-6 pack',8.40); 
```

如何编写描述有“球拍”的选择脚本，而我不必完全输入“ace网球拍I”、“ace网球拍II”或“初级球拍”来获取所有球拍？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T21:28:44.067

你只需使用

```
select * from PRODUCTS where Descrip LIKE '%racket%' 
```

你可以在这里查看 SQL 模式匹配：http: [//dev.mysql.com/doc/refman/5.0/en/pattern-matching.html](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:30:31.273

```
 select * from Products where INSTR(Descrip, 'racket') > 0; 
```

# javascript - 加载 Angular JS 路由模板后如何触发事件

> ID：15669827
> 
> 赞同：18
> 
> 时间：2013-03-27T21:25:44.393
> 
> 标签：javascript, jquery, angularjs, angularjs-directive

有谁知道当角度路线呈现其视图时如何触发事件？我想路由应用程序，并且在呈现模板的末尾我希望它触发一个事件以滑动视图“打开”，这样用户体验就不会那么苛刻。当你点击一个链接时，路线变化如此之快。我基本上想让用户体验更流畅。

1.  单击图像
2.  路由应用程序（但视图有一类显示无
3.  当视图完成加载时，我想触发一个事件
4.  该事件触发了一个侦听器，使我的标记向下滑动并打开。

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-04T14:04:48.157

这能满足你的要求吗？

```
$scope.$on('$routeChangeSuccess', function () {
  // run some code to do your animations
}); 
```

转到[http://docs.angularjs.org/api/](http://docs.angularjs.org/api/)并查看**$route**（ngRoute 模块下的 LHS 菜单）

或者看看我问的这个问题.... [AngularJS - Animate ng-view transitions](https://stackoverflow.com/questions/13083644/angularjs-animate-ng-view-transitions)

# opengl - 使用 FBO 渲染多个深度信息

> ID：15669830
> 
> 赞同：4
> 
> 时间：2013-03-27T21:25:53.520
> 
> 标签：opengl, fbo, depth-buffer

我正在尝试实现一个着色器来计算通过两个表面的光折射：对象的背面和正面。为此，我需要使用正常深度测试 (GL_LESS) 和反向深度测试 (GL_GREATER) 来渲染折射几何。它可以让我计算从背面到正面的距离。不幸的是，我一次只能渲染其中一个，而且我不知道如何将两个深度信息作为纹理传递给着色器。

着色器本身不应该是一个问题，但我正在努力设置 opengl 以便它为着色器提供所需的一切！

为了清楚起见，我需要为我的着色器提供两个纹理： - 具有对象正面深度信息的纹理 - 具有对象背面深度信息的纹理

这大致是我所做的（简化以便代码不会太乱而无法阅读）。

```
void FBO::init() {
    initDepthTexture();
    initFBO();
}

void FBO::initDepthTexture() {
    //32 bit depth texture, mWidth*mHeight
    glGenTextures(1, &mDepthTex);
    glBindTexture(GL_TEXTURE_2D, mDepthTex);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_DEPTH_TEXTURE_MODE, GL_INTENSITY);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE,
            GL_COMPARE_R_TO_TEXTURE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC, GL_LEQUAL);

    //NULL means reserve texture memory, but texels are undefined
    //You can also try GL_DEPTH_COMPONENT16, GL_DEPTH_COMPONENT24 for the internal format.
    //If GL_DEPTH24_STENCIL8_EXT, go ahead and use it (GL_EXT_packed_depth_stencil)
    glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT32, mWidth, mHeight, 0,
            GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, NULL);
}

void FBO::initFBO() {
    glGenFramebuffersEXT(1, &mFrameBuffer);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, mFrameBuffer);
    //Attach
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT,
            GL_TEXTURE_2D, mDepthTex, 0);
    //-------------------------
    //Does the GPU support current FBO configuration?
    //Before checking the configuration, you should call these 2 according to the spec.
    //At the very least, you need to call glDrawBuffer(GL_NONE)
    glDrawBuffer(GL_NONE);
    glReadBuffer(GL_NONE);

    checkFBO();

    renderToScreen();
}

void FBO::renderToFBO() {
    cout << "Render to FBO: " << mFrameBuffer << endl;
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, mFrameBuffer); // Bind our frame buffer for rendering
    //-------------------------
    //----and to render to it, don't forget to call
    //At the very least, you need to call glDrawBuffer(GL_NONE)
    glDrawBuffer(GL_NONE);
    glReadBuffer(GL_NONE);
}

/**
 * Static
 */
void FBO::renderToScreen() {
    cout << "Render to screen " << endl;
    // Finish all operations
    //glFlush();
    //-------------------------
    //If you want to render to the back buffer again, you must bind 0 AND THEN CALL glDrawBuffer(GL_BACK)
    //else GL_INVALID_OPERATION will be raised
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); // Unbind our texture
    glDrawBuffer(GL_BACK);
    glReadBuffer(GL_BACK);
} 
```

下面是我如何使用 FBO：我首先在渲染函数之外创建了两个 FBO，查看 init() 函数以了解它是如何初始化的。在第一个 FBO 上，我从前面渲染几何深度 在第二个 FBO 上，我从后面渲染几何深度 然后我将两个深度纹理渲染到全屏四边形。

```
void Viewer::onRender() {
        FBO::renderToScreen();

            // XXX: Need of Z-Depth sorting to get alpha blending right!!
            glEnable(GL_DEPTH_TEST);

            glClearColor(0., 0., 0.2, 1.);
            glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);

            glClearDepth(1.);
            glDepthFunc(GL_LESS);

            // set the projection transformation
            glMatrixMode(GL_PROJECTION);
            glLoadIdentity();
            gluPerspective(45.0f, (GLdouble) m_width / (GLdouble) m_height,
                    m_scale * 5.0, m_scale * 10000.0);

            // set the model transformation
            glMatrixMode(GL_MODELVIEW);
            glLoadIdentity();
            glm::vec3 pos = mCamera->getPosition();
            glm::vec3 view = mCamera->getView();
            glm::vec3 up = mCamera->getUp();
            gluLookAt(pos.x, pos.y, pos.z, view.x, view.y, view.z, up.x, up.y,
                    up.z);

            static float rotationAngle = 0;
            rotationAngle+=5;

            static int i = 0;
            if(i++ < 200) {
            /**
             * Render geometry twice to FBOs
             */
            mFBO->renderToFBO();
            glClear(GL_DEPTH_BUFFER_BIT);
            glClearDepth(0.);
            glDepthFunc(GL_LESS);
            glPushMatrix();
            glRotatef(1, 1, 0, 120);
            glColor3f(0., 1., 0.);
            // Draw teapot
            glutSolidTeapot(1.8);
            glPopMatrix();

            mFBO2->renderToFBO();
            glClear(GL_DEPTH_BUFFER_BIT);
            glClearDepth(0.);
            glDepthFunc(GL_GREATER);
            glPushMatrix();
            glColor3f(0., 1., 0.);
            // Draw teapot
            glutSolidTeapot(3.5);
            glPopMatrix();

            /**
             * Render the same geometry to the screen
             */
            FBO::renderToScreen();
            } else {
            mShader->enable();
            mShader->setTextureFromId("frontDepth", mFBO->getDepthTextureId());
            mShader->setTextureFromId("backDepth", mFBO2->getDepthTextureId());
            glBegin(GL_QUADS); // Draw A Quad
            glTexCoord2f(0, 1);
            glVertex3f(-1.0f, 1.0f, 0.0f); // Top Left
            glTexCoord2f(1, 1);
            glVertex3f(1.0f, 1.0f, 0.0f); // Top Right
            glTexCoord2f(1, 0);
            glVertex3f(1.0f, -1.0f, 0.0f); // Bottom Right
            glTexCoord2f(0, 0);
            glVertex3f(-1.0f, -1.0f, 0.0f); // Bottom Left
            glEnd(); // Done Drawing The Quad
            mShader->disable();
        }
    } 
```

如果渲染到 FBO 然后在四边形上渲染，这是完美的。在上面的示例中，我向 FBO 渲染 200 次，然后停止向 FBO 渲染并在我的全屏四边形上显示纹理。这是结果，正如预期的那样（出于显示目的，我将第二个几何图形渲染为小于第一个几何图形）：

![前后深度](../Images/3b81f55470f5d1018fe84dfe7cfc00e1.png)

这是代码（与工作图像几乎相同，但为每一帧渲染四边形）

```
void Viewer::onRender() {
            FBO::renderToScreen();

        // XXX: Need of Z-Depth sorting to get alpha blending right!!
        glEnable(GL_DEPTH_TEST);

        glClearColor(0., 0., 0.2, 1.);
        glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);

        glClearDepth(1.);
        glDepthFunc(GL_LESS);

        // set the projection transformation
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(45.0f, (GLdouble) m_width / (GLdouble) m_height,
                m_scale * 5.0, m_scale * 10000.0);

        // set the model transformation
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        glm::vec3 pos = mCamera->getPosition();
        glm::vec3 view = mCamera->getView();
        glm::vec3 up = mCamera->getUp();
        gluLookAt(pos.x, pos.y, pos.z, view.x, view.y, view.z, up.x, up.y,
                up.z);

        static float rotationAngle = 0;
        rotationAngle+=5;

        /**
         * Render geometry twice to FBOs
         */
        mFBO->renderToFBO();
        glClear(GL_DEPTH_BUFFER_BIT);
        glClearDepth(0.);
        glDepthFunc(GL_LESS);
        glPushMatrix();
        glRotatef(1, 1, 0, 120);
        glColor3f(0., 1., 0.);
        // Draw teapot
        glutSolidTeapot(1.8);
        glPopMatrix();

        mFBO2->renderToFBO();
        glClear(GL_DEPTH_BUFFER_BIT);
        glClearDepth(0.);
        glDepthFunc(GL_GREATER);
        glPushMatrix();
        glColor3f(0., 1., 0.);
        // Draw teapot
        glutSolidTeapot(3.5);
        glPopMatrix();

            /**
             * Render both depth texture on a fullscreen quad
             **/
        FBO::renderToScreen();
        mShader->enable();
        mShader->setTextureFromId("frontDepth", mFBO->getDepthTextureId());
        mShader->setTextureFromId("backDepth", mFBO2->getDepthTextureId());
        glBegin(GL_QUADS); // Draw A Quad
        glTexCoord2f(0, 1);
        glVertex3f(-1.0f, 1.0f, 0.0f); // Top Left
        glTexCoord2f(1, 1);
        glVertex3f(1.0f, 1.0f, 0.0f); // Top Right
        glTexCoord2f(1, 0);
        glVertex3f(1.0f, -1.0f, 0.0f); // Bottom Right
        glTexCoord2f(0, 0);
        glVertex3f(-1.0f, -1.0f, 0.0f); // Bottom Left
        glEnd(); // Done Drawing The Quad
        mShader->disable();
    }
} 
```

但是现在，当我渲染到 FBO，然后尝试在每一帧显示四边形时，我的问题就出现了。我得到了一个奇怪的结果，这似乎只考虑了几何的一小部分：

![只有几何的一小部分错误](../Images/cc46aa45d485bd3f90b04f1a66e83a12.png)

我无法弄清楚为什么会这样。它肯定会渲染到深度纹理，但似乎由于某种原因渲染全屏四边形会改变 FBO 几何图形的渲染。

[编辑]我只是尝试保存opengl状态，并在quad之后恢复它......

```
 FBO::renderToScreen();
    glPushAttrib(GL_ALL_ATTRIB_BITS);

        mShader->enable();
        mShader->setTextureFromId("frontDepth", mFBO->getDepthTextureId());
        mShader->setTextureFromId("backDepth", mFBO2->getDepthTextureId());
        glBegin(GL_QUADS); // Draw A Quad
        glTexCoord2f(0, 1);
        glVertex3f(-1.0f, 1.0f, 0.0f); // Top Left
        glTexCoord2f(1, 1);
        glVertex3f(1.0f, 1.0f, 0.0f); // Top Right
        glTexCoord2f(1, 0);
        glVertex3f(1.0f, -1.0f, 0.0f); // Bottom Right
        glTexCoord2f(0, 0);
        glVertex3f(-1.0f, -1.0f, 0.0f); // Bottom Left
        glEnd(); // Done Drawing The Quad
        mShader->disable();
            glPopAttrib(); 
```

好吧，这行得通，我可以在场景中四处移动添加对象和任何东西，而不会遇到任何麻烦。但是我仍然很好奇哪个状态变化可能导致渲染过程失败这么多，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:15:47.283

由于问题已解决（即使我不明白是哪个状态推迟了一切），这里是我的 FBO 类和渲染函数的完整代码，以防有人遇到同样的问题：

```
 /*
 * FBO.cpp
 *
 *  Created on: 28 Mar 2013
 *      Author: arnaud
 */

// Include GLEW
#include <GL/glew.h>
#include "FBO.h"
#include <GL/glext.h>
#include <iostream>
#include "FBOException.h"

using namespace std;

FBO::FBO(int width, int height) {
    mWidth = width;
    mHeight = height;
    // TODO Auto-generated constructor stubc
    init();

}

FBO::~FBO() {
    // TODO Auto-generated destructor stub
    glDeleteFramebuffersEXT(1, &mFrameBuffer);
}

void FBO::init() {
    initDepthTexture();
    initFBO();
}

void FBO::initDepthTexture() {
    //32 bit depth texture, mWidth*mHeight
    glGenTextures(1, &mDepthTex);
    glBindTexture(GL_TEXTURE_2D, mDepthTex);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_DEPTH_TEXTURE_MODE, GL_INTENSITY);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE,
            GL_COMPARE_R_TO_TEXTURE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC, GL_LEQUAL);

    //NULL means reserve texture memory, but texels are undefined
    //You can also try GL_DEPTH_COMPONENT16, GL_DEPTH_COMPONENT24 for the internal format.
    //If GL_DEPTH24_STENCIL8_EXT, go ahead and use it (GL_EXT_packed_depth_stencil)
    glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT32, mWidth, mHeight, 0,
            GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, NULL);
}

void FBO::initFBO() {
    glGenFramebuffersEXT(1, &mFrameBuffer);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, mFrameBuffer);
    //Attach
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT,
            GL_TEXTURE_2D, mDepthTex, 0);
    //-------------------------
    //Does the GPU support current FBO configuration?
    //Before checking the configuration, you should call these 2 according to the spec.
    //At the very least, you need to call glDrawBuffer(GL_NONE)
    glDrawBuffer(GL_NONE);
    glReadBuffer(GL_NONE);

    checkFBO();

    renderToScreen();
}

void FBO::checkFBO() throw () {
    GLenum status;
    status = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT);
    switch (status) {
    case GL_FRAMEBUFFER_COMPLETE_EXT:
        cout << "Good Framebuffer" << endl;
        break;
    case GL_FRAMEBUFFER_UNDEFINED:
        throw new FBOException(
                "Framebuffer undefined. Usually returned if  returned if target is the default framebuffer, but the default framebuffer does not exist.");
        break;
    case GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT:
        throw new FBOException(
                "Incomplete Attachement: is returned if any of the framebuffer attachment points are framebuffer incomplete.");
        break;
    case GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:
        throw new FBOException(
                "Incomplete Missing Attachment: is returned if the framebuffer does not have at least one image attached to it.");
        break;
    case GL_FRAMEBUFFER_INCOMPLETE_DRAW_BUFFER:
        throw new FBOException(
                "Incomplete Draw Buffer: is returned if the value of GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE is GL_NONE for any color attachment point(s) named by GL_DRAWBUFFERi");
        break;
    case GL_FRAMEBUFFER_INCOMPLETE_READ_BUFFER:
        throw new FBOException(
                "Incomplete Read Buffer: is returned if GL_READ_BUFFER is not GL_NONE and the value of\\"
                        " GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE is GL_NONE for the color attachment point named by GL_READ_BUFFER");
        break;
    case GL_FRAMEBUFFER_UNSUPPORTED:
        throw new FBOException(
                "Framebuffer Unsupported: is returned if the combination of internal formats of the attached images violates an implementation-dependent set of restrictions.");
        break;
    case GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:
        throw new FBOException("Incomplete Multisample");
        break;
    case GL_FRAMEBUFFER_INCOMPLETE_LAYER_TARGETS:
        throw new FBOException("Incomplete Layer Targets");
        break;
    default:
        throw new FBOException("Bad Framebuffer");
    }
}

/****
 * PUBLIC Functions
 */

void FBO::renderToFBO() {
    cout << "Render to FBO: " << mFrameBuffer << endl;
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, mFrameBuffer); // Bind our frame buffer for rendering
    //-------------------------
    //----and to render to it, don't forget to call
    //At the very least, you need to call glDrawBuffer(GL_NONE)
    glDrawBuffer(GL_NONE);
    glReadBuffer(GL_NONE);
}

/**
 * Static
 */
void FBO::renderToScreen() {
    cout << "Render to screen " << endl;
    // Finish all operations
    //glFlush();
    //-------------------------
    //If you want to render to the back buffer again, you must bind 0 AND THEN CALL glDrawBuffer(GL_BACK)
    //else GL_INVALID_OPERATION will be raised
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); // Unbind our texture
    glDrawBuffer(GL_BACK);
    glReadBuffer(GL_BACK);
} 
```

这是渲染功能

```
void Viewer::onRender() {
    // Get elapsed time since last loop
    sf::Time time = mClock.getElapsedTime();
    float ellapsedTime = time.asMilliseconds();
    if (time.asMilliseconds() > 1000 / 60) {

        // XXX: Need of Z-Depth sorting to get alpha blending right!!
        glEnable(GL_DEPTH_TEST);

        glClearColor(0., 0., 0.2, 1.);
        glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);

        glClearDepth(1.);
        glDepthFunc(GL_LESS);

        // set the projection transformation
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(45.0f, (GLdouble) m_width / (GLdouble) m_height,
                m_scale * 5.0, m_scale * 10000.0);

        // set the model transformation
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        glm::vec3 pos = mCamera->getPosition();
        glm::vec3 view = mCamera->getView();
        glm::vec3 up = mCamera->getUp();
        gluLookAt(pos.x, pos.y, pos.z, view.x, view.y, view.z, up.x, up.y,
                up.z);

        static float rotationAngle = 0;
        rotationAngle+=5;

        /**
         * Render geometry twice to FBOs
         */
        mFBO->renderToFBO();
        glClear(GL_DEPTH_BUFFER_BIT);
        glClearDepth(0.);
        glDepthFunc(GL_LESS);
        glPushMatrix();
        glColor3f(0., 1., 0.);
        // Draw teapot
        glutSolidTeapot(3.5);
        glPopMatrix();

        mFBO2->renderToFBO();
        glClear(GL_DEPTH_BUFFER_BIT);
        glClearDepth(0.);
        glDepthFunc(GL_GREATER);
        glPushMatrix();
        glColor3f(0., 1., 0.);
        // Draw teapot
        glutSolidTeapot(3.5);
        glPopMatrix();

        /**
         * Render the same geometry to the screen
         */
        FBO::renderToScreen();
        // XXX: Save attribs bits to fix FBO problem... (why is this needed!?)
        glPushAttrib(GL_ALL_ATTRIB_BITS);
        mShader->enable();
        mShader->setTextureFromId("frontDepth", mFBO->getDepthTextureId());
        mShader->setTextureFromId("backDepth", mFBO2->getDepthTextureId());
        glBegin(GL_QUADS); // Draw A Quad
        glTexCoord2f(0, 1);
        glVertex3f(-1.0f, 1.0f, 0.0f); // Top Left
        glTexCoord2f(1, 1);
        glVertex3f(1.0f, 1.0f, 0.0f); // Top Right
        glTexCoord2f(1, 0);
        glVertex3f(1.0f, -1.0f, 0.0f); // Bottom Right
        glTexCoord2f(0, 0);
        glVertex3f(-1.0f, -1.0f, 0.0f); // Bottom Left
        glEnd(); // Done Drawing The Quad
        mShader->disable();
        glPopAttrib();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:56:48.720

您正在尝试做的是一种称为“深度剥离”的技术，它本质上可以描述为一种插入排序到多个深度缓冲层的形式。网上有很多演讲和论文。

# jquery - ajax 呼吁画廊画廊

> ID：15669831
> 
> 赞同：-1
> 
> 时间：2013-03-27T21:25:57.223
> 
> 标签：jquery, ajax

我想要每个都有不同的画廊画廊的 onclick 字幕（不是弹出式风格）。我在单独的 html 页面中有画廊画廊，现在我想在我的展示页面上进行 ajax 调用，以便在单击字幕时调出画廊。

我哪里错了？

到目前为止，这是我的 php 页面的代码：

```
 <?
$main_content .= '

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<script src="galleria/galleria-1.2.9.min.js"></script> 

            <style>
            #galleria{ width: 700px; height: 400px; background: #000; } 
            </style>

            <script type="text/javascript">
        $(document).ready(function() {
            $("#agricultural").click(function() {
                changeProduct($(this), $(this));

$("#galleria").load("AgriculturalSlideshow.html");
            });
            $("#commercial").click(function() {
                changeProduct($(this), $(this));

$("#galleria").load("CommercialSlideshow.html");
            });
            $("#community").click(function() {
                changeProduct($(this), $(this));

$("#galleria").load("communityslideshow.html");
            });
            $("#industrial").click(function() {
                changeProduct($(this), $(this));

$("#galleria").load("industrialslideshow.html");
            });
            $("#recreational").click(function() {
                changeProduct($(this), $(this));

$("#galleria").load("recreationalslideshow.html");
            });
            $("#underconstruction").click(function() {
                changeProduct($(this), $(this));

$("#galleria").load("underconstructionslideshow.html");
            });

        function changeProduct(menu, obj){
            $(".productMenu").css({"color":"#000000"});
            $(".prodContent").hide();
            $(menu).css({"color":"#a50000"});
            $(obj).fadeIn();
        }
        });
    </script>
    <div style="padding-top:0px; padding-bottom:50px;">
        <div class="pageHeader">
            SHOWCASE
        </div>
        <div class="content">   
        <div style="padding:20px 0px 20px 0px;">
            <span class="productMenu" id="agricultural" style="cursor:pointer; padding-right:20px; color:#a50000">AGRICULTURAL</span>       
            <span class="productMenu" id="commercial" style="cursor:pointer; padding-right:20px;">COMMERCIAL</span>
            <span class="productMenu" id="community" style="cursor:pointer; padding-right:20px;">COMMUNITY</span>
            <span class="productMenu" id="industrial" style="cursor:pointer; padding-right:20px;">INDUSTRIAL</span>
            <span class="productMenu" id="recreational" style="cursor:pointer; padding-right:20px;">RECREATIONAL</span>
            <span class="productMenu" id="underconstruction" style="cursor:pointer; padding-right:20px;">UNDERCONSTRUCTION</span>             
        </div>
         <div id="galleria"> 
        </div>
        <script>
            Galleria.loadTheme("galleria/themes/classic/galleria.classic.min.js");
            Galleria.run("#galleria");
        </script>

        <div style="clear:both; text-align:justify; text-align-last:justify;padding-top:50px;">
            AGRICULTURAL | COMMERCIAL | RESIDENTIAL & GARAGES | GOVERNMENT | INDUSTRIAL | INSTITUTIONAL | RECREATIONAL
        </div>
        <div style="clear:both"></div>
    </div>';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:31:00.623

您必须在 ajax 请求中使用 url 而不是文件路径，因此`../AgriculturalSlideshow.html`不起作用。您必须使用不带`../`.

绝对 url`http://`或正确的相对 url。

而你的`jquery click event` **被**`onclick attribute`. 因此`changeProduct`，在您的 jquery 事件处理程序中调用并从 span 元素中删除 onclick 属性。

中还缺少分号`changeProduct`：

```
 function changeProduct(menu, obj){
        $(".productMenu").css({"color":"#000000"});
        $(".prodContent").hide();
        $(menu).css({"color":"#a50000"});
        $(obj).fadeIn();
    } 
```

看看那个小提琴：http: [//jsfiddle.net/YqFEn/2/](http://jsfiddle.net/YqFEn/2/)

我建议您使用 chrome 开发人员工具或 firebug (Firefox) 来调试您的 javascript。这样您就可以轻松检查语法错误或 ajax 请求。

顺便说一句，参数`menu`和`obj`完全相同，所以那里的某些东西不会按预期工作。但是 ajax 请求应该可以工作。

**对于您的其他问题**

您可以在字幕下方添加一个 div 框，然后将所有画廊加载到此 div 框中。

```
<div id="gal_content"></div> 
```

并调整您的`load`陈述：

```
$("#gal_content").load("AgriculturalSlideshow.html"); 
```

# c++ - 即使使用 -arch=sm_20，Cuda Hello World printf 也无法正常工作

> ID：15669841
> 
> 赞同：7
> 
> 时间：2013-03-27T21:26:32.337
> 
> 标签：c++, cuda

我不认为我是 Cuda 的新手，但显然我是。

我最近将我的 cuda 设备升级到了一个功能强大的 1.3 到 2.1 (Geforce GT 630)。我也想对 Cuda 工具包 5.0 进行全面升级。

我可以编译一般的 cuda 内核，但 printf 即使设置了 -arch=sm_20 也无法工作。

代码：

```
#include <stdio.h>
#include <assert.h>
#include <cuda.h>
#include <cuda_runtime.h>

__global__ void test(){

    printf("Hi Cuda World");
}

int main( int argc, char** argv )
{

    test<<<1,1>>>();
        return 0;
} 
```

编译器：

```
Error   2   error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_20,compute_10\" --use-local-env --cl-version 2010 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin"  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  -G   --keep-dir "Debug" -maxrregcount=0  --machine 32 --compile -arch=sm_20  -g   -D_MBCS -Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MDd  " -o "Debug\main.cu.obj" "d:\userstore\documents\visual studio 2010\Projects\testCuda\testCuda\main.cu"" exited with code 2\.  C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 5.0.targets  592 10  testCuda
Error   1   error : calling a __host__ function("printf") from a __global__ function("test") is not allowed d:\userstore\documents\visual studio 2010\Projects\testCuda\testCuda\main.cu    9   1   testCuda 
```

由于这个问题，我的生活即将结束……完成了。请从屋顶上告诉我答案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-28T10:40:32.530

如果你`printf`在内核中使用，你应该使用`cudaDeviceSynchronize()`：

```
#include <stdio.h>
#include <assert.h>
#include <cuda.h>
#include <cuda_runtime.h>

__global__ void test(){
    printf("Hi Cuda World");
}

int main( int argc, char** argv )
{
    test<<<1,1>>>();
    cudaDeviceSynchronize();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-28T06:45:10.290

在内核中 printf 仅在计算能力 2 或更高的硬件中受支持。因为您的项目设置为*同时*构建计算能力 1.0 和计算能力 2.1，所以 nvcc 会多次编译代码并构建多架构 fatbinary 对象。错误是在计算能力 1.0 编译周期生成的，因为该*架构*`printf`不支持调用。

 *如果从项目中删除计算能力 1.0 构建目标，错误将消失。

您也可以像这样编写内核：

```
__global__ void test()
{
#if __CUDA_ARCH__ >= 200
    printf("Hi Cuda World");
#endif
} 
```

在为计算能力 2.0 或高目标构建时，该`__CUDA_ARCH__`符号只会 >= 200，这将允许您为计算能力 1.x 设备编译此代码而不会遇到语法错误。

当为正确的架构编译并且没有输出时，您还需要确保内核完成并且驱动程序刷新输出缓冲区。为此，在主机代码中内核启动后添加一个同步调用

例如：

```
int main( int argc, char** argv )
{

    test<<<1,1>>>();
    cudaDeviceSynchronize();
    return 0;
} 
```

[免责声明：所有代码在浏览器中编写，从未编译，使用风险自负]

如果你同时做这两件事，你应该能够编译、运行并查看输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-10T19:18:25.973

只需使用`cudaDeviceSynchronize()`. 作为@Tomasz 答案的补充。

具有 2.x 或更高计算能力的设备支持从 CUDA 内核中调用 printf。

`printf`输出存储在**一个固定大小的循环缓冲区中**。**并且此缓冲区仅**被刷新用于：

*   内核启动的开始
*   同步（例如 cudaDeviceSynchronize()）
*   阻塞内存副本（例如 cudaMemcpy(...)）
*   模块加载/卸载
*   上下文破坏

所以最简单的“Hello world”示例：

```
#include <stdio.h>

__global__ void hello() {
    printf("Hello from GPU);
}

int main() {
    hello<<<1, 1>>>();
    cudaDeviceSynchronize();
} 
```

参考：

*   [cmu15418](http://15418.courses.cs.cmu.edu/spring2013/article/15)

*   [Nvidia CUDA 工具包文档](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#formatted-output)*

# ios - 应用发布后支持更改 iOS 版本？

> ID：15669842
> 
> 赞同：1
> 
> 时间：2013-03-27T21:26:34.003
> 
> 标签：ios, xcode, app-store, bundle

我们的时间很紧，所以我们计划首先发布我们的应用程序只支持 iOS 6，然后在未来的更新中添加对 iOS 5 的支持。（我们希望支持 iPad 1，它仍然有相当大的一部分市场，并且不能使用iOS 6。）

这是可行的，对吧？发布后无法降低应用所需的 iOS 版本是否有限制？我认为要完成这项工作，我需要做的就是更改 Xcode 中我的应用程序所需的 iOS 版本，但我想检查以确保。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T21:28:28.380

这可以。将应用的部署目标更改为 5.0（或任何您想要的），测试并提交更新。

# c# - 自定义 SQL 日期时间格式

> ID：15669847
> 
> 赞同：0
> 
> 时间：2013-03-27T21:26:56.647
> 
> 标签：c#, asp.net, sql

SQL 不支持 dd/mm/yy hh:mm 的欧洲格式，有没有办法创建一个？我试图在这样的存储过程中返回它：

```
ALTER PROCEDURE dbo.GetMeetingByCustomerID
    @CustomerID nvarchar(50),

AS

    SELECT  ProfessionalID, MeetingDate, Cost, HasReview, Approved
    FROM     Meeting
    WHERE  (CostumerID = @CostumerID)
    ORDER BY MeetingDate ASC
    RETURN 
```

唯一的问题是它以错误的格式返回它。有没有办法创建一个新的？谢谢。编辑：我解决了这个问题。我所做的是：

```
 MeetingDate = DateTime.Parse(Meetings.Tables[0].Rows[i][1].ToString());
                string d = MeetingDate.ToString("hh:mm dd/MM/yy"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:36:58.287

首先，我认为在 SELECT 请求中格式化日期/时间是不正确的。但是，如果您真的需要它，请使用[CAST/CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)（如果您使用 MS SQL）并删除未使用的符号，例如：

```
SELECT ProfessionalID, CONVERT (varchar(5), MeetingDate, 108) AS MeetingDateString, Cost, HasReview, Approved
FROM     Meeting
WHERE  (CostumerID = @CostumerID)
ORDER BY MeetingDate ASC 
```

# xml - Sitecore - 自定义搜索对话框

> ID：15669850
> 
> 赞同：0
> 
> 时间：2013-03-27T21:27:00.607
> 
> 标签：xml, sitecore, sitecore6

我正在创建一个通过自定义上下文菜单从 Sitecore 内容编辑器访问的自定义搜索屏幕。这是可行的——我创建了一个自定义 XML 对话框，允许用户在外部系统上进行搜索查询，这也可以正常工作。问题是将我从外部系统返回的自定义搜索结果（自定义对象列表）显示到网格面板或类似的东西中。我对 XML 完全陌生，无法弄清楚这一点。我确定我遗漏了一些明显的东西！

我要绑定到的网格面板：

```
 <GridPanel ID="myGridPanel" Columns="2">
           <GridPanel.ColumnStyles>
            <Column Width="70%" />
            <Column Width="30%" />
           </GridPanel.ColumnStyles>

         <GridPanel.RowStyles>
           <Row Height="100%" />
         </GridPanel.RowStyles>
       </GridPanel> 
```

应该发生绑定的方法：

```
 private void BindExternalDocumentsToDataGrid(List<ExternalRecord> recordsFromExternalSystem)
    {
        Assert.IsNotNull(recordsFromExternalSystem, "There are no records for display!!");
        foreach (ExternalRecord record in recordsFromExternalSystem)
        {
           //How can I bind to my gridpanel? 
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:55:47.503

`GridPanel`从 WebControl继承`DataSource`属性并实现 DataBind 方法。

# php - ZF2 复杂 SQL 关闭

> ID：15669856
> 
> 赞同：0
> 
> 时间：2013-03-27T21:27:17.547
> 
> 标签：php, zend-framework2, zend-db-select

如何在 Zend\Db\Sql 中创建复杂的 WHERE 关闭？那些带有“COLLATE utf_general_ci”或“REGEXP”的人。还有什么方法可以将查询作为我想要的字符串提供给它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T22:27:40.040

完整复杂 where 子句的示例会有所帮助，但您可以使用 Expression 或 Literal

**启动适配器**

```
$adapter = new Zend\Db\Adapter\Adapter(array(
    'driver' => 'Mysqli',
    'database' => 'zend_db_example',
    'username' => 'developer',
    'password' => 'developer-password'
 ));

$sql = new Zend\Db\Sql\Sql($adapter);

$qi = function($name) use ($adapter) { return $adapter->platform->quoteIdentifier( $name ); };

$qv = function($name) use ($adapter) { return $adapter->platform->quoteValue( $name ); }; 
```

**文字**

```
$regexSpecification = '(\\"key\\":\\"value\\")';
$sql->select()
        ->from('dbTable')
        ->where->literal( $qi('column1') . " REGEXP " . $qv($regexSpecification) )
        ->or->equalTo('column2', 'value');

//SELECT `dbTable`.* FROM `dbTable` WHERE `column1` REGEXP '(\"key\":\"value\")' OR `column2` = 'value' 
```

**表达**

```
 $expression = new Zend\Db\Sql\Predicate\Expression( "SHA2(".$qi('column2').", 512)" );
    $sql->select()
        ->from('dbTable')
        ->columns( array( 'hashed' => $expression ) )
        ->where( array( $qi('column1') . " COLLATE latin1_general_cs = " . $qv('value'))); 

//SELECT SHA2(`column2`, 512) AS `hashed` FROM `dbTable` WHERE `column1` COLLATE latin1_general_cs = 'value' 
```

**适配器执行的查询**

```
$adapter->query( 'ALTER TABLE ADD INDEX('. $qi('foo') .') ON ( '. $qi('foo_column') .' )', Zend\Db\Adapter\Adapter::QUERY_MODE_EXECUTE ); 
```

**参考：**

[https://packages.zendframework.com/docs/latest/manual/en/modules/zend.db.adapter.html](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.db.adapter.html)

[https://packages.zendframework.com/docs/latest/manual/en/modules/zend.db.sql.html](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.db.sql.html)

# javascript - jQuery选择连同这个

> ID：15669858
> 
> 赞同：1
> 
> 时间：2013-03-27T21:27:24.017
> 
> 标签：javascript, jquery

我有这样的 HTML

```
<table>
    <tr>
        <td>
            <select>
                <option>12AM</option>
                <option>11PM</option>
            </select>
        </td>
        <td>
            <select>
                <option>12AM</option>
                <option>11PM</option>
            </select>
        </td>
    </tr>
</table> 
```

我想分配一个 id 属性来选择每个 tr 内的标签。以下jquery似乎不起作用

```
function addRow()
{
    var rowCount = 0;
    $('#SHourDivTable tr').each(function() {
        if(rowCount != 0)
        {
            console.log($(this).html());
            $(this).add("select:eq(0)").attr("id", rowCount);
            $(this).add("select:eq(1)").attr("id", rowCount);
        }
        rowCount = rowCount + 1;
    });
} 
```

当我运行它时， id 属性被分配给 tr 而不是 select 标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:32:17.230

ID**必须是唯一的**。他们也不**应该以数字开头**。你应该使用`data`属性来做到这一点。

我也使用`table`了代替`#SHourDivTable`，因为我在您的标记中看不到具有该 ID 的表格。

最后，你不需要`find` **你** `add`在这里做什么。

试试这个：

```
function addRow()
{
    var rowCount = 0;
    $('table tr').each(function() {
        if(rowCount != 0)
        {
            $(this).find("select:eq(0)").data("rowNumber", rowCount);
            $(this).find("select:eq(1)").data("rowNumber", rowCount);
        }
        rowCount = rowCount + 1;
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:39:10.620

这会将 id 1,2 添加到您的选择元素中。您的标记中有额外的内容，还请记住 id 必须是唯一的！id 的 1 和 2 也是错误的 id - select1、select2 等会更好。

我将 ID *SHourDivTable*添加 到您的表中，因为我相信这是您的意图。

[**演示**](http://jsfiddle.net/WgGs7/4/)

```
$('#SHourDivTable tr select').each(function(i,select) {
    $(select).attr('id','select'+i);
}); 
```

# testing - cabal 测试不打印可执行输出

> ID：15669867
> 
> 赞同：11
> 
> 时间：2013-03-27T21:27:55.097
> 
> 标签：testing, stdout, cabal

我有一个 cabal 包，我使用该类型对其进行了`test-suite`设置，如下所示：`exitcode-stdio-1.0`

当我使用 运行它时`cabal test`，cabal 不会打印可执行文件的标准输出/标准错误；它只打印自己的日志信息：

```
$ cabal test

Running 1 test suites...
Test suite test-foo: RUNNING...
Test suite test-foo: PASS
Test suite logged to: dist/test/foo-0.0.1-test-foo.log
1 of 1 test suites (1 of 1 test cases) passed.
$ 
```

我想要的输出在该日志文件中：

```
$ cat dist/test/foo-0.0.1-test-fo.log 
Test suite test-foo: RUNNING...
HUnit group 1:
  Expected connect: [OK]

         Test Cases  Total      
 Passed  1           1          
 Failed  0           0          
 Total   1           1          
Test suite test-foo: PASS
Test suite logged to: dist/test/foo-0.0.1-test-foo.log
$ 
```

**如何让 cabal 将此输出打印到自己的标准输出？**我在文档中找不到它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T09:56:42.037

如果您使用的是 Cabal 新测试（在 Cabal 3+ 上默认）：

```
$ cabal new-test --test-show-details=streaming 
```

较旧的 Cabal 版本允许使用以下方式流式传输输出：

```
$ cabal test --show-details=streaming 
```

> --show-details=*过滤器*
> 
> 确定单个测试用例的结果是否显示在终端上。可能*总是*（总是显示）、*从不*（从不显示）、*失败*（仅显示失败的结果）或*流式传输*（实时显示所有结果）。

在[Cabal 用户指南](https://www.haskell.org/cabal/users-guide/installing-packages.html)中阅读更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-14T08:25:11.517

有几个月的新方法了，测试结果甚至写入文件的stdout，最后不刷新

```
cabal test --show-details=streaming 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T17:58:55.933

使用`exitcode-stdio-1.0`cabal 时，仅当测试程序返回退出代码（显式“失败”）时才会报告测试日志。一个解决方案是让您的测试程序在任何测试失败时返回错误代码：

```
import System.Exit (exitFailure, exitSuccess)

main :: IO ()
main = do
  result <- runTests
  if result
    then exitSuccess
    else exitFailure

runTests :: IO Bool
runTests = do
  ...
  return True/False 
```

您仅在编写“手动”测试程序时才需要它：大多数测试报告框架（例如：[taste](http://hackage.haskell.org/package/Hspec)、[test-framework](http://hackage.haskell.org/package/test-framework)、[hspec](http://hackage.haskell.org/package/tasty)）已经自动执行此操作。

如果您真的想*始终*看到结果，您可以随时使用：

*   `cabal test --log=/dev/stdout`（在另一个答案中给出）
*   `exitFailure`在执行结束时

# spring - 集成测试：spring mvc测试框架post方法

> ID：15669870
> 
> 赞同：0
> 
> 时间：2013-03-27T21:28:17.390
> 
> 标签：spring, spring-mvc, integration-testing

spring 3.2 引入了 spring mvc 测试框架并将其作为官方的一部分，如文档中所述，我想用它来测试我的控制器，一种处理 post 请求的方法。

```
68     @RequestMapping(value = "/new", method = RequestMethod.POST)
69     public String addCarPost(@Valid @ModelAttribute NewCar car, BindingResult result){
70         if(result.hasErrors())
71         {
72             return "newcar" ;
73         }             
74         carService.addCar(car) ;        
75         return "redirect:/garage" ;     
76     } 
```

这是我的第一次尝试：

```
30 @RunWith(SpringJUnit4ClassRunner.class)
31 @ContextConfiguration("test-config.xml")
32 @WebAppConfiguration
33 public class GarageIntegrationTest {
       // ....
72     @Test public void testAddCarPost() throws Exception{
           // i didn't add any parameters to request.
73         this.mockMvc.perform(post("/garage/new"))
74             .andExpect(view().name("newcar")) ;
75     }
       // ....
    } 
```

我想测试@Valid、@RequestMapping 和@ModelAttribute，我没有向请求添加任何参数，因此`NewCar()`实例化了一个新类，该类的所有属性都初始化为null 或0，因此验证器必须检测到新实例有错误并返回视图“newcar”，当我运行这个测试时，我在服务中有一个 NullPointerException `carService`，它的行为就像`result.hasErrors()`已经返回`false`，我错过了一些东西。

# primefaces - 素面 3.4。选择：验证错误：值是必需的

> ID：15669882
> 
> 赞同：-3
> 
> 时间：2013-03-27T21:28:54.253
> 
> 标签：primefaces

我有一个 15`h:selectOneMenu` 和大约 10的页面`h:inputText`。发帖`p:commandButton ajax="false"` 给我“选择：验证错误：需要值。” 错误。它不能准确说明哪些输入元素未通过验证。如何关闭验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:00:17.667

您设置`ajax="false"`了，为什么要这样做，所以您使用验证来做什么？（为什么我不能添加评论，只能添加答案？）

# groovy - 如何在使用 groovy 的单引号和逗号分隔的列表中获取值？

> ID：15669886
> 
> 赞同：1
> 
> 时间：2013-03-27T21:29:32.777
> 
> 标签：groovy

我有一个键列表，并希望将它们放在带有单引号和逗号分隔值的字符串中。

def 键= [A,B,C,D]

结果应该是 String values = 'A','B','C','D' 因为我需要将这些值提供给 groovy.sql 查询。

有没有办法以简单的方式实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:15:31.357

你的意思是：

```
String s = keys.collect { "'$it'" }.join( ',' ) 
```

不过要小心。转义自己的sql很少是个好主意，不能使用准备好的语句吗？还是 groovy Sql 类？这两个手柄都为您逃脱

# ruby-on-rails - Rails 提交空表单时不返回验证错误

> ID：15669887
> 
> 赞同：1
> 
> 时间：2013-03-27T21:29:37.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

简短：我有一个设计模型用户我正在为用户添加一个选项，以便能够在他们的个人资料页面中更改他们的密码，而无需通过“忘记密码”选项。无论如何，这需要一个带有字段的附加表单：`:old_password, :new_password and :new_password_confirmation`最初不在模型中，我必须为它们创建新的单独验证，

表格：

```
<%= form_for(@user, :url => {:controller => :members, :action => :editpass}, :html => {:method => :post}) do |f| %>

    <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>">
    <table class="tables no-border">
        <tr>
            <%= f.label :old_password, "Old password" %>
        </tr>
        <tr>
            <%= f.password_field :old_password, :autofocus => :true %>
        </tr>
        <tr>
            <%= f.label :new_password, "New password" %>
        </tr>
        <tr>
            <%= f.password_field :new_password %>
        </tr>
        <tr>
            <%= f.label :new_password_confirmation, "Repeat new password" %>
        </tr>
        <tr>
            <%= f.password_field :new_password_confirmation %>
        </tr>
        <tr>
            <input type="submit" value="Change" class="btn" />
        </tr>
    </table>
</form>

  <%= @user.errors.full_messages %>

<% end %> 
```

控制器：

```
class MembersController < ApplicationController

  before_filter :authenticate_user!
  skip_before_filter :check_for_main

  def index
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
  end

  def editpass

    current_user.change_password(params[:old_password], params[:new_password])
    redirect_to member_path(current_user.id)

  end

  # User access restriction
  def ban
  end

  def unban
  end

end 
```

模型：**查看：字段验证：old_password / :new_password ..**

```
class User < ActiveRecord::Base

    # Virtual attributes
    # _password attributes serve in-profile password change and are not part of the model
    attr_accessor :login, :apiid, :vcode, :old_password, :new_password, :new_password_confirmation

    # Include default devise modules. Others available are:
    # :token_authenticatable, :confirmable,
    # :lockable, :timeoutable and :omniauthable
    devise  :database_authenticatable, :registerable, :confirmable,
            :recoverable, :rememberable, :trackable, :validatable, :authentication_keys => [:login]

    # Registration show/edit form validation
    validates :username,    :presence   => true,
                            :length     => { :minimum => 6, :maximum => 255 },
                            :uniqueness => true

    validates :apiid,       :presence   => true,
                            :numericality => { :only_integer => true },
                            :acc_api    => true,
                            :on         => :create

    validates :vcode,       :presence   => true,
                            :length     => { :minimum => 20, :maximum => 255 },
                            :on         => :create

    # In profile password
    validates :old_password,    :presence   => true,
                                :length     => { :minimum => 8, :maximum => 255 },
                                :if         => :password_changed?

    validates :new_password,    :presence   => true,
                                :length     => { :minimum => 8, :maximum => 255 },
                                :if         => :password_changed?,
                                :confirmation   => true

    validates :new_password_confirmation,   
                                :presence   => true

    attr_accessible :login, :username, :group, :apiid, :vcode, :email, :password, :password_confirmation, :remember_me

    # Register character belonging to user
    after_create :register_characters

    # Model association
    has_many :apis
    has_many :characters

    # Allows user to reset password in profile
    # for Forgot Password look at Devise
    def change_password(oldpass, newpass)
        if self.valid_password?(oldpass)
            # User is logged out automatically by devise upon
            # password change
            self.password = newpass
            self.save
        else
            return false
        end
    end

    # Register account characters
    def register_characters
        require 'nokogiri'
        require 'open-uri'

        # Fetch account level xml
        uri = "https://api.eveonline.com/account/Characters.xml.aspx?keyID=#{self.apiid}&vCode=#{self.vcode}"
        xml = Nokogiri::XML(open(uri))
        row = xml.xpath("//row")

        # Create characters bound to user
        row.each do |entry|
            # Register new character
            character = Character.new(
                :charid     =>  entry['characterID'].to_i,
                :user_id    =>  self.id,
                :name       =>  entry['name'],
                :corp       =>  entry['corporationName']
                )
            character.save

            # Register character associated api credentials
            api = Api.new(
                :user_id        =>  self.id,
                :character_id   =>  character.id,
                :apiid          =>  self.apiid,
                :vcode          =>  self.vcode
                )
            api.save

            character.update_character
        end
    end

    # Check if user is banned before login
    def active_for_authentication?
      super && self.banned == false
    end

    # Redefine authentication procedure to allow login with username or email
    def self.find_for_database_authentication(warden_conditions)
      conditions = warden_conditions.dup
      if login = conditions.delete(:login).downcase
        where(conditions).where("username = '#{login}' OR email = '#{login}'").first
      else
        where(conditions).first
      end
    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:43:22.617

基本上，没有达到您的密码验证。

使用该`change_password`方法，您只需将值从控制器传递到该方法并使用它们来设置`password`. 该模型没有看到`old_password`和`new_password`设置，因此无法验证它们。此外，由于您没有传入`password_confirmation`并且只是直接在模型（`self.password = newpass`）中设置密码，`password_confirmation`因此也没有被使用。

如另一个答案中所述，您最好使用`update_attributes`或设计文档中推荐的任何内容。希望我的解释可以让您深入了解为什么您的方法不起作用。

如果您想坚持您的`change_password`方法，则必须将值传递给属性，以便模型验证它们。尝试这样的事情：

```
 #controller

  @user = current_user

  if @user.change_password(params[:old_password], params[:new_password], params[:new_password_confirmation])
    redirect_to member_path(current_user.id)
  else
    @errors = @user.errors.full_messages
    render 'edit_password_view' # not sure what this action is named
    # you now have an array of errors (@errors) that you can render however you see fit in the view
  end

  #model
  def change_password(oldpass, newpass, newpass_conf)
     self.password = newpass
     self.old_password = oldpass
     self.new_password = newpass
     self.new_password_confirmation = newpass_conf
     return self.save
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:40:51.910

我认为正确的方法是更新用户属性而不是使用更改密码。也许本指南可以提供帮助：

[https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password)

# c# - 作为服务运行时通信不起作用

> ID：15669889
> 
> 赞同：0
> 
> 时间：2013-03-27T21:29:51.647
> 
> 标签：c#, service, com, mapi

我创建了一个通过 MAPI 访问 Exchange Server 的应用程序。托盘应用程序用于启动、停止和配置应用程序。我已将所有通信和处理逻辑放入一个单独的库中，该库在计时器上处理邮件。在调试模式下运行时，库直接从托盘应用程序访问，但在发布模式下运行时，它被安装在用户级别的服务调用。见下图。

![在此处输入图像描述](../Images/a1ae7a9be5b5e1ba1f42c261b730a67e.png)

我已将所有内容配置为使用 x64 位版本的 Outlook 2010 运行。我遇到的问题是，当我在 Debug 中构建和安装时（直接访问库），一切正常。如果我安装 Release 版本并作为服务运行，则 MAPI 连接未初始化。

我似乎正在访问 COM 对象，因为我从我调用的方法而不是异常中获取返回值。我已经将用户帐户设置为我自己的登录名，所以我应该有权访问个人资料。虽然我可以发布初始化代码，但我不相信它会有所帮助。我认为这个问题更多地与权限有关。我尝试在与服务关联的 4 种帐户类型中的每一种下运行测试安装，但它们都不起作用。我的用户帐户是否可能无法访问我的邮件配置文件？

如果有人对我可能做错了什么有任何想法，我将不胜感激。

**编辑**

我得到了 HRESULT `Cannot change thread mode after it is set.`，我最初将线程模式设置为 false，但尝试更改它以查看它是否可以解决问题。不幸的是，它没有。我在下面添加了一个代码片段，以防有人发现它有帮助。

```
DWORD dwFlags=0;
if(bMultiThreadedNotifications) dwFlags|=MAPI_MULTITHREAD_NOTIFICATIONS;
if(bInitAsService) dwFlags|=MAPI_NT_SERVICE;

if(dwFlags) 
{
    MAPIINIT_0 MAPIInit={ MAPI_INIT_VERSION, dwFlags };
    lastErrorCode = MAPIInitialize(&MAPIInit);
    //if(lastErrorCode!=S_OK) return FALSE;
    if(FAILED(lastErrorCode)) result = FALSE;
} 
else 
{
    lastErrorCode = MAPIInitialize(NULL);
    //if(lastErrorCode!=S_OK) return FALSE;
    if(FAILED(lastErrorCode)) result = FALSE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:43:10.543

该解决方案由 Dmitry Streblechenko 发布，可在此处找到：[http](http://social.msdn.microsoft.com/Forums/en-US/outlookdev/thread/7a9cc40a-ffd6-4f83-9973-5410615b4df4) ://social.msdn.microsoft.com/Forums/en-US/outlookdev/thread/7a9cc40a-ffd6-4f83-9973-5410615b4df4 。

基本上，MAPI 被初始化了两次，所以我不得不将 MAPI_NO_COINIT 添加到我的标志中。之后，一切正常。

感谢大家的帮助。

# regex - 将“.html”添加到 url 的正则表达式

> ID：15669890
> 
> 赞同：0
> 
> 时间：2013-03-27T21:30:00.300
> 
> 标签：regex, sed, wget

我想在使用 wget 进行一些报废后修改一些链接。

在使用 wget 导出我的网站期间，将 href="http://www.domain.com/whatever/page" 等链接转换为 href="http://www.domain.com/whatever/page.html "

但是在 wget 范围之外引用的链接不会被修改，在某些情况下我想这样做。

我的命令是 href="http://www.domain.com/whatever/page" 应该变成 href="http://www.domain.com/whatever/page.html"

我当前的正则表达式是

```
sed -e "s|\"\(http://www\.domain\.com/.*\)/\([^\./]+\)\"|\"\1/\2.html\"|g" 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:46:22.530

尝试这个 ：

```
$ perl -pe 's@href="http://www\.domain\.com/([^/]+/)?\w+(?!\.html)(?=")@$&.html@' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:42:02.490

尝试这个：

```
sed -e "s|\"\(http://www\.domain\.com/.*\)/\(.\+\)\"|\"\1/\2.html\"|g "
```

# neo4j - Neo4j - 社交网络 - 关系属性 - 两种方式或一种方式与属性

> ID：15669893
> 
> 赞同：1
> 
> 时间：2013-03-27T21:30:15.190
> 
> 标签：neo4j

假设我有两个人是朋友，为了尽量减少使用的关系数量，我是否应该使用具有“friend_type：相互”属性的从一个到另一个的出站关系来表示双向友谊？（一种方式友谊将有“friend_type：关注”）

由于属性不是一流的对象，这会影响性能吗？或者我应该建立入站和出站友谊关系，这样性能就不会受到影响。

例如，要找到我的朋友，使用外向关系，例如：

鲁本 [f:Friend]->You where f.friend_type="mutual"

或者，依赖传入和传出关系（而不是属性）

鲁本 <-[:Friend]-> 你

哪个选项提供最佳性能？

320 亿关系限制似乎足够了，但是，嘿，我有很大的计划，如果成功，我将需要我能得到的所有关系......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:42:06.930

如果您只需要遍历关系而不必查看这些关系的属性，您的图表将会更快。320亿关系约束很快就会被移除，我不会担心。

# sql - 带有子查询和变量传递的 SQL Server 案例

> ID：15669894
> 
> 赞同：0
> 
> 时间：2013-03-27T21:30:15.233
> 
> 标签：sql, sql-server, sql-server-2008-r2

运行 SQL Server 2008 R2。

我正在尝试制作一个基本过滤器，以便内部程序可以判断它是从哪个位置/公司运行的。

我们的旧 DBA 设置了一张公司表 (Company)，然后根据数据库的位置更改了一个字段 (dbo.Company.isPrimary)。如果位置是主要位置，则该字段将具有“1”，否则将具有“0”

```
SELECT *
      WHEN (SELECT Comp.NAME AS @Name FROM dbo.Company comp WHERE comp.IsPrimary =1 )    @Name like '%Company1%' 
    THEN (SELECT * FROM Company1Table WHERE Records =blah)
Else
WHEN (SELECT Comp.NAME FROM dbo.Company comp WHERE comp.IsPrimary =1 ) @Name like '%Company2%'  
    THEN (SELECT * FROM Company2Table WHERE Records =blah)
END 
```

这是我的基本起始区域。我正在努力使整个公司的事情标准化。我很可能最终会使用这个起点作为调用其他存储过程/报告并传递变量/值的一种方式。所以我试图做一些非常小的和基本的东西，但我失败了。

我希望我的帖子有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:37:49.020

这是一种相当奇怪的数据格式。以下查询获取您想要的公司信息，假设公司表中有一个名称字段：

```
select *
from Company1Table ct
where ct.name in (select name from Company c where c.IsPrimary = 1)
union all
select *
from Company2Table ct
where ct.name in (select name from Company c where c.IsPrimary = 0) 
```

我建议您将其包装在一个视图中并在任何地方使用该视图。然后，您可以开始弄清楚如何解决将公司数据在不同表中的表之间拆分的尴尬。

这假定表具有重叠信息。也许该`IsPrimary`值甚至不是必需的，因为给定的值`name`仅出现在一个表中。在这种情况下，只需使用连接：

```
select *
from Company1Table
union all
select *
from Company2Table 
```

然后开始研究如何将它们组合成一个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:38:04.123

对我来说很难理解 - 但我认为你可能想要的是一个 UNION。

```
select * from companyTable1
union
select * from companyTable2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:59:18.373

如果我没看错，您想根据表中匹配的值使用不同`IsPrimary = 1`的`dbo.Company`表。您也许可以使用[CASE 语句](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28CASE_TSQL%29;k%28SQL11.SWB.TSQLRESULTS.F1%29;k%28SQL11.SWB.TSQLQUERY.F1%29;k%28MISCELLANEOUSFILESPROJECT%29;k%28DevLang-TSQL%29&rd=true)，但我认为它不会起作用。我认为您被 IF/ELSE 困住了。

```
IF (SELECT Comp.NAME FROM dbo.Company comp WHERE comp.IsPrimary =1 ) like '%Company1%'
BEGIN
    SELECT * FROM Company1Table WHERE Records =blah
END
ELSE
BEGIN
    IF (SELECT Comp.NAME FROM dbo.Company comp WHERE comp.IsPrimary =1 ) like '%Company2%'
    BEGIN
        SELECT * FROM Company1Table WHERE Records =blah
    END
    --Company3 would be in an ELSE statement here
END 
```

注意：当只有一行时，BEGIN 和 END 是可选的。所以，在这个例子中，他们可以被排除在外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T22:57:30.450

我认为这就是你需要的

```
 If Exists (SELECT 1 FROM dbo.Company comp WHERE comp.IsPrimary = 1 and Comp.NAME like '%Company1%')
Begin
 SELECT * FROM Company1Table WHERE Records =blah
End
ELSE
BEGIN
   If Exists (SELECT 1 FROM dbo.Company comp WHERE comp.IsPrimary = 1 and Comp.NAME like '%Company2%')
    BEGIN
        SELECT * FROM Company2Table WHERE Records =blah
    END
End 
```

# c# - 如何在C#中为三角形的顶点着色

> ID：15669896
> 
> 赞同：1
> 
> 时间：2013-03-27T21:30:21.780
> 
> 标签：c#, graphics

我可以画三角形。这是我的代码

```
 Graphics surface;
    surface = this.CreateGraphics();
    SolidBrush brush = new SolidBrush(Color.Blue);
    Point[] points = { new Point(100, 100), new Point(75, 50), new Point(50, 100) };
    surface.FillPolygon(brush, points); 
```

如何以不同的方式为三角形的 3 个顶点着色。这里我只使用蓝色。但我希望一个顶点是红色的，另一个是蓝色的，另一个是绿色的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:44:02.300

绘制多边形后，在顶部绘制代表顶点的圆圈。如果您只使用一种颜色，我建议您将其放入一个`for`循环中，但如果您要更改画笔颜色，您不妨单独进行。

将此添加到您的代码中：

```
SolidBrush blueBrush = new SolidBrush(Color.Blue); // same as brush above, but being consistent
SolidBrush redBrush = new SolidBrush(Color.Red); 
SolidBrush greenBrush = new SolidBrush(Color.Green);

int vertexRadius = 1; // change this to make the vertices bigger

surface.fillEllipse(redBrush, new Rectangle(100 - vertexRadius, 100 - vertexRadius, vertexRadius * 2, vertexRadius * 2));
surface.fillEllipse(blueBrush, new Rectangle(75 - vertexRadius, 50 - vertexRadius, vertexRadius * 2, vertexRadius * 2));
surface.fillEllipse(greenBrush, new Rectangle(50 - vertexRadius, 100 - vertexRadius, vertexRadius * 2, vertexRadius * 2)); 
```

## 编辑

我从您的评论中了解到您正在寻找从一个顶点到下一个顶点的渐变。这是根据[MSDN](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.pathgradientbrush.aspx)文档制作路径渐变的方法。（如果你不想用渐变填充内部，你可以使用[线性渐变](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.lineargradientbrush.aspx)。）

```
PathGradientBrush gradientBrush = new PathGradientBrush(points);
Color[] colors = { Color.Red, Color.Blue, Color.Green };
gradientBrush.CenterColor = Color.Black;
gradientBrush.SurroundColors = colors; 
```

然后用新画笔填充多边形：

```
surface.FillPolygon(gradientBrush, points); 
```

# java - 在绘图之前翻译所有对象？

> ID：15669897
> 
> 赞同：0
> 
> 时间：2013-03-27T21:30:22.727
> 
> 标签：java, opengl-es, libgdx

因此，我是与 GPU 一起编程的新手，对 LibGDX 也很陌生。我正在慢慢前进，但在弄清楚如何修改对象的绘制位置时遇到了问题。

现在，我的关卡类中有一个绘图调用：

```
// Update the camera.
// ------------------
_cameraRef.update();
_cameraRef.apply(Gdx.gl10);
_batchRef.setProjectionMatrix(_cameraRef.combined);

// Draw.
// -----
_batchRef.begin();
_player.draw(_batchRef);
_batchRef.end(); 
```

很简单。玩家在他的 x 和 y 坐标处绘制。

然而，我想要做的是让他绘制在他的 x 和 y 坐标乘以一个常数（取决于游戏的分辨率，这可以是 1、2 或 4）。

因此，他不会在 (4, 8) 处绘制，而是在 (8, 16) 处绘制。

基本上，有没有办法告诉批次在距离它的 x 和 y 坐标 2x 或 4x 的位置绘制每个对象？

我似乎认为 SpriteBatch::translate(x, y, z) 是答案，但我似乎无法让它以我想要的方式工作。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:40:15.493

没有 GL 方法来乘以平移坐标。如果您认为这确实是您应该做的，您可以将矩阵作为浮点数组并将平移分量相乘。我不建议这样做，只需使用`translate(x*resolutionFactor, y*resolutionFactor, z*resolutionFactor)`.

尽管您没有向我们提供太多信息，但我猜您在处理 DPI 大 2 倍左右的设备（视网膜显示屏）时遇到了麻烦。如果是这种情况，您的问题可能来自“glOrtho”。此方法主要用于定义 2D 屏幕坐标系，对于 sprite 绘制，通常设置为：top = left = 0，bottom = viewHeight，right = viewWidth。这些 viewWidth 和 viewHeight 可能取自帧缓冲区本身，不适合您的情况。如果您可以使用此方法，您应该划分视网膜设备的宽度和高度，或者简单地使用视图的宽度和高度来设置它。

# c++ - 在 STL 中使用 sort() 对数组进行排序

> ID：15669900
> 
> 赞同：4
> 
> 时间：2013-03-27T21:30:27.230
> 
> 标签：c++, sorting, iterator

我正在为一个问题编写代码：编写一个方法来对字符串数组进行排序，以便所有字谜彼此相邻。如果我的容器是vector，那就很简单了，因为vector有迭代器，可以在STL排序函数中使用，代码如下： 但是如果容器是数组呢？数组没有迭代器，不能使用 sort() 直接对数组进行排序。我想知道有没有办法创建一个数组迭代器，以便我可以使用 sort() 直接对数组进行排序？谢谢 ！

```
#include <iostream>
#include<string>
#include<algorithm>
#include<vector>
using namespace std;

bool compare(string s1, string s2){
  sort(s1.begin(), s1.end());  //sort return void, not the sorted result!!!!!!!!!!
  sort(s2.begin(), s2.end());
  return s1<=s2;
}

void sort_string(vector<string> &v){
    sort(v.begin(), v.end(), compare);
} 
```

#

```
If I want to use array itertor:

bool compare(string s1, string s2){
        sort(s1.begin(), s1.end());
        sort(s2.begin(), s2.end());
        return s1<=s2;
}

int sortStrarr(string strarr[], int len){

    //sort(strarr's iterator.begin, strarr's iterator.end, compare); ???
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T21:34:14.193

指针可以充当迭代器，因此您只需要指向数组开头和结尾的指针。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T21:36:18.203

由于（就像在 C 中一样）数组可以转换为指向第一个元素的指针（但请不要将数组与指针混淆），您可以使用指针来确定开始和结束，因此您可以编写：

```
sort(strarr, strarr + len, compare); 
```

或者，如果您使用 C++11（或 Boost），您可以使用`array`类：

```
template<std::size_t N>
int sortStrarr(std:array<string, N>& strarr, int len){
    sort(strarr.begin(), strarr.end(), compare);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T21:36:09.643

您可以`sort()`用于数组。指针充当迭代器。

例子：

```
#include <iostream>
#include <string>
#include <algorithm>
using namespace std;

int main()
{
    string arr[5]={"BBB","AAA","CCC","FFF", "EEE"};
    sort(arr,arr+5);
    for(string i: arr)
    {
        cout << i << endl;
    }
} 
```

输出是：

```
AAA
BBB
CCC
EEE
FFF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T21:37:12.397

```
int sortStrarr(string strarr[], int len){
     sort(&strarr[0],&strarr[len],compare) ;
    //sort(strarr's iterator.begin, strarr's iterator.end, compare); ???
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-11T15:39:25.683

我们必须使用 sort 函数对字符串数组进行排序。

```
int main()
{
   string arr[5] = {"e", "b", "c", "d", "a'};
   sort(arr, arr+5);
   for(int i=0; i<5; i++)
   {
     cout<<arr.at(i)<<" ";
   }
   return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-11T12:32:42.350

自由函数`std::begin()`和`std::end()`（自 C++11 起）专门用于数组类型，但编译器必须知道大小：

```
template <typename T, std::size_t N>
int sortStrarr(T array[N])
{
    // 'using' allows ADL to select best overload
    using std::begin;
    using std::end;
    std::sort(begin(array), end(array));
} 
```

如果您只有开始和（运行时）大小，那么您可以使用指针作为迭代器：

```
template <typename T>
int sortStrarr(T array[], size_t len)
{
    std::sort(array, array+len);
} 
```

# ios - 从 xcode 和最近列表结束 iOS 应用程序之间的区别

> ID：15669903
> 
> 赞同：2
> 
> 时间：2013-03-27T21:30:44.337
> 
> 标签：ios

从 xcode 结束 iOS 应用程序和从最近的后台应用程序列表中显式（手动）结束它有区别吗？

我问的原因是：在 Apple 文档的某些地方（例如推送通知），他们提到必须明确结束应用程序才能重置某些内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:38:34.937

在这两种情况下`SIGKILL`，都会向应用程序的进程发送信号以杀死它，因此应该没有区别。

# c - 在不满足条件的情况下执行功能条件

> ID：15669904
> 
> 赞同：1
> 
> 时间：2013-03-27T21:30:49.240
> 
> 标签：c, function, return

我声明我的变量

```
int exceedLimit = 0; 
```

我调用一个函数

```
 compareLimit(selectChannel,exceedLimit); 
```

该功能检查选择通道的当前值是否超过当前设置限制（上限设置为 100，下限设置为 50）。默认情况下，在用户更改某些值之前不应触发它。

```
int compareLimit (int channelID, int isLimitExceeded)
{

if (temperatureChannel[channelID].currentTemperature > temperatureChannel[channelID].highLimit || temperatureChannel[channelID].currentTemperature < temperatureChannel[channelID].lowLimit)
     isLimitExceeded = 2;      
else
    isLimitExceeded = 1;

return isLimitExceeded;

} 
```

现在这是下一行代码中的问题......在前面的函数中我返回isLimitExceeded，然后我尝试匹配该返回值以确定警报状态是否应该触发。这个 if 语句是在 compareLimit 之后写的

```
 if (exceedLimit = 2)
             logSubsystem(); 
```

当我运行这个程序时，我的超出限制立即触发并且我的 logsubsystem 函数被调用......但是因为我`exceedLimit = 0`在我的 cpp 文件的开头声明了这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T21:32:18.927

`if (exceedLimit = 2)`应该是`if (exceedLimit == 2)`。

`if (exceedLimit = 2)`在这里，您将值*2*分配给`exceedLimit`而不是将其值与*2*进行比较。

请注意，赋值表达式*返回分配的值*，在这种情况下`if(exceedLimit = 2)`将始终为*true* ，这就是为什么始终执行*if 语句*下方的代码的原因。

# jquery - .scrollLeft() 在 Chrome (Jquery) 中不起作用

> ID：15669911
> 
> 赞同：2
> 
> 时间：2013-03-27T21:31:00.903
> 
> 标签：jquery, google-chrome, scroll

我正在制作一个水平网站，当文档加载时会自动滚动到页面中间（页面宽度等于窗口宽度的 3 倍）。但是我使用的代码在 Chrome 中不起作用。

我正在使用这种方法：

```
$(document).ready(function(){
     $(this).scrollLeft(value);
}); 
```

我在其他浏览器上（甚至在平板电脑上）检查过它，它完全符合我的要求。但是chrome根本没有做任何事情。（没有错误）。

有人有解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:36:23.850

`$(this).scrollLeft(value);`不好。`$(this)`指向`$(document)`。它应该是`$("body")`或`$("#parentdiv")`酌情。

使用以下内容：

```
$(document).ready(function(){
     $("#parentdiv").scrollLeft(value);
}); 
```

并更改`parentdiv`为围绕所有内容的元素的 id。如果没有看到你所有的 CSS，我真的无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T16:22:16.633

$("#el").animate({ scrollLeft:110 }, "fast");

# c# - 为什么我的文本文件会突然停止保存？

> ID：15669917
> 
> 赞同：1
> 
> 时间：2013-03-27T21:31:40.250
> 
> 标签：c#, debugging, compact-framework, windows-ce, streamwriter

在这里受到更聪明的头脑的温和批评，我将我对 MessageBox.Show() 的调用切换到将行写入 StringBuilder ，然后将其保存到文件中，两者都来自应用程序的自定义异常处理程序：

```
public static void ExceptionHandler(Exception ex, string location)
{
    try
    {
        if (inDebugMode)
        {
            LogMsgs.Append(string.Format("{0}\r\n", ex.Message)); 
            DateTime dt = DateTime.Now;
            string timeAsStr = string.Format("{0}_{1}_{2}_{3}.txt", dt.Hour, dt.Minute, dt.Second, dt.Millisecond);
            using (StreamWriter file = new StreamWriter(timeAsStr))
            {
                // If the app crashes, this is how the file is written; if it doesn't, it's written
                // in frmCentral.Form1_Closing()
                file.WriteLine(LogMsgs.ToString());
            }
        }
        MessageBox.Show("Exception: " + ex.Message + "\n\nLocation: " + location, GetFormTitle("CCR: " + ex.GetType().FullName,"",""));
    } 
```

（......它被称为这样的：

```
catch (Exception ex )
{
    CCR.ExceptionHandler(ex, "WriteXML.WriteFile");
    . . . 
```

) ...以及来自主窗体的 Closed() 事件：

```
private void frmCentral_Closed(object sender, EventArgs e)
{
    if (CCR.inDebugMode)
    {
        DateTime dt = DateTime.Now;
        string timeAsStr = string.Format("{0}_{1}_{2}_{3}.txt", dt.Hour, dt.Minute, dt.Second, dt.Millisecond);
        using (StreamWriter file = new StreamWriter(timeAsStr))
        {
            // If the app closes normally, this is how the file is written; if it doesn't, 
            // (it crashed) it's written in PDAClient.ExceptionHandler()
            file.WriteLine(CCR.LogMsgs.ToString());
        }
    }
} // frmCentral_Closed 
```

直到今天早些时候，这才有效。我没有更改该代码。但是现在，无论代码是否崩溃（我可以从主窗体关闭它），文件都没有被写入（至少没有写入之前写入的位置，即手持设备的根目录）。

我正在添加类似的消息：

```
CCR.LogMsgs.Append(string.Format("DBCommand exception: {0}\r\n", ex.Message)); 
```

..并且 inDebugMode 布尔值确实被设置为 true 而无处为 false：

```
public static bool inDebugMode = true; //TODO: Change this to false before deploying. 
```

是什么导致了这种恶意的遗漏？

## 更新

要回答 jp2code：

这就是 ExceptionHandler 在其 catch 块中所做的：

```
catch(Exception exc)
{
    MessageBox.Show("Exception Handler generated an exception!\n" + exc.Message + "\n\nCalling Location: " + location, GetFormTitle("CCR: " + exc.GetType().FullName,"",""));
} 
```

请注意，我没有编写此代码，因此我经常（通常？）不知道其中大部分背后的动机或心态。对我来说，这似乎比 Italienfest 更意大利面，但也许我只是不理解它。

很多东西并不是它们在代码中出现的那样，例如，被命名为布尔函数的 void 函数，以及你会认为（无论如何我会）的 ExceptionHandler() 方法，它是一个全局/catch-所有异常处理程序，但实际上必须在整个代码中从 catch 块显式调用才能执行。

另外：我尝试实现 errHndlrLock 代码，但得到编译错误消息，“*非静态字段、方法或属性 'PDAClient.SSCS.errHndlrLock' 需要对象引用*”

## 更新 2

今天又开始工作了；一定是内存问题或类似问题 - 尽管我昨天确实进行了热启动，没有喘息的机会。所以：它起作用了，它突然不起作用，就像突然（一夜之间）一样，它又开始起作用了。

## 更新 3

我认为这是在令人难以置信的神秘消失的调试日志文本文件的情况下发生的事情的线索。当我今天打开最近的那些时，它们充满了：

```
StackOverflowException
StackOverflowException
StackOverflowException
StackOverflowException
StackOverflowException
StackOverflowException
StackOverflowException 
```

......这些已经够多了，我想整个shebang都决定去度假了。不过，现在它又暂停了——这首 CE 爵士乐比我祖母的馅饼皮还要脆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:53:27.937

我可能是错的，但看起来您的流缓冲区没有被刷新。

尝试添加

```
file.Flush(); 
```

在您致电 writeline 之后。另外，我没有看到您明确关闭流的地方。这样做是个好习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:50:10.453

Nat 可能会对这个`Flush`电话感兴趣。我给了他+1。

可能发生的另一件事（我遇到的）是多个项目试图一次访问您的异常处理程序。

假设您正在关闭表单，并且在您的一种方法中捕获了异常。现在，您有两 (2) 个例程试图`timeAsStr`一次访问您的文件，这是不可能的。

一个解决方案是`lock`在您的异常处理程序例程中添加一个：

```
private object errHndlrLock = new Object();

public void ExceptionHandler(Exception ex, string location) {
  lock (errHndlrLock) {
    // continue with your code
  }
} 
```

想到的另一件事：我看到您的异常处理程序代码显示了`try/catch`块的一部分。

**问：你如何处理你捕获的异常？**

如果您递归调用相同的方法，这可能是您丢失信息的原因。

如果您想采用不同的方法，您可以使用`Queue`, 定义的全局类，以及您的`StreamWriter`:

```
class CCR {

  private Queue<string> m_queue;
  private StreamWriter m_writer;

  public CCR() {
    m_queue = new Queue<string>();
    m_writer = new StreamWriter(string.Format("Log_{0}.txt", DateTime.Now.ToFileTime()));
  }

  public void ExceptionHandler(Exception ex, string location) {
    string item = string.Format("{0:u}: {1}\r\n\t\t{2}", DateTime.Now, location, ex.Message);
    if (ex.InnerException == null) {
      m_queue.Enqueue(item);
    } else {
      m_queue.Enqueue(item + string.Format("\r\n\t\tInner Exception: {0}", ex.InnerException.Message));
    }
    QueueHandler();
  }

  private void QueueHandler() {
    while (0 < m_queue.Count) {
      m_writer.WriteLine(m_queue.Dequeue());
    }
  }

  public void Close() {
    QueueHandler();
    m_writer.Flush();
    m_writer.Close();
    m_writer.Dispose();
  } 
```

只要确保`Close()`在代码退出之前调用

# actionscript-3 - 如何在 FDT 中进行“完全重建”？

> ID：15669918
> 
> 赞同：0
> 
> 时间：2013-03-27T21:31:40.860
> 
> 标签：actionscript-3, flash, build, fdt, rebuild

我将 IDE 切换为使用 FDT 并希望停止类型错误警告。我去了项目的属性> FDT问题> AS3，选中“启用项目特定问题”，并禁用“没有类型的函数”和“没有类型的变量”。这在我第一次运行项目时有效，但以后没有。属性面板显示“要应用这些设置，需要完全重建项目！” 我想做一个完整的重建，但 Project > Build All 是灰色的。

我究竟做错了什么？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:48:21.843

如果您启用了 Project -> Build Automatically，则 Project -> Build All 将被禁用。您需要选择 Project -> Clean... 来清理项目，这将启动重建。

无论如何，您都需要进行清理，以确保重建项目中的所有内容。

# python - 将宏添加到 Python

> ID：15669921
> 
> 赞同：35
> 
> 时间：2013-03-27T21:31:52.533
> 
> 标签：python, macropy

我想在下面的代码中引用的任何地方**就地**`MY_MACRO`调用以下代码。

```
# MY_MACRO
frameinfo = getframeinfo(currentframe())
msg = 'We are on file ' + frameinfo.filename + ' and line ' +  str(frameinfo.lineno)
# Assumes access to namespace and the variables in which `MY_MACRO` is called. 
current_state = locals().items() 
```

这是一些将使用的代码`MY_MACRO`：

```
def some_function:
    MY_MACRO

def some_other_function:
    some_function()
    MY_MACRO

class some_class:
  def some_method:
     MY_MACRO 
```

如果有帮助：

1.  我想拥有这种能力的原因之一是因为我想避免`MY_MACRO`在需要的地方重复代码。有一些简短而简单的东西会很有帮助。
2.  另一个原因是因为我想在宏中嵌入一个 IPython shell，并且我想访问其中的所有变量`locals().items()`（请参阅[另一个问题](https://stackoverflow.com/questions/15669186/using-ipython-as-an-effective-debugger)）

这在 Python 中完全可能吗？让这个工作最简单的方法是什么？

请**注意**，该宏假定可以访问调用它的作用域的整个命名空间（即**仅将**代码`MY_MACRO`放在**函数中是行不通的**）。另请注意，如果我放置`MY_MACRO`在一个函数中，`lineno`将输出错误的行号。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-11T04:10:38.453

[MacroPy](https://github.com/lihaoyi/macropy)是我的一个项目，它为 Python 带来了语法宏。该项目只有 3 周的历史，但是如果您查看链接，您会发现我们有一个非常酷的演示集合，并且您想要的功能绝对可以使用它来实现。

另一方面，python 有一些非常惊人的自省功能，所以我怀疑你可以完全使用这些功能来完成你想要的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-27T21:34:33.627

你可以调用的函数怎么样？此函数访问调用者的框架，而不是 using `locals()`，用于`frame.f_locals`获取调用者的命名空间。

```
def my_function():
    frame = currentframe().f_back
    msg = 'We are on file {0.f_code.co_filename} and line {0.f_lineno}'.format(frame)
    current_state = frame.f_locals
    print current_state['some_variable'] 
```

然后调用它：

```
def some_function:
    my_function()

def some_other_function:
    some_function()
    my_function()

class some_class:
  def some_method:
     my_function() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-03T19:06:10.280

不赞成使用 of `exec`，但在这里应该可以解决问题。例如，采用以下宏：

```
MY_MACRO = """
print foo            
""" 
```

并使用以下代码运行它：

```
foo = "breaking the rules"
exec MY_MACRO in globals(),locals() 
```

始终要小心`exec`，因为它可能会产生[奇怪的副作用](http://lucumr.pocoo.org/2011/2/1/exec-in-python/)并为代码注入提供机会。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T23:39:30.943

我不确定这是否是一个好的解决方案，但至少值得考虑使用宏预处理器。

有一些不同的extend-Python-with-macros 项目，或者更广泛的项目应该让这样的事情更容易做，但我只有所有这些项目（Logix、MetaPython、Mython、Espy）的过期链接......它可能是值得寻找当前链接和/或更新/肝脏项目。

你可以使用or 之类的东西，`m4`或者`cpp`更强大的东西，甚至自己构建一个。但实际上，您只有一个小的、静态的（到目前为止，只有一个）纯文本宏。在最坏的情况下，您必须检测缩进级别`MY_MACRO`并将其添加到每行的开头，这在正则表达式中是微不足道的。含义`sed`或 3 行 Python 脚本可以作为您的预处理器。

然而，有两个问题，或者至少是烦恼。

首先，您需要预处理您的文件。如果您已经在使用 C 扩展模块或生成的代码或任何其他需要您`setup.py`（或`make`或`scons`或其他）的代码才能运行它，或者您正在使用只需点击 cmd-R 或 ctrl-shift 的 IDE -B 或任何测试您的代码的东西，这不是问题。但是对于典型的编辑-测试循环，一个窗口中有一个文本编辑器，另一个窗口有一个交互式解释器……好吧，你刚刚把它变成了一个编辑-编译-测试循环。啊。我能想到的唯一解决方案是一个导入钩子，它在将每个文件作为模块导入之前对其进行预处理，这似乎需要做很多工作才能带来一点好处。

其次，您的行号和源（来自`MY_MACRO`其本身，以及来自回溯`inspect.getsource`等）将是预处理文件的行号，而不是您打开以进行编辑的原始源。由于您的预处理文件可读性很强，这并不*可怕*（不像编写 CoffeeScript 并像 JavaScript 那样调试它那么糟糕，大多数 CoffeeScript 社区每天都在这样做......），但这绝对是一个烦恼。

当然，解决此问题的一种方法是将您自己的宏处理器构建到解释器中，在您想要的解析/编译过程的任何阶段。我猜这比你想做的要多得多，但如果你*这样做*了，好吧，Guido 总是更喜欢有一个实际工作的设计和实现来拒绝，而不是不得不继续拒绝“嘿，让我们添加宏到 Python”。:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-03T08:46:49.117

如果您只需要调用者的行和函数名，就像我调试所需的那样，您可以通过 inspect.getouterframes [link](https://stackoverflow.com/a/3711243/886607)获取调用者函数信息。

```
import inspect
def printDebugInfo():
  (frame,filename,line_number,function_name, lines, 
    index) = inspect.getouterframes(inspect.currentframe())[1]
  print(filename, line_number, function_name, lines, index)

def f1():
  printDebugInfo()

if __name__=='__main__':
  f1() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-27T21:35:04.363

如果你想，你可以使用函数：

```
def MY_MACRO():
    frame = currentframe()
    try:
        macro_caller_locals = frame.f_back.f_locals
        print(macro_caller_locals['a'])

    finally:
        del frame

def some_function:
    a = 1
    MY_MACRO() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T21:39:19.493

我想说您应该定义一个函数来执行此操作，因为 Python 中没有宏。看起来您想要捕获当前的堆栈帧，您可以通过`currentframe()`从调用站点传递到您的共享函数来简化它。与当地人同上。

```
def print_frame_info(frameinfo, locals):
    msg = 'We are on file ' + frameinfo.filename + ' and line ' +  str(frameinfo.lineno)
    current_state = locals.items()

def some_other_function:
    some_function()
    print_frame_info(currentframe(), locals()) 
```

# python - 如何构建 oauth api 调用？

> ID：15669924
> 
> 赞同：2
> 
> 时间：2013-03-27T21:32:02.377
> 
> 标签：python, perl, bash, oauth, tumblr

我正在尝试在[http://api.tumblr.com/v2/user/likes](http://api.tumblr.com/v2/user/likes) url 上为用户获取 tumblr“喜欢”的帖子。我已经在 tumblr 注册了我的应用并授权该应用访问用户的 tumblr 数据，所以我有`oauth_consumer_key`、 `oauth_consumer_secret`、`oauth_token`和`oauth_token secret`。但是，当我进行 api 调用时，我不确定如何处理这些细节。我正在尝试创建一个仅输出 json 以供进一步处理的命令行脚本，因此 bash (cURL)、Perl 或 python 中的解决方案将是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:25:02.423

好吧，如果您不介意使用 Python，我可以推荐[rauth](https://github.com/litl/rauth)。没有 Tumblr 示例，但有[真实世界](https://github.com/litl/rauth/tree/master/examples)的 OAuth 1.0/a 和 OAuth 2.0 工作示例。API 旨在简单明了。我不确定您可能还有什么其他要求，但也许值得一试？

如果您有兴趣，这是一个工作示例：

```
from rauth import OAuth1Service

import re
import webbrowser

# Get a real consumer key & secret from http://www.tumblr.com/oauth/apps
tumblr = OAuth1Service(
    consumer_key='gKRR414Bc2teq0ukznfGVUmb41EN3o0Nu6jctJ3dYx16jiiCsb',
    consumer_secret='DcKJMlhbCHM8iBDmHudA9uzyJWIFaSTbDFd7rOoDXjSIKgMYcE',
    name='tumblr',
    request_token_url='http://www.tumblr.com/oauth/request_token',
    access_token_url='http://www.tumblr.com/oauth/access_token',
    authorize_url='http://www.tumblr.com/oauth/authorize',
    base_url='https://api.tumblr.com/v2/')

request_token, request_token_secret = tumblr.get_request_token()

authorize_url = tumblr.get_authorize_url(request_token)

print 'Visit this URL in your browser: ' + authorize_url
webbrowser.open(authorize_url)
authed_url = raw_input('Copy URL from your browser\'s address bar: ')
verifier = re.search('\oauth_verifier=([^#]*)', authed_url).group(1)

session = tumblr.get_auth_session(request_token,
                                  request_token_secret,
                                  method='POST',
                                  data={'oauth_verifier': verifier})

user = session.get('user/info').json()['response']['user']

print 'Currently logged in as: {name}'.format(name=user['name']) 
```

完全披露，我保持沉默。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:46:56.040

我好像找到了答案。我最终在 perl 中使用 OAuth::Consumer 连接到 tumblr API。这是迄今为止我发现的最简单的解决方案，并且可以正常工作。

# php - 单个与多个功能

> ID：15669926
> 
> 赞同：0
> 
> 时间：2013-03-27T21:32:14.780
> 
> 标签：php, codeigniter, function, methods

我正在为我正在处理的 MVC 项目开发模型。我想知道是否最好为一项任务提供多个功能，或者为每种可以处理的方式提供一个功能。例如，最好有类似的东西：

```
public function get($identifiers = null, $limit = null, $offset = null)
{
    if ($identifiers != null) {
        if (is_array($identifiers)) {
            $this->db->where($identifiers);
        } else {
            $this->db->where($this->_key, $identifiers);
            $method = 'row'.($this->_return_array ? '_array' : '');
            return $this->db->get($this->_table)->$method();
        }
    }

    if ($limit != null) {
        $this->db->limit($limit, $offset || null);
    }

    if (!count($this->db->ar_orderby)) {
        $this->db->order_by($this->_order);
    }

    $method = 'result'.($this->_return_array ? '_array' : '');
    return $this->db->get($this->_table)->$method();
} 
```

处理多种情况或具有单独的功能，例如

```
get($id) {}
get_where($where) {}
get_all() {} 
```

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:35:52.550

单独的功能遵循单一职责原则，比一个尝试做很多事情的功能更接近。这意味着您将拥有更易于理解、调试、修改和测试的更小的函数。在几乎所有情况下，您最好使用多个特定功能而不是一个单一功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:38:39.840

这取决于这些函数内部发生了什么。如果大部分业务逻辑都是一样的，只是输入参数不同（比如说，你需要准备不同的参数，但之后逻辑是一样的），那么我会选择单个函数。在其他情况下，我会做多个较小的功能 - 它更易于维护，更容易理解那里发生的事情。

# ruby-on-rails - Ruby on Rails - 避免全局变量

> ID：15669934
> 
> 赞同：1
> 
> 时间：2013-03-27T21:32:26.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个 Rails 应用程序，我在其中使用一些全局变量根据日期在页面上显示一些结果。日期范围变量是全局变量。现在的问题是，当不止一个人同时访问应用程序时，全局变量是共享的，并且对于应用程序的每个实例不是唯一的。

有人可以指出我为应用程序的每个实例处理变量的好方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:36:48.243

您应该使用实例变量，而不是全局变量（实际上永远不应该使用）。在这里，它们被设置为在日期范围内查找订单

```
class OrdersController < ActionController::Base
  def index
    @start_date = params[:start_date] || 30.days.ago
    @end_date   = params[:end_date] || 30.days.ago
    @orders =  Order.where("start_date >= ?", @start_date).where("end_date <= ?", @end_date)
  end
end 
```

注意：实际上，您在网上找到的每个示例都将使用上述样式，并且不会使用 ruby​​ 全局变量。

# c# - Aspose PDF - 如何指定文本框的字体

> ID：15669946
> 
> 赞同：0
> 
> 时间：2013-03-27T21:33:06.627
> 
> 标签：c#, pdf, fonts, pdf-generation, aspose

我正在使用 Aspose PDF for .NET，尝试使用 TextBox 创建一个非常简单的 PDF。我有这部分工作 - 因为它非常简单。

但是，我想更改框中文本的字体，以便在打印时字体为红色（例如）。

这是我*认为*应该工作的代码：

```
// Create a PDF sample PDF file.
var formEditor = new FormEditor("blank.pdf", "result.pdf");

// Create a "style" for the PDF.
formEditor.Facade = new FormFieldFacade();
formEditor.Facade.BackgroundColor = System.Drawing.Color.Yellow;
formEditor.Facade.Font = FontStyle.TimesBold;
formEditor.Facade.TextColor = System.Drawing.Color.Red;
formEditor.Facade.FontSize = 24;

// Add a text box called "FirstName".
formEditor.AddField(FieldType.Text, "FirstName", 1, 100, 800, 260, 780);
formEditor.SetFieldAppearance("FirstName", AnnotationFlags.Print);

// Save the result.
formEditor.Save(); 
```

生成的 PDF 有文本框，背景是黄色......但前景文本不是红色，也不是 24 号，字体“TimesBold”也不是 - 就好像文本的实际字体没有任何作用*。*

请注意 PDF 中的内容，如果我打印它...

![带有黄色文本框但没有红色字体的 PDF](../Images/fd52305b278e5cee89276451805113f5.png)

![带有黄色文本框但没有红色字体的 PDF 打印为 XPS 文件](../Images/bdeba26a6a45630cc2966996ca206bc5.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:40:22.427

嗯，这很简单。

我使用的是 6.4 版（一年多前购买的）......这实际上是一个从那时起已经修复的错误（我相信在 7.3 版中）。

谢天谢地，我的许可证有效期为 2012 年 12 月 29 日，所以我能够获得 7.6 版 :)

# image - Jquery拖放克隆图像问题

> ID：15669952
> 
> 赞同：0
> 
> 时间：2013-03-27T21:33:30.977
> 
> 标签：image, drag-and-drop, resize, clone

我正在开发一个拖放项目，需要将可调整大小的图像的克隆拖到拖放区。一旦它被放下，我希望克隆也可以调整大小和拖动。我不想创建克隆的克隆......只是能够移动它。我的目标是使图像的每个克隆都独立于原始图像。我的想法是我为原始文件指定一个 id，并在删除每个克隆时更改它的 id。我研究并注意到一般建议是将图像包装在标签中并使用图像的“alsoResize”调整其大小。我的问题是，一旦我创建了克隆并放下它，我就不能再调整它的大小或拖动它了。这是我正在使用的一些代码...

```
 <!doctype html>
    <html lang="en">
    <head>  
    <meta charset="utf-8">
    <title>draggable demo</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css">  
    <style>  

        #draggable {    
            width: 100px;    
            height: 100px;    
            background: #ccc;  }  
        #drophere {
            width:600px;
            height:600px;
            border: 1px solid black;
            }

    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
    <script type="text/javascript">
      // set global id counter
      var gIDCnt = 0;
    </script>
    </head>
    <body style="width: 1000px; height: 800px;"> 

   <div id="draggable">Drag me</div> 
   <div id="img0" class="imgwrapper">
        <img class= "image" src="koala.jpg" style="height: 100px;" alt="Koala Bear" />
   </div> 
    <script>
     $(function(){

        $( "#draggable" ).resizable().draggable();

        $(".imgwrapper").resizable({
             aspectRatio: true,
             handles: 's,e,se',
             alsoResize: '.image'
        }).draggable({
            helper: "clone",
            revert: "invalid",
            appendTo: "body"
        });

        $("body").droppable({
        accept: ".draggable, .imgwrapper, .onQuestion, .image",
        drop: function (event, ui) {        

            var isOnQuestion = $(ui.draggable).hasClass("onQuestion");
            if (isOnQuestion == true) {
                // Have already dropped this once, don't use clone anymore
                var element = $(ui.draggable);
            } else {
                var element = $(ui.draggable).clone();
            };

             // Set the absolute position of object
            var offset = $(this).offset();
            var pos = $(ui.helper).offset();
            var x = pos.left - offset.left;
            var y = pos.top - offset.top;
            $(element).css({ "left": x, "top": y, "position": "absolute" });

            if (isOnQuestion == false) {
                 //alert("Not on Question");
                 $(element).removeClass("imgwrapper");
                 //$(element).resizable("destroy");
                 //$(element).draggable("destroy");
                 gIDCnt= gIDCnt + 1;
                 var nextID = gIDCnt.toString();
                 var cNextID = "img"+nextID;

                 //alert(" ID: "+cNextID);
                 // Update with new ID
                 $(element).prop("id",cNextID);
                 var curid = $(element).attr("id");
                 $(element).addClass("onQuestion");
                 //alert("id: "+$(element).attr('id'));
                 $(element).children(".image").addClass("imageOn");

                 $(element).children(".image").removeClass("image");
                 //alert("id: "+$(element).attr('id'));
                 var cToResize = "#img"+nextID+" > .imageon";
                 //alert("cToResize: "+cToResize);
                 // Here's where I tried to make resizable
                 //$(element).resizable();
                 //$(element).resizable("option",{
                 // alsoResize: cToResize,
                 // aspectRatio: true,
                 // });
                 $('#'+cNextID).draggable();
                 $(element).css({border: "1px solid red"});

          }     
            $("body").append(element);
        }
       });
    });

    </script>
    </body>
    </html> 
```

我更新每个克隆图像的“id”，然后使用新的 id 作为调整大小的选择器进行调整大小。但是，如果我尝试破坏新克隆对象的调整大小和可拖动功能，然后尝试调整大小等。然后没有任何效果。您会在我的代码中注意到我注释掉了几个警报。我为每个克隆的对象添加了一个类（onQuestion），这样我就可以检测到它之前何时被放入 dropzone，这样我就不会再次尝试克隆它。我删除了原始类（imgWrapper）但是当我尝试执行时......

```
 $(element).resizable("destroy");
        $(element).draggable("destroy"); 
```

后面的代码都不会执行。我开始怀疑我是否需要研究使用事件处理程序。

有人有建议吗？

谢谢，肯

# facebook-fql - 显示所有消息 fql

> ID：15669954
> 
> 赞同：1
> 
> 时间：2013-03-27T21:33:40.023
> 
> 标签：facebook-fql, messages

我目前正在使用 fql 查询来检索消息的正文，并且我只知道每条消息的线程 ID 和消息计数：

```
SELECT body FROM message WHERE message_id = '".$thread['thread_id']."_".$cnt."' 
```

但我收到此错误：

> 未捕获的异常：9：您调用方法过于频繁

执行需要几分钟。还有另一种方法来检索只知道 thread_id 的所有消息吗？

# c# - 如何注册 CLR 用户定义函数以用于 linq 查询？

> ID：15669956
> 
> 赞同：1
> 
> 时间：2013-03-27T21:34:01.163
> 
> 标签：c#, linq, sql-server-2008-r2, clr

使用 SQL Server 2008，我想在比较数据库值之前对其运行正则表达式。

我正在研究 CLR 用户定义函数（我调查了 EDM 函数，但我觉得 UDF 更适合使用正则表达式 - 如果我错了，请纠正我）。

理想情况下，我想像这样进行 linq 调用：

```
var results= db.Items.Where(i => i.CustomFormatFunction() == xyz); 
```

到目前为止，我有这个 c# 代码：

```
public static partial class UserDefinedFunctions
{
    [SqlFunction]
    public static SqlString CustomFormatFunction(string str)
    {
        return Regex.Replace(Regex.Replace(HttpUtility.HtmlDecode(str), @"\s+", "-"), "[^a-zA-Z0-9/-]+", "").ToLower();
    }
} 
```

为了让我能够在 linq 查询中使用它，还需要哪些进一步的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:43:07.523

实际上，我前段时间编写了这个确切的函数。我的用途更普遍，但它看起来像这样：

```
[SqlFunction(DataAccess = DataAccessKind.Read, IsDeterministic = true)]
public static string Replace(string input, string pattern, string replacement, int options)
{
    return Regex.Replace(input, pattern, replacement, (RegexOptions)options);
} 
```

然后你必须在 SQL 中注册它

```
CREATE ASSEMBLY [MyAssembly] 
FROM 'C:\Path\To\Assembly\MyAssembly.dll'
WITH PERMISSION_SET = SAFE
GO

CREATE FUNCTION [dbo].[Replace](@input [nvarchar](4000), @pattern [nvarchar](4000),  @replacement [nvarchar](4000), @options [int] = 0)
   RETURNS [nvarchar](4000) NULL
   WITH EXECUTE AS CALLER
   AS EXTERNAL NAME [MyAssembly].[MyNamespace.UserDefinedFunctions].[Replace]
GO 
```

这将在 SQL 中创建您的 CLR-UDF。我从未尝试链接*回*linq 查询，但我认为它会像任何其他 EDM 功能一样工作。

```
[EdmFunction("dbo", "Replace")] 
public static string Replace(Replace input, pattern, replace, int flags) 
{ 
    throw new NotSupportedException("Direct calls not supported"); 
} 
```

您*甚至*可以在同一个方法上放置`SqlFunction`和`EdmFunction`属性，但我不推荐它（这似乎也推动了循环的极限）。我更喜欢将我的 CLR-UDF 函数保存在一个完全独立的程序集中，因为它们很少更改，而且我使用数据的程序集非常动态。

# javascript - 如何遍历 div 中的所有元素并查找包含文本的标签

> ID：15669970
> 
> 赞同：2
> 
> 时间：2013-03-27T21:34:48.323
> 
> 标签：javascript, jquery

我试图遍历一个包含各种元素的 div。问题是，我的示例中显示了相同的结果。

这是示例代码的小提琴：http: [//jsfiddle.net/JLtCN/](http://jsfiddle.net/JLtCN/)

所以我的示例的 html 结构如下所示：

```
<div class="somediv">
    <span>hello</span>
    <img src="someimg.jpg" width="20" height="20" />
    <p></p>
    <div><p>some text in a paragraph inside a div</p></div>
    <h2>Some h2 tekst</h2>
    <table>
        <tbody>
            <tr>
                <td>some text in a table cell</td>
            </tr>
        </tbody>
    </table>
</div> 
```

我的目标是获取 html 标签内的所有内容。像这样，

```
tagtype: <span>, text: 'hello',
tagtype: <p>, text: 'some text in a paragraph inside a div'
etc. 
```

有谁知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:41:53.267

尝试这个：

```
$('.somediv *').each(function() {
    var hastext = $(this).text().length != 0;
    if(hastext) {
        console.log("type: " + $(this)[0].tagName + " text: " + $(this).text());
    }
}); 
```

演示：http: [//jsfiddle.net/JLtCN/1/](http://jsfiddle.net/JLtCN/1/)

**如果您想摆脱欺骗，只需将记录的项目存储在一个数组中，然后在记录之前检查它是否不在数组中，例如：**

**此外，它现在以相反的顺序执行它们，因此您只获得最低的子实例**：

```
var addedItems = new Array();

$.each($('.somediv *').toArray().reverse(), function() {
    var hastext = $(this).text().length != 0;
    if(hastext && addedItems.indexOf($.trim($(this).text())) == -1) {
        addedItems.push($.trim($(this).text()));
        console.log("type: " + $(this)[0].tagName + " text: " + $(this).text());
    }
}); 
```

演示：http: [//jsfiddle.net/JLtCN/3/](http://jsfiddle.net/JLtCN/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:37:34.863

像这样的东西：

```
var seenStrings = [],
    content = $.map(
        $(".somediv *"),
        function(element) {
            var text = $(element).text();
            if ($.inArray(text, seenStrings) !== -1) {
              return {
                  tagname: "<" + element.nodeName.toLowerCase() + ">",
                  text: $(element).text()
              };
            } else {
              return null;
            }
        }
    ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:51:55.327

```
var walk_the_DOM = function walk(node, func) {
    func(node);
    node = node.firstChild;
    while (node) {
        walk(node, func);
        node = node.nextSibling;
    }
};

walk_the_DOM(document.body, function(node) {
    if(node.nodeType == 1){
        document.write(node.nodeName + ": " );
    }        
    if(node.nodeType == 3){
        document.write(node.nodeValue +" <br/>");
    }
}); 
```

# c# - Win 商店应用试用模式

> ID：15669972
> 
> 赞同：2
> 
> 时间：2013-03-27T21:34:56.767
> 
> 标签：c#, windows-store-apps, windows-store

我对 Win 8 Store (metro) 应用程序的试用模式感到困惑。

我正在阅读一些资源和文档，例如 MSDN 网站，了解如何限制时间，因为这是我想要做的，但商店提供了在应用程序上提交的试用选项 - 因此您可以将试用模式设置为 7 天例子。

只需将此商店选项设置为 7 天，然后应用程序将不再打开，提醒用户到期，或者，我是否还必须实现时间到期代码？

# javascript - 双击提示窗口 [Google 地图]

> ID：15669976
> 
> 赞同：0
> 
> 时间：2013-03-27T21:35:19.703
> 
> 标签：javascript, html

我试图让用户在双击时输入标记的标题。我似乎无法让它工作。

如何使提示窗口显示在双击而不是单击？

这在 HTML5/Javascript 中可行吗？我们还没有学习 jQuery。

```
 <!DOCTYPE html>
<html>
<head>
<title>Boca Raton Map</title>
<meta charset="UTF-8">
<style>
header {font-family:Georgia,"Times New Roman",serif;
    font-size:20px;
    display:block;

}
</style>
<script type="text/javascript" charset="UTF-8" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" charset="UTF-8">
var locations = [
    [26.3583333, -80.0833333, "Boca Raton, FL"],
        ]
function init() 
{
 makemap(locations[0][0],locations[0][1]);
 document.getElementById("header").innerHTML = "Base location is "+locations[0][2];
}

var listener;
var map;
var markersArray =[];
var blatlng; 
var myOptions; 

function makemap(mylat,mylong) 
{

 blatlng = new google.maps.LatLng(mylat,mylong);
 // alert("latlng is "+latlng);
 myOptions = {
      zoom: 14,
      center: blatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
 map = new google.maps.Map(document.getElementById("place"), myOptions);

 listener = google.maps.event.addListener(map, 'click', function(event){
            checkit(event.latLng);                                   
            }); 
}

//function disp_prompt()
 //{
  //var mTitle=prompt("Please enter a marker title:", "Marker Title");
 //}

function checkit(clatlng) 
{
    var mTitle=prompt("Please enter a marker title:", "Marker Title")
    var distance = dist(clatlng,blatlng);
    distance = Math.floor((distance+.005)*100)/100;
    var distanceString = String(distance)+" miles";
    marker = new google.maps.Marker({
                                     position: clatlng,
                                     title: mTitle,
                                     map: map });
    //markersArray.push(marker);
    //--
    //document.getElementById("answer").innerHTML  = 
    // "The distance from base to most recent marker is "+String(distance) +" miles.";
}

function dist(point1, point2) 
{
      //spherical law of cosines
      //var R = 6371; // km
      var R =  3959; // miles
      var lat1 = point1.lat()*Math.PI/180;
      var lat2 = point2.lat()*Math.PI/180 ;
      var lon1 = point1.lng()*Math.PI/180;
      var lon2 = point2.lng()*Math.PI/180;

        var d = Math.acos(Math.sin(lat1)*Math.sin(lat2) + 
                  Math.cos(lat1)*Math.cos(lat2) *
                  Math.cos(lon2-lon1)) * R;
    return d;     
}

//--
</script>
</head>
<body onLoad="init();" onclick="disp_prompt()">
<header id="header">Base location is your current geolocation.</header>
<div id="place" style="width:600px; height:400px"></div>
<div id="answer"></div>
</form>
</body>
</html> 
```

# wpf - ObjectDataProvider 作为 ComboBox 的源

> ID：15669979
> 
> 赞同：1
> 
> 时间：2013-03-27T21:35:23.937
> 
> 标签：wpf, xaml, f#

我在 ViewModel 类上定义了一个名为的静态属性

```
static member GetColumnTypes = FSharpType.GetUnionCases typeof<ColumnType> 
```

其中 ColumnType 是普通的联合类型

```
type ColumnType   = T_Link of TableName | T_Real | T_Bool | T_Int | T_String 
```

* * *

我不明白 XAML 在以下情况下绑定到此类集合的逻辑：

```
<UserControl.Resources>
  <ObjectDataProvider x:Key="typelist" MethodName="GetColumnTypes" ObjectType="{x:Type local:MarkupViewModel}"/>
  <local:MarkupViewModel x:Key="defaultVM" d:IsDataSource="True"/>
</UserControl.Resources>

  //1-WORKS
  <ComboBox ItemsSource="{Binding Source={StaticResource defaultVM}, Path=GetColumnTypes}"></ComboBox> 

  //2-DOES NOT WORK
  <ComboBox ItemsSource="{Binding Source={StaticResource typelist}}"></ComboBox>

  //3-DOES NOT WORK
  <ComboBox ItemsSource="{Binding Source={x:Type local:MarkupViewModel}, Path=GetColumnTypes}"></ComboBox>

  //4-WORKS
  <ComboBox ItemsSource="{Binding  Path=GetColumnTypes}" /> 
```

1.  为什么这行得通？我虽然命名的静态资源`defaultVM`是使用无参数构造函数创建一个对象。在这个对象上，没有 GetColumnTypes 方法！
2.  为什么它不起作用？我以为我在调用`GetColumnTypes`指定的类型。如果我看一下[获取 Enum values 的示例](https://stackoverflow.com/questions/6145888/how-to-bind-an-enum-to-a-combobox-control-in-wpf)，这似乎就是正在发生的事情。我的情况更简单，因为它没有参数
3.  同样，这不是在提到的类型上调用 he 方法吗？
4.  在这里，我将 datacontext 设置为我的 Viremodel 的一个实例，它“神奇地”知道 hos 从实例转到静态方法。

除了这些问题，我觉得它非常像黑盒魔法，我看到的关于绑定过程的信息很少。

说清楚的最佳方法是什么？
绑定过程可能有一些调试工具可用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:12:25.417

There are two things to know that should clear things up:

First, in XAML, you can access static members through an instance of the type. You can also do this in VB.NET, for instance with this code:

```
Dim x = New MarkupViewModel()
x.GetColumnTypes
MarkupViewModel.GetColumnTypes 
```

The last two lines are equivalent. In fact, the compiler rewrites the first line as the second. XAML is the same way. If you have an instance, you can access a static member through the same syntax as an instance member. (Other languages, like C# and F#, don't allow this syntax).

Second, `ObjectDataProvider` calls a *method*, but `GetColumnTypes` is a *property*. If you had defined it as `static member GetColumnTypes() = ...` I would expect it to work.

However, none of these approaches are really ideal. What you want to do is use the [x:Static](http://msdn.microsoft.com/en-us/library/ms742135.aspx) markup extension. This is what it was designed for.

In your namespace definitions (in the topmost tag of the XAML file), write something like this:

```
<UserControl [...] xmlns:local="clr-namespace:Your.Namespace"> 
```

And then have the combo box declare its items like this:

```
<ComboBox ItemsSource="{x:Static local:MarkupViewModel.GetColumnTypes}"> 
```

(although if you're keeping it as a property and not a function you should of course rename it as `ColumnTypes` not `GetColumnTypes`)

Oh, and as for diagnosing binding errors, quite a lot of debugging information is available through `Visual Studio Options > Debugging > Output Window > WPF Trace Settings`, which can dump a lot of information to the output window. However they can be somewhat difficult to interpret if you don't know WPF very well. An excellent general-purpose WPF utility is [Snoop](http://snoopwpf.codeplex.com/), which is good for many other reasons, but it can also display binding error information.

# php - Joomla var_dump 等效于插件中的数组

> ID：15669980
> 
> 赞同：3
> 
> 时间：2013-03-27T21:35:26.970
> 
> 标签：php, joomla, joomla2.5

我有一个注册后会触发的 Joomla 插件。我遇到了问题，但不知道如何正确调试它，因为插件只发生在事件上。

到目前为止，我一直在使用默认的 Joomla 日志记录：

```
jimport('joomla.log.log');
JLog::addLogger(array('text_file' => 'myfile.log.php'));

JLog::add('The value is: '.$something); 
```

这很好，但不适用于数组。如何将数组的内容转储到文件（或控制台）以查看发生了什么？目前它只会显示“数组”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T23:51:22.683

那这个呢：

```
JLog::add('The value is: '.print_r($something, true)); 
```

print_r() 的第二个参数设置为 true 意味着它返回一个字符串而不是输出它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T02:41:52.690

对于调试，最好的解决方案是使用与 XDebug 一起工作的 IDE（如[带有 PDT 的 Eclipse](http://projects.eclipse.org/projects/tools.pdt)或[Jet Brain 的 PhpStorm](http://www.jetbrains.com/phpstorm/)），但如果您尝试调试远程托管的 Joomla，它们并不总是实用的！网站。

在这种情况下，最好的解决方案之一是[J!Dump](http://extensions.joomla.org/extensions/miscellaneous/development/1509)，它可以让您显示所有数据类型，甚至弹出一个带有数据和进程树的调试窗口。

您可以在 Joomla! 的[开发](http://extensions.joomla.org/extensions/miscellaneous/development)部分找到它！扩展目录 ( [JED](http://extensions.joomla.org/) )

J!Dump 其他方法在[Joomla!'s Doc 网站上的“](http://docs.joomla.org/)[如何调试代码](http://docs.joomla.org/How_to_debug_your_code)”中讨论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:48:52.520

您可以尝试缓冲以下输出`var_dump()`：

```
[...]

ob_start();
var_dump($something);
$a=ob_get_contents();
ob_end_clean();

JLog::add('The value is: '.$a); 
```

来源：[http ://www.php.net/manual/de/function.var-dump.php#77234](http://www.php.net/manual/de/function.var-dump.php#77234)

# android - 如何自动更新您的 Android 应用程序？

> ID：15669982
> 
> 赞同：-1
> 
> 时间：2013-03-27T21:35:35.140
> 
> 标签：android, google-app-engine, currency

我正在创建一个用于货币兑换的应用程序。将美元兑换成外币。我创建了一个应用程序，但问题是我必须手动更新货币汇率。无论如何，我的应用程序是否可以让费率自行自动更新。这是我的应用程序的 Java 代码。在我的函数中查看 ConvertUSDtoEuro() 和 ConvertEurotoUSD()。我希望一切都清楚。

```
 package com.example.currencyconverter;

 import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.EditText;
 import android.widget.RadioButton;

 public class MainActivity extends Activity 
 {
  private EditText text;

  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    text = (EditText) findViewById(R.id.editText1);

  }

  public double ConvertUSDtoEuro(float USD)
  { return ((USD * .667)); }

  public double ConvertEurotoUSD(float Euro)
  { return ((Euro * 1.11)); }     

  public void onClick (View view)
  {
     switch (view.getId())
     {
     case R.id.button1:
         RadioButton USDButton = (RadioButton) findViewById(R.id.radio0);
         RadioButton EuroButton = (RadioButton) findViewById(R.id.radio1);
         float inputvalue = Float.parseFloat(text.getText().toString());

         if (USDButton.isChecked())
         {
             text.setText(String.valueOf(ConvertUSDtoEuro(inputvalue)));
             USDButton.setChecked(true);
             EuroButton.setChecked(false);   
         }

          else 
          {
              text.setText(String.valueOf(ConvertEurotoUSD(inputvalue)));
              USDButton.setChecked(false);
              EuroButton.setChecked(true); 
          }

          break;    
     }
  }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T21:38:47.677

您将需要创建一个可以使用 Google Finance API 或 Yahoo Finance api 获取此信息的服务。检查一下：[如何通过 Google 财经等 API 获取货币汇率？](https://stackoverflow.com/questions/3139879/how-do-i-get-currency-exchange-rates-using-google-finance-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:47:05.677

您可以使用推送通知并在进行更新时收到通知。您可以查看 Android Cloud 到设备的消息传递。[关联](https://developers.google.com/android/c2dm/)

替代解决方案是每次用户启动应用程序时，使用可用 API 更新服务中的值。

如果您正在开发一个严重依赖此货币更新的应用程序，并且您有点需要实时更新值，那么请使用 Push 服务。如果您的应用程序不断检查网站上的更新，它将消耗太多资源，这不是一个好主意。但如果它只是另一个货币转换器，请使用后台服务。

# .net - 随机函数重复返回相同的数字

> ID：15669995
> 
> 赞同：-2
> 
> 时间：2013-03-27T21:36:13.447
> 
> 标签：.net, vb.net, random

我在 vb.net 中有一个非常奇怪的问题，由于某种原因 system.random() 在我的任何函数中都不是随机的：

```
Public Function RandomNumber(ByVal MaxNumber As Integer, Optional ByVal MinNumber As Integer = 0) As Integer

        Dim R As System.Random = New System.Random()
        If MinNumber > MaxNumber Then
            Dim T As Integer = MinNumber
            MinNumber = MaxNumber
            MaxNumber = T
        End If
        Return R.Next(MinNumber, MaxNumber)
    End Function 
```

这是准确调用 9 次后的结果

```
4
4
4
3
3
3
3
3
3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T21:37:55.513

这是因为 Random 是如何实现的。最简单的解决方法是在类级别声明以下行，而不是在函数内。

```
 Dim R As System.Random = New System.Random() 
```

Random 类使用时间作为种子。您这样做的方式很可能每秒多次声明一个新的 Random ，因此 Random.Next 不知道已经创建了一个先前的“随机”数字。如果您在类级别声明它，它将存在于函数调用范围之外，并且将“知道”它已经生成了一个数字并且能够生成一个不同的数字。

这里的例子：http: [//www.dotnetperls.com/random](http://www.dotnetperls.com/random)