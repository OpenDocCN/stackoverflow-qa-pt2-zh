# StackOverflow 问答 15561000-15561999

# android - 应用程序覆盖 android:windowSoftInputMode="adjustResize"

> ID：15561000
> 
> 赞同：0
> 
> 时间：2013-03-22T01:05:34.370
> 
> 标签：android

`android:windowSoftInputMode="adjustResize"`是否可以通过编辑 LatinIMEGoogle.apk 清单来覆盖其他应用程序的请求？我已将键盘编辑为透明的，我希望键盘始终处于“平移和扫描”状态，而不是根据应用程序的请求调整大小。

提前致谢！

# c# - 字符串文字中不需要的斜杠

> ID：15561008
> 
> 赞同：-1
> 
> 时间：2013-03-22T01:06:20.130
> 
> 标签：c#, string, filenames, string-literals

我正在尝试将文件名传递给 cmd 提示符。我看过很多地方，但似乎找不到答案——我相信它很简单。

我的字符串是这样构建的：

```
string cmd = string.Format(@" -u{0} -p{1} -h{2} -P{3} {4} < ""{5}""",
                user, pass, server, port, database, filename); 
```

但是结果是这样的字符串：

```
-uuser -ppass -hhost -P1234 database < \"C:\\my file.sql\" 
```

如何删除文件名前后的\？它导致进程无法找到文件运行的错误。

我的字符串需要是：

```
-uuser -ppass -hhost -P1234 database < "C:\\my file.sql" 
```

**编辑：好的，忽略这个问题.. process.start(); 还有其他事情。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:11:04.823

我尝试在 Visual Studio 中运行以下代码并且输出是正确的。您很可能正在查看 Visual Studio 中的调试信息，这些信息将转义引号。

```
string cmd = string.Format(@" -u{0} -p{1} -h{2} -P{3} {4} < ""{5}""",
    "Test", "Test2", "server", "1337", "db", "C:\\filename.sql");

Console.WriteLine(cmd);
Console.Read(); 
```

实际输出为 `-uTest -pTest2 -hserver -P1337 db < "C:\filename.sql"`

# html - 为什么我的第一个 inline-block 元素上方有空间

> ID：15561013
> 
> 赞同：19
> 
> 时间：2013-03-22T01:07:18.763
> 
> 标签：html, css

我在容器内有 inline-block 元素，这些元素都应该从容器的左上角开始显示。由于某种原因，第一个元素显示在它应该在的位置下方。我已经尝试过边距和填充重置，但是在检查时无论如何都没有边距或填充。

这是html（没有空格，所以它们不会破坏布局）：

```
 <div class='nav'><div class='logo'><p>test</p></div><ul><li><a href='#'>Link</a></li><li><a href='#'>Link</a></li><li><a href='#'>Link</a></li><li><a href='#'>Link</a></li><li><a href='#'>Link</a></li></ul></div> 
```

这是CSS：

```
.nav {
    position: relative;
    width: 80%;
    height: 50px;
    background-color: red;
    z-index: 1;
}
.nav .logo {
    display: inline-block;
    width: 10%;
    height: 100%;
    background-color: #f90;

}
.nav ul {
    display: inline-block;
    width: 90%;
    text-align: center;
}
.nav li {
    display: inline-block;
    height: 100%;
    line-height: 50px;
    width: 20%;
    background-color: grey;
}
.nav li a {
    margin: 0;
} 
```

这是一个显示问题的代码笔：

[http://codepen.io/Wryte/pen/Guavp](http://codepen.io/Wryte/pen/Guavp)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-22T01:15:15.117

它们没有排列，因为它们的垂直对齐是`baseline`，如果您将它们设置为`top`它们将排列：

```
.nav .logo {
    display: inline-block;
    vertical-align: top;
    width: 10%;
    height: 100%;
    background-color: #f90;

}
.nav ul {
    display: inline-block;
    vertical-align: top;
    width: 90%;
    text-align: center;
} 
```

[http://codepen.io/anon/pen/Kpthz](http://codepen.io/anon/pen/Kpthz)

# c# - 这种使用 GC.SuppressFinalize() 感觉不对

> ID：15561025
> 
> 赞同：9
> 
> 时间：2013-03-22T00:05:03.707
> 
> 标签：c#, .net, garbage-collection

我在使用供应商库时遇到了一些问题，有时由库计算的实体在它应该始终包含有效数据时会为空。

功能代码（与供应商调试问题后）大致如下：

```
 Task.Factory.StartNew(() => ValidateCalibration(pelRectRaw2Ds, crspFeatures, Calibration.Raw2DFromPhys3Ds));

    .....

    private void ValidateCalibration(List<Rectangle> pelRectRaw2Ds, List<List<3DCrspFeaturesCollection>> crspFeatures, List<3DCameraCalibration> getRaw2DFromPhys3Ds)
    {
        var calibrationValidator = new 3DCameraCalibrationValidator();

        // This is required according to vendor otherwise validationResultsUsingRecomputedExtrinsics is occasionally null after preforming the validation
        GC.SuppressFinalize(calibrationValidator);

        3DCameraCalibrationValidationResult validationResultUsingOriginalCalibrations;
        3DCameraCalibrationValidationResult validationResultsUsingRecomputedExtrinsics;
        calibrationValidator.Execute(pelRectRaw2Ds, crspFeatures, getRaw2DFromPhys3Ds, out validationResultUsingOriginalCalibrations, out validationResultsUsingRecomputedExtrinsics);

        Calibration.CalibrationValidations.Add(new CalibrationValidation
            {
                Timestamp = DateTime.Now,
                UserName = Globals.InspectionSystemObject.CurrentUserName,
                ValidationResultUsingOriginalCalibrations = validationResultUsingOriginalCalibrations,
                ValidationResultsUsingRecomputedExtrinsics = validationResultsUsingRecomputedExtrinsics
            });
    } 
```

验证过程是一个相当耗时的操作，所以我将它交给一个任务。我遇到的问题是，最初我没有调用 GC.SuppressFinalize(calibrationValidator) 并且当应用程序从 Release 版本运行时，输出参数 validationResultsUsingRecomputedExtrinsics 将为空。如果我从 Debug 版本运行应用程序（无论是否附加了 Debugger），那么 validationResultsUsingRecomputedExtrinsics 将包含有效数据。

我不完全理解 GC.SuppressFinalize() 在这种情况下做了什么，或者它是如何解决问题的。我能找到的关于 GC.SuppressFinalize() 的一切都是在实现 IDisposable 时使用的。我在“标准”代码中找不到它的任何用途。

添加对 GC.SuppressFinalize(calibrationValidator) 的调用如何/为什么解决此问题？

我知道，如果没有对供应商库内部的深入了解，可能无法确定，但任何洞察力都会有所帮助。

该应用程序使用 VS2012 编译，面向 .NET 4.0。该供应商库要求在 app.config 中指定 useLegacyV2RuntimeActivationPolicy="true" 选项。

这是我从供应商那里收到的理由：

> SuppressFinalize 命令确保垃圾收集器不会“提前”清理某些东西。似乎由于某种原因，您的应用程序有时让垃圾收集器有点热心并在您真正完成对象之前清理它；几乎可以肯定它与范围相关，并且可能是由于多线程导致了calibrationValidator 范围的混淆。以下是我从工程部得到的回复。
> 
> 因为变量是在本地范围内创建的，而该函数在后台线程中运行，所以垃圾收集运行在主线程中，看起来垃圾收集在处理多线程情况时不够聪明。有时，它只是过早地释放它（验证器的内部执行尚未完成，仍然需要这个变量）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T03:24:42.577

这很可能是解决过早垃圾收集问题的一种方法。在非托管代码中并不少见，在相机应用程序中很常见。这不是一个健康的 hack，很有可能这会导致资源泄漏，因为终结器没有执行。非托管代码的包装器几乎总是在终结器中做一些事情，它们需要释放非托管内存是很常见的。

问题在于，calibrationValidator 对象可以在非托管代码运行时被垃圾收集。在你的程序中有另一个线程很可能会发生这种情况，因为其他线程可以分配对象并触发 GC。代码的所有者在测试时很容易错过这一点，要么在使用多个线程时从未测试过它，要么只是没有足够幸运在错误的时间触发 GC。

最终的正确解决方法是确保抖动标记在调用之后正在使用的对象，以便垃圾收集器不会收集它。您可以[`GC.KeepAlive(calibrationValidator)`](http://msdn.microsoft.com/en-us/library/system.gc.keepalive.aspx)在`Execute()`通话后添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T01:52:39.273

当谈到理解C# 中的`IDisposable`、`GC.SuppressFinalize`和终结器时，我认为没有比以下文章更好的解释了。

[**DG 更新：处置、最终确定和资源管理**](http://www.bluebytesoftware.com/blog/PermaLink.aspx?guid=88e62cdf-5919-4ac7-bc33-20c06ae539ae)

> 好的！这里是：修订后的“处置、完成和资源管理”设计指南条目。[我之前在这里](http://www.bluebytesoftware.com/blog/ct.ashx?id=88e62cdf-5919-4ac7-bc33-20c06ae539ae&url=http%3a%2f%2fwww.bluebytesoftware.com%2fblog%2fPermaLink.aspx%3fguid%3d1fe0f820-5b2b-4b17-82af-08142e7f308a)和[这里](http://www.bluebytesoftware.com/blog/ct.ashx?id=88e62cdf-5919-4ac7-bc33-20c06ae539ae&url=http%3a%2f%2fwww.bluebytesoftware.com%2fblog%2fPermaLink.aspx%3fguid%3d69041542-cd48-4d47-9499-a88aa3737081)提到过这项工作。在大约 25 页的打印页上，这不是我认为的小更新。我花了比预期更长的时间，但我对结果很满意。我开始与 HSutter、BrianGru、CBrumme、Jeff Richter 和其他几个人一起工作，并收到了很多关于它的反馈……很好玩。

## 这个问题的关键概念：

很*明显*，`GC.SuppressFinalize()`应该只被称为`this`文章甚至没有直接提到这一点。然而，它确实提到了包装可终结对象以将它们与公共 API 隔离的做法，以确保外部代码无法调用`GC.SuppressFinalize()`这些资源（请参阅以下引用）。设计原始问题中描述的库的人不了解 .NET 中的最终确定的工作方式。

引用自博客文章：

> 即使在没有上述罕见情况之一的情况下，具有可公开访问引用的可终结对象也可能被任意不受信任的调用者抑制。具体来说，他们可以对您调用 GC.SuppressFinalize 并完全阻止终结，包括关键终结。解决此问题的一个很好的缓解策略是将关键资源包装在具有终结器的非公共实例中。只要您不将此泄漏给调用者，他们将无法抑制最终确定。如果您迁移到在您的课程中使用 SafeHandle 并且从不在您的课程之外公开它，您可以保证您的资源的最终确定（使用上面提到的警告并假设正确的 SafeHandle 实现）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:50:08.270

有人提到多线程或本机代码是导致此问题的原因。但是同样的事情也可能发生在一个纯托管且主要是单线程的程序中。

考虑以下程序：

```
using System;

class Program
{
    private static void Main()
    {
        var outer = new Outer();
        Console.WriteLine(outer.GetValue() == null);
    }
}

class Outer
{
    private Inner m_inner = new Inner();

    public object GetValue()
    {
        return m_inner.GetValue();
    }

    ~Outer()
    {
        m_inner.Dispose();
    }
}

class Inner
{
    private object m_value = new object();

    public object GetValue()
    {
        GC.Collect();
        GC.WaitForPendingFinalizers();
        return m_value;
    }

    public void Dispose()
    {
        m_value = null;
    }
} 
```

在这里，当`outer.GetValue()`被调用时，`outer`将被垃圾收集并最终确定（至少在发布模式下）。终结器将`Inner`对象的字段清空，这意味着`GetValue()`将返回`null`。

在实际代码中，您很可能不会在`GC`那里进行调用。相反，您将创建一些托管对象，它（非确定性地）导致垃圾收集器运行。

（我说这段代码大部分是单线程的，其实finalizer会跑在另一个线程上，但是因为调用了`WaitForPendingFinalizers()`，就好像跑在主线程上一样。）

# c++ - cvCaptureFromCAM 程序仅在某些时候创建分段错误

> ID：15561027
> 
> 赞同：2
> 
> 时间：2013-03-22T01:08:56.197
> 
> 标签：c++, gcc, opencv, segmentation-fault, ubuntu-12.04

我一直在尝试使用 OpenCV 2.4.3 和 Logitech C920 相机，希望能够实现一种原始的面部识别方案。非常简单，不是很复杂。

```
#include "opencv2/objdetect/objdetect.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"

#include "opencv2/core/core.hpp"
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/calib3d/calib3d.hpp"
#include "opencv2/nonfree/features2d.hpp"

#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;

/** Function Headers */
void grabcurrentuser();
void capturecurrentuser( Mat vsrc );

/** Global Variables **/
string face_cascade_name = "haarcascade_frontalface_alt.xml";
CascadeClassifier face_cascade;

int main( void ){//[main]
    grabcurrentuser();

}//]/main]

void grabcurrentuser(){//[grabcurrentuser]
    CvCapture* videofeed;
    Mat videoframe;

    //Load face cascade
    if( !face_cascade.load( face_cascade_name ) ){
        printf("Can't load haarcascade_frontalface_alt.xml\n");
    }
    //Read from source video feed for current user
    videofeed = cvCaptureFromCAM( 1 );
    if( videofeed ){
            for(int i=0; i<10;i++){//Change depending on platform
            videoframe = cvQueryFrame( videofeed );

            //Debug source videofeed with display
            if( !videoframe.empty() ){
            imshow( "Source Video Feed", videoframe ); 
            //Perform face detection on videoframe
            capturecurrentuser( videoframe );
        }else{ 
            printf("Videoframe is empty or error!!!"); break; 
        }

            int c = waitKey(33);//change to increase or decrease delay between frames
            if( (char)c == 'q' ) { break; }

            }
    }
}//[/grabcurrentuser]

void capturecurrentuser( Mat vsrc ){//[capturecurrentuser]
    std::vector<Rect> faces;
    Mat vsrc_gray;
    Mat currentuserface;

    //Preprocess frame for face detection
    cvtColor( vsrc, vsrc_gray, CV_BGR2GRAY );
    equalizeHist( vsrc_gray, vsrc_gray );

    //Find face
    face_cascade.detectMultiScale( vsrc_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30,30) );
    //Take face and crop out into a Mat
    currentuserface = vsrc_gray( faces[0] );
    //Save the mat into a jpg file on disk
    imwrite( "currentuser.jpg", currentuserface );
    //Show saved image in a window  
    imshow( "Current User Face", currentuserface ); 

}//[/capturecurrentuser] 
```

上面的代码是这个系统的第一个组件。它的工作是接受视频提要，拍摄 10 帧左右（因此是 for 循环）并在帧上运行 haar 级联以获得人脸。一旦获得了一张脸，它就会将该脸切割成一个 Mat 并将其以 jpg 格式保存在工作目录中。

到目前为止它已经工作了，但似乎是一段非常喜怒无常的代码。大多数时候它给了我想要的输出（我不打算在这里问我如何使事情更准确或更精确 - 但随时告诉我：D）但其他时候它以分段错误结束。以下是分段错误的正常输出示例（我环顾四周，发现 VIDIOC 无效参数是可以忽略的 - 再次，如果它很容易修复，请随时告诉我）。

```
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
init done 
opengl support available 
Segmentation fault (core dumped) 
```

谁能告诉我为什么有时在这个程序的并发运行中我会遇到像上面这样的单个或一系列分段错误结果，而其他时候则不是？该程序旨在创建一个输出，该输出被分流到我编写的另一个程序，所以我不能让它像这样抓住我。

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T10:29:04.533

您的问题在以下行中：

```
currentuserface = vsrc_gray( faces[0] ); 
```

根据我的经验，当您访问不存在的内容时会出现分段错误。如果检测到人脸，程序可以正常工作，因为 faces[0] 包含数据。但是，当没有检测到人脸时（覆盖相机），没有矩形存储在 faces[0] 中。因此发生错误。

尝试像这样初始化，以便 imshow 和 imwrite 在未检测到任何内容时工作：

```
cv::Mat currentuserface = cv::Mat::zeros(vsrc.size(), CV_8UC1); 
```

然后在用它初始化 currentuserface 之前检查 faces 是否为空：

```
if( !faces.empty() )

currentuserface = vsrc_gray( faces[0] ); 
```

# file-upload - socket.io 与 ajax 上传文件的 +/- 是什么？

> ID：15561037
> 
> 赞同：2
> 
> 时间：2013-03-22T01:10:03.547
> 
> 标签：file-upload, websocket, socket.io, scalability, high-availability

我听说 websockets（例如**socket.io**）非常快，但它们需要每个客户端的直接连接。**为有许多客户**/**经常**上传的视频托管上传文件是否如此适合？或者它会失败并且在这种情况下只能使用**ajax**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:56:11.433

我会说这取决于文件大小以及与客户端的连接持续多长时间。

如果您使用 HTML5 FileAPI 分块上传，然后使用 Websockets 上传数据，这可以大大减少传输的数据量，因为它们不需要在每个请求中发送 HTTP 标头；例如，如果您将 1GB 的文件分成 5MB 的块，这些可以加起来。

如果客户端是持久连接的，那么 Websockets 可以减少进行长轮询的需要，如果没有新信息推送到客户端，则会浪费服务器上的资源。

因此，Websockets 将减少所需的资源，但并非在每个浏览器上都可用。

# mysql - 我可以使用 mvn install:install-file 安装 mysql jdbc 连接器吗？

> ID：15561038
> 
> 赞同：11
> 
> 时间：2013-03-22T01:10:04.767
> 
> 标签：mysql, maven, jdbc

我想使用 maven 安装 JDBC 连接器。

我有以下内容： mvn install:install-file -DgroupId=mysql -DartifactId=mysql-connnector-java -Dversion=5.1.6 -Dpackaging=jar -Dfile= -DgenerationPom=true

我想我所需要的只是放在 =Dfile= 另一边的东西？

我也有一段时间没用过maven了，所以不知道文件开关是干什么用的？

感谢所有的洞察力！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-22T01:56:52.913

“install-file”或“deploy-file”目标用于将工件安装或部署到本地或内部存储库，这些工件在 Maven Central 或您可能已配置的其他外部存储库中不可用。

如果您可以访问 Maven Central，只需将以下内容添加到项目的 pom.xml 中：

```
<dependency>
  <groupId>mysql</groupId>
  <artifactId>mysql-connector-java</artifactId>
  <version>5.1.6</version>
</dependency> 
```

......应该做的伎俩。

不过，要回答您的问题， -Dfile= 参数用于指定实际安装在本地存储库中的工件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-12T10:12:16.010

> 洛茨的答案是正确的，这应该足够了

但是，如果你想使用最新版本的连接器，你可以查看[https://mvnrepository.com/artifact/mysql/mysql-connector-java](https://mvnrepository.com/artifact/mysql/mysql-connector-java)

将以下内容添加到项目的 pom.xml 中：

```
<dependency>
  <groupId>mysql</groupId>
  <artifactId>mysql-connector-java</artifactId>
  <version>6.0.6</version>
</dependency> 
```

# php - 从 PHP 中的数组获取对象结果的问题

> ID：15561039
> 
> 赞同：0
> 
> 时间：2013-03-22T01:10:09.043
> 
> 标签：php, twitter

我正在构建一个 Twitter API，其中一部分获取用户信息：

```
$watchAccInfo = $connection->get('users/show/'.$watchAccount.''); 
```

从这里我转储对象并存储它：

```
$value = get_object_vars($watchAccInfo); 
```

然后我回显我想要的部分：

```
echo $value["text"]; 
```

问题是回声`$value["text"]; = null.`

我不知道为什么，如果你能帮我一把，我将不胜感激！

编辑：

当我使用 json_decode() 我得到`Warning: json_decode() expects parameter 1 to be string`

# css - 自定义引导程序导航栏的颜色？

> ID：15561041
> 
> 赞同：1
> 
> 时间：2013-03-22T01:10:15.657
> 
> 标签：css, twitter-bootstrap

我没有触及核心引导文件 - 在我自己的 CSS 中，我有以下内容：

```
#menu-bar div {
    border-color: #0072A6;
    background-color: #0072A6;
    margin: 0;
}

#menu-bar .navbar {
    border-color: #0072A6;
    background-color: #0072A6;
    margin: 0;
}

#menu-bar .navbar-inner {
    border-color: #0072A6;
    background-color: #0072A6;
    margin: 0;
    height: 200px;
}

#menu-bar p, #menu-bar a {
    color: white;
}

#menu-bar .active a {
    color: white;
    background-color: #0072A6;
} 
```

这让我得到了我想要的屏幕 > 1024px 宽的地方，但是响应式引导 css 中的某些东西导致这个黑色边框包裹了较小屏幕的菜单：

![流氓边界](../Images/a0e33fd8ab99528c263c44730be68599.png)

有谁知道我可以如何删除它？我在这里做了一个小提琴，包括引导程序以使其更容易玩：

[http://jsfiddle.net/AmZ5L/](http://jsfiddle.net/AmZ5L/)

我还试图弄清楚如何自定义按钮颜色，以防任何人对他们的时间感到超级慷慨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:16:19.447

`.navbar-inverse .btn-navbar`是什么定义了您的按钮颜色。

`.navbar-inverse .navbar-inner`是什么定义了黑色边框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T01:19:58.827

添加`background-image: none;`到您的`#menu-bar .navbar-inner`风格。这将覆盖提供黑色边框的引导样式（`.navbar-inverse .navbar-inner`在 bootstrap-combined.css 中）。

要更改按钮的颜色，请覆盖`.navbar-inverse .btn-navbar`样式：

```
.navbar-inverse .btn-navbar
{
    background: red;
} 
```

# c++ - 已定义参数或解决方案的 GLEW 的 OpenGL 替代方案

> ID：15561048
> 
> 赞同：3
> 
> 时间：2013-03-22T01:10:46.377
> 
> 标签：c++, opengl, vim, autocomplete, arguments

所以我[在stackoverflow中发布了一个与此类似的问题，](https://stackoverflow.com/questions/15260891/vim-clang-complete-doesnt-see-some-functions-of-opengl)但解决方案似乎可以通过更简单的解决方案来解决。

基本上，我使用 GLEW 来加载我的 OpenGL 头文件等，没有任何麻烦，但是由于我使用 VIM 和 Clang_Complete 来完成参数，所以我坚持只完成名称并且没有实际显示的参数. 因为显然函数被定义为

```
#define FOO somefunction 
```

并且没有定义为

```
#define FOO(arg1, arg2, arg3) somefunction(arg1, arg2, arg3) 
```

我对此的解决方案是在我的 ~/.vimrc 文件中添加一个选项，并且必须完全删除 GLEW 并将其替换为

```
#define GL_GLEXT_PROTOTYPES
#include <GL/gl.h>
#include <GL/glext.h> 
```

所以，我想知道是否有 GLEW 的替代品可以做 GLEW 的工作，但实际上显示了参数，或者是否有办法使用 GLEW 解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T01:23:07.813

为了充分披露，我编写了以下工具。如果这读起来像广告，我深表歉意。

您可以使用[OpenGL 加载器生成器](https://bitbucket.org/alfonse/glloadgen/wiki/Home)。它是一个生成用于加载 OpenGL 函数的头文件和源文件的工具。您指定您感兴趣的扩展和 OpenGL 版本，它只输出这些版本的枚举和函数。这是该工具的主要功能：获取仅包含您打算使用的内容的干净头文件和源文件。

但次要特征是它具有不同的生成风格。这些样式定义了如何生成输出的细节。

标准的[“pointer_c”样式](https://bitbucket.org/alfonse/glloadgen/wiki/Style_Pointer_C)生成的代码看起来很像 GLEW，其中的函数是`#define`s。这在 C 中实际上是*必不可少*的，因为您无法重新定义全局可访问的变量/函数名称。所以你不能定义一个与非指针函数同名的函数指针。如`glVertex3f`; 该名称已由某些平台上的 OpenGL 库定义，因此您无法定义它的新版本。你必须`#define`绕过它。

另一方面，C++ 有命名空间。因此，[在 "pointer_cpp" 样式](https://bitbucket.org/alfonse/glloadgen/wiki/Style_Pointer_CPP)中，您会获得将大部分 OpenGL 放在`gl`命名空间中的 C++ 标头和源代码。这也意味着指针 CPP 样式不必使用#defines。所以它没有。`gl::Vertex3f`是具有实参类型和名称的函数指针。任何体面的代码完成工具都应该能够理解这些。

[“noload_cpp”样式](https://bitbucket.org/alfonse/glloadgen/wiki/Style_No_Load_CPP)做同样的事情。不同之处在于您不必调用初始化函数；您可以调用任何函数指针，如果尚未加载该函数，它将动态加载该函数。

受此讨论的启发，我发布了包含[func_cpp 样式](https://bitbucket.org/alfonse/glloadgen/wiki/Style_Function_CPP)的工具版本。这使用内联函数将调用转发到函数指针。这是直接使用函数，所以如果它不能解析这些，那么你的自动完成工具就没有希望了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T17:18:29.157

这是我的解决方案：

```
#ifdef USE_GLEW
    #include <GL/glew.h>
#else
    #warning "Not using GLEW"
    #define GL_GLEXT_PROTOTYPES
    #include <GL/gl.h>
    #include <GL/glext.h>
#endif 
```

和...

```
// Initialize GLEW
#ifdef USE_GLEW
    glewExperimental = GL_TRUE;
    if (glewInit())
    {
        fprintf(stderr, "Failed to initialize GLEW.\n");
    }
#endif 
```

然后将`-DUSE_GLFW`标志添加到 Makefile 或 CMakeList.txt。但**不要**添加到 .ycm_extra_conf.py

# java - 使用 try 和 catch 处理异常的问题

> ID：15561051
> 
> 赞同：-3
> 
> 时间：2013-03-22T01:10:59.477
> 
> 标签：java, exception-handling

我正在尝试使用`try`and `catch`。如果输入的输入无效，则循环会重复并再次要求用户输入，但它不起作用。当我输入错误时，它只会重复`System.out.println`.

```
import java.util.Calendar;
import java.util.Date;
import java.util.Scanner;

public class Price
{
    public static void main(String[] args)
    {
        userInput();
    }
    public static void userInput()
    {
        Scanner scan = new Scanner(System.in);
        int x = 1;
        int month, day, year;

        do {
            try {    
                System.out.println("Please enter a month MM: ");
                month = scan.nextInt();

                if(month>12 && month<1)
                {
                    System.out.println("FLOP");
                } 
                x=2;
            }
            catch(Exception e){
                System.out.println("not today mate");
            }
        }
        while(x==1);             
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:23:14.273

作为一般规则，异常用于异常情况，而不是驱动程序的逻辑。在这种情况下，验证输入的数据并不是例外情况。用户可能会出错并输入错误的数字是正常的情况。将输入放入一个循环中并重复，直到输入正确的值（也许用户可以选择取消）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:42:35.413

首先你的条件不对。

你有：

```
if(month>12 && month<1)
{
  System.out.println("FLOP");
} 
```

所以月份不能大于 12 并且同时小于 1。

I think you wanted to put OR instead of AND, e.g.

```
if(month > 12 || month < 1)
{
  System.out.println("FLOP");
} 
```

As for the exception, it might occur when user enters non numeric value or input is exausted. Throws: InputMismatchException - if the next token does not match the Integer regular expression, or is out of range NoSuchElementException - if input is exhausted IllegalStateException - if this scanner is closed

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:50:56.973

this is a working solution to your problem

```
public static void userInput(){
        Scanner scan = new Scanner(System.in);
        int x = 1;
        int month, day, year;

        System.out.println("Please enter a month MM: ");
        month = scan.nextInt();
        boolean i = true;
        while(i == true)
        {
            if(month < 12 && month > 1)
            {
                System.out.println("FLOP");
                i = false;
            }
            else if(month >= 12 || month <= 1)
            {
                System.out.println("not today mate");
                month = scan.nextInt();                
            }
        }     

  } 
```

# node.js - 用于 Node 的 Jade 和 EJS

> ID：15561057
> 
> 赞同：1
> 
> 时间：2013-03-22T01:11:29.380
> 
> 标签：node.js, pug, ejs

有没有办法可以使用ejs和jade（我喜欢EJS和Jade，无法决定使用哪个）：

```
div
   <% for(var i = 0; i<things.length; i++){ %>
        <% = things[i] %>
        span!=things[i] + "  Hi"
   <% } %> 
```

最好的方法是通过jade然后ejs运行它吗？

谢谢，
阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:05:45.700

```
div
    each thing in things
        != thing
        span!= thing + "   Hi" 
```

选择：

```
div
    - for(var i = 0; i < things.length; i++){
        != things[i]
        span!= things[i] + "   Hi"
    - } 
```

建议用翡翠。我认为它更舒服，你可以用很少的玉代码生成很多 html。

# java - 打包java文件

> ID：15561060
> 
> 赞同：0
> 
> 时间：2013-03-22T01:12:08.727
> 
> 标签：java, inheritance, packaging, abstract

我正在尝试打包一组在打包之前编译/运行得很好的java文件。在第一行添加包后，我收到以下错误！

```
cannot find symbol 
symbol: class Person 
```

这是导致相同错误的简化代码片段：

-Person.java

```
package people;
abstract public class Person
{
// some code
} 
```

-Female.java

```
package people;
public class Female extends Person
{   
Female(){}
    // some code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:37:20.230

“找不到符号”通常表示编译器找不到您尝试使用的标识符。在这里看起来它找不到类 Person。我假设这个错误是在女性类中抛出的。

你是如何编译源文件的？您是使用 Eclipse 之类的 IDE 还是通过命令行编译它？如果您使用的是 IDE，它将帮助您更好地识别问题。

通过命令行编译时，您应该确保在类 Female 之前编译 Person。由于类文件在一个包中，你应该从源代码的根目录编译文件

示例 - Person.java 和 Female.java 在包“pack”中，这就是我要编译的方式

```
D:\Applications\eclipse\eclipse-workspace\Test\src>javac pack\*.java
D:\Applications\eclipse\eclipse-workspace\Test\src> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:33:23.030

当您说“打包”时，您的意思是`package`在源代码中“添加声明后”吗？

如果是这样，我认为您忽略了 java 包需要反映源文件所在的实际目录。为了`package people;`工作，您需要创建一个名为的目录并将`people`源文件放在那里。

正如我假设您正在使用的那样`javac`，如果您一次编译这两个文件，`javac *.java`这应该可以正常工作（即使您没有将文件驻留在正确的目录中）。但是如果你想单独编译它们，你需要`javac`从`people`.

```
$ mkdir people
$ mv Person.java Female.java people/
$ javac people/Person.java
$ javac people/Female.java 
```

# javascript - Ajax 有多个 url 提要

> ID：15561062
> 
> 赞同：2
> 
> 时间：2013-03-22T01:12:34.360
> 
> 标签：javascript, jquery, ajax, autocomplete, fcbkcomplete

我有三个 URL，它们返回不同的 bean 填充的不同 JSON 响应（比如用户手机、地址和电子邮件）。

```
url='/mobile.do?username=x&password=y'
url='/email.do?username=x&password=y'
url='/address.do?username=x&password=y' 
```

对于以下自动完成插件（fcbkcomplete）：

```
 <script type="text/javascript">
    $(document).ready(function(){                
        $("#mySelect").fcbkcomplete({
            json_url: "?!!",

        });
    });
</script> 
```

现在我想使用这些 URL 来填充数据并将数据添加到单个字段而不是三个不同的字段。因此，我需要以某种方式混合这些 URL 或类似的东西。

我想知道最好的方法是什么？我们可以设置多个 URL 或其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:57:33.473

您可以通过更改函数 load_feed 来修改插件。这未经测试，因此可能需要一些调整。

```
function load_feed(etext) {
    counter = 0;
    if (options.json_url_list && maxItems()) {
        if (options.cache && json_cache_object.get(etext)) {
            addMembers(etext);
            bindEvents();
        } else {
            getBoxTimeout++;
            var getBoxTimeoutValue = getBoxTimeout;
            setTimeout(function () {

                if (getBoxTimeoutValue != getBoxTimeout) return;

                var count = 0;
                var all_data = [];

                var finished = function () {
                    if (!isactive) return; // prevents opening the selection again after the focus is already off
                    json_cache_object.set(etext, 1);
                    bindEvents();
                };

                for (var i = 0; i < options.json_url_list.length; i++) {
                    $.getJSON(options.json_url_list[i], {
                        "tag": xssDisplay(etext)
                    }, function (data) {
                        addMembers(etext, data);
                        count += 1;
                        if (count === options.json_url_list.length) finished();
                    });
                }
            }, options.delay);
        }
    } else {
        addMembers(etext);
        bindEvents();
    }
} 
```

# c++ - C++ 调试器在控制台中跳过简单的代码行

> ID：15561065
> 
> 赞同：1
> 
> 时间：2013-03-22T01:12:45.497
> 
> 标签：c++, visual-c++

我对我正在使用的调试器（Visual C++ 和 Bloodshed Dev C++）的代码有疑问，它只是跳过了应该输入的一行代码左右。这是代码：

```
for(x = 0; x < TASKLIMIT; ++x)
{
    cout<<"Enter the name of a task: ";
    getline(cin, task[x].name);
    cout<<"Enter the priority of the task: ";
    cin>>task[x].priority;
    while (task[x].priority > 10 || task[x].priority < 1)
    {
        cout<<"Enter a number from 1-10: ";
        cin>>task[x].priority;
    }
    cout<<"Enter the estimated completion time of the task: ";
    cin>>task[x].completion;
    cout<<"Enter the deadline of the task: ";
    cin>>task[x].deadline;
} 
```

问题偶尔会移动线路首先它在线路中

```
cin>>task[x].deadline; 
```

然后它移动到：

```
getline(cin, task[x].name); 
```

当它到达 for 循环的第二次迭代时

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:43:34.313

你使用发布模式还是调试模式？如果您处于发布模式，则会优化汇编代码。如果您使用该代码进行调试，它总是不会逐行移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T00:24:50.697

尝试更改以下代码：

```
cin.ignore();
cin.sync();

cout<<"Enter the name of a task: ";
getline(cin, task[x].name); 
```

看看这对你有什么影响。我总是陷入类似的陷阱，通常可以通过清除缓冲区来解决。

# php - SQL 查询中的表值问题

> ID：15561069
> 
> 赞同：2
> 
> 时间：2013-03-22T01:13:10.340
> 
> 标签：php, mysql, web

好的，所以我使用了一些我在网上找到的 php/SQL 脚本来托管一个 March Madness 池网站。设置和调试这些家伙的代码很痛苦，但我基本上让它工作了。出于某种原因，作者创建了一个“括号”表和一个“分数”表。

“括号”表要大得多，包含以下变量：id、姓名、人员、电子邮件、时间、决胜局以及所有 63 个人员游戏选择。每个括号的 id 递增。name 实际上是创建者给括号起的名字。person 是人名。等等。

出于某种原因，这家伙制作了一个单独的表格来为括号评分。“scores”表有变量：id、name、score 和scoring_type。

对数据实际显示到网站的脚本进行排序，我不知道创建者在想什么，但几乎所有显示的数据都使用“分数”表。

**我的问题：**分数表没有人名的变量。因此，排名和括号都按人给他们的括号的名称显示和组织。人们一直在问我谁的括号是谁的。我认为实施它是一个快速的解决方案，但男孩是我错了。我是 MySql 的新手，并不完全了解我在做什么。但是我查了一些东西，我尝试了很多东西，但无法让它工作。

**我尝试过什么：**我正在考虑将这些表合并为一个，但我不想花几个小时在我每年设置一次的东西上。考虑到这两个表有 2 个相同的值，name 和 id，我尝试做一些查询来匹配这些值并请求变量“person”。然而，这些都没有奏效。

我用几种不同的方式修改了它：

```
$query = "SELECT person FROM `brackets' WHERE name='$name'";
$result = mysql_query($query,$db) or die(mysql_error());  
echo "mysql_result($result)"; 
```

我尝试使用和不使用变量。我也试过：

```
$query = 'SELECT * FROM `brackets';
$result = mysql_query($query,$db) or die(mysql_error());  
$dataArray = array(); // create a variable to hold the information

while (($row = mysql_fetch_array($result, MYSQL_ASSOC)) !== false){
    $dataArray[] = $row; // add the row in to the results (data) array
}
$personsNameToDisplay = personsName($name, $dataArray);
echo "$personsNameToDisplay"; 
```

使用我还尝试了几种方法的功能：

```
function personsName( $passedBracketName, $dataArray ){
    $personsMatchedName;
    foreach ($dataArray as $key => $value){
          if($value == $passedBracketName ){
               $personsMatchedName = $value['person'];
          }
    }
return $personsMatchedName;
} 
```

* * *

我得到的错误是：

```
Table 'mlmadness.brackets' WHERE name='beasters'' doesn't exist 
```

然而，当我进入 mySQL，然后单击“括号”然后单击“名称”时，肯定有一个括号，其名称值为“野兽”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:17:27.223

```
"SELECT person FROM 'brackets' WHERE name='{$name}'"; 
```

that should do the trick. You also had `blasters' .. the closing should also be` and not a '

* * *

**Better Way:**

```
$mysqli = new mysqli("localhost", "username", "password", "database_name");

$query = "SELECT person FROM brackets WHERE name='{$name}'";
$result = $mysqli->query($query);

while($row = $result->fetch_array())
{
    var_dump($row);
} 
```

# c# - 在 C# 中使用自定义文件扩展名压缩波形文件

> ID：15561071
> 
> 赞同：0
> 
> 时间：2013-03-22T01:13:33.327
> 
> 标签：c#, file, compression

基本上，我想要做的是使用一些带有自定义扩展名的 txt 数据文件来压缩波形文件，例如：compressed.bpc 注意“bpc”是一个自定义文件扩展名。

到目前为止，我唯一得到的就是像这样加载波形文件：

```
public void pictureBox23_Click(object sender, EventArgs e)
{
    ofd.Filter = "WAV|*.wav";
    this.ofd.Multiselect = true;
    if (ofd.ShowDialog() == DialogResult.OK)
    {
        foreach (string fileName in ofd.FileNames)                
        {
        if (System.IO.Path.GetFileName(fileName) == "01.wav")
        {
            label5.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label37.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "02.wav")
        {
            label23.Text = "Beats Loaded";
            label19.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label38.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "03.wav")
        {
            label23.Text = "Beats Loaded";
            label21.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label39.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "04.wav")
        {
            label23.Text = "Beats Loaded";
            label24.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label40.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "05.wav")
        {
            label23.Text = "Beats Loaded";
            label25.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label41.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "06.wav")
        {
            label23.Text = "Beats Loaded";
            label26.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label42.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "07.wav")
        {
            label23.Text = "Beats Loaded";
            label27.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label43.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "08.wav")
        {
            label23.Text = "Beats Loaded";
            label28.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label44.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "09.wav")
        {
            label23.Text = "Beats Loaded";
            label36.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label45.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "10.wav")
        {
            label23.Text = "Beats Loaded";
            label35.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label46.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "11.wav")
        {
            label23.Text = "Beats Loaded";
            label34.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label47.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "12.wav")
        {
            label23.Text = "Beats Loaded";
            label33.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label48.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "13.wav")
        {
            label23.Text = "Beats Loaded";
            label32.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label49.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "14.wav")
        {
            label23.Text = "Beats Loaded";
            label31.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label50.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "15.wav")
        {
            label23.Text = "Beats Loaded";
            label30.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label51.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        if (System.IO.Path.GetFileName(fileName) == "16.wav")
        {
            label23.Text = "Beats Loaded";
            label29.Text = System.IO.Path.GetFileName(fileName) + " Ready!";
            label52.Text = System.IO.Path.GetDirectoryName(fileName) + @"\" + System.IO.Path.GetFileName(fileName);
        }
        }

    }
    else
    {
        label23.Text = "Select beats...";
    }
} 
```

请留下示例或参考代码等，我没有那么有经验，所以我需要具体的示例或教程。

谢谢！

# java - Java 如何知道 void 方法何时完成其方法体？

> ID：15561073
> 
> 赞同：7
> 
> 时间：2013-03-22T01:13:57.483
> 
> 标签：java, methods, void

假设我有一些代码：

```
public int doSomething(int x)
{
    otherMethod(x);
    System.out.println("otherMethod is complete.");
    return 0;
}

public void otherMethod(int y)
{
    //method body
} 
```

既然otherMethod的返回类型是void，那`doSomething`方法怎么知道什么时候`otherMethod`完成了，所以可以去下一个like，打印“`otherMethod`完成了”？

编辑：添加`return 0;`到 doSomething 方法，以便编译示例代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T01:18:55.057

解析器知道执行结束在哪里，甚至添加一个返回，例如：

```
 public static void main(String args[])  {

} 
```

编译为：

```
 public static main([Ljava/lang/String;)V
   L0
    LINENUMBER 34 L0
    RETURN <------ SEE?
   L1
    LOCALVARIABLE args [Ljava/lang/String; L0 L1 0
    MAXSTACK = 0
    MAXLOCALS = 1
} 
```

这同样适用于您的代码（尽管我在 return 0 中添加了因为您的代码无法编译）：

```
 public int doSomething(int x)
    {
        otherMethod(x);
        System.out.println("otherMethod is complete.");
        return 0;
    }

    public void otherMethod(int y)
    {
        //method body
    } 
```

编译代码：

```
public doSomething(I)I
   L0
    LINENUMBER 38 L0
    ALOAD 0
    ILOAD 1
    INVOKEVIRTUAL TestRunner.otherMethod (I)V
   L1
    LINENUMBER 39 L1
    GETSTATIC java/lang/System.out : Ljava/io/PrintStream;
    LDC "otherMethod is complete."
    INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/String;)V
   L2
    LINENUMBER 40 L2
    ICONST_0
    IRETURN
   L3
    LOCALVARIABLE this LTestRunner; L0 L3 0
    LOCALVARIABLE x I L0 L3 1
    MAXSTACK = 2
    MAXLOCALS = 2

  // access flags 0x1
  public otherMethod(I)V
   L0
    LINENUMBER 46 L0
    RETURN <-- return inserted!
   L1
    LOCALVARIABLE this LTestRunner; L0 L1 0
    LOCALVARIABLE y I L0 L1 1
    MAXSTACK = 0
    MAXLOCALS = 2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:15:56.367

因为结束括号。一旦线程到达方法的末尾，它将返回。此外，程序员可以通过编写来指定 void 方法何时结束 `return;`

编辑：我把问题搞混了。线程一次执行一个方法，一次执行一条语句，因此一旦线程完成一个方法，它将转到调用方法的下一行。

# android - 设置按钮以引用多个 xml 布局

> ID：15561074
> 
> 赞同：0
> 
> 时间：2013-03-22T01:14:02.687
> 
> 标签：android, eclipse, button

我有一个链接不同 xml 布局的按钮栏，但是当我尝试单击不同的按钮时，我只能到达一个而不返回到其他的。抱歉，提前麻烦了，还是有点新手。这是我在这里的第一篇文章，但经常引用这个网站。提前致谢。

activity_main.xml

```
 <ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:shrinkColumns="*"  
    android:stretchColumns="*" 
    android:background="#6B1414">
    <TableRow
        android:id="@+id/tableRow1"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent">
        <Button
            android:id="@+id/btn1"
            android:text="@string/Str"
            android:textStyle="bold"
            android:layout_width="0dip"
            android:layout_height="wrap_content" 
            android:padding="18dip"
            android:layout_weight="1" 
            android:background="#424242"
            android:textColor="#ffffff"
            android:gravity="center"/>
        <Button
            android:id="@+id/btn2"
            android:text="@string/Agl"
            android:textStyle="bold"
            android:layout_width="0dip"
            android:layout_height="wrap_content" 
            android:padding="18dip"
            android:layout_weight="1" 
            android:background="#424242"
            android:textColor="#ffffff"
            android:gravity="center"/>
        <Button
            android:id="@+id/btn3"
            android:text="@string/Int"
            android:textStyle="bold" 
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:padding="18dip"
            android:layout_weight="1" 
            android:background="#424242"
            android:textColor="#ffffff"
            android:gravity="center"/>
        <Button
            android:id="@+id/btn4"
            android:text="@string/Misc"
            android:textStyle="bold" 
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" 
            android:background="#424242"
            android:textColor="#ffffff"
            android:padding="18dip"/>
    </TableRow> 
```

MainActivity.java

```
 import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button btn1 =(Button)findViewById(R.id.btn1);
        Button btn2 =(Button)findViewById(R.id.btn2);
        Button btn3 =(Button)findViewById(R.id.btn3);
        Button btn4 =(Button)findViewById(R.id.btn4);

        btn1.setOnClickListener(new Button.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent myIntent = new Intent();
                myIntent.setAction(Intent.ACTION_VIEW);
                myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
                setContentView(R.layout.activity_main);
                return;
            }
        });

        btn2.setOnClickListener(new Button.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent myIntent = new Intent();
                myIntent.setAction(Intent.ACTION_VIEW);
                myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
                setContentView(R.layout.agil_main);
                return;
            }
        });

        btn3.setOnClickListener(new Button.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent myIntent = new Intent();
                myIntent.setAction(Intent.ACTION_VIEW);
                myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
                setContentView(R.layout.int_main);
                return;
            }
        });

        btn4.setOnClickListener(new Button.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent myIntent = new Intent();
                myIntent.setAction(Intent.ACTION_VIEW);
                myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
                setContentView(R.layout.misc_main);
                return;
            }
        });

}} 
```

更新。XML 看起来不错，谢谢。我仍然遇到以前遇到的同样问题。我为每个布局添加了活动，但我仍然遇到同样的问题，即不打算循环浏览布局。每个 java 文件看起来都和这个一样。

MainActivity.java（使用新的 .class Intent 更新）

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn1 =(Button)findViewById(R.id.btn1);
    Button btn2 =(Button)findViewById(R.id.btn2);
    Button btn3 =(Button)findViewById(R.id.btn3);
    Button btn4 =(Button)findViewById(R.id.btn4);

    btn1.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent();
            myIntent = new Intent(getApplicationContext(), MainActivity.class);
            myIntent.setAction(Intent.ACTION_VIEW);
              myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.activity_main);
            return;
        }
    });

    btn2.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent();
            myIntent = new Intent(getApplicationContext(), MainAgil.class);
            myIntent.setAction(Intent.ACTION_VIEW);
            myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.agil_main);
            return;
        }
    });

    btn3.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent();
            myIntent = new Intent(getApplicationContext(), MainInt.class);
            myIntent.setAction(Intent.ACTION_VIEW);
            myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.int_main);
            return;
        }
    });

    btn4.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent = new Intent();
            myIntent = new Intent(getApplicationContext(), MainMisc.class);
            myIntent.setAction(Intent.ACTION_VIEW);
            myIntent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            setContentView(R.layout.misc_main);
            return;
        }
    }); 
```

}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:18:03.830

Define your button bar in a separate XML layout. In every XML you need that bar include that button bar using [`<include/>`](http://developer.android.com/training/improving-layouts/reusing-layouts.html) tag. And in every activity in which XML you have included the button bar handle the onclick of the buttons separately.

# c++ - 在 128 位的小流中查找重复的对称位模式

> ID：15561077
> 
> 赞同：2
> 
> 时间：2013-03-22T01:14:35.103
> 
> 标签：c++, c, algorithm, assembly

如何快速扫描完全相同的重复二进制模式的 128 位组，例如 010101... 或 0011001100...？

我有许多 128 位块，并希望查看它们是否与 1 的数量等于 0 的数量的模式匹配，例如 010101 .... 或 00110011 ... 或 0000111100001111 ... 但不是 001001001。 ..

问题是模式可能不会从它们的边界开始，所以模式 00110011.. 可能以 0110011... 开始，并且也会以 1 位移动结束（注意 128 位不是循环的，所以 start 不会加入结尾）

010101... 情况很简单，就是 0xAAAA... 或 0x5555.... 但是随着模式变长，排列变长。目前我使用重复移位值，例如这个问题中概述的[最快的方法来扫描位流中的位模式，](https://stackoverflow.com/questions/1572290/fastest-way-to-scan-for-bit-pattern-in-a-stream-of-bits)但更快的方法会很好，因为我在这个例程中花费了所有 CPU 的 70%。其他海报有针对一般情况的解决方案，但我希望我的模式的对称性质可能会带来更优化的东西。

如果有帮助，我只对最长 63 位的模式感兴趣，并且对 2 种模式（0101...00110011...0000111100001111...等）的力量最感兴趣，而 5 个 1/5 个零之类的模式是目前，这些非幂 2 序列小于 0.1%，因此如果它有助于常见情况更快地进行，则可以忽略。

完美解决方案的其他限制条件是汇编指令数量少，没有非常随机的内存访问（即，大彩虹表并不理想）。

编辑。更精确的图案细节。

我最感兴趣的是 0011 和 0000,1111 和 0000,0000,1111,1111 和 16 个零/一和 32 个零/一（逗号仅供阅读）的模式，其中每个模式在 128 位内连续重复。重复部分的长度不是 2、4、8、16、32 位的模式没有那么有趣，可以忽略。（例如 000111...）

扫描的复杂性在于模式可以从任何位置开始，而不仅仅是在 01 或 10 过渡处。因此，例如，以下所有内容都将匹配 00001111... 的 4 位重复模式...（为了便于阅读，每 4 位逗号）（省略号表示重复相同）

0000,1111... 或 0001,1110... 或 0011,1100... 或 0111,1000... 或 1111,0000... 或 1110,0001... 或 1100,0011... 或1000,0111

在 128 位内，需要重复相同的模式，存在两种不同的模式是不感兴趣的。例如，这不是一个有效的模式。0000,1111,0011,0011... 因为我们已经从 4 位重复变为 2 位重复。

我已经验证了 1 的数量是 64，这对于所有 2 次方模式都是如此，现在需要确定有多少位组成重复模式（2、4、8、16、32）以及模式是多少转移了。例如，模式 0000,1111 是 4 位模式，移位了 0。而 0111,1000... 是 4 位模式，移位了 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:06:05.320

让我们从模式确实从它们的边界开始的情况开始。您可以检查第一位并使用它来确定您的状态。然后开始循环遍历你的块，检查第一位，增加一个计数，左移并重复，直到你发现你得到了相反的位。您现在可以将此初始长度用作位集长度。将计数重置为 1，然后计算下一组相反的位。切换时，检查长度与初始长度，如果不相等则出错。这是一个快速功能 - 它似乎对字符按预期工作，扩展它以处理 32 字节块应该不会太难。

```
unsigned char myblock = 0x33;
unsigned char mask = 0x80, prod = 0x00;
int setlen = 0, count = 0, ones=0;

prod = myblock & mask;
if(prod == 0x80)
  ones = 1;

for(int i=0;i<8;i++){
  prod = myblock & mask;
  myblock = myblock << 1;
  if((prod == 0x80 && ones) || (prod == 0x00 && !ones)){
    count++;
  }else{
    if(setlen == 0) setlen = count;
    if(count != setlen){
      printf("Bad block\n");
      return -1;
    }
    count = 1;
    ones = ( ones == 1 ) ? 0 : 1;
  }
}

printf("Good block of with % repeating bits\n",setlen);
return setlen; 
```

现在要处理有偏移的块，我建议计算第一次“翻转”之前的位数。存储这个数字，然后运行上面的程序，直到你到达最后一个段，它的长度应该不等于其余的集合。将初始位添加到最后一段的长度，然后您应该能够正确地将其与其余集合的大小进行比较。

这段代码非常小，通过缓冲区进行位移不应该需要 CPU 做太多的工作。我很想看看这个解决方案最终如何与您当前的解决方案相比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:38:14.017

这类问题的通用解决方案是为模式创建一个好的散列函数，并将每个模式存储在一个散列图中。一旦为模式创建了哈希映射，然后尝试使用输入流在表中查找。我还没有代码，但如果你对代码感到震惊，请告诉我。请发布它，我可以处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T05:28:42.837

模式在 128 个流中自我重复的限制使得组合的数量受到限制，并且序列将具有易于检查的属性：

需要反复检查高低部分是否相同；如果它们是相反的，请检查该特定长度是否包含连续的长度。

```
 8-bit repeat at offset 3:  00011111 11100000 00011111 11100000
 ==> high and low 16 bits are the same
 00011111 11100000 ==> high and low parts are inverted.
 Not same, nor inverted means rejection of pattern. 
```

在这一点上，需要检查是否有一系列的 - 在左侧添加“1”并检查它是否是 2 的幂：n==(n & -n) 是教科书的检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T05:58:12.783

我考虑过制作一个状态机，所以每个下一个字节（16 个字节中）都会推进它的状态，并且在大约 16 个状态转换之后，你就会识别出模式。但这看起来不太有希望。数据结构和逻辑看起来更复杂。

相反，为什么不预先计算所有这 126 个模式（从 01 到 32 个零 + 32 个），对它们进行排序并执行二进制搜索？这会给你最多 7 次二进制搜索迭代。而且您不需要存储每个模式的所有 16 个字节，因为它的一半是相同的。这为您提供了 126*16/2=1008 字节的模式数组。您还需要每个模式 2 个字节来存储零（一）次运行的长度以及相对于您认为未移位的任何模式的移位。也就是一共126*(16/2+2)=1260字节的数据（对数据缓存应该是温和的）和非常简单微小的二分查找算法。[基本上，它只是对您在问题中提到的答案](https://stackoverflow.com/questions/1572290/fastest-way-to-scan-for-bit-pattern-in-a-stream-of-bits)的改进。

您可能想在 4-5 次二进制搜索迭代后尝试切换到线性搜索。这可能会对整体算法产生一点推动作用。

最终，获胜者由测试/分析决定。这就是您应该做的，获得一些实现并在真实系统中的真实数据上进行比较。

# paypal - 由信用卡资助的 Paypal 账户 = 10417 错误

> ID：15561078
> 
> 赞同：1
> 
> 时间：2013-03-22T01:15:03.647
> 
> 标签：paypal

我来这里是为了尝试解决一个似乎是贝宝中没有人可以帮助我们的黑洞。

我们有一个企业帐户。Paypal Express（数字商品）。已验证，取消限制等...我们已将贝宝快递综合罚款作为我们唯一的付款方式。但是有一个问题。任何由信用卡资助的贝宝账户都将完全失败并给出 10417 错误。

**概述**

*   客户 A 的现有贝宝余额为 10 美元
*   客户 B 的现有贝宝余额为 0 美元，但他们的账户由信用卡注资。
*   客户 A 在我们网站上的任何交易低于 10 美元都没有问题。
*   客户 B 在付款时收到错误消息。更具体地说，是 10417 错误。

现在在任何人说之前，我们已经与发卡机构等进行了核对……所以我们 100% 确定这不是卡或银行的错误（正如 10417 错误所暗示的那样）。我们已经在不同国家/地区使用不同卡类型和不同发卡银行的十几个经过验证/干净的贝宝账户进行了实际测试。他们都失败了，沙盒也没有给我们任何线索......

任何人都可以在这里向我们扔骨头或想到可能发生这种情况的任何可能原因吗？将不胜感激...

***更新：已解决：***原来这是我们帐户的问题，更具体地说是我们的行业类别。当然，如果有人告诉我过去一周我打了六次左右的电话，那当然会有所帮助——昨天在电话中，我问代理她是否 100% 确定这是客户卡、银行或帐单地址。我知道这不是，所以我只想看看她是否会承诺。她的回答——“是的，先生，我百分百确定”。总结一下。希望这对其他人有帮助...如果您遇到 10417 错误，请尝试更改业务类别或子类别以阻止您发疯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-27T15:56:07.373

遇到完全相同的问题，贝宝支持不是很有帮助

原来问题是业务 URL 设置为 http 而不是 https

我们的商业网站从 http -> https 重定向，但此重定向似乎在支付宝结帐时出现问题

一旦我们更改了商家网址，客户就可以继续付款了

解决方案：

*   登录贝宝
*   导航到[https://www.paypal.com/businessprofile/settings/info/edit](https://www.paypal.com/businessprofile/settings/info/edit)
*   编辑业务资料并确保“业务 URL”设置为 https://

# c++ - 删除指向子类的指针时未释放 C++ 内存

> ID：15561082
> 
> 赞同：5
> 
> 时间：2013-03-22T01:15:44.053
> 
> 标签：c++, inheritance, dynamic-memory-allocation

我在我的代码中使用动态内存分配，并且在尝试删除指向子类的指针时遇到问题。我发现原来分配的内存在使用`delete`关键字的时候并没有被释放。该功能适用​​于原始基类。

这是一个问题，因为我在 arduino 上运行代码并且 RAM 很快被吃光然后崩溃。

这是一些示例代码：

```
class Base
{
public:
    Base(){
        objPtr = new SomeObject;
    }
    ~Base(){
        delete objPtr;
    }
    SomeObject* objPtr;
};

class Sub : public Base
{
public:
    Sub(){
        objPtr = new SomeObject;
    }
};

// this works fine
int main()
{
    for (int n=0;n<100;n++) // or any arbitrary number
    {
        Base* basePtr = new Base;
        delete basePtr;
    }
    return 0;
}

// this crashes the arduino (runs out of RAM)
int main()
{
    for (int n=0;n<100;n++) // or any arbitrary number
    {
        Sub* subPtr = new Sub;
        delete subPtr;
    }
    return 0;
} 
```

我想这与基类中析构函数的语法有关。即使我为子类创建了一个自定义析构函数，也会出现同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T01:21:34.383

在 C++ 中，[构造函数在层次结构中向上调用](https://stackoverflow.com/a/9889187/2038264)，即在创建时`Derived`，`Base()`在执行之前`Derived()`。这意味着您运行`objPtr = new SomeObject;`了两次，并且只删除了一次。

你也应该让你的基类析构函数是虚拟的，尤其是当你要从一个ptr中删除`Derived`实例的时候。`Base`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T01:17:59.917

您应该将基类的析构函数设为虚拟。

```
virtual ~Base(){
    delete objPtr;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T01:31:37.877

Sub::Sub() 构造函数在 Base::Base() 超级构造函数分配第一个对象之后分配第二个额外的 SomeObject ，并且第二个分配的指针分配给 objPtr 引发泄漏。

注意： Base::Base() 被 Sub::Sub() 隐式调用

解决方案：只需删除 Sub::Sub() 中不必要的分配

另一个建议：按照继承的建议使您的 Base 析构函数虚拟化

```
virtual ~Base(){
    delete objPtr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T01:20:39.877

当您创建派生类时，它首先调用`Base`类构造函数，然后调用`Sub`s 构造函数，您可以在此处看到：

```
class Base
{
public:
    Base(){
       std::cout << "Base() ctor" <<std::endl ;
        objPtr = new int;
    }
    ~Base(){
        delete objPtr;
    }
    int* objPtr;
};

class Sub : public Base
{
public:
    Sub(){
       std::cout << "Sub() ctor" <<std::endl ;
    objPtr = new int;
    }
}; 
```

因此，您最终在 . 中调用`new`了两次`Base`，然后在`Sub`. 然后分配的内存`Base`会丢失，并且您有泄漏。您还需要制作析构函数`virtual`以使其与派生类一起正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T01:35:39.427

该指针的内存被分配了两次。所以你永远不会为它释放所有新的内存。只需将指针设为私有成员并仅在基类中分配它。

# javascript - Javascript to jQuery Get value of Radio button

> ID：15561084
> 
> 赞同：0
> 
> 时间：2013-03-22T01:15:48.320
> 
> 标签：javascript, jquery

After having successfully completed an application in Javascript, I am trying to make it more jQuery friendly. However, when I try to get the value of a radio button like so:

```
 // relavent declarations: 

var radio = $("[name='buttons']");  // 4 radio buttons
var val = '';
var score = 0;

for( var q in radio ) {
if (radio[q].checked)
    val = radio[q].val();
}
     if(val === correct) {
    score++;
} 
```

What I'm trying to do is make it so that the equivalent in straight Javascript is like this:

```
for( var q in radio ) {
if (radio[q].checked)
    val = radio[q].value;
}
     if(val === correct) {
    score++;
} 
```

My Javascript console keeps giving me the error "Uncaught TypeError: Object # has no method 'val'" What is the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:18:41.140

try this

```
$('input:radio').each(function(){
   if($(this).is(':checked'))
     var value = $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:19:07.163

`radio[q]` will give you a raw DOM node object, you probably want the associated jQuery object, so try `radio[q].eq(q)`.

See: [http://api.jquery.com/eq/](http://api.jquery.com/eq/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T01:19:17.007

Try below code :

```
$(":radio:checked").each(function(){
    val = $(this).val();
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T01:23:55.440

我认为你正在写一些有答案的东西，如果用户检查正确，那么他会得到一个分数

**建议 1)**给所有的复选框起相同的名字，这样就只能选中一个

```
 <input type="radio" name="Answer" /> 
```

**建议 2)**从 myForm 中获取选中的复选框值

```
 $('input[name=radioName]:checked', '#myForm').val() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T01:34:07.127

尽可能接近我认为你想要的。

```
 $(document).ready(function() {
                var radio = $("input[type='radio']");
                for (var i in radio) {
                    i = parseInt(i);
                    var r = radio[i];
                    if ($(r).prop("checked") == true) {

                        console.log($(r).val());
                    }
                }

            })
 }) 
```

添加了值的读数

# javascript - Uploadify - How to send file size using scriptData

> ID：15561086
> 
> 赞同：2
> 
> 时间：2013-03-22T01:15:59.603
> 
> 标签：javascript, jquery, uploadify

I need to send file name and file size using uploadify. **I DO NOT want to upload the file itself but only send file name and file size.** I noticed that uploadify sends file name by default but does not send file size.I experimented using scriptData but it does not work. Here is my code:

```
$('#logical_item_upload').uploadify({
    uploader        : '/uploadify/uploadify.swf',
    cancelImg       : '/uploadify/cancel.png',
    multi           : true,
    auto            : true,
    script          : "<%=save_upload_logical_items_path%>",
    onComplete      : function(event, queueID, fileObj, response, data) { 
        var dat = eval('(' + response + ')');
        $.getScript(dat.upload);},
    scriptData : {
        '_http_accept': 'application/javascript',
        'format' : 'json',
        '_method': 'post',
        'user_id' : '<%= current_user.id %>'
        }
        }); 
```

I need something like following:

```
scriptData : {
    '_http_accept': 'application/javascript',
    'format' : 'json',
    '_method': 'post',
    'user_id' : '<%= current_user.id %>',
    'file_size': file_size
    } 
```

**How can I send just the file name and file size without uploading the file?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:56:11.200

您是否尝试过使用[formData](http://www.uploadify.com/documentation/uploadify/formdata/)而不是 scriptData？我不认为你可以让 uploadify 跳过传递文件（毕竟它是一个文件上传器），但你想要的数据仍然会传递到服务器。

至于获取文件大小，我认为没有任何方法可以在客户端访问它，但在后端可以使用`params[:upload].size`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:39:57.830

大小和文件名作为 from/header 数据的一部分上传到服务器。文件大小也隐藏在`file`附加到每个上传队列条目的对​​象中`.data()`。

您可以在服务器端中止/取消上传，但这看起来很混乱。

为什么不直接将所有文件和长度的 json 字符串发送到另一个服务器处理程序而不是文件接收呢？您可以从上传队列中的“文件”对象中提取它。

# c# - Save a custom class to Isolated Storage using a Collection

> ID：15561091
> 
> 赞同：0
> 
> 时间：2013-03-22T01:16:24.637
> 
> 标签：c#, serialization, windows-phone-8, observablecollection, bitmapimage

I have created a custom class named `ImageItem` which contains a BitmapImage and string to gather the response of the `CaptureImageTask`. I would like to save each image and its respective path to an `ObservableCollection` which is bound to a listbox in my view.

As of now the listbox populates correctly, but **I am having trouble storing `ObservableCollection<ImageItem>` in isolated storage**, I believe because of the `BitmapImage type`.

I am not sure of how to fix my solution so that the `BitmapImage` will be allowed to be saved to isolated storage along with its respective path within an `ObservableCollection`.

I believe I have narrowed down the issue to `BitmapImage` not being a serializable type. I have tried using `[DataContract]` and '[DataMember]`attributes within`ImageItem.cs` without success. I have never attempted to save a nonprimitive type.

Following are the code, with some description of each file.

*   ImageItem.cs

    ```
    public class ImageItem
    {
        public BitmapImage ImageUri
        {
            get;
            set;
        }

        public string ImagePath
        {
            get;
            set;
        }
    } 
    ```

*   Settings.cs

    I am using a `Settings` class to create the `ObservableCollection` of custom type.

    ```
    public static class Settings
    {
        public static readonly Setting<ObservableCollection<ImageItem>> imageList = new Setting<ObservableCollection<ImageItem>>("imageList", new ObservableCollection<ImageItem>());
    } 
    ```

*   Setting.cs

    Where `Setting` is a class that reads and saves data to Isolated Storage

    ```
    public class Setting<T>
    {
        string name;
        T value;
        T defaultValue;
        bool hasValue;

        public Setting(string name, T defaultValue)
        {
            this.name = name;
            this.defaultValue = defaultValue;
        }

        public T Value
        {
            get
            {
                //Check for the cached value
                if (!this.hasValue)
                {
                    //Try to get the value from Isolated Storage
                    if (!IsolatedStorageSettings.ApplicationSettings.TryGetValue(this.name, out this.value))
                    {
                        //It hasn't been set yet
                        this.value = this.defaultValue;
                        IsolatedStorageSettings.ApplicationSettings[this.name] = this.value;
                    }
                    this.hasValue = true;
                }
                return this.value;
            }

            set
            {
                //Save the value to Isolated Storage
                IsolatedStorageSettings.ApplicationSettings[this.name] = value;
                this.value = value;
                this.hasValue = true;
            }
        }

        public T DefaultValue
        {
            get { return this.defaultValue; }
        }

        // Clear cached value
        public void ForceRefresh()
        {
            this.hasValue = false;
        }
    } 
    ```

*   MainPage.xaml.cs

    From here I am simply attempting to save the result of the `CameraCaptureTask` which is used to populate the `ObservableCollection` and the listbox

    ```
    void cameraCaptureTask_Completed(object sender, PhotoResult e)
    {
        if (e.TaskResult == TaskResult.OK)
        {
            //values declared earlier
            imgChosenPhotoFilePath = null;
            bmp = new BitmapImage();

            imgChosenPhotoFilePath = e.OriginalFileName;

            bmp.SetSource(e.ChosenPhoto);
            imgChosenPhoto.Source = bmp;

            //Add photo to listbox and observablecollection
            AddToImgList(imgChosenPhotoFilePath, bmp);
        }
    }

    private void AddToImgList(string filePath, BitmapImage bitmap)
    {
        //save the values to the ObservableCollection
        Settings.imageList.Value.Add(new ImageItem() { ImagePath = filePath, ImageUri = bitmap });

        //populate the listbox in the view named imgList
        imgList.ItemsSource = Settings.imageList.Value;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:54:49.487

正如您所发现的，您无法序列化`BitmapImage`. 最简单的替代方法是将其保存为单独的文件，然后将文件名保存在您正在序列化的集合中。

显然，在反序列化时，您需要从磁盘读取文件并将其加载回 BitmapImage。

如果您要在应用程序的整个生命周期中保留这些数据以供使用，那么将图像直接保存到 IsolatedStorage 并将路径保留在视图模型中可能会更容易。然后，您可以将路径绑定到 ListBoxItemTemplate 中的图像。

# angularjs - 在 AngularJS 中动态构建表单时有什么好的做法？

> ID：15561094
> 
> 赞同：0
> 
> 时间：2013-03-22T01:16:35.787
> 
> 标签：angularjs

我有一些 JSON 数据——一个包含输入类型（输入、下拉、单选、复选框等）、标签以及是否需要它们的字段数组。

我正在通过数组进行 ng-repeat 以构建表单。我试图了解基于输入类型值构建不同类型输入的最佳方法是什么。

在正常编程中，我会做一个

```
foreach (var field in FormData){
  if (field.inputType == "dropdown"){
    //logic to build dropdown using jQuery, etc..
    }
} 
```

在 AngularJS 中，如果 thens 在 ng-repeat="formData 中的字段" 中，我真的不能这样做。在遍历数组时动态构建这些不同类型的元素的正确方法是什么？

这个问题很相似： [How can I use Angular to output dynamic form fields？](https://stackoverflow.com/questions/15296949/how-can-i-use-angular-to-output-dynamic-form-fields?rq=1)

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:28:42.540

在我的应用程序中，我确实在我的 ng-repeat 中使用了 ng-switch（参见非常相似问题的答案）来实现与此类似的功能。唯一的问题是链接到模型。如果您想绑定到存储在变量中的属性名称（如果您的 json 包含该字段的 id），您将无法执行以下操作：

```
<input type="text" ng-model="formdata.{{elem.id}}" /> 
```

我发现你可以这样做：

```
<input type="text" ng-model="formdata[elem.id]" /> 
```

# ruby-on-rails - 在 Rails 中增加数据库值

> ID：15561095
> 
> 赞同：4
> 
> 时间：2013-03-22T01:16:48.387
> 
> 标签：ruby-on-rails, activerecord

在 Rails 中，我想通过递增来更新一些数据库值。比如说，我的表中有 30 的值，我想加上 0.5。

以下是我尝试完成的方法：

```
Record.where(:status => "somestatus").first.value.to_f += 0.5 
```

RoR 抱怨说“未定义的方法 `to_f='”。我知道我可以先获取值，计算结果，最后更新属性。但是最有效的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T12:29:54.170

希望字段**值**是 Float 类型，以下将根据您的需要更新值。

```
object = Record.where(:status => "somestatus").first
object.increment!(:value, 0.5) 
```

[在此处](http://apidock.com/rails/ActiveRecord/Base/increment!)查看有关**增量的文档！**方法。

# c++ - 看不懂这个向量声明

> ID：15561097
> 
> 赞同：3
> 
> 时间：2013-03-22T01:17:24.283
> 
> 标签：c++

我是一个真正的 C++ 菜鸟，我有一个非常简单的问题。

```
vector<int> s[10]; 
```

这个声明实际上做了什么？sa 向量是否具有 10 个整数的容量？与此相比有什么区别：

```
vector<int> s(10); 
```

如果这是一个愚蠢的问题，我真的很抱歉，但我真的无法理解这个声明的作用。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T01:18:45.517

第一个是 10 个空向量的数组。

第二个是用 10 个元素初始化的单个向量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T01:19:38.513

它是 std::vector 和内置数组类型的混合。特别是一个数组`std::vector`；

```
vector<int> s[10]; 
```

表示创建 10 个矢量对象。你可以这样想：

```
vector<int> s0;
vector<int> s1;
...
vector<int> s10; 
```

矢量对象的数量是固定的。每个向量中的项目数可以变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:29:21.717

Vector 有一个这样的构造函数：

```
vector (size_type n); 
```

所以第二个只是声明一个大小为 10 的 int 向量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T03:50:11.760

`vector<int> s[10];`表示“s”是一个数组，它有 10 个元素，每个元素的类型都是`vector<int>`.

`vector<int> s(10);`表示 "s" 是 a `vector<int>`，并且这个向量的大小是 10，但这不是声明。

可以有更复杂的声明，当声明一个指向具有很多参数和复杂返回值的类函数的函数指针时。

例如：

`vector<int> (*func[10])(int *);` 这里声明指针指向一个接收`int *`参数的函数，并返回一个`vector<int>`值，加上它是一个这种指针的数组，数组的大小是10。

# python - 使用 GIS 数据的 Python 包？

> ID：15561103
> 
> 赞同：4
> 
> 时间：2013-03-22T01:18:06.917
> 
> 标签：python, gis

例如，我想计算给定纬度和经度的中点。是否有一个 Python 包已经这样做了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T02:33:53.307

您可以尝试[Shapely](http://toblerity.github.com/shapely/manual.html)，它只是一组简洁的地理工具。顺便说一句，我认为这样的事情会起作用：

```
from shapely.geometry import MultiPoint
points = MultiPoint([(0.0, 0.0), (1.0, 1.0)])
print points.centroid #True centroid, not necessarily an existing point 
```

此外，您是否知道有一个完整的 StackExchange 站点仅用于 GIS 软件问题？[GIS.StackExchange](http://gis.stackexchange.com)真的很有帮助。

最后，你看过[ArcPy](http://resources.arcgis.com/en/help/main/10.1/index.html#//000v00000001000000)吗？

这是一个由 ESRI 围绕 ArcGIS 建立的库。不幸的是，它需要许可证。瘸。但是，如果您的项目有企业支持，那么它是一个非常灵活且功能强大的地理问题库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T01:22:32.503

你可以看看项目[匀称](https://github.com/sgillies/shapely)。它应该允许您在 Python 中使用 GIS 数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T03:22:38.373

如果您的应用程序用于高纬度和/或覆盖数千公里，您可能需要考虑类似 geolib 的东西[，](http://geographiclib.sourceforge.net/html/other.html#python)它知道测地线计算，而不是假设笛卡尔坐标。

# java - 如何存储和显示要在 JTextBox 或 JTable 中显示的值？

> ID：15561109
> 
> 赞同：-3
> 
> 时间：2013-03-22T01:18:38.333
> 
> 标签：java, swing, jtable, jtextarea

我必须存储变量：itemName、origPrice、salesPrice 和部门，然后在 JTextBox 或 JTable 中显示所有记录。无论显示什么值，都必须能够添加到容器中，该容器具有`getContentPane();`

我不知道如何存储变量。java安装JDK的时候会自带数据库吗？

此外，变量存储在一个动作侦听器中，显示值按钮具有不同的动作侦听器。

```
 //Calculate action listener
    buttonCalc.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent evt) {

        itemName = fieldItem.getText();            
        originalPrice = Double.parseDouble(fieldOrigPrice.getText());
        discount = Double.parseDouble(fieldDiscount.getText());            
        salesPrice = originalPrice - (originalPrice * discount);   

        //store these values 

         // sales price label
        JLabel label = new JLabel();        
         ...
        container.add( label );         

      }
    });

    //Display values action listener
     buttonDisplay.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent evt) {
           /*Must use a JTextArea or JTable to display all the stored values for:
            * 
            * Item name 
                Department
                Original price
                Sale price 
            */
        }
    }); 
```

编辑：用户输入项目名称、部门、原价和百分比折扣。我必须在 JTextArea 或 JTable 中显示用户在 JFrame 打开时输入的每个 itemName、department、originalPrice 和 salesPrice。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:40:22.840

您不需要数据库或任何此类实体，因为您不必担心程序关闭后数据的持久性。您需要的是一个 TableModel 来保存您的数据，例如 DefaultTableModel 对象（如果它很简单），或者一个扩展 AbstractTableModel 的类（如果您想要更多的灵活性）。输入新数据时，您向 TableModel 添加新行并（如果不是 DefaultTableModel）调用触发数据更改方法之一。

有关更多详细信息，请查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

# mysql - MYSQL Query To Find And Replace A Dynamic Phrase On All Posts

> ID：15561111
> 
> 赞同：0
> 
> 时间：2013-03-22T01:18:43.457
> 
> 标签：mysql

```
Based on our stats gathered across the U.S.        95%      of Flight Department Managers were males while        95%      were females. 
```

I've got this sentence on a few thousand wordpress posts where Flight Department Managers is the dynamic factor here obviously.

What I need to do is replace the first 95% to %5, but only on posts that have both 95% for male and female in this sentence.

So the above sentence would read as

```
Based on our stats gathered across the U.S.        5%      of Flight Department Managers were males while        95%      were females. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:25:29.910

您可以编写如下内容：

```
UPDATE table_name
   SET column_name = REPLACE(column_name, ' U.S.        95% ', ' U.S.        5% ')
 WHERE column_name REGEXP ' 95% .* 95% '
; 
```

# java - 使用 DatePicker 和 TimePicker 对话框 - Eclipse 中的 Android Java

> ID：15561112
> 
> 赞同：0
> 
> 时间：2013-03-22T01:18:45.003
> 
> 标签：java, android, eclipse, datepicker, timepicker

我的代码没有错误，但是当我启动时，我的主要 XML 页面中出现了一个致命错误，上面写着：

> 03-21 22:00:31.849: E/AndroidRuntime(606): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{countrycabin.ist236/countrycabin.ist236.Main}: java.lang.NullPointerException

我不确定是什么导致了问题。正如我所说，我没有错误。我制作了一个与此非常相似的程序，它运行良好，我只是将 TimePicker 添加到这个程序中。

我正在尝试做的事情非常简单。我正在启动程序，当我单击一个按钮时，会显示一个对话框，显示 DatePicker 或 TimePicker，当有人选择一个日期时，会在底部的 TextView 中显示单词。但是，我什至无法对此进行测试，因为它甚至不会启动。我的模拟器告诉我它不会响应。

正如教科书中所述，我正在为此使用 Honeycomb。

这是我所有的代码。

主要清单 XML

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="countrycabin.ist236"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="11" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="countrycabin.ist236.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

主要 XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:id="@+id/LinearLayout1"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="horizontal"
  tools:context=".Main" >

<ImageView
    android:id="@+id/imgCabin"
    android:layout_width="282dp"
    android:layout_height="match_parent"
    android:contentDescription="@string/strCabin"
    android:src="@drawable/cabin" />

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TableRow>

        <TextView
            android:id="@+id/txtTitle"
            android:layout_width="wrap_content"
            android:background="#666FFF"
            android:padding="50dp"
            android:text="@string/strTitle"
            android:textSize="40sp"
            android:typeface="serif" />

    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/txtDesc"
            android:layout_width="wrap_content"
            android:padding="25dp"
            android:text="@string/strDesc"
            android:textSize="30sp" />

        </TableRow>

        <RadioGroup
            android:id="@+id/radio"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.20"
            android:contentDescription="@string/strRad" >

            <RadioButton
                android:id="@+id/radCabin1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:layout_marginLeft="250dp"
                android:checked="true"
                android:text="@string/strCabinOne"
                android:textSize="25sp" />

            <RadioButton
                android:id="@+id/radCabin2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="250dp"
                android:text="@string/strCabinTwo"
                android:textSize="25sp" />

        </RadioGroup>

    <TableRow>

        <Button
            android:id="@+id/btnDate"
            android:layout_width="50dp"

            android:padding="20sp"
            android:text="@string/strDate"
            android:textSize="25sp" />

    </TableRow>

    <TableRow>

          <Button
             android:id="@+id/btnTime"
             android:layout_width="50dp"

             android:padding="20sp"
             android:text="@string/strTime"
             android:textSize="25sp" />

    </TableRow>

       <TableRow>

        <TextView
            android:id="@+id/txtDate"
            android:layout_gravity="center"
            android:padding="20dp"
            android:textSize="25sp" />

    </TableRow>

       <TableRow>

            <TextView
                android:id="@+id/txtTime"
                android:layout_gravity="center"
                android:padding="20dp"
                android:textSize="25sp" />

       </TableRow>

</TableLayout>

</LinearLayout> 
```

主类（Java 代码）

```
package countrycabin.ist236;

import java.util.Calendar;

import android.os.Bundle;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker; 
import android.widget.RadioButton;
import android.widget.TextView;
import android.widget.TimePicker;

public class Main extends Activity {

private int currentYear;
private int currentMonth;
private int currentDay;
static final int DATE_DIALOG_ID = 0;
static final int TIME_DIALOG_ID = 1;
int hour;
int minute;
String cabin1 = "The Wooden Castle";
String cabin2 = "Cozy Little Spot";
private Button btDate;
private Button btTime;
private TextView timeDisplay;
private TextView dateDisplay;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    timeDisplay = (TextView) findViewById(R.id.txtTime);

    dateDisplay = (TextView) findViewById(R.id.txtDate);

    btDate = (Button) findViewById(R.id.btnDate);

    btTime = (Button) findViewById(R.id.btnTime);

    btDate.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            showDialog(DATE_DIALOG_ID);

        }
    });
    final Calendar c = Calendar.getInstance();
    currentYear = c.get(Calendar.YEAR);
    currentMonth = c.get(Calendar.MONTH);
    currentDay = c.get(Calendar.DAY_OF_MONTH);

     btTime.setOnClickListener(new View.OnClickListener(){

    @Override
    public void onClick(View v){
        showDialog(TIME_DIALOG_ID);
    }
});
final Calendar d = Calendar.getInstance();
hour = d.get(Calendar.HOUR_OF_DAY);
minute = d.get(Calendar.MINUTE);

}

protected Dialog onCreateDialog(int id) {
    switch(id){
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this, reservationDate, currentYear, currentMonth, currentDay);
    case TIME_DIALOG_ID:
        return new TimePickerDialog(this, timeDate, hour, minute, false);
    }
    return null;
}

private DatePickerDialog.OnDateSetListener reservationDate = new DatePickerDialog.OnDateSetListener() {
    final RadioButton c1 = (RadioButton) findViewById(R.id.radCabin1);
    final RadioButton c2 = (RadioButton) findViewById(R.id.radCabin2);
        @Override
    public void onDateSet(DatePicker view, int year, int month, int day){
    if(c1.isChecked()){

        dateDisplay.setText("Your rental time is set for " + (month + 1) + "-" + day + "-" + year + " to " + (month + 1) + "-" + (day + 3) + "-" + year + " in " + cabin1 + ".");
    }
    if(c2.isChecked()){
        dateDisplay.setText("Your rental time is set for " + (month + 1) + "-" + day + "-" + year + " to " + (month + 1) + "-" + (day + 3) + "-" + year + " in " + cabin2 + ".");
    }
    }

};

private TimePickerDialog.OnTimeSetListener timeDate = new TimePickerDialog.OnTimeSetListener() {

    @Override
    public void onTimeSet(TimePicker view, int hours, int minutes) {
        timeDisplay.setText("Your arrival time will be at " + hours + ":" + minutes + ".");
    }
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:30:55.297

检查此代码：它现在工作正常。

![在此处输入图像描述](../Images/8fb73fc844f502d4ab97cc0e38fbb0a1.png)

我已经对 XML 文件以及您的活动进行了一些更改，现在它工作正常

**但是您必须根据您的要求进行一些更改。**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imgCabin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="strCabin"
        android:src="@drawable/ic_launcher" />

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableRow>

            <TextView
                android:id="@+id/txtTitle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#666FFF"
                android:text="strTitle"
                android:textSize="40sp"
                android:typeface="serif" />
        </TableRow>

        <TableRow>

            <TextView
                android:id="@+id/txtDesc"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="strDesc"
                />
        </TableRow>

        <TableRow>

            <RadioGroup
                android:id="@+id/radio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="strRad" >

                <RadioButton
                    android:id="@+id/radCabin1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="5dp"
                    android:layout_marginLeft="250dp"
                    android:checked="true"
                    android:text="strCabinOne"
                    android:textSize="25sp" />

                <RadioButton
                    android:id="@+id/radCabin2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="250dp"
                    android:text="strCabinTwo"
                    android:textSize="25sp" />
            </RadioGroup>
        </TableRow>

        <TableRow>

            <Button
                android:id="@+id/btnDate"
                android:layout_width="50dp"
                android:padding="20sp"
                android:text="strDate"
                android:textSize="25sp" />
        </TableRow>

        <TableRow>

            <Button
                android:id="@+id/btnTime"
                android:layout_width="50dp"
                android:padding="20sp"
                android:text="strTime"
                android:textSize="25sp" />
        </TableRow>

        <TableRow>

            <TextView
                android:id="@+id/txtDate"
                android:layout_gravity="center"
                android:padding="20dp"
                android:textSize="25sp" />
        </TableRow>

        <TableRow>

            <TextView
                android:id="@+id/txtTime"
                android:layout_gravity="center"
                android:padding="20dp"
                android:textSize="25sp" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

活动 ：

```
public class Main extends Activity {

    private int currentYear;
    private int currentMonth;
    private int currentDay;
    static final int DATE_DIALOG_ID = 0;
    static final int TIME_DIALOG_ID = 1;
    int hour;
    int minute;
    String cabin1 = "The Wooden Castle";
    String cabin2 = "Cozy Little Spot";
    private Button btDate;
    private Button btTime;
    private TextView timeDisplay;
    private TextView dateDisplay;
    private RadioButton c1;
    private RadioButton c2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Calendar c = Calendar.getInstance();
        currentYear = c.get(Calendar.YEAR);
        currentMonth = c.get(Calendar.MONTH);
        currentDay = c.get(Calendar.DAY_OF_MONTH);
        hour = c.get(Calendar.HOUR_OF_DAY);
        minute = c.get(Calendar.MINUTE);

        timeDisplay = (TextView) findViewById(R.id.txtTime);
        dateDisplay = (TextView) findViewById(R.id.txtDate);
        btDate = (Button) findViewById(R.id.btnDate);
        btTime = (Button) findViewById(R.id.btnTime);
        c1 = (RadioButton) findViewById(R.id.radCabin1);
        c2 = (RadioButton) findViewById(R.id.radCabin2);
        btDate.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                showDialog(DATE_DIALOG_ID);
            }
        });
        btTime.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                showDialog(TIME_DIALOG_ID);
            }
        });
    }

    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, reservationDate, currentYear,
                    currentMonth, currentDay);
        case TIME_DIALOG_ID:
            return new TimePickerDialog(this, timeDate, hour, minute, false);
        }
        return null;
    }

    private DatePickerDialog.OnDateSetListener reservationDate = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int month, int day) {
            if (c1.isChecked()) {

                dateDisplay.setText("Your rental time is set for "
                        + (month + 1) + "-" + day + "-" + year + " to "
                        + (month + 1) + "-" + (day + 3) + "-" + year + " in "
                        + cabin1 + ".");
            }
            if (c2.isChecked()) {
                dateDisplay.setText("Your rental time is set for "
                        + (month + 1) + "-" + day + "-" + year + " to "
                        + (month + 1) + "-" + (day + 3) + "-" + year + " in "
                        + cabin2 + ".");
            }
        }

    };

    private TimePickerDialog.OnTimeSetListener timeDate = new TimePickerDialog.OnTimeSetListener() {

        public void onTimeSet(TimePicker view, int hours, int minutes) {
            timeDisplay.setText("Your arrival time will be at " + hours + ":"
                    + minutes + ".");
        }
    };

    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

# c - Reading a text file into 2d array

> ID：15561119
> 
> 赞同：0
> 
> 时间：2013-03-22T01:19:00.710
> 
> 标签：c, file, multidimensional-array, scanf

I have a text file with just random letters in rows and columns. All I would like to do is make a 2d array so that it's `puzzle[i][j]` where if I put `printf("%c", puzzle[5][4]);` it would simply give me the 4th row and 3rd columns character (since it starts at 0 in an array). Here is my code so far.

```
#define MAXROWS     60
#define MAXCOLS     60
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

main()
{
    FILE *TableFilePtr;
    char TableFileName[100];
    char PuzzleFileName[100];
    char puzzle[MAXROWS][MAXCOLS];
    printf("Please enter the table file name: ");
    scanf("%s",TableFileName);

    TableFilePtr=fopen(TableFileName, "r");

    if(TableFilePtr == NULL)
    {
        printf("Can't open %s", TableFileName);
        exit(EXIT_FAILURE);
    }

    char words;
    int n;
    n=0;
    int i,j,row,col;
    int rowcount, colcount;
    printf("\n how many rows and colums are there?  separate by a space: ");
    scanf("%d %d",&row, &col);
    /*  while(fscanf(TableFilePtr,"%c",&words)!= EOF)
    {
        printf("%c",words);
    }
    */

    /*for (colcount=0;colcount<col;colcount++)
    {
        for (rowcount=0;rowcount<row;rowcount++)
        {
            printf("%c ",words);
        }
    printf("\n");
    }
    */

    for(i=0;i<row;i++){
        for(j=0;j<col;j++){
            fscanf(TableFilePtr, "%c %s\n",&puzzle[i]][j]);
                //puzzle[i][j]=words;
    //          printf("%c ", puzzle[i][j]);
        }
        printf("\n");
    }

} 
```

The commented area at the end (just the starting part) works to simply print out the text file in the compiler. I would like to get it to be in a 2d array though.

```
for(colcount=0;colcount<col;colcount++){...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:34:24.643

我会做这样的事情（我没有使用你所有的确切变量名，但你明白了）：

```
 char puzzle[MAXROWS][MAXCOLS], line[MAXCOLS];
    FILE *infile;
    int cols = 0, rows=0;

    /* ... */

    infile = fopen(TableFileName, "r");

    while(fgets(line, sizeof line, infile) != NULL)
    {
        for(cols=0; cols<(strlen(line)-1); ++cols)
        {
            puzzle[rows][cols] = line[cols];
        }
        /* I'd give myself enough room in the 2d array for a NULL char in 
           the last col of every row.  You can check for it later to make sure
           you're not going out of bounds. You could also 
           printf("%s\n", puzzle[row]); to print an entire row */
        puzzle[rows][cols] = '\0';
        ++rows;
    } 
```

编辑：更短的版本将在每行的末尾有换行符和 NULL 字符，除非您手动将它们取下。您可能需要调整拼图[][] （使用 MAXCOLS +/- n 等）以使其适合您。

```
 for(c=0; c<MAXROWS; ++c){
        fgets(puzzle[rows], sizeof puzzle[rows], infile);
    } 
```

在循环结束时，`puzzle[x][y]`应该是输入文件中的二维字符数组。希望有帮助。

# html - 有没有更好的方法来使用 Nokogiri 获取这个元素/节点？

> ID：15561121
> 
> 赞同：0
> 
> 时间：2013-03-22T01:19:07.223
> 
> 标签：html, ruby, nokogiri

我认为解释这一点的最好方法是通过一些代码。基本上，在表格中识别我需要的 TR 的唯一方法（我已经到达表格本身并将其命名为 Annual_income_statement）是通过 TR 中第一个 TD 的文本，如下所示：

这也可能有助于了解：

*实际*的html：

```
doc = Nokogiri::HTML(open('https://www.google.com/finance?q=NYSE%3AAA&fstype=iii')) 
```

html片段：

```
<div id="incannualdiv">
  <table id="fs-table">
    <tbody>
      <tr>..</tr>
      ...
      <tr>
        <td>Net Income</td>
        <td>100</td>
      </tr>
      <tr>..</tr>
    </tbody>
  </table>
</div> 
```

原始xpath

```
irb(main):161:0> annual_income_statement = doc.xpath("//div[@id='incannualdiv']/table[@id='fs-table']/tbody") 
```

 ````
irb(main):121:0> a = nil
=> nil
irb(main):122:0> annual_income_statement.children.each { |e| if e.text.include? "Net Income" and e.text.exclude? "Ex"
irb(main):123:2>   a = e.text
irb(main):124:2> end }
=> 0
irb(main):125:0> a
=> "Net Income\n\n191.00\n611.00\n254.00\n-1,151.00\n"
irb(main):127:0> a.split "\n"
=> ["Net Income", "", "191.00", "611.00", "254.00", "-1,151.00"] 
```

但是有更好的方法吗？

更多细节：

```
doc = Nokogiri::HTML(open('https://www.google.com/finance?q=NYSE%3AAA&fstype=iii'))
div = doc.at "div[@id='incannualdiv']" #div containing the table i want
table = div.at 'table' #table containing tbody i want
tbody = table.at 'tbody' #tbody containing tr's I want
trs = tbody.at 'tr' #SHOULD be all tr's of that table/tbody - but it's only the first TR? 
```

我希望最后一点能给我所有的 TR（包括我正在寻找的 TD），但实际上*它只给了我第一个 TR*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:33:26.157

最好的可能是：

```
table.at 'tr:has(td[1][text()="Net Income"])' 
```

**编辑**

更多信息：

```
doc = Nokogiri::HTML <<EOF
<div id="incannualdiv">
  <table id="fs-table">
    <tbody>
      <tr>..</tr>
      ...
      <tr>
        <td>Net Income</td>
        <td>100</td>
      </tr>
      <tr>..</tr>
    </tbody>
  </table>
</div>
EOF
table = doc.at 'table'
table.at('tr:has(td[1][text()="Net Income"])').to_s
#=> "<tr>\n<td>Net Income</td>\n        <td>100</td>\n      </tr>\n" 
````

# asp.net - Could not load file or assembly 'System.Core, Version=3.5.0.0'. Can work on 2.0.0.0 or 4.0.0.0?

> ID：15561124
> 
> 赞同：0
> 
> 时间：2013-03-22T01:19:25.717
> 
> 标签：asp.net, visual-studio, web-config

I have seen many answers to similar questions, but have an additional question

I developed a web site in Visual Studio 2008\. Working well on development server. When I tried to transfer it to client's server, it is giving the error: Could not load file or assembly 'System.Core, Version=3.5.0.0'

Noticed that client's server has version 2.0.0.0 and 4.0.0.0\. Changing my development environment to VS2010 might work, but is there any simpler solution (something like modifying web.config file)?

In short: If I develop with 3.5.0.0, can the site be loaded to 2.0.0.0 OR 4.0.0.0 by modifying the web.config file? (It is logical that some compatibility/flexibility will be there between development and deployment set up I hope!). My web site is pretty simple, but have a MS SQL db interactions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:54:12.277

当您从 IIS 设置中读取 v2.0 和 v4.0 时，这仅意味着机器上至少安装了 .NET 2.0 和 .NET 4.0，因此在 IIS 中注册了两个版本的 CLR。

但是，要运行基于 .NET 3.5 的 Web 应用程序，您需要在计算机上安装 .NET 3.5。尽管安装 .NET 3.5 会重用 CLR 2.0，但必须提供应用程序所需的 System.Core。

确保为 IIS 应用程序池选择 v2.0，以便 IIS 加载 CLR 2 并为您的应用程序自动初始化 .NET 3.5 所需的程序集。

# triggers - vim 进入可视模式时运行命令

> ID：15561132
> 
> 赞同：10
> 
> 时间：2013-03-22T01:20:02.493
> 
> 标签：triggers, vim

我使用一个小脚本来触发插入模式以更改行号颜色：

```
function! CursorLineNrColorInsert(mode)
    " Insert mode: blue
    if a:mode == "i"
        highlight CursorLineNr ctermfg=4
        highlight CursorLineNr guifg=#268bd2

    " Replace mode: red
    elseif a:mode == "r"
        highlight CursorLineNr ctermfg=1
        highlight CursorLineNr guifg=#dc322f

    else
        highlight CursorLineNr ctermfg=0
        highlight CursorLineNr guifg=#073642

    endif
endfunction

autocmd InsertEnter * call CursorLineNrColorInsert(v:insertmode)
autocmd InsertLeave * highlight CursorLineNr ctermfg=0
autocmd InsertLeave * highlight CursorLineNr guifg=#073642 
```

当我进入任何插入模式并在正常模式下恢复为原始颜色时，它工作得很好并且会**立即更改我的行号。**

我想对视觉模式做同样的事情：

```
function! CursorLineNrColorVisual(mode)
    " Visual mode: orange
    if mode()=~#"^[vV\<C-v>]"
        highlight CursorLineNr ctermfg=9
        highlight CursorLineNr guifg=#cb4b16

    else
        highlight CursorLineNr ctermfg=0
        highlight CursorLineNr guifg=#073642

    endif
endfunction

autocmd CursorMoved * call CursorLineNrColorVisual(mode()) 
```

基本上这有效，但**不是立即生效**，因为该功能是在`CursorMoved`. 一旦激活任何视觉模式，我怎么能`CursorLineNrColorVisual()` **立即开火？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T12:54:18.367

在花了一些时间后，`:help`我完成了以下设置：

```
" Colorize line numbers in insert and visual modes
" ------------------------------------------------
function! SetCursorLineNrColorInsert(mode)
    " Insert mode: blue
    if a:mode == "i"
        highlight CursorLineNr ctermfg=4 guifg=#268bd2

    " Replace mode: red
    elseif a:mode == "r"
        highlight CursorLineNr ctermfg=1 guifg=#dc322f

    endif
endfunction

function! SetCursorLineNrColorVisual()
    set updatetime=0

    " Visual mode: orange
    highlight CursorLineNr cterm=none ctermfg=9 guifg=#cb4b16
endfunction

function! ResetCursorLineNrColor()
    set updatetime=4000
    highlight CursorLineNr cterm=none ctermfg=0 guifg=#073642
endfunction

vnoremap <silent> <expr> <SID>SetCursorLineNrColorVisual SetCursorLineNrColorVisual()
nnoremap <silent> <script> v v<SID>SetCursorLineNrColorVisual
nnoremap <silent> <script> V V<SID>SetCursorLineNrColorVisual
nnoremap <silent> <script> <C-v> <C-v><SID>SetCursorLineNrColorVisual

augroup CursorLineNrColorSwap
    autocmd!
    autocmd InsertEnter * call SetCursorLineNrColorInsert(v:insertmode)
    autocmd InsertLeave * call ResetCursorLineNrColor()
    autocmd CursorHold * call ResetCursorLineNrColor()
augroup END 
```

为了在离开可视模式后恢复行号的颜色，我必须执行以下步骤：

1.  重新映射相关的键绑定以调用“enter-visual-function”
2.  进入视觉模式时，功能设置`updatetime=0`为`CursorHold`事件
3.  通过调用“离开视觉功能”`autocmd CursorHold`
4.  离开视觉模式时，功能会`updatetime=4000`为`CursorHold`事件重置

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T07:44:19.493

正如 romainl 指出的那样，没有进入/退出视觉模式的事件。我会这样做：

```
function! CursorLineNrColorVisual()
    ...
    return ''   " Return nothing to make the map-expr a no-op.
endfunction
vnoremap <expr> <SID>CursorLineNrColorVisual CursorLineNrColorVisual()
nnoremap <script> v v<SID>CursorLineNrColorVisual
nnoremap <script> V V<SID>CursorLineNrColorVisual
nnoremap <script> <C-v> <C-v><SID>CursorLineNrColorVisual 
```

* * *

或者，您可以尝试将表达式 ( `%{CursorLineNrColorVisual}`) 放入`'statusline'`; 这经常被评估。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-06T04:28:56.733

[编辑] Promptlines 插件使用这种方法：

由于每次更改模式时都会重新绘制状态行，因此每次更改模式时都可以通过添加状态行来触发`%{AnyName(mode())}`（不会显示）。然后，您可以实现一个`AnyName`能够过滤当前模式的函数。举个例子：

```
let &stl.='%{RedrawStatuslineColors(mode())}'

function! RedrawStatuslineColors(mode)
    if a:mode == 'n'
        call NormalHighlight()
    elseif a:mode == 'i'
        call InsertHighlight()
    elseif a:mode == 'R'
        call ReplaceHighlight()
    elseif a:mode == 'v' || a:mode == 'V' || a:mode == '^V'
        call VisualHighlight()
    endif
endfunction 
```

[编辑 2] [Itchyny](https://github.com/itchyny/lightline.vim/blob/master/autoload/lightline.vim#L346)建议在此线程上使用其他方法，以避免性能问题：建议缓存模式并`RedrawStatuslineColors()`立即完成功能（即。）。

# php - 使用 Ajax 和 mySQL 进行 jQuery 排序

> ID：15561133
> 
> 赞同：0
> 
> 时间：2013-03-22T01:20:08.637
> 
> 标签：php, jquery, mysql, ajax, jquery-ui-sortable

嘿，我已经为我的网站后端创建了一个可排序的列表来组织我的类别，我已经完成了所有工作，因此它使用 Ajax 运行更新 SQL 语句，它无需重新加载就可以保存我的数据，但是我的订单号在我重新加载之前，从数据库显示在我的后端不会改变，任何帮助都会很棒，在此先感谢！

PHP

```
 <?php
    $sql = "SELECT cat_id, cat_name, cat_slug, cat_status, cat_order, sta_id, sta_name
            FROM app_categories LEFT JOIN app_status
            ON app_categories.cat_status = app_status.sta_id
            ORDER BY cat_order ASC";

        if($result = query($sql)){
            $list = array();

            while($data = mysqli_fetch_assoc($result)){
                array_push($list, $data);
            }

            foreach($list as $i => $row){ 
            ?>
                <div class="row" id="page_<?php echo $row['cat_id']; ?>">
                    <div class="column two"><?php echo $row['cat_name']; ?></div>
                    <div class="column two"><?php echo $row['cat_slug']; ?></div>
                    <div class="column two"><?php echo $row['cat_status']; ?></div>
                    <div class="column two"><?php echo $row['cat_order']; ?></div>
                </div>
            <?php
            }
        }
        else {
            echo "FAIL";
        }
    ?> 
```

带有 Ajax 调用的 jQuery

```
 $(document).ready(function(){
        $("#menu-pages").sortable({
            update: function(event, ui) {
                $.post("ajax.php", {  type: "orderPages", pages: $('#menu-pages').sortable('serialize') } );
            }
        });
    }); 
```

还有我的 ajax.php 进行更新

```
<?php

parse_str($_POST['pages'], $pageOrder);

foreach ($pageOrder['page'] as $key => $value) {
    $sql = "UPDATE app_categories SET `cat_order` = '$key' WHERE `cat_id` = '$value'";

    if(query($sql)) {
        echo "YES"; 
    }
    else {
        echo "NO";  
    }

} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:55:40.957

您似乎没有任何类型的代码来处理前端更新。最简单的做法是在您的 ajax 帖子中添加回调，并让服务器将更新信息作为 json 数据发送回。

所以 ajax.php 看起来更像

```
<?php

parse_str($_POST['pages'], $pageOrder);

foreach ($pageOrder['page'] as $key => $value) {
$sql = "UPDATE app_categories SET `cat_order` = '$key' WHERE `cat_id` = '$value'";

if(query($sql)) {
    $orderSql = "SELECT cat_id, cat_name, cat_slug, cat_status, cat_order, sta_id, sta_name
        FROM app_categories LEFT JOIN app_status
        ON app_categories.cat_status = app_status.sta_id
        ORDER BY cat_order ASC";

    if($result = query($sql)){
          echo json_encode(mysqli_fetch_assoc($result));
          return;
    }

} else {
    echo json_encode( array('result' => 'failure'));
}

} 
```

（是的，它很丑陋且未经测试，但你明白了。）

然后你的 javascript 看起来像

```
 $.post("ajax.php", {  type: "orderPages", pages: $('#menu-pages').sortable('serialize') }, function(res){
         if (typeof res.result !== undefined && res.result === 'failure'){
              alert('failed!');
               return;
         } else {
              $.each(res, function(i, item){
                     $("#page_" + item.cat_id).find('div:eq(3)').html(item.cat_order);
              });
     }, 'json' ); 
```

这又是可怕的，但希望能传达这一点。

或者，您可以在排序 div 移动时简单地更新数字。那看起来像：

```
 $("#menu-pages").sortable({
        update: function(event, ui) {
            $.post("ajax.php", {  type: "orderPages", pages: $('#menu-pages').sortable('serialize') } );
            $('.row').each(function(i){
                 $(this).find('div:eq(3)').html(parseInt(i) + 1);
            });
        }
    }); 
```

也没有测试，这是假设 cat_sort 是 1-indexed 并且没有丢失任何值等。

# php - 为什么我不能将返回字符串的函数作为函数的参数传递，其中参数的类型是字符串？

> ID：15561138
> 
> 赞同：1
> 
> 时间：2013-03-22T01:20:58.473
> 
> 标签：php, method-parameters

为什么我不能将返回字符串的函数作为函数的参数传递，其中参数的类型是字符串？

例如：

```
function testFunction(string $strInput) {
    // Other code here...
    return $strInput;
}

$url1 = 'http://www.domain.com/dir1/dir2/dir3?key=value';
testFunction(parse_url($url1, PHP_URL_PATH)); 
```

上面的代码返回错误：

> 可捕获的致命错误：传递给 testFunction() 的参数 1 必须是字符串的实例...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:27:01.643

PHP 类型提示不支持标量类型，如字符串、整数、布尔值等。它目前仅支持对象（通过在函数原型中指定类的名称）、接口、数组（自 PHP 5.1 起）或可调用（自 PHP 5.4 起）。

因此，在您的示例中，PHP 认为您期望的对象来自、继承自或实现称为“字符串”的接口，这不是您想要做的。

[PHP 类型提示](http://php.net/manual/en/language.oop5.typehinting.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:46:25.143

一个非常规的答案，但您真的想为字符串输入提示，您可以为它创建一个新类。

```
class String
{
    protected $value;

    public function __construct($value)
    {
        if (!is_string($value)) {
            throw new \InvalidArgumentException(sprintf('Expected string, "%s" given', gettype($value)));
        }

        $this->value = $value;
    }

    public function __toString()
    {
        return $this->value;
    }
} 
```

你可以使用它的Javascript风格

```
$message = new String('Hi, there');
echo $message; // 'Hi, there';

if ($message instanceof String) {
    echo "true";
} 
```

类型提示示例

```
function foo(String $str) {

} 
```

# javascript - CasperJS - 继续步骤超时

> ID：15561142
> 
> 赞同：1
> 
> 时间：2013-03-22T01:21:38.457
> 
> 标签：javascript, casperjs

正如标题所说，如果上一步超时，我怎样才能让 casperjs 执行下一步？

我当前的代码：

```
var casper =  require('casper').create({

    stepTimeout: 30000,
    verbose: true,
    onError: function(self, m) {   // Any "error" level message will be written
        console.log('FATAL:' + m); // on the console output and PhantomJS will
        self.exit();               // terminate
    },
}); 
```

我知道有一个选项[`onStepTimeout`](http://casperjs.org/api.html#casper.options)。

> 当步进函数执行时间超过 stepTimeout 选项的值时要执行的函数（如果已设置）。
> 
> 默认情况下，超时时脚本将退出并显示错误，除非在**测试环境**中它只会将失败添加到套件结果中。

或者换句话说，如何进入“测试环境”？找不到任何与环境有关的东西。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:26:39.290

哦，我想我只是愚蠢的......

```
var casper =  require('casper').create({

    stepTimeout: 30000,
    verbose: true,
    onError: function(self, m) {   // Any "error" level message will be written
        console.log('FATAL:' + m); // on the console output and PhantomJS will
        self.exit();               // terminate
    },
    onStepTimeout(self,m){
       console.log('timeout: step' + m);
    }
}); 
```

# ios - 使用 NSString 初始化 NSMutableArray 时遇到问题

> ID：15561146
> 
> 赞同：0
> 
> 时间：2013-03-22T01:22:31.463
> 
> 标签：ios, nsstring, nsmutablearray, init

我在使用 2 个对象初始化`NSMutableArray`调用时遇到问题。我收到以下错误：`_entryArray``NSString``@"00:00:00"`

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds for empty array”

当我尝试在其中没有任何对象的情况下对其进行初始化时，我没有收到任何错误。我该怎么办？

非常感谢你

代码：

```
@implementation MainViewController{

@private
int n;
NSMutableArray *_entryArray;
NSMutableArray *_timeSinceLastEntryArray;
NSMutableArray *_timeInterval;
NSMutableArray *_timeInBackup;
NSMutableArray *_timeOutBackup;
BOOL whichButton;

}
-(void)viewWillAppear:(BOOL)animated {

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    n=0;
    _brain = [[Brain alloc] init];
    _entryArray = [[NSMutableArray alloc] initWithObjects:@"00:00:00",@"00:00:00",nil];
    _timeSinceLastEntryArray = [[NSMutableArray alloc] init];
    _timeInBackup = [[NSMutableArray alloc] initWithObjects:(NSNumber *)0, nil];
    _timeOutBackup = [[NSMutableArray alloc] initWithObjects:(NSNumber *)0, nil];
    _timeInterval = [[NSMutableArray alloc] init];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(dismissKeyboard)];

    [self.view addGestureRecognizer:tap];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:33:49.033

这两行导致数组的对象为零：

```
_timeInBackup = [[NSMutableArray alloc] initWithObjects:(NSNumber *)0, nil];
_timeOutBackup = [[NSMutableArray alloc] initWithObjects:(NSNumber *)0, nil]; 
```

您不是添加数字 0，而是添加指针 0。这与`nil`. 换句话说，这段代码实际上是这样的：

```
_timeInBackup = [[NSMutableArray alloc] initWithObjects:nil, nil];
_timeOutBackup = [[NSMutableArray alloc] initWithObjects:nil, nil]; 
```

如果您的意图是添加数字 0，请执行以下操作：

```
_timeInBackup = [[NSMutableArray alloc] initWithObjects:[NSNumber numberWithInt:0], nil];
_timeOutBackup = [[NSMutableArray alloc] initWithObjects:[NSNumber numberWithInt:0], nil]; 
```

更好的是，这样做：

```
_timeInBackup = [@[ @0 ] mutableCopy];
_timeOutBackup = [@[ @0 ] mutableCopy]; 
```

您还有其他空数组：`_timeSinceLastEntryArray`和`_timeInterval`. 您发布的所有代码实际上都没有导致错误。您需要提供更多详细信息才能确定是哪个阵列真正导致了问题。

# sql - 根据 h2 中的选择合并值

> ID：15561150
> 
> 赞同：0
> 
> 时间：2013-03-22T01:22:53.473
> 
> 标签：sql, select, merge, h2

我想`MERGE`根据从另一个表中选择的值来确定值。像这样的东西：

```
MERGE INTO table1 (column1) key(id) 
    values (select amount from table2 where id = id limit 1 + 
    select column1 from table1 where id = id - 1 limit 1) 
    where id > 0 
```

我希望对于 id 大于 0 的每一行都发生这种情况。此外，我希望 table1 中 column1 的值是前一行中 column1 的值加上 table2 中 column2 的值。

我正在使用[H2 数据库](http://www.h2database.com/html/grammar.html)。

# linux - 用于为目录中的所有视频文件生成缩略图的 Bash 脚本

> ID：15561152
> 
> 赞同：1
> 
> 时间：2013-03-22T01:22:58.677
> 
> 标签：linux, bash, ffmpeg

我有一个包含 10,000 多个视频的文件夹。对于每个视频，我想创建一个随机缩略图。

我的视频文件在目录 /videos 缩略图在目录 /thumbs

所有视频都命名为 ID.mp4，其中 ID 是视频文件的任意名称。我希望拇指是 ID.jpg。

我目前将它与 php 一起使用来生成缩略图，但它的效率不足以为所有这些视频做到这一点。

```
$video = "/videos";
$image = "/thumbs";
$time = rand(1,300);
shell_exec("ffmpeg -i $video -an -ss $time -f mjpeg -t 1 -r 1 -y -s 620x370 $image 2>&1"); 
```

有人愿意帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:05:55.673

你可以试试这个：

```
for f in $MOVIEDIR
do
 ffmpeg -i "$f" -t 2 -r 0.5 "$f"%d.jpg
done 
```

你应该让 ffmpeg 行做你想做的事情，并且效率还可以。用较小的电影文件夹将其包装在脚本中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T11:21:33.357

我用这段代码做到了...

```
testApp="avconv"; which $testApp >/dev/null 2>&1 || { echo "$testApp not found, try 'apt-get install libav -y'"; exit 1; }
for f in *.mp4 ; do f2=${f%.*}; r1=$((RANDOM%300+30)); [ -f "$f2.jpg" ] || { avconv -ss $r1 -i "$f" -vsync 1 -r 1 -an -y -vframes 1 -timelimit 1 -vf scale='-1':'640',crop=640:480 "$f2.jpg"; }; done 
```

相同的代码

```
testApp="avconv"; which $testApp >/dev/null 2>&1 || { echo "$testApp not found, try 'apt-get install libav -y'"; exit 1; }
for f in *.mp4 ; do
   f2=${f%.*}; r1=$((RANDOM%300+30))
   [ -f "$f2.jpg" ] || { 
      avconv -ss $r1 -i "$f" -vsync 1 -r 1 -an -y -vframes 1 -timelimit 1 -vf scale='-1':'640',crop=640:480 "$f2.jpg"
   }
done 
```

f=文件名

f2=不带扩展名的文件名

r1=随机整数，介于 20-300 之间，这是快照的时间，以秒为单位

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T09:41:28.227

yes, shell can help you, also, you can run many scripts at the same time, only checking if the jpg is available before converting.

# android - HttpMessageNotReadableException：无法读取 JSON：使用 Spring for Android 无法识别的字段

> ID：15561159
> 
> 赞同：13
> 
> 时间：2013-03-22T01:23:14.923
> 
> 标签：android, spring, jackson

我正在开发与我的服务器通信的 Android 应用程序。这种通信是通过 Spring 框架和 Jackson 完成的。我正在成功发送对我的服务器的请求，但没有收到响应。这是我所做的：

安卓应用：

```
public Loja getLoja() {
        RestTemplate restTemplate = new RestTemplate();
        restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
        restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());

        String url = BASE_URL + "/android/played.json";
        return restTemplate.getForObject(url, Loja.class);
    } 
```

Loja 类（我有两个版本。一个在 Android 应用程序中，另一个在服务器中。它们完全一样）：

```
public class Loja {

    private String nome;
    private String xValue;
    private String yValue;
    private String andar;

    public Loja(String nome, String xValue, String yValue, String andar) {
        this.nome = nome;
        this.xValue = xValue;
        this.yValue = yValue;
        this.andar = andar;
    }

    public Loja() {
    }

    public String getAndar() {
        return andar;
    }

    public void setAndar(String andar) {
        this.andar = andar;
    }

    public String getNome() {
        return nome;
    }

    public void setNome(String nome) {
        this.nome = nome;
    }

    public String getxValue() {
        return xValue;
    }

    public void setxValue(String xValue) {
        this.xValue = xValue;
    }

    public String getyValue() {
        return yValue;
    }

    public void setyValue(String yValue) {
        this.yValue = yValue;
    }

} 
```

这是我的控制器：

```
@RequestMapping("/android/played")
    public ModelAndView getLoja() {
        System.out.println("Android Resquest.");

        Loja loja = new Loja("teste", "20", "30", "1");

        ModelAndView mav = new ModelAndView();
        mav.addObject("Loja", loja);
        return mav;
    } 
```

有了这一切，我在 Android 应用程序中遇到了以下异常：

```
03-21 22:13:06.197: E/AndroidRuntime(25342): java.lang.RuntimeException: An error occured while executing doInBackground()
03-21 22:13:06.197: E/AndroidRuntime(25342):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at java.lang.Thread.run(Thread.java:856)
03-21 22:13:06.197: E/AndroidRuntime(25342): Caused by: org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Unrecognized field "Loja" (Class com.example.androidspring.Loja), not marked as ignorable
03-21 22:13:06.197: E/AndroidRuntime(25342):  at [Source: org.apache.http.conn.EofSensorInputStream@422e3c58; line: 1, column: 10] (through reference chain: com.example.androidspring.Loja["Loja"]); nested exception is org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "Loja" (Class com.example.androidspring.Loja), not marked as ignorable
03-21 22:13:06.197: E/AndroidRuntime(25342):  at [Source: org.apache.http.conn.EofSensorInputStream@422e3c58; line: 1, column: 10] (through reference chain: com.example.androidspring.Loja["Loja"])
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:125)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:147)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:76)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:484)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:439)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:237)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at com.example.androidspring.MainActivity.getLoja(MainActivity.java:59)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at com.example.androidspring.MainActivity$DownloadFilesTask.doInBackground(MainActivity.java:72)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at com.example.androidspring.MainActivity$DownloadFilesTask.doInBackground(MainActivity.java:1)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-21 22:13:06.197: E/AndroidRuntime(25342):    ... 5 more
03-21 22:13:06.197: E/AndroidRuntime(25342): Caused by: org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "Loja" (Class com.example.androidspring.Loja), not marked as ignorable
03-21 22:13:06.197: E/AndroidRuntime(25342):  at [Source: org.apache.http.conn.EofSensorInputStream@422e3c58; line: 1, column: 10] (through reference chain: com.example.androidspring.Loja["Loja"])
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.codehaus.jackson.map.deser.StdDeserializationContext.unknownFieldException(StdDeserializationContext.java:267)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.codehaus.jackson.map.deser.std.StdDeserializer.reportUnknownProperty(StdDeserializer.java:649)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.codehaus.jackson.map.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:635)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.codehaus.jackson.map.deser.BeanDeserializer.handleUnknownProperty(BeanDeserializer.java:1355)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:717)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2723)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1914)
03-21 22:13:06.197: E/AndroidRuntime(25342):    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:122)
03-21 22:13:06.197: E/AndroidRuntime(25342):    ... 15 more 
```

根据我的理解，它不承认我的 Loja 课程。但它们完全一样！还能是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T05:25:11.550

该异常似乎表明，当 Jackson 映射器尝试`Loja`从返回的 json 创建一个时，它遇到了一个带有 Loja 键的 json 字段，它不知道如何处理（因为`Loja`java 对象中没有字段命名为“Loja”），所以它失败了。这似乎是合乎逻辑的，因为服务器似乎有效地返回了这个 json 结构：

```
{"Loja":{"nome":"teste","xValue":"20","yValue":"30","andar":"1"}} 
```

因此，您有两个主要选择。

1.  更改传递给`getForObject()`或的对象
2.  更改从服务器返回的 json。

对于第一个，您可以让您的客户`getForObject()`传递一个`Object`包含`Loja`.

像这个类的东西：

```
class MyObj {
    private Loja Loja;

    public void setLoja(Loja loja) {
        this.Loja = loja;
    }

    public Loja getLoja() {
        return this.Loja;
    }
} 
```

与此调用一起使用：

```
restTemplate.getForObject(url, MyObj.class); 
```

或者，您可以让您的服务器将`Loja`对象字段作为模型的一部分返回，或者更好的是，返回`Loja`您创建的对象的实例。Spring 足够聪明，可以利用 Jackson 将您的 POJO 转换为您期望的正确 json 模型。

```
@RequestMapping("/android/played")
public Loja getLoja() {
    System.out.println("Android Resquest.");

    return new Loja("teste", "20", "30", "1");
} 
```

这会产生这个json：

```
{"nome":"teste","xValue":"20","yValue":"30","andar":"1"} 
```

`getForObject()`您在客户端的方法可以按照当前的方式读取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:20:26.357

我发现我的代码有什么问题。Nicholas 是对的，我的 JSON 类似于：

```
{"Loja":{"nome":"teste","xValue":"20","yValue":"30","andar":"1"}} 
```

并且字段 Loja 在发送到 Android 应用程序时未被识别。

这就是我所做的：我创建了另一个名为 Lojas 的类，它只不过是一个 Loja 列表。

```
public class Lojas {

    private List<Loja> lojas;

    public Lojas() {
    }

    public List<Loja> getLojas() {
        return lojas;
    }

    public void setLojas(List<Loja> lojas) {
        this.lojas = lojas;
    }
} 
```

在我的 getLoja() 方法中，我返回了这个创建的全新方法：

```
public Lojas getLoja() {
        RestTemplate restTemplate = new RestTemplate();
        restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
        restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());

        String url = BASE_URL + "/android/played.json";
        return restTemplate.getForObject(url, Lojas.class);
    } 
```

这样，我可以立即请求 Loja 对象列表。但要做到这一点，我必须将服务器端更改为始终返回 Loja 对象列表：

```
@RequestMapping("/android/played")
    public ModelAndView getLoja() {
        System.out.println("Android Request.");

        List<Loja> list = new ArrayList<Loja>();
        list.add(new Loja("teste", "20", "30", "1"));
        list.add(new Loja("teste2", "20", "30", "1"));
        ModelAndView mav = new ModelAndView();
        mav.addObject("lojas", list);
        return mav;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-09T17:49:14.403

我解决了这个问题，`JSON Post`使用`RestTemplate`.

```
HTTP_HEADERS.setContentType(MediaType.APPLICATION_JSON);

final ObjectWriter ow = new ObjectMapper().writer().withDefaultPrettyPrinter();
final String body = ow.writeValueAsString(convertedFireCsvBeans);
final HttpEntity<String> entity = new HttpEntity<>(body, HTTP_HEADERS);   
final ParameterizedTypeReference<String> responseType = new ParameterizedTypeReference<String>(){};
final ResponseEntity<String> responseEntity = REST_TEMPLATE.exchange(url, HttpMethod.POST, entity, responseType);
if(responseEntity.getStatusCode() != null){
            System.out.println("HTTP STATUS CODE: " + responseEntity.getStatusCode() +
                       "\n"+ responseEntity.getStatusCode().getReasonPhrase());
                    httpStatus = responseEntity.getStatusCode();                    
                } 
```

最主要的是`HttpEntity`我必须设置为`String`.

我希望它可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-16T17:07:22.330

明确定义一个空的构造函数对我有帮助，否则我使用 restTemplate 的测试会失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-28T14:08:31.820

在父对象中不引入 args 构造函数将起作用。

# c# - 相当于 C# 中 SQL 的 LIKE 和 _ 通配符

> ID：15561163
> 
> 赞同：-2
> 
> 时间：2013-03-22T01:23:32.523
> 
> 标签：c#, sql, sql-function

我有一个需要转换为 C# 的 SQL 函数。SQL 函数使用 LIKE 关键字和通配符“_”。如何编写等效的 C# 函数？下面是 SQL 函数：

```
Create Function [dbo].[fnGetWarehouseByGrade222] 
( 
  @Grade nvarchar(2),
  @Paste nvarchar(500)
) 
Returns varchar(500) 

As 
Begin  
    declare @Return varchar(500)
    if @Grade = '00' or @Grade = '01' or @Grade = '02' or @Grade = '03' or @Grade = '04' 
    begin
    Select @Return = case when @Paste like 'D__G__DG' then '1GD'
                          when @Paste like 'D__G__DP' then '1GD'
                          when @Paste like 'D__G__D_' then '1GO'
                          when @Paste like 'N__G__D_' then '1GN'
                          when @Paste like 'D__G__H_' then '1GH'
                          when @Paste like 'N__G__H_' then '1GM'
                          when @Paste like 'G__G__H_' then '1GG' end                                                               
  RETURN @Return
  end
  RETURN null
End 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:31:01.660

我直接在评论框中写了这个（所以这个函数可能无法编译）但是你应该使用正则表达式。与此类似的东西应该可以工作：

```
string GetWarehousByGrade222(string grade, string paste)
{
  if (grade == "00" || grade == "01" || grade == "02" || grade == "03" || grade == "04") {
    if (Regex.IsMatch(paste, "D..G..DG")) return "1GD";
    if (Regex.IsMatch(paste, "D..G..DP")) return "1GD";
    if (Regex.IsMatch(paste, "D..G..D.")) return "1GO";
    // etc...
  }
  return null;
} 
```

# visual-studio-2012 - 构建过程的输出，后跟 Visual Studio 中的错误列表（如果适用）

> ID：15561164
> 
> 赞同：0
> 
> 时间：2013-03-22T01:23:53.853
> 
> 标签：visual-studio-2012

当我使用 Visual Studio 6 时，这是最热门的事情，我喜欢的一件事是我会按 F7，编译，然后观看构建的输出去购买，然后在完成时收到一个错误列表。我相信这在 Visual Studio 2005 中发生了变化，但我已经受够了，并且想要回到以前的方式。有没有办法告诉 VS2012 输出构建输出，然后在适用时显示错误列表？

抱歉，如果以前有人问过这个问题，我检查了一下，没有看到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:29:29.663

您可以在构建开始时设置工具 -> 选项 -> 项目和解决方案 -> 显示输出窗口

这似乎对我有用。

![在构建时显示输出](../Images/b4c6d0e2dea2ad01b9a15f0cc4417878.png)

# c# - 取 HTML Table 并放入自定义 List

> ID：15561166
> 
> 赞同：-1
> 
> 时间：2013-03-22T01:23:55.483
> 
> 标签：c#, html, html-table

我有一个 html 表，我需要查询、获取内容然后对其采取行动。这张桌子

```
 <table>
        <thead>
            <tr>
                <th>Version</th>
                <th>Usage</th>
            </tr>
        </thead>
        <tbody>

                <tr>
                    <td>1.0.1.1</td>
                    <td>86</td>
                </tr>

                <tr>
                    <td>1.0.0.1</td>
                    <td>65</td>
                </tr>

                <tr>
                    <td>1.0.1.0</td>
                    <td>28</td>
                </tr>

                <tr>
                    <td>1.0.0.0</td>
                    <td>1</td>
                </tr>

          </tbody>
    </table> 
```

我通过正则表达式传递 WebResponse 来得到它。

将其放入 C# 中的某些数据结构的最佳方法是什么，以便我可以查询版本和使用情况。基本上有一个类 Foo 的列表。

Foo() { 版本 {get; 设置;} 用法 {get; 放;} }

沿着这些思路。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:39:06.557

我发现用于解析 HTML 的最佳工具是[Html Agility Pack](http://htmlagilitypack.codeplex.com/)库。这是一个相当容易使用的库，并且可以很好地处理格式不正确的标记。您必须先从库中取出数据并放入您自己的结构中，但这会使获取数据变得容易。

# android - 更改文本框大小时的Android应用程序错误

> ID：15561167
> 
> 赞同：0
> 
> 时间：2013-03-22T01:23:58.900
> 
> 标签：android

申请时出现以下错误！！

```
03-22 03:09:54.720: D/dalvikvm(1622): GC_EXTERNAL_ALLOC freed 47K, 49% free 2770K/5379K, external 0K/0K, paused 119ms
03-22 03:09:54.830: W/dalvikvm(1622): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
03-22 03:09:54.830: E/AndroidRuntime(1622): FATAL EXCEPTION: main
03-22 03:09:54.830: E/AndroidRuntime(1622): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.idm/com.example.idm.MainActivity}: java.lang.ClassCastException: android.widget.GridView
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.os.Looper.loop(Looper.java:130)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.app.ActivityThread.main(ActivityThread.java:3691)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at java.lang.reflect.Method.invoke(Method.java:507)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at dalvik.system.NativeStart.main(Native Method)
03-22 03:09:54.830: E/AndroidRuntime(1622): Caused by: java.lang.ClassCastException: android.widget.GridView
03-22 03:09:54.830: E/AndroidRuntime(1622):     at com.example.idm.MainActivity.onCreate(MainActivity.java:25)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
03-22 03:09:54.830: E/AndroidRuntime(1622):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
03-22 03:09:54.830: E/AndroidRuntime(1622):     ... 11 more
03-22 03:09:56.870: I/dalvikvm(1622): threadid=4: reacting to signal 3
03-22 03:09:56.880: I/dalvikvm(1622): Wrote stack traces to '/data/anr/traces.txt'
03-22 03:13:08.740: I/dalvikvm(2078): threadid=4: reacting to signal 3
03-22 03:13:08.740: I/dalvikvm(2078): Wrote stack traces to '/data/anr/traces.txt'
03-22 03:13:20.050: D/dalvikvm(2154): GC_EXTERNAL_ALLOC freed 45K, 49% free 2770K/5379K, external 0K/0K, paused 32ms
03-22 03:13:20.110: W/dalvikvm(2154): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
03-22 03:13:20.110: E/AndroidRuntime(2154): FATAL EXCEPTION: main
03-22 03:13:20.110: E/AndroidRuntime(2154): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.idm/com.example.idm.MainActivity}: java.lang.ClassCastException: android.widget.GridView
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.os.Looper.loop(Looper.java:130)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.app.ActivityThread.main(ActivityThread.java:3691)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at java.lang.reflect.Method.invoke(Method.java:507)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at dalvik.system.NativeStart.main(Native Method)
03-22 03:13:20.110: E/AndroidRuntime(2154): Caused by: java.lang.ClassCastException: android.widget.GridView
03-22 03:13:20.110: E/AndroidRuntime(2154):     at com.example.idm.MainActivity.onCreate(MainActivity.java:25)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
03-22 03:13:20.110: E/AndroidRuntime(2154):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
03-22 03:13:20.110: E/AndroidRuntime(2154):     ... 11 more
03-22 03:13:25.470: I/dalvikvm(2154): threadid=4: reacting to signal 3
03-22 03:13:25.470: I/dalvikvm(2154): Wrote stack traces to '/data/anr/traces.txt'
03-22 03:13:27.190: I/Process(2154): Sending signal. PID: 2154 SIG: 9 
```

更新：

```
 setContentView(R.layout.activity_main);
 Button add = (Button) findViewById(R.id.button1);
 add.setOnClickListener(this);
 pause = (Button) findViewById(R.id.button2);
 pause.setOnClickListener(this);
 GridView g = (GridView) findViewById(R.id.gridView1); 
 g.setAdapter(new view(this)); 
 TextView text = (TextView) findViewById(R.id.textView2);
 text.setTextColor(Color.WHITE); 
```

# c++ - 未找到 Netinet 和 netdb，C++ 网络库

> ID：15561169
> 
> 赞同：1
> 
> 时间：2013-03-22T01:24:07.730
> 
> 标签：c++, winsock

我试图通过以下链接运行示例代码来学习如何在 c++ 上使用winsock： [http ://www.linuxhowtos.org/data/6/client.c](http://www.linuxhowtos.org/data/6/client.c) [http://www.linuxhowtos.org/data/6 /服务器.c](http://www.linuxhowtos.org/data/6/server.c)

和以下库：

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> 
```

不在默认的 mingw 库中，并且通过尝试 google 并没有取得多大成功，因为它最终需要其他库才能运行。

如果有人有完整库的链接或具有依赖项的链接，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:22:58.927

我删除了 netinet/in.h 和 netdb.h 库，添加并添加了链接：“-lwsock32”，现在一切正常。

# c++ - C++ 快速排序字母数组

> ID：15561170
> 
> 赞同：0
> 
> 时间：2013-03-22T01:24:16.777
> 
> 标签：c++, arrays, char, quicksort, alphabet

我正在尝试使用快速排序对字母数组进行排序。

我基本上已经尝试从主要算法出发并将其转换为与 char 数组一起使用。

我想我快到了，但我似乎无法得到它。

任何帮助深表感谢。

:)

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h> 

int qscounter = 0;

int split(char a[], char low, char high)
{
    char part_element = a[low];

    for (;;) {
        while (low < high && part_element <= a[high])
            high--;
        if (low >= high) break;
        a[low++] = a[high]; 
        while (low < high && a[low] <= part_element)
            low++;
        if (low >= high) break;
        a[high--] = a[low];
    }
    a[high] = part_element;
    return high;
}

void quick_sort(char a[], char low, char high)
{
    char middle;

    if (low >= high) return;
    middle = split(a, low, high);
    qscounter++;
    quick_sort(a, low, middle - 1);
    quick_sort(a, middle + 1, high);

    printf("Quick Sort: %d\n", qscounter);
    for(int i=0;i<26;i++)
        printf("%c",a[i]);
    printf("\n\n");
}

void main()
{
    char unsorted_alphabet[26] = {'A','E','O','D','B','Q','G','V','Y','J','Z','S','M','N','C','P','F','R','L','T','U','H','W','X','I','K'};
    quick_sort(unsorted_alphabet,unsorted_alphabet[0],unsorted_alphabet[25]);
    fflush(stdin);
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:36:15.727

您的代码存在以下问题： 您尝试使用元素值作为数组索引，这肯定是错误的。您将 a[0] 和 a[25] 作为索引传递给 quick_sort 函数，但是，low 和 high 应该是整数类型，而不是 char。您不能使用 char 值作为索引，因为数组值最初是无序的，而数组索引则不是。

正确的代码应该如下：

```
int split(char a[], int low, int high) //should be integer type for low and high
{
  char part_element = a[low]; 
  //if low is a char, what is a[char]? It will not be the value you intended to want

  //do same thing in your code
}

void quick_sort(char a[], int low, int high)
{
  int middle; //not char

  //do same thing as in your code 
```

}

在 main() 中，函数调用应该是：

```
 quick_sort(unsorted_alphabet,0,25); //should pass array indices 
```

经过这些细微的更改后，它实际上工作正常：我得到了：

```
Quick Sort: 20
ABCDEFGHIJKLMNOPQRSTUVWXYZ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:30:20.297

“low”和“high”参数是数组的索引。您可以尝试这样调用：

```
quick_sort(unsorted_alphabet,0,25); 
```

# python - 防止多次执行

> ID：15561173
> 
> 赞同：1
> 
> 时间：2013-03-22T01:25:13.093
> 
> 标签：python, django, locking, cron-task

我有这个 Django cron 作业脚本（我为此使用了 kronos，这很棒）。

由于我每分钟都会触发此作业，因此我想确保没有另一个脚本实例已经在运行。如果有以前的作业正在运行，那么我想跳过当前的执行。

我知道我可以使用锁定文件来做到这一点，但这不是很可靠，并且当您在执行过程中重新启动时可能会导致问题（您必须清除锁定文件）等。

使用 Python（在本例中为 Django）执行此操作的最佳方法是什么？

**编辑：**我的目标是 Linux，很抱歉忽略了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:22:12.117

这里有一个 Django 应用程序：[https ://github.com/jsocol/django-cronjobs](https://github.com/jsocol/django-cronjobs)

也可以在 pip 上作为`cronjobs`.

以防万一你直接去点子；您使用装饰器注册作业，如下所示：

```
# myapp/cron.py
import cronjobs

@cronjobs.register
def periodic_task():
    pass 
```

然后通过以下方式运行命令：

```
$ ./manage.py cron periodic_task 
```

默认情况下它具有作业锁定，但您可以在应用装饰器时禁用它：

```
@register(lock=False) 
```

# algorithm - 如何通过布尔数组找到路径？

> ID：15561174
> 
> 赞同：1
> 
> 时间：2013-03-22T01:25:24.607
> 
> 标签：algorithm

这是我在面试论坛上遇到的一个问题：

> 你有一个用 0 和 1 填充的数组。0 代表燃烧的熔岩，1 代表踏脚石。您从数组的开头开始，并且想要找到到达结尾的最快方法。在每个时间步，您可以将速度 V 增加或减少 1，或者您可以跳到 V 步外的垫脚石。您希望在没有超调的情况下到达数组的末尾。

什么是解决这个问题的好算法？

我尝试了一些东西（主要使用动态编程和递归），但我无法找出会导致非指数算法的最佳子结构。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:33:36.820

在每一步你有两个选择：增加速度，或者不增加速度。然后，对于这些选项中的每一个，您最终都会进入不同的步骤并重复选择。也许你可以看到这里出现的树状图案。树中的每个节点都是一个步骤，每个边都是一个选择。每个节点（步骤）都有两条边（选择），所以它是一棵二叉树。

另请注意，如果您以速度*V处于第**x*步，那么无论您如何到达那里，接下来的结果都是相同的。所以在这里你可以优化一下。（例如，使用动态规划。）

 *蛮力方法就是想象这棵树并进行深度优先搜索，直到您准确地到达最后一步。可能有多种解决方案，最快的一个是*解决*方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:50:44.913

动态编程是这里的正确方法。

您的搜索空间是二维的：当前位置是您的第一维，当前速度是第二维。这意味着您需要一个二维数组`best[N][N]`，其中`N`是布尔数组中的项目数。的值表示以 的速度`best[s,v]`到达 的位置所需的最小步数。检查搜索空间的每个点以检查是否可以以当前速度到达垫脚石。如果答案是“是”，则在搜索空间中设置相应的位置。还要设置相邻速度的点。答案将在位置。`s``v``best[N-1][0]`*

# c++ - 无法使用 QT 执行 mysql 查询

> ID：15561175
> 
> 赞同：0
> 
> 时间：2013-03-22T01:25:26.207
> 
> 标签：c++, mysql, database, qt, qsqlquery

我正在尝试使用 QT 框架连接并执行查询，我可以连接到 mysql 数据库，并且我已经测试了查询并验证它在数据库上工作。我认为 mysql 驱动程序已正确安装，因为我可以连接并且它不会引发任何错误

```
void Login::on_loginButton_clicked()
{
    QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL");
    db.setHostName("127.0.0.1"); 
    db.setDatabaseName("TestBase");
    db.setUserName("username");
    db.setPassword("password");
    if (!db.open()) {
    QMessageBox::critical(0,"Database Error","Could not connect to the database, check your internet connection.");
    }

QSqlQuery data("SELECT * FROM `TestBase`.`Users` WHERE `userName` = 'Afonso'");
//data.exec("SELECT * FROM `TestBase`.`Users` WHERE `userName` = 'Afonso'");
QMessageBox::information(NULL, "Query executed", "The query returned: " + data.exec());
} 
```

我也试过

```
data.exec("insert query here");
data.next(); 
```

似乎没有任何效果

我正在尝试在 QMessageBox 中显示查询结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:17:35.660

```
QSqlQuery query(db);
query.prepare("SELECT * FROM `TestBase`.`Users` WHERE `userName` = :user_name");
query.bindValue(":user_name", "Afonso");
if (!query.exec())
{
    qDebug() << query.lastError().text();
    retrun;
}
while (query.next())
{
    QVariant v = query.value(0);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-06T17:16:01.857

我使用 pyqt，但通常使用选择查询，我开始在 pyqt 中使用 .first() 而不是 .exec() .exec_() 获取数据。之后 next() 工作得很好。

# asp.net - 回发后动态控件消失

> ID：15561183
> 
> 赞同：3
> 
> 时间：2013-03-22T01:27:10.647
> 
> 标签：asp.net, dynamic, user-controls, postback, pageload

我有很多要动态创建的控件。运行代码的最佳位置在哪里？

我一直在 Page_Load 运行 CreateControls 函数（以创建所有控件）。

现在的问题是，当我取消选中/取消选中一个特定的动态复选框控件（autopostback = true）时，该复选框始终设置为“true”，因为 CreateControls 函数在回发时再次在 Page_Load 处运行。

如果我将 CreateControls 函数放在 Page_Load 的 (!IsPostBack) 中，当我单击动态复选框控件时，所有控件都会消失。

我已经看了好几天了，任何想法都值得赞赏！

**编辑**： CreateControls 函数将所有控件绑定到面板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:05:01.990

尝试在方法中调用您的 CreateControls 方法，`Page_Init`而不是`Page_Load`......在`Init`表单值绑定到控件之前触发事件，因此您的默认值将被正确的数据覆盖。

# jquery - 通过 jQuery 附加表单元素在 firefox 中不起作用

> ID：15561184
> 
> 赞同：1
> 
> 时间：2013-03-22T01:27:13.483
> 
> 标签：jquery, forms, element

我正在使用 jQuery 创建元素表单和输入。它在 Chrome 中运行良好，但在 Firefox 中却不行。

```
(function( $ ) {
    $.fn.criarPost = function(url,campos) {

        var form;
        form = $("<form>").attr({ "action": url, "enctype": "application/x-www-form-urlencoded", "method": "POST", "id":"postlink"});
        campos = campos.split("&");
        $.map(campos, function (key,item) {
            campo = key.split("=");
            $("<input>").attr({ name: campo[0], value: decodeURIComponent(campo[1]) }).appendTo(form);
        });
        $(form).submit();

    };
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:01:45.383

可能是 Firefox 不会提交不属于 DOM 的表单。您可以尝试将其附加到文档中，然后提交，如下所示：

```
(function($) {
    $.fn.criarPost = function(url, queryString) {

        var form = $('<form id="postlink" enctype="application/x-www-form-urlencoded" method="POST" style="display: none;">').attr({ 'action': url });

        var params = queryString.split("&");

        $.each(params, function (i, param) {
            var nameValue = param.split('=');
            $("<input>").attr({ name: nameValue[0], value: decodeURIComponent(nameValue[1]) }).appendTo(form);
        });

        $(document.body).append(form);

        form.submit();
    };
})(jQuery); 
```

# python - 使用嵌套枚举包装结构 - 向量模板中的引用

> ID：15561185
> 
> 赞同：11
> 
> 时间：2013-03-22T01:27:28.973
> 
> 标签：python, c++, enums, nested, cython

*这是[我在一天半前在 cython-user 组中提出的一个问题的交叉帖子](https://groups.google.com/d/msg/cython-users/71CMYN03kVc/ccwH1MsGH7AJ)，但尚未得到任何答复，所以我在更一般的论坛上碰碰运气*

我一直在尝试各种方式来包装以下代码，但存在不同程度的错误。大量的搜索让我偶然发现了类似的问题以及一张出色的愿望单，但老实说，我不确定我是否走在正确的道路上。

**plow_types.h：**

```
namespace Plow {

    struct JobState {
      enum type {
        INITIALIZE = 0,
        RUNNING = 1,
        FINISHED = 2
      };
    };
    ...
    class JobFilterT {
     public:
      ...
      std::vector<JobState::type>  states;
      ... 
```

所以我试图包装这个`Plow::JobState::type`枚举。在找到另一个类似的帖子后，我得到的最接近的结果是这个尝试：

**plow_types.pxd：**

```
cdef extern from "rpc/plow_types.h" namespace "Plow":

    enum JobState_type "Plow::JobState::type":
        INITIALIZE "Plow::JobState::INITIALIZE"
        RUNNING "Plow::JobState::RUNNING"
        FINISHED "Plow::JobState::FINISHED"

    struct JobState:
        JobState_type type
    ...
    cdef cppclass JobFilterT:
        vector[JobState_type] states 
```

我得到一个错误：

```
src/plow.cpp: In function ‘std::vector<Plow::JobState::type, std::allocator<Plow::JobState::type> > __pyx_convert_vector_from_py_enum__Plow_3a__3a_JobState_3a__3a_type(PyObject*)’:
src/plow.cpp:6688: error: invalid conversion from ‘long int’ to ‘Plow::JobState::type’ 
```

### 两者任一：

1.  如何正确包装这个嵌套枚举？
2.  这甚至有必要尝试完全包装它，还是我可以通过其他方式实现访问这些“命名空间”常量的目标？我是否应该完全忽略这些结构，并在我的 pyx 中定义我自己的常量版本，并使用匹配的 int 值？

我试图在我的 cython pyx 中简单地定义我自己的常量版本并将所有内容都视为 int( `vector[int] states`) 但编译器抱怨不知道如何进行从`int long`to的转换`Plow::JobState::type`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T09:12:48.393

在尝试了令人难以置信的组合之后，我终于想通了。在问这个问题之前，离我最后一次尝试不远了……

**plow_types.pxd：**

我需要忘记那个`JobState`结构，只包装枚举。但我还需要将它们映射到 cython 中的新名称，以避免使用类似的命名空间技术与其他枚举发生名称冲突。

```
cdef extern from "rpc/plow_types.h" namespace "Plow":

    ctypedef enum JobState_type "Plow::JobState::type":
        JOBSTATE_INITIALIZE "Plow::JobState::INITIALIZE"
        JOBSTATE_RUNNING "Plow::JobState::RUNNING"
        JOBSTATE_FINISHED "Plow::JobState::FINISHED" 
```

`JobState_type`现在我可以参考`vector[JobState_type]`. 然后我使用这种方法以只读方式使我的常量在 python 中可用：

**工作.pyx：**

```
cimport cython

@cython.internal
cdef class _JobState:
    cdef:
        readonly int INITIALIZE 
        readonly int RUNNING 
        readonly int FINISHED 

    def __cinit__(self):
        self.INITIALIZE = JOBSTATE_INITIALIZE
        self.RUNNING = JOBSTATE_RUNNING
        self.FINISHED = JOBSTATE_FINISHED

JobState = _JobState() 
```

`JobState`这给了我一个具有只读常量属性的公共实例。

当需要从 python 值列表转换回 a 时`vector[JobState_type]`，我会这样做：

```
someList = [JobState.RUNNING]
...
cdef:
    JobState_type i
    vector[JobState_type] vec_states

for i in someList:
    vec_states.push_back(i) 
```

# unix - 文件在Unix中定义在哪里

> ID：15561187
> 
> 赞同：5
> 
> 时间：2013-03-22T01:27:37.353
> 
> 标签：unix

我知道 FILE 是一个 typedef-ed 结构，但是我在哪里可以使用手册页查找 struct FILE 的实际定义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T01:39:23.240

如果你从 开始`/usr/include/stdio.h`，你会发现这一行：

```
typedef struct _IO_FILE FILE; 
```

只是 grepping for `__IO_FILE`in`/usr/include`表明该结构是在`/usr/include/libio.h`

My`/usr/include/libio.h`显示以下定义`__IO_FILE`：

```
struct _IO_FILE {
  int _flags;       /* High-order word is _IO_MAGIC; rest is flags. */
#define _IO_file_flags _flags

  /* The following pointers correspond to the C++ streambuf protocol. */
  /* Note:  Tk uses the _IO_read_ptr and _IO_read_end fields directly. */
  char* _IO_read_ptr;   /* Current read pointer */
  char* _IO_read_end;   /* End of get area. */
  char* _IO_read_base;  /* Start of putback+get area. */
  char* _IO_write_base; /* Start of put area. */
  char* _IO_write_ptr;  /* Current put pointer. */
  char* _IO_write_end;  /* End of put area. */
  char* _IO_buf_base;   /* Start of reserve area. */
  char* _IO_buf_end;    /* End of reserve area. */
  /* The following fields are used to support backing up and undo. */
  char *_IO_save_base; /* Pointer to start of non-current get area. */
  char *_IO_backup_base;  /* Pointer to first valid character of backup area */
  char *_IO_save_end; /* Pointer to end of non-current get area. */

  struct _IO_marker *_markers;

  struct _IO_FILE *_chain;

  int _fileno;
#if 0
  int _blksize;
#else
  int _flags2;
#endif
  _IO_off_t _old_offset; /* This used to be _offset but it's too small.  */

#define __HAVE_COLUMN /* temporary */
  /* 1+column number of pbase(); 0 is unknown. */
  unsigned short _cur_column;
  signed char _vtable_offset;
  char _shortbuf[1];

  /*  char* _save_gptr;  char* _save_egptr; */

  _IO_lock_t *_lock;
#ifdef _IO_USE_OLD_IO_FILE
};

struct _IO_FILE_complete
{
  struct _IO_FILE _file;
#endif
#if defined _G_IO_IO_FILE_VERSION && _G_IO_IO_FILE_VERSION == 0x20001
  _IO_off64_t _offset;
# if defined _LIBC || defined _GLIBCPP_USE_WCHAR_T
  /* Wide character stream stuff.  */
  struct _IO_codecvt *_codecvt;
  struct _IO_wide_data *_wide_data;
  struct _IO_FILE *_freeres_list;
  void *_freeres_buf;
  size_t _freeres_size;
# else
  void *__pad1;
  void *__pad2;
  void *__pad3;
  void *__pad4;
  size_t __pad5;
# endif
  int _mode;
  /* Make sure we don't get into trouble again.  */
  char _unused2[15 * sizeof (int) - 4 * sizeof (void *) - sizeof (size_t)];
#endif
}; 
```

# python - 为 PythonTurtle 保存脚本

> ID：15561189
> 
> 赞同：0
> 
> 时间：2013-03-22T01:27:48.533
> 
> 标签：python, import, turtle-graphics

我下载了 PythonTurtle 开始教我儿子如何编程。我希望能够为它创建函数并将它们保存在一个单独的文件中（以及他的保存他的工作）。但是，该文件不包含访问命令以绘制海龟的适当范围。有没有一种方法可以运行我的文件，就好像我刚刚将它输入到 GUI 中一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:30:43.153

哈哈。我在发布此内容后 10 秒发现了它，但在搜索 20 分钟后发布了它！

```
execfile("myfuncs.py") 
```

# websocket - 通过 WebSocket 连接从服务器向客户端发送不相关数据的最佳实践

> ID：15561192
> 
> 赞同：2
> 
> 时间：2013-03-22T01:28:19.680
> 
> 标签：websocket

我目前正在开发一个单页 Web 应用程序，该应用程序具有越来越多的实时小部件，同时需要不同的数据源。我的问题是哪种方法最适合使用 WebSockets 作为此数据的载体：

**方案一：**客户端打开与服务器的**单套接字连接**，然后使用类似于以下的 API 订阅/取消订阅/获取/发布数据：

```
var socket = new WebSocket([URL]);
socket.emit("subscribe", [OPTIONS]);
socket.emit("unsubscribe", [OPTIONS]);
socket.emit("get", [OPTIONS]);
socket.emit("post", [OPTIONS]) 
```

**选项 2：客户端****为运行页面上的小部件所需**的每个数据源打开一个套接字。请记住，可能有许多小部件需要许多不同的数据源。例如，它看起来像这样：

```
var sock1 = new WebSocket([URL]);
var widget1 = new Widget1(sock1);
var sock2 = new WebSocket([URL]);
var widget2 = new Widget2(sock2);
var sock3 = new WebSocket([URL]);
var widget3 = new Widget3(sock3); 
```

任何见解将不胜感激。

安迪

# actionscript-3 - FlashDevelop 运行时开销

> ID：15561194
> 
> 赞同：-1
> 
> 时间：2013-03-22T01:28:42.700
> 
> 标签：actionscript-3, flash, flashdevelop

今天我遇到了一个似乎与我的代码无关的大头痛。

当我测试我的游戏并将帧速率设置为 60 时，即使我的游戏处于空闲状态，fps 仍然保持在 30。我在同事的 FlashDevelops 中查看游戏，它们在 fps 60 时都运行良好。然后我使用 adobe scout 测试游戏并发现我的 FlashDevelop 似乎一直在做很多预期的运行时开销，但是一旦它不在 FlashDevelop 下运行，它在 Scout 中又回到 fps 60。如果游戏在不依赖 FlashDevelop 的情况下运行，它可以在 fps 60 下完美运行，仅在我在 FlashDevelop 中测试游戏时发生。

什么会导致这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:39:34.693

是的，也发生在我身上。我不知道是什么原因造成的，但对我来说，当我作为调试版本运行时会发生这种情况。当我作为发行版运行时，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T01:06:11.030

为了避免Adob​​e Scout 使用 Flash Develop IDE 的**其他开销或运行时开销，请为***Advanced Telemetry*和*Advanced Telemetry Password*设置编译标志。

`-advanced-telemetry=true -advanced-telemetry-password=123456`.

然后在 Adob​​e Scout 上，点击**Edit > Preferences... > General tab > Password to unlock protected SWFs** -> put 123456 然后点击 OK

调试愉快！

# hive - 横向视图在蜂巢中爆炸

> ID：15561196
> 
> 赞同：2
> 
> 时间：2013-03-22T01:28:59.577
> 
> 标签：hive, hiveql

我有一个名为 exampleTable 的两列字符串数组的表。

```
Array<string> col1  Array<string> col2
["a", "b" , "c" ]       ["x","y","z"]
["aa", "bb" , "cc" ]       ["xx","yy","zz"] 
```

我的目标是制作一张这样的表格

```
col1                   col2
"a"                     "x"
"b"                     "y"
"c"                     "z"
"aa"                     "xx"
"bb"                     "yy"
"cc"                     "zz" 
```

我想过像这样使用 LATERL VIEW：

```
SELECT myCol1, myCol2  FROM exampleTable
         LATERAL VIEW explode(col1) myTable1 AS myCol1
         LATERAL VIEW explode(col2) myTable2 AS myCol2; 
```

但这会产生这个

```
col1                   col2
"a"                     "x"
"a"                     "y"
"a"                     "z"
"a"                     "xx"
"a"                     "yy"
"a"                     "zz"
"b"                     "x"
"b"                     "y"
"b"                     "z"
"b"                     "xx"
"b"                     "yy"
"b"                     "zz"
"c"                     "x"
"c"                     "y"
"c"                     "z"
"c"                     "xx"
"c"                     "yy"
"c"                     "zz"
"aa"                     "x"
"aa"                     "y"
"aa"                     "z"
"aa"                     "xx"
"aa"                     "yy"
"aa"                     "zz"
"bb"                     "x"
"bb"                     "y"
"bb"                     "z"
"bb"                     "xx"
"bb"                     "yy"
"bb"                     "zz"
"cc"                     "x"
"cc"                     "y"
"cc"                     "z"
"cc"                     "xx"
"cc"                     "yy"
"cc"                     "zz" 
```

我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:27:50.563

您可以使用explode UDTF 或explode2 UDTF 作为基础来编写UDTF。

[请参阅此处](http://hive.apache.org/javadocs/r0.13.1/api/contrib/org/apache/hadoop/hive/contrib/udtf/example/GenericUDTFExplode2.html)了解如何使用 explode2 底座。

# google-maps-api-3 - Google PageSpeed 建议我指定一个缓存验证器，但我不知道如何

> ID：15561201
> 
> 赞同：5
> 
> 时间：2013-03-22T01:29:35.890
> 
> 标签：google-maps-api-3, pdo

我在此页面上运行了 Google 的 PageSpeed 工具： [http ://classifieds.your-adrenaline-fix.com/detail.php?fatherID=10&ListingID=7&TypeID=42](http://classifieds.your-adrenaline-fix.com/detail.php?fatherID=10&ListingID=7&TypeID=42)

结果表明我应该指定一个缓存验证器——一个 Last-Modified 或 ETag 标头。

我已彻底阅读： [https ://developers.google.com/speed/docs/best-practices/caching#LeverageProxyCaching](https://developers.google.com/speed/docs/best-practices/caching#LeverageProxyCaching)

但我不知道该怎么办。

我确实知道我遇到的问题（通过谷歌的 PageSpeed 工具出现）源于以下显示谷歌地图的代码，但这段代码是这里有人帮助我的代码。（即使我还没有学到任何关于 PDO 的知识并且并不真正理解代码）

我希望有人可以查看下面提供的代码，让我知道所有看起来都是正确的，并与我分享如何指定缓存验证器以根据 Google 的 Page Speed 建议改进页面。

任何帮助都将不胜感激，我提前感谢大家。

斯图尔特 K

编辑：此外，我在 .htaccess 中有以下代码：（以下是地图代码）

```
<IfModule mod_expires.c>
# Enable expirations
ExpiresActive On 
# Default directive
ExpiresDefault "access plus 1 year"
# Favicon
ExpiresByType image/x-icon "access plus 1 year"
# Images
ExpiresByType image/gif "access plus 1 year"
ExpiresByType image/png "access plus 1 year"
ExpiresByType image/jpg "access plus 1 year"
ExpiresByType image/jpeg "access plus 1 year"
# CSS
ExpiresByType text/css "access 1 month"
# Javascript
ExpiresByType application/javascript "access plus 1 year"
</IfModule>

$TypeID = isset($_GET['TypeID']) ? $_GET['TypeID'] : ''; 
            $ListingID = isset($_GET['ListingID']) ? $_GET['ListingID'] : ''; 
            $allowed_tables = array('tt_42', 'tt_43');//Array of allowed tables to sanatise query
            //Define table name
            $table ="tt_".$TypeID;
            //Connect to database
            $dbh = new PDO("mysql:host=$host;dbname=$db", $username, $password);
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            try {
                //Check if table name is in allowed list
                if (in_array($table, $allowed_tables)) {
                    //Prepare query
                $query = "SELECT *  FROM `$table` WHERE `ID` = ? AND `ExpireDate` > NOW()";
                }//end if
                // Prepare statement
                $stmt = $dbh->prepare($query);
                // Assign parameter
                $stmt->bindParam(1,$ListingID);
                //Execute query
                $stmt->setFetchMode(PDO::FETCH_ASSOC);
                $stmt->execute();

                //New code
                $Address = $listing['Address'];
                $City = $listing['City'];
                $State = $listing['State/Province'];
                $Zip = $listing['Zip/Postal'];
                $Country = $listing['Country'];
                //End new code

                echo '<h2>Map of Surrounding Area With Navigational Aides</h2>';
                echo '<div class="CalloutBoxBlue">Hover over map and scroll, or use + and - in LH corner of map to zoom or expand viewing area. Alternatively, hold down mouse to manually move the map to a different geographical location, or drag the person icon to a specific location on the map for a street view.</div>';
                echo '<div id="GoogleMap">'; 
                //New code
                echo '<iframe scrolling="no" style="width:480px; height:300px; border:0px;" frameborder="0" src="googlemap.php?Address='.$Address.'&amp;City='.$City.'&amp;State='.$State.'&amp;Zip='.$Zip.'&amp;Country='.$Country.'"></iframe>'; 
                //End new code
                echo '</div>'; 
            }//End try

            catch(PDOException $e) {
                echo "I'm sorry I'm afraid you can't do that.". $e->getMessage() ;// Remove or modify after testing 
                file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]').", mapSelect.php, ". $e->getMessage()."\r\n", FILE_APPEND);  
             }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-30T07:36:17.493

您可以使用标头指定缓存验证器`Cache-Control`。确保在回显或打印任何内容之前设置它。

```
header('Cache-Control: <amount of seconds e.g. 3600 or 86400, "no-cache" for none>'); 
```

我还对您的 PDO 代码进行了一些更改。我移动了 if 语句来检查表是否被允许，并添加了一些代码来实际检索选定的数据。

```
header('Cache-Control: 900');   // 15 minutes

$TypeID = isset($_GET['TypeID']) ? $_GET['TypeID'] : ''; 
$ListingID = isset($_GET['ListingID']) ? $_GET['ListingID'] : ''; 
$allowed_tables = array('tt_42', 'tt_43');//Array of allowed tables to sanitise query
// Define table name
$table = "tt_" . $TypeID;
if (in_array($table, $allowed_tables)) {
    try {
        // Connect to database
        $dbh = new PDO("mysql:host=$host;dbname=$db", $username, $password);
        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        // Prepare query
        $query = "SELECT * FROM $table WHERE ID=? AND ExpireDate>NOW()";
        // Prepare statement
        $stmt = $dbh->prepare($query);
        // Assign parameter
        $stmt->bindParam(1, $ListingID);
        // Execute query
        $stmt->execute();

        // Fetch all results
        $data = $stmt->fetchAll(PDO::FETCH_ASSOC);

        if (!empty($data)) {
            $listing = reset($data);

            // New code
            $Address = $listing['Address'];
            $City = $listing['City'];
            $State = $listing['State/Province'];
            $Zip = $listing['Zip/Postal'];
            $Country = $listing['Country'];
            // End new code

            echo '<h2>Map of Surrounding Area With Navigational Aides</h2>';
            echo '<div class="CalloutBoxBlue">Hover over map and scroll, or use + and - in LH corner of map to zoom or expand viewing area. Alternatively, hold down mouse to manually move the map to a different geographical location, or drag the person icon to a specific location on the map for a street view.</div>';
            echo '<div id="GoogleMap">'; 
            // New code
            echo '<iframe scrolling="no" style="width: 480px; height: 300px; border: 0px;" frameborder="0" src="googlemap.php?Address=' . $Address . '&amp;City=' . $City . '&amp;State=' . $State . '&amp;Zip=' . $Zip . '&amp;Country=' . $Country . '"></iframe>'; 
            // End new code
            echo '</div>';
        } else {
            // Show "no addresses found" message
        }
    } catch(PDOException $e) {
        echo "I'm sorry I'm afraid you can't do that." . $e->getMessage();  // Remove or modify after testing 
        file_put_contents('PDOErrors.txt', date('[Y-m-d H:i:s]') . ", mapSelect.php, " . $e->getMessage(). "\r\n", FILE_APPEND);  
    }
} 
```

# wordpress - 将自定义帖子元输出到特定模板页面

> ID：15561202
> 
> 赞同：0
> 
> 时间：2013-03-22T01:29:39.843
> 
> 标签：wordpress, post

我不明白为什么很难找到答案……但我真的希望，因为这是阻止我发布主题的原因之一……

要输出或使用 metabox 选项，您将使用这样的代码

```
 <?php echo get_post_meta($post->ID, 'MoonRock_page_background_image', true); ?> 
```

这是使用wordpresses get_post_meta。

我遇到了问题，因为我试图让用户在自定义帖子类型中上传徽标，并且该选项不是在该页面/帖子上输出，而是输出到模板文件，特别是我制作的主模板文件。

有一个带有 6 个徽标点的无序列表的横幅，我正在尝试显示用户在客户帖子类型中上传的图像。

这是带有各种 PHP 的 UL 代码

```
 <!-- Press Banner -->

<div id="press-banner">
  <div class="span11 center nofloat clearfix">
    <h2>some of our clients</h2>
    <ul>
      <li><a class="press-banner-logo-fastco" src="#" href="#" target="_blank"><img src=" <?php echo $text; ?>"/></a></li>
      <li><a class="press-banner-logo-time" href="#" target="_blank"><img src="<?php echo get_post_meta($post->ID, '_moon_logo_image', true); ?>"/></a></li>
      <li><a class="press-banner-logo-forbes" href="#" target="_blank"><img src="<?php moon_opts_show('press-banner-three',TEMPLATE_URI .'/images/logo.png'); ?>"/></a></li>
      <li><a class="press-banner-logo-techcrunch" href="#" target="_blank"><img src="<?php moon_opts_show('press-banner-four',TEMPLATE_URI .'/images/logo.png'); ?>"/></a></li>
      <li><a class="press-banner-logo-pandodaily" href="#" target="_blank"><img src="<?php moon_opts_show('press-banner-five',TEMPLATE_URI .'/images/logo.png'); ?>"/></a></li>
      <li><a class="press-banner-logo-betabeat" href="#" target="_blank"><img src="<?php moon_opts_show('press-banner-six',TEMPLATE_URI .'/images/logo.png'); ?>"/></a></li>
    </ul>
  </div>
</div> 
<!-- End Press Banner --> 
```

这段代码确实有效，但它适用于我正在使用的 nhp 选项框架......我注意到的唯一显着差异是使用自定义函数而不是 get_post_meta。

这是该功能的代码...

```
 /**
 * This is used to echo and option value from the options array
 */
function moon_opts_show($opt_name, $default = null){
    global $moon_Options;
    $option = $moon_Options->get( $opt_name, $default );
    if( ! is_array( $option ) ){
        echo $option;
    }   
} 
```

我不明白，我有点明白，但我仍然不知道如何在我的元框代码中使用它，我不知道要获取哪些变量和东西..

因此，如果这是将图像输出到我的主页模板的解决方案，或者我可能需要使用 WP_Query 我有一些选择，但这让我很难过。所以我要求一点帮助..拜托哦，请我乞求嘿嘿...

编辑：我要将原始问题添加到简单的术语中......

图片帖子元将输出到特定帖子上，我有一个客户端帖子类型和一个名为 single-clients.php 的文件，当我创建一个新帖子时，所有元数据都会更改该特定页面上的内容......显然，如果我有一个名为 WILL SMITH 的客户帖子，特色图片将仅适用于 WILL SMITH，这适用于元信息，例如文本和图像。

我想学习/实现的是将WILL SMITH的图像元输出到主页上，我已经看到我需要唯一的IDS等等，男孩我很困惑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:07:30.627

好的，我找到了解决方案，我猜这很简单。

通过将它放在 WP_Query 或循环中，我猜你会调用它，元数据输出到我的主页模板

```
<?php $loop = new WP_Query( array( 'post_type' => 'clients', 'posts_per_page' => 6 ) );
        while ( $loop->have_posts() ) : $loop->the_post();
           the_post_thumbnail(); 

           echo get_post_meta($post->ID, '_moon_logo_image', true); 

        endwhile; 
```

?>

最后，我可以从我的客户帖子或投资组合帖子中添加任何我想要的东西..等等..

# c# - 为什么我不能运行 WpfBrowserApplication？

> ID：15561203
> 
> 赞同：0
> 
> 时间：2013-03-22T01:29:40.390
> 
> 标签：c#

我做了一个应该显示小消息框的小程序。

```
using System;
using System.Collections.Generic;
using System.Linq;    
using System.Text;    
using System.Windows;    
using System.Windows.Controls;    
using System.Windows.Data;    
using System.Windows.Documents;    
using System.Windows.Input;    
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;   
using System.Windows.Shapes; 

namespace WpfBrowserApplication1   
{  
    /// <summary>    
    /// Interaction logic for Page1.xaml   
    /// </summary>    
    public partial class Page1 : Page    
    {   
        public Page1()    
        {    
            InitializeComponent();    
        }

        private void button1_Click(object sender, RoutedEventArgs e)    
        {

            MessageBox.Show("gs");    
        }   
    }    
} 
```

结果：

![在此处输入图像描述](../Images/a04cfa37aa9e41d31141105dae78513d.png)

为什么？我怎样才能得到一个带有简单按钮的小网页，当你点击他时会显示messgebox？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T01:33:39.043

因为您使用的是 Opera。

WPF 浏览器应用程序仅在 IE 中受支持。

其他浏览器有一个 WPF 插件，但我知道它维护不足。

你为什么要开发 WPFBA 呢？这是死胡同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:10:47.873

WPF Browser Applications are only supported in IE sorry

# android - 如何在 node.js 中计算数据包？

> ID：15561217
> 
> 赞同：2
> 
> 时间：2013-03-22T01:31:34.750
> 
> 标签：android, node.js

我必须在 node.js 中做一个 web 服务（带有 express 的服务器 web）。此服务用于 Android 应用程序。我的问题是如何计算 Android 应用程序发送到 Web 服务的数据包（IP 数据报）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T20:37:57.393

您可以尝试计算`data`http 服务器代码中的事件。Express 可能正在使用一些正文解析器中间件为您处理此问题，但您可以使用自定义编写的计算数据事件的中间件。这不是一个确切的数字，因为当它们是网络上的单个数据包时，节点可能会将标头和正文分成两个事件。此外，您只能从服务器获取视图，但您已经说过没关系。

更多控制的另一个选项是使用[https://github.com/mranney/node_pcap](https://github.com/mranney/node_pcap)上的 node-pcap 绑定。它们允许对网络接口进行低级别的wireshark 式监控。您只需在 JavaScript 代码中过滤和处理这些数据。执行实际捕获的过程可能需要以 root 身份运行，除非您将系统设置为不需要它。

# c# - 正则表达式验证数字和正斜杠的日期

> ID：15561221
> 
> 赞同：0
> 
> 时间：2013-03-22T01:31:42.870
> 
> 标签：c#, asp.net, .net, regex

嗨，我正在尝试为日期 mm/dd/yyyy C# 编写正则表达式。我有这个

```
^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$ 
```

但它不起作用
![在此处输入图像描述](../Images/dd1ee67eb7364d2cf50d568a45c48d8b.png)

如何做到这一点，它将适用于 2013 年 3 月 1 日和 2013 年 3 月 1 日

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T01:42:03.307

不要使用正则表达式，使用`DateTime.TryParse`or `DateTime.TryParseExact`。

还要注意当前的文化和用户的期望。美国人使用“MM/dd/yyyy”，但世界其他地区（通常）使用“dd/MM/yyyy”，对于大范围的日期，两者都无法区分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:43:34.993

我同意您应该`DateTime`为此使用方法。但是如果你想让前导零可选，你可以`?`在它们之后添加一个，如下所示：

```
^(0?[1-9]|1[012])[- /.](0?[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$ 
```

# javascript - 每次单击时，图像边框都会打开和关闭

> ID：15561223
> 
> 赞同：0
> 
> 时间：2013-03-22T01:32:39.873
> 
> 标签：javascript, onclick, border

我正在尝试在我的页面上包含 3 张图片。这些图像必须具有以下行为：单击无边框图像时，它会在其上获得边框。单击带边框的图像时，边框将被删除。换句话说，每次单击该图像时，边框都会打开和关闭。

单击时我可以打开边框，但我不知道如何再次将其删除。

到目前为止，这就是我对 JS 的看法：

```
ims = document.getElementsByTagName("img");

for( i=0 ; i<ims.length ; i++ ){

  ims[i].onclick=function(){

    this.style.borderStyle = "solid";
    this.style.borderColor = "red";
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:34:19.863

您可以检查样式：

```
 ims[i].onclick=function() {

        if (this.style.borderStyle == "solid") {
            this.style.borderStyle = "none";
        } else {
            this.style.borderStyle = "solid";
            this.style.borderColor = "red";
        }

    } 
```

[JSFiddle](http://jsfiddle.net/BkQEx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:03:10.463

在这里，您有一个基于 Doorknob 的解决方案，但有类，正如我在评论中推荐的那样：

```
var ims = document.getElementsByTagName("img");

for( var i=0 ; i<ims.length ; i++ ){
  ims[i].onclick=function() {
    if (this.className == "clicked") {
      this.className = "";
    } else {
      this.className = "clicked";
    }
  };
} 
```

和 css 类：

```
img {
  padding: 5px;
}
img.clicked {
  padding: 0;
  border: 5px solid red;
} 
```

在这里，您可以看到使用类的好处。

这是[jsFiddle](http://jsfiddle.net/Jwg74/)。

`img`为了进一步调查，如果标签有多个类，我建议检查如何做;)。如果您有任何疑问，请再次询问。

# codeigniter - CodeIgniter 不适用于子文件夹

> ID：15561224
> 
> 赞同：0
> 
> 时间：2013-03-22T01:32:59.200
> 
> 标签：codeigniter, codeigniter-2

我在 web 根目录中有我的 codeigniter 代码。mod_rewrite 已启用。我通过 phpinfo.php 进行了检查。现在代码结构是这样的

```
 controllers/home.php(default controller)
  controllers/products.php (not listed in routes.php under config)
  and then a subfolder
  controllers/members/login.php 
```

我正在尝试的网址是

```
 domain_name/ ---------> works 
```

> （注意：这是我的 echo base_url 指向的地方，我猜是因为 $config['index.php'] = ''，但即使将其设置为 index.php 也不会将我指向工作的 index.php url）

```
 domain_name/products ------> doesn't work
    domain_name/index.php/products ------> works
    similarly 
    domain_name/members ----->doesn't work
    domain_name/index.php/members --->work 
```

因为这个东西正在使用 index.php 我猜 routes.php 工作正常。但是有些 echo $base_url 如何在没有 index.php 网址的情况下将我指向这些。

我已经尝试了位于我的 webroot 中的 .htacess 文件，即 /var/www/ codeigniter 的版本是 2.1.3

请帮忙。我希望它可以在有或没有 index.php 的情况下工作，如果你能解释我所缺少的，请给我解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:42:18.193

一般来说，Codeigniter 在调用其主根目录时倾向于显式隐藏 index.php，但是当您尝试直接在 url 中访问其子文件夹时，需要 index.php。为了做到这一点，您必须在其中包含一个 .htaccess ci 文件系统，将接受使用 domain/product 或 domain/index.php/product

因此，请尝试包含此 .htacess 并将其重写基础更改为您的 ci 文件夹名称

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /cifolder

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

# python - Django模型订购问题

> ID：15561227
> 
> 赞同：0
> 
> 时间：2013-03-22T01:33:22.547
> 
> 标签：python, django

这是我的模型：

```
class Feature(models.Model):
    name         = models.CharField(max_length=75, blank=True)
    order        = models.SmallIntegerField()
    group        = models.ForeignKey(FeatureGroup)

    def __unicode__(self):
        return self.name

    class Meta:
        ordering = ['order'] 
```

“功能”根据“订单”中指定的值正确显示在管理控制面板中。

我认为这是：

```
p = get_object_or_404(Phone.objects.prefetch_related('brand', 'features__feature', 'photo_set'), id=id) 
```

我有模板`{% for feature in phone.features.all %}... {{ feature.feature }} ...`

值显示正确，但顺序随机。

出了什么问题，我该如何克服这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:41:32.673

模板过滤器怎么样`dictsort`

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/#dictsort](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#dictsort)

`{% for feature in phone.features.all|dictsort:"order" %}`

# asp.net - App_Code 以 32 位模式编译并放置在 Framework64 temp 中

> ID：15561229
> 
> 赞同：3
> 
> 时间：2013-03-22T01:33:29.233
> 
> 标签：asp.net, .net, iis, compilation

我在 Web 应用程序中遇到了一个非常奇怪的问题。我有一个标记为平台目标的“任何 CPU”的应用程序，但是当我通过 IIS 运行它时，我得到以下信息：

无法加载文件或程序集 'file:///C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\ea146e97\e5f133b2\App_Code.dsbuukid.dll' 或其依赖项之一. 试图加载格式不正确的程序。

看起来这个问题是由于那个 dll 在 32 位模式下编译的，而我的 IIS 服务器只有 64 位。我已经通过在该戴尔上运行 corflags.exe 工具并获得以下信息来确认这一点：

Microsoft (R) .NET Framework CorFlags 转换工具。版本 4.0.30319.17929 版权所有 (c) Microsoft Corporation。版权所有。

版本：v4.0.30319 CLR 标头：2.5 PE：PE32 CorFlags：0x3 ILONLY：1 32BITREQ：1 32BITPREF：0 签名：0

我可以通过将工作进程设置为允许 32 位应用程序来解决这个问题，但我更愿意解决这个问题并允许应用程序在 64 位模式下运行。

我已经尝试多次删除我的临时文件以及重新启动机器和 iis 数百次，但每次 dll 都以 32 位模式编译。

有谁知道这是怎么回事？app_code 编译过程由什么负责？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T02:28:58.967

找到了答案。问题来自视觉工作室分析工具。他们在 web.config 的标签中添加了以下属性

assemblyPostProcessorType="Microsoft.VisualStudio.Enterprise.Common.AspPerformanceInstrumenter，Microsoft.VisualStudio.Enterprise.AspNetHelper，版本=11.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a"

看起来这个属性错误地将东西编译到 x86

# python - Python代码类型错误需要帮助请

> ID：15561230
> 
> 赞同：0
> 
> 时间：2013-03-22T01:33:32.483
> 
> 标签：python

创建一个程序，输入工作小时数和小时费率，并输出工资。注意：每小时超过 40 小时，他们获得 1.5 倍的钱。

***错误在第 22 行和第 25 行。我想将答案四舍五入到小数点后 2 位，但它显示“并非所有参数都在字符串格式化期间转换。”***

```
# Constants for hours over 40
BONUS_MONEY_HOURS=40.0
BONUS_MONEY_RATE=1.5

# Inputting the hourly rate and amount of hours worked
hourly_rate=float(input("Please enter how much you make per hour: "))
hours_worked=float(input("Please enter how many hours worked: "))

# Formulas for calculating the amount paid
hours_under_40=float(hourly_rate*hours_worked)
hours_over_40=float(hours_worked-BONUS_MONEY_HOURS)
bonus_money=float(hours_over_40*BONUS_MONEY_RATE)
bonus_plus_normal=float(bonus_money+hours_under_40)

# Outputting the amount paid from different inputs
if hours_worked > 0 and hours_worked < BONUS_MONEY_HOURS:
    print "You get paid $.2f"%hours_under_40

elif hours_worked > 0 and hours_worked > BONUS_MONEY_HOURS:
    print "You get paid $.2f"%bonus_plus_normal

elif hours_worked < 0:
    print "Invalid input. "

elif hourly_rate < 0:
    print "Invalid input. " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:39:15.213

尝试使用[格式](http://www.python.org/dev/peps/pep-3101/)方法。

```
print "You get paid ${0:.2f}.".format(bonus_plus_normal) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:40:18.880

尝试 $%.2f 而不是 $.2f 你需要 % 否则它不是格式字符。此外，看起来您的程序无法处理某人工作正好 40 小时的情况，这有点常见。:)

# ruby-on-rails - Rails/Ruby 如何覆盖迁移方法时间戳

> ID：15561236
> 
> 赞同：5
> 
> 时间：2013-03-22T01:33:54.023
> 
> 标签：ruby-on-rails, overriding, classpath, timestamp

我正在尝试编写自己的时间戳方法，该方法在迁移期间运行。现在到位的那个在字段上添加了一个 NOT_NULL 约束，我真的不想要那个。

我遇到的问题是我有一个多模式数据库。每个主要客户都有自己的架构。当我们加入新客户时，我们会创建一个新的租户记录，然后为新创建的模式运行迁移。

新模式应该是其他模式中表的精确副本，当然除了没有数据。

我运行的最后一次迁移是使用稍旧版本的 rails。仍然在 3 岁，但年龄稍大。当它创建时间戳时，它们可以为空。前几天我运行迁移时（在新的轨道上）......现在所有字段都是 NOT_NULL

我有这样的想法开发的代码，updated_at 仅在记录更新时填充......而不是在创建时填充。（第三方应用程序和数据库“函数”创建记录）..创建记录的第三方应用程序和数据库函数正在落在新模式上......我已经进入并删除了所有表上的所有 NOT_NULL 约束手动，但我不想将清理工作直接写入我的迁移任务中，以便更正所有未来的表。

我认为最好的办法是覆盖已更改的时间戳方法，回到不破坏现有代码的方法。

所以这就是我需要恢复/覆盖的原因。
我现在的问题是......我如何覆盖该方法。我看不到它的清晰类路径，我不确定如何覆盖它..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T05:21:01.327

把它放在猴子补丁中......简单！

```
class ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::TableDefinition
  def timestamps(*args)
    options = args.extract_options!
    column(:created_at, :datetime, options)
    column(:updated_at, :datetime, options)
  end
end 
```

正如马尼克所说。由于这个“修复”，对 rails 的更新将被忽略。

但他的首次发行也是如此。此外，为了适应他的修复，您需要返回旧迁移并用新代码替换“时间戳”。除此之外，您还必须替换所有未来自动生成的迁移。

我不认为这很适合 DRY.. 也不适合 SPOT。

只是B小心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:03:58.457

有什么问题：

```
create_table :foo do |t|
   t.text :bar
   t.datetime :created_at
   t.datetime :updated_at
end 
```

?

# c - 取消引用指向不完整类型的指针

> ID：15561242
> 
> 赞同：0
> 
> 时间：2013-03-22T01:34:19.033
> 
> 标签：c, pointers, struct

假设我们在一个源文件中有两个结构：

```
struct B {
    int x;
};

struct A {
    beta y;
}; 
```

在等效的头文件中，我们有这些：

```
typedef B* beta;
typedef A* alpha; 
```

此外，这些函数原型在头文件中定义：

```
printAplha(alpha);
compare(const beta, const beta); 
```

在主文件中，我包含了特定的头文件，代码如下所示：

```
alpha one, two;
printAlpha(one);
printAlpha(two);
//everything works fine up to here
compare(one->y, two->y); 
```

在我得到的代码的最后一行

> main.c:37:20：错误：取消引用指向不完整类型的指针
> main.c:37:33：错误：取消引用指向不完整类型的指针

我知道我可以使用包装函数`compare`，其参数将是类型`alpha`（因为比较函数的参数不能更改 - 它是递归的），但我想看看是否有任何其他解决方案，并且为什么会这样。

*注意：结构定义已写入源文件以创建不透明数据类型。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:36:51.693

您正在做的事情肯定没有“加密”，但这使您的示例代码无法看到这些结构的实现。如果要访问结构中的字段，则需要使完整的结构定义对该翻译单元可见。否则，它是一个不完整的类型，就像错误消息所说的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:58:51.040

您正在尝试为 typedef 声明`struct A`和`struct B`使用不透明数据类型，但同时您正在尝试使用这种不透明类型访问字段。

您只能执行上述一项，不能同时执行两项。

解决方案是公开完整的结构定义或提供有助于访问特定字段的辅助方法。辅助方法的实现将再次需要访问完整的结构定义。

# android - Android - 如何在skydrive中实现REST API的REST GET功能

> ID：15561244
> 
> 赞同：3
> 
> 时间：2013-03-22T01:34:30.920
> 
> 标签：android, rest, httpclient, onedrive

有谁知道如何在 Android 中使用 Skydrive REST API？

（记录在这里 [http://msdn.microsoft.com/de-de/library/live/hh243648.aspx](http://msdn.microsoft.com/de-de/library/live/hh243648.aspx)）

访问所需的所有数据都已存储！

```
 private String AccessToken;
  private String AuthenticationToken;
  private String RefreshToken;
  private String ExpiresIn;
  private String Scope; 
```

使用是否正确

```
HttpClient client = new DefaultHttpClient(); 
```

有人有完整的例子吗？

任何想法或建议都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:31:43.670

你可以做这样的事情。

```
InputStream result = null;

HttpClient httpClient = new DefaultHttpClient();
HttpGet get = new HttpGet("https://apis.live.net/v5.0/me/albums?access_token=" + AccessToken); // For example
HttpResponse response = httpClient.execute(get);

if (response != null && response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
    BufferedHttpEntity bufferedHttpEntity = new BufferedHttpEntity(response.getEntity());
    result = bufferedHttpEntity.getContent();
} else {
    // insert error handling
} 
```

根据您提出的要求，您可能需要使用`HttpPut`, `HttpPost`,`HttpDelete`等代替`HttpGet`.

> *   GET - 返回资源的表示。
> *   POST - 将新资源添加到集合中。
> *   PUT - 更新到指定为目标 URL 的位置，或在那里添加资源，如果不存在则添加资源。
> *   DELETE - 删除资源。

如果请求需要一个主体，您可以添加它，它带有`setEntity()`一个[HttpEntity](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpEntity.html/ "实体")对象。

# ruby-on-rails - ActiveRecord::Persistence#reload 不会重新加载对象，除非它们被访问

> ID：15561246
> 
> 赞同：0
> 
> 时间：2013-03-22T01:34:44.910
> 
> 标签：ruby-on-rails, activerecord, rspec

我有一种方法可以创建一个或多个新的 ActiveRecord 对象并将它们作为数组返回：

```
class Parent < ActiveRecord::Base

  has_many :children

  def build_children
    5.times do |i|
      Child.create
    end
    return children
  end

end 
```

在为用户意外调用两次的极端情况编写规范时`build_children`，我注意到它并没有像预期的那样失败：

```
# passes
it "should return the previous batch of children if build_children called twice" do
  parent = Parent.create
  children = parent.build_children
  more_children = parent.build_children
  children.should == more_children
end 
```

我认为这会失败，在第一次调用中返回 5 个孩子的数组，在第二次调用中返回 10 个。相反，它两次都返回原始的 5。

添加重新加载也不会使其失败！事实上，它似乎失败的唯一方法是如果我在重新加载后以某种方式访问​​返回的数组，比如打印它：

```
# this fails, as expected
it "should return the previous batch of children if build_children called twice" do
  parent = Parent.create
  children = parent.build_children
  parent.reload
  puts children
  more_children = parent.build_children
  children.should == more_children
end 
```

更令人困惑的是，这一系列命令在控制台中按预期工作：

```
 parent = Parent.create
  children = parent.build_children
  parent.reload
  more_children = parent.build_children
  # => [ array of 10 children ] 
```

`reload`在 rspec 示例组中的行为是否不同？访问实例化的 AR 对象有什么特别之处？

# android - 在 DialogFragment 上设置文本样式

> ID：15561248
> 
> 赞同：5
> 
> 时间：2013-03-22T01:35:15.323
> 
> 标签：android, android-theme, android-dialogfragment

我有一个简单的 DialogFragment 显示一些文本（其中包含一个年份字符串），然后是一个 SeekBar，用户可以滑动并更改年份字符串。

在 Android 3 和 4 上，这看起来不错……这些平台具有浅色背景并使用黑色文本。

![在此处输入图像描述](../Images/34538e27cced3c1e5015bd0e86f74203.png)

但是，在 Android 2 上，对话框的背景是深色的，并且仍然使用黑色文本。

![在此处输入图像描述](../Images/59ba33c09112a19c2dac553e37ebba88.png)

我不想为不同版本的 Android 配置不同的配色方案，因为必须有一些内置在 Android 系统中的默认值，我应该能够使用这些默认值来设置我的 TextView 的样式，以便它使用适当的文本颜色.

这是显示年份字符串的 TextView：

```
<TextView
    android:id="@+id/textViewYear"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="10dp"
    android:text="1976"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

我可以对我的 TextView 应用哪些设置，以便系统始终对它进行适当的着色？

请注意，我不能只使用 Inverse 样式，因为在 Android 3 和 4 上它可以正常工作。如果我使用反向文本外观，那么它适用于 Android 2，但在 3 和 4 上失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:12:48.470

我[在另一个 SO 帖子上找到了解决方案](https://stackoverflow.com/questions/13266901/dark-text-on-dark-background-on-alertdialog-with-theme-sherlock-light?rq=1)：

```
builder.setInverseBackgroundForced(true) 
```

在 Android 3.x 和 4.x 上，这似乎没有任何改变，但在 Android 2.x 上，它会反转配色方案，使背景为白色，从而正确显示黑色文本。

# java - Oracle Coherence - 2 个日志文件

> ID：15561254
> 
> 赞同：0
> 
> 时间：2013-03-22T01:35:47.887
> 
> 标签：java, log4j, oracle-coherence

我用 Java 创建了一个简单的应用程序，它在 Coherence 服务器中运行。我在我的代码中使用 log4j，当我在服务器中部署它时，我想要两个日志文件。

第一个日志文件将包含我的代码中的所有日志消息。第二个长文件将包含所有与服务器相关的信息（服务器已启动、操作正在进行和 coherence 服务器已停止）

我有 2 个不同的属性文件，在我的 tangosol-coherence-override.xml 的标签下

```
<logging-config>
<destination>log4j</destination>
<severity-level>3</severity-level>
<message-format>{date} Oracle Coherence {version} {level} (thread=null, member={member}): {text} </message-format>
<character-limit>10000</character-limit>
</logging-config> 
```

我的客户端日志的 log4j 属性文件是

```
[coherence@coherence01 config]$ cat log4j.properties
# Define the root logger with appender file
log4j.rootLogger = DEBUG, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=${user.home}/log/cachelog.log

log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.ConversionPattern=%d{DATE} [%t] %5p %c{1}:%L - %m%n 
```

服务器日志是

```
[coherence@coherence01 addons]$ cat log4j.properties
log4j.logger.Coherence=INFO, file

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%m%n

log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=/home/coherence/log/coherence-${pid}.log
log4j.appender.file.threshold=DEBUG
log4j.appender.file.MaxFileSize=10MB
log4j.appender.file.MaxBackupIndex=5
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%m%n 
```

如何分离日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:25:14.110

您可以尝试以下方法

```
 log4j.category.com.first.log=debug, A1
    log4j.category.com.second.log=debug, A2

    log4j.appender.A1=org.apache.log4j.RollingFileAppender
    log4j.appender.A1.File=${log4j.file.home}/first.log
    log4j.appender.A1.MaxFileSize=10000KB
    log4j.appender.A1.MaxBackupIndex=10
    log4j.appender.A1.layout=org.apache.log4j.PatternLayout
    log4j.appender.A1.layout.ConversionPattern=%d{dd MMM yyyy HH:mm:ss,SSS} - %m%n 

    log4j.appender.A2=org.apache.log4j.RollingFileAppender
    log4j.appender.A2.File=${log4j.file.home}/second.log
    log4j.appender.A2.MaxFileSize=10000KB
    log4j.appender.A2.MaxBackupIndex=10
    log4j.appender.A2.layout=org.apache.log4j.PatternLayout
    log4j.appender.A2.layout.ConversionPattern=%d{dd MMM yyyy HH:mm:ss,SSS} - %m%n

    // In Java use the logger as below
    private static Logger  firstLogger  = Logger.getLogger("com.first.log");
    private static Logger  secondLogger  = Logger.getLogger("com.second.log"); 
```

# ruby-on-rails - 如何使用键数组动态地将值添加到嵌套哈希？

> ID：15561259
> 
> 赞同：2
> 
> 时间：2013-03-22T01:36:24.840
> 
> 标签：ruby-on-rails, ruby

从[这个 SO answer](https://stackoverflow.com/questions/10253105/dynamically-creating-a-multi-dimensional-hash-in-ruby?answertab=active#tab-top)，我可以动态创建嵌套的哈希值：

```
hash = Hash.new{ |h,k| h[k] = Hash.new(&h.default_proc) } 
```

例如：

```
hash = Hash.new{ |h,k| h[k] = Hash.new(&h.default_proc) }
hash['a']['b']['c'] = { 'key' => 'value' }
#=> {'a' => { 'b' => { 'c' => { 'key' => 'value' }}}} 
```

到目前为止，一切都很好。

我需要这个：

```
hash = Hash.new{ |h,k| h[k] = Hash.new(&h.default_proc) }
hash['a', 'b', 'c'] = { 'key' => 'value' }
#=> {'a' => { 'b' => { 'c' => { 'key' => 'value' }}}} 
```

我希望它保留层次结构中存在的任何其他散列值，并根据需要创建新的散列。

我对 ruby​​ 中的元编程相当陌生，感谢 andy 的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:28:03.163

完成我认为您想要的一种方法是使用相同的自动激活散列技术，而无需重新定义`Hash#[]`是简单地遍历散列（更深入）给定所需数组的每个元素。我能想到的最惯用的方法是使用`Array#inject`：

```
# auto-vivifying hash
hash = Hash.new { |h, k| h[k] = Hash.new(&h.default_proc)  }

# array of keys
keys = ['a', 'b', 'c']

# "Injection", a.k.a, "go deeper" ;)
keys.inject(hash) {|h, k|
  h[k]
}['key'] = 'value'   # assign 'value' to 'key' on last/deepest hash

p hash               # {"a"=>{"b"=>{"c"=>{"key"=>"value"}}}} 
```

与（因为这是语法错误）不太一样，`hash['a', 'b', 'c']`但我认为这是您需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:02:13.607

这是我得到的最接近的，但不知道“我希望它保留层次结构中存在的任何其他哈希值”究竟是什么意思。由于某种原因，该方法的返回值并不完美，但我有点太累了，无法弄清楚原因（欢迎对为什么发表任何评论）。

```
class MyH < Hash
  def []= (*keys, value)
    self.merge! keys.reverse.inject(value){|mem,obj| {obj => mem } }
    self
  end
end

hash = MyH.new
# => {}
hash['a', 'b', 'c'] = { 'key' => 'value' }
# => {"key"=>"value"}
hash
# => {"a"=>{"b"=>{"c"=>{"key"=>"value"}}}} 
```

# java - 如何遍历字符串中的项目列表

> ID：15561263
> 
> 赞同：-2
> 
> 时间：2013-03-22T01:37:01.160
> 
> 标签：java

我需要计算字符串中的项目数并分别显示它们中的每一个，例如 1) --- 2) ---- 但代码无法正常工作，

```
public static void main(String[] args) {
       String forms = "[436,43,4,900,703,483,......]"; << a long list
       int counter = 0;
       int index =0;
       String temp = "";
       for(int i=0; i<=forms.length();i++)
       {
            index = forms.indexOf(",");
            temp = forms.substring(0, index+1);
            System.out.println(i + ") " + temp);
            forms = forms.replace(temp,"");
            counter++;
       }
       System.out.println("Counter" + counter);
    } 
```

结果显示代码通过字符串，但只是到它的中间。它有大约700个项目。但它显示只有 350 个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:44:12.807

问题是`replace`执行替换，*所以*如果`temp`出现多次`forms`（例如因为重复条目），那么一些条目将被过早删除。（实际上它可能比这更糟糕：您可以只删除条目的*一部分*，如果您同时拥有`3,`and `123,`，并导致奇怪的合并。）

最小的解决方法是省去`replace`和使用`substring`：

```
forms = forms.substring(index+1); 
```

但我建议您尝试`split`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:40:11.347

`Sting[] splitString = forms.split(",");`

这会将字符串拆分为多个字符串，只要有`,`: 您可以使用任何其他分隔符进行拆分 - 即 : - 通过说`forms.split(":");`

然后，您可以通过说`splitString[0]`... 等来引用单个（拆分）字符串。

更具体地说，对于您的情况，您将遍历生成的字符串数组，如下所示：

```
for (int curr = 0 ; curr < splitString.size(); curr++){
      System.out.println(i + ") " + splitString[curr]; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T01:43:52.673

```
public static void main(String[] args) {
       String forms = "436,43,4,436,43,43"; 
       String[] parts = forms.split(",");
       int counter = parts.length;
       System.out.println("Counter" + counter);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T01:44:09.713

您可以使用 split.To 避免 ] 和 [ 符号我们可以使用 replace

```
public static void main(String[] args) {
           String forms = "[436,43,4,436,43,43,......]"; 
           String[] splitString = forms.split(",");
             for(int i=1; i<=splitString.length;i++)
           {
                            System.out.println(i + ") " + splitString[i-1].replace("[", "").replace("]", ""));

           }
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T01:52:05.057

```
String forms = "[436,43,4,436,43,44]"; 
           forms=forms.replace("[", "");
           forms=forms.replace("]", "");
           String resultArray[]=forms.split(",");

           for(int i=0; i<resultArray.length;i++)
           {

               System.out.println(i + ") " + resultArray[i]);

           }
           System.out.println("Counter" + resultArray.length); 
```

# ckeditor - 如何在ckeditor中配置文本默认颜色

> ID：15561270
> 
> 赞同：1
> 
> 时间：2013-03-22T01:38:23.520
> 
> 标签：ckeditor

我可以将其设置`background-color`为蓝色：

```
eventHandler.addEventHandler('instanceReady', function(e) {
    e.editor.document.getBody().setStyle('background-color', 'blue');
}); 
```

如何在ckeditor中将默认颜色更改为白色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T07:21:10.140

好吧，使用这种方法，它只是

```
e.editor.document.getBody().setStyle('color', 'white'); 
```

但是，您也可以更改内容样式表。它通常位于您的 CKEditor 安装文件夹中，例如`/ckeditor/contents.css`.

这两个都只在编辑器内编辑编辑器内容，当编辑器内容显示在其他地方时，样式在保存后不适用。要为那里的内容设置样式，您需要手动解析 CSS 以包含在您自己的样式表中，或者如果样式很简单，只需将它们内联。简单样式的输出代码可能如下所示（JSP）。

```
<div id="CKEditorOutput" style="color:white; background-color:blue;">
<%!
    String ckeOutput() {
        // Here output your saved contents from where ever you saved them
        return "<p>Your CKEditor contents</p>";
    }
%>
<% ckeOutput(); %>
</div> 
```

# c++ - 错误：“模板”之前的预期主表达式

> ID：15561273
> 
> 赞同：0
> 
> 时间：2013-03-22T01:39:04.633
> 
> 标签：c++, templates

好的，所以我正在尝试制作（目前）不平衡的二叉树。我遇到了一个我似乎无法摆脱的奇怪错误。下半场也出现了同样的错误，所以我现在暂时摆脱了它。

```
 void insert( binTreeNode < T >*& node, const T& obj) { // private version of insert( )
    if (obj < node->data) {
        if(node->left != NULL)
            insert(node->left, obj);
        else {
            binTreeNode<T> n;
            n = new binTreeNode(obj, NULL, NULL);
            node->left = n;
        }
    } else {
        if(node->right != NULL)
            insert(node->right, obj);
        else {

        }
    }
} 
```

和错误

```
In file included from ../src/binTree.cc:2:0:
../src/binTree.h: In member function 'void binTree<T>::insert(binTreeNode<T>*&, const T&)':
../src/binTree.h:54:16: error: expected type-specifier before 'binTreeNode'
../src/binTree.h:54:16: error: expected ';' before 'binTreeNode'
src/subdir.mk:24: recipe for target `src/binTree.o' failed
make: *** [src/binTree.o] Error 1 
```

binTreeNode 的构造函数定义为

```
binTreeNode (const T& obj, binTreeNode < T >* leftObj = NULL, binTreeNode < T >* rightObj = NULL) {
    left = leftObj;
    right = rightObj;
    data = obj;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:14:43.283

```
 n = new binTreeNode(obj, NULL, NULL); 
```

应该

```
 n = new binTreeNode<T>(obj, NULL, NULL); 
```

（另外， n 应该是一个指针）。

即使是明确的，类也不会从构造函数中自动推导出模板参数。我不确定为什么。如果添加另一个构造函数，也许是为了使代码不会变得脆弱。

无论如何，如果这真的让您感到困扰，您可以随时添加一个辅助函数：

```
template<typename T>
binTreeNode<T>* newBinTreeNode(const T& obj, binTreeNode<T>* left, binTreeNode<T>* right) {
  return new binTreeNode<T>(obj, left, right);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:43:01.523

在类声明之外定义成员函数时，必须在定义之前`insert()`加上前缀：`template<..>`

```
template <typename T>
void binTree<T>::insert(binTreeNode < T >*& node, const T& obj) {
    if (obj < node->data) {
            if(node->left != NULL)
                insert(node->left, obj);
            else {
                binTreeNode<T> n;
                n = new binTreeNode(obj, NULL, NULL);
                node->left = n;
            }
    } else {
        if(node->right != NULL)
            insert(node->right, obj);
        else {

        }
    }
} 
```

# objective-c - 将 UILabel 对齐到表格视图单元格的右上角的 Objective-C 简单约束

> ID：15561274
> 
> 赞同：1
> 
> 时间：2013-03-22T01:39:05.027
> 
> 标签：objective-c

我正在尝试以编程方式将标签添加到表格视图单元格的右上角。

```
[label addConstraint:[NSLayoutConstraint
    constraintWithItem:label
    attribute:NSLayoutAttributeRight
    relatedBy:NSLayoutRelationEqual
    toItem:cell
    attribute:NSLayoutAttributeRight
    multiplier:1.0
    constant:0]]; 
```

这给出了一个错误，说我引用了视图子树之外的东西，我猜是单元格本身？顶部和右侧是否需要两个单独的约束？

我更喜欢用约束来做正确的事情，但是我也尝试过手动获取单元格宽度来更改标签的位置。如果用户旋转设备，我将不得不在方向更改方法中添加代码的副本。如果我不能使用约束，我愿意这样做，但我无法获得单元格的正确宽度，这就是我尝试过的。

```
[label setFrame:CGRectMake(cell.frame.size.width-318, 10, 308, 30)]; 
```

似乎`cell.frame.size.width`没有得到正确的单元格宽度。

**编辑：**我计算出单元格宽度是相对于其中的内容的，所以我更改了上面的行以获取`tableView.frame.size.width`完成这项工作的整个 tableView 的 with。我仍然想得到一些关于约束的反馈，看看这是否可能。

**编辑：**这就是我设置单元格和标签的方式......

```
NSString *cellId = @"cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellId];
if(cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellId];
}

UILabel *label = [[UILabel alloc] initWithFrame: CGRectMake(10, 10, 308, 30)];
label.text = @"Whatever text";

// Contraint added here

[cell.contentView addSubview: label]; 
```

**编辑：** `感谢@frozendevil

只是为了显示我在应用正确约束后用来设置标签宽度的最终代码......

```
[cell.contentView addConstraint:[NSLayoutConstraint constraintWithItem:label attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1.0 constant:200]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T03:03:28.043

一般来说，您不应该限制`UITableViewCell`单元格本身的视图，而是单元格的`-contentView`. 假设您已遵循通用表格视图最佳实践，您的标签`-superview`应该是单元格的`-contentView`- 将标签中的约束直接添加到单元格是跳过一层。

* * *

编辑：在解决这个问题几分钟后，我无法让单个约束样式代码正常运行（edit2：重新运行它，似乎两种风格都适合我），但使用视觉格式有效为了我：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        UILabel *label = [[UILabel alloc] init];
        label.text = @"Hallo!";
        label.backgroundColor = [UIColor redColor];
        [label sizeToFit];
        label.translatesAutoresizingMaskIntoConstraints = NO;

        [cell.contentView addSubview:label];

        NSDictionary *viewDict = @{@"label" : label};
        [cell.contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[label]|" options:0 metrics:0 views:viewDict]];
        [cell.contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[label]" options:0 metrics:0 views:viewDict]];

        /* Or this!
        [cell.contentView addConstraint:[NSLayoutConstraint constraintWithItem:label
                                                                     attribute:NSLayoutAttributeRight
                                                                     relatedBy:NSLayoutRelationEqual
                                                                        toItem:cell.contentView
                                                                     attribute:NSLayoutAttributeRight
                                                                    multiplier:1.0
                                                                      constant:0]];
        */
    }

    return cell;
} 
```

如果您想要更复杂的东西，最简单的方法可能是创建一个自定义 UIView 子类，该子类在内部布局并将其添加到单元格的`-contentView`.

* * *

附录：

这里有几种处理标签宽度的方法：

一种是调用`constraintWithItem:...`并使用`NSLayoutAttributeWidth`属性来固定大小。另一种方法是使用视觉格式样式来做本质上相同的事情。最好的办法是将标签上的压缩阻力设置得非常高（使用`-[UIView setContentCompressionResistancePriority:forAxis:]`），以便它自动调整到其内容而无需更改任何值。

如果您对自动布局的视觉格式语言不满意，我强烈建议您观看相关的 WWDC 视频并编写一些虚拟代码以适应它。我发现它是使用自动布局最有效的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:35:08.767

好吧，我认为这已经回答了吗？但是，如果您有 UITableViewCell 的自定义子类，则可以通过覆盖来轻松放置标签`-layoutSubviews`：

```
@implementation MyCell : UITableViewCell

-(void)layoutSubviews
{
    [ super layoutSubviews ] ;

    CGRect bounds = self.contentView.bounds ;
    [ self.label sizeToFit ] ;
    self.label.anchorPoint = (CGPoint){ 1.0f, 0.0f } ;
    self.label.position = (CGPoint){ CGRectGetMaxX( bounds ), CGRectGetMinY( bounds } ;
}

@end 
```

# php - PDO SQL 错误（插入时）

> ID：15561279
> 
> 赞同：0
> 
> 时间：2013-03-22T01:39:24.770
> 
> 标签：php, pdo

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1' in C:\xampp\htdocs\recover\recover.php:47 Stack trace: #0 C:\xampp\htdocs\recover\recover.php(47): PDOStatement->execute(Array) #1 {main} thrown in C:\xampp\htdocs\recover\recover.php on line 47 
```

这是我的代码：

```
// This checks if variabes are not empty, and if username is less than 11 characters long.
if (!empty($username) && !empty($password) && !empty($message) && strlen($username) < 11) {

    // Shortcut for our ID generator function.
    $ID = generateID();

    // Now lets insert (register the account) these datas to our database.
    $insert = $connect->prepare("INSERT INTO users (username, password, message, date, time, id) VALUES (:username, :password, :message, CURDATE(), CURTIME(), :id");

    // Executing in array, because if we binded all these variables, it would look very bad.
    $insert->execute(array(
        ':username' => $username,       
        ':password' => $password, 
        ':message' => $message, 
        ':id' => $ID
    ));

    if (!$insert->execute()) {
        print_r($insert->errorInfo());
    }       
} 
```

我几乎是 PHP 新手，很多人告诉我在 mysql_ 过时之前开始使用 PDO。

所以我开始了，这似乎真的很难。试图习惯它。

我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:41:29.360

VALUES 没有右括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T01:41:13.340

和是`date`关键字`time`。请使用反引号将它们转义。

* * *

您缺少`VALUES`子句的括号。

* * *

`prepare`声明应该是：

```
$insert = $connect->prepare(
    "INSERT INTO users ( username, password, message, `date`, `time`, id )
        VALUES( :username, :password, :message, CURDATE(), CURTIME(), :id )"
); 
```

# c# - 从 C# 客户端访问 WCF 服务中的方法时遇到问题

> ID：15561289
> 
> 赞同：0
> 
> 时间：2013-03-22T01:41:17.363
> 
> 标签：c#, asp.net, .net, wcf, web-services

我一直在开发一项服务，该服务将用于身份验证以及为 android 客户端和桌面客户端发送和接收数据。该服务基于以前的服务，该服务是为需要使用 SQL 成员资格提供程序进行身份验证服务的人创建的模板。

所以项目分为3个。一个是通用授权类，另一个是WCF服务，第三个是我用C#启动的客户端。

我的问题是我无法从添加到服务/接口的客户端访问任何新方法。我可以访问所有其他的，除了新的。它也没有出现在智能感知中。我有一个用于引用该项目的网络参考。我不确定为什么它是 Web 引用而不是服务引用，直到我很快意识到由于授权，它不允许添加服务引用。它基本上只是一遍又一遍地要求凭据。

以下是该服务的示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.Security.Permissions;
using System.ServiceModel.Activation;

namespace DevLake.BasicAuth.Service
{
    // AspNetCompatibilityRequirements is needed to capture the HttpContext.Current in establishing authorization
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
    public class BasicAuthService : IBasicAuthService
    {
        public string TestServiceOK()
        {
            return "Basic Auth Service Working";
        }

        [PrincipalPermission(SecurityAction.Demand, Role = "Role1")]
        public string TestRoleAccess()
        {
            return "Role can access";
        }

        public string TestMyService()
        {
            return DateTime.Now.ToString();
        }

        public void TestError()
        {
            throw new System.Exception("Test Exception");
        }
    }
} 
```

下面是一个匹配接口的例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace DevLake.BasicAuth.Service
{
    [ServiceContract]
    public interface IBasicAuthService
    {
        [OperationContract]
        string TestServiceOK();

        [OperationContract]
        string TestRoleAccess();

        [OperationContract]
        string TestMyService();

        [OperationContract]
        void TestError();

        }
} 
```

还有一个我用来调用服务中方法的代码的快速示例：

```
private void btnTestService_Click(object sender, RoutedEventArgs e)
        {

            try
            {
                wsBasicAuthService.BasicAuthService c = new wsBasicAuthService.BasicAuthService();
                c.Credentials = new NetworkCredential(txtUserName.Text, txtPassword.Password);
                MessageBox.Show(c.TestServiceOK());

            }
            catch (System.Exception ex)
            {
                MessageBox.Show("Error: " + ex.Message);
            }
        } 
```

任何人都可以看到任何可能导致这种情况的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:47:30.610

您是否尝试过更新您的参考资料？您应该能够右键单击引用并更新。如果这不起作用，请删除它并重新添加它，看看是否有效。

# ruby - 使用 rvideo RVidoe::Inspector 的意外结果

> ID：15561293
> 
> 赞同：0
> 
> 时间：2013-03-22T01:41:36.483
> 
> 标签：ruby, windows

您好我正在尝试使用 gem rvideo 对视频文件进行转码，但结果与我的预期不符。我已经从[http://ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/)下载了 ffmpeg 文件，安装了 rvideo gem。

我发现如果不指定 ffmpeg_binary 它将无法工作并给出错误。我有几个问题，一个是我输入时的输出

```
require 'rvideo'

video = RVideo::Inspector.new(:file => "D:/The Vault/josh ruby/video transcoding/test1.mp4", :ffmpeg_binary => "C:/ffmpeg/bin/ffmpeg.exe") 
```

当我输入上述命令时，我看到一团糟的输出，看起来像构建日期、配置选项等（包含在帖子底部）

但是我在文档中看到您可以输入类似的命令。

*   视频.fps
*   视频分辨率

他们只为我返回零。

你不能在 Windows 上使用 rvideo 吗？

从顶部输出：

```
=> #<RVideo::Inspector:0x213ba48 @ffmpeg_binary="C:/ffmpeg/bin/ffmpeg.exe",  @filename="test1.mp4", @path="D:/The Vau
lt/josh ruby/video transcoding", @full_filename="D:/The Vault/josh ruby/video transcoding/test1.mp4", @raw_response=
"ffmpeg version N-51106-g17c1881 Copyright (c) 2000-2013 the FFmpeg developers\n  built on Mar 19 2013 13:49:37 with
gcc 4.7.2 (GCC)\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bz
lib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-libass --enable-libbluray --enable-libcaca --enable
-libfreetype --enable-libgsm --enable-libilbc --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-am
rwb --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libspe
ex --enable-libtheora --enable-libtwolame --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-
libvpx --enable-libx264 --enable-libxavs --enable-libxvid --enable-zlib\n  libavutil      52\. 19.101 / 52\. 19.101\n
libavcodec     55\.  1.100 / 55\.  1.100\n  libavformat    55\.  0.100 / 55\.      0.100\n      libavdevice    55\.  0.100 / 55.
 0.100\n  libavfilter     3\. 47.104 /  3\. 47.104\n  libswscale      2\.  2.100 /  2\.  2.100\n  libswresample   0\. 17
.102 /  0\. 17.102\n  libpostproc    52\.  2.100 / 52\.  2.100\nD:/The: No such file or directory\n", @unknown_format=t
rue> 
```

更新：根据下面 rmtsukuru 的回答进行了更改，但最终得到了。另请注意，这是与上述文件不同的文件（在不同的电脑上）。

```
 irb(main):002:0> response = %x(C:/ffmpeg/bin/ffmpeg.exe -i "C:/Users/Josh/Desktop/joshruby/videoTranscoding/test1.mp4")
ffmpeg version N-51205-gac9b056 Copyright (c) 2000-2013 the FFmpeg developers
built on Mar 22 2013 00:04:52 with gcc 4.7.2 (GCC)
configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnu
tls --enable-libass --enable-libbluray --enable-libcaca --enable-libfreetype --enable- libgsm --enable-libilbc --enable-libmp3lame --enable-libopencore
-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable- librtmp --enable-libschroedinger --enable-libsoxr --enable-libspeex -
-enable-libtheora --enable-libtwolame --enable-libvo-aacenc --enable-libvo-amrwbenc  --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxa
vs --enable-libxvid --enable-zlib
libavutil      52\. 22.100 / 52\. 22.100
libavcodec     55\.  1.100 / 55\.  1.100
libavformat    55\.  0.100 / 55\.  0.100
libavdevice    55\.  0.100 / 55\.  0.100
libavfilter     3\. 48.100 /  3\. 48.100
libswscale      2\.  2.100 /  2\.  2.100
libswresample   0\. 17.102 /  0\. 17.102
libpostproc    52\.  2.100 / 52\.  2.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/Josh/Desktop/joshruby  /videoTranscoding/test1.mp4':
  Metadata:
major_brand     : mp42
minor_version   : 1
compatible_brands: isommp41avc1
creation_time   : 2009-02-19 18:49:05
 Duration: 00:00:08.04, start: 0.000000, bitrate: 3129 kb/s
Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 3009 kb/s, 25 fps, 25 tbr, 600 tbn, 50 tbc
Metadata:
  creation_time   : 2009-02-19 18:49:05
  handler_name    : ?Apple Video Media Handler
Stream #0:1(eng): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s
Metadata:
  creation_time   : 2009-02-19 18:49:05
  handler_name    : ?Apple Sound Media Handler
Stream #0:2(eng): Data: none (mp4s / 0x7334706D), 0 kb/s
Metadata:
  creation_time   : 2009-02-19 18:49:05
  handler_name    : ?
Stream #0:3(eng): Data: none (mp4s / 0x7334706D), 0 kb/s
Metadata:
  creation_time   : 2009-02-19 18:49:05
At least one output file must be specified
=> "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:09:49.900

ffmpeg 不喜欢输入文件名中的空格，并且 rvideo 不会为您正确转义输入。如果您从 shell 手动运行命令，您可以让 ffmpeg 正确运行，然后将原始响应传递给 rvideo 检查器以正确实例化它：

```
response = %x('#{bin_path}' -i "#{filename}")
video = RVideo::Inspector.new(:raw_response => response) 
```

替换`bin_path`为 ffmpeg 二进制`filename`文件的路径和输入文件的路径。ffmpeg 二进制路径不必用引号括起来，除非它包含空格。

# actionscript-3 - 限制鼠标移动

> ID：15561302
> 
> 赞同：0
> 
> 时间：2013-03-22T01:42:30.683
> 
> 标签：actionscript-3

在某些情况下，我需要限制鼠标移动。到目前为止，我已经尝试过使用这种方法......

我只是给它一个范围 ti 需要保持在...

```
if (100 < mouseX < 200 &&  100 < mouseY < 200) {
...
}
else
{
trace ("not between the boundary");
} 
```

但它似乎根本不起作用。我不能让鼠标离开水平 100 到 200 和垂直 100 到 200 之间的区域。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:48:36.560

在 ActionScript 中，您不能以这种方式链接多个比较器。您必须将比较分为两个步骤。

代替：

`100 < mouseX < 200 && 100 < mouseY < 200`

你必须使用：

`100 < mouseX && mouseX < 200 && 100 < mouseY && mouseY < 200`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:56:26.767

已经有一个关于这个的问题，[这个](https://stackoverflow.com/questions/5868111/restrict-mouse-move-area-in-a-flex-application)，它说你根本不能限制鼠标移动。在您的情况下，您可以创建一个自定义对象，该对象将在隐藏光标本身的同时跟随鼠标光标，从而“伪造”鼠标光标，并且对于该对象，您可以通过约束其 X&Y 坐标来限制其移动。是的，ActionScript 中没有比较运算符的链接。

```
var mcCursor:MovieClip; // assign this to a proper asset
...
function onMouseMove(e:MouseEvent):void {
    mcCursor.x=e.stageX; // assuming mcCursor to be placed directly on stage above all
    mcCursor.y=e.stageY;
    if (mcCursor.x<100) mcCursor.x=100;
    if (mcCursor.x>200) mcCursor.x=200;
    if (mcCursor.y<100) mcCursor.y=100;
    if (mcCursor.y>200) mcCursor.y=200;
} 
```

然后，当您解析鼠标点击时，检查是否`mcCursor`在正确的位置，如果不是，请不要对点击做出反应（`return`来自侦听器）。

# html - Rails 表单助手

> ID：15561305
> 
> 赞同：0
> 
> 时间：2013-03-22T01:43:30.260
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在为下拉列表使用 rails 表单助手，如下所示：

```
<%= select_tag :analysis, options_for_select(%w[PENDING PASS FAIL], row3[7]), :disabled=> "true", 
:id => 'build_status#{index}', :style=> 'width:100px', :onchange => 'this.form.submit()'%> 
```

现在而不是拥有

```
:disabled=> "true", 
```

我想使用一个红宝石变量，这样

```
$tmp = "disabled" 
```

并使用此变量禁用下拉列表。因为有时我想让它保持启用状态，有时它会根据 $tmp 变量的值被禁用。

我在语法上有问题。任何人都可以对其进行测试并查看哪种语法可以正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:40:03.870

使用该`:disabled`选项时，您需要将其传递给布尔值，而不是字符串。给定任何字符串文字的计算结果为真，两者`disabled: "true"`都会`disabled: "false"`禁用标签。要不禁用该元素，您需要使用`disabled: false`（而不是缺少引号）。也许这就是你问题的根源？

要禁用基于另一个变量的元素，您可以放置​​任何可以为您提供布尔值的操作。例如，要仅在`$tmp`is时禁用菜单`"disabled"`，您可以使用类似`disabled: ($tmp == "disabled")`.

# ipython - IPython Notebook 版本问题 (IPython 0.13)

> ID：15561308
> 
> 赞同：0
> 
> 时间：2013-03-22T01:43:37.240
> 
> 标签：ipython, enthought, ipython-notebook

在我的 Windows 7 桌面上，我安装了 IPython 0.13 版——我得到了 0.13 版笔记本的菜单等，但是当我尝试加载某些 ipynb 文件时——例如[https://github.com/lisa-lab/pylearn2/blob/master/ tutorials/multilayer_perceptron.ipynb](https://github.com/lisa-lab/pylearn2/blob/master/tutorials/multilayer_perceptron.ipynb) 我收到消息

“加载此笔记本时出错。很可能此笔记本的格式比此版本的 IPython 支持的格式更新。此版本可以加载笔记本格式 v3 或更早版本。”

即使有其他最近的 nbs 有效，例如[http://epi.whoi.edu/esr/GIS_GRASS-R_Example.ipynb](http://epi.whoi.edu/esr/GIS_GRASS-R_Example.ipynb)

关于我应该做什么的任何想法

更新：为了纠正这个问题，我卸载了我以前的 epd 安装并重新安装了 epd 7.3.2。我的 Windows 系统可能有一些糟糕的状态，因为在安装之后，当我在命令行上执行“ipython notebook”时，我会收到一条消息说 Windows 找不到文件 ipython-scripts.py 或类似的文件，而笔记本会永远不要出现。我再次卸载并“rm -rf”了 Python27 目录，并使用 msiexec /i 作为管理员重新安装了 epd 7.3.2。现在 IPython notebook 确实启动了。但是，为了重试以下问题，当我尝试“单击此处”从我拥有的 .ipynbs 目录中加载 .ipynb 文件时，它似乎不起作用——这不是它应该如何完成的吗？

更新 2：我使用命令“ipython notebook --pylab inline --notebook-dir="C:\Users\Rakesh\IDATA" 重新启动了 IPython，因此它现在在笔记本目录中有 .ipynbs。现在当我选择并单击在 .ipynbs 上它似乎加载正确。但是我想知道为什么上面的“点击这里”尝试失败了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T04:54:57.653

我无法在 Windows 7 上使用 IPython v0.13 重现这一点。您确定您的 ipynb 文件已正确下载吗？

# php - ZF2 为所有模块的数据库访问创建通用库

> ID：15561309
> 
> 赞同：1
> 
> 时间：2013-03-22T01:43:47.963
> 
> 标签：php, zend-framework2

我从 ZF2 开始，我有一个包含多个模块的应用程序，这些模块被视为不同的“站点”。我想要一个处理所有数据访问的通用库。

理想情况下，我会在包含实体、映射器和服务的根目录中创建类似“common”的东西。

我已经这样做了，但我似乎无法让它自动加载模块上下文之外的新命名空间。

我试过使用：

```
 Zend\Loader\AutoloaderFactory::factory(array(
        'Zend\Loader\StandardAutoloader' => array(
            'autoregister_zf' => true,
            'namespaces' => array(
                'Common' => dirname(__DIR__) . '/site/common',
            )
        )
    )); 
```

然后我创建了目录结构：

```
Common/Entity/User/User.php
Common/Mapper/User/User.php 
```

但是当我尝试使用这些时，它找不到文件。

知道是否有推荐的或最佳实践这样做 - 或者如何完成我正在做的事情？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:02:34.597

最佳实践的建议是将所有内容都保留在一个模块中。Zf2 是模块化应用程序，数据访问等服务也应该是模块的一部分。我建议您也将这种“通用”结构创建为模块（下面是 ZF2 骨架模块的链接）。

[https://github.com/zendframework/ZendSkeletonModule](https://github.com/zendframework/ZendSkeletonModule)

在下面的链接中，您将找到一些有关如何准备模块并从中准备服务管理器以提供这些映射器和实体的有用信息。

[http://framework.zend.com/manual/2.0/en/modules/zend.module-manager.intro.html](http://framework.zend.com/manual/2.0/en/modules/zend.module-manager.intro.html)

希望这可以帮助 ：）

# android - 无法使用 ArrayList 填充 ArrayAdapter

> ID：15561314
> 
> 赞同：1
> 
> 时间：2013-03-22T01:44:08.410
> 
> 标签：android

我最近一直在关注一个关于从网络服务器获取、解释它然后显示它的[教程，我遇到了一些问题。](http://inchoo.net/mobile-development/android-development/simple-android-json-parsing-example-with-output-into-listactivity/)无论我多么努力，我似乎​​都无法用*twitterFeed变量填充 ArrayAdapter。*昨天有人告诉我在另一个线程上运行*fetchTwitterPublicTimeline*类，我已经这样做了，但无法填充 ArrayAdapter。当我将鼠标悬停在*setListAdapter中的**twitterFeed*变量上时收到的错误我收到错误“twitterFeed 无法解析”，这让我相信它可能没有运行类或没有正确传递变量。我的代码在下面，谢谢！

 *MainActivity.java：

```
package com.example.simplebrowser;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.Timer;
import java.util.TimerTask;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.os.Bundle;
import android.os.Handler;
import android.widget.ArrayAdapter;

public class MainActivity extends ListActivity {

/** Called when the activity is first created. */

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Handler handler = new Handler() {
        public void run() {
            ArrayList<String> twitterFeed = fetchTwitterPublicTimeline();

        }

    };

    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, twitterFeed));  
  }

public ArrayList<String> fetchTwitterPublicTimeline() {
      ArrayList<String> listItems = new ArrayList<String>();

      try {
          URL twitter = new URL("http://twitter.com/statuses/public_timeline.json");
          URLConnection tc = twitter.openConnection();
          BufferedReader in = new BufferedReader(new InputStreamReader(tc.getInputStream()));
          String line;

          while ((line = in.readLine()) != null) {
              JSONArray ja = new JSONArray(line);
              for (int i = 0; i < ja.length(); i++) {
                  JSONObject jo = (JSONObject) ja.get(i);
                  listItems.add(jo.getString("text"));
              }
          }
      } catch (MalformedURLException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
      } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
      } catch (JSONException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
      }

      return listItems;

  } 

} 
```

编辑：取消注释处理程序，因为这是一个错误。问题仍未解决。*

# java - 如何从 onClick Java 调用类

> ID：15561319
> 
> 赞同：1
> 
> 时间：2013-03-22T01:45:06.323
> 
> 标签：java, android, android-asynctask

我是 Java 新手，来自 PHP。这可能是一个新手问题，但我无法通过谷歌解决。我试过看教程等。这就是我已经达到的目的。我认为我非常接近。一开始，里面的代码`MyTask`位于`onClick`section里面。但我遇到了一个线程问题，我理解。它试图在主线程上做太多事情。所以我了解`AsyncTask`并尝试整合它。我从一个人那里得到了帮助，他们只能让我走到这一步。他的第一次尝试帮助离开了`onClick`空，并被`MyTask`处决`onCreate`。那不是我需要的。我需要`MyTask`从`onClick`. 为了解决这个问题，他建议添加

```
myTask = new MyTask();
myTask.execute(); 
```

和

```
MyTask myTask; 
```

到里面`onClick`。

但 Eclipse 表示这样做存在问题。它想要创建变量或其他建议。问题是，当我合并这些建议时，Eclipse 永远不会满足并一直说还有更多问题。

谁能告诉我如何在没有 Eclipse 反对的情况下`MyTask`从内部调用？`onClick`正如我所说，我是一个新手，我有时会迷失一般性。如果您有答案，是否可以要求您尽可能具体？我已经发布了下面的代码。谢谢你在这里帮助我。如果您需要更多信息来回答这个问题，请告诉我，我会给您答案。

```
package com.exmple.myapp;

import org.json.JSONException;
import org.json.JSONObject;

import com.exmple.myapp.LoginActivity.MyTask;

import android.content.Intent;
import android.os.AsyncTask;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class LoginActivity extends Activity {
    Button btnLogin;
    Button btnLinkToRegister;
    EditText inputUser;
    EditText inputPassword;
    TextView loginErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    // Importing all assets like buttons, text fields
    inputUser = (EditText) findViewById(R.id.loginUser);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    myTask = new MyTask();
    myTask.execute();
    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            MyTask myTask;

        } 

            // Link to Register Screen
            /**       btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    Intent i = new Intent(getApplicationContext(),
                            RegisterActivity.class);
                    startActivity(i);
                    finish();
                }
            });
        **/
    }); 
 }       

//*** Move out MyTask
class MyTask extends AsyncTask<Void,Void,Void>{
    String user = inputUser.getText().toString();
    String password = inputPassword.getText().toString();
    @Override
    protected Void doInBackground(Void... params) {

        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.loginUser(user, password);
        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                loginErrorMsg.setText("");
                String res = json.getString(KEY_SUCCESS);
                if(Integer.parseInt(res) == 1){
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                    // Launch Dashboard Screen
                    Intent dashboard = new Intent(getApplicationContext(), GD_Calc.class);

                    // Close all views before launching Dashboard
                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(dashboard);

                    // Close Login Screen
                    finish();
                }else{
                    // Error in login
                    loginErrorMsg.setText("Incorrect username/password");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
          }

        return null;
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:47:03.543

您没有`MyTask`正确初始化类的新对象。这是如何做到的：

`MyTask mt = new MyTask()`

`MyTask`是一个类，为了使用它，你必须创建它的一个新实例。您可以通过调用`{ClassName} {instanceName} = new {ClassName(parameters defined by a constructor of the class ClassName)}`. 这对于在 java 中创建各种对象是正确的。

欢迎使用 Java 中的面向对象编程 :)

# c# - System.Net.Mail 引用不存在

> ID：15561320
> 
> 赞同：5
> 
> 时间：2013-03-22T01:45:11.367
> 
> 标签：c#, winforms, system.net.mail, system.net

我在创建发送电子邮件的应用程序时遇到问题。

我已经有一个作为 Windows 窗体应用程序工作，然后决定从空项目中做同样的事情，因为我现在需要制作一个后台应用程序。

我`System.Net.Mail`在 Windows 窗体中使用了命名空间。然后将相同的代码添加到新项目中。

但是，我收到以下错误：

> 名称空间“System.Net”中不存在类型或名称空间名称“Mail”。

“System.Net”引用包含在项目引用列表中，我在可能的引用列表中找不到任何名为“System.Net.Mail”的内容。关键是我在 Windows 窗体应用程序中没有这些错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T01:54:12.270

我试图在 Visual Studio 2012 中重现此问题，但即使我将编译器设置为使用，`.NET 2.0`我仍然没有遇到此问题。

您可能缺少`System.dll`包含 namespace的引用`System.Net.Mail`。作为预防措施，因为您没有包含任何示例代码，我将包含一个邮件客户端的简单实现作为示例。

```
using (SmtpClient client = new SmtpClient("smtp-server.MyDomain.com"))
{
    client.UseDefaultCredentials = true;

    using (MailMessage mail = new MailMessage())
    {
        mail.Subject = subject;
        mail.Body = body;

        mail.From = new MailAddress("MyEmail@MyDomain.com");
        mail.To.Add("ToThisEmail@MyDomain.com");

        client.Send(mail);
    }
} 
```

即使我无法重现这一点，我仍然建议您验证您正在针对与以前的客户端相同的目标框架编译项目。

您可以通过右键单击您的项目并`Target framework`在`Application`选项卡下选择来执行此操作。

**编辑：**可能值得截取您当前参考的屏幕截图并将其上传到 stackoverflow。这将使我们更好地了解潜在的问题或冲突。

![在此处输入图像描述](../Images/593a57e25ea97c4704994be78e08c24c.png)

应该没有必要修改你的`App.config`，但作为参考，你有我的。

```
<?xml version="1.0"?>
<configuration>
    <startup> 
    <supportedRuntime version="v2.0.50727"/></startup>
</configuration> 
```

**编辑2：**

**添加`System.dll`参考。**

1.  右键单击您的项目并选择`Add Reference`.
2.  在和下查找并添加`System`（或`System.dll`）。 `Assemblies``Framework`
3.  点击`OK`保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T10:26:25.960

我遇到了同样的问题。以下更改解决了我的问题。将目标框架从 .Net Framework 4 客户端配置文件更改为 .Net Framework 4。

Client Profile 框架产生了许多这样的问题。

# ellipsis - 如何使用文本溢出：宽度未知的省略号

> ID：15561321
> 
> 赞同：2
> 
> 时间：2013-03-22T01:45:19.350
> 
> 标签：ellipsis, css

我有这个`label`可能是任何宽度，应该使用 CSS`text-overflow:ellipsis`属性。我似乎无法让它工作。`#a`有效，因为`width`已设置，这是预期的结果。怎么去`#b`上班？

```
<div id="a">
    <a href="#">link</a>
    <input type="checkbox" />
    <label>checkbox label</label>
</div>

<div id="b">
    <a href="#">link</a>
    <input type="checkbox" />
    <label>checkbox label</label>
</div>

#a       {width:100px; background:#ddd;}
#a label {text-overflow:ellipsis; overflow:hidden; white-space:nowrap; float:right; width:50px;}
#a a     {float:right}

#b       {width:100px; background:#ddd;}
#b label {text-overflow:ellipsis; overflow:hidden; white-space:nowrap; float:right;}
#b a     {float:right} 
```

[JSFIDDLE](http://jsfiddle.net/6wusc/1/)

# java - Maven还是常春藤？对于已经投入生产的系统，哪一个更好？还有其他的区别？

> ID：15561322
> 
> 赞同：55
> 
> 时间：2013-03-22T01:45:25.993
> 
> 标签：java, maven, ant, development-environment, ivy

我知道这是一个复杂的问题，但我想知道在系统已经投入生产的情况下哪个更好，有很多错误和非常糟糕的设计。真是一团糟。

实际上，我问这个是因为我已经将这个项目转换为 Maven 并且我面临很多问题。我需要调整文件夹结构，将公司制作的糟糕框架从项目中分离出来（它被转换为 jar lib），修复了很多一直破坏项目的细节，配置 POM.xml 以完成所有工作Ant 已经在做并发现应用程序中真正使用的库作为它们的版本（很大一部分库被重命名而没有版本号，并且清单文件是空的）。

嗯，那真是地狱。在这个任务中我发疯了，一直跟着我的问题是“如果我把它转换成常春藤？会更容易吗？”。

我从未与 Ivy 合作过，但据我所知，它与 Ant 合作，而且它比 Maven 更容易适应项目。另一方面，Maven 更多地使用了这个词（我错了吗？），这应该是有原因的！

所以这是我的问题：

*   **与 Jenkins / Hudson 集成**：使用 Ivy 和使用 Maven 一样简单吗？
*   **声纳插件**：上面的问题相同。集成很简单吗？
*   **Eclipse 插件**：这是 Maven 的一个非常薄弱的​​地方。插件很糟糕，但我不知道常春藤的。
*   **部署过程**：一旦配置好所有东西，使用 maven 部署和发布项目就非常容易。和常春藤？
*   **转换**：嗯，我将项目转换为 Maven 的经验很糟糕，但系统没有帮助。我的选择是 Maven 对新项目来说是惊人的，自创建以来就使用 Maven 的项目，但如果你有一个大而无组织的项目，这不是一个好的选择。我错了吗？
*   **插件**：需要在 POM.xml 中配置很多插件。常春藤有这么多选择吗？
*   **人气**：哪个更受欢迎？哪个更常用，为什么？

嗯，就是这个。非常感谢！

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-22T03:36:16.253

首先，阅读 Ivy 网站上的[Ivy / Maven 比较](https://ant.apache.org/ivy/m2comparison.html)。关键信息：

> 首先，最重要的区别是它们根本不是同一种工具。Apache Maven 是一个软件项目管理和理解工具，而 Apache Ivy 只是一个依赖管理工具，与流行的构建管理工具 Apache Ant™ 高度集成。因此，也许更有趣的比较是将 Apache Ant+Ivy 与 Apache Maven 进行比较。但这超出了本页面的范围，该页面仅关注依赖管理。

Ivy 为 Ant 添加了依赖管理功能，所以实际上，关于您使用什么构建系统的问题是：

*   使用常春藤/蚂蚁
*   迁移到 Maven

如果您的构建*已经*使用 Ant，Ivy 将是一个更容易的过渡，因为您的构建脚本不需要移植到不同的构建系统。

如果您决定过渡到 Maven，则需要付出更多努力，因为您需要重写构建脚本和 Mavenize 一切，以及配置您的依赖管理。

如果您决定朝那个方向发展，那么将您的依赖管理配置从 Ivy/Ant 移植到 Maven 也会更容易。所以从长远来看，Ivy 依赖管理将是一个很好的 Maven 配置的垫脚石。

# python - 如何在 3D 空间中绘制两个相对的圆

> ID：15561325
> 
> 赞同：0
> 
> 时间：2013-03-22T01:45:45.993
> 
> 标签：python, opengl, pyglet

我正在尝试使用 Python 的 Pyglet 库绘制 3D 网络。

我有代表蛋白质的球体，它们被绘制在适当的位置（给定 x、y、z 坐标），而不是在 0,0,0 处绘制它们并将它们转换为位置。我现在正在寻找将它们与气缸连接。我的目标是通过计算以每个球体坐标为中心的顶点圆，然后将它们与四边形连接。

但是，我在尝试计算顶点以使两个圆彼此*面对*时遇到了一些障碍。

到目前为止，这是我的代码：

```
class Cylinder(object):
    def __init__(self, start, end, radius, slices, batch, group=None):
        """
        :param start: The (x,y,z) coordinates of the cylinder's start point
        :type start: (float, float, float)
        :param end: The (x,y,z) coordinates of the cylinder's end point
        :type end: (float, float, float)
        :param radius: The radius of the cylinder
        :type radius: float
        :param slices: Number of sections to divide the cylinder into
        :type slices: int
        :param batch: The pyglet batch to add the cylinder to
        :type batch: pyglet.graphics.Batch
        :param group: The pyglet group to add the cylinder to
        :type group: int
        """
        self.start_x, self.start_y, self.start_z = start
        self.end_x, self.end_y, self.end_z = end

        self.num_vertices = 6 * slices
        self.num_faces = slices
        self.num_indexes = 4 * self.num_faces

        self.vertices = numpy.zeros(self.num_vertices, dtype=numpy.float)
        self.normals = numpy.zeros(self.num_vertices, dtype=numpy.float)
        self.indexes = numpy.zeros(self.num_indexes, dtype=numpy.uint32)

        step = 2 * pi / slices
        lat = 0
        lon = 0
        for i in xrange(slices):
            sin_lat = sin(lat)
            cos_lat = cos(lat)
            sin_lon = sin(lon)
            cos_lon = cos(lon)

            # Calculate vertex positions
            sx = self.start_x + radius * cos_lon * sin_lat
            sy = self.start_y + radius * sin_lon * sin_lat
            sz = self.start_z + radius * cos_lat
            ex = self.end_x + radius * cos_lon * sin_lat
            ey = self.end_y + radius * sin_lon * sin_lat
            ez = self.end_z + radius * cos_lat

            # Calculate vertex normals
            snx = cos_lon * sin_lat
            sny = sin_lon * sin_lat
            snz = cos_lat
            enx = cos_lon * sin_lat
            eny = sin_lon * sin_lat
            enz = cos_lat

            # Add vertex positions and normals to
            index = 6 * i
            self.vertices[index:index + 6] = (sx, sy, sz, ex, ey, ez)
            self.normals[index:index + 6] = (snx, sny, snz, enx, eny, enz)

            # Go to next vertex pair
            lat += step

        for i in xrange(slices):
            self.indexes[4 * i:4 * i + 4] = ((2 * i),
                                             (2 * i + 2) % (self.num_vertices // 3),
                                             (2 * i + 3) % (self.num_vertices // 3),
                                             (2 * i + 1))

        if batch:
            self.vertex_list = batch.add_indexed(len(self.vertices) // 3,
                                                 gl.GL_QUADS,
                                                 group,
                                                 self.indexes,
                                                 ('v3f/static', self.vertices),
                                                 ('n3f/static', self.normals))

    def delete(self):
        self.vertex_list.delete() 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:00:00.240

为什么你需要面对面的圆圈？

要构建管，您需要以下算法：

1.  计算从 A 到 B 的向量 AB 并且它是垂直的（Norm）；
2.  按管半径缩放标准
3.  开始添加顶点以构造管，段数为 Seg：

    ```
    I := 0;
    for K := 0 to Seg-1 do
    begin
      TubeCos := Cos(K/Seg*2*pi);
      TubeSin := Sin(K/Seg*2*pi);
      Vert[I].Normal := (-Norm.X*TubeSin, TubeCos, -Norm.Y*TubeSin);
      Vert[I].Vert := (A.X-Norm.X*TubeRad*TubeSin, TubeRad*TubeCos, A.Y-Norm.Y*TubeRad*TubeSin);
      I++;
      Vert[I].Normal := (-Norm.X*TubeSin, TubeCos, -Norm.Y*TubeSin);
      Vert[I].VertB := (B.X-Norm.X*TubeRad*TubeSin, TubeRad*TubeCos, B.Y-Norm.Y*TubeRad*TubeSin);
      I++;
    end; 
    ```

4.  将顶点连接成三角形（顺序很重要） //在这个例子中 0-1-2, 2-3-1, 2-3-4, 4-5-3, ...

# sql - 如何在我的代码中实现 IConvertible 对象？

> ID：15561327
> 
> 赞同：-1
> 
> 时间：2013-03-22T01:45:50.197
> 
> 标签：sql, vb.net, datagrid, ado.net, iconvertible

当我在单击保存按钮后在数据网格列中输入完所有数据时，将返回此错误：

错误：system.data.dll 中出现“System.InvalidCastException”类型的未处理异常

附加信息：对象必须实现 IConvertible。

```
 Dim sqlsyntax As String
    sqlsyntax = "INSERT INTO tblOfficeEquipmentProfile(OE_ID, OE_Category,OE_SubCategory, OE_Name, OE_User, OE_Brand, OE_Model, OE_Specs, OE_SerialNo, OE_PropertyNo, OE_Static_IP, OE_Vendor, OE_PurchaseDate, OE_WarrantyInclusiveYear, OE_WarrantyStatus, OE_Status, OE_Dept_Code,OE_Location_Code,OE_Remarks)" _
             & "VALUES(@OE_ID,@OE_Category,@OE_SubCategory,@OE_Name,@OE_User,@OE_Brand,@OE_Model,@OE_Specs,@OE_SerialNo,@OE_PropertyNo,@OE_Static_IP,@OE_Vendor,@OE_PurchaseDate,@OE_WarrantyInclusiveYear,@OE_WarrantyStatus,@OE_Status,@OE_Dept_Code,@OE_Location_Code,@OE_Remarks)"

    Dim adapter As New SqlDataAdapter
    adapter.InsertCommand = New SqlCommand(sqlsyntax, sqlconn)

    adapter.InsertCommand.Parameters.Add("@OE_ID", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_Category", SqlDbType.Char)
    adapter.InsertCommand.Parameters.Add("@OE_SubCategory", SqlDbType.Char)
    adapter.InsertCommand.Parameters.Add("@OE_Name", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_User", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_Brand", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_Model", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_Specs", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_SerialNo", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_PropertyNo", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_Static_IP", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_Vendor", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_PurchaseDate", SqlDbType.SmallDateTime)
    adapter.InsertCommand.Parameters.Add("@OE_WarrantyInclusiveYear", SqlDbType.Int)
    adapter.InsertCommand.Parameters.Add("@OE_WarrantyStatus", SqlDbType.Char)
    adapter.InsertCommand.Parameters.Add("@OE_Status", SqlDbType.VarChar)
    adapter.InsertCommand.Parameters.Add("@OE_Dept_Code", SqlDbType.Char)
    adapter.InsertCommand.Parameters.Add("@OE_Location_Code", SqlDbType.Char)
    adapter.InsertCommand.Parameters.Add("@OE_Remarks", SqlDbType.VarChar)

    For i As Integer = 0 To DataGrid1.VisibleRowCount - 1

        adapter.InsertCommand.Parameters(0).Value = DataGrid1(i, 0).GetType
        adapter.InsertCommand.Parameters(1).Value = DataGrid1(i, 1).GetType
        adapter.InsertCommand.Parameters(2).Value = DataGrid1(i, 2).GetType
        adapter.InsertCommand.Parameters(3).Value = DataGrid1(i, 3).GetType
        adapter.InsertCommand.Parameters(4).Value = DataGrid1(i, 4).GetType
        adapter.InsertCommand.Parameters(5).Value = DataGrid1(i, 5).GetType
        adapter.InsertCommand.Parameters(6).Value = DataGrid1(i, 6).GetType
        adapter.InsertCommand.Parameters(7).Value = DataGrid1(i, 7).GetType
        adapter.InsertCommand.Parameters(8).Value = DataGrid1(i, 8).GetType
        adapter.InsertCommand.Parameters(9).Value = DataGrid1(i, 9).GetType
        adapter.InsertCommand.Parameters(10).Value = DataGrid1(i, 10).GetType
        adapter.InsertCommand.Parameters(11).Value = DataGrid1(i, 11).GetType
        adapter.InsertCommand.Parameters(12).Value = DataGrid1(i, 12).GetType
        adapter.InsertCommand.Parameters(13).Value = DataGrid1(i, 13).GetType
        adapter.InsertCommand.Parameters(14).Value = DataGrid1(i, 14).GetType
        adapter.InsertCommand.Parameters(15).Value = DataGrid1(i, 15).GetType
        adapter.InsertCommand.Parameters(16).Value = DataGrid1(i, 16).GetType
        adapter.InsertCommand.Parameters(17).Value = DataGrid1(i, 17).GetType
        sqlconn.Open()

        adapter.InsertCommand.ExecuteNonQuery()
        MsgBox("success fully added")
        adapter.InsertCommand.Parameters.Clear()

    Next
    sqlconn.Close() 
```

如何在对象中实现 IConvertible？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:53:43.613

老实说，我真的不明白为什么你一直为参数的值分配一个类型......

当然，您想要的是将单元格的内容转换为正确的类型，例如在您想要做的第一行中：

```
adapter.InsertCommand.Parameters(0).Value = CStr(DataGrid1(i, 0)) 
```

或者可能

```
adapter.InsertCommand.Parameters(0).Value = DataGrid1(i, 0).ToString() 
```

对于任何类型的参数`Char`。对于`DateTime`或`Int`类型参数，您想使用`CDate()`and `CInt`，但我认为您不想使用`GetType()`它，因为它只是获取单元格中值的类型，而不是实际值。

此外，虽然您的命令似乎有 19 个参数，但您只添加了 18 个值，我不知道这是否是所需的行为，但这似乎很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:50:19.407

`Type`您想在每个参数中插入一个值似乎很奇怪：

```
adapter.InsertCommand.Parameters(0).Value = DataGrid1(i, 0).GetType 
```

该错误也很可能是由于尝试将 a 转换为`Type`参数打算保存的各种数据类型。

也许您打算改为执行以下操作：

```
adapter.InsertCommand.Parameters(0).Value = DataGrid1(i, 0).Value 
```

# r - 在 R 中释放内存

> ID：15561331
> 
> 赞同：49
> 
> 时间：2013-03-22T01:46:48.817
> 
> 标签：r, memory-management

我使用了一些变量，但是当它使用时，我再也不需要它了，所以我需要将它删除并释放内存，但是函数 rm() 似乎没有帮助：

```
memory.size()
30.69
tmp=matrix(rnorm(6e5*20),6e5,20)
memory.size()
207.64
rm(tmp)
memory.size()
207.64 
```

这是否意味着我删除了tmp但内存没有释放？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-22T04:53:49.247

我用来`gc()`在操作之间释放 RAM。下面是我如何在循环中使用它的示例，但请参阅[此处](https://stackoverflow.com/q/1467201/1036500)了解更详细的讨论，`gc()`了解有关 R 会话期间内存管理的更多信息[。](https://stackoverflow.com/q/1358003/1036500)

```
# load library
library(topicmodels)

# get data
data("AssociatedPress"))

# set number of topics to start with
k <- 20

# set model options
control_LDA_VEM <-
list(estimate.alpha = TRUE, alpha = 50/k, estimate.beta = TRUE,
verbose = 0, prefix = tempfile(), save = 0, keep = 0,
seed = as.integer(100), nstart = 1, best = TRUE,
var = list(iter.max = 10, tol = 10^-6),
em = list(iter.max = 10, tol = 10^-4),
initialize = "random")

# create the sequence that stores the number of topics to 
# iterate over
sequ <- seq(20, 300, by = 20)

# basic loop to iterate over different topic numbers with gc
# after each run to empty out RAM
lda <- vector(mode='list', length = length(sequ))
for(k in sequ) {
  lda[[k]] <- LDA(AssociatedPress[1:20,], k, method= "VEM", control = control_LDA_VEM)
  gc() # here's where I put the garbage collection to free up memory before the next round of the loop
}

# convert list output to dataframe (suggestions for a simpler method are welcome!)
best.model.logLik <- data.frame(logLik = as.matrix(lapply(lda[sequ], logLik)), ntopic = sequ)

# plot
with(best.model.logLik, plot(ntopic, logLik, type = 'l', xlab="Number of topics", ylab="Log likelihood")) 
```

![在此处输入图像描述](../Images/c36e92004827132a0ae67133cd2eb1bd.png)

```
# print ordered dataframe to see which number of topics has the highest log likelihood
(best.model.logLik.sort <- best.model.logLik[order(-as.numeric(best.model.logLik$logLik)), ]) 
    logLik       ntopic
2  -17904.12     40
3  -18105.48     60
1  -18181.84     20
4   -18569.7     80
5  -19736.94    100
6   -21919.6    120
7  -23785.08    140
8  -24914.23    160
9  -25493.76    180
10 -25837.64    200
11 -25964.23    220
12 -26061.01    240
13 -26117.92    260
14 -26149.44    280
15 -26168.91    300 
```

# google-chrome - iframe 高度调整到内容（工作 Safari，不在 Chrome 上）

> ID：15561332
> 
> 赞同：1
> 
> 时间：2013-03-22T01:46:56.603
> 
> 标签：google-chrome, iframe, safari

好的，嘿。

我正在尝试获取 iframe 的内容以调整 iframe 的高度以显示 iframe 中的所有内容。

这是我借来的代码，它可以在 Safari 上运行，但不能在我亲爱的 Chrome 上运行；

```
<script type="text/javascript">

function getDocHeight(doc) {

doc = doc || document;

var body = doc.body, html = doc.documentElement;

var height = Math.max( body.scrollHeight, body.offsetHeight, 

    html.clientHeight, html.scrollHeight, html.offsetHeight );

return height;

}

function setIframeHeight(id) {

var ifrm = document.getElementById(id);

var doc = ifrm.contentDocument? ifrm.contentDocument: ifrm.contentWindow.document;

ifrm.style.visibility = 'hidden';

ifrm.style.height = "10px"; 

ifrm.style.height = getDocHeight( doc ) + "px";

ifrm.style.visibility = 'visible';

}

</script> 
```

这是 iframe；

```
<iframe src="http://google.com/" 
iframe id="ifrm" name="ifrm" src="height1.html" 
onload="setIframeHeight(this.id)" 
frameborder="0" width="100%" height="0" >
</iframe> 
```

谢谢 ：）

# php - setSlaveOkay 已弃用？

> ID：15561335
> 
> 赞同：3
> 
> 时间：2013-03-22T01:47:07.497
> 
> 标签：php, mongodb

我收到此错误消息：

> 已弃用：函数 Mongo::setSlaveOkay() 已弃用

在[PHP 手册](http://php.net/manual/en/mongocollection.setslaveokay.php)中，它说：

> MongoCollection::setSlaveOkay
> 
> (PECL mongo >=1.1.0)
> 
> MongoCollection::setSlaveOkay — 更改此集合的 slaveOkay 设置

我找不到任何关于它被弃用的信息。

我的 PHP 版本是 5.3.10，MongoDB 版本是 1.3.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:03:21.817

由于其他答案状态`setSlaveOkay`已被弃用，有利于完整的阅读偏好（[http://derickrethans.nl/readpreferences.html](http://derickrethans.nl/readpreferences.html)）。`MongoClient`这是引入课程时所做的更改（ [http://derickrethans.nl/mongoclient.html](http://derickrethans.nl/mongoclient.html)）。

如果您查看 PHP 手册页 ( [http://www.php.net/manual/en/mongocollection.setslaveokay.php](http://www.php.net/manual/en/mongocollection.setslaveokay.php) ) 的底部，您将看到一个更改日志部分，其中提到：

> 使用时发出 E_DEPRECATED。

下面的“另见”部分提供了替代它的链接，阅读首选项。

作为维护者之一的备份 Hannes ( [https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/CAWuND9niLo](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/CAWuND9niLo) ) 提到：

> 我们想让人们做好准备，[...] 将在即将到来的 1.3.0 版本（计划“很快”）中改变。

所以是的，从现在开始你应该使用阅读偏好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:54:26.763

'slaveOk' 已被更可配置的 ReadPreferences 功能所取代。

下面是 PHP ReadReferences 的介绍：

> 驱动程序的 MongoDB 2.2 和 1.3.0 版本添加了对读取首选项的支持，这允许控制如何将查询定向到副本集环境中的 mongod 实例。可以在每个连接、每个数据库或每个集合的基础上指定读取首选项。默认情况下，将继承在更高级别定义的首选项（例如，MongoCollection 将继承在相应 MongoDB 实例上定义的读取首选项）。
> 
> 读取首选项由模式和标签集的组合指定。模式决定了 mongod 实例的优先级，而标签集指定了符合条件的 mongod 实例的标准。

[http://php.net/manual/en/mongo.readpreferences.php](http://php.net/manual/en/mongo.readpreferences.php)

HTH - 罗伯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:50:01.013

此函数的 PHP 更改日志

1.2.11 使用时发出 E_DEPRECATED。

所以它不推荐用于 pecl mongo 驱动程序。

# php - 使用 twig 通过 symfony 路由将实体传递给控制器

> ID：15561340
> 
> 赞同：1
> 
> 时间：2013-03-22T01:48:07.340
> 
> 标签：php, symfony, twig

当我将实体传递给树枝文件时，我想将该实体传递回控制器并在数据库持久性之前重新呈现。实体是最初从控制器传递的变量。

枝条：

```
<a href='{{ path('groupitem_new',{'entity' : entity}) }}'>Link Name</a> 
```

这不起作用。实体未通过。

如何通过 symfony 路由传递实体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T03:25:35.867

你不能。

`path`twig 中的和`url`函数用于生成不调用控制器操作的 URL。

你应该在[twig](http://symfony.com/doc/current/book/templating.html#embedding-controllers)中嵌入一个带有 {% render %} 标签的控制器，如下所示：

```
{# app/Resources/views/base.html.twig #}
{% render url('some_route', { 'entity': entity }) %} 
```

请注意，`url`渲染标签中的`url`函数与您用来生成 URl 的函数有些不同，这个函数用于调用控制器的操作，并在 2.0.20/2.1.5 版本的 symfony 中引入以进行安全修复。旧的语法是这样的：

```
{# app/Resources/views/base.html.twig #}
{% render 'AcmeBlogBundle:Blog:show' with { 'entity': entity } %} 
```

其中 'AcmeBlogBu​​ndle:Blog:show' 被调用[`logical controller name`](http://symfony.com/doc/current/book/routing.html#controller-naming-pattern)。

还请记住，至少您应该在控制器的操作中返回一个空响应：

```
// src/Acme/BlogBundle/Controller/BlogController.php
.
public function showAction(){
    .
    .
    .
    return new Response();
}
. 
```

还添加`use Symfony\Component\HttpFoundation\Response;`到控制器文件的顶部。

# ruby-on-rails - 让 Unicorn 仅访问供应商/缓存 gem

> ID：15561346
> 
> 赞同：0
> 
> 时间：2013-03-22T01:48:20.027
> 
> 标签：ruby-on-rails, bundler, unicorn

似乎当我运行`bundle package`然后`bundle install --local`我运行`unicorn_rails`时，独角兽仍在访问系统宝石。我不断得到：

> 你已经激活了 rack 1.5.2，但是你的 Gemfile 需要 rack 1.2.8。使用 bundle exec 可以解决这个问题。

这不应该是因为机架 1.2.8 在供应商/缓存中。

`bundle exec`不会起作用，因为它似乎是一种资源消耗，而重点`bundle package`是首先要避免这整个混乱。

那么如何让独角兽获得捆绑环境以仅使用供应商/缓存宝石？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:14:32.487

`bundle install --local`将 gems 放入`vendor/local`并使用您的默认`gem`命令进行安装。默认情况下，这是系统范围的安装。如果您使用的是 RVM 或其他东西，它将在您当前的 RVM gemset 中。

如果您在生产环境中安装，并且希望将应用程序限制为来自 的 gem `vendor/local`，那么您需要执行`bundle install --deployment`. 这会将 gem 安装到`vendor/bundle`并设置 Bundler 以使用这些 gem（并且只有那些 gem，而不是系统的 gem）。如果 gem 不在 中`vendor/local`，它将下载它们。它不会更新您的`Gemfile.lock`，最佳做法是让您的所有 gem 保持`vendor/cache`最新，以防止它甚至尝试下载 gem。

`bundle exec`除非您从其中一个 gem 运行二进制文件，否则您不需要使用。如果您正在运行`rails server`并遇到此问题，原因是该`rails`命令是从 shell 的`$PATH`. 它可能是与您想要使用的版本不同的 Rails 版本。

如果是这种情况，您的选择是跟踪`rails`您想要的版本的路径并显式运行它，使用`bundle exec`. 或运行*该*目录`bundle install --binstubs --deployment`并将其添加到您的. 我没有注意到来自. *`bin``PATH``bundle exec``--binstubs`*

# ios - iOS - 在 Xcode 中单击 RUN 到物理 iphone 时崩溃，单击手机上的图标时工作正常

> ID：15561349
> 
> 赞同：1
> 
> 时间：2013-03-22T01:48:43.153
> 
> 标签：ios, objective-c, xcode

当我在 xcode 中点击运行按钮时，我的应用程序在我的手机上启动但立即崩溃（没有错误消息，没有控制台日志）。

当我单击手机上的应用程序图标时，它会启动并完美运行。

此外，它在模拟器中运行时根本不会崩溃。

这在添加集合视图后开始发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:09:57.907

`UICollectionView`是在 iOS 6 中添加的，并且在旧设备上不存在，因此应用程序崩溃，但是您可以使用[PSTCollectionView 之](https://github.com/steipete/PSTCollectionView)类的东西来支持旧设备。

# ios - 在 Objective-C 中实现 singleTap 和 doubleTap

> ID：15561350
> 
> 赞同：7
> 
> 时间：2013-03-22T01:48:45.500
> 
> 标签：ios, objective-c, uitapgesturerecognizer

我将 singTap 和 doubleTap 添加到如下代码所示的视图中：

```
-(void)awakeFromNib{
    [self setUserInteractionEnabled:YES];
    //
    UITapGestureRecognizer *doubleTapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTapGesture:)];
    doubleTapGesture.numberOfTapsRequired = 2;
    [self addGestureRecognizer:doubleTapGesture];

    UITapGestureRecognizer *singleTapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTapGesture:)];
    singleTapGesture.numberOfTapsRequired = 1;
    [self addGestureRecognizer:singleTapGesture];
}

-(void)handleSingleTapGesture:(UITapGestureRecognizer *)singleTapGesture{
    [[self delegate] singleTapOnView];
}

-(void)handleDoubleTapGesture:(UITapGestureRecognizer *)doubleTapGesture{
    [[self delegate] doubleTapOnView];
} 
```

当 doubleTap 时，singleTap 也会触发。doubleTap时如何禁用singleTap？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T01:51:24.700

告诉单击识别器它需要双击识别器在触发之前失败：

```
[singleTapGesture requireGestureRecognizerToFail:doubleTapGesture]; 
```

（这实际上是[UIGestureRecognizer 文档中此方法](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009279-CH1-SW36)的规范示例。）

# java - jsf-api-2.2.0-m05.jar 中的 javax.faces-2.1.14.jar 和 jsf-impl-2.2.0-m05.jar 有什么区别

> ID：15561352
> 
> 赞同：8
> 
> 时间：2013-03-22T01:48:51.260
> 
> 标签：java, jsf-2

我对 jsf-api-2.2.0-m05.jar 和 jsf-impl-2.2.0-m05.jar 的 javax.faces-2.1.14.jar 的区别感到困惑我正在尝试制作一个不使用的 jsf 项目maven，在搜索示例时，我看到了不同教程的不同 jar 依赖项。[coreservlets](http://www.coreservlets.com/JSF-Tutorial/jsf2/)的教程使用 javax.faces-2.1.14.jar，而我从另一个站点看到的另一个教程使用 2 个 jar 文件 jsf-api-2.2.0-m05.jar 和 jsf-impl-2.2.0-m05。 jar 我想知道这两组依赖项的区别。提前谢谢各位。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T03:34:25.050

`jsf-api-xxx.jar`包含在包 java package 下的类`javax.faces`。这个 jar 中的类是 JSF 规范定义的标准 API 的实现。`jsf-impl-xxx.jar`包含在 java 包下的类`com.sun.faces`，正如 java 包所示，它是 Sun 自己的 JSF 实现类。

实际上将`javax.faces-xxx.jar`前两个 jar 文件合并在一起。在 Maven 存储库中，它位于`org.glassfish`groupId 下。你会在里面找到`javax.faces`和`com.sun.faces`java 包。

那么你应该使用什么来进行开发呢？其实两者都可以用。但推荐的方法是`jsf-api-xxx.jar`只包含在编译类路径中。因此，您自己的应用程序不依赖`com.sun.faces`包下的任何类来实现对其他 JSF实现的**可移植性。**如果您正在使用诸如 GlassFish 之类的应用程序，则容器应该已经在运行时提供了 JSF 实现。您不应将上述 JSF jar 文件与您的 war 或 ear 文件一起打包，因为服务器会提供所有这些文件。如果使用Tomcat等默认不自带JSF实现的容器，则`javax.faces-xxx.jar`需要在.`jsf-api-xxx.jar``jsf-impl-xxx.jar``WEB-INF/lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:43:54.553

它们是不同的版本。

*   javax.faces-2.1.14.jar 是 2.1.14 的组合 JAR 文件
*   jsf-api-2.2.0-m05.jar 和 jsf-impl-2.2.0-m05.jar 是 2.2.0-m05 的单独 JAR。

版本之间的差异可以在发行说明中找到，但是 2.2 和 2.1 有很大的不同。

# actionscript-3 - 如何将布尔函数参数定义为可选？

> ID：15561353
> 
> 赞同：0
> 
> 时间：2013-03-22T01:49:02.530
> 
> 标签：actionscript-3

在 ActionScript 3 中，是否有一种简洁的方法来定义一个接受可选布尔参数的函数？如您所知，这是无效的：

```
public function test(param:Boolean = null):void {
    trace(param);
} 
```

这会触发以下错误：*VerifyError: Error #1102: Illegal default value for type Boolean*。由于,`Boolean`是一个原语，我想它不能设置为`null`. 我发现的唯一解决方法是将参数转换为对象：

```
public function test(param:Object = null):void {
    trace(Boolean(param));
} 
```

但是，这感觉不是很干净，特别是如果您正在开发库。ASDoc 将生成 API 文档，说明预期参数是 an`Object`而真正需要的是`Boolean`.

有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:12:13.660

当您说 时`optional`，我假设您的意思是如果没有提供值，那么与您的`default`值为真或假相比，应该会发生不同的事情。

您可以使用如下类创建自己的对象来处理您需要的三种状态并保持代码可读性：

```
public class Condition
{

    private var _value:* = null;

    public function Condition(initial:* = null)
    {
        value = initial;
    }

    public function set value(n:*):void
    {
        if(_value === null || _value === false || _value === true)
        {
            _value = n;
        }
    }

    public function get value():*{ return _value; }

} 
```

然后你的功能可能是：

```
function test(param:Condition = null):void
{
    if(param && param.value != null)
    {
        trace(param.value);
    }
}

test( new Condition() );
test( new Condition(true) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T01:50:17.090

正如您所说，布尔值不能设置为`null`值。

因此，您应该指定一个默认值，即`true`或`false`。

```
public function test(param:Boolean = false):void {
    trace(param);
} 
```

但是因为您需要没有设置任何内容的第三种情况，所以一个选项可能是接受任何 Object 但如果它不是 null 且不是布尔值则抛出异常：

```
 public function test(param:* = null):void
    {
        if (param != null)
        {
            if ((param == true) || (param == false))
            {
                trace(Boolean(param).toString());
            }
            else
            {
                throw new CustomError("param should be a boolean");
            }
        }
        else
        {
            // Do nothing
        }
    } 
```

请注意，此解决方案还接受可以与 、或`true`等`false`比较的对象或原语。`0``1``[]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T20:09:47.457

从上面的好建议和讨论中，我认为，在库场景中，为简单起见，最好的方法仍然是`Object`使用默认值键入参数，但在 API 文档`null`中请求 a ：`Boolean`

```
/**
 * @param param Boolean object or null
 */
public function test(param:Object = null):void {
    trace(Boolean(param));
} 
```

这允许库的用户传递一个布尔值或什么都不传递。感谢大家。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T07:51:22.513

关于我之前的回答进行了大量讨论，但这是拥有接受三种状态之一的函数**的正确方法。**我之前的回答试图保留您要求的布尔值的使用，但这不是正确的方法。

创建一个定义三个值的类：

```
class State
{
    public static const EMPTY:int = -1;
    public static const FALSE:int = 0;
    public static const TRUE:int = 1;
} 
```

您的函数将接受一个`int`（您的类中三个属性中的每一个的类型`State`）。它将处理三个可能的值。您可以使用简洁的注释来通知开发人员您对函数期望的值，引用`State`类。默认值可以是`-1`aka `State.EMPTY`。

```
/**
 * Function description.
 * @param state One of three states, defined by State.
 */
function test(state:int = -1):void
{
    switch(state)
    {
        case State.EMPTY:
            // No value given.
        break;

        case State.TRUE:
            // True.
            //

        break;

        case State.FALSE:
            // False.
            //

        break;

        default:
            throw new ArgumentError("Unsupported value for test()");
        break;
    }
} 
```

# lucene - Lucene - “AND”组“OR”术语

> ID：15561357
> 
> 赞同：0
> 
> 时间：2013-03-22T01:49:16.397
> 
> 标签：lucene, lucene.net

假设我使用列表国家等条件进行搜索。用户可以选择一组国家进行搜索，并将该组与其他标准结合起来。

在 SQL 中，我会在 where 子句中执行此操作，即 WHERE (country = 'brazil' OR country = 'france' OR country = 'china) AND (其他搜索条件)。

目前尚不清楚如何在 Lucene 中执行此操作。Query.combine 似乎有希望，但如果我有多组“OR”术语要处理，复杂性会很快增加。

Lucene 在这方面有能力吗？或者我应该使用这些类型的标准访问我的常规数据库并过滤我的 Lucene 结果？

深入挖掘，您似乎可以嵌套布尔查询来完成此操作。如果这种技术有效并且它是否有效，我会更新答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:35:02.380

使用标准查询解析器（您可以查看[相关文档](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Grouping)），您可以使用类似于 DB 查询的语法，例如：

```
 (country:brazil OR country:france OR country:china) AND (other search criteria) 
```

或者，为了简化一点：

```
 country:(brazil OR france OR china) AND (other search criteria) 
```

或者，Lucene 还支持使用 +/- 而不是 AND/OR 语法编写的查询。我发现该语法对于 Lucene 查询更具表现力。这种形式的等价物是：

```
 +country:(brazil france china) +(other search criteria) 
```

* * *

如果手动构建查询，您确实可以嵌套[BooleanQueries](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/BooleanQuery.html)以创建类似的结构，使用正确的[BooleanClauses](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/BooleanClause.Occur.html)来建立您指定的 And/Or 逻辑：

```
Query countryQuery = new BooleanQuery();
countryQuery.add(new TermQuery(new Term("country","brazil")),BooleanClause.Occur.SHOULD);
countryQuery.add(new TermQuery(new Term("country","france")),BooleanClause.Occur.SHOULD);
countryQuery.add(new TermQuery(new Term("country","china")),BooleanClause.Occur.SHOULD);

Query otherStuffQuery = //Set up the other query here, 
//or get it from a query parser, or something

Query rootQuery = new BooleanQuery();
rootQuery.add(countryQuery, BooleanClause.Occur.MUST);
rootQuery.add(otherStuffQuery, BooleanClause.Occur.MUST); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:44:38.100

两种方式。

1.  让 Lucene 制定查询。为此，请按以下格式发送查询字符串。

    查询：**“国家（巴西法国中国）”**

    内置的 QueryParser 将上述字符串解析为带有 OR 运算符的 BooleanQuery。

```
QueryParser qp = new QueryParser(Version.LUCENE_41, "country", new StandardAnalyzer(Version.LUCENE_41));
Query q = qp.parse(s); 
```

2.  如果您想自己制定查询，

```
BooleanQuery bq = new BooleanQuery();
//
TermQuery tq = new TermQuery(new Term("country", "brazil"));
bq.add(tq, Occur.SHOULD); // SHOULD ==> OR operator
//
tq = new TermQuery(new Term("country", "france"));
bq.add(tq, Occur.SHOULD);
// 
tq = new TermQuery(new Term("country", "china"));
bq.add(tq, Occur.SHOULD); 
```

除非您添加数百个子查询，否则 Lucene 将在性能方面满足您的期望。

# php - 如何在android中将json从php解析到listview？

> ID：15561359
> 
> 赞同：1
> 
> 时间：2013-03-22T01:49:30.373
> 
> 标签：php, android, mysql, json, parsing

嗨，我是一名新程序员，我正在尝试将此输出解析到我的 android listview 中，我使用连接到 mysql 的 php 来生成此输出：

```
{"id":"2","name":"Username : garrett","password":"Password : important"}{"id":"1","name":"Username : darrel","password":"Password : pass1234"} 
```

我知道有很多关于同一主题的问题，但我似乎无法找到答案！如果这是一个简单的问题，真的很抱歉。提前致谢！

这是我的 java 代码，它当前将我的输出显示到 textView 中。但只有第一个用户。

```
import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.os.StrictMode;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import android.widget.TextView;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

@TargetApi(Build.VERSION_CODES.GINGERBREAD)
public class Users extends Activity {
/** Called when the activity is first created. */

@TargetApi(Build.VERSION_CODES.GINGERBREAD)
@SuppressLint("NewApi")
@Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

    }
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://172.30.54.153/databases/");
    TextView textView = (TextView)findViewById(R.id.textView1);
    TextView textView2 = (TextView)findViewById(R.id.textView2);

  try {

   HttpResponse response = httpclient.execute(httppost);
   String jsonResult = inputStreamToString(response.getEntity().getContent()).toString();
   JSONObject object = new JSONObject(jsonResult);

   String name = object.getString("name");
  String password = object.getString("password");
  textView.setText(name + " - " + password);

  } 
  catch (JSONException e) {
   e.printStackTrace();
  } 
  catch (ClientProtocolException e) {
   e.printStackTrace();
  } 
  catch (IOException e) {
   e.printStackTrace();
  }

   }
private StringBuilder inputStreamToString(InputStream is) {
    String rLine = "";
    StringBuilder answer = new StringBuilder();
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));

    try {
     while ((rLine = rd.readLine()) != null) {
      answer.append(rLine);
       }
    }

    catch (IOException e) {
        e.printStackTrace();
     }
    return answer;
   }
} 
```

我的 PHP 代码。

```
 <?php 

 require 'connect.inc.php';

 $query = "SELECT `id` , `username`, `password` FROM `users` ORDER BY `id`";

 if ($query_run = mysql_query($query)) {

 while($query_row = mysql_fetch_assoc($query_run)) {
 $username = $query_row['username'];
 $password = $query_row ['password'];
 $id = $query_row ['id'];
 //echo $username .'`s password is : '. $password.'<br>';
 $data = array('id'=>$id , 'name'=> 'Username : '. $username ,'password'=>'Password : '.$password);
 print(json_encode($data));
 //print(json_encode($password));
 }

 }else{
 echo mysql_error();
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:22:08.713

php

```
$final_data = array();    
if ($query_run = mysql_query($query)) 
    { 
        $i=0;
        while($query_row = mysql_fetch_assoc($query_run)) 
        { 
            $username = $query_row['username']; 
            $password = $query_row ['password']; 
            $id = $query_row ['id']; 
            //echo $username .'`s password is : '. $password.'<br>'; 
            $data = array('id'=>$id , 'name'=> 'Username : '. $username ,'password'=>'Password : '. $password); 
            $final[$i]=$data;
            $i++;
            //print(json_encode($data)); 
            //print(json_encode($password)); 
        } 
        print(json_encode($final_data));
    }else{
     echo mysql_error(); 
    } 
```

java部分

```
String jsonResult = inputStreamToString(response.getEntity().getContent()).toString();
JSONArray mArray = new JSONArray(jsonResult);
for (int i = 0; i < mArray.length(); i++) {
    JSONObject object = mArray.getJSONObject(i);

    String name = object.getString("name");
    String password = object.getString("password");
    textView.setText(name + " - " + password);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:55:09.890

从您的服务器返回一个 json 对象数组。改变这个

```
JSONObject object = new JSONObject(jsonResult); 
```

对此

```
JSONArray objects = new JSONArray(jsonResult); 
```

然后迭代 jsonArray 并为每个数组项构建一个 jsonObject

```
for (int i = 0; i < objects.length(); i++) {
    JSONObject jsonObject = jsonArray.getJSONObject(i);

    // do something here

} 
```

# javascript - 淘汰赛绑定不更新

> ID：15561360
> 
> 赞同：1
> 
> 时间：2013-03-22T01:49:39.690
> 
> 标签：javascript, knockout.js

我的淘汰赛绑定没有更新。我有一个设置为的字段

```
this.firstName = ko.observable("Bert"); 
```

当我打电话时：

```
AppViewModel.firstName(name); 
```

我需要它来更新。这是一个jsfiddle：

```
function AppViewModel() {
    this.firstName = ko.observable("Bert");
    this.lastName = ko.observable("Bertington");
}
// Activates knockout.js
ko.applyBindings(new AppViewModel());

// When I click button I want the name to change
$('input[type=button]').click( function() {
    var name = 'New Name';
    AppViewModel.firstName(name);
}); 
```

[http://jsfiddle.net/d577K/38/](http://jsfiddle.net/d577K/38/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:55:03.447

当你写

```
new AppViewModel() 
```

您正在创建一个新的 AppViewModel 对象。但是，您永远不会保存对该对象的引用。

当您尝试更新时`AppViewModel.firstName(name);`，`AppViewModel`是您的构造函数，并且您正在调用构造函数中不存在的方法。您需要将对象创建为变量，然后引用它。

```
var app = new AppViewModel();

...

app.firstName(name); 
```

这是你的[fiddle](http://jsfiddle.net/d577K/39/)的更新，它现在可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T01:55:45.420

您引用的是 AppViewModel 类而不是实际对象...尝试在使用敲除绑定之前实例化视图模型，然后引用该实例：

```
function AppViewModel() {
    this.firstName = ko.observable("Bert");
    this.lastName = ko.observable("Bertington");
}
var vm = new AppViewModel();
// Activates knockout.js
ko.applyBindings(vm);

//When I click button I want the name to change
$('input[type=button]').click( function() {
var name = 'New Name';
vm.firstName(name);

}); 
```

这是小提琴：http: [//jsfiddle.net/d577K/178/](http://jsfiddle.net/d577K/178/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:18:00.713

有什么理由将名称更新功能保留在模型之外？

这个怎么样：http: [//jsfiddle.net/dvdrom000/d577K/41/](http://jsfiddle.net/dvdrom000/d577K/41/)

**html更新**

```
<input type="button" value="test" data-bind="click: NewName" /> 
```

**js**

```
function AppViewModel() {
    this.firstName = ko.observable("Bert");
    this.lastName = ko.observable("Bertington");

    this.NewName = function(){
        this.lastName("New name");
    }
}
// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

# c - C中的结构限制

> ID：15561362
> 
> 赞同：0
> 
> 时间：2013-03-22T01:49:40.890
> 
> 标签：c

我想问一下C中的结构是否有限制。

我有：

```
#define MAX_DOC_LENGTH (1<<22) 
```

和：

```
struct MyDocument {
DocID doc_id;
unsigned int num_res;
QueryID* query_ids;
unsigned int size;
char str[MAX_DOC_LENGTH];
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:13:09.657

`SIZE_MAX`，它是`size_t`类型的最大值，是 C 中任何单个对象的绝对最大大小（以 C 字节为单位，其中有`CHAR_BIT`位，>= 8）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:52:37.713

这取决于您是否在`heap`或上创建结构的实例`stack`。如果您定义一个指向对象的指针并在`heap`through上分配`malloc`，那么它取决于您系统的可用内存。

如果您将堆栈上的对象实例定义为`struct MyDocument mydoc;`，那么这必然会失败，因为您的系统不会有这么大的堆栈值。

建议声明`str`为指针 ie`char *str`并通过`malloc`.

结构定义可以重新定义为

```
struct MyDocument {
    DocID doc_id;
    unsigned int num_res;
    QueryID* query_ids;
    unsigned int size;
    char *str; // Modified the declaration
}; 
```

`stack`通过此更改，您是否在或上创建对象都没有关系`heap`。如果要`pointer`为对象定义 a，则可以分配对象，`str`如下例所示

```
struct MyDocument *myDoc; // Declare an object pointer

myDoc = malloc(sizeof(MyDocument)); // Allocate memory for the object
myDoc->str = malloc(sizeof(char) * MAX_DOC_LENGTH); // Allocates memory for str 
```

`str`或者，您可以在堆栈上定义一个对象并仅分配空间为

```
struct MyDocument someDoc; // Declare an object

someDoc.str = malloc(sizeof(char) * MAX_DOC_LENGTH); // Allocates memory for str 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T01:53:03.233

在这里，您的问题与字符串 str 的大小有关，而不与结构内声明的变量数量有关。编译器不会有任何限制，如果出现问题，那将是由于内存容量问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T01:56:41.873

4MB 对于堆栈来说可能太大了。分配您`str`的`heap`.

```
struct MyDocument {
DocID doc_id;
unsigned int num_res;
QueryID* query_ids;
unsigned int size;
char* str;
}; 
```

当您分配时：

```
struct MyDocument doc;
doc.str = malloc(MAX_DOC_LENGTH); 
```

# breeze - 使用 jsonResultsAdapter 的实体查询

> ID：15561364
> 
> 赞同：2
> 
> 时间：2013-03-22T01:50:01.830
> 
> 标签：breeze

我正在尝试使用带有 jsonResultsAdapter 的微风 EntityQuery 来使用这样的第三方 API（省略了 DataService 设置）：

```
var jsonResultsAdapter = new breeze.JsonResultsAdapter({
            name: "eventAdapter",
            extractResults: function (json) {
                return json.results;
            },
            visitNode: function (node, queryContext, nodeContext) {
                var entityTypeName = 'Event';
                var entityType = entityTypeName && queryContext.entityManager.metadataStore.getEntityType(entityTypeName, true);
                var propertyName = nodeContext.propertyName;
                var ignore = propertyName && propertyName.substr(0, 1) === "$";

                return {
                    entityType: entityType,
                    nodeId: node.$id,
                    nodeRefId: node.$ref,
                    ignore: ignore
                };
            }
        });

var query = new breeze.EntityQuery("Events")
                .using(jsonResultsAdapter);

        return this.manager.executeQuery(query); 
```

但它返回此错误：“**无法读取属性 '$type' of null** ”

我认为 EntityManager 忽略了*.using(jsonResultAdapter)*语句，它正在尝试使用在微风.js 中定义的默认 jsonResultsAdapter：

```
ctor.prototype.jsonResultsAdapter = new JsonResultsAdapter({

    name: "webApi_default",

    visitNode: function (node, queryContext, nodeContext ) {
        var entityTypeName = EntityType._getNormalizedTypeName(node.$type);
        var entityType = entityTypeName && queryContext.entityManager.metadataStore.getEntityType(entityTypeName, true);
        var propertyName = nodeContext.propertyName;
        var ignore = propertyName && propertyName.substr(0, 1) === "$";

        return {
            entityType: entityType,
            nodeId: node.$id,
            nodeRefId: node.$ref,
            ignore: ignore
        };
    } 
```

不知道如何告诉微风使用我的 jsonResultsAdapter 而不是默认的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:34:02.923

从**v 1.2.7**开始，此问题已得到修复。

----- 以前的帖子

好的，这是一个错误。它将在下一个版本中修复。

现在，我认为您可以改用 dataService 的 jsonResultsAdapter。即这样的东西。

```
var ds = new DataService( { serviceName: yourServiceName, jsonResultsAdapter: yourAdapter });
var em = new EntityManager({ dataService: ds });
var query = new breeze.EntityQuery("Events")
return em.executeQuery(query); 
```

# java - java内部类方法访问

> ID：15561368
> 
> 赞同：6
> 
> 时间：2013-03-22T01:50:24.530
> 
> 标签：java

我有一个外部班级。我还有一个扩展 JPanel 的私有内部类。这是代码的设计。

```
public class Outer{
    private class Inner extends JPanel{
        public void doSomeWork(){}
    }

    public Outer(){
        Inner inner = new Inner();
        inner.doSomeWork();
    }

    public static void main(String args[]){
        Outer outer = new Outer();
    }
} 
```

我无法从外部类访问内部类的 doSomeWork() 方法。请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T01:56:25.833

这是创建内部对象并访问其变量的方法...

```
Outer outer = new Outer(); 
Outer.Inner inner = outer.new Inner(); 
inner.doSomeWork(); 
```

[Oracle 的示例代码在这里...](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/java/javaOO/examples/ShadowTest.java)

# java - 相机和 SurfaceView - 视频失真/伪影

> ID：15561370
> 
> 赞同：1
> 
> 时间：2013-03-22T01:50:49.970
> 
> 标签：java, android, android-camera, surfaceview, android-mediarecorder

截图：http: [//imgur.com/r7EpSpx](http://imgur.com/r7EpSpx)

关于 SurfaceView 和相机的操作，我有一个非常具体的问题。我使用 SurfaceView 作为 IntentService 中相机的预览表面（以允许后台操作）。

经过大量的试验和错误，我几乎可以让代码按预期工作。但是，当我使用 MediaRecorder 录制视频时，每当我恢复我的活动（因此重新创建 SurfaceView）时，视频都会极度失真/失真，看起来像是彩虹色，中间有一个大的黑色矩形。此外，视频效果似乎是“平铺”排列。如果仔细观察，摄像头仍在工作，视频录制正常，但 SurfaceView 预览已损坏。

通常，我会在 SurfaceView 回调的surfaceCreated 方法中重新实例化Camera 对象，但是每当我使用Camera.stopPreview() 或其他几个Camera 函数时，它都会导致我的MediaRecorder.stop() 无限期挂起（这是另一个单独的问题）。因此，当重新创建表面时，我必须在我的 IntentService 中使用相同的 Camera 对象。

除了这种奇怪的视频失真，甚至是 MediaRecorder 生成的视频，一切都正常工作。只有预览受到影响。我无法确定这是代码问题、软件问题、TouchWiz 问题还是硬件问题。它发生在所有方向配置中。将代码移动到 surfaceChanged 会产生同样的结果。提前感谢您对此的任何帮助或见解！

```
@Override
public void surfaceCreated(SurfaceHolder holder) {  
if (isRecording) //Only run this code if MediaRecorder is recording
    try {           
        recordingCamera.setPreviewDisplay(rHolder); //This works, but causes the aforementioned distortion
        //recordingCamera.startPreview(); //Removes distortion, but causes MediaRecorder.stop() to freeze app indefinitely          

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    //recordingCamera.stopPreview();  //Removes distortion, but causes MediaRecorder.stop() to freeze app indefinitely      

} 
```

**在 Galaxy Note II 上运行 | 安卓 4.1.2 (TouchWiz)**

# php - 重定向然后在另一个页面上运行功能？

> ID：15561372
> 
> 赞同：1
> 
> 时间：2013-03-22T01:50:53.207
> 
> 标签：php, html

所以我有代码：

```
header("Location: ".$config['site_url']."index.php#login-box"); 
```

如果用户未登录，这是我尝试触发 jquery 登录表单的 html 代码：

```
<li><a class="log" href="#login-box"><span class="hover" style="opacity: 0;"></span></a></li> 
```

但是当它运行时，它所做的只是将#login-box 添加到我的url 的末尾，并且不会触发#login-box href。我知道相当蹩脚的尝试，但有什么想法吗？

这是 jquery 脚本，我将如何正确添加您提到的代码？

```
 $(document).ready(function() {
$('a.login-window2').click(function() {

            //Getting the variable's value from a link 
    var loginBox = $(this).attr('href');

    //Fade in the Popup
    $(loginBox).fadeIn(300);

    //Set the center alignment padding + border see css style
    var popMargTop = ($(loginBox).height() + 24) / 2; 
    var popMargLeft = ($(loginBox).width() + 24) / 2; 

    $(loginBox).css({ 
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    // Add the mask to body
    $('body').append('<div id="mask"></div>');
    $('#mask').fadeIn(300);

    return false;
});

// When clicking on the button close or the mask layer the popup closed
$('a.close, #mask').live('click', function() { 
  $('#mask , .login-popup').fadeOut(300 , function() {
    $('#mask').remove();  
}); 
return false;
});
});
             </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:00:51.597

这是一个小片段，应该可以使用您提到的jQuery：

```
$(function(){
    $("a.login-window2").click(function(){
        //Getting the variable's value from a link
        var loginBox = $(this).attr("href");
        //Fade in the Popup
        $(loginBox).fadeIn(300);
        //Set the center alignment padding + border see css style
        var popMargTop = ($(loginBox).height() + 24) / 2;
        var popMargLeft = ($(loginBox).width() + 24) / 2;
        $(loginBox).css({
            "margin-top" : -popMargTop,
            "margin-left" : -popMargLeft
        });
        // Add the mask to body
        $("body").append("<div id=\"mask\"></div>");
        $("#mask").fadeIn(300);
        return(false);
    });
    // When clicking on the button close or the mask layer the popup closed
    $("a.close, #mask").live("click", function(){
        $("#mask , .login-popup").fadeOut(300, function(){
            $("#mask").remove();
        });
        return(false);
    });
    // Check the hash
    var hash = $(location).attr("hash");
    if(hash == "#login-box") {
        $("a.login-window2").click();
    }
}); 
```

将其放入您的`index.php`文件中并从`if`语句内部运行您的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T02:05:33.017

这是您的代码中的错误。

利用：`name="#login-box"`

代替：`href="#login-box"`

# android - 使用 BufferedOutputStream 时 Android FTP 上传速度很慢

> ID：15561377
> 
> 赞同：2
> 
> 时间：2013-03-22T01:51:47.350
> 
> 标签：android, performance

***我正在尝试构建一个 Android 应用程序来使用 FTP 执行上传速度测试，但是使用以下代码，上传速度不会超过 1 Mbps。在同一设备上使用 FTP 客户端时，我可以获得 15 Mbps 的上传速度。有人可以帮我解决这个问题吗？***

```
public class MultiUL extends Thread{

private String id="hhhhh0001";
private int bufferSize=32768;

public void run() {
    FTPClient ftp = new FTPClient();
    try {       
        ftp.connect(MPSharkVar.Server,21); // Using port no=21
        ftp.login(MPSharkVar.FTPUser, MPSharkVar.FTPPwd);
        ftp.setFileType(FTP.BINARY_FILE_TYPE);
        ftp.enterLocalPassiveMode();
    } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }     
    uploadWork(ftp, id);           
    try {
        ftp.disconnect();
    } 
    catch (Exception ex) 
    {    
    }
}

private void uploadWork(FTPClient ftp, String id) {

    byte[] buffer = new byte[bufferSize];
    for (int i = 0; i < bufferSize; i++) {
        buffer[i] = 'F';
    }
    OutputStream os = null;
    BufferedOutputStream bos = null;
    long start = System.currentTimeMillis();
    long end = start;
    try {
        ftp.changeWorkingDirectory("/upload");
        os = ftp.storeFileStream(id);
        bos = new BufferedOutputStream(os);
        start = System.currentTimeMillis();
        end = start;
        while (((end - start) <= MPSharkVar.TestDur)) {
            bos.write(buffer, 0, buffer.length);

            end = System.currentTimeMillis();

        }
        } catch (Exception ex) {
            end = System.currentTimeMillis();
        } finally {

                try {
                    bos.flush();
                    bos.close();
                    os.close();      
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

        }
    }

} 
```

# php - 忽略 MySQL 输出中的一个特定行

> ID：15561379
> 
> 赞同：1
> 
> 时间：2013-03-22T01:51:49.453
> 
> 标签：php, mysql

我编写了一个包含用户 MySQL 表的应用程序。以下代码从表中查找酷度等级在当前用户酷度等级的 20% 以内的用户。

```
$query = "SELECT USERNAME FROM USERS WHERE RATING BETWEEN ".$coolnessRating." * 0.8 AND ".$coolnessRating." * 1.2";
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)) {

    echo $row['USERNAME'];
} 
```

我的问题是这样的：如果我有一个用户并且他们的酷度评分是 20，例如，他们自己会在结果集中返回，因为如果有意义的话，他们自己的评分显然在他们评分的 20% 以内。

有没有办法忽略这个特定的行但打印出结果集的其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:54:44.867

“如果我有用户”意味着您有他们的用户名或 ID，对吗？[使用AND](http://www.w3schools.com/sql/sql_and_or.asp)将条件添加到 where 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:54:51.210

您是否只想添加不等于您的 WHERE 标准：

```
SELECT USERNAME 
FROM USERS 
WHERE RATING <> ".$coolnessRating." 
    AND RATING BETWEEN ".$coolnessRating." * 0.8 AND ".$coolnessRating." * 1.2" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T01:55:34.220

放弃通常的“使用 PDO！您的代码易受攻击！” spiel，您将包含另一个 AND“不是此用户”条件

```
$query = "SELECT USERNAME FROM USERS WHERE RATING BETWEEN ".$coolnessRating." * 0.8 AND ".$coolnessRating." * 1.2 AND USERNAME != ".$user."";
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)) {

    echo $row['USERNAME'];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T01:56:13.590

只需将其与 WHERE 子句的另一部分一起过滤掉：

```
SELECT USERNAME
FROM USERS
WHERE RATING BETWEEN $coolnessRating * 0.8 AND $coolnessRating * 1.2
AND USER_ID != $current_user_id 
```

（显然最后一行取决于列名是什么以及您如何存储当前用户 ID）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T01:58:21.663

首先，您需要从当前用户那里获取信息，例如他们的 id 或用户名。

然后你可以做

```
$query = "SELECT USERNAME FROM USERS WHERE RATING BETWEEN ".$coolnessRating." * 0.8 AND ".$coolnessRating." * 1.2 AND id != " . $id; 
```

或者

```
$query = "SELECT USERNAME FROM USERS WHERE RATING BETWEEN ".$coolnessRating." * 0.8 AND ".$coolnessRating." * 1.2 AND id != " . $username; 
```

其中 $username 和 $id 是当前用户的 id 和用户名

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T01:55:51.037

为什么不让你的条件 < 20% 我不知道，因为你没有提到预期的传递值

# linux - 如何使用 bash 在 Linux 上删除多个文件中的多行

> ID：15561381
> 
> 赞同：1
> 
> 时间：2013-03-22T01:52:01.317
> 
> 标签：linux, bash, replace, sed, find

我正在尝试从我的 Linux 共享主机上的所有 Javascript 文件中删除 2 行。我想在不编写脚本的情况下做到这一点，因为我知道这应该可以使用`sed`. 我目前的尝试如下所示：

```
find . -name "*.js" | xargs sed -i ";var 
O0l='=sTKpUG" 
```

第二行实际上比这更长，但是是恶意代码，所以我没有在这里包含它。正如你猜到的，我的服务器被黑了，所以我需要清理所有这些 JavaScript 文件。

我忘了提到我现在得到的输出是：

```
sed: -e expression #1, char 4: expected newer version of sed 
```

这两行连续如下：

;var

O0l='=sTKpUG

除了第二行更长，但第二行的其余部分不应该影响命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:20:16.117

他的意思是删除两条相邻的线。

你可以这样做，记得备份你的文件。

```
find . -name "*.js" | xargs sed  -i -e "/^;var/N;/^;var\nO0l='=sTKpUG/d" 
```

由于 sed 逐行处理输入文件，它不会将换行符 '\n' 存储在其缓冲区中，因此我们需要通过使用标志 /N 来告诉它在下一行附加换行符。

```
/^;var/N; 
```

然后我们进行模式搜索和删除。

```
/^;var\nO0l='=sTKpUG/d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:20:29.837

目前还不清楚这两行是什么样的，也不清楚它们在 JavaScript 中是否彼此相邻，所以我们假设不是。然而，答案很可能是：

```
find . -name "*.js" |
xargs sed -i -e '/^distinctive-pattern1$/d' -e '/^alternative-pattern-2a$/d' 
```

还有其他`sed`使用单个命令字符串编写脚本的方法；我更喜欢为单独的操作使用单独的参数（它使脚本更清晰）。

显然，如果您需要在其中一行保留一些信息，您可以使用适当调整的搜索模式，然后进行替换`s/short-pattern//`而不是`d`删除必须删除的短部分。如果相关的话，与长线类似。

# google-maps - 将 3D 形状拖到 Google 地图上？

> ID：15561393
> 
> 赞同：0
> 
> 时间：2013-03-22T01:53:11.363
> 
> 标签：google-maps, 3d, drag-and-drop, draggable

我想允许用户将 3D 形状拖到谷歌地图上。想象一张地图，在卫星视图中放大到一个社区，用户可以将一个形状（模拟建筑物）拖到该地图上，并了解该建筑物对该社区的影响。我在网上没有找到任何这样的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:49:52.180

为什么是 3D？如果您想在“街景”级别执行此操作，那么这比 StackOverflow 问题的范围要大得多——它基本上是一个研究项目。

我将从谷歌搜索以下术语开始：

1.  重新照明
2.  重新渲染
3.  重投影
4.  代理几何

如果它是 2D 地图，那么它很容易做到，我不确定您需要帮助的部分。

# ruby-on-rails - 我怎样才能给我的用户他们自己的个人资料

> ID：15561395
> 
> 赞同：0
> 
> 时间：2013-03-22T01:53:17.673
> 
> 标签：ruby-on-rails

我有一个汽车评论网站，用户可以在其中评论汽车，查看新闻文章并撰写有关某些汽车的个人博客等。我使用设计制作了一个登录系统，用户可以在其中登录和注销。但是，我对如何让会话正常工作感到困惑。即用户可以从他们的帐户写评论，其他人可以看到它，但不允许编辑或更改它。对不起我的措辞不好。我希望我的用户拥有自己的个人帐户，如果您愿意，可以使用 Facebook 个人资料。他们是否有任何可以提供帮助的教程或宝石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:07:27.390

Michael Hartl 提供了一个极好的资源， [http: //ruby.railstutorial.org/book/ruby-on-rails-tutorial](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial)

前 7-8 章涵盖了用户登录和会话管理。

# git - Git：如何检查本地分支是否有任何被跟踪的远程没有的提交？

> ID：15561398
> 
> 赞同：3
> 
> 时间：2013-03-22T01:53:25.453
> 
> 标签：git

需要在脚本中执行此操作。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:18:22.853

我使用以下命令（作为别名）列出所有未推送到远程存储库的本地提交。

```
log --oneline --decorate=short --graph --all --branches --not --remotes 
```

这需要修改以在脚本中使用，并且可能有管道命令可以做同样的事情，但我发现它很有用。

关键在于最后几个论点：

*   `--all`包括所有的参考`refs/`——如果你只想要当前分支的提交，你可能不想要这个。
*   `--branches`包括所有 refs `refs/heads`- 将其保留为当前或明确指定一个分支以限制提交列表。
*   `--not --remotes`包含魔法——确保没有列出的提交在`refs/remotes`.

**编辑 >** 看起来`git rev-list ...`管道命令具有相似的参数，但我还没有测试过它是否工作相同。建议将管道命令用于脚本，因此请查看它——[手册页](https://www.kernel.org/pub/software/scm/git/docs/git-rev-list.html)以供参考。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:13:38.230

如果情况是这样的：

```
 /--a--b--c  myBranch [local branch]
     /
----x <- [closest common ancestor]
     \
      \--e--f  origin/myBranch [tracked remote] 
```

*   `git status`将显示一条消息`myBranch..origin/myBranch [ahead 3, behind 2]`-`ahead 3`表示您的本地分支比最近的共同祖先提前 3 次提交，`behind 2`表示远程分支比最近的共同祖先提前 2 次提交
*   `git log origin/myBranch..myBranch`将显示有关提交的日志`a-b-c`- 它将显示提交的日志，范围从两个分支的共同祖先到`myBranch`
*   `git log myBranch..origin/myBranch`将显示有关提交的日志`e-f`- 它将显示提交的日志，范围从两个分支的共同祖先到`origin/myBranch`

您可以在这些命令中添加您喜欢的任何选项，例如：`git log --oneline --decorate origin/myBranch..myBranch`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:09:02.810

**您可以使用“git fetch”**命令获取最新的更改信息，然后如果您在跟踪的分支上执行“ **git status”**，它应该会显示未推送到服务器的提交数量或当前分支的距离在后面。

使用**fetch**命令不会在您的本地分支中应用更改，为此，您必须使用**'git merge origin/branch_name'**合并它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T01:56:41.093

`git status`指示当前分支在跟踪分支之后的距离。您可以在脚本中运行它并解析输出。可能还有一个管道命令可以更直接地为您提供信息。

# ruby-on-rails - 简单的 rails 关联

> ID：15561399
> 
> 赞同：0
> 
> 时间：2013-03-22T01:53:33.147
> 
> 标签：ruby-on-rails, associations

我是 RoR 的新手。我正在尝试创建一个基本的 Web 应用程序，其中配置文件页面显示属于特定配置文件的项目列表。

到目前为止，我有：

```
rails generate scaffold Profile name:string
rails generate scaffold Item description:string
rake db:migrate 
```

在配置文件模型中：`has_many :items`在项目模型中：`belongs_to :profile`

当我尝试创建新配置文件时，我收到错误：

```
undefined method `item' for #<Profile 
```

配置文件控制器

```
class ProfilesController < ApplicationController
  # GET /profiles
  # GET /profiles.json
  def index
    @profiles = profile.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @profiles }
    end
  end

  # GET /profiles/1
  # GET /profiles/1.json
  def show
    @profile = profile.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @profile }
    end
  end

  # GET /profiles/new
  # GET /profiles/new.json
  def new
    @profile = profile.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @profile }
    end
  end

  # GET /profiles/1/edit
  def edit
    @profile = profile.find(params[:id])
  end

  # POST /profiles
  # POST /profiles.json
  def create
    @profile = profile.new(params[:profile])

    respond_to do |format|
      if @profile.save
        format.html { redirect_to @profile, notice: 'profile was successfully created.' }
        format.json { render json: @profile, status: :created, location: @profile }
      else
        format.html { render action: "new" }
        format.json { render json: @profile.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /profiles/1
  # PUT /profiles/1.json
  def update
    @profile = profile.find(params[:id])

    respond_to do |format|
      if @profile.update_attributes(params[:profile])
        format.html { redirect_to @profile, notice: 'profile was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @profile.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /profiles/1
  # DELETE /profiles/1.json
  def destroy
    @profile = profile.find(params[:id])
    @profile.destroy

    respond_to do |format|
      format.html { redirect_to profiles_url }
      format.json { head :no_content }
    end
  end
end 
```

配置文件 index.html.erb

```
<h1>Listing profiles</h1>

<table>
  <tr>
    <th>Name</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @profiles.each do |profile| %>
  <tr>
    <td><%= profile.name %></td>
    <td><%= link_to 'Show', profile %></td>
    <td><%= link_to 'Edit', edit_profile_path(profile) %></td>
    <td><%= link_to 'Destroy', profile, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New profile', new_profile_path %> 
```

个人资料_show.html.erb

```
<%= simple_form_for(@profile) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :name %>
  </div>

  <div class="form-inputs">
    <%= f.input :item %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

完整的错误跟踪：

```
activemodel (3.2.12) lib/active_model/attribute_methods.rb:407:in `method_missing'
activerecord (3.2.12) lib/active_record/attribute_methods.rb:149:in `method_missing'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:1161:in `value_before_type_cast'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:1149:in `value_before_type_cast'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:1043:in `block in to_input_field_tag'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:1043:in `fetch'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:1043:in `to_input_field_tag'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:692:in `text_field'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:1284:in `text_field'
simple_form (2.1.0) lib/simple_form/inputs/string_input.rb:13:in `input'
simple_form (2.1.0) lib/simple_form/wrappers/many.rb:29:in `block in render'
simple_form (2.1.0) lib/simple_form/wrappers/many.rb:27:in `each'
simple_form (2.1.0) lib/simple_form/wrappers/many.rb:27:in `render'
simple_form (2.1.0) lib/simple_form/wrappers/many.rb:29:in `block in render'
simple_form (2.1.0) lib/simple_form/wrappers/many.rb:27:in `each'
simple_form (2.1.0) lib/simple_form/wrappers/many.rb:27:in `render'
simple_form (2.1.0) lib/simple_form/wrappers/root.rb:15:in `render'
simple_form (2.1.0) lib/simple_form/form_builder.rb:117:in `input'
app/views/profiles/_form.html.erb:9:in `block in _app_views_profiles__form_html_erb___911765346923063960_2183588380'
actionpack (3.2.12) lib/action_view/helpers/capture_helper.rb:40:in `block in capture'
actionpack (3.2.12) lib/action_view/helpers/capture_helper.rb:187:in `with_output_buffer'
actionpack (3.2.12) lib/action_view/helpers/capture_helper.rb:40:in `capture'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:607:in `fields_for'
actionpack (3.2.12) lib/action_view/helpers/form_helper.rb:378:in `form_for'
simple_form (2.1.0) lib/simple_form/action_view_extensions/form_helper.rb:29:in `block in simple_form_for'
simple_form (2.1.0) lib/simple_form/action_view_extensions/form_helper.rb:48:in `with_simple_form_field_error_proc'
simple_form (2.1.0) lib/simple_form/action_view_extensions/form_helper.rb:28:in `simple_form_for'
app/views/profiles/_form.html.erb:1:in `_app_views_profiles__form_html_erb___911765346923063960_2183588380'
actionpack (3.2.12) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.12) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.12) lib/action_view/template.rb:143:in `render'
actionpack (3.2.12) lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
actionpack (3.2.12) lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
actionpack (3.2.12) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.12) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.12) lib/action_view/renderer/partial_renderer.rb:237:in `render'
actionpack (3.2.12) lib/action_view/renderer/renderer.rb:41:in `render_partial'
actionpack (3.2.12) lib/action_view/helpers/rendering_helper.rb:27:in `render'
app/views/profiles/new.html.erb:3:in `_app_views_profiles_new_html_erb___3444063506780261827_2182112400'
actionpack (3.2.12) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.12) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.12) lib/action_view/template.rb:143:in `render'
actionpack (3.2.12) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
actionpack (3.2.12) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.12) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.12) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
actionpack (3.2.12) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.12) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.12) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.12) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.12) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.12) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.12) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.12) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.12) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.12) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.12) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.12) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.12) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.12) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.12) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.12) lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
app/controllers/profiles_controller.rb:29:in `new'
actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.12) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.12) lib/active_support/callbacks.rb:414:in `_run__312850119216024862__process_action__607287929354052739__callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.12) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.12) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.12) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.12) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.12) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:601:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.12) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `_run__1382692569756144731__call__1219384665416315194__callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.12) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.12) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.12) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.12) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.12) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.12) lib/rails/engine.rb:479:in `call'
railties (3.2.12) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.12) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:00:24.797

为了`has_many :items`工作，你需要`profile_id:integer`在你的`Item`模型中有一个。

您可以通过执行以下命令来完成

```
rails g migration add_profile_id_to_items profile_id:integer
rake db:migrate 
```

这应该创建关联所需的外键。

之后你应该能够做这样的事情

```
@profile = Profile.create name: "MyProfile"
@item = @profile.items.build description: "This is my awesome item"
@item.save 
```

有多种方法可以为配置文件创建项目，但这是最直接的方法。然后要检索这些项目，你会做这样的事情

```
@profile = Profile.find(some_id)
@items = Item.where(profile_id: @profile.id).all 
```

或者

```
@profile = Profile.find(some_id)
@items = @profile.items 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T14:55:02.160

First of all, your Profile object does not have 'item' field. Check your object's attributes by executing these commands:

```
rails console
Profile.connection
Profile 
```

or visit your `db/schema.rb` file

You will see that there is no attribute :item in your object's hash.

You probably want to show the profile's items in your `show.html.erb` view. First though, you need to create an `Item` of the profile that it belongs to like so:

```
item = Item.new(description: "Test description", profile_id: 1) 
```

Then you can do:

```
Profile.first.items 
```

Second, you have an error in your controller. Object's class should be capitalized, so:

```
rails console
profile = profile.new(name: "Test profile") 
```

will raise an error

```
undefined method `new' for nil:NilClass 
```

# c# - 使用 while(true) 循环创建线程是否比在 C# 中使用计时器更好？

> ID：15561401
> 
> 赞同：4
> 
> 时间：2013-03-22T01:54:05.580
> 
> 标签：c#

我知道 C# 允许使用计时器：

```
System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
timer.Interval = 1000/60;
timer.Tick += new EventHandler(TimerEventProcessor);
timer.Start();

private static void TimerEventProcessor(Object myObject, EventArgs myEventArgs)
{
    //Do something
} 
```

但是，我在[这个 YouTube 教程](http://www.youtube.com/watch?v=gqp1z8KbG6E)中看到，他们没有使用`Timer`他们创建了一个实现自己的计时器的线程：

```
var task = new Task(Run());
task.start();

protected void run ()
{
    while (true)
    {
        Thread.sleep(1000/60);
        //Do something
    }
} 
```

使用第二种方法比使用更简单的方法有什么好处`Timer`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:08:22.957

`System.Windows.Forms.Timer`由于各种原因，有一些计时方法比它更好，但没有一个包括您自己的线程管理（这是一种资源浪费，因为每个线程都有大量的内存开销）。

[**比较 .NET Framework 类库中的计时器类**](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

这是文章底部的表格：

```
+---------------------------------------+----------------------+---------------------+------------------+
|                                       | System.Windows.Forms |    System.Timers    | System.Threading |
+---------------------------------------+----------------------+---------------------+------------------+
| Timer event runs on what thread?      | UI thread            | UI or worker thread | Worker thread    |
| Instances are thread safe?            | No                   | Yes                 | No               |
| Familiar/intuitive object model?      | Yes                  | Yes                 | No               |
| Requires Windows Forms?               | Yes                  | No                  | No               |
| Metronome-quality beat?               | No                   | Yes*                | Yes*             |
| Timer event supports state object?    | No                   | No                  | Yes              |
| Initial timer event can be scheduled? | No                   | No                  | Yes              |
| Class supports inheritance?           | Yes                  | Yes                 | No               |
+---------------------------------------+----------------------+---------------------+------------------+

* Depending on the availability of system resources (for example, worker threads) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T01:57:32.257

虽然这两种方法都不准确，但第一种方法更精确一些：考虑一种情况，您标记的代码`//Do something`需要 100 毫秒。那么调用之间的间隔`//Do something`将是`1000/60+100`，而不是`1000/60`您预期的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T01:57:48.507

在为您提供计时器的平台上，我始终建议您使用计时器，因为它们的实现可能比 with 更有效`Thread.sleep`。问题是完全`sleep`阻塞了线程，只是为了通知另一个线程而浪费了整个线程。

另一方面，计时器可以管理多个时间并且只使用一个线程。它甚至可能使用操作系统提供的一些附加功能。但不仅如此，它甚至可能会考虑一些调度成本以更精确（至少在理论上）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T02:00:15.257

唯一可能的好处可能是卸载到后台线程。在您的示例中，计时器的事件处理程序将在 UI 线程上运行，而后者将在后台线程上运行。

我会使用带有or方法的[Task.Delay](http://msdn.microsoft.com/en-us/library/hh160377.aspx)来代替。`async/await``ContinueWith``Thread.Sleep`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T01:56:25.763

不，绝对没有理由使用第二种方法。

# kendo-ui - KendoUI Grid 以编程方式创建列

> ID：15561403
> 
> 赞同：3
> 
> 时间：2013-03-22T01:54:23.710
> 
> 标签：kendo-ui, kendo-grid

我有一个带有 KendoUI DropDownList 的应用程序，其中填充了数据库中的表列表和最初设置为空数组的列属性的网格：

... 列： [] ...

目的是从列表中选择一个表，将表名发送到服务器，并让服务器返回包含列名和来自“SELECT * FROM table”查询的数据的 JSON 数据。数据按预期返回，第一次我可以按如下方式使用它，其中“self”只是对我的视图/模型中网格的引用：

```
self.columns.removeAll();

for (var i = 0; i < joOutput["Cols"].length; i++) {
   var col = { title: joOutput["Cols"][i], field: joOutput["Cols"][i] };

   self.columns.push(col);
   } 
```

在提取我的数据并将其分配给网格数据源后，网格会正确显示正确的列标题和数据。但是，当我从列表中选择另一个表并从服务器接收数据时，网格显示不会更新，即使通过执行上述代码似乎网格列已更新。屏幕上的结果是列标题是第一个网格中列的名称和第二个查询返回的行中的空行数。

[从http:](http://www.kendoui.com/forums/ui/grid/dynamically-add-new-column.aspx) //www.kendoui.c​​om/forums/ui/grid/dynamically-add-new-column.aspx 的论坛帖子中可以看出，这种对列的动态操作似乎很难做到，但该帖子已经结束了现在已经一岁了，我希望现在能在这方面取得一些进展，尤其是考虑到最近 3 月 20 日发布的新版本的网络广播。所以我想问题仍然存在：我所追求的甚至是可能的还是我是 SOL？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T08:37:16.387

您不能在初始化后动态更改网格的列。但是，您可以创建一个新的网格实例。不要忘记调用`destroy`旧网格的方法。

# php - 为什么本地时间戳等于 UTC 时间戳？

> ID：15561409
> 
> 赞同：0
> 
> 时间：2013-03-22T01:54:59.930
> 
> 标签：php, timezone, utc

如果`date()`格式化本地时间/日期，并`gmdate()`格式化 GMT/UTC 日期/时间，为什么会这样？

```
date_default_timezone_set('America/Los_Angeles');
var_dump(date('U') === gmdate('U')); // true 
```

在命令行上：

```
$ php -r "date_default_timezone_set('America/Los_Angeles'); var_dump(date('U') === gmdate('U'));"
bool(true) 
```

为什么不同时区的本地时间戳等于 UTC 时间戳？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:59:20.857

因为时间戳是自 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）以来的秒数。注意到格林威治标准时间了吗？无论您在哪个时区，时间戳都是相对于该时间和时区的。

你真正想做的是：

```
$local = new DateTime();
$local->setTimeZone(new DateTimeZone('America/Los_Angeles'));
$gmt   = new DateTime();
$gmt->setTimeZone(new DateTimeZone('UTC'));
var_dump($local === $gmt); 
```

# html - 你将如何在 iOS 上的 UIWebView 中创建一个新的本地 HTML 文件？

> ID：15561410
> 
> 赞同：2
> 
> 时间：2013-03-22T01:55:01.287
> 
> 标签：html, ios, uiwebview, local

首先，我想指出我对 Web 开发非常陌生，并且对 iOS 开发更熟悉，所以如果有一些我不理解的基本内容，请原谅。

我已经了解了如何将 HTML 文件放入您的应用程序目录并将其加载到 Web 视图中（[示例](https://stackoverflow.com/questions/6420925/load-resources-from-relative-path-using-local-html-in-uiwebview)）。这很好，但是如何在应用程序中创建新的本地 HTML 文件？这样用户可以创建一个新的 html 文件来输入，然后存储它（基本的文档样式应用程序功能）。也许使用某种 Javascript（我对这种 Javascript 不太熟悉）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T02:11:45.363

您可以像这样构建 HTML `NSString`：

```
// get user input

NSString *userText = @"Hello, world!";

// build the HTML

NSString *html = [NSString stringWithFormat:@"<html><body>%@</body><html>", userText];

// build the path where you're going to save the HTML

NSString *docsFolder = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
NSString *filename = [docsFolder stringByAppendingPathComponent:@"sample.html"];

// save the NSString that contains the HTML to a file

NSError *error;
[html writeToFile:filename atomically:NO encoding:NSUTF8StringEncoding error:&error]; 
```

显然，我只是将其设置`userText`为一些文字，但您显然可以让用户将其键入 a`UITextView`并从那里获取它。

然后，您可以使用以下命令将 HTML 加载到 Web 视图中：

```
[self.webView loadHTMLString:html baseURL:nil]; 
```

或与：

```
NSURL *url = [NSURL fileURLWithPath:filename];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[self.webView loadRequest:request]; 
```

# python - 猜词游戏：不接受对秘密词的猜测

> ID：15561416
> 
> 赞同：0
> 
> 时间：2013-03-22T01:55:33.073
> 
> 标签：python

我正在使用 Python 3.x 并且是相当新的，所以我希望我的要求是有道理的。我应该专注于这个猜词游戏的 for 循环和字符串。这是我到目前为止的（混乱/冗长/杂乱）代码：

```
import sys
import random

def Main():
    PlayAgain = "y"
    print("COP 1000 Project 4 - Courtney Kasonic - Guess the Word Game")
    print("I'm thinking of a word; can you guess what it is?")
    while PlayAgain == "y":
        Words = "apple alphabet boomarang cat catharsis define decide elephant fish goat horizon igloo jackelope ketchup loop limousine monkey night octopus potato quick rebel separate test underway violin world yellow zebra".split()
        SecretWord = random.choice(Words)
        MissedLetters = ""
        CorrectLetters = ""
        ChosenWord = GetWord(Words)
        Guess = FiveLetters(CorrectLetters+MissedLetters)
        for Guess in ChosenWord:
            CorrectLetters = CorrectLetters + Guess
        ShowWord(CorrectLetters, ChosenWord)
        for i in ChosenWord:
            CLetters = ""
            if Guess in ChosenWord:
                Blanks = "_" * len(SecretWord)
                for i in range(len(SecretWord)):
                    if SecretWord[i] in CLetters:
                        Blanks = Blanks[i] + SecretWord[i]
                        print(Blanks)
                        print(CLetters)

def GetWord(List):
    SecretWord = random.choice(List)
    return(SecretWord)

**def FiveLetters(LettersGuessed):
    a = 2
    if a > 1:
        print("Enter five letters to check: ",end="")
        Guess = input()
        if len(Guess) != 5:
            print("Please enter five letters.")
        elif Guess in LettersGuessed:
            print("You already guessed that letter.")
        elif Guess not in "abcdefghijklmnopqrstuvwxyz":
            print("Please enter a letter.")
        else:
            return(Guess)**

def ShowWord(CLetters, SecretWord):
    print("\nHere is the word showing the letters that you guessed:\n")
    CLetters = ""
    Blanks = "_" * len(SecretWord)
    for i in range(len(SecretWord)):
        if SecretWord[i] in CLetters:
            Blanks = Blanks[i] + SecretWord[i]
            print(Blanks)
            print(CLetters)
        return(Blanks, SecretWord, CLetters)

def CheckLetters(Letters):
    Letters = "a b c d e f g h i j k l m n o p q r s t u v w x y z".split()
    for Letters in Word:
        print(Letters)
    return(Letters)

Main() 
```

粗体区域是我遇到问题的地方。只能输入五个字母来“查”看是否在密字中。它只接受像“abcde”这样的输入。它不会接受像“aaaaa”或“muihi”这样的输入，即它不会接受不按顺序或有多个相同字母的猜测。

* * *

我也有下划线的问题。不确定我在那里的代码是否正确。猜对的字母不会替换相应的下划线。

例如：秘密词=狗。如果我猜到字母“mopfe”（虽然我不能因为上面的问题），那么它将打印出没有“o”的“_ _ _”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:27:16.120

假设您不想失败，您将不可避免地提出更多问题。如果您在 StackOverflow 上提出这些问题，您可能应该[阅读常见问题解答](https://stackoverflow.com/faq)。由于您使用的是 python，您可能还应该阅读样式指南（即 PEP 8），评论中提到了它。此代码虽然不完整，但可以帮助您入门。

```
import sys
import random

def main():
    play_again = "y"
    print("COP 1000 Project 4 - Courtney Kasonic - Guess the Word Game")
    print("I'm thinking of a word; can you guess what it is?")

    words = "apple alphabet boomarang cat catharsis define decide elephant fish goat horizon igloo jackelope ketchup loop limousine monkey night octopus potato quick rebel separate test underway violin world yellow zebra".split()
    secret_word = random.choice(words)
    correct_letters = ""

    while play_again == "y":

        guess = five_letters(correct_letters)

        for letter in guess:
            if letter in secret_word:
                correct_letters += letter

        show_word(correct_letters, secret_word)

def five_letters(letters_guessed):

        guess = raw_input("Enter five letters to check: ")

        if len(guess) != 5:
            print("Please enter five letters.")
        elif guess in letters_guessed:
            print("You already guessed that letter.")
        elif guess not in "abcdefghijklmnopqrstuvwxyz":
            print("Please enter a letter.")
        else:
            return guess

def show_word(correct_letters, secret_word):
    print("\nHere is the word showing the letters that you guessed:\n")
    word_display = ""

    for index, letter in enumerate(secret_word):
        if letter in correct_letters:
            word_display += letter
        else:
            word_display += "_"

    print word_display

if __name__ == "__main__":

    main() 
```

# c# - 计算文件中的单词数

> ID：15561420
> 
> 赞同：0
> 
> 时间：2013-03-22T01:55:45.020
> 
> 标签：c#, file

在这种情况下，一个词被定义为一个字母或一个数字。但是，像 \n 这样的东西不被视为一个单词。

在我的代码下面，我试图计算文件中的字数，但是在 for 循环的局部变量声明中我得到了错误`Null Reference exception`。

我不确定为什么会收到此错误。我得到的变量 Line 等于 null 这不应该发生，因为文本文件中确实有一个单词“hello world”。

```
StreamReader sr = new StreamReader(filePath);
while (sr.ReadLine()!=null)
{
    Line =sr.ReadLine();
    for (**int i = 1**; i < (Line.Length+1); i++)
    {
        if (Char.IsLetterOrDigit(Line[i]) == true && Char.IsLetterOrDigit(Line[i - 1]) == true)
        {
            if (LetterRecent == false)
            {
               wordCount = wordCount + 1;
            }
            LetterRecent = true;
        }
        else
        {
             LetterRecent = false;
        }
    }
}

sr.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:59:19.477

您为每行执行两次 ReadLine() 。

您可以执行以下操作：

```
count = 0;
while (line = sr.ReadLine()) {
  char oldChar = 0;
  for (char c in line) {
    if (c != oldChar && Char.IsLetterOrDigit(c)) count++;
    oldChar = c;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:01:01.397

您需要`wordCount`在使用前声明。

```
Int wordCount = 0;
while (sr.ReadLine()!=null)
    { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:03:56.810

更新你的循环条件是这样的：

```
while (sr.Peek() >= 0) 
{
    Line = sr.ReadLine();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T02:07:07.303

您通过调用 sr.ReadLine() 两次来丢弃文件中的一半行。如果在 while 语句中读取文件的最后一行，对 Line.Length 的调用将抛出空引用异常。

试试这个：

```
var wordCount = 0;
var line = sr.ReadLine();
while( line != null ) {
  for( var i = 1; i < line.Length; i++ ) {
    // Count words
  }
  line = sr.ReadLine();
} 
```

# wordpress - Wordpress 插件可在导航中从一页到另一页进行动画处理

> ID：15561424
> 
> 赞同：0
> 
> 时间：2013-03-22T01:55:54.867
> 
> 标签：wordpress, animation, plugins, jquery-animate

我正在寻找一个 wordpress 插件，该插件将在单击主导航后将页面动画化以水平移出页面并将其他页面带入视图。类似于[http://www.maximintegrated.com/](http://www.maximintegrated.com/)

有谁知道这样做的插件？或者怎么做？

# java - 使用 Play 修复 JSON 有效负载中的 htmlspecialchars() 编码数据！和杰克逊

> ID：15561436
> 
> 赞同：0
> 
> 时间：2013-03-22T01:56:42.513
> 
> 标签：java, json, playframework, jackson

我正在使用一个 JSON Web API，它将数据中的所有 &、"、'、< 和 > 字符转换为 &、" 等。看起来它正在使用 PHP 的 htmlspecialchars()。

我有一些处理这个问题的 PHP 代码，比如：

```
function unescape_special_chars(&$value, $key) {
    $value = html_entity_decode($value, ENT_QUOTES, 'UTF-8');
}
...

$response = json_decode($response->getBody(), true);
// the data has been run through htmlspecialchars(), we must undo this
array_walk_recursive($response, 'unescape_special_chars'); 
```

这很好，我不知道也不关心返回的 JSON 对象的结构是什么，但是上面的内容会遍历并修复它。

我需要将此代码重写为 Java，并且我正在使用 Play！框架。我对 Play 很陌生，对 Java 很生疏。到目前为止，这是我在 Play 应用程序中的 util 类中的内容：

```
protected Promise<JsonNode> consumeApi() throws Exception {
    Promise<Response> resultsP = WS.url(REST_URL).post("");
    Promise<JsonNode> jsonNodeP = resultsP.map(new Function<Response, JsonNode>() {
        public JsonNode apply(Response response) throws Throwable {
            // Here I need to "array_walk_recursive" in Java/Jackson
            return response.asJson();
        }
    });
    return jsonNodeP;
} 
```

**我怎样才能在 Java 和/或 Jackson 中做类似的事情？**我有一种感觉，我应该能够遍历 JsonNode 提供的树模型，但我可以在正确的方向上使用一些建议或指针。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:34:00.290

我能够“array_walk_recursive”JsonNode 树并使用自定义的用户提供的回调来修复它，类似于我上面的 PHP 解决方案，具有以下内容：

```
public Promise<JsonNode> consumeApi() throws Exception {
    return WS.url(REST_URL)
            .post("")
            .map(new Function<Response, JsonNode>() {
                public JsonNode apply(Response response) throws Throwable {
                    // BEGIN JACKSON RELEVANT CODE
                    return JsonUtils.walkJsonNode(response.asJson(), new JsonUtils.TextFixer() {
                        public String fix(String string) {
                            return StringEscapeUtils.unescapeHtml4(string);
                        }
                    });
                    // END JACKSON RELEVANT CODE
                }
            });
} 
```

`StringEscapeUtils`是从`org.apache.commons.lang3`。`JsonUtils`好像：

```
public class JsonUtils {
    public interface TextFixer {
        public String fix(String string);
    }

    public static JsonNode walkJsonNode(JsonNode node, TextFixer fixer) {
        if (node.isTextual()) {
            String fixedValue = fixer.fix(node.getTextValue());
            return new TextNode(fixedValue);

        } else {
            if (node.isArray()) {
                ArrayNode array = (ArrayNode)node;
                for (int i = 0; i < array.size(); i++) {
                    JsonNode value = array.get(i);
                    JsonNode fixedValue = walkJsonNode(value, fixer);
                    array.set(i, fixedValue);
                }

            } else if (node.isObject()) {
                ObjectNode object = (ObjectNode)node;
                Iterator<String> ite = object.getFieldNames();
                while (ite.hasNext()) {
                    String fieldName = ite.next();
                    JsonNode value = object.get(fieldName);
                    JsonNode fixedValue = walkJsonNode(value, fixer);
                    object.put(fieldName, fixedValue);
                }
            }

            return node;
        }
    }
} 
```

请注意，这是针对 Jackson 1.9.10 的，它是当前与最新 Play (2.1) 一起提供的；Jackson 2.x 有一些不同之处。如果有人有任何改进建议，请发表评论。希望这堵代码墙对未来与杰克逊合作的谷歌员工有所帮助。

# c - 如何在我的 .C 文件中声明结构？

> ID：15561437
> 
> 赞同：1
> 
> 时间：2013-03-22T01:56:48.273
> 
> 标签：c, struct, header, structure, declare

我必须在 C 中实现一个链表，并且根据项目规范，必须在我的头文件中创建以下结构：

```
typedef struct node {
char *string;
struct node* next;  
} 

typedef struct {
node *head;  /* could have been struct node* as well */
node *tail;
} list; 
```

现在如何使这些在我的 .C 文件中可用？我已经 #included 头文件，但是当我尝试调用例如 myList.head 时，我不断收到错误消息，指出我正在尝试对不是结构或联合的东西执行操作，所以我该怎么做解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:02:58.340

你`typedef`错了。语法是：

```
typedef [some_type_definition] [type_name]; 
```

类型定义是这样的：

```
struct node {
    char *string;
    struct node* next;
}; 
```

所以你需要给它加上前缀`typedef`和后缀`node`（在分号之前）。这将允许您使用`node`或来引用结构`struct node`。

对于您的列表，您没有命名结构，但您做到`typedef`了。这意味着您不能将其称为`struct list`- 您必须使用 just `list`。如果需要，您可以命名该结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T01:58:08.880

您需要在第一个`struct`. 要么摆脱你的`typedef`，要么给它一个名字。

# git - 使用 brew 的 git 更新问题

> ID：15561438
> 
> 赞同：0
> 
> 时间：2013-03-22T01:56:50.673
> 
> 标签：git

我正在使用 brew 来更新 git。它说它已经完成了更新，我现在有 1.8.2（耶！）

不幸的是仍然存在问题

`git --version`仍然返回`git version 1.7.12.4 (Apple Git-37)`
`where git`返回`/usr/bin/git`

`/usr/bin/`我去了，我确保我的路径是正确的，因为如果我在我面前，那会搞砸`/usr/local/bin`

`echo $PATH`回来`/usr/local/bin:...:/usr/bin:/bin:/usr/sbin:/sbin`

我显然遗漏了任何想法或评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:07:10.223

我修改了 .bash_profile 文件中的 PATH 变量，如下所示：

```
export PATH=/usr/local/bin:/usr/bin/:/bin/usr/sbin:/sbin 
```

它工作得很好。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:12:11.243

你的意思是`which git`代替`where git`吗？

你能检查一下内容`/usr/local/bin`以检查是否`git`有吗？

`ls -l /usr/local/bin`

尝试从新的终端窗口检查 PATH 的内容，以查看它是否已正确设置`/usr/local/bin`。

# java - 如何根据其中一个属性对一组对象进行排序？

> ID：15561440
> 
> 赞同：0
> 
> 时间：2013-03-22T01:57:20.940
> 
> 标签：java

我有一个名为 Contact 的对象，它有很多属性。我还有一个名为 Contact_List 的联系人数组，我必须为 Contact_List 编写一个方法，该方法将向其添加一个联系人对象。这部分很简单，但它必须确保其中的所有联系人都根据他们的姓氏排列。我已经有一个名为 getLastName 的访问器，它返回他们姓氏的字符串，但是如何使该方法添加联系人并对其进行排序？请帮忙，这是一个半小时后到期！

```
 public void add(Contact frnd)
 {
     if(numContacts == MAX_CONTACTS) // If the List is already full
     {
      System.out.println("The Contact List is already at Maximum Capicity");
     }
     else
     {
      numContacts += 1; // There is one more Contact
      Contact_List[numContacts - 1] = frnd; // Assigns the Last Open Spot the new Contact
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:00:40.247

看看[`Arrays.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)which 接受一个`Comparator`你可以实现任何你想要为你的对象排序的逻辑的地方。`Collections.sort()`如果您想对`List`s 而不是数组进行排序，还有一个。

编辑：我不太确定我在做正确的事情，但我会尝试用如何在 Java 中实现这样的要求来回答你的具体问题。但是，如果您必须在内部使用数组并处理数组（重新）分配并手动实现排序逻辑，这将不是很有帮助。

```
private final Set<Contact> contacts = new TreeSet<Contact>( new Comparator<Contact>() {
    @Override
    public int compare(Contact c1, Contact c2) {
        return c1.getLastName().compareTo(c2.getLastName());
    }
});

public void add(Contact contact) {
    contacts.add(contact);
}

public Contact[] getContacts() {
    return contacts.toArray(new Contact[contacts.size()]);
} 
```

此外，如果姓氏提供了这些联系人的*自然*顺序，我宁愿让`Contact`类实现`Comparable`，从而消除`Comparator`为`TreeSet`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:17:53.447

这可以工作

```
public static void add(Contact frnd) {
    if (contactList.length == MAX_CONTACTS) {
        throw new IllegalStateException("The Contact List is already at Maximum Capicity");
    }
    int i = Arrays.binarySearch(contactList, frnd, new Comparator<Contact>() {
        public int compare(Contact o1, Contact o2) {
            return o1.getLastName().compareTo(o2.getLastName());
        }
    });
    if (i < 0) {
        i = -i - 1;
    }
    Contact[] temp = new Contact[contactList.length + 1];
    System.arraycopy(contactList, 0, temp, 0, i);
    temp[i] = frnd;
    if (i < contactList.length) {
        System.arraycopy(contactList, i, temp, i + 1, contactList.length - i);
    }
    contactList = temp;
} 
```

但是对于这个任务 List 或 TreeSet 似乎更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:14:56.200

您可以为您的示例做的最简单的事情是在将元素添加到数组时对其进行排序。

你会更换你的

```
 numContacts += 1; // There is one more Contact
  Contact_List[numContacts - 1] = frnd; // Assigns the Last Open Spot the new Contact 
```

使用遍历数组并找到插入项目的正确位置的代码。而不是简单地将项目放在最后。

例如，假设您的数组中有四个具有这些姓氏的人。

```
Anthony
Adam
Cindy
Dirk 
```

现在您插入联系人 Brian

您可能希望循环遍历数组，检查第一个位置是否属于第 0 个索引。在这种情况下，安东尼出现在布赖恩之前，所以它没有。然后你检查第一个索引，但在这种情况下，亚当在布赖恩之前，所以它没有。然后检查第二个索引。啊哈！布莱恩在亚当之后，但在辛迪之前。这是将 Brian 插入数组的正确位置。现在你的数组看起来像这样。

```
Anthony
Adam
Brian
Cindy
Dirk 
```

如果以这种方式编写“插入”方法，则可以保证在添加项目时数组始终保持排序。通过使用 ArrayList 而不是数组，您的生活将变得更加轻松。在我使用 Java 的所有时间里，我 99.9% 的时间都在使用 ArrayList 而不是 Array。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T03:09:33.683

简单的解决方案是在下一个位置添加联系人（就像您现在所做的那样），然后在添加后对数组进行排序，因此它始终处于正确的排序顺序：

添加最后一个联系人后，使用自定义比较器进行排序：

```
if (numContacts == MAX_CONTACTS) {
Arrays.sort(contacts, new Comparator<Contact>() {
    public int compare(Contact o1, Contact o2) {
        return o1.getLastName().compareTo(o2.getLastName());
    }
});
} 
```

另外，这两行：

```
numContacts += 1;
Contact_List[numContacts - 1] = frnd; 
```

可以简单地替换为：

```
Contact_List[numContacts++] = frnd; 
```

# android - 将触摸屏添加到非触摸式 Android 设备

> ID：15561447
> 
> 赞同：1
> 
> 时间：2013-03-22T01:57:40.850
> 
> 标签：android, kernel, touchscreen, odroid

我正在尝试使用 ODROID-X2 实现 PQ Labs 触摸面板。我设法编译并插入了内核模块，并创建了一个设备。dmesg 显示触摸面板被识别，如果我 cat 设备，我会得到稳定的数据流。我知道该设备已被识别并正在通信。

不幸的是，触摸事件不会传递到 UI。我被困在这一点上，因为我对 HAL 的了解非常有限。

如何从我的 PQ Labs 触控面板获取原始输入以传递到 UI 并给我触控事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:04:26.877

Android 配备了输入设备配置文件，用于描述输入法。这里有一个全面的解释。

[http://source.android.com/tech/input/input-device-configuration-files.html](http://source.android.com/tech/input/input-device-configuration-files.html)

您可能需要为您的触摸屏设备添加一个 idc 文件。

# ios - 停止 UINavigationBar 覆盖内容

> ID：15561449
> 
> 赞同：2
> 
> 时间：2013-03-22T01:57:45.433
> 
> 标签：ios, ios6, uinavigationbar

我在我的应用程序中使用 UINavigationController，它工作得比较好。在我的集合视图中显示标题时，导航栏似乎已设置为堆栈中较高的位置，从而允许在其下方呈现内容。

有谁知道我如何在导航栏下方而不是下方呈现标题？

非常感谢任何帮助！

**编辑**

如果有帮助，我运行了以下命令：

```
NSLog(@"Navigation Bar Bounds %@", NSStringFromCGRect(self.navigationController.navigationBar.bounds));
NSLog(@"Navigation Bar Frame %@", NSStringFromCGRect(self.navigationController.navigationBar.frame));
NSLog(@"Collection View Bounds %@", NSStringFromCGRect(self.collectionView.bounds));
NSLog(@"Collection View Frame %@", NSStringFromCGRect(self.collectionView.frame)); 
```

输出如下：

```
[4058:907] Navigation Bar Bounds {{0, 0}, {320, 44}}
[4058:907] Navigation Bar Frame {{0, 20}, {320, 44}}
[4058:907] Collection View Bounds {{0, 0}, {320, 504}}
[4058:907] Collection View Frame {{0, -22}, {320, 504}} 
```

**编辑结束**

我上传了以下图片来演示该问题：

故事板内部：

![在我的故事板里面](../Images/49c6817657a5aa62001a05eaca412f3f.png)

当应用程序加载以及导航栏隐藏的内容时：

![应用程序打开时](../Images/ec94d9a1949f48ed24184049179f2b1a.png) ![导航栏隐藏的内容](../Images/910bb022bb2ee854da201e7b24c6f962.png)

完整的故事板，显示了导航控制器和根视图控制器。UICollectionView 是 HomeViewController.h 文件中的一个 IBOutlet。

![完整的故事板](../Images/a7343232e5cb2753e4dec1e50ccf8b15.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:35:08.893

我认为您需要将 ViewController 的“tob bar”更改为“Navigation Bar”，然后将控件放在上面

检查这张图片

![在此处输入图像描述](../Images/76258af5f1e0cdf477ae698c39aa855c.png)

# objective-c - iOS 6 禁止使用 UDID 进行推送通知？

> ID：15561450
> 
> 赞同：1
> 
> 时间：2013-03-22T01:57:47.443
> 
> 标签：objective-c, ios6, apple-push-notifications, udid

从 2013 年 5 月 1 日起，**[Apple 将停止接受访问唯一设备标识符 (UDID) 的应用程序](https://developer.apple.com/news/index.php?id=3212013a)**。听起来`didRegisterForRemoteNotificationsWithDeviceToken:`，将不再通过 UDID 作为设备令牌；但到目前为止，iOS 6.0 似乎并非如此。

为了解决这个问题并对冲我的应用被拒绝的风险，我发现**[了这个 SO question](https://stackoverflow.com/questions/11836225/ios6-udid-what-advantages-does-identifierforvendor-have-over-identifierforadve)**，他们建议使用它`ASIdentifierManager`来检查用户是否为应用启用了广告跟踪，然后获取`advertisingIdentifier`，并将其用作设备令牌。`registerForRemoteNotificationTypes`在为我的服务器上的推送通知注册设备之前，我应该在内部执行此操作，还是简单地信任我通过的任何内容`deviceToken`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:00:08.670

我认为您没有必要如此急切地放弃 UDID。Apple 明确删除了使用 UDID 的应用程序，但是 APS 系统不使用 UDID，它使用设备令牌。从有关该方法的文档中：

> 设备令牌
> 
> 向 APS 标识设备的令牌。令牌是一种不透明的数据类型，因为这是提供者在向设备发送通知时需要提交给 APS 服务器的形式。出于性能原因，APS 服务器需要二进制格式。
> 
> **请注意，设备令牌与 UIDevice 的 uniqueIdentifier 属性不同，**因为出于安全和隐私原因，它必须在设备被擦除时更改。

在 APNS 领域一切都很好。继续。

# c# - 将图像从 Windows Phone 应用程序发布到 PHP

> ID：15561457
> 
> 赞同：3
> 
> 时间：2013-03-22T01:58:29.227
> 
> 标签：c#, windows-phone-7, encoding, base64

我正在尝试为 Windows Phone 7 开发一个应用程序，该应用程序使用 PHP 将所选图片（来自图片选择器任务）上传到服务器。

我正在尝试使用 HttpWebRequest 来做到这一点。并且数据也成功发布。我面临的问题是在发布之前需要将图像编码为base64。而且，我无法正确编码。

到目前为止，这是我的 C# 代码：

```
public partial class SamplePage : PhoneApplicationPage
    {
        public SamplePage()
        {
            InitializeComponent();
        }

        PhotoChooserTask selectphoto = null;

        private void SampleBtn_Click(object sender, RoutedEventArgs e)
        {
            selectphoto = new PhotoChooserTask();
            selectphoto.Completed += new EventHandler<PhotoResult>(selectphoto_Completed);
            selectphoto.Show();
        }

        void selectphoto_Completed(object sender, PhotoResult e)
        {
            if (e.TaskResult == TaskResult.OK)
            {
                BinaryReader reader = new BinaryReader(e.ChosenPhoto);
                image1.Source = new BitmapImage(new Uri(e.OriginalFileName));
                txtBX.Text = e.OriginalFileName;

                HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://"+QR_Reader.MainPage.txtBlck+"/beamer/saveimage.php");
                request.Method = "POST";
                request.ContentType = "application/x-www-form-urlencoded";

                string str = BitmapToByte(image1);
                MessageBox.Show(str);

                string postData = String.Format("image={0}", str);   

                // Getting the request stream.
                request.BeginGetRequestStream
                (result =>
                {
                    // Sending the request.
                    using (var requestStream = request.EndGetRequestStream(result))
                    {
                        using (StreamWriter writer = new StreamWriter(requestStream))
                        {
                            writer.Write(postData);
                            writer.Flush();
                        }
                    }

                    // Getting the response.
                    request.BeginGetResponse(responseResult =>
                    {
                        var webResponse = request.EndGetResponse(responseResult);
                        using (var responseStream = webResponse.GetResponseStream())
                        {
                            using (var streamReader = new StreamReader(responseStream))
                            {
                                string srresult = streamReader.ReadToEnd();
                            }
                        }
                    }, null);
                }, null);

            }  // end of taskresult == OK           
        }  // end of select photo completed

        private Stream ImageToStream(Image image1)
        {
            WriteableBitmap wb = new WriteableBitmap(400, 400);

            wb.Render(image1, new TranslateTransform { X = 400, Y = 400 });

            wb.Invalidate();
            Stream myStream = new MemoryStream();

            wb.SaveJpeg(myStream, 400, 400, 0, 70);

            return myStream;
        }
        private string BitmapToByte(Image image) //I suspect there is something wrong here
        {
            Stream photoStream = ImageToStream(image);
            BitmapImage bimg = new BitmapImage();
            bimg.SetSource(photoStream); //photoStream is a stream containing data for a photo

            byte[] bytearray = null;
            using (MemoryStream ms = new MemoryStream())
            {
                 WriteableBitmap wbitmp = new WriteableBitmap(bimg);
                 wbitmp.SaveJpeg(ms, wbitmp.PixelWidth, wbitmp.PixelHeight, 0, 100);
                 bytearray = ms.ToArray();
            }
            string str = Convert.ToBase64String(bytearray);
            return str;
        }
    } 
```

BitmapToByte 函数用于将图像转换为 base64 字符串。并且，ImageToStream 函数用于将其转换为流。

现在，我严重怀疑这两个函数有问题。

此外，我为每个图像得到完全相同的 base64 字符串。是的，无论我选择什么图像，我都会得到完全相同的 base64 字符串。这很奇怪。我不知道这有什么问题。

我在这里上传了一个文本文件：http: [//textuploader.com/?p=6&id=vWZy](http://textuploader.com/?p=6&id=vWZy) 它包含那个 base64 字符串。

在服务器端，PHP 成功地接受了 postdata 并且解码工作也很完美（我手动解码了一些 base64 字符串以确保这一点）。我面临的唯一问题是 base64 编码。

请帮我。

**编辑** 我在 ImageToStream 和 BitmapToByte 函数中进行了以下更改：

```
private MemoryStream ImageToStream(Image image1)
        {
            WriteableBitmap wb = new WriteableBitmap(400, 400);

            wb.Render(image1, new TranslateTransform { X = 400, Y = 400 });

            wb.Invalidate();
            MemoryStream myStream = new MemoryStream();

            wb.SaveJpeg(myStream, 400, 400, 0, 70);

            return myStream;
        }

        private string BitmapToByte(Image image)
        {
            MemoryStream photoStream = ImageToStream(image);

            byte[] bytearray = photoStream.ToArray();
            string str = Convert.ToBase64String(bytearray);
            return str;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:15:48.553

您的 BitmapToByte 方法非常复杂。更改`ImageToStream`为返回一个`MemoryStream`和：

```
private string BitmapToByte(Image image)
{
    MemoryStream photoStream = ImageToStream(image);

    byte[] bytearray = photoStream.ToArray();
    string str = Convert.ToBase64String(bytearray);
    return str;
} 
```

# linux - Eclipse IDE 中的 SDL 配置

> ID：15561458
> 
> 赞同：5
> 
> 时间：2013-03-22T01:58:38.457
> 
> 标签：linux, eclipse, opengl, sdl

我正在尝试在 Linux x86 环境（ubuntu）中的 Eclipse 上运行 OpenGL 代码：http: [//nehe.gamedev.net/tutorial/vertex_buffer_objects/22002/](http://nehe.gamedev.net/tutorial/vertex_buffer_objects/22002/) 在命令行中输入后代码将正常运行

> g++ main.cpp error.cpp course45.cpp -o course45 -L/usr/X11R6/lib/ -lGL -lGLU`sdl-config --cflags --libs`

这是make文件中的指令。现在我试图让代码在 Eclipse 上运行，我知道我必须设置链接器库 GL 和 GLU 以及链接器库目录 /usr/X11R6/lib/。但是，关于`sdl-config --cflags --libs`，我不确定如何在 Eclipse 中配置它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-23T17:34:41.907

创建一个新的 C++ 项目（文件 > 新建 > C++ 项目）。你需要选择一个工具链——Linux GCC。

如果要使用 C++11，请执行以下操作：

1.  右键单击“包资源管理器”下的项目，然后选择属性。
2.  选择（C/C++ 构建 > 设置 > GCC C++ 编译器 > 其他）
3.  在“其他标志”下添加：-std=c++0x
4.  单击应用然后确定

配置 Eclipse 以使用 SDL2

1.  右键单击“包资源管理器”下的项目，然后选择属性。
2.  选择（C/C++ 常规 > 路径和符号 > 库）
3.  单击“添加”并添加“SDL2”，然后单击确定
4.  单击“添加”并添加“SDL2main”，然后单击确定

这个过程已经过测试并确认有效，尽管我不认为它有任何功劳。来自[这里的信息](http://zxiiro.wordpress.com/2013/08/08/setting-up-eclipse-cdt-for-sdl2-development/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:06:47.027

如果您找不到更文明的方式来配置 Eclipse，您可以随时从`sdl-config`调用中提取此信息并手动配置设置：

```
## Compiler flags
$ sdl-config  --cflags
-I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT

## Linker flags
$ sdl-config  --libs
-L/usr/lib/x86_64-linux-gnu -lSDL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T04:47:59.370

我将尝试结合先前给出的建议提供更全面的答案。在带有 Eclipse Mars 版本 4.5.1 的 Fedora22 系统上，这对我有用。正如@Zammalad 建议的那样，首先进行一些更改

*   创建一个新的 C++ 项目（***文件 > 新建 > C++ 项目***）。
*   您将需要选择一个工具链 - ***Linux GCC***。

## 如果要使用 C++11，请执行以下操作：

*   右键单击“Package Explorer”下的项目，然后选择***Properties***。
*   选择（***C/C++ 构建 > 设置 > GCC C++ 编译器 > 方言***）
*   在“<strong>*语言标准*”下选择：“ *ISO C++11 (-std=c++0x)* ”。单击应用，然后单击确定。

## 配置 Eclipse 以使用 SDL2

在这一步，我建议采用@esperanto 的方法来使用系统的终端/shell 来查找或验证系统上 SDL2 所需文件/库的存在/位置。

首先，如果您想在系统上找到必要库的位置，在终端中执行以下命令将为您提供“包含”位置和其他编译器/预处理器标志

```
$ sdl2-config --cflags 
```

同样，列出库/链接器标志

```
$ sdl2-config --libs 
```

例如，在我的 Fedora22（64 位）系统上，输出如下所示

```
$ sdl2-config --cflags --libs
-I/usr/include/SDL2 -D_REENTRANT
-lSDL2 -lpthread 
```

您可以在没有与 eclipse 相关的项目文件的单独临时目录中测试编译 - 即只有源文件 - 如下所示：

```
$ mkdir /tmp/testing
$ cp -r main.cpp error.cpp lesson45.cpp /tmp/testing/.
$ cd /tmp/testing
$ g++ `sdl2-config --cflags --libs` -o lesson45 main.cpp error.cpp lesson45.cpp 
```

* * *

现在，要在 Eclipse 中使用 SDL2 库/路径，请从`sdl2-config --libs`输出中添加必要的库

*   右键单击“Package Explorer”下的项目，然后选择***Properties***。
*   选择（***C/C++ 常规 > 路径和符号 > 库***）
*   单击“<strong>*添加*”并键入`SDL2`并单击确定
*   单击“<strong>*添加*”并键入`pthread`并单击确定

从`sdl2-config --cflags`输出中添加预处理器指令

*   右键单击“Package Explorer”下的项目，然后选择***Properties***。
*   选择（***C/C++ 构建 > 设置 > GCC C++ 编译器 > 预处理器**）
*   在“已***定义符号 (-D)*** ”下，单击“添加”图标
*   键入`_REENTRANT`并单击确定

# mysql - 使用 MySQL 数据库上的日期范围删除 WP 帖子的 SQL 查询

> ID：15561467
> 
> 赞同：0
> 
> 时间：2013-03-22T01:59:22.450
> 
> 标签：mysql, database, wordpress, phpmyadmin

我正在将新闻聚合 WP 网站迁移到商业服务。我们目前有超过 14,000 个帖子。

我们希望保存当前数据库并在不同的域名下重用它以用于历史目的。

一旦我们移动到新站点，我们想要修剪所有帖子和相关表的 WP 数据库，这些帖子和相关表早于 2013 年 1 月 1 日

我知道如何做一个简单的选择删除查询。

但是 WP 论坛模块告诉我，我应该对下表进行内部连接，以确保我清理所有内容：

wp_postmeta

wp_term_relationships

wp_comments

wp_commentmeta

我不熟悉内部连接。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:03:29.993

不完全了解所涉及的表结构，`INNER JOIN`将一个表连接到另一个表并返回基于特定条件匹配的记录（通常将两个字段连接在一起，例如主键和外键）。

要从一个表中删除部分或全部位于另一表中的记录，将使用以下语法：

```
DELETE TableName
FROM TableName
INNER JOIN AnotherTable ON TableName.id = AnotherTable.id 
```

[这是 JOINS 的一个很好的视觉表示。](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# java - 使用 NetBeans 连接到 GAE

> ID：15561476
> 
> 赞同：0
> 
> 时间：2013-03-22T02:00:15.733
> 
> 标签：java, google-app-engine

我有一个 Java EE Web 应用程序，我想使用 NetBeans GAE 插件将它部署到 Google App Engine。我转到 Services>Servers>Add Server 并选择 Google App Engine 服务器，选择 GAE SDK 的位置。在下一个屏幕上，我将输入 GAE 服务器的主机地址，唯一的选项是 localhost - 单击它被禁用。

是部署到插件不支持的实际 GAE Web 服务器，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:14:28.030

设置您的应用程序名称

您的应用程序名称是您在 Google App Engine 网站上创建帐户时为应用程序选择的名称。要设置应用程序名称，请按照以下说明操作：

1.  打开 ./WEB-INF/appengine-web.xml 文件。
2.  设置应用程序名称以匹配您在 Google App Engine 中设置的应用程序名称。

部署您的应用程序

1.  在项目列表中右键单击您的项目
2.  选择“部署到 Google App Engine”</li>
3.  出现提示时填写您的 Google 帐户凭据。

# ios - iOS 中用于 PDF 显示的 Core Graphics 与 WebView

> ID：15561484
> 
> 赞同：1
> 
> 时间：2013-03-22T02:01:04.953
> 
> 标签：ios, objective-c, cocoa-touch, uiwebview, core-graphics

我正在做这个项目，我需要显示 PDF 文件。我有两个选择来做到这一点。

1.  使用 UIWebView
2.  使用核心图形

我已经对这两种方法进行了一些阅读，发现它们都有自己的优点和缺点。例如，

1.  UIWebview 很慢并且占用大量内存，因为它会一次加载整个 PDF，但会处理捏合和点击缩放。

2.  Core Graphics 提供了低级控制，但实现缩放的责任在我身上。

我正在以单个页面的形式从服务器下载 PDF。所以我不能忍受用完太多内存的问题。但我需要显示必须使用 Quartz（核心图形）的缩略图。如果我将两者结合起来会更好吗？用于显示 PDF 的 webview 和用于缩略图的核心图形？

从长远来看，我无法得出关于我想采用哪种技术的结论。对此的任何帮助将不胜感激。

# ajax - SecurityError：在“xml”数据类型上使用 Backbone fetch 时发生 DOM 异常 18

> ID：15561486
> 
> 赞同：0
> 
> 时间：2013-03-22T02:01:19.687
> 
> 标签：ajax, google-chrome, jquery, backbone.js

当我尝试使用主干中的提取来检索“xml”响应时，会发生此错误。

我的获取代码是：

```
itenary.fetch({
data :{date:dayFormatToSend.toString(), advisorId:"0000222186"},
dataType:"xml",
 success:function(response){
  console.log(response);
     } 
```

错误

```
Uncaught Error: SecurityError: DOM Exception 18 backbone-min.js:13
f.extend.set backbone-min.js:13
a.success backbone-min.js:15
c.success backbone-min.js:40
fire jquery-1.8.0.js:973
self.fireWith jquery-1.8.0.js:1080
done jquery-1.8.0.js:7583
callback 
```

仅当我将 dataType 设置为“xml”时才会发生这种情况，否则成功函数将无法成功执行。

我也可以在 chrome 浏览器检查元素窗口的网络窗口中正确看到响应。

这只发生在 chrome 中，它适用于 firefox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T16:22:50.947

我通过在 1.0.0 的第 345 行附近添加一个 try catch 来解决这个问题。像这样：

```
// For each `set` attribute, update or delete the current value.
        for (attr in attrs) {
            try {
                val = attrs[attr];
                if (!_.isEqual(current[attr], val)) changes.push(attr);
                if (!_.isEqual(prev[attr], val)) {
                    this.changed[attr] = val;
                } else {
                    delete this.changed[attr];
                }
                unset ? delete current[attr] : current[attr] = val;
            } catch (err){
                if(window.console) console.log(err);
            }
        } 
```

问题似乎是当它遇到“cookie”属性时，它会变得疯狂并在 Chrome 中引发安全违规。尝试调用 attrs[attr] 等同于导致 Kaboom 的 document[cookie]。不确定 Chrome 中究竟违反了哪些安全策略，但 try catch 允许代码继续执行并根据需要完成请求并按预期交回 xml。

[我在http://jsfiddle.net/ctoestreich/UwRDp/](http://jsfiddle.net/ctoestreich/UwRDp/)将其破解为 1.0.0 分钟

# php - 我可以把一个 $variable 变成一个表吗？

> ID：15561488
> 
> 赞同：1
> 
> 时间：2013-03-22T02:01:35.070
> 
> 标签：php, html, mysql

我按照在线教程创建了一个管理后端，最后在 php 页面的 HTML 标记之前得到了这段代码：

```
<?php 
$product_list = "";
$sql = mysql_query("SELECT * FROM products ORDER BY date_added DESC");
$productCount = mysql_num_rows($sql); // count the output amount

if ($productCount > 0)
{
  while($row = mysql_fetch_array($sql))
  { 
    $id = $row["id"];
    $product_name = $row["product_name"];
    $price = $row["price"];
    $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
    $product_list .= "Product ID: $id - <strong>$product_name</strong> - $$price - <em>Added $date_added</em> &nbsp; &nbsp; &nbsp; <a href='inventory_edit.php?pid=$id'>edit</a> &bull; <a href='inventory_list.php?deleteid=$id'>delete</a><br />";
  }
} 
else 
{
  $product_list = "You have no products listed in your store yet";
}
?> 
```

当我将`<?php echo $product_list; ?>`页面内容放在页面上时，我会检索到这样的列表结果：

```
Product ID: 1 - Strawberries - $10 - Added Mar 22, 2013       edit • delete
Product ID: 2 - Apples 1 - $10 - Added Mar 22, 2013       edit • delete 
```

我想要的是把它放在一个对称的列表视图中，就像一个表格一样，以呈现结果和编辑/删除选项。试图放置一张 1 行 5 列的表格，`$product_list`但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:10:33.787

```
$mysqli = new mysqli("localhost", "username", "password", "database_name");

$query = "SELECT * FROM products ORDER BY date_added DESC";
$result = $mysqli->query($query);

$product_list = '<table>';
$product_list .= '<thead><tr>ID</tr><tr>Name</tr><tr>Price</tr><tr>Added</tr></thead>';
$product_list .= '<tbody>';

while($row = $result->fetch_array()){ 
  $id = $row["id"];
  $product_name = $row["product_name"];
  $price = $row["price"];
  $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
  $product_list .= "<tr><td>$id</td><td>$product_name</td><td>$price</td>    <td>$date_added</td></tr>";
 }

 $product_list .= '</tbody>';
 $product_list .= '</table>';

 echo $product_list; 
```

# javascript - JS中的变量变量

> ID：15561490
> 
> 赞同：5
> 
> 时间：2013-03-22T02:01:57.167
> 
> 标签：javascript, variables

我需要在JS中创建一个变量变量名...

```
obj = {};
obj.fooonex = {};
obj.fooonex.start = 1;
obj.fooonex.end = 2;

a = "foo";
b = "one";
c = "x";

test = a + b + c;

alert(obj.test.start); 
```

我希望结果为“1”

在这里小提琴：http: [//jsfiddle.net/mR6BH/](http://jsfiddle.net/mR6BH/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T02:02:58.787

你需要做：

```
alert(obj[test].start); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T02:07:33.503

generic 2 Fixes , 即更健壮的解决方案

***哎呀！甚至所有东西都是字符串！***
***从上面的问题，我将对象名、属性名扩展为字符串 Jang！...***

```
objectname = "obj";
propertyname = "start"; 
```

// 尝试 alert(get(objectname + "." + test + "." +propertyname));

```
function get(path) {
    var next = window;

    path = path.split(/[\[\]\.]+/);

    if (path[path.length - 1] == "") {
        path.pop();
    };

    while (path.length && (next = next[path.shift()]) && typeof next === "object" && next !== null);

    return path.length ? undefined : next;
} 
```

另一个

```
 function getPropertyValueByPath (obj, path)
    {
        path = path.split(/[\[\]\.]+/);

        if(path[path.length - 1] == "")
        {
            path.pop();
        };

        while(path.length && ( obj = obj[path.shift()]));

        return obj;
    } 
```

用法

```
 alert(getPropertyValueByPath(obj,test+ "." + propertyname ));
 alert(get(objectname + "." + test + "." +propertyname)); 
```

非推荐方式

```
eval(objectname + "." + test + "." +propertyname )

Another way `eval("obj." + test + ".start")`
a way of insecure and non-advised eval() 
```

# javascript - youtube api json-c

> ID：15561492
> 
> 赞同：0
> 
> 时间：2013-03-22T02:02:04.710
> 
> 标签：javascript, jquery, json, youtube, json-c

好的，所以我正在尝试更改我的脚本，以便将 youtube 播放列表改为从 youtube 上传的视频，我之所以更改这是因为我想使用用户名而不是 id（例如 38484937495 改为 MrEasyBB）

所以这是我的第一个有效的脚本，但它是一个播放列表，不再需要它了......

```
var width= 780;
var height= 420;
var playListURL = 'http://gdata.youtube.com/feeds/api/playlists/B2A4E1367126848D?v=2&alt=json&callback=?';
var videoURL= 'http://www.youtube.com/watch?v=';
$.getJSON(playListURL, function(data) {
var list_data="";
$.each(data.feed.entry, function(i, item) {
    var feedTitle = item.title.$t;
    var feedURL = item.link[1].href;
    var fragments = feedURL.split("/");
    var videoID = fragments[fragments.length - 2];
    var url = videoURL + videoID;
    var pubed = item.published.$t;
    var thumb = "http://img.youtube.com/vi/"+ videoID +"/default.jpg";
    list_data += '<li class="video_info" value="'+ url +'"><img alt="'+ feedTitle+'" src="'+ thumb +'"/><span class="title">'+ feedTitle +'</span><span class="pubed">'+ pubed +'</span></li>';
});
$(list_data).appendTo("#playlist");
}); 
```

我已经从这个开始了，它并不多

```
 var width= 780;
 var height= 420;
 var username = "MrEasyBB";
 var playListURL = 'https://gdata.youtube.com/feeds/api/users/'+ username +'/uploads?v=2&alt=jsonc';
 var videoURL= 'http://www.youtube.com/embed/';
 $.getJSON(playListURL, function(data){
var list_data="";
$.each(function(i, item) {
var title = item.data.items[0].title;
   var description = item.data.items[0].description;
   var pubbd = item.data.items[0].uploaded;
   var videoID = item.data.items[0].id;
   var url = videoURL + videoID;
    var thumb = "http://img.youtube.com/vi/"+ videoID +"/default.jpg";
    list_data += '<li class="video_info" value="'+ url +'"><img alt="'+ feedTitle+'" src="'+ thumb +'"/><span class="title">'+ feedTitle +'</span><span class="pubed">'+ pubed +'</span></li>';
});
$(list_data).appendTo("#playlist");
}); 
```

如您所见，我对第二个代码还没有走得太远，因为一旦我将其更改`var playListURL`为 json c 链接，它对我就不起作用了。我尝试更改每个中的var ...也许我应该摆脱.each？真的不确定。有人可以指出我正确的方向吗？

# mysql - phpmyadmin简单查询sql错误

> ID：15561499
> 
> 赞同：-2
> 
> 时间：2013-03-22T02:02:46.433
> 
> 标签：mysql, sql, phpmyadmin

我使用 php 我的管理员，并尝试运行此查询：

```
INSERT INTO msumat(tempat_lahir) VALUES ('Jakarta') WHERE umat_id != 10 
```

应该找到查询，但我总是从中得到一个错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE umat_id != 10' at line 1 
```

我的错误在哪里？我最近还发现了一些奇怪的事实：

我的计算机中的查询正在使用`''`报价运行但此查询未在我朋友的计算机中运行，我必须将其更改`''`为``。它是 phpmyadmin 中的错误吗？感谢：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:05:39.670

看起来您混淆了插入和更新。

插入创建新行并始终提供您要插入的值。

更新会改变一组行中的数据。

假设您的意思是这是一个更新：

```
UPDATE msumat set tempat_lahir = 'Jakarta' where umat_id != 10; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:08:46.117

默认情况下，`INSERT`语句不能有`WHERE`子句。

```
INSERT INTO tableName (column1, ...) VALUES (Value1,...) 
```

`INSERT`语句可以有子句的唯一时间`WHERE`是在执行`INSERT INTO..SELECT`语句时。

```
INSERT INTO tableName (column1, ...)
SELECT column1, ...
FROM   Table_name2
WHERE  .... 
```

我猜你想修改一个现有的列，你需要使用`UPDATE`.

```
UPDATE msumat
SET    tempat_lahir = 'Jakarta'
WHERE  umat_id <> 10 
```

永远记住这一点：

*   `INSERT`总是用于在表上**添加新**记录。
*   `UPDATE`用于**修改**表中的一条记录。

# linux - Apache2 - 添加子域时遇到问题

> ID：15561504
> 
> 赞同：3
> 
> 时间：2013-03-22T02:03:29.543
> 
> 标签：linux, apache, webserver, subdomain, virtualhost

我有一个运行 Ubuntu 11 和 Apache2 的 Linode 服务器，我正在尝试让一个子域工作。这是我`mywebsite`在`sites-available`文件夹中的文件。我尝试将顶部部分放在它自己的文件中`testing.mywebsite`并重新加载 apache2，但没有成功。

```
<VirtualHost *:80>
    DocumentRoot /home/user2/www
    ServerName testing.mywebsite.com
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin email@gmail.com
    ServerName  mywebsite.com
    ServerAlias *.mywebsite.com
    ServerAlias 192.155.90.135

    #Index file and Document Root (where the public files are located)
    DirectoryIndex  index.html index.php
    DocumentRoot    /home/user/public/mywebsite/www

    #Log file locations
    LogLevel    warn
    ErrorLog    /home/user/public/mywebsite/log/error.log
    CustomLog   /home/user/public/mywebsite/log/access.log combined
</VirtualHost> 
```

我有一个网站正在运行，apache 可以找到其中的所有文件，`/home/user/public/mywebsite/www`但是当我进入测试子域时，我的浏览器找不到它。我对 apache2 非常陌生，因此不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:16:04.677

您的 DNS 记录是否配置为在解析时将您的计算机指向所需的主机名和服务器的 IP 地址？或者，您是否在编辑*/etc/hosts*？

我有点不确定“我的浏览器找不到它”是什么意思，所以请澄清上述问题是否不能让您更接近您的问题。在您指定的路径和 /var/log/apache2/ 中检查 Apache 的日志文件是值得的。

# javascript - XMLHttpRequest 206 部分内容

> ID：15561508
> 
> 赞同：16
> 
> 时间：2013-03-22T02:04:04.123
> 
> 标签：javascript, ajax, xmlhttprequest

我想从 javascript 中的 XMLHttpRequest 对象发出部分内容请求。我正在从服务器加载一个大的二进制文件，我宁愿从服务器流式传输它，类似于处理 html5 视频的方式。

我可以使用 setRequestHeader 来设置 Range 标头。Chrome 中的网络检查器显示 Range 标头设置成功。但是，Accept-Encoding 标头设置为“gzip,deflate”，Chrome 不允许我设置该标头（来自 W3C 标准）。

有什么方法可以强制服务器仅响应来自 javascript 的 XMLHttpRequest 对象的 206 部分内容？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T02:24:22.303

这个范围请求对我来说很好：http: [//jsfiddle.net/QFdU4/](http://jsfiddle.net/QFdU4/)

```
var xhr = new XMLHttpRequest;

xhr.onreadystatechange = function () {
  if (xhr.readyState != 4) {
    return;
  }
  alert(xhr.status);
};

xhr.open('GET', 'http://fiddle.jshell.net/img/logo.png', true);
xhr.setRequestHeader('Range', 'bytes=100-200'); // the bytes (incl.) you request
xhr.send(null); 
```

但是，您必须确保服务器允许范围请求。你可以用 curl 测试它：

```
$ curl -v -r 100-200 http://example.com/movie.mkv > /dev/null 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-23T22:15:38.917

我想我知道为什么 206 请求不起作用。启用 gzip 压缩后，如果可以对传出数据进行 gzip 压缩，则范围标头将被忽略。

我请求的文件是一个大型二进制文件，nginx 将其解释为具有 mimetype application/octet-stream。这是被 gzip 压缩的 mimetype 之一。如果我将文件重命名为 .png 文件类型，则图像/png mimetype 不会被压缩，因此范围请求可以正常工作。

这也是为什么将带有 curl 的 Accept-Encoding 标头设置为身份也允许范围请求正常工作的原因。但是，我无法从 XHR 更改该标题。

解决方法：更改服务器上的mimetype表！

# mysql - iOS - 核心数据和服务器数据库同步最佳实践

> ID：15561509
> 
> 赞同：22
> 
> 时间：2013-03-22T02:04:18.777
> 
> 标签：mysql, ios, core-data, synchronization

我开始为大型应用程序设置核心数据模型，并希望在服务器数据库和离线功能方面获得有关正确同步方法/技术的一些反馈。

我将 PHP 和 mySQL 用于我的 Web 服务器/数据库。

我已经知道如何连接、接收数据、存储到核心数据等。我正在寻找更多关于跟踪数据更改的方法和特定实例的帮助：

A) 确保在线和离线使用期间应用程序和服务器同步（即离线活动将在重新上线后被推送）。B) 优化将数据保存到应用程序的速度。

**我的主要问题是：**

**检查应用程序中哪些新/更新数据仍需要同步（离线使用后）的最佳方法是什么？**

（即，在我的所有核心数据实体中，我放置了一个 BOOL 类型的“isSynchronized”属性。然后在成功提交并从服务器发回响应后更新为“YES”）。这是最好的方法吗？

**优化将数据从服务器保存到核心数据的速度的最佳方法是什么？**

（即，我怎样才能只更新比服务器数据库上的数据更旧的核心数据中的数据，而无需遍历每个实体并且每次都更新）？是否可以不添加用于跟踪每个表的更新时间戳的服务器数据库列？

同样，我已经知道如何下载数据并将其存储到 Core Data，我只是在寻求一些最佳实践方面的帮助，以确保跨应用程序和服务器数据库同步，同时确保优化处理时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T03:17:10.443

我将最后修改的时间戳存储在手机上的核心数据记录和服务器上的 mysql 表上的数据库中。

手机会搜索自上次同步以来发生变化的所有内容，并将其与上次同步的时间戳一起发送到服务器，服务器会响应自提供的同步时间戳以来发生的所有变化。

当大量记录发生变化时，性能是一个问题。我在具有自己的托管对象上下文的后台 NSOperation 上进行同步。当后台线程完成对其托管对象上下文的更改时，有一个 API 用于将所有更改合并到主线程的托管对象上下文中 - 如果有任何冲突引起的冲突，可以将其配置为简单地丢弃所有更改用户在同步进行时更改数据。在这种情况下，我只需等待几秒钟，然后再次尝试同步。

在较旧的硬件上，即使经过多次优化，如果用户开始在应用程序中进行操作，也有必要完全中止同步。它只是使用了太多的系统资源。我认为更现代的 iOS 设备可能足够快，您不再需要这样做。

（顺便说一句，当我说“很多记录已经改变”时，我的意思是在手机上更新或插入了大约 30,000 行）

# django - 如何允许客户端在 Appengine 上使用 Django 创建动态数据库和连接作为多租户数据库设置？

> ID：15561513
> 
> 赞同：1
> 
> 时间：2013-03-22T02:04:47.163
> 
> 标签：django, google-app-engine, djangoappengine

我们当前的设置将 Django 托管在 Google 的 appengine 上，并在 Google 的 Cloud SQL 上使用 MySQL 数据库。

用户（客户）通常是我们为多租户数据库结构（每个客户一个数据库）提供子域的小型企业。

至于确定哪个请求应该访问哪个数据库，有一个现有的中间件可以剥离请求路径以获取子域，从而返回 settings.py 中定义的相关数据库别名

```
from django.conf import settings
import threading
currentCompanyConnection = threading.local()

class DatabaseMiddleware(object): 
    def process_request(self, request): 
        url = request.build_absolute_uri()
        if url.find("http://") < 0:
            company = url.split("https://")[1].split(".")[0]
        else:
            company = url.split("http://")[1].split(".")[0]
        global currentCompanyConnection
        if company in settings.DATABASES:
            currentCompanyConnection.company = company
        else:
            currentCompanyConnection.company = 'default'
        request.currentCompany = str(currentCompanyConnection.company)
        return None

class DBRouter(object): 

    def read_and_write(self, model, **hints): 
        return currentCompanyConnection.company

    db_for_read  = read_and_write 
    db_for_write = read_and_write 
```

然而，为了让我们的 Web 应用程序具有免费增值自助服务的功能，必须动态生成一个新数据库，并为每个注册的用户动态地导入到 Django 的 settings.py 中。

最后一部分是我似乎无法弄清楚的，因为每次我更改 settings.py 时，我都必须再次将其部署到 appengine。除此之外，我不确定如何通过我们的网络应用程序在 Google 的 Cloud SQL 中创建一个带有预定义表的新数据库。

谢谢你的帮助！我喜欢解决工作中的挑战，但这是我以前从未做过的事情=O

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:05:59.417

一旦部署，您将无法修改源文件。您可以修改 blobstore 或数据存储中的内容。

我建议将设置作为结构化数据存储在数据存储中，然后让您的 settings.py 从数据存储中读取数据并将它们作为 python 对象存储在 settings.py 中，这些对象可以从其他代码访问。这应该允许您配置 django 以连接到多个数据库。

我对 CloudSQL 不太熟悉，但我认为您可能仍然面临启动多个 CloudSQL 实例并将适当的流量路由到适当的实例的挑战。

# c# - 在 MVC 应用程序中使用 powershell 从 IIS 获取虚拟目录

> ID：15561518
> 
> 赞同：2
> 
> 时间：2013-03-22T02:05:27.443
> 
> 标签：c#, asp.net-mvc, powershell, virtual-directory

我已经在 MVC3 (C#) 中创建了我自己的自定义 IIS 目录浏览器并且遇到了困难。

目前我正在使用`Microsoft.Web.Administration`命名空间来获取工作正常的虚拟目录，但是我想我会尝试使用 PowerShell，因为 Site 类需要对 windows 目录中的文件夹的权限。

目前我的代码如下：

```
 PowerShell ps = PowerShell.Create();
        ps.AddCommand("import-module");
        ps.AddArgument("webadministration");
        ps.AddCommand("get-webvirtualdirectory");
        ps.AddParameter("Name", "Default");
        IEnumerable<PSObject> results = ps.Invoke(); 
```

现在默认确实有两个虚拟目录，但是当我运行这段代码时没有发生错误，一切似乎都按预期工作但是，“结果”中返回的集合是空的..

更令人困惑的是，当我直接调用powershell`import-module webadministration`时`get-webvirtualdirectory -name Default`，它会按预期工作，返回两个列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-05T19:30:32.690

确保 IIS 连接池进程以管理员权限运行。

# ruby-on-rails - Rails 和 SQLITE：图像未显示

> ID：15561522
> 
> 赞同：0
> 
> 时间：2013-03-22T02:05:59.993
> 
> 标签：ruby-on-rails, ruby, sqlite, associations, linkage

我对 Rails 和 Web 编程非常陌生，希望您能帮助我完成我的第一个项目。我正在为房地产中介开发一个网站。

我的数据库中有 3 个表（**家庭**：Home_ID、Home_Name、Admin_ID；**管理员**：Admin_ID、Admin_Name、Admin_Email；**图像**：Image_ID、Image_Path、Image_Name、Home_ID、Admin_ID）。

所有 3 个表都是使用脚手架创建的。图像信息（名称、路径、image_id、home_id 等）已在 SQLite 中输入。除了图片，我得到了网站上正确显示的不同房屋的所有文本信息。

我尝试在 view/home/index.html.erb 中链接它产生了以下错误：

```
undefined method `image_path' for #<Home:0xb63d85e0> 
```

我使用了以下代码：

```
<% @homes.each do |home| %>
  <tr>
    <td><%= home.name %></td>
    <td><%= home.details %></td>
    <td><%= home.region %></td>
    <td><%= home.address %></td>
    <td><%= home.price %></td>
    <td><%= home.admin_id %></td>
    <td><%= home.image_path %></td>
  </tr>
<% end %>
</table> 
```

看起来在 SQLite 中输入的数据不与 Rails 同步。您知道我做错了什么以及如何解决吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:11:08.980

发生的情况是您正在循环从 Home 表中选择的记录。正因为如此，当你打电话

```
<td><%= home.image_path %></td> 
```

它无法识别该属性`image_path`，因为您没有`image_path`Home 表的列。您的列只有 Home_ID、Home_Name、Admin_ID。您将不得不研究模型之间的关联，以便弄清楚如何获取`image_path`每个家庭记录。你可以从[这里](http://guides.rubyonrails.org/association_basics.html)开始。

如果您稍后更新代码，我将很高兴对此发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:49:40.647

如果我错了，我不肯定你的图像和家庭模型之间的关系会如此正确，但我猜家庭会有很多图像。每个图像将属于一个家庭。它是否正确？如果是这样，您将需要在您的模型中声明，如下所示：

模型/home.rb

```
has_many :images 
```

模型/image.rb

```
belongs_to :home 
```

然后，您需要将其添加到图像数据库中：

```
t.integer  "home_id" 
```

您可以通过转到命令行并键入以下内容来添加它：

```
rails g migration AddHomeToImages home_id:integer 
```

您应该查看 db/migrate/，然后查看最新的迁移文件，并确保它看起来像这样：

```
add_column :images, :home_id, :integer 
```

然后运行：

> 耙分贝：迁移

此时，您只需要更新您的控制器和视图以显示此关联。让我知道这是否有帮助，如果有帮助，我会帮助您处理控制器和视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:33:05.703

我认为这里最好的解决方案是使用回形针宝石。你可以看看这个非常古老的 railscast eoisode 来了解它是如何工作的：

[http://railscasts.com/episodes/134-paperclip](http://railscasts.com/episodes/134-paperclip)

这是github存储库：

[https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)

Paperclip 将帮助您处理图像的路径、样式和预览。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T11:58:15.290

谢谢杰森，

我同意这对新手来说有点大，但要求是我们做一个需要从/向数据库读取和写入的网站。我们通过合作伙伴对 Rails 进行了快速介绍，现在我们独自一人，“有点”迷路了，时间不多了。

这是我收到的错误消息：

**房屋中的名称错误#index**

> 未定义的局部变量或方法“图像”
> 
> # <#:0xb62f7aa4>
> 
> 提取的源代码（大约第 20 行）：

```
17: <% @homes.each do |home| %>
18:   <tr>
19:     <td><%= home.name %></td>
20:     <td><%= image.home_id %></td>
21:     <td><%= home.details %></td>
22:     <td><%= home.region %></td>
23:     <td><%= home.address %></td> 
```

当我创建数据库表时，我在 home 表中有一个 Image_ID，但我被告知我不需要它，并且在 images 表中只有 Home_ID 就足够了。

我了解该错误是由于 image.home_id 引起的。你有什么意见？我应该将 Image_ID 添加回 home 表以显示相应 home_id 的所有图像还是有其他方法？我希望能够决定将哪些图片显示为主图片，哪些图片显示为较小的图片。

这是我使用的代码：

**模型/home.rb**

```
class Home < ActiveRecord::Base
  attr_accessible :address, :admin_id, :details, :name, :price, :region

  has_many :images

end 
```

**模型/image.rb**

```
class Image < ActiveRecord::Base
  attr_accessible :image_description, :image_name, :image_path

  belongs_to :home  

end 
```

**意见/家园/index.html.erb**

```
<h1>Listing homes</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Image</th>
    <th>Details</th>
    <th>Region</th>
    <th>Address</th>
    <th>Price</th>
    <th>Admin</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @homes.each do |home| %>
  <tr>
    <td><%= home.name %></td>
    <td><%= image.home_id %></td>
    <td><%= home.details %></td>
    <td><%= home.region %></td>
    <td><%= home.address %></td>
    <td><%= home.price %></td>
    <td><%= home.admin_id %></td>
    <td><%= link_to 'Show', home %></td>
    <td><%= link_to 'Edit', edit_home_path(home) %></td>
    <td><%= link_to 'Destroy', home, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Home', new_home_path %> 
```

**意见/家园/show.html.erb**

```
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @home.name %>
</p>

<p>
  <b>Image:</b>
  <%= @image.home_id %>
</p>

<p>
  <b>Details:</b>
  <%= @home.details %>
</p>

<p>
  <b>Region:</b>
  <%= @home.region %>
</p>

<p>
  <b>Address:</b>
  <%= @home.address %>
</p>

<p>
  <b>Price:</b>
  <%= @home.price %>
</p>

<p>
  <b>Admin:</b>
  <%= @home.admin_id %>
</p>

<%= link_to 'Edit', edit_home_path(@home) %> |
<%= link_to 'Back', homes_path %> 
```

**视图/图像/_form.html.erb**

```
<%= form_for(@image) do |f| %>
  <% if @image.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@image.errors.count, "error") %> prohibited this image from being saved:</h2>

      <ul>
      <% @image.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :image_name %><br />
    <%= f.text_field :image_name %>
  </div>
  <div class="field">
    <%= f.label :image_path %><br />
    <%= f.text_field :image_path %>
  </div>
  <div class="field">
    <%= f.label :image_description %><br />
    <%= f.text_area :image_description %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**控制器/images_controller.rb**

```
class ImagesController < ApplicationController
  # GET /images
  # GET /images.json
  def index
    @images = Image.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @images }
    end
  end

  # GET /images/1
  # GET /images/1.json
  def show
    @image = Image.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @image }
    end
  end

  # GET /images/new
  # GET /images/new.json
  def new
    @image = Image.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @image }
    end
  end

  # GET /images/1/edit
  def edit
    @image = Image.find(params[:id])
  end

  # POST /images
  # POST /images.json
  def create
    @image = Image.new(params[:image])

    respond_to do |format|
      if @image.save
        format.html { redirect_to @image, notice: 'Image was successfully created.' }
        format.json { render json: @image, status: :created, location: @image }
      else
        format.html { render action: "new" }
        format.json { render json: @image.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /images/1
  # PUT /images/1.json
  def update
    @image = Image.find(params[:id])

    respond_to do |format|
      if @image.update_attributes(params[:image])
        format.html { redirect_to @image, notice: 'Image was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @image.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /images/1
  # DELETE /images/1.json
  def destroy
    @image = Image.find(params[:id])
    @image.destroy

    respond_to do |format|
      format.html { redirect_to images_url }
      format.json { head :no_content }
    end
  end
end 
```

非常感谢。我真的很感谢你的帮助！！！

# package - 更改 hunchentoot 的当前包

> ID：15561527
> 
> 赞同：0
> 
> 时间：2013-03-22T02:06:45.377
> 
> 标签：package, common-lisp

根据 Xach 的[说明，我已经使用 quickproject 建立了一个 hunchentoot 项目。](http://xach.livejournal.com/278047.html)In-package 在文件顶部运行，hunchentoot 在文件后面启动。REPL 也切换到我的包中，但很明显 hunchentoot 没有在我的包中运行。这会导致 REPL 和浏览器中的测试之间存在一些差异。例如，有一个函数在 alist 中查找一些东西，但是 hunchentoot 从中获取 NIL，因为它使用了另一个包中的符号。

我从[这个相关问题](https://stackoverflow.com/questions/5081399/common-lisp-why-is-cl-lnterning-symbols-to-the-wrong-package-when-reading-from)的答案中知道，我可以将每一段用于实习符号的代码包装成类似的东西

```
(let ((*package* (find-package :package-name)))
  ...) 
```

这将`*package*`在所附代码的持续时间内将 var 设置为正确的包。

把它放在每一个需要它的功能中，我感觉就像一个凌乱的黑客。

直觉说我应该可以像这样开始 hunchentoot：

```
(let ((*package* (find-package :package-name)))
  (hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port 4242))) 
```

这样它就可以`*package*`设置为我喜欢的值来运行它，从而确保通过来自网络服务器的调用完成的任何实习都在我的包中完成。它不起作用。Hunchentoot 最终在 cl-user 下实习，可能是由于使用了上面链接中的 WITH-STANDARD-IO-SYNTAX 之类的宏。

即使我可以说服 hunchentoot 做我想做的事，我的“乱七八糟的黑客”仍然是更好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:05:05.243

这不是 Hunchentoot 特定的问题，而是一般与 Common Lisp 包有关。

您看到的是，在您的代码中，`*PACKAGE*`特殊变量未绑定到您自己的包。 仅在编译和读取时`IN-PACKAGE`更改。`*PACKAGE*`在运行时调用包中的函数时，`*PACKAGE*`不会重新绑定，需要显式绑定。

当您使用`INTERN`or`FIND-SYMBOL`时，通常最好将包指定为参数。或者，您可以绑定`*PACKAGE*`自己。

试试看`LOAD`这个文件：

```
(defpackage :foo
  (:use :cl))

(in-package :foo)

(defun test ()
  (print *package*))

(in-package :cl-user)

(foo::test) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:25:41.763

Common Lisp 代码不会在包中“运行”。

有一些操作使用默认包。就像从文本流中读取符号一样：

```
CL-USER 1 > *package*
#<The COMMON-LISP-USER package, 56/64 internal, 0/4 external>

CL-USER 2 > (read-from-string "FOO")
FOO
3

CL-USER 3 > (describe (read-from-string "FOO"))

FOO is a SYMBOL
NAME          "FOO"
VALUE         #<unbound value>
FUNCTION      #<unbound function>
PLIST         NIL
PACKAGE       #<The COMMON-LISP-USER package, 57/64 internal, 0/4 external> 
```

或者喜欢找到一个符号：

```
(find-symbol "FOO") 
```

这些操作取决于变量的值`cl:*package*`。

为确保这些操作（读取符号、查找符号、实习符号……）按照您的预期进行，您可能需要：

*   将变量设置或绑定`*package*`到您想要的包

*   显式地将包传递给操作。您可以调用`(find-symbol "FOO")`并`*package*`设置一些包。但是您也可以`(find-symbol "FOO" my-package)`通过将相应的包作为参数传递来调用。

**摘要**：Common Lisp 代码不会“在包中运行”，但它使用变量`*package*`作为包相关操作的默认包。使用该机制时需要设置或绑定该变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T00:34:00.027

当 Hunchentoot 在多线程中运行时，它的接受器和处理程序在使用`bordeaux-threads`非 Lispwork CL 实现的子线程中处理。你问的这种情况的原因是当前子线程的包变成了`COMMON-LISP-USER`.

为了得到你想要的结果，你可以使子线程的当前包与调用线程的包相同，并实现`START-THREAD`对应于`ONE-THREAD-PER-CONNECTION-TASKMASTER`taskmaster 的通用函数。

请注意，您使用的是具有`START-THREAD`通用功能的最新 Hunchentoot，我使用的是 1.2.19 版本。

```
(in-package :hunchentoot)

(defmethod start-thread ((taskmaster one-thread-per-connection-taskmaster) thunk &key name)
  (let* (;; calling thread's current package
         (package-name (package-name *package*))
         ;; initial special bindings passed to bordeaux threads
         (initial-bindings `((*package* . (find-package ,package-name)))))
    ;; making child thread passing initial special bindings
    (bt:make-thread thunk :name name :initial-bindings initial-bindings))) 
```

# javascript - 我能做些什么来阻止此代码引起的轻微页面延迟吗？

> ID：15561529
> 
> 赞同：0
> 
> 时间：2013-03-22T02:06:57.357
> 
> 标签：javascript, jquery, jquery-ui, loops, optimization

我在页面上有此代码循环，并且在选中选择框时会导致略有页面滞后。有没有办法优化代码？我对javascript还是很陌生，所以我可能把一些东西混在一起了。

```
var OpeningEmployees = document.getElementById('opener');
var QuantityDDOptions = jQuery('#opener option').length;

var DropDownNames = new Array();
DropDownNames[0] = "opener";
DropDownNames[1] = "mid";
DropDownNames[2] = "closer";
DropDownNames[3] = "SRTW";
DropDownNames[4] = "CR";
DropDownNames[5] = "Aisles";
DropDownNames[6] = "BD";
DropDownNames[7] = "Fridge";
DropDownNames[8] = "AP";
DropDownNames[9] = "EPV";

OpeningEmployees.onchange = function () {
    var openerVals = $("#opener").val();
    for (var j = 1; j < DropDownNames.length; j++){
        for (var x = 0; x < QuantityDDOptions; x++) {
            var EmployeelNumLine = document.getElementById(DropDownNames[j]).options[x].value;
            if (openerVals == null){
                jQuery("select#"+DropDownNames[j]+" option")[x].removeAttribute("disabled");
                $("#"+DropDownNames[j]).multiselect("refresh");
            } else if(openerVals.indexOf(EmployeelNumLine) > -1) {
                jQuery("select#"+DropDownNames[j]+" option")[x]['disabled'] = "true";
                $("#"+DropDownNames[j]).multiselect("refresh");
            } else if(!openerVals.indexOf(EmployeelNumLine) > -1){
                jQuery("select#"+DropDownNames[j]+" option")[x].removeAttribute("disabled");
                $("#"+DropDownNames[j]).multiselect("refresh");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:29:46.997

通常，如果您的循环锁定了线程，您可以将其重构为使用超时调用的递归循环。这可以防止 UI 冻结。

对于较大的值`n`，这将冻结您的浏览器：

```
for (i = 0; i < n; i++){
    //dosomething();
} 
```

另一方面，这会减慢您的速度，但不会锁定浏览器：

```
(function iterate(i) {
    if (i < n) {
        //dosomething();

        setTimeout(function () {
            iterate(++i);
        }, 0);
    }
})(0) 
```

# java - 我的 Android 应用程序 httpGet 出错

> ID：15561530
> 
> 赞同：0
> 
> 时间：2013-03-22T02:07:01.587
> 
> 标签：java, android, json, httprequest

基本上我的 Android 应用程序遇到了一个奇怪的问题，它应该获取一个 JSON 数组并打印出一些值，该类如下所示：

**ShowComedianActivity.class**

```
package com.example.connecttest;

public class ShowComedianActivity extends Activity{

    TextView name;
    TextView add;
    TextView email;
    TextView tel;

    String id;

    // Progress Dialog
    private ProgressDialog pDialog;

    //JSON Parser class
    JSONParser jsonParser = new JSONParser();

    // Single Comedian url
    private static final String url_comedian_details = "http://86.9.71.17/connect/get_comedian_details.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_COMEDIAN = "comedian";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_ADDRESS = "address";
    private static final String TAG_EMAIL = "email";
    private static final String TAG_TEL = "tel";

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.show_comedian);

        // Getting Comedian Details from intent
        Intent i = getIntent();

        // Getting id from intent
        id = i.getStringExtra(TAG_ID);

        new GetComedianDetails().execute();

    }

    class GetComedianDetails extends AsyncTask<String, String, String>{

        protected void onPreExecute(){
            super.onPreExecute();
            pDialog = new ProgressDialog(ShowComedianActivity.this);
            pDialog.setMessage("Fetching Comedian details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... params) {

            runOnUiThread(new Runnable(){
                public void run(){
                    int success;
                    try{
                        //Building parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("id",id));

                        // Getting comedian details via HTTP request
                        // Uses a GET request

                        JSONObject json = jsonParser.makeHttpRequest(url_comedian_details, "GET", params);
                        // Check Log for json response
                        Log.d("Single Comedian details", json.toString());

                        //JSON Success tag
                        success = json.getInt(TAG_SUCCESS);
                        if(success == 1){
                            // Succesfully received product details
                            JSONArray comedianObj = json.getJSONArray(TAG_COMEDIAN); //JSON Array

                            // get first comedian object from JSON Array
                            JSONObject comedian = comedianObj.getJSONObject(0);

                            // comedian with id found
                            name = (TextView) findViewById(R.id.name);
                            add = (TextView) findViewById(R.id.add);
                            email = (TextView) findViewById(R.id.email);
                            tel = (TextView) findViewById(R.id.tel);

                            // Set text to details
                            name.setText(comedian.getString(TAG_NAME));
                            add.setText(comedian.getString(TAG_ADDRESS));
                            email.setText(comedian.getString(TAG_EMAIL));
                            tel.setText(comedian.getString(TAG_TEL));

                        }

                    } catch (JSONException e){
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

    }

} 
```

我的 JSON Parser 类看起来像：

```
package com.example.connecttest;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

现在，当我运行调试时，它会在 URL 末尾使用 ?id=1 查询正确的地址，当我导航到该 URL 时，我得到以下 JSON 数组：

```
{"success":1,"comedian":[{"id":"1","name":"Michael Coombes","address":"5 Trevethenick Road","email":"mc6415@gmail.com","tel":"xxxxxxxxxxxx"}]} 
```

但是我的应用程序崩溃了，log-cat 报告如下所示：

```
03-22 02:05:02.140: E/Trace(3776): error opening trace file: No such file or directory (2)
03-22 02:05:04.590: E/AndroidRuntime(3776): FATAL EXCEPTION: main
03-22 02:05:04.590: E/AndroidRuntime(3776): android.os.NetworkOnMainThreadException
03-22 02:05:04.590: E/AndroidRuntime(3776):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at libcore.io.IoBridge.connect(IoBridge.java:112)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at java.net.Socket.connect(Socket.java:842)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at com.example.connecttest.JSONParser.makeHttpRequest(JSONParser.java:62)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at com.example.connecttest.ShowComedianActivity$GetComedianDetails$1.run(ShowComedianActivity.java:89)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at android.os.Handler.handleCallback(Handler.java:615)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at android.os.Looper.loop(Looper.java:137)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at java.lang.reflect.Method.invoke(Method.java:511)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-22 02:05:04.590: E/AndroidRuntime(3776):     at dalvik.system.NativeStart.main(Native Method) 
```

据此，我猜测错误出在 jsonParser.makeHttpRequest 中，但是我终其一生都无法弄清楚出了什么问题，并希望比我更聪明的人能照亮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:21:21.043

您收到[android.os.NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)是因为您“尝试在其主线程上执行网络操作”。AsyncTask 是一个 Thread ，所以删除：

```
 runOnUiThread(new Runnable(){
                public void run(){ 
```

和右括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:25:28.970

首先，请记住实际阅读堆栈跟踪，答案在第一行。在严格模式下运行您的应用程序时（我认为较新版本的 Android 默认会这样做），`NetworkOnMainThreadException`如果您尝试在 UI 线程上进行任何网络调用，Android 会抛出异常，因为您不想阻塞 UI 线程**。**

```
E/AndroidRuntime(3776): android.os.NetworkOnMainThreadException
E/AndroidRuntime(3776):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 
```

向下查看跟踪是导致问题的代码：

```
E/AndroidRuntime(3776):     at com.example.connecttest.JSONParser.makeHttpRequest(JSONParser.java:62)
E/AndroidRuntime(3776):     at com.example.connecttest.ShowComedianActivity$GetComedianDetails$1.run(ShowComedianActivity.java:89) 
```

这是实际的行：

```
JSONObject json = jsonParser.makeHttpRequest(url_comedian_details, "GET", params); 
```

经过检查，您实际上是在运行您的网络调用`doInBackground`，它在主线程之外运行，这是您想要进行网络调用的地方（因为您可以随心所欲地阻止该线程）。但是，您正在内部运行网络调用`runOnUiThread`，因此您将转身在 UI 线程上运行网络调用，然后 Android 会抛出`NetworkOnMainThreadException`.

我建议您删除该`runOnUiThread`部分，因为这是一种不好的做法，并将您的请求参数传递给您的`AsyncTask`.

有关错误的更多信息 -[如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception).

# asp.net-mvc - MVC 更新 .edmx 文件（.msl、.csdl、.ssdl）

> ID：15561534
> 
> 赞同：1
> 
> 时间：2013-03-22T02:07:20.180
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我在 web.config 所在的根项目目录中有 3 个 .edmx 文件（.msl、.csdl、.ssdl）。当我执行“从数据库更新模型”时，为什么这些不更新？

我必须手动将新字段添加到这些文件中......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:25:52.787

.msl、.csdl 和 .ssdl 是 .edmx 编译的结果，如果您没有将它们嵌入到程序集中，请检查 .edmx 文件属性（在解决方案资源管理器中）和“复制到输出”中是否为“构建操作”选择了“EntityDeploy”为模型属性中的“元数据工件处理”选择目录”（在模型设计器中），更新您的模型并重建解决方案。之后，它们将被复制到 bin\Debug 子文件夹。

顺便说一句，您可以选择“嵌入输出程序集”，更新连接字符串，从解决方案中删除对这些文件的引用，不再关心它们。

# windows - C++/CX 捕获异常 - 如何打印完整堆栈？

> ID：15561538
> 
> 赞同：1
> 
> 时间：2013-03-22T02:07:56.547
> 
> 标签：windows, exception, c++-cx

我有一个用 C++/CX 编写的 Windows 应用商店应用程序（适用于 Windows 8），并且我已经将一大块代码包装在一个 try/catch 块中。

catch 块正在工作并捕获异常，但到目前为止，我似乎只能打印出异常的“消息”部分，而不是完整的异常堆栈：

```
try
{
...
}
catch(Exception^ e)
{
   LogMessage("Exception caught: " + e->ToString());
} 
```

当异常被捕获时，LogMessage 仅输出以下文本：

```
"Exception caught: The object already exists" 
```

我尝试过 e->ToString() 和 e->Message，但两者都产生相同的输出，并且不包括完整的异常堆栈。

在 C# 中，输出完整的异常堆栈似乎真的很容易，所以我不确定为什么在 C++/CX 中看起来很困难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:10:37.677

这在 C++/CX 中很困难，因为确定堆栈中的函数需要代码来解析调试符号。在 C# 中，CLR 确实在运行时工作以记住堆栈中的方法，但在 C++/CX 中，函数的名称不会记录在生成的二进制文件中。换句话说，您在 C# 中获得的堆栈跟踪取决于 C# 功能：反射。

此外，调用纯 COM API 而非 C++/CX API 的代码可能会导致异常。在这种情况下，异常是从`HRESULT`下面的错误返回代码生成的，而不是在引发异常的时候。（事实上​​，每当跨越组件边界时都会发生这种情况；即使操作的双方都是 C++/CX，也可以使用普通 COM 处理）因此，跟踪所需的堆栈不再可用。

C++ 异常不记录堆栈跟踪。从好的方面来说，当发生未处理的异常时，您可以从本机程序收集一个小型转储，如果需要，您可以使用调试器查看堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T03:05:16.353

请记住，C++/CX 程序是纯非托管 C++ 代码。CX 语言扩展只使在 C++ 代码中使用 WinRT 类型变得容易，它隐藏了 COM 实现细节。所以它得到了代码优化器的全面处理。这并*没有*尝试确保可以安全地执行堆栈遍历。在不抛出异常的叶函数中尤其如此。它将很容易地省略设置 EBP 寄存器，该寄存器指示堆栈激活帧的基数。

在托管代码（如 C#）中，情况并非如此。堆栈遍历在垃圾收集的运行时环境中非常重要。垃圾收集器在收集垃圾时必须执行它们以查找对象引用。代码访问安全性也依赖于堆栈遍历。一个令人高兴的副作用是，现在为异常生成堆栈跟踪也变得非常容易。它甚至暴露在框架 api 中，StackTrace 类允许您在自己的代码中遍历堆栈。

对此没有简单的解决方法，您需要调试符号才能对其进行尝试。以及来自 DbgHelp api 的 StackWalk64。由于程序在 Windows 函数内部的某个地方崩溃了，因此您可能仍然无处可去。在 C++ 中，速度胜过便利性。

# ruby-on-rails-3 - 在 authbind 下运行 trinidad 服务器（用于 Rails）？

> ID：15561540
> 
> 赞同：1
> 
> 时间：2013-03-22T02:08:12.070
> 
> 标签：ruby-on-rails-3, ubuntu, trinidad-gem

我有一个使用 Jruby 的 Rails 应用程序，我想将其部署到生产环境中。它使用特立尼达。我想在不使用 root 的情况下以端口 80 运行。authbind 会是一个合理的选择（在 Ubuntu 上）吗？有什么好的配置方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T00:55:29.460

您正在运行 Jruby，即。使用JVM？authbind 拦截标准套接字库调用（例如，socket.h 中的 bind()）。不幸的是，Java（至少在我的经验中是 java 1.6+）不使用标准套接字库，而是使用低得多的级别系统调用，因此 authbind 不适用于 Java。

如果你想在端口 ie 上运行 tomcat，要么使用 nginx 或 apache 作为反向代理，要么使用 iptables 重写传入数据包的“目标端口”。在 tomcat 常见问题解答中的更多详细信息：[http ://wiki.apache.org/tomcat/HowTo#How_to_run_Tomcat_without_root_privileges.3F](http://wiki.apache.org/tomcat/HowTo#How_to_run_Tomcat_without_root_privileges.3F)

# php - str_replace 计数 $placeholder 的出现次数，用相应的 $variable 替换

> ID：15561541
> 
> 赞同：1
> 
> 时间：2013-03-22T02:08:16.337
> 
> 标签：php, parameters, count, str-replace

几天来，我一直在努力实现这一目标。我在每个帖子中都有一个描述，其中手动放置了我想要替换相应图像的占位符。例如：

```
This is the description shortened...
[image]
[image]
Description starts again with a new paragraph continuing... 
```

占位符是 [image]。对于每篇新文章，我都会上传多张图片，但每篇文章可能会包含 1-10 张图片，因此会放置不同数量的 [图片] 占位符。我有一个函数可以获取该帖子的所有相关图像并计算有多少图像。

这是我到目前为止的代码，但问题是，对于前两个占位符 [image]，它显示第一个相关图像两次，然后循环并再次显示描述，这次用第二个图像替换两个 [image] 占位符.

```
<?php
  foreach ($photos as $picture) {
    $count = count($picture);
    for($i = 1; $i<= $count; $i++) {
      $image = $picture['filename'];
      $replace = "[image]";
      $image_path = '../../content_management/image_upload/';
      $placeholders = array("$replace");
      $image_location = array('<a class="fancybox" href="' . $image_path . '' . $image . '" data-fancybox-group="gallery"><img src="' . $image_path . '' . $image . '" /></a>');
      $rawstring = $photo_article['description'];
      $new_string = $rawstring;
      $new_string = str_replace($placeholders, $image_location, $new_string, $i);
      echo $new_string;
    }
  }
?> 
```

输出是什么：

```
This is the description shortened...
Image1.jpg
Image1.jpg
Description starts again with a new paragraph continuing...

This is the description shortened...
Image2.jpg
Image2.jpg
Description starts again with a new paragraph continuing... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:25:46.777

你正在循环但调用相同的`$picture['filename']`它应该是`$picture[$i]['filename']`或只是`foreach ($picture as $thisPic) { $thisPic['filename']; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:34:57.547

```
$photos = array(
    'photo1' => array(
    'filename' => 'image1.png'
    ),
    'photo2' => array(
    'filename' => 'image2.png'
    ),
);

$photo_article['description'] = "This is the description shortened...
[image]
[image]";

foreach ($photos as $picture)
{
    $image = $picture['filename'];
    $image_path = '../../content_management/image_upload/';
    $replacement = '<a class="fancybox" href="' . $image_path . '' . $image . '" data-fancybox-group="gallery"><img src="' . $image_path . '' . $image . '" /></a>';
    $photo_article['description'] = preg_replace("~\[image\]~s", $replacement, $photo_article['description'], 1);
}
    echo $photo_article['description']; 
```

# java - 在java中将文本文件中的一行文本转换为密文

> ID：15561548
> 
> 赞同：0
> 
> 时间：2013-03-22T02:09:48.680
> 
> 标签：java, file, text, encryption

我有一行文本需要解密为密文。

假设我的文本行是`abc def ghijklm n opq rstu vwx yz`

我想要这样的输出：`aei qu c k rvzdhmptxbfjn y glosm`

假设我输入了我的“密钥”为 5。然后代码将输入文本文件中文本字符串数组的每个第 5 个元素。

这是我想出的代码，我在做什么方面遇到了困难。

```
import java.io.*;
import java.util.*;

public class Files1 {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    Scanner input = new Scanner(System.in);
    int key;

    System.out.print("Enter file: ");
    String fileName = input.nextLine();
    System.out.print("Please enter your Cipher Key: ");
    key = input.nextInt();

    Scanner inputStream = null;
    System.out.println("File name is: " + fileName);

    try {
        inputStream = new Scanner(new File(fileName));
    } catch (FileNotFoundException e) {
        System.out.println("Error opening the file" + fileName);
        System.exit(0);
    }

    while (inputStream.hasNextLine()) {
        String text = inputStream.nextLine();
        System.out.println(text);

        char arrayText[] = text.toCharArray();
        for (int i = 0; i < arrayText.length; i += key) {
            System.out.print("\n" + arrayText[i]);
        }

    }
} 
```

}

这是控制台中发生的事情：

```
Enter file: abc.txt

File name is: abc.txt
abc def ghijklm n opq rstu vwx yz

a

e

i

q

u 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:42:23.723

你需要的是一个循环列表。

这是一个使用数组的循环列表的非常简单粗暴的实现。

```
import java.util.Iterator;
import java.util.List;

public class CircularList implements Iterator<String> {

    private String[] list;

    private int pointerIndex;

    private int key;

    public CircularList(String[] list, int key) {
        this.list = list;
        pointerIndex = 1 - key;
        this.key = key;
    }

    @Override
    public boolean hasNext() {
        if(list.length == 0){
            return false;
        }
        return true;
    }

    @Override
    public String next() {
        if(pointerIndex + key > list.length) {
            int diff = (list.length-1) - pointerIndex;
            pointerIndex = key - diff;
            return  list[pointerIndex];
        }else {
            pointerIndex = pointerIndex + key;
            return list[pointerIndex];
        }
    }

    @Override
    public void remove() {
        //Do Nothing
    }

} 
```

一旦你有了一个可以循环迭代的列表，你就可以将现有的实现更改为 -

```
import java.io.*;
import java.util.*;

public class Files1 {

    public static void main(String[] args) {

        System.out.print("Enter file: ");
        Scanner input = new Scanner(System.in);
        String fileName = input.nextLine();
        Scanner inputStream = null;
        System.out.println("" + fileName);

        try {
            inputStream = new Scanner(new File(fileName));
        } catch (FileNotFoundException e) {
            System.out.println("Error opening the file: " + fileName);
            System.exit(0);
        }

        while (inputStream.hasNextLine()) {
            String text = inputStream.nextLine();
            System.out.println(text);

            String[] splits = text.split("");
            CircularList clist = new CircularList(splits, 5);

            for (int i = 0; i < splits.length -1; i += 1) {
                System.out.print("" + clist.next());
            }

        }
    }

} 
```

输出 -

```
Enter file: resources\abc.txt
resources\abc.txt
abc def ghijklm n opq rstu vwx yz
aei qu c k rvzdhmptxbfjn  y glosw 
```

此外，密码中的最后一个字符应该是“w”而不是“m”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:13:33.527

您没有指定空格应该发生什么，或者在需要环绕时会发生什么，但假设空格很重要并且环绕自然会发生：

```
for (int i = 0; i < text.length(); i++)
{
    System.out.print(text.charAt((i*5) % text.length()));
} 
```

prints `aei qu c k rvzdhmptxbfjn y glosw`，这强烈表明您的预期输出中有错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:17:08.663

导入 java.io。*; 导入 java.util。*;

公共类文件1 {

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Scanner input = new Scanner(System.in);
    int key;

    System.out.print("Enter file: ");
    String fileName = input.nextLine();
    System.out.print("Please enter your Cipher Key: ");
    key = input.nextInt();

    Scanner inputStream = null;
    System.out.println("File name is: " + fileName);

    try {
        inputStream = new Scanner(new File(fileName));
    } catch (FileNotFoundException e) {
        System.out.println("Error opening the file" + fileName);
        System.exit(0);
    }

    while (inputStream.hasNextLine()) {
        String text = inputStream.nextLine();
        System.out.println(text);
        for (int i = 0; i < text.length(); i++) {
            System.out.print(text.charAt((i * key) % text.length()));
        }

    }
} 
```

}

非常感谢 EJP 和 Pai！

我学到了很多！

# jquery - 页面加载时淡出/淡入 Div

> ID：15561550
> 
> 赞同：0
> 
> 时间：2013-03-22T02:09:58.700
> 
> 标签：jquery, fadein, fadeout

当我的网站上加载新页面时，我希望旧页面的主要内容（位于正文内的 div 内，不包括页脚和页眉）淡出，新页面的主要内容淡入，全部使用 jQuery。我的代码基本上是：

```
<html>

 <head> -random header info- (also where I figured the jQuery would go?)
 </head>

  <body>

   <div id="header">
   </div>

   <div id="main"> - main content of site - 
   </div>

   <div id="footer"> 
   </div>

  </body>

</html> 
```

我只希望淡出和影响：`<div id="main">`我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:15:50.387

试试这个，确保也包含 jquery 库。

```
$(document).ready(function(){
    $("div#main").fadeOut();
}); 
```

要淡入，请添加`style="display:none"`到您的 div，然后更改`fadeOut()`为`fadeIn()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:16:47.710

在您的文档中。准备好：- 淡出：-

```
$('#main').fadeOut('slow'); 
```

淡入：-

```
$('#newcontent').fadeIn('slow'); 
```

# mongodb - Mongodb高页面错误和高锁但内存足够？

> ID：15561551
> 
> 赞同：4
> 
> 时间：2013-03-22T02:10:00.783
> 
> 标签：mongodb, nosql

这台机器是我的 mongodb 集群的一个分片。集群有3个shard，shard1在machine1，shard2在machine2，都是8G内存和800G磁盘。machine3中的configdb、mongos和shard3，特别是16G内存和400G磁盘。

现在的问题是：

mongostat 在 machine3 中是正常的，但是在 machine1 和 machine2 中，page faults 和locked db 总是很高。

我只是列出了 machine1 的一些状态：top 命令的结果：

```
[]$top
Cpu(s):  0.2%us,  0.2%sy,  0.0%ni, 99.2%id,  0.3%wa,  0.0%hi,  0.0%si,  0.2%st
Mem:   7633792k total,  7302168k used,   331624k free,    84456k buffers
Swap:        0k total,        0k used,        0k free,  6209852k cached

 PID    PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 7562   20   0  200g 1.0g 702m S  0.3 14.3   4:36.50 mongod 
```

这是mongostat：

```
insert  query update delete getmore command flushes mapped  vsize    res non-mapped faults     locked db idx miss %     qr|qw   ar|aw  netIn netOut  conn       time 
 0      2     12      0       0      13       0   100g   201g   911m       101g     11  amazon:38.9%          0       3|0     1|0     4k     4k    14   01:45:35 
 0      0      3      0       0       7       1   100g   201g   912m       101g     28   amazon:1.2%          0       0|0     0|0     1k     3k    14   01:45:36 
 0      2     14      0       0      15       0   100g   201g   912m       101g     93   amazon:4.6%          0       0|0     0|0     7k     4k    14   01:45:37 
 0      0      0      0       0       1       0   100g   201g   911m       101g    141   amazon:0.2%          0       0|0     0|0    62b     2k    14   01:45:38 
 0      6     24      0       0      25       0   100g   201g   913m       101g    123   amazon:6.4%          0       0|0     0|0     8k     6k    14   01:45:39 
 0      1      9      0       0      10       0   100g   201g   912m       101g     33   amazon:4.2%          0       0|0     0|0     3k     3k    14   01:45:40 
 0     12     59      0       0      58       0   100g   201g   914m       101g    108  amazon:30.0%          0       1|0     0|1    24k    12k    14   01:45:41 
 0     20     93      0       0      96       0   100g   201g   911m       101g    114  amazon:36.1%          0       0|0     0|0    33k    17k    14   01:45:42 
 0     19     84      0       0      86       0   100g   201g   913m       101g    103  amazon:43.9%          0       0|0     1|0    28k    16k    14   01:45:43 
 0      9     29      0       0      26       0   100g   201g   914m       101g     37   amazon:5.5%          0       5|0     0|1    11k     6k    14   01:45:44 
```

这是服务器状态：

```
> db.serverStatus()
{
    "host" : "XX-XX-XX-XX:25018",
    "version" : "2.2.3",
    "process" : "mongod",
    "pid" : 7562,
    "uptime" : 1410,
    "uptimeMillis" : NumberLong(1410211),
    "uptimeEstimate" : 1390,
    "localTime" : ISODate("2013-03-22T01:49:01.459Z"),
    "locks" : {
        "." : {
            "timeLockedMicros" : {
                "R" : NumberLong(563437),
                "W" : NumberLong(22798453)
            },
            "timeAcquiringMicros" : {
                "R" : NumberLong(303677814),
                "W" : NumberLong(59991149)
            }
        },
        "admin" : {
            "timeLockedMicros" : {
            },
            "timeAcquiringMicros" : {   
            }
        },
        "local" : {
            "timeLockedMicros" : {
                "r" : NumberLong(6613),
                "w" : NumberLong(0)
            },
            "timeAcquiringMicros" : {
                "r" : NumberLong(1937433),
                "w" : NumberLong(0)
            }
        },
        "amazon" : {
            "timeLockedMicros" : {
                "r" : NumberLong(203845605),
                "w" : NumberLong(651848025)
            },
            "timeAcquiringMicros" : {
                "r" : NumberLong(621538184),
                "w" : NumberLong(1525509360)
            }
        },
        "test" : {
            "timeLockedMicros" : {
                "r" : NumberLong(5143),
                "w" : NumberLong(999532)
            },
            "timeAcquiringMicros" : {
                "r" : NumberLong(157712),
                "w" : NumberLong(60)
            }
        }
    },
    "globalLock" : {
        "totalTime" : NumberLong(1410211000),
        "lockTime" : NumberLong(22798453),
        "currentQueue" : {
            "total" : 0,
            "readers" : 0,
            "writers" : 0
        },
        "activeClients" : {
            "total" : 0,
            "readers" : 0,
            "writers" : 0
        }
    },
    "mem" : {
        "bits" : 64,
        "resident" : 945,
        "virtual" : 205577,
        "supported" : true,
        "mapped" : 102383,
        "mappedWithJournal" : 204766
    },
    "connections" : {
        "current" : 14,
        "available" : 805
    },
    "extra_info" : {
        "note" : "fields vary by platform",
        "heap_usage_bytes" : 190782680,
        "page_faults" : 68002
    },
    "indexCounters" : {
        "btree" : {
            "accesses" : 274412,
            "hits" : 274412,
            "misses" : 0,
            "resets" : 0,
            "missRatio" : 0
        }
    },
    "backgroundFlushing" : {
        "flushes" : 23,
        "total_ms" : 89781,
        "average_ms" : 3903.521739130435,
        "last_ms" : 929,
        "last_finished" : ISODate("2013-03-22T01:48:32.243Z")
    },
    "cursors" : {
        "totalOpen" : 0,
        "clientCursors_size" : 0,
        "timedOut" : 0
    },
    "network" : {
        "bytesIn" : 11325630,
        "bytesOut" : 181775584,
        "numRequests" : 67850
    },
    "opcounters" : {
        "insert" : 157,
        "query" : 6898,
        "update" : 29954,
        "delete" : 0,
        "getmore" : 0,
        "command" : 30902
    },
    "asserts" : {
        "regular" : 0,
        "warning" : 0,
        "msg" : 0,
        "user" : 1,
        "rollovers" : 0
    },
    "writeBacksQueued" : false,
    "dur" : {
        "commits" : 27,
        "journaledMB" : 0.36864,
        "writeToDataFilesMB" : 1.241313,
        "compression" : 0.2963027264769924,
        "commitsInWriteLock" : 0,
        "earlyCommits" : 0,
        "timeMs" : {
            "dt" : 3269,
            "prepLogBuffer" : 0,
            "writeToJournal" : 442,
            "writeToDataFiles" : 4,
            "remapPrivateView" : 23
        }
    },
    "recordStats" : {
        "accessesNotInMemory" : 32752,
        "pageFaultExceptionsThrown" : 1656,
        "amazon" : {
            "accessesNotInMemory" : 32752,
            "pageFaultExceptionsThrown" : 1656
        },
        "local" : {
            "accessesNotInMemory" : 0,
            "pageFaultExceptionsThrown" : 0
        },
        "test" : {
            "accessesNotInMemory" : 0,
            "pageFaultExceptionsThrown" : 0
        }
    },
    "ok" : 1
} 
```

有人给我一些建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T07:30:10.513

我有类似的问题。服务器有时开始挂断。我对查询进行了一些更改，希望它能解决。现在我得到这些错误的频率降低了。

我做了什么：

1.  尽可能使用聚合而不是原始 js
2.  使我的查询尽可能小。在我的 js 执行脚本中，我使循环变小并引入了分页。
3.  使用 $lt 而不是限制。
4.  仅在 find() 上获取所需的字段值。
5.  对我用来查找的键字段使用索引。索引字段的搜索速度更快。
6.  限制 $in 查询的元素数量
7.  我使用 php ORM 将我的对象保存为 mongo 文档。我的一些文件非常大。我将某些文档拆分为较小的文档，以便快速保存。

希望这些提示有所帮助。

# asp.net-mvc-4 - 带有 Windows 身份验证的 IIS 7.5 中托管的 asp.net MVC 4 + WebAPI 提供 401 未经授权的错误

> ID：15561557
> 
> 赞同：0
> 
> 时间：2013-03-22T02:10:56.260
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我在 IIS 7.5 中使用 Windows 身份验证托管了 asp.net MVC 4 + WebAPI。当我从 MVC4 视图调用 WebAPI 时，它给了我 401 未经授权的错误。但它在我的本地主机上工作得很好。

我已经在我的 AuthenticationModule 类的两个地方（Thread.CurrentPrincipal 和 HttpContext.Current.User）设置了主体。

我尝试使用 System.Web.HTTP AuthorizeAttribute。

当我使用 Jquery 控制台进行调试时，我可以看到上下文主体为空。

让我知道以下内容。

1.  IIS 托管配置？
2.  如何设计 WebAPI 验证/授权来自视图的调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:54:49.603

```
Could you show me how are you calling the web api? If you are calling it with an
httpclient you should provide a handler. I show you below:

        var handler = new HttpClientHandler()
        {
            UseDefaultCredentials = true
        };

        var client = new HttpClient(handler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T21:57:59.717

我的处理程序注册有问题；我忘了在 system.webServer 下添加它；

**实际配置：**

```
<configuration>
            <system.web>
                <httpModules>
                    <add .........../>
                </httpModules>
            </system.web>
        </configuration 
```

**新增配置：**

```
<configuration>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
            <add .........../>
        </modules>
    </system.webServer>
</configuration 
```

# apache - 带有 h5ai 的 HTTP 源在 XBMC 中显示为空

> ID：15561569
> 
> 赞同：1
> 
> 时间：2013-03-22T02:11:48.180
> 
> 标签：apache, xbmc

我在将自定义源添加到我的 XBMC 设置时遇到了一些问题。我已经启动并运行了一个 Apache2 服务器，我用它来将电影流式传输到我的计算机，并希望将它作为 XBMC 中的源包含在内。我不是网络服务器专家，但我设法在我的服务器上获得了 h5ai 风格的索引，我想保留它。问题是启用 h5ai 后，XBMC 无法找到任何文件。禁用 h5ai 后，我可以毫无问题地浏览我的文件。

显而易见的解决方案是关闭 h5ai，但由于我在 XBMC 之外使用我的服务器，所以我想找到一种方法来让它保持打开状态。当谈到网络服务器时，我很新，所以很可能我只是做错了什么。我只是按照将 _h5ai 文件夹放在我的路径中并编辑 .htaccess 的说明进行操作。如果有人能对这个问题有所了解（解决方案或简单的解释），我将不胜感激。

附加信息：我正在运行 XBMC 12.0。我的服务器是租用的种子箱，所以我没有 root 权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:44:51.133

最简单的解决方案是专门为 XBMC 创建一个子目录并添加一个 .htaccess 文件，以防止 h5ai 索引它：

```
DirectoryIndex  index.html 
```

然后让 HTTP 源包含所述子目录的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T00:55:17.543

我有同样的问题，并通过从 .htaccess 中删除“IndexOptions IconsAreLinks”来修复它

# html - 当我单击任何选项卡时，不知何故我在所选选项卡上的颜色不会改变？有什么建议么？

> ID：15561570
> 
> 赞同：0
> 
> 时间：2013-03-22T02:11:51.087
> 
> 标签：html, css, tabs, navigation, selected

我在下面粘贴我的代码，请尽快帮助我（假设将所选标签的颜色更改为白色，但不知何故它没有这样做）我不知道现在是什么问题，请帮助我！！！！

CSS 代码：

```
#navigation {
margin-top: 20px;
width: 235px;
display:block;
list-style:none;
z-index:3;
}
#navigation a{
color: #444;
display: block;
background: #fff;
background: rgba(255,255,200,0.5);
line-height: 50px;
padding: 0px 20px;
text-transform: uppercase;
margin-bottom: 6px;
box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
font-size: 18px;
}
#navigation a:hover {
background: #ddd;
} 
```

HTML 代码：

```
<div id="header">
      <ul id="navigation">
      <li><a id="link-home" href="index.html">Home</a></li>
      <li><a id="link-portfolio" href="portfolio.html">Portfolio</a></li>
      <li><a id="link-contact" href="contact.html">Contact</a></li>
          </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:26:42.080

试试这个：

```
<style>
#navigation li.selected a {
    background:#fff;
}
</style>
<li class="selected"><a id="link-home" href="index.html">Home</a></li> 
```

# java - Java - 扫描程序不会删除所有需要的对象

> ID：15561577
> 
> 赞同：0
> 
> 时间：2013-03-22T02:12:44.253
> 
> 标签：java, arrays, string, java.util.scanner

我正在尝试制作某种“邪恶的刽子手游戏”（漂亮的斯坦福 CS 练习）。游戏的目的是通过删除尽可能多的单词解决方案来“作弊”，以便用户在最后之前无法猜测。

我做了一个循环（如下），它似乎删除了许多可能的词，但由于某种原因它并没有删除所有这些词。输入是一个dictionary.txt 文件，其中包含大约120K 个单词。

当我“猜测”字母“a”时，它将带走大约 60-70% 的带有“a”的单词（根据输出与 txt 文件中前几个单词之间的比较估计）

```
File file = new File("dictionary.txt");
    Scanner textScan = new Scanner(file);

     List<String> wordList = new ArrayList<String>();

     while ( textScan.hasNext() )
        {
            word = textScan.next();
            wordList.add(word);

        }
     System.out.println("The ArrayList has " + wordList.size() + " objects stored in it.");

     Scanner textScan1 = new Scanner(file);

    for(int i = 0; i <= guessNumber; i++)

    {   
        Collections.sort(wordList);

        System.out.println("Type in your guess as a letter ");
        String guess = keyboard.next();
        guess = guess.toLowerCase();

     while ( textScan1.hasNext() )
    {
        String word1 = textScan1.next();
        if (wordLength != word1.length() && word1.contains(guess))
            {
            wordList.remove(word1);
            }

    }
    } 
```

我知道我的代码此时有点混乱，我正在努力改进我的编程方面的一切，因此非常感谢所有反馈！我有一种感觉，我包含了一些不必存在的东西等等。

如果有帮助，我将在下面发布整个代码：

```
import java.util.*;
import java.lang.*;
import java.io.*;

public class EvilHangman 

{

public static void main(String[] args) throws IOException
{
    // declaring variables
    int wordLength;
    int guessNumber;

    // initiate the scanner
    Scanner keyboard = new Scanner( System.in );

    // introduction and prompting the user for word length

    System.out.println("Welcome to Hangman. Let's play! ");
    System.out.println("Please enter the desired word length: ");
    wordLength = keyboard.nextInt();

    while(wordLength < 0 || wordLength > 26)
    {
        System.out.println("This is not a valid word length. ");
        System.out.println("Please enter the desired word length: ");
        wordLength = keyboard.nextInt();
    }

    // prompt the user for number of guesses 

    System.out.println("How many guesses do you want to have? ");
    guessNumber = keyboard.nextInt();

    while(guessNumber < 0)
    {
        System.out.println("Number of guesses has to be a postive integer. ");
        System.out.println("Please enter the desired number of guesses: ");
        guessNumber = keyboard.nextInt();
    }

    // count the number of words with the specified length

    /* int wordCount = 0;
    String word = null;
    while ( textScan.hasNext() )
    {
        word = textScan.next();
        if (word.length() == wordLength)
            {
            wordCount++;
            }

    }
    */

    // prompts the user whether he/she wants a running count of word length - using next() instead of nextLine() to clear buffer

    /* System.out.println("Do you want a running total of number of words remaining? ");
    String runningTotal = keyboard.next();

    if (runningTotal.equalsIgnoreCase("yes"))
        System.out.println("Words with that length: " + wordCount);
    */  

    // create a list (array) of all the words that matches the input length
    String word = null;

    File file = new File("dictionary.txt");
    Scanner textScan = new Scanner(file);

     List<String> wordList = new ArrayList<String>();

     while ( textScan.hasNext() )
        {
            word = textScan.next();
            wordList.add(word);

        }
     System.out.println("The ArrayList has " + wordList.size() + " objects stored in it.");

     Scanner textScan1 = new Scanner(file);

    for(int i = 0; i <= guessNumber; i++)

    {   
        Collections.sort(wordList);

        System.out.println("Type in your guess as a letter ");
        String guess = keyboard.next();
        guess = guess.toLowerCase();

     while ( textScan1.hasNext() )
    {
        String word1 = textScan1.next();
        if (wordLength != word1.length() && word1.contains(guess))
            {
            wordList.remove(word1);
            }

    }
    }

    System.out.println("The ArrayList has " + wordList.size() + " objects stored in it.");
    System.out.println(wordList); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:37:30.097

最后发现它与扫描仪有关。它必须在循环内启动

```
for(int i = 1; i <= guessNumber; i++)

    {   
        Scanner textScan2 = new Scanner(file1);         
        System.out.println("Type in your guess as a letter ");
        String guess = keyboard.next();
        //System.out.print(guess);

     while ( textScan2.hasNext() )
    {

         String word1 = textScan2.next();
        if (wordLength != word1.length() || (word1.contains(guess)))
            {
            wordList.remove(word1);
            }

    }
    } 
```

# opengl - 三角形面上表面法线的插值和 Goroud 着色

> ID：15561579
> 
> 赞同：-1
> 
> 时间：2013-03-22T02:12:52.037
> 
> 标签：opengl, graphics, shader, render

我的问题在此[链接](https://math.stackexchange.com/questions/337452/interpolation-of-surface-normals-on-the-face-of-a-triangle-and-goroud-shading)中有详细说明。

我链接它而不是复制粘贴，因为在这里我似乎无法让花哨的数学符号在这里正确显示。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:25:02.283

您的问题比 gouraud 和 phong 着色背后的整个理论要长得多。
令人困惑的数学符号在计算机图形中并不常见：

所以用两句话来说：
gouraud shading 会在顶点处对颜色进行双向插值。你不能对此有亮点。
后来发明了 phong 着色，它适用于曲面，由于法线插值而显示出高光。

**现在一句话：** 

gouraud 插值角颜色，而 phong 插值法线

更新：gouraud 着色使用了脸角的颜色。颜色由该角处的表面法线计算。对于由三角形或其他网格近似的圆形物体，角落仍然相关。对于每个角，通过取该角的法线计算一种颜色。在圆形网格的情况下，将取相邻面中心法线的平均值。
对于立方体，不会使用相邻面的平均值。
然后 gozraud 着色通过 3 种颜色的双线性插值对脸部进行着色。如果你有超过三个角，那么你必须先对脸部进行三角测量。

# android - Android字符串变量（HH：mm）到长变量毫秒

> ID：15561580
> 
> 赞同：1
> 
> 时间：2013-03-22T02:12:59.340
> 
> 标签：android, string, time, format, long-integer

我有一个这种格式的字符串变量`"HH:mm"`。假设变量值为 05:30。

我如何能够从字符串中获取这些数字并计算：

(05 * 60 * 60 * 1000) + (30 * 60 * 1000) 并将该数字（毫秒）放入一个新的 long 变量中。

基本上我需要将字符串时间变量转换为毫秒长变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:32:47.140

让我们`s`包含感兴趣的字符串。然后例如你可以说

```
 String s = "5:30";
    Pattern p = Pattern.compile("(\\d+):(\\d+)");
    Matcher m = p.matcher(s);
    if (m.matches()) {
        int hrs = Integer.parseInt(m.group(1));
        int min = Integer.parseInt(m.group(2));
        long ms = (long) hrs * 60 * 60 * 1000 + min * 60 * 1000;
        System.out.println("hrs="+hrs+" min="+min+" ms="+ms);
    } else {
        throw Exception("Bad time format");
    } 
```

对于它的价值，一天只有 86,400,000 毫秒，所以你不需要`long`. 一个`int`足够大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:26:54.357

你可以使用`SimpleDateFormat`类

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

String inputString =  yourTime + ":00.000"; //Added to string to make HH:mm:ss.SSS format

Date date = sdf.parse("1970-01-01 " + inputString);
System.out.println("in milliseconds: " + date.getTime()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T02:33:17.107

```
public static void main(String[] args) throws IOException {
    SimpleDateFormat simpleDateFormate = new SimpleDateFormat("HH:mm");
    simpleDateFormate.setTimeZone(TimeZone.getTimeZone("UTC"));
    String inputString = "05:30";
    Date date = null;
    try {
        date = simpleDateFormate.parse( inputString);
    } catch (ParseException e) {
        e.printStackTrace();
    }
    System.out.println("in millSeconds: " + date.getTime());  
    long yourvar=date.getTime();
} 
```

使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# list - 如何将元组列表转换为单个列表

> ID：15561585
> 
> 赞同：0
> 
> 时间：2013-03-22T02:14:03.350
> 
> 标签：list, tuples, python-3.3

我想转换这个元组列表：

```
 [('AIA', 'Auckair', 1.50),
             ('AIR', 'Airnz', 5.60),
             ('AMP', 'Amp',3.22), 
             ('ANZ', 'Anzbankgrp', 26.25),
             ('ARG', 'Argosy', 12.22),
             ('CEN', 'Contact', 11.22),
             ('CNU', 'Chorus',3.01),
             ('DIL', 'Diligent', 5.3),
             ('DNZ', 'Dnz Property', 2.33),
             ('EBO', 'Ebos', 1.1),
             ('FBU', 'Fletbuild', 3.2),
             ('FPH', 'Fisherhealth', 16.12),
             ('FRE', 'Freightway', 6.71),
             ('FSF', 'Fonterra', 9.93),
             ('GMT', 'Goodmanprop', 3.52),
             ('GPG', 'Guinnesspeat', 2.32),
             ('HLG', 'Halglass', 0.2)] 
```

进入个人列表。例如 [AIA, Auckair, 1.5] 和 [AIR, Airnz, 5.60] 等等。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:26:57.073

假设您的原始元组列表存储在 arr 中。然后

```
newArr = []
for a in arr:
    a = [j for j in a]
    newArr.append(a) 
```

这应该使 newArr 成为列表列表。所以不是 [('AIA', 'Auckair', 1.50), ('AIR', 'Airnz', 5.60), ('AMP', 'Amp',3.22)... ] 你会有 [['AIA ', 'Auckair', 1.50], ['AIR', 'Airnz', 5.60], ['AMP', 'Amp',3.22]...]

那是你要找的吗？

# tortoisehg - TortoiseHg Workbench 永远“寻找变化”

> ID：15561586
> 
> 赞同：4
> 
> 时间：2013-03-22T02:14:05.537
> 
> 标签：tortoisehg

我正在使用 TortoiseHg Workbench 将一些更改（其大小非常小）推送到远程服务器，底部的输出日志显示“正在搜索更改”。它只是永远呆在那里..当我试图关闭窗口或取消命令时，上面的“同步命令已经运行”会显示一条消息。

当我通过windows任务管理器强制关闭Tortoise并重新启动时，我看到更改确实被推送了......

有人对此有任何想法吗？

# c - 当 free() 从堆中释放块时会发生什么？

> ID：15561597
> 
> 赞同：4
> 
> 时间：2013-03-22T02:15:23.693
> 
> 标签：c, memory, memory-management, malloc, heap-memory

所以我在堆中分配了 256 个块：

```
char* ptr1 = malloc(128);
char* ptr2 = malloc(128); 
```

现在，在我释放 ptr2（我假设当前位于堆顶部）之后，程序中断（堆的当前位置）不会减少。但是，如果我执行另一个 malloc，则 malloc 返回的地址与释放的地址相同。

所以我有以下问题：

当我释放一个块时，为什么程序中断没有减少？当我调用 free 时到底发生了什么？它如何跟踪释放的内存以便下次我声明 malloc 时地址是相同的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:49:02.300

这是未指定的行为。您不能依赖任何单一的答案，除非您只关心一个特定的平台/操作系统/编译器/libc 组合。您没有指定操作系统，C 标准没有描述或要求任何特定的实现。从 C99 开始（我还没有 C11 的最终发布版本）：

7.20.3

> 连续调用 calloc、malloc 和 realloc 函数分配的存储顺序和连续性是未指定的。如果分配成功，则返回的指针经过适当对齐，以便可以将其分配给指向任何类型对象的指针，然后用于访问已分配空间中的此类对象或此类对象的数组（直到空间被显式释放） . 已分配对象的生命周期从分配一直延伸到解除分配。每个这样的分配都应产生一个指向与任何其他对象不相交的对象的指针。返回的指针指向分配空间的开始（最低字节地址）。如果无法分配空间，则返回空指针。如果请求的空间大小为零，则行为是实现定义的：要么返回空指针，要么

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:47:25.387

这本 GNU libc[手册](http://www.gnu.org/software/libc/manual/html_node/Freeing-after-Malloc.html)可能会有所帮助。

这是要点

> 有时，free 实际上可以将内存返回给操作系统，并使进程更小。通常，它所能做的就是允许稍后调用 malloc 来重用空间。同时，该空间作为 malloc 内部使用的空闲列表的一部分保留在您的程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:19:00.170

> 当我释放一个块时，为什么程序中断没有减少？

我相信它不会减少，因为该内存已被赋予程序。

> 当我打电话时`free()`到底发生了什么？

那段内存被标记为可分配的，它以前的内容可以被覆盖。

考虑这个例子......

```
[allocatedStatus][sideOfAllocation][allocatedMemory]
                                   ^-- Returned pointer 
```

考虑到这一点，`free()`然后可以将 标记`[allocatedStatus]`为 false，因此堆上的未来分配可以使用该内存。

> 它如何跟踪`free()`d 内存以便下次我声明 `malloc()`地址相同？

我认为不会。它只是扫描了一些空闲内存，发现前一个块被标记为空闲。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T02:27:04.253

我相信，一旦您调用 free()，这完全取决于操作系统，它可能会选择立即回收该内存或不关心，并将该内存段标记为以后可能的获取（可能是同一件事）。据我所知，内存（如果重要）在 Windows 上的 free() 之后立即在任务管理器中显示为可用。

请记住，我们在这里谈论的内存是**虚拟**的。所以这意味着操作系统可以告诉你它想要的任何东西，并且可能不是机器物理状态的准确表示。

想想如果你正在编写一个操作系统，你将如何管理内存分配，你可能不想做任何可能会浪费资源的仓促操作。我们这里讨论的是 128 字节，你想浪费宝贵的处理时间单独处理它吗？这可能是这种行为的原因，也可能不是，至少是合理的。在一个循环中执行它，然后在另一个循环中执行 free() 或者只是分配大块内存，看看会发生什么，进行实验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T02:30:08.660

这是内存分配器如何工作的粗略想法：

你有一个分配器，它有一堆“bin”（“空闲列表”），它们只是空闲内存块的链接列表。每个 bin 都有与其相关联的不同块大小（即：您可以有一个包含 8 字节块、16 字节块、32 字节块等的列表……甚至是任意大小，如 7 或 10 字节块）。当您的程序请求内存（通常通过 malloc()）时，分配器会转到适合您的数据的最小 bin 并检查其中是否有任何空闲内存块。如果不是，那么它将从操作系统请求一些内存（通常称为页面）并将它返回的块切割成一堆更小的块来填充 bin。然后它将这些空闲块之一返回给您的程序。

当您调用 free 时，分配器获取该内存地址并将其放回它来自的 bin（又名空闲列表）中，每个人都很高兴。:)

内存仍然可以使用，因此您不必保留分页内存，但就您的程序而言，它是免费的。

# asp-classic - 经典的 asp 土耳其字符不显示

> ID：15561604
> 
> 赞同：1
> 
> 时间：2013-03-22T02:16:10.130
> 
> 标签：asp-classic

我的网站在来自数据库时不显示土耳其语字符。

显示的不是土耳其语字符，而是问号。

我已经把`charset=UTF-8`,`ISO-8859-9`和`windows-1254`放在了 , 和`Response.Charset = "UTF-8"`页面的顶部。

[链接查看](http://www.kampuster.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:38:41.447

除了你的输出字符集，你还应该设置你的服务器端***代码页***。

您可以
在 page 指令中将代码页设置为 UTF-8：

```
<%@ Language="VBSCRIPT" CODEPAGE="65001"%> 
```

- 或使用响应对象：

```
<% 
Response.CodePage = "utf-8"
%> 
```

如果这没有帮助，请确保您已使用 UTF-8 编码保存了您的经典 asp。（等待你的编辑）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-21T13:43:10.753

我解决了这个问题

```
response.codepage = 1254
response.charset = "windows-1254"
response.lcid = 1055 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:18:15.613

尝试将其更改为与数据库相同的字符编码

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-26T20:41:54.533

我通常在 Sublime Text（免费版）中编写代码，在尝试了元标记（charset=UTF-8、ISO-8859-9 和 windows-1254）之后似乎没有任何效果。我认为问题可能是 Sublime 文本，所以我将代码转移到 Notepad++ 并在顶部菜单中将编码更改为 UTF-8，保存它，然后将该文件上传到主机。结果它奏效了。

# android - 如何使用设备后退按钮从活动中清除数据

> ID：15561605
> 
> 赞同：2
> 
> 时间：2013-03-22T02:16:14.923
> 
> 标签：android, button, android-activity, reload

我创建了一个 android 应用程序，它在活动 A 中有 3 个活动（A、B、C），有 2 个自动完成功能`textview`，在自动完成文本用户按下按钮中选择数据后从数据库和按钮中获取数据，然后进入下一个显示的活动`listview`。

现在的问题是，当我按下设备后退按钮时，`listview`显示活动 A 与自动文本中的选定数据如何在按下设备后退按钮时避免选定数据。

感谢您提前帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:15:26.317

为了解决这个问题，我将简单地覆盖 onBackPressed() 方法，并且在那里，我将清除活动堆栈，因为没有逻辑解释将活动保留在内存中，然后对您的原始活动开始一个新的意图。这是代码。

```
@Override
public void onBackPressed() {

     Intent intent = new Intent(this, Activity_A.class);      //I suppose they are in same package

     intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
     startActivity(intent);

} 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:30:22.767

当您按下返回按钮时，活动 A 将“恢复”。因此，在您的活动 A 中覆盖“onResume”...在 onResume 方法中，清除您的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:44:00.943

当您尝试清除上一个活动中的字段时，listactivity 的后退按钮没有任何内容。由于您在创建列表活动时没有完成以前的活动，因此以前的活动不会改变。因此，当您从列表中返回时，您所说的数据与以前相同。按照@Dave 的建议这样做，您可以在 oResume 方法或 onPause 方法中完成清除。但有一个问题。如果您在 onResume 或 onPause 中清除数据，您的数据将因其他暂停或恢复原因（如按主页或其他应用程序等）而被清除。因此您可以执行以下两项中的任何一项

**选项1：**

启动列表活动时清除上一个活动的数据

或者

**选项 2：**

而不是`startActivity`调用`startActiviyForResult`，也覆盖`onActiviyResult`方法。因此，您可以检测到您何时从列表活动中返回。然后清除数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-12T06:52:24.553

```
protected void onResume(){
    super.onResume();
    setContentView(R.layout.activity_main);
} 
```

这也很好用..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-12T07:20:03.230

你应该实现 startActivityforResut 当你回到这个活动的结果时，你可以清除数据

# c# - 是否有一个函数可以在 C# 中为字节数组执行循环位移？

> ID：15561607
> 
> 赞同：4
> 
> 时间：2013-03-22T02:16:33.403
> 
> 标签：c#, arrays, bytearray, bit-manipulation

我似乎无法找到是否有一种内置方法可以对字节数组进行循环位移，C 的[ROL 和 ROR](http://osix.net/modules/article/?id=320)过去对单个字节做了什么？

让我解释一下，比如说，我有一个数组（二进制）：

```
[0] = 11001110
[1] = 01000100
[2] = 10100001 
```

然后如果我想做`ROL_Array(1 bit)`或将位向左移动 1 位，我会得到：

```
[0] = 10011100
[1] = 10001001
[2] = 01000011 
```

或者，如果我想做`ROR_Array(2 bits)`或向右移动 2 位，我会得到：

```
[0] = 00110011
[1] = 01010001
[2] = 10101000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T03:04:55.467

这并不像你想象的那么简单。在此线程关闭之前，这是一个快速版本：

```
public static byte[] ROL_ByteArray(byte[] arr, int nShift)
{
    //Performs bitwise circular shift of 'arr' by 'nShift' bits to the left
    //RETURN:
    //      = Result
    byte[] resArr = new byte[arr.Length];

    if(arr.Length > 0)
    {
        int nByteShift = nShift / (sizeof(byte) * 8);   //Adjusted after @dasblinkenlight's correction
        int nBitShift = nShift % (sizeof(byte) * 8);

        if (nByteShift >= arr.Length)
            nByteShift %= arr.Length;

        int s = arr.Length - 1;
        int d = s - nByteShift;

        for (int nCnt = 0; nCnt < arr.Length; nCnt++, d--, s--)
        {
            while (d < 0)
                d += arr.Length;
            while (s < 0)
                s += arr.Length;

            byte byteS = arr[s];

            resArr[d] |= (byte)(byteS << nBitShift);
            resArr[d > 0 ? d - 1 : resArr.Length - 1] |= (byte)(byteS >> (sizeof(byte) * 8 - nBitShift));

        }
    }

    return resArr;
} 
```

这是一个测试：

```
byte[] arr = new byte[] {
    Convert.ToByte("11001110", 2),
    Convert.ToByte("01000100", 2),
    Convert.ToByte("10100001", 2),
    };

byte[] arr2 = Auth.ROL_ByteArray(arr, 1);

string sss = "";
for (int i = 0; i < arr2.Length; i++)
    sss += Convert.ToString(arr2[i], 2) + ", ";

Debug.WriteLine(sss); 
```

# qt - 检测 QLineEdit 或 QPushButton 上的输入

> ID：15561608
> 
> 赞同：47
> 
> 时间：2013-03-22T02:16:43.540
> 
> 标签：qt, python-3.x, pyqt, keypress, qlineedit

我已经为游戏构建了一个应用程序，上手简单。这是一个游戏，系统随机选择一个数字，游戏玩家（玩家）试图找出这个数字。一切都快完成了。该应用程序由一个`QLineEdit`、一个标签和三个按钮组成。一旦应用程序告诉玩家想要的号码范围，他/她就会输入一个*bet_number*并点击播放按钮。根据这个号码，他/她会收到一条消息，说明想要的号码离*bet_number*有多近或多远。

但是我觉得点击一个按钮有点恶心。相反，我想使用**Enter 键**来播放。因此，要实现这一点，它具体归结为两个问题：

1.  如何改变使用 Enter 播放（我的意思是我需要知道何时`QLineEdit`检测到 Enter 键被按下）？这样，我将正确编码以指向播放方法。

2.  如果播放按钮获得焦点，你如何在这个按钮上使用回车键？（使 Button 接受 Enter 键）

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-22T10:16:41.150

用于[`QLineEdit`](https://doc.qt.io/qt-6/qlineedit.html)连接[`returnPressed`](https://doc.qt.io/qt-6/qlineedit.html#returnPressed)信号。

或者，如果您在s[`setAutoDefault`](https://doc.qt.io/qt-6/qpushbutton.html#autoDefault-prop)上使用该方法，则在按下焦点时发出信号：[`QPushButton`](https://doc.qt.io/qt-6/qpushbutton.html)[`clicked`](https://doc.qt.io/qt-6/qabstractbutton.html#clicked)`Enter``QPushButton`

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonOK = QtGui.QPushButton(self)
        self.pushButtonOK.setText("OK")
        self.pushButtonOK.clicked.connect(self.on_pushButtonOK_clicked)
        self.pushButtonOK.setAutoDefault(True)

        self.lineEditNumber = QtGui.QLineEdit(self)
        self.lineEditNumber.returnPressed.connect(self.pushButtonOK.click)

        self.layoutHorizontal = QtGui.QHBoxLayout(self)
        self.layoutHorizontal.addWidget(self.pushButtonOK)
        self.layoutHorizontal.addWidget(self.lineEditNumber)

    @QtCore.pyqtSlot()
    def on_pushButtonOK_clicked(self):
        inputNumber = self.lineEditNumber.text()
        if inputNumber.isdigit():
            info = "You selected `{0}`"

        else:
            info = "Please select a number, `{0}` isn't valid!"

        print info.format(inputNumber)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-22T10:15:43.960

`QLineEdit``returnPressed()`只要用户在其中按下回车键，就会发出信号：http: [//qt-project.org/doc/qt-4.8/qlineedit.html#signals](http://qt-project.org/doc/qt-4.8/qlineedit.html#signals)。您可以将此信号连接到按钮的`click()`插槽，也可以直接调用`clicked()`连接到按钮的任何信号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-02T20:50:27.070

其他答案的轻微 C++ 变化，它没有显着不同，但我想我还是会包括它，因为你在 QT 代码中放置东西的方式可能因代码库而异，我想去掉无关的东西以给出最短的和最容易理解的代码摘录。

```
 QLineEdit *TextSend = new QLineEdit("");
  QPushButton *SendPB = new QPushButton("Send!");

  connect(TextSend, &QLineEdit::returnPressed, this, &CLITab::SendCommand);
  connect(SendPB, &QPushButton::released, this, &CLITab::SendCommand); 
```

所以这样做是我们创建了一个 QLineEdit 文本框和一个 QPushbutton。

我们做一些装饰性的事情，比如为它们设置字符串标签并将它们添加到我们的布局中。

然后我们设置一个回调处理程序，它将在 QLineEdit 返回“returnPressed”时触发，然后自动调用我编写的名为“CLITab::SendCommand()”的函数，然后由该函数提取数据的 QLineEdit 并做任何需要做的事情。实际上，TextSend 和 SendPB 指针将存在于父类中，因此 SendCommand() 对这些对象具有可见性。

只是把它放在这里，旁边是一个示例按钮，因为本质上它们以完全相同的方式工作，不同的是发出的信号名称。

# oop - 如何在 perl / perl5 中将子例程转换为对象/包？

> ID：15561611
> 
> 赞同：1
> 
> 时间：2013-03-22T02:16:49.693
> 
> 标签：oop, perl

**主要.pl**：

```
#!/usr/bin/perl
use strict;
use warnings;
use v5.14;
use ReadData;

my $read = ReadData->new();
my @name = $read->getNames();
$read->printNames(@name); 
```

**读取数据.pm**：

```
#!/usr/bin/perl
package ReadData;
use strict;
use warnings;
use v5.14;

#

sub new {
    my $class = shift;
    my $self = {};
    bless $self, $class;
    return($self);
}

sub getNames {
    # read in data
    my @data;
    print "\nName of first matrix? ";
    chomp($data[0] = <>);
    print "\nName of second matrix? ";
    chomp($data[1] = <>);
    return(@data);
}

sub printNames {
    my @name = @_;
    print "\nname1: " . $name[0];
    print "\nname2: " . $name[1];
}

1; 
```

我在另一个版本的主程序中有这些子例程，在那里一切正常。我不调用该对象，并且输入名称正确反映在输出中，如下所示：

```
my @name = getNames();
printNames(@name);

sub getNames { same as above . . . }
sub printNames{ same as above . . . } 
```

我粘贴在最顶部的代码在技术上是可行的，因为它运行并提供输出，但输出不正确。

当我输入“A”作为名字，输入“B”作为第二个名字时，这就是我得到的：

```
>>> perl alt.pl

Name of first matrix? A

Name of second matrix? B

name1: ReadData=HASH(0x1d082f0)
name2: A 
```

谁能帮我解决这个问题？我一直在网上阅读 50 篇 perl 教程，但我无法思考我应该做什么。我唯一的其他真正的编程经验是 Java 中的 OOP，我不遵循这个 perl 构造函数的东西。. .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:22:02.680

我认为您缺少的主要是当您在对象上调用方法时：

```
$read->printNames(@name); 
```

对象本身 ( ) 作为第一个参数`$read`传入方法 ( `printNames`)，在所有常规参数之前。（在 Java 中，这是隐式发生的——对象只是神奇地作为可用的`this`——但在 Perl 中它是显式的——对象是`$_[0]`.）所以，您可以更改`printNames`为：

```
sub printNames {
    my $this = shift;
    my @name = @_;
    print "\nname1: " . $name[0];
    print "\nname2: " . $name[1];
} 
```

（当然，在 Perl 中，就像在 Java 中一样，实例方法更常见的是与对象有关。你的`printNames`方法很奇怪，因为它根本不使用它`$this`。但这应该让你开始。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T04:40:45.400

您可能希望将数据存储在对象中，而不是来回复制：

**替代品：**

```
#!/usr/bin/perl
use strict;
use warnings;
use ReadData;

my $read = ReadData->new();
$read->getNames();
$read->printNames(); 
```

**读取数据.pm：**

```
package ReadData;
use strict;
use warnings;

#

sub new {
    my $class = shift;
    my $self = {};
    bless $self, $class;
    return($self);
}

sub getNames {
    my $self = shift;
    # read in data
    print "\nName of first matrix? ";
    chomp($self->{name1} = <>);
    print "\nName of second matrix? ";
    chomp($self->{name2} = <>);
    return;
}

sub printNames {
    my $self = shift;
    print "\nname1: " . $self->{name1};
    print "\nname2: " . $self->{name2};
}

1; 
```

# php - ORDER BY RAND() 总是在 IE 上给出相同的行

> ID：15561616
> 
> 赞同：3
> 
> 时间：2013-03-22T02:17:38.890
> 
> 标签：php, jquery, html, sql, ajax

我有一个 javascript 函数（由按钮调用），它对 php 文件执行 ajax 请求。php 文件连接到数据库并从我的数据库中回显一个随机行。负责此的php代码：

```
$value = $db->get_row("SELECT * FROM mytable ORDER BY RAND() LIMIT 1");
echo $value; 
```

一切正常！在所有浏览器（IE 除外）上，我每次都可以按下按钮并获取随机行。但是在 IE 上它给了我相同的行，直到我刷新页面。我尝试了所有版本的 IE，在我刷新页面之前，该行不会改变。

知道它可能是什么吗？

提前致谢！

这里有更多代码：

```
function getdata(){
    var data = $.ajax({
            url: "getmydata.php",
            async: false
        }).responseText;

    passdata(data); 
} 
```

编辑：我知道 ORDER BY RAND 不好，但我只有 10 行！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:28:58.617

是的，IE 因积极缓存请求和忽略 HTTP 标头而不缓存内容而臭名昭著。在我们的应用程序中，当我们有一个*必须*从服务器刷新的 AJAX 请求时，我们在 url 中使用一个缓存破坏随机数：

```
url: "getmydata.php?rand="+Math.random() 
```

`?`用于添加[查询字符串参数](http://en.wikipedia.org/wiki/Query_string)，如果您不处理它们，它将不会对请求产生影响。由于 url 每次都是唯一的，因此永远无法缓存。

* * *

**编辑**：正如@GNi33 所指出的，[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)`cache`中已经内置了一个功能，可以使用名为set的参数强制缓存破坏`false`：

```
var data = $.ajax({
    url: "getmydata.php",
    cache: false,    /* ADD THIS to prevent IE caching */
    async: false
}).responseText; 
```

这些解决方案中的任何一个都足够了。

# ios - NSTimer 线程问题

> ID：15561617
> 
> 赞同：2
> 
> 时间：2013-03-22T02:17:40.213
> 
> 标签：ios, nstimer

我有实现 NSTimer 对象的单例。

我使用下面的代码运行我的计时器

```
self.myTimer = [NSTimer scheduledTimerWithTimeInterval: 1.0
                                                        target: self
                                                        selector: @selector(onTick:)
                                                        userInfo: nil repeats:YES]; 
```

我有`NSUInteger`实例变量，每次`- onTick:`调用方法时都会增加（所以，每秒一次）。

我有`UILabel`它代表我的 `NSUInteger`实例变量的日期，它工作得很好。在我看来，我`UIScrollView`也有。当我滚动它时，我`UILabel`不会更新文本。即使在方法中显示有关计时器滴答信息的 NSLog 也`- onTick:`不起作用。如果我不滚动计时器开始工作。

# delphi - Zeos 和/或 SQLite 因 Memo 崩溃

> ID：15561620
> 
> 赞同：-1
> 
> 时间：2013-03-22T02:18:14.253
> 
> 标签：delphi, zeos

我有一个 10,000 字节的 VARCHAR2 字段，在启动过程中，Zeos 因数据大小无效而崩溃。通过它，有问题的大小，Zeos 显示 4,223,943，我同意，应该是无效的。

目前看来，SQLite 不会在备忘录中存储超过 255 个字节，现在 Zeos 不会让我拥有 10,000 个 VARCHAR2。

我尝试了 5000 并且效果很好，但我需要更多。

我应该看看 SQLite 以外的东西吗？

请提出想法和建议。

谢谢（使用 D5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:32:27.657

这是 TDataset 及其后代的限制，请参见 dsMaxStringSize=8192。您不能使用 (VAR)CHAR 数据类型。Sqlite 本身将字符串保存为“无限”长度的 ASCIIZ。

# php - 如何正确显示存储在 MySQL 数据库中的不可红色字符

> ID：15561629
> 
> 赞同：3
> 
> 时间：2013-03-22T02:19:35.643
> 
> 标签：php, mysql

我已经`São Tomé and Príncipe`存储在 MySQL 数据库中。

它在我的网页上显示为`S�o Tom� and Pr�ncipe`

无论如何直接从数据库中正确显示它？

我的 MySQL 类型是`MyISAM`，排序规则是`utf8_general_ci`

我的网页字符集是`<meta charset="utf-8">`

字段类型设置为`varchar(30)`，字段排序规则与表相同`utf8_general_ci`

**PHP 功能测试**

`utf8_decode()`转换字符到`S?o Tom? and Pr?ncipe` `htmlspecialchars_decode()`转换字符到`S�o Tom� and Pr�ncipe` `html_entity_decode()`转换字符到`S�o Tom� and Pr�ncipe` `quoted_printable_decode()`转换字符到`S�o Tom� and Pr�ncipe` `htmlentities()`返回空白结果

**多亏了@SAEVEN，它才能工作**

在我的查询 SELECT 之前运行这个

`mysqli_query($GLOBALS['db_link'], "SET NAMES 'utf8'");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:50:11.147

可能是您需要在连接级别指定命名空间排序规则吗？

我假设您已经了解了基础知识，您的 HTML 标记中的字符集为 utf8。

在执行任何数据库查询之前尝试执行此 SQL 语句：

'设置名称 utf8'

例如，如果您使用的是 PDO

```
// do your regular connection logic whatever it is
$dbc = new PDO( .... );
$dbc->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$dbc->query( 'SET NAMES utf8' );

// run your queries beneath
.... 
```

或者可以使用速记

```
new PDO(
    'mysql:host=mysql.example.com;dbname=awesome_db',
    "username",
    "password",
    array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")
); 
```

无论您使用什么 DBAL，该查询都会起作用。在拉取数据之前，只需在用于拉取数据的同一连接上运行它（只需执行一次）

# r - 如何在 R 中合并表？

> ID：15561631
> 
> 赞同：3
> 
> 时间：2013-03-22T02:20:00.677
> 
> 标签：r

我正在尝试合并两个表。每个月我都会收到新数据。将新数据添加到现有数据框对我来说很方便。我不寻求合并它们，因为它们是相同的变量。

一个小例子如下： M 和 N 具有相同的维度。我想将 M 和 N 结合在一起

提前致谢

```
M <- structure(list(ID= c(56L, 67L, 68L, 73L, 77L, 87L), Mary = c(73L, 
82L, 80L, 78L, 79L, 80L), Dave = c(45L, 42L, 51L, 46L, 60L, 54L
), Anne = c(78L, 85L, 92L, 83L, 77L, 89L), Bob = c(51L, 49L, 
58L, 54L, 62L, 68L)), .Names = c("ID", "Mary", "Dave", "Anne", 
"Bob"), class = "data.frame", row.names = c(NA, -6L))

N <- structure(list(ID= c(53L, 22L, 21L, 73L, 727L, 27L), Mary = c(72L, 
82L, 80L, 78L, 79L, 80L), Dave = c(45L, 42L, 51L, 46L, 62L, 54L
), Anne = c(78L, 85L, 92L, 22L, 77L, 89L), Bob = c(52L, 49L, 
58L, 54L, 62L, 628L)), .Names = c("ID", "Mary", "Dave", "Anne", 
"Bob"), class = "data.frame", row.names = c(NA, -6L)) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T02:34:43.940

这可能就是您所需要的：

```
MN <- rbind(M, N) 
```

如果两个 data.frames 有不同的列，那么我会推荐这个：

```
library(plyr)
MN <- rbind.fill(M, N) 
```

最后，如果您需要删除重复项：

```
MN <- MN[!duplicated(MN),] 
```

# vba - 从 Word 文档中删除前导空格

> ID：15561633
> 
> 赞同：2
> 
> 时间：2013-03-22T02:20:07.223
> 
> 标签：vba, ms-word

如何从 Word 文档的第一页中删除所有前导空格（空格、空行）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:19:56.497

编辑：原来我想要的是从文档的开头删除所有空段落或仅包含空格的段落。以下宏`DeleteLeadingWhitespace`执行此操作并保留格式。

```
' return True if the character at the given position is a whitespace character.
' codepoints courtesy of http://en.wikipedia.org/wiki/Whitespace_character#Unicode
Function IsSpace(ByVal Text As String, Optional ByVal Position As Long = 1)

    Select Case AscW(Mid(Text, Position, 1))
        Case &H9, &HA, &HB, &HC, &HD, &H20, &H85, &HA0, _
                &H1680, &H180E, &H2000, &H2001, &H2002, &H2003, &H2004, &H2005, &H2006, _
                &H2007, &H2008, &H2009, &H200A, &H2028, &H2029, &H202F, &H205F, &H3000
            IsSpace = True

        Case Else
            IsSpace = False
    End Select

End Function

' return True if the paragraph consists only of whitespace
Function IsParagraphEmpty(ByVal pg As Paragraph)

    Dim i As Long

    For i = 1 To Len(pg.Range.Text)
        If Not IsSpace(pg.Range.Text, i) Then
            IsParagraphEmpty = False
            Exit Function
        End If
    Next

    IsParagraphEmpty = True
End Function

' delete leading whitespace from the given document.
Sub DeleteLeadingWhitespaceFrom(ByVal Document As Document)

    While IsParagraphEmpty(Document.Paragraphs.First)
        Dim i As Long
        i = Document.Paragraphs.Count

        Document.Paragraphs.First.Range.Delete

        ' no change in number of paragraphs, bail
        If i = Document.Paragraphs.Count Then Exit Sub

    Wend

End Sub

' macro: delete leading whitespace from the active document
Sub DeleteLeadingWhitespace()

    DeleteLeadingWhitespaceFrom ActiveDocument

End Sub 
```

# oracle - 游标在运行时打开时偶尔会丢失数据

> ID：15561634
> 
> 赞同：0
> 
> 时间：2013-03-22T02:20:12.870
> 
> 标签：oracle, stored-procedures, oracle10g, cursor

这是我的带有 SELECT 语句的游标，它总是返回正确的结果。但是当我在程序中使用它时，有时会得到错误的结果（只返回一行）。

这个问题出现的频率很高（每 1000 个过程调用约 5-10 次）。也许这是 oracle 10gR2 的已知问题或我的程序中的一些缺点。

我希望我能理解为什么会发生这种情况并获得更好的解决方案，因为我每天会接到大约 5000 个程序调用。

这是我在程序中声明的光标：

```
CURSOR cur_result (var_num NUMBER)
    IS
        SELECT
            m_username,
            m_password
        FROM
            M_USERS
        WHERE
            m_status   = 1
        AND rownum    <= var_num; 
```

这是我的程序主体：

```
p_num:=5;

-- the IF statement for guarantee the SELECT statement always
-- get more rows than p_num

LOCK TABLE M_USERS IN EXCLUSIVE MODE;
OPEN cur_result (p_num);
LOOP
    FETCH
            cur_result 
        INTO
            p_username,
            p_password;
    -- the problems here: only 1 row is queried
    --                    the LOOP will exit after second time fetch
    IF (cur_result%NOTFOUND AND (cur_result%ROWCOUNT < p_num) ) THEN
        iserror    := 1;
        EXIT;
    END IF;

    EXIT WHEN cur_result%NOTFOUND;

    UPDATE
            M_USERS
        SET
            m_status = 2
        WHERE
                m_username = p_username
            AND m_password = p_password;
END LOOP;

CLOSE cur_result; 
```

提前致谢。

# r - R 使用 rownames() 将字符串转换为数字

> ID：15561637
> 
> 赞同：0
> 
> 时间：2013-03-22T02:20:27.737
> 
> 标签：r, matrix

我有一个像这样的数字矩阵“测试”

```
 [1,] 474.00 478.81 468.25 474.98    474.98
 [2,] 463.25 470.00 454.12 468.22    468.22
 [3,] 456.47 466.50 452.58 457.35    454.70
 ... 
```

并且想要赋值`rownames`，它们是日期字符串（存储在变量 a 中`names`）。

```
> names
 [1] "2013-02-08" "2013-02-07" "2013-02-06" ... 
```

当我在我的矩阵上调用 rowname 函数时，字符串被转换为我不明白的数字。有人知道将名称中的字符串保留为行名称的解决方案吗？`enter code here`

```
rownames(test) <- names

15744 474.00 478.81 468.25 474.98    474.98
15743 463.25 470.00 454.12 468.22    468.22
15742 456.47 466.50 452.58 457.35    454.70
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:24:44.617

尝试`rownames(test) <- as.character(names)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:43:08.433

我没有足够的代表来回复您的评论，但我认为这些数字是基于日期的差异。默认情况下，当 R 检测到日期输入时，它表示为自 1970 年 1 月 1 日以来的天数，较早的日期为负值。

见： http: [//www.statmethods.net/input/dates.html](http://www.statmethods.net/input/dates.html)

编辑：作为测试，我接受了您的第一个输入（2013 年 2 月 8 日）并计算了它与 1970 年 1 月 1 日之间的差异，我确实得到了与您的行名匹配的 15,744 天。

# jquery - 使用 Gmap3 的点击式 GroundOverlay

> ID：15561639
> 
> 赞同：1
> 
> 时间：2013-03-22T02:20:35.477
> 
> 标签：jquery, google-maps, dom, jquery-gmap3

在使用 Gmap3 和 PNG 覆盖构建坐标追踪应用程序时，我遇到了将 PNG 图像用作地面覆盖的问题。当点击事件在图片范围内时，地图元素上的点击事件不生效。

我尝试`pointer-events: none`在图像元素和父 div 上使用 CSS，这只是阻止了地图上任何地方的点击事件。我尝试使用切换功能从地图中隐藏 div/img，但边界内仍然没有点击事件。

我还尝试在叠加层上设置单击事件，不幸的是，叠加层上没有可用的 latLng 属性，因此该方法也被废弃了。

我的临时解决方案是有两个绝对定位的地图，相同的坐标，但一个没有覆盖，一个有，一个切换按钮隐藏带有覆盖的地图，要求用户在屏幕上按下他们的手指并通过滥用切换按钮进行跟踪。显然，当人们因为位置丢失而缩放/平移地图时，这会成为一个问题。

[http://jsfiddle.net/abestic9/TTRTg/](http://jsfiddle.net/abestic9/TTRTg/)

我怎样才能允许这种手动地图追踪的方法，或者有没有更简单的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-23T14:59:45.707

对于那些在这里寻找一种方法来捕获 GoogleMaps v3（不是 gmap3）上 GroundOverlays 上的点击的人，您可以像点击地图一样捕获这些：

```
function main(){
  map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
  google.maps.event.addListener(map, 'click', mapClicked);

  var bounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(25.1875,-124.6875),
    new google.maps.LatLng(52.8125,-67.0625)
  );

  var newoverlay = new google.maps.GroundOverlay('image.png', bounds);
  newoverlay.setMap(map);
  google.maps.event.addListener(newoverlay,'click',mapClicked);
}

function mapClicked(event){
  console.log(event.latLng);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:54:47.550

你不需要2张地图。latLng 不可用于 gmap3-groundoverlay 的点击事件，但可用于 native `google.maps.GroundOverlay`：

```
google.maps.event.addListener(
    //the google.maps.GroundOverlay
  $('#map').gmap3({get:{name:'groundoverlay',all:false}}), 
  'click', 
  function(e) {
    //trigger click-event for the map
  google.maps.event.trigger($('#map').gmap3('get'), 'click', e);
});

google.maps.event.addListener(
  $('#map').gmap3('get'), 
  'click', 
  function(e) {
    //your code
}); 
```

# ruby-on-rails - 使用 Omniauth 时将设计默认路由从提供程序方法更改为在控制器中创建方法

> ID：15561640
> 
> 赞同：1
> 
> 时间：2013-03-22T02:20:42.457
> 
> 标签：ruby-on-rails, ruby, devise, omniauth

我正在尝试使用 Devise 和 Omniauth 来允许用户使用 Rails 3.2 应用程序登录多个提供商。我让它工作，但只有当它转到控制器中的 twitter、facebook 或 tumblr 方法时，我希望所有提供程序都转到 create 方法。这就是我有这样做的路线： match '/auth/:provider/callback' => 'authentications#create'

```
 resources :authentications

  match '/auth/:provider/callback' => 'authentications#create'
  devise_for :users, path_names: {sign_in: "login", sign_out: "logout"},
    controllers: {omniauth_callbacks: "authentications"}

  root to: 'authentications#index' 
```

我的 rake 路线显示：

```
 user_omniauth_authorize        /users/auth/:provider(.:format)        authentications#passthru {:provider=>/twitter|facebook|tumblr/}
  user_omniauth_callback        /users/auth/:action/callback(.:format) authentications#(?-mix:twitter|facebook|tumblr) 
```

我希望 user_omni_auth_callback 路由到 authentications#create 而不是特定的提供者。使用当前设置，我得到“无法为 AuthenticationsController 找到操作 'twitter'”，因为我不包括它。最好的方法是什么？

# c# - 会话状态存储提供程序示例 - Microsoft 示例

> ID：15561641
> 
> 赞同：0
> 
> 时间：2013-03-22T02:20:44.357
> 
> 标签：c#, .net, session, session-state

我正在尝试使用 Microsoft 的此示例实现会话状态提供程序：

[http://msdn.microsoft.com/en-us/library/ms178589.aspx](http://msdn.microsoft.com/en-us/library/ms178589.aspx)

但我无法编译它，因为 .NET 会抛出此错误：

```
Error   1   
'Project.Session.OdbcSessionStateStore' does not implement inherited abstract member     'System.Web.SessionState.SessionStateStoreProviderBase.CreateNewStoreData(System.Web.HttpContext, int)'

Error   2   'Project.Session.OdbcSessionStateStore.CreateNewStoreData(System.Web.HttpContext, double)' is a new virtual member in sealed class 'Project.Session.OdbcSessionStateStore'

Error   3   'Project.Session.OdbcSessionStateStore.CreateNewStoreData(System.Web.HttpContext, double)': no suitable method found to override 
```

具有 CreateNewStoreData 覆盖的确切代码：

```
 //
    // SessionStateProviderBase.CreateNewStoreData
    //

    public override SessionStateStoreData CreateNewStoreData(
      HttpContext context,
      double timeout)
    {
        return new SessionStateStoreData(new SessionStateItemCollection(),
          SessionStateUtility.GetSessionStaticObjects(context),
          (int)timeout);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:26:26.680

样本中有错误。您需要更改**SessionStateStoreData**方法签名以使用 int 作为 timeout 参数，因为这就是[基类中方法签名的定义方式](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatestoreproviderbase.createnewstoredata%28v=vs.100%29.aspx)。（这个类重写了基方法，所以方法签名必须相同。）

```
 public override SessionStateStoreData CreateNewStoreData(
          HttpContext context,
          int timeout) 
```

这意味着您还必须确保传递给此方法的参数是 int，而不是 double。我相信示例类在 GetSessionStoreItem 中只包含一个调用。您所要做的就是将值转换为 int，如下所示：

```
 if (actionFlags == SessionStateActions.InitializeItem)
          item = CreateNewStoreData(context, (int) pConfig.Timeout.TotalMinutes);
      else
          item = Deserialize(context, serializedItems, timeout); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T03:27:16.357

从您的 MSDN 链接，类`OdbcSessionStateStore`继承自`SessionStateStoreProviderBase`抽象类。[点击这里](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatestoreproviderbase.aspx)了解更多信息

由于您必须重写抽象类中的所有抽象方法（除非您创建的类也是抽象类），因此在此示例中您将需要重写抽象方法`CreateNewStoreData`。[点击这里](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatestoreproviderbase.createnewstoredata.aspx)了解更多信息

覆盖方法签名时应该匹配。在您的 MSDN 链接的示例代码中，签名是

```
public override SessionStateStoreData CreateNewStoreData(
      HttpContext context,
      double timeout) 
```

在实际情况下应该在哪里

```
public override SessionStateStoreData CreateNewStoreData(
    HttpContext context,
    int timeout
) 
```

注意区别`double timeout`而不是`int timeout`

# java - 在 Java GUI 中使用 Arraylists 存储密码

> ID：15561643
> 
> 赞同：0
> 
> 时间：2013-03-22T02:20:53.087
> 
> 标签：java, swing, arraylist

我正在上我的第一个计算机编程课程，我的任务是创建一个允许用户预订机票的程序。这是我第一次使用 Java GUI，到目前为止我已经成功了，除了我无法让我的程序识别输入的密码。我在下面粘贴了我的代码。有人可以告诉我如何解决这个问题吗？谢谢！这是我的课：

```
public class OptionGUI extends JPanel  implements ActionListener
{
   ArrayList<String>passworddatabase= new ArrayList();
   ArrayList<String> usernamedatabase= new ArrayList();
   JButton newaccount = new JButton("Create a new account");
   JButton login= new JButton("Login");
   public int response;
  public OptionGUI()
  {

    newaccount.setVerticalTextPosition (AbstractButton.CENTER);
    newaccount.setHorizontalTextPosition(AbstractButton.LEADING);
    newaccount.setActionCommand("create");

    login.setVerticalTextPosition(AbstractButton.CENTER);
    login.setHorizontalTextPosition(AbstractButton.TRAILING);
    login.setActionCommand("login");
    login.setEnabled(true);

    newaccount.addActionListener(this);
    login.addActionListener(this);

    add(newaccount);
    add(login);
   }
  public void actionPerformed(ActionEvent e)
  {
   {
       if ("create".equals(e.getActionCommand()))
      {

        newaccount.setEnabled(true);
        login.setEnabled(false);

        JPanel logininfo= new JPanel();
        JLabel usernameLbl= new JLabel("Choose a username:");
        JLabel passwordLbl= new JLabel("Choose a password:");
        JTextField username= new JTextField();
        JPasswordField password= new JPasswordField();

        logininfo.add(usernameLbl);
        logininfo.add(username);
        logininfo.add(passwordLbl);
        logininfo.add(password);

        logininfo.setVisible(true);

        int input2 = JOptionPane.showConfirmDialog(frame,logininfo, "Create your account:"
                            ,JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        char[] enteredPassword= password.getPassword();
        char[] enteredPassword2= passwordconfirm.getPassword();
        String newusername= username.getText();
        String newpassword= String.valueOf(enteredPassword);
        String newpassword2= String.valueOf(enteredPassword2);

        String[] options = { "Login", "Cancel" };
        response = JOptionPane.showOptionDialog(null, "Your account has been successfully created! Please login to continue.", "Confirmation",JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, options,options[0]);                    

            }
        passworddatabase.add(newpassword);
        usernamedatabase.add(newusername);

        }
       if ("loginbutton".equals(e.getActionCommand())|| response==0)
       {  
        login.setEnabled(true);
        newaccount.setEnabled(false);
        JPanel panel= new JPanel();
        panel.setLayout(new GridLayout(2,2));
        JLabel usernameLbl = new JLabel("Username:");
        JLabel passwordLbl = new JLabel("Password:");
        JTextField username = new JTextField();
        JPasswordField passwordFld = new JPasswordField();

        panel.add(usernameLbl);
        panel.add(username);
        panel.add(passwordLbl);
        panel.add(passwordFld);

        panel.setVisible(true);

        int input = JOptionPane.showConfirmDialog(frame, panel, "Enter your password:"
                            ,JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        String inputPassword= String.valueOf(passwordFld);
        String inputUsername= username.getText();

        for(int i=0; i < passworddatabase.size(); i++) 
        {
         if (passworddatabase.get(i).contains(inputPassword))
        {
           JOptionPane.showMessageDialog(null, "Welcome to AIR Ticket Reservation!");
         }

        else
         {   JOptionPane.showMessageDialog(null, "The username or password you entered does not exist.", "Error",
                                    JOptionPane.ERROR_MESSAGE);
                }
            }                
        }
    }
}
    } 
```

还有我的司机：

```
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.JTextArea;
import javax.swing.JPasswordField;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JButton;
import javax.swing.JDialog;
import java.awt.GridLayout;
import java.util.Arrays;
import java.awt.EventQueue;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.AbstractButton;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

public class Driver 
{
   public static void main(String[] args)
    { 

        JFrame option= new JFrame ("Ticket Reservation");
        option.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        option.setSize(500,300);
        option.setLocationRelativeTo(null);
        OptionGUI newContentPane= new OptionGUI();
        option.setContentPane(newContentPane);

        option.setVisible(true);
    }             
} 
```

很长，但非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:35:26.160

我看到在 loginButton 操作命令处理中你可能有问题。你应该使用 JPasswordField 的值而不是 JPasswordFieldObject 本身。我很确定，你不是故意这样写的。请检查是否有帮助。

```
 String.valueOf(passwordFld.getPassword()); 
```

尝试输入密码字符串的上述代码行。

```
 String inputPassword= **String.valueOf(passwordFld);**
    String inputUsername= username.getText();

    for(int i=0; i < passworddatabase.size(); i++) 
    {
     if (passworddatabase.get(i).contains(inputPassword))
    { 
```

# sql - 根据其他两列获取第三列的数据

> ID：15561645
> 
> 赞同：2
> 
> 时间：2013-03-22T02:21:14.180
> 
> 标签：sql, oracle, oracle-sqldeveloper

这是一个示例表

```
ID  STOREA  STOREB  STOREC   AB   BC   CA  ABC
--- ------- ------  -------  --   --  ---  ---
10    1       0       0
10    0       1       0
10    0       1       0
29    0       1       0 
29    0       0       1
29    1       0       0 
```

每行对应于在商店 A 或 B 或 C 进行的购买。客户 10 在 A 和 B 商店但不在 c 商店。所以我想要`AB=1 BC=0 CA=0 ABC=0` 所有 ID=10 行和 ID=29，他在所有 3 个商店，所以我需要`AB=1 BC=1 CA=1 ABC=1`ID=29 的所有行（使用 ORACLE SQL）

我想更新表中的列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:35:30.627

这是您可以做到这一点的一种方法。我认为您不能`JOINs`在 Oracle 中使用 with`UPDATE`语句——但是，您可以通过使用来完成同样的事情`MERGE`：

```
MERGE
INTO    yourtable
USING   (
          select id as idnew, 
            case when a + b = 2 then 1 else 0 end abnew,
            case when b + c = 2 then 1 else 0 end bcnew,
            case when a + c = 2 then 1 else 0 end acnew,
            case when a + b + c = 3 then 1 else 0 end abcnew
          from (
            select 
              id,
              max(case storea when 1 then 1 else 0 end)  A,
              max(case storeb when 1 then 1 else 0 end)  B,
              max(case storec when 1 then 1 else 0 end)  C
            from yourtable
            group by id
          ) a
        )
ON      (id = idnew)
WHEN MATCHED THEN
UPDATE
SET     ab = abnew, 
  bc = bcnew,
  ac = acnew,
  abc = abcnew 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/326f7/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:25:49.283

以下是您可以如何做到这一点`select`：

```
update (select id, storea, storeb, storec, AB as new_AB, BC as new_BC, AC as new_AC, ABC as new_ABC
        from t join
             (select id,
                     (case when max(storeA) = 1 and max(storeB) = 1 then 1 else 0 end) as AB,
                     (case when max(storeB) = 1 and max(storeC) = 1 then 1 else 0 end) as BC,
                     (case when max(storeA) = 1 and max(storeC) = 1 then 1 else 0 end) as AC,
                     (case when max(storeA) = 1 and max(storeB) = 1 and max(storeC) = 1 then 1 else 0 end) as ABC
              from t
              group by id
             ) tsum
             on t.id = tsum.id
            )
     set AB = new_AB, AC = new_AC, BC = new_BC, ABC = new_ABC; 
```

我认为这可能有效：

```
select id, storea, storeb, storec, AB, BC, AC, ABC
from t join
     (select id,
             (case when max(storeA) = 1 and max(storeB) = 1 then 1 else 0 end) as AB,
             (case when max(storeB) = 1 and max(storeC) = 1 then 1 else 0 end) as BC,
             (case when max(storeA) = 1 and max(storeC) = 1 then 1 else 0 end) as AC,
             (case when max(storeA) = 1 and max(storeB) = 1 and max(storeC) = 1 then 1 else 0 end) as ABC
      from t
      group by id
     ) tsum
     on t.id = tsum.id
            )
     set AB = new_AB, AC = new_AC, BC = new_BC, ABC = new_ABC; 
```

# sql - 如何根据一组分层规则进行复杂的 SQL 选择？

> ID：15561658
> 
> 赞同：0
> 
> 时间：2013-03-22T02:22:34.267
> 
> 标签：sql, selection, hierarchical

这是我所拥有的：

T1 是来自复杂 SQL 的大量 ID 和总计。TA、PF 和 BL 是 3 个不同的表，用于保存不同的地址信息。

为了在 T1 中为每个 ID 获取正确的地址，需要遵循一组 3 条分层规则：

TA 是第一个使用 T1.ID 检查行是否存在的地址表。如果 TA 中存在一行，则获取地址并忽略检查表 PF 和 BL。

PF 是第二个地址表，用于检查我是否没有从 TA 返回任何带有 T1.ID 的信息。如果PF中存在一行，则获取地址并忽略检查表BL。

BL 是第三个地址表，用于检查我是否没有从 PF 返回任何具有 T1.ID 的内容，如果 BL 中存在一行，则获取地址。

现在我有如下代码，即使不使用 UNION 也可以单独运行很长时间！！！如何以有效的方式编写此逻辑？请帮忙！

```
select T1.ID, TA.ADDRESS,T1.TOTALS
from T1, TA
where T1.ID = TA.ID and TA.ADDRESS like "1"

UNION

select T1.ID, PF.ADDRESS,T1.TOTALS
from T1, PF
where T1.ID = PF.ID and PF.ADDRESS like "2"
and not exists(select 1
                from TA
               where TA.ID = T1.ID
                 and TA.ADDRESS like "1")
UNION

select T1.ID, BL.ADDRESS, T1.TOTALS
from T1, BL
where T1.ID = BL.ID and BL.ADDRESS like "3"
and not exists(select 1
                from TA
               where TA.ID = T1.ID
                 and TA.ADDRESS like "1")
and not exists(select 1
                from PF
               where PF.ID = T1.ID
                 and PF.ADDRESS like "2") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:16:08.130

首先，更改`ADDRESS like "1"`为`ADDRESS = "1"`. 在这种情况下，数据库引擎将能够使用 ADDRESS 上的索引（如果存在）。

`not exist`其次，如果你这样做，你可以摆脱：

```
select T1.ID, TA.ADDRESS,T1.TOTALS, TA.ADDRESS
from T1, TA
where T1.ID = TA.ID and TA.ADDRESS like "1"

UNION

select T1.ID, PF.ADDRESS,T1.TOTALS, PF.ADDRESS
from T1, PF
where T1.ID = PF.ID and PF.ADDRESS like "2"

UNION

select T1.ID, BL.ADDRESS, T1.TOTALS, BL.ADDRESS
from T1, BL
where T1.ID = BL.ID and BL.ADDRESS like "3"

ORDER BY 4 
```

正如您在上面的查询中看到的那样，我已将 包含`ADDRESS`到选定列的列表中并按此列排序。我已从`not exist`查询中删除。这意味着将选择所有地址，按优先级排序

现在，你有两个选择：要么使用应用程序只抓取第一行，而忽略其他，或者，如果你不能修改应用程序代码，那么你需要使用 TOP（对于 SQL Server），LIMIT（对于 MySql） , ROW_NUM (for Oracle) 技术来获取前 n 行。您还没有标记您使用的 RDBMS，所以，请自行查找

# spring - AWS EC2：从 tomcat 7 连接到 PostgreSQL

> ID：15561660
> 
> 赞同：0
> 
> 时间：2013-03-22T02:22:46.313
> 
> 标签：spring, amazon-web-services, amazon-ec2, tomcat7, postgresql-9.2

我已经在 AWS-Ec2 Micro 上安装了 tomcat7 和 postgreSQL9，我能够通过在我的本地 tomcat 7 服务器上运行的 spring 应用程序连接到 EC2 postgreSQL 实例。

当我在 EC2-tomcat7 服务器上部署相同的 war 文件时，它会引发以下错误。

```
Cannot create JDBC driver of class '' for connect URL 'jdbc:postgresql://ec2-user@x-x-x-x-x.us-x-x.compute.amazonaws.com/test'
java.sql.SQLException: No suitable driver
    at java.sql.DriverManager.getDriver(DriverManager.java:279) 
```

我已将 postgresql-9.1-901.jdbc3.jar 复制到 /usr/share/tomcat7/lib

我曾尝试使用 AWS 内部 IP ...不走运..

我不知道我做错了什么。具有相同配置的相同战争适用于本地 tomcat7。我错过了 AWS tomcat7 配置的任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T04:56:11.077

嗨，您似乎没有包含 postgresql jdbc jar。尝试包括它应该工作。

# arrays - 如何将数组哈希的值传递给子程序？

> ID：15561661
> 
> 赞同：1
> 
> 时间：2013-03-22T02:22:49.713
> 
> 标签：arrays, perl, hash, reference, subroutine

我有一个数组哈希。我正在尝试执行以下操作：当我循环遍历散列的键时，我想将散列的值（在本例中为数组）传递到子例程中。

一旦我进入子程序，我想对数组进行一堆计算，包括取数组中数值的平均值。最后根据计算返回一个值。

这是我所拥有的最小表示：

```
#!/usr/bin/perl
use warnings; use strict;
use List::Util qw(sum);

%data_set = (
    'node1' => ['1', '4', '5', '2'],
    'node2' => ['3', '2', '4', '12'],
    'node3' => ['5', '2', '3', '6'],
    );

foreach my $key ( keys %data_set ) {
    foreach ( @{$data_set{$key}} ) {
        my @array = split;   # it's not letting me 
        calculate(\@array);   ### I'm getting the error here!!
    }
}

sub calculate{
    my @array = @{$_};
    my $average = mean(\@array);
    # do some more calculations
    return; # return something
}

# sum returns the summation of all elements in the array
# dividing by @_ (which in scalar content gives the # of elements) returns
# the average
sub mean{
    return sum(@_)/@_;
} 
```

快速澄清：在第一次迭代`node1`中，我想将数组传递给`'1', '4', '5', '2'`子例程。

我认为就我的目的而言，这可能比将数组哈希的引用传递给每个子例程更有效。你们有什么感想？无论如何，你们能帮我解决这个问题吗？任何建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T03:09:12.633

我认为您对何时需要引用和取消引用变量以及传递的内容和位置感到有些困惑。

让我们仔细看看这个，

```
foreach my $key ( keys %data_set ) {
    foreach ( @{$data_set{$key}} ) {
        my @array = split;   # it's not letting me 
        calculate(\@array);   ### I'm getting the error here!!
    }
} 
```

您遍历散列以获取键，然后使用它们访问值以取消引用数组并将每个数组拆分为单个元素数组（字符串）。然后将对该 1 元素数组的引用传递给`calculate`. 基本上，如果您要做的唯一事情是将散列（数组）的每个值传递到`calculate`子例程中，那么您所做的工作就太多了。尝试这样的事情：

```
foreach my $key (keys %data_set){
    calculate($data_set{$key}); # This is already a reference to an array
} 
```

此外，`calculate`您需要更改`my @array = @{$_};`为`my @array = @{$_[0]};``my @array = @{(shift)};`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T04:25:35.727

您的平均子程序应如下所示：

```
sub mean{
    my @array = @{(shift)};
    return sum(@array)/scalar(@array);
} 
```

# jquery - 移除子布局中所有样式的 DOM

> ID：15561662
> 
> 赞同：0
> 
> 时间：2013-03-22T02:22:55.263
> 
> 标签：jquery, css

我有这段代码来显示一个对话框。

```
$("#duplicateDialog").dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    draggable: false,
    buttons: {
        "Cancel": function() {
            $(this).dialog("close");
        },
        "OK": function() {
            $(this).dialog("close");
        }
    }
});

$("#duplicateDialog").dialog("open"); 
```

问题是父布局已经改变了按钮的样式。

```
button {
    height: 22px!important;
    padding: 0 2px!important;   
} 
```

现在我想在子布局中删除上面的“高度”和“填充”。怎么做？

注意：`extends`包含上述按钮样式的另一个布局的子布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:27:55.700

您可以在 jquery 1.8+ 之上为您的对话框按钮猜测一个类

```
 ....
  buttons:{
               "cancel" : {

                "class": 'myClass', 
                click: function() {
}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:26:48.400

唯一会覆盖这些样式（如果它们存在）的是也具有 !important 的内联样式。所以，`<button style="height: 0 !important; padding: 0 !important;"></button>`.

您可以找到它们被 jQuery 添加的位置，可能使用 append() 或 prepend()。并在那里添加您的内联样式，例如：

```
$('.parent').append('<div class="yourSituation" style="border: 0; padding: 0;"></div>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:48:40.820

只是给您另一个选择... [Apprise](http://thrivingkings.com/read/Apprise-v2-The-new-and-improved-attractive-alert-alternative-for-jQuery)允许在按钮上自定义 css 类 - **className 。**

# image - 使用 XOR 的图像加密

> ID：15561668
> 
> 赞同：0
> 
> 时间：2013-03-22T02:23:49.927
> 
> 标签：image, opencv, encryption

好的，我正在处理一个视频处理项目，这包括对每一帧进行加密并将其写入文件（outputenc.avi）。我使用 key.jpg 使用 XOR 操作加密每个文件，并且进展顺利，但问题是在解密过程中我得到一个嘈杂的原始图像，密钥和正在处理的帧是尺寸为 384 * 288 的灰度图像。

加密

```
capWebcam.read(matOriginal);
if(matOriginal.empty()==true)
    return;
cv::Mat temp;
cv::resize(matOriginal,matOriginal,dsize,0,0,cv::INTER_CUBIC);
cv::cvtColor(matOriginal,matProcessed,CV_BGR2GRAY);

cv::bitwise_xor(matProcessed,key,temp);
output_enc_cap.write(temp); 
```

解密

```
capfile.read(temp);
if(temp.empty()==true)
      return;

cvtColor(temp,temp,CV_BGR2GRAY);
cv::bitwise_xor(temp,key,temp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:41:06.823

您的代码还有更多问题：

首先，将帧转换为灰度：

```
cv::cvtColor(matOriginal,matProcessed,CV_BGR2GRAY); 
```

然后将其发送到您的文件。从这一点开始，没有办法恢复您的彩色图像。

然后，您将使用（很可能有损）编解码器保存图像。有损编解码器会在此过程中丢失一些信息。它只保证压缩图像看起来与原始图像相似。不保证它会是相同的。并且因为“加密”的图像是噪声，结果也会是噪声。但可能是完全不同的噪音。

然后，这条线尝试就地执行无法就地工作的算法。但更重要的是，您在文件中写入了灰度图像，然后您尝试将其转换为灰度图像，就好像它是彩色一样。完全废话。

```
cvtColor(temp,temp,CV_BGR2GRAY); 
```

然后，您在一张不是“加密”图像的图像上尝试“解密算法”。

抱歉，您的代码中的每一行都是胡说八道。

所以，我的建议是从低处开始：了解编解码器，了解加密和安全，阅读其他人在这个主题上所做的事情，然后开始。

顺便说一句，创建自己的加密算法并不是最好的主意（至少当您不是密码学专家时）： [https ://security.stackexchange.com/questions/25585/is-my-developers-home-brew-password -安全正确或错误以及为什么](https://security.stackexchange.com/questions/25585/is-my-developers-home-brew-password-security-right-or-wrong-and-why)

# css - 在父 Div 中放置多个 Div（并排）

> ID：15561669
> 
> 赞同：7
> 
> 时间：2013-03-22T02:23:52.007
> 
> 标签：css, html, css-float, alignment

我的目标是将四个 div 放在一个“容器”div 中。到目前为止，这是我的代码：

**HTML**

```
<body>
     <div id="navBar">
         <div id="subDiv1">
         </div>
         <div id="subDiv2">
         </div>
         <div id="subDiv3">
         </div>
         <div id="subDiv4">
         </div>
     </div>
</body> 
```

**CSS**

```
#navBar
{
    width: 75%;
    height: 75px;
    margin-left: 25%;
    margin-right: auto;
    margin-top: 2%;
    border-width: 1px;
    border-style: solid;
    border-radius: 10px;
    border-color: #008040;
    overflow: hidden;
}

#subDiv1, #subDiv2, #subDiv3, #subDiv4
{
    width: 25%;
    height: 75px;
    border-width: 1px;
    border-color: #000;
    border-style: solid;
}
#subDiv1
{
    border-top-left-radius: 10px;
    border-bottom-left-radius: 10px;
    float: left;
    margin-left: 0%;
}
#subDiv2
{
    float: left;
    margin-left: 25%;
}
#subDiv3
{
    float: left;
    margin-left: 50%;
}
#subDiv4
{
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    float: left;
    margin-left: 75%;
} 
```

据我所知，这是我的代码中唯一与我的问题相关的部分，所以我省略了其他一些部分。不要介意导航栏的宽度和边距，因为它实际上也在另一个容器中。

PS 我搜索了 Google 和 StackOverFlow，但找不到有用的答案。有很多关于在一个 div 中放置两个 div 的问题，但没有一个关于在一个 div 中对齐多个 div 的问题。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T02:34:10.347

我会做两件事，摆脱浮动 div 上的边距并添加 box-sizing 规则。

**[jsFiddle 示例](http://jsfiddle.net/j08691/p6RZQ/)**

```
#navBar {
    width: 75%;
    height: 75px;
    margin-left: 25%;
    margin-right: auto;
    margin-top: 2%;
    border-width: 1px;
    border-style: solid;
    border-radius: 10px;
    border-color: #008040;
    overflow: hidden;
}
#subDiv1, #subDiv2, #subDiv3, #subDiv4 {
    width: 25%;
    height: 75px;
    border-width: 1px;
    border-color: #000;
    border-style: solid;
    box-sizing:border-box;
}
#subDiv1 {
    border-top-left-radius: 10px;
    border-bottom-left-radius: 10px;
    float: left;
}
#subDiv2 {
    float: left;
}
#subDiv3 {
    float: left;
}
#subDiv4 {
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:29:42.297

您可以使用`display: table`

```
.menu {
    display: table;
    width: 100%;
    border: 1px solid black;
    border-right: none;
    box-sizing: border-box;
}
.menu > div {
    display: table-row;
     background-color: green;
}
.menu > div >div {
    border-right: 1px solid black;
    display: table-cell;
    text-align: center;
}

@media screen and (max-width: 400px) {
    .menu {
        display: block;
        float: left;
        width: auto;
        border: none;
    }
    .menu > div {
        display: block;
    }
    .menu > div > div {
        border: none;
        padding-right: 10px;
        display: block;
        text-align: left;
    }
} 
```

[小提琴](http://jsfiddle.net/oceog/yzDyY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T02:35:01.713

我在您的 css 中看到的主要问题是您为每个浮动项目添加了边距。如果它是绝对定位的，这将是有意义的。因为它不是 div 会堆叠。删除边距将允许 div 适合容器：

[http://jsfiddle.net/eGLTM/](http://jsfiddle.net/eGLTM/)

```
#navBar
{
    width: 75%;
    height: 75px;
    margin-left: 25%;
    margin-right: auto;
    margin-top: 2%;
    border-width: 1px;
    border-style: solid;
    border-radius: 10px;
    border-color: #008040;
    overflow: hidden;
}

#subDiv1, #subDiv2, #subDiv3, #subDiv4
{
    width: 24%;
    height: 75px;
    border-width: 1px;
    border-color: #000;
    border-style: solid;
}
#subDiv1
{
    border-top-left-radius: 10px;
    border-bottom-left-radius: 10px;
    float: left;
    margin-left: 0%;
}
#subDiv2
{
    float: left;
}
#subDiv3
{
    float: left;
}
#subDiv4
{
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    float: left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T02:29:52.333

我认为您遇到的问题是您需要清除浮动。这可能不是最好的方法，但为了简单起见，添加： 在你的容器中`<div style="clear:both;"></div>`的最后一个之后（ ）。`<div>``#navBar`

# php - 更改多语言脚本的语言时出现问题

> ID：15561672
> 
> 赞同：0
> 
> 时间：2013-03-22T02:24:21.527
> 
> 标签：php

我做了一个多语言网站。它只包含两种语言：英语和法语。默认语言是英语，第二语言是法语 英语在网站上运行良好，但法语不能，因为在使用 URL (?lang=fr) 将语言更改为法语时，我得到随机字母（在这种情况下，我得到了 'F ') 如果我切换到 (?lang=de) 我得到 'D') 这意味着我得到了变量 $_GET["lang"] 的第一个字母 这是我的 lang.php 文件的代码

```
<?php
session_start(); 
if(isset($_GET['lang']))
 {
  $lang = $_GET['lang'];
  $_SESSION['lang'] = $lang;
  setcookie('lang', $lang, time() + (3600 * 24 * 30));
 }

  else if(isset($_SESSION['lang'])) {$lang = $_SESSION['lang'];}

  else if(isset($_COOKIE['lang'])) {$lang = $_COOKIE['lang'];}

  else {$lang = 'fr';}

  if($lang=='fr'){$lang_dir = 'fr.php';}
  else if ($lang=='en') {$lang_dir = 'en.php';}
  else {$lang_dir = 'fr.php';}

  include 'administration/includes/lang/'.$lang_dir;

   ?> 
```

# python - Tkinter 单选按钮产生帧

> ID：15561680
> 
> 赞同：0
> 
> 时间：2013-03-22T02:24:58.527
> 
> 标签：python, tkinter

我是 python2.7 和 Tkinter 的 GUI 业务新手。我正在尝试根据用户选择的 Radiobutton 创建一个新框架，例如菜单。当我单击一个单选按钮时，它会像我想要的那样创建一个新框架，但是如果我继续单击同一个单选按钮，它将创建另一个框架，另一个框架等。似乎无法弄清楚如何检查如果 Radiobutton 已被标记（仅单击一次）。

希望我说清楚了，感谢您的帮助！

```
class Books:
    """ Books() is the main class for creating the whole interface """
    def __init__(self):
    """ Initialize the first function in class Books() """

        self.library = "library.txt"
        self.filepath = os.getcwd() + "/" + self.library

        self.window = Tk()

        self.window.title("Personal library")
        self.window.wm_iconbitmap(default="myicon.ico")

        userChoice = Frame(self.window, height = 1, bd = 1, relief = RIDGE)
        userChoice.pack(side = TOP, pady = 10, padx = 5)

        self.menuChoice = IntVar()

        btAddBooks = Radiobutton(userChoice, text = "Add a new book to the library", value = 1, variable = self.menuChoice, command = self.processChoice)
        btAddBooks.grid(row = 1, sticky = W)

        btFindBooks = Radiobutton(userChoice, text = "Print info about a book", value = 2, variable = self.menuChoice, command = self.processChoice)
        btFindBooks.grid(row = 2, sticky = W)

        btPrintBooks = Radiobutton(userChoice, text = "Print all book titles in library", value = 3, variable = self.menuChoice, command = self.processChoice)
        btPrintBooks.grid(row = 3, sticky = W

    def processChoice(self):
        """ Used to handle user choice of Radiobuttons """
        if self.menuChoice.get() == 1:
            self.processAddBooks()
        elif self.menuChoice.get() == 2:
            self.processFindBook()
        elif self.menuChoice.get() == 3:
            self.processShowBooks(self.filepath)

    def processAddBooks(self):
        """ Add a new book to the library. """
        # Create a new frame
        questions = Frame(self.window, height = 1, bd = 1, relief = SUNKEN)
        questions.pack(fill = X, pady = 10, padx = 5)

        # Do stuff with frame here... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-16T21:35:20.360

好吧，如果您一次只需要打开一个帧，您可以`frame.destroy()`在实例化新帧之前调用前一帧。但是，这种方法需要`destroy`在第一次选择一个按钮时为 Tkinter 初始化一些东西，否则你会得到一个错误。出于我的目的，我只是用一个`destroy`什么都不做的方法创建了一个一次性类，然后使用该类的一个实例作为绑定到该变量的占位符，直到第一次创建我的 Toplevel 小部件。如果您希望同时打开多个框架，而不是相同选项的重复项，请尝试为每个框架使用不同的变量名称并仅创建框架`if not frame.winfo_exists()`--尽管我不是 100% 确定这不会受到同样的问题的影响，即在第一次创建框架之前需要分配给该变量的占位符。如果需要，占位符类将需要一个`winfo_exists()`方法，该方法将`return False`.

# ajax - 如何将 facebook / twitter 登录异步嵌入我的网站

> ID：15561690
> 
> 赞同：2
> 
> 时间：2013-03-22T02:25:48.257
> 
> 标签：ajax, twitter, facebook-login

我希望我的网站用户能够使用 facebook/twitter 登录。我从 facebook/twitter 开发者页面找到了代码。这工作正常。但我希望通过异步（ajax）请求来实现这些代码。[与http://list.ly](http://list.ly)登录窗口非常相似的东西。

# c# - 我们什么时候应该使用 ref 和 out

> ID：15561693
> 
> 赞同：-3
> 
> 时间：2013-03-22T02:26:05.350
> 
> 标签：c#, asp.net

我们什么时候应该真正使用 ref 和 out。我知道两者的区别。在您可以传递一个 ref 参数之前，您必须将它分配给一个值。这不是强制性的。

但是我们什么时候应该使用 ref。??

我读了这个，但没有得到，我什么时候应该使用 ref。

[http://www.dotnetperls.com/ref](http://www.dotnetperls.com/ref)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:30:47.490

这是一个例子：

```
 static void Main(string[] args)
    {

        int i = 1;

        foo(i);
        Console.Write(i); //i=1;

        Reffoo(ref i);
        Console.Write(i); //i=2;
    }

    static void Reffoo(ref int i)
    {
        i++;
    }

    static void foo(int i)
    {
        i++;
    } 
```

# actionscript-3 - 如何在 flashbuilder 4.6 / actionscript 3 中模拟微调器选择？

> ID：15561694
> 
> 赞同：0
> 
> 时间：2013-03-22T02:26:07.463
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5, flex4.6

我有一种情况，我使用 datespinner 组件来允许用户指定用于搜索功能的特定日期。我刚刚为左右滑动添加了手势，可以提前日期或转到上一个日期，并将微调器组件设置为新生成的日期......我想知道我如何以编程方式使微调器执行当一个人更改天月或年值时触发的操作。

现在日期微调器调用的函数（当对微调器值进行更改时）是：

```
protected function datespinner1_changeHandler(event:Event):void
    {
      .....   do some stuff here .....
    } 
```

所以我想在其他地方再次调用这个函数我可以这样做吗？我尝试了以下但没有奏效：

```
datespinner1_changeHandler(event:Event); 
```

提前感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T03:24:48.773

如果您实际上并未在“在这里做一些事情”部分中使用事件对象，则可以将函数更改为具有默认的空参数，例如

```
protected function datespinner1_changeHandler(event:Event=null):void 
```

然后像这样称呼它

```
datespinner1_changeHandler(); 
```

# drupal - 用于 Drupal 的 Memcache 或 Memcached 安装？

> ID：15561698
> 
> 赞同：3
> 
> 时间：2013-03-22T02:26:30.237
> 
> 标签：drupal, memcached

我一直在谷歌周围徘徊，现在一切都变得更加混乱。我想知道的是如何安装`Memcache`或`Memcached`. 即使安装哪一个，我仍然不确定。这非常令人困惑。

我在 Redhat RHEL 上。实际上我已经`Memcached`在我的 Web 服务器上安装了（使用 'd`）。然后根据文章，我启用了 Php Extension 等。那么应该发生什么？性能完全没有提升。

然后我觉得那还不够，我再次谷歌搜索。有人说要安装在 MySQL 服务器上。那么如果我将它安装在 MySQL 服务器上，那么应该配置的 PHP 扩展和 Drupal 模块呢？我真的不明白。

所以我有 Drupal 7，请以简单的方式让我知道哪个是正确的:(

*   `Memcache`还是`Memcached`？（为什么这两个如此混乱？）
*   放在哪里？
*   它真的需要 Drupal 模块才能工作吗？

请简单地给我一个直接的虚拟指南:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-03T18:42:19.393

“Memcache vs Memcached” - 第一个是模块（扩展），第二个是守护进程。完整解释请参见“ [Memcache 与 Memcached ”](https://stackoverflow.com/questions/1825256/memcache-vs-memcached)

“放在哪里？” - 你说你已经在你的服务器上安装了它，它应该可以用一些包管理器轻松安装，例如：

```
pecl install memcache 
```

“它真的需要 Drupal 模块才能工作吗？” - 是的，Drupal 需要知道您想要使用 memcache。Drupal 模块会将缓存、会话和锁定表移动到内存中（参见[https://drupal.org/project/memcache](https://drupal.org/project/memcache)）。

要使 memcache 模块工作，您需要将以下内容放入 settings.php （分别更改您的模块路径）：

```
# Memcache
$conf['cache_backends'][] = 'sites/all/modules/contrib/memcache/memcache.inc';
$conf['cache_default_class'] = 'MemCacheDrupal'; 
```

要查看它是否有效，请转到“admin/config/system/memcache”（这是 Drupal 7 路径）并打开“在每页底部显示 memcache 统计信息” - 如果一切正常，您应该会看到类似的内容页面底部：

```
OPERATION   BIN             KEY                         HIT
get         cache_bootstrap cache_bootstrap-variables   1 
```

# node.js - 无法在 node.js 中使用 express 运行客户端服务器

> ID：15561708
> 
> 赞同：0
> 
> 时间：2013-03-22T02:27:11.663
> 
> 标签：node.js, express, socket.io

嘿，我刚开始修补 node.js，我是一个完整的菜鸟。我正在尝试使用 socket.io 和 express 进行简单的客户端服务器通信（我以前从未使用过这些）。

这是我的应用程序代码（app.js）：

```
var     sys         = require('sys'),
        express     = require('express'),

        app         = express('localhost');
        http    = require('http'),
        server  = http.createServer(app),

        io          = require('socket.io').listen(server);

app.use(express.static(__dirname + '/public'));

app.get('/', function (req, res) {
    res.send('Hello World');
});

app.listen(3000);

var socket = require('socket.io').listen(server);

socket.on('connection', function (client){ 
  // new client is here!
  setTimeout(function () {
        client.send('Waited two seconds!');
    }, 2000);

  client.on('message', function () {
  }) ;

  client.on('disconnect', function () {
  });
}); 
```

这是我的客户端代码（client.html）：

```
<html>
<p id="text">socket.io</p>

<script src="/socket.io/socket.io.js"></script> 

<script> 
    $(document).ready(function(){

        var socket  = new io.Socket(),
                text        = $('#text');

        socket.connect();

        socket.on('connect', function () {
            text.html('connected');
        });

        socket.on('message', function (msg) {
            text.html(msg);
        });

        socket.on('disconnect', function () {
            text.html('disconnected');
        });

    });
</script> 
```

我的大部分代码来自： [NodeJS + socket.io: simple Client/Server example not working](https://stackoverflow.com/questions/6411070/nodejs-socket-io-simple-client-server-example-not-working)

并将其更改为与 express 3.x 兼容

但是，当我运行服务器并使用 chrome 打开客户端时，它告诉我它无法加载资源文件：///socket.io/socket.io.js

我已经使用 npm 安装了 express 和 socket.io

我也阅读了至少 20 篇类似的帖子，但无法找到答案

请帮我。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:15:19.660

socket.io.js 文件需要从端口 3000 提供服务，例如 localhost:3000。所以这就是你所做 `<script src="/socket.io/socket.io.js"></script>`的改变

```
<script src="http://localhost:3000/socket.io/socket.io.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:54:59.357

您是直接从本地文件系统打开 client.html 页面吗？socket.io.js 的请求应该看起来像`http://localhost/socket.io/socket.io.js`not `file:///socket.io/socket.io.js`。

# ruby-on-rails - 如何删除两个模型之间的连接表关联？

> ID：15561710
> 
> 赞同：1
> 
> 时间：2013-03-22T02:27:29.770
> 
> 标签：ruby-on-rails, rest, routes, form-for

我有以下模型和控制器设置：

楷模：

```
class Company < ActiveRecord::Base

  has_many :follow_companies, dependent: :destroy
  has_many :followers, through: :follow_companies, source: :user
end

#join table
class FollowCompany < ActiveRecord::Base

  attr_accessible :company_id

  belongs_to :user
  belongs_to :company
end

class User < ActiveRecord::Base

  #a user can follow many companies
  has_many :follow_companies, dependent: :destroy
  has_many :followed_companies, through: :follow_companies, source: :company
end 
```

控制器：

```
class FollowCompaniesController < ApplicationController
  def create
    company = Company.find params[:follow_company][:company_id]
    current_user.follow_companies.create! company_id:company.id
    redirect_to company
  end

  def destroy
    company = Company.find params[:id]
    current_user.follow_companies.find_by(company_id: company.id).destroy
    redirect_to company
  end
end 
```

联接表以及公司和用户是一种资源：

```
resources :users
resources :companies      
resources :follow_companies, only: [:create, :destroy] 
```

现在我想在我的前端有按钮让用户取消关注一家公司，假设他们已经关注了该公司：以下视图是公司展示操作的一部分，而不是 FollowCompany 展示操作视图：

```
<%= follow_company = current_user.follow_companies.find_by_company_id(@company.id) %>
<%= form_for(follow_company, :html => { :method => :delete }) do |f| %>
    <%= f.submit "Unfollow", class: "btn pull-right" %>
<% end %> 
```

但是，在浏览公司/节目时，我在上面的 form_for 行中收到错误：

```
ActionController::RoutingError at /companies/10
No route matches {:action=>"destroy", :controller=>"follow_companies", :format=>nil, :id=>#<FollowCompany user_id: 2, company_id: 10, created_at: "2013-03-21 23:34:36", updated_at: "2013-03-21 23:34:36">}
Request parameters  
{"action"=>"show", "controller"=>"companies", "id"=>"10"} 
```

为什么rails找不到路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:49:23.353

An alternative way to achieve this without writing a form is below. If you want you can do this with a single link.

```
<%= link_to "Unfollow", follow_compony_path(follow_company), :method => :delete %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:32:40.883

很确定你需要从 html args 中拉出 :method => :delete ：

```
<%= form_for(follow_company, :method => :delete) do |f| %> 
```

不确定这是否是唯一的问题，但这就是引起我注意的地方。

像这样的东西似乎也更优雅一些（自动创建一个表单）：

```
= button_to "Unfollow", follow_company_path(follow_company), :method => 'delete' 
```

# html - Outlook 2013 呈现问题：嵌套表截断相邻文本

> ID：15561711
> 
> 赞同：4
> 
> 时间：2013-03-22T02:27:51.377
> 
> 标签：html, html-email, html-rendering, outlook-2013

在开发 html 电子邮件通讯时，我经常使用类似于以下的结构：

```
<table width="244" border="0" cellpadding="0" cellspacing="0" bgcolor="#ffffcc">
<tr>
  <td>
        <table border="0" align="left">
        <tbody>
        <tr>
              <td bgcolor="#FFCCCC">text in the table cell.<br>and another line of text.<br>and a third line.</td>
        </tr>
        </tbody>
        </table>
Hello. This is sample text. This is another sentence. Hello. This is sample text. This is another sentence. Hello. This is sample text. This is another sentence.</td>
</tr> 
```

在浏览器中查看时，结果如下所示：

![在浏览器中查看](../Images/70d6e60e97274ebbf82949506245e804.png)

但是当由 Outlook 2013 呈现时，主（黄色）表中最左边的文本被截断：

![由 Outlook 2013 呈现](../Images/3ac69d3ec13f937e828f3e7915d098f4.png)

对此有解释或解决方法吗？

（我通常会在内部（粉红色）表格中放置一个图像而不是文本。这允许主要（黄色）文本似乎围绕图像流动的设计。无论是图像还是文本，结果都是相同的。主（黄色）表中的文本被截断，如此处所示。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:49:45.167

尝试在标题表上设置左对齐，在我的代码中这将适用于所有客户端。针对所有客户进行了试金石测试：

```
<table cellspacing="0" cellpadding="0" width="560" align="left" border="0">
<tbody>
    <tr>
        <td align="left">   
            <table cellspacing="0" cellpadding="0" align="left">
                <tbody>
                    <tr>
                        <!-- spacer for the top of the image -->
                        <td align="left" colspan="2">
                            <img src="spacer.gif" height="5" alt="spacer" style="display:block; margin:0px; border:0px;" align="left" />
                        </td>
                    </tr>
                    <tr>
                        <!-- the image or text -->
                        <td align="left">
                            <img src="imagesrc" alt="imagealt" style="display:block; margin:0px; border:0px;" />
                        </td>

                        <!-- spacer for the right of the image -->
                        <td align="left">
                            <img src="spacer.gif" width="11" alt="spacer" style="display:block; margin:0px; border:0px;" />
                        </td>
                    </tr>
                    <tr>

                        <!-- spacer for the bottom of the image -->
                        <td colspan="2" align="left">
                            <img src="spacer.gif" height="11" alt="spacer" style="display:block; margin:0px; border:0px;" />
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- here your tekst -->
            <div style="margin:0px; padding:0px; mso-line-height-rule: exactly; color:#000000; font-family:Verdana, Arial; font-size:12px; line-height:20px; display:block;">Hello. This is sample text. This is another sentence. Hello. This is sample text.</div>
        </td>
    </tr>
</tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-03T12:09:22.877

有时接受的解决方案（添加`align= "left"`到标题/父表）不起作用（在我的情况下使用多个嵌套表）：

[![没有修复的左对齐表格](../Images/b368839bb2dcd83cb26d385f97aa4999.png)](https://i.stack.imgur.com/nnYEg.jpg)

添加`mso-table-rspace`到左对齐表格确实有效：

[![带修复的左对齐表](../Images/a1336594ebe8e4d20be64e977ee0f5be.png)](https://i.stack.imgur.com/nVoLW.jpg)

`<table border="0" cellpadding="0" cellspacing="0" align="left" style="mso-table-lspace:0pt; mso-table-rspace:7pt;">`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-24T19:20:15.433

我不确定 Outlook 2013 有什么问题，但您可以尝试使用 div 结构实现相同的布局

HTML：

```
<div class="outer">
  <div class="first">text in the table cell.<br>and another line of text.<br>and a third line.</div>
  <div class="second">Hello. This is sample text. This is another sentence. Hello. This is sample text. This is another sentence. Hello. This is sample text. This is another sentence.</div>
</div> 
```

CSS：

```
.outer {
  width : 50%;
  height : 50%;
  background-color: green;
}

.first {
  background-color: red;
  float : left;
}

.second {
  background-color: yellow;
} 
```

[演示链接](http://codebins.com/bin/4ldqp5n)

# ocaml - OCaml 什么时候开始放宽值限制？

> ID：15561714
> 
> 赞同：9
> 
> 时间：2013-03-22T02:28:01.860
> 
> 标签：ocaml

有人可以简要描述何时开始放宽价值限制吗？我很难找到对规则的简洁明了的描述。有加里格的论文：

[http://caml.inria.fr/pub/papers/garrigue-value_restriction-fiwflp04.pdf](http://caml.inria.fr/pub/papers/garrigue-value_restriction-fiwflp04.pdf)

但它有点密集。有人知道更简洁的来源吗？

**附录**

下面添加了一些很好的解释，但我无法在那里找到以下行为的解释：

```
# let _x = 3 in (fun () -> ref None);;
- : unit -> 'a option ref = <fun>
# let _x = ref 3 in (fun () -> ref None);;
- : unit -> '_a option ref = <fun> 
```

任何人都可以澄清以上内容吗？为什么封闭 let 的 RHS 中的 ref 的杂散定义会影响启发式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T03:17:27.403

我不是类型理论家，但这是我对 Garrigue 解释的解释。你有一个值 V。从通常的值限制下分配给 V（在 OCaml 中）的类型开始。类型中会有一些（可能是 0 个）单态类型变量。对于仅出现在类型中的协变位置（函数箭头右侧）的每个此类变量，您可以将其替换为完全多态的类型变量。

论据如下。由于您的单态变量是一个变量，您可以想象用任何单一类型替换它。所以你选择了一个无人居住的类型 U。现在因为它只处于协变位置，所以 U 可以反过来被任何超类型替换。但是每种类型都是无人居住类型的超类型，因此可以安全地替换为完全多态的变量。

因此，当您拥有（可能是）仅出现在协变位置的单态变量时，宽松的值限制就会生效。

（我希望我有这个权利。正如 octref 建议的那样，@gasche 肯定会做得更好。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T07:32:10.667

Jeffrey 直观地解释了为什么放松是正确的。至于什么时候*有用*，我认为我们可以首先复制答案 octref 有助于链接到：

> 您可以放心地忽略这些细微之处，直到有一天，您遇到了一个抽象类型的问题，它不像您希望的那样具有多态性，然后您应该记住，签名中的协方差注释可能会有所帮助。
> 
> 几个月前，我们[在 reddit/ocaml 上](http://www.reddit.com/r/ocaml/comments/t8g2e/pdf_relaxing_the_value_restriction_by_jacques/)讨论过这个问题：
> 
> 考虑以下代码示例：
> 
> ```
> module type S = sig
>   type 'a collection
>   val empty : unit -> 'a collection
> end
> 
> module C : S = struct
>   type 'a collection =
>     | Nil
>     | Cons of 'a * 'a collection
>   let empty () = Nil
> end
> 
> let test = C.empty () 
> ```
> 
> 您获得的类型`test`是`'_a C.collection`，而不是`'a C.collection`您期望的类型。它不是多态类型（`'_a`是尚未完全确定的单态推理变量），在大多数情况下您不会对它感到满意。
> 
> 这是因为`C.empty ()`不是一个值，所以它的类型不是泛化的（~变成了多态的）。要从放宽的值限制中受益，您必须标记抽象类型`'a collection`协变：
> 
> ```
> module type S = sig
>   type +'a collection
>   val empty : unit -> 'a collection
> end 
> ```
> 
> 当然，这只是因为模块`C`是用签名密封的`S`: `module C : S = ...`。如果模块`C`没有给出明确的签名，类型系统会推断出最普​​遍的方差（这里是协方差），而人们不会注意到这一点。
> 
> 针对抽象接口进行编程通常很有用（在定义函子、执行幻像类型规则或编写模块化程序时），因此这种情况肯定会发生，然后了解放宽的值限制很有用。

这是您需要了解它以获得更多多态性的示例，因为您设置了抽象边界（具有抽象类型的模块签名）并且它不会自动工作，您必须明确说明抽象类型是协变的。

在大多数情况下，当您操作多态数据结构时，它会在您没有通知的情况下发生。由于松弛，`[] @ []`只有多态类型。`'a list`

一个具体但更高级的例子是 Oleg 的 Ber-MetaOCaml，它使用一种类型`('cl, 'ty) code`来表示分段构建的引用表达式。`'ty`表示引用代码结果的类型，`'cl`是一种幻象区域变量，保证当它保持多态时，引用代码中变量的作用域是正确的。由于在引用表达式是通过组合其他引用表达式（通常不是值）来构建引用表达式的情况下，这依赖于多态性，因此如果没有放宽的值限制，它基本上根本无法工作（这是他关于类型的优秀但技术[文档](http://okmij.org/ftp/ML/generalization.html)中的一个旁注推理）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-11T10:19:03.757

为什么附录中给出的两个示例的类型不同的问题让我困惑了几天。这是我通过深入研究 OCaml 编译器的代码发现的（免责声明：我既不是 OCaml 方面的专家，也不是 ML 类型系统方面的专家）。

## 回顾

```
# let _x = 3 in (fun () -> ref None);;        (*  (1)  *)
- : unit -> 'a option ref = <fun> 
```

被赋予多态类型 (think `∀ α. unit → α option ref`) 而

```
# let _x = ref 3 in (fun () -> ref None);;    (*  (2)  *)
- : unit -> '_a option ref = <fun> 
```

给定一个单态类型（想想`unit → α option ref`，即类型变量`α`不是全称量化的）。

## 直觉

出于类型检查的目的，OCaml 编译器认为示例 (2) 和

```
# let r = ref None in (fun () -> r);;         (*  (3)  *)
- : unit -> '_a option ref = <fun> 
```

因为它不会查看 的主体`let`以查看是否实际使用了绑定变量（正如人们所期望的那样）。但是（3）显然*必须*给定一个单态类型，否则多态类型的参考单元可能会逃逸，可能会导致不健全的行为，如内存损坏。

## 扩展性

为了理解为什么 (1) 和 (2) 是这样输入的，让我们看看 OCaml 编译器实际上是如何检查一个`let`表达式是否是一个值（即“非扩展”）（参见[is_nonexpansive](https://github.com/ocaml/ocaml/blob/4.02/typing/typecore.ml#L1383)）：

```
let rec is_nonexpansive exp =
  match exp.exp_desc with
    (* ... *)
  | Texp_let(rec_flag, pat_exp_list, body) ->
      List.for_all (fun vb -> is_nonexpansive vb.vb_expr) pat_exp_list &&
      is_nonexpansive body
  | (* ... *) 
```

因此，`let`如果 -expression 的**主体和所有绑定变量都是值，则它就是一个值。**

在附录中给出的两个示例中，主体都是`fun () -> ref None`，它是一个函数，因此是一个值。两段代码之间的区别在于它`3`是一个值，而`ref 3`不是。因此 OCaml 认为第`let`一个是一个值，而不是第二个。

## 打字

再次查看 OCaml 编译器的代码，我们可以看到一个表达式是否被认为是可扩展的，这决定了 - 表达式的类型是如何`let`泛化的（参见[type_expression](https://github.com/ocaml/ocaml/blob/4.02/typing/typecore.ml#L3745)）：

```
(* Typing of toplevel expressions *)

let type_expression env sexp =
  (* ... *)
  let exp = type_exp env sexp in
  (* ... *)
  if is_nonexpansive exp then generalize exp.exp_type
  else generalize_expansive env exp.exp_type;
  (* ... *) 
```

由于`let _x = 3 in (fun () -> ref None)`它是非扩展性的，因此使用它进行类型化，`generalize`从而赋予它多态类型。`let _x = ref 3 in (fun () -> ref None)`另一方面，通过 输入`generalize_expansive`，给它一个单态类型。

这就是我所得到的。如果您想更深入地挖掘，请同时阅读 Oleg Kiselyov 的[Efficient and Insightful Generalization](http://okmij.org/ftp/ML/generalization.html)`generalize`，`generalize_expansive`这可能是一个好的开始。

非常感谢剑桥 OCaml Labs 的 Leo White 鼓励我开始挖掘！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T03:17:20.557

虽然我对这个理论不是很熟悉，但我已经问过一个关于它的问题。
加什向我提供[了一个简明的解释](https://stackoverflow.com/a/15308176/1780148)。该示例只是 OCaml 地图模块的一部分。一探究竟！
也许他能给你一个更好的答案。@加什

# resize - 如何让 Gnuplot 不裁剪科学记数法

> ID：15561718
> 
> 赞同：0
> 
> 时间：2013-03-22T02:28:17.353
> 
> 标签：resize, gnuplot, crop

我正在使用 gnuplot 生成以下曲面图。

![Gnuplot 裁剪 z 轴](../Images/b245687da56c91640b5ae05a55e62bf1.png)

我正在使用的命令文件的重要部分是：

```
set terminal pdfcairo size 3,3; 
```

特别是`size 3,3`按照我想要的方式调整绘图的大小，但在此过程中会裁剪掉 z 轴标签的一部分。如果我使用更大的尺寸`size 4,3`或根本不使用尺寸选项，则 z 轴标签适合如下：

![在此处输入图像描述](../Images/f223d81157502496a726c85726c8de3b.png)

调整绘图大小时，gnuplot 似乎没有考虑标签的宽度。

有没有办法在调整大小之前将情节向右移动，`3,3`以便有科学记数法的空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:50:17.183

您可以设置`lmargin`选项：

```
set lmargin 10 
```

（或任何尺寸不会裁剪标签）。

# java - Flash 中的 Canvas/Stage Size 太小，无法显示整个关卡

> ID：15561720
> 
> 赞同：0
> 
> 时间：2013-03-22T02:28:24.047
> 
> 标签：java, actionscript-3, flash

这不是直接的编程问题，但我觉得它仍然属于该类别，如果这是错误的地方，我很抱歉。我正在使用 box2d 在 flash 中制作游戏，我决定在 flash 中绘制关卡，因为关卡设计看起来会更好，关卡非常大（这个关卡长 10,000 像素）并且 flash 中的画布不会显示任何内容.

![平台游戏](../Images/80808fe1786344058a963c74f91bac4b.png)

库中的预览似乎能够比舞台上的绘图显示更长的时间。如何使画布更长？我是否应该尝试升级到更新版本的闪存，该版本是否允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:59:06.813

不要使用巨大的位图——它们会占用大量内存，即使不是所有内容都可见，它们也会大大降低性能。因此，Flash 将大小限制为 4095x4095 像素（或矩形格式的等量像素）。

解决这个问题的方法是将图形平铺成相同大小的部分，最好小于舞台（1/2 或 1/3 边长是一个很好的衡量标准）。然后，您将它们全部作为网格放入更大的 Sprite 或 MovieClip 并设置`visible=false;`在每个图块上。然后，在运行时，您的游戏循环必须检查每一帧，哪些图块应该实际出现在舞台上 - 然后只有那些应该设置为`visible=true;`. 这样，您可以将绘制的像素数量减少到绝对必要的程度，并将屏幕内存使用量降至最低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T04:01:30.540

您只是不要立即将所有内容放在画布上，而是仅绘制那些现在可见的关卡图元或部分。或者，如果您的关卡基本上是一个非常简单的形状，您只需更改其 X 和 Y，以便在舞台上显示关卡的相关部分。

# cuda - 如何在多个内核和多个 GPU 内共享全局内存？

> ID：15561721
> 
> 赞同：0
> 
> 时间：2013-03-22T02:28:28.117
> 
> 标签：cuda, qualifiers

```
----------------a.c---------------------
variable *XX;
func1(){
  for(...){
    for(i = 0; i < 4; i++)
       cutStartThread(func2,args)
  } 
}
---------------b.cu-------------------
func2(args){
  cudaSetDevice(i);
  xx = cudaMalloc();
  mykernel<<<...>>>(xx);
}
-------------------------------------- 
```

最近，我想为我的程序使用多个 GPU 设备。我的节点上有四张 Tesla C2075 卡。我使用四个线程来管理四个 GPU。更重要的是，每个线程中的内核都会被启动多次。一个简单的伪代码如上。我有两个问题：

1.  变量`XX`是一个很长的字符串，在内核中是只读的。我想在`mykernel`. 是否可以仅在 首次启动时调用`cudaMalloc`并将指针传递给？或者我应该使用限定符？`mykernel``mykernel``__device__`

2.  `XX`在四个线程中使用，因此我将其声明为 file 中的全局变量`a.c`。`cudaMalloc`是正确的倍数`XX`还是应该使用数组，例如`variable *xx[4]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:36:13.757

1.  对于在单个设备上运行的内核的使用，您可以调用`cudaMalloc`一次来创建保存字符串的变量`XX`，然后将 cudaMalloc (ie `XX`) 创建的指针传递给需要它的内核。

    ```
    #define xx_length 20
    char *XX;
    cudaMalloc((void **)&XX, xx_length * sizeof(char));
    ...
    kernel1<<<...>>>(XX, ...);
    ...
    kernel2<<<...>>>(XX, ...);
    etc. 
    ```

2.  为每个线程创建一个单独的 XX 变量，假设每个线程都用于访问不同的设备。你如何做到这一点将取决于 XX 的范围。但是数组：

    ```
    char *XX[num_devices]; 
    ```

在全球范围内，应该没问题。

作为如何使用多线程管理多个 GPU 的示例，CUDA [OpenMP 示例可能很有趣。](http://docs.nvidia.com/cuda/cuda-samples/index.html#cudaopenmp)

# python - 在pyside中使用Chaco的py2exe python应用程序出错

> ID：15561722
> 
> 赞同：1
> 
> 时间：2013-03-22T02:28:35.260
> 
> 标签：python, pyside, py2exe, enthought, chaco

`enter code here`我有一个程序，它使用嵌入到 pyside (Qt4) GUI 中的 Enthought 的 Chaco 图。它也使用 numpy，但没关系。该程序直接从 Python 在多个平台上运行良好，但是当我使用 py2exe 为 win32 创建 .exe 时，运行 .exe 时出现错误：

```
Traceback (most recent call last):
  File "awesome_program.pyw", line 19, in <module>
  File "plotwidget.pyc", line 13, in <module>
  File "enable\api.pyc", line 8, in <module>
  File "enable\base.pyc", line 35, in <module>
  File "enable\colors.pyc", line 246, in <module>
  File "traitsui\qt4\color_editor.pyc", line 21, in <module>
  File "traitsui\editors\__init__.pyc", line 22, in <module>
  File "traitsui\editors\api.pyc", line 29, in <module>
  File "traitsui\editors\list_str_editor.pyc", line 33, in <module>
  File "pyface\image_resource.pyc", line 18, in <module>
  File "pyface\toolkit.pyc", line 73, in <module>
  File "pyface\toolkit.pyc", line 38, in _init_toolkit
  File "pyface\toolkit.pyc", line 31, in import_toolkit
ImportError: No module named init 
```

setup.py 文件是：

```
#! /usr/bin/env python
# setup_win32.py

# Create an .exe for win32 systems.
# Run this with:
#   python setup_win32.py py2exe

import sys
from distutils.core import setup
import py2exe
# from cx_Freeze import setup, Executable

includes = []
includes.append("PySide.QtUiTools")
includes.append("PySide.QtXml")

base = None
if sys.platform == "win32":
    base = "Win32GUI"

setup(options = {"py2exe": {"dll_excludes":["MSVCP90.dll"],
                            "includes": includes}},
      name='awesomeprogram',
      version='0.01',
      description='A program to visualize stuff.',
      author='John Doe',
      author_email='dude@email.com',
      console=[{"script": "awesome_program.pyw"}]) 
```

我对 Chaco 和 py2exe 还很陌生，但我觉得我的 py2exe 安装文件中需要从 Enthought 的套件中明确包含一些内容？这个事情谁有经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:39:09.350

我没有使用过py2exe，但我对py2app有一些经验（我认为是相似的）。它无法包含许多 Enthought/chaco 包，因此您需要在 setup.py 中手动包含它们。这是我所做的：

```
OPTIONS = dict(
           includes = [
                       # The backends are dynamically imported and thus we need to
                       # tell py2app about them.
                       'kiva.*',
                       'enable.*',
                       'enable.qt4.*',
                       'pyface.*',
                       'pyface.ui.qt4.*',
                       'pyface.ui.qt4.action.*',
                       'pyface.ui.qt4.timer.*',
                       'pyface.ui.qt4.wizard.*',
                       'pyface.ui.qt4.workbench.*',
                       'traitsui.qt4.*',
                       'traitsui.qt4.extra.*',
                       'PyQt4.pyqtconfig',
                       'glob.*'],
           argv_emulation = True)

setup(
      app=APP,
      options={'py2app': OPTIONS},
      setup_requires=['py2app'],
      ) 
```

如果您替换使用类似的 OPTIONS （当然替换`py2app`为`py2exe`，并且可能`PyQt4`替换为`PySide`），它可能对您有用。如果再次导入失败，只需将其添加到包含列表中。

# google-chrome - chrome浏览器中的最终窗口关闭事件监听器

> ID：15561723
> 
> 赞同：0
> 
> 时间：2013-03-22T02:28:57.090
> 
> 标签：google-chrome, google-chrome-extension

可以在chrome中打开多个单独的窗口，

```
chrome.windows.onRemoved.addListener(function(windowId){ 
// action
}); 
```

上面的代码响应任何 chrome 窗口关闭事件。如何检测最后一个窗口关闭事件或最终关闭事件。如果没有，是否有方法可以在处理关闭事件之前检查任何处于活动状态的 chrome 窗口。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:13:16.633

```
var openWindowCount = 0;

chrome.windows.onCreated.addListener(function(Window window) {
  ++openWindowCount;
});

chrome.windows.onRemoved.addListener(function(windowId) {
  if (--openWindowCount == 0) {
    // this is the last window.
  }
); 
```

未测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T09:26:43.407

删除：

```
chrome.windows.onRemoved.addListener(function callback) 
```

当窗口被移除（关闭）时触发。

得到所有：

```
chrome.windows.getAll(object getInfo, function callback) 
```

获取所有窗口。

```
chrome.windows.onRemoved.addListener(function () {
    chrome.windows.getAll(function (windows) {
        if (windows.length <= 0) {
           // Write code here
        }
    });
}); 
```

# django - CDN 与 Django 用于用户上传文件

> ID：15561726
> 
> 赞同：1
> 
> 时间：2013-03-22T02:29:00.563
> 
> 标签：django, cdn

我一直在用 Django 阅读 CDN。目前我打算使用 CDN 来存储我的静态文件。但是，我也想将用户上传的图像/视频存储在 CDN 上。

我是 Web 开发的新手，因此将 CDN 用于用户媒体是正确的选择吗？如果不是，那么存储用户上传文件的更好选择是什么？

谢谢。

# jquery - 将暂停按钮添加到 jQuery Twitter Bootstrap 垂直选项卡轮播

> ID：15561728
> 
> 赞同：0
> 
> 时间：2013-03-22T02:29:08.127
> 
> 标签：jquery, twitter-bootstrap

我有 Twitter Bootstrap 的垂直选项卡，其功能类似于旋转木马，代码如下，但现在我想添加一个暂停/播放（恢复）按钮。请参阅[jsfiddle](http://jsfiddle.net/DPT7V/)

相关的JS是：

```
 $(function() {
        var tabCarousel = setInterval(function() {
            var tabs = $('#tab-carousel .nav-tabs > li'),
                active = tabs.filter('.active'),
                next = active.next('li'),
                toClick = next.length ? next.find('a') : tabs.eq(0).find('a');

            toClick.trigger('click');
        }, 3000);
    }); 
```

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:02:56.747

添加一个切换按钮怎么样

```
<button id="play" 
        type="button" 
        class="btn active" data-toggle="button">Toggle</button> 
```

并在导航之前检查它是否处于活动状态？

```
$(function() {
    var tabCarousel = setInterval(function() {
        var tabs = $('#tab-carousel .nav-tabs > li'),
            active = tabs.filter('.active'),
            next = active.next('li'),
            toClick = next.length ? next.find('a') : tabs.eq(0).find('a');

        if(running()) {
            toClick.trigger('click');
        }
    }, 3000);
});

function running() {
    return $('#play').hasClass('active');
} 
```

这可以满足您的需要，尽管我不喜欢它忙于等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:54:03.587

添加暂停/播放按钮

<button id="pause" type="button" class="btn active"><i class="icon-pause"></i></button>

脚本：

```
var runTabCarousel = true; 

$(function() {
    var tabCarousel = setInterval(function() {
        if(runTabCarousel){
        var tabs = $('#tab-carousel .nav-tabs > li'),
            active = tabs.filter('.active'),
            next = active.next('li'),
            toClick = next.length ? next.find('a') : tabs.eq(0).find('a');

        toClick.trigger('click');
        }
    }, 3000);

    $("#pause").click(function() { 
        runTabCarousel = !runTabCarousel; 
        if(runTabCarousel){
            $(this).find("i").addClass("icon-pause");
            $(this).find("i").removeClass("icon-play"); 

        }
        else{
            $(this).find("i").addClass("icon-play");
            $(this).find("i").removeClass("icon-pause"); 

        }
    }); 

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T19:24:21.597

这是我使用的最终版本：

```
<script type="text/javascript">
      jQuery(document).ready(function($) {
        $('button#play').click(function() {
              if ($(this).text() == 'Pause') {
                  $(this).text('Play');
                  $(this).attr('aria-label', 'Play'); 
              } else {
                  $(this).text('Pause');
                  $(this).attr('aria-label', 'Pause');
              }
         });

        $(function() {
          var tabCarousel = setInterval(function() {
            var tabs = $('#tab-carousel .nav-tabs > li'),
            active = tabs.filter('.active'),
            next = active.next('li'),
            toClick = next.length ? next.find('a') : tabs.eq(0).find('a');

            if(!$('#play').hasClass('active')) {
              toClick.trigger('click');
            } 
          }, 6000);
        });
      });
</script> 
```

这是页面代码：

```
<div id="tab-carousel" class="tabbable tabs-left"> 
    <ul class="nav nav-tabs">
        <li><a href="#tab1" data-toggle="tab">Tab 1</li>
        <li><a href="#tab2" data-toggle="tab">Tab 2</li>
        <li><a href="#tab3" data-toggle="tab">Tab 3</li>
        <li><a href="#tab4" data-toggle="tab">Tab 4</li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane" id="tab1"><p>Content here.</p></div>
        <div class="tab-pane" id="tab2"><p>Content here.</p></div>
        <div class="tab-pane" id="tab3"><p>Content here.</p></div>
        <div class="tab-pane" id="tab4"><p>Content here.</p></div>
        <div class="pull-right"><button id="play" type="button" class="btn btn-primary btn-small" data-toggle="button" title="Pause">Pause</button>
      </div>                            
    </div>
</div> 
```

# c# - 无法在 asp.net 中编辑文本框

> ID：15561729
> 
> 赞同：3
> 
> 时间：2013-03-22T02:29:14.620
> 
> 标签：c#, asp.net, sql-server-2008

我在 page_load 上运行以下代码

```
 using (SqlConnection conn = new SqlConnection("myconnectionString"))
        {
            conn.Open();
            using (SqlCommand cmmnd = new SqlCommand("", conn))
            {

                cmmnd.CommandText = "SELECT * FROM addsetting;";

                SqlDataReader rdr = cmmnd.ExecuteReader();
                while (rdr.Read())
                {
                    count++;
                    param = Convert.ToString(rdr["rowno"]);
                    TextBox1.Text = Convert.ToString(rdr["tostudent"]);
                    TextBox2.Text = Convert.ToString(rdr["tofaculty"]);
                    TextBox3.Text = Convert.ToString(rdr["studentday"]);
                    TextBox4.Text = Convert.ToString(rdr["facultyday"]);
                    TextBox5.Text = Convert.ToString(rdr["firstweek"]);
                    TextBox6.Text = Convert.ToString(rdr["secondweek"]);
                    TextBox7.Text = Convert.ToString(rdr["thirdweek"]);

                }
                rdr.Close();
            }
            conn.Close();} 
```

现在填写此表格后，我正在更改值并有一个“保存”按钮。

奇怪的是，在 Button2_Click 上，当我尝试从文本框中访问已编辑的值时，我没有得到新的值。文本框有旧值。

为什么文本框没有编辑过的值。

下面是我用来访问值的代码。

```
 using (SqlConnection conn = new SqlConnection("myconnectionstring"))
            {
                conn.Open();

                using (SqlCommand cmd = new SqlCommand("", conn))
                {
                    cmd.Parameters.Add("@rowno", SqlDbType.VarChar).Value = param; 

                    cmd.Parameters.AddWithValue("@tostudent", TextBox1.Text); 
                    cmd.Parameters.AddWithValue("@tofaculty", TextBox2.Text);
                    cmd.Parameters.AddWithValue("@studentday", TextBox3.Text);
                    cmd.Parameters.AddWithValue("@facultyday", TextBox4.Text);
                    cmd.Parameters.AddWithValue("@firstweek", TextBox5.Text);
                    cmd.Parameters.AddWithValue("@secondweek", TextBox6.Text);
                    cmd.Parameters.AddWithValue("@thirdweek", TextBox7.Text);

                    cmd.CommandText = "UPDATE addsetting SET tostudent=@tostudent,tofaculty=@tofaculty,studentday=@studentday,facultyday=@facultyday,firstweek=@firstweek,secondweek=@secondweek,thirdweek=@thirdweek WHERE rowno=@rowno";
                    cmd.ExecuteNonQuery();

                }

                conn.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T02:35:24.087

您是否正在检查page_load 中的[IsPostBack属性？](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)或者无论是否有回发，您概述的代码是否都会运行？

如果代码运行而不管回发，那么您所做的是在您的 Button2_Click 有机会访问它们之前覆盖 TextBox 值。这是因为Load 在事件处理之前运行的[页面生命周期。](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

如果不是回发（即用户没有单击提交按钮），您可能只希望 page_load 中的数据库检索运行，例如：

```
if (!Page.IsPostBack)
{
    using (SqlConnection conn = new SqlConnection("myconnectionString"))
    {
        conn.Open();
        using (SqlCommand cmmnd = new SqlCommand("", conn))
        {
            cmmnd.CommandText = "SELECT * FROM addsetting;";
            SqlDataReader rdr = cmmnd.ExecuteReader();

            while (rdr.Read())
            {
                count++;
                param = Convert.ToString(rdr["rowno"]);
                TextBox1.Text = Convert.ToString(rdr["tostudent"]);
                TextBox2.Text = Convert.ToString(rdr["tofaculty"]);
                TextBox3.Text = Convert.ToString(rdr["studentday"]);
                TextBox4.Text = Convert.ToString(rdr["facultyday"]);
                TextBox5.Text = Convert.ToString(rdr["firstweek"]);
                TextBox6.Text = Convert.ToString(rdr["secondweek"]);
                TextBox7.Text = Convert.ToString(rdr["thirdweek"]);
            }

            rdr.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:40:11.107

```
if(!IsPostBack)
{
    using (SqlConnection conn = new SqlConnection("myconnectionString"))
    {
        conn.Open();
        using (SqlCommand cmmnd = new SqlCommand("", conn))
        {

            cmmnd.CommandText = "SELECT * FROM addsetting;";

            SqlDataReader rdr = cmmnd.ExecuteReader();
            while (rdr.Read())
            {
                count++;
                param = Convert.ToString(rdr["rowno"]);
                TextBox1.Text = Convert.ToString(rdr["tostudent"]);
                TextBox2.Text = Convert.ToString(rdr["tofaculty"]);
                TextBox3.Text = Convert.ToString(rdr["studentday"]);
                TextBox4.Text = Convert.ToString(rdr["facultyday"]);
                TextBox5.Text = Convert.ToString(rdr["firstweek"]);
                TextBox6.Text = Convert.ToString(rdr["secondweek"]);
                TextBox7.Text = Convert.ToString(rdr["thirdweek"]);

            }
            rdr.Close();
        }
        conn.Close();}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:38:27.653

这都是关于[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)的。Page_Load 在处理 Click 事件之前触发。因此，当您单击 Button2 时，Page_Load 运行并使用旧值重新填充您的表单，然后 Button2.Click 被执行并将当前（现在旧）值保存回数据库。

# javascript - 使用 DateTimeOffset 创建 Breeze.js 查询失败

> ID：15561731
> 
> 赞同：0
> 
> 时间：2013-03-22T02:29:30.550
> 
> 标签：javascript, odata, breeze

我正在运行 Breeze.WebApi v1.2.5，并且在查询 DateTimeOffset 类型时也遇到了问题。

这是我的查询：

```
var query = entityQuery.from('Sessions')
                       .where('startTime', ">", new Date(2013, 3, 19)); 
```

这会产生

```
http://localhost/api/breeze/Sessions?$filter=StartTime%20gt%20datetime'2013-04-19T05%3A00%3A00.000Z' 
```

*这会引发错误。*

但是，如果我手动将上面生成的查询更改为使用 datetimeoffset（而不是 datetime），就像这样：

```
http://localhost/api/breeze/Sessions?$filter=StartTime%20gt%20datetimeoffset'2013-04-19T05%3A00%3A00.000Z' 
```

它正确查询并返回适当的响应。

我怎样才能轻而易举地使用 datetimeoffset 而不是 datetime 生成适当的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:34:28.090

从**v 1.2.7**开始，此问题已修复

--- 以前的帖子

好的，我已经复制了这个。我们应该在下一个版本中进行修复。当它发布时，我会在这里发布。并感谢您找到它。

# java - 将键绑定到 JButton

> ID：15561732
> 
> 赞同：0
> 
> 时间：2013-03-22T02:29:38.973
> 
> 标签：java, swing, jbutton, calculator, key-bindings

我有一个相当简单的计算器，我正在尝试将键绑定到 JButtons。我是Java新手，我知道的不多。我确实知道它涉及 ActionListener，但我不知道如何将它变成我目前拥有的东西。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

@SuppressWarnings("serial")
public class Calculator2 extends JFrame implements ActionListener {

    // Declare the GUI objects and variables HERE
    JTextField ansText;
    JButton b1, b2, b3, b4, b5, b6, b7, b8, b9, b0, plus, minus, multi, div,
            equal, clear;
    JPanel p1, p2, p3;
    Double val1 = 0.0, val2 = 0.0, answer = 0.0;
    int operator = 0;

    public static void main(String[] args) {
        new Calculator2();
    }

    public Calculator2() {

        // GUI Creation Code goes HERE

        ansText = new JTextField("", 7);
        ansText.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);

        ansText.addKeyListener(new KeyAdapter() { //Allow only numbers in ansText
            public void keyTyped(KeyEvent e) {
                char c = e.getKeyChar();
                if (((c < '0') || (c > '9')) && (c != KeyEvent.VK_BACK_SPACE)) {
                    e.consume();
                }
            }
        });

        b1 = new JButton("1");
        b1.addActionListener(this);
        b2 = new JButton("2");
        b2.addActionListener(this);
        b3 = new JButton("3");
        b3.addActionListener(this);
        b4 = new JButton("4");
        b4.addActionListener(this);
        b5 = new JButton("5");
        b5.addActionListener(this);
        b6 = new JButton("6");
        b6.addActionListener(this);
        b7 = new JButton("7");
        b7.addActionListener(this);
        b8 = new JButton("8");
        b8.addActionListener(this);
        b9 = new JButton("9");
        b9.addActionListener(this);
        b0 = new JButton("0");
        b0.addActionListener(this);
        plus = new JButton("+");
        plus.addActionListener(this);
        minus = new JButton("-");
        minus.addActionListener(this);
        multi = new JButton("*");
        multi.addActionListener(this);
        div = new JButton("/");
        div.addActionListener(this);
        equal = new JButton("=");
        equal.addActionListener(this);
        clear = new JButton("C");
        clear.addActionListener(this);

        this.setLayout(new BorderLayout());

        p1 = new JPanel();
        this.add(p1, BorderLayout.NORTH);
        p1.setLayout(new GridLayout(0, 1, 2, 2));
        p1.add(ansText);

        p2 = new JPanel();
        this.add(p2, BorderLayout.CENTER);
        p2.setLayout(new GridLayout(4, 3, 2, 2));
        p2.add(b1);
        p2.add(b2);
        p2.add(b3);
        p2.add(plus);

        p2.add(b4);
        p2.add(b5);
        p2.add(b6);
        p2.add(minus);

        p2.add(b7);
        p2.add(b8);
        p2.add(b9);
        p2.add(multi);

        p2.add(clear);
        p2.add(b0);
        p2.add(equal);
        p2.add(div);

        this.setSize(200, 250);
        this.setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {

        //Number input
        if (e.getSource() == b1) {
            ansText.setText(ansText.getText() + b1.getText());
        } 
        else if (e.getSource() == b2) {
            ansText.setText(ansText.getText() + b2.getText());
        }
        else if (e.getSource() == b3) {
            ansText.setText(ansText.getText() + b3.getText());
        } 
        else if (e.getSource() == b4) {
            ansText.setText(ansText.getText() + b4.getText());
        } 
        else if (e.getSource() == b5) {
            ansText.setText(ansText.getText() + b5.getText());
        } 
        else if (e.getSource() == b6) {
            ansText.setText(ansText.getText() + b6.getText());
        } 
        else if (e.getSource() == b7) {
            ansText.setText(ansText.getText() + b7.getText());
        } 
        else if (e.getSource() == b8) {
            ansText.setText(ansText.getText() + b8.getText());
        } 
        else if (e.getSource() == b9) {
            ansText.setText(ansText.getText() + b9.getText());
        } 
        else if (e.getSource() == b0) {
            ansText.setText(ansText.getText() + b0.getText());
        }

        //Operator input
        else if (e.getSource() == plus) {
            operator = 1;
            val1 = Double.parseDouble(ansText.getText());
            ansText.setText("");
        } 
        else if (e.getSource() == minus) {
            operator = 2;
            val1 = Double.parseDouble(ansText.getText());
            ansText.setText("");
        } 
        else if (e.getSource() == multi) {
            operator = 3;
            val1 = Double.parseDouble(ansText.getText());
            ansText.setText("");
        } 
        else if (e.getSource() == div) {
            operator = 4;
            val1 = Double.parseDouble(ansText.getText());
            ansText.setText("");
        } 
        //Misc
        else if (e.getSource() == equal) {
            val2 = Double.parseDouble(ansText.getText());
            if (operator == 1) {
                answer = val1 + val2;
                ansText.setText("" + answer);
            } else if (operator == 2) {
                answer = val1 - val2;
                ansText.setText("" + answer);
            } else if (operator == 3) {
                answer = val1 * val2;
                ansText.setText("" + answer);
            } else if (operator == 4) {
                answer = val1 / val2;
                ansText.setText("" + answer);
            }
        } 
        else if (e.getSource() == clear) {
            ansText.setText("");
            val1 = 0.0;
            val2 = 0.0;
            answer = 0.0;
            operator = 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:41:33.120

[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)教程描述了键绑定的详细信息。这是一个简单的示例，如何将操作绑定到小键盘和主键盘上的加号键：

```
JPanel panel = new JPanel();
JPanel panel = new JPanel();
    panel.getInputMap(JPanel.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(
            KeyStroke.getKeyStroke(KeyEvent.VK_ADD, 0), "plus");
panel.getInputMap(JPanel.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(
        KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS,
                InputEvent.SHIFT_MASK), "plus");

panel.getActionMap().put("plus", plusAction);
panel.add(button); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:56:11.027

你不想让一个类和几个内部类来完成你所有的工作。Java Swing 与大多数其他 GUI 系统一样，基于 MVC，即模型-视图-控制器。

这里的模型是一些包含累加器当前值和存储在显示器中的值的对象。如果您正在编写 RPN 计算器，模型对象将包含 RPN 堆栈。

视图将是 Swing 类：`JTextField`和`JButtons`。

Controller 将是一些新的对象，例如`CalculatorController`，执行实际工作的对象。`ActionListener`他们不会对数字进行加、减、乘或除，而是调用您的方法，`CalculatorController`而该对象反过来会更新 JTextField。

jedyobidan 建议查看Oracle 的文档非常好。您希望将击键放入`JPanel`自身的输入映射中，因为无论用户关注面板中的哪个位置，它们都应该应用。然后，动作映射将`AbstractActions`在`CalculatorController`.

我一直认为 Mac 或其前身 NeXT 上的 GUI 开发风格及其 Interface Builder 程序对于新手来说比 Java Swing 使用的风格要好得多。

# javascript - 无法从事件处理程序“this”对象获取属性

> ID：15561738
> 
> 赞同：0
> 
> 时间：2013-03-22T02:30:14.080
> 
> 标签：javascript, jquery

```
<select onchange="alert($(this).attr('data-type'))">
    <option data-type="1" value="a">a</option>
    <option data-type="2" value="b">b</option>
</select> 
```

当我在 jsfiddle 上运行它时，我得到空值。有任何想法吗？

这是js小提琴：

[http://jsfiddle.net/49wyG/](http://jsfiddle.net/49wyG/)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T02:34:12.830

您必须获取元素的选定索引并从那里开始，试试这个：

```
<select onchange="alert(this.options[this.selectedIndex].getAttribute('data-type'));">
    <option data-type="1" value="a">a</option>
    <option data-type="2" value="b">b</option>
</select> 
```

对我来说效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:33:57.160

`data-type`属性在选项元素上，而不是在选择上。我假设您想要当前选择的数据类型

```
<select onchange="alert($(this).find(':selected').attr('data-type'))">
    <option data-type="1" value="a">a</option>
    <option data-type="2" value="b">b</option>
</select> 
```

[http://jsfiddle.net/49wyG/4/](http://jsfiddle.net/49wyG/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T02:32:20.093

`this`指的是`select`不是`option`。试试这个：

```
<select>
    <option data-type="1" value="a" onclick="alert($(this).attr('data-type'))">a</option>
    <option data-type="2" value="b" onclick="alert($(this).attr('data-type'))">b</option>
</select> 
```

或者，您可以使用`:selected`选择器或`this.selectedIndex`抓取`option`. 像这样的东西：

```
<select onchange="alert($(':selected',this).attr('data-type'))" > 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T02:43:15.623

你需要这样做...

```
<select onchange="alert(this.options[this.selectedIndex].getAttribute('data-type'))">
    <option data-type="1" value="a">a</option>
    <option data-type="2" value="b">b</option>
</select> 
```

更改事件上的“this”对象是列表，而不是选项

# java - 为集成测试运行“网络代理”的 Maven 插件

> ID：15561739
> 
> 赞同：1
> 
> 时间：2013-03-22T02:30:14.230
> 
> 标签：java, maven, proxy, integration-testing

这可能会令人困惑，所以请耐心等待。

我对在代理后面运行 Maven 不感兴趣。我了解如何配置 maven、eclipse 或 JVM 本身以通过代理获取 Web 访问。

但是，在我的项目中，我有一个组件可以检索给定 URL 的内容并对其进行分析。它在下面使用 Apache Http 组件，涂上一点预定义的配置和错误处理（实际上只是一个隐藏样板代码的包装器）。由于 apache-httpcomponents 本身可以使用代理，因此我的组件将接受可以传递给 apache-httpcomponents 的代理配置。

有谁知道任何允许这种类型的集成测试的代理插件，比如“maven-simpleproxy-plugin”或类似的东西？

我想测试我的组件在代理后面运行良好的能力。我想我需要运行某种插件来启动一个虚拟代理服务器以及 maven-embedded-glassfish-plugin。我可以在 glassfish 中托管一个虚拟内容，并让我的组件尝试通过这个“maven-simpleproxy-plugin”实例访问它......从而使我能够测试组件正确处理其代理配置的能力。

有这样的东西存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:07:36.510

我会使用[maven exec](http://mojo.codehaus.org/exec-maven-plugin/)插件来启动您要测试的代理服务器。`post-integration-test`然后编写一个脚本，该脚本在关闭代理服务器的阶段调用。然后，您将通过与生产环境相同的代理服务器类型进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-31T12:20:50.427

我认为您正在寻找[MockServer](http://www.mock-server.com/)。它在 github 上看起来非常活跃，有 1000 多颗星和 25 多位贡献者，并且可以执行以下操作，如其网站上所述：

> **MockServer 代理可以：**
> 
> *   使用以下任何代理方法代理所有请求：
>     *   转发端口
>     *   Web 代理（即 HTTP 代理）
>     *   HTTPS 隧道代理（使用 HTTP CONNECT）
>     *   SOCKS Proxying（即动态端口转发）
> *   验证请求已发送（即在测试断言中）
> *   记录请求和响应以分析系统的行为方式

关于您一直要求的不同部署/使用选项，让我再次从他们的网站复制：

> **MockServer 和 MockServer 代理可以运行：**
> 
> *   通过 Maven 插件作为 Maven 构建周期的一部分
> *   通过 @Before 或 @After 方法中的 Java API 以编程方式
> *   通过 JUnit 测试中的 @Rule 注释字段使用 JUnit @Rule
> *   从命令行作为测试环境中的独立进程
> *   作为可部署到现有应用程序服务器的 WAR
> *   作为 Grunt 插件作为 Grunt 构建周期的一部分
> *   作为来自任何 Node.js 代码的 Node.js (npm) 模块
> *   在任何启用 Docker 的环境中作为 Docker 容器

ps：我与该项目没有任何关系

# php - 获取数据库服务器的当前时间

> ID：15561745
> 
> 赞同：-3
> 
> 时间：2013-03-22T02:31:04.247
> 
> 标签：php, sql

我有一行叫做`last_time_online`时间以这种格式设置：

```
2013-03-22 01:59:02 (year-month-day hour:minute:second) 
```

现在我想创建一个名为`$getime`获取本地服务器时间的函数，以便将其与当前时间进行比较。我的意思是这样的：

```
$sqlUpdate = "UPDATE user.user SET Online='1' WHERE id='".$_GET['char']."' AND $getime > last_time_online  LIMIT 1   ";

$getime=date('Y-d-m H:i:s') ."\n"; 
```

我的问题是我需要将函数添加到查询中并且无法按预期工作，我想要的是它获取本地时间并与数据库中的时间进行比较

像这样的东西：

```
local_time>database_time 
```

编辑==固定

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:32:57.217

看看 MySQL [Date and Time Functions](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)，你应该有很多选项，而不必使用 PHP 来为查询定义一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:45:19.817

在您的 mySQL 查询中使用 NOW() 将获得当前时间。当我从 PHP 发送查询（插入数据而不是使用可以在更改表行时更新的时间戳）时，我会使用它来处理 CreatedDate 之类的问题……等等。

# c# - 为什么我的带有自定义实体的 mvc 表单身份验证会提前超时？

> ID：15561758
> 
> 赞同：0
> 
> 时间：2013-03-22T02:32:54.657
> 
> 标签：c#, asp.net-mvc, forms-authentication

我在我的应用程序中使用带有自定义实体的表单身份验证。

我遇到的问题是我的身份验证会话比我预期的 10 分钟快到期。

我认为每次收到该 cookie 的经过身份验证的请求时，我可能需要更新 cookie？

这是保持会话活跃的正确做法吗？

谢谢-要遵循的代码：

**网络配置**

```
<authentication mode="Forms">
  <forms loginUrl="/Admin/Account/LogOn" slidingExpiration="true" />
</authentication> 
```

**登录时**

```
 var identity = new AppIdentity(member.Fullname, member.Id, roles.ToArray());
        FormsAuthentication.SetAuthCookie(identity.ToString(), false);

        var myCookie = FormsAuthentication.GetAuthCookie(identity.ToString(), false);
        myCookie.Domain = string.Format(".{0}", "mydomain.com");
        HttpContext.Current.Response.AppendCookie(myCookie); 
```

**全球.cs**

```
 protected void Application_AuthenticateRequest(object sender, EventArgs e)
    {
        var cookie = Request.Cookies[FormsAuthentication.FormsCookieName];
        var ticket = TryDecryptCookie(cookie);

        if (ticket == null)
        {
            return;
        }

        var identity = new AppIdentity(ticket);
        var principal = new GenericPrincipal(identity, identity.Roles);

        Context.User = principal;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:30:16.783

我最终只是在需要时延长了到期时间。

```
protected void Application_AuthenticateRequest(object sender, EventArgs e)
    {
        HttpCookie cookie = Request.Cookies[FormsAuthentication.FormsCookieName];
        FormsAuthenticationTicket ticket = TryDecryptCookie(cookie);

        if (ticket == null)
        {
            return;
        }

        FormsAuthenticationTicket newTicket = ticket;

        if (FormsAuthentication.SlidingExpiration)
        {
            newTicket = FormsAuthentication.RenewTicketIfOld(ticket);
        }

        var identity = new AppIdentity(newTicket);
        var principal = new GenericPrincipal(identity, identity.Roles);

        Context.User = principal;
    } 
```

# python - 在 python 中将 r'\x74op' 等十六进制 ascii 混合字符串转换为 'top'

> ID：15561763
> 
> 赞同：1
> 
> 时间：2013-03-22T02:33:27.447
> 
> 标签：python

我想在 \xNN 中打印出十六进制字符串。有什么快速的方法可以让 \xNN 转换回十六进制字符串吗？我更喜欢本机快速方法而不是手动编写长函数。

例如。

```
$ python
>>> '\x74op'
>>> 'top'

>>> s=r'\x74op'
>>> '\\x74op'

>>> convert(s)  # how to write this function
>>> 'top' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T02:36:41.547

我想你想要`s.decode('string_escape')`。

# jakarta-ee - 迭代器值的自定义标记属性

> ID：15561772
> 
> 赞同：0
> 
> 时间：2013-03-22T02:34:48.363
> 
> 标签：jakarta-ee, jsp-tags

我想要一个自定义 JSP 标记，该标记具有一个普通 bean 表达式的属性并命名一个列表。然后，标签应以特定形式呈现列表。

我尝试编写一个带有 s:iterator 属性的自定义标签，如下所示：

```
<%@ tag body-content="empty"%>
<%@ attribute name="list" required="true"  %>

<%@ taglib prefix="s" uri="/struts-tags"%>

<s:set var="varList" >${list}</s:set>
<s:iterator value="varList">(render item)</s:iterator> 
```

在不同的 JSP 中，我将它与 bean 表达式一起使用：

```
<my:listtag list="myObject.aList"/> 
```

我希望它会遍历“myObject.aList”，但不幸的是这不起作用。似乎发生的是，迭代器尝试迭代“myObject”而不是“myObject.aList”。

发生了什么事，我怎样才能得到我想要的行为？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:55:54.030

好的，我们开始吧。属性必须定义为“Collection”类型，并且迭代器变量必须由“%{#attr.list}”给出：

```
<%@ attribute name="list" required="true" type="java.util.Collection" %>

<s:iterator value="%{#attr.list}">(render item)</s:iterator> 
```

在另一个 JSP 中，我需要使用变量的*值*而不是变量名来调用它：

```
<my:listtag list="${myObject.aList}"/> 
```

耶！

# android - createWindowSurface 失败：EGL_BAD_MATCH？

> ID：15561780
> 
> 赞同：11
> 
> 时间：2013-03-22T02:35:39.483
> 
> 标签：android, crash, egl

android 版本是 2.2.1 设备是三星 Galaxy II 完整的崩溃日志是：

```
java.lang.RuntimeException: createWindowSurface failed: EGL_BAD_MATCH
at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1077)
at android.opengl.GLSurfaceView$EglHelper.createSurface(GLSurfaceView.java:981)
at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1304)
at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1116) 
```

这是崩溃的相关代码：

```
@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                         WindowManager.LayoutParams.FLAG_FULLSCREEN);
    glView = new GLSurfaceView(this);
    glView.setEGLConfigChooser(8 , 8, 8, 8, 16, 0);
    glView.setRenderer(this);
    setContentView(glView);
    \\etc..............} 
```

我使用了 setEGLConfigChooser()，因为如果应用程序不在 API-17 上，它会在 API-17 上崩溃，所以对于这个崩溃的特定设备，我一直在环顾四周，它与设备的 PixelFormat 有关。

我想知道如何使用一些代码，这样它就不会在三星 Galaxy II android 版本 2.2.1 上崩溃，我无法在模拟器中测试它，我没有测试它的设备，我只需要确定代码我不知道如何改变它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-11T08:06:38.873

**更新：**我找到了解决此问题的方法，实际上它相当简单。

首先：Android 的默认[`EGLConfigChooser`](http://developer.android.com/reference/android/opengl/GLSurfaceView.EGLConfigChooser.html)实现在某些设备上做出了错误的决定。尤其是较旧的 Android 设备似乎遇到了这个`EGL_BAD_MATCH`问题。在调试过程中，我还发现那些较旧的麻烦制造者设备的可用 OpenGL ES 配置集非常有限。

这种“不匹配”问题的原因不仅仅是 GLSurfaceView 的像素格式和 OpenGL ES 的颜色位深度设置不匹配。总的来说，我们必须处理以下问题：

*   OpenGL ES API 版本不匹配
*   请求的目标表面类型不匹配
*   请求的颜色位深度无法在表面视图上渲染

在解释 OpenGL ES API 时，Android 开发人员文档严重不足。因此，在 Khronos.org 上阅读原始文档很重要。[特别是关于eglChooseConfig](https://www.khronos.org/registry/egl/sdk/docs/man/html/eglChooseConfig.xhtml)的文档页面在这里很有帮助。

为了解决上面列出的问题，您必须确保指定以下最低配置：

*   `EGL_RENDERABLE_TYPE`必须与您使用的 OpenGL ES API 版本匹配。在 OpenGL ES 2.x 的可能情况下，您必须将该属性设置为`4`（参见 参考资料[`egl.h`](https://www.khronos.org/registry/egl/api/1.0/EGL/egl.h)）
*   `EGL_SURFACE_TYPE`应该有`EGL_WINDOW_BIT`集

当然，您还想设置一个 OpenGL ES 上下文，为您提供正确的颜色、深度和模板缓冲区设置。

不幸的是，不可能以直接的方式挑选这些配置选项。我们必须从任何给定设备上可用的任何内容中进行选择。这就是为什么有必要实现一个 custom [`EGLConfigChooser`](http://developer.android.com/reference/android/opengl/GLSurfaceView.EGLConfigChooser.html)，它会遍历可用配置集的列表并选择最符合给定标准的最合适的配置集。

无论如何，我为这样的配置选择器创建了一个示例实现：

```
public class MyConfigChooser implements EGLConfigChooser {
    final private static String TAG = "MyConfigChooser";

    // This constant is not defined in the Android API, so we need to do that here:
    final private static int EGL_OPENGL_ES2_BIT = 4;

    // Our minimum requirements for the graphics context
    private static int[] mMinimumSpec = {
            // We want OpenGL ES 2 (or set it to any other version you wish)
            EGL10.EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,

            // We want to render to a window
            EGL10.EGL_SURFACE_TYPE, EGL10.EGL_WINDOW_BIT,

            // We do not want a translucent window, otherwise the
            // home screen or activity in the background may shine through
            EGL10.EGL_TRANSPARENT_TYPE, EGL10.EGL_NONE, 

            // indicate that this list ends:
            EGL10.EGL_NONE
    };

    private int[] mValue = new int[1];
    protected int mAlphaSize;
    protected int mBlueSize;
    protected int mDepthSize;
    protected int mGreenSize;
    protected int mRedSize;
    protected int mStencilSize;

    /**
    * The constructor lets you specify your minimum pixel format,
    * depth and stencil buffer requirements.
    */
    public MyConfigChooser(int r, int g, int b, int a, int depth, int 
                        stencil) {
        mRedSize = r;
        mGreenSize = g;
        mBlueSize = b;
        mAlphaSize = a;
        mDepthSize = depth;
        mStencilSize = stencil;
    }

    @Override
    public EGLConfig chooseConfig(EGL10 egl, EGLDisplay display) {
        int[] arg = new int[1];
        egl.eglChooseConfig(display, mMinimumSpec, null, 0, arg);
        int numConfigs = arg[0];
        Log.i(TAG, "%d configurations available", numConfigs);

        if(numConfigs <= 0) {
            // Ooops... even the minimum spec is not available here
            return null;
        }

        EGLConfig[] configs = new EGLConfig[numConfigs];
        egl.eglChooseConfig(display, mMinimumSpec, configs,    
            numConfigs, arg);

        // Let's do the hard work now (see next method below)
        EGLConfig chosen = chooseConfig(egl, display, configs);

        if(chosen == null) {
            throw new RuntimeException(
                    "Could not find a matching configuration out of "
                            + configs.length + " available.", 
                configs);
        }

        // Success
        return chosen;
    }

   /**
    * This method iterates through the list of configurations that 
    * fulfill our minimum requirements and tries to pick one that matches best
    * our requested color, depth and stencil buffer requirements that were set using 
    * the constructor of this class.
    */
    public EGLConfig chooseConfig(EGL10 egl, EGLDisplay display,
            EGLConfig[] configs) {
        EGLConfig bestMatch = null;
        int bestR = Integer.MAX_VALUE, bestG = Integer.MAX_VALUE, 
            bestB = Integer.MAX_VALUE, bestA = Integer.MAX_VALUE, 
            bestD = Integer.MAX_VALUE, bestS = Integer.MAX_VALUE;

        for(EGLConfig config : configs) {
            int r = findConfigAttrib(egl, display, config, 
                        EGL10.EGL_RED_SIZE, 0);
            int g = findConfigAttrib(egl, display, config,
                        EGL10.EGL_GREEN_SIZE, 0);
            int b = findConfigAttrib(egl, display, config,         
                        EGL10.EGL_BLUE_SIZE, 0);
            int a = findConfigAttrib(egl, display, config,
                    EGL10.EGL_ALPHA_SIZE, 0);
            int d = findConfigAttrib(egl, display, config,
                    EGL10.EGL_DEPTH_SIZE, 0);
            int s = findConfigAttrib(egl, display, config,
                    EGL10.EGL_STENCIL_SIZE, 0);

            if(r <= bestR && g <= bestG && b <= bestB && a <= bestA
                    && d <= bestD && s <= bestS && r >= mRedSize
                    && g >= mGreenSize && b >= mBlueSize 
                    && a >= mAlphaSize && d >= mDepthSize 
                    && s >= mStencilSize) {
                bestR = r;
                bestG = g;
                bestB = b;
                bestA = a;
                bestD = d;
                bestS = s;
                bestMatch = config;
            }
        }

        return bestMatch;
    }

    private int findConfigAttrib(EGL10 egl, EGLDisplay display,
            EGLConfig config, int attribute, int defaultValue) {

        if(egl.eglGetConfigAttrib(display, config, attribute, 
            mValue)) {
            return mValue[0];
        }

        return defaultValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-04T08:38:20.460

我还没有添加评论的声誉分数，否则我会对 Nobu Games 的回答发表简短评论。我遇到了同样的 EGL_BAD_MATCH 错误，他们的回答帮助我走上了正确的道路。相反，我必须创建一个单独的答案。

正如 Nobu Games 所提到的，GLSurfaceView 的 PixelFormat 与传递给`setEGLConfigChooser()`. 就我而言，我要求的是 RGBA8888，但我的 GLSurfaceView 是 RGB565。这导致稍后在我的初始化中出现 EGL_BAD_MATCH 错误。

他们的答案的增强是您可以获得窗口所需的 PixelFormat 并使用它来动态选择 EGL 上下文。

为了使我的代码尽可能通用，我更改了 GLSurfaceView 以接受一个附加参数——显示的像素格式。我通过调用从我的活动中得到这个：

```
getWindowManager().getDefaultDisplay().getPixelFormat(); 
```

我将此值传递给 GLSurfaceView，然后为每个 RGBA 提取最佳位深度，如下所示：

```
if (pixelFormatVal > 0) {

    PixelFormat info = new PixelFormat();
    PixelFormat.getPixelFormatInfo(pixelFormatVal, info);

    if (PixelFormat.formatHasAlpha(pixelFormatVal)) {

        if (info.bitsPerPixel >= 24) {
            m_desiredABits = 8;
        } else {
            m_desiredABits = 6;  // total guess
        }

    } else {
        m_desiredABits = 0;
    }

    if (info.bitsPerPixel >= 24) {
        m_desiredRBits = 8;
        m_desiredGBits = 8;
        m_desiredBBits = 8;
    } else if (info.bitsPerPixel >= 16) {
        m_desiredRBits = 5;
        m_desiredGBits = 6;
        m_desiredRBits = 5;
    } else {
        m_desiredRBits = 4;
        m_desiredGBits = 4;
        m_desiredBBits = 4;
    }

} else {
    m_desiredRBits = 8;
    m_desiredGBits = 8;
    m_desiredBBits = 8;
} 
```

然后我将这些值传递给我的配置选择器。此代码适用于 RGB565 设备和 RGBA8888 设备。

我的假设是供应商选择默认值是有原因的，并且它会提供最高性能的结果。当然，我没有什么可以支持这种说法，但这是我要采用的策略。

# jquery - 如何导航到 Eclipse 中的 javascript 函数？

> ID：15561781
> 
> 赞同：1
> 
> 时间：2013-03-22T02:35:46.783
> 
> 标签：jquery

我正在使用 jQuery，我想查看`css()`函数源代码，但我不知道如何导航到它？我的IDE是eclipse。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:38:13.887

Eclipse 目前不支持这种行为。我知道的一些编辑器是 Sublime Text 3、Visual Studio+ReSharper（2012 也没有它）、PHPStrom 和 WebStorm，不幸的是，这些都不是免费的。

一种解决方案是使用[jQuery 查看器](http://james.padolsey.com/jquery/)，它使浏览[jQuery 源代码](http://code.jquery.com/jquery-1.9.1.js)变得容易。

这是[`.css()`](http://james.padolsey.com/jquery/#v=git&fn=jQuery.fn.css)来自最新 jQuery 的源代码：

```
function (name, value) {
    return jQuery.access(this, function (elem, name, value) {
        var len, styles, map = {},
            i = 0;

        if (jQuery.isArray(name)) {
            styles = getStyles(elem);
            len = name.length;

            for (; i < len; i++) {
                map[name[i]] = jQuery.css(elem, name[i], false, styles);
            }

            return map;
        }

        return value !== undefined ? jQuery.style(elem, name, value) : jQuery.css(elem, name);
    },
    name, value, arguments.length > 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:39:13.477

您可以在[此处查看 jQuery 源代码](https://github.com/jquery/jquery/tree/master/src)。

# python - Python中的快速排序实现不间断运行

> ID：15561785
> 
> 赞同：0
> 
> 时间：2013-03-22T02:36:12.410
> 
> 标签：python, quicksort

这是我的快速排序算法。很简单

```
x = 0
def swap(list, a, b):
    temp = list[a]
    list[a] = list[b]
    list[b] = temp
    return list
def quicksort2(list, left, right):
    if right > left:
        global x
        x = x + 1
        print x , list, left, right
        l = left+1
        r = right
        while l <= r :
            while list[l] < list[left]:
                l = l + 1
            while list[r] > list[left]:
                r = r - 1
            if l < r:
                list = swap(list, l, r)
        list = swap(list, left, r)
        list = quicksort2(list, left, r-1);
        return quicksort2(list, r+1, right);
    return list 
```

但是当我运行我的测试用例时

```
b = list([1, 2, 2, 3, 4, 5, 6, 12, 6, 32])
quicksort2(b, 0, len(b)-1) 
```

结果是

```
1 [1, 2, 2, 3, 4, 5, 6, 12, 6, 32] 0 9
2 [1, 2, 2, 3, 4, 5, 6, 12, 6, 32] 1 9 
```

并就此打住...任何人都有任何理由...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T23:55:20.223

您是否尝试过在调试器下跟踪程序执行...？

循环永远运行，`while l <= r`因为经过几次递减`r`

*   `left == 1`
*   `l == 2`
*   `r == 2`

和

*   `l`不递增，因为`list[2]`不小于`list[1]`
*   `r`不再递减，因为`list[2]`不大于`list[1]`
*   没有交换，因为`l`不小于`r`
*   并且循环将继续，因为`l`仍然等于`r`.......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T00:48:45.840

我只是稍微修改了您的代码.. 发现了几个错误，其中一些已经被其他人提到了。其余的我不会经历。但是，您不必返回修改后的列表，因为 python 中的列表总是通过引用传递。

这应该有效：

```
def quicksort2(list, low, high):
    global x
    x = x + 1
    print x , list, low, high

    l = low
    r = high
    mid = list[(r + l) / 2]
    while l <= r:
      while list[l] < mid: l += 1
      while list[r] > mid: r -= 1
      if l <= r:
        list[l], list[r] = list[r], list[l] #swap(r,l)
        l += 1
        r -= 1

    if r > low: quicksort2(list, low, r);
    if l < high: quicksort2(list, l, high);

if __name__ == '__main__':
  x = 0
  b = [1, 2, 2, 3, 4, 5, 6, 12, 6, 32]
  quicksort2(b, 0, len(b)-1)
  print b 
```

# perforce - p4 fstat 没有列出 headChange

> ID：15561786
> 
> 赞同：1
> 
> 时间：2013-03-22T02:36:30.440
> 
> 标签：perforce

我正在尝试使用 p4 fstat 命令检索文件上次提交到软件仓库的更改 ID。这是输出：

```
p4 fstat File.cs
... depotFile //csharpDepot/src/File.cs
... clientFile C:/space/codereviewtests/perforce/csharpWorkspace\src\File.cs
... haveRev 4
... action edit
... change default
... type text
... actionOwner user1
... ... otherOpen0 user1@mystorage
... ... otherAction0 edit
... ... otherChange0 default
... ... otherOpen 1 
```

我可以在 p4v 中看到更改列表历史记录，文件没有问题。p4 fstat 命令未列出 headChange 的原因可能是什么？

这是来自的输出`p4 filelog File.cs`

```
//csharpDepot/src/File.cs
... #5 change 59 edit on 2013/03/22 by user1@csharpWorkSpace (text) 'dd '
... #4 change 57 edit on 2013/03/17 by user1@csharpWorkSpace (text) 'second'
... #3 change 56 edit on 2013/03/17 by user1@csharpWorkSpace (text) 'commit '
... #2 change 54 edit on 2013/03/17 by user1@csharpWorkSpace (text) 'commit changes '
... #1 change 53 add on 2013/03/17 by user1@csharpWorkSpace (text) 'initial commit ' 
```

这里的另一个问题是 p4 print 告诉我 File.cs - 没有这样的文件。这很糟糕，因为我需要下载最后提交的修订内容。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:07:16.197

客户端视图映射设置不正确。`p4 fstat`尝试调用和`p4 print`使用仓库路径时，我可以弄清楚。这两个命令在指定仓库路径时工作正常。视图映射修复后，命令也适用于本地路径。

# firebase - 哪种方法会产生更好的性能？

> ID：15561789
> 
> 赞同：1
> 
> 时间：2013-03-22T02:37:00.900
> 
> 标签：firebase

考虑一个带有嵌套项的示例数据结构。即：schools.classes.students

在 UI 中仅用于添加/编辑/删除学生。

我是在根（学校）或班级连接 firebase Ref 并让 UI 迭代和管理数据，还是每个学生都有一个 dataRef，因为这是数据将被更改的地方？

如果每个学生都有自己的 Firebase Ref（比如说 100 名学生），这是否会增加任何性能/延迟问题？

如果需要，我可以进一步解释，但想保持简短。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:51:14.283

Firebase 旨在与大量引用和回调一起使用。创建引用（“new Firebase(...)”）是一个非常轻量级的选项，因此您应该经常这样做。

在您的应用程序中，渲染和网络活动通常是主要瓶颈，因此加载和重新渲染大块可能会很慢。我建议以非常精细的方式访问 Firebase，并将其与您的 GUI 紧密联系起来，这样当事情发生变化时，只需要重新渲染最少的 GUI 元素集。

如果不清楚，请提供一些示例代码，我可以提出一些额外的建议。

[我在 Firebase 工作]

# iis - 通过 HTTP 保护 MSMQ 的正确方法

> ID：15561793
> 
> 赞同：0
> 
> 时间：2013-03-22T02:37:25.650
> 
> 标签：iis, iis-7, msmq

我们正在将电子商务集成从使用批处理迁移到消息传递 (MSMQ)。电子商务应用程序本身托管在不在我们域中的 Web 服务器上。机器处理订单在我们局域网的域中。下订单时，电子商务应用程序将写入本地 MSMQ。我们的订单处理组件应该连接到这个队列并从中读取消息。我们没有为此使用 WCF。

如果由我决定，我要么放弃 MSMQ 并使用 RabbitMQ，要么在 Hamachi 等两台机器上都安装一个 vpn 客户端。

我知道 MSMQ 可以通过 IIS 使用 HTTP 作为传输。但是，我似乎找不到太多关于如何安全设置的文档。是否像在 IIS 中打开一个身份验证选项一样简单？我更喜欢使用基本身份验证，因为我们计划通过 HTTPS 执行此操作。之后，如何从订单处理组件发送凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:28:13.927

MSMQ 支持 HTTP 和 HTTPS。有关详细信息，请参阅[http://technet.microsoft.com/en-us/library/cc785272(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc785272(v=ws.10).aspx) 干杯，Yoel

# c++ - 仿射变换实现

> ID：15561799
> 
> 赞同：0
> 
> 时间：2013-03-22T02:38:16.757
> 
> 标签：c++, visual-studio-2010, mfc, affinetransform

我正在尝试在两个图像上实现仿射变换。首先，我在两个图像中找到匹配对。其中一个是缩放图像，另一个是参考图像。这些对返回给我的系数为：

```
 |1   0 |      | x |       |  1  |
A  = |      |  X = |   |   B = |     |
     |0   0 |      | y |       | 221 |   

The equation formed is X' = AX + B;

x_co_efficients[2] = (((x_new_Cordinate[2]-x_new_Cordinate[0])*(xCordinate[1]- xCordinate[0])) - ((x_new_Cordinate[1]-x_new_Cordinate[0])*(xCordinate[2] - xCordinate[0])))/
    (((xCordinate[1]-xCordinate[0])*(yCordinate[2]-yCordinate[0])) - ((xCordinate[2]-xCordinate[0])*(yCordinate[1]-yCordinate[0])));

x_co_efficients[1] = ((x_new_Cordinate[1]-x_new_Cordinate[0]) - (yCordinate[1]-yCordinate[0])*(x_co_efficients[2]))/(xCordinate[1]-xCordinate[0]);

x_co_efficients[0] = x_new_Cordinate[0] - (((x_co_efficients[1])*(xCordinate[0])) + ((x_co_efficients[2])*(yCordinate[0])));

y_co_efficients[2] = (((y_new_Cordinate[2]-y_new_Cordinate[0])*(xCordinate[1]- xCordinate[0])) - ((y_new_Cordinate[1]-y_new_Cordinate[0])*(xCordinate[2] - xCordinate[0])))/
    (((xCordinate[1]-xCordinate[0])*(yCordinate[2]-yCordinate[0])) - ((xCordinate[2]-xCordinate[0])*(yCordinate[1]-yCordinate[0])));

y_co_efficients[1] = ((y_new_Cordinate[1]-y_new_Cordinate[0]) - (yCordinate[1]-yCordinate[0])*(y_co_efficients[2]))/(xCordinate[1]-xCordinate[0]);

y_co_efficients[0] = y_new_Cordinate[0] - (((y_co_efficients[1])*(xCordinate[0])) + ((y_co_efficients[2])*(yCordinate[0]))); 
```

这些是我用来确定使用匹配对的系数的方程。这些方程对于相同的图像工作正常，对于缩放图像，它给了我那些系数。现在的问题是我有一个 24 位二进制图像，我想在该图像上实现关于参考的仿射变换。现在，当我尝试找到该图像的新坐标并将其当前值更改为该坐标时，我得到了一个非常失真的图像。如果转换正确，则不应该得到其他结果。有人可以看看方程式，并解释一下如何在第二张图像上实现这些方程式。我的代码是 C++。谢谢你。 ![这是我的参考图片](../Images/eefe81689b85e299769fddb64571f678.png)

我的参考图像在上面..我的比较图像是 ![在此处输入图像描述](../Images/247ce842d4906bf7247dda7d904a11f3.png)

我得到的结果是只有线条的扭曲图像。 ![在此处输入图像描述](../Images/e73118e34778ca10612a309bb47c1605.png)

**编辑 1**

我现在已将求解方法更改为矩阵。现在我得到了正确的输出，但是注册后得到的图像是这样的。我还必须在新坐标中应用 0 到 320*240 的限制才能获得像素值。现在我的结果有点像这样。 ![在此处输入图像描述](../Images/24de5117ebd4b401454247aa1cf5986e.png)

**编辑 2**

我已经更改了代码并且得到了这个结果而没有任何黑色像素。我有点倾斜..虽然已经删除了给定图像中的缩放效果。![在此处输入图像描述](../Images/4be740cda92710b8e01b0e581c92e9b7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:27:40.407

您的转换矩阵 A 有问题。它破坏y坐标值并将221分配给所有y坐标

您可以将 A 中 (2,2) 处的元素设为 1，问题应该得到解决。

# java - 在 Java TextArea 中搜索并替换所有搜索到的文本

> ID：15561801
> 
> 赞同：0
> 
> 时间：2013-03-22T02:38:31.313
> 
> 标签：java, replace, applet, textarea, space

我有一个`Textarea`用户`applet`应该写一些文本的地方。

我需要一个代码来搜索用户写的内容，然后用“+”号替换所有空格“如果找到”。

**例如**：“Hello World”-->“Hello+World”。

**我的代码：**

```
string space = " ";

if textarea.Gettext().contains(space){
space.ReplaceAll("+") } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:42:23.207

采用

```
string space = " ";
textarea.setText(textarea.getText().replaceAll(space, "+")); 
```

# ios - 在 iOS 中使用 Phonegap Canvas 自定义字体

> ID：15561804
> 
> 赞同：8
> 
> 时间：2013-03-22T02:38:46.103
> 
> 标签：ios, xcode, html, cordova

我正在尝试在 iOS 下的 Phonegap 中制作自定义字体。我遵循了几个教程并阅读了 Stack Overflow 上的所有相关问题，但即使我仔细检查了所有内容，我仍然无法正确理解。

这是字体：[http](http://www.dafont.com/m04fatal-fury.font) ://www.dafont.com/m04fatal-fury.font （**黑色版**）

我采取的步骤

使用 Xcode 作为资源将自定义字体文件添加到项目中 添加一个名为 UIAppFonts 的 Info.plist 文件的键。将此键设为数组对于您拥有的每种字体，输入字体文件的全名（包括扩展名）作为 UIAppFonts 数组的项目保存 Info.plist 现在在您的应用程序中，您可以简单地调用 [UIFont fontWithName:@"CustomFontName" size:12] 获取自定义字体以与您的 UILabels 和 UITextViews 等一起使用...</p>

1.  将字体添加到资源文件夹 m04b.ttf
2.  添加了 UIAppFonts 数组。[0] => 'm04b.ttf'
3.  检查实际字体文件是否在构建阶段资源中
4.  ctx.font = '16px M04_FATAL FURY BLACK';

没用。

尝试了后记名称 M04_FATAL-FURY-BLACK 仍然没有运气。我完全迷失在这里我真的不知道该怎么做才能调试这个错误。

非常感谢您的帮助。可能是什么问题呢？我能做些什么来检查一切是否正在加载？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>UIAppFonts</key>
    <array>
        <string>m04b.ttf</string>
    </array>
    <key>CFBundleDevelopmentRegion</key>
    <string>English</string>
    ..... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T00:15:34.450

我有同样的问题。我几乎可以保证你只是用空格或破折号或其他东西拼错了名字。将其放入`viewDidLoad`并搜索与您的名字相似的内容（通用名称.. 不是 .ttf 名称）。

```
for (NSString *name in [UIFont familyNames]) {
    NSLog(@"Family name : %@", name);
    for (NSString *font in [UIFont fontNamesForFamilyName:name]) {
        NSLog(@"Font name : %@", font);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:35:00.907

我使用了 CSS font-face 并且效果很好：[https](https://developer.mozilla.org/en-US/docs/CSS/@font-face) ://developer.mozilla.org/en-US/docs/CSS/@font-face 。

只需在 www/css 下添加字体，并包含带有正确路径的字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:28:44.870

尝试在“应用程序提供的字体”键下的 .plist 文件中添加字体，这是在您输入键名时建议的，而不是“UIAppFonts”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T17:28:20.777

下载字体并将其放在 www 文件夹中的某个位置。

在您的 css 文件中添加以下内容。

```
@font-face {
    font-family: customFontExample;
    src: url('/fonts/AveriaGruesaLibre-Regular.ttf'); 
} 
```

src 是您下载字体的路径。在此之后，您可以像这样使用名称“customFontExample”为您的元素提供自定义字体

```
h1{
font-family: customFontExample;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T19:51:30.333

对于这里的所有人，如果你需要@font-face 的东西，那你就错了。

一旦您的应用程序中的 UIFont 可以使用您的字体，它也可以在您创建的任何 UIWebView 中使用，您只需以正确的方式指定您的 font-family css 属性。

例如

```
.customfont { font-family: 'M04_FATAL-FURY-BLACK'; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-02T22:57:10.467

我尝试了“应用程序提供的字体”/资源嵌入方法，我发现您还必须在应用程序中指定 .ttf 扩展名。

但是在画布上下文中，我无法获得正确的大小，字体非常小。

因此，根据我的经验，这效果不佳，您必须回退到 html @font-face 方法，这很痛苦，因为很难知道何时加载字体并准备好使用...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-01T16:00:12.650

我遇到过同样的问题。问题是我通过查找器将字体添加到资源文件夹中。我注意到虽然文件夹中的字体没有出现在 Xcode 中。然后我通过xcode添加了文件，它工作了！

# jsf - jsf页面动作listioner不工作

> ID：15561806
> 
> 赞同：0
> 
> 时间：2013-03-22T02:38:49.743
> 
> 标签：jsf, richfaces

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j">
    <h:head>
        <title>Community</title>

    </h:head>
    <h:body>

        <rich:panel>
            <f:facet name="header">
                <h:outputText value="Login form" />
            </f:facet>
            <h:form id="loginform">
                <h:panelGrid columns="2" width="210">
                    <rich:validator  id="loginformvalidate">                
                        <h:outputText value="Username:" />
                        <h:inputText label="username" id="username" value="#{loginMB.username}" required="true" requiredMessage="user name is requried">
                            <f:validateLength minimum="5" />
                        </h:inputText>                    

                        <h:outputText value="Password" />
                        <h:inputSecret label="password" id="password" value="#{loginMB.password}" requiredMessage="password is requried">
                            <f:validateLength minimum="8" maximum="16" />
                        </h:inputSecret>

                    </rich:validator>

                    <rich:notifyMessages  stayTime="2000" nonblocking="true"  />

                    <f:facet name="footer">
                        <a4j:commandButton value="Login"/>
                    </f:facet>
                </h:panelGrid>
            </h:form>

        </rich:panel>
        <rich:panel>
                    <h:form id="Questions">
                        <rich:dataTable value="#{contentBean.questions}" var="list" id="question" >
                            <rich:column>#{list.QUserid.fname}</rich:column><br/>
                            <rich:column> <rich:collapsiblePanel expanded="false" header="#{list.questionValue}" switchType="client" onclick="#{contentBean.onclick(list.qid)}" >
                                    <rich:accordion id="answer" switchType="ajax">
                                        <a4j:repeat value="#{contentBean.ansList}" var="skinName" >
                                            <rich:accordionItem name="#{skinName.ansDate}">
                                                #{skinName.ansValue}

                                            </rich:accordionItem>
                                        </a4j:repeat>
                                    </rich:accordion></rich:collapsiblePanel></rich:column>
                            <br/><rich:column>
                                  <h:commandButton value="Show popup">
                                            <rich:componentControl target="popup" operation="show">
                                                    <a4j:param noEscape="true" value="event" />
                                                    <rich:hashParam>
                                                            <f:param name="width" value="500" />
                                                            <f:param name="height" value="300" />
                                                            <f:param name="minWidth" value="300" />
                                                            <f:param name="minHeight" value="150" />
                                                            <a4j:param noEscape="true" name="left" value="(jQuery(window).width()/2)-250" />
                                                            <a4j:param noEscape="true" name="top" value="(jQuery(window).height()/2)-150" />
                                                        </rich:hashParam>
                                                </rich:componentControl>

                                        </h:commandButton>
                                 <rich:popupPanel id="popup" modal="false" autosized="true" resizeable="false">
                                    <f:facet name="header">
                                        <h:outputText value="Add your answer" />
                                    </f:facet>
                                    <p>Enter your answer in less than 4000 char</p>

                                    <p>
                                        <h:inputTextarea id="answertxt" value="#{contentBean.ansvalue}" required="true"  requiredMessage="this feild is required"/>
                                        <h:commandButton value="Submit" onclick="#{rich:component('popup')}.hide(); return false;">
                                            <a4j:actionListener  for="Submit"  listener="#{contentBean.addAnswer(list.QUserid,list.QGroupid, list)}"/>

                                        </h:commandButton>

                                    </p>
                                </rich:popupPanel>
                            </rich:column>
                        </rich:dataTable>
                    </h:form>
        </rich:panel>

    </h:body>
</html> 
```

我是 jsf 和 richfaces 的新手，我想创建两个不同形式的单曲面板，我可以这样做吗？该页面一直有效，直到我在弹出窗口中添加了使用动作侦听器的新按钮

我收到以下错误

```
INFO: WEB0671: Loading application [My_community] at [/My_community]
INFO: My_community was successfully deployed in 19,911 milliseconds.
SEVERE: /index.xhtml @21,61 id="loginformvalidate" Unhandled by MetaTagHandler for type org.richfaces.component.behavior.ClientValidatorImpl 
```

页面运行但弹出生成的动作监听器上的提交按钮不起作用如果我做错了什么请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:32:09.223

你确定，rich:validator 可以生孩子吗？我认为它应该在您要验证的字段内：

```
<h:inputText label="username" id="username" value="#{loginMB.username}" required="true" requiredMessage="user name is requried">
    <f:validateLength minimum="5" />
    <rich:validator/>
</h:inputText> 
```

# c# - 如何从 C# 中的字典中检索第一行？

> ID：15561808
> 
> 赞同：0
> 
> 时间：2013-03-22T02:39:00.863
> 
> 标签：c#, asp.net

如何从此字典中检索第一行。我放了大约 15 条记录。

```
Dictionary<string, Tuple<string, string>> headINFO = 
                                   new Dictionary<string, Tuple<string, string>> { }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T02:41:31.210

您可以使用[headINFO.First()](http://msdn.microsoft.com/en-us/library/bb291976.aspx)，但除非您知道总会有至少一个条目，否则`headINFO`我建议您使用[headINFO.FirstOrDefault()](http://msdn.microsoft.com/en-us/library/bb340482.aspx)。

有关两者之间差异的更多信息，请[点击此处](https://stackoverflow.com/questions/1024559/when-to-use-first-and-when-to-use-firstordefault-with-linq)。

**编辑：** *添加了简单的例子*

这是一个关于如何使用的快速示例`FirstOrDefault()`

```
var info = headINFO.FirstOrDefault().Value;
Console.WriteLine(info.Item1); // Prints Tuple item1
Console.WriteLine(info.Item2); // Prints Tuple item2 
```

如果要打印多个项目，可以使用[Take(x)](http://msdn.microsoft.com/en-us/library/bb503062.aspx)。在这种情况下，我们将遍历三个字典项，但您可以轻松修改数字以获取更多项。

```
foreach (var info in headINFO.Take(3))
{
    Console.WriteLine(info.Value.Item1);
    Console.WriteLine(info.Value.Item2);
} 
```

您还应该记住，上述`foreach`内容不允许您直接修改`Dictionary`条目的值。

**Edit2：** *澄清了 First() 的用法并添加了干净的 foreach 示例*

请记住，虽然`First()`并且`FirstOrDefault()`会为您提供单个项目，但它不能保证它将是第一个添加的项目。

此外，如果您只是想遍历所有项目，您可以`Take(3)`在上面提到的 foreach 循环中删除。

```
foreach (var info in headINFO)
{
    Console.WriteLine(info.Key);          // Print Dictionary Key
    Console.WriteLine(info.Value.Item1);  // Prints Turple Value 1
    Console.WriteLine(info.Value.Item2);  // Prints Turple Value 2
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T02:40:03.133

字典是无序的，因此无法检索您插入的第一个键值对。

**您可以通过**调用 LINQ`.First()`方法来检索项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T02:40:16.247

最简单的方法就是使用 Linq 的[`First`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)扩展方法：

```
var firstHead = headINFO.First(); 
```

或者，如果您想更安全，如果字典为空，该[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)方法将返回：`null`

```
var firstHead = headINFO.FirstOrDefault(); 
```

如果您想遍历字典中的所有项目，请尝试以下操作：

```
foreach(var head in headINFO)
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T06:37:09.203

试试这个代码。

```
headINFO.FirstOrDefault(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-22T02:59:21.257

尝试这个：

```
 int c=0;

    foreach(var item in myDictionary)
    {
         c++;
         if(c==1)
         {
             myFirstVar = item.Value;
         }
         else if(c==2)
         {
             mySecondVar = item.Value;
         }
          ......
    } 
```

# mysql - 将 RIGHT JOIN 与 COUNT 相结合

> ID：15561811
> 
> 赞同：1
> 
> 时间：2013-03-22T02:39:40.157
> 
> 标签：mysql, join

我正在尝试获取`changes_cc`每个用户在表中的条目数列表。并非所有用户都在其中输入了条目，但是由于某种原因，它为每个有 0 个条目的用户返回“1”。我假设这是因为它正在计算`JOIN`ed 表中的条目。我怎样才能让它变成“0”呢？

```
SELECT COUNT(*) as num, users.id, realname, username
            FROM changes_cc
            RIGHT JOIN users
                ON changes_cc.user_id = users.id
            GROUP BY users.id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:41:08.840

我认为这应该可行——计算changes_cc表中的特定字段与计算*：

```
SELECT u.id, realname, username, COUNT(c.id) as num
FROM users u 
    LEFT JOIN changes_cc c 
        ON u.user_id = c.id
GROUP BY u.id 
```

我更喜欢阅读 a`LEFT JOIN`而不是 a `RIGHT JOIN`，但它们都是`OUTER JOINs`并且工作相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:41:01.977

您不应该使用`COUNT(*)`（*计算包括空值的记录*），因为它通常会给出至少 1，因为它会返回正确表中的所有记录。如果您指定要计算的列名，它将为您提供所需的结果，因为`COUNT`只计算*NON_NULL*值。

```
SELECT  COUNT(changes_cc.user_id) as num, 
        users.id, 
        realname, 
        username
FROM    changes_cc
        RIGHT JOIN users
            ON changes_cc.user_id = users.id
GROUP   BY users.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T02:41:19.280

而不是使用`count(*)`，使用`count(changes_cc.user_id)`。

问题是您正在计算行数（使用`*`），而不是计算“右连接”表中的非 NULL 值。

# c# - 如何在一行代码中转换和使用对象？

> ID：15561818
> 
> 赞同：4
> 
> 时间：2013-03-22T02:41:10.243
> 
> 标签：c#, asp.net, .net, casting

我正在尝试从 web 控件访问父页面上的隐藏字段。以下有效，但我想在一行中完成。

```
HiddenField hiddenFieldPid = (HiddenField)this.Parent.FindControl("HiddenFieldPid");
hiddenFieldPid.Value = ListBox_JobPositions.SelectedValue; 
```

不太确定为什么这不起作用，但是当我这样做时，我没有让 Value 属性出现在智能感知中：

```
(HiddenField)this.Parent.FindControl("HiddenFieldPid").NOOPTIONFORVALUEHERE = ListBox_JobPositions.SelectedValue; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T02:43:14.827

您必须添加括号才能让演员在正确的地方工作：

```
((HiddenField)this.Parent.FindControl("HiddenFieldPid"))
                         .Value = ListBox_JobPositions.SelectedValue; 
```

但是请注意，在一行中执行此操作会使您遇到几种难以诊断的可能异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:43:06.997

你很接近：

```
((HiddenField)this.Parent.FindControl("HiddenFieldPid")).Value = ListBox_JobPositions.SelectedValue; 
```

本质上，FindControl 方法正在返回需要强制转换的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:28:23.867

```
((HiddenField)this.Parent.FindControl("HiddenFieldPid")).value=ListBox_JobPositions.SelectedValue.toString(); 
```

# javascript - 如何通过样式属性值获取元素？

> ID：15561823
> 
> 赞同：1
> 
> 时间：2013-03-22T02:41:34.547
> 
> 标签：javascript

我需要获取所有具有“显示：无”样式的 div 元素，然后删除所有这些元素。我还需要选择包含在#somecontainer 元素中的那些div。必须在 RAW javascript 中完成。任何的想法？

示例 html：

```
 <table id="listtabletemp">
    <thead>
        <tr id="theader">
            <td id="theaderleft">loolz</td>
        </tr>
    </thead>
    <tbody>
        <tr class="" rel="13117025">
            <td><div><style>
.ikthgjyhtr{display:none}
.tVOx{display:inline}
</style>
                <div style="display:none">crap here</div>
                <div></div>
                <div></div>
                <div style="display:none">crap here</div>
                <div class="230">something good</div>
                <div class="ikthgjyhtr">crap here</div>
                <div style="display:none">crap here</div>
                <div class="ikthgjyhtr">crap here</div>
                <div style="display: inline">something good</div>something good
                <div style="display: inline">something good</div>
                <div class="21">something good</div>
                <div style="display:none">crap here</div>
                <div style="display:none">crap here</div>
                <div style="display:none">crap here</div>
                <div class="4">something good</div>
                <div class="224">something good</div></div>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:57:11.590

很简单，DOM 是你的朋友：

```
function removeDivs() {
    var container = document.getElementById("somecontainer");
    var divs = container.getElementsByTagName("div");
    var empty = [];
    var getStyle = function(obj, css){
        var style = null;
        if(obj.currentStyle) {
            style = obj.currentStyle[css];
        } else if(window.getComputedStyle) {
            style = window.getComputedStyle(obj, null).getPropertyValue(css);
        }
        return(style);
    };
    for(var i = 0, len = divs.length; i < len; i++) {
        var div = divs[i];
        if(div && ((div.style.display && div.style.display == "none") || getStyle(div, "display") == "none")) {
            empty.push(div);
        }
    }
    for(var i = 0, len = empty.length; i < len; i++) {
        var div = empty[i];
        div.parentNode.removeChild(div);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:13:37.703

快速而肮脏，这里有一些可以帮助您入门的东西：

[http://jsfiddle.net/kttsJ/](http://jsfiddle.net/kttsJ/)

```
var parent = document.getElementById('parent');
var items = parent.getElementsByTagName('DIV');
var hidden = [];
for (var i in items){
    if ((items[i]).getAttribute !== undefined){
        if ((items[i]).hasAttribute('style')){
            if ((/display\:\s*none/gi).test(items[i].getAttribute('style'))){
                hidden.push(items[i]);
            }
        }
    }
}

for (var i in hidden){
    hidden[i].parentNode.removeChild(hidden[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-26T19:04:25.433

这将删除具有“显示：无”样式的 div。我在 OP 的示例中对其进行了测试。注意：我在测试时添加了一个“some-container”id。

```
function removeDivs() {
    "use strict";

    //Some container.
    const someContainer = document.getElementById("some-container");

    //Divs inside it.
    const divsInside = someContainer.querySelectorAll("div");

    //Loop, remove div if "display: none".
    divsInside.forEach(function (divInside) {
        const style = window.getComputedStyle(divInside);
        if (style.display === "none") {
            someContainer.removeChild(divInside);
        }
    });
}

removeDivs(); 
```

# sql - 通过 for 循环执行立即更新

> ID：15561824
> 
> 赞同：2
> 
> 时间：2013-03-22T02:41:40.457
> 
> 标签：sql, oracle

我想做一些数据更新如下：

```
 CREATE OR REPLACE PROCEDURE PROC_MDM_RUN_DATA_MAPPING
     IS
        sqlString VARCHAR2(2000) := '';
        CURSOR csr_updates 
        IS
            SELECT  trim(table_name) AS table_name, 
                    trim(column_name) AS column_name, 
                    trim(old_value) AS old_value, 
                    trim(new_value) AS new_value 
            FROM C_MDM_MAPPING_TABLE 
            WHERE area = 'MDM' and rownum < 10
            AND run_update = 'Y' ;

    BEGIN
          FOR rec IN csr_updates 
          LOOP
             BEGIN
                sqlString := 'UPDATE ' || rec.table_name || 
                      ' SET ' || rec.column_name || ' = ''' || rec.new_value || '''
                      WHERE TRIM(' || rec.column_name || ') = ''' || rec.old_value || ''';'  ; 

                INSERT INTO C_MDM_ERROR_LOG  ( msg ) VALUES ( sqlString ); 

                dbms_output.put_line(sqlString) ; -- works, giving correct SQL
                execute immediate sqlString ;  -- fails

             END;
          END LOOP;
          COMMIT;

    END PROC_MDM_RUN_DATA_MAPPING;
    / 
```

该过程为每个数据更新编译并生成正确的 SQL - 示例如下：

```
 UPDATE S_CFM_UNIVERSITY_ALL SET MASTER_UNI_NAME = 'Chung-Ang University'
                      WHERE TRIM(MASTER_UNI_NAME) = 'Chung Ang University'; 
```

但是执行立即语句会给出错误“PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：

; 符号“;” 被替换为“文件结尾”以继续。”

我尝试排除尾随分号，但返回错误

```
 ORA-00933: SQL command not properly ended 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:08:04.160

尝试在没有嵌入换行符的情况下生成 SQL，如下所示：

```
CREATE OR REPLACE PROCEDURE PROC_MDM_RUN_DATA_MAPPING IS
  sqlString VARCHAR2(2000) := '';

  CURSOR csr_updates IS
    SELECT  trim(table_name) AS table_name, 
            trim(column_name) AS column_name, 
            trim(old_value) AS old_value, 
            trim(new_value) AS new_value 
      FROM C_MDM_MAPPING_TABLE 
      WHERE area = 'MDM' AND
            rownum < 10 AND
            run_update = 'Y';
  BEGIN
    FOR rec IN csr_updates LOOP
      sqlString := 'UPDATE ' || rec.table_name || 
                   ' SET ' || rec.column_name || ' = ''' || rec.new_value ||
                   ''' WHERE TRIM(' || rec.column_name || ') = ''' ||
                   rec.old_value || '''';

      INSERT INTO C_MDM_ERROR_LOG  ( msg ) VALUES ( sqlString ); 

      dbms_output.put_line(sqlString) ; -- works, giving correct SQL
      execute immediate sqlString ;
    END LOOP;

    COMMIT;
  END PROC_MDM_RUN_DATA_MAPPING; 
```

我删除了生成的 SQL 中的分号，因为我认为它是不需要的，并删除了循环内的 BEGIN...END 对，这也是不需要的。

我希望这有帮助。分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:22:57.910

感谢所有帮助 - 上面的答案是正确的，因为不需要尾随分号，但作为后续 - 有第二个问题是数据中的单引号。

如下更改光标修复了该问题

```
 SELECT  trim(table_name) AS table_name, 
            trim(column_name) AS column_name, 
            REPLACE(trim(old_value),'''','''''') AS old_value, 
            REPLACE(trim(new_value),'''','''''') AS new_value 
    FROM C_MDM_MAPPING_TABLE 
```

已知表名和列名没问题（它们来自系统），但它又回到“从不信任输入”。

谢谢

# c# - 为什么.Net 4 不允许我传入接口数组？

> ID：15561825
> 
> 赞同：0
> 
> 时间：2013-03-22T02:41:45.793
> 
> 标签：c#, collections, covariance

我有一个 Circle 对象数组（其中 Circle 实现了 IShape 接口，我有一个函数，其参数为......`List<IShape>`为什么我不能将我的 Circles 数组传递给这个？

Visual Studio 给我一个构建错误，说无法转换`List<Circle>`为`List<IShape>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T02:52:16.643

简短的回答是因为一个函数`Foo`可以这样实现：

```
void Foo(IList<IShape> c)
{
    c.Add(new Square());
} 
```

如果您将 a 传递`List<Circle>`给`Foo`，则提供的类型将无法存储`Square`，即使类型签名声称它是可以的。`IList<T>`不是[协变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)的：一般`IList<Circle>`不能是 an，`IList<IShape>`因为它不支持添加任意形状。

修复方法是用于`IEnumerable<IShape>`接受 中的参数`Foo`，但这并非在所有情况下都有效。`IEnumerable<T>`是协变的：specialized`IEnumerable<Circle>`符合 general 的契约`IEnumerable<IShape>`。

* * *

这种行为也是一件好事。一个不应该是协变的东西的经典例子是数组。以下代码将编译，但在运行时会失败：

```
void Bar()
{
    // legal in C#:
    object[] o = new string[10];
    // fails with ArrayTypeMismatchException: can't store Int in a String[]
    o[0] = 10;
} 
```

# python - pyxmpp2 连接到 openfire 无法解析 NXDOMAIN

> ID：15561826
> 
> 赞同：2
> 
> 时间：2013-03-22T02:41:49.950
> 
> 标签：python, xmpp, pyxmpp2

我将 pyxmpp2 安装`https://github.com/Jajcus/pyxmpp2`到我的 Ubuntu 机器上。我还为它安装了 Openfire 3.8.1。我想使用 pyxmpp2 在同一台机器上连接到我的 Openfire 服务器。

在我的 Openfire 控制面板中的服务器 -> 服务器管理器 -> 服务器信息中，面板中服务器属性中显示的服务器名称为 mymachine，环境部分中显示的主机名称为 MyMachine。

我尝试了以下代码：

```
import logging
from pyxmpp2.jid import JID
from pyxmpp2.client import Client
logging.basicConfig()
client = Client(JID("admin@mymachine"),[])
client.connect() 
```

并收到以下消息：

警告：pyxmpp2.resolver：无法解析“_xmpp-client._tcp.mymachine”：NXDOMAIN

我错过了配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:11:48.833

看起来您的域没有 DNS SRV 记录，因此 pyxmpp2 无法解析它们。查看[http://wiki.xmpp.org/web/SRV_Records](http://wiki.xmpp.org/web/SRV_Records)以了解如何创建它们。

基本上，DNS SRV 记录具有以下形式

> _service._proto.name TTL 类 SRV 优先权重端口目标

这可能看起来像这个例子

```
_xmpp-client._tcp.example.net. 86400 IN SRV 5 0 5222 example.net. 
```

也许 pyxmpp2 还提供了一种直接指定用于 XMPP 服务的主机的方法。这将避免 DNS SRV 查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T20:22:37.210

它可能正在使用 ipv6，您可以强制使用 ipv4`u"ipv4": True`并指定服务器`u"server": "chat.facebook.com"`

```
handler = MyHandler(JID(target_jid), message)
settings = XMPPSettings({
                            u"ipv4": True,
                            u"server": "chat.facebook.com",
                            u"password": your_password,
                            u"starttls": True,
                            u"tls_verify_peer": False,
                        })
client = Client(JID(your_jid), [handler], settings)
client.connect()
client.run() 
```

完整代码位于`pyxmpp2`示例文件夹中`send_message_client.py`

# git - 无法将本地存储库推送到 github

> ID：15561831
> 
> 赞同：0
> 
> 时间：2013-03-22T02:42:26.507
> 
> 标签：git, github, repository, push

我在两天前开始学习 git，从昨天开始，我在将内容推送到 git 时遇到了问题。[所以今天早上，我从我的 comp 和 github 帐户中删除了所有内容，并尝试按照本教程](http://nithinbekal.com/2010/installing-git-and-pushing-repo-to-github/)从头开始做所有事情。但是在我这样做之后，我或多或少地陷入了同样的问题。我在 stackoverflow 和其他论坛上看到了解决方案，但我无法摆脱困境。

我在 github 和我的本地机器 d 驱动器上有一个名为 project 的 repo，其中包含两个文本文件，我试图将它们推送到 github。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:32:08.787

我这样做了，它奏效了。感谢 fmendez 的建议。

```
 git checkout master
 git push origin +HEAD 
```

如果有人有更好的解决方案，请加入。

# macos - AppleScript单击Safari错误中的按钮

> ID：15561834
> 
> 赞同：1
> 
> 时间：2013-03-22T02:43:07.393
> 
> 标签：macos, button, safari, applescript, automator

我试图在使用 applescript 的网页上单击 safari 中的一个简单按钮。我有以下代码：

```
tell application "Safari"
    activate
    repeat 5 times
        do JavaScript "document.all(\"Roll Again\").click()" in document 1
        delay 2
    end repeat
end tell 
```

但是，当我运行此代码时，出现错误：“缺失值”。事件日志显示以下结果：

```
tell application "Safari"
    activate
    do JavaScript "document.all(\"Roll Again\").click()" in document 1
        --> missing value
    do JavaScript "document.all(\"Roll Again\").click()" in document 1
        --> missing value
    do JavaScript "document.all(\"Roll Again\").click()" in document 1
        --> missing value
    do JavaScript "document.all(\"Roll Again\").click()" in document 1
        --> missing value
    do JavaScript "document.all(\"Roll Again\").click()" in document 1
        --> missing value
end tell 
```

有人可以告诉我为什么没有按下按钮以及缺失值是什么意思吗？还有另一种更简单的方法来实现按钮按下吗？我可以使用 automator 按下按钮，但我想使用 AppleScript 来完成。

PS 文档是 safari 中的当前窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:14:28.217

[document.all](https://stackoverflow.com/questions/2408424/document-all-vs-document-getelementbyid)特定于 IE，在 Safari 中不起作用。尝试使用 getElementById 或 querySelectorAll：

```
tell application "Safari"
    activate
    tell document 1
        do JavaScript "document.getElementById(\"nav-badges\").click()"
        delay 5
        do JavaScript "document.querySelectorAll(\"#hmenus a\")[0].click()"
    end tell
end tell 
```

# objective-c - 终止并用早期版本替换应用程序以进行升级安装

> ID：15561836
> 
> 赞同：2
> 
> 时间：2013-03-22T02:43:12.933
> 
> 标签：objective-c, macos, cocoa, version, updates

我是 Mac OSx 和 Objective-C 开发的新手。

当正在安装或升级应用程序的更高版本时，我想就如何终止和替换现有应用程序（使用早期版本）寻求一些帮助？

我知道当 App Store 或外部服务器中有新版本可用时更新应用程序。我已经涵盖了。但这是一个没有互联网连接的mac的实现。每当有新版本可用时，通过安装应用程序手动完成升级。

安装时的行为：

1.  它应该检查系统中是否存在应用程序的现有副本。它应该提示用户继续并删除应用程序或取消安装。

2.  如果应用程序的现有副本当前正在运行，它应该提示用户退出应用程序的运行副本或取消安装。当用户选择退出应用程序时，它应该自动终止应用程序并继续安装。旧版本的应用程序应替换为新安装的具有更高版本的应用程序副本。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:57:45.657

PackageMaker 可以为您完成所有这些工作。使用 Apple 提供的此应用程序准备安装程序。如果您使用的是 Mountain Lion，请从

[https://developer.apple.com/downloads](https://developer.apple.com/downloads) “Xcode 的辅助工具”

启动应用程序并单击预安装操作下方操作选项卡中的编辑按钮。

![在此处输入图像描述](../Images/3d1bce4202f7ff51ab85144b1785474c.png)

在显示的工作表中添加退出应用程序操作。

![在此处输入图像描述](../Images/fc4e6bc630dcb4311e153e48c9bf1418.png)

# r - 这个因子图可以用 R 绘制吗？

> ID：15561841
> 
> 赞同：2
> 
> 时间：2013-03-22T02:43:36.007
> 
> 标签：r

我有下图

![在此处输入图像描述](../Images/0fc5b0408471568dab1bae38b31cad59.png)

这些红色箭头表示每个节点在它们指向的方向上的权重因子。输入文件是因子的值和方向。

这个因子图可以用 R 绘制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T08:51:32.333

首先是一些（我希望）模仿你的虚拟数据（考虑到你提供的信息很少，这很难说）：

```
ow <- expand.grid(c(1.5,2.5),c(1.5,2.5))
row.names(ow)<-letters[1:4]
pw <- expand.grid(1:3,1:3)
row.names(pw)<-LETTERS[1:9]
B <- rbind(expand.grid("a",row.names(pw)[c(1,2,4,5)]),
           expand.grid("b",row.names(pw)[c(2,3,5,6)]),
           expand.grid("c",row.names(pw)[c(4,5,7,8)]),
           expand.grid("d",row.names(pw)[c(5,6,8,9)]))
B <- cbind(B,abs(rnorm(16))) 
```

所以我们有：

```
# The location of your oil wells:
ow
   Var1 Var2
a  1.5  1.5
b  2.5  1.5
c  1.5  2.5
d  2.5  2.5
# Of your production wells:
pw
  Var1 Var2
A    1    1
B    2    1
C    3    1
D    1    2
E    2    2
F    3    2
G    1    3
H    2    3
I    3    3
#And a b value for each pairs of neighbouring oil/production wells:
   Var1 Var2 abs(rnorm(16))
1     a    A     1.78527757
2     a    B     1.61794028
3     a    D     1.80234599
4     a    E     0.04202002
5     b    B     0.90265280
6     b    C     1.05214769
7     b    E     0.67932237
8     b    F     0.11497430
9     c    D     0.26288589
10    c    E     0.50745137
11    c    G     0.74102529
12    c    H     1.43919338
13    d    E     1.04111278
14    d    F     0.49372216
15    d    H     0.21500663
16    d    I     0.20156929 
```

这是一个简单的函数，可以或多或少地绘制您显示的那种图形：

```
weirdplot <- function(ow_loc, pw_loc, B, 
                     pch_ow=19, pch_pw=17, 
                     col_ow="green", col_pw="blue", col_b="red", breaks){
    # with ow_loc and pw_loc the locations of your wells
    # B the correspondance table
    # pch_ow and pch_pw the point type for the wells
    # col_b, col_ow and col_pw the colors for the arrows and the wells
    # and breaks a vector of size categories for b values
    plot(pw_loc,type="n")
    b<-cut(B[,3], breaks=breaks)
    for(i in 1:nrow(B)){
        start=ow_loc[row.names(ow)==B[i,1],]
        end=pw_loc[row.names(pw)==B[i,2],]
        arrows(x0=start[,1],y0=start[,2], 
               x1=end[,1], y1=end[,2], lwd=b[i], col=col_b)
        }
    points(pw_loc, pch=pch_pw, col=col_pw)
    points(ow_loc, pch=pch_ow, col=col_ow)
    } 
```

因此，使用我们之前创建的值：

```
weirdplot(ow, pw, B, breaks=c(0,0.5,1,1.5,2)) 
```

![在此处输入图像描述](../Images/a804eca3defd81db3ca7d9b9c1239a31.png)

它不是特别漂亮，但它应该让你开始。

# linq - 在 CRM 2011 插件的同一语句中使用多个 JOIN 时出现 LINQ 错误

> ID：15561843
> 
> 赞同：0
> 
> 时间：2013-03-22T02:43:39.367
> 
> 标签：linq, join, dynamics-crm-2011, dynamics-crm, linq-query-syntax

嗨，我正在尝试在 CRM 2011 中加入多个实体，但我收到错误消息：{“'xrmsm_sessionEnrollments' 实体不包含名称 = 'xrmsm_termsid'.”的属性。”}。这是正确的，但我正在加入具有该属性的实体。

我的 Linq 查询：

`var query2 = from e in svsContext.xrmsm_sessionEnrollmentsSet`

```
 join s in svsContext.xrmsm_sessionsSet on e.xrmsm_SessionLookup.Id equals s.xrmsm_sessionsId
        join ic in svsContext.xrmsm_institutionCoursesSet on s.xrmsm_institutionCourseLookup.Id equals ic.xrmsm_institutionCoursesId
        join ts in svsContext.xrmsm_term_sessionsSet on e.xrmsm_termSessionLookup.Id equals ts.xrmsm_term_sessionsId
        join t in svsContext.xrmsm_termsSet on ts.xrmsm_TermLookup.Id equals t.xrmsm_termsId
        where (e.xrmsm_StudentLookup.Equals(studentlookup)
               && e.xrmsm_YearLookup.Equals(entity.GetAttributeValue("xrmsm_studentlookup"))
               && ic.xrmsm_institutionCoursesId == institutionCourseGuid
               && t.xrmsm_termsId == termGuid)
        select new { sessionName = s.xrmsm_sessionsName, StudentName = e.xrmsm_studentsName, StudentId = e.xrmsm_StudentLookup.Name };
```

我在 SQL Server 上工作的原始 SQL 查询：

```
SELECT en.xrmsm_currentsessionenrollmentsname
      ,en.xrmsm_isreadonlyname
      ,en.xrmsm_sessionenrollmentsaverage
      ,en.xrmsm_sessionenrollmentsgrade
      ,en.xrmsm_sessionenrollmentsid
      ,en.xrmsm_sessionenrollments_id
      ,en.xrmsm_sessionlookup as sessionid
      ,en.xrmsm_sessionlookupname
      ,en.xrmsm_sessionsname
      ,en.xrmsm_studentlookup AS studentid
      ,en.xrmsm_studentlookupname
      ,en.xrmsm_studentsname
      ,en.xrmsm_termsessionlookup
      ,en.xrmsm_termsessionlookupname
      ,en.xrmsm_withdrawal
      ,en.xrmsm_yearaverage
      ,en.xrmsm_yeargrade
      ,en.xrmsm_yearlookup
      ,en.xrmsm_yearlookupname
  FROM CoseyTest_MSCRM.dbo.Filteredxrmsm_sessionEnrollments as en INNER JOIN 
  CoseyTest_MSCRM.dbo.Filteredxrmsm_sessions crmsessions ON 
  (en.xrmsm_sessionlookup = crmsessions.xrmsm_sessionsid AND en.xrmsm_yearlookup = crmsessions.xrmsm_yearlookup)
  INNER JOIN Filteredxrmsm_institutionCourses institutionCourses
  on crmsessions.xrmsm_institutioncourselookup = institutionCourses.xrmsm_institutioncoursesid
  Inner Join Filteredxrmsm_term_sessions as termsession
  on en.xrmsm_termsessionlookup = termsession.xrmsm_term_sessionsid
  Inner Join Filteredxrmsm_terms as terms
  on termsession.xrmsm_termlookup = terms.xrmsm_termsid 
  where en.xrmsm_yearlookup = '4BA07BED-3F51-E211-8359-00155D004403' 
  and en.xrmsm_studentlookup = 'C844AF65-5B51-E211-8359-00155D004403'
  and terms.xrmsm_termsid = 'D1D107B7-4551-E211-8359-00155D004403' 
  and institutionCourses.xrmsm_institutioncoursesid = '2121914E-4551-E211-8359-00155D004403' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:14:47.987

CRM 的 Linq 提供程序有一些限制。你可以[在这里找到](http://msdn.microsoft.com/en-us/library/gg328328.aspx#limitations)它。检查您的查询是否违反限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:39:34.240

尝试查看它正在生成的实际查询并在 SQL 中运行它，它可能有助于了解正在发生的事情。

可能是您在 LINQ 中所做的某些事情在 CRM 中不可用，正如 paramosh 所提到的，但我看不到任何让我兴奋的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T23:42:06.907

感谢您的所有回复。我做了以下解决方法。

1.  进行查询以检索所有学生注册的列表

2.  使用`List<T>`类的 Find 方法来查找是否存在符合我正在搜索的条件的记录。

    ```
     var query2 = (from e in svsContext.xrmsm_sessionEnrollmentsSet
                     join s in svsContext.xrmsm_sessionsSet on e.xrmsm_SessionLookup.Id equals s.xrmsm_sessionsId
                     join ic in svsContext.xrmsm_institutionCoursesSet on s.xrmsm_institutionCourseLookup.Id equals ic.xrmsm_institutionCoursesId
                     join ts in svsContext.xrmsm_term_sessionsSet on e.xrmsm_termSessionLookup.Id equals ts.xrmsm_term_sessionsId
                     join t in svsContext.xrmsm_termsSet on ts.xrmsm_TermLookup.Id equals t.xrmsm_termsId
                     where (e.xrmsm_StudentLookup.Equals(studentlookup))
                     select new
                     {
                         EnrollmentId = e.xrmsm_sessionEnrollments_id,
                         SessionId = s.xrmsm_sessions_id,
                         EnrollmentYear = e.xrmsm_YearLookup,
                         InstitutionCourseId = (Guid)ic.xrmsm_institutionCoursesId,
                         TermId = (Guid)t.xrmsm_termsId,
                         Student = e.xrmsm_StudentLookup
                     }).ToList();

        var q = query2.Find(r => r.EnrollmentYear.Id == entity.GetAttributeValue<EntityReference>("xrmsm_yearlookup").Id
                             && r.InstitutionCourseId == institutionCourseGuid
                             && r.TermId == termGuid); 
    ```

# android - 如何在android中显示饼图

> ID：15561844
> 
> 赞同：9
> 
> 时间：2013-03-22T02:43:49.750
> 
> 标签：android, pie-chart

我想构建一个应用程序，在其中我想在饼图中显示内存和 CPU 使用情况图。但是我不知道如何实现这一点。

我看到了以下问题：

[如何在android中异步显示3D饼图？](https://stackoverflow.com/questions/12000492/how-to-display-the-3d-pie-chart-asynchronously-in-android)

但我无法解决这个问题。我能做些什么 ？伙计们，你们能在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:54:04.387

您可以使用[achartengine](http://www.achartengine.org/)创建不同类型的图表。例如，您可以找到很多类似这两个的链接

[链接1](http://danielkvist.net/code/piechart-with-achartengine-in-android)，[链接2](http://mukeshsoni.wordpress.com/2012/09/18/how-to-setup-achartengine-within-an-activity/)

[这](http://xebee.xebia.in/2010/08/31/exploring-android-charting-and-graphs-solutions/)是另一个很好的例子，你可以看看

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-30T10:47:49.193

要在 android 上“绘制”图形，您可以使用第三方库。所有库都支持不同类型的图表。

Android 有一些图形库：

1.  [afreechart](https://code.google.com/p/afreechart/)基于 jfreechart。许可证：LGPL 版本：0.0.4

2.  [AChartEngine](http://code.google.com/p/achartengine/)
    许可证：Apache 版本：1.2.0 Maven：是的。（自定义回购？）

3.  [AndroidPlot](http://androidplot.com/) 许可证：Apache 版本：0.6.0 Maven：是

4.  [GraphView](http://android.arnodenhond.com/components/graphview)
    许可证：Apache？版本： ？马文：？

我发现没有那么多。但它似乎是免费的。

1.  [DroidCharts](https://code.google.com/p/droidcharts/) 许可证：LGPL 版本：r2？马文：？

2.  [Chartdroid](https://code.google.com/p/chartdroid/)
    许可证：Apache 版本：2.0.0 Maven ：？

或者您实现自己的:) 这不是完美的答案，但也许是一个很好的提示。

# django - 带有嗖嗖声的 Django-haystack - 无法按布尔字段过滤

> ID：15561850
> 
> 赞同：1
> 
> 时间：2013-03-22T02:44:22.893
> 
> 标签：django, django-haystack, whoosh

好吧，我已经把头发拉了好几个小时了，我想是时候寻求帮助了，因为我无法通过谷歌搜索找出为什么会发生这种情况......

本质上，我正在制作一个分类类型的应用程序，我需要一个搜索表单来搜索数据库并根据各种条件进行过滤。我正在使用 django、haystack 和 whoosh，它几乎可以完美运行，但我似乎无法让它过滤布尔变量。我已经成功地将它过滤到 Charfield 类别并且它工作得很好但是当我尝试添加基于 for_sale 布尔值（或任何布尔值）的过滤器时，它不会过滤任何东西并返回相同的结果，好像它从未被调用过（我已经检查过它实际上被调用了）。

有人有想法么？

我的模型的相关部分：

```
class Listing(models.Model):
    SALE_CHOICES=((True, 'Items for sale'),
          (False, 'Items wanted'))
    for_sale = models.BooleanField(choices=SALE_CHOICES, default=True)
    CAT_CHOICES = ((WOOD, "Woods"), (BRICKS, "Bricks"), etc)
    category = models.CharField(max_length=6, choices = CAT_CHOICES, default = WOOD) 
```

这是我的列表索引类：

```
class ListingIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    title = indexes.CharField(model_attr='title')
    text_content = indexes.CharField(model_attr='text_content')
    created = indexes.DateTimeField(model_attr='created')
    url = indexes.CharField(model_attr='url')
    price = indexes.CharField(model_attr='price', null=True)
    city = indexes.CharField(model_attr='city', null=True)
    category = indexes.CharField(model_attr='category')
    for_sale = indexes.BooleanField(model_attr='for_sale', default=True)

def get_model(self):
    return Listing

def index_queryset(self, using=None):
    return self.get_model().objects.filter(expired=False).filter(verified=True) 
```

我扩展的 SearchForm 和 SearchView：

```
class ListingSearchForm(FacetedSearchForm):
    cat = forms.CharField(required=False, widget=forms.Select(choices=get_listings_categories()))
    type = forms.CharField(required=False, widget=forms.HiddenInput)
    for_sale = forms.BooleanField(required=False, widget=forms.Select(choices=get_sale_categories()))

def search(self):
    # First, store the SearchQuerySet received from other processing.
    sqs = super(ListingSearchForm, self).search()

    # Check to see if a category was chosen.
    if self.cleaned_data['cat']:
        sqs = sqs.filter(category=self.cleaned_data['cat'])

    # Check to see if a type was chosen.
    if self.cleaned_data['for_sale']:
        sqs = sqs.filter(for_sale=self.cleaned_data['for_sale'])

    return sqs

class ListingSearchView(SearchView):

    def extra_context(self):
        extra = super(ListingSearchView, self).extra_context()

        extra['post_type'] = self.request.GET.get('type', None)
        extra['cat'] = self.request.GET.get('cat', None)
        extra['for_sale'] = self.request.GET.get('for_sale', None)

        return extra 
```

最后是我的列表索引文本文件：

```
{{ object.title }}
{{ object.text_content }}
{{ object.created }}
{{ object.url }}
{{ object.category }}
{{ object.price }}
{{ object.city }}
{{ object.for_sale }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:23:59.003

我最终将我的 for_sale 字段重新工作为 CharField，现在我可以对其进行过滤了。

Haystack 或 Whoosh 只是不喜欢布尔值，我猜哈哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T18:05:54.197

[它可能与Haystack 中的 issue #371](https://github.com/toastdriven/django-haystack/pull/372)相同：

> 我注意到 whoosh 将布尔值存储为 Python 值 True 和 False，而 haystack 存储了字符串“true”和“false”，如果查询，两者都评估为 True。
> 
> 此外查询我的索引需要使用字符串't'和'f'作为布尔字段。使用此补丁，可以使用 True 或 False 进行查询。

这显然是[在 Whoosh 中修复的](https://bitbucket.org/mchaput/whoosh/commits/4d0fdd46e9b5047b39cfa5187ffd3122a1e15cf2/)，在 2.4x 分支中（在 2.41 发布之后，所以还不可用）和 2.5.0 及更高版本。

# joomla2.5 - joomla 2.5 突然剥离标签

> ID：15561851
> 
> 赞同：0
> 
> 时间：2013-03-22T02:44:26.307
> 
> 标签：joomla2.5

我在 Joomla 2.5 中工作，必须为客户端安装一个所见即所得的编辑器。我安装了 ckeditor 和 jceditor。在每次保存文章时启用其中一个后，图像标签就会被剥离。iframe 通过。所有路径都是正确的，代码是干净的。我已经为所有用户组更改了编辑器，没有编辑器并且仍然剥离没有打开过滤。

非常感谢任何帮助 Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:42:01.383

我遇到了许多编辑的问题，但不是这个。请尝试[JCE](http://www.joomlacontenteditor.net/)，问题应该会消失

# angularjs - 如何在 AngularJS 中打开/关闭 $log.debug

> ID：15561853
> 
> 赞同：77
> 
> 时间：2013-03-22T02:44:33.073
> 
> 标签：angularjs, logging, angularjs-log

我正在尝试使用 $log.debug("Foo")。怎么能关掉。我在任何地方都找不到样品。我认为它需要在配置中设置，但我似乎也无法让它工作。

开关在哪里设置？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-03-23T01:08:56.273

$logProvider.debugEnabled(true)

这仅在 AngularJs 1.1.2 或更高版本中可用。

[https://github.com/angular/angular.js/pull/1625](https://github.com/angular/angular.js/pull/1625)

这是一个设置它的例子。

```
var app = angular.module('plunker', []);

app.config(function($logProvider){
  $logProvider.debugEnabled(true);
});

app.controller('MainCtrl', function($scope, $log ) {
  $scope.name = 'World';
  $scope.model = {value: "test"};
  $log.debug('TEST Log');
}); 
```

[http://plnkr.co/edit/HZCAoS?p=preview](http://plnkr.co/edit/HZCAoS?p=preview)

默认情况下它是打开的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-10T16:23:45.497

您可以使用装饰器覆盖默认的 $log 行为以增强日志级别。这是一个例子：

```
angular.module('app').config(function($logProvider, $provide){

    $logProvider.debugEnabled(false);

    $provide.decorator('$log', function ($delegate) {
        //Original methods
        var origInfo = $delegate.info;
        var origLog = $delegate.log;

        //Override the default behavior
        $delegate.info = function () {

            if ($logProvider.debugEnabled())
                origInfo.apply(null, arguments)
        };

        //Override the default behavior    
        $delegate.log = function () {

            if ($logProvider.debugEnabled())
                origLog.apply(null, arguments)
        };

        return $delegate;
    });
}); 
```

这是受到约翰克罗斯比在[http://www.thekuroko.com/using-angulars-log-provider/上的工作的启发](http://www.thekuroko.com/using-angulars-log-provider/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-06-28T15:24:03.807

我遇到了同样的问题，但这不是通过编码解决的问题，而是从浏览器控制台启用它

转到浏览器的控制台并将级别设置为详细

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-08T12:03:38.933

好吧，由于解决方案需要我们打开`Verbose`标志，我认为处理 Angular 登录的最佳方法是简单地更改`console.log`整个应用程序的生产环境中的本机功能。

```
angular.module("myModule")
.config(function(){
    //if production environment
    console.log = ()=>{};
}) 
```

就是这样。在生产环境中，这应该在所有地方禁用日志记录。现在也不需要注入`$log`每个控制器。简单`console.log("logging message")`有效！

You can also disable `console.info`, `console.warn`, `console.error` and `console.debug` the same way as per your need.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-17T06:23:25.787

基于 Diego 的回应，但添加了一些环境配置并使其更短。您可以简单地使用以下命令运行您的应用程序：`NODE_ENV=development`或`NODE_ENV=production`

例1。`NODE_ENV=development webpack-dev-server`

例2。`NODE_ENV=production node app.js`

```
$logProvider.debugEnabled(process.env.NODE_ENV === 'development');
$provide.decorator('$log', function($delegate) {
    $delegate.info = $logProvider.debugEnabled() ? $delegate.info : function() {};
    $delegate.log = $logProvider.debugEnabled() ? $delegate.log : function() {};
    return $delegate;
}); 
```

# php - 为什么我的 SQL 脚本会停止？

> ID：15561854
> 
> 赞同：1
> 
> 时间：2013-03-22T02:44:35.327
> 
> 标签：php, mysql, function, size, prestashop

我有一个关于 PHP/MYSQL 的问题。我有一个函数，它获取 MYSQL 表中的颜色列表并将它们呈现到许多 HTML 表中。想法是，除非客户选择某个选项，否则大部分内容将被隐藏。当用户将鼠标放在颜色上时，它会加载更详细的图片。它工作正常，但是在脚本停止执行一定数量的字符后，这里是代码：

要求：

```
$sql = 'SELECT *, GROUP_CONCAT(description ORDER BY i.model_correspondance ASC) AS concat,     GROUP_CONCAT(model_correspondance ORDER BY i.model_correspondance ASC) AS modell, GROUP_CONCAT(element) AS elem, GROUP_CONCAT(coordinates ORDER BY i.model_correspondance ASC) AS coord FROM design_tool_items AS i WHERE i.model='.$shoe.' GROUP BY i.element, i.category, i.subelement ORDER BY i.id ASC'; 
```

和 PHP 的其余部分：

```
 if ($results = Db::getInstance()->ExecuteS($sql)) {
            foreach ($results as $row) {

                if($row['subelement']=='') {
                    if(isset($i)) $code .= '</div>';
                        $code .= '<div class="'.$display.' color_holder" rel="'.$row['style'].'" id="div'.$row['subelement'].'.'.$row['element'].'">';
                        $i=1;
                } else {
                    $code .= '</div>';
                    $code .= '<div class="no color_holder" rel="'.$row['style'].'" id="div'.$row['subelement'].'.'.$row['element'].'">';
                }

                $sentinel = $row['element'];
                $code .= '<div style="text-align:left;padding:10px">'.$row['category'].'</div>';
                $concat = explode(',', $row['concat']);
                $coordinate = explode(',', $row['coord']);
                $model_corres = explode(',', $row['modell']);

                foreach($concat as $item => $corres) {

                    if(($i==1)&&(array_search($sentinel, $array_elements)===false)) { 
                        $array_elements[] = $sentinel;
                        $select = 'selected';
                    } else $select = '';

                    $coord = explode('#', $coordinate[$item]);

                    $clean_array = array($row['category'], $corres);
                    foreach($clean_array as &$text) {
                        $text = str_replace(' ', '_', $text);
                        $text = strtolower($text);  
                    }

                    $code .= '<div style="width:60px;padding-left:10px;margin:auto;float:left;">';
                    $code .= '<div onmouseover="Tip(\'<div><img style=width:200px;height:200px; src='.$val.'folded_images/'.$clean_array[0].'/'.$clean_array[1].'.jpg alt=Image:'.$corres.' /><br>'.$corres.'</div>\')" onmouseout="UnTip()" rel="'.$row['style'].'" denom="'.$row['subelement'].'.'.$sentinel.$model_corres[$item].'" class="color '.$select.'" style="background-position:'.$coord[0].'px '.$coord[1].'px;"></div>';
                    $code .= '</div>';
                    if(is_int($i/3)) $code .= '<div style="clear:both;"></div>';
                    $i++;
                }
                $code .= '<div style="clear:both;"></div>';
            }
        }

        return $code; 
```

在第 100 行，脚本在中间停止工作，只显示描述的前三个字符。如果我减少前面描述的长度，它会进一步工作，所以问题来自数组 $concat。

你认为有大小限制吗（我知道 PHP 5.2 中的 128Mb 和 8Mb 之前，但是网站运行 PHP 5.2.3，我认为我离 128Mb 还很远）？

抱歉话题太长了，先谢谢大家关注这个。

祝你有美好的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:48:21.427

其原因在于使用`GROUP_CONCAT`.

一个可能有用的有用链接。[关联](https://stackoverflow.com/questions/14702177/group-concat-in-mysql-query-stops-early)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:48:48.380

可能与[最大执行时间](http://davidwalsh.name/increase-php-script-execution-time-limit-ini_set)和/或[内存限制](http://www.hostucan.com/webmaster-tutorials/increase-php-memory-limit)有关。值得单独调整每个（然后，如果有疑问，一起调整），看看你是否得到了有利的结果。您可能还希望[为 PHP 启用更好的调试日志记录](http://blog.teamtreehouse.com/how-to-debug-in-php)。

# regex - ANT 属性正则表达式的额外空格

> ID：15561858
> 
> 赞同：0
> 
> 时间：2013-03-22T02:45:37.897
> 
> 标签：regex, ant, whitespace

我整天都在敲这个头。我有一个从运行 shell 命令中捕获的字符串，我需要解析该字符串并提取文件的路径。我的工作正常，直到我尝试复制该文件......我认为我正在使用的正则表达式在路径的前面留下一个空格字符，这会在以后造成各种麻烦。

这是输入字符串的示例： [echo] P4ant has output = //perforce/dir1/dir2/dir3/dir4/dir5/dir6/dir7 /p4ant/p4ant-2010.1.293250.jar#1 - C:\dir1\ dir2\dir3\dir4\dir5\dir6\dir7\dir8\dir9\p4ant\p4ant-2010.1.293250.jar

当我解析它时，我得到了这个： [echo] P4ant local path = C:\dir1\dir2\dir3\dir4\dir5\dir6\dir7 \dir8\dir9\p4ant\p4ant-2010.1.293250.jar

看起来不错，但那里有一个额外的空间。我似乎无法摆脱它。这是我正在使用的代码：

```
 <propertyregex property="p4ant.local.path"
                  input="${p4ant.have.output}"
                  regexp="([^-][^ ]+?)$"
                  select="\0"
                  casesensitive="false"
            /> 
```

我正在搜索“破折号空间”组合，它在输出中不包含破折号，但由于某种原因仍然包含空格。

我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:32:24.683

```
\-\s <-- dash, followed by a whitespace
(.+?) <-- Anything, up to the next matching character
\s  <-- whitespace
(.+)$  <-- Anything, up to the end 
```

所以：
`regexp="\-\s(.+?)\s(.+)$"`

然后连接 $1 和 $2 （对不起，不知道这在 ANT 中是如何工作的）

# node.js - 快递，同一功能的多条路线

> ID：15561859
> 
> 赞同：3
> 
> 时间：2013-03-22T02:45:39.803
> 
> 标签：node.js, express

我正在模仿另一个 api。我还想提供一个不同的（更好的恕我直言）api。

```
// this is url I need to support 
api.post('/books/updateBook', function(req, res) {
...
});

// Would also like to support
api.put('/books/:bookId', function(req, res) {
...
}); 
```

我可以很容易地做到：

```
var updateBook = function(req, res) {
...
}

// this is url I need to support 
api.post('/books/updateBook', updateBook);

// Would also like to support
api.put('/books/:bookId', updateBook); 
```

完全可以接受对吧？作为新的表达我想知道是否有更“表达”的方式来处理这个问题。我知道您可以使用正则表达式，但我不确定您是否可以将正则表达式映射到不同的 HTTP 动词（POST 与 PUT）。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T03:24:59.643

```
api.all('/books/:bookId', function (req, res, next) {
  if (req.method === 'PUT' || req.method === 'POST) {
    //get your groove on
  } else {
    next();
  }
}); 
```

您可以在 express 中组合动词，您只需使用 all 并检查方法，如果匹配，则处理请求，否则将其传递到处理程序链（使用`next();`）。

话虽如此，我认为您做对了，路由处理程序没有理由需要成为 lamdas。

# jquery - jquery验证特殊字符

> ID：15561860
> 
> 赞同：0
> 
> 时间：2013-03-22T02:45:40.513
> 
> 标签：jquery, jquery-validate

使用 jquery，在 sublit 上需要验证文本框值并在它包含字母、特殊字符或小于 20 的数字时抛出错误

代码：

```
 <input type="text" class="input-text-bx" id="actual" value="">
          <input type="submit" id="real" value="submit"/> 
```

我尝试使用 jquery 1.3 而不单击提交按钮。我需要最新的带有 $ 的提交。

```
 Query(function(){

            jQuery('.input-text-bx').validate({
                expression: "if (VAL) return true; else return false;",
                message: "Please enter  a valid number"
            });
        jQuery('.input-text-bx').validate({
                expression: "if (VAL.match(/^[0-9]*$/)) return true; else return false;",
                message: "Actual card can only be in numbers"
            });
            jQuery('.input-text-bx').validate({
                expression: "if ((VAL.length >=16) )return true; else return false;",
                message: "The card number should be 16-20 digits"
            });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:01:45.530

您可以`onblur`在输入上使用事件

```
jQuery('.input-text-bx').bind('onblur', function(){ // Validation Here }); 
```

并在函数中检查长度（> 16 & <20）。你也可以匹配正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:06:06.807

您的`.validate()`代码（和[jquery-validate](/questions/tagged/jquery-validate "显示标记为“jquery-validate”的问题")标记）中的 表示您尝试使用[jQuery Validate plugin](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。否则，`.validate()`没有它，就没有 jQuery 那样的东西。

```
<input type="text" class="input-text-bx" id="actual" value="">

jQuery('.input-text-bx').validate({
     expression: "if (VAL) return true; else return false;",
     message: "Please enter  a valid number"
}); 
```

1）您*绝对不能*附加`.validate()`到元素以外的任何`<form></form>`元素。没有解决方法。

2）没有这样的`.validate()`选项称为`expression`。如果您需要编写自定义方法或规则，则必须使用[插件的内置`addMethod`方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)。

* * *

尝试使用这样的插件。（所有`input`元素都必须具有`name`此插件才能正常工作的属性）

**HTML**：

```
<form id="myform">
    <input type="text" class="input-text-bx" name="actual" id="actual" />
    <input type="submit" />
</form> 
```

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            actual: {
                required: true,       // required field
                number: true,         // must be a number
                rangelength: [16, 20] // must be between 16 and 20 digits
            }
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/NvREa/](http://jsfiddle.net/NvREa/)**

**文档： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)**

# opencv - 快速图像阈值处理

> ID：15561863
> 
> 赞同：30
> 
> 时间：2013-03-22T02:46:04.933
> 
> 标签：opencv, image-processing, threshold

**什么是对可能模糊和不均匀亮度的图像进行阈值处理的快速可靠的方法？**

示例（模糊但亮度均匀）：

![在此处输入图像描述](../Images/baae602673a76950c5a695e9ffdc93ea.png)

由于不能保证图像具有均匀的亮度，因此使用固定阈值是不可行的。自适应阈值可以正常工作，但由于模糊性，它会在特征中产生中断和扭曲（这里，重要的特征是数独数字）：

![在此处输入图像描述](../Images/5d21741f9fcd20c3896a6ce67d002801.png)

我也尝试过使用直方图均衡（使用 OpenCV 的`equalizeHist`函数）。它在不减少亮度差异的情况下增加对比度。

我发现的最佳解决方案是将图像除以其形态闭合（归功于[此帖子](https://stackoverflow.com/a/10226971/1397061)）以使亮度均匀，然后重新归一化，然后使用固定阈值（使用 Otsu 的算法来选择最佳阈值水平）：

![在此处输入图像描述](../Images/c229b61c6d2d6124b8512b736238d7fb.png)

这是 OpenCV for Android 中的代码：

```
Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_ELLIPSE, new Size(19,19));
Mat closed = new Mat(); // closed will have type CV_32F
Imgproc.morphologyEx(image, closed, Imgproc.MORPH_CLOSE, kernel);
Core.divide(image, closed, closed, 1, CvType.CV_32F);
Core.normalize(closed, image, 0, 255, Core.NORM_MINMAX, CvType.CV_8U);
Imgproc.threshold(image, image, -1, 255, Imgproc.THRESH_BINARY_INV
    +Imgproc.THRESH_OTSU); 
```

这很好用，但关闭操作非常慢。减小结构元素的大小会提高速度，但会降低准确性。

编辑：根据 DCS 的建议，我尝试使用高通滤波器。我选择了 Laplacian 滤波器，但我希望使用 Sobel 和 Scharr 滤波器得到类似的结果。该滤波器在不包含特征的区域中拾取高频噪声，并且由于模糊而遭受与自适应阈值相似的失真。它也需要大约与关闭操作一样长的时间。这是一个使用 15x15 过滤器的示例：

![在此处输入图像描述](../Images/950ff80a18bd8c64f530e200dd58afaf.png)

编辑 2：根据 AruniRC 的回答，我使用建议参数对图像使用 Canny 边缘检测：

```
double mean = Core.mean(image).val[0];
Imgproc.Canny(image, image, 0.66*mean, 1.33*mean); 
```

我不确定如何可靠地*自动*微调参数以获得连接的数字。

![在此处输入图像描述](../Images/5e3a2388875bf72d164bec5968c40439.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-24T23:02:30.510

使用 Vaughn Cato 和 Theraot 的建议，我在关闭之前缩小了图像，然后将关闭的图像放大到常规尺寸。我还按比例减小了内核大小。

```
Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_ELLIPSE, new Size(5,5));
Mat temp = new Mat(); 

Imgproc.resize(image, temp, new Size(image.cols()/4, image.rows()/4));
Imgproc.morphologyEx(temp, temp, Imgproc.MORPH_CLOSE, kernel);
Imgproc.resize(temp, temp, new Size(image.cols(), image.rows()));

Core.divide(image, temp, temp, 1, CvType.CV_32F); // temp will now have type CV_32F
Core.normalize(temp, image, 0, 255, Core.NORM_MINMAX, CvType.CV_8U);

Imgproc.threshold(image, image, -1, 255, 
    Imgproc.THRESH_BINARY_INV+Imgproc.THRESH_OTSU); 
```

下图并排显示了 3 种不同方法的结果：

左 - 常规尺寸关闭（432 像素），尺寸 19 内核

Middle - 半尺寸闭合（216 像素），尺寸 9 内核

右 - 四分之一尺寸闭合（108 像素），尺寸 5 内核

![在此处输入图像描述](../Images/f6a89d7f537cb824e235e3e04e23796d.png)

图像质量随着用于闭合的图像尺寸变小而恶化，但恶化程度不足以影响特征识别算法。即使调整大小，四分之一尺寸关闭的速度也增加了 16 倍多一点，这表明关闭时间大致与图像中的像素数成正比。

任何关于如何进一步改进这个想法的建议（通过进一步降低速度或减少图像质量的恶化）都非常受欢迎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:33:42.130

替代方法：

假设您的意图是让数字清晰地二值化......将您的注意力转移到组件而不是整个图像上。

这是一个非常简单的方法：

1.  在图像上做一个 Canny 边缘图。首先在低阈值到 0.66*[平均值] 和高阈值到 1.33*[平均值] 的范围内尝试使用 Canny 函数的参数。（表示灰度值的平均值）。
2.  您需要稍微调整一下参数才能获得主要组件/数字作为单独组件清晰可见的图像。在这个阶段，接近完美就足够了。
3.  将每个 Canny 边缘视为一个连接组件（即使用 cvFindContours() 或其 C++ 对应项，无论哪个），可以估计前景和背景灰度级并达到阈值。

    最后一点，请查看[本文](http://www.m.cs.osakafu-u.ac.jp/cbdar2007/proceedings/papers/O1-1.pdf)的第 2\. 和 3\. 部分。跳过大部分非必要的理论部分，在 OpenCV 中实现它应该不会太难。

    希望这有帮助！

**编辑1：**

基于 Canny 边缘阈值，这是一个非常粗略的想法，足以微调这些值。控制在`high_threshold`检测到边缘之前必须有多强。基本上，边缘必须具有大于`high_threshold`首先被检测到的梯度幅度。所以这是对边缘的初始检测。

现在，`low_threshold`处理连接附近的边缘。它控制有多少附近断开的边将组合在一起成为一条边。[如需更好的主意，请阅读此网页](http://dasl.mem.drexel.edu/alumni/bGreen/www.pages.drexel.edu/_weg22/can_tut.html)的“第 6 步” 。尝试设置一个非常小的低阈值，看看事情是如何发生的。如果 0.66*[mean value] 不适用于这些图像，您可以丢弃它 - 无论如何它只是一个经验法则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T16:00:48.100

我们使用 Bradleys 算法解决非常相似的问题（从背景中分割字母，光线不均匀，背景颜色不均匀），描述如下：http: [//people.scs.carleton.ca :8008/~roth/iit-publications-iti/ docs/gerh-50002.pdf](http://people.scs.carleton.ca:8008/~roth/iit-publications-iti/docs/gerh-50002.pdf)，此处的 C# 代码：[http](http://code.google.com/p/aforge/source/browse/trunk/Sources/Imaging/Filters/Adaptive+Binarization/BradleyLocalThresholding.cs?r=1360) ://code.google.com/p/aforge/source/browse/trunk/Sources/Imaging/Filters/Adaptive+Binarization/BradleyLocalThresholding.cs?r=1360 。它适用于积分图像，可以使用`integral`OpenCV的函数计算。它非常可靠和快速，但它本身并没有在 OpenCV 中实现，但很容易移植。

另一种选择是openCV中的adaptiveThreshold方法，但我们没有尝试：[http](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#adaptivethreshold) ://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#adaptivethreshold 。MEAN 版本与 bradleys 相同，只是它使用常数来修改平均值而不是百分比，我认为这更好。

另外，好文章在这里：[https ://dsp.stackexchange.com/a/2504](https://dsp.stackexchange.com/a/2504)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T11:13:41.287

如果你知道你有很好的网格，你可以尝试在每个图块的基础上工作。处理 9 个子图像而不是整个图片很可能会导致每个子图像的亮度更加均匀。如果您的裁剪完美，您甚至可以尝试单独处理每个数字单元；但这一切都取决于你的作物有多可靠。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-02T23:07:42.010

如果与平面形状相比，椭圆形状的计算复杂。尝试改变：

```
Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_ELLIPSE, new Size(19,19)); 
```

到：

```
Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_RECT, new Size(19,19)); 
```

可以加快您足够的解决方案，而对准确性的影响很小。

# java - 骆驼 ftp 似乎永远挂起

> ID：15561864
> 
> 赞同：7
> 
> 时间：2013-03-22T02:46:08.727
> 
> 标签：java, ftp, apache-camel, apache-commons-net

我有一条骆驼路线，就像永远被绞死一样，不确定是骆驼还是 Ftp 客户端问题。ftp 组件的 soTimeout 设置为 60000。感谢任何帮助。

> 组件版本：
> camel-ftp：2.9.0
> Commons Net：（2.2）

线程转储：

```
"Camel (some-ftp-route) thread #57 - ftp://user@ftphost/folder" Id=338 in RUNNABLE (running in native)
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:129)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
  - locked java.io.InputStreamReader@6a3f933a
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.BufferedReader.fill(BufferedReader.java:136)
at java.io.BufferedReader.readLine(BufferedReader.java:299)
  - locked java.io.InputStreamReader@6a3f933a
at java.io.BufferedReader.readLine(BufferedReader.java:362)
at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:295)
at org.apache.commons.net.ftp.FTP._connectAction_(FTP.java:365)
at org.apache.commons.net.ftp.FTPClient._connectAction_(FTPClient.java:630)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:164)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:184)
at org.apache.camel.component.file.remote.FtpOperations.connect(FtpOperations.java:91)
at org.apache.camel.component.file.remote.RemoteFileConsumer.connectIfNecessary(RemoteFileConsumer.java:144)
at org.apache.camel.component.file.remote.RemoteFileConsumer.recoverableConnectIfNecessary(RemoteFileConsumer.java:123)
at org.apache.camel.component.file.remote.RemoteFileConsumer.prePollCheck(RemoteFileConsumer.java:56)
at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:100)
at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:139)
at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:91)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我只是对 soTimeout 不起作用感到惊讶。挂了将近1天...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-24T13:43:50.037

这已在 Camel 2.13.4、2.14.2 和 2.15.0 中修复

Camel 2.15.0 上的提交如下： [https://github.com/apache/camel/commit/3774c01e71cf8715e90673328655fd426242e7ba](https://github.com/apache/camel/commit/3774c01e71cf8715e90673328655fd426242e7ba)

# c# - Linq 条件“其中 id=List newList”如何实现

> ID：15561867
> 
> 赞同：1
> 
> 时间：2013-03-22T02:46:34.047
> 
> 标签：c#, linq

```
List<string>resultList=new List<string>();
List<string>allID=new List<string>();
allID.Add("a1");
allID.Add("a2");
allID.Add("a3");
allID.Add("a4");
allID.Add("a5");
allID.Add("a6");
List<string>selectedID=new List<string>();
selectedID.Add("1");
selectedID.Add("3");
selectedID.Add("5");
resultList=(from a in allID where a.Contains(**one of the ID form selectedID**) select a).ToList(); 
```

可以告诉我工作版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:50:53.127

如果要检查每个是否`a`与 by 中的条目完全匹配`selectedID`，请使用：

```
(from a in allID where selectedID.Contains(a) select a).ToList() 
```

这不会返回与您的示例代码匹配的任何内容。

* * *

如果要检查每个字符串是否`a`包含 中*任何*条目的内容`selectedID`，请使用：

```
(from a in allID
 where selectedID.Any(s => a.Contains(s))
 select a).ToList() 
```

这将返回`{ "a1", "a3", "a5" }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:50:57.730

我认为你想要做的是：

```
resultList = 
    (from a in allID 
     where selectedID.Any(s => ("a" + s) == a)
     select a)
    .ToList(); 
```

它将返回`allID`也存在的项目`selectedID`（带有一些格式调整）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T02:52:17.760

```
resultList = allID.Where(x => selectedID.Select(s => "a" + s).Contains(x))
                  .ToList<string>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T03:11:06.563

多一个。Linq 很酷:)

检查 allID 是否包含 selectedID 中任何条目的内容

```
resultList = allID.Where(all => selectedID.Any(select => all.Contains(select))).ToList(); 
```

resultList 将包含 { "a1", "a3", "a5" }

# c - 如何以编程方式获取 X509 证书中的电子邮件地址？

> ID：15561868
> 
> 赞同：2
> 
> 时间：2013-03-22T02:46:35.630
> 
> 标签：c, ssl, openssl, x509certificate, x509

我正在尝试从 C 中的 X509 证书对象中获取 CN 和 emailAddress 字段。目前我正在获取这样的 CN：

```
cert_entry = X509_NAME_get_entry(X509_get_subject_name(cert), 0);
ASN1_STRING *entryData = X509_NAME_ENTRY_get_data( cert_entry );
ASN1_STRING_to_UTF8(&CN, entryData);
printf("%s",CN); 
```

我的问题是如何获取 emailAddress 字段？我考虑过解析字符串，但我猜必须有一种更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T05:00:40.260

弄清楚了

```
X509_NAME * subject_name = X509_get_subject_name(cert); 
int nid_email = OBJ_txt2nid("emailAddress"); 
X509_NAME_get_text_by_NID(subject_name, nid_email, peer_email, 256); 
```

# arrays - 循环并返回一个数组

> ID：15561869
> 
> 赞同：0
> 
> 时间：2013-03-22T02:46:40.217
> 
> 标签：arrays, actionscript, return

我需要一些帮助。我对actionscript很陌生，我想做的是从数组中计算苹果的数量，然后在主函数中跟踪它。现在我在返回时遇到错误，该错误是*1067: Implicit coercion of a value of type of String to an unrelated type Number*。现在我试图切换数字和字符串，但我仍然得到错误。

```
public class extends Sprite
{

    public function()
    {
        var fruitNames:Array = ["apple", "peach","banana","pear","guava","apple","peach"];
        var totalApples:Number = countingApples(fruitNames);
        trace("You have " + totalApples);
    }

    private function countingApples(fruitNames:Array):Number
    {
        var total:String = "apple";

        for(var i:uint=0; i<7; i++)
        {
            total += Number[i];

        }
        return total;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:14:25.710

```
public class extends Sprite
{

    public function()
    {
        var fruitNames:Array = ["apple", "peach","banana","pear","guava","apple","peach"];
        var totalApples:Number = countingApples(fruitNames);
        trace("You have " + totalApples);
    }

    private function countingApples(fruitNames:Array):Number
    {
        var total:uint = 0;

        var i:String = new String();
        for(i in fruitNames) {
            if (fruitNames[i] == "apple") {
                total = total + 1;
            }
        }
        return total;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:15:26.370

该错误是因为您尝试返回`total`，这是 a `String`，但您已将`countingApples`函数的返回类型设置为`Number`。这是一个可以满足您要求的示例，但我认为您应该再次尝试编写自己的版本，以便了解发生了什么：

```
private function countingApples(fruitNames:Array):Number
{
    var total:uint = 0;
    var targetFruit:String = "apple";
    var totalFruit:uint = fruitNames.length;

    for(var i:uint = 0; i < totalFruit; i++)
    {
        if (fruitNames[i] == targetFruit) {
            total++;
        }
    }

    return total;
} 
```

# visual-studio - 什么是包围属性值的方括号？

> ID：15561870
> 
> 赞同：0
> 
> 时间：2013-03-22T02:46:47.320
> 
> 标签：visual-studio, xaml, tfs, build-process

在 TFS DefaultTemplate.11.1.xaml 构建过程模板中，有很多属性的值都用方括号括起来`[]`，所以一个标签的形式是

`<tagName attributeName="[attributeValue]">`

其中`tagName`、`attributeName`和`attributeValue`是文本字符串。

我找不到此值语法的任何文档。从模板来看，它似乎导致 XAML 处理器将文本评估为表达式。这在某处有解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:21:16.093

我相信 XAML 中的方括号确实表示值表达式。我仍然不确定究竟是如何支持或强制执行这种定义的。可能性包括：

-XAML 语法；我认为这是最有可能的答案。

-[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)实现某处，它在解析期间检测值何时以方括号开头和结尾，并在处理期间评估其中的内容；我认为这是第二个最有可能的答案。

- 有可能方括号实际上不是特殊字符并且作为标识符的一部分是有效的，值的评估是通过其他一些尚不清楚的机制执行的，并且方括号仅按照约定存在，也许是为了表明该值不是文字，而是要评估的表达式。我认为这是一个不太可能的答案。

支持研究：

> [“在 WF 设计器中创建的表达式使用方括号进行序列化，方括号是 VisualBasicValue 或 VisualBasicReference 的简写”](http://blogs.msdn.com/b/cathyk/archive/2010/01/26/expression-serialization-and-literal-support.aspx)
> 
> [“手动编辑工作流 XAML 文件以将 Number 属性的值更改为 [1+2]（方括号表示表达式）”](http://blogs.msdn.com/b/cathyk/archive/2009/12/15/expressiontextbox-for-arguments-only.aspx)
> 
> [“表达式是文本值或绑定到参数或属性的 Visual Basic 代码。它们包含值元素（例如变量、常量、文本、属性），这些元素与操作相结合以产生新值。表达式是使用 VB.NET 语法编写的，即使该应用程序位于使用 C# 的程序中。”](http://msdn.microsoft.com/en-us/library/dd797416.aspx)
> 
> [“设计人员生成的工作流保存在 XAML 中，其中表达式显示在方括号中。”](http://msdn.microsoft.com/en-us/library/dd489455.aspx)

上面的最后一个引用是我发现的唯一官方文档，它以任何方式将表达式周围的方括号提到为 XAML 属性值，但这仍然没有说明设计者是否只是任意地这样做并且没有调用任何特殊语法，或者如果表达式根据官方 XAML 规范，必须出现在方括号中，因此设计者必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:29:07.613

它是之前在您的 XAML 中设置的属性，例如：`<x:Property Name="BuildNumberFormat" Type="InArgument(x:String)" />`如果您在 VS 2012 中打开构建过程模板，您可以使用`Workflow`.

# javascript - WebGL 中批处理调用的最快方法

> ID：15561871
> 
> 赞同：9
> 
> 时间：2013-03-22T02:46:54.037
> 
> 标签：javascript, performance, html5-canvas, webgl, 2d-games

我正在尝试为我的 2d 游戏引擎重写基于画布的渲染。我已经取得了很好的进展，可以很好地将纹理渲染到 webgl 上下文中，完成缩放、旋转和混合。但是我的表现很糟糕。在我的测试笔记本电脑上，我可以在原版 2d 画布中获得 30 fps，同时屏幕上显示 1,000 个实体；在 WebGL 中，我得到 30 fps，屏幕上有 500 个实体。我预计情况会逆转！

我有一个偷偷摸摸的怀疑，罪魁祸首是`Float32Array`我扔的所有这些缓冲垃圾。这是我的渲染代码：

```
// boilerplate code and obj coordinates

// grab gl context
var canvas = sys.canvas;
var gl = sys.webgl;
var program = sys.glProgram;

// width and height
var scale = sys.scale;
var tileWidthScaled = Math.floor(tileWidth * scale);
var tileHeightScaled = Math.floor(tileHeight * scale);
var normalizedWidth = tileWidthScaled / this.width;
var normalizedHeight = tileHeightScaled / this.height;

var worldX = targetX * scale;
var worldY = targetY * scale;

this.bindGLBuffer(gl, this.vertexBuffer, sys.glWorldLocation);
this.bufferGLRectangle(gl, worldX, worldY, tileWidthScaled, tileHeightScaled);

gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, this.texture);

var frameX = (Math.floor(tile * tileWidth) % this.width) * scale;
var frameY = (Math.floor(tile * tileWidth / this.width) * tileHeight) * scale;

// fragment (texture) shader
this.bindGLBuffer(gl, this.textureBuffer, sys.glTextureLocation);
this.bufferGLRectangle(gl, frameX, frameY, normalizedWidth, normalizedHeight);

gl.drawArrays(gl.TRIANGLES, 0, 6);

bufferGLRectangle: function (gl, x, y, width, height) {
    var left = x;
    var right = left + width;
    var top = y;
    var bottom = top + height;
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
        left, top,
        right, top,
        left, bottom,
        left, bottom,
        right, top,
        right, bottom
    ]), gl.STATIC_DRAW);
},

bindGLBuffer: function (gl, buffer, location) {
    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
    gl.vertexAttribPointer(location, 2, gl.FLOAT, false, 0, 0);
}, 
```

这是我的简单测试着色器（缺少混合、缩放和旋转）：

```
// fragment (texture) shader
precision mediump float;
uniform sampler2D image;
varying vec2 texturePosition;

void main() {
    gl_FragColor = texture2D(image, texturePosition);
}

// vertex shader
attribute vec2 worldPosition;
attribute vec2 vertexPosition;

uniform vec2 canvasResolution;
varying vec2 texturePosition;

void main() {
    vec2 zeroToOne = worldPosition / canvasResolution;
    vec2 zeroToTwo = zeroToOne * 2.0;
    vec2 clipSpace = zeroToTwo - 1.0;

    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
    texturePosition = vertexPosition;
} 
```

关于如何获得更好性能的任何想法？有没有办法批量处理我的 drawArrays？有没有办法减少缓冲区垃圾？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T16:52:33.737

我可以在这里看到两个大问题，它们会对您的表现产生不利影响。

您正在创建很多临时的 Float32Arrays，目前构建起来很昂贵（将来应该会变得更好）。在这种情况下，创建单个数组并每次设置顶点会好得多，如下所示：

```
verts[0] = left; verts[1] = top;
verts[2] = right; verts[3] = top;
// etc... 
gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW); 
```

然而，到目前为止，更大的问题是您一次只能绘制一个四边形。3D API 根本就不是为了有效地做到这一点而设计的。您想要做的是尝试将尽可能多的三角形挤压到您所做的每个 drawArrays/drawElements 调用中。

有几种方法可以做到这一点，最直接的方法是用尽可能多的共享相同纹理的四边形填充缓冲区，然后一次性绘制它们。在伪代码中：

```
var MAX_QUADS_PER_BATCH = 100;
var VERTS_PER_QUAD = 6;
var FLOATS_PER_VERT = 2;
var verts = new Float32Array(MAX_QUADS_PER_BATCH * VERTS_PER_QUAD * FLOATS_PER_VERT);

var quadCount = 0;
function addQuad(left, top, bottom, right) {
    var offset = quadCount * VERTS_PER_QUAD * FLOATS_PER_VERT;

    verts[offset] = left; verts[offset+1] = top;
    verts[offset+2] = right; verts[offset+3] = top;
    // etc...

    quadCount++;

    if(quadCount == MAX_QUADS_PER_BATCH) {
        flushQuads();
    }
}

function flushQuads() {
    gl.bindBuffer(gl.ARRAY_BUFFER, vertsBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW); // Copy the buffer we've been building to the GPU.

    // Make sure vertexAttribPointers are set, etc...

    gl.drawArrays(gl.TRIANGLES, 0, quadCount + VERTS_PER_QUAD);
}

// In your render loop

for(sprite in spriteTypes) {
    gl.bindTexture(gl.TEXTURE_2D, sprite.texture);

    for(instance in sprite.instances) {
        addQuad(instance.left, instance.top, instance.right, instance.bottom);  
    }

    flushQuads();
} 
```

这是一个过于简单化的方法，还有更多批处理的方法，但希望这能让您了解如何开始对调用进行批处理以获得更好的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T15:37:48.037

如果您使用 WebGL Inspector，您将在跟踪中看到是否执行了任何不必要的 GL 指令（它们标有亮黄色背景）。这可能会让您了解如何优化渲染。

一般来说，对你的绘图调用进行排序，以便所有使用相同的程序，然后是属性，然后是纹理，然后是制服按顺序完成。这样，您将拥有尽可能少的 GL 指令（和 JS 指令）。

# asp.net-web-api - 三角洲 在 PATCH 动作中不跟踪原始类型

> ID：15561874
> 
> 赞同：4
> 
> 时间：2013-03-22T02:47:09.460
> 
> 标签：asp.net-web-api

我正在使用 Delta 修补实体，如此处概述的“部分更新（PATCH 请求）”部分所述[，](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx) 我有以下 ProductDTO：

```
 public class ProductDTO
{
    public int ID { get; set; }
    [Required]
    public string Name { get; set; }
    [UIHint("Date")]
    [DataType(DataType.Date)]
    public DateTime? ModifiedOn { get; set; }
    public int Price { get; set; }
} 
```

并定义了以下操作方法：

```
 public HttpResponseMessage Patch(int id, Delta<ProductDTO> delta)
    {
        return Request.CreateResponse(HttpStatusCode.NoContent);
    } 
```

如果我传入以下 JSON（通过 Fiddler 使用 PATCH 动词）

```
{"ID":1,"Name":"test","Price":"1000"} 
```

action 方法中的“delta”仅包含“Name”属性，不包含 ID 和 Price 属性。看起来 delta 通常不包含“int”、“decimal”类型和原始类型的值。

我在这里想念什么？

TIA

**编辑**：这是Delta 的修改版本的[链接](https://github.com/abpatel/aspnetwebstack/commit/9311c53ff475611da54aa112402bbd47797bc5a0)，其中包括对原始 JSON 数据类型的支持。评论赞赏

# java - Java中的引用是什么？

> ID：15561879
> 
> 赞同：-4
> 
> 时间：2013-03-22T02:47:30.770
> 
> 标签：java

由于java不支持指针（内存地址），那么引用是如何存在于内存中的，引用变量如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:15:34.740

> 由于java不支持指针

是的，它确实。为什么你认为有一个`NullPointerException`？指针可以为 null 或包含对对象的引用。

> （内存地址），

确切地。它不支持内存地址，也不支持将指针作为内存地址的 C/C++ 语义。对 Java 指针所能做的就是分配或取消引用它。

> 那么引用如何存在于内存中以及引用变量如何使用它？

请参阅[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.1)：“引用值（通常只是引用）是指向这些对象的指针，以及一个特殊的空引用，它不引用任何对象。”

# compilation - 需要构建完全静态的linphone

> ID：15561880
> 
> 赞同：0
> 
> 时间：2013-03-22T02:47:41.660
> 
> 标签：compilation, sip, voip, linphone

我需要能够将 linphone 3.5.2 二进制文件复制到其他 PC，而不必每次都安装它。我试图编译一个便携式 linphone，但是没有 configure args 帮助：

```
./configure --enable-static --disable-strict --disable-rpath --disable-shared \ 
--disable-x11 --enable-fast-install --enable-console_ui=yes --enable-gtk_ui=no  \
--enable-relativeprefix --enable-ipv6 --enable-nonstandard-gsm --enable-rsvp \ 
--enable-ssl --enable-video --enable-alsa --enable-portaudio --with-gnu-ld

ldd console/linphonec
linux-vdso.so.1 (0x00007fffe7dff000)
libeXosip2.so.6 => /usr/lib64/libeXosip2.so.6 (0x00007fcf2a8b4000)
libresolv.so.2 => /lib64/libresolv.so.2 (0x00007fcf2a69d000)
libcrypto.so.1.0.0 => /usr/lib64/libcrypto.so.1.0.0 (0x00007fcf2a2c7000)
libssl.so.1.0.0 => /usr/lib64/libssl.so.1.0.0 (0x00007fcf2a05d000)
libsoup-2.4.so.1 => /usr/lib64/libsoup-2.4.so.1 (0x00007fcf29df1000)
libgio-2.0.so.0 => /usr/lib64/libgio-2.0.so.0 (0x00007fcf29aa1000)
libgobject-2.0.so.0 => /usr/lib64/libgobject-2.0.so.0 (0x00007fcf29851000)
libglib-2.0.so.0 => /usr/lib64/libglib-2.0.so.0 (0x00007fcf2952d000)
libreadline.so.6 => /lib64/libreadline.so.6 (0x00007fcf292e5000)
libncurses.so.5 => /lib64/libncurses.so.5 (0x00007fcf29090000)
libortp.so.8 => /home/wk/linphone-3.5.2/oRTP/src/.libs/libortp.so.8 (0x00007fcf28e6c000)
libportaudio.so.2 => /usr/lib64/libportaudio.so.2 (0x00007fcf28c4b000)
libasound.so.2 => /usr/lib64/libasound.so.2 (0x00007fcf2896a000)
libspeexdsp.so.1 => /usr/lib64/libspeexdsp.so.1 (0x00007fcf28757000)
libv4l1.so.0 => /usr/lib64/libv4l1.so.0 (0x00007fcf28551000)
libv4l2.so.0 => /usr/lib64/libv4l2.so.0 (0x00007fcf28345000)
libavcodec.so.53 => /usr/lib64/libavcodec.so.53 (0x00007fcf27643000)
libavutil.so.51 => /usr/lib64/libavutil.so.51 (0x00007fcf27422000)
libswscale.so.2 => /usr/lib64/libswscale.so.2 (0x00007fcf271e1000)
libtheora.so.0 => /usr/lib64/libtheora.so.0 (0x00007fcf26fad000)
libogg.so.0 => /usr/lib64/libogg.so.0 (0x00007fcf26da6000)
libvpx.so.1 => /usr/lib64/libvpx.so.1 (0x00007fcf26b06000)
librt.so.1 => /lib64/librt.so.1 (0x00007fcf268fd000)
libXv.so.1 => /usr/lib64/libXv.so.1 (0x00007fcf266f7000)
libdl.so.2 => /lib64/libdl.so.2 (0x00007fcf264f3000)
libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fcf262d5000)
libm.so.6 => /lib64/libm.so.6 (0x00007fcf25fde000)
libspeex.so.1 => /usr/lib64/libspeex.so.1 (0x00007fcf25dc4000)
libosip2.so.7 => /usr/lib64/libosip2.so.7 (0x00007fcf25bad000)
libnsl.so.1 => /lib64/libnsl.so.1 (0x00007fcf25995000)
libosipparser2.so.7 => /usr/lib64/libosipparser2.so.7 (0x00007fcf25761000)
libc.so.6 => /lib64/libc.so.6 (0x00007fcf253b6000)
libX11.so.6 => /usr/lib64/libX11.so.6 (0x00007fcf25077000)
libXext.so.6 => /usr/lib64/libXext.so.6 (0x00007fcf24e65000)
libosipparser2.so.6 => not found
libosip2.so.6 => not found
libz.so.1 => /lib64/libz.so.1 (0x00007fcf24c4d000)
libxml2.so.2 => /usr/lib64/libxml2.so.2 (0x00007fcf248f6000)
libgmodule-2.0.so.0 => /usr/lib64/libgmodule-2.0.so.0 (0x00007fcf246f2000)
libffi.so.6 => /usr/lib64/libffi.so.6 (0x00007fcf244ea000)
libv4lconvert.so.0 => /usr/lib64/libv4lconvert.so.0 (0x00007fcf24274000)
libxvidcore.so.4 => /usr/lib64/libxvidcore.so.4 (0x00007fcf23f5a000)
libx264.so.120 => /usr/lib64/libx264.so.120 (0x00007fcf23c0d000)
libvorbisenc.so.2 => /usr/lib64/libvorbisenc.so.2 (0x00007fcf2373e000)
libvorbis.so.0 => /usr/lib64/libvorbis.so.0 (0x00007fcf23511000)
libvo-aacenc.so.0 => /usr/lib64/libvo-aacenc.so.0 (0x00007fcf232f3000)
libmp3lame.so.0 => /usr/lib64/libmp3lame.so.0 (0x00007fcf2307b000)
/lib64/ld-linux-x86-64.so.2 (0x00007fcf2ab20000)
libxcb.so.1 => /usr/lib64/libxcb.so.1 (0x00007fcf22e5a000)
libjpeg.so.8 => /usr/lib64/libjpeg.so.8 (0x00007fcf22c09000)
libXau.so.6 => /usr/lib64/libXau.so.6 (0x00007fcf22a05000)
libXdmcp.so.6 => /usr/lib64/libXdmcp.so.6 (0x00007fcf227ff000) 
```

有什么办法可以解决这个问题吗？

# c# - 位图对象构造函数阻塞

> ID：15561881
> 
> 赞同：0
> 
> 时间：2013-03-22T02:47:45.043
> 
> 标签：c#, sockets, bitmap

在我看来，当 A Bitmap Object 被创建时`Stream(socket)`，构造函数等待 EOF 类似 socket.close()、socket.shutdown)

这是源代码

**发送方**

```
Socket client_s = new Socket(AddressFamily.InterNetwork, SocketType.Stream,ProtocolType.Tcp);
IPEndPoint serverEP = new IPEndPoint(IPAddress.Loopback, 4567);
client_s.Connect(serverEP);
NetworkStream stream = new NetworkStream(client_s);
bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg); 
```

**接收方**

```
clientSocket = listenSocket.Accept();
NetworkStream s = new NetworkStream(clientSocket); 
Bitmap slice_bmp = new Bitmap(s);
Graphics g = this.CreateGraphics();
g.DrawImage(slice_bmp,0,0); 
```

接收方被阻塞，直到关闭套接字或半关闭套接字（发送方）

我想重复发送位图对象给某人如你所知，连接开销不可忽略，这个函数应该用一个套接字处理

有人建议在对象之间使用特殊字母进行分类（利用一个套接字发送多个对象）但是这种解决方案使源代码复杂我想让源代码尽可能简单。

最后我的问题总结如下

1.  如何使用一个不使用特殊字母的套接字重复发送位图对象？
2.  我也想让源代码尽可能简单（保持上面的源代码）
3.  最后，我如何将 EOF 发送到退出构造函数（接收方）

# timezone - 使用 pytz 将美国的邮政编码与其 UTC 偏移量和相关的 DST 偏移量相关联

> ID：15561883
> 
> 赞同：0
> 
> 时间：2013-03-22T02:47:55.920
> 
> 标签：timezone, zipcode, pytz

**任务：**给定美国位置的每个邮政编码，我需要获得准确的 utf_timeoffset 和准确的 dst（日间储蓄偏移），但我可以忽略属于 AP/FPO/DPO 的邮政编码。

在 2013 年 3 月 11 日、2:00 和 2013 年 11 月 3 日之间的夏令时，我需要考虑每个州内的时区差异，并且还需要注意夏威夷、亚利桑那州和 PR、VI 中的几个邮政编码的例外情况， 2:00。

**我想知道 Pytz（著名的 timezone s/w 包）中是否存在标准模块，因为我无法使用 zip_code 参数找到任何合适的函数。**此外，我对**pytz 以外的其他软件包以及 Python 以外的任何其他编程语言都非常满意。**

同时，通过一些手工代码，我设法获得了每个 zip_code 的“time_zone name”和“utf_time offset”。根据一些网站的规定，我还设法获得了包含 zip_code 及其夏令时标志的数据集副本。又名美国每个邮政编码的当前 dst 政策）

到目前为止它工作正常，但我并不真正相信我自己的代码，没有办法验证它的正确性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:44:06.820

您可以选择使用原始邮政编码数据吗？因为如果你这样做了，使用邮政编码数据库可能会很有帮助，比如你会在[这里](http://www.zip-codes.com/zip-code-database.asp)找到的那​​种。它们具有与特定时区相关联的邮政编码以及每个时区的夏令时信息。看起来目前 12 个月更新的年度价格为 139 美元。

我不在那儿工作，但自从我在 SmartyStreets 工作以来，我对邮政编码和地址了解很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:42:55.573

不，pytz 没有这样的功能。另请参阅：[将美国邮政编码映射到时区](https://stackoverflow.com/questions/2456324/mapping-us-zip-code-to-time-zone)

# java - 选择中位数作为支点

> ID：15561884
> 
> 赞同：0
> 
> 时间：2013-03-22T02:48:09.157
> 
> 标签：java, sorting, median

我正在尝试选择中位数作为此应用程序中的支点，但似乎我做错了什么。任何帮助将不胜感激。

我按顺序得到前几个数字，然后到最后。

```
 public class QuickSort {

    public static void main(String[] args) {
    int [] list = {1,3,2,4,6,5,8,7,9,0};
    quickSort (list);

    for (int i=0; i < list.length; i++)
        System.out.print(list[i] + " ");
}
public static void quickSort(int [] list)
{
    quickSort(list, 0, list.length - 1);
}

public static void quickSort (int[] list, int first, int last)
{
    int size = last - first + 1;
    if (size > 3){
        int median1 = median(list, first, last);
        int partition1 = partition(list, first, last, median1);
        quickSort(list, first, partition1 - 1);
        quickSort(list, partition1 + 1, last);
    }
}
    public static int median(int [] list, int first1, int last1){
        int middle = (first1 + last1)/2;
        if (list[first1] > list[middle])
            swap(list, first1, middle);
        if (list[first1] > list[last1])
            swap(list, first1, last1);
        if (list[middle] > list[last1])
            swap(list, middle, last1);
        swap(list, middle, last1 - 1);
        return list[last1 - 1 ];
    }
    public static int partition(int [] list, int left, int right, long pivot) {
        int leftPtr = left;
        int rightPtr = right - 1; 

        while (true) {
          while (list[++leftPtr] < pivot);

          while (list[--rightPtr] > pivot);
          if (leftPtr >= rightPtr) 
            break;
          else
            swap(list, leftPtr, rightPtr); 
        }
        swap(list, leftPtr, right - 1);
        return leftPtr; 
    }
       public static void swap(int []list, int dex1, int dex2) {
         int temp = list[dex1];
         list[dex1] = list[dex2];
          list[dex2] = temp;
            } 
```

我按顺序得到了一些数字，但不是全部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:11:04.130

通常有两种方法可以用于计算机编程。你可以 a) 拿一些有用的东西，然后开始删除/改变东西，直到你得到你喜欢的东西。或者 b) 尽可能采用最小的情况——让它工作——然后继续增加更多的复杂性。在这种情况下，我建议 b）（仅供参考 b）通常是最好的方法）

如果您从 int[] list = { 3, 1, } 开始，您可以看到您的列表没有正确排序。这是因为您的 quickSort 函数仅对大小大于 3 的列表进行排序。在您的情况下，此条件可能应该是“size > 1”——尽管您可能需要做更多的事情才能使事情正常进行。

维基百科上有很多关于 QuickSort 的信息： [http ://en.wikipedia.org/wiki/Quicksort](http://en.wikipedia.org/wiki/Quicksort)

# css - 如果@font-face 不起作用，则以粗体显示文本

> ID：15561885
> 
> 赞同：0
> 
> 时间：2013-03-22T02:48:19.457
> 
> 标签：css, font-face

我正在使用 css @font-face 函数来定义自定义字体。该字体称为“Myriad Pro Bold”，作为备用我使用 Arial/Sans-Serif。

```
@font-face { font-family: MyriadProBold; src: url('fonts/myriadpro_bold.otf'); }
h3 { font-family: MyriadProBold, Arial, Sans-Serif; } 
```

字体粗细：*粗体；*仅当显示 Arial 或其他 Sans-Serif 字体时才需要元素。如果我添加*字体粗细：粗体；*对于标签和 MyriadProBold 加载，粗体字体变得更加粗体，看起来很难看。

所以实际上我正在寻找这样的东西

```
if h3 font is MyriadProBold
  font-weight: normal;
else
  font-weight: bold; 
```

感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:08:15.430

Myriad Pro Bold 是 Myriad Pro 系列的粗体字体，应该这样声明：

```
@font-face {
    font-family: "Myriad Pro";
    src: url('fonts/myriadpro_bold.otf');
    font-weight: bold;
} 
```

然后你可以简单地让`h3`他们默认的粗体，或者如果有一些“CSS重置”或其他干扰它的代码，则明确声明：

```
h3 { font-weight: bold; } 
```

现在您只需以自然的方式声明字体系列：

```
h3 { font-family: "Myriad Pro", Arial, sans-serif; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:59:12.417

您的后备字体与您的自定义字体的重量不匹配。但是，arial 有大胆的变化。你可以试试
h3 { font-family:custom, 'Arial Bold', sans-serif; }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T03:07:50.380

您是否尝试在@font-face 中设置字体粗细？

```
@font-face {
    font-family: "MyriadProBold";
    src: url('fonts/myriadpro_bold.otf');
    font-weight: normal;
}
h3 {
    font-family: MyriadProBold, Arial, Sans-Serif;
    font-weight: bold;
} 
```

不确定它是否有效，但请尝试一下。

# python - 二值图像矩阵数组的三维显示函数（Python、OpenCV、C++）

> ID：15561887
> 
> 赞同：2
> 
> 时间：2013-03-22T02:48:30.897
> 
> 标签：python, opencv, numpy, scipy

我有一个医疗级 CT 扫描数据库。每个扫描系列由大约 30 个有序的幻灯片组成，每个都与下一个平行（图像之间的尺寸一致）。我想生成这些图像的三维（最好是可旋转的）渲染。

我预计我将能够通过将一系列二进制形式的阈值图像加入 numpy/scipy 数组 ([image1,image2,...imageN]) 并将对象输入某种显示功能来实现我的目标。有谁知道符合此描述的功能？

如果我的问题表述不清，我深表歉意——如果需要，请要求进一步澄清。

我是第一次发帖，绝不是图像处理、计算机视觉等方面的专家。

# html - Internet Explorer 中的滚动条 CSS

> ID：15561890
> 
> 赞同：1
> 
> 时间：2013-03-22T02:48:56.587
> 
> 标签：html, css, browser-scrollbars

我想在 Internet Explorer 中为滚动条应用 css：

我在css下面使用了一个特定的滚动条

```
.ui-menu {
    scrollbar-track-color: #C0C0C0;
    scrollbar-base-color: #797979;
} 
```

即使在那我想删除滚动条箭头..我不能..

我使用下面的 css 为 google chrome 和 safari 做了这个

```
::-webkit-scrollbar {
    height: 12px;
    width: 18px;
    background: #C0C0C0;
    }
::-webkit-scrollbar-thumb {
    background: #797979;    
} 
```

它工作得很好........

所以我的要求是我想删除箭头并在 IE 中只显示滚动条的轨道和拇指......整个网站的全球化............

至少如果不可能的话，我希望它必须适用于 IE 页面上的特定滚动条............

PLZ周围的任何工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:53:21.853

不幸的是，IE 不支持此功能（将 css 应用于滚动条）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T18:33:01.130

您可以在 IE 中更改滚动条的颜色，但据我所知，没有隐藏箭头的样式：

[https://msdn.microsoft.com/en-us/library/hh772048(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/hh772048(v=vs.85).aspx)

# c# - SOCKS 和 bittorrent 的 Starksoft.Net.Proxy 问题

> ID：15561892
> 
> 赞同：0
> 
> 时间：2013-03-22T02:49:13.367
> 
> 标签：c#, proxy, bittorrent, socks

我正在使用 C# 使用 MonoTorrent 制作一个 bittorrent 应用程序。该应用程序有些成熟，但我正在添加 SOCKSv5 代理支持。我找到[了 Starksoft.Net.Proxy](https://bitbucket.org/Vhab/starksoft.net.proxy)来处理代理部分。但是，我遇到了一些麻烦。

我有一个用于测试的[BTGuard](http://btguard.com/)帐户。当我连接（提供用户名和密码等）时，我收到此错误：

```
Starksoft.Net.Proxy.ProxyException: Connection to proxy host 63.142.161.35 on port 1025 failed. ---> Starksoft.Net.Proxy.ProxyException: The the connection is not allowed by proxy destination rule set concerning destination host 195.122.253.23 port number 11523\.  The destination reported the host as 0.0.0.0 port -16676.
   at Starksoft.Net.Proxy.Socks5ProxyClient.HandleProxyCommandError(Byte[] response, String destinationHost, Int32 destinationPort)
   at Starksoft.Net.Proxy.Socks5ProxyClient.SendCommand(Byte command, String destinationHost, Int32 destinationPort)
   at Starksoft.Net.Proxy.Socks5ProxyClient.CreateConnection(String destinationHost, Int32 destinationPort)
   --- End of inner exception stack trace ---
   at Starksoft.Net.Proxy.Socks5ProxyClient.CreateConnection(String destinationHost, Int32 destinationPort)
   at Starksoft.Net.Proxy.Socks5ProxyClient.CreateConnectionAsync_DoWork(Object sender, DoWorkEventArgs e) 
```

这很奇怪。我不知道是什么原因造成的。我通读了 Starksoft 代码，它似乎与[SOCKS RFC](http://www.ietf.org/rfc/rfc1928.txt)相当一致。

[这是](https://github.com/SirCmpwn/Patchy/blob/master/Patchy/ProxiedConnection.cs)我用来通过 Starksoft.Net.Proxy 连接到代理的代码。上面的堆栈跟踪来自第 133 行的 e.Error。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:26:54.337

我发现了这个问题。[这是](https://bitbucket.org/Vhab/starksoft.net.proxy/src/ca621180c638e30790cf3566805a4d4501850bca/Socks5ProxyClient.cs?at=default#cl-397)Starksoft.Net.Proxy 准备然后**丢弃**用户名/密码交换数据的部分。

[我通过更新到Biko](http://biko.codeplex.com/)来修复它，但它需要一些调整才能正常工作。对于以后发现此问题的任何人来说应该很容易处理。

或者，只需获取损坏版本的来源并粘贴一些代码以发送数据并接收确认。

# xcode - 在 Xcode 中禁用预填充的文件信息注释

> ID：15561907
> 
> 赞同：-1
> 
> 时间：2013-03-22T02:50:48.917
> 
> 标签：xcode

作为初学者，这对我没有用：

```
//
//  CarArrayController.m
//  CarLot
//
//  Created by X on 22/03/13.
//  Copyright (c) 2013 __MyCompanyName__. All rights reserved.
// 
```

它占用了不必要的屏幕空间。创建类后我做的第一件事是手动删除这些行。有没有办法让我摆脱这个麻烦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:59:09.990

创建类时，文件来自文件模板。您可以修改它们。谷歌诸如“Xcode 文件模板”之类的东西。这是一个例子：

[http://www.bobmccune.com/2012/03/04/creating-custom-xcode-4-file-templates/](http://www.bobmccune.com/2012/03/04/creating-custom-xcode-4-file-templates/)

# ios - 如何检测用户运动状态，如跑步、行走、运输和休息等

> ID：15561909
> 
> 赞同：1
> 
> 时间：2013-03-22T02:50:53.393
> 
> 标签：ios, core-location, move, status

我想检测用户的运动状态，例如跑步步行运输和休息等。

我使用 corelocation 来计算用户移动的速度，但不是那么准确。当用户静止不动时，速度不等于 0。

是否有样本或有人可以告诉我如何实现这个？

# javascript - jQuery 无法使用 jQuery.appendTo() 识别附加的克隆元素

> ID：15561912
> 
> 赞同：3
> 
> 时间：2013-03-22T02:51:11.560
> 
> 标签：javascript, jquery, html, dom

我想制作一个组输入列表，允许用户动态地让用户添加/删除组行：

```
<div id="div-form-denominations" class="form-denominations">
    <div id="row-0" class="form-denomination">
        <div class="form-field">
        <div class="form-field">
        <div class="form-field">
        <input id="_denominations[0].id.reference" class="removableHiddenOrder" type="hidden" name="denominations[0].id.reference" value="87-070329-034COP-4444">
        <input id="_denominations[0].denomination" class="removableHiddenDenom" type="hidden" name="denominations[0].denomination" value="10000">
        <a id="deleteBtn-[0]" class="action-link delete-denomination" href="#">
        <div class="spacer"></div>
    </div>
    <div id="row-1" class="form-denomination">
        <div class="form-field">
        <div class="form-field">
        <div class="form-field">
        <input id="_denominations[1].id.reference" class="removableHiddenOrder" type="hidden" name="denominations[1].id.reference" value="87-070329-034COP-4444">
        <input id="_denominations[1].denomination" class="removableHiddenDenom" type="hidden" name="denominations[1].denomination" value="">
        <a id="deleteBtn-[1]" class="action-link delete-denomination" href="#">
        <div class="spacer"></div>
    </div>
    <div id="row-2" class="form-denomination">
        <div class="form-field">
        <div class="form-field">
        <div class="form-field">
        <input id="_denominations[2].id.reference" class="removableHiddenOrder" type="hidden" name="denominations[2].id.reference" value="">
        <input id="_denominations[2].denomination" class="removableHiddenDenom" type="hidden" name="denominations[2].denomination" value="">
        <a id="deleteBtn-[2]" class="action-link delete-denomination" href="#">
    <div class="spacer"></div>
    </div>
    <div id="row-3" class="form-denomination">
        .......
    </div> 
```

因此，每一行都包含一组表单字段，其中包括一个输入或选择组件（未在上面的代码中显示）和一些隐藏字段和一个删除链接，用于从视图中删除当前行。

我还创建了一个链接以动态将新行添加到该部分

```
var rowTemplate = null;
j(document).ready(function() {
    // Save the row template
    rowTemplate = j('.form-denomination:first-child').clone();

    j("#add_link").click(function() {
            add_denomination();
    });
}); 
```

`add_denomination`这是克隆第一行并将任何克隆的 id 替换为新索引的函数的内容，并将克隆的行附加到列表的最后一行之后。

```
function add_denomination() {
    var index = j('.form-denomination').length; 
    // set the new row id
    var newRowId = 'row-' + index;
    var newRow = rowTemplate.clone().attr('id', newRowId);

    // Replace the id/name attribute of each input control
    newRow.find('div, input, select, a').each(function() {
        replaceAttribute(j(this), 'id', index);
        replaceAttribute(j(this), 'name', index);
        j(this).val('');
    });

    // add new element to the DOM
    newRow.appendTo('.form-denominations');
    alert("new list size = " + j(".delete-denomination").length);
    console.log("DONE!");
} 
```

每次单击`add-link`弹出警报都会显示新的列表大小（j(".delete-denomination").length 增加 1），据我了解，新行已成功添加。

问题是以下方法

```
// delete denomination row
j('.delete-denomination').click(function () {
    j(this).parent().remove();
} 
```

**仅适用于非克隆行！**使用萤火虫我可以清楚地看到附加的行成功地附加了与原始行相同的结构和相同的元素，但唯一的区别是 id。

但是，每次单击时`deleteBtn-[i]`，其中 i 是`cloned/appended`行的索引，代码甚至没有进入`j('.delete-denomination').click()`函数，据我了解，Dom 或 jquery 无法识别新行，因此无法通过 jQuery 识别链接. 这与之前告诉列表大小已经增长的警报消息有点矛盾。

但是当我点击`deleteBtn-[i]`我所在的`non-cloned`行时，一切正常......

所以问题是：如何追加/添加新的dom并让它们被jQuery或Dom识别？上述处理有什么问题？有没有办法刷新列表，以便 Dom/jQuery 从各个角度理解附加的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:55:41.690

jQuery 1.7+

```
j(".form-denomination").on("click", ".delete-denomination", function(){
    j(this).parent().remove(); 
}); 
```

jQuery 1.3+

```
j(".delete-denomination").live("click", function(){ 
    j(this).parent().remove(); 
 }); 
```

jQuery 1.4.3+

```
j(".form-denomination").delegate(".delete-denomination", "click", function(){ 
   j(this).parent().remove(); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T03:17:39.687

问题是顺序问题以及何时评估表达式。当您使用选择器调用 jQuery 时，选择器会在那时被评估以选择当时存在的匹配*元素*。然后单击处理程序仅注册到这些元素。稍后创建的元素自然不会受到影响。

在另一个示例中演示的一种解决方案使用 jQuery 的“实时事件”在每个事件被触发时应用选择器以确定它将匹配哪些元素（如果有）。这种方法有性能影响。

另一种解决方案是在创建新元素时在新创建的元素上注册所需的事件处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-05T16:39:32.153

将“true”添加到 clone 方法，以便复制数据以及附加到原始元素的***事件。***

```
rowTemplate = j('.form-denomination:first-child').clone(true); 
```

默认情况下禁用此功能。这是克隆文档： [https ://api.jquery.com/clone/](https://api.jquery.com/clone/)

Ps您不需要document.ready中的点击功能，它不会在点击后绑定。

# matlab - 为什么在 Matlab 中由 rgb2ycbcr 转换的 Y 在 [16, 235] 范围内？

> ID：15561915
> 
> 赞同：3
> 
> 时间：2013-03-22T02:51:26.087
> 
> 标签：matlab

**Matlab中rgb2ycbcr**的帮助文档说

> 如果输入为 uint8，则 YCBCR 为 uint8，其中 Y 在 [16 235] 范围内，Cb 和 Cr 在 [16 240] 范围内。

据我所知，从 RGB 到 YCbCr 的转换公式是

```
Y   =     0.299  R + 0.587  G + 0.114  B
Cb  =   - 0.1687 R - 0.3313 G + 0.5    B + 128
Cr  =     0.5    R - 0.4187 G - 0.0813 B + 128 
```

令 R=0，G=0 和 B=0，我们得到 Y=0，它不在 [16,235] 范围内。令 R=255, G=255 和 B=0，我们得到 Cb=0.5，这也不在 [16, 240] 范围内。

为什么**rgb2ycbcr**使 Y 在 [16,235] 范围内，而使 Cb/Cr 在 [16,240] 范围内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T02:14:31.940

[正如@jucestain 所说，维基百科](http://en.wikipedia.org/wiki/YUV)有一个答案：

> Y' 值通常会移动并缩放到范围 [16, 235]（称为工作室摇摆），而不是使用 [0, 255] 的整个范围（称为全摇摆）。
> 这种令人困惑的做法源自 MPEG 标准，并解释了为什么将 16 添加到 Y' 以及为什么基本变换中的 Y' 系数总和为 220 而不是 255。 U 和 V 值（可能为正或负）与 128 相加让他们总是积极的。

# jbpm - 如果我有 10 个分支，我必须给 10 个分支分配用户？(jbpm5)

> ID：15561931
> 
> 赞同：0
> 
> 时间：2013-03-22T02:53:23.550
> 
> 标签：jbpm

如果我有 10 个分支，我必须给 10 个分支分配用户吗？

其实我只会用到一个分支，如何在运行时给节点分配用户。

**更新：**

（10个分支映射10个不同的用户）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:30:00.570

如果您有 10 个可能的分支，但每个任务都分配给同一个用户，您仍然必须在每个任务上设置该用户的 actorId（因为我们不知道您是否希望它们全部用于同一个用户）。

如果您事先不知道actorId，而只在运行时知道，您可以使用#{processVar} 之类的东西从流程变量中动态获取值。

泳道在这里也很有用，因为它会将泳道中的任务分配给完成该泳道中最后一个任务的演员（因此这可能有助于您避免为每个任务指定演员，只为第一个任务指定演员）。

# javascript - 骨干集合只触发解析或重置，我想我需要两者

> ID：15561935
> 
> 赞同：2
> 
> 时间：2013-03-22T02:53:29.000
> 
> 标签：javascript, backbone.js

这是我的问题

我有一个非常简单的骨干集合为我获取一些数据。一切正常，如下所示：

```
DealershipContacts.Collection = Backbone.Collection.extend({
    url:jarvisUrl ("dealership_contacts"),
    parse:function(response) {
        console.log('parse called');
        return response.data;

    },
    initialize : function(){
        _.bindAll(this, 'reset', 'parse');
    }
}); 
```

当调用 fetch 时，按预期将日志解析到控制台。

但在那之后，我想监听重置事件，这样我就可以使用该集合来填充引导输入的源数据。所以我这样做了：

```
DealershipContacts.Collection = Backbone.Collection.extend({
    url:jarvisUrl ("dealership_contacts"),
    parse:function(response) {
        console.log('parse called');
        console.log(response);
        return response.data;

    },
    reset:function(){
        console.log("change fired");
        $('.dealership_typeahead').typeahead({source:this.pluck('user_name')});
        return true;
    },
    initialize : function(){
        _.bindAll(this, 'reset', 'parse');
    }
}); 
```

现在解析事件永远不会被触发并且集合没有填充我不知道为什么。

任何见解都非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T04:21:04.177

您没有`reset`使用该代码连接到事件。您正在覆盖默认的[Backbone.Collection`reset`方法](http://backbonejs.org/#Collection-reset)（您不想这样做）。

```
DealershipContacts.Collection = Backbone.Collection.extend({
    url:jarvisUrl ("dealership_contacts"),

    initialize: function(models, options){
        this.on('reset', this.doStuff, this);
    },
    parse:function(response) {
        // you DO want to override the default parse method
        return response.data;
    },
    // don't call this method `reset` :)
    doStuff:function(){
        // do something now that collection is fetched
    }
}); 
```

我认为您`_.bindAll`对监听 Backbone 事件感到困惑。[bindAll](http://underscorejs.org/#bindAll)做了一些不同的事情，你不需要它。

# ruby - 如何为 Heroku 工作人员（例如 sidekiq）指定 Ruby 版本？

> ID：15561945
> 
> 赞同：1
> 
> 时间：2013-03-22T02:55:09.930
> 
> 标签：ruby, logging, heroku, version, procfile

我`sidekiq`作为 Heroku 工作人员运行，如下所示`Procfile`：

```
 worker: bundle exec sidekiq -c 5 -v 
```

我希望它在 Ruby 1.9.3 而不是 1.9.1 上运行，如运行时所示`heroku logs -t`。我已经指定`ruby "1.9.3"`，`Gemfile`它甚至在我运行时显示`git push heroku master`：

```
-----> Using Ruby version: ruby-1.9.3 
```

`web`根据 .和`worker`dynos 似乎都在运行1.9.1 `heroku logs`。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:59:18.420

没什么可担心的。对于 ruby​​ 1.9.3，Bundler 将 gem 存储在 1.9.1 中。有关更多信息，请参见此处：[我们为什么要将 Ruby 1.9.2/1.9.3 gem 安装到 1.9.1 文件夹中？](https://stackoverflow.com/questions/8564210/why-are-we-installing-ruby-1-9-2-1-9-3-gems-into-a-1-9-1-folder)

# report - Pentaho Report Designer 如何跨字段中的值？

> ID：15561948
> 
> 赞同：0
> 
> 时间：2013-03-22T02:55:37.877
> 
> 标签：report, pentaho, report-designer

我是初学者.. 我想知道如何通过 Pentaho Report Designer 跨越字段中的值？它支持这个吗？像这样：在数据库中

```
name   id               
 a      1              a   b   c
 b      2     to       1   2   3 
 c      3 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:51:54.023

您可以通过[行规范化器](http://wiki.pentaho.com/display/eai/row+normalizer)和[行反规范化](http://wiki.pentaho.com/display/EAI/Row+De-normalizer)器步骤使用[Kettle](http://kettle.pentaho.com/)实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:59:26.300

是的，您可以在尖端的 Pentaho 报告中执行此操作，请参见此处：

[http://www.on-reporting.com/blog/a-quick-introduction-to-crosstabs-in/](http://www.on-reporting.com/blog/a-quick-introduction-to-crosstabs-in/)

另一种选择是，如果您的数据可以在 Mondrian 模式中建模，则使用 OLAP 输入数据源，您可以根据自己的需要对数据进行透视！

最后一种选择 - 按照建议使用 Kettle 选项。

# uiwebview - 如何在ios上制作离线浏览器？

> ID：15561953
> 
> 赞同：1
> 
> 时间：2013-03-22T02:56:07.583
> 
> 标签：uiwebview, asihttprequest, afnetworking, offline, offline-browsing

我需要在 ios 上制作一个离线浏览器，它应该使用图像、css、js 等媒体资源将指定的网页持久化到磁盘。同时，离线浏览器应该能够自动下载网站的多层次，例如，使其下载网页以及该网页中链接的所有页面。

我已经尝试了 ASIWebpageRequest，但它并不令人满意，并且无法下载多关卡。

有没有其他方法可以完美地实现这一点？AFNetworing 或 MKNetworkKit 可以做到这一点吗？

非常非常感谢你！

# php - Amazon Product Advertising API Top Seller 响应组不返回其他商品属性

> ID：15561958
> 
> 赞同：0
> 
> 时间：2013-03-22T02:56:59.337
> 
> 标签：php, amazon-web-services, amazon, amazon-product-api

我一直在使用这段代码：

```
defined('AWS_API_KEY') or define('AWS_API_KEY', 'AGGAVZCVASDG123A');
defined('AWS_API_SECRET_KEY') or define('AWS_API_SECRET_KEY', '132131235151asdfaGFfasdf');
defined('AWS_ASSOCIATE_TAG') or define('AWS_ASSOCIATE_TAG', 'test05-12');
$amazonEcs = new AmazonECS(AWS_API_KEY, AWS_API_SECRET_KEY, 'com', AWS_ASSOCIATE_TAG);
$amazonEcs->associateTag(AWS_ASSOCIATE_TAG);
$amazonEcs->returnType(AmazonECS::RETURN_TYPE_ARRAY);

$response = $amazonEcs->responseGroup('TopSellers')->browseNodeLookup($node); 
```

不幸的是，此代码不返回产品的价格、图像和其他属性。它只返回这个结果：

```
<TopItemSet>
   <Type>TopSellers</Type>
   <TopItem>
            <ASIN>0553576399</ASIN>
            <Title>Distraction</Title>
            <ProductGroup>Book</ProductGroup>
            <Author>Bruce Sterling</Author>
       </TopItem>
       <TopItem>
        ....
       .....
</TopItemSet> 
```

**有没有办法在调用`TopSellers`响应组时显示这些？**

在此之前我有一个解决方案，每次我打电话`TopSellers`时，我都会得到 TopSellers 生产的商品的 ASIN（他们生产了 10 件畅销商品），然后我使用以下代码：

```
$response = $amazonEcs->responseGroup('Images,ItemAttributes')->page(1)->category('All')->search($asin); 
```

这将搜索基于 TopSeller 响应组生成的 ASIN 的产品。此代码的唯一问题是它会导致`throttled error`. Throttled Error 意味着我对 amazon api 的请求限制已超出，因为显然该代码调用起来有点累人，因为它一直在从 API 请求数据。

我一直在这里阅读产品广告 API 的文档[http://docs.aws.amazon.com/AWSECommerceService/latest/DG/RG_TopSellers.html](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/RG_TopSellers.html)

您的想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:02:12.817

我已经对自己的问题有了答案：

可以在这里找到：[https ://forums.aws.amazon.com/thread.jspa?messageID=435522ꕂ](https://forums.aws.amazon.com/thread.jspa?messageID=435522&#435522)

谢谢！:)

# android - 当 chrome 是默认浏览器时，使用 ACTION_VIEW 在指定的 URL 打开浏览器不起作用

> ID：15561960
> 
> 赞同：5
> 
> 时间：2013-03-22T02:57:14.400
> 
> 标签：android, android-intent

我在我的 Android 设备上安装了 2 个浏览器 1) 默认浏览器和 2) Chrome

当我运行以下代码时，我得到一个“使用完成操作”选择器...

```
String url = "http://www.google.com/search?q=" + query; 
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

默认的 Android 浏览器可以正常工作，因为浏览器会在指定的 URL 处打开。但是，当我使用 Chrome 浏览器打开时，Chrome 只会打开......它似乎忽略了指定的 URL。

这是 Chrome 的问题，还是我的代码的问题？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:24:13.503

问题是我的查询变量。Chrome 似乎不接受默认 Android 浏览器接受的查询字符串格式。

为了让代码正常工作，我必须对查询进行 URL 编码......

```
query = URLEncoder.encode(query, "UTF-8"); 
```

# android - 4.65" 和 4.7" 模拟器的 Android 资源缩放不正确

> ID：15561962
> 
> 赞同：1
> 
> 时间：2013-03-22T02:57:40.670
> 
> 标签：android, xml, resources, emulation, scaling

我正在处理的 Android 项目中有默认、default-land、sw480dp、sw480dp-land、sw600dp 和 sw600dp-land 的布局 xml 文件。除 Eclipse 中的 4.65" 和 4.7" 模拟器外，所有模拟器都能正确缩放我的资源，并且不能正确缩放广告空间或我的按钮。这些模拟器似乎在拉我的默认布局资源，但缩放比例太低了，我不知道为什么会这样。我尝试为 sw720dp 添加一个新文件夹，但这会启动 10 英寸平板电脑模拟器，并且不允许使用 4.65 或 4.7 英寸设备。谁能给我一些线索，说明这里可能出了什么问题？我完成了我所有的功能，并在提交应用程序之前测试了所有设备，现在我遇到了障碍。谢谢！

附言

不知道你需要什么样的信息来帮助我解决这个问题，代码方面，所以让我知道什么可以帮助你，我会插入它！

# function - PostgreSQL 触发器更新二级相关表

> ID：15561965
> 
> 赞同：1
> 
> 时间：2013-03-22T02:57:50.970
> 
> 标签：function, postgresql, triggers, plpgsql, postgresql-8.4

我有两个表：`table1`and `table2`，它在同一函数中的插入和更新上触发。当您在 中插入一个值`table1`或`table2`在 中插入一个值时`table3`，将值`table1.lastname || table1.firstname`分配给`column3`。`id`为 insert in 获得的必须`table3`插入到`table1.id_table3`.

```
CREATE OR REPLACE FUNCTION myschema.myfunction() RETURNS trigger AS
$BODY$
DECLARE
    new_id_table_4  integer;
BEGIN
    IF TG_OP = 'INSERT' THEN
        IF TG_TABLE_NAME = 'table1' THEN
            new_id_table_4 := 1;
        ELSIF TG_TABLE_NAME = 'table2' THEN
            new_id_table_4 := 2;
        END IF;
        INSERT INTO myschema.table3
            (id, id_table4, name)
            VALUES (DEFAULT, new_id_table_4, NEW.columnA||', '||NEW.columnB, TRUE, TRUE)
            RETURNING id
            INTO NEW.id_table3;
    ELSIF TG_OP = 'UPDATE' THEN
        IF OLD.columnA <> NEW.columnA OR OLD.columnB <> NEW.columnB THEN
            UPDATE myschema.table3 SET
                name = NEW.columnA||', '||NEW.columnB
                WHERE id = NEW.id_cuenta;
        END IF;
    END IF;
    RETURN NEW;
END
$BODY$
LANGUAGE plpgsql VOLATILE COST 100;
ALTER FUNCTION myschema.myfunction() OWNER TO myuser;

CREATE TRIGGER add_table3record_table1
  AFTER INSERT OR UPDATE
  ON myschema.table1
  FOR EACH ROW
  EXECUTE PROCEDURE myschema.myfunction();

CREATE TRIGGER add_table3record_table2
  AFTER INSERT OR UPDATE
  ON myschema.table2
  FOR EACH ROW
  EXECUTE PROCEDURE myschema.myfunction(); 
```

`table1`问题是当我在or中插入一条新记录时`table2`，

```
...RETURNING id INTO NEW.id_table3; 
```

它似乎没有任何效果。这是我的第一个函数/触发器，我找不到错误。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T03:04:21.063

我很确定你不能通过设置来更新已经插入的行`NEW.foo = bar`。

任何一个：

*   `table1`对设置新值执行更新`id_table3`（这将递归地调用你 ON UPDATE 触发器，所以要小心），或者
*   使用 BEFORE 触发器而不是 AFTER。

`table1`根据在和之间设置外键的方式`table3`，后者可能是也可能不是一个选项。

# c++ - 将 OSName 作为字符串 C++

> ID：15561967
> 
> 赞同：1
> 
> 时间：2013-03-22T02:58:15.053
> 
> 标签：c++, windows, string, operating-system

我是 C++ 的超级新手，我试图弄清楚如何将 OSName（win 7、8、vista、xp 等）作为字符串返回。我尝试搜索，MSDN 没有帮助，只会让我更加困惑。

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:01:28.300

似乎使用预定义的标题是最简单的方法

[http://sourceforge.net/p/predef/wiki/OperatingSystems/](http://sourceforge.net/p/predef/wiki/OperatingSystems/)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-22T03:02:28.930

是什么让您认为 MSDN 会给您答案？Microsoft 在 MSDN 上的实现不是标准的 C++，因此您应该寻找可移植的解决方案。

# iphone - iOS 6 中的 ALAssetsLibrary 和位置服务

> ID：15561969
> 
> 赞同：0
> 
> 时间：2013-03-22T02:58:56.610
> 
> 标签：iphone, ios, ios6, alassetslibrary

我正在升级我的一个应用程序以支持`iOS6`和`iPhone5`. 在以前的版本中，我必须提示用户启用定位服务才能使用`ALAssetsLibrary`. 我注意到在 iOS 6 中，我可以禁用定位服务，它仍然可以正确显示所有图像。这是不是发生了变化 `iOS6`。该文档指出您仍然需要`Location Services`启用，但该文档还指出它适用于`iOS4`及以上。我找不到任何关于`iOS6`具体的提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:03:27.083

更改（或多或少）记录在[iOS SDK Release Notes for iOS 6 中](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)：

> 在 iOS 6 中，改进了日历、提醒事项、通讯录和照片的隐私控制。当应用程序尝试访问任何这些数据类型时，用户将看到访问对话框。用户可以在“设置”>“隐私”中打开和关闭访问。

此外，ALAssetsLibrary 有一个新方法[authorizationStatus](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722-CH1-SW58)，它从 iOS 6 开始可用。

在 iOS 5 中，照片没有隐私设置，用户必须允许访问定位服务，因为照片可能包含位置数据。这（我认为）很烦人和令人困惑，我很高兴它在 iOS 6 中得到了修复。

# wordpress - 使用 wordpress 哈希在 actionscript 中加密纯文本密码

> ID：15561971
> 
> 赞同：1
> 
> 时间：2013-03-22T02:59:12.363
> 
> 标签：wordpress, encryption, actionscript, passwords, smartfoxserver

我有一个将密码发送到服务器的 Flash/ActionScript 登录客户端。在服务器上，该密码通过 WordPress 数据库进行检查。密码使用 WordPress 加密方法进行加密。

我正在使用`smartfoxserver2x`，它在将密码发送到服务器以检查数据库（WordPress 加密）密码之前对客户端的密码进行加密。

所以这是流程：

1.  在客户端，纯文本密码被 sfs2x 加密并发送到服务器
2.  在服务器上，`sfs2x`用于`checkSecurePassword()`删除 sfs2x 加密并将输入的纯文本密码与 WordPress 加密的密码进行比较。他们显然会有所不同。

在 sfs2x 论坛上，有人建议我在 sfs2x 加密并将其发送到服务器之前使用 WordPress 哈希加密纯文本密码。所以我现在需要3个步骤：

1.  在客户端，纯文本密码使用 wordpress 哈希加密
2.  在客户端，该密码被 sfs2x 加密
3.  在服务器上，`sfs2x`使用`checkSecurePassword()`它删除 sfs2x 加密。

我怎样才能迈出第一步？

*   [WordPress加密方法（在php中）](http://codex.wordpress.org/Function_Reference/wp_check_password)
*   [服务器上的Sfs2x `checkSecurePassword()`API（Java 中）](http://docs2x.smartfoxserver.com/api-docs/javadoc/server/com/smartfoxserver/v2/api/ISFSApi.html#checkSecurePassword%28com.smartfoxserver.bitswarm.sessions.ISession,%20java.lang.String,%20java.lang.String%29)

我的客户端登录在 ActionScript 中。我可以在 ActionScript 中获取纯文本密码，但我不知道如何在 ActionScript 中应用该 WordPress 加密方法 (php)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T15:42:09.333

将 sfs2x 哈希而不是 WordPress 哈希存储在数据库中不是更直接吗（尽管我还没有使用过 WordPress）？

另外，如果它最初在 sfs2x 中散列，你在数据库中存储什么？sfs2x 哈希的 wp 哈希？我主要从我能找到的内容中询问，wp 和 sfs2x 都使用不可恢复的加密方法（两者都是 MD5？）。那，你说两者是不同的。如果 sfs2x 被 wp 散列到数据库中，wp 将识别的就是那个散列，而不是纯文本。

PS：我对加密游戏很陌生，所以从我所说的来看，我可以看到的问题是用户输入密码时sfs2x的散列最终与用户第一次输入密码时的散列不同；尽管如此，我不确定这是否会发生。再说一次，我是新人。

# r - R中按因子水平的分位数

> ID：15561976
> 
> 赞同：7
> 
> 时间：2013-03-22T03:00:02.713
> 
> 标签：r

我有一个数据框，我正在尝试在数据框中创建一个新变量，该变量具有连续变量的分位数`var1`，用于因子的每个级别`strata`。

```
# some data
set.seed(472)
dat <- data.frame(var1 = rnorm(50, 10, 3)^2,
                  strata = factor(sample(LETTERS[1:5], size = 50, replace = TRUE))
                  )

# function to get quantiles
qfun <- function(x, q = 5) {
    quantile <- cut(x, breaks = quantile(x, probs = 0:q/q), 
        include.lowest = TRUE, labels = 1:q)
    quantile
} 
```

我尝试使用两种方法，但都没有产生可用的结果。首先，我尝试使用`aggregate`应用于`qfun`每个级别`strata`：

```
qdat <- with(dat, aggregate(var1, list(strata), FUN = qfun)) 
```

这会按因子级别返回分位数，但很难将输出强制返回到数据框中（例如，使用`unlist`不会将新变量值与数据框中的正确行对齐）。

第二种方法是分步进行：

```
tmp1 <- with(dat, split(var1, strata))
tmp2 <- lapply(tmp1, qfun)
tmp3 <- unlist(tmp2)
dat$quintiles <- tmp3 
```

同样，这会正确计算每个因子级别的分位数，但显然，`aggregate`它们在数据框中的顺序不正确。我们可以通过将分位数“箱”放入数据框中来检查这一点。

```
# get quantile bins
qfun2 <- function(x, q = 5) {
    quantile <- cut(x, breaks = quantile(x, probs = 0:q/q), 
        include.lowest = TRUE)
    quantile
}

tmp11 <- with(dat, split(var1, strata))
tmp22 <- lapply(tmp11, qfun2)
tmp33 <- unlist(tmp22)
dat$quintiles2 <- tmp33 
```

的许多值`var1`在 的箱之外`quantile2`。我觉得我错过了一些简单的东西。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T04:15:38.187

我认为你的问题是你真的不想聚合，而是使用`ave`, （或`data.table`or `plyr`）

```
qdat <- transform(dat, qq = ave(var1, strata, FUN = qfun))

#using plyr
library(plyr)

qdat <- ddply(dat, .(strata), mutate, qq = qfun(var1))

#using data.table (my preference)

dat[, qq := qfun(var1), by = strata] 
```

聚合通常意味着返回一个小于原始对象的对象。（在这种情况下，您将获得一个 data.frame，其中每个层`x`的`list`元素为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T04:18:38.857

`ave`在您的`dat`数据框上使用。您的模拟数据和`qfun`功能的完整示例：

```
# some data
set.seed(472)
dat <- data.frame(var1 = rnorm(50, 10, 3)^2,
              strata = factor(sample(LETTERS[1:5], size = 50, replace = TRUE))
              )

# function to get quantiles
qfun <- function(x, q = 5) {
    quantile <- cut(x, breaks = quantile(x, probs = 0:q/q), 
        include.lowest = TRUE, labels = 1:q)
    quantile
} 
```

还有我的补充...

```
dat$q <- ave(dat$var1,dat$strata,FUN=qfun) 
```

# xamarin.ios - 在 PCL 中包含 Socket MvvmCross 的最佳方式

> ID：15561980
> 
> 赞同：2
> 
> 时间：2013-03-22T03:01:19.127
> 
> 标签：xamarin.ios, windows-runtime, xamarin.android, windows-phone, mvvmcross

首先，我要感谢您（特别是 Stuart）为这个令人惊叹的框架 MvvmCross。

我有一个涉及套接字连接的应用案例，我想使用适用于 Android、WP7 和 iO 的 PCL。

不幸的是，PCL 子集不支持按原样使用套接字（我认为 NCL 仅支持 Microsoft 不同的框架）。

我认为可能是 MvvmCross 插件是要走的路，但仍然需要每个平台的插件实现（我的意思是 ...plugin.Droid、..plugin.WP7 等），而最后应该是相同的代码。

你有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:05:18.750

> 我想可能是 MvvmCross Plugin 是要走的路

是的，这正是插件设计的那种情况。

我当然会将其实现为套接字插件：

*   插件的 PCL 部分将提供一个套接字接口，尽管它也可能在共享代码中包含一些共享基类“缓冲区复制”类型的功能。

*   处理原始套接字连接和 IO 的平台特定套接字实现。

    这些平台插件的添加很可能会在几个平台实现之间使用大量文件链接——我希望有很多代码必须以这种方式共享。

我认为套接字插件将是一个相当普遍的需求——因此，如果您要通过开源解决这个问题，那么您可能会找到一些愿意的贡献者……或者，如果您要使用封闭源代码，那么您可能会找到一些客户。

* * *

虽然现阶段没有人开源*IP 网络套接字实现，但 Sphero 项目确实包含了一个**蓝牙套接字*示例——尽管它的通信方式并不完全是网络高效的。

此蓝牙套接字代码在 Ms-PL 中开源，位于[https://github.com/slodge/BallControl/tree/master/Cirrious.Sphero.WorkBench/Plugins/Sphero](https://github.com/slodge/BallControl/tree/master/Cirrious.Sphero.WorkBench/Plugins/Sphero)

此 Sphero 插件不公开 PCL **Sphero-Socket**级别的 API——而是在插件级别选择公开**Sphero-Robot**级别的 API。

事后看来（一件美妙的事情），如果我再次实现它，那么我将实现：

*   一个*蓝牙串口插件*，暴露蓝牙扫描、连接和套接字流
*   一个额外的 PCL 库，它使用插件来驱动机器人 - 这可能被称为插件，但其中没有任何非 PCL 代码。

# c# - 为什么 MVC 4 在等待某事时处理控制器？

> ID：15561985
> 
> 赞同：4
> 
> 时间：2013-03-22T03:01:36.343
> 
> 标签：c#, asp.net-mvc-4, .net-4.5, async-await, c#-5.0

为什么我的控制器在声明后被处置`await`？

```
 public async Task<ViewResult> MyAction()
    {
            await Task.Yield();

            // controller disposed at this point... why?

            return this.View();
    } 
```

我的控制器使用它通过覆盖`Dispose`方法处理的资源......但使用 async/await 似乎打破了这一点，因为它会在执行 await 语句后立即处理控制器......我怎样才能以异步的方式处理资源支持/等待？

**编辑：** dispose 方法的调用堆栈中的最后一个方法：

```
MyWebRole.dll!MyWebRole.Code.MyController.Dispose(bool disposing = true) Line 102   C#
System.Web.Mvc.dll!System.Web.Mvc.Controller.Dispose() + 0x25 bytes   
System.Web.Mvc.dll!System.Web.Mvc.DefaultControllerFactory.ReleaseController(System.Web.Mvc.IController controller = {MyWebRole.Areas.App.Controllers.LongPollingController}) + 0x3e bytes   
System.Web.Mvc.dll!System.Web.Mvc.MvcHandler.BeginProcessRequest.AnonymousMethod__5() + 0x70 bytes   
System.Web.Mvc.dll!System.Web.Mvc.Async.AsyncResultWrapper.MakeVoidDelegate.AnonymousMethod__0() + 0x2d bytes   
System.Web.Mvc.dll!System.Web.Mvc.Async.AsyncResultWrapper.BeginSynchronous<System.Web.Mvc.Async.AsyncVoid>.AnonymousMethod__7(System.IAsyncResult _ = {System.Web.Mvc.Async.SimpleAsyncResult}) + 0x2b bytes   
System.Web.Mvc.dll!System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult<System.Web.Mvc.Async.AsyncVoid>.End() + 0x99 bytes   
System.Web.Mvc.dll!System.Web.Mvc.Async.AsyncResultWrapper.End<System.Web.Mvc.Async.AsyncVoid>(System.IAsyncResult asyncResult = {System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult<System.Web.Mvc.Async.AsyncVoid>}, object tag = {object}) + 0x3c bytes   
System.Web.Mvc.dll!System.Web.Mvc.Async.AsyncResultWrapper.End(System.IAsyncResult asyncResult = {System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult<System.Web.Mvc.Async.AsyncVoid>}, object tag = {object}) + 0x29 bytes   
System.Web.Mvc.dll!System.Web.Mvc.MvcHandler.EndProcessRequest.AnonymousMethod__d() + 0x27 bytes   
System.Web.Mvc.dll!System.Web.Mvc.SecurityUtil.GetCallInAppTrustThunk.AnonymousMethod__0(System.Action f = {Method = {System.Reflection.RuntimeMethodInfo}}) + 0x20 bytes   
System.Web.Mvc.dll!System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(System.Action action = {Method = {System.Reflection.RuntimeMethodInfo}}) + 0x3e bytes   
System.Web.Mvc.dll!System.Web.Mvc.MvcHandler.EndProcessRequest(System.IAsyncResult asyncResult = {System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult<System.Web.Mvc.Async.AsyncVoid>}) + 0x77 bytes   
System.Web.Mvc.dll!System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(System.IAsyncResult result = {System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult<System.Web.Mvc.Async.AsyncVoid>}) + 0x27 bytes 
```

该`Dispose`方法正在被调用`disposing = true`......这很糟糕。也许是一个错误？

**编辑 2：**我尝试过子类`AsyncController`化，但同样的情况发生了。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T05:43:07.387

问题中显示的调用堆栈来自 MVC3 而不是 MVC4。不幸的是 MVC3 不支持`Task`-based 异步调用。当您调用 await 时，任务可能会很好地启动，但 MVC3 对此一无所知，因此它只是调用`ToString()`它并将其作为`ContentResult`.

在`Task`MVC4 中添加了基于 - 的异步支持，实际上甚至不需要从`AsyncController`. MVC4 中的所有`Controllers`内容都支持同步和`Task`基于 - 的异步。`AsyncController`仅当您使用 Async/Completed 模式时才需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:52:02.313

根据堆栈跟踪，似乎无论启动进程请求都决定它结束它，因此您丢失了对控制器的引用，并且它有资格进行垃圾收集/处理。我会调查是什么开始了流程请求以及为什么会结束它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T02:32:42.633

我遇到了这个问题，它困扰了我一整天。我终于意识到我在 ControllerFactory 中连接的 ActionInvoker 是从 ControllerActionInvoker 继承的。当我将其更改为 AsyncControllerActionInvoker 时，问题就消失了。

# openlayers - OpenLayers：向标记添加（css-）类？

> ID：15561988
> 
> 赞同：3
> 
> 时间：2013-03-22T03:01:52.420
> 
> 标签：openlayers, addclass

天！
我想为我的 OpenLayers 地图上的每个标记添加一个唯一的（css-）类，但我不知道怎么做！我几乎尝试了所有方法，还在[OpenStreetMap 的论坛上](http://forum.openstreetmap.org/viewtopic.php?pid=317651#p317651)发布了这个问题（因为那里的人对 OpenLayers 非常熟悉）。
这是我为添加标记而编写的函数：

```
    函数 ownMarker(lon,lat,icon,markerid) {
        var size = new OpenLayers.Size(38,58);
        var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
        var element = new OpenLayers.Element.addClass('div', 'test');
        var icon = new OpenLayers.Icon('images/marker/'+ icon +'.png', size, offset);
        var marker = new OpenLayers.Marker((new OpenLayers.LonLat(lon, lat).transform(proj4326, projmerc)),icon)
        标记.id = 标记ID；
        marker.events.register("mousedown", marker, function() {
            if(this.id != 'home') {
                currentID = this.id;
                $('.activeResult').removeClass('activeResult');
                $('#results a[href$=' + this.id + ']').addClass("activeResult");
                showContent($(".nav a:first-child").attr("href"));
                $(".nav a:first-child").addClass("activeContent")
                如果（内容打开 == 假）{
                    $("#container").show();
                    $(".frame").animate({left: 0});
                    内容打开=真；
                }
                tempLatitude = $('#results a[href$=' + this.id + ']').attr("lat");
                tempLongitude = $('#results a[href$=' + this.id + ']').attr("lon");
                targetLatitude = $('#results a[href$=' + this.id + ']').attr("lat");
                targetLongitude = $('#results a[href$=' + this.id + ']').attr("lon");
                ownPanTo(tempLongitude, tempLatitude);
                控制台.log(this.id);
            }
        });
        标记.addMarker(标记);
    }

```

正如您在第 5 行中看到的那样，我已经尝试向标记添加一个类 - 没有成功！

请帮我！:)

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T16:09:24.647

也许答案太明显了：OpenLayers 图标本来就不是 HTML 元素，但您可以访问在地图上绘制时将成为图标一部分的 HTML 元素：[http ://dev.openlayers.org /docs/files/OpenLayers/Icon-js.html#OpenLayers.Icon.imageDiv](http://dev.openlayers.org/docs/files/OpenLayers/Icon-js.html#OpenLayers.Icon.imageDiv)（这不是我在 www.openlayers.org 上使用 api 文档的第一个链接时出现的，奇怪）所以有人可以解决这个问题像这样的问题：

```
icon.imageDiv.className += " my_icon_class"; 
```

# apache-flex - 搜索 Flashbuilder 4.6 64 位

> ID：15561989
> 
> 赞同：1
> 
> 时间：2013-03-22T03:02:15.983
> 
> 标签：apache-flex

任何人都知道我可以获得 Flash Builder 4.6 64 位版本的链接。似乎 Adob​​e 已将其从他们的页面上删除，我能遇到的唯一版本是 32 位版本。帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:24:31.470

如果您购买了 Flash Builder 4.6 64 位的副本，您应该直接联系 Adob​​e，并告诉他们出于兼容性原因您需要 4.6。即使这样，他们也可能希望您升级到 4.7。

我什至不确定是否有 64 位版本。你确定这就是你需要的吗？如果您有试用版或破解版，那么您很可能不走运。

# android - 网格视图适配器上的 overridePendingTransition

> ID：15561991
> 
> 赞同：8
> 
> 时间：2013-03-22T03:02:30.630
> 
> 标签：android, overriding, adapter, transition, baseadapter

如何插入`overridePendingTransition```GridView`适配器？以这种方式不起作用，没有过渡 startactivity 完美地工作

```
bt.setOnLongClickListener(new OnLongClickListener(){
                @Override
                public boolean onLongClick(View v) {
                        final String selectedPad = Drum.pads[position];
                        Intent modPad = new Intent(v.getContext(), ModifyPad.class);
                        modPad.putExtra("pad", selectedPad);
                        context.startActivity(modPad);
                        overridePendingTransition(R.anim.exit_slid_in, R.anim.exit_slid_out);
                    return false;
                }
            }); 
```

我读过这篇文章： [android start Activity in adapter (transition animation direction problem)](https://stackoverflow.com/questions/4215070/android-start-activity-in-adapter-transition-animiation-direction-problem) ，以及相关的评论，但我不知道如何通过`Activity`. `Adapter`有什么帮助吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-29T15:38:50.360

Context 是 Activity 的基础对象（参见：[What is the difference between Activity and Context?](https://stackoverflow.com/questions/6518206/what-is-the-difference-between-activity-and-context)），所以我使用了以下内容：

```
Activity activity = (Activity) mContext;
activity.startActivity(repinIntent);
activity.overridePendingTransition(R.anim.act_start_in_from_right, R.anim.act_start_out_to_left); 
```

参考：[在android中从上下文中获取activity](https://stackoverflow.com/questions/9891360/getting-activity-from-context-in-android)

# c++ - 使用同一段代码而不使用宏来处理两种不同的数据类型

> ID：15561992
> 
> 赞同：-4
> 
> 时间：2013-03-22T03:02:56.857
> 
> 标签：c++

我想在不使用宏的情况下对两种不同的数据类型使用一段代码。我试过这样的事情，但我没有想出一个完整的解决方案。

```
void func(bool istype1, void *ptr)
{
    void *t1;
    if(isType1)
        t1=static_cast<type1>(ptr);
    else   // isType1 == false means data type 2.
        t1=static_cast<type2>(ptr);

    ...
    ...
    ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T03:06:37.457

你想要一个模板。你必须在某个地方阅读它们。 [http://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/)

你可以实现一个最大值

```
template <class T>
T max(T one, T two)
{
   return one > two ? one : two;
} 
```

这将适用于您可以比较类的任何对象。整数、浮点数，甚至使用已定义的类。

# reference - 实体框架在删除之前检查引用

> ID：15561993
> 
> 赞同：1
> 
> 时间：2013-03-22T03:03:17.793
> 
> 标签：reference, entity-framework-4, constraints

假设我有一个要删除的用户，但该用户可能被数据库中的其他表引用。有没有办法在尝试删除之前检查对该用户的引用，或者只是删除并捕获/处理`SaveChanges()`抛出的异常的最佳选择？

*显然，我可以检查可能*引用用户的每个表......但我宁愿不这样做，因为它在一些地方被引用，而且这似乎是一种混乱的做事方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:55:56.870

如果您还没有找到解决方案，我现在不知道，但我正在发布，因为我自己也遇到了类似的问题。我想你可以使用查询来检查引用让我们说类似..

```
bool related = db.Article.Where(i => i.CategoryId == id).Any(); 
```

但我相信捕捉异常比检查参考更好。

对于您想要一个必需的关系但没有级联删除的场景，您可以显式覆盖约定并使用 Fluent API 配置级联删除行为。要使用的 Fluent API 方法称为**WillCascadeOnDelete**，并将布尔值作为参数。此配置应用于关系，这意味着您首先需要使用 Has/With 配对指定关系，然后调用 WillCascadeOn Delete。就像是：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Article>()
            .HasRequired(a => a.Category)
            .WithMany(i => i.Articles)
            .WillCascadeOnDelete(false);
        base.OnModelCreating(modelBuilder);
    } 
```

然后，您通常会收到 DbUpdateException 或 InvalidOperationException，具体取决于您的数据如何加载到内存中。您可以通过简单的语句捕获它们并向用户添加消息。

```
try
{
  db.Category.Remove(category);
  db.SaveChanges();
  return RedirectToAction("Index");
}
catch (DataException)
{
ModelState.AddModelError("", "Your message here");
return View(category);
} 
```

WillCascadeOnDelete 基本上所做的是将数据库中的 Delete 规则从**Cascade**更改为**No Action**，这会导致在发生违规时引发错误。这里的总体信息是您可以控制级联删除设置，但您将负责避免或解决由于不存在级联删除而导致的可能冲突。它对我有用，希望它对你也有帮助。另请参阅：[使用 Fluent API 配置关系](http://msdn.microsoft.com/en-US/data/jj591620)

# batch-file - 批处理文件播放列表随机排序

> ID：15561997
> 
> 赞同：2
> 
> 时间：2013-03-22T03:04:02.480
> 
> 标签：batch-file

我整理了一个小批量文件程序来创建播放列表

```
@echo off
DIR /S /o:n /b *.avi > Playlist.m3u 
```

有没有办法改变它，以便每次运行时都会按随机顺序排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:55:20.330

可以，但不会很漂亮！您可以使用更好的平台而不是批处理文件吗？也许这正是您一直在等待学习 Powershell 的机会！:-)

但是，如果您坚持使用批处理，如果我要尝试，这是我会采取的一般方法：

1.  计算文件夹中 .avi 文件的数量。
2.  在 0 和这个数字之间选择一个随机数。例如，`set /a randomLineNum=%random% %% 10`将 %randomLineNum% 设置为 0 到 9 之间的数字。
3.  使用类似的东西`for /f "skip=%randomLineNum%" %%L in ('dir /s /o:n /b *.avi') ...`来抓住那条随机线，然后`echo %%L > Playlist.m3u`.
4.  回到#2。

这种简单的方法最终会导致重复，而且我没有以任何方式构建退出循环。我将这些问题留给您解决（或在以后的问题中提出）。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:11:59.377

没有 TEMP 文件的解决方案：

```
@echo off &setlocal
set "playlist=Playlist.m3u"
del %playlist% 2>nul
set /a files=0
for %%i in (*.avi) do set /a files+=1
if %files% equ 0 (echo No AVI found&goto:eof) else echo %files% AVI's found.
set /a cnt=%files%-1
for /l %%i in (0,1,%cnt%) do for /f "delims=" %%a in ('dir /b /a-d *.avi^|more +%%i') do if not defined $avi%%i set "$avi%%i=%%a"
:randomloop
set /a rd=%random%%%%files%
call set "avi=%%$avi%rd%%%"
if not defined avi goto :randomloop
set "$avi%rd%="
>>%playlist% echo %avi%
set /a cnt-=1
if %cnt% geq 0 goto:randomloop
echo Done!
endlocal 
```

这不使用DelayedExpansion，因此它可以处理名称中带有感叹号的文件。这需要更多时间，但也不需要临时文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:59:21.740

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
::
:: establish a tempfile name
::
:temploop
SET tempfile="%temp%\temp%random%.tmp"
IF EXIST %tempfile% GOTO temploop
::
:: Write the list of filenames with each
:: prefixed by a random number and a colon
::
(FOR /f "delims=" %%i IN (
  'dir /s/b *.avi'
 ) DO ECHO !random!:%%i
)>%tempfile% 
::
:: Write the playlist.
:: sort the tempfile (which places it 
:: in random order) and remove the number:
::
(FOR /f "tokens=1*delims=:" %%i IN (
  ' sort ^<%tempfile% ') DO ECHO %%j
) >playlist.m3u
::
:: and delete the tempfile.
::
DEL %tempfile% 2>NUL 
```

应该可以工作 - 但如果**您**的文件/路径名包含`!`

代码中的文档。

# list - 多个输入产生想要的输出

> ID：15561998
> 
> 赞同：0
> 
> 时间：2013-03-22T03:04:04.070
> 
> 标签：list, input, tuples, python-3.3

我正在尝试创建一个接受用户输入的代码，将其与元组列表（shares.py）进行比较，然后在列表中打印值。例如，如果用户输入是 aia，则此代码将返回：

```
Please list portfolio: aia

Code  Name                   Price
AIA   Auckair                 1.50 
```

这适用于一个输入，但我想做的是让它适用于多个输入。例如，如果用户输入是 aia、air、amp - 此输入将返回：

```
Please list portfolio: aia, air, amp

Code  Name                   Price
AIA   Auckair                 1.50
AIR   AirNZ                   5.60   
AMP   Amp                     3.22 
```

这就是我到目前为止所拥有的。任何帮助，将不胜感激！

```
import shares
a=input("Please input")
s1 = a.replace(' ' , "")
print ('Please list portfolio: ' + a)
print (" ")
n=["Code", "Name", "Price"]
print ('{0: <6}'.format(n[0]) + '{0:<20}'.format(n[1]) + '{0:>8}'.format(n[2]))
z = shares.EXCHANGE_DATA[0:][0]
b=s1.upper()
c=b.split()
f=shares.EXCHANGE_DATA
def find(f, a):
    return [s for s in f if a.upper() in s]
x= (find(f, str(a)))
print ('{0: <6}'.format(x[0][0]) + '{0:<20}'.format(x[0][1]) + ("{0:>8.2f}".format(x[0][2]))) 
```

share.py 包含这个

```
EXCHANGE_DATA = [('AIA', 'Auckair', 1.5),
                 ('AIR', 'Airnz', 5.60),
                 ('AMP', 'Amp',3.22), 
                 ('ANZ', 'Anzbankgrp', 26.25),
                 ('ARG', 'Argosy', 12.22),
                 ('CEN', 'Contact', 11.22)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:36:27.807

我假设 a 包含以下格式的值 'aia air amp'

```
raw = a # just in case you want the original string at a later point
toDisplay = []
a = a.split() # a now looks like ['aia','air','amp']
for i in a:
    temp = find(f, i)
    if(temp):
        toDisplay.append(temp)

for i in toDisplay:
    print ('{0: <6}'.format(i[0][0]) + '{0:<20}'.format(i[0][1]) + ("{0:>8.2f}".format(i[0][2]))) 
```

基本上我想做的是

*   将输入拆分为列表
*   为该列表中的每个项目执行您为单个输入所做的操作

希望这可以帮助！