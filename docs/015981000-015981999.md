# StackOverflow 问答 15981000-15981999

# python-3.x - tkinter python 最大化窗口

> ID：15981000
> 
> 赞同：47
> 
> 时间：2013-04-12T21:17:31.370
> 
> 标签：python-3.x, tkinter

我想将一个窗口初始化为最大化，但我不知道该怎么做。我在 Windows 7 上使用 python 3.3 和 Tkinter 8.6。我想答案就在这里：[http](http://www.tcl.tk/man/tcl/TkCmd/wm.htm#m8) ://www.tcl.tk/man/tcl/TkCmd/wm.htm#m8 但我不知道如何输入它进入我的python脚本

此外，我需要获取窗口的宽度和高度（无论是最大化还是用户之后重新缩放它），但我想我可以自己找出来。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2014-03-18T14:52:08.600

你可以通过调用来做到这一点

```
root.state('zoomed') 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-04-12T23:26:39.943

如果要将全屏属性设置为 True，则很简单：

```
root = Tk()
root.attributes('-fullscreen', True) 
```

但是，它不显示标题栏。如果要保持可见，可以使用以下`geometry()`方法调整 Tk 元素的大小：

```
root = Tk()
w, h = root.winfo_screenwidth(), root.winfo_screenheight()
root.geometry("%dx%d+0+0" % (w, h)) 
```

使用`winfo_width()`and`winfo_height()`可以获得宽度和高度或窗口，还可以将事件处理程序绑定到`<Configure>`事件：

```
def resize(event):
    print("New size is: {}x{}".format(event.width, event.height))

root.bind("<Configure>", resize) 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-03-08T21:29:31.457

要显示带有标题栏的最大化窗口，请使用“缩放”属性

```
root = Tk()
root.attributes('-zoomed', True) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-10-16T12:39:04.087

我在其他网站上找到了这个：

```
import Tkinter

MyRoot = Tkinter.Tk()
MyRoot.state("zoomed")

MyRoot.mainloop() 
```

这解决了我的问题。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-08-25T22:16:55.877

第一种方法是使用`root.state('zoomed')`，但不应该是普遍可用的。它适用于 Windows 和我的 Ubuntu 机器。但是，在我的 Arch 机器下却没有。

* * *

第二种是先获取*maxsize*，然后手动设置几何，例如：

```
m = root.maxsize()
root.geometry('{}x{}+0+0'.format(*m)) 
```

这适用于大多数机器，但不适用于所有机器。例如，在我的 Arch 下`maxsize()`返回`(1425, 870)`，而最大化窗口的真实几何图形应该是`(1440, 848)`. 所以，你也不能依赖它。

* * *

第三，我认为最好的方法是使用`root.wm_attributes('-zoomed', 1)`. 它是普遍可用的，似乎是最安全的。在某些机器上，只能按宽度或高度进行缩放，但与以前的方法相比，这个方法*永远不会*给你一个部分位于屏幕之外的窗口。

最后，如果您想要全屏，而不仅仅是缩放窗口，请使用`root.wm_attributes('-fullscreen', 1)`. 它提供了到窗口管理器行为的本机链接，因此比`overrideredirect`手动玩和设置几何图形要好得多（在某些平台上可能会导致非托管窗口，它只能通过自己的界面关闭或终止进程，不会） t 显示在任务栏等...）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-01T17:44:36.710

`root.wm_state('zoomed')`正如@JFSebastian 所提到的，最pythonic 是"

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-13T12:11:38.393

使用 TkAgg 作为后端，这是在没有全屏的情况下最大化窗口的唯一组合：

```
win_manager = plt.get_current_fig_manager()
win_manager.window.state('zoomed')
win_manager.full_screen_toggle() 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2021-08-09T11:04:29.963

您可以使用此代码

```
import tkinter as tk
window = tk.Tk()

window.attributes('-zoomed',True)

window.mainloop() 
```

# c# - Making Outlook Recognize My Digitally Signed Email

> ID：15981001
> 
> 赞同：4
> 
> 时间：2013-04-12T21:17:32.920
> 
> 标签：c#, .net, outlook

I am using C# .NET 4.0 to send a signed SMTP mail message like so:

```
 private void SendMailMessage(object data)
    {
        MailMessage message = new MailMessage();
        message.From = new MailAddress(fromAddress);
        message.To.Add(new MailAddress(emailTo));
        message.Subject = "Subject";
        message.IsBodyHtml = true;
        message.Body += "Blah blah blah.";
        byte[] messageBytes = Encoding.ASCII.GetBytes(message.Body);
        SignedCms Cms = new SignedCms(new ContentInfo(messageBytes));
        CmsSigner Signer = new CmsSigner(SubjectIdentifierType.IssuerAndSerialNumber, certificate);
        Cms.ComputeSignature(Signer);
        byte[] SignedBytes = Cms.Encode();
        MemoryStream signedStream = new MemoryStream(SignedBytes);
        AlternateView signedView = new AlternateView(signedStream, "application/pkcs7-mime; smime-type=signed-data;name=sig.p7m");
        message.AlternateViews.Add(signedView);
        SmtpClient client = new SmtpClient(smtpServer, int.Parse(smtpServerPort));
        client.DeliveryMethod = SmtpDeliveryMethod.Network;
        client.Send(message);
        message.Dispose();
        client = null;       
    } 
```

From what I can tell, this "works" in that if view the raw data of the message, I see the alternate view with a big PKCS signature in it. But Outlook doesn't recognize it. The Outlook client normally recognizes signed messages and attempts to validate them and puts a little certificate on the message and all that...

I want that... what am I missing?

**Edit:** I have made some progress on this on my own, but still having some trouble. Here is what the code looks like now:

```
 private void SendMailMessage(string emailTo)
    {            
        MailMessage message = new MailMessage();
        message.From = new MailAddress(fromAddress);
        message.To.Add(new MailAddress(emailTo));
        message.Subject = "Special Delivery";
        message.IsBodyHtml = false;
        string body = "Content-Type: text/plain;charset=\"iso-8859-1\"\nContent-Transfer-Encoding: quoted-printable\n\nHere is some body text!";
        byte[] messageBytes = Encoding.ASCII.GetBytes(body);
        ContentInfo content = new ContentInfo(messageBytes);
        SignedCms signedCms = new SignedCms(content, false);
        CmsSigner Signer = new CmsSigner(SubjectIdentifierType.IssuerAndSerialNumber, certificate);
        signedCms.ComputeSignature(Signer);
        byte[] signedBytes = signedCms.Encode();
        MemoryStream ms = new MemoryStream(signedBytes);
        AlternateView av = new AlternateView(ms, "application/pkcs7-mime; smime-type=signed-data;name=smime.p7m");
        message.AlternateViews.Add(av);
        SmtpClient client = new SmtpClient(smtpServer, int.Parse(smtpServerPort));
        client.DeliveryMethod = SmtpDeliveryMethod.Network;
        client.Send(message);
        message.Dispose();
        client = null;
    } 
```

Of note is that I left message.Body blank this time, only sending the AlternateView. Now, when I send this to an Outlook inbox, I get the padlock icon over my email, the S/MIME doodad kicks in and tries to verify the signer, but fails. The certificate used to sign the email is issued by a publically trusted CA. **Edit:** That's my fault, the certificate didn't have the "secure email" usage attribute. I'll get a new certificate.

When I send the same email to a Gmail address, I get a blank message with a *.p7m attachment on it that contains a bunch of garbage.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T21:00:22.290

使它在 Outlook 中工作的代码如下所示：

```
private void SendMailMessage(string emailTo)
{
    MailMessage message = new MailMessage();
    message.From = new MailAddress(fromAddress);
    message.To.Add(new MailAddress(emailTo));
    message.Subject = "Regarding your lottery winnings";
    message.IsBodyHtml = false;
    string body = "Content-Type: text/plain;charset=\"iso-8859-1\"\nContent-Transfer-Encoding: quoted-printable\n\nBlah blah blah blah blah blah.";                
    byte[] messageBytes = Encoding.ASCII.GetBytes(body);
    ContentInfo content = new ContentInfo(messageBytes);
    SignedCms signedCms = new SignedCms(content, false);
    CmsSigner Signer = new CmsSigner(SubjectIdentifierType.IssuerAndSerialNumber, emailCert);
    signedCms.ComputeSignature(Signer);
    byte[] signedBytes = signedCms.Encode();
    MemoryStream ms = new MemoryStream(signedBytes);
    AlternateView av = new AlternateView(ms, "application/pkcs7-mime; smime-type=signed-data;name=smime.p7m");
    message.AlternateViews.Add(av);                
    SmtpClient client = new SmtpClient(smtpServer, int.Parse(smtpServerPort));
    client.DeliveryMethod = SmtpDeliveryMethod.Network;
    client.Send(message);
    message.Dispose();
    client = null;
} 
```

当然，使用有效的证书。现在，当我发送这封电子邮件并在 Outlook 中查看它时，我在电子邮件上看到了证书图标，并且 S/MIME 控件成功验证了签名，并且文本按照我想要的方式显示，而不向用户显示标题.

请注意，我必须留下 message.Body 为空。在 message.Body 中放入任何东西都会破坏它。

# hadoop - 具有独立模式的 MRUnit

> ID：15981003
> 
> 赞同：0
> 
> 时间：2013-04-12T21:17:39.103
> 
> 标签：hadoop, junit, mrunit

是否可以在独立模式下运行 MRUnit？将隔离映射器/缩减器的优点与仍然从本地磁盘读取的透明且简单的输出检查相结合（我想测试特定的 FileSYStem 实现）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:10:57.247

是的，mrunit 在独立模式下运行，iirc。只需确保在您的配置中将 fs.default.name 设置为“本地”。

# java - 不应存在 的 Eclipse 和未经检查的转换警告

> ID：15981008
> 
> 赞同：1
> 
> 时间：2013-04-12T21:17:53.143
> 
> 标签：java, eclipse

收到警告的代码：

```
HashSet<MyBean> beanies = StatusUtil.getStatus(myBeanList); 
```

它调用的方法：

```
public static HashSet<MyBean> getStatus(List<MyBean> servers){      
   HashSet<MyBean> set = new HashSet<MyBean>();
   return set;
} 
```

是的，这是 Eclipse 中的确切代码。我意识到这不是大量信息，但在我看来，代码不应该产生警告。如果有帮助，那就是 Eclipse Indigo。清理项目没有任何作用。重新启动 Eclipse 什么也不做。

**编辑：**我最初应该注意到 Eclipse 实际上说“类型的表达式`HashSet`需要未经检查的转换才能符合`HashSet<MyBean>`”。所以它似乎意识到该方法被定义为 HashSet 但没有意识到我的返回变量也是如此......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:33:45.340

这似乎是由于 Eclipse Indigo 错误造成的。该错误在 Eclipse 中首次出现，我将默认工作区设置切换为使用 Java 7 作为编译器。我删除了所有其他可能的 Java 编译器，这将强制所有项目使用 Java 7。这可以在`Project->Properties->Java Compiler`. 有一个链接显示 Configure `Workspace Settings`。此时所有的单个项目都*完成了*说“合规水平”是 1.7，这是我的预期。但是，在我检查“启用项目特定设置”并将其设置为 Java 7 之前，我的答案中所述的错误并没有消失。在我看来，这是一个错误，因为如果只有一个可用的编译器我设置为我的工作区默认值编译器，而我的项目没有启用项目特定设置，那么显然它应该使用该编译器。但是，启用项目特定设置使我上面描述的警告消息消失了。

# python - Python - Manipulation of values before writing to output

> ID：15981011
> 
> 赞同：0
> 
> 时间：2013-04-12T21:18:20.410
> 
> 标签：python

I am attempting(can) write the values of a dictionary to files. The values are wrote in the file with the below format.

```
>foo bar
>too you 
```

So each `>` represents a value within the key(file is the key) and also a line in the file.

Can I manipulate the values so that my file looks like this? (below)

```
>foo
bar
>too
you 
```

Simply taking the white space in-between the strings of each value and making it into a return, is this possible?

I know that I could always read in the file again and strip the lines... but there are 100+ files from the output of my script, makes sense to do this "return" during the generation of the files.

The part of my code in question:

```
for key, values in sequencelist.items():
with open(key, 'w') as out:
    for value in values:
        out.write(''.join(value) + '\n') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:20:12.697

```
for key, values in sequencelist.items():
    with open(key, 'w') as out:
        for value in values:
            out.write('\n'.join(value.split())) 
```

# ios - 关闭并重新打开应用程序时uiswitch在uitableview持久性中？

> ID：15981012
> 
> 赞同：-2
> 
> 时间：2013-04-12T21:18:28.710
> 
> 标签：ios, objective-c, uitableview, uiswitch

我想问一下uitableview自定义单元格中的uiswitch。

如果我有保持表中每个 uiswitch 状态的数组，并在更改值事件上更新它。但是，每次我打开应用程序时，这些更改都不是持久性，它会重置为初始状态。我的问题是，每当我关闭它并再次重新打开它时，如何使更改在我的应用程序上持续存在？

这是我的更改值代码：

```
-(void)switchChanged:(UISwitch *)sender
{
    UITableViewCell *cell = (UITableViewCell *)[sender superview];
    NSIndexPath *x=[mainTableView indexPathForCell:cell];

    NSMutableArray *repl = [[NSMutableArray alloc] init];

    if (sender.on)
    {
        repl= [SwitchArray objectAtIndex:x.section] ;
        [repl replaceObjectAtIndex:x.row withObject:@"ON"];

    }
    else
    {
        //call the first array by section
        repl= [SwitchArray objectAtIndex:x.section] ;
        [repl replaceObjectAtIndex:x.row withObject:@"OFF"];

   }
} 
```

这是 viewDidLoad 中数组的初始值：

```
for(int j=0 ; j < 30 ; j++)
                 [switchArray addObject:@"ON"]; 
```

提前致谢。感谢您的合作 这会让我很开心

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:41:29.947

在应用程序的使用之间持久保存数组的一种简单方法是将数组写出到 pList。

为此，您需要一个存储文件的地方，请看以下示例：

```
- (NSURL *)switchArrayFilePath {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSURL *filePath = [NSURL fileURLWithPath:[documentsDirectory stringByAppendingPathComponent:@"SwitchArray.plist"]];

    return filePath;
} 
```

然后为了加载你的数组，你可以读回 pList`viewDidLoad:`例如：

```
self.switchArray = [[NSMutableArray alloc] initWithContentsOfURL:[self switchArrayFilePath]]; 
```

然后为了写出数据，你可以这样`viewWillDisappear:`

```
[self.switchArray writeToURL:[self switchArrayFilePath] atomically:YES]; 
```

在 iOS 上持久保存此类数据的其他方法是使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)或使用 Core Data，但对于像这样简单的事情来说这会很复杂。

希望有帮助！

# c# - 如何杀死特定的 chrome 选项卡/进程

> ID：15981022
> 
> 赞同：5
> 
> 时间：2013-04-12T21:19:19.937
> 
> 标签：c#, google-chrome, windows-services

我正在编写一个我想作为计划任务运行的 Windows 服务。在开始时，我希望它在 chrome 进程中读取并杀死任何具有特定 url 的内容..

我可以使用

```
var list = Process.GetProcessesByName("chrome"); 
```

但在那之后我很难过..

每个进程的 MainWindowTitle 是 "" 而 MainWindowHandle 是 0 所以对我没有帮助。

我已经阅读了许多与此相关的帖子，似乎没有 api 进入 chrome 所以我在浪费时间吗？

任何帮助赞赏 J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:30:58.137

如果您查看 spy++，您会发现您可以找到将 Caption 设置为 html 页面标题的根窗口。子窗口也是 url 栏，因此如果您枚举所有 chrome 窗口的子窗口，您就可以找到它。

笑![Spy++ Chome 信息](https://i.stack.imgur.com/oT3vg.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:29:20.457

While it is possible to do this, I wouldn't recommend it. Injecting yourself in to other processes and reading their contents can cause unpleasant behavior and is hard to get completely correct, but if I was going to try this, I would use the UI automation tools provided by MS ([http://msdn.microsoft.com/en-us/library/ms747327.aspx](http://msdn.microsoft.com/en-us/library/ms747327.aspx)), or White ([http://teststack.github.io/White/](http://teststack.github.io/White/)). Those are going to be the best bets.

# django - 在 Django 1.5 中更改登录表单的默认模板

> ID：15981023
> 
> 赞同：4
> 
> 时间：2013-04-12T21:19:25.090
> 
> 标签：django, django-templates

很简单的问题。当在`login_required`视图上方使用装饰器时，身份验证系统会将我重定向到`LOGIN_URL`settings.py 中定义的任何 URL，使用`registration/login.html`.

**问题：**如何为我的登录表单定义不同的模板名称（我不想使用默认值）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:56:33.073

[`login`文档](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.views.login)：

> 如果您不想调用模板`registration/login.html`，您可以通过`template_name`额外的参数将参数传递给 URLconf 中的视图。例如，此 URLconf 行将`myapp/login.html`改为使用：

```
(r'^accounts/login/$',
 'django.contrib.auth.views.login',
 {'template_name': 'myapp/login.html'}), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-16T05:19:54.097

----Django 1.10--------

我在设置中更改了 TEMPLATE_DIR 来解决这个问题

设置.py

```
 TEMPLATES = [
{
    'BACKEND': 'django.template.backends.django.DjangoTemplates',
    'DIRS': [os.path.join(BASE_DIR,'templates')],
    'APP_DIRS': True,
    'OPTIONS': {
        'context_processors': [
            'django.template.context_processors.debug',
            'django.template.context_processors.request',
            'django.contrib.auth.context_processors.auth',
            'django.contrib.messages.context_processors.messages',

        ],
    },
},] 
```

网址.py

```
 url(r'^login/$', auth_views.login, {'template_name': 'registration/login.html'}, name='login'), 
```

**并将`registration`文件目录放在`templates`目录下！**

# java - Removing Asynchronous Updates on JButtons

> ID：15981025
> 
> 赞同：1
> 
> 时间：2013-04-12T21:19:40.510
> 
> 标签：java, swing, asynchronous, jbutton, repaint

I'm doing something very arbitrary, and mainly due to my OCD, but to make a long story short I'd like to remove the asynchronous update on JButtons and invoke repaint() when buttons need to be changed.

Is there any way to do this short of overwriting the overwritten imageUpdate method that JButton implements? I'm working on an assignment and can only turn in a limited number of files.

I appreciate any responses :)

Seeing as it's homework, and I'm in a very large class with some fairly strict regulation against cheating/copy-pasting, I don't feel comfortable with posting my sample code. I'd prefer if any answers were hypothetical! Thanks again for any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:27:55.627

If it is something you can do with JLabel or JPanel, or one of them with JButton, I would strongly suggest you do so.

JButton is unreliable when it comes to updating status.

If using JButton is absolutely necessary, can you explain what you want to make out of it in greater detail?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:28:40.390

通常，当想要控制组件绘制时，应该像这样覆盖**paintComponent**：

```
new javax.swing.JButton(){
    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);
        // things you want to do here
    }
}; 
```

要承担更大的控制权，您可以忽略对

```
super.paintComponent(g); 
```

但这样做需要你

> **必须遵守 opaque 属性，即如果此组件是不透明的，则必须将背景完全填充为不透明的颜色。如果您不尊重 opaque 属性，您可能会看到视觉伪影。**

如Java API 文档中[所述](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)。

# python - Is it bad form to intentionally trigger an excect block

> ID：15981028
> 
> 赞同：4
> 
> 时间：2013-04-12T21:19:44.257
> 
> 标签：python, exception-handling, try-catch

Is there a better way of doing something like this:

```
class SpecialError(Exception):
    pass

try:
    # Some code that might fail
    a = float(a)
    # Some condition I want to check
    if a < 0:
        raise SpecialError
except (ValueError, SpecialError):
    # This code should be run if the code fails
    # or the condition is not met
    a = 999. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:36:10.717

显式引发异常显然在广泛的用例中很有用。但是，当您提出专门要在本地范围内捕获的异常时，您可能正在谈论与您类似的一组狭窄案例。

总的来说也没有什么不妥。在任何给定的用例中，它可能是也可能不是最易读的代码，或者最能传达您的意图的代码，但这实际上是一种风格判断，而不是其他任何东西。

您可以毫无例外地执行此操作，但代价是轻微的 DRY 违规：

```
try:
    # Some code that might fail
    b = float(a)
    # Some condition I want to check
    if b < 0:
        b = 999.
except ValueError:
    # This code should be run if the code fails
    # or the condition is not met
    b = 999. 
```

……或者以稍微重新排序你的逻辑为代价：

```
b = 999.
if a >= 0:
    try:
        b = float(a)
    except ValueError:
        pass 
```

或者，不要创建`SpecialError`，只需使用`ValueError`. 由于它不会超出此块，并且您的代码无论如何都将它们视为相同，因此它不会添加任何内容：

```
try:
    b = float(a)
    if b < 0:
        raise ValueError
except ValueError:
    b = 999. 
```

使用您最喜欢的其中一个，没有人会抱怨。如果您最喜欢的那个不涉及 a `raise`，那么我想答案是，“是的，有更好的方法”；如果是这样，答案是，“不，这是最好的方法。” :)

# c# - EF Code First - 类型类型的属性

> ID：15981036
> 
> 赞同：0
> 
> 时间：2013-04-12T21:20:27.300
> 
> 标签：c#, ef-code-first

我有一个具有类型类型属性的对象：

```
public ScheduledJob
{
    public int ID { get; set; }
    public Type JobType { get; set; }
    public string JobParameters { get; set; }
} 
```

当我生成代码优先迁移时，我收到以下错误：

```
System.ArgumentNullException: Value cannot be null.
Parameter name: key
    at System.Collections.Generic.Dictionary`2.FindEntry(TKey key)
    at System.Collections.Generic.Dictionary`2.TryGetValue(TKey key, TValue& value)
    at System.Data.Entity.ModelConfiguration.Configuration.Mapping.SortedEntityTypeIndex.Add(EdmEntitySet entitySet, EdmEntityType entityType)
    at System.Data.Entity.ModelConfiguration.Configuration.Mapping.EntityMappingService.Analyze()
    at System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.ConfigureEntityTypes(DbDatabaseMapping databaseMapping, DbProviderManifest providerManifest)
    at System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.Configure(DbDatabaseMapping databaseMapping, DbProviderManifest providerManifest)
    at System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo)
    at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)
    at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
    at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
    at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
    at System.Data.Entity.Internal.LazyInternalContext.get_CodeFirstModel()
    at System.Data.Entity.Infrastructure.EdmxWriter.WriteEdmx(DbContext context, XmlWriter writer)
    at System.Data.Entity.Migrations.Extensions.DbContextExtensions.<>c__DisplayClass1.<GetModel>b__0(XmlWriter w)
    at System.Data.Entity.Migrations.Extensions.DbContextExtensions.GetModel(Action`1 writeXml)
    at System.Data.Entity.Migrations.Extensions.DbContextExtensions.GetModel(DbContext context)
    at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration configuration, DbContext usersContext)
    at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration configuration)
    at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.GetMigrator()
    at System.Data.Entity.Migrations.Design.ToolingFacade.GetPendingMigrationsRunner.RunCore()
    at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run() 
```

使这种情况发挥作用的最佳方法是什么？

**编辑@NSGaga 的帖子：**

整个模型（简化）是这样的：

所有作业对象都实现以下接口：

```
public interface IJob
{
    Guid ID { get; set; }
    void Run();
} 
```

每个作业都有自己的属性，用作一种参数：

```
public class ProcessMedia : IJob
{
    public Guid ID { get; set; }

    public int MediaContentID { get; set; }

    public void Run()
    {
        if(MediaContentID <= 0)
             throw new Exception("Missing parameter MediaContentID");
        //work
    }
} 
```

我将此模型用于异步作业处理系统，效果很好。现在，我正在尝试构建一个调度程序，在那里我可以给它一个作业类型和参数（序列化为字符串）并让它按间隔运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:12:44.300

看看我前几天发的这个帖子……

[我应该如何定义一个可以在 EF 中采用各种数据类型的字段？](https://stackoverflow.com/questions/15927829/how-should-i-define-a-field-that-can-take-various-data-types-in-ef/15933621#15933621)

**你为什么做这个 ？**

你几乎从不需要这样保存`Type`。

> @David 已经提到了该怎么做。

但我会进一步劝阻你走这条路——而是重新考虑一下。

EF 代码首先是关于拥有“强类型”实体。你可以有很好的“继承”工作，不需要保存类型。

如果您需要有限的 # 中的“枚举类型”之类的东西 - 使用枚举或 int。

您可以发布您的模型，如果可以更改，我会指出您。

* * *

我认为您可以根据需要使用继承。
制作不同类型的 Jobs 实体。

例如，在此处查看此解决方案（我之前的帖子）
[EF Code Firs 中的多个继承级别](https://stackoverflow.com/questions/15885279/multiple-inheritance-levels-in-ef-code-firs/15891061#15891061)
......如果有问题，请在您尝试某事时告诉我。

也许使用 TPH 更容易（就像它在那里一样），它们都存储在同一个表中 - 通常你会遇到更少的问题。

# wordpress - 使用 htaccess 为多个查询字符串参数重写 WordPress 的 URL

> ID：15981040
> 
> 赞同：1
> 
> 时间：2013-04-12T21:20:46.227
> 
> 标签：wordpress, apache, .htaccess, web

我们的主站点在 WordPress 上。我们有带有各种查询字符串参数的外部链接。不幸的是，其中一些会干扰 WordPress（例如，保留“s”）。

我想用 htaccess 设置重写规则，因为这就是我已经为网站做一些事情的方式。我的问题是我需要用新名称替换查询字符串参数，以免它们发生冲突。

可能的参数和映射：

```
'l' -> 'li'
's' -> 'si'
'g' -> 'gi'
'i' -> 'ii' 
```

这些可以按任何顺序出现，但基本上需要用上述映射替换。一个例子：

FROM [http://www.domain.com/register?l=something&s=something](http://www.domain.com/register?l=something&s=something)（顺序不可预测）

到 [http://www.domain.com/register?li=something&si=something](http://www.domain.com/register?li=something&si=something)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:49:03.990

在您已经拥有的任何规则**之前**的 htaccess 文件中，添加以下内容：

```
RewriteCond %{QUERY_STRING} ^(.*&)?s=(.*)$
RewriteRule ^(.*)$ /$1?%1si=%2 [L]

RewriteCond %{QUERY_STRING} ^(.*&)?l=(.*)$
RewriteRule ^(.*)$ /$1?%1li=%2 [L]

RewriteCond %{QUERY_STRING} ^(.*&)?g=(.*)$
RewriteRule ^(.*)$ /$1?%1gi=%2 [L]

RewriteCond %{QUERY_STRING} ^(.*&)?i=(.*)$
RewriteRule ^(.*)$ /$1?%1ii=%2 [L] 
```

# ruby-on-rails - 如何处理 Rails 用户选择的全局变量？

> ID：15981046
> 
> 赞同：0
> 
> 时间：2013-04-12T21:21:05.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图弄清楚如何处理选择“全局”变量的用户。

具体来说，我希望用户选择一个位置（即州或城市），然后向他们显示这些城市/州的所有帖子。我有一部分工作，但我真正想弄清楚的是我应该在哪里存储这样的变量以及如何存储。

从理论上讲，我知道我对代码的追求：

1.  用户选择位置（存储在某处/以某种方式）
2.  代码从数据库中提取具有该位置的所有帖子以进行显示

我看过一些看起来相似的帖子，比如[这个](https://stackoverflow.com/questions/9058309/rails-best-practice-for-user-configurable-global-attribute-defaults)和其他一些谈论`application.yml`变量的帖子，但如果我理解正确，这些似乎不是用户定义的。

我看到的另一个想法是将此变量存储在用户会话中，但我不希望所有访问者都必须登录才能使用此功能。

任何方向将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:37:51.360

您无需登录即可创建会话。我建议您使用没有登录的用户会话来处理这些东西，甚至可以使用地理定位 gem 自动获取城市/州，并让用户根据需要进行切换。

# php - 为什么使用 ajax 从 php 回显到另一个页面的 jquery 代码不起作用？

> ID：15981051
> 
> 赞同：0
> 
> 时间：2013-04-12T21:21:17.903
> 
> 标签：php, ajax, jquery, cakephp-ajaxhelper

我写了一个 Ajax 代码`admin.php`，`viewcollege.php`它回显了一个 jQuery 是不工作的`admin.php`。

**管理员.php：**

```
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
        <script src="jquery-1.9.1.min.js"></script>
        <script>
            var i = 1;
function showHint(str,num)
{

if (str.length==0)
  { 
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
  if(num=='1')
xmlhttp.open("GET","viewcol.php?q="+str,true);
 else if(num=='2')
  xmlhttp.open("GET","viewbranch.php?q="+str,true);
  else if (num=='3')
      {
      var k=document.getElementById("name").value;
      xmlhttp.open("GET","moduniv1.php?q="+str+"&r="+k,true);
      }
      else
          xmlhttp.open("GET","subdet.php?q="+str,true);
xmlhttp.send();
}
</script>
    </head>
    <body>
        <form action="addcol1.php" method="post">
        <?php
        $m=0;
include 'database.php' ;
$sql= "SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA = 'university'";                                                                                                                                                                                                                                                       $report = mysqli_query($con,$sql);
$row = mysqli_fetch_array($report);
//while($row = mysqli_fetch_array($report))
  //{
  echo "<!-- <input type='radio' name='".$row['TABLE_NAME']."' value='1'> -->University name: ".$row['TABLE_NAME'];
  echo "<br><br><input type='button' name='".$row['TABLE_NAME']."' id='".$row['TABLE_NAME']."' value='view college' onclick=showHint('".$row['TABLE_NAME']."','1')>" ;
  echo "   <input type='button' name='".$row['TABLE_NAME']."1' id='".$row['TABLE_NAME']."1' value='view branches' onclick=showHint('".$row['TABLE_NAME']."','2')>";
  echo " <input type='button' name='moduniv' id='moduniv' value='modify university' />" ;
    echo " <input type='button' name='subdet' id='subdet' value='subject details'onclick=showHint('".$row['TABLE_NAME']."','4') />" ;
  echo "<br><p name='pname' id='pname' style='display:none;'>Add Branch: <input type='text' name='name'  id='name'><br><input type='button' name='alteruniv' id='alteruniv' value='add' onclick=showHint('".$row['TABLE_NAME']."','3') />" ;
  echo "<script>
            $(document).ready(function()
        { $('#moduniv').click(function(){
                $('#pname').toggle();
                $('#txtHint').text('');
        });
        $('#".$row['TABLE_NAME']."').click(function(){
                $('#pname').hide();

        });
        $('#".$row['TABLE_NAME']."1').click(function(){
                $('#pname').hide();

        });
        $('#subdet').click(function(){
                $('#pname').hide();

        });

        })
           </script>";

//}
  mysqli_close($con);
?>
<br><br>
<p>Results: <span id='txtHint'></span></p>
            <!-- <input type="submit" value="delete selected universities"> -->

        </form>
    </body>
</html> 
```

viewcol.php：

```
 <?php
        include 'database.php' ;
$message=" ";
$q=$_GET["q"];
$sql="select `collegename` from `$q` " ;
$report = mysqli_query($con,$sql);
$i=0;
while($row = mysqli_fetch_array($report))
  {
  $message=$message."<br><input type='radio' name='college' value='".$row['collegename']."'>".$row['collegename']."<br>";
  echo $message;
  $i++;
  }

  echo $message;
  echo "<br><input type='button' name='addcol' id='addcol' value='addcol'><input type='button' name='delcol' id='delcol' value='delete col'>";
  echo "<script src='jquery-1.9.1.min.js'></script>";
  echo "<script> $(document).ready(function()
      { $('#addcol').click(function()
      {jQuery.get('addcol.php?q=',function(data,status)
      {
    $('#collegehint').text(data);
  });
      });
          $('delcol').click(function()
      {alert('working');

      jQuery.get('delcol.php?q='+$('#college').val()'&r='+".$q.",function(data,status)
      {
    $('#collegehint').text(data);
    showHint('".$q."','1');
  });
      }); 
      });
      </script>";
  echo "<br>Result: <p name='collegehint'></p>";

mysqli_close($con);
        ?> 
```

因此，从这两个文件中，当我单击“查看学院”时，管理员的按钮会从`viewcol.php`使用 Ajax 得到回显的代码，其中我回显了不起作用的 jQuery 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:01:39.277

您需要将 jquery 代码放入 ajax 调用的回调函数中。

# c++ - glReadPixels 在 opengl 中读取错误的颜色

> ID：15981058
> 
> 赞同：0
> 
> 时间：2013-04-12T21:22:11.000
> 
> 标签：c++, opengl

有一个简单的程序实际上来自一个更大的程序，把它放在一边，我试着做一个简单的像素读/写`Opengl`。
第一部分涉及读取像素颜色成功，但涉及写入像素然后读取它的第二个操作失败！。这是演示问题的程序：

```
#include <iostream>
#include <glut.h>

using namespace std;

void init(void)
{
    glClearColor(1.0,0.0,0.0,0.0); 
    glMatrixMode(GL_PROJECTION);
    gluOrtho2D(0.0,100.0,0.0,100.0);
}

void displayfnc()
{
    glClear(GL_COLOR_BUFFER_BIT);

    unsigned char current[3];
    int r,g,b;
    //x=0 to 6 is right
    glBegin (GL_POINTS);
    glColor3f (0.0,0.0,1.0);
    glVertex2i (6,0);
    glEnd();

    //works well.
    glReadPixels(6,0, 1, 1 , GL_RGB , GL_UNSIGNED_BYTE ,current);
    r = current[0];
    g = current[1];
    b = current[2];
    cout<<"read from x=6::::"<<"r:"<<r<<"g:"<<g<<"b:"<<b<<endl;

    //x =7 and other isnt right 
    glBegin (GL_POINTS);
    glColor3f (0.0,0.0,1.0);
    glVertex2i (7,0);
    glEnd();
    //the problem is here in the reading.why this happen?
    glReadPixels(7,0, 1, 1 , GL_RGB , GL_UNSIGNED_BYTE ,current);
    r = current[0];
    g = current[1];
    b = current[2];
    cout<<"Read from x=7::::"<<"r:"<<r<<"g:"<<g<<"b:"<<b<<endl;

    glFlush();
}

int  main(int argc, char** argv)
{

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(100,100);
    glutInitWindowPosition(0, 0);
    glutCreateWindow("BoundaryFill");
    init();
    glutDisplayFunc(displayfnc);
    glutMainLoop();
    return 0;
} 
```

这是输出：

![程序输出](https://i.stack.imgur.com/4PnBv.jpg)

是什么导致第二次读取过程失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:00:12.143

至少在我的系统`glutInitWindowSize(100,100)`上只是一个建议。 `glutGet(GLUT_WINDOW_WIDTH)`实际上返回`104`，而不是`100`您的`gluOrtho2D()`电话假设。

尝试使用动态投影：

```
#include <GL/glut.h>
#include <iostream>

using namespace std;

void displayfnc()
{
    glClearColor(1.0,0.0,0.0,0.0); 
    glClear(GL_COLOR_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    gluOrtho2D(0.0,w,0.0,h);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    unsigned char current[3];
    int r,g,b;
    //x=0 to 6 is right
    glBegin (GL_POINTS);
    glColor3f (0.0,0.0,1.0);
    glVertex2i (6,0);
    glEnd();

    //works well.
    glReadPixels(6,0, 1, 1 , GL_RGB , GL_UNSIGNED_BYTE ,current);
    r = current[0];
    g = current[1];
    b = current[2];
    cout<<"read from x=6::::"<<"r:"<<r<<"g:"<<g<<"b:"<<b<<endl;

    //x =7 and other isnt right 
    glBegin (GL_POINTS);
    glColor3f (0.0,0.0,1.0);
    glVertex2i (7,0);
    glEnd();
    //the problem is here in the reading.why this happen?
    glReadPixels(7,0, 1, 1 , GL_RGB , GL_UNSIGNED_BYTE ,current);
    r = current[0];
    g = current[1];
    b = current[2];
    cout<<"Read from x=7::::"<<"r:"<<r<<"g:"<<g<<"b:"<<b<<endl;

    glFlush();
}

int  main(int argc, char** argv)
{

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(100,100);
    glutInitWindowPosition(0, 0);
    glutCreateWindow("BoundaryFill");
    glutDisplayFunc(displayfnc);
    glutMainLoop();
    return 0;
} 
```

# javascript - HTML5画布字符跳转

> ID：15981062
> 
> 赞同：2
> 
> 时间：2013-04-12T21:22:41.890
> 
> 标签：javascript, html, animation, canvas

我尝试通过阅读本教程来制作角色动画：http: [//mrbool.com/html5-canvas-moving-a-character-with-sprites/26239](http://mrbool.com/html5-canvas-moving-a-character-with-sprites/26239)。让角色向左走很容易（“向右走”已经完成）。但是如何让角色跳跃（带动画）？我在想这样的事情：

```
 case 38:
        if (y + dy > HEIGHT){
            y += dy
        } 

    break; 
```

...但它只是向上移动角色（没有动画）。有人能帮我吗？一些代码示例将很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:57:11.420

你会得到这样的跳跃行为（在教程中使用相同的代码）

[JSFiddle](http://jsfiddle.net/YmmP8/11/)

```
var canvas;// the canvas element which will draw on
var ctx;// the "context" of the canvas that will be used (2D or 3D)
var dx = 50;// the rate of change (speed) horizontal object
var x = 30;// horizontal position of the object (with initial value)
var y = 150;// vertical position of the object (with initial value)
var limit = 10; //jump limit
var jump_y = y;
var WIDTH = 1000;// width of the rectangular area
var HEIGHT = 340;// height of the rectangular area
var tile1 = new Image ();// Image to be loaded and drawn on canvas
var posicao = 0;// display the current position of the character
var NUM_POSICOES = 6;// Number of images that make up the movement
var goingDown = false;
var jumping;

function KeyDown(evt){
    switch (evt.keyCode) {
        case 39:  /* Arrow to the right */
            if (x + dx < WIDTH){
                x += dx;
                posicao++;
                if(posicao == NUM_POSICOES)
                    posicao = 1;

                Update();
            }
            break;    
        case 38:
            jumping = setInterval(Jump, 100);
    }
}

function Draw() {      
    ctx.font="20px Georgia";
    ctx.beginPath();
    ctx.fillStyle = "red";   
    ctx.beginPath();
    ctx.rect(x, y, 10, 10);
    ctx.closePath();
    ctx.fill();   
    console.log(posicao);
}
function LimparTela() {
    ctx.fillStyle = "rgb(233,233,233)";   
    ctx.beginPath();
    ctx.rect(0, 0, WIDTH, HEIGHT);
    ctx.closePath();
    ctx.fill();   
}
function Update() {
    LimparTela();    
    Draw();
}

var Jump = function(){
    if(y > limit && !goingDown){
        y-=10;
        console.log('jumping: ' + y);
    } else{
    goingDown = true;
        y +=10;
        if(y > jump_y){
            clearInterval(jumping);
            goingDown = false;
        }

    }
}

function Start() {
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d");
    return setInterval(Update, 100);
}

window.addEventListener('keydown', KeyDown);
Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:30:09.413

There's no one right answer to this question, and unless you find a game-design library, there's no simple one, either. Your problem is that you're moving the character instantaneously in response to input, but a jump requires movement over time. You'll have to either find a moving sprites library - I don't have one in particular to recommend, but I'm sure Google has several - or set up something yourself that runs every so many milliseconds and updates the character's position and some sort of velocity variable.

Edit: Looking at that tutorial, the simplest solution that comes to mind is to put your animation code inside of `Update()`, like so:

```
function Update() {
    LimparTela();
    Animate();
    Draw();
} 
```

Inside of `Animate()`, you should keep track of the character's height and vertical momentum. If the momentum is positive, increase the y position a little, otherwise decrease it a little. Either way, reduce momentum a bit. Add something to keep the character from going through the floor, and have the up key set the character's momentum to be positive if he's on the floor.

Note that this is an incredibly bare-bones solution, but for a basic tutorial it'll do the job.

# bash - 修改一个班轮

> ID：15981063
> 
> 赞同：0
> 
> 时间：2013-04-12T21:22:44.300
> 
> 标签：bash, scripting, awk, grep

我拼凑了一个单线，因此我可以快速找到服务器上存在中等错误的任何驱动器。这就像这样：

```
/var/lib/einarc/tools/adaptec_arcconf/cli getlogs 1 device tabular | egrep 'serialNumber|mediumErrors|vendorID' | awk '{$2="";print}' | awk '/^vendorID  WDC/{p=1}p' | grep -C1 'mediumErrors  [1-9]' 
```

虽然这在具有 Western Digital 驱动器的服务器上工作得非常好，但也有一些是 Seagate 的，因此，一个班轮不能在它们上工作，因为：

```
awk '/^vendorID  WDC/{p=1}p' 
```

两台服务器上表格日志的原始输出如下所示。

```
Western Digital:

  driveErrorEntry             
     smartError ....................... false
     vendorID ......................... LSI CORP
     serialNumber ..................... 
     wwn .............................. 41121562336217ea
     deviceID(T:L) .................... 0(0:0)
     productID ........................ SAS2X26 
     numParityErrors .................. 0
     linkFailures ..................... 0
     hwErrors ......................... 0
     abortedCmds ...................... 10
     mediumErrors ..................... 0
     smartWarning ..................... 0
      driveErrorEntry             
         smartError ....................... false
         vendorID ......................... WDC     
         serialNumber ..................... WD-WCAW25942651
         wwn .............................. 0000000000000000
         deviceID(T:L) .................... 13(13:0) 
```

希捷：

```
Controllers found: 1

   ControllerLog                  
      controllerID ..................... 0
      type ............................. 0
      time ............................. 1365801225
      version .......................... 3
      tableFull ........................ false

      driveErrorEntry             
         smartError ....................... false
         vendorID ......................... LSI CORP
         serialNumber ..................... 
         wwn .............................. 411313200032c06a
         deviceID(T:L) .................... 0(0:0)
         productID ........................ SAS2X26 
         numParityErrors .................. 0
         linkFailures ..................... 0
         hwErrors ......................... 0
         abortedCmds ...................... 12
         mediumErrors ..................... 0
         smartWarning ..................... 0 
```

我希望得到的输出如下：

```
serialNumber  WD-WMAYP5242602
mediumErrors  457
vendorID  WDC
serialNumber  WD-WMAYP3262235
mediumErrors  2 
```

我想确保我没有过滤掉重要信息，因为一台服务器没有 WDC 驱动器，但同时我也不想要任何不直接涉及硬盘驱动器的信息 - 即控制器无论安装哪种驱动器，都应忽略输出。

谁能建议一种可行的方法（在bash中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:10:11.753

这是我的解决方案。

```
/var/lib/einarc/tools/adaptec_arcconf/cli getlogs 1 device tabular | egrep 'serialNumber|mediumErrors|deviceID' | awk '{$2="";print}' | grep -C2 'mediumErrors  [1-9]' 
```

我稍微修改了它以查找 deviceID 而不是 vendorID，因为无论如何这更有用，然后我可以简单地删除过滤 WDC 驱动器的 awk。-C2 而不是 -C1 还可以确保即使输出的格式与预期的略有不同，我仍然可以获得所有数据。

# c - C 指针：struc* A、struct *A 和 struct *A 有什么区别？

> ID：15981068
> 
> 赞同：-1
> 
> 时间：2013-04-12T21:23:06.070
> 
> 标签：c, pointers, struct

我正在做一些研究以更好地理解 C 中的指针，但我很难理解这些：'struct* A' 是结构上的指针吗？那么什么是'struct *A'？而且我看到有人写'int const * a'，这是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T21:25:37.987

> `struc* A`和`struct *A`有什么区别`struct * A`？

他们是等价的（错了）。C 是一种自由格式的语言，空格无关紧要。

> 是`struct* A`结构上的指针吗？

不，它（仍然）是一个语法错误（`struct`是一个保留关键字）。如果您在那里替换一个有效的结构名称，那么它将是一个，是的。

> `int const * a`， 这是什么意思？

这声明`a`为指向`const int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T21:25:37.860

`struct *A`,都是一样的，`struct* A`而且`struct * A`都是错误的，因为你错过了结构的名字。

`int const *a`与 a 相同，`const int *a`表示指向 const 整数的指针。

Aside:`int * const a`是不同的，它意味着 const 指针和一个非 const 整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:25:12.263

它们都是相同的。

`struct *A`= `struct* A`= `struct*A`= `struct * A`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T23:36:19.863

正如其他人已经提到的那样，`struct * A`等等都是不正确但相同的。

但是，可以通过以下方式创建结构和指针：

```
/* Structure definition. */
struct Date
{
    int month;
    int day;
    int year;
};

/* Declaring the structure of type Date named today. */
struct Date today;

/* Declaring a pointer to a Date structure (named procrastinate). */
struct Date * procrastinate;

/* The pointer 'procrastinate' now points to the structure 'today' */
procrastinate = &today; 
```

另外，对于关于声明指针的不同方式的第二个问题，“什么是`int const * a`？”，这是我改编自**Stephen G. Kochan 的 Programming in C**的一个示例：

```
char my_char = 'X';

/* This pointer will always point to my_char. */
char * const constant_pointer_to_char = &my_char;
/* This pointer will never change the value of my_char.   */  
const char * pointer_to_a_constant_char = &my_char;
/* This pointer will always point to my_char and never change its value. */
const char * const constant_ptr_to_constant_char = &my_char; 
```

当我第一次开始时，我会发现从右到左阅读定义很有帮助，用“只读”这个词代替“const”。例如，在最后一个指针中，我会简单地说，“constant_ptr_to_constant_char 是指向只读字符的只读指针”。在您上面的问题中，`int const * a`您可以说，“'a' 是指向只读 int 的指针”。看起来很愚蠢，但它确实有效。

有一些变化，但是当你遇到它们时，你可以通过在这个网站上搜索找到更多的例子。希望有帮助！

# javascript - 传单：强制从图层扩展重新绘制地图

> ID：15981072
> 
> 赞同：1
> 
> 时间：2013-04-12T21:23:20.100
> 
> 标签：javascript, geospatial, leaflet

我目前正在开发 L.TileLayer 类的扩展，并且我想从初始化方法中调用地图上的重绘。我的代码如下所示：

```
L.TileLayer.NewLayerType = L.TypeLayer.extend({
    _newLayerType: null,
    initialize: function(file, options) {
        var foo = new Foo(file, this, function(scope) {
            ...
            scope.redraw();
        });
        L.Utils.setOptions(this, options);
    },
    ...
}); 
```

问题是， scope.redraw() 调用不起作用，在调用 scope._map.zoomIn() 和 scope._map.zoomOut() 之后，刷新地图的任何其他方式也不起作用。重绘是否因为范围是图层扩展而不起作用？做这个的最好方式是什么？

谢谢

# php - 使用 PHP 为单选、选择或复选框输入赋值

> ID：15981073
> 
> 赞同：0
> 
> 时间：2013-04-12T21:23:22.613
> 
> 标签：php, forms, input

我有一个登记表。当用户在输入无效的优惠券代码后提交表单时，页面会重新加载，我会再次显示表单以及他们输入的所有数据。输入字段很容易，但我想不出一种简单的方法来处理单选、复选框和选择。

例如我有：

```
<input type="radio" name="gender" value="male" />
<input type="radio" name="gender" value="female" /> 
```

我的 PHP 变量 $gender 包含“男性”。但是如何选择带有“男性”的收音机？

我的选择和复选框也有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:28:29.907

For a small number of options you could use a ternary operator like this.

```
<input type="radio" name="gender" value="male" <?php echo ($gender == 'male') : 'selected="selected"' : '';?> />
<input type="radio" name="gender" value="female" <?php echo ($gender == 'female') : 'selected="selected"' : '';?> /> 
```

Not the most subtle way but it will work. For more complicated situations its advisable to use a DOM parser like [DOMDocument](http://php.net/manual/en/class.domdocument.php) etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T08:57:21.377

```
//retrive gender and checkbox value in edit form
$gender=$row['gender'];
$chkhobby=$row['chkhobby'];
<tr>
                    <th>GENDER</th>
                    <td>
                            Male<input type="radio" name="gender" value="1" <?php echo ($gender== '1') ?  "checked" : "" ;  ?>/>
                            Female<input type="radio" name="gender" value="0" <?php echo ($gender== '0') ?  "checked" : "" ;  ?>/>

                    </td>
                </tr>
                <tr>
                    <th>Hobbies</th>
                    <td>
                        <pre><?php //print_r($row);

                            $hby = @explode(",",$row['chkhobby']);
                            //print_r($hby);
                        ?></pre>
                        read<input id="check_1" type="checkbox" name="chkhobby[]" value="read" <?php if(in_array("read",$hby)){?> checked="checked"<?php }?>>
                        write<input id="check_2" type="checkbox" name="chkhobby[]" value="write" <?php if(in_array("write",$hby)){?> checked="checked"<?php }?>>
                        play<input id="check_4" type="checkbox" name="chkhobby[]" value="play" <?php if(in_array("play",$hby)){?> checked="checked"<?php }?>>

                    </td>
</tr>
//update
$gender=$_POST['gender'];
        $chkhobby = implode(',', $_POST['chkhobby']); 
```

# jquery - 监听从外部文件加载到 div 中的元素的事件

> ID：15981077
> 
> 赞同：1
> 
> 时间：2013-04-12T21:23:33.697
> 
> 标签：jquery, html, events

我正在做一个结合`HTML`和`JQuery`. 有一个事件会导致将 a 替换为来自外部 html 文件`div`的新文件（使用））。`div``load('some.html #someDiv'`

到目前为止一切顺利，当我尝试收听`click`作为新的一部分的 img 的事件（如果重要）时，问题就开始了`div`。

我猜这与我没有在`ready`函数中定义该 img 的单击事件这一事实有关，因为该图像当时在页面中不存在。

无论如何，我想不出任何办法来解决这个问题似乎不起作用..感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:26:00.293

使用[**.on()**](http://api.jquery.com/on/)

```
$(document).on('click','#newDiv img',function(){

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:25:32.500

使用`.on()` [http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).on('click','.someNevDiv img', function() {
    // Code on click
}); 
```

使用您的代码：

```
$("#newDiv").click(function() { onNewDivClicked(); }); 
```

应该 ：

```
$(document).on('click', '#newDiv', function() {
    onNewDivClicked();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:28:52.473

Try binding the click after you've added the element:

i.e. according to jquery docs here: [http://api.jquery.com/load/#callback-function](http://api.jquery.com/load/#callback-function)

You should be able to do something like this:

```
$('#result').load('ajax/test.html', function() {
  $('#result img').bind( 'click', function(){
        alert( 'this is fired on a click event on images inside of #result' );
    });
}); 
```

# ruby-on-rails - Rails 获取最新更新的行

> ID：15981078
> 
> 赞同：1
> 
> 时间：2013-04-12T21:23:36.130
> 
> 标签：ruby-on-rails, ruby, activerecord

我有这样的数据库表结构：

编号 | currency_list_id | 方向标识 | 价值 | 更新时间

我有这样的数据：

```
1 | 1 | 1 | 8150 | 09-08-2010 01:00:00
1 | 1 | 2 | 8250 | 09-08-2010 01:00:00
1 | 2 | 1 | 8150 | 06-08-2010 01:00:00
1 | 2 | 2 | 8150 | 06-08-2010 01:00:00
1 | 1 | 1 | 8150 | 09-08-2010 15:00:00
1 | 1 | 2 | 8250 | 09-08-2010 15:00:00 
```

所以交换器中的货币几乎每天都设置，并且一天可以设置不止一次..但也可以在几天前设置一个......而且我必须获取所有实际数据..

在rails（ruby）中我如何只能获取最后的实际数据？

在我的示例中，结果将是：

```
1 | 2 | 1 | 8150 | 06-08-2010 01:00:00
1 | 2 | 2 | 8150 | 06-08-2010 01:00:00
1 | 1 | 1 | 8150 | 09-08-2010 15:00:00
1 | 1 | 2 | 8250 | 09-08-2010 15:00:00 
```

这个怎么做？

我这样尝试：

```
@currencies = CurrencyValue.find(:all, :conditions => {:currency_list_id => id}, :order => :updated_at) 
```

但是然后我将通过排序获取一些currency_list_id 的所有数据，但是如何仅获取最后两个值？如何获取最后 2 个有序行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:27:26.470

```
@currencies = CurrencyValue.find(:all, :conditions => {:currency_list_id => id, :order => :updated_at}).last(2) 
```

我认为 ：）。现在无法检查这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:58:02.390

我认为你需要的是一个`GROUP_BY`. 这里还有另一个问题可以解释：

[如何使用 GROUP BY 获取每个组的最新记录？](https://stackoverflow.com/questions/10999522/how-to-get-the-latest-record-in-each-group-using-group-by)

# asp.net-mvc-3 - jquery datepicker 在 asp.net mvc3 中不起作用

> ID：15981079
> 
> 赞同：0
> 
> 时间：2013-04-12T21:23:45.263
> 
> 标签：asp.net-mvc-3, jquery-ui-datepicker

jquery datepicker 不工作。我不知道为什么。每个人都在做同样的事情，同样的代码，但我的不工作。谁能告诉我的问题在哪里，我的代码如下 -

Javascript：

```
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
    $(function () {
        $('#dtpStartDate').datepicker({ dateFormat: "dd/MM/yy" });
    });
</script> 
```

html 视图中的代码：

```
<div class="row">
    <div class="span3">
        <div class="text-left">
            @Html.LabelFor(model => model.StartDate)
        </div>
    </div>
    <div class="span3">
        <div class="text-left">
            @Html.TextBoxFor(model => model.StartDate, new { @id = "dtpStartDate" })
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:25:40.157

只是在顶部添加jquery.js是解决方案的关键，这个东西放在_layout页面的底部。新序列是——

> 脚本 src="@Url.Content("~/Scripts/jquery.js")" type="text/javascript"> 脚本 src="@Url.Content("~/Scripts/jquery-1.5.1.js" )" type="text/javascript"> 脚本 src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript">

# c# - 实体框架 - 保存对分离实体所做的更改

> ID：15981090
> 
> 赞同：2
> 
> 时间：2013-04-12T21:24:32.260
> 
> 标签：c#, entity-framework, entities

假设已对 EF 4 中的分离实体进行了更改。如果我们想在重新附加实体时保存这些更改，是否可以使用 ApplyCurrentValues 执行此操作而无需查询数据库以获取原始实体？我不这么认为，但我希望有人能证实这一点。

```
using (var ctx = new BAEntities())   
{
var firstCust = (from c in ctx.Contacts select c).First();
Console.WriteLine(firstCust.FirstName);
ctx.Contacts.Detach(firstCust);

firstCust.FirstName = "Modified Value";
ctx.Contacts.Attach(firstCust);
ctx.ApplyCurrentValues("Contacts", firstCust);//Does not work

//ctx.ObjectStateManager.ChangeObjectState(firstCust, EntityState.Modified); //Works with that line
            ctx.SaveChanges( );
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T12:13:43.580

我可以证实你的猜测。这种方式行不通。

当您`Attach`使用实体作为参数调用时，EF 会将实体添加到 state 的上下文中`Unchanged`。基本上，您是在告诉 EF，`Attach`该实体当时拥有的所有属性值都代表数据库中的当前值。

`ApplyCurrentValues`是一种“自动映射器”，它只是将您传入的对象的属性值复制到`ApplyCurrentValues`具有相同键的附加实体。此副本基于属性名称发生。

如果附加实体的属性值与传递给`ApplyCurrentValues`EF 的对象的属性值不同，则将该属性标记为`Modified`. 如果不是状态保持不变`Unchanged`。显然，使用您的程序，所有属性状态都将保持不变，并且没有任何内容写入数据库。

理论上你可以做一些疯狂的事情来让它像这样工作：

```
firstCust.FirstName = "Modified Value";
var dummyCust = new Contact { FirstName = "UnlikelyNameThatWillNeverOccur" };
ctx.Contacts.Attach(dummyCust);
ctx.ApplyCurrentValues("Contacts", firstCust); 
```

在这里，该`FirstName`属性将被标记为`Modified`。但是您必须对每个属性都执行此操作，结果将与将整个实体的状态设置`Modified`为您在注释代码行中所做的相同。

您可以顺便将单个属性设置为`Modified`：

```
ctx.Contacts.Attach(firstCust);
ctx.ObjectStateManager.GetObjectStateEntry(firstCust)
    .SetModifiedProperty("FirstName"); 
```

这将向仅设置列值的数据库发送一条 UPDATE 语句`FirstName`（同时将整个实体的状态设置为`Modified`将创建一条 UPDATE 语句，将*所有*列值设置为当前属性值）。

# javascript - 嵌套的 JSON 值不绑定 MVC

> ID：15981091
> 
> 赞同：1
> 
> 时间：2013-04-12T21:24:35.757
> 
> 标签：javascript, asp.net, .net, asp.net-mvc-3, model-binding

我在客户端 JavaScript 中有一个游戏对象，在发送到服务器之前看起来像这样：

![客户端](https://i.stack.imgur.com/pjodF.png)

一秒钟后它是服务器端，请注意所有属性都已填充，并且问题列表中填充了正确数量的问题，但是每个问题的属性为空，而在客户端它们具有正确的值。

![服务器端](https://i.stack.imgur.com/BtwBc.png)

这是模型的代码：

```
public class Game
{
    public Game()
    {
        Questions = new List<Question>(5);
    }
    public int GameID { get; set; }
    public Guid UserID { get; set; }
    public Guid CurrentGameID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public IEnumerable<Question> Questions { get; set; }
}

public class Question
{
    public int ID { get; set; }
    public string Text { get; set; }
    public IEnumerable<int> Answers { get; set; }
    public int SelectedAnswer { get; set; }
} 
```

这是我将对象发送回服务器的方式：

```
// Send completed game back to server
$.post("Games/CompleteGame", currentGame, function (results)
{
    // display results to user
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:48:53.783

基于 Ek0nomik 询问内容类型的评论，我重写了我的 ajax 调用以将 contentType 设置为 json：

```
$.ajax(
    {
        url: "Games/CompleteGame",
        type: "POST",
        data: JSON.stringify(currentGame),
        contentType: "application/json",
        success: function (results)
        {
            // show results to user...
        } 
```

事实证明，这就是让它工作所需的一切。

# javascript - Phonegap添加相同键的多个FileTransfer参数，但值不同

> ID：15981092
> 
> 赞同：0
> 
> 时间：2013-04-12T21:24:40.520
> 
> 标签：javascript, cordova, mobile, query-string

我正在使用 phonegap 将文件上传到服务器，它运行良好，但有一个例外......

```
var options = new FileUploadOptions();

options.fileKey = "file";
options.fileName = file.name;

var params = new Object();

if($scope.SelectedNames.length >0){
params.shareWith = SelectedNames[0].id;
//params.shareWith = [$scope.SelectNames[0].id,$scope.SelectNames[1].id]; 
}

options.params = params;

var ft = new FileTransfer();          
ft.upload(file.toURL(), "https://mysupersecret.url.com", win, fail, options, true);
//the rest of it 
```

问题是有时我有多个“SelectedNames”需要添加到 shareWith 参数中。如果我尝试将 .shareWith 设置为数组，它不起作用。我曾尝试自己创建 POST 查询字符串，但这也不起作用。显然只是调用一个附加的`params.shareWith='xyz'`只是覆盖第一个值。

想法？

我希望它使用以下查询字符串提交它：

?shareWith=value1&shareWith=value2&shareWith=value3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:00:56.347

PhoneGap 中 FileTransfer 的当前实现使这很棘手，但这是可能的。问题是帖子中[multipart/form-data](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)的格式。为了让服务器正确地将参数解释为多值，原始请求负载需要具有一系列具有相同名称的 Content-Disposition 行，如下所示：

```
--AaB03x
   Content-Disposition: form-data; name="shareWith[]"

   Joe

--AaB03x
   Content-Disposition: form-data; name="shareWith[]"

   Jim

--AaB03x
   Content-Disposition: form-data; name="shareWith[]"

   Jane 
```

名称中的数组表示法表示该参数是多值的，服务器会按照您想要的方式将此参数解释为值数组。

不幸的是，这是 Cordova 库中的 Objective-C 代码，它将数据附加到请求负载中：

```
 NSDictionary* options = [arguments objectAtIndex:5 withDefault:nil];
    ...
    for (NSString* key in options) {
            ...
            [postBodyBeforeFile appendData:[[NSString stringWithFormat:
                @"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", key] 
                dataUsingEncoding:NSUTF8StringEncoding]]; 
```

它所做的只是遍历您的 params 对象（它需要一个类似的 JS 对象`{ param1: 'one', param2: 'two' }`）并将每个 param 对象键传递给此方法调用中的键。检查值是否是一个数组是不够聪明的，如果是，则附加多个 Content-Disposition 行 - 正如您从 for 语句中看到的那样，它假定每个键只是一个字符串。而且由于选项字典不能有多个具有相同键的值，因此不能使用具有相同名称的 Content-Disposition 行创建表单，这是您需要提交多值参数的方式。

但是，您应该能够通过自己构建表单名称以不太优雅的方式实现您想要的，如下所示：

```
params = {}
params['shareWith[0]'] = 'Joe';
params['shareWith[1]'] = 'Jim';
params['shareWith[2]'] = 'Jane'; 
```

服务器上的结果可能与上面的略有不同，但这应该可以帮助您完成大部分工作。希望这将在未来得到解决，并且您将能够通过 FileTransfer 更合理地使用多值参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:33:10.653

如何创建一个队列以从 SelectedNames 数组上传？一个完成后，将它从数组中移出，看看是否还有剩余。示范：

```
// Start the queue
if(SelectedNames.length >0)
{
    runQueue();
}

function runQueue()
{
    if(SelectedNames.length > 0)
    {
        var options = new FileUploadOptions();

        options.fileKey = "file";
        options.fileName = file.name;

        var params = new Object();
        params.shareWith = SelectedNames[0].id;
        options.params = params;

        SelectedNames.shift();

        var ft = new FileTransfer();
        ft.upload(file.toURL(), "https://mysupersecret.url.com", runQueue, fail, options, true);

    }
    else
    {
        // ALL DONE
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:34:16.257

我会建议这样的事情：

```
params.shareWith0 = value1;
params.shareWith1 = value2;
params.shareWith2 = value3;
//...
params.shareWithCount = xy.Length; 
```

或者您可以使用从未出现在您的值中的分隔符。

```
params.shareWith = [value1, value2, value3].join("~"); 
```

另一个更不干净的选择是使用 jQuerys [param()](http://api.jquery.com/jQuery.param/)。

```
$.param({shareWith: [value1, value2, value3]}) 
```

# c++ - 为具有引用成员变量的类创建赋值运算符

> ID：15981094
> 
> 赞同：1
> 
> 时间：2013-04-12T21:25:25.230
> 
> 标签：c++

我一直在阅读很多内容，如果您需要赋值运算符，则不要使用引用成员变量。我知道您不能重新分配引用，但由于您无法重新分配引用本身，因此您不能通过在赋值运算符中重新分配该引用变量中的所有数据来解决这个问题吗？

像这样的东西：

```
class MyClass {
   AnotherClass& someObject;
   ... 

public:
   ...
   MyClass& operator= (const MyClass& that) {
      if (&that != this) {
         this.someObject.member1 = that.someObject.member1;
         this.someObject.member2 = that.someObject.member2;
      }
      return *this;
   }
} 
```

这是否有问题，或者尝试以这种方式进行分配可能会出现问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:55:35.230

是的，您可能会遇到问题。假设您有两个`MyClass`实例 A 和 B，它们共享同一个`AnotherClass`对象。如果您为 A 分配不同的值，那么您将破坏 B 的成员。

这个变量是干什么用的？

*   如果多个 MyClass 需要共享和修改同一个 AnotherClass，则使用`AnotherClass *`. 然后只需在分配时重定向您的指针。不过，您必须跟踪有多少 MyClasses 拥有 AnotherClass，因此要么在 AnotherClass 中跟踪它，要么使用某种“智能”指针。

*   如果 AnotherClass 太大而无法存储 MyClass 的许多副本，或者有很多很多 MyClass 的实例，那么 a`const AnotherClass *`会更好。同样，您必须跟踪存在多少指向它的指针，这样您就不会泄漏内存。

*   如果它很小，那么 MyClass 就很少，并且没有必要在它们之间共享它：使用普通对象。性能影响可能可以忽略不计。

# windows-mobile - Windows CE 点击错误

> ID：15981096
> 
> 赞同：0
> 
> 时间：2013-04-12T21:25:35.847
> 
> 标签：windows-mobile, windows-ce

在我的应用程序中，我遇到了一些在表单之间切换时存在短暂延迟的情况，尽管我短暂地显示了一个等待光标，但用户在此转换过程中对尚未显示的表单进行的任何点击。有没有其他人注意到这个问题，如果有，你是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:14:32.190

[这与在刷新面板时避免单击事件](https://stackoverflow.com/questions/13448825/avoid-click-event-while-panel-is-refreshing/13475364#13475364)和[在加载 Windows 窗体后调用服务](https://stackoverflow.com/questions/15972921/invoke-a-service-after-windows-forms-loading)类似的问题

您必须暂时忽略新表单中的消息。紧凑的框架中没有“形式是真正的可见”。

您可以禁用表单中的所有控件，并设置一个计时器，在延迟一段时间后启用这些控件，这或多或少可以确保表单在不完全可见时不会接收输入。

抱歉，没有比使用延迟更好的解决方案了，因为没有可用于验证表单已完全加载且对用户可见的事件。

# python - Windows 上 Python 3 中的 pyvenv 脚本安装在哪里？

> ID：15981111
> 
> 赞同：10
> 
> 时间：2013-04-12T21:26:38.037
> 
> 标签：python, windows, python-3.x, virtualenv, python-venv

[阅读 PEP 405](http://www.python.org/dev/peps/pep-0405/)中的以下声明后

> 还提供了一个 pyvenv 安装脚本以使这更方便：
> 
> `pyvenv /path/to/new/virtual/environment`

我试图创建一个新的虚拟环境，但失败了；

```
C:\>python --version
Python 3.3.1
C:\>pyvenv myvenv
'pyvenv' is not recognized as an internal or external command,
operable program or batch file. 
```

显然`pyvenv`脚本没有安装到`Scripts`通常添加到`PATH`环境变量中的文件夹中，从而可以在命令行上轻松运行此类脚本。

PEP 405 是错误的，是不是在 Python 3.3 中没有正确实现，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T21:26:38.037

看起来`pyvenv`脚本放置在`Tools\Scripts`Python 安装文件夹 ( `sys.prefix`) 内的子文件夹中。似乎将其复制到`Scripts`子文件夹是一个好主意，因为它允许简单地`pyvenv`从命令行键入（假设`Scripts`文件夹已经在`PATH`. 由于此脚本没有`exe`包装器，因此必须确保

*   `.py`扩展名被添加到`PATHEXT`环境变量中，以便 Windows`PATH`在命令提示符下键入脚本名称时找到放置在其中的 Python 脚本。
*   `.py`扩展与 Python 可执行文件或`py.exe`从 Python 3.3 开始可用的 Python 启动器 ( )相关联

或者，一个人可以只输入`python -m venv`而不是`pyvenv`自己省去所有的麻烦......

相关的 Python 错误[17480](http://bugs.python.org/issue17480) - *pyvenv 应该安装在 Windows 上更明显的地方*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-27T09:54:52.973

改为使用`python -m venv someenvname`。

`PATH`此外，如果您`python.exe`仅将系统范围用于创建虚拟环境，则没有充分的理由添加 python 文件夹。

# c++ - 在 C++ 中将二进制 Char 数组转换为整数和双精度数组

> ID：15981115
> 
> 赞同：-3
> 
> 时间：2013-04-12T21:26:42.410
> 
> 标签：c++, c, binary, char, type-conversion

我有一个包含二进制格式数字的 char 数组。数字采用以下格式：整数、整数和双精度数。在 C++ 中将 char 数组转换为整数数组和双精度数组的最佳和最快方法是什么？现在我正在使用以下代码，它工作正常，但我认为它不够高效！

```
#define SIZE    5000
char chBuf[SIZE];  // contains double numbers in binary format
char dBuf[sizeof(double)];
char IBuf[sizeof(int)];
int count =0;
for (int i=0; i<numberofdata; i++) 
{       
   for (int j=0; j<4; j++)  IBuf[j] = chBuf[j + count];
   Integer[i] =  *(integer*) (IBuf);
   count += sizeof(integer);

   for (int j=0; j<4; j++)  IBuf[j] = chBuf[j + count];
   Integer[i+1] =  *(integer*) (IBuf);
   count += sizeof(integer);

   for (int j=0; j<8; j++)  dBuf[j] = chBuf[j + count];  
   Double[i] =  *(double*) (dBuf);
   count += sizeof(double);
} 
```

我认为复制部分到 dBuf[] 和 IBuf[] 不应该是必要的，但我不知道如何摆脱它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:44:00.327

无需将数据复制到单独的缓冲区。此外，您需要注意不要覆盖您的`Integer`值。

```
int s = 2 * sizeof(int) + sizeof(double);
for (int i = 0; i < numberofdata; i++) {       
   Integer[2 * i] =  *(int*) (chBuf + s * i);
   Integer[2 * i + 1] =  *(int*) (chBuf + s * i + sizeof(int));
   Double[i] =  *(double*) (chBuf + s * i + 2 * sizeof(int));
} 
```

# javascript - 尝试使用我的收藏时获取“未定义不是函数”

> ID：15981117
> 
> 赞同：1
> 
> 时间：2013-04-12T21:26:55.747
> 
> 标签：javascript, backbone.js, requirejs

我正在使用 RequireJS 来处理我的所有依赖项。

所以这是我的观点：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'bootstrap',
    'collections/InstitutionsCollection'
], function($, _, Backbone, InstitutionsCollection){

    var InstitutionsView = Backbone.View.extend({
        render: function() {
            var institutions = new InstitutionsCollection();

            institutions.fetch({
                success: function() {
                    console.log("success!");
                }
            });
        }
    });

    return InstitutionsView;
}); 
```

此行引发错误： `var institutions = new InstitutionsCollection();`

这是我的收藏：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/InstitutionModel'
], function($, _, Backbone, InstitutionModel){

    var InstitutionsCollection = Backbone.Collection.extend({
        model: InstitutionModel,
        url: '/institutions/'
    });

    return InstitutionsCollection;
}); 
```

如果你需要它，这是我的模型：

```
define([
    'jquery',
    'underscore',
    'backbone'
], function($, _, Backbone){

    var InstitutionModel = Backbone.Model.extend({

    });

    return InstitutionModel;
}); 
```

我已经盯着它看了一会儿，我只是想不通它为什么会抛出那个错误。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:58:42.767

正如其他人所建议的那样，您的`define`回调参数顺序不正确匹配。我想指出有助于缓解这种常见错误的糖语法：

```
define(function(require) {
    var $ = require('jquery');
    var _ = require('underscore');
    var Backbone = require('backbone');
    var InstitutionsCollection = require('collections/InstitutionsCollection');
    require('bootstrap');

    var InstitutionsView = Backbone.View.extend({
        // Code
    });

    return InstitutionsView
}); 
```

[在文档中](http://requirejs.org/docs/whyamd.html#sugar)阅读有关它的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T21:37:02.117

当您定义您的时，`view`您正在导入引导程序并将其映射到`InstitutionsCollection`require 回调中的参数。尝试按如下方式更新您的代码：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'collections/InstitutionsCollection',
    'bootstrap'
], function($, _, Backbone, InstitutionsCollection){

    var InstitutionsView = Backbone.View.extend({
        render: function() {
            var institutions = new InstitutionsCollection();

            institutions.fetch({
                success: function() {
                    console.log("success!");
                }
            });
        }
    });

    return InstitutionsView;
}); 
```

保持映射同步真的很痛苦，而且在扫描代码时很容易被忽略！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T21:36:22.223

您正在映射`bootstrap`到`InstitutionsCollection`. 将其更改为：

```
define([
  'jquery', 'underscore', 'backbone', 'collections/InstitutionsCollection',           
  'bootstrap'
], function($, _, Backbone, InstitutionsCollection){}); 
```

# wif - MachineKeySessionSecurityTokenHandler 和会话令牌在应用程序重新启动之间过期

> ID：15981121
> 
> 赞同：7
> 
> 时间：2013-04-12T21:27:10.087
> 
> 标签：wif, claims-based-identity

在我的 MVC 应用程序中，我使用表单身份验证对用户进行身份验证，然后`System.IdentityModel.Services.SessionAuthenticationModule`保持会话。

虽然我还没有到必要的地步，但我确实想利用这个应用程序以便在网络农场上很好[地](http://leastprivilege.com/2012/07/12/machinekey-based-session-protection-for-wif/)`System.IdentityModel.Services.Tokens.MachineKeySessionSecurityTokenHandler`运行（如 Dominick Baier 所述）。

我遇到的问题是，考虑到基于 machineKey 的处理，我希望会话不仅在服务器机器之间有效，而且还应该在应用程序重新启动后仍然有效。但是，每当我重新启动或重建应用程序时，在浏览器中点击应用程序时，cookie 显然会变得无效，并且我会被弹回身份验证屏幕。再次通过身份验证后，一切都很好，会话仍然存在。但是，下次重新启动或重建应用程序时，我不得不重新进行身份验证。

我确信这是我没有得到的 WIF 的一个方面，但我只是不知道从这里转向哪里。我不怕扩展`MachineKeySessionSecurityTokenHandler`，但我想确保在继续之前了解这里发生了什么。我知道默认`SessionSecurityTokenHandler`使用 DPAPI 结合应用程序池中的某些标识符进行加密，因此在这种情况下会发生这种情况是有道理的，但这种行为`MachineKeySessionSecurityTokenHandler`让我感到困惑。应用程序中是否还有一些标识符在重新启动时重新创建`MachineKeySessionSecurityTokenHandler`取决于哪个标识符？我只是缺少一个设置吗？

以下是我的 web.config 中的相关部分：

```
<configSections>
  <section name="system.identityModel"
           type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
</configSections> 
```

...

```
<system.identityModel>
  <identityConfiguration>
    <securityTokenHandlers>
      <remove type="System.IdentityModel.Tokens.SessionSecurityTokenHandler, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <add type="System.IdentityModel.Services.Tokens.MachineKeySessionSecurityTokenHandler, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </securityTokenHandlers>
  </identityConfiguration>
</system.identityModel> 
```

...

```
<system.web>
  <machineKey compatibilityMode="Framework45"
              validationKey="E27893..."
              decryptionKey="ABC..." 
              validation="SHA1" decryption="AES" />
  <authentication mode="Forms">
  <forms loginUrl="~/Account/Login"
         timeout="10080" />
  </authentication>
</system.web> 
```

...

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true">
    <add name="SessionAuthenticationModule"
         type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </modules>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:58:54.657

嗯 - 如果您明确设置机器密钥（就像您似乎所做的那样） - 我看不出这不起作用的原因。也许您正在使用触发重新验证问题的其他 cookie、会话等？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:31:42.500

好吧，这是我愚蠢的错。由于此处不相关的原因，我将 FedAuth cookie 名称设置为非标准名称（即不是“ `FedAuth`”），如下所示：

```
FederatedAuthentication
  .FederationConfiguration
  .CookieHandler
  .Name = "SomeThingNotStandard"; 
```

问题是我只是在成功登录时发出令牌时才这样设置它。好吧，当然一切都会好起来的，因为现在内存中的配置正在寻找“SomeThingNotStandard”作为 cookie 名称。但是，在应用程序重新启动时，配置将恢复为默认值，寻找“ `FedAuth`”，而不是“ `SomeThingNotStandard`”。这会强制重新登录，成功后重新配置应用程序，然后一切似乎都很好。

所以我把上面的代码放进去`Application_Start()`，它在重新构建和重新启动时都能正常工作。

我的愚蠢举动。

**编辑：**

我将其移至配置

```
<system.identityModel.services>
  <federationConfiguration>
    <cookieHandler
      name="SomeThingNotStandard" />
  </federationConfiguration>
</system.identityModel.services> 
```

# ember.js - 如何触发提交/保存？

> ID：15981122
> 
> 赞同：0
> 
> 时间：2013-04-12T21:27:11.100
> 
> 标签：ember.js, ember-data

用户可以通过表单域进行操作。但我不知道如何保存（提交）它们。当我更改`lastName`a`User`并单击保存按钮时，我会收到以下错误：

```
Uncaught Error: Attempted to handle event `save` on <App.User:ember309:1> while in state rootState.loaded.updated.uncommitted. Called with undefined 
```

通过单击保存按钮，我必须更改哪些内容才能保存（提交）记录？

**索引.html**

```
<script type="text/x-handlebars" data-template-name="users">
  <table class='table'>
      {{#each model}}
        <tr>
          <td>{{view Ember.TextField valueBinding='lastName'}}</td>
          {{#with this as model}}
            <td><button {{bindAttr class=":btn isDirty:btn-primary:disabled"}} {{action "save" target="model"}}>save</button></td>
          {{/with}}
        </tr>
      {{/each}}
  </table>
</script> 
```

**应用程序.js**

```
App = Ember.Application.create();

App.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
})

App.Router.map(function() {
  this.resource('users', function() {
    this.resource('user', { path: ':user_id' })
  })
});

App.UsersRoute = Ember.Route.extend({
  model: function() {
    return App.User.find();
  }
});

App.UserController = Ember.ObjectController.extend({
  save: function() {
    this.commit();    
  }  
})

App.User = DS.Model.extend({
  lastName: DS.attr('string')
})

App.User.FIXTURES = [{
  id: 1,
  lastName: "Smith"
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:26:23.627

您可以像这样更改您的代码

```
<script type="text/x-handlebars" data-template-name="users">
  <table class='table'>
      {{#each model in controller}}
        <tr>
          <td>{{view Ember.TextField valueBinding='lastName'}}</td>
          <td><button {{bindAttr class=":btn isDirty:btn-primary:disabled"}} {{action "save"}}>save</button></td>
        </tr>
      {{/each}}
  </table>
</script> 
```

使用`each model in controller`而不是`#with this as model`

然后你定义一个`itemController`

```
App.UsersController = Ember.ArrayController.extend({
  itemController: 'user'
}); 
```

这将允许您拥有被调用的`save`方法。`UserController`

最后，确保保存您的记录：

```
App.UserController = Ember.ObjectController.extend({
  save: function() {
    this.get('content.transaction').commit();
  }
}) 
```

# drupal-7 - 流氓“？>”符号在drupal中呈现

> ID：15981124
> 
> 赞同：1
> 
> 时间：2013-04-12T21:27:18.180
> 
> 标签：drupal-7

我在 drupal 7 中更新了视图，并且在我的页面上为我在 zen 子主题中创建的区域呈现流氓“？>”符号。区域之一的代码如下：

```
<!--/#adbanner--> 
<?php if ($page['adbanner']): ?>    
    <div id = "adbanner"  role = "banner">          
           <?php print render($page['adbanner']); ?>        
    </adbanner><!-- /#adbanner--> 
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:05:32.020

好的，让我们尝试调试一下：

首先从文件中删除所有内容（使用*ctrl* + *a*，*ctrl* + *x*执行此操作，然后将其粘贴到新文件中 - 这样我们可以确保所有内容都已消失）。保存文件并呈现页面。

如果符号继续弹出，则您必须关闭它是一个编码标记。如果它们停止，这不是编码问题，我们将不得不尝试其他方法。

**注意：**当我说删除所有内容时，请确保保留结构，即加载任何外部文件的调用。只需确保删除这些文件的可见内容即可。

# oop - OOP 中的变量范围和引用

> ID：15981127
> 
> 赞同：0
> 
> 时间：2013-04-12T21:27:24.937
> 
> 标签：oop, variables, object, reference, scope

在应该实例化的类中编写函数时，一些变量只是临时使用 - 例如作为`for`循环中的计数器 - 有些是全局变量，而另一些则返回和/或“存储”在对象的实例中作为`instance.variable`, `instance->variable`.. . 取决于语法。

我的问题是，`object.variable =`在所述函数中定义变量时我应该始终使用它，还是应该只在我打算返回它或使其可供用户使用时才使用它？

我不是专业人士，所以我不确定我是否以正确的方式看待它，但从我的角度来看，我应该使用其中一种或另一种的原因有几个，以及一些优点和缺点总是使用`object.variable`：

`variable`

*   如果范围应该只是定义它的函数，或者
*   如果它是全局的（并且显然不是每个实例唯一的）。

`object.variable`：

*   如果它应该可供其他方法或用户访问。
*   如果它应该对每个实例都是唯一的。

和

*   它始终可以在您设置的范围内访问，从而消除可能的范围问题。
*   它可能具有安全隐患。

* * *

我以正确的方式看待这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:17:28.320

您使用术语“变量”来指定三个不同的概念：

*   函数中声明的变量是*局部变量*；
*   类中声明的变量是*成员属性*，或者是 *实例变量*；
*   在类（和静态）中声明的变量是*类变量*。

**局部变量****只能**从声明它的块中访问，无论是条件、循环还是函数。您的循环计数器变量应该是**local**，因为您不会在其他地方使用它。另外，它不能是属性，因为它与您的实例无关。

利用：`variable`

**成员属性**是绑定到实例的属性。它表征了它。因此，在您实例化对象之前，它不可用（并且不存在于内存中）。它在类内部声明，但在任何方法之外。您还必须精确它的可见性（公共、受保护、私有）。见[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

除非您有充分的理由，否则切勿将成员标记为公众。

可以在类之外以这种方式访问​​公共成员（无论是属性还是方法）：

```
MyObject obj = new MyObject();
obj.myMethod(); 
```

例如，当您想在您的类中使用它时，可以从您的一种方法中使用`variable`. 但是，使用`this.variable`是一个好习惯：可以声明一个与属性同名的局部变量。如果你不坚持这个习惯，它可能会成为一场真正的噩梦。请注意，`this`关键字可能会因您使用的语言而异。

类**变量/方法**独立于创建的任何实例而存在。它在您创建新实例之前就存在。无论存在多少类实例，都只会有一份副本。就像实例成员一样，您必须设置可见性。使用 是一个很好的习惯`MyClass.member`，无论是在课堂内还是课堂外。

我希望这能回答你的问题。

# android - 文字语音朗读

> ID：15981129
> 
> 赞同：0
> 
> 时间：2013-04-12T21:27:28.693
> 
> 标签：android, text, speaker

我有一个应用程序，它的一项活动就像阿拉伯语文本（textview），在每个文本下方，它是如何用土耳其语文本（textview）写成的，旁边是图像按钮，当按下它时，它会用土耳其语大声朗读土耳其语文本谷歌翻译应用程序之一（但我不希望 EditText 只在带有按钮的文本视图上写，当按下按钮时它会读取文本视图），如下所示：

```
 صباح الخير 
```

![在此处输入图像描述](https://i.stack.imgur.com/2xXvC.jpg) 居奈登

```
 كيف حالك 
```

![在此处输入图像描述](https://i.stack.imgur.com/Wh4HS.jpg) 纳西尔西尼兹

等等大约100、200个单词以及大约200个短语和句子。

我不知道如何或从哪里开始我也搜索了谷歌，但我无法指定我的搜索关于我需要什么。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:15:13.460

因为你只需要大约 100 个单词的声音。我认为最好为每个单词创建自己的声音剪辑并存储它。然后保留一个（单词，声音）映射，以便您可以知道在按下特定文本时要播放哪个声音。按下一个单词后，播放相关的声音。您可以为此使用 SoundPool。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:01:39.560

如果您有固定数量的单词或短语和句子，我还建议让土耳其语声音读取您的单词和短语作为从谷歌翻译录制的自定义剪辑，因为现在谷歌翻译语音不是免费的，许多网站之前提供谷歌翻译声音为mp3 下载现在不可用。

所以你有另一种方法：打开谷歌翻译应用程序，写下你想从阿拉伯语翻译成土耳其语的任何单词或句子，然后在谷歌翻译中按下扬声器图像以听到该单词的文本语音朗读，打开默认的录音机你的设备和 atart 录音然后在谷歌翻译上按下扬声器图像，它会记录土耳其语声音翻译，等等你需要的所有单词，然后将它用作每个单词和短语的剪辑，我认为将在你的应用程序中使用这是合适的做法。

希望对你有帮助

# asp.net-mvc-3 - 将字符串转换为int，字符串数组

> ID：15981130
> 
> 赞同：0
> 
> 时间：2013-04-12T21:27:35.023
> 
> 标签：asp.net-mvc-3

当传入多个字符串时，我在将 id 字符串转换为 int 时遇到问题，代码显示如下：

```
 for(int i = 0; i < Request.Params["service"].Length; i++)
            {
                int serviceID = int.Parse(Request.Params["service"]);

                db.ServiceAssignments.Add(serviceAssignment);
                serviceAssignment.locationID = locationID;
                serviceAssignment.ServiceID = serviceID;

                db.SaveChanges();
            } 
```

如果你传入一个参数，你会得到：) `int.Parse(Request.Params["Service"]`; = 1，然后工作并且数据库保存。但是，如果您有以下内容，您会得到：

'1,2' 这三个。我想要的是 1，然后是 2，而不是 1,2。

**1和2是什么？**

当您创建新位置时，您可以为该位置选择服务。在这个问题的情况下，服务 ID 是 1 和 2。如果我选​​择一项服务，那么它会保存并且一切都很好。当我选择两个或更多时，它不起作用。

我虽然可以这样做：

`Request.Params["Service"][i]`因为“服务”毕竟是一个数组。这如何导致数据库问题和其他混乱。

那么，当您为某个位置选择 id 1 和 id 2 时，您会建议我怎样做才能保存它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:55:21.753

MVC 3 在确定绑定方面非常强大，我不知道你在从用户那里获取服务 ID 的视图中到底在做什么，但我假设那里有表单，如果所有 Id 都是 int 你可以这样做您不需要任何转换，或者您可以使用 FormCollection。我不认为在 MVC 3 中使用 Request 是一个好主意，它并不真正属于整个 MVC 理念。

```
public void Add(int[] service)
        {
            foreach (var item in service)
            {
                int serviceID = item;
            }
        } 
```

或者

```
 public void Add(FormCollection frm)
        {
            foreach (var item in frm.AllKeys)
            {
                if (item.StartsWith("service"))
                {
                    int serviceID = Int32.Parse(frm[item]);
                }
            }
        } 
```

无论如何，这些都不是 MVC，它们应该可以工作，但我建议你在视图和控制器中使用模型

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T21:45:00.900

这将起作用。刚刚测试了一下：

```
string[] items = Request.Params["service"].Split(','); 

for (int i = 0; i < items.Length; i++)
{
    int serviceID = int.Parse(items[i]);
    db.ServiceAssignments.Add(serviceAssignment);
    serviceAssignment.locationID = locationID;
    serviceAssignment.ServiceID = serviceID;
    db.SaveChanges();
} 
```

作为旁注，我可能会做出两个改变：

1.  我会使用 foreach 语句。没有真正的区别；只是少打字。
2.  我将 SaveChanges() 放在 for 循环之后。这将减少对数据库的调用，但仍能完成同样的事情。

# jquery - 浏览器中跨时区的相同日期时间 - 在预订引擎上

> ID：15981131
> 
> 赞同：5
> 
> 时间：2013-04-12T21:27:40.473
> 
> 标签：jquery, date, timezone, unix-timestamp

我正在寻找在任何浏览器中使用同一时间在国际上预订服务的最佳实践/解决方案。我不太明白逻辑（也在这里挖）。

用例

*   布鲁塞尔预订的用户可以说位于新加坡的理发服务 - 他将在一周内飞往那里。他在浏览器日期时间控件中选择了 14:00。但是，浏览器设置为 +1 UTC。
*   SG 发型师应该将他议程中的时间视为 14:00 SG 时间。
*   理发店老板正在迪拜旅行，尽管他的浏览器暂时设置为 +4 UTC，但他希望看到他的议程仍然在 SG 时区。

基本上，所有角色都必须在当地时间看到“理发店”，无论他们在哪个 TZ，并在“商店”时间向服务器报告。

服务器时间为 UTC，时间戳以 unix 秒为单位。“商店”TZ 是众所周知的。

问题是我使用了几个在内部使用浏览器本地时间的 jquery 插件（datetimepicker 和日历），并且有几千行代码需要分析和修复，使其不太受支持 - 浏览器在（布鲁塞尔|任何其他 TZ）每个“new Date()”都将获得本地浏览器时间。还有一些狭窄的地方（因为这些想象中的“理发店”遍布全球，并且是从地图上挑选出来的，所以目标 TZ 是动态的）。

这样做的常见做法是什么？

是不是更容易

*   在不关心时区的 js 中模拟“动态”基准日期，并提供给插件
*   加载到客户端时将服务器数据转换为本地 TZ
*   应用其他一些解决方案

非常感谢

PS 我已经阅读了[最佳实践](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)——但正如我所说，我一定会使用特定的插件。

**解决方案**：

我意识到我不需要这些日期时间的*相对*值，因为我从不需要按时间比较不同“理发店”的书籍（每个“店”都有纬度/经度，如果需要，我仍然可以重新计算相对时间）。

基本上，无论时区如何，我只需要*绝对*UTC 值，在这种情况下，unix 时间（自 1970 年 UTC 以来的秒数）非常适合。

现在我不是在客户端通过用户浏览器偏移量更正时间，将其发送到后端，并通过目标偏移量在那里修复它，而是在客户端和服务器/数据库端以明确的 UTC 日期运行整个系统，存储并显示对所有角色，只有日期/时间过滤器例外，它们绑定到本地浏览器时钟并且不存储在任何地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T22:34:50.857

有几种方法可以解决这个问题。

**选项1**

*   忘记 UTC、浏览器的时区和目标时区。只需将它们视为*未指定*的日期时间。
*   在服务器和客户端之间，不要传递整数滴答声或秒数——它们与 UTC 绑定。相反，将本地日期时间作为 ISO8601 字符串传递，不带偏移量或“Z”。
*   使用[moment.js](http://momentjs.com/)解析和格式化字符串，而不引入浏览器的偏移量。例如：

    ```
    // to get a Date value suitable for use with an existing control or script.
    var date = moment('2013-04-19T14:00').toDate();

    // to get a string back from a Date that's ready to go to your server.
    var str = moment(date).format('YYYY-MM-DDTHH:mm'); 
    ```

*   在服务器端，这取决于您所在的平台。可能已经支持 ISO8601。例如，在 .Net 中，它只是`.ToString("o")`. 如果您需要这方面的具体建议，请告诉我们您的服务器平台/语言。

**选项 2**

*   使用带有“Z”说明符的 ISO8601 向/从您的服务器传输 UTC 日期时间。
*   任何时候处理日期，都可以使用 TZDB javascript 库，例如我在[此处](https://stackoverflow.com/a/15171030/634824)列出的库之一。转换为/从 UTC 和目标时区 - 忽略浏览器的时区。
*   这将工作得很好，现在你谈论的是一个特定的时刻，而不是一些*未指定*的当地时间。但是，这些库需要大量数据，对于这样一个简单的任务来说，这可能是多余的。我不建议这样做，除非您有许多其他转换要做，例如将约会时间转换为其他时区。

# c++ - 让 Boost asio 工作

> ID：15981132
> 
> 赞同：0
> 
> 时间：2013-04-12T21:27:46.460
> 
> 标签：c++, boost, boost-asio

我正在尝试将 Boost asio 库用于套接字。

我使用自制软件安装了 boost`brew install boost`

构建完成后，我尝试了在 boost 网站上创建服务器[的教程。](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial/tutdaytime2/src.html)

我所做的只是将该代码粘贴到一个名为`main.cc`

当我尝试编译时`g++ main.cc`，出现此错误：

```
Undefined symbols for architecture x86_64:
"boost::system::system_category()", referenced from:
  __static_initialization_and_destruction_0(int, int)in ccTbzxpk.o
  boost::asio::error::get_system_category()    in ccTbzxpk.o
  boost::system::error_code::error_code()in ccTbzxpk.o
"boost::system::generic_category()", referenced from:
  __static_initialization_and_destruction_0(int, int)in ccTbzxpk.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:41:52.583

那些是`linker errors`。如果您阅读[文档](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/using.html)：

> 为了**链接使用 Boost.Asio 的程序，**必须提供以下库：
> 
> **Boost.System 用于 boost::system::error_code 和 boost::system::system_error 类。** Boost.Regex（可选）如果您使用任何带有 boost::regex 参数的 read_until() 或 async_read_until() 重载。如果您使用 Boost.Asio 的 SSL 支持，则 OpenSSL（可选）。
> 
> **此外，一些示例还需要 Boost.Thread、Boost.Date_Time 或 Boost.Serialization 库。**

现在，您发布的错误都说：`boost::system`，这意味着您需要像这样链接（假设一切都是默认的）： `g++ main.cc -lboost_system`

请阅读[“静态链接”和“动态链接”是什么意思？](https://stackoverflow.com/questions/311882/what-do-statically-linked-and-dynamically-linked-mean/311889#311889)有关链接的深入信息。

# objective-c - 如何在 Objective-C 中使用带有格式的转义 URL 字符串

> ID：15981146
> 
> 赞同：0
> 
> 时间：2013-04-12T21:28:49.090
> 
> 标签：objective-c, macos, escaping

我需要根据用户的输入从网站收集数据。

searchString 是用户输入的值，例如“搜索这个字符串”。

```
NSString *withoutSpaces = [searchString stringByReplacingOccurrencesOfString:@" " withString:@"%20"]; 
```

在这里，我需要用 %20 替换空格

接下来，我需要将不带空格的新字符串（替换为 %20）放入另一个字符串中。

```
NSString *unescapedSearchString = [NSString stringWithFormat:
                                @"website.com/query?=%22%@%22", withoutSpaces]; 
```

我需要的网站并不是真正的“website.com”，但这只是一个例子。我还需要 %22 保留在开头和结尾。

如您所见，我需要 %@ 将新的 withoutSpaces 用户输入格式化为网站 URL。

我进行了搜索并找到了示例，但我找不到任何具有格式的示例，例如在我的情况下使用 %@。

“转义”字符并保留格式化字符串的最佳方法是什么？目前，当我尝试从网站访问数据时，它返回为空。但是，当我尝试没有 %@ 格式和实际值的字符串时，我成功地从网站检索数据。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T21:53:25.707

你应该这样做：

```
NSString *searchString = ... // the raw search string with spaces and all
NSString *quoted = [NSString stringWithFormat:@"\"%@\"", searchString];
NSString *escaped = [quoted stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSString *urlString = [NSString stringWithFormat:@"website.com?query=%@&value=all", escaped]; 
```

顺便说一句 - URL 似乎有点不对劲。`=`之前和之后应该有一个变量名`?`。

# responsive-design - Using em's in responsive design

> ID：15981148
> 
> 赞同：0
> 
> 时间：2013-04-12T21:28:52.523
> 
> 标签：responsive-design, em

I've created a responsive site and want to use `em`'s to control the font size.

I've set the body font base size to 64.5% as recommended to create a base of 10px.

However, though the sizing seems OK, it does not change with the size of the browser. What am I missing?

[http://jsfiddle.net/XaUz9/](http://jsfiddle.net/XaUz9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:16:36.523

看看这是否对您有帮助：http: [//jsfiddle.net/panchroma/qK8j2/](http://jsfiddle.net/panchroma/qK8j2/)

在您的示例中，您已经明确设置了字体大小，并且没有任何内容指示字体随着视点的变化进行缩放。

设置
`body{ font-size:62.5%; }` 只是设置字体大小（相对于浏览器的默认设置），它不会导致任何缩放。

实现您想要的几种方法是使用[@media 查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)设置 h1、h2、p 等的大小作为 viepoint 的变化，例如

```
@media (max-width: 480px) {

h1 {font-size:  2em }
h2 {font-size: 1em}
p{font-size:1em}
} 
```

或者您可以在不同的视点设置默认的正文字体大小，字体大小将相对于您在 CSS 文件头部的设置进行缩放，例如

```
@media (min-width:481px) and (max-width: 767px) {

body{
font-size:90%;
}  
} 
```

祝你好运！

# sql - SQL - Subtract the sum of certain records from the total

> ID：15981149
> 
> 赞同：-3
> 
> 时间：2013-04-12T21:28:53.840
> 
> 标签：sql, oracle

Given the following table

```
ITEMID  | TYPE          | QTY |
-----------------------
...
134     |TOTALINDEPOT   | 169 |
134     |UNUSED         |  70 |
134     |FAULTY         |  15 |
134     |DAMAGED        |   1 |
134     |DELAYED        | 100 |
... 
```

What is an efficient way to retrieve the quantity of available items with id 134 (excluding these of delayed type)? Result is 83 => (169-(70+15+1)). I implemented it with `(SELECT qty FROM tableA WHERE type='TOTALINDEPOT' AND itemid='134') - (SELECT SUM(qty) ... WHERE TYPE IN ('UNUSED', 'FAULTY', 'DAMAGED')) AND itemid='134'`, but looking for something more elegant.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:34:54.873

像这样？

```
SELECT a.ITEMID,
    (SELECT SUM(QTY) FROM tbl WHERE TYPE = 'TOTAL' AND ITEMID = a.ITEMID) -
    (SELECT SUM(QTY) FROM tbl WHERE TYPE <> 'TOTAL' AND ITEMID = a.ITEMID) AS available
FROM tbl a
GROUP BY a.ITEMID 
```

**结果**

```
| 项目 | 可用 |
----------------------
| 134 | 83 |
```

[查看演示](http://sqlfiddle.com/#!9/bcc61/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:38:29.853

它对你有用吗？

```
SELECT a.total1 - a.total2
FROM 
(
  SELECT SUM(CASE WHEN type='total' THEN qty ELSE 0 END) as total1,
  SUM(CASE WHEN type<>'total' THEN qty ELSE 0 END) as total2
  FROM table WHERE itemid = 134
)a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:39:02.810

另一种方法：

```
SELECT SUM(QTY) - 
       SUM(CASE WHEN [TYPE] IN ('UNUSED', 'FAULTY', 'DAMAGED') THEN QTY END) AS TotalSum
FROM TABLE1 
```

[演示：](http://www.sqlfiddle.com/#!3/ace2f/6)

# jquery - jQuery - $('.myClass').detach()，然后是 .clone()，嘿，我的嵌套表在哪里？

> ID：15981154
> 
> 赞同：0
> 
> 时间：2013-04-12T21:29:21.513
> 
> 标签：jquery, html, clone

所以我有一个带有表的 div，我试图将它重用于 JSON 数据库中的多个条目。

```
<div class="myButton">
                <table>
                    <tr id="currentVersion">
                        <td class="subj">Current Version</td>
                        <td class="abt"></td>
                    </tr>
                    <tr id="baseReqs">
                        <td class="subj">Basic System Requirements</td>
                        <td class="abt"></td>
                    </tr>
                    <tr id="reasonsTo">
                        <td class="subj">Reasons to Update to This Version</td>
                        <td class="abt"></td>
                    </tr>
                    <tr id="reasonsNot">
                        <td class="subj">Note the Following Before Updating</td>
                        <td class="abt"></td>
                    </tr>
                </table>
            </div> 
```

我正在使用的 jQuery 分离 div，然后为数据库中的每个条目克隆它。

```
buttonCreator: function(data){
    var buttonElement = $('.myButton').detach();
    $.each(data, function(index, version){

                    var newButton = buttonElement.clone();
        newButton.attr("id", version.id).addClass(version.status);
        newButton.html(version.shortName);
        /*the next line fails! because the correct element does not exist, evidently*/
        $('.currentVersion .abt', newButton).html(version.currentVersion);
        /*this just prepares the div to be seen correctly, and handle events*/
        newButton.children().hide();
        newButton.click(versionilizer.handleButtonClick);
        $('#myVersionInfo').append(newButton);
        });
}, 
```

但我无法让 .clone() 复制该表。我查看了 API，似乎说它应该被复制嵌套数据和任何相关的事件处理程序（如果存在），但到目前为止这还不是我的经验。我尝试将 (true) 和 (true, true) 作为参数传递给 .clone() 和 .detach()，但这也不成功。不确定我需要做什么来复制 div 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:34:24.743

您破坏了 with 的内容，`newButton`它`newButton.html(version.shortName);`不再包含表格，而只包含`version.shortName`.

# mysql - defining new trigger sql error

> ID：15981160
> 
> 赞同：0
> 
> 时间：2013-04-12T21:29:30.137
> 
> 标签：mysql, sql, triggers, phpmyadmin

My goal in general is like that: I have a a table with many translations - each translation have a rating - the average of all ratings from the user. each translation have a unique Id, and in the second table I am saving for each user that ranked a translation the rating he\she gave (userId, translationId, rating)

now everytime a user rank a new translation or change his old rate I want to update the average rating of this translation

I have the following tables:

```
Create Table if not exists Translation
        (TranslationID int (12) NOT NULL UNIQUE AUTO_INCREMENT,
        UserID int (10) NOT NULL, 
        ImageID int (10) NOT NULL, 
        ChainID int (2) NOT NULL,
        Translation text,
        TranslationRating double Default 0 CHECK (TranslationRating>=0 AND TranslationRating<=5),
        NumOfRatings int (10) Default 0,
        CONSTRAINT translations PRIMARY KEY (UserID,ImageID, ChainID),
        FOREIGN KEY (UserID) REFERENCES Users(UserID) ON DELETE CASCADE,
        FOREIGN KEY (ImageID) REFERENCES Images(ImageID) ON DELETE CASCADE)

Create Table if not exists TranslationsRating
        (UserID int (10) NOT NULL , 
        TranslationID int (3) NOT NULL,
        Rating double Default 0 CHECK (TranslationRating>=0 AND TranslationRating<=5),
        CONSTRAINT known_lang PRIMARY KEY (UserID,TranslationID),
        FOREIGN KEY (UserID) REFERENCES Users(UserID) ON DELETE CASCADE,
        FOREIGN KEY (TranslationID) REFERENCES Translation(TranslationID) ON DELETE CASCAD 
```

this means that everytime a new row is inserted into 'TranslationsRating' or I update the rating column in this table I want to take the translationId of the row that was just changed and in the 'translation' table update this translationId rating (find all rating for this Id in 'TranslationsRating' and calc the average)

I'm trying to define the following trigger:

```
CREATE TRIGGER UPDATE_TRANS_RATING
AFTER UPDATE ON TRANSLATIONSRATING
FOR EACH ROW
BEGIN
UPDATE TRANSLATION SET TRANSLATIONRATING = (SELECT AVG(RATING) FROM TRANSLATIONSRATING 
WHERE TRANSLATIONSRATING.TRANSLATIONID = RATINGNEW.ID)
END; 
```

and I'm getting the following error message (I'm using phpMyAdmin):

```
MySQL said: #1303 - Can't create a TRIGGER from within another stored routine 
```

my question is what is this error, and if my trigger is written in a good way that will achive my goal

# iis - How can I determine the data source value to a connectionstring in sql server 2012 when using (LocalDb)\v11.0 in a workgroup and not a domain?

> ID：15981162
> 
> 赞同：2
> 
> 时间：2013-04-12T21:29:34.790
> 
> 标签：iis, hosting, connection-string, datasource, sql-server-2012

Environment: 64 bit Windows 8

Platform: Visual Studio 2012, SQL server 2012, IIS8

Language: C#

I'm currently creating an asp.net web application using a tutorial from msdn. The site runs fine and is visible in google chrome when I select the run button. I published the website to a folder on my desktop and am attempting to host it through IIS. The main issue I am having is trying to figure out the full computer name so I can update my connection strings in the web.cong.

The connection string is as follows:

connectionString="Data Source=(LocalDb\v11.0);"

When I try to browse the website in IIS I get a database error because I'm not defining the full machine name in the datasource attribute. I'm in a workgroup and am not on a domain. Also I can't log into sql server with just my ip address. I can only log into sql server with (LocalDb)\v11.0.

Can anyone help me find a way to determine what the value of my data source should be so I can possibly hit the website externally? Has anyone run into this problem on a home pc without a domain? I have done this on my work computer many times but have never tried to host anything from IIS on my home computer.

# c - 如何使用填充正确格式化 printf()？

> ID：15981164
> 
> 赞同：1
> 
> 时间：2013-04-12T21:29:40.943
> 
> 标签：c, printf

我正在重新创建 unix shell 命令，目前正在执行 ls。我必须模仿 ls -l 显示权限、文件大小等。如果格式正确，则本机 ls -l 使每列保持对齐，如下所示：

```
-rw-r--r-- 1 matt matt 1474560 Apr 11 14:54 diskimage
drwxr-xr-x 2 matt matt    4096 Mar 25 15:31 Example
-rwxr-xr-x 1 matt matt   26375 Apr 12 14:24 final
-rwxr-xr-x 1 matt matt      75 Apr 11 14:39 log.sh 
```

现在，我的 ls 版本几乎做同样的事情，除了当 printf() 函数中使用不同的值时我的列不对齐，如下所示：

```
drwxr-xr-x     0   1024    Dec 03 14:11      .
drwxr-xr-x     0   1024    Dec 03 14:11      ..
drwxr-xr-x     0   1024    Dec 03 13:57      Z
drwxr-xr-x     0   1024    Dec 03 14:11      X
drwxr-xr-x     0   1024    Dec 03 13:56      Y
-rw-r--r--     0   334632    Dec 10 08:39      big 
```

如您所见，最后一个条目未对齐，因为 size 列大于其余列。如何告诉 printf 函数以自动对齐列的格式化方式打印？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:32:17.250

就是这样：

```
printf("%8d", 334632); 
```

`d`转换说明符之前的数字告诉`printf()`用空格填充打印的数字，以便它占据（至少）屏幕上的 8 个字符。你可以在那里写任何整数。您的案例的完整格式字符串可能类似于：

```
"%9s\t%4d\t%8d\t%16s\n" 
```

如果您想要可变数量的填充：

```
printf("%*d\n", max_field_width, 42); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T21:32:07.647

对于每一列，您应该找到最大长度并对该列的每个条目应用该长度的填充。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T21:34:34.590

这是基本思想：

```
#include <stdio.h>

int main()
{
    int a[] = {1, 1213, 3133123, 312, 0, 2}; 
    int i;
    for (i = 0; i < 6; i++) 
        printf("str %9d\n", a[i]);
    return 0;
} 
```

**输出**

```
str         1
str      1213
str   3133123
str       312
str         0
str         2 
```

您还可以使用一些数学来获得所需的空格数：

```
#include <stdio.h>
#include <math.h>

int main()
{
    int a[] = {1, 1213, 3133123, 312, 0, 2}; 
    int i, max_digits=0;
    for (i = 0; i < 6; i++) {
        int d;
        d = a[i] == 0 ? 1 : ceil(log(abs(a[i]))/log(10));
        if (d > max_digits)
            max_digits = d;
    }   
    for (i = 0; i < 6; i++) 
        printf("str %*d\n", max_digits + 1, a[i]);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T21:38:11.590

看看我的小型库 libTPrint：[https ://github.com/wizzard/libtprint](https://github.com/wizzard/libtprint)

它按列打印数据（您可以显示/隐藏边框）。

代码很简单，我相信你会发现有几个有用的提示。

希望能帮助到你 ！

# ios - 使用 Objective-C，在没有 API 的情况下登录服务并从结果页面中抓取内容的最佳方式是什么？

> ID：15981167
> 
> 赞同：1
> 
> 时间：2013-04-12T21:29:56.450
> 
> 标签：ios, objective-c, nsurlconnection

我正在使用的一项服务没有 API，但允许抓取，所以我很好奇 iOS/Objective-C 中的最佳方法是执行以下操作：

*   获取用户登录凭据
*   在网站登录页面上提交
*   从结果页面中获取特定链接

如何规避诸如服务在将您带到内容站点之前将您重定向到“登录成功，正在重定向...”页面这一事实？（这不允许您立即抓取结果页面。）

例如：

像 Instapaper 这样的服务，如果我想在不直接使用 API 的情况下访问它，例如，我将如何登录，验证他们是否已登录，并在“登录成功，重定向...”页面后抓取内容？甚至推特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:53:38.200

一种有效的方法是在`UIWebView`.

该策略非常简单，它涉及使用控制网页的`stringByEvaluatingJavaScriptFromString`方法`UIWebView`。

假设您已经拥有用户登录信息，您可以使用 javascript 脚本输入它们。

例如，假设它`webView`是`UIWebView`实例并且`username`是用户名输入字段：

```
NSString * usernameScript = @"document.getElementById('username').value='Gabriele';";
[self.webView stringByEvaluatingJavaScriptFromString:usernameScript]; 
```

上面的代码将插入`Gabriele`用户名字段。

沿着同一条路径，您可以轻松地继续并通过 javascript 注入自动与网页交互。

登录后，您可以监视当前 URL，直到重定向将您带到所需的位置。为了做到这一点，您必须实现 的`webViewDidFinishLoad:`方法`UIWebViewDelegate`，每次 Web 视图加载页面时都会调用该方法

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSURL * currentURL = webView.request.mainDocumentURL;
    if ([currentURL.absoluteString isEqual:desideredURLAddress]) {
        [self performScraping];
    }
} 
```

此时您可以执行实际的抓取。假设您要获取`div`id 为 的标签的内容`foo`。这就像做一样简单

```
- (void)performScraping {
     NSString * fooContentScript = @"document.getElementById('foo').innerHTML;";
     NSString * fooContent = [self.webView stringByEvaluatingJavaScriptFromString:usernameScript];
} 
```

这将存储变量内部的`innerHTML`内容。`div#foo``fooContent`

底线是，在`UIWebView`您可以控制和抓取任何网页的内部注入 javascript。

为了获得额外的乐趣，您可以在屏幕外执行所有这些操作。为此，分配一个新`UIWindow`的并将其添加`UIWevView`为它的子视图。如果你从`UIWindow`不让可见，上面描述的一切都会发生在屏幕外。

请注意，这种方法非常有效，但它可能会消耗资源，因为您正在加载每个网页的全部内容。然而，这通常是一个必要的折衷方案，因为基于 XML 解析器的其他方法可能不够充分，因为 HTML 页面通常格式不正确，并且大多数 XML 解析器对它们的解析过于严格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:24:38.860

在您尝试做的事情中，没有任何特定于 iOS 或 Objective-C 的内容。如果您知道如何处理 HTTP 响应并知道如何检测您的登录页面，那么您所要做的就是在检测到响应是您的登录页面时解析响应并将凭据提交到登录端点。在开始之前，请阅读 NSURLConnection 上的文档。

# php - 将产品属性移动到 magento admin 中的新组

> ID：15981168
> 
> 赞同：2
> 
> 时间：2013-04-12T21:30:00.887
> 
> 标签：php, magento

我创建了一个这样的属性......

```
$installer = $this;
$installer->startSetup();

/* $installer Services_Issue_Model_Mysql4_Setup */
$installer->addAttribute('catalog_product', 'alice_id', array(
    'backend'                       => '',
    'frontend'                      => '',
    'type'                          => 'text',
    'visible'                       => true,
    'label'                         => 'Alice Id',
    'note'                          => 'Alice Id.',
    'input'                         => 'text',
    'unique'                        => true,
    'source'                        => '',
    'global'                        => true,
    'visible'                       => true,
    'required'                      => true,
    'user_defined'                  => true,
    'default'                       => '',
    'visible_on_front'              => true,
    'apply_to'                      => 'simple,configurable,default',
    'group'                         => 'Special Attributes',
    'used_in_product_listing'       => true,
    'frontend_class'                => '',
    'class'                         => '',
    'is_html_allowed_on_front'      => true,
    'searchable'                    => true
));

$installer->endSetup(); 
```

现在我需要将它移动到产品信息页面中的另一个组。所以我试过这个没有任何成功。

```
$installer = $this;
$installer->startSetup();

/* $installer Services_Issue_Model_Mysql4_Setup */

$installer->updateAttribute('catalog_product', 'alice_id', 'note', 'Product SKU for Alice.com third-party cart & checkout.');

/* - move between groups not possible with updateAttribute - */

$installer->updateAttribute('catalog_product', 'alice_id', 'group', 'Additional Attributes');
$installer->endSetup(); 
```

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:16:08.383

您可以使用`addAttributeToGroup($entityType, $attributeSetId, $attributeGroupId, $attributeId, $sortOrder)`in 方法`Mage_Eav_Model_Entity_Setup`将属性移动到不同的组。首先，您需要获取集合 ID 和组 ID。

```
// ... start setup 

// get default set id
$setId = $installer->getDefaultAttributeSetId('catalog_product');

// get group id by name "Additional Attributes"
$attributeSetCollection = Mage::getResourceModel('eav/entity_attribute_group_collection');
foreach ($attributeSetCollection->getData() as $attributeGroupIndex) {
    foreach ($attributeGroupIndex as $key => $value) {
        if ($key === "attribute_group_name" and $value === "Additional Attributes") {
            $groupId = $attributeGroupIndex["attribute_group_id"];
            break 2;
        }
    }
}

// move attribute 'alice_id' to group 'Additional Attributes'
if (isset($setId) and isset($groupId)) {
    $installer->addAttributeToGroup('catalog_product', $setId, $groupId, 'alice_id', 1000);
}

// ... end setup 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T14:27:10.973

如果您知道组的名称/代码，您可以使用 getAttributeGroupID() 直接获取它的组 ID。此示例将属性代码组更新为默认属性集中的“组名称”。

```
// $installer->startSetup()
// ...

$eavSetup = new Mage_Eav_Model_Entity_Setup('core_setup'); 
$iDefaultAttrSetID = $eavSetup->getDefaultAttributeSetId('catalog_product');

$iAttributeID  = $eavSetup->getAttributeId('catalog_product', 'attribute_code');
$iGroupID = $eavSetup->getAttributeGroupId('catalog_product', $iDefaultAttrSetID, 'Group Name');
$eavSetup->addAttributeToGroup('catalog_product', $iDefaultAttrSetID, $iGroupID, $iAttributeID); 
```

# java - 传递 3 个元素（意图）

> ID：15981173
> 
> 赞同：1
> 
> 时间：2013-04-12T21:30:16.690
> 
> 标签：java, android, string, android-intent, bundle

我想将以下三个元素从一项活动传递给另一项活动：

```
String a = "a";
String b = "b";
String c = "c"; 
```

我尝试了以下但没有成功：

在主活动（MainActivity）中：

```
Bundle extras = new Bundle();
extras.putString("a", a);
extras.putString("b", b);
extras.putString("c", c);
Intent intent = new Intent(MainActivity.this, SubActivity.class);
intent.putExtras(extras);
startActivity(intent); 
```

在子活动（SubActivity）中：

```
Bundle extras = new Bundle();
String a = extras.getString("a");
String b = extras.getString("b");
String c = extras.getString("c"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:34:13.137

在 SubActivity 中，您应该通过调用来获取 Bundle `getIntent().getExtras();`，而不是通过创建新的 Bundle。

```
public class SubActivity extends Activity {
    public void onCreate(Bundle saved) {
        super.onCreate(saved);
        setContentView(...);

        Bundle extras = getIntent().getExtras();
        if (extras != null) {
            // call extras.getString() here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:34:28.850

```
String array[] = {"a","b","c"};

Intent i = new Intent(A.this, B.class);
i.putExtra("array", array);
startActivity(i); 
```

在活动 B 中：

```
Bundle extras = getIntent().getExtras();
String[] arrayB = extras.getStringArray("array"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:34:38.517

在您的子活动中

代替

```
 Bundle extras = new Bundle(); 
```

使用以下

```
 Bundle extras = getIntent().getExtras();
 if(extras!=null)
 {
       String a = extras.getString("a");
       String b = extras.getString("b");
       String c = extras.getString("c");
 } 
```

# logging - 登录 Groovy 脚本

> ID：15981182
> 
> 赞同：30
> 
> 时间：2013-04-12T21:31:36.280
> 
> 标签：logging, groovy

我有一个基本的 Groovy 脚本，我希望尽可能简单地创建日志。我希望消息发送到标准输出以及日志文件，并且日志文件中的每个条目都有一个时间戳。

我不能使用@Log 表示法，因为它是一个脚本，而且我没有要注入的类。否则我认为这将是理想的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-14T01:03:10.653

您可以在脚本中使用以下模式（在 Groovy 编辑器中尝试过）。

```
import java.util.logging.Logger

Logger logger = Logger.getLogger("")
logger.info ("I am a test info log") 
```

上面的日志输出到 STDOUT。为了将其记录到文件中，您必须使用`getLogger`. 为了您的方便，请遵循[API 。](http://docs.oracle.com/javase/6/docs/api/java/util/logging/Logger.html)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-04T23:56:47.050

使用 Log 注释是在 groovy 中启用日志记录的最简单方法。将其与 Grape 注释结合起来以下拉日志框架，您就可以在一个脚本中拥有所需的一切：

```
// 
// Dependencies
// ============
import groovy.util.logging.Slf4j

@Grapes([
    @Grab(group='ch.qos.logback', module='logback-classic', version='1.0.13') 
])

// 
// Classes
// =======

@Slf4j
class StandardGreeting {

    def greet() {
        log.trace "Hello world"
        log.debug "Hello world"
        log.warn  "Hello world"
        log.info  "Hello world"
        log.error "Hello world"
    }
}

@Slf4j
class SpecialGreeting {

    def greet() {
        log.trace "Hello world"
        log.debug "Hello world"
        log.warn  "Hello world"
        log.info  "Hello world"
        log.error "Hello world"
    }
}

@Slf4j
class GreetingRunner {

    def greetings  = [new StandardGreeting(), new SpecialGreeting()]

    def run() {
        log.info "Starting to talk"

        greetings.each {
            it.greet()
        }

        log.info "Finished talking"
    }
}

// 
// Main program
// ============
def runner = new GreetingRunner()

runner.run() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-06T21:42:12.100

这是我为几个 logback 功能创建一个最小示例的尝试，包括日志记录到文件。在上面扩展@Mark O'Connor 的答案

foo.groovy：

```
import groovy.util.logging.Slf4j

@Grab('ch.qos.logback:logback-classic:1.2.1') 

@Slf4j
class Foo {
    @Slf4j
    static class Bar {
        def bar() {
            assert log.name == 'Foo$Bar'
            assert log.class == ch.qos.logback.classic.Logger
            log.trace "bar"
            log.debug "bar"
            log.warn  "bar"
            log.info  "bar"
            log.error "bar"
        }
    }

    def foo() {
        assert log.name == "Foo"
        assert log.class == ch.qos.logback.classic.Logger
        log.trace "foo"
        log.debug "foo"
        log.warn  "foo"
        log.info  "foo"
        log.error "foo"
    }
}

@Slf4j
class Baz {
    def baz() {
        log.name = 'Baz'
        assert log.name == 'Baz'
        assert log.class == ch.qos.logback.classic.Logger
        log.trace "baz"
        log.debug "baz"
        log.warn  "baz"
        log.info  "baz"
        log.error "baz"
    }
}

new Foo().foo()
new Foo.Bar().bar()
new Baz().baz() 
```

logback-test.xml 或 logback.xml：

```
<configuration debug="true"> <!-- debug attr enables status data dump -->

   <timestamp key="sec" datePattern="yyyyMMdd_HHmmss"/>

   <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
      <!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
      <encoder>
         <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern> <!-- see Chapter 6 Layouts for format specifiers -->
      </encoder>
   </appender>

   <!-- for RollingFileAppender see Chapter 3 Appenders -->
   <appender name="FILE" class="ch.qos.logback.core.FileAppender">
      <file>foo_${sec}.log</file>
      <append>true</append> <!-- true is the default for append -->
      <immediateFlush>true</immediateFlush> <!-- true is the default for immediateFlush -->
      <encoder>
         <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
      </encoder>
   </appender>

   <!-- TRACE < DEBUG < INFO <  WARN < ERROR -->
   <!-- Read Chapter 2 Architecture of logback doc for effective
      level (level inheritance) and accumulation (appender additivity) -->
   <root level="debug">
      <appender-ref ref="STDOUT"/>
   </root>

   <logger name="Foo" level="trace" additivity="true">
      <appender-ref ref="FILE"/>
   </logger>

   <!-- if a logger isn't specified for a name, its level="null" and additivity="true", "null" being synonymous to "inherited" -->

   <!-- '$' acts as '.' it seems -->
   <logger name="Foo$Bar" level="inherited" additivity="true"/> <!-- if additivity false, no appender, otherwise, STDOUT and FILE -->

</configuration> 
```

另请参阅[logback 文档](https://logback.qos.ch/manual/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-08-16T13:58:38.527

使用`@Slf4j`注解需要两行代码：`import`语句和注解本身。在这里，用两行来说明如何在 Groovy 脚本中获取记录器：

```
import org.slf4j.LoggerFactory

def logger = LoggerFactory.getLogger(this.class)

// Use sl4j's placeholders.
logger.info "Reading entries in {}", tsv
// Use a GString.
logger.debug "Extracted file $outputFile exists" 
```

# ios - 如何将此 HTML 表单转换为 iOS

> ID：15981183
> 
> 赞同：1
> 
> 时间：2013-04-12T21:31:43.283
> 
> 标签：ios, nsurlconnection, nsurlrequest

我正在尝试将电子邮件订阅到我的 EC2 服务器上运行的**Sendy 安装**- 可以在[此处](http://sendy.co/api)找到 Sendy 的 API 文档。

在我的清单中，Sendy 建议

```
<form action="http://www.erwaysoftware.com/sendy/subscribe" method="POST" accept-charset="utf-8">
    <label for="name">Name</label><br/>
    <input type="text" name="name" id="name"/>
    <br/>
    <label for="email">Email</label><br/>
    <input type="text" name="email" id="email"/>
    <br/>
    <label for="App">App</label><br/>
    <input type="text" name="App" id="App"/>
    <br/>
    <input type="hidden" name="list" value="my_sendy_list_key"/>
    <input type="submit" name="submit" id="submit"/>
</form> 
```

在 HTML 中用于订阅列表。***我可以确认这可行 - 请参阅[我的网站。](http://www.erwaysoftware.com/totalizerapp)***

但是，我需要**通过 API 从我的应用**中订阅这些人。这是我尝试过的代码：

```
- (IBAction)submitButtonPressed:(id)sender
{
    self.data = [[NSMutableData alloc] initWithLength:0];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.erwaysoftware.com/sendy/subscribe/"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"john@me.com" forHTTPHeaderField:@"email"];
    [request setValue:@"John Bob" forHTTPHeaderField:@"name"];
    [request setValue:@"api_key" forHTTPHeaderField:@"list"];
    [request setValue:@"TRUE" forHTTPHeaderField:@"boolean"];

    NSURLConnection *conn = [NSURLConnection connectionWithRequest:request delegate:self];
    [conn start];

}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [self.data setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)d {
    [self.data appendData:d];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", @"")
                                 message:[error localizedDescription]
                                delegate:nil
                       cancelButtonTitle:NSLocalizedString(@"OK", @"")
                       otherButtonTitles:nil] show];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *responseText = [[NSString alloc] initWithData:self.data encoding:NSUTF8StringEncoding];

    // Do anything you want with it

    NSLog(@"%@", responseText);
} 
```

**NSLog**显示：

```
2013-04-12 15:23:03.917 Sendy API Test[13488:c07] <!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="Shortcut Icon" type="image/ico" href="http://www.erwaysoftware.com/sendy/img/favicon.png">
        <title>Subscribed</title>
    </head>
    <style type="text/css">
        body{
            background: #ffffff;
            font-family: Helvetica, Arial;
        }
        #wrapper 
        {
            background: #f2f2f2;

            width: 300px;
            height: 70px;

            margin: -140px 0 0 -150px;
            position: absolute;
            top: 50%;
            left: 50%;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
        }
        p{
            text-align: center;
        }
        h2{
            font-weight: normal;
            text-align: center;
        }
        a{
            color: #000;
        }
        a:hover{
            text-decoration: none;
        }
    </style>
    <body>
        <div id="wrapper">
            <h2>Email address is invalid.</h2>
        </div>
    </body>
</html> 
```

据此，**我了解到 Sendy 认为该电子邮件无效**- 无论如何，该电子邮件未注册。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:47:29.730

问题是您正在设置 HTTP 请求*标头*。API 期望信息出现在 HTTP*正文*中。不幸的是，`NSMutableURLRequest`该类没有提供创建主体的简单方法。 [这个](https://stackoverflow.com/questions/2544650/using-nsurlrequest-to-pass-key-value-pairs-to-php-script-with-post)问题提供了手动构建请求正文的示例代码。

也就是说，自己构建请求正文很棘手，因为格式规则可能很神秘。更好的是使用一个开源扩展来`NSURLRequest`为你处理它。我在当前项目中使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)，尽管设置起来有点复杂。

# .htaccess - PHP RewriteRule 检测 url 是否包含“字符串”并替换

> ID：15981186
> 
> 赞同：1
> 
> 时间：2013-04-12T21:31:58.343
> 
> 标签：.htaccess, mod-rewrite, redirect

这可能是关于 RewriteRule 的一个基本问题，但我无法让它发挥作用。

我想要做的是检测像这样的网址：

```
mydomain/myapp/id/some/random/url.html?param=somethingThatIdoUse
mydomain/myapp/id/other/randomabc/perrito.php?param=somethingThatIdoUse
... 
```

我需要删除的部分来自`/id/[all this]?param=somethingIdoUse`并使用参数，如果可能的话，或者将完整的 url 作为参数发送，这样我就可以通过正则表达式来获取参数。

并有一个规则来检测`/id/`存在并重定向到类似的东西：

```
mydomain/myapp/other/manageRequest.php?params=somethingThatIdoUse 
```

（我可以获得整个网址并将其剥离为字符串的参数没问题）

该应用程序还具有不同的模块，例如：

```
mydomain/myapp/moduleOne/index.php 
mydomain/myapp/moduleTwo/index.php 
```

这必须保持不变。

到目前为止，我已经尝试过其中一些，例如：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^GET /.*;.* HTTP/
RewriteCond %{QUERY_STRING} !^$
RewriteRule .* http://localhostdev/app/index.php %{REQUEST_URI}? [R=301,L]

RewriteEngine On
RewriteBase /spt/
RewriteCond %{REQUEST_FILENAME} !^id$ [NC]
RewriteRule ^(.*)$ index.php [R=301,L]

RewriteEngine On
RewriteCond %{REQUEST_URI} !/campaings/response\.php$
RewriteRule ^/something/(.*) /other/manageRequest.php? [L] 
```

但是没有什么可以做我需要的。

谢谢指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:42:26.837

> mydomain/myapp/id/some/random/url.html?param=somethingThatIdoUse

以下是使用上述 URL 的示例：

```
RewriteRule ^id/some/random/url.html/?  /myapp/other/manageRequest.php [L,NC] 
```

查询将原封不动地传递到替换 URL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:28:28.063

好吧，实际上最终它是非常基本的：

```
RewriteRule ^.*id.*$ handleRequest.php [NC,L] 
```

我确实收到了发送的参数！

# c++ - C++ 中多字输入的变量

> ID：15981188
> 
> 赞同：0
> 
> 时间：2013-04-12T21:32:09.267
> 
> 标签：c++

我正在用 C++（命令行工具格式）编写冒险游戏，但我不知道是使用字符还是字符串变量来进行多字输入。我的代码看起来像这样：

```
if(directionOne=="go to lake"){cout<<"You are at the lake."} 
```

directionOne 是我想知道的变量。当我使用 char 或 string 时，它只是在我完成后关闭程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:34:16.200

将其声明为`std::string`：

```
std::string directionOne; 
```

# html - 响应式设计 - 如何使图像在小屏幕上看起来正常？

> ID：15981194
> 
> 赞同：-3
> 
> 时间：2013-04-12T21:32:24.583
> 
> 标签：html, css, responsive-design

我正在这个测试页面上工作：http: [//problemio.com/index_test.php](http://problemio.com/index_test.php)

在我的笔记本电脑屏幕上看起来不错。但在我的手机浏览器上看起来很糟糕。尤其是图像看起来一团糟。

可以做些什么来确保图像看起来不错？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:38:17.537

[Omega](https://stackoverflow.com/a/15981217/1470950)有正确的想法，但您也想设置`width`参数。我通常将其设置`width`为百分比值和`max-width`像素值。这样，一旦它超过了最大宽度，它基本上把它扔到一边，只看宽度。与此类似的东西

```
img {
  max-width:500px; /*Once screen size is smaller than 500px, the image reverts to the width value*/
  width:100%;
} 
```

[JSFiddle](http://jsfiddle.net/5XUHa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T21:35:29.333

使用媒体查询为移动设备设置元素样式。图像也使用百分比以及最大宽度和最小宽度值。

```
@media screen and (max-width:480px) {
    //CSS sizes for mobiles only
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T21:34:30.983

不要为您的图像设置像素错误，而是将此 css 用于 img 标签：

```
img {
max-width: 100%;
height: auto;
} 
```

# opengl - 为什么将 GLSL 与 OpenGL 一起使用？

> ID：15981196
> 
> 赞同：0
> 
> 时间：2013-04-12T21:32:51.803
> 
> 标签：opengl, glsl, shader

在尝试了解**OpenGL**的要点时，我最终遇到了**GLSL**。我以前使用 OpenGL 来处理最小的东西，比如三角形和颜色（*因为我还没有学到很多东西*），但是当我发现*glBegin*和*glEnd*等已弃用的函数时，我不得不忘记我刚刚学到的东西。

现在，我遇到了*顶点缓冲区*、*顶点缓冲区对象*、*顶点和片段着色器*……我从来不明白的一件事是为什么要使用 GLSL？为什么将 GLSL 与 OpenGL 一起使用？使用纯 OpenGL 不能做哪些事情？对我来说，将 GLSL 着色器集成到程序中会增加复杂性，因为您已经处理了外部文件，或者您必须将着色器嵌入到程序中，这会导致更多的工作。

我的经验很少。我想了解更多有关该主题的信息，但由于这种难以理解的矛盾，我无法进步。

那么，*为什么要使用 GLSL 和 OpenGL*呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T00:10:06.320

您的问题与 GLSL 无关；它一般是关于*着色器*的。GLSL 只是在 OpenGL 中提供着色器的认可方式。您的问题实际上是，“为什么将着色器与 OpenGL 一起使用？”

我不会详细介绍着色器可以做什么固定功能不能做的所有细节。但这里只是一些你不能用固定功能的 OpenGL 做的事情：

*   GPU 驱动的[顶点加权蒙皮](http://en.wikipedia.org/wiki/Skeletal_animation)。
    *   基于双四元数的蒙皮。
*   适当的[切线空间凹凸贴图](http://en.wikipedia.org/wiki/Normal_mapping)。
*   各种[延迟渲染技术](http://en.wikipedia.org/wiki/Deferred_shading)。
*   用于实例化渲染的 GPU 上[截锥体剔除](http://rastergrid.com/blog/2010/02/instance-culling-using-geometry-shaders/)。
*   任意光照模型，包括[BRDF](http://en.wikipedia.org/wiki/Bidirectional_reflectance_distribution_function)或其他[复杂光照模型](http://en.wikipedia.org/wiki/Specular_highlight#Models_of_microfacets)。
*   [复杂的阴影映射技术](http://en.wikipedia.org/wiki/Shadow_mapping#Shadow_mapping_techniques)。
*   [高动态范围渲染](http://en.wikipedia.org/wiki/High-dynamic-range_rendering)（OpenGL FFP 不允许您在任何颜色计算上超过 1.0）。
    *   任意[色调映射技术](http://en.wikipedia.org/wiki/Tone_mapping)。

我可以继续（很*长一段*时间），但我想你明白了。如果你真的*关心*像“视觉保真度”这样的小事，你应该使用着色器。

问题不是“为什么要使用着色器”；它是“为什么*不*使用着色器？”

# postgresql-9.1 - Postgresql：错误：类型“citext”不存在

> ID：15981197
> 
> 赞同：85
> 
> 时间：2013-04-12T21:32:54.053
> 
> 标签：postgresql-9.1

我已经阅读了其他帖子，在搜索时，这个问题的答案。

我正在使用 PostgreSQL 9.1，并使用 'citext' 创建了扩展名`CREATE EXTENSION citext`，但是当我尝试创建任何类型为 'citext' 的列时，它会引发此错误

> 错误：类型“citext”不存在

我研究了但没有找到任何具体的答案？知道为什么吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-04-12T21:46:15.573

好的，想通了。我有几个数据库，`CREATE EXTENSION citext`必须为每个数据库运行才能在该数据库中安装扩展。您必须在 psql 提示符下执行：

```
psql =# \c db_1
CREATE EXTENSION citext;

psql =# \c db_2
CREATE EXTENSION citext; 
```

希望它可以帮助别人。谢谢你。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-08-31T13:40:10.577

@NullException 是正确的，需要在每个数据库中创建扩展。如果你想自动创建一个扩展，你可以在`template1`数据库中创建它（默认情况下，至少）是用作“创建数据库”模型的数据库，因此在 psql 中具有适当的权限：

```
\c template1
create extension citext; 
```

然后新数据库将默认包含 citext。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-09-11T15:32:57.923

要使用，请在第一次迁移操作之前`citext`使用该操作在 PostgreSQL`CITextExtension`中设置扩展。`citext``CreateModel`

[https://docs.djangoproject.com/en/2.2/ref/contrib/postgres/fields/#citext-fields](https://docs.djangoproject.com/en/2.2/ref/contrib/postgres/fields/#citext-fields)

```
from django.contrib.postgres.operations import CITextExtension

class Migration(migrations.Migration):
    ...

    operations = [
        CITextExtension(),
        ...
    ] 
```

类似于[https://docs.djangoproject.com/en/2.2/ref/contrib/postgres/operations/#create-postgresql-extensions](https://docs.djangoproject.com/en/2.2/ref/contrib/postgres/operations/#create-postgresql-extensions)`HStoreField` _

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-20T18:52:37.683

如果您使用 Docker，并希望将此扩展添加到您的数据库中，

我做了以下事情，

```
# Dockerfile
FROM postgres:11.3

# Adds the CIText Extension to our database
COPY ./compose/production/postgres/initdb_citext.sh /docker-entrypoint-initdb.d/citext.sh 
```

还有我的 initdb_citext.sh：

```
#!/bin/sh

# Adds the citext extension to database and test database
"${psql[@]}" <<- 'EOSQL'
CREATE EXTENSION IF NOT EXISTS citext;
\c template1
CREATE EXTENSION IF NOT EXISTS citext;
EOSQL 
```

这也将扩展应用于 django 生成的测试数据库。

# javascript - 寻找一个独立的库，用于在 Javascript 中处理个人容器上的 HTTP cookie

> ID：15981198
> 
> 赞同：3
> 
> 时间：2013-04-12T21:33:08.850
> 
> 标签：javascript, http, cookies, standards

你知道是否存在一个处理 cookie 的 Javascript 库，它是成熟的并且可以在没有浏览器的情况下工作吗？换句话说，我只想要包含在 Web 浏览器和 HTTP 客户端中并遵循当前标准的 cookie 逻辑，并且 cookie 是从私有存储中存储和检索的。

我认为该库只能包含 get/set 方法。set 方法设置来自“Set-Cookie”HTTP 标头的 cookie，get 方法返回要在特定主机（或域）的“Cookie”标头中发送的 cookie 列表。get 方法也需要接收主机作为参数，因为如果主机正在为另一个域指定 cookie，则会返回错误或其他内容。有更多关于 cookie 的详细信息很不错。

我看到了类似[JavaScript 中是否有与 Apache HTTP 客户端等效的问题？](https://stackoverflow.com/questions/11316377/is-there-an-equivalent-to-the-apache-http-client-in-javascript)但答案有效并将cookie设置在浏览器中而不是特定容器中。

**注意：**我查看了[https://github.com/jed/cookies/blob/master/lib/cookies.js](https://github.com/jed/cookies/blob/master/lib/cookies.js)，它是现在与问题匹配的更接近的库。最重要的问题是域没有 getter：假设您想要返回 yahoo.com 域的所有 cookie，这个逻辑不是库的一部分，它是最重要的功能之一cookie 库来决定在 HTTP 请求中发送哪些 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:24:20.923

我找到了一个回答我的问题的库：[CookieJar for Node](https://github.com/bmeck/node-cookiejar) (not bound to HTTP requests)。考虑到@Barmar 评论与[libcurl 上的 cookie jar 有关](http://curl.haxx.se/docs/http-cookies.html)。

我使用以下查询找到了该库：*site:github.com cookies lib domain secure*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:23:47.470

你看过[Cookies.js](https://github.com/ScottHamper/Cookies)了吗？它声称是客户端和跨浏览器。

# c++ - 哈希表打印（）函数C++

> ID：15981199
> 
> 赞同：0
> 
> 时间：2013-04-12T21:33:11.990
> 
> 标签：c++, hashtable

这仍然是我的家庭作业。我的作业有最后一个问题。我一直在为这段代码编写 print() 。我无法完全产生我想要的输出。使用我的 print() 我无法使用我的插入函数输出添加到我的哈希表中的值。我知道在我的 print() 中我使用了错误的 List 数组，但我似乎无法弄清楚如何将我的 List 数组合并到我的 print() 中。这是我的类声明，以及我的 insert() 和 print()。

```
const int EMPTY = 0;
const int OCCUPIED = 1;
class HTable
{
  public:
HTable(int size);
void insert( const string &key);
void remove(const string &key);
void print();

  private:
vector<list<string>> List;
int currSize;

//int hash(string key)const;
unsigned hash(const std::string& key) const;
int hash_string( const string &s );
int hashFunction(string key);
int HTableSize;
//int *status_arr;
ostream &   operator <<( ostream &);
HTable * table;
int *tableContents;
int recordSpace;
}; 
```

插入（）

```
inline void HTable::insert(  const string &key )
{
  // hash the key to determine which bucket the key would be stored in.
  int bucketNum = hash(key) ;

  list<string>& bucket = List[bucketNum] ;

  // search the bucket to see if the key is already in the bucket.
  if ( bucket.empty() || bucket.end() == find(bucket.begin(), bucket.end(), key) )
    bucket.push_back(key) ;           // if it's not in the bucket, store it in the bucket.
} 
```

打印（）

```
inline void HTable::print()
{
    list<string>::iterator itr;
for(int i = 0; i < HTableSize; i++)
{
    if(tableContents[i] != OCCUPIED)
        cout << (i)   << endl;

}

} 
```

# c++ - 从 blender 导出时了解 Three.js 导出器格式

> ID：15981200
> 
> 赞同：0
> 
> 时间：2013-04-12T21:33:13.633
> 
> 标签：c++, three.js, 3d-model

我在 Blender 中使用 three.js 模型导出器，我想将生成的文件解析为 C++。获取数据没有问题，但我不明白他们用于面部的格式。我尝试了多种模型，格式总是像这个三角立方体示例：

8 垂直 12 面

“顶点”：[1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,1,1,-1,0.999999,1,1, -1,1,1,-1,1,-1],

“面孔”：[34,0,1,2,0,0,1,2,34,4,7,5,0,3,4,5,34,0,4,1,0,0,3 ,1,34,1,5,2,0,1,5,2,34,2,6,7,0,2,6,4,34,4,0,3,0,3,0,7 ,34,3,0,2,0,7,0,2,34,7,6,5,0,4,6,5,34,4,5,1,0,3,5,1,34 ,5,6,2,0,5,6,2,34,3,2,7,0,7,2,4,34,7,4,3,0,4,3,7],

有 34's 和 0's 间隔均匀，似乎在两张脸中阻塞。在面孔列表的开头，您似乎有一个 34（不知道为什么是这个数字），然后是一个面孔 {0,1,2}，然后是零，然后是另一个面孔 {0,1,2}，然后回到 34 并重复此过程。我也不知道为什么这张脸会在这里重复。当模型中只有 12 个面时，我也无法弄清楚为什么这里似乎有 24 个面。

有谁知道这种格式背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:43:52.217

你想知道的关于three.js JSON模型格式3.1的一切都可以在这篇three.js Wiki文章中找到：[https ://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.1](https://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.1)

三.js r.57

# c++ - 是否返回 std::move (x)？

> ID：15981204
> 
> 赞同：12
> 
> 时间：2013-04-12T21:33:29.117
> 
> 标签：c++, move-semantics

是

```
std::vector<double> foo ()
{
    std::vector<double> t;
    ...

    return t;
} 
```

和

```
std::vector<double> foo ()
{
    std::vector<double> t;
    ...

    return std::move (t);
} 
```

相等的 ？

更准确地说，`return x`总是等价于`return std::move (x)`?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T21:35:37.127

它们不是等效的，您应该始终使用`return t;`.

更长的版本是，当且仅当 return 语句符合返回值优化的条件时，returnee 才绑定到右值引用（或通俗地说，“`move`隐含的”）。

然而，通过拼写`return std::move(t);`，您实际上抑制了返回值优化！

# c# - 如何存根函数并为引用类型参数定义相等比较器

> ID：15981205
> 
> 赞同：0
> 
> 时间：2013-04-12T21:33:44.167
> 
> 标签：c#, unit-testing, mocking, rhino-mocks, rhino

我基本上想存根一个函数，但为引用类型参数定义我自己的相等比较器。

我想存根一个函数来返回数据。我希望方法的参数通过特定值而不是 ReferenceEquals 进行比较。我也不想为我的参数引用类型创建一个等于覆盖。我认为下面是实现此目的的方法，但我收到了一个例外。有没有另一种方法可以做到这一点和/或我在这里做错了什么？

异常消息：System.Reflection.AmbiguousMatchException：找到不明确的匹配。

```
 public class Parameter
    {
        public string Property1 { get; set; }
    }

    public interface IStubbable
    {
         string DoStuff(Parameter param);
    }

    public class ThisService
    {
        private IStubbable _stubbable;
        public ThisService(IStubbable stubbable)
        {
            _stubbable = stubbable;
        }

        public string DoTheStuff(Parameter param)
        {
            return _stubbable.DoStuff(param);
        }
    }

    [Test]
    public void TestStubbing()
    {
        const string expectedResult = "Totes";

        var iStub = MockRepository.GenerateStub<IStubbable>();

        const string prop1 = "cool stub bro";
        iStub
            .Stub(x => x.DoStuff(Arg<Parameter>.Matches(y => y.Property1 == prop1)))
            .Return(expectedResult);

        var service = new ThisService(iStub);

        var result = service.DoTheStuff(new Parameter() {Property1 = prop1});

        Assert.AreEqual(expectedResult, result);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:42:36.407

这篇文章提供了另一种实现这一目标的方法。 [Rhino Mocks - 使用 Arg.Matches](https://stackoverflow.com/questions/3520911/rhino-mocks-using-arg-matches)

将存根更改为：

```
 iStub.Stub(x => x.DoStuff(new Parameter()))
            .Constraints(new PredicateConstraint<Parameter>(y => y.Property1 == prop1 ))
            .Return(expectedResult); 
```

# c# - 使用 SqlDataAdapter 分页 SqlDataReader 源

> ID：15981206
> 
> 赞同：5
> 
> 时间：2013-04-12T21:33:46.697
> 
> 标签：c#, gridview, sqldatareader, sqldataadapter, page-index-changed

这个问题似乎很常见，我已经完成了这个[答案](https://stackoverflow.com/questions/8215826/gridview-control-and-paging-asp-net)。

不幸的是，我的页面仍然没有被分页。这是我的代码在 C# 中的样子：

```
 SqlCommand command = new SqlCommand("(SELECT ......", Connection);
 SqlDataAdapter myAdapter = new SqlDataAdapter(command);
 DataTable dt = new DataTable();
 myAdapter.Fill(dt);

 command.Connection = connection;
 command.Connection.Open();

 GridView1.DataSource = dt;
 GridView1.DataBind();
 GridView1.AllowPaging = true;
 GridView1.PageSize = 15;

 command.Connection.Close();
 command.Connection.Dispose(); 
```

不幸的是，当我这样做时，我的分页没有出现。难道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T21:46:44.717

在调用方法**之前**设置所有与分页相关的属性。`Databind()`当您使用*自定义分页*时，您将不得不处理该`GridView1_PageIndexChanging`事件。您需要更改当前的 PageIndex，然后像这样重新绑定`GridView`：

```
void bindGridview()
{
    SqlCommand command = new SqlCommand("(SELECT ......", Connection);
    SqlDataAdapter myAdapter = new SqlDataAdapter(command);
    DataTable dt = new DataTable();
    myAdapter.Fill(dt);

    command.Connection = connection;
    command.Connection.Open();
    GridView1.AllowPaging = true;
    GridView1.PageSize = 15;
    GridView1.DataSource = dt;
    GridView1.DataBind();

    command.Connection.Close();
    command.Connection.Dispose();
}

protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    bindGridview();
} 
```

如果您还绑定了 GridView `Page_Load`，请执行以下操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
        bindGridview();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T21:48:47.887

您需要添加`PageIndexChanging`事件`GridView`以启用`paging`。

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    bindGridview(); 
} 
```

# c++ - Allegro 5 al_create_display(x, y) 不工作

> ID：15981210
> 
> 赞同：0
> 
> 时间：2013-04-12T21:34:09.473
> 
> 标签：c++, windows-7, 64-bit, allegro, visual-studio-2010

我已经在 MSVC 2010 中正确设置了我的 allegro 5.0.7 项目并且代码执行。我能够编译和运行将显示错误对话框或其他内容的程序。但是，每当我运行一个绘制窗口的程序时，该窗口都不会显示在我的屏幕上。我看到它被一个损坏的文件图标最小化了。但是，代码运行没有错误。这是给我这个问题的一些代码示例。谢谢！

```
#include <stdio.h>
#include <allegro5/allegro.h>

int main(int argc, char **argv){

   ALLEGRO_DISPLAY *display = NULL;

   if(!al_init()) {
      fprintf(stderr, "failed to initialize allegro!\n");
      return -1;
   }

   display = al_create_display(640, 480);
   if(!display) {
      fprintf(stderr, "failed to create display!\n");
      return -1;
   }

   al_clear_to_color(al_map_rgb(0,0,0));

   al_flip_display();

   al_rest(10.0);

   al_destroy_display(display);

   return 0;
} 
```

该代码甚至会在 10 秒后退出，这是应该的。唯一的问题是窗口没有被绘制到屏幕上。它只是最小化，带有损坏的文件图标。我有 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:50:08.380

这是一个影响某些配置的已知错误，可能会在更新的版本中得到修复。

使用 al_set_window_position() 在屏幕上移动窗口。

# php - 完成搜索后，jQuery在悬停时加载数据

> ID：15981213
> 
> 赞同：0
> 
> 时间：2013-04-12T21:34:24.370
> 
> 标签：php, jquery

**问题**

您好，我有一个使用 Jquery POST 和 PHP 的简单搜索系统。搜索后会回显如下信息：

```
while($row = $search->fetch(PDO::FETCH_ASSOC)) {
echo 
'
<br /><br />
'.$row['result_name'].' <br /> Data: <a href="#" id="hover">Click to see</a><br /><br />
';

} 
```

我想这样做，当您将 ID“悬停”（搜索后）悬停时，java 脚本将用数据填充一些 div，它将发送另一个 POST 以获取数据。

这就是我所做的：

对于悬停：

```
$("#hover").hover(function() {
  $.post("ajax_search.php?type=sidebar", { sidebar : seach.val() }, function(get_data) {
stop_load();
$("#sidebar").html(get_data);
     });
}); 
```

PHP：

```
if (isset($_GET['type']) && $_GET['type'] == 'sidebar' && isset($_POST['sidebar'])) 
{
    $data = htmlentities(trim($_POST['search']));
    $similar = "'%$data%'";
    $search = $connect->prepare("SELECT * FROM results WHERE result_name LIKE $similar");
    $search->execute(); 

    while($row = $search->fetch(PDO::FETCH_ASSOC)) {
        echo 
        '
        <br /><br />
        '.$row['result_name'].' <br /> Data: '.$row['rsult_data'].'<br /><br />
        ';

    }
} 
```

但是悬停时什么也没有发生！

**问题**

我做错了什么？为什么它在悬停时不做任何事情？我可以使用脚本运行后回显的 ID 吗？

> 额外的

**完整的jQuery代码：**

```
$(document).ready(function() {

    var search = $("#search");

        $("#bla").click(function() {
            if (search.val() != '') {
                load();
                $.post("ajax_search.php", { search : search.val()}, function(data) {
                    stop_load();
                    $(".result").html(data);
                });
            } 
            else 
            {
                $(".result").html('');
            }
            $("#hover").hover(function() {
                $.post("ajax_search.php?type=sidebar", { sidebar : seach.val() }, function(get_data) {
                    stop_load();
                    $("#sidebar").html(get_data);
                });
            });                 

function load() {
    $('.load').html('<img src="http://i.imgur.com/ZoI4x5I.gif" />');
}
function stop_load(){
    $('.load').html('');
}   
}); 
```

**完整的 PHP 代码：**

```
if (isset($_POST['search'])) 
{
    $data = htmlentities(trim($_POST['search']));
    $similar = "'%$data%'";
    $search = $connect->prepare("SELECT * FROM results WHERE result_name LIKE $similar");
    $search->execute();

    if ($search->rowCount() == 0) {
        echo 'You searched for <b>'.$data.'</b>, 0 results found.';
    } else {
        $results = $search->rowCount();
        echo 'You searched for <b>'.$data.'</b>, '.$results.' results found.';
        while($row = $search->fetch(PDO::FETCH_ASSOC)) {
            echo 
            '
            <br /><br />
            '.$row['result_name'].' <br /> Data: <a href="#" id="hover">Click to see</a><br /><br />
            ';

        }
    }
}
if (isset($_GET['type']) && $_GET['type'] == 'sidebar' && isset($_POST['sidebar'])) 
{
    $data = htmlentities(trim($_POST['search']));
    $similar = "'%$data%'";
    $search = $connect->prepare("SELECT * FROM results WHERE result_name LIKE $similar");
    $search->execute(); 

    while($row = $search->fetch(PDO::FETCH_ASSOC)) {
        echo 
        '
        <br /><br />
        '.$row['result_name'].' <br /> Data: '.$row['rsult_data'].'<br /><br />
        ';

    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:38:32.260

试试这个..因为你`<a href="#" id="hover">`被动态添加

```
$(document).on("mouseenter","#hover",function() {
     $.post("ajax_search.php?type=sidebar", { sidebar : seach.val() }, function(get_data){
                stop_load();
                $("#sidebar").html(get_data);
      });
}); 
```

# gradle - 在 Gradle 中过滤资源时，如何将令牌的评估推迟到执行阶段？

> ID：15981222
> 
> 赞同：3
> 
> 时间：2013-04-12T21:34:56.857
> 
> 标签：gradle

我有以下用于处理资源的配置：

```
project.ext.releaseVersion = {
    project.version.contains("SNAPSHOT") ? timestamp : project.version
}

processResources {
    filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: [version: project.ext.releaseVersion()])
} 
```

它可以工作，但`project.ext.releaseVersion()`在配置阶段得到评估，我不知道如何将它延迟到执行阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:34:42.057

事实证明，这就像在一个`doFirst`块中应用过滤器一样简单（正如 Peter 上面评论的那样）。我也摆脱了获取更新值的关闭，但这可能只是个人喜好。

```
processResources {
    doFirst {
        def releaseVersion =
            project.version.contains("SNAPSHOT") ? project.ext.timestamp : project.version

        filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: [version: releaseVersion])
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:55:34.097

`processResources`您可以在[`afterEvaluate()`](http://www.gradle.org/docs/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project%3aafterEvaluate%28groovy.lang.Closure%29)方法调用中包装配置以延迟评估：

```
afterEvaluate {
    processResources {
        filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: [version: project.ext.releaseVersion()])
    }
} 
```

# c++ - 如何查询当前线程的 COM 单元状态

> ID：15981228
> 
> 赞同：3
> 
> 时间：2013-04-12T21:35:22.060
> 
> 标签：c++, com, native, apartment-state

.NET Thread 类有一个方便的函数 GetApartmentState()，它返回线程上下文的单元。本机代码（C++，C）是否有类似的**Co<something-something>**函数？我觉得我应该知道，因为我已经编写 COM 近 10 年了，但我找不到答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T21:39:34.580

您正在寻找的功能是[`CoGetApartmentType`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd542641%28v=vs.85%29.aspx).

# notepad++ - 您可以更改 Notepad++ 中行标记的颜色/外观吗？

> ID：15981234
> 
> 赞同：3
> 
> 时间：2013-04-12T21:35:45.237
> 
> 标签：notepad++, line

Notepad++ 允许您在左边距放置一个小圆形项目符号来标记线条。但是，对于我当前的主题，背景是深灰色，项目符号/标记是深蓝色。我可以看到它，但我希望它是更亮的颜色，这样它才能真正脱颖而出。

有没有办法在不改变我的整体主题的情况下改变这个标记的外观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:53:00.130

这并不能完全回答这个问题，但我找到了一些可以为我解决问题的信息。看，我想更改行书签（我以前称为“行标记”）的外观的原因是，我可以快速滚动代码并在书签经过时轻松查看书签。

但是，我发现通过按 F2，您可以快速地从一个书签跳到另一个书签，从而完全无需从一个书签滚动到另一个书签。我再次意识到，这并不能回答有关如何更改书签外观的问题，但出于所有密集目的，这些信息为我提供了我需要的信息，因此我决定将其作为答案发布在这里以防万一其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T14:35:33.550

我发现颜色是在 %APPDATA%\notepad++\plugins\NppPlugin_ChangeMarker.xml 中定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-12T12:43:55.530

转到 Menu > Plugins > Plugins Admin 并输入 Bookmarks，选择一个名为 Bookmarks@Dook 的插件并安装。转到 Menu > Plugins > Bookmarks@Dook > Options 并选择您想要的颜色（背景/前景）甚至标记的形状。

# java - 用 Java 小程序制作一条蛇

> ID：15981236
> 
> 赞同：0
> 
> 时间：2013-04-12T21:35:53.487
> 
> 标签：java, graphics, processing

所以我想在[这里](http://www.youtube.com/watch?feature=player_embedded&v=6nODeX5yBqU)为我的 java 类重现这个图形程序。

到目前为止，这是我想出的：

```
import processing.core.PApplet;

public class Assignment09b extends PApplet {

// Create arrays to stort the x & y values of the mouse
int [] xArray = new int [100];
int [] yArray = new int [100];

public void setup(){
    //Runs at 60Fps

    size(500, 500);
}

public void draw(){
    //Changes the background each frame
    background(0);

    //Stores the x&y values of the mouse in the arrays
    for (int i = 0; i < xArray.length; i++){
        xArray[i] = this.mouseX;
        yArray[i] = this.mouseY;
    }

    //SHOULD print out the snake using series of ellipses
    for (int i = 0; i < xArray.length; i++){

        //Generates a random color each time
        fill(random(255), random(255), random(255));
        ellipse(xArray[i], yArray[i], 25, 25);
    }

}
   } 
```

关于问题可能是什么，我有一些想法：

1.  因为我在一个循环中，它只是很快地产生一个椭圆，但我不知道如何让它同时产生它们
2.  可能是帧速率问题？
3.  我是一个不称职的程序员：/

请大家给我一些建议，告诉我我可能做错了什么或根本没有做错什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:24:43.927

问题是您在这里同时设置所有值：

```
//Stores the x&y values of the mouse in the arrays
    for (int i = 0; i < xArray.length; i++){
        xArray[i] = this.mouseX;
        yArray[i] = this.mouseY;
    } 
```

您只想更新数组中的 1 个元素，并让其他元素移动一个：“最旧”值消失，新值进入。您可以手动使用反向 for 循环（从数组末尾到前面除了第一个元素）或使用[arrayCopy](http://processing.org/reference/arrayCopy_.html)：

```
private void updateArrays(int x,int y){
  arrayCopy(xArray, 0, xArray, 1, xArray.length-1);//shift all elements backwards by 1
  arrayCopy(yArray, 0, yArray, 1, yArray.length-1);//so x at index 99 goes 98, 98 to 97, etc. excepting index 0
  xArray[0] = x;//finally add the newest value 
  yArray[0] = y;//at the start of the array (so in the next loop it gets shifted over by 1) like the above values
} 
```

这使得完整列表：

```
import processing.core.PApplet;

public class Assignment09b extends PApplet {
  // Create arrays to stort the x & y values of the mouse
  int [] xArray = new int [100];
  int [] yArray = new int [100];

  public void setup(){
      //Runs at 60Fps

      size(500, 500);
  }

  public void draw(){
      //Changes the background each frame
      background(0);

      updateArrays(mouseX,mouseY);

      //SHOULD print out the snake using series of ellipses
      for (int i = 0; i < xArray.length; i++){

          //Generates a random color each time
          fill(random(255), random(255), random(255));
          ellipse(xArray[i], yArray[i], 25, 25);
      }

  }

  private void updateArrays(int x,int y){
    arrayCopy(xArray, 0, xArray, 1, xArray.length-1);//shift all elements backwards by 1
    arrayCopy(yArray, 0, yArray, 1, yArray.length-1);//so x at index 99 goes 98, 98 to 97, etc. excepting index 0
    xArray[0] = x;//finally add the newest value 
    yArray[0] = y;//at the start of the array (so in the next loop it gets shifted over by 1) like the above values
  }
} 
```

由于这是一个练习，我建议更多地使用 for 循环和数组。这是你最终会使用很多并且值得练习/掌握的东西。祝你好运！

```
var xArray = new Array(100);
var yArray = new Array(100);

function setup(){
  createCanvas(500, 500);
}

function draw(){
    //Changes the background each frame
    background(0);

    updateArrays(mouseX,mouseY);

    //SHOULD print out the snake using series of ellipses
    for (var i = 0; i < xArray.length; i++){

        //Generates a random color each time
        fill(random(255), random(255), random(255));
        ellipse(xArray[i], yArray[i], 25, 25);
    }

}

function updateArrays(x,y){
  arrayCopy(xArray, 0, xArray, 1, xArray.length-1);//shift all elements backwards by 1
  arrayCopy(yArray, 0, yArray, 1, yArray.length-1);//so x at index 99 goes 98, 98 to 97, etc. excepting index 0
  xArray[0] = x;//finally add the newest value 
  yArray[0] = y;//at the start of the array (so in the next loop it gets shifted over by 1) like the above values
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.4/p5.min.js"></script>
```

# c# - 从目录结构创建 xml

> ID：15981237
> 
> 赞同：1
> 
> 时间：2013-04-12T21:35:55.750
> 
> 标签：c#, xml, sorting, directory

我有一个包含文件的目录和一个包含文件的子目录，并希望从中创建 xml。这是我的文件夹结构：

```
C:\inputdata folder contains:
C:\inputdata\file1.txt
C:\inputdata\picture1.jpg
C:\inputdata\subfolder\picture2.jpg
C:\inputdata\subfolder\file2.txt
C:\inputdata\subfolder\anotherfolder \file3.txt
C:\inputdata\anotherfolder\ 
```

我想生成这个 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<serverfiles>
     <file name="picture1.jpg"/>
     <file name="file1.txt"/>
     <folder name="subfolder">
          <file name="picture2.jpg"/>
          <file name="file2.txt"/>
          <folder name="anotherfolder">
               <file name="file3.txt"/>
          </folder>
     </folder>
     <folder name="anotherfolder">
     </folder>
</serverfiles> 
```

我已经编写了以下控制台应用程序，但我有两个问题。

1.  这会产生附加的屏幕截图 xml，它在结构上与上面的 xml 不完全相同。

2.  有没有一种方法可以使用我的代码使用 name 属性对其进行排序。

有人可以请我指出如何做到这一点的正确方向：

```
 private const string folderLocation = @"c:\inputdata";
    static void Main(string[] args)
    {
        DirectoryInfo dir = new DirectoryInfo(folderLocation);

        var doc = new XDocument(CREATEXML(dir));

        Console.WriteLine(doc.ToString());

        Console.Read();
    }

  private static XElement CREATEXML(DirectoryInfo dir)
    {
        //get directories
        var xmlInfo = new XElement("serverfiles", new XAttribute("name", dir.Name));

        //get all the files first
        foreach(var file in dir.GetFiles())
        {
            xmlInfo.Add(new XElement("file", new XAttribute("name", file.Name)));
        }

        //get subdirectories
        foreach(var subDir in dir.GetDirectories())
        {
            xmlInfo.Add(CREATEXML(subDir));
        }

        return xmlInfo;

    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/Vz8rB.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T21:43:50.127

几乎就在那里：只需对代码进行一些小的编辑即可。

```
 private const string folderLocation = @"c:\inputdata";
    static void Main(string[] args)
    {
        DirectoryInfo dir = new DirectoryInfo(folderLocation);

        // makes everything wrapped in an XElement called serverfiles.
        // Also a declaration as specified (sorry about the standalone status:
        // it's required in the XDeclaration constructor)    
        var doc = new XDocument(new XDeclaration("1.0", "UTF-8", "yes"),
             CREATEXML(dir));

        Console.WriteLine(doc.ToString());

        Console.Read();
    }

  private static XElement CREATEXML(DirectoryInfo dir, bool writingServerFiles = true)
    {
        //get directories
        var xmlInfo = new XElement(writingServerFiles ? "serverfiles" : "folder", writingServerFiles ? null : new XAttribute("name", dir.Name)); //fixes your small isue (making the root serverfiles and the rest folder, and serverfiles not having a name XAttribute)

        //get all the files first
        foreach(var file in dir.GetFiles())
        {
            xmlInfo.Add(new XElement("file", new XAttribute("name", file.Name)));
        }
            //get subdirectories
        foreach(var subDir in dir.GetDirectories())
        {
            xmlInfo.Add(CREATEXML(subDir), false);
        }
        return xmlInfo;

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T21:51:04.213

您可以添加另一种处理子目录的方法

```
private static XElement CreateXML(DirectoryInfo dir)
    {
        var xmlInfo = new XElement("serverfiles");
        //get all the files first
        foreach (var file in dir.GetFiles())
        {
            xmlInfo.Add(new XElement("file", new XAttribute("name", file.Name)));
        }
        //get subdirectories
        foreach (var subDir in dir.GetDirectories())
        {
            xmlInfo.Add(CreateSubdirectoryXML(subDir));
        }
        return xmlInfo;
    }

    private static XElement CreateSubdirectoryXML(DirectoryInfo dir)
    {
        //get directories
        var xmlInfo = new XElement("folder", new XAttribute("name", dir.Name));
        //get all the files first
        foreach (var file in dir.GetFiles())
        {
            xmlInfo.Add(new XElement("file", new XAttribute("name", file.Name)));
        }
        //get subdirectories
        foreach (var subDir in dir.GetDirectories())
        {
            xmlInfo.Add(CreateSubdirectoryXML(subDir));
        }
        return xmlInfo;
    } 
```

**编辑：**

添加排序：

```
private static XElement CreateXML(DirectoryInfo dir)
        {
            var xmlInfo = new XElement("serverfiles");
            //get all the files first
            foreach (var file in dir.GetFiles())
            {
                xmlInfo.Add(new XElement("file", new XAttribute("name", file.Name)));
            }
            //get subdirectories
            var subdirectories = dir.GetDirectories().ToList().OrderBy(d => d.Name);
            foreach (var subDir in subdirectories)
            {
                xmlInfo.Add(CreateSubdirectoryXML(subDir));
            }
            return xmlInfo;
        }

        private static XElement CreateSubdirectoryXML(DirectoryInfo dir)
        {
            //get directories
            var xmlInfo = new XElement("folder", new XAttribute("name", dir.Name));
            //get all the files first
            foreach (var file in dir.GetFiles())
            {
                xmlInfo.Add(new XElement("file", new XAttribute("name", file.Name)));
            }
            //get subdirectories
            var subdirectories = dir.GetDirectories().ToList().OrderBy(d => d.Name);
            foreach (var subDir in subdirectories)
            {
                xmlInfo.Add(CreateSubdirectoryXML(subDir));
            }
            return xmlInfo;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T10:20:47.043

我认为这个解决方案可以更好

```
 //get directories
        var xmlInfo = new XElement("folder",                 
            new XElement("name", dir.Name),
            new XElement("lastModify", dir.LastWriteTime),
            new XElement("Attributes", dir.Attributes));

        //get subdirectories
        foreach (var subDir in dir.GetDirectories())
        {
            xmlInfo.Add(CREATEXML(subDir));
        }

        //get all the files
        foreach (var file in dir.GetFiles())
        {
            xmlInfo.Add(new XElement("File",
                new XElement("name", file.Name),
                new XElement("size", file.Length),
                new XElement("lastModify", file.LastWriteTime),
                new XElement("Attributes", file.Attributes.ToString())));
        }
        return xmlInfo; 
```

# html - HTML 页面生命周期

> ID：15981239
> 
> 赞同：11
> 
> 时间：2013-04-12T21:36:01.060
> 
> 标签：html

我试图了解 HTML 页面的生命周期。我在网上找不到任何好的资源。于是我在ie中打开了f12工具，自己做了一些实验。基于此，我得出了一些结论，有人可以告诉我我是否正确吗？

我的观察

1>当首先通过 HTTP 请求页面时，浏览器会接收 HTML 框架。此时没有向用户显示任何内容。

2>基于 HTML 骨架中的内容，会发出更多额外的资源请求（外部 JavaScript、css、图像等）

3>浏览器等待，直到它收到脚本和css资源的HTTP状态码。

4>一旦收到css和JavaScript的HTTP状态码，浏览器才开始从上到下加载文档，执行途中遇到的任何嵌入的JavaScript。

5>如果顶部嵌入的 JavaScript 引用底部的 HTML 元素，则 JavaScript 将失败。

6>一旦整个文档完成加载，jquery 事件 $(document).ready 就会被触发。（也就是说，如果我使用的是 JQuery）

7>浏览器不等待脚本和css以外的资源，因此图像等资源可能会在页面显示给用户后稍后加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:43:49.163

你说得很对。但这取决于代码（尤其是第 5、6 和 7 点）。例如，如果顶部的 JS 在 内`$(document).ready`，那么它不会失败。

其次，我更喜欢 Firefox F12 或 Chrome F12 而不是 IE。它们非常详细且对开发人员友好。请参阅其中的`NET`选项卡以进一步了解。它将向您显示调用和加载资源的确切顺序，这是您主要寻找的。

# c# - 如何使用 sqlite-net 在适用于所有数据库模型的父类中实现插入、更新和删除？

> ID：15981241
> 
> 赞同：3
> 
> 时间：2013-04-12T21:36:06.253
> 
> 标签：c#, sqlite, windows-store-apps, sqlite-net

我`SQLite`在`Windows 8 Store Application`. 此外，我使用 SQLite 包装器`sqlite-net`对数据库进行操作。

我将详细解释这一点，以便您了解我的情况。有些`Model classes`包含业务逻辑，例如类**Location**。然后是`DatabaseModels`从中生成数据库表的位置，例如**LocationDb**。

我不想在每个模型类中实现基本的数据库方法，如**Insert(Model model)、Update(Model model)**、**Delete(int id)**、**GetAllRecords()**和**GetRecord(int id) 。**相反，我想在所有模型的基类中实现这些方法。所有模型的这个基类称为**ModelBase**；所有数据库模型的基类是**DbModelBase**。

对所有模型执行如下 Insert 方法没有问题：

```
 public int Insert(ModelBase model)
    {
        int id;
        using (var db = new SQLite.SQLiteConnection(MainApplication.DBPath))
        {
            db.Insert(model.GetDbModelFromModel());
            id = (int)SQLite3.LastInsertRowid(db.Handle);
        }
        return id;
    } 
```

但我不知道如何使用 sqlite-net 实现其他的。我需要在特定表中找到特定的数据记录。我有一个包含 id 的模型对象。**但是如何在不显式调用特定表的情况下使一种方法适用于所有模型类？** 以下代码适用于单个特定数据库表...

```
 using (var db = new SQLite.SQLiteConnection(MainApplication.DBPath))
        {
            var queryResult = db.Table<LocationDb>().Where(l => l.Id == model.Id);
            if (queryResult.Count() == 1)
            {
                db.Update(new TeacherDb(model));
            }
        } 
```

...但我不会写

```
var queryResult = db.Table<typeof(databaseModel)>().Where(t => t.Id == model.Id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:55:27.837

为此编写一个[通用函数](http://msdn.microsoft.com/en-us/library/ms379564.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T07:06:26.823

这个解决方案怎么样：

```
public class BaseModel<T> where T : Type
{
    protected T Id;
    /// <summary>
    /// Adds a new record to data base. It doesn't check for record existance.
    /// </summary>
    /// <returns></returns>
    protected BaseModel<T> Add() 
    {
        try
        {
            var entities = Variable.CurrentEntities;
            var dbSet = entities.Set<BaseModel<T>>();
            var result = dbSet.Add(this);
            entities.SaveChanges();
            return result;
        }
        catch (Exception exception)
        {
            LogException.HandleException(exception);
            return null;
        }
    }

    protected bool Update()
    {
        try
        {
            var entities = Variable.CurrentEntities;
            var dbSet = entities.Set<BaseModel<T>>();
            var original = dbSet.Find(this);
            entities.Entry(original).CurrentValues.SetValues(this);
            entities.SaveChanges();
            return true;
        }
        catch (Exception exception)
        {
            LogException.HandleException(exception);
            return false;
        }
    }

    protected BaseModel<T> Delete()
    {
        try
        {
            var entities = Variable.CurrentEntities;
            var dbSet = entities.Set<BaseModel<T>>();
            var result = dbSet.Remove(this);
            entities.SaveChanges();
            return result;
        }
        catch (Exception exception)
        {
            LogException.HandleException(exception);
            return null;
        }
    }

    protected bool Upsert()
    {
        try
        {
            var entities = Variable.CurrentEntities;
            var dbSet = entities.Set<BaseModel<T>>();
            dbSet.AddOrUpdate(this);
            return true;
        }
        catch (Exception exception)
        {
            LogException.HandleException(exception);
            return false;
        }
    }

    protected BaseModel<T> Save()
    {
        try
        {
            var entities = Variable.CurrentEntities;
            var dbSet = entities.Set<BaseModel<T>>();
            var original = dbSet.Find(Id);
            if (original == null)
            {
                original = dbSet.Add(this);
            }
            else
            {
                entities.Entry(original).CurrentValues.SetValues(this);
            }
            entities.SaveChanges();
            return original;
        }
        catch (Exception exception)
        {
            LogException.HandleException(exception);
            return null;
        }
    }
} 
```

# for-loop - 替换列中的某些单元格值

> ID：15981242
> 
> 赞同：2
> 
> 时间：2013-04-12T21:36:06.503
> 
> 标签：for-loop, replace, google-apps-script, google-sheets, range

**免责声明**：我是Newb。我对脚本有点了解，但编写它对我来说很痛苦，主要是循环和数组，因此如下。

我正在尝试从特定列（在本例中为 H [8]）中提取所有数据，检查该列中每个单元格的值，如果是，将其更改为是；如果是n，则改为No；如果它是空的，请不要理会它并移动到下一个单元格。

这是我到目前为止所拥有的。像往常一样，我相信我已经很接近了，但是我无法设置活动单元格的值，也看不出我在哪里搞砸了。在某一时刻，我实际上在列中将 ever 值更改为 Yes（*非常感谢在这些情况下撤消*）。

**工作表示例**：

```
..... COL-H  
r1... [service] <-- header  
r2... y  
r3... y  
r4... n  
r5... _  <-- empty  
r6... y 
```

**意图：**将所有 y 更改为 Yes，将所有 n 更改为 No（跳过空白单元格）。

**到目前为止我已经尝试过**：

功能尝试1

```
function Thing1() {
  var ss = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("mySheet");
  var lrow = ss.getLastRow();
  var rng = ss.getRange(2, 8, lrow - 1, 1);
  var data = rng.getValues();

  for (var i=0; i < data.length; i++) {
    if (data[i][0] == "y") {
      data[i][0] == "Yes";
    }
  }
} 
```

功能尝试2

```
function Thing2() {
  var ss = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("mySheet");
  var lrow = ss.getLastRow();
  var rng = ss.getRange(2, 8, lrow - 1, 1);
  var data = rng.getValues();

  for (var i=0; i < data.length; i++) {
    if (data[i][0] == "n") {
      data.setValue("No");
    } else if (data[i][0] == "y") {
      data.setValue("Yes");
    }
  }
} 
```

**用法**：

一旦我在这里完成，我想修改函数，以便我可以定位任何列并将一个值更改为另一个（我已经有一个方法，但我需要能够设置值）。就像这样：=replace(sheet, col, orig_value, new_value)。我也会在下面发布。

在此先感谢您的帮助。

* * *

**用于在列中搜索和替换的完整代码**

```
function replace(sheet, col, origV1, newV1, origV2, newV2) {
  // What is the name of the sheet and numeric value of the column you want to search?
  var sheet = Browser.inputBox('Enter the target sheet name:');
  var col = Browser.inputBox('Enter the numeric value of the column you\'re searching thru');

  // Add old and new targets to change (Instance 1):
  var origV1 = Browser.inputBox('[Instance 1:] What old value do you want to replace?');
  var newV1 = Browser.inputBox('[Instance 1:] What new value is replacing the old?');

  // Optional - Add old and new targets to change (Instance 2):
  var origV2 = Browser.inputBox('[Instance 2:] What old value do you want to replace?');
  var newV2 = Browser.inputBox('[Instance 2:] What new value is replacing the old?');

  // Code to search and replace data within the column
  var ss = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(sheet);
  var lrow = ss.getLastRow();
  var rng = ss.getRange(2, col, lrow - 1, 1);
  var data = rng.getValues();

  for (var i=0; i < data.length; i++) {
    if (data[i][0] == origV1) {
      data[i][0] = newV1;
    } else if (data[i][0] == origV2) {
      data[i][0] = newV2;
    }
  }
  rng.setValues(data);
} 
```

希望这可以帮助那里的人。再次感谢@ScampMichael！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T22:07:32.467

名为 data 的数组是根据范围中的值创建的，并且在创建后独立于电子表格，因此更改数组中的元素不会影响电子表格。您必须修改数组，然后将整个数组放回原来的位置。

```
 for (var i=0; i < data.length; i++) {
    if (data[i][0] == "n") {
      data[i][0] = "No";
    } else if (data[i][0] == "y") {
      data[i][0] = "Yes";
    }
  }
rng.setValues(data); // replace old data with new
} 
```

# java - 将 jdbc 连接代码放在 servlet 类中是个好主意吗？

> ID：15981244
> 
> 赞同：2
> 
> 时间：2013-04-12T21:36:16.680
> 
> 标签：java, jsp, servlets, jdbc

我是 servlet 和数据库的新手。`core.java`我有一个文件，其中有一个 JDBC 连接代码。在同一个目录中，我有一个`coreServlet.java`从 HTML 页面获取表单值的文件。我的问题是：

1.  如何在两个 java 类之间进行交互，例如如何使用从 servlet(coreServlet.java) 中的 HTML 表单获得的变量到我的 core.java 文件，以便我可以将其存储在我的数据库中？
2.  将我的 jdbc 连接代码放在 coreServlet.java 中是一个更好的主意吗？

我的项目结构是这样的：

```
 - aarya(project name)   
        |
         - WEB-INF
                 |
        |         -web.xml
        -src
           |
          -pkg
           |
            -CoreServlet.java(servlet to interact HTML form)
            -Main.java
            -Core.java(jdbc code is here to interact database)
        |
        -html
            |
            - core.html
        |
        - css
             |
             -core.css

        |
        -javascript
                  |
                   -core.js
        |
        - lib
        |
        -index.html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:05:23.860

数据库连接数据应该在您的 JNDI 数据源中，如果您使用连接池但从不在类中会**更好**。由于您的是 Web 应用程序，请注意连接池配置在很大程度上取决于 Web 应用程序服务器。

[例如，在Tomcat 7 数据库连接池配置](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#Database_Connection_Pool_%28DBCP%29_Configurations)和[JBoss 7 数据库连接池配置](https://community.jboss.org/wiki/DataSourceConfigurationInAS7)中对此进行了很好的解释（在 GlassFish 和其他 Web 应用程序服务器上配置数据库连接池还有其他步骤，请注意每个服务器上的配置不同） .

从这两个示例中，您可以看到您将有一个 XML 文件，其中放置了连接属性：数据库 URL、用户、密码、最小和最大池连接大小（将打开多少个数据库连接）

*   Tomcat方式：

    ```
    <Resource name="jdbc/ProjectX" auth="Container"
        type="javax.sql.DataSource" driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/projectx"
        username="user" password="password" maxActive="20" maxIdle="10" maxWait="-1"/> 
    ```

*   JBoss方式：

    ```
    <datasource jndi-name="jdbc/ProjectX" pool-name="MySqlDS">
            <connection-url>jdbc:mysql://localhost:3306/projectx</connection-url>
            <driver>com.mysql</driver>
            <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
            <pool>
                <min-pool-size>10</min-pool-size>
                <max-pool-size>100</max-pool-size>
                <prefill>true</prefill>
            </pool>
            <security>
                <user-name>user</user-name>
                <password>password</password>
            </security>
            <statement>
                <prepared-statement-cache-size>32</prepared-statement-cache-size>
                <share-prepared-statements/>
            </statement>
    </datasource>
    <drivers>
        <driver name="com.mysql" module="com.mysql">
            <xa-datasource-class>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</xa-datasource-class>
        </driver>
    </drivers> 
    ```

最后，如果您配置了数据库连接池并且它可以工作，那么您在代码中恢复连接所需要做的就是调用[`InitialContext#lookup`](http://docs.oracle.com/javase/6/docs/api/javax/naming/InitialContext.html#lookup%28java.lang.String%29)以使用其 JNDI 资源名称恢复资源。

知道了这一点，在配置 JNDI 资源以连接到名为“jdbc/ProjectX”的 MySQL 数据库后，您可以拥有一个恢复如下的`Connection`类：

```
public class DatabaseConnectivity {
    public static Connection getConnection() throws NamingException, SQLException {
        InitialContext cxt = new InitialContext();
        DataSource ds = (DataSource) cxt.lookup("java:/comp/env/jdbc/ProjectX" );
        return ds.getConnection();
    }
} 
```

顺便说一句，我会为包使用不同的名称来了解类的功能组。例如：

```
src
- edu.home.controller.servlet
  + CoreServlet.java
- edu.home.controller.filter
  + SessionFilter.java
- edu.home.model.entity
  + AnEntity.java
  + AnotherEntity.java
- edu.home.model.database
  + DatabaseConnectivity.java
- edu.home.model.service
  + AnEntityService.java
  + AnotherEntityService.java
(and on and on...) 
```

# java - 无法启动活动 ComponentInfo{com.naviiid.soundshot/com.naviiid.soundshot.MicroFilm}：java.lang.NullPointerException

> ID：15981245
> 
> 赞同：0
> 
> 时间：2013-04-12T21:36:19.660
> 
> 标签：java, android, android-activity

在我使用单个按钮的主要活动中，单击以下活动启动以使用 android 中的默认相机应用程序拍摄图像，然后录制声音。

但是，每当我单击主要活动中的按钮时，我都会收到此错误：

```
java.lang.RuntimeException: Unable to start activity 
ComponentInfo{com.naviiid.soundshot/com.naviiid.soundshot.MicroFilm}:
java.lang.NullPointerException 
```

相机应用程序启动有一点，但在此之前我的应用程序已经停止！这是代码（对不起，代码有点长）：

```
package com.naviiid.soundshot;

import java.io.File
import java.util.Calendar;
import android.R.drawable;
import android.app.Activity;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.media.MediaRecorder;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.Toast;

public class MicroFilm extends Activity {

    private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
    private Uri imageUri;
    public static final int MEDIA_TYPE_IMAGE = 1;
    public static final int MEDIA_TYPE_VIDEO = 2;
    private static File mediaStorageDir;
    private ImageView image;
    private ImageView record;
    private ImageView save;
    private ImageView capture;
    private boolean visibleButtons = true;
    private MediaRecorder soundRecorder;
    private String mediaFilePath;
    private static Calendar cal;
    boolean recording = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_micro_film);

        String mediaState = Environment.getExternalStorageState();
        if (!mediaState.equals(Environment.MEDIA_MOUNTED)){
            Toast.makeText(MicroFilm.this, "Media unmounted! \n Mount media firts..", Toast.LENGTH_LONG).show();
            Log.d("StorageState", "Media Unmounted");
            finish();
        }

        mediaStorageDir = new File(Environment
                .getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM)
                .getAbsolutePath()
                + "/MicroFilm");

        takePicture(); // this method will capture image from camera intent and
                        // returns to main activity if user cancels

        // View things
        image = (ImageView) findViewById(R.id.imageViewPicture);
        record = (ImageView) findViewById(R.id.imageViewMic);
        save = (ImageView) findViewById(R.id.imageViewSave);
        capture = (ImageView) findViewById(R.id.imageViewCapture);

        setBackgroundImage(); // shows taken picture
        captureSound(); // prepares for recording, recording starts with imageButton click

    }

    private void captureSound() {
        // prepare things to record
        soundRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        soundRecorder.setOutputFormat(MediaRecorder.OutputFormat.AMR_NB);
        soundRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        File soundFile = getNewSoundFile();
        soundRecorder.setOutputFile(soundFile.getAbsolutePath());
        try{
            soundRecorder.prepare();
        }catch (Exception e) {
            Log.d("SoundRecorder", "unable to prepare");
            Toast.makeText(MicroFilm.this, "Mic in use", Toast.LENGTH_SHORT).show();
            return;
        }

        //listeners
        soundRecorderListeners();

    }

    private void soundRecorderListeners() {

        record.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (recording){
                    soundRecorder.stop();
                    soundRecorder.release();
                    recording = false;
                    record.setBackgroundResource(drawable.ic_btn_speak_now);
                }else{
                    soundRecorder.start();
                    recording = true;
                    record.setBackgroundResource(drawable.presence_audio_busy);
                }
            }
        });
    }

    private File getNewSoundFile() {
        // Create a media file name
        String timeStamp;
        cal = Calendar.getInstance();
        timeStamp = "" + cal.get(Calendar.YEAR) + cal.get(Calendar.MONTH) + 1
                + cal.get(Calendar.DAY_OF_MONTH) + "_"
                + cal.get(Calendar.HOUR_OF_DAY) + cal.get(Calendar.MINUTE)
                + cal.get(Calendar.SECOND);
        mediaFilePath = mediaStorageDir.getAbsolutePath() + "/AUD_" + timeStamp
                + ".amr";
        return new File(mediaFilePath);
    }

    private void setBackgroundImage() {
        // shows taken picture in background
        image.setImageDrawable(Drawable.createFromPath(imageUri.getPath()));
        image.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (visibleButtons) {
                    record.setVisibility(View.INVISIBLE);
                    save.setVisibility(View.INVISIBLE);
                    capture.setVisibility(View.INVISIBLE);
                    visibleButtons = false;
                } else {
                    record.setVisibility(View.VISIBLE);
                    save.setVisibility(View.VISIBLE);
                    capture.setVisibility(View.VISIBLE);
                    visibleButtons = true;
                }
            }
        });
    }

    private void takePicture() {
        Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        imageUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to
        // save the image
        camera.putExtra(MediaStore.EXTRA_OUTPUT, imageUri); // set the image file
        // name

        // start the image captugetOutputMediaFileUrire Intent
        startActivityForResult(camera, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

    }

    /** Create a file Uri for saving an image or video */
    private static Uri getOutputMediaFileUri(int type) {
        return Uri.fromFile(getOutputMediaFile(type));
    }

    /** Create a File for saving an image or video */
    private static File getOutputMediaFile(int type) {
        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

        // Environment
        // .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
        // "MyCameraApp");
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d("MicroFilm", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp;
        cal = Calendar.getInstance();
        timeStamp = "" + cal.get(Calendar.YEAR) + cal.get(Calendar.MONTH) + 1
                + cal.get(Calendar.DAY_OF_MONTH) + "_"
                + cal.get(Calendar.HOUR_OF_DAY) + cal.get(Calendar.MINUTE)
                + cal.get(Calendar.SECOND);
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator
                    + "IMG_" + timeStamp + ".jpg");
        } else if (type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator
                    + "VID_" + timeStamp + ".mp4");
        } else {
            return null;
        }

        return mediaFile;
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                // Image captured and saved to fileUri specified in the Intent
                Toast.makeText(MicroFilm.this, "Image saved", Toast.LENGTH_LONG).show();
            } else if (resultCode == RESULT_CANCELED) {
                finish();
            } else {
                // Image capture failed, advise user
            }
        }
    }

} 
```

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:40:27.223

我建议您为所有实例变量分配一些初始值。

当您在调用方法时将空对象作为引用传递时，会发生 NULLPOINTEREXCEPTION。

这很可能是因为您没有初始化这些变量。

例如，

```
private Uri imageUri; 
```

类似于

```
private Uri imageUri = new Uri(); 
```

（这只是一个示例，可能不是为您的预期用途正确初始化 Uri 类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T06:20:42.970

只写 `soundRecorder=new MediaRecorder soundRecorder();`之后 `setContentView(R.layout.activity_micro_film);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:42:40.817

我认为你`NullPointerException`的方法被抛出了`captureSound()`。

`soundRecorder`在开始调用此对象的方法之前，您必须为变量初始化一个值。

# java - 在android上动态添加按钮作为行和列？

> ID：15981249
> 
> 赞同：0
> 
> 时间：2013-04-12T21:36:29.663
> 
> 标签：java, android

```
public class MainActivity extends Activity {
    int i,j;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.HORIZONTAL);
        layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        LinearLayout layout2 = new LinearLayout(this);
        layout2.setOrientation(LinearLayout.HORIZONTAL);
        layout2.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
        LinearLayout layout1 = new LinearLayout(this);
        layout1.setOrientation(LinearLayout.VERTICAL);
        layout1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

                    for(j=0;j<5;j++){
                Button myButton = new Button(this);
                myButton.setText(""+j);
                myButton.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                myButton.setTextSize(20);
                layout.addView(myButton);                   
        }
                    layout1.addView(layout);
                    for(j=5;j<10;j++){
                        Button myButton = new Button(this);
                        myButton.setText(""+j);
                        myButton.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                        myButton.setTextSize(20);
                        layout2.addView(myButton);                      
                }
                    layout1.addView(layout2);

        setContentView(layout1);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

以上是我的代码。我能够动态创建两行 5 列的按钮。但是在这里我必须手动为行创建布局（布局，布局2）。我想我会定义一个线性布局数组。但是，当我尝试指定 setOrientation 和 setLayoutParams 时，程序会崩溃。我试过了

```
layout3[0].setOrientation(LinearLayout.HORIZONTAL); 
```

但是程序崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:47:12.457

其实很简单

您需要指定

```
layout3[i] = new LinearLayout(this);
            layout3[i].setOrientation(LinearLayout.HORIZONTAL);
            layout3[i].setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT)); 
```

然后它工作。

# css - CSS 中的绝对定位（要使用的值）

> ID：15981253
> 
> 赞同：-3
> 
> 时间：2013-04-12T21:36:45.847
> 
> 标签：css

你怎么知道什么数字用于顶部和左侧的绝对定位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:39:09.063

主要是你不断改变数字，直到它是你想要的。您可以设置它并刷新并重复该操作，直到获得所需的结果。

您还可以查看开发人员工具（例如在 Chrome 中右键单击和检查元素）。您可以更改这些数字并在页面上实时更新。然后，您可以将正确的数字复制回您的 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:46:56.853

*   父元素必须是 position:relative
*   子元素必须是 position:absolute

**left**是分隔父元素内部左边框的子元素的值。

**top**是分隔父元素内上边框的子元素的值。

# php - PHP：对变量扩展感到困惑

> ID：15981256
> 
> 赞同：-3
> 
> 时间：2013-04-12T21:37:03.053
> 
> 标签：php

我正在关注[https://stackoverflow.com/questions/62617/whats-the-best-way-to-separate-php-code-and-html中的 PHP 模板示例](https://stackoverflow.com/questions/62617/whats-the-best-way-to-separate-php-code-and-html)

我的模板是：

```
class ViewTemplate {
private $args;
private $file;

public function __get($name) {
    return $this->args[$name];
}

public function __construct($file, $args = array()) {
    $this->file = $file;
    $this->args = $args;
}

public function render() {
    include $this->file;
}
} 
```

我这样使用它：

```
 $event = "calendar";
    $view = new ViewTemplate('views/main.php', array(
        'topNav' => new ViewTemplate('views/topNav.php', array('login' => $login)),
        'leftPane' => new ViewTemplate('views/leftPane.php', array('login' => $login)),
        'mainContentNav' => new ViewTemplate('views/mainContentNav.php', array('login' => $login, 'event' => $event)),
        'mainContent'  => new ViewTemplate('views/mainContent/' + $event + '.php', array('login' => $login, 'event' => $event)),
        'footer'  => new ViewTemplate('views/footer.php', array('login' => $login))
    )); 
```

我越来越：

```
[12-Apr-2013 21:33:42 UTC] PHP Warning:  include(0): failed to open stream: No such file or directory in C:\Users\Owner\PhpstormProjects\CRM\admin\classes\Lifestyle\ViewTemplate.php on line 23

[12-Apr-2013 21:33:42 UTC] PHP Warning:  include(): Failed opening '0' for inclusion (include_path='C:\Users\Owner\wamp\bin\php\php5.3.13\pear;C:\Users\Owner\PhpstormProjects\CRM\admin\classes\Lifestyle\classes') in C:\Users\Owner\PhpstormProjects\CRM\admin\classes\Lifestyle\ViewTemplate.php on line 23 
```

问题似乎是以下位，我正在初始化数组：

```
'mainContent'  => new ViewTemplate('views/mainContent/' + $event + '.php', array('login' => $login, 'event' => $event)), 
```

如果我将其更改为：

```
'mainContent'  => new ViewTemplate('views/mainContent/calendar.php', array('login' => $login, 'event' => $event)), 
```

然后它起作用了，但它剥夺了我想要的动态用例。

是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:39:45.893

```
'mainContent'  => new ViewTemplate('views/mainContent/' + $event + '.php', array('login' => $login, 'event' => $event)), 
```

PHP 与 JS 的连接方式不同。在 PHP 中，连接运算符是`.`.

```
'mainContent'  => new ViewTemplate('views/mainContent/' . $event . '.php', array('login' => $login, 'event' => $event)), 
```

是对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:38:45.590

[PHP`.`用于连接](http://us1.php.net/language.operators.string)。`+`仅用于添加。

```
'views/mainContent/' . $event . '.php'
//                   ^        ^ 
```

# rest - 龙卷风可以处理分页吗？

> ID：15981257
> 
> 赞同：3
> 
> 时间：2013-04-12T21:37:06.993
> 
> 标签：rest, sorting, python-2.7, pagination, tornado

Django REST 框架让你设置分页。当我们发出请求时，它会返回一个 JSON 对象，该对象具有一个“分页”属性，该属性具有“下一个”和/或“上一个”属性，其中包含其他页面的 url（如果它们存在）。

Tornado 是否提供设置分页的选项？

我在网上搜索了龙卷风分页示例，但找不到任何内容。

任何帮助表示赞赏。提前谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T04:43:09.927

不，因为分页需要与数据库密切配合，而 Tornado 与数据库无关。

这是我使用的 UI 模块；您需要计算总结果以及页面结果（如果只是构建分页链接，这不会限制您的结果）：

```
from __future__ import division
import math
import urlparse
import urllib

import tornado.web

def update_querystring(url, **kwargs):
    base_url = urlparse.urlsplit(url)
    query_args = urlparse.parse_qs(base_url.query)
    query_args.update(kwargs)
    for arg_name, arg_value in kwargs.iteritems():
        if arg_value is None:
            if query_args.has_key(arg_name):
                del query_args[arg_name]

    query_string = urllib.urlencode(query_args, True)     
    return urlparse.urlunsplit((base_url.scheme, base_url.netloc,
        base_url.path, query_string, base_url.fragment))

class Paginator(tornado.web.UIModule):
    """Pagination links display."""

    def render(self, page, page_size, results_count):
        pages = int(math.ceil(results_count / page_size)) if results_count else 0

        def get_page_url(page):
            # don't allow ?page=1
            if page <= 1:
                page = None
            return update_querystring(self.request.uri, page=page)

        next = page + 1 if page < pages else None
        previous = page - 1 if page > 1 else None

        return self.render_string('uimodules/pagination.html', page=page, pages=pages, next=next,
            previous=previous, get_page_url=get_page_url) 
```

这是模块模板（上例中的 uimodules/pagination.html）：

```
{% if pages > 1 %}
<div class="pagination pagination-centered">
  <ul>
  <li{% if previous %}><a href="{{ get_page_url(previous) }}">&laquo;</a>{% else %} class="disabled"><span>&laquo;</span></li>{% end %}  
  {% for page_num in xrange(1, pages + 1) %}{# 1-index range #}
  <li{% if page_num != page %}><a href="{{ get_page_url(page_num) }}">{{ page_num }}</a>{% else %} class="active"><span>{{ page_num }}</span></li>{% end %}
  {% end %}
  <li{% if next %}><a href="{{ get_page_url(next) }}">&raquo;</a>{% else %} class="disabled"><span>&raquo;</span></li>{% end %}  
</ul>
</div>
{% end %} 
```

不要忘记[告诉您的龙卷风应用程序有关该模块的信息](http://www.tornadoweb.org/en/stable/overview.html#ui-modules)。

最后，要实际使用它：

```
{% for result in results %}
<p>{{ result }}</p>
{% end %}
{% module Paginator(page, page_size, results_count) %} 
```

希望有帮助！

# android - 我应该如何在android动态壁纸中设置偏移量变化（屏幕滚动）

> ID：15981259
> 
> 赞同：3
> 
> 时间：2013-04-12T21:37:27.227
> 
> 标签：android, live-wallpaper, screen-resolution, homescreen

我是新手，这是我的第一个 android 项目，我似乎无法找到如何让 Bitmap 为我工作。我真的需要这段代码我不知道如何设置偏移量变化我需要一些帮助。

这是我的代码示例

```
@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

@Override
public Engine onCreateEngine() {
    // TODO Auto-generated method stub
    return new SwerveEngine();
}

// ===============================================
// ===============================================

public class SwerveEngine extends Engine implements Runnable {

    float mOffset;
    float xOffset = -480; 
    float yOffset ;
    float xOffsetStep = -240 ;
    float yOffsetStep ; 
    float xPixelOffset = - 480;
    float yPixelOffset ;

    float y = -1;
    float x = -240;
    float mX = -1;
    float mY = -1;
    int dx = 2;
    int dy = 2;
    int radius = 1;

    double gravity = 15;
    double energyloss = .65;
    double dt = .2;

    Bitmap done, bg;

    // private int xOffset;

    public SwerveEngine() {
        // TODO Auto-generated constructor stub
        done = BitmapFactory.decodeResource(getResources(),
                R.drawable.smalllaker);
        bg = BitmapFactory.decodeResource(getResources(),
                R.drawable.lakerpt2);

        // float x = -1*(int)((xOffset*done.getWidth()));
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
    }

    @Override
    public void onCreate(SurfaceHolder surfaceHolder) {
        // TODO Auto-generated method stub
        super.onCreate(surfaceHolder);
    }

    @Override
    public void onOffsetsChanged(float xOffset, float yOffset,
            float xOffsetStep, float yOffsetStep, int xPixelOffset,
            int yPixelOffset) {

        super.onOffsetsChanged(xOffset, yOffset,
                xOffsetStep, yOffsetStep, xPixelOffset, yPixelOffset);

        mOffset = xPixelOffset;
        drawFrame();
    }

    public void setWallpaperOffsetSteps(float xStep, float yStep) {

    }

    @Override
    public void onSurfaceChanged(SurfaceHolder holder, int format,
            int width, int height) {
        // TODO Auto-generated method stub
        super.onSurfaceChanged(holder, format, width, height);

    }

    void drawFrame() {
        final SurfaceHolder holder = getSurfaceHolder();

        Canvas c = null;
        try {
            c = holder.lockCanvas();
            if (c != null)

            c.drawBitmap(bg, mX, c.getHeight()/2, null);
            c.drawBitmap(done, 0, c.getHeight()/2 - 89, null);

        } finally {
            if (c != null)
                holder.unlockCanvasAndPost(c);
        }

    }

    // View arg0,
    public boolean onTouch(MotionEvent arg1) {
        // TODO Auto-generated method stub
        if (arg1.getAction() == MotionEvent.ACTION_MOVE) {
            mX = arg1.getX();
            mY = arg1.getY();
        } else {

            mX = -1;
            mY = -1;
        }

        super.onTouchEvent(arg1);
        return false;
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub

    }

}

@Override
public boolean onTouch(View arg0, MotionEvent arg1) {
    // TODO Auto-generated method stub
    return false;
} 
```

}

感谢您的帮助 ！！

# algorithm - 在Javascript中实现迷宫生成算法

> ID：15981271
> 
> 赞同：0
> 
> 时间：2013-04-12T21:38:40.353
> 
> 标签：algorithm, graph-algorithm, maze

我了解“深度优先”迷宫生成算法，但我需要一些帮助来使用 Javascript 实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T22:49:57.227

[Rosetta Code](http://rosettacode.org)的[Maze Generation](http://rosettacode.org/wiki/Maze_generation#JavaScript)包含许多使用简单的深度优先搜索算法生成和显示迷宫的实现：

JavaScript 中的代码：

```
function maze(x,y) {
    var n=x*y-1;
    if (n<0) {alert("illegal maze dimensions");return;}
    var horiz=[]; for (var j= 0; j<x+1; j++) horiz[j]= [];
    var verti=[]; for (var j= 0; j<y+1; j++) verti[j]= [];
    var here= [Math.floor(Math.random()*x), Math.floor(Math.random()*y)];
    var path= [here];
    var unvisited= [];
    for (var j= 0; j<x+2; j++) {
        unvisited[j]= [];
        for (var k= 0; k<y+1; k++)
            unvisited[j].push(j>0 && j<x+1 && k>0 && (j != here[0]+1 || k != here[1]+1));
    }
    while (0<n) {
        var potential= [[here[0]+1, here[1]], [here[0],here[1]+1],
            [here[0]-1, here[1]], [here[0],here[1]-1]];
        var neighbors= [];
        for (var j= 0; j < 4; j++)
            if (unvisited[potential[j][0]+1][potential[j][1]+1])
                neighbors.push(potential[j]);
        if (neighbors.length) {
            n= n-1;
            next= neighbors[Math.floor(Math.random()*neighbors.length)];
            unvisited[next[0]+1][next[1]+1]= false;
            if (next[0] == here[0])
                horiz[next[0]][(next[1]+here[1]-1)/2]= true;
            else 
                verti[(next[0]+here[0]-1)/2][next[1]]= true;
            path.push(here= next);
        } else 
            here= path.pop();
    }
    return ({x: x, y: y, horiz: horiz, verti: verti});
}

function display(m) {
    var text= [];
    for (var j= 0; j<m.x*2+1; j++) {
        var line= [];
        if (0 == j%2)
            for (var k=0; k<m.y*4+1; k++)
                if (0 == k%4) 
                    line[k]= '+';
                else
                    if (j>0 && m.verti[j/2-1][Math.floor(k/4)])
                        line[k]= ' ';
                    else
                        line[k]= '-';
        else
            for (var k=0; k<m.y*4+1; k++)
                if (0 == k%4)
                    if (k>0 && m.horiz[(j-1)/2][k/4-1])
                        line[k]= ' ';
                    else
                        line[k]= '|';
                else
                    line[k]= ' ';
        if (0 == j) line[1]= line[2]= line[3]= ' ';
        if (m.x*2-1 == j) line[4*m.y]= ' ';
        text.push(line.join('')+'\r\n');
    }
    return text.join('');
} 
```

Java中的代码：

```
public int[][] generateMaze() {
    int[][] maze = new int[height][width];
    // Initialize
    for (int i = 0; i &lt; height; i++)
        for (int j = 0; j &lt; width; j++)
            maze[i][j] = 1;

     Random rand = new Random();
     // r for row、c for column
     // Generate random r
     int r = rand.nextInt(height);
     while (r % 2 == 0) {
         r = rand.nextInt(height);
     }
     // Generate random c
     int c = rand.nextInt(width);
     while (c % 2 == 0) {
         c = rand.nextInt(width);
     }
     // Starting cell
     maze[r][c] = 0;

     //　Allocate the maze with recursive method
     recursion(r, c);

     return maze;
 }

 public void recursion(int r, int c) {
     // 4 random directions
     int[] randDirs = generateRandomDirections();
     // Examine each direction
     for (int i = 0; i &lt; randDirs.length; i++) {

         switch(randDirs[i]){
         case 1: // Up
             //　Whether 2 cells up is out or not
             if (r - 2 &lt;= 0)
                 continue;
             if (maze[r - 2][c] != 0) {
                 maze[r-2][c] = 0;
                 maze[r-1][c] = 0;
                 recursion(r - 2, c);
             }
             break;
         case 2: // Right
             // Whether 2 cells to the right is out or not
             if (c + 2 &gt;= width - 1)
                 continue;
             if (maze[r][c + 2] != 0) {
                 maze[r][c + 2] = 0;
                 maze[r][c + 1] = 0;
                 recursion(r, c + 2);
             }
             break;
         case 3: // Down
             // Whether 2 cells down is out or not
             if (r + 2 &gt;= height - 1)
                 continue;
             if (maze[r + 2][c] != 0) {
                 maze[r+2][c] = 0;
                 maze[r+1][c] = 0;
                 recursion(r + 2, c);
             }
             break;
         case 4: // Left
             // Whether 2 cells to the left is out or not
             if (c - 2 &lt;= 0)
                 continue;
             if (maze[r][c - 2] != 0) {
                 maze[r][c - 2] = 0;
                 maze[r][c - 1] = 0;
                 recursion(r, c - 2);
             }
             break;
         }
     }

 }

 /**
 * Generate an array with random directions 1-4
 * @return Array containing 4 directions in random order
 */
 public Integer[] generateRandomDirections() {
      ArrayList<Integer> randoms = new ArrayList<Integer>();
      for (int i = 0; i < 4; i++)
           randoms.add(i + 1);
      Collections.shuffle(randoms);

     return randoms.toArray(new Integer[4]);
 } 
```

[源代码、演示和更多解释](http://www.migapro.com/depth-first-search)

# vb6 - 如何使用 PlaySound() 在 VB6 中播放声音

> ID：15981272
> 
> 赞同：-1
> 
> 时间：2013-04-12T21:38:41.743
> 
> 标签：vb6, playsound

如何使用 PlaySound() 播放 .wav 文件？我有 PlaySound(sound) 但我不断收到错误“参数不是可选的”。

另外如何停止播放声音？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T22:42:49.183

你没有在你的问题中向我们展示任何代码，所以我只需要猜测可能是什么问题。

首先，`PlaySound`需要在您的 VB 6 代码中正确声明该函数：

```
Public Declare Function PlaySound Lib "winmm.dll" Alias "PlaySoundA" _
    (ByVal lpszName As String,                                       _
     ByVal hModule As Long,                                          _
     ByVal dwFlags As Long) As Long 
```

您还需要一些常量，您可以使用 API Viewer 应用程序轻松找到它们。这是我从网上下载的一个列表，因为我没有安装 VB 6：

```
Private Const SND_APPLICATION As Long = &H80
Private Const SND_ALIAS As Long       = &H10000
Private Const SND_ALIAS_ID As Long    = &H110000
Private Const SND_ASYNC As Long       = &H1
Private Const SND_FILENAME As Long    = &H20000
Private Const SND_LOOP As Long        = &H8
Private Const SND_MEMORY As Long      = &H4
Private Const SND_NODEFAULT As Long   = &H2
Private Const SND_NOSTOP As Long      = &H10
Private Const SND_NOWAIT As Long      = &H2000
Private Const SND_PURGE As Long       = &H40
Private Const SND_RESOURCE As Long    = &H40004
Private Const SND_SYNC As Long        = &H0 
```

您需要查阅[SDK 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743680.aspx)以了解每个幻数的含义或作用。当您在那里时，您还应该阅读函数参数的含义。从您收到的错误来看，听起来您正试图错误地调用该函数。特别是，您省略了三个参数之一，它们都是必需的（即，未标记`Optional`）。

我不知道你想播放什么样的声音，也不知道声音文件在哪里，所以我无法举一个完美捕捉你情况的例子。但是，要从磁盘上的文件播放声音，您需要将声音文件的完整路径作为第一个参数传递，第二个参数为 0（因为您没有从资源加载声音），`SND_FILENAME`第三个参数为争论。

```
PlaySound "X:\Sounds\trumpet.wav", 0, SND_FILENAME 
```

您还可以添加`SND_ASYNC`标志以异步播放声音。这意味着该函数将立即返回并允许声音在后台播放，同时执行其余代码。这不是使用`SND_SYNC`标志显式实现的默认行为。

您可以添加`SND_LOOP`标志以使声音重复播放，直到您停止它。当然，这也需要`SND_ASYNC`标志。

将所有这些放在一起，我们会得到一个持续循环并异步播放的声音：

```
PlaySound "X:\Sounds\trumpet.wav", 0, SND_FILENAME Or SND_ASYNC Or SND_LOOP 
```

要停止播放声音，请为第一个参数传递一个空字符串（因为您不需要指定要播放的声音），再次为第二个参数传递 0，为第三个参数传递 0（因为您不需要需要任何特殊行为）：

```
PlaySound vbNullString, 0, 0 
```

当然，这只有`SND_ASYNC`在您最初开始播放声音时通过标志才有效。否则，直到声音播放完毕，控制才会返回到您的代码，然后就没有什么可以停止了！

# javafx - JavaFX 修改多边形

> ID：15981274
> 
> 赞同：3
> 
> 时间：2013-04-12T21:38:47.157
> 
> 标签：javafx, polygon, shape

有没有办法在 JavaFX 中修改多边形？例如，如果我有一个三角形，然后按下并从该三角形中拖动一个点，则三角形将使用该点的新坐标进行修改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T22:49:34.437

1.  在多边形的角上分层一些控制节点。
2.  将适当的事件处理程序附加到控制节点，以便可以拖动它们。
3.  在控制节点移动时修改多边形的点（使用附加到每个控制节点位置属性的更改侦听器）。

这是一个示例解决方案：

```
import javafx.scene.Scene;

import javafx.application.Application;
import javafx.beans.property.*;
import javafx.beans.value.*;
import javafx.collections.*;
import javafx.event.EventHandler;
import javafx.scene.*;
import javafx.scene.input.MouseEvent;
import javafx.scene.paint.Color;
import javafx.scene.shape.*;
import javafx.stage.Stage;

/** Drag the anchors around to change a polygon's points. */
public class TriangleManipulator extends Application {
  public static void main(String[] args) throws Exception { launch(args); }

  // main application layout logic.
  @Override public void start(final Stage stage) throws Exception {
    Polygon triangle = createStartingTriangle();

    Group root = new Group();
    root.getChildren().add(triangle);
    root.getChildren().addAll(createControlAnchorsFor(triangle.getPoints()));

    stage.setTitle("Triangle Manipulation Sample");
    stage.setScene(
        new Scene(
            root,
            400, 400, Color.ALICEBLUE
        )
    );
    stage.show();
  }

  // creates a triangle.
  private Polygon createStartingTriangle() {
    Polygon triangle = new Polygon();

    triangle.getPoints().setAll(
        100d, 100d,
        150d, 50d,
        250d, 150d
    );

    triangle.setStroke(Color.FORESTGREEN);
    triangle.setStrokeWidth(4);
    triangle.setStrokeLineCap(StrokeLineCap.ROUND);
    triangle.setFill(Color.CORNSILK.deriveColor(0, 1.2, 1, 0.6));

    return triangle;
  }

  // @return a list of anchors which can be dragged around to modify points in the format [x1, y1, x2, y2...]
  private ObservableList<Anchor> createControlAnchorsFor(final ObservableList<Double> points) {
    ObservableList<Anchor> anchors = FXCollections.observableArrayList();

    for (int i = 0; i < points.size(); i+=2) {
      final int idx = i;

      DoubleProperty xProperty = new SimpleDoubleProperty(points.get(i));
      DoubleProperty yProperty = new SimpleDoubleProperty(points.get(i + 1));

      xProperty.addListener(new ChangeListener<Number>() {
        @Override public void changed(ObservableValue<? extends Number> ov, Number oldX, Number x) {
          points.set(idx, (double) x);
        }
      });

      yProperty.addListener(new ChangeListener<Number>() {
        @Override public void changed(ObservableValue<? extends Number> ov, Number oldY, Number y) {
          points.set(idx + 1, (double) y);
        }
      });

      anchors.add(new Anchor(Color.GOLD, xProperty, yProperty));
    }

    return anchors;
  }

  // a draggable anchor displayed around a point.
  class Anchor extends Circle {
    private final DoubleProperty x, y;

    Anchor(Color color, DoubleProperty x, DoubleProperty y) {
      super(x.get(), y.get(), 10);
      setFill(color.deriveColor(1, 1, 1, 0.5));
      setStroke(color);
      setStrokeWidth(2);
      setStrokeType(StrokeType.OUTSIDE);

      this.x = x;
      this.y = y;

      x.bind(centerXProperty());
      y.bind(centerYProperty());
      enableDrag();
    }

    // make a node movable by dragging it around with the mouse.
    private void enableDrag() {
      final Delta dragDelta = new Delta();
      setOnMousePressed(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          // record a delta distance for the drag and drop operation.
          dragDelta.x = getCenterX() - mouseEvent.getX();
          dragDelta.y = getCenterY() - mouseEvent.getY();
          getScene().setCursor(Cursor.MOVE);
        }
      });
      setOnMouseReleased(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          getScene().setCursor(Cursor.HAND);
        }
      });
      setOnMouseDragged(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          double newX = mouseEvent.getX() + dragDelta.x;
          if (newX > 0 && newX < getScene().getWidth()) {
            setCenterX(newX);
          }
          double newY = mouseEvent.getY() + dragDelta.y;
          if (newY > 0 && newY < getScene().getHeight()) {
            setCenterY(newY);
          }
        }
      });
      setOnMouseEntered(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          if (!mouseEvent.isPrimaryButtonDown()) {
            getScene().setCursor(Cursor.HAND);
          }
        }
      });
      setOnMouseExited(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
          if (!mouseEvent.isPrimaryButtonDown()) {
            getScene().setCursor(Cursor.DEFAULT);
          }
        }
      });
    }

    // records relative x and y co-ordinates.
    private class Delta { double x, y; }
  }
} 
```

![三角形](https://i.stack.imgur.com/nTLqZ.png)

我从：[CubicCurve JavaFX得出这个解决方案](https://stackoverflow.com/questions/13056795/cubiccurve-javafx)

# opengl - 使用 OpenGL 4.3 创建形状

> ID：15981278
> 
> 赞同：2
> 
> 时间：2013-04-12T21:39:13.077
> 
> 标签：opengl, opengl-3

我使用 OpenGL 4.3 编写了一个简单的程序，它显示三角形、四边形和五边形。我在以下数组中定义了我的顶点：

```
vec2 vertices[NumPoints] = {
    vec2(-1, -0.75), vec2(-0.75, -0.25), vec2(-0.5, -0.75), //Triangle
    vec2(0, -0.25), vec2(0.5, -0.25), vec2(0.5, -0.75), vec2(0, -0.75), //Quad
    vec2(0.25, 0.25), vec2(0.5, 0.5), vec2(0.75, 0.25), vec2(0.65, 0), vec2(0.35, 0) // pentagon
}; 
```

为简洁起见，我将省略大部分样板代码。在我的显示功能中，我有以下代码：

```
glDrawArrays(GL_TRIANGLES, 0, 3); // draw the points
glDrawArrays(GL_TRIANGLE_FAN, 3, 4); //quad
glDrawArrays(GL_TRIANGLE_FAN, 7, 5); //polygon 
```

一切正常，没有任何问题。但是，如果您需要预先确切知道需要多少个顶点，那么创建复杂的场景似乎相当乏味且几乎不可能。我在这里错过了什么吗？另外，如果需要创建一个圆圈，我将如何仅使用 GL_TRIANGLES 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:15:25.673

在现实世界的应用程序中，您将拥有场景管理，场景中有多个对象，每个对象有多个子对象。对象负责生成它们的顶点数据和相应的绘图调用并适当地安排它们。

例如，您可以拥有一个具有单一属性的立方体对象 - 边长。从该单一属性中，您可以生成渲染立方体所需的全部顶点集。

您还可以选择将立方体基元转换为另一个兼容的对象，例如具有 3 个属性的框基元 - 高度、宽度和深度，甚至是由面组成的任意多边形网格，这些面由边缘组成由顶点构成。

最好按这样的顺序对不同的场景对象进行排序，以最大限度地减少绘制调用的数量，这是 3D 图形难以解决的典型瓶颈。结合实例化和自适应 LOD，您可以获得显着的性能改进。

对于圆形 - 在原始模式下，绘制它的最有效方法是使用三角形扇形。但是，如果将圆形图元转换为多边形网格，则可以渲染正三角形。绘制圆所需的顶点数将会增加。使用三角形扇，第一个三角形需要 3 个顶点，然后每个附加段只需要 1 个额外顶点，对于正三角形，圆的每个段都需要完整的 3 个顶点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:00:54.607

> 我在这里错过了什么吗？

是的。您可以动态分配内存并从文件中读取数据。这就是任何现实世界的程序处理这类事情的方式。您将拥有一些允许从文件加载场景和对象的场景管理结构。文件本身将包含一些元数据，如面数、顶点数等，可用于在运行时准备数据结构。

# git - 多次合并一个分支到另一个分支 - 需要取消它们

> ID：15981280
> 
> 赞同：0
> 
> 时间：2013-04-12T21:39:14.220
> 
> 标签：git, github

我已经多次将 BranchA 合并到 DestinationBranch 中（即将 BranchA 合并到 DestinationBranch 中，继续处理 BranchA，再次合并到 DestinationBranch 中）。

我现在需要解开这些。

最好的方法是什么？

1.  单独还原每个合并？
2.  仅还原第一个合并？
3.  还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:04:21.757

如果您不关心单个合并步骤（并且没有合并其他分支），只需将 DestinationBranch 的 HEAD 重置为第一次合并之前的提交。然后再次进行合并，并记住将 BranchA 重新定位到 DestinationBranch（或者删除 BranchA 并从 DestinationBranch 的 HEAD 重新创建它）。

# mysql - ALTER TABLE mysql错误

> ID：15981284
> 
> 赞同：-2
> 
> 时间：2013-04-12T21:39:28.107
> 
> 标签：mysql, alter

我已经创建 .sql 文件有这样的代码：

```
ALTER TABLE `tb_1` ADD `ex1` TINYINT( 1 ) NOT NULL DEFAULT '0'
ALTER TABLE `tb_2` ADD `ex2` tinyint(1) NOT NULL DEFAULT '1'
ALTER TABLE `tb_3` ADD `ex2` varchar(35) NOT NULL 
```

当我尝试将其导入数据库时​​，我总是会出错。

只有当我逐行导入时才有效。

请问是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:42:03.630

如果你有连续的 SQL 语句，你应该用`;`

```
ALTER TABLE `tb_1` ADD `ex1` TINYINT( 1 ) NOT NULL DEFAULT '0';
ALTER TABLE `tb_2` ADD `ex2` tinyint(1) NOT NULL DEFAULT '1';
ALTER TABLE `tb_3` ADD `ex2` varchar(35) NOT NULL; 
```

# c# - 如何使用 C# 执行 MySQL 表的校验和？

> ID：15981285
> 
> 赞同：1
> 
> 时间：2013-04-12T21:39:32.347
> 
> 标签：c#, mysql, .net, checksum

我想检查我的 MySQL 表是否已更改，我认为对其进行校验和可能是一个很好的解决方案。我正在使用官方的 MySQL .NET 连接器。

通常我使用`MySqlDataReader`来从我的选择查询中获取数据，但是我不确定它如何在校验和查询中工作。这就是我到目前为止所拥有的。

```
string query = "checksum table `" + name + "`";

string result = "";

if (isConnected())
{
   MySqlCommand cmd = new MySqlCommand(query, connection);
   cmd.ExecuteNonQuery();
} 
```

[我在这里](https://stackoverflow.com/questions/12831918/hash-mysql-database-schema)找到了校验和查询。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:46:28.690

您有正确的查询，但是您应该了解可能的性能影响。

如果表是 MyISAM（如果您使用的是更新版本的 MySQL，则可能不应该是）并且您为表定义了 CHECKSUM=1 选项，那么您可以执行 QUICK 校验和，这应该会很快发生。

如果你有一个 INNODB 表，你将不得不执行一个全表扫描来执行这个命令。从性能的角度来看，这可能在相当大的积极使用的表上是不可行的。

我建议在这里查看 MySQL 文档以获取您的选项。

[http://dev.mysql.com/doc/refman/5.5/en/checksum-table.html](http://dev.mysql.com/doc/refman/5.5/en/checksum-table.html)

另一个可能简单的选项是在表上放置一个触发器，每次插入/更新/删除记录时，它都会更新另一个表中的时间戳。然后，您可以将此时间戳与给定日期进行比较，以了解在该时间段内是否进行了更改。

同样，如果您的表还没有“On UPDATE CURRENT_TIMESTAMP”时间戳字段，您可以简单地添加一个，在其上放置一个索引并查询该字段的最大值。这显然会给表增加一些数据大小和索引大小的开销，这可能是不可取的。这显然也不会捕获删除（尽管您可以通过计算主索引字段来轻松检查）

# c# - Dotnet 4.0 从 2.0 升级

> ID：15981289
> 
> 赞同：1
> 
> 时间：2013-04-12T21:39:49.910
> 
> 标签：c#, asp.net, .net, visual-studio-2010, iis-7

我正在开发一个最初使用 VS 2003 创建的 dotnet C# Web 应用程序。我的目标是在不更改任何功能的情况下将此应用程序升级到 Dotnet 4.0。该解决方案有 9 个项目（1 个 Web + 8 个库项目）。Web 项目引用 DLL 中的 8 个库。首先，我在 VS2010 中创建了一个新项目，并从现有源代码中添加了所有项目文件。每次我将项目文件添加到我的解决方案时，都会提示我使用转换向导，并且我成功完成了转换向导，现在解决方案工作正常。转换后，我注意到除了“Web”项目之外，其他项目都转换为 Dotnet 2.0 而不是 4.0。如果我使用 VS2010 在本地运行它，我的应用程序运行没有错误。我的问题是

1.  为什么 Class libaray 项目没有升级到 4.0？目前，Web 项目显示为 Dotnet 4.0，Libaray 项目显示为 Dotnet 2.0。
2.  我可以使用 4.0 的 Dotnet 运行时将应用程序部署到 IIS 7.0 吗？如果我的应用程序使用 Dotnet 4.0 运行时版本，在 2.0 版中创建的 Dll 是否可以工作？

请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:47:12.657

如果您现在正在迁移，为什么不直接迁移到 Visual Studio 2012 而不是 2010？

无论如何，您可以做的是打开每个项目中的项目属性，并将目标框架更改为 .NET 框架 4.0。

然后，如果您遇到任何编译错误，您可能可以轻松地单独解决它。如果您的项目不太大，这应该相对容易。

至于你的具体问题：

1.  自动转换只会更改解决方案/项目的格式以与新版本的 Visual Studio 兼容。它不应该改变目标框架，但你可以自己改变它。

2.  是的，可以从面向 .NET 4.0 的程序集中加载和使用面向 .NET 2.0 的程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:45:38.570

1) 升级解决方案/项目文件只会升级它的格式，以便您可以在 VS 2010 中打开它。它通常会将目标 .NET 设置保留为以前的值。这是两个不同的东西。VS 2010 的美妙之处在于它让您可以针对您想要的任何版本的 .NET，因此您不再需要安装多个版本的 VS 来支持不同的 .NET 版本。它没有更改目标 .NET 版本，因为它由您决定。您可以在项目设置下更改它并重新编译您的库项目以重新生成 DLL

2) 您将需要一个用于 .NET 4 的应用程序池。.NET 向后兼容，因为 .NET 2.0 应用程序可以在安装了 .net 4 的机器上运行。但是，2.0 应用程序的应用程序池必须与 4.0 应用程序分开。因此，只需将应用程序放在正确的应用程序池中即可。

# licensing - 以 GPL（或类似）的形式发布软件，但允许使用非 GPL 插件？

> ID：15981291
> 
> 赞同：-1
> 
> 时间：2013-04-12T21:39:59.867
> 
> 标签：licensing

几天以来我一直在尝试解决这个问题，但没有办法做到这一点：
我有一个想要在 AGPL 下发布的软件，所以基本系统“是开源的”，但是我的软件有一个插件接口，可以在运行时加载外部插件（因此 GPL 不允许分离）。
我现在如何让其他人开发非 GPL 插件成为可能，因为我不喜欢 GPL 的“这部分”。

**有没有办法以某种方式允许它作为 GPL 的例外或以任何其他方式？
或者是否有一个许可证，它对代码本身具有相同的 copyleft，但允许链接的软件在不同的许可证下？**

我已经考虑过以不同的许可（如 LGPL）发布插件接口，但引用一位知名 CEO 的话：“GPL 就像癌症一样”。这是不可能的，因为插件接口必须是 GPL，因为它也链接到 (A)GPL 的主项目。

**我可以通过插件界面的某种“奇怪”双重许可来解决这个问题吗？**

PS：无论如何，我的软件是使用 .net 4.5 和 C# 开发的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:42:46.370

您可能希望将 API 库/程序集作为 LGPL 发布，这允许用户在不“污染”他们的软件的情况下链接它们，因此插件是无污染的，但仍需要对 API 库进行增强才能发布。

# java - 数组，检查java中的最小、最大和平均值

> ID：15981295
> 
> 赞同：0
> 
> 时间：2013-04-12T21:40:37.053
> 
> 标签：java, arrays, methods, average

我在让我的方法工作时遇到了一些麻烦，我相信我在调用其他方法的主要方法中做错了。我不确定是否需要 if、while 或 for 语句。谁能帮忙，我真的很感激。这是我的程序...

```
 public static void main(String[] args) throws IOException {
    Scanner kb = new Scanner(System.in);
    final int MAX = 100;
    int [] myarray = new int [MAX];
    int fillsize, total = 0, num;
    int smallest = 0, largest = 0;
    fillsize = fillarray (myarray, MAX);
    printarray (myarray, fillsize);

    num = kb.nextInt(); 
    int small = num;
    int large = num;
    total = Average(total, num);
    if(smallest (num, smallest))
    {
      small = num;
    }
    if(largest(num, largest))
    {
       large = num;      
    }
    System.out.println("The smallest value is: " + smallest);
    System.out.println("The largest value is: " + largest);
    System.out.println("The average is: " + total);

    prw.close();
}

public static int fillarray (int[] num, int MYMAX){
    Random gen = new Random();
    int retval = 0;
    int randomnum;
    for(int count = 0; count <= 30; count++){
        randomnum = gen.nextInt(150);
        num [count] = randomnum;
        System.out.println(randomnum);
        retval++;   
    }
    System.out.println("The return value is: " + retval);
    return (retval);
}
public static void printarray (int[] num, int fillsize){
    for (int counts = 0; counts < fillsize; counts++){
        System.out.println("For the position ["+counts+"] the value is " + num[counts]);
    }
    return;
}
public static boolean smallest (int num1, int num2){
    boolean returnValue;
    if (num2 < num1){
        returnValue = true;
    }
    else {
        returnValue = false;
    }
    return (returnValue);
}
public static boolean largest (int number1, int number2){
    boolean returnVal;
    if (number1 > number2){
        returnVal = true;
    }
    else{
        returnVal = false;
    }
    return (returnVal);
}
public static int Average (int avg, int sum){
    int retVal;
    retVal = avg + sum;
    return(retVal);
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:49:00.543

我怀疑问题是您将最小和最大都设置为 num ，这会使您的 if 多余。

尝试将它们都设置为 0。

此外，不推荐使用同名的变量和方法。（令人困惑）。

# javascript - 动态加载 Sublime HTML5 视频播放器

> ID：15981296
> 
> 赞同：1
> 
> 时间：2013-04-12T21:40:48.480
> 
> 标签：javascript, jquery, html, video, video-streaming

我正在尝试从我的页面动态加载一堆 sublime 视频，并且我在“sublime”和“sublimevideo”对象之间的区别上遇到了麻烦，并且文档并没有太大帮助。

我正在使用此代码来触发视频加载和“卸载”

```
$(document).ready(function() {
  sublimevideo.load();

  $('ul li').click(function() {
    var element = $(this)

    var video = element.data('video');
    var title = element.data('title');
    var description = element.data('description');

    var content = '<div class="overlay">' +
                    '<div class="content clearfix">' +
                      '<video id="video" width="640" height="400" style="margin: 0 auto;">' +
                        '<source src="../assets/video/' + video + '.mp4" type="video/mp4"></source>' +
                      '</video>' +
                      '<div class="meta">' +
                        '<h2 class="title">' + title + '</h2>' +
                        '<p class="description">Objective: ' + description + '</p>' +
                      '</div>' +
                      '<a class="close">Back</a>' +
                    '</div>' +
                  '</div>'

    $('body').append(content);
    sublimevideo.load();

    sublimevideo.ready(function() {
      sublimevideo.prepareAndPlay();

      $('.overlay').animate({opacity: 1,
        left: 0 }, 400);

      $('.overlay').click(function() {
        $(this).animate({
          opacity: 0,
          left: '-100px'},
          400,
          function() {
            sublimevideo.unprepare();
            $('body').find('.overlay').remove();
        });
      });
    });
  });
}); 
```

如果我只观看一次视频，这将非常有用。如果我尝试再次单击视频，则叠加层会打开，并且视频只会永远加载（看似）并且永远不会播放。我曾经在这一点上得到一个 js 错误，但现在没有了。

任何想法为什么会这样？我显然在准备和取消准备视频时遇到了麻烦。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-25T10:49:13.243

不知道您是否仍在处理此问题，但我在动态加载视频时遇到了类似的问题……是的，不幸的是，文档中的示例很少。和你一样，我删除了 DOM 元素，重新构建它，然后重新加载它。但是，我在 prepare() 函数的回调中包含了“播放”代码——也许这就是你的代码的问题？我的 .on('click') 函数中的代码，其中我的视频标签的源标签有一个类 '.mp4_source'：

```
var current_source = $('.mp4_source').attr('src');

if (current_source != video_location_mp4) {
    var current_width = $('#video_wrapper').width();
    var current_height = $('#video_wrapper').height();

    var new_video_wrapper = $('<div id="video_wrapper"></div>');
    var new_video_player = $('<video id="video_player"></video>')
                             .addClass('sublime')
                             .attr('width', current_width)
                             .attr('height', current_height)
                             .attr('preload', 'none')
                             .attr('data-uid', video_id)
                             .attr('data-name', viddata['subject'])
                             .attr('data-autoresize', 'fit');
    var new_source = $('<source src="' + video_location_mp4 + '"></source>')
                             .addClass('mp4_source');

    new_video_player.append(new_source);
    new_video_wrapper.append(new_video_player);

    $('#video_wrapper').remove();
    new_video_wrapper.insertBefore('#videoinfo');
    sublime.prepare('video_player', function(player) {
        player.on('metadata', function(player) {
            player.seekTo(timestamp);
        });
        player.play();
    });
} else {
    var player = sublime.player('video_player');
    player.seekTo(timestamp);
    player.play();
} 
```

# ruby-on-rails - 如何使用 Rails 中的 DELETE 方法使 /logout 路由到 /login

> ID：15981298
> 
> 赞同：2
> 
> 时间：2013-04-12T21:41:11.867
> 
> 标签：ruby-on-rails, routing

路线对我来说仍然是难以理解的。我想要的只是`logout`实际注销某人的操作。这是我的尝试：

```
resource :login, controller: "sessions" do
  collection do
    get 'new'
    get 'create'
  end
end

match '/logout', :to => 'login', :controller => "sessions", :action => :destroy, :method => :delete 
```

所以你看我有这个`sessions`控制器，我称之为“登录”。但这使我的链接：

```
<%= link_to "Log Out", login_path, :method => :delete %> 
```

除了我正在与使用我的站点作为 SSO 的外部站点集成之外，我对此没有任何问题。我需要为他们提供一个“注销”链接。所以我希望它只是“注销”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:42:42.963

`logout`你不能在你的会话控制器中做一个动作并在那里销毁会话吗？然后你的路线可以指向 session#logout

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T01:54:49.067

也许这就是你要找的？

在 routes.rb 中：

```
controller :sessions do
    get 'login' => :new
    post 'login' => :create
    delete 'logout' => :destroy
end 
```

对于注销链接：

```
<%= link_to 'Logout', logout_path("current"), method: :delete %> 
```

# vba - Excel VBA - 检查报告切片器选择（如果选择全部，则跳过）

> ID：15981304
> 
> 赞同：0
> 
> 时间：2013-04-12T21:41:22.337
> 
> 标签：vba, excel, excel-2010

我需要一些 VBA 代码的帮助。我有一个 AgeRange 切片器，我有一个工作脚本，可以插入一行、添加时间戳，然后报告切片器选择。

如果切片器中的所有项目都被选中（真），我想添加一些内容将跳过该过程。

有没有我可以插入的东西，上面写着“如果切片器没有被触摸（所有项目都是真的），那么结束子”。

到目前为止，这是我的代码：

```
Dim cache As Excel.SlicerCache
Set cache = ActiveWorkbook.SlicerCaches("Slicer_AgeRange")
Dim sItem As Excel.SlicerItem
For Each sItem In cache.SlicerItems
If sItem.Selected = True Then xAge = xAge & sItem.Name & ", "
Next sItem
Rows("1:1").Select
Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Range("A1").Select
ActiveCell.FormulaR1C1 = Format(Now(), "MM-DD-YYYY HH:MM AM/PM")
Range("B1").Select
ActiveCell.FormulaR1C1 = xAge
Range("C1").Select
End Sub 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-09T20:09:05.480

这比你要求的要多一点，但我想我会分享，因为我只是写这个供我自己使用。仅当它们被过滤（不是全部选中）时，它才会清除物理上位于工作表上的所有切片器。对于您的问题，好的一点是 for each item 循环。以及紧随其后的那一行。

```
Sub clearWorksheetSlicers(ws As Worksheet)
'clears all slicers that have their shape on a specific worksheet

Dim slSlicer As Slicer
Dim slCache As SlicerCache
Dim item As SlicerItem
Dim hasUnSel As Boolean

For Each slCache In ThisWorkbook.SlicerCaches
    For Each slSlicer In slCache.Slicers
        If slSlicer.Shape.Parent Is ws Then
            For Each item In slCache.SlicerItems
                If item.Selected = False Then
                    hasUnSel = True
                    Exit For
                End If
            Next item
            If hasUnSel = True Then slCache.ClearManualFilter
            hasUnSel = False
        End If
    Next slSlicer
Next slCache

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:07:30.673

非易失性。我自己弄的。:)

```
Dim cache As Excel.SlicerCache
Dim sName As Slicers
Dim sItem As Excel.SlicerItem
Dim xSlice As String
Dim xName As String

For Each cache In ActiveWorkbook.SlicerCaches

    xName = StrConv(Replace(cache.Name,     "AgeRange", "Ages")
    xCheck = 0
    For Each sItem In cache.SlicerItems
        If sItem.Selected = False Then
            xCheck = xCheck + 1
        Else
            xCheck = xCheck
        End If
    Next sItem

    If xCheck > 0 Then
    For Each sItem In cache.SlicerItems
        If sItem.Selected = True Then
            xSlice = xSlice & sItem.Caption & ", "
        End If
    Next sItem

        Rows("1:1").Select
        Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
        Range("B1").Select
        ActiveCell.FormulaR1C1 = xName & ": " & xSlice
        xSlice = ""
    End If

Next cache

    Range("A1").Select
    ActiveCell.FormulaR1C1 = Format(Now(), "MM-DD-YYYY HH:MM AM/PM")

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-21T10:46:13.177

Dallas Frank 的这个线程中的代码看起来应该可以工作，并且所有显式调用的属性都存在，但由于某种原因，在我的数据透视表中，SlicerItems 集合是空的。我必须通过检查每个 SlicerItem

SlicerCache.SlicerCacheLevels.Item(1).SlicerItems

这种替换并不完全是原始请求者所要求的，但它说明了 SlicerCacheLevel 的使用，当 SlicerCache.SlicerItems 原来不存在时，它让我到达了我需要的位置

```
Sub AllSlicersSelected(WorksheetWithPT As Worksheet)
Dim SlicerItems                 As SlicerItems
Dim SlicerItem                  As SlicerItem
Dim SlicerCaches                As SlicerCaches
Dim SlicerCache                 As SlicerCache
Dim SlicerCacheLevel            As SlicerCacheLevel
Dim Slicer                      As Slicer
Dim strSlicerItemsNotSelected   As String
Dim bHaveWhatWeNeed             As Boolean
Dim vSlicerItemsToSelect        As Variant

Set SlicerCaches = ThisWorkbook.SlicerCaches
For Each SlicerCache In SlicerCaches
    For Each Slicer In SlicerCache.Slicers
        If Slicer.Shape.Parent Is WorksheetWithPT Then
            bHaveWhatWeNeed = True
            Exit For
        End If
    Next
    If bHaveWhatWeNeed Then
        Exit For
    End If
Next

For Each SlicerCacheLevel In SlicerCache.SlicerCacheLevels
    For Each SlicerItem In SlicerCacheLevel.SlicerItems
        If Not SlicerItem.Selected Then
            strSlicerItemsNotSelected = strSlicerItemsNotSelected & Chr(0)
        End If
    Next
Next

If Len(strSlicerItemsNotSelected) > 0 Then
    vSlicerItemsToSelect = Split(Mid(strSlicerItemsNotSelected, 2), Chr(0))
    For Each SlicerItem In vSlicerItemsToSelect
        SlicerItem.Selected = True
    Next
End If

End Sub 
```

# javascript - 如何传递数组值或 SQL 查询的价值？

> ID：15981312
> 
> 赞同：0
> 
> 时间：2013-04-12T21:41:44.773
> 
> 标签：javascript, jquery, mysql

我的 HTML 中有一个函数调用，它创建一个新的 mysql 表，其中包含一个表列表并将它们填充到选项的元素中。然后，我需要填充其中一个选项的另一个选择语句“onselect”或“onchange”，但我不知道如何将所选选项的值传递给 sql 查询中的变量。我只能通过手动为变量赋值来让它工作。

它可能更容易使用：

```
var option_user_selection = element.options[ whatever they select ].text 
```

但后来我不知道如何纠正那个查询循环。

网址： http: [//people.cs.clemson.edu/~pjnodin/assg/index.php](http://people.cs.clemson.edu/~pjnodin/assg/index.php)

```
<body>
<div id="container">
<div id="header">
    <h1>
        SQL Query Builder
    </h1>
</div>
<div id="content-container">
    <div id="data-sets"  title="Click on a Data Set">
        <h3>
            Data Sets
        </h3>
        <form name="myForm">
            <select size="34" style="width: 200px" id="selectBox1" name="dataSets" onChange="optionBlockRecipe2(this.selectedIndex)">

            <?php
                prepareTableList();
                optionBlockRecipe();
            ?>

            </select>
            <input type='hidden' id='myhidden' value=''>
    </div>
    <div id="attributes" title="Click on an Attribute">
        <h3>
            Attributes
        </h3>
            <select size="34" style="width: 200px" id="selectBox2" name="attributes" onClick="alert(this.options[this.options.selectedIndex].value)">
                <?php
                                        optionBlockRecipe2();
                ?>
            </select>
        </form>
    </div>

<?php
function prepareTableList()
{
mysql_query("drop table Table_List");
mysql_query("drop table TheJoins");

$rs = mysql_query("SHOW tables");

mysql_query("create table Table_List(
    TableName char(20) not null,
    TableEnglish char(20),
    PRIMARY KEY(TableName))");

mysql_query("create table TheJoins
    (Table1 char(20) not null
    ,Table2 char(20) not null
    ,TheJoin char(50)
    ,primary key(Table1,Table2))");

for($i = 0; $i < mysql_num_rows( $rs); $i++)
{
    $tmp = mysql_fetch_row( $rs );
    mysql_query("INSERT into Table_List(TableName) VALUES('$tmp[0]')");
    //print("<OPTION value=\"$tmp[0]:$tmp[0]\">$tmp[0]</OPTION>\n");
}
}

function optionBlockRecipe()
{
$rs = mysql_query("SELECT TableName FROM Table_List");
for($i = 0; $i < mysql_num_rows( $rs); $i++)
{
    $tmp = mysql_fetch_row( $rs );
    print("<OPTION value=\"$tmp[0]\" selected=\"selected\">$tmp[0]</OPTION>\n");
}
}
function optionBlockRecipe2()
{
    $temp = Orders;
$rs = mysql_query("DESCRIBE '$temp'");
for($i = 0; $i < mysql_num_rows( $rs); $i++)
{
    $tmp = mysql_fetch_row( $rs );
    print("<OPTION value=\"$tmp[0]:$tmp[1]\" selected=\"selected\">$tmp[0]</OPTION>\n");
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:57:23.317

你的问题是它`<option>`实际上不是一个元素，而是元素的一个属性`<select>`。这是一个常见的误解，并且`<select>`可能是最（也可能是唯一）令人困惑的元素。

他们这样做的原因是为了让开发人员能够以有组织的方式将任意数量的可选选项添加到列表中，包括文本和值。

因此，解决问题的解决方案很简单：选择新的问题时，`option`请选择元素，而不是。`value``<select>``<option>`

此外，如果没有 AJAX，您将遇到麻烦，因为 PHP 是一种服务器端语言而不是客户端，因此它不是响应用户事件，而是响应服务器事件，例如接收提交的表单。

# algorithm - 查找大量整数的最大子集

> ID：15981315
> 
> 赞同：0
> 
> 时间：2013-04-12T21:42:02.653
> 
> 标签：algorithm, set, subset, max-size

我在 .txt 文件中有一大组 (S) 长无符号整数。如何找到具有以下属性的 S 的最大子集 (Pmax)：

```
P{X1,X2,X3,...,Xn) | X1>=(Xn/4) 
```

更多细节：

1.  当我说最大子集时，我的意思是元素数量最多的子集（n->max）。
2.  由于内存有限，我无法将 .txt 加载到数组中。
3.  我的系统内存是200MB
4.  txt 文件有 10^6 个整数。每个整数可以是长无符号 32 位。
5.  我需要找到具有以下条件的 S 的最大子集：

X1 < X2 < X3 < ... < Xn-1 < Xn 如 X1 >= (XN/4)

例如，如果 txt 文件具有以下内容：15,14,13,4,2,2,3,10,1,2,2 那么这些是可能的子集：

P1(4,10,13,14,15)

P2(3,4,10)

P3(1,2,2,2,2,3,4)

所以 Pmax(1,2,2,2,2,3,4) 因为它有更多的元素。

事实上，我不想确切地找到哪个是 Pmax。我只想找到子集 Pmax 的元素数。所以这里是7。

该算法应该非常快。

我不找人来做我的工作。我只需要一个相应的问题，这样我就可以寻找有效的解决方案。提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:55:42.667

假设您的条件意味着“子集中的所有元素都大于 X1 除以 4”，您需要 2 个简单的嵌套循环和一些辅助变量。

在伪代码中，这样的东西应该可以工作：

```
var idx = 0, largest = 0, currentIdx = 0;

while(var current = getIntegerFromFileById(currentIdx))
{
  var size = 1;
  while(getIntegerFromFileById(currentIdx + size++) > current / 4);
  if(size > largest) {
    idx = currentIdx;
    largest = size;
  }
  currentIdx++;
}
print "Longest subset is at index {idx}.";
print "It contains {largest} consecutive elements."; 
```

这也是事实上的最优实现。最明显的优化是在扫描期间将整数逐步加载到内存缓冲区中，以防止双重 I/O 操作。

万一我误解了这个条件，这应该仍然很容易适应大多数其他条件，周围的算法保持不变，你只需在内部修改条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:01:08.000

最简单的解决方案是：

1.  首先对列表进行排序（复杂度 O(nlogn)
2.  使用移动窗口，找到最大的可接受窗口。（复杂度 O(n)）

复杂度：O(nlogn)。

关于第 2 步的更多详细信息：

让 low 跟踪最低元素，让 high 跟踪最高元素。

初始化：将第一个元素设置为低。对 4*x[low] 进行二分搜索，这就是你的高位。设置 maxWindow=high-low+1。

在每一步：将 high 增加 1，并增加 low 使得 x[low]>=x[high]。计算元素数 = high-low+1，并相应更新 maxWindow。

# java - 将对象数组转换为可比较数组

> ID：15981319
> 
> 赞同：7
> 
> 时间：2013-04-12T21:42:20.403
> 
> 标签：java

我在做在线算法课的作业时遇到了一个问题。转换`Object[]`到`T[]`T 是 Comparable 的位置会引发运行时异常

```
public  static <T extends Comparable<? super T>> void mergeSort(T[] xs) {
    T[] aux = (T[]) new Object[xs.length];
    mergeSort(xs, aux, 0, xs.length);
} 
```

我可以用 C# 重写它，这在创建泛型数组时没有任何问题，但我宁愿学习如何在 Java 中处理这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T21:45:29.983

如果您遇到运行时异常，则意味着您尝试转换的对象实际上并不具有该类型。语言与它没有任何关系。您的代码中可能存在错误。

编辑：听起来您对 Java 类型系统的工作方式感到困惑。在 C# 中，泛型实际上在运行时表示不同的类型。在 Java 中，泛型类型在运行时不存在。它们只是为了方便实现更好的编译时类型检查。在编译期间，泛型在称为类型擦除的过程中被实际类型替换。

通常，泛型类型的擦除是`Object`，但由于您为 提供了上限`T`，它会转换为该范围，`Comparable`。因此，擦除后，您的代码如下所示。

```
Comparable[] aux = (Comparable[]) new Object[xs.length]; 
```

换句话说，您正在创建一个 type 数组`Object[]`并立即尝试将其强制转换为 type `Comparable[]`。由于`Object`未实现`Comparable`，因此类型不兼容，因此您会遇到运行时异常。您可以通过创建一个 s 数组来解决此问题`Comparable`。

```
public  static <T extends Comparable<? super T>> void mergeSort(T[] xs) {
    T[] aux = (T[]) new Comparable[xs.length];
    mergeSort(xs, aux, 0, xs.length);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T21:54:51.587

尝试这个：

```
public  static <T extends Comparable<? super T>> void mergeSort(T[] xs) {
    T[] aux = (T[])java.lang.reflect.Array.newInstance(xs.getClass().getComponentType(), xs.length);
    mergeSort(xs, aux, 0, xs.length);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T21:46:53.923

数组是协变的，这意味着它们在运行时保留其元素的类型。Java 的泛型不是。所以基本上它们不会混合。

另请参阅：[Java 中的通用数组](https://stackoverflow.com/questions/1817524/generic-arrays-in-java)

您不能创建泛型数组，也不能强制转换为它们。最好使用数组列表。

# php - 我如何仅从 var dump 数组中获取值？

> ID：15981320
> 
> 赞同：1
> 
> 时间：2013-04-12T21:42:24.757
> 
> 标签：php, arrays, var-dump

是否可以逃脱`array(1) { [0]=> string(12)}`，`var_dump($variable)`因为我只想显示 var_dump 和 except 的值`array string`？

**测试代码**

```
 <?php
 $array = array(
 "foo" => "bar",
 "bar" => "foo",
 100   => -100,
-100  => 100,
 );
 var_dump($array);
 ?> 
```

**现在结果将是这样的**

```
array(4) {
["foo"]=>
string(3) "bar"
["bar"]=>
string(3) "foo"
[100]=>
int(-100)
[-100]=>
int(100)
} 
```

但我只想获取字符串（3）和数组（4）以外的值`bar`？`foo`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:48:03.527

就在这儿：

```
foreach ($array as $key => $value){
    echo $key.'=>'.$value."\n";
} 
```

对于每个键值对，这将根据需要回显项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:47:23.010

```
<?php
$array = array(
    "foo" => "bar",
    "bar" => "foo",
    100   => -100,
    -100  => 100
);

print_r($array);

$newArray = array_filter($array, function($v) {
    return (gettype($v) != 'string');
});

print_r($newArray);
?> 
```

输出：

```
Array
(
    [foo] => bar
    [bar] => foo
    [100] => -100
    [-100] => 100
)
Array
(
    [100] => -100
    [-100] => 100
) 
```

`$newArray`包含除字符串之外的所有值。（您可以更改`!=`为`==`仅获取字符串值）

编辑后，我认为您可能想要这个（访问关联数组中的单个项目）：

```
echo $array['bar'];
echo $array['foo']; 
```

输出：

```
foo
bar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-21T13:50:59.940

[http://php.net/manual/en/function.array-values.php](http://php.net/manual/en/function.array-values.php)

```
$array = array(
    "a" => "bar",
    "b" => "foo",
);

var_dump($array);
//bar
//foo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T21:47:01.990

尝试

```
<?php
  $array = array(
    "foo" => "bar",
    "bar" => "foo",
    100   => -100,
    -100  => 100,
  );

  echo '<pre>';
  print_r($array);
  echo '</pre>';
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T21:51:53.717

你可以这样做：

```
call_user_func_array('var_dump', $array); 
```

那是`var_dump()`在每个值*`$array`*而不是整个数组上使用：

```
$array = array(
    "foo" => "bar",
    "bar" => "foo",
    100   => -100,
    -100  => 100,
);

call_user_func_array('var_dump', $array);

echo implode(', ', $array); # for comparison 
```

输出：

```
string(3) "bar"
string(3) "foo"
int(-100)
int(100)
bar, foo, -100, 100 
```

# mdx - 在 MDX 查询中使用 NOT IN

> ID：15981323
> 
> 赞同：3
> 
> 时间：2013-04-12T21:42:33.403
> 
> 标签：mdx, mondrian

我正在尝试从我的 MDX 选择查询中的维度中过滤掉一些点。我使用了[http://mondrian.pentaho.com/documentation/mdx.php](http://mondrian.pentaho.com/documentation/mdx.php)中记录的 Filter(, ) 函数。正在运行的MDX如下

```
 SELECT {[Measures].[AMOUNT]} on 0,  
         {Filter ([DIM1].MEMBERS, [DIM1].CurrentMember NOT IN {[DIM1].[A], [DIM1].[B], [DIM1].[C]})} on 1,
         {[DIM2].[S]} on 2, 
         {[DIM3].[EFO]} on 3, 
         {[CURRENCY].[EUR]} on 4
  from [CUBE] 
```

但Measures.AMOUNT 仍在考虑 Dim1.A、Dim1.B 和 Dim1.C。请各位好心人指出我的语法有什么问题。我也尝试过 except(,) 。

最好的，罗汉

更新 ：

感谢 Marc 为我指明了正确的方向。我进行了更多测试，发现成员函数还返回一个点“全部”，其中包括我维度上的所有点。因此，即使 Filter() 或 except() 函数正确过滤了这些点，“All”点仍然包含所有点的值，因此将它们包含在 Measure.AMOUNT 计算中。我改为使用 Children 函数，它不返回“All”点，所以我看到了想要的结果。更新了下面的 MDX

使用过滤器和 NOT IN 工作 MDX（警告：NOT IN 是 Mondrian 特定的操作）

```
 SELECT {[Measures].[AMOUNT]} on 0,  
         {Filter ([DIM1].Children, [DIM1].CurrentMember NOT IN {[DIM1].[A], [DIM1].[B], [DIM1].[C]})} on 1,
         {[DIM2].[S]} on 2, 
         {[DIM3].[EFO]} on 3, 
         {[CURRENCY].[EUR]} on 4
  from [CUBE] 
```

使用除了工作的 MDX

```
 SELECT {[Measures].[AMOUNT]} on 0,  
         {except ( {[DIM1].Children}, {[DIM1].[A], [DIM1].[B], [DIM1].[C]} )} on 1,
         {[DIM2].[S]} on 2, 
         {[DIM3].[EFO]} on 3, 
         {[CURRENCY].[EUR]} on 4
  from [CUBE] 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T05:50:27.227

而不是过滤器，我会使用以下的[except](http://www.iccube.com/support/documentation/mdx/Except.html)函数：

```
Except ([DIM1].MEMBERS, {[DIM1].[A], [DIM1].[B], [DIM1].[C]} ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-22T15:20:29.783

我正在构建一个自定义 MDX 构建器，并且我已经进入了 1..n FILTER 构造工作的阶段。我试图在它周围添加 EXCEPT 并触发了查询，但 EXCEPT 被忽略了。

[MDX 查询有效，但忽略 EXCEPT 子句](https://stackoverflow.com/questions/58939640/mdx-query-works-but-ignores-the-except-clause/58993861#58993861)

我尝试 <> 来查看我的链接/答案，它运行良好（也意味着它可以链接在一起（适用于我想要忽略/过滤的许多值）。

# asp.net-mvc - 从 JsonResult 方法将自定义错误返回到 ajax 发布错误函数并在验证摘要下显示

> ID：15981333
> 
> 赞同：1
> 
> 时间：2013-04-12T21:43:02.937
> 
> 标签：asp.net-mvc, jquery, post, jsonresult, validationsummary

我有“JsonResult”类型的操作方法。我使用 ajax post 调用它。我想将操作方法​​中的自定义错误返回给 ajax post 并将这些错误显示为验证摘要。

```
[HttpPost]
public JsonResult RegisterUser(RegistrationModel model)
{
   //if username already exists return custom error to be displayed on view      
   //under validation summary
   // control should go back to error function with message to be displayed.
}

   $.ajax({
        url: url,
        type: 'POST',
        dataType: 'json',
        data: ko.toJSON(model),
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            success(result)
        },
        error: function (req, status, error) {
            error(req, status, error);
        }
    });

  function success(result) {  
    //Do Something
  }

  function error(req, status, error) {
       //Display error messages under validation summary.
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T23:26:49.820

据我了解，当您发布 ajax 帖子时，它不关心模型验证是否通过，它只关心它是否得到服务器的响应。如果从服务器抛出异常，那么它将命中您的 ajax 错误函数。

所以我要做的是返回一个 json 对象，让我知道验证状态。

```
if(!ModelState.IsValid){
        var modelStateErrors = this.ModelState.Keys.SelectMany(key => this.ModelState[key].Errors);
        var message = "Please fix the following: " + Environment.NewLine;

        foreach (var modelStateError in modelStateErrors)
        {
            message += modelStateError.ErrorMessage + Environment.NewLine;
        }

     return Json(new {success = false, response = message})
}

 // Do other logic

return Json(new {success = true, response = "Successful message"}) 
```

一旦你把这个对象传回来，你可以做下面的 Javascript

```
success: function (result) {
            if(result.success === true){
                 $('#status-div').empty().html('<div class="success">' + result.response + '</div>');
            }
            if(result.success === false){
                 $('#status-div').empty().html('<div class="fail">' + result.response + '</div>');
            }

        } 
```

# sql - VBA：Arthimetic 溢出将 int 转换为数据类型 numeric

> ID：15981335
> 
> 赞同：0
> 
> 时间：2013-04-12T21:43:05.193
> 
> 标签：sql, sql-server, vba, insert-into

我正在尝试将数据插入 SQL Server 2012 中的临时数据库。

这是我的数据，使用的数据类型：

```
1234ab  nchar(25) NOT NULL primary key
240     smallint
4535ab  nchar(10)
04/01/2013  date
58f658      nchar(6)
584g6555    nchar(9)
Insufficient Data   text
10      tinyint
N/A     nchar(5)
N/A     nchar(5)
4       smallint
N/A     nchar(5)
N/A     nchar(5)
4       smallint
N/A     nchar(5)
N/A     nchar(5)
4       smallint
51651.00    numeric(10,7)
65465.50    numeric(14,10)
65465.00    numeric(10,7)
4845.00     numeric(14,10)
04/01/2013  date
5465.00     numeric(18,3)
5465.00     numeric(18,3)
5546.00     numeric(10,7)
test.html   text
note test   text 
```

导入时，所有非数字数据周围都有相应的“'”。（顺便说一句，一些数据类型似乎比需要的大，但这只是一个测试导入的小数据样本）
但我收到以下错误：

> 算术溢出将 int 转换为数据类型 numeric

我只是使用常规`INSERT INTO`语句。我已经盯着我的屏幕看了很长时间了，所以我可能只是读了一遍..但是我在这里错过了什么？数据似乎并不比域大。

顺便说一句，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:18:41.753

> 51651.00 数字（10,7）

“numeric(10, 7)”表示总共 10 位数字，其中 7 位在小数点右侧。这并没有为“51651”在小数点*左侧*留下足够的空间。

不同的 dbms 可能会给您提供更多信息的错误消息。这个来自 PostgreSQL。

```
ERROR:   numeric field overflow
DETAIL:  A field with precision 10, scale 7 must round 
         to an absolute value less than 10^3. 
```

# php - Mod_Rewrite PHP 问题

> ID：15981337
> 
> 赞同：0
> 
> 时间：2013-04-12T21:43:21.943
> 
> 标签：php, apache, mod-rewrite, uri, friendly-url

我实际上已经尝试过这里所述的教程：http: [//net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls)

我尝试使用教程的 PHP 版本。但是，它似乎不起作用。事实上，这对我来说看起来有点不合逻辑。

这是我需要放入 .htaccess 文件的代码：

```
Options +FollowSymLinks  
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  

RewriteRule ^.*$ ./index.php 
```

正如我所测试的那样，这实际上会将所有内容重定向到 index.php 文件。所以我已将此代码插入到我的 index.php 文件中：

```
$request  = $_SERVER['REQUEST_URI']; 

$params     = split("/", $request);  

$safe_pages = array("login");  

if(in_array($params[0], $safe_pages)) {  
echo 'ok'; //insert a file here
} else {  
echo 'not ok'; //header to 403.php 
```

}

这段代码非常简单。如果 URI 是 /login，它应该回显：“ok”（在此处插入文件）。

但是，每当我输入：**mywebsite.com/login** 时，它总是给我 index.php，并显示消息：“not ok”，所以我猜 php 代码应该有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:48:19.827

您在 .htaccess 上缺少另一种方法

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:04:48.977

这应该支持像'page/item'这样的url

```
<?php
$request  = $_SERVER['QUERY_STRING']; 

$params     = explode("/", $request);  

$safe_pages = array("login");  

if(in_array($params[0], $safe_pages)) {  
    echo 'ok'; //insert a file here
} else {  
    echo 'not ok'; //header to 403.php
}
?> 
```

这不适用于 'page/item' 之类的 url 这应该可以：

```
<?php
$request  = $_SERVER['REQUEST_URI']; 

$params     = explode("/", $request);  

$safe_pages = array("login");  

$last_item = count($params)-1;

if(in_array($params[$last_item], $safe_pages)) {  
    echo 'ok'; //insert a file here
} else {  
    echo 'not ok'; //header to 403.php
} 
```

您正在测试错误的项目。您应该检查数组末尾的字符串“login”。并且函数split贬值了，使用[explode()](http://br1.php.net/manual/en/function.explode.php)

# c - 读写器和进程间通信设计

> ID：15981340
> 
> 赞同：0
> 
> 时间：2013-04-12T21:43:27.597
> 
> 标签：c, linux, network-programming, ipc

我想写一个程序，一个模块是：

我有两个进程，进程 A 负责使用`recvfrom()`or接收数据包`recv` ，另一个进程 B 继续处理其他一些事情。

每当进程A收到一个数据包时，它应该立即从数据包中提取一些信息并将信息告诉进程B。B需要立即停止它正在做的事情并读取信息。

这就像一个tcp栈，我说，进程A负责接收数据包或ack包，进程B负责发送包。当进程 A 接收到一个数据包时，进程 B 应该读取数据包，更新其下一个传出包的 seq 号和 ack_seq 号。

无论如何，我的想法是进程 A 和 B 应该共享一个结构变量，并且在 varialbe 上有一个锁。B继续读取变量，当A收到一个数据包时，它锁定变量，因此B被阻塞。A修改变量后，A解锁它，B读取变量，然后继续做自己的工作。伪代码就像

```
struct SHARE shared_variable;
pid=fork();
if(pid==0) {  // process B
        while(1){
         lock(shared_variable);
         k=read(shared_variable);
         unlock(shared_variable);
         do_something(k);  
         }
       }

 if(pid>0){ // process A
       while(1){
       recv();
       lock(shared_variable);
       modify(shared_variable);
       unlock(shared_variable);
       }
   } 
```

我不熟悉进程间通信和网络编程我的问题是：
1我的伪代码的结构好吗？有更好的解决方案吗？2 共享变量我应该使用什么样的IPC风格 3 我只知道一些理论，有具体的示例源代码吗？

```
thanks! 
```

# android - 在 AsyncTask 中使用向量

> ID：15981352
> 
> 赞同：0
> 
> 时间：2013-04-12T21:44:10.140
> 
> 标签：android, exception, vector, android-asynctask

我在 mt AsyncTask doInBackground 方法中有循环。

```
 @Override
        protected Void doInBackground(Void... params) {

            receive = new Vector<Sms>();
            sent = new Vector<Sms>();
            draft = new Vector<Sms>();

            try {

                String type, from, date, budy;
                Vector<Sms> receive = new Vector<Sms>();
                Vector<Sms> sent = new Vector<Sms>();
                Vector<Sms> draft = new Vector<Sms>();

                progress_status = 1;
                publishProgress(progress_status);

                Cursor cursor = mContext.getContentResolver().query(
                        Uri.parse("content://sms"), null, null, null, null);;
                cursor.moveToFirst();
                progress_status = 2;
                publishProgress(progress_status);

                do {
                    type = cursor.getString(cursor.getColumnIndexOrThrow("type"));
                    from = cursor
                            .getString(cursor.getColumnIndexOrThrow("address"));
                    date = cursor.getString(cursor.getColumnIndexOrThrow("date"));
                    budy = cursor.getString(cursor.getColumnIndexOrThrow("body"));

                    // check type (1-inbox,2-outbox,3-draft) and set there views
                    int numType = Integer.parseInt(type);

                    switch (numType) {
                    case 1:
                        Log.d("inbox", "message");  
                        Log.d("inbox", numType + "");
                        //receive.add(new Sms(type, from, date, budy)); 
                        break;
                    case 2:
                        Log.d("outbox", "message");
                        Log.d("outbox", numType + "");
                        sent.add(new Sms(type, from, date, budy));
                        break;
                    case 3:
                        Log.d("draft", "message");
                        Log.d("draft", numType + "");
                        //draft.add(new Sms(type, from, date, budy));
                        break;

                    default:
                        break;
                    }

                } while (cursor.moveToNext());

            } catch (Exception e) {
                Log.d("eeeee", e.getMessage());
            }

            return null;
        } 
```

此开关在循环内，如果我删除矢量动作（在接收和发送时）它将运行完美。

但我确实想更新向量，但是当我这样做时我捕获了异常。

“无法在未调用 Looper.prepare() 的线程内创建处理程序”

因此，在我发布的这段代码中，我将接收放在注释中，并且发送的向量处于活动状态，因此循环将运行，直到第一个发送到达循环，因此日志猫将如下所示：

```
04-13 00:40:41.000: D/inbox(13953): message
04-13 00:40:41.000: D/inbox(13953): 1
04-13 00:40:41.000: D/inbox(13953): message
04-13 00:40:41.000: D/inbox(13953): 1
04-13 00:40:41.005: D/outbox(13953): message
04-13 00:40:41.005: D/outbox(13953): 2
04-13 00:40:41.005: D/eeeee(13953): Can't create handler inside thread that has not called Looper.prepare() 
```

正如我所说，单独的循环不会只对vector.add造成麻烦...

这是 e.printStackTrace();

```
04-13 01:01:08.080: W/System.err(14901): java.lang.RuntimeException: Can't create       handler inside thread that has not called Looper.prepare()
04-13 01:01:08.085: W/System.err(14901):    at android.os.Handler.<init>(Handler.java:121)
04-13 01:01:08.085: W/System.err(14901):    at android.app.Activity.<init>(Activity.java:739)
 04-13 01:01:08.085: W/System.err(14901):   at com.example.sms.Sms.<init>(Sms.java:18)
04-13 01:01:08.085: W/System.err(14901):    at com.example.sms.MainActivity$ShowDialogAsyncTask.doInBackground(MainActivity.java:168)
04-13 01:01:08.085: W/System.err(14901):    at com.example.sms.MainActivity$ShowDialogAsyncTask.doInBackground(MainActivity.java:1)
04-13 01:01:08.085: W/System.err(14901):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-13 01:01:08.085: W/System.err(14901):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-13 01:01:08.085: W/System.err(14901):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-13 01:01:08.085: W/System.err(14901):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-13 01:01:08.085: W/System.err(14901):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-13 01:01:08.085: W/System.err(14901):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:17:02.513

如果您不将 Activity 用作“屏幕”，则不应扩展它。您已经删除`SMS extends Activity`并以更以数据为中心的方式设计 SMS。活动用于显示聚合数据而不是存储它。

让短信是这样的：

```
public class SMS {

    public String type, from, mdate, body;

    public SMS(String type, String from, String mdate, String body) {
        this.type = type;
        this.from = from;
        this.mdate = mdate;
        this.body = body;
    }
} 
```

# tomcat - EC2 实例的稳定服务器名称

> ID：15981357
> 
> 赞同：0
> 
> 时间：2013-04-12T21:44:35.953
> 
> 标签：tomcat, amazon-web-services, amazon-ec2

我是 EC2 新手`ec2-NN-NNN-NN-NN.compute-1.amazonaws.com`，当我关闭并重新启动它时，我注意到实例的地址（如 ）发生了变化。

在实例上，有一个 Apache Tomcat 应用服务器，每次重新启动后，我都需要在我的客户端应用程序中修改它的 URL。

重新启动实例后，确保应用服务器（托管在 EC2 上）的 URL 保持不变的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T10:24:16.537

[在VPC](http://aws.amazon.com/vpc/)中启动您的实例。IP / DNS 地址在内部子网上永远不会改变。让负载均衡器在公共子网上的节点（假设您有多个）之间进行平衡。添加一个条目并使用**路由 53**`CNAME`将其指向负载均衡器，并让客户端将其目标地址指向该条目。**`CNAME`**

 **请注意，您在 EC2 上只能使用 5 个弹性 IP（获得更多需要获得许可），并且您需要为额外的 IP 付费。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T21:51:16.730

获取弹性 IP，然后将其与您的实例关联。但是，如果实例关闭并重新启动，您可能会失去关联。您只需要再次重新关联它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T05:55:33.663

每当 EC2 实例在经典 AWS 云中重新启动时，Amazon EC2 的公共 DNS 和私有 DNS 都会发生变化。将 ElasticIP 附加到 Amazon EC2 实例并在 R53 或其他 DNS 中配置 EIP。

将来您计划拥有多个 Apache EC2，然后将它们附加到 Amazon ELB 并将 ELB CNAME 指向 DNS 或 R53。**

# ubuntu - Vagrant 1.1.5 中的共享文件夹权限

> ID：15981361
> 
> 赞同：2
> 
> 时间：2013-04-12T21:45:18.493
> 
> 标签：ubuntu, permissions, laravel, vagrant, laravel-3

现在尝试使用 Laravel 框架设置一个小的 Vagrant 开发环境，需要使我的 /vagrant/storage/views 文件夹可写，但是无论如何我都无法获得更改文件夹的权限！

我已经做好了：

```
sudo chmod -R 777 /vagrant/storage/views 
```

...并且之后仍然保留该文件夹的 rwxr-xr-x 权限。我可以更改文件的权限，但不能更改 /vagrant 文件夹中的文件夹。

有人对如何解决这个问题有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T23:06:58.900

万一其他人遇到这种情况，问题是我试图从虚拟机中更改共享文件夹的权限。只要我更改了文件夹的主机副本的权限，它就会很好地传播到来宾计算机的文件夹副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T22:13:23.680

我正在使用这个解决方案。我虽然是 Vagrant 1.6.3 的份额

`config.vm.synced_folder "LOCAL FOLDER", "/var/www", mount_options: ["dmode=777","fmode=666"]`

本地文件夹 = 我把我的网站放在一个文件夹中。由于该文件夹与我的 Vagrantfile 位于同一目录中，因此我之前或尾部没有斜杠。

/var/www = 这是我的网站在来宾上的位置。

mount_options = 我遇到了一些 -R 权限等问题 - 这似乎解决了它。

# java - Java 和 Arduino 进程共享串口

> ID：15981362
> 
> 赞同：0
> 
> 时间：2013-04-12T21:45:18.803
> 
> 标签：java, serial-port, arduino

我想通过使用串行端口`/dev/tty.usbmodem1421` （Mac OS X、[Mountain Lion](http://en.wikipedia.org/wiki/OS_X_Mountain_Lion) (v10.8)、Java 6 和正确安装的 rxtx 库）将一个整数从我的 Java 应用程序发送到 Arduino。简而言之，我的Java应用程序以正确的方式找到并打开了串口并添加了EventListener：

```
serialPort = (SerialPort) portId.open(this.getClass().getName(), TIME_OUT);
serialPort.setSerialPortParams(DATA_RATE, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);
input = new BufferedReader(new InputStreamReader(serialPort.getInputStream()));
output = serialPort.getOutputStream();
serialPort.addEventListener(this);
serialPort.notifyOnDataAvailable(true); 
```

我的 Arduino[草图](http://www.arduino.cc/en/Tutorial/Sketch)正在从串口读取：

```
int num=0;
void setup() {
    Serial.begin(9600);
}

void loop() {
    if (Serial.available() > 0) {
        num = Serial.read();

        // Code for lighting num LEDs
    }
} 
```

我有两种情况：

1.  我启动我的 Java 应用程序，然后启动我的 Arduino 草图
2.  我启动我的 Arduino 草图，然后启动我的 Java 应用程序

在情况 1) 中，Arduino 草图会引发 PortInUse 异常，在情况 2) 中，Java 应用程序会抛出异常。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:58:48.300

尝试在 Arduino 中关闭串行监视器。我们无法建立到单个串行端口的多个连接。

当您在 Arduino 中打开串行监视器时，它将连接到配置的端口号，因此您无法通过 Java 代码访问同一端口。

# java - 使用嵌套 For 循环比较两个字符串数组

> ID：15981369
> 
> 赞同：1
> 
> 时间：2013-04-12T21:45:46.940
> 
> 标签：java, string, for-loop, arrays

您好我正在尝试使用嵌套的 for 循环查找两个字符串数组之间的匹配项。然而，它似乎已经循环了更多次。

```
for(int i = 0; i < ca; i++) //ca contains 10
{
    for(int j = 0; j < ra; j++) //ra contains 10
    {
        if(cAnswers[i].equals(rAnswers[j]))
        {
            count++; //Increments count to indicate a match
            System.out.println("The current count: " + count); //To check the count
        }
    }
}
System.out.println("The number of correct questions is " + count + "/10"); //The result currently gives me 50/10 no matter what. 
```

我尝试使用 <= 而不仅仅是 < 但最终使索引超出范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:55:59.670

对于 中的每个答案`cAnswer`，您都将查看 中的所有答案`rAnswer`。

```
String rAnswer[] = {"A", "B", "A", "D", "A", "F", "G", "H", "I", "J"}; 
```

和

```
String cAnswer[] = {"A", "B", "A", "D", "A", "F", "G", "A", "I", "A"}; 
```

它将`cAnswer[0]`与 all `A's`in匹配`rAnswer`，递增`count`3。同样，`cAnswer[2]`它将再次从索引 0 开始匹配 all `A's`in `rAnswer`。这是您想要的吗？

如果你想做一个线性匹配，即`cAnswer[0]`一个`rAnswer[0]`循环就足够了..

```
for(int i = 0; i < cAnswers.length && i < rAnswers.length; i++)
{
    if(cAnswers[i].equals(rAnswers[i]))
    {
        count++; //Increments count to indicate a match
        System.out.println("The current count: " + count);
    }
} 
```

如果您想做其他事情，请通过提供更多详细信息来帮助我们帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:04:54.600

一个更好的解决方案：

```
Set<String> set = new HashSet<>(Arrays.asList(cAnswers));
set.retainAll(Arrays.asList(rAnswers));
System.out.println("The number of correct questions is " + set.size() + "/10"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:48:18.230

不需要嵌套循环：

```
for(int i = 0; i < cAnswers.length && i < rAnswers.length; i++)
{
    if(cAnswers[i].equals(rAnswers[i]))
    {                           // ^
        count++; //Increments count to indicate a match
        System.out.println("The current count: " + count);
    }
} 
```

# regex - bash 脚本 - sed 返回 IP 地址

> ID：15981371
> 
> 赞同：4
> 
> 时间：2013-04-12T21:46:00.703
> 
> 标签：regex, linux, bash, sed

我正在开发一个 bash 脚本，我正在尝试从打开的网络接口获取 IPv4 地址，在此操作中我使用**ip addr**和**sed**，但出现问题，因为我无法从**sed**获取 IP .

所以，脚本在某些时候有这个：

```
ip addr show dev eth0 | grep "inet " 
```

这应该返回：

```
inet 192.168.1.3/24 brd 192.168.1.255 scope global eth0 
```

使用**sed**，我想要这个：

```
192.168.1.3/24 
```

我尝试了一些正则表达式，但它只给出错误或空行！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:50:22.617

尝试这个

```
ip addr show dev eth0 | sed -nr 's/.*inet ([^ ]+).*/\1/p' 
```

编辑：按要求解释。

```
-n in sed suppressed automatic printing of input line
-r turns on extended regular expressions

s/.*inet ([^ ]+).*/\1/p 
```

搜索后面跟着inet和空格的任何东西，记住那个空格之后不是空格的所有东西[即括号]，然后是任何东西，然后用记住的东西[\1]（IP地址）替换所有东西，然后打印那条线（p）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:56:03.637

我知道您要求使用 sed，所以这是一个使用 GNU sed 4.2.1 版的答案。它非常具体，并且非常适合您的需要。根据您的`ip addr show`命令，我假设这是 Linux。

```
ip addr show dev eth0 \
  | sed -n '/^\s\+inet\s\+/s/^\s\+inet\s\+\(.*\)\s\+brd\s.*$/\1/p'` 
```

使用 awk 的更简单方法：

`ip addr show dev eth0 | awk '$1=="inet" {print $2}'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:51:54.087

你可以使用这样的东西：

```
sed -e 's/^[^ ]* //' -e 's/ .*//' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T10:09:31.853

好吧，sed 和 awk 的答案都很好。为了只获取没有子网掩码的 IP，您可以像这样进一步进行：

```
ip addr show dev eth0 | sed -nr 's/.*inet ([^ ]+).*/\1/p' **| cut -f1 -d'/'** 
```

或者

```
ip addr show dev eth0 | awk '$1=="inet" {print $2}' **| cut -f1 -d'/'** 
```

或者

更好的是：

```
ip route get 255.255.255.255 | grep -Po '(?<=src )(\d{1,3}.){4}' 
```

这应该只输出 IP 地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T04:27:04.693

使用 grep 直接找出你的答案。

```
ip addr show dev eth0 | grep -P '\d+\.\d+\.\d+.\d+\/\d+' -o 
```

# javascript - 如何在 Chrome 扩展程序中控制 (i) 帧深度，即内容脚本被注入？

> ID：15981372
> 
> 赞同：6
> 
> 时间：2013-04-12T21:46:07.527
> 
> 标签：javascript, iframe, google-chrome-extension, frame, content-script

在为 Chrome 扩展程序创建清单文件时，有一个选项`all_frames`允许将内容脚本注入顶部框架/iframe，或全部注入。

我希望这种行为停止在某个特定级别（例如 2 ）。有没有办法指定它，最好是在清单上？或者至少在实际脚本中有破解？

这个问题可以翻译为：“是否有可能知道一个框架在 HTML 文档中的深度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T01:11:31.190

您不能在清单中指定帧深度。但是，如果 iframe 具有不同的 URL，您可以针对它们运行不同的内容脚本（通过在清单
中的数组中有多个条目）。`content_scripts`

内容脚本可以使用如下代码以编程方式确定 (i) 帧的深度：

```
getFrameDepth (window.self);

function getFrameDepth (winToID) {
    if (winToID === window.top) {
        return 0;
    }
    else if (winToID.parent === window.top) {
        return 1;
    }

    return 1 + getFrameDepth (winToID.parent);
} 
```

* * *

* * *

* * *

如果您按如下方式创建扩展，则可以[**在 jsBin 上**](http://jsbin.com/enivux/1)针对此页面进行测试：

**清单.json：**

```
{
    "manifest_version": 2,
    "content_scripts":  [ {
        "all_frames":       true,
        "js":               [   "iframe foo.js" ],
        "matches":          [   "http://jsbin.com/enivux/*",
                                "http://jsbin.com/anomic/*",
                                "http://jsbin.com/ogaxoq/*",
                                "http://jsbin.com/ihegaq/*"
                            ]
    } ],
    "description":      "Detecting where an iframe is in the hierarchy",
    "name":             "(i)frame Level identification",
    "version":      "   1"
} 
```

**iframe foo.js：**

```
var frameDepth  = getFrameDepth (window.self);
var bodyColors  = ["white", "pink", "lime", "cyan"]

document.body.style.background = bodyColors[frameDepth];

function getFrameDepth (winToID) {
    if (winToID === window.top) {
        return 0;
    }
    else if (winToID.parent === window.top) {
        return 1;
    }

    return 1 + getFrameDepth (winToID.parent);
} 
```

* * *

请注意，Chrome 扩展程序目前[仅在具有`src`属性](http://code.google.com/p/chromium/issues/detail?id=76429)的 iframe 上运行，并且仅当 URL 满足清单的匹配和 glob 要求时。

# c# - 在 C# 中的声明或构造函数中初始化私有对象

> ID：15981373
> 
> 赞同：2
> 
> 时间：2013-04-12T21:46:12.337
> 
> 标签：c#, constructor

我不断来回弹跳，并想标准化最好的一个：

```
private MyOtherClass mc = new MyOtherClass(); // up here OK?

public MyClass()
{
  // or down here?, mc = new MyOtherClass();
} 
```

声明时的初始化发生在什么时候？程序第一次启动是什么时候？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:48:30.373

真正的区别很小。它们都编译成几乎相同的东西。主要取决于您的编码风格。您应该知道在调用超级构造函数之前已初始化字段，但依赖这一事实将是不好的做法。

我更喜欢在构造函数中初始化我的所有字段，这样我就可以更好地控制它们的初始化顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:51:28.733

两者都可以：这实际上是一个偏好问题，或者您希望如何组织构造逻辑。

请注意，在构造函数运行之前，首先设置内联值。即，以下输出`bar`：

```
public class MyClass
{
    private string _member = "foo";
    public string Member { get { return _member; } }

    public MyClass()
    {
        _member = "bar";
    }
}

class Program
{
    static void Main(string[] args)
    {
        var myClass = new MyClass();
        Console.WriteLine(myClass.Member);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:26:58.867

在您的帖子中，您问“声明时的初始化是什么时候发生的？程序第一次启动的时候？”。

其他答案是正确的，但我只是想强调一点：

```
private MyOtherClass mc = new MyOtherClass(); 
```

是声明一个实例字段，并在实例实例化时初始化，而不是在程序启动时初始化。

如果您声明了一个静态字段：

```
private static MyOtherClass mc = new MyOtherClass(); 
```

这将在类型构造函数运行时初始化，这发生在第一次访问类的任何成员时（模一些复杂性，Jon Skeet 和 Eric Lippert 会比我更好地解释）。

在这两种情况下，程序启动时都不会初始化该字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T22:34:16.100

我会这样说：如果这只是一个独立的类，那么在哪里初始化都没有关系。什么时候这个类将成为基类，那时可能很重要。具体来说，我说的是执行顺序。如果你想要你的基础初始化，那么将初始化移动到构造函数。根据构造函数的声明方式等，执行链可能有不同的变体，所以答案是，这可能是重要的，也可能是无关紧要的。如果密封类绝对没关系。但是一旦涉及到继承，答案就不稳定了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T04:49:28.437

两种方式都可以。对我来说，我提出了以下规则：

如果一个属性总是以相同的方式初始化，无论使用哪个构造函数，我都会在声明时初始化它，所以我只有一次。使构造函数保持一点清洁。

如果根据选择的构造函数有不同的方法来初始化它，我会在构造函数主体中初始化。

```
public class SomeClass
{
    private List<String> content = new List<String>();
    private String searchKey;

    public SomeClass()
    {
        searchKey = String.Empty;
    }

    public SomeClass(String searchKey)
    {
        this.seachKey = searchKey;
    }

    // some more code
} 
```

最后回答你关于时间点的问题，当事情开始时：

1.  构造类的第一个实例时，将初始化静态字段。

2.  在构造此类的实例时，所有非静态字段都将被初始化，从在其声明中具有值的字段开始，然后执行构造函数主体以初始化其余部分。

# directx - 如何混合纹理和非纹理多边形？

> ID：15981377
> 
> 赞同：0
> 
> 时间：2013-04-12T21:46:25.507
> 
> 标签：directx, textures, texture-mapping

我想将纹理应用于我的多边形，但仅限于一些，即必须顶点格式一种是坐标+颜色，另一种是坐标+texcoord

我的理解是，每个 pass/Draw/InputHandler 只能有一种顶点缓冲区格式？

这是否意味着必须有两个 Draw 调用？（每帧多次调用 Draw 是件坏事吗？根据我目前的理解，我可以看到自己不得不每帧调用 10-20 次）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:23:48.240

正如你所说，你只能为一个 Draw-Call 使用一种顶点格式。您可以将它们合并为（位置、颜色、Texcoord）格式并在着色器中分支，但这不会更快。每帧有多个 Draw-Calls 是正常的，一些消息来源说你不应该使用超过 500 个 Draw-Calls，但没有真正的限制。每个 Draw-Call 都会引入一些开销，并且批处理有时非常有用。

# android - 在 Android 中更改布局的正确方法

> ID：15981382
> 
> 赞同：0
> 
> 时间：2013-04-12T21:46:48.323
> 
> 标签：android, layout, views

我想知道在布局中更改内容的正确方法是什么。例如，显示或不显示某些视图。

现在我正在用 XML 制作我需要的每个按钮，并根据偏好使用 java 使它们可见或消失。这行得通，但是我想知道这是否是最好的方法。我必须一遍又一遍地为相同的按钮编写大量 XML 代码。除了现在他们在不同的地方。

所以我想知道是否有更好的方法。有人愿意开导我吗？

干杯，

大安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:52:18.213

只要有可能，我就会完全按照你的建议去做。我布局所有内容并经常更改“可见性”。

对于我的大部分 Android 开发，我会为那些不知道屏幕上所需的确切数量或类型的小部件的情况保留动态布局。

顺便说一句：我更喜欢手写 XML 而不是使用图形布局编辑器。`LinearLayout`而且，在诉诸其他构造之前，我会尽可能使用嵌套的“水平”和“垂直”单元格。

# web-services - 如何测试有时间滞后的 Web 服务？

> ID：15981391
> 
> 赞同：2
> 
> 时间：2013-04-12T21:47:16.087
> 
> 标签：web-services, testing, soap, curl

我应该测试一个 Web 服务，它将在服务器端创建一个帐户。

但是，由于架构原因，SOAP 调用暂时不会返回消息。所以我必须发出另一个`cURL`命令来测试帐户是否已成功创建。

问题是：帐户创建时间大约需要 50 秒才能完成。如果我想自动化该过程，发出`cURL`命令的最佳做法是什么？我应该总是等待 50 秒或更长时间吗？或者我应该连续发送`cURL`直到帐户被创建/达到最大等待时间（比如 90 秒）？

欢迎任何意见。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:19:36.503

如果您不能（或不想）更改 Web 服务，我会选择两者的组合。

> 我应该总是等待 50 秒或更长时间吗？或者我应该连续发送 cURL 直到帐户被创建/达到最大等待时间（比如 90 秒）？

我会等待`startingTime`几秒钟（比如说`50`），然后从那里每隔`retryTime`几秒钟打一个电话（比如说`10`），直到`maxTries`打电话（比如说`4`）。那是：

```
00:00 - call the createAccount
00:50 - issue first cURL command to check if account was created
if not created
01:00 - issue another cURL command to check if account was created
if not created
01:10 - issue another cURL command to check if account was created
if not created
01:20 - issue another cURL command to check if account was created
if not created: consider the creation has failed 
```

* * *

顺便说一句，为什么您需要等待 50 秒？

创建操作这么慢还是您使用的是异步创建系统？

如果您使用的是异步创建系统并且确实可以更改 Web 服务，您可以：

*   使用**[JAX-WS 2.0 的异步 Web 服务调用功能](http://today.java.net/pub/a/today/2006/09/19/asynchronous-jax-ws-web-services.html)**；
*   或者...让`createAccount`服务返回一个票号（一个整数），然后创建一个`checkTicket`方法，这将允许您检查您的创建调用是否已被处理。

# .net - 3rd 方应用程序破坏了我们的 WCF 应用程序

> ID：15981392
> 
> 赞同：25
> 
> 时间：2013-04-12T21:47:16.260
> 
> 标签：.net, wcf, net.pipe

我们的应用程序在命名管道上使用 WCF 在两个进程之间进行通信（注意：这两个进程都不是 Windows 服务。）我们的应用程序已经在该领域运行了几年而没有发生任何事故。

我们现在收到报告称第三方应用程序（特别是 Garmin Express）的存在正在破坏我们的应用程序。我已经在内部安装了 Garmin Express 并确认了该行为。具体来说，“Garmin 核心更新服务”在运行时会导致我们的应用程序失败。

当 Garmin 服务运行时，我们应用程序的“服务”端启动并且创建 WCF 端点没有问题。但是当客户端启动并尝试连接到服务时，它会因 EndpointNotFoundException 而失败，就好像服务甚至没有运行一样。

此时，我可以从服务控制面板中停止 Garmin 服务，然后成功重新运行客户端，甚至无需重新启动我们自己的服务。如果我再次启动 Garmin 服务，则进一步尝试启动客户端会失败。所以这至少证明了我们的 WCF 服务一直在运行，并且 Garmin 软件以某种方式阻止了我们的客户端连接到它的能力。

我们使用自己的名称作为端点地址（例如“net.pipe://localhost/MyPrivateApplication”）。我已尝试将此地址更改为其他各种名称，但这对问题没有影响。

另一个应用程序怎么可能仅仅通过运行就破坏我们自己的应用程序使用 WCF 的能力？

更新：根据要求，这是来自服务端的代码片段。我已经从我们的原始代码中对其进行了简化，以试图隔离问题。到目前为止，我所做的任何更改都没有对这个问题产生任何影响。

```
MyService service = new MyService();
ServiceHost host = new ServiceHost(service);
string hostAddress = new Uri("net.pipe://localhost/MyWCFConnection");
host.AddServiceEndpoint(typeof(IMyService), new NetNamedPipeBinding(), hostAddress);
host.Open(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-13T11:04:45.197

您的问题“另一个应用程序如何通过运行来破坏我们自己的应用程序......”的一个可能答案：

1.  另一个应用程序也使用 WCF NetNamedPipeBinding。
2.  两个应用程序都使用基本 URL + 相对 URL 创建服务端点。
3.  [应用程序对基地址和 HostNameComparisonMode 的选择使得在客户端 WCF 堆栈用于定位服务元数据的 URL 变体之一上](http://blogs.charteris.com/blogs/chrisdi/archive/2010/10/20/locating-a-wcf-named-pipe-endpoint.aspx)的应用程序之间存在名称冲突。

我不知道 Garmin 服务是否确实使用 WCF NetNamedPipeBinding，但这是您应该调查的一种可能性。[通过始终对 NetNamedPipe 端点使用绝对 URL](https://stackoverflow.com/a/5337699/502194)可以避免该问题。

* * *

好的，所以随着问题的更新，我们现在知道 Garmin 服务正在使用 WCF NetNamedPipeBinding，并且我们知道您的应用程序使用绝对地址注册它的服务，所以上面的解释并不是完整的故事。

这是另一个假设：

1.  假设 Garmin 服务在具有安全特权 SeCreateGlobalPrivilege 的进程中运行（Windows 服务将拥有该特权，除非经过特殊编码以禁用该特权）。
2.  假设它还使用 net.pipe://localhost 的基地址和相对端点地址注册其 WCF 命名管道端点。
3.  现在，它的服务元数据将使用共享内存映射对象发布，该​​对象具有全局命名空间中的名称。
4.  您的服务应用程序不是 Windows 服务。我的假设是它的进程没有安全特权 SeCreateGlobalPrivilege。如果是这种情况，其服务元数据将仅使用其本地会话命名空间中的共享内存映射对象发布。
5.  现在，您的客户端进程尝试在 Garmin 服务运行时启动连接... WCF 客户端通道堆栈 NetNamedPipeBinding 元素尝试根据您的服务 URL net.pipe://localhost/MyWCFConnection 为您的服务定位服务元数据. 如上面链接中所述，它将依次使用服务 URL 的各种变体执行搜索，从而为包含元数据的共享内存对象派生名称。它首先在全局命名空间中查找完整的变体列表，然后再查看本地命名空间。
6.  在这种情况下，第一次尝试将是从“net.pipe://+/MyWCFConnection”派生的名称，并且可能无法在全局命名空间中找到具有此名称的对象。
7.  但是，**第二次尝试将基于变体“net.pipe://+/”，这将匹配在全局命名空间中发布的 Garmin 服务的共享内存映射的名称。**由于搜索顺序，它永远不会到达本地会话命名空间中发布的服务元数据。
8.  您的客户端尝试连接到 Garmin 服务的管道。假设 Garmin 服务实施了一些安全措施，导致您的客户端被拒绝访问拒绝（例如，它可能[在其管道上设置 ACL](http://blogs.charteris.com/blogs/chrisdi/archive/2008/06/23/exploring-the-wcf-named-pipe-binding-part-3.aspx)）。结果很可能会以 EndpointNotFoundException 的形式出现。[**稍后编辑：**实际上，最有可能发生的事情是您的客户端实际上正在连接到 Garmin 服务，启动帧协议的前导握手，并接收到帧协议错误（[http://schemas.microsoft.com/ws/ 2006/05/框架/故障/EndpointNotFound](http://schemas.microsoft.com/ws/2006/05/framing/faults/EndpointNotFound)) 因为在 Via 记录中请求的 URL 与 Garmin 服务所期望的不匹配。然后绑定将断开连接并将此故障作为 EndpointNotFoundException 显示到您的客户端代码。]

你能为这个做什么？我会建议：

*   如果上述假设或类似的东西可以得到证实，并且 Garmin 正在使用基于 net.pipe://localhost 的基本+相对寻址，那么最好让他们拥有问题：他们可以非常解决这样的问题通过将它们的基地址更改为更可能是唯一的东西来轻松地进行。
*   您也许可以通过找到某种方式让您的服务应用程序以安全权限 SeCreateGlobalPrivilege 运行来解决它：如果不将其设为 Windows 服务或以管理员身份运行，这并不容易，但也许并非不可能。然后您的元数据也将发布在 Global 命名空间中，并且客户端的搜索将在 Garmin 之前找到它。
*   **[稍后编辑]**也许有一种解决方法，包括将绑定的 HostNameComparisonMode 属性设置为 Exact，并使用 localhost 的同义词作为服务 URL 的主机部分（例如 net.pipe://127.0.0.1/MyWCFConnection）。这可能会引导搜索围绕 Garmin 变体，以便您的客户有机会考虑本地会话命名空间中的名称。我不知道它会起作用，但值得一试，我想。
*   还有一个很长的问题：贵公司与微软有产品支持关系吗？可以说这是 WCF 中的一个严重设计缺陷：如果您对此大惊小怪，您可能会让 Microsoft 为其发布一个 QFE 补丁，例如提供一个绑定属性来告诉客户端堆栈只尝试本地命名空间。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-18T17:42:27.920

我找到了一种显示哪些应用程序使用的方法`net.pipe`（尽管不一定是哪些应用程序使用不正确）。

首先从 Sysinternals (Microsoft)[下载 Handle 应用程序。](https://docs.microsoft.com/en-us/sysinternals/downloads/handle)附带说明：[Process Explorer](https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer)还允许您搜索句柄。

**然后以管理员身份**打开命令提示符，然后运行`Handle.exe net.pipe`（减引号）。`net.pipe`这将列出当前正在运行的所有应用程序。从那里，你可以一次杀死或禁用一个，直到你的罪魁祸首被发现。我几乎从来没有超过 4-5 个进程使用它。如果您未能以管理员身份运行命令提示符，它可能会给出零或仅不相关的结果。

以下是我发现干扰的所有应用程序`net.pipe`：

*   **“HP Support Solutions Framework Service”** - 仅部分版本受到影响

*   **“Garmin 核心更新服务”** - 在较新版本中已修复，但开箱即用已损坏

*   **“WBE 服务”** - 由几台戴尔笔记本电脑与无线扩展坞一起使用

*   **“Intel(R) Security Assist”**服务 - 我在 2016 年初在几台 Win10 笔记本电脑上看到过。

*   **“梭子鱼 WSA 服务”** - 网络安全代理。如果您禁用此功能，可能会使客户不高兴。

*   **“DropboxOEM.exe”** - Dropbox 的变体，用于包含在商店购买的 PC 中。目前只在Win10上注意到。这是独一无二的，因为据我所知，它是我发现的第一个不是 Windows 服务的服务。

*   **“MTC 服务”** - 安装在某些 Getac 品牌 PC 上。不确定它的作用。

*   **“pcdrcui.exe”** - 不是服务，而是以管理员身份运行。戴尔 SupportAssist 的组件。

*   **“Mitchell1/Shopkey SE Con​​nection”或“ShopHubService”或“Mitchel1/Shopkey 数据备份服务”** ——数据同步服务。不确定它的作用。

*   **[Procore 驱动器](https://support.procore.com/products/procore-drive)(Procore DriveService.exe)**。用途`net.pipe://+/`：

    ```
     Procore DriveService.exe pid: 4204   type: Section        43C: \BaseNamedObjects\net.pipe:EbmV0LnBpcGU6Ly8rLw== 
    ```

*   **Keynetix.Cloud.Launcher.Service.exe**。用途`net.pipe://+/`：

    ```
     Keynetix.Cloud.Launcher.Service.exe pid: 5524   type: Section        4B8: \BaseNamedObjects\net.pipe:EbmV0LnBpcGU6Ly8rLw== 
    ```

*   **RevitAccelerator.exe**（Autodesk Revit 的一部分）。这只会在安装 Revit 后立即提升。此外，此问题已在 Autodesk Revit 2020 中修复。

*   **`SE.Scada.Asb.InTouchDataService.exe`Wonderware InTouch HMI 系统附带的**Wonderware InTouch IData Service** ( )**

***   **`WKSSTrayNotification.exe`**（不是服务，而是 ADDISON 软件的托盘应用程序部分）** 

 **软件制造商 DATEV[在这里有另一个德文列表](https://apps.datev.de/help-center/documents/1080431)（[存档](https://web.archive.org/web/*/https://apps.datev.de/help-center/documents/1080431)）。

我支持需要 的应用程序`net.pipe`，因此当我找到更多执行此操作的服务时，我将更新此列表。

* * *

去除并包括`net.pipe:E`名称中的前导也将有助于找出罪魁祸首，[因为名称的其余部分是 Base64 编码的](https://cklutz.github.io/2016/12/28/decode-wcf-net-pipe-handles/)（也在[此处](https://docs.microsoft.com/en-us/archive/blogs/rodneyviana/named-pipes-in-wcf-are-named-but-not-by-you-and-how-to-find-the-actual-windows-object-name)）。因此，`\BaseNamedObjects\net.pipe:EbmV0LnBpcGU6Ly8rLw==`以 PowerShell 为例，我们可以将名称解码为：

```
$ [System.Text.Encoding]::UTF8.GetString([Convert]::FromBase64String("bmV0LnBpcGU6Ly8rLw=="))
net.pipe://+/ 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-08T04:02:47.860

我们 Microsoft 已将问题归结为 Garmin 核心更新服务创建命名管道的方式。命名管道可以在不同的范围内创建——全局和本地。全局范围本质上是机器范围的，而本地是特定于用户的。

Garmin的应用程序是

1.  作为系统服务运行，因此侦听命名管道服务的范围是全局的。
2.  监听“net.pipe://localhost/”的根地址（例如，没有任何子路径/段）。
3.  使用[`StrongWildcard`主机名比较模式](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/wcf/netnamedpipebinding)。
4.  项目 1 到 3 意味着 Garmin 的应用程序本质上是一个包罗万象的网络管道连接，它与更具体的东西不匹配。
5.  这也意味着 Garmin 完全阻止了所有使用本地范围的侦听器

解决此问题的理想方法是更改​​ Garmin 应用程序，使其`net.pipe`使用更具体的 URL 注册其侦听器。**

# jquery - 带有中继器或 AJAX 调用的页面并即时创建表？

> ID：15981393
> 
> 赞同：0
> 
> 时间：2013-04-12T21:47:19.237
> 
> 标签：jquery, asp.net, ajax

我从普通的 ASP.NET 编程进入 AJAX/jQuery。

现在我有`Repeater`一个绑定在服务器端的 web 表单，基本上是带有数据的 HTML 表格。我正在为客户进行分类、着色等工作。

我还有一些过滤字段（日期范围等）和“刷新”按钮，可以回发以刷新页面。

我想知道使用来自 AJAX 调用的数据填充 HTML 表格是否会更有益/更轻松？

那么，用户按下“刷新”，我用新数据获取 JSON 并重新填充表？在页面开始时，我进行了默认的 AJAX 调用？

这边走：

1.  页面将快速加载
2.  无需重新加载/发布
3.  刷新数据时，用户将有视觉队列（微调器）

我对如何做到这一点的想法是正确的，还是应该以旧的方式完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:55:26.407

我会避免使用 ASP.NET 来处理这样的事情。尽管现在看起来很诱人，但糟糕地使用 ASP.NET 很容易，这将在以后引起头痛。我的建议是使用一个简单的 web 服务，它使用 AJAX 调用填充 HTML 表。当出现问题时调试起来要容易得多（并且在某些时候它们会），并且比使用更新面板更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:37:04.870

一种选择是使用 jQuery 表格插件，例如[jQuery DataTables](http://www.datatables.net/)。

就像打电话一样简单`$('#yourTableId').dataTable();`。这将为您提供一个可排序、可过滤、分页的表格……即插即用您现有的代码和表格。排序和过滤是内置的，不需要回发。

当您返回大型数据集时，它还与[AJAX 数据源](http://www.datatables.net/release-datatables/examples/data_sources/ajax.html)（JSON 提要）兼容，但这需要更多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:52:26.247

您可以为此使用 ASP.NET AJAX 更新面板，这将为您省去很多辛苦的工作。

我还建议使用 Knockout.js，它提供了一种将客户端接口绑定到 JSON 对象模型的绝佳方式。然后，您可以让 jQuery 使用客户端从服务器获取数据，并且敲除将处理接口更改。

[http://knockoutjs.com/](http://knockoutjs.com/)

否则你的方法也可以。

# html - 将 svg(in div) 保存为 png 或转换为 png。拉斐尔 JS

> ID：15981394
> 
> 赞同：0
> 
> 时间：2013-04-12T21:47:20.910
> 
> 标签：html, svg, png, raphael

我是 Raphaël 和 javascript 的新手，遇到了一个问题，即如何使用 Javascript 将 svg（在 div 中）保存为 png。我阅读了可能的文章：例如使用 canvg [https://code.google.com/p/canvg/](https://code.google.com/p/canvg/) 和..etc`canvas.toDataURL('image/png');`但仍然不知道该怎么做。

我正在尝试将 qrcodesvg.js 输出（[http://vp-dev.net/qrcodesvg/](http://vp-dev.net/qrcodesvg/)）转换为客户端中的一些可下载/可读的 png/图像格式。有人可以给我一些提示，看看哪些或哪些基本参考资料？谢谢！

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T11:40:30.107

几天前我遇到了同样的问题。实际上，我需要转换包含图像的 svg：在这种情况下，我们必须手动导出 Base64 中的每个图像。但是，下面的代码段也应该适用于您的情况。我使用[Raphael.Export](https://github.com/ElbertF/Raphael.Export)库来获取 SVG。

```
var svgData = r.paper.toSVG(), //Obtaining the SVG element
              parser = new DOMParser(),
              //converting the svg in a DOM object
              doc = parser.parseFromString(svgData, "text/xml");

//Getting all the images element in the SVG
var images = doc.querySelectorAll( "image" );
var canvas = document.createElement('canvas');

var ctx = canvas.getContext( "2d" );

var i, imgArr = new Array();
for(i=0; i<images.length; i++){
    //for each image element, i need to obtain its Base64 representation
    imgArr[i] = document.createElement("img");
    imgArr[i].setAttribute( "src", images[i].href.baseVal);

    imgArr[i].onload = function(i, images){
        return function() {
            ctx.drawImage( imgArr[i], 0, 0 );
            // Replace the image href with its base64 representation
            svgData = svgData.replace(images[i].href.baseVal,canvas.toDataURL( "image/png" ));
            //if i'm converting the last element, create the img result
            if(i==images.length-1){
                 var img = document.createElement('img'), canv = document.getElementById('myCanvas');
                     //generating the result svg image
                     img.setAttribute( "src", "data:image/svg+xml;base64," + btoa(svgData));
                     var context= canv.getContext( "2d" );

                     //when the img ready, we can obtain the png 
                     img.onload = function() {
                            context.drawImage( img, 0, 0 );
                            var canvasdata = canv.toDataURL("image/png");
                            var pngimg =  document.getElementById( "myImg" ); 
                            pngimg.setAttribute( "src", canvasdata);
                            //now pngimg contains the resulting image
                     };
            }
        }   
    }(i, images);
} 
```

在您的 html 文档中，您需要一个带有 id="myImg" 的 img 标签

我希望它可以帮助:)

# java - instanceof 用于多种类型

> ID：15981402
> 
> 赞同：6
> 
> 时间：2013-04-12T21:47:47.757
> 
> 标签：java, integer, instanceof

我正在为 MiniJava 编写一个 TypeChecker，ExpOp 需要检查两个输入的表达式是否都是整数，以使用加号、减号、时间。

如何在`if`包含两个表达式的语句中编写一行代码并检查它们是否都是 ( `instanceof`)的实例`Integer`？

这就是我现在所拥有的：

```
n.e1.accept(this) n.e2.accept(this) instanceof Integer 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T22:23:33.217

`instanceof`您可以制作一个使用 , 的反射对应物的实用函数[`Class.isInstance()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29)：

```
public static boolean allInstanceOf(Class<?> cls, Object... objs) {
    for (Object o : objs) {
        if (!cls.isInstance(o)) {
            return false;
        }
    }
    return true;
} 
```

你[像这样](http://ideone.com/5U804H)使用它：

```
allInstanceOf(String.class, "aaa", "bbb"); // => true
allInstanceOf(String.class, "aaa", 123); // => false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T21:49:47.593

`instanceof`是二元运算符：它只能有**两个**操作数。

**您的问题的最佳解决方案**是 Java 的布尔 AND 运算符：`&&`。

它可用于计算两个布尔表达式：`<boolean_exp1> && <boolean_exp2>`. `true`当且仅当两者都`true`在评估时才会返回。

```
if (n.e1.accept(this) instanceof Integer &&
    n.e2.accept(this) instanceof Integer) {
    ...
} 
```

话虽如此，另一种可能的解决方案是将它们都放在`try`/`catch`块内，当其中一个不是`Integer`a时，`ClassCastException`将被抛出。

```
try {
   Integer i1 = (Integer) n.e1.accept(this);
   Integer i2 = (Integer) n.e2.accept(this);
} catch (ClassCastException e) {
   // code reached when one of them is not Integer
} 
```

*但不建议这样做，因为它是一种称为Programming By Exception*的已知反模式。

我们可以向您展示一千种方法（创建方法、创建类和使用多态性），您只需一行就可以做到这一点，但**没有一种比使用`&&`operator**更好或更清晰。除此之外的任何事情都会使您的代码更加混乱且难以维护。你不想要那个，是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-15T08:32:57.217

如果您遇到任何一个`instanceof`类都可以满足您的需求的情况，您可以使用`||`（逻辑或）运算符：

```
if (n.e1.accept(this) instanceof Integer ||
n.e2.accept(this) instanceof Boolean) {
...
} 
```

# magento - 将一个商店从多个商店 magento 移动到具有多个商店的另一台服务器

> ID：15981403
> 
> 赞同：0
> 
> 时间：2013-04-12T21:47:48.600
> 
> 标签：magento

我必须将商店从 magento 开发服务器中的多商店设置移动到多商店设置生产服务器。什么是最好的方法来做到这一点。任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:27:52.247

[http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/](http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/)

您可以查看上面的链接以供参考。您必须手动添加商店并通过管理面板进行配置。由于您只是将文件从开发移动到生产，我假设它们只有相同的文件。因此，您只需使用 index.php 文件进行一些重定向。

# python - 使用新属性更新 App Engine 实体：新属性和值在数据存储查看器中正常，但在处理程序中不正常

> ID：15981405
> 
> 赞同：0
> 
> 时间：2013-04-12T21:48:01.057
> 
> 标签：python, google-app-engine

我有一个旧模型 QTip，我在其中添加了一个新属性链接

```
class QTip(db.Model):
       # Old property that existed before
       tip_text = db.StringProperty(multiline=True)

       # Recently added this property and it's giving me trouble
       alink = db.StringProperty() 
```

我创建了一个**新**的 QTip 实体并填充了 alink 属性。就像是..

```
my_qtip.tip_text = 'Ranglers of the west'
my_qtip.alink = 'http://www.qtips.com/q/%s' % my_qtip.key()
my_qtip.put() 
```

使用数据存储查看器，我手动确认每个**新**的 QTip 实体现在都具有 alink 属性的值。

当我得到一个 QTip 实体并尝试打印链接时。我一直没有。

```
 logging.error(my_qtip.tip_text)   # logs correct value
 logging.error(my_qtip.alink)      # logs 'None' as in None 
```

我在 dev_appserver.py 和生产中收到相同的结果...我擦除了数据存储区，我尝试重命名属性，更改属性...什么都没有。

有没有人有任何见识？这应该很简单：/

**编辑：解决和尴尬：**

刷新内存缓存解决了这个问题。*总是*从memcache中提取陈旧的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:40:38.230

刷新内存缓存解决了这个问题。总是从 memcache 中提取陈旧的结果。

我曾是：

*   创建实体
*   将实体放入数据存储区
*   将实体放入内存缓存
*   在任务中 - 添加新的链接属性
*   在请求处理程序中 - 检查实体是否在 memacache 中并使用 memcached 实体（已过时）

哎呀！

# wix - WiX：避免显示正在使用的文件对话框，只在安装结束时提示重新启动

> ID：15981411
> 
> 赞同：7
> 
> 时间：2013-04-12T21:48:30.063
> 
> 标签：wix, windows-installer, wix3.6

我在[WiX](http://en.wikipedia.org/wiki/WiX) 3.6 中使用 <MajorUpgrade> 在安装较新版本时强制卸载我的应用程序的先前版本。我的应用程序将扩展 DLL 文件安装到 Windows 资源管理器中，因此卸载 Files In Use 列表资源管理器并默认关闭列出的应用程序。当我的 shell 消失时，这确实会杀死 Windows 资源管理器（这对用户来说有点刺耳），但是我仍然收到一个错误消息，指出并非所有应用程序都可以关闭，并指出需要重新启动。我的偏好是避免这种颠簸并跳过 Files-In-Use 对话框，只是在最后通知用户需要重新启动。有没有办法告诉 WiX 跳过 Files-In-Use 对话框？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-30T17:29:20.847

```
 <Property Id="MSIRESTARTMANAGERCONTROL" Value="Disable"/> 
```

这对我有用，但我不想杀死任何系统服务。

您是否也尝试过“DisableShutdown”？

" *Windows Installer 使用 FilesInUse 对话框。当安装尚未授权使用重新启动管理器的 Windows 安装程序包时，此设置禁止重新启动管理器尝试减轻重新启动。安装程序仍使用重新启动管理器来检测应用程序正在使用的文件。* ”

[http://msdn.microsoft.com/en-us/library/aa370377%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa370377%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T04:49:02.457

`MSIRESTARTMANAGERCONTROL`您可以通过将属性设置为等于`"Disabled"`（来自[MSI SDK](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370377%28v=vs.85%29.aspx)）来禁用重新启动管理器集成。您也可以尝试删除该`FilesInUse`对话框，但静态[内部一致性评估](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369554%28v=vs.85%29.aspx)器(ICE) 验证会报错。我希望禁用重启管理器足以停止尝试从`explorer.exe`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-05T19:18:54.987

我还有一种情况，尝试关闭和重新打开应用程序总是会失败。需要重新启动。我尝试使用这里提供的所有解决方案。他们都没有工作。我能够简单地解决这个问题。这篇文章是线索。[https://msdn.microsoft.com/en-us/library/aa369546(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/aa369546(v=vs.85).aspx)

我在 InstallValidate 标准操作中添加了一个始终解析为 false 的条件。动作永远不会运行。标准操作仅处理磁盘成本计算和打开进程，停止调用该操作会停止所有关闭事物的提议。我还必须将 Windows Installer REBOOT 属性设置为 FORCE，以便在安装结束时提示重新启动。

我的应用程序占用的磁盘空间很小。如果由于磁盘已满而导致我的安装在稍后的过程中失败将是一个大问题，我会找到一种方法来自己计算成本。

# ruby-on-rails - Rails 3 乘客路径错误

> ID：15981416
> 
> 赞同：2
> 
> 时间：2013-04-12T21:48:46.410
> 
> 标签：ruby-on-rails, ruby, apache, passenger, rack

导轨 3.2.10

乘客 3.0.19

Ruby 1.9.3-p392（使用 rbenv）

试图通过Passenger让我的Rails应用程序在我的服务器上运行。收到此错误：

> 没有要加载的文件 -- path_to_app/app/assets/stylesheets/../config/environment

这是我的 Apache 配置文件：

```
<VirtualHost *:80>
ServerName domain.com
DocumentRoot /srv/http
<Directory /srv/http>
    Allow from all
</Directory>

RackBaseURI /rails_app
RackEnv test
<Directory /srv/http/rails_app>
    Options -MultiViews
</Directory>
</VirtualHost> 
```

（其中 /srv/http/rails_app --> path_to_app/public）

我真的不知道它为什么要在资产目录中寻找配置文件。这是 config.ru（据我所知，这是库存）：

```
require ::File.expand_path('../config/environment',  __FILE__)
run RailsApp::Application 
```

我以前做过，但仅限于 Rails 2.x。难道我做错了什么？

**更新**：即使尝试从命令行启动测试或生产服务器也会发生这种情况，因此它不是乘客。一个新的 Rails 应用程序在所有环境中都可以正常工作，所以它必须是迁移或 gem 问题，但我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:42:46.357

结果发现在 app/assets/stylesheets 中有一些奇怪的 FCGI 文件（dispatch.rb、dispatch.fcgi）。一定是 Rails 2.x 应用程序遗留下来的，或者是意外移动到那里的。

# javascript - 获取固定表上 td 内容的宽度

> ID：15981422
> 
> 赞同：0
> 
> 时间：2013-04-12T21:49:06.357
> 
> 标签：javascript, jquery

我有一个数据表，我之前已经设置了使用 jquery 的宽度和`table-layout: fixed`CSS 中的属性。稍后在我的代码中，单元格的内容可能会改变，可能需要改变宽度。结果就像[这个小提琴。](http://jsfiddle.net/yUPET/1/)

如您所见，对于长字符串，单元格内容会从包含它们的单元格中流出并流入下一个单元格。我想做的是在更新单元格后检查单元格的内容，看看内容的宽度是否大于单元格。在我的小提琴中，有一条注释掉的行可以更新宽度：

```
$('.firstItem').width(202) //successfully fits my entry 
```

问题是它`202`是硬编码的，我似乎无法弄清楚如何得到它。我尝试了`.width()`,`.outerWidth()`和`.innerWidth()`，`td`我试图找到内容的宽度，但无济于事。我知道，如果我的内容是 a`span`或类似的东西，我可以调用我的宽度方法，但我的大部分内容只是文本，我宁愿不添加更多的 DOM 元素，因为我的表已经很大足以让事情变慢。

有没有一种很好的方法来获取 a 中文本内容的`td`宽度`table`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:52:26.563

只需在桌子上设置宽度自动：

[演示](http://jsfiddle.net/yUPET/2/)

```
width: auto; 
```

或使用 textWidth 片段：

[演示](http://jsfiddle.net/yUPET/5/)

```
$.fn.textWidth = function(text){
  var org = $(this)
  var html = $('<span style="postion:absolute;width:auto;left:-9999px">' + (text || org.html()) + '</span>'); 
  $('body').append(html);
  var width = html.width();
  html.remove();
  return width;
}

$('.firstItem').width($('td.firstItem').textWidth()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:07:12.503

您应该给您的行 an`id`然后使用它的`scrollWidth`属性值并更新此 css 规则以使您的 scrollWidth 为 width ：

`th, td`

```
th, td{
border: 1px solid black;
width: 203px; /* your scrollWidth value here */
height: 20px;
} 
```

# java - 运行 JAVA 程序时抛出 EXCEPTION_ACCESS_VIOLATION

> ID：15981423
> 
> 赞同：0
> 
> 时间：2013-04-12T21:49:12.937
> 
> 标签：java, fatal-error

我使用 alpha-beta 搜索算法编写了一个 gomoku 程序来确定下一步。这是我的评估函数和connect3和connect4：

```
public float positionEvaluation(Position p, boolean player){
    if(wonPosition(p, player))
        return Float.POSITIVE_INFINITY;
    if(wonPosition(p, !player))
        return Float.NEGATIVE_INFINITY;

    float ret = 0;
    GomokuPosition pos = (GomokuPosition)p;

    int[] myConnect4 = connect4(p, player);
    int[] enemyConnect4 = connect4(p, !player);
    int[] myConnect3 = connect3(p, player);
    int[] enemyConnect3 = connect3(p, !player);

    ret += myConnect4[2] * 1000;
    ret += myConnect4[1] * 100;
    ret += myConnect3[2] * 100;
    ret += myConnect3[1] * 10;

    ret -= enemyConnect4[2] * 1000;
    ret -= enemyConnect4[1] * 100;
    ret -= enemyConnect3[2] * 100;
    ret -= enemyConnect3[1] * 10;

    return ret;
}

private int[] connect4(Position p, boolean player) {
    GomokuPosition pos = (GomokuPosition)p;
    short b;
    if(player) b = GomokuPosition.HUMAN;
    else b = GomokuPosition.PROGRAM;

    int n[] = {0, 0, 0};

    for(int i = 0; i < pos.grid.length; i++) {
        for(int j = 0; j < pos.grid[0].length; j++) {
            if(i+3 < pos.grid.length) {
                if(pos.grid[i][j] == b
                        && pos.grid[i][j] == pos.grid[i+1][j]
                                && pos.grid[i][j] == pos.grid[i+2][j]
                                        && pos.grid[i][j] == pos.grid[i+3][j]) {
                    while(true) {
                        if(i+4 < pos.grid.length)
                            if(pos.grid[i+4][j] == b) break;
                        if(i-1 >= 0)
                            if(pos.grid[i-1][j] == b) break;
                        n[0]++;

                        if(i-1 >= 0 && i+4 >= pos.grid.length) {
                            if(pos.grid[i-1][j] == GomokuPosition.BLANK)
                                n[1]++;
                        }
                        else if(i-1 < 0 && i+4 < pos.grid.length) {
                            if(pos.grid[i+4][j] == GomokuPosition.BLANK)
                                n[1]++;
                        }
                        else if(i-1 >= 0 && i+4 < pos.grid.length) {
                            if(pos.grid[i-1][j] == GomokuPosition.BLANK 
                                    && pos.grid[i+4][j] != GomokuPosition.BLANK)
                                n[1]++;
                            if(pos.grid[i+4][j] == GomokuPosition.BLANK
                                    && pos.grid[i-1][j] != GomokuPosition.BLANK)
                                n[1]++;

                            if(pos.grid[i-1][j] == GomokuPosition.BLANK
                                    && pos.grid[i+4][j] == GomokuPosition.BLANK)
                                n[2]++;
                        }
                        break;
                    }
                }
            }

            if(j+3 < pos.grid[0].length) {
                if(pos.grid[i][j] == b
                        && pos.grid[i][j] == pos.grid[i][j+1]
                                && pos.grid[i][j] == pos.grid[i][j+2]
                                        && pos.grid[i][j] == pos.grid[i][j+3]) {
                    while(true) {
                        if(j+4 < pos.grid[0].length)
                            if(pos.grid[i][j+4] == b) break;
                        if(j-1 >= 0)
                            if(pos.grid[i][j-1] == b) break;
                        n[0]++;

                        if(j-1 >= 0 && j+4 >= pos.grid[0].length) {
                            if(pos.grid[i][j-1] == GomokuPosition.BLANK)
                                n[1]++;
                        }
                        else if(j-1 < 0 && j+4 < pos.grid[0].length) {
                            if(pos.grid[i][j+4] == GomokuPosition.BLANK)
                                n[1]++;
                        }
                        else if(j-1 >= 0 && j+4 < pos.grid[0].length) {
                            if(pos.grid[i][j-1] == GomokuPosition.BLANK 
                                    && pos.grid[i][j+4] != GomokuPosition.BLANK)
                                n[1]++;
                            if(pos.grid[i][j+4] == GomokuPosition.BLANK
                                    && pos.grid[i][j-1] != GomokuPosition.BLANK)
                                n[1]++;

                            if(pos.grid[i][j-1] == GomokuPosition.BLANK
                                    && pos.grid[i][j+4] == GomokuPosition.BLANK)
                                n[2]++;
                        }
                        break;
                    }
                }
            }

            if(i+3 < pos.grid.length && j+3 < pos.grid[0].length) {
                if(pos.grid[i][j] == b
                        && pos.grid[i][j] == pos.grid[i+1][j+1]
                                && pos.grid[i][j] == pos.grid[i+2][j+2]
                                        && pos.grid[i][j] == pos.grid[i+3][j+3]) {
                    while(true) {
                        if(i+4 < pos.grid.length && j+4 < pos.grid[0].length)
                            if(pos.grid[i+4][j+4] == b) break;
                        if(i-1 >= 0 && j-1 >= 0)
                            if(pos.grid[i-1][j-1] == b) break;
                        n[0]++;

                        if((i-1 >= 0 && j-1 >= 0) && (i+4 >= pos.grid.length || j+4 >= pos.grid[0].length)) {
                            if(pos.grid[i-1][j-1] == GomokuPosition.BLANK)
                                n[1]++;
                        }
                        else if((i-1 < 0 || j-1 < 0) && (i+4 < pos.grid.length && j+4 < pos.grid[0].length)) {
                            if(pos.grid[i+4][j+4] == GomokuPosition.BLANK)
                                n[1]++;
                        }
                        else if((i-1 >= 0 && j-1 >= 0) && (i+4 < pos.grid.length && j+4 < pos.grid[0].length)) {
                            if(pos.grid[i-1][j-1] == GomokuPosition.BLANK
                                    && pos.grid[i+4][j+4] != GomokuPosition.BLANK)
                                n[1]++;
                            if(pos.grid[i+4][j+4] == GomokuPosition.BLANK
                                    && pos.grid[i-1][j-1] != GomokuPosition.BLANK)
                                n[1]++;
                            if(pos.grid[i-1][j-1] == GomokuPosition.BLANK && pos.grid[i+4][j+4] == GomokuPosition.BLANK)
                                n[2]++;
                        }
                        break;
                    }
                }
            }

            if(i-3 >= 0 && j+3 < pos.grid[0].length) {
                if(pos.grid[i][j] == b
                        && pos.grid[i][j] == pos.grid[i-1][j+1]
                                && pos.grid[i][j] == pos.grid[i-2][j+2]
                                        && pos.grid[i][j] == pos.grid[i-3][j+3]) {
                    while(true) {
                        if(i-4 >= 0 && j+4 < pos.grid[0].length)
                            if(pos.grid[i-4][j+4] == b) break;
                        if(i+1 < pos.grid.length && j-1 >= 0)
                            if(pos.grid[i+1][j-1] == b) break;
                        n[0]++;

                        if((i-4 >= 0 && j+4 < pos.grid[0].length) && (i+1 >= pos.grid.length || j-1 < 0)) {
                            if(pos.grid[i-4][j+4] == GomokuPosition.BLANK)
                                n[1]++;
                        }
                        else if((i-4 < 0 || j+4 > pos.grid[0].length) && (i+1 < pos.grid.length && j-1 >= 0)) {
                            if(pos.grid[i+1][j-1] == GomokuPosition.BLANK)
                                n[1]++;
                        }
                        else if((i-4 >= 0 && j+4 < pos.grid[0].length) && (i+1 < pos.grid.length && j-1 >= 0)) {
                            if(pos.grid[i-4][j+4] == GomokuPosition.BLANK
                                    && pos.grid[i+1][j-1] != GomokuPosition.BLANK)
                                n[1]++;
                            if(pos.grid[i+1][j-1] == GomokuPosition.BLANK
                                    && pos.grid[i-4][j+4] != GomokuPosition.BLANK)
                                n[1]++;
                            if(pos.grid[i-4][j+4] == GomokuPosition.BLANK && pos.grid[i+1][j-1] == GomokuPosition.BLANK)
                                n[2]++;
                        }
                        break;
                    }
                }
            }
        }
    }
    return n;
} 
```

connect4 和 connect3 是方法返回一个 int 数组存储数的 connect 4 和 connect 3 在一行中。这个数组的第一个元素是总数，第二个元素是一个开端的个数，第三个是两个开端的个数。当我执行这个程序时，java会给出一个致命错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000000250dbe6, pid=4188, tid=5744
#
# JRE version: 7.0_17-b02
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.7-b01 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# J  Gomoku.connect4(LPosition;Z)[I
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\Users\Tian\workspace\Gomoku\hs_err_pid4188.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# 
```

发生的崩溃与国际象棋的搜索深度和大小有关。当我将搜索深度设置为 1 或 2 之类的小数字时，它会工作几步，但在一些步骤后会崩溃。当我将搜索深度设置为 4 或 5 时，它会在第一步中崩溃。这个问题的原因是什么？PS。我的操作系统是windows 8 64bit。我试过在 windows xp 和 linux 上运行这个程序，似乎在这两个系统上运行良好。

这是错误日志：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000000250dbe6, pid=4188, tid=5744
#
# JRE version: 7.0_17-b02
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.7-b01 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# J  Gomoku.connect4(LPosition;Z)[I
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x000000000cd93800):  JavaThread "AWT-EventQueue-0" [_thread_in_Java, id=5744, stack(0x000000000df00000,0x000000000e000000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x0000000bd790ffec

Registers:
RAX=0x0000000000000001, RBX=0x0000000000000001, RCX=0x00000000ffffffff, RDX=0x000000000000000f
RSP=0x000000000dffcd20, RBP=0x0000000000000003, RSI=0x000000000000000f, RDI=0x000000000000000f
R8 =0x000000000000000f, R9 =0x0000000000000006, R10=0x0000000000000007, R11=0x00000007d79100c0
R12=0x0000000000000000, R13=0x00000007d790ffe0, R14=0x0000000000000000, R15=0x000000000cd93800
RIP=0x000000000250dbe6, EFLAGS=0x0000000000010246

Top of Stack: (sp=0x000000000dffcd20)
0x000000000dffcd20:   0000000f00000001 000000020000000f
0x000000000dffcd30:   00000000faf21ffc 00000007d790ffd0
0x000000000dffcd40:   00000007d791c0c0 00000007d790ffe0
0x000000000dffcd50:   0000000400000003 0000000f0000000f
0x000000000dffcd60:   00000001ffffffff 0000000000000003
0x000000000dffcd70:   faf220240000000f 0000000bfaf2201e
0x000000000dffcd80:   0000000000000007 000000000dffce20
0x000000000dffcd90:   00000007d7910090 00000007d791c060
0x000000000dffcda0:   000000000000000f 000000000249e2ec
0x000000000dffcdb0:   000000000dffce20 00000000024863d3
0x000000000dffcdc0:   00000000024863d3 0000000000000000
0x000000000dffcdd0:   00000007d790ffd0 00000007d888a550
0x000000000dffcde0:   000000000dffcde0 000000077dc530b8
0x000000000dffcdf0:   000000000dffce68 000000077dcd8b08
0x000000000dffce00:   0000000000000000 000000077dc53150
0x000000000dffce10:   000000000dffcdc8 000000000dffce58 

Instructions: (pc=0x000000000250dbe6)
0x000000000250dbc6:   44 89 5c 24 5c 4f 8d 1c d4 44 8b 54 24 30 41 83
0x000000000250dbd6:   c2 04 44 89 54 24 60 45 85 f6 0f 8c 52 09 00 00
0x000000000250dbe6:   45 8b 54 8d 10 44 89 54 24 64 44 8b 54 24 30 47
0x000000000250dbf6:   8b 54 95 0c 44 89 54 24 68 47 8b 54 b5 10 44 89 

Register to memory mapping:

RAX=0x0000000000000001 is an unknown value
RBX=0x0000000000000001 is an unknown value
RCX=0x00000000ffffffff is an unknown value
RDX=0x000000000000000f is an unknown value
RSP=0x000000000dffcd20 is pointing into the stack for thread: 0x000000000cd93800
RBP=0x0000000000000003 is an unknown value
RSI=0x000000000000000f is an unknown value
RDI=0x000000000000000f is an unknown value
R8 =0x000000000000000f is an unknown value
R9 =0x0000000000000006 is an unknown value
R10=0x0000000000000007 is an unknown value
R11=0x00000007d79100c0 is an oop
[S 
 - klass: {type array short}
 - length: 15
R12=0x0000000000000000 is an unknown value
R13=0x00000007d790ffe0 is an oop
[[S 
 - klass: {type array short}[]
 - length: 15
R14=0x0000000000000000 is an unknown value
R15=0x000000000cd93800 is a thread

Stack: [0x000000000df00000,0x000000000e000000],  sp=0x000000000dffcd20,  free space=1011k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
J  Gomoku.connect4(LPosition;Z)[I

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x000000000cdfa800 JavaThread "TimerQueue" daemon [_thread_blocked, id=3656, stack(0x000000000e4d0000,0x000000000e5d0000)]
  0x000000000237d800 JavaThread "DestroyJavaVM" [_thread_blocked, id=5420, stack(0x0000000002230000,0x0000000002330000)]
=>0x000000000cd93800 JavaThread "AWT-EventQueue-0" [_thread_in_Java, id=5744, stack(0x000000000df00000,0x000000000e000000)]
  0x000000000cd03800 JavaThread "AWT-Windows" daemon [_thread_in_native, id=1728, stack(0x000000000d880000,0x000000000d980000)]
  0x000000000cd03000 JavaThread "AWT-Shutdown" [_thread_blocked, id=2348, stack(0x000000000d780000,0x000000000d880000)]
  0x000000000b2f3000 JavaThread "Java2D Disposer" daemon [_thread_blocked, id=1980, stack(0x000000000d680000,0x000000000d780000)]
  0x000000000b2cc800 JavaThread "Service Thread" daemon [_thread_blocked, id=3496, stack(0x000000000ca70000,0x000000000cb70000)]
  0x000000000b2c8800 JavaThread "C2 CompilerThread1" daemon [_thread_blocked, id=7612, stack(0x000000000c970000,0x000000000ca70000)]
  0x000000000b2bf800 JavaThread "C2 CompilerThread0" daemon [_thread_blocked, id=980, stack(0x000000000c870000,0x000000000c970000)]
  0x000000000b2bc800 JavaThread "Attach Listener" daemon [_thread_blocked, id=7984, stack(0x000000000c770000,0x000000000c870000)]
  0x000000000b2bb800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=1116, stack(0x000000000c670000,0x000000000c770000)]
  0x000000000b255000 JavaThread "Finalizer" daemon [_thread_blocked, id=4120, stack(0x000000000c570000,0x000000000c670000)]
  0x000000000b24c800 JavaThread "Reference Handler" daemon [_thread_blocked, id=6724, stack(0x000000000c470000,0x000000000c570000)]

Other Threads:
  0x000000000b243000 VMThread [stack: 0x000000000c370000,0x000000000c470000] [id=6708]
  0x000000000b2e5000 WatcherThread [stack: 0x000000000cb70000,0x000000000cc70000] [id=4464]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 PSYoungGen      total 37376K, used 25504K [0x00000007d6400000, 0x00000007dad00000, 0x0000000800000000)
  eden space 32064K, 68% used [0x00000007d6400000,0x00000007d7991a90,0x00000007d8350000)
  from space 5312K, 64% used [0x00000007d8880000,0x00000007d8bd6610,0x00000007d8db0000)
  to   space 5312K, 0% used [0x00000007d8350000,0x00000007d8350000,0x00000007d8880000)
 ParOldGen       total 85504K, used 0K [0x0000000782c00000, 0x0000000787f80000, 0x00000007d6400000)
  object space 85504K, 0% used [0x0000000782c00000,0x0000000782c00000,0x0000000787f80000)
 PSPermGen       total 21248K, used 8260K [0x000000077da00000, 0x000000077eec0000, 0x0000000782c00000)
  object space 21248K, 38% used [0x000000077da00000,0x000000077e2113d8,0x000000077eec0000)

Card table byte_map: [0x0000000005540000,0x0000000005960000] byte_map_base: 0x0000000001953000

Polling page: 0x0000000000aa0000

Code Cache  [0x0000000002480000, 0x00000000026f0000, 0x0000000005480000)
 total_blobs=395 nmethods=14 adapters=333 free_code_cache=48613Kb largest_free_block=49726528

Compilation events (10 events):
Event: 2.242 Thread 0x000000000b2c8800   10             Gomoku::connect4 (1887 bytes)
Event: 2.258 Thread 0x000000000b2bf800 nmethod 9 0x0000000002503e50 code [0x0000000002503fe0, 0x0000000002505298]
Event: 2.271 Thread 0x000000000b2bf800   11             Gomoku::possibleMoves (186 bytes)
Event: 2.291 Thread 0x000000000b2bf800 nmethod 11 0x0000000002500b90 code [0x0000000002500d20, 0x0000000002501608]
Event: 2.291 Thread 0x000000000b2bf800   12             GomokuPosition::<init> (21 bytes)
Event: 2.295 Thread 0x000000000b2bf800 nmethod 12 0x0000000002501fd0 code [0x0000000002502100, 0x0000000002502398]
Event: 2.295 Thread 0x000000000b2bf800   13             Position::<init> (5 bytes)
Event: 2.295 Thread 0x000000000b2bf800 nmethod 13 0x0000000002502490 code [0x00000000025025c0, 0x0000000002502618]
Event: 2.378 Thread 0x000000000b2bf800   14             Gomoku::drawnPosition (59 bytes)
Event: 2.380 Thread 0x000000000b2bf800 nmethod 14 0x00000000024fe690 code [0x00000000024fe7e0, 0x00000000024fe978]

GC Heap History (4 events):
Event: 2.309 GC heap before
{Heap before GC invocations=1 (full 0):
 PSYoungGen      total 37376K, used 32064K [0x00000007d6400000, 0x00000007d8db0000, 0x0000000800000000)
  eden space 32064K, 100% used [0x00000007d6400000,0x00000007d8350000,0x00000007d8350000)
  from space 5312K, 0% used [0x00000007d8880000,0x00000007d8880000,0x00000007d8db0000)
  to   space 5312K, 0% used [0x00000007d8350000,0x00000007d8350000,0x00000007d8880000)
 ParOldGen       total 85504K, used 0K [0x0000000782c00000, 0x0000000787f80000, 0x00000007d6400000)
  object space 85504K, 0% used [0x0000000782c00000,0x0000000782c00000,0x0000000787f80000)
 PSPermGen       total 21248K, used 8258K [0x000000077da00000, 0x000000077eec0000, 0x0000000782c00000)
  object space 21248K, 38% used [0x000000077da00000,0x000000077e210b90,0x000000077eec0000)
Event: 2.313 GC heap after
Heap after GC invocations=1 (full 0):
 PSYoungGen      total 37376K, used 3385K [0x00000007d6400000, 0x00000007d8db0000, 0x0000000800000000)
  eden space 32064K, 0% used [0x00000007d6400000,0x00000007d6400000,0x00000007d8350000)
  from space 5312K, 63% used [0x00000007d8350000,0x00000007d869e610,0x00000007d8880000)
  to   space 5312K, 0% used [0x00000007d8880000,0x00000007d8880000,0x00000007d8db0000)
 ParOldGen       total 85504K, used 0K [0x0000000782c00000, 0x0000000787f80000, 0x00000007d6400000)
  object space 85504K, 0% used [0x0000000782c00000,0x0000000782c00000,0x0000000787f80000)
 PSPermGen       total 21248K, used 8258K [0x000000077da00000, 0x000000077eec0000, 0x0000000782c00000)
  object space 21248K, 38% used [0x000000077da00000,0x000000077e210b90,0x000000077eec0000)
}
Event: 2.346 GC heap before
{Heap before GC invocations=2 (full 0):
 PSYoungGen      total 37376K, used 35449K [0x00000007d6400000, 0x00000007d8db0000, 0x0000000800000000)
  eden space 32064K, 100% used [0x00000007d6400000,0x00000007d8350000,0x00000007d8350000)
  from space 5312K, 63% used [0x00000007d8350000,0x00000007d869e610,0x00000007d8880000)
  to   space 5312K, 0% used [0x00000007d8880000,0x00000007d8880000,0x00000007d8db0000)
 ParOldGen       total 85504K, used 0K [0x0000000782c00000, 0x0000000787f80000, 0x00000007d6400000)
  object space 85504K, 0% used [0x0000000782c00000,0x0000000782c00000,0x0000000787f80000)
 PSPermGen       total 21248K, used 8258K [0x000000077da00000, 0x000000077eec0000, 0x0000000782c00000)
  object space 21248K, 38% used [0x000000077da00000,0x000000077e210b90,0x000000077eec0000)
Event: 2.349 GC heap after
Heap after GC invocations=2 (full 0):
 PSYoungGen      total 37376K, used 3417K [0x00000007d6400000, 0x00000007dad00000, 0x0000000800000000)
  eden space 32064K, 0% used [0x00000007d6400000,0x00000007d6400000,0x00000007d8350000)
  from space 5312K, 64% used [0x00000007d8880000,0x00000007d8bd6610,0x00000007d8db0000)
  to   space 5312K, 0% used [0x00000007d8350000,0x00000007d8350000,0x00000007d8880000)
 ParOldGen       total 85504K, used 0K [0x0000000782c00000, 0x0000000787f80000, 0x00000007d6400000)
  object space 85504K, 0% used [0x0000000782c00000,0x0000000782c00000,0x0000000787f80000)
 PSPermGen       total 21248K, used 8258K [0x000000077da00000, 0x000000077eec0000, 0x0000000782c00000)
  object space 21248K, 38% used [0x000000077da00000,0x000000077e210b90,0x000000077eec0000)
}

Deoptimization events (0 events):
No events

Internal exceptions (10 events):
Event: 0.108 Thread 0x000000000237d800 Threw 0x00000007d6462160 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jni.cpp:716
Event: 0.171 Thread 0x000000000237d800 Threw 0x00000007d646f188 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.214 Thread 0x000000000237d800 Threw 0x00000007d6482b58 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jni.cpp:716
Event: 0.348 Thread 0x000000000237d800 Threw 0x00000007d65a0288 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.362 Thread 0x000000000237d800 Threw 0x00000007d65a2280 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.369 Thread 0x000000000237d800 Threw 0x00000007d65a4190 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.456 Thread 0x000000000237d800 Threw 0x00000007d668dbd0 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.456 Thread 0x000000000237d800 Threw 0x00000007d668dcf8 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.457 Thread 0x000000000237d800 Threw 0x00000007d6691300 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.457 Thread 0x000000000237d800 Threw 0x00000007d6691428 at C:\jdk7u2_64p\jdk7u17\hotspot\src\share\vm\prims\jvm.cpp:1166

Events (10 events):
Event: 1.536 loading class 0x000000000b2fb8a0
Event: 1.536 loading class 0x000000000b2fb8a0 done
Event: 1.537 loading class 0x000000000cd25c30
Event: 1.537 loading class 0x000000000cd25c30 done
Event: 2.232 loading class 0x000000000b198d50
Event: 2.232 loading class 0x000000000b198d50 done
Event: 2.309 Executing VM operation: ParallelGCFailedAllocation
Event: 2.313 Executing VM operation: ParallelGCFailedAllocation done
Event: 2.346 Executing VM operation: ParallelGCFailedAllocation
Event: 2.349 Executing VM operation: ParallelGCFailedAllocation done

Dynamic libraries:
0x000007f796ef0000 - 0x000007f796f23000     C:\Program Files\Java\jre7\bin\javaw.exe
0x000007f8e1720000 - 0x000007f8e18de000     C:\windows\SYSTEM32\ntdll.dll
0x000007f8df280000 - 0x000007f8df3b6000     C:\windows\system32\KERNEL32.DLL
0x000007f8de6f0000 - 0x000007f8de7e3000     C:\windows\system32\KERNELBASE.dll
0x000007f8e1110000 - 0x000007f8e11ee000     C:\windows\system32\ADVAPI32.dll
0x000007f8e0fc0000 - 0x000007f8e110c000     C:\windows\system32\USER32.dll
0x000007f8dd6f0000 - 0x000007f8dd959000     C:\windows\WinSxS\amd64_microsoft.windows.common-controls_6595b64144ccf1df_6.0.9200.16384_none_418c2a697189c07f\COMCTL32.dll
0x000007f8e07e0000 - 0x000007f8e0885000     C:\windows\system32\msvcrt.dll
0x000007f8e06a0000 - 0x000007f8e06e8000     C:\windows\SYSTEM32\sechost.dll
0x000007f8e08f0000 - 0x000007f8e0a30000     C:\windows\system32\RPCRT4.dll
0x000007f8e0c50000 - 0x000007f8e0d90000     C:\windows\system32\GDI32.dll
0x000007f8e0d90000 - 0x000007f8e0dc9000     C:\windows\system32\IMM32.DLL
0x000007f8e0ea0000 - 0x000007f8e0fb5000     C:\windows\system32\MSCTF.dll
0x000000006f1f0000 - 0x000000006f2c1000     C:\Program Files\Java\jre7\bin\msvcr100.dll
0x000000006ead0000 - 0x000000006f1ef000     C:\Program Files\Java\jre7\bin\server\jvm.dll
0x000007f8d5830000 - 0x000007f8d5839000     C:\windows\SYSTEM32\WSOCK32.dll
0x000007f8d9200000 - 0x000007f8d9220000     C:\windows\SYSTEM32\WINMM.dll
0x000007f8e06f0000 - 0x000007f8e06f7000     C:\windows\system32\PSAPI.DLL
0x000007f8e0890000 - 0x000007f8e08e8000     C:\windows\system32\WS2_32.dll
0x000007f8d91c0000 - 0x000007f8d91f2000     C:\windows\SYSTEM32\WINMMBASE.dll
0x000007f8e07d0000 - 0x000007f8e07d9000     C:\windows\system32\NSI.dll
0x000000006fef0000 - 0x000000006feff000     C:\Program Files\Java\jre7\bin\verify.dll
0x000000006eaa0000 - 0x000000006eac8000     C:\Program Files\Java\jre7\bin\java.dll
0x000000006ea80000 - 0x000000006ea95000     C:\Program Files\Java\jre7\bin\zip.dll
0x000000006e8a0000 - 0x000000006ea33000     C:\Program Files\Java\jre7\bin\awt.dll
0x000007f8e0dd0000 - 0x000007f8e0e93000     C:\windows\system32\OLEAUT32.dll
0x000007f8e0a30000 - 0x000007f8e0be0000     C:\windows\system32\combase.dll
0x000007f8d78a0000 - 0x000007f8d793f000     C:\windows\system32\apphelp.dll
0x000007f8dc390000 - 0x000007f8dc3b1000     C:\windows\system32\DWMAPI.DLL
0x000007f8dce70000 - 0x000007f8dcf56000     C:\windows\system32\uxtheme.dll
0x000007f8deb30000 - 0x000007f8decae000     C:\windows\system32\ole32.dll
0x000007f8de510000 - 0x000007f8de51a000     C:\windows\SYSTEM32\CRYPTBASE.dll
0x000007f8de4b0000 - 0x000007f8de50c000     C:\windows\SYSTEM32\bcryptPrimitives.dll
0x000007f8df3c0000 - 0x000007f8e069e000     C:\windows\system32\SHELL32.dll
0x000007f8e1530000 - 0x000007f8e1580000     C:\windows\system32\SHLWAPI.dll
0x000007f8dd240000 - 0x000007f8dd2d6000     C:\windows\SYSTEM32\shcore.dll
0x000000006e860000 - 0x000000006e894000     C:\Program Files\Java\jre7\bin\fontmanager.dll
0x000007f8c9cd0000 - 0x000007f8c9d0f000     C:\Program Files\ThinkPad\Bluetooth Software\btmmhook.dll
0x000000006ea60000 - 0x000000006ea79000     C:\Program Files\Java\jre7\bin\net.dll
0x000007f8dde40000 - 0x000007f8dde9c000     C:\windows\system32\mswsock.dll
0x000000006ea40000 - 0x000000006ea51000     C:\Program Files\Java\jre7\bin\nio.dll
0x000000006e810000 - 0x000000006e851000     C:\Program Files\Java\jre7\bin\t2k.dll

VM Arguments:
jvm_args: -Dfile.encoding=Cp1252 
java_command: Gomoku
Launcher Type: SUN_STANDARD

Environment Variables:
PATH=C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files\ThinkPad\Bluetooth Software\;C:\Program Files\ThinkPad\Bluetooth Software\syswow64;C:\Program Files\Diskeeper Corporation\ExpressCache\;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\ProgramData\Lenovo\ReadyApps;C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\
USERNAME=Tian
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 58 Stepping 9, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows 8 , 64 bit Build 9200 

CPU:total 4 (2 cores per cpu, 2 threads per core) family 6 model 58 stepping 9, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, avx, ht, tsc, tscinvbit, tscinv

Memory: 4k page, physical 8203168k(5333784k free), swap 9448352k(5929728k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (23.7-b01) for windows-amd64 JRE (1.7.0_17-b02), built on Mar  1 2013 03:38:30 by "java_re" with unknown MS VC++:1600

time: Fri Apr 12 17:36:31 2013
elapsed time: 2 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:00:02.693

当我们使用 JavaFX 组件使 NetBeans 平台应用程序失败时，我们也花了很多时间来解决这个问题。解决方案是将 jfxrt.jar 复制到 ..platform/lib 目录中。可惜平台没有在错误信息中这么说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:03:12.343

这可能是 JVM 中的一个错误：http: [//java.com/en/download/help/exception_access.xml](http://java.com/en/download/help/exception_access.xml)。另请参阅：[Java VM EXCEPTION_ACCESS_VIOLATION 的可能原因？](https://stackoverflow.com/questions/140030/possible-causes-of-java-vm-exception-access-violation). 我希望这会有所帮助。

# c++ - Where is libc++ on OS X?

> ID：15981424
> 
> 赞同：4
> 
> 时间：2013-04-12T21:49:17.350
> 
> 标签：c++, xcode, macos, c++11

I have built my own libc++ and I usually include it with `-I /path/to/lib/include -L /path/to/lib/lib`. But now I have to share a project with someone else with a Mac and I want to hand them a Makefile™ that "just works"®.

Consider the following program:

```
#include <algorithm>
#include <iostream>
#include <vector>
using namespace std;
int main(void)
{
    uint32_t nums[100];

    for (size_t i = 0; i < 10; ++i)
    {
        nums[i] = 666;
    }

    vector<int> hello{1, 2, 3, 4, 5, 6, 7, 8};
    for_each(hello.begin(), hello.end(), [](int tal)
    {
        cout << tal << endl;
    });
} 
```

When I compile it with `clang++ -o test test.cc` I naturally get errors that relate to missing `-std=c++11` flag. Ok, so lets add it `clang++ -std=c++11 -o test test.cc`. That gives several errors, one of which is

```
test.cc:15:17: error: no matching constructor for initialization of 'vector<int>'
vector<int> hello{1, 2, 3, 4, 5, 6, 7, 8}; 
```

Ok, I need a C++11 capable C++ library.

```
clang++ -std=c++11 -stdlib=libc++ -o test test.cc 
test.cc:1:10: fatal error: 'algorithm' file not found
#include <algorithm> 
```

My solution to this has been to use `-I` and `-L` pointing to my manually compiled libc++.

Assuming that the person I will share this with doesn't have that but has at least XCode. What can I do to make the above code copile? Surely OS X must ship with C++11 capabilities???

[EDIT]

Turns out that since I installed llvm with xcode from homwbrew that clang was showing up when I did `which clang`. I assumed that clang from homebrew would not get symlinked into `/usr/local/bin` but apparently it did. So I guess the lesson learnt (as so many times before) is to never assume but to RTFM!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T21:58:59.310

Recent Xcode releases put both clang and libc++ headers inside of the Xcode.app. Control click on it and choose "Show Package Contents" to navigate into this directory.

Ensure that your command line clang is the same one that is inside your Xcode.app:

```
$ which clang++ 
```

For me:

```
/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/clang++ 
```

and:

```
/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/lib/c++/v1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T20:39:44.510

OS X El Capitan 10.11.6 (15G1004)

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/ 
```

# ruby - 基于 Amazon Prefix 的 S3 策略不起作用（AWS、IAM、STS、Ruby）

> ID：15981426
> 
> 赞同：12
> 
> 时间：2013-04-12T21:49:35.367
> 
> 标签：ruby, amazon-web-services, amazon-s3, amazon-iam

我正在构建一个应用程序，它使用亚马逊的安全令牌服务来创建临时用户来访问 S3 存储桶上的子目录。用户由对存储桶具有完全读/写访问权限（以及创建用户所需的权限）的 IAM 用户创建。

我创建的用户可以完美地与会话到期等一起工作，但是我在制定正确的策略以允许基于前缀的键列表时遇到问题。我希望最终用户拥有的权限是：

1.  读取某些已定义前缀中的对象
2.  将对象写入相同的定义前缀
3.  列出所有位于定义前缀中的对象

我设法让读写工作，但不知何故，无论我尝试什么，列表访问都无法正常工作。这是我最近时使用的 Ruby 代码：

```
AWS::STS::Policy.new do |policy|
  policy.allow(
    actions: ["s3:GetObject*", "s3:PutObject*", "s3:DeleteObject*"],
    resources: "arn:aws:s3:::#{ENV['PROJECT_BUCKET']}/#{folder_path}/*"
  )

  policy.allow(
    actions: ["s3:*"],
    resources: ["arn:aws:s3:::#{ENV['PROJECT_BUCKET']}/*", "arn:aws:s3:::#{ENV['PROJECT_BUCKET']}"]
  ).where(:s3_prefix).like("#{folder_path}/*")
end 
```

如果我记得，这让我可以阅读和写作，但不能列出。由于我仍在开发中，我已将代码更改为：

```
AWS::STS::Policy.new do |policy|
  # FIXME: This is way too permissive, but it's not working to be more specific.
  policy.allow(
    actions: ["s3:*"],
    resources: ["arn:aws:s3:::#{ENV['PROJECT_BUCKET']}/*", "arn:aws:s3:::#{ENV['PROJECT_BUCKET']}"]
  )
end 
```

这可以 100% 正常工作，但有一个明显的问题是没有任何东西被限制在允许用户破坏彼此工作的前缀上。

我的政策做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T11:44:16.943

为了扩展 Bob Kinney[引用的文章和片段](https://stackoverflow.com/a/16020783/45773)(+1)，我想解释一下我认为您的问题的可能原因，这实际上与使用[AWS Security Token Service (STS)](http://docs.aws.amazon.com/STS/latest/APIReference/Welcome.html)无关，但涉及一些一般而言， [Amazon S3 IAM 策略](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingIAMPolicies.html)经常遇到的微妙之处：

[Amazon S3](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingIAMPolicies.html#ExamplePolicies_S3)的示例策略涵盖了与您的类似或相关的各种用例 - 特别是您的用例显然包括*示例 2：允许组在 Amazon S3 中拥有一个共享文件夹*- 您已在第一个片段的第一个策略中有效地实现了这一点已经（模`GetObjectVersion`, ，仅在使用[Object Versioning](http://docs.aws.amazon.com/AmazonS3/latest/dev/ObjectVersioning.html)`DeleteObjectVersion`时才相关）。

现在缺少的是[ListBucket](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/API/SOAPListBucket.html) - 请注意以下细微之处：

*   这属于[Operations on Buckets](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/API/SOAPBucketsOps.html)，即*您可以对[Amazon S3](http://aws.amazon.com/s3/) **存储桶***执行的操作，而[GetObject](http://docs.aws.amazon.com/AmazonS3/2006-03-01/API/SOAPGetObject.html)属于 [Operations on Objects](http://docs.aws.amazon.com/AmazonS3/2006-03-01/API/SOAPObjectsOps.html)，即*您可以对 Amazon S3**对象***执行的操作（此外还有[Operations on the Service](http://docs.aws.amazon.com/AmazonS3/2006-03-01/API/SOAPServiceOps.html)，目前只有[ListAllMyBuckets](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/API/SOAPListAllMyBuckets.html)，即可能不适用于您的用例）。
*   该`prefix`参数*将响应限制为以指定前缀开头的键。您可以使用前缀将存储桶分隔为不同的键集，其方式类似于文件系统使用文件夹的方式。*，这意味着前缀**不能**包含通配符规范，或者`*`只是被视为名称的一部分，请参阅[存储桶或对象名称中允许哪些字符？](http://aws.amazon.com/articles/1109?_encoding=UTF8&jiveRedirect=1#07).
    *   这是许多用户最初偶然发现的文件夹/目录模拟的一个方面，因为 S3 实际上是一个平面存储架构，仅由存储桶和对象/键组成（请参阅我对[如何指定不匹配的对象过期前缀的回答目录？](https://stackoverflow.com/a/9422742/45773)有关详细信息）。

因此，像您这样的许多用例需要两个不同的策略片段来分别处理对象和存储桶相关操作，因此您可能需要以下内容：

```
AWS::STS::Policy.new do |policy|
  policy.allow(
    actions: ["s3:GetObject*", "s3:PutObject*", "s3:DeleteObject*"],
    resources: "arn:aws:s3:::#{ENV['PROJECT_BUCKET']}/#{folder_path}/*"
  )

  policy.allow(
    actions: ["s3:ListBucket"],
    resources: ["arn:aws:s3:::#{ENV['PROJECT_BUCKET']}"]
  ).where(:s3_prefix).like("#{folder_path}/")
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T17:02:55.800

您可能会发现这篇文章很有趣，因为它专门讨论了创建策略以将用户限制为 S3 存储桶中的前缀。

[移动应用程序的凭据管理](http://aws.amazon.com/code/4598681430241367)

您很可能只需要参考第二个政策。

```
{ 
        "Statement":
        [
            {
              "Effect":"Allow",
              "Action":["s3:PutObject","s3:GetObject","s3:DeleteObject"],
              "Resource":"arn:aws:s3:::__MY_APPS_BUCKET_NAME__/__USERNAME__/*"
            },
            {
              "Effect":"Allow",
              "Action":"s3:ListBucket",
              "Resource":"arn:aws:s3:::__MY_APPS_BUCKET_NAME__",
              "Condition":{"StringLike":{"s3:prefix":"__USERNAME__/"}}
            },
            {
              "Effect":"Deny",
              "Action":["sts:*", "iam:*", "sdb:*"],
              "Resource":"*"
            }
        ]
} 
```

前两个语句是您最感兴趣的。

希望这可以帮助。

# actionscript-3 - flash builder如何将跨域安全沙箱列入白名单

> ID：15981427
> 
> 赞同：0
> 
> 时间：2013-04-12T21:49:39.937
> 
> 标签：actionscript-3, cross-domain, flash-builder

我正在编写一个程序来向我没有权限访问的服务器发送 HTTP GET 请求。

如果程序在我的 flash builder 工作区中运行，那么一切正常。

现在，当我将程序复制并粘贴到 flash builder 工作区之外时，flash player 会引发安全错误。

我知道这是一个跨域安全问题，我想知道为什么在 flash builder 工作区中它可以正常工作，否则不能。如果我想发布程序我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:32:48.970

如果您无法在该服务器上放置 crossdomain.xml，则可以选择以您喜欢的语言快速生成服务器端脚本，并可以在托管您的 swf 的服务器上使用。

服务器端脚本应该在托管 swf 的服务器上复制/缓存 GET 结果，这样您就可以在没有安全沙箱限制的情况下访问数据。

而不是这样的：

```
Server A->SWF->GET->SERVER B 
```

你会做这样的事情：

```
SWF->SERVER A->SCRIPT GET->SERVER B->SCRIPT GET RESULT->SWF 
```

这并不理想（您会使用跨域文件），但应该可以解决问题

# android - 在 WebView 中显示来自 Google Docs 的文档

> ID：15981431
> 
> 赞同：9
> 
> 时间：2013-04-12T21:50:19.877
> 
> 标签：android, webview, android-webview, google-docs

在 WebView (Android) 中显示谷歌文档的问题

[![](https://i.stack.imgur.com/jTSpV.png)](https://i.stack.imgur.com/jTSpV.png)

这是我的代码

```
mWebView=(WebView)findViewById(R.id.web);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.loadUrl("https://docs.google.com/viewer?url="+ "https://docs.google.com/file/d/0B7pKTkDz8c3gWGNRTWJidTBTVmc/edit?usp=sharing"); 
```

当我单击*此处*时，我的 android 显示打开链接的选项（如浏览器、Chrome、Drive、Internet）并在弹出式浏览器中打开链接！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T22:10:29.167

## 如何强制 Android WebView 处理重定向

Google 正在将您重定向到另一个 URL，并且`WebView`允许操作系统处理重定向。

将此代码用于`WebView`内部处理重定向：

```
 // By default, redirects cause jump from WebView to default
    // system browser. Overriding url loading allows the WebView  
    // to load the redirect into this screen.
    mWebView.setWebViewClient(new WebViewClient() {
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return false;
        }
    }); 
```

顺便说一句，你可以在这个函数中做很多其他很酷的事情，比如自定义处理各种 URL。

# java - 限制网站的 Java 程序

> ID：15981432
> 
> 赞同：-2
> 
> 时间：2013-04-12T21:50:20.867
> 
> 标签：java, url, browser, restrict

我想用 JAVA 编写一个程序来限制某些网站在我的浏览器中打开......我该怎么做？或者它甚至可以在java中完成（我的意思是关于JVM）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:07:05.770

您想仅阻止某个 Web 浏览器的网页还是所有这些网页？如果您想阻止对某个网页的访问，请考虑手动编辑[主机文件](http://en.wikipedia.org/wiki/Hosts_%28file%29)

# java - 向数组中的多个索引添加数量（java）

> ID：15981434
> 
> 赞同：0
> 
> 时间：2013-04-12T21:50:26.180
> 
> 标签：java, arrays, string

所以我的问题是我有一台自动售货机。自动售货机的插槽具有每个插槽的最大物品数量。

如果我使用产品名称和数量运行补货方法，我需要将数量添加到提供的产品中。我有一个字符串数组和一个股票数组，其索引是插槽号。

问题是如果我在列表中有两次相同的命名产品，产品的第一个索引将达到最大值，但产品的第二个实例总是比我需要的少 1。

前任。我在插槽 0 和 1 有糖果，最多 10 个。运行 restock(candies, 8) 然后 restock(candies, 5) 应该在插槽 0 和插槽 2 中提供 10 和 3。但我得到的是 10 和 2。

```
public void restockProduct(String product, int quantity) {
    int index = -1;
    // If there is nothing to add, quit
    if (quantity == 0) {
        return;
    }
    for (int i = 0; i < products.length; i++) {
        //Find location of product
        if (products[i].equals(product)) {
            index = i;
            if(stock[index] <= max)
            break;
        }
    }
    if(index >=0){
        stock[index]++;
        restockProduct(product, quantity-1);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:05:52.350

使用此代码和 a of 10 似乎`max`您将在第一场比赛中获得 11 和在第二场比赛中获得 2 ，因为这一行：

```
if(stock[index] <= max) 
```

如果插槽已满，等于`max`，那么您仍然选择它以供以后递增。尝试严格小于。此外，为了清楚起见，将这两个`if`条件结合起来。*如果产品名称匹配且*未满，您只想选择插槽。

```
if (products[i].equals(product) && stock[i] < max) {
     index = i;
     break;
} 
```

当没有插槽满足这两个条件时，您还必须处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:06:06.567

你在这件事上想得太用力了

```
public void restockProduct(String product, int quantity) 
{

    for (int i = 0; i < products.length; i++) 
    {
        //Find location of product
        if (products[i].equals(product)) 
        {
            int diff = max = stock[i];
            stock[i] += diff;
            quantity -= diff;
        }
    }
} 
```

# java - 多线程 Hello World

> ID：15981435
> 
> 赞同：4
> 
> 时间：2013-04-12T21:50:41.800
> 
> 标签：java, multithreading

使用两个线程，您应该打印“Hello World Hello World Hello World Hello World Hello World Hello World”。

在两个线程中，一个应该打印“Hello：”和另一个线程“World”。

我可以用不同的类来做到这一点，例如每个用于 hello 和 world 我也可以用内部类来做

有没有一种只有一个主类而没有内部类的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-27T23:00:39.023

> 有没有一种只有一个主类而没有内部类的方法？

当然。您可以传入字符串以打印到您的 Main 类中。当然，棘手的部分是协调线程，以便它们实际打印出来`"HelloWorld"`而不是`"WorldHello"`其他排列。线程将在不保证顺序的情况下并行运行。这就是线程程序的全部意义——它们异步运行。试图强制一个特定的单词输出否定了使用线程的目的。

<rant> 这对我来说是一个设计糟糕的计算机科学作业。使用线程编写的全部意义在于它们并行独立运行。协调通常发生在每个线程从工作队列中拉出然后将结果放入结果队列或其他东西时。任何时候你有一个线程程序需要协调这么多，你很可能不应该使用线程。</rant>

但是，由于每个人都对我之前的答案投了反对票，可能是因为它不能完美地解决他们的作业问题，所以我将添加一些逻辑来协调两个线程并吐出“Hello World ...”。

这两个线程需要能够锁定某些东西，相互发出信号，并知道它们何时应该等待或打印。所以我将添加一个`boolean printHello`并且将锁定一个传入的公共锁对象：

```
public class HelloWorld implements Runnable {

    private static boolean printHello = true;

    private final String toPrint;
    private final boolean iPrintHello;
    private final Object lock;

    public static void main(String[] args) {
        final Object lock = new Object();
        // first thread prints Hello
        new Thread(new HelloWorld("Hello ", true, lock)).start();
        // second one prints World
        new Thread(new HelloWorld("World ", false, lock)).start();
    }

    public HelloWorld(String toPrint, boolean iPrintHello, Object lock) {
        this.toPrint = toPrint;
        this.iPrintHello = iPrintHello;
        this.lock = lock;
    }

    @Override
    public void run() {
        // don't let it run forever
        for (int i = 0; i < 1000 && !Thread.currentThread().isInterrupted(); ) {
            // they need to synchronize on a common, constant object
            synchronized (lock) {
                // am I printing or waiting?
                if (printHello == iPrintHello) {
                    System.out.print(toPrint);
                    // switch the print-hello to the other value
                    printHello = !printHello;
                    // notify the other class that it can run now
                    lock.notify();
                    i++;
                } else {
                    try {
                        // wait until we get notified that we can print
                        lock.wait();
                    } catch (InterruptedException e) {
                        // if thread is interrupted, _immediately_ re-interrupt it
                        Thread.currentThread().interrupt();
                        return;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T23:45:16.483

这看起来怎么样？没有线程对特定单词有特定的责任，但是使用几个`Atomic`s 很容易确保线程处于同步状态。

该算法不依赖于只有两个线程 - 正如您所看到的，它仍然适用于任意数量的线程，在本例中为 42 个。只需 2 个，甚至 1 个，它仍然可以正常工作。

```
public class HelloWorld implements Runnable {
  // The words.
  private final String[] words;
  // Which word to print next.
  private final AtomicInteger whichWord;
  // Cycles remaining.
  private final AtomicInteger cycles;

  private HelloWorld(String[] words, AtomicInteger whichWord, AtomicInteger cycles) {
    // The words to print.
    this.words = words;
    // The Atomic holding the next word to print.
    this.whichWord = whichWord;
    // How many times around we've gone.
    this.cycles = cycles;
  }

  @Override
  public void run() {
    // Until cycles are complete.
    while ( cycles.get() > 0 ) {
      // Must transit from this word
      int thisWord = whichWord.get();
      // to the next word.
      int nextWord = thisWord + 1;
      // Are we cycling?
      boolean cycled = false;
      if ( nextWord >= words.length ) {
        // We cycled!
        cycled = true;
        // Back to zero.
        nextWord = 0;
      }
      // Grab hold of System.out to ensure no race there either.
      synchronized ( System.out ) {
        // Atomically step the word number - must still be at thisWord for the step calculations to still be correct.
        if ( whichWord.compareAndSet(thisWord, nextWord)) {
          // Success!! We are the priveliged one!
          System.out.print(words[thisWord]);
          // Count the cycles.
          if ( cycled ) {
            // Just step it down.
            cycles.decrementAndGet();
          }
        }
      }
    }
  }

  public static void test() throws InterruptedException {
    // The words to print.
    String [] words = {"Hello ", "world. "};
    // Which word to print next (start at 0 obviously).
    AtomicInteger whichWord = new AtomicInteger(0);
    // How many cycles to print - 6 as specified.
    AtomicInteger cycles = new AtomicInteger(6);
    // My threads - as many as I like.
    Thread [] threads = new Thread[/*2*/42];
    for ( int i = 0; i < threads.length; i++ ) {
      // Make each thread.
      threads[i] = new Thread(new HelloWorld(words, whichWord, cycles));
      // Start it.
      threads[i].start();
    }
    // Wait for them to finish.
    for ( int i = 0; i < threads.length; i++ ) {
      // Wait for completion.
      threads[i].join();
    }
  }

  public static void main(String args[]) throws InterruptedException {
    System.out.println("HelloWorld:Test");
    test();
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T12:31:05.317

1.  如果您希望 T1 打印“Hello”而 T2 打印“World”，那么您的预期结果是“Hello World Hello World Hello World Hello World Hello World Hello World”

    T1 先启动，T2 由 T1 调用，否则可以输出“World Hello Hello Hello World”。

    我建议自定义一个读写器或生产者/消费者结构，使用`notify()`或`notifyAll()`方法来唤醒其他线程。

2.  如果您不关心输出格式，请使用 Runnable 接口和您的首选实现。

# angularjs - Angular 应用中的布局函数应该放在哪里？

> ID：15981436
> 
> 赞同：2
> 
> 时间：2013-04-12T21:50:50.553
> 
> 标签：angularjs, organization

在没有适当的 CSS3 支持的情况下，我有一个 javascript 函数可以让我们的布局看起来不错。

```
var handleWindowResize = function() {
    // Code omitted because i don't think it's relevant
}; 
```

以下场景需要调用

*   窗口负载
*   窗口调整大小
*   每当[$viewContentLoaded](http://docs.angularjs.org/api/ng.directive%3angView#Events)被触发时

将此类代码放入 AngularJS 应用程序的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:04:14.830

您不想在控制器中执行此操作。控制器不应引用 DOM。相反，您想创建一个指令来执行此操作。创建一个描述我们行为的指令，例如“维护布局”，并将您的行为放在该指令中。

# sql - 如何在sql server和ssrs中获取多个值以及空值

> ID：15981441
> 
> 赞同：0
> 
> 时间：2013-04-12T21:51:14.863
> 
> 标签：sql, sql-server, stored-procedures, reporting-services, user-defined-functions

我正在处理这个 SSRS 报告，用户要求我创建一个包含三个参数的报告：学期、学生状态和录取通知书。

描述：有以下不同的录取通知：
拒绝 - 计划费用 拒绝 - 其他拒绝 - 接受的计划/时间 拒绝 - 在另一所学校注册 拒绝 - 计划适合/教育需求 延期 拒绝 - 财务支持

当学生/招生人员回复报价时，它会被记录在杂项表中。但是，如果未捕获响应，则不会创建记录。

用户希望我也希望我包括尚未回复报价的学生。这样想很容易，这就是我所做的：

使用用户要求的三个参数创建了一个存储过程。--在这个存储过程中，为了允许参数有多个值，我使用了以下函数：

```
CREATE FUNCTION CSVToVarChar (  
@List VARCHAR(8000),  
@Delimiter CHAR(1) = ','  
)   
RETURNS TABLE  

AS  
RETURN SELECT CAST(SUBSTRING(@Delimiter + ISNULL(@List,'') + @Delimiter, Number + 1,     CHARINDEX(@Delimiter, @Delimiter + ISNULL(@List,'') + @Delimiter, Number + 1)  - Number - 1) AS VARCHAR(8000)) AS String  
FROM dbo.fff_Number WITH(NOLOCK)  
WHERE SUBSTRING( @Delimiter + ISNULL(@List,'') + @Delimiter, Number, 1 ) = @Delimiter  
    AND Number < LEN( @Delimiter + ISNULL(@List,'') + @Delimiter ) 
```

这个函数在 sp 的 where 子句中是这样使用的：

```
 AdmissionOffer IN (SELECT string
                       FROM
                           dbo.CSVToVarChar(@AdmissionOffer, ',')) 
```

接下来，我开始创建报告：在报告中，我使用以下查询为 admissionoffer 参数创建了一个数据集以获取我的参数值：

```
SELECT distinct ISNULL(attributevalue, 'No Response') as AdmissionOffer from table.... 
```

我还允许在 ssrs 中为这个参数设置多个值。用户会将 lov 中的 null 视为“无响应”。

**我需要帮助：**

如何创建一个可以使用多个值的报告/存储过程（不确定我需要在哪里进行更改），而空值就是其中之一。当我运行报告时，我什么也没得到。如果我从 ssrs 中的录取报价 LOV 中删除“无响应”值，则报告工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:59:49.397

嗯，你需要知道的基本事情是，在将参数传递给过程时，NULL 和 NOT NULL 永远不会混合。

现在解决这个问题 - 如果字符串拆分的实际值为“NULL”，那么我在拆分函数中将其转换为 NULL。（可以是任何东西，但 'NULL' 似乎应该是使用的那个）。对我来说，这就像将我的参数的 SQL 更改为联合另一个值一样简单 - 不确定你是如何得到你的。

现在因为 IN() 函数在其中也不能使用 NULL 值，所以为了解决这个问题（在我看来，这可能是一个更好的选择）是我内部加入了拆分表以进行过滤。

```
SELECT *
FROM table a
INNER JOIN dbo.ufn_split(@list,'|') s ON a.pkey = s.value 
```

# c++ - 条件词典排列

> ID：15981442
> 
> 赞同：0
> 
> 时间：2013-04-12T21:51:15.903
> 
> 标签：c++, algorithm, permutation

所以我读过可以生成字典排列的算法。如：1-2-3-4-5->1-2-3-5-4->1-2-4-3-5->...->5-4-3-2-1

但是，我想在跳过一些排列的情况下强加一些布尔条件。

假设我有： 1-2-3-4-5 1-2-3-5-4 。. . 我想跳过所有其他 1-2-XXX 并转到 1-3-2-4-5

交换 2 和 3 并对剩余的三个数字进行排序是最好的方法吗？或者还有其他更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:33:07.363

我仍然不太明白你的问题，但从我看到的你可以基于这段代码：

```
vector<int> permutation;
for (int i = 1; i < N; ++i)
   permutation.push_back(i);
void gen_perm(int level, vector<int>& per){
  if (level < N-1);
    for (int i = level; i < N; ++i) {
        swap(per[level], per[i]);
        gen_perm(level + 1, per);
        swap(per[level], per[i]);
    }
  else
    print(per) or return per or whatever you want to do with perms.
} 
```

现在，条件呢？您可以将它们传递给 gen_perm 函数，例如指向返回 bool 并采用级别和排列（引用）的函数的指针向量，如果条件在给定级别失败，则不做任何事情返回，所以假设您可以创建这样的乐趣：

```
bool check_3(int level, vector<int>& perm) {
   if (level == 2)
      if (perm[0] + perm[1] == 3) return false;
   return true;
} 
```

我建议你首先：

```
typedef bool (*cond_fun)(int, vector<int>&); 
```

在 gen_loop 中使用它们，例如：

```
void gen_perm(int level, vector<int>& per, vector<cond_fun>& conds){
  if (level < N-1);
    for (int i = 0; i < conds.size(); ++i) {
       if (!(*conds[i])(level, per)) return;
    }
    for (int i = level; i < N; ++i) {
        swap(per[level], per[i]);
        gen_perm(level + 1, per, conds);
        swap(per[level], per[i]);
    }
  else
    print(per) or return per or whatever you want to do with perms.
} 
```

当然，如果你有额外的知识，你可以改进它：每个条件最多可以失败一次，所以如果它们返回 false，你可以从向量中删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:39:55.810

您所询问的内容称为阶乘基数，您可以在需要时以正确的数量推进计数器。您可以在这里阅读更多相关信息：http: [//efesx.com/2009/11/14/enumerating-permutations/](http://efesx.com/2009/11/14/enumerating-permutations/)（以及[http://marknelson.us/2002/03/01/next-permutation/](http://marknelson.us/2002/03/01/next-permutation/)）

# c++ - 在 'char' 之前期望主表达式

> ID：15981444
> 
> 赞同：0
> 
> 时间：2013-04-12T21:51:26.307
> 
> 标签：c++

```
#include <iostream>
#include <string>

void reverse(char*);

void reverse(char* str) 
{
    char * end = str;
    char tmp; 
    if (str) {
        while (*end) {
            ++end;
        }
     }
     --end;
     while (str < end) {
         tmp = *str;
         *str++ = *end;
         *end-- = tmp;
     }
}

int main {
   char * string;
   string = "Hello";
   reverse(string);
   std::cout << string;
   return 0; 
} 
```

你好。我正在尝试测试这个简单的函数，并在我将变量字符串声明为 char 指针的行上出现错误“期望在 'char' 之前出现主表达式”。请原谅我是新手，可能会犯更多错误。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:54:23.400

您忘记了 main 的参数列表，它有两个允许的值：

```
int main(void)  // Option 1
{
    // The 'void' is optional; in C++, it's equivalent to "int main()", but there
    // is a difference in plain C
    ...
}

// OR

int main(int argc, char *argv[])  // Option 2
{
    // The names of the variables argc and argv can of course be changed; argv
    // can also be declared as char**
    ...
} 
```

您还有一个语义问题，即像 like 这样的字符串文字`"Hello"`是不可修改的。不推荐使用从`const char[]`to的转换`char*`，但应该避免这种情况，如果您启用警告，您的编译器应该警告您。如果您尝试运行代码，您将遇到分段错误或访问冲突。

要解决这个问题，您应该将`string`变量声明为可修改数组，而不是指针：

```
char string[] = "Hello"; 
```

# delphi - 如何获取已安装网络摄像头的列表？

> ID：15981447
> 
> 赞同：-1
> 
> 时间：2013-04-12T21:51:30.710
> 
> 标签：delphi, driver, webcam

如何在计算机上获取所有可用的网络摄像头驱动程序？我想在组合框中显示驱动程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T00:55:16.710

要枚举网络摄像头，您可以使用[System Device Enumerator](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407180%28v=vs.85%29.aspx)，传递[`CLSID_VideoInputDeviceCategory`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377566%28v=vs.85%29.aspx)将获取所有视频捕获设备的 GUID。

试试这个样本

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  Windows,
  ActiveX,
  DirectShow9,
  ComObj;

procedure EnumerateVideoInputDevices;
const
  IID_IPropertyBag          : TGUID = '{55272A00-42CB-11CE-8135-00AA004BB851}';
var
  LDevEnum : ICreateDevEnum;
  ppEnumMoniker    : IEnumMoniker;
  pceltFetched : ULONG;
  Moniker    : IMoniker;
  PropBag    : IPropertyBag;
  pvar       : olevariant;
  hr         : HRESULT;
  i          : integer;
begin
  CocreateInstance(CLSID_SystemDeviceEnum, nil, CLSCTX_INPROC, IID_ICreateDevEnum, LDevEnum);
  hr := LDevEnum.CreateClassEnumerator(CLSID_VideoInputDeviceCategory, ppEnumMoniker, 0);
  if (hr = S_OK) then
  begin
    while(ppEnumMoniker.Next(1, Moniker, @pceltFetched) = S_OK) do
      begin
        Moniker.BindToStorage(nil, nil, IID_IPropertyBag, PropBag);
        if PropBag.Read('Description', pvar, nil) = S_OK then
          Writeln(Format('Description    %s',[String(pvar)]));
        if PropBag.Read('FriendlyName', pvar, nil) = S_OK then
          Writeln(Format('Friendly Name  %s',[String(pvar)]));
        if PropBag.Read('DevicePath', pvar, nil) = S_OK then
          Writeln(Format('Device  Path    %s',[String(pvar)]));
        if PropBag.Read('CLSID', pvar, nil) = S_OK then
          Writeln(Format('CLSID           %s',[String(pvar)]));
        PropBag := nil;
        Moniker := nil;
      end;
  end;
  ppEnumMoniker :=nil;
  LDevEnum :=nil;
end;

begin
 try
    CoInitialize(nil);
    try
      EnumerateVideoInputDevices;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

# javascript - CasperJS找不到变量$

> ID：15981450
> 
> 赞同：5
> 
> 时间：2013-04-12T21:51:46.587
> 
> 标签：javascript, jquery, casperjs

我正在尝试在测试中注入 jQuery，但出现以下错误：

ReferenceError：找不到变量：$

这是我正在尝试测试的 ruby​​ on rails 应用程序，在 WEBrick 上运行。这是所有代码：

```
var casper = require('casper').create({
    clientScripts: ['jquery-1.9.1.min.js']   
});

//make sure page loads
casper.start('http://127.0.0.1:3000', function() {
    this.test.assertTitle('EZpub', 'EZpub not loaded');
});

//make sure all 3 fridges are displayed
casper.then(function() {
    //get fridges
    var fridges = $('a[href^="/fridges/"]');
    this.test.assert(fridges.length == 3, 'More or less than 3 fridge links shown');
});

casper.run(function() {
    this.echo('Tests complete');
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T21:59:36.667

从文档看来，您需要使用[evaluate()](http://casperjs.org/api.html#casper.evaluate)来获取对已加载页面的引用

> 注意这个方法背后的概念可能是发现 CasperJS 时最难理解的。提醒一下，将 evaluate() 方法视为 CasperJS 环境和您打开的页面之间的一道门；每次将闭包传递给evaluate() 时，您都在进入页面并执行代码，就好像您在使用浏览器控制台一样。

```
casper.then(function() {
    var fridges =  casper.evaluate(function(){
        // In here, the context of execution (global) is the same
        // as if you were at the console for the loaded page
        return $('a[href^="/fridges/"]');
    });
    this.test.assert(fridges.length == 3, 'More or less than 3 fridge links shown');
}); 
```

但是，请注意，您只能返回简单的对象，因此您不能访问评估之外的 jQuery 对象（也就是说，您不能返回 JS 对象），因此您必须返回测试所需的内容，例如以下

```
casper.then(function() {
    var fridgeCount = casper.evaluate(function(){
        // In here, the context of execution (global) is the same
        // as if you were at the console for the loaded page
        return $('a[href^="/fridges/"]').length;
    });
    this.test.assert(fridgeCount === 3, 'More or less than 3 fridge links shown');
}); 
```

# svn - SVN版本冲突

> ID：15981453
> 
> 赞同：-1
> 
> 时间：2013-04-12T21:52:00.040
> 
> 标签：svn, subversive

```
svn: The path '.' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy. 
```

我目前有这个问题。我无法从命令行执行任何操作，但能够使用 Eclipse Subversive 进行 svn 工作。

我不能/不想安装 Subversion 1.7 或更高版本。鉴于这种情况，我能做些什么来解决这个问题？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:47:32.960

[此处](http://subversion.apache.org/faq.html#working-copy-format-change "这里")有此常见问题解答的描述以及使用脚本执行所需操作的说明。

[py脚本降级svn工作副本](http://svn.apache.org/repos/asf/subversion/trunk/tools/client-side/change-svn-wc-format.py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:59:10.513

我认为您可以使用`svn co ...`from 命令行重新检出存储库并继续使用命令行客户端。当然，Subversive 可能无法与该存储库一起使用，或者建议升级到新的工作副本格式。

使用 Subversive 签出或升级工作副本后，您将无法使用命令行客户端。

# android - android中沿y坐标的曲线动画

> ID：15981459
> 
> 赞同：0
> 
> 时间：2013-04-12T21:52:23.900
> 
> 标签：android, android-listview, android-animation

准确地说，我正在将视图拖放到列表中，当用户删除视图时，它应该以弯曲路径进入 listview 中的列表。

PS：我看过很多动画，但是是沿着 x 坐标而不是沿着 y 坐标。感谢您的所有帮助。

我已经使用 [Problem 中的 ArcTranslate 类来实现弯曲动画](https://stackoverflow.com/questions/6849554/problem-to-achieve-curved-animation) ，但那是用于沿 x 坐标的曲线。

弧形动画的代码：

```
 public class ArcAnimation extends Animation {

private Point start;
private Point end;
private Point middle;
private final float mFromXValue;
private final float mToXValue;
private final float mYValue;
private final int mFromXType;
private final int mToXType;
private final int mYType;

/**
 * A translation along an arc defined by three points and a Bezier Curve
 *
 * @param duration - the time in ms it will take for the translation to complete
 * @param fromXType - One of Animation.ABSOLUTE, Animation.RELATIVE_TO_SELF, or Animation.RELATIVE_TO_PARENT.
 * @param fromXValue - Change in X coordinate to apply at the start of the animation
 * @param toXType - One of Animation.ABSOLUTE, Animation.RELATIVE_TO_SELF, or Animation.RELATIVE_TO_PARENT.
 * @param toXValue - Change in X coordinate to apply at the end of the animation
 * @param yType - One of Animation.ABSOLUTE, Animation.RELATIVE_TO_SELF, or Animation.RELATIVE_TO_PARENT.
 * @param yValue - Change in Y coordinate to apply at the middle of the animation (the radius of the arc)
 */
public ArcAnimation(long duration, int fromXType, float fromXValue,
        int toXType, float toXValue, int yType, float yValue){
    setDuration(duration);

     mFromXValue = fromXValue;
     mToXValue = toXValue;
     mYValue = yValue;

     mFromXType = fromXType;
     mToXType = toXType;
     mYType = yType;

}

/** Calculate the position on a quadratic bezier curve given three points
 *  and the percentage of time passed.
 * from http://en.wikipedia.org/wiki/B%C3%A9zier_curve
 * @param interpolatedTime - the fraction of the duration that has passed where 0<=time<=1
 * @param p0 - a single dimension of the starting point
 * @param p1 - a single dimension of the middle point
 * @param p2 - a single dimension of the ending point
 */
private long calcBezier(float interpolatedTime, float p0, float p1, float p2){
    return Math.round((Math.pow((1 - interpolatedTime), 2) * p0)
           + (2 * (1 - interpolatedTime) * interpolatedTime * p1)
           + (Math.pow(interpolatedTime, 2) * p2));
}

@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
    float dx = calcBezier(interpolatedTime, start.x, middle.x, end.x);
    float dy = calcBezier(interpolatedTime, start.y, middle.y, end.y);

    t.getMatrix().setTranslate(dy, dx);
}

@Override
public void initialize(int width, int height, int parentWidth, int parentHeight) {
    super.initialize(width, height, parentWidth, parentHeight);
    float startX = resolveSize(mFromXType, mFromXValue, height, parentHeight);
    float endX = resolveSize(mToXType, mToXValue, height, parentHeight);
    float middleY = resolveSize(mYType, mYValue, height, parentHeight);
    float middleX = startX + ((endX-startX)/2);
    start = new Point((int)startX, 0);
    end = new Point((int)endX, 0);
    middle = new Point((int)middleX, (int)middleY);
}
} 
```

使用以下代码，对象直接下降到列表中，但不是以曲线方式。如何使弧形动画正常工作？

谢谢 ！

# c++ - c++ 使用 gcc 进行命令行编译

> ID：15981465
> 
> 赞同：7
> 
> 时间：2013-04-12T21:52:42.247
> 
> 标签：c++, gcc, windows-7, command-line, mingw

我正在尝试使用文本编辑器而不是 code::blocks 来编写一些 c++ 代码。刚刚写了一个“hello world”程序。

我的 code::blocks ide 使用了我安装的 gcc 编译器，但我想学习如何在较低级别上进行操作。我阅读了一些教程，说我所要做的就是打开命令提示符并键入：

```
gcc helloWorld.cpp -o helloWOrld 
```

但我收到一条错误消息，说“gcc”不是公认的任何东西。

我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-10T04:39:45.700

做`g++ -Wall helloWorld.cpp -o helloWOrld`......为你的例子

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T22:06:56.487

如果您可以使用 code:blocks 进行编译，那么它可能会随编译器一起发布。

您需要找到编译器的路径（可能在 C:\Program Files\CodeBlocks... 的某处）文件名类似于 mingw-gcc.exe 或 mingw-g++.exe 我相信，您可以找到这个IDE设置中的路径。

当您知道路径和文件名时，只需将路径添加到系统 PATH 变量并调用 gccfilename.exe

编译 c++ 程序运行 g++filename.exe

您也可以在不修改 PATH 的情况下运行简单编译：只需运行“c:\Compiler\compiler.exe 的完整路径”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:02:04.170

1.  尝试安装 C 和 C++ 编译器 - 请参阅[http://www.gnu.org/software/commoncpp/](http://www.gnu.org/software/commoncpp/)等
2.  `.cpp`是 C++ 所以命令行会启动 g++ 而不是 gcc

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T22:07:45.140

FWIW，默认情况下，gcc 不包含在 Windows 中。您必须通过 MinGW、Cygwin 或其他方式安装它。

如果您愿意，您可以使用 MinGW，但我更喜欢 Cygwin 提供的 gcc 编译器……安装起来更容易。只需安装 Cygwin 并确保也安装 gcc（它位于开发部分）。

祝你好运。

# java - 无法在 Eclipse 中创建 .dslr

> ID：15981467
> 
> 赞同：0
> 
> 时间：2013-04-12T21:53:07.250
> 
> 标签：java, eclipse, drools

我是新手`Drools Rule Engine`。我正在使用`Eclipse Helios`和`Drools 5.1 runtime`。我能够加载`.drl`文件并能够运行简单的规则应用程序。另外，我可以创建`.dsl`文件，但是，我没有任何选项可以`.dslr`在 Eclipse 中创建文件。如果有人能告诉我我错过了什么，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:28:31.490

我正在回答我自己的问题，以防有人带着同样的问题来到这个页面。

如果您正在使用`.dslr`，则无需创建`.dlr`. 将`.drl`基于`.dslr`和在内存中创建`.dsl`。由于`.dsrl`补偿了`.drl`文件，在`Eclipse`中，创建的过程与创建`.dslr`完全相同`.drl`。您需要做的就是`"Use a DSL"`在创建`.drl`. 以下是供参考的快照，

![像创建 .drl 文件一样开始。 这里没有什么新鲜事。](https://i.stack.imgur.com/P8HiM.jpg) ![选择](https://i.stack.imgur.com/9bxdH.jpg)

# iphone - facebook url 方案是否适用于 iPhone 模拟器

> ID：15981469
> 
> 赞同：1
> 
> 时间：2013-04-12T21:53:23.083
> 
> 标签：iphone, ios, facebook, url-scheme

我想知道 Facebook 自定义 url 方案是否适用于 iphone 模拟器？或者它是否普遍工作并且它是否受到 Facebook 的支持？

我阅读了一些关于它的主题，其中一些人说它不再受支持，其中一些人担心它是否是官方的。

我无法激活我的开发者设备，所以我需要使用模拟器。它在模拟器上工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:28:22.367

**如果**有可以在模拟器上安装的 Facebook 应用程序版本，它将在 iOS 模拟器上运行。但是，没有。所以它不起作用。

顺便说一句：不要尝试在没有可以测试它们的真实 iOS 设备的情况下开发 iOS 应用程序。iOS 模拟器不是模拟器——它的功能与真实设备不同。（特别是，它运行为 x86 而不是 ARM 编译的二进制文件。）如果您在提交之前没有在真实设备上测试您的应用程序，您的应用程序很可能会因为您很容易发现和修复的错误而被拒绝你自己。

# c# - c#语法嵌入html代码

> ID：15981475
> 
> 赞同：-5
> 
> 时间：2013-04-12T21:53:59.190
> 
> 标签：c#, html

我对 C# 中的 switch 语法有疑问。我在我的 C# 程序中嵌入了 HTML 代码。我在 .js 和 .css 文件中有链接，但我需要插入像这个“\”字符这样的 C# 代码。我这样做后，链接将被破坏。

html中的代码：

C# 中的代码：

```
"<script src=\"http://www.amcharts.com/lib/amcharts.js\" type=\"text/javascript\"></script>  "+ 
```

[我的问题的视频](http://youtube.com/watch?v=nLBzTN1JO7I&feature=youtu.be)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:56:12.760

使用 double `\\`，应该转义字符。

Alternativeley 使用 Verbatim 字符串文字：

```
var path = @"\folder1\folder2\File.txt"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:55:50.183

你需要逃避它，所以试试这种方式`"\\"`。或者通过在字符串前面加上和@符号来逃避它`@"\"`

根据视频编辑：我检查了视频。Visual Studio 编辑器对链接的解释方式与它在编译代码中的显示方式不同。你可以忽略这个问题，因为编辑器认为 URL 是`http://www.amcharts.com/lib/amcharts.js\`并试图打开它，但是当你编译代码时，它会没事的。

如果您希望编辑器也能正确打开它，那么您应该用撇号替换转义的引号，如下所示：

```
"<script src='http://www.amcharts.com/lib/amcharts.js' type='text/javascript'></script>" 
```

# android - 如何启用仅在执行设备上安装

> ID：15981480
> 
> 赞同：0
> 
> 时间：2013-04-12T21:54:43.037
> 
> 标签：android, installation, apk, device

再会。

我得到了 android 应用程序，我需要禁用所有设备上的安装，除了那些在应用程序配置中列出的设备。那么我如何禁用在所有其他设备上的安装（在应用程序的代码中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:07:40.363

不，这还不可能。

Android 应用程序可以禁止安装基于`minSdkVersion`和`screen sizes`。没有参数建议不要根据供应商安装。

您拥有的最佳选择是在应用程序启动时找出您当前使用的设备，然后显示一条消息，说明您无法在此手机/平板电脑上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:08:18.070

我认为您无法控制选择性安装行为，但是如果您的设备条件不符合，您可以禁用应用程序组件（活动/服务/广播接收器）的执行。

# php - 复选框验证和浮动图像

> ID：15981483
> 
> 赞同：0
> 
> 时间：2013-04-12T21:55:07.837
> 
> 标签：php, javascript, jquery, html, css

按钮以不同的形式存在。当用户单击按钮时，将显示一个新字段。我可以使用 CSS 来做到这一点吗？

另外，我怎样才能`form1`跳到`form 2`？

这是我的代码：

```
 <form id="form1" action="#"> 
      <input type="button" onclick="form2">  
   </form>   
   <form id="form2">   
       <input type="checkbox">    
       <input type="button">  
   </form> 
```

另外，即使在滚动窗口时，如何将图像放入网站并保留其位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:57:55.437

对于图像，使用`position: fixed;`

和

```
(function($) {
    $(document).ready(function() {
        $('#form1').click(function() {
            $(this).hide();
        });
    });
})(jQuery); 
```

但我真的不明白你为什么要这样做......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:09:00.490

您可以使用 jquery 和 css 来实现这一点。首先，您需要隐藏第二个按钮，然后在第一个按钮上添加一个事件，以便在单击第一个按钮时显示第二个按钮。

就像是：

```
$(document).ready(function() {
    $("#form2").hide();

    $("#1 input").click(function() {
        $("#form2").show();
        $("#1").hide();

    });
}); 
```

这最初会隐藏第二个表单，然后在第一个按钮上设置一个单击事件以显示第二个表单。这是你的想法吗？

至于问题的第二部分，您可以使用`position: fixed`css 属性来设置页面上固定的任何元素。您还需要定位图像，例如：

```
<img id="myimage" src="img.png" />
<style>
#myimage {
  position: fixed;
  left: 10px;
  top: 10px;
}
</style> 
```

无论您是否滚动，这都会将图像设置为固定在屏幕左侧和顶部 10 像素处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:09:55.387

我并没有真正理解你的问题，跳跃是一个很难通过编码实现的目标（此处为 ALERT sarcasm）。
无论如何，我认为你需要一些 jquery：

```
 $(document).ready(function(){

        $('#form2').hide();
            $('#form1').show();

        $('#button').click(function(){
            $('#form2').show();
            $('#form1').hide();
    }); 
```

和 html 应该是这样的：

```
<form id="form1" action="#"> 
      <input type="button" id="button">  
   </form>   
   <form id="form2">   
       <input type="checkbox">    
       <input type="button">  
   </form> 
```

但我仍然对你想要做什么感到困惑

# xml - 如何使用 XSLT 将名称空间添加到我的 XML 的根元素？

> ID：15981488
> 
> 赞同：11
> 
> 时间：2013-04-12T21:55:24.377
> 
> 标签：xml, xslt, xml-parsing

我有一个输入 XML

```
<Request>
  <Info>
    <Country>US</Country>
    <Part>A</Part>
   </Info>
</Request> 
```

我的输出应该是

```
<Request
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns="http://hgkl.kj.com">
  <Info>
    <Country>US</Country>
    <Part>A</Part>
  </Info>
</Request> 
```

请让我知道如何添加多个命名空间和一个默认命名空间，如上述 XML。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-12T22:18:30.507

以下是我在 XSLT 2.0 中的操作方式...

**XML 输入**

```
<Request>
    <Info>
        <Country>US</Country>
        <Part>A</Part>
    </Info>
</Request> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*" priority="1">
        <xsl:element name="{local-name()}" namespace="http://hgkl.kj.com">
            <xsl:namespace name="xsi" select="'http://www.w3.org/2001/XMLSchema-instance'"/>
            <xsl:namespace name="xsd" select="'http://www.w3.org/2001/XMLSchema'"/>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<Request xmlns="http://hgkl.kj.com"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <Info>
      <Country>US</Country>
      <Part>A</Part>
   </Info>
</Request> 
```

* * *

这是一个**XSLT 1.0**选项，它产生相同的输出，但要求您知道根元素的名称......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|text()|comment()|processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/Request">
        <Request xmlns="http://hgkl.kj.com" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <xsl:apply-templates select="@*|node()"/>           
        </Request>
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{local-name()}" namespace="http://hgkl.kj.com">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

# c# - 解析字符串以提取带有嵌套括号的命令和相关参数

> ID：15981491
> 
> 赞同：-2
> 
> 时间：2013-04-12T21:55:31.157
> 
> 标签：c#, string, parsing, nested

我有一个包含嵌套括号的字符串：

```
string commandLine = "position(1, random(1, random(1, 9)), random(3, 15))" 
```

我想用以下规则解释这个字符串

*命令名称（参数 1，参数 2，参数 3）*

在哪里：

*   '(' 和 ')' 括号表示与命令名称相关的参数
*   ',' 逗号分隔每个参数

这使我相信我首先需要设计一种方法来确定与每个命令关联的正确的开括号和右括号。

从[这个](https://stackoverflow.com/questions/15032770/c-sharp-validate-that-string-contains-matching-number-of-brackets)问题的最佳答案看来，我不能使用正则表达式。那么我应该如何处理这个任务呢？

编辑：

有一个想法。

在碰到第一个左括号后计算'（'括号的数量。该数字表示在随后的'）集合中右括号括号的索引

我的措辞让我失望，但我相信这是一个开始？

```
position(1, random(1, random(1, 9)), random(3, 15))

Opening 1         2         3              4
Closing                          12              34 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:19:56.170

你可以通过很多方式来解决这个问题。这是一个：

匹配所有出现的`[a-z]+\s*\([^()]+\)`使用正则表达式。这将只匹配其参数不包含任何其他命令的命令。在您的示例中，这些将是`random(1, 9)`and `random(3, 15)`。

对于每个匹配项，计算结果（或生成内存中的表示，无论你的东西是什么）。这应该不难，因为您可以轻松地隔离命令名称并用逗号分隔参数（这里没有错误解析的机会，因为我们知道没有参数是命令）。

使用不模棱两可的东西作为键将结果存储在字典中。例如，假设以 开头的参数通常是非法的`?`，那么在第一步之后，您可能会得到这个字典：

```
"?1" => [the result or representation of random(1, 9)]
"?2" => [the result or representation of random(3, 15)] 
```

`?1`用占位符和替换原来的匹配项`?2`。您现在已经消除了最里面的嵌套命令。重复上述过程，按要求查阅字典；每次迭代都会消除最里面的命令集。

当输入字符串（在经过多次转换之后）已简化为`?XXX`您已成功解析所有内容并且最终结果是添加到字典中的最后一个条目时（您可以使用输入字符串作为键将其拉出） ）。如果正则表达式不匹配任何内容并且输入字符串不是这种形式，则原始输入有语法错误。

这不是迄今为止最有效的算法，但它很容易在高层次上实现，并且不需要您编写繁琐的逐字符解析代码。

# asp.net - 双向使用Webclient进行二进制

> ID：15981496
> 
> 赞同：4
> 
> 时间：2013-04-12T21:55:58.847
> 
> 标签：asp.net, .net, silverlight, httpwebrequest, webclient

[Webclient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.95%29.aspx)用于将指令文件（最大 1 兆字节）上传到服务器，并以二进制数据的形式接收此操纵的指令集作为响应（最大 1 兆字节）。

我能够上传二进制文件和下载二进制文件，但我无法使用相同的请求/响应命令来完成。意味着，不是同一个 webclient 可以做到这一点。在这种情况下，它会丢失对在服务器上设置的流的引用。

![Webclient 双向二进制示例](https://i.stack.imgur.com/TC0fH.png)

**如何在一个序列中写入和读取二进制数据？**

.

**服务器脚本**

```
Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

            'Setup data reader
            If cRead Is Nothing Then cRead = New ReadDataFromContext
            cRead.Read(context) 'read data from 'context.Request.InputStream'

            If cWrite Is Nothing Then cWrite = New WriteDataToContext
            cWrite.Write(context) 'write data to 'context.Response.OutputStream'

        End Sub 
```

.

**客户端类**

```
Partial Public Class MainPage
    Inherits UserControl
    Private WithEvents WCUpload As WebClient
    'Private WithEvents WCDownload As WebClient
    Private Stream As IO.Stream

    Dim U As New Uri("http://localhost:51001/communicator.ashx", UriKind.Absolute)

    Public Sub New()
        InitializeComponent()
        WCUpload = New WebClient
        'WCDownload = New WebClient

    End Sub

    Private Sub btnTest_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles btnTest.Click
        WCUpload.OpenWriteAsync(U)
    End Sub

    'This methode is never called if using WCUpload (on WCDownload it works but WCDownload has no more data)
    'Private Sub WC_OpenReadCompleted(sender As Object, e As System.Net.OpenReadCompletedEventArgs) Handles WCDownload.OpenReadCompleted
    '    Dim D(e.Result.Length - 1) As Byte
    '    e.Result.Read(D, 0, D.Length)
    '    Me.btnTest.Content = System.Text.Encoding.UTF8.GetString(D, 0, D.Length)
    'End Sub

    Private Sub WC_OpenWriteCompleted(sender As Object, e As System.Net.OpenWriteCompletedEventArgs) Handles WCUpload.OpenWriteCompleted
        Me.Stream = e.Result

        Dim D() As Byte = System.Text.Encoding.UTF8.GetBytes("Hallo Timo")
        Me.Stream.Write(D, 0, D.Length)
        Me.Stream.Close()
    End Sub

    Private Sub WC_WriteStreamClosed(sender As Object, e As System.Net.WriteStreamClosedEventArgs) Handles WCUpload.WriteStreamClosed
        'WC.OpenReadAsync(U)

        'WCDownload.OpenReadAsync(U)

        Me.Stream.Position = 0 '<<--- ERROR, cannot access to disposed object
        Dim D(Me.Stream.Length - 1) As Byte
        Me.Stream.Read(D, 0, D.Length)
        Me.btnTest.Content = System.Text.Encoding.UTF8.GetString(D, 0, D.Length)

    End Sub

    Public Sub PushData(ByVal StreamIn As IO.Stream, ByVal StreamOut As IO.Stream)
        Dim Buffer(4096 - 1) As Byte
        Dim BytesRead As Integer
        On Error Resume Next

        'RaiseEvent Progress(Me, 0)

        Do
            BytesRead = StreamIn.Read(Buffer, 0, Buffer.Length)
            If BytesRead <= 0 Then Exit Do
            StreamOut.Write(Buffer, 0, BytesRead)
            'RaiseEvent Progress(Me, StreamOut.Length / StreamIn.Length * 99) 'max 99 to raise the event with 100%
        Loop

        'RaiseEvent Progress(Me, 100)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:37:51.287

在我看来，您只是在寻找该`UploadData`方法，该方法将`byte[]`请求正文发送到服务器，然后将`byte[]`响应正文返回给客户端。简单如：

```
byte[] req = ...;
byte[] resp;
using(var client = new WebClient()) {
    resp = client.UploadData(address, req);
} 
```

* * *

归根结底，http 是一个请求/响应协议——不过，您可以按顺序执行多个请求。如果您需要更大的灵活性，我建议您查看允许两端临时发送的 web-sockets。

* * *

对于 silverlight 上的异步使用，请尝试 PCL 版本的 HttpClient - 类似的 api，但比 silverlight 提供的开箱即用的实现更完整：http: [//blogs.msdn.com/b/bclteam/archive/2013/02/18/portable -httpclient-for-net-framework-and-windows-phone.aspx](http://blogs.msdn.com/b/bclteam/archive/2013/02/18/portable-httpclient-for-net-framework-and-windows-phone.aspx)

# c# - 为什么我的 WMI InvokeMethod 调用返回 0（成功）但无法远程执行任何操作？

> ID：15981499
> 
> 赞同：2
> 
> 时间：2013-04-12T21:56:04.643
> 
> 标签：c#, wmi, win32-process

我有一个非常简单的 WMI 方法，可以连接到远程服务器以启动批处理文件。

这次执行的返回码是 0，告诉我它成功了。如果我更改批处理文件的路径，它会返回 9，所以我知道它正在查找命令文件。

问题是，当我查看服务器时，我可以看到什么都没有发生。此批处理文件所做的第一件事是从驱动器中删除 GIT 存储库。

我的代码是：

```
public object[] ProcessToRun;

    public void StartBuild()
    {
        ProcessToRun = BuildServerInfo.SelectedBranch == BuildServerBranch.Branch.Development ? new object[] { "c:\\src\\Build\\Batch1_Development.cmd" } : new object[] { "c:\\src\\Build\\Batch2_Release_Candidate.cmd" };
        var connection = new ConnectionOptions();

        connection.Impersonation = ImpersonationLevel.Impersonate;
        connection.Authentication = AuthenticationLevel.Packet;
        connection.EnablePrivileges = true;
        connection.Timeout = new TimeSpan(0,0,15);

        var mp = new ManagementPath("\\\\" + BuildServerInfo.BuildServer + "\\root" + "\\cimv2:Win32_LogicalDisk.DeviceID=\"C:\"");
        var ms = new ManagementScope(mp, connection);

        var mprocess = new ManagementClass(ms, new ManagementPath("Win32_Process"), new ObjectGetOptions());
        var results = mprocess.InvokeMethod("Create", ProcessToRun);
    } 
```

这是代码的问题，还是我需要对我的服务器做些什么？服务器是 Windows 2008 R2。

谢谢。

编辑：我的帐户具有完全管理员权限，并且 CIMV2\Security 下的 WMI 用户具有完全访问权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T22:51:05.717

看来我需要设置工作目录才能执行。我创建了 inParams 并更改了我的 Invoke 以这样使用它们：

```
var inParams = mprocess.GetMethodParameters("Create");
        inParams["CommandLine"] = @"c:\src\Build\Batch1_Development.cmd";
        inParams["CurrentDirectory"] = @"c:\src\Build";

        var outParams = mprocess.InvokeMethod("Create", inParams, null); 
```

# python - 我怎么能格式化这两个字典

> ID：15981502
> 
> 赞同：0
> 
> 时间：2013-04-12T21:56:23.137
> 
> 标签：python

我有两个字典：

```
sampleOne= {'a':4, 'b':7, 'c':3, 'd':5}
sampleTwo= {'a':6, 'b':3, 'c':7, 'd':2} 
```

我试过使用：

```
for key,value in sampleOne:
     print(key,value)
for key,value in samepleTwo:
     print(key,value) 
```

但是这种方法不起作用，我希望结果如下所示：

```
a    4    6
b    7    3
c    3    7
d    5    2 
```

但是我的看起来像这样：

```
a    4
b    7
c    3
d    5
a    6
b    3
c    7
d    2 
```

将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:57:27.303

```
>>> sampleOne= {'a':4, 'b':7, 'c':3, 'd':5}
>>> sampleTwo= {'a':6, 'b':3, 'c':7, 'd':2}
>>> for k in sampleOne.viewkeys() | sampleTwo.viewkeys(): # On Py 3 use .keys() instead
        print k, sampleOne.get(k, 0), sampleTwo.get(k, 0)

a 4 6
c 3 7
b 7 3
d 5 2 
```

如果您需要按顺序输入字母，请更改此行：

```
for k in sampleOne.viewkeys() | sampleTwo.viewkeys() 
```

至

```
for k in sorted(sampleOne.viewkeys() | sampleTwo.viewkeys()) 
```

# ruby-on-rails - Update_attributes - 不确定它在保存什么

> ID：15981506
> 
> 赞同：0
> 
> 时间：2013-04-12T21:56:28.483
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 Rails API 中，我有以下行用于更新模型。如您所见，它接受很多参数。但是，我对此有几个问题，目前的文档没有回答......

```
@updated_special_deal.update_attributes(:category => params[:category], :title => params[:title], :excerpt => params[:excerpt], :description => params[:description], :original_price => params[:original_price], :deal_price => params[:deal_price], :provider => params[:provider], :product_link => params[:product_link], :conditions => params[:conditions], :phone_number => params[:phone_number], :street => params[:street], :city => params[:city], :postal_code => params[:postal_code], :state => params[:state], :country => params[:country], :expires => params[:expires], :image_file_name => params[:image_file_name], :image_content_type => params[:image_content_type], :image_file_size => params[:image_file_size], :image_updated_at => params[:image_updated_at], :public => true) 
```

通过外部客户端应用程序尝试此 PUT 请求。我在下面得到这个回复......

```
Started PUT "/api/v1/1/special_deals/47?title=The+greatest+deal+ever" for 127.0.0.1 at 2013-04-12 14:39:15 -0700
Processing by Api::V1::SpecialDealsController#update as JSON
Parameters: {"title"=>"The greatest deal ever", "servant_id"=>"1", "id"=>"47"}

ActiveRecord::RecordInvalid - Validation failed: Provider can't be blank, Description can't be blank: 
```

当然，我在模型中编写了这些规则。但是，我没有尝试传入 Provider 属性或 Description 属性。那么，这里发生了什么？

*   使用上面的 .update_attributes 语法，PUT 请求中未包含的参数会发生什么情况，他们是否只是尝试使用空白值更新模型？
*   如果是这种情况，我是否必须在使用 update_attributes 时为模型的所有属性提交值？

**编辑** 改写问题：如何编写 update_attributes 以便它只更新 PUT 请求中包含的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:02:36.877

您应该使用您的模型名称传递要在根元素内部更新的参数。所以你的参数应该是这样的：

```
{"servant_id"=>"1", "id"=>"47", "special_deal":{"title"=>"The greatest deal ever"}} 
```

在您的控制器操作中，您可以加载模型和关系，然后从“special_deal”参数更新模型。

```
def update
  servant = Servant.find(params[:servant_id])
  @special_deal = SpecialDeal.find(params[:id])
  @special_deal.servant = servant
  @special_deal.update_attributes(params[:special_deal])
end 
```

`update_attributes`只需获取一个哈希并更新哈希中的属性。如果你有你的参数，就像我提到的那样，那么`params[:special_deal]`将相当于`{"title" => "The greatest deal ever"}`. 将该散列传递给更新属性调用将仅更新`title`模型上的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:04:32.900

尝试：

删除：

```
:provider => params[:provider] and :description => params[:description] 
```

或确保为它们提供实际值。

您的模型具有需要有效值或不需要有效值的验证（取决于使用的确切验证）。

# web-applications - Tomcat Web 应用程序和浏览器 URL

> ID：15981513
> 
> 赞同：0
> 
> 时间：2013-04-12T21:56:56.937
> 
> 标签：web-applications, indexing, tomcat7

我在 tomcat 7 中部署了一个 webapp extensions.war。战争在顶层有 index.html。当用户说它`http://server:port/extensions/` 带来了 index.html。

我想在 extensions.war 下再创建两个 html 页面，即 indexOne.html 和 indexTwo.html。

用户如何使用诸如此类的 url，以`http://http://server:port/extensions/appOne` 使`http://http://server:port/extensions/appTwo`它们分别指向 extensions.war/indexOne.html 和 extensions.war/indexTwo.html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:33:01.397

通过 web.xml 配置没有直接的方法来做到这一点。Welcome-file-list 仅支持顶级文件。请注意，这些 URls`extensions/appOne`和`extensions/appTwo`不是顶级文件。

您可以创建自己的过滤器来为您自己的索引 html 文件提供服务：

```
if (isRequestTo(request,"appOne")) {
response.sendRedirect("/indexOne.html");
} 
if (isRequestTo(request,"appTwo")) {
response.sendRedirect("/indexTwo.html");
} 

public static boolean isRequestTo(HttpServletRequest request, String urlPart) {
    return request.getRequestURI().startsWith(urlPart);
} 
```

# ravendb - RavenDB：你如何使用 Smuggler 创建的转储文件？

> ID：15981514
> 
> 赞同：0
> 
> 时间：2013-04-12T21:56:57.453
> 
> 标签：ravendb

Ayende 提前告诉人们：[RavenDB 在报告方面很糟糕。](http://ayende.com/blog/136197/when-should-you-not-use-ravendb)

为了弥补这个缺点，RavenDB 有一个名为 Smuggler 的工具，可以将 RavenDB 数据导出到 RDBMS。

我的问题：

*   您如何使用 Smuggler 创建的转储文件？

重点：RavenDB 文档[解释了如何生成转储文件](http://ravendb.net/docs/server/administration/export-import)，但没有解释下一步该做什么。

当我生成转储文件并用记事本打开它时，它包含很多符号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:58:36.470

您不想为此使用 Smuggler。Smuggler 用于备份/恢复到 Raven。您应该改用 SQL 复制。

www.ravendb.net 上的文档目前反映了*旧*的索引复制包。有一种新的更好的方法尚未完全记录。有关详细信息，请参阅[Ayende 的此博客文章](http://ayende.com/blog/160641/ravendb-2-1-features-robust-sql-replication)，并观看[此 YouTube 视频](http://www.youtube.com/watch?v=KlpawSkHD4U)。

此外 - Raven 擅长为报告生成数据 - 它只是不擅长*临时*报告。您必须预先生成所有数据。这在许多情况下是可以接受的。

RavenDB 2.5 中还有[一个非常好的特性](http://ayende.com/blog/161249/ravendbs-querying-streaming-unbounded-results)，可以帮助以一致的方式流式传输所有数据。这非常适合报告目的。

实际上，复制到 SQL 的最佳理由是，如果您希望最终用户能够对数据进行原始访问。例如，如果他们想从 Excel 电子表格附加到数据源并创建自己的数据透视表，那么如果不先复制到 SQL 服务器，就无法做到这一点。

# java - SimpleDateFormat.getTimeInstance 忽略 24 小时格式

> ID：15981516
> 
> 赞同：7
> 
> 时间：2013-04-12T21:57:11.727
> 
> 标签：java, android, time, time-format

在我的应用程序中，我可以选择暂停执行一段时间。我想显示执行将恢复的时间，包括秒数，并且我希望根据系统设置格式化时间字符串。这是我想出的代码：

```
long millis = getResumeTime();
String timeString;
timeString = SimpleDateFormat.getTimeInstance(SimpleDateFormat.MEDIUM).format(millis); 
```

这确实会生成一个带秒数的格式化字符串，但它会返回 AM/PM 格式的时间，即使我在设置中设置了 24 小时时间格式。更有趣的是，系统托盘中的时间已使用 24 小时格式正确格式化。

我尝试像这样使用 DateFormat.getTimeFormat：

```
long millis = getResumeTime();
String timeString;
java.text.DateFormat df = android.text.format.DateFormat.getTimeFormat(this);
timeString = df.format(millis); 
```

但是生成的字符串不包含秒数，而且我看不到包含它们的方法。

我在 Android 4.2 模拟器上运行此代码。我在这里错过了什么吗？SimpleDateFormat 是否不知道 12/24 小时设置？如果不是，我如何获得系统格式的时间字符串表示（包括小时、分钟和秒）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-27T14:25:46.743

更简单的解决方案是：

```
String timeString = DateUtils.formatDateTime(getContext(), timeInMillis,
           DateUtils.FORMAT_SHOW_TIME); 
```

这可以正确处理 12/24 小时用户设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-25T08:47:56.857

Android 5 到 6.0.1 中似乎存在一个错误，其中`DateFormat#getTimeInstance(int)`返回`DateFormat`忽略*使用 24 小时格式*设置的错误。其他答案提到了此错误的各种解决方法。[您可以在https://code.google.com/p/android/issues/detail?id=181201](https://code.google.com/p/android/issues/detail?id=181201)上关注该问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T02:23:15.373

这很可能取决于您的系统所在的语言环境。如果您的系统在美国，它将默认为 12 小时而不是 24 小时。IE

```
long millis = new Date().getTime();
String uk = SimpleDateFormat
               .getTimeInstance(SimpleDateFormat.MEDIUM, Locale.UK)
               .format(millis);
String us = SimpleDateFormat
               .getTimeInstance(SimpleDateFormat.MEDIUM, Locale.US)
               .format(millis);
System.out.println("UK: " + uk);
System.out.println("US: " + us); 
```

会给你

```
UK: 16:19:49
US: 4:19:49 PM 
```

因此，也许您可​​以获取系统区域设置并在格式化程序中指定它。

但是，如果您总是希望它采用 24 小时格式，那么我建议您在格式化程序中明确指定它。

**更新：**由于您想根据设备规范获取时间格式，您可以使用系统的[Time_12_24](http://developer.android.com/reference/android/provider/Settings.System.html#TIME_12_24)值并根据结果值确定您的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T14:25:42.463

```
String timestamp = (DateFormat.format("yyyy.MM.dd kk:mm:ss", new Date())).toString(); 
```

用 kk 代替 hh。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T00:16:09.510

您可能应该创建自己的格式模式。如果我没记错的话，您使用的模式是“HH:mm:ss.SSS”，它可以为您提供小时、分钟、秒和小数秒的三位精度。

请参阅 SimpleDateFormat 的 API 参考文档。

# javascript - 将主干与 pub/sub 解耦

> ID：15981517
> 
> 赞同：0
> 
> 时间：2013-04-12T21:57:12.933
> 
> 标签：javascript, backbone.js, requirejs, publish-subscribe

我正在改进我使用主干/需求的方式，我发现了将模块耦合起来的做法有多糟糕（我当时不了解解耦）。

我开始玩[MinPubSub](https://github.com/daniellmb/MinPubSub)并且在很大程度上理解了这一点，但是根据我的阅读，其他模块不应该订阅其他模块（这使得它耦合？）。相反，他们应该是所有模块之间的中介，告诉他们如何交互。

我假设这个中介订阅了所有模块并且所有模块都订阅了中介？

我不知道如何实现这一点，但还没有找到一个关于如何用主干实现它的可靠代码示例，任何关于将 pubsub 添加到主干的帮助将不胜感激。

抱歉，这是一个一般性的问题，试图围绕这个概念展开思考，并找到一个广泛使用的体面示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:05:45.007

咳咳。pubsub 方法**是**中介者模式的一种实现。您的调解员是您的 pubsub 处理程序。

让我澄清一下。在您的 pubsub 模型中，您注册一个频道并发布到它。那里的任何可能正在收听的内容都会按照他们订阅的顺序获得您发布的任何内容。

将此与中介模式的正式定义进行对比：

> 使用中介者模式，对象之间的通信被封装在中介者对象中。对象不再直接相互通信，而是通过中介进行通信。这减少了通信对象之间的依赖关系，从而降低了耦合度。

（直接摘自[你最喜欢的百科全书](http://en.wikipedia.org/wiki/Mediator_pattern)）

这对你意味着什么？只要你不做我认识的人曾经做过的事，你就没事。**这**绝对是您要避免的：

1.  模块用自己的名字注册一个通道
2.  其他模块通过在其频道上发布来通过字面名称引用它

这是事件发布/订阅模型崩溃的地方，因为它在理论上是解耦的，但在实践中，您需要知道模块的确切名称。使您的事件足够通用，以便您可以在不丢失功能的情况下就地交换模块，并防止/避免直接访问其他模块，并且您可以很好地耦合。

如果其中任何一个不清楚，请告诉我，我会尝试澄清。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:10:40.433

有趣的是，我非常喜欢的一个库叫做[Mediator](http://thejacklawson.com/Mediator.js/)。

它在网站上有很好的例子，但粗略地说：

```
$.getJSON('url/to/json', function(json) {
    mediator.publish('myData:loaded', {response: json});
});

// Somewhere else
mediator.subscribe('myData:loaded', function(json) {
    // Do something
}); 
```

# c++ - 在 C++ 中打开/解码 Zork 保存文件（格查尔格式）

> ID：15981520
> 
> 赞同：0
> 
> 时间：2013-04-12T21:57:33.350
> 
> 标签：c++, save, decode, file-format, z-machine

好的，我已经开始玩 Zork，这是一款旧的视频游戏，我发现它以 Quetzal 文件格式保存游戏。我已经查看了`od`它的输出，但似乎没有任何意义。当我谷歌“格查尔保存文件”时，我遇到了维基百科，它给了我这个：

> 文件的幻数读取通常显示为：
> 
> > 'IFF 数据、Z 机器或 Glulx 保存的游戏文件 (Quetzal)'

我确信它是格查尔格式，因为`file`返回：`IFF data, Z-machine or Glulx saved game file (Quetzal)`，这与幻数相同（巧合？）。

那么，幻数是什么意思，我该如何编写一个 C 程序来解码它，大概是一种类似 IFZF 的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:20:11.233

“幻数”是指文件格式的独特特征，允许类似`file`的命令识别它们。例如，Quetzal 保存文件以`IFZS`标识其交换文件格式 (IFF) 文档类型的四字节序列开头。您可以使用文本编辑器或十六进制转储来验证这一点。

您可以在线找到[Z-machine 通用保存文件格式标准](http://www.gnelson.demon.co.uk/zspec/quetzal.html)。[您可以在Interactive Fiction Archive for Z-machine games](http://www.ifarchive.org/indexes/if-archiveXinfocom.html)中找到各种编译器、工具和规范，这可能会帮助您获得该格式的源代码。特别注意口译员，其中包括保存和恢复游戏的设施。

# php - 如何使用 wordpress REST api 获取 wordpress 博客的类别列表

> ID：15981526
> 
> 赞同：3
> 
> 时间：2013-04-12T21:58:18.670
> 
> 标签：php, wordpress, jetpack

首先，我知道这是一个理论问题，它不包含代码，但实际上这次我没有代码，我需要你对这个问题的建议。

**问题：**

是否可以从 wordpress.com 博客或通过 jetpack 连接的自托管博客获取所有类别的名称？

我试着在这里找到它[https://developer.wordpress.com/docs/api/](https://developer.wordpress.com/docs/api/)但没有运气。

所以请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T19:01:02.980

In case you are using JSON API plugin, you can use [http://yourdomain.com/?json=get_category_index](http://yourdomain.com/?json=get_category_index) to get the list of all categories.

PS: You can use this JSON API plugin in place of jetpack api as it is hosted on your own blog with greater control.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T16:16:21.543

我一直在寻找同样的东西。我不认为这个功能在 jetpack 上可用（截至 2013 年 5 月 24 日），但在托管博客上可用（见下面的链接）。

[http://codex.wordpress.org/Function_Reference/get_categories](http://codex.wordpress.org/Function_Reference/get_categories)

# ruby-on-rails - Rails RABL if else 语句

> ID：15981527
> 
> 赞同：5
> 
> 时间：2013-04-12T21:58:30.790
> 
> 标签：ruby-on-rails, rabl

我在 Rails 应用程序中使用 RABL 通过 REST 访问数据。除了 if 语句外，它正在工作。

我收到此错误：

```
undefined local variable or method `matitem_id' 
```

这是我的 show.json.rabl 代码：

```
object @expense
attributes :id, :unitcost, :quantity, :markup, :exp_date, :created_at, :description, :pcard, :invoice

child :employee do
  attributes :id, :maxname
end

child :vendor do
  attributes :id, :vendor_name
end

if matitem_id != nil
  child :matitem do |matitem|
    attributes :id, :itemnum
  end
end 
```

更新1

我也试过

```
if @expense.matitem_id != nil 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T22:56:32.087

如果`matitem_id`是`@expense`对象的一个​​属性，您应该通过帮助器在条件中引用它，`root_object`如下所示：

```
if root_object.matitem_id
  child :matitem do |matitem|
    attributes :id, :itemnum
  end
end 
```

此外，这`!= nil`可能是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:04:53.273

这一行：

`if :matitem_id != nil`

从字面上将符号`:matitem_id`与`nil`. 这永远不会是真的。您需要做的是比较子对象的 ID。您可以将对象传递到块中：

```
child :matitem do |matitem|
  if matitem.id != nil
    ...
end 
```

# android - 如何从语音识别 API 中保存音频？

> ID：15981536
> 
> 赞同：0
> 
> 时间：2013-04-12T21:59:07.133
> 
> 标签：android, speech-recognition, voice-recognition, speech-to-text

我正在尝试构建 android 移动应用程序以将我所说的内容保存在 mp3 文件中，使用 Android 语音识别 API（我不想使用媒体播放器记录功能）这是我的代码，我该怎么办？

```
 public class Voice extends Activity implements OnClickListener {
@Override
protected void onCreate(Bundle savedInstanceState) {

    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.voice);

    Intent i=new Intent (RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
                 i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    i.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speak up son!");
    i.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS,1);
    startActivityForResult(i,check);

} 
```

# jquery - HTML5 视频和 Jquery - 暂停视频 3 秒

> ID：15981537
> 
> 赞同：0
> 
> 时间：2013-04-12T21:59:10.130
> 
> 标签：jquery, html5-video

如何将视频暂停 2 或 3 秒并继续使用 jQuery 播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:02:20.547

```
setTimeout(function(){
$('yourVideoElementSelector')[0].play();
},2000); 
```

你的意思是每次机会都这样吗？

或者你的意思是暂停播放视频？

```
$('yourselector')[0].pause();
setTimeout(function(){ $('yourselector')[0].play();}, 2000); 
```

# ember.js - 我如何显示传递给 ember 集合视图的模型的内容

> ID：15981539
> 
> 赞同：0
> 
> 时间：2013-04-12T21:59:20.150
> 
> 标签：ember.js, ember-data

下面的 ember 示例使用 Foundationcss 显示手风琴。我已经使用 ember 集合视图实现了手风琴，并通过内容绑定将数据传递给它。

如何在集合视图中的每个项目渲染中显示来自 Fixtures 的 NAME 和 DESC？

请使用我的 jsFiddle 来理解我的问题：http: [//jsfiddle.net/theremin/6hLbC/](http://jsfiddle.net/theremin/6hLbC/)

*模板*

```
<script>
  $(document).foundation();
</script>
<script type="text/x-handlebars" data-template-name="application">
    <h1>Example</h1>
    {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="index">
    {{view App.AccordionView contentBinding="content"}}
</script> 
```

*JS*

```
App = Ember.Application.create({});

App.Store = DS.Store.extend({
    revision    : 12,
    adapter     : 'DS.FixtureAdapter'
});

App.Router.map( function() {

});

App.IndexRoute = Ember.Route.extend({
    model : function(){
        return App.Device.find();
    }
})

App.AccordionController = Ember.ArrayController.extend({

});

App.AccordionView = Ember.CollectionView.extend({
    tagName : "div",
    classNames : ["section-container", "accordion"],
    attributeBindings : ["data-section"],
    "data-section" : "accordion",
    itemViewClass     : Ember.ContainerView.extend({
        tagName : "section",
        childViews          : ["titleView", "contentView"],
        titleView    : Ember.View.extend({
            tagName   : "div",
            classNames : ["title"],
            template  : Ember.Handlebars.compile('<p><a href="#">Name:{{name}}{{content}}</a></p>')
        }),
        contentView  : Ember.View.extend({
            tagName   : "div data-section-content",
            classNames : ["content"],
            template  : Ember.Handlebars.compile('<p>desc:{{desc}}</p>')
        }),
    }),
})

App.Device = DS.Model.extend({
    name : DS.attr('string'),
    desc : DS.attr('string')
});
App.Device.FIXTURES = [{
    id : 1,
    name: "Plug1",
    desc: "Some words about plug1"
},
{
    id : 2,
    name: "Plug2",
    desc: "Some comments about plug2"    
}
]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:54:08.070

工作版本在这里[http://jsfiddle.net/6hLbC/1/](http://jsfiddle.net/6hLbC/1/)。

基本上，Ember 在您制作自定义 ContainerView 时不会自动继承上下文，因此您需要专门定义它。

```
itemViewClass     : Ember.ContainerView.extend({
    tagName : "section",
    childViews          : ["titleView", "contentView"],
    titleView    : Ember.View.extend({
        tagName   : "div",
        classNames : ["title"],
        contextBinding: "parentView.content",
        template  : Ember.Handlebars.compile('<p><a href="#">Name:{{name}}{{content}}</a></p>')
    }),
    contentView  : Ember.View.extend({
        tagName   : "div data-section-content",
        classNames : ["content"],
        contextBinding: "parentView.content",
        template  : Ember.Handlebars.compile('<p>desc:{{desc}}</p>')
    }),
}), 
```

# vb.net - Visual Basic“终于出现异常”

> ID：15981543
> 
> 赞同：-1
> 
> 时间：2013-04-12T21:59:41.737
> 
> 标签：vb.net

我想在 catch 语句之后运行一段代码，无论发生哪个异常，但仅在发生某些异常时。所以基本上它是一个需要异常才能执行的finally语句。在visual basic中是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:38:24.507

怎么样

```
Dim isException As Boolean = False
Try
    ....
Catch ex As ApplicationException
    isException = True
    ....
Catch ex As Exception
    isException = True
    ....
Finally
    If (isException)
        ....
    End If
End Try 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:44:52.423

我不喜欢它，但是嵌套怎么样`Try`：

```
Try
    Try
        ....
    Catch ex As ApplicationException
        Throw
    Catch ex As Exception
        Throw
    End Try
Catch
    ' This is your "finally"
End Try 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:02:18.553

无论是否引发异常，都会始终调用 If 语句的 finally 块。[MSDN](http://msdn.microsoft.com/en-gb/library/fk6t46tz%28v=vs.71%29.aspx)

唯一的另一种方法是让另一个方法接受异常作为参数并从异常捕获中调用该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T22:23:28.520

您可以添加不同的异常块，如下所示：

```
Try
    ' do operation
' Most specific:
Catch e As ApplicationException
    ' do something only if ApplicationException has occurred
' Least specific:
Catch e As Exception
    Console.WriteLine("{0} Second exception caught.", e);
End Try 
```

# mysql - 如何让php代码以vbnet形式执行

> ID：15981551
> 
> 赞同：2
> 
> 时间：2013-04-12T22:00:49.703
> 
> 标签：mysql, vb.net

好的，所以我正在将文件上传到数据库，我在 php 中编写了上传部分。但我希望 vb 执行它。我会用 vb 写它，但我不是最好的 vb 程序员，因为我刚开始使用它。所以我想要的是当用户单击按钮上传时，我希望它执行我的 php 代码并捕获其结果。这可能吗？如果是这样怎么办。

如果你想看他的代码，看看是否可能这里是我的 php 代码

```
 if(isset($_POST['upload']) && $_FILES['userfile']['size'] > 0)
{
    $fileName = $_FILES['userfile']['name'];
    $tmpName  = $_FILES['userfile']['tmp_name'];
    $fileType = $_FILES['userfile']['type'];
    $fileSize = $_FILES['userfile']['size'];
    $fp      = fopen($tmpName, 'r');
    $content = fread($fp, filesize($tmpName));
    $content = addslashes($content);
    fclose($fp);
    if(!get_magic_quotes_gpc())
    {
        // $fileName = addslashes($fileName);
    }
    $query = "INSERT INTO upload (name, type, size, content) VALUES 
          ('$fileName', '$fileType', '$fileSize', '$content')";
    mysql_query($query) or die('Error, query failed');
    echo "<br>File $fileName uploaded<br>";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:52:01.290

您可以使用以下命令从您的 vb.net 编码中调用 php 页面

```
System.Net.WebRequest
System.Net.WebResponse 
```

例如：[调用页面并获得响应]

```
Private Function IsConnectionAvailable(ByVal _URL As String) As Boolean
    'Call url
    'http://www.google.com/
    'http://www.google.co.in/search?sclient=psy-ab&hl=en&site=&source=hp&q=mitac.co.in&btnG=Search
    Dim url As New System.Uri(_URL)

    'Request for request
    Dim req As System.Net.WebRequest
    req = System.Net.WebRequest.Create(url)
    req.Timeout = 5000
    Dim resp As System.Net.WebResponse
    Try
        resp = req.GetResponse()
        resp.Close()
        req = Nothing
        Return True
    Catch ex As Exception
        req = Nothing
        Return False
    End Try
End Function 
```

在这里找到如何将参数发布到 php 页面

[使用 VisualBasic 发布到 PHP？](https://stackoverflow.com/questions/11526729/post-to-php-using-visualbasic)

# c# - Montouch.dialog 访问元素单独导致错误

> ID：15981552
> 
> 赞同：0
> 
> 时间：2013-04-12T22:00:56.413
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我想对从 JSON 响应中返回的单元格进行样式设置。我可以遍历元素，但是一旦我尝试设置它们的样式，就会出现以下错误。

我错过了什么？

！ - 错误

收藏已修改；枚举操作可能无法执行。

！ - 代码

```
string responseString = string.Empty;
        Uri uri = new Uri ("http://myhost/sample.json");
        HttpWebRequest request = new HttpWebRequest (uri);
        request.Method = "GET";

        HttpWebResponse response = request.GetResponse () as HttpWebResponse;
        var obj = JsonValue.Load (new StreamReader (response.GetResponseStream())) as JsonObject;
        if (obj != null) {

            var root = JsonElement.FromJson (obj);
            var jsonSection = root["section-1"] as Section;

            UILabel headerLabel = new UILabel();

            headerLabel.BackgroundColor = UIColor.White;
            headerLabel.Opaque = false;
            headerLabel.TextColor = UIColor.Blue;
            headerLabel.HighlightedTextColor = UIColor.White;
            headerLabel.Font = UIFont.BoldSystemFontOfSize (22);
            headerLabel.Frame = new RectangleF(8,0,200,60);
            headerLabel.Text = jsonSection.Caption;

            jsonSection.HeaderView = headerLabel;

            Console.WriteLine("before");

            foreach (var elmList in jsonSection)
            {
                Console.WriteLine("test");

                var element = new StyledStringElement(elmList.ToString())
                {

                    TextColor = UIColor.Red,
                    BackgroundColor = UIColor.Brown,
                    Accessory = UITableViewCellAccessory.DisclosureIndicator
                };

                jsonSection.Elements.Add(element);

            }

            var dvc = new DialogViewController (root, true);
            navigation.PushViewController (dvc, true);
        }

        response.Close (); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:03:51.457

您不能修改 foreach 枚举。改用 for 循环并调整索引

您收到错误是因为

```
 jsonSection.Elements.Add(element); 
```

我不知道这段代码（在我脑海中）你在做什么应该有效：

```
 var tmpSection = new Section();
 foreach(var elmList in jsonSection)
        {
            Console.WriteLine("test");

            var element = new StyledStringElement(elmList.ToString())
            {

                TextColor = UIColor.Red,
                BackgroundColor = UIColor.Brown,
                Accessory = UITableViewCellAccessory.DisclosureIndicator
            };

            tmpSection.Elements.Add(element);

        }

        jsonSection.Elements.AddRange(tmpSection); //it this doesn't work, loop through tmpSection and add the elements to jsonSection. 
```

# javascript - 选择多个 div 但使用 jQuery 播放不同的音频

> ID：15981560
> 
> 赞同：0
> 
> 时间：2013-04-12T22:01:36.677
> 
> 标签：javascript, jquery, audio

我目前正在尝试创建一个音板，只是为了学习一些更高级的 jQuery 技术。

目前，每个 div 都与一个代表声音的 jQuery 函数相关联。单击 div 时，会播放相应的声音。在当前状态下，我将每个函数编写为单独的函数，超时会导致冗余代码。

好奇是否有一种方法可以抽象该函数以构建一个代表任何 div 单击的函数，然后该函数将启动适当的音频文件。

请参见下面的代码：

HTML

```
<div id="wrapper">
        <h1>Soundboard Trials</h1>
        <div id="boxes">
            <li id="nyan"><audio src="song.mp3"/></li>
            <li id="duck"><audio src="duck.mp3"/></li>
            <li id="duck"><audio src="cat.mp3"/></li>
        </div>
    </div> 
```

CSS

```
#wrapper {
    width: 800px;
    margin: auto;
}

#boxes {
    padding: 0;
    margin: 50px auto;
    list-style: none;
}

#boxes li {
    width: 150px;
    height: 150px;
    background-color: #aaa;
    margin: 5px;
    float: left;
    cursor: pointer;} 
```

jQuery

```
$(function(){
$("#nyan").click(function(){
    var audio = $('audio')[0];
    if (audio.paused){
        audio.play();
    } else {
        audio.pause();
    }
});

$("#duck").click(function(){
    var audio = $('audio')[1];
    if (audio.paused){
        audio.play();
    } else {
        audio.pause();
    }
});
$("#cat").click(function(){
    var audio = $('audio')[2];
    if (audio.paused){
        audio.play();
    } else {
        audio.pause();
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:14:58.163

您可以根据列表的上下文（容器）进行选择。如：

```
$(document).on("click.mySoundboard", "#boxes li", function (event) {
    var $audio = $("audio", event.target);
    console.log($audio.attr("src"));

    // etc...
}); 
```

[工作示例 - jsFiddle](http://jsfiddle.net/jw7e9/1/ "工作示例 - jsFiddle")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:06:44.653

试试这个：

```
<div id="boxes">
    <li id="nyan" class="audioclick"><audio src="song.mp3"/></li>
    <li id="duck" class="audioclick"><audio src="duck.mp3"/></li>
    <li id="duck" class="audioclick"><audio src="cat.mp3"/></li>
</div>

$(function(){
    $('#boxes').on('click','audioclick',function(){
        var $eq = $(this).eq(),
            audio = $('audio').get($eq);

        if (audio.paused){
            audio.play();
        } else {
            audio.pause();
        }
    });
}); 
```

这应该在单击时获取项目的索引号，然后根据该索引号选择相应的音频元素（因为它是一对一的匹配）。

# php - 为什么这个 JS 变量在我的 PHP 中工作

> ID：15981562
> 
> 赞同：1
> 
> 时间：2013-04-12T22:01:46.233
> 
> 标签：php, javascript, jquery

我在包含在脚本标签中的 PHP 文件中有一个 JS 脚本，出于某种奇怪的原因，它工作正常。

我通常会通过 AJAX 将 JS 变量分配给 PHP，但我错误地尝试了这个，它工作正常。任何想法为什么？

```
$(document.body).on("change","select[name=city]", function(){ 
    var v = $(this).val().replace("%","");
    if( v != "undefined" && v != undefined ){
    <?php $options['tax'] = v; ?>
    }
}); 
```

编辑：所以稍后在单击事件之后，我将通过 JS 显示该 php 变量，并显示正确的值。这对我来说毫无意义。

编辑：所以当我将 v 分配给 php 变量时，就像它分配一个常量一样，然后当我使用控制台 $eshopoptions['tax'] 在 JS 上输出它时，它会抛出它解释为 javascript 变量的 'v'。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T22:05:07.300

它不工作。php 无效。

```
<?php $options['tax'] = v; ?>
                        ^---this is an undefined constant in PHP. 
```

仅仅因为`v`恰好出现在 JS 和 PHP 中并不意味着它们是同一个变量。他们不是。请记住，PHP 在服务器上执行，并且不知道 javascript 是什么，也不知道如何解析/执行它。Javascript 也一样。它不知道 PHP 是什么，甚至从未见过 php 代码，因为当JS 引擎在客户端浏览器中启动时， php 代码已经**消失了。**

您正在做的是将未定义的常量分配`v`给`$options['tax']`. PHP 很有礼貌，假设您忘记在字符串周围加上引号，因此它将代码视为

```
<?php $options['tax'] = 'v'; ?>
                        ^-^-- 
```

因为这段代码实际上并没有输出任何东西，浏览器会看到：

```
if (v != "undefined" && v != undefined) {
}  // <-- look ma, no php! 
```

# sql - 服务代理跨实例（到不同的数据库）

> ID：15981564
> 
> 赞同：1
> 
> 时间：2013-04-12T22:01:48.577
> 
> 标签：sql, service-broker

我正在为跨实例/服务器通信创建服务代理应用程序。我已经与服务经纪人合作了一段时间，我有点舒服。我的服务代理正在为同一个实例工作（不同的数据库消息传递）

但我想要的是从服务器 1 向服务器 2 发送一条消息。我使用对话安全性和必要的服务代理对象来实现这一点。不过，我想做的是从 [服务器 1 数据库 1] 向 [服务器 2 数据库 1 和数据库 2 ~ 相同实例] 发送消息。

我在 [服务器 1 数据库 1] 和 [服务器 2 数据库 1] 上创建了必要的证书并交换了它们，然后创建了所有服务代理对象。当我从 [Server 1 database 1] 向 [Server 2 database 1] 发送消息时，一切正常。

但，

当我尝试从 [服务器 1 数据库 1] 向 [服务器 2 数据库 2] 发送消息时（在新数据库上创建证书并交换它们后，将不会发送消息，并且我在 SQL 配置文件中看到错误: 未找到证书（此错误在服务器 2 数据库 2 上）。

只是为了提供更多信息，我在服务器 2 数据库 1 和 2 上具有相同的服务名称......

# java - java创建和编写XML的最佳方式

> ID：15981566
> 
> 赞同：0
> 
> 时间：2013-04-12T22:02:12.180
> 
> 标签：java, xml

我们需要将 XML 文件写入 zip 文件。这部分代码占总处理时间的 22% 以上，因此优化这将是一个巨大的胜利。我们目前使用 dom4j 写入 Document，然后使用 XMLWriter 将生成的 Document 写入 ZipOutputStream。

我们需要在 Java 1.4 上运行。

代码是这样编写的，所以我们不需要 DOM。我们按顺序完成了 xml 的编写，因此如果它可以立即写入 zip 流，那将很有效。

**更新：**我们还使用 dom4j 进行 XPath 查询（我们确实将 XML 读入 DOM）。我们可以有 2 个库，但如果有一个对两种用途都更好的替代方案，那也很好。

但是对于这个特定的需求，它纯粹是按顺序写出来的（即不需要DOM）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:30:33.877

我认为 StAX 产生流式 XML 输出： [http](http://stax.codehaus.org/) ://stax.codehaus.org/ 。这将使您无需在内存中为输出 XML 维护 DOM。

# jquery - 在 HTML Table 中包含多个 jquery 倒计时只设置一次

> ID：15981571
> 
> 赞同：0
> 
> 时间：2013-04-12T22:02:45.003
> 
> 标签：jquery, html-table, countdown

我正在做一个项目，我需要在一个页面上显示几个拍卖的状态。每个项目都有不同的结束日期。我给每一行一个唯一的 ID，然后使用该 ID 设置时间，但它只设置一次。这是我的脚本代码：

```
<script>
$(document).ready(function(){  
$('tr[id]').each(function () {
 var $this = $(this);
 var endDate = new Date();
 var count = $this.attr("id");
 var year = parseInt(count.slice(0,4));
 var month = parseInt(count.slice(4,6));
 var day = parseInt(count.slice(6,8));
 var hour = parseInt(count.slice(8,10));
 var minute = parseInt(count.slice(10,12));
 var second = parseInt(count.slice(12,14));
 endDate.setFullYear(year, month - 1, day);
    endDate.setHours(hour+1);
    endDate.setMinutes(minute);
    endDate.setSeconds(second);
 $('.countdown-styled').countdown({
      until: endDate,
      format: 'dHMS',
      render: function(data) {
        var el = $(this.el);
        el.empty()
          .append("<div>" + this.leadingZeros(data.days, 2) + " <span>days</span></div>")
          .append("<div>" + this.leadingZeros(data.hours, 2) + " <span>hrs</span></div>")
          .append("<div>" + this.leadingZeros(data.min, 2) + " <span>min</span></div>")
          .append("<div>" + this.leadingZeros(data.sec, 2) + " <span>sec</span></div>")
      }

    });
});
});
</script> 
```

这是我的桌子的布局：

```
<body>
<table id="timerTable">  
<tr id="20130425190000">
<div class="countdown-styled" style="width:200px;"></div>
</tr>
<tr id="20130416190000">
<div class="countdown-styled" style="width:200px;"></div>
</tr>
<tr id="20130424190000">
<div class="countdown-styled" style="width:200px;"></div>
</tr> 
```

此代码将表中的每个倒计时设置为相同的时间。（即 13 天 3 小时 58 分 24 秒 9 ）有什么想法吗？

编辑：如果要走的路是使用 ID，那么它必须是这种格式。这是从服务器动态设置的，并以这种格式返回。这就是我使用它的原因`parseInt`，`slice`也是我这样做的原因。格式为：年/月/日/时/分/秒（XXXXXXXXXXXXXX）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:11:16.667

您似乎循环了两次，$('tr[id]') 和 $('.countdown-styled')。

您只需要将倒计时应用于一个特定的后代：

```
$this.find('.countdown-styled').countdown 
```

作为记录，您的 html 也缺少单元格（td 元素），我认为这只是一个复制错误。

# asp.net - 使用 JayData 从 sql server 获取数据到 websql 浏览器

> ID：15981572
> 
> 赞同：0
> 
> 时间：2013-04-12T22:02:54.043
> 
> 标签：asp.net, asp.net-mvc-4, jaydata

我正在尝试添加与另一个实体相关的实体

```
 onlinedb.DemoShifts.filter("it.EmployeeID ==="+empID).toArray(function (DemoShift) {

        DemoShift.forEach(function (demoShift) {

            offlinedb.DemoShifts.add(demoShift);
            alert("Add DemoShift");
            onlinedb.Sites.filter("it.SiteID==="+demoShift.SiteID).toArray(function(Sitess){
                Sitess.forEach(function(site){

                    onlinedb.SiteChains.filter("it.ChainID==="+site.ChainID).toArray(function (chains) {
                        offlinedb.attach(chains[0]);
                        alert("Add SiteChain");
                    });

                    offlinedb.add(site);
                    var res = offlinedb.saveChanges();
                    res.done(function () { alert("Success"); });
                    res.fail(function (ex) { alert("Success"); });
                });
            });

        });

    }); 
```

我收到此错误“上下文已包含实体”

我到底在做什么错你能告诉我有什么方法可以检查实体是否已经存在或其他什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:54:32.950

如果实体附加了多个，则库会引发此错误。如果您评论以下行会发生什么？

```
offlinedb.attach(chains[0]); 
```

# objective-c - UIImage Resize with aspect ratio -> SAVE JPG -> LOAD -> 图像加载两倍大

> ID：15981573
> 
> 赞同：1
> 
> 时间：2013-04-12T22:03:01.113
> 
> 标签：objective-c, resize, uiimage, image-resizing

我使用此代码调整图像大小。

```
- (UIImage*)resizeToSize:(CGSize)size {

float height    = self.size.height;
float width     = self.size.width;

if (width > size.width) {
    width   = size.width;
    height  = size.width / (self.size.width / self.size.height);
}

if (height > size.height) {
    height  = size.height;
    width   = size.height / (self.size.height / self.size.width);
}

NSLog(@"Resize to size %@",NSStringFromCGSize(size));

if (height == self.size.height && width == self.size.width) {
    return self;
}    
CGSize newSize = CGSizeMake(width, height);

UIGraphicsBeginImageContextWithOptions(newSize, YES, 0.0);

[self drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSLog(@"Resized %@",NSStringFromCGSize(newImage.size));
return newImage;
} 
```

图像被调整大小，在下一步我通过 [UIImageJPEGRepresentation(image, 1.0) writeToFile:pngPath atomically:YES]; 保存它。

之后我加载文件，图像大小是原来的两倍，有什么提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:22:56.147

我怀疑这里发生的事情是你有一个`scale`2.0 的图像（在 Retina 设备上），但是你没有`@2x`在文件名中保存它，所以当你重新打开它时，它是一个`scale`1.0 的图像，尺寸是你想要的两倍。

如果是这种情况，有两种解决方案：您可以修复文件名，或者您可以通过将文件读入对象来重新打开文件`NSData`，然后使用它`UIImage +imageWithData:scale:`来获得适当缩放的图像。

# wordpress - WordPress - 使用不同浏览器/IP 时自动注销

> ID：15981575
> 
> 赞同：0
> 
> 时间：2013-04-12T22:03:26.450
> 
> 标签：wordpress, authentication, cookies

恐怕我自己无法解决这个问题。奇怪的是，这个问题对于我的安装来说似乎是独一无二的。

在我基于 WordPress 的网站上，用户在登录时遇到问题，尤其是在使用手机进行身份验证时：他们正在注销（即使选中“记住我”）并且必须重新输入他们的凭据（之后他们'再次注销）。据我推测，很可能是他们各自的移动互联网服务提供商一直在为他们的设备动态分配新的 IP 地址，导致身份验证失败。

当我使用我的桌面登录时，一切都会正常工作。但是，假设我已成功使用 Google Chrome 登录该站点，并且我打开 Mozilla Firefox （或任何其他浏览器）实例同时登录，Chrome 的用户“会话”将立即关闭（我知道这是因为一个异步脚本正在请求用户是否登录，并在我使用其他浏览器登录后提示我登录）。因此，我相信整个 WordPress 身份验证也与用户代理有关。

*尽管我非常感谢在从不同 IP 或浏览器访问站点时自动取消正在运行的会话所提供的额外安全性，但我的用户却没有。即使对我自己来说，使用三台不同的机器加上平板电脑和手机从任何可能的地方访问该站点也非常麻烦（最终我不再费心登录，只是等着回家）。*

由于 WordPress 身份验证使用 cookie，因此我研究了它们是如何生成的。该`wp_generate_auth_cookie()`方法使用用户名、部分哈希密码、过期时间和盐（定义在 中的常量盐`wp-config.php`），但它既不使用 IP 地址也不使用用户代理。我从字面上搜索了整个 WordPress 文件夹中的“用户代理”或“IP 地址”，但没有包含这些术语的登录相关脚本（只有少数插件根本不影响用户会话）。

这让我很困惑。如果 WordPress 不使用身份验证 cookie 存储该数据，它甚至如何意识到我使用不同的浏览器/计算机登录？将我和我的用户注销的检查发生在哪里？

您对如何解决问题有任何进一步的想法吗？

非常感谢您提前！！

哈蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:23:21.070

Cookie 由浏览器存储，同一台机器上的不同浏览器不共享该存储。因此，当您使用 Chrome 登录时，WP 会向 Chrome 发送一个登录 cookie，从而开始一个新会话。然后，当您使用 Firefox 访问该站点时，FF 没有登录 cookie，因此 WP 会提示您登录，然后将登录 cookie 发送到 FF，同时开始一个新会话。下次您使用 Chrome 访问该站点时，它会获取 Chrome 的登录 cookie，该 cookie 与上次发送的与您的用户名相关联的 cookie 不匹配，因此一切重新开始。

这并不能直接解释移动设备的问题；听起来出于某种原因，他们没有正确存储 cookie。

# angularjs - angular.js 如何在每个测试中模拟（或存根）xhr 请求

> ID：15981583
> 
> 赞同：5
> 
> 时间：2013-04-12T22:04:00.913
> 
> 标签：angularjs

在 Angular js 单元测试中，我想为每个测试设置 xhr 响应（在“it”方法中），而不是在 beforeEach 方法中，但它似乎不起作用。？

这有效

```
describe('ExampleListCtrl', function(){
  var $scope, $httpBackend;

  beforeEach(inject(function(_$httpBackend_, $rootScope, $controller) {
    $httpBackend = _$httpBackend_;
    $httpBackend.expectGET('examples').respond([]);   // <--- THIS ONE
    $controller(ExampleListCtrl, {$scope: $scope = $rootScope.$new()});
  }));

  it('should create "examples"  with 0 example fetched', function() {
    expect($scope.examples).toBeUndefined();
    $httpBackend.flush();
    expect($scope.examples).toEqual([]);
  });

}); 
```

结果

```
Executed 8 of 8 SUCCESS (0.366 secs / 0.043 secs) 
```

但是当我将 expectGet 方法移动到每个方法时，这会失败并出现错误。我不知道为什么。

```
describe('ExampleListCtrl', function(){
  var $scope, $httpBackend;

  beforeEach(inject(function(_$httpBackend_, $rootScope, $controller) {
    $httpBackend = _$httpBackend_;
    $controller(ExampleListCtrl, {$scope: $scope = $rootScope.$new()});
  }));

  it('should create "examples"  with 0 example fetched', function() {
    $httpBackend.expectGET('examples').respond([]);  // <--- MOVED TO HERE
    expect($scope.examples).toBeUndefined();
    $httpBackend.flush();
    expect($scope.examples).toEqual([]);
  });
}); 
```

这是错误

```
....
at /Users/me/app/test/unit/controllers/ExampleListCtrlSpec.js:3:1
      Error: No pending request to flush
at Error (<anonymous>)
at Function.$httpBackend.flush (/Users/me/app/test/lib/angular/angular-mocks.js:1171:34)
at null.<anonymous> (/Users/me/app/test/unit/controllers/ExampleListCtrlSpec.js:14:18) 
```

----已编辑----

按照下面的建议，我将控制器从 beforeEach 中移出，并像这样更改了测试，以便我可以多次测试 $httpBackend.expectGET。

```
describe('ExampleListCtrl', function(){
  var $scope, $rootScope, $httpBackend;

  beforeEach(inject(function(_$httpBackend_, $rootScope, $controller) {
    $httpBackend = _$httpBackend_;
    controller = $controller;
    $scope = $rootScope.$new();
  }));

  it('should create "examples" model with 0 example fetched from xhr', function() {
    $httpBackend.expectGET('examples').respond([]);
    controller(ExampleListCtrl, {$scope: $scope});
    $httpBackend.flush();
    expect($scope.examples).toEqual([]);
  });

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T23:31:26.573

发生这种情况是因为一旦您实例化您的控制器，它就会获取`$http`，因此，`$httBackend`. 因此，所有期望都应在要求之前做出。

如果您希望将您的移动`$httpBackend.expectGet`到规范（`it`块），那么您也需要`$controller(ExempleListCtrl, ...`在期望之后移动您的。

# javascript - 单击时左右移动div

> ID：15981585
> 
> 赞同：1
> 
> 时间：2013-04-12T22:04:15.307
> 
> 标签：javascript, jquery, animation

我想让 div 在我第一次点击它时向左走，第二次回到原来的位置，第三次再次离开，等等。

那么为什么这不起作用：http: [//jsfiddle.net/kS7KE/2/](http://jsfiddle.net/kS7KE/2/)

```
 var checker = new Boolean();
checker = true;
if (checker = true){
    $("#div").click(function () {   
        $(this).animate({left: "10%"},400);   
        checker = false;
    });
}
if (checker != true){
    $("#div").click(function () {   
        $(this).animate({left: "30%"},400);   
        checker = true;
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:12:08.077

首先，不要使用`new Boolean()`. 只需像这样初始化它`var checker = true;`

其次，您在第一个条件 ( `checker = true`) 中使用了赋值运算符。

第三，您没有在每次点击时执行条件。

第四，您的代码非常复杂。这是一个示例：

```
var checker = true;
$('#div').click(function() {
    $(this).animate({
        left: checker ? "10%" : "30%"
    });
    checker = !checker;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T22:10:02.293

为什么这么多代码？:)

```
var checker = true;
$("#div").click(function () {
    targetLeft = checker ? "10%" : "30%";
    $(this).animate({left: targetLeft},400);   
    checker ? checker = false : checker = true;
}); 
```

[http://jsfiddle.net/kS7KE/5/](http://jsfiddle.net/kS7KE/5/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T22:11:13.263

几个问题：

1.  `if (checker = true)`

    您使用的是赋值 ( `=`) 而不是检查相等性 (`==`或`===`)。

2.  您的检查发生在绑定时间

    你想检查`checker`你的点击事件。

像这样的事情可以解决问题：

```
var checker = new Boolean();
checker = true;
$("#div").click(function () { 
    var left = checker ? "10%" : "30%";
    $(this).animate({left: left},400);   
    checker = !checker;
}); 
```

[http://jsfiddle.net/lbstr/L4TN3/](http://jsfiddle.net/lbstr/L4TN3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T22:09:13.223

您不应该像您那样将多个事件处理程序附加到彼此冲突的同一对象上。这是一个更清晰、更简单的版本，它与您的代码应该做的事情相同。如您所见，它仅使用一个事件处理程序。

```
var checker = true;
$('#div').click(function(){
    if(checker){
       $(this).animate({left: "10%"},400);   
       checker = false; 
    } else {
        $(this).animate({left: "30%"},400);   
        checker = true;
    }
}); 
```

此外，您在第一个 if 语句（single `=`）中执行赋值，而不是使用`==`来比较您的操作数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T22:11:49.250

尝试这个：

```
var checker = true;
$("#div").on('click', function () {
    var left = checker ? '10%' : '30%';
    $(this).animate({left: left},400);   
    checker = !checker
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T22:09:25.230

您需要分配一次点击事件，并在其中执行逻辑：http: [//jsfiddle.net/kS7KE/2/](http://jsfiddle.net/kS7KE/2/)

```
var checker = new Boolean();
checker = true;
$("#div").click(function () { 

if (checker == true){       
        $(this).animate({left: "10%"},400);   
        checker = false;
    }
else{

        $(this).animate({left: "30%"},400);   
        checker = true;
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T22:09:40.843

用这个

```
 var checker = new Boolean();
checker = true;

    $("#div").click(function () { 
        if (checker == true){
        $(this).animate({left: "10%"},400);   
        checker = false;
            }
        else
        {
            $(this).animate({left: "30%"},400);   
        checker = true;
        }
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-12T22:10:47.837

```
var checker = true;

$("#div").on('click', function () {
    if (checker == true) {
        checker = false;
        $(this).animate({
            left: "10%"
        }, 400);

    } else {
        $(this).animate({
            left: "30%"
        }, 400);
        checker = true;
    }
}); 
```

`[Demo](http://jsfiddle.net/mohammadAdil/kS7KE/9/)`

# asp.net-mvc - 在 ASP.NET MVC DisplayFor Html Helper 中为空值显示“NULL”

> ID：15981594
> 
> 赞同：28
> 
> 时间：2013-04-12T22:04:57.893
> 
> 标签：asp.net-mvc, razor, html-helper

`@Html.DisplayFor`如果模型项的值为 ，有没有办法获得在视图中显示“NULL”的值`null`？

这是我目前正在处理的详细信息视图中的一个项目示例。现在 if 如果 Description 的值为 ，则不显示任何内容`null`。

```
<div class="display-field">
    @Html.DisplayFor(model => model.Description)
</div> 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-06-24T10:20:37.340

是的，我建议在您的 codefirst 模型中使用以下带有可为空日期时间字段的数据注释：

```
[Display(Name = "Last connection")]
[DisplayFormat(NullDisplayText = "Never connected")]
public DateTime? last_connection { get; set; } 
```

那么在你看来：

```
@Html.DisplayFor(x => x.last_connection) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-18T06:49:04.347

显示一个字符串，例如“-”代替空值显示通过“DisplayFor”标准助手使用助手扩展，即“DisplayForNull”

**1.创建文件夹“Helpers”并添加一个新的控制器“Helper.cs”**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Linq.Expressions;
using System.Web;
using System.Web.Mvc;

namespace WIPRO.Helpers
{
    public static class Helpers
    {
        public static MvcHtmlString DisplayForNull<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression)
        {
            var metaData = ModelMetadata.FromLambdaExpression(expression, helper.ViewData);

        string valuetodisplay = string.Empty;

        if (metaData.Model != null)
        {
            if (metaData.DisplayFormatString != null)
            {
                valuetodisplay = string.Format(metaData.DisplayFormatString, metaData.Model);

            }
            else
            {
                valuetodisplay = metaData.Model.ToString();

            }

        }
        else
        {
            valuetodisplay = "-";

        }

        return MvcHtmlString.Create(valuetodisplay);

    }

} 
```

**2\. 在你看来**

```
@using WIPRO.Helpers

@Html.DisplayForNull(model => model.CompanyOwnerPersonName) 
```

**代替**

```
@Html.DisplayFor(model => model.CompanyOwnerPersonName) 
```

希望能帮助到你 ;-）

# button - Google Maps Android API v2 上的透明按钮

> ID：15981595
> 
> 赞同：1
> 
> 时间：2013-04-12T22:04:59.167
> 
> 标签：button, transparent, google-maps-android-api-2

我一直在努力解决这个问题，但我似乎无法弄清楚。也许这里有人处理过类似的事情。

我试图在我的谷歌地图上放置一个按钮并使按钮透明。

这是我写的，但没有运气：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity"
android:keepScreenOn="true" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:name="com.google.android.gms.maps.SupportMapFragment"/>

<LinearLayout
    android:layout_width="40dp"
    android:layout_height="match_parent"
    android:layout_gravity="right"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:alpha=".30"
        android:text="@string/button1_label"
        android:background="@android:drawable/btn_default" />

</LinearLayout> 
```

另外，如果您发现我的代码有任何问题，请随时指出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:01:38.240

android:alpha 在 API 11 中添加。使用您自己的透明背景图像（或 statelist 中的一组图像）。

如果这没有帮助，请发布屏幕截图。这可以使回答更容易。

# scala - 理解空列表中的 forall 和存在输出

> ID：15981599
> 
> 赞同：14
> 
> 时间：2013-04-12T22:05:26.297
> 
> 标签：scala

```
scala> val l = List()
l: List[Nothing] = List()

scala> l.forall(x=>false)
res0: Boolean = true

scala> l.forall(x=>true)
res1: Boolean = true

scala> l.exists(x=>false)
res2: Boolean = false

scala> l.exists(x=>true)
res3: Boolean = false 
```

对于以上2个谓词，既然列表中不存在任何元素，那么forall怎么会返回true？我很困惑。你能帮忙解释一下吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-12T22:09:32.847

您可以改写这`forall`意味着列表中的任何元素都不会违反给定的谓词。如果*没有元素，则它们**都* 不会违反它。

 *[`forall`](https://www.assembla.com/code/scala-eclipse-toolchain/git/nodes/src/library/scala/collection/LinearSeqOptimized.scala?rev=f037b9d76693bac370db31e50b2565d0fcd97ec6)如果集合为空，则显式返回 true的源代码：

```
def forall(p: A => Boolean): Boolean = {
    var these = this
    while (!these.isEmpty) {
       ...
    }
    true
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-12T22:24:51.423

这些方法的语义被选择为与形式逻辑中的普遍和存在量词的语义相一致。

方法`forall`充当通用量词 -`true`如果集合中没有谓词所针对的元素，则返回`false`。如果没有元素，则谓词永远不会为假且`forall`为真。

方法`exists`充当存在量词。`true`如果至少有一个元素是谓词，则返回`true`。如果没有元素，则谓词永远不会为真并`exists`返回假。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-14T13:41:39.380

合取单位（即`and`）是`true`，而析取单位（即`or`）是`false`

考虑一个`lst`带有`n`元素的列表。

`lst.forall(f)`相当于

```
true && f(lst(0)) && ... && f(lst(n-1)) 
```

`lst.exists(f)`相当于

```
false || f(lst(0)) || ... || f(lst(n-1)) 
```

如果列表为空，则只有上述表达式中的第一项。*

# c# - OnItemUpdated 事件究竟何时在 ASP.NET 的 FormView 中专门触发？

> ID：15981600
> 
> 赞同：1
> 
> 时间：2013-04-12T22:05:31.690
> 
> 标签：c#, asp.net, .net, event-handling, webforms

我一生都无法弄清楚 OnItemUpdated 何时被解雇。我一直在尝试学习 ASP.NET，所以你在这段代码中看到的一些东西可能是故意用困难的方式完成的（所以我可以更好地理解幕后发生的事情）

基本上，我有一个 GridView，它是使用 formview 作为细节的主控件。

这是`SelectedIndexChanged`方法`GridView`

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    var context = new DataAccessLayer.SafetyEntities();
    var se = (from c in context.Employees
                  where c.EID == (long)GridView1.SelectedDataKey.Value
                  select c).ToList();
    FormView1.DataSource = se;
    FormView1.DataKeyNames = new string[] { "EID" };
    FormView1.DataBind();
} 
```

这很好，它在表单中显示选定的详细信息以进行编辑。这是看起来的`formview`样子：

```
<asp:FormView ID="FormView1" runat="server" DefaultMode="Edit" OnItemUpdating = "FormView1_ItemUpdating" OnItemUpdated="BLAH">
    <ItemTemplate>
        Select an employee!
     </ItemTemplate>
     <EditItemTemplate>
         <table>
             <tr>
                 <th>Name: 
                 </th>
                    <td>
                        <asp:TextBox runat="server" ID ="NameEdit" Text='<%#Bind("Name") %>' /> 
                    </td>
                    <br />
            </tr>
            <tr>
                <th>Manager: 
                </th>
                <td>
                    <asp:DropDownList ID = "DDLEdit1" DataSourceID = "ManagerEntitySource" runat="server"
                           DataTextField = "Option_Value" DataValueField = "Option_Value"
                           SelectedValue = '<%#Bind("Manager") %>'  
                           AppendDataBoundItems="true">
                    </asp:DropDownList> 
                </td>
                <br />
            </tr>
            <tr>
                <th>Location: 
                </th>
                <td>
                    <asp:DropDownList ID="DDLEdit2" DataSourceID = "LocationEntitySource" runat="server"
                           DataTextField = "Option_Value" DataValueField = "Option_Value"
                           SelectedValue='<%#Bind("Building") %>' 
                           AppendDataBoundItems="true">
                    </asp:DropDownList>
                </td>
                <br />
        </table>
        <asp:Button ID="Button2" Text="Submit Changes" runat="server" CommandName="Update" />
            <!--<asp:LinkButton ID = "LB1" Text="Update" CommandName="Update" runat="server" /> -->
    </EditItemTemplate>       
</asp:FormView> 
```

这也有效。您可以从`FormView`我指定的`OnItemUpdating`和的属性中看到`OnItemUpdated`。

这里是`OnItemUpdating`：

```
protected void FormView1_ItemUpdating(object source, FormViewUpdateEventArgs e)
{
   DebugBox.Text = FormView1.DataKey.Value.ToString();
   DataAccessLayer.SafetyEntities se = new DataAccessLayer.SafetyEntities();
   var key = Convert.ToInt32(FormView1.DataKey.Value.ToString());
   DataAccessLayer.Employee employeeToUpdate = se.Employees.Where(emp => emp.EID == key).First();
   employeeToUpdate.Name = e.NewValues["Name"].ToString();
   employeeToUpdate.Manager = e.NewValues["Manager"].ToString();
   employeeToUpdate.Building = e.NewValues["Building"].ToString();
   se.SaveChanges();
   GridView1.DataBind();

} 
```

这也很好。这些项目正在适当地更新并且`GridView`令人耳目一新。

这里是`OnItemUpdated`：

```
protected void BLAH(object source, FormViewUpdatedEventArgs e)
{
    DebugBox2.Text = "BLAH!!!!";
} 
```

这就是问题所在。这永远不会被调用！我是否在某个地方错过了让此事件触发的步骤？我以为我明白该按钮会调用 Command="Update"，它会触发 ItemUpdating，然后触发 ItemUpdated。它肯定在调用 ItemUpdating，但仅此而已。我需要额外的东西来触发 ItemUpdated 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T18:16:23.880

**结论：**

查看`FormView`该类的源代码，似乎`ItemUpdated`在使用 DataBinding 时未触发该事件。

仅当您设置、或的属性时`ItemUpdated`才会触发该事件。`SelectMethod``UpdateMethod``DeleteMethod``InsertMethod``FormView`

**证据**

当您在`FormView`其“UpdateItem”方法中更新一个项目时，该方法会在内部调用`HandleUpdate`.

```
public virtual void UpdateItem(bool causesValidation)
    {
      this.ResetModelValidationGroup(causesValidation, string.Empty);
      this.HandleUpdate(string.Empty, causesValidation);
    }

private void HandleUpdate(string commandArg, bool causesValidation)
    {
       // Lots of work is done here
    } 
```

在方法的底部，触发`HandleUpdate`了事件：`OnItemUpdating`

```
this.OnItemUpdating(e); 
```

然后是一段相当奇怪的代码：

```
if (e.Cancel || !bindingAutomatic)
          return; 
```

依次调用`Update`.`dataSourceView`

```
dataSourceView.Update((IDictionary) e.Keys, (IDictionary) e.NewValues, 
(IDictionary) e.OldValues, 
new DataSourceViewOperationCallback(this.HandleUpdateCallback)); 
```

我们可以看到 Update 方法的最后一个参数接受了一个回调，在这种情况下是`HandleUpdateCallback`. `HandleUpdateCallback`是我们的`OnItemUpdated`事件最终被触发的地方。

```
private bool HandleUpdateCallback(int affectedRows, Exception ex)
    {
      FormViewUpdatedEventArgs e1 = new FormViewUpdatedEventArgs(
                                                       affectedRows, ex);
      e1.SetOldValues(this._updateOldValues);
      e1.SetNewValues(this._updateNewValues);
      e1.SetKeys(this._updateKeys);
      this.OnItemUpdated(e1);
      // A lot of other stuff goes on here
     } 
```

所以，这就是我们最终如何到达`OnItemUpdated`正在执行的方法的地图，但为什么在我们的案例中它没有被执行？

让我们跳过一点，但回到`HandleUpdate`我之前提到的方法的“好奇”部分：

```
if (e.Cancel || !bindingAutomatic)
          return; 
```

这里发生了什么？我们并没有取消我们的活动，但是那里`!bindingAutomatic`发生了什么？

该值在方法中进一步设置`HandleUpdate`：

`bool bindingAutomatic = this.IsDataBindingAutomatic;`

这个属性 ,`IsDataBindingAutomatic`是`BaseDataBound`类的一个内部属性（一个基类，比我们的`FormView`类更上一层）：

```
 protected internal bool IsDataBindingAutomatic
    {
      get
      {
        if (!this.IsBoundUsingDataSourceID)
          return this.IsUsingModelBinders;
        else
          return true;
      }
    } 
```

由于我们没有使用 a`DataSourceID`我们最终返回`IsUsingModelBinders`. 这是一个`BaseDataBoundControl`在类中被覆盖的虚拟属性`CompositeDataBoundControl`，类是我们`FormView`直接继承的基类。

现在我们来看看直接决定我们的`OnItemUpdating`方法是否会被触发的代码：

```
protected override bool IsUsingModelBinders
    {
      get
      {
        if (string.IsNullOrEmpty(this.SelectMethod) 
            && string.IsNullOrEmpty(this.UpdateMethod) 
            && string.IsNullOrEmpty(this.DeleteMethod))
          return !string.IsNullOrEmpty(this.InsertMethod);
        else
          return true;
      }
    } 
```

这基本上是说如果我们设置了 SelectMethod、UpdateMethod 或 DeleteMethod（这些是 FormView 上的字符串属性），则返回 true，否则告诉我们是否设置了 InsertMethod。在我们的例子中，我们没有设置任何这些属性，所以我们得到一个返回值`false`.

因为这是错误的，我们之前两次奇怪的代码只是简单地返回并且永远不会到达触发 ItemUpdated 事件的代码部分。

# javascript - 如何在 RegEx 中检查波斯尼亚特定字符？

> ID：15981602
> 
> 赞同：4
> 
> 时间：2013-04-12T22:05:36.183
> 
> 标签：javascript, regex, special-characters

我有这个正则表达式模式，它非常简单，它验证提供的字符串是否为“alpha”（大写和小写）：

```
var pattern = /^[a-zA-Z]+$/gi; 
```

当我触发`pattern.test('Zlatan Omerovic')`它返回时`true`，但是如果我：

```
pattern.test('Zlatan Omerović'); 
```

它返回`false`并且未通过我的验证。

在波斯尼亚语中，我们有这些特定的字符：

```
š đ č ć ž 
```

并大写：

```
Š Đ Č Ć Ž 
```

* * *

**是否可以使用 JavaScript 正则表达式验证这些字符（两种情况）？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T22:07:58.270

当然，您可以将这些字符添加到您匹配的字符列表中。此外，由于您正在进行不区分大小写的匹配（`i`标志），因此您不需要大写字符。

```
var pattern = /^[a-zšđčćž ]+$/gi; 
```

在这里小提琴：http: [//jsfiddle.net/ryanbrill/KB74b/](http://jsfiddle.net/ryanbrill/KB74b/)

这是另一种模式，它使用 unicode 表示，这可能会更好（例如，如果文件未使用正确的编码保存，则嵌入字符将不起作用）

```
var pattern = /^[a-z\u0161\u0111\u010D\u0107\u017E ]+$/gi; 
```

[http://jsfiddle.net/ryanbrill/KB74b/2/](http://jsfiddle.net/ryanbrill/KB74b/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:09:04.887

`a-zA-Z`就是这个意思，并且以英语为中心的方式：`abcdefghijklmnopqrstuvwxyz`. 遗憾的是，使用 JavaScript 的正则表达式，如果您想测试其他字母字符，您必须专门指定它们。JavaScript 没有对语言环境敏感的“alpha”定义。要包含非英文字母字符，您必须故意包含它们。您可以直接执行此操作（例如，通过包含`š`在正则表达式中），也可以使用 Unicode 转义序列（例如`\u0161`）。如果所讨论的其他波斯尼亚字母字符具有连续的范围，您也可以对它们使用该符号，但它必须与用英文术语定义的`-`分开。`a-z`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T22:15:47.023

为了在测试结果中包含你的五个中的第一个（基于 S）符号，我做了：

```
var pattern = /^[a-zA-Z\u0160-\u0161]+$/g; 
```

尝试以这种方式添加您需要的所有符号；）

# python - Python - 在创建期间生成自定义文件名

> ID：15981603
> 
> 赞同：1
> 
> 时间：2013-04-12T22:05:37.720
> 
> 标签：python

所以我有一个脚本，它生成为字典中每个键命名的文件。（下面的脚本）

```
 for key, values in sequencelist.items():
     with open(key, 'w') as out:
         for value in values:
             out.write('\n'.join(value.split()) + '\n') 
```

有人可以帮我修改上述语法以做更多事情吗？我想在文件名上附加一些纯文本，并添加当前的`len(dict.keys())`使用`range()` 参见下面的脚本，这不起作用！:)

```
for key, values in sequencelist.items():
    for i in range(len(sequencelist.keys())):
        j = i+1
        with open('OTU(%j)' +'_' + key +'.txt' %j, 'w') as out:
            for value in values:
                out.write('\n'.join(value.split()) + '\n') 
```

所以这个创建的第一个文件是 OTU(1)_ `key`.txt

我确信这`with open()`条线是 100% 错误的。

有人还可以链接我的东西来阅读在工作之前从行`%j`中调用变量的使用吗？`j`我试图使用来自这个溢出答案的代码（[输入一个文本文件并在 Python 中编写多个输出文件](https://stackoverflow.com/questions/9542114/input-a-text-file-and-write-multiple-output-files-in-python)），没有任何解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:09:14.133

尝试以下

```
for count, (key, values) in enumerate(sequencelist.items()):
    with open('OTU(%d)_%s.txt' % (count+1, str(key)), 'w') as out:
        for value in values:
            out.write('\n'.join(value.split()) + '\n') 
```

我用你的值迭代交换了你的公开调用的顺序，这样你就不会得到`len(sequencelist)`每个值的文件。在此更改之后，您的论点似乎`j`不需要。每次循环重复时， enumerate 调用都会使 for 循环的计数部分增加（不必称为计数）。

`%d`要求一个整数，一个字符串，这`%s`取决于键名将与`str()`. 如果您的密钥是一些自定义类，您需要将其转换为更好的字符串格式，因为您会得到类似`<class __main__.Test at 0x00000....>`.

# java - 无法从 JDialog 禁用框架按钮

> ID：15981607
> 
> 赞同：0
> 
> 时间：2013-04-12T22:05:57.057
> 
> 标签：java, swing, dialog, jframe, jdialog

我想从 JDialog 禁用框架上的按钮，***我尝试了所有方法，但它不起作用。***程序的执行从一帧开始，当点击按钮时弹出对话框。很简单，当您单击对话框上的按钮时，框架的按钮应该被禁用并且对话框将关闭。

顺便说一句：一切正常，它只是没有被禁用的框架按钮！ ![这是它的样子](https://i.stack.imgur.com/A8Ph1.png)

PS：我在 NetBeans 上对此进行编码，因此为了简单起见，我删除了不必要的编码。

这是框架的编码：

```
public class Frame extends javax.swing.JFrame {

Dialog D = new Dialog(this, true);

public Frame(){
    setTitle("Frame");
    initComponents();
    setResizable(false);
}

void buttonDisable(){
    Btn1.setEnabled(false);
}

private void Btn1ActionPerformed(java.awt.event.ActionEvent evt) {                                     
    D.setVisible(true);
}                                    

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new Frame().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
public javax.swing.JButton Btn1;
// End of variables declaration                   
} 
```

这是 JDialog Box 的编码：

```
public class Dialog extends javax.swing.JDialog {

public Dialog(java.awt.Frame parent, boolean modal) {
    super(parent, modal);
    initComponents();
    setTitle("Dialog");
}                      

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    new Frame().buttonDisable(); 
    dispose();
}                                        

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            Dialog dialog = new Dialog(new javax.swing.JFrame(), true);
            dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                @Override
                public void windowClosing(java.awt.event.WindowEvent e) {
                    System.exit(0);
                }
            });
            dialog.setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
// End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:11:46.350

我还没有通过 IDE 运行它。但我相当有信心在 new Frame() 上调用 buttonDisable() 而不是在实际的父框架上调用它是你的问题。您需要将“父级”保存在对话框中，以便以后可以访问它并在对话框中执行类似的操作。

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    parentFrame.buttonDisable(); 
    dispose();
} 
```

因此，您的完整代码将如下所示：

```
public class Frame extends javax.swing.JFrame {

Dialog d = new Dialog(this, true);

public Frame(){
    setTitle("Frame");
    initComponents();
    setResizable(false);
}

void buttonDisable(){
    Btn1.setEnabled(false);
}

private void Btn1ActionPerformed(java.awt.event.ActionEvent evt) {                                     
    d.setVisible(true);
}                                    

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new Frame().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
public javax.swing.JButton Btn1;
// End of variables declaration                   
} 
```

对话框看起来像这样

```
public class Dialog extends javax.swing.JDialog {

private Frame parentFrame;
public Dialog(Frame parent, boolean modal) {
    super(parent, modal);
    initComponents();
    setTitle("Dialog");

    this.parentFrame=parent;//hold reference to the parent

    this.setVisible(true);
}                      

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    this.parentFrame.buttonDisable();//invoke method on the parent reference 
    dispose();
}                                        

// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
// End of variables declaration                   
} 
```

# android - Android Mapview显示没有任何地图的白色瓷砖

> ID：15981608
> 
> 赞同：0
> 
> 时间：2013-04-12T22:06:02.530
> 
> 标签：android, google-maps, google-maps-api-3, android-widget

我为我`MD5`的. 然后我去 google 找了一个. 因为我还没有在谷歌看到任何地方可以使用. 即使我设置并定义我的布局如下，谷歌地图在我的活动中也看不到`SHA` `fingerprint``android application``map api for android with SHA``MD5``INTERNET permission``manifest file`

```
<com.google.android.maps.MapView
android:id="@+id/mapview1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:enabled="true"
android:clickable="true"
android:apiKey="AIzaSyCfaFYAg1ql6hHN..." 
```

此外，我在一篇文章中看到，如果我获得带有 SHA 指纹的 api 密钥，它将无法工作。但谷歌只要求 SHA 作为 api 密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:07:29.037

如果地图没有显示，那么它与你的钥匙有关。您需要 2 个不同的密钥，一个用于调试，一个用于发布到市场

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T10:45:26.470

让我回答我希望从 SO 社会获得解决方案的问题。

1.  确保您已安装 Google Play 服务

2.  然后将`google-play-services_lib`from `C:\Program Files\adt-bundle-windows-x86_64-20130219\sdk\extras\google\google_play_services\libproject\google-play-services_lib` as`Android Project From Existing Code`放入您的工作区

3.  将此添加到您的项目`Library`中 (Project->Properties->Android->Library->Add)

4.  然后你需要在你的应用程序中使用谷歌地图来完成从谷歌获取密钥。[只需遵循https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key)底部的说明`Creating an API Project`即可

5.  就这样。玩得开心

# jquery - 在 ajaxStart/Complete 上尝试阻止（和解除阻止）时出错

> ID：15981614
> 
> 赞同：1
> 
> 时间：2013-04-12T22:06:35.500
> 
> 标签：jquery, ajax, jquery-blockui

这是我的第一个项目，当应用程序访问服务器以获取信息时，我试图让 blockui 触发。我查找了一些示例，并认为我在下面的尝试会奏效，但我错了。

```
 $(document).ajaxStart(function(){
        $.blockUI({
            css: {
                border: 'none',
                padding: '15px',
                backgroundColor: '#000',
                '-webkit-border-radius': '10px',
                '-moz-border-radius': '10px',
                opacity: .5,
                color: '#fff'
            }
        });

        $(document).ajaxComplete(function(){
            $.unblockUI()
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:09:45.587

如果这是您的完整代码，那么您忘记了`});`处理程序的一个`$(document).ajaxStart(function(){`：

```
$(document).ajaxStart(function(){
    $.blockUI({
        css: {
            border: 'none',
            padding: '15px',
            backgroundColor: '#000',
            '-webkit-border-radius': '10px',
            '-moz-border-radius': '10px',
            opacity: .5,
            color: '#fff'
        }
    });
});   // <----- HERE

$(document).ajaxComplete(function(){
    $.unblockUI()
}); 
```

# php - 使用字符串常量作为 mysql 查询（使用一些类固醇）

> ID：15981615
> 
> 赞同：1
> 
> 时间：2013-04-12T22:06:40.633
> 
> 标签：php, parameters, constants

那么 PHP 大师面临一个挑战：

我正在开发一个应用程序，它使用大量分布在大量文件和函数中的 MySql 查询。显然，这些查询使用从包含它们的函数派生的一些参数。

我的目标是：将所有这些查询分组到一个常量文件中，但保持功能。有一个例子：

这是一个示例函数：

```
public function doQuery ($aParameter) {
    .
    .
    .
    $sqlQuery = mysql_query("SELECT * FROM Table WHERE id = '".$aParameter."'");
    .
    .
    .
} 
```

这就是我想要做的，使用常量：

```
public function doQuery ($aParameter) {
    .
    .
    .
    $sqlQuery = mysql_query(THE_QUERY);
    .
    .
    .
} 
```

如您所见，问题是如果我使用定义的常量作为查询，它会丢失我需要用来从数据库中获取正确数据的参数。

所以最后一个问题是：有一种方法可以定义一个常量而不是包含一个在使用常量时要确定的变量？就像是：

```
define("THE_QUERY",     "SELECT * FROM Table WHERE id = '".$aParameter."'"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:09:54.463

是的，使用参数化查询：

```
define("Q_QUERY1", "SELECT * FROM Table WHERE id = :1"); 
$cn = new PDO();
/* more code ... */
$arr = array();
$arr[":1"] = $parameterValue;

$s = $cn->prepare(Q_QUERY1);
$s->execute($arr); 
```

主要思想是使用常量甚至文件来存储查询（例如，您可以对 sqlserver 进行查询，对`:1`mysql `:PARAM1`...您必须在关联数组中匹配，例如`$arr[":1"]`在这种情况下。

该`->execute`方法将为您将参数与值匹配，保护您的查询免受 sql 注入，并在必要时在参数周围添加引号。

如果您需要特定的数据类型，则需要使用该`->bindParam`方法来指定`PDO::PARAM_XXX`您选择的参数。如果您需要更多详细信息，php 文档非常有用：http: [//php.net/manual/en/pdo.constants.php](http://php.net/manual/en/pdo.constants.php)

# yii - Yii - Cactiveform、cform、表单生成器 - 混淆

> ID：15981621
> 
> 赞同：4
> 
> 时间：2013-04-12T22:07:13.797
> 
> 标签：yii, yii-cformmodel, yii-cform

这是 Yii 上的三个概念，我真的不明白我们应该在什么场景下使用什么？

谁能解释一下那些 Yii 元素，我们应该在什么情况下使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:14:32.000

在[CForm](http://www.yiiframework.com/doc/api/1.1/CForm)的文档中，可以阅读以下内容：

> ...我们可以将表单分为两部分：指定每个单独的表单输入的部分，以及装饰表单输入的部分。一个 CForm 对象代表前一部分...

...并`CActiveForm`代表后者。

换句话说，`CForm`指定表单的元素，但`CActiveForm`（作为一个小部件）呈现它。

查看源代码，我们声明它`CForm`也可以[render()](http://www.yiiframework.com/doc/api/1.1/CForm#render-detail)本身，它的渲染依赖于`CActiveForm`小部件并通过引入其配置属性[activeForm](http://www.yiiframework.com/doc/api/1.1/CForm#activeForm-detail)被小部件包装，尽管渲染输入元素和按钮是通过其自己的方法[renderElements()](http://www.yiiframework.com/doc/api/1.1/CForm#renderElements-detail)和[renderButtons()](http://www.yiiframework.com/doc/api/1.1/CForm#renderButtons-detail)实现的相对地。默认情况下，它们的实现依赖于使用[CHtml](http://www.yiiframework.com/doc/api/1.1/CHtml)`CActiveForm`的静态方法的类，这与渲染方法的作用完全相同（或几乎完全相同） 。当然，可以通过扩展类来覆盖默认行为。

这就是为什么使用哪种技术的品味问题：通过调用实例或类的方便（必需）方法在单独的配置文件中声明表单的输入规范，`CActiveForm`单独组合表单字段和按钮的声明及其在视图文件中的表示的小部件并通过指向适当的活动表单小部件和/或通过覆盖默认呈现方法来自定义其呈现。后一种技术允许在多个操作中轻松重用表单，并且仅[使用表单构建器](http://www.yiiframework.com/doc/guide/1.1/en/form.builder)。`CActiveForm``CForm`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T07:55:11.617

[在此处](http://www.essential-strategy.com/activeform)查看ActiveForm、CForm 等的实时示例。您还可以查看实时模型、视图和控制器文件。

# html - 将子元素停靠在父元素的各个角落

> ID：15981622
> 
> 赞同：0
> 
> 时间：2013-04-12T22:07:14.390
> 
> 标签：html, css, layout

我有以下 html5 正文：

```
<body>
    <div id="container">
        <div class="content" id="topleft">topleft</div>
        <div class="content" id="topcenter">topcenter</div>
        <div class="content" id="topright">topright</div>
        <div class="content" id="centerleft">centerleft</div>
        <div class="content" id="centercenter">centercenter</div>
        <div class="content" id="centerright">centerright</div>
        <div class="content" id="bottomleft">bottomleft</div>
        <div class="content" id="bottomcenter">bottomcenter</div>
        <div class="content" id="bottomright">bottomright</div>
    </div>
</body> 
```

我想实现一个看起来像这样的动态布局：

![块元素对齐](https://i.stack.imgur.com/w6E5t.jpg)

每个内容元素都应相对于其父容器布置（停靠）在角落中，并且所有中心元素应在各自的侧面居中。父容器的大小或位置无关紧要，因此我不能使用绝对像素坐标进行定位。

这是我到目前为止所拥有的：

```
div#container {
    background: lightblue;
    position: relative;
    width: 500px;
    height: 500px;
}

div.content
{
    width: 100px;
    height: 100px;
    position: absolute;
    background: lightyellow;
    text-align: center;
    margin: auto;
}

div#topleft {
}

div#topcenter {
    right: 50%; /*obviously doesn't center*/
}

div#topright {
    right: 0px; 
}

div#centerleft {
    top: 50%; /*obviously doesn't center*/
    left: 0px;
}

div#centercenter {
    top: 50%; /*obviously doesn't center*/
    right: 50%; /*obviously doesn't center*/
}

div#centerright {
    right: 0px;
    top: 50%; /*obviously doesn't center*/
}

div#bottomleft {
    bottom: 0px;
}

div#bottomcenter {
    bottom: 0px;
    right: 50%; /*obviously doesn't center*/
}

div#bottomright {
    right: 0px;
    bottom: 0px;
} 
```

这一切都适用于角落，但当然所有中心元素都没有居中对齐，我明白为什么。我只是不知道，这是如何在 CSS3 中完成的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:11:42.310

要在其父元素中垂直居中固定高度元素，请使用：

```
top:50%;
margin-top:-50px; 
```

对于水平，您可以对 left 和 margin-left 执行相同的操作，或者只是不定义任何内容并使用“margin：0 auto”，因为它会自动将它们左右相等地填充。

# ios - 在 iOS 上创建具有多个文本字段和图像的 PDF

> ID：15981623
> 
> 赞同：2
> 
> 时间：2013-04-12T22:07:15.400
> 
> 标签：ios, xcode, pdf, uiimageview

我正在研究构建一个简单的 PDF 生成器。用户将有几个文本字段和几个图像字段来输入信息，这些信息将出现在 PDF 的特定位置。我知道如何将应用程序中已有的图像添加到 PDF，但不知道如何在一个视图上从相机胶卷中选择的图像在下一个视图的 PDF 中。建议？

# php - PHP - 使用flock函数的计数器问题

> ID：15981624
> 
> 赞同：1
> 
> 时间：2013-04-12T22:07:22.953
> 
> 标签：php, counter, flock

我正在尝试使用 flock() 函数阻止文件以避免覆盖错误，但计数器经常重置（可能是因为读取问题）。

numeri.txt（计数器）

```
4895|533753 
```

frame.php（PHP 文件）

```
$filename="numeri.txt";
$contents=file_get_contents($filename);
if(($fp=@fopen($filename,'w'))!==false)
{
    if(flock($fp,LOCK_EX))
    {
        $contents=explode("|",$contents);
        $clicks=$contents[0];
        $impressions=$contents[1]+1;
        fwrite($fp,$clicks."|".$impressions);
        flock($fp,LOCK_UN);
    }
    fclose($fp);
} 
```

有时计数器返回“|1”而不是“4895|533754”。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:00:58.093

如果两个线程几乎同时执行你的代码，延迟很小，第一个线程将打开文件进行写入并在锁定之前擦除它的内容。

第二个线程将读取空文件内容，等待锁释放，然后覆盖正确的数据。

解决方案是不以“w”打开文件，而是以“a”或“c”模式打开文件，然后使用 fwrite、fseek 和 ftruncate。

# c++ - 从 C 访问 C++ 模板

> ID：15981631
> 
> 赞同：2
> 
> 时间：2013-04-12T22:07:50.850
> 
> 标签：c++, c, templates

我正在使用 OpenCV 进行一些图像处理，它有几个必须指定数据类型才能正确执行的函数。我的想法是对这些函数进行模板化，这样我就不必为每种可能的数据类型编写单独的函数。

但是，我希望我正在编写的代码与我拥有的一些将图像存储在内存中的现有 C 代码兼容，这样我就可以更轻松地传递它，而无需不断地将图像写入磁盘。

我遇到的问题是如何让我的 .h 文件和库让 C 程序调用 C++ 模板函数。我还没有机会尝试它，但到目前为止，我所拥有的看起来如下：

foo.h

```
int foo(int a, int, b);
float foo(float a, float b); 
```

富.c：

```
int foo(int a, int b) {
    return footemp(a, b);
}
float foo(float a, float b) {
   return footemp(a, b);
} 
```

foo.hpp：

```
template<class t>
t footemp(t a, t b) {
   return a + b;
} 
```

这不起作用，因为它需要我的 .c 文件来了解模板文件。所以我愿意接受建议。预先感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T22:17:29.287

这是可能的，但要小心。使用 C++ 源文件`foo.cpp`：

```
#include "foo.h"
#include "footemp.hpp"

int foo_int(int a, int b) {
    return footemp(a, b);
}

float foo_float(float a, float b) {
   return footemp(a, b);
} 
```

在`foo.h`中，用于`extern "C"`进行与 C 兼容的声明，并使用`#ifdef`允许作为C*或*C++ 使用：

```
#ifdef __cplusplus
extern "C" {
#endif

int foo_int(int a, int, b);
float foo_float(float a, float b);

#ifdef __cplusplus
}
#endif 
```

将其编译为 C++ 库 - 静态或动态，没关系。在您的 C 源代码中，您现在可以`#include "foo.h"`按照您的预期使用这些函数，只要您链接到库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:19:20.950

正如 mday299 所提到的，C 中没有模板。但是，如果您的 C 代码包含在单独的编译单元 (.exe/.dll) 中，您可以为您的模板函数提供 C 接口，就像您所做的那样：

foo.h

```
/* C interface */

    int fooInt(int a, int, b);
    float fooFloat(float a, float b); 
```

foo.hpp

```
template <class T> foo(T a,T b)
{
return a+b;
} 
```

foo.cpp：

```
#include "foo.h"
#include "foo.hpp"
int fooInt(int a, int b) {
    return foo<int>(a, b);
}
float fooFloat(float a, float b) {
   return foo<float>(a, b);
} 
```

然后，项目将使用 c++ 单独编译，c 部分将只看到 foo.h 和 lib/dll 文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T22:10:46.793

C 中没有模板。这是 C++ 功能。对不起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T22:15:36.313

您很有可能能够使用 C++ 编译器编译您的 C 文件。因此，您可以使用 C++ 编译器构建整个项目，包括 C 和 C++ 源代码。

您已经使用 C++ 编译器对其进行了编译，否则您将无法编译重载的 foo 函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T22:15:44.967

我想你可以做的一件事是用 C++ 编写函数，声明你想要的特化，同时定义`extern "C"`将调用转发到模板函数的函数。

请记住，如果您将 C 用于其他内容，则需要将函数命名为不同的名称；C 不做函数重载。

# c - 当阻塞 `recv()` 或 `recvfrom()` 在 tcp 的情况下返回

> ID：15981632
> 
> 赞同：0
> 
> 时间：2013-04-12T22:07:57.577
> 
> 标签：c, tcp, network-programming

当阻塞样式`recv()`或被`recvfrom()`使用时，如下

```
 while(1){
     recv(sock_fd, buf, n, 0);    // when it returns and continue to execute the next line
     do_something();
     .....
   } 
```

如果是 UDP，`recv()`如果它得到一个 UDP 数据包将返回。

但是对于 TCP，由于是字节流，似乎没有什么规则`recv()`应该返回。谁能解释一下？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:15:34.247

对于流套接字，`recv()`一旦有任何数据可供传递，就会立即返回。`read()`它与（在非套接字文件描述符上）的规则相同。这意味着您可能只收到一个字节。当`recv()`（或`recvmsg()`或`recvfrom()`或`read()`）返回时，您将获得所有恰好可用且适合您的缓冲区的数据，因此您实际上很可能一次获得超过一个字节的数据，除非另一端仅发送一个字节，然后等待。

# sql-server - SQL Server：XPATH 查询失败

> ID：15981636
> 
> 赞同：5
> 
> 时间：2013-04-12T22:08:18.407
> 
> 标签：sql-server, xml, xpath

我在 SQL Server Management Studio 中处理存储过程。我尝试使用 XPATH 访问包含 XML 的列，但出现此错误：

> 不允许使用内部子集 DTD 解析 XML。使用带有样式选项 2 的 CONVERT 来启用有限的内部子集 DTD 支持`

我阅读了有关转换和导入 xml 的文档，但没有运气。

需要明确的是，我将 XML 存储在表的列中，现在想在存储过程中将其查询到内存后使用 xpath 访问它。有谁知道我应该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T22:35:18.113

您最有可能得到这个，因为在您的 XML 内部的某个地方您正在使用这样的文档定义：（[MSDN](https://docs.microsoft.com/en-us/sql/relational-databases/import-export/examples-of-bulk-import-and-export-of-xml-documents-sql-server)的 DTD 示例）

```
<!DOCTYPE DOC [<!ATTLIST elem1 attr1 CDATA "defVal1">]><elem1>January</elem1> 
```

Microsoft 默认阻止此操作，因为它会造成潜在的安全漏洞。convert with style option 2 消息告诉您可以启用对 DTD 的部分支持，以便通过使用与 XML 相关的[CONVERT 函数来处理此 XML](https://docs.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql)。

我没有这样做的个人经验，所以我只能提供 MSDN 的链接。

唯一的其他选项是在 Microsoft 不推荐的服务器上启用完整的 DTD 支持。

# python - Flask：如何处理应用程序/八位字节流

> ID：15981637
> 
> 赞同：12
> 
> 时间：2013-04-12T22:08:22.967
> 
> 标签：python, flask

我想制作一个多文件上传表单。我使用[jQuery File Uploader](http://blueimp.github.io/jQuery-File-Upload/)。我的服务器端代码：

```
@app.route("/new/photogallery",methods=["POST"])
def newPhotoGallery():
    print request.files 
```

我尝试了两件事：

1.  正常提交表格：

    当我正常提交表单时，它会打印：

    `ImmutableMultiDict([('post_photo_gallery', FileStorage: u'' ('application/octet-stream'))])`

2.  使用 AJAX 提交表单：

    当我使用 AJAX 提交表单时，它会打印：

    `ImmutableMultiDict([])`

我的第一个问题是：为什么 AJAX 请求和普通请求有区别。
我的第二个问题是：我如何处理这个`application/octet-stream`请求`Flask/Python` 我的第三个问题是：这是一种使用的好方法`application/octet-stream`吗？

顺便说一句，我不太了解`application/octet-stream`。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T10:17:08.187

我无法使用`application/octet-stream`类型帖子获得请求，但`multipart/form-data`过去曾使用类型表单使用烧瓶上传图像。

我已经扩展了我过去所做的工作以支持多个上传文件，这已经利用了 werkzeug 的`FileStorage`对象。

这里的关键是设置一个基于帖子的路由，该路由从表单中查找请求元素。这应该允许您通过标准表单或 AJAX 调用 POST 到路由。

下面是一个使用表单的简化示例：

**视图模板：**

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>jQuery File Upload Example</title>
</head>
<body>
{% if err %}
    <h4>{{ err }}</h4>
{% endif %}

<form action="/" method=POST enctype=multipart/form-data id="fileupload">
    <input type="file" name="files" data-url="/" multiple>
    <input type=submit value=Post>
</form>

{% if files %}
{% for file in files %}
<p>Uploaded: <b>{{ file }}</b> </p>
{% endfor %}
{% endif %}
</body> 
</html> 
```

**烧瓶应用**

```
from flask import Flask, request, render_template
from werkzeug import secure_filename, FileStorage
import os

# Flask functions
app = Flask(__name__) 
app.config.from_object(__name__)
DEBUG = True 
# add this so that flask doesn't swallow error messages
app.config['PROPAGATE_EXCEPTIONS'] = True

@app.route('/', methods=['GET', 'POST'])
def uploader():
    if request.method =='POST' and request.files.getlist('files'):
        up_file_list = []

        # Iterate the through a list of files from the form input field
        for a_file in request.files.getlist('files'):
            if a_file.filename:
                # Validate that what we have been supplied with is infact a file
                if not isinstance(a_file, FileStorage):
                    raise TypeError("storage must be a werkzeug.FileStorage")
                # Sanitise the filename
                a_file_name = secure_filename(a_file.filename)
                # Build target
                a_file_target = os.path.join('/tmp/', a_file_name)
                # Save file 
                a_file.save(a_file_target)
                up_file_list.append(a_file_name)
        # Return template
        if up_file_list:
            return render_template('uploader.html', err=None, files=up_file_list)
        else:
            return render_template('uploader.html', err='No Files Uploaded', files=None)
    else:
        return render_template('uploader.html', err=None, files=None) 

# application execution 
if __name__ == '__main__': 
    app.run() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-13T06:10:20.560

无论数据编码如何，您都应该能够使用`request.data`. 在 的情况下`application/octet-stream`，您可以只写入`request.data`二进制文件。

[各种数据类型的示例处理程序](http://blog.luisrei.com/articles/flaskrest.html)：

```
from flask import json

@app.route('/messages', methods = ['POST'])
def api_message():

    if request.headers['Content-Type'] == 'text/plain':
        return "Text Message: " + request.data

    elif request.headers['Content-Type'] == 'application/json':
        return "JSON Message: " + json.dumps(request.json)

    elif request.headers['Content-Type'] == 'application/octet-stream':
        with open('/tmp/binary', 'wb') as f:
            f.write(request.data)
            f.close()
        return "Binary message written!"

    else:
        return "415 Unsupported Media Type ;)" 
```

处理表单数据的典型场景已[在此处](http://flask.pocoo.org/docs/0.12/patterns/fileuploads/)记录。

# php - 两个捆绑关系中的Symfony2“链中找不到类”

> ID：15981639
> 
> 赞同：5
> 
> 时间：2013-04-12T22:08:39.577
> 
> 标签：php, symfony, doctrine-orm

在尝试定义捆绑包之间的一对多关系时，会发生以下情况：

> 在链配置的命名空间 Mana\SplitBundle\Entity 中找不到类“Mana\ClientBundle\Entity\Member”

### 更新 3：

我现在看到了相互矛盾的答案，即这种关系可以实现也不能实现。假设它可以（因为 stackoverflow 的其他人似乎已经这样做了），除了在 AppKernel.php 中注册捆绑包并在实体中输入注释之外，还需要什么配置？`resolve_target_entity_listener`似乎没有什么不同。

### 更新 2：

好吧，我知道我在这里超出了我的深度，但这是我在尝试显示客户端实体时单步执行代码时观察到的。

探查器中的错误消息

> 在 Mana\SplitBundle\Entity\Client#members 上指定的目标实体“Mana\ClientBundle\Entity\Member”未知或不是实体。

发生是因为 SchemaValidator 的计算`$cmf->isTransient($assoc['targetEntity'])`结果为 true，其中成员实体中的 targetEntity。PHPdoc 注释表明该实体的元数据未加载。如果我理解正确，这意味着没有加载有关关系的注释。但是观察变量值表明注释已被读取。

我是否完全错过了一些应该非常明显的东西？还是我在左场太远了？

### 更新1：

我已经确认`doctrine:mapping:info`会检测到不正确的 FQCN。数据夹具是正确的。对默认连接和拆分连接使用实体管理器和数据库连接是正确的。该错误仍然存​​在，并且可能发生在客户端实体中定义的任何关系（OneToMany 或 ManyToOne）中。

### 配置.yml：

```
doctrine:
    dbal:
        default_connection: default
        connections:
          default:
            driver:   "%database_driver%"
            host:     "%database_host%"
            port:     "%database_port%"
            dbname:   "%database_name%"
            user:     "%database_user%"
            password: "%database_password%"
            charset:  UTF8
            mapping_types: 
                enum:       string
          split:
            driver:   "%database_driver2%"
            host:     "%database_host2%"
            port:     "%database_port2%"
            dbname:   "%database_name2%"
            user:     "%database_user2%"
            password: "%database_password2%"
            charset:  UTF8
            mapping_types: 
                enum:       string
    entity_managers:
      default:
        connection: default
        mappings:
          ManaClientBundle: ~
      split:
        connection: split
        mappings:
          ManaSplitBundle: ~ 
```

### 客户实体：

```
/**
 * @ORM\OneToMany(targetEntity="Mana\ClientBundle\Entity\Member", mappedBy="client")
 * @ORM\OrderBy({"dob" = "ASC"})
 */
protected $members; 
```

### 会员单位：

```
 /**
 * @ORM\ManyToOne(targetEntity="Mana\SplitBundle\Entity\Client",inversedBy="members",cascade={"remove", "persist"})
 * @ORM\JoinColumn(name="cid", referencedColumnName="id")
 * 
 */
 protected $client; 
```

### 教义映射：

```
$ php app/console doctrine:mapping:info
Found 12 mapped entities:
[OK]   Mana\ClientBundle\Entity\Agency
[OK]   Mana\ClientBundle\Entity\Center
[OK]   Mana\ClientBundle\Entity\Contact
[OK]   Mana\ClientBundle\Entity\Contactdesc
[OK]   Mana\ClientBundle\Entity\Counties
[OK]   Mana\ClientBundle\Entity\Ethnicity
[OK]   Mana\ClientBundle\Entity\Incomehistory
[OK]   Mana\ClientBundle\Entity\Incomesrc
[OK]   Mana\ClientBundle\Entity\Member
[OK]   Mana\ClientBundle\Entity\Note
[OK]   Mana\ClientBundle\Entity\Referral
[OK]   Mana\ClientBundle\Entity\User

$ php app/console doctrine:mapping:info --em=split
Found 1 mapped entities:
[OK]   Mana\SplitBundle\Entity\Client 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:47:00.773

您应该看到[将关系与多个实体管理器一起使用](https://stackoverflow.com/questions/11463517/using-relationships-with-multiple-entity-managers)

如果您有具有单独连接和实体管理器的单独数据库，则 Doctrine 无法管理跨捆绑关系。相反，在这种情况下，客户端实体必须驻留在相同的模式/包中，并定期从外部源刷新。

但是，如果您只有一个与数据库的连接和一个实体管理器，则您可以管理跨捆绑关系。（此处描述：[跨项目实体的 OneToMany 关系（Symfony2/Doctrine）](https://stackoverflow.com/questions/11774370/onetomany-relation-on-cross-project-entities-symfony2-doctrine)）

# jquery - 为什么这个 jquery-Script 有效？（关于悬停时的下拉列表）

> ID：15981640
> 
> 赞同：0
> 
> 时间：2013-04-12T22:08:40.383
> 
> 标签：jquery, html, events, drop-down-menu, mouseleave

我试图弄清楚为什么这个 jquery 脚本工作得很好。

这是html：

```
<html>
<head>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="hover.js"></script>
</head>
<body>
        <ul id="nav">
            <li><a href="#">Parent 01</a></li>
            <li><a href="#" class="selected">Parent 02</a>
                <ul id="dropdown" style="display: none;">
                    <li><a href="#">Item 01</a></li>
                    <li><a href="#" class="selected">Item 02</a></li>
                    <li><a href="#">Item 03</a></li>
                </ul>
            </li>
            <li><a href="#">Parent 03</a>
            <ul>
                <li><a href="#">Item 04</a></li>
                <li><a href="#">Item 05</a></li>
                <li><a href="#">Item 06</a></li>
                <li><a href="#">Item 07</a></li>
            </ul>           
            </li>
            <li><a href="#">Parent 04</a></li>
         </ul>
</body>
</html> 
```

如您所见，只是一个简单的菜单。现在我使用 css 来隐藏带有 display:none; 的子菜单。

和jQuery：

```
$(document).ready(function () { 

$('#nav li').hover(
    function () {
        //show its submenu
        alert('enter');
        $('#dropdown', this).show();

    }, 
    function () {
        //hide its submenu
        alert('leave');
        $('#dropdown', this).hide();
    }
);

}); 
```

现在我没有得到的是：为什么，当我用鼠标离开“Parent 02”（悬停到子菜单项）时，它不会立即触发“mouseleave”事件，而是会等到子导航的事件被处理。我只能假设它必须处理事件队列。

现场演示： http: [//paugasolin.funpic.de/test.html](http://paugasolin.funpic.de/test.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T00:07:35.280

它不会立即关闭，因为元素是您悬停的事物的子元素。*因此，当您悬停在该区域上*时，它认为您仍悬停在该区域上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:41:32.487

为什么不使用

```
$('#nav li').hover(function() {
    //show its submenu
    alert('enter');
    $(this).children('#dropdown').show();

}); 
```

# php - $.ajax 与变量一起发送文件表单数据

> ID：15981641
> 
> 赞同：2
> 
> 时间：2013-04-12T22:08:58.710
> 
> 标签：php, javascript, jquery, ajax, file-upload

我正在尝试按照本教程中的步骤创建一个简单的 jquery 文件上传：http: [//net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)它功能齐全且非常出色。但是，我希望对用户可以上传哪些图像有更多的控制和更多的安全性，例如，我也希望能够发送一个令牌。这是我的原始代码：

```
 $('#images').change(function (evt) {
    $('#response').text("Uploading . . .");
    var amount = this.files.length;
    var reader, file;
    alert(formdata);
    for (var i = 0; i < amount; i++ ) {
        file = this.files[i];
        if (!!file.type.match(/image.*/)) {
            if ( window.FileReader ) {
                reader = new FileReader();
                reader.onloadend = function (e) { 
                    appendUploadedPic(e.target.result, file.fileName);
                };
                reader.readAsDataURL(file);
            }
            if (formdata) {
                formdata.append("images[]", file);
            }
        }   
    }

    if (formdata) {
        $.ajax({
            url: "php/upload.php",
            type: "POST",
            data: formdata,
            dataType:'json',
            processData: false,
            contentType: false,
            success: function (res) {
                $('#response').html(res['image_name']); 
            }
        });
    }
}); 
```

到目前为止，php很简单

```
foreach ($_FILES["images"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $name = $_FILES["images"]["name"][$key];
        move_uploaded_file( $_FILES["images"]["tmp_name"][$key], "../members/" . $_FILES['images']['name'][$key]);
    }
}

$respond = array("filename" => $_FILES["images"]["name"][0], "type" => "image");
echo json_encode($respond); 
```

现在我想做的是这个

```
 $.ajax({
            url: "php/upload.php",
            type: "POST",
            data: 'token=someToken&code=upload&data='+formdata,
            dataType:'json',
            processData: false,
            contentType: false,
            success: function (res) {
                $('#response').html(res); 
            }
        }); 
```

可能吗？如果是这样，我将如何从 php 中读取它？它是一个 post 方法，我通常使用 $_POST['code'] 和 $_POST'token']，但我将如何读取图像 formdata 对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T22:47:34.767

如果`formdata`是使用 创建的`FormData`，则附加如下附加字段：

```
formdata.append(name, value); 
```

因此，如果要添加令牌字段和代码字段，则为：

```
if (formdata) {
    formdata.append("images[]", file);
    formdata.append("token", "someToken");
    formdata.append("code", "someCode");
} 
```

但是，您应该知道，很多浏览器都不支持这种上传方式，即IE6-IE9，我相信它代表了大约一半的互联网用户。

我建议使用检测浏览器支持并使用最佳可用方法的插件。我正是为此目的编写了这个插件：

[https://github.com/LPology/Simple-Ajax-Uploader](https://github.com/LPology/Simple-Ajax-Uploader)

顶部有一个演示链接，供您试用。如果您决定使用它并遇到任何问题，只需 ping 我，我可以帮助您。祝你好运。

# php - MySQL 显示图像

> ID：15981649
> 
> 赞同：1
> 
> 时间：2013-04-12T22:09:28.993
> 
> 标签：php, mysql

嗨，我想知道是否有人可以帮助我，我是 MySQL 的新手。

我有两张桌子：

表一 div_attachments 字段：ID Fkey Images Time

表二：div_submissions 字段：ID Name Phone Email

我在 Joomla 中使用 php 页面来显示数据。我想在使用表 div_submissions 的提交页面上显示来自 div_attachments 的图像。

*我认为它类似于：* SELECT * FROM $div_attachments AND $div_submissions WHERE FKEY==ID

有人可以帮忙整理一下我需要在提交中显示图像的查询吗？

谢谢。

这是我尝试过的

```
$data = array();
foreach(explode(',',$item->attachments) as $value):
$db = JFactory::getDbo();
$query= $db->getQuery(true);
$query
  >select('image')
  >from('`#__div_attachments`')-
  >where('fkey = ' .$value);
$db->setQuery($query);
$results = $db->loadObjectList();
if(count($results)){
$data[] = $results[0]->image;
}
endforeach;
echo implode(',',$data); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:19:10.747

“我想在使用表 div_submissions 的提交页面上显示来自 div_attachments 的图像。”

您是否尝试过按 id 从 div_attachments 中选择图像？

# java - 当我尝试将 ActionListener 添加到按钮时，我不能，

> ID：15981655
> 
> 赞同：0
> 
> 时间：2013-04-12T22:09:48.183
> 
> 标签：java, swing, jbutton, actionlistener

当我尝试运行此代码时，我收到此错误：

```
Multiple markers at this line
    - Line breakpoint:CastleDefenders [line: 45] - CastleDefenders()
    - The method addActionListener(ActionListener) in the type AbstractButton is not applicable 
     for the arguments (CastleDefenders) 
```

代码：

```
public CastleDefenders(){
    button = new JButton("Go!");
    lvl1.setToolTipText("Play the game on Easy");
    lvl2.setToolTipText("Play the game on Normal");
    lvl3.setToolTipText("Play the game on Hard");
    lvl1.setActionCommand("Easy");
    lvl2.setActionCommand("Normal");
    lvl3.setActionCommand("Hard");
    lvls.add(lvl1);
    lvls.add(lvl2);
    lvls.add(lvl3);
    pnl2.add(lvl1);
    pnl2.add(lvl2);
    pnl2.add(lvl3);
    button.addActionListener(this);
    tlkt = Toolkit.getDefaultToolkit();
    timer = new Timer();
    pnl2.setBounds(50, 5, 1, 10);
    btn.setBounds(220, 240, 5, 1);
    f.setJMenuBar(mb2);
    g.setJMenuBar(mb2);
    mnuFile.add(mnuItemQuit);
    mnuHelp.add(mnuItemAbout);
    mb.add(mnuFile);
    mb.add(mnuHelp);
    mb2.add(mnuFile);
    mb2.add(mnuHelp);
    pnl.add(btn);
    pnl2.add(lbl);
    pnl2.add(button);
    lbl.setBounds(0, 240, 10, 2);
    lbl.setEditable(false);
    f.getContentPane().setLayout(new BorderLayout());
    f.getContentPane().add(pnl, BorderLayout.CENTER);       
    f.addWindowListener(new ListenCloseWdw());
    g.getContentPane().setLayout(new BorderLayout());
    g.getContentPane().add(pnl2);   
    g.addWindowListener(new ListenCloseWdw());
    mnuItemAbout.addActionListener(new GetAboutInfo());     
    btn.addActionListener(new GetButtonClick());    
    mnuItemQuit.addActionListener(new ListenMenuQuit());
    add(button);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:12:33.313

如果你想让你的类监听动作事件，你需要你的`CastleDefenders`类来实现接口。[`ActionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html)从错误消息看来，您还没有这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:14:12.840

在该行中： button.addActionListener(this); CastleDefenders 的类型是什么？CastleDefenders 是否实现了 ActionListener？

# java - 在 ObjectListing 结果中排除前缀用于 S3 的 Java 客户端

> ID：15981658
> 
> 赞同：5
> 
> 时间：2013-04-12T22:09:58.197
> 
> 标签：java, amazon-web-services, amazon-s3, amazon

我有一个具有以下层次结构的 S3 存储桶：

```
bucketName
    folder1
       file1 
```

我想从文件夹 1 中获取所有文件。我尝试执行以下操作：

```
ObjectListing ol = s3Client.listObjects("bucketName", "folder1"); 
List<S3ObjectSummary> summaries = ol.getObjectSummaries(); 
```

问题是摘要包含`folder1/`和`folder1/file1`。正如我希望得到的那样`folder1/file1`。

环顾互联网，我还尝试了以下操作：

```
ListObjectsRequest req = new ListObjectsRequest().withBucketBucketName("bucketName").withPrefix("folder1/").withDelimiter("/"); 
```

但这一次我没有回`getObjectSummaries`电话的结果。当我`withDelimiter`从上面移除时，我得到了两者`folder1\`并`folder1\file1`返回。

有什么办法可以直接`folder1\file1`回来吗？

请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T15:08:00.510

`withPrefix`和`withMarker`一起使用：

```
ListObjectsRequest req = new ListObjectsRequest().withBucketName("bucketName").withPrefix("folder1/").withMarker("folder1/"); 
```

这是有效的，因为首先您过滤`withPrefix`并获取所有文件夹 1/* 键，包括文件夹 1/，然后`withMarker("folder1/")`指定获取按字典顺序排列在“文件夹 1/”之后的键，如[javadoc](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html)中所述：

> 该列表将仅包括按字典顺序出现在标记之后的键。

此外，如果 folder1 包含其他子文件夹，则只能使用以下方法获取直接子文件夹`withDelimiter`：

```
ListObjectsRequest req = new ListObjectsRequest().withBucketName("bucketName").withPrefix("folder1/").withMarker("folder1/").withDelimiter("/"); 
```

这是有效的，因为定界符“/”使所有子文件夹都被汇总到“folder1/”，但是你用标记忽略了这个结果。javadoc 说`withDelimiter`：

> 获取可选的分隔符参数，该参数导致在前缀和分隔符的第一次出现之间包含相同字符串的键组合成单个结果元素 (...)。最常用的分隔符是“/”，它模拟类似于文件系统目录结构的分层组织。

--

在任何情况下，`folder1/`仅列出，因为您确实通过 Web 控制台创建了它。如果您不直接创建文件夹而是以编程方式放置对象，例如`put folder2/file2`文件夹实际上不会被创建为独立对象，因此无法列出。

# ios - 在 iOS 中保存带有元数据的 RGBA 图像

> ID：15981661
> 
> 赞同：1
> 
> 时间：2013-04-12T22:10:03.140
> 
> 标签：ios, image, png, alpha, exif

我正在开发一个进行一些图像处理的 iOS 应用程序。处理的结果是灰度图像。当这个过程完成后，我想将原始 RGB 图像与结果一起保存在同一个图像文件中到相机胶卷中，所以我想到了使用 alpha 通道。

另外，我想将处理中获得的一些参数附加为图像元数据。

所以我的问题来了。**我找不到允许将 Alpha 通道与元数据一起保存的 iOS 兼容图像格式。** 一方面，JPEG 图像接受元数据，但不接受 alpha 通道。另一方面，PNG 图像接受 alpha 通道，但不接受元数据。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:20:49.177

> 另一方面，PNG 图像接受 alpha 通道，但不接受元数据。

[但是是的元数据。](https://stackoverflow.com/questions/8113314/does-png-support-metadata-fields-like-author-camera-model-etc)

# android - ACTION_MEDIA_BUTTON 意图的 BroadcastReceiver 触发两次 MediaButton 点击

> ID：15981662
> 
> 赞同：5
> 
> 时间：2013-04-12T22:10:04.807
> 
> 标签：android, bluetooth, broadcastreceiver

我有一个简单但结构可能很糟糕的 Android 应用程序。它由两个java类组成：MainActivity扩展Activity，RemoteControlReceiver扩展BroadcastReceiver。

我已按照以下两个链接中的说明设置 Mediabutton 接收器： [http ://android-developers.blogspot.com/2010/06/allowing-applications-to-play-nicer.html](http://android-developers.blogspot.com/2010/06/allowing-applications-to-play-nicer.html) [http://developer。 android.com/training/managing-audio/volume-playback.html](http://developer.android.com/training/managing-audio/volume-playback.html)

问题是每当我按下蓝牙遥控器上的媒体按钮（播放/暂停、下一个、上一个）时，broadcastReceiver 的 onReceive() 方法都会运行两次。或者更具体地说，整个 RemoteControlReceiver 被初始化为对象，对象的 onReceive() 方法运行，对象被废弃，然后重复。

我通过放置一个静态 int mult = 0; 对此进行了测试。在主活动中。每次运行 onReceive 时，我都会将 mult 增加 1。每点击一次按钮，它就会增加两次。

我不确定是什么导致它运行两次。硬件是否每次点击发送双重信号，或者操作系统是否每次信号发送多个媒体按钮意图，或者我的广播接收器是否每个意图运行两次？

我的 MediaButtonReceiver 代码：

```
public class RemoteControlReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if(Intent.ACTION_MEDIA_BUTTON.equals(intent.getAction())){
            KeyEvent Xevent = (KeyEvent) intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
            int keyType = Xevent.getKeyCode();

            Intent i = new Intent();
            i.setAction("com.MainActivity.Shakey.MEDIA_BUTTON");
            i.putExtra("keyType", keyType);
            context.sendBroadcast(i);
            Toast.makeText(context, String.valueOf(MainActivity.mult), Toast.LENGTH_SHORT).show();
            MainActivity.mult++;
            abortBroadcast();

        }

    }
} 
```

此接收器的过滤器在 Manifest 中注册如下：

> ```
> <application>
>  ...
>    <receiver android:name=".RemoteControlReceiver">
>        <intent-filter>
>            <action android:name="android.intent.action.MEDIA_BUTTON"/>
>        </intent-filter>
>    </receiver>
>  ...
> </application> 
> ```
> 
> Broadcastreceiver 在 MainActivity 的 onResume() 中动态注册到 AudioManager 对象。它在 onPause() 中未注册。正如链接所说，这是在 media_button 意图上获得第一优先级的可靠方法。我知道我可以通过使用静态变量来忽略广播接收器的每个偶数调用。但我想知道这个问题的原因。

PS 播放/暂停/上一个/下一个按钮适用于默认的 android 音乐播放器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T11:22:20.997

在我看来，问题在于 OnReceive 会对按下和释放蓝牙按钮做出反应。这就是您的代码运行 2 次的原因。尝试这样做：

```
 if (Intent.ACTION_MEDIA_BUTTON.equals(intent.getAction())) {
    KeyEvent Xevent = (KeyEvent)intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);    
    if ((KeyEvent.KEYCODE_MEDIA_PLAY == Xevent.getKeyCode()) && (Xevent.getAction() == KeyEvent.ACTION_DOWN)) {  //MainActivity.mult++; ... 
```

或者，无论您想做什么，您都可以使用 ACTION_UP。我不确定，但我希望这会对你有所帮助。

# c# - c# convert.ToInt 不工作？

> ID：15981663
> 
> 赞同：-3
> 
> 时间：2013-04-12T22:10:22.493
> 
> 标签：c#, type-conversion

我已经尝试了一个小时来解决这个问题，并尝试解析但没有奏效。下面的代码在我转换联赛数据 [2] 和联赛数据 [3] 的两行上不断给我错误输入字符串格式不正确。我错过了一些简单的东西吗？

```
 public static void readLeagues(string theFile, ArrayList allLeagues)
    {
        StreamReader inLeagues = null;
        bool anyMoreLeagues = false;
        string[] leagueData = new string[frmLeagues.numLeagueItems];
        string[] fixtureData = new string[frmLeagues.numFixItems];
        Leagues tempLeague;
        Fixtures tempFix;
        int numFixInLeague, leaguePrize;

        if (fileOpenForReadOK(theFile, ref inLeagues))
        {

            anyMoreLeagues = getNext(frmLeagues.numLeagueItems, inLeagues, leagueData);

            while (anyMoreLeagues == true)
            {
               leaguePrize = Convert.ToInt32(leagueData[2]);
               numFixInLeague = Convert.ToInt32(leagueData[3]);

                tempLeague = new Leagues(leagueData[0], leagueData[1],numFixInLeague,
                                        leaguePrize);

                for (int i = 0; i < numFixInLeague; i++)
                {
                    getNext(frmLeagues.numFixItems, inLeagues, fixtureData);
                    tempFix = new Fixtures(fixtureData[0], fixtureData[1], fixtureData[2]
                                            , fixtureData[3], fixtureData[4]);
                    tempLeague.addFixturesToLeague(tempLeague.getLeagueFixtures(),tempFix);

                }

                allLeagues.Add(tempLeague);
                anyMoreLeagues = getNext(frmLeagues.numLeagueItems, inLeagues, leagueData);
            }
        }
        if (inLeagues != null) inLeagues.Close(); 
```

以下是联盟课程的代码谢谢，杰克

类联赛 { 私人字符串 LeagueName; 私人字符串 LeagueSponsor；私人 int LeaguePrize; 私人 int LeagueNumFixtures; ArrayList LeagueFixtures;

```
 public Leagues(string inLeagueName, string inLeagueSponsor, int inLeaguePrize,
                    int inLeagueNumFixtures)
    {
        LeagueName = inLeagueName;
        LeagueSponsor = inLeagueSponsor;
        LeaguePrize = inLeaguePrize;
        LeagueNumFixtures = inLeagueNumFixtures;
        LeagueFixtures = new ArrayList();

    }
    public ArrayList addFixturesToLeague(ArrayList fixturesSoFar, Fixtures theNewFixture)
    {
        fixturesSoFar.Add(theNewFixture);
        LeagueNumFixtures = fixturesSoFar.Count;
        return fixturesSoFar;

    }
    public void setLeagueName(string inLeagueName)
    {
        LeagueName = inLeagueName;
    }
    public void setLeagueSponsor(string inLeagueSponsor)
    {

        LeagueSponsor = inLeagueSponsor;
    }
    public void setLeaguePrize(int inLeaguePrize)
    {
        LeaguePrize = inLeaguePrize;
    }
    public void setLeagueNumofFixture(int inLeagueNumFixtures)
    {
        LeagueNumFixtures = inLeagueNumFixtures;
    }
    public void setLeagueFixtures(ArrayList inLeagueFix)
    {
        LeagueFixtures = inLeagueFix;
    }
    public string getLeagueName()
    {
        return LeagueName;
    }
    public string getLeagueSponsor()
    {
        return LeagueSponsor;
    }
    public int getLeaguePrize()
    {
        return LeaguePrize;
    }
    public int getLeagueNumFixtures()
    {
        return LeagueNumFixtures;
    }
    public ArrayList getLeagueFixtures()
    {
        return LeagueFixtures;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:16:51.833

我会确保leagueData[2] 和leagueData[3] 不为null，然后对它们执行TryParse。您还应该首先检查leagueData 不为空或为空。我假设 LeagueData 是一个字符串数组

```
var prize = leagueData[2];
int outNum;
int leaguePrize = Int.TryParse(prize, out outNum)? outNum : 0; 
```

*   根据 phoog 的评论进行几个小修改

# python - python if 语句总是

> ID：15981664
> 
> 赞同：3
> 
> 时间：2013-04-12T22:10:24.070
> 
> 标签：python, windows, eclipse, tkinter, python-3.3

因此，我正在用 Python 构建一个简单的游戏以更熟悉该语言，如果之前有人问过这个问题，我找不到搜索方法。:P 无论如何，当这个代码块执行时，我的“位置”总是为 .y +10。我重新安排并检查了几件事，但我觉得我错过了我通常使用 switch 语句处理的一个非常基本的部分

```
mv = input('N,S,E,W?')

if mv == 'N' or 'n':
    Me.Position.Y += 10    
elif mv == 'E' or 'e':
    Me.Position.X += 10    
elif mv == 'W' or 'w':
    Me.Position.X -= 10    
elif mv == 'S' or 's':
    Me.Position.Y -= 10
else:
    print('Stand') 
```

接着：

```
print('Lage: X:', Me.Position.X, ' Y:', Me.Position.Y, ' Z:', Me.Position.Z) 
```

没有办法使用我的其他选项。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T22:12:22.393

您的代码的解释与您的预期略有不同。这一行：

```
if mv == 'N' or 'n': 
```

被解释为：

```
if (mv == 'N') or ('n'): 
```

`'n'`是真实的，所以你的`if`陈述将永远是`True`。你必须更明确：

```
if mv == 'N' or mv == 'n': 
```

或使用`in`：

```
if mv in ['N', 'n']: 
```

或使用`.lower()`：

```
if mv.lower() == 'n': 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T22:13:33.180

问题出`or`在您的`if`-statement 中：

即使`mv == 'N'`计算结果为`False`，非空字符串也`'n'`计算结果为`True`，这样`mv == 'N' or 'n'`总是`True`。

你想要的是：

```
if mv in ['n', 'N']:
    Me.Position.Y += 10 
```

甚至只是：

```
if mv in 'nN':
    Me.Position.Y += 10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T22:12:50.690

更好的方法是检查您的答案是否在可能答案的元组中，即

```
In [1]: mv in ('n', 'N')
Out[1]: True 
```

tuple 是首选，因为它是不可变的。

但是，*如果*你想坚持原来的代码，你想使用

```
 if mv == 'N' or mv == 'n': 
```

因为给定

```
 mv ='n' 
```

然后

```
In [2]: mv == 'n'
Out[2]: True

In [3]: mv == 'N'
Out[3]: False

In [4]: mv == 'N' or 'n'
Out[4]: 'n' 
```

但

```
In [5]: mv == 'n' or mv == 'N'
Out[5]: True 
```

这就是我相信你的初衷。

# firefox - iMacros 帮助，在 Firefox 上使用 iMacros 记录信息

> ID：15981667
> 
> 赞同：0
> 
> 时间：2013-04-12T22:10:32.807
> 
> 标签：firefox, record, imacros, gambling

如果我在一个基于文本的游戏上编写脚本，不断地在轮盘赌上下注，有什么方法可以记录出现的数字吗？或记录最频繁的数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T05:33:24.130

如果基于文本的游戏可以在 Internet 浏览器中运行，您可以尝试使用 iMacros 提取信息。

*   使用[SAVEAS](http://wiki.imacros.net/SAVEAS)并保存为 .CSV

*   运行脚本

*   找出[一组数字中最常见的数字](http://office.microsoft.com/en-001/excel-help/find-the-most-frequent-number-in-a-group-of-numbers-HA010070504.aspx)(Excel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T09:11:27.230

你总是可以截图？但这会很快加起来：P [http://wiki.imacros.net/SCREENSHOT](http://wiki.imacros.net/SCREENSHOT)

# android - 如何让文本外观在应用程序主题中工作

> ID：15981673
> 
> 赞同：0
> 
> 时间：2013-04-12T22:10:50.613
> 
> 标签：android, styles

我知道之前在这里已经多次询问过文本外观，但是我在让它正常工作时遇到了问题。下面显示的是主题 xml 以及文本视图样式 xml。主题 AppTheme 应用在清单文件中。

我遇到的问题是没有应用 textview 样式。我期待它以与 android:buttonStyle 类似的方式工作。

有谁知道可能导致此问题的原因是什么？

谢谢

**主题 XML**

```
<style name="AppBaseTheme" parent="android:Theme.Holo">

</style>

<style name="AppTheme" parent="AppBaseTheme">

    <item name="android:windowBackground">@drawable/backgroundmain</item>
    <item name="android:buttonStyle">@style/button_main</item>
    <item name="android:textAppearance">@style/textview_main</item>

</style> 
```

**文本视图样式 XML**

```
<style name="textview_main">

    <item name="android:textColor">@color/Snow</item>
    <item name="android:textSize">16sp</item>

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:02:41.913

您可以通过 XML 布局应用它，如下所示：

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" 
    android:textAppearance="@style/textview_main"
    /> 
```

希望对你有所帮助。

# jquery - 覆盖 select2 中的默认 jsonp 回调名称

> ID：15981678
> 
> 赞同：0
> 
> 时间：2013-04-12T22:11:28.627
> 
> 标签：jquery, json, jsonp, jquery-select2

我有类似以下的东西，使用 select2 插件：

```
$("#thing").select2({
      ajax: {
        url: 'http://someurl.com',
        dataType: 'jsonp',
        jsonpCallback: "callback",
        data: function (term, page) {
          // return stuff;
        },
        results: function (data, page) {
          // return stuff;
        }
      }
  }); 
```

出于某种原因，我无法覆盖默认 JSONP 回调的名称，它最终类似于“jQuery19108308313677553087_1365803875152”而不是“回调”，因为我试图用“jsonpCallback”定义它。

如何将回调命名为我想要的任何名称？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-12T23:28:22.407

我对 Select2 不是很熟悉，所以这可能是一个长镜头。

尝试在`dataType: 'jsonp'`. 您要添加的参数是`jsonp: 'false'`. 这应该允许您覆盖默认回调。

# php - 如果购物车项目 = 0，则显示文本

> ID：15981684
> 
> 赞同：0
> 
> 时间：2013-04-12T22:11:51.253
> 
> 标签：php, joomla, cart

我在下面写的代码有问题。基本上，当购物车中有 x 件商品时，它会回显文本“您在购物车中有 x 件商品”。但是，当没有商品时，它应该回显“您在购物车中没有任何商品”，而是什么也不回显。我究竟做错了什么？

```
<?php 
    $array = unserialize($_SESSION['__vm']['vmcart']); 
    foreach($array->products as $product){
        $amount = $product->amount;
        if ($amount != 0){ echo "You have $amount item(s) in the cart."; } 
        else { echo "You don't have any items in the cart."; } 
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:17:03.237

这是因为代码没有出现在 for each 循环中。

```
<?php 
    $array = unserialize($_SESSION['__vm']['vmcart']); 
    if (count($array->products) > 0) {
      foreach($array->products as $product){
          $amount = $product->amount;
          echo "You have $amount item(s) in the cart."; 
          /* Do other thinks here. */
      }
    } else { 
     echo "You don't have any items in the cart."; 
    } 
?> 
```

我不确定你为什么要使用循环顺便说一句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:18:04.867

删除你的 foreach 并使用它

```
if($size=sizeof($array->products))
echo "You have ".$size." item(s) in the cart.";
else
echo "You don't have any items in the cart."; 
```

# xml - 让 WiX 升级缺少项目的配置文件

> ID：15981685
> 
> 赞同：2
> 
> 时间：2013-04-12T22:11:51.780
> 
> 标签：xml, installation, wix, configuration-files

我刚刚开始使用 WiX 作为我现有应用程序的安装框架。该应用程序有一个 App.Config 文件，用于控制各种客户特定的设置。这些设置中的大多数都是在内部修改的，并且不是用户可控制的。

这种配置文件的一个例子是：

```
[...snip]
<applicationSettings>
    <setting name="DatabaseConnectionString" serializeAs="String">
        <value>Data Source=localhost;Initial Catalog=CustomersDatabase;Persist Security Info=True;Integrated Security=True</value>
    </setting>
</applicationSettings>
[snip...] 
```

当应用程序的较新版本交付时，它将有一个库存配置文件，其中包括任何新的应用程序设置：

```
[...snip]
<applicationSettings>
    <setting name="DatabaseConnectionString" serializeAs="String">
        <value>Data Source=localhost;Initial Catalog=NonProductionDatabase;Persist Security Info=True;Integrated Security=True</value>
    </setting>
    <setting name="NewConfigItem" serializeAs="String">
        <value>ConfigDetails</value>
    </setting>
</applicationSettings>
[snip...] 
```

我想将我的 WiX 安装程序设置为在升级期间创建一个合并的 App.Config，这样现有的设置不会受到影响，但新的配置项会以其默认值插入：

```
[...snip]
<applicationSettings>
    <setting name="DatabaseConnectionString" serializeAs="String">
        <value>Data Source=localhost;Initial Catalog=CustomersDatabase;Persist Security Info=True;Integrated Security=True</value>
    </setting>
    <setting name="NewConfigItem" serializeAs="String">
        <value>ConfigDetails</value>
    </setting>
</applicationSettings>
[snip...] 
```

但是，我不希望安装程序必须事先知道配置选项是什么；我只是希望它扫描现有文件，如果发现缺少任何选项，则从安装程序中添加新选项。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:23:06.413

是的，您需要编写自定义操作来读取现有的 xml 文件。然后，我建议根据读取的数据将临时记录添加到 XmlConfig 表中，[如本问题中所述。](https://stackoverflow.com/q/15787614/23852)

# vim - vim 中的片段 - 有什么选项可以返回到上一个参数？

> ID：15981686
> 
> 赞同：3
> 
> 时间：2013-04-12T22:12:00.580
> 
> 标签：vim, parameters, code-snippets, vim-plugin

我正在使用 neocomplcache 以及 neosnippet 和 honza 的 vim-snippets。它们很棒，除了当我按下 时`Ctrl-k`，我可以转到下一个参数，但我无法返回上一个参数。

例如，如果我插入 'for' 片段并在索引变量上打错字，但我已经按下`Ctrl-k`，我搞砸了吗？我必须修改所有参数然后再回来进行替换操作吗？或者在这种情况下我可以帮助我选择模式的映射吗？目前`Tab`并`S-Tab`没有做任何事情。

最后，所有的片段插件都是这样的吗？还是 neocomplcache 只是缺少此功能（至少是开箱即用的）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T22:51:50.630

我鼓励您尝试**[UltiSnips](https://github.com/SirVer/ultisnips)**。它比`vim-snippets`or更加强大和成熟`neosnippet`。例如，由于 UltiSnips 是基于 Python 的，因此它具有很强的可扩展性。关于您的问题：是的，您可以使用 UltiSnips 来回跳转。最后，一定要查看截屏视频（在链接中列出），看看你可以用它做的所有花哨的东西。

例如，我使用以下配置：

```
let g:UltiSnipsSnippetsDir        = '~/.vim/snippets/'
let g:UltiSnipsSnippetDirectories = ['UltiSnips', 'snippets']

let g:UltiSnipsExpandTrigger       = '<C-CR>'
let g:UltiSnipsJumpForwardTrigger  = '<A-d>'
let g:UltiSnipsJumpBackwardTrigger = '<A-a>' 
```

**注意：** `~/.vim/snippets/`是我的自定义片段目录。

正如我已经提到的，UltiSnips 广泛使用 Python，因此需要使用 Python 支持构建 Vim。如果您使用的是 Windows（尤其是 x64），那可能会很麻烦，这是我很久以前遇到的问题。为了节省宝贵的时间并避免沮丧，您可以考虑下载我的**[Vim for Windows](https://bitbucket.org/Haroogan/vim-for-windows)**。提供了 x86 和 x64 架构，它同时支持 Python 2 和 Python 3。我可以向你保证，它是稳定的。要正确安装，只需按照说明进行操作。这些构建经常更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T06:58:30.453

最初的[SnipMate](https://github.com/msanders/snipmate.vim)和它的[fork](http://github.com/garbas/vim-snipmate)（[vim-snippets](https://github.com/SeySayux/vim-snippets)的插件）都允许你使用`<S-Tab>`. 我相信 UltiSnips 也是如此。

Neocomplcache 不再支持开箱即用的片段扩展。AFAIK，您需要同一作者的另一个插件，称为[neosnippet](http://github.com/garbas/vim-snipmate)，它负责`<C-k>`映射。快速查看文档显示没有“反向跳转”映射、函数或命令。您可能可以在 neosnippet 的 Github 页面上创建一个新问题。

# html - 悬停时更改图像不起作用

> ID：15981689
> 
> 赞同：-2
> 
> 时间：2013-04-12T22:12:09.477
> 
> 标签：html, css, hover

我想在 上用另一个图像替换一个图像`hover`，但我很难实现它 - 悬停时似乎没有发生任何事情。

[JS小提琴](http://jsfiddle.net/FaTxw/5/)

```
<div id="container">
    <div class="content">
        <div class="left">
            <a href="#"><img src="http://dummyimage.com/307x349/000/fff" alt="tyler st salon home"></a>
        </div><!-- end left -->
        <div class="center">
            <a href="#" class="top"><img src="http://dummyimage.com/307x166/000/fff" alt="about tyler st salon" class="about_hover"></a>
            <a href="#" class="bottom"><img src="http://dummyimage.com/307x166/000/fff" alt="tyler st salon service" class="services_hover"></a>
        </div><!-- end center -->
        <div class="right">
            <a href="#" class="top"><img src="http://dummyimage.com/307x166/000/fff" alt="tyler st salon products" class="products_hover"></a>
            <a href="#" class="bottom"><img src="http://dummyimage.com/307x166/000/fff" alt="contact tyler st salon" class="contact_hover"></a>
        </div><!-- end right -->
    </div><!-- end content -->    

</div><!-- end container -->

html, body, #container, .content, .left, .right, .center {
    height: 100%;
}

#container {
    min-height: 349px;
}

#container {
    margin: 0 auto;
    width: 960px;
}

#container .content {
    margin-top: 115px;
    position: relative;
}

#container .content .left,
#container .content .center,
#container .content .right { 
    position: relative;
    width: 307px;
}

#container .content .left {
    float: left;
}

#container .content .center {
    float: left;
    padding-left: 19px;
}

#container .content .right {
    float: right;
}

#container .content .top,
#container .content .bottom {
    position: absolute;
}

#container .content .top {
    top: 0;
}

#container .content .bottom {
    bottom: 0;
}

#container .content .center .about_hover {
    width: 307px;
    height: 166px;
    background: url('img/about_hover.jpg') center center no-repeat;
}

#container .content .center .services_hover {
    width: 307px;
    height: 166px;
    background: url('img/services_hover.jpg') center center no-repeat;
}

#container .content .center .products_hover {
    width: 307px;
    height: 166px;
    background: url('img/products_hover.jpg') center center no-repeat;
}

#container .content .center .contact_hover {
    width: 307px;
    height: 166px;
    background: url('img/contact_hover.jpg') center center no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:20:56.557

这是 1 个变体
检查这个[小提琴](http://jsfiddle.net/trajce/FaTxw/11/)
当我悬停时隐藏你的图像

```
a:hover img
{
    display:none;
} 
```

我将您的背景图片（我将您的班级从图片中移出）设置为`<a>`标签。

```
<a href="#" class="top about_hover"> 
```

示例小提琴仅适用于您的`<a class="top"...`

随意玩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:15:45.807

您的 css 指定更改图像所覆盖区域的背景。要实际更改图像，您必须对`<img src="...">`内容进行猴子处理，可能通过 javascript 中的悬停事件（或 mousein/mouseout）侦听器。

[这个答案](https://stackoverflow.com/a/554289/1168588)显示了如何在点击事件上更改图像。要适应悬停事件，只需将事件侦听器更改为[`.hover()`](http://api.jquery.com/hover/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:17:59.353

这是写它的正确方法：

```
.element:hover{
/* stuff */
} 
```

这是错误的：

```
.element_hover{
    /* stuff */
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T22:29:48.997

这是一个javascript图像交换的例子（没有jQuery）

```
<!doctype html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}
window.addEventListener('load', myInit, false);

function myInit()
{
    byId('img1').addEventListener('mouseover', onMouseOverOut, false);
    byId('img1').addEventListener('mouseout', onMouseOverOut, false);
}

// swaps the hoverImg and src attributes of the image it's attached to as an event handler
function onMouseOverOut()
{
    var tmp = this.src;
    this.src = this.getAttribute('hoverImg');
    this.setAttribute('hoverImg', tmp);
}
</script>
<style>
#img1
{
    height: 256px;
    width: 256px;
}
</style>
</head>
<body>
    <img id='img1' hoverImg='http://www.gravatar.com/avatar/c89d764421e3857bf346733ff58d8d2a?s=128&d=identicon&r=PG' src='http://dummyimage.com/307x349/000/fff'/>
</body>
</html> 
```

# python - django - 将参数从模板传递到 models.py 的函数

> ID：15981695
> 
> 赞同：3
> 
> 时间：2013-04-12T22:12:41.333
> 
> 标签：python, django, templates, variables, models

我有一个名为 mymodel 的模型，它有一个属性 getp，但这需要一个参数（请求）：

```
class Mymodel(models.Model):
    ...
    def getp(self, request):
        return "STH" 
```

. 从视图中，我将请求和一个模型传递给模板：

```
return render_to_response('x.html', {
                                       'mymodel': Mymodel.objects.get(id=17),
                                       'request': request
                                   }, context_instance = RequestContext(request)) 
```

，并且从模板文件中是否有任何方法可以使用请求参数调用 getp 函数？我知道这不应该这样使用，但我的问题是理论上的而不是实际的。

这个问题的任何解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:23:25.840

似乎与如何在 Django 模板中使用方法参数重复 [？](https://stackoverflow.com/questions/1529550/a-way-to-use-method-parameters-in-django-templates)

一种解决方案是将您的方法的结果传递给模板。就像是：

```
object = Mymodel.objects.get(id=17)
return render_to_response('x.html', {
    'mymodel': object,
    'mymodel_getp': object.getp(request),
    'request': request
    }, context_instance = RequestContext(request)) 
```

其他解决方案是编写自定义模板标签：

```
@register.simple_tag(name="model_getp", takes_context=True)
def model_getp(context, object=None):
    return object.getp(context) 
```

然后在模板中：

```
{% model_getp mymodel %} 
```

# pdf - TCPDF：如何将图像传递给标题（不模糊）

> ID：15981700
> 
> 赞同：1
> 
> 时间：2013-04-12T22:13:17.287
> 
> 标签：pdf

通过“tcpdf”将徽标图像传递到 Pdf 文档的标题中需要毫米为单位。我没有毫米。图像具有像素作为宽度和高度。然而，我尝试的每一个值都是模糊的。

```
 /**
 * Set header data.
 * @param $ln (string) header image logo
 * @param $lw (string) header image logo width in mm
 * @param $ht (string) string to print as title on document header
 * @param $hs (string) string to print on document header
 * @param $tc (array) RGB array color for text.
 * @param $lc (array) RGB array color for line.
 * @public
 */
public function setHeaderData($ln='', $lw=0, $ht='', $hs='', $tc=array(0,0,0), $lc=array(0,0,0)) { 
```

我有一个 jpeg 图像和 png 图像的标志。两个图像都扩展为宽度和高度参数，以像素为单位。

但是，TCPDF 需要以毫米为单位的值。

如何确定正确的参数，以便将 jpeg 或 png 图像传递到 TCPDF 创建的 PDF 文件的标题中？

我在 GIMP 中打开了这些文件并试用了 scale-image-dialog。我可以确定以毫米为单位的宽度和高度，但传递给 TCPDF，图像仍然模糊......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T06:40:57.487

您如何在 Adob​​e 的 PDF 阅读器中查看“模糊”图像？如果是这样，请确保将 PDF 大小设置为 100%。我的 Adob​​e 阅读器打开文档 @167%，因此用于在 TCPDF 中创建 PDF 文档的图像看起来“模糊”，直到我以 100% 的速度查看文档。

# enthought - 在 Enthought Canopy 中加载 sympy 会导致内核死机

> ID：15981702
> 
> 赞同：1
> 
> 时间：2013-04-12T22:13:42.517
> 
> 标签：enthought, sympy

我刚刚安装了 Enthought Canopy，它很棒，但是我在 IPython 笔记本实现中使用 simpy 时遇到了麻烦。

在 Canopy 中创建一个新笔记本，然后使用

```
%load_ext sympyprinting
import sympy as sym
from sympy import * 
```

要不就

```
import sympy 
```

导致内核死机，并显示消息“内核已死机，是否要重新启动它？如果不重新启动内核，您将能够保存笔记本，但运行代码将无法运行，直到笔记本重新开放。”

通常我会用“ipython notebook --sympy”或类似的东西来启动html笔记本，但我不知道如何在使用Canopy时传递“--[...]”参数。这是可能的，还是有另一种以这种方式使用 Sympy 的技术？我已经通过 Canopy 的 GUI 包管理器安装了 Sympy。

PS 我在 Ubuntu 12.04 上运行，除了 Canopy 套件或 Ubuntu 默认可能附带的任何东西外，没有安装任何类型的 python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:27:33.380

我不知道这是否能解决您的问题，但从 SymPy 0.7.2 开始，IPython 打印扩展作为 SymPy 的一部分提供。所以你应该改为

```
%load_ext sympy.interactive.ipythonprinting 
```

您也可以使用该`init_printing()`功能。如果您还想自动导入所有内容并定义常见的符号名称，如`x`、`y`和`z`，请使用`init_session()`.

# c# - 如何在不编码的情况下将 byte[] 转换为 String，不会丢失数据

> ID：15981703
> 
> 赞同：12
> 
> 时间：2013-04-12T22:13:53.620
> 
> 标签：c#, .net

我有一个字节数组。每个字节的 8 位值是我想要的字符串中的字符。您可以将我的 8 位值想象为 ASCII、ANSI、UTF-8、ISO-8859-1、每日温度读数、与线上一点的距离（以英寸为单位）或任何您想要的值。这无关紧要。

当我完成时。我的 String 中位置 N 处的 char 应与位置 N 处的字节具有相同的值。也就是说，高 8 位应为 0，低 8 位应与源字节相同。

我使用什么编码来简单地将字节映射到字符而没有变化？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T22:16:11.453

对于这个要求，我会放弃编码，因为我不知道它们做什么的细节，只是自己转换字节。

```
string Convert(byte[] data)
{
    char[] characters = data.Select(b => (char)b).ToArray();
    return new string(characters);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T01:04:14.987

您询问的编码称为“ [ISO/IEC 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1) ”。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-03-24T17:23:31.833

使用[*扩展*ASCII](http://en.wikipedia.org/wiki/Code_page_437)怎么样？

```
Encoding.GetEncoding(437).GetString(bytes); 
```

# java - 将一个对象拆分为多个表

> ID：15981708
> 
> 赞同：1
> 
> 时间：2013-04-12T22:14:22.963
> 
> 标签：java, hibernate

我有一个名为 Star 的 Java 对象，它存储在数据库中。有数十亿条记录，所以我想通过 Star 对象中名为 cluster 的字段将这个单个对象拆分到数据库中的多个表中，该字段采用值“left”、“right”、“top”、“bottom”

```
 class Star {

    private String Name;
    private String cluster;
  } 
```

因此，我将有四个用于 Star 对象的大表，而不是一张大桌子。是否可以在休眠中执行此操作？如果是这样，怎么做？

我想避免创建四个不同的 Start 对象：StarLeft、StarRight、StarBottom 和 StarTop，因此它们位于不同的表上。

**编辑：**这样做是为了表现。我没有特定的数据库，我的应用程序应该可以与任何数据库（Oracle、MySQL 等）一起使用，因此我使用 hibernate 的原因之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:14:28.330

如果您使用 Oracle，它支持分区，因此如果您的目标是提高性能，您可以在数据库级别实现它。[http://docs.oracle.com/cd/B10501_01/server.920/a96524/c12parti.htm](http://docs.oracle.com/cd/B10501_01/server.920/a96524/c12parti.htm)。可能其他数据库也提供类似的功能

# mysql - 是否所有受影响的表都被 mySQL 事务“锁定”了？

> ID：15981709
> 
> 赞同：0
> 
> 时间：2013-04-12T22:14:30.493
> 
> 标签：mysql, transactions

我想做一笔金融交易，但我对 MySQL 交易功能并不十分熟悉。

我想确保我做的所有事情都是正确的。我的目标是在我的交易过程中“锁定”我的 transactionHistory 和 transactionQueued 表，以确保帐户余额是正确的，并且不能同时插入其他交易来操纵余额。

```
SET autocommit=0;
START TRANSACTION;

IF (
SELECT SUM(amount) of transactionHistory WHERE account = 1
+
SELECT SUM(amount) of transactionsQueued WHERE account = 1)

 >= :amount)

INSERT INTO transactionHistory (account, amount) VALUES (1, -:amount);
INSERT INTO transactionHistory (account, amount) VALUES (2, :amount);

COMMIT; 
```

mySQL 锁定所有受影响的表是否正确？在这种情况下 transactionHistory 和 transactionsQueued。

我正在使用 innoDB，并且此代码不是过程的一部分。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-07T15:28:01.620

```
SET autocommit=0;
START TRANSACTION; 
```

两者基本上都做同样的事情，除了 START TRANSACTION 还重新计算了会话持有的所有 LOCKS。

如果要锁定 TABLE(S) 中的记录，则可以使用 SELECT...FOR UPDATE 语句（这将锁定所有符合该 SELECT 条件的记录）。您需要在事务中使用它。

或者您可以锁定整个表。要锁定表，不能使用 START TRANSACTION; 然而。您需要像这样开始事务：

```
SET autocommit=0;
LOCK TABLES transactionHistory as t1 WRITE, transactionsQueued  as t2 READ, ...;
... do something with tables t1 and t2 here ...
COMMIT;
UNLOCK TABLES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:25:11.033

了解您使用的是 INNODB，答案是否定的，锁定级别是`ROW`，不是`TABLE`（与MYISAM 不同）

请参阅此链接：[http ://dev.mysql.com/doc/refman/5.0/en/innodb-transaction-model.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-transaction-model.html)

* * *

我想你已经知道了，但你的代码是伪代码，不会像这样工作。IF 语句非常程序化，需要包含在 BEGIN END 块中，否则您可以构建等效的高级`insert select`语句。

# asp.net-mvc-2 - 无法使用 ASCX 模板在 Telerik Grid 的弹出编辑器中显示原始 Html

> ID：15981710
> 
> 赞同：0
> 
> 时间：2013-04-12T22:14:31.307
> 
> 标签：asp.net-mvc-2, telerik-grid, telerik-mvc

我查看了[带有自定义编辑/插入弹出窗口的 Telerik MVC3 网格，](https://stackoverflow.com/questions/9216168/telerik-mvc3-grid-with-custom-edit-insert-popup)它几乎就在那里。但是，我试图弄清楚如何显示控制器为网格中的每一行生成的一些 HTML 文本 - 但在弹出编辑器中！**（只需将.Encoded(false)**添加到我的列定义中，我就可以轻松地将其显示在网格列中。）

```
<%= Html.Telerik().Grid<ViewModelProcurementAction>(Model.ProcurementActions) // 
        .Name("ProcurementActionGrid")
        .Columns(c =>
            {
                c.Command(commands =>
                    {
                        commands.Edit().ButtonType(GridButtonType.ImageAndText);
                        commands.Delete().ButtonType(GridButtonType.ImageAndText);
                        commands.Custom("showHistory")
                                .ButtonType(GridButtonType.ImageAndText)
                                .Text("History")
                                .Action("Show", "ProcurementActions")
                                .DataRouteValues(route => { route.Add(o => o.Id).RouteKey("id"); });
                    }).Title("Actions").Width(100);
                c.Bound(e => e.Id).Visible(false);
                c.Bound(e => e.ActionId).Visible(false);
                c.Bound(e => e.ContractNumber).HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.ContractManager).Width(120).HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.ActualCAResponsible).Width(150).HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.TitleOfRequirement).HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.CipOrName).Title("Project Id").HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.RecordTypeName).Title("Record Type").HtmlAttributes(new {style = "vertical-align: top"});
                c.Bound(e => e.ContractTypeName).Title("Contract Type").HtmlAttributes(new { style = "vertical-align: top" });
                c.Bound(e => e.ProcurementActionYearDisplayName).Title("Plan FY").HtmlAttributes(new { style = "vertical-align: top" });
            })
        .DataKeys(keys => keys.Add(o => o.Id))
        .DataBinding(dataBinding =>
                     dataBinding.Ajax()
                       .OperationMode(GridOperationMode.Client)
                       .Select("AjaxGetAll", "ProcurementActions")
                       .Update("AjaxUpdate", "ProcurementActions")
                       .Delete("AjaxDelete", "ProcurementActions")
                       .Enabled(true)
        )
        .Editable(editing => 
            editing.Mode(GridEditMode.PopUp)
                   .TemplateName("EditProcurementAction")
            )
        .Pageable(paging => paging.PageSize(15))
        .Scrollable(scrolling => scrolling.Height(500))
        .Filterable()
        .Sortable()
%> 
```

我有一个弹出编辑器的 ASCX 模板。
![在此处输入图像描述](https://i.stack.imgur.com/FrvUD.png)

在填充网格之前，我必须扫描每一行的每个必填字段，并为每个需要注意的数据点嵌入一条消息。我在控制器中执行此操作，因为需要考虑几个条件逻辑。一旦我有一个 List<string> 消息，我会迭代 List<string> 并生成一个简单的 4 列 HTML 表，并将其作为我的 ViewModel 的一部分保存为行上的字符串。(Model.RowList[x].UpdateMessage) HTML 字符串如下所示：

```
Model.UpdateMessage = "
<table>
    <tr>
        <td colspan='4'>The following fields require additional data:</td>
    </tr>
    <tr>
        <td>Award Amount</td>
        <td>Comments</td>
        <td>Contract Number</td>
        <td>Number of Option Years</td>
    </tr>
    <tr>
        <td>Planned CA Responsible</td>
        <td>Actual CA Responsible</td>
        <td>Cost Price Analysis Date</td>
        <td>&nbsp;</td>
    </tr>
</table>"; 
```

我的弹出式模板基本上从以下内容开始：

```
<fieldset style="width: 1085px">
    <legend>Procurement Action</legend>
    <%= Html.HiddenFor(c => c.Id) %>    <=== WORKS ===
    <%= MvcHtmlString.Create(Model.UpdateMessage) %>    <=== DOES NOT WORK ===
    <%= Model.UpdateMessage.ToMvcHtmlString() %>    <=== DOES NOT WORK ===
    <%= Model.UpdateMessage %>    <=== DOES NOT WORK ===
    <%= Html.TextAreaFor(c => c.UpdateMessage) %>    <=== WORKS === 
```

*   显然，在 TextAreaFor 框中显示 HTML 是丑陋的，根本不是我需要/想要的。
*   尝试将字符串转换为 MvcHtmlString 的任何版本都不会呈现表格！<咕咕咕！/>
*   这真的应该很简单！

有任何想法吗？？？

TIA

-kb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T14:50:01.320

Telerik 网格似乎只加载和呈现弹出编辑器模板一次，使用空/默认模型。对于每个后续弹出的“编辑”命令，网格似乎*只对编辑器模板中的表单字段*进行自己的绑定（客户端），这解释了为什么您的 TextArea 和隐藏字段有效，但包括内联 HTML 则无效。

我相信解决此问题的唯一方法是为 OnEdit 声明 Telerik 客户端 (JavaScript) 事件，并使用该 JavaScript 事件处理程序动态填充 DIV 或其他容器的内容。

**在您视图中的网格声明中：**

```
.ClientEvents(e => e.OnEdit("ProcurementActionGrid_onEdit") 
```

**在`<script>`您的视图中的块或包含的 .js 文件中：**

```
function ProcurementActionGrid_onEdit(e) {
    var targetDiv = $(e.form).find('.injectUpdateMsgHtmlHere');
    targetDiv.html(e.dataItem.UpdateMessage);
} 
```

*（注意：上面显示的是使用 jQuery 快捷方式，但如果需要也可以不使用 jQuery）*

**最后，在您的 .ascx EditorTemplate 中：**

```
<div class="injectUpdateMsgHtmlHere"></div> 
```

# java - db2jcc4.jar 无效参数：未知列名

> ID：15981711
> 
> 赞同：5
> 
> 时间：2013-04-12T22:14:41.270
> 
> 标签：java, hibernate, jdbc, db2

我之前问过以下问题： [DB2 query Unknown column name ERRORCODE=-4460, SQLSTATE=null](https://stackoverflow.com/questions/15884794/db2-query-unknown-column-name-errorcode-4460-sqlstate-null)

从那以后，我们了解到从 db2jcc.jar (UNIVERSAL) 更改 db2jcc4.jar (JCC) 可以解决我们开发环境中的问题。问题是那个不起作用的是较新的。我们不想在没有真正正当理由的情况下倒退我们的司机。但是上面链接中的查询在新驱动中无效的原因我不明白。

我们知道它是那一列......如果我们通过强制一个空白将它从结果中取出，一切正常（除了我们没有得到数据）。该查询在其他环境中运行良好。

我看到一些帖子暗示此错误与结果集元数据 getColumn() 方法在 JDBC3 和 JDBC4 之间不一致有关。但是我们没有在这个查询中做任何在许多其他查询中没有做的特殊事情，至少据我们所知没有。

有谁知道这个查询可能会引发什么？是否有解决此行为的方法...某些设置或解决方法，或者新的驱动程序？

完整的例外：

> com.ibm.db2.jcc.a.SqlException：[jcc][10150][10300][4.3.111] 无效参数：未知>列名 FILTER_VALUE_DECODE。ERRORCODE=-4460, SQLSTATE=null at com.ibm.db2.jcc.a.dd.a(dd.java:660) at com.ibm.db2.jcc.a.dd.a(dd.java:60)在 com.ibm.db2.jcc.a.dd.a(dd.java:103) 在 com.ibm.db2.jcc.a.ib.a(ib.java:1674) 在 com.ibm.db2.jcc .a.yl.a(yl.java:1625) 在 com.ibm.db2.jcc.a.yl.getString(yl.java:1468) 在 com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getString(WSJdbcResultSet .java:2467) 在 org.hibernate.type.StringType.get(StringType.java:41) 在 org.hibernate.type.NullableType.nullSafeGet(NullableType.java:184) 在 org.hibernate.type.NullableType.nullSafeGet( NullableType.java:210) 在 org.hibernate.loader.custom.CustomLoader$ScalarResultColumnProcessor.extract(CustomLoader.java:501) 在 org.hibernate.loader。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T07:16:05.003

您可能正在使用 Hibernate 3.x。Hibernate 3.x 尝试通过它们`columnName`（即列`ResultSetMetaData`的原始名称的属性）来检索列的值，而 JDBC 要求（按规范）它们是由`columnLabel`（`AS`别名的属性，或者如果不是）来检索的t 指定了原始列名）。

`columnName`旧版本的 JDBC 并不完全清楚和之间的区别`columnLabel`，因此实现驱动程序要么为两个属性返回相同的值，要么期望`columnName`检索值。

IBM 更改了此行为以符合 DB2 9.5 驱动程序中的 JDBC 规范，请参阅[此文档](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.wn.doc/doc/i0052606.html)。要恢复到旧行为，您需要将连接属性指定`useJDBC4ColumnNameAndLabelSemantics`为`DB2BaseDataSource.NO`（其值为`2`）：

> **解决**
> 方法 如果您无法更改应用程序以符合新`ResultSetMetaData`行为，但需要 JDBC 4.0 的其他功能，请将`useJDBC4ColumnNameAndLabelSemantics`Connection 或 DataSource 属性设置为`DB2BaseDataSource.NO`(2) 以保留旧行为。

另一种选择是升级到更新版本的 Hibernate (4.x)，因为它（至少默认情况下）使用`columnLabel`检索值。

# ios - 如何从 NSStream 获取 EASession？

> ID：15981717
> 
> 赞同：0
> 
> 时间：2013-04-12T22:15:09.383
> 
> 标签：ios, objective-c, bluetooth, external-accessory

我们想通过蓝牙为一个外部配件打开 3 个插座。为此，我假设我应该使用相同的 openSessionForProtocol: 方法创建 3 个单独的 EASession，并使用相同的协议。

现在我遇到的问题是在 stream:handleEvent: 我想知道当前 NSStream 属于哪个 EASession，但看起来没有办法做到这一点。有没有人这样做过或知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:39:10.747

在这种情况下，我将创建一个从`NSStream`后面到 the的字典映射，`EASession`并使其可供您的`NSStream`s 代表使用。这是一个简单的解决方案，但比遍历所有`EASession`s 查看每个流以进行匹配要快一些。

另一种解决方案是为每个流设置单独的委托对象，但根据您的问题，这似乎不是您正在阅读的解决方案。

# .htaccess - 使用 htaccess 将无斜线重定向到斜线

> ID：15981719
> 
> 赞同：-1
> 
> 时间：2013-04-12T22:15:27.190
> 
> 标签：.htaccess

我需要将所有无斜杠的链接重定向到尾部斜杠，这是我的 htaccess 并且总是打开页面 whit 或 whitout，我只需要打开页面 whit slash。

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?artist=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?artist=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:19:45.000

在 的正下方`RewriteEngine On`，添加：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-zA-Z0-9_-]*[^/])$ /$1/ [L,R=301] 
```

# javascript - 跳转到并显示数组中的下一个对象

> ID：15981720
> 
> 赞同：0
> 
> 时间：2013-04-12T22:15:32.860
> 
> 标签：javascript, jquery

我一直避免在这里发布一些东西，因为我决心自己解决，但我碰壁了。

我真正使用 jQuery / Javascript 的时间很短，而且容量很小（基本动画等），我给自己设定了一个挑战（并帮助自己学习）将我相当无聊的投资组合网站转换为基本的“指向和点击”或基于文本（ish）的游戏以更具交互性/创造性的方式显示我的插图。

无论如何-切中要害。

我已经构建了一个包含不同区域信息的对象数组，我希望做的是根据区域信息将方向（北、南）与每个区域相关联。

数组：

```
var areas = { 

"outskirts" : {
"name" : "Dead city Outskirts",
"info" : "What you see around you",
"image" : "images/outskirts.jpg",

},
"path" : {
"name" : "A lonely Path",
"info" : "What you see around you",
"image" : "images/path.jpg"
},
"cliff" : {
"name" : "An Ultimatum",
"info" : "What you see around you",
"image": "images/cliff.jpg"

},
"city" : {
"name" : "Carcass of a City",
"info" : "What you see around you",
"image" : "images/city.jpg"
},
"building" : {
"name" : "Once a home",
"info" : "What you see around you",
"image" : "images/city.jpg"

}
}; 
```

例如，

您从郊区开始，并获得信息说您可以向北移动，然后您键入或单击一个显示“北”的项目，然后它切换到下一个区域，即“路径”。

然后根据路径填充所有信息（名称和信息等）

我想如果我向对象添加“出口”，例如：

“出口”：{“北”：“路径”，“南”：“悬崖”}，

这可能是我猜测您可以前往哪些方向的关键，或者可能是基于每个区域的方向的正确或错误陈述。

所以我真正要问的是：

如何在每个区域之间移动？（从 outskirts.name 更改为 path.name）我是否走在正确的道路上？（我的问题可能来自经验不足）

我感谢任何可以提前提出解决方案的人，非常感谢任何建议。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:26:51.187

假设您在悬崖边，然后单击“向北”按钮。执行的代码可能如下所示：

```
var curLocationName = "cliff";
var direction = "north";

// Get our new location
var newLocationName = areas[curLocationName].exits[direction];

if(newLocationName === undefined) {
   console.log("You can't go that way!");
} else {
   console.log("You just went to the " + newLocationName);
}

var newLocation = areas[newLocationName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:24:20.783

您的设计方式非常简单，适用于有限的情况。例如，您只能为北方的每个节点指定一个城市。如果两个城市位于 A 市以北，会发生什么情况。

但除此之外，它是可行的。因此，当您单击 Building-North 时，您可以访问

```
areas[areas[["building"]]["north"]]["name"] 
```

必须进行检查以确保值不是未定义的。

```
var areas = { 

"outskirts" : {
"name" : "Dead city Outskirts",
"info" : "What you see around you",
"image" : "images/outskirts.jpg",

},
"path" : {
"name" : "A lonely Path",
"info" : "What you see around you",
"image" : "images/path.jpg"
},
"cliff" : {
"name" : "An Ultimatum",
"info" : "What you see around you",
"image": "images/cliff.jpg"

},
"city" : {
"name" : "Carcass of a City",
"info" : "What you see around you",
"image" : "images/city.jpg"
},
"building" : {
"name" : "Once a home",
"info" : "What you see around you",
"image" : "images/city.jpg",
"north" : "city"
}
};
alert("JSON.newPrice:"+areas[areas[["building"]]["north"]]["name"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:29:58.463

据我了解，您想做这样的事情：

```
var area = areas['building']; // starting point

do {

   showCurrentArea(area)

   var direction = getInput(); // returns "north", "south", "west", "east", etc.

   area = moveFromArea(area, direction);

} while(true) 
```

where`areas`是这样定义的：

```
var areas = {
areaID1: {name: '...', info:'...', image:'...', exits: { north: 'areaID1', south: 'areaID2', ...} }
areaID2: {name: '...', info:'...', image:'...', exits: { north: 'areaID2', south: 'areaID3', ...} }
areaID3: {name: '...', info:'...', image:'...', exits: { north: 'areaID2', south: 'areaID1', ...} },

} 
```

将在哪里`moveFromArea()`定义：

```
function moveFromArea(fromArea, direction) {
    var areaName = fromArea.exits[direction]; 
    if ( !areaName){
        throw "Cannot go there";
    }
    return areas[areaName];
} 
```

# android - HTTP 连接

> ID：15981729
> 
> 赞同：0
> 
> 时间：2013-04-12T22:16:15.157
> 
> 标签：android, httpwebrequest

我正在尝试使用我的登录名和密码来编写一个示例 http 连接。

这是我的代码：

```
 String urlModify ="http://app-vantage.appspot.com/api4/modified";
        String username = java.util.UUID.randomUUID().toString();
        Log.e(getClass().getName(), "username = "+username);
        String key ="FU2ra88xuhuf6-#At+aseQub8f8ebr$sweh$thu!Ep?*frusAvEdRamuw9thubr";
        String password = "";
        try {
            password = AeSimpleSHA1.SHA1(username + key);
            Log.e(getClass().getName(), "password = "+password);
        } catch (NoSuchAlgorithmException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        try {
            URL url = new URL(urlModify);
            URLConnection urlConnection = url.openConnection();
            urlConnection.setRequestProperty("Authentication", "Basic " + android.util.Base64.encodeToString((username + ":" + password).getBytes(), android.util.Base64.DEFAULT));

            urlConnection.connect();
            Log.e(getClass().getName(), "content ="+urlConnection.getContent().toString());
            InputStream in = new BufferedInputStream(urlConnection.getInputStream());
            try {
                String stream = readStream(in);
                Log.e(getClass().getName(), "stream = "+stream);
            }finally {

                in.close();

            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

我遇到了一个例外：

```
04-12 23:04:28.588: W/System.err(21253): java.io.FileNotFoundException: http://app-vantage.appspot.com/api4/modified
04-12 23:04:28.618: W/System.err(21253):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
04-12 23:04:28.618: W/System.err(21253):    at java.net.URLConnection$DefaultContentHandler.getContent(URLConnection.java:1018)
04-12 23:04:28.618: W/System.err(21253):    at java.net.URLConnection.getContent(URLConnection.java:199)
04-12 23:04:28.623: W/System.err(21253):    at com.sectov.connection.sdk.WebServicesManager.checkLastContentModification(WebServicesManager.java:105)
04-12 23:04:28.623: W/System.err(21253):    at com.sectov.connection.fragments.ConnectionSectionFragment.onActivityCreated(ConnectionSectionFragment.java:49)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1468)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
04-12 23:04:28.623: W/System.err(21253):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
04-12 23:04:28.623: W/System.err(21253):    at android.view.View.measure(View.java:15562)
04-12 23:04:28.623: W/System.err(21253):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5109)
04-12 23:04:28.623: W/System.err(21253):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-12 23:04:28.623: W/System.err(21253):    at android.view.View.measure(View.java:15562)
04-12 23:04:28.623: W/System.err(21253):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
04-12 23:04:28.623: W/System.err(21253):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
04-12 23:04:28.623: W/System.err(21253):    at android.view.View.measure(View.java:15562)
04-12 23:04:28.623: W/System.err(21253):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5109)
04-12 23:04:28.628: W/System.err(21253):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
04-12 23:04:28.628: W/System.err(21253):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1038)
04-12 23:04:28.628: W/System.err(21253):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:576)
04-12 23:04:28.628: W/System.err(21253):    at android.view.View.measure(View.java:15562)
04-12 23:04:28.628: W/System.err(21253):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5109)
04-12 23:04:28.628: W/System.err(21253):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
04-12 23:04:28.628: W/System.err(21253):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
04-12 23:04:28.628: W/System.err(21253):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
04-12 23:04:28.628: W/System.err(21253):    at android.view.View.measure(View.java:15562)
04-12 23:04:28.628: W/System.err(21253):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5109)
04-12 23:04:28.628: W/System.err(21253):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-12 23:04:28.628: W/System.err(21253):    at android.view.View.measure(View.java:15562)
04-12 23:04:28.628: W/System.err(21253):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5109)
04-12 23:04:28.628: W/System.err(21253):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-12 23:04:28.628: W/System.err(21253):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2397)
04-12 23:04:28.628: W/System.err(21253):    at android.view.View.measure(View.java:15562)
04-12 23:04:28.628: W/System.err(21253):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1987)
04-12 23:04:28.628: W/System.err(21253):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1228)
04-12 23:04:28.633: W/System.err(21253):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1401)
04-12 23:04:28.633: W/System.err(21253):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1121)
04-12 23:04:28.633: W/System.err(21253):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4598)
04-12 23:04:28.633: W/System.err(21253):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
04-12 23:04:28.633: W/System.err(21253):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
04-12 23:04:28.633: W/System.err(21253):    at android.view.Choreographer.doFrame(Choreographer.java:525)
04-12 23:04:28.633: W/System.err(21253):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
04-12 23:04:28.638: W/System.err(21253):    at android.os.Handler.handleCallback(Handler.java:615)
04-12 23:04:28.638: W/System.err(21253):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-12 23:04:28.638: W/System.err(21253):    at android.os.Looper.loop(Looper.java:137)
04-12 23:04:28.638: W/System.err(21253):    at android.app.ActivityThread.main(ActivityThread.java:4921)
04-12 23:04:28.638: W/System.err(21253):    at java.lang.reflect.Method.invokeNative(Native Method)
04-12 23:04:28.638: W/System.err(21253):    at java.lang.reflect.Method.invoke(Method.java:511)
04-12 23:04:28.638: W/System.err(21253):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
04-12 23:04:28.638: W/System.err(21253):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
04-12 23:04:28.638: W/System.err(21253):    at dalvik.system.NativeStart.main(Native Method)
04-12 23:04:57.253: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:57.253: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:57.253: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:57.258: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:57.258: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:57.258: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:57.258: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:57.258: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:57.263: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:57.263: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:57.263: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:57.268: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:57.268: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:57.268: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:57.268: W/IInputConnectionWrapper(21253): beginBatchEdit on inactive InputConnection
04-12 23:04:57.268: W/IInputConnectionWrapper(21253): endBatchEdit on inactive InputConnection
04-12 23:04:57.268: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:57.268: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:57.268: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:57.273: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:57.278: W/IInputConnectionWrapper(21253): beginBatchEdit on inactive InputConnection
04-12 23:04:57.278: W/IInputConnectionWrapper(21253): endBatchEdit on inactive InputConnection
04-12 23:04:58.653: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.653: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.658: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:58.658: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:58.658: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.658: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.783: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.783: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.783: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:58.783: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:58.783: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.783: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.783: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:58.783: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:58.788: W/IInputConnectionWrapper(21253): beginBatchEdit on inactive InputConnection
04-12 23:04:58.788: W/IInputConnectionWrapper(21253): endBatchEdit on inactive InputConnection
04-12 23:04:58.788: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.788: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.788: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:58.788: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:58.788: W/IInputConnectionWrapper(21253): beginBatchEdit on inactive InputConnection
04-12 23:04:58.788: W/IInputConnectionWrapper(21253): endBatchEdit on inactive InputConnection
04-12 23:04:58.818: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.818: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.818: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:58.818: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:58.823: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.823: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.823: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.828: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.828: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:58.828: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:58.828: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.828: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.833: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:58.833: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:58.833: W/IInputConnectionWrapper(21253): beginBatchEdit on inactive InputConnection
04-12 23:04:58.833: W/IInputConnectionWrapper(21253): endBatchEdit on inactive InputConnection
04-12 23:04:58.833: W/IInputConnectionWrapper(21253): getExtractedText on inactive InputConnection
04-12 23:04:58.833: W/IInputConnectionWrapper(21253): getTextBeforeCursor on inactive InputConnection
04-12 23:04:58.833: W/IInputConnectionWrapper(21253): getSelectedText on inactive InputConnection
04-12 23:04:58.833: W/IInputConnectionWrapper(21253): getTextAfterCursor on inactive InputConnection
04-12 23:04:58.838: W/IInputConnectionWrapper(21253): beginBatchEdit on inactive InputConnection
04-12 23:04:58.838: W/IInputConnectionWrapper(21253): endBatchEdit on inactive InputConnection 
```

我不明白这里有什么问题？欢迎任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:21:25.267

似乎是权限问题..您是否在清单中设置了应用程序权限以使用互联网？

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

并使用互联网

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# mysql - How do I join multiple columns in one table to a column in another table

> ID：15981730
> 
> 赞同：2
> 
> 时间：2013-04-12T22:16:17.563
> 
> 标签：mysql, sql

I am quite new to SQL, most of my other questions I have been able to answer by searching but this one seemed harder to find something similar. I did see [this](https://stackoverflow.com/questions/769953/joining-multiple-columns-in-one-table-to-a-single-column-in-another-table) and [this](https://stackoverflow.com/questions/7930185/sql-join-on-two-fields-in-one-table) which seemed similar, but I was not able to find an answer although I think it should be straightforward.

To simplify my database, I am trying to join two of my tables into a view.

The one table (a_main) has a mapping between a user ID (UID) and their user name (name) The second table (log_points) has a number of columns including two users (user1 and user2). The two users are identified by user ID, but I would like to show their user names in the view.

Example

```
SELECT name, UID FROM a_main 
```

returns something like

`Jeff 1234`

```
SELECT date, user1, user2 FROM log_points 
```

returns

`2013-03-22 1222 1234`

I would like the view to return the users by their name instead of id.

If it was just one user, I could do a straightforward JOIN

```
SELECT date, a_main.name FROM log_points 
INNER JOIN a_main ON log_points.user1 = a_main.UID 
```

but I can't figure out how to also join user2 to a_main.UID.

Any suggestions would be greatly appreciated! I am using MySQL.

EDIT found the answer [here](https://stackoverflow.com/questions/9114781/join-multiple-columns-from-one-table-to-single-column-from-another-table?rq=1).

```
SELECT t1.name AS person1, t2.name AS person2
FROM log_points t
INNER JOIN a_main t1 ON t1.UID = t.user1
INNER JOIN a_main t2 ON t2.UID = t.user1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:15:15.277

Try this:

```
SELECT t1.name AS person1, t2.name AS person2
FROM log_points t
JOIN a_main t1 ON t1.UID = t.user1
JOIN a_main t2 ON t2.UID = t.user1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T06:41:28.153

Try this

```
 SELECT date, (SELECT name FROM a_main where UID=user1)as user1, (SELECT name FROM a_main where UID=user2)as user2 FROM log_points. 
```

Can any give insight on performance both queries.

# django - 如何让 django-cron 自动工作

> ID：15981735
> 
> 赞同：7
> 
> 时间：2013-04-12T22:17:01.347
> 
> 标签：django, cron, crontab, cron-task, django-cron

我正在努力`django-cron`工作，但事实并非如此。我按照[此处](https://pypi.python.org/pypi/django-cron/0.2.8)的说明设置了我的 cron，但问题是我的作业仅在我`python manage.py runcrons`在命令行上键入时运行，并且该作业不是每 5 分钟运行一次。我不知道还能做什么。我已经阅读了其他文件`crontabs`，`chronograph`但很困惑。我是否将 crontabs 与 cron 或 chronograph 一起安装，或者仅使用 django-cron 才能使 cron 正常工作。另外，我如何让我的工作自动运行。[在此处](https://pypi.python.org/pypi/django-cron/0.2.8)的文档中，我阅读了`Now everytime you run the management command python manage.py runcrons all the crons will run if required. Depending on the application the management command can be called from the Unix crontab as often as required. Every 5 minutes usually works for most of my applications.`. 这是什么意思。我在这里想念什么。我迷路了。帮助

设置.py

```
CRON_CLASSES = (
"myapp.views.MyCronJob",
)

INSTALLED_APPS = (

'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'django_cron',

'django.contrib.admin',
'django.contrib.admindocs',
'myapp',

) 
```

视图.py

```
from django_cron import CronJobBase, Schedule
class MyCronJob(CronJobBase):
RUN_EVERY_MINS = 10 # every 10 min

schedule = Schedule(run_every_mins=RUN_EVERY_MINS)
code = 'my_app.my_cron_job'    # a unique code

def do(self):
    print "10 min Cron"
    theJob() 
```

我应该提一下，我在 Windows 平台上使用 pycharm 来运行 django ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:08:00.293

您的问题的根源导致操作系统。Webserver 不是那种调用你的 cronjobs 的守护进程，它只是处理 web 请求。要在 Windows 上调用定期任务，您需要使用 Windows 任务计划程序：

[什么是 Windows 版本的 cron？](https://stackoverflow.com/questions/132971/what-is-the-windows-version-of-cron)

解决问题的其他方法是在 celery beat 模式下启动 celery deaemon。

[http://celeryproject.org/](http://celeryproject.org/)

[http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)

这是一种更难的方法，如果您有非常简单的应用程序，则不需要使用 celery。但是在很多情况下，队列是最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-07T16:49:40.627

改为安装 django-crontab。

```
pip install django-crontab 
```

更改您的 settings.py 以包含 django-crontab

```
INSTALLED_APPS = (
'django_crontab',
...
)

CRONJOBS = [
('*/5 * * * *', 'myproject.cron.my_scheduled_job')
] 
```

在您的应用程序目录中创建一个 cron.py 文件

```
def my_scheduled_job():
   #do something 
```

每次包含或更新您的 cron 作业时运行此程序。

```
python manage.py crontab add 
```

运行你的本地服务器来测试你的 cron：

```
python manage.py runserver 
```

你完成了！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-18T17:22:25.210

您可以以编程方式执行“runcrons”，如下所示：

```
from django.core.management import call_command
call_command('runcrons') 
```

例如，我将以上几行放在我的 wsgi.py

# c++ - 使用模板在类中定义静态数组

> ID：15981740
> 
> 赞同：1
> 
> 时间：2013-04-12T22:17:05.260
> 
> 标签：c++, templates

我认为这真的很容易，但我还没有得到这个工作。我想使用模板来定义类的静态无符号字符数组数据成员的大小。我在我的两个函数上使用模板来定义正在使用的数据类型，并且效果很好。我在想这样的事情：

```
template<unsigned S>
class Buff
{
private:
    static unsigned char buffer[S];
    int offset;
public:
    pAllocBuff(){offset=0;};
    template <typename T>
    T* New(T, int);
    template <typename T>
    T* New(T);

}; 
```

这个想法是 New(T, int) 从缓冲区为数据类型数组分配内存。

IE：`char* i = myBuff.New<char>('\0',15); //allocate 15 byte array to i from buffer and initialized to '\0'`

或 New(T) 从缓冲区为单一数据类型分配内存

IE：`string* j = myBuff.New<string>("Hello Stack Overflow!"); //allocate memory to string object j from buffer and initialize`

如果我用 BUFFSIZE 和 #define BUFFSIZE 1024*1024 （或其他）替换“S”，一切都很好。但我想这样做，以便可以为不同的 Buff 实例定义缓冲区的大小。所以，比如：

`Buff<1024*1024> myBuff;`

当我这样做时，我的类中的所有成员函数都被标记为缺少模板参数，即使 S 与它们无关。

编辑：我得到了这个与下面的建议一起工作。我想我很困惑为什么

'模板'

需要在类中的每个函数之上，即使在该函数中没有使用 S。这只是需要，因为它已经结束了课程吗？谢谢你的知识！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:25:07.673

无论如何，这对我来说很好：http: **[//liveworkspace.org/code/3L72Lq$0](http://liveworkspace.org/code/3L72Lq%240)**

```
template<unsigned S>
class Buff
{
private:
    static unsigned char buffer[S];
    int offset;
public:
    Buff() : offset() {}
    template <typename T> T* New(T, int);
    template <typename T> T* New(T);
};   

template<unsigned S>
/*static*/
    unsigned char Buff<S>::buffer[S] = {0};

template<unsigned S>
    template <typename T> T* Buff<S>::New(T, int)
{
    return nullptr; // TODO
}

template<unsigned S>
    template <typename T> T* Buff<S>::New(T)
{
    return nullptr; // TODO
}

int main()
{
    Buff<(1u<<12)> one;
    Buff<(1u<<14)> two;
} 
```

我确信这是类模板内的成员函数模板的一个小语法错误，定义了类外（您没有显示）。

# html - 在画廊 html/css 中保持图像比例

> ID：15981741
> 
> 赞同：3
> 
> 时间：2013-04-12T22:17:09.167
> 
> 标签：html, css

我正在为电影摄影师制作作品集。他们还进行大量摄影，并且希望他们的图像缩略图保持成比例，以便图像在缩小时不会失去任何美感。

我正在寻找的是一种使图像保持其原始比例的方法，但可以缩放它们并将它们放入容器 div 中。（具有设定的宽度和高度）

我基本上什么都试过了。包括按比例缩放图像的传统方式：

```
background:url(../images/banner.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

这非常适合缩放，但它仍然会切断图像。（这是我试图避免的）

我一直在像 tweeker 一样搜索冰毒，但找不到任何可以解决这个问题的东西。可能是我正在寻找无法以我想要的方式解决的东西。

无论如何.. tl;博士：

我希望缩略图保持其原始图像比例，但要小约 3 倍并适合容器 div。（具有固定的宽度和高度）有人对如何做到这一点有任何想法吗？

这是我正在努力实现的一个[例子。](http://codecanyon.net/item/photomosaic/full_screen_preview/232406)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:23:47.117

您是否尝试过根据您的 div 和图像比例将宽度设置为某个百分比..只需调用 javascript 来检查图像和您的 div 的宽度，然后相应地设置图像的 css 属性“宽度：”以使用脚本和高度作为自动要求百分比.....反之亦然，如果高度更高，但如果设置自动不起作用，请尝试手动设置比率，例如

```
function set()
{
var img=document.getElementById('anyimg');
var iwidth=img.width;
var iheight=img.height;
var wr,hr;
var mydiv = document.getElementById('anydiv');
divH=mydiv.height;
divW=mydiv.width;
wr=iwidth/divW;
hr=iheight/divH;
if(hr>wr)
{
image.height=divH;
image.width=iwidth/hr;
else
{
image.height=divH;
image.width=iwidth/hr;
}} 
```

# android - asynctask 运行的活动读取 sharedpreferences 不正确？

> ID：15981742
> 
> 赞同：0
> 
> 时间：2013-04-12T22:17:12.913
> 
> 标签：android, android-asynctask, sharedpreferences

我有一个奇怪的问题，已经让我头痛了一周。

我使用某种切换器来更改操作栏中项目的标题并确保正确设置标题。为了保存这个项目的状态，我使用 sharedpreferences。

在应用程序的其他部分，我使用 asynctask。问题是在 asynctask 运行时，BaseActivity 读取了错误的操作栏设置值，因此在 asynctask 完成之前它的标题不正确。

我为你准备了这个错误的例子。奇怪的是，如果我在 onPostExecute 方法中将活动从 ExtendActivity 更改为 RefreshActivity，令人惊讶的是它确实读取并设置了正确的标题。当然，我不能在实际应用中做到这一点。

基本活动：

```
 public class BaseActivity extends Activity {

    public boolean menub;
    public Menu menu;
    public SharedPreferences pref;

    @Override 
    public void onCreate(Bundle savedInstanceState) {
         this.pref = this.getPreferences(Context.MODE_PRIVATE);
         super.onCreate(savedInstanceState);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu, menu);
        this.menu = menu;
        this.menub = pref.getBoolean("menub", true);
        _switch(false);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_refresh:
                startActivity(new Intent(this, RefreshActivity.class));
                return true;
            case R.id.menu_test:
                _switch(true);
            default:
                return false;
        }
    }
    public void _switch(boolean swtch) {
        String n;
        if (swtch) {
            SharedPreferences.Editor e = pref.edit();
            if (menub) {
                e.putBoolean("menub",false);
                n="A";
            }
            else {
                e.putBoolean("menub", true);
                n="B";
            }
            e.apply();
        }
        else {
            if (menub) n="B";
            else n="A";
        }
        menu.findItem(R.id.menu_test).setTitle(n);      
    }
} 
```

刷新活动：

```
public class RefreshActivity extends BaseActivity {

    protected ImageLoader imageLoader = ImageLoader.getInstance();
    public Activity thisActivity;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        thisActivity=this;  
        Bundle b = getIntent().getExtras();
        if (b==null) {
            load();
        }
        else {
            if (b.containsKey("loaded")) {
                new _async().execute();
            }
        }
    }
    private class _async extends AsyncTask<Object, Void, Integer> {
        @Override
        protected Integer doInBackground(Object... params) {
            try {Thread.sleep(2000);} catch (InterruptedException e) {}
            return 1;
        }
        @Override
        protected void onPostExecute(Integer response) {
            Intent intent = new Intent(thisActivity,ExtendActivity.class);
            intent.putExtra("id_folder", 0);
            startActivity(intent); 
            thisActivity.finish();
        }
     }
    public void load() {
        Intent intent = new Intent(this,RefreshActivity.class);
        intent.putExtra("loaded",true);
        startActivity(intent); 
        ((Activity) this).finish();
    }
} 
```

扩展活动：

```
public class ExtendActivity extends RefreshActivity {

} 
```

菜单.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu_refresh"
        android:title="Refresh"
        android:showAsAction="ifRoom|withText"/>

        <item android:id="@+id/menu_test"
              android:title="A"
              android:showAsAction="ifRoom|withText" />
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:53:14.323

`getPreferences()`可能很棘手，它假定您只希望您的 SharedPreferences 文件由一个 Activity 使用。（如果您需要详细信息，请查看[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/app/Activity.java#Activity.getPreferences%28int%29)。）我建议使用[`getSharedPreferences()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getSharedPreferences%28java.lang.String,%20int%29)一致的文件名。这样，ExtendActivity、RefreshActivity 和 BaseActivity 都将从同一个文件中读取。

# vb.net-2010 - ActiveReports 中的动态图表

> ID：15981748
> 
> 赞同：0
> 
> 时间：2013-04-12T22:17:41.607
> 
> 标签：vb.net-2010, activereports, componentone

我目前正在使用 ActiveReport 开发一个需要显示图表的报告。将显示的图表数量是基于数据动态的.... 报告将像这样布置。

*   帐号/名称 [组标题]
*   部分账户详情[详情]
*   帐户名称和图表（每个明细行一个）[组页脚]

正如我上面所说，每个组的详细信息和图表的内容可能不同。

我已经读到必须在 _ReportStart 中创建动态报告，但如果这样做，我是否将正确的图表放入正确的组（帐号）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:50:31.010

有点不清楚你到底想做什么以及问题是什么。据我了解，组页脚中有一组图表，您希望根据数据隐藏和显示其中一些图表。

如果您只想隐藏和显示其中的一部分，那么您可以在设计器中静态创建报表，并在 GroupFooter Section 的 Format 事件中，您可以相应地隐藏或显示图表。

但是，如果完全不清楚组页脚中有多少图表，那么您应该使用子报表。设计一个包含所需图表模板的报表，然后将该子报表放在父报表的组页脚中。使用子报表将允许您完全更改每个组的图表/控件。

如果您需要更多帮助，请评论并解释更多关于图表中的确切内容以及根据数据发生的变化。如果不了解更多关于你在做什么、你尝试过什么以及你遇到了什么确切问题，就很难给出更多细节。

# javascript - jQuery toggleclass 通过信息形成一个数组

> ID：15981752
> 
> 赞同：0
> 
> 时间：2013-04-12T22:18:11.257
> 
> 标签：javascript, jquery, html, arrays, toggleclass

我正在制作一个 jQuery 棋盘游戏，我需要在棋盘周围移动一个计数器。我可以使用硬编码，但我需要能够根据人在骰子上滚动的内容（随机数生成）来做到这一点。所有方块都有自己的 id，所有这些 id 都在一个数组中。我已经设法让代码调用正确的正方形 id，但我需要的是能够告诉我的 jquery 是需要切换其类的那个。

```
$(document).ready(function(){
$(moveto).toggleClass('circle1');
}); 
```

正如您将从代码中看到的那样，需要更改的部分是 jQuery 中位于底部的选择器（当前称为 moveto），它需要与 var moveto 输出的内容相匹配。

对不起，如果这措辞有点奇怪，如果您需要任何澄清，请询问:)

jsfiddle：http: [//jsfiddle.net/WdSDz/](http://jsfiddle.net/WdSDz/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:38:25.280

这就是你所追求的：

```
$('input').click(function(){
    var dice = Math.floor(1+Math.random()*6);
    $('#youthrew').text("You threw a " + dice);
    moves = moves + dice;
    $('div').removeClass('circle1');
    $(titles[moves]).addClass('circle1');
}); 
```

[http://jsfiddle.net/WdSDz/7/](http://jsfiddle.net/WdSDz/7/) ？

# delphi - delphi 切换命令页面

> ID：15981754
> 
> 赞同：0
> 
> 时间：2013-04-12T22:18:28.667
> 
> 标签：delphi, command, delphi-7

首先，我想提前为标题的糟糕程度道歉，但我真的需要你的帮助。

首先，让我解释一下我所说的切换命令页面的含义：假设我们有 2 个按钮。然后我们在单击时命令按钮 1 执行：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
Showmessage('Hi');
end;

end. 
```

好的，现在当我在 button2 上单击一次时，我希望 button1 在单击其他内容时执行（更改 button1 的命令），例如`showmessage ('My name is Monster')`。

我不知道这个方法是怎么调用的，但是它在一些游戏制作应用程序中使用如下（不是这样，而是类似）：

```
**When** button1 clicked then showmessage ('Hi');
**When** button2 clicked **Then** button1 switch page 2--> Showmessage('My name is')
**When** button3 clicked **Then** button1 switch page 1--> Showmessage('Hi') 
```

我希望我已经帮助你理解我的要求，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:34:07.810

正如 Sertac Akyuz 所提到的，只需将另一个事件分配给您的按钮。

一个透支的例子可能是：

```
unit DynamicEvents;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TNotifyClass=Class
    Constructor Create(const msg:String);overload ;
    Constructor Create(EV:TNotifyEvent);overload;
    Procedure NotifyEvent(Sender:TObject);
  private
    FMessage:String;
    FNotifyEvent:TNotifyEvent;
  End;

  TNotifyList=Class
    Constructor Create(arr:Array of String);
    Destructor Destroy;override;
    private
    FList:TList;
    FLastAccessedIndex:Integer;
    function GetEvent(Index: Integer): TNotifyEvent;
    public
    Property Events[Index:Integer]:TNotifyEvent read GetEvent; default;
    Procedure Add(NC:TNotifyClass);
    published

    Property LastAccessedIndex:Integer read FLastAccessedIndex;
  End;

  TForm6 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    procedure Button1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private-Deklarationen }
    FNotifyList:TNotifyList;
    procedure FormCloseEV(Sender: TObject);
  public
    { Public-Deklarationen }
  end;

var
  Form6: TForm6;

implementation

{$R *.dfm}

{ TNotifyList }

procedure TNotifyList.Add(NC: TNotifyClass);
begin
  Flist.Add(NC);
end;

constructor TNotifyList.Create(arr: array of String);
var
 i:Integer;
begin
   FList := TList.Create;
   FLastAccessedIndex := -1;
   for I := Low(arr) to High(arr) do
     FList.Add(TNotifyClass.Create(arr[i]));
end;

destructor TNotifyList.Destroy;
var
 i:Integer;
begin
   for I := 0 to Flist.Count -1  do
     TNotifyClass(FList[i]).Free;
   Flist.Free;
  inherited;
end;

function TNotifyList.GetEvent(Index: Integer): TNotifyEvent;
begin
   if (Index>=0) and (Index<Flist.Count) then
    begin
      FLastAccessedIndex := Index;
    end
   else
    begin
      if Flist.Count>0 then
        begin
         FLastAccessedIndex := 0;
        end
      else
        begin
         FLastAccessedIndex := -1;
        end;
    end;
    if FLastAccessedIndex >- 1 then Result := TNotifyClass(FList[FLastAccessedIndex]).NotifyEvent;
end;

procedure TForm6.Button1Click(Sender: TObject);
begin
   Button2.OnClick := FNotifyList[FNotifyList.LastAccessedIndex + 1];
end;

{ TNotifyClass }

constructor TNotifyClass.Create(const msg: String);
begin
   FMessage := msg;
end;
constructor TNotifyClass.Create(EV:TNotifyEvent);
begin
   FNotifyEvent := EV;
end;

procedure TNotifyClass.NotifyEvent(Sender: TObject);
begin
   if Assigned(FNotifyEvent) then FNotifyEvent(Sender)
   else Showmessage(FMessage);
end;

procedure TForm6.FormCreate(Sender: TObject);
begin
  ReportMemoryLeaksOnShutDown := true;
  FNotifyList:=TNotifyList.Create(
                ['Message 1'
                ,'Message 2'
                ,'Message 3'
                ,'Message 4'
                ,'Message 5'
                ,'Message 6'
                ,'Message 7'
                ,'Message 8'
                ,'Message 9'
                ,'Message 10']
                );
  FNotifyList.Add(TNotifyClass.Create(FormCloseEV));
end;

procedure TForm6.FormCloseEV(Sender: TObject);
begin
  if MessageDLG('Close',mtConfirmation,[mbyes,mbCancel],0)=idYes then Close;

end;

procedure TForm6.FormDestroy(Sender: TObject);
begin
  FNotifyList.Free;
end;

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:32:52.250

最简单的方法是使用 TActionList：

1.  在表单上放置 3 个 TButton
2.  在您的表单上放置一个 TActionList。
3.  为您希望 Button1 执行的每个命令添加一个新操作。
4.  如果要在设计时开始，**请在 Button1 的 Action 属性中指定 Action1。**这也可以在运行时完成。
5.  Button2：在其 onClick 事件中，将**action2 分配给按钮 1。**
6.  Button3：在其 onClick 事件中，将**action3 分配给按钮 1。**

    **等等。**

您的表单代码将如下所示：

**//action.onExecute 的：**

```
procedure TForm1.Action1Execute(Sender: TObject);
begin
   DoStuff;
end;

procedure TForm1.Action2Execute(Sender: TObject);
begin
  DoMoreStuff
end;

procedure TForm1.Action3Execute(Sender: TObject);
begin
 DoOtherStuff;
end; 
```

**//Button.onClick 的：**

```
procedure TForm1.Button2Click(Sender: TObject);
begin
 Button1.Action:=Action2;
end;

procedure TForm1.Button3Click(Sender: TObject);
begin
  Button1.Action:=Action3;
end; 
```

**//你的“命令”：**

```
procedure TForm1.DoStuff;
begin
  showmessage('hi');
end;

procedure TForm1.DoMoreStuff;
begin
 showMessage('red');
 Self.Color:=clRed;
end;

procedure TForm1.DoOtherStuff;
begin
  showMessage('black');
  self.Color:=clBlack;
end; 
```

# ruby-on-rails - Ruby on Rails 中的 JSON 格式显示

> ID：15981759
> 
> 赞同：1
> 
> 时间：2013-04-12T22:18:41.323
> 
> 标签：ruby-on-rails, ruby, json, ruby-on-rails-3, formatting

我已经完成了 PHP，并且能够使用 JSON 格式很好地显示

```
<pre></pre> 
```

现在我想弄清楚你将如何在 Ruby on Rails 中应用类似的东西？

在我的意见文件中，我有这个：

```
<%= @recent_media_items.to_json %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T22:20:42.547

```
<pre><%= @recent_media_items.to_json %></pre> 
```

? `<pre>`是 HTML，不是 PHP...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T04:12:35.617

我建议尝试[CodeRay gem](https://github.com/rubychan/coderay)。它会为你做所有的工作。只需将您的 JSON 发送给它，您就会得到漂亮的彩色输出：

```
html = CodeRay.scan("{\"Hello\":\"world!\"}", :json).div 
```

或者在你的情况下

```
<%= CodeRay.scan(@recent_media_items.to_json, :json).div %> 
```

# java - 如何计算循环java的迭代次数

> ID：15981761
> 
> 赞同：0
> 
> 时间：2013-04-12T22:18:53.290
> 
> 标签：java, if-statement, for-loop

我必须实现这个方法来给出数组“planeta”中的行星数量。

```
public int size() {

    int size=planeta.length-1;

    for (int k=planeta.length-1;k>0;k--){
        if (planeta[k].name().equals(noPlanet))
        size--;
    }
    return size;

} 
```

它返回“planeta.length-1”的值，而不是它应该返回的值（例如，我成功添加了 2 个行星，它总是返回我在初始化时赋予 size 的值）。我究竟做错了什么？

注意：我用 NP 初始化数组“planeta”，这意味着没有行星。当我添加新行星时，它们会转到数组“planeta”中的第一个空闲位置，从 0 开始。请帮忙！！！！！谢谢你=)

addPlanet 方法： public void addPlanet(String planetName, BigInt x, BigInt y, BigInt z) {

```
 if(!planetExists(planetName) && !complete()){

        SpacePoint newSP= new SpacePoint(x,y,z);
        Planet newPlanet= new Planet(planetName,newSP);

        s=this.size();
        planeta[s]=newPlanet;

    }

} 
```

我如何初始化数组“planeta”： private Planet noPlanet=new Planet("NP");

```
/** 
 * Creates a new Galaxy with no associated Planets and a given name
 * @param name the name of the Galaxy
 */
public Galaxy(String name) {

    this.name=name;

    //if the galaxy has no planets in it,it's array if filled with planet NP-No Planet
    for (int i=0;i<planeta.length;i++)
        planeta[i]=noPlanet;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:16:17.103

最好使用`null`s 而不是特殊值对象，即`new Planet("NP")`. 我想这是你正在寻找的东西：

```
public class Galaxy {
  // Empty array of size = 10, i.e. { null, null, .. , null }
  private Planet[] planeta = new Planet[10];

  public Galaxy(String name) {
    this.name = name;
  }

  public int size() {
    int size = 0;

    for (int k = 0; k < planeta.length; k++) {
      // Is there a planet or is it empty?
      if (planeta[k] != null) {
        // There's a planet.
        size++;
      }
    }
    return size;
  }

  public boolean planetExists(String planetName) {
    // Go through the array looking for that planet...
    for (int k = 0; k < this.size(); k++) {
  // NOTICE that we're going only through the non-empty array elements,
      // but we'll check for null either way.
      if (planeta[k] != null && planeta[k].name().equals(planetName)) {
        // Found it.
        return true;
      }
    }

    // Didn't find the planet.
    return false;
  }

  public void addPlanet(String planetName, BigInt x, BigInt y, BigInt z) {
    if (!planetExists(planetName) && !complete()) {
      SpacePoint newSP = new SpacePoint(x, y, z);
      Planet newPlanet = new Planet(planetName, newSP);

      int position = this.size();
      planeta[position] = newPlanet;
    }
  }
} 
```

至于调试，大多数开发环境（IDE）都有`Run > Debug`命令`Run > Run`。首先，您需要设置一个断点，通常是`Run > Toggle Breakpoint`在选定的行上。使用`Run > Step into`和`Run > Step over`命令逐行进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:03:12.757

这行得通！（至少在我的情况下）我将向您展示更改：

```
public int size() {

    int size = planeta.length;

    for (int k=planeta.length-1; k>=0; k--) {
          // Is there a planet or is it empty?
          if (planeta[k].equals(noPlanet)) {
            // There's no Planet
            size--;

          }
        }
        return size;
} 
```

方法planetExists：

```
public boolean planetExists(String planetName) {

    for (int i=0;i<planeta.length;i++)
        if (planeta[i].name().equals(planetName))
            return true;

    return false;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:29:44.453

如果您声明数组`Planet[] planeta = new Planet[12];`，则数组的长度将始终为`12`. 该数组已经填充了未初始化的值。在这种情况下`null`。

改为使用`ArrayList<Planet> planeta = new ArrayList<Planet>();`。您可以使用 添加新行星`planeta.add( new Planet() );`并使用 返回大小`planeta.size()`。

如果你必须坚持使用静态数组，你应该测试一个索引是否`null`在循环中有一个值，`for`并在找到一个值时减小它的大小。

# c++ - 复制构造函数中的深层复制问题

> ID：15981763
> 
> 赞同：1
> 
> 时间：2013-04-12T22:18:55.883
> 
> 标签：c++

我正在尝试通过复制构造函数创建我的类实例的深层副本，但我不知道如何编写它。此时，当我调用复制构造函数时，程序不会崩溃，但是当我想对实例做任何事情（即打印数组，向其中添加一些项目等）然后程序崩溃......

有人可以告诉我，如何正确写吗？这让我快疯了 O_o

```
struct DbChange {
    const char* date;
    const char* street;
    const char* city;
};

class DbPerson {
public:
    DbPerson(void);
    const char* id;
    const char* name;
    const char* surname;
    DbChange * change;
    int position;
    int size;
};

DbPerson::DbPerson() {
    position = 0;
    size = 1000;
    change = new DbChange[1000];
}

class Register {
public:
    // default constructor
    Register(void);

    int size;
    int position;
    DbPerson** db;

    //copy constructor
    Register(const Register& other) : db() {    
        db=  new DbPerson*[1000];       
        std::copy(other.db, other.db + (1000), db);      
    }
};

int main(int argc, char** argv) {
    Register a;
    /*
     * put some items to a
     */

    Register b ( a );

    a . Print (); // now crashes
    b . Print (); // when previous line is commented, then it crashes on this line...

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T22:34:05.377

由于显示的代码无法让我们猜测 Print 做了什么，以及它为什么会出现问题，所以我将向您展示我对 C++ 的期望（而不是 C 和 Java 之间的尴尬混合）：

**[http://liveworkspace.org/code/4ti5TS$0](http://liveworkspace.org/code/4ti5TS%240)**

```
#include <vector>
#include <string>

struct DbChange {
    std::string date;
    std::string street;
    std::string city;
};

class DbPerson {
    public:
        DbPerson(void);

        std::string id, name, surname;
        int position;
        std::vector<DbChange> changes;

        size_t size() const { return changes.size(); }
};

DbPerson::DbPerson() : position(), changes() { }

class Register {
    public:
        size_t size() const { return db.size(); }
        int position; // unused?
        std::vector<DbPerson> db;

        Register() = default;

        //copy constructor
        Register(const Register& other) : db(other.db) 
        { 
            // did you forget to copy position? If so, this would have been the
            // default generated copy constructor
        }

        void Print() const
        {
            // TODO
        }
};

int main() {
    Register a;
    /*
     * put some items to a
     */

    Register b(a);

    a.Print(); // now crashes
    b.Print(); // when previous line is commented, then it crashes on this line...

    return 0;
} 
```

# akka - 在 Akka 中处理阻塞库代码中的异常

> ID：15981771
> 
> 赞同：1
> 
> 时间：2013-04-12T22:19:55.210
> 
> 标签：akka

我在路由器后面有一个 DB Worker 演员池，通过 Dao 阻止 DB 操作。如果您尝试将相同的 foo 插入两次，则将（“放置”） foo 对象插入 Dao 会引发 DuplicateKeyException。在这种情况下，我想回复 DuplicateFoo(foo) 消息；成功后，我想用 FooAdded(foo) 来回应。这就是我的做法；有没有更好的办法？

```
def receive = {
  case PutFoo(foo) =>
    try {
      dao.put(foo)
      sender ! FooAdded(foo)
    } catch {
      case DuplicateKeyException(_) =>
        sender ! DuplicateFoo(foo)
    }
} 
```

抛出 DuplicateKeyException 后，Dao 可以继续处理请求，所以我觉得没有必要重新启动 worker。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:55:38.937

从理论上讲，您所做的是“包含”检查，然后“放置”或“通知”。从实际的角度来看，它的实现方式是“放置”，如果地狱失控，则“通知”。

由于理论上**不存在意外行为，因此**`put` **在失败情况下**的实现并不理想。如果需要唯一性，则应进行“包含”检查，因此`put`（或`PutFoo`在您的场景中）应返回 Status(Success|Failure)，即使它尝试“放置”并在`DuplicateKeyException`内部捕获。采取`Boolean`, or `Option`or or or `Either`or `Try`or your own status ADT 为此，但不要为您希望不时发生的事情抛出异常。

如果没有例外，则无需重新启动工人，但我猜您的直觉一直试图告诉您这一点。;)

# php - 与 strstr 完全匹配

> ID：15981774
> 
> 赞同：0
> 
> 时间：2013-04-12T22:20:11.347
> 
> 标签：php, strstr

我如何使用`strstr`来完全匹配变量的内容而不是仅仅包含？

例如：

*   `www.example.com/greenapples`
*   `www.example.com/redapples`
*   `www.example.com/greenapplesandpears`

如果我的 URL 设置为变量`$myurl`并且我使用以下内容..

```
if (strstr($myurl, 'redapples')) {
echo 'This is red apples';
    } 
```

然后它也适用于其他 URL，因为它们也包含单词 apples。我怎么能具体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:23:35.293

嗯，比较一下？

```
if ('www.mydomain.com/greenapples' === $myurl) {
    echo 'green apples!';
} 
```

### 更新

如果没有更多信息，我不确定这是否适合您的问题，但如果您只对 URL 的最后一部分感兴趣*并*考虑到 URL 包含查询字符串（例如`?foo=bar&bar=foo`）的可能性，请尝试类似这个：

```
// NOTE: $myurl should be INCLUDING 'http://'
$urlPath = parse_url($myurl, PHP_URL_PATH);

// split the elements of the URL 
$parts = explode('/', $urlPath);

// get the last 'element' of the path
$lastPart = end($parts);

switch($lastPart) {
    case 'greenapples':
        echo 'green!';
        break;

    case 'greenapplesandpears':
        echo 'green apples AND pears!';
        break;

    default:
        echo 'Unknown fruit family discovered!';

} 
```

文档：

[http://www.php.net/manual/en/function.parse-url.php](http://www.php.net/manual/en/function.parse-url.php)

[http://php.net/manual/en/function.end.php](http://php.net/manual/en/function.end.php)

[http://php.net/manual/en/control-structures.switch.php](http://php.net/manual/en/control-structures.switch.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:44:07.187

我不了解 PHP，但是您应该可以通过使用一些字符串操作来做到这一点。使用 substr("www.mydomain.com/greenapples",strripos("www.mydomain.com/greenapples", "/"));

strripos - 返回子字符串的最后一个位置，在你的情况下说它的“/”。substr - 返回给定位置之后的子字符串

像这样的东西你可以试试。

# java - Play Framework 2.1 websockets流数据不起作用

> ID：15981784
> 
> 赞同：3
> 
> 时间：2013-04-12T22:21:00.357
> 
> 标签：java, websocket, playframework-2.0

我的 Play 应用程序中有一个 websocket 连接设置。该函数在下面，我正在尝试在此函数中流式传输一些数据。

当 websocket 连接建立并准备就绪时，我创建了一个`while`循环，该循环创建随机数以发送到 websocket 的输出流到前端。

这些是我在测试时观察到的：

1.  如果我注释掉`while`循环代码并且只有前三个`out.write(...)`，它们都会按预期到达前端。
2.  如果我取消注释`while`循环代码，前端不会收到任何消息。`out.write(...)`如果`while`循环被注释 ，甚至前三个都不会出现。

这让我有点困惑。如果前三个`out.write(...)`消息都出去了，为什么在取消注释循环时它们和`while`循环`out.write(...)`不出去`while`？

该循环正在运行，已通过打印语句验证，但前端没有收到任何消息。我们不能在 websocket 的循环中调用 'out.write(...)' 吗？

```
 public static WebSocket<String> realTimeChartConnection() {
    return new WebSocket<String>() {
        // called when the websocket is established
        public void onReady(WebSocket.In<String> in, WebSocket.Out<String> out) {
            // register a callback for processing instream events
            in.onMessage(new Callback<String>() {
                public void invoke(String event) {
                    System.out.println(event);
                }
            });             
            System.out.println("Websocket Connection ready ...");

            out.write("50");
            out.write("51");
            out.write("60");

            int prev = 50;
            while (true) {
                int y = (int) (prev + Math.random() * 10 - 5);
                if (y < 0)
                    y = 0;
                if (y > 100)
                    y = 100;
                out.write(""+y);
                try {
                    Thread.currentThread();
                    Thread.sleep(30);
                } catch (Exception e) {
                    System.out.println(e.getStackTrace());
                }
            }
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T18:26:21.963

我没有任何关于 play 或 scala 的知识，但据我所知，你阻止了一个执行线程。

# python - Python 类不会执行我的函数

> ID：15981789
> 
> 赞同：1
> 
> 时间：2013-04-12T22:21:45.280
> 
> 标签：python, class, python-3.x

所以我之前编写了这段代码，但它在调用时不会使用 check_level 命令或 Award 命令：

```
from random import randint

class RPG:
    #Defines parts of your character
    def __init__(self, character_name):
        self.chrn = character_name
        self.exp = 0 #Total Experince points
        self.level = 1 #Total Level
        self.h = 25 #Player Health
        self.expn = 10 #Experience Needed
        self.eh = 10 #Base Enemy Health
        self.set = False #Used to chest enemy status
        self.win = False #Used to check for win

    def set_basic(self): # Sets up the basic enemy.
        if self.eh == 0:
            self.eh = 10

    def check_level(self): # Checks to see if you have enough EXP to level up.
        if self.exp >= self.expn:
            self.level = self.level + 1
            self.exp = 0
            self.expn = self.level * 10
            print('Level has increased to {0}'.format(self.level))

    def check_enemy(self): # Checks to see if enemy's health is equal to 0.
        if self.eh == 0:
            print('You Win')
            self.set == True
            RPG.set_basic(self)
        else:
            print('')

    def award(self): # Awards EXP if enemy is dead.
        if self.set == True:
            self.exp = self.exp + 5
            print ('You gained 5 EXP!')

    def attack(self): #The main character's attack.
        x = randint(1,100)
        if x > 20:
            y = randint(1, self.level * 3)
            self.eh = self.eh - y
            final = ('Enemy took {0} damage'.format(y))
            print(final)
            if self.eh < 0:
                self.eh = 0
            print('Enemy has {0} health left'.format(self.eh))
            print('')
            RPG.check_enemy(self)
            RPG.award(self)
            RPG.check_level(self)
        else:
            print('Miss!') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:52:42.870

Samsquanch 正确地将所有`RPG.(self)`方法调用更改为`self.*()`. 当你调用一个方法时，python 总是将实例对象作为第一个参数传递。这样您就可以避免像以前那样显式调用该方法。您可以查看[此链接](http://concentricsky.com/blog/2013/apr/pythons-magical-self)以获取有关`self`.

我测试了你的代码，看起来你的问题出在`check_enemy()`. 您需要更改`self.set == True`为`self.set = True`.

新方法应该是这样的

```
def check_enemy(self):
    if self.eh == 0:
        print('You Win')
        self.set = True
        self.set_basic()
    else:
        print('') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:28:20.213

这个：

```
RPG.check_enemy(self)
RPG.award(self)
RPG.check_level(self) 
```

应该：

```
self.check_enemy()
self.award()
self.check_level() 
```

`self`参数是隐含的。

**编辑：**实际上，您的任何`RPG.*(self)`功能都应该是`self.*()`-我看到其中一些散布在整个课堂上。

# ruby - Ruby 中的数值对象如何排除点符号？

> ID：15981794
> 
> 赞同：4
> 
> 时间：2013-04-12T22:22:04.053
> 
> 标签：ruby, object, methods

我注意到在大多数情况下都需要点表示法来调用对象的方法。我假设点是用来连接对象和方法名的，但是在算术运算中，数字对象和它的操作方法之间有一个空格。例如，

```
7.-(5) 
```

使用点符号，也可以写成

```
7 - 5 
```

在运算符和操作数之间有可选的空格。它如何能够执行方法调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T22:29:58.500

[`Syntactic Sugar for Special Methods`](http://rubymonk.com/learning/books/1-ruby-primer/chapters/6-objects/lessons/37-syntactic-sugar-for-special-methods)了解红宝石所有语法糖的好来源。

以下所有内容在 Ruby 中都是相同的。

```
2 + 3   #=> 5
2.+(3)  #=> 5
2.+ 3 #=> 5 
```

所以当你写的时候`2 + 3`，它是在内部发生`2.+(3)`的`2.+ 3`

因为 Ruby 中的一切都是对象。这里`2`也是一个`Fixnum`对象。随着`.`我们调用对象`2`的`+`方法，就是这样。

```
2.class #=> Fixnum
2.instance_of? Fixnum #=> true
2.respond_to? :+  #=> true 
```

另一个例子如下：

```
"a" + "b" #=> "ab"
"a".+"b" #=> "ab"
"a".respond_to? :+ #=> true 
```

`respond_to`返回`true`- 这是因为`String`类具有连接方法`+`。作为 String 类的对象，可以通过作为参数传递给该方法`'a'`来调用该方法。`+``b`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T23:17:39.103

> 那么[数字对象]如何能够执行方法调用？

number 对象不必自己弄清楚，Ruby 会在内部处理它。它适用于任何对象，而不仅仅是数字：

```
class Foo
  def +(arg)
    puts "adding #{arg}"
  end
end

Foo.new + "bar"
# => adding bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:33:41.703

虽然 Ruby 比 Python 更正交，但这并不意味着它是完全正交的。所以，它也有它的异常，例如，它还有一个`for`关键字（被翻译为对每个的调用）：

```
for x in (1..3) do
  puts x
end 
```

仅仅因为它拥有它，并不意味着它对你有好处。没有人真正推荐使用类似的方法`for`，因为最好使用`each`，因为我相信您已经阅读过。

使用调用`+`方法`.`或将消息发送`+`到您的对象是不值得做的事情，只是为了保持语言真正、真正、正交。

您可以看到 Ruby 的[语法](http://www.cse.buffalo.edu/~regan/cse305/RubyBNF.pdf)，如果您对此方面感兴趣，这可能会帮助您找到其他非正交方面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T02:11:08.807

> 它如何能够执行方法调用？

嗯，这叫做[*语法糖*](http://en.wikipedia.org/wiki/Syntactic_sugar)。这真的没什么特别的。这只是常见的 ruby​​ 方法调用规则的*一个例外*，以便使代码更易于理解和可能可读。

你会比理解`7.-(5)`得更快`7 - 5`吗？我不这么认为。这就是存在此*异常*的原因。

这是可能的，因为 Ruby 解释器读取 any`x - y`并将其翻译`x.-y`为.`x[y]``x.[](y)``x[y] = z``x.[]=(y, z)`

这是所有语法糖调用符号的列表：

![在此处输入图像描述](https://i.stack.imgur.com/ygljl.png)

图片来自一本非常好的书，名为[*The Well-Grounded Rubyist*](https://rads.stackoverflow.com/amzn/click/com/1933988657)，它在第 2 部分第 7 章中介绍了这个概念。

# c# - 实体框架中多对多关系中的多个实体

> ID：15981795
> 
> 赞同：3
> 
> 时间：2013-04-12T22:22:07.600
> 
> 标签：c#, asp.net-mvc, entity-framework

假设我有 3 个课程：

```
public class Tag {
    public string Name { get; set; }
}

public class Post {
     public virtual IList<Tag> Tags { get; set; }
}

public class User {
     public virtual IList<Tag> Tags { get; set; }
} 
```

现在，用户和标签之间以及帖子和标签之间存在多对多的关系。

简化：我有一个标签列表，我希望能够同时标记用户和帖子，同时标签保持独立。

现在，我可以创建一个映射并映射一个双多对多，创建两个表：Users_Tags 和 Posts_Tags，但我需要它们在同一个表中。

我需要一个：Entity_Tags：Entity_Id，Tag_Id，Decriminator

通常我会创建一个基类，Tag 和 Post 都继承自...“TagContainer”。创建一个：TagContainers_Tags：TagContainer_Id、Tag_Id

现在的问题是，在我的情况下，在我想到的实体中，它们共享相同的基类是没有意义的。这是因为我有另一个基类做同样的事情会发生冲突。并且让该类继承这些基类之一在应用程序方面没有意义。

如果 EF 支持接口，我当然会通过让我的类继承必要的接口来支持第一个和第二个多对多实体来解决这个问题。

我几乎在寻找一种方法来让 EF 支持基于鉴别器的多对多表，而无需向我的实体提供基类。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T20:12:13.900

因此，您不能在两个不同的多对多关系中使用该表。如果您真的不想在模型和数据库表中进行任何类型的概括（尽管在规范化大型数据库设计中最常见），您可以这样做：

```
public class MyTrust
    {
        public MyTrust()
        {
            MyLocations = new List<MyLocation>();
        }
        public int MyTrustID { get; set; }
        public string MyTrustName { get; set; }
        public virtual ICollection<MyLocation> MyLocations { get; set; }
    }
    public class MyLocation
    {

        public int MyLocationID { get; set; }
        public string MyLocationName { get; set; }
        public virtual MyTrust MyTrust { get; set; }
}

public class TaskDbContext : DbContext
    {
        public DbSet<MyTrust> MyTrusts { get; set; }
        public DbSet<MyLocation> MyLocations { get; set; }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<MyTrust>().HasMany(t => t.MyLocations).WithRequired();
        }
    } 
```

[在此处](http://social.msdn.microsoft.com/Forums/vstudio/en-US/41f80571-b943-4000-900b-b1ada49b29f2/entity-framework-code-first-and-onetomany-relationship-across-multiple-contexts)查看示例的来源

# facebook - Facebook Open Graph 帖子，其中描述引用了不同的对象

> ID：15981797
> 
> 赞同：0
> 
> 时间：2013-04-12T22:22:28.143
> 
> 标签：facebook, facebook-opengraph

我正在尝试重新创建一个如下所示的 Open Graph 帖子：

![在此处输入图像描述](https://i.stack.imgur.com/hb13I.png)

据我所知，动作是“翻转故事”，对象是“很酷的狗屎”。

不过，我不清楚 Facebook 是如何为实际故事添加标题和描述的。

如果您在[对象 url](http://flip.it/MkuRo)上查看源代码，则 og 元标记与故事无关，而只是杂志“cool shit”。

最终，我希望我的帖子的结构如下：

```
Joe Smith saved a travel highlight into List1 on AppName.

 {travel highlight image}   {travel highlight title}
                            {travel highlight description} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:24:29.063

您可以查看如何发布内容；

[后墙](http://blue-and-orange.net/articles/facebook/posting-to-user%27s-facebook-wall-in-aspnet-mvc-4/)

对于您必须添加的图像；

postValues.Add("图片", "...../myimage.jpg");

标题；

postValues.Add("姓名", "旅游高亮标题");

用于描述；

```
postValues.Add("description", "travel highlight description"); 
```

你可以添加

```
 postValues.Add("link", "....");
   postValues.Add("caption", "...."); 
```

# java - Java getParent 返回 null

> ID：15981798
> 
> 赞同：1
> 
> 时间：2013-04-12T22:22:28.900
> 
> 标签：java, performance

我对 Java 很陌生，所以请耐心等待。我有一个类，它必须获取页面的父级并返回它。当我导航到一个节点的最顶部时，我得到一个空指针异常，它是读取**为（Page page = to........** ）的行我明白为什么，因为在顶部节点没有父节点。如何如果用户确实导航到顶级节点，我是否会阻止我的代码生成错误并优雅地显示一条消息。

班级代码：

```
public class Pages {
public static List<Page> getPath(Page from, Page to) {
    if (from == null || to == null) throw new IllegalArgumentException();

    List<Page> path = new ArrayList<Page>();
    for (Page page = to.getParent(), last = from.getParent(); page != null && !(page.getPath().equals(last.getPath())); page = page.getParent())
        path.add(page);
    Collections.reverse(path);
    return path.contains(from) ? path : null;
} 
```

}

JSP 代码：

```
Page rootPage = resourceResolver.adaptTo(PageManager.class).getPage(properties.get("rootNode",Page)currentPage).getPath()));
List<Page> listPages = Pages.getPath(rootPage, currentPage);

for (Page showContent : listPages) {
%>
<li><a href="#">listPages.getDisplayTitle(showContent)) %></a></li>
<%
} //end page for loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:41:54.797

既然你要求一个例子：

```
public class Pages {
public static List<Page> getPath(Page from, Page to) {
    if (from == null || to == null) throw new IllegalArgumentException();

    List<Page> path = new ArrayList<Page>();
    Page page=to.getParent();
    Page last=from.getParent();
    // I'm assuming getPath() can be null occassionaly and is a String
    String lastPath;
    if(last!=null && (lastPath=last.getPath())!=null){
    // The assignment above is an acceptable one, as it saves a nested if statement
        // traverse your path
        while(page!=null && page.getPath()!=null && !(page.getPath().equals(lastPath))) {
            path.add(page);
            page=page.getParent();
        }
    }
    Collections.reverse(path);
    return path.contains(from) ? path : null;
} 
```

值得注意的是，如果您为“from”或“to”参数输入“null”，这段代码仍然会破坏您的页面，因为在这种情况下您将抛出一个新的 IllegalArgumentException。我更喜欢在实际的 java 后端处理尽可能多的逻辑和错误处理，而在 jsp 前端尽可能少地处理。如果有无效参数，一个可能的改进可能是只返回一个空列表。

```
public class Pages {
public static List<Page> getPath(Page from, Page to) {
if (from == null || to == null) return new ArrayList<Page>();

List<Page> path = new ArrayList<Page>();
Page page=to.getParent();
Page last=from.getParent();
// I'm assuming getPath() can be null occassionaly and is a String
String lastPath;
if(last!=null && (lastPath=last.getPath())!=null){
// The assignment above is an acceptable one, as it saves a nested if statement
    // traverse your path
    while(page!=null && page.getPath()!=null && !(page.getPath().equals(lastPath))){
        path.add(page);
        page=page.getParent();
    }
}
Collections.reverse(path);
return path;//return path or empty list
} 
```

有了这个改进，你不应该再得到任何异常。在前端，您现在可以检查您的列表是否为空并采取相应措施

****旁注1：* ***我不确定在什么情况下您希望将“from”添加到路径中（因此我将其省略了），因此您可能需要将其添加到提供的代码中。

****旁注2：* ***您可能想考虑EL而不是scriptlet，只是一个想法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:31:34.223

您需要使用 try...catch 块，它可以在顶部节点捕获错误，然后将其传递给用户显示。阅读 try...catch 的文档 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:33:49.280

在 getParent 方法定义中添加一条 if 语句，条件是如果您的 getParent-ing 节点是顶部节点，则抛出新异常。

如果您是初学者，我相信这而不是“try-catch”就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T23:23:02.903

您需要在循环内检查该条件，如下所示：

```
public static List<Page> getPath(Page from, Page to) {
  ...
  for (Page page = to.getParent(), .. page = page.getParent()) {
    path.add(page);

    // Check for topmost page with no parent.
    if (page.getParent() == null) {
      break;
    }
  }
  ...
  return path.contains(from) ? path : null;
} 
```

# javascript - Javascript根据类过滤图像

> ID：15981799
> 
> 赞同：0
> 
> 时间：2013-04-12T22:22:30.417
> 
> 标签：javascript, jquery, html, filter

当我使用复选框时，我试图使某些图像褪色，过滤器通过识别被选中的复选框并淡化适当的图像而留下想要的图像来工作

```
<script  type="text/javascript">

$("#filter-category£5-10").click(function() {
    if (!$(this).attr('checked'))
        $('.category£11-15bag').stop().fadeTo('slow', 1.0);
    else
        $('.category£11-15bag').stop().fadeTo('slow', 0.2);

});

$("#filter-category£11-15").click(function() {
    if (!$(this).attr('checked'))
        $('.category£5-10bag').stop().fadeTo('slow', 1.0);
    else
        $('.category£5-10bag').stop().fadeTo('slow', 0.2);

});
</script> 
```

这是我创建的类的样式：

```
.category£5-10bag{width:100px; height:100}
.category£11-15bag{width:100px; height:100} 
```

这些是类的图像：

```
<img src="picture box image.png" style = "position:relative; top:-1050px; right:-42"  class="category£5-10bag"/>

<img src="picture box image.png" style = "position:relative; top:-1050px; right:-42"  class="category£11-15bag"/> 
```

如果您发现任何问题，请告诉我，当我尝试使用它时，根本没有任何反应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:36:49.010

我建议更改您的方法（主要是因为我不完全确定这`£`是在 a`class`或 an中使用的有效符号`id`，并使用以下方法：

### html:

```
<input type="checkbox" class="category" id="five-to-ten" />
<label for="five-to-ten">£5-10</label>
<input type="checkbox" class="category" id="eleven-to-fifteen" />
<label for="eleven-to-fifteen">£11-15</label>

<!-- the images are, of course, generic place-holders -->
<img src="http://lorempixel.com/100/100/nature" data-price="five-to-ten" />    
<img src="http://lorempixel.com/100/100/nightlife" data-price="eleven-to-fifteen" /> 
```

### jQuery：

```
$('img').hide();
$('input.category').change(
    function(){
        var test = this.checked;
        $('img[data-price="' + this.id + '"]')[test ? 'show' : 'hide']();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qhJxk/)。

这有一些好处，因为它本质上更具可扩展性，并且不需要*每个*复选框都有新的点击处理程序，它使用`data-*`自定义属性来包含价格类别（等于`id`相关复选框的属性） .

使用三元运算符 ( `test ? 'show' : 'hide'`) 来调用`show()`or`hide()`方法，具体取决于复选框是否被选中；并利用以下事实：

```
$(selector).hide() 
```

也*可以*使用以下方法实现：

```
$(selector)['hide'](); 
```

参考：

*   [属性等于 ( `[attribute="value"]`) 选择器](http://api.jquery.com/attribute-equals-selector/)。
*   [`change()`](http://api.jquery.com/change/).
*   [`hide()`](http://api.jquery.com/hide/).

# jquery - jquery准备好可变文档

> ID：15981800
> 
> 赞同：0
> 
> 时间：2013-04-12T22:22:37.383
> 
> 标签：jquery, variables, jquery-isotope

我在准备好文档上的计算变量时遇到问题。

我将容器宽度除以一个数字，我需要存储这个值，然后再使用它。

这里的脚本：

```
$(document).ready(function() {

var $layout = $('.container-scroll');
var $container = $('#container');
var $items = $('.element');
var $filter = $('#filter a');

function checkWidth() {

var windowSize = $(window).width(); 

if (windowSize <= 960) {    
    var $layout = $('.container-scroll');
    var colW = Math.round(($layout.width())/3)-1;       
    var ElementWidth = colW;
    var ElementHeight = Math.round(colW*0.6);
    $(".element").height(ElementHeight);
    $(".element").width(ElementWidth);  
    $(".element.square").height(ElementHeight * 2);
    $(".element.square").width(ElementWidth * 2);
    $(".element.wide").height(ElementHeight);
    $(".element.wide").width(ElementWidth * 2);
}
else if (windowSize > 960 && windowSize <= 1280 ) {
    var $layout = $('.container-scroll');
    var colW = Math.round(($layout.width())/4)-1;       
    var ElementWidth = colW;
    var ElementHeight = Math.round(colW*0.6);
    $(".element").height(ElementHeight);
    $(".element").width(ElementWidth);  
    $(".element.square").height(ElementHeight * 2);
    $(".element.square").width(ElementWidth * 2);
    $(".element.wide").height(ElementHeight);
    $(".element.wide").width(ElementWidth * 2);
}
else if (windowSize > 1280 && windowSize <= 1600 ) {
    var $layout = $('.container-scroll');
    var colW = Math.round(($layout.width())/5)-1;   
    var ElementWidth = colW;
    var ElementHeight = Math.round(colW*0.6);
    $(".element").height(ElementHeight);
    $(".element").width(ElementWidth);  
    $(".element.square").height(ElementHeight * 2);
    $(".element.square").width(ElementWidth * 2);
    $(".element.wide").height(ElementHeight);
    $(".element.wide").width(ElementWidth * 2);
}
else if (windowSize > 1600 ) {
    var $layout = $('.container-scroll');
    var colW = Math.round(($layout.width())/6)-1;   
    var ElementWidth = colW;
    var ElementHeight = Math.round(colW*0.6);
    $(".element").height(ElementHeight);
    $(".element").width(ElementWidth);  
    $(".element.square").height(ElementHeight * 2);
    $(".element.square").width(ElementWidth * 2);
    $(".element.wide").height(ElementHeight);
    $(".element.wide").width(ElementWidth * 2);
}
}

function checkIsotope() {
$container.isotope({
    perfectMasonry: {
    columnWidth: colW,
    rowHeight: colW,
    },
    masonryHorizontal: {
    rowHeight: colW,
    }
});
}

checkWidth();
checkIsotope();
var colW;
alert(colW)

$(window).smartresize(function() {
    checkWidth();
    checkIsotope()
})

} 
```

我想获取 var colW 以便在同位素布局中定义我的 columnWidth 和 rowHeight。

当我在 colW 上发出警报时，colW 未定义......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:24:31.687

`var colW` 是一个局部变量

尝试将其移出您的功能

像这样定义你的var：

```
var colW;
$(document).ready(function() {
...... 
```

并在你的函数中使用它

```
colW = Math.round(($layout.width())/4)-1; 
```

您现在应该可以使用此 var 进行警报了。

# excel - 更改散点图vba excel中特定点的颜色

> ID：15981802
> 
> 赞同：2
> 
> 时间：2013-04-12T22:22:43.497
> 
> 标签：excel, vba, colors, scatter

我想改变散点图左上角点的颜色。我写了一个宏，没有发生错误但颜色没有改变：/

```
Sub Kolorowanie()
ActiveSheet.ChartObjects("Chart 1").Activate
a = ActiveChart.SeriesCollection(1).Values
b = ActiveChart.SeriesCollection(1).XValues

For i = LBound(a) To UBound(a)

If a(i) < 0 And b(i) > 0 Then
  ActiveSheet.ChartObjects("Chart 1").Activate
  ActiveChart.SeriesCollection(1).Select
  ActiveChart.SeriesCollection(1).Points(i).Select
   With Selection.Format.Fill
    .Visible = msoTrue
    .ForeColor.RGB = RGB(255, 0, 0)
    .Solid
   End With

Else
End If
Next i
End Sub 
```

任何想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T23:04:49.043

在设置**之前**摆脱`.Solid`或放置它，我认为这是覆盖某些东西（我已经注意到这个和其他一些错误/无法执行某些操作，即使宏记录器会使这些方法看起来应该正常工作）。**`Forecolor.RGB`**

 **```
Option Explicit
Sub Kolorowanie()
Dim cht As Chart
Dim srs As Series
Dim pt As Point

Set cht = ActiveSheet.ChartObjects(1).Chart

Set srs = cht.SeriesCollection(1)

For Each pt In srs.Points
    With pt.Format.Fill
        .Visible = msoTrue
        '.Solid  'I commented this out, but you can un-comment and it should still work
        .ForeColor.RGB = RGB(255, 0, 0)

    End With
Next

End Sub 
```

或者：

```
For Each pt In srs.Points
With pt.Format.Fill
    .Visible = msoTrue
    .Solid  'This is the default so including it doesn't do anything, but it should work either way.
    .ForeColor.RGB = RGB(255, 0, 0)

End With
Next 
```

将此应用于您的代码可以为我们提供：

```
Sub Kolorowanie()
ActiveSheet.ChartObjects("Chart 1").Activate
a = ActiveChart.SeriesCollection(1).Values
b = ActiveChart.SeriesCollection(1).XValues

For i = LBound(a) To UBound(a)

If a(i) < 0 And b(i) > 0 Then
   ActiveSheet.ChartObjects("Chart 1").Activate
   ActiveChart.SeriesCollection(1).Select
   ActiveChart.SeriesCollection(1).Points(i).Select
   With Selection.Format.Fill
        .Visible = msoTrue
        .Solid
        .ForeColor.RGB = RGB(255, 0, 0)

   End With

Else
End If
Next i
End Sub 
```**

# deployment - 在现有的 JBoss (7.1.x) 中实施 Torquebox (2.3)

> ID：15981806
> 
> 赞同：5
> 
> 时间：2013-04-12T22:23:00.557
> 
> 标签：deployment, jboss, installation, jruby, torquebox

将 Torquebox (2.3) 实施到现有 JBoss 环境中的方法是什么？我在配置文件（standalone.xml）中找到了扩展：

```
<extension module="org.torquebox.bootstrap"/>
<extension module="org.torquebox.core"/>
<extension module="org.torquebox.services"/>
<extension module="org.torquebox.web"/>
<extension module="org.torquebox.messaging"/>
<extension module="org.torquebox.jobs"/>
<extension module="org.torquebox.security"/>
<extension module="org.torquebox.cdi"/>
<extension module="org.torquebox.stomp"/>
<extension module="org.projectodd.polyglot.hasingleton"/>
<extension module="org.projectodd.polyglot.cache"/>
<extension module="org.projectodd.polyglot.stomp"/> 
```

... 和

```
<subsystem xmlns="urn:jboss:domain:torquebox-core:1.0"/>
<subsystem xmlns="urn:jboss:domain:torquebox-services:1.0"/>
<subsystem xmlns="urn:jboss:domain:torquebox-web:1.0"/>
<subsystem xmlns="urn:jboss:domain:torquebox-messaging:"/>
<subsystem xmlns="urn:jboss:domain:torquebox-jobs:1.0"/>
<subsystem xmlns="urn:jboss:domain:torquebox-security:1.0"/>
<subsystem xmlns="urn:jboss:domain:torquebox-cdi:1.0"/>
<subsystem xmlns="urn:jboss:domain:torquebox-stomp:1.0"/>
<subsystem xmlns="urn:jboss:domain:polyglot-hasingleton:1.0"/>
<subsystem xmlns="urn:jboss:domain:polyglot-cache:1.0"/>
<subsystem xmlns="urn:jboss:domain:polyglot-stomp:1.0" socket-binding="stomp"/> 
```

...以及一些端口绑定，例如

```
<socket-binding name="stomp" port="8675"/> 
```

和一个目录差异（空白 JBoss 7.1.1 与带有 JBoss 7.1.1 的 Torquebox 2.3 给了我很多差异。

我认为不仅仅是上面的几行：我已经看到了 Hornet 集成和更多模块。过去是否有人这样做过并且可以分享经验、安装/实施脚本、一些文档或模块列表以及受人尊敬的配置设置？

欢迎任何提示，作弊，提示和技巧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T01:32:25.770

除了配置更改之外，还需要复制 $JBOSS_HOME/modules 树中的很多模块。[https://github.com/immutant/overlay](https://github.com/immutant/overlay)旨在将 TorqueBox 或 Immutant 叠加到另一个上，或者叠加到 vanilla AS7 安装上。但是 TorqueBox 与构建它所针对的 AS 版本非常紧密地耦合，因此找到与基本 AS 版本匹配的版本或增量构建可能具有挑战性。您最好的选择是加入 freenode 上的#torquebox IRC 频道，其中一位 TorqueBox 开发人员应该能够帮助您。

# deployment - Java 捆绑包 JRE

> ID：15981809
> 
> 赞同：0
> 
> 时间：2013-04-12T22:23:23.853
> 
> 标签：deployment, java

所以这个程序，Launch4J 说我可以将 JRE 与我的程序捆绑在一起。由于我的程序需要 Java 7，我可以捆绑它吗？我有一个问题，程序大小。打包 JRE 的程序是否会像 200mb 一样大？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:33:46.200

一点也不。它仍然会有几兆字节。

看看[这个答案](https://stackoverflow.com/a/4387414/1850609)和评论：

> 出于好奇，在我的 64 位 Windows JRE6 上执行此操作会将安装量从 97.7 MB（19.2 MB 7z 压缩）降低到 89.9 MB（17.9 MB 7z 压缩），大约 -7%

您还可以选择捆绑一个[备用的、较小的 JRE](http://en.wikipedia.org/wiki/List_of_Java_virtual_machines)。

话虽如此，捆绑是不明智的，只应在极端情况下使用。更好的选择是将您的用户指向[http://www.java.com](http://www.java.com)，并让他们安装最合适的 Java 版本。

此外，您可以在安装程序向导中捆绑 JRE，而不是应用程序本身，如果您不想更改应用程序启动器，这可能是一种替代方法。

# ruby-on-rails - Rails 应用程序在某些情况下会在发生错误时切换语言

> ID：15981811
> 
> 赞同：2
> 
> 时间：2013-04-12T22:23:28.403
> 
> 标签：ruby-on-rails, internationalization

我有一个德国 Rails 应用程序，我在开发模式下运行。在某些情况下，应用程序会更改语言，重新启动后会修复。

我有以下配置：

在`initializers/locale.rb`：

```
I18n.default_locale = :de 
```

内`application.rb`：

```
config.i18n.default_locale = :de 
```

我想知道这是否是一个常见问题以及如何防止这种情况。我也不太明白上面两种配置有什么区别。一个为开发工作，但在 phusion_passenger 中似乎都需要它们。

# ruby-on-rails - Heroku 编译资产超时

> ID：15981813
> 
> 赞同：1
> 
> 时间：2013-04-12T22:23:28.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline

从今天开始，我在资产编译时遇到超时异常：

```
git push heroku
...
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
/app/slug-compiler/lib/utils.rb:67:in `block (2 levels) in spawn': command='/app/slug-compiler/lib/../../tmp/buildpacks/ruby/bin/compile /tmp/build_nnx3b7xhbc6j /app/tmp/repo.git/.cache' exit_status=0 out='' at=timeout elapsed=900.1050653457642 (Utils::TimeoutError)
        from /app/slug-compiler/lib/utils.rb:53:in `loop'
        from /app/slug-compiler/lib/utils.rb:53:in `block in spawn'
        from /app/slug-compiler/lib/utils.rb:48:in `popen'
        from /app/slug-compiler/lib/utils.rb:48:in `spawn'
.. 
```

**更新：**

```
heroku[api]: Starting process with command `bundle exec rake assets:precompile` by
heroku[api]: Starting process with command `bundle exec rake assets:precompile`
heroku[run.7870]: Awaiting client
heroku[run.7870]: Error R13 (Attach error) -> Failed to attach to process
heroku[run.7870]: State changed from starting to complete
heroku[run.7870]: Process exited with status 128
heroku[slugc]: Slug compilation started 
heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:49:21.283

尝试在本地预编译资产。

```
bundle exec rake assets:precompile 
```

在 Heroku 上也`config.assets.initialize_on_precompile`必须设置为 false。

有关更多信息，请参阅[Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:27:05.340

命令不是 git push heroku master 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:49:37.270

**我的回答：**问题出在属性中的非 ascii char 中，本地编译很好，但在 heroku 上没有。底线 -**仅使用 ascii**

# ruby-on-rails - 客户端密钥与访问令牌 Rails Instagram API

> ID：15981814
> 
> 赞同：1
> 
> 时间：2013-04-12T22:23:29.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, access-token, instagram

我正在学习 Ruby on Rails，并且正在尝试实现 Instagram API。

我正在阅读文档[https://github.com/Instagram/instagram-ruby-gem](https://github.com/Instagram/instagram-ruby-gem)并在它说要放置的配置部分

```
Instagram.configure do |config|
  config.client_id = YOUR_CLIENT_KEY
  config.access_token = YOUR_ACCESS_TOKEN
end 
```

但我目前正在关注一个示例应用程序，而不是 access_token，它有 client_secret，如下所示：

```
Instagram.configure do |config|
  config.client_id = 'YOUR_CLIENT_KEY'
  config.client_secret = 'CLIENT_SECRET'
end 
```

现在我想知道客户端密码和访问令牌之间有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:01:54.847

[Instagram](http://instagram.com/developer/authentication/)使用[OAuth 2.0](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-12)。

客户端密码（必需）和访问令牌（可选）都用于签署授权标头。客户端密钥是分配给客户端的签名密钥的一部分，而访问令牌是代表授权用户的签名密钥的一部分。

所以一般来说，你总是需要使用客户端密码。如果您被授权代表特定用户行事，您还将使用代表该用户的访问令牌。

# php - $_GET 返回空值

> ID：15981818
> 
> 赞同：1
> 
> 时间：2013-04-12T22:23:39.857
> 
> 标签：php, query-string

我觉得我在做一些简单而愚蠢的错误。我有一个非常简单的页面，用于测试。但我不明白为什么这不起作用。一个多小时一直在寻找答案。

我意识到我可以获取 $_SERVER['QUERY_STRING'] 并解析它，但我更愿意找出我做错了什么。

也许另一双眼睛可以发现问题。

谢谢。

PS 如果这很重要，这是在 IIS (Windows Server 2008) 上。

* * *

**在带有查询字符串的 URL 上，$_GET 返回 null。**
所以，在这个网址上：

```
http://www...../test.php?id=test 
```

其中 test.php 包含：

```
<html><body>
<?php
if (isset($_get['id'])){
    echo "set";
}else
{
    echo "not set";
}
echo "<br>";
var_dump($_get['id']); 
echo "<br>";
var_dump($_request['id']);
echo "<br>";
var_dump($_SERVER['QUERY_STRING']);
echo "<br>";
print_r($_REQUEST);
?>
</body></html> 
```

我的结果是：

```
not set
NULL 
NULL 
string(13) "id=test" 
Array ( [id] => test ) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T22:24:36.563

`$_get`!=`$_GET`

PHP 使用区分大小写的变量名。您始终必须匹配确切的大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:27:07.100

你应该使用`$_GET`而不是`$_get`

# rspec - Capybara：应该有html内容

> ID：15981820
> 
> 赞同：22
> 
> 时间：2013-04-12T22:24:26.703
> 
> 标签：rspec, capybara

如何使用水豚检查页面上的 html 内容？

```
page.should have_text('this is <b>bold</b> "text"') 
```

输出：

```
失败/错误：page.should have_text('this is <b>bold</b> "text"')
  预计会有 this is <b>bold</b> \"text\" in "....this is bold \"text\"....."

```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-13T21:28:04.537

您的代码不起作用，因为 Capybara 的`has_text?`（因此`have_text`）方法检查文本，而不是调用它的元素的 html 源。

如果您使用支持 Javascript 评估的驱动程序（例如 Selenium、Poltergeist 或 Capybara-Webkit），您可以使用 Javascript 获取元素的内部 HTML：

```
html = page.evaluate_script("document.getElementById('answer-15988092').innerHTML")
html.should include('this is <b>bold</b> "text"') 
```

如果你想断言页面的整个 HTML 包含一个元素，你可以使用`html`返回页面源的方法：

```
page.html.should include('this is <b>bold</b> "text"') 
```

通常我更喜欢 javascript 评估，因为它更具限制性。

# django - Django 项目的最佳实践命名约定是什么？

> ID：15981823
> 
> 赞同：1
> 
> 时间：2013-04-12T22:24:34.863
> 
> 标签：django

项目名称是否应该与站点名称相同？或者应该被称为“django”、“settings”、“project-settings”或其他名称？

我知道这最终并不重要，但我很好奇最佳实践是什么，或者你更喜欢给你的 Django 项目起什么名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:49:03.050

最好的办法是**根据你的应用程序的主要目标**来命名它。例如，与用户打交道的一个可以命名为注册（它是一个真实的应用程序名称）。

根据应用程序的功能命名应用程序，不仅可以使项目更具可扩展性，还可以避免项目名称和应用程序之间的混淆。

但是，如果只有一两个应用程序，则将其命名为项目即可。如果它是您项目的核心并且其他应用程序将只是次要的（我仍然不推荐它），则相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T13:46:12.993

我有同样的问题，我的项目名称与应用程序名称混淆。

我选择这个命名：

```
foo_project/
  manage.py
  main/ # project name, contains settings
  apps/ # contains all my apps `from apps.foos.models import ...`
    foos/
    other_stuff/ 
```

# javascript - 使用 html 输入更改 Ajax 数据字段参数

> ID：15981827
> 
> 赞同：0
> 
> 时间：2013-04-12T22:24:43.657
> 
> 标签：javascript, html, ajax

我已经根据在服务器上运行的查询返回的数据使用 Google 图表创建了一个可视化。我正在使用 Ajax 命令发送查询。

有没有办法根据用户的 html 输入动态修改查询？我特别想更改`data:`参数以包含用户指定的范围。

这是我正在使用的 Ajax 命令：

```
 var json;
$.ajax({
        url: 'http://10.10.48.20:9200/kpi/mroutes_by_lane/_search',
        type: 'POST',
        data :
            JSON.stringify(
                {
                    "query" : { "match_all" : {} }
                }),
        dataType : 'json',
        async: false,
        success: function(data){
            json = data;
        }
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:28:47.290

是的，

您可以从 HTML 中获取数据并将其放入数据中，如下所示：

```
 var json;
$.ajax({
        url: 'http://10.10.48.20:9200/kpi/mroutes_by_lane/_search',
        type: 'POST',
        data :
            JSON.stringify(
                {
                    "query" : { "match_all" : {}, 
                                "some_field", $("#textboxid").val() }
                }),
        dataType : 'json',
        async: false,
        success: function(data){
            json = data;
        }
    }) 
```

在您的 HTML 中：

```
<input type="text" id="textboxid" /> 
```

# c++ - 如何包含类

> ID：15981831
> 
> 赞同：-2
> 
> 时间：2013-04-12T22:25:08.470
> 
> 标签：c++

我已经编写了几个只有方法定义的类，以及下面的这些方法声明。在底部我有`main()`功能。

我想问你两个问题——包括这个在内的最佳做法是什么，我应该怎么做？

```
#include <iostream>
#include <cstdlib>
#include <fstream>
using namespace std;

template <class heap> class Addition {

protected:
    heap a;
    heap b;
    heap outcome;
public:
    Addition(heap, heap);

}; // End Addition

template <class heap> Addition::addition(heap c_a, heap c_b)
{
    a = c_a;
    b = c_b;
}

template <class heap> class Array_Addition: public Addition {

public:
    solve();

}; // End Array_Addition

template <class heap> Array_Addition::solve()
{
    // something here
}

template <class heap> class Struct_Addition: public Addition {

public:
    solve();

}; // End Struct_Addition

int main()
{
    cout << "aaaaa";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:29:13.977

正常的做法是将类声明放在头文件（Addition.h）中，将方法放在另一个名为 Additon.cpp 的文件中，将调用代码放在另一个文件中，可能是 main.cpp。然后将头文件包含在 2 个 .cpps 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:55:44.787

```
#include"classnameinthesamefolder.h or .cpp" 
```

# php - PHP imap_rfc822_parse_headers 获取密件抄送

> ID：15981833
> 
> 赞同：0
> 
> 时间：2013-04-12T22:25:28.647
> 
> 标签：php, imap, bcc

为什么函数`imap_rfc822_parse_headers`不包含密件抄送信息？我如何获得这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:02:27.877

BCC 不是邮件 mime 标头的一部分。这就是它应该是的。盲抄本..

更多参考：[http ://en.wikipedia.org/wiki/Blind_carbon_copy](http://en.wikipedia.org/wiki/Blind_carbon_copy)

# c# - C++/CLI 从具有抽象方法的本机 C++ 类继承并将其公开给 C#

> ID：15981835
> 
> 赞同：8
> 
> 时间：2013-04-12T22:26:05.270
> 
> 标签：c#, c++, .net, interop, c++-cli

我一直在谷歌搜索，试图找到一个完全成熟的例子，但无济于事。

我有一个 C++ API，它提供了许多包含供开发人员扩展的纯虚拟方法的类。我试图做的是通过 C++/CLI 向 C# 提供这个接口。

我已经设法将 API 编译到 C++/CLI 库中，并且由于我是新手，所以我已经达到了一个症结所在。

我知道我需要创建一个包装器来将 C++/CLI 非托管类公开给托管 .net 类，但我还没有找到一个可靠的示例或讨论来展示如何使用抽象 C++ 类来做到这一点。

谁能指出我正确的方向，包括一个完整的示例，包括 C# 测试应用程序，它显示了如何为抽象类创建包装器的端到端。这似乎是“哦，你只是做 X”的事情，但我不知道 X 是什么 :)。我在这里看过一些例子，但不是很清楚。自从我处理任何 C# 以来已经大约 3 年了。

希望有人能帮忙！

萨米希

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T12:08:39.220

使用 Hans Passant 发布的链接中的代码作为基础，我认为您正在寻找以下内容。它不会像这样编译，因为我已经编写了这个示例'内联' - 将所有方法实现放在 .cpp 文件中，然后你应该走在正确的轨道上。

```
#pragma managed(push, off)
#include "oldskool.h"
#pragma comment(lib, "oldskool.lib")
#pragma managed(pop)

using namespace System;

ref class Wrapper; // You need a predeclaration to use this class in the
                   // constructor of OldSkoolRedirector.

// Overrides virtual method is native class and passes to wrapper class
class OldSkoolRedirector : public COldSkool {
public:
    OldSkoolRedirector(Wrapper ^owner) : m_owner(owner) { }
protected:
    virtual void sampleVirtualMethod() { // override your pure virtual method
        m_owner->callSampleVirtualMethod(); // body of method needs to be in .cpp file
    }
private:
    gcroot<Wrapper^> m_owner;
}

public ref class Wrapper abstract {
private:
    COldSkool* pUnmanaged;
public:
    Wrapper() { pUnmanaged = new OldSkoolRedirector(this); }
    ~Wrapper() { this->!Wrapper(); }
    !Wrapper() {
        if (pUnmanaged) {
            delete pUnmanaged;
            pUnmanaged = 0;
        }
    }
protected:
    virtual void sampleVirtualMethod() = 0; // Override this one in C#
internal:
    void callSampleVirtualMethod(){ 
        if (!pUnmanaged) throw gcnew ObjectDisposedException("Wrapper");
        sampleVirtualMethod(); 
    }
}; 
```

# php - 阻止 PHP 表单提交重定向到不同的页面

> ID：15981837
> 
> 赞同：1
> 
> 时间：2013-04-12T22:26:21.730
> 
> 标签：php, webforms, postback

我需要删除此表单提交底部的代码，但是当我删除代码时，它会破坏表单。
我希望表单提交而不重定向到 html 页面。

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "rmcgroarty@xzamcorpresults.com";
    $email_subject = "Customer From XzamCorpResults";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');      
    }

    $first_name = $_POST['first_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['phone']; // not required
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }

  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_to."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 
?>

***<!-- include your own success html here -->

Thank you for contacting XzamCorp. We are looking forward to speaking with you about your inquiry, we will contact you as soon as possible.

<?php
}
?>***

<form name="contactform" method="post" action="send_form_email.php">
<table width="100%" border="0" cellpadding="3" cellspacing="0">
<p align="right">
<tr>
 <td valign="top">
  <input class="text" type="text" name="first_name" id="first_name" value="Name..." onfocus="if(this.value=='Name...')this.value='';" onblur="if(this.value=='')this.value='Name...';" /> </td>
</tr>
<tr>
 <td valign="top">
  <input class="text" type="text" name="email" id="email" value="Email..." onfocus="if(this.value=='Email...')this.value='';" onblur="if(this.value=='')this.value='Email...';" />
 </td>
</tr>
<tr>
 <td valign="top">
  <input class="text" type="text" name="telephone" id="telephone" value="Phone..." onfocus="if(this.value=='Phone...')this.value='';" onblur="if(this.value=='')this.value='Phone...';" />
 </td>
</tr>
<tr>
 <td valign="top">
<textarea rows="10" cols="10" type="text" name="comments" id="comments" onfocus="if(this.value=='Your Feedback...')this.value='';" onblur="if(this.value=='')this.value='Your Feedback...';" >Your Feedback...</textarea>
 </td>
</tr>
<tr>
 <td colspan="2" style="text-align:">
  <input type="submit" value="Submit">
 </td>
</tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:59:23.520

您无法删除该代码，因为在您的成功 HTML 之后出现的 PHP 标记之间的右大括号。如果你删除其他东西，你应该没问题。

**注意：**如果您想在发送电子邮件时继续显示成功消息，但不进行重定向，请忽略我在以下代码块中所做的更改，并进行我在底部的更新中提到的更改。

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "rmcgroarty@xzamcorpresults.com";
    $email_subject = "Customer From XzamCorpResults";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');      
    }

    $first_name = $_POST['first_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['phone']; // not required
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }

  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_to."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 

}
?> 
```

以上应该可以正常工作。

**更新**

这是您想要做的 - 在页面上的某个位置，在您的 PHP 代码中插入以下内容：

```
include("send_form_email.php"); 
```

然后将您的`<form>`标签更改为以下内容：

```
<form name="contactform" method="post" action=""> 
```

它会发回同一页面。如果您希望显示成功消息，但仅在成功发送电子邮件时显示，请使用您发布的原始代码，而不是我在上面的大代码块中编辑的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T04:41:10.390

对不起，只是为了澄清“ `include("send_form_email.php");`”在表格的页面上，`<script></script>`谢谢！

这个问题一直困扰着我，请参见此处：candu-projects.org

# azure - 从企业环境连接到 Windows azure 服务的最佳实践

> ID：15981838
> 
> 赞同：0
> 
> 时间：2013-04-12T22:26:21.733
> 
> 标签：azure

场景：我们有需要与托管在 azure 中的应用程序通信的 Web 应用程序和服务。此外，开发人员也应该能够以某种方式部署 azure 应用程序。

有人可以帮我决定或选择连接企业应用程序以与 azure 托管应用程序通信的最佳方式的最佳实践吗？

1.  为 MS 提供的范围打开防火墙 ( [http://www.microsoft.com/en-us/download/details.aspx?id=29840](http://www.microsoft.com/en-us/download/details.aspx?id=29840) ) 有很多安全人员不想全部打开。

2.  在内部应用程序上配置代理，使其通过具有请求 443 和 80 访问权限的服务帐户的代理。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:02:52.217

使用[Azure 服务总线](http://www.windowsazure.com/en-us/home/features/messaging/)。

> “服务总线中继通过允许本地 Web 服务投射公共端点，解决了本地应用程序与外部世界之间通信的挑战。然后系统可以访问这些 Web 服务，这些服务继续在地球上的任何地方在本地运行。”

另请阅读[如何使用服务总线中继服务](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/)。

对于部署，我们使用 Azure 服务管理 REST API 通过 HTTP 直接将 DEV/TEST 部署到 Azure。对于生产部署，我们的构建设置为将包和配置文件上传到 BLOB，我们的 PROD 支持团队使用 BLOB 文件中的 Azure 门户进行部署。感谢[Rhys Godfrey](https://github.com/rhysgodfrey) ，您可以在[此处](https://github.com/rhysgodfrey/MSBuildAzure)找到复制包的构建任务代码。

# symfony - Symfony2 - 上传、压缩和加密文件一旦上传到服务器

> ID：15981839
> 
> 赞同：1
> 
> 时间：2013-04-12T22:26:26.737
> 
> 标签：symfony, file-upload, zip

我一直在 Symfony 2.2 中实现一个实体，以便将文件上传到我的服务器。我成功地遵循了中列出的步骤

[http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)

但是我需要实现一个附加功能，其中包括将文件保存在实体中，但不是原始文件，而是压缩和加密的文件，就像我使用 linux 的命令行完成然后上传一样生成的 zip 文件。我的意思是，当我需要在我的表单中选择文件时，我会像往常一样选择它，但是在服务器中它会存储一个包含该文件而不是文件本身的 zip，当然在下载时我想要zip 也是如此，因此表中的名称必须是 zip 文件之一。

我想它可以使用系统调用来完成，允许 PHP 对文件执行 zip 命令，但我无法弄清楚它到底是如何实现的。有什么帮助吗？

# c# - 如何在 C# 中使用鼠标绘制和移动形状

> ID：15981840
> 
> 赞同：5
> 
> 时间：2013-04-12T22:26:42.013
> 
> 标签：c#, shapes, mousemove, mousedown

我是 C# 编程新手，想寻求一点帮助。我目前正在尝试使用鼠标左键移动在 Windows 应用程序表单上绘制的填充颜色的矩形，并且我正在尝试使用鼠标右键将其拖放到另一个位置。目前我已经设法绘制了矩形，但是右键单击正在拖动整个表单。

这是我的代码：

```
public partial class Form1 : Form
{
    private Point MouseDownLocation;

    public Form1()
    {
        InitializeComponent();
        this.DoubleBuffered = true;
    }
    Rectangle rec = new Rectangle(0, 0, 0, 0);

    protected override void OnPaint(PaintEventArgs e)
    {   
        e.Graphics.FillRectangle(Brushes.DeepSkyBlue, rec);
    }

    protected override void OnMouseDown(MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left) 
        {
            rec = new Rectangle(e.X, e.Y, 0, 0);
            Invalidate();

        }
        if (e.Button == MouseButtons.Right)
        {
            MouseDownLocation = e.Location;
        }
    }
    protected override void OnMouseMove(MouseEventArgs e)
    {             

        if (e.Button == MouseButtons.Left)
        {
            rec.Width = e.X - rec.X;
            rec.Height = e.Y - rec.Y;
            Invalidate();
        }

        if (e.Button == MouseButtons.Right)
        {
            this.Left = e.X + this.Left - MouseDownLocation.X;
            this.Top = e.Y + this.Top - MouseDownLocation.Y;

        }
    }

} 
```

我只需要用鼠标右键拖放矩形。

**编辑**：谢谢大家，我很快就得到了答案，这是有效的代码：

```
public partial class Form1 : Form
{
    private Point MouseDownLocation;

    public Form1()
    {
        InitializeComponent();
        this.DoubleBuffered = true;            
    }

    Rectangle rec = new Rectangle(0, 0, 0, 0);

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.FillRectangle(Brushes.DeepSkyBlue, rec);
        //Generates the shape            
    }

    protected override void OnMouseDown(MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        //can also use this one:
        //if (e.Button == System.Windows.Forms.MouseButtons.Left)
        {
            rec = new Rectangle(e.X, e.Y, 0, 0);
            Invalidate();

        }
        if (e.Button == MouseButtons.Right)
        {
            MouseDownLocation = e.Location;
        }
    }
    protected override void OnMouseMove(MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            rec.Width = e.X - rec.X;
            rec.Height = e.Y - rec.Y;
            this.Invalidate();
        }

        if (e.Button == MouseButtons.Right)
        {
            rec.Location = new Point((e.X - MouseDownLocation.X) + rec.Left, (e.Y - MouseDownLocation.Y) + rec.Top);
            MouseDownLocation = e.Location;
            this.Invalidate();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:55:59.460

试试这个：请注意，我在此方法中将计时器添加到表单中，您无需在鼠标事件上调用 Invalidate，计时器正在调用 Refresh()，因此表单将在每个滴答声中绘制自己。

```
public partial class Form1 : Form
{
   private Point MouseDownLocation;

   public Form1()
   {
      InitializeComponent();
      this.DoubleBuffered = true;
      timer1.Start(); // add timer to the form
   }
   Rectangle rec = new Rectangle(0, 0, 0, 0);

   protected override void OnPaint(PaintEventArgs e)
   {
       e.Graphics.FillRectangle(Brushes.DeepSkyBlue, rec);
   }

   private void timer1_Tick(object sender, EventArgs e)
   {
       Refresh();
   }

  protected override void OnMouseMove(MouseEventArgs e)
  {
      if (e.Button == MouseButtons.Left)
      {
         rec.Width = e.X - rec.X;
         rec.Height = e.Y - rec.Y;
      }
      else if (e.Button == MouseButtons.Right)
      {
        rec.X = e.X - MouseDownLocation.X;
        rec.Y = e.Y - MouseDownLocation.Y;
      }
  }

   protected override void OnMouseUp(object sender, MouseEventArgs e)
   {
       if (e.Button == MouseButtons.Right)
          MouseDownLocation = e.Location;
   }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:45:54.633

这似乎有效

```
 protected override void OnMouseMove(MouseEventArgs e)
    {

        if (e.Button == MouseButtons.Left)
        {
            rec.Width = e.X - rec.X;
            rec.Height = e.Y - rec.Y;
            this.Invalidate();
        }

        if (e.Button == MouseButtons.Right)
        {
            rec.Location = new Point((e.X-MouseDownLocation.X) + rec.Left, (e.Y-MouseDownLocation.Y) + rec.Top);
            MouseDownLocation = e.Location;
            this.Invalidate();
        }
    } 
```

# c# - 停留在泛型和接口上。需要基于代码的解决方案，可能需要重新设计接口

> ID：15981841
> 
> 赞同：5
> 
> 时间：2013-04-12T22:26:49.420
> 
> 标签：c#, .net, generics, interface, service-locator

这是我需要帮助的代码的一部分：

```
// simple service locator
public class ServiceManager<TSvc> : IServiceManager<TSvc> where TSvc: class, IService
{
   private Dictionary<object, TSvc> services;

   public void RegisterService(TSvc service)
    {
        // omitted code here
        this.services.Add(service.GetType(), service); // dictionary
    }
    public T GetService<T>() where T : TSvc
    {
        T result = default(T);

        TSvc bufResult = null;
        if (this.services.TryGetValue(typeof(T), out bufResult))
            result = (T)bufResult;

        return result;
    }
    public TSvc GetService(Type serviceType)
    {
        TSvc result = null;

        this.services.TryGetValue(serviceType, out result);

        return result;
    }
} 
```

然后我的域接口：

```
public interface IItem
{
   string Name { get; set; }
}
public interface IRepository<TModel> where TModel : IItem
{
    new IEnumerable<TModel> GetItems();
    void InsertItem(TModel item);
    void UpdateItem(TModel item);
    void DeleteItem(TModel item);
}
public interface IService<TModel> where TModel : IItem
{
    IRepository<TModel> Repository { get; }
} 
```

然后是我的一些域类：

```
public class Book: IItem
{
    public string Name { get; set; }
}
public class BookRepo: IRepository<Book>
{
    new IEnumerable<Book> GetItems();
    void InsertItem(Book item);
    void UpdateItem(Book item);
    void DeleteItem(Book item);
}
public class BookService: IService<Book>
{
    IRepository<Book> IService<Book>.Repository { get { return this.Repository; } }
    BookRepo Repository { get; set;} 
} 
```

现在，如果我有兴趣使用“BookService”并对其进行处理，我可以从服务定位器中获取它，如下所示：

```
public void DoSomething()
{
    var bookService = serviceManager.GetService<BookService>();
    bookService.Repository.Insert(new Book()); 
} 
```

但问题是服务的类型只有在运行时才知道（例如，从组合框中选择）。那么，DoSomething 方法会是什么样子呢？

```
public void DoSomething()
{
    var typeOfService = combobox.SelectedValue.GetType(); // cbx of services
    // ??? make use of serviceManager and typeOfService to get appropriate 'service'
    service.Repository.Insert(/*new IITem here*/);
} 
```

另外，我想知道您将如何连接`IService`...`IService<TModel>`它甚至可以找到解决方案，但我不知道如何连接。我的`IService`界面暂时是空白的...

我真的很感激你的时间。如果有不清楚的地方请告诉我！谢谢！

**更新：**根据您的回答，我想可能会涉及反射部分（就像 NSGaga 指出的那样），但仍然没有连接`IService`，`IService<TModel>`我无法实现我想要的。谁知道如何重新设计这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:37:02.190

这样的东西应该可以工作（从我的脑海中输入，所以你需要检查语法细节 - 但应该给你方向 - 或者我稍后会添加）

```
MethodInfo methodInfo = typeof(ServiceManager).GetMethod("GetService");
MethodInfo methodInfoGeneric = methodInfo.MakeGenericMethod(new[] { typeOfService });
methodInfoGeneric.Invoke(serviceManager, new object[] { }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:39:08.377

要调用仅在运行时知道类型的泛型方法，需要使用反射。

例如，在上一个代码示例中，您正确地暗示您不能调用`GetService<BookService>`，但您仍在添加`new Book()`到服务中。您还必须使用反射来实例化新对象，因为同样，您在编译时不知道类型。因此，您至少需要使用反射 3 次：一次调用返回服务的方法，一次创建新对象，一次调用服务的插入方法。

[您可以通过依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)和[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)来隔离其中的一些复杂性。例如，创建一个像这样的泛型方法：

```
void CreateNewObject<T>() where T : new()
{
    var service = GetServiceFor<T>();
    service.Repository.Insert(new T());
} 
```

现在，您只需要使用一次反射来调用该方法，而不是三次。

# php - PHP - 数组大小返回 1？

> ID：15981843
> 
> 赞同：2
> 
> 时间：2013-04-12T22:26:56.113
> 
> 标签：php, arrays

在 Count() 的返回值下

> 返回 var 中的元素个数。如果 var 不是数组或实现了 Countable 接口的对象，则返回 1。有一个例外，如果 var 为 NULL，则返回 0。

我有一个用字母和数字填充的字符串，我正在使用 preg_match_all() 来提取这些数字。我记得 preg_match_all 用结果填充第三个参数中给出的数组的内容。为什么返回 1？

我在我的代码中做错了什么？

```
$string = "9hsfgh563452";
preg_match_all("/[0-9]/",$string,$matches);

echo "Array size: " . count($matches)."</br>"; //Returns 1
echo "Array size: " . sizeof($matches)."</br>"; //Returns 1
print_r($matches); 
```

我想对数组的内容（即字符串中返回的所有数字）求和，array_sum() 不起作用；它是一个字符串数组，我不知道如何将其转换为 int 数组，因为我没有使用任何分隔符，如 ' 、 ' 等。有没有更有效的方法来做到这一点？

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T22:29:58.550

计数为 1，因为`$matches`它是一个包含另一个数组的数组。具体来说，`$matches[0]`是一个包含第零个捕获组（整个正则表达式）的每个匹配项的数组。

也就是说，`$matches`看起来像这样：

```
Array
(
    [0] => Array  // The key "0" means that matches for the whole regex follow
        (
            [0] => 9   // and here are all the single-character matches
            [1] => 5
            [2] => 6
            [3] => 3
            [4] => 4
            [5] => 5
            [6] => 2
        )

) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T22:30:07.420

的结果`preg_match_all`实际上是一个数组的数组：

```
Array
(
    [0] => Array
        (
            [0] => 9
            [1] => 5
            [2] => 6
            [3] => 3
            [4] => 4
            [5] => 5
            [6] => 2
        )
) 
```

因此，您需要执行以下操作：

```
echo "Array size: " . count($matches[0]);

echo "Array sum: " . array_sum($matches[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:31:33.287

这是由于 preg_match_all 返回结果的方式。它的主要数组元素是 preg 括号（表达式匹配），而它们的内容是您匹配的内容。

在您的情况下，您没有子表达式。因此，该数组将只有一个元素 - 该元素将包含您的所有数字。

总结一下，只需这样做：

```
$sum = 0;
$j = count($matches[0]);
for ($i = 0; i < $j; ++$i) {
  $sum += (int)$matches[0][$i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T22:32:10.727

尝试使用 $matches[0] 而不是 $matches（返回 7）。

然后，如果您想对所有数字求和，可以使用 foreach 函数

# bash - （bash 脚本）运行 g-wan 时出错

> ID：15981846
> 
> 赞同：1
> 
> 时间：2013-04-12T22:27:24.323
> 
> 标签：bash, path, g-wan

每次我尝试运行 g-wan 时，都会出现以下错误：

```
./gwan: 1:Syntax error: word unexpected (expecting ")") 
```

我已经尝试过 32 位和 64 位版本。

我在 ubuntu 11 中运行它并且我已经安装了所有必要的软件包，知道发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:54:06.857

您没有运行 G-WAN（已编译的程序）：您是系统脚本（错误是系统 bash 脚本错误而不是 C 运行时错误）。

确保运行时在 G-WAN 程序目录中`./gwan`

# r - 将函数应用于函数使用行元素的数据帧的行

> ID：15981847
> 
> 赞同：1
> 
> 时间：2013-04-12T22:27:42.103
> 
> 标签：r, dataframe, rows, apply

我正在尝试将函数应用于数据框的每个元素。这种数据框的一个简单示例是：

```
> accts
ACCOUNT       DATE
   1     2008-03-01
   2     2009-06-17
   3     2008-07-02
   4     2009-03-15 
```

我需要做的是查看此数据框的每一行，然后在更大的数据框中找到该帐户，如下所示：

```
> trans
ACCOUNT_NUM  TRAN_DATE
        1    2008-02-02
        2    2008-04-02
        3    2008-03-16
        3    2009-08-22
        3    2008-05-05
        6    2010-11-03
        7    2008-09-18
        4    2009-10-14
        4    2009-01-15
       10    2011-07-06 
```

对于“accts”数据框中的每一行，我需要获取与该帐户对应的“trans”数据框中的记录，该帐户也具有最接近“DATE”但在它之前发生的“TRAN_DATE”。我尝试使用应用功能：

```
tranDateVector <- apply(accts, 2, getTranDate)

getTranDate <- function(x)
{
  tranDate <- subset(trans$TRAN_DATE, with(trans, ACCOUNT_NUM == x[1] & TRAN_DATE < x[2]))
  dataDiff <- x[2] - tranDate
  tranDate <- unique(date[which(dateDiff == min(dateDiff))])
  return(tranDate)
}

accts <- cbind(accts, tranDateVector) 
```

当我运行我的迷你示例时，我收到以下错误：

```
Error in charToDate(x) : 
  character string is not in a standard unambiguous format 
```

然而，当我运行我的完整版本时，我得到了一个不同的错误，我意识到它来自这一行：

```
subset(trans$TRAN_DATE, with(trans, ACCOUNT_NUM == x[1] & TRAN_DATE < x[2])) 
```

如果我将 x 设置为我的 'accts' 数据框的第三行，那么：

```
 x
     ACCOUNT       DATE
3       3      2008-07-02 
```

并运行代码的“子集”行，我收到以下错误，这与我在常规代码上遇到的错误相对应：

```
> subset(trans$TRAN_DATE, with(trans, ACCOUNT_NUM == x[1] & TRAN_DATE < x[2]))
Error in eval(expr, envir, enclos) : 
  dims [product 1] do not match the length of object [10]
In addition: Warning message:
In eval(expr, envir, enclos) :
  Incompatible methods ("Ops.Date", "Ops.data.frame") for "<" 
```

谢谢你的帮助。

* * *

（以下信息是在提供上述答案后添加的 b/c 我意识到有一个并发症）

我刚刚意识到的功能还有一些额外的限制需要考虑，这些都会导致问题变得更加复杂。在“accts”数据框中有两种不同的状态：

```
> accts <- data.frame(
+     ACCOUNT = 1:4,
+     DATE = as.Date(c("2008-03-01", "2009-06-17",
+                      "2008-07-02", "2009-03-15")),
+     STATUS = c("new", "old", "new", "old")) 
```

在“accts”框架中，记录可以分类为旧的或新的。如果帐户是“新”的，则它需要满足前面指定的条件，但它也只能与“trans”中标记为“revised”的记录匹配。同样对于“旧”帐户，它们只能与 trans 的“原始”记录进行比较：

```
> trans <- data.frame(
+     ACCOUNT_NUM = c(1,2,3,3,3,6,7,4,4,10),
+     TRAN_DATE = as.Date(c("2008-02-02", "2008-04-02",
+                           "2008-03-16", "2009-08-22",
+                           "2008-05-05", "2010-11-03",
+                           "2008-09-18", "2009-10-14",
+                           "2009-01-15", "2011-07-06")),
+     BALANCE = c("orig", "orig", "orig", "orig", "revised", "orig", "revised", "revised", "revised", "orig")) 
```

我尝试实现您的代码以适应这种情况，如下所示：

```
library(plyr)
adply(accts, 1, transform,
            TRAN_DATE = { 
                 if(STATUS == "old")
                 {
                    data <- subset(trans, ACCOUNT_NUM == ACCOUNT &
                                             TRAN_DATE < DATE & BALANCE == "orig")
                 }else{
                    data <- subset(trans, ACCOUNT_NUM == ACCOUNT &
                                             TRAN_DATE < DATE & BALANCE == "revised")
                 }
                 tail(data$TRAN_DATE, 1) }) 
```

我从这段代码中得到以下错误：

```
Error in data.frame(list(ACCOUNT = 1L, DATE = 13939, STATUS = 1L), BALANCE = list( : 
  arguments imply differing number of rows: 1, 0 
```

我很抱歉在我最初的帖子中没有指定这个要求，我没有意识到这会导致问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T23:12:15.570

因为您的数据混合了类型（数字、日期），所以我会远离使用`apply`，因为它会将您的数据强制转换为单一类型。相反，我建议使用`plyr`'s`adply`函数，它确实保留所有类型，因为每一行都作为 data.frame 处理。它还有一个优点是仍然可以使用列名访问字段，这通常会导致代码更具可读性，我会让你判断。

您的数据：

```
accts <- data.frame(
  ACCOUNT = 1:4,
  DATE = as.Date(c("2008-03-01", "2009-06-17",
                   "2008-07-02", "2009-03-15")))

trans <- data.frame(
  ACCOUNT_NUM = c(1,2,3,3,3,6,7,4,4,10),
  TRAN_DATE = as.Date(c("2008-02-02", "2008-04-02",
                        "2008-03-16", "2009-08-22",
                        "2008-05-05", "2010-11-03",
                        "2008-09-18", "2009-10-14",
                        "2009-01-15", "2011-07-06"))) 
```

使用的解决方案`adply`：

```
library(plyr)
adply(accts, 1, transform,
      TRAN_DATE = { data <- subset(trans, ACCOUNT_NUM == ACCOUNT &
                                          TRAN_DATE < DATE)
                    tail(data$TRAN_DATE, 1) })
#   ACCOUNT       DATE  TRAN_DATE
# 1       1 2008-03-01 2008-02-02
# 2       2 2009-06-17 2008-04-02
# 3       3 2008-07-02 2008-05-05
# 4       4 2009-03-15 2009-01-15 
```

# javascript - AngularJS - 如何在不同的容器中使用 ng-repeat

> ID：15981848
> 
> 赞同：4
> 
> 时间：2013-04-12T22:27:53.730
> 
> 标签：javascript, arrays, multidimensional-array, angularjs

我正在尝试使用 ng-repeat 来显示数字数组。如果我希望它在不同的容器中，例如在不同的容器中，如何实现这一点`ul`？此外，每个`ul`最多只能包含 2 个`li`。

```
$scope.numbers = [1,2,3,4,5]

<div ng-controller="myController">
    <ul>
        <li>1</li>
        <li>2</li>
    </ul>
    <ul>
        <li>3</li>
        <li>4</li>
    </ul>
    <ul>
        <li>5</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T22:37:08.607

您应该将该`numbers`数组拆分为块，然后使用嵌套的`ng-repeat`.

**JavaScript：**

```
var i, l = $scope.numbers.length;

$scope.chunks = [];

for ( i = 0; i < l; i += 2) {
    $scope.chunks.push( $scope.numbers.slice(i, i + 2) );
} 
```

**HTML：**

```
<div ng-controller="myController">
    <ul ng-repeat="chunk in chunks">
        <li ng-repeat="number in chunk">{{ number }}</li>
    </ul>
</div> 
```

* * *

[**在这里查看它的实际应用**](http://plnkr.co/edit/ck4rBXGJ6mbuBG6Zr0Ju?p=preview)。

# php - PHP cookie 和会员安全

> ID：15981850
> 
> 赞同：2
> 
> 时间：2013-04-12T22:28:02.413
> 
> 标签：php, html, security, cookies

我创建了一个论坛，它在登录时使用 PHP 会话来确定用户 ID，并使用 cookie 进行登录。

我想我有两个问题：

1.  这是最好/最安全的方法吗？
2.  Cookies可以通过javascript的地址栏手动添加，存在巨大的安全隐患。有没有办法解决？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:30:28.810

首先，确保您使用的是 https 而不是 http。这将防止您的流量被嗅探和利用。

其次，生成尽可能随机的值以用作 cookie 中的标记。这就是有多少大型网站进行用户跟踪。在服务器端有一个令牌映射到用户，用于跟踪身份。请记住：来自客户端的任何内容都是不可信的，并且可能被篡改。

第三，使用[HMAC](https://en.wikipedia.org/wiki/Hash-based_message_authentication_code)使篡改更加困难。您不希望用户能够暴力破解其他令牌。

编辑：

在构建此系统时，您可能会发现这些其他 SO 问题/答案很有帮助：

1.  关于创建和使用令牌的详细信息（不一定必须是适用的 REST 服务）： [REST Web 服务身份验证令牌实现](https://stackoverflow.com/questions/15490265/rest-web-service-authentication-token-implementation/15490642#15490642)

2.  创建好的令牌（不要使用 microtime）：[使用 microtime() 生成密码重置令牌是不好的做法](https://stackoverflow.com/questions/15527706/is-using-microtime-to-generate-password-reset-tokens-bad-practice/15530476#15530476)

# javascript - Node.js / JavaScript - JavaScript 窗口变量破坏功能

> ID：15981858
> 
> 赞同：-1
> 
> 时间：2013-04-12T22:28:37.147
> 
> 标签：javascript, node.js, pug

因此，在我的 Jade 模板上，我通过包含名称数组的路径向它传递了一个变量。

这是该模板中的 JavaScript：

```
script(type='text/javascript')
  window.teams = !{JSON.stringify(teams)}; 
```

`teams`包含我谈到的数组。这是JavaScript：

```
$(function () {
  // Array of team names
  var teamNames = [];
  for(var i = 0; i < teams.length; i++) {
    teamNames.push(teams[i].name);
  }

  var bracketTeams = [];

  var teamMatches = new Array();
  for(var i=0;i<teamNames.length; i+=2)
  {       
    teamMatches.push([teamNames[i],teamNames[i+1]]);
  }

  var bracketData = {
    teams : teamMatches,
    results : [[
        [ [1, 0], [1, 0] ],
        [ [1, 0], [1, 0] ]
      ]]
  }
    $('#tournamentBrackets').bracket({
        init: bracketData
    });
}); 
```

现在由于某种原因，当我添加此 JavaScript 代码时，系统其余部分的功能完全中断。如果我把它注释掉，那么系统的其余部分就可以正常工作，如果我把它留在里面，按钮什么也不做，链接无处可去，数据不会添加（尽管数据已加载，即列出了团队数据库）。如果我加载页面，然后取消注释 JS，页面会正常工作。

有什么想法在这段代码中破坏了我的系统吗？我刚刚尝试将 window.teams 重命名为 window.testName ，但它仍然坏了。真的很迷茫。

编辑：生成的 HTML

[http://pastebin.com/VdkEfANb](http://pastebin.com/VdkEfANb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:35:43.333

在 Node.js 中，该`window`对象可能不存在。Node.js 具有与浏览器不同的全局对象。在 Node.js 中，全局对象实际上命名为`global`. 除非您专门设置了一个名为 的对象，否则`window`当您尝试将值分配给`window.teams`

# jquery - 如何将不同的 jquery ui 主题添加到 Visual Studio 2012 MVC4 项目

> ID：15981864
> 
> 赞同：4
> 
> 时间：2013-04-12T22:28:55.933
> 
> 标签：jquery, jquery-ui, asp.net-mvc-4, visual-studio-2012

有人可以逐步向我解释如何在 Visual Studio 2012 中更改 jquery ui 主题，例如，当我使用此命令 Install-Package jQuery.UI.Themes.lightness 时，如何使 ui-lightness 出现或是否我选择另一个主题如何显示它。原因是我不想使用默认主题，即基本主题。我想知道要更改的正确文件

任何帮助将不胜感激。

这是我已经在我的布局页面中的内容。

```
 @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @Styles.Render("~/Content/themes/base/css")
    @Styles.Render("~/Content/themes/ui-lightness/css")
 @Scripts.Render("~/bundles/jqueryui")
@Styles.Render("~/Content/themes/base/css")
 @Styles.Render("~/Content/themes/ui-lightness/css") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T22:52:41.940

首先确保您捆绑了正确的文件。

**App_Start/BundleConfig.cs**

```
// you want to remove this
bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
   "~/Content/themes/base/jquery-ui.core.css",
    ...
);
// and add this
bundles.Add(new StyleBundle("~/Content/themes/ui-lightness/css").Include(
    "~/Content/themes/ui-lightness/jquery-ui.core.css",
    ...
); 
```

然后在布局中指定捆绑集。

**_Layout.cshtml**

```
@Styles.Render("~/Content/themes/base/css")          // remove this
@Styles.Render("~/Content/themes/ui-lightness/css")  // add this 
```

这一切都假设您将主题安装在`/Content/themes`

最简单的做法是在您的布局和捆绑配置中找到`base`并替换它。`ui-lightness`

# apache-pig - 当我尝试加载文件 .log 时出现语法错误

> ID：15981865
> 
> 赞同：0
> 
> 时间：2013-04-12T22:29:06.407
> 
> 标签：apache-pig

我有下一行：

```
(2013-03-21 14:36:21,686) WARN TP-Processor16 com.lolo.exc - fail load)
(2013-03-21 14:36:21,686) WARN TP-Processor11 com.lolo.exc - fail load) 
```

这是一个**log4j**日志，我必须使用 PIG 来处理它。我不确定我必须使用什么样的方法......`textloader`或者`pigstorage`，让我知道你的暴徒

# javascript - 当另一个打开时关闭 1 个 JavaScript 选项卡

> ID：15981874
> 
> 赞同：0
> 
> 时间：2013-04-12T22:29:57.267
> 
> 标签：javascript, web

我是 javascript 新手，使用和编辑在线找到的代码。

到目前为止，我有这个工作。

```
 <script language="javascript">
 function welcome() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "welcome";
    } else {
        ele.style.display = "welcome";
        text.innerHTML = "Planning Statements";
        document.getElementById("toggleText1").style.display = 'none';
        document.getElementById("toggleText2").style.display = 'none';
    }
}

function welcome1() {
    var ele = document.getElementById("toggleText1");
    var text = document.getElementById("displayText1");
    if(ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "welcome 1";
    } else {
       ele.style.display = "block";
       text.innerHTML = "welcome1";
       document.getElementById("toggleText").style.display = 'none';
       document.getElementById("toggleText2").style.display = 'none';
    }
}

function welcome2() {
    var ele = document.getElementById("toggleText2");
    var text = document.getElementById("displayText1");
    if(ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "welcome 2";
    } else {
       ele.style.display = "block";
       text.innerHTML = "welcome2";

    }
}
    </script>

                    <li style="text-align:left; margin-left:5px;"><a id="displayText" href="javascript:welcome();">welcome</a></li>
                    <li style="text-align:left; margin-left:5px;"><a id="displayText1" href="javascript:welcome1();">welcome 1</a></li>
                    <li style="text-align:left; margin-left:5px;"><a id="displayText2" href="javascript:welcome2();">welcome 2</a></li>

    <div id="toggleText" style="display: none">
    <p>Welcome World!</p>
    </div>
    <div id="toggleText1" style="display: none">
    <p>Welcome World again!</p>
    </div>
    <div id="toggleText2" style="display: none">
    <p>Welcome World again wow!</p>
    </div> 
```

对我来说，这行得通。当您点击欢迎时，它会显示欢迎世界。当你点击welcome 1 ....它保持欢迎世界，然后也再次显示欢迎世界。

如果功能欢迎 1 打开，我是否可以关闭功能欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:38:16.190

这应该这样做：

```
<script language="javascript">

function welcome() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "Welcome";
    } else {
        ele.style.display = "block";
        text.innerHTML = "Welcome";
        document.getElementById("toggleText1").style.display = 'none';
    }
}

function welcome1() {
    var ele = document.getElementById("toggleText1");
    var text = document.getElementById("displayText1");
    if(ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "Welcome 1";
    } else {
       ele.style.display = "block";
       text.innerHTML = "Welcome 1";
       document.getElementById("toggleText").style.display = 'none';
    }
}
</script>

<div id="toggleText" style="display: none">
<p>Welcome World!</p>
</div>
<div id="toggleText1" style="display: none">
<p>Welcome World again!</p>
</div> 
```

你必须做的是当你隐藏显示一个元素时，确保你隐藏了另一个。

# hadoop - hadoop，段落中的字数

> ID：15981878
> 
> 赞同：2
> 
> 时间：2013-04-12T22:30:01.887
> 
> 标签：hadoop, mapreduce, word-count

通常，Hadoop 示例定义了如何对一个文件或多个文件进行字数统计，字数统计的结果将来自整个集合！

我希望**对每个段落**进行字数统计并存储在 paragh(i)_wordcnt.txt 等单独的文件中。

怎么做？（问题是 mapper 运行整个集合，reducer 最终收集输出！

**如果我达到特定的标记写入结果，我可以做些什么！** ) 说如果文件内容：

```
para1
...
para2
...
para3
... 
```

我可以看到 para2 写 para1 的字数结果吗？或者如果以其他方式将每个段落写入单独的文件中，如何执行此序列

```
 loop: 
   file(i)(parai)->Mapper->Reducer->multipleOutput(output-file(i))->writetofile(i);
   i++;
   goto loop; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:04:50.693

您需要让 RecordReader 一次读取一个段落。看到这个问题：[Overriding RecordReader to read Paragraph on once instead of line](https://stackoverflow.com/questions/15610449/overriding-recordreader-to-read-paragraph-at-once-instead-of-line)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:47:50.017

我正在写基本的基础，因为我们可以做到这一点。

我认为我们必须为这个过程运行链接的映射器和减速器。

在第一个映射器中，您必须使用[RecordReader](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/mapred/RecordReader.html)并将其键设置为整个段落。这样，我们将获得与段落一样多的键。然后您需要使用减速器作为[身份减速器](http://wikidoop.com/wiki/Hadoop/MapReduce/Reducer)，并再次让减速器的输出到一个新的映射器，该映射器将段落作为键。

现在，由于您的新映射器中有段落，您可以根据需要调整著名的[字数统计代码](http://developer.yahoo.com/hadoop/tutorial/module3.html)。（只需在此处将 KEYS 替换为 VALUES，其余部分将相同）。

由于您在 reducer 中嵌套了 mapper，因此在单独的文件中获取段落的字数将很容易。

请告诉我的方法是否不正确。

# java - org.hibernate.MappingException：外键 (FK12A711396456CA10:) 的列数必须与引用的主键相同

> ID：15981881
> 
> 赞同：1
> 
> 时间：2013-04-12T22:30:30.280
> 
> 标签：java, hibernate, foreign-keys

我的 Java 代码中的 Netbeans 出现此错误：

```
org.hibernate.MappingException: Foreign key (FK12A711396456CA10:devolucion_master [devolucion_consecutivo])) must have same number of columns as the referenced primary key (devolucion [detalle_ticket_id,detalle_ticket_ticket_id,detalle_ticket_fondo_fijo_id,detalle_ticket_caja_id,consecutivo] 
```

我制作了一个从 DevolucionMaster 到 Devolucion 的外键，使用 Devolucion 中的“consecutivo”到我的 DevolucionMaster 变量“consecutivo”，问题是对于 Devolucion，“键”是复合键，我只使用外键的一个元素关键，也许这就是为什么（它需要使用 5 来构成主键）。

这是 DevolucionMaster.hbm.mxl：

```
<hibernate-mapping>
  <class catalog="pos" name="dunosusa.pos.model.DevolucionMaster" table="devolucion_master">
    <composite-id class="dunosusa.pos.model.DevolucionMasterId" name="id">
      <key-property name="id" type="int">
        <column name="id"/>
      </key-property>
      <key-property name="detalleTicketTicketId" type="int">
        <column name="detalle_ticket_ticket_id"/>
      </key-property>
      <key-property name="detalleTicketFondoFijoId" type="int">
        <column name="detalle_ticket_fondo_fijo_id"/>
      </key-property>
      <key-property name="detalleTicketCajaId" type="int">
        <column name="detalle_ticket_caja_id"/>
      </key-property>
    </composite-id>
    <many-to-one class="dunosusa.pos.model.Devolucion" fetch="select" name ="devolucion">
      <column name="devolucion_consecutivo" not-null="true"/>
    </many-to-one>
    <many-to-one class="dunosusa.pos.model.Usuario" fetch="select" name="usuario">
      <column length="6" name="usuario_clave_autorizo"/>
    </many-to-one>
    <many-to-one class="dunosusa.pos.model.Ticket" fetch="select" insert="false" name="ticket" update="false">
      <column name="detalle_ticket_ticket_id" not-null="true"/>
      <column name="detalle_ticket_fondo_fijo_id" not-null="true"/>
      <column name="detalle_ticket_caja_id" not-null="true"/>
    </many-to-one>
    <property name="total" type="big_decimal">
      <column name="total" not-null="true" precision="10"/>
    </property>
    <property name="fecha" type="timestamp">
      <column length="19" name="fecha"/>
    </property>
  </class>
</hibernate-mapping> 
```

这里是 Devolucion.hbm.xml：

```
<hibernate-mapping>
  <class catalog="pos" name="dunosusa.pos.model.Devolucion" table="devolucion">
    <composite-id class="dunosusa.pos.model.DevolucionId" name="id">
      <key-property name="detalleTicketId" type="int">
        <column name="detalle_ticket_id"/>
      </key-property>
      <key-property name="detalleTicketTicketId" type="int">
        <column name="detalle_ticket_ticket_id"/>
      </key-property>
      <key-property name="detalleTicketFondoFijoId" type="int">
        <column name="detalle_ticket_fondo_fijo_id"/>
      </key-property>
      <key-property name="detalleTicketCajaId" type="int">
        <column name="detalle_ticket_caja_id"/>
      </key-property>
      <key-property name="consecutivo" type="int">
        <column name="consecutivo"/>
      </key-property>
    </composite-id>
    <many-to-one class="dunosusa.pos.model.MotivoDevolucion" fetch="select" name="motivoDevolucion">
      <column name="motivo_devolucion_id" not-null="true"/>
    </many-to-one>
    <many-to-one class="dunosusa.pos.model.DetalleTicket" fetch="select" insert="false" name="detalleTicket" update="false">
      <column name="detalle_ticket_id" not-null="true"/>
      <column name="detalle_ticket_ticket_id" not-null="true"/>
      <column name="detalle_ticket_fondo_fijo_id" not-null="true"/>
      <column name="detalle_ticket_caja_id" not-null="true"/>
    </many-to-one>
    <many-to-one class="dunosusa.pos.model.ControlCorte" fetch="select" name="controlCorte">
      <column name="control_corte_fondo_fijo_id" not-null="true"/>
      <column name="control_corte_caja_id" not-null="true"/>
    </many-to-one>
    <property name="cantidad" type="big_decimal">
      <column name="cantidad" precision="8"/>
    </property>
    <property name="fecha" type="timestamp">
      <column length="19" name="fecha"/>
    </property>
    <property name="comentario" type="string">
      <column length="150" name="comentario"/>
    </property>
    <property name="controlDevolucion" type="boolean">
      <column name="control_devolucion" not-null="true"/>
    </property>
    <set name="devolucionMasters" inverse="true">
        <key>
            <column name="devolucion_consecutivo" not-null="true" />
        </key>
        <one-to-many class="dunosusa.pos.model.DevolucionMaster" />
    </set>
  </class>
</hibernate-mapping> 
```

DevolucionMaster.java：（只有变量，没有set和get）

```
public class DevolucionMaster  implements java.io.Serializable {

     private DevolucionMasterId id;
     private Devolucion devolucion;
     private Usuario usuario;
     private Ticket ticket;
     private BigDecimal total;
     private Date fecha;
} 
```

Devolucion.java：（与 DevolucionMaster 相同）

```
public class Devolucion  implements java.io.Serializable {

     private DevolucionId id;
     private MotivoDevolucion motivoDevolucion;
     private DetalleTicket detalleTicket;
     private ControlCorte controlCorte;
     private BigDecimal cantidad;
     private Date fecha;
     private String comentario;
     private boolean controlDevolucion;
     private Set devolucionMasters = new HashSet(0);
} 
```

我不知道我的错误是什么，我在互联网上搜索过类似的错误，但我读过的任何解决方案都没有奏效（原谅我的英语不好）。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:45:01.293

是的，你有一个`Devolucion`类的复合主键，你试图通过一个简单的 column/field 来引用它`devolucion_master.devolucion_consecutivo`。

我不知道有一种方法可以轻松地告诉 Hibernate 该`devolucion_consecutivo`列实际上是 type `dunosusa.pos.model.DevolucionId`。

这就是为什么我从未使用过复合主键。我总是有一个`Long`( `bigint`) 类型的主键，并在需要的地方强制外键组合的唯一性。使用起来更容易，没有您遇到的问题。

**附录：** 我只是做了一些挖掘，实际上，有一种方法可以做到这一点:-) 但正如我所说，它不像使用单列 PK/FK 键那么容易。

而不是这个：

```
<hibernate-mapping>
  <class catalog="pos" name="dunosusa.pos.model.DevolucionMaster" table="devolucion_master">
  ...
    <many-to-one class="dunosusa.pos.model.Devolucion" fetch="select" name="devolucion">
      <column name="devolucion_consecutivo" not-null="true"/>
    </many-to-one>
    ... 
```

您应该像这样列出 FK 中的所有 PK 列：

```
<hibernate-mapping package="dunosusa.pos.model">
  <class catalog="pos" name="DevolucionMaster" table="devolucion_master">
    ...
    <many-to-one class="Devolucion" fetch="select" name="devolucion">
      <column name="devolucion_detalle_ticket_id" not-null="true"/>
      <column name="devolucion_detalle_ticket_ticket_id" not-null="true"/>
      <column name="devolucion_detalle_ticket_fondo_fijo_id" not-null="true"/>
      <column name="devolucion_detalle_ticket_caja_id" not-null="true"/>
      <column name="devolucion_consecutivo" not-null="true"/>
    </many-to-one>
    ... 
```

一个小建议 - 使用元素的`package`属性，`hibernate-mapping`这样你就不必在任何地方都输入它 - 它使它更具可读性。

祝你好运。

# html - Twitter Bootstrap 和 Jsf - 如何集成 Fuel UX Wizard.js

> ID：15981882
> 
> 赞同：0
> 
> 时间：2013-04-12T22:30:32.423
> 
> 标签：html, css, jsf, twitter-bootstrap, fuelux

我想将fuelUx[向导](http://exacttarget.github.io/fuelux/#wizard)包含到我的jsf/java 项目中。但是，我正在努力将组件转换为 jsf：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.prime.com.tr/ui">

<h:head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap-responsive.css" rel="stylesheet"
        type="text/css" />
    <link href="css/override.css" rel="stylesheet" type="text/css" />
    <link href="dist/css/fuelux.css" rel="stylesheet" type="text/css" />
    <link href="dist/css/fuelux-responsive.css" rel="stylesheet"
        type="text/css" />
    <link href="dist/css/fuelux.min.css" rel="stylesheet" type="text/css" />
    <link href="dist/css/fuelux-responsive.min.css" rel="stylesheet"
        type="text/css" />
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

    <!-- Le fav and touch icons
<link rel="shortcut icon" href="../assets/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
-->

    <h:outputScript name="js/require.js" />
    <script>
//<![CDATA[
        requirejs.config({
            paths: {
                'jquery': 'lib/jquery',
                'underscore': 'http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min',
                'bootstrap': 'lib/bootstrap/js',
                'fuelux': 'src'
            }
        });

        require(['jquery', 'sample/data', 'sample/datasource', 'sample/datasourceTree', 'fuelux/all'], function ($, sampleData, StaticDataSource, DataSourceTree) {

            // WIZARD
            $('#MyWizard').on('change', function(e, data) {
                console.log('change');
                if(data.step===3 && data.direction==='next') {
                    // return e.preventDefault();
                }
            });
            $('#MyWizard').on('changed', function(e, data) {
                console.log('changed');
            });
            $('#MyWizard').on('finished', function(e, data) {
                console.log('finished');
            });
            $('#btnWizardPrev').on('click', function() {
                $('#MyWizard').wizard('previous');
            });
            $('#btnWizardNext').on('click', function() {
                $('#MyWizard').wizard('next','foo');
            });
            $('#btnWizardStep').on('click', function() {
                var item = $('#MyWizard').wizard('selectedItem');
                console.log(item.step);
            });
            $('#MyWizard').on('stepclick', function(e, data) {
                console.log('step' + data.step + ' clicked');
                if(data.step===1) {
                    // return e.preventDefault();
                }
            });

        });
        //]]>
    </script>

</h:head>
<h:body>

    <div class="container">

        <!-- WIZARD -->
        <div>
            <div id="MyWizard" class="wizard">
                <ul class="steps">
                    <li data-target="#step1" class="active"><span
                        class="badge badge-info">1</span>Step 1<span class="chevron"></span></li>
                    <li data-target="#step2"><span class="badge">2</span>Step 2<span
                        class="chevron"></span></li>
                    <li data-target="#step3"><span class="badge">3</span>Step 3<span
                        class="chevron"></span></li>
                    <li data-target="#step4"><span class="badge">4</span>Step 4<span
                        class="chevron"></span></li>
                    <li data-target="#step5"><span class="badge">5</span>Step 5<span
                        class="chevron"></span></li>
                </ul>
                <div class="actions">
                    <button class="btn btn-mini btn-prev">
                        <i class="icon-arrow-left"></i>Prev
                    </button>
                    <button class="btn btn-mini btn-next" data-last="Finish">
                        Next<i class="icon-arrow-right"></i>
                    </button>
                </div>
            </div>
            <div class="step-content">
                <div class="step-pane active" id="step1">This is step 1</div>
                <div class="step-pane" id="step2">This is step 2</div>
                <div class="step-pane" id="step3">This is step 3</div>
                <div class="step-pane" id="step4">This is step 4</div>
                <div class="step-pane" id="step5">This is step 5</div>
            </div>

            <h:button type="button" class="btn btn-mini" id="btnWizardPrev"
                value="prev" />
            <h:button type="button" class="btn btn-mini" id="btnWizardNext"
                value="next" />
            <h:button type="button" class="btn btn-mini" id="btnWizardStep"
                value="current step" />
        </div>

    </div>

    <!--/.fluid-container-->

    <!-- Le javascript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <h:outputScript name="js/jquery-1.7.2.min.js" />
    <h:outputScript name="js/bootstrap.min.js" />
    <h:outputScript name="js/jquery.dataTables.min.js" />
    <h:outputScript name="js/bootstrap.js" />

</h:body>
</html> 
```

当我在没有 jsf 的情况下在一个清晰的 html 页面上测试组件时，我看到我必须包含它才能使其工作：

```
<html  lang="en" class="fuelux"> 
```

但是，我认为这在 jsf 中是不可能的。那么，jsf中如何实现组件呢？我很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:05:32.920

如果您无法在标记中包含该类，则可以尝试使用 jQuery 执行以下操作：

```
$('html').addClass('fuelux'); 
```

# ios - 关闭 MailComposer 后，状态栏位于导航栏的顶部

> ID：15981888
> 
> 赞同：4
> 
> 时间：2013-04-12T22:31:10.283
> 
> 标签：ios, objective-c, user-interface, uinavigationbar, statusbar

问题：在我作为模态视图`navigationBar`呈现和关闭后，我的状态栏出现在顶部。`MFMailComposerViewController`

```
-(IBAction)openMail:(id)sender
{
    MFMailComposeViewController *mc = [[MFMailComposeViewController alloc] init];
    mc.mailComposeDelegate = self;

    [mc setSubject:emailTitle];
    [mc setMessageBody:messageBody isHTML:YES];
    [mc setToRecipients:toRecipents];
    [mc.navigationItem.leftBarButtonItem setTintColor:[UIColor colorWithRed:144/255.0f green:5/255.0f blue:5/255.0f alpha:1.0f]];
    [self presentViewController:mc animated:YES completion:NULL];
}

- (void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
switch (result)
{
    case MFMailComposeResultCancelled:
        NSLog(@"Mail cancelled");
        break;
    case MFMailComposeResultSaved:
        NSLog(@"Mail saved");
        break;
    case MFMailComposeResultSent:
        NSLog(@"Mail sent");
        break;
    case MFMailComposeResultFailed:
        NSLog(@"Mail sent failure: %@", [error localizedDescription]);
        break;
    default:
        break;
}
// Reset background image for navigation bars
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navigationBar.png"] forBarMetrics:UIBarMetricsDefault];
NSLog(@"%@",[GGStackPanel printFrameParams:self.view]);
// Close the Mail Interface
GGAppDelegate * appDel = [[UIApplication sharedApplication] delegate];

HHTabListController * contr = (HHTabListController*)appDel.viewController;
[contr setWantsFullScreenLayout:NO];
NSLog(@"%i",[contr wantsFullScreenLayout]);
[self dismissViewControllerAnimated:YES completion:NULL];

} 
```

Stackoverflow 上有几个类似的问题，但没有一个建议的解决方案对我有用。我已经尝试过：

[关闭模态视图后的状态栏和导航栏问题](https://stackoverflow.com/questions/3756943/status-bar-and-navigation-bar-problem-after-dismissed-modal-view)

[http://developer.appcelerator.com/question/120577/nav-bar-appears-underneath-status-bar](http://developer.appcelerator.com/question/120577/nav-bar-appears-underneath-status-bar)

我尝试从 AppDelegate 呈现和解雇，没有帮助。

更改视图框架或导航栏框架有效，但我必须为我的应用程序中的所有其他视图做同样的事情（其中有很多）。这将使我的整个应用程序依赖于这个小错误。

## 截图

[![演示前查看](https://i.stack.imgur.com/ou0vA.png)](https://i.stack.imgur.com/ou0vA.png)

**关闭 MailComposer 后：**

[![解散后查看](https://i.stack.imgur.com/XfTbU.png)](https://i.stack.imgur.com/XfTbU.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:16:00.233

WantsFullScreenLayout 是一个复杂且不相关的东西。所有视图控制器都需要嵌入到“布局”视图控制器（Apples UINavigationController，Apple 的 UITabBarController）中，或者完全实现“我应该有多大，我应该在哪里定位？”的复杂逻辑。他们自己。

Apple 在 iOS 1.0 中决定您看到的 iPhone 主视图不会从 0,0 开始。包含它的 Window 从 (0,0) 开始，但它与状态栏重叠。

我认为这是他们后悔的决定，这在当时是有道理的，但从长远来看，它会引起很多错误。

净效果是：

1.  UINavigationController 和 UITabBarController 具有特殊的（未记录的）内部代码，使其看起来好像（0,0）是左上角 - 它们强制调整大小/重新定位您添加到它们的任何 UIViewController
2.  ...如果您不使用其中一个作为主控制器，则必须自己重新实现该逻辑。如果您使用的是第 3 方 UIViewController 实例，则逻辑通常执行不正确或丢失。
3.  ...您可以通过重新定位 UIViewController.view （其根视图）在运行时自己修复此问题，例如：

（代码）

```
UIViewController* rootController = // in this case HHTabController?
UIView* rootView = rootController.view;
CGRect frame = rootView.frame;
CGPoint oldOrigin = frame.origin;
CGPoint newOrigin = // calculate this, according to Apple docs.
// in your current case, it should be: CGPointMake( 0, 20 );
frame.origin = newOrigin;
frame.size = CGSizeMake( frame.size.width - (newOrigin.x - oldOrigin.x), frame.size.height - (newOrigin.y - oldOrigin.y) );
rootView.frame = frame; 
```

...显然，每次都必须这样做很烦人。这就是为什么 Apple 强烈鼓励大家使用 UINavigationController 和/或 UITabBarController :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-23T22:33:52.587

这种替代解决方案也非常方便处理顶部布局指南在以模态方式呈现视图控制器后重新定位自身的奇怪行为。

将顶部间距的约束添加到“顶部布局指南”而不是实际的“视图”。选择视图（当前距离...），如下图所示： [![在此处输入图像描述](https://i.stack.imgur.com/XdTgD.png)](https://i.stack.imgur.com/XdTgD.png)

礼貌：[https ://stackoverflow.com/a/24818204/2959346](https://stackoverflow.com/a/24818204/2959346)

# python - 从非 uwsgi 进程与 uwsgi RPC 应用程序对话

> ID：15981891
> 
> 赞同：1
> 
> 时间：2013-04-12T22:31:40.957
> 
> 标签：python, rpc, uwsgi

我们有一个工作的 uwsgi 服务器，带有一些 RPC 调用（注意：我们能够使用 uwsgi.rpc 与进程对话，因此它们的设置很好）。我们发现我们有一些未在 uwsgi 下运行的进程，我们想与 RPC 服务器通信。查看 uwsgi 源代码，看起来从不在 uwsgi 后面运行的 python 进程进行通信应该相对容易，但我们所能得到的是：

```
read(): Resource temporarily unavailable [proto/uwsgi.c line 75]
Fri Apr 12 15:21:07 2013 - error parsing request 
```

这是我们正在使用的代码。我认为它正确地打包了数据，但我不确定它为什么不起作用：

```
import socket
from struct import pack

c = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
c.connect(('127.0.0.1', 3035))

fun = 'test_fun'
arg = 'hi'
ulen = len(fun)
arglen = len(arg)
buflen = (2 + ulen) + (2 + arglen)
buf = pack('!B', 173)
buf += pack('!H', buflen)
buf += pack('!B', 0)
buf += pack('!B', ulen & 0xff)
buf += pack('!B', (ulen>>8) & 0xff)
buf += fun
buf += pack('!B', arglen & 0xff)
buf += pack('!B', (arglen>>8) & 0xff)
buf += arg

sent = c.send(buf)
c.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:04:56.907

您需要将标头与正文分开发送，并且函数+参数的长度需要为小端。

```
fun = 'test_fun'                                                     
arg = 'hi'                                                                          
ulen = len(fun)                                                                    
arglen = len(arg)                                                                  
buflen = (2 + ulen) + (2 + arglen)                                                 
buf = pack('!B', 173)                                                              
buf += pack('<H', buflen)                                                          
buf += pack('!B', 0)                                                               
c.send(buf)                                     

buf = pack('!B', ulen & 0xff)                                                      
buf += pack('!B', (ulen>>8) & 0xff)                                                
buf += fun                                                                         
buf += pack('!B', arglen & 0xff)                                                   
buf += pack('!B', (arglen>>8) & 0xff)                                              
buf += arg                                                                         
sent = c.send(buf)                                                                 
print "sent", sent 
```

# php - jQuery 'on' 事件，检查是否未开启

> ID：15981893
> 
> 赞同：3
> 
> 时间：2013-04-12T22:31:59.350
> 
> 标签：php, jquery

`POSTED`我有一个正在运行的事件，使用 on 事件检查我是否将链接悬停在某事之后。

```
$(document).on("mouseenter","#hover",function() {
    load(); 

    $("#sidebar").fadeToggle("slow");
    $("#sidebar").html('');

    $.post("ajax_search.php?type=sidebar", { sidebar : $("#search").val() }, function(get_data) {
        stop_load();

        $("#sidebar").html(get_data);
    });
}); 
```

**问题**

我怎样才能让它在你停止悬停`#hover`时`#sidebar`隐藏起来？我正在发布`#hover`，这就是我使用该`ON`事件的原因。

有偶数`notOn`吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T22:35:15.083

不，没有`notOn`。

但是有一个对应的`mouseenter`: `mouseleave`。

```
$(document).on("mouseenter","#hover",function() {
    $("#sidebar").fadeToggle("slow");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:36:26.473

您正在寻找的是一个[悬停](http://api.jquery.com/hover/)事件，它允许您使用两个事件处理程序，一个是鼠标进入，另一个是鼠标离开，

另一种完成它的方法是

```
$(".selector").on(
{
mouseenter: function() 
{
    //stuff to do on mouseover
},
mouseleave: function()
{
    //stuff to do on mouseleave
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T22:36:57.713

尝试使用 mouseleave 事件：

```
$(document).on("mouseleave","#hover",function() {
      //Code required to hide the sidebar.
 }); 
```

您可能还想考虑延迟执行您的 ajax 调用，缓存结果，并确保它只加载一次。

另外，不要依赖 Toggle 的方法。我会在 mouseenter 和 mouseleave 上显式使用fadeIn 和fadeOut，以防事件解决的顺序变得滞后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T22:37:32.390

没有`notOn`方法。但在以下示例中，该`mouseout`函数的行为将与`notOn`您要查找的一样。这是一个例子：

```
$('#hover').on({
    mouseenter: function(){
        // perform operations when you're hovering on #hover element
        $('#sidebar').fadeIn();
    },
    mouseout: function(){
        // perform operations when you stop hovering over #hover element    
        $('#sidebar').fadeOut();    
    }
}); 
```

# python - Perl 模块 List::Util、List::MoreUtils 在 Python 中的类似功能

> ID：15981894
> 
> 赞同：3
> 
> 时间：2013-04-12T22:32:03.407
> 
> 标签：python, perl

Perl 中有一个非常有用的功能样式列表操作[List::Util](http://perldoc.perl.org/List/Util.html) , [List::MoreUtils](http://search.cpan.org/~adamk/List-MoreUtils-0.33/lib/List/MoreUtils.pm)。Python有类似物吗？*我对uniq、reduce、any、all*和*none*特别感兴趣。

提到的模块提供功能：

*   第一个 max maxstr min minstr 减少 shuffle sum
*   任何 所有 无 notall tr​​ue false firstidx first_index lastidx last_index insert_after insert_after_string 在 after_incl 之后应用索引 before_incl firstval first_value lastval last_value each_array each_arrayref pairwise natatime mesh zip uniq distinct minmax part

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:38:34.770

您提到[的大多数功能已经内置](http://docs.python.org/2/library/functions.html)，包括`reduce()`,`any()`或`all()`.

我对 Perl 不熟悉，但是根据我从您提供的链接中了解到的与Python中的*uniq*[`set()`](http://docs.python.org/2/library/functions.html#func-set)等效的内容（如果您想保持原始顺序，`list(OrderedDict.fromkeys(mylist))`可以是一个解决方案）。

# c# - 如何强制 mongo 以小写形式存储成员？

> ID：15981897
> 
> 赞同：3
> 
> 时间：2013-04-12T22:32:22.637
> 
> 标签：c#, mongodb, mongodb-.net-driver, mlab

我有一组 BsonDocuments，例如：

```
MongoCollection<BsonDocument> products; 
```

当我插入集合时，我希望成员名称始终为小写。阅读文档后，似乎 ConventionPack 是要走的路。所以，我定义了一个这样的：

```
 public class LowerCaseElementNameConvention : IMemberMapConvention
{
    public void Apply(BsonMemberMap memberMap)
    {
        memberMap.SetElementName(memberMap.MemberName.ToLower());
    }

    public string Name
    {
        get { throw new NotImplementedException(); }
    }
} 
```

在我得到我的集合实例之后，我注册了这样的约定：

```
 var pack = new ConventionPack();
        pack.Add(new LowerCaseElementNameConvention());
        ConventionRegistry.Register(
            "Product Catalog Conventions",
            pack,
            t => true); 
```

不幸的是，这对我的收藏中存储的内容的影响为零。我对其进行了调试，发现从未调用过 Apply 方法。

我需要做些什么不同的事情才能让我的公约发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T03:50:30.227

为了使用 IMemeberMapConvention，您必须确保在映射过程发生之前声明您的约定。或者可以选择删除现有映射并创建新映射。

例如，以下是应用约定的正确顺序：

```
 // first: create the conventions
        var myConventions = new ConventionPack();
        myConventions.Add(new FooConvention());

        ConventionRegistry.Register(
           "My Custom Conventions",
           myConventions,
           t => true);

        // only then apply the mapping
        BsonClassMap.RegisterClassMap<Foo>(cm =>
        {
            cm.AutoMap();
        });

        // finally save 
        collection.RemoveAll();
        collection.InsertBatch(new Foo[]
                               {
                                   new Foo() {Text = "Hello world!"},
                                   new Foo() {Text = "Hello world!"},
                                   new Foo() {Text = "Hello world!"},
                               }); 
```

以下是此示例约定的定义方式：

```
public class FooConvention : IMemberMapConvention

    private string _name = "FooConvention";

    #region Implementation of IConvention

    public string Name
    {
        get { return _name; }
        private set { _name = value; }
    }

    public void Apply(BsonMemberMap memberMap)
    {
        if (memberMap.MemberName == "Text")
        {
            memberMap.SetElementName("NotText");
        }
    }

    #endregion
} 
```

这些是我运行这个样本时得出的结果。您可以看到 Text 属性最终被保存为“NotText”：

![使用 NotText 属性打印出 Foos 表](https://i.stack.imgur.com/LfaWw.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T14:55:31.463

如果我理解正确，约定仅在自动映射时应用。如果您有类映射，则需要显式调用`AutoMap()`以使用约定。然后您可以修改自动映射，例如：

```
public class MyThingyMap : BsonClassMap<MyThingy>
{
    public MyThingyMap()
    {
        // Use conventions to auto-map
        AutoMap(); 

        // Customize automapping for specific cases
        GetMemberMap(x => x.SomeProperty).SetElementName("sp"); 
        UnmapMember(x => x.SomePropertyToIgnore);
    }
} 
```

如果您不包含类映射，我认为默认情况下只使用自动映射，在这种情况下您的约定应该适用。在调用`GetCollection<T>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-11T19:48:16.693

您可以定义 ConventionPack，这也是他们关于序列化的官方文档的一部分。就像下面哪些商店是骆驼大小写的属性名称。您可以在配置服务/存储库时放置

官方链接 [https://mongodb.github.io/mongo-csharp-driver/1.11/serialization/[Mongo](https://mongodb.github.io/mongo-csharp-driver/1.11/serialization/%5BMongo) Db Serialization C#] [1](https://mongodb.github.io/mongo-csharp-driver/1.11/serialization/)

```
 // For MongoDb Conventions
            var pack = new ConventionPack
            {
                new CamelCaseElementNameConvention()
            };

            ConventionRegistry.Register(nameof(CamelCaseElementNameConvention), pack, _ => true); 
```

# linux - Shell 脚本和命令行差异

> ID：15981902
> 
> 赞同：0
> 
> 时间：2013-04-12T22:32:52.637
> 
> 标签：linux, bash, shell, unix

我想知道是否有与 shell 脚本相关联的特定权限，或者是否将某些变量引用视为语法不同。

我在下面尝试了我的简短重命名脚本：

```
#!/bin/bash

echo "Starting Renaming Script" 

for file in ./*
do
rename=$(echo $file | sed 's/\(img_\)\([0-9]*-[0-9]*\)-\([0-9]*\)_\([0-9]*\).jpg/newyears_20\3-\2_0\4.jpg/')
mv $file $rename
done 
```

它所做的只是重命名一些文件，但我注意到它可以在命令行上运行，但在我运行时不能在 shell 脚本中运行`sh rename.sh`

我得到了错误

```
rename.sh: syntax error at line 7: `rename=$' unexpected 
```

变量赋值在 shell 中的处理方式与在命令行中的处理方式不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:36:13.567

不同的 shell 以不同的方式处理命令。您的脚本是一个`bash`脚本（如第一行所示`#!/bin/bash`），因此它需要由 运行`bash`，而不是`sh`。

```
bash rename.sh 
```

# matlab - Matlab动态改变音频播放器采样率

> ID：15981904
> 
> 赞同：1
> 
> 时间：2013-04-12T22:33:06.857
> 
> 标签：matlab, real-time, audio-processing

我正在 matlab 中进行一个项目，以获取预定的音频文件并根据实时生成的数据动态更改采样率。我用 dsp.audioplayer 对象遇到了一个非常顽固的障碍。一旦它的状态被锁定，它就不允许改变采样率或样本大小。我现在的想法是改变从 wav 文件中提取的样本大小，并使用 fir rate 转换过滤器对其进行缩放。这是一个值得细读的选项吗？有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:19:42.917

在最新的 MATLAB 版本中，采样率在 dsp.audioplayer 中是可调的。Tunable 表示您可以在对象锁定后更改属性值。

当这不可能时，您的解决方法很好。

# php - 如何在mysql中添加文本+图像+文本+图像+ ...？

> ID：15981906
> 
> 赞同：0
> 
> 时间：2013-04-12T22:33:11.730
> 
> 标签：php, mysql

我正在使用 php 编写脚本。我的典型问题是如何在 mysql 中添加一个有很多替代文本和图像的问题。想象一下有机化学中的描述，它具有那些苯结构。

最有效的方法是什么？我知道如果我有一个图像，我可以在数据库中为该图像添加一个 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:44:29.887

它可能很差，但我在我的项目中这样做。您可以在数据库中创建另一个表。让我解释一下：

文字...图像...文字

您可以通过以下步骤处理此问题：

1.  创建一个表，将 post_meta
    插入每个图像到这个表中，每个图像都应该有一个 post id

2.  在另一个表（实际帖子表）中存储您的帖子，如下所示：
    Text...{MetaImage}....Text

3.  打印帖子时，如果您将标签替换为 post_meta 表中的图像路径，则可以处理此问题。

通过这种方式：
1\. 您不会在 post 表中存储又长又脏的图像 src。2.您的所有媒体内容都将在一个表格中。（图像，音乐，视频等..）

# shell - 使用 Grep 获取字数

> ID：15981911
> 
> 赞同：1
> 
> 时间：2013-04-12T22:33:47.610
> 
> 标签：shell, unix, grep, uniq

我一直在使用

```
grep -o string file | wc -l 
```

获得字数，但我有一个格式的文件

```
help
help
help
how
how
luke
mark 
```

我想知道是否有一个命令会返回：3,2,1,1

而不是多次运行上一个命令

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T22:36:19.577

您可以使用

```
sort input.txt | uniq -c 
```

这将输出

```
 3 help
   2 how
   1 luke
   1 mark 
```

您可以从中继续处理输出。如果您已经知道相同的条目位于连续的行块中，您当然可以跳过`sort`并`uniq`直接使用，这也将保留顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:39:36.847

单进程awk方式

```
awk '{a[$0]++}END{for(x in a)print x" : "a[x]}' file

kent$  echo "help
help
help
how
how
luke
mark"|awk '{a[$0]++}END{for(x in a)print x" : "a[x]}'
luke : 1
help : 3
how : 2
mark : 1 
```

# google-apps-script - 为和库存系统正确构建 scriptDb

> ID：15981913
> 
> 赞同：0
> 
> 时间：2013-04-12T22:34:00.360
> 
> 标签：google-apps-script

我们为我们的装备建立了一个库存和检验管理器，每个项目类型可以有不同的时间表，并且可以有多个相同的项目。我们对所有物品进行序列化以进行跟踪。我的问题是如何将 scriptDb 构造为每个序列号只有一个对象。目前，我正在分别存储每个检查和移动，并且只通过序列号进行迭代。有没有一种适当的方法让它的结构如下所示，而不会覆盖对象的 inspHx 部分中的先前条目？

{serialNumber，itemType，manufacturer，expDate，inspHx{多个条目}}

如果我通过 serialNumber.inspHx 获取项目并将新记录保存到其中，则会删除 inspHx 中的前一个对象。如何继续向一个序列号的 inspHx 添加新记录？

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:12:04.573

数据库设计可能是一门艺术，通常有不止一种方法可以实现您的目标。那说：

您可能有两种对象类型，而不是尝试将所有内容存储在单个对象中。可以说，可能有两个桶，每个数据类型一个。您需要向每个对象添加一个附加参数，以标识其类型或存储桶。类型：元或类型：inspHx

1.  元数据对象，包含有关很少更改的项目的信息。每个序列号应该只有一个。

2个检验对象，每个检验一个，带有日期、状态等。

每种类型都需要一个通用元素或 KEY，在这种情况下是序列号。

查询时，您将使用元数据的序列号和序列号以及对检查对象的任何约束进行两次查询。

有关更多信息，请参见表部分：[https ://developers.google.com/apps-script/scriptdb#tables](https://developers.google.com/apps-script/scriptdb#tables)

# .net - 枚举类型的 XML 反序列化问题

> ID：15981917
> 
> 赞同：1
> 
> 时间：2013-04-12T22:34:30.430
> 
> 标签：.net, c#-4.0, xml-serialization

我有一个如下的 XML 结构：

```
<buttons> 
  <button> 
    <text>Yes</text> 
    <type>Submit</type> 
  </button>
  <button> 
    <text>No</text> 
    <type>Cancel</type> 
  </button>
</buttons> 
```

我有如下反序列化类：

```
[XmlRoot("PageData")]
public class PageData
{
    [XmlArray("buttons")]
    [XmlArrayItem("button")]
    public List<Button> Buttons { get; set; }
}

public class Button
{
    [XmlElement("text")]
    public string Text { get; set; }

    [XmlElement("type"))]
    public PANELBUTTONTYPE Type { get; set; }
}

public enum PANELBUTTONTYPE
{
    [XmlEnum(Name = "Submit")]
    Submit,

    [XmlEnum(Name = "Cancel")]
    Cancel,
} 
```

当我反序列化数据时，出现以下错误

**{“反映属性‘按钮’时出错。”}**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:12:49.730

首先，我希望如果您确实递归地查看异常，您会找到您需要的。错误的输出实际上非常详细。我无法按照您描述的方式出错，这表明您显示的示例与您的真实代码不同。但是，让我们看看问题（希望这将有助于向您展示如何解决它），使用：

```
string s = @"<buttons> 
  <button> 
    <text>Yes</text> 
    <type>Submit</type> 
  </button>
  <button> 
    <text>No</text> 
    <type>Cancel</type> 
  </button>
</buttons>";

try
{
    var serializer = new XmlSerializer(typeof(PageData));
    var obj = (PageData)serializer.Deserialize(new StringReader(s));
}
catch (Exception ex)
{
    while (ex != null)
    {
        Console.Error.WriteLine(ex.Message);
        ex = ex.InnerException;
    }
} 
```

我们得到：

```
There is an error in XML document (1, 2).
<buttons xmlns=''> was not expected. 
```

是的：你的 xml 从 开始`<buttons>`，但你说根是`<PageData>`. 我们可以解决这个问题：

```
[XmlRoot("buttons")]
public class PageData
{
    [XmlElement("button")]
    public List<Button> Buttons { get; set; }
} 
```

随着这一变化 - 我们再试一次，它工作正常。

# c - C条件变量中的posix线程

> ID：15981918
> 
> 赞同：0
> 
> 时间：2013-04-12T22:34:39.497
> 
> 标签：c, variables, pthreads, conditional-statements

我已经完成了对条件变量的阅读，但我只是无法理解如何使用它们。

我有一棵树，到目前为止，当您为已经存在的节点进行插入时，它返回 0，这意味着它已经存在因此失败。

我现在想扩展 pthreads 支持，而不是提到它因为它已经存在并返回 0 而无法完成，我希望它位于等待队列中，一旦请求的节点被删除，继续现在插入。

例如，

假设一棵树有 3 个节点，值为 1、5、10 如果我想插入一个值为 10 的新节点，而不是返回 0 并抛出该值已存在的错误，它应该等待值为 10 的节点要删除，一旦删除，它应该返回并插入。

我的插入函数 else 块，它在之前检查过该节点是否存在该值后返回 0，您可以放心，知道它存在的逻辑工作正常，现在我只是尝试在它等待的地方添加条件变量支持. 数据字段条件在插入的第一行初始化，所以也完成了。我现在希望当它进入这个块时， cond_wait 是唯一将被执行的代码行，然后它会简单地等到 delete 发出信号。我的方法在这里正确吗？如果是，在删除中，我该如何发出信号？请在这里帮助我，我花了几个小时阅读和查看示例以试图解决这个问题。

代码，

```
 else

      {
        //IF DUPLICATE EXISTS
        pthread_mutex_lock(&m);
        node->counter++;
        pthread_cond_wait(&node->condition, &m);
        _insert(string, strlen, ip4_address, node, NULL, NULL);
        pthread_mutex_unlock(&m);

        return 1;//I CHANGED IT FROM 0 to one, since if signalled, and if reached to this limit
        //it was probably successful

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:51:50.833

以下是假设：

```
struct tree
{
   ... // some other data (whatever)
   pthread_mutex_t mitex;
   pthread_cond_t  cond;
}; 
```

辅助功能：

```
int tree_contains_value(struct tree *t, int value)
{
    return ...; // returns 0 or 1
} 
```

这是一个插入：

```
void tree_insert(struct tree *t, int val)
{
    pthread_mutex_lock(&t->mutex);
    while (tree_contains_value(t, value))
    {
        pthread_cond_wait(&t->cond, &t->mutex);
    }
    ... // do actual insert
    pthread_mutex_unlock(&t->mutex);
} 
```

和删除：

```
void tree_remove(struct tree *t, int val)
{
    pthread_mutex_lock(&t->mutex);
    ... //remove value
    pthread_cond_broadcast(&t->cond); // notify all wating threads if any
    pthread_mutex_unlock(&t->mutex);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:40:35.017

条件变量 wait 必须包含在循环中。循环的守卫测试受互斥锁保护的共享数据的条件。使用条件变量是没有意义的。

如果在插入之前等待值为 10 的节点被删除是有意义的，那么它的逻辑如下：

```
lock(mutex)
while (tree.contains(key))
  wait(cond, mutex)
tree.insert(key, value)
unlock(mutex) 
```

另一个任务是这样做的：

```
lock(mutex)
tree.delete(key)
unlock(mutex)
broadcast(cond) // could be in the mutex, but better outside! 
```

当 CAR Hoare 发明监视器和条件变量时，最初的概念有点不同。不用担心多处理器的效率问题，因此支持以下逻辑：

```
enter(monitor);
if (tree.contains(key))   // no loop
  wait(cond, monitor)
tree.insert(key, value)
leave(monitor); 
```

保证当其他任务发出条件信号时，等待的任务将自动转移回监视器，而任何其他任务都无法占用监视器。因此，例如，当一个任务在监视器中并删除节点 10，并向条件变量发出信号时，保证等待该条件变量的第一个任务立即获得监视器。POSIX 互斥锁和条件并非如此（有充分的理由）。

互斥体和监视器之间的另一个区别是线程不必持有互斥体来向条件变量发出信号。事实上，不这样做是个好主意。向条件变量发出信号可能是一项昂贵的操作（访问内核）。互斥锁应该保护尽可能短的关键区域（理想情况下只有几条指令），以尽量减少争用。

另一个区别是 POSIX 条件具有`pthread_cond_broadcast`唤醒所有等待条件的线程的功能。这始终是默认使用的正确功能。在很明显（或可以证明）唤醒单个线程是正确的情况下，该函数`pthread_cond_signal`可用于优化代码。

# c# - 并行线程中断

> ID：15981920
> 
> 赞同：0
> 
> 时间：2013-04-12T22:34:42.233
> 
> 标签：c#, .net, multithreading

我写了一个非静态类。

在这个类中，有一个调用同一个类的静态方法的非静态方法。在这个静态方法中，2 个或更多不同的线程以匿名方法（或 lambda 表达式......）启动，它们独立地在一个非常大的数组上做一些工作。

这一切都完美！性能很好，没有问题......

但是....还有一个受静态锁定对象保护的公共静态属性...除了锁定此静态属性之外，我不会将其用于任何其他目的。

总而言之，看起来像这样：

```
public class testClass
{
    private volatile static bool cancelProcessing;
    private static readonly object lockObj = new object();

    public static bool CancelProcessing
    {
        get
        {
            lock (lockObj)
            {return cancelProcessing;}
        }
        set
        {
            lock (lockObj)
            {cancelProcessing = value;}
        }
    }

    public void callingMethod()
    {
        staticThreadsMethods();
    }

    private static void staticThreadsMethods()
    {
         int parts = 4; // array parts
         CountdownEvent _countdown = new CountdownEvent(parts);
         for (int u = 0; u < parts; u++)
            {
                Threads[u] = delegate(object counter)
                {
                    // array gets processed
                    _countdown.Signal();
                };
         }

         _countdown.Wait();
    }
} 
```

在调用之后`callingMethod()`，2 个或例如 4 个或更多线程与`staticThreadsMethods()`...内的匿名委托（或 lambda 表达式）同时启动

现在，我真正无法理解的是以下内容：

我是否`CancelProcessing`从另一个线程更改 a 属性的值，而所有线程都在并行运行，尽管该属性未在线程中使用（它应该用于取消线程，但我总是有相同的错误/异常），我得到一个 System.AccessViolationException 因为指向数组的不安全指针“不能被取消引用......指针不再有效”（？？）当我只是更改属性值，但除此之外什么都不做...... 。 这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:04:59.577

如果您使用的是 .NET 4 及更高版本，我建议您使用任务而不是线程来进行计算绑定数组处理。使用 CancellationTokenSource 进行取消。关于异常，它可能与您的数组处理有关，而不是与布尔或锁定有关。您必须透露更多有关数组处理的信息。

# php - 如何在 php 中调用函数用于 iOS 存折文件下载

> ID：15981921
> 
> 赞同：0
> 
> 时间：2013-04-12T22:34:45.233
> 
> 标签：php, ios, passbook

我有一个创建 Pass 实例的 getPass.php。这是代码：

```
//create new pass instance
$coupon = new Pass("pass/source");

//fill in dynamic data
$coupon->content['serialNumber'] = (string)uniqid();
$coupon->content['coupon']['secondaryFields'][0]['value'] = 
    (string)$_POST['name'];
$coupon->content['locations'][0] = 
   $locations[(int)$_POST['location']];

$coupon->writePassJSONFile();

$coupon->writeRecursiveManifest();
$coupon->writeSignatureWithKeysPathAndPassword("pass", '12345');
$fileName = $coupon->writePassBundle();

echo "File saved to - $fileName";

**/* THIS IS WHERE IM TRYING TO PRESENT IT */**
$this->outputPassBundleAsWebDownload($fileName); 
```

然后 Pass.php 做了很多工作，因为我用它来通过电子邮件发送工作通行证，但我用演示/下载功能替换了电子邮件功能。所以这里是 Pass.php 的代码：

```
<?php
class Pass {
    private $workFolder = null;
    private $ID = null;

    var $content = null;
    var $passBundleFile = null;

    private function copySourceFolderFilesToWorkFolder($path) {
      //recurse over contents and copy files
      $files = new RecursiveIteratorIterator(
                     new RecursiveDirectoryIterator($path), 
                     RecursiveIteratorIterator::SELF_FIRST);

      foreach($files as $name => $fileObject){
        if (is_file($name) && 
            substr($fileObject->getFileName(), 0, 1)!=".") {

          copy($name, 
            $this->workFolder."/".str_replace($path."/", "",$name));
        } else if (is_dir($name)) {
          mkdir($this->workFolder."/".
                str_replace($path."/", "",$name));
        }
      }
    }

    //import a json file into the object
    function readPassFromJSONFile($filePath) {
      //read the json file and decode to an object
      $this->content = 
         json_decode(file_get_contents($filePath),true);
    }

    //export a json file from the object
    function writePassJSONFile() {
      file_put_contents($this->workFolder."/pass.json",
                        json_encode($this->content));
    }

    //generate the manifest file
    function writeRecursiveManifest() {
      //create empty manifest
      $manifest = new ArrayObject();

      //recurse over contents and build the manifest
      $files = new RecursiveIteratorIterator(
                 new RecursiveDirectoryIterator($this->workFolder), 
                 RecursiveIteratorIterator::SELF_FIRST);

      foreach($files as $name => $fileObject){
        if (is_file($name) && 
              substr($fileObject->getFileName(), 0, 1)!=".") {

          $relativeName = str_replace($this->workFolder.
                                        "/","",$name);

          $sha1 = sha1(file_get_contents(
                         $fileObject->getRealPath()
                  ));
          $manifest[$relativeName] = $sha1;
        }
      }

       //printf debug
       // print_r($manifest);

          //write the manifest file
      file_put_contents($this->workFolder."/manifest.json",
                          json_encode($manifest));
    }

    //generate the bundle signature
    function writeSignatureWithKeysPathAndPassword($keyPath, $pass) {
      $keyPath = realpath($keyPath);

          if (!file_exists($keyPath.'/WWDR.pem')) 
            die("Save the WWDR certificate as
                 $keyPath/WWDR.pem");

      if (!file_exists($keyPath.'/passcertificate.pem')) 
        die("Save the pass certificate as 
             $keyPath/passcertificate.pem");

      if (!file_exists($keyPath.'/passkey.pem')) 
        die("Save the pass certificate key as 
             $keyPath/passkey.pem");

      $output = shell_exec("openssl smime -binary -sign". " -certfile '".$keyPath."/WWDR.pem'".
             " -signer '".$keyPath."/passcertificate.pem'".
             " -inkey '".$keyPath."/passkey.pem'".
             " -in '".$this->workFolder."/manifest.json'".
             " -out '".$this->workFolder."/signature'".
             " -outform DER -passin pass:'$pass'");
    }

        //signature debugging
       //print(file_get_contents($this->workFolder."/signature"));

    //create the zip bundle from the pass files
    function writePassBundle() {  
      //1 generate the name for the .pkpass file
      $passFile = $this->workFolder."/".$this->ID.".pkpass";

      //2 create Zip class instance
      $zip = new ZipArchive();
      $success = $zip->open($passFile, ZIPARCHIVE::OVERWRITE);
      if ($success!==TRUE) die("Can't create file $passFile");

      //3 recurse over contents and build the list
      $files = new RecursiveIteratorIterator(
                 new RecursiveDirectoryIterator($this->workFolder), 
                 RecursiveIteratorIterator::SELF_FIRST);

      //4 add files to the archive
      foreach($files as $name => $fileObject){
        if (is_file($name) && 
            substr($fileObject->getFileName(), 0, 1)!=".") {

          $relativeName = str_replace($this->workFolder."/", 
                                      "",$name);
          $zip->addFile($fileObject->getRealPath(), $relativeName);
        }
      }

      //5 close the zip file
      $zip->close();  

      //6 save the .pkpass file path and return it too
      $this->passBundleFile = $passFile;
      return $passFile;
    }

    //make new instance from a source folder
    function __construct($path) {
      assert(file_exists($path."/pass.json"));

      $this->ID = uniqid();

      $this->workFolder = sys_get_temp_dir()."/".$this->ID;
      mkdir($this->workFolder);
      assert(file_exists($this->workFolder));

      $this->copySourceFolderFilesToWorkFolder($path);

      $this->readPassFromJSONFile($this->workFolder."/pass.json");  
    }

    //delete all auto-generated files in the temp folder
    function cleanup()
    {
      //recurse over contents and delete files
      $files = new RecursiveIteratorIterator(
                 new RecursiveDirectoryIterator($this->workFolder), 
                 RecursiveIteratorIterator::CHILD_FIRST);

      foreach($files as $name => $fileObject){
        if (is_file($name)) {
          unlink($name);
        } else if (is_dir($name)) {
          rmdir($name);
        }
      }

      rmdir($this->workFolder);
    }

    //cleanup the temp folder on object destruction
    function __destruct() {
      $this->cleanup();
    }

        **/* THIS I ADDED AS A NEW FUNCTION TO PRESENT/DOWNLOAD */
        function outputPassBundleAsWebDownload($fileName) {
         //dump the generated pass to the browser
        header("Content-Type: application/vnd.apple.pkpass");
        header("Content-Disposition: attachment; ".
         "filename=".basename($this->$fileName));
        header("Content-Transfer-Encoding: binary");
        header("Content-Length: ". filesize($this->$fileName));
        flush();
        readfile($this->$fileName);**
}
}

?> 
```

问题是通行证没有被出示。它被正确创建是因为我在屏幕上得到了带有文件名的回声。我错过了什么？我从 getPass.php 调用输出函数并传入 $fileName。为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:03:47.353

您需要注释掉回显文件名的行。将内容回显到浏览器会强制 PHP 自动生成文本输出的标题，因此它可以提供文件名的文本。

一旦开始向浏览器输出，您就无法发送额外的标头。这就是为什么您的输出通行证捆绑函数中的标头被忽略并且您的通行证没有被下载的原因。

# meteor - 在 Meteor 中向用户推送通知

> ID：15981922
> 
> 赞同：1
> 
> 时间：2013-04-12T22:34:49.253
> 
> 标签：meteor

Meteor 中的用户推送通知的某些包或模式是否已经存在？所以我想有一些方法让服务器向用户发送通知，然后将通知显示给用户。那里已经有东西了吗？还是我应该创建一个通知集合并让客户订阅它，显示推送时的任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:50:33.123

目前，据我所知，没有办法订阅不是集合的东西，因此要将自定义数据（如推送通知）推送给您需要使用通知集合的用户。

在您的客户端，您可以有一个监听器来监听新的通知

```
Notifications.find().observe({
    added:function(document): {
        //Push notify your client
        Notifications.remove(document._id); //Remove when viewed
    }
}); 
```

在客户端上显示这些内容的一个非常好的库是：http: [//github.hubspot.com/messenger/](http://github.hubspot.com/messenger/)你可以在将某些内容插入通知集合后立即弹出它

# c# - 有没有不使用详细信息视图来编辑网格视图记录的方法？

> ID：15981927
> 
> 赞同：0
> 
> 时间：2013-04-12T22:35:14.880
> 
> 标签：c#, asp.net, sql-server-2008, gridview

我有一个非常宽的网格视图，我需要能够更新记录，但是，我更新了网格视图内的记录，编辑模式下的网格视图会离开页面。我尝试了一个详细信息视图，但由于某种原因我无法更新它。

我正在尝试使用带有文本框的面板，并且我希望能够选择 gridview 行并使面板显示在 modalpopup 中，显示行信息供我更新。

我在 C# 中使用 SQL Server 2008 和 Asp.net。

你们现在有任何示例代码吗？

你建议我在这种情况下做什么？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:48:38.690

我认为您应该`ModalPopupExtender`轻松地在这里实现您想要的。

这是一个很好的[例子](http://www.c-sharpcorner.com/UploadFile/krishnasarala/edit-gridview-row-with-model-popup-extender-in-Asp-Net-ajax/)

它是关于您想要做什么的分步指南。

# java - 数独求解器蛮力算法

> ID：15981937
> 
> 赞同：0
> 
> 时间：2013-04-12T22:36:06.650
> 
> 标签：java, algorithm, recursion, sudoku, brute-force

仍在研究我的数独求解器，我又遇到了一些麻烦。我已经让数独求解器工作了，但是每当我尝试求解一个真正“硬”的数独板时，我的求解器都会告诉我，由于堆栈溢出错误，没有可能的解决方案。是的，我知道这些板确实有解决方案。

我正在使用蛮力算法——我从第一格开始（或 [0][0]，如果您愿意）并插入第一个合法值。然后我对下一个方块进行递归调用，依此类推。如果我的函数没有遍历整个棋盘，并且发现没有可能的合法值，它会移动到前一个方块并尝试增加那里的值。如果失败，它会向后移动。如果它在没有可能的解决方案的情况下结束于第一格，它就会退出。

我承认我的代码并不漂亮，而且可能非常低效，但请记住，我是一名一年级学生，正在努力做到最好。我不介意评论如何使我的代码生效:)

对于没有最终预定义数字的正方形，这里是求解器函数：

```
public void fillRemainderOfBoard(Square sender){

    try {

        while(true){
            if(currentPos > boardDimension){
                if(previous != null){
                    this.setNumrep(-1);
                    this.setCurrentPos(1);
                    previous.setCurrentPos(previous.getCurrentPos()+1);
                    previous.fillRemainderOfBoard(this);
                    return;
                } else if(sender == this){
                    this.setCurrentPos(1); 
                } else {
                    break;
                }
            }
            if((thisBox.hasNumber(currentPos)) || (thisRow.hasNumber(currentPos)) || (thisColumn.hasNumber(currentPos))){
                currentPos++;
            } else {
                this.setNumrep(currentPos);
                currentPos++;
                break;
            }
        }

        if(this != last){
            next.setNumrep(-1);
            next.fillRemainderOfBoard(this);
        } else {

            return;
        }
    } catch (StackOverflowError e){
        return;
    }
} 
```

在我的代码中，numrep 值是方块在板上表示的值。currentPos 变量是一个计数器，从 1 开始并递增，直到达到正方形表示的合法值。

对于具有预定义数字的正方形，这是相同的功能：

```
public void fillRemainderOfBoard(Square sender){
    if((sender.equals(this) || sender.equals(previous)) && this != last){
        System.out.println(next);
        next.fillRemainderOfBoard(this);
    } else if (sender.equals(next) && this != first) {
        previous.fillRemainderOfBoard(this);
    } else {
        System.out.println("No possible solutions for this board.");
    }
} 
```

现在，我的问题是，就像我说的，这个函数确实很好地解决了数独问题。容易的。棘手的数独，比如有许多预定义数字但只有一个解决方案的数独，只会让我的程序进入堆栈溢出并告诉我没有可能的解决方案。我假设这表明我在内存管理方面遗漏了一些东西，或者程序复制了我在递归函数中调用的对象，但我不知道如何修复它们。

任何帮助是极大的赞赏！也可以随意选择我的代码；我还在学习（哦，我们不是总是这样吗？）。

****__ *_* __ *_* __ *_* __ *_* __ *_* ____***编辑****_* __ *_* __ *_* __ *_* __ *_* __ *_*****

 **感谢 Piotr 提出了回溯的好主意，我重写了我的代码。但是，我仍然无法解决任何数独问题。即使是空棋盘，它也会到达 39 号方格，然后一直返回 false。这是我当前的代码：

```
public boolean fillInnRemainingOfBoard(Square sender){
    if(this instanceof SquarePredef && next != null){
        return next.fillInnRemainingOfBoard(this);
    } else if (this instanceof SquarePredef && next == null){
        return true;
    }

    if(this instanceof SquareNoPredef){
        currentPos = 1;
        if(next != null){
            System.out.println(this.index);
            for(; currentPos <= boardDimension; currentPos++){
                if((thisBox.hasNumber(currentPos)) || (thisRow.hasNumber(currentPos)) || (thisColumn.hasNumber(currentPos))){
                    continue;
                } else {
                    System.out.println("Box has " + currentPos + "? " + thisBox.hasNumber(currentPos));
                    this.setNumrep(currentPos);
                    System.out.println("Got here, square " + index + " i: " + numrep);
                }

                if(next != null && next.fillInnRemainingOfBoard(this)){
                    System.out.println("Returnerer true");
                    return true;
                } else {

                }
            }
        }
        if(next == null){
            return true;
        }
    }
    System.out.println("Returning false. Square: " + index + " currentPos: " + currentPos);
    return false;
} 
```

我不得不使事情复杂一点，因为我需要检查当前对象是否是最后一个。因此额外的 if 测试。哦，我使用 boardDimension 的原因是因为这个数独求解器可以解决任何数独问题——不仅仅是那些 9 x 9 数独 :)

你能发现我的错误吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:01:26.877

所以你的问题出在这里：

`previous.fillRemainderOfBoard(this);`

和这里

`next.fillRemainderOfBoard(this);`

基本上你在堆栈上有太多的函数调用，因为你要向前和向后多次。在找到答案之前，您并没有真正从任何电话中返回（或者您得到 StackOverflowError :)）。不要通过使用递归函数来增加堆栈大小，而是尝试考虑如何使用循环来解决问题（几乎总是循环比递归解决方案的性能更好）。好的，所以你可以做这样的事情（伪代码）：

```
boolean fillRemainderOfBoard(Square sender){
 if (num_defined_on_start) {
     return next.fillRemainderOfBoard(this);
 } else {
   for (i = 1; i < 9; ++i) {
     if (setting i a legal_move)
        this.setCurrentPos(i);
     else
        continue;
     if (next.fillRemainderOfBoard(this))
       return true;
   }
   return false;
} 
```

堆栈大小约为 81。**

# java - 如何控制 TextView 何时将字符串发送到新行？

> ID：15981941
> 
> 赞同：3
> 
> 时间：2013-04-12T22:36:21.697
> 
> 标签：java, android, string, textview

当 a 中的一个单词`String`太大`TextView`而不能与前面的单词放在同一行时，它会跳到下一行。这被证明是非常有用的。然而，这让我进退两难。My `String`，出于我的特殊原因，需要在单词的每个字母之间有一个空格，并且在单词之间有两个空格。正因为如此，`TextView`将分割单词在一行上，另一行在下一行。所以，我想我可能必须创建一个自定义`View`来扩展`TextView`和覆盖它跳到下一行的方式。但是看一下[textview 的类文档，](http://developer.android.com/reference/android/widget/TextView.html)我找不到这样做的方法。因此，任何帮助、建议或建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:50:45.307

`TextView`您可以通过一些修改来覆盖。

基本策略将是覆盖该`onDraw()`方法并自定义绘制您的文本。您还必须覆盖`onMeasure()`.

在您内部`onDraw()`，您将预处理字符串中的自定义*单词*并根据需要插入换行符 ( `\n`)。

遍历文本中的*单词*并将[measureText(String)](http://developer.android.com/reference/android/graphics/Paint.html#measureText%28java.lang.String%29)与您的当前宽度进行比较，`TextView`以确定插入换行符的位置。不要忘记考虑“填充”。

**示例**：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // TODO Auto-generated method stub
    super.onMeasure(getSuggestedMinimumWidth(), getSuggestedMinimumHeight());
}

@Override
protected void onDraw(Canvas canvas) {
    // preprocess your text
    canvas.drawText(...);
} 
```

# iphone - 在不重复代码的情况下进行初始化的最佳方法？

> ID：15981953
> 
> 赞同：5
> 
> 时间：2013-04-12T22:37:35.080
> 
> 标签：iphone, ios, objective-c, xcode, class

每个视图类都有多个 init 方法——已经包含在 UIView 中的方法，然后是其他方法——它们中的每一个都以相同的方式设置相同的元素。因此，我通常让他们都运行一个`[self initialSetup];`方法，其中包括设置所有这些元素。

我遇到的问题是，如果一个子类也有一个 initialSetup 方法，它将覆盖超类的 initialSetup 方法，因此超类必须让该方法是公共的才能仍然起作用。这会导致组织问题，因为除了从 init 之外，永远不应该调用该方法，因此没有理由公开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:41:58.927

将名称更改为`initialSetup`类似`initialSetupClassName`- 子类，即使它们不小心使用了相同的模式，也不会使用相同的名称，因为它们具有不同的类名。

你也可以为你不想被调用的私有方法使用“_”前缀，但是子类也可以这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:47:03.023

您遇到了一个没有完美解决方案的问题。理想情况下，您拥有的是一种在正常意义上不能被子类化的方法，它只能被该确切类型的类的实例访问。

如果这是一个风险，通常的做法似乎是将类名合并到 setup 方法中。所以不是`initialSetup`你有类似的东西`myViewSubclassInitialSetup`。

您还可以在方法的顶部添加类似这样的内容：

```
NSAssert([self isMemberOfClass:[ThisClass class]], 
             @"IniitalSetup called by sub- or superclass") 
```

然后，如果子类或超类最终调用您的 init 方法，您的调试构建将引发异常。这将为您提供一个断点和堆栈跟踪的位置，让您可以非常快速地找到问题。

它不会向您的发布版本添加任何代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T23:28:52.390

It sounds like you are missing a designated initializer. Designate one initializer as the official one that actually performs the setup, and have all the others just call that with some degree of customization. Usually the designated initializer will be the one with the most detail — for example, if you have `init`, `initWithName:`, `initWithName:age:` and `initAsFiveYearOldNamed:`, the designated initializer will be `initWithName:age:` and the other initializers would just call that method with the arguments filled in appropriately.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T23:14:51.610

不幸的是`Objective C`，它没有提供一种以“干净”的方式实现这一目标的方法。理想的解决方案是受保护的方法。但这是不可能的`Objective C`

Apple had this problem, when they were creating the `UIGestureRecognizer`. There were some methods they really didn't want to get called by somebody, but which had to be overwritten by subclasses. The way they chose to deal with this, was to create a seperate header file (`UIGestureRecognizerSubclass.h`), that contains a category to the original `UIGestureRecognizer` with those "protected" methods. The additional header is only to be imported by subclasses (i.e. for subclassing purposes). See [UIGestureRecognizer Class Reference](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html) for some details.

Of course that doesn't prevent anybody from misusing the additional header file, but at least it clearly states your intention and keeps your code well structured. Also you won't be "bothered" by autocompletion for the additional methods, when just using the class.

Personally I only use an additional header, if it is extremely important that nobody calls it directly. In most cases I think it's ok to use public methods and make a note for what it's inteded. The iOS Framework also has many of these cases. F.e. many methods of `UIViewController`'s `viewDidLoad` etc.

# azure - Windows Azure Active Directory 删除/转移租户域

> ID：15981956
> 
> 赞同：0
> 
> 时间：2013-04-12T22:37:52.153
> 
> 标签：azure, azure-active-directory

[当http://activedirectory.windowsazure.com](http://activedirectory.windowsazure.com)最初启动时，我加入了 Windows Azure Active Directory 测试版。

在初始过程中，站点强迫我使用一个新的 LIVE 帐户，而不是我已有的**myname@live.com 帐户**，并且还控制着我的所有 Azure 服务。无论如何，我确实创建了一个新的**myname@mycompany.com**

接下来，我确实能够将活动目录域创建为**mycompany@onmicrosoft.com**并将**mycompany.com**域添加为辅助域。

之前，Azure 控制面板中出现了 Active Directory 选项卡，但它是空的。所以我认为它需要以某种方式链接，但找不到任何关于它的信息。

之后，我尝试创建一个新域，但是当我在*创建目录*页面的*名称*字段中键入**mycompany时，它显示***“此域不是唯一的”*，这是可以预测的，因为其他真实帐户拥有该名称。

 ***试图删除整个帐户，但没有成功。也在[这里](http://technet.microsoft.com/library/en-us/jj151817#bkmk_remove)说：

> “您注册时为您的租户提供的原始 contoso.onmicrosoft.com 域名无法从您的租户中删除。”

由于我是这两个帐户的所有者，我想将**mycompany@onmicrosoft.com**移动（或重新创建等）到我的实际 Azure 帐户**myname@live.com 下**。

请指教。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T03:52:09.107

我没有意识到你有一个现有的订阅，你正在寻找机智的工作。因此，您看到的是预期行为，因为没有与您的 Azure AD 帐户关联的订阅。

我们将在本周末和周一支持更新，这将对您有所帮助。在星期二早上，执行以下操作：

1.  使用您的 Azure AD 帐户登录到 Azure。
2.  它会告诉您您没有订阅 - 设置 90 天试用订阅 - 您不会为此支付任何费用。
3.  单击 Azure 门户中的 Active Directory 选项卡。
4.  添加新用户 - 并选择使用 Microsoft 帐户添加用户 - 指定作为 Windows Azure 订阅管理员的帐户并将其设为“全局管理员”。
5.  注销
6.  使用您刚刚添加的同一 Microsoft 帐户登录到 Azure 门户。
7.  进入设置。
8.  单击管理员选项卡
9.  选择你的 Azure 订阅
10.  点击底部托盘中的“添加”
11.  现在添加您希望成为 Azure 订阅的共同管理员的 Azure AD 用户帐户。

那应该这样做。现在，当您使用 Windows Azure 帐户登录时，您将能够管理您的 Azure 订阅。

只是一个提醒 - 周二早上试试这个！届时我们将支持更新。

不过，您可以通过创建一个新的 90 试用订阅来完成这项工作 - 您在被告知没有与您的帐户关联的订阅的页面上执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:35:22.967

您需要使用您的 myname@mycompany.com 帐户（您创建的 Windows Azure Active Directory 帐户）登录 Azure。

为此，请转到 Azure 管理门户 - 如果您已经使用 Microsoft 帐户（以前称为 LiveID）登录，则需要先注销 - 然后在登录页面的左侧，您应该会看到一个链接，上面写着“Office 365 用户：使用您的组织帐户登录”。

单击该链接，现在使用您的 Azure AD 帐户 (myname@mycompany.com) 登录 Azure 门户。完成此操作后，您应该会在门户的 Active Directory 选项卡中看到您的 Windows Azure AD 租户。***

# mysql - mysql 创建表脚本失败 - 错误 150

> ID：15981957
> 
> 赞同：0
> 
> 时间：2013-04-12T22:37:53.373
> 
> 标签：mysql

我从我在 WorkBench 中创建的模型中转发设计了一个脚本，但该脚本一直失败。它在第二个创建表上失败：

```
CREATE TABLE IF NOT EXISTS  `myDatabase`.`UserProfile` (

 `ProfileId` INT NOT NULL AUTO_INCREMENT ,
 `FirstName` VARCHAR( 45 ) NULL ,
 `LastName` VARCHAR( 45 ) NULL ,
 `Gender` CHAR( 1 ) NULL ,
 `DOB` DATETIME NULL ,
 `HairColor` VARCHAR( 20 ) NULL DEFAULT  'No Answer',
 `EyeColor` VARCHAR( 20 ) NULL DEFAULT  'No Answer',
 `Height` VARCHAR( 10 ) NULL DEFAULT  'No Answer',
 `Weight` VARCHAR( 45 ) NULL DEFAULT  'Average',
 `UserId` VARCHAR( 45 ) NOT NULL ,
PRIMARY KEY (  `ProfileId` ) ,
CONSTRAINT  `FK_User_Profile` FOREIGN KEY (  `UserId` ) REFERENCES  `OurAgreement`.`UserAccount`     (
`UserId`
) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = INNODB; 
```

我相信错误 150 是一个外键问题。与此 FK 关联的表首先在脚本中创建，因此在尝试此约束之前它就存在。这是该表的 DDL：

```
CREATE  TABLE IF NOT EXISTS `mydatabase`.`UserAccount` (
  `UserId` INT NOT NULL AUTO_INCREMENT ,
  `Login` VARCHAR(20) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL ,
  `Password` CHAR(64) NOT NULL ,
  `Email` VARCHAR(45) NULL ,
  PRIMARY KEY (`UserId`))
ENGINE = InnoDB; 
```

有什么想法吗？

编辑=============================

带有 2 个 FK 的表：

```
CREATE TABLE IF NOT EXISTS  `MyDatabase`.`Answer` (

 `AnswerId` INT NOT NULL ,
  `QuestionId` INT NOT NULL ,
 `ProfileId` INT NOT NULL ,
PRIMARY KEY (  `AnswerId` ) ,
INDEX  `ProfileId_idx` (  `ProfileId` ASC ) ,
INDEX  `QuestionId_idx` (  `QuestionId` ASC ) ,
CONSTRAINT  `FK_Question_Answer` FOREIGN KEY (  `QuestionId` ) REFERENCES  `MyDatabase`.`Question` (
`QuestionId`
) ON DELETE NO ACTION ON UPDATE CASCADE ,
CONSTRAINT  `FK_Answer_Profile` FOREIGN KEY (  `ProfileId` ) REFERENCES  `MyDatabase`.`UserProfile` (
`ProfileId`
) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE = INNODB; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:43:24.620

如果

```
`UserId` INT NOT NULL AUTO_INCREMENT 
```

在您的原始表中，您需要在派生表中使用完全相同的语法：

```
`UserId` VARCHAR( 45 ) NOT NULL 
```

应该

```
`UserId` INT NOT NULL 
```

* * *

此外，您需要为`UserId`两个表中的字段建立索引。由于它是**主要**的，所以不需要那里。在另一个补充：

```
INDEX `uid`( `UserId` ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:48:54.700

在

```
CREATE TABLE IF NOT EXISTS  `myDatabase`.`UserProfile` 
```

您在数据库中引用表`OurAgreement`：

```
REFERENCES  `OurAgreement`.`UserAccount` 
```

但是`UserAccount`您之前创建的表位于`mydatabase`：

```
CREATE  TABLE IF NOT EXISTS `mydatabase`.`UserAccount` 
```

# python - 使用 python 集报告 /etc/passwd 文件中列出的 shell

> ID：15981958
> 
> 赞同：-2
> 
> 时间：2013-04-12T22:37:55.177
> 
> 标签：python, linux, set, etcpasswd

我需要知道如何使用 python 集列出 linux 文件系统的 /etc/passwd 文件中列出的所有唯一 shell。这将从命令行在 python shell 中执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:40:15.620

最简单的方法：

```
import pwd
shells = set(p.pw_shell for p in pwd.getpwall())
print('\n'.join(shells)) 
```

# excel - 如何从 Excel VBA for Mac 发出 HTTP GET

> ID：15981960
> 
> 赞同：16
> 
> 时间：2013-04-12T22:38:04.960
> 
> 标签：excel, vba, macos, http-get

我需要从 Excel for Mac 2011 向 Web 服务发出带有查询字符串的 HTTP Get。我已经看到了使用 QueryTables 的答案（[如何使用 VBA 从 Excel 向服务器发送 HTTP POST 请求？](https://stackoverflow.com/questions/158633/how-can-i-send-an-http-post-request-to-a-server-from-excel-using-vba)）但他们使用 POST 方法，而不是 GET 方法。我还看到在 Windows 机器上很容易，但我被困在 Mac 上。

有什么建议，还是没有希望？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-13T23:51:02.510

做进一步的研究，我遇到了 Robert Knight 对这个问题的评论[VBA Shell function in Office 2011 for Mac](https://stackoverflow.com/questions/6136798/vba-shell-function-in-office-2011-for-mac)并使用他的 execShell 函数调用 curl 构建了一个 HTTPGet 函数。我已经在运行 Mac OS X 10.8.3 (Mountain Lion) 和 Excel for Mac 2011 的 Mac 上对此进行了测试。这是 VBA 代码：

```
Option Explicit

' execShell() function courtesy of Robert Knight via StackOverflow
' https://stackoverflow.com/questions/6136798/vba-shell-function-in-office-2011-for-mac

Private Declare Function popen Lib "libc.dylib" (ByVal command As String, ByVal mode As String) As Long
Private Declare Function pclose Lib "libc.dylib" (ByVal file As Long) As Long
Private Declare Function fread Lib "libc.dylib" (ByVal outStr As String, ByVal size As Long, ByVal items As Long, ByVal stream As Long) As Long
Private Declare Function feof Lib "libc.dylib" (ByVal file As Long) As Long

Function execShell(command As String, Optional ByRef exitCode As Long) As String
    Dim file As Long
    file = popen(command, "r")

    If file = 0 Then
        Exit Function
    End If

    While feof(file) = 0
        Dim chunk As String
        Dim read As Long
        chunk = Space(50)
        read = fread(chunk, 1, Len(chunk) - 1, file)
        If read > 0 Then
            chunk = Left$(chunk, read)
            execShell = execShell & chunk
        End If
    Wend

    exitCode = pclose(file)
End Function

Function HTTPGet(sUrl As String, sQuery As String) As String

    Dim sCmd As String
    Dim sResult As String
    Dim lExitCode As Long

    sCmd = "curl --get -d """ & sQuery & """" & " " & sUrl
    sResult = execShell(sCmd, lExitCode)

    ' ToDo check lExitCode

    HTTPGet = sResult

End Function 
```

要使用它，请复制上面的代码，在 Excel for Mac 2011 中打开 VBA 编辑器。如果您没有模块，请单击 Insert->Module。将代码粘贴到模块文件中。离开 VBA 编辑器 (clover-Q)。

这是一个使用天气预报 Web 服务的具体示例 ( [http://openweathermap.org/wiki/API/JSON_API](http://openweathermap.org/wiki/API/JSON_API) )

单元格 A1 将保留城市名称。

在单元格 A2 中，输入 URL 字符串：`http://api.openweathermap.org/data/2.1/forecast/city`

在将构建查询字符串的单元格 A3 中，输入：`="q=" & A1`

在单元格 A4 中，输入：`=HTTPGet(A2, A3)`

现在，在单元格 A1 中输入城市名称，例如`London`，单元格 A4 将显示包含伦敦天气预报的 JSON 响应。将 A1 中的值从更改`London`为`Moscow`-- A4 将更改为莫斯科的 JSON 格式预测。

显然，使用 VBA，您可以解析和重新格式化 JSON 数据并将其放置在工作表中需要的位置。

没有声称性能或可扩展性，但对于从 Excel for Mac 2011 简单地一次性访问 Web 服务，这似乎可以解决问题并满足我发布原始问题的需要。[YMMV](http://en.wiktionary.org/wiki/your_mileage_may_vary)！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-10-13T19:41:16.760

上面来自 John Stephens 的答案非常棒（请点赞！），但它在最近的 Excel:mac 2016 中不再适用于我，错误是代码需要更新才能在 64 位系统上使用。

从[我在相关存储库中找到的问题中](https://github.com/VBA-tools/VBA-Web/issues/248)获取一些提示，我能够调整 John 脚本中的数据类型以在 Excel:mac 2016 中正常工作：

```
Option Explicit

' execShell() function courtesy of Robert Knight via StackOverflow
' http://stackoverflow.com/questions/6136798/vba-shell-function-in-office-2011-for-mac

Private Declare PtrSafe Function popen Lib "libc.dylib" (ByVal command As String, ByVal mode As String) As LongPtr
Private Declare PtrSafe Function pclose Lib "libc.dylib" (ByVal file As LongPtr) As Long
Private Declare PtrSafe Function fread Lib "libc.dylib" (ByVal outStr As String, ByVal size As LongPtr, ByVal items As LongPtr, ByVal stream As LongPtr) As Long
Private Declare PtrSafe Function feof Lib "libc.dylib" (ByVal file As LongPtr) As LongPtr

Function execShell(command As String, Optional ByRef exitCode As Long) As String
    Dim file As LongPtr
    file = popen(command, "r")

    If file = 0 Then
        Exit Function
    End If

    While feof(file) = 0
        Dim chunk As String
        Dim read As Long
        chunk = Space(50)
        read = fread(chunk, 1, Len(chunk) - 1, file)
        If read > 0 Then
            chunk = Left$(chunk, read)
            execShell = execShell & chunk
        End If
    Wend

    exitCode = pclose(file)
End Function

Function HTTPGet(sUrl As String, sQuery As String) As String

    Dim sCmd As String
    Dim sResult As String
    Dim lExitCode As Long

    sCmd = "curl --get -d """ & sQuery & """" & " " & sUrl
    sResult = execShell(sCmd, lExitCode)

    ' ToDo check lExitCode

    HTTPGet = sResult

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-13T08:28:38.210

另一种选择（如果您的 curl 不在 /opt/local/bin/curl 中，请相应更新）：

VBA：

```
Public Function getUrlContents(url) As String
    Dim command As String
    command = "do shell script ""/path_to/getUrl.sh " + url + """"
    getUrlContents = VBA.MacScript(command)
End Function 
```

/path_to/getUrl.sh：

```
#!/bin/sh

if [ -z "$1" ]
  then
    echo "missing url argument"
else
    /opt/local/bin/curl "$1"
fi 
```

请注意，您必须确保 getUrl.sh 是可执行的：

```
chmod u+x getUrl.sh 
```

# git - git批量删除

> ID：15981961
> 
> 赞同：1
> 
> 时间：2013-04-12T22:38:08.937
> 
> 标签：git

假设我的远程存储库中有*很多文件已在本地**删除*，但从未从版本控制中删除。有没有办法使用命令或脚本简单地删除所有远程文件？如果我在存储库文件夹中，我可以这样做：

```
git sync 
```

它会说“这个文件在本地不存在，所以把它从源头中删除”。

我可以使用检查本地与远程的比较脚本，但我似乎找不到任何东西，而且我知道这一定已经完成了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:40:29.150

也许 [`git push`](http://kernel.org/pub/software/scm/git/docs/git-push.html)

```
git rm foo.txt
git commit
git push -f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:43:01.937

在本地，确保从 repo 中删除文件：

```
 git add -A .
 git commit -am 'deletions'
 git push 
```

现在在遥控器上

```
 git pull
 git clean -dfn . 
```

如果删除列表对您没问题，请**删除`-n`以实际删除**

# java - Java 中的自定义按钮类

> ID：15981963
> 
> 赞同：0
> 
> 时间：2013-04-12T22:38:18.173
> 
> 标签：java, swing, jbutton

我知道我的方法不实用，但这将帮助我更多地习惯 Java。我正在尝试创建一个 JButton 子类（名为 MyButton）。MyButton 基本上会创建一个带有自定义图像背景的新 Gui 按钮。我知道如何在类中创建一个新按钮，但不知道如何引用 MyButton 类创建的按钮。如代码所示，需要设置按钮的图标，但这需要在子类内部完成，所以说用过的不必用它。在创建时，编码器输入引用纹理的字符串，然后 MyButton 具有 JButton 的所有属性，但也已经设置了图像。下面是我的源代码。

```
package Classes;
import javax.swing.ImageIcon;
import javax.swing.JButton;

public class MyButton extends JButton{
private static final long serialVersionUID = 1L;

public JButton abc = new JButton();
private ImageIcon def;
private MyButton ghi;

public MyButton(String image){

    def = new ImageIcon(getClass().getResource(image));

    //abc.setIcon(def);
    //abc.setPressedIcon(def);

    ghi = new MyButton("image.png");
    ghi.setIcon(def);

}
} 
```

**UPADTE** 解决了。谢谢山姆。我相信“this.setIcon”有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:42:36.647

也许我误解了你，但`MyButton`不（或可能不应该）创建一个按钮，它*是*按钮。（从技术上讲，它是一种按钮。）方法`public MyButton...`是`MyButton`类的构造方法；它初始化一个新的 MyButton。关键字将`this`引用`MyButton`类中的按钮；在它之外，您将使用如下所示的代码：

```
MyButton aButton = new MyButton(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:51:56.123

如果您扩展 JButton，那么您将得到一个新对象，它是一个按钮。
原始的 JButton 有一个 draw 方法，它将按钮绘制到画布上。

**我认为您应该像这样覆盖按钮的 paintComponent() 方法：**

```
@Override
public void paintComponent(Graphics g) {
    // g.drawImage(image) or something...
}

//  Also has a paintBorder() method
public void paintBorder(Graphics g) {
   // Draw your border if mouse over
} 
```

所以你可以绘制你的初始化图像文件。该按钮将像普通的 JButton 一样工作，但构造函数将采用图像 url。（你已经这样做了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:49:16.537

```
public class MyButton extends JButton{
private static final long serialVersionUID = 1L;
private ImageIcon def;
private MyButton ghi;

public MyButton(){
def = new ImageIcon("image.png");
super(def);
}
} 
```

上述课程中的一些东西。

# python - Python 和 MySql - 无法获取几何对象

> ID：15981968
> 
> 赞同：2
> 
> 时间：2013-04-12T22:38:46.143
> 
> 标签：python, mysql, geometry

好吧，我有一个解析文件的 python 程序。这些文件中的数据如下所示：

```
Type=0x21    
Label=2428    
Data1=(54.67346,59.00001),(54.67415,59.00242),(54.67758,59.00001) 
```

这是我的代码，它将解析的数据发送到 MySql 数据库

```
import MySQLdb
f = open('test.mp', 'r')
db = MySQLdb.connect(host="127.0.0.1", user="root", passwd="", db="gis", charset='utf8')
cursor = db.cursor()
i=0
for line in f.readlines(): 
  if (line.startswith("Type")):
    type=line[5:]
  if (line.startswith("Label")):
    label=line[6:]
  if (line.startswith("Data")):
    data=line[6:]
    sql="""INSERT INTO `polylines` (Type, Label, Data) VALUES ('%(Type)s', '%(Label)s', '%(Data)s')"""%{"Type":type, "Label":label, "Data":data}
    cursor.execute(sql)
    db.commit()
db.close()
f.close() 
```

而且我总是遇到同样的错误-

```
 _mysql_exceptions.OperationalError: (1416, 'Cannot get 
geometry object from data you send to the GEOMETRY field') 
```

我认为这是因为我将 Data 变量中的数据发送到数据库中的 Linestring 字段。我尝试将发送的日期更改为 (1 1,2 2,3 3)，但我再次收到此错误。我应该如何更改数据并避免此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:30:32.123

好吧，经过一些研究和一些测试，我终于找到了答案。这个问题不是python的问题，而是mysql的问题。

首先，我们需要我们的 Data 变量看起来像`Data="LineString(1 1,2 2,3 3)"`. 然后，我们应该在 Insert 函数中编写`(GeomFromText('%(Data)s'))`，以帮助 mysql 从文本中获取几何图形。因此，整个 Insert 行如下所示：

```
 sql="""INSERT INTO `polylines` (Type, Label, Data) VALUES ('%(Type)s', '%(Label)s', (GeomFromText('%(Data)s')))"""%{"Type":type, "Label":label, "Data":data} 
```

现在它起作用了！

# node.js - Node.js 和 Twitter 流媒体 API

> ID：15981971
> 
> 赞同：0
> 
> 时间：2013-04-12T22:39:22.337
> 
> 标签：node.js, mongodb, twitter

我目前正在尝试在同一连接上同时流式传输两个轨道，我遇到的问题是为第二个流打开了一个新连接，其中 Twitter 拒绝并出现错误代码 7，这是 Twitter 放弃了最旧的连接为最新的让路，我能以编程方式做些什么来防止这种情况发生吗？

这是我正在使用的代码

```
var request = oa.get("https://stream.twitter.com/1.1/statuses/filter.json?track=tweet1", access_token, access_token_secret );

request.addListener('response', function (response) {

    response.setEncoding('utf8');

    response.addListener('data', function (chunk) {
        var theTweets = JSON.parse(chunk);
        console.log(theTweets);
        MongoClient.connect("mongodb://localhost:27017/db", function(error, database) {  
            var collection = database.collection('coll'); 
            collection.insert(theTweets, function(err, result) {});
        });    
    });

    response.addListener('end', function () {
        console.log('--- END ---');
    });

});

var requestTweet2 = oa.get("https://stream.twitter.com/1.1/statuses/filter.json?track=tweet2", access_token, access_token_secret );

requestTweet2.addListener('response', function (response) {

    response.setEncoding('utf8');

    response.addListener('data', function (chunk) {
        var theTweets = JSON.parse(chunk);

        MongoClient.connect("mongodb://localhost:27017/db", function(error, database) {  
            var collection = database.collection('coll'); 
            collection.insert(theTweets, function(err, result) {});
        });    
    });

    response.addListener('end', function () {
        console.log('--- END ---');
    });

});
requestTweet2.end();
request.end(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T17:52:57.670

Twitter 公共流将只接受每个 IP 地址的一个连接。您可以[在此处找到此文档](https://dev.twitter.com/docs/streaming-apis/streams/public#Connections)。

> 每个帐户只能创建一个到公共端点的常设连接，并且使用相同的帐户凭据多次连接到公共流将导致最旧的连接断开。

作为替代方案，您可以使用[user stream](https://dev.twitter.com/docs/streaming-apis/streams/user)，它将传入的推文限制为经过身份验证的用户的帐户。

# html - DIV 分页符（不打印）

> ID：15981974
> 
> 赞同：0
> 
> 时间：2013-04-12T22:39:48.040
> 
> 标签：html, css, layout, page-break

可能是一个简单的问题，但是使用 div 在逻辑上垂直分解页面的最佳方法是什么，无论其上方和下方的项目如何浮动或定位。用于在网络上查看，而不是在打印方面分页。

我正在尝试这样的事情，但它不起作用：

```
<div id="top block" style="width: margin-left: auto; margin-right: auto; clear: both">
<div id="left" style="float: left; width: 200px">
<p>Text text text</p>
</div>
<div id="center" style="float: left; width: 500px;">
Image
</div>
<div id="right" style="float: left; width: 200px">
<p>Text text text</p>
</div>
</div> <!--End of top block-->

<div id="page break" style="width: 1000px; clear: both;"></div> <!--I want this to be a hard break where everything after it appears below-->

<div id="bottom block" style="text-align: center">
<p>Text text text</p>  <!--Things from this paragraph are popping up above the forced page break depending on how I align things.-->
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:08:28.527

我没有遇到你的问题。顺便说一句，您不需要为“中断” div 指定宽度，您可以尝试：

```
<div id="page break" style="clear: both; display:block;"></div> 
```

[这是一个小提琴](http://jsfiddle.net/mcxFz/)，我在其中为 div 着色，让您更好地看到他的行为。

# php - 如何将复杂的 JavaScript 数组转换为 PHP 数组

> ID：15981980
> 
> 赞同：0
> 
> 时间：2013-04-12T22:40:31.123
> 
> 标签：php, javascript, arrays

我有一个这样的 JavaScript 数组：

```
var f3_masks = [
    [
        {id: 0, id_name: '1-1', db_id: '3193586'},
        {id: 10, id_name: '3-4', db_id: '3193636'},
        {id: 20, id_name: '3-5', db_id: '3193636'}
    ],
    page2_fl = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],

    page2_fr = [
        './images/korpus1/floors/floor_3.jpg'
    ]
];

var f4_masks = [
    [
        {id: 0, id_name: '1-1', db_id: '3193586'},
        {id: 10, id_name: '3-4', db_id: '3193636'},
        {id: 20, id_name: '3-5', db_id: '3193636'}
    ]
]; 
```

等等。这是一组包含数千个字符串的相当大的数组。我可以将其中的一部分解析为 JSON，但只是其中的一部分。在没有 PHP 常规结构的情况下读取此类 JavaScript 数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T22:47:40.530

键必须用双引号括起来：

“page2_fl”

尝试使用[http://jsonlint.com/](http://jsonlint.com/)上的检查服务。

# html - 用文字而不是图像制作一个热门区域图块（joomla 主题）

> ID：15981984
> 
> 赞同：0
> 
> 时间：2013-04-12T22:40:40.517
> 
> 标签：html, css, joomla, less

我正在使用 Rockettheme 的 Joomla 主题，我能够在模板的 demo-styles.less 文件中找到并重现该主题的一类。

所以我为我的网站制作了一个 demo-styles-custom.less 并在其中添加了以下代码：

```
// Demo Image
.al-image {
    position: relative;
}
.al-image img {
    max-width: 100%;
    height: auto;
    box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2), 0 0 1px rgba(0, 0, 0, 0.2);
}
.al-image object {
    max-width: 100%;
    height: auto;
    box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2), 0 0 1px rgba(0, 0, 0, 0.2);
}

// MainBottom Images
.al-image-description {
    color: #fff;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    z-index:1000;
    .transition(opacity 0.5s ease-out);
    span {
        margin-top: 25px;
        margin-left: 15px;
        line-height: 0.5em;
    }
    h4 {
        padding: 0 15px;
        margin-top: 15px;
        margin-bottom: 8px;
        font-family: 'SourceSansProExtraLight',Helvetica,Arial,sans-serif;
        font-size: 2.8em;
        font-weight: normal;
        line-height: 1.1em;
    }
    p {
        padding: 0 15px;
        font-size: 1.5em;
    }
    a.readon {
        margin-left: 15px;
        span {
            margin-left: 0;
        }
    }
}
.al-image:hover .al-image-description {
    background-color: rgba(1, 197, 255, 0.3); //#01C5FF
//  color: #FFFFFF;
    bottom: 0;
    opacity: 1 !important;
} 
```

这创建了一个非常漂亮的图块，当悬停在它上面时会显示 al-image-deciption 的内容并显示一个可点击的“阅读更多”按钮。底部的 a.readon 在我正在使用的 joomla 模板的样式文件中定义，因此无需担心。

无论如何，它与 img 配合得很好，但是如果我想添加一些文本，它就不会那么好用了。我添加了对象参数（在 al-image object{} 处）并创建了文本，但是当悬停时，描述只涵盖了我正在使用的小文本。不是图像占据的整个正方形区域。我想我可以添加一个背景图像并将文本放在该图像的顶部，但背景图像的响应与图像不同。它们仅限于文本的大小。结果真的很丑，你可以在下面的附图中看到。

有没有办法让文本使用与图像相同的空间？我希望它像所有其他图像块一样工作，只是能够在上面写文字。

（看来我需要 10 个代表来发布图片，所以我只会发布它们的链接）

[图 1 当我将鼠标悬停在我想要修复的图块上时，它旁边是可以处理普通图像的图块](http://i45.tinypic.com/2vt6vxe.png)

[图 2 当我将鼠标悬停在其中一个可用的图块上时（纯图像）以显示描述，而不是悬停在我要修复的图块上](http://i49.tinypic.com/1pj6lh.png)

从图像中您可以看到不适合我的图块具有压缩的背景图像。我用来在模块中创建磁贴的 HTML 代码如下：

```
<div class="al-image">
    <object id="image-with-text" style="background-image: url('/images/Stores/CoverSQ.jpg');">hello all</object>
    <div class="al-image-description">
        <span class="icon-shopping-cart rt-big-icon"></span>
        <h4>Store</br>Renovation</h4>
        <p>fast delivery times</p>
        <a class="readon" href="index.php/en/activities/store-renovation"><span>Read More</span></a>
    </div>
</div> 
```

而对于其余的瓷砖，那里使用的代码是：

```
<div class="al-image">
    <img src="/images/Office_Renovations/CoverSQ.jpg" alt="Office Renovation" />
    <div class="al-image-description">
        <span class="icon-group rt-big-icon"></span>
        <h4>Office</br>Renovation</h4>
        <p>Uninterruptable deploy®</p>
        <a class="readon" href="index.php/en/activities/office-renovation"><span>Read More</span></a>
    </div>
</div> 
```

希望我描述得很好。我会很感激我能得到的任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:38:33.253

`position:absolute;`我认为如果您只使用,`width: 100%;`和`height: 100%;`在您的`object`元素上，它将解决您的问题。`al-image`并在容器上定义宽度和高度......或者只是在对象上定义它们。类似于这个小提琴的东西：http: [//jsfiddle.net/WQEAW/](http://jsfiddle.net/WQEAW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:21:35.103

好的，我似乎找到了解决我自己问题的方法！这应该可以帮助面临同样问题的人......

我发现我可以使用以下代码做我需要的事情：

```
<div class="al-image">
    <object id="image-with-text">
        <img src="/images/Stores/CoverSQ.jpg" alt="image" />
        <div style="position:absolute; top:50px; left:20px; width:60px; height:25px">
            <center>
                <font size="+2" color="00ff00">Looking Into The Future</font>
            </center>
        </div></object>
    <div class="al-image-description">
        <span class="icon-shopping-cart rt-big-icon"></span>
        <h4>Store</br>Renovation</h4>
        <p>fast delivery times</p>
        <a class="readon" href="index.php/en/activities/store-renovation"><span>Read More</span></a>
    </div>
</div> 
```

该代码将在距离图像左上角 50,20 的位置显示文本“展望未来”，宽度为 60 像素。

您也可以使用百分比，例如：

```
<div style="position:absolute; top:30%; left:20%; width:40%; height:25px"> 
```

在为响应式主题调整浏览器大小时，这将有所帮助。凉爽的。现在我需要做的就是制作我需要的图像并使用透明度，它应该可以工作！

我要感谢所有为我的问题提供时间的人，即使他们没有找到解决方案。此外，它只在这里呆了几个小时。

我还要感谢给出答案的 Martin Turjak。这也是正确的。在他回答之前我已经找到了解决方案，但是我不得不等待 8 个小时才能将其作为解决方案发布在这里。无论如何我都会发布它，因为我相信使用包含的代码它对面临同样问题的人更有用。我相信它也适用于 Rockettheme 的许多模板，所以请随意使用它。

如果有人想要，我可以发送我为我的主题制作的自定义 .less 文件，他们可以按原样使用它们，而完全不用担心编码。当然，您需要使用主题才能让他们工作，但我相信有足够多的人使用 Rockettheme 的模板。

# c# - HTTPWebRequest GET 错误远程服务器返回错误：（415）不支持的媒体类型

> ID：15981985
> 
> 赞同：1
> 
> 时间：2013-04-12T22:40:49.837
> 
> 标签：c#, json, rest, get, httpwebrequest

这段代码应该给我 JsonString 作为回应。但我收到一个错误

System.dll 中出现“System.Net.WebException”类型的未处理异常

附加信息：远程服务器返回错误：（415）不支持的媒体类型。

```
string  Url = "https://abc.test.xyz.com/123456344589753/transactions";
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(Url);
            string certThumbPrint = "ce03c469fb6c6dewwwww21886b7c1d405d954hshgd";
            X509Certificate2 cert = FindCertificateByThumbprint(certThumbPrint);
            if (cert != null)
            {
                request.ClientCertificates.Add(cert);
            }
            request.Method = "GET";
            request.MediaType = "application/json";
            request.ContentType = "application/json; charset=utf-8";
            string text;
            var response = (HttpWebResponse)request.GetResponse();
            using (var sr = new StreamReader(response.GetResponseStream()))
            {
                text = sr.ReadToEnd();
            } 
```

解决此错误的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:02:37.270

从[HTTP 规范](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-22#section-6.5.13)：

> **415 不支持的媒体类型**
> 
> 415（不支持的媒体类型）状态代码表示源服务器拒绝为请求提供服务，因为有效负载的格式不受此方法的目标资源支持。格式问题可能是由于请求指示的 Content-Type 或 Content-Encoding，或者是直接检查数据的结果。

GET 请求没有有效负载，因此与您通信的服务器可能不像您在请求中指定 Content-Type。

# dart - 在两个 Dart VM 之间建立通信的最简单方法是什么？

> ID：15981986
> 
> 赞同：2
> 
> 时间：2013-04-12T22:40:53.343
> 
> 标签：dart, dart-isolates

在两个 Dart VM 之间建立通信的推荐方法是什么？[像这里](https://groups.google.com/a/dartlang.org/forum/#!topic/misc/eCklr5rOMoU)推荐的那样隔离？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T05:00:04.867

感谢您的提问！

如果两个 Dart VM 在服务器上运行，我会考虑使用 TCP 套接字。

你可以启动一个[ServerSocket](http://api.dartlang.org/docs/releases/latest/dart_io/ServerSocket.html)来监听传入的请求。您可以使用[Socket](http://api.dartlang.org/docs/releases/latest/dart_io/Socket.html)连接到其他服务器。

隔离尚未扩展到跨 VM 通信。这可能会在未来发生，但不在我们的近期路线图上。

# html - css 和 html - 为什么将左浮动的 div 放在下面的行上？

> ID：15981989
> 
> 赞同：0
> 
> 时间：2013-04-12T22:41:10.130
> 
> 标签：html, css, image

我有这样的 HTML：

```
<div style="float: left; font-family: arial; padding-top: 40px; width: 655px; ">
    <div style="float: left;">
        <img src="http://www.problemio.com/img/big_logo.png" id="above_fold_img" style="border: none;"  />
    </div>
    <div style="float: left; ">
        <p>
            <h1>mobile business plan, <br />
            business ideas, fundraising<br /> and marketing apps
            </h1>  <!-- font-size: 200%; -->
        </p>
    </div>
    <div style="clear:both;"></div> 
```

它看起来像这样。这是一个测试页面： http: [//problemio.com/index_test.php](http://problemio.com/index_test.php)

蓝色 B 应该与文本在同一行。但可能是因为原始图像尺寸非常大，它的尺寸被搞砸了。

这是img的css：

```
img#above_fold_img
{
  width: 30%;
  height: 30%;
} 
```

有人知道如何使图像和文本出现在同一行吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T22:46:34.677

您需要为两个 child 指定宽度`<div>`。根据 Chrome DevTools，第一个`<div>`（带有子图像）是 512px 宽。

`width: 30%;`on`img#above_fold_img`使用其父 div 的 30%。

例子：

```
<div style="float: left; width: 256px; height: 256px; margin: 0">
    <img src="http://www.problemio.com/img/big_logo.png" id="above_fold_img" style="border: none; width: 256px; height: 256px" />
</div>
<div style="float: left; width: 393px; margin: 0; margin-left: 5px">
    <p>
        <h1>mobile business plan, <br />
        business ideas, fundraising<br /> and marketing apps
        </h1>  <!-- font-size: 200%; -->
    </p>
</div> 
```

在我的示例中，我将所有样式保持为内联，但使用 CSS 更好。此外，“b”图像为 512x512px。如果可以缩小它，您将减少加载时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T23:17:11.827

我认为只是给出一个答案会有所帮助，但 op 也想知道为什么..

您应该在包含 #above_fold_img 的图像上声明一个宽度，以便 div 采用与您可以执行此操作的方式相同的宽度

```
<div style="float: left; font-family: arial; padding-top: 40px; width: 655px;">
    <div style="float: left;margin-right:20px">
        <img src="http://www.problemio.com/img/big_logo.png" id="above_fold_img" width="154">
    </div>
    <div style="float: left;">
        <p></p>
        <h1>mobile business plan, <br>
 business ideas, fundraising<br> and marketing apps
        </h1>  <!-- font-size: 200%; -->
        <p></p>
    </div>
    <div style="clear:both;"></div>
</div> 
```

另外，您应该尽量不要`<p></p>`用作空格，而是`<br/>`要这样做

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T22:51:00.433

出于审美原因，将您的 div 更改为 30% 的宽度，并将图像的宽度更改为 100% 或 90%，因此：

```
<div style="float: left; font-family: arial; padding-top: 40px; width: 655px;">
    <div style="float: left; width: 30%;">
        <img src="http://www.problemio.com/img/big_logo.png" id="above_fold_img" style="border: none;"  />
    </div> 
```

和 CSS：

```
 img#above_fold_img
    {
      width: 100%;
      height: 100%;
    } 
```

# git - 吉特。保持项目的稳定版本和开发版本

> ID：15981991
> 
> 赞同：1
> 
> 时间：2013-04-12T22:41:20.327
> 
> 标签：git

我想要两个版本的项目：`stable`和`dev`. 它应该看起来像：

```
/home/me/proj/stable
/home/me/proj/dev 
```

我想对`dev`版本进行一些更改，然后将它们带到`stable`.

我如何解决任务：

`dev`1）在目录中创建项目

2)`git clone dev stable`

3) 在每次更改时`dev`：

```
cd /home/me/proj/dev
git add .
git commit -m 'fixes'
cd ../stable
git pull 
```

它工作正常，但是当我从中删除一些文件时`dev`，然后执行`pull`，这些文件仍在`stable`. 我不希望他们在那里。我想`stable`成为`dev`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:03:09.510

或者您可以尝试将 GIT 与两个分支（dev 和 stable）一起使用，并通过合并分支来保持您的两个“版本”同步。作为：

```
$ mkdir /home/me/proj; cd /home/me/proj
$ git init
$ echo 'README' > README; git add README; git commit -m 'README'
$ git branch stable
$ git checkout -b dev

# do your development
$ git commit <stuff>

# now bring the stuff to <stable>
$ git checkout stable
$ git merge dev 
```

注意：删除的文件将在上述合并后`dev`消失。`stable`

```
# back to dev for more development
$ git checkout dev 
```

如果您需要在某处部署稳定版本，请使用

```
$ cd <parent dir for deploy>
$ git clone /home/me/proj --branch stable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:44:53.600

我想你可能正在寻找

```
git clean -df . 
```

（虽然，如果删除是版本化的，那么它应该是自动的，除非有本地更改）

要确保跟踪删除，请执行

```
git add -A . 
```

而不仅仅是

```
git commit -am '........' 
```

# java - 从 Appengine 获取 Google ClientLogin 令牌时总是 403 Forbidden

> ID：15981996
> 
> 赞同：0
> 
> 时间：2013-04-12T22:41:46.703
> 
> 标签：java, google-app-engine, google-ads-api

我正在尝试获取一个简单的 ClientLogin 令牌。

我的代码如下所示：

```
UrlFetchTransport urlFetchTransport = new UrlFetchTransport();

ClientLoginTokens clientLoginTokens = new ClientLoginTokens.Builder()
    .forApi(ClientLoginTokens.Api.ADWORDS)
    .withHttpTransport(urlFetchTransport)
    .withEmailAndPassword(email, password)
    .build();

String clientLoginToken = clientLoginTokens.requestToken(); 
```

该代码在我的本地机器和 AppEngine 的开发服务器（1.7.7）上运行得非常好。我最终得到了一个不错的 clientLoginToken。

但是，在生产中，我总是得到 403 Forbidden（或 403 OK，无论如何），而且我永远无法检索到 clientLoginToken（ClientLoginResponseException：403）。我的应用当前在[http://APP.appspot.com](http://APP.appspot.com)域（默认 AppEngine 生产 URL）上运行。

我已经尝试使用默认传输而不是 UrlFetchTransport，但这并没有改变任何东西 - 它在本地运行，但在 AppEngine 上运行时失败。

任何提示表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:34:40.303

原来这是 Google ClientLogin 的一个安全“功能”。

AppEngine 的服务器分布在世界各地 - Google 确保没有人窃取您的帐户凭据。默认情况下（以及一些未知的指标）Google 会阻止不是来自您的“计算机”（或我猜的区域）对您帐户的访问。

您可以通过访问添加其他应用程序：

[https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)

输入您的凭据后，您有 10 分钟的时间为另一个应用程序“添加”访问权限。这为我解决了它。但是当然使用没有这些问题的 OAuth 2.0 会好得多。