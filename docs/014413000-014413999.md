# StackOverflow 问答 14413000-14413999

# compilation - make: *** [build-java] 错误 1 从源代码构建 java-gnome 4.1.2

> ID：14413000
> 
> 赞同：1
> 
> 时间：2013-01-19T09:38:05.627
> 
> 标签：compilation, makefile

我正在尝试使用此处给出的说明从源代码（http://ftp.gnome.org/pub/gnome/sources/java-gnome/4.1/）构建 java-gnome 4.1.2：[http://java- gnome.sourceforge.net/README.html](http://java-gnome.sourceforge.net/README.html)。

'./configure' 命令工作正常，表明没有依赖问题，但 'make' 给了我以下输出：

```
build/faster
GCC     generated/bindings/org/gnome/unique/UniqueApp.c
/usr/bin/gcc-4.6  -g -Wall -fPIC -I/usr/lib/jvm/java-7-oracle/include -                    I/usr/lib/jvm/java-7-oracle/include/linux -Wno-int-to-pointer-cast -Wno-pointer-to-int-    cast  -Werror-implicit-function-declaration -Wfatal-errors -Isrc/jni -Itmp/include -      pthread -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/gtk-3.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/freetype2 -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/usr/include/gtk-3.0/unix-print -I/usr/include/gtksourceview-3.0 -I/usr/include/libxml2 -I/usr/include/librsvg-2.0 -I/usr/include/enchant -o tmp/objects/org/gnome/unique/UniqueApp.o -c     generated/bindings/org/gnome/unique/UniqueApp.c
generated/bindings/org/gnome/unique/UniqueApp.c:44:27: fatal error: unique/unique.h: No such file or directory
compilation terminated.
make: *** [build-java] Error 1 
```

有谁知道问题是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:34:07.607

`gcc`无法`unique/unique.h`在提供的包含路径中找到。之后的每个路径`-I`都将被添加到包含路径的集合中。找到的位置`unique/unique.h`并确保该路径在`gcc`命令行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T17:47:14.110

我遇到了同样的问题，在谷歌搜索了一段时间后出现空白，我最终将“唯一”目录从“unique-3.0”目录移动到 /usr/include。一切正常后

# git - 当我无法直接推送到源/主时如何组织 git 工作流？

> ID：14413002
> 
> 赞同：2
> 
> 时间：2013-01-19T09:38:27.340
> 
> 标签：git, workflow

我检查了一个我想要工作的 git 项目。我没有推送权限，所以我将向上游维护者提交补丁。我想创建自己的分支，并在该分支上与其他几个人合作。工作完成后，我想根据主项目的当前负责人重新设置我的分支并将补丁发送给上游维护者。问题是：如何组织在一个分支上工作的一组人之间的协作？

目前我使用以下设置：

*   我有自己的 git 服务器，我在上面保存了 repo 的裸副本。
*   我将我的工作分支存储在该服务器上
*   其他开发人员将他们的更改推送到服务器上的该分支并提取其他人所做的更改，因此服务器充当所有在分支上工作的人的中央存储库
*   对 master 所做的更改是从项目的上游存储库中提取的。
*   如果需要，可以将 Master 推送到我的服务器

我认为这是一个很好的设置，但我意识到如果我决定将我的分支重新定位到来自上游的当前主服务器，那么一切都会中断。如果我将重新设置的分支推送到我的本地服务器，它最终会成为其他人的灾难，所以显然这不是一个正确的设置。我和我的朋友讨论过这个问题，他指出问题是由于使用我自己的本地服务器作为所有开发人员的中央服务器造成的，就好像它是一个颠覆存储库一样。因此，虽然我认为我们意识到了问题的根源，但我们并没有想出一个正确的方法来组织我们的 git 工作流。这应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:36:38.480

你的每个同事都应该为他们的每一个小迭代创建微分支[又名特性分支]（从你的主分支；你也应该这样做），他们可以随时将它们推送到你的服务器以允许它们被看到。随着每个微迭代的完成，他们（和您）将在您的主分支之上重新定义该迭代，以查看它是否仍在工作并准备好与您的主分支集成。

这里有一场比赛来保持迭代的简短和小，以便它们“正常工作”并且是可接受的，并合并或快速转发到您的主分支。在某些情况下，不同的迭代会相互作用，适当的开发人员可以使用推/拉的微分支进行协作，以避免内讧；-)

如果在开发中有很多交叉运行的功能，那么您可以使用`git help workflows`类似于 Git 维护者使用的工作流（），Master <- Next <- pu（潜在更新）<-contributor 分支，pu 在之后倒带每个周期，贡献者都会对重新缠绕的分支进行全新的观察，以了解他们的更改如何适应更大的整体。

* * *

补丁提交

一旦您在“主”分支中完成了一项工作，您应该再次获取/拉取上游主服务器（以及他们可能拥有的任何发布候选者）并在它们之上重新调整您的更改以真正保持最新。

现在，您将使用 准备来自您的分支的补丁系列`git format-patch`，很可能已经准备了一封介绍该系列的求职信。然后使用`git send-email`将它们发送进来。尽管将它们发送给自己，并查找上游项目提供的任何说明，但还是值得练习的。例如[Git 的 SubmittingPatches](https://github.com/git/git/blob/master/Documentation/SubmittingPatches)。

# python - 如何编写 subprocess.Popen 行代码

> ID：14413003
> 
> 赞同：0
> 
> 时间：2013-01-19T09:38:38.773
> 
> 标签：python

我用过

```
 self.session.open(MoviePlayer, sref) 
```

开始在我的 python 2.6 代码中使用 MoviePlayer 播放文件，我被告知我应该使用

```
 subprocess.Popen() 
```

但我不确定我应该如何转换上面的行来使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:52:33.830

我不知道 self.session.open 的东西是什么，但这里有一个如何使用子进程的简单示例：

```
import subprocess

p = subprocess.Popen(
    ['echo', 'run', 'your', 'command'],
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE)
out, err = p.communicate('')
print '==== exit code:', p.returncode
print '==== stdout:'
print out,
print '==== stderr:'
print err, 
```

将其保存到文件并在类 Unix 系统中从命令行运行它。

[http://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)有更多细节和例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:07:28.013

有几种方法可以用 python 运行系统命令

```
import os
os.system("date") 
```

或者

```
import os
f = os.popen('date')
now = f.read()
print "Today is ", now 
```

或者如果您想使用子流程：

```
import subprocess
subprocess.call("command1")
subprocess.call(["command1", "arg1", "arg2"]) 
```

==

```
import subprocess
subprocess.call(["ls", "-l", "/etc/passwd"]) 
```

==

```
import subprocess
p = subprocess.Popen("date", stdout=subprocess.PIPE, shell=True)
(output, err) = p.communicate()
print "Today is", output 
```

==

```
import subprocess
p = subprocess.Popen(["ls", "-l", "/etc/fstab"], stdout=subprocess.PIPE)
output, err = p.communicate()
print "*** Running ls -l command ***\n", output 
```

==

```
import subprocess
p = subprocess.Popen(["ping", "-c", "10", "www.siyahsapka.org"], stdout=subprocess.PIPE)
output, err = p.communicate()
print  output 
```

# java - 如何在 GridView 中显示二维数组

> ID：14413004
> 
> 赞同：1
> 
> 时间：2013-01-19T09:39:06.900
> 
> 标签：java, android, gridview, adapter, multidimensional-array

我有二维数组：

```
 static final String[][] numbers = new String[][] {};
    numbers[0][0] = "A";
    numbers[0][1] = "b";
    numbers[0][2] = "c";

    numbers[1][0] = "d";
    numbers[1][1] = "e";
    numbers[1][2] = "f";

    numbers[2][0] = "g";
    numbers[2][1] = "h";
    numbers[2][2] = "z";

    gv = (GridView)findViewById(R.id.gridView); 
```

我怎样才能把它放到带有适配器的 GridView 中？

# ruby - 在 Ruby 中通过名称访问类型

> ID：14413008
> 
> 赞同：0
> 
> 时间：2013-01-19T09:39:52.100
> 
> 标签：ruby

在 ruby​​ 中，我可以说（例如，我选择了 Mongoid）

```
class MyItem
  include Mongoid::Document
  include Mongoid::Timestamps

  #.................

  def method1(some_type)
    raise "Not symbol" unless some_type.is_a?(Symbol)
    raise "Unsupported some_type (#{some_type})" unless [:some_type1, :some_type2, :some_type3].include?(some_type)
    min_time_to_update = 60*60
    full_method_name = "#{some_type}_another_method".to_sym()

    !!self.send(full_method_name)
  end
end 
```

并称之为

```
result = MyItem.first.method1(:some_type2) 
```

在这里，该方法`send`用于通过名称调用类型的方法。但是如果我想做以下事情怎么办

```
 def method1(type, arg1, arg2)
     #check if it's a correct type....
     # type might be either MyItem1 or MyItem2 or anything that has a method `method123`
     "#{type}".method123(arg1, arg2)
  end 
```

我怎样才能做到这一点？如何**通过名称访问类型**以调用其方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:42:45.610

`type`是一个字符串，例如。“我的项目 1”还是“我的项目 2”？

试试`Object.const_get(type).method123(arg1, arg2)`。

# c# - SaveFileDialog，文件不存在

> ID：14413011
> 
> 赞同：0
> 
> 时间：2013-01-19T09:40:25.153
> 
> 标签：c#, .net

我必须处理一个 XML 文件（我正在选择一个带有 OpenFileDialog 的文件 [此处不存在代码]，当我单击第二个按钮时，处理 XML 以显示该 XML 的树结构，该 XML 必须保存在另一个文件中） . 但是当我使用 SaveFileDialog 时，我想输入一个尚不存在的文件的文件名。如果我输入不存在的文件名，我应该怎么做，会创建一个空文件？

```
 private void button2_Click(object sender, EventArgs e)
        {
        SaveFileDialog fDialog = new SaveFileDialog();
        fDialog.Title = "Save XML File";
        fDialog.FileName = "drzewo.xml";
        fDialog.CheckFileExists = false;
        fDialog.InitialDirectory = @"C:\Users\Piotrek\Desktop";

        if (fDialog.ShowDialog() == DialogResult.OK)
        {

            MessageBox.Show(fDialog.FileName.ToString());
        }

        string XMLdrzewo = fDialog.FileName.ToString();
        XDocument xdoc = XDocument.Load(XMLdrzewo);
        //// some code processing xml file
        /// not ready yet, have to write to that file the tree
        //structure of  selected XML file

        textBox2.Text = File.ReadAllText(XMLdrzewo); 
```

当文件不存在时，我得到 FileNotFoundException 未处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:00:12.520

创建文件名的代码应该在 if 语句中。

```
if (fDialog.ShowDialog == DialogResult.OK)
{

} 
```

然后，您需要先创建一个文件，例如 var `stream = File.Create(filename)`。然后，您可以用“要创建的东西”填充该文件并将 xml 部分存储在新创建的文件中。

就像是：

```
if (fDialog.ShowDialog() == DialogResult.OK)
{

    using (var newXmlFile = File.Create(fDialog.FileName);
    {
           var xd = new XmlDocument();
           var root = xd.AppendChild(xd.CreateElement("Root"));
           var child = root.AppendChild(xd.CreateElement("Child"));
           var childAtt = child.Attributes.Append(xd.CreateAttribute("Attribute"));
           childAtt.InnerText = "My innertext";
           child.InnerText = "Node Innertext";
           xd.Save(newXmlFile);
    }
} 
```

# css - 从项目中的一处更改 yii 网格视图样式

> ID：14413013
> 
> 赞同：3
> 
> 时间：2013-01-19T09:40:47.450
> 
> 标签：css, gridview, yii, styles

我的项目中有 GridView 的问题。我正在开发一个 Yii 应用程序并在我项目的不同视图中使用标准 zii 网格视图。我的问题是找到一种方法来从我的项目中的一个地方更改他们的 CSS 样式。我真的不想逐个更改它。有什么建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T21:03:44.883

对于全局设置，您可以像这样编辑应用程序配置文件 main.php：

```
return array(
…
'components'=>array(
   'widgetFactory'=>array(
     'widgets'=>array(
      'CGridView'=>array(
             'cssFile' => Yii::app()->request->baseUrl.'/css/gridview.css',,
        ), 
```

请参阅[指南中的全局自定义小部件部分](http://www.yiiframework.com/doc/guide/1.1/en/topics.theming#customizing-widgets-globally)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:41:03.967

我只是想添加一个片段来阻止它一起加载。添加到主配置中的组件数组中。这从 1.1.3 开始可用

```
//stop zii loading css
    'widgetFactory'=>array(
        'widgets'=>array(
            'CGridView'=>array(
                'cssFile' => FALSE,
                ),
            ),
        ), 
```

或者加载一个特定的样式表

```
//stop zii loading css and load a specific stylesheet
    'widgetFactory'=>array(
        'widgets'=>array(
            'CGridView'=>array(
                'cssFile' => Yii::app()->request->baseUrl.'/css/gridview.css',
                ),
            ),
        ), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T16:10:55.723

**要按视图更改它**（我知道您说过您不想这样做，但无论如何对于可能正在搜索的任何人来说都是如此）是更改实例的`cssFile`属性，如下所示：`CGridView`

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'user-grid',
    'dataProvider' => $model->search(),
    'filter' => $model,
    'ajaxUpdate' => false,
    'cssFile' => Yii::app()->request->baseUrl.'/css/gridview.css',
     ... 
```

在上面的示例中，我们使用了一个名为*gridview.css*的 CSS 文件，而不是默认的 CSS 文件。

**要全局更改它**（跨所有实例`CGridView`），您可以在其中一个 CSS 文件中手动覆盖 gridview 的 CSS 属性（请记住文件的加载顺序，您可能需要使用`!important`）

**或者**

您可以简单地编辑位于以下位置的 gridview 的框架资产：

```
framework/zii/widgets/assets/gridview/styles.css 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T04:58:13.337

在搜索了很多关于这个问题之后，我找不到任何好的和标准的解决方案。因此，我使用了一种不寻常且可能不是标准的方法来解决该问题，并将其放在这里以供可能也遇到我的问题的人使用。
这个想法是，当您使用 zii yii 网格视图时，默认情况下，在运行时它会发送一个请求以获取其适当的 CSS 文件，因此在控制器中我不允许它使用以下代码获取其原始文件：

```
Yii::app()->clientScript->scriptMap = array(
            'pager.css' => false,
            'styles.css' => false,
        ); 
```

关键是这段代码阻止了对项目中所有styles.css 文件的所有请求。所以要小心。
我做的下一件事是将请求更改为 sytles.css 和 pager.css 文件。我定义了两个名为 gridStyle.css 和 pager.css 的自定义 css 文件，并使用它们代替这两个原始文件。因此，通过以下代码，我为此使用了一些映射：

```
 Yii::app()->clientScript->scriptMap = array(
            'pager.css' => Yii::app()->theme->baseUrl . '/css/pager.css',
            'styles.css' => Yii::app()->theme->baseUrl . '/css/gridStyle.css',
        ); 
```

通过这段代码，我说如果有对 styles.css 和 pager.css 文件的请求，请将它们替换为我的自定义文件。正如我所说，这可能不是一个好的解决方案，但它是我唯一的解决方案。

# c++ - 如何从 C++ 中的文本文件中读取 Unicode 符号

> ID：14413019
> 
> 赞同：-2
> 
> 时间：2013-01-19T09:41:49.350
> 
> 标签：c++, unicode

我无法使用 ifstream() 从我的文本文件 (UTF8) 中读取 Unicode 符号，但有些奇怪。你能帮我提供使用方法以及函数中使用哪些参数`ifstream`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:50:08.387

您可以为此使用 std 命名空间字符串和 ifstream 。

```
ifstream in("1.txt");
string s;
while(getline(in,s)
{
  for(int i = 0; i<s.length; i++){
     cout << s[i] ;
  }

}
in.close(); 
```

# java - 如何在 Java 中正确使用 printf 格式化

> ID：14413020
> 
> 赞同：10
> 
> 时间：2013-01-19T09:41:51.683
> 
> 标签：java, printf

我正在尝试创建一个简单的程序来接收三个项目、它们的数量和价格，并将它们加在一起以创建一个简单的收据类型格式。我的教授给了我一个特定的收据格式，其中所有小数都排成一列并始终如一地放置。它应该看起来像这样。

```
Your Bill:

Item                           Quantity       Price         Total
Diet Soda                            10        1.25         12.50
Candy                                1         1.00          1.00
Cheese                               2         2.00          4.00

Subtotal                                                    17.50
6.25% Sales Tax                                              1.09
Total                                                       18.59 
```

我的教授指定名称应该有 30 个字符，数量和价格和总计应该有 10 个字符。这样做我必须使用 printf 方法。到目前为止，我正在尝试使用此代码对其进行格式化。

```
import java.util.Scanner;
class AssignmentOneTest {

    public static void main(String[] args) {
        Scanner kb = new Scanner(System.in);

        // System.out.printf("$%4.2f for each %s ", price, item);
        // System.out.printf("\nThe total is: $%4.2f ", total);

        // process for item one
        System.out.println("Please enter in your first item");
        String item = kb.nextLine();
        System.out.println("Please enter the quantity for this item");
        int quantity = Integer.parseInt(kb.nextLine());
        System.out.println("Please enter in the price of your item");
        double price = Double.parseDouble(kb.nextLine());

        // process for item two
        System.out.println("Please enter in your second item");
        String item2 = kb.nextLine();
        System.out.println("Please enter the quantity for this item");
        int quantity2 = Integer.parseInt(kb.nextLine());
        System.out.print("Please enter in the price of your item");
        double price2 = Double.parseDouble(kb.nextLine());
        double total2 = quantity2 * price2;
        // System.out.printf("$%4.2f for each %s ", price2, item2);
        // System.out.printf("\nThe total is: $%4.2f ", total2);

        // process for item three
        System.out.println("Please enter in your third item");
        String item3 = kb.nextLine();
        System.out.println("Please enter the quantity for this item");
        int quantity3 = Integer.parseInt(kb.nextLine());
        System.out.println("Please enter in the price of your item");
        double price3 = Double.parseDouble(kb.nextLine());
        double total3 = quantity3 * price3;
        // System.out.printf("$%4.2f for each %s ", price3, item3);
        // System.out.printf("\nThe total is: $%4.2f ", total3);

        double total = quantity * price;

        double grandTotal = total + total2 + total3;
        double salesTax = grandTotal * (.0625);
        double grandTotalTaxed = grandTotal + salesTax;

        String amount = "Quantity";
        String amount1 = "Price";
        String amount2 = "Total";
        String taxSign = "%";

        System.out.printf("\nYour bill: ");
        System.out.printf("\n\nItem");
        System.out.printf("%30s", amount);
        // System.out.printf("\n%s %25d %16.2f %11.2f", item, quantity, price,
        // total);
        // System.out.printf("\n%s %25d %16.2f %11.2f", item2,quantity2, price2,
        // total2);
        // System.out.printf("\n%s %25d %16.2f %11.2f", item3,quantity3, price3,
        // total3);

        System.out.printf("\n%s", item);
        System.out.printf("%30d", quantity);
        System.out.printf("\n%s", item2);
        System.out.printf("\n%s", item3);

        System.out.printf("\n\n\nSubtotal %47.2f", grandTotal);
        System.out.printf("\n6.25 %s sales tax %39.2f", taxSign, salesTax);
        System.out.printf("\nTotal %50.2f", grandTotalTaxed);    
    }
} 
```

如果我输入更长的项目名称，它会移动数量和价格以及总计的位置。我的问题是，如何使用 printf 设置一个有限宽度的起点，请帮忙。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-06-14T01:31:21.530

```
System.out.printf("%1$-30s %2$10d %3$10.2f %4$10.2f", "Diet Soda", 10, 1.25, 12.50); 
```

将打印该行

```
Diet Soda                              10       1.25      12.50 
```

传递给该`printf`方法的第一个字符串是一系列格式说明符，描述了我们希望如何打印其余参数。在格式说明符周围，您可以添加也将被打印的其他字符（不被格式化）。

上面的格式说明符具有以下语法：
`%[index$][flags][width][.precision]conversion`where`[]`表示可选。

`%`开始一个格式化表达式。

`[index$]`指示要格式化的参数的索引。索引从 1 开始。实际上不需要上面的索引，因为每个没有索引的格式说明符都被分配了一个从 1 开始计数的值。

`[-]`上面使用的唯一标志将输出向左对齐。

`[width]`表示要打印的最小字符数。

`[.precision]`在这种情况下，要写入小数点后的位数，尽管这会随着不同的转换而变化。

`conversion`指示应如何格式化参数的字符。`d`是十进制整数，`f`是浮点的十进制格式，`s`在我们的例子中不会改变字符串。

更多信息可以在[这里找到。](http://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#syntax)

# git - 如何克隆 git 存储库命名空间

> ID：14413022
> 
> 赞同：3
> 
> 时间：2013-01-19T09:42:09.750
> 
> 标签：git

我想创建一个命名空间并推送到一个裸仓库，这就是我所做的，Push 有效，克隆，pull 没有。

GIT_NAMESPACE=工作

创建了一个空仓库并添加了提交

完成 git push 到一个裸仓库；在裸仓库中，我确实看到了命名空间/工作

现在

如果我克隆它，名称空间就没有了。

我有相同的环境变量集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:23:38.733

我是 git 命名空间的新手，并决定尝试一下。以下脚本是结果。它涉及三个存储库。`sample`仓库推送到`sample-remote`裸仓库的工作命名空间。而且，我正在将工作命名空间克隆`sample-remote`到`sample-clone`存储库中。

```
#!/bin/bash

set -e

cd ~/Code
git init sample
cd sample
touch file
git add file
git commit -m "First commit"
git remote add origin ~/Code/sample-remote.git
git init --bare ~/Code/sample-remote.git
GIT_NAMESPACE=work git push origin master
cd ..
git clone ext::'git --namespace=work %s ~/Code/sample-remote.git' \
    sample-clone -b master
cd sample-clone
touch file2
git add file2
git commit -m "Second commit"
git push 
```

没有`-b master`参数，我得到以下错误：

```
warning: remote HEAD refers to nonexistent ref, unable to checkout. 
```

并且工作目录是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:00:26.753

这取决于您要访问存储库的方式。

请参阅[gitnamespaces(7)](http://www.kernel.org/pub/software/scm/git/docs/gitnamespaces.html)。

文件系统访问示例：

```
git clone ext::'git --namespace=foo %s /path/to/repo.git' 
```

# python - 在 Python (windows) 中安装模块时“无法找到 vcvarsall.bat”的根本原因

> ID：14413023
> 
> 赞同：1
> 
> 时间：2013-01-19T09:42:10.520
> 
> 标签：python, windows, pip

之前，我能够在 Windows 7 上的 Python 安装中安装（使用 pip）任何模块。但是，几天前发生了/改变，因为当我尝试使用 pip 安装任何东西时，出现以下错误：

```
Error: Unable to find vcvarsall.bat 
```

我试图找到错误的根本原因。几天前，我安装了 Flask 和 Numpy/Matplotlib（exe 安装），但我不知道它们是否会在 Windows 上导致此问题，即删除该 bat 文件或更改一些 PATH。

我已经在网络和 stackoverflow 上搜索了这个错误，他们说你必须安装 mingw32 或 VS express 2008。但这并不是一个真正的解决方案，因为一周前我的 Python 上一切都很好，没有安装任何这些。你有其他解决方案，所以我仍然可以使用 PIP 吗？

问候

# python - 如何找出对象在哪里被实例化？

> ID：14413025
> 
> 赞同：9
> 
> 时间：2013-01-19T09:42:15.677
> 
> 标签：python, inspect

我试图在运行时找出对象被实例化的位置，因为这可以为我的库的用户提供非常有用的错误消息。

假设我们有以下代码：

```
import mylib

obj = mylib.MyClass() 
```

`obj`然后从 传递给另一个类的实例`mylib`，然后开始一段美妙的旅程。沿着这条线的某个地方，`obj`会导致一些不好的事情发生，我想将用户指向`obj`实例化的位置。

我希望我可以使用[检查](http://docs.python.org/library/inspect.html)模块来找出在哪个文件中以及在哪个行号`obj`被实例化。不幸的是，`inspect.getsourcefile`and`inspect.getsourcelines`不支持实例。是否存在不支持的技术原因？

还有其他方法可以获得我正在寻找的数据吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T09:54:13.250

您可以在类的构造函数中记录此信息：

```
import traceback

class MyClass(object):
   def __init__(self):
       self.traceback = traceback.extract_stack()[-2]

obj = MyClass()

print 'Instantiated in {0}:{1}'.format(*obj.traceback) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:12:49.600

可能你想要这个？

```
In [1]: def checkinstance(prohibitedclass):
   ...:     import sys
   ...:     final_result=set()
   ...:     for x in sys._getframe(1).f_locals:
   ...:         if isinstance(sys._getframe(1).f_locals.get(x),prohibitedclass):
   ...:             final_str="instance of class %s is at: %s"%(prohibitedclass,sys._getframe(1).f_locals.get(x))
   ...:             final_result.add(final_str)
   ...:     return list(final_result)

In [2]: class not_allowedclass(object):
   ...:     pass

In [3]: checkinstance(not_allowedclass)
Out[3]: []

In [4]: nk=not_allowedclass()

In [5]: nk1=not_allowedclass()

In [6]: checkinstance(not_allowedclass)
Out[6]: 
["instance of class <class '__main__.not_allowedclass'> is at: <__main__.not_allowedclass object at 0x102dcdb10>",
 "instance of class <class '__main__.not_allowedclass'> is at: <__main__.not_allowedclass object at 0x102dcda90>"]

In [7]: nk
Out[7]: <__main__.not_allowedclass at 0x102dcda90>

In [8]: nk1
Out[8]: <__main__.not_allowedclass at 0x102dcdb10>

In [9]: 
```

# c - Open CV 中的 HVS 色彩空间

> ID：14413026
> 
> 赞同：0
> 
> 时间：2013-01-19T09:42:17.227
> 
> 标签：c, opencv, color-space

当我使用 Open CV 编程打开我的 System CAM 时，我将检测到黄色对象，我从教程[Object Recognition in Open CV 中](http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/)获得了一些帮助，但我不清楚这行代码，它做了什么，我不知道不知道。请详细说明我正在使用的以下代码行。

```
cvInRangeS(imgHSV, cvScalar(20, 100, 100), cvScalar(30, 255, 255), imgThreshed); 
```

程序的其他部分：

```
CvMoments *moments = (CvMoments*)malloc(sizeof(CvMoments));
    cvMoments(imgYellowThresh, moments, 1);

    // The actual moment values
    double moment10 = cvGetSpatialMoment(moments, 1, 0);
    double moment01 = cvGetSpatialMoment(moments, 0, 1);
    double area = cvGetCentralMoment(moments, 0, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:21:08.373

阅读[文档](http://docs.opencv.org/)怎么样？

[`inRange`](http://docs.opencv.org/2.4.2/modules/core/doc/operations_on_arrays.html#inrange)：

> 检查数组元素是否位于其他两个数组的元素之间。

实际上那篇文章包含明确的解释：

> 并且两个 cvScalar 代表颜色为黄色的值的下限和上限。

关于第二个代码。从该计算作者找到对象的中心及其正方形。引用文章：

> 您首先为矩结构分配内存，然后计算各种矩。然后使用矩结构，计算两个一阶矩（矩 10 和矩 01）和零阶矩（面积）。
> 
> 将 moment10 除以面积得出黄球的 X 坐标，类似地，将 moment01 除以面积得出 Y 坐标。

# c# - 创建更快的正则表达式 clr 函数

> ID：14413027
> 
> 赞同：6
> 
> 时间：2013-01-19T09:42:23.663
> 
> 标签：c#, sql-server, sql-server-2008, sql-server-2005, sqlclr

我正在尝试改进链接[http://msdn.microsoft.com/en-us/magazine/cc163473.aspx](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)中的 Clr 功能。

```
public static partial class UserDefinedFunctions 
{
    public static readonly RegexOptions Options =
        RegexOptions.IgnorePatternWhitespace |
        RegexOptions.Singleline;

    [SqlFunction]
    public static SqlBoolean RegexMatch(
        SqlChars input, SqlString pattern)
    {
        Regex regex = new Regex( pattern.Value, Options );
        return regex.IsMatch( new string( input.Value ) );
    }
} 
```

当执行`select * from Table1 where dbo.RegexMatch(col1, 'pattern') = 1`时，Clr 函数为表中的每一行创建一个新的 Regex 对象。

是否可以为每个 Sql 语句只创建一个 Regex 对象？对于每一行，只需调用`regex.Ismatch(...)`. 以下代码有效吗？

```
public static partial class UserDefinedFunctions 
{
    public static readonly RegexOptions Options =
        RegexOptions.IgnorePatternWhitespace |
        RegexOptions.Singleline;

    static Regex regex = null;

    [SqlFunction]
    public static SqlBoolean RegexMatch(
        SqlChars input, SqlString pattern)
    {
        if (regex == null) 
            regex = new Regex( pattern.Value, Options );
        return regex.IsMatch( new string( input.Value ) );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T12:08:43.020

您的静态正则表达式的基于 UDF 的实例可能甚至没有被重复使用，您最好调用静态版本

`System.Text.RegularExpressions.RegEx.IsMatch(string input, string pattern, RegexOptions options);`

直接地。

请注意，在调试模式下的工作方式与它们在生产环境中的工作方式不同，并且 SQL 会在需要时释放内存。

另外，尝试使用`RegexOptions.Compiled`and `CultureInvariant`。

# android - 是否可以在 EditText 中获取一些字符串 String

> ID：14413039
> 
> 赞同：1
> 
> 时间：2013-01-19T09:44:09.820
> 
> 标签：android, android-edittext

**帮帮我**，先生，:(

是否可以在 EditText 中获取一些字符串 String 并将其显示到列表视图？
我正在为我的数据库使用 SQLite。
（对不起我的英语不好）..

输入词：`text_1 +text_2 +text_3`

列表显示 ：`text_1 text_2 text_3`

**截屏**

![在此处输入图像描述](../Images/f088152b6a46ab4b5547296bcb2ce7ab.png)

# javafx - 将整数转换为 ObservableValue 在 javafx 中

> ID：14413040
> 
> 赞同：17
> 
> 时间：2013-01-19T09:44:18.650
> 
> 标签：javafx, javafx-2

如何在 javafx 2.0 及更高版本中转换`Integer`为？`ObservableValue<Integer>`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-19T10:26:11.823

我们使用 a`ReadOnlyObjectWrapper<>(*integer value*);`并将值存储在`ObservableValue<Integer>`引用中。

```
ObservableValue<Integer> obsInt = new ReadOnlyObjectWrapper<>(intValue); 
```

* * *

**更新**

从 JavaFX 8 开始，您还可以执行以下操作：

```
ObservableValue<Integer> obsInt = new SimpleIntegerProperty(intValue).asObject(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-23T05:46:10.597

其他方式。

```
new SimpleIntegerProperty(integer_value).asObject() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-06-18T20:33:10.270

如果您使用 tableview 这样做：只需将 Integer 更改为 Number

```
@FXML
private TableColumn<Sockets,Number> key;
...
key.setCellValueFactory(cellData -> cellData.getValue().socketIdProperty()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-05T08:09:56.947

`IntegerProperty``ObservableValue<Number>`不执行`ObservableValue<Integer>`。所以你应该这样做：

```
// Here Person is a class and age is a variable of type IntegerProperty
ObservableValue<Number> ob = Person.age; 
```

# powershell - 在PowerShell中处理大量嵌套数据的最佳方法？

> ID：14413045
> 
> 赞同：0
> 
> 时间：2013-01-19T09:44:59.300
> 
> 标签：powershell, nested, powershell-3.0

我正在尝试自动化我们每日批次的日志文件验证。

我想检查大约 20 台服务器，它们可能有多达 30 个批次，每个批次可以生成一个或多个日志文件，我想使用多个标准来验证它们。
因此，这最终会产生大量数据。

我的第一个想法是使用嵌套数组和哈希表，然后像这样创建 psobject：

```
$servers=@(
    @{
     "name"="server1";
     "credential"="domain\user";
     "batch"=@(
                @{"batchName"="test";"path"="e:\cit\sauvegarde\batch\recup.cmd";"comment"="batch de test";"schedule"="lundi,mardi ";
                    "validations"=@(
                        @{"name"="log exist";"path"="\\smacweb\e$\cit\test.log";"filter"=@("NotNull";"NotOlderThan,2") };
                        @{"name"="no erros";"path"="\\smacweb\CIT\sauvegarde\logs\*.log";"filter"=@("NotContains,'error'") };
                )};
                @{"batchName"="mysql";"comment"="dump des bases mysql";"schedule"="lundi,mardi,vendredi";
                    "validations"=@(
                        @{"name"="log exist";"path"="\\smacweb\e$\mysqldump\dump.zip";"filter"=@("NotNull";"NotOlderThan,2") };
                        @{"name"="zipOK";"path"="\\smacweb\e$\mysqldump\dump.zip";"filter"=@("Test-Zip") };
                )};
       )
    };
#     @{
#     "name"="server2";
#     "credential"="domain\user2";
#     "batch"=@(
#                @{"batchName"=.....};
#     )};
)

$srv=@()
$servers | % {
        $srv+= New-Object -TypeName psobject -Property $_;
} 
```

这是一个小例子，但我想它很快就会变得难以阅读。那么有什么更好的方法来做到这一点呢？使用xml（我不熟悉），使用外部数据库，其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:57:21.017

警告：当谈到 xml 时，我是个菜鸟，但为了好玩我试了一下。这只是一个示例，说明如何浏览 xml 文件。:)

XML 文件（test.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<servers>
  <server>
    <servername>server1</servername>
    <credential>domain\user</credential>
    <batches>
      <batch>
        <batchname>test</batchname>
        <batchpath>e:\cit\sauvegarde\batch\recup.cmd</batchpath>
        <comment>batch de test</comment>
        <schedule>
          <day>lundi</day>
          <day>mardi</day>
        </schedule>
        <validations>
          <validation>
            <name>log exist</name>
            <path>\\smacweb\e$\cit\test.log</path>
            <filters>
              <filter>NotNull</filter>
              <filter>NotOlderThan,2</filter>
            </filters>
          </validation>
          <validation>
            <name>no erros</name>
            <path>\\smacweb\CIT\sauvegarde\logs\*.log</path>
            <filters>
              <filter>NotContains,'error'</filter>
            </filters>
          </validation>
        </validations>
      </batch>
      <batch>
        <batchname>mysql</batchname>
        <comment>dump des bases mysql</comment>
        <schedule>
          <day>lundi</day>
          <day>mardi</day>
          <day>vendredi</day>
        </schedule>
        <validations>
          <validation>
            <name>log exist</name>
            <path>\\smacweb\e$\mysqldump\dump.zip</path>
            <filters>
              <filter>NotNull</filter>
              <filter>NotOlderThan,2</filter>
            </filters>
          </validation>
          <validation>
            <name>zipOK</name>
            <path>\\smacweb\e$\mysqldump\dump.zip</path>
            <filters>
              <filter>Test-Zip</filter>
            </filters>
          </validation>
        </validations>
      </batch>
    </batches>
  </server>
</servers> 
```

用于循环服务器和批处理的 Powershell 脚本：

```
function test {
    $xml = [xml](Get-Content C:\Users\Frode\Desktop\test.xml)

    $servers = $xml.SelectNodes("/servers/server")

    foreach ($server in $servers) {
        $batches = $server.SelectNodes("batches/batch")

        Write-Host "Server: $($server.servername)"
        foreach ($batch in $batches) {
            Write-Host "Checking batch: $($batch.batchname)"
        } 
    }
} 
```

输出：

```
PS-ADMIN C:\Windows\system32> test
Server: server1
Checking batch: test
Checking batch: mysql 
```

# html - 环形div

> ID：14413047
> 
> 赞同：0
> 
> 时间：2013-01-19T09:45:20.110
> 
> 标签：html, css

其实我这里有两个问题。我会尽可能多地解释它们。

我正在尝试创建一个环形 div。下面是它应该是什么样子。

![在此处输入图像描述](../Images/186b6b0b2fd0021be538395317431586.png)

[这](http://dabblet.com/gist/4571207)是我到目前为止所做的。我怎样才能得到从左下角到顶部的轻微曲线？我怎样才能为右侧创建*倒曲线？*

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:12:34.647

您可以添加第二个圆圈，将您不想看到的图像部分变白。

例如，如果您添加带有 id 的第二个 div（在第一个 div 内）`cutout`并设置如下样式：

```
#cutout {
    top:250px;
    border-radius: 700px;
    border:300px solid #eee;
    z-index:1;
    left:200px;
    height:200px;
    position:absolute;
} 
```

然后在你的形象中，你会更接近你想要的。您还需要添加`position: relative`到您的容器 div 以确保它是定位和剪辑的。

最后，如果您想剪裁如图所示的环段，您需要添加一个额外的外部 div 来剪裁最里面的两个；你应该用径向背景替换图像。

这看起来大约像：[http ://dabblet.com/gist/457188​​2](http://dabblet.com/gist/4571882)

图片：![基于 CSS 的变体](../Images/6625e47f2daf2b1c851a6cfcf232d134.png)

老实说，我不确定像这样的扭曲效果很好——你通常不会得到你想要的结果，而且它很可能不能在旧浏览器上很好地工作；也不一定在实现这些 CSS 属性的较新版本的较新浏览器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:52:23.270

你可以尝试创建一个新的 div 并添加

```
border-top-right-radius: XXX 
```

对于倒置段。确保它们正确浮动（例如`float:left`）。

# asp.net - 你如何在文本框或输入控件（如谷歌搜索下拉结果）中填充 sql 查询结果

> ID：14413050
> 
> 赞同：2
> 
> 时间：2013-01-19T09:45:41.253
> 
> 标签：asp.net, sql-server

我正在为朋友做一个小项目，任何帮助都会非常感谢您。

我有一个文本框，但我也可以使用 html 输入控件。

与 google bar 的想法相同，您可以在其中键入字母 a，这将返回与字母 a 匹配的任何描述。它会在 inut 控件下方显示匹配值，与 goodle 搜索栏相同。

任何关于如何执行此代码示例 C# 的想法都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:01:08.700

您可以使用 jQuery 和 HTTP 处理程序

1.  下载[jQuery](http://jquery.com/download/)（如果你还没有）
2.  下载[autocomplete.js](http://www.pengoworks.com/workshop/jquery/lib/jquery.autocomplete.js)
3.  下载[jquery.autocomplete.css](http://www.pengoworks.com/workshop/jquery/lib/jquery.autocomplete.css)
4.  将文件复制到您的项目中。我的位于名为 Scripts 和 Style 的子文件夹中

**SQL：**

为了举例，我创建了一个名为 Search 的本地数据库，它有一个包含两列 SearchId 和 Search 的表来存储一些虚拟搜索数据

**ASPX：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Auto complete</title>
    <script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
    <link href="Style/jquery.autocomplete.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery.autocomplete.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#txtSearch").autocomplete("Autocomplete.ashx");
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <input id="txtSearch" type="text" />
    </div>
    </form>
</body>
</html> 
```

**Autocomplete.ashx 处理程序：**

```
using System;
using System.Data.SqlClient;
using System.Web;

namespace WebApplication17
{
    public class Autocomplete : IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            string connectionString = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["connection"].ConnectionString;
            string input = context.Request.QueryString["q"];
            string query = "SELECT TOP 10 Search FROM Search WHERE Search LIKE '" + input + "%'";

            using (var conn = new SqlConnection(connectionString))
            {
                using (var command = new SqlCommand(query,conn))
                {
                    conn.Open();
                    using (SqlDataReader reader = command.ExecuteReader())
                    {
                        while (reader.Read())
                            context.Response.Write(reader.GetString(0) + Environment.NewLine);
                    }
                }
            }
        }

        public bool IsReusable
        {
            get{return false;}
        }
    }
} 
```

**输出：**

![在此处输入图像描述](../Images/c64baf744c32f884ab09438385d6ca27.png)

我已将项目的压缩版本放在[Google Drive](https://docs.google.com/file/d/0B0iPiW5jXDdPOTFIbzJqWVNHMlk/edit)上。希望这会有所帮助！

# c++ - strand.post 和 strand.wrap 之间的性能差异是什么？

> ID：14413054
> 
> 赞同：3
> 
> 时间：2013-01-19T09:46:02.890
> 
> 标签：c++, boost, boost-asio

`strand::post()`和之间的性能差异是什么`strand::wrap()`？使用时关于比赛条件的故事是什么`strand::wrap(`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:22:05.667

只是为了澄清，[`strand::wrap`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service__strand/wrap.html)只创建一个处理程序，提供的处理程序和返回的处理程序都不会分派或发布到`io_service`. 如果结果 from`strand::wrap`被执行，那么开销的性能差异可以忽略不计。但是，使用 包装的处理程序可能会出现感知的性能差异[`dispatch()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service__strand/dispatch.html)，在某些情况下，用户的处理程序将立即执行，而不是[`post()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service__strand/post.html)，用户的处理程序总是添加到队列中。

此外，使用链时不应存在竞争条件。根据[文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service__strand.html)，对于不同的和共享的对象，它是线程安全的。

# c++ - IntelliSense：命名空间“MSXML2”在 VS2012 中没有成员“DOMDocument”

> ID：14413055
> 
> 赞同：8
> 
> 时间：2013-01-19T09:46:07.607
> 
> 标签：c++, xml

我正在尝试编译我继承的项目，然后遇到此错误。以下是一些相关代码：

```
#include <msxml.h>
...
HRESULT hr;
hr = pDoc.CreateInstance(__uuidof(MSXML2::DOMDocument)); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T14:51:38.040

我在 Windows 8 中看到了类似的问题。似乎 MSXML 6.0 没有公开 DOMDocument，但确实公开了 DOMDocument60。为了帮助其他人通过搜索到达这里，您可能还会看到编译器错误：错误 C2039: 'DOMDocument' : is not a member of 'MSXML2'

尝试进行以下更改以显式使用 6.0 接口：

```
#import "msxml6.dll"
...
HRESULT hr;
hr = pDoc.CreateInstance(__uuidof(MSXML2::DOMDocument60)); 
```

我看到其他人有这个问题，但在 Excel 自动化的背景下。[请参阅此处](http://social.technet.microsoft.com/Forums/en-US/W8ITProPreRel/thread/f9180e5c-7c2f-44be-8415-d0d2b76e3f7f/)的讨论。

# c++ - C++ 字符串流拆分

> ID：14413057
> 
> 赞同：0
> 
> 时间：2013-01-19T09:46:34.327
> 
> 标签：c++, vector, split, stringstream

几天来，我一直在梳理这个网站和许多其他网站，这就是我遇到的问题。我有一个`char*`我需要解析的字符串，90% 的时间它解析得很好，但是在某些字符串上我得到垃圾字符并且它没有按预期拆分。您可以在 img 中看到一个示例：[垃圾字符](https://imgur.com/NNf0tWm)

这是我正在使用的代码（我也尝试了许多其他替代方法，这是唯一接近的）

```
bool __stdcall ChatLogger::HandleNewChatLine( short sMode, char* szText )
{
    ofstream chatlog;
    ofstream chatparsed;

    if(sMode == 660)
    {
        string data = szText;

        chatparsed.open("D:\\chatlog_parsed.txt", ios_base::app );
        chatparsed << data << '\n' << '\n';
        chatparsed.close();

        string buf; // Have a buffer string
        stringstream ss(data); // Insert the string into a stream

        vector<string> tokens; // Create vector to hold our words

        while (ss >> buf)
        {
            tokens.push_back(buf);
        }

        chatparsed.open("D:\\chatlog_parsed.txt", ios_base::app );

        for(size_t i = 0; i < tokens.size(); i++)
        {
            chatparsed << "array pos: " << i << "    " << tokens[i] << '\n';
        }
        chatparsed.close();
    }

    chatlog.open("D:\\chatlog.txt", ios_base::app );
    chatlog << "Line ID: " << sMode << "    " << "Text: " << szText << '\n';
    chatlog.close();

    return false;
} 
```

最终，每行应该只有一个单词，如果可能的话，我真的需要消除垃圾字符，要么从向量中的单个字符串中删除它们，要么最好在之前删除它们。`std::stringstream`在将其放入向量中并删除垃圾字符或以某种方式将它们转换为空格之前，也许有某种方法可以遍历它。

# extjs - 如何每 X 秒重新加载一次商店？

> ID：14413058
> 
> 赞同：2
> 
> 时间：2013-01-19T09:46:35.217
> 
> 标签：extjs

我正在使用 ExtJS 4 MVC。

有没有办法每 X 秒重新加载一次 Store？

我想将代码放在`Controller`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T11:15:46.037

```
setInterval(function(){
    // Use Ext.getStore to reference your store from the controller
    var myStore = Ext.getStore('YourStore');
    // Pass in an object of the changes you want to be made to the store
    myStore.proxy.extraParams = { key:'sencha'}; // replace with your own object
    myStore.load();

},3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-08T12:51:03.093

在 Extjs 中仅供参考，这可以通过[Ext.util.TaskRunner](http://docs.sencha.com/extjs/4.2.5/#!/api/Ext.util.TaskRunner)来实现。示例代码：

```
var runner = new Ext.util.TaskRunner(),
clock, updateClock, task;

clock = Ext.getBody().appendChild({
    id: 'clock'
});

// Start a simple clock task that updates a div once per second
updateClock = function() {
    clock.setHtml(Ext.Date.format(new Date(), 'g:i:s A'));
};

task = runner.start({
    run: updateClock,
    interval: 1000
}); 
```

# c# - WinForms DataGridView 和 PropertyGrid 行为

> ID：14413060
> 
> 赞同：0
> 
> 时间：2013-01-19T09:46:50.080
> 
> 标签：c#, .net, datagridview, propertygrid, browsable

> **可能重复：**
> [使属性在 DataGridView 中可见但在 PropertyGrid 中不可见？](https://stackoverflow.com/questions/10726543/make-a-property-visible-in-datagridview-but-not-in-propertygrid)

我在应用程序中同时使用 DataGridView 和 PropertyGrid 并将其设置为数据源，如下所示：

```
public class Location
{
    public string Name { get; set; }
    public string Status { get; set; }
}

public class Locations: List<Location> { } 
```

在 DataGridView 的情况下，`Locations`对象被设置为数据源，而在 PropertyGrid 的情况下，单个`Location`对象被设置为`SelectedObject`.

我需要将`Status`变量显示在 DataGridView 中而不是 PropertyGrid 中。隐藏成员的默认方法是用`[System.ComponentModel.Browsable(false)]`属性标记它们，但这会使它从两个视图中消失。

是否有另一种方法可以强制`Status`出现在 DataGridView 上？

# javascript - 如何根据任何用户给出的尺寸制作一个矩形？

> ID：14413062
> 
> 赞同：0
> 
> 时间：2013-01-19T09:47:10.693
> 
> 标签：javascript, jquery, css

我试图根据输入区域内输入的值制作一个矩形。更具体地说，我有两个字段：

**宽度：**

**高度：**

因此，我想将宽度和高度的值传递给 JavaScript 中的函数，并根据输入的值制作矩形。

我尝试在互联网上查找，但即使在上面花费了数小时后，我也找不到解决方案。：（ 任何帮助将不胜感激。

PS一个小小提琴或例子会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:54:20.753

html正文：

```
<input type='text' id='w'>
<input type='text' id='h'>
<input type='submit' id='go'>
<div id='shape'><div> 
```

js：

```
 $(function(){
        $('#go').click(function(){
          $('#shape')
            .css('width',$('#w').val())
            .css('height',$('#h').val())
            .css('border','2px solid black');
        });
    }); 
```

[http://jsfiddle.net/LAtNC/](http://jsfiddle.net/LAtNC/)

很简单，您只需要为“div”设置一些 css 属性，当然，检查您的输入，这只是一个示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T09:56:19.113

你在网上查了什么？

您可以使用 jQuery val() 获取高度、宽度文本框的值

```
$('#ID').val(); 
```

然后将检索到的值设置为您的元素

```
$('#element').css('height',height_from_text_box);
$('#element').css('width',width_from_text_box); 
```

# android - Android OutOfMemoryError：加载图像时位图大小超出 VM 预算

> ID：14413071
> 
> 赞同：8
> 
> 时间：2013-01-19T09:48:48.397
> 
> 标签：android, bitmap, out-of-memory

> **可能重复：**
> [Android：将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

我正在使用一个图像加载器，它从 URL 加载图像并缓存到我的文件系统中。我从几部使用 ACRA 的手机中发现了以下崩溃报告

**错误：**

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget
    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
    at com.m7.nomad.utils.ImageLoader.decodeFile(ImageLoader.java:117)
    at com.m7.nomad.utils.ImageLoader.getBitmap(ImageLoader.java:88)
    at com.m7.nomad.utils.ImageLoader.access$0(ImageLoader.java:68)
    at com.m7.nomad.utils.ImageLoader$PhotosLoader.run(ImageLoader.java:170) 
```

**ImageLoader.java**

```
package com.m7.nomad.utils;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Collections;
import java.util.Map;
import java.util.Stack;
import java.util.WeakHashMap;

import com.m7.nomad.R;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.widget.ImageView;

public class ImageLoader {

    MemoryCache memoryCache = new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews = Collections
            .synchronizedMap(new WeakHashMap<ImageView, String>());

    public ImageLoader(Context context) {
        // Make the background thread low priority because it will not affect
        // the
        // UI performance
        photoLoaderThread.setPriority(Thread.NORM_PRIORITY - 1);

        fileCache = new FileCache(context);
    }

    final int stub_id = R.drawable.image_place_holder;

    public void DisplayImage(String url, Activity activity, ImageView imageView) {
        imageViews.put(imageView, url);
        Bitmap bitmap = memoryCache.get(url);
        if (bitmap != null)
            imageView.setImageBitmap(bitmap);
        else {
            queuePhoto(url, activity, imageView);
            imageView.setImageResource(stub_id);
        }
    }

    private void queuePhoto(String url, Activity activity, ImageView imageView) {
        // This ImageView may be used for other images before. So there may be
        // some old tasks in the queue. We need to discard them.
        photosQueue.Clean(imageView);
        PhotoToLoad p = new PhotoToLoad(url, imageView);
        synchronized (photosQueue.photosToLoad) {
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        // start thread if it's not started yet
        if (photoLoaderThread.getState() == Thread.State.NEW)
            photoLoaderThread.start();
    }

    private Bitmap getBitmap(String url) {
        File f = fileCache.getFile(url);

        // from SD cache
        Bitmap b = decodeFile(f);
        if (b != null)
            return b;

        // from web
        try {
            Bitmap bitmap = null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection) imageUrl
                    .openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            InputStream is = conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex) {
            ex.printStackTrace();
            return null;
        }
    }

    // decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 65;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            /*
             * while (true) { if (width_tmp / 2 < REQUIRED_SIZE || height_tmp /
             * 2 < REQUIRED_SIZE) break; width_tmp /= 2; height_tmp /= 2; scale
             * *= 2; }
             */

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {
        }
        return null;
    }

    // Task for the queue
    private class PhotoToLoad {
        public String url;
        public ImageView imageView;

        public PhotoToLoad(String u, ImageView i) {
            url = u;
            imageView = i;
        }
    }

    PhotosQueue photosQueue = new PhotosQueue();

    public void stopThread() {
        photoLoaderThread.interrupt();
    }

    // stores list of photos to download
    class PhotosQueue {
        private Stack<PhotoToLoad> photosToLoad = new Stack<PhotoToLoad>();

        // removes all instances of this ImageView
        public void Clean(ImageView image) {
            for (int j = 0; j < photosToLoad.size();) {
                if (photosToLoad.get(j).imageView == image)
                    photosToLoad.remove(j);
                else
                    ++j;
            }
        }
    }

    class PhotosLoader extends Thread {
        public void run() {
            try {
                while (true) {
                    // thread waits until there are any images to load in the
                    // queue
                    if (photosQueue.photosToLoad.size() == 0)
                        synchronized (photosQueue.photosToLoad) {
                            photosQueue.photosToLoad.wait();
                        }
                    if (photosQueue.photosToLoad.size() != 0) {
                        PhotoToLoad photoToLoad;
                        synchronized (photosQueue.photosToLoad) {
                            photoToLoad = photosQueue.photosToLoad.pop();
                        }
                        Bitmap bmp = getBitmap(photoToLoad.url);
                        memoryCache.put(photoToLoad.url, bmp);
                        String tag = imageViews.get(photoToLoad.imageView);
                        if (tag != null && tag.equals(photoToLoad.url)) {
                            BitmapDisplayer bd = new BitmapDisplayer(bmp,
                                    photoToLoad.imageView);
                            Activity a = (Activity) photoToLoad.imageView
                                    .getContext();
                            a.runOnUiThread(bd);
                        }
                    }
                    if (Thread.interrupted())
                        break;
                }
            } catch (InterruptedException e) {
                // allow thread to exit
            }
        }
    }

    PhotosLoader photoLoaderThread = new PhotosLoader();

    // Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable {
        Bitmap bitmap;
        ImageView imageView;

        public BitmapDisplayer(Bitmap b, ImageView i) {
            bitmap = b;
            imageView = i;
        }

        public void run() {
            if (bitmap != null)
                imageView.setImageBitmap(bitmap);
            else
                imageView.setImageResource(stub_id);
        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

这就是我调用 ImageLoader 的方式

```
ImageView image = new ImageView(getActivity());

        ImageLoader imgLoader = new ImageLoader(MainActivity.context);
        imgLoader.DisplayImage(imagePath, new Activity(), image); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:20:25.680

你的堆意外增长这是由于[Android的图像大小](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

第一次缩小从 url 加载的图像大小，然后将其加载到您的视图（活动）以缩小图像，您可以使用以下代码片段来获取图像和尺寸，并生成缩小的图像

```
 public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

# wordpress - 如何将页面的自定义字段数据作为模板文件中的值推送？

> ID：14413075
> 
> 赞同：1
> 
> 时间：2013-01-19T09:49:03.213
> 
> 标签：wordpress, wordpress-theming

长话短说。我正在尝试扩展投资组合模板的功能。它目前只能处理一页。我可以复制模板，依靠自定义字段来拉入特定的 portfilio 项目（主题使用自定义帖子类型）。

所以，这是我的portfolio-template.php中的一点：

```
 $args = array(
          'post_type' => 'portfolio',
        'orderby' => 'menu_order',
        'order' => 'ASC',
        'meta_value' => 'ao',
        'posts_per_page' => -1
    ); 
```

所以，我想创建一个新页面，选择投资组合模板，然后在该页面上定义一个自定义字段，将 meta_value 传递给投资组合模板.php

所以它看起来像这样：

```
 $args = array(
        'post_type' => 'portfolio',
        'orderby' => 'menu_order',
        'order' => 'ASC',
        'meta_value' => 'PULL_VALUE_FROM_CUSTOM_FIELD',
        'posts_per_page' => -1
    ); 
```

“PULL_VALUE_FROM_CUSTOM_FIELD”是我无法弄清楚的一点。对不起，如果我的白话是code_crude，我是新手！

编辑：添加模板的完整代码

```
 <?php
    $args = array(
        'post_type' => 'portfolio',
        'orderby' => 'menu_order',
        'order' => 'ASC',
        'meta_value' => 'ao',
        'posts_per_page' => -1
    );
    $portfolio_query = new WP_Query($args);

    if( $portfolio_query->have_posts() ) : 

        echo '<div id="primary" class="hfeed">';

        while( $portfolio_query->have_posts() ) : $portfolio_query->the_post();

        // styles
        $style = 'zilla-' . get_post_meta($post->ID, '_zilla_portfolio_style', true);
        $media_pos = 'zilla-' . get_post_meta($post->ID, '_zilla_portfolio_media_position', true);
        $width = ( $media_pos == 'zilla-media-center' ) ? 940 : 600;

        // project url
        $portfolio_url = get_post_meta($post->ID, '_zilla_portfolio_project_url', true);
        if( !empty($portfolio_url) ) 
            $portfolio_button_copy = get_post_meta($post->ID, '_zilla_portfolio_project_url_copy', true);

        // determine which media to display
        $portfolio_display_gallery = get_post_meta($post->ID, '_zilla_portfolio_display_gallery', true);
        $portfolio_display_video = get_post_meta($post->ID, '_zilla_portfolio_display_video', true);
        $portfolio_display_audio = get_post_meta($post->ID, '_zilla_portfolio_display_audio', true);

        // grab everything else
        $custom_bg = get_post_meta($post->ID, '_zilla_portfolio_display_background', true);
        $portfolio_caption = get_post_meta($post->ID, '_zilla_portfolio_caption', true);

    ?>

            <?php zilla_page_before(); ?>
            <!--BEGIN .hentry-->
            <div <?php post_class( $style . ' ' . $media_pos ) ?> id="post-<?php the_ID(); ?>">
            <?php zilla_page_start(); ?>

                <div class="hentry-inner">

                    <!--BEGIN .entry-media -->
                    <div class="entry-media">

                        <?php 
                        if( $portfolio_display_gallery == 'on' ) {
                            $gallery_layout = get_post_meta( $post->ID, '_zilla_gallery_layout', true);
                            $slideshow = ( $gallery_layout == 'slideshow' ) ? true : false;
                            $size = ( $media_pos == 'zilla-media-center' ) ? 'portfolio-full' : 'portfolio-index';
                            zilla_gallery( $post->ID, $size, $slideshow, $slideshow );
                        }

                        if( $portfolio_display_video == 'on' ) {
                            $embed = get_post_meta($post->ID, '_zilla_video_embed_code', true);
                            if( !empty( $embed ) ) {
                                echo stripslashes(htmlspecialchars_decode($embed));
                            } else {
                                zilla_video( $post->ID, $width );
                            }
                        }

                        if( $portfolio_display_audio == 'on' ) {
                            zilla_audio( $post->ID, $width );
                        }

                        ?>
                    <!--END .entry-media -->
                    </div>

                    <!--BEGIN .entry-content -->
                    <div class="entry-content">

                        <h2 class="entry-title"><?php the_title(); ?></h2>

                        <?php if( !empty($portfolio_caption) ) 
                            echo "<p class='zilla-caption'>" . stripslashes(htmlspecialchars_decode($portfolio_caption)) . "</p>"; ?>

                        <?php if( !empty($portfolio_url) && $media_pos == 'zilla-media-center' ) { ?>
                            <a href="<?php echo esc_url($portfolio_url); ?>" class="more-link"><?php echo $portfolio_button_copy; ?></a>
                        <?php } ?>

                        <?php the_content(); ?>

                        <?php wp_link_pages(array('before' => '<p><strong>'.__('Pages:', 'zilla').'</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>

                        <?php if( !empty($portfolio_url) && ( $media_pos == 'zilla-media-left' || $media_pos == 'zilla-media-right' ) ) { ?>
                            <a href="<?php echo esc_url($portfolio_url); ?>" class="more-link"><?php echo $portfolio_button_copy; ?></a>
                        <?php } ?>

                    <!--END .entry-content -->
                    </div>

                </div>

            <?php zilla_page_end(); ?>
            <!--END .hentry-->
            </div>
            <?php zilla_page_after(); ?>

        <?php endwhile; ?>

        <!--END #primary .hfeed-->
        </div>

    <?php else: ?>

    <div id="content">
        <!--BEGIN #post-0-->
        <div id="post-0" <?php post_class(); ?>>

            <h2 class="entry-title"><?php _e('Error: No Portfolios Found', 'zilla') ?></h2>

            <!--BEGIN .entry-content-->
            <div class="entry-content">
                <p><?php _e("Sorry, but no portfolios have been created.", "zilla") ?></p>
            <!--END .entry-content-->
            </div>

        <!--END #post-0-->
        </div>
    </div>

    <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:28:24.343

在循环之前，您可以访问全局变量`$post`，如果是`single.php`并且`page.php`将表示将由模板文件显示的帖子类型（post/page/cpt）对象。

如果没记错的话，`category.php`例如在 中使用时，它会抓取第一个。

因此，在有问题的情况下：

```
<?php
global $post;
$the_meta = get_post_meta( 'custom_field_name', $post->ID );

if( !$the_meta )
    $the_meta = 'your_backup_solution';

$args = array(
    'post_type'      => 'portfolio',
    'orderby'        => 'menu_order',
    'order'          => 'ASC',
    'meta_value'     => $the_meta,
    'posts_per_page' => -1
);

$portfolio_query = new WP_Query($args);
// et cetera 
```

# ruby - 如何将 HashWithIndifferentAccess 作为 Sinatra 控制器中参数的默认设置？

> ID：14413077
> 
> 赞同：2
> 
> 时间：2013-01-19T09:49:22.347
> 
> 标签：ruby, hashmap, sinatra, rack

是否可以将 HashWithIndifferentAccess 作为 Rails 等 Sinatra 控制器中的参数的默认设置，以便我可以在控制器中使用符号而不是字符串？

```
post '/books' do
  Book.create(title: params[:book][:title])
end 
```

代替

```
post '/books' do
  Book.create(title: params['book']['title'])
end 
```

# ios - IOS视图控制器方向

> ID：14413081
> 
> 赞同：0
> 
> 时间：2013-01-19T09:50:07.930
> 
> 标签：ios, uiviewcontroller, presentmodalviewcontroller, device-orientation

我有父视图控制器和另一个模态视图控制器。我在父级上下文中展示了模态视图控制器：

```
readingViewController * reading_view_controller = [[readingViewController alloc] initWithNibName:@"readingViewController" bundle:nil];
[self setModalPresentationStyle:UIModalPresentationCurrentContext];
[self presentModalViewController:reading_view_controller animated:YES]; 
```

父视图控制器不会定向横向；所以，我在父视图控制器中添加了这些方法：

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortraitUpsideDown|UIInterfaceOrientationMaskPortrait;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

呈现的 viewController（模态呈现）应该面向所有可能的方向；所以，我添加了这些方法：

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAll;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{

    return YES;
} 
```

但是，因为我假设（UIModalPresentationCurrentContext），呈现的 viewController 在 IOS 6.0 中没有定向，而它在 IOS 5.0 中按预期工作

请问如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:28:24.813

如果您有一个基于选项卡的应用程序，则首先在应用程序委托中添加一些代码，然后`self.window.rootviewcontroller-self.tabbarcontroller`.

```
 @implementation UITabBarController (SK8FASTR2App)
        -(BOOL)shouldAutorotate
        {
            return YES;
        }

        - (NSUInteger)supportedInterfaceOrientations
        {
            // your custom logic for rotation of selected tab
             if (self.selectedIndex==3){
             return UIInterfaceOrientationMaskPortrait;
             }
             else {
            UIInterfaceOrientationMaskPortrait|UIInterfaceOrientationMaskPortraitUpsideDown|UIInterfaceOrientationLandscapeLeft|UIInterfaceOrientationLandscapeRight;
             return UIInterfaceOrientationMaskAll;
             }

        }

        @end

        before

        @implementation AppDelegate

    - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
            return  UIInterfaceOrientationMaskAll;
    } 
```

更改该课程的方向

```
-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:18:16.750

你应该实施

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation; 
```

例如：-

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskAll;
} 
```

# ruby-on-rails-3 - Get related object has_and_belongs_to_many in rails

> ID：14413083
> 
> 赞同：0
> 
> 时间：2013-01-19T09:50:10.717
> 
> 标签：ruby-on-rails-3, associations, has-and-belongs-to-many

Let's say I got tasks and lists with an has_and_belongs_to_many relationship:

```
class Task < ActiveRecord::Base
  attr_accessible :content, :due_date
  has_and_belongs_to_many :lists
end

class List < ActiveRecord::Base
  attr_accessible :title, :user_id, :space_free_title
  has_and_belongs_to_many :tasks
end 
```

Also I got the related model/table since a task can be on many lists:

```
class ListsTasks < ActiveRecord::Base
  attr_accessible :list_id, :task_id
end 
```

Now I know how to get all ListsTasks by the list_id:

```
ListsTasks.find_all_by_list_id(1) 
```

But how do I get the contents of a task based on ListsTasks?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:53:07.290

Your `ListsTasks` model is unnecessary and is not being used by the two associations in your `List` and `Task` models.

Are you looking for something like `List.find(1).tasks` to get the tasks on that list?

# ruby-on-rails - 我可以捕获参数但避免在 url 中显示它吗？

> ID：14413084
> 
> 赞同：0
> 
> 时间：2013-01-19T09:50:14.587
> 
> 标签：ruby-on-rails

我想捕获单击的元素的 id，然后将该 id 传递给控制器​​，所有这些都没有在链接或 url 参数中显示 id，也不必编写自定义 ajax 加载。开箱即用的导轨中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:08:57.643

你想达到什么（最终目标是什么）？听起来您想在客户端和服务器之间进行通信，而不是在用户的 url 中使用 ajax 或编码参数。

在这些限制下，通常的做法是：

1）将点击目标包裹在一个表单中，并将id设置为隐藏值。点击后，只需发布​​表格。这将需要刷新页面，但由于它是 POST，因此不会弄乱 url。

2）在cookie中设置id，强制刷新页面，读取服务器上的id并取消设置。这显然也需要刷新页面，但不会对 url 中的任何内容进行编码。

3) 使用不可见的 iFrame 加载带有感兴趣参数的 url。这不需要刷新，并且 url 可以是任何东西，因为用户永远不会看到它。

如果页面刷新/更改没问题，表单路由可能是最好的。如果您不想刷新页面，xhr 请求显然是最好的解决方案。这*真的很*简单，但 iFrame 解决方案可能也能满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:24:43.193

我假设您不想向用户显示 ID，但您需要元素 ID 才能访问服务器。

您可以使用自定义请求标头，但这需要 AJAX 方法。这是一个带有 JQuery 的草图

```
$("a.sends_element_id").click(function(e){
  e.preventDefault();
  $.ajax({
     url: $(e.target).attr("href"),
     type: "GET",
     beforeSend: function(xhr){xhr.setRequestHeader('X-Element-ID', $(e.target).attr("id");},
     success: function(result) { 
       // Do something here to display the page
       // Eg. http://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page
     }
  }); 
```

# livecycle - 打印多个客户信息时如何控制全局变量引用？

> ID：14413087
> 
> 赞同：1
> 
> 时间：2013-01-19T09:50:57.723
> 
> 标签：livecycle

我在一个 xml 文件中有多个客户信息，同时在显示全局变量引用的所有页面中的 Adob​​e LiveCycle Designer 中预览该 xml，我想在单独的页面中查看每个客户信息。

例如：我在一个 xml 文件中有 3 个客户信息，客户名称是一个全局变量 1.a 2.b 3.c

在 xdp 模板中预览 xml 时，客户名称在所有页面中都是客户“a”。

任何人都可以帮助解决这个问题。

# c - 当我尝试释放时检测到堆损坏（void * key）

> ID：14413091
> 
> 赞同：1
> 
> 时间：2013-01-19T09:51:28.457
> 
> 标签：c, malloc, free

在程序结束时释放内存有问题。这是来自学校的练习，使用 ADT 实现二叉树和使用数据类型 char 的具体实现。

释放代码：

```
void free_tree(TreeNode *root){
TreeNode *cur;
if (!root) return;
else{
cur = root;
free_tree(cur->left);
free_tree(cur->right);
free(cur->key);               //throws an error!
free(cur);
} } 
```

这是我为密钥本身 malloc 的地方（问题可能在这里）：

```
puts("Please enter a value for key of new node");
_flushall();
scanf("%s",&buffer);
user_input = (char *) malloc(sizeof(char)*(strlen(buffer)+1));
strcpy(user_input,buffer);
user_input[strlen(buffer)+1] = '\0';
p_node = create_tree_node(user_input);   //this function append the new data to a new node, returns *TreeNode
insert_node_by_value(&root,p_node,str_comp);
break; 
```

这是我得到的错误：

![错误信息](../Images/dd9a9616850c69205735c913dd8dc44f.png)

顺便说一句，释放节点本身工作正常！

感谢您的帮助以及有关代码功能的任何提示和评论。

可以在这里找到functions.c的完整代码粘贴：http: [//pastebin.com/TqaNK5v8](http://pastebin.com/TqaNK5v8) - 函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:00:05.923

我能找到的唯一实际问题是：

```
 user_input[strlen(buffer)+1] = '\0'; 
```

由于 user_input 有 'strlen(buffer) + 1' 元素，它只能从 0 索引到 strlen(buffer)。解决这个很简单，去掉那行，strcpy的行为就是复制源字符串的\0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:00:48.920

99 chanches over 100 是 cur->key**未分配**或多次**释放。**

还

```
user_input[strlen(buffer)+1] = '\0'; 
```

应该

```
user_input[strlen(buffer)] = '\0'; 
```

并且缓冲区必须在 scanf 之前分配，以保存使用 scanf 检索的输入数据。

无法告诉更多查看您粘贴的代码

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:14:15.667

数组索引从 0 开始。因此，如果要分配 n 个字节，访问第 n 个字节的正确方法是：

```
SomeArray[n-1] ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T11:50:55.347

你把你错误的诊断投射到别人身上。请提供一个最小的可编译测试用例供我们调试。最小意味着“在没有任何不必要或不相关的代码的情况下显示问题的症状”。可编译的意思是“能够在我们的机器上编译而不修复错误或填补空白”。

在 C 中，您不需要强制转换 malloc 的返回值。停止使用 C++ 编译器来编译 C 代码。你知道 scanf 会失败吗？我怀疑这就是为什么您在 scanf 之前错误地冲洗的原因。尝试正确处理 scanf 故障，而不是假设非便携式黑客会为您做这件事。您是否知道 strcpy 将为您终止目标字符串？

你在读哪些书？

# c++ - 如何在延迟着色中从灯光几何图形的内部绘制

> ID：14413094
> 
> 赞同：2
> 
> 时间：2013-01-19T09:52:06.407
> 
> 标签：c++, opengl, glsl

我正在尝试使用 OpenGL 和 GLSL 实现延迟着色器，但我遇到了光照几何问题。这些是我正在采取的步骤：

```
Bind multitarget framebuffer
Render color, position, normal and depth
Unbind framebuffer
Enable blend
Disable depth testing
Render every light
Enable depth testing
Disable blend
Render to screen 
```

但是因为我只渲染正面，当我在灯光里面时它会完全消失，渲染背面不起作用，因为我会得到双倍的光功率（当在里面时，一半[或正常数量] ）。

如何从光照几何体的内部和外部渲染相同的光照值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:48:28.897

就我而言，我这样做：

```
Bind gbuffer framebuffer
Render color, position, normal
Unbind framebuffer

Enable blend
Enable depth testing

glDepthMask(0);
glCullFace(GL_FRONT);   //to render only backfaces
glDepthFunc(GL_GEQUAL); //to test if light fragment is "behind geometry", or it shouldn't affect it
Bind light framebuffer
Blit depth from gbuffer to light framebuffer //so you can depth-test light volumes against geometry
Render every light 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:06:21.473

如果我没记错的话，在我的延迟渲染器中，我只渲染**光**体积的背面。~~缺点是您无法进行深度测试，您只会在完成灯光计算后知道灯光是否位于几何体后面并丢弃像素。~~ 正如另一个答案所解释的，您可以进行深度测试。测试大于或等于以查看背面是在几何体后面还是在几何体上，因此与几何体的表面相交。

或者，您可以在渲染时检查您是否在光体积内并相应地切换正面。

# playframework - 如何在生产模式下运行 Play？

> ID：14413095
> 
> 赞同：20
> 
> 时间：2013-01-19T09:52:09.120
> 
> 标签：playframework

如何运行 Play！在生产模式下，以便在出现异常时不会将源代码打印到浏览器窗口？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-19T10:27:09.163

有几种方法，最简单的方法是运行`play start`而不是`play run`.

您可以在文档中找到更多信息：[以生产模式启动应用程序](http://www.playframework.org/documentation/latest/Production)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-07-15T11:24:30.530

在 sbt 控制台中，[您还可以在 Prod 模式下运行您的应用](https://www.playframework.com/documentation/2.5.x/Deploying#Running-a-test-instance)程序

```
[my-first-app] $ testProd 
```

同样有用的是使用此命令来防止按`CTRL`+时退出 sbt`D`

```
[my-first-app] $ testProd --no-exit-sbt 
```

在**Play 2.6**中，[`testProd`被重命名为`runProd`](https://www.playframework.com/documentation/2.6.x/Deploying#Running-a-test-instance)：

```
[my-first-app] $ runProd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-30T10:23:28.777

如果您使用的是 SBT，您可以使用以下命令在生产模式下运行它

```
$ sbt runProd 
```

# c# - 更改 foreach 中的集合

> ID：14413099
> 
> 赞同：1
> 
> 时间：2013-01-19T09:52:30.390
> 
> 标签：c#, linq

这是我的代码：

```
foreach (OrderItem item in OrderInfo.order)
{
     orderItemViews.Single(i => i.numericUpDown.Name == item.id.ToString()).numericUpDown.Value = item.count;
} 
```

它给出了一个例外。
我知道我无法更改*foreach*
中的集合 如何更改此代码以使其正常工作？最好是 LINQ 代码。

异常表示“集合已修改”。抱歉无法提供真正的异常消息，因为它是非英语的

对不起大家。我发现收藏在哪里发生了变化。它在 *numericUpDown_ValueChanged* 处理程序中。反正我有答案。谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T09:57:24.490

你可以使用`ToList()`，像这样：

```
foreach (OrderItem item in OrderInfo.order.ToList())
{
     orderItemViews.Single(i => i.numericUpDown.Name == item.id.ToString()).numericUpDown.Value = item.count;
} 
```

或使用正常的 for 循环：

```
for (int i = 0 ; i < OrderInfo.order.Count; i++)
{
     OrderItem item = OrderInfo.order[i];
     orderItemViews.Single(i => i.numericUpDown.Name == item.id.ToString()).numericUpDown.Value = item.count;
} 
```

**提示**：性能方面，最好使用第二种方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:58:08.640

当我需要修改集合时，这就是我所做的。

```
foreach (OrderItem item in OrderInfo.order.ToList())
{
     ...
} 
```

创建一个副本。枚举副本，但更新原始副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-25T16:35:57.667

您可以使用扩展 ToEach 静态方法：

```
public delegate void ToEachTransformAction<T>(ref T Telement);

[Extension()]
public static void ToEach<T>(Generic.IList<T> thislist, ToEachTransformAction<T> Transform)
    {
        for (var n = 0; n < thislist.Count; n++)
        {
            Transform.Invoke(thislist(n));
        }
    } 
```

# python - 寻找一组解析器来提取函数/类定义

> ID：14413100
> 
> 赞同：0
> 
> 时间：2013-01-19T09:52:31.617
> 
> 标签：python, c, parsing, ide, gtk

我正准备制作一个小 IDE，它允许在调用它们的地方将函数/宏调用扩展到它们的定义（并在需要时递归地执行此操作，以便如果函数 A 调用 B，我扩展 B，然后 B 调用C - 我在 B 的代码中扩展 C 等）：

![在此处输入图像描述](../Images/f4191f014ea5eaa96bbd451094bab537.png)

问题 1：您知道现有的具有此功能的 IDE 吗？

问题2：您将如何实施？我的方法如下：我希望 IDE 能够理解各种编程语言。为了提取函数定义，我似乎不得不使用解析器。是否有各种语言的解析器集合？我研究过 Ctags 和 Pygments 词法分析器，但它们的输出不足以完成这项任务。

IDE 的首选语言是 Python（尽管 Java 和 C 建议也可以），图形库 - gtk+2。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:30:43.930

> 问题 1：您知道现有的具有此功能的 IDE 吗？

可能与您描述的不太一样，但 Visual Studio 的*代码定义窗口*会显示当前光标位置处任何符号的定义。当然，它的不同之处在于它在编辑器窗口的单独窗口中显示定义，但老实说，我会发现您的提议有些不和谐和违反直觉，因为调用在语义上不是内联的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T16:46:33.887

在大多数 IDE 中，您想要的称为“goto 定义”。当然，它们不会内联扩展，但您必须将定义放在某处。

作为一般规则，许多 IDE 具有拆分窗口，因此可以与原始调用同时看到定义。在我看来，您基本上想要自动设置拆分窗口并进行定义点。

许多 IDE 包含内部可编程接口。您可能可以使用 Eclipse；如果 Mx goto-definition-in-new-window 尚未内置，您当然可以使用 Emacs 执行此操作：-}

# joomla - 迁移到 joomla 2.5 时卡在 Jupgrade 扩展中

> ID：14413106
> 
> 赞同：1
> 
> 时间：2013-01-19T09:53:26.717
> 
> 标签：joomla, joomla2.5, joomla1.5, joomla-extensions

自周四纽约时间以来，我在清理和缓存的第一步中一直坚持将我的 joomla 网站从 1.5.26 升级到 2.5。我已经禁用了除 mootools 插件之外的其余插件。我还为 joomla 重新安装了最新的 mootools 插件；也从我的 php.ini 文件中的 php_curl 中删除。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:38:16.477

*   转到扩展 > jUpgrade。

*   单击参数。

*   为跳过下载选项选择是。

*   为跳过解压缩选项选择是。

*   为删除以前的迁移选项选择否

![在此处输入图像描述](../Images/4898d2d6d528c583ef52a3ed433be2e6.png) - 单击保存。

*   在您的 Joomla 根目录中创建一个名为 jupgrade 的文件夹。

*   下载 Joomla 2.5.4 并将其解压到 jupgrade 文件夹中。

    [http://joomlacode.org/gf/download/frsrelease/16914/73508/Joomla_2.5.4-Stable-Full_Package.zip](http://joomlacode.org/gf/download/frsrelease/16914/73508/Joomla_2.5.4-Stable-Full_Package.zip)

*   如果您已经运行 jUpgrade 但它失败了，请立即清除您的浏览器缓存。单击开始升级。

*   如果您对 jUpgrade 仍有问题，请参阅以下有关 jUpgrade 的论坛帖子；它解决了这个问题。

*   成功将 Joomla 1.5 升级到 2.5.4 后，您可以将 Joomla 2.5.4 升级到 2.5.6，但我会等到 Joomla 发布另一个版本。Joomla 2.5.6 仍然充满了错误和不一致。

# php - PHP网站让我退出，可能是什么？

> ID：14413109
> 
> 赞同：-4
> 
> 时间：2013-01-19T09:54:14.140
> 
> 标签：php, logout

我有一个 PHP 应用程序。它在 2 台服务器之间实现负载平衡。问题是我不断退出我所在的会话（经过很长一段时间），我不知道为什么。我已经很久没有使用这个代码了，不知道从哪里开始。

这是一个 Zend 框架应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:55:56.260

可能是您的会话的管理方式。

检查会话管理器：

```
var_dump(Zend_Session::getOptions()); 
```

如果您得到以下信息：

```
 ["save_handler"]=> string(5) "files" ["save_path"]=> string(13) "/var/lib/php5" 
```

尝试会话并检查文件是在其中一个 Web 服务器上创建的，而不是在另一个 Web 服务器上创建的。选项说它存储在一个文件中。

如果是，那么问题出在会话管理器上。更改会话管理器以使用 db 或 memcached（如果可能）。它需要能够管理两台服务器上的用户。

# php - 在 MySQL 中编辑记录时检查是否重复

> ID：14413111
> 
> 赞同：2
> 
> 时间：2013-01-19T09:54:59.357
> 
> 标签：php, mysql, database, duplicates

我遇到了一段代码问题，想知道是否有人可以提供帮助。

我有一个向 MySQL 数据库提交信息的表单，我有正确的代码来检查提交的产品代码是否已经存在，如果存在则显示警告消息并且未添加记录。

该代码是：

```
$result = mysql_query("SELECT * FROM listing_1 WHERE product_code='$product_code'");
$num_rows = mysql_num_rows($result);
if ($num_rows) {
   adminwarnmessage("DUPLICATE REFERENCE CODE","FAILURE - <b>$product_name</b> has <b>NOT</b> been added because the reference number already exists.");
} 
```

这适用于数据输入，但是我有另一个表单允许用户编辑记录，这就是导致我出现问题的原因，因为上面的代码只告诉我数据库中已经有匹配的记录，当然当我尝试保存（更新）它现在告诉我不能保存的记录，因为它是重复的。

我想要发生的是它不允许用户选择另一个已经存在的产品代码，但我希望他们能够使用与从数据库中获取的表单相同的产品代码来更新记录。

希望这是有道理的，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:01:38.060

如果您有 id（主键），那么您必须在更新记录之前与该产品的 id 进行比较。例如

```
$result = mysql_query("SELECT * FROM listing_1 WHERE product_code='$product_code' AND id!=$id"); 
$num_rows = mysql_num_rows($result); 
if ($num_rows) { 
    echo "duplicate record";
} 
```

这里 $id 是您在编辑记录时应该拥有的产品的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:07:12.550

以下是管理数据库时需要遵循的步骤

1.  首先，您需要“ID”字段中的主键（auto_increment）
2.  当您执行插入查询时，首先检查记录是否可用。如果不可用，则仅您应该执行插入查询。
3.  使用主键字段进行更新、删除等...

如果您按照上述步骤操作，则永远不会遇到此问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:01:11.520

您是否正在检查`insert`和`update`语句中的重复事件？如果是这样，你不应该。重复条目仅在“插入”时相关。您不应该对`update`. 希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:47:41.560

编辑我通过使 $productcode 字段成为唯一索引解决了这个问题。现在编辑时如果有重复..

mysql不接受更新查询，返回错误码

我捕获该错误代码并将其包含在 if 语句中...

如果（mysql_errno（）=='1062'）

adminwarnmessage("DUPLICATE REFERENCE CODE","FAILURE - **$product_name** has **not** been added because the reference number already exists");

} adminmessage("项目更新", 恭喜您成功更新 $productname");

}

这现在允许编辑 $productcode 但不允许将其更改为已在数据库中使用的一个。

感谢所有花时间提供帮助的人

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T10:03:47.420

为什么更新的代码也相同？如果以后遇到问题，您可以使用另一个查询进行更新，这对调试更有利。尝试这个

```
$result = mysql_query("UPDATE listing_1 SET product_code='$new_product_code' WHERE product_code='$product_code' AND id='$id'");
if($result) {
   echo "your product was updated.";
} else {
   echo "your product is not in DB";
} 
```

编辑：更新或插入东西时要小心，除非你是独一无二的，否则请务必`id`检查`product_code`

# ado.net - 在 asp.net 中使用自动生成密钥

> ID：14413112
> 
> 赞同：0
> 
> 时间：2013-01-19T09:55:02.127
> 
> 标签：ado.net, identity-column

我有一个字段是自动生成的主键。现在我需要插入一行，该字段作为其列之一。我应该如何创建“插入”参数？

```
 protected  void  Button1_Click(object  sender, EventArgs  e) 
    {
            new DataSet1TableAdapters.MemberTableAdapter().Insert(
                 1,TextBox5.Text,TextBox6.Text,
                 int.Parse(TextBox8.Text),
                 TextBox9.Text,
                 TextBox10.Text);
     } 
```

我得到**错误**：

```
"Cannot insert explicit value for identity column in table 'Member' when 
  IDENTITY_INSERT is set to OFF." 
```

实际上我不应该为第一个参数插入任何值，因为它是自动生成的。但使用此样式后出现此错误：

```
 protected  void  Button1_Click(object  sender, EventArgs  e)
    {
            new  DataSet1TableAdapters.MemberTableAdapter().Insert(
            TextBox5.Text, TextBox6.Text, int.Parse(TextBox8.Text),
            TextBox9.Text, TextBox10.Text);
    } 
```

我得到：

```
 Error:No overload for method insert take 5 argument 
```

那么我应该如何解决这个问题呢？

# php - 如何在 PHP 中为特定关键字遍历 3 级数组

> ID：14413114
> 
> 赞同：0
> 
> 时间：2013-01-19T09:55:29.800
> 
> 标签：php

我有一个 3 级数组。我想显示特定关键字的值。此关键字同时出现在第 2 级和第 3 级。但我只想显示第二级。

知道怎么做吗？我尝试了以下方法，但它显示了键“名称”的所有值。

```
$jsonIterator = new RecursiveIteratorIterator(
        new RecursiveArrayIterator(json_decode($call_result, TRUE)),
        RecursiveIteratorIterator::SELF_FIRST);
        foreach ($jsonIterator as $key => $val) {

            if(strcmp ( $key , "name") == 0)
            {
                 //echo '<br>';
                 if(strcmp($val , " ")== 1)
                 {
                    echo "$key => $val\n";
                 }

            }
} 
```

任何想法，如何只打印出第二级的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:27:18.920

```
foreach ($jsonIterator as $key => $val) 
    {
        foreach($value as $key => $value)

          {
                  if(strcmp( $key , "name") == 1)
                      {

                         if(strcmp($val , "name") == 1)
                         {
                            echo "$key\n";
                         }

                     }
          }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:32:26.030

```
foreach($va as $k => $v){

    foreach($v as $k1 => $v1){

            if(strcmp($k1 , "name") == 0)
            {
              echo "$k1 => $v1\n";
            }

    }

} 
```

# php - 标题标签和js标签内的PHP Tidy新空行

> ID：14413115
> 
> 赞同：1
> 
> 时间：2013-01-19T09:55:39.247
> 
> 标签：php, tidy

我有一个关于整洁的问题。

我的问题就像[关闭标签后的一个 HTML Tidy 新空行](https://stackoverflow.com/questions/12843252/html-tidy-new-empty-line-after-closing-tags)。

我当前的设置不会为 body 标签和 head 标签内的 html 有新的空行，expect`title tag`和`js tag`.

输出如下所示。

```
 <title>
      XXXX
    </title>
     <script src="core.js" type="text/javascript">
</script> 
```

我当前的设置

```
$config = array(
            'doctype' => '<!doctype html>',
            "char-encoding" => "utf8",
            'vertical-space' => false,
            'indent' => true,
            'wrap' => 0,
            'word-2000' => 1,
            'break-before-br' => true,
        ); 
```

我已经补充说`'vertical-space' => false,`我不知道​​为什么以及如何解决这个问题。

我希望他们成为

```
 <title> XXXX </title>
         <script src="core.js" type="text/javascript">  </script> 
```

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-19T22:08:07.640

```
 $tidy_config = array(
        'indent' => true,
        'wrap' => 0,
        'output-xml' => true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T21:50:49.397

尝试添加到选项

```
'output-xml' => true 
```

# ios - NSMutableString iOS 中 nil 和 @"" 的区别

> ID：14413125
> 
> 赞同：0
> 
> 时间：2013-01-19T09:56:29.097
> 
> 标签：ios, nsmutablestring

我想知道`nil`和`@""`in之间的区别`NSMutableString`。

我需要`NSMutableString`每秒清理一次字符串值。

所以

```
myMutableString = nil; 
```

或者

```
myMutableString = @""; 
```

哪一个更好清洁，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T09:58:55.097

**更新**

* * *

在可变字符串的情况下，您必须先分配/初始化它，如下所示：

```
NSMutableString *myMutableString = [[NSMutableString alloc] init]; 
```

也许您已经这样做了，但是您必须像这样重置字符串：

```
[myMutableString setString: @""]; 
```

因此，不要编写`myMutableString = @""`，而是使用上面的代码。

* * *

如果您分配`myMutableString`给`nil`它不是有效的指针/对象，并且无法响应消息或操作。如果你真的把它设置为`@""`，它是一个可以响应消息、方法和动作的完全有效的对象，它只是包含一个长度为 0 的字符串。

```
myMutableString = nil;

[myMutableString appendString: @"It now contains a valid string!"]; 
```

这不可能发生，因为字符串是`nil`

```
myMutableString = @""; 

[myMutableString appendString: @"It now contains a valid string!"]; 
```

这可能发生，`myMutableString`是一个有效的对象并且可以响应消息。你猜怎么着，它现在有一个字符串！

所以，一个字符串对象仍然可以被初始化并且有一个没有任何字符的实际字符串值。就像一个数组可以是有效的并且里面有 0 个对象一样。不然怎么加！？

但是，在 an`NSMutableString`的情况下，您可能必须实际分配初始化它....有人请澄清。

显然，分配给`@""`更好，但这实际上取决于您的情况。我不知道您为什么要分配给`nil`，除非您将变量重新分配给新的字符串对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:07:28.573

他们都没有

采用

```
[myMutableString setString: @""]; 
```

重置你的字符串。

您的对象保持不变。您调用一个清除其内容的方法。

# twitter-bootstrap - 如何在不一次显示所有选项的情况下启用多项选择 - Bootstrap

> ID：14413126
> 
> 赞同：0
> 
> 时间：2013-01-19T09:56:53.427
> 
> 标签：twitter-bootstrap

在 Bootstrap 中，是否可以在用户单击之前启用多项选择，同时仍然只显示一行（而不是显示多个选项）？

我希望用户能够选择多个选项，但在他们单击之前我不会显示要显示的选项。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T08:33:42.600

请参阅第三个示例 Bootstrap 的[自定义选择](http://silviomoreto.github.io/bootstrap-select/)。

![在此处输入图像描述](../Images/0d268fd5ea2d8d48dea2b4779a0c3054.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:48:00.583

Bootstrap 无法做到这一点。我建议您使用一个看起来像单行选择但单击它时会显示复选框的外部插件。例子：

![在此处输入图像描述](../Images/3ff72a7bb3421d139fff491a96f58849.png)

该屏幕截图取自此小部件，该小部件似乎拥有最好的评论并得到积极维护： [http ://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

# java - 不返回 java 函数注解

> ID：14413131
> 
> 赞同：5
> 
> 时间：2013-01-19T09:57:55.613
> 
> 标签：java, throw

有什么方法可以强制编译器（注解或其他方式）实现 java 函数永远不会返回（即总是抛出），以便随后它不会错误地将其用法作为返回非 void 的其他函数中的最后一条语句？

这是一个简化/虚构的示例：

```
int add( int x, int y ) {
    throwNotImplemented();  // compiler error here: no return value.
}

// How can I annotate (or change) this function, so compiling add will not yield
// an error since this function always throws?
void throwNotImplemented() {
    ... some stuff here (generally logging, sometimes recovery, etc)
    throw new NotImplementedException();
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T10:02:28.887

不，这是不可能的。

但是请注意，您可以轻松地解决它，如下所示：

```
int add( int x, int y ) {
    throw notImplemented();
}

Exception notImplemented() {
    ... some stuff here (generally logging, sometimes recovery, etc)
    return new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:01:35.690

为什么不直接从未实现的方法中抛出？

```
int add( int x, int y ) {
    throw new UnsupportedOperationException("Not yet implemented");
} 
```

即使该方法不返回 int，这也将编译得很好。并且它使用[标准的 JDK exception](http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html)，这意味着在这种情况下使用。

# java - Adobe CQ 评估：Multi Site Manager / TarOptimizer 是否存在问题？

> ID：14413132
> 
> 赞同：0
> 
> 时间：2013-01-19T09:57:59.733
> 
> 标签：java, content-management-system, adobe, aem

我在一家零售商工作，我们考虑将 CQ5 作为 CMS 引入。

然而，在做一些研究并与顾问交谈后，事实证明，可能有些事情可能“复杂”。也许你们中的一个人可以对此有所了解。

首先，我们被告知，当您使用多站点管理器创建多语言页面（大约 80 种语言）时，更新过程可能会慢至半小时，直到最终发布更改。你们中有人经历过类似的事情吗？

另一件事是，TarOptimizer 的运行时间相当长。有人告诉我，长达 24 小时的跑步并不少见。再次我的问题：你们中是否有人遇到过这样的问题或对此有解释？

我真的很期待您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:13:05.473

这些确实是两个独立的问题，但我会根据我的经验来解决它们。

创建新的多语言页面的更新过程将根据语言的数量以及您正在运行的发布实例和 Web 服务器的数量（假设您使用调度程序进行缓存）而有所不同。这是因为复制过程是瓶颈所在（至少在我的经验中），因此，如果您试图通过大量前端网络向大量发布者推送大量内容- 需要清除缓存的服务器，由于复制是异步过程，因此发生这种情况会有一些延迟。我见过的最长延迟是在 10 到 15 分钟的范围内，有 12 个发布者和 12 个前端网络服务器，但这有一个明显的警告，即您的里程可能会有所不同。

对于 Tar Optimzation 工作，我建议您看看[这个页面](http://dev.day.com/docs/en/cq/current/core/administering/persistence_managers.html#Maximizing%20the%20Performance%20of%20Tar%20Optimization)，因为它有很多关于 Tar Optizer 工作以及如何调整它的好信息。当您拥有大型存储库时，该作业可能需要很长时间才能运行，尤其是在具有大量写入操作的实例上，但可以配置运行时间，使其仅在给定时间段内运行，并且它会选择如果总运行时间长于允许的运行时间，则从前一天晚上停止的地方开始。默认情况下，它每晚从凌晨 2 点到 5 点运行，因此如果需要超过 3 小时的时间，它将在第二天晚上从中断的地方继续，允许它在几天内优化整个存储库，如果需要。

# ios - 按下 UITapGestureRecognizer

> ID：14413137
> 
> 赞同：1
> 
> 时间：2013-01-19T09:58:47.343
> 
> 标签：ios, objective-c, uigesturerecognizer

是否可以为触地事件设置 UITapGestureRecogniser？默认是修饰...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T10:08:32.277

`UIGestureRecognizer`不，这是不可能的，但是创建你自己的识别器来做子类化应该不难。

您也可以将 a`UILongPressGestureRecognizer`与`minimumPressDuration`属性设置为`0.0`. 但是请注意，当触摸移动时，您的操作将被连续调用，因此请确保检查`state`识别器的 是否`UIGestureRecognizerStateBegan`在操作中（这只会是一次）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T10:04:56.763

点击手势识别器检测到点击。这与修饰不同。

检测触地的最佳方法是在自定义 UIView 或 UIViewController 中编写自己的 touchesBegan 方法。

# javascript - 当有人在文本输入中输入时如何删除提示 - javascript

> ID：14413142
> 
> 赞同：0
> 
> 时间：2013-01-19T09:59:10.463
> 
> 标签：javascript, jquery, input

我有这个文本输入

```
<input id="searchInput" type="text" value="Search Here" /> 
```

当有人输入内容时，我想删除输入的值，即“在此处搜索”...如何在 jQuery 或 javascript 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T10:00:56.067

只需使用占位符文本

```
<input id="searchInput" type="text" placeholder="Search Here" /> 
```

[http://www.w3.org/TR/html5/forms.html#the-placeholder-attribute](http://www.w3.org/TR/html5/forms.html#the-placeholder-attribute)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:00:48.710

如果浏览器提供 HTML5 功能，您可以简单地使用该[`placeholder`](http://www.w3.org/TR/html5/forms.html#the-placeholder-attribute)属性。

但是，如果用户代理不提供 HTML5 功能，您可以使用`onfocus`和`onblur`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:01:10.183

您可以将占位符用于您的代码。

```
<input id="searchInput" type="text" placeholder="Search Here" /> 
```

这是一个工作[小提琴](http://jsfiddle.net/FD4RD/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T10:04:15.057

既然你说 jQuery，[jquery-watermark](http://code.google.com/p/jquery-watermark/)就是一个不错的插件。

无论浏览器功能如何，它都会添加水印。

It will use a [placeholder](http://www.w3.org/TR/html5/forms.html#the-placeholder-attribute) if the browser supports it, and fallback to creating dom elements on browsers that don't

```
$('#searchInput').watermark('Search Here'); 
```

# backbone.js - 将数据表应用到由下划线js在backbonejs中呈现的模板

> ID：14413147
> 
> 赞同：1
> 
> 时间：2013-01-19T09:59:54.977
> 
> 标签：backbone.js, datatable, underscore.js

我正在尝试在 underscorejs 使用主干呈现的模板中使用数据表。我的模板代码是这样的：

```
<script type="text/template" id="ledgerListing">
<table>
<thead>
<tr><th>Name</th><th>Email</th><th>Phone</th><th>address</th></tr>
</thead>
<tbody>
<tr><td>mrinal</td><td>mrinal</td><td>mrinal</td><td>mrinal</td></tr>
</tbody></table>
</script> 
```

在我的一个观点中，我做了一个这样的功能：

```
 ledgerTemplate: _.template($("#ledgerListing").html()),
            loadLedger: function(){

    this.container.html(this.ledgerTemplate());
    } 
```

在页面顶部，我像这样初始化数据表：

```
$(document).ready(function() {
            $('table').dataTable();
        } ); 
```

表格被渲染，但未应用数据表插件。我猜脚本标签中的任何内容在页面加载期间都没有连接到 DOM。如果是这种情况，那么在下划线js呈现的模板上应用数据表的方法是什么。有什么建议么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:24:36.067

好的，它对我有用。我真的是个傻子：）

只需要在模板填充后初始化数据表，如下所示：

```
this.container.html(this.ledgerTemplate());
    $('table').dataTable(); 
```

# servlets - servlet 自动重定向到 localhost

> ID：14413155
> 
> 赞同：0
> 
> 时间：2013-01-19T10:00:34.553
> 
> 标签：servlets, redirect, localhost

我在我家的笔记本电脑上托管一个网站我正在使用 html/servlets 和 apache tomcat 我已经通过修改 server.xml 文件并在我的项目目录中创建 ROOT.xml 文件来设置 tomcat 来托管虚拟服务器catalina 文件夹 我还在路由器设置中转发了笔记本电脑上的端口 8080

这是问题所在：每当我使用我的全局 IP 连接到我的网站时，我都可以访问主页，这是一个 html 文件就好了![主页](../Images/f948d5de7e1b8e36892655e95cb2a8f5.png)

但是当我输入登录名和密码并点击登录时，由于某种原因，apache 试图在客户端机器（localhost）而不是服务器机器上找到 servlet 文件，我更改了所有表单操作并重定向以指定全局 ip 以及相应的 servlet 文件，但它仍会自动更改为本地主机 ![自动重定向](../Images/3d90d9635ca3049158b94dadfc87aa36.png)

因此，我无法访问该网站的其余部分

有人可以帮忙吗？

PS.我从我网络上的桌面以及另一台位于不同网络上的笔记本电脑上尝试了该站点，但同样的事情一直在发生

谢谢

这是我的登录 servlet 的代码，其他 servlet 具有类似的数据库连接和重定向

```
//Log in check

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;
import javax.sql.*;

public class Login extends HttpServlet
{

public void doGet(HttpServletRequest req,HttpServletResponse res)throws IOException,      ServletException
{
PrintWriter out=res.getWriter();
Connection con;
Statement s;
ResultSet rs;
ResultSet rs2;

try{
Class.forName("com.mysql.jdbc.Driver");
con=DriverManager.getConnection("jdbc:mysql://27.4.230.15:3306/irides","root",".hack%//sign66    ");
s=con.createStatement();
try{
String sap=req.getParameter("user");
rs=s.executeQuery("select passwd from participant where sap='"+sap+"'");
if(rs.next()){
if(rs.getObject(1).toString().equals(req.getParameter("passwd"))){
HttpSession ss=req.getSession();
ss.setAttribute("sap",sap);
rs2=s.executeQuery("select * from team where sap="+sap);
ss.setAttribute("team",rs2);
rs2=s.executeQuery("select pname,points from participant order by points desc limit 1,     10");
ss.setAttribute("lead",rs2);
ss.setAttribute("ctr",0);
res.sendRedirect("http://27.4.230.15:8080/irides/User");
}
else{
out.println("<html><body>Either the username or the password is incorrect. You will be     redirected to the login page shortly</body></html>");
res.sendRedirect("http://iridescence.in/incorrectPass.html");
}
}
}
catch(Exception e)
{
out.println(e);
out.println("<html><body>A problem was encountered due to which the operation could not     be completed. Please go back to the login page and try again.</body></html>");
}
}
catch(Exception e)
{
out.println(e);
}
}

public void doPost(HttpServletRequest req,HttpServletResponse res)throws IOException,     ServletException
{
doGet(req,res);
}

} 
```

* * *

@大家....这是一个真正愚蠢的错误...我忘记更改我的主页html文件上的表单操作链接，该文件重定向到servlet，并且由于某种原因完全忘记检查该文件的错误来源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:16:40.083

据我说，我认为您一直在 localhost 中工作和测试。所以在编码方面，您已经给出了重定向 localhost:8080/filename 的链接，但是您需要将 localhost 链接更改为具有相应目录的相应服务器 ip 取决于在服务器上..我认为你没有用文件名改变本地主机..改变使用 serverip 和服务器的目录路径..希望它会帮助你我不确定

# ruby-on-rails - 多个表单在同一页面上编辑同一模型

> ID：14413162
> 
> 赞同：0
> 
> 时间：2013-01-19T10:01:13.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个包含三种不同类型字段的用户模型，我希望能够彼此独立更新

同一页面有 3 种不同的表单，它们作用于同一模型：

*   更改用户个人资料图像

*   更改用户名/电子邮件

*   更改用户密码

它们分开的原因：照片被选中时会自动上传（不需要密码），姓名/电子邮件可以在不需要密码但需要提交表格的情况下更改，密码需要当前密码才能更改。

目前在 User#update 中，我有一系列 if/else 逻辑分支：`if params[:commit] == "Update Password"`我更新密码，`elsif params[:commit] == "Update Info"`更新他们的姓名/电子邮件等。

我不喜欢逻辑需要多长时间，而且我不认为将控制器逻辑绑定到视图中是一种好的做法（因为逻辑基于`params[:commit]`提交按钮上出现的文本）。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:27:18.537

要摆脱 if..elsif..elsif 链，您可以将更新操作拆分为 update_password、update_info 等，并相应地设置表单操作。当然，您还需要更新您的路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:17:38.693

在您的控制器中，您可以检查哪些参数已发送，然后采取适当的行动吗？

```
if params[:password] && params[:password_confirmation]
  @user.password = params[:password]
end
if params[:email]
  @user.email = params[:email]
end
if @user.save
  etc... 
```

然后你有一个路由，其行为取决于发送的内容。

# php - 在文件夹中找不到安装的 Prestashop 主题

> ID：14413167
> 
> 赞同：0
> 
> 时间：2013-01-19T10:02:14.130
> 
> 标签：php, themes, prestashop

我想卸载 Prestashop 主题。但是，当我转到主题文件夹时，没有任何主题文件夹。有没有办法恢复默认设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T16:31:14.030

我想您使用 PrestaShop 1.5 并且您在后台看到要删除的主题。

这个主题是如何安装的？

后台显示的主题名称存储在数据库中，如果“/themes”文件夹中不存在主题相关文件夹，您可以放心删除后台中的条目。

# java - 哪个 Java 库提供 base64 编码/解码？

> ID：14413169
> 
> 赞同：87
> 
> 时间：2013-01-19T10:02:28.197
> 
> 标签：java

我想知道使用哪个库进行 base64 编码/解码？我需要此功能足够稳定以供生产使用。

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2013-01-19T10:19:34.543

## 爪哇 9

使用 Java 8 解决方案。注意 DatatypeConverter 仍然可以使用，但它现在位于`java.xml.bind`需要包含的模块中。

```
module org.example.foo {
    requires java.xml.bind;
} 
```

## 爪哇 8

Java 8 现在提供[`java.util.Base64`](https://docs.oracle.com/javase/8/docs/api/java/util/Base64.html)base64 编码和解码。

编码

```
byte[] message = "hello world".getBytes(StandardCharsets.UTF_8);
String encoded = Base64.getEncoder().encodeToString(message);
System.out.println(encoded);
// => aGVsbG8gd29ybGQ= 
```

解码

```
byte[] decoded = Base64.getDecoder().decode("aGVsbG8gd29ybGQ=");
System.out.println(new String(decoded, StandardCharsets.UTF_8));
// => hello world 
```

## Java 6 和 7

[`javax.xml.bind.DatatypeConverter`](https://docs.oracle.com/javase/7/docs/api/javax/xml/bind/DatatypeConverter.html)从 Java 6 开始，可以使用鲜为人知的类。这是 JRE 的一部分，不需要额外的库。

编码

```
byte[] message = "hello world".getBytes("UTF-8");
String encoded = DatatypeConverter.printBase64Binary(message);
System.out.println(encoded);
// => aGVsbG8gd29ybGQ= 
```

解码

```
byte[] decoded = DatatypeConverter.parseBase64Binary("aGVsbG8gd29ybGQ=");
System.out.println(new String(decoded, "UTF-8"));
// => hello world 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-19T10:03:28.060

在[Apache Commons](http://commons.apache.org/codec/)中，commons-codec-1.7.jar 包含一个可用于编码的[Base64类。](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html)

通过 Maven：

```
<dependency>
    <groupId>commons-codec</groupId>
    <artifactId>commons-codec</artifactId>
    <version>20041127.091804</version>
</dependency> 
```

[直接下载](http://mirrors.ibiblio.org/pub/mirrors/maven2/commons-codec/commons-codec/1.4/commons-codec-1.4.jar)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-26T18:29:36.857

如果您是 Android 开发人员，您可以`android.util.Base64`为此目的使用类。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-19T10:14:37.600

[Guava](https://google.github.io/guava/releases/17.0/api/docs/com/google/common/io/BaseEncoding.html)也有 Base64（在其他编码和非常有用的东西中）

# makefile - 更改makefile中的变量值

> ID：14413171
> 
> 赞同：3
> 
> 时间：2013-01-19T10:02:32.860
> 
> 标签：makefile

如何在makefile中动态更改变量值？我想根据宏的值调用特定的目标。

例如。

```
STATIC_LIB = TRUE

all: makelib $(var)

makelib:
ifeq (${STATIC_LIB}, TRUE)
    var=staticlib
else
    var=sharedlib
endif 
```

在这里，我想根据目标的值调用 staticlib 目标或 sharedlib 目标。

代码：

```
.SUFFIXES: .cpp .hpp

# Programs
SHELL   = bash
CC      = g++
LD  = ld
RM  = rm
ECHO    = /bin/echo
CAT = cat
PRINTF  = printf
SED = sed
DOXYGEN = doxygen
STATIC_LIB = TRUE
######################################
# Project Name (generate executable with this name)
TARGET = cs296_exe_28

# Project Paths
PROJECT_ROOT=$(HOME)/Desktop/cs296/cs296_base_code
EXTERNAL_ROOT=$(PROJECT_ROOT)/external
SRCDIR = $(PROJECT_ROOT)/src
OBJDIR = $(PROJECT_ROOT)/myobjs
BINDIR = $(PROJECT_ROOT)/mybins
LIBDIR = $(PROJECT_ROOT)/mylibs
DOCDIR = $(PROJECT_ROOT)/doc

# Library Paths
BOX2D_ROOT=$(EXTERNAL_ROOT)
GLUI_ROOT=/usr
GL_ROOT=/usr

#Libraries
LIBS = -lBox2D -lglui -lglut -lGLU -lGL

# Compiler and Linker flags
CPPFLAGS =-g -O3 -Wall 
CPPFLAGS+=-I $(BOX2D_ROOT)/include -I $(GLUI_ROOT)/include
LDFLAGS+=-L $(BOX2D_ROOT)/lib -L $(GLUI_ROOT)/lib

######################################

NO_COLOR=\e[0m
OK_COLOR=\e[1;32m
ERR_COLOR=\e[1;31m
WARN_COLOR=\e[1;33m
MESG_COLOR=\e[1;34m
FILE_COLOR=\e[1;37m

OK_STRING="[OK]"
ERR_STRING="[ERRORS]"
WARN_STRING="[WARNINGS]"
OK_FMT="${OK_COLOR}%30s\n${NO_COLOR}"
ERR_FMT="${ERR_COLOR}%30s\n${NO_COLOR}"
WARN_FMT="${WARN_COLOR}%30s\n${NO_COLOR}"
######################################

SRCS := $(wildcard $(SRCDIR)/*.cpp)
INCS := $(wildcard $(SRCDIR)/*.hpp)
OBJS := $(SRCS:$(SRCDIR)/%.cpp=$(OBJDIR)/%.o)
OBJSNMAIN := $(filter-out $(OBJDIR)/main.o,$(OBJS))

.PHONY: all setup doc clean distclean

ifndef STATIC_LIB
makelib : sharedlib # line 5
else ifeq ( ${STATIC_LIB}, TRUE )
makelib : staticlib # line 7
else
makelib : sharedlib # line 9
endif

all: setup makelib exelib

setup:
    @$(ECHO) "Setting up compilation..."
    @mkdir -p myobjs
    @mkdir -p mybins
    @mkdir -p mylibs

$(BINDIR)/$(TARGET): $(OBJS)
    @$(PRINTF) "$(MESG_COLOR)Building executable:$(NO_COLOR) $(FILE_COLOR) %16s$(NO_COLOR)" "$(notdir $@)"
    @$(CC) -o $@ $(LDFLAGS) $(OBJS) $(LIBS) 2> temp.log || touch temp.err
    @if test -e temp.err; \
    then $(PRINTF) $(ERR_FMT) $(ERR_STRING) && $(CAT) temp.log; \
    elif test -s temp.log; \
    then $(PRINTF) $(WARN_FMT) $(WARN_STRING) && $(CAT) temp.log; \
    else $(PRINTF) $(OK_FMT) $(OK_STRING); \
    fi;
    @$(RM) -f temp.log temp.err

-include $(OBJS:.o=.d)

$(OBJS): $(OBJDIR)/%.o : $(SRCDIR)/%.cpp
    @$(PRINTF) "$(MESG_COLOR)Compiling: $(NO_COLOR) $(FILE_COLOR) %25s$(NO_COLOR)" "$(notdir $<)"
    @$(CC) $(CPPFLAGS) -c $< -o $@ -MD 2> temp.log || touch temp.err
    @if test -e temp.err; \
    then $(PRINTF) $(ERR_FMT) $(ERR_STRING) && $(CAT) temp.log; \
    elif test -s temp.log; \
    then $(PRINTF) $(WARN_FMT) $(WARN_STRING) && $(CAT) temp.log; \
    else printf "${OK_COLOR}%30s\n${NO_COLOR}" "[OK]"; \
    fi;
    @$(RM) -f temp.log temp.err

exe: $(BINDIR)/$(TARGET)

makelib:
ifeq (${STATIC_LIB}, TRUE)
LIB_TYPE = staticlib
else
LIB_TYPE = sharedlib
endif

staticlib:
    @$(ECHO) "static"
    @ar rcs $(LIBDIR)/libCS296.a $(OBJSNMAIN)

sharedlib:
    @$(ECHO) "shared"
    @$(CC) -shared -o $(LIBDIR)/libCS296.so $(OBJSNMAIN)

exelib:
    $(CC) -L $(LIBDIR) $(LDFLAGS) -o cs296_exelib_28 $(OBJDIR)/main.o -lCS296 $(LIBS)

doc:
    @$(ECHO) -n "Generating Doxygen Documentation ...  "
    @$(RM) -rf doc/html
    @$(DOXYGEN) $(DOCDIR)/Doxyfile 2 > /dev/null
    @$(ECHO) "Done"

clean:
    @$(ECHO) -n "Cleaning up..."
    @$(RM) -rf $(OBJDIR) *~ $(DEPS) $(SRCDIR)/*~ $(LIBDIR)
    @$(ECHO) "Done"

distclean: clean
    @$(RM) -rf $(BINDIR) $(DOCDIR)/html 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:42:35.633

您提出的解决方案将不起作用，因为`$(var)`将在执行之前进行评估`makelib`。

你可以做的是有条件地定义makelib：

```
STATIC_LIB = TRUE
all : makelib

ifndef STATIC_LIB
makelib : sharedlib # line 5
else ifeq (${STATIC_LIB}, TRUE)
makelib : staticlib # line 7
else
makelib : sharedlib # line 9
endif 
```

条件指令可`ifndef`避免在未定义 STATIC_LIB 时发生的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T12:43:49.550

您可以在规则定义之前设置 var 值：

**编辑**，Makefile：

```
STATIC_LIB = TRUE

ifeq (${STATIC_LIB}, TRUE)
var=staticlib
else
var=sharedlib
endif

all: $(var)

staticlib:
    echo "staticlib"

sharedlib:
    echo "sharedlib" 
```

**测试**：

`make -f Makefile`

**输出**：

```
echo "staticlib"
staticlib 
```

# types - 挂载：未知文件系统类型“drbd”

> ID：14413172
> 
> 赞同：2
> 
> 时间：2013-01-19T10:02:40.337
> 
> 标签：types, filesystems, drbd

在使用 DRBD over LVM 逻辑卷的两个系统上，Primary/Secondary 在尝试更改（提升）Secondary 到 Primary 后，在两个节点上出现错误。

```
Kernel panic on Centos System 
```

嗯..我喜欢 fsck 一个或其他节点....

但收到错误信息。

```
mount: unknown filesystem type 'drbd'
fsck /dev/sata/vm-100-disk-1
fsck from util-linux-ng 2.17.2
fsck: fsck.drbd: not found
fsck: Error 2 while executing fsck.drbd for /dev/mapper/sata-vm--100--disk--1 
```

绝望......谷歌上的任何信息......问。堆...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:12:21.417

这是后备存储，而不是 DRBD 设备 - 您不应该对后备存储进行修改。

```
Usage
 ^
DRBD
 ^ 
LVM
 ^
Disks 
```

基本上你是从 DRBD 中取出地毯——它在上层复制并依赖于下层是静态的。您应该在 /dev/drbd 中的 DRBD 设备上执行 fsck。（我在 /dev/drbd/by-res/ 中使用命名设备

# java - 如何修复我的代码中的列对齐？

> ID：14413179
> 
> 赞同：0
> 
> 时间：2013-01-19T10:03:32.317
> 
> 标签：java

这只是为了形式/整洁。我所知道的 Backlash t (\t) 似乎不太好用。这是我的代码：

```
import java.util.Scanner;

public class RegisterStudent {

public static void register() {
    System.out.println("----------------------------------------");
    System.out.println("Student Class Card Evaluation System");
    System.out.println("----------------------------------------");

    System.out.println("Personal Data");
    Scanner input = new Scanner(System.in);
    System.out.print("\tEnter student no.: ");
    long studNo = input.nextLong();
    System.out.print("\tEnter first name: ");
    String fName = input.next();
    System.out.print("\tEnter last name: ");
    String lName = input.next();
    System.out.print("\tEnter course: ");
    String course = input.next();
    System.out.println();

    System.out.println("----------------------------------------");
    System.out.println("Subject: Computer Programming 2");
    System.out.println("----------------------------------------");
    System.out.println();
    System.out.print("\tPrelim Grade: ");
    double pg = input.nextDouble();
    System.out.print("\tMidterm Grade: ");
    double mg = input.nextDouble();
    System.out.print("\tPrefinal Grade: ");
    double pfg = input.nextDouble();
    System.out.print("\tFinal Grade: ");
    double fg = input.nextDouble();
    System.out.println();
    System.out.println("----------------------------------------");

    double gwa = (pg + mg + pfg + fg)/4;    

    System.out.println();
    System.out.println("Student Evaluated successfully...");
    System.out.println("Viewing Report...");
    System.out.println();
    System.out.println("--------------------------------------------------------------------------------------------");
    System.out.println("ID No.\t\t" + "LASTNAME\t\t" + "FIRSTNAME\t\t" + "COURSE\t\t"
        + "PG\t\t" + "MG\t\t" + "PFG\t\t" + "FG\t\t" + "GWA");
    System.out.println("--------------------------------------------------------------------------------------------");

    System.out.println(studNo + "\t\t" + lName + "\t\t" + fName + "\t\t" + course + "\t\t"
        + pg + "\t\t" + mg + "\t\t" + pfg + "\t\t" + fg + "\t\t" + gwa); 
```

输出应如下所示： [![输出](../Images/06078095d67ab5fded28412a40a4fbf3.png)](https://i.stack.imgur.com/bvkFF.png)

用户将输入的所有内容都应正确对齐。请帮我修复我的程序，谢谢大家！

* * *

我目前的输出是这样 [![IMG](../Images/861cb72430b78d75906483d46dbbf37e.png)](https://i.stack.imgur.com/c64BA.png) 的：你看到它没有正确对齐

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T10:11:16.703

由于这是家庭作业，这里有一些提示：

*   `printf`一个`PrintWriter`或多个类上的方法`PrintStream`可以进行对齐。可以`String.format`和`Formatter`类。

*   `'\t'`如果您希望对齐可移植，请不要在简单文本输出中使用 TAB 字符（即）进行对齐。不同的操作系统对 TAB 的“宽度”有不同的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:15:35.720

每行输入所需的选项卡数将取决于行上首先出现的提示文本的长度，即提示越短，需要的选项卡越多。简单的试验和错误应该整理你的输出，给你所需的结果。

# python - django-haystack elasticsearch 作为后端和搜索引擎

> ID：14413180
> 
> 赞同：4
> 
> 时间：2013-01-19T10:03:34.627
> 
> 标签：python, django, elasticsearch, django-haystack

是否可以在不将另一个数据库定义为后端的情况下使用弹性搜索作为数据库和搜索引擎在大多数教程中，另一个数据库后端由弹性搜索索引。但我想使用elasticsearch作为主数据库和搜索引擎。您有任何配置示例或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:45:51.443

我使用[https://github.com/aparo/pyes](https://github.com/aparo/pyes)库解决了。

示例输入：

```
>>> conn.index({"name":"Joe Tester", "parsedtext":"Joe Testere nice guy", "uuid":"11111", "position":1}, "test-index", "test-type", 1) 
```

如[http://pyes.readthedocs.org/en/latest/manual/queries.html所示](http://pyes.readthedocs.org/en/latest/manual/queries.html)

# c - 如何将十进制整数拆分为ascii值？

> ID：14413181
> 
> 赞同：-2
> 
> 时间：2013-01-19T10:03:46.920
> 
> 标签：c

我有一个 4 位十进制数，比如 1234。我想将此数字拆分为 4 个单独的 ASCII 值，例如“1”、“2”、“3”、“4”。

该过程不应包括除法运算或整数到字符串的转换等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:06:35.703

您想提取数字的每个数字并添加“0”。如果这不符合您的要求，请随时忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:07:25.707

您可以随时更改除法运算符减法。

# iphone - 刷新 UIView 显示的图形

> ID：14413183
> 
> 赞同：0
> 
> 时间：2013-01-19T10:03:57.907
> 
> 标签：iphone

我有一个 Tabbar 应用程序，其根视图是 UITableviews（不同的类）。

在其中一个 UITableviews 上有一个子类 UIView，我在其上使用 drawRect 绘制图形，但有时图形没有正确更新并且具有不正确/旧的信息。

如何使用外部类的 setNeedsDisplay 刷新 UIView 上的图形？

将不胜感激任何输入来解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:16:55.113

问题解决了：

1.  不需要从其他类刷新 UIView。
2.  只需确保从 UIView 所属的类中调用 setNeedsDisplay 即可。

瓦拉

# blackberry - 空格后自动大写文本

> ID：14413184
> 
> 赞同：0
> 
> 时间：2013-01-19T10:04:04.080
> 
> 标签：blackberry, blackberry-jde

是否有可能自动大写任何在 the`AutoTextEditField`或 in空格之后开始的单词`EditField`？

例子：

> 公司是黑莓

或者我应该自定义`EditField`?

# mysql - 使用累积和计算循环中的总和

> ID：14413185
> 
> 赞同：0
> 
> 时间：2013-01-19T10:04:04.823
> 
> 标签：mysql, sql, cumulative-sum

我有一个`foreach`打印数据库中的所有数据的设备。数据如下所示：

```
data_sum
63
78
25
35 
```

对于循环中的每一行，我想添加总和，如下所示：

```
data_sum
63
141
166
201 
```

我曾尝试使用此 SQL 查询：

```
SET @csum := 63;
SELECT id_account, data_sum, is_expense, (@csum := @csum + data_sum) AS cumulative_sum FROM economy_events
WHERE id_account = '4'
AND is_expense = '1' 
```

但我只有`SQLSTATE[HY000]: General error`在尝试时才会得到。这是我第一次尝试使用这种方法。我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:18:32.137

当直接从您的问题粘贴时，您的查询在 MySQL（至少 5.1、5.5 和 5.6）中有效。

看到这个 SQLfiddle：[http ://sqlfiddle.com/#!8/53241/1/1](http://sqlfiddle.com/#!8/53241/1/1)

但是，您应该将 @csum 初始化为 0 以重现您想要的输出。此外，为了使累积总和有意义，您需要在 `order by`查询中添加一个子句。

如果您从某种编程语言运行查询，则问题可能是续行有问题，或者查询由两个语句组成。

您可以尝试将查询重写为

```
SELECT id_account, data_sum, is_expense,
       (@csum := @csum + data_sum) AS cumulative_sum
FROM economy_events, (SELECT @csum := 0) AS csums
WHERE id_account = '4'
AND is_expense = '1' 
```

# ajax - 在不使用其视图的情况下使用安全社交服务

> ID：14413186
> 
> 赞同：5
> 
> 时间：2013-01-19T10:04:11.187
> 
> 标签：ajax, authentication, login, playframework, securesocial

我开始在我的 play/scala 应用程序中集成 SecureSocial，但我真的不喜欢它在不同视图之间所做的所有重定向。

示例 - 尝试从其默认登录页面登录，如果您输入错误的密码，您将被重定向到不同的页面 (url)，但使用相同的登录表单。唯一不同的是有一个错误信息......

我想在我的主页角有一个简单的登录表单（用户/密码提供程序），它使用 ajax 提交它的数据，这些数据在服务器上得到验证，并做出响应以显示错误消息或更改窗口。地点。在此表单旁边，我将放置一个链接以转到更高级的登录页面，该页面添加了使用其他提供商（如 fb/twitter 等）的选项。但从该页面我也想使用 ajax 提交详细信息并获得响应.

我试图浏览 SecureSocial 源，但在那里有点迷路。

谁能给我一个想法如何使用 SecureSocial 但不使用它的任何观点？

注意：我对自定义他们的视图不感兴趣，这不仅仅是一个 CSS/设计问题，我想通过 Ajaxly 处理登录详细信息，而不是通过正常的表单提交和重定向......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:12:44.267

在对 SecureSocial 代码进行了更多搜索之后，我对它的运行方式有了更好的理解。

您可以单独使用您在 play.plugins 文件中列出的任何提供程序从您自己的登录/身份验证代码中验证用户信息。只需确保您发送提供商需要的正确参数即可。

我喜欢 SecureSocial 的 ProviderController 类根据参数动态决定使用哪个提供者的方式。但我不喜欢它做出的响应——重定向。我想用一些数据响应 ajax 请求，让客户端 js 处理它。

这是我的解决方案：

几乎将所有 ProviderController 代码复制到我自己的 Auth.scala 文件（控制器）中。更改了与“case ex, case _”相关的重定向，在添加与用户相关的 SecureSocial 会话密钥时保持重定向成功验证。从我的路由文件中删除了所有与 SecureSocial 相关的路由。使用 logintype (userpass/google/fb/etc...) 放置一个额外的隐藏字段，并将我的登录 ajax 帖子配置为将其与帖子一起发送到我的 Auth 控制器。

如果您需要更多信息，请在此处发表评论，我将编辑答案。

# python - django 列表在视图之间没有被破坏

> ID：14413189
> 
> 赞同：1
> 
> 时间：2013-01-19T10:04:49.760
> 
> 标签：python, django, geodjango

我正在从一些模型数据创建一个列表，但我没有正确执行它，它可以工作，但是当我刷新浏览器中的页面时，reportResults 只是被添加到。我希望它会在请求之间收集垃圾，但显然我做错了什么，有什么想法吗？

谢谢，伊万

```
reportResults = []   #the list that doesn't get collected
def addReportResult(fix,description):  
    fix.description = description
    reportResults.append(fix)

def unitHistory(request,unitid, syear, smonth, sday, shour, fyear, fmonth, fday, fhour, type=None):
   waypoints = Fixes.objects.filter(name=(unitid))
    waypoints = waypoints.filter(gpstime__range=(awareStartTime, awareEndTime)).order_by('gpstime')[:1000]
    if waypoints:
        for index in range(len(waypoints)): 
...do stuff here selecting some waypoints and generating "description" text
                    addReportResult(waypointsindex,description) ##append the list with this, adding a text description

    return render_to_response('unitHistory.html', {'fixes': reportResults}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:29:39.513

您每次都重用同一个列表，要修复它，您需要重组代码以在每个请求上创建一个新列表。这可以通过多种方式完成，这是一种方式：

```
def addReportResult(reportResults, fix,description):  
    fix.description = description
    reportResults.append(fix)

def unitHistory(request,unitid, syear, smonth, sday, shour, fyear, fmonth, fday, fhour, type=None):

    reportResults = [] # Here we create our local list that is recreated each request.

    waypoints = Fixes.objects.filter(name=(unitid))
    waypoints = waypoints.filter(gpstime__range=(awareStartTime, awareEndTime)).order_by('gpstime')[:1000]
    if waypoints:
        for index in range(len(waypoints)):
            # Do processing
            addReportResult(reportResults, waypointsindex, description)
            # We pass the list to the function so it can use it.

return render_to_response('unitHistory.html', {'fixes': reportResults}) 
```

如果保持较小，您还可以通过完全删除对的调用并在同一位置执行来`addReportResult`内联属性集。`description``addReportResult``waypointsindex.description = description`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:45:45.707

为了让您了解请求的生命周期，mod_wsgi 将保持进程开放以服务多个请求。该过程经常被回收，但它绝对不会像您假设的那样绑定到单个请求。

这意味着您需要一个本地列表。我建议`addReportResult`直接内联移动函数内容，但如果它需要可重用或函数太长，这不是一个好主意。相反，我会让该函数返回项目，您可以在本地收集结果。

```
def create_report(fix, description): # I've changed the name to snake_casing
    fix.description = description
    return fix

def unit_history(request,unitid, syear, smonth, sday, shour, fyear, fmonth, fday, fhour, type=None):
    reports = []
    waypoints = Fixes.objects.filter(name=(unitid))
    waypoints = waypoints.filter(gpstime__range=(awareStartTime, awareEndTime)).order_by('gpstime')[:1000]
    if waypoints:
        for index in range(len(waypoints)): 
            report = create_report(waypointsindex, description)
            reports.append(report)
    return render_to_response('unitHistory.html', {'fixes': reportResults}) 
```

# c - pthread POSIX C 库分离状态

> ID：14413195
> 
> 赞同：0
> 
> 时间：2013-01-19T10:05:44.190
> 
> 标签：c, linux, pthreads, posix, libraries

有人问我，我们从哪里知道当`NULL`作为函数中的第二个参数传递时`pthread_create()`，线程是可连接的。

我的意思是，我知道手册页是这样说的，但是需要代码中的理由。我知道当`NULL`传入时，使用默认属性：

`const struct pthread_attr *iattr = (struct pthread_attr *) attr; if (iattr == NULL) /* Is this the best idea? On NUMA machines this could mean accessing far-away memory. */ iattr = &default_attr;`

我知道它应该在 pthread 库的代码中的某个地方，但我不知道具体在哪里。

我知道 的定义`default_attr`在 pthread_create.c 中：

`static const struct pthread_attr default_attr = { /* Just some value > 0 which gets rounded to the nearest page size. */ .guardsize = 1, };`

[http://sourceware.org/git/?p=glibc.git;a=blob;f=nptl/pthread_create.c;h=4fe0755079e5491ad360c3b4f26c182543a0bd6e;hb=HEAD#l457](http://sourceware.org/git/?p=glibc.git;a=blob;f=nptl/pthread_create.c;h=4fe0755079e5491ad360c3b4f26c182543a0bd6e;hb=HEAD#l457)

但我不知道*代码中的确切位置表明*这会导致可连接的线程。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:38:47.813

首先，从您粘贴的代码中，您可以看到`default_attr`几乎所有字段都包含零（C 中没有半初始化变量之类的东西：如果您只初始化一些字段，其他字段将设置为 0）。

其次，[`pthread_create`](http://sourceware.org/git/?p=glibc.git;a=blob;f=nptl/pthread_create.c;h=4fe0755079e5491ad360c3b4f26c182543a0bd6e;hb=HEAD#l491)包含此代码：

```
/* Initialize the field for the ID of the thread which is waiting
   for us.  This is a self-reference in case the thread is created
   detached.  */
pd->joinid = iattr->flags & ATTR_FLAG_DETACHSTATE ? pd : NULL; 
```

此行检查是否设置`iattr->flags`了`ATTR_FLAG_DETACHSTATE`位，（对于`default_attr`）它没有设置，因为它`default_attr.flags`是 0。因此，对于分离的线程，它设置`pd->joinid`为`NULL`而不是设置。`pd`

（请注意，此答案仅适用于 GNU glibc，而不适用于一般的 POSIX pthread。）

# css - cufon 文本显示不正确

> ID：14413196
> 
> 赞同：0
> 
> 时间：2013-01-19T10:05:50.207
> 
> 标签：css, cufon

我的带有cufon的字体标题在顶部被切割并向上移动，有什么想法吗？也许这是一个css问题，我不知道，但我无法弄清楚。

[http://www.quotestample.com](http://www.quotestemple.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:11:28.577

`h3`在元素顶部添加 3 像素的边距：

```
h3 {
    font-size: 25px;
    color: #281c17;
    letter-spacing: -1px;
    line-height: 1.2em;
    margin: 3px 0 27px 0;
} 
```

# c# - 如何在javascript中找到父窗口的标题？

> ID：14413200
> 
> 赞同：1
> 
> 时间：2013-01-19T10:06:27.893
> 
> 标签：c#, javascript, asp.net

如何在javascript中找到父窗口的标题？

我用

```
 alert(window.parent.document.FormName); 
```

和

```
 alert(window.parent.document.title); 
```

和

```
 alert(window.parent.parent.document.title); 
```

但结果并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:17:34.890

将此代码用于您的解决方案

1.  pageMain.html

    ```
    <html>
    <head>
        <title>Parent Window</title>
    </head>
    <body>
    <input type="text" id="data" value="23444" />
    <a href="#" onclick="javascript:openChildWindow();">Open Child Popup window</a>
    </body>
    <script>
    function openChildWindow() {
        window.open('page1.html','childWindow','width=400,height=400');
    }
    </script>
    </html> 
    ```

2.  page1.html

    ```
    <html>
    <head>
        <title>Child Window</title>
    </head>
    <body onload="initializeMainDiv();">
        <div id="mainDiv"></div>
    </body>
    <script>
    function initializeMainDiv() {
       alert( window.opener.document.title )
      }
      </script>
    </html> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:11:16.360

您可能正试图从位于另一台服务器上的`parent`窗口访问窗口标题。`iframe`出于安全原因，这是不可能的。

# sql - 在 SQL 中编写函数以遍历 UDF 中的日期范围

> ID：14413203
> 
> 赞同：9
> 
> 时间：2013-01-19T10:06:42.603
> 
> 标签：sql, postgresql, plpgsql

我正在尝试自动化运行某个`PLPGSQL`日期范围内的函数的过程。
通常我必须运行以下代码，每个函数调用每天生成一个表：

```
SELECT dhcp.singleday('2012-11-24'::date, '2012-11-25'::date);
SELECT dhcp.singleday('2012-11-25'::date, '2012-11-26'::date);
SELECT dhcp.singleday('2012-11-26'::date, '2012-11-27'::date);
SELECT dhcp.singleday('2012-11-27'::date, '2012-11-28'::date);
SELECT dhcp.singleday('2012-11-28'::date, '2012-11-29'::date);
SELECT dhcp.singleday('2012-11-29'::date, '2012-11-30'::date);
SELECT dhcp.singleday('2012-11-30'::date, '2012-12-01'::date);
SELECT dhcp.singleday('2012-12-01'::date, '2012-12-02'::date);
SELECT dhcp.singleday('2012-12-02'::date, '2012-12-03'::date);
SELECT dhcp.singleday('2012-12-03'::date, '2012-12-04'::date); 
```

有没有一种好方法可以通过简单的循环或函数在任意日期范围内自动化此类事情？

我认为可能很难处理逐月进行的情况，所以我认为最好假设日期范围是一个月。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-19T13:05:38.537

不需要函数：

```
select dhcp.singleday(a::date, a::date + 1)
from generate_series(
    '2012-11-24'::date,
    '2012-12-03',
    '1 day'
) s(a) 
```

这适用于任何日期范围。不仅是一个月内。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-19T10:36:21.237

简单的plpgsql函数：

```
CREATE OR REPLACE FUNCTION f_machine_gun_sally(date, date)
  RETURNS void AS
$func$
DECLARE
    d date := $1;
BEGIN

LOOP
    PERFORM dhcp.singleday(d, d+1);
    d := d + 1;
    EXIT WHEN d > $2;
END LOOP;

END
$func$ LANGUAGE plpgsql; 
```

*   [`PERFORM`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-NORESULT)当你不想关心返回值时使用。
*   您只需将 a 添加`integer`到 a`date`以增加。这样，月或年的界限就无关紧要了。

# c# - 将 args 从批处理文件传递到带有空格的 C# 程序

> ID：14413205
> 
> 赞同：1
> 
> 时间：2013-01-19T10:07:03.740
> 
> 标签：c#, batch-file

我正在尝试将**参数/参数**从批处理文件传递到一个简单的**C#** *Console.Writeline(args[0])*程序。

我的程序的 exe 文件有一个**带空格的两个单词的名称，**这就是问题所在！只有当我**将 exe 文件重命名为一个完整的单词**并写入`start SchoolBook.exe OMG`并且 arg[0] 然后变为等于“OMG”时，整个事情才有效。但在任何其他情况下，程序都不会启动。

*   如果我让它*启动 School Book.exe OMG*，它会说**“Windows 找不到”学校“..”**
*   如果我加上双引号：`start "School Book.exe" OMG`它说**“Windows找不到“OMG”..“**
*   如果我把单引号它找不到**“学校”**
*   我尝试在 OMG 之前加上一个“-”，在 OMG 周围加上引号，甚至`%1%`在它前面加上 NO！没有任何效果..有什么帮助吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:37:23.027

我刚刚创建了一个空的命令应用程序“School Book”，它在构建时会生成可执行文件`School Book.exe`。

我很空的实现：

```
class Program
{
    static void Main(string[] args)
    {
        if (args.Length > 0)
        {
            MessageBox.Show(args[0]);
        }
        else
        {
            MessageBox.Show(args[0]);
        }
    }
} 
```

在我的命令框中，我可以像这样执行程序：

```
Debug>start "" "School Book.exe" OMG 
```

现在会弹出一个带有“OMG”的消息框

# c++ - try_lock_for 未按预期工作

> ID：14413211
> 
> 赞同：7
> 
> 时间：2013-01-19T10:07:36.310
> 
> 标签：c++, multithreading, c++11, locking, mutex

我正在摆弄 c++ 中的一些代码，由于某种原因不想工作，我将其缩小到这种情况：

```
#include <thread>
#include <atomic>
#include <chrono>
#include <mutex>
#include <iostream>

using namespace std;

void test()
{
  timed_mutex m;
  m.lock();
  std::cout << "Can i have the lock? " << m.try_lock() << std::endl;
  std::cout << "in test(), should block for 10 seconds" << std::endl;
  bool got_lock = m.try_lock_for(std::chrono::seconds(10));
  std::cout << "Now i've blocked, got the lock: " << got_lock << std::endl;
  m.unlock();
}

int main()
{
  thread t = thread(&test);
  t.join();

  return EXIT_SUCCESS;
} 
```

问题是 test() 根本不会阻塞，即使`try_lock`返回 false。有没有我忽略的东西，或者这是 gcc 中的错误，或者我接下来应该去哪里找出问题所在？感谢您的任何建议和帮助！

我像这样编译了这个小程序：`g++ -pthread -std=c++11 threads.cpp -o threads` 如果有任何帮助，这是 gcc 和我的操作系统的版本：

```
g++ --version
g++ (GCC) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

uname -a
Linux *computername* 3.6.11-1-ARCH #1 SMP PREEMPT Tue Dec 18 08:57:15 CET 2012 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T02:11:14.697

您的代码行为未定义。`std::timed_mutex`具有*非递归所有权*语义。禁止在*同一*线程上第二次获取锁（包括 try_lock 系列）。

C++11 标准 30.4.1.3.1 [thread.timedmutex.class]/p3/b2：（感谢 Howard Hinnant）

> 3 如果出现以下情况，程序的行为是未定义的：
> 
> *   拥有`timed_mutex`对象的线程在该对象上调用`lock()`、`try_lock()`、`try_lock_for()`或`try_lock_until()`，或

~~C++11 标准 30.4.1.2 [thread.mutex.requirements.mutex]/p6-7：~~

* * *

**编辑：**

> 我将如何“解决这个问题”或让它按照我想要的方式行事？我应该改用递归互斥锁吗？

一般来说，鉴于异常安全，不鼓励获取/释放互斥对象的锁。如果您改用`unique_lock`对象，则`owns_lock()`成员函数可能会对您有所帮助。同时，递归互斥锁对您的目的没有用，因为“递归”意味着只有“当我已经拥有锁时，我（一个线程）可以获取两次或更多次锁”。

```
void test()
{
  std::timed_mutex m;
  std::unique_lock<decltype(m)> lk(m, std::defer_lock);

  // acquire lock
  lk.lock();
  // You can query locked status via unique_lock object
  std::cout << "Do I have own lock? " << lk.owns_lock() << std::endl;
  // release lock
  lk.unlock();
} 
```

# php - 如何在 PHP 中使用 $_SESSION 和 if()

> ID：14413212
> 
> 赞同：0
> 
> 时间：2013-01-19T10:07:48.993
> 
> 标签：php, session, if-statement

我用 Mobile_Detect.php 构建了一个移动检测，效果很好。现在，如果用户不想留在移动网站上，他可以单击“桌面版本”并通过设置`$_SESSION['mobile'] = 'off'`.

主站点执行以下代码：

```
<?php
  session_start();
  // Did the User come back from mobile.php?
  if ($_SESSION['mobile'] != 'off') {
    include 'Mobile_Detect/Mobile_Detect.php';
    $detect = new Mobile_Detect();
    // Smartphone?
    if ($detect->isMobile() && !$detect->isTablet()) {
      // Redirection --> echo 'JS'
      echo "<script>window.location='mobile.php'</script>";
    }
  }
?> 
```

问题似乎是`if ($_SESSION['mobile'] != 'off')`被忽略或错误。我的 iPhone 总是将我直接发送回“mobile.php”。

任何人都可以帮忙吗？

也许我应该向您展示“mobile_off.php”中的代码：

```
<?php
  session_start();
  $_SESSION['mobile'] = 'off';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:25:29.147

在检查会话变量的值之前，您需要先检查会话变量是否存在。要检查是否设置了会话变量，请尝试使用此代码

```
if(isset($_SESSION['mobile']) 
```

之后检查会话变量的值

# c++ - 如何平均在OpenCV中对象没有移动的视频文件的所有帧？

> ID：14413214
> 
> 赞同：0
> 
> 时间：2013-01-19T10:08:23.803
> 
> 标签：c++, c, opencv

我有不同的视频文件帧。现在，在分别观察每一帧时，我注意到有许多帧中的对象没有移动。我需要对所有这些帧进行平均并使用 OpenCV 制作一个帧。

我是 OpenCV 的新手，所以如果能够获得帧平均的代码，这将是很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:34:42.440

一种简单的技术...

从当前帧中减去前一帧...[使用这个 opencv 函数](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#subtract)。只取那些差异为负或正高于阈值的帧......就像在对象几乎是静态的帧中，然后在做帧差时你会得到低值......跳过那些帧......再次当只有物体在移动，而背景的其余部分或多或少是静止的，就像一个人在公园里移动一样，您只需存储该人的位置，背景就会被复制......

# c# - 如何用javascript按下按钮

> ID：14413216
> 
> 赞同：1
> 
> 时间：2013-01-19T10:08:28.807
> 
> 标签：c#, javascript, .net

如何使用 JavaScript 按下按钮。

```
function fnLoginPressEnter(obj) {
  if (this.event.keyCode == 13) {
    Ncucu.Login(document.forms[0]);
  }
} 
```

大错特错

```
webBrowser1.Document.InvokeScript("fnLoginPressEnter"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:10:46.467

使用 onkeydown="if(event.keyCode == 13) document.getElementById('[YOUR_BUTTON_ID]').click()"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:10:45.517

如果你使用 jQuery，你可以这样做：

```
$('#button_id').click(); 
```

或者您可以手动创建点击事件：

```
var el=document.getElementById('button_id');                            
if (!el.dispatchEvent) {
                            el.fireEvent('onclick');
                        } else {
                            var e = document.createEvent('MouseEvents');
                            e.initMouseEvent('click', false, true, top, 1, 0, 0, 0, 0, false, false, false, false, 0,
                                    null);
                            el.dispatchEvent(e);
                        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:37:33.173

将此与您的要求一起使用，例如 onkeyup

例如：

```
onkeyup="javascript:KeyUp(event);"

function KeyUp(event)
var v = event.keyCode ? event.keyCode : event.charCode;
  if (v == "13") {
    document.getElementById('btnSubmit').click();
  } 
```

# objective-c - 这是在 Objective-C 中创建类级属性（即点语法）的有效方法吗？

> ID：14413223
> 
> 赞同：3
> 
> 时间：2013-01-19T10:09:41.410
> 
> 标签：objective-c, properties, class-members

> **可能重复：**
> [如何在 Objective-C 中声明类级属性？](https://stackoverflow.com/questions/695980/how-do-i-declare-class-level-properties-in-objective-c)
> [Objective-C 2.0 点表示法 - 类方法？](https://stackoverflow.com/questions/2375943/objective-c-2-0-dot-notation-class-methods)

Objective-C 的 @property 声明不允许您指定类级别的属性。例如，你不能这样做......

```
@interface NSObject (MyExtension)

    + @property (nonatomic, copy) NSString * className;

@end 
```

...但我记得读过属性实际上只是获取/设置消息的语法糖，所以当您键入 something.foo 时，您实际上只是发送 [something foo] 或 [something setFoo:newFooVal] 消息。

于是我有了一个想法，就写了这个普通的班级成员……

```
@interface NSObject (MyExtension)

    + (NSString *) className;

@end 
```

并在“m”文件中添加了这个（再次，完全正常）......

```
#import "IS_NSObject.h"

@implementation NSObject (MyExtension)

  + (NSString *) className
    {
        return NSStringFromClass([self class]);
    }

@end 
```

...果然，要获得任何类名的字符串表示，我现在可以这样做...

```
NSString * holderForClassName = UICollectionView.className; 
```

瞧！一流的属性！甚至没有编译器警告！

实际上，唯一缺少的是代码完成/智能感知中的建议。但是如果你这样输入它当然会......

```
NSString * holderForClassName = [UICollectionView className]; 
```

所以当然，问题是......我基本上只是“发现”（即它一直在那里但它没有像这样使用）一个类级别的属性吗？

（好吧，好的，属性语法，但这就是我为了链接而不是嵌套大量括号而追求的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:14:42.563

您正在描述该语言中一直存在的功能。

正如您提到的，属性只是 getter 方法和 setter 方法的语法糖。

@property 和 @synthesize 只是帮助您实现属性，它们编译成与您自己实现 getter 和 setter 相同的东西。

换句话说，您的发现没有什么新的或意外的，抱歉。但是类级别的属性有时会有所帮助，尽管我认为一些（大多数？）ObjC 编码指南建议使用消息语法调用类级别的 getter。这也可能是为什么当您使用点分符号时它不会出现在智能感知中。

# grails - 没有会话的 Grails

> ID：14413229
> 
> 赞同：9
> 
> 时间：2013-01-19T10:11:07.243
> 
> 标签：grails, jsessionid

我注意到 Grails 应用程序和大多数其他基于 Java 的 Web 应用程序一样，总是创建一个会话，即使它没有被使用。

是否可以仅在需要时设置 JSESSIONID cookie，例如。当有人尝试登录时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:52:43.480

可以通过添加以下页面指令来禁用会话 cookie 的生成：

```
<%@ page session="false" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T22:03:37.280

我不确定上面使用的是什么版本的 grails，但我在大型应用程序中遇到了类似的问题。我的应用程序在 UI/gsp 和其他提供纯 json/xml 而没有视图的控制器之间拆分。UI 部分应该是唯一使用会话的部分，但服务也返回 JSessionId。

由于应用程序很大，为了排除故障，我使用 grails 1.3.7 和 2.2.1 创建了新应用程序，并带有一个基本控制器：

```
class FooController {
    static defaultAction = "lookatme"
    def lookatme = {render(view:'lookatme')}
    def hallo = {render(text:"<xml>some xml</xml>",contentType:"text/xml",encoding:"UTF-8")}
    def somestate = {session.foo = "bar"; render(text:"<xml>some xml</xml>",contentType:"text/xml",encoding:"UTF-8")}
} 
```

当我在 tomcat 上运行它时，既不也不`lookatme`返回`hallo`JSessionId。行动`somestate`确实如此。回顾我们的代码后，我们发现一些地方（例如一些过滤器）在不应该访问会话时尝试访问。

如果您的代码通过 JSessionId cookie 返回会话，而您认为不应该这样做，请确保该操作（或过滤器）中没有使用访问`session`（或`flash`？）的代码。

# html - 如何创建要在网页中使用的徽标和图标

> ID：14413230
> 
> 赞同：0
> 
> 时间：2013-01-19T10:11:08.443
> 
> 标签：html, css, responsive-design

最近一直在研究响应式网页设计，为了练习，我制作了一个非常简单的“应用程序”，它可以适应浏览器的屏幕尺寸。一切都按预期工作，但现在我想为界面增添趣味。

我的意图是创建一个徽标，也许还有一些图标。我已经下载了 GIMP，我正在考虑使用它。然后我突然想到，这是正确的方法吗？

GIMP 是一个不错的选择吗？或者，这可以通过 HTML5 中的功能来实现，比如画布和类似的东西。或者你通常是怎么做的以及使用什么工具？

我不太确定如何进行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:13:41.557

我建议您使用[EaselJS](http://www.createjs.com/#!/EaselJS)，我希望您喜欢使用它，但是您希望您的访问者可以访问的普通图形应该被设计并保存为流行的图形格式，例如 PNG、JPEG 和 GIF。gimp 也是一个好可爱的工具。

# perl - 在perl中选择数据结构

> ID：14413240
> 
> 赞同：-2
> 
> 时间：2013-01-19T10:11:58.557
> 
> 标签：perl

我必须将以下数据存储在 perl 中的结构中！

```
{
mo=>RXOTG-12,
a=>1,
b=>2,
c=>3,
    {
     mo=>RXOTRX-12,
     d=>4,
     e=>5,
         {
         mp=>RXOTX-12,
         f=>6,
         g=>7
         }
    },
    {
     mo=>RXOMCTR-12,
     i=>8,
     j=>9
    },
k=>10   
} 
```

任何人都可以告诉我什么是适合这个的最佳数据结构。a has 的散列不适合这个，因为有一些单独的元素也像例子中提到的 a,b,c。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:12:19.367

很少丢失：

```
{
mo=>RXOTG-12,
a=>1,
b=>2,
c=>3,
children => [             <---
    {
     mo=>RXOTRX-12,
     d=>4,
     e=>5,
     children => [        <---
         {
         mp=>RXOTX-12,
         f=>6,
         g=>7
         }
     ],                   <---
    },
    {
     mo=>RXOMCTR-12,
     i=>8,
     j=>9
    },
],                        <---
k=>10   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:31:30.220

使用哈希。

如果一条数据是一个标量（如`a`），则生成`a`一个标量的值。

如果是哈希，则将其设为哈希引用。

不要求散列中每个键的值都是相同类型的数据结构。

为介于它们之间的数据结构命名，`c`或者`k`将其中的数据提升一个级别。

# javascript - JQM 锚按钮文本出现在按钮之外

> ID：14413242
> 
> 赞同：0
> 
> 时间：2013-01-19T10:12:08.897
> 
> 标签：javascript, jquery-mobile

这应该是另一个让我感到困惑的简单修复。我正在从数据库中提取数据并为数据库的每一行呈现一个按钮。但是，文本不会出现在按钮内！它出现在它下面！

这是代码：

```
$('#'+category).append('<li><a href="#itemColours" data-role="button" data-icon="false" data-rel="popup" data-mini="true" id="'+thisRow.fixture+'itemColour" class="descriptions" onClick="getItemColours(\''+thisRow.fixture+'\')" />'+thisRow.colour+'</a></li>'); 
```

有趣的是，当 getItemColours 函数运行时，它会显示一个颜色弹出窗口，当您选择一种颜色时，它会更改按钮并更新数据库。那一点工作得很好。

```
$('#'+item+'itemColour .ui-btn-text').text(colour); 
```

这是我得到的：http: [//i1320.photobucket.com/albums/u521/dan_jones2/buttons_zps185113ce.png](http://i1320.photobucket.com/albums/u521/dan_jones2/buttons_zps185113ce.png) 按钮渲染不正确，函数调用后的按钮（正确）然后刷新列表后的按钮（再次错误） ）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:28:05.073

这个按钮在我的 jsFiddle 示例中工作得很好。我认为这是您的自定义 css 中的一个问题，它干扰了 jQM 按钮 css。

你的班级**描述**怎么样，也许是导致这个问题的原因。或者，也许你有一个 CSS 会干扰

```
<span class="ui-btn-text">.... 
```

您可以做的最好的事情可能是使用例如用于 Firefox 或 Chrome 的 firebug 插件，然后查看按钮 HTML 和 CSS。特别注意添加到的类：

```
<span class="ui-btn-text"> 
```

我认为有些东西给了它显示：块；css 属性，这导致了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T15:57:33.070

我仍然不知道为什么这不起作用，但我通过更改输入按钮的锚标记并添加了另一个功能来打开弹出窗口来解决它。

# jquery - jQuery 应用程序模式/架构

> ID：14413246
> 
> 赞同：2
> 
> 时间：2013-01-19T10:12:50.477
> 
> 标签：jquery

我正在寻找 jQuery 应用程序架构的最佳实践。

此示例正在运行，但我认为这不是最好的方法。

我们有内核函数（加载配置、初始化子模块等）和选项卡 dub-module 作为示例。

```
"use strict";
(function($, app, window) {

    app.kernel = function() {
        var self = this;
        app.tabs().init(); // init tabs sub-module
        return self;
    };

    app.tabs = function() {
        var self = this;
        self.init = function() {
            console.log('tabs function init');
        };
        return self;

    };

})(jQuery, window.SuperPuper || (window.SuperPuper = {}), window);

$(function() {
    new SuperPuper.kernel();
}); 
```

建立了一些材料：

1.  [使用继承模式组织大型 jQuery 应用程序](http://alexsexton.com/blog/2010/02/using-inheritance-patterns-to-organize-large-jquery-applications/)
2.  [如何编写可维护的 jQuery 应用程序](http://www.intelligiblebabble.com/how-to-write-maintainable-jquery-applications/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:05:10.460

jQuery 模式的最佳资源来自 Addy Osmani，他将有关该主题的所有其他材料编译成易于理解的形式：

> [http://addyosmani.com/blog/essential-jquery-plugin-patterns/](http://addyosmani.com/blog/essential-jquery-plugin-patterns/)

# iphone - 单击按钮时无法更改标签中的文本大小

> ID：14413247
> 
> 赞同：0
> 
> 时间：2013-01-19T10:13:13.343
> 
> 标签：iphone, ios, objective-c, ios5, uibutton

在我的 iPhone 应用程序中。单击按钮时，我想更改标签中的文本大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:19:23.230

以下是如何在运行时更改字体大小....

```
yourLabel.font=[UIFont systemFontOfSize:14]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:20:15.140

创造`UILabel`

```
self.lbl=[[UILabel alloc] initWithFrame:CGRectMake(135, 290,200,35)];
    self.lbl.backgroundColor=[UIColor clearColor];
    NSString *str=[NSString stringWithFormat:@"%.f",[self.slider value]];
    [self.lbl setFont:[UIFont fontWithName:@"Arial-BoldMT" size:16]];
    self.lbl.text=str;
    [self.View addSubview:self.lbl]; 
```

`UILabel`更改点击时的文本大小`UIButton`

```
-(IBAction)ButtonPressed:(id)sender
{
    [self.lbl setFont:[UIFont fontWithName:@"Arial-BoldMT" size:25]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:20:37.507

```
-(IBAction)changeFontOfLabel:(id)sender
{
   [self.lebelObject setFont:[UIFont fontWithName:@"American Typewriter" size:18];
} 
```

并写下正确的字体名称。在此处查看[字体列表](http://www.prepressure.com/fonts/basics/ios-4-fonts)

# mysql - 使用 innodb 在论坛中搜索

> ID：14413248
> 
> 赞同：0
> 
> 时间：2013-01-19T10:13:19.553
> 
> 标签：mysql, sql, full-text-search, innodb

我正在使用`MySQL 5.3`并且无法将其更新到较新的版本（5.6 支持对 innodb 的全文搜索）。

所以我的问题是，我应该`Myisam`改用用户以便我可以对我的论坛表使用全文搜索吗？
用户需要能够在表格中搜索，或者我应该以其他方式解决它，（什么方式？）。

编辑：或者我应该在 SQL 中使用 LIKE 吗？

# android - 服务中的 Sqlite

> ID：14413249
> 
> 赞同：0
> 
> 时间：2013-01-19T10:13:30.197
> 
> 标签：android, sql, oop

谁能告诉我在我尝试过的后台服务中访问数据库的最佳方法是什么

```
SQLiteDatabase db = opOrCreate method 
```

但这仅适用于 UI，但在后台它只提供空指针，我也尝试过。

```
SQliteOpenHelper class 
```

这也不适用于仅在 UI 中的服务。所以我的问题是在服务中是否有不同的方法来访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:15:59.260

您能否详细说明您想对数据库做什么？您可以使用 AsyncTask，最好在后台执行任何操作。

# c# - 服务定位器模式和登录用户

> ID：14413250
> 
> 赞同：1
> 
> 时间：2013-01-19T10:13:37.040
> 
> 标签：c#, design-patterns, service-locator

我正在调整我的 Web 应用程序层，以使代码更具可测试性。

目前，UI 与传入接口的服务定位器对话，这会根据该类型返回适当的对象：

```
ServiceLocator.Get<ISomeService>().ListStuff(arg1, arg2); 
```

在内部，服务通过实例实例化`IServiceContext`并缓存。

```
private static Lazy<IDictionary<Type, object>> _services = new Lazy<IDictionary<Type, object>>(GetServices);

public interface IServiceContext
{
    IConfiguration Configuration { get; }

    IUser CurrentUser { get; internal set; }

    ILogProvider Log { get; }

    ICacheProvider Cache { get; }

    IProfilerProvider Profiler { get; }
}

public LogService(IServiceContext serviceContext)
  : base(serviceContext) { } 
```

我对这个概念很满意，而且它似乎足够坚固，我唯一的问题是我想让当前登录的用户可用，`ServiceContext`但不确定实现它的最佳方式。

我的想法沿着这些潜在的选择：

1.  在其中保留一个简单的方法`ServiceLocator`来处理获取用户会话并将其注入到服务中作为对他们的请求。
2.  将当前用户移出`IServiceContext`并移入`ServiceBase`每个服务的基类。
3.  停止这样做，并使每个需要用户的服务都依赖它。

我感谢任何建议，我理解这个问题不符合该网站的真正精神。我已经进行了 4 天的反复试验才能达到这一点，只需要这个拼图的最后一块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:46:52.383

可能有很多解决方案，我不确定我是否理解您的问题，但无论如何我都会尽力提供帮助。

每当我需要当前用户时，我都会在使用它的代码的上下文中调用静态实用程序类。这样我就消除了过时信息的可能性。

您可以创建一个实现`IUser`类似的类

```
class User : IUser {
  private System.Security.Principal.WindowsIdentity identity;

  public User() {
    this.identity = identity = System.Security.Principal.WindowsIdentity.GetCurrent();
  }

  public string UserName { get { return this.identity.Name; } }
} 
```

然后也许：

```
public class ServiceContext : IServiceContext
{
    IUser CurrentUser { get { return new User(); } }
} 
```

# ubuntu - 如何在 Lubuntu 中使用代码或脚本以编程方式锁定我的屏幕？

> ID：14413253
> 
> 赞同：0
> 
> 时间：2013-01-19T10:14:03.867
> 
> 标签：ubuntu, command-line

当我的 C++ 程序从以太网接收到特定命令时，我想编写代码或脚本来锁定 PC。

有没有办法从命令行显示登录屏幕？我想从 C++ 代码中锁定屏幕。实际上，我想以编程方式（来自 c++ 代码）执行 Ctrl + Alt + L 之类的操作。谢谢

编辑：我找到了方法。对于那些想知道的人，由于 Lubuntu 使用 LXDE 桌面，它有一些方法可以做类似的事情。锁定屏幕的命令是 lxlock。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:41:11.660

我找到了方法。对于那些想知道的人，由于 Lubuntu 使用 LXDE 桌面，它有一些方法可以做类似的事情。锁定屏幕的命令是 lxlock。

# osgi - 在 bnd-cache 中找不到捆绑包

> ID：14413255
> 
> 赞同：0
> 
> 时间：2013-01-19T10:14:19.070
> 
> 标签：osgi, bnd, bndtools

我对 bndtools 有疑问。解析完成没有问题，但是在我单击运行描述符中的“运行 OSGi”后，出现以下问题：

`Status ERROR: bndtools.core code=0 jena-arq~;version=[2.9.4,2.9.5) Not found in [bnd-cache, aQute.lib.deployer.obr.LocalOBR@1fef0b44, aQute.lib.deployer.obr.OBR@6ccadbd, aQute.lib.deployer.obr.LocalOBR@67a256c7, aQute.lib.deployer.obr.OBR@2d52912f] null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:43:23.247

查看 jena-arq~ 你必须在其中一个列表中列出 jena-arq 两次...如果有重复，bnd 会在名称后面附加一个 ~。这当然应该在寻找名称之前被删除，请提交一个关于这个的错误。但是，确保每个名称在列表中只出现一次也应该有效。

# php - 将值从 JavaScript 确认传递到 Codeigniter 控制器

> ID：14413256
> 
> 赞同：0
> 
> 时间：2013-01-19T10:14:36.790
> 
> 标签：php, mysql, codeigniter

我是 JavaScript 和 Codeigniter 的新手。我想知道如何将 JavaScript 确认（是/否）传递给 Codeigniter 控制器。

例如我有一个链接

`Update all records`. （如何链接这个？）。

一旦用户单击它，就会弹出一条消息，上面写着`Are you sure?`。如果是，那么它将被传递给控制器​​/模型并进行更新，如果不是，它将保持在同一页面上。

或者有人可以教我其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:50:47.143

你用什么？单选按钮？如果是，只需在单选按钮标签上方添加表单标签。

这是示例

```
<form name = "yesno" action = "<?php site_url('check/yesorno') ?>" method = "post">
    <input type = "radio" name = "yesorno" value = "yes" onclick = "this.form.submit()">Yes
    <br>
    <input type = "radio" name = "yesorno" value = "no" onclick = "this.form.submit">No
</form>

/*Note:
Form name = name of form
action = destionation url (site_url(yourController/yourFunction))
method = post/get
onclick = javascript event (will execute the code when user click)
this.form.submit() = javascript dom, means submit the your form when specified event executed*/ 
```

如果你想使用 ajax 的代码

```
//first->create the object
//for chrome, firefox, etc
if(window.XMLHttpRequest)
{
   xmlhttp = new XMLHttpRequest();
}
//fro ie, etc
else
{
   xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

    //to get response from php
xmlhttp.onreadystatechange = function()
{
    if(xmlhttp.readyState == 4 && xmlhttp.status == 200)
    {
    //your code here
    }
}

    //open connection
    xmlhttp.open("GET","../project_php/login.php",true);
xmlhttp.send();

/*Note:
  GET -> method
  2nd paramater(../project_php/login.php) -> destination url
  3rd parameter -> true or false (use true!)

  on "your code here" comment, add your code if response from php successfully received.
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:42:41.820

这是我能找到的最简单的解决方案，您可以在[http://jsbin.com/ecimiw/1/edit看到现场演示](http://jsbin.com/ecimiw/1/edit)

我使用 jQuery 来简化事情:)

一般来说。我`preventDefault()`用来防止浏览器立即更改页面。之后，显示一个`confirm`框。如果用户单击`yes`（同意），则将 broser 更改为`href`单击`a`元素中的 url。

这里最重要的是 jQuery 和一个你需要确认的所有链接的类名（在这个演示中，我使用`need-confirm`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:18:58.813

您可以使用如下链接提交表单：

```
<a href="javascript:{}" onclick="formanName.submit();"> linktext </a> 
```

要在发送前要求确认，您可以尝试：

```
<a href="javascript:{}" onclick="if(confirm('Message?')) { formName.submit();}"> linktext </a> 
```

`formName`您要提交的表单的名称在哪里。我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T05:54:09.100

非常感谢您为回答我的问题所做的所有努力，我从您那里得到了一个想法。这是我的解决方案。

我的链接是

id="my_link" href="controller/function" onclick="return Confirm('Are you sure?');"> 点击这里

它工作正常它进入控制器/功能并进行更新

感谢大家

# javascript - Java script Alert ok 按钮时页面回发错误

> ID：14413259
> 
> 赞同：-1
> 
> 时间：2013-01-19T10:14:55.023
> 
> 标签：javascript, asp.net, c#-4.0

我正在使用 Javascript 在页面中显示警报，请在检查纬度 Logitude 时填写有效地址

```
 ScriptManager.RegisterStartupScript(this, this.GetType(), "Redit", "alert('Please first fill all address details.'); window.location='" + Request.ApplicationPath + "Home.aspx';", true); 
```

当此警报显示如果我们单击确定然后页面是回发并清空所有其他 Tesxbox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:26:36.080

它不是让回帖，而是页面重新加载，因为你有权利`window.location=`告诉浏览器再次加载该页面，自然一切都丢失了。

只保留警报，如果您喜欢后面的代码，请进行更改，因为无论如何您都使用后面的代码来显示该警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:27:11.363

似乎问题在于，在发出警报后，您使用以下代码更改了当前位置：

```
window.location='" + Request.ApplicationPath + "Home.aspx';" 
```

如果删除此行，问题是否会重现？

# html - 加载资源失败：服务器响应状态为 403（禁止），包括 css 文件和 js 库

> ID：14413260
> 
> 赞同：4
> 
> 时间：2013-01-19T10:15:06.223
> 
> 标签：html, codeigniter, permissions, localhost, easyphp

我开始使用 codeigniter 进行开发，并且我正在做一些基本的事情来使用 easyphp 在 localhost 上学习它（我遇到了 WAMP 服务器的错误）。

我创建文件夹“libraries/js/jquery-1.9.0.min.js”和“views/templates/css/style.css”，并在标题中包含文件：

```
<link type="text/css" href="application/views/templates/css/style.css" rel="stylesheet" />
<script type="text/javascript" src="application/libraries/js/jquery-1.9.0.min.js"></script> 
```

服务器返回给我以下错误：

```
GET http://127.0.0.1:8887/CodeIgniter_2.1.3/application/libraries/js/jquery-1.9.0.min.js 403 (Forbidden)
GET http://127.0.0.1:8887/CodeIgniter_2.1.3/application/views/tamplates/css/style.css 403 (Forbidden) 
```

我搜索了信息，可能是文件中的权限问题，但以前从未发生在我身上……在远程服务器中，我可以通过 ftp 访问并更改权限，但是如何在 localhost 上执行此操作？如果那是问题..

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:41:13.167

我在这里找到了解决方案：

[我在 Codeigniter 中将图像文件、css、js 等放在哪里？](https://stackoverflow.com/questions/6630770/where-do-i-put-image-files-css-etc-in-code-igniter)

所有人都将这类文件放在了 codeigniter 框架之外，我制作了它，现在它可以工作了。

谢谢您的帮助。

PD：现在我正在与助手创建作斗争：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:08:39.580

一点点谷歌搜索可能就足够了：[如何在 Windows XP 中设置、查看、更改或删除文件和文件夹的特殊权限](http://support.microsoft.com/kb/308419)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-11T03:32:14.423

如果您使用的是 macOS，只需右键单击 js 和 css 文件所在的文件夹，然后单击获取信息并勾选共享文件夹复选框。

# asp.net - 如何在我的asp：aspx页面上的文本框中获取键的值？

> ID：14413263
> 
> 赞同：0
> 
> 时间：2013-01-19T10:15:29.143
> 
> 标签：asp.net, sql, wcf

我正在开发 HRM 系统，但我遇到了一个问题。

普通用户有一个设置最大和最小假期的页面（可以由管理员设置）。我想限制他不能输入超过 1 n 的用户不能输入超过 10 的最大限制。

我可以简单地通过验证来做到这一点，但由于我的客户，我正在以不同的方式做到这一点。我在 中创建了一个公钥`Bo layer`并定义了`db`.

我想知道如何在 key 的帮助下调用值。

**代码：**

```
namespace HRMS.BO
{
    public class ConfigurationKey
    {
        public const string LeaveWeeklyOffMaxDays = "LeaveWeeklyOffMaxDays";
        public const string LeaveTypeAccrualMinDays = "LeaveTypeAccrualMinDays";
        public const string LeaveTypeAccrualMaxDays = "LeaveTypeAccrualMaxDays";
    }
} 
```

我想将文本框放在更新面板中的键更改上，它将输入的值与`db`值进行比较，并在比较的基础上显示隐藏标签。

# mysql - mysql日志系统

> ID：14413267
> 
> 赞同：0
> 
> 时间：2013-01-19T10:16:18.917
> 
> 标签：mysql, logging

我在 my.ini 文件中为 mysql 设置了 log = "c:/xampp/mysql.log"。但它只是记录连接并且那里没有查询。我接下来该怎么做？我也使用了 general_log =1 ，它也没有工作。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:25:41.493

如果您使用 MySQL v5.1.29 或更高版本，您应该使用[`general_log_file`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_general_log_file)系统变量指定所需的位置。

如果您使用 MySQL v5.5，您还应该确保将[`log_output`](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_log-output)其设置为`FILE`.

# javascript - 如果 Google Analytics（分析）出现故障，我如何让我的网站正常运行？

> ID：14413271
> 
> 赞同：13
> 
> 时间：2013-01-19T10:16:57.477
> 
> 标签：javascript, jquery, ajax, asynchronous, google-analytics

好的，现在是 2013 年 1 月 19 日 22:30 NZST，由于 Google Analytics 的运行速度似乎非常缓慢，因此大多数互联网似乎都陷入了困境。Stackoverflow、Firefox.com、reddit 和谷歌搜索速度很慢。对我来说最重要的是，我的生产业务网站运行缓慢或根本没有加载。不，这不仅仅是我的连接，我也在我的手机上用 3G 测试了它。没有 Google Analytics 的网站似乎运行良好。

**这是发生的一些屏幕截图**

它位于 Firefox 窗口的左下角。它会像那样坐在那里 20 多秒。如果无法连接，我希望它在 3 秒后消失。

![在此处输入图像描述](../Images/854a08fd6f0bcb23d6e4276f9f09e36a.png)

这个旋转的绿色图像位于 Firefox 选项卡中，只是坐在那里，看起来页面仍在加载 20 多秒。如果无法连接，我希望它在 3 秒后消失。

![在此处输入图像描述](../Images/93d74ca32f050c5e546434a4791ac431.png)

现在可能不是谷歌分析，我国家的国际网关可能运行缓慢或其他什么。但有证据强烈表明它可能是谷歌分析。现在，即使它不是谷歌分析，如果服务完全关闭，我仍然会对一些方法来应对它感兴趣。所以假设我们假设谷歌分析的数据中心发生了一场大火，灭火系统发生了故障。现在谷歌分析完全离线了几天。没有备份服务器。没有备用数据中心。假设场景ok。现在我的网站仍然需要运行，因为我无法让我的网站依赖于谷歌分析服务。但是，如果服务实际上是及时运行的，那么分析功能将是一个额外的好处。

好的，所以我在这里抛出一些想法：

1.  是否有一个超时我可以添加到我的脚本中，如果它花费的时间太长，它将取消与 Google Analytics 的连接并停止请求/下载？然后它将在 2 秒后继续加载我的网站。
2.  或者更好的是，也许它可以完全加载我的网站，然后在我的网站完全加载完成后使用 Ajax 向 Google Analytics 发送请求？为什么默认情况下不这样做？

这是我们必须使用的代码，当前插入到结束`</body>`标记之前。

```
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-123456789-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script> 
```

现在，我可以采用哪些方法来修复这种假设的灾难场景并在 Google Analytics 关闭时让我的网站保持连续性？我对潜在的软件或硬件解决方案感兴趣。假设我可以完全访问运行我的 PHP/MySQL/HTML5 网站的 Linux VPS。

另外，对此的权威答案是什么：有人说将代码放在结束`</head>`标记之前。其他人说把它放在结束`</body>`标签之前。哪个是最好的方法？

非常感谢

***解决方案更新***

好的，我在 Jaspal 的帮助下找到了有效的方法。解决方案如下。

```
<script type="text/javascript">
    // Load Google Analytics after my site has completely loaded
    // Then when Google Analytics request is made it won't show any visuals in the browser
    setTimeout(loadGoogleAnalytics, 5000);

    // Setup _gaq array as global so that the code in the ga.js file can access it
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-123456789-1']);
    _gaq.push(['_trackPageview']);

    /**
     * Loads Google Analytics
     */
    function loadGoogleAnalytics()
    {
        var srcUrl = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

        $.ajax(
        {
            url: srcUrl,
            cache: true,
            dataType: "script",
            success: function(data)
            {
                console.log('got the script');
            },
            error: function()
            {
                console.log('failed to get the script');
            },
            timeout: 5000
        });
    };
</script> 
```

基本上它起作用的原因是因为有一个 5 秒的 setTimeout。这让我的页面有足够的时间来加载所有内容、JS、CSS、图像等。然后它会启动 $.ajax 请求并下载 ga.js 和 __utm.gif，这实际上是将数据发送到 Google Analytics。在最初的 5 秒之后，基本上我之前提到的所有浏览器视觉效果都消失了，Google Analytics 请求在后台静默发生，浏览器用户没有加载视觉效果。然后我尝试用主机文件阻止谷歌分析，但我仍然没有得到任何浏览器视觉效果——完美。

应该注意的是[$.ajax](http://api.jquery.com/jQuery.ajax/)`timeout: 5000`请求中的属性似乎没有做任何事情。最初我希望它会在 5 秒内无法获取数据时中止请求，但 API 文档中有一条注释说

> 仅在 Firefox 3.0+ 中，脚本和 JSONP 请求不能被超时取消；即使脚本在超时期限之后到达，它也会运行。

无论如何我都会把它留在那儿以防万一。根据我的测试，如果无法访问 Google Analytics（通过观察 Firebug/Chrome 中的网络/网络面板），它将在 Firefox 中 21-23 秒和 Chrome 中 16 秒后中止请求。这可能是一些 TCP 超时。无论如何，我并不担心，因为它会静默超时，并且用户不会注意到，因为浏览器中没有加载视觉效果。

我在下面接受了 Jaspal 的回答并授予他赏金，因为他的解决方案对于解决这个问题至关重要。然而，他的解决方案仍然在浏览器中显示加载视觉效果。所以我相信这里使用 setTimeout 发布的解决方案（对他的原始解决方案稍作修改）是可行的方法，并且经过测试可以 100% 为我工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T10:19:47.700

鉴于它的加载位置，您网站的其余部分将在向 Google Analytics 请求之前加载。另外 GA 是异步加载的，不会停止任何代码的执行，所以我真的不认为有问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-26T13:17:38.623

最新方法：

1.  我们允许 ga 正常加载。
2.  我们将 ga dom 元素的引用存储在全局变量 (gaClone) 中。
3.  我们将超时设置为 30 秒。我们还设置了另一个全局变量（loadedGoogleAnalytics）并最初将其设置为 0。当 ga 加载时，我们将此变量设置为 1。在超时到期时，我们检查 ga 是否已加载。如果不是，我们删除 dom 元素 ga。

    ```
    <script type="text/javascript">
        var loadedGoogleAnalytics = 0;
        var gaClone;
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-123456789-1']);
        _gaq.push(['_trackPageview']);

        _gaq.push(function() {
            loadedGoogleAnalytics = 1;
            //console.log('GA Actualy executed!');
        });

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

            gaClone = ga;

        })();

        setTimeout(function() {
            //console.log('timeout fired');
            if (loadedGoogleAnalytics != 1) {
                gaClone.parentNode.removeChild(gaClone); 
            }
        }, 30000);
    </script> 
    ```

[我已经用我的一个实际 GA 帐户验证了这种方法，并且我能够看到所有实时跟踪]

以前的方法 [注意：如果我们尝试将它放在 (document).ready(); 中，Ga 不会执行] [此解决方案不起作用]

```
<script type="text/javascript">
    $(document).ready(function() {
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-123456789-1']);
            _gaq.push(['_trackPageview']);

            srcUrl = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

            $.ajax({
                url: srcUrl,
                cache: true,
                dataType: "script",
                success: function(data) {
                    //console.log('got the script');
                },
                error: function() {
                    //console.log('failed to get the script');
                },
                timeout: 30000
            });
        });
</script> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T17:02:44.373

`www.google-analytics.com/ga.js`您可以在自己的服务器上托管副本并从那里加载。如果您确实走这条路，我会设置一个 cron 作业来定期获取 ga.js 以确保您拥有最新版本。

关于跟踪代码放置：将跟踪代码放置在页面较早（之前）的主要原因之一`</head>`与快速离开页面的访问者有关（可能在整个页面呈现之前）。在这种情况下，您越早执行跟踪代码，就越有可能收集一些数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T15:33:22.400

## 试图修复没有损坏的东西

如果您想使用谷歌分析，您将需要与那里的服务器进行某种方式的通信。正如许多其他答案所指出的那样，那里的服务是**异步**运行的，这意味着它不会阻止您的网站运行任何东西。“正在加载的视觉效果”是为了显示正在加载的东西……您对此无能为力。

你有两个选择；忍受谷歌分析或使用一些服务器端脚本来运行分析。

如果网站挂起，那是因为其他原因。

# 编辑

同样不立即包括 GA 也会降低统计数据的准确性；特别是跳出率将不正确。

# mysql - 分配后我在选择标签中获得价值 它不应该显示在选择标签中

> ID：14413272
> 
> 赞同：0
> 
> 时间：2013-01-19T10:16:59.047
> 
> 标签：mysql, sql, jsp

****父表**** : 车辆

```
CREATE TABLE `vehicle` (
    `vehicle_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `version_number` INT(10) UNSIGNED NULL DEFAULT '0',
    `vehicle_no` VARCHAR(64) NOT NULL COLLATE 'utf8_bin',
    `vehicle_reg_no` VARCHAR(64) NOT NULL COLLATE 'utf8_bin',
    `vehicle_name` VARCHAR(64) NOT NULL COLLATE 'utf8_bin',
    `total_seat` INT(15) NOT NULL,
    `route_id` INT(10) UNSIGNED NOT NULL,
    `available_seat` INT(10) UNSIGNED NOT NULL,
    PRIMARY KEY (`vehicle_id`)
) 
```

* * *

**子表：** allocate_vehicle

```
CREATE TABLE `allocate_driver` (
    `allocate_driver_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `version_number` INT(10) UNSIGNED NULL DEFAULT '0',
    `vehicle_id` INT(10) UNSIGNED NOT NULL,
    PRIMARY KEY (`allocate_driver_id`),
    INDEX `fk_vehicle_idx` (`vehicle_id`),
     CONSTRAINT `fk_vehicle_idx` FOREIGN KEY (`vehicle_id`) REFERENCES `vehicle` (`vehicle_id`) ON UPDATE NO ACTION ON DELETE NO ACTION,

) 
```

* * *

所以我给出了这个查询：`select veh.* from vehicle as veh JOIN allocate_driver as allDr on veh.vehicle_id!=allDr.vehicle_id`

但不能正常工作......在插入之前，我想要在分配每辆车后它不应该显示在列表中的车辆列表..任何人都可以告诉我..提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:34:40.057

如果我理解正确，您想找到未分配给`any`驾驶员的车辆。您的查询将找到未分配给`some`司机的车辆（并将为每个司机返回一次）。

那么这个查询应该给你你想要的：

```
SELECT veh.* FROM vehicle AS veh
LEFT JOIN allocate_driver as allDr 
ON veh.vehicle_id = allDr.vehicle_id
WHERE allDr.vehicle_id IS NULL 
```

# android - 索尼智能手表 - 在小部件点击时振动智能手表

> ID：14413277
> 
> 赞同：0
> 
> 时间：2013-01-19T10:17:34.963
> 
> 标签：android, widget, sony, sony-smartwatch

我正在尝试开发一个可以随时发送短信的小部件扩展。这工作得很好，但我想通过振动智能手表来确认短信已发送。我可以从小部件扩展启动振动器吗？

据我了解，向主机应用发送意图应该足以启动振动。

在我的课堂上扩展 WidgetExtension onTouch：

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage("124124512", null, "blaa", null, null); // Works fine

Intent intent = new Intent(Control.Intents.CONTROL_VIBRATE_INTENT);
intent.putExtra(Control.Intents.EXTRA_ON_DURATION, 1000);
intent.putExtra(Control.Intents.EXTRA_OFF_DURATION, 1000);
intent.putExtra(Control.Intents.EXTRA_REPEATS, 1);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, mContext.getPackageName());
intent.setPackage(mHostAppPackageName);
context.sendBroadcast(intent, Registration.HOSTAPP_PERMISSION); // No vibration 
```

我还尝试创建扩展 ControlExtension 的单独振动器类：

```
public class Vibrator extends ControlExtension{

    public Vibrator(Context context, String hostAppPackageName) {
        super(context, hostAppPackageName);
        // TODO Auto-generated constructor stub
    }

    public void vibrate(){
        startVibrator(1000, 1000, 1);
    }

} 
```

并从小部件扩展中触发振动而没有效果。我忽略了什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:37:17.803

似乎在小部件触摸上启动振动的唯一方法是启动一个单独的 ControlExtension：

小部件 onTouch：

```
Intent intent = new Intent(Control.Intents.CONTROL_START_REQUEST_INTENT);
intent.putExtra(Control.Intents.EXTRA_AEA_PACKAGE_NAME, mContext.getPackageName());
sendToHostApp(intent); 
```

在注册信息中：

将 getRquiredControlApiVersion 设置为返回 1。

并在 ExtensionService 添加：

```
@Override
public ControlExtension createControlExtension(String hostAppPackageName) {
    return new Vibrator(hostAppPackageName, this);
} 
```

和振动器类：

```
public class Vibrator extends ControlExtension{

Vibrator(String hostAppPackageName, Context context){
    super(context, hostAppPackageName); 

}   

 @Override
    public void onStart() {
        vibrate();
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage("123456789", null, "BLAAA", null, null); 
        showBitmap(new SmartWatchSampleWidgetImage(mContext, 2).getBitmap());
    }

 @Override
    public void onTouch(final ControlTouchEvent event) {
        int action = event.getAction();
        if (action == Control.Intents.TOUCH_ACTION_PRESS) {

        }      
 }

public void vibrate(){

     if(hasVibrator()){
            startVibrator(1000, 500, 3);
     }
}
} 
```

做这项工作。

# python - 将 BeautifulSoup 内容写入文件

> ID：14413287
> 
> 赞同：0
> 
> 时间：2013-01-19T10:19:11.390
> 
> 标签：python, web-scraping, beautifulsoup

我最近问[了这个](https://stackoverflow.com/questions/14412907/handling-indian-languages-in-beautifulsoup/14412961#14412961)关于在 BeautifulSoup 中编码印地语字符的问题。该问题的答案确实解决了该问题，但是我还有另一个问题。

我的代码是：

```
import urllib2
from bs4 import BeautifulSoup

htmlUrl = "http://archives.ndtv.com/articles/2012-01.html"
FileName = "NDTV_2012_01.txt"

fptr = open(FileName, "w")
fptr.seek(0)

page = urllib2.urlopen(htmlUrl)
soup = BeautifulSoup(page, from_encoding="UTF-8")

li = soup.findAll( 'li')
for link_tag in li:
  hypref = link_tag.find('a').contents[0]
  strhyp = hypref.encode('utf-8')
  fptr.write(strhyp)
  fptr.write("\n") 
```

我得到一个错误

```
Traceback (most recent call last):
File "./ScrapeTemplate.py", line 29, in <module>
hypref = link_tag.find('a').contents[0]
IndexError: list index out of range 
```

当我替换`print strhyp`而不是`fptr.write()`. 我该如何解决？

**编辑：**代码中有一个我没有发现的错误。修复了它，但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:26:36.227

您的错误的原因与写入文件没有任何关系。`link_tag.find('a').contents`当您尝试获取第一项时，似乎有时会返回一个空列表并给出错误。你可以尝试这样的事情：

```
for link_tag in li:
    try:
        hypref = link_tag.find('a').contents[0]
    except IndexError:
        print link_tag #print link tag where it couldn't extract the 'a'
        continue
    strhyp = hypref.encode('utf-8')
    fptr.write(strhyp)
    fptr.write("\n") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:54:09.220

您的代码绊倒了页面底部的链接。跳过这些：

```
for link_tag in li:
  contents = link_tag.find('a').contents
  if len(contents) > 0:
    hypref = contents[0]
    strhyp = hypref.encode('utf-8')
    fptr.write(strhyp)
    fptr.write("\n") 
```

# python - urlopen 出错：在未引用的字段中看到换行符

> ID：14413288
> 
> 赞同：1
> 
> 时间：2013-01-19T10:19:22.903
> 
> 标签：python, csv, newline, urllib, urlopen

我正在使用带有 Python 2.7 的 urllib.urlopen 来读取位于外部网络服务器上的 csv 文件：

```
# Try & Except statements removed for clarity
import urllib
import csv
url = ...
csv_file = urllib.urlopen(url)
for row in csv.reader(csv_file):
    do_something() 
```

所有 100 多个文件都可以正常读取，但最近更新并返回的文件除外：

```
Error: new-line character seen in unquoted field - do you need to open the file in universal-newline mode? 
```

该文件可[在此处](http://www.football-data.co.uk/mmz4281/1213/I1.csv)访问。根据我的文本编辑器，它的模式是 Mac (CR)，而不是其他文件的 Windows (CRLF)。

我发现基于[这个线程](https://stackoverflow.com/questions/8221296/how-can-i-download-and-read-a-url-with-universal-newlines)，python urlopen 将正确处理所有格式的换行符。因此，问题很可能来自其他地方。不过我不知道。该文件可以使用我的所有文本编辑器和电子表格编辑器正常打开。

有谁知道如何诊断问题？

*** 编辑 ***

该文件的创建者通过电子邮件通知我，我不是唯一遇到此类问题的人。因此，他决定再做一次。上面的代码现在又可以正常工作了。不幸的是，使用新文件也意味着无法再重现该问题，并且解决方案已正确测试。

在结束问题之前，我要感谢所有花费一些时间来找出解决方案并将其发布在此处的堆垛机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:08:17.183

以下代码运行没有任何错误：

```
#!/usr/bin/env python
import csv
import urllib2

r = urllib2.urlopen('http://www.football-data.co.uk/mmz4281/1213/I1.csv')
for row in csv.reader(r):
    print row 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:19:05.983

它可能是一个损坏的 .csv 文件？否则，此代码将完美运行。

```
#!/usr/bin/python

import urllib
import csv

url = "http://www.football-data.co.uk/mmz4281/1213/I1.csv"
csv_file = urllib.urlopen(url)

for row in csv.reader(csv_file):
  print row 
```

.csv 文件感谢[JF Sebastian](https://stackoverflow.com/users/4279/j-f-sebastian)。

尽管如此，您可能想考虑与我们共享特定的 .csv 文件？所以我们可以尝试重新创建错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T18:42:01.657

我在下载的 csv 时遇到了同样的问题。

我知道解决方法是将 open 与“rU”一起使用。但我宁愿不必将文件保存到磁盘，只是为了打开一个变量。这似乎是不必要的。

```
file = open(filepath,'rU')
mydata = csv.reader(file) 
```

~~因此，如果有人有更好的解决方案，那就太好了。让我走到这一步的 Stackoverflow 链接：~~

[在未引用的字段错误中看到 CSV 换行符](https://stackoverflow.com/questions/17315635/csv-new-line-character-seen-in-unquoted-field-error)

~~[使用 CSV Django 模块以通用换行模式打开文件，](https://stackoverflow.com/questions/6726953/open-the-file-in-universal-newline-mode-using-csv-module-django)~~

**我找到了我真正想要的 stringIO、cStringIO 或 io：**

[使用 Python，我如何像使用文件一样读取/写入内存中的数据？](https://stackoverflow.com/questions/1883326/using-python-how-do-i-to-read-write-data-in-memory-like-i-would-with-a-file)

我最终让 io 工作，

```
import csv
import urllib2
import io
# warning its a 20MB csv
url = 'http://poweredgec.com/latest_poweredge-11g.csv'
urlRead = urllib2.urlopen(url).read()
ramFile = io.open(urlRead, mode='w')
openRamFile = open(ramFile, 'rU')
csvCurrent = csv.reader(openRamFile)
csvTuple = map(tuple, csvCurrent)

print csvTuple 
```

# ruby-on-rails - 强制从 link_to helper 重定向到特定控制器

> ID：14413291
> 
> 赞同：1
> 
> 时间：2013-01-19T10:19:38.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

在我的视图文件中，我有这样的代码：

```
 <td><%= link_to 'Destroy', link, method: :delete, data: { confirm: 'Are you sure ?' } %></td> 
```

因此，单击此按钮后，它将删除该特定数据表单数据库。但是此代码位于使用配置文件控制器生成的名为**profiles/index.html.erb的文件中。**

现在点击破坏链接后，控件将转到**links_controller.rb**而不是**profiles_controller.rb**。但我希望它被重定向到**profile_controller.rb**，这样我就可以`destroy`在我的配置文件控制器中删除我的操作时执行某些操作，然后重定向到**profiles/index.html.erb**，而不是**links/index.html.erb**。这该怎么做？？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:22:01.383

to的第二个参数`link_to`是链接的目的地，即。你链接到什么 - 听起来你链接到错误的地方。

如果您想链接到配置文件控制器，您需要这样做（即更改`link`为配置文件控制器正确操作的路径）。

# node.js - 重定向用户请求，nodeJS

> ID：14413303
> 
> 赞同：0
> 
> 时间：2013-01-19T10:20:24.930
> 
> 标签：node.js, email, redirect, webserver

我正在构建一个基于 nodeJS（作业）的小型电子邮件服务器。当用户尝试登录时，我会检查他是否有帐户，然后将他重定向到`/user/userName`. 我将响应状态设置为`201 Created`，然后添加了一个标头`Location: /user/userName`

我在 chrome 的开发人员工具中检查了响应是我发送的内容，但位置没有改变。任何想法为什么，或如何做得更好？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:39:32.853

永久重定向的 HTTP 响应代码是`301`，不是`201`。您的浏览器不会使用`location`标头通过`201`. 但是，在更改为 之前`301`，请确保您不想要临时重定向，或者`302`，改为！

# android - 如何在 NumberFormat.getPercentInstance() 中交换 %

> ID：14413306
> 
> 赞同：1
> 
> 时间：2013-01-19T10:20:55.533
> 
> 标签：android

我`NumberFormat.getPercentInstance()`用于格式化整数以获得**100 %**。

我使用的代码是

```
 NumberFormat mProgressPercentFormat = NumberFormat.getPercentInstance();
    mProgressPercentFormat.setMaximumFractionDigits(0);
    String text = mProgressPercentFormat.format(100); 
```

结果： **100 %**

预期结果： **% 100**

谁能告诉我如何在 NumberFormat 本身或任何其他替代解决方案中进行格式化。

```
My main goal to switch % infront of number based on Locale change. 
```

例如：英语：100 %

阿拉伯语：% 100

# c++ - 向后读取文件的适当 madvise 设置是什么？

> ID：14413307
> 
> 赞同：2
> 
> 时间：2013-01-19T10:20:59.043
> 
> 标签：c++, c++11, mmap

我在 64 位 Linux 机器上使用 gcc 4.7.2。

我有 20 个已排序的大型二进制 POD 文件，我需要将它们作为外部合并排序中最终合并的一部分进行读取。

通常，我会`mmap`读取所有文件并使用 a`multiset<T,LessThan>`来管理从小到大的合并排序，然后再`mmap`写入磁盘。

但是，我意识到，如果我`std::mutex`对这些文件中的每一个都保留 a，我可以创建第二个线程来向后读取文件，并同时从大到小排序。如果我事先决定第一个线程将恰好采用 n/2 个元素，而第二个线程将采用其余元素，那么我将不需要在事物的输出端使用互斥锁。

在这种特殊情况下，平均而言，可能会发生读锁争用，可能会发生 20 次，所以这是可以接受的。

现在，这是我的问题。在第一种情况下，很明显我应该调用`madvise`with `MADV_SEQUENTIAL`，**但我不知道在第二种情况下我应该做什么，我正在向后读取文件。**

我`MADV_REVERSE`在手册页中没有看到。我应该使用`MADV_NORMAL`还是根本不打电话`madvise`？

回想一下，当数据量大到无法放入内存时，就需要进行外部排序。所以我们剩下一个更复杂的算法来使用磁盘作为临时存储。分而治之的算法通常涉及分解数据、进行部分排序，然后合并部分排序。

**我的外部合并排序步骤**

1.  取 n=10 亿个随机数并将它们分成 20 个大小相等的碎片。
2.  将每个分片从小到大单独排序，并将每个分片写入自己的文件。
3.  打开 40 个 mmap，每个文件 2 个，前进一个，后退一个，每个文件关联一个互斥体。
4.  `std::multiset<T,LessThan> buff_fwd;`为正向线程实例化 a ，`std::multiset<T,GreaterThan> buff_rev`为反向线程实例化 a。有些人更喜欢在这里使用优先级队列，但本质上，插入排序容器将在这里工作。
5.  我喜欢称这两个缓冲区为表面和底部，表示尚未添加到最终排序中的最小和最大数字。
6.  从分片中添加项目直到 n/2 用完，然后在另一个线程中使用 mmap 从开始到中间，从末端到中间将分片刷新到一个输出文件。您基本上可以随意刷新，但至少应该在任一缓冲区占用过多内存之前执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:39:43.260

我会建议：

```
MADV_RANDOM 
```

防止无用的预读（方向错误）。

# ruby - 回溯与正则表达式中的反向引用有何不同？

> ID：14413308
> 
> 赞同：1
> 
> 时间：2013-01-19T10:21:09.687
> 
> 标签：ruby, regex

1.  ***回溯与正则表达式中的反向引用有何不同？***

2.  ***回溯如何在回溯中赢得限制，反之亦然？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T10:34:56.887

回溯是状态机备份并重试正则表达式的其他匹配的一种方式。这几乎是正则表达式引擎*内部的东西。*

例如，假设您正在尝试匹配正则表达式`[a-z]*a`，任意数量的小写字符后跟一个`a`.

给定 input `abca`，贪婪匹配会将所有这些分配给`[a-z]`正则表达式的一部分，但是没有办法匹配 final `a`。回溯允许引擎通过将最终结果返回`a`到输入流并再次尝试进行备份，分配`abc`给`[a-z]`部分和`a`部分`a`。

* * *

另一方面，反向引用是正则表达式引擎的*用户*引用先前捕获的组的一种方式。例如，

```
s/^([a-z])([a-z])/\1_\2/
  \_____/\_____/
     |      |
     |      +- capture group 2
     +-------- capture group 1 
```

可能是`_`在每行开头的两个连续小写字母之间插入的命令。`\N`反向引用（其中代表`N`一个数字）指回在`()`.

# html - IE中无法点击的链接

> ID：14413309
> 
> 赞同：4
> 
> 时间：2013-01-19T10:21:19.953
> 
> 标签：html, css, internet-explorer

我在这个网站[http://zap3d.com/](http://zap3d.com/)上工作，但我遇到了一个问题：使用 Internet Explorer (IE) 我无法单击两个链接（上传和下载），但使用 Chrome 和 Firefox 我可以。

这是我上传按钮的 CSS

```
<a href="/User/Upload/" class="button_big upload_button"></a> 
```

```
.upload_button {
    position: absolute;
    left: 47px;
    bottom: 28px;
    width: 237px;
    height: 41px;
    border: none;
    background: transparent;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T10:23:22.163

某些版本的 Internet Explorer 可能不会记录对具有透明背景且其中没有内容的元素的点击。在这些情况下，将元素的不透明度设置为零：

```
.upload_button {
    opacity: 0;
} 
```

您将获得相同的*隐形元素*效果，同时保持跨浏览器兼容性。

# django - Django - 国际化不起作用

> ID：14413316
> 
> 赞同：1
> 
> 时间：2013-01-19T10:22:09.093
> 
> 标签：django, internationalization

我有以下代码行，它基本上返回一个错误 - 一个翻译错误 - 以及在失败情况下的视图：

```
from django.utils.translation import ugettext_lazy as _
.....

return render_to_response('login.html',{'form': form,'error_message':_("User is not in the group %s" % group_name),'settings':SettingsManager.get()},context_instance=RequestContext(request)) 
```

我创建了消息文件，并编译了它们。但问题是它只在我写的时候显示 - 用英语，`User is not in the group %s" % group_name`. 我的 django.po 文件的一部分：

```
#: application/views.py:1003
#, python-format
msgid "User is not in the group %s"
msgstr "Kullanıcı %s grubunda değil." 
```

任何想法如何解决它？我看不到问题所在。

PS：**所有其他翻译都像魅力一样工作，但这个不是。**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:33:08.927

尝试

```
_("User is not in the group %s") % group_name 
```

代替

```
_("User is not in the group %s" % group_name) 
```

这样翻译机器就有一个恒定的字符串来查找。

# iphone - 在 UITableViewCellAccessoryDe tailDisclosureButton 下显示 UIMenuController

> ID：14413317
> 
> 赞同：1
> 
> 时间：2013-01-19T10:22:18.957
> 
> 标签：iphone, ios, objective-c, xcode

单击时如何在 UITableViewCellAccessoryDe​​tailDisclosureButton 下显示 UIMenuController？

[当用户点击 UITableViewCellAccessoryDe​​tailDisclosureButton 时，有一个关于如何显示选项](https://stackoverflow.com/questions/7657818/how-to-show-options-when-a-user-clicks-on-uitableviewcellaccessorydetaildisclosu)的答案代码，但它没有“AddRouteMenuItem”，有人知道吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:27:17.330

```
-(void)clickOnDetailDisclosureButton
{
   UIMenuController *menuController = [UIMenuController sharedMenuController];
    [menuController setTargetRect:[self.tableView rectForRowAtIndexPath:pressedIndexPath] inView:self.tableView];
    [menuController setMenuVisible:YES animated:YES];
} 
```

# php - 如何将我的 FTP 中的 2 个图像与 PHP 进行比较？

> ID：14413321
> 
> 赞同：0
> 
> 时间：2013-01-19T10:23:40.440
> 
> 标签：php, image, ftp

我的 FTP 中有 2 张图片：/var/www/image1.jpg 和 /home/image2.jpg

我需要在 PHP 脚本中比较这两个图像是否相同：

```
if(/var/www/image1.jpg == /home/image2.jpg){
    /blabla
} 
```

我不想知道这些差异，我只需要知道它们是否相同，你有什么想法吗？

谢谢 ！

编辑 ：

我在 PHP 中使用它来检索图像并上传到我的 FTP 上：

```
exec("wget -O ".$PATH."image.jpg --user=**** --password='****' http://URL"); 
```

我需要知道在我的命令 exec() 之后旧的 $PATH."image.jpg 是否与新的 $PATH."image.jpg 完全相同。

如果是，我 sleep() 几秒钟......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:25:58.930

您可以检查两个文件内容的哈希码（例如 MD5、SHA1）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:27:15.500

您可以生成文件的哈希值并检查它们是否相等，如果相等，它们可能相同。

```
if (sha1_file("path to to file 1") == sha1_file("path to t file 2")) 
    echo "Same"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:26:15.187

我认为了解它们是否是精确副本的最简单方法是读取文件并根据其内容创建哈希。比较返回的哈希。

# c++ - 如何创建缓冲序列

> ID：14413322
> 
> 赞同：2
> 
> 时间：2013-01-19T10:23:53.240
> 
> 标签：c++, boost-asio

有`boost::asio::buffer`一个只有一个元素的缓冲区序列。是否有任何包装器允许从多个缓冲区创建缓冲区序列？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-19T13:47:21.100

没有包装器，但您可以在任何满足[MutableBufferSequence](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/MutableBufferSequence.html)和[ConstBufferSequence](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/ConstBufferSequence.html)概念要求的容器中提供多个缓冲区，例如`std::vector`、`std::list`或`boost::array`。大多数函数都是根据 BufferSequence 概念实现的，并[`boost::asio::buffer`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/buffer.html)提供了一种方便的方法来将单个缓冲区包装成满足要求的类型。本[文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/overview/core/buffers.html)简要提及它。

这是 Boost.Asio 序列化[示例](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/serialization/connection.hpp)的片段：

```
// Write the serialized data to the socket. We use "gather-write" to send
// both the header and the data in a single write operation.
std::vector<boost::asio::const_buffer> buffers;
buffers.push_back(boost::asio::buffer(outbound_header_));
buffers.push_back(boost::asio::buffer(outbound_data_));
boost::asio::async_write(socket_, buffers, handler); 
```

请注意，该`buffers`集合不需要保留在范围内，因为[文档](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/async_write/overload1.html)指出 Boost.Asio 可以根据需要创建副本。但是，底层内存`outbound_header_`和`outbound_data_`需要在调用处理程序之前保持有效。

# sql - 使用 ActiveRecord 加入“多次通过”关联

> ID：14413323
> 
> 赞同：0
> 
> 时间：2013-01-19T10:24:25.153
> 
> 标签：sql, ruby-on-rails, has-many-through, rails-activerecord

**使用从 API 导出的数据**

我正在构建一个排行榜，显示每个团队的 Team.name 以及选择该特定团队作为他们最爱的用户。我还填充了另一个属性 Favorite.points; 显示为相应团队积累的最多积分的用户。

以下是我正在使用的模型：

**收藏夹.rb**

```
class Favorite < ActiveRecord::Base
  belongs_to :users
  belongs_to :teams
end 
```

**团队.rb**

```
class Team < ActiveRecord::Base
  has_many :favorites
  has_many :users, :through => :favorites 
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  has_many :favorites
  has_many :teams, :through => :favorites 
end 
```

为了开始这个过程，我试图匹配 Team.external_id 和 Favorite.team_id 之间共有的 id（User.external_id => Favorites.user_id 也是如此）。我可以使用 Team.find_all_by_external_id(3333) 来获取所有具有 external_id 为“3333”的 Team 对象的 ID，Favorite.find_all_by_team_id 也是如此。

获取/显示我正在寻找的数据的下一个最佳步骤是什么？SQL 连接子句是最好的吗？还是编写 if 语句匹配值并遍历 JSON 数组更好？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T01:42:10.647

这将为您提供与表中行的属性`team_id`匹配的所有收藏夹，用于特定团队（此处为具有 id 的团队）：`external_id``teams``3333`

```
Favorite.joins("left outer join teams on teams.external_id = favorites.team_id")\
  .where('team_id' => 3333) 
```

正如我在评论中提到的那样，这里的棘手之处在于，当您将模型上的*外部*id `Team`（您创建的属性）与模型`team_id`上的`Favorite`（使用整个rails获取和分配关联）。

一旦您尝试真正获得您在上述加入中找到的最爱的团队，您就会看到问题：

```
f = Favorite.joins("left outer join teams on teams.external_id = favorites.team_id")\
     .where('team_id' => 3333).first
=> #<Favorite id: 1, user_id: nil, team_id: 3333, points: nil, created_at: ... >
f.team
  Team Load (0.3ms)  SELECT "teams".* FROM "teams" WHERE "teams"."id" = 3333 LIMIT 1
=> nil 
```

这里发生了什么？如果您仔细查看查询，您会发现 rails 正在选择3333 的团队`id`。请注意，它*不是*在寻找*外部*id 为 3333 的团队，这正是您想要的。

根本问题是您试图使用外部 id（特定于您的 API 的 id）进行关联，这是行不通的。事实上，没有理由这样做。

相反，试试这个：

```
Favorite.joins(:team).where('teams.external_id = 3333') 
```

这将为您提供所有其团队具有外部 id 3333 的收藏夹。请注意，Rails 将通过加入来做到这一点`teams.id = favorites.team_id`，*然后*过滤`teams.external_id`：

```
SELECT "favorites".* FROM "favorites" INNER JOIN "teams"
  ON "teams"."id" = "favorites"."team_id" WHERE (teams.external_id = 3333) 
```

你可以反过来做同样的事情：

```
Team.joins(:favorites).where('teams.external_id = 3333') 
```

这将生成 SQL：

```
SELECT "teams".* FROM "teams" INNER JOIN "favorites"
  ON "favorites"."team_id" = "teams"."id" WHERE (teams.external_id = 3333) 
```

再次注意，它是`id`连接中使用的，而不是外部 id。这是执行此操作的正确方法：`id`对您的关联使用常规，然后只需在必要时通过您的（自定义的、特定于 API 的）外部 id 进行过滤。

希望有帮助！

**更新**：

从评论看来，`team_id`您的`Favorite`模型上的 似乎是从 API 数据定义的，这意味着 id 对应于`external_id`您的`Team`模型。这是一个坏主意：在 rails 中，外键`<model name>_id`（`team_id`,`user_id`等）具有特定含义：id 被理解为映射到`id`相应关联模型的字段（`Team`）。

为了让您的关联起作用，您需要使用 ids（而不是外部 ids）用于*任何地方*的关联（也与您的`User`模型一起使用）。为此，您需要将 API 中定义的关联转换为 rails 应用程序中的 id。当您从 API 添加收藏夹时，找到与`id`API 团队 id 对应的团队。

```
external_team_id = ... # get external team id from API JSON data
favorite.team_id = Team.find_by_external_id(external_team_id).id 
```

因此，您正在`id`为团队分配给定的外部 ID。您需要为从 API 加载的每个收藏夹查询数据库，这在性能方面可能会付出高昂的代价，但因为您只在没什么大不了的时候才这样做。

# mysql - 如何在 jasper 的 ireport 中使用小计找到时间差的总和

> ID：14413324
> 
> 赞同：0
> 
> 时间：2013-01-19T10:24:33.470
> 
> 标签：mysql, jasper-reports, sum, ireport

我在 jasper ireport 中创建了一个报告，它将找到生产机器的空闲时间。我正在为此获得输出。但是在尝试查找总空闲时间时遇到问题。我使用了小计概念，我创建了一个变量“total”，传递了空闲时间表达式“TimeDiff(startTime,stopTime)”，还创建了一个文本框并在其中调用了该变量。在预览中而不是 sum Iam 只获得表的最后一个值（空闲时间）。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:24:47.347

默认情况下，变量的计算类型将设置为`Nothing`。这将导致变量被数据集中每条记录的新值覆盖。如果是这种情况，当您在报告末尾读取变量时，它将等于数据集中的最后一个值。这听起来像你的情况。

要解决此问题，您应该将`Calculation`变量的属性设置为`Sum`. 这会将每个新值添加到现有值而不是覆盖它。

# php - bindValue() 和 bindParam() 之间的混淆？

> ID：14413326
> 
> 赞同：12
> 
> 时间：2013-01-19T10:24:38.657
> 
> 标签：php, pdo, bindvalue, bindparam

我对这两个功能感到`Bindvalue()`困惑`BindParam()`

1.  我在 php.net 上看到它不会转义`%`，`_`所以使用时要小心`LIKE`。所以我认为`BindValue()`当我们使用 LIKE 查询时不使用。
2.  当我们使用`LIKE`查询时`BindParam()`。因为据我所知 BindParam 可以逃避这些`%`和`_`.
3.  `BindValue()`不提供针对 sql 注入的保护。我不确定这是真的吗？

朋友告诉我这3点是对是错。我是 PDO 的初学者，所以请解释清楚..

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-19T10:37:04.930

值如何转义或不转义应该没有区别。`bindParam`不同之处`bindValue`在于它引用变量，仅在执行语句时绑定值。*立即*`bindValue`取值。为了显示：

 *```
$stmt = $db->prepare('SELECT * FROM `table` WHERE foo = :foo');

$foo = 'foo';
$stmt->bindValue(':foo', $foo);
$foo = 'bar';

$stmt->execute(); 
```

上面的执行就像`SELECT * FROM table WHERE foo = 'foo'`;

```
$stmt = $db->prepare('SELECT * FROM `table` WHERE foo = :foo');

$foo = 'foo';
$stmt->bindParam(':foo', $foo);
$foo = 'bar';

$stmt->execute() 
```

上面的执行就像`SELECT * FROM table WHERE foo = 'bar'`.

确实，既不关心`_`也不`%`作为特殊字符，因为一般来说它们就语法而言不是特殊字符，并且数据库驱动程序无法分析上下文以确定您的*意思* `%`是通配符还是通配符查询上下文中的实际字符“%” `LIKE`。

两者都可以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T10:40:06.033

好吧，你把这一切都搞错了。

`Bindvalue()`并且`BindParam()`在任何一种方式上都相等，除了参数类型。

*   Bindvalue() 只绑定一个值，它就像一个*硬拷贝*。
*   BindParam() 绑定一个变量，当变量改变时，绑定的值也会改变。

他们两个都没有逃过%和_，这并没有太大的关系。这种转义只影响返回结果的可靠性，而不影响任何“注入”。*

# haskell - 如何在 mac osx 中正确安装/更新 haskell 包

> ID：14413328
> 
> 赞同：0
> 
> 时间：2013-01-19T10:24:54.197
> 
> 标签：haskell, haskell-platform

我在 Haskell 中完全是菜鸟，我正在尝试学习如何在网络上使用它[的教程。](http://yannesposito.com/Scratch/en/blog/Yesod-tutorial-for-newbies/)

我使用的是 Mac OSX，所以我从[http://www.haskell.org/platform/mac.html下载了 OSX 的 haskell 平台](http://www.haskell.org/platform/mac.html)

然后我做了

```
cabal update 
```

它告诉我有新版本的 cabal install 可用，那么为什么不 cabal install cabal-install

它编译了 Cabal-1.16.0.3 版本并将其安装在我的 $HOME/Library/Haskell 中。我将 $HOME/Library/Haskell/bin 添加到我的 $PATH 并打开一个新终端。

然后我做 cabal --version

但是版本是 1.14 我做了 $HOME/Library/Haskell/bin/cabal --version 我知道二进制文件正在使用库版本 1.14 我怎样才能让它使用新安装的版本而不是平台之一？

然后我做 cabal install cabal-dev

并获取要编译的新包的消息，但此消息还包括cabal：

```
The following packages are likely to be broken by the reinstalls:
network-2.3.1.0
haskell-platform-2012.4.0.0
cgi-3001.1.7.4
HTTP-4000.2.5 
```

我不喜欢这听起来如何。

我以前尝试在另一台计算机上安装 yesod，我记得遇到过同样的问题，最终 yesod 没有安装，我不想做任何会破坏任何事情的事情。

让 Yesod 或任何 haskell 包在 mac osx 上工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:50:09.117

> 我怎样才能让它使用新安装的版本而不是平台之一？

正如 cabal 应该告诉您的，您只需将目录添加到 PATH 环境变量中。例如，如果你使用 bash 作为你的 shell，添加

```
export PATH=$HOME/Library/Haskell/bin:$PATH 
```

到 $HOME/.bashrc 并重新启动你的 shell。

> 让 Yesod 或任何 haskell 包在 mac osx 上工作的正确方法是什么？

这个问题不是特定于 OSX 的，而是特定于阴谋集团的。答案是告诉 cabal你关心的*所有已经安装的包。*例如，您可以尝试

```
cabal install cabal-dev haskell-platform # or
cabal install cabal-dev async cgi fgl GLUT haskell-src html HTTP HUnit mtl network OpenGL parallel parsec QuickCheck random regex-base regex-compat regex-posix split stm syb text transformers vector xhtml zlib 
```

或者，如果您只是想阻止某些包被重建，您可以使用`installed`约束，如`cabal install cabal-dev --constraint "haskell-platform installed"`.

# sql - Visual Studio 2012 中的 .SQL 文件

> ID：14413330
> 
> 赞同：2
> 
> 时间：2013-01-19T10:25:06.733
> 
> 标签：sql, visual-studio-2012, procedures, system.io.fileinfo

我有一个关于从 Visual Studio 执行 sql 命令的问题，我有一些不那么短的程序，所以如果我用命令类型文本执行它们并用 stringbuilder 编写它会很麻烦。我决定将它们写在保存在我的项目中的 .sql 文件中，但我对此了解不多。就像如果有创建的过程一样，我假设我需要创建一次，但是如何调用它，然后稍后再进行其他操作等。当用户单击时，我需要使用各种参数调用它。关于它的任何教程或示例？
就像是

```
FileInfo file = new FileInfo(@"\\ares\c$\Inetpub\wwwroot\TestArea\SQL\testsql.sql");

        string script = file.OpenText().ReadToEnd();

        using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["WhatIfDatabaseConnectionString"].ConnectionString))
        {
              SqlCommand sqlCmd = new SqlCommand(script, conn);
              sqlCmd.ExecuteNonQuery(script); 
```

但是有参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:36:25.073

```
SqlCommand cmd = new SqlCommand();

cmd.Connection = con;
cmd.CommandType = System.Data.CommandType.StoredProcedure;
cmd.CommandText = "CRUD_myproc";

cmd.Parameters.Add("@flag", SqlDbType.Char).Value = 'a';
cmd.Parameters.Add("@type", SqlDbType.Int).Value = cmbBuildingType.SelectedIndex;

cmd.ExecuteNonQuery(); 
```

> 所以你应该在 sql 中创建名为 'CRUD_myproc' 的 proc。希望这对你有一点帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T08:49:00.707

你走的是正确的路线，我个人有一个缓存 SQL 文件并检查最后修改日期的工厂，但它正在做你正在做的事情：

```
string script = File.ReadAllText(_serverPath + sqlName + ".sql");
using (SqlConnection conn = new SqlConnection(ConnString))
{
    conn.Open();
    using (SqlCommand sqlCmd = new SqlCommand(script, conn))
    {
        sqlCmd.CommandType = CommandType.Text;
        sqlCmd.Parameters.AddWithValue("@CompanyGuid", CompanyGuid);
        sqlCmd.ExecuteNonQuery();
    }
} 
```

然后，您将拥有一个 SQL 文本文件，其参数以 @ 符号为前缀：

```
SELECT * FROM tblCompany WHERE CompanyGuid = @CompanyGuid 
```

# java - Java、NIO、一线程读写

> ID：14413334
> 
> 赞同：0
> 
> 时间：2013-01-19T10:25:46.167
> 
> 标签：java, thread-safety, nio

我尝试构建简单的客户端应用程序，将数据发送到服务器并从中接收数据。在大多数情况下，它会异步交换数据（除了记录过程）

我已经阅读了很多教程、帖子等，但我找不到足够的描述（我是 java 新手）如何构造代码：

*   读/写（简单的 line -string 以“\n”结尾），
*   重新连接（如果发现错误）

带有服务器的客户端（我在另一个开发环境中编写过），都在一个线程中？

有人可以通过给出简单的示例或地址来帮助我吗？我发现的所有示例仅用于读取或写入（未混合）或简单连接，发送数据和断开连接，没有解释异常，重新连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-29T03:28:56.097

这不是一个真正的 NIO 问题，它只是一个线程间通信问题。

第二个线程将获得与第一个线程相同的异常，并且它可以查看一个`reconnectPending`布尔值，该布尔值可以由第一个线程在重新连接套接字时设置。

# objective-c - iPhone SDK：如何从自定义类返回 NSString

> ID：14413335
> 
> 赞同：0
> 
> 时间：2013-01-19T10:25:48.960
> 
> 标签：objective-c, xcode, nsstring, null, return

我在下面有一个自定义类：

```
#import <Foundation/Foundation.h>

@interface NamesFix : NSObject

@property (nonatomic, copy) NSString *fixedName;

- (NSString *)fixName:(NSString *)name;

@end 
```

实现文件：

```
#import "NamesFix.h"

@implementation NamesFix

@synthesize fixedName;

- (NSString *)fixName:(NSString *)name
{
    if ([name isEqualToString:@"Foo"])
    {
        self.fixedName = @"Bar";
    }
    else
    {
        self.fixedName = @"";
    }
    return self.fixedName;
} 
```

当我通过以下方式访问我的自定义类时：

```
NamesFix *namesFix = [NamesFix alloc] init];
NSString *someString = @"Foo";

[namesFix fixName:someString];

NSLog(@"fixedName: %@", namesFix.fixedName]; 
```

固定名称返回`null`。我哪里弄错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:32:29.090

制作您的属性副本，这是字符串的推荐内存管理属性（您可以改用保留，但副本可以保护您免受其他人传入可变子类 NSMutableString 并在您不注意的情况下对其进行更改）：

```
@property (nonatomic, copy) NSString *fixedName; 
```

并在您的实现中，使用此属性提供的 setter 方法：

```
self.fixedName = ... 
```

代替

```
fixedName = ... 
```

**编辑**

并且`return self.fixedString`习惯性地使用。

# c++ - 如何在构造函数中禁用字段初始化？

> ID：14413337
> 
> 赞同：0
> 
> 时间：2013-01-19T10:26:04.077
> 
> 标签：c++, constructor, malloc

是否可以在构造函数中禁用字段初始化？我不希望我的类的构造函数调用这个类的字段的构造函数，我怎么能不使用 malloc 呢？我想这样做是为了避免在这样的代码中进行双重初始化：

```
class A() {
   A(int n): N(n) {}
}

class B() : public A() {
    B(int n) : A(n) {}
    B() {
        new(this) B(42);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:11:54.697

我觉得我理解你的问题，你想要`Delegating Constructors`，但这仅在 C++11 中可用

```
class Notes {
  int k;
  double x;
  std::string st;
public:
  Notes();
  Notes(int);
  Notes(int, double);
  Notes(int, double, std::string);
};

Notes::Notes(int kk, double xx, std::string stt) : k(kk),
  x(xx), st(stt) {/*do stuff*/}
Notes::Notes() : Notes(0, 0.01, "Oh") {/* do other stuff*/}
Notes::Notes(int kk) : Notes(kk, 0.01, "Ah") {/* do yet other stuff*/ }
Notes::Notes( int kk, double xx ) : Notes(kk, xx, "Uh") {/* ditto*/ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:15:50.410

简单地说：你不能。成员的构造函数总是被调用。这很好，因为如果缺少可行的部分，则不会构建对象。可行我的意思是反对可选。C++ 中的可选应该通过指针或`boost::optional`注释中的建议来表示。

此外，如果您在构造函数中在 this 上调用placement new，这是一种语言犯罪，因为您再次初始化了一个对象。简单地说，你在这里搞乱了对象生命周期，这是可疑的、容易出错的，而且充其量也很难理解和维护。

您正在寻找的东西在 C++03 中根本不可能。然而，在 C++11 中可能的是所谓的*委托构造函数*，这可能是您正在寻找的：

```
class B() : public A() {
    B(int n) : A(n) {}
    B() : B(42) //delegate the default ctor to the int ctor
    { /* do more stuff*/ } 
} 
```

然而，你不能用它们做*所有事情*——你只能调用同一个类的另一个构造函数。

# php - 在将数组值传递给 CakePHP 中的视图之前，如何从数据库中更新数组值？

> ID：14413341
> 
> 赞同：1
> 
> 时间：2013-01-19T10:26:32.610
> 
> 标签：php, templates, cakephp, pagination

我基本上希望能够在将结果发送到我的视图之前通过函数传递一个值......

```
public function listing() {
    $this->set('posts',  $this->paginate('Post'));
} 
```

所以我想在里面说点什么，例如：

```
 foreach($posts as $post){
        $post["Post"]["timestamp"] = $this->timeago($post["Post"]["timestamp"]);
    } 
```

然后我想用这个字段对结果进行分页，并将“posts”设置为我发送到视图的整体数组——用“timeago”函数更新了时间戳。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:37:59.967

这是基本的php。为了修改数组，您需要使用 $key 如下：

```
foreach ($posts as $key => $post) {
    $posts[$key]["Post"]["timestamp"] = $this->timeago($post["Post"]["timestamp"]);
} 
```

但是您真正想要的是在实际输出之前修改时间戳：

```
// in your view ctp
foreach ($posts as $post) {
    ...
    $formattedTimestamp = $this->Time->timeAgoInWords($post["Post"]["timestamp"]);
    echo '<span>' . $formattedTimestamp . '</span>';
    ...
} 
```

在我看来，输出格式不应该在模型层中完成——尤其是不使用回调。如果您没有碰巧使用格式精美的字段，那么您的模型就会对您的记录进行循环。这就是为什么我更喜欢“按需”做它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:57:38.180

您可以考虑在模型行为 afterFind() 中实现这些方法。
欲了解更多信息，请参阅：[http ://book.cakephp.org/2.0/en/models/callback-methods.html](http://book.cakephp.org/2.0/en/models/callback-methods.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T20:14:22.967

另一种可能性：使用参考。

```
// Note the "&"
foreach($posts as &$post){
    $post["Post"]["timestamp"] = $this->timeago($post["Post"]["timestamp"]);
} 
```

这实际上会`$posts`在访问每个`$post`.

# json - 使用 Json 数据和 Knockout JS Viewmodel 填充引导选择

> ID：14413346
> 
> 赞同：3
> 
> 时间：2013-01-19T10:27:08.250
> 
> 标签：json, knockout.js

我在我的项目中使用 JSON 和引导控件。在我的 JSON 中，我从`sql database`. 现在我想用我的数据填充我的选择控件，但它不起作用，我看不出我做错了什么，我已经搜索了很多小提琴来让它工作。

这是我的 JSON ::

```
 var Projectss = function (data) {
        var self = this;
        self.ProjectName = ko.observable(data.ProjectName);
    }

    var ProjectModel = function (Projects) {
        var self = this;
        self.Projects = ko.observableArray(Projects);

    $.ajax({
            url: "CreateTask.aspx/GetProjectList",
            // Current Page, Method  
            data: '{}',
            // parameter map as JSON  
            type: "POST",
            // data has to be POSTed  
            contentType: "application/json; charset=utf-8",
            // posting JSON content      
            dataType: "JSON",
            // type of data is JSON (must be upper case!)  
            timeout: 10000,
            // AJAX timeout  
            success: function (Result) {
                var MappedProjects =
              $.map(Result.d,
       function (item) { return new Projectss(item); });
                self.Projects(MappedProjects);
            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }

        });
    };

    $(document).ready(function () {
        var VM = new ProjectModel();
        ko.applyBindings(VM);
    })

</script> 
```

这是我试图填充我的选择的地方，这是我的 td

```
div data-bind="foreach: Projects">
 select data-bind="options: $root.MappedProjects, optionsText: ProjectName, value: 'ProjectName'">
/select>
/div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T12:34:51.180

使用`optionsText` [选择绑定选项](http://knockoutjs.com/documentation/options-binding.html)，您需要将属性名称指定为字符串，因此您需要编写`'ProjectName'`（注意单引号）。

但是[`value`绑定](http://knockoutjs.com/documentation/value-binding.html)需要属性本身，因此您需要编写`ProjectName`（注意没有引号）。

所以固定绑定看起来像这样：

```
<div data-bind="foreach: Projects">
    <select data-bind="options: $root.MappedProjects, 
                       optionsText: 'ProjectName', value: ProjectName">
    </select>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T08:18:16.863

我找到了一种更简单的方法来填充带有敲除的选择：

HTML：

```
<div class="bar">
    Select Query:
    <select id="QueryName" data-bind="options: Data, optionsText: 'QueryName', value: QueryName, event: { 'change': vm.LoadQuery }">
    </select>
</div> 
```

可以通过添加以下内容来添加事件以加载更改数据：`event: { 'change': vm.LoadQuery }`

昏死：

```
vm = {
        Data: ko.observableArray(),
     }

    function LoadQueries() {
        $.ajax({
            type: "POST",
            url: "ExportCustomQueriesList.aspx/GetQueries",
            contentType: "application/json",

            success: function (response) {
                vm.Data(ko.utils.unwrapObservable(ko.mapping.fromJS(response.d)));
                ko.applyBindings(vm);

                //var n = noty({ text: 'Query in progress of execution', theme: 'default', layout: 'center', timeout: 2000, type: 'error' });
            }
        })
    } 
```

# java - 客户端 -> 服务器 -> 客户端之间的分布式事务

> ID：14413353
> 
> 赞同：0
> 
> 时间：2013-01-19T10:27:19.633
> 
> 标签：java, transactions, jms, jta, xa

对于一个新项目，我正在寻找能让我的生活更轻松的技术。我的新项目基本上是 2 个客户端和一个服务器：客户端 1 向服务器发送消息 1，服务器向客户端 2 发送消息 1，客户端 2 对消息 1 进行操作。

这可以使用普通的 java 套接字或 rmi 或类似技术来完成。但这里有个问题：整个过程需要一个事务。我的意思是，当 client2 无法处理 message1 时，client1 和服务器需要知道这一点并回滚已完成的任何操作。

我的第一个想法是从 client2 向 client1 和服务器发送一条带有结果的消息，但更多地考虑它会变得对错误敏感。

我已经看过 jms、jta、jca 等技术，但对一切都有些不知所措。我怀疑可能有更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:50:49.147

我不确定单独使用 JTA 或 JMS 是否能解决您的问题，因为即使分布式事务仍然在事务资源（例如 JMS 代理和数据库）之间，而不是在应用程序之间。

在您的情况下，我仍然会选择事务传输，例如 JMS。这将为您提供“保证交付”，这可能会简化错误处理。

```
1    c1 -> jms -> server -> jms -> c2   2

4    c1 <- jms <- server <- jms <- c2   3 
```

如果你做对了，你可以确定 c1（和服务器）最终会收到来自 c2 的“结果”，无论好坏。

如果 C2 在处理过程中崩溃并且未能发回结果 jms 消息，则事务将在本地 c2 处回滚，并且 c2 必须重试。

此解决方案的缺点是消息可能会“卡住”，例如，如果 c2 根本无法处理它，但它永远不会丢失。如果您路由同步请求（soap、RMI、simple tcp..），您可能会遇到回复丢失的情况，C1 永远不会知道 C2 是否处理了该消息。通过使 C2 具有幂等性并让 C1 能够在一段时间后没有回复时重试事务，可以在某种程度上避免这种情况。

在我看来，没有“黄金解决方案”，但任何选择都会做得很好。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:46:47.830

对于服务器组件，您可以尝试在 JBoss AS 等成熟的 Java EE 服务器中使用[消息驱动 Bean 。](http://docs.oracle.com/javaee/6/tutorial/doc/gipko.html)在这种情况下，您的客户端将使用 JMS 与服务器进行通信。

# javascript - 带有socket.io的nodejs中的UTF-8

> ID：14413355
> 
> 赞同：1
> 
> 时间：2013-01-19T10:27:32.840
> 
> 标签：javascript, node.js, utf-8, character-encoding, socket.io

我无法使用 nodejs 和 socket.io 将 utf-8 编码的字符串传递给客户端。我使用什么传输（websocket、flashsocket 或 xhr-polling）似乎并不重要。

代码非常简单明了：

服务器：

```
var app = require('http').createServer(handler)
, io = require('socket.io').listen(app,{log:false});

app.listen(80);

function handler (req, res) {
    fs.readFile(__dirname + '/index.html','utf-8',
        function (err, data) {
          if (err) {
            res.writeHead(500);
            return res.end('Error loading index.html');
          }
          var type="text/html";
          res.writeHead(200, {'Content-Type':type + "; charset=utf-8"});
          res.end(data,'utf8');
        });
}

io.sockets.on('connection', function (socket) {
    socket.emit('msg', { text: 'æøå' });//Here we send the utf-8 characters to the client
}); 
```

客户：

```
<!Doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta charset=utf-8 />
<script type="text/javascript" src="http://192.168.0.12/socket.io/socket.io.js" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
  window.WEB_SOCKET_SWF_LOCATION = 'http://192.168.0.12/socket.io/static/flashsocket/WebSocketMain.swf';
  var socket = io.connect('http://192.168.0.12');
  socket.on('msg', function(data){alert(data.text);}); //here the data is recieved and put into the alert box
  ...
  ... 
```

似乎数据始终是 UTF-8 双重编码，如下所示： ![带有来自 nodejs 服务器的数据的客户端警报](../Images/b13f43ad1f441383dc850d0f56c0b646.png)

我正在使用 nodejs 0.8.17 和 socket.io 0.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:53:01.117

您的 node.js 文件（第一段代码）未以 UTF-8 编码保存，node.js 期望文件以 UTF-8 保存。这取决于您的文本编辑器，但通常当您保存文件时，您应该能够选择编码。

# ruby-on-rails - 在 Ruby on Rails 中以嵌套形式传递父 ID

> ID：14413357
> 
> 赞同：0
> 
> 时间：2013-01-19T10:28:04.600
> 
> 标签：ruby-on-rails, nested-forms, erb

**目标**：保存想法模型的评论。

**形式：**

```
<%= form_for([@idea, IdeaComment.new], :validate => true) do |f| %>
        <div class="control-group">
            <div class="controls">
                <%= f.text_area :text, :placeholder => 'some text', :rows => 5 %>
                <%= validate_errors(IdeaComment.new) %>
            </div>
        </div>
        <%= f.button 'Comment', :class => 'button grad-green', :type => 'submit' %>
    <% end %> 
```

**控制器：**

```
 @idea_comment = IdeaComment.new(params[:idea_comment])
 ... 
```

但是如果我们看一下 params hash： ![在此处输入图像描述](../Images/e33fcbdd9db2bf370e564c744a7b0be2.png)

如何将idea_id 传递给“idea_comment”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T13:52:42.683

客户端验证与面向资源的表单相冲突。请改用常规的服务器端验证。

## 解释：

面向资源的表单发布到基于嵌套资源的路径：

```
form_for([@idea, IdeaComment.new]) # => POST '/ideas/[:idea_id]/idea_comments' 
```

Rails`:idea_id`从请求路径中提取并作为参数传入。在`create`动作中，关联是在保存之前通过直接赋值设置的：

```
# controllers/idea_comments_controller.rb
def create
  @idea_comment = IdeaComment.new(params[:idea_comment])
  @idea_comment.idea_id = params[:idea_id]
  # ...
  @idea_comment.save
end 
```

**客户端验证**的问题是它会失败并阻止表单提交，直到被分配，直到提交表单*之后*`@idea_comment.idea_id`才会发生。

# ruby-on-rails - 如何在 Rails 启动时创建线程？

> ID：14413361
> 
> 赞同：2
> 
> 时间：2013-01-19T10:28:35.200
> 
> 标签：ruby-on-rails, multithreading, configuration, initialization

我正在尝试在 Rails 启动时创建一个线程，该线程将在应用程序的整个生命周期中运行。奇怪的是，我已经使用我正在运行的另一个线程进行了此操作。我复制了该（工作）代码并将其用作新线程的新代码的样板。但是线程不会启动。

*   代码在 config/initializers 中（这是正确的地方吗？）。
*   文件以“z_...”开头命名，以确保它最后运行。
*   导轨 3.2.6

下面是代码的一般结构：

```
class Blah
  def self.the_thread
    The_Model.transaction do
    # do some database stuff
    # ...
  end

  TheThread = Thread.new do
    while true do
      the_thread
      sleep 5.seconds
    end
  end
end 
```

打开 Rails 控制台并检查 Blah::TheThread 会发现一个似乎从未运行过的死线程。类的声明和方法中似乎没有任何错误，因为我可以在打开 rails 控制台时运行该方法并且它工作得很好。此外，如果我在 Rails 控制台中手动输入生成线程的确切代码（TheThread = Thread new do ...），它工作得很好（每 5 秒唤醒一次，做它的事情，再次休眠）。

再一次，奇怪的是，这个在 Rails 中生成简单线程的确切样板文件在这个完全相同的应用程序中对我有用。

如果有人对我认为是一个奇怪的问题有一些可能的见解，我会全神贯注。

谢谢。

编辑：新信息 - 我刚刚注释掉了事务调用（和匹配结束），它工作正常。我不知道交易可能会干扰什么。我删除了我的其他自定义初始化脚本，目录中唯一的其他脚本要么是默认脚本，要么是属于 devise 的脚本。我仔细阅读了它们，并没有看到任何交易正在进行。

更多新信息。我在线程代码的末尾添加了“TheThread.abort_on_exception = true”。当我启动 rails 时，我现在得到一个异常“ArgumentError：在关闭的数据库上调用准备：回滚事务（ActiveRecord::StatementInvalid）”。错误发生在 sqlite3 gem 中。我有 sqlite3 gem 版本 1.3.6 和 sqlite-ruby gem 版本 1.3.3。我用谷歌搜索了这个错误，发现几个帖子抱怨同样的错误，但没有看到任何解决方案。

我不再认为这是一个线程问题，而是一个数据库问题，但是来不及改变这篇文章的标题。

这只是在：我在线程代码的顶部（就在它进入while循环之前）放置了一个'sleep 15.seconds'，这样就解决了问题。但我仍然想知道是什么导致了问题，以及什么是“非黑客”解决方案。由于某种原因，此代码运行时数据库尚未准备好。我的初始化代码只是在错误的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:14:44.383

我真的建议寻找另一种方法来实现这一点。除非您在投入生产时*每个实例*确实需要 1 个额外线程（想象设置 3-4 个瘦 / 杂种 / 等服务器 - 每个服务器都会有额外的线程），否则有更好的方法来解决它。

选项 1 - 最简单的 - 只是创建一个将执行您的任务的控制器操作，然后使用 wget 和 cron 定期触发该操作。

```
20 * * * *  /usr/bin/wget --quiet -O - 'http://www.mydomain.com/my_controller/my_action' 
```

这里的问题是您必须处理身份验证/访问控制 - 除非您真的不在乎某个随机用户是否可以触发您的工作（坦率地说，有时非常简单的工作就是这种情况）。

选项 2 - 使用[Clockwork](https://github.com/tomykaira/clockwork) / [Sidekiq](http://mperham.github.com/sidekiq/)或 BackgroundRb 或其他在后台运行任务的方式。我已经在生产应用程序中完成了这项工作，并且效果非常好。我选择了 Clockwork 和 Sidekiq，我的计划任务如下所示：

应用程序/工人/daily_worker.rb：

```
class DailyWorker
  include Sidekiq::Worker

  def perform
    # do stuff here
  end
end 
```

发条.rb：

```
require 'clockwork'
require 'sidekiq'

Dir["app/workers/*"].each {|f| load f }

module Clockwork
  every 1.day, 'daily.jobs', :at => "00:30" do
    DailyWorker.perform_async
  end
end 
```

对我来说，这似乎是*最好*的解决方案——我只花了大约 15 分钟就将它全部启动并运行起来。

# java - 过滤列表视图。获得正确的值但无法显示它们

> ID：14413362
> 
> 赞同：0
> 
> 时间：2013-01-19T10:28:39.460
> 
> 标签：java, android, listview, android-arrayadapter

我有一个带有 ArrayAdpater 的 ListView。我尝试过滤 ListView 并且我的 ArrayAdpater 得到了正确的值。但我无法显示它们，因为 ListView 总是抛出 ArrayOutOfBounds 异常。例如，我的列表包含 16 个名称。其中3个以字母“l”开头。适配器中的我的 ItemsArray 仅包含 3 个名称，但它不会停止尝试填充列表，并且我得到一个 ArrayOutOfBounds 异常。

我评论了发生异常的代码。

```
class FriendListAdapter extends ArrayAdapter<Friend> implements Filterable {

private ArrayList<Friend> items;
ArrayList<Friend> mOriginalValues; // Original Values

public FriendListAdapter(Context context, int textViewResourceId, ArrayList<Friend> items) {
        super(context, textViewResourceId, items);
        this.items = items;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.addfriendtoeventlistrow, null);
        }
        final Friend o = items.get(position); //<-- Here comes the ArrayOutOfBounds because position > array.size()
        if (o != null) {
                TextView tt = (TextView) v.findViewById(R.id.friendname);
                ImageView icon = (ImageView) v.findViewById(R.id.friendprofileimage);
                final CheckBox selectBox = (CheckBox) v.findViewById(R.id.selectFriend);
                selectBox.setClickable(false);
                selectBox.setFocusable(false);
                selectBox.setFocusableInTouchMode(false);

         if(selectBox != null){
                    selectBox.setChecked(o.getSelected());
                if(icon != null){
                    icon.setImageDrawable(o.getFriendProfileImage());
                if (tt != null) {
                      tt.setText(o.getFriendName());                            }

        }
        }
        }
        return v;

}

@Override
public Filter getFilter() {
    Filter filter = new Filter() {

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,FilterResults results) {
            items = (ArrayList<Friend>) results.values; // has the filtered values
            for(int i=0;i<items.size();i++){
            Log.i("FilteredItems",items.get(i).getFriendName());
            }

            notifyDataSetChanged();  // notifies the data with new filtered values

        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();        // Holds the results of a filtering operation in values
            ArrayList<Friend> FilteredArrList = new ArrayList<Friend>();

            if (mOriginalValues == null) {
                mOriginalValues = new ArrayList<Friend>(items); // saves the original data in mOriginalValues
            }

            /********
             * 
             *  If constraint(CharSequence that is received) is null returns the mOriginalValues(Original) values
             *  else does the Filtering and returns FilteredArrList(Filtered)  
             *
             ********/
            if (constraint == null || constraint.length() == 0) {

                // set the Original result to return  
                results.count = mOriginalValues.size();
                results.values = mOriginalValues;
            } else {
                constraint = constraint.toString().toLowerCase();
                for (int i = 0; i < mOriginalValues.size(); i++) {

                    String data = mOriginalValues.get(i).getFriendName();
                    if (data.toLowerCase().startsWith(constraint.toString())) {
                        FilteredArrList.add(mOriginalValues.get(i));
                    }
                }
                // set the Filtered result to return
                results.count = FilteredArrList.size();
                results.values = FilteredArrList;

                for(int i=0;i<FilteredArrList.size();i++){
                    Log.i("FilteredArrList",FilteredArrList.get(i).getFriendName());
                    }
            }

            return results;
        }
    };
    return filter;
} 
```

这就是我创建适配器和列表的方式

```
 m_friends = new ArrayList<Friend>();
        this.m_adapter = new FriendListAdapter(getActivity(), R.layout.addfriendtoeventlistrow, m_friends);
        friendList = (ListView)view.findViewById(R.id.addfriendsList);
        friendList.setAdapter(m_adapter); 
```

这是例外

```
> 01-19 10:59:22.719: E/AndroidRuntime(3138): FATAL EXCEPTION: main
01-19 10:59:22.719: E/AndroidRuntime(3138): java.lang.IndexOutOfBoundsException: Invalid index 3, size is 3
01-19 10:59:22.719: E/AndroidRuntime(3138):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at java.util.ArrayList.get(ArrayList.java:304)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at com.flashback.flashbackapp.FriendListAdapter.getView(AddFriendsToEventDialog.java:252)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.AbsListView.obtainView(AbsListView.java:2019)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.ListView.onMeasure(ListView.java:1155)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.View.measure(View.java:12881)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:676)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:557)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.View.measure(View.java:12881)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:297)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.View.measure(View.java:12881)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:297)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.View.measure(View.java:12881)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:297)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.View.measure(View.java:12881)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4802)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:297)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2111)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.View.measure(View.java:12881)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.os.Looper.loop(Looper.java:137)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at java.lang.reflect.Method.invokeNative(Native Method)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at java.lang.reflect.Method.invoke(Method.java:511)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-19 10:59:22.719: E/AndroidRuntime(3138):     at dalvik.system.NativeStart.main(Native Method) 
```

# java - 使用向前和向后导航结果集

> ID：14413364
> 
> 赞同：0
> 
> 时间：2013-01-19T10:29:07.310
> 
> 标签：java, sql

在 java 中，如果我们想要使用向前和向后 2 个按钮来导航我们从执行查询中获得的结果集。我们可以通过什么方式执行此任务

```
 private void nextActionPerformed(java.awt.event.ActionEvent evt) {                                            
        if(evt.getSource()==bt_previous){
        DBUtil util = new DBUtil();
             try {
                        Connection con = util.getConnection();
                        PreparedStatement stmt = con.prepareStatement("SELECT * FROM DETAILS where id=?");
                        ResultSet rs;
                        String rm = id.getText().trim();
                        stmt.setLong(1, Long.parseLong(rm));
                        rs = stmt.executeQuery();
                        while(rs.next()){

                        String a = rs.getString("weight");
                        txtboxwgt.setText(a);
                        String b = rs.getString("note_state");
                        cbnotstat.setSelectedItem(b);
                        String c = rs.getString("dm_state");
                        cbdmnstat.setSelectedItem(c);
                                      }
                   } catch (Exception e) {
                             JOptionPane.showMessageDialog(null, e.getMessage());
                         }
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:40:52.707

您需要对结果进行分页。AFAIK 对结果集没有简单的任务，没有内置功能。您有以下选择：

1.  将每一行转换为一个对象并实际显示对象。保留到目前为止显示的页面列表，并根据需要提供它们（用于后退），并将结果集用于前进。但是，这有其局限性：如果您有大量对象，则可能会达到系统内存的限制，因此除非您知道有少量对象，否则不建议这样做。

2.  使用附加的数据库表进行分页。为此，请创建一个具有以下结构的附加表：`page`, `item_id`。命名它`history_table`。然后读取前 50 个对象（假设您想一次显示 50 行）。那是第 1 页。在历史记录表中插入唯一标识符以及页码。当需要后退时，从上一页读取唯一 ID。前进时，执行选择。

前进的 sql 语句如下所示：

```
select * from my_table a where not exists (select 1 from history_table h where a.item_id = h.item_id) 
```

您为所需的每个页面执行此操作（甚至是第一个页面！）

应该使用[批量插入](http://docs.oracle.com/cd/B28359_01/java.111/b31224/oraperf.htm#CHDCCEHD)来在数据库中插入先前读取的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:42:30.890

创建一个实体类`Detail`：

```
public class Detail {
    private String weight;
    private String noteState;
    private String dmState;

    public Detail() {

    }

    public Detail(String weight, String noteState, String dmState) {
        this.weight = weight;
        this.noteState = noteState;
        this.dmState = dmState;
    }
    // getters and setters below
} 
```

在您`nextActionPerformed`遍历结果集时的方法中，创建实体的新实例并将其添加到某个集合中，即`LinkedList`：

```
 List<Detail> allDetails = new LinkedList<Detail>();
                while(rs.next()) {

                    String a = rs.getString("weight");
                    String b = rs.getString("note_state");
                    String c = rs.getString("dm_state");
                    allDetail.add(new Detail (a, b, c));
                } 
```

然后，您可以`allDetails`通过 `LinkedList`. 或者，如果 LinkedList 不符合您的需求，请考虑使用另一个集合。

# php - 将文本框中的 td 值转换为编辑和显示相同

> ID：14413369
> 
> 赞同：0
> 
> 时间：2013-01-19T10:29:27.423
> 
> 标签：php, jquery

我有一列作为备注，我希望用户可以输入任何他们想要的备注，并且每次他们看到这个表时应该显示它我搜索了很多，最后使用这个代码但是它不能正常工作，当用户点击备注，它应该是可编辑的，但它不起作用

```
$(document).ready(function() {
$('#mylist_remark').on('click', '.Edit', function() {
        $(this).closest('tr').find('td:eq(1)').each(function() {
            // replace the existing text with a textbox containing that text
            var existingVal = $(this).text();
            $(this).html('<input type="text" value="' + existingVal + '" >');
        });
    });

    // when the user is finished editing, change the value and remove the textbox,and display edited text
    $('#mylist_remark').on('focusout', 'td input', function() {
        $(this).parent().html( this.value );
    });
}); 
```

剧本

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

表代码

```
 <table id="mylist_remark">
    <caption>SELECTED CANDIDATE LIST</caption>
    <!-- headings -->
        <tr>
          <th> </th>
          <th>REMARK</th>
        </tr>
   <?php $i=0;
    while($data_set = mysql_fetch_array($mresult_set))
        {     
            echo "<tr id=\"{$listrowid}\">";                                
            echo "<td><a href\"\" class=\"Edit\">remark</a></td>";
            echo "</tr>";
            $i++;                       
            }?>
    </table> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:52:45.900

您是否考虑过使用“contenteditable”属性，而不是做所有这些？

```
<td class="editable" contenteditable="true">Something</td>

$("#mylist_remark .editable").bind("blur", function(e) { 
  console.log($(e.target).text());
  $.post("/somewhere", {remark: $(e.target).text(), candidate_id: $(e.target).nearest("tr").attr("id")}, function() { console.log("success"); });
  //save the result to the server or whatever you need to do to make it persist
}); 
```

您还想绑定“enter”和“escape”keydown 事件。

# c++ - 在 Arduino 草图文件夹中创建库

> ID：14413372
> 
> 赞同：0
> 
> 时间：2013-01-19T10:29:38.043
> 
> 标签：c++, class, arduino

我正在为一个项目创建一些类，这些类看起来很具体，以至于我不想保留在库文件夹中。它们大部分都在工作，但是，如果我想调用任何 Arduino 函数或 const，它会抛出“未在此范围内声明”的错误。

草图：

```
#include "MyClass.h"
void setup(){
}
void loop(){
} 
```

我的类.h

```
class MyClass{
    public:
        MyClass(int inp);
        int myFun();
}; 
```

我的类.cpp

```
#include "MyClass.h"
#include <WProgram.h>

MyClass::MyClass(int inp){
    pinMode(13,HIGH);

} 
```

错误：

MyClass.cpp: 'HIGH','pinMode' 未在此范围内声明。

如果我将库放在库文件夹中，它就不会发生。想知道是否有办法将 arduino 函数包含到草图文件夹库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:26:26.220

实际上我只是通过查看另一个库来让它工作：P 而不是

```
 #include <WProgram.h> 
```

我们应该使用

```
#if ARDUINO >= 100
#include "Arduino.h"
#else
#include "WProgram.h"
#endif 
```

我认为这对向后兼容性不利......

在草图文件夹中使用库**也不**是问题。但是，草图文件夹库存在一些潜在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:01:31.630

AFAIK 除了在 Arduino-lib 文件夹中之外，没有办法在任何地方拥有你的库。如果使用 unix，您可以将您的库放在您的草图文件夹中，并在您的 Arduino-lib 文件夹中创建指向这些库的链接 `ln`。然后你也应该在你的 IDE 中看到它们

# c++ - T和T&的区别？

> ID：14413376
> 
> 赞同：3
> 
> 时间：2013-01-19T10:30:09.777
> 
> 标签：c++, templates

嗨，我想知道做和做有什么区别

```
template <typename T> class List :
   T& getData();        
AND
   T getData();
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T10:45:50.293

鉴于这`T`是一个类型，`T&`是对 type 对象的引用`T`。

`T getData();`是一个返回类型对象的函数`T`。这意味着，无论函数返回什么都将被复制，调用者将收到此副本。这称为“复制返回”。在实践中，并不总是需要生成副本，编译器可以将其优化掉（这称为“复制省略”）。

`T& getData();`是一个返回对类型对象的引用的函数`T`。这很容易理解，称为“通过引用返回”，意味着返回的对象没有被复制。相反，您只需返回对其在内存中位置的引用，通过该引用可以访问原始对象。使用它时，必须注意返回的引用不会在它所引用的对象的生命周期之外使用。

如果您不确切知道引用是什么，它本质上是一个别名，用于引用某个变量。它通常用作指针的更安全替代方案，尽管与指针不同，它本身不是对象，并且您永远不能引用引用本身，因此不能更改它所引用的内容。

如果您想了解更多信息，[维基百科页面](http://en.wikipedia.org/wiki/Reference_%28C++%29)非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:31:12.407

```
 T& getData(); returns a reference to T        

 T getData(); returns a copy of T 
```

什么是 C++ 参考：[链接](http://en.wikipedia.org/wiki/Reference_%28C++%29)

# facebook - Facebook：在您自己的粉丝页面上计算状态更新分享的数量

> ID：14413378
> 
> 赞同：0
> 
> 时间：2013-01-19T10:30:26.770
> 
> 标签：facebook, facebook-graph-api, sharing

我有一个网站和一个 Facebook 粉丝页面。基本上，我想在粉丝页面上创建一个状态更新，供人们分享。然后在网站上，我想动态计算状态更新正在接收的“共享”数量。不是喜欢或评论，只是分享。这是一个可能的任务吗？如果是这样，如何实现？

感谢所有帮助，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:58:37.683

获得`read_stream`许可后，您可以通过 Graph Api 访问帖子统计信息：

```
https://graph.facebook.com/[PAGE_ID]_[POST_ID]?access_token=[YOUR ACCESS TOKEN] 
```

您将在 json 输出中看到共享计数：

```
"shares": {
    "count": 1
} 
```

# php - .htaccess 代码不应该影响我的论坛？

> ID：14413379
> 
> 赞同：0
> 
> 时间：2013-01-19T10:30:32.997
> 
> 标签：php, html, apache, .htaccess, mod-rewrite

我有一个网站，我们称它为 example.com。我还使用了一个很长的 htaccess，我正在发布其中的一部分

```
<filesMatch "\.(flv|gif|jpg|jpeg|png|ico|swf)$">
    Header set Cache-Control "max-age=7257600"
</filesMatch>
<filesMatch "\.(js|css|pdf|txt)$">
    Header set Cache-Control "max-age=604800"
</filesMatch>
<filesMatch "\.(html|htm)$">
    Header set Cache-Control "max-age=600"
</filesMatch>

AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css 
```

如何使在 example.com/.htaccess 中上传的 htaccess 不影响我`forum`位于`example.com/forum`

我要求这样的任何代码

```
<ifdirectory !"/forum">

//the htaccess code here

</ifdirectrory> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:12:12.887

要允许从父 .htaccess 执行重写规则（来自父文件夹的 htaccess），您需要明确允许它（Apache 会将当前 .htaccess 中的重写规则视为唯一需要执行的规则，只要重写的 URL 保留在相同的子文件夹）。

您需要将此行添加到子文件夹中的 .htaccess 中：

```
RewriteOptions inherit 
```

阿帕奇手册：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions)

[这是在这里](https://stackoverflow.com/questions/7337431/htaccess-in-subdirectory-overriding-parent-htaccess)找到的帖子的副本，对我没有任何贡献。向右看，在侧边栏中，有很多类似的主题 :)

# c# - 获取安全 PDF 中的页数

> ID：14413380
> 
> 赞同：0
> 
> 时间：2013-01-19T10:30:43.233
> 
> 标签：c#

我使用以下编码创建了一个 C# 应用程序，以获取 pdf 页数。

```
public static int GetNoOfPagesPDF(string FileName)
        {
            int result = 0;
            FileStream fs = new FileStream(FileName, FileMode.Open, FileAccess.Read);
            StreamReader r = new StreamReader(fs);
            string pdfText = r.ReadToEnd();

            System.Text.RegularExpressions.Regex regx = new Regex(@"/Type\s*/Page[^s]");
            System.Text.RegularExpressions.MatchCollection matches = regx.Matches(pdfText);
            result = matches.Count;
            return result;

        } 
```

但我无法获得受保护 PDF 中的页数。在这种情况下如何获得页数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:38:10.093

好吧，我不知道如何在没有第三部分库但[`iTextSharp`](http://sourceforge.net/projects/itextsharp/)有[`PdfReader`](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfReader.html)类和[`getNumberOfPages`](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfReader.html#getNumberOfPages%28%29)属性的情况下找到页数。

```
public int getNumberOfPages()
Gets the number of pages in the document.
Returns:
the number of pages in the document 
```

这是一个例子；

```
string path = @"C:\Users\Soner\Desktop\eBook\C#\sample.pdf";
PdfReader reader = new PdfReader(path);
int number = reader.NumberOfPages; 
```

# sql-server - 序列作为列的默认值

> ID：14413383
> 
> 赞同：23
> 
> 时间：2013-01-19T10:30:56.040
> 
> 标签：sql-server, tsql, sql-server-2012, sequence

我已经创建了一个序列：

```
create sequence mainseq as bigint start with 1 increment by 1 
```

如何将此序列用作列的默认值？

```
create table mytable(
    id      bigint not null default mainseq     -- how?
    code    varchar(20) not null
) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-19T10:35:54.370

事实证明这很容易：

```
create table mytable (
    id      bigint not null constraint DF_mytblid default next value for mainseq,
    code    varchar(20) not null
) 
```

或者如果表已经创建：

```
alter table mytable
add constraint DF_mytblid
default next value for mainseq
for id 
```

（感谢马特斯特罗姆的更正！）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-30T18:57:42.440

ALTER 语句并不完整。它需要另一个 FOR 子句来将默认值分配给所需的字段。

```
ALTER TABLE mytable
ADD CONSTRAINT DF_mytblid
DEFAULT (NEXT VALUE FOR mainseq) FOR [id] 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2017-11-09T20:27:14.353

```
create table users(
    u_id int identity(1,1) primary key,
    u_type varchar(30) default 'member', 
    entrydate datetime default (getdate()), 
    updatedate  datetime default (getdate()),
    isactive bit default 1,
    firstname varchar(30),
    lastname varchar(30),
    email varchar(50),
    password varchar(50)
) 
```

# html - 甚至从我的应用程序中的其他 windows8 应用程序听单击或双击？

> ID：14413392
> 
> 赞同：1
> 
> 时间：2013-01-19T10:32:13.067
> 
> 标签：html, windows-8, winjs

我想创建一个应用程序，它只在可能的情况下从所有其他 Windows 应用程序中侦听双击事件，然后打开并显示对话框，显示通过其他应用程序的双击事件选择的文本。

即我希望能够在我的 html5 + winJSapp 之外监听任何双击事件，然后在我的应用程序中处理选定的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:24:35.893

在沙盒中玩耍

> 首先是沙盒。Metro 风格的应用程序都是沙盒的：默认情况下，每个应用程序只能读取和写入自己的私有存储区域。如果应用程序需要做更多的事情——比如访问图片库，或者作为客户端或服务器连接到网络——它必须在称为清单的东西中明确指出它需要这些额外的功能。这可以防止应用程序能够读取彼此的文件、您没有明确授予它们读取权限的文档等等。这有两个目的；它有助于保护用户隐私，增强对从商店下载的应用程序的信心，还可以减少这些应用程序中安全漏洞的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:52:14.533

Windows 8 中的每个应用程序都在其自己的沙箱中，因此无法以您想要的方式与其他应用程序交互。

# java - DefaultTableModel setValueAt 抛出 ArrayIndexOutOfboundsException

> ID：14413393
> 
> 赞同：0
> 
> 时间：2013-01-19T10:32:15.377
> 
> 标签：java, swing, jtable

我的要求是在 Grid 中显示 StockQuote 符号（流数据）。为此，我选择了`JTable`.

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;

public class Preethi {

    protected void initUI() {
        final Random random = new Random();

        final DefaultTableModel model = new DefaultTableModel(new String[] { "Id", "Name", "Desg", "Sal" }, 0);
        final JTable table = new JTable(model);
        table.setFillsViewportHeight(true);
        JFrame frame = new JFrame(Preethi.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(table);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);

        Random ran = new Random(12);
        ran.nextFloat();

        String str = new String("sss");

        String[] socrates = {str, str, str };
        model.addRow(socrates);

        System.out.println(model.getRowCount());
        System.out.println(model.getColumnCount());

        model.setValueAt(new Object[]{"ewqeq","rtgre","gfdgd","mbmnb"}, 1, 4);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Preethi().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:13:21.523

```
model.setValueAt(new Object[]{"ewqeq","rtgre","gfdgd","mbmnb"}, 1, 4); 
```

第一行不存在，所以你会得到`ArrayIndexOutOfBoundsException.`所以正如 MadProgrammer 建议的那样，使用 addRow [(..)](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)方法并将你的对象传递给它。

**例子：**

```
model.addRow(new Object[]{"ewqeq","rtgre","gfdgd","mbmnb"}); 
```

**更新：**

您只定义了 4 列，因此索引将从 0 到 3。但是您在`setValueAt`方法中给出了 4。所以你的问题仍然是一样的。将其更改为 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:56:32.233

您不能设置不存在的行的值。

`DefaultTableModel`有个[`addRow`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5b%5d%29)

正如 Jon 所提到的，您不应该对数据对象使用静态方法和字段

# pycharm - pycharm在linux中安装有问题？

> ID：14413394
> 
> 赞同：0
> 
> 时间：2013-01-19T10:32:15.013
> 
> 标签：pycharm

./pycharm.sh OpenJDK 运行时环境 (IcedTea6 1.8.13) (6b18-1.8.13-0+squeeze2) OpenJDK 服务器 VM（内部版本 14.0-b16，混合模式）警告：您正在使用 OpenJDK Java 运行时启动 IDE。

```
 ITS KNOWN TO HAVE PERFORMANCE AND GRAPHICS ISSUES!
     SWITCH TO THE ORACLE(SUN) JDK BEFORE REPORTING PROBLEMS! 
```

注意：如果您同时安装了 Oracle (Sun) JDK 和 OpenJDK，请验证 PYCHARM_JDK、JDK_HOME 或 JAVA_HOME 环境变量是否指向有效的 Oracle (Sun) JDK 安装。有关切换默认 JDK 的更多信息，请参阅[ow.ly/6TuKQ](https://www.jetbrains.com/help/phpstorm/2016.1/system-requirements-and-installation.html?origin=old_help#h2linux)。

按 Enter 继续。

无法识别的 VM 选项“+UseCodeCacheFlushing”无法创建 Java 虚拟机。

如何安装 pycharm 我在 1.6 中有 sun jdk。会做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:09:08.037

请按照您粘贴的消息中的说明定义指向您的 Sun JDK 1.6 安装的 PYCHARM_JDK 环境变量。

# nsis - 为什么我不能在我的安装程序脚本中使用 onGUIInit？

> ID：14413398
> 
> 赞同：1
> 
> 时间：2013-01-19T10:32:31.750
> 
> 标签：nsis

我正在尝试在我的安装程序脚本上使用 onGUIInit 函数，但是在编译脚本时我收到 onguiinit 已经退出但只有一个 onguiinit 的错误

错误：

```
Function: ".onGUIInit"
Error: Function named ".onGUIInit" already exists. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:44:12.977

```
Function myonguiinit
FunctionEnd

!define MUI_CUSTOMFUNCTION_GUIINIT myonguiinit
!include MUI.nsh 
```

# c++ - 为什么一定要 Forward 声明一个类，并在一个头文件中包含对应的头文件

> ID：14413403
> 
> 赞同：5
> 
> 时间：2013-01-19T10:33:02.980
> 
> 标签：c++, class, header-files, forward-declaration

嗨，我注意到如果我在 a 中包含一个头文件，`.cpp`那么我可以创建该头文件类的一个对象。就像如果我包括在内`A.h`，`main.cpp`那么我可以写`A *a;`在`main.cpp`. 但是，如果我在另一个头文件中包含一个头文件，然后尝试创建包含的头文件的对象，这将不起作用。像，

**文件`B.h`：**

```
#include "A.h"
class B
{
public:
    B(){};
    A *a;
}; 
```

我必须添加类的前向声明`A`才能使其工作。为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-19T10:45:25.583

以下是基础知识：

*   对于任何类型`A`，如果你声明了一个 , , , 等类型的变量`A&`，`A*`那么`A**`编译`A***`器**不需要知道**`A`变量声明处的完整定义。它只需要知道`A`一个类型；这就对了。所以一个前向声明就足够了：

    ```
    class A; //forward declaration

    class B
    {
       A * pA;  //okay - compiler knows A is a type
       A & refA;/ okay - compiler knows A is a type
    }; 
    ```

    **不需要** 完整的定义，*因为*编译器仍然可以计算`sizeof(B)`哪个反过来依赖于`sizeof(A*)`和`sizeof(A&)`- 这些对于编译器来说是已知的，即使它不知道 `sizeof(A)`。请注意，这`sizeof(A*)`只是该平台上的指针大小（*通常* `4`是 32 位系统上的`8`字节或 64 位系统上的字节）。

*   对于任何类型`A`，如果你声明了一个类型为 , 等的变量`A`，`A[N]`那么`A[M]N]`编译器需要`A`在变量声明的地方知道类型的完整定义。在这种情况下，前向声明是**不够的。**

    ```
    class A; //forward declaration
    class B
    {
       A a;  //error - the compiler only knows A is a type
             //it doesn't know its size!
    }; 
    ```

    但这是正确的：

    ```
    #include "A.h" //which defines A

    class B
    {
       A a;  //okay
    }; 
    ```

    *需要*完整的定义**，** 以便编译器可以计算，如果编译器不知道 的定义，这是不可能的。*`sizeof(A)``A`*

     *请注意，*类的定义是*指“类成员、它们的类型以及类是否具有虚函数的完整规范”。如果编译器知道这些，它可以计算类的大小。* 

 *了解这些基础知识后，您可以决定是否将标头包含到其他标头中，或者仅前向声明就足够了。如果前向声明就足够了，那是您应该选择的选项。**仅在***需要*时才包含标题。

但是，如果你在头文件中提供前向声明`A`，`B.h`那么你必须将头文件包含`A.h`在它的实现文件中`B`，`B.cpp`因为在的实现文件中`B`，你需要访问`A`编译器需要完整定义的成员。 `A`. 同样，仅**当**您*需要访问*. `A`:-)

* * *

> 对不起，我没有看到你答案的最后一段。令我困惑的是为什么我还需要前向声明。不包括头文件Ah单独提供了A类的完整定义吗？——</p>

我不知道头文件中有什么。另外，如果尽管包含了头文件，但还需要提供前向声明，则*意味着*头文件实现不正确。我怀疑存在**循环依赖**：

*   确保没有两个头文件相互包含。例如，如果`A.h`包含`B.h`，则`B.h`不得`A.h`直接或间接包含。

*   **Use forward declaration and pointer-declaration to break such circular dependency.** The logic is pretty much straight-forward. If you cannot include `A.h` in `B.h`, which implies you cannot declare `A a` in `B.h` (because for this, you have to include the header `A.h` also). So even though you cannot declare `A a`, you can still declare `A *pA`, and for this a forward declaration of `A` is enough. That way you break the circular dependency.

Hope that helps.*

# c#-4.0 - C# for 循环递增 2 麻烦

> ID：14413404
> 
> 赞同：13
> 
> 时间：2013-01-19T10:33:06.763
> 
> 标签：c#-4.0

该算法即将通过将“A”、“B”存储到索引 8 和索引 9 来将字符串从数组 A 存储到数组 B 我真的开始使 B 的数组大小为 10，因为稍后我会在那里放一些其他的东西.

我的部分代码：

```
string[] A = new string[]{"A","B"}
string[] B = new string[10]; 
int count;

for(count = 0; count < A.length; count++)
{
      B[count] = A[count]
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-19T10:47:27.473

所以你想用 2 增加每个索引：

```
string[] A = new string[] { "A", "B", "C", "D" };
string[] B = new string[A.Length + 2];
for (int i = 0; i < A.Length; i++)
{
    B[i + 2] = A[i];
} 
```

[**演示**](http://ideone.com/8brFRU)

```
Index: 0 Value: 
Index: 1 Value: 
Index: 2 Value: A
Index: 3 Value: B
Index: 4 Value: C
Index: 5 Value: D 
```

**编辑**：所以你想从 B 中的索引 0 开始并且总是留下一个空白？

```
string[] A = new string[] { "A", "B", "C", "D" };
string[] B = new string[A.Length * 2 + 2]; // you wanted to add something other as well
for (int i = 0; i/2 < A.Length; i+=2)
{
    B[i] = A[i / 2];
} 
```

[**演示**](http://ideone.com/fZy4yz)

```
Index: 0 Value: A
Index: 1 Value: 
Index: 2 Value: B
Index: 3 Value: 
Index: 4 Value: C
Index: 5 Value: 
Index: 6 Value: D
Index: 7 Value: 
Index: 8 Value: 
Index: 9 Value: 
```

**更新**“除此之外还有其他编码吗？”

您可以使用 Linq，尽管它的可读性和效率不如简单循环：

```
String[] Bs = Enumerable.Range(0, A.Length * 2 + 2) // since you want two empty places at the end
 .Select((s, i) => i % 2 == 0 && i / 2 < A.Length ? A[i / 2] : null)
 .ToArray(); 
```

根据您上一条评论的最终**更新（***从 B 中的索引 1 开始*）：

```
for (int i = 1; (i-1) / 2 < A.Length; i += 2)
{
    B[i] = A[(i-1) / 2];
} 
```

[**演示**](http://ideone.com/OWkZyz)

```
Index: 0 Value: 
Index: 1 Value: A
Index: 2 Value: 
Index: 3 Value: B
Index: 4 Value: 
Index: 5 Value: C
Index: 6 Value: 
Index: 7 Value: D
Index: 8 Value: 
Index: 9 Value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:50:37.110

另一种猜测你想要什么的尝试：

```
string[] A = new string[] { "A", "B", "C", "D" };
string[] B = new string[A.Length * 2];
for (int i = 0; i < A.Length; i++)
{
    B[i*2] = A[i];
} 
```

# mysql - 例如下面如何写一个总和和计数？

> ID：14413412
> 
> 赞同：1
> 
> 时间：2013-01-19T10:35:04.060
> 
> 标签：mysql, sql, database, select

下面的 SQL 查询总结了会话中每个问题的每个罚分：

```
SELECT s.SessionId,q.QuestionId,SUM(pm.PenaltyMarks)
    FROM Session s
    INNER JOIN Question q ON s.SessionId = q.SessionId
    INNER JOIN Penalty_Marks pm ON q.QuestionId = pm.QuestionId
    WHERE (s.SessionId = 30)
    GROUP BY s.SessionId,q.QuestionId 
```

以下是输出显示的内容：

```
SessionId  QuestionId  Sum(pm.PenaltyMarks)
30         77          4
30         38          3
30         39          4 
```

但我现在想要做的是总结会话中的所有罚分。所以在上面的例子中，它将把第 30 节的罚分加起来，输出总罚分为`11`. 但我的问题是如何做到这一点？

所以下面是它的样子：

```
SessionId  TotalPenaltyMarks
30         11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:36:32.653

消除`q.QuestionId`

```
SELECT  s.SessionId, 
        SUM(pm.PenaltyMarks) TotalPenaltyMarks
FROM    Session s
        INNER JOIN Question q ON s.SessionId = q.SessionId
        INNER JOIN Penalty_Marks pm ON q.QuestionId = pm.QuestionId
WHERE   s.SessionId = 30
GROUP   BY s.SessionId 
```

该`GROUP BY`子句已经是可选的，因为您已经在过滤特定的`SessionId`.

# php - 以 HTML 表格格式显示 Mysql 数据

> ID：14413413
> 
> 赞同：0
> 
> 时间：2013-01-19T10:35:05.833
> 
> 标签：php, mysql, html-table

我有一个带有“名称”和“链接”值的 MySQL 表，现在我尝试在 html 表中显示这些值。

该表如下所示：

```
<table>
    <tr>
        <td width="260px"><a href="<?php echo $link; ?>" target="_blank" title="<?php echo $name; ?>"><?php echo $name; ?></a></td>
        <td width="260px"><a href="<?php echo $link; ?>" target="_blank" title="<?php echo $name; ?>"><?php echo $name; ?></a></td>
        <td width="260px"><a href="<?php echo $link; ?>" target="_blank" title="<?php echo $name; ?>"><?php echo $name; ?></a></td>
        <td width="260px"><a href="<?php echo $link; ?>" target="_blank" title="<?php echo $name; ?>"><?php echo $name; ?></a></td>
    </tr>
    <tr>
        <td>...</td>...
    </tr>
</table> 
```

但是现在，如何用 PHP 说在 4 个单元格 (td) 之后会创建一个新行 (tr)？我知道我需要一个 while 语句，但我不知道如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:38:02.667

制作一个`counter`将计数到 4 并且每次`counter%4 == 0`您知道这是第四个单元格时，您必须创建一个新行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:47:39.547

```
 <?php
    $j = 1; // counter
    while ($name_count > $j) 
    {
        echo "<tr>";
        for ($i = 1; $i <= 4; $i++) 
        {
              if($name_count < $j) 
                break; //exit from the loop if names are over

        ?>
          <td width="260px"><a href="<?php echo $link;?>" target="_blank" title="<?php echo $name; ?>"><?php echo $name; ?></a></td>
        <?php
            $j++;
        }
        echo "</tr>";
    }
    ?> 
```

# lua - 故事板是否可以与电晕上的 keyEvent 一起使用？

> ID：14413415
> 
> 赞同：1
> 
> 时间：2013-01-19T10:35:15.067
> 
> 标签：lua, coronasdk

我有 onKeyMenu 函数来处理 keyEvent，但是当我调用 gotoScene 方法时，应用程序就退出了。问题是什么？

这是我的代码

```
local function  onKeyMenu  (event) 
    local phase = event.phase
    local keyName = event.keyName
    if (event.phase == "up" and (event.keyName=="back" or event.keyName=="menu")) then
        if keyName == "menu" then
            showMenu()
        elseif keyName == "back" then           
            storyboard.gotoScene("menu", "fade") <--- cause app exit
        end
    end
    return true
end
Runtime:addEventListener( "key", onKeyMenu ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:31:57.187

您是否在日志中看到任何错误？它可能是 menu.lua 中的错误，或者更可能的情况是，在您要离开的场景中，您有一个正在运行的计时器，一个具有 onComplete 处理程序的 transition.to，一个具有 onComplete 处理程序的音轨当你离开那个场景时，没有什么可以完成，你的应用程序崩溃了。

# php - 如何检查是否在同一页面中使用php单击了提交按钮

> ID：14413418
> 
> 赞同：0
> 
> 时间：2013-01-19T10:35:45.473
> 
> 标签：php, mysql

```
<form method="get" action="<?php echo $_SERVER['PHP_SELF']?>">

<h3>Select your product and click submit</h3><br />

<select name="prod">

<option value="default">Select your product</option>

<option value="os">Operating Systems</option>

<option value="mobile">Smart Mobiles</option>

<option value="mobile">Computers</option>

<option value="shirt">Shirts</option>

</select><br /><br />

<input type="submit" value="Submit" name="submit"/>

</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:41:34.767

您可以检查提交控件的值是否存在。

```
if(isset($_GET['submit'])) 
```

这样，当表单将被发布时，$_GET['submit'] 将有一个值，那么您就可以知道表单已被发布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T10:37:28.600

如果提交按钮被点击，它将是一个成功的控件。检查表单数据中是否存在`submit`键。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T10:38:22.620

更容易使用 .click() 从 jQuery 进行检查，但添加一个布尔字段以在 db 中提交

# javascript - 单击链接时隐藏内容

> ID：14413422
> 
> 赞同：2
> 
> 时间：2013-01-19T10:36:10.800
> 
> 标签：javascript, jquery, hide

我有 4 个导航链接（见下文），其中 ID= 激活器显示内容，boxclose 关闭内容。

我可以单击所有激活器并打开所有内容，而它只需要打开一个并关闭另一个。

在这里查看我使用的脚本：
（werkwijze 是自定义的，我也有与其他名称相同的代码，例如 -contact）

```
$(function() {
        $('#activator-werkwijze').click(function(){
            $('#overlay-werkwijze').fadeIn('fast',function(){
                $('#box-werkwijze').animate({'bottom':'0px'},800);
            });
        });
        $('#boxclose-werkwijze').click(function(){
            $('#box-werkwijze').animate({'bottom':'-600px'},800,function(){
                $('#overlay-werkwijze').fadeOut('fast');
            });
        });
    });

<a id="activator-bureau" class="activator">bureau</a>
<a id="activator-werkwijze" class="activator">werkwijze</a>
<a id="activator-klanten" class="activator">klanten</a>
<a id="activator-contact" class="activator">contact</a> 
```

这是有效的脚本，（覆盖没用）jsfiddle.net/8y7Sr/126/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:02:47.813

您可以在激活器链接上使用数据属性，并将其用作选择器：

```
<a id="activator-bureau" class="activator" data-target="box-bureau">bureau</a>
<a id="activator-werkwijze" class="activator" data-target="box-werkwijze">werkwijze</a>
<a id="activator-klanten" class="activator" data-target="box-klanten">klanten</a>
<a id="activator-contact" class="activator" data-target="box-contact">contact</a>

<div id="box-contact" class="activatee">Something</div>
Etc.

$(function() {
    $(".activator").click(function(e) {
        var $target = $(e.target).data("target");
        $(".activatee").not("#" + $target).fadeOut('fast');
        $target.fadeIn() // or whatever your animation is
        Etc.
    })
}) 
```

# c# - 计算点击点的角度

> ID：14413427
> 
> 赞同：10
> 
> 时间：2013-01-19T10:36:45.867
> 
> 标签：c#, wpf, math

我正在制作一个 WPF 控件（旋钮）。我正在尝试根据圆内的鼠标单击位置计算出计算角度（0 到 360）的数学方法。

例如，如果我单击图像上 X,Y 的位置，我将有一个点 X,Y。我也有中心点，不知道如何获得角度。

![圆形图像](../Images/0e98fcb8d6334d1e8c2c02b3aece6c6a.png)

我的代码如下：

```
internal double GetAngleFromPoint(Point point, Point centerPoint)
{
    double dy = (point.Y - centerPoint.Y);
    double dx = (point.X - centerPoint.X);

    double theta = Math.Atan2(dy,dx);

    double angle = (theta * 180) / Math.PI;

    return angle;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T10:58:02.617

你几乎是对的：

```
internal double GetAngleFromPoint(Point point, Point centerPoint)
{
    double dy = (point.Y - centerPoint.Y);
    double dx = (point.X - centerPoint.X);

    double theta = Math.Atan2(dy,dx);

    double angle = (90 - ((theta * 180) / Math.PI)) % 360;

    return angle;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T10:54:13.110

你需要

```
double theta = Math.Atan2(dx,dy); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T11:04:39.520

正确的计算是这样的：

```
var theta = Math.Atan2(dx, -dy);
var angle = ((theta * 180 / Math.PI) + 360) % 360; 
```

* * *

您也可以让[Vector.AngleBetween](http://msdn.microsoft.com/en-us/library/system.windows.vector.anglebetween.aspx)进行计算：

```
var v1 = new Vector(dx, -dy);
var v2 = new Vector(0, 1);
var angle = (Vector.AngleBetween(v1, v2) + 360) % 360; 
```

# jquery - 复杂的正则表达式 - 是否可能

> ID：14413429
> 
> 赞同：0
> 
> 时间：2013-01-19T10:37:13.463
> 
> 标签：jquery, regex

首先，我是正则表达式的 N00b，它就像一种新语言，我在 ATM 上苦苦挣扎并寻找方向。

我有一个包含序列号字段的表单，但字段内容可以是 3 个可能的规则之一。

> **规则 1：**长度始终为 13 位置 1 始终为 C 位置 2-5 是数字 位置 6 是字母 位置 7-13 是数字
> 
> **规则 2：**长度为 8 或 9 位置 1-2 是字母 位置 3-8 是数字 位置 9 是字母
> 
> **Rule3 :** 长度为 9 位置 1-9 为数字

**我的问题：**这个公式是否可以在正则表达式中实现 - 以及子问题：我可以查看的指针或我可以破译的表达式？

抱歉，如果这太不合时宜了——RegEx 让我很头疼:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:44:11.660

试一试：

```
/^(C\d{4}[a-zA-Z]\d{7}|[a-zA-Z]{2}\d{6}[a-zA-Z]?|\d{9})$/ 
```

我想最后一个 alpha 在规则 #2 中是可选的

**解释：**

```
The regular expression:

(?-imsx:^(C\d{4}[a-zA-Z]\d{7}|[a-zA-Z]{2}\d{6}[a-zA-Z]?|\d{9})$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    C                        'C'
----------------------------------------------------------------------
    \d{4}                    digits (0-9) (4 times)
----------------------------------------------------------------------
    [a-zA-Z]                 any character of: 'a' to 'z', 'A' to 'Z'
----------------------------------------------------------------------
    \d{7}                    digits (0-9) (7 times)
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    [a-zA-Z]{2}              any character of: 'a' to 'z', 'A' to 'Z'
                             (2 times)
----------------------------------------------------------------------
    \d{6}                    digits (0-9) (6 times)
----------------------------------------------------------------------
    [a-zA-Z]?                any character of: 'a' to 'z', 'A' to 'Z'
                             (optional (matching the most amount
                             possible))
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    \d{9}                    digits (0-9) (9 times)
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

# javascript - 为什么父级可拖动的 div 会丢失其 contenteditable 属性？

> ID：14413432
> 
> 赞同：1
> 
> 时间：2013-01-19T10:37:26.193
> 
> 标签：javascript, jquery, jquery-ui

我有一个子 div，其父 div 可拖动，内容可编辑设置为 true。我正在使用 jQuery UI 使其父 div 可拖动，但子 div 失去其 contenteditable 属性。

我的问题是为什么那个孩子 div 会表现出这种行为？

```
$(".draggable").draggable(); 
```

[***小提琴链接***](http://jsfiddle.net/Va8gh/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:53:43.043

我不确定编辑和拖动是否可以同时发生。无论如何，您可以在单击可编辑区域时取消拖动：

```
$(".editable").on("mousedown", function (e) {
    e.stopPropagation();
    return;
}); 
```

要扩大可拖动区域，您需要缩小可编辑区域，如下所示：

```
.editable {
    max-width:190px;
    height:20px;
    border: 1px solid #f00;
    padding:1px;
    display: inline-block;
} 
```

[jsFiddle](http://jsfiddle.net/6tpgL/2/)的工作演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T16:55:33.677

这是最好的解决方案： $( `. draggable`).draggable() .click(function() { $(this).draggable({disabled: true}); }) .blur(function() { $(this).draggable( {禁用：假}); });

# javascript - javascript中的延迟函数

> ID：14413439
> 
> 赞同：0
> 
> 时间：2013-01-19T10:38:04.103
> 
> 标签：javascript

> **可能重复：**
> [在 Javascript 中休眠](https://stackoverflow.com/questions/758688/sleep-in-javascript)

我正在使用 javascript 动态编写 div。

我需要延迟时间将一个 div 写入另一个 div。

我正在使用 for 循环动态编写一个 div。

睡眠功能不工作。。

我的代码就像，

```
for(i=0;i<10;i++){
   sleep(100);
   $("#"+i).html("hi"+i);
}

function sleep(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
      break;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:40:34.943

你可以使用`setTimeout()`.

做一个谷歌搜索，你会看到很多示例用法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:42:45.673

您需要使用 getTimeout 函数，该函数在调用它之前需要一个回调和若干毫秒的等待时间。

```
for(i=0;i<10;i++){
    setTimeout((function(i) {
        return function() {
            $("#"+i).html("hi"+i);
        };
    })(i), 100) 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:23:27.007

另一种使用`setTimeout`方法，在内部函数中使用它：

```
function writeDivs() {
  var i = 0;
  var divsToCreate = 100;
  var timeToSleep = 100;
  var createOneDiv = function () {
    if (i < divsToCreate) {
      $("#"+i).html("hi"+i);
      i++;
      setTimeout(createOneDiv, timeToSleep);
    }
  }
  setTimeout(createOneDiv, timeToSleep);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T10:43:53.160

如前所述，使用 setTimeout()。你有细节[在这里](http://www.w3schools.com/jsref/met_win_settimeout.asp)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T10:40:53.443

使用 setInterval(function, 毫秒)

# python - django动态创建未知表模型

> ID：14413447
> 
> 赞同：1
> 
> 时间：2013-01-19T10:38:22.637
> 
> 标签：python, django, dynamic, model

我需要为现有的以前未知的表创建模型。其他人曾[说过](https://stackoverflow.com/questions/2136371/dynamic-django-model-creation-based-on-existing-db-table)

> 您可以查看[inspectdb](http://code.djangoproject.com/browser/django/trunk/django/core/management/commands/inspectdb.py)代码，而不是输出代码返回类。

但对于 python 新手来说，我遇到了困难。谁能提供一个更具体的例子来说明如何做到这一点？非常感谢。

更新：我正在探索[这个](http://dynamic-models.readthedocs.org/en/latest/topics/model.html#topics-model)。看起来很有希望。似乎有几种创建动态模型的选项，其中一些虽然需要非 mySQL 数据库（请参阅[此](https://stackoverflow.com/questions/7933596/django-dynamic-model-fields/7934577#7934577)stackoverflow Q）

UPDATE2：我现在可以使用以下函数在运行时创建以前未知的 mysql 表的模型。但是，当我尝试查询模型时，对于名为 'table1' 的表，我得到“表 'djangodb.subscription_table1' 不存在”）。当我将 'table1' 重命名为 'subscription_table1' 时，出现此错误：“表 'djangodb.subscription_subscription_tb2f1e1e47d73417ab2b187bc4a08bf57' 不存在”）。

帮助！

最后更新：我针对我的特定问题采用了另一种解决方案：[Django - List of Dictionaries to Tables2](https://stackoverflow.com/questions/14366098/django-list-of-dictionaries-to-tables2/14438782#14438782)

```
def getModel(table_name):
    myColumns=getColumns(table_name)

    attrs = {}
    attrs['__module__']  = 'subscription.models'

    for x,y in myColumns.items():
        fieldType = y["type"]
        if x == 'id': ''
        elif   fieldType  == "char":    attrs[x]=models.CharField(max_length='length')
        elif fieldType  == "float":   attrs[x]=models.FloatField(max_length='length')   
        elif fieldType  == "int":     attrs[x]=models.IntegerField()
        elif fieldType  == "text":    attrs[x]=models.TextField()
        else: print "AW PROB in exptDB---------------",x,y["type"],y["length"] 

    myModel = type(str(table_name), (models.Model,), attrs) 

    return myModel

def getColumns(expt_id):
    cursor = connection.cursor()
    cursor.execute("desc %s;" % (expt_id))
    exptInfo = str(cursor.fetchall())[1:-1]

    myList= exptInfo.split("""(u'""")
    myColumns = {}
    for item in myList:
        mySplit = item.replace("u'","").replace("'","").replace(" ","").split(",")
        if len(mySplit)>=2:  
            subSplit=mySplit[1].split("(")
            if len(subSplit)>=1: 
                subSplit.append('999')#does not latter.  
                myColumns[mySplit[0]]={"type":subSplit[0],"length":subSplit[1].replace(")","")}

    return myColumns 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:45:48.030

您想使用该`inspectdb`命令。它正是为这种情况而设计的。

但是，您无需查看`inspectdb`代码，只需阅读以下专门针对此问题的页面：[https ://docs.djangoproject.com/en/dev/howto/legacy-databases/](https://docs.djangoproject.com/en/dev/howto/legacy-databases/)

# c# - Windows 商店应用程序中缺少 AsyncResult？

> ID：14413449
> 
> 赞同：0
> 
> 时间：2013-01-19T10:38:37.697
> 
> 标签：c#, asynchronous, windows-store-apps

我正在将大量使用[异步编程模型](http://msdn.microsoft.com/en-us/library/ms228963.aspx)(APM) 的 .Net 库移植到 Windows 商店应用程序库。

我想保持方法定义相同，以便使用该库的其他代码仅适用于 Windows 商店应用程序版本。（即我更喜欢它，没有异步等待模式）。

问题是尽管 Windows 商店应用程序似乎与 APM 兼容，但缺少具体的[AsyncResult](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.asyncresult.aspx)类。结果，无法获取`BeginInvoke()`在回调和调用中调用的委托实例`EndInvoke()`：

```
public MyObject EndDoSomething (IAsyncResult result)
{
    // Retrieve the delegate.
    AsyncResult asyncResult = (AsyncResult)result; // Not possible in Windows store app - no AsyncResult

    // Wait for the WaitHandle to become signaled.
    result.AsyncWaitHandle.WaitOne();

    // Call EndInvoke to retrieve the results.
    MyObject rv = ((MyAsynchronousDelegate)asyncResult.AsyncDelegate).EndInvoke(result);

    // Close the wait handel
    result.AsyncWaitHandle.Close()  // Close() is also missing

    return rv;
} 
```

那么一个人该做什么呢？

# sql - 文本框中变量的 WHERE 子句

> ID：14413452
> 
> 赞同：0
> 
> 时间：2013-01-19T10:38:45.203
> 
> 标签：sql

我通常`WHERE`这样写我的条款：

```
WHERE (InvoiceTable.ClientName LIKE '%' + @ClientName + '%' ) 
```

但是现在我想写一个`WHERE`子句，它将给我所有小于输入的数据，例如 5。所以如果我想要 a`PriceRatio`小于 5 的所有数据，我在文本框中的输入是 5 .

我怎么写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:42:06.123

你的意思是：

```
Select * from table where PriceRatio < 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:04:50.000

我想你希望你的`where`条款是这样的：

```
where priceratio < cast(@input_number as int) 
```

只要确保数据类型符合您的预期，例如，如果输入始终是整数，那么上面的就可以了，除非它是一个大整数，同样如果是小数，那么上面的整数就不合适了。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms187928%28SQL.90%29.aspx)。

# web-crawler - 如何使用 MyCrawler.java Controller.java 文件运行 crawler4j.jar

> ID：14413454
> 
> 赞同：0
> 
> 时间：2013-01-19T10:38:56.990
> 
> 标签：web-crawler, crawler4j

我是爬虫新手，我想运行我的第一个爬虫程序。我有三个文件

1.  爬虫4j.jar
2.  Mycrawler.java
3.  Controller.java 当我在终端输入**javac -cp crawler4j-3.1.jar MyCrawler.java Controller.java**时出现以下错误：

"

```
MyCrawler.java:32: cannot find symbol
symbol  : method getText()
location: class edu.uci.ics.crawler4j.crawler.Page
String text = page.getText();
                  ^
MyCrawler.java:33: cannot find symbol`enter code here`
symbol  : method getURLs()
location: class edu.uci.ics.crawler4j.crawler.Page
ArrayList links = page.getURLs();
                      ^
Controller.java:5: cannot find symbol
symbol  : constructor CrawlController(java.lang.String)
location: class edu.uci.ics.crawler4j.crawler.CrawlController
CrawlController controller = new CrawlController("/data/crawl/root");
                             ^
3 errors" 
```

我在哪里犯错了？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:20:57.933

您应该编写一个控制器和一个爬虫。

这是 Controller.java 文件：

```
import edu.uci.ics.crawler4j.crawler.CrawlConfig;
import edu.uci.ics.crawler4j.crawler.CrawlController;
import edu.uci.ics.crawler4j.fetcher.PageFetcher;
import edu.uci.ics.crawler4j.robotstxt.RobotstxtConfig;
import edu.uci.ics.crawler4j.robotstxt.RobotstxtServer;

public class Controller {
public static void main(String[] args) throws Exception {

    RobotstxtConfig robotstxtConfig2 = new RobotstxtConfig();

    System.out.println(robotstxtConfig2.getCacheSize());
    System.out.println(robotstxtConfig2.getUserAgentName());

    String crawlStorageFolder = "/crawler/testdata";
    int numberOfCrawlers = 4;
    CrawlConfig config = new CrawlConfig();
    config.setCrawlStorageFolder(crawlStorageFolder);

    PageFetcher pageFetcher = new PageFetcher(config);
    RobotstxtConfig robotstxtConfig = new RobotstxtConfig();

    System.out.println(robotstxtConfig.getCacheSize());
    System.out.println(robotstxtConfig.getUserAgentName());

    RobotstxtServer robotstxtServer = new RobotstxtServer(robotstxtConfig, pageFetcher);
    CrawlController controller = new CrawlController(config, 
                 pageFetcher, robotstxtServer);

    controller.addSeed("http://cyesilkaya.wordpress.com/");
    controller.start(Crawler.class, numberOfCrawlers);
  }
   } 
```

这是 Crawler.java 文件：

```
 import java.io.IOException;
   import org.jsoup.Jsoup;
   import org.jsoup.nodes.Document;
   import org.jsoup.nodes.Element;
   import edu.uci.ics.crawler4j.crawler.Page;
   import edu.uci.ics.crawler4j.crawler.WebCrawler;
   import edu.uci.ics.crawler4j.url.WebURL;

   public class Crawler extends WebCrawler {

    @Override
    public boolean shouldVisit(WebURL url) {
         // you can write your own filter to decide crawl the incoming URL or not.
        return true;
    }

    @Override
    public void visit(Page page) {          
        String url = page.getWebURL().getURL();
        try {
        // Do whatever you want with the crawled page    
    }
    catch (IOException e) {
    }
      }
   } 
```

只需运行 Controller.class

# ember.js - 使用 ember 的 linkTo 助手时，“未捕获的类型错误：无法调用未定义的方法‘切片’”

> ID：14413456
> 
> 赞同：0
> 
> 时间：2013-01-19T10:39:07.553
> 
> 标签：ember.js, ember-router

使用：

*   ember.js 提交 b2e82ae
*   ember-data.js 提交 001ba0c
*   车把-1.0.rc.2.js

这曾经可以与最新的路由器 API 一起使用，但现在在升级到最新提交后会中断。这也是第一个告诉我将 rc.2 用于车把的升级，这可能是一个提示。

linkTo帮助**器在解析****todo_items**模板时引发错误： `Uncaught TypeError: Cannot call method 'slice' of undefined`。

```
# router
App.Router.map(function() {
 this.resource('todo_items', function() {
   this.route('todo_item', {
      path: '/:todo_item_id'
    });
  });
});

App.TodoItemsRoute = Ember.Route.extend({
  model: function() {
    return App.TodoItem.find();
  }
});

# todo_items.handlebars
<ul>
  {{#each item in content}}
  <li>
    {{#linkTo todo_items.todo_item item}}{{item.title}}{{/linkTo}}
  </li>
  {{/each}}
</ul> 
```

当我将 linkTo 的第一个参数用引号括起来时，没有什么区别`linkTo "todo_items.todo_item" item`，同样的错误也会发生。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:23:56.417

我有一个类似的问题，它是由 ember.js 的 HEAD 工作引起的。切换到官方 1.0.0-pre.4 版本解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:41:35.320

你使用预编译的模板吗？

我使用 grunt-ember-templates 来编译车把模板，我有同样的错误

我已经通过升级用于编译模板的把手版本解决了这个问题。

# java - 如何创建一个将替换现有 java 类的类？

> ID：14413459
> 
> 赞同：0
> 
> 时间：2013-01-19T10:39:40.813
> 
> 标签：java, oop, class, inheritance

我需要创建一个类来替换 jdk 中的现有类。

即例如。我想创建一个可以替换 java.io.File 的类作为 NewFile 。替换我的意思不是在 jdk 中替换，而是在我自己的包中给它一个新的实现，但它应该用作现有的 java.io.File 。

扩展 java.io.File 是否有帮助或任何其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:45:06.227

是的，只需扩展它，它将获得 java.io.file 的所有行为。然后，您将可以自由地向其添加新行为，并通过覆盖方法来更改行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:44:58.033

不确定您要实现什么，但如果您不想扩展任何功能，则不需要这样做。如果你是为了好玩，你可以扩展它并使用它。但是，如果一个类是`final`，则不能扩展它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T11:06:36.513

创建您的类并将其放在类路径中的 jdk jar 之前。将选择您的课程而不是 jdk 课程。

# android - Android ACRA#init 多次调用

> ID：14413465
> 
> 赞同：1
> 
> 时间：2013-01-19T10:40:22.960
> 
> 标签：android, acra

我正在使用 ACRA 获取崩溃报告，我的应用程序因以下错误而崩溃。

```
java.lang.IllegalStateException: ACRA#init called more than once
    at org.acra.ACRA.init(ACRA.java:121)
    at com.m7.nomad.NomadApplication.onConfigurationChanged(NomadApplication.java:15)
    at android.app.ActivityThread.performConfigurationChanged(ActivityThread.java:3515)
    at android.app.ActivityThread.handleConfigurationChanged(ActivityThread.java:3655)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1128)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:150)
    at android.app.ActivityThread.main(ActivityThread.java:4369)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:846)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:604)
    at dalvik.system.NativeStart.main(Native Method) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T12:17:52.683

我认为这很明确=> ACRA.init 方法被调用了两次（或更多）

为什么在 onConfigurationChanged 方法中初始化 ACRA？

每次更改配置时都会调用 onConfigurationChanged（很好的推论 Dr Watson ...）：例如，当您更改手机的方向时，...

您应该在 Application.onCreate 方法中初始化 ACRA（仅调用一次）：

```
public class MyApplication extends Application {
  @Override
  public void onCreate() {
    super.onCreate();
    ACRA.init(this);
  }
} 
```

# sql - PostgreSQL 唯一索引复合键

> ID：14413466
> 
> 赞同：1
> 
> 时间：2013-01-19T10:40:27.860
> 
> 标签：sql, postgresql, null, indexing, unique-index

我需要基于四列对表创建一个限制，其中两个是互斥的，我的意思是，如果一个是 NULL，另一个不是。

理想的脚本是这样的：

```
ALTER TABLE ONLY t_users_prizes
ADD CONSTRAINT t_user_prize_test_circuit_key
UNIQUE (id_event||':'||id_circuit, id_prize, id_user); 
```

但是 Postgres 不允许这种连接。

如何实施此限制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T12:01:52.333

`NULL`值不违反`UNIQUE`约束 - 两个`NULL`不被视为相等！所以一个简单的`UNIQUE`约束是行不通的。

您可以使用**两个[部分`UNIQUE`索引](https://www.postgresql.org/docs/current/indexes-partial.html)**和一个[`CHECK`约束](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-CHECK-CONSTRAINTS)来完成它：

```
CREATE TEMP TABLE foo (
  a int
, b int
, c int NOT NULL
, d int NOT NULL
, CHECK ((a IS NOT NULL AND b IS NULL) OR (b IS NOT NULL AND a IS NULL))
);

CREATE UNIQUE INDEX foo_acd_idx ON foo(a,c,d)
WHERE b is NULL;

CREATE UNIQUE INDEX foo_bcd_idx ON foo(b,c,d)
WHERE a is NULL;

INSERT INTO foo VALUES (NULL,2,3,4);
INSERT INTO foo VALUES (NULL,2,3,4);  -- error! 
```

我宣布`c`and `d`as `NOT NULL`，以防止进一步的并发症。

看：

*   [使用空列创建唯一约束](https://stackoverflow.com/questions/8289100/create-unique-constraint-with-null-columns/8289253#8289253)

要同时禁止`(1, NULL, 3, 4)`and `(NULL, 1, 3, 4)`，您可以使用一个索引 with`COALESCE`来代替：

```
CREATE UNIQUE INDEX foo_xcd_idx ON foo(COALESCE(a,b),c,d); 
```

# css - html5，如何为不同的情况设置不同的图形样式？

> ID：14413467
> 
> 赞同：-1
> 
> 时间：2013-01-19T10:40:33.610
> 
> 标签：css, html

我想在单页上显示图形底部的 figcaption，并在列表页上与图形并排显示。所以，我在图形标签中添加了“list”或“single”类。然后，在 css 文件中，我使用这 2 个代码对它们进行不同的样式设置：

```
figure .list{....}
figure .single{...} 
```

上面的css对图形显示没有任何影响。只有 figcaption 对`.class figcaption`代码做出反应。我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:53:14.640

如果我理解正确，您想要设置 figcaptions 的样式。为此，您需要针对它们。此外，当向元素添加类时，应将类写入到元素，如下所示：

```
figure.list > figcaption { }
figure.single > figcaption { } 
```

这仅适用`figcaption`于图形的直接子代（因此`>`）。如果不是，你可以使用这个：

```
figure.list figcaption { }
figure.single figcaption { } 
```

* * *

如果您希望使用 CSS 中的类来定位元素，请编写使用点连接到元素的类。像这样：

```
figure.list { } 
```

此 CSS 可能被**a)**由另一个文件（例如 JS 或 PHP 文件）添加的样式或内联样式**b)**在第一个样式之后编写的样式**c)**针对相同元素的样式但被更彻底/具体地定义**d)** [`!important`](http://www.electrictoolbox.com/using-important-css/)。

```
body figure.list {float: left;}
figure.list {float: none;} 
```

[例子](http://jsfiddle.net/N7gPW/)。即使人们期望第二行中的值会覆盖前一行，**但这不会发生**，因为第一行比最后一行更具体。

如果您似乎无法找到样式显示不正确的原因，请尝试使用浏览器的*开发人员工具(F12)。*Chrome 的工具非常好，但我不太喜欢 Firefox 的。但是，您可以使用[Firebug 插件](http://getfirebug.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:38:20.067

尝试删除点之前的空格：

```
figure.list{....}
figure.single{...} 
```

# java - 在运行时更改基类 java

> ID：14413471
> 
> 赞同：1
> 
> 时间：2013-01-19T10:40:47.370
> 
> 标签：java, android, oop, inheritance

您好，我有一个`Activity`( )，我想在API 级别为 14 及以上`class`时为其启用 NFC 功能。`android`我不想在下面启用它。现在`Activity`是 1000 行，要使用`NFC`我必须`class`在`jar`文件中扩展 a。所以我该怎么做 ？？？我不能`aggregation`用于 NFC ！而且我不想制作 2`Activities`并将相同的代码复制到它们并让其中一个扩展 NFC。任何解决方法，如果您想要更多澄清发表评论，对不起。我不是`OOP`超级明星。

**编辑**

![在此处输入图像描述](../Images/1c2078ae84fa9f73e1c8c61dfd486b03.png)

我想要做的是在 android API 级别 14 上使 VideoActivity 扩展 NFC 自定义类。因为 NFC 自定义类 continas api 在 android API 级别 14 上可用

当 API 级别低于 14 时，我希望 VideoActivity 扩展 Activity 类。

![在此处输入图像描述](../Images/dec947cb1417dbfa29fcc011b74f41b7.png)

注意：NFC 自定义类存在于一个 jar（库 jar）中。

# ios - 如何用红色绘制 UIImageView 框架

> ID：14413479
> 
> 赞同：0
> 
> 时间：2013-01-19T10:41:42.767
> 
> 标签：ios, objective-c, cocoa-touch, uiimageview

我希望能够将我`UIImageView`的框架绘制为红色，以便在旋转和缩放它时可以看到它。设置图层边框宽度和颜色不是我需要的，因为如果我旋转它，它也会旋转图层（而`UIImageView`框架不会旋转）。这甚至可能吗？任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T10:44:43.580

将其放在具有红色背景色的较大 UIView 上。

```
UIView *redBackgroundView = [[UIView alloc] initWithFrame: … /* a bigger frame than imageView*/)];
[redBackgroundView: addSubview: imageview];
[self.view addSubview: redBackgroundView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:46:41.090

添加框架`#import "QuartzCore/QuartzCore.h"`

```
UIImageView *imgReport = [[UIImageView alloc] initWithFrame:CGRectMake(50, 20,250,150)] ;
    imgReport.backgroundColor = [UIColor yellowColor];
    imgReport.layer.cornerRadius = 7.0; // change cornerRadius as per you requriment
    imgReport.layer.masksToBounds = YES;
    imgReport.layer.borderColor = [UIColor redColor].CGColor;
    imgReport.layer.borderWidth = 5.0;
 [self.view addSubview:imgReport]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:03:54.393

您可以使用 UIImageView 对象的 backgroundColor 属性将 UIImageView 的背景颜色设置为红色。

# logging - 日志文件未正确附加

> ID：14413483
> 
> 赞同：0
> 
> 时间：2013-01-19T10:42:19.353
> 
> 标签：logging, log4j

在我的应用程序中使用...log4j 文件附加程序无法正常工作...我的日志文件大小保持 3000kB，之后新的日志文件没有创建并且它覆盖了现有的日志文件...

它没有创建 loggy.log、loggy.log1、loggy.log2 ....

当它达到 3000KB 时，它会在 loggy.log 中覆盖...

会是什么问题...

这是我的 log4j.properties

```
log4j.watch=true
log4j.readtime=30000

log4j.rootCategory=DEBUG, applicationlogging
log4j.rootCategory=DEBUG, strutslogging

log4j.category.applicationlogging = DEBUG, applicationlogging

##set logging level for HttpClient
log4j.logger.org.apache.commons.httpclient=DEBUG
log4j.logger.httpclient.wire.header=OFF
log4j.logger.httpclient.wire.content=OFF
log4j.additivity.applicationlogging = false
log4j.additivity.strutslogging = false

# inven.log
log4j.appender.applicationlogging=org.apache.log4j.RollingFileAppender
#log4j.appender.applicationlogging.File=C:/Program Files/Apache Software Foundation/Tomcat6.0/webapps/Project/WEB-INF/logs/loggy.log
log4j.appender.applicationlogging.File=E:/Final/Project/WebContent/WEB-INF/logs/loggy.log
#og4j.appender.applicationlogging.File=C:/Program Files (x86)/Apache Software Foundation/Tomcat 6.0/webapps/Project/WEB-INF/logs/loggy.log
log4j.appender.applicationlogging.MaxFileSize=3000KB
log4j.appender.applicationlogging.MaxBackupIndex=50
log4j.appender.applicationlogging.layout=org.apache.log4j.PatternLayout
log4j.appender.applicationlogging.layout.ConversionPattern=%d - %m%n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:21:20.053

尝试添加这个：

```
 log4j.appender.applicationlogging.Append=true 
```

# sql - SQL 删除自动命名的约束

> ID：14413486
> 
> 赞同：12
> 
> 时间：2013-01-19T10:42:36.397
> 
> 标签：sql, sql-server, constraints

我使用脚本在我的表上创建了一些约束，但没有指定约束名称。结果，我最终受到了限制`FK__DOC_OBGS___kntr___54E63309`，例如。

是否可以在不指定确切约束名称的情况下删除该约束？

例如，像这样的东西（不起作用）

```
ALTER TABLE DOC_OBGS_10 DROP CONSTRAINT LIKE 'FK__DOC_OBGS___kntr%' 
```

问题是我们有很多带有这个表的数据库，我需要从表中删除所有约束，但显然每个表的名称都不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T10:48:46.303

SQL 中的 DDL 命令不与 like 运算符配合使用。

但是，您可以使用 information_schema 视图并轻松地为删除约束命令构建 SQL，如下所示：

```
SELECT 'ALTER TABLE DOC_OBGS_10 DROP CONSTRAINT ' + CONSTRAINT_NAME
FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS 
WHERE CONSTRAINT_NAME LIKE 'FK__DOC_OBGS___kntr%' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T09:35:30.827

```
DECLARE @sql1 NVARCHAR(MAX);
SELECT @sql1 = c
FROM
(
    SELECT 'ALTER TABLE DOC_INVS_1 DROP CONSTRAINT ' + CONSTRAINT_NAME + '; '
    FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE TABLE_NAME = 'DOC_INVS_1'
    and CONSTRAINT_NAME LIKE 'FK__DOC_INVS___kntr%' 
) T(c);

EXEC(@sql1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-26T09:39:02.693

在使用 Access to SQL Server upizing tool 后，我遇到了类似的问题。在我的情况下，我需要循环所有表以匹配约束，可以这样完成：

```
DECLARE @sql1 NVARCHAR(MAX);

-- Concatenate all the drop statements in the inner loop into a single SQL string
SELECT @sql1 = STUFF((SELECT '; ' + a.t FROM 
(
    -- find all the constraints we're interested in and create a list of 
    -- SQL statements to drop them
    SELECT 'ALTER TABLE [' + p.name + '] DROP CONSTRAINT [' + o.name + ']' as t
    FROM sys.objects o
    left join sys.objects p on o.parent_object_id = p.object_id 
    WHERE o.name LIKE '%disallow_zero_length' 
) a
FOR XML PATH('')), 1, 2, '')

print @sql1

-- Execute the bit concatenated drop statement
EXEC(@sql1); 
```

`STUFF`您可以在更高版本的 SQL Server 中避免使用该方法，有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/194852/how-to-concatenate-text-from-multiple-rows-into-a-single-text-string-in-sql-serv)。

# three.js - 围绕其中心点旋转自定义几何网格

> ID：14413492
> 
> 赞同：3
> 
> 时间：2013-01-19T10:43:41.670
> 
> 标签：three.js

当我们将 CustomGeometry 添加到定义顶点而不设置位置的场景时，我们如何让它围绕自己的中心点旋转？

小提琴：http://jsfiddle.net/tezcancirakoglu/Ldt7z

在示例代码中，对象围绕场景 X 轴旋转。我需要围绕它的中心点旋转它。

提示：红色立方体网格是旋转对象的初始中心点。我需要围绕红色立方体的 x 轴旋转它......我尝试了很多但还是失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:51:45.860

一种解决方案是平移网格几何体，并通过更改网格位置进行补偿，如下所示：

```
var offset = objMesh.centroid.clone();
objMesh.geometry.applyMatrix(new THREE.Matrix4().makeTranslation( -offset.x, -offset.y, -offset.z ) );
objMesh.position.copy( objMesh.centroid ); 
```

更新小提琴：http: [//jsfiddle.net/Ldt7z/165/](http://jsfiddle.net/Ldt7z/165/)

PS你不需要在运行它之前保存你的小提琴。没有理由有这么多版本。

三.js r.55

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T20:19:41.423

您可以使用边界框的中心，这基本上是顶点的“平均值”，但不能保证落在红色立方体上。

# java - Scala Spring IoC 和 JSF

> ID：14413494
> 
> 赞同：1
> 
> 时间：2013-01-19T10:43:52.840
> 
> 标签：java, spring, scala, jsf

我有一个弹簧注射问题，我已经尝试解决 4 天但没有得到任何结果：

在我的春季配置中，我有：

```
<bean id="applicationCache" class="domain.ui.ApplicationCacheServiceImpl">
    <property name="divisionSelectOptionsCache" ref="divisionSelectOptionsCache"/>
</bean>

<bean id="divisionSelectOptionsCache" class="domain.jsf.DivisionSelectOptionsCache"></bean> 
```

**ApplicationCacheServiceImpl.scala 看起来像这样：**

```
class ApplicationCacheServiceImpl extends ApplicationCacheService{
   var divisionSelectOptionsCache: DivisionSelectOptionsCache = _

   def setDivisionSelectOptionsCache(dsoc: DivisionSelectOptionsCache) ={
     divisionSelectOptionsCache = dsoc
   }
 .... 
```

**DivisionSelectOptionsCache.scala 看起来像这样：**

```
class DivisionSelectOptionsCache extends Converter{
   val options = mutable.Map[String, DivisionSelectOption]()
   var em: EntityManager = _

   // Just left this in case its  relevant. Throws no errors though
   @PersistenceContext
   def setEntityManager(entManager: EntityManager) = {
      em = entManager
   }
   .... 
```

应用程序编译并构建了一个战争。但是，当我部署它时，我得到以下异常消息：

```
INFO: Initializing Spring root WebApplicationContext
Jan 18, 2013 7:56:17 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'applicationCache' defined in class path resource 
applicationPersistence.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: 
Failed to convert property value of type '$Proxy15 implementing javax.faces.convert.Converter,org.springframework.aop.SpringProxy,
org.springframework.aop.framework.Advised' to required type 'com.domain.jsf.DivisionSelectOptionsCache' 
for property 'divisionSelectOptionsCache'; nested exception is java.lang.IllegalStateException: 
Cannot convert value of type [$Proxy15 implementing javax.faces.convert.Converter,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised]
 to required type [com.domain.jsf.DivisionSelectOptionsCache] for property 'divisionSelectOptionsCache': no matching editors or conversion strategy found
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
 .....
Caused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type '$Proxy15 implementing javax.faces.convert.Converter,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised' to required type 'com.domain.jsf.DivisionSelectOptionsCache' for property 'divisionSelectOptionsCache'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [$Proxy15 implementing javax.faces.convert.Converter,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised] to required type [com.domain.jsf.DivisionSelectOptionsCache] for property 'divisionSelectOptionsCache': no matching editors or conversion strategy found
  at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:485)
  at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)
....
Caused by: java.lang.IllegalStateException: Cannot convert value of type [$Proxy15 implementing javax.faces.convert.Converter,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised] to required type [com.domain.jsf.DivisionSelectOptionsCache] for property 'divisionSelectOptionsCache': no matching editors or conversion strategy found
  at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:247)
  at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)
  ... 31 more

Jan 18, 2013 7:56:20 PM org.apache.catalina.core.StandardContext filterStop
FINE: Stopping filters 
```

**所以：** `ApplicationCacheServiceImpl`正在寻找 spring 来注入属性`divisionSelectOptionsCache`，对应的类型`DivisionSelectOptionsCache`是正确的，并且在 spring config xml 文件中定义。

上课`DivisionSelectOptionsCache` `extends` `Converter`，所以那里应该没有问题。

所以我被困住了。我什至尝试取出 spring IoC 并使用 google Guice 进行编译时间检查而不是部署时间检查（没有 xml 配置文件），但这不起作用，因为应用程序依赖于 Spring 来提供托管 jsf bean。

请帮忙，因为我快要告诉客户它无法完成。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:04:55.380

使用类似[http://java.decompiler.free.fr/](http://java.decompiler.free.fr/)的反编译器来检查 Scala 编译器生成的字节码。很可能它没有按照你的想法做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T05:25:21.670

从你问这个问题到现在已经过去了太多时间，但我会回答它，也许这是别人的问题，

这个问题出现在 Spring 使用`JDK proxy`. 因为`JDK proxy`所有的类都应该有“接口”，而你的`DivisionSelectOptionsCache`类没有实现任何接口，那么就会出现这样的问题，有两种解决方案：

*   为所有类实现接口

*   使用`CGLIB`代理

为了使用`CGLib`代理，您应该在 lib 文件夹中添加 lib 并使用

```
<aop:aspectj-autoproxy proxy-target-class="true"/> 
```

在`application-context`. 的默认值为，`proxy-target-class`即。`false``JDK proxy`

# php - 当我在 PHP 中实例化一个类时，我会得到一个指向该对象的指针吗？

> ID：14413496
> 
> 赞同：3
> 
> 时间：2013-01-19T10:44:05.057
> 
> 标签：php, object, instance-variables

或者，我的变量是否包含对象本身？

例如，当我说：

```
$obj = new ClassOne(); 
```

$obj 是指向在内存中创建的对象的指针吗？它是否只保存对象的内存地址？还是它持有对象本身？

例如，当我说，

```
$obj = new SomeOtherClass(); 
```

ClassOne 对象会像在 JAVA 中那样被垃圾收集，还是会像在 C++ 中那样导致内存泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:47:52.290

[文档](http://php.net/manual/en/oop5.intro.php)说：

> PHP 以与引用或句柄相同的方式处理对象，这意味着每个变量都包含一个对象引用，而不是整个对象的副本。请参阅对象和引用。

阅读文档。这就是它被写出来的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:49:58.620

PHP中没有*指针*。保存对象的变量保存*对象标识符*或*对象引用*。那是一个基本上具有值类型`object`的变量`42`（或任何内部对象标识符）。它是一个引用对象的值，该对象存储在内存中的某个位置。它不是指针或内存地址。将另一个对象分配给变量会为变量分配另一个对象标识符，它不会改变任何内存地址或先前分配的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:51:03.707

简而言之，C++ 和 Java 中的对象模型有些不同：

*   C++ 具有不受约束的变量：每个对象类型都可以作为变量对象的类型出现。换句话说，变量可以是任何类型的对象。（但并非所有变量都是对象（例如引用）！）此外，所有变量都是范围的，因此所有变量对象的生命周期也是自动范围的。只有动态分配的对象永远不能是变量，它们只能通过指针和引用来处理。

*   在Java中，如果我们忽略原始类型，变量就*永远不是*对象，对象也永远不是变量。所有对象总是“神奇地存在于其他地方”（例如“GC 堆”），您只能通过类似指针的句柄来处理它们。在 Java 中，类型*变量*`T`始终是对实际`T`存在于其他地方的类型对象的引用。变量也是有作用域的，就像在 C++ 中一样，但是所有 Java*对象*的生命周期是不确定的，并且只能保证超出对给定对象的所有引用的生命周期。

    (The situation is different for built-in, "value"-type types like `int`, which *can* occur as the type of variables, and in fact *cannot* be allocated dynamically.)

*   I think PHP is similar to Java in that regard.

# php - 来自简单 php/mysql 的 CPU 使用情况

> ID：14413500
> 
> 赞同：1
> 
> 时间：2013-01-19T10:44:28.313
> 
> 标签：php, mysql, cpu

在我的一个网站中，我有一个简单的 php/mysql 函数，它使用以下代码查看 ip 是否在我的数据库中：

```
$ip = $_SERVER['REMOTE_ADDR'];
$user = mysql_query("SELECT * FROM users WHERE ip = '$ip' ");
if(mysql_num_rows($user) == 0){
echo 'IP is not banned';
} 
```

昨天这个文件有大约 1,700,000 次点击（浏览量），我在一个共享主机上，在未来几天这个文件可能会被加载大约 3,000,000 次，cpu 使用会有什么问题，数据库有大约 30k 行：id，ip？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:49:07.143

虽然我认为 CPU 使用率不会有问题，但如果您只需要知道用户是否存在，请按照建议添加限制 1。

如果这是查询表的主要方式；`ip`如果您还没有索引，请考虑向该列添加索引。它将减少执行该查询的 CPU 和读取操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:29:24.250

@driis 所说的概括起来是：1\. 将查询限制为一个 2\. 索引 ip 列但是，如果您需要更快的结果，您应该考虑将查询/表缓存到内存（例如 memcached），但这肯定是更多的工作。

你提到每天有 300 万个查询。根据@Rick Bradshaw 的数字（30 毫秒无限制，约 15 毫秒平均有限制），由于仅此查询，数据库负载平均约为 1，这很重要。

一天 30 毫秒 * 3 百万/秒 = 1,04（平均而言，这在高峰时段可能很糟糕）

一天 15 毫秒 * 3 百万/秒 = 0,52（这也不小）

在这种情况下，我建议对您的系统进行一些具体的测量。在不知道任何更具体的信息索引列的情况下听起来是个好主意。

# c# - 加载记录集，一次 4 项

> ID：14413507
> 
> 赞同：3
> 
> 时间：2013-01-19T10:44:57.020
> 
> 标签：c#, asp.net, linq-to-entities, sitefinity

我有一个关于在我的主页上为“幻灯片”加载记录集的问题。我正在使用 ASP.NET、LINQ 和 C#。

这是中继器的标记：

```
<asp:Repeater ID="rptSlideShow" runat="server">
    <ItemTemplate>
        <div class="slide">
            <nav>
                <ul>
                    <li>
                        <a href="#">
                            <img src="Content/Images/logo-artica.gif" alt="ARTICA PRODUCTIONS" width="154" height="82" /></a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="Content/Images/logo-nead.gif" alt="NEAD A GOOD STORY" width="233" height="70" /></a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="Content/Images/logo-garden.gif" alt="YOUR GARDEN" width="250" height="90" /></a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="Content/Images/logo-bitmap.gif" alt="Bitmap" width="48" height="54" /></a>
                    </li>
                </ul>
            </nav>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

每张“幻灯片”应包含 4 个项目。所以我需要用包含最大值的记录来构建集合。4条记录。例如，如果最后一个集合只包含 2 个，因为没有更多记录，它需要重新开始，从头开始获取 2 个项目。

这在 C# 中可行吗？

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:53:03.417

[Skip](http://msdn.microsoft.com/en-us/library/bb358985.aspx) and [Take](http://msdn.microsoft.com/en-us/library/bb503062.aspx)可以在这里为您提供帮助。

假设您在一个名为的变量中拥有所有元素`listOfElements`

你可以做这样的事情 -

对于第一页

```
var firstPageItems = listOfElements.Take(4); 
```

对于第 n 页

```
var nthPageItems = list.Skip(n*4).Take(4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:13:01.900

首先，您可以加载数组中的所有图像。然后检查提醒 4 是否提醒变为零以重新组织另一个数组中的图像。最后遍历新数组以显示幻灯片。

你可能会从下面得到提示：

```
int[] arr;
// load all images
arr[0]="element0";
arr[1]="element1";
arr[2]="element2";
arr[3]="element3";
arr[4]="element4";
arr[5]="element5";
arr[6]="element6";
arr[7]="element7";
arr[8]="element8";
arr[9]="element9";

int newLength=0;
int count=0;
int reminder=0;

if(arr.length%4!=0){
reminder=(arr.length%4)
newLength=arr.length+reminder
}

int[] nArr=new int[newLength];

for(int i=0;i<arr.length;i++){
count++;
nArr[i]=arr[i];
if(i==arr.length-1){
int rem=nArr.length-arr.length;
for(int j=0;j<rem;j++){
nArr[count]=arr[j];
count++;
}
}
} 
```

希望这会有所帮助，谢谢。

# objective-c - 使用未声明的标识符“dateAge”？

> ID：14413510
> 
> 赞同：2
> 
> 时间：2013-01-19T10:45:00.830
> 
> 标签：objective-c

我是学习Objective C的新手，我正在学习一些在线教程，我似乎跟得上很好，然后我有点困惑26个视频。X-Code 不断向我抛出未声明标识符的错误。

在 Person.h 我写过：

```
#import <Foundation/Foundation.h>
@interface Person : NSObject
-(void) dateAge:(int)a withIncome:(int)i;
@end 
```

在 Person.m 中，我写道：

```
#import "Person.h"
@implementation Person
-(void) dateAge:(int)a withIncome:(int)i {NSLog(@"You can date girls %i years old and above", (dateAge/2+7) - (i/100000));}
@end 
```

**Person.m 是我被抛出错误的地方，我使用的是最新版本的 x-code 并且教程已经有一年左右的时间了，我不知道是不是这样？**

 **main.m 只是说：

```
#import <Foundation/Foundation.h>
#import "Person.h
int main(int argc, const char * argv[])
{

    @autoreleasepool {
      Person *bucky = [[Person alloc]init];
      [bucky dateAge:65 withIncome:300000];
      }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:49:19.417

使用`a`而不是`dateAge`这里声明的变量名，

```
-(void) dateAge:(int)a withIncome:(int)i {NSLog(@"You can date girls %i years old and above", (a/2+7) - (i/100000));} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:12:41.597

```
{
  NSLog(@"You can date girls %i years old and above", (dateAge/2+7) - (i/100000));
} 
```

代替 dateAge，使用您作为参数传递的 a，如下所示：

```
{
  NSLog(@"You can date girls %i years old and above", (a/2+7) - (i/100000));
} 
```**

# javascript - 浏览器正在缓存 JavaScript 文件不应该的地方

> ID：14413511
> 
> 赞同：2
> 
> 时间：2013-01-19T10:45:03.273
> 
> 标签：javascript, caching, browser

我们已经实现了一种在部署新应用程序版本时解决 js 缓存问题的方法，但它似乎没有按预期工作。我们的方法是更改​​时间戳，如下所示：

[https://sgrouples.com/js/RequireMake-build.js?v=1349709973](https://sgrouples.com/js/RequireMake-build.js?v=1349709973)

所以问题是不管'v'值如何，这个文件都会被缓存。我现在唯一的怀疑是脚本标签存在于正文而不是文档的标题中。这可能是一个原因吗？

以下是该文件的响应标头：

```
Accept-Ranges:bytes
Cache-Control:max-age=2678400
Connection:keep-alive
Content-Encoding:gzip
Content-Type:application/javascript
Date:Sat, 19 Jan 2013 10:42:32 GMT
ETag:W/"2679866-1358511264000"-gzip
Expires:Tue, 19 Feb 2013 10:42:32 GMT
Last-Modified:Fri, 18 Jan 2013 12:14:24 GMT
Server:Apache-Coyote/1.1
transfer-encoding:chunked
Vary:Accept-Encoding 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:44:23.983

好的，很抱歉给您带来麻烦，但我们的配置中有一个错误，因此我们的生产服务器上的 v 没有增加。它按预期工作。

# c# - 什么是 Microsoft.Practices.EnterpriseLibrary.Data

> ID：14413514
> 
> 赞同：12
> 
> 时间：2013-01-19T10:45:18.417
> 
> 标签：c#, asp.net, sql, 3-tier, three-tier

我想知道`Microsoft.Practices.EnterpriseLibrary.Data.dll`我们使用这个程序集是什么以及为什么使用这个程序集。

这个dll有什么好处？

我想在 3 层架构上创建一个项目，并对执行 sql 查询的最佳方式感到好奇。

我应该使用这个 dll 还是使用简单`SqlCommand`的`DataAdapter`. 目前我正在以这种方式工作：（DAL文件中的代码：）

```
public void Insert(long id)
{
    connection.Open();
    SqlCommand dCmd = new SqlCommand("test_procedure", connection);
    dCmd.CommandType = CommandType.StoredProcedure;
    try
    {
        dCmd.Parameters.AddWithValue("@id", id);           
        dCmd.ExecuteNonQuery();
    }
    catch
    {
        throw;
    }
    finally
    {
        dCmd.Dispose();
        connection.Close();
        connection.Dispose();
    }
} 
```

如果我应该更好地使用`Microsoft.Practices.EnterpriseLibrary.Data`和使用`DatabaseFactory`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-19T11:39:45.993

Microsoft.Practices.EnterpriseLibrary.Data 库的主要优点是它可以更轻松地生成与数据库无关的代码。开发人员主要与更通用的 Database vs SqlConnection 和 DbCommand vs SqlCommand 对象进行交互，理论上将底层数据库从 MSSQL 切换到 Oracle 的机制变得更加容易。尽管在我的开发经验中我从未见过这种情况发生。

Microsoft.Practices.EnterpriseLibrary.Data 还指导开发人员将 DbParameter 用于查询参数，从而降低 SQL 注入攻击的风险。

Microsoft.Practices.EnterpriseLibrary.Data 是核心 ADO .Net 结构的更高抽象，使开发人员能够以最少的代码量完成相同的任务。

如果您学习数据访问策略，我建议您继续使用 ADO .Net，您对基础知识的了解越多，Microsoft.Practices.EnterpriseLibrary.Data 或实体框架或 NHibernate 就越有用，因为您了解基础知识，因为这些技术是建立在ADO .Net。

# android - 如何获取 android 兼容包的 XML 资源

> ID：14413518
> 
> 赞同：0
> 
> 时间：2013-01-19T10:45:33.430
> 
> 标签：android, android-layout

我正在为我的应用程序使用 Android 兼容包 v4 (android-support-v4.jar)。

我创建了一个自定义 TabIndicator 布局，但我想使用默认背景！默认背景取决于平台

*   在 2.3.x 上，它是 [focused: lightgrey; 按下：黄色；无：深灰色]
*   在 4.0.x 上它是 [focused: lightblue; 按下：中蓝；无：深蓝色]

有关默认颜色的示例，请参阅随附的屏幕截图。 ![我正在寻找的背景](../Images/0d89d5f49364663c0c22d6071b207f73.png)

我必须添加什么`android:background`才能获得这个背景？

# google-maps-android-api-2 - 在安卓中显示谷歌地图

> ID：14413521
> 
> 赞同：0
> 
> 时间：2013-01-19T10:45:46.813
> 
> 标签：google-maps-android-api-2

我正在关注这个网站[https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

我已经完成了所有步骤。导入了 google-play-services_lib。做好每一步。运行项目时，出现错误并说

> Android 库项目无法启动

这就是我的构建路径的样子![在此处输入图像描述](../Images/f60ad25a2d8caa456b5324817ed29fe2.png)

我的项目浏览器看起来像这样。

![在此处输入图像描述](../Images/fd0fa572ad1a2f49125cc897bfa6722f.png)

我检查了 android 目标中的 IsLibrary 复选框。

![在此处输入图像描述](../Images/da4f72eacb7a4575b4eb358d3973fa9c.png)

我找不到，我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:48:51.480

你如何运行你的代码？如果您使用的是模拟器，则需要使用 google api 选择您的 api 级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:39:28.977

我通过执行以下操作清除了此问题。

1.  无需导入google play services下的所有示例项目。只导入地图。
2.  取消选中属性中的库。

它对我有用。

# sql - T-SQL 语法错误不存在（或者，至少，我看不到它，也看不到智能感知）但仍然通知

> ID：14413525
> 
> 赞同：0
> 
> 时间：2013-01-19T10:46:18.160
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有一个脚本，它克隆数据库模式（表）并添加一些列来跟踪数据更改（我们经常从遗留 ​​ERP 接收数据），这个脚本创建一些存储过程来检查数据的变化，它总是像魅力一样工作，但今天在测试数据库上启动它后，它给了我一个错误：

> *消息 102，级别 15，状态 1，过程 COMPUTE_AGENT，第 9 行
> '.' 附近的语法不正确*

这是程序：

```
CREATE PROCEDURE [dbo].[COMPUTE_AGENT] (@Debug INT = 0)
AS
BEGIN
    DECLARE @Actions TABLE (IUD VARCHAR(100))

    INSERT INTO @Actions (IUD)
    SELECT IUD
    FROM (
        MERGE [frontier].[AGENT] AS [Destination]
        USING [dbo].[AGENT] AS [Source]
            ON [Destination].[AgentCode] = [Source].[AgentCode]
        WHEN NOT MATCHED BY TARGET
            THEN
                INSERT (
                    [AgentCode]
                    ,[Name]
                    ,[PersonalTaxCode]
                    ,[VatNumber]
                    ,[Commission]
                    ,[Address]
                    ,[City]
                    ,[ZipCode]
                    ,[Province]
                    ,[Region]
                    ,[Country]
                    ,[Phone]
                    ,[CellPhone]
                    ,[FAX]
                    ,[EMail]
                    ,[Web]
                    ,[LastEditDate]
                    ,[CHECKSUM]
                    ,[SyncroLED]
                    ,[SyncroPS]
                    )
                VALUES (
                    [Source].[AgentCode]
                    ,[Source].[Name]
                    ,[Source].[PersonalTaxCode]
                    ,[Source].[VatNumber]
                    ,[Source].[Commission]
                    ,[Source].[Address]
                    ,[Source].[City]
                    ,[Source].[ZipCode]
                    ,[Source].[Province]
                    ,[Source].[Region]
                    ,[Source].[Country]
                    ,[Source].[Phone]
                    ,[Source].[CellPhone]
                    ,[Source].[FAX]
                    ,[Source].[EMail]
                    ,[Source].[Web]
                    ,[Source].[LastEditDate]
                    ,BINARY_CHECKSUM([Source].[AgentCode], [Source].[Name], [Source].[PersonalTaxCode], [Source].[VatNumber], [Source].[Commission], [Source].[Address], [Source].[City], [Source].[ZipCode], [Source].[Province], [Source].[Region], [Source].[Country], [Source].[Phone], [Source].[CellPhone], [Source].[FAX], [Source].[EMail], [Source].[Web], [Source].[LastEditDate])
                    ,GETDATE()
                    ,0
                    )
        WHEN MATCHED
            AND [Destination].[CHECKSUM] <> BINARY_CHECKSUM([Source].[AgentCode], [Source].[Name], [Source].[PersonalTaxCode], [Source].[VatNumber], [Source].[Commission], [Source].[Address], [Source].[City], [Source].[ZipCode], [Source].[Province], [Source].[Region], [Source].[Country], [Source].[Phone], [Source].[CellPhone], [Source].[FAX], [Source].[EMail], [Source].[Web], [Source].[LastEditDate])
            THEN
                UPDATE
                SET [Destination].[AgentCode] = [Source].[AgentCode]
                    ,[Destination].[Name] = [Source].[Name]
                    ,[Destination].[PersonalTaxCode] = [Source].[PersonalTaxCode]
                    ,[Destination].[VatNumber] = [Source].[VatNumber]
                    ,[Destination].[Commission] = [Source].[Commission]
                    ,[Destination].[Address] = [Source].[Address]
                    ,[Destination].[City] = [Source].[City]
                    ,[Destination].[ZipCode] = [Source].[ZipCode]
                    ,[Destination].[Province] = [Source].[Province]
                    ,[Destination].[Region] = [Source].[Region]
                    ,[Destination].[Country] = [Source].[Country]
                    ,[Destination].[Phone] = [Source].[Phone]
                    ,[Destination].[CellPhone] = [Source].[CellPhone]
                    ,[Destination].[FAX] = [Source].[FAX]
                    ,[Destination].[EMail] = [Source].[EMail]
                    ,[Destination].[Web] = [Source].[Web]
                    ,[Destination].[LastEditDate] = [Source].[LastEditDate]
                    ,[Destination].[CHECKSUM] = BINARY_CHECKSUM([Source].[AgentCode], [Source].[Name], [Source].[PersonalTaxCode], [Source].[VatNumber], [Source].[Commission], [Source].[Address], [Source].[City], [Source].[ZipCode], [Source].[Province], [Source].[Region], [Source].[Country], [Source].[Phone], [Source].[CellPhone], [Source].[FAX], [Source].[EMail], [Source].[Web], [Source].[LastEditDate])
                    ,[Destination].[SyncroLED] = GETDATE()
                    ,[Destination].[SyncroPS] = 0
        WHEN NOT MATCHED BY SOURCE
            AND [Destination].[SyncroPS] <> 1
            THEN
                UPDATE
                SET [Destination].[SyncroPS] = 1
                    ,[Destination].[SyncroLED] = GETDATE()
        OUTPUT $ACTION
        ) AS TheMerge(IUD)

    IF @Debug = 1
        SELECT IUD AS [Action]
            ,COUNT(IUD) AS [Count]
        FROM @Actions
        GROUP BY IUD
END 
```

我真的看不出错误在哪里。我试图在许多其他数据库上启动相同的脚本而没有出错......这真的让我发疯了，我觉得这个问题可能是微不足道的，我真的很愚蠢，因为我找不到它......

这是另一个自动生成的过程，它没有给出任何错误（从另一个数据库生成）：

```
CREATE PROCEDURE [dbo].[COMPUTE_Agente] (@Debug INT = 0)
AS
BEGIN
    DECLARE @Actions TABLE (IUD VARCHAR(100))

    INSERT INTO @Actions (IUD)
    SELECT IUD
    FROM (
        MERGE [frontier].[Agente] AS [Destination]
        USING [dbo].[Agente] AS [Source]
            ON [Destination].[CodiceAgente] = [Source].[CodiceAgente]
        WHEN NOT MATCHED BY TARGET
            THEN
                INSERT (
                    [CodiceAgente]
                    ,[Nome]
                    ,[CodiceFiscale]
                    ,[PartitaIVA]
                    ,[Provvigioni]
                    ,[Indirizzo]
                    ,[Localita]
                    ,[CAP]
                    ,[Provincia]
                    ,[Regione]
                    ,[Nazione]
                    ,[Telefono]
                    ,[Cellulare]
                    ,[Fax]
                    ,[EMail]
                    ,[SitoWeb]
                    ,[DataModifica]
                    ,[CHECKSUM]
                    ,[SyncroLED]
                    ,[SyncroPS]
                    )
                VALUES (
                    [Source].[CodiceAgente]
                    ,[Source].[Nome]
                    ,[Source].[CodiceFiscale]
                    ,[Source].[PartitaIVA]
                    ,[Source].[Provvigioni]
                    ,[Source].[Indirizzo]
                    ,[Source].[Localita]
                    ,[Source].[CAP]
                    ,[Source].[Provincia]
                    ,[Source].[Regione]
                    ,[Source].[Nazione]
                    ,[Source].[Telefono]
                    ,[Source].[Cellulare]
                    ,[Source].[Fax]
                    ,[Source].[EMail]
                    ,[Source].[SitoWeb]
                    ,[Source].[DataModifica]
                    ,BINARY_CHECKSUM([Source].[CodiceAgente], [Source].[Nome], [Source].[CodiceFiscale], [Source].[PartitaIVA], [Source].[Provvigioni], [Source].[Indirizzo], [Source].[Localita], [Source].[CAP], [Source].[Provincia], [Source].[Regione], [Source].[Nazione], [Source].[Telefono], [Source].[Cellulare], [Source].[Fax], [Source].[EMail], [Source].[SitoWeb], [Source].[DataModifica])
                    ,GETDATE()
                    ,0
                    )
        WHEN MATCHED
            AND [Destination].[CHECKSUM] <> BINARY_CHECKSUM([Source].[CodiceAgente], [Source].[Nome], [Source].[CodiceFiscale], [Source].[PartitaIVA], [Source].[Provvigioni], [Source].[Indirizzo], [Source].[Localita], [Source].[CAP], [Source].[Provincia], [Source].[Regione], [Source].[Nazione], [Source].[Telefono], [Source].[Cellulare], [Source].[Fax], [Source].[EMail], [Source].[SitoWeb], [Source].[DataModifica])
            THEN
                UPDATE
                SET [Destination].[CodiceAgente] = [Source].[CodiceAgente]
                    ,[Destination].[Nome] = [Source].[Nome]
                    ,[Destination].[CodiceFiscale] = [Source].[CodiceFiscale]
                    ,[Destination].[PartitaIVA] = [Source].[PartitaIVA]
                    ,[Destination].[Provvigioni] = [Source].[Provvigioni]
                    ,[Destination].[Indirizzo] = [Source].[Indirizzo]
                    ,[Destination].[Localita] = [Source].[Localita]
                    ,[Destination].[CAP] = [Source].[CAP]
                    ,[Destination].[Provincia] = [Source].[Provincia]
                    ,[Destination].[Regione] = [Source].[Regione]
                    ,[Destination].[Nazione] = [Source].[Nazione]
                    ,[Destination].[Telefono] = [Source].[Telefono]
                    ,[Destination].[Cellulare] = [Source].[Cellulare]
                    ,[Destination].[Fax] = [Source].[Fax]
                    ,[Destination].[EMail] = [Source].[EMail]
                    ,[Destination].[SitoWeb] = [Source].[SitoWeb]
                    ,[Destination].[DataModifica] = [Source].[DataModifica]
                    ,[Destination].[CHECKSUM] = BINARY_CHECKSUM([Source].[CodiceAgente], [Source].[Nome], [Source].[CodiceFiscale], [Source].[PartitaIVA], [Source].[Provvigioni], [Source].[Indirizzo], [Source].[Localita], [Source].[CAP], [Source].[Provincia], [Source].[Regione], [Source].[Nazione], [Source].[Telefono], [Source].[Cellulare], [Source].[Fax], [Source].[EMail], [Source].[SitoWeb], [Source].[DataModifica])
                    ,[Destination].[SyncroLED] = GETDATE()
                    ,[Destination].[SyncroPS] = 0
        WHEN NOT MATCHED BY SOURCE
            AND [Destination].[SyncroPS] <> 1
            THEN
                UPDATE
                SET [Destination].[SyncroPS] = 1
                    ,[Destination].[SyncroLED] = GETDATE()
        OUTPUT $ACTION
        ) AS TheMerge(IUD)

    IF @Debug = 1
        SELECT IUD AS [Action]
            ,COUNT(IUD) AS [Count]
        FROM @Actions
        GROUP BY IUD
END 
```

预先感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:42:39.657

您的代码中没有语法错误。您的数据库的兼容级别为`SQL Server 2005 (90)`或更低。它需要`SQL Server 2008 (100)`或更高。

[ALTER DATABASE 兼容级别 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/bb510680.aspx)

# javascript - 使用 Javascript 或 Jquery 将 html 标记或类添加到特定单词

> ID：14413526
> 
> 赞同：-1
> 
> 时间：2013-01-19T10:46:25.817
> 
> 标签：javascript, jquery, html, class, tags

我正在运行一个`wordpress`网站，其中应该始终包含一些单词`italic`（由于植物学原因）。

我正在尝试找到一种自动修改这些单词的方法，这样我就不需要手动进行了。

是否有`JS`or`JQuery`可以完成这项工作并在页面的文本和标题中找到这些单词，并在它们周围加上标签`<em>`或带有 的标签`class`？

我在一篇文章中读到，我需要解析 html 代码，以确保我只强调关键字而不是不可见的文本或代码（例如图像的 alt 文本属性或实际标记）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:06:16.183

```
function change() {
var words = new Array("Just", "Dan", "Man", "Dan");
var html = document.body.innerHTML;
for(var i = 0; i < words.length; i++) {
    var reg = new RegExp(words[i], 'g');
    var html = html.replace(reg, "<i>"+words[i]+"</i>");
}
    document.body.innerHTML = html;
}
change(); 
```

定义一个数组，它将遍历每个单词并替换每个出现的特定单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:55:12.403

您可以使用`jquery` [`:contains()`](http://api.jquery.com/contains-selector/)查找包含某些单词的标签

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

     <div>John Resig</div>

     <div>George Martin</div>
     <div>Malcom John Sinclair</div>
     <div>J. Ohn</div>

<script>

 $("div:contains('John')").css("text-decoration", "underline");

</script>

</body>
</html> 
```

如果您发布代码，我可以为您提供更多帮助，请参阅这篇文章[Find text string using jQuery?](https://stackoverflow.com/questions/926580/find-text-string-using-jquery)

# html - 将用户重定向到移动网站的 SEO 问题

> ID：14413533
> 
> 赞同：0
> 
> 时间：2013-01-19T10:47:15.290
> 
> 标签：html, redirect, seo

会用下面的代码，给我一些SEO问题吗？当我开始使用它时，我的 Google 排名下降了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="refresh" content="0;document.location" />
</head>
<body>
<p></p>
<!--?xml version="1.0" encoding="UTF-8"?-->
<p><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /></p>
<title></title>
<script language="javascript" type="text/javascript">// <![CDATA[
if (screen.width <= 699) {
document.location = "http://mobilesite";
}

else{ 
       document.location.href = "http://desktopsite"
}
// ]]></script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:51:16.563

我认为您首先需要学习 HTML 结构。

favicon 包含和标题应始终包含在`<head>`容器中。

不知道为什么你在他们的任何一个中有一个 XML 声明。

您也可以使用 HTML5 文档类型`<!doctype html>`。

**关于 SEO 问题**。内容为王。搜索引擎主要处理页面中包含的内容。现在我不确定你的 JS 将如何影响这一点，因为爬取页面的蜘蛛和机器人不运行 JavaScript（我可能是错的，如果是这样的话，希望有人能纠正我）。

# java - Java 使用分隔符拆分字符串

> ID：14413537
> 
> 赞同：2
> 
> 时间：2013-01-19T10:47:42.807
> 
> 标签：java, android, split, stringtokenizer

> **可能重复：**
> [匹配“.” 在java中](https://stackoverflow.com/questions/11396864/matching-a-in-java)

我有一个字符串`1.2.4`，我想将其拆分并`2`与我得到的另一个字符串进行比较。

我正在尝试执行以下操作

```
 StringTokenizer old_ver = new StringTokenizer(oldVersion, ".");
    int oldVer = Integer.parseInt(old_ver.nextToken());
    oldVer = Integer.parseInt(old_ver.nextToken());

    StringTokenizer new_ver = new StringTokenizer(newVersion, ".");
    int newVer = Integer.parseInt(new_ver.nextToken());
    newVer = Integer.parseInt(new_ver.nextToken());

    if (oldVer == newVer) {
        return true;
    } 
```

有没有更好的方法来做到这一点`.Split()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T10:50:13.393

问题在于正则表达式“。” 是单个字符。因此，您需要使用“ `\\.`”转义它

同样，您可以使用

```
string.split("\\."); 
```

**编辑：**

`split()`类的方法在内部`String`使用`Pattern`，`Matcher`通常是 Java 中用于 Regex 的 API。

因此，使用 . 没有问题`split`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:01:14.370

在您的代码中，1.2.1 将与 3.2.0“兼容”，无论您是否使用，这看起来都是一个严重的问题`String.split`。此外，您不需要将版本号解析为整数，因为您只比较是否相等。

```
 StringTokenizer old_ver = new StringTokenizer(oldVersion, ".");
 StringTokenizer new_ver = new StringTokenizer(newVersion, ".");
 return (old_ver.nextToken().equals(new_ver.nextToken() && 
         old_ver.nextToken().equals(new_ver.nextToken() ); 
```

你当然也可以这样做`String.split`：

```
 String [] oldV = String.split(oldVersion,"\\.");
   String [] newV = String.split(newVersion,"\\.");

   return oldV[0].equals(newV[0]) && oldV[1].equals(newV[1]); 
```

该`String.split()`版本似乎略短，但对我来说，它看起来有点难以阅读，因为：

*   它涉及额外的思考步骤，即点 (.) 是保留字符，必须转义。
*   “下一个元素，然后是下一个元素”似乎比“位置 0 的元素，然后位置 1 的元素”涉及更少的思考工作。

可能有一些版本比较器首先比较主要版本号，然后是中间版本号，然后是次要部分，就像我们可以进行“1.2.4 或更高版本”之类的测试一样。

# ruby-on-rails - before_filter 方法中的隐藏实例变量

> ID：14413539
> 
> 赞同：1
> 
> 时间：2013-01-19T10:48:17.330
> 
> 标签：ruby-on-rails, instance-variables, before-filter, private-methods

在私有方法中隐藏实例变量初始化是一个好习惯吗？

例如，我有一个带有一些操作的用户控制器：

```
class UsersController < ApplicationController
  before_filter :get_user, only: [:show, :edit, :update, :destroy]
  before_filter :set_user, only: [:new, :create]

  def index
    @users = User.all
  end

  def show
  end

  def new
  end

  def edit
  end

  def create
    if @user.save
      redirect_to @user, notice: 'User was successfully created.'
    else
      render action: 'new'
    end
  end

  def update
    if @user.update_attributes(params[:user])
      redirect_to @user, notice: 'User was successfully updated.'
    else
      render action: 'edit'
    end
  end

  def destroy
    @user.destroy
    redirect_to users_path
  end

private

  def get_user
    @user = User.find(params[:id])
  end

  def set_user
    @user = User.new(params[:user])
  end
end 
```

有人说它看起来像一个魔法，但它是干燥的。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:16:06.873

这对我来说太干了。

`before_filter`对于诸如实例变量初始化之类的例行事情，我发疯了，因为该方法显示为空白，但事情正在发生。如果方法是空的，这没什么大不了的，但是大的方法可能会掩盖过滤器，或者您可能会完全忽略它。然后，您必须寻找过滤方法并在脑海中重建工作流程。它使维护比需要的更加困难。

我会放弃过滤器并就地调用 getter/setter 方法：

```
def show
  get_user
end 
```

这样你就可以看到初始化发生在哪里。如果您坚持使用过滤器，请在方法中添加注释，告知正在应用过滤器。

就个人而言，我`before_filter`只保留条件逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:51:47.750

它们不是隐藏的，它们就在那里。

就个人而言，当谈到 DRY 时，我喜欢遵循一条规则（我在某处读过，但我不记得在哪里，请原谅我）——当你第一次想要复制内容时，你会皱着眉头复制并粘贴它，但是如果你想再次复制它，那就是将它提取到一个地方。

你的`:load_user`例子很好，但我不会打扰`:set_user`.

# ruby - ruby/jruby 的图像上传器

> ID：14413548
> 
> 赞同：0
> 
> 时间：2013-01-19T10:49:13.583
> 
> 标签：ruby, file-upload

是否有任何库可以上传照片并将其推送到 S3 而无需将临时文件写入磁盘？照片上传是我们网站的主要功能，我们不希望 diskIO 成为瓶颈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:55:45.110

可能您正在寻找这些：[carrierwave](https://github.com/jnicklas/carrierwave)或[Dragonfly](https://github.com/markevans/dragonfly)。在carrierwave 中有一个选项，[请参阅此](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-Delete-cache-garbage-directories)用于删除临时缓存目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:20:12.243

我在上面的评论中有我的想法，但跳出框框思考你可能有机会通过使用[https://www.filepicker.io/](https://www.filepicker.io/)完全避免使用本地临时文件他们磁盘上的io。根据他们的文档，他们将您的文件直接推送到您的 S3 存储桶，而无需通过您的应用程序的服务器。这可能是您正在寻找的东西，但它带有他们的价格标签。如果您不想担心改组用户文件，这可能是值得的。

# php - Twig 访问对象

> ID：14413550
> 
> 赞同：24
> 
> 时间：2013-01-19T10:49:46.770
> 
> 标签：php, twig

我想访问树枝模板中对象的值。

通常我会得到这样的回报：

```
echo $lang->get("test"); 
```

但是我怎么能在模板中用树枝做同样的事情呢？

我尝试了很多方法，但没有一个奏效。

例如我试过：

```
{{ attribute(lang, get, 'test') }} 
```

结果

> 可捕获的致命错误：传递给 Twig_Node_Expression_GetAttr::__construct() 的参数 3 必须是 Twig_Node_Expression_Array 的实例，给定 Twig_Node_Expression_Constant 的实例

谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-19T11:01:41.217

您要做的是在 Twig 模板中使用参数调用对象的方法。我不认为这是支持的，因为它可能被视为一个坏主意。不过，Twig 支持对象上的 getter 概念，它们在没有参数的情况下被调用：

```
{{ lang.test }} 
```

将尝试按以下顺序调用以下选项之一：

*   `$lang->test`
*   `$lang->test()`
*   `$lang->getTest()`
*   `$lang->isTest()`

如果对象实现了这些访问器和约定中的任何一个，Twig 就会找到它。此约定之外的任何内容，例如`get('test')`，都不是 Twig 哲学的一部分。而且它通常不是广泛使用的习语，因此您可能应该坚持上述方法之一。

请参阅[http://twig.sensiolabs.org/doc/templates.html#variables](http://twig.sensiolabs.org/doc/templates.html#variables)。

您可以实现`__isset`或魔术方法`__get`来`__call`支持这些访问器方法之一。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-18T19:17:35.997

我知道这是一个老问题，但是在互联网上搜索了 3 个小时并没有找到任何示例之后，我想确保它被记录在案。

回到您最初的尝试之一：

```
{{ attribute(lang, get, 'test') }} 
```

我正在尝试做同样的事情，这应该根据[文档](http://twig.sensiolabs.org/doc/functions/attribute.html)工作。不幸的是，没有使用这个的例子。我发现方法名称（get）必须是一个字符串（'get'），所以我改变了它，但它仍然不起作用。我最终做的是：

```
{% set myText = lang.get('test') %}
{{ myText }} 
```

这很好用，但是当我必须全部完成时，要编写很多代码。所以我用这两种方法制作了一个简单的模板，并检查了编译后的输出。原文编译成这样：

```
echo twig_escape_filter($this->env, $this->getAttribute((isset($context["lang"]) ? $context["lang"] : null), "get", "test"), "html", null, true); 
```

以及第二个（2 班轮）：

```
$context["myText"] = $this->getAttribute((isset($context["lang"]) ? $context["lang"] : null), "get", array(0 => "test"), "method");
echo twig_escape_filter($this->env, (isset($context["myText"]) ? $context["myText"] : null), "html", null, true); 
```

经过检查，我意识到了区别（检查第三个参数到getAttribute），arguments参数是一个数组！这是很好的信息。我把原来的改成这样：

```
{{ attribute(lang, 'get', ['test']) }} 
```

它现在开始工作了！

希望这对某人有帮助！

# android - 复选框的特定主题

> ID：14413551
> 
> 赞同：0
> 
> 时间：2013-01-19T10:49:54.940
> 
> 标签：android, checkbox

我想做这样的复选框![在此处输入图像描述](../Images/6447e92ba2bbb39e1393ddc004328ae9.png)

我怎样才能自己实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:55:11.500

创建一个选择器 xml 文件，例如：您必须剪切此图像并另存为黄色显示名称和另一个图像，您必须仅剪切此框的正方形而不选中标记并将该图像另存为 Yellow_hide..

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:drawable="@drawable/yellow_hide" />
    <item android:state_checked="false" android:drawable="@drawable/yellow_show" />
</selector> 
```

将此 xml 文件保存在您的 res\drawables\ 文件夹中。然后在您的布局文件中将其应用于您的复选框，如下所示：

```
<CheckBox
    android:text="Custom CheckBox"
    android:button="@drawable/checkbox_selector"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

# objective-c - 计算和存储 UITableViewCell 中使用的 NSManagedObject 的单元格标题和描述

> ID：14413553
> 
> 赞同：0
> 
> 时间：2013-01-19T10:49:57.840
> 
> 标签：objective-c, core-data, uitableview

我有这两种方法为单元格提供标题和描述，在协议中声明。

```
@protocol TableCellProtocol <NSObject>

@optional
@property(readonly,nonatomic,strong) NSString *titleForCell;
@property(readonly,nonatomic,strong) NSString *descriptionForCell;

@end 
```

我有一个 NSManagedObject 实现该协议并提供相关方法：

```
-(NSString*)titleForCell {
   return [NSString stringWithFormat:@"%@ - %@",self.myVar1,self.myVar2];
}

-(NSString*)descriptionForCell {
  return [NSString stringWithFormat:@"%@ - %@",self.myVar3,self.myVar4];
} 
```

`self.myVar<n>`CoreData 属性在哪里。

此协议旨在用于 UITableViewCell：

```
- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    id<TableCellProtocol> obj = [_fetchedResultsController objectAtIndexPath:indexPath];
    MyTableViewCell *cell = [table dequeueReusableCellWithIdentifier:@"tableCell"];
    cell.cellTitle.text=obj.titleForCell;
    cell.cellDescr.text=obj.descriptionForCell;

    return cell;
} 
```

虽然我没有内存泄漏或分配问题，但我发现这并不是很优雅，而且由于性能原因很差，因为每次显示单元格时都会创建一个新的 NSString。

此外，相关属性可能会在应用程序生命周期中发生变化，因此如果在某处存储标题和描述，我需要在需要时刷新它们。

我在我的项目中使用 ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:20:21.577

试试这个 ：

您可以定义两个返回 String 的方法，而不是声明两个属性并定义它们的 getter 方法。并使用它为您的 tableViewCell 设置标题和描述。

```
@protocol TableCellProtocol <NSObject>

@optional
-(NSString *) getTitleForCell;
-(NSString *) getDescriptionForCell;

@end

-(NSString*)getTitleForCell {
   return [NSString stringWithFormat:@"%@ - %@",self.myVar1,self.myVar2];
}

-(NSString*)getDescriptionForCell {
  return [NSString stringWithFormat:@"%@ - %@",self.myVar3,self.myVar4];
} 
```

让我知道这是否适合你。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:22:44.287

您必须通过检查 if(cell==nil) 来重用表格视图中的单元格

-(UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

```
id<TableCellProtocol> obj = [_fetchedResultsController objectAtIndexPath:indexPath];
MyTableViewCell *cell = [table dequeueReusableCellWithIdentifier:@"tableCell"]; 
```

如果（细胞 == 零）{

```
 cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell"];
    }
cell.cellTitle.text=obj.titleForCell;
cell.cellDescr.text=obj.descriptionForCell;

return cell; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T17:46:25.983

关于您上面的评论，我将发布使用瞬态属性将自定义属性存储在 NSManagedObject 子类中。这种方法在内存方面非常有效，因为托管对象上下文会保留对象，直到上下文被重置，并且如果发生某些更改，它会自动相应地更改属性。在您的情况下，您必须在每次创建或重用单元格时创建字符串。但是，现在由于我们缓存了对象，一旦创建了瞬态属性，它就一直存在，并且没有任何内存开销。所以它应该快得多。

您可以按如下方式实现瞬态属性：

```
@implementation SomeManagedObject

   + (NSSet*)keyPathsForValuesAffectingValueForKey:(NSString *)key{
     if([key isEqualToString:@"cellTitle"]){
      return [NSSet setWithObjects:@"myVar1", @"myVar2", nil];
    }else if([key isEqualToString: @"cellDescription"]){
      return [NSSet setWithObjects:@"myVar3", @"myVar4", nil];
    }
     return [super keyPathsForValuesAffectingValueForKey:key];
   } 

  // You could either override the getter for the transient attribute like this

  - (NSString*)cellTitle{
   if(!_cellTitle){
    [sell willChangeValueForKey: @"cellTitle"]; 
     _cellTitle =  [NSString stringWithFormat:@"%@ - %@",self.myVar1,self.myVar2];
    [self didChangeValueForKey: @"cellTitle"];
   }
   return _cellTitle;
  }

  // You could also override the awakeFromFetch method to create the transient attribute as

 - (void)awakeFromFetch{
    [sell willChangeValueForKey: @"cellTitle"]; 
     _cellTitle =  [NSString stringWithFormat:@"%@ - %@",self.myVar1,self.myVar2];
    [self didChangeValueForKey: @"cellTitle"];  
    [super awakeFromFetch];
}

 // Also use the willTurnIntoFault/didTurnIntoFault method as

 - (void)didTurnIntoFault{
     [super didTurnIntoFault];
     [sell willChangeValueForKey: @"cellTitle"]; 
     _cellTitle =  [NSString stringWithFormat:@"%@ - %@",self.myVar1,self.myVar2];
    [self didChangeValueForKey: @"cellTitle"];  
 }

@end 
```

我希望这会有所帮助。谢谢

# spring - Heroku 上的 SpringMVC 不会与数据库保持一致

> ID：14413557
> 
> 赞同：0
> 
> 时间：2013-01-19T10:50:17.300
> 
> 标签：spring, postgresql, spring-mvc, heroku

我刚从 Heroku 上的 Spring 应用程序开始。到目前为止，一切似乎都运行良好，但我无法向数据库添加任何内容。我不确定是否需要更改 Heroku 的 WebInterface 或我的配置文件中的任何内容？

我可以连接到我的数据库并且我的查询也可以工作（虽然没有异常），但是查询的结果是空的。

如果我`addBooking()`从服务中调用，新的预订不会被写入数据库（据我所知）。查询中`getAvailableBookings()`没有任何条目。

也许你会发现任何错误或者我错过了什么？

我的服务实现：

```
import java.util.Date;
import java.util.logging.Logger;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.criteria.CriteriaQuery;
import javax.persistence.criteria.Root;

import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import org.stuttgart.fahrrad.controller.BookingController;
import org.stuttgart.fahrrad.model.Booking;

import com.example.model.Person;

@Service
public class BookingServiceImpl implements BookingService {

    static Logger logger = Logger.getLogger(BookingServiceImpl.class.getName());

    @PersistenceContext
    EntityManager em;

    @Override
    public void addBooking(Booking booking) {

        logger.info("Persisting a booking to the DB!");

        em.persist(booking);
    }

    @Override
    @Transactional
    public int getAvailableBookings(Date bookingDay) {
        CriteriaQuery<Booking> c = em.getCriteriaBuilder().createQuery(Booking.class);
        Root<Booking> from = c.from(Booking.class);
        return em.createQuery(c).getResultList().size();
    } 
```

我的应用程序上下文：

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
                           http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <context:annotation-config />
    <context:component-scan base-package="org.stuttgart.fahrrad" />

    <mvc:annotation-driven/>

    <bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <tx:annotation-driven />
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
        <property name="dataSource" ref="dataSource"/>

    </bean>

    <beans profile="default">
        <jdbc:embedded-database id="dataSource"/>        
        <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="dataSource" ref="dataSource"/>
            <property name="jpaVendorAdapter">
                <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
            </property>
            <property name="jpaProperties">
                <props>
                    <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                    <prop key="hibernate.hbm2ddl.auto">create</prop>
                </props>
            </property>
        </bean>
    </beans>

    <beans profile="prod">
        <bean class="java.net.URI" id="dbUrl">
            <constructor-arg value="#{systemEnvironment['DATABASE_URL']}"/>
        </bean>

        <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
            <property name="url" value="#{ 'jdbc:postgresql://' + @dbUrl.getHost() + @dbUrl.getPath() }"/>
            <property name="username" value="#{ @dbUrl.getUserInfo().split(':')[0] }"/>
            <property name="password" value="#{ @dbUrl.getUserInfo().split(':')[1] }"/>
        </bean>

        <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="dataSource" ref="dataSource"/>
            <property name="jpaVendorAdapter">
                <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
            </property>
            <property name="jpaProperties">
                <props>
                    <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                    <prop key="hibernate.show_sql">true</prop>
                    <!-- change this to 'verify' before running as a production app -->
                    <prop key="hibernate.hbm2ddl.auto">update</prop>
                </props>
            </property>
        </bean>
    </beans>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:02:01.263

您还没有`@Transactional`申请到您的 addBooking 方法。

# javascript - 为什么 node.js 中的 response.write 不注入 html？

> ID：14413559
> 
> 赞同：3
> 
> 时间：2013-01-19T10:50:29.093
> 
> 标签：javascript, node.js

我正在学习初学者节点书中的教程，并且正在输入这段代码。

```
 var body = '
<html>
<head>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8"/>
</head>

<body>
    <form action="/upload" method="post">
        <textarea name="text" rows="20" cols="60"></textarea>
        <input type="submit" value="Submit text"/>
    </form>
</body>
</html>';
response.writeHead(200,{"Content-Type" : "text/plain"});
response.write(body);
response.end(); 
```

我已经把它隔开，但我知道我需要把它全部放在一行上，当我这样做时，textarea 没有出现，所写的 html 出现在屏幕上。

我已将其隔开，因为我不确定 html 是否正确。

怎么了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-19T10:56:35.333

尝试更改此行：

```
response.writeHead(200,{"Content-Type" : "text/plain"}); 
```

到：

```
response.writeHead(200,{"Content-Type" : "text/html"}); 
```

（您希望浏览器将其解释为 html，而不是纯文本。）

# c++ - 使用 APR 构建 log4cxx

> ID：14413561
> 
> 赞同：3
> 
> 时间：2013-01-19T10:50:41.163
> 
> 标签：c++, shared-libraries, autotools, suse, log4cxx

我需要在我不是 root 的 SuSE linux 系统上构建[log4cxx库。](http://logging.apache.org/log4cxx)包管理器 zypper 显然不知道 log4cxx。

我下载 log4cxx 并[尝试使用 autotools 构建](http://logging.apache.org/log4cxx/building/autotools.html)

```
./configure

checking for APR... no
configure: error: APR could not be located. Please use the --with-apr option. 
```

然后我搜索`libapr`：

```
find / -name libapr*

/usr/share/doc/packages/libapr-util1
/usr/share/doc/packages/libapr1
/usr/lib64/libaprutil-1.so.0.3.12
/usr/lib64/libapr-1.so.0.4.5
/usr/lib64/libaprutil-1.so.0
/usr/lib64/libapr-1.so.0 
```

所以我尝试

```
./configure --with-apr=/usr/lib64/libapr-1.so.0

configure: error: the --with-apr parameter is incorrect. It must specify an install prefix, a build directory, or an apr-config file. 
```

`--with-apr=/usr/lib64/libapr-1.so.0.4.5`和相同`--with-apr=/usr/lib64/`。

查找哪个文件`./configure`？`--with-apr`期待什么？这两个`*.so.*`文件之一是所需的库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:35:35.067

您可能需要安装`libapr1-devel`以便可以针对它进行编译。然后尝试重新运行`./configure`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-16T12:26:55.733

我遇到了同样的问题，我认为您正在使用我认为已过时的 appache 网站的源代码。几年前，这个问题已在 SVN 主干中得到解决（哈哈，我猜就在这个问题被问到的时候）。

只需拉取 svn 主干的源代码并编译它：

```
svn checkout http://svn.apache.org/repos/asf/incubator/log4cxx/trunk apache-log4cxx 
./autogen.sh
./configure
make
make check
sudo make install 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T05:25:13.713

在[software.opensuse.org](http://software.opensuse.org/122/en)上，有人在[liblog4cxx10](http://software.opensuse.org/package/liblog4cxx10)为最新版本的 openSUSE 和 SLE 构建了软件包。也许这对你有用，而不是建立你自己的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-05T14:04:08.153

迈克尔戈伦是对的。缺少多个“.h”文件。所以你必须在启动 make 之前添加它们。

```
sed -i '1i#include <string.h>\n'    src/main/cpp/inputstreamreader.cpp
sed -i '1i#include <string.h>\n'    src/main/cpp/socketoutputstream.cpp   
sed -i '1i#include <string.h>\n'    src/examples/cpp/console.cpp       
sed -i '1i#include <stdio.h>\n'     src/examples/cpp/console.cpp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-23T21:56:15.580

我在 3.3.4-5.fc17.x86_64 上遇到了同样的问题，并通过将适当的 H 文件包含到 make 实用程序报告的 CPP 文件中来解决它。在我的情况下，每次遇到新错误时，我应该运行 make 实用程序 3 次，并通过将适当的 include H 添加到报告的 CPP 文件来修复它。

主要思想如下： 1）通过运行 man 实用程序进行检查，其中定义了错误中提到的函数。例如， man memmove 说它是在 string.h 头文件中定义的。2) 将适当的包含文件添加到 CPP 文件中。例如，make 实用程序抱怨 inputstreamreader.cpp 没有找到 memmove 函数。打开 inputstreamreader.cpp 文件并将 string.h 添加到其头文件中。3) 运行 make 实用程序，直到 log4cxx 编译无错误。

# java - Android 元素可见性无法正常工作

> ID：14413572
> 
> 赞同：0
> 
> 时间：2013-01-19T10:51:47.763
> 
> 标签：java, android, video, visibility

嗨，我在设置可见性时遇到了问题。我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    android:id="@+id/widget324"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/onbg"
    xmlns:android="http://schemas.android.com/apk/res/android"
>

<Button android:id="@+id/topBtn"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerHorizontal="true">
</Button>

<VideoView
    android:id="@+id/introvid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
 </VideoView>   
<ImageView
    android:id="@+id/Kn8s"
    android:visibility="invisible"
    android:src="@drawable/kn8s"
    android:layout_width="430.50dp"
    android:layout_height="121.00dp"
    android:layout_gravity="bottom|center_horizontal"
    android:layout_marginBottom="10.00dp"
    /> 
<ImageView

    android:id="@+id/introimage"
    android:src="@drawable/pcintro"
    android:layout_width="215.25dp"
    android:layout_height="197.00dp"
    android:layout_gravity="center"
    />

</FrameLayout> 
```

我的 .java 文件是：

```
import (...)

public class Intro extends Activity {
    VideoView vid;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        overridePendingTransition(R.anim.fadein,R.anim.fadeout);
        setContentView(R.layout.intro);
        vid = (VideoView)findViewById(R.id.introvid);
        String urlpath = "android.resource://" + getPackageName() + "/" + R.raw.onbg;
vid.setVideoURI(Uri.parse(urlpath));
        vid.start();
        FrameLayout widget324 = (FrameLayout)findViewById(R.id.widget324);
        widget324.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                 if (event.getAction() == MotionEvent.ACTION_DOWN) {
                        Intent OnIntent = new Intent(Intro.this, On.class);
                        startActivity(OnIntent);
                        Intro.this.finish();
                // TODO Auto-generated method stub
                 }
                return true;
            }});    

        final MediaPlayer mpGo = MediaPlayer.create(this, R.raw.intro);
        mpGo.start();          

        final ImageView productions = (ImageView)findViewById(R.id.Kn8s);
        productions.postDelayed(new Runnable() {
                public void run() {
                    productions.findViewById(R.id.Kn8s).setVisibility(ImageView.VISIBLE);
                }
            }, 10500);

            new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                    Intent OnIntent = new Intent(Intro.this, On.class);
                    startActivity(OnIntent);
                    Intro.this.finish();
            }
    }, 12000);     
        }   } 
```

问题是这里称为“（R.id.Kn8s）”的元素应该在10,5秒（10500）后出现，但事实并非如此。我注意到当时间设置在 1 秒（999）以下时，它工作正常！还注意到，当我丢弃视频视图时，“Kn8s”元素在它应该出现的时间后变得可见！为什么它不起作用？应该声明onStart方法吗？或者我不知道...是关于软件加速的吗？感谢每个答案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:33:12.063

尝试更换：

```
 productions.findViewById(R.id.Kn8s).setVisibility(ImageView.VISIBLE); 
```

和

`productions.setVisibility(View.VISIBLE);`

您已经在延迟之前初始化了产品，因此您不必在延迟之后再次初始化。

不知道我是怎么错过的，但这似乎是问题所在：

```
 productions.postDelayed(new Runnable() {
            public void run() {
                productions.findViewById(R.id.Kn8s).setVisibility(ImageView.VISIBLE);
            }
        }, 10500); 
```

将上面的代码替换为

```
 new Handler().postDelayed(new Runnable() {
            public void run() {
                productions.setVisibility(View.VISIBLE);
            }
        }, 10500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T16:12:20.980

嘿，感谢 Janmejoy 的回答，我找到了解决问题的方法！我所要做的就是更改我的 xml 的这一部分：

```
<ImageView
    android:id="@+id/Kn8s"
    android:visibility="invisible"
    android:src="@drawable/kn8s"
    android:layout_width="430.50dp"
    android:layout_height="121.00dp"
    android:layout_gravity="bottom|center_horizontal"
    android:layout_marginBottom="10.00dp"
    /> 
```

进入：

```
<ImageView
    android:id="@+id/Kn8s"
    android:visibility="gone"
    android:src="@drawable/kn8s"
    android:layout_width="430.50dp"
    android:layout_height="121.00dp"
    android:layout_gravity="bottom|center_horizontal"
    android:layout_marginBottom="10.00dp"
    /> 
```

那么有人可以告诉我为什么“消失”有效而“隐形”无效！？根据： [https](https://stackoverflow.com/a/7348547/1873367) ://stackoverflow.com/a/7348547/1873367“ View.GONE 这个视图是不可见的，它不占用任何空间用于布局。View.INVISIBLE 这个视图是不可见的，但它仍然占用用于布局目的的空间。“所以如果是这样的话，在我的情况下它应该没关系！还是应该？

# sql-server - 仅使用脚本向导为触发器生成脚本

> ID：14413573
> 
> 赞同：8
> 
> 时间：2013-01-19T10:51:59.030
> 
> 标签：sql-server, sql-server-2008-r2

我有 SQL Server 2008 R2。我在数据库中有大约 150 个表，并且我最近为每个表创建了触发器。它在我的本地环境中运行良好。

现在我想将它们部署在我的实时环境中。问题是我只想部署触发器。我尝试了，`Generate Script wizard`但它正在创建带有表模式以及触发器的脚本，而不是仅触发器。

无论如何要生成所有触发器删除并创建类型脚本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T11:23:56.520

忘记向导。我认为你必须用代码弄脏你的手。下面的脚本打印所有触发器代码并将其存储到表中。只需复制脚本的打印输出或从#triggerFullText 获取。

```
USE YourDatabaseName
GO
SET NOCOUNT ON;

CREATE TABLE #triggerFullText ([TriggerName] VARCHAR(500), [Text] VARCHAR(MAX))
CREATE TABLE #triggerLines ([Text] VARCHAR(MAX))

DECLARE @triggerName VARCHAR(500)
DECLARE @fullText VARCHAR(MAX)

SELECT @triggerName = MIN(name)
FROM sys.triggers

WHILE @triggerName IS NOT NULL
BEGIN
    INSERT INTO #triggerLines 
    EXEC sp_helptext @triggerName

    --sp_helptext gives us one row per trigger line
    --here we join lines into one variable
    SELECT @fullText = ISNULL(@fullText, '') + CHAR(10) + [TEXT]
    FROM #triggerLines

    --adding "GO" for ease of copy paste execution
    SET @fullText = @fullText + CHAR(10) + 'GO' + CHAR(10)

    PRINT @fullText

    --accumulating result for future manipulations
    INSERT INTO #triggerFullText([TriggerName], [Text])
    VALUES(@triggerName, @fullText)

    --iterating over next trigger
    SELECT @triggerName = MIN(name)
    FROM sys.triggers
    WHERE name > @triggerName

    SET @fullText = NULL

    TRUNCATE TABLE #triggerLines
END

DROP TABLE #triggerFullText
DROP TABLE #triggerLines 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-19T10:22:19.543

只需在第二步中的生成脚本向导（“设置脚本选项”）中按高级按钮=> 表/视图选项=> 将脚本触发器设置为 True。 [还要检查此链接](https://www.mssqltips.com/sqlservertip/2500/sql-server-2008-r2-generate-scripts-wizard-with-database-schema-and-data/)或[此](https://stackoverflow.com/questions/13200511/how-to-generate-scripts-for-all-triggers-in-database-using-microsoft-sql-server)。如果您只想要触发器，只需选择一个表即可继续下一步。

# android - 如何在android中将样式写入EditText的错误文本？

> ID：14413575
> 
> 赞同：48
> 
> 时间：2013-01-19T10:52:20.600
> 
> 标签：android, android-layout

我正在尝试为我的 android 应用程序编写新的自定义样式。`setError`我需要为设置后出现的 errorText 赋予样式`EditText`。

如何自定义它的样式？

例如：我想在 style.xml 中设置它的`background`白色和`textColor`：蓝色等

![在此处输入图像描述](../Images/e39bc8075ff31a8621ebbc030fd5049f.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-07T13:28:03.883

解决方案在最后，这是屏幕截图：

![样式错误](../Images/6fe34ac4227d50f68a64bcfa64061d0b.png)

* * *

*一些解释*

您***也许***可以使用以下行设置 textcolor

```
yourEditText.setError(Html.fromHtml("<font color='blue'>this is the error</font>")); 
```

但是，这可能无法保证。

* * *

根据源代码，这`Popup`显示的类型`ErrorPopup`是内部类`TextView`。这个内容`Popup`是一个单一的`TextView`膨胀来自`com.android.internal.R.layout.textview_hint`

```
final TextView err = (TextView) inflater.inflate(com.android.internal.R.layout.textview_hint,
      null); 
```

这个的背景`Popup`取决于是否应该放在anchor之上：

```
if (above) {
    mView.setBackgroundResource(com.android.internal.R.drawable.popup_inline_error_above);
} else {
    mView.setBackgroundResource(com.android.internal.R.drawable.popup_inline_error);
} 
```

* * *

由于用于创建弹出窗口的所有 android 资源都是内部的并且最终是硬编码的，因此最好的办法是创建自己的错误弹出窗口。这将非常容易，并且您不会真正干扰正常情况，`EditText`因为默认弹出窗口仅用于显示错误，因此，创建您自己的就可以了。

* * *

**解决方案**

我在这里创建了它：[WidgyWidgets](https://github.com/sherifelkhatib/WidgyWidgets)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-05T13:47:13.967

我认为您不能以这种方式自定义其样式，因为错误弹出窗口[使用内部样式](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/Editor.java#L3760)：

```
mPopupInlineErrorBackgroundId = getResourceId(mPopupInlineErrorBackgroundId,
                    com.android.internal.R.styleable.Theme_errorMessageBackground);
mView.setBackgroundResource(mPopupInlineErrorBackgroundId); 
```

但是，您可以[`Spanned`](http://developer.android.com/reference/android/text/Spanned.html)使用重载的[`setError(CharSequence, Drawable)`](http://developer.android.com/reference/android/widget/TextView.html#setError%28java.lang.CharSequence,%20android.graphics.drawable.Drawable%29).

您可以`Spanned`使用[`fromHtml()`](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29).

但是，您仍然无法设置弹出背景图像 :-(

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-19T06:20:44.457

如果编辑文本字段为空，请在表单验证时添加。

```
 int ecolor = R.color.black; // whatever color you want
        String estring = "Please enter a valid email address";
        ForegroundColorSpan fgcspan = new ForegroundColorSpan(ecolor);
        SpannableStringBuilder ssbuilder = new SpannableStringBuilder(estring);
        ssbuilder.setSpan(fgcspan, 0, estring.length(), 0);

        edtEmail.requestFocus();
        edtEmail.setError(ssbuilder); 
```

当您在编辑文本中写入时，错误标志自动消失

谢谢萨钦

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-06T10:05:40.737

我已经看到了接受的答案，但我不喜欢建议的库

我认为这是 Android 框架中的一个错误，我在这里提交了一个错误： [https ://code.google.com/p/android/issues/detail?id=158590](https://code.google.com/p/android/issues/detail?id=158590)

编辑：android 设计库 TextInputLayout 小部件可用于在 EditText 上获得更好的错误处理。

看看这里的样子： [https ://www.youtube.com/watch?v=YnQHb0fNtF8](https://www.youtube.com/watch?v=YnQHb0fNtF8)

以及如何在这里实现：http: [//code.tutsplus.com/tutorials/creating-a-login-screen-using-textinputlayout--cms-24168](http://code.tutsplus.com/tutorials/creating-a-login-screen-using-textinputlayout--cms-24168)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-08T10:42:47.540

按照这个链接有一个漂亮的错误信息的材料设计外观！ [材料文档](http://www.materialdoc.com/user-input-errors/) [![截屏](../Images/7a1d554ec61abd14ca6a7dce1fa775f9.png)](https://i.stack.imgur.com/HRBQu.png)

**我看到链接不再有效，所以这里是如何做到的：** 使用`TextInputLayout`

```
<android.support.design.widget.TextInputLayout
                android:id="@+id/ipAddress"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="-30dp"
                android:layout_gravity="end"
                android:digits="1234567890"
                app:errorEnabled="true" >
                <android.support.design.widget.TextInputEditText
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="end"
                    android:maxLines="1"
                    android:width="200dp"
                    android:text="@{ethernetData.ipAddress}"
                    android:enabled="@{!ethernetData.ethernetAutoIp}"/> 
```

并在代码中`TextWatcher`（我使用数据绑定）调用`setError`你的`TextInputLayout`

```
binding.ipAddress.setError(your error); 
```

我就是这样做的：

```
binding.ipAddress.getEditText().addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {

        }

        @Override
        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {

        }

        @Override
        public void afterTextChanged(Editable editable) {

            if(! Patterns.IP_ADDRESS.matcher(editable.toString()).matches()) {
                binding.ipAddress.setError(your error string);
                IpAddressOK = false;
            }
            else{
                binding.ipAddress.setError(null);
                IpAddressOK = true;
            }
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-30T13:36:27.003

这很好用！

```
private fun setErrorOnSearchView(searchView: SearchView, errorMessage: 
String) {
val id = searchView.context
        .resources
        .getIdentifier("android:id/search_src_text", null, null)
val editText = searchView.find<EditText>(id)

val errorColor = ContextCompat.getColor(this,R.color.red)
val fgcspan = ForegroundColorSpan(errorColor)
val builder = SpannableStringBuilder(errorMessage)
builder.setSpan(fgcspan, 0, errorMessage.length, 0)
editText.error = builder
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-09T11:07:25.457

我还没有找到任何编辑错误样式的解决方案，但我创建了带有错误弹出窗口的自定义 EditText。希望它会有所帮助：

```
 import android.content.Context
import android.util.AttributeSet
import android.view.Gravity
import android.view.LayoutInflater
import android.widget.EditText
import android.widget.LinearLayout
import android.widget.PopupWindow
import android.widget.TextView
import androidx.annotation.StringRes

class ErrorEditText : EditText {

    constructor(context: Context) : super(context)

    constructor(context: Context, attrs: AttributeSet) : super(context, attrs)

    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr)

    private var errorPopup: PopupWindow? = null

    fun showError(message: String) {
        showErrorPopup(message)
    }

    fun showError(@StringRes messageResId: Int) {
        showErrorPopup(context.getString(messageResId))
    }

    fun dismissError() {
        post {errorPopup?.dismiss() }
    }

      private fun showErrorPopup(message: String) {
        post {
            dismissError()
            val inflater = (context.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater)
            val view = inflater.inflate(R.layout.edit_text_error, null, false)
            errorPopup =
                PopupWindow(view, LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT)
            errorPopup?.contentView?.findViewById<TextView>(R.id.message)?.text = message
            errorPopup?.showAsDropDown(this, 0, 10, Gravity.START)
        }
    }
} 
```

您可以使用方法： `showError(message: String)`或`showError(@StringRes messageResId: String)`显示错误和`dismissError()`隐藏它的方法。

请记住，如果您使用多个片段在应用程序中导航，弹出窗口与活动生命周期绑定，请记住在导航时关闭它们。

这是我用于弹出窗口的 edit_text_error 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="2dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        android:elevation="2dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:background="#fff">

        <TextView
            android:id="@+id/message"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#E20000"
            android:padding="8dp"
            android:textSize="11sp"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            tools:text="Please enter a valid email address!" />

    </androidx.constraintlayout.widget.ConstraintLayout>
</androidx.constraintlayout.widget.ConstraintLayout> 
```

如果您想将弹出窗口移至 EditText 的末尾，请将`showErrorPopup()`方法中的最后一行更改为： `errorPopup?.showAsDropDown(this, 0, 10, Gravity.END)`

您可以通过修改`showAsDropDown(view: View, x: Int, y: Int, gravity: Gravity)`方法的重力或x和y参数来操纵弹出窗口的位置

# sql - Oracle SQL查询以查看字符是否在列中

> ID：14413576
> 
> 赞同：0
> 
> 时间：2013-01-19T10:52:24.187
> 
> 标签：sql, oracle

我正在尝试查询字符“th”是否在表 emp 的列 enames 中。

我使用命令

```
select ename from emp where ename like '%th'; 
```

但是 SQL 说没有选择行。

有什么建议么？

编辑：

解决了

这最终奏效了。

```
 SELECT * FROM EMP WHERE ENAME LIKE '%TH%'; 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:54:19.270

```
where ename like '%t%' or ename like '%h%'; 
```

或使用正则表达式：

```
where regexp_like(ename, '[th]'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:58:42.020

尝试：

```
where UPPER(ename) like '%TH%'; 
```

# php - 把div放在MYSQL中死

> ID：14413577
> 
> 赞同：0
> 
> 时间：2013-01-19T10:52:33.570
> 
> 标签：php, html, mysql, css

我有这个mysql请求：

```
mysql_query($query) or die(mysql_error()); 
```

这很简单，但我想更改`mysql_error()`这个 div：

```
<div class="ui-widget">
    <div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;">
        <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
        <strong>Error!</strong></p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:57:38.653

最好使用显示错误的功能：

```
function show_error($error_text){
    $var = '<div class="ui-widget">
        <div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;">
        <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
        <strong>'.$error_text.'</strong></p>
        </div>
        </div>';
    die($var);
} 
```

然后像这样使用它：

```
mysql_query($query) or show_error('Query execute failed'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:54:22.027

您可以将整个 html 代码放在一个变量中，如下所示：

```
$var = '<div class="ui-widget">
    <div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;">
        <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
        <strong>Error!</strong></p>
    </div>
</div>'; 
```

然后，您只需编辑`die()`即可打印`$var`.

```
mysql_query($query) or die($var); 
```

# java - 如何在 Java 中打印所有枚举值？

> ID：14413581
> 
> 赞同：23
> 
> 时间：2013-01-19T10:53:11.527
> 
> 标签：java, enums

```
enum generalInformation {
    NAME {
        @Override
        public String toString() {
            return "Name";
        }
    },
    EDUCATION {
        @Override
        public String toString() {
            return "Education";
        }
    },
    EMAIL {
        @Override
        public String toString() {
            return "Email";
        }
    },
    PROFESSION {
        @Override
        public String toString() {
            return "Profession";
        }
    },
    PHONE {
        @Override
        public String toString() {
            return "Phone";
        }
    }
} 
```

我有这些信息在枚举中可用。

1.  如何打印所有枚举值，例如：`print.generalInformation`？

输出：

> 姓名
> 教育
> 电子邮件
> 电话

2.  如何将该枚举`generalInformation`作为参数传递给另一个函数？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-19T10:56:51.620

```
System.out.println(java.util.Arrays.asList(generalInformation.values())); 
```

您的第二部分...与 an`interface`或 a相同`class`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-19T10:55:41.553

首先，我将重构您的枚举以在构造函数参数中传递字符串表示。该代码在底部。

现在，要打印所有枚举值，您只需使用以下内容：

```
// Note: enum name changed to comply with Java naming conventions
for (GeneralInformation info : EnumSet.allOf(GeneralInformation.class)) {
    System.out.println(info);
} 
```

使用的替代方法`EnumSet`是使用`GeneralInformation.values()`，但这意味着每次调用它时都必须创建一个新数组，这对我来说是一种浪费。诚然，`EnumSet.allOf`每次调用也需要一个新对象......如果您经常这样做并且担心性能，您总是可以将它缓存在某个地方*。*

当涉及到参数时，您可以`GeneralInformation`像使用任何其他类型一样使用：

```
public void doSomething(GeneralInformation info) {
    // Whatever
} 
```

用一个值调用，例如

```
doSomething(GeneralInformation.PHONE); 
```

* * *

**使用构造函数参数重构**

```
public enum GeneralInformation {
    NAME("Name"),
    EDUCATION("Education"),
    EMAIL("Email"),
    PROFESSION("Profession"),
    PHONE("Phone");

    private final String textRepresentation;

    private GeneralInformation(String textRepresentation) {
        this.textRepresentation = textRepresentation;
    }

    @Override public String toString() {
         return textRepresentation;
    }
} 
```

使用您*当前*的值，您实际上可以自动将名称转换为标题大小写 - 但从长远来看这不会很灵活，我认为这个显式版本更简单。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-10T02:49:41.930

从**Java 8**开始，我建议采用以下解决方案：

```
public static String printAll() {
    return Stream.of(GeneralInformation.values()).
                map(GeneralInformation::name).
                collect(Collectors.joining(", "));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:42:41.163

在应用程序中，将数据与表示分离是一种很好的做法。它允许数据在不同的用户界面中使用，它使数据对象更加轻量级，并为未来的[国际化](http://docs.oracle.com/javase/tutorial/i18n/)提供了可能性。

考虑到这一点，最好避免将显示名称与枚举常量强耦合。幸运的是，有一个类使这变得简单：EnumMap。

```
public class ApplicationUI {
    private final Map<GeneralInformation, String> names;

    public ApplicationUI() {
        names = new EnumMap<>(GeneralInformation.class);

        names.put(GeneralInformation.NAME,       "Name");
        names.put(GeneralInformation.EDUCATION,  "Education");
        names.put(GeneralInformation.EMAIL,      "Email");
        names.put(GeneralInformation.PROFESSION, "Profession");
        names.put(GeneralInformation.PHONE,      "Phone");

        assert names.keySet().containsAll(
            EnumSet.allOf(GeneralInformation.class)) :
            "Forgot to add one or more GeneralInformation names";
    }

    public String getNameFor(GeneralInformation info) {
        return names.get(info);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-26T18:31:11.340

如果您仍在使用 Java 1.7，这对我有用：

```
String genInfoValues = "";
boolean firstRun = true;
for (generalInformation info : generalInformation.values()){
    if (firstRun) {
        firstRun = false;
        genInfoValues += info.name();
    } else {
        genInfoValues += ", " + info.name();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-23T17:56:32.133

枚举上的 values() 返回一个数组。因此，执行以下操作很简单：

System.out.println(Arrays.toString(generalInformation.values()));

# c# - 将脚本标签放在div中并执行

> ID：14413583
> 
> 赞同：1
> 
> 时间：2013-01-19T10:53:37.960
> 
> 标签：c#, javascript, .net

我正在为我的网站构建一个小型广告系统，以便我可以在数据库中添加新广告。大多数广告由图像组成，我只会将图像作为 innerhtml 写入 div。这工作正常。但是，某些广告仅包含一个脚本标记，该标记应放置在需要广告的位置。由于我必须从 .NET 中的代码或 ajax 调用动态地执行此操作，因此我遇到了一些问题。只需像这样设置一个div的innerhtml：

```
<div id="asdf" runat="server">
    <script type="text/javascript" src="xxxxx"></script>
</div> 
```

...不会工作，因为它不会被执行。无论我是在页面加载后的代码中设置它，还是使用 ajax 调用进行设置。

我可能能够以某种方式调用 eval() ，但这并不能保证如果我做对了，脚本将准确地放置在我想要的位置。

有任何想法吗？这不是一个新问题，许多广告网络都有脚本标签而不是图像等。

**编辑：** javascript 文件位于另一个域。如果我将 src 属性设置为仅包含警报的本地文件，一切正常！你不能跨域做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:16:48.367

你可以试试这个：

```
var script = document.createElement('script');
script.src = 'xxxxxx';
script.type = 'text/javascript';
var div = document.getElementById('asdf');
div.appendChild(script); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:14:00.097

如果您知道要从哪个源添加文件，则可以动态添加脚本标签，如下所示：

```
 // Get head object from DOM.
var head_obj = document.getElementsByTagName('HEAD').item(0);

// Create script object.
var script_obj  = document.createElement( 'script' );
script_obj.type = 'text/javascript';
script_obj.src  = File_Path;

// Define functions to be called on script load and load body.
script_obj.onload = onLoadFunc;

// Appendnd script object to the head object.
head_obj.appendChild( script_obj ); 
```

希望有帮助

# jquery - 如何从jsp返回对AJAX的响应

> ID：14413585
> 
> 赞同：2
> 
> 时间：2013-01-19T10:53:46.193
> 
> 标签：jquery, jsp-tags

我在从 JSP 页面返回对 AJAX 的响应时遇到问题。

我试过这段代码：

```
response.getWriter().print(result); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:06:31.080

您要返回的结果类型是什么？如果是纯文本或html，则在写出之前设置内容类型。

```
response.setContentType("text/html");  
response.getWriter().write(result); 
```

如果您尝试返回其他 java 对象，如 list 或 map，则应将其转换为 json 对象并相应地设置内容类型，

```
response.setContentType("application/json");
response.getWriter().write(json); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:59:10.097

我用于将 XML 内容从 JSP 返回到 Ajax 的方法：

```
<%@ page contentType="text/xml;charset=UTF-8"%>
<%
[....i did my stuff here ....]
  response.getWriter().write(res.toString());  
%> 
```

奇迹般有效！

我没有使用 XML 以外的其他响应，但我想，如果你设置`contentType`得当，它会是相似的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:57:37.293

如果您尝试向 AJAX 查询返回 HTML 响应，那么您需要编写“常规”JSP，以便在您调用它时生成 HTM 页面。

如果您尝试返回非 HTML 响应，那么我认为使用 Servlet 会更好。

# prolog - 如何将 Prolog 数据库更改为动态的？

> ID：14413589
> 
> 赞同：0
> 
> 时间：2013-01-19T10:54:10.690
> 
> 标签：prolog

我有以下通过交换机连接街道的数据库：

例如

```
switch(r2,w52=s).
switch(w52=s,w53=d). 
```

如何通过算法确定它，而不是通过数据库中的显式存款。？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:26:29.467

在 Prolog 中创建和查询动态生成的事实有多种选择。

基本的一种是使用元谓词，例如`assert`and `retract`。谓词在程序中添加和删除事实。例如，`assert(switch(w52=s,w53=d))`将在您的程序中添加一个 switch 子句。您必须提前申报`:- dynamic switch/2.`。使用 assert 的缺点是它不会回溯。也就是说，如果您在某个谓词中断言了某些事实并且它回溯，则该事实不会自动清除。

另一种选择是将这些事实累积在一个列表中，然后使用`member/2`or`memberchk/2`来检查给定的事实是否在该列表中，而不是查询程序。例如：

```
L = [switch(w52=s,w53=d), switch(w53=d,w54=d), ...]
member(switch(w53=A, w54=B), L) % Unifies A=d, B=d 
```

与使用断言不同，此方法将像任何其他 Prolog 谓词一样工作。

最后，您可以运行一个两阶段的程序。在第一阶段，将您计算并希望用作事实的条款打印到文件中。这很容易，因为 Prolog 支持编写完整的术语，无需自己格式化。之后只需查阅文件。如果您阅读事实而不是生成事实，这是最有效的方法，因为 Prolog 将编译您的文件。

# php - 记住我 cookie 伪造

> ID：14413592
> 
> 赞同：2
> 
> 时间：2013-01-19T10:54:18.993
> 
> 标签：php, cookies, remember-me

当用户登录并选中“记住我”框时，我会为它生成一个密钥（md5 上非常随机的数字）并保存在它的 cookie 中。如果用户未登录，我的代码会检查“记住我的密钥”cookie，如果它与用户匹配，则他已登录。

我的问题是，我如何阻止用户处理他们的记住我关键 cookie 并将其传递给他们的朋友？因为如果他们这样做，复制 cookie 的人将在不知道帐户密码的情况下登录，然后他们将无需购买即可访问高级帐户。

我无法将密钥绑定到 ip，否则记住我将无法正常工作，因为许多计算机经常更改 ip。我想保存用户代理和其他浏览器信息，你怎么看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T11:13:41.763

您可以通过在每次使用 cookie 时重新生成 cookie 的密钥来检测 cookie 的共享。如果有人给别人一个记住我的cookie（或者它被偷了）并且他们都使用它，那么在他们使用他们的cookie之后他们最终都会得到不同的密钥。

只允许每个帐户最近生成的密钥。如果有人使用与数据库值不匹配的密钥，则使与该用户关联的所有会话无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:59:15.217

> 我的问题是，我如何阻止用户处理他们的记住我关键 cookie 并将其传递给他们的朋友？

最好的解决方案是不要使用记住我： [https ://www.owasp.org/index.php/Guide_to_Authentication#Remember_Me](https://www.owasp.org/index.php/Guide_to_Authentication#Remember_Me)

如果您仍然想要，那么您可以检查请求者的浏览器和 ip，但您可能会遇到可用性问题。将并发会话数限制为每个付费用户 1 个可能会阻止您担心的漏洞利用。

# diff - tcl 脚本比较 2 个文本并返回仅不同的行的行号。另外，如何避免“子进程异常退出”？

> ID：14413596
> 
> 赞同：0
> 
> 时间：2013-01-19T10:54:42.623
> 
> 标签：diff, exec, tcl

谁能指导我如何编写 tcl 脚本来比较 2 个文本并返回仅不同的行的行号？我知道如何在 bash 中做到这一点，但是在 tcl 中包含 bash 似乎不是很整洁，这是 bash 命令：

```
 diff --old-line-format '%L' --new-line-format '' --unchanged-line-format ''  <(nl File1) <(nl File2) | awk '{print $1 }' > difflines 
```

要将其包含在 tcl 中，我执行了以下操作：

```
exec cat nl File1 > File11
exec cat nl File2 > File22
exec diff --old-line-format {%L} --new-line-format {} --unchanged-line-format {}  < 
File11 < File22 | awk {{print $1 }} > difflines 
```

有没有更清洁的方法？

另外，如果我得到“孩子异常退出”的差异，我该如何避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:12:35.727

[Tcllib](http://tcllib.sourceforge.net/)中的[`struct::list`](http://tcllib.sourceforge.net/doc/struct_list.html)包有计算最长公共子序列的工具，这是工具的关键部分。要使用，您将数据加载到 Tcl 中并将其拆分为行列表：`diff`

```
proc getLines {filename} {
    set f [open $filename]
    set result [split [read $f] "\n"]
    close $f
    return $result
} 
```

然后你可以得到关于公共元素的信息（==公共行）：

```
set sharedLineInfo [struct::list longestCommonSubsequence $file1_lines $file2_lines] 
```

这将返回一对列表，其中每个列表是公共行的索引（*从零开始*计数）；第一个列表用于第一个文件，第二个列表用于第二个文件。任何未列出的行号都将是已更改的行号。

还有一个功能可以反转提供的信息以获取有关如何将一个序列更改为另一个序列的说明：

```
set changes [struct::list lcsInvert $sharedLineInfo \
        [llength $file1_lines] [llength $file2_lines]] 
```

这将返回一个三元组列表，其中第一个是执行的操作（`added`或`changed`）`deleted`，第二个和第三个是每个相关列表中的索引范围（即从零开始的行号）。

我*不太*确定如何获取这些信息并产生您正在寻找的东西，但我想我们可以像这样把它放在一起：

```
package require struct::list
proc getLines {filename} {
    set f [open $filename]
    set result [split [read $f] "\n"]
    close $f
    return $result
}
proc variedLines {filename1 filename2} {
    set l1 [getLines $filename1]
    set l2 [getLines $filename2]
    lassign [struct::list longestCommonSubsequence $l1 $l2] common1
    set result {}
    for {set i 0} {$i < [llength $l1]} {incr i} {
        if {$i ni $common1} {
            lappend result [expr {$i + 1}]
        }
    }
    return $result
} 
```

如果您希望将结果写入文件，`puts $f [join $someList "\n"]`可能会出现功能，但我将把它留作练习......</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T15:44:52.990

关于“子进程异常退出”，来自[`exec`手册页](http://tcl.tk/man/tcl8.5/TclCmd/exec.htm)（强调我的）：

> 如果*管道中的任何命令异常退出*或被终止或挂起，则*exec 将返回错误*，错误消息将包括管道的输出，然后是描述异常终止的错误消息；-errorcode 返回选项将包含有关上次遇到的异常终止的附加信息。如果任何*命令写入其标准错误*文件并且该标准错误未重定向且未指定 -ignorestderr，则*exec 将返回错误*；错误消息将包括管道的标准输出，然后是有关异常终止的消息（如果有），然后是标准错误输出。

“命令异常退出”是指命令以非零状态退出。一些常见的命令（如 grep 和 diff）返回非零退出状态以指示正常情况，因此您必须将该 exec 调用包装在`catch`

```
set rc [catch {exec bash -c {
    diff --old-line-format '%L' --new-line-format '' --unchanged-line-format ''  <(nl File1) <(nl File2) | awk '{print $1}' > difflines
}} output]

if {$rc == 0} {
    puts "no differences found"
} elseif {$rc == 1} {
    puts "differences found:"
    puts $output
} else {
    puts "diff returned an error: $output"
} 
```

# php - 需要简单的 Chechlist PHP 应用程序帮助

> ID：14413597
> 
> 赞同：0
> 
> 时间：2013-01-19T10:54:42.703
> 
> 标签：php, mysql

我正在构建一个简单的 PHP 清单应用程序，它将句子作为输入，存储在 MYSQL 数据库中，然后在每个列表项前面使用删除按钮回显该列表，例如：

*   1) 做早餐[移除按钮]
*   2) 上大学 [移除按钮]
*   3) 吃午餐 [移除按钮]
*   4) 返回首页 [移除按钮]

现在将执行什么函数来删除当前正在删除的列表项。

这是我从数据库中检索列表及其相应的删除按钮的方式：

```
$sql2 = "SELECT * FROM `info` LIMIT 0, 30 ";
$arr = mysql_query($sql2);
while($data = mysql_fetch_array($arr)){

echo '<strong>'.$data['id'].')</strong>'.' '.$data['text'].'<form action="list.php" method="POST">
<input type="submit" value="Remove" />
</form>'.'<br />'; 
```

请帮助我如何处理这种情况。PS 数据库只有“ID”和“列表项”两列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:07:12.973

您可以`< input type='hidden' name='data' value="<?php echo $data[text]; ?>" >`在表格中使用

最后，你可以把这个块去掉。

```
if(isset($_POST['submit']) {
    $query = "delete from info where text = '$_POST[data]'";
    //run the query here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:15:37.273

你特别想要什么？您的意思是您希望应用程序获取复选框元素并将它们存储在数据库中。
然后获取该数据并应用于每个删除命令？具体我的朋友，我们可以提供帮助。

# android - 开关\案例没有按预期工作

> ID：14413598
> 
> 赞同：0
> 
> 时间：2013-01-19T10:55:06.207
> 
> 标签：android, switch-statement

我的日志行说 animalclass 是 4，但不是转到“案例 4”，而是返回默认值。它适用于案例 2。这怎么可能？提前致谢。

```
public int gettile(int animalclass) {
    Log.e("gettile", "animalclass = " + animalclass); 
    switch (animalclass) {
    case 1: // 
        tile=R.drawable.picnictile; 

        break;

    case 2: // 

        tile=R.drawable.picnictile; 

        break;

    case 3: // 

        tile=R.drawable.picnictile; 

    case 4: // 

        tile=R.drawable.picnictile; 

    case 5: // 

        tile=R.drawable.face; 

    default:
        Log.e("gettile", "failed!!!!!!!!!! = " + animalclass); 
        tile=R.drawable.rainbowtile;    

        break;
    }
    Log.e("gettile", "returning = " + tile); 
    return tile;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:56:27.713

您需要使用`break;`停止其他案例执行，因为没有中断它将执行正确的案例块语句以及“默认”代码块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:57:22.103

在所有情况下尝试添加 Break 语句。

```
case 3: // 
tile=R.drawable.picnictile; 
break;
case 4: // 
tile=R.drawable.picnictile; 
break;
case 5: // 
tile=R.drawable.face; 
break; 
```

如果您在外壳应该做的“事情”之后没有打破它，那么开关将无法正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T10:57:52.037

您忘记在`break`关键字之前添加`default`关键字。试试这个：

```
public int gettile(int animalclass) {
    Log.e("gettile", "animalclass = " + animalclass); 
    switch (animalclass) {
    case 1: // 
        tile=R.drawable.picnictile; 

        break;

    case 2: // 

        tile=R.drawable.picnictile; 

        break;

    case 3: // 

        tile=R.drawable.picnictile; 
    break;
    case 4: // 

        tile=R.drawable.picnictile; 
    break;
    case 5: // 

        tile=R.drawable.face; 

    break;
    default:
        Log.e("gettile", "failed!!!!!!!!!! = " + animalclass); 
        tile=R.drawable.rainbowtile;    

        break;
    }
    Log.e("gettile", "returning = " + tile); 
    return tile;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T11:15:24.137

添加**中断；**每个 case 后面都有关键字，否则 switch 也会执行**default**语句，结果会出乎意料。

# javascript - Javascript 中用于接受 INTEGERS 后跟 SLASH 后跟 INTEGERS 的正则表达式

> ID：14413603
> 
> 赞同：0
> 
> 时间：2013-01-19T10:55:24.037
> 
> 标签：javascript, regex, validation

我想在 JavaScript 函数中验证来自 html 表单的值，格式有点灵活。

IE，

1 或 2 或 3 或 4 或 5 个整数值，后跟反斜杠 (/)，后跟 1 或 2 或 3 个整数。

例子。

`12345/123` 是一个有效值。

`1234/12` 是一个有效值。

`123/123` 是一个有效值。

`1/1` 是一个有效值。

`a/123` 不是有效值。

`123/%`不是有效值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:56:33.430

您知道，有时查阅文档并不过分要求...

```
\d{1,5}/\d{1,3} 
```

还有一些很好的网站可以学习正则表达式，例如[regular-expressions.info](http://www.regular-expressions.info/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:58:14.580

你可以试试这个正则表达式：`^\d{1,5}\/\d{1,3}$`

例子：

```
var re = /^\d{1,5}\/\d{1,3}$/;

console.log(re.test('12345/123')); // true
console.log(re.test('1234/12')); // true
console.log(re.test('123/1')); // true
console.log(re.test('12/123')); // true
console.log(re.test('1/123')); // true
console.log(re.test('a/123')); // false
console.log(re.test('123456/123'); // false 
```

也就是说，您应该从基础开始：

[http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

在这里你可以找到很多例子：[http ://regexlib.com/?AspxAutoDetectCookieSupport=1](http://regexlib.com/?AspxAutoDetectCookieSupport=1)

# asp.net - ASP.NET MVC4 - 自定义默认帐户模型和控制器时出错

> ID：14413606
> 
> 赞同：0
> 
> 时间：2013-01-19T10:55:42.093
> 
> 标签：asp.net, asp.net-mvc-4, entity-framework-5

我正在开始使用 ASP.NET MVC4 CodeFirst 方法制作一个简单的网站。该网站是围绕能够注册、发布帖子等的用户构建的。现有的`UserProfile`类已针对住宿其他字段（例如：名字、姓氏等）进行了修改。

当我运行该网站时，我遇到了类似的错误：

```
Invalid column name 'FirstName'.
Invalid column name 'LastName'.
Invalid column name 'Phone'. 
```

我认为这是因为模型更新时数据库没有更新。因此，我在其中设置了以下内容，`Application_Start()`目的`Global.asax`是始终删除数据库（至少在我掌握它之前）。

```
protected void Application_Start()
    {
        Database.SetInitializer(new DropCreateDatabaseAlways<UsersContext>());
        //Other default generated stuff below...
    } 
```

我也试过了`DropCreateDatabaseIfModelChanges`，但两种方法都没有删除数据库。

这不可能吗？为什么？难道我做错了什么？

我相信可以将信息存储在另一个表中并将其链接到此表，但我更喜欢将其保存在一个表中。

`UserProfiles`添加到网站上下文中也是一个坏主意（可以说：（`DatabaseContext`其中有其他实体，如帖子、评论等）并更改`AccountsController`为使用`DatabaseContext`而不是`UsersContext`？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:00:23.853

您是否`Enable-Migrations`在包管理器控制台中运行过？您应该会在项目中看到一个带有 configuration.cs 文件的迁移文件夹，确保您已启用自动迁移。

```
public Configuration(){
    AutomaticMigrationsEnabled = true;
    //if you drop columns - consider this carefully...
    AutomaticMigrationDataLossAllowed = true;
} 
```

# php - 使用 while 循环返回 nodeValues

> ID：14413620
> 
> 赞同：0
> 
> 时间：2013-01-19T10:57:12.987
> 
> 标签：php

我正在使用 xpath 来获取页面上的各种元素。如果我使用这样的 foreach 循环，`foreach ($company as $node) { echo $node->nodeValue. "<br>"; }`它可以工作，但我只能从一个变量返回值，这意味着我必须创建两个单独的 foreach 循环。我希望能够使用 while 循环，这样我就可以同时从变量返回两个值。while 循环不返回任何错误或值。

```
$doc = new DOMDocument();
@$doc->loadHTML($source);
$xpath = new DOMXpath($doc);

$company = $xpath->query("//*[@class='name']");
$address = $xpath->query("//*[@class='address']");

$i = 0;

while ($i < count($company)) {
   echo $company->nodeValue. "<br>";
   echo $address->nodeValue. "<br><br>";
   $i++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:15:43.643

它们是[`NodeLists`](http://php.net/manual/en/class.domnodelist.php)，要按索引检索单个节点，请使用[`->item()`](http://php.net/manual/en/domnodelist.item.php)

```
while ($i < $company->length ) {
   echo $company->item($i)->nodeValue. "<br>";
   echo $address->item($i)->nodeValue. "<br><br>";
   $i++;
} 
```

# facebook - Facebook 登录错误：应用程序配置不允许给定 URL。：

> ID：14413633
> 
> 赞同：1
> 
> 时间：2013-01-19T10:58:11.833
> 
> 标签：facebook, login, oauth

我正在按照本指南在我的网站上创建 facebook 登录：[https ://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)

我首先在 facebook 上创建了一个应用程序，然后在我的代码中使用了应用程序 ID。完成指南中的第 2 步后，我想测试错误。我不断收到上述错误“应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL ....”

为了解决这个问题，我尝试将应用网站 URL 更改为[http://www.mywebpage.com/index.html](http://www.mywebpage.com/index.html)。那什么都没做......

有任何想法吗？

谢谢 ![索引.html](../Images/31901a33ec007d9dbe9e53ace248fe4e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T23:10:31.473

还要仔细检查您的应用 ID。我在本地开发时使用了测试应用程序 ID，却忘记将其切换回真实的应用程序 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T14:57:50.977

仔细检查您的应用程序设置。通常绝对 URL 会导致错误。在您的 App 域中添加根 URL（`www`如果您有子域，则不添加）可能会解决您的问题。`mywebsite.com`

# iphone - CAGradientLayer 在 iOS 6 中不起作用

> ID：14413639
> 
> 赞同：1
> 
> 时间：2013-01-19T10:58:46.313
> 
> 标签：iphone, ios, uibutton, quartz-core, cagradientlayer

我确实使用`CAGradientLayer`过自定义 UIButton `iOS 5`，它对我来说很好，并且获得自定义按钮也是一样的，当我在其中使用相同的代码时，`iOS 6`它只在按钮上显示我的`white`颜色..`<QuartzCore/QuartzCore.h>`是不被支持的`iOS 6`..什么将是它不显示自定义按钮的原因。检查它工作的代码`iOS 5`

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self action:@selector(pressed) forControlEvents:UIControlEventTouchDown];
[button setTitle:@"START " forState:UIControlStateNormal];
button.frame = CGRectMake(62, 250, 196, 37);

[button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[button setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];
[button setBackgroundColor:[UIColor blackColor]];
[[button titleLabel] setFont:[UIFont fontWithName:@"Knewave" size:18.0f]];

// Draw a custom gradient
CAGradientLayer *btnGradient = [CAGradientLayer layer];
btnGradient.frame = button.bounds;
btnGradient.colors = 
  [NSArray arrayWithObjects:
    (id)[[UIColor colorWithRed:102.0f/255.0f green:102.0f/255.0f blue:102.0f/255.0f alpha:1.0f] CGColor],
    (id)[[UIColor colorWithRed: 51.0f/255.0f green: 51.0f/255.0f blue: 51.0f/255.0f alpha:1.0f] CGColor],
    nil];
[button.layer insertSublayer:btnGradient atIndex:0];

// Round button corners
CALayer *btnLayer = [button layer];
[btnLayer setMasksToBounds:YES];
[btnLayer setCornerRadius:5.0f];

// Apply a 1 pixel, black border around Buy Button
[btnLayer setBorderWidth:1.0f];
[btnLayer setBorderColor:[[UIColor blackColor] CGColor]];

[self.view addSubview:button]; 
```

# xml - Linq to XML 和读取 XML

> ID：14413643
> 
> 赞同：0
> 
> 时间：2013-01-19T10:59:38.560
> 
> 标签：xml, linq-to-xml

我有一个我认为是原始 XML 的 Web 服务（我的意思是该服务的 URL 是 [http://site/service]）。如果我要传入一个值 [http://site/service/?value=test]，那么我会看到一个 XML 节点列表。

我想做的是查看示例（或解释），了解如何使用 Linq to XML 作为后端使用此页面 - 我看到的大多数示例似乎并不相关，或者我可能没有正确理解它。

此外，我想做的是让后端（Linq to XML）成为一个 DAL，我可以在其中从 UI 传递值。

如果有人可以指导我，我应该这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:13:02.750

您应该能够为 XDocument.Load() 静态方法提供 URL 以加载文档。然后您应该能够查询或更改文档。如果要保存修改后的文档，可以使用 XDocument.Save() 方法。

# ruby-on-rails - 导轨不工作

> ID：14413644
> 
> 赞同：0
> 
> 时间：2013-01-19T10:59:49.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我的 rails 命令突然停止工作

我只是在输入命令

```
rails s 
```

并得到错误

```
bash: /usr/local/bin/rails: /usr/bin/ruby1.9.1: bad interpreter: No such file or directory 
```

和命令

```
 ruby -v   gives me

ruby 1.9.1p431 (2011-02-18 revision 30908) [i686-linux] 
```

有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:51:08.970

请注意您的 PATH 变量，我还必须从 和 中删除所有 ruby​​ 和rvm`.bashrc`条目。也许在某个地方指定了您的旧红宝石。`.profile``.bash_profile`

另外：在我的 MACOSX_10.6.8 上，我只是在将 ruby​​-1.9.3p125 更新到最新版本时遇到了问题。所以我从头开始做了所有事情并删除了（`rvm remove 1.9.3p125`），并且还完全`rvm implode`删除了`~/.rvm`目录。

检查[如何从我的系统中删除 RVM（Ruby 版本管理器）？](https://stackoverflow.com/questions/3558656/how-to-remove-rvm-ruby-version-manager-from-my-system)

稍后的：

*   `curl -L https://get.rvm.io | bash -s stable`
*   `source ~/.rvm/scripts/rvm`
*   `rvm install 1.9.3`

之后，一切正常！

# ios - 警报视图？警报？它是什么？

> ID：14413645
> 
> 赞同：1
> 
> 时间：2013-01-19T11:00:21.783
> 
> 标签：ios, user-interface, hud

我见过一些看起来很酷的“窗口”/“警报”/不管它们叫什么。我希望我知道。以下是其中的一些示例：

![在此处输入图像描述](../Images/8ab9d0a81cb3bcf6811ecc7eba854e1a.png) ![在此处输入图像描述](../Images/742d676fb5e73ad964fe292fa41decd0.png)

这些不应该是 Apple 独有的，因为我已经看到 3rd 方应用程序使用它们！我想知道这些窗户是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T11:04:44.083

`UIActivityIndicator`您可以在此链接中找到它的自定义

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

`MBProgressHUD`是一个 iOS 插件类，它在后台线程中完成工作时显示带有指示器和/或标签的半透明 HUD。HUD 旨在替代未记录的私有 UIKit UIProgressHUD 并具有一些附加功能.......
**有关更多信息，请转到上面的链接**

谢谢 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T11:04:55.063

这些不是苹果特定的控件。您可以创建它们。第一张图片中显示的弹出窗口非常容易制作。您必须使用 3 个控件来制作它。

1.  带有图像的背景 UIImageView。
2.  `UIActivityIndicatory`
3.  `UILabel`与您想要显示的任何消息。

您只需要加载它`UIImageView`并为它设置动画`UIActivityIndicatory`即可弹出此窗口。我已经在很多应用程序中使用了这些弹出窗口，Apple 并不反对这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T11:06:18.557

您的第一个视图是 UIProgressHUD。原装 Apple HUD 是私有 API，不建议使用。 [http://cocoadev.com/wiki/UIProgressHUD](http://cocoadev.com/wiki/UIProgressHUD)

然而，已经出现了许多模拟原始 HUD 的实现。一方面，请看这里： [https](https://github.com/y0n3l/LGViewHUD) ://github.com/y0n3l/LGViewHUD ，尽管我确信 Google 会为您提供一打类似的实现。

# c# - 如何随机化在 C# 中执行某些操作的方式？

> ID：14413648
> 
> 赞同：-2
> 
> 时间：2013-01-19T11:01:07.520
> 
> 标签：c#, audio, random

如果我在单独的课程中有某些说明，我将如何随机提出它们？

例如，如果一个类播放一个音频文件，而另一个类添加两个数字，我希望能够随机化以显示对应于每个类的随机数或标签。

在 C# 中执行上述操作需要使用什么语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:28:04.973

我会使用一个列表，其中 ISomeAudioPlayer 定义了一个`Play`方法。使用`Random`该类生成一个介于 0 和不同可能性数之间的数字，然后在列表中该索引处的对象上调用您的 Play 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:14:50.133

将您的操作放入数组或类似结构中。如果你想要一个随机动作，从数组中选择一个随机元素。如果您希望所有操作都执行一次，则打乱数组并按顺序处理打乱的数组。

# three.js - 在three.js中反转网格

> ID：14413650
> 
> 赞同：0
> 
> 时间：2013-01-19T11:01:08.013
> 
> 标签：three.js

如何使用 three.js 反转网格

我有一个使用 THREE.Mesh 创建的网格

```
var geometry = new THREE.ExtrudeGeometry( featurePts,extrudeSettings);
var mat = new THREE.MeshBasicMaterial( { color: color, wireframe: true, transparent: true } );
var mesh = new THREE.Mesh(geometry,  mat ); 
```

但我的形状看起来倒了。Three.js 中有什么方法可以反转我的形状吗？

`shape`上面使用的是一个列表`THREE.Vector2`

```
var featurePts = [];
featurePts.push(new THREE.Vector2 (550,107)); 
```

![预计不是 3d 形式](../Images/72d953b1ddb748e0abbb568d75620b9e.png)

![Three.js 的当前输出](../Images/bc95904b648359b2b768ac6bdf7fd0e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:33:33.883

如果您的意思是它看起来是由内而外的，请尝试反转您的法线。

# php - 文本输入和 $_FILES 变量没有回显

> ID：14413654
> 
> 赞同：0
> 
> 时间：2013-01-19T11:01:21.857
> 
> 标签：php, javascript

我想知道在下面的代码中显示文本输入的正确方法是什么，因为没有输出任何内容：

```
<script language="javascript" type="text/javascript">
  window.top.stopVideoUpload(
    <?php echo $result; ?>,
    '<?php echo "<input name='vidid' type='text' value='$id'/> " . $_FILES['fileVideo']['name'] ?>'
  );
</script> 
```

另一个失败的尝试：

```
<script language="javascript" type="text/javascript">
  return window.top.stopVideoUpload(
    <?php echo $result; ?>,
    '<?php echo "<input name='vidid' type='text' value='".$id."'/>" . $_FILES['fileVideo']['name']; ?>'
  );
</script> 
```

**更新：**

```
<script language="javascript" type="text/javascript">
  window.top.stopVideoUpload(
    <?php echo $result; ?>,
    '<?php echo "<input name='vidid' type='text' value='".$id."'/>" . $_FILES['fileVideo']['name']; ?>'
  );
</script> 
```

我收到的错误是：`syntaxError: missing ) after argument list.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:27:24.760

```
<script language="javascript" type="text/javascript">return window.top.stopVideoUpload(<?php echo $result; ?>, <?php echo "<input name='vidid' type='text' value='$id'/> " . $_FILES['fileVideo']['name']; ?>');</script> 
```

# twitter-bootstrap - 在引导轮播上放置标注

> ID：14413658
> 
> 赞同：2
> 
> 时间：2013-01-19T11:01:44.480
> 
> 标签：twitter-bootstrap, carousel, callouts

我想要这个网站[http://demo.grandpixels.com/](http://demo.grandpixels.com/)上的效果，其中 div .callout 在轮播上分层。

我正在尝试在引导程序中执行此操作。但我的 div 总是在旋转木马下。我尝试设置标注的 z-index 但这似乎不起作用。

```
.callouts {
    display: block;
margin-top: -150px;
z-index: 999999999999999;
} 
```

[您可以在http://jsfiddle.net/5ejse/](http://jsfiddle.net/5ejse/)查看基础知识

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T16:57:48.190

你们都拥有它。您唯一缺少的是，要使 z-index 起作用，它必须应用于位置已明确设置为绝对、固定或相对的 div。

看看这个：http: [//jsfiddle.net/panchroma/eyccd/](http://jsfiddle.net/panchroma/eyccd/)

代码和你开始的完全一样，我只是调整了这个 CSS：

```
.callouts {
position:relative;  /* <======= added this */
display:block;
margin-top: -150px;
z-index: 999999999999999;
} 
```

希望这可以帮助！

# python - 音乐播放；但是屏幕是空白的

> ID：14413661
> 
> 赞同：0
> 
> 时间：2013-01-19T11:02:18.620
> 
> 标签：python, pygame

我是一名新程序员，正在为我的计算机科学总结开发记忆游戏。我基本上完成了，但我真的想让游戏在用户玩的时候播放音乐。我终于可以播放音乐了，但不幸的是现在屏幕只是空白，我不知道为什么。

任何帮助，将不胜感激。谢谢：）

```
import pygame , sys
import random
import time
size=[500,500]
pygame.init()
screen=pygame.display.set_mode(size)

               # MUSIC
pygame.mixer.init(frequency=22050, size=-16, channels=2, buffer=4096)
print "Mixer settings", pygame.mixer.get_init()
print "Mixer channels", pygame.mixer.get_num_channels()
pygame.mixer.music.set_volume(1.0)
pygame.mixer.music.load("Wings.wav")
pygame.mixer.music.play()

clock = pygame.time.Clock()
while pygame.mixer.music.get_busy():
   # check if playback has finished
   clock.tick(30)

# Colours
LIME = (0,255,0) 
RED = (255, 0, 0)
BLACK = (0,0,0)
PINK = (255,102,178)
SALMON = (255,192,203)
WHITE = (255,255,255)
LIGHT_PINK = (255, 181, 197)
SKY_BLUE = (176, 226, 255)
PURPLE = (104, 34, 139)
screen.fill(BLACK)

# Width and Height of game box
width=50
height=50

# Margin between each cell
margin = 5

#Loop until the user clicks the close button.
done=False

# Used to manage how fast the screen updates
clock=pygame.time.Clock()

                   # INSTRUCTIONS!!!!!!!!!
# This is a font we use to draw text on the screen (size 36)
font = pygame.font.Font(None, 36)

display_instructions = True
instruction_page = 1

# -------- Instruction Page Loop -----------
while done==False and display_instructions:
    for event in pygame.event.get(): # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop
        if event.type == pygame.MOUSEBUTTONDOWN:
            instruction_page += 1
            if instruction_page == 3:
                display_instructions = False

    # Set the screen background
    screen.fill(BLACK)

   if instruction_page == 1:
        # Draw instructions, page 1
        # This could also load an image created in another program.
        # That could be both easier and more flexible.

        text=font.render("Welcome to Spatial Recall: ", True, PURPLE)
        screen.blit(text, [10, 10])
        text=font.render("The game that tests your memory!!!", True, WHITE)
        screen.blit(text, [10, 40])

        text=font.render("Click for instructions", True, RED)
        screen.blit(text, [110, 100])

 if instruction_page == 2:
    # Draw instructions, page 2
    text=font.render("This is how the game goes: The", True, WHITE)
    screen.blit(text, [10, 10])

    text=font.render("computer is going to flash some green", True, WHITE)
    screen.blit(text, [10, 40])    

    text=font.render("boxes at random positions. It's", True, WHITE)
    screen.blit(text, [10, 70])       

    text=font.render("up to you to decide where you", True, WHITE)
    screen.blit(text, [10, 100]) 

    text=font.render("think they are hidden.", True, WHITE)
    screen.blit(text, [10, 130])  

    text=font.render("Good Luck!!.", True, PURPLE)
    screen.blit(text, [20, 160])          

    text=font.render("Play game", True, RED)
    screen.blit(text, [320, 310])
# Limit to 20 frames per second
clock.tick(20)

# Go ahead and update the screen with what we've drawn.
pygame.display.flip()

width=50
height=50

# Margin between each cell
margin = 5

coord=[]

# Create a 2 dimensional array. A two dimesional
# array is simply a list of lists.
grid=[]
for row in range(20):
    # Add an empty array that will hold each cell
    # in this row
    grid.append([])
    for column in range(20):
        grid[row].append(0) # Append a cell

# Set row 1, cell 5 to one. (Remember rows and
# column numbers start at zero.)
grid[1][5] = 0 

# Set title of screen
pygame.display.set_caption("Spatial Recall")

#Loop until the user clicks the close button.
done=False

# Used to manage how fast the screen updates
clock=pygame.time.Clock()

#draw the grid all pink
for row in range(20):
    for column in range(20):
        color = LIGHT_PINK
        pygame.draw.rect(screen,color,[(margin+width)*column + margin,           
(margin+height)*row+margin,width,height])
        pygame.display.flip()    
    '''
        #create list of random coodinates
    x = random.randint(0, 10)
    y = random.randint(0, 10) '''       

    #cover pink squares with green squares at the list of coodinates
    #loop through the list, for every coordinate in list, turn green

for i in range(random.randint(2,10)):
    x = random.randint(2, 10)
    y = random.randint(2, 10)                
    color = LIME    
    pygame.draw.rect(screen,color,[(margin+width)*y + margin,    
(margin+height)*x+margin,width,height])
    coord.append((x,y))    
    pygame.display.flip() 
    time.sleep(2)

   for row in range(20):
    for column in range(20):
        color = LIGHT_PINK
        pygame.draw.rect(screen,color,[(margin+width)*column + margin,   
(margin+height)*row+margin,width,height])
        pygame.display.flip() 

clock.tick(100)  

            # -------- Main Program Loop -----------
while done==False:    
    for event in pygame.event.get(): # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop
        elif event.type == pygame.MOUSEBUTTONDOWN:
            # User clicks the mouse. Get the position
            pos = pygame.mouse.get_pos()
            # Change the x/y screen coordinates to grid coordinates
            column=pos[0] // (width+margin)
            row=pos[1] // (height+margin)
            print coord
            print [row,column]
            if (row,column) in coord:
                color = LIME
                pygame.draw.rect(screen,color,[(margin+width)*column + margin,   
(margin+height)*row+margin,width,height])
            else:
                color = RED
                pygame.draw.rect(screen,color,[(margin+width)*column + margin,
 ( margin+height)*row+margin,width,height])
        pygame.display.flip()              

    #x = random.randint(0, 10)
    #y = random.randint(0, 10) 

pygame.quit () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:38:33.103

```
while pygame.mixer.music.get_busy():
   # check if playback has finished
   clock.tick(30) 
```

在这里，您有一个 while 循环，该循环在歌曲播放完毕后结束。您使用该 while 循环的目的是什么？

如果您删除整个循环，它应该可以正常工作。

一个小技巧：使用函数来封装和删除重复的代码。

示例：而不是使用

```
text=font.render("This is how the game goes: The", True, WHITE)
screen.blit(text, [10, 10]) 
```

创建一个函数

```
def writeText(screen,text,pos):
    text=font.render(text,True,WHITE)
    screen.blit(text,pos) 
```

那么你可以使用`writeText("This is how the game goes:",(10,10))`

# .net - 我真的需要将插件加载到单独的 AppDomain 中（根据我的要求）吗？

> ID：14413663
> 
> 赞同：1
> 
> 时间：2013-01-19T11:02:25.290
> 
> 标签：.net, plugins, appdomain

首先让我说，对于我的场景，插件将在应用程序启动时加载，并且在应用程序关闭之前不会被卸载，所以如果我在加载后无法卸载它们是完全可以的。

所以我知道如果插件崩溃，将插件加载到他们自己的 AppDomain 将保护我的应用程序，但假设插件不运行非托管代码，那么我不能只在 try/catch 块中包装对插件的调用以避免我的应用程序崩溃？或者我在这里错过了什么？

我试图使用 MAF 来执行此操作，但是我在远程处理我的对象时遇到了问题。也就是说，在这个时间点上，我所拥有的使它们可远程化的可用选项似乎都不是非常可取的。因此，在我切换到更原始的插件架构之前，谁能告诉我是否忘记了我应该将插件加载到单独的 AppDomain 的任何其他重要原因（或者我是否错误地能够简单地避免崩溃在调用周围使用 try/catch 块）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:07:10.850

如果您不需要卸载它们，则不需要单独的 AppDomain。

AppDomains 不保护进程在未处理的异常情况下被杀死。`new Thread(() => { throw null; }).Start()`仍然是致命的。

所以你需要`try-catch`围绕插件入口点，你需要他们合作（没有线程崩溃）。

但是，如果您想中止某些计算，AppDomains 很有用。`Thread.Abort`如果您之后立即卸载整个 AppDomain，它们是一种相对安全的调用方式。

# javascript - Curtain.js 替代品

> ID：14413664
> 
> 赞同：7
> 
> 时间：2013-01-19T11:02:36.460
> 
> 标签：javascript, scroll

任何人都知道[Curtain.js](https://github.com/victa/curtain.js)的替代品，因为它不再维护？

# java - java类重载配置依赖的设计

> ID：14413667
> 
> 赞同：2
> 
> 时间：2013-01-19T11:03:02.120
> 
> 标签：java, oop, design-patterns, configuration

假设这是我从 DB/XML 读取的配置数据对象：

```
class ConfigurationClass{

     //some configurations
     public String getString(){

     }
} 
```

现在这是使用此配置对象的类

```
class ConfigurationUser implements Reloadable{

     private ConfigurationClass configuration;

     //some extra logic required for making object ready to use
     public void init(){
         // some new object is created based on configuration
         SomeObject obj = new SomeObject(configuration.getString());

         //register to configuration manager 
     }

     @Override
     public void reload(){
        //does whole reloading stuff
        //creates a new instance of configuration class and reads new configuration which is not appropriate
     }
} 
```

现在，当我必须重新加载配置时，假设我创建了一个新实例`ConfigurationClass`并将其注入到`ConfigurationUser`类中。但我还必须重新初始化对象，以便它可以创建新的配置相关对象。

这是一个合适的设计还是有更好的方法？我曾考虑使用 Spring 或 Google Juice 进行 DI，但我必须再次向配置用户类提供**回调**，该配置已重新加载。

我是使用 IoC 容器的新手，所以不知道是否可能。**需要在实时服务器应用程序中使用它，因此必须严格控制垃圾产生和性能。**

当前解决方案：

```
public interface Reloadable{

    public void reload(); 
} 
```

我有一个配置管理器，我向其中注册了所有配置用户实例，当重新加载完成时，管理器只需调用`reload`它并读取新配置并重新初始化所有依赖对象。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:04:05.973

我认为您正在寻找[Observer/Listener 设计模式](http://en.wikipedia.org/wiki/Observer_pattern)。您的配置用户应该是“观察者”，而配置本身将是“主题”。首先，观察者将自己注册到一个主题中。接下来，每次更改主题时，它都会通知所有观察者，并且他们会重新加载（或做任何他们想做的事情）。

# iphone - 从支持方向切换回不支持的方向视图时的iOS6自动旋转

> ID：14413669
> 
> 赞同：4
> 
> 时间：2013-01-19T11:03:39.423
> 
> 标签：iphone, ios6

由于每个 iOS 开发人员现在都在为随着启动而改变的 autorotationg 功能而苦苦挣扎`iOS6`，我担心我有一个问题：

由于我的应用程序支持`UIInterfaceOrientationMaskPortrait`但对于少数视图控制器我想支持所有 `UIInterfaceOrientationMaskPortraitAll`我实现它如下：

**在我的 rootviewcontrller 中，在我的情况下是导航控制器：**

```
- (BOOL)shouldAutorotate
{
    return self.topViewController.shouldAutorotate; //you are asking your current controller what it should do
} 
```

**在我的视图控制器中：**

```
-(BOOL)shouldAutorotate
{
    return //if view supports auto orientation then return yes else no
} 
```

一切正常，但有一个问题是......假设我的第二个视图支持所有方向，而第一个视图只支持纵向，那么如果我旋转 2 个视图并返回，如果我当前的视图方向（view2）是横向，那么 view1 也不会旋转到其支持的方向。

那么如何克服这个问题，如果有的话，欢迎使用解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T11:28:47.133

尝试在`viewDidLoad`方法中重置您的视图方向。在我的情况下解决了它。

# java - Glassfish：如何按时编译 JSP？

> ID：14413673
> 
> 赞同：0
> 
> 时间：2013-01-19T11:04:08.667
> 
> 标签：java, glassfish, weblogic

我通常使用 Oracle WebLogic 作为 Java 应用服务器。它有一个有趣的特性：当使用 Eclipse 启动时，它会在运行时编译 JSP，所以每次我更改 JSP 中的某些内容时，我都不需要重新部署。在 Glassfish 中，每次进行更改时都需要重新部署。有没有办法为 Glassfish 指定这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T23:21:27.180

*   在您与 .WAR 一起打包的 glassfish-web.xml 中，您应该`<property name="development" value="true"/>`设置了`<jsp-config>`标签。更多信息，请访问[http://docs.oracle.com/cd/E18930_01/html/821-2417/beatx.html](http://docs.oracle.com/cd/E18930_01/html/821-2417/beatx.html)
*   更改 JSP 时，请确保在正确的位置更改它们。Glassfish 拥有应用程序的两份副本——一份作为域目录的一部分，另一份作为实例目录的一部分。您将需要修改作为实例目录一部分的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:16:45.360

在 GlassFish 3 中有一个选项`development`，如果设置为`true`允许检查 JSP 文件是否修改。检查您的`web.xml`或`default-web.xml`。

# grails - 调用状态变化的方法在圣杯中

> ID：14413675
> 
> 赞同：-3
> 
> 时间：2013-01-19T11:04:22.737
> 
> 标签：grails, groovy

如何在 grails 中调用标记中的方法 onchange。onchange 显示产品信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:15:34.937

您可以使用 javascript 框架对服务器进行 ajax 调用，或使用 formRemote（Grails 功能）[http://grails.org/doc/2.1.0/ref/Tags/formRemote.html](http://grails.org/doc/2.1.0/ref/Tags/formRemote.html)

# python - 在列表中搜索项目并在 python 中返回 x 个周围项目

> ID：14413684
> 
> 赞同：3
> 
> 时间：2013-01-19T11:05:07.200
> 
> 标签：python, list, indexing, slice

我想在列表中搜索值 (x) 的出现并返回该值和索引中高于和低于 x 的值的一个数字，比如 2。值 x 可能会多次出现在列表中。

**输入**

```
in = ['a','b','c','d','x','e','f','g','h','i','x','j','k','l'] 
```

**输出**

```
out = ['c','d','x','e','f','h','i','x','j','k'] 
```

感谢您的任何帮助或建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:11:02.357

```
In [8]: lis = ['a','b','c','d','x','e','f','g','h','i','x','j','k','l']

#create a new list containing all the index positions of 'x'

In [9]: ind=[i for i,x in enumerate(lis) if x=='x']

In [10]: out=[]

# loop over ind list, and for every index i:
# here lis[i-2:i] are the elements left to the 'x' and similarly lis[i:i+3]
# are the ones to its right.
# which is  simply  lis[i-2:i+3] as suggested by @volatility

In [11]: for i in ind:
    out.extend(lis[i-2:i+3])

   ....:     

In [12]: out
Out[12]: ['c', 'd', 'x', 'e', 'f', 'h', 'i', 'x', 'j', 'k'] 
```

单线使用`itertools.chain()`：

```
In [19]: from itertools import *

In [20]: list(chain(*[lis[i-2:i+3] for i in ind]))
Out[20]: ['c', 'd', 'x', 'e', 'f', 'h', 'i', 'x', 'j', 'k'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:11:25.150

使用的替代解决方案[`difflib.SequenceMatcher`](http://docs.python.org/2/library/difflib.html#sequencematcher-objects)

```
>>> from itertools import chain
>>> from difflib import SequenceMatcher
>>> in_data = ['a','b','c','d','x','e','f','g','h','i','x','j','k','l']
>>> sm = SequenceMatcher(None, in_data, 'x'*len(in_data)).get_matching_blocks()
>>> list(chain(*(in_data[m.a -2 : m.a + 3] for m in sm[:-1])))
['c', 'd', 'x', 'e', 'f', 'h', 'i', 'x', 'j', 'k'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T11:19:40.530

```
l = ['a','b','c','d','x','e','f','g','h','i','x','j','k','l']

def search_w(mylist,item,before=1,after=1):
    newl=[]
    l = mylist[:]
    while item in l:
        i = l.index(item)
        newl+= l[i-before:i+after+1]
        l = l[i+after:]
    return newl

>>> print search_w(l,'x',2,2)

['c', 'd', 'x', 'e', 'f', 'h', 'i', 'x', 'j', 'k'] 
```

# android - 切换到另一个框架时如何关闭上下文菜单？

> ID：14413686
> 
> 赞同：0
> 
> 时间：2013-01-19T11:05:15.197
> 
> 标签：android, contextmenu, android-listfragment

我有一个包含两个片段的应用程序，每个片段都有一个列表视图。从列表中选择元素时，上下文菜单会自动出现，我处理事件等等......到目前为止一切都很好，但我的问题是当我更改为另一个片段时，上下文菜单保持可见，因此用户可能会感到困惑认为它是当前可见列表视图中的上下文菜单。

我试过打电话

```
getActivity().closeContextMenu(); 
```

在片段之间切换但它不起作用。

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:32:37.153

我找到了一个解决方案：

我正在使用 ListView.CHOICE_MODE_MULTIPLE_MODAL 进行多项选择，在 MultiChoiceModeListener 我保存操作模式以供以后使用：

```
public void onItemCheckedStateChanged(ActionMode mode, int position, long id, boolean checked) {
   // item selected
   Log.d("FilesFragment.ContextMenu", "onItemCheckedStateChanged(); position: " + position);
   actionmode = mode; // <- I save the action mode for later use
   listadapter.getItem(position).setSelected(checked);
} 
```

然后，当我检测到用户想要更改为另一个标签框时，我调用

```
if (actionmode!=null){
  actionmode.finish();
} 
```

# c++ - 如何检查线段是否与任何线相交？

> ID：14413689
> 
> 赞同：1
> 
> 时间：2013-01-19T11:05:19.343
> 
> 标签：c++, algorithm, search, stl, intersection

我有一条`std::list`线。每行是 2 个`CPoint`对象的列表，标记一行的起点和终点

```
std::list<std::list<CPoint>> edges; 
```

然后我有另一行（2 个 CPoints 的列表），我想测试它是否与主列表的任何行相交。我怎样才能做到这一点？可能是循环内的交叉测试以进行迭代。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:42:52.300

正如您所建议的，一种基本方法是遍历所有线，然后应用[线相交](https://stackoverflow.com/q/563198/469210)算法。渐近地，这可能是最好的；毕竟你的新线很可能与所有其他线相交。

在许多线相交算法中，我们首先应用边界框测试。非常粗略，确保包含被比较的两条线的矩形重叠。如果它们不重叠，则线不能相交，尽管如果它们进行更全面的测试，则需要应用。

边界框测试是看两个框的 x 间隔是否重叠，两个框的 y 间隔是否重叠。有专门为有效的区间交叉点检查而设计的数据结构。查看有关[区间树](http://en.wikipedia.org/wiki/Interval_tree)的信息。在许多情况下，这样的结构意味着您将在更少的行上执行边界框测试；在需要应用测试之前丢弃一些行（通过它们的间隔）的数据结构。

# javascript - 我的 javascript 代码中的抖动效果

> ID：14413691
> 
> 赞同：0
> 
> 时间：2013-01-19T11:05:33.037
> 
> 标签：javascript, jquery-ui

我只是想在我的 JavaScript 代码中使用 jQuery 的一个函数来进行样式设置。我希望每当所需的文本字段为空时，文本字段应该抖动，但我做不到。请帮帮我，我只是浪费了我整个晚上的时间。最后寻求您的帮助。我希望你们能得到我的问题。

代码如下

```
function validate() {
  var em = document.getElementById("email_value").value;
  var pass = document.getElementById("password_value").value;

  if(em == "") {
    shakeIt();
  }                   
}

$(document).ready(function() {
  function shakeIt() {
    $("input").effect("shake", { times:5}, 50);
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:12:57.120

```
function validate()
{
    var em = document.getElementById("email_value").value;
    var pass = document.getElementById("password_value").value;

    if(em == "")
    {
        shakeIt();
    }
}

function shakeIt()
{
    $("input").effect("shake",
    {
        times: 5
    }, 50);
} 
```

不要将它包装在 $(document).ready() 函数中，因为如果你这样做，你的 shakeIt 函数不再在全局范围内。

# java - 在 doinbackground 获取传递给 asynctask 的 arraylist 值

> ID：14413698
> 
> 赞同：2
> 
> 时间：2013-01-19T11:07:02.330
> 
> 标签：java, android, arrays, android-asynctask

我有一个 Asynctask 设置我像这样传递一个 Arraystring

```
ArrayList<String> creds = new ArrayList<String>();
creds.add(string1);
creds.add(string2);
new myasynctask().execute(creds); 
```

**asynctask 方法** 类 myasynctask 扩展 AsyncTask<ArrayList, Integer , String>

**做背景**

```
protected String doInBackground(ArrayList<String>... creds) 

            {       String lol1= creds[0].toString();
                    String lol2= creds[1].toString();
........rest of the code

} 
```

我从键异常中获得了一个数组索引，如何将两个值传递给 doinbackground 方法并同时获取它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T11:08:38.600

您可以通过此代码获得价值

```
class test extends AsyncTask<ArrayList<String>, Void, Void>
{

@Override
protected Void doInBackground(ArrayList<String>... creds) {
    // TODO Auto-generated method stub
    String str1 = creds[0].get(0);
    String str2 = creds[0].get(1);

    return null;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:10:54.683

要获取 arraylist 值，

```
 ArrayList<String> recList= new ArrayList<String>();
        ArrayList<String> arrayListVal= creds[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:11:54.540

`doInBackground`在AsyncTask的方法中获取 arraylist ：

```
private class myAsyncTask extends AsyncTask<ArrayList<String>, Void, String> {

      @Override
      protected String doInBackground(ArrayList<String>... params) {

       ArrayList<String>  lol1= params[0]; //<< here retrieve Array from  varargs
      return null;
      }      
         // your code here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T11:23:13.983

试试下面的链接

[将参数传递给 AsyncTask，并返回结果](https://stackoverflow.com/questions/4195609/passing-arguments-to-asynctask-and-returning-results)

```
protected ArrayList<String> doInBackground(ArrayList<String>... passing) {
        ArrayList<String> result = new ArrayList<String>();
        ArrayList<String> passed = passing[0]; //get passed arraylist

        //Some calculations...

        return result; //return result 
```

# c++ - 使用 boost::thread 将 const 指针参数传递给函数

> ID：14413700
> 
> 赞同：0
> 
> 时间：2013-01-19T11:07:19.227
> 
> 标签：c++, multithreading, pointers, boost, parameters

我有一个功能如下

```
 void test(const int * x, int d){
     for(int i=0; i<d ; i++)
         cout<< x[i] << endl;
 } 
```

当我尝试使用 boost::thread 运行它时

```
int n=10;
int * x1=new int[n];
boost::thread *new_thread = new boost::thread(& test,x1,n); 
```

我收到以下编译错误

```
error: no matching function for call to ‘boost::thread::thread(<unresolved overloaded function type>, int*&, uint16_t&)’
/usr/include/boost/thread/detail/thread.hpp:216: note: candidates are: boost::thread::thread(boost::detail::thread_move_t<boost::thread>)
/usr/include/boost/thread/detail/thread.hpp:155: note:                 boost::thread::thread()
/usr/include/boost/thread/detail/thread.hpp:123: note:                 boost::thread::thread(boost::detail::thread_data_ptr)
/usr/include/boost/thread/detail/thread.hpp:114: note:                 boost::thread::thread(boost::thread&)
main.cpp:397: warning: unused variable ‘new_thread’ 
```

确实，我是新手来提升。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:37:23.313

看起来你的`test`函数重载了：

```
//here
void test(const int * x, int d){
     for(int i=0; i<d ; i++)
         cout<< x[i] << endl;
 }

//somewhere
void test()
{
     std::cout <<"hahahahaha\n";
} 
```

现在，当您指定`test`名称时

```
boost::thread *new_thread = new boost::thread(& test,x1,n); 
```

编译器无法知道您是想使用一个`test`函数还是另一个。

*   您应该指定要使用的重载：

    ```
    boost::thread *new_thread = new boost::thread((void(*)(const int*, int)) test,x1,n); 
    ```

*   或重命名您的`test`功能

# c# - 给定一个输入 XML 文件，画出它的树形结构

> ID：14413701
> 
> 赞同：1
> 
> 时间：2013-01-19T11:07:20.320
> 
> 标签：c#, .net, linq-to-xml

我的任务是从 XML 文件中绘制一个 xml 树。我设法使用 openDialog 组件打开了一个 xml 文件，现在我有一个 saveDialog 组件，它可以选择要写入的文件。现在我必须想出一个算法：

```
 <Videos>
     <Video> 
        <Title>The Distinguished Gentleman</Title>
        <Director>Jonathan Lynn</Director>
        <Actors>
           <Actor>Eddie Murphy</Actor>
           <Actor>Lane Smith</Actor>
           <Actor>Sheryl Lee Ralph</Actor>
           <Actor>Joe Don Baker</Actor>
        </Actors>
        <Length>112 Minutes</Length>
        <Format>DVD</Format>
        <Rating>R</Rating>
    </Video>
      <Video>
        <Title>Her Alibi</Title>
        <Director>Bruce Beresford</Director>
        <Length>94 Mins</Length>
        <Format>DVD</Format>
        <Rating>PG-13</Rating>
      </Video>
    </Videos> 
```

所以那将是：

```
 <Videos>
    ---<Video>
    -------<Title>
    -------<Director>
    -------<Actors>
    --------------<Actor>
    -------<Length>
    -------<Format>
    -------<Rating> 
```

我假设这将在 foreach 语句中：

```
 XDocument xdoc = XDocument.Load(pathToXML);
    foreach (var element in XML.Descendants)
    {
       //code here ??

    }   ?? 
```

对我知道那个。但是我有问题如何只选择一个子节点（没有方法）。我有类似的东西，但它仍然列出了所有元素，不仅是结构：

```
 public string GetOutline(int indentLevel, XElement element)
    {
        StringBuilder result = new StringBuilder();

        result = result.AppendLine(new string('-', indentLevel * 2) + element.Name);

        foreach (var childElement in element.Elements())

        {
            result.Append(GetOutline(indentLevel + 3, childElement));
        }

        return result.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T02:03:02.630

Recursively visit XElement nodes in the tree. For each element write the element name. Each time you visit the child node increase the indent so that you know how many '-' characters you want to write.

# matlab - 如何在 Matlab 中创建 MSERRegions 类的数组

> ID：14413702
> 
> 赞同：1
> 
> 时间：2013-01-19T11:08:04.373
> 
> 标签：matlab, image-processing, matlab-cvst, mser

我想创建 MSERRegions 类的数组。基本上我有一个由函数 detectMSERFeatures 返回的相同类型的数组。请参阅下面的代码片段

* * *

region = detectMSERFeatures(gray_input)
%gray_input 是任何灰度形式
的图像 (i =2:length(regions))
       if(length(regions(i).PixelList)>100)
           % 这里我想复制所有这样的区域名称为 region_new
           j=j+1 的新对象数组；
       结束
结束

* * *

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T18:02:02.513

您不能拥有一组 MSERRegions 对象。您应该改用元胞数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-28T12:02:15.450

您可以像这样在 MatLab 中声明一个 MSER 数组：

```
 regions = MSERRegions(); 
```

并将它们添加到数组中，如下所示：

```
 regions(1,1) = mserRegions(i,1); 
```

所以：

```
regions_new = MSERRegions();
j = 1;
for (i = 1:length(regions))
   if(length(regions(i).PixelList)>100)
       regions_new(j,1) = regions(i,1)
       j = j + 1;
   end 
end 
```

# c++ - 为什么在 FreeBSD 9 上捕获 std::bad_cast 不起作用？

> ID：14413703
> 
> 赞同：11
> 
> 时间：2013-01-19T11:08:10.600
> 
> 标签：c++, freebsd

考虑这段代码（badcast.cpp）：

```
#include <exception>
#include <typeinfo>
#include <stdio.h>

class foo {
public:
    virtual ~foo() {}
};

class bar: public foo {
public:
    int val;
    bar(): val(123) {}
};

static void
cast_test(const foo &f) {
    try {
        const bar &b = dynamic_cast<const bar &>(f);
        printf("%d\n", b.val);
    } catch (const std::bad_cast &) {
        printf("bad cast\n");
    }
}

int main() {
    foo f;
    cast_test(f);
    return 0;
} 
```

FreeBSD 9.1：

```
$ g++ badcast.cpp -o badcast -Wall && ./badcast
terminate called after throwing an instance of 'std::bad_cast'
  what():  std::bad_cast
Abort trap (core dumped)

$ g++ badcast.cpp -o badcast -frtti -fexceptions -Wall && ./badcast
terminate called after throwing an instance of 'std::bad_cast'
  what():  std::bad_cast
Abort trap (core dumped)

$ gcc -v
Using built-in specs.
Target: amd64-undermydesk-freebsd
Configured with: FreeBSD/amd64 system compiler
Thread model: posix
gcc version 4.2.1 20070831 patched [FreeBSD]

$ uname -a
FreeBSD freebsd9 9.1-RELEASE FreeBSD 9.1-RELEASE #0 r243825: Tue Dec  4 09:23:10 UTC 2012     root@farrell.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  amd64 
```

Debian Linux 6：

```
$ g++ badcast.cpp -o badcast -Wall && ./badcast
bad cast 
```

操作系统 X 10.8：

```
$ g++ badcast.cpp -o badcast -Wall && ./badcast
bad cast 
```

为什么在 FreeBSD 上捕获 bad_cast 不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:59:34.983

作为一个疯狂的猜测，在 FreeBSD 中你可能会使用 LLVM 的 new [`libc++`](http://libcxx.llvm.org)，而不是旧的 GNU [`libstdc++`](http://gcc.gnu.org/libstdc++/)。FreeBSD 一直[致力于](https://wiki.freebsd.org/NewC++Stack)从 GNU GPL 许可软件切换到[LLVM 工具链。](https://wiki.freebsd.org/BSDToolchain)

`libc++`Apple 也在朝着这个方向发展，过去我遇到过使用 Mac 开发的问题`libstdc++`（尤其是使用 Boost）。

您可以使用`ldd`来确认您链接的库：

```
ldd ./badcast 
```

如果它正在链接`libc++`，您可能希望将错误和测试用例归档到[LLVM 项目](http://llvm.org/bugs/)中。

# google-chrome - WebGL：INVALID_OPERATION：uniform1i：位置不适用于当前程序

> ID：14413713
> 
> 赞同：11
> 
> 时间：2013-01-19T11:09:46.980
> 
> 标签：google-chrome, webgl

我正在尝试在我的片段着色器中设置两个纹理，但是如果我尝试使用以下方法设置相应的统一变量，则会收到此错误：

`gl.uniform1i(getUniformLocation(program, "uTextureOne"), 0);`和`gl.uniform1i(getUniformLocation(program, "uTextureTwo"), 1);`。

这是什么意思？（我正在使用 Chrome）

我的着色器看起来像这样：

```
 "#ifdef GL_ES                       \r\n" +
        "precision mediump float;           \r\n" + 
        "#endif                             \r\n" +
        "uniform sampler2D uTextureOne;     \r\n" +
        "uniform sampler2D uTextureTwo;     \r\n" +
        "varying vec3 vOrgNormal;           \r\n" +
        "void main(void) {                  \r\n" + 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-19T16:38:12.357

# php - 在 Wordpress 主题中使用自定义类

> ID：14413722
> 
> 赞同：14
> 
> 时间：2013-01-19T11:11:37.103
> 
> 标签：php, wordpress

我有一个 PHP 类，其中包含我想在主题上选择的任何地方使用的方法。
例如这个类：

```
<?php
class MyClass
{
    const constant = 'constant value';

    function showConstant() {
        echo  self::constant . "\n";
    }
}

$class = new MyClass();
$class->showConstant();

?> 
```

我将如何在我的主题中包含这样的课程？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-19T13:23:39.657

你有几种方法可以解决这个问题；您可以编写一个插件，这可能有点矫枉过正，但您也可以：

**1**
在您的`functions.php`-file 中，只需在其中添加您的功能，然后您就可以在您的主题中调用它们

```
function myClassFunction() {
  class MyClass {
    const constant = 'constant value';

    function showConstant() {
        echo  self::constant . "\n";
    }
  }

  $class = new MyClass();
  $class->showConstant();
} 
```

**2**
在您的主题文件夹中创建一个新目录，例如`/includes`. 把你的课放在那里。然后在您需要类及其功能的主题中的任何位置，只需将其包含在您的模板中：

```
<?php
  require_once('includes/MyClass.php');
  $class = new MyClass();
  $class->showConstant();
?> 
```

这完全取决于它是什么类型的类，它做什么以及你使用它的频率。有很多方法可以做到这一点。

# c# - 实体框架：更新连接表

> ID：14413724
> 
> 赞同：4
> 
> 时间：2013-01-19T11:11:46.710
> 
> 标签：c#, entity-framework, orm, ado.net

我有下表设置：

*   **订单**(ID)
*   **产品**(ID) [其中 ProductID 1 和 2 已经存在]
*   **OrderProduct** (OrderId, ProductID) [两个键 FK'ng 到 Order 和 Product 表]

我正在尝试向**Order**表中添加一条记录，将 2 个产品分配到订单中，如下所示：

```
var order = new Order();
order.Products.Add(new Product {ID=1});
order.Products.Add(new Product {ID=2});

db.SaveChanges(); 
```

**问题是：**保存订单时，两个产品被插入到数据库中，而不是引用已经存在的产品记录。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T11:31:55.027

您应该使用 db 而不是创建新产品，如下例所示：

```
var order = new Order();
order.Products.Add(db.Products.First(p => p.ID = 1));
order.Products.Add(db.Products.First(p => p.ID = 2));

db.SaveChanges(); 
```

或者，您需要在产品创建后“更新参考”。你可以这样做：

```
var product = new Product() { ID = 1 };
db.Attach(product);
order.Products.Add(product); 
```

# android - 在 Android 中使用 ImageViews 而不是按钮

> ID：14413732
> 
> 赞同：1
> 
> 时间：2013-01-19T11:12:18.137
> 
> 标签：android

我正在构建我的第一个 android 应用程序。在我的开始活动中，我想使用一些 ImageViews 而不是按钮，这些 ImageViews 是它们的宽度应该始终与父布局匹配的大图块。我已经绘制了我的 imageViews 以适应普通的移动屏幕（我认为是 4 英寸）我怎样才能让它们适合任何设备？像 7 或 10 英寸的平板电脑？

**编辑：**很遗憾，我使用了 fitCenter 并没有任何区别，那是我的 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="24dp"
    android:layout_marginTop="122dp"
    android:drawableLeft="@drawable/home"
    android:drawablePadding="@dimen/padding_small"
    android:padding="@dimen/padding_small"
    android:text="My Classes"
    android:textSize="@dimen/a12" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_alignRight="@+id/button3"
    android:layout_centerVertical="true"
    android:layout_below="@+id/button3"
    android:layout_marginTop="35dp"                
    android:drawableLeft="@drawable/image"
    android:text="Update Offline Data"
    android:textSize="@dimen/a12" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_alignRight="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="35dp"
    android:drawableLeft="@drawable/configure"
    android:text="Settings"
    android:textSize="@dimen/a12" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="38dp"
    android:scaleType="fitCenter"
    android:src="@android:drawable/bottom_bar" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:17:52.327

为了适合图像，您可以在控件中使用 android:scaleType="fitCenter" 属性，如下所示：

```
<ImageButton
        android:id="@+id/imageViewSecurity"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/security"
        android:background="@null"
        android:scaleType="fitCenter" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:15:07.727

不要给它们一个绝对宽度，而是使用常量`match_parent`as `android:width`，这将始终给它们与父视图相同的宽度。活动的根视图将具有与具有此宽度和/或高度的屏幕相同的大小。

要将 ImageView 中的图像大小调整为正确大小，请使用`fitCenter`as `android:scaletype`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:15:16.437

如果您要做的只是让图像与其容器的宽度匹配（并且其容器与 * 其父级的宽度匹配），那么您应该将图像设置为 View 的背景，而不是它的 src。我相信这会拉伸它以填充整个视图，无论它的大小是多少。

# python - 如何使用python具有相同的列和行标题？

> ID：14413735
> 
> 赞同：1
> 
> 时间：2013-01-19T11:12:53.247
> 
> 标签：python, matrix, semantics

我想从文本文件中读取行并根据单词之间的 Wu-Palmer 距离构建距离矩阵。例如：

```
 House    Grass   Boat   Cat
House       x        y       ..    ..
Grass       x1       y1      ..    ..
Boat        x2       y2      ..    ..
Cat         x3       y3      ..    .. 
```

我想知道我是否可以在 python 中使用任何现有函数从文本文件中读取行并将这些行输出为距离矩阵的行和列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:33:13.043

如果您的输入只是以空格分隔的单词，那么您可以像这样轻松地遍历它们：

```
words = set()
with open("input.txt", "r") as fd:
    for line in fd:
        words.update(line.split()) 
```

使用 a`set`可确保每个单词只记录一次 - 听起来这就是您所追求的。

如果您的输入是英文文本，那么事情会变得有点困难，因为您想要捕捉诸如“I'd”之类的东西 - 您还应该决定是否将连字符的单词（例如“part-time”）归类为单个单词 - 我的例子这里有，但很容易改变。尽管我不是它们的粉丝，但这是正则表达式实际上非常有用的地方：

```
import re
import string

non_word_re = re.compile(r"[^-\w']+")
words = set()
with open("input.txt", "r") as fd:
    for line in fd:
        words.update(i for i in non_word_re.split(line) if i[0] in string.letters) 
```

这将创建一个`set`单词，其中一组字符是由集合中的一个或多个组成的任何内容，`[a-zA-Z0-9_-']`并且第一个字符是字母。

在此之后，您可以轻松计算每对单词之间的距离：

```
all_distances = {}
for word in words:
    all_distances[word] = dict((i, calculate_distance(word, i)) for i in words) 
```

可能有比这里的嵌套字典更干净的数据结构，但它足够简单，我认为这就足够了。

最后，您可以输出一个制表符分隔的矩阵，如下所示：

```
with open("output.txt", "w") as fd:
    fd.write("\t" + "\t".join(sorted(all_distances.keys())) + "\n")
    for word1, distances in sorted(all_distances.iteritems()):
        fd.write(word1 + "\t" + "\t".join(i[1] for i in sorted(distances.iteritems()))) 
```

如果您想要更接近格式良好的输出矩阵（即每列根据其内容自动调整大小），那么这本身仍然*不难*，但它有点繁琐并且需要更多的代码。

顺便说一句，如果您想以 CSV 格式读取或写入文件，请查看 Python [csv](http://docs.python.org/2/library/csv.html)模块，它会为您处理繁琐的事情，例如引用。

那是你所追求的吗？

# entity-framework - 实体框架、SQL Server CE 4.0 和 Code First 的启动性能问题

> ID：14413741
> 
> 赞同：2
> 
> 时间：2013-01-19T11:13:07.480
> 
> 标签：entity-framework, ef-code-first, sql-server-ce, database-performance, ef-power-tools

我在我的应用程序中使用实体框架 (EF) 5.0、代码优先方法和 SQL Server CE 4.0 数据库。但是，我在应用程序启动时面临一个主要的性能问题。

我在网上搜索，发现[这篇](http://msdn.microsoft.com/en-us/data/hh949853)文章解释了哪些操作会影响启动性能，其中一个是视图生成。因此，我研究了如何在编译时生成视图并在运行时将它们链接到 EF，而不是在运行时创建视图。我遇到了 Entity Framework Power Tools，它提供了一个命令来通过你的 DbContext 类生成视图。

[如本文](http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx#10374587)所述，我使用 Entity Framework Power Tools 在编译时生成了视图。但是，当我使用 SQL Server CE 运行我的应用程序时，它总是会生成以下异常：

> *EntityContainer 'DatabaseContext' 的映射和元数​​据信息不再匹配用于创建预生成视图的信息。*

而相同的应用程序可以在 SQL Server 数据库中正常工作。因此，我进行了更多搜索，但没有找到解决此问题的方法。以下是人们报告类似性能问题的链接：

1.  [MSDN 博客](http://blogs.msdn.com/b/adonet/archive/2011/05/18/ef-power-tools-ctp1-released.aspx)
2.  [MSDN 上的实体框架论坛](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/2665d359-188f-4e2c-a13b-4718754616f0)

我的问题是：“这个应用程序启动性能问题是否有解决方法或解决方案？”。我需要使用 SQL Server CE 而不是 SQL Server。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:55:56.537

实际上，EF Power 工具正在使用默认提供程序**SqlClient**生成视图，但是，我需要为**SqlServerCe.4.0**提供程序生成视图，我无法弄清楚为什么每次生成的视图都会过时，最后我弄清楚了它的原因没有工作。

所以，我只是从我的上下文类中注释了 DbContext 构造函数，然后我运行了 EF Power Tools 的“生成视图”和“查看实体数据模型 XML”命令，然后 EF Power Tools 从**App.config**中获取了连接字符串，否则它使用默认连接字符串，该字符串以 SqlClient 作为提供程序连接到 Sql Server。

因此，我相信如果有人使用任何其他提供程序，例如 Devart 的 Oracle 提供程序等，那么他/她需要通过在 App.config（用于桌面应用程序）或 web.config（用于Web 应用程序）并注释掉 DbContext 构造函数（或使用每个处理器将其从 EF Power Tools 中隐藏）。

# android - 不从尺寸特定的分辨率文件夹中读取

> ID：14413748
> 
> 赞同：0
> 
> 时间：2013-01-19T11:13:57.493
> 
> 标签：android

我有一个带有 dimens.xml 文件的 values-xhdpi 文件夹。现在我希望为 Nexus 4 做特定的尺寸，所以我创建了 values-xhdpi-1280x768 文件夹，我可以看到图形布局的变化，但是当我在设备上运行应用程序时，我可以看到它仍然从值读取- xhdpi 文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:11:56.413

弄清楚了！需要使用 values-xhdpi-1184x768 因为按钮栏是 96px。谢谢你！

# java - 如何将字符串拆分为列

> ID：14413750
> 
> 赞同：1
> 
> 时间：2013-01-19T11:14:08.283
> 
> 标签：java

我在单列中有一个字符串列表。我想从这些字符串中创建三列，然后将输出打印到另一个文件。我该怎么做呢？

这是我迄今为止尝试过的：

```
ArrayList<String> list=new ArrayList<String>();
File file = new File("f://file.txt");

try {
    Scanner scanner = new Scanner(file);

    while (scanner.hasNextLine()) {
        String line = scanner.nextLine();
        System.out.println(line);
    }

    scanner.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

我的输入数据：

```
City
Gsk
Relocation
sripallu
here
jrajesh
gurgaon
unitech
StatisticsThreads
WizOty
LTDParsvnathK
Quotesby
newest
PMaashuktr 
```

我的预期输出：

```
City      Gsk      Relocation
sripallu here      jrajesh
gurgaon  unitech   StatisticsThreads
WizOty   LTDParsvnathK  Quotesby
newest   PMaashuktr      Loans
.
.
.
.
.
.
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:46:05.250

您可以在类中构建您的需求，如输出并制作输出列表。

```
public class Output{
   private String str1;
   private String str2;
   private String str3;
   <geter & setter method>
} 
```

...

```
ArrayList<Output> list=new ArrayList<Output>();
int i=-1; Output op =null;
while (scanner.hasNextLine()) {
     String line = scanner.nextLine();i = ++i%3;
     if(i==0){
        op = new Output();
        op.setStr1(line);
     }else if(i==1)
        op.setStr2(line);
     else
        op.setStr3(line);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:42:53.390

我拿了你的代码并做了一些修改：

```
File file = new File("f://file.txt");

try {
    Scanner scanner = new Scanner(file);

    int itemsOnRow = 0;

    while (scanner.hasNextLine()) 
    {
        String line = scanner.nextLine();
        System.out.print (line + " ");

        itemsOnRow++;

        if (itemsOnRow == 3)
        {
            itemsOnRow = 0;
            System.out.println ();
        }
    }

    scanner.close();
}
catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

您实际上应该尝试下一次实施它。如果你失败了但发布了你写的代码，那么这里的人更容易帮助你。

# ruby-on-rails - Rails - 停止使用 Obj.find() 创建新对象的测试环境？

> ID：14413751
> 
> 赞同：1
> 
> 时间：2013-01-19T11:14:28.040
> 
> 标签：ruby-on-rails, ruby

我正在关注敏捷书，但我无法让我的单元测试正常运行。问题是在此期间创建了两个对象`rake test:functionals`而不是一个。我已经确定了原因，但我无法解决问题。

以下是相关代码：

```
class CartsController < ApplicationController
  def create
    @cart = Cart.new(params[:cart])
    session[:cart_id] = @cart.id

    respond_to do |format|
      if @cart.save
        format.html { redirect_to @cart }
        format.json { render json: @cart, status: :created, location: @cart }
      else
        format.html { render action: "new" }
        format.json { render json: @cart.errors, status: :unprocessable_entity }
      end
    end
  endnormal 
```

当它重定向到@cart 时，它会调用 application_controller，其中包含以下代码：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :the_cart

  private

    def the_cart
      @cart = current_cart
    end

    def current_cart
      Cart.find(session[:cart_id])
    rescue ActiveRecord::RecordNotFound
      cart = Cart.create
      session[:cart_id] = cart.id
      cart
    end 
```

normal 在开发环境中，当 session[:cart_id] 已经有购物车时，current_cart 不会再创建另一个购物车。但在测试环境中，只需运行 Cart.find(session[:cart_id]) 就会创建一个新的调用新的购物车项目。我该如何解决这个问题，以便 .find 不会每次都为测试环境创建一个新对象？

**编辑：这是失败的测试**

```
 test "should create cart" do
    Rails::logger.debug "CREATING CART"
    Rails::logger.debug Cart.all.to_a
    assert_difference('Cart.count') do
      post :create, cart: {  }
      Rails::logger.debug Cart.all.to_a
    end

    assert_redirected_to cart_path(assigns(:cart))
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:51:37.780

我没有看到任何会使测试表现不同的东西，但是您的代码对我来说看起来是错误的。对于传入的每个请求，您`before_filter`将加载现有的购物车并创建一个新的（如果不存在）。

运行之前的过滤器后，该操作将运行，它创建一个购物车而不检查是否存在，因此创建了第二个购物车

您的 before_filter 和您的 create 操作都在创建购物车。before 过滤器首先运行并创建一个，然后运行 ​​create 操作并（不检查购物车的存在）创建另一个。

`create`如果在任何时候为您创建了购物车，我不确定您为什么要采取行动。您可以为创建操作跳过该过滤器，或者更改创建操作以使其使用由该过滤器创建的购物车（尽管这会导致创建操作只是一个更新操作，这有点奇怪）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:26:35.940

如果您正在使用请求规范或集成测试，这可能不会创建 2 个购物车，因为在这些类型的测试中正确地遵循了重定向。其他测试，单独测试，我不知道在测试中设置的会话变量。然而，这是在看到测试之前写的。

你在使用固定装置吗？也许购物车已经装好了。尝试添加`pry`到您的 gem 文件中。然后在您的测试中，放置调试语句的地方`binding.pry`，您将进入测试控制台，并执行 a`Cart.count`查看存在多少购物车。

# mysql - 奇怪的日期 MySQL INSERT 语句（vb.net 应用程序但 MYSQL 命令）

> ID：14413753
> 
> 赞同：1
> 
> 时间：2013-01-19T11:14:41.907
> 
> 标签：mysql

我的代码中有一个非常随机的错误，但无法弄清楚。我正在根据当前日期将数据插入 MySQL 数据库并使用以下语句；

```
INSERT INTO table VALUES (NULL,495297,str_to_date('19/01/2013 10:55:25','%d/%m/%y'),'English - UK',1,Str_to_date('17/01/2013','%d/%m/%y'),str_to_date('18/01/2013','%d/%m/%y')) 
```

由于某种原因，没有一个日期可以作为 19/01/2013，它变成 19/01/2020，下一个变成 17/01/2020 和 18/01/2020！后两个日期在数据类型中列为日期，而第一个日期是日期时间，所以我不知道为什么会发生这个奇怪的问题。

任何帮助将不胜感激。

谢谢莫迪丝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:17:46.913

使用大写字母`%Y`作为年份的标识符：

```
INSERT INTO table VALUES (NULL,495297,str_to_date('19/01/2013 10:55:25','%d/%m/%Y'),'English - UK',1,Str_to_date('17/01/2013','%d/%m/%Y'),str_to_date('18/01/2013','%d/%m/%Y')) 
```

小写`%y`指定由两位数给出的年份（请参阅[此处](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)和[此处](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)的 MySQL 文档）。然而，大写字母`%Y`是四位数的版本。

# php - 如何在 centos 6.x 中安装 php-pear-Net-SMTP？

> ID：14413759
> 
> 赞同：0
> 
> 时间：2013-01-19T11:15:20.810
> 
> 标签：php, centos

我想用 yum 安装 php-pear-Net-SMTP，但是当我进入

```
yum install php-pear-Net-SMTP 
```

我收到这个

```
No package php-pear-Net-SMTP available. 
```

那么如何在 centos 6.x 中安装 php-pear-Net-SMT

我使用centos 6.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:24:15.460

尝试这个：

```
sudo pear install Net_SMTP 
```

您可能还想`mail`使用安装

```
pear install mail 
```

# android - Android Contact：如何在弹窗中实现同一张图片“展开”

> ID：14413769
> 
> 赞同：1
> 
> 时间：2013-01-19T11:17:02.093
> 
> 标签：android, imageview, expansion

我猜你知道 ICS 联系人应用程序。

有一种花哨且有用的方法可以以裁剪的方式显示图片，然后单击即可显示完整图片。

我只是想知道如何实现这一目标..

那是一个新的活动吗？

我应该创建一个带有完整图片的弹出窗口并在同一个 Activity 中创建动画吗？

非常感谢任何帮助..

![在此处输入图像描述](../Images/71f763621e17da91b224912d52505adf.png)

我已经尝试过：

```
 final ImageView imageView = (ImageView) findViewById(R.id.imageView);

    imageView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            AlertDialog.Builder builder = new AlertDialog.Builder(
                    ActivityDetail.this);
            ImageView view = new ImageView(ActivityDetail.this);
            //build the view
            builder.setView(view);

            builder.create().show();

        }
    }); 
```

最大的问题是动画！

该对话框不像联系人应用程序那样整洁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:40:31.100

你可以像这样使用 ImageView 的 scaleType 属性，

```
<ImageView android:layout_width="200dp"  
               android:layout_height="200dp"  
               android:layout_gravity="center"  
               android:src="@drawable/eureka"  
               android:scaleType="matrix">  
   </ImageView> 
```

android:scaleType 在[android:scaleType 样本上有不同的值](http://etcodehome.blogspot.in/2011/05/android-imageview-scaletype-samples.html)

然后，
您可以像这样将 imagesourceid 作为意图传递。

> ```
> Intent newintent = new Intent(test.this, image.class);
> newintent.putExtra("IMAGE", R.drawable.yor_image); 
> ```

然后在目标活动中接受并使用如下

```
int imgid = getIntent().getIntExtra("IMAGE", 0);
ImageView img = (ImageView)findViewById(R.id.img);
img.setImageResource(imgid); 
```

# java - 使用 Java 通过 HTTP 下载长度未知的文件

> ID：14413774
> 
> 赞同：6
> 
> 时间：2013-01-19T11:17:49.483
> 
> 标签：java, http, download

我想用java下载一个HTTP查询，但是我下载的文件在下载时长度不确定。

我认为这将是相当标准的，所以我搜索并找到了它的代码片段： http: [//snipplr.com/view/33805/](http://snipplr.com/view/33805/)

但是 contentLength 变量有问题。由于长度未知，我得到-1。这会产生错误。当我省略对 contentLength 的整个检查时，这意味着我总是必须使用最大缓冲区。

但问题是文件还没有准备好。因此，flush 仅被部分填充，部分文件丢失。

如果您尝试下载类似[http://overpass-api.de/api/interpreter?data=area%5Bname%3D%22Hoogstade%22%5D%3B%0A%28%0A++node%28area%29%的链接3B%0A++%3C%3B%0A%29+%3B%0Aout+meta+qt%3B](http://overpass-api.de/api/interpreter?data=area%5Bname%3D%22Hoogstade%22%5D%3B%0A%28%0A++node%28area%29%3B%0A++%3C%3B%0A%29+%3B%0Aout+meta+qt%3B)使用该片段，您会注意到错误，并且当您总是下载最大缓冲区以忽略错误时，您最终会得到损坏的 XML 文件。

有没有办法只下载文件的就绪部分？我想这是否可以下载大文件（最多几 GB）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-19T11:41:13.870

这应该可行，我对其进行了测试，并且对我有用：

```
void downloadFromUrl(URL url, String localFilename) throws IOException {
    InputStream is = null;
    FileOutputStream fos = null;

    try {
        URLConnection urlConn = url.openConnection();//connect

        is = urlConn.getInputStream();               //get connection inputstream
        fos = new FileOutputStream(localFilename);   //open outputstream to local file

        byte[] buffer = new byte[4096];              //declare 4KB buffer
        int len;

        //while we have availble data, continue downloading and storing to local file
        while ((len = is.read(buffer)) > 0) {  
            fos.write(buffer, 0, len);
        }
    } finally {
        try {
            if (is != null) {
                is.close();
            }
        } finally {
            if (fos != null) {
                fos.close();
            }
        }
    }
} 
```

如果您希望它在后台运行，只需在线程中调用它：

```
Thread download = new Thread(){
    public void run(){
        URL url= new URL("http://overpass-api.de/api/interpreter?data=area%5Bname%3D%22Hoogstade%22%5D%3B%0A%28%0A++node%28area%29%3B%0A++%3C%3B%0A%29+%3B%0Aout+meta+qt%3B");
        String localFilename="mylocalfile"; //needs to be replaced with local file path
        downloadFromUrl(url, localFilename);
    }
};
download.start();//start the thread 
```

# css - 如何设置路径以使用 Compass SASS 编译我的 CSS

> ID：14413775
> 
> 赞同：4
> 
> 时间：2013-01-19T11:17:50.097
> 
> 标签：css, sass, compass-sass

我一直在环顾四周，这似乎是一个非常普遍的问题，但我没有找到适合我的情况的解决方案。

[我已经按照这些说明](http://thesassway.com/beginner/getting-started-with-sass-and-compass)设置了我的第一个 Compass 项目

我的文件夹项目称为 sass-test

我有我的 css 文件

*   屏幕.css
*   打印.css
*   即.css
*   配置文件

我里面的config.rb就是这样设置的

```
http_path = "/"
css_dir = "stylesheet"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts" 
```

然后我有我的 sass 文件夹：

*   屏幕.scss
*   打印.scss
*   即.scss

我在我的 screen.scss 文件中做了一些更改，然后我通过终端给出这个命令来编译它

```
compass compile sass-test/sass/screen.scss 
```

现在碰巧COMPASS会自动生成新文件夹

*   样式表
*   测试
*   sass .在这个文件夹中 Compass 编译`screen.css`

我不希望我的 screen.css 在那里编译，但我希望它在我的 sass-test 中已经存在 screen.css 文件。

我怎样才能做到这一点？我也在这篇[文章](http://css-tricks.com/compass-compiling-and-wordpress-themes/)中查找所有评论，但我无法弄清楚问题所在。

我还尝试通过设置 Outputfolder 的*liveReload 预处理器*来编译它，但它仍在“错误”路径中编译 screen.css。

如何向 Compass 提供指令以在我的 sass 测试中编译我的 screen.css 文件？

这里是打印屏幕![在此处输入图像描述](../Images/130b9d3fac9ada17987a3c25d6f0b7c4.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:41:02.077

您需要更改`css_dir = "stylesheet"`config.rb 中的 以指向您希望编译的 CSS 文件所在的位置。就你而言，听起来你想要它：

```
css_dir = "./" 
```

您可能还需要启用相对 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:52:59.343

好的，我已经解决了这个问题，我从一开始就以不同的方式调用项目（没有任何连字符）然后我通过 LiveReload 预处理器设置了输出文件夹，并且每当我编辑任何 scss 文件时，它都会直接编译到里面的相关 css 文件样式表文件夹。这样我不使用任何命令行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:22:10.580

因为项目配置文件中定义的所有路径都是相对于当前shell路径的，所以必须`compass`从项目的根目录运行命令，也就是说，由于目录`sass-test`：

```
cd sass-test
compass compile sass/screen.scss 
```

或者只是`compass compile`编译所有文件的命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T15:06:53.997

如果您希望每次都为 compass 使用的文件夹设置不同的默认值，这也可能会有所帮助（只需编辑您的 config.rb）

将以下内容编辑/添加到您的 ~/.bash_profile

```
alias compass_init="compass init --syntax=sass --css-dir=css --javascripts-dir=js" 
```

# android - 将用户名和密码发送到服务器并在 Android 中获得响应

> ID：14413782
> 
> 赞同：2
> 
> 时间：2013-01-19T11:18:52.750
> 
> 标签：android

如何在 Android 中使用 httpclient 将我的用户名和密码发送到服务器并从服务器获取响应？我研究了许多网站，但找不到任何我想要的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T11:26:11.243

制作一个类适配器并放置此代码...这里我假设您使用的是 json webService。

```
public String login(String uname, String password)
{
    InputStream is = null;
    String result = "";
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    try 
    {   
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("Your Url");

        nameValuePairs.add(new BasicNameValuePair("emailid", uname));
        nameValuePairs.add(new BasicNameValuePair("password", password));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();

        is = entity.getContent();
    }
    catch (Exception e)
    {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    // convert response to string
    try 
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader( is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;

        while ((line = reader.readLine()) != null) 
        {
            sb.append(line).append("\n");
        }

        is.close();
        result = sb.toString();

        Log.v("log","Result: " + result);
    } 
    catch (Exception e)
    {
        Log.v("log", "Error converting result " + e.toString());
    }

    return result;
} 
```

并像这样拨打电话...

```
Adapter adb = new Adapter();
response = adb.login(edtLoginemail.getText().toString(), edtLoginPassword.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:26:14.833

试试这个可能对你有帮助。

```
userId = editTextUserName.getText().toString();
password = editTextPassword.getText().toString();

String xml = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" 
            + "<login><User>" + userId + "</User>"
            + "<Password>" + password + "</Password></login>";
            serverCall(xml);

serverCall(xml);

private void serverCall(final String xml )
{

 ConnectivityManager conMan = ( ConnectivityManager ) getSystemService( Context.CONNECTIVITY_SERVICE );
 if( conMan.getActiveNetworkInfo() != null && conMan.getActiveNetworkInfo().isConnected() )
  {

     result = new Connection().getResponse("http://localhost/login.php" , xml);
     if(result.equals("yes") {
       //registration done
     } else {
       //failed
     }
   }
} 
```

连接.java

```
public String getResponse(String connUrl, String xml) {
    DefaultHttpClient httpClient = null;
    try {
        MultipartEntity mp = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        HttpPost method = new HttpPost(connUrl);
        method.setEntity(mp);
        mp.addPart("xml_request", new StringBody(xml));

        httpClient = new DefaultHttpClient();
        HttpResponse response = httpClient.execute(method);

        if(response.getStatusLine().getStatusCode() == 200){
            ByteArrayOutputStream outstream = new ByteArrayOutputStream();
            response.getEntity().writeTo(outstream);
            return outstream.toString();
        }
    }
    catch(Exception e) {
        Log.v("APP", "Exception while create connection for getResponse from server with: " + e.getMessage());
    }
    finally {
        httpClient.getConnectionManager().shutdown();
    }
    return "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:35:02.513

您必须在**服务器端**创建一个 Web 服务。

然后至少有两种方法可以将数据发送到服务器并从您的代码中获取响应。搜索`HttpPost`& `HttpUrlConnection`。第一个更容易使用**POST**方法发送数据，但速度也慢了很多。

# .net - Windows（电话）8 - 图像服务器 + 应用程序：REST 或 websockets

> ID：14413783
> 
> 赞同：-1
> 
> 时间：2013-01-19T11:19:15.963
> 
> 标签：.net, image, rest, windows-8, websocket

我对 Windows 8 上的应用程序有一个想法，我必须使用服务器（我自己的）并每天向所有客户端发送几张图像。也可以将图像从应用程序上传到我的服务器。

我有在 Windows 8 和 Windows Phone (7) 上开发应用程序的经验，只有 C#/XAML。但是没有远程服务等。我的问题是我应该使用经典的 REST API 还是更新的 websockets。我相信最后一个有更多的表现。作为记录，我不打算建立一个网络客户端。也许，如果应用程序成功，我会将其移植到 Android 应用程序。我认为无论我的选择如何，它都能连接到 .NET 服务？还有其他重要因素可以指导我的决定吗？

那么你应该使用哪一个呢？如果您有 .NET 中有关 REST 或 websockets 的一些好的教程的链接（首选带有图像，而不仅仅是 hello world），请分享 :)

已经非常感谢了

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-19T21:43:14.807

答案很简单：

```
 When you need a service that provides data use REST, when you need to send some kind of messages or notifications use websockets. Websockets provide a full-duplex communication ( bidirectional ) while the client uses the web api ( so it is unidirectional).

    For example: you have a chat app. Use the service to get the users from the db and use websockets to send messages to users. 
```

检查此链接以获取 web api [http://channel9.msdn.com/Events/Build/2013/3-504](http://channel9.msdn.com/Events/Build/2013/3-504) 和 websockets：http: [//msdn.microsoft.com/en-us/hh969243.aspx](http://msdn.microsoft.com/en-us/hh969243.aspx)

# mysql - MySql、LOAD DATA 或 BATCH INSERT 或任何其他更好的批量插入方式

> ID：14413785
> 
> 赞同：0
> 
> 时间：2013-01-19T11:19:40.857
> 
> 标签：mysql, load-data-infile, batch-insert

我正在尝试创建一个 Web 应用程序，主要目标是将请求数据插入数据库。

这是我的问题，一个请求本身包含10,000到1,00,000个数据集的信息（每个数据集需要作为一行单独插入数据库中）

我可能会同时在此应用程序上收到多个请求，因此我有必要快速插入。

我正在使用 MySQL 数据库，哪种方法更适合我，`LOAD DATA`或者`BATCH INSERT`有比这两种更好的方法吗？

您的应用程序将如何检索此信息？- 将有另一个基于后台线程的 Java 应用程序，将从该表中选择记录，逐个处理并删除它们。

您可以将您的请求（批次）排队，以便您的系统一次处理一批吗？- 现在我们正在考虑直接将其插入数据库，但是如果这种方法不够可行，我们可能会考虑对数据进行排队。

信息的检索是否需要与新数据的插入同时进行？- 是的，我们保持同步。

以下是您问题的某些答案，奥利·琼斯

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:33:44.613

Ken White 的评论提到了处理批量插入的几个有用的 SO 问题和答案。对于您正在处理的记录量，您将通过使用 MyISAM 表和`LOAD DATA INFILE`从 MySQL 服务器使用的同一文件系统中的源文件加载数据获得最大的成功。

你在这里做的是一种排队操作。您收到这些批次（您称它们为“请求”）的记录（您称它们为“数据集”。）您将它们放入一个大存储桶（您的 MySQL 表）中。然后您一次将它们从存储桶中取出。

你没有完全描述你的问题，所以我的建议可能是错误的。

每个记录（“数据集”）是否独立于所有其他记录？

处理记录的顺序是否重要？或者，如果您以随机顺序处理它们，您会获得相同的结果吗？换句话说，您是否必须维护各个记录的顺序？

如果您几乎同时收到两百万行批次（“请求”）会怎样？假设您可以每秒加载一万条记录（这很快！）到您的 MySQL 表中，这意味着完全加载两个批次需要 200 秒。您会在开始加载第二批之前尝试完全加载一批吗？

在批次完全加载之前开始处理和删除这些批次中的行是否可以？

记录在处理之前在您的系统中停留 200 秒或更长时间是否可以？一张唱片能放多久？（这称为“延迟”）。

鉴于您在这里提到的数据量，如果您要使用实时数据进行生产，您可能需要考虑使用 ActiveMQ 等排队系统而不是 DBMS。

简单地构建一个多线程 Java 应用程序来加载您的批次记录，将它们存入 RAM 中的 Queue 对象（一个`ConcurrentLinkedQueue`实例可能是合适的）并逐个处理它们也可能是有意义的。与使用 MySQL 表作为队列相比，这种方法可以让您更好地控制系统性能。

# objective-c - 使用 NSTask 时处理错误

> ID：14413786
> 
> 赞同：0
> 
> 时间：2013-01-19T11:19:44.897
> 
> 标签：objective-c, apache, nstask

作为一个学习项目，我为 Apache 压力测试命令行工具“ab”编写了一个简单的 gui。它需要一个完整的 URL，包括一个文件名，例如 index.html 或 simular，作为它的参数之一。如果未指定文件名，“ab”会回显“无效 url”并显示可用标志列表。

我想捕捉这个“错误”并尝试使用 NSTasks 标准错误输出。真的不能让它工作。这甚至会被归类为会导致标准错误的错误吗？

除了在启动 NSTask 之前验证 URL 输入之外，您认为我可以防止或捕获这个错误吗？

我的简单代码：

```
- (void) stressTest:(NSString *)url withNumberOfRequests:(int)requests sendSimultaneously:(int)connections {

    NSBundle *mainBundle = [NSBundle mainBundle];
    NSString *abPath = [[mainBundle bundlePath] stringByAppendingString:@"/Contents/Resources/ab"];

    NSString* requestsStr = [NSString stringWithFormat:@"%i", requests];
    NSString* connectionsStr = [NSString stringWithFormat:@"%i", connections];

    // Init objects for tasks and pipe
    NSTask *abCmd = [NSTask new];
    NSPipe *outputPipe = [NSPipe pipe];
    [abCmd setLaunchPath:abPath];
    [abCmd setArguments:[NSArray arrayWithObjects:@"-n", requestsStr, @"-c", connectionsStr, url, nil]];
    [abCmd setStandardOutput:outputPipe];
    [abCmd launch];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(readCompleted:) name:NSFileHandleReadToEndOfFileCompletionNotification object:[outputPipe fileHandleForReading]];
    [[outputPipe fileHandleForReading] readToEndOfFileInBackgroundAndNotify];
}

- (void)readCompleted:(NSNotification *)notification {

    NSString * tempString = [[NSString alloc] initWithData:[[notification userInfo] objectForKey:NSFileHandleNotificationDataItem] encoding:NSASCIIStringEncoding];
   [resultTextOutlet setString:tempString];
   [[NSNotificationCenter defaultCenter] removeObserver:self name:NSFileHandleReadToEndOfFileCompletionNotification object:[notification object]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:04:39.077

`ab`将其错误消息（包括使用信息）写入标准错误。您目前仅从标准输出中读取。要访问错误消息或使用信息，您需要分配一秒钟`NSPipe`，将其传递给`-[NSTask setStandardError:]`，然后从中读取数据。

# android - 调试时发现android源代码错误

> ID：14413787
> 
> 赞同：1
> 
> 时间：2013-01-19T11:19:58.433
> 
> 标签：android, eclipse, debugging, adt

（我是 android 新手，所以不要和我在一起）
我正在使用 Android Developer Tools Build: v21.0.0-531062 进行编码。当我调试我的代码模拟器时，我的代码模拟器正常启动，但例如当我单击某个按钮时出现错误（暂停（异常 RuntimeException））。我知道我有一些错误，但是在哪里，在哪一行。我没有从调试器中得到这样的信息。我在哪里可以找到我的错误。当我的代码很小时我可以这样做，当我的代码太大时我该怎么做？

我的调试错误：

```
Thread [<1> main] (Suspended (exception RuntimeException))  
    ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1569    
    ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1663 
    ActivityThread.access$1500(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 117   
    ActivityThread$H.handleMessage(Message) line: 931   
    ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 123 
    ActivityThread.main(String[]) line: 3683    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 507  
    ZygoteInit$MethodAndArgsCaller.run() line: 839  
    ZygoteInit.main(String[]) line: 597 
    NativeStart.main(String[]) line: not available [native method] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:25:57.313

打开堆栈跟踪。错误显示在红线中。错误的原因是这样的，

```
Caused by: 
```

该错误主要是在包含您的包名称的行中引起的。

看看这个[答案](https://stackoverflow.com/a/11262558/1626878)。它提供了一个很好的解释。

# database - 使用用户数据生成统计数据的策略

> ID：14413788
> 
> 赞同：1
> 
> 时间：2013-01-19T11:20:08.487
> 
> 标签：database, statistics

我需要一个一般性的建议，但为了记录，我使用 jpa。

我需要生成使用数据统计信息，例如每个产品的用户购买细分等...我看到三种可能的策略，1）每次查看统计信息时生成动态统计信息，2）为统计信息创建一个特定表每次有变化时我都会更新 3) 定期进行离线处理

所有人都有问题和优势，例如成本与不是最新的数据，我想知道是否有人在该领域有经验可以提供一些建议。我知道这个问题非常广泛，如果需要，我可以改进我的用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:01:32.977

我做了很多报告，我一直想知道的第一个问题是利益相关者是否需要实时数据。这肯定会改变您的思维方式以及设计报告系统的方式。

根据您的数据大小，我认为可以进行实时报告。如果您有数百万的数据，那么您可能需要进行一些预处理或数据仓库（您的选择 2/3）。

一些一般性建议：

1.  如果您想进行实时报告，请考虑制作数据库副本，这样您就不会针对生产数据运行报告。一些报告可以使用繁重的查询，因此值得研究将生产数据复制到可以运行报告的其他服务器。

2.  大量使用中间结构进行报告。编写视图、存储过程等，因此每个报告都不仅仅是一些巨大的复杂查询。

3.  如果报表开始变得过于复杂而无法在数据库级别执行，请确保将报表逻辑移动到应用程序层。我已经被这个咬过很多次了。我开始编写一个纯粹来自数据库的查询的报告，最终它变得太复杂了，我不得不跳过箍来让它工作。

4.  实时拍摄，然后在必要时转到陈旧的数据。数据库能够做的比你想象的要多得多。很多时候，您可以对数据库结构进行更改，从而大大提高性能。

# ruby - 获取带有或不带有锚标记的节点文本（）

> ID：14413791
> 
> 赞同：0
> 
> 时间：2013-01-19T11:20:22.653
> 
> 标签：ruby, xml, xpath, nokogiri

我不知道如何获取表格单元格的 text() 锚标记是否是文本的父级。

和：

```
 <td class="c divComms" title="Komentarz|"> 
<a id="List1_Dividends_ctl01_HyperLink1" target="_blank" href="http://www.attrader.pl/pl/akcje/DRUKPAK/komunikat/EBI/none,20130104_090845_0000041461">uchwalona</a> 
<div class="stcm">2013-01-29</div></td> 
```

没有：

```
<td class="c divComms" title="Komentarz|Celem...">
proponowana
<div class="stcm">2012-10-05</div>
</td> 
```

我希望组成哈希的元素

```
 details = rows.collect do |row|
  detail = {}
  [
     [:paystatus, 'td[7]//text()[not(ancestor::div)]'],
     [:paydate, 'td[7]/div/text()'], # the 2013-01-29 or 2012-10-05 above
  ].each do |name, xpath|
    detail[name] = row.at_xpath(xpath).to_s.strip
  end 
```

捕捉*uchwalona*或*proponowana*（注意没有尾随 div 中的日期），但就目前而言，它会忽略`a`标签文本，除非我这样做`td[7]/a/text()`，在这种情况下，*只会*读取锚的文本“uchwalona”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:38:47.557

使用联合运算符 | 应该管用：

```
[:paystatus, '(td[7]|td[7]/a)/text()'] 
```

`[not(ancestor::div)]`（我认为如果您不使用双斜杠，您将不需要该部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:14:33.233

`row.xpath`当我使用该方法而不是 时，问题似乎得到了解决`.at_xpath`，这不知何故使联合运算符**`|`**无效。

如此改变

```
 detail[name] = row.at_xpath(xpath).to_s.strip 
```

至：

```
 detail[name] = row.xpath(xpath).to_s.strip 
```

这意味着我还必须在我的其他字段`|name, xpath|`对中收紧一些 xpath 表达式，以免像以前没有注意到的那样过度包含。

# c# - C#裁剪图像中的透明部分

> ID：14413793
> 
> 赞同：0
> 
> 时间：2013-01-19T11:20:33.473
> 
> 标签：c#, image, transparent, crop, pixels

我有这张图片：

![在此处输入图像描述](../Images/756328f79e74b013965fc09270b33312.png)

我编写了一个代码，该代码应该只裁剪带有黑点的部分
（该代码仅适用于单色图像），
没有点周围的所有透明像素，
然后在裁剪后返回图像，
但是对于出于某种原因，当它到达一个黑色像素时，
它无法识别这是一个黑色像素，
因此，它会跳过“if”语句。

**这是代码：**

```
 private Image cropTransparency(Image image)
    {
        Bitmap imageCrop = new Bitmap(image);
        imageCrop.Save(@"C:\Users\Nehoray\Desktop\Test.png");
        Point min = new Point(imageCrop.Width, imageCrop.Height);
        Point max = new Point(imageCrop.Width, imageCrop.Height);
        for (int w = 0; w < imageCrop.Width; w++)
        {
            //'w' stands for Width
            for (int h = 0; h < imageCrop.Height; h++)
            {
                //'h' stands for Height
                Color check = imageCrop.GetPixel(w, h);
                if (check == Color.Black)
                {
                    MessageBox.Show("Found a white pixel!");
                    if (w < min.X)
                    {
                        min.X = w;
                    }
                    if (h < min.Y)
                    {
                        min.Y = h;
                    }
                    if (w > max.X)
                    {
                        max.X = w;
                    }
                    if (h > max.Y)
                    {
                        max.Y = h;
                    }
                }
            }
        }
        imageCrop = new Bitmap(max.X - min.X, max.Y - min.Y);
        Graphics g = Graphics.FromImage(imageCrop);
        Rectangle cropRect = new Rectangle(new Point(0, 0), new Size(max.X - min.X, max.Y - min.Y));
        g.DrawImage(image, new Rectangle(0, 0, max.X - min.X, max.Y - min.Y), cropRect, GraphicsUnit.Pixel);
        g.Save();
        return imageCrop;
    } 
```

如果您发现为什么当有黑色像素时它无法识别，请告诉我..
无论如何谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:55:19.410

这段代码有很多问题：

```
 Point max = new Point(imageCrop.Width, imageCrop.Height); 
```

当最大值被初始化为最大值时，一个点将如何大于最大值？这应该是`(0,0)`

```
Color check = imageCrop.GetPixel(w, h);
if (check == Color.Black) 
```

我不确定这是否会如您所愿。您有一个 32 位图像，带有 alpha 通道，因此您需要考虑 alpha 值。此外，您正在与预定义的颜色进行比较，该颜色的参考与您的像素不匹配，即使所有 4 个通道都匹配。您可能只想检查 alpha 分量是否非零。如果您只比较颜色通道，请注意透明像素很可能具有匹配的颜色，从而产生意想不到的结果。

```
Rectangle cropRect = new Rectangle(new Point(0, 0), new Size(max.X - min.X, max.Y - min.Y)); 
```

你为什么从 裁剪`0,0`？你的矩形应该从`min.X, min.Y`

```
g.Save(); 
```

这不会保存图像，你知道吗？您保存图像，在代码开始时未修改，然后在裁剪后永远不会重新保存它（我假设这些东西，包括硬编码的路径，是用于调试的，但即便如此，您似乎也可能意思是在这里写图像）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:58:12.677

您正在比较：`(check == Color.Black)`这意味着：引用是否`check`指向与引用相同的实例`Color.Black`-> 这永远不会是真的。

你必须比较实际的颜色：

```
(check.ToArgb() == Color.Black.ToArgb()) 
```

# sql - 用户\下载的数据库设计

> ID：14413795
> 
> 赞同：0
> 
> 时间：2013-01-19T11:20:42.537
> 
> 标签：sql, database, database-design

我需要为下载站点之类的东西设计一个数据库。我想跟踪用户，每个用户下载的程序，还允许用户评价+评论所说的程序。我需要从这个数据库中获得的东西 - 获取程序的平均评分，获取程序的所有评论，确切地知道什么程序由谁下载（我不在乎每个程序下载了多少次，但我想知道每个用户他下载了哪些程序），也许还计算每个程序的评论数，仅此而已（这是一个非常小的项目我想保持简单的个人用途）我想出了这些实体 -

**用户**（uid、uname 等）

**程序**（pid，pname）

以及以下关系-

**UserDownloadedProgram** (uid,pid,timestamp)

**UserCommentedOnProgram** (uid,pid,commentText,timestamp)

**UserRatedProgram** (uid,pid,rating)

为什么我选择这种方式 - 关系（用户下载、用户评论和费率）是多对多的。一个用户下载很多程序，一个程序被很多用户下载。评论也是如此（一个用户对许多程序发表评论，一个程序被许多用户评论或评价）。据我所知，最佳实践是创建第三个一对多的表（关系表）。. 我想在这个设计中，平均评分和评论检索是通过连接查询或类似的东西来完成的。我是数据库设计的菜鸟，但我尽量坚持最佳实践，这种设计或多或少还可以，还是我忽略了什么？

我绝对可以想到其他可能性 - 也许评论和/或评级本身可以是一个实体（表），并且关系在 3 个实体之间。我不太确定这样做的好处\缺点是什么：我知道我并不真正关心评论或评级，我只想在适当的地方显示它们并维护它们（在需要时删除），那么如何我知道他们自己是否更好地成为一个实体？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:40:35.683

我会用自己的 id 为下载创建一个实体。您可能有下载状态，您可能为一个用户多次下载同一个程序。您可能需要将下载与订单或其他内容相关联，..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:58:23.893

[您将按照规范化规则的](http://en.wikipedia.org/wiki/Database_normalization)要求创建新实体。没有特别的理由为评论制作一个额外的（单独的）表格，因为您已经有了一个。谁发表了评论以及将评论应用于哪个程序是评论的完整属性。代表这些关系的外键（从注释表的角度来看是多对一的）属于您放置它们的位置。

您提出的表格是*第三范式*，根据最佳实践是可以接受的。我要补充一点，您似乎是在交易基础上跟踪数据（即在事件发生时记录事件）。这也是一个很好的做法，因为您始终可以根据详细信息找出您想要的任何内容。

计算下载次数或评论数很简单，只需使用[SQL 聚合函数](http://en.wikipedia.org/wiki/Aggregate_function)和适用于您的查询的外键上的过滤器 - 例如`where pid=1234`等。

# android - 如何使用slidingDrawer左右滚动

> ID：14413796
> 
> 赞同：0
> 
> 时间：2013-01-19T11:20:46.787
> 
> 标签：android, slidingdrawer

我想实现左右滚动。当用户向左或向右只是为了向他展示下一个或之前在我的文本视图上的数组上出售时。我想我需要使用这个slidingDrawer，但我不想为此使用按钮。如果您可以发送一些代码来看看如何做，我会很高兴。

这是我的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<SlidingDrawer xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/SlidingDrawer"
    android:layout_width="wrap_content"
    android:layout_height="250dip"
    android:content="@+id/contentLayout"
    android:handle="@+id/slideButton"
    android:orientation="vertical"
    android:padding="10dip" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/pubdate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15sp"
            android:textStyle="bold" />
    </LinearLayout>

</SlidingDrawer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:30:24.213

无需导入大量代码和图标就可以非常简单地做到这一点......我喜欢的最简单的方法是：

[http://misha.beshkin.lv/android-swipe-gesture-implementation/](http://misha.beshkin.lv/android-swipe-gesture-implementation/)

# jquery - 动态禁用和启用单选按钮

> ID：14413798
> 
> 赞同：2
> 
> 时间：2013-01-19T11:20:56.953
> 
> 标签：jquery, html, radio-button

我正在创建一个简单的 DISC 配置文件测试，其中每个问题都有 8 个单选按钮，如果我选中 Great "M" 单选按钮，Great "L" 单选按钮将被禁用并且无法选择，您必须选择其他类似强大，善良或勇敢。表格看起来像这样，

![在此处输入图像描述](../Images/c93128f201202c1ae714db01728fcd06.png)

我正在尝试使用 jQuery，

```
 $(document).ready(function(e) {
    var Form = $("[name=DISC]");

    Form.find("input.Most").each(function() {
        $(this).change(function() {
            $(this).next().attr("disabled", "disabled");
            $(this).prev().attr("disabled");
        });
    });

    Form.find("input.Least").each(function() {
        $(this).change(function() {
            $(this).prev().attr("disabled","disabled");
            $(this).next().attr("disabled");
        });
    });
}); 
```

但是，如果我检查了大“M”单选按钮，然后我将其更改为 Overpowered，大“L”单选按钮仍然禁用，因此对于其他“L”按钮，如果我稍后更改“L”按钮， “M”仍然被禁用，看起来像这样，

![在此处输入图像描述](../Images/454bb3490405164ae17fa6baa97350fd.png)

我想要得到的结果是，如果我选择 M 作为 Kind 我不能选择 L 作为 Kind。有什么帮助吗？抱歉英语不好。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:25:33.497

创建两组按钮（即赋予按钮相同的`name`属性），默认行为是每次只能检查每组中的一个按钮。

```
<div class="lgroup">
 <input type="radio" name="Lgroup" value="1"> //great
 <input type="radio" name="Lgroup" value="2"> //overpowered
 <input type="radio" name="Lgroup" value="3"> // kind 
 <input type="radio" name="Lgroup" value="4"> //brave  
</div>
<div class="mgroup">
 <input type="radio" name="Mgroup" value="1"> //great
 <input type="radio" name="Mgroup" value="2"> //overpowered
 <input type="radio" name="Mgroup" value="3"> //kind
 <input type="radio" name="Mgroup" value="4"> //brave
</div> 
```

要禁止将同一属性标记为 L 和 M，可以使用以下脚本：

```
$("input").change(
    function(){
      i= $(this).index();
       sibling =  $(this)
        .parent()
        .siblings()
        .find("input")
        .eq(i);
     if (sibling.is(":checked")) 
         $(this).removeAttr("checked");
         }
); 
```

[小提琴](http://jsfiddle.net/PF9NT/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:44:12.723

好吧，作为对您问题的回答，我刚刚尝试了这个小提琴：http: [//jsfiddle.net/KXbEE/](http://jsfiddle.net/KXbEE/)

# 使用的HTML：

```
<form name='DISC' method='post'>
  <table>
    <tbody>
        <tr>
            <td>
                <input type='radio' name='' value='' />
                <input type='radio' name='' value='' />
            </td>
            <td>Great</td>
        </tr>
        <tr>
            <td>
                <input type='radio' name='' value='' />
                <input type='radio' name='' value='' />
            </td>
            <td>Overpowered</td>
        </tr>
        <tr>
            <td>
                <input type='radio' name='' value='' />
                <input type='radio' name='' value='' />
            </td>
            <td>Kind</td>
        </tr>
        <tr>
            <td>
                <input type='radio' name='' value='' />
                <input type='radio' name='' value='' />
            </td>
            <td>Brave</td>
        </tr>
    </tbody>
  </table>
</form> 
```

# 和这个jQuery：

```
var Form = $("form[name='DISC']");

Form.find(":radio").each(function () {
    $(this).change(function () {
        $(this).siblings(':radio').attr("disabled", "disabled");
    });
}); 
```

看看这是否对您有帮助。

# java - 在 GWT 中模仿 jQuery event.which

> ID：14413799
> 
> 赞同：0
> 
> 时间：2013-01-19T11:21:02.183
> 
> 标签：java, gwt, gwtquery

GwtQuery 文档提供以下示例作为处理事件的起点：

```
$("h1").bind(Event.ONMOUSEOVER | Event.ONMOUSEOUT, new Function() {
  public boolean f(Event e) {
    $(e).toggleClass("highlight");
    return true;
  }
}); 
```

但是，与 jQuery 并行不同，处理程序中没有`this`关键字来引用元素，这就是为什么它被传递为`Event e`，被包裹在`$()`. 但是，我们无法访问实际事件。我们如何在 GWT 中计算我们可以在 jQuery 中使用`event.which`, 或`event.target`?

具体来说，我正在寻找两个事件。一个是 a `mousedown`，之后我需要检查它是否是左按钮（相当于 jQuery `e.which == 1`）和一个`keyup`事件，之后我需要检查特定键（`e.keyCode == 13`等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:00:52.290

`Event`传递给函数的对象是 GWT 对象所以`com.google.gwt.user.client.Event` 如果你想知道左键是否被按下：

```
if (e.getButton() == NativeEvent.BUTTON_LEFT){
 ...
} 
```

如果您想知道按下了哪个键： `e.getCharCode()`

# java - 从布尔方法转到另一个方法

> ID：14413803
> 
> 赞同：0
> 
> 时间：2013-01-19T11:21:33.783
> 
> 标签：java

伙计们，我正在用 Java 编写五子棋游戏，但我遇到了一个愚蠢的问题。我希望玩家能够阻止一个字段，所以我做了两种方法，它们都是布尔值：

DoYouWishToBlockAField 和 BlockingField。我想这样做，当第一个为真时，我转到第二个，当它为假时，当然，中断操作并且不阻塞任何字段。你能帮我吗 ？

```
 public static void DoYouWishToBlockAField(){
   if(true){
       BlockingField();
   } else (false); 
```

在这里我收到错误消息，我一直想知道如何使它正确。

}

```
 public static void BlockingField(int theSeed) {
      boolean validInput = false;  // for input validation
      do {
         if (theSeed == BlockedField1) {
            System.out.print("Player 1: Block a Field: ");
         } else{
            System.out.print("Player 2: Block a Field: ");
         }
         int row = in.nextInt() - 1;  // array index starts at 0 instead of 1
         int col = in.nextInt() - 1;
         if (row >= 0 && row < ROWS && col >= 0 && col < COLS && board[row][col] == Empty) {
            currentRow = row;
            currentCol = col;
            board[currentRow][currentCol] = theSeed;  // update game-board content
            validInput = true;  // input okay, exit loop
         } else {
            System.out.println("The cell at (" + (row + 1) + "," + (col + 1)
                  + ") is taken. Try another move.");
         }
      } while (!validInput);  // repeat until input is valid
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:33:08.833

函数调用时使用参数名

```
BlockingField(parameterName); 
```

# mysql - 从 mySql 中的表中获取行数

> ID：14413807
> 
> 赞同：1
> 
> 时间：2013-01-19T11:22:04.410
> 
> 标签：mysql, sql

我有一个名为“blogDetails”的表，其中包含 blogId、userId、blogTitle、blogContent 我还有另一个名为“blogPopularity”的表，其中包含 blogId、userId、popularityStat。

现在在第二个表（blogPopularity）中，“popularityStat”字段可以包含“L”（喜欢）或“D”（不喜欢）。

我正在使用存储过程来插入内容（到 blogDetails）和喜欢/不喜欢状态（到 blogPopularity）。

我想显示每个博客的喜欢和不喜欢的数量。

任何人都建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T11:24:37.743

```
SELECT  a.blogId, 
        a.blogTitle,
        SUM(CASE WHEN b.popularityStat = 'L' THEN 1 ELSE 0 END) `LIKES`,
        SUM(CASE WHEN b.popularityStat = 'D' THEN 1 ELSE 0 END) `DISLIKES`
FROM    blogDetails a
        LEFT JOIN blogPopularity b
            ON a.blogID = b.blogID
GROUP   BY  a.blogId, a.blogTitle 
```

样本结果

```
╔════════╦═══════════╦═══════╦══════════╗
║ BLOGID ║ BLOGTITLE ║ LIKES ║ DISLIKES ║
╠════════╬═══════════╬═══════╬══════════╣
║      1 ║ Title1    ║     7 ║        3 ║
║      2 ║ Title2    ║     6 ║        4 ║
║      3 ║ Title3    ║     3 ║        1 ║
╚════════╩═══════════╩═══════╩══════════╝ 
```

# android - 使用 Android binder 共享文件描述符

> ID：14413810
> 
> 赞同：5
> 
> 时间：2013-01-19T11:22:17.567
> 
> 标签：android, android-binder

如何在 C++ 中使用 Android binder IPC 跨进程共享文件描述符？您也可以发布示例吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T07:58:49.773

在客户端进程中，我们执行以下操作来执行绑定事务

```
remote()->transact(MYTRANSACTION, data, &reply, IBinder::FLAG_ONEWAY); 
```

data 和 reply 是 Parcel 类型的。编组和解组是在原生 android 中使用 Parcel 对象完成的。它具有编组文件描述符的功能。

```
data.writeFileDescriptor(fd); 
```

在服务端进程（即android中的Service）中，我们调用下面的方法来读取服务端进程中的文件描述符。

```
int fd = data.readFileDescriptor(); 
```

跨进程共享文件描述符将由**binder 驱动程序**处理。

**重要**：在包裹对象被销毁之前复制接收到的文件描述符。

[你可以在Android-HelloWorldService](https://github.com/mcr/Android-HelloWorldService)找到原生绑定器的实现和解释

# android - 如何在 Android 的 XMLRPC 库中获取错误代码

> ID：14413814
> 
> 赞同：3
> 
> 时间：2013-01-19T11:23:10.330
> 
> 标签：android, api, magento, xmlrpclib

我[**`XMLRPC library for android`**](http://code.google.com/p/android-xmlrpc/)在使用 Magento API 的 Android 项目中使用过。
通过使用 Magneto API 向 Magento Store 发送请求时出现错误。
该错误包含“ **`ERROR CODE`**”。

错误就像：

```
 this code
                                                  ||
                                                  \/
org.xmlrpc.android.XMLRPCFault: XMLRPC Fault:  [code 101]  
at org.xmlrpc.android.XMLRPCClient.callEx(XMLRPCClient.java:308)
at org.xmlrpc.android.XMLRPCMethod.run(XMLRPCMethod.java:33)
.
.
. 
```

有谁知道，如何从异常中获取此错误代码，就像我们如何获取错误消息一样，如下所示：

```
try
{
  ......
  ......
}
catch(Exception e)
{
  Log.i("Error",e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-08T09:24:15.390

您已经有错误消息，在这种情况下它只是空的。查看 src/org/xmlrpc/android/XMLRPCClient.java（第 216 行）：

```
if (tag.equals(Tag.FAULT)) {
    pullParser.nextTag(); // Tag.VALUE (<value>)
    Map<String, Object> map = (Map<String, Object>) iXMLRPCSerializer.deserialize(pullParser);
    String faultString = (String) map.get(Tag.FAULT_STRING);
    int faultCode = (Integer) map.get(Tag.FAULT_CODE);
    entity.consumeContent();
    throw new XMLRPCFault(faultString, faultCode);
} 
```

这里我们调用扩展 XMLRPCException 的 XMLRPCFault 对象 (src/org/xmlrpc/android/XMLRPCFault.java)。这是主要部分：

```
public XMLRPCFault(String faultString, int faultCode) {
    super("XMLRPC Fault: " + faultString + " [code " + faultCode + "]");
    this.faultString = faultString;
    this.faultCode = faultCode;
} 
```

如您所见，此方法显示“XMLRPC Fault: [code 101]”，其中 faultString=''（空）和 faultCode=101。顺便说一句，这是 urlopen 错误 [Errno 101] “网络无法访问”。如果您使用某些代理，它可能会发生。

现在关于错误处理：您使用 server.py 作为 XML-RPC 服务器。但是在代码中没有定义任何错误处理程序。您可以通过在 'class MyFunc:' 字符串之后添加下一行来做到这一点：

```
class MyFuncs:
    def _dispatch(self, method, args):
    try:
        return getattr(self, method)(*args)
    except:
        handle_logging()
... 
```

并在handle_logging() 中实现您的日志记录。更多详细信息：[https ://docs.python.org/2/library/logging.html#logging.Logger.exception](https://docs.python.org/2/library/logging.html#logging.Logger.exception)

# vb.net - cmd进程不退出

> ID：14413816
> 
> 赞同：0
> 
> 时间：2013-01-19T11:23:17.997
> 
> 标签：vb.net, cmd

我正在运行以下代码来执行来自 vb.net 应用程序的命令。

```
 Dim CMDServer As Diagnostics.ProcessStartInfo
    Dim CMDReply As Diagnostics.Process
    CMDServer = New Diagnostics.ProcessStartInfo
    CMDServer.WorkingDirectory = "C:/"
    CMDServer.FileName = "cmd.exe"
    CMDServer.UseShellExecute = False
    CMDServer.RedirectStandardOutput = True
    CMDServer.RedirectStandardError = True
    CMDServer.CreateNoWindow = True
    CMDServer.Arguments = "/C " + command
    CMDReply = Process.Start(CMDServer)
    MsgBox("START")
    Dim Reply As String = ""
    If Not CMDReply.HasExited Then
        CMDReply.WaitForExit()
    End If
    MsgBox("EXIT")
    Try
        Dim ext = CMDReply.ExitCode
        Reply = CMDReply.StandardOutput.ReadToEnd()
        MsgBox(ext.ToString + "   " + Reply)
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try 
```

它几乎适用于所有命令，但是当`command="help"`程序卡在`CMDReply.WaitForExit()`. 谁能解释这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-14T18:41:00.933

> 标准死锁。先读取输出，然后等待退出。该程序在您读取其所有输出之前无法退出。只有在适合缓冲区的输出很少的情况下，您拥有的代码才能工作。

来自 Hans Passant 的评论

# mysql - MySql 中 STATISTICS IO 的等价物是什么？

> ID：14413818
> 
> 赞同：5
> 
> 时间：2013-01-19T11:23:46.630
> 
> 标签：mysql, sql, sql-server

当我在 MSSQL 上进行查询时，我可以发出这些语句来获取时间统计信息和查询返回的 IO。

```
SET STATISTICS IO ON;
SET STATISTICS TIME ON; 
```

它们是查询性能的良好初步指标。MySql 中是否存在类似的东西，我该如何启用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T16:15:42.023

我不确定`SET STATISTICS`MSSQL 中的作用，但您可能正在寻找[`SHOW PROFILE`](http://dev.mysql.com/doc/refman/5.6/en/show-profile.html)and`SHOW PROFILES`命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T08:07:44.970

来自`MySQL 8.0 Reference Manual`

> SHOW PROFILE 和 SHOW PROFILES 语句已弃用，将在未来的 MySQL 版本中删除。改用性能模式

# php - 通过字母键清理 php 数组

> ID：14413823
> 
> 赞同：0
> 
> 时间：2013-01-19T11:24:37.860
> 
> 标签：php, arrays

我正在从作为数组返回的 xls 文档中提取数据。然而，数组键不是数字，而是类似于单元格列的字母数字。所以有效地我有一个这样的数组：

```
 // Example array:
  $array = array(
        [0] => array(
              "A" => "Name",
              "B" => "Surname",
              "C" => "",
              "D" => "Telephone"
        ),
        [1] => array(
              "A" => "Name",
              "B" => "Surname",
              "C" => "",
              "D" => "Telephone"
        ),
        [2] => array(
              "A" => "",
              "B" => "",
              "C" => "",
              "D" => ""
        )
  ); 
```

现在返回数组的问题是它根本不过滤数组，并且我可能在行中有行和行中的空值。

我需要一种方法来完全清理数组，以便删除空行和数字，但这可能会给我以后数组一致性带来一些问题。

我正在寻找的是一个函数，它可以通过一个字母数字来切分数组中的行。如此有效的类似 array_chop($array","C"); 然后将有效地从 D 开始取消设置所有剩余行键和值对。

这可能吗？我已经可以使用 php 函数了吗？很抱歉，我无法提供示例代码，但我不知道从哪里开始。该数组非常大，因此我正在寻找一种内存高效的解决方案。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:47:53.850

如果您只想复制列的一小部分，这必须是有效的：

```
<?php
$array = array(
      0 => array(
            "A" => "Name",
            "B" => "Surname",
            "C" => "",
            "D" => "Telephone"
            ),
      1 => array(
            "A" => "Name",
            "B" => "Surname",
            "C" => "",
            "D" => "Telephone"
            ),
      2 => array(
            "A" => "",
            "B" => "",
            "C" => "",
            "D" => ""
            )
      );

$last_column = 1;

$n = count($array);
for ($i = 0; $i < $n; ++$i)
{
      $copy = array();
      $j = 0;
      foreach($array[$i] as $key => $value)
      {
            if ($j <= $last_column)
            {
                  $copy[$key] = $value;
                 ++$j;
            }
            else
            {
                  $array[$i] = $copy;
                  break;
            }
      }
}

var_dump($array); 
```

这仅在矩阵中留下姓名和姓氏：

```
array(3) {
  [0]=>
  array(2) {
    ["A"]=>
    string(4) "Name"
    ["B"]=>
    string(7) "Surname"
  }
  [1]=>
  array(2) {
    ["A"]=>
    string(4) "Name"
    ["B"]=>
    string(7) "Surname"
  }
  [2]=>
  array(2) {
    ["A"]=>
    string(0) ""
    ["B"]=>
    string(0) ""
  }
} 
```

# jquery - Fancybox 2 从 fancybox iframe 加载另一个内容

> ID：14413824
> 
> 赞同：0
> 
> 时间：2013-01-19T11:25:06.770
> 
> 标签：jquery, iframe, joomla, resize, fancybox

我正在使用 fancybox 2（在 joomla 3 上）

我正在尝试达到以下效果：

我有一个目录页面，其中包含使用`data-fancybox-type="iframe" rel="cars"` 加载的新项目在fancybox iframe 中打开的项目，其中包含带有完整jquery 和fancybox 链接的doctype 和head 元素。iframe 很小，300x650 像素，由少量缩略图和文本组成。我正在尝试实现某种方法，以-单击其中一个缩略图-启动完整图像（800x800px）：a）而不是打开的iframe（如果关闭并使用gouping打开完整图像，关闭图像并且iframe来了返回）b）在内部加载图像但拉伸父iframe，关闭图像后将其拉伸回原始大小。这些工作中的任何一个，其想法是打开一个从相当小的 iframe 触发的小型图像库（如果它更大，那么图像在里面加载没有问题）

我将此代码用于父级：（我尝试过使用宽度、高度：70% 或任何其他值）

```
$(".iframe_launch").fancybox({

    fitToView   : false,
    autoSize    : true,
    closeClick  : false,
    closeEffect : 'none',
    openEffect      : 'elastic',
    padding     : 0,
    scrolling   : 'visible',
    scrollOutside   : 'no'

}); 
```

这对于加载的内容：

```
$(".thumbs").fancybox({
    maxWidth    : 900,
    maxHeight   : 805,
    fitToView   : false,
    autoSize    : true,
    closeClick  : false,
    closeEffect : 'elastic',
    openEffect      : 'elastic',
    padding     : 0,
    scrolling   : 'visible',
    scrollOutside   : 'no'
}); 
```

我有针对

```
parent.$(".thumbs").fancybox({
        maxWidth    : 900,
        maxHeight   : 805,
(...) 
```

以及来自 stackoverflow 的其他一些解决方案，但无法获得令人满意的结果。顺便提一句。不一定非要花哨的盒子，但`'elastic'`开口就完美了

# iphone - 是否可以跟踪 ios 设备？

> ID：14413825
> 
> 赞同：0
> 
> 时间：2013-01-19T11:25:13.103
> 
> 标签：iphone, ios, google-maps, tracking

是否可以使用 PhoneNumber 或 UDID 或 IMEI 号码跟踪任何 iOS 设备以在谷歌地图中显示设备。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:27:21.417

安装“查找我的 iPhone”并使用 iCloud。当我骑自行车时，我的妻子用它来查看我在哪里。当我在房子周围丢失它时，我用它来 ping iPhone。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:31:50.377

我敢肯定，如果不使用私有框架，您将无法获得 iPhone 的 IMEI，如果这样做，您将被自动拒绝。
通常，当移动开发者想要一些唯一的 id 时，解决方案是询问用户的电子邮件地址。如果您真的想区分用户设备，您可以创建一些随机的 UDID，并将其保存在应用首选项中。

# maven-assembly-plugin - 我在 maven 中的程序集插件没有归档我最终 jar 中的所有工件，有时它会，有时它不会，我很困惑

> ID：14413826
> 
> 赞同：1
> 
> 时间：2013-01-19T11:25:16.923
> 
> 标签：maven-assembly-plugin

m 在修复中......不用说 m 对 maven 很陌生

谷歌搜索了一些东西并创建了一个多模块项目.....我使用标记到我的主 POM 的 assembly.xml 将所有模块工件 *.jar 归档到最终的 si-installer.jar 中。

## 这是我的主人 pom 的样子

```
 <modules>
    <module>si_config_support/src/main/java/com/tcs/bancs/si</module>
    <module>SI_CORE/src/main/xsd</module>
    <module>SI_CORE/src/main/java/com/tcs/bancs/si/core</module>
    <module>SI_CORE/src/main/java/com/tcs/bancs/si/impl/adapter/jmsadapter</module>
    <module>SI_CORE/src/main/java/com/tcs/bancs/si/impl/actions</module>
    <module>SI_CORE/src/main/java/com/tcs/bancs/si/core/process/message</module>
    <module>SI_CORE/src/main/java/com/tcs/bancs/si/main</module>
</modules>

<build>
    <extensions>
        <extension>
            <groupId>org.apache.maven.wagon</groupId>
            <artifactId>wagon-ssh</artifactId>
            <version>1.0-beta-7</version>
        </extension>
    </extensions>  

    <plugins>
        <plugin>

<groupId>org.codehaus.mojo</groupId>  
<artifactId>wagon-maven-plugin</artifactId>  
<version>1.0-beta-3</version>  
  <executions>
    <execution>
      <id>upload-javadoc</id>
      <phase>deploy</phase>
      <goals>
        <goal>upload</goal>
      </goals>
      <configuration>
        <serverId>InBlrBnc107</serverId>
        <fromDir>/home0/u485309/User/Maven_SonarTest/target</fromDir>
        <includes>*.jar</includes>
        <excludes>pom.xml</excludes>
        <url>http://172.19.97.248:8081/artifactory/simple</url>
        <toDir>SIDeployment/Service-Integrator/si-main</toDir>
      </configuration>
      </execution>
    </executions>
    </plugin>

        <!--plugin>
    <groupId>org.apache.maven.plugins</groupId> 
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.6</version>
    <executions>
      <execution>
        <phase>deploy</phase>
        <configuration>
          <target>
            <scp file="/home0/u485309/User/Maven_SonarTest/target/si-installer-9.0.jar" todir="sidevperf:password@172.19.98.18:/home/sidevperf/USERS" trust="true"/>
          </target>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
     <dependencies>
          <dependency>  
            <groupId>ant-jsch</groupId>  
            <artifactId>ant-jsch</artifactId>  
            <version>1.8.1</version>  
        </dependency> 

        <dependency>          
            <groupId>com.jcraft</groupId>           
            <artifactId>jsch</artifactId>          
            <version>0.1.42</version>       
       </dependency>  
     </dependencies> 
  </plugin-->

        <plugin>
            <groupId>org.apache.maven.plugins</groupId> 
            <artifactId>maven-install-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <createChecksum>true</createChecksum>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId> 
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <appendAssemblyId>false</appendAssemblyId>
                <finalName>si-installer-9.0</finalName>
                <descriptors>
                    <descriptor>si-assembly.xml</descriptor>
                </descriptors>
                <attach>false</attach>
                <archive>
                    <manifest>
                        <mainClass>com.tcs.mswitch.installer.Install</mainClass>
                    </manifest>
                </archive>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>install</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.basedir}/installer/thirdparty-lib</outputDirectory>
                        <overWriteIfNewer>true</overWriteIfNewer>
                        <includeScope>provided</includeScope>
                        <outputAbsoluteArtifactFilename>true</outputAbsoluteArtifactFilename>
                    </configuration>
                </execution>    
            </executions>
        </plugin> 
```

## 我的 si 程序集是这样的：

```
<assembly>
<id>Service-Integrator</id>
<formats>
    <format>jar</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>

<fileSets>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/si_config_support/src/main/java/com/tcs/bancs/si/target</directory>
        <outputDirectory>SI_COMPONENTS/lib</outputDirectory>
        <includes>
            <include>si-config-support-9.0.jar</include>
        </includes>
    </fileSet>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/SI_CORE/src/main/xsd/target</directory>
        <outputDirectory>SI_COMPONENTS/lib</outputDirectory>
        <includes>
            <include>si-config-9.0.jar</include>
        </includes>
    </fileSet>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/SI_CORE/src/main/java/com/tcs/bancs/si/core/target</directory>
        <outputDirectory>SI_COMPONENTS/lib</outputDirectory>
        <includes>
            <include>si-core-9.0.jar</include>
        </includes>
    </fileSet>

    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/SI_CORE/src/main/java/com/tcs/bancs/si/impl/adapter/jmsadapter/target</directory>
        <outputDirectory>SI_COMPONENTS/lib</outputDirectory>
        <includes>
            <include>si-jms-adapter-9.0.jar</include>
        </includes>
    </fileSet>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/SI_CORE/src/main/java/com/tcs/bancs/si/impl/actions/target</directory>
        <outputDirectory>SI_COMPONENTS/lib</outputDirectory>
        <includes>
            <include>si-processing-actions-9.0.jar</include>
        </includes>
    </fileSet>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/SI_CORE/src/main/java/com/tcs/bancs/si/core/process/message/target</directory>
        <outputDirectory>SI_COMPONENTS/lib</outputDirectory>
        <includes>
            <include>si-message-processor-9.0.jar</include>
        </includes>
    </fileSet>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/SI_CORE/src/main/java/com/tcs/bancs/si/main/target</directory>
        <outputDirectory>SI_COMPONENTS/lib</outputDirectory>
        <includes>
            <include>si-main-9.0.jar</include>
        </includes>
    </fileSet>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/installer/groovy-dependencies</directory>
        <outputDirectory/>
        <includes>
            <include>**/*</include>
        </includes>
        <!--excludes>
            <exclude>META-INF/**/*</exclude>
        </excludes-->
    </fileSet>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/installer/thirdparty-lib</directory>
        <outputDirectory>SI_COMPONENTS/thirdparty-lib</outputDirectory>
        <includes>
            <include>*.jar</include>
        </includes>
        <excludes>
            <exclude>bancsjmx-2.0.jar</exclude>
            <exclude>xsd.jar</exclude>
        </excludes>
    </fileSet>
    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/installer/thirdparty-lib</directory>
        <outputDirectory>SI_COMPONENTS/lib</outputDirectory>
        <includes>
            <include>bancsjmx-2.0.jar</include>
            <!--include>xsd.jar</include-->
        </includes>
    </fileSet>

    <fileSet>
        <directory>/home0/u485309/User/Maven_SonarTest/DeliveryComponents</directory>
        <outputDirectory>SI_COMPONENTS</outputDirectory>
        <includes>
            <include>**/*</include>
        </includes>
    </fileSet>
</fileSets> 
```

我有两个问题-：

1）我的所有阶段都针对每个模块运行，因此我的 si-installer.jar 将是我的最终 jar 为所有模块创建，并且 ant 任务也为所有模块运行..也使用 wagon 上传到工件发生所有阶段？只有在所有子模块的编译完成后，我才能停止像包和部署这样的阶段运行？

2）我的最终工件 jar si-installer.jar 有时包含我所有的子模块 jar，而在其他时候只有一个 jar（最后在 assembly.xml 的文件集中提到的 bancsjmx.jar）进入最终工件 si-installer.jar哪个是 assembly.xml 中的 bancsjmx.jar，我很困惑？这种行为也是零星的……有时我把我所有的罐子都放在最后一个罐子里……有时我只说一个……好像 maven 做了一些多线程的东西……文慢了就好了！！！请帮忙

以前有人遇到过这样的问题吗？

# python - 编写此程序的更好方法

> ID：14413832
> 
> 赞同：1
> 
> 时间：2013-01-19T11:26:05.630
> 
> 标签：python

我已经从 java 程序转换了以下代码块。我怎样才能`Map`用他们的名字而不是他们的身份证来写国家的名字？

```
from collections import defaultdict
colors = ['Red', 'Yellow', 'Green', 'Blue']
mapColors = defaultdict(str)

def okToColor(Map ,country, color):
    for c in Map[country]:
        if mapColors[c] == color: return False
    return True

def explore(Map, country, color):
    if country >= len(Map): return True
    if okToColor(Map, country, color):
        mapColors[country] = color
        for color in colors:
            if explore(Map, country + 1, color): return True
    return False

def printMap():
    for c in mapColors:
        print c, mapColors[c]

Map = [[1, 4, 2, 5], [0, 4, 6, 5], [0, 4, 3, 6, 5], [2, 4, 6],
        [0, 1, 6, 3, 2], [2, 6, 1, 0], [2, 3, 4, 1, 5]]
result = explore(Map, 0, 'Red')
print result
printMap() 
```

我不希望地图是这样的图表：

```
Map = { 'A':['B', 'C'], 'B':['A','D'], ...} 
```

其中 A、B、C、D 是国家的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:54:21.493

主要思想是定义`countries`数字索引和数字索引之间的映射：

```
countries = ['A', 'B', 'C', 'D', 'E', 'F', 'G']
cindex = dict(zip(countries, range(len(countries))))
# {'A': 0, 'B': 1, 'C': 2, 'D': 3, 'E': 4, 'F': 5, 'G': 6} 
```

然后，只需稍作改动，您就可以使用您的原始代码。以前`country`是数字索引，现在您`cindex[country]`在需要数字索引时放置。

并且当您需要反转映射时，`countries[index]`会为您提供国家/地区的字符串名称。

* * *

```
from collections import defaultdict

colors = ['Red', 'Yellow', 'Green', 'Blue']
mapColors = defaultdict(str)

def okToColor(Map, country, color):
    for c in Map[country]:
        if mapColors[c] == color:
            return False
    return True

def explore(Map, country, color):
    if cindex[country] >= len(Map):
        return True
    if okToColor(Map, country, color):
        mapColors[country] = color
        for color in colors:
            try:
                next_country = countries[cindex[country] + 1]
            except IndexError:
                return True
            if explore(Map, next_country, color):
                return True
    return False

def printMap():
    for c in mapColors:
        print c, mapColors[c]

countries = ['A', 'B', 'C', 'D', 'E', 'F', 'G']
cindex = dict(zip(countries, range(len(countries))))
Map = [[1, 4, 2, 5], [0, 4, 6, 5], [0, 4, 3, 6, 5], [2, 4, 6],
      [0, 1, 6, 3, 2], [2, 6, 1, 0], [2, 3, 4, 1, 5]]
Map = {countries[idx]: [countries[n] for n in item] for idx,
       item in enumerate(Map)}
result = explore(Map, 'A', 'Red')
print(result)
printMap() 
```

产量

```
True
A Red
C Yellow
B Yellow
E Green
D Red
G Blue
F Green 
```

# assembly - 常春藤桥上RDRAND的用尽特性是什么？

> ID：14413839
> 
> 赞同：12
> 
> 时间：2013-01-19T11:26:40.017
> 
> 标签：assembly, x86, x86-64, intel, rdrand

在查看了[英特尔数字随机数生成器 (DRNG) 软件实施指南](http://software.intel.com/en-us/articles/intel-digital-random-number-generator-drng-software-implementation-guide)`RDRAND`后，我对调用生成器的内部状态会发生什么有一些疑问。不幸的是，答案似乎不在指南中。

1.  根据该指南，在 DRNG 内部有四个 128 位缓冲区，用于提供随机位以`RDRAND`进行排空。`RDRAND`本身将根据目标寄存器的宽度提供 16、32 或 64 位随机数据​​：

    ```
    rdrand ax   ; put 16 random bits in ax
    rdrand eax  ; put 32 random bits in eax
    rdrand rax  ; put 64 random bits in rax 
    ```

    使用更大的目标寄存器会更快地清空那些 128 位缓冲区吗？例如，如果我只需要 2 位随机性，我应该经历使用 16 位寄存器而不是 64 位寄存器的麻烦吗？这会对 DRNG 的吞吐量产生任何影响吗？我想避免消耗不必要的随机性。

2.  该指南说进位标志将在`RDRAND`执行后设置：

    ```
    CF = 1   Destination register valid. Non-zero random value
             available at time of execution. Result placed in register.
    CF = 0   Destination register all zeros. Random value not available
             at time of execution. May be retried. 
    ```

    “不可用”是什么意思？随机数据是否会因为`RDRAND`调用过快耗尽那些 128 位缓冲区而无法使用？或者不可用是否意味着 DRNG 未通过健康检查并且无法生成任何新数据？`RDRAND`基本上，我试图了解 CF=0 是否会因为调用时缓冲区碰巧（暂时）为空而发生。

注意：我已经查看了[有关 RDRAND 吞吐量和延迟的问题的](https://stackoverflow.com/questions/10484164/what-is-the-latency-and-throughput-of-the-rdrand-instruction-on-ivy-bridge)[答案](https://stackoverflow.com/a/11042778/1899721)，但我正在寻找不同的信息。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-21T17:11:21.643

**第 1 部分。拉 16、32 或 64 位有区别吗？**

不。

在 Ivy Bridge 上，无论目标寄存器的大小如何，CPU 内核都会通过内部通信链路将 64 位拉到 DRNG。因此，如果您读取 32 位，它会提取 64 位并丢弃上半部分。如果您读取 16 位，它会拉出 64 位并丢弃前 3/4 位。

这在说明文档中没有描述，因为在未来的产品中可能不会继续如此。可能会设计一个芯片来存储和使用 64 位字的未使用部分。但是，今天执行此操作并没有显着的性能要求。

对于最高吞吐量，最有效的策略是从并行线程中拉取。这是因为片上总线层次结构中存在并行性。指令的大部分时间是通过公共汽车的运输时间。并行执行该传输将导致吞吐量随线程数线性增加，最高可达 800MBytes/s。第二件事是使用 64 位 RdRands，因为它们每条指令获得更多数据。

**第 2 部分。 CF=0 的真正含义是什么？**

这意味着“随机数据不可用”。这是因为如果 CPU 内核没有关闭并读取更多寄存器，CPU 内核就无法获得它无法获取数字的详细信息，而它不会这样做，因为它对这些信息无能为力。

如果您将 DRNG 的输出缓冲区吸干，您将得到下溢 (CF=0)，但您可以预期下一个 RdRand 会成功，因为 DRNG 速度很快。

如果 DRNG 失败（例如，熵源中的晶体管突然爆裂并且不再是随机的），那么在线健康测试将检测到这一点并关闭 DRNG。那么你所有的 RdRand 调用都会产生 CF=0。

但是在 Ivy Bridge 上，您将无法使缓冲区下溢。DRNG 比它所连接的总线快一点。每单位时间提取更多数据（使用并行线程）的效果将是增加每个单独 RdRand 的执行时间，因为总线上的争用导致指令必须在 DRNG 的本地总线上排队等待。你永远不能拉得如此之快，以至于 DRNG 会下溢。您将逐渐达到 800 MBytes/s。

这也没有在文档中描述，因为它可能不会在未来的产品中继续存在。我们可以设想总线更快、内核更快并且 DRNG 能够下溢的产品。这些事情尚不为人所知，因此我们无法对它们发表声明。

仍然正确的是，软件实现者指南中给出的基本循环（最多尝试 10 次，然后报告堆栈失败）将继续在未来的产品中工作，因为我们已经声明它会如此等等我们将设计所有未来的产品来满足这一点。

所以不，CF=0 不会发生，因为在 Ivy Bridge 上“调用 RDRAND 时缓冲区碰巧（暂时）为空”，但它可能会发生在未来的硅片上，所以设计你的软件来应对。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T06:36:23.973

不要将任何内容读入 DRNG 输出中的 4*128 位 FIFO。它肯定在那里（我把它放在那里），但它不是具有软件可见效果的东西。DRNG 背后的逻辑不能顺利生成数据。它有时会根据 SP800-90 规范安排其他事情，例如重新播种或调节。所以负载下的数据流是不规则的。

选择缓冲区长度 4 是因为在 800MBytes/s（本地连接总线的速度）下，考虑到最坏情况的调度偏移，在以最大速率拉动时，4 的深度足以防止下溢，因此有一个恒定、平滑的 800MByte /s 供应，不会中断输出。

如果连接的总线较慢，则缓冲区会更短，因为较短的缓冲区足以防止下溢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T07:47:23.843

关于2： [http](http://download.intel.com/products/processor/manual/253665.pdf) : //download.intel.com/products/processor/manual/253665.pdf，7.3.17

CF 表示对随机数据的需求超过了 DRNG 的吞吐量。

关于1：

如果是你关心的性能，为什么不从 DRNG 中读取 64 位随机值，然后你可以从那 32 次中读取 2 位，然后才需要再次调用指令。您不必每次需要位时都调用 new rdrand。

# ios - iOS - 无法打开文件“XXX-XXX ...”，因为没有这样的文件

> ID：14413842
> 
> 赞同：6
> 
> 时间：2013-01-19T11:27:23.927
> 
> 标签：ios, xcode

我正在开发一个 iOS 应用程序，突然 xcode 显示此错误。控制台中没有任何错误日志。应用程序崩溃，当我使用“继续程序执行”xcode 按钮时，文件名发生了变化。 ![在此处输入图像描述](../Images/68a8ab89f517f70b04be8bca8252cda1.png)

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T14:06:57.680

您是否尝试过通过 Product -> Clean 清理您的构建？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T02:11:11.090

我有一个类似的问题。我的问题是一些出口仍然指向不存在的财产。在模拟器中它仍然显示正确的错误（此类不符合 bla bla 的键值）。在 iPhone 上，错误消息以某种方式变成了这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T18:01:16.840

确认您是否已将文件添加到项目目标。清理您的项目并再次构建。

# php - htaccess AddHandler 全部？

> ID：14413845
> 
> 赞同：0
> 
> 时间：2013-01-19T11:27:44.430
> 
> 标签：php, apache, .htaccess, include, addhandler

我正在尝试向**所有**网站文件注入跟踪代码。在谷歌搜索了一段时间后，我找到了一个从*.htaccess中执行此操作*[的教程](http://resurrectionwebdesign.com/tips/injecting-google-analytics-without-changing-files)*。这就是它的工作原理*

 *```
Options +Includes
AddHandler server-parsed .html
AddHandler application/x-httpd-php .html
php_value auto_prepend_file /var/www/to_include.php
php_value auto_append_file /var/www/to_include2.php 
```

`to_include.php`有一个php`ob_start()`来缓冲页面内容并将我的代码添加到其中，并且`to_include2.php`将`ob_end_flush()`其放在页面末尾...

到目前为止这很好，但它并不适用于每个文件..

我不是 htaccess 专家，但正如您看到的第二行和第三行所说

```
AddHandler server-parsed .html
AddHandler application/x-httpd-php .html 
```

它说仅将其应用于 .php 和 .html 文件，我该如何使用`AddHandler`来处理所有类型的文件，包括 apache 目录.. 它没有扩展名，但我也想要一些对网站上每个访问的页面执行此操作的行，

我的目标是跟踪网站上的所有动作并将*谷歌分析*注入每个文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T12:45:10.177

你需要什么服务器解析的文件？

你试过了`AddHandler application/x-httpd-php .*`吗？

无论如何，如果它不起作用，请考虑不同的解决方案。 `mod_rewrite`也可能有帮助，将 * 重定向到您的脚本，...

.htaccess 文件通常只适用于它的目录和子目录，确保它在根目录中。*

# javascript - 来自字符串的Jquery JSON数组

> ID：14413847
> 
> 赞同：0
> 
> 时间：2013-01-19T11:28:03.010
> 
> 标签：javascript, jquery, arrays, json, string

我在 Jquery 代码中有这样的数组：

```
var marr = new Array();

marr[0] = new Object();
marr[0]["name"] = "Spot 1";
marr[0]["value"] = 20;

marr[1] = new Object();
marr[1]["name"] = "Spot 2";
marr[1]["value"] = 70; 
```

如何将此数组表示为（或多或少）用户友好的字符串（以使用户能够将一些值作为插件选项发送）。比将它解析回 jquery 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:53:32.530

您可以从`marr`数组中生成一个 JSON 字符串。它可能已经给了你你正在寻找的东西。

```
> console.log(JSON.stringify(marr));
[
    {
        "name": "Spot 1",
        "value": 20
    },
    {
        "name": "Spot 2",
        "value": 70
    }
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T11:30:52.363

像这样的东西？

```
var marr = [ {"name": "Spot 1", "value":20}, {"name": "Spot 2", "value":70} ]; 
```

这与您上面提到的代码相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T11:58:29.280

这将是数组的 json 表示

```
var marr=[
         {"name":"spot 1","value":20}
         {"name":"spot 2","value":70}
         ] 
```

# php - 无法比较空字符串

> ID：14413849
> 
> 赞同：6
> 
> 时间：2013-01-19T11:28:06.347
> 
> 标签：php

我的代码：

```
$disabled = $this->access->get_access('disable_header');
$emptyString = '';
var_dump($emptyString);
var_dump($disabled[0]);
if($disabled[0] == '') die('should be here');
if($disabled[0] == ' ') die('should be here');
die('stop'); 
```

结果是：

```
string(0) "" string(1) "" stop 
```

我所有的条件都失败了，我不知道为什么..
但是如果我使 $emptyString 条件：

```
if($emptyString == '') die('should be here'); 
```

它给了我结果：

```
should be here 
```

如果您看到 $dislabled[0] 和 $emptyString 具有相同的空字符串，但长度不同，如果我将 $emptyString 长度设为 1，则：

```
$disabled = $this->access->get_access('disable_header');
$emptyString = ' ';
var_dump($emptyString);
var_dump($disabled[0]);
if($disabled[0] == '') die('should be here');
if($disabled[0] == ' ') die('should be here');
die('stop'); 
```

变得 ：

```
string(1) " " string(1) "" stop 
```

我仍然无法比较 $disable[0]

我错过了什么？

====如何解决===

首先我尝试

```
mb_detect_encoding($disabled[0]); 
```

然后给我结果

```
ASCII 
```

然后我尝试：

```
var_dump(hexdec($disabled[0])) 
```

然后给我结果：

```
int(9) 
```

我去 ascii 表和 9 = TAB 键

那么现在我提出条件：

```
if(strcmp($disabled[0],'')) die('should be here'); 
```

tadaaa .. 它显示：

```
should be here 
```

我认为 strcmp 可以适用于所有输入、制表符和空格键值。我认为有什么错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T04:02:55.067

我认为

```
if(empty($disabled[0])) die('should be here'); 
```

是使用 PHP 检查变量是否为空的更好方法。

`""`或`" "`用于 JavaScript。

# android - 如何将图像保存到 SD 卡以节省应用程序的空间？

> ID：14413851
> 
> 赞同：0
> 
> 时间：2013-01-19T11:28:13.147
> 
> 标签：android, android-image, android-drawable

这是我的问题：我正在开发一个需要大量图像的应用程序。现在我希望图像成为 APK 文件的一部分，但我非常想将它们全部移动到 SD 卡上，这样我的应用程序就不会占用 20-30Mb 的手机存储空间。至于现在图像都在`drawables`文件夹中，但我想知道是否可以将它们全部移动到 SD 卡（例如在安装后第一次启动时）并将它们从手机的存储中删除？

也许使用`assets`？

如果你们中的任何人想到一个很好的机制来实现这一点，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:38:15.000

您不应将图像与应用程序本身捆绑在一起。相反，当用户首次启动您的应用程序时下载它们并将它们保存到外部存储中。

即使您将图片从 Assets 文件夹复制到外部存储，您的应用程序仍会在内部存储上占用相同数量的空间，因为 assets 文件夹在编译后无法修改。它是只读的。所以实际上你最终会得到相同数据的两个副本，并消耗更多的空间。

您还可以考虑允许用户[将您的应用程序移动到外部存储](http://developer.android.com/guide/topics/data/install-location.html)。请记住，启用此功能并卸载外部存储时，某些应用程序将停止正常运行。

# ios - iOS：在 UIScrollView 中水平自动调整组件大小

> ID：14413852
> 
> 赞同：0
> 
> 时间：2013-01-19T11:28:20.413
> 
> 标签：ios, objective-c, uiscrollview, autoresizingmask, nslayoutconstraint

我有一个`UIScrollView`包含不同组件的选择。根据设备是处于横向模式还是纵向模式，某些组件可能会水平越过边缘。我想要实现的是组件水平自动调整大小但垂直保持不变（即不再需要水平滚动）的设置。

我已经修复了，`UIScrollView`所以它们只能垂直滚动。问题是现在滚动视图中的内容没有在水平方向上调整大小（正如我猜的那样）。

我在网上浏览并尝试了一些解决方案，但是我找不到一种方法来使内部的组件在`UIScrollView`水平方向上自动调整大小，但在垂直方向上保持不变。

请任何人都可以建议这是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:33:34.643

```
//for the scrollView set the below property.
[scrollView setAutoresizesSubviews:YES];
//then for every subView of your scrollView set the below property.
[subView setAutoresizingMask:UIViewAutoresizingFlexibleWidth]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T07:56:40.793

您可以使用

```
[scrollview setAutoresizesSubviews:YES];
[subview setAutoresizingMask:UIViewAutoresizingFlexibleWidth]; 
```

或点击此链接寻求帮助

[https://developer.apple.com/library/ios/technotes/tn2154/_index.html](https://developer.apple.com/library/ios/technotes/tn2154/_index.html)

# php - 联系文件不起作用

> ID：14413854
> 
> 赞同：0
> 
> 时间：2013-01-19T11:28:28.157
> 
> 标签：php, javascript, html

在我的网站上，我有一个自动联系公式，它在我的本地主机服务器上运行，但如果我将文件加载到我的服务器上，它将无法工作。似乎提交不起作用，它不会抛出错误消息，它只是重新加载页面。我已经做了很多代码审查，但直到现在才发现任何问题。对我来说奇怪的是，代码可以在我的本地主机上运行，​​但不能在服务器上运行......

你可以在这里自己测试：

```
http://144.76.1.46/RequestStream.php 
```

这是代码：

```
<?php 
$your_email ='censored@gmail.com';

session_start();
$errors = '';
$name = '';
$visitor_email = '';
$user_message = '';

if(isset($_POST['Submit']))
{

    $name = $_POST['name'];
    $visitor_email = $_POST['email'];
    $user_message = $_POST['message'];
    ///------------Do Validations-------------
    if(empty($name)||empty($visitor_email))
    {
        $errors .= "\n Name and Email are required fields. ";   
    }
    if(IsInjected($visitor_email))
    {
        $errors .= "\n Bad email value!";
    }
    if(empty($_SESSION['6_letters_code'] ) ||
      strcmp($_SESSION['6_letters_code'], $_POST['6_letters_code']) != 0)
    {
    //Note: the captcha code is compared case insensitively.
    //if you want case sensitive match, update the check above to
    // strcmp()
        $errors .= "\n The captcha code does not match!";
    }

    if(empty($errors))
    {
        //send the email
        $to = $your_email;
        $subject="New form submission";
        $from = $your_email;
        $ip = isset($_SERVER['REMOTE_ADDR']) ? $_SERVER['REMOTE_ADDR'] : '';

        $body = "A user  $name submitted the contact form:\n".
        "Name: $name\n".
        "Email: $visitor_email \n".
        "Message: \n ".
        "$user_message\n".
        "IP: $ip\n";    

        $headers = "From: $from \r\n";
        $headers .= "Reply-To: $visitor_email \r\n";

        mail($to, $subject, $body, $headers);

        header('Location: thank-you.html');
    }
}

// Function to validate against any email injection attempts
function IsInjected($str)
{
     // censored
  }
  else
    {
    return false;
  }
}
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
<head>
    <title>Contact Us</title>   
<!-- a helper script for vaidating the form-->
<script language="JavaScript" src="censored" type="text/javascript"></script>   
</head>

<body>
<?php
if(!empty($errors)){
echo "<p class='err'>".nl2br($errors)."</p>";
}
?>
<div id='contact_form_errorloc' class='err'></div>
<form method="POST" name="contact_form" 
action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>"> 
<p>
<label for='name'>Streamname: </label><br>
<input type="text" name="name" value='<?php echo htmlentities($name) ?>'>
</p>
<p>
<label for='email'>Your Email: (for possible further queries) </label><br>
<input type="text" name="email" value='<?php echo htmlentities($visitor_email) ?>'>
</p>
<p>
<label for='message'>Streamlink and explanation why he should be listed on Lol Streamgalleries: (preferably with links to reliable sources (such as leagepedia for example)</label> <br>
<textarea name="message" rows=8 cols=30><?php echo htmlentities($user_message) ?></textarea>
</p>
<p>
<img src="html-contact-form-captcha/captcha_code_file.php?rand=<?php echo rand(); ?>" id='captchaimg' ><br>
<label for='message'>Enter the code above here :</label><br>
<input id="6_letters_code" name="6_letters_code" type="text"><br>
<small>Can't read the image? click <a href='javascript: refreshCaptcha();'>here</a> to refresh</small>
</p>
<input type="submit" value="Submit" name='submit'>
</form>
<script language="JavaScript">
// Code for validating the form
// Visit http://www.javascript-coder.com/html-form/javascript-form-validation.phtml
// for details
var frmvalidator  = new Validator("contact_form");
//remove the following two lines if you like error message box popups
frmvalidator.EnableOnPageErrorDisplaySingleBox();
frmvalidator.EnableMsgsTogether();

frmvalidator.addValidation("name","req","Please provide your name"); 
frmvalidator.addValidation("email","req","Please provide your email"); 
frmvalidator.addValidation("email","email","Please enter a valid email address"); 
</script>
<script language='JavaScript' type='text/javascript'>
function refreshCaptcha()
{
    var img = document.images['captchaimg'];
    img.src = img.src.substring(0,img.src.lastIndexOf("?"))+"?rand="+Math.random()*1000;
}
</script>
</body>
</html> 
```

编辑：错误控制台帮助了我一点，javascript文件有一个参考错误，现在修复它，但遗憾的是仍然无法工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:34:13.420

你命名你的按钮`submit`，但检查`$_POST['Submit']`

尝试`isset($_POST['submit'])`

或者

```
$_POST['submit'] == 'Submit' 
```

# c# - 实体框架到列表<>？

> ID：14413856
> 
> 赞同：1
> 
> 时间：2013-01-19T11:29:15.470
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我使用实体框架并具有以下代码：

```
public class AdvPackageInfo
{
    private int PackageId;
    private string Caption;
    private int Duration;
    private int Count;
    private bool Enable;
    private float Price;
}

 AdvertismentAgancyEntities enn = new AdvertismentAgancyEntities();

 List<AdvPackageInfo> lst = (from s in enn.Tbl_AdvPackage select new AdvPackageInfo { }).ToList();

    repeater1.DataSource = lst;
    repeater1.DataBind(); 
```

但它只工作 1 次，当我的页面第二次加载时，它执行失败并引发 NullReferenceException ......！！

根据这个页面： [http](http://connect.microsoft.com/VisualStudio/feedback/details/663200/linq-to-entities-throws-nullreferenceexception-when-the-output-attribute-set-is-empty)
://connect.microsoft.com/VisualStudio/feedback/details/663200/linq-to-entities-throws-nullreferenceexception-when-the-output-attribute-set-is-empty 它是点网框架问题。

我也试试这个代码：

var q = (from s in enn.AdvPackage select s).toList();

但它也不起作用。

有没有更好的方法让 linq 选择列表？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:38:36.777

而不是这一行：

```
List<AdvPackageInfo> lst = 
    (from s in enn.Tbl_AdvPackage select new AdvPackageInfo { }).ToList(); 
```

你可以这样做：

```
var lst = new List<AdvPackageInfo>();
for (int i = 0; i < enn.Tbl_AdvPackage.Count(); i++)
    lst.Add(new AdvPackageInfo()); 
```

（请注意，MS Connect 页面中建议的解决方法是错误的。使用`Enumerable.Repeat`将创建一个包含对*单个*对象的引用的列表）

* * *

**更新下面的评论：** 如果您只是想加载数据网格，那么您只需要将列表检索为：

```
var lst = enn.Tbl_AdvPackage.ToList(); 
```

# php - 如何在javascript中使用json数组

> ID：14413860
> 
> 赞同：1
> 
> 时间：2013-01-19T11:29:39.653
> 
> 标签：php, javascript, html, ajax, json

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

我有一个 javascript，它对一个 php 文件执行 XMLHttp 请求，该文件又查询一个 mysql 表并返回一个 JSON 数组……但不知何故，我无法访问数组的各个元素。这是javascript：

```
<script type="text/javascript">
function show(){
    if(window.XMLHttpRequest){
        xmlhttp=new XMLHttpRequest();
    }
    xmlhttp.onreadystatechange= function () {
        if(xmlhttp.readyState==4 && xmlhttp.status==200){

            var response= new Array();
            response=xmlhttp.response;
            alert(response);
        }
    }
    xmlhttp.open('GET','test.php', true);
    xmlhttp.send();

}
</script> 
```

这是php脚本：

```
mysql_select_db('testpolaroid') or die ('Unable to select database!');
$query = 'SELECT * FROM images';
$result = mysql_query($query) or die ('Error in query: $query. ' . mysql_error());
if(mysql_num_rows($result) > 0)
{
    $row = mysql_fetch_assoc($result);
    echo json_encode($json);
} 
```

我得到的回应是：

```
 {"imageid":"11","location":"11.jpg"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:31:05.580

您需要先使用 解析 JSON `JSON.parse`，代码如下所示：

```
var response = JSON.parse(xmlhttp.responseText);
var imageid = response["imageid"]; 
```

# database - 在 DynamoDB 中设计“social-feed”

> ID：14413861
> 
> 赞同：14
> 
> 时间：2013-01-19T11:29:50.380
> 
> 标签：database, database-design, amazon-web-services, database-schema, amazon-dynamodb

*这个问题可能与任何基于文档的 NoSQL 数据库有关。*

由于可扩展性和无痛管理因素，我正在制作一些特定于兴趣的社交网络并决定使用 DynamoDB。数据库中只有两个主要实体：**用户**和**帖子**。

常见**查询**的要求很简单：

*   家庭动态（我关注的人的动态）
*   我的/用户提要（我的提要，或特定用户提要）
*   我/用户关注的用户列表
*   关注者名单

这是我到目前为止提出的一个数据库方案（图例：`__thisIsHashKey`和`_thisIsRangeKey`）：

```
timeline = { // post 
    __usarname:"totocaster",
    _date:"1245678901345",
    record_type:"collection",
    items: ["2d931510-d99f-494a-8c67-87feb05e1594","2d931510-d99f-494a-8c67-87feb05e1594","2d931510-d99f-494a-8c67-87feb05e1594","2d931510-d99f-494a-8c67-87feb05e1594","2d931510-d99f-494a-8c67-87feb05e1594"],
    number_of_likes:123,
    description:"Hello, this is cool"
} 

timeline = { // new follower 
    __usarname:"totocaster",
    _date:"1245678901345",
    type:"follow",
    follower:"tamuna123"
}

timeline = { // new like 
    __usarname:"totocaster",
    _date:"1245678901345",
    record_type:"like",
    liker:"tamuna123",
    like_date:"123255634567456"
}

users = {
    __username:"totocaster",
    avatar_url:"2d931510-d99f-494a-8c67-87feb05e1594",
    followers:["don_gio","tamuna123","barbie","mikecsharp","bassman"],
    following:["tamuna123","barbie","mikecsharp"],
    likes:[
    {
        username:'barbie',
        date:"123255634567456"
    },
    {
        username:"mikecsharp",
        date:"123255634567456"
    }],
    full_name:"Toto Tvalavadze",
    password:"Hashed Key",
    email:"totocaster@myemailprovider.com"
} 
```

如您所见，我想将所有帖子直接存储在时间线集合中。这样我可以使用日期和用户名（哈希和范围键）查询帖子。一切似乎都很好，*但问题是*：

我无法一口气查询用户时间线。这将是系统最需要的查询之一，我无法提供有效的方法来做到这一点。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-13T23:43:55.997

我碰巧每天都在处理新闻提要。（Stream-Framework 的作者并创立了 getstream.io）

我看到的最常见的解决方案是：

*   卡桑德拉 (Instagram)
*   Redis（昂贵，但简单）
*   MongoDB
*   动态数据库
*   RocksDB（领英）

大多数人要么在写时使用扇出，要么在读时使用扇出。这使得构建一个可行的解决方案变得更容易，但它很快就会变得昂贵。您最好的选择是结合使用这两种方法。因此，在大多数情况下，在写入时进行扇出，但对于非常流行的提要，请将它们保留在内存中。

[Stream-Framework](https://github.com/tschellenbach/stream-framework)是开源的，支持 Cassandra/Redis 和 Python

[getstream.io](https://getstream.io/)是构建在 Go 和 Rocksdb 之上的托管解决方案。

如果您最终使用 DynamoDB，请务必设置正确的分区键： [https ://shinesolutions.com/2016/06/27/a-deep-dive-into-dynamodb-partitions/](https://shinesolutions.com/2016/06/27/a-deep-dive-into-dynamodb-partitions/)

另请注意，基于 Redis 或 DynamoDB 的解决方案将很快变得昂贵。通过利用 Cassandra 或 RocksDB，您将获得最低的每位用户成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:06:42.950

我会查看 Titan 图形数据库 ( [http://thinkaurelius.github.com/titan/](http://thinkaurelius.github.com/titan/) ) 和 Neo4j ( [http://www.neo4j.org/](http://www.neo4j.org/) )。

我知道 Titan 声称可以很好地扩展大型数据集。

最终，我认为您的模型可以很好地映射到图表。用户和帖子将是节点，然后您可以通过边任意连接它们。一个用户（节点）是另一个用户（节点）的朋友（边）。

用户（节点）在其时间轴中有许多帖子（节点）。然后您可以通过图表运行有趣的遍历。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-06T10:01:08.227

您还可以使用非常适合社交网络的Amazon Neptune ( [https://aws.amazon.com/neptune/ ) (Graph DB)。](https://aws.amazon.com/neptune/)我认为 DynomoDB 不是您的用例的好选择。

# ios - 两个 UITableView 的相同 UITableViewDataSource

> ID：14413862
> 
> 赞同：1
> 
> 时间：2013-01-19T11:29:54.257
> 
> 标签：ios, objective-c, uitableview

我正在使用最新的 SDK 和 XCode 4.5.2 开发 iPhone 应用程序。

在 ViewController 我有两个`UITableView`. 两者使用相同`UITableViewDataSource`。我的问题是关于`static NSString* CellIdentifier;`.

我可以执行以下操作吗？

```
- (UITableViewCell* )tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString* CellIdentifier;
    SingletonGlobalVars* singleton = [SingletonGlobalVars sharedInstance];

    if ([tableView isEqual:shopsList])
    {
        CellIdentifier = @"ShopCell";
    }
    else
    {
        CellIdentifier = @"ProductCell";
    }

   [ ... ]
} 
```

我需要改变`CellIdentifier`，但我不知道我是否可以用**静态变量**来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:53:57.840

您的代码可以工作，但在您的情况下使用静态变量没有意义。只需使用局部变量。另请注意，您可以`UITableView`直接比较指针，这里没有必要使用`isEqual`。

```
NSString* cellIdentifier;
if (tableView == shopsList)
{
   cellIdentifier = @"ShopCell";
}
else
{
   cellIdentifier = @"ProductCell";
} 
```

（我假设这`shopsList`是表格视图之一。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T11:46:35.793

静态变量只能赋值一次。

在这种情况下，您可以使用两个不同的 CellIdentifier，例如 -

```
static NSString* CellIdentifierShop = @"ShopCell";
static NSString* CellIdentifierProduct = @"ProductCell"; 
```

请让我知道它是否有效:)

# android - 调试android应用程序终止

> ID：14413864
> 
> 赞同：0
> 
> 时间：2013-01-19T11:30:07.483
> 
> 标签：android, eclipse, debugging

我目前正在实施我的第一个 Android 应用程序。调试和开发通常很好，但有时我在对代码进行一些更改然后从 Eclipse 环境（到虚拟设备）再次启动应用程序时遇到问题。

据我了解，新的开始会终止模拟器中我的应用程序的当前运行版本，这很好 - 但这是正确的终止吗？我的应用程序中是否引发了一些我应该处理的事件？

我为什么要问？我的问题是，对于模拟器中当前处于活动状态的大多数活动，我的应用程序会正确终止（它已经消失）并且新版本可以正常启动。但是对于我的大约 2 个活动，当它们处于活动状态并且我从 Eclipse“重新启动”我的应用程序时，我可以看到几秒钟的消息框“不幸的是 APP 已停止”，这让我知道这些活动可能需要在他们的析构函数，取消初始化某些东西或其他什么，因为终止会导致某种崩溃。如何检测这个，如何调试这个？当我再次启动该应用程序时，旧版本的调试器已断开连接，因此无济于事。我所能看到的只是 logcat 异常调用堆栈信息，但这对我帮助不大：

```
01-19 11:19:16.352: E/AndroidRuntime(1424): FATAL EXCEPTION: main
01-19 11:19:16.352: E/AndroidRuntime(1424): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.app.LoadedApk.makeApplication(LoadedApk.java:504)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4364)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.app.ActivityThread.access$1300(ActivityThread.java:141)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.os.Looper.loop(Looper.java:137)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at java.lang.reflect.Method.invokeNative(Native Method)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at java.lang.reflect.Method.invoke(Method.java:511)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at dalvik.system.NativeStart.main(Native Method)
01-19 11:19:16.352: E/AndroidRuntime(1424): Caused by: java.lang.NullPointerException
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:379)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.app.LoadedApk.getClassLoader(LoadedApk.java:322)
01-19 11:19:16.352: E/AndroidRuntime(1424):     at android.app.LoadedApk.makeApplication(LoadedApk.java:496)
01-19 11:19:16.352: E/AndroidRuntime(1424):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-07T14:25:09.027

调试器问题，应用程序以错误的方式终止，不是真正的问题。

# mysql - MySQL - 在 WHERE 中选择

> ID：14413867
> 
> 赞同：27
> 
> 时间：2013-01-19T11:30:14.270
> 
> 标签：mysql, sql, select

由于某种原因，这不起作用：

```
select substring(rating, instr(rating,',') +1, +2) as val
from users where val = '15'; 
```

它给出了这个错误：

> 错误 1054 (42S22)：“where 子句”中的未知列“val”

那我该怎么做呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-19T11:31:11.020

首先，您不能`ALIAS`在`WHERE`子句上使用。您应该使用该列，

```
SELECT SUBSTRING(rating, INSTR(rating,',') +1, +2) AS val 
FROM   users 
WHERE  SUBSTRING(rating, INSTR(rating,',') +1, +2) = '15' 
```

原因如下：操作顺序是SQL，

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

发生`ALIAS`在该`SELECT`子句之前的`WHERE`子句上。

如果您真的想使用别名，请将其包装在子查询中，

```
SELECT *
FROM
    (
        SELECT SUBSTRING(rating, INSTR(rating,',') +1, +2) AS val 
        FROM   users
    ) s
WHERE   val  = '15' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-09-17T11:03:41.103

你肯定可以用 MySQL，请看下面，刚刚测试过，它工作正常：

```
Select substring(rating, instr(rating,',') +1, +2) as val 
From users 
Having val = '15'; 
```

您还可以执行“让 val 为空”等操作。

使用 ALIAS 不能使用 WHERE，但使用 HAVING 可以解决问题。

H

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T11:38:24.517

`val`没有定义，它只是一个别名。像这样做：

```
SELECT SUBSTRING(rating, INSTR(rating,',') +1, +2) AS val 
FROM   users 
WHERE  SUBSTRING(rating, INSTR(rating,',') +1, +2) = 15 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-11-20T09:49:56.337

您可以使用此查询

```
SELECT SUBSTRING(rating, INSTR(rating,',') +1, +2)
FROM   users 
WHERE  SUBSTRING(rating, INSTR(rating,',') +1, +2) = '15' 
```

# joomla - Joomla 3.0 通用数据库错误处理

> ID：14413872
> 
> 赞同：0
> 
> 时间：2013-01-19T11:31:24.720
> 
> 标签：joomla, joomla2.5, joomla3.0

使用我的扩展从 Joomla 2.5 到 3.0，我正在努力解决如何进行数据库错误处理（因为不推荐使用 GetErrorNum，另请参阅[Joomla！不推荐使用 JDatabase::getErrorNum()，请改用异常处理](https://stackoverflow.com/questions/13967904/joomla-jdatabasegeterrornum-is-deprecated-use-exception-handling-instead)）。

根据上面链接的问题，似乎要采取的方法是为每个代码添加以下`db->query()`代码：

```
if (!$db->query()) {
    throw new Exception($db->getErrorMsg());
} 
```

在我看来，这使得数据库错误处理比以前更加尴尬。到目前为止，我只是`checkDBError()`在 DB 调用之后调用了一个函数，该函数查询 ErrorNum 并相应地处理任何可能的错误。

这与数据库查询的实际触发方式无关——有不同的方法可以做到这一点，并且在错误时会产生不同的结果：错误时`$db->loadResult()`返回`null`，`$db->query()`返回`false`。所以现在将对不同的数据库访问类型进行*不同*的检查。

没有任何通用的方法来处理这个问题，例如告诉 Joomla 在数据库问题上抛出一些异常的方法吗？还是我必须围绕 DatabaseDriver 编写自己的包装器才能实现这一目标？还是我可能遗漏了一些明显的东西？

还是我应该暂时忽略弃用警告并继续使用 getErrorNum()？我想让我的扩展面向未来，但我也不想用笨拙的错误处理逻辑把它弄得过于混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:47:54.217

刚刚发现这个讨论：[https ://groups.google.com/forum/#!msg/joomla-dev-general/O-Hp0L6UGcM/XuWLqu2vhzcJ](https://groups.google.com/forum/#!msg/joomla-dev-general/O-Hp0L6UGcM/XuWLqu2vhzcJ)

正如我所解释的那样，有弃用警告，但无论如何还没有合适的替代品......

除非有人指出任何其他有关如何在 3.0 中执行此操作的适当文档，否则我将继续使用 getErrorNum 方法...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-23T14:36:32.833

获取 getErrorNum() 函数将解决您的问题....

```
 $result = $db->loadResult();

    // Check for a database error.
    if ($db->getErrorNum())
    {
        JFactory::getApplication()->enqueueMessage($db->getErrorMsg());

        return false;
    } 
```

# tabs - 将选项卡添加到页面

> ID：14413876
> 
> 赞同：1
> 
> 时间：2013-01-19T11:31:37.507
> 
> 标签：tabs, facebook-page

我正在尝试将选项卡添加到我管理的页面。我使用网址来做到这一点 - [http://www.facebook.com/dialog/pagetab?app_id=](http://www.facebook.com/dialog/pagetab?app_id=) &next=。

Facebook 显示了我管理的所有页面的列表。并且该下拉列表没有特定的排序顺序。

现在我的问题是 - 我有多个具有相同页面名称的页面。他们当然有不同的网址。我尝试更改页面名称，但由于喜欢的数量很多，我无法更改名称。

我剩下的唯一选择是命中和试用。我必须为 30 多个应用程序这样做。

所以你明白我的痛点。

请建议任何替代方案。

谢谢潘卡伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:51:38.140

我建议写下页面 id 并制作某种系统让自己记住（可能只有最后几位数字）哪个页面是哪个页面。

无论如何，有一种方法可以让您直接将选项卡应用程序添加到页面，而无需看到“添加页面选项卡”对话框。您可以通过 API 完成所有操作。这意味着您将需要您的页面访问令牌，因此请前往[Graph API Explorer](https://developers.facebook.com/tools/explorer/)，确保您单击“获取访问令牌”按钮并标记`manage_pages`权限。

1.  您需要查询`/me/accounts`以获取您管理的所有页面的列表。
    您将看到一个包含页面 ID、名称、类别的列表...我希望您能够在这里更轻松地识别您的页面。拥有后，您需要获取该**`access_token`**页面的 。记录下来——我们几分钟后就需要它。您还需要**页面 id**。

2.  修改以下 URL 以包含我们之前获得的参数 -

`https://graph.facebook.com/PAGE_ID/tabs?app_id=TAB_APP_ID&method=post&access_token=PAGE_ACCESS_TOKEN`

导航到该 URL，如果一切顺利，您将收到一条简单的`true`消息，指示操作成功。

# php - MySQL 代替 PHP 会话

> ID：14413883
> 
> 赞同：0
> 
> 时间：2013-01-19T11:32:22.467
> 
> 标签：php, mysql, authentication, session-cookies

我应该使用什么方法来保持我的用户的登录状态，比如 google 的 gmail？（如果您愿意，您几乎可以无限期地保持登录状态 - 保持登录功能 - 即使您的 IP 在会话中更改，gmail 仍然可以识别您）。

PHP 会话一直持续到浏览器关闭（或 1440 秒），即使使用`session_set_cookie_parameters()`我不知道这是否是一个好习惯。我更喜欢使用`MySQL`表格。一个用于用户登录尝试，一个用于会话，但我想知道我应该如何完成这个。

如何识别用户？IP不好，可以改，如果用户使用代理怎么办？我想要的只是使用一种安全便捷的方式。

让我们搁置一旁`Network Eavesdropping`，`Cross-site Scripting`我尽我所能来应对这些攻击。使用登录尝试日志记录将拒绝蛮力攻击，并且我使用准备好的语句来不注入 sql。

我的另一个问题是，如果我想要一个自己的登录系统，如何防止会话劫持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:50:42.043

我使用第二个特定的 cookie（即不是会话 cookie），名为*ALWAYS*

*   该 cookie 设置的寿命很长（例如一年）
*   它的值是唯一的，在 PHP 中基于 UID 和其他随机（时间......）事物确定，由哈希键（选择你的算法 - md5 据说很弱）制成，例如“df67ewbhca9fasdi383hd.347234892.HASHFROMUIDSPECIFIC”
*   该值存储在 MySQL - 用户行 - 当用户登录时
*   遵循以下算法

    ```
    user_login() {
      if ( not signed in ) {
         if (cookies[ALWAYS] is present AND value is in DB AND not null) {
            log the user from that row , automatically
            create his session
         }
         else {
            regular_login()
         }
      }
    } 
    ```

*   当用户注销时，始终删除 cookie，并在 DB 中将该值设置为*null*

这样，之前登录的用户（一年，可以更改）在会话到期时自动登录，从他们最初登录的同一浏览器。

当用户注销时，通过从数据库中删除值来消除 cookie 被盗的可能性 (...)。因此，即使它可以被盗，它也不能再使用了。

# build - Orchard 1.6 - 在 Visual Studio 2012 中构建网站时出错

> ID：14413886
> 
> 赞同：1
> 
> 时间：2013-01-19T11:33:29.923
> 
> 标签：build, visual-studio-2012, orchardcms-1.6

使用 WebPI 4.0 我已成功安装并运行 Orchard 1.6，然后出于部署目的，我在 Visual Studio 2012 中打开了该网站并尝试构建它，但得到了下一个：

1个错误如下：

> 你调用的对象是空的。C:\inetpub\wwwroot\Orchard\Modules\Contrib.Cache\Contrib.Cache.csproj 1

错误指向第一行：`<?xml version="1.0" encoding="utf-8"?>`

以及接下来的一些警告：

> 命名空间“http://schemas.microsoft.com/developer/msbuild/2003”中的元素“PropertyGroup”在命名空间“http://schemas.microsoft.com/developer/msbuild/2003”中具有无效的子元素“MvcBuildViews” . 预期的可能元素列表：'Property, AllowUnsafeBlocks, AppConfigForCompiler, ...

警告指向上面同一文件中的不同行。

我在任何地方都找不到类似的案例，请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:20:21.517

终于发现WebPI下载的是Orchard CMS已经编译好的版本，所以那里大部分源代码都不见了，在Visual Studio中再次尝试编译是错误的方法。

此处的解决方案是取消使用 WebPI 版本并从此处下载源代码版本，而不是 zip 文件：

[http://orchard.codeplex.com/releases/view/90325#ReviewsAnchor](http://orchard.codeplex.com/releases/view/90325#ReviewsAnchor)

# javascript - 不需要在javascript中转义innerHTML字符？

> ID：14413887
> 
> 赞同：7
> 
> 时间：2013-01-19T11:33:31.197
> 
> 标签：javascript, escaping, innerhtml

我不应该转义“markup4”等中的双引号吗？令我惊讶的是，这个简单的作品。如果我用 " 代替它们，它不会。

```
<script type="text/javascript">

    function test3(){
    document.getElementById('div21').innerHTML += '<div class = "markup4"><br>blablablabla1.<br><br></div><div class = "markup3"><br>blablabla2.<br><br></div>';
    }

</script> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-19T11:39:56.383

**这些工作没有逃脱：**

```
innerHTML = "<div class = 'markup4'>";
innerHTML = '<div class = "markup4">'; 
```

> 注意：当在`"`外面使用时，在`'`里面可以正常工作。（反之亦然）

**这些需要逃避：**

```
innerHTML = '<div class = \'markup4\'>';
innerHTML = "<div class = \"markup4\">"; 
```

> 注意：当您在外部和内部使用双引号时，内部的 `"`需要用`\`. （单引号也一样）

**这些将打破：**

```
innerHTML = "<div class = "markup4">";
innerHTML = '<div class = 'markup4'>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:37:21.127

当您想在数据中包含引号时，应使用转义，

例如：他说，“请用这个！” 应该像这样逃脱：

他说，\“请用这个！\”。

否则他们工作没有任何麻烦。

希望我已经澄清了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T11:42:05.073

首先，字符串被解析为内部 javascript 字符串表示，因此您首先需要为 javascript 字符串文字转义。这样做的结果将与您已经拥有的结果相同 - 因此不需要修改。

现在你有

```
<div class = "markup4"><br>blablablabla1.<br><br></div><div class = "markup3"><br>blablabla2.<br><br></div> 
```

内部在 javascript 内存中。

在此之后，就像您将其编写为普通 HTML 一样，所以当然，如果您使用`&quot;`它，它将无法正常工作。

存储经过 2 种不同解释的字符串可能会变得非常复杂，这就是为什么您不应该这样做，而是将模板引擎与存储在其他文件中的模板或页面上的自定义脚本元素一起使用，这样您就可以只专注于关于html解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-22T14:27:01.130

不要忘记浏览器会根据您提供的内容呈现自己的 innerHtml，如果嵌套 innerHtml 代码可能会导致问题。

我发现`&apos;`和`&quot;`代码在这里很有用。

# joomla - Joomla 升级错误

> ID：14413890
> 
> 赞同：0
> 
> 时间：2013-01-19T11:33:42.827
> 
> 标签：joomla, joomla1.6

我在服务器上的 joomla 1.6 中有站点，当我尝试更新 joomla 时，它向我显示了这个错误：`"-1 - An error has occurred Copy failed"`出了什么问题？请帮我

![在此处输入图像描述](../Images/93ef2a02ba321b3d23e878f66aa2232d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:50:12.247

只需从 joomla.org 下载升级包并使用 ftp 覆盖主机上的文件。上传后，进入管理员/扩展/管理扩展/数据库，然后按“修复”按钮。清理缓存和 tmp 文件夹，您就可以开始了。

# java - 无法启动新的 Activity Android

> ID：14413892
> 
> 赞同：0
> 
> 时间：2013-01-19T11:33:53.750
> 
> 标签：java, android, android-gallery

我正在将正在运行的程序合并到另一个程序中。但是，我无法运行合并的代码。出现以下 logcat 错误

```
01-19 16:55:01.472: E/AndroidRuntime(1632): FATAL EXCEPTION: main
01-19 16:55:01.472: E/AndroidRuntime(1632): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.exa_sales/com.example.exa_sales.ScrollGallery}: java.lang.NullPointerException
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.os.Looper.loop(Looper.java:123)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.app.ActivityThread.main(ActivityThread.java:4627)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at java.lang.reflect.Method.invokeNative(Native Method)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at java.lang.reflect.Method.invoke(Method.java:521)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at dalvik.system.NativeStart.main(Native Method)
01-19 16:55:01.472: E/AndroidRuntime(1632): Caused by: java.lang.NullPointerException
01-19 16:55:01.472: E/AndroidRuntime(1632):     at com.example.exa_sales.ScrollGallery.onCreate(ScrollGallery.java:28)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-19 16:55:01.472: E/AndroidRuntime(1632):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-19 16:55:01.472: E/AndroidRuntime(1632):     ... 11 more 
```

这是调用 Gallery.java 类的类，我放置了一个 Gallery 按钮，并在 OnClickListener 上调用了图库类

```
gformbtn.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
              Log.v("Gallery","Gallery");
                Intent i =   new Intent(MainActivity.this,ScrollGallery.class);
                startActivity(i);

            }

        }); 
```

这是图库类，一旦用户单击图库按钮，就会重定向到此类并显示图像

```
public class ScrollGallery extends Activity {

    private Gallery gallery;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

         gallery = (Gallery) findViewById(R.id.examplegallery);
         gallery.setAdapter(new AddImgAdp(this));

         gallery.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v, int position, long id) {

                Toast.makeText(ScrollGallery.this, "Position=" + position, Toast.LENGTH_SHORT).show();
            }
        });

    }

    public class AddImgAdp extends BaseAdapter {
        int GalItemBg;
        private Context cont;

        private Integer[] Imgid = {
               R.drawable.pic_1,R.drawable.pic_2,R.drawable.pic_3,R.drawable.pic_4,R.drawable.pic_5,R.drawable.pic_6,R.drawable.pic_7,R.drawable.pic_8,R.drawable.pic_9,
               R.drawable.pic_10,R.drawable.pic_11,R.drawable.pic_12,R.drawable.pic_13,R.drawable.pic_14
        };

        /*
        public AddImgAdp(Context c) {
            cont = c;
            TypedArray typArray = obtainStyledAttributes(R.styleable.GalleryTheme);
            GalItemBg = typArray.getResourceId(R.styleable.GalleryTheme_android_galleryItemBackground, 0);
            typArray.recycle();
        }
*/
        public AddImgAdp(Context c) {
            cont = c;
            TypedArray a = c.obtainStyledAttributes(R.styleable.Gallery1);
            GalItemBg = a.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 0);
            a.recycle();
        }
        public int getCount() {
            return Imgid.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imgView = new ImageView(cont);

            imgView.setImageResource(Imgid[position]);

            imgView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            imgView.setBackgroundResource(GalItemBg);

            return imgView;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:46:47.370

你得到了`NullPointerException`一个`onCreate()`方法`ScrollGallery`。

通过查看您的代码，唯一可能为 null 的是`gallery`. 这是因为只有在当前膨胀的布局中没有具有该 ID 的视图时才会`findViewById(R.id.examplegallery);`返回。`null`

`examplegallery`确保您在 XML 和 Java 文件中具有相同的ID。请记住，它区分大小写。

# php - 无法从 CodeIgniter 下的 foreach 循环中检索值

> ID：14413894
> 
> 赞同：0
> 
> 时间：2013-01-19T11:34:14.963
> 
> 标签：php, codeigniter, foreach, codeigniter-2, variable-assignment

我无法在 CodeIgniter 视图中从 $info（如下所述）中检索值。

这是场景：我解释了所有代码。

```
function info() {
{...} //I retrieve results from database after sending $uid to model.
    $dbresults = $this->my_model->get_info($uid); //Assume that this model returns some value.

    foreach($dbresults as $row) {
        $info = $row->address; //This is what I need to produce the results
        $results = $this->my_model->show_info($info);

    return $results; //This is my final result which can't be achieved without using $row->address. so first I have to call this in my controller.

    }

    // Now I want to pass it to a view

    $data['info'] = $results;
    $this->load->view('my_view', $data);

    //In my_view, $info contains many values inherited from $results which I need to call one by one by using foreach. But I can't use $info with foreach because it is an Invalid Parameter as it says in an error. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:07:46.050

`$result`在里面使用`foreach`是不合理的。因为在每个循环中 $result 都会取一个新值。因此，最好将其用作 an`array`然后将其传递给您的视图。此外，您不应该使用`return`inside `foreach`。

```
function info() {
{...} //I retrieve results from database after sending $uid to model.
    $dbresults = $this->my_model->get_info($uid); //Assume that this model returns some value

$result = array();
    foreach($dbresults as $row) {
        $info = $row->address; //This is what I need to produce the results
        $result[] = $this->my_model->show_info($info);

    }

    // Now I want to pass it to a view

    $data['info'] = $result;
    $this->load->view('my_view', $data);
} 
```

检查 $result 数组做了什么`var_export($result);`或`var_dump($result);`在`foreach`. 并确保这是您要发送到您的视图的内容。

现在，在您看来，您可以执行以下操作：

```
<?php foreach ($info as $something):?>

//process

<?php endforeach;?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:46:34.637

请**从**_

```
foreach($dbresults as $row) {
    $info = $row->address; //This is what I need to produce the results
    $results[] = $this->my_model->show_info($info);
    //  return $results; remove this line from here;
}

$data['info'] = $results; // now in view access by $info in foreach
$this->load->view('my_view', $data); 
```

现在 $info 可以在视图中访问。

希望对你有帮助！

# python - ImportError：无法导入名称日志

> ID：14413896
> 
> 赞同：17
> 
> 时间：2013-01-19T11:34:20.363
> 
> 标签：python, osx-lion

为什么会这样？

`python --version` **= 2.7.1**

```
import urllib

def main():
    urllib.urlretrieve('http://media2.apnonline.com.au/img/media/images/2011/02/28/apple-logo_fct825x508x16_t460.jpg', 'image.jpg')

if __name__ == '__main__':
    main() 
```

**痕迹：**

```
Traceback (most recent call last):
  File "robot.py", line 7, in <module>
    main()
  File "robot.py", line 4, in main
    urllib.urlretrieve('http://media2.apnonline.com.au/img/media/images/2011/02/28/apple-logo_fct825x508x16_t460.jpg', 'image.jpg')
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 91, in urlretrieve
    return _urlopener.retrieve(url, filename, reporthook, data)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 237, in retrieve
    fp = self.open(url, data)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 205, in open
    return getattr(self, name)(url)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 289, in open_http
    import httplib
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 79, in <module>
    import mimetools
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/mimetools.py", line 6, in <module>
    import tempfile
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tempfile.py", line 34, in <module>
    from random import Random as _Random
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/random.py", line 45, in <module>
    from math import log as _log, exp as _exp, pi as _pi, e as _e, ceil as _ceil
ImportError: cannot import name log 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-19T12:46:48.180

您是否有可能`math.py`在与您正在运行的程序相同的目录中命名文件？如果是这样，python 会尝试在数学模块之前导入它。

***解决方案：***只需将其重命名为其他名称即可。

***提示：***将来尝试以不冲突的方式命名您的模块。

# python - Scrapy：为什么我的响应对象没有 body_as_unicode 方法？

> ID：14413900
> 
> 赞同：3
> 
> 时间：2013-01-19T11:35:30.830
> 
> 标签：python, scrapy

我写了一个蜘蛛，第一次效果很好。我第二次尝试运行它时，它并没有超出`start_urls`. 我尝试`fetch`输入 url并从返回的响应中`scrapy shell`创建一个对象。`HtmlXPathSelector`那是我得到错误的时候

所以步骤是：`

```
[scrapy shell] fetch('http://example.com') #its something other than example.
[scrapy shell] from scrapy.selector import HtmlXPathSelector
[scrapy shell] hxs = HtmlXPathSelector(response)

--------------------------------------------------------------------------- 
```

追溯：

```
AttributeError                            Traceback (most recent call last)
<ipython-input-3-a486208adf1e> in <module>()
----> 1 HtmlXPathSelector(response)

/home/codefreak/project-r42catalog/env-r42catalog/lib/python2.7/site-packages/scrapy/selector/lxmlsel.pyc in __init__(self, response, text, namespaces, _root, _expr)
     29                 body=unicode_to_str(text, 'utf-8'), encoding='utf-8')
     30         if response is not None:
---> 31             _root = LxmlDocument(response, self._parser)
     32 
     33         self.namespaces = namespaces

/home/codefreak/project-r42catalog/env-r42catalog/lib/python2.7/site-packages/scrapy/selector/lxmldocument.pyc in __new__(cls, response, parser)
     25         if parser not in cache:
     26             obj = object_ref.__new__(cls)
---> 27             cache[parser] = _factory(response, parser)
     28         return cache[parser]
     29 

/home/codefreak/project-r42catalog/env-r42catalog/lib/python2.7/site-packages/scrapy/selector/lxmldocument.pyc in _factory(response, parser_cls)
     11 def _factory(response, parser_cls):
     12     url = response.url
---> 13     body = response.body_as_unicode().strip().encode('utf8') or '<html/>'
     14     parser = parser_cls(recover=True, encoding='utf8')
     15     return etree.fromstring(body, parser=parser, base_url=url) 
```

错误：

```
AttributeError: 'Response' object has no attribute 'body_as_unicode' 
```

我是否忽略了一些非常明显的东西或偶然发现了scrapy中的错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T17:03:38.180

`body_as_unicode`是[TextResponse](http://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.TextResponse)的一种方法。如果 http 响应包含文本内容，则 TextResponse 或其子类之一（例如 HtmlResponse）将由 scrapy 创建。

```
In [1]: fetch('http://scrapy.org')
...
In [2]: type(response)
Out[2]: scrapy.http.response.html.HtmlResponse
...
In [3]: fetch('http://www.scrapy.org/site-media/images/logo.png')
...
In [4]: type(response)
Out[4]: scrapy.http.response.Response 
```

在您的情况下，最可能的解释是 scrapy 认为响应不包含文本。

来自服务器的 HTTP 响应是否正确设置了 Content-Type 标头？它是否在浏览器中正确呈现？这些问题将有助于了解这是预期的行为还是错误。

# sql - 我们可以明智地进行分区日期吗？

> ID：14413905
> 
> 赞同：0
> 
> 时间：2013-01-19T11:36:07.637
> 
> 标签：sql, sql-server-2008

我对分区的概念很陌生。我知道水平分区，但我们可以做分区日期吗？在我的项目中，我希望每当我们进入新年时，都应该创建分区。谁能解释如何做到这一点？我正在研究 ERP 软件，它有过去一年的数据，我需要逐年分区。（例如 APR-2011 到 MAR-2012 是一年）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:48:00.260

当您说分区时，我很好奇您的意思是在窗口函数中还是在一般情况下对数据进行分组。让我在一个自我演示的示例中向您展示两种聚合数据并对其进行分区的方法：

```
declare @Orders table( id int identity, dt date, counts int)

insert into @Orders values ('1-1-12', 2),('1-1-12', 3),('1-18-12', 1),('2-11-12', 5),('3-1-12', 2),('6-1-12', 8),('10-1-12', 2),('1-13-13', 8)

-- To do days I need to do a group by
select 
    dt as DayDate
,   SUM(counts) as sums
from @Orders
group by dt

-- To do months I need to group differently
select 
    DATEADD(month, datediff(month, 0, dt), 0) as MonthDate
-- above is a grouping trick basically stating count from 1/1/1900 the number of months of difference from my date field.  
--This will always yield the current first day of the month of a date field
,   SUM(counts) as sums
from @Orders
group by DATEADD(month, datediff(month, 0, dt), 0)

-- well that is great but what if I want to group different ways all at once?

-- why windowed functions rock:
select
    dt
,   counts
,   SUM(counts) over(partition by DATEADD(year, datediff(year, 0, dt), 0)) as YearPartitioning
,   SUM(counts) over(partition by DATEADD(month, datediff(month, 0, dt), 0)) as MonthPartitioning
-- expression above will work for year, month, day, minute, etc.  You just need to add it to both the dateadd and datediff functions
,   SUM(counts) over(partition by dt) as DayPartitioning
from @Orders 
```

分组的重要概念是传统的 group by 子句，您必须列出未执行数学运算的子句作为要处理的枢轴。所以在我的第一个选择中，我只选择了日期，然后说 sum(counts)。然后它在 1-1-12 上看到它有两个值，因此它添加了它们，并在其他所有东西上单独添加了它们。在第二种选择方法中，我对日期字段执行了一个技巧，以使其转换为该月的第一天。现在这很棒，但我可能一次想要所有这些。

窗口函数内联进行分组，这意味着它们不需要分组子句，因为这就是 over() 部分正在做的事情。但是，它可能会重复这些值，因为您没有限制数据集。这意味着如果您查看第三个选择“YearPartitioning”的第三列，它会重复数字 23 七次。为什么？好吧，因为您从未告诉该语句在函数之外进行任何分组，因此它显示了每一行。只要所有值的年份都相同的表达式为真，数字 23 就会出现。从窗口表达式中选择时请记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:22:03.140

我认为您正在寻找的是这样的：

```
DECLARE @referenceDate datetime = '3/1/2011'

SELECT
  [sub].[Period] + 1 AS [PeriodNr],
  YEAR(DATEADD(YEAR, [sub].[Period], @referenceDate)) AS [PeriodStartedIn],
  COUNT(*) AS [NumberOfRecords],
  SUM([sub].[Value]) AS [TotalValue]
FROM
(
  SELECT
    *,
    FLOOR(DATEDIFF(MONTH, @referenceDate, [timestamp]) / 12.0) AS [Period]
  FROM [erp]
  WHERE [timestamp] >= @referenceDate
) AS [sub]
GROUP BY [sub].[Period]
ORDER BY [sub].[Period] ASC 
```

[小提琴在这里找到](http://www.sqlfiddle.com/#!3/60f5e/10)。

# python - Beazley 4e PER: square(x) 但他在包装内传递了 **kwargs？

> ID：14413911
> 
> 赞同：1
> 
> 时间：2013-01-19T11:36:49.450
> 
> 标签：python, python-3.x

此示例取自 Beazley，Python Essential Reference 4e，pg:101。

他在做什么：

```
func(*args, **kwargs) 
```

其中 'func' 是接受 1 个参数的平方函数。在本章的前面，他谈到在调用/定义中参数的位置和数量必须如何匹配，否则会引发 TypeError。

还，

```
@trace
def square(x):
    ...
square = trace(square) 
```

trace 返回 'callf' 所以这相当于写： square = callf 这很好，因为由于 square 指的是一个新功能对象，你可以用`*args, **kwargs`. 但是，然后在`callf`他做`func(*args...`

鉴于我们刚刚让 'square' 引用了其他对象，那么原始的正方形如何在内部访问？什么机制开始发挥作用？

```
@trace
def square(x):
    return x*x

enable_tracing = True
if enable_tracing:
    debug_log = open("debug.log","w")

def trace(func):
    if enable_tracing:
        def callf(*args,**kwargs):
            debug_log.write("Calling %s: %s, %s\n" % 
                (func.__name__, args, kwargs))
            r = func(*args,**kwargs) #????????
            debug_log.write("%s returned %s\n" % (func.__name, r))
            return r
        return callf
    else:
        return func 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:09:40.633

*-前缀的意思是，“使用这个值序列作为函数的位置参数”。**-前缀的意思是，“将此字典用作函数的命名参数。” 如果序列为空，则不传递位置参数。如果字典为空，则不传递命名参数。

当您使用这些前缀定义函数时，未说明的位置参数进入 *-prefixed 参数，未说明的命名参数进入 **-prefixed 参数。因此，如果您定义这样的函数：

```
def wrapper(*args, **kwargs): 
```

然后可以使用任何参数调用该函数。如果该函数随后使用这些参数调用另一个函数，那么它将被调用，但是调用了包装器。

请注意，`(*args, **kwargs)`即使未以这种方式定义，您也可以调用函数：

```
>>> def square(x):
...     return x*x
...
>>> args = (10,)
>>> kwargs = {}
>>> square(*args, **kwargs)
100 
```

因为 kwargs 是空的，所以没有传递给函数的命名参数。它只获得 args 中的一个位置参数。

# android - 如何在运行时确定应用是通过 amazon appstore 还是 Google play 安装的

> ID：14413912
> 
> 赞同：3
> 
> 时间：2013-01-19T11:37:12.913
> 
> 标签：android, packages, apk, package-managers

在运行时确定应用程序是通过 Amazon Android Appstore 还是 Google play 安装的推荐最佳实践是什么？我想避免为我的应用可用的每个应用商店生成单独的 APK。

我的首选方法是使用 PackageManger.getInstallerPackageName。

根据 Android API 文档，这正是我正在寻找的：检索安装包的应用程序的包名。这确定了包裹来自哪个市场。

不幸的是，通过 Amazon Appstore（包括 KF）安装的应用程序似乎返回 null，这只有在用户手动安装 APK 时才会出现。

有人可以让我知道是否有其他方法可以这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T11:43:13.070

除了返回 null 的问题外，`getInstallerPackageName()`还可能被篡改并返回不准确的信息。

我已经研究了很长时间，我能想到的最佳解决方案是拥有一个包含该信息的常量文件：

```
public class Constants {

    public static final int GOOGLE_PLAY = 0;
    public static final int AMAZON = 1;
    public static final int BUILT_FOR = GOOGLE_PLAY;
} 
```

只需在此文件中使用`AMAZON`而不是`GOOGLE_PLAY`为每个应用商店构建一次 apk。

在您的代码的其他地方，您可以使用以下方法检查：

```
if(Constants.BUILT_FOR == Constants.GOOGLE_PLAY) {
    //Google Play build
}

if(Constants.BUILT_FOR == Constants.AMAZON) {
    //Amazon Build
} 
```

# php - joomla 组件中的自定义状态按钮

> ID：14413916
> 
> 赞同：4
> 
> 时间：2013-01-19T11:37:27.087
> 
> 标签：php, joomla, joomla2.5

Joomla`com_content`有用于文章状态“发布”的小切换按钮来发布或取消发布文章。所以，我想在我的组件中使用相同类型的切换按钮来批准或不批准用户。

现在，我想从专家那里得到一些关于如何去做的建议。我已经经历了，`com_content`但我真的不明白我应该如何开始。我无法理解`com_content`方法和代码，因为我没有按照 Joomla 2.5 进行编码。

我应该如何开始？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T06:12:07.893

我让它自己工作。让我将经验分享给将来需要它的人。我的表字段或数据库字段已被***批准***，其值最初为***0***（这意味着该记录未经管理员批准）

在我的布局/默认页面中，切换按钮的代码如下：

```
 <?php
    $k = 0;
    for ($i=0, $n=count( $this->items ); $i < $n; $i++)
    {
       $row = &$this->items[$i];
    ..................
    ..................
    ?>
    ..................

    <td align="center">
       <?php echo JHtml::_('job.approve', $row->approved, $i); ?>
    </td> 
```

请注意，我已经 $row->approved 这是我来自 db 的字段。然后我找到了 job.approve，为此我创建了一个 job.php 文件并放置在 helpers 目录中。job.php 的代码是：

```
<?php
// no direct access
defined('_JEXEC') or die;

/**
 * @package     Joomla.Administrator
 * @subpackage  com_content
 */
abstract class JHtmlJob
{
    /**
     * @param   int $value  The state value
     * @param   int $i
     */
    static function approve($value = 0, $i)
    {
        // Array of image, task, title, action
        $states = array(
            0   => array('disabled.png',    'approve',  'Unapproved',   'Toggle to approve'),
            1   => array('tick.png',        'unapprove',    'Approved',     'Toggle to unapprove'),
        );
        $state  = JArrayHelper::getValue($states, (int) $value, $states[1]);
        $html   = JHtml::_('image', 'admin/'.$state[0], JText::_($state[2]), NULL, true);
        //if ($canChange) {
            $html   = '<a href="#" onclick="return listItemTask(\'cb'.$i.'\',\''.$state[1].'\')" title="'.JText::_($state[3]).'">'
                    . $html.'</a>';
        //}

        return $html;
    }
} 
```

然后我在控制器中注册了两个任务作为批准和取消批准以及批准功能：

```
public function __construct($config = array())
    {
        parent::__construct($config);

        $this->registerTask('unapprove', 'approve');
    }

    /**
     * Method to toggle the featured setting of a list of articles.
     *
     * @return  void
     * @since   1.6
     */
    function approve()
    {
        // Initialise variables.
        $user   = JFactory::getUser();
        $ids    = JRequest::getVar('cid', array(), '', 'array');
        $values = array('approve' => 1, 'unapprove' => 0);
        $task   = $this->getTask();
        $value  = JArrayHelper::getValue($values, $task, 0, 'int');

        if (empty($ids)) {
            JError::raiseWarning(500, JText::_('JERROR_NO_ITEMS_SELECTED'));
        }
        else {
            // Get the model.
            $model = $this->getModel('jobs');

            // Publish the items.
            if (!$model->approve($ids, $value)) {
                JError::raiseWarning(500, $model->getError());
            }
        }

        $redirectTo = JRoute::_('index.php?option='.JRequest::getVar('option'));
        $this->setRedirect($redirectTo);
    } 
```

此后，我在模型中添加了以下函数以将值更新为 0 或 1。

```
function approve($cid, $publish) {

         if (count( $cid ))
         {
             JArrayHelper::toInteger($cid);
             $cids = implode( ',', $cid );
             $query = 'UPDATE #__tbljobs'
                   . ' SET approved = '.(int) $publish
                   . ' WHERE id IN ( '.$cids.' )';
                  $this->_db->setQuery( $query );
                if (!$this->_db->query()) {
                    $this->setError($this->_db->getErrorMsg());
                    return false;
                 }
           }
           return true;
 } 
```

请不要忘记在您的 view/view.html.php 文件中包含 job.php 文件，如下所示：

```
<?php
defined('_JEXEC') or die('Restricted Access');
jimport('joomla.application.component.view');

require_once JPATH_COMPONENT .'/helpers/job.php';

Class JobsViewListJobs extends JView
{ 
```

请记住，我没有使用 JForm，我的代码也不是 joomla 1.7 风格。但我遵循 MVC 架构。所以，我不确定我的方法是否适用于使用 joomla 1.7 及以上风格编码的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:44:46.880

您可以使用它来创建发布按钮[阅读更多](http://docs.joomla.org/API16%3aJHtmlJGrid/published)-

```
JHtml::_('jgrid.published', $item->state, $i, 'articles.', $canChange); 
```

或者这个 html-

```
<?php if($item->approve){?>
<td class="center">
    <a class="jgrid hasTip" href="javascript:void(0);" onclick="return listItemTask('cb<?php echo $i?>','items.disapprove')" title=""><span class="state publish"><span class="text">Disapprove</span></span></a>
</td>
<?php }else{?>
<td class="center">
    <a class="jgrid hasTip" href="javascript:void(0);" onclick="return listItemTask('cb<?php echo $i?>','items.approve')" title=""><span class="state unpublish"><span class="text">Approve</span></span></a>
</td>
<?php }?> 
```

在`items.approve`和中`items.disapprove`，是项目控制器的任务。`items is controller``approve and disapprove`

在您的控制器中添加这些功能-

```
public function __construct($config = array()){
                parent::__construct($config);
                $this->registerTask('unapproved', 'approved');
}
function approved() { 
    $ids = JRequest::getVar('cid', array(), '', 'array'); 
    JArrayHelper::toInteger($ids );
    $cids = implode( ',', $ids); 
    $values = array('approved' => 1, 'unapproved' => 0); 
    $task = $this->getTask(); 
    $value = JArrayHelper::getValue($values, $task, 0, 'int');      
    $db =& JFactory::getDBO();      
    $query = 'UPDATE #__tbljobs' . ' SET approved = '.(int) $value . ' WHERE id IN ( '.$cids.' )';
    $db->setQuery($query);
    $result = $db->query();
    $redirectTo = JRoute::_('index.php?option='.JRequest::getVar('option').'&task=display'); 
    $this->setRedirect($redirectTo); 
} 
```

阅读这个 - [Joomla 2.5 在自定义组件中扩展 jgrid.published 列](http://joomla-answers.blogspot.in/2012/06/joomla-25-extend-jgridpublished-column.html)

希望这会有所帮助。

# iphone - 未使用 MKReverseGeocoder 获取印度位置的邮政编码

> ID：14413923
> 
> 赞同：0
> 
> 时间：2013-01-19T11:38:33.670
> 
> 标签：iphone, objective-c, reverse-geocoding, currentlocation

我正在开发一个基于地理编码器的应用程序。我在地理编码器委托方法中使用地标地址字典方法。我可以获得除印度邮政编码之外的所有详细信息（街道、城市、州、县、国家/地区代码等）。为什么缺少邮政编码？任何建议表示赞赏

我的代码：

```
-(void)locationUpdate:(CLLocation *)location

{

currentLocation= [location coordinate];

if (currentLocation.latitude!=checking.latitude) 
{
    NSDate *currentTime =[NSDate date];

    fireTime = currentTime;

    checking.latitude=currentLocation.latitude;  
    checking.longitude=currentLocation.longitude;

}
MKReverseGeocoder *geocoder = [[MKReverseGeocoder alloc] initWithCoordinate:[location coordinate]];
[geocoder setDelegate:self];
[geocoder start];
}

-(void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark

{
    NSLog(@"placemark.postalCode ***********%@",placemark.postalCode);
} 
```

当地理编码器返回时，我得到了这个输出：

```
{

City = Vishakhapatnam;
Country = India;
CountryCode = IN;
FormattedAddressLines =     (
    NH5,
    Vishakhapatnam,
    "Andhra Pradesh",
    India
);
State = "Andhra Pradesh";
Street = NH5;
Thoroughfare = NH5;

}

placemark.postalCode *********** (null) 
```

它适用于其他国家/地区，但我没有获得印度位置的邮政编码。我怎样才能获得印度地点的邮政编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:33:58.277

这是因为 MapKit 正在使用 Apple 地图来检索数据。在检索印度地址时，印度的苹果地图并不是那么好。

如果您想获得预期的结果，请尝试使用 google api。

Google 已经发布了 iOS 版地图 SDK，这里是它的链接。[https://developers.google.com/maps/documentation/ios](https://developers.google.com/maps/documentation/ios)

# php - 将 Laravel 包与 CodeIgniter 一起使用

> ID：14413925
> 
> 赞同：0
> 
> 时间：2013-01-19T11:38:45.540
> 
> 标签：php, codeigniter, laravel, laravel-3

我想将 Laravel Bootstrapper 捆绑包[http://bundles.laravel.com/bundle/bootstrapper](http://bundles.laravel.com/bundle/bootstrapper)与我的 CodeIgniter 应用程序一起使用。

我如何利用自动加载器功能以原生 PHP 5 方式在 CodeIgniter 中使用 Bootstrapper 捆绑代码。

```
Button::make('Abc')->with_icon('ok'); 
```

您是否建议在 CodeIgniter 库中转换 Bootstrapper 包，或者我们可以直接使用它。

我正在使用引导程序来创建视图，因此已经包括引导程序特定的 css、js 和图像。

请帮忙，以便捆绑包可以与 CodeIgniter 一起使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T15:52:29.010

为什么？它不是为与 CI 一起工作而设计的，你可能需要花很多时间才能让它工作。在此处查看可用于 CI 的众多版本之一[https://github.com/vesparny/codeigniter-html5boilerplate-twitter-bootstrap](https://github.com/vesparny/codeigniter-html5boilerplate-twitter-bootstrap)。

此外，我没有看到拥有引导 CI 集成的任何巨大优势，如果你这样做了，那么我只是使用我自己定制的引导程序并将其正常加载到模板/视图文件中。工作得很好，并且为看到 php 感到恐慌的设计师/前端编码人员保留了所有那些 UI/视图的点点滴滴。

所有这些工作都试图将设计、功能和布局分开，人们竭尽全力用这样的东西来破坏它。

# php - 从简单的 php dom 获取 colspan

> ID：14413929
> 
> 赞同：0
> 
> 时间：2013-01-19T11:39:14.183
> 
> 标签：php, simple-html-dom

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)
> [如何用简单的 HTML DOM 抓取它](https://stackoverflow.com/questions/7465907/how-to-scrape-this-with-simple-html-dom)

我有一个这样的表格文本：

```
$html='<table class="table1"><caption>Report</caption><tbody><tr> 
                    <th>#</th> 
                    <th>Date</th> 
                    <th>tablehead</th> 
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total Amount</th>
                        </tr><tr class="even"><td>10</td>
                        <td>2013-01-19</td> 
                        <td>somevalue</td> 
                        <td>500</td> 
                        <td>17</td> 
                        <td>8500</td> 
                        </tr><tr> 
                    <th colspan="4">&nbsp;</th> 
                    <th>402</th>
                    <th>196700</th> 
                </tr> </tbody></table>'; 
```

我想知道如何获得 colspan 值（如果存在）？我正在尝试使用简单的 html dom，但未能得到它。任何帮助将不胜感激。

# c# - 从二进制数据中检索图像到图像场

> ID：14413930
> 
> 赞同：0
> 
> 时间：2013-01-19T11:39:21.350
> 
> 标签：c#, asp.net, .net, mysql

我已将图像以格式存储在数据库中，如何在不使用 gridview 或 datalist 的情况下将图像检索到 imagefield？我只想将它检索到图像字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:24:40.977

您可以使用 httphandler 检索二进制图像，然后将其绑定到具有 src 属性的图像控制。检查此链接。

[http://forums.asp.net/t/1824646.aspx/1](http://forums.asp.net/t/1824646.aspx/1)

# c# - 使用 Entity Framework 查询许多 (~100) 搜索词

> ID：14413933
> 
> 赞同：1
> 
> 时间：2013-01-19T11:39:45.417
> 
> 标签：c#, entity-framework, entity-framework-5

我需要对我的数据库进行查询，这可能是这样的，实际上可能有 100 个或更多搜索词。

```
public IQueryable<Address> GetAddressesWithTown(string[] towns)
{
    IQueryable<Address> addressQuery = DbContext.Addresses;
    addressQuery.Where( x => towns.Any( y=> x.Town == y ) );
    return addressQuery;
} 
```

但是，当它包含超过 15 个术语时，它会在执行时抛出异常，因为生成的 SQL 太长。

这种查询可以通过`Entity Framework`吗？

还有哪些其他选项可以完成这样的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:05:36.307

抱歉，我们在谈论这个确切的 SQL 吗？

在那种情况下，这是一个非常简单的“睁开眼睛”。

有一种方法（包含）将该字符串映射到 IN 子句中，这会导致一个 sql 条件（town in ('','','')）

让我看看我是否正确：

> addressQuery.Where(x => towns.Any(y=> x.Town == y));

应该

> addressQuery.Where (x => towns.Contains (x.Town)

生成的 SQL 会小很多。100 项仍在征税 - 我敢说您可能在这里遇到数据库或应用程序设计问题，需要进行业务方面的分析，在我使用数据库的 20 年里，我没有这个要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:48:05.107

这看起来像是您想要使用[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)的场景，因为这将帮助您创建基于*Or*的谓词并构造动态 lambda 表达式。

这是创建 LinqPad 的 Joseph Albahari 名为 LinqKit 的库的一部分。

```
 public IQueryable<Address> GetAddressesWithTown(string[] towns)
{
  var predicate = PredicateBuilder.False<Address>();

  foreach (string town in towns)
  {
    string temp = town;
    predicate = predicate.Or (p => p.Town.Equals(temp));
  }

  return DbContext.Addresses.Where (predicate);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:57:45.677

您有两种选择：

*   您可以替换`.Any`为`.Contains`替代品。
*   您可以使用带有表值参数的普通 SQL。

由于它转换为内联 sql子句，因此使用`.Contains`更容易实现并且有助于提高性能；`IN`所以100个城镇应该不是问题。但是，这也意味着确切的 sql 取决于确切的城镇数量：您正在强制 sql-server 为每个城镇数量重新编译查询。当查询很复杂时，这些重新编译可能会很昂贵；他们也可以从缓存中驱逐其他查询计划。

使用 table-valued-parameters 是更通用的解决方案，但实现起来需要更多的工作，特别是因为这意味着您需要自己编写 SQL 查询并且不能依赖实体框架。（使用`ObjectContext.Translate`你仍然可以将查询结果解包为强类型对象，尽管编写了 sql）。不幸的是，您还不能使用实体框架将大量数据有效地传递给 sql server。实体框架不支持表值参数，也不支持临时表（不过，这是一个[普遍要求的特性](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015347-table-valued-parameters)）。

一些 TVP sql 看起来像这样`select ... from ... join @townTableArg townArg on townArg.town = address.town`或`select ... from ... where address.town in (select town from @townTableArg)`.

您可能*可以*解决 EF 限制，但它不会很快并且可能会很棘手。一种解决方法是将您的值插入到某个中间表中，然后加入其中 - 这仍然是 100 次插入，但这些是单独的语句。如果 EF 的未来版本支持[批处理 CUD 语句](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015357-batch-cud-support)，这实际上可能会合理地工作。

几乎等同于表值参数的是批量插入临时表并在查询中加入该表。大多数情况下，这只是意味着您的表名将以“#”而不是“@”开头:-)。临时表有更多开销，但您可以在其上放置索引，在*某些*情况下，这意味着后续查询会更快（对于非常大的数据量）。

不幸的是，使用 C# 中的临时表或批量插入很麻烦。这里最简单的解决方案是制作一个`DataTable`; 这可以传递给任何一个。但是，数据表相对较慢；一旦你开始添加数百万行，over 可能是相关的。最快的（通用）解决方案是实现自定义`IDataReader`，几乎和`IEnumerable<SqlDataRecord>`.

顺便说一句，要使用表值参数，需要在服务器上声明表参数的形状（“类型”）；如果您使用临时表，您也需要创建它。

一些帮助您入门的建议：

*   [http://lennilobel.wordpress.com/2009/07/29/sql-server-2008-table-valued-parameters-and-c-custom-iterators-a-match-made-in-heaven/](http://lennilobel.wordpress.com/2009/07/29/sql-server-2008-table-valued-parameters-and-c-custom-iterators-a-match-made-in-heaven/)
*   [来自 List<> 的 SqlBulkCopy](https://stackoverflow.com/questions/3913371/sqlbulkcopy-from-a-list)

# jquery - Jquery 显示/隐藏修复

> ID：14413936
> 
> 赞同：-1
> 
> 时间：2013-01-19T11:40:24.950
> 
> 标签：jquery, show-hide

我需要修复这个小代码：

```
jQuery(document).ready(function() {

    $('.plus').click(function(){
        $('#top:hidden').show('slow');
        $('.plus').click(function(){
            $('#top:visible').hide('slow');

        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:46:01.367

试试这个：

```
jQuery(document).ready(function() {
    $('.plus').click(function(){
        $('#top').toggle('slow');
    });
}); 
```

也就是说，每次`'.plus'`点击元素时，`'#top'`元素都会在可见和不可见之间[切换。](http://api.jquery.com/toggle/)

问题中显示的代码表示，`'.plus'`单击时，使其`'#top'`可见（如果当前不可见），然后分配第二个单击处理程序，该处理程序将使`'#top'`不可见。在下一次单击时，这两个处理程序都将运行，创建*第三个*处理程序。在下一次单击时，所有三个处理程序都会运行。等等。也就是说，重复调用以`.click()`添加其他处理程序，它们不会替换以前的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:42:54.103

您不需要绑定两次单击，而是可以设置条件显示和隐藏。

```
$('.plus').click(function(){
    if($('#top').is(':visible')
         $('#top').hide('slow');
   else
         $('#top').show('slow');        
}); 
```

你也可以使用[togle事件](http://api.jquery.com/toggle-event/)

```
$('.plus').toggle(function(){
      $('#top').show('slow');
},  
function(){
       $('#top').hide('slow');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:48:25.803

您可以使用`toggle()`来替换`hide()`和`show()`

```
$('.plus').click(function(){
   $('#top').toggle('slow');
}) 
```

API 参考：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

# android - Android在addTextChangedListener（edittext）中的某些条件下禁用肯定按钮

> ID：14413939
> 
> 赞同：6
> 
> 时间：2013-01-19T11:40:36.557
> 
> 标签：android, dialog

这是我的对话框代码，如果编辑文本中的文本大小大于 5，我想禁用正按钮，如果 size <= 5 则启用它

```
private void myDialog(String title) {
            AlertDialog.Builder builder = new AlertDialog.Builder(context);

            // Get the layout inflater
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View dialogView = inflater.inflate(R.layout.new_dialog, null);

            // Inflate and set the layout for the dialog
            // Pass null as the parent view because its going in the dialog layout
            builder.setView(dialogView);

            final EditText dialogEdittext = (EditText) dialogView.findViewById(R.id.dialog_editText);
            final TextView dialogMessage = (TextView) dialogView.findViewById(R.id.dialog_limit);

            dialogEdittext.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                }

                @Override
                public void afterTextChanged(Editable s) {

                    // if text length is greater than 5 disable positive button
                                // else enable 
                }
            });

            builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {

            });

            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {
                }
            });

            final Dialog dialog = builder.create();
            dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
            dialog.show();

        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-19T11:49:26.687

尝试这样的事情：

```
@Override
public void afterTextChanged(Editable s) {
     if (s.length() > 5) {
        dialog.getButton(Dialog.BUTTON_POSITIVE).setEnabled(false);
     } else {
        dialog.getButton(Dialog.BUTTON_POSITIVE).setEnabled(true);
     }
} 
```

哪里`dialog`是：

```
final AlertDialog dialog = builder.create(); 
```

# sql - SQL group-by on column (Value) 仅针对在其他列中具有重复项的那些行 (Count(ID) >1)

> ID：14413940
> 
> 赞同：1
> 
> 时间：2013-01-19T11:40:37.103
> 
> 标签：sql, group-by

我有一个与此类似的表，它是**SQL 的输入**

```
 ID                     Value
    FRY6040501ACH19        1388
    FRY6040501ACH19        1389
    FRY6040501ACH19        1388
    <Null>                 13800
    <Null>                 13800
    <Null>                 <Null>
    0026003710022745       1388
    0026003710022752       <Null>
    0026003710022751       32750
    0026003710022751       32750
    0026003710022751       32750 
```

我需要编写一个 SQL 来获取带有附加`Status`列的输出。

我正在添加中间列`TmpCntID`并`TmpCntVl`解释逻辑

SQL 所需的**输出**如下：（`TmpCntID`&`TmpCntVl`不是必需的）

```
 ID               TmpCntID     Value    TmpCntVl   Status
    FRY6040501ACH19      3        1388       2        MisMatch
    FRY6040501ACH19      3        1389       1        MisMatch
    FRY6040501ACH19      3        1388       2        MisMatch
    <Null>               3        13800      2        MisMatch
    <Null>               3        13800      2        MisMatch
    <Null>               3        <Null>     1        MisMatch
    0026003710022745     1        1388       1        NA
    0026003710022752     1        <Null>     1        NA
    0026003710022751     3        32750      3        Match
    0026003710022751     3        32750      3        Match
    0026003710022751     3        32750      3        Match 
```

这里使用的逻辑是首先找到重复使用的 ID，`SELECT ID, Count(*) FROM MyTable M GROUP BY IIF(IsNull(ID), '0', ID), ID having COUNT(*)>1`以获取**中间输出**：

```
 NDUPID            TmpCntID
    FRY6040501ACH19      3
    <Null>               3
    0026003710022751     3 
```

现在，我们需要暂时忽略 ID 的其余部分，例如`0026003710022745`或`0026003710022752`

从上面的第一个表`ID`中`NDUPID (above intermediate output)`找到 non-duplicate中的每个`values`。任何一个非重复必须指示所有具有相同的`ID`行`Mismatch`

例如，反对`ID=0026003710022751`，我们可以看到所有三个`values=32750`，因此`Status=Match`和 for`ID=FRY6040501ACH19`并且`ID=<Null>`我们至少有一个重复`value`，因此它是`Status=Mismatch`

在上面的所有行的输出表中`TmpCntID=1`，我们需要有`Status=NA`

记住的逻辑是计算`TmpCntVl`，`TmpCntID`但首先在最终输出中不需要，然后使用 case 语句，如果两列相等，那么**`Match`**如果两列不相等，那么对于上面**中间输出**表中没有**`MisMatch`**的所有`ID`' ，即状态将是**`count(*)<=1`**`NA`****

 **您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:46:58.147

我可能遗漏了一些东西，但看起来你希望你的`Status`列定义是：

```
SELECT CASE WHEN TmpCntID = 1 THEN 'NA'
     WHEN EXISTS(SELECT 1 FROM interTbl tt 
                 WHERE tt.ID = tbl.ID AND tt.TmpCntVl = 1)
          THEN 'MisMatch'
     ELSE 'Match'
END AS Status
FROM interTbl tbl 
```

那是，

*   `NA`独特的时候
*   `MisMatch`当任何`TmpCntVl`为`ID`1
*   `Match`否则

* * *

我误解了这个问题，因为您知道如何获得中间输出并且不知道如何从那里开始。这是我要做的：

```
WITH Counts AS
(
    SELECT ID, Count(*) AS TmpCntID
    FROM myTable
    GROUP BY ID
),
LoneValues AS
(
    SELECT ID
    FROM myTable
    GROUP BY ID, Value
    HAVING COUNT(*) = 1
)
SELECT myTable.ID, myTable.Value,
    CASE WHEN Counts.TmpCntID = 1 THEN 'NA'
         WHEN EXISTS(SELECT 1 FROM LoneValues WHERE myTable.ID = LoneValues.ID
                           OR (myTable.ID IS NULL AND LoneValues.ID IS NULL))
              THEN 'MisMatch'
         ELSE 'Match'
    END AS Status
FROM myTable
INNER JOIN Counts ON myTable.ID = Counts.ID 
    OR (myTable.ID IS NULL AND Counts.ID IS NULL) 
```

我不保证这是*最佳*解决方案，所以如果以后出现问题，您可以考虑如何解决。

我还在[SQL Fiddle 上尝试过这个查询，](http://www.sqlfiddle.com/#!6/b4a1a/3)这样你就可以看到它的实际效果。如果您的 RDBMS 不支持 CTE，您当然可以在必要时将它们作为子查询粘贴。**

# python - obj.__closure__ 中究竟包含什么？

> ID：14413946
> 
> 赞同：44
> 
> 时间：2013-01-19T11:41:20.907
> 
> 标签：python, closures, python-internals

Beazley pg 100 提到：

```
>>>python.__closure__
(<cell at 0x67f50: str object at 0x69230>,)
>>>python.__closure__[0].cell_contents 
```

我的理解是这`__closure__`是一个列表，但是这些单元格的东西和 str 对象是什么？这看起来像一个一元元组？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-19T12:59:54.690

闭包单元指的是函数所需的值，但取自周围的范围。

当 Python 编译嵌套函数时，它会记下它引用但仅在嵌套函数和父范围的代码对象中的父函数（不是全局变量）中定义的任何变量。这些分别是这些函数对象的`co_freevars`和`co_cellvars`属性。`__code__`

然后，当您实际*创建*嵌套函数（执行父函数时发生）时，这些引用将用于将闭包附加到嵌套函数。

函数闭包包含一个单元元组，每个单元对应一个自由变量（在 中命名`co_freevars`）；单元格是对父作用域的局部变量的特殊引用，它遵循那些局部变量指向的值。最好用一个例子来说明这一点：

```
def foo():
    def bar():
        print(spam)

    spam = 'ham'
    bar()
    spam = 'eggs'
    bar()
    return bar

b = foo()
b() 
```

在上面的例子中，函数`bar`有一个闭包单元，它指向`spam`函数中的`foo`。单元格遵循 的值`spam`。更重要的是，一旦`foo()`完成并返回，即使里面的变量不再存在`bar`，单元格也会继续引用该值（字符串）。`eggs``spam``foo`

因此，上面的代码输出：

```
>>> b=foo()
ham
eggs
>>> b()
eggs 
```

并且`b.__closure__[0].cell_contents`是`'eggs'`。

请注意，闭包在*被调用**时`bar()`*被取消引用；闭包并没有捕捉到这里的价值。当您生成引用循环变量的嵌套函数（使用`lambda`表达式或语句）时，这会有所不同：`def`

```
def foo():
    bar = []
    for spam in ('ham', 'eggs', 'salad'):
        bar.append(lambda: spam)
    return bar

for bar in foo():
    print bar() 
```

上面将连续打印`salad`三次，因为所有三个`lambda`函数都引用了`spam`变量，而不是创建函数对象时绑定的值。到`for`循环结束时，`spam`已绑定到`'salad'`，因此所有三个闭包都将解析为该值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-19T11:51:38.853

它是旧的 Python 3 的新名称`func_closure`。

[http://docs.python.org/3.0/whatsnew/3.0.html](http://docs.python.org/3.0/whatsnew/3.0.html)

> 已命名的函数属性`func_X`已重命名为使用`__X__`表单，从而在函数属性命名空间中为用户定义的属性释放这些名称。也就是说，`func_closure`, `func_code`, `func_defaults`, `func_dict`, `func_doc`, `func_globals`,`func_name`分别重命名为`__closure__`, `__code__`, `__defaults__`, `__dict__`, `__doc__`, `__globals__`, `__name__`。

简而言之：

`__closure__`is`None`或 a`tuple`包含对函数的自由变量的绑定的单元格。

此外，它不可写。

参考：[http ://docs.python.org/ref/types.html](http://docs.python.org/ref/types.html)

**示例**Python < 3（所以我正在使用`func_closure`）

```
def foo():
    x = "I am used"
    y = "I am free"
    z = "I am free too"

    def bar(x):
        return x, y, z

    return bar

c = foo().func_closure

print [i.cell_contents for i in c] 
```

输出：

```
>>> 
['I am free', 'I am free too'] 
```

就像`foo`返回`bar`使用自己的值的函数一样`x`，但不是`y`or `z`。所以，他们归于`__closure__`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-15T13:18:12.213

当`closure`在 python 中定义嵌套函数（）时：
外部函数用于`co_cellvars`记录外部函数中定义的变量，这些变量可以被内部函数引用。
内部函数用于`co_freevars`记录外部函数中定义的变量，供以后使用。

例子：

```
# python3
Python 3.4.5 (default, May 29 2017, 15:17:55) 
[GCC 4.8.5 20150623 (Red Hat 4.8.5-11)] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> def foo(n):
...     a = 1
...     def g(n):
...             return a - n
...     return g
... 
>>> foo.__closure__
>>> foo.__code__.co_freevars
()
>>> foo.__code__.co_cellvars
('a',)
>>> foo(0).__closure__
(<cell at 0x7f2cd98db1c8: int object at 0x7f2cd9847960>,)
>>> foo(0).__closure__[0].cell_contents
1
>>> foo(0).__code__.co_freevars
('a',)
>>> foo(0).__code__.co_cellvars
() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T11:56:58.627

```
>>> def f():
...     a = "HELO"
...     b = 1.0
...     def w(c):
...         return a,b,c
...     return w

>>> w = f()
>>> w.__closure__
(<cell at 0xa05c4ac: str object at 0x9e91b74>, <cell at 0xa05c3bc: float object at 0xb733dde8>)
>>> w.__closure__[0].cell_contents
'HELO'
>>> w.__closure__[1].cell_contents
1.0 
```

我从未见过其他地方使用过的**细胞类型。**它似乎是专门为保存闭包变量而设计的。

# mysql - Symfony2 在 AJAX 调用中返回空 JSON，而变量不为空

> ID：14413947
> 
> 赞同：6
> 
> 时间：2013-01-19T11:41:38.117
> 
> 标签：mysql, ajax, symfony, doctrine-orm

# 问题

我正在尝试获得 AJAX 响应，以便我可以摆弄它以使我的表单更易于使用。当我使控制器（下面的代码）返回正常响应时`var_dump()`，我得到了对象的输出，所以我知道查询没有错（我使用 ID 1 进行查询以进行调试）。但是，当我返回输出时`json_encode()`，我只会得到一个空的 JSON 文件。

## 视图中的 HTML 表单

```
<div id="content">
    <form id="myForm" action="{{path('snow_ajax')}}" method="POST" >
        Write your name here:
        <input type="text" name="name" id="name_id" value="" /><br />
        <input type="submit" value="Send" />
    </form>
</div> 
```

## 同一视图中的脚本

```
<script type="text/javascript">
    $(document).ready(function() {

        $("#myForm").submit(function(){
            var url=$("#myForm").attr("action");

            $.post(url,{
                formName:"ajaxtest",
                other:"attributes"
            },function(data){

                if(data.responseCode==200 ){
                    alert("Got your json!");
                }
                else{
                    alert("something went wrong :(");
                }
            });
            return false;
        });
    });
</script> 
```

## 响应正常的控制器（工作）

```
public function ajaxAction()
{

    $location = $this->getDoctrine()->getRepository('SnowFrontBundle:Location')
        ->find(1);

    $output = var_dump($location);

    return $output;
} 
```

## 具有 AJAX 响应的控制器（不起作用，返回空 JSON）

```
public function ajaxAction()
{

    $location = $this->getDoctrine()->getRepository('SnowFrontBundle:Location')
        ->find(1);

    return new Response(json_encode($location), 200);
} 
```

有人可以帮我吗？这让我发疯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T11:55:09.883

我设法通过使用 Doctrine2 的实体管理器将结果保存在一个数组中来修复它，然后我继续将它编码为 JSON。我不确定这是否是最干净的方法（根据我的 IDE，getEntityManager() 似乎已被弃用），但它现在工作正常。

```
public function ajaxAction()
{
    $em = $this->getDoctrine()->getEntityManager();
    $query = $em->createQuery('SELECT l FROM Snow\FrontBundle\Entity\Location l WHERE l.id=:id');
    $query->setParameter('id', 1);
    $result = $query->getArrayResult();

    return new Response(json_encode($result), 200);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T05:10:34.073

发生这种情况是因为`json_encode()`不知道如何将对象（除了`StdClass`）序列化为 JSON。至少有两种方法可以解决这个问题：

1.  如果您使用的是 PHP 5.4 或更高版本，则可以让您的对象实现[`JsonSerializable`](http://www.php.net/manual/en/class.jsonserializable.php)，当您调用对象时 PHP 将使用`json_encode()`该对象。
2.  如果您使用的是 PHP 5.3 或更早版本，则可以使用 Symfony 的[`Serializer`](http://symfony.com/doc/current/components/serializer.html)组件通过多种不同的方法将对象转换为 JSON。我不会解释具体怎么做，因为文档很清楚。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T08:03:40.810

代码示例：

```
$entity = // Get some entity
$result = array(
    'id' => $entity->getId(),
    'name' => $entity->getName()
);

return new Response(json_encode($result)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-20T05:42:30.587

如果要取回数据，则必须使用查询存储库 (dsl) 并在`$query`变量上使用该`getArrayResult()`方法。这使您可以直接获取数组。

# java - 使用带有 USB 链接的网络

> ID：14413948
> 
> 赞同：0
> 
> 时间：2013-01-19T11:41:39.330
> 
> 标签：java, android, network-programming, usb, wifi

我想知道是否可以在带有usb链接的android应用程序上使用我的计算机的网络（例如互联网），所以不要使用wi-fi。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:55:36.253

检查这个[http://www.codeproject.com/Articles/191930/Android-Usb-Port-Forwarding](http://www.codeproject.com/Articles/191930/Android-Usb-Port-Forwarding) 我不确定我是否理解你的问题。如果这不是解决方案，请尝试更具体。

# ios - Nimbus NIToolbarPhotoViewController 图像清脆效果

> ID：14413949
> 
> 赞同：2
> 
> 时间：2013-01-19T11:41:42.017
> 
> 标签：ios, uiscrollview, nimbus-ios

我正在使用[Nimbus](https://github.com/jverkoey/nimbus)显示带有擦洗器和可缩放图像视图的相册。我使用网络图像，并在加载最终图像之前显示缩略图。`NIPhotoAlbumScrollView`提供了`didLoadPhoto:atIndex:photoSize:`实现这一目标的方法。

从[源代码注释](https://github.com/jverkoey/nimbus/blob/e9ec6d0db885cb3deda0129921e1cb230d412506/src/photos/src/NIPhotoScrollView.m#L480)来看，`NIPhotoScrollView`应该支持“图像清晰效果” - 显示缩略图，当加载全尺寸图像时，在不丢失缩放状态的情况下锐化图像。

这个功能似乎坏了。加载缩略图时，它以 1:1 的像素大小显示，在屏幕上非常小。当加载全尺寸图像时，它也以 1:1 像素大小（如果小于可用视图大小）加载，这**使得图像在视觉上跳跃更大**。

关于如何解决该问题的任何想法？

请注意，我尝试使用尺寸*大于*或*小于*`NIToolbarPhotoViewController`屏幕尺寸的全尺寸图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:29:53.833

您可能已经这样做了，但要确定一件事：

在您`photoAlbumScrollView:photoAtIndex:photoSize:isLoading:originalPhotoDimensions:`为协议实现的地方`NIPhotoAlbumScrollViewDataSource`，您必须执行以下操作，如[源代码中的这些评论中所述](https://github.com/jverkoey/nimbus/blob/e9ec6d0db885cb3deda0129921e1cb230d412506/src/photos/src/NIPhotoAlbumScrollViewDataSource.h#L54-L55)：

```
 * If you have a thumbnail in memory but not the full-size image yet, then you should return
 * the thumbnail, set isLoading to YES, and set photoSize to NIPhotoScrollViewPhotoSizeThumbnail. 
```

# newlisp - 使用newLISP时如何通过TCP发送字节数组

> ID：14413951
> 
> 赞同：1
> 
> 时间：2013-01-19T11:42:08.930
> 
> 标签：newlisp

我想通过 TCP 向服务器发送两个字节，它们代表 big-endian 中的无符号短字节。但是 net-send 只支持字符串参数。谁能告诉我如何用 newLISP 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T14:27:20.067

现在可以了。代码：全选

> (set 'socket (net-connect "localhost" 8889)) 16 (set 'size (pack ">d" 19)) "\000\019" (net-send socket size) 2

pack 返回一个包含我的两个字节的字符串缓冲区，net-send 将字符串发送到服务器。我的 C++ 服务器有两个字节，0 和 19。谢谢。

# java - java.lang.NumberFormatException：java.math.BigDecimal 处的无限或 NaN

> ID：14413952
> 
> 赞同：0
> 
> 时间：2013-01-19T11:42:20.380
> 
> 标签：java, jakarta-ee

我有以下代码

```
double a = 29.0;
double b = 9.0;
double c = 4.0;
BigDecimal sum= new BigDecimal(0.0);
sum=sum.add(new BigDecimal(Math.log10((a)/(b*c) /Math.log10(2))); 
```

我尝试使用 double 作为 sum 而不是 BigDecimal 但它给了我无穷大的结果。当我使用 BigDecimal 时，我没有得到任何结果，但错误提示：

> 线程“主”java.lang.NumberFormatException 中的异常：java.math.BigDecimal 处的 Infinite 或 NaN。（未知来源）

请提供任何帮助，因为这是我第一次处理大数字注意：a，b，anc c 值将通过循环更改，因此我必须保存总和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T11:45:20.167

~~`(a)/(b*c) /Math.log10(2)`是负数，所以取它的对数给出`NaN`.~~ **其实，这是胡说八道，不是消极的。我不知道你为什么会在那里得到一个例外。**

看起来您实际上只是在尝试执行 log [2]，在这种情况下，您只是将括号放在了错误的位置，

# join - CouchDB 相当于 Sql NOT IN？

> ID：14413953
> 
> 赞同：7
> 
> 时间：2013-01-19T11:42:24.260
> 
> 标签：join, couchdb, contains, notin

我正在寻找与以下 LinQ 查询等效的 CouchDB JS 视图：

```
 var query =
        from f in context.Feed
        where !(from ds in context.DataSource
                select ds.Feed_ID)
        .Contains(f.ID)
        select f; 
```

其中 DataSources 有一个 Feed 的外键。

一句话：获取所有与数据源无关的提要

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T15:36:03.317

您可以使用[视图排序规则](http://wiki.apache.org/couchdb/View_collation)在地图中加入提要和数据源：

```
function(doc) {
  if (!doc.type) return;
  if (doc.type == "feed") emit(doc._id, null);
  if (doc.type == "ds" && doc.feed) emit(doc.feed, null);
} 
```

并减少以过滤那些具有链接到它们的数据源文档的提要 id。例如。使用[内置](http://wiki.apache.org/couchdb/Built-In_Reduce_Functions) `_count`和查询[group_level](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)：

```
http://127.0.0.1:5984/test/_design/join/_view/not_in?group_level=1 
```

对于数据库：

```
{"id":"1", "type":"feed"}
{"id":"2", "type":"feed"}
{"id":"3", "type":"ds", "feed":1}
{"id":"4", "type":"ds", "feed":1}} 
```

会给你：

```
{"rows":[
{"key":"1","value":3},
{"key":"2","value":1}
]} 
```

值`>1`是那些从数据源引用的提要文档。要获得没有数据源的纯提要列表，您可以`value>1`在客户端或[列表功能](http://wiki.apache.org/couchdb/Formatting_with_Show_and_List#Listing_Views_with_CouchDB_0.10_and_later)中省略记录。

**编辑：**具有列表功能：

```
function(head, req) {
  var row;
  while (row = getRow()) {
    if (row.value == 1)
      send(row.key + "\n");
  }
} 
```

和查询：

```
http://127.0.0.1:5984/test/_design/join/_list/not_ds/not_in?group_level=1 
```

您将获得带有提要文档的最终结果，而无需参考数据源。它是带有 id 列表的纯文本，您也可以将其格式化为 JSON 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:15:39.487

*对 Sql NOT IN 的 CouchDB 等价物*的直接回答是：**没有等价物。**[couchdb 视图 API](http://wiki.apache.org/couchdb/HTTP_view_API#View_Generation_Options)中没有针对*NOT IN* 的查询选项。

但是，可能有其他方法可以实现您的目标，具体取决于您是否有兴趣获取*与无数据源关联的*提要或*与特定数据源不关联的*提要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T17:40:54.670

我知道这是一篇旧帖子，但是遇到了同样的问题，我认为 Marcin 的回答是正确的，但不完整。

***在我的情况下，我使用以下列表函数来选择获取除具有特定excludeId***的行之外的所有行：

```
function(head, req) {
start({ 'headers': { 'Content-Type': 'application/json' } });
 var rows = [];
 while (row = getRow()) {
    if (!req.query.exceptId || doc.documentId != req.query.exceptId) {
        rows.push(row);
    }
 }
 send(JSON.stringify({ total_rows: rows.length, rows: rows }));
} 
```

[你可以在这里](http://www.coding-dude.com/wp/web-design/javascript/what-is-couchdb-equivalent-of-sql-not-in-or-not-equals/)阅读更多

# gwt - 数据网格的最后一行显示为不可选择

> ID：14413954
> 
> 赞同：1
> 
> 时间：2013-01-19T11:42:31.403
> 
> 标签：gwt, datagrid

如果光标稍微超出行的底部，则数据网格的最后一行显示为不可选择。这可以在[陈列柜](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwDataGrid)中重现。对于行高较小的行，这可能是个问题。它的效果是该行似乎是不可选择的。有人注意到了吗？有解决方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:08:31.517

我也有同样的问题。在顶部单击时，选择正常显示，但在单元格的中间下方，选择不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T15:06:56.733

这是一个已知问题（不幸的是）：[https ://code.google.com/p/google-web-toolkit/issues/detail?id=7576](https://code.google.com/p/google-web-toolkit/issues/detail?id=7576)

# c# - 实体框架中的 One2One 关系

> ID：14413957
> 
> 赞同：0
> 
> 时间：2013-01-19T11:42:49.577
> 
> 标签：c#, sql, asp.net-mvc, frameworks, entity

我很感兴趣如何在不使用 Fluent API 的情况下使用实体框架实现两个表之间的一对一关系，而只需使用数据注释。这可能吗 ？如果是的话，有人可以给我一个示例代码吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:08:59.817

也许，ForeignKeyAttribute (FW 4.5) 会帮助你。

# php - include() inside 函数：return 出乎意料地工作

> ID：14413958
> 
> 赞同：0
> 
> 时间：2013-01-19T11:42:51.157
> 
> 标签：php, return, external

所以，我想让我的班级包含另一个文件，该文件依次执行 return 语句......

```
class layout {
    public static function make($file) {
        include $file;
    }
} 
```

我有一个`mylayout.layout.php`

```
<?php 
return true; 
```

然后我做

```
echo layout::make('mylayout.layout.php'); 
```

结果是`null`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T11:47:01.140

`include`不等于复制粘贴代码。您没有`return`从该`layout::make`方法中执行任何操作，因此不会返回任何 ( `null`)。您*必须*在类中编写`return`代码才能从方法中返回某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:47:28.057

我在 IRC 上收到了回复。问题是，从外部文件返回到包含函数。所以我必须返回 (include 'mylayout.layout.php'); 的值

我还通过重新格式化我的谷歌问题找到了这篇文章：[从包含文件返回](https://stackoverflow.com/questions/1314162/return-from-include-file)

# asp.net - 如何以编程方式更改 GridView 上自动生成的编辑按钮的名称

> ID：14413961
> 
> 赞同：1
> 
> 时间：2013-01-19T11:42:53.543
> 
> 标签：asp.net, gridview

我想在代码隐藏中重命名我的网格视图的编辑和删除按钮。我没有从设计视图静态创建按钮，它们是在文件后面的代码中以编程方式创建的，如下所示：

```
gw.AutoGenerateEditButton = true; 
gw.AutoGenerateDeleteButton = true; 
```

我的 GridView 中没有 <TemplateField> 也没有任何 <ButtonField>。如何从后面的代码中更改我的编辑和删除按钮的名称？

# ruby - 无法使用 RSA.rb 解密字符串：Ruby 的 RSA 加密

> ID：14413964
> 
> 赞同：0
> 
> 时间：2013-01-19T11:43:14.237
> 
> 标签：ruby, rsa, encryption

我必须加密一个特定的字段值并存储在数据库中。我已经为 Ruby 使用了 RSA 加密。我能够加密并保存它，但是在解密回来时，我遇到了问题。我所做的如下，

```
key_pair = RSA::KeyPair.generate(512) 
```

将 key_pair 存储在单独的列中。

```
ciphertext = key_pair.encrypt("Hello, world!") 
```

将密文存储在同一张表的另一列中。

解密时，我从数据库中获取 key_pair 值并应用解密函数

```
plaintext = key_pair.decrypt(ciphertext) 
```

此步骤会引发错误

```
NoMethodError: undefined method `decrypt' for <String:0xa431b88> 
```

因为“key_pair”不是“RSA::KeyPair”的一个实例。

当我尝试解密存储的值时，我从数据库中获取 key_pair 值，然后对其应用解密方法。所以 key_pair 值具有 String 类。我需要一个方法来解决。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:57:23.857

在解密之前，请尝试：

```
# get persisted value from DB; then
key_pair = RSA::KeyPair.new(your private key, your public key)

# and then decrypt
plaintext = key_pair.decrypt(ciphertext) 
```

# java - 使用 crawler4j 下载 js 文件

> ID：14413965
> 
> 赞同：2
> 
> 时间：2013-01-19T11:43:14.937
> 
> 标签：java, web-crawler, crawler4j

我正在尝试使用[crawler4j](http://crawler4j.googlecode.com)下载一些网站。我唯一的问题是，即使我为函数`.js`中的所有文件返回 true `shouldVisit`，它们也永远不会被下载。

```
@Override
public boolean shouldVisit(WebURL url) {
    return true;
}

@Override
public void visit(Page page) {
    String url = page.getWebURL().getURL();
    System.out.println("URL: " + url);
} 
```

文件的 URL`.js`永远不会被打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:03:50.063

看源码，原因在[HTMLContentHandler 类](https://code.google.com/p/crawler4j/source/browse/src/main/java/edu/uci/ics/crawler4j/parser/HtmlContentHandler.java)中。

该类负责从下载的网页中提取链接。**脚本**标签永远不会被处理。

如果你想下载.js文件，我建议你克隆项目，扩展这个类，很简单。您还需要修改调用 HTMLContentHandler 的 WebCrawler。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:37:55.680

我注意到 crawler4j 没有处理“<script>”标签。这是所有“.js”文件出现的地方。所以我不认为问题仅限于“.js”文件——我认为它是“<script>”标签中的任何东西（通常恰好是“.js”文件）。

最初看起来修改 HtmlContentHandler 的 Enumeration 和 startElement() 方法会解决问题。我试过了，但没有用。在调试它时，我观察到 Tika Parser 或 TagSoup（Tika 使用）没有拾取脚本标签。结果，它甚至从未到达 crawler4j 进行处理。

作为一种解决方法，我使用 JSoup 在我的 visit() 方法中解析所有“<script>”标签的 HTML，然后安排对这些文件进行爬网。

我认为真正的解决方案是确定为什么 Tika（或 TagSoup）没有选择脚本标签。这可能是 crawler4j 调用它的方式。一旦解决了这个问题，修改 HtmlContentHandler 就可以了。

# python - 为什么 next 会引发“StopIteration”，但“for”会正常返回？

> ID：14413969
> 
> 赞同：85
> 
> 时间：2013-01-19T11:44:06.003
> 
> 标签：python, iterator, generator, stopiteration

在这段代码中，为什么 using 会`for`导致 no`StopIteration` 或者`for`循环捕获所有异常然后静默退出？在这种情况下，为什么我们有多余的`return`?? 或者是由以下 `raise StopIteration`原因引起的：`return None`？

```
#!/usr/bin/python3.1
def countdown(n):
    print("counting down")
    while n >= 9:
        yield n
        n -= 1
    return

for x in countdown(10):
    print(x)

c = countdown(10)
next(c)
next(c)
next(c) 
```

假设`StopIteration`被触发：`return None`。什么时候`GeneratorExit`生成？

```
def countdown(n):
    print("Counting down from %d" % n)
    try:
        while n > 0:
            yield n
            n = n - 1
    except GeneratorExit:
        print("Only made it to %d" % n) 
```

如果我手动执行：

```
c = countdown(10)
c.close() #generates GeneratorExit?? 
```

在这种情况下，为什么我看不到回溯？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-19T11:46:14.343

`for`循环`StopIteration`显式侦听。

该`for`语句的目的是遍历迭代器提供的序列，异常用于表示迭代器现在完成；`for`不会捕获被迭代的对象引发的其他异常，只是那个异常。

这是因为这`StopIteration`是一个正常的、预期的信号，它告诉正在迭代的任何人没有更多的东西可以产生。

生成器函数是一种特殊的迭代器；它确实`StopIteration`在函数完成时引发（即当它返回时，所以是的，`return None`引发`StopIteration`）。这是迭代器的要求；他们完成后*必须*举起`StopIteration`；事实上，一旦 a`StopIteration`被引发，试图从它们那里获取另一个元素（通过`next()`，或在迭代器上调用`.next()`(py 2) 或`.__next__()`(py 3) 方法）*必须*总是再次引发`StopIteration`。

`GeneratorExit`*在另一个*方向进行通信是一个例外。您正在使用表达式显式*关闭*生成器，`yield`Python 将该闭包传达给生成器的方式是通过`GeneratorExit`在该函数内部引发。您在 内部显式捕获该异常`countdown`，其目的是让生成器在关闭时根据需要清理资源。

A`GeneratorExit`不会传播给调用者；请参阅[`generator.close()`文档](https://docs.python.org/3/reference/expressions.html#generator.close)。

# machine-learning - 支持向量机的多特征组合

> ID：14413975
> 
> 赞同：1
> 
> 时间：2013-01-19T11:45:58.620
> 
> 标签：machine-learning, svm

我有两种类型的特征向量`dataset`。通过训练 SVM，两种类型的特征向量都可以提供大约 90% 的预测准确率。

为了获得更高的准确率，我计划将这两种类型的特征向量结合起来。

我的问题是我应该采取以下两种策略中的哪一种：

1.  为每种类型的特征向量训练一个 SVM，然后将预测结果线性组合。
2.  将两种类型的特征向量合并为一个较长的特征向量，然后训练一个 SVM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:01:26.280

没有办法说哪一个会让你获得更好的准确性。只需尝试看看:)

# html - 如何在 HTML5 和 CSS3 中自动弹出模态窗口

> ID：14413982
> 
> 赞同：0
> 
> 时间：2013-01-19T11:46:28.027
> 
> 标签：html, css, modal-dialog

我在网上找到了一些代码，允许我创建和设计一个模式窗口，供访问者注册我们的时事通讯，但我希望这个模式窗口在打开索引页面时自动弹出。到目前为止，我只能找到依赖于用户单击超链接的模式窗口。有没有我可以用来自动打开模态窗口的功能或自动加载超链接的方法。

这是我用来创建模态窗口的链接。[关联](http://designwebsiteblog.com/design/web-design/creating-a-modal-window-with-html5-css3.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:39:38.650

您可以使用[**关键帧动画**](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)（[**支持**](http://caniuse.com/#feat=css-animation)）。就像是：

```
.modalDialog {
   /* other styles */
   animation: showup .5s;
}
@keyframes showup { to { opacity: 1; } } 
```

不过要小心`pointer-events`。它们不适用于任何版本的 IE 或 Opera -[请参阅**CSS 中对指针事件的支持**](http://caniuse.com/#feat=pointer-events)。

我刚刚做了一个非常简单的[演示。](http://dabblet.com/gist/4572783)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-04T10:48:14.783

试试这个它对我有用

```
<script type="text/javascript">    
    $(function () {    
        $("#dialog").dialog({    
            modal: true,    
            autoOpen: false,
            title: "jQuery Dialog",    
            width: 300,    
            height: 150    
        });    
        $("#btnShow").click(function () {    
            $('#dialog').dialog('open');    
        });    
    });    
</script> 
```

参考：[Open-Show-jQuery-UI-Dialog-Modal-Popup-on-Button-Click](https://www.aspsnippets.com/Articles/Open-Show-jQuery-UI-Dialog-Modal-Popup-on-Button-Click.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-14T16:06:36.280

您始终可以在 span 或 div 中包含到模态窗口的链接。然后在使用 jquery 的页面加载时使用 .click() 函数自动加载它。

# java - 如何检查 String[] 索引是否存在？

> ID：14413986
> 
> 赞同：2
> 
> 时间：2013-01-19T11:46:40.540
> 
> 标签：java

我有一个`String[]`并且我想检查其中是否存在索引（例如 String[3]）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T11:48:44.163

```
if (arr != null && i >= 0 && i < arr.length) {
  // arr[i] exists
} 
```

如果`arr`是对象数组，可能还需要检查是否`arr[i]`为空：

```
if (arr != null && i >= 0 && i < arr.length && arr[i] != null) {
  // arr[i] exists and is not null
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T11:48:14.353

现有索引不一定意味着**非空**数组条目，请小心。

```
String[] array = ...
int index = 3;

if(array.length > index && index >= 0)
  // it exists. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-19T11:49:10.220

```
public boolean indexExists(String[] array,int index){
    if(array!=null && index >= 0 && index < array.length)
        return true;
    else 
       return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:41:58.910

```
public boolean DoesIndexExists(String []arr, int index){
   if( arr != null && index >= 0 && index < arr.length &&  )
       return true;

   return false;
} 
```