# StackOverflow 问答 14568000-14568999

# javascript - js文件的导入顺序

> ID：14568003
> 
> 赞同：0
> 
> 时间：2013-01-28T17:47:23.320
> 
> 标签：javascript, jquery

在 jsp 文件中导入库：

```
<script type="text/javascript" src="mylibrary.js"></script> 
```

然后在需要此库的 .jsp 中进一步执行代码：

```
<script type="text/javascript">
//various calls take place to myLibrary.js
<script> 
```

我想将 javascript 函数/函数调用提取到外部 .js 文件中。所以替换：

```
<script type="text/javascript">
//various calls take place to myLibrary.js
<script> 
```

和 ：

```
<script type="text/javascript" src="newfile.js"></script> 
```

其中“newfile.js”包含函数/函数调用。

这是否意味着我需要在 "newfile.js" 中导入 "mylibrary.js" ？

javascript/jquery 的导入顺序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:50:25.470

> 这是否意味着我需要在 "newfile.js" 中导入 "mylibrary.js" ？

不。就执行顺序和范围而言，内联脚本和远程脚本没有区别。

> javascript/jquery 的导入顺序是什么？

如果在您尝试调用函数之前尚未解析包含（或获取）函数声明的脚本元素，则会出现错误。

如果要调用由 jQuery 定义的函数，则必须将`<script>`加载 jQuery 的`<script>`代码放在加载调用 jQuery 函数的代码之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:54:32.630

如果您的网页中有多个 javaScript 文件，并且您想确保所有内容都已加载，那么在您想要使用它时，您可以使用：

*   `$(document).ready()`（或等价物）或
*   您可以在交付之前以正确的顺序为您的网页连接文件。

# php - 如何更改“zend_log”中的日期格式

> ID：14568006
> 
> 赞同：4
> 
> 时间：2013-01-28T17:47:33.240
> 
> 标签：php, zend-log

如何更改 Zend_Log 的日期格式？

现在每个新日志条目前面都添加了带有时间戳的日期：
“2013-01-28T16:47:54+01:00 ... some log message ...”

但我想将此日期格式化为：
“Ymd H:i:s ... some log message ...”

我的代码如下所示：

```
class Game_Logger {

    public function __construct($val, $txt = null) {
        $writer = new Zend_Log_Writer_Stream(APPLICATION_PATH . '/../log/log.log');
        $logger = new Zend_Log($writer);
        if (is_array($val)) {
            $output = Zend_Debug::dump($val, null, false);
        } else {
            $output = $val;
        }
        if($txt){
            $output = $txt.' '.$output;
        }
        $logger->info($output);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T16:07:02.520

可能这将解决您的问题：

`$logger->setTimestampFormat("H:i:s");`
但有些事情告诉我你已经想通了；）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-14T08:25:45.080

对于 Zend Framework 2 和 3，下面的代码可能会有所帮助

```
 $logger = new \Zend\Log\Logger();

    $formatter = new  \Zend\Log\Formatter\Simple();
    $formatter->setDateTimeFormat('Y-m-d'); // as per your choice

    $writer = new \Zend\Log\Writer\Stream('php://output');
    $writer->setFormatter($formatter);
    $logger->addWriter($writer); 
```

# javascript - 在jQuery中如何将对象转换为浮点数

> ID：14568012
> 
> 赞同：-1
> 
> 时间：2013-01-28T17:47:58.420
> 
> 标签：javascript, jquery

我实现了以下函数来计算表单的总值：

```
$('tr').each(function(index, element) {
    if( ($(this).find('input.operation').val() == "add") || ($(this).find('select.operation').val()=="add")) {
         total = parseFloat($(this).find('input.subtotal').val( $('input:eq(1)',this).val() * $('input:eq(2)',this).val() ));
         console.log(subtotal);
    } else {
        console.log( $(this).find('input.subtotal').val( $('input:eq(1)',this).val() * $('input:eq(2)',this).val() ) );         
    }
}); 
```

但是当我看到控制台日志时，它只说：

`[prevObject: e.fn.e.init[1].....`

而不是显示实际值，所以我的问题是如何从 Object 转换为 float？

parseFloat 似乎不起作用（显然是因为它只将字符串转换为浮点数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:50:06.307

当您设置值时，它不会返回实际值，而是返回当前的 jQuery 对象。将变量设置为结果`.val()`并将其打印出来：

```
var value = $(this).find('input.subtotal').val( $('input:eq(1)', this).val() * 
           $('input:eq(2)', this).val() ).val();

console.log( value ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:49:18.653

代替

```
 total = parseFloat($(this).find('input.subtotal').val( $('input:eq(1)',this).val() * $('input:eq(2)',this).val() )); 
```

和

```
 total = parseFloat($('input:eq(1)',this).val())
        * parseFloat($('input:eq(2)',this).val());
  $(this).find('input.subtotal').val( total ); 
```

`$(...).val(...)`返回启用链接的对象集，它不返回值。

# xcode - 如何访问不同 ViewController 中的 CoreData 实体？指针似乎在 dealloc 时保留

> ID：14568013
> 
> 赞同：0
> 
> 时间：2013-01-28T17:48:03.083
> 
> 标签：xcode, core-data, entity, nsfetchedresultscontroller, dealloc

我目前正在尝试找出访问不同实体的最佳方法`UIViewControllers`。我目前正在使用以下似乎具有最少活动字节的内容：

视图控制器 1 在它想要呈现下一个视图时调用它：

```
fdvc = [[FormDescriptionViewController alloc] initWithNibName:@"FormDescriptionViewController" bundle:nil andDescriptionEntity:mapEntity.desc]; 
```

并且 View Controller 2 ( `FormDescriptionViewController`) 使用以下设置：

`.h`

```
@property (nonatomic, retain) DescriptionEntity *descriptionEntity;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andDescriptionEntity: (DescriptionEntity *)descE; 
```

`.m`

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andDescriptionEntity: (DescriptionEntity *)descE
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        self.descriptionEntity = descE;
    }
    return self;
} 
```

使用此方法时，我在 viewDidLoad 中执行以下操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    [self setTitle:@"Form Description"];

    [self.textViewTitle setText:[NSString stringWithString:self.descriptionEntity.map.sName]];

    [self.textViewTitle addObserver:self forKeyPath:@"contentSize" options:(NSKeyValueObservingOptionNew) context:NULL];

    [self.textViewDescription setText:[NSString stringWithString:self.descriptionEntity.sDescription]];

    if (self.descriptionEntity.map.dImage != nil)
    {
        [self.imageView setImage:[UIImage imageWithData:[NSData dataWithData:self.descriptionEntity.map.dImage]]];
    }
    else
        [self.imageView setImage:[UIImage imageNamed:@"wildform.gif"]];

    if ([self.descriptionEntity.map.bDownloaded boolValue] == YES)
        [self.buttonUseForm setTitle:@"Use Map"];
} 
```

这些调用是我唯一与 . 相关的调用`DescriptionEntity`，但是当我弹出视图控制器时，内存永远不会被释放。我进行了堆分析，它告诉我 DescriptionEntity 是罪魁祸首。为了在 dealloc 方法中确认这一点，我尝试`self.descriptionEntity = nil`在`[descriptionEntity dealloc]`. 当控制器弹出时，这会释放内存，但是当我尝试再次推送受控时，我得到了错误的访问权限，所以我认为这现在必须是对 DescriptionEntity 的唯一引用。

我也尝试过使用，`NSFetchedResultsController`但是它使用了我当前方法的两倍以上的活动字节，并且在弹出视图时它也无法再次释放内存。

谁能解释在下一个视图中访问这些数据的最佳方法，有谁知道为什么在调用 dealloc 时我的内存不会再次被释放？

如果您需要任何进一步的信息，请随时询问。

**编辑 1（其中 descriptionEntity 被声明）：**

我目前正在使用 NSFetchedResultsController 来获取我的 MapEntities 的一个子部分并将它们显示在 UITableView 中。When one of the rows is selected I perform the following to pass the DescriptionEntity into the DescriptionViewController:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.viewHasToolbar = YES;

    MapEntity *mapEntity = [_fetchedResultsController objectAtIndexPath:indexPath];

    FormDescriptionViewController *fdvc;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        fdvc = [[FormDescriptionViewController alloc] initWithNibName:@"FormDescriptionViewController" bundle:nil andDescriptionEntity:mapEntity.desc];
    } else {
        fdvc = [[FormDescriptionViewController alloc] initWithNibName:@"FormDescriptionViewController_iPad" bundle:nil andDescriptionEntity:mapEntity.desc];
    }

    [self.navigationController pushViewController:fdvc animated:YES];
    [fdvc release];

    [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

_fetchedResultsController 设置如下：

```
@property (nonatomic, retain) NSFetchedResultsController *fetchedResultsController; 
```

.m

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil)
        return _fetchedResultsController;

    Singleton *singleton = [Singleton sharedSingleton];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"MapEntity" inManagedObjectContext:[singleton managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"sName" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:8];

    // Finally check the results
    NSError *error;
    NSArray *fetchedObjects = [[singleton managedObjectContext] executeFetchRequest:fetchRequest error:&error];
    for (MapEntity *map in fetchedObjects)
    {
        NSLog(@"Maps present in database: %@", map.sName);
    }

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[singleton managedObjectContext] sectionNameKeyPath:nil cacheName:@"Root11"];
    self.fetchedResultsController = theFetchedResultsController;
    self.fetchedResultsController.delegate = self;
    [self.fetchedResultsController performFetch:NULL];
    [fetchRequest release];

    return _fetchedResultsController;
} 
```

# c# - Uri Method Uri.TryCreate Method(String, UriKind, Uri) 改变Uri，不需要

> ID：14568022
> 
> 赞同：0
> 
> 时间：2013-01-28T17:48:39.943
> 
> 标签：c#, uri

我正在使用`Uri.TryCreate`Method (String, UriKind, Uri) 来验证 Uris。但它改变了我的 Uri。例如：

*   原文[http://www.google.de/xjs/_/js/s/sy8,gf,tng,sy43,sy56,sy44,sy57,sy37,sy45,sy91,sy6,sy36,sy38,sy62,sy79,sy90 ,sy103,sy104,sy117,sy7,sy13,mbtt/rt=j/ver=H6TWgc21o-8.en_US./am=BA/d=0/sv=1/rs=AItRSTNxECC1gvngFsB87lvj_RnIn_MdHg](http://www.google.de/xjs/_/js/s/sy8,gf,tng,sy43,sy56,sy44,sy57,sy37,sy45,sy91,sy6,sy36,sy38,sy62,sy79,sy90,sy103,sy104,sy117,sy7,sy13,mbtt/rt=j/ver=H6TWgc21o-8.en_US./am=BA/d=0/sv=1/rs=AItRSTNxECC1gvngFsB87lvj_RnIn_MdHg)
*   操纵 [http://www.google.de/xjs/_/js/s/sy8,gf,tng,sy43,sy56,sy44,sy57,sy37,sy45,sy91,sy6,sy36,sy38,sy62,sy79,sy90 ,sy103,sy104,sy117,sy7,sy13,mbtt/rt=j/ver=H6TWgc21o-8.en_US/am=BA/d=0/sv=1/rs=AItRSTNxECC1gvngFsB87lvj_RnIn_MdHg](http://www.google.de/xjs/_/js/s/sy8,gf,tng,sy43,sy56,sy44,sy57,sy37,sy45,sy91,sy6,sy36,sy38,sy62,sy79,sy90,sy103,sy104,sy117,sy7,sy13,mbtt/rt=j/ver=H6TWgc21o-8.en_US/am=BA/d=0/sv=1/rs=AItRSTNxECC1gvngFsB87lvj_RnIn_MdHg)

该方法删除了链接最后一行中 en_US 之后的一个点。您能告诉我为什么它会更改正确的 URI 吗？或者你能告诉我另一种使用 Uri-Class 来检查 Uri 是否正确的方法吗？（我知道有一些

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:54:18.933

为了验证 Uri 你应该使用`Uri.IsWellFormedUriString`而不是`Uri.TryCreate`方法。

参考：http: [//msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx](http://msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx)

# playframework-2.0 - 如何为 cloudfoundry 中的播放应用程序传递额外的启动参数

> ID：14568029
> 
> 赞同：1
> 
> 时间：2013-01-28T17:49:41.603
> 
> 标签：playframework-2.0, cloud-foundry, playframework-2.1

在 cloudfoundry 上部署 Play!2 应用程序时，我希望能够为启动命令指定至少一个附加参数。

目前，cloudfoundry 使用 Play2 创建的启动脚本似乎没有任何参数，但是要使用特定的生产值覆盖默认应用程序配置，我需要使用 -Dconfig.resource=prod.conf 调用它

我找不到任何方法来做到这一点，也许是通过 manifest.yml 但我无法找到如何添加此参数的规范。

从此 Appart 我能够成功地将 play 2.0 和 play 2.1 应用程序部署到 cloudfoundry

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:20:41.630

阅读 cloudfoundry 工具的源代码后，我发现用于 play 的 vcap-staging 插件不支持 manifest.ml 中的“command”属性，也不需要它。它自动假定应用程序将使用“start”启动（参见[plugin.rb 中的第 10 行](https://github.com/cloudfoundry/vcap-staging/blob/master/lib/vcap/staging/plugin/play/plugin.rb#L10)）。

但是，它[确实尊重](https://github.com/cloudfoundry/vcap-staging/blob/master/lib/vcap/staging/plugin/play/plugin.rb#L41)JAVA_OPTS 环境变量。

最后，我能够做到

```
vmc set-env JAVA_OPTS "-Dconfig.resource=prod.conf" 
```

让它按我的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:48:47.377

实现此目的的一种方法是将构建的 zip 作为独立应用程序提取和上传。正如您可能已经尝试过的那样，在出现提示时将参数放在启动脚本之后作为启动命令行。虽然这会带来一个问题，即您无法利用 CF 为绑定的服务提供“自动重新配置”功能，并且您必须进行单独的配置才能在云上部署。

# scheme - 如何将列表列表转换为单独的列表？

> ID：14568031
> 
> 赞同：0
> 
> 时间：2013-01-28T17:49:45.767
> 
> 标签：scheme

如果我有一个像'（（1 6 7）（4 6 7）（2 6 4））这样的列表列表，我怎样才能将它分成许多列表，以便我可以在这段代码中使用它：

```
(define func
    (lambda (m) ; (m is the list of lists)
        (map list 'm))) 
```

我想将每个子列表中的第一个元素放入一个新列表中，然后将每个列表中的第二个元素放入一个新列表中，一直到每个列表的最后一个元素放入一个新列表中，然后返回这些新列表列表。

现在在代码中，m 是一个列表列表，但是有没有办法将它分成它的子列表，可以在 map 过程中使用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:54:09.677

几乎就在那里 - 将 lambda 主体更改为`(apply map list m)`应该可以解决问题。

# c# - c# DirectoryInfo,GetFiles

> ID：14568037
> 
> 赞同：1
> 
> 时间：2013-01-28T17:50:07.493
> 
> 标签：c#

我有以下代码可以正常工作。我要做的（一次性）是检查目录是否存在，如果存在，我想检查文件夹中是否存在文件。如果是，则返回 Y，否则返回 N：

```
string s = new DirectoryInfo("C:\\EXP_Reports\\36000").Exists
   ? new DirectoryInfo("C:\\EXP_Reports\\36000").GetFiles("EXP Report #36001.pdf")
       .Any() ? "Y" : "N"
   : "N"; 
```

我想知道上面的代码是否可以进一步优化。请注意，我想在一份声明中做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T17:51:35.487

为什么不简单地使用`File.Exists`.

```
bool q = File.Exists(@"C:\EXP_Reports\36000\EXP Report #36001.pdf"); 
```

请参阅[http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)

我还更改了代码以使用 a`bool`而不是`string`包含 Y 或 N的 a。

此外，使用逐字字符串文字`@"..."`会更好地阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:53:05.530

采用

`System.IO.Directory.Exists("...");`

和

`System.IO.File.Exists("...");`

无需实例化任何东西。

如果只需要检查文件是否存在，则不需要检查目录是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:53:08.270

你不能用`string s = File.Exists("C:\\EXP_Reports\\36000\\EXP Report #36001.pdf") ? "Y" : "N";`吗？

# scala - Scala - vals的初始化顺序

> ID：14568049
> 
> 赞同：12
> 
> 时间：2013-01-28T17:50:47.167
> 
> 标签：scala, constructor, initialization, immutability, final

我有这段代码可以从文件中加载属性：

```
class Config {
  val properties: Properties = {
    val p = new Properties()
    p.load(Thread.currentThread().getContextClassLoader.getResourceAsStream("props"))
    p
  }

  val forumId = properties.get("forum_id")
} 
```

这似乎工作正常。

我尝试将初始化移动`properties`到另一个 val,`loadedProperties`中，如下所示：

```
class Config {
  val properties: Properties = loadedProps
  val forumId = properties.get("forum_id")

  private val loadedProps = {
    val p = new Properties()
    p.load(Thread.currentThread().getContextClassLoader.getResourceAsStream("props"))
    p 
   } 
```

}

但它不起作用！（`properties`在 中为空`properties.get("forum_id")`）。

为什么会这样？`loadedProps`引用时不评估`properties`？

其次，这是初始化需要非平凡处理的变量的好方法吗？在 Java 中，我会声明它们`final`的字段，并在构造函数中执行与初始化相关的操作。

Scala 中是否有这种场景的模式？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T18:42:33.380

Vals 是按照它们声明的顺序初始化的（嗯，准确地说，**非惰性**vals 是），所以`properties`在`loadedProps`. 或者换句话说，`loadedProps`仍然是初始化的`null`时候。`properties`这里最简单的解决方案是定义`loadedProps`before `properties`：

```
class Config {
  private val loadedProps = {
    val p = new Properties()
    p.load(Thread.currentThread().getContextClassLoader.getResourceAsStream("props"))
    p 
  }
  val properties: Properties = loadedProps
  val forumId = properties.get("forum_id")
} 
```

你也可以做`loadedProps`惰性，这意味着它将在第一次访问时被初始化：

```
class Config {
  val properties: Properties = loadedProps
  val forumId = properties.get("forum_id")

  private lazy val loadedProps = {
    val p = new Properties()
    p.load(Thread.currentThread().getContextClassLoader.getResourceAsStream("props"))
    p 
  }
} 
```

使用惰性 val 的优点是您的代码对重构更加健壮，因为仅更改 val 的声明顺序不会破坏您的代码。

同样在这种特殊情况下，您可以`loadedProps`变成一个`def`（如@NIA 所建议的那样），因为它只使用一次。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T17:54:53.940

我认为这里`loadedProps`可以简单地通过简单地替换为一个`val`函数`def`：

```
private def loadedProps = {
  // Tons of code
} 
```

在这种情况下，您确定在调用它时会调用它。

但不确定它是否*适合*这种情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-16T12:27:18.883

只是添加了更多解释：

您的字段比此处的`properties`字段更早初始化。是初始化之前的字段值 - 这就是你得到它的原因。如果它只是一个方法调用而不是访问某个字段，那么一切都很好（因为方法的代码可能会被调用多次 - 这里没有初始化）。请参阅[http://docs.scala-lang.org/tutorials/FAQ/initialization-order.html](http://docs.scala-lang.org/tutorials/FAQ/initialization-order.html)。您可以使用或修复它`loadedProps``null``def``def``lazy val`

为什么`def`如此不同？那是因为`def`可能会被调用多次，但是`val`- 只有一次（所以它的第一个也是唯一一个调用实际上是 fileld 的初始化）。

`lazy val`只能在您调用它时进行初始化，因此它也会有所帮助。

另一个更简单的例子：

```
scala> class A {val a = b; val b = 5}
<console>:7: warning: Reference to uninitialized value b
       class A {val a = b; val b = 5}
                        ^
defined class A

scala> (new A).a
res2: Int = 0 //null 
```

更一般地说，理论上scala可以分析字段之间的依赖图（哪个字段需要其他字段）并从最终节点开始初始化。但实际上每个模块都是单独编译的，编译器甚至可能不知道这些依赖关系（甚至可能是 Java，它调用 Scala，它调用 Java），所以它只是进行顺序初始化。

因此，正因为如此，它甚至无法检测到简单的循环：

```
scala> class A {val a: Int = b; val b: Int = a}
<console>:7: warning: Reference to uninitialized value b
       class A {val a: Int = b; val b: Int = a}
                             ^
defined class A

scala> (new A).a
res4: Int = 0

scala> class A {lazy val a: Int = b; lazy val b: Int = a}
defined class A

scala> (new A).a
java.lang.StackOverflowError 
```

实际上，理论上可以在单独的构建中检测到这样的循环（在一个模块内），但它没有多大帮助，因为它很明显。

# php - 验证表单 php

> ID：14568053
> 
> 赞同：-3
> 
> 时间：2013-01-28T17:51:01.910
> 
> 标签：php, html

有几种项目的分数形式，例如：

```
<option value="1"> 1 </option>
<option value="2"> 2 </option>
<option value="3"> 3 </option> 
```

问题是可以通过萤火虫更改该值，即更正`value="3"`为`value="30"`- 我们将拥有 - 30，如何验证这样的表单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:52:30.487

```
 $possible_values = array(1,2,3);
   $val = (int) $_POST['input'];
   if( !in_array( $val, $possible_values)){
     //error
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:55:32.750

```
if( in_array( $Int , range( $Min , $Max ) ) ) 
```

尝试这个

# .net - 即使使用双缓冲 GDI+ 也会闪烁

> ID：14568056
> 
> 赞同：1
> 
> 时间：2013-01-28T17:51:11.663
> 
> 标签：.net, gdi+, gdi, flicker, double-buffering

我正在尝试将一个小图像从左侧移动到屏幕右侧。

我将用户控件的样式设置为：

```
 this.SetStyle(ControlStyles.Opaque, true);
    this.SetStyle(ControlStyles.UserPaint, true);
    this.SetStyle(ControlStyles.ResizeRedraw, true);
    this.SetStyle(ControlStyles.AllPaintingInWmPaint, true); 
```

在我的`OnPaint`处理程序中，我将对象绘制到一个`BufferedGraphics`实例，这是我的屏幕外缓冲区，然后`e.Graphics`使用单个调用将结果 BitBlt 到引用。

因此，我似乎按照书本做了所有事情，以进行超流畅的无闪烁绘图，但我仍然可以看到对象有点口吃。

所以基本上剩下两种可能性：正在调用的 Timer`.Invalidate(DirtyRect)`没有以恒定的时间间隔精确触发，导致对象出现断断续续的现象，或者 BitBlt 没有按预期工作。

有谁知道可能是什么问题？

更新：再想一想，它看起来更像是撕裂，而不是口吃或闪烁。因为有时对象似乎错过了最后几个像素。我将研究利用 VSYNC 的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T20:21:16.237

这可能完全没有帮助，但我遇到了类似的问题，我花了很长时间才弄清楚，所以我会提到它。由于我的 CPU 在多个内核上管理性能计数器的方式，我遇到了一个特定于硬件的问题，它破坏了计时器的准确性。

长话短说，在升级计算机之前，我必须在单核上运行主要的 OpenGL 循环。如果在屏幕上移动字形之前运行以下代码（或类似代码）有帮助，那么您将遇到同样的问题。这是 C# 版本。

```
Process.GetCurrentProcess().ProcessorAffinity = (IntPtr)1; 
```

我希望这有帮助。但是，我也希望这不是你的问题。小心。

# python - 检查输入中的部分匹配到具有不同前缀的有效参数列表

> ID：14568066
> 
> 赞同：0
> 
> 时间：2013-01-28T17:51:37.773
> 
> 标签：python, python-3.x

所以我正在开发一个基于文本的游戏，我希望用户在其中输入他们的下一个动作。我正在尝试找出一种对其进行编码的方法，以便它可能不那么“挑剔”。我希望游戏接受部分输入（例如 n 而不是北），我也希望它忽略诸如“go”之类的前缀。

我已经用 for 循环计算出部分输入，它也接受带有“go”前缀的输入。但是，如果我只是键入“go”而不输入方向，则默认为“north”，这是我的有效命令列表的第一部分。给出空输入时也会出现此问题。

我现在正在寻找的是一种让前缀变化的方法，例如在地图前使用“检查”或在南前使用“步行”。当输入仅包含前缀而不是实际命令时，我还需要让它识别。

这是目前的相关代码。

```
move_input = input("You silently ask yourself what to do next.\n").lower()
    for n in valid_moves:
        if n.startswith(move_input) or ("go " + n).startswith(move_input):
            move_input = n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:58:06.793

您可以尝试将其拆分为单词：

```
noise = ['go', 'check', 'walk']
commands = [word for word in move_input if word not in noise]
# process commands 
```

如果你想为不同的命令使用不同的前缀，你可以有类似的东西：

```
prefixes = {('map', 'inventory'): ('check',),
            ('north', 'south', 'east', 'west'): ('go', 'walk')}
commands = [word for word in move_input if word not in noise]
if len(commands) == 1:
   command = commands[0]
else:
    assert len(commands) == 2 # or decide what to do otherwise
    for com, pref in prefixes.items():
        if commands[0] in pref and commands[1] in com:
           command = commands[1]
           break
    else:
        print('Invalid command') 
```

但它开始看起来太复杂了。

# python - 在 Mac OS X 上安装 Pandas：ImportError (cannot import name hashtable)

> ID：14568070
> 
> 赞同：13
> 
> 时间：2013-01-28T17:51:55.877
> 
> 标签：python, hashtable, pandas, cython, importerror

我想从源代码构建熊猫而不是使用包管理器，因为我有兴趣做出贡献。**我第一次**尝试构建 pandas 时，我采取了以下步骤：

1）创建了virtualenv `mkvirtualenv --no-site-packages pandas`

2）激活virtualenv

3) 安装 Anaconda CE。但是，它安装在 ~/anaconda 中。

4) 克隆熊猫

5) 就地构建 C 扩展

`(pandas)ems ~/.virtualenvs/pandas/localrepo/pandas> ~/anaconda/bin/python setup.py build_ext --inplace`

6）构建熊猫

`(pandas)ems ~/.virtualenvs/pandas/localrepo/pandas> ~/anaconda/bin/python setup.py build`

7) 在主分支上运行鼻子测试

测试失败：(pandas)ems ~/.virtualenvs/pandas/localrepo/pandas> nosetests pandas E ============================ ========================================== 错误：失败：ValueError（numpy.dtype大小错误，请尝试重新编译） ------------------------------------------ ---------------------------- Traceback（最近一次调用最后）：文件“/Users/EmilyChen/.virtualenvs/pandas/lib/ python2.7/site-packages/nose/loader.py”，第 390 行，在 loadTestsFromName addr.filename, addr.module) 文件“/Users/EmilyChen/.virtualenvs/pandas/lib/python2.7/site-packages/鼻子/importer.py”，第 39 行，在 importFromPath 中返回 self.importFromDir(dir_path, fqname) 文件“/Users/EmilyChen/.virtualenvs/pandas/lib/python2.7/site-packages/nose/importer.py”，第 86 行，在 importFromDir mod = load_module(part_fqname, fh, filename, desc) 文件“/Users/EmilyChen/.virtualenvs/pandas/localrepo/pandas/pandas/**init** .py”，第 6 行，从 .import hashtable，tslib，lib 文件“numpy.pxd”，第 156 行，在 init pandas.hashtable (pandas/hashtable.c:20354) ValueError: numpy.dtype has wrong size , 尝试重新编译

* * *

在 0.001 秒内运行 1 次测试

失败（错误=1）

PyData 邮件列表中有人说：

> 看起来您在机器上的其他地方安装了 NumPy，而 AnacondaCE 在 vi​​rtualenv 中的播放效果不佳。您收到的错误是 Cython 错误消息，当它构建的 NumPy 版本与您系统上安装的版本不匹配时发生 - 我曾认为 1.7.x 应该与 1.6.x 兼容 ABI（所以这不会发生）但我想不会。叹

Anaconda CE 库中的 numpy 版本是 1.7.0b2，我的系统 numpy 安装版本是 1.5.1。Setup.py 在构建 pandas 时链接到 Anaconda 发行版库中的 numpy，但我的猜测是当 nosetests 运行 /pandas/ **init** .py时它链接到我的系统版本

**接下来**，我在 virtualenv 之外重复了这些步骤，但得到了同样的错误。**最后**，我决定将所有依赖项安装在一个新的 virtualenv 中，而不是使用 Anaconda 发行版来构建 pandas。这样，我可以看到像 numpy 这样的依赖项驻留在 virtualenv python 安装的 lib 目录中，这在 pandas 中是先例。**init**运行导入语句。这就是我所做的：

1) 使用 pip 安装 numpy、dateutil、pytz、cython、scipy、matplotlib 和 openpyxl

2) 就地构建 c 扩展

3）熊猫在这里安装输出：http: [//pastebin.com/3CKf1f9i](http://pastebin.com/3CKf1f9i)

4）熊猫没有正确安装

```
(pandas)ems ~/.virtualenvs/pandas/localrepo/pandas> python
Python 2.7.1 (r271:86832, Jul 31 2011, 19:30:53) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pandas
 cannot import name hashtable
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "pandas/__init__.py", line 6, in <module>
from . import hashtable, tslib, lib
ImportError: cannot import name hashtable 
```

我看了一下[这个问题](https://stackoverflow.com/questions/14422976/python3-3-importerror-cannot-import-name-hashtable)，但在我的情况下安装了 cython，我正在尝试从源代码成功构建，而不是像推荐的答案那样使用 pip..

```
(pandas)ems ~/.virtualenvs/pandas/localrepo/pandas> which cython
/Users/EmilyChen/.virtualenvs/pandas/bin/cython 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-28T18:12:24.997

`ImportError: cannot import name hashtable`尝试从源代码目录导入 pandas 时，我收到了相同的错误 ( )。尝试从不同的目录启动 python 解释器并再次导入 pandas。

# asp.net - 带有 C# 和 SQL Server 的 ASP.NET

> ID：14568071
> 
> 赞同：0
> 
> 时间：2013-01-28T17:52:01.233
> 
> 标签：asp.net, sql-server

**Attendence_Stu_Main** {table1}

```
Att_id varchar(50)P.k,                                     
st_rollno varchar(50)
st_name varchar(50)
branch_name varchar(50)
sem_no int
batch_year varchar(50)
batch_name varchar(50)
scode   varchar(50)
sess_no int
attendence int 
total int 
```

**Attendence_Stu_MainL1** {table2}

```
st_id varchar(50) p.k.
st_rollno varchar(50),
st_name varchar(50),
branch_name varchar(50),
sem_no int,
batch_year varchar(50),
batch_name varchar(50),
scode   varchar(50),
sess_no int,
attendence int, 
total int 
```

我一直`SqlDataSource`在 ASP.NET中使用以下查询

```
query = @"SELECT DISTINCT Attendence_Stu_Main.st_id, Attendence_Stu_Main.st_rollno,
 Attendence_Stu_Main.st_name,
 Attendence_Stu_Main.scode,
 Attendence_Stu_Main.attendence AS Theory,
 Attendence_Stu_Main.total As Total,
 Attendence_Stu_MainL1.attendence AS Lab,
 Attendence_Stu_MainL1.total AS Total1 
FROM  Attendence_Stu_Main 
LEFT OUTER JOIN Attendence_Stu_MainL1 
    ON Attendence_Stu_Main.st_id = Attendence_Stu_MainL1.st_id 
    AND Attendence_Stu_Main.scode = Attendence_Stu_MainL1.scode 
ORDER BY Attendence_Stu_Main.scode,Attendence_Stu_Main.st_rollno"; 
```

上面的查询在 GridVIew 中以这种形式显示输出：---

```
st_id   st_rollno  st_name  subject  Theory      Total   Lab      Total1
--------------------------------------------------------------------------------
086001  IT001      PRANAV   mat        21           22       11       14
086002  IT002      DEEP     mat        21           22       11       14
086001  IT001      PRANAV   sci        20           24       09       12
086002  IT002      DEEP     sci        21           24       08       12 
```

如果有人可以帮助我，我希望我的输出如下，使用 SQL Server 和 ASP.NET 控件功能。

```
st_id   st_rollno   st_name   subject   Theory   Total            Lab      Total1
---------------------------------------------------------------------------------------
086001  IT001      PRANAV   mat,sci 21,20       22,24          11,09       14,12
086002  IT002       DEEP    mat,sci 21,21       22 ,24         11,08       14,12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:12:09.593

没有像游标之类的东西在 sql server 中执行此操作的好方法。逗号分隔的列数据被认为是一种反模式，因此很难通过设计使用核心 sql 语言来实现这一点。

您最好的解决方案是在客户端合并这些记录（相对于数据库......从 asp.net 的角度来看，这意味着 Web 服务器）

# asp.net-mvc-3 - 无法生成临时类（结果=1）

> ID：14568072
> 
> 赞同：0
> 
> 时间：2013-01-28T17:52:05.013
> 
> 标签：asp.net-mvc-3, iis

当我尝试在我的 PC 上的本地 IIS 服务器上托管我的 mvc 网站时，我收到此错误消息。并尝试从我的网络浏览器访问它。

请帮助我如何摆脱这个问题。我想在我的本地 IIS 服务器上托管我的 mvc3 网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T11:57:01.020

检查运行应用程序的用户帐户是否具有对 %temp% 文件夹的读写权限

# ios - 在 shouldAutorotateToInterfaceOrientation 之前调用了哪些函数？

> ID：14568079
> 
> 赞同：0
> 
> 时间：2013-01-28T17:52:24.843
> 
> 标签：ios, uiviewcontroller

我想`shouldAutorotateToInterfaceOrientation`在 UIViewController 中调用函数之前进行一些初始化。然而，在不同的函数中添加一些打印输出之后，这些函数显然被调用的顺序如下：

1.-`shouldAutorotateToInterfaceOrientation`

2.-`loadView`

3.-`viewDidLoad`

4.- `shouldAutorotateToInterfaceOrientation`（再次）

5.-`viewWillAppear`

...

`init`此外，这些函数`initWithNibName`永远不会被调用（或者至少我永远不会得到打印输出）。

我认为`init`or `initWithNibName`（取决于您使用的方法）应该在之前调用`shouldAutorotateToInterfaceOrientation`。但我想我错了（或者我做错了什么？）。也许这是因为这个视图控制器在故事板编辑器中被标记为“是初始视图控制器”？

无论如何，之前`shouldAutorotateToInterfaceOrientation`在 UIViewController 中自动调用的函数是什么？

太感谢了！

**注意**：我知道`shouldAutorotateToInterfaceOrientation`自 6.0 以来已过时，但我希望我的应用程序也与 5.0 兼容。

**编辑**：我只想在之前初始化一些变量`shouldAutorotateToInterfaceOrientation`，而且我只想这样做一次，而不是每次都`shouldAutorotateToInterfaceOrientation`被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:14:43.253

`shouldAutorotateToInterfaceOrientation`您可以在返回之前`YES`或`NO`通过覆盖此方法进行任何您需要做的设置：

在您的实施中：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  // do whatever is needed before the rotation actually happens

  return YES;
} 
```

# drop-down-menu - Kendo.DropDownList 动态更改数据源

> ID：14568081
> 
> 赞同：0
> 
> 时间：2013-01-28T17:52:26.030
> 
> 标签：drop-down-menu, datasource, kendo-ui

我是一个新用户，无法找到一个示例来展示我正在尝试完成的工作。

我需要在两种不同的上下文中使用相同的 Kendo.DropDownList，但必须更新一个属性 [.Name("DisbursedTo")]。起初，我使用了带有两个单独 ddl 的隐藏/显示方法。它起作用了，除了每个 ddl 小部件都需要一个唯一的“.Name”，所以我对模型属性的更新是关闭的。使用一个 ddl，我正在尝试动态更改 ddl 属性。

默认情况下，我使用“位置”数据加载 ddl（这工作正常）。初始加载后，我使用一个简单的单选按钮组“onclick”切换到“ADUsers”，或返回“Locations”。

## cshtml

```
 <label for="DisbursedTo">Disbursed To:</label>
    @(Html.Kendo().DropDownList()
            .Name("DisbursedTo")
            .DataTextField("Name")
            .DataValueField("LocationId")
            .SelectedIndex(20)
            .DataSource(dataSource => dataSource
                .Read(read => read.Action("GetLocations", "Disbursement"))  // Specify the action method and controller name        
                .ServerFiltering(true)                                      // If true the DataSource will not filter the data on the client.
                )
            ) 
```

## 脚本

```
 function OwnerTypeClick(ownerTypeValue) {
        if (ownerTypeValue == "P") {
            alert("calling DisbursedToADUsers");
            DisbursedToADUsers();
        }
        else {
            alert("calling DisbursedToLocations");
            DisbursedToLocations();
        }
    }

    function DisbursedToADUsers() {
        var adUsersIntranetDataSource = new kendo.data.DataSource({
            read: {
                action: { "GetADUsersIntranet": "Disbursements" }
            }
        });

        var ddl = $("#DisbursedTo").kendoDropDownList({
            dataTextField: "displayName",
            dataValueField: "EmployeeNumber",
            dataSource: adUsersIntranetDataSource,
            autoBind: true
        });

        ddl.dataSource.read();
    }

    function DisbursedToLocations() {
        var locationsDataSource = new kendo.data.DataSource({
            read: {
                action: { "GetLocations": "Disbursements" }
            }
        });

        var ddl = $("#DisbursedTo").kendoDropDownList({
            dataTextField: "Name",
            dataValueField: "LocationId",
            dataSource: locationsDataSource,
            autoBind: true
        });

        ddl.dataSource.read();
    } 
```

我在“ddl.dataSource.read();”上收到以下错误 所以我没有正确更改/初始化我的数据源。

0x800a138f - Microsoft JScript 运行时错误：无法获取属性“读取”的值：对象为空或未定义

如果有人做过类似的事情，我将非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-21T09:54:29.143

提供的代码建议您每次都从同一个 HTML 元素初始化新的 DropDownList 小部件，并且每次都会创建新的 DataSource。

你可以在函数外创建两个不同的DataSource，然后在函数体内使用DropDownList [setDataSource()方法](http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#methods-setDataSource)在两个dataSource之间切换，[setOptions()方法](http://docs.telerik.com/kendo-ui/api/javascript/ui/widget#methods-setOptions)改变dataTextField和dataValueField等其他选项，例如：

[例子](http://dojo.telerik.com/UveWA)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T14:15:39.410

您需要使用 Kendo DropDownListFor。

# android - 优化 Android 应用图像的大小和 dpi

> ID：14568086
> 
> 赞同：6
> 
> 时间：2013-01-28T17:52:40.320
> 
> 标签：android, image, memory, drawable

我的应用程序有一个背景图像，我想为它创建不同的文件以支持多屏幕。

我将此链接 ( [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html) ) 发送给了一位平面设计师，但他问我想要创建图像的像素尺寸。

考虑到我的团队中有一名平面设计师，我不想使用代码来优化内存中加载的图像（我只想将图像放在正确的文件夹中，用于小、普通、大和超大屏幕），生成它的最**优化大小和 dpi 设置是什么？**

我们正在处理 PNG 文件。

对于 dpi，我们遵循以下内容：

*   用于低密度 (ldpi) 屏幕 (~120dpi) 的 ldpi 资源。
*   用于中等密度 (mdpi) 屏幕 (~160dpi) 的 mdpi 资源。（这是基线密度。）
*   hdpi 用于高密度 (hdpi) 屏幕 (~240dpi) 的资源。
*   用于超高密度 (xhdpi) 屏幕 (~320dpi) 的 xhdpi 资源。

但是对于尺寸我只能找到这个，它是在 dp 中而不是在 px 中：

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp
*   普通屏幕至少为 470dp x 320dp
*   小屏幕至少为 426dp x 320dp

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:37:03.283

1 dp = 1 px 在 160dpi 屏幕上。但是对于屏幕尺寸，您最好的选择是查看这里 [http://developer.android.com/guide/practices/screens_support.html#testing](http://developer.android.com/guide/practices/screens_support.html#testing) 并向下滚动到以像素为单位显示屏幕尺寸的位置（例如：1920x1080）（表 3 ) 然后通过查看图表[http://developer.android.com/about/dashboards/index.html#Screens](http://developer.android.com/about/dashboards/index.html#Screens)检查您最需要哪些

但第一个链接将为您提供 Android 设备最常用的屏幕尺寸。

# php - cron 作业不执行 php 脚本

> ID：14568087
> 
> 赞同：1
> 
> 时间：2013-01-28T17:52:40.987
> 
> 标签：php, cron

今天我了解了 cron 作业，我打开了 SSH 并按照 1and1 cron 作业教程进行操作，教程文件和说明运行良好，但是当我执行相同的步骤但使用我自己的 PHP 脚本时它不起作用，下面是 cron 作业命令我用了

```
* * * * * /usr/bin/php /path-to-webspace/heal.php 
```

下面是heal.php文件，这个文件在没有cron的情况下可以正常工作，因为我事先对其进行了测试

```
<?php

include('onedirectorydown/database_connection.php');

$resetAllHealth = "UPDATE users SET Health = Health + 1000";
$executeAH = mysqli_query($dbc, $resetAllHealth);

?> 
```

我希望它每分钟执行一次，因为我只是对其进行测试以查看它是否有效，但它没有，但是 1and1 教程中的示例有效，我基本上完全按照，我只是将文件内容放在 heal.php 中

有人能告诉我为什么它没有执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:03:11.767

CRON 作业的常见问题是所需的包含文件无法正常工作。例如：

```
include '/database.php'; 
```

`/var/www/database.php`从浏览器执行时可能会尝试包含，但在`/home/username/database.php`从相应用户的 CRON 作业执行时可能会尝试包含。

考虑用

```
include $_SERVER['DOCUMENT_ROOT'].'/database.php'; 
```

看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:31:49.777

查看您的最后一条评论，也许您没有将正确的 mysqli 扩展安装到 cli 的 php.ini 文件中（通常在 /etc/php5/php.ini 下）。

请记住：“apache”脚本和“命令行”脚本有两个不同的 php.ini 文件。

# assembly - 汇编编程真的需要布尔代数吗？

> ID：14568094
> 
> 赞同：-2
> 
> 时间：2013-01-28T17:53:07.253
> 
> 标签：assembly, boolean, algebra

我需要知道，因为我发现整个事情令人困惑。我现在在上大学代数课，尽管一些布尔代数似乎很基础（交换性、关联性等，即基本代数）。我正在阅读 The Art of Assembly Programming 但后来我遇到了布尔代数一章并感到沮丧。尽管我不知道哪些运算符是普通的，但作者对他的运算符使用了我认为是“任意”的符号。我习惯了 C++ ！、&& 和 || NOT、AND 和 OR 操作的运算符。电子书中有拼写错误和其他内容，使其更难阅读。

关键是，那一章绝对有必要学习吗？那里有初学者 x64 汇编编程书籍吗？这台计算机有一个 AMD 64 位处理器。我正在从头开始阅读编程，但它是针对 linux 的。我可以关注那个，因为它更容易阅读，但我尝试编译一个示例，但它不起作用。即使更改了代码以使其与 Windows 兼容，也没有任何问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:07:32.633

我想说布尔代数的基础知识至少对于每个程序员来说都是必要的，无论编程语言如何。

它使您能够：

*   有效地操作位和位域
*   优化表达式（例如`(a and b) or (c and b)`= `(a or c) and b`; 顺便说一句，如果你`and`用`*`和`or`替换`+`，你会得到与普通代数相同的东西）
*   优化代码
*   看懂别人的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:58:39.197

是的，理解这一点非常重要。布尔代数用于实现硬件，也负责许多装配操作。&& 是和，|| 是或，！不是，等等。谷歌所有这些的真值表，它们非常简单。您只需要一个简单的基础就可以真正理解您所看到的操作。

# c# - Parellel.ForEach 错误

> ID：14568096
> 
> 赞同：1
> 
> 时间：2013-01-28T17:53:09.770
> 
> 标签：c#, multithreading, task-parallel-library

我有一个线程数组，我想同时/并行运行，但我得到“ `NullReferenceException`”

```
var t = new Thread[6];
t[0] = new Thread(() => DoSomething0());
t[1] = new Thread(() => DoSomething1());
t[2] = new Thread(() => DoSomething2());
t[3] = new Thread(() => DoSomething3());
t[4] = new Thread(() => DoSomething4());
t[5] = new Thread(() => DoSomething5());
Parallel.ForEach(t, item => item.Start()); 
```

它给出了错误，`Parrallel.Foreach`因为项目是`null`但我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:55:21.140

您为六个项目创建了一个数组，但您只为前五个项目分配了值。最后一项为空，因此当您尝试使用数组中的所有项时会收到空引用错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:56:41.177

您定义了 6 个元素，但只分配了 5 个元素，`null`现在是最后一个元素。

这就是为什么`NullReferanceException`当你尝试使用所有这些时你会得到。

也初始化第 6 个元素。

```
t[0] = new Thread(() => DoSomething0());
t[1] = new Thread(() => DoSomething1());
t[2] = new Thread(() => DoSomething2());
t[3] = new Thread(() => DoSomething3());
t[4] = new Thread(() => DoSomething4());
t[5] = new Thread(() => DoSomething5()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:56:42.707

您有一个使用 6 个插槽（全部为 initial）实例化的数组`null`，并且您只实例化前 5 个插槽，留下第 6 个`null`。这将是您的空项目。

# javascript - 尽管没有验证和错误返回，但表单提交后页面重新加载

> ID：14568098
> 
> 赞同：1
> 
> 时间：2013-01-28T17:53:11.597
> 
> 标签：javascript, html, forms, validation, reload

我开始在 JS 中处理任务列表生成器的框架，并没有走得太远，我注意到通过表单提交任务后，整个页面都被重新加载，所以我无法在没有的情况下设置文本它立即消失。

我`novalidate`在 HTML 的表单中使用过，并且`false`在我的函数中返回了在表单提交时调用 get 的函数，所以我不确定问题出在哪里。我的代码附在这个 CodePen 中：[http ://cdpn.io/JArfm](http://cdpn.io/JArfm)

一些相关代码：

HTML：

```
<body>
    <form action="#" method="post" id="theForm" novalidate="">
        <fieldset><legend>To-dolist</legend>
            <p>Add things to-do on your list</p>
            <div class="addTasks"><label for="addTask">Event name:</label><input type="text" name="addTask" id="addTask" value="addTask"></div>
            <div><input type="submit" value="Add task!" id="submit"></div>
            <div id="output"></div>
        </fieldset>
    </form>
</body> 
```

JS：

```
(function(){

    function addTask(e){
    'use strict';

    if (typeof e == 'undefined') e = window.event;

    var task = U.$('addTask').value;

    U.setText('output', task);
    return false;
    }

    window.onload = function(){
        "use strict";

        U.addEvent(U.$('theForm'), "submit", addTask);
    };
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:40:22.793

显然，在事件处理函数中返回 false 只会在使用传统事件注册模型 () 时正确停止表单提交`element.onsubmit = doThis;`。由于我使用的是`addEventListener`and`attachEvent`函数，因此处理此问题的正确方法（不修改标记）是将其添加到我的事件处理函数的末尾：

```
if (e.preventDefault) {
    e.preventDefault();
} else {
    e.returnValue = false;
}
return false; 
```

调用`preventDefault`方法或设置`returnValue`to `false`（for < IE9）可以有效防止表单提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:47:36.660

防止输入按钮的默认操作。您可以通过 JQuery 的 preventDefault() 函数来做到这一点。或者只是`<form onsubmit="return false;"> ... </form>`

# iphone - 自定义 MPMovieplayer

> ID：14568107
> 
> 赞同：0
> 
> 时间：2013-01-28T17:53:49.493
> 
> 标签：iphone, ios, mpmovieplayercontroller

在我的新应用程序中，我必须在 MPMovieplayer 中显示视频。客户端给了我截图中的设计我想知道是否可以像这样自定义（包括顶部喜欢、跳过按钮和自定义滑块）

如果可能，请帮助我了解更多相关信息

![在此处输入图像描述](../Images/7cfeb303c38bf80250136639ff0556ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T01:13:22.047

这是我编写的一个自定义类，适用于 iOS6 及更高版本。
[https://github.com/busterbooth/bbMoviePlayer](https://github.com/busterbooth/bbMoviePlayer)

`MPMoviePlayer`只要您执行以下操作，您就可以控制和重新换肤。

```
MPMoviePlayerController *mp= [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://example.com/video.file"]];
mp.controlStyle = MPMovieControlStyleNone; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:59:20.613

你可以很容易地使用`AV Foundation`特定`AVPlayer`的类来完成它，它是 MPMoviePlayer 下的框架。它将为您提供具有抽象视频/音频播放器的选项，并且您将能够创建自己的自定义 UI

[这是一个从AVPlayer](https://developer.apple.com/library/mac/#samplecode/AVSimplePlayerOSX/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011060)开始的示例代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T05:14:51.740

AVPlayer 可以工作，但我听说它可能比使用更高级别的解决方案（如 MPMoviePlayer）更复杂。我一直致力于使用 MPMoviePlayer 为视频流制作自己的自定义 UI。

每当您创建 MPMoviePlayer 对象时，只需将控件样式设置为 none 即可：`MPMovieControlStyleNone`这使您的视频播放器准备好让您制作自定义控件。我建议使用 a`UIToolbar`然后将 UIBarButtonItems 设置到您的工具栏上。一旦您的工具栏拥有所有按钮，请使用该方法将工具栏添加到子视图`addSubview`。[然后，您可以使用MPMediaPlayback 协议](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaPlayback_protocol/Reference/Reference.html)通过播放和暂停等方法向按钮和滑块添加功能。顺便说一句，顶部的喜欢和跳过按钮可能只是 UIButtons，它们是非常可定制的。最后，如果您希望控件在点击时消失，请查看[Gesture Recognizers](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html)。

当然，您可以根据需要设置按钮样式和放置工具栏，但这应该让您有一个基本的开始。

# c# - 如何知道包含 C# 的视频是否完成？（COM 组件）

> ID：14568108
> 
> 赞同：0
> 
> 时间：2013-01-28T17:53:57.113
> 
> 标签：c#, video

我已经添加了工具箱（选择项目-> COM组件-> Windows Media player）在控件属性中我可以选择视频的路径，但我知道如何知道视频是否完成，在视频完成的那一刻我需要做一些事件。该控件有任何属性，例如文本框，并且没有事件..我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:41:18.363

您应该使用WMP ActiveX 的**PlayStateChange**事件。

查看此链接[http://msdn.microsoft.com/en-us/library/windows/desktop/dd562460%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562460%28v=vs.85%29.aspx)

```
this.VcVideo.PlayStateChange += new  AxWMPLib._WMPOCXEvents_PlayStateChangeEventHandler(VcVideo_PlayStateChange); 
```

# mysql - MySQL 查询以获取已付发票

> ID：14568109
> 
> 赞同：-1
> 
> 时间：2013-01-28T17:54:00.130
> 
> 标签：mysql

我有以下 MySQL 表：

**发票**

*   发票 ID，
*   发票编号，
*   发票描述，
*   发票面额，
*   发票日期

**付款**

*   付款ID
*   payment_invoice_id
*   付款价值
*   付款日期

我的目标是进行一个查询，该查询可以检索所有已全额支付的发票（invoice_value 必须与 payment_value 的总和匹配）。

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:57:06.000

```
SELECT i.*
FROM Invoices i
JOIN Payments p ON i.invoice_id = p.payment_invoice_id
GROUP BY i.invoice_id
HAVING i.invoice_value = SUM(p.payment_value); 
```

PS：请务必使用`NUMERIC(9,2)`货币数据。不要使用`FLOAT`.

# apache-flex - Flex：将父类加载到模块中

> ID：14568111
> 
> 赞同：0
> 
> 时间：2013-01-28T17:54:05.047
> 
> 标签：apache-flex, module

我的主应用程序包含一个`ClassA`. 然后主应用程序加载一个模块，在该模块中我想做：

```
var classA:InterfaceClassA = new ClassA(); 
```

它编译得很好，但我收到了这个警告：

```
Warning: YourApplication is a module or application that is directly referenced. This will cause YourApplication and all of its dependencies to be linked in with module.YourModule:Module. Using an interface is the recommended practice to avoid this. 
```

我不能使用接口来生成新实例，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:26:31.790

[我在Accessing the parent application from the modules](http://livedocs.adobe.com/flex/3/html/help.html?content=modular_7.html)中找到了答案。我在主应用程序中创建了一个帮助类，其中包含我要访问的类的实例。然后在模块中使用：

```
parentApplication.myModuleHelper.**myClassInstance**.myMethod(); 
```

对于实例方法和我使用的静态类级别方法：

```
parentApplication.myModuleHelper.**MyClassInstance**.myMethod() 
```

要在模块中获取我的类的实例，我在 MyModuleHelper 中使用它

```
public function getFullScreenUtil(iFullScreenUtil:IFullScreenUtil , iSystemManager:ISystemManager):FullScreenUtil {
    return new FullScreenUtil(iFullScreenUtil , iSystemManager);
} 
```

这在 MyModule 中：

```
var _fullScreenUtil:* = parentApplication.moduleHelper.getFullScreenUtil(this , systemManager); 
```

这就是我现在所需要的。我不确定如何将结果`getFullScreenUtil(..)`转换为实际实例，`FullScreenUtil`但我希望它不能在模块中完成。也许使用接口可以提供解决方案。

# runtime-error - （实施？）值噪声错误导致图像中出现奇怪的伪影

> ID：14568112
> 
> 赞同：0
> 
> 时间：2013-01-28T17:54:08.657
> 
> 标签：runtime-error, noise

我正在使用高度图进行地形生成实验，我只是写了一个简单的值噪声。我在我的代码中看不到任何东西，但除了我自己的愚蠢或发生浮点错误之外，我看不到任何东西：

```
#include 
#include <stdlib.h>
#include <math.h>

long jenkins( long a ){
    a = (a+0x7ed55d16) + (a>19);
    a = (a+0x165667b1) + (a>16);
    return a;
}

float random(long x, long y, long seed1, long seed2, long seed3){
    long state = jenkins( x ) - jenkins(y);
    state = jenkins(state - seed1);
    state -= jenkins(state ^ seed2);
    state -= jenkins(state - seed2);
    state ^= (x*y) - jenkins( (seed1-seed2) ^ seed3 );
    float ret = ((float)(state&0xFFFF))/65535.0f;
    return ret;
}

float valueNoise( float x, float y, long seed1, long seed2, long seed3 ){
    float fx = x-floor(x);
    float fy = y-floor(y);

    long flx = (long) x-fx;
    long fly = (long) y-fy;

    fx = fx*fx*(3 - 2*fx);
    fy = fy*fy*(3 - 2*fy);

    float r00 = random(flx,fly,seed1,seed2,seed3);
    float r10 = random(flx+1,fly,seed1,seed2,seed3);
    float r01 = random(flx,fly+1,seed1,seed2,seed3);
    float r11 = random(flx+1,fly+1,seed1,seed2,seed3);

    float i0 = (1-fx)*r00 + fx*r10;
    float i1 = (1-fx)*r01 + fx*r11;

    return ( (1-fy)*i0 + fy*i1 );
}

void writeOutPGM(char *filename, unsigned char *data){
    FILE *file = fopen(filename,"w");
    char header[] = "P5 512 512 255\n";
    fwrite(header,sizeof(header),1,file);
    fwrite(data,262144,1,file);
}

extern float valueNoise( float x, float y, long seed1, long seed2, long seed3 );

int main(){
    unsigned char *data = malloc(512*512);
    float fx,fy;
    int x,y;
    long s1 = 123,s2 = 456,s3 = 789;
    for( y = 0; y < 512; ++y ){
        for( x = 0; x < 512; ++x ){
            fx = floor( ((float)x)/10.0f );
            fy = floor( ((float)y)/10.0f );

            data[x + y*512] = (unsigned char) 255.0f*valueNoise(fx,fy,s1,s2,s3);
        }
    }

    writeOutPGM("noise.pgm",data);
} 
```

我放了 floor() 以更清楚地显示线条，否则它们很难看到（尽管噪音仍然非常混乱）

当我不划分 x/y 时，它会输出良好的噪音。我想这要么是除法，要么是我的插值。但我真的对正在发生的事情一无所知。

感谢您的帮助，埃克林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:00:56.460

错误不在于噪音，而在于 PGM 编写代码。该文件在 Windows 上以文本模式打开，所有 UNIX 换行符都转换为 Windows 一次，导致奇怪的故障。

# c# - 多线程多个生产者和消费者线程不会同步 BlockingCollection 竞争条件

> ID：14568115
> 
> 赞同：1
> 
> 时间：2013-01-28T17:54:20.473
> 
> 标签：c#, multithreading, race-condition, producer-consumer, blockingcollection

我有多个生产者和多个消费者。我的共享资源是 BlockingCollection。但是，我的代码只有在我有一个消费者时才有效。我知道这是一种竞争条件，因为每次运行代码时输出都不同。

我认为 BlockingCollection 会处理所有同步等，但事实并非如此。

那么如何在所有生产者和消费者之间同步我的共享资源呢？

这是我的代码：

```
/// <summary>
/// PURE PRODUCER TYPE
/// </summary>
class Caller
{

    private BlockingCollection<Call> incommingCalls;

    public Caller(BlockingCollection<Call> calls)
    {
        incommingCalls = calls;
        //start the producer thread
        Thread thread = new Thread(new ThreadStart(placeCall));
        thread.Start();
    }

    public void placeCall()
    {
            incommingCalls.Add(myCall);
    }

}

/// <summary>
/// CONSUMER
/// </summary>
class Fresher : Employee
{

    private BlockingCollection<Call> calls;

    public Fresher(BlockingCollection<Call> incalls)
    {
        calls = incalls;
        Thread thread = new Thread(new ThreadStart(HandleCalls));
        thread.Start();

    }

    /// <summary>
    /// 
    /// </summary>
    public void HandleCalls()
    {
        while (!incommingCalls.IsCompleted)
        {
            Call item;
            if (incommingCalls.TryTake(out item, 100000))
            {
                //do something with the call

            } //else do nothing - just wait

        }

}

/// <summary>
/// 
/// </summary>
class CallCenter
{

    private BlockingCollection<Call> fresherCalls;

    private List<Caller> myCallers;
    private List<Employee> myFreshers;

    public CallCenter() 
    {
        //initial incomming calls to the fresher queue
        fresherCalls = new BlockingCollection<Call>();

        myFreshers = new List<Employee>();
        myCallers = new List<Caller>();

        generate_freshers();

        //generate to start the producer
        generate_callers();

    }

    /// <summary>
    /// 
    /// </summary>
    private void generate_freshers() 
    {
        for (int i = 0; i < 1; i++ )
        {
            myFreshers.Add(new Fresher(fresherCalls, tlCalls, locker2));
        }
    }

    /// <summary>
    /// 
    /// </summary>
    private void generate_callers() 
    {
        for (int i = 0; i < 20; i++ )
        {
            myCallers.Add(new Caller(fresherCalls, locker));
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:02:15.323

> 我知道这是一种竞争条件，因为每次运行代码时输出都不同。

这在多线程中很常见，不一定是由于竞争条件（至少不是一个糟糕的条件）。多线程场景中的订单处理往往不是确定性的——这可能会改变输出。

话虽如此，使用`BlockingCollection<T>`，通常更容易将您的消费者编写为：

```
public void HandleCalls()
{
    foreach(var item in incommingCalls.GetConsumingEnumerable())
    {
        //do something with the call
    }
} 
```

这将为您处理所有同步和检查，对于`BlockingCollection<T>`.

* * *

编辑：如果您需要控制调度并实现某种形式的[Round-Robin Scheduling](http://en.wikipedia.org/wiki/Round-robin_scheduling)，您可能需要查看TPL 示例中的[Parallel Extension Extras 。](http://code.msdn.microsoft.com/ParExtSamples/Release/ProjectReleases.aspx?ReleaseId=4179)它们提供了一个`RoundRobinTaskScheduler`可用于调度`Task<T>`以可预测方式工作的实例。

# rest - 将节点作为 json 对象返回的密码选项？

> ID：14568116
> 
> 赞同：2
> 
> 时间：2013-01-28T17:54:20.997
> 
> 标签：rest, neo4j, cypher

我正在使用 Cypher ReST API。它返回 1 个具有两个名称值对“列”和“数据”的对象。有没有办法抛弃列并将节点作为对象而不是数组返回？更符合这一点： http: [//bl.ocks.org/4062045#miserables.json](http://bl.ocks.org/4062045#miserables.json)

这是我现在得到的：

```
curl -d @query --header "Content-Type:application/json" http://localhost:7474/db/data/cypher
{
  "columns" : [ "source", "r_type", "target" ],
  "data" : [ [ "Corn", "LIKES", "Parsley" ], [ "Corn", "LIKES", "Sunflowers" ], 
[ "Corn", "LIKES", "Pumpkin" ], [ "Corn", "LIKES", "Peas" ], [ "Corn", "LIKES", "Beans" ], 
[ "Corn", "HATES", "Tomato" ], [ null, null, null ], [ "Carrots", "LIKES", "Tomato" ], 
[ "Carrots", "LIKES", "Peas" ], [ "Carrots", "LIKES", "Onions" ], .... 
```

查询文件：

```
{
  "query" : "start n  = node(*) match n -[r?]-> m return n.name? as source, type(r) as r_type, m.name? as target",
  "params" : {
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:23:45.290

您可以编写一个[服务器插件](http://docs.neo4j.org/chunked/milestone/server-plugins.html)来实现这一点。然后它将通过 REST API 可用。

# java - 从 Javascript 调用 Java 的 Desktop.open 方法 - 访问被拒绝 java.awt.AWTPermission showWindowWithoutWarningBanner

> ID：14568118
> 
> 赞同：1
> 
> 时间：2013-01-28T17:54:24.740
> 
> 标签：java, javascript, security, applet

我有一个 Web 应用程序需要能够在客户端计算机上本地打开文件，并能够在编辑后保存文件。Web 应用程序在服务器上的一个文件夹中生成一个文档，该文件夹通过 WebDAV 和 FTP 共享，并且该文件夹安装在客户端计算机上。

我不能使用 file:// 类型的 URI，因为它不允许保存回服务器。

我打算尝试使用嵌入在处理此文件打开的 Web 应用程序中的小型 Java 小程序来解决问题，但我在 Java 中的权限方面遇到了困难。（Java 不是我的专业领域）。无论如何，我已将代码范围缩小到以下内容：

**本地文件.html**

```
<html>
<body>
  <input id="input" value="Call from Javascript" type="button" onclick="callApplet('/Users/conor/1.txt')">
  <script type='text/javascript'>
  function callApplet(path) {
    applet = document.getElementById('localfile');
    applet.openFile(path);
  }
  </script>
<applet id="localfile" code="localfile.class" archive="localfile.jar"  width="150" height="50"></applet>
</body>
</html> 
```

**本地文件.java**

```
import java.applet.*;
import java.awt.*;
import java.util.*;
import java.lang.*;
import java.text.*;
import java.awt.event.*;
import java.io.*;

import java.security.*;

public class localfile extends Applet {
  public localfile() {
    Panel p = new Panel();
    p.add(new Button("Call from Java"));
    add("North",p);
  }
  public void openFile(String path) {
    System.out.println("File: " + path);
    final File ffile = new File(path);
    System.out.println("Got file.");
    if (Desktop.isDesktopSupported()) {
      System.out.println("Desktop is supported.");
      final Desktop desktop = Desktop.getDesktop();
      System.out.println("Got Desktop Handle.");
      try {
        desktop.open(ffile);
      } catch(Exception ex) {
        ex.printStackTrace();
      }
      System.out.println("File Opened.");
    }
  }

  public boolean action(Event evt, Object arg) {
    openFile("/Users/conor/1.txt");
    return true;
  }
} 
```

我已经编译、创建了一个 jar 文件并从 java 源代码对其进行了签名。

这将生成一个带有两个按钮的页面——一个 Java 按钮（用于测试）和一个 Javascript 按钮。Java 按钮按预期工作正常 - 我可以保存文件等。我想将文件路径传递给小程序，所以它确实是我希望开始工作的 Javascript 按钮。Javascript 抛出以下内容：

**堆栈跟踪**

```
java.security.AccessControlException: access denied ("java.awt.AWTPermission" "showWindowWithoutWarningBanner")
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
at java.security.AccessController.checkPermission(AccessController.java:560)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
at java.awt.Desktop.checkAWTPermission(Desktop.java:239)
at java.awt.Desktop.open(Desktop.java:267)
at localfile.openFile(localfile.java:27)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at sun.plugin.javascript.JSInvoke.invoke(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at sun.plugin.javascript.JSClassLoader.invoke(Unknown Source)
at sun.plugin2.liveconnect.JavaClass$MethodInfo.invoke(Unknown Source)
at sun.plugin2.liveconnect.JavaClass$MemberBundle.invoke(Unknown Source)
at sun.plugin2.liveconnect.JavaClass.invoke0(Unknown Source)
at sun.plugin2.liveconnect.JavaClass.invoke(Unknown Source)
at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$DefaultInvocationDelegate.invoke(Unknown Source)
at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo.doObjectOp(Unknown Source)
at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source)
at java.lang.Thread.run(Thread.java:722) 
```

我还尝试将 desktop.open 调用嵌入到 doPrivileged 块中，如下所示：

```
 AccessController.doPrivileged(new PrivilegedAction() {
    public Object run() {
      try {
        desktop.open(ffile);
      } catch(Exception ex) {
        ex.printStackTrace();
      }
      return null;
    }
  }); 
```

但这会为 javascript 和 java 按钮引发错误，如下所示：

```
java.lang.SecurityException: class "localfile$1" does not match trust level of other classes in the same package 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:01:14.537

让它工作，所以我想我会在这里发布解决方案......

当我在其中编译带有 doPrivileged 调用的 java 文件时，javac 编译器会创建两个文件——localfile.class 和 localfile$1.class。我最初不确定 localfile$1.class 是什么，只是假设它是某种临时文件。然而，它是一个对应于 doPrilileged 块中的匿名类的类文件，需要包含在 .jar 文件中并正确签名。

所以无论如何，html文件和以前一样，最终的java文件如下：

**本地文件.java**

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.security.*;

public class localfile extends Applet {

private static final long serialVersionUID = 1L;

public localfile() {
  Panel p = new Panel();
  p.add(new Button("Call from Java"));
  add("North",p);
}

public void openFile(String path) {
  System.out.println("File: " + path);
  final File ffile = new File(path);
  System.out.println("Got file.");
  if (Desktop.isDesktopSupported()) {
    System.out.println("Desktop is supported.");
    final Desktop desktop = Desktop.getDesktop();
    System.out.println("Got Desktop Handle.");
    AccessController.doPrivileged(new PrivilegedAction() {
      public Object run() {
        try {
          desktop.open(ffile);
        } catch(Exception ex) {
          ex.printStackTrace();
        }
        return null;
      }
    });
    System.out.println("File Opened.");
  }
}

public boolean action(Event evt, Object arg) {
  openFile("/Users/conor/1.txt");
  return true;
}

} 
```

我还发现没有必要让 html 文件中的 javascript 创建小程序并将其插入 DOM。我认为在链接到的@VGR 链接中提到了这一点，但没有它它对我有用。

感谢所有的帮助家伙！

# php - 使用表单数据插入将标准文本插入mysql？

> ID：14568120
> 
> 赞同：0
> 
> 时间：2013-01-28T17:54:30.880
> 
> 标签：php, mysql

我正在将一些表单数据插入到 sql 数据库中，但我还想插入一个不属于表单数据的帐户类型标签。

所以基本上表单数据可以很好地插入到数据库中，但我的数据库中还有一个名为“account_type”的列，我想将“member”这个词作为标准插入。

我可以这样做吗，因为我已经尝试将其添加到代码中，但它没有将“成员”插入到帐户类型中。

我尝试添加的代码：

```
<? $result = mysql_query("UPDATE ptb_registrations SET account_type=Member"); ?> 
```

表单数据的其余插入代码：

```
<?php
    session_start();
    // other php code here

    $_SESSION['display_name'] = $_POST['display_name'];
    $_SESSION['password'] =  $_POST['password'];

    ?>

    <?php ob_start(); ?>
    <?php
    session_start();
    // GET ACCOUNT INFORMATION FROM FORM AND ASSIGN VARIABLES
    $first_name = $_SESSION['first_name'];
    $last_name = $_SESSION['last_name'];
    $email = $_SESSION['email'];
    $date_of_birth = $_SESSION['date_of_birth'];
    $contact_number = $_SESSION['contact_number'];
    $display_name = $_SESSION['display_name'];
    $password = $_SESSION['password'];
    ?>
    <?php
    /*
    // ECHO ACCOUNT INFORMATION
    echo "<strong> Account Information: </strong>";
    echo "<br />";
    echo First Name: ";
    echo "<br />";
    echo $first_name;
    echo "<br />";
    echo "<br />";
    echo "Last Name: ";
    echo "<br />";
    echo $last_name;
    echo "<br />";
    echo "<br />";
    echo "Email: ";
    echo "<br />";
    echo $email;
    echo "<br />";
    echo "<br />";
    echo "Password: ";
    echo "<br />";
    echo $password;
    echo "<br />";
    echo "<br />";
    echo "date_of_birth: ";
    echo "<br />";
    echo $date_of_birth;
    echo "<br />";
    echo "<br />";
    echo "Contact_number: ";
    echo "<br />";
    echo $contact_number;
    echo "<br />";
    echo "<br />";
    echo "display_name: ";
    echo "<br />";
    echo $display_name;
    echo "<br />";
    echo "<br />";
    */
    ?>

    <?php
    ////// SEND TO DATABASE

    /////////////////////////////////////////////////////////

    // Database Constants
    define("DB_SERVER", "localhost");
    define("DB_USER", "root");
    define("DB_PASS", "");
    define("DB_NAME", "playtime");

    // 1\. Create a database connection
    $connection = mysql_connect(DB_SERVER,DB_USER,DB_PASS);
    if (!$connection) {
        die("Database connection failed: " . mysql_error());
    }

    // 2\. Select a database to use
    $db_select = mysql_select_db(DB_NAME,$connection);
    if (!$db_select) {
        die("Database selection failed: " . mysql_error());
    }
    //////////////////////////////////////////////////////////////
    $query="INSERT INTO ptb_registrations (ID,
    first_name,
    last_name,
    email,
    display_name,
    date_of_birth,
    contact_number,
    password

     )
    VALUES('NULL',
    '".$first_name."',
    '".$last_name."',
    '".$email."',
    '".$display_name."',
    '".$date_of_birth."',
    '".$contact_number."',
    '".$password."'
    )";
    mysql_query($query) or die ('Error updating database');
    ?>
    <?
    $result = mysql_query("UPDATE ptb_registrations SET account_type=Member");
    ?>
    <?php
    function confirm_query($result_set) {
                    if (!$result_set) {
                        die("Database query failed: " . mysql_error());
                    }
            }
    function get_user_id() {
        global $connection;
        global $email;
        $query = "SELECT *
                    FROM ptb_registrations
                    WHERE email = \"$email\"
                    ";
            $user_id_set = mysql_query($query, $connection);
            confirm_query($user_id_set);
            return $user_id_set;
            }
    ?>
    <?php
    $user_id_set = get_user_id();
    while ($user_id = mysql_fetch_array($user_id_set)) {
        $cookie1 = "{$user_id["id"]}";
        setcookie("ptb_registrations", $cookie1, time()+3600);  /* expire in 1 hour */

    }
    ?>

    <?php include ('includes/send_email/reg_email.php'); ?>

    <? ob_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:09:00.943

为什么不在注册的同时插入呢？

```
$query="INSERT INTO ptb_registrations (ID,
    first_name,
    last_name,
    email,
    display_name,
    date_of_birth,
    contact_number,
    password,
    account_type
     )
    VALUES('NULL',
    '{$first_name}',
    '{$last_name}',
    '{$email}',
    '{$display_name}',
    '{$date_of_birth}',
    '{$contact_number}',
    '{$password}',
    'Member'
    )"; 
```

以下

```
<? $result = mysql_query("UPDATE ptb_registrations SET account_type='Member'"); ?> 
```

`where`当您没有子句时，将导致 ALL account_type 等于 'Member' 。

要回答您的问题，很可能是因为您在更新命令中没有在 member 周围加上单引号，请参阅我的代码。

# php - 在服务器和客户端之间传输加密数据的流程

> ID：14568123
> 
> 赞同：0
> 
> 时间：2013-01-28T17:54:45.807
> 
> 标签：php, file, client, encryption

我正在创建一个在各个地方使用的在线管理器，它将处理敏感信息，例如发票、联系方式、私人备忘录等

目标平台是标准共享托管站点 (PHP5/SQL) 和客户端想要查看组织者的任何支持 JS 的浏览器。

数据存储在单个 XML 文件中。在不影响用户密码或文件中数据的情况下，将数据从服务器传输到客户端进行读取，然后从客户端返回到服务器进行更新的最佳方式是什么？

理想情况下，数据将被加密存储，这样即使攻击者进入服务器，他们也无法访问这些信息。服务器还必须能够接受传入的数据，并检查它来自可靠的来源，这样攻击者就无法篡改。

我的一个想法是将 XML 存储在使用用户密码加密的文件中。这样，密码就不必从客户端传输到服务器。当我想将数据从客户端发送回服务器时，我可以发送一个哈希密码，服务器可以使用该密码将客户端识别为合法......但是，密码仍然必须在网站设置/密码更改时传输。

我已经编码了很长时间，但对处理敏感数据的工作流程有点陌生。所以我不是在寻找代码，而是找人给我一些提示？

提前致谢

# node.js - Node.js：如何将 readStream 作为函数参数传递并在回调中使用？

> ID：14568124
> 
> 赞同：3
> 
> 时间：2013-01-28T17:54:48.540
> 
> 标签：node.js, stream

我想将流作为参数传递给函数并在异步回调中使用它，但它被破坏了（stream.readable 为 false）

例如：

```
var test = require('./test');
var file = fs.createReadStream('./file.txt');
test(file, console.log); 
```

在 test.js 中：

```
module.exports = function(stream, callback) {
    //stream.pipe(process.stdout); ///////// STREAM IS READABLE HERE 
    doSomething('abc', function(err) {
         stream.pipe(process.stdout); ///////// STREAM IS NOT READABLE HERE
         callback(err);
    });
};
enter code here 
```

为什么会这样？
我该怎么做才能在回调中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:15:37.957

发生这种情况是因为流在您尝试通过管道传输之前就结束了。首先，流是可读的，因为您的同步代码仍在工作。其次（回调内部）流已经结束，因为回调可能会在未来几个滴答后执行。如果您想在将来阅读它，您需要暂停您的流。此代码应该可以工作：

```
var test = require('./test');
var file = fs.createReadStream('./file.txt');
file.pause();
test(file, console.log); 
```

测试.js

```
module.exports = function(stream, callback) {
    doSomething('abc', function(err) {
         stream.resume();
         stream.pipe(process.stdout);
         callback(err);
    });
}; 
```

# actionscript-3 - AS3 Softbody 质感八哥

> ID：14568132
> 
> 赞同：2
> 
> 时间：2013-01-28T17:55:30.580
> 
> 标签：actionscript-3, textures, vertex, stage3d, starling-framework

我在颈背上创建了一个柔软的身体圈。现在我正试图让它纹理化。但我遇到了麻烦，我找不到答案。这就是为什么我转向你们。

我正在尝试在这个目标 c 教程中做他正在做的事情：

[http://www.uchidacoonga.com/2012/04/soft-body-physics-with-box2d-and-cocos2d-part-44/](http://www.uchidacoonga.com/2012/04/soft-body-physics-with-box2d-and-cocos2d-part-44/)

关于如何使用 starling 和 stage3d 做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:26:43.703

您必须编写一个自定义显示对象（参见[Starling 手册](http://wiki.starling-framework.org/manual/custom_display_objects)）。这是一个基本示例：

```
package
{
    import com.adobe.utils.AGALMiniAssembler;

    import flash.display3D.Context3D;
    import flash.display3D.Context3DProgramType;
    import flash.display3D.Context3DVertexBufferFormat;
    import flash.display3D.IndexBuffer3D;
    import flash.display3D.VertexBuffer3D;
    import flash.geom.Point;
    import flash.utils.ByteArray;

    import starling.core.RenderSupport;
    import starling.core.Starling;
    import starling.display.DisplayObject;
    import starling.errors.MissingContextError;
    import starling.textures.Texture;

    public class Ball extends DisplayObject
    {
        private static const PROGRAM_NAME:String = "ball";

        private var _texture:Texture;

        private var _numSides:uint;

        private static const data32PerVertex:uint = 4;

        private var _vertices:Vector.<Number>;
        private var _indices:Vector.<uint>;

        private var _vertexBuffer:VertexBuffer3D;
        private var _indexBuffer:IndexBuffer3D;

        public function Ball(initialX:Number, initialY:Number, initialR:Number, texture:Texture, numSides:uint = 10) {
            _texture = texture;
            _numSides = numSides;

            // if the texture is a SubTexture (i.e. a texture from an atlas), then you need
            // to modify these values to match the sub-texture UV bounds.
            var minU:Number = 0, minV:Number = 0, maxU:Number = 1, maxV:Number = 1;

            setupGeometry(initialX, initialY, initialR, minU, minV, maxU, maxV);

            createBuffers();
            registerPrograms();
        }

        private function setupGeometry(initialX:Number, initialY:Number, initialR:Number, uMin:Number, vMin:Number, uMax:Number, vMax:Number):void {
            const numVertices:uint = _numSides + 1,
                  numSideVertices:uint = _numSides,
                  txtCu:Number = (uMin + uMax) / 2, // center of the circle in UV coords
                  txtCv:Number = (vMin + vMax) / 2,
                  txtRu:Number = uMax - txtCu,      // radiuses of the circle in UV coords
                  txtRv:Number = vMax - txtCv;

            _vertices = new Vector.<Number>(data32PerVertex * numVertices, true);
            _indices  = new Vector.<uint>(3 * _numSides, true);

            var centerVectexIndex:uint = _numSides;

            // side vertices

            for (var sideVertexI:uint = 0; sideVertexI < numSideVertices; ++sideVertexI) {
                var dataOffset:uint = sideVertexI * data32PerVertex,
                    angle:Number = 2 * Math.PI * sideVertexI / _numSides,
                    sinA:Number = Math.sin(angle),
                    cosA:Number = Math.cos(angle);

                _vertices[dataOffset    ] = initialX + initialR * cosA; // x
                _vertices[dataOffset + 1] = initialY + initialR * sinA; // y
                _vertices[dataOffset + 2] = txtCu + txtRu * cosA; // u
                _vertices[dataOffset + 3] = txtCv + txtRv * sinA; // v

                var indexOffset:uint = 3 * sideVertexI;

                _indices[indexOffset    ] = centerVectexIndex;
                _indices[indexOffset + 1] = sideVertexI;
                _indices[indexOffset + 2] = (sideVertexI + 1) % numSideVertices;
            }

            // center vertex

            dataOffset = centerVectexIndex * data32PerVertex;

            _vertices[dataOffset    ] = initialX; // x
            _vertices[dataOffset + 1] = initialY; // y
            _vertices[dataOffset + 2] = txtCu; // u
            _vertices[dataOffset + 3] = txtCv; // v
        }

        private function createBuffers():void {
            var context:Context3D = Starling.context;
            if (context == null) {
                throw new MissingContextError();
            }

            _vertexBuffer && _vertexBuffer.dispose();
            _indexBuffer  && _indexBuffer.dispose();

            const verticesCount:uint = _numSides + 1;

            _vertexBuffer = context.createVertexBuffer(verticesCount, 4);
            _vertexBuffer.uploadFromVector(_vertices, 0, verticesCount);

            const indicesCount:uint = 3 * _numSides; // _numSides triangles, 3 indices per each triangle

            _indexBuffer = context.createIndexBuffer(indicesCount);
            _indexBuffer.uploadFromVector(_indices, 0, indicesCount);
        }

        private function registerPrograms():void {
            var starling:Starling = Starling.current;
            if (starling.hasProgram(PROGRAM_NAME)) {
                return;
            }

            // va0.xy - position
            // va1.xy - UV coords
            // vc0-vc3 - mvp matrix

            var vertexAGAL:String =
                "m44 op, va0, vc0 \n" +
                "mov v0, va1";

            var fragmentAGAL:String =
                "tex oc, v0, fs0 <2d, clamp, linear, mipnone> \n"; // just sample texture color

            var asm:AGALMiniAssembler      = new AGALMiniAssembler(),
                vertexBytecode:ByteArray   = asm.assemble(Context3DProgramType.VERTEX,   vertexAGAL),
                fragmentBytecode:ByteArray = asm.assemble(Context3DProgramType.FRAGMENT, fragmentAGAL);

            starling.registerProgram(PROGRAM_NAME, vertexBytecode, fragmentBytecode);
        }

        override public function render(support:RenderSupport, parentAlpha:Number):void {
            var context:Context3D = Starling.context;
            if (context == null) {
                throw new MissingContextError();
            }

            support.finishQuadBatch();

            // setup

            support.applyBlendMode(_texture.premultipliedAlpha);
            context.setProgram(Starling.current.getProgram(PROGRAM_NAME));

            context.setVertexBufferAt(0, _vertexBuffer, 0, Context3DVertexBufferFormat.FLOAT_2); // position, va0
            context.setVertexBufferAt(1, _vertexBuffer, 2, Context3DVertexBufferFormat.FLOAT_2); // uv, va1
            context.setProgramConstantsFromMatrix(Context3DProgramType.VERTEX, 0, support.mvpMatrix3D, true); // mvp matrix, vc0-vc3

            context.setTextureAt(0, _texture.base); // texture, fs0

            // draw

            context.drawTriangles(_indexBuffer);
            support.raiseDrawCount();

            // clean up

            context.setVertexBufferAt(0, null);
            context.setVertexBufferAt(1, null);
            context.setTextureAt(0, null);
        }

        override public function hitTest(localPoint:Point, forTouch:Boolean = false):DisplayObject {
            var isHit:Boolean = false;

            // to achieve proper mouse handling, you need to place here the code
            // that checks if localPoint is contained inside any of triangles and
            // sets isHit flag accorgingly.

            return isHit ? this : null;
        }
    }
} 
```

使用示例：

```
package
{
    import flash.display.BitmapData;
    import flash.display.GradientType;
    import flash.display.Graphics;
    import flash.display.Sprite;
    import flash.geom.Matrix;

    import starling.display.Sprite;
    import starling.textures.Texture;

    public class BallExperiment extends starling.display.Sprite
    {
        public function BallExperiment() {
        }

        public function start():void {
            const numSides:uint = 7;

            var txt:Texture = createBallTxt(numSides, true);
            var ball:Ball = new Ball(200, 200, 50, txt, numSides);

            addChild(ball);
        }

        private function createBallTxt(numSides:uint, debugFillBcgr:Boolean = false):Texture {
            var canvas:flash.display.Sprite = new flash.display.Sprite(),
                g:Graphics = canvas.graphics;

            // as we don't want to use sub-textures in this simple example, we need this
            // number to be a power of two: otherwise Starling will internally create
            // a power-of-two-sized texture and return a sub-texture of this bigger texture.
            const size:Number = 512;

            // we need to make the radius of a ball texture to be smaller than size/2 in order
            // to prevent the texture from extending beyond our triangles.
            var rScale:Number = Math.cos(Math.PI / numSides),
                r:Number = rScale * (size / 2);

            g.lineStyle(0, 0, 0);

            // draw uniform background to show actual triangulation

            if (debugFillBcgr) {
                g.beginFill(0xBB4400, 0.2);
                g.drawRect(0, 0, size, size);
                g.endFill();
            }

            // draw the ball

            g.beginFill(0x0000DD);
            g.drawCircle(size / 2, size / 2, r);

            var m:Matrix = new Matrix();
                m.createGradientBox(size, size);

            g.beginGradientFill(GradientType.LINEAR, [0x00DD00, 0x00DD00], [0, 1], [0, 255], m);
            g.drawCircle(size / 2, size / 2, r);
            g.endFill();

            const smallCircleR:Number = r / 10,
                  smallCircleCR:Number = r - 2 * smallCircleR;

            g.beginFill(0xBB0000);

            for (var i:uint = 0; i < numSides; ++i) {
                var angle:Number = 2 * Math.PI * i / numSides,
                    cx:Number = size / 2 + smallCircleCR * Math.cos(angle),
                    cy:Number = size / 2 + smallCircleCR * Math.sin(angle);
                g.drawCircle(cx, cy, smallCircleR);
            }

            g.drawCircle(size / 2, size / 2, smallCircleR);
            g.endFill();

            // create and return the texture

            var bmd:BitmapData = new BitmapData(size, size, true, 0);
                bmd.draw(canvas);

            return Texture.fromBitmapData(bmd);
        }
    }
} 
```

跑步者示例：

```
package
{
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;

    import starling.core.Starling;
    import starling.events.Event;

    [SWF(width = 600, height = 500, frameRate = 60)]

    public class StarlingTestRunner extends Sprite
    {

        public function StarlingTestRunner() {
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;

            Starling.multitouchEnabled = false;
            Starling.handleLostContext = false;

            var starling:Starling = new Starling(BallExperiment, stage);
            starling.showStats = true;
            starling.simulateMultitouch = true;
            starling.enableErrorChecking = true;
            starling.addEventListener(Event.ROOT_CREATED, onTestCreated);
            starling.start();
        }

        private function onTestCreated(e:Event, test:BallExperiment):void {
            test.start();
        }
    }
} 
```

结果：

![在此处输入图像描述](../Images/472626cbb239b586e0dfe12114ef25e4.png)

要使球变形，只需修改`_vertices`向量中与`x`和`y`坐标对应的元素（即具有索引`4n`和的元素`4n + 1`，其中`n = 0 .. numSides`），然后将数组重新上传`_vertices`到顶点缓冲区。

或者，您可以使用辅助类来实现球的几何形状`VertexData`，如 Starling 手册中所示。

# php - XML 和 PHP 空白的诅咒

> ID：14568135
> 
> 赞同：3
> 
> 时间：2013-01-28T17:55:35.937
> 
> 标签：php, javascript, xml, xmldocument

我遇到了 DOMDocument 和空格的问题。目前我有两种类型的 XML 文件。大约一年前手动创建了一个文件，我将这个文件称为 A。第二个文件，文件 B，是使用 PHP DOMDocument 生成的。我一直在努力（不成功）使文件 A 中的空格与文件 B 匹配。

下面是它的工作原理... 用户可以选择将新`<Slide>`元素添加到 XML 文件中。添加新幻灯片后，用户可以选择将新幻灯片`<Items>`作为元素的子元素添加到 XML 文件中`<Slide>`。

当我`<Slide>`向文件 B 添加一个元素时，它就像一个魅力。我什至可以添加一个`<Item>`零问题的新元素。但是，当我尝试`<Identifier>`使用下面的第二个 PHP 脚本访问我刚刚添加到文件 B 中的新元素时，`$order != 'remove'`我错过了一个节点并`<Information/>`改为选择。

*似乎手动创建的文件 A 有我生成的文件 B 中不存在的空白。我已经尝试了 preserveWhitespace 属性，但它没有帮助。*

**有没有关于如何纠正这个问题的建议。建设性的批评也很受欢迎，因为这是我对动态 XML 操作的第一次尝试。我为篇幅道歉并感谢您的时间！！**

文件 A - 手动创建 - 我正在尝试匹配此文件！

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<Areas>Head &amp; Neck</Areas>
<Area>Head &amp; Neck</Area>
<Type>Angiograph</Type>
<Slide>Ag-01a
    <Title>Catheter Angiography</Title>
    <Item1>
        <Identifier interestCoord=".51,.73" locator="point" labelBool="true" labelTxt="" leaderBool="true">Aortic Arch
        </Identifier>
        <Information/>
        <Question A="" B="" C="" D="" E="" Answer=""/>
    </Item1>

             .... More Items 
```

文件 B - 用户添加之前`<Slide>`。这部分是手动创建的。一个*模板*，如果你愿意。用户输入幻灯片名称后，使用下面的代码块生成新幻灯片。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<Areas>Head &amp; Neck</Areas>
<Area>Head &amp; Neck</Area>
<Type>Brain Sections</Type>
</root> 
```

文件 B - 在用户添加新的`<Slide>`和`<Item>`. 显示的格式表示由 DOMDocument 创建的格式。***我认为这是发生错误的地方！空格！！！***

```
<Slide>Ag-09a
    <Title>Catheter Angiography</Title>
<Item1><Identifier locator="point" interestCoord="0.143,0.65" labelBool="true" labelTxt="" leaderBool="false">Orbit</Identifier><Information/><Question A="" B="" C="" D="" E="" Answer=""/></Item1></Slide> 
```

`<Slide>`用于向 XML 添加新元素的PHP 脚本

```
<?php
session_start();

//Constants
$SECTION_SEP = "========================================================================</br>";

//Variables used to construct file path
$area = trim($_POST['area']);
$slideType = trim($_POST['slideType']);

$rawSlides = trim($_POST['theseSlides']);
$newSlideList = explode(",", $rawSlides);

$fileLocation = "../XML/".$area."/".$slideType."/".$area.".XML";

$dom = new DOMDocument();
echo('New DOMDocument created!</br>');

$dom->load($fileLocation);
echo('XML file loaded!</br>');

/*$dom->preserveWhiteSpace = false;
echo('White space removed!</br>');*/

$dom->documentElement;
echo('DOM initialized!</br>');

if ($dom->getElementsByTagName('Slide')->length == 0){  //New file with no slides

foreach ($newSlideList as $slide){
    $newSlide = $dom->createElement('Slide', $slide);
    $newTitle = $dom->createElement('Title', 'Scan');

    //Add the title element to the Item
    $newSlide->appendChild($newTitle);

    $dom->childNodes->item(0)->appendChild($newSlide);
    echo($slide." has been added to the list!</br>");
 }

} else {
$locators = $dom->getElementsByTagName('Slide');

}

if($dom->save($fileLocation)){
echo("File saved successfully!!");

}else echo("There was a problem saving the file!"); 
```

用于添加/编辑/删除`<Item>`和`<Identifier>`节点的 PHP 脚本取决于`$orders`== 警告的值！冗长：/

```
<?php
session_start();

//Constants
$SECTION_SEP = "========================================================================</br>";

//Variables used to construct file path
$area = trim($_POST['area']);
$slideType = trim($_POST['slideType']);

$fileLocation = "../XML/".$area."/".$slideType."/".$area.".XML";

//echo("File location:".$fileLocation);

//Current data (c_ for current)
$c_poi = "";
$c_type = "";
$c_lblBool = "";
$c_lblOverride = "";
$c_leaderBool = "";

//Determine if this visit is for new or old data
$orders = trim($_POST['orders']);

//Variables used to replace information in XML file loaded below (n_ for new)
$n_slideName = trim($_POST['slideName']); //slide name in view format ie Ag-01a
$n_identName = trim($_POST['ident']); //contains multiple information separated by comma ie 0,Aortic Arch
$n_type = trim($_POST['type']); //locator type
$n_poi = trim($_POST['poi']);
$n_lblBool = trim($_POST['lblBool']);
$n_lblOverride = trim($_POST['lblOverride']);

echo("Modified: ".date('c')."</br>");
$dom = new DOMDocument();
echo('New DOMDocument created!</br>');

$dom->load($fileLocation);
echo('XML file loaded!</br>');

/*$dom->preserveWhiteSpace = false;
echo('White space removed!</br>');*/

$dom->documentElement;
echo('DOM initialized!</br>');

$locators = $dom->getElementsByTagName('Slide');
echo($locators->length.' elements retrieved</br>');

$slideEntryFound = false;
$identEntryFound = false;
$identAttributesFound = false;
echo($SECTION_SEP);

//Locate the correct slide node
foreach ($locators as $locator){

//If there is a match, store the infomation
// rawSlide[x].childNode[0].nodeValue
if(strcmp(trim($locator->childNodes->item(0)->nodeValue),$n_slideName) == 0){

    $slideEntryFound = true;
    $slideChildren = $locator->childNodes;

    //Locate the correct identifier node
    foreach($slideChildren as $child){

        if( strcmp(trim($child->nodeValue), substr($n_identName,strpos($n_identName,",")+1)) == 0){
            $identEntryFound = true;
            if (strcmp($orders, "remove") == 0){//Removing an element

                echo("The identifier being removed is: ".trim($child->nodeValue."</br>"));
                echo("The node path is: ".($child->childNodes->item(1)->getNodePath())."</br>");
                echo($SECTION_SEP);

                $locator->removeChild($child);
                echo("Identifier successfully removed!</br>");
                echo($SECTION_SEP);
                break;

            } else {//Not removing anything - Adding or Editing

                echo("The identifier being modified is: ".trim($child->nodeValue."</br>"));
                echo("The node path is: ".($child->childNodes->item(1)->getNodePath())."</br>");
                echo($SECTION_SEP);

                if($child->childNodes->item(1)->hasAttributes()){

                    $identAttributesFound = true;

                    $c_poi = $child->childNodes->item(1)->getAttribute('interestCoord');
                     echo("--Current interestCoord: ".$c_poi."</br>");
                     echo("++New interestCoord: ".$n_poi."</br>");
                    if(strcmp($c_poi, $n_poi) != 0){
                       $child->childNodes->item(1)->setAttribute('interestCoord',$n_poi);
                    }

                    $c_type = $child->childNodes->item(1)->getAttribute('locator');
                     echo("--Current locator: ".$c_type."</br>");
                     echo("++New locator: ".$n_type."</br>");

                    $c_lblBool = $child->childNodes->item(1)->getAttribute('labelBool');
                     echo("--Current labelBool: ".$c_lblBool."</br>");
                     //echo("++New labelBool: ".$n_lblBool."</br>");

                    $c_lblOverride = $child->childNodes->item(1)->getAttribute('labelTxt');
                     echo("--Current labelOverride: ".$c_lblOverride."</br>");
                     echo("++New labelOverride: ".$n_lblOverride."</br>");

                    $c_leaderBool = $child->childNodes->item(1)->getAttribute('leaderBool');
                     echo("--Current leaderBool: ".$c_leaderBool."</br>");
                     //echo("++New leaderBool: ".$n_leaderBool."</br>");

                    if($n_lblOverride != ""){
                        echo("**A new label override was detected. The identifier will have the alias ".$n_lblOverride.".");
                    }
               break;
            } else echo("Fatal Error - Node does not contain attributes!</br>");

            if($identEntryFound == true && $identAttributesFound == false)
                echo("Error - Attribute entry not found!");
            break;
            }
        }

    }

    if($slideEntryFound == true && $identEntryFound == false && $orders != "remove"){

        echo("The identifier was not found... creating a new identifier!</br>");

     //Create a new Element

        $newElement = $dom->createElement("Item".((integer)(substr($n_identName,0,strpos($n_identName,",")))+1));

        echo("New element created!!</br>");

        //Create new Item children
        $newSubElem = $dom->createElement("Identifier", substr($n_identName,strpos($n_identName,",")+1));
        $newSubElem->setAttribute('locator',$n_type);
        $newSubElem ->setAttribute('interestCoord',$n_poi);
        $newSubElem->setAttribute('labelBool', $n_lblBool);
        $newSubElem->setAttribute('labelTxt', $n_lblOverride);
        //TODO link this next one to a variable instead of hard coding
        $newSubElem->setAttribute('leaderBool', "false");

        //Info Child
        $newInfoElem = $dom->createElement("Information");
        //Question Child
        $newQuestion = $dom->createElement("Question");
            $newQuestion->setAttribute('A', "");
            $newQuestion->setAttribute('B', "");
            $newQuestion->setAttribute('C', "");
            $newQuestion->setAttribute('D', "");
            $newQuestion->setAttribute('E', "");
            $newQuestion->setAttribute('Answer', "");

        //Add new children to main Item
        $newElement->appendChild($newSubElem);
        $newElement->appendChild($newInfoElem);
        $newElement->appendChild($newQuestion);

        $locator->appendChild($newElement);

        echo("New identifier added!!</br>");

    break;
    }
} else {

}
}
if($slideEntryFound == false)
echo("Error - Slide entry not found!");

if($dom->save($fileLocation)){
echo("File saved successfully!!");

echo('<div id="phpHandleBtns>"></br><form><button type="submit" id="continueEdit" formaction="../edit.php">Continue Editing</button>'.
    '</br><button type="submit" id="doneEdit" formaction="../main.php">Done Editing</button></form></div>');

}else echo("There was a problem saving the file!");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:24:11.613

我强烈建议您使用像[http://php.net/manual/en/class.domxpath.php](http://php.net/manual/en/class.domxpath.php)这样的 XPath API来查找您感兴趣的节点。尝试直接使用 DOM API 只会导致你心痛。

更具体地说，我认为您对 childNode() 的调用被空格绊倒了，但是如果您使用 childElement() 代替（不确定它是否存在，但使用 XPath 很容易），它只会忽略任何空格。

# python - 在 optparse 中触发默认值回调

> ID：14568141
> 
> 赞同：1
> 
> 时间：2013-01-28T17:56:04.720
> 
> 标签：python, optparse

我正在使用 Python 的 optparse 来做它最擅长的事情，但是如果没有通过命令行指定其他值，我无法弄清楚如何在默认参数值上触发选项回调；这甚至可能吗？这将使我的代码更干净。

不幸的是，我不能使用 argparse，因为我运行的平台有一个过时的 Python 版本。

**编辑：** 为了提供更多细节，我添加了一个带有回调和默认值的选项

```
parser.add_option(
  "-f",
  "--format",
  type = "string",
  action = "callback",
  callback = format_callback,
  default = "a,b,c,d") 
```

回调函数定义如下：

```
def format_callback(option, opt, value, parser):
  # some processing
  parser.values.V = processed_value 
```

基本上我正在处理`"--format"`值并将结果放入解析器。这很好用，当`"--format"`通过命令行直接指定时，但我希望回调也可以在默认`"a,b,c,d"`值上触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:34:47.903

这根本不可能。

`optparse.OptionParser`实施`parse_args`开始于：

```
def parse_args(self, args=None, values=None):
    """
    parse_args(args : [string] = sys.argv[1:],
               values : Values = None)
    -> (values : Values, args : [string])

    Parse the command-line options found in 'args' (default:
    sys.argv[1:]).  Any errors result in a call to 'error()', which
    by default prints the usage message to stderr and calls
    sys.exit() with an error message.  On success returns a pair
    (values, args) where 'values' is an Values instance (with all
    your option values) and 'args' is the list of arguments left
    over after parsing options.
    """
    rargs = self._get_args(args)
    if values is None:
        values = self.get_default_values() 
```

在处理任何参数之前设置默认值。在解析选项时，实际值会覆盖默认值；当找到相应的参数时调用选项回调。

因此，根本无法为默认值调用回调。模块的设计`optparse`使得这很难改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-27T22:24:53.257

您可以在调用时注入默认值`parse_args`

```
options, args = parser.parse_args(args=["--option=default"] + sys.argv[1:]) 
```

由于参数列表中稍后传递的标志会覆盖之前传递的标志，因此这应该有效。您可能需要修改您的回调函数以根据它在做什么来期望它。

# python - Python将unicode字符串与字符串进行比较？

> ID：14568146
> 
> 赞同：0
> 
> 时间：2013-01-28T17:56:16.173
> 
> 标签：python, dictionary

我四处搜索并尝试对字符串进行 .encode(...) 编码，但我无法想象这个问题会像看起来那样严重。

我有两个数据结构，一个是从 YAML 文件加载的，另一个是从 JSON 文件加载的。

两个内容都已处理（我正在迭代数据）：

YAML 字典

```
[{'SynID': 66, 'action': 'userInit', 'appLocation': 0},
 {'SynID': 66, 'action': 'isEngager', 'appLocation': 0}] 
```

JSON字典

```
{u'name': u'SynID', u'value': u'66'}
...
{u'name': u'action', u'value': u'isEngager'} 
```

最后，在进行比较时，任何涉及整数（非字符串）的操作都会失败。例如：

```
 if uriDict['name'] in expectedResultsSubDict and uriDict['value'] == expectedResultsSubDict[uriDict['name']]:
                Logger().l("[%s] Match: %s:%s == %s" % (pos, uriDict['name'], uriDict['value'], expectedResultsSubDict[uriDict['name']]))
    elif uriDict['name'] in expectedResultsSubDict:
         Logger().l("[%s] Name: %s, value: %s" % (pos, uriDict['name'], uriDict['value'])) 
```

第一个 if 语句无法匹配 SynID:66 的键/值，但会匹配第二个条目 action:isEngager。

```
2013-01-28 12:48:42,151 : DEBUG : [0] Name: SynID, value: 66
2013-01-28 12:48:42,151 : DEBUG : [0] Match: action:userInit == userInit 
```

正如您在输出中看到的，它与 SynID 不匹配，但与操作匹配。

如果我在这一行中添加：

```
elif uriDict['name'] in expectedResultsSubDict and int(uriDict['value']) == int(expectedResultsSubDict[uriDict['name']]):
    Logger().l("[%s] Int Match: %s:%s == %s" % (pos, uriDict['name'], uriDict['value'], expectedResultsSubDict[uriDict['name']])) 
```

它将在 SynID（和其他具有整数的字段）上正常工作，但在字符串字段上失败。我还尝试将 '==' 比较更改为 'is'，在这种情况下，没有任何匹配项。

**问）我如何比较我的字典的值？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:03:03.073

您将 66 与 '66' 进行比较，它们不相等 - 一个是 int，一个是字符串。Python 不会在类型之间进行隐式转换，因为它的理念是“显式优于隐式”。为了让它工作，我会先将两者都转换为字符串，然后进行比较，就像这样

```
if uriDict['name'] in expectedResultsSubDict and str(uriDict['value']) == str(expectedResultsSubDict[uriDict['name']]): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:02:11.250

这里的 unicode 字符串没有问题：您将字符串与整数进行比较，结果为 False，因为嗯，其中一个是字符串，另一个是整数。

您可以使用 将值转换为整数`int(my_value_which_is_string_or_number)`。

# ruby-on-rails - 更新 rabl 视图时如何使 RABL 缓存无效

> ID：14568148
> 
> 赞同：0
> 
> 时间：2013-01-28T17:56:22.677
> 
> 标签：ruby-on-rails, rabl

我正在使用以下 rabl 选项

```
config.cache_all_output = true 
```

这将使用每个对象的默认缓存键。问题是，当我想在 RABL 视图中添加或删除元素时，这不会使缓存无效，因此我继续获取旧视图。

我试过运行 Rabl.reset_source_cache！但这似乎不适用于这个用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T02:11:11.177

Rabl.reset_source_cache！也不适合我，所以我去 public/tmp/cache/ 删除它

# php - 如何使用 Ajax 和 Jquery 将 javascript 数组传递给 php 数组

> ID：14568149
> 
> 赞同：0
> 
> 时间：2013-01-28T17:56:26.290
> 
> 标签：php, jquery, ajax

我正在尝试通过 jQuery 和 Ajax 将 Javascript 数组传递给 PHP 数组。然后 PHP 脚本应该将数组写入 MySQL 数据库，数组中的每个单独条目都分配给数据库中的单独列。这是我目前正在使用的代码（不起作用！）

Javascript：

该数组包含在一个名为“模块”的变量中

```
 $.ajax({
        url: "newaccount.php",
        type: "POST",
        data: {modules: modules},
        success: function(){
         modules.length = 0;
         $("#result").html("Success");
         },
     }); 
```

PHP：

```
 $modules = $_POST['modules'];

 if(mysql_query ("INSERT INTO level3 (mod1, mod2, mod3, mod4) VALUES ('$modules')")) {
  echo "Successfully inserted";
 }
 else {
  echo "Insertion Failed";
 } 
```

这是一个简化版本 - 通常在数据库中插入其他不包含在数组中的值。这些似乎工作正常，但是当我尝试插入数组值时没有任何内容 - 数据库列保持为“空”

请帮忙！我整天都在用头撞这堵砖墙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:03:45.767

您正在寻找的称为序列化技术。您应该序列化 javascript 变量并将其发送到 php，在那里它可以再次反序列化它。您可以参考以下帖子，这将帮助您找到解决方案。

[在 jQuery 中序列化为 JSON](https://stackoverflow.com/questions/191881/serializing-to-json-in-jquery)

[序列化javascript数组](https://stackoverflow.com/questions/9233332/serialize-javascript-array)

[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

# c# - 如何创建方形 hextilemap？

> ID：14568150
> 
> 赞同：0
> 
> 时间：2013-01-28T17:56:27.263
> 
> 标签：c#, windows-phone-7

我有这个代码：

```
 int tX = 1;

            for (int y = 0; y < ROWS; y++)
            {
                for (int x = 0; x < tX; x++)
                {
                    Tile t = new Tile()
                    {
                        Texture = tile,
                        Position = new Microsoft.Xna.Framework.Point(x, y),
                        Troops = rnd.Next(1, 4),
                        OwnedByPlayerIndex = 0
                    };
                    t.Tap += tile_Tap;

                    if (t.Position.Y < ROWS)
                        tiles.Add(t);
                }
                tX += 2;

                tX = (int)MathHelper.Clamp(tX, 0, COLS);
            } 
```

我试图做的是在矩形内创建一个地图，通过行数和列数限制地图。

但它不起作用，因为它没有跟进并完成最后一个角落，使其不完整

![在此处输入图像描述](../Images/1c29b00c036ba7fa4b8c6c206389fc1f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:26:27.103

您似乎在那里有一些多余的逻辑，并且您的内部循环没有遍历所有列。如果要填充整个矩形，则根本不需要 tX。例子：

```
for (int y = 0; y < ROWS; y++)
{
    for (int x = 0; x < COLS; x++)
    {
        Tile t = new Tile()
        {
            Texture = tile,
            Position = new Microsoft.Xna.Framework.Point(x, y),
            Troops = rnd.Next(1, 4),
            OwnedByPlayerIndex = 0
        };
        t.Tap += tile_Tap;
        tiles.Add(t);
    }
} 
```

此外，从您的屏幕截图来看，如果整个底行都被填满，那么下部交错的六边形将与红色矩形的底部重叠。如果您不想添加那些较低的十六进制，那么您需要有条件地添加它们：

```
...
if (y > 0 || 0 == (x & 1))
    tiles.Add(t); 
```

# javascript - MediaElement IE9 视频在切换源时徘徊

> ID：14568151
> 
> 赞同：1
> 
> 时间：2013-01-28T17:56:28.933
> 
> 标签：javascript, internet-explorer-9, mediaelement.js

我正在使用 mediaelement.js 并正在使用类似的东西将不同的内容加载到同一个播放器中

```
 player.pause()
    player.setSrc(newSource)
    player.load()
    player.play() 
```

当用户单击按钮时。

在 IE9 中，在新视频开始播放之前，我体验到旧视频显示了整整一秒钟左右。我知道视频必须加载，但在其他浏览器中，播放器会显示插页式加载覆盖，直到视频准备好播放。

此外，我尝试手动操作叠加层，但无法弄清楚（对于我的一生）要挂钩的事件真正标志着播放器播放新视频的能力（何时解除叠加层）。

我曾尝试在调用 player.play() 之前挂接到“loadeddata”、“canplay”事件，并且仍然体验旧视频一秒钟左右。

我还想避免重新初始化播放器的解决方案。

任何帮助将不胜感激！谢谢

# javascript - Javascript过滤方法不适用于if和else if

> ID：14568152
> 
> 赞同：0
> 
> 时间：2013-01-28T17:56:31.797
> 
> 标签：javascript, object, filter

我有一个包含多个 (10) 对象的对象。

1 个对象如下所示：

```
bracket: null
bracket_id: null
game_site: null
game_site_id: null
id: 88462
next_game_for_loser: null
next_game_for_loser_id: null
next_game_for_winner: null
next_game_for_winner_id: null
next_team_for_loser: 1
next_team_for_winner: 1
number_of_sets: 5
pool: Object
pool_id: 18739
pool_round: Object
pool_round_id: 21984
season: Object
season_id: 20167
start_time: "2013-03-04T13:00:00+01:00"
swiss_round: null
swiss_round_id: null
team_1: Object
team_1_id: 21202
team_1_score: 3
team_2: Object
team_2_id: 21206
team_2_score: 1
time_created: "2012-12-09T12:46:33.626319+00:00"
time_last_updated: "2012-12-09T12:46:33.626361+00:00"
timezone: "Europe/Amsterdam"
tournament: Object
tournament_id: 18519
winner: Object
winner_id: 21202 
```

我想过滤比赛中的对象（球队ID）

我像这样过滤：

```
var game = games.objects.filter(function (gameInfo) { 

            if (gameInfo.team_1_id == team1ID && gameInfo.team_2_id == team2ID) {
                return (gameInfo.team_1_id == team1ID && gameInfo.team_2_id == team2ID) && (inverted = 1);
            } 

            else if (gameInfo.team_1_id == team2ID && gameInfo.team_2_id  == team1ID) {
                return (gameInfo.team_1_id == team2ID && gameInfo.team_2_id  == team1ID) && (inverted = 0);
            }
        }); 
```

我有 2 个变量来设置团队 ID：

```
var team1ID = 21206;
var team2ID = 21202; 
```

我希望过滤器函数返回与 teamID1 和 teamID2 匹配的特定对象。这很好`gameInfo.team_1_id == team1ID && gameInfo.team_2_id == team2ID` 用但是当我像这样反转它时：`else if (gameInfo.team_1_id == team2ID && gameInfo.team_2_id == team1ID)`然后对象`game`总是空的......为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:00:19.860

```
(inverted = 0) 
```

在这里你是在分配，而不是比较。结果值 ( `0`) 将始终是虚假的，并且过滤器函数将返回一个空`game`数组。

此外，您应该首先检查`inverted`标志，而不是重复其他不必要的比较：

```
var game = games.objects.filter(function (gameInfo) { 
    return inverted == 1
      ? gameInfo.team_1_id == team1ID && gameInfo.team_2_id == team2ID
      : gameInfo.team_1_id == team2ID && gameInfo.team_2_id == team1ID;
}); 
```

如果你想设置它，它应该是这样的：

```
var inverted;
var game = games.objects.filter(function (gameInfo) { 
    if (gameInfo.team_1_id == team1ID && gameInfo.team_2_id == team2ID) {
        inverted = 0;
        return true;
    } else if (gameInfo.team_1_id == team2ID && gameInfo.team_2_id == team1ID) {
        inverted = 1;
        return true;
    } // else
        return false;
});

// Shorter, using the comma operator:

var game = games.objects.filter(function (gameInfo) { 
    return (gameInfo.team_1_id == team1ID && gameInfo.team_2_id == team2ID && (inverted = 1, true)
        || (gameInfo.team_1_id == team2ID && gameInfo.team_2_id == team1ID && (inverted = 0, true);
}); 
```

# mysql - Mysql Query中的索引表现冷漠

> ID：14568157
> 
> 赞同：2
> 
> 时间：2013-01-28T17:56:43.727
> 
> 标签：mysql, sql, indexing, query-optimization

我有一个查询：

```
select SQL_NO_CACHE id from users
 where id>1 and id <1000
   and id in  ( select owner_id from comments and content_type='Some_string'); 
```

*（请注意，它缺少用于我的狮身人面像索引的实际大型查询，代表问题）* 此查询大约需要**3.5 秒**（从 id = 1..5000 修改范围使其大约**15 秒**）。

users 表有大约 35000 个条目，comments 表有大约 8000 个条目。

解释上面的查询：

```
explain select SQL_NO_CACHE id from users
        where id>1 and id <1000
          and id in  ( select distinct owner_id from d360_core_comments); 
```

> | 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
> 
> * * *
> 
> | 1 | 初级 | 用户 | 范围 | 初级 | 初级 | 4 | 空 | 1992 | 使用哪里；使用索引 |
> 
> | 2 | 依赖子查询 | d360_core_comments | 全部 | 空 | 空 | 空 | 空 | 6901 | 使用哪里；使用临时 |

这里的单个子查询（`select owner_id from d360_core_comments where content_type='Community20::Topic';`）需要将近 0.0 秒。

但是，如果我**在 owner_id,content_type 上添加索引**，（请注意此处的顺序）

`create index tmp_user on d360_core_comments (owner_id,content_type);`

我的**子查询**在 ~0.0 秒内按原样运行，没有使用索引：

> mysql> 解释 select owner_id from d360_core_comments where content_type='Community20::Topic';
> 
> | 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
> 
> * * *
> 
> | 1 | 简单 | d360_core_comments | 全部 | 空 | 空 | 空 | 空 | 6901 | 使用位置 |

然而，现在我的主要查询 ( `select SQL_NO_CACHE id from users where id>1 and id <1000 and id in ( select owner_id from d360_core_comments where content_type='Community20::Topic');`) 现在在 ~0 秒内运行，解释如下：

> mysql> 解释 select SQL_NO_CACHE id from users where id>1 and id <1000 and id in (select owner_id from d360_core_comments where content_type='Community20::Topic');
> 
> | 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
> 
> * * *
> 
> | 1 | 初级 | 用户 | 范围 | 初级 | 初级 | 4 | 空 | 1992 | 使用哪里；使用索引 |
> 
> | 2 | 依赖子查询 | d360_core_comments | 索引子查询 | tmp_user | tmp_user | 5 | 功能 | 34 | 使用位置 |

**所以我的主要问题是：**

*   如果在我的子查询中使用的表上定义的索引没有在我的实际子查询中使用，那么它如何在这里优化查询？
*   以及为什么当实际的子查询和主查询独立地更快时，第一个查询首先要花费这么多时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:17:46.087

在没有索引的完整查询中似乎发生的是 MySQL 将构建（某种）子查询生成的所有 owner_id 的临时表。然后对于 users 表中与 id 约束匹配的每一行，将在此临时构造中执行查找。目前尚不清楚开销是否是创建临时构造，或者查找是否实现次优（以便所有元素与外部查询的每一行线性匹配。

当您在 owner_id 上创建索引时，当您只运行子查询时这不会改变任何内容，因为它对 owner_id 没有任何条件，索引也不会覆盖 content_type 列。

但是，当您使用索引运行完整查询时，会有更多可用信息，因为我们现在有来自外部查询的值，这些值应该与索引覆盖的 owner_id 匹配。所以现在的执行似乎是运行外部查询的第一部分，并为每个匹配的行按 owner_id 进行索引查找。换句话说，一个可能的执行计划是：

```
From Index-Users-Id Get all id matching id>1 and id <1000
For Each Row
    Include Row If Index-Comment-OwnerId Contains row.Id
                   And Row Matches content_type='Some_string' 
```

因此，在这种情况下，运行 1000 个（我假设）索引查找的工作比构建 8000 个可能的 owner_id 的临时结构要快。但这只是一个假设，因为我不太了解 MySQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:15:00.343

如果您阅读 MySQL 参考手册的这一部分：使用[Strategy](http://dev.mysql.com/doc/refman/5.1/en/subquery-optimization-with-exists.html)[优化子查询`EXISTS`](http://dev.mysql.com/doc/refman/5.1/en/subquery-optimization-with-exists.html)，您会看到查询优化器将您的子查询条件从：

```
id in ( select distinct owner_id
          from d360_core_comments
         where content_type='Community20::Topic') 
```

进入：

```
exists ( select 1
           from d360_core_comments
          where content_type='Community20::Topic'
            and owner_id = users.id ) 
```

`(owner_id, content_type)`这就是为什么当子查询作为独立查询测试时索引没有用，但在考虑转换后的子查询时它很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:30:41.103

你应该知道的第一件事是 MySQL 不能优化依赖子查询，这是长期以来众所周知的 MySQL 缺陷，将在 MySQL 6.x 中修复（只是谷歌“mysql依赖子查询”和你等着瞧）。也就是说，子查询基本上是针对`users`表中的每个匹配行执行的。由于您有一个附加条件，因此总执行时间取决于该条件。解决方案是用连接替换子查询（您期望从 MySQL 获得的优化）。

其次，您的子查询中存在语法错误，并且我认为 owner_id 存在条件。因此，当您在其上添加索引时，`owner_id`它被使用，但对于第二个条件是不够的（因此 no `using index`），但为什么根本没有提到`EXPLAIN`是一个问题（我认为是因为 上的条件`users.id`）

第三，我不知道你为什么需要那个`id > 1 and id < 5000`条件，但你应该明白，这两个范围条件需要非常准确、有时不明显且依赖数据的索引方法（与相等比较条件相反），如果你真的不需要它们，仅用于不明白为什么查询需要这么长时间，那么这是一个坏主意，它们不会发光。

如果需要条件并且索引`owner_id`仍然存在，我将重写查询如下：

```
SELECT id 
FROM (
  SELECT owner_id as id
  FROM comments
  WHERE owner_id < 5000 AND content_type = 'some_string'
) as ids
JOIN users ON (id)
WHERE id > 1; 
```

PS 上的复合索引`(content_type, owner_id)`甚至更适合查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T18:08:05.223

第 1 步：使用`id BETWEEN x AND y`而不是`id >= x AND id <= y`. 您可能会发现一些令人惊讶的收获，因为它的索引更好。

第 2 步：调整您的 sub-`SELECT`进行过滤，这样就不必重复两次：

```
SELECT SQL_NO_CACHE id 
  FROM users
 WHERE id IN (SELECT owner_id 
                FROM comments
               WHERE content_type='Some_string' 
                 AND owner_id BETWEEN 1 AND 1000); 
```

你的陈述似乎有几个错误。例如，您正在选择 2 到 999，可能两端都相差一个，并且子选择无效。

# css - 使用指南针进行字体编译

> ID：14568158
> 
> 赞同：1
> 
> 时间：2013-01-28T17:56:54.747
> 
> 标签：css, compilation, sass, font-face, compass-sass

对不起，如果我的英语不好，我是法国人。这是问题所在：我在我的 scss 文件中编写了一个字体包含，如下所示：

```
@include font-face("Enhanced Dot Digital", font-files("font/enhanced_dot_digital.ttf")); 
```

然后，当它编译它时，我在我的 css 文件中得到了这个：

```
@font-face {
  font-family: "Enhanced Dot Digital";
  src: url('///fonts/font/enhanced_dot_digital.ttf') format('truetype');
} 
```

问题是对于我的字体（字体/enhanced_dot_digital.ttf）来说，这不是一条好路，我认为这就是它不起作用的原因。但是我不能去掉'///fonts'，我不知道这是什么原因。你能帮我吗 ：/？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:50:52.613

检查 config.rb 文件中的“字体”路径。看起来它已经为您包含了该路径。所以尝试将其更改为此..`font-files("enhanced_dot_digital.ttf")`并将 config.rb 中的路径更改为`fonts_dir = "font"`或您存储字体的任何文件夹。

# gcc - ARM 二进制文件的检测

> ID：14568159
> 
> 赞同：2
> 
> 时间：2013-01-28T17:56:55.943
> 
> 标签：gcc, compiler-construction, arm, llvm, jit

假设我有一个在 ARM 处理器上运行的 Linux 系统。当前进行动态二进制分析/检测的可用工具有哪些？我想知道是否有像[Pin](http://www.pintool.org/)之类的东西，但适用于 ARM 二进制文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:26:58.753

Valgrind[支持 ARM](http://www.valgrind.org/info/platforms.html)。[ARM](http://tech.groups.yahoo.com/group/pinheads/message/8138)也有PIN，但已停产。您可能可以找到旧副本，但它可能不支持 ARMv5 以上的任何内容。

# php - in_array() 和 || 中哪个更好用 操作员？

> ID：14568165
> 
> 赞同：2
> 
> 时间：2013-01-28T17:57:17.027
> 
> 标签：php, arrays, performance

考虑到脚本的性能，我问这个问题。知道 PHP 数组的性能不是很好，我正在徘徊在这种情况下哪种方式最好。

假设 if`$x`等于 a 或 b 或 c 或 d 我们需要`action_a()`执行，如果不`action_b()`执行..

我们可以使用以下`||`操作符来实现它；

```
if($x == 'a' || $x == 'b' || $x == 'c' || $x == 'd'){
       action_a();
}else{
       action_b();
} 
```

或者我们可以使用`in_array()`如下方式实现它；

```
if(in_array($x,array('a','b','c','d'))){
       action_a();
}else{
       action_b();
} 
```

我想知道的是这两个选项中哪一个会表现良好：

1.  当可能值的数量`$x`很高时？

2.  当可能值的数量`$x`很少时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:00:16.383

[编写基准脚本。](https://stackoverflow.com/questions/8291366/how-to-benchmark-efficiency-of-php-script)

但总的来说，选择哪种变体几乎不应该取决于性能。特别是在您的输入数据非常非常小（比如<10）的超级琐碎情况下。

这个最重要的标准*始终*是可读性。

只有在出现不可否认的性能问题时才开始优化代码。

[过早的优化是万恶之源](http://en.wikipedia.org/wiki/Tony_Hoare)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T18:05:23.127

对于大量值，我不会使用任何一种方法。我将创建一个关联数组，其键是可能的值，并使用`isset()`：

```
$test_array = array_flip(array('a', 'b', 'c', 'd', ...));
if (isset($test_array[$x])) ... 
```

这有一次性的 O(n) 创建成本`$test_array`，然后检查匹配是 O(1)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T18:15:11.373

这取决于您使用的 PHP 版本。**开会`PHP 5.3` `in_array()`慢一些**。但在**PHP 5.4 或更高版本`in_array()`中会更快**。

仅当您认为条件会随着时间的推移而增长或此条件应该是动态的时，才使用`in_array()`.

我做了一个基准测试。循环您的条件 10,000 次。

结果为**`PHP 5.3.10`**

```
+----------------------------+---------------------------+
| Script/Task name           | Execution time in seconds |
+----------------------------+---------------------------+
| best case in_array()       | 1.746                     |
| best case logical or       | 0.004                     |
| worst case in_array()      | 1.749                     |
| worst case logical or      | 0.016                     |
| in_array_vs_logical_or.php | 3.542                     |
+----------------------------+---------------------------+ 
```

的结果**`PHP 5.4`**

```
+----------------------------+---------------------------+
| Script/Task name           | Execution time in seconds |
+----------------------------+---------------------------+
| best case in_array()       | 0.002                     |
| best case logical or       | 0.002                     |
| worst case in_array()      | 0.008                     |
| worst case logical or      | 0.010                     |
| in_array_vs_logical_or.php | 0.024                     |
+----------------------------+---------------------------+ 
```

**最佳情况：** 匹配**第一个**元素。
**最坏情况：** 匹配**最后一个**元素。

这是代码。

```
$loop=10000;
$cases = array('best case'=> 'a', 'worst case'=> 'z');
foreach($cases as $case => $x){
    $a = utime();
    for($i=0;$i<$loop; $i++){
        $result = ($x == 'a' || $x == 'b' || $x == 'c' || $x == 'd' || $x == 'e' || $x == 'f' || $x == 'g' || $x == 'h' || $x == 'i' || $x == 'j' || $x == 'k' || $x == 'l' || $x == 'm' || $x == 'n' || $x == 'o' || $x == 'p' || $x == 'q' || $x == 'r' || $x == 's' || $x == 't' || $x == 'u' || $x == 'v' || $x == 'w' || $x == 'x' || $x == 'y' || $x == 'z');
    }
    $b = utime();
    $ar = array('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z');
    for($i=0;$i<$loop; $i++){
        $result = in_array($x, $ar);
    }
    $c = utime();

    $Table->addRow(array("$case in_array()", number_format($c-$b, 3)));
    $Table->addRow(array("$case logical or", number_format($b-$a, 3)));
} 
```

这是一个提供微秒浮点数`utime()`的包装器，是一个实例。`microtime()``$Table`[`Console_Table`](http://pear.php.net/package/Console_Table/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T18:12:15.187

您的第一个解决方案在性能方面效果很好，当您之后不需要更改任何内容时，但是代码的可读性变得越来越差，您必须检查的值越多。

使用数组时，您可以根据需要动态扩展它。它还使您的代码保持清洁。

据我所知，与使用循环手动搜索相比，in_array 函数的性能相当低。

此外，您可以声明所谓的“地图”：

```
$actions = [
  "a" => function(){ action_a() ; },
  "b" => function(){ action_b() ; }
] ; 
```

之后，你这样做：

```
if (isset($actions[$x])) 
  $action[$x]() ;
else
  do_smth() ; 
```

一个小提示：如果你使用 PHP >=5.4，你可以像这样声明一个新数组：

```
$array = [1,2,3,4,5] ;
$array[] = "I am a new value to push" ; 
```

# java - WebSphere 8.5：单元测试和可嵌入容器

> ID：14568167
> 
> 赞同：3
> 
> 时间：2013-01-28T17:57:19.800
> 
> 标签：java, maven, ejb, websphere-8, embedded-container

我正在尝试使用 WebSphere 8.5 可嵌入容器在 Maven 项目中运行以下单元测试：

```
import javax.ejb.embeddable.EJBContainer;

...

private EJBContainer ec;

@Before
public void setUp() {
    final Map<String, Object> properties = new HashMap<String, Object>();

    properties.put(EJBContainer.PROVIDER, "com.ibm.websphere.ejbcontainer.EmbeddableContainerProvider");

    ec = EJBContainer.createEJBContainer(properties);
}

@Test
public void test1(){
...
} 
```

但是我在 setup 方法中遇到了以下异常：

> CNTR9403E: 可嵌入企业 bean 容器无法启动具有相同文件名的多个模块：project1\target\classes 和 project2\target\classes

有人知道如何解决这个问题吗？我搜索但找不到任何有用的东西。

**编辑：** 我在这里找到了异常 CNTR9403E 的文档：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.messages.doc%2Fcom.ibm.ejs.container.container.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.messages.doc%2Fcom.ibm.ejs.container.container.html)

> CNTR9403E: 可嵌入企业 bean 容器无法启动具有相同文件名的多个模块：{0} 和 {1}
> 
> ```
> Explanation   User code has directed the embeddable container to start multiple modules with the same file name.
> Action    Specify a list of modules that does not have duplicate file names, or rename one of the modules with a unique file name. 
> ```

但我不知道如何解决这个问题。它是否在抱怨路径末尾的两个“类”目录？如何在 Maven 多模块项目中解决这个问题？或者它是 WebSphere 8.5 中的一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:12:35.373

是的，`classes`目录名称导致冲突。没有使用这些目录名称的解决方法，所以我建议`.jar`改为测试生成的，虽然我对 Maven 没有专业知识，所以我不知道这有多可行。这有点令人不满意，因此您可以打开[WebSphere RFE](http://www.ibm.com/developerworks/rfe/?BRAND_ID=181)以允许指定属性以消除歧义。

# android - 在搜索中使用特殊字符

> ID：14568168
> 
> 赞同：0
> 
> 时间：2013-01-28T17:57:20.823
> 
> 标签：android, android-searchmanager

我正在使用 SearchView（或 SearchManager？）在数据库中搜索命中。它工作正常，但问题是如果您搜索带有特殊字符（č、ž、š - 键盘都支持）的单词，搜索不会返回任何内容，即使该单词存在于数据库中。例如：`Word in database ("Računalnik"); search string ("Rač") - returns 0, search string ("Rac") - returns 0.` 有没有办法改变搜索编码，或者以其他方式处理这些搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T17:10:17.307

我认为您必须对那些特殊字符使用 unicode。

# java - Android - 无法从自定义对话框中的 EditText 获取价值

> ID：14568172
> 
> 赞同：11
> 
> 时间：2013-01-28T17:57:26.910
> 
> 标签：java, android, xml, dialog, android-edittext

我未能从自定义对话框中的 EditText 对象获取输入。

```
 public class SetCityDialog extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LayoutInflater factory = LayoutInflater.from(MainActivity.this);
        final View view = factory.inflate(R.layout.city_dialog, null);

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();
        builder.setView(inflater.inflate(R.layout.city_dialog, null))
                // Add action buttons
                .setPositiveButton("OK",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int id) {

                                //This is the input I can't get text from
                                EditText inputTemp = (EditText) view.findViewById(R.id.search_input_text);
                                //query is of the String type
                                query = inputTemp.getText().toString();
                                newQuery();
                                getJSON newData = new getJSON();
                                newData.execute("Test");
                            }
                        })
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                SetCityDialog.this.getDialog().cancel();
                            }
                        });
        return builder.create();
    }
} 
```

我没有得到任何异常，但变量查询设置为空字符串。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-26T08:03:48.880

我试图做同样的事情，但我得到了同样的错误。我不知道为什么。我过去已经使用过 AlertDialog.Builder 并且没有遇到任何问题。但在您的情况下更改此代码：

```
public void onClick(DialogInterface dialog,
                                int id) {

                            //This is the input I can't get text from
                            EditText inputTemp = (EditText) view.findViewById(R.id.search_input_text);
                            //query is of the String type
                            query = inputTemp.getText().toString();
                            newQuery();
                            getJSON newData = new getJSON();
                            newData.execute("Test");
                        } 
```

通过这个：

```
public void onClick(DialogInterface dialog,
                                int id) {
                            Dialog f = (Dialog) dialog;
                            //This is the input I can't get text from
                            EditText inputTemp = (EditText) f.findViewById(R.id.search_input_text);
                            query = inputTemp.getText().toString();
                           ...
                        } 
```

这个解决方案对我有用，对你来说似乎也是一样的。[在stackoverflow](https://stackoverflow.com/questions/12799751/android-how-do-i-retrieve-edittext-gettext-in-custom-alertdialog)上找到

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T18:19:05.827

改用这个：

```
View myLayout = nflater.inflate(R.layout.city_dialog, null);
EditText myEditText = (EditText) myLayout.findViewById(R.id.myEditText);
String valueOfEditText = myEditText.getText().toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T14:28:28.410

```
This is worked for me: 

// if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                try {

                    Dialog inDialog = (Dialog) dialog;                    

                    EditText emailAddress = (EditText) inDialog.findViewById(R.id.emailAddress);
                    email = emailAddress.getText().toString();

                    if(email.length() == 0) {

                        objPublicDelegate.showToast("Please fill Email Address.");

                    }else{

                        objLoadingDialog.show("Please wait...");

                        // Call a network thread Async task 
                        mNetworkMaster.runForgetAsync(email);

                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-10T12:13:24.387

不需要做那么多编码。只是改变

```
 builder.setView(inflater.inflate(R.layout.city_dialog, null)) 
```

至

```
 builder.setView(view) 
```

并使用 **view.findView 访问 EditText 的文本.....

```
 EditText inputTemp = (EditText) view.findViewById(R.id.search_input_text);
    String xyz = inputTemp.getText().toString(); 
```

# jquery - 简单的 jquery.ajax 返回未定义

> ID：14568173
> 
> 赞同：0
> 
> 时间：2013-01-28T17:57:27.077
> 
> 标签：jquery, ajax, wordpress, undefined

我知道这些无处不在，但我似乎在我的代码中看不到错误。我正在使用数据类型 json 进行简单的 ajax 调用。此调用似乎成功但不返回任何内容，并且警报打印`undefined`。

javascript:

```
jQuery(document).ready(function() {
    if(jQuery('#statesel').length) {
        var dataString;

        dataString = "nonce=" + dynoselect.post_dyno_select_nonce;
        jQuery.ajax({
            type: "POST",
            url: dynoselect.ajaxurl,
            dataType: "json",
            data: dataString,
            success: function(result) {
                alert(result.status);
            }
        });
    }
} 
```

php:

```
<?php
add_action("init", "ci_enqueuer");
add_action("wp_ajax_dyno_select", "dyno_select");
add_action("wp_ajax_nopriv_dyno_select", "dyno_select");

function ci_enqueuer() {
    wp_register_script('dyno_select_script', plugins_url('/js/dyno_select_script.js', __FILE__), array('jquery'));
    wp_localize_script('dyno_select_script', 'dynoselect', array('ajaxurl' => admin_url('admin-ajax.php'), 'post_dyno_select_nonce' => wp_create_nonce('dyno_select_nonce')));
    wp_enqueue_script('jquery');
    wp_enqueue_script('dyno_select_script');
}

function dyno_select() {
    $nonce = $_POST['nonce'];

    //checking token, looking for funny business
    if (!wp_verify_nonce( $nonce, 'dyno_select_nonce')) {
        $result['status'] = 'nonce failed';
        $result = json_encode($result);
        echo $result;
        die();
    }

    $result['status'] = 'success';
    echo json_encode($result);
    die();
}
?> 
```

正如一个注释，这是使用 Wordpress 完成的，因此是`init`函数。以为我会保留它以备不时之需。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:15:45.997

该 JSON 参数字符串看起来不起作用。呼叫是否正确发布到服务器？

如果是，请忽略这一点。

如果没有，我建议在调用 jQuery.ajax 之前包括 json2.js ( [http://www.json.org/js.html ) 和字符串化你的数据参数：](http://www.json.org/js.html)

```
var jsonData = { param1: 'something', param2: 999 };
var dataString = JSON.stringify(jsonData); 
```

**编辑：** 这个接受的[SO 答案](https://stackoverflow.com/a/2269397/249153)中的示例没有字符串化，但它确实构造并传递了一个有效的 JSON 对象。并显示服务器端解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:26:46.143

问题是 POST 没有与 ajax 调用一起传递“动作”。将“动作”添加到网址后，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:05:32.457

`jQuery.ajax`有 3 个`success`回调参数。第一个是您指定类型的数据（在您的示例中为 JSON）。所以它没有状态属性。

此外，当您收到成功警报时，表示`Content-type`已正确设置并且是有效的 JSON 对象。

尝试使用：

```
success: function(result, status, XHR) {
     alert(XHR.status);
} 
```

# javascript - 检测浏览器是否使用 GPU 加速图形进行渲染

> ID：14568176
> 
> 赞同：3
> 
> 时间：2013-01-28T17:57:46.853
> 
> 标签：javascript, css, asp.net-mvc-4, gpu, mozilla

所以我正在构建大型网站，它使用 css3 动画转换（我正在使用 jaquery.transit 来操作元素转换及其 css 样式）。我偶然发现了两个问题：

1.  FF（最新更新）不使用 GPU 进行 translate3d() 层渲染，也许我错了，mozilla 根本不使用 GPU 加速图形。我真的还没有完全理解。
2.  即使我欺骗 Chrome 使用 GPU 进行 translate3d() 和 translateZ() 层渲染，但在 GPU 不好或没有 GPU 的计算机上，这些图形非常糟糕，有时甚至看不到过渡的中间开始和结束。

**问题：**

1.  我该怎么做才能提高过渡元素的 FPS，例如，我有 3200x3200 的`div`旋转和缩放以及同时在 x，y 轴上平移，大约。该表面上显示 5-20 个元素`div's`？
2.  也许有一种方法可以检测浏览器是否有足够的 GPU 支持来知道我是否需要重定向到更简单的网站版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:08:13.833

因为[WebGL](http://en.wikipedia.org/wiki/WebGL)使用 GPU，这个惊人的`Modernizr`项目允许检查 webGL 支持的浏览器：http: [//modernizr.com/news/](http://modernizr.com/news/)

`Modernizr.webgl`在[http://modernizr.com/docs/](http://modernizr.com/docs/)下查看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T14:32:33.250

当时的主要问题是屏幕上的所有 PNG 都必须在浏览器中重新计算和重新编译。

为了最大限度地提高性能，我必须做几件事：

1.  始终在图像上具有预定义`width`和`height`属性。这样做是让浏览器知道图片应该是什么大小，并且与它一起使用`scale()`时不会重新计算和重新编译这些图像。这些东西非常昂贵。因此，基本上，除了`scale()`修改图像大小之外，一切都很完美，动画也很棒。
2.  尽可能避免使用`visibility`属性，它实际上就像`opacity: 0`将元素保留在布局中，使布局重新计算的时间更长。始终尽可能使用`display: none`，这将完全消除布局计算中的元素。这是一个主要的缺陷，因为我必须重新考虑要排除的 UI，`visibility`并且必须尽量减少使用的 DOM 节点数。

总的来说，这是一次巨大的冒险和丰富的体验，希望这个问题/答案对某人有所帮助。

# android - Android：如何在 Ceratin 中获取 Panoramio/Google 地图照片列表？

> ID：14568185
> 
> 赞同：0
> 
> 时间：2013-01-28T17:58:26.667
> 
> 标签：android, gps, maps, panoramio

我正在开发一个应用程序，其中包括处理用户位置周围的 Panoramio/Google 地图照片。它使用图像、坐标和照片描述。获取此类信息最方便的方式是什么？

感谢转发帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:06:07.440

Panoramio 提供了一种 API，它具有多种获取图像和描述的可能性。你可以在那里看看：

[http://www.panoramio.com/api/data/api.html](http://www.panoramio.com/api/data/api.html)

# c# - SqlCommand 参数不起作用

> ID：14568188
> 
> 赞同：-3
> 
> 时间：2013-01-28T17:58:30.550
> 
> 标签：c#

任务：

用必要的数据替换 sql 语句中的某些变量。

问题：

变量没有被替换

C#代码：

```
SqlCommand cmd = new SqlCommand(@"
     select 
                 1 [GL], 
                 (
                     select 
                             isnull(COUNT(*), 0)
                         from 
                             @DataDB..APSetup
                 ) [AP],
                 (
                     select 
                             isnull(COUNT(*), 0)
                         from
                             @DataDB..ARSetup
                 ) [AR],
                 (
                     select 
                             isnull(COUNT(*), 0)
                         from 
                             @DataDB..CASetup
                 ) [CA],
                 case 
                     when (
                          select 
                                  isnull(COUNT(*), 0) 
                              from
                                  @DataDB..SalesTax
                          ) > 0 
                         then 1 else 0
                 end [TX], 
                 (
                     select 
                             isnull(COUNT(*), 0)
                         from
                             @DataDB..INSetup
                 ) [IN], 
                 (
                     select
                             isnull(COUNT(*), 0)
                         from 
                             @DataDB..POSetup
                 ) [PO],
                 (
                     select
                             isnull(COUNT(*), 0)
                         from 
                             @DataDB..SOSetup
                 ) [SO], 
                 (
                     select 
                             isnull(COUNT(*), 0)
                         from
                             @DataDB..RQSetup
                 ) [RQ],
                 (
                    select 
                             COUNT(*)
                        from 
                             @DataDB..pcsetup 
                        Where 
                             Setupid = 'PC' AND PERNBR <> ''
                 ) [PJ] 
    from 
          @DataDB..glsetup");

    cmd.Parameters.AddWithValue("@DataDB", CurrentBranch.AppDB);
    AppConnection.InitialCatalog = CurrentBranch.AppDB;
    Modules.AddRange(SqlQueries.DataQuery2(cmd, AppConnection.ConnectionString)); 
```

查询：

```
select 1 [GL], (select isnull(COUNT(*),0) from @DataDB..APSetup) [AP], (select isnull(COUNT(*),0) from @DataDB..ARSetup) [AR], (select isnull(COUNT(*),0) from @DataDB..CASetup) [CA], case when (select isnull(COUNT(*),0) from @DataDB..SalesTax) > 0 then 1 else 0 end [TX], (select isnull(COUNT(*),0) from @DataDB..INSetup) [IN], (select isnull(COUNT(*),0) from @DataDB..POSetup) [PO], (select isnull(COUNT(*),0) from @DataDB..SOSetup) [SO], (select isnull(COUNT(*),0) from @DataDB..RQSetup) [RQ],  (select COUNT(*) from @DataDB..pcsetup Where Setupid = 'PC' AND PERNBR <> '') [PJ] from @DataDB..glsetup 
```

问题：

为什么变量替换不起作用？

附加信息：

问题不在于查询，当我手动将 @DataDB 替换为其预期值时，它可以正常工作。

问题是 C# SqlCommand.Parameters.AddWithValue();

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:04:16.107

原因是您无法参数化您尝试从中选择的数据库/表。你不能这样做：`select * from @SomeTable`你已经在 C# 中这样做了，只需这样做：

（为清楚起见剪断）：

```
string sql = string.Format("select isnull(COUNT(*),0) from {0}..APSetup)...", CurrentBranch.AppDB); 
```

# javascript - xspf 禁用 Javascript

> ID：14568189
> 
> 赞同：0
> 
> 时间：2013-01-28T17:58:31.770
> 
> 标签：javascript, html, xspf

我的 HTML 代码有一个自动播放的 XSPF 播放器：

```
<div id="mp3">
  <object type="application/x-shockwave-flash"
data="xspf_player_slim.swf?&amp;playlist_url=play.xspf&amp;color=8A754A&amp;autoplay=true&amp;repeat_playlist=true&amp;txt_color=FF6600" width="180" height="15">
<param name="movie" value="xspf_player_slim.swf?&amp;playlist_url=play.xspf&amp;color=8A754A&amp;autoplay=true&amp;repeat_playlist=true&amp;txt_color=FF6600" /></object>
</div> 
```

现在，在同一个网站上有一个视频。

```
<a href="http://www.youtube.com/watch?v=kh29_SERH0Y?rel=0" rel="prettyPhoto" title="Video YouTube"> 
```

问题是当我播放视频时，XSPF 在后台播放，我不知道如何在播放视频时禁用。在 XSPF 网站上看不到选项。

有什么建议吗？有什么 JavaScript 代码可以阻止它吗？

# javascript - 如何在网页中集成 AIML 聊天机器人

> ID：14568192
> 
> 赞同：4
> 
> 时间：2013-01-28T17:58:41.067
> 
> 标签：javascript, html, bots, chatbot, aiml

我有一个网页，我只是在其中玩 HTML、CSS 和 Javascript。我决定在那里创建一个聊天机器人。

AIML 似乎是要走的路，我已经知道怎么写了。

问题是：拥有 bot.aiml 文件后，我该怎么处理它？我假设我需要某种 javascript 函数来与之交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-18T11:51:30.403

如果您只能访问 HTML、CSS 和 JavaScript 而不能访问某些服务器端技术，那么您将需要一个 JavaScript AIML 解释器。

快速搜索出现以下内容：

用 node.js 编写的[AIML 解释器](https://www.npmjs.com/package/aimlinterpreter)

> AIMLInterpreter 是一个模块，它允许您解析 AIML 文件并找到给定消息的正确答案。

用 node.js 编写[的目标高。](https://www.npmjs.com/package/aiml-high)建立在目标解释器上。

> aiml-high 是一个允许您解析 AIML 文件并找到给定消息的正确答案的模块。

[Surly2](https://github.com/mrchimp/surly2)

> 一个态度不好的半完整 node.js AIML 解释器。
> 
> Surly2 是对 Surly 的重新制作，使用 Node 5 并尽可能多地使用异步性。

[魁梧](https://github.com/Ovyerus/burly)

> Burly 是 Surly2 的一个分支

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T05:22:43.167

我也搜索过相同的内容，但遗憾的是我没有成功创建自己的机器人..相反，我找到了一个可以完全一样的网站，而不是我们重新发明循环......

*   在此处创建您的帐户
    [http://www.pandorabots.com/botmaster/en/new-account](http://www.pandorabots.com/botmaster/en/new-account)
*   登录后，您可以选择上传自己的 AIML 文件并使用默认的 AIML 文件以及自定义 HTML 等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-14T06:07:03.220

由于您已经了解聊天机器人，您可以使用 php 或 j2ee（jsp 是最简单的）将其集成到您的网页中，这将向机器人方法发送请求并返回响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T12:38:25.007

[ChatterBean](http://www.geocities.ws/phelio/chatterbean/)可以帮助您解释 AIML 文件。来自[Alicebot.org](http://www.alicebot.org/downloads/programs.html)，

> ChatterBean 是一个用纯 Java 编写的 AIML 解释器（也称为“Alicebot”）。

要与 Web 集成，请使用 ChatterBean 托管 J2EE 应用程序。

# php - 如何在 facebook 网络应用程序中通过 php 脚本更改画布 url

> ID：14568194
> 
> 赞同：0
> 
> 时间：2013-01-28T17:58:43.343
> 
> 标签：php, facebook-canvas

我正在使用 facebook 网络应用程序，我发现我只能通过 facebook API 的开发人员部分来更改画布 URL。无论如何，我可以通过 PHP 脚本更新或更改画布 URL，因为我可以更改其他一些设置，例如 facebook 应用程序的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:23:31.000

据我所知，不是。

但是，您可以将参数传递给画布 URL，然后根据传递的参数包含其他 PHP 脚本。

```
$action = "";

if (isset($_REQUEST['action]))
    {
        $action = $_REQUEST['action'];
    }

switch ($action) {
case "football":
      require_once("football.php");
      break;
case "tennis":
      require_once("tennis.php");
      break;
default:
      require_once("skydiving.php"); 
} 
```

# javascript - 将上下文添加到无上下文的 Javascript 回调中

> ID：14568199
> 
> 赞同：2
> 
> 时间：2013-01-28T17:58:56.043
> 
> 标签：javascript, callback, dom-events

我正在使用一个第三方 JavaScript 库，它具有一定的长期运行功能（它涉及通过网络调用 Web 服务等）。为简单起见，假设它有一个参数，一个在长时间运行的操作完成时调用的回调函数，假设我们有签名`longRunningFunction(callback)`。

不幸的是，该函数不接受“上下文”参数，所以如果我`longRunningFunction`多次调用，当我的回调被调用时，我无法知道哪个调用导致了哪个回调。

我通过使用匿名函数找到了以下解决此问题的方法：定义一个`mycallback(context)`函数，然后每次调用长时间运行的操作时都执行以下操作：

```
uniqueContext = getUniqueContextFromSomewhere();
longRunningFunction(function() {mycallback(uniqueContext)}); 
```

这*似乎*可行，但我的问题是，鉴于长时间运行的操作可能在不同的线程上执行，是否*保证*在所有可能的情况下都可以根据 JavaScript 规范工作，对 longRunningFunction 的各种调用的回调可能以任何顺序出现，等等。那么，我发现的解决方案是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:31:38.763

您可以使用提供另一个上下文`Function.prototype.bind(thisArg [, arg1 [, arg2, …]])`。`bind`返回一个新方法，在调用该方法时，其`this`关键字设置为`thisArg`. 在你的情况下：

```
longRunningFunction(mycallback.bind(uniqueContext)); 
```

这在较旧的浏览器中不起作用（例如 IE 小于 9），但您可以使用 polyfill 或像[Underscore.js](http://underscorejs.org/#bind)这样的库。要了解有关`bind`我推荐以下资源的更多信息：

*   [Mozilla 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)
*   [摆脱 JavaScript 中的绑定情况](http://alistapart.com/article/getoutbindingsituations)
*   [JS101：调用、应用和绑定](http://dailyjs.com/2012/06/25/this-binding/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T02:22:31.420

假设这段代码：

```
function longRunningFunction( fn ) {
    window.setTimeout( fn, 1000 ); // just to make it async
}

function myCallback( context ) {
    /* ... */
} 
```

现在，如果你有这个：

```
var uniqueContext = getUniqueContext( );
longRunningFunction( function ( ) { myCallback( uniqueContext ); } ); 
```

标准规定`context`参数 of`myCallback`将`uniqueContext` *在触发回调的那一刻*。当您在循环中尝试这样的事情时，它可能会导致一些问题（因为您将`uniqueContext`在每次迭代时擦除）。

如果你这样做：

```
var uniqueContext1 = getUniqueContext1( );
longRunningFunction( function ( ) { myCallback( uniqueContext1 ); } );

var uniqueContext2 = getUniqueContext2( );
longRunningFunction( function ( ) { myCallback( uniqueContext2 ); } ); 
```

回调 using保证在第一个结束`uniqueContext1`时调用，而在第二个结束时调用 using （具有与以前相同的限制；如果您覆盖或在您的范围内的某处，回调参数也会改变）。`longRunningFunction``uniqueContext2``longRunningFunction``uniqueContext1``uniqueContext2`

使用 bind 可以避免创建闭包（以及前面提到的默认值）。下面的代码与前面的代码类似，除了你永远无法通过覆盖前面的代码来意外更改参数的值：

```
longRunningFunction( mycallback.bind( null, getUniqueContext1( ) ) );
longRunningFunction( mycallback.bind( null, getUniqueContext2( ) ) ); 
```

`mycallback.bind( null, someParameter )`将返回一个函数，该函数在调用时将`mycallback`使用`null`as `this`（将回退到`window`像任何常规函数一样）和`someParameter`作为第一个参数调用。

另一个答案是只使用第一个参数，`bind`因为它们使用`this`变量，但这不是必需的，您可以安全地使用函数参数。

# windows - 如何在代码中使用 windows 大页面？

> ID：14568200
> 
> 赞同：2
> 
> 时间：2013-01-28T17:58:56.853
> 
> 标签：windows, 64-bit, huge-pages

如果我们启用大页面，操作系统会为我利用它，还是我必须更改我们的代码？例如，我可以期望 HeapAlloc 在后台使用大页面吗？

我应该补充一点，我们使用的是 64 位 Windows Server 2008。

# css - 简化具有相同父级的 css 选择器

> ID：14568203
> 
> 赞同：2
> 
> 时间：2013-01-28T17:58:59.723
> 
> 标签：css, css-selectors

```
.content p, .content ul, .content h1 {
       text-indent: 35px;
} 
```

此选择器是否有任何快捷方式，例如`.content p, ul, h1 {}`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:00:29.393

使用普通 CSS，您别无选择。

[使用SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)之类的 CSS 编译器，您可以编写如下内容：

```
.content {
    .p, ul, h1 {
        text-indent: 35px;
    }
} 
```

我现在强烈推荐使用[Compass](http://compass-style.org/)，它让编写 CSS 变得更加有趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T18:07:35.553

[在选择器级别 4](http://dev.w3.org/csswg/selectors4/#matches)（又名 CSS 4）中有一个`:matches()`功能性伪类：

```
.content :matches(p, ul, h1) {
  text-indent: 25px;
} 
```

但是，目前还没有任何浏览器支持它。但是有`:-webkit-any()`和`:-moz-any()`分别为 Chrome 和 Firefox 带来了相同的功能。

# c++ - 匹配的旋律

> ID：14568204
> 
> 赞同：-2
> 
> 时间：2013-01-28T17:59:09.573
> 
> 标签：c++, .net, audio, comparison

我试图找出一种方法来比较两种旋律，看看它们有多相似。音色无所谓。因此，如果我有两张录音，一张是长笛演奏生日快乐，另一张是小号以相同的音高和节奏演奏相同的东西，它应该认为它们是匹配的。

是否有可以做到这一点的 .NET 或 C++ 库？如果没有，有人可以告诉我我需要什么技术来做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:00:52.847

[Aubio](http://aubio.org/)有一个 C++ 接口和几种执行音高检测的方法。

由于您确保音高和速度相同，并且您似乎排除了和声，因此您可以随时间测量音高并比较两个结果。

您的比较算法将需要反复试验改进。记住：

*   噪音、音色和音量波动随时可能使音高成为主观话题
*   现实世界的表演者可以有*相似*的音高和节奏，但他们不太可能完全一样。
*   两首歌曲可能不会在录音的同一时刻开始。

# node.js - 尝试在 Node.js 中重新连接 TCP 连接后，为什么会收到 ECONNREFUSED 错误？

> ID：14568207
> 
> 赞同：1
> 
> 时间：2013-01-28T17:59:23.827
> 
> 标签：node.js, sockets

我正在尝试使用以下命令在 Node.js 中打开与另一个程序的 TCP 连接：

```
connection = net.connect(18003, function() {
});

connection.on('close', function() {
  console.log('Connection closed');
});
connection.on('error', function() {
  console.log('Connection error');

  setTimeout(function () {
    connection = net.connect(18003, ipAddress,
      function() {
    });
  }, 10000); //Try to reconnect
}); 
```

如果其他程序未运行（因此未侦听），则第一次正确处理连接错误，但如果我在超时后再次尝试连接（不成功），则会收到以下错误：

```
events.js:68
  throw arguments[1]; // Unhandled 'error' event

Error: connect ECONNREFUSED 
```

有谁现在为什么第一次正确处理了不成功的连接但第二次没有正确处理？我想在等待其他程序启动的同时继续尝试连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:12:33.043

您必须在每次重试时绑定到[`'error'`事件](http://nodejs.org/api/net.html#net_event_error_1)，因为每次调用都[`net.connect()`](http://nodejs.org/api/net.html#net_net_connect_port_host_connectlistener)返回一个[`net.Socket`](http://nodejs.org/api/net.html#net_class_net_socket)带有自己的事件绑定的新事件：

```
// ...
  setTimeout(function () {
    connection = net.connect(18003, ipAddress,
      function() {
    });

    connection.on('error', function () {
      console.log('Connection retry error');
    });
  }, 10000); //Try to reconnect
// ... 
```

为了不断重试，将“设置”包装在一个可以根据需要调用的函数中：

```
function setupConnection() {
  connection = net.connect(18003, ipAddress, function () {
  });

  connection.on('close', function() {
    console.log('Connection closed');
  });

  connection.on('error', function() {
    console.log('Connection error');

    setTimeout(setupConnection, 10000); //Try to reconnect
  });
}

setupConnection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T15:25:56.550

@Jonathan Lonowski，当我使用你的代码时，我注意到在服务器重启时它会打开多个连接。'error' 事件发生在套接字关闭之前。将递归调用移动到套接字关闭事件可以正常工作。

```
function setupConnection() {
  connection = net.connect(18003, ipAddress, function () {
  });
  connection.on('close', function() {
    console.log('Connection closed');
    setTimeout(setupConnection, 10000); //Try to reconnect EDITED
  });

  connection.on('error', function() {
    console.log('Connection error');
  });
}
setupConnection(); 
```

# web-services - IIS7 中的 Webservice .Net 4.0 发布问题

> ID：14568210
> 
> 赞同：0
> 
> 时间：2013-01-28T17:59:32.410
> 
> 标签：web-services, c#-4.0, .net-4.0, iis-7.5, asmx

我无法发布我的 Web 服务，应该很简单：

1.  我在 IIS 中创建应用程序，
2.  将其放置为 4.0 Classic .Net
3.  我从 VS2012 中的 .Net 解决方案发布它右键单击并在 Webservice 项目上发布。

文件已放置，它应在指定服务器的 URL 上的浏览​​器上自行显示。

但是我偶然发现了以下问题：

```
HTTP Error 404.17 - Not Found 
The requested content appears to be script and will not be served by the static file handler. 
```

所以我一直在寻找它并找到了这两个选项：

**选项1：**

[http://www.banmanpro.com/support2/Requested_Content_Appears_to_be_Script.asp](http://www.banmanpro.com/support2/Requested_Content_Appears_to_be_Script.asp)

这个说我应该去集成，而不是经典应用程序池。但这就像我将一个问题换成另一个问题，因为现在它说：

```
HTTP Error 500.21 - Internal Server Error
Handler "WebServiceHandlerFactory-Integrated" has a bad module "ManagedPipelineHandler" in its module list 
```

当我转到网络配置时，看看这个错误是什么意思，我看不到**处理程序标签！**

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <appSettings />
  <connectionStrings />
  <system.web>
    <compilation targetFramework="4.0" />
    <!--
      The <authentication> section enables configuration 
      of the security authentication mode used by 
      ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows" />
    <!--
       The <customErrors> section enables configuration 
       of what to do if/when an unhandled error occurs 
       during the execution of a request. Specifically, 
       it enables developers to configure html error pages 
       to be displayed in place of a error stack trace.

       <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
         <error statusCode="403" redirect="NoAccess.htm"/>
         <error statusCode="404" redirect="FileNotFound.htm"/>
       </customErrors>
    -->
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" />
  </system.web>
    <system.webServer>
        <directoryBrowse enabled="true" />
    </system.webServer>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
</configuration> 
```

我应该加一个吗？如果是这样，怎么做？

**选项 2：**

[IIS7.5 上的静态文件处理程序不提供脚本](https://stackoverflow.com/q/3762287/684646)

基本上它说我应该做一个**aspnet_regiis -i**，但是当我尝试

去*%windir%\Microsoft.NET\Framework\v4.0.30319*

即使文件夹存在，**也没有aspnet_regiis！！**

我只在 2.0 Fwk 上找到了*aspnet_regiis =(*

这正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:12:28.240

处理程序标签不是答案，但是，这两个选项都促使我寻找 fwk 4 丢失的 aspnet_regiis。

没有 aspnet_regiis 因为**完整的 fwk 4.0 实际上并没有安装**在第一位。

我在服务器上安装了*Framework 4 Client Profile*和调试器，它不是完整版本。从现在开始，每当我*认为*我安装了 fwk 4 时，我都会检查两次。

安装后，在 Framework 4.0 *Classic* Pipeline Mode（而不是*Integrated*）上让它工作得很好。

## 但是注意！

**安装框架后，IIS 会将默认管道更改为 4.0**，这意味着，如果您在 2.0 上运行 Web（站点/服务），它将自动停止工作。（发生在我身上）

# ruby-on-rails - 在rails中我如何委托给一个类方法

> ID：14568211
> 
> 赞同：34
> 
> 时间：2013-01-28T17:59:36.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
class Task < ActiveRecord::Base
  attr_accessible :due_date, :text

  def self.this_week
    where(:due_date => Date.today.beginning_of_week..Date.today.end_of_week)
  end
end

class Important < ActiveRecord::Base
  attr_accessible :email

  has_one :task, :as => :taskable, :dependent => :destroy

  delegate this_week, :to => :task
end 
```

到目前为止，当我尝试`Important.this_week`. 我收到一条错误消息，说没有`this_week`为类定义方法...

有任何想法吗？我什至可以委托给这样的类方法吗？我可能有一两个`Task`以这种方式扩展的类，所以我很好奇它是如何以一种不会将一堆代码复制到每个实现类的方式工作的。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-28T18:09:35.583

您正在选择[ActiveSupport 委托核心扩展](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/module/delegation.rb)。帮助器为当前类`delegate`定义了一个*实例*方法，以便它的实例将调用委托给*该实例*上的某个变量。

如果要在类级别进行委托，则需要打开单例类并在那里设置委托：

```
class Important < ActiveRecord::Base
  attr_accessible :email

  has_one :task, :as => :taskable, :dependent => :destroy

  class << self
    delegate :this_week, :to => :task
  end
end 
```

但这假设这`Important.task`是对类的引用`Task`（它不是）

而不是依赖委托助手，这只会让你的生活变得困难，我建议在这里显式代理：

```
class Important < ActiveRecord::Base
  attr_accessible :email

  has_one :task, :as => :taskable, :dependent => :destroy

  class << self
    def this_week(*args, &block)
      Task.this_week(*args, &block)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-05-06T09:38:44.470

将方法委托给类方法，考虑继承：

```
delegate :this_week, :to => :class 
```

您可以像这样委托给特定的班级（另请参阅 Isaac Betesh 的回答）：

```
delegate :this_week, :to => :Task 
```

文档可在此处获得： http: [//api.rubyonrails.org/classes/Module.html#method-i-delegate](http://api.rubyonrails.org/classes/Module.html#method-i-delegate)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-10T19:35:53.537

您可以将一个方法委托给一个常量——它只是区分大小写。此外，方法的名称必须`delegate`作为符号传递给。

```
class Important < ActiveRecord::Base
  delegate :this_week, :to => :Task
  # Note ':this_week' instead of 'this_week'
  # Note 'Task' instead of 'task'
end 
```

# intuit-partner-platform - QBO 支付查询返回“未授权”

> ID：14568212
> 
> 赞同：1
> 
> 时间：2013-01-28T17:59:35.950
> 
> 标签：intuit-partner-platform, quickbooks-online

当我按 LastUpdatedTime 执行搜索时，我得到“401 Unauthorized Error”。按 CustomerId 查询工作正常

这是我的代码：

```
var pq = new PaymentQuery()
{
    LastUpdatedTime = new DateTime(2012,12,21),
};

pq.SpecifyOperatorOption(Intuit.Ipp.Data.Qbo.FilterProperty.LastUpdatedTime, FilterOperatorType.AFTER);
var list = pq.ExecuteQuery<Payment>(commonService.ServiceContext); 
```

应用程序在 ExecuteQuery 中抛出 Intuit.Ipp.E​​xception.InvalidTokenException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:42:53.483

SDK 未正确编码日期时间，因此您需要使用 DevDefined 并使用 SDK 反序列化响应。代码示例： [https ://gist.github.com/IntuitDeveloperRelations/6024616](https://gist.github.com/IntuitDeveloperRelations/6024616)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:08:04.260

完整的错误是什么样的？您是否可以使用您拥有的令牌集和领域 ID 与该公司进行其他通话？

# jquery - 使用早午餐打包时 jquery.fileupload 无法正常工作

> ID：14568213
> 
> 赞同：0
> 
> 时间：2013-01-28T17:59:37.560
> 
> 标签：jquery, file-upload, ember.js, blueimp, brunch

我意识到这是一个有点模糊的问题。

我正在使用 Brunch 来打包我的 Ember 应用程序。我在该应用程序中使用了 blueimp 的 jquery.fileupload ui 小部件。

当与 brunch 打包时，fileupload 小部件确实会初始化，但是，当我添加一个文件时，它不会在模板中呈现，并且上传会自动开始，这告诉我在初始化中有些东西搞砸了。

我在早午餐配置中正确设置了依赖项的加载顺序。

我通过不将 jquery.fileupload 编译到 vendor.js 中来测试这一点，而只是通过`<script>`标头中的常规标签包含它并且它可以正常工作，所以我相信我忽略了配置中的某些内容，可能是加载顺序。

有没有人有使用早午餐将 blueimp 的 jquery.fileupload 打包到应用程序中的经验？

编辑：这是配置：

javascripts: defaultExtension: 'js', joinTo: 'javascripts/exchange_app.js': /^app/ 'javascripts/exchange_vendor.js': /^vendor/

```
 order: 
    before: [          
      'vendor/scripts/jquery-1.8.2.js',
      'vendor/scripts/jquery-ui-1.9pre.js',
      'vendor/scripts/jquery.fileupload.js',
      'vendor/scripts/jquery.fileupload-fp.js',
      'vendor/scripts/jquery.fileupload-ui.js',
      'vendor/scripts/tmpl.min',
      'vendor/scripts/handlebars-1.0.rc.1.js',
      'vendor/scripts/ember-latest.js',
      'vendor/scripts/ember-data-latest.js',
      'vendor/scripts/jquery.cookie.js',
      'vendor/scripts/jquery.dotdotdot-1.5.1.min.js'
      'vendor/scripts/jquery.ez-pinned-footer.js',
      'vendor/scripts/jquery.fileDownload.js'
      ] 
```

# android - 片段内的 ListView 无法滚动

> ID：14568215
> 
> 赞同：0
> 
> 时间：2013-01-28T17:59:41.973
> 
> 标签：android, android-fragments

我有以下布局：![在此处输入图像描述](../Images/6f56a73d65b466a59fde1f069c885d74.png) 黄色背景是列表项，存储在片段中。

这是我 mainActivity 的代码：

```
<fragment android:layout_width="140dp" 
          android:layout_height="100dp" 
          android:layout_below="@+id/block" 
          class="fragments.Demo"/> 
```

片段代码：

```
public class Demo extends ListFragment{

 @Override
 public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
            "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
            "Linux", "OS/2" };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this.getActivity().getApplicationContext(), R.layout.list_item_bank, R.id.list_item_bank_name, values);
    setListAdapter(adapter);
}
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.transaction_list_fragment, null);
}
} 
```

R.layout.list_item_bank：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:background="#ffee00"
         android:orientation="horizontal">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

        <TextView android:id="@+id/list_item_bank_name"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_gravity="center_vertical"
                 android:layout_marginLeft="10dp"
                 android:text=""
                 android:textColor="@color/abs__primary_text_holo_light"
                 android:textSize="18sp">
        </TextView>
</LinearLayout> 
```

问题是：我无法从主要活动滚动列表视图。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:03:22.070

哎呀！在我看来，我发现了问题。我的 ListFragment 在 ScrollView 内。如果我用 LinearLayout 替换 scrollView 一切正常！

# powershell - Powershell - 仅打印引号之间的文本？

> ID：14568218
> 
> 赞同：4
> 
> 时间：2013-01-28T18:00:05.123
> 
> 标签：powershell

我怎样才能让以下文本的输出只显示引号中的文本（不带引号）？

示例文本”

```
this is an "apple". it is red
this is an "orange". it is orange
this is an "blood orange". it is reddish 
```

变成：

```
apple
orange
blood orange 
```

理想情况下，如果可能的话，我想在一个班轮中完成。我认为这是带有 -match 的正则表达式，但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:34:50.053

这是一种方法

```
$text='this is an "apple". it is red
this is an "orange". it is orange
this is an "blood orange". it is reddish'

$text.split("`n")|%{
$_.split('"')[1]
} 
```

这是成功的解决方案

```
$text='this is an "apple". it is red
this is an "orange". it is orange
this is an "blood orange". it is reddish'

$text|%{$_.split('"')[1]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T19:25:48.087

使用正则表达式的另一种方式：

```
appcmd list apppool | % { [regex]::match( $_ , '(?<=")(.+)(?=")' ) } | select -expa value 
```

或者

```
 appcmd list apppool | % { ([regex]::match( $_ , '(?<=")(.+)(?=")' )).value } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-09T19:21:05.737

基于 .NET 方法的简洁解决方案[`[regex]::Matches()`](https://docs.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regex.matches)，使用 PSv3+ 语法：

```
$str = @'
this is an "apple". it is red
this is an "orange". it is orange
this is an "blood orange". it is reddish
'@

[regex]::Matches($str, '".*?"').Value -replace '"' 
```

正则表达式`".*?"`匹配`"..."`- 封闭的标记并`.Matches()`返回所有它们；`.Value`提取它们，并`-replace '"'`剥离`"`字符。

这意味着上面甚至可以在每行使用*多个* `"..."`标记（尽管请注意，使用*嵌入的转义* `"`字符提取标记。（例如，`\"`）将不起作用）。

* * *

*仅在以下情况下才*可以使用`-match`运算符（仅查找（*一个*）匹配项）：

 **   你把输入分成几*行*
*   并且每行*最多包含 1 个* `"..."`标记（对于问题中的示例输入来说是正确的）。

这是一个 PSv4+ 解决方案：

```
# Split string into lines, then use -match to find the first "..." token
($str -split "`r?`n").ForEach({ if ($_ -match '"(.*?)"') { $Matches[1] } }) 
```

自动变量`$Matches`包含先前`-match`操作的结果（如果 LHS 是*标量*），索引`[1]`包含第一个（也是唯一的）捕获组 ( `(...)`) 匹配的内容。

* * *

如果`-match`有一个名为 的变体会很方便`-matchall`，这样人们就可以这样写：

```
# WISHFUL THINKING (as of PowerShell Core 6.2)
$str -matchall '".*?"' -replace '"' 
```

请参阅GitHub 上的[此功能建议。](https://github.com/PowerShell/PowerShell/issues/7867)*

# google-oauth - Google OAuth2 授权限制

> ID：14568222
> 
> 赞同：3
> 
> 时间：2013-01-28T18:00:22.590
> 
> 标签：google-oauth

从 1 个 Google 帐户到 1 个 client_id 是否有最大数量的 oauth2 授权？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:11:55.073

Yes, but new grants are only added on explicit user consent options. Auto-approved events don't increase the number of grants, so there is no limit on the outstanding number of tokens.

The maximum number of grants per client_id/user is 25 at this time, and we're working to raise it.

# java - 在 Java 中插入和读取字符串数组

> ID：14568223
> 
> 赞同：2
> 
> 时间：2013-01-28T18:00:26.340
> 
> 标签：java, database, serialization, prepared-statement

我正在使用准备好的语句将数组插入到我的数据库中

```
PreparedStatement pstmt = conn.prepareStatement("INSERT INTO TABLE(stringArray) VALUES (?)");
String[] arr = { "a", " b", "c" };
pstmt.setObject(1, arr); 
```

我按照示例使用 setObject ，但 setArray 无法解析，并且 setBlob 也不起作用。

现在，当我阅读它时，我不确定如何处理我的对象以获取数组值！

```
PreparedStatement pstmt = conn.prepareStatement("SELECT stringArray FROM TABLE WHERE id = 1");
ResultSet rs = pstmt.executeQuery();
rs.next();
Object object = rs.getObject(1);
System.out.println(object.toString()); 
```

只是输出

```
[B@45d0e784 
```

我知道我正在做 object.toString 并且我想要一个数组，但我该怎么做呢？插入时是否需要将其设置为字节或其他内容？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:09:37.423

`PreparedStatement#setArray`方法`java.sql.Array`作为参数。尝试 -

```
PreparedStatement pstmt = conn.prepareStatement("INSERT INTO TABLE(stringArray) VALUES (?)");
String[] arr = { "a", " b", "c" };
Array a = conn.createArrayOf("marksArray", arr);
pstmt.setArray(1, arr); 
```

注意 -

> JDBC 驱动程序负责将元素 Object 数组映射到在 java.sql.Types 中为给定的 Object 类定义的默认 JDBC SQL 类型。默认映射在 JDBC 规范的附录 B 中指定。如果生成的 JDBC 类型不是给定 typeName 的适当类型，则由实现定义是否抛出 SQLException 或驱动程序支持生成的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:49:32.490

我无法让 setArray 函数工作，每次都会出错。因此，我决定实现自己的序列化。

我使用 for 循环创建了一个字符串，其中包含我用逗号分隔的字符串。然后，当我从数据库中检索该行时，我用逗号分隔，我的数组被重新形成。

我猜在准备好的语句中使用的序列化对于用户定义的对象更有用，但对于我的字符串数组来说，这不值得费心。

# mongodb - 使用 ReactiveMongo 存储外部库的对象

> ID：14568228
> 
> 赞同：0
> 
> 时间：2013-01-28T18:00:47.370
> 
> 标签：mongodb, scala, playframework-2.0, bson

我正在尝试使用 MongoDB 和 ReactiveMongo 编写一个 play2.1 应用程序。我的一个模型有一个外部库的成员（特别是 SecureSocial 用户 ID 和密码信息，但通常是）。我的问题是 - 我将它们存储在什么 BSON 类型下？

```
case class User{
    firstName: String, 
    lastName: String,
    authMethod: AuthenticationMethod,
    avatarUrl: Option[String] = None, 
    oAuth1Info: Option[OAuth1Info] = None,
    oAuth2Info: Option[OAuth2Info] = None,
}

  implicit object UserBSONReader extends BSONReader[User] {
    def fromBSON(document: BSONDocument) :Role = {
      val doc = document.toTraversable
      User(
        doc.getAs[BSONObjectID]("_id"),
        doc.getAs[BSONString]("email").get.value,
        doc.getAs[**?????????**]("passwordInfo").get.value,
        doc.getAs[BSONString]("firstName").get.value,
        doc.getAs[BSONString]("lastName").get.value,
        doc.getAs[**?????????**]("authMethod").get.value, 
```

...

# java - Kendo UI 网格自定义数据源 URL

> ID：14568234
> 
> 赞同：0
> 
> 时间：2013-01-28T18:01:30.160
> 
> 标签：java, javascript, jsp, kendo-ui

我有一个名为 clientCCBox 的组合框，我需要一个 javascript 来检索选定的选项值，这将是客户端 ID，然后将其传递给剑道网格数据源读取属性，如下所示：

```
<kendo:dataSource-transport-read url="/read.html?*clientID*"/> 
```

我一直在尝试使用这个 js 片段来恢复选定的值；文档写入在那里可以直观地查看它是否实际检索到该值，但它什么也不显示。一旦我获得了 clientID，我将如何在 HTML 中使用它？

```
<script> 
    function onSelect(e){
        var clientId = clientCCBox.value();   
        document.write(clienteId);
    }
</script> 
```

如果我确实设法在查询字符串上传递 clientID，控制器上的以下代码将返回一个列表并填充网格对吗？

```
@RequestMapping(value = "/read.html*")
public @ResponseBody List<Workers> read(HttpServletRequest request) {
    return workerDAO.listWorker(Integer.parseInt(request.getQueryString()));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:12:33.150

您可以使用标签中的`parameterMap`属性定义附加参数。`kendo:dataSource-transport`

例子：

```
<kendo:dataSource-transport parameterMap="additionalParameters">
    <kendo:dataSource-transport-read url="/ListBeer" type="GET" contentType="application/json"/>
</kendo:dataSource-transport> 
```

在哪里`additionalParameters`：

```
<script type="text/javascript">
    var theId = "xyz";

    function additionalParameters(data, type) {
        if (type === "read") {
            return "id=" + theId;
        }
        return data;
    }
</script> 
```

在这里，我将从以下 url 加载数据，`/ListBeer?id=xyz`其中.`xyz``theId`

您还可以发送多个参数：

```
function additionalParameters(data, type) {
    if (type === "read") {
        return "id=" + data + "&param=" + JSON.stringify(data);
    }
    return "param= "+ JSON.stringify(data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:02:52.560

使用下拉列表的读取操作参数上的“数据”事件为下拉列表指定动态 javascript 参数。请注意 .Read 方法的确切语法。您经常看到语法 .Read("ActionName", "ControllerName") 但我们想要其他重载版本的 .Read：

```
.DataSource(data => data.Read(read => read.Action("GetDropDownValues", "Quote").Data("getCriteria")))

function getCriteria() {
    return {
        id: "put value here",
        anotherParameter: 55
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:17:02.733

您需要将客户端 ID 放在传输的数据字段中。

看看下面的链接。

[http://docs.kendoui.c​​om/api/framework/datasource#transportcreatedata-objectstringfunction](http://docs.kendoui.com/api/framework/datasource#transportcreatedata-objectstringfunction)

这是 jquery 的一部分而不是剑道 ui

# wordpress - Wordpress，使用响应式图像创建帖子

> ID：14568236
> 
> 赞同：0
> 
> 时间：2013-01-28T18:01:37.627
> 
> 标签：wordpress, post, responsive-design

我想建立一个新的 Wordpress 响应式网站，其中包含适用于智能手机、平板电脑和计算机的响应式图像。

我已经构建了一个 javascript 函数（工作），可以根据设备的宽度加载正确的图像。

这是我的 html 布局，用于加载具有 4 种不同尺寸的相同图像：

```
<div pictures-content alt="alt data">
        <div src="<?php bloginfo('template_directory'); ?>/images/small.jpg">
        <div src="<?php bloginfo('template_directory'); ?>/images/medium.jpg" data-media="(min-width: 400px)"></div>
        <div src="<?php bloginfo('template_directory'); ?>/images/large.jpg" data-media="(min-width: 950px)"></div>
        <div src="<?php bloginfo('template_directory'); ?>/images/extralarge.jpg" data-media="(min-width: 1200px)"></div>
</div> 
```

这是我的问题：当我必须在 Wordpress 中添加图片时，我将不得不推送 4 张图片。

我想知道是否有一种方便的方法可以通过使用 Wordpress 视觉选项直接添加代码来添加后 4 张图片？

使用 WP 图库是一个不错的选择吗？我必须下载插件并设置自定义字段吗？我是否必须编写一个 Js 函数，根据帖子上唯一的图片自动构建和添加 html 布局？

我正在采取任何其他解决方案，谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:14:47.167

不是一个完整的答案，但足以让你开始。

*   您需要正确的图像尺寸，请参阅[add_image_size](http://codex.wordpress.org/add_image_size)
*   将图像添加到编辑器中时，您可以使用过滤器来设置正确的 HTML[`image_send_to_editor`](http://adambrown.info/p/wp_hooks/hook/image_send_to_editor?version=3.4&file=wp-admin/includes/media.php)

这可以给你这样的东西：

```
<?php
function responsive_image($html, $id, $caption, $title, $align, $url, $size, $alt)
{
    $html = '<div pictures-content alt="' . $alt . '" title="' . $title . '">
        <div src="' . wp_get_attachment_image_src($id, 'thumbnail') . '">
        <div src="' . wp_get_attachment_image_src($id, 'medium') . '" data-media="(min-width: 400px)"></div>
        <div src="' . wp_get_attachment_image_src($id, 'large') . '" data-media="(min-width: 950px)"></div>
        <div src="" data-media="(min-width: 1200px)"></div>
        </div>';
}
add_filter('image_send_to_editor', 'responsive_image', 10, 8); 
```

调整图像尺寸测试它，如果你卡住了，请告诉我。

# javascript - JavaScript：instanceof 运算符

> ID：14568239
> 
> 赞同：1
> 
> 时间：2013-01-28T18:01:49.657
> 
> 标签：javascript, prototype

第一个代码：

```
function MyConstructor() {}
var myobject = new MyConstructor();
MyConstructor.prototype = {};

[ myobject instanceof MyConstructor,   // false - why?
myobject.constructor == MyConstructor, // true
myobject instanceof Object ]           // true 
```

即使`MyConstructor.prototype`被替换`myobject`仍然从`Myconstructor.prototype`. 那么为什么是`myobject instanceOf Myconstuctor`假的呢？

```
function MyConstructor() {}
MyConstructor.prototype = {};
var myobject = new MyConstructor();
myobject instanceof MyConstructor  // true (it is because myobject still inherits from
                                   // Myconstructor.prototype although it has been replaced) 
```

第二：

```
 function MyConstructor() {}
 MyConstructor.prototype = {};
 var myobject = new MyConstructor();

 myobject.constructor == MyConstructor;  // false (accepted ) 
```

因此，如果 myobject.constructor 是 Object 为什么第一个：示例没有指向它，那么`myobject.constructor`仍然指向它，`MyConstructor`因为`Myconstructor.prototype`在第一个示例中发生了变化。

你能澄清一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:09:23.993

> 即使 MyConstructor.prototype 被替换，myobject 仍然从 Myconstructor.prototype 继承属性。

不，它继承自被替换的旧对象。并且由于该对象是`!== MyConstructor.prototype`，因此[`instanceof`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)将产生错误。在您的第二个示例中，`myobject`继承自新原型（当前`MyConstructor.prototype`），这就是`instanceof`告诉您的。

> 所以如果 myobject.constructor

该`constructor`属性与 完全无关`instanceof`。

```
function Constructor() {}
var oldProto = Constructor.prototype;
var oldInstance = new Constructor();

Constructor.prototype = {constructor:"something else"};
var newProto = Constructor.prototype;
var newInstance = new Constructor();

// all these are true:
Object.getPrototypeOf(oldInstance) === oldProto;
Object.getPrototypeOf(newInstance) == newProto;
oldProto !== newProto;
oldProto.constructor === Constructor; // was set implicitly on creating the function
oldInstance.constructor === oldProto.constructor; // inherited
newProto.constructor === "something else"; // if not explicitly set, comes from Object.prototype
newInstance.constructor === newProto.constructor; // inherited

Constructor.prototype === newProto;
newInstance instanceof Constructor; // because the above

Constructor.prototype !== oldProto;
! (oldInstance instanceof Constructor) // because the above 
```

# c++ - C++ 将字符串替换为 char[]

> ID：14568241
> 
> 赞同：-2
> 
> 时间：2013-01-28T18:02:03.327
> 
> 标签：c++, algorithm, multiplication

我有以下多个 2 个大数的 c++ 程序：

```
#include <iostream>
#include <string>    
#define OVERFLOW 2
#define ROW b_len
#define COL a_len+b_len+OVERFLOW

using namespace std;

int getCarry(int num) {
    int carry = 0;
    if(num>=10) {
        while(num!=0) {
            carry = num %10;
            num = num/10;
        }
    }
    else carry = 0;
    return carry;
}

int num(char a) {
    return int(a)-48;
}

string mult(string a, string b) {
        string ret;
        int a_len = a.length();
        int b_len = b.length();
        int mat[ROW][COL];
        for(int i =0; i<ROW; ++i) {
            for(int j=0; j<COL; ++j) {
                mat[i][j] = 0;

            }
        }

        int carry=0, n,x=a_len-1,y=b_len-1;
        for(int i=0; i<ROW; ++i) {
            x=a_len-1;
            carry = 0;
            for(int j=(COL-1)-i; j>=0; --j) {
                if((x>=0)&&(y>=0))  {
                    n = (num(a[x])*num(b[y]))+carry;
                    mat[i][j] = n%10;
                    carry = getCarry(n);
                }
                else if((x>=-1)&&(y>=-1)) mat[i][j] = carry;
                x=x-1;
            }
            y=y-1;
        }

        carry = 0;
        int sum_arr[COL];
        for(int i =0; i<COL; ++i) sum_arr[i] = 0;
        for(int i=0; i<ROW; ++i) {
            for(int j=COL-1; j>=0; --j) {
                sum_arr[j] += (mat[i][j]);
            }
        }
        int temp;
        for(int i=COL-1; i>=0; --i) {
            sum_arr[i] += carry;
            temp = sum_arr[i];
            sum_arr[i] = sum_arr[i]%10;
            carry = getCarry(temp);
        }

        for(int i=0; i<COL; ++i) {
            ret.push_back(char(sum_arr[i]+48));
        }

        while(ret[0]=='0'){
            ret = ret.substr(1,ret.length()-1);
        }
        return ret;
}

void printhuge(string a) {
    cout<<"\n";
    for(string::iterator i = a.begin(); i!=a.end(); ++i) {
        cout<<*i;
    }
}

int main() {
    string a,b;
    cin>>a>>b;
    printhuge(mult(a,b));
    return 0;
} 
```

一切正常，但我需要使用 char[] 而不是 "string" 。我知道这很愚蠢，但我必须使用必要的格式。那么-如何将代码转换为使用 char[] 定义？

任何想法都非常感谢，谢谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:03:28.950

如果你不需要修改 C 字符串（char 数组），即它可以是`const char[]`or `const char *`，使用`c_str()`方法`std::string`：

```
const char *c_string = str.c_str(); 
```

**编辑：**所以你的问题是你根本不应该使用`std::string`。好吧，在这种情况下，这是用 C 字符串替换 C++ 字符串的方法：

*   C 字符串是`char`（或`const char`）的以 0 结尾的数组。通常，在某些条件下，它们会衰减为指针。
*   `strlen()`您可以使用 中的函数获取 C 字符串的长度`<string.h>`。
*   要将字符串相互附加，请使用`strcat()`or`strncat()`函数。***注意缓冲区大小和终止 NUL 字符的额外空间！***
*   等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:03:25.720

调用[`std::string::c_str()`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)你的字符串对象。

只要确保缓冲区没有被函数修改。

**编辑**

或者，如果您需要接受 a `char[]`，只需创建 a `string`。

# c++ - 查找 2 个 3D 点之间的距离

> ID：14568249
> 
> 赞同：1
> 
> 时间：2013-01-28T18:02:31.260
> 
> 标签：c++, 3d, distance, math.h, square-root

我遇到了一个问题，我的 X 平方总是变得无限，导致结果距离也是无限的，但是我看不出我自己的数学有什么问题：

```
// Claculate distance

xSqr = (x1 - x2) * (x1 - x2);
ySqr = (y1 - y2) * (y1 - y2);
zSqr = (z1 - z2) * (z1 - z2);

double mySqr = xSqr + ySqr + zSqr;

double myDistance = sqrt(mySqr); 
```

当我运行我的程序时，我会为每个坐标获取用户输入，然后在运行计算后显示距离。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T18:35:49.243

如果您的输入是 single-precision `float`，那么如果您强制执行双精度算术应该没问题：

```
xSqr = double(x1 - x2) * (x1 - x2);
//     ^^^^^^ 
```

如果输入已经是双精度的，并且您没有更大的浮点类型可用，那么您需要重新排列欧几里德距离计算以避免溢出：

```
r = sqrt(x^2 + y^2 + z^2)
  = abs(x) * sqrt(1 + (y/x)^2 + (z/x)^2) 
```

其中`x`是三个坐标距离中最大的一个。

在代码中，这可能类似于：

```
double d[] = {abs(x1-x2), abs(y1-y2), abs(z1-z2)};
if (d[0] < d[1]) swap(d[0],d[1]);
if (d[0] < d[2]) swap(d[0],d[2]);
double distance = d[0] * sqrt(1.0 + d[1]/d[0] + d[2]/d[0]); 
```

或者，使用`hypot`，它使用类似的技术来避免溢出：

```
double distance = hypot(hypot(x1-x2,y1-y2),z1-z2); 
```

尽管这在 2011 之前的 C++ 库中可能不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:20:46.167

试试这个：

```
long double myDistance=sqrt(pow(x1-x2,2.0)+pow(y1-y2,2.0)+pow(z1-z2,2.0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:37:57.320

我弄清楚发生了什么，我复制并粘贴了设置 x1、y1 和 z1 的代码，却忘记将其更改为 x2 y2 和 z2，这对我来说总是最愚蠢的事情：P 无论如何，谢谢你们的帮助

# ruby-on-rails - 基于rails中下拉框的id进行验证

> ID：14568250
> 
> 赞同：0
> 
> 时间：2013-01-28T18:02:41.570
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我在输入过程中进行了验证，如下所示：

```
validates :solids, :numericality => { :greater_than_or_equal_to => 0 }, :if => lambda { 
  if self.lab_method_id
    lab_method = LabMethod.find(self.lab_method_id)
    lab_method.solids?
  end
} 
```

我希望此条件根据下拉框的选定 ID 进行更改。

我在我的模型中试过这个：

```
if self.lab_method_id == 1
validates :solids, :numericality => { :greater_than_or_equal_to => 0 }, :if => lambda { 
  if self.lab_method_id
    lab_method = LabMethod.find(self.lab_method_id)
    lab_method.solids?
  end
}
elsif
validates :solids, :numericality => { :greater_than_or_equal_to => 5 }, :if => lambda { 
  if self.lab_method_id
    lab_method = LabMethod.find(self.lab_method_id)
    lab_method.solids?
  end
}
end 
```

但是，这在页面加载时返回了错误：

未定义的方法“键？” 对于零：NilClass

我认为这与模型中的验证在页面加载时加载这一事实有关，并且当时检查 id 的 if 语句不起作用。虽然这个错误对我来说不太有意义。

所以我想知道如何设置它以根据所选下拉框项目的 id 选择特定验证（我什至是否正确获取了 id）？

奖励：有人可以解释与这个特定错误的关系吗？

编辑 - 堆栈跟踪：

vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_controller/metal/hide_actions.rb:36:in `visible_action?' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_controller/metal/hide_actions.rb:18:in`method_for_action' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1 /lib/action_controller/metal/implicit_render.rb:14:in `method_for_action' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_controller/metal/compatibility.rb:61:in`method_for_action' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/abstract_controller/base.rb:115:in `process' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/abstract_controller/rendering.rb:45:in`process' vendor/bundle /ruby/1.9.1/gems/actionpack-3.2.1/lib/action_controller/metal.rb:203:in `dispatch' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_controller/metal/rack_delegation.rb:14:in`dispatch' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_controller/ metal.rb:246:in `block in action' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/routing/route_set.rb:66:in`call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/routing/route_set.rb:66:in `dispatch' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/routing/route_set.rb:30:in`call' vendor/bundle/ruby/1.9\. 1/gems/journey-1.0.4/lib/journey/router.rb:68:in`block in call' vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in`每个' vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/routing/route_set.rb:589:in`call' vendor/bundle/ruby/1.9.1/gems/warden-1.2.1 /lib/warden/manager.rb:35:in `block in call' vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in`catch' vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/best_standards_support.rb:17:in`call' vendor/bundle/ruby /1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call' vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in`call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/ head.rb:14:in `call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/params_parser.rb:21:in`call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/flash.rb:242:in `call' vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in`context' vendor/bundle/ruby/1.9。 1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/cookies.rb:338:in`call' vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/query_cache .rb:64:in`call' vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in`call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call' vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in`*run* _803795940_ *call* _68852270__callbacks' vendor/bundle/ruby/1.9.1/gems/ activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback' vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in`_run_call_callbacks' vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/callbacks.rb:27:in`call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/reloader.rb:65:in `call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/remote_ip.rb:31:in`call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1 /lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/show_exceptions.rb:56:in`call' vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/rack/logger.rb:26:in `call_app' vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/rack/logger.rb:16:in`call' 配置/initializers/quiet_assets.rb:6:in`call_with_quiet_assets' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/request_id.rb:22:in`调用'vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call' vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in`call' vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1 /lib/active_support/cache/strategy/local_cache.rb:72:in `call' vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in`call' vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/static.rb:53:in `call' vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/engine.rb:479:in`call ' vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/application.rb:220:in `call' vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in`call ' vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/ lib/rails/rack/log_tailer.rb:14:in `call' vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in`service' /usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service' /usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in`run' /usr/lib/ruby/1.9.1/webrick/ server.rb:191:in `block in start_thread'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:28:12.013

`NumericalityValidator`（此帮助程序的基础验证器）无法按照您的意愿处理动态条件。使用自定义验证器：

```
validate :solids_validation

def solids_validation
  if self.lab_method_id
    lab_method = LabMethod.find(self.lab_method_id)
    if lab_method.solids?
      if (val = Kernel.Float(solids) rescue nil)
        min = (self.lab_method_id == 1 ? 0 : 5)
        errors.add(:solids, "must be greater than or equal to #{min}") if val < min
      else
        errors.add(:solids, :not_a_number)
      end
    end
  end
end 
```

# iphone - AVFoundation 相机尺寸

> ID：14568251
> 
> 赞同：1
> 
> 时间：2013-01-28T18:02:45.853
> 
> 标签：iphone, objective-c, ios6, uiimageview, avfoundation

我正在尝试根据我的 UIImageView (selectedImage) 大小设置 AVFoundation 相机大小，如下所示：

```
 self.sess = [AVCaptureSession new];
    self.snapper = [AVCaptureStillImageOutput new];
    self.snapper.outputSettings = @{AVVideoCodecKey: AVVideoCodecJPEG};
    self.sess.sessionPreset = AVCaptureSessionPresetPhoto;
    [self.sess addOutput:self.snapper];
    AVCaptureDevice* cam = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    AVCaptureDeviceInput* input = [AVCaptureDeviceInput deviceInputWithDevice:cam error:nil];
    [self.sess addInput:input];
    AVCaptureVideoPreviewLayer* lay = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.sess];
    lay.videoGravity = AVLayerVideoGravityResizeAspectFill;
    lay.frame = selectedImage.frame;
   [self.view.layer addSublayer:lay]; 
```

在应用程序中，它显示得很好 - 320X320 大小，但是当我查看照片库时，保存的图像比正方形长。

我也尝试删除`lay.videoGravity = AVLayerVideoGravityResizeAspectFill;`，但应用程序中的图像没有填满屏幕。

如何将拍摄的图像大小设置为用户在相机中看到的没有多余的尾巴？

![在应用程序中捕获后的图像](../Images/0dbd119dff2e8d9779a6d01e06c225a1.png) ![图像如何保存在相册中](../Images/beda66f844cb88b58d36aeec727d3021.png) ![相机图像无纵横比填充](../Images/6d343c73d9e91afd852a1e436e47fd34.png)

这是将图像保存到图库的代码：

```
AVCaptureConnection *vc = [self.snapper connectionWithMediaType:AVMediaTypeVideo];
// deal with image when it arrives
typedef void(^MyBufBlock)(CMSampleBufferRef, NSError*);
MyBufBlock h = ^(CMSampleBufferRef buf, NSError *err) {
    NSData* data = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:buf];
    UIImage* im = [UIImage imageWithData:data];
    dispatch_async(dispatch_get_main_queue(), ^{
        selectedImage.hidden = NO;
        selectedImage.contentMode = UIViewContentModeScaleAspectFill;
        selectedImage.clipsToBounds = YES;
        selectedImage.image = im;
        [self.previewLayer removeFromSuperlayer];
        self.previewLayer = nil;
        [self.sess stopRunning];
        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
        [library writeImageToSavedPhotosAlbum:[selectedImage.image CGImage] orientation:(ALAssetOrientation)[selectedImage.image imageOrientation] completionBlock:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:51:51.513

我相信您需要自己裁剪图像；取景器尺寸的缩小只会影响其可见的形状，而不影响它要处理的数据量。

有关如何裁剪图像的示例，请参见：[如何正确裁剪在 iPhone 4G 上拍摄的图像（带有 EXIF 旋转数据）？](https://stackoverflow.com/questions/7203847/how-to-properly-crop-an-image-taken-on-iphone-4g-with-exif-rotation-data?lq=1)

# json - Couchbase - 将 json 反序列化为动态类型

> ID：14568254
> 
> 赞同：0
> 
> 时间：2013-01-28T18:02:57.823
> 
> 标签：json, deserialization, couchbase

我正在尝试将从 couchbase 返回的一些 JSON 反序列化为动态类型。该文档是这样的，因此为此创建一个 POCO 将是矫枉过正：

```
{
    UsersOnline: 1
} 
```

我认为这样的事情可以解决问题，但它似乎反序列化为一个动态对象，其值只是原始 JSON

```
var jsonObj = _client.GetJson<dynamic>(storageKey); 
```

结果是：

```
jsonObj { "online": 0 } 
```

无论如何，我可以让 couchbase 反序列化器为我生成动态类型吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:40:46.770

客户端的默认反序列化程序使用 .NET 的二进制序列化程序，因此当您保存或读取 JSON 字符串时，它只是一个字符串。GetJson 将始终只返回一个字符串。但是，有几个选项：

您可以将 JSON 记录转换为 Dictionary 实例：

```
var appJson = "{ \"UsersOnline\" : 1, \"NewestMember\" : \"zblock\" }";
var result = client.ExecuteStore(StoreMode.Set, "userCount", appJson);
var item = client.GetJson<Dictionary<string, object>>("userCount");
Console.WriteLine("There are {0} users online.  The newest member is {1}.",
                    item["UsersOnline"], item["NewestMember"]); 
```

或者您可以使用动态 ExpandoObject 实例：

```
var appJson = "{ \"UsersOnline\" : 1, \"NewestMember\" : \"zblock\" }";
var result = client.ExecuteStore(StoreMode.Set, "userCount", appJson);
dynamic item = client.GetJson<ExpandoObject>("userCount");
Console.WriteLine("There are {0} users online.  The newest member is {1}.",
                    item.UsersOnline, item.NewestMember); 
```

在任何一种情况下，您都会丢失静态类型检查，这对于您的目的来说似乎没问题。在这两种情况下，您都可以访问 JSON 属性，而无需将 JSON 解析为 POCO...

编辑：我写了一些可能有用的扩展方法，并在[http://blog.couchbase.com/moving-no-schema-stack-c-and-dynamic-types](http://blog.couchbase.com/moving-no-schema-stack-c-and-dynamic-types)

# html - 是否可以编写具有三角形形状和内容的 html 块？

> ID：14568255
> 
> 赞同：3
> 
> 时间：2013-01-28T18:03:01.807
> 
> 标签：html, css, markup

我曾经一起工作的一位设计师向我发送了网站设计的概念。

这是一个包含帖子列表的部分页面 -![块列表](../Images/722f0e42e51c2d0ccc45dd3c116965d5.png)

正如我所见，这些粉红色多边形的大部分只是一个背景，一些三角形和菱形可以包含短文本（我用灰色画笔遮住了它）标题，有时还有图标。

我想知道有没有办法在没有 Flash 的 html/css/js 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:08:25.883

您可以使用具有 javascript 的 dynamicHtml。示例网站：[http ://trickyscripter.com/examples/after/jsgraphics_e.htm](http://trickyscripter.com/examples/after/jsgraphics_e.htm)

一些 javascript 库非常好：尝试一下：[http ://raphaeljs.com/](http://raphaeljs.com/)

您可以使用 html5 Canvas：示例站点： http: [//www.williammalone.com/articles/html5-canvas-example/](http://www.williammalone.com/articles/html5-canvas-example/)

您可以创建一个巨大的 texture.png 形状的菱形并将其左对齐或右对齐。（最喜欢的）

请记住，“块”是块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:20:26.830

这可以使用一些（稍微麻烦的）CSS阻塞以对旧版浏览器友好的方式来完成......

[http://jsfiddle.net/AuZ5H/2](http://jsfiddle.net/AuZ5H/2)

```
.wrapper {
    background-color: #eee;
    width: 250px;
    height: 225px;
    font-size: 8px;
    overflow: hidden;
}
.block {
    float: right;
    clear: right;
    background-color: #ddd;
    height: 25px;
}
.block1 {
    width: 200px;
}
.block2 {
    width: 150px;
}
.block3 {
    width: 100px;
}
.block4 {
    width: 50px;
}
.block5 {
    width: 1px;
}

<div class="wrapper">
    <div class="block block1"></div>
    <div class="block block2"></div>
    <div class="block block3"></div>
    <div class="block block4"></div>
    <div class="block block5"></div>
    <div class="block block4"></div>
    <div class="block block3"></div>
    <div class="block block2"></div>
    <div class="block block1"></div>
    Content here.
</div> 
```

显然，您使用的块越多，每个块的高度越小，布局就越细化。你需要为你的菱形（菱形？）加倍和反转块。

# java - 在某些情况下，BigDecimal 是不是有点矫枉过正？

> ID：14568259
> 
> 赞同：13
> 
> 时间：2013-01-28T18:03:13.843
> 
> 标签：java, floating-point, bigdecimal

我正在使用金钱，所以我需要我的结果是准确的，但我只需要 2 个小数点（美分）的精度。是否需要 BigDecimal 来保证乘法/除法的结果是准确的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T18:08:31.763

BigDecimal 是一种非常适合小数点算术的类型，小数点后位数已知。您可以使用整数类型并自己跟踪乘数，但这涉及在您的代码中进行可以自动化的工作。

除了管理小数点后的数字外，BigDecimal 还将根据需要扩展存储的位数 - 许多商业和政府财务计算涉及的总和太大而无法以美分存储在 int 中。

只有当您需要存储大量资金并且内存不足时，我才会考虑避免使用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T18:05:10.100

一种常见的选择是使用整数或长整数（美分值）进行所有计算，然后在需要显示时简单地添加两位小数。

同样，还有一个[JODA Money](http://joda-money.sourceforge.net/)库，它将为您提供功能更全面的货币计算 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T18:06:48.447

这取决于您的应用程序。使用该精度级别的一个原因是防止在许多操作中累积的错误渗入并导致有价值信息的丢失。如果您正在创建一个临时应用程序和/或仅将其用于数据输入，那么 BigDecimal 很可能是矫枉过正。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T11:47:44.020

为 Patricias 回答 +1，但我非常不鼓励任何人使用具有固定位长的整数数据类型来实现自己的类，*只要*有人真的不知道你在做什么。BigDecimal 支持所有舍入和精度问题，而 long/int 存在严重问题：

*   小数位数未知：贸易交易所/法律/商业的小数位数数量不同，因此您不知道将来是否必须更改和调整您选择的位数。更糟糕的是：有些事情，比如股票评估，需要大量的小数。一艘载有 1000 公吨煤的船会产生 4.12 欧元的冰费，即 0,000412 欧元/吨。

*   未实现的运算：这意味着人们很可能使用浮点数进行舍入/除法或其他算术运算，隐藏不精确性并导致所有已知的浮点算术问题。

*   上溢/下溢：达到最大数量后，添加数量会导致符号改变。Long.MAX_VALUE 切换到 Long.MIN_VALUE。如果您正在做像 (a*b*c*d)/(e*f) 这样的分数，这可能很容易发生，这可能完全有效地导致 long 范围内的结果，但中间提名者或分母*不是*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T18:14:59.363

您可以编写自己的`Currency`课程，使用 a`long`来保存金额。类方法将使用`String`.

无论您使用 a`long`还是 a ，除法都将是一个问题`BigDecimal`。您必须根据具体情况确定您对小数美分的处理方式。丢弃它们、舍弃它们或保存它们（除了您自己的帐户之外）。

# ios - AVAudioPlayer 播放导致类 _NSThreadPerformInfo 自动释放，没有适当的池 - 只是泄漏

> ID：14568261
> 
> 赞同：0
> 
> 时间：2013-01-28T18:03:22.873
> 
> 标签：ios, automatic-ref-counting, avaudioplayer

Mucho tiempo 浪费了这一点 - 我使用 AVAudioPLayer 进行了相当简单的播放，但是当文件播放完毕时，我在调试窗口中收到此消息：

> objc [39752]：类 _NSThreadPerformInfo 的对象 0x7304d80 自动释放，没有适当的池 - 只是泄漏 - 在 objc_autoreleaseNoPool() 上中断以进行调试

这是我的播放和回调函数（我已经简化了文件名的创建，但错误是一样的）：

```
@implementation PlaybackEngine {
    int _pbIndex;
    AVAudioPlayer *_player;
    NSArray *fileList;
    BufferStores *_BS;
}
....

    -(BOOL)startPlayback {
        NSURL *playURL = [[NSURL alloc] initWithString:[[DOCUMENTS_FOLDER stringByAppendingPathComponent:@"28Jan13_17:13:21.aif"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

        printf("Playback file URL = %s\n", [[playURL path] UTF8String]);
        _player = [[AVAudioPlayer alloc] initWithContentsOfURL:playURL error:nil];
        _player.delegate = self;

        [_player prepareToPlay];
        [_player play];

        self.playing = YES;
        return YES;    
    }

    -(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag {

        // check for player stopping due to bad audio data
        if (!flag) {
            printf("Player finished playing due to bad audio data");
        }

        self.playing = NO;
        _player = nil;

    } 
```

我试过设置断点，`objc_autoreleaseNoPool`但它永远不会被击中。我犯了什么明显的 ARC 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:34:33.047

好吧，我似乎已经解决了。Apple Dev Support 告诉我这个错误永远不会发生，这让我认为它一定是 5.x SDK 中的一些模糊错误，但最后我整理了我所有的类，将 ivars 重新定义为属性或扩展中的属性酌情确保我所有的属性修饰符都是正确的等，问题已经消失。

抱歉，我无法明确指出罪魁祸首，但显然是内存管理问题。

# java - Beancomarator 不使用空值

> ID：14568266
> 
> 赞同：5
> 
> 时间：2013-01-28T18:03:45.900
> 
> 标签：java

我的要求是根据该 bean 中的`customername`属性对 Customer 类型的 bean 列表进行排序......因为我使用了它。当字段不是`beancomparator`时它工作正常。当场是投掷时..请帮帮我..`customername``null``NullPointerException``null`

我的代码是

```
public class customer{
private String customername;
}

main()
{
list<customer> list=new arraylist();
//list is filled with customertype beans
comparator<customer> comp=new beancomparator(customername);
collections.sort(list,comp);//throwing error when customername is null...
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-01T14:19:16.477

我这样使用它：

```
 Comparator<Customer> comparator = new BeanComparator(customername, new NullComparator(false));
    if (descentSort){
        comparator = new ReverseComparator(comparator);
    }
    Collections.sort(list, comparator); 
```

IMO这是更简单的方法:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:04:53.583

处理您的无效检查的情况`Comparator`

```
new Comparator<Customer>() {

public int compare(Customer o1, Customer o2) {
    if(o1.getName() == null){ return -1;}

    if(o2.getName() == null){ return 1;}
    return o1.getName().compareTo(o2.getName());
}
} 
```

# ruby-on-rails - 在 Rails 中链接/连接两个数据库行

> ID：14568267
> 
> 赞同：0
> 
> 时间：2013-01-28T18:03:47.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我正在尝试找到一种连接两个活动记录对象的方法，而不是完全合并，而是以某种方式将它们关联起来。

例如，如果我有两个模型，City 和 Restaurant，每个城市可以有很多餐馆。在这个例子中，如果有两个城市记录，“那不勒斯”和“那不勒斯”代表同一个城市，我想在数据库中连接它们，所以无论用户是点击“那不勒斯”还是“那不勒斯”的餐馆，他们将被带到同一页面。

如果我解释得不好，我深表歉意，如果不使用示例，我将无法完全阐明我所追求的。

我正在使用 Rails 3.2、ruby 1.9.2 和 postgres

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:12:37.237

```
class City < ActiveRecord::Base
  has_many :city_name, :dependent => :destroy
end

class CityName < ActiveRecord::Base
  belongs_to :city
end 
```

当您在控制器中搜索城市时，您可以检查所有名称，如果有任何匹配项，您将呈现同一家餐厅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:06:01.607

您可以添加两个实际上相同的城市共有的查找字段（一种临时解决方案，但我认为它有效）。

因此，那不勒斯和那不勒斯的“城市 ID”可能为 46，而“孟买”和“孟买”的城市 ID 为 32。

# c# - 序列化类的设计

> ID：14568269
> 
> 赞同：0
> 
> 时间：2013-01-28T18:03:56.063
> 
> 标签：c#, .net, serialization, xml-serialization

`serialize`我刚刚学会了如何`deserialize` `objects`在`XML`. `C#`现在我想将此功能添加到我的应用程序中，我有一个`class`用于`object`. 我应该创建一个`class`包含`serialize`and`deserialize`方法的吗？或者，应该有一个`Interface`或什么？

这通常是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:17:43.283

如果您的类足够简单，可以进行序列化，您可以这样做：

```
using (FileStream stream = File.Create(filename)){
 XmlSerializer serializer = new XmlSerializer(typeof(MyRootClassHere));
 serializer .Serialize(stream, yourRootInstance);
} 
```

您可能需要查看 XmlElement、XmlAttribute、XmlIgnore、XmlText 属性以更好地控制输出：

```
 [XmlIgnore]
 public bool IgnoredBool{ get; set; }

 [XmlAttribute("NewXmlName")]
 public string RenamedProperty{ get; set; } 
```

这应该让你大部分时间都去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:08:55.000

你最好将你的对象和序列化机制分开[DataContractSerializers](http://msdn.microsoft.com/en-gb/library/system.runtime.serialization.datacontractserializer.aspx)在.Net中对此有好处。它们允许在属性上指定数据注释（如上面的评论中所述）并为您自动执行实际序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:09:14.647

有一个接口（ISerializable），但您也有通用类，它们可以为您完成这项工作。在那种情况下，您必须为要序列化的属性放置正确的属性。

如果您想要有关此的文档，请查看[此处。](http://msdn.microsoft.com/en-us/library/7ay27kt9%28v=vs.71%29.aspx)

.Net 有一些内置的序列化器（BinaryFormatter 和 XmlSerializer

如果您使用接口，则必须编写自己的方法

# java - Clojure Java 互操作错误：非法参数异常：未找到匹配的构造函数

> ID：14568273
> 
> 赞同：2
> 
> 时间：2013-01-28T18:04:17.123
> 
> 标签：java, constructor, clojure

我[在 Stack Overflow 上找到了这个相关的问题](https://stackoverflow.com/questions/8596122/what-is-the-cause-of-the-error-clojure-get-no-matching-ctor-found-while-trying)，但它并没有真正回答我的问题。

我有一个已打包为 JAR 文件的 Java 应用程序。我还有一个已打包为 JAR 文件的 Clojure 应用程序。我现在正在编写另一个使用前两个作为库的 Clojure 应用程序。

这是似乎是我的错误来源的Java代码：

```
public class ServerBuilder {
  private HashMap<String, ResponseObject> routes = new HashMap<String, ResponseObject>();
  public int limit;
  public ServerSocket serverSocket;
  private ThreadBuilder threadBuilder;
  public int count;

  public ServerBuilder(int limit) {
    this.limit = limit;
  }

  public void begin() throws IOException {
    if(getServerSocket() == null) {
      this.serverSocket = new ServerSocket(4444);
    }
    int count = 0;
    while(count < limit) {
        createThreadBuilder(serverSocket);
        new Thread(threadBuilder).start();
        count = count + 1;
        this.count = count;
    }
  } 
```

然后在我的 Clojure 代码中，我正在访问我的 Java 代码，如下所示：

```
(ns browser_tic_tac_toe.core
  (:import (server ServerBuilder)))

(defn -main []
  (let [server-builder (ServerBuilder. 100)]   ; the error points me to this line
    (doto
      server-builder (.begin)))) 
```

我得到的错误是：

```
Exception in thread "main" java.lang.IllegalArgumentException: No matching ctor found for class server.ServerBuilder 
```

我已经用谷歌搜索了这个并没有找到太多。该错误显然意味着“没有为此类找到匹配的构造函数”，但在我看来构造函数确实匹配。这就是为什么我很困惑。

**编辑**

我尝试更改要传递的类型（从`long`到`int`）：

```
(defn -main []
  (let [limit (int 100)
        server-builder (ServerBuilder. limit)]
    (doto
      server-builder (.begin)))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:11:16.870

与Java相反，我相信clojure中的[原始文字](http://dev.clojure.org/display/doc/Documentation+for+1.3+Numerics)是`longs`，不是`ints`，并且clojure找不到构造函数`ServerBuilder(long)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:38:56.593

您是否尝试过其他构造函数语法： `(new ServerBuilder 100)`

否则，java 代码可能不在构建路径中 - 或者 java 类包名称可能与`server`编译器错误所指示的不符：`server.ServerBuilder`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T18:07:05.440

不确定如何在 Clojure 中调用 Java 构造函数，但请尝试在 Java 中创建默认构造函数：

```
public ServerBuilder()  {
    this.limit = 100;  //some default
} 
```

是的，如果您想将参数传递给构造函数，这显然是行不通的。

根据@jtahlborn 的另一个答案，您可以使用 long 将 long 转换为 int

`(ServerBuilder. (int 100))`

来自[http://clojure.org/java_interop#Java Interop-一些优化技巧](http://clojure.org/java_interop#Java%20Interop-Some%20optimization%20tips)

# sql-server-2008 - CTE 和表名作为参数

> ID：14568275
> 
> 赞同：0
> 
> 时间：2013-01-28T18:04:33.050
> 
> 标签：sql-server-2008, tsql, stored-procedures, common-table-expression

在 SQL Server 2008 中，我有一个包含 CTE 的存储过程

```
;with t1 as (select * from db..tablename where …)
Select * from t1; 
```

我想`tablename`用作存储过程参数之一。

请注意结果的大小`T1`太大而无法使用类似的东西

```
Exec(‘select * into #temptable from db..’+’tablename’+’ where …’) 
```

有类似的问题和答案，但似乎都没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:04:58.513

我喜欢使用 CTE。它们是一个很棒的实用工具！

对于这个特殊问题，我可能会建议反对它。鉴于您正在将一个表的数据“传输”到另一个存储过程，我认为您应该以不同的方式处理它。

考虑你的第一个过程：

```
IF OBJECT_ID('SomeTempTable') IS NOT NULL DROP SomeTempTable;

SELECT
    *
INTO SomeTempTable
FROM
YourOtherTable

EXEC YourSecondProcedureName 
```

请注意，您需要注意表格的范围。在您考虑之前，我没有包含工作代码。更多信息可以在这里找到：[临时表范围](https://stackoverflow.com/questions/3331807/temporary-table-scope)

另请注意，“YourSecondProcedureName”现在不采用表值。相反（并且在正确的范围内），您只需按名称调用您的临时表。它也被认为是完成后删除临时表的最佳实践，尽管 sql server 中有一些机制取决于版本可以为你做一些。再次范围范围范围。

希望这可以帮助！

马特

# r - 使用 -snowfall- （或其他包）并行重复用户定义的函数

> ID：14568276
> 
> 赞同：0
> 
> 时间：2013-01-28T18:04:35.130
> 
> 标签：r, parallel-processing, snowfall

这个问题与这个问题有关[，](https://stackoverflow.com/questions/14490182/repeating-a-user-defined-function-using-replicate-or-sapply)我在其中询问如何复制用户定义的函数。现在我想并行化操作以节省时间。我初步做的是：

1.  我定义了一个自定义函数`my.fun()`，它返回一个包含行和列`output`的矩阵。`1000``20`

2.  我复制 say `5`times `output`，并将结果存储在一个名为`final`through:的矩阵中`final <- do.call(rbind, replicate(5, my.fun(), simplify=FALSE))`。因此，在这个例子`final`中是一个`5000`-rows 矩阵。

我现在想做的是`output`在将结果绑定到`final`矩阵中之前并行化 5 个（甚至更多..）复制。

你会怎么做？到目前为止，我（错误地）所做的是：

```
 library(snowfall)

    sfInit(parallel = TRUE, cpus = 4, type = "SOCK")

    # previously defined objects manipulated within my.fun
    sfExport(...)

    my.fun = function() {
       ...
       return(output)
    }

    final <- do.call(rbind, sfSapply(1:5, fun=my.fun(), simplify=FALSE))

    sfStop() 
```

但它返回：

```
Error in get(as.character(FUN), mode = "function", envir = envir) : 
  object 'fun' of mode 'function' was not found 
```

任何帮助将不胜感激！请考虑一下我不需要使用`-snowfall-`：最终目标是以有效的方式并行化计算`final`（实际上我必须进行大量复制..）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:27:40.553

`sfSapply`期望`fun`成为一个函数，但您将一次调用的*结果*`my.fun`交给. 也就是你要交`my.fun`，不是`my.fun ()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:44:55.237

我对 R 中的并行计算没有任何经验。我必须在函数 my.func 中添加一个虚拟参数，否则会`sfSapply`出现此错误

```
 first error: unused argument(s) (X[[1]]) 
```

所以我添加 x 作为参数

```
 my.fun <- function(x) matrix(1:4, 2,2) 
```

现在我尝试对并行和`sapply`解决方案进行基准测试

```
 sfInit(parallel = TRUE, cpus = 4)
  library(rbenchmark)
  benchmark(
  pp = sfSapply(1:20000, fun=my.fun, simplify=FALSE),
  nopp = sapply(1:20000, FUN=my.fun, simplify=FALSE)) 
```

并行解决方案比经典解决方案慢！！我真的很困惑。也许其他对 R 并行计算更有经验的人可以给我们一个逻辑解释..

```
 test replications elapsed relative user.self sys.self user.child sys.child
2 nopp          100   15.22    1.000     13.90     0.02         NA        NA
1   pp          100   27.28    1.792     11.95     2.04         NA        NA 
```

# haskell - 为什么在将 mod 函数传递给 map 时使用重音？

> ID：14568278
> 
> 赞同：6
> 
> 时间：2013-01-28T18:05:00.320
> 
> 标签：haskell

我正在学习 Haskell，但我没有找到答案。

为什么像示例中那样使用重音来传递`mod`函数来映射？我看到了其他不需要它的其他功能的案例。

```
map (`mod` 3) [1..6]   -- result is [1,2,0,1,2,0] 
```

如果我没有重音通过，结果就完全不同了。

```
map (mod 3) [1..6]    -- result is [0,1,0,3,3,3] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T18:09:05.310

重音“使函数表现得像运算符”。例如：

```
mod a b == a `mod` b 
```

所以

```
(mod 3) == mod 3 ? 
```

和

```
(`mod` 3) == mod ? 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:15:24.273

如果你想明确地确定你在想什么，（我总是这样做，因为我还处于学习阶段），你总是可以使用[匿名函数](http://www.haskell.org/haskellwiki/Anonymous_function)（我认为有时称为*lambda 表达式*，但不确定）

```
> map (\x -> x `mod` 3) [1..10]
[1,2,0,1,2,0,1,2,0,1]

> map (\x -> 3 `mod` x) [1..10]
[0,1,0,3,3,3,3,3,3,3]

> map (\x -> mod x 3) [1..10]
[1,2,0,1,2,0,1,2,0,1]

> map (\x -> mod 3 x) [1..10]
[0,1,0,3,3,3,3,3,3,3] 
```

# mongodb - Mongodb聚合计数数组/集合大小

> ID：14568283
> 
> 赞同：12
> 
> 时间：2013-01-28T18:05:21.560
> 
> 标签：mongodb, aggregation-framework

这是我的问题：

模型：

> {应用程序：“abc”，日期：Time.now，状态：“1” user_id：[id1，id2，id4]}
> 
> {应用程序：“abc”，日期：Time.yesterday，状态：“1”，user_id：[id1，id3，id5]}
> 
> {应用程序：“abc”，日期：Time.yesterday-1，状态：“1”，user_id：[id1，id3，id5]}

我需要计算一段时间内的唯一用户ID数。

预期结果：

> { 应用程序：“abc”，状态：“1”，unique_id_count：5 }

我目前正在使用聚合框架并计算 mongodb 之外的 id。

> { $match: { application: "abc" } }, { $unwind: "$users" }, { $group: { _id: { status: "$status"}, users: { $addToSet: "$users" } } }

我的用户 ID 数组非常大，所以我必须迭代日期，否则我将获得最大文档限制 (16mb)。

我也可以 $group by

> { 年: { $year: "$date" }, 月: { $month: "$date" }, 日: { $dayOfMonth: "$date" }

但我也得到了文档大小限制。

是否可以计算 mongodb 中的设置大小？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-28T19:16:30.260

以下将返回每个应用程序的 uniqueUsers 数。这将通过使用 mongodb 的管道功能将组操作应用于组操作的结果。

```
{ $match: { application: "abc" } }, 
{ $unwind: "$users" }, 
{ $group: { _id: "$status", users: { $addToSet: "$users" } } }, 
{ $unwind:"$users" }, 
{ $group : {_id : "$_id", count : {$sum : 1} } } 
```

希望这将在以下 mongo 版本中通过一个给出投影下数组大小的命令以更简单的方式完成。`{$project: {id: "$_id", count: {$size: "$uniqueUsers"}}}` [https://jira.mongodb.org/browse/SERVER-4899](https://jira.mongodb.org/browse/SERVER-4899)

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:38:32.587

对不起，我参加聚会有点晚了。简单地对“user_id”进行分组并用一个简单的组计算结果就可以了，并且不会遇到文档大小限制。

```
[
    {$match: {application: 'abc', date: {$gte: startDate, $lte: endDate}}},
    {$unwind: '$user_id'},
    {$group: {_id: '$user_id'}},
    {$group: {_id: 'singleton', count: {$sum: 1}}}
]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-24T09:44:48.923

使用 $size 获取集合的大小。

```
[
    {
        $match: {"application": "abc"}
    },
    {
        $unwind: "$user_id"
    },
    {
        $group: {
            "_id": "$status",
            "application": "$application",
            "unique_user_id": {$addToSet: "$user_id"}
        }
    },
    {
        $project:{
            "_id": "$_id",
            "application": "$application",
            "count": {$size: "$unique_user_id"}
        }
    }
] 
```

# jquery - 数组太短时从 0 重新开始

> ID：14568285
> 
> 赞同：1
> 
> 时间：2013-01-28T18:05:27.047
> 
> 标签：jquery

当链接太多且颜色数组太短时，如何管理数组从 0 重新启动（在函数 get_hover_color 中）？感谢您的帮助！

直到。

```
<div class="line">
<div><h2 class="color_link">DRUCKVORSTUFE</h2></div>
<div><h2 class="color_link">SCAN</h2></div>
<div><h2 class="color_link">RETUSCHEN</h2></div>
<div><h2 class="color_link">ANDRUCK</h2></div>
<div><h2 class="color_link">PDF</h2></div>
<div><h2 class="color_link">CTP</h2></div>
<div><h2 class="color_link">STACCATO</h2></div>
.............
.............
.............
........and so on........

</div>

function get_hover_color(i){

        hover_color_array = ['54cacd','e84d3a','ff3384','a0388d','231599','0d958a','629B39','33811E','F04E00','F00200','D9008F','58dbb4','093C8B','AECB27','E5B208','74204f','C26A21','DB2C17','cccf78','166C64','9A1E6E','7EADC2','00A1CE'];

return hover_color_array[i];

     }

$('.color_link').each(function(i){
            $(this).hover(
             function(){
               var $this = $( this );
               $this.data( 'prehovercolor', $this.css( 'color' ) ).css( {'color' : '#' + get_hover_color(i), 'cursor' : 'pointer' });
             },function(){
               var $this = $( this );
               $this.css( 'color', $this.data( 'prehovercolor') );
             });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:07:26.503

做这个：

```
hover_color_array[i % hover_color_array.length] 
```

这应该为您提供一个始终落在数组内的范围，因为它需要余数，其范围只能从`0`到`hover_color_array.length-1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:08:51.940

考虑使用长度的模数：

```
function get_hover_color(i){

    hover_color_array = ['54cacd','e84d3a','ff3384','a0388d','231599','0d958a','629B39','33811E','F04E00','F00200','D9008F','58dbb4','093C8B','AECB27','E5B208','74204f','C26A21','DB2C17','cccf78','166C64','9A1E6E','7EADC2','00A1CE'];

k = i % hover_color_array.length;

return hover_color_array[k];

 } 
```

[http://msdn.microsoft.com/en-us/library/ie/9f59bza0(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/9f59bza0(v=vs.94).aspx)

# c - 在 C 中生成二进制输入

> ID：14568287
> 
> 赞同：0
> 
> 时间：2013-01-28T18:05:35.287
> 
> 标签：c, binary, truthtable

本质上，我有一个包含八个变量的程序。我正在尝试检查这八个变量的每个真值组合，因此我需要一个使用 0 和 1 的真值表来证明它们的每个组合。这些输入将被读入程序。

它应该看起来像：

```
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 1
0 0 0 0 0 0 1 0
0 0 0 0 0 0 1 1 
```

等等...

我将如何在 C 中实现这一点？我已经打开了一个文件进行写入，但我不知道如何......逻辑上这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:11:08.013

将每个十进制数直到 2^8 转换为相应的二进制数......你有所需的模式......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:11:41.430

两个循环和字符`'0'`绰绰有余......

```
FILE *f = fopen("truth.txt", "w"); // we'll alter the truth...
assert(f != NULL);

unsigned i;
int j;
for (i = 0; i < 256; i++) {
    for (j = 0; j < 8; j++) {
        fprintf(f, "%c ", '0' + ((i >> (7 - j)) & 1));
    }
    fprintf(f, "\n");
}

fclose(f); 
```

# javascript - 在 JavaScript 中调用函数时带或不带括号 () 有什么区别

> ID：14568291
> 
> 赞同：4
> 
> 时间：2013-01-28T18:05:59.333
> 
> 标签：javascript, function

所以一个简单的例子是

```
function a() {
    alert("something");
}

anything.onclick = a; // this is without parentheses

anything.onclick = a(); // this is with parentheses 
```

两者有什么区别？

还有一件事：如果我定义了相同的函数但这次返回 false，它会起作用吗？

```
function a(){
    alert("something");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T18:08:58.157

不同的是`a()`调用函数while`a` *是*函数。

```
console.log( a() ); // false
console.log(  a  ); // function() {...} 
```

为了清楚使用示例的第二部分时技术上会发生什么，让我们重新定义`a`如下：

```
a = function() {
    return 100;
}; 
```

并设置事件处理程序：

```
anything.onclick = a(); 
```

`f()`不仅调用函数`f`，而且返回它的返回值。所以当给函数调用设置变量或对象属性时，函数调用的返回值会被赋值。所以上面的语句实际上等效于：

```
anything.onclick = 100; 
```

这没有意义，可能会导致错误。如果一个函数没有返回值，它的返回值是隐式的`undefined`。

但是，如果您设置了一个等于`a` *而不*调用它的变量，则与为该变量设置一个正则函数表达式相同：

```
var a = function() { ... },
    b = a; // b = function() { ... } 
```

`b`将执行相同的操作`a`。

因此，在您的示例中，请使用第一个，因为它是有道理的！将函数调用的返回值分配给事件处理程序的唯一情况是函数返回另一个函数。例如：

```
var x = function(xyz) {
    return function() {
        console.log(xyz);
    };
};

anything.onclick = x("Hello World"); // = function() {
                                     //       console.log("Hello World");
                                     //   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:09:12.810

**分配参考：**

```
anything.onclick = a; //assigns a reference 
```

使用您的功能是：

```
anything.onclick = function() { 
    alert("something"); 
} 
```

**执行方法并分配返回的结果**

```
anything.onclick = a(); //calls the method and assigns whatever is returned. 
```

使用您的功能是：

```
anything.onclick = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:10:20.310

函数末尾的括号是js引擎执行函数的权限。如果你不提供它，它根本不会被执行。

x=a() //如果你这样做，你是在调用函数，但如果你只是传递“a”，你是在传递一个指向函数的指针

# annotations - 如何在运行时检索 EMF 注释

> ID：14568293
> 
> 赞同：1
> 
> 时间：2013-01-28T18:06:01.457
> 
> 标签：annotations, emf

我有一个 EMF 模型，我正在尝试以 EClasses 上的 EAnnotations 的形式向它添加文档。需要能够在运行时为各种报告检索此文档。但是，尝试通过 EClass.getEAnnotation 获取它们不会返回任何内容。

我的注释设置如下：

```
Source: http://www.eclipse.org/emf/2002/GenModel
Details:
 Key: documention
 Value: Stuff I'm trying to access goes here. 
```

模型的 .genmodel 中的“Suppress GenModel Annotations”选项设置为 true。添加注释后，我确实重新生成了代码。文档注释显示在生成代码的 JavaDoc 中。getEAnnotations() 和 getEAnnotation("GenModel") 都返回空值。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T15:05:16.450

您需要将 Suppress GenModel Annotations 设置为 false（因为您想包含它们，而不是抑制它们）。

使用[EcoreUtil.getDocumentation 方法](http://download.eclipse.org/modeling/emf/emf/javadoc/2.5.0/org/eclipse/emf/ecore/util/EcoreUtil.html#getDocumentation%28org.eclipse.emf.ecore.EModelElement%29)获取实际信息。

# c++ - 将双精度从文本文件转换为二进制文件

> ID：14568304
> 
> 赞同：1
> 
> 时间：2013-01-28T18:07:05.353
> 
> 标签：c++, parsing, binary, double, type-conversion

我有一个充满数字的文本文件（来自分子动力学输出，应该是 type `double`）分为三列，有数千行，如下所示：

```
 -11.979920  -13.987064   -0.608777
     -9.174895  -13.979109   -0.809622 
```

我想读取文件中的所有数字，将它们转换为类型`double`，然后将它们保存到`binary`文件中。我知道不推荐使用二进制文件，但我希望它测试两种文件格式的压缩算法，即文本和二进制文件。我曾尝试使用[需要将 txt 文件转换为 C++ 中的二进制文件，](https://stackoverflow.com/questions/5016262/need-to-convert-txt-file-into-binary-file-in-c)但我不确定是否将每个数字转换为其整个格式：-11.275804 或者它是否正在解析每个单独的数字：-1、1、2、7、5 ， ETC..

编辑：一直在尝试将单个双精度转换为二进制并返回，存在一些问题。这是核心代码

```
 if( std::string(argv[1]) == "-2bin")  //convert to binary
{
    cout << "Performing the conversion: Text -> Binary..." << endl;
    std::ifstream in(argv[2]);
    std::ofstream out(argv[3], std::ios::binary);
    double d;

    while(in >> d) {
        cout << "read a double: "<< d <<endl;
        out.write((char*)&d, sizeof d);
    }
    out.flush();
    out.close();

    cout << "Conversion complete!" << endl;
    return 0;
}else if( std::string(argv[1]) == "-2text" ) //convert to text
{
    cout << "Performing the conversion: Binary -> Text..." << endl;
    std::ifstream in(argv[2], std::ios::binary);
    std::ofstream  out(argv[3]);
    std::string s;

    while(in >> s) {
        cout << "read a string:" << s <<endl;
        out.write((char*)&s, s.length());
    }
    out.flush();
    out.close();

    cout << "Conversion complete!" << endl;
    return 0; 
```

仅读取一个双精度时，例如`1.23456789`读取的字符串长度为 7

```
read a double: 1.23457 
```

我希望它读取到下一个“空格”，然后转换为 double->bin。在进行二进制-> 文本转换时，一切都被破坏了，我不知道如何处理二进制并将其转换为双精度然后是字符串。

更新：最后我设法检查二进制转换是否与`od -lF`实用程序一起使用，但是每一行都有一个奇怪的行，我不知道它是什么意思，它从第一个数字中减去零，输出改为两列3：

```
od -lF composite_of10_2.bin | more
0000000     -4600438323394026364     -4599308401772716498
                       -11.97992               -13.987064
0000020     -4619713441568795935     -4602017412087121980
                       -0.608777                -9.174895
0000040     -4599312880039595965     -4617904390634477481
                      -13.979109                -0.809622 
```

这看起来是否正确转换？我应该如何执行从二进制到双字符串的转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:17:35.473

在您的二进制 -> 文本转换中，您将数据作为“字符串”读取，而二进制文件包含二进制“双精度”

```
std::string s;

    while(in >> s) { ... 
```

这将给出未定义的结果，您需要以 'double' 的形式读入并将值转换为字符串，这将由文本输出流本地处理

```
double d;
while( in.read( (char*)&d, sizeof(d) ) { //, Read the double value form the binary stream
    out << d << ' '; //< Write the double value to the output stream which is in text format
} 
```

# ios - 强制关闭消息应用

> ID：14568309
> 
> 赞同：2
> 
> 时间：2013-01-28T18:07:25.187
> 
> 标签：ios, message, jailbreak, iphone-privateapi

如何在越狱设备上强制关闭消息应用程序？

我已经从数据库中删除了消息，但电话号码仍然出现；我认为这是因为 Message 应用程序仍在运行并且缓存了信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:17:18.047

你可以试试

```
system("/usr/bin/killall MobileSMS"); 
```

# mysql - 实时数据库上的 MySQL 查询速度慢，本地速度快？

> ID：14568312
> 
> 赞同：1
> 
> 时间：2013-01-28T18:07:33.777
> 
> 标签：mysql

我正在优化 MySQL 查询，但遇到了一个奇怪的问题。我从不使用实时生产数据库，所以我创建了一个转储并将其导入到我本地机器上的数据库中`mysqldump`，没有使用额外的选项。

生产数据库和我本地虚拟机上的mysql版本几乎完全相同：

生产：mysql Ver 14.14 Distrib 5.1.61，用于 debian-linux-gnu (x86_64) 使用 readline 6.2

虚拟机：mysql Ver 14.14 Distrib 5.1.63，用于 debian-linux-gnu (x86_64) 使用 readline 6.2

这个查询非常复杂，在生产环境中大约需要 4-5 秒，但在 VM 上只需要不到 1 秒。我唯一能想到的可能是生产数据库上有锁阻止查询立即运行，并且查询必须等待锁？

对`EXTENDED EXPLAIN`每个数据库运行查询时几乎相同，但有一些细微差别。

我`SQL_NO_CACHE`在查询之前使用以确保查询不会命中缓存。

所以我的问题是：

1.  `EXTENDED EXPLAIN`当我使用生产数据库的副本并且 mysql 版本相同时，可能会导致什么不同，甚至是轻微的不同？
2.  有什么理由我没有想到会导致相同的查询在生产数据库上花费更长的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:13:53.973

有许多因素可能会影响此执行时间：

您的生产系统上的负载情况如何？你有多少 IO 空间？如果您的系统忙于运行其他查询或执行繁重的 IO，任何查询的性能都会受到严重影响。

通常，您可以使用它`SHOW PROCESSLIST`来帮助识别当前正在运行的程序`iotop`，以及查看正在进行的 IO 的程序。

您的虚拟机是否使用 SSD？即使是带有 SSD 的中端开发机器，对于任何严重依赖随机访问的东西，几乎所有基于 HD 的数据库服务器都会被淘汰。

你试过`OPTIMIZE TABLE`生产系统吗？当您进行恢复时，表总是会自动优化。在实时系统上，表格会随着您`INSERT`和`DELETE`行而缓慢降级。

确保两者都使用相同的存储引擎。MyISAM 通常比 InnoDB 快，但在生产环境中用于关键数据并不安全。检查`SHOW TABLE STATUS`以查看每个表使用的引擎。您可能有不同的默认值。

还要检查是否进行了`/etc/my.cnf`相应调整。MySQL 的默认配置很*糟糕*。您确实需要为 InnoDB 缓冲区分配更多内存，否则性能会很糟糕。

# javascript - 如何防止某人进入我的网站，除非他们使用谷歌浏览器

> ID：14568317
> 
> 赞同：0
> 
> 时间：2013-01-28T18:07:43.487
> 
> 标签：javascript, jquery, html

我一直在寻找一种方法来防止有人进入我的视线，除非他们使用的是 chrome。

我真的对这是否是一个好主意的意见不感兴趣，可以留待另一个主观讨论。

我正在寻求有关如何确保我的网站将浏览器支持仅限于 chrome 用户的答案。它必须限制进入，并提供安装 chrome 的链接。如果访问者已经在使用 chrome，它应该能够识别出允许用户输入 .

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:21:06.530

```
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
if(!is_chrome) {
    document.write("DOWNLOAD CHROME HERE!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:18:20.637

```
<script type="text/javascript">
    if (!window.chrome) window.location.href = 'http://site.com/chrome_dl.html';
</script> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-28T18:21:05.573

在 Javascript 中使用：

```
If (navigator.appName != "netscape"){
  window.location.href = "Download_Chrome.html";
} 
```

并确保在同一目录中有一个名为 Download_Chrome.html 的页面。注意：如果您想知道它为什么要检查 appname = netscape，是因为 chrome 将自己标识为那个。

# unix - 必须找到所有关键字的多个关键字grep

> ID：14568318
> 
> 赞同：0
> 
> 时间：2013-01-28T18:07:51.450
> 
> 标签：unix, grep

我试图找到一种更好的方法来确定给定目录中的哪些文件包含所有给定的搜索字符串集。我目前这样做的方式似乎很尴尬。

例如，如果我想查找哪些文件包含“aaa”、“bbb”、“ccc”和“ddd”，我会这样做：

```
grep -l "aaa" * > out1
grep -l "bbb" `cat out1` > out2
grep -l "ccc" `cat out2` > out3
grep -l "ddd" `cat out3` > out4
cat out4
rm out1 out2 out3 out4 
```

如您所见，这似乎很笨拙。有更好的想法吗？

**编辑：**我在 Solaris 10 机器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:20:33.050

您可以使用 xargs 将 grep 调用链接在一起：

```
grep -l "aaa" * | xargs grep -l "bbb" | xargs grep -l "ccc" | xargs grep -l "ddd" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:39:55.357

这可能会有所帮助：

```
for file in * ; do
   matchall=1
   for pattern in aaa bbb ccc ddd ; do
      grep "$pattern" "$file" >/dev/null || { matchall=0; break ; }
   done
   if [ "$matchall" -eq "1" ]; then echo "maching all : $file" ; fi
done 
```

（您可以通过替换`aaa bbb ccc ddd`为类似的东西来添加模式`$(cat patternfile)`）

对于感兴趣的人：它1）循环遍历每个文件，2）遍历每个文件：它假设这将匹配所有模式，并循环遍历模式：只要文件中没有出现模式，该模式就会循环退出，不打印该文件的名称，然后检查下一个文件。即，它只打印一个已经通过所有模式的文件，而没有将“matchall”设置为0。

# javascript - 在下降不工作

> ID：14568321
> 
> 赞同：1
> 
> 时间：2013-01-28T18:08:04.710
> 
> 标签：javascript

我试图弄清楚如何使用拖放，只是在元素上添加了 draggable="true"

```
<a draggable="true" href="#" title="just a test">test</a> 
```

但不能在父 div 上放置，不能判断它是否调用错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:11:56.423

你试过插入js来接受drop吗？这里

```
ondragover="allowDrop(event);" 
```

函数allowDrop(x) { x.preventDefault(); }

# javascript - 将数据加载到 ember 模型中

> ID：14568325
> 
> 赞同：0
> 
> 时间：2013-01-28T18:08:30.857
> 
> 标签：javascript, rest, frameworks, ember.js, ember-data

我正在尝试在前端使用 Ember js 构建一个简单的应用程序，并且我在服务器上运行了一个 RESTful 服务器，它返回数据库表的 JSON 表示形式。

该数据库有三个表：用户、帐户、事务。该应用程序的工作方式有点像银行账户。一个用户有很多账户，一个账户属于一个用户并且有很多交易，一个交易属于一个账户。

我的模型是这样描述的

```
// Models
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.create({
    url: 'http://api.mydomain.ca'
  })
});

App.User = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    accounts: DS.hasMany('App.Account')
});

App.Account = DS.Model.extend({
    ownedBy: DS.belongsTo('App.User'),
    transactions: DS.hasMany('App.Transaction')
});

App.Transaction = DS.Model.extend({
    account: DS.belongsTo('App.Account'),
    amount: DS.attr('number'),
    description: DS.attr('string'),
    timestamp: DS.attr('date')
}); 
```

我的控制器：

```
//Controllers
App.UserController = Ember.ObjectController.extend();

App.AccountsController = Ember.ArrayController.extend();

App.TransactionsController = Ember.ArrayController.extend(); 
```

和我的路线：

```
// Router
App.Router.map(function() {
    this.resource('users', function() {
        this.resource('user', {path:':user_id'});
    }); // '/#/users/:user_id'
});

App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('users');
    }
});

App.UsersRoute = Ember.Route.extend({
    model: function() {
        return App.User.find();
    }
});

App.UserRoute = Ember.Route.extend({
    model: function(params) {
        return App.User.find(params.user_id);
    },
    setupController: function(controller, model) {
        this.controllerFor('accounts').set('model', App.Account.find({ownedBy:model.id}));
    }
}); 
```

我正在使用主 - 细节布局。当您在“/users/3”访问我的应用程序时，它会在左侧显示用户列表，在右侧显示用户 3 的详细信息。在详细信息中，我希望能够显示帐号、帐户余额和交易清单。

所以这是我不确定的事情。我的数据库用户表有 id、first_name 和 last_name。将帐户和用户之间的关系放在帐户表中对我来说是有意义的，而不是必须在用户表中维护帐户列表。我的帐户表有一个 id 字段和一个 own_by 字段，其中包含拥有该帐户的用户的 id。我的事务表也是如此。我不必在帐户中维护交易列表，而是在交易表中有一个帐户字段，其中包含该交易的帐户 ID。这对我来说是有意义的，但我不确定这是否适合 Ember 期望数据的方式。

我能够使用以下方法在我的用户路由的 setupController 方法中将帐户连接到用户：

```
this.controllerFor('accounts').set('model', App.Account.find({ownedBy:model.id})); 
```

但我不知道如何将交易链接到帐户。

有人可以帮我解决这个问题吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:05:18.777

如果您遵循约定并相应地构建您的 Json 响应，则您无需进行任何接线，并且您的对象将被正确反序列化

这是一个示例，*侧载*您的帐户和交易

```
{
  "user": {
    "id": 1,
    "first_name": "john doe",
    "accounts": [1, 2]
  },

  "accounts": [{
    "id": 1,
    "transactions": [1, 2, 3]
  },
  {
    "id": 2,
  }],

  "transactions": [{
    "id": 1,
  },
  {
    "id": 2,
  },
  {
    "id": 3,
  }]
} 
```

# android - 是否可以让我的应用程序成为唯一可用的应用程序？

> ID：14568329
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:08:44.400
> 
> 标签：android, security

> **可能重复：**
> [Android 中的 Kiosk 模式](https://stackoverflow.com/questions/2068084/kiosk-mode-in-android)

我想锁定我的 android 设备，以便它的用户只能使用我的应用程序，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:15:26.153

创建自定义启动器...

```
<activity
 android:label="@string/app_name"
 android:name=".ClassNameOfYourLauncher">
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

希望用户需要接受才能锁定设备

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:11:17.733

这可能不是你想做的事情。此外，你到底是什么意思：你想禁用主页按钮和后退按钮？你想砖他们的手机？为了安全起见，您想在加载某些东西时暂时锁定它们吗？

请澄清您的问题，但我可以告诉您一件事：您提出的问题的答案是：不要。

编辑：[Android - 是否可以禁用单击主页按钮](https://stackoverflow.com/questions/2162182/android-is-it-possible-to-disable-the-click-of-home-button)

该问题的部分答案，以及不实施此操作的一千个理由。

# cryptography - Shamir 的秘密共享使用 Bignum 或 Bigint 还是 ....？

> ID：14568330
> 
> 赞同：1
> 
> 时间：2013-01-28T18:08:45.100
> 
> 标签：cryptography, openssl, biginteger, bignum

我有一个使用 C 语言中 OpenSSL 的 BIGNUM 库的通用加密实现。标准解密工作正常，但我也想实现 Shamir 的秘密共享 (SSS)。

我遇到的问题是 BIGNUM 只支持整数，作为 SSS 的拉格朗日插值的一部分，我需要乘以负值。

有没有办法做到这一点？否则：我*可以*用另一种语言（python？）做我的 SSS，只要它能够与 OpenSSL 产生的 BIGNUM 交互。

有什么建议么？蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T03:55:22.740

当您查看 OpenSSL 中的 BIGNUM 结构时，您会发现一个名为`neg`. 如果 BIGNUM 对象表示负数，`neg`则将设置为 1。此外，该`bn_mul()`函数正确处理负数的乘法。所以你可以用 OpenSSL 实现 SSS，没问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:39:57.947

模运算（使用组）只提供积极的结果，所以我想你想使用非模运算？在这种情况下，您可以简单地保留一个单独的变量来指示该值是否为负。除了符号位之外，正乘的结果是相同的。

它不是尽可能干净的设计，但对于一些方法来说，它可能没那么重要。您可以创建单独的方法来模仿这些`BN`方法，但保存符号值的整数 (`-1`或`0`)`1`除外。

# python - 缩进一个空格

> ID：14568331
> 
> 赞同：1
> 
> 时间：2013-01-28T18:08:47.037
> 
> 标签：python, notepad++, indentation

我用 Python 编写了一大段代码，我刚刚意识到它缩进了**三个**空格（不是四个！）使用*Notepad++ 作为我的 IDE*，我找不到任何方法来缩进一个额外的空格以使其与其他所有内容对齐。

我想有一些方法可以编写一个宏来将所有内容移动一个空格，但我并没有打算仅针对这种情况掌握 Notepad++ 的宏。也许我什至错过了一个设置？

是否有一种非手动的方式来缩进正确的对齐方式（添加一个空格）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:12:28.820

**选项1：**

*   搜索替换
*   搜索模式 - 正则表达式
*   查找什么 ^\s
*   替换为 <2 个空格字符>

**选项 2：**

*   对所有列进行块选择。对于块选择，使用 ALT + SHIFT 然后从头到尾一直拖动鼠标

*   添加任意数量的空格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:12:36.187

只是将评论写成答案（如 OP 所要求的那样）。

* * *

您只需要使用匹配行首的 3 个空格字符的正则表达式进行查找和替换，然后将其替换为四个字符。所以要匹配的模式类似于`^\s{3}[^\s]`.

# objective-c - 使用 NSTask 和 ps 验证进程是否正在运行的代码

> ID：14568335
> 
> 赞同：1
> 
> 时间：2013-01-28T18:08:53.553
> 
> 标签：objective-c, macos, nstask, ps

检查屏幕保护程序是否正在运行时，我遇到了无穷无尽的问题。如果我使用`NSTask`with `ps`，它会在很多用户上崩溃或挂起。如果我使用通知，对其他人来说似乎参差不齐。

关于为什么这`NSTask`是片状的任何想法？（是的，我知道在调试时现在很乱）

```
 -(BOOL)checkScreenSaverRunning
{
    MYLog(@"Building task to check screen saver running");
    BOOL foundSaver=FALSE;

    NSTask *task;
    int i;
    task = [[NSTask alloc] init];
    [task setLaunchPath: @"/bin/ps"];

    NSArray *arguments;
    arguments = [NSArray arrayWithObjects:  @"-ax", nil];
    [task setArguments: arguments];

    NSPipe *stdpipe;
    stdpipe = [NSPipe pipe];
    [task setStandardOutput: stdpipe];
    NSFileHandle *stdfile;
    stdfile = [stdpipe fileHandleForReading];
    MYLog(@"Launching task to check screen saver running");
    [task launch];

    while ([task isRunning]){
        NSData *stddata;
        stddata = [stdfile readDataToEndOfFile];
        if([stddata length]>0){
            NSString *stdstring = [[NSString alloc] initWithData:stddata
                                            encoding:NSUTF8StringEncoding];
            NSArray *stdReturnValues=[stdstring componentsSeparatedByString:@"\n"];

            for(i=0;i<[stdReturnValues count];i++){

                if([[stdReturnValues objectAtIndex:i]
                     rangeOfString:@"ScreenSaverEngine"].location != NSNotFound){
                    foundSaver=TRUE;
                    MYLog(@"Found screensaver in running processes");
                }
            }
            [stdstring release];
            stdstring=nil;
        }
    }
    MYLog(@"Task ended");
    [task release];
    if(foundSaver)screenSaverIsActive=TRUE;
    else screenSaverIsActive=FALSE;
    return(foundSaver);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:43:47.420

您想知道屏幕保护程序是否正在运行的更高层次的目的是什么？可能有更好的方法来实现这一点。

如果您尝试诊断崩溃或挂起，请显示崩溃或挂起报告。

无论如何，如果你要为此生成一个子进程，你可能应该使用`killall -0 ScreenSaverEngine`而不是`ps`. `killall`将为您按名称查找进程。使用信号 0 ( `-0`) 意味着“只是测试进程是否存在，而不是实际发出信号”。确保`[task setStandardError:[NSFileHandle fileHandleWithNullDevice]]`其输出无处可去。您可以通过在任务终止后检查任务的成功或失败状态来确定进程是否存在。

# jquery - smoothdivscroll - 图像 onclick 不起作用

> ID：14568349
> 
> 赞同：0
> 
> 时间：2013-01-28T18:09:13.063
> 
> 标签：jquery, smooth-scrolling

我正在使用来自smoothdivscroll.com 的smoothdivscroll，并且在某些浏览器中不会触发smoothdivscroller 中图像的onclick。

```
<script>
function test() {
     alert("test click");   
}
</script>

<div id="makeMeScrollable">
    <img onClick="test()" src="http://fakeimg.pl/497x330/?text=Click me" alt="Field" id="field" />
    <img src="http://www.smoothdivscroll.com/images/demo/gnome.jpg" alt="Gnome" id="gnome" />
    <img src="http://www.smoothdivscroll.com/images/demo/pencils.jpg" alt="Pencils" id="pencils" />
    <img src="http://www.smoothdivscroll.com/images/demo/golf.jpg" alt="Golf" id="golf" />
    <img src="http://www.smoothdivscroll.com/images/demo/river.jpg" alt="River" id="river" />
    <img src="http://www.smoothdivscroll.com/images/demo/train.jpg" alt="Train" id="train" />
    <img src="http://www.smoothdivscroll.com/images/demo/leaf.jpg" alt="Leaf" id="leaf" />
    <img src="http://www.smoothdivscroll.com/images/demo/dog.jpg" alt="Dog" id="dog" />
</div>
<div>
    <img onClick="test()" src="http://fakeimg.pl/497x330/?text=Click me" alt="Field" id="field" />
</div> 
```

我知道一个不起作用：Chrome 18.0.1025469 Android 4.1.1；SCH-I535 Build/JRO03L WebKit 版本：535.19(git@30c8f76)

[这](http://jsfiddle.net/2Hr4U/279)是 jsfiddle（单击滚动条中的第一个图像应该打开警报）：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:02:54.440

使用触摸界面时，滚动条内的可点击链接的问题是您会遇到事件冲突。将手指放在链接上应该表示“我想点击这个链接”还是表示“我把手指放在这里是因为我想开始滚动”。

我使用[jQuery.kinetic](http://the-taylors.org/jquery.kinetic/)进行触摸滚动。也许您可以查看他们的页面以查看是否有修复？

# asp.net-mvc-4 - 无法从程序集“PayPal_Merchant_SDK”加载类型“PayPal.Manager.SDKConfigHandler”

> ID：14568351
> 
> 赞同：1
> 
> 时间：2013-01-28T18:09:14.647
> 
> 标签：asp.net-mvc-4, paypal, paypal-sandbox

我正在尝试将 paypal 移动结帐集成到使用 mvc4 开发的移动 Web 应用程序中，由于某种原因，当我尝试使用函数 SetMobileExpressCheckout(xxx) 时，出现上述错误。

我在 sdk 示例中添加了 web.config 条目，并添加了对 SDK 附带的 2 个 dll 的引用，但它仍然崩溃，完整的错误消息如下：

{“为 paypal 创建配置节处理程序时出错：无法从程序集 'PayPal_Merchant_SDK' 加载类型 'PayPal.Manager.SDKConfigHandler'。（C:\Projects\Mobile Development\Print Management\Print Management\web.config 第 8 行)"}

所以看看这个，它指向下面添加的 web 配置文件中的条目，我还创建了一个带有空站点的新项目，添加了一个页面，以及所有 web.config 条目等，它可以工作美好的。

可能与mvc4有关吗？

我知道 web.config 条目很大，但我想我会把它全部放在那里，以防它是其他东西导致问题。

任何帮助将不胜感激，因为我非常接近完成这项工作，但我似乎无法找到问题所在

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    <section name="paypal" type="PayPal.Manager.SDKConfigHandler, PayPal_Merchant_SDK"/>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-Print Management-20130104084836;Integrated Security=SSPI"/>
  </connectionStrings>
  <paypal>
    <settings>
      <!-- The URL that the user must be redirected to in order to login and approve some payment actions-->
      <add name="paypalUrl" value="https://www.sandbox.paypal.com/webscr"/>
      <!-- The API endpoint -->
      <add name="endpoint" value="https://api-3t.sandbox.paypal.com/2.0"/>
      <!-- Connection timeout in milliseconds -->
      <add name="connectionTimeout" value="360000"/>
      <!-- The number of times a request must be retried if the API endpoint is   unresponsive -->
      <add name="requestRetries" value="3"/>
      <add name="binding" value="SOAP"/>
      <add name="IPAddress" value="127.0.0.1"/>
      <!-- 
      API version number. You will not normally have to change this unless you
      have a specific need to work with an older version of the API
     -->
      <add name="APIVersion" value="96.0"/>
    </settings>
    <accounts>
      <!--
      Add API credentials - 3 token or client certificate.
      You can add multiple account credentials here. The SDK will pick the first   account
      unless you specifically request an account in the service wrapper mehod.
    -->
      <account apiUsername="emailaddress" apiPassword="validpassword" apiSignature="signature" applicationId="APP-80W284485P519543T" certificateSubject="" signatureSubject=""/>
      <!--
    <account apiUsername="enduser_biz_api1.gmail.com" apiPassword="SACH3VA3C29DXGUG"
      apiCertificate="<Absolute path to paypal_cert.p12>" 
             privateKeyPassword="password" applicationId="APP-80W284485P519543T"/>
     -->
    </accounts>
  </paypal>
  <!-- Configure logging using the log4net library -->
  <log4net>
    <appender name="FileAppender" type="log4net.Appender.FileAppender">
      <file value="MerchantLog.log"/>
      <appendToFile value="true"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] %message%newline"/>
      </layout>
    </appender>
    <root>
      <level value="DEBUG"/>
      <appender-ref ref="FileAppender"/>
    </root>
  </log4net>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0"/>
    <add key="webpages:Enabled" value="false"/>
    <add key="PreserveLoginUrl" value="true"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880"/>
    </authentication>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <namespaces>
        <add namespace="System.Web.Helpers"/>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </roleManager>
    <!--
            If you are deploying to a cloud environment that has multiple web server instances,
            you should change session state mode from "InProc" to "Custom". In addition,
            change the connection string named "DefaultConnection" to connect to an instance
            of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
      -->
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection"/>
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit"/>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit"/>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"/>
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:58:00.490

贝宝文档和示例中的程序集名称错误。配置部分应引用程序集名称。所以“PayPal_Core_SDK”应该真的是“PayPalCoreSDK”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:41:25.637

有同样的问题，可以通过在 configSections 部分将 PayPal_Merchant_SDK 交换为 PayPal_Core_SDK 来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:38:26.533

好吧，在尝试让它工作到昨天深夜之后，我决定创建一个新的 mvc4 移动 Web 应用程序，只输入贝宝引用等，然后低头看，它工作了，现在我不确定出了什么问题与其他应用程序一起使用，但我认为将我的代码逐段传输可能会更快。

我只是想我会让人们知道，如果我有机会，我会再看一遍代码，因为我不喜欢被打败:-)

# mongodb - 如何在 Meteor 中收集所有标签并计算它们

> ID：14568352
> 
> 赞同：4
> 
> 时间：2013-01-28T18:09:21.950
> 
> 标签：mongodb, meteor

我需要流星中的这个 map/reduce 函数：http: [//cookbook.mongodb.org/patterns/count_tags/](http://cookbook.mongodb.org/patterns/count_tags/)

从所有条目中读取所有标签，并返回包含集合中数量的唯一标签列表

我将如何实现这一点。我正在使用独立的MongoDB。集合布局：

```
[_id] => 1234
[headline] => My First Post
[body] => Alot of stuff
[isPrivat] => 
[tags] => Array (
    [0] => test
    [1] => php
    [2] => perl
) 
```

我找到了这个问题/答案，但我不能让它做我不想做的事情：
[Meteor 是否有一个独特的集合查询？](https://stackoverflow.com/questions/14514733/does-meteor-have-a-distinct-query-for-collections)

什么是最优雅的方式来做到这一点。感谢您的时间

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T18:38:12.897

目前，最优雅的解决方案是[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/#pipeline)：

```
db.items.aggregate(
    { $unwind : "$tags" },
    { $group : {
        _id : "$tags",
        count: { $sum : 1 }
    }}
); 
```

它将输出如下结果：

```
{ "result" : [ 
    { "_id" : "perl",
      "count" : 2 }, 
    { "_id" : "php",
      "count" : 1 }, 
    { "_id" : "test",
      "count" : 1 }],
  "ok" : 1 } 
```

这是 mongodb shell 语法。我对流星不熟悉，所以我不会尝试编写一些代码。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-04T09:22:23.423

你可以试试[meteor-mongo-extensions](https://github.com/jhoxray/meteor-mongo-extensions)智能包，它为Meteor实现了MongoDB的一些聚合框架功能（免责声明：我自己没有尝试过）。

[拉取请求 #644](https://github.com/meteor/meteor/pull/644?source=cc#issuecomment-12873827)中概述了您可能会发现有用的另一个解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:22:05.237

我使用 a.js 库从这里建议了不同的代码搜索。 [Meteor 对集合有不同的查询吗？](https://stackoverflow.com/questions/14514733/does-meteor-have-a-distinct-query-for-collections)

还有这个丑陋的：

```
Template.Tag.taglist = function () {

    var taglist = Posts.find({}).distinct("tags");
    taglist = _.compact(_.flatten(_.pluck(taglist, 'tags')));
    // reformat, count and filter doublets 
    function counttags(arr) {
        var a = [], b = [], prev;
        arr.sort();
        for ( var i = 0; i < arr.length; i++ ) {
            if ( arr[i] !== prev ) {
                a.push(arr[i]);
                b.push(1);
            } else {
                b[b.length-1]++;
            }
            prev = arr[i];
        }
        result = _.zip(a,b);
        return result;
    }
    var taglist = counttags(taglist);

    //console.log(taglist);

    return taglist;
}; 
```

和（简化的）模板：

```
<template name="Tag">
    {{#each taglist}}
        {{this.[0]}}x {{this.[1]}}
    {{/each}}
 </template> 
```

它不是很漂亮。一旦聚合或 map/reduce 方法可用，我将交换代码。但是对于原型设计，这是可行的。谢谢大家。

# jquery - 获取选择状态的类名

> ID：14568356
> 
> 赞同：0
> 
> 时间：2013-01-28T18:09:35.853
> 
> 标签：jquery

我的脚本有问题。我将尝试向您解释。当我单击一个项目时，我需要删除一个跨度的属性以替换为另一个类。

当我单击列表中的一项时：

*   我得到了主题名称（ul li **span**）。
*   *如果类名（ default*或*default-act*的末尾没有“-act” ，我将其添加到选定状态。
*   对于其他项目，我删除“-act”以置于未选中状态。

因此，我需要一个*主题为 Name* + '-act' 的iten，而其他的则没有'-act'。

**这是我的代码：http: [//jsfiddle.net/DQTKX/21/](http://jsfiddle.net/DQTKX/21/)**

**HTML**

```
<section id="createform">
    <ul>
      <li id="theme_1">
        <span class="default-act">Default</span>
        <h3>Default</h3>
      </li>
      <li id="theme_2">
        <span class="food">Food</span>
        <h3>Food</h3>
      </li>
      <li id="theme_3">
        <span class="supermarket">Supermarket</span>
        <h3>Supermarket</h3>
      </li>
      <li id="theme_4">
        <span class="travel">Travel</span>
        <h3>Travel</h3>
      </li>
    </ul>
</section> 
```

**jQuery**

```
$('ul li').on('click', function(){
    var themeName = $(this).find('span').attr('class');  

    $(this)
        .removeClass(themeName)
        .addClass(themeName + '-act');

    $(this).not('active')
        .removeClass(themeName + '-act')
        .addClass(themeName);
}); 
```

注意事项：*默认情况下，第一个项目有一个带有默认行为的跨度，有一个红色图标，当我点击另一个项目时，我需要删除“-act”并将其添加到选择项目上。*

# 编辑

所以，我刚刚更新了一个更好的理解。不用担心超市和旅行图标。此外，我删除了

*   ，很混乱。

    [http://jsfiddle.net/DQTKX/21/](http://jsfiddle.net/DQTKX/21/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:23:10.613

你可以这样做：

```
$('ul li').on('click', function(){
    var className = $("span", this).attr("class");
    if(className.indexOf("-act")<=0){       
        $("#createform ul li span[class*='-act']").each(function(){this.className = this.className.replace("-act", "");})
        $("span", this).attr("class", className + "-act"    ); 
    }

}); 
```

[http://jsfiddle.net/DQTKX/22/](http://jsfiddle.net/DQTKX/22/)

但就我而言，最好采用下一个方法：

```
$('ul li').on('click', function(){
    if(!$("span", this).hasClass("act")){
    $("#createform ul li span.act").removeClass("act");
        !$("span", this).addClass("act")
    }
}); 
```

为了让它工作，你需要改变你的 css（只显示了一些部分）：

```
#createform li .default {
    margin: 35px auto;
    width: 69px;
    height: 114px;
    background-position: 0 0;
}
#createform li .default.act {
    background-position: 0 -114px;
} 
```

和 HTML：

```
<li id="theme_1">
        <span class="default act">Default</span>
        <h3>Default</h3>
      </li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:20:48.383

它可以以更简单的方式完成，所以检查小提琴：http: [//jsfiddle.net/DQTKX/13/](http://jsfiddle.net/DQTKX/13/)

```
$('ul li').on('click', function(){
    $(this).addClass('active').siblings().removeClass('active');
}); 
```

我还对您的 CSS 进行了一些更改。

# c# - SqlCommand 参数没有正确替换

> ID：14568360
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:09:55.240
> 
> 标签：c#, sql, c#-4.0, parameters, sqlparameter

```
private SqlCommand createSQLQuery(SqlCommand command)
{
    string[] allTheseWords;
    if (textBoxAllTheseWords.Text.Length > 0)
    {
        allTheseWords = textBoxAllTheseWords.Text.Split(' ');
        string SQLQuery = "SELECT distinct [skullbase].[dbo].[patients].[name], [skullbase].[dbo].[patients].[dos], [skullbase].[dbo].[patients].[ACC2], [SKULLbase].[dbo].[fullreport].[mrn1], [SKULLbase].[dbo].[fullreport].[ACC], [skullbase].[dbo].[fullreport].[fullreport] FROM [skullbase].[dbo].[fullreport], [skullbase].[dbo].[patients] WHERE ";
        int i = 1;
        foreach (string word in allTheseWords)
        {
            command.Parameters.Add("@word" + i.ToString(), SqlDbType.Text).Value = word;
            SQLQuery = SQLQuery + " [skullbase].[dbo].[fullreport].[fullreport] LIKE @word" + i.ToString() + " AND ";
            i++;
        }
        SQLQuery = SQLQuery + " skullbase.dbo.patients.ACC2 = skullbase.dbo.fullreport.ACC";
        command.CommandText = SQLQuery;
    }
    MessageBox.Show(command.CommandText.ToString());
    return command;
} 
```

以上是我的查询。“单词”一词没有被实际值取代。

* * *

```
allTheseWords = textBoxAllTheseWords.Text.Split(' '); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:17:26.160

对于初学者，当您在 SQL CommandText 中引用您的参数引用时（例如 ... `[fullreport] = '@word'`...），您实际上只是在使用字面值 value `'@word'`。它不会被解释为参数化查询。为此，您只需使用 ... `[fullreport] = @word`...）

其次，我不认为您可以像在循环中那样分配具有相同参数名称的多个参数。您添加的每个参数都应该有一个唯一的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:16:53.250

您为每个单词使用相同的参数名称。您应该为每个人使用不同的名称。您可能会考虑附加一个索引或其他类似的东西，以使其成为唯一的参数名称。

# javascript - 两个轮询之间的长轮询客户端“时间间隔”

> ID：14568363
> 
> 赞同：0
> 
> 时间：2013-01-28T18:10:02.017
> 
> 标签：javascript, ajax, websocket, long-polling

假设我有一个服务器支持客户端长轮询。那么我的客户端代码是这样的：

```
var polling = function() {
    $.ajax({
        url: "/polling"
    }).done(function(data) {
        // polling again
        polling();
        // process the pushed data
        ...
    });
}
polling(); 
```

当我想在客户端不断轮询“/polling”时向客户端推送某些内容时，这应该可以工作。

但是，您可能会注意到客户端收到推送数据和下一次轮询到达服务器之间存在“时间间隔”。这个“时间间隔”中的数据将会丢失。

有多种服务器端解决方法可以避免此问题。但我想知道客户端是否有任何解决方法？如： * 客户端能否保持长轮询请求始终连接？我发现 Gmail 应该做一些这样的技巧。我在 gtalk 中聊天，但没有看到“/bind”请求中断。* ajax 是否应该在传输时接收到不完整的数据？然后连接可以永远连接。* websocket 应该工作吗？如果是这样，没有 HTML5 我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:12:58.030

你可能想考虑像[Pusher](http://pusher.com/)这样的东西，它会让你在处理这些事情时更轻松（因为它们为你提供了一个库，可以在一个很好的包中处理所有这些）。

# github - Gollum wiki github - 您的分支领先于 'origin/master' 1 个提交

> ID：14568364
> 
> 赞同：1
> 
> 时间：2013-01-28T18:10:04.367
> 
> 标签：github, gollum-wiki

我在将 Gollum wiki 与 github 远程 wiki 页面一起使用时遇到问题。

我为这个[项目创建了一个 wiki，并在](https://github.com/ricardogarfe/python-sample-test)[wiki git repo](https://github.com/ricardogarfe/python-sample-test/wiki)中创建 Wiki 页面。

使用 ssh 克隆 repo：

```
$ git clone git@github.com:ricardogarfe/python-sample-test.wiki.git 
```

安装咕噜：

```
$ sudo gem install gollum 
```

在 wiki 存储库中运行 gollum：

```
$ cd python-sample-test.wiki.git
$ gollum 
```

编辑主页并保存评论。

然后我跑了：

```
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
# nothing to commit (working directory clean) 
```

因此，当我使用 gollum 编辑 wiki 页面时，我无法推送到原点。我忘记了任何配置？用户，组在 linux 中进行提交，通过 gollum 自动推送？

使用：

*   红宝石 1.8.7
*   宝石 1.8.15

谢谢！里卡多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:38:17.597

我没有使用 gollum，所以这可能有点偏离基础，但是您的输出表明有一个尚未推送的提交：

```
# Your branch is ahead of 'origin/master' by 1 commit. 
```

如果您查看`git log -p -1`它的输出是否包含您所做的更改？如果是这样，只是`git push`和你应该设置。

# java - 在 java 中运行两次 GUI 应用程序

> ID：14568367
> 
> 赞同：1
> 
> 时间：2013-01-28T18:10:16.550
> 
> 标签：java, spring, swing

我在java中有一个小的gui swing应用程序（聊天），我需要多次运行它，每次它应该给我一个GUI聊天窗口，

它第一次运行良好，当我尝试在 IntelliJ 中再次运行相同的应用程序时，它不会再生成 GUI 窗口

任何帮助都非常感谢您提前谢谢

```
public static void main(String[] args) throws IOException, InterruptedException, SQLException {
    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("sconfig.xml");
    CClient client = (CClient) context.getBean("simpleClient");
    client.init();
} 
```

应用环境：

```
 <bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL">
        <!-- value>tcp://localhost:61616</value -->
        <value>vm://localhost</value>
    </property>
</bean>

<!-- <bean id="pooledJmsConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory"
      destroy-method="stop">
    <property name="connectionFactory" ref="jmsConnectionFactory" />
</bean>-->
<bean id="destination" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="jmsExample" />
</bean>

<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="jmsConnectionFactory" />
</bean>

<bean id="simpleClient" class="com.CClient">
    <property name="template" ref="jmsTemplate"/>
    <property name="destination" ref="destination" />
</bean>

<bean id="messageListener" class="com.ExampleListener" />

<!-- and this is the message listener container -->
<bean id="jmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
    <property name="destination" ref="destination"/>
    <property name="messageListener" ref="messageListener" />
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:39:11.647

没有理由启动一个应用程序一次就可以正常运行，而第二次启动它就没有任何作用，因为它们是在不同的 JVM 中启动的。如果第一次启动尝试打开 TCP 套接字或锁定文件，而第二次启动尝试做同样的事情，则可能会出现问题。

但我认为解释是您选中了*Run Configuration*中的“仅单个实例”复选框，该复选框恰好用于使 IntelliJ 一次仅启动应用程序实例的一个实例。

如果不是这种情况，请提供更多详细信息：启动第二个应用程序时会发生什么？你有例外吗？如果是这样，堆栈跟踪是什么？如果没有，您的应用程序是做什么的？

# python - 扭曲的延迟以不希望的方式触发

> ID：14568370
> 
> 赞同：1
> 
> 时间：2013-01-28T18:10:36.617
> 
> 标签：python, asynchronous, twisted

我有以下代码

```
# logging
from twisted.python import log

import sys

# MIME Multipart handling
import email
import email.mime.application
import uuid

# IMAP Connection
from twisted.mail import imap4
from twisted.internet import protocol

#SMTP Sending
import os.path
from OpenSSL.SSL import SSLv3_METHOD
from twisted.internet import ssl
from twisted.mail.smtp import ESMTPSenderFactory
from twisted.internet.ssl import ClientContextFactory
from twisted.internet.defer import Deferred
from twisted.internet import reactor

#class AccountsManager(object):

def connectToIMAPServer(imap_server, username, password):
    factory = IMAP4ClientFactory(username, password, login_insecure = True)

    host, port = imap_server.split(":")

    # connect to reactor
    if port == '993':
        reactor.connectSSL(host, int(port), factory, ssl.ClientContextFactory())
    else:
        if not port:
            port = 143
        reactor.connectTCP(host, int(port), factory)

    d = factory.deferred
    d.addCallback(lambda r: factory.proto)

    return d

class IMAP4Client(imap4.IMAP4Client):
    """
        A client with callbacks for greeting messages from an IMAP server.
        """
    greetDeferred = None

    def serverGreeting(self, caps):
        self.serverCapabilities = caps
        if self.greetDeferred is not None:
            d, self.greetDeferred = self.greetDeferred, None
            d.callback(self)

class IMAP4ClientFactory(protocol.ClientFactory):
    usedUp = False

    protocol = IMAP4Client

    def __init__(self, username, password, mailbox = "INBOX", login_insecure = False):
        self.ctx = ssl.ClientContextFactory()

        self.username = username
        self.password = password
        self.mailbox  = mailbox
        self.login_insecure = login_insecure

        self.deferred = Deferred()

    def buildProtocol(self, addr):
        """
            Initiate the protocol instance. Since we are building a simple IMAP
            client, we don't bother checking what capabilities the server has. We
            just add all the authenticators twisted.mail has.  Note: Gmail no
            longer uses any of the methods below, it's been using XOAUTH since
            2010.
            """
        assert not self.usedUp
        self.usedUp = True

        p = self.protocol(self.ctx)
        p.factory = self

        p.greetDeferred = self.deferred

        p.registerAuthenticator(imap4.PLAINAuthenticator(self.username))
        p.registerAuthenticator(imap4.LOGINAuthenticator(self.username))
        p.registerAuthenticator(imap4.CramMD5ClientAuthenticator(self.username))

        self.deferred.addCallback(self.GreetingCallback)
        self.deferred.addErrback(self.GreetingErrback)

        self.proto = p

        return p

    def GreetingCallback(self, result):
        print "Secure Login"
        auth_d = self.proto.authenticate(self.password)
        auth_d.addCallback(self.AuthenticationCallback)
        auth_d.addErrback(self.AuthenticationErrback)

        return auth_d # attach it to the main deferred

    def GreetingErrback(self, error):
        log.err(error)
        self.CloseConnection()
        return error

    def AuthenticationCallback(self, result):
        print "Selecting Mailbox"
        d = self.proto.examine(self.mailbox)
        return d

    def AuthenticationErrback(self, failure):
        if self.login_insecure:
            failure.trap(imap4.NoSupportedAuthentication)
            return self.InsecureLogin()
        else:
            return error

    def InsecureLogin(self):
        print "Insecure Login"
        d = self.proto.login(self.username, self.password)
        d.addCallback(self.AuthenticationCallback)
        return d

    def CloseConnection(self):
        self.proto.transport.loseConnection()

    def clientConnectionFailed(self, connector, reason):
        d, self.deferred = self.deferred, None
        d.errback(reason)

class MailServer(object):
    "Manages a server"

    size = 0
    used_space = 0

    def __init__(self, smtp_server, imap_server, username, password):
        self.smtp_server, self.smtp_port = smtp_server.split(":")
        self.imap_server, self.imap_port = imap_server.split(":")
        self.username = username
        self.password = password

        self.imap_connection = IMAP4ClientFactory(username, password)

    def upload_data(self, data):
        """
        Uploads data to email server returns deferred that will return with the imap uid
        """

        # Create a text/plain message
        id = str(uuid.uuid4()).upper()

        msg = email.mime.Multipart.MIMEMultipart()
        msg['Subject'] = 'GMA ID: %s' % id
        msg['From'] = self.email_address
        msg['To'] = self.email_address

        # The main body is just another attachment
        body = email.mime.Text.MIMEText("GMA ID: %s" % (self.uuid_id))
        msg.attach(body)
        att = email.mime.application.MIMEApplication(data,_subtype="raw")
        att.add_header('Content-Disposition','attachment',filename = os.path.basename(self.filename))
        msg.attach(att)

        # Create a context factory which only allows SSLv3 and does not verify
        # the peer's certificate.
        contextFactory = ClientContextFactory()
        contextFactory.method = SSLv3_METHOD

        d = Deferred()

        mime_obj = StringIO(str(msg))

        senderFactory = ESMTPSenderFactory(
                                           self.username,
                                           self.password,
                                           self.email_address,
                                           self.email_address,
                                           mime_obj,
                                           d,
                                           contextFactory=contextFactory)

        d.addCallback(lambda r: self.email_sent(id, int(self.parts)) )
        d.addErrback(self.email_error)

        reactor.connectTCP(self.smtp_server, self.smtp_port, senderFactory)

        d.addCallback(self.upload_success, *args, **kw)
        d.addErrback(self.upload_error, 1)

        return d

    def upload_success(self, result):
        print "upload was succesful!"

    def upload_error(self, result):
        print "upload error"

    def download_data(self, uid):
        """
        Downloads data from the email server returns a deferred that will return with the data
        """
        print "uid"

if __name__ == "__main__":
    log.startLogging(sys.stdout)
    d = connectToIMAPServer("imap.gmail.com:993", "username", "password")
    def f(s):
        print s

    d.addCallback(lambda r: f("These are fired before the auth and examine callbacks, why?"))
    d.addCallback(lambda r: f("These are fired before the auth and examine callbacks, why?"))
    reactor.run() 
```

该类假设处理登录和选择邮箱并很好地返回一个准备使用的 IMAP 原型，但是底部的两个回调在其他回调之前被触发，我明白为什么，回调是在其他回调之前添加的，因为 buildProtocol 没有还没有被调用，那么处理这个问题的最佳方法是什么，只需在**init**中添加一个“持有”第一个位置的虚拟回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:23:10.877

```
from twisted.internet.endpoints import TCP4ClientEndpoint
d = TCP4ClientEndpoint(reactor, host, int(port)).connect(factory) 
```

和

```
d.addCallback(lambda r: factory.deferred) 
```

代替

```
d = factory.deferred 
```

`connectToIMAPServer`应该这样做 -只有在`factory.deferred`协议准备好后才会返回您。（[关于编写客户端的扭曲文档](http://twistedmatrix.com/documents/11.1.0/core/howto/clients.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:56:38.893

我最终编辑了代码，只是管理了延迟的回调或 errback 内部更新代码

```
# logging
from twisted.python import log

import sys

# MIME Multipart handling
import email
import email.mime.application
import uuid

# IMAP Connection
from twisted.mail import imap4
from twisted.internet import protocol

#SMTP Sending
import os.path
from OpenSSL.SSL import SSLv3_METHOD
from twisted.internet import ssl
from twisted.mail.smtp import ESMTPSenderFactory
from twisted.internet.ssl import ClientContextFactory
from twisted.internet.defer import Deferred
from twisted.internet import reactor

#class AccountsManager(object):

def connectToIMAPServer(imap_server, username, password):
    factory = IMAP4ClientFactory(username, password, login_insecure = True)

    host, port = imap_server.split(":")

    # connect to reactor
    if port == '993':
        reactor.connectSSL(host, int(port), factory, ssl.ClientContextFactory())
    else:
        if not port:
            port = 143
        reactor.connectTCP(host, int(port), factory)

    return factory.deferred

class IMAP4Client(imap4.IMAP4Client):
    """
        A client with callbacks for greeting messages from an IMAP server.
        """
    greetDeferred = None

    def serverGreeting(self, caps):
        self.serverCapabilities = caps
        if self.greetDeferred is not None:
            d, self.greetDeferred = self.greetDeferred, None
            d.callback(self)

class IMAP4ClientFactory(protocol.ClientFactory):
    usedUp = False

    protocol = IMAP4Client

    def __init__(self, username, password, mailbox = "INBOX", login_insecure = False):
        self.ctx = ssl.ClientContextFactory()

        self.username = username
        self.password = password
        self.mailbox  = mailbox
        self.login_insecure = login_insecure

        # called when the protocol is all set up or there is an error setting it up
        self.deferred = Deferred()

    def buildProtocol(self, addr):
        """
            Initiate the protocol instance. Since we are building a simple IMAP
            client, we don't bother checking what capabilities the server has. We
            just add all the authenticators twisted.mail has.  Note: Gmail no
            longer uses any of the methods below, it's been using XOAUTH since
            2010.
            """
        assert not self.usedUp
        self.usedUp = True

        p = self.protocol(self.ctx)
        p.factory = self

        # deferred for when the IMAP Greeting is done
        p.greetDeferred = Deferred()

        p.registerAuthenticator(imap4.PLAINAuthenticator(self.username))
        p.registerAuthenticator(imap4.LOGINAuthenticator(self.username))
        p.registerAuthenticator(imap4.CramMD5ClientAuthenticator(self.username))

        p.greetDeferred.addCallback(self.GreetingCallback)
        p.greetDeferred.addErrback(self.GreetingErrback)

        self.proto = p

        return p

    def GreetingCallback(self, result):
        log.msg("Succesfully sent IMAP Greeting.")
        auth_d = self.proto.authenticate(self.password)
        auth_d.addCallback(self.AuthenticationCallback)
        auth_d.addErrback(self.AuthenticationErrback)

        return auth_d

    def GreetingErrback(self, error):
        log.msg("Problem sending greeting")
        log.err(error)
        self.CloseConnection()
        self.deferred.errback(error)

    def AuthenticationCallback(self, result):
        log.msg("Authenticated")
        log.msg("Selecting Mailbox")
        d = self.proto.examine(self.mailbox)
        d.addCallback(self.MailboxSelectCallback)
        d.addErrback(self.MailboxSelectErrback)
        return d

    def AuthenticationErrback(self, failure):
        log.msg("Unable to authenticate securly")
        if self.login_insecure:
            log.msg("Trying to login insecurly")
            failure.trap(imap4.NoSupportedAuthentication)
            return self.InsecureLogin()
        else:
            log.err(failure)
            self.deferred.errback(failure)

    def InsecureLogin(self):
        log.msg("Logging in insecurly")
        d = self.proto.login(self.username, self.password)
        d.addCallback(self.AuthenticationCallback)
        return d

    def MailboxSelectCallback(self, result):
        # connected and protocol set up
        log.msg("IMAP4 protocol setup")
        self.deferred.callback(self.proto)

    def MailboxSelectErrback(self, error):
        log.msg("Cannot select mailbox %s" % self.mailbox)
        log.err(error)
        self.deferred.errback(error)

    def CloseConnection(self):
        self.proto.transport.loseConnection()

    def clientConnectionFailed(self, connector, reason):
        log.msg("Connecting was lost")
        log.err(reason)
        d, self.deferred = self.deferred, None
        d.errback(reason)

class MailServer(object):
    "Manages a server"

    size = 0
    used_space = 0

    def __init__(self, smtp_server, imap_server, username, password):
        self.smtp_server, self.smtp_port = smtp_server.split(":")
        self.imap_server, self.imap_port = imap_server.split(":")
        self.username = username
        self.password = password

        self.imap_connection = IMAP4ClientFactory(username, password)

    def upload_data(self, data):
        """
        Uploads data to email server returns deferred that will return with the imap uid
        """

        # Create a text/plain message
        id = str(uuid.uuid4()).upper()

        msg = email.mime.Multipart.MIMEMultipart()
        msg['Subject'] = 'GMA ID: %s' % id
        msg['From'] = self.email_address
        msg['To'] = self.email_address

        # The main body is just another attachment
        body = email.mime.Text.MIMEText("GMA ID: %s" % (self.uuid_id))
        msg.attach(body)
        att = email.mime.application.MIMEApplication(data,_subtype="raw")
        att.add_header('Content-Disposition','attachment',filename = os.path.basename(self.filename))
        msg.attach(att)

        # Create a context factory which only allows SSLv3 and does not verify
        # the peer's certificate.
        contextFactory = ClientContextFactory()
        contextFactory.method = SSLv3_METHOD

        d = Deferred()

        mime_obj = StringIO(str(msg))

        senderFactory = ESMTPSenderFactory(
                                           self.username,
                                           self.password,
                                           self.email_address,
                                           self.email_address,
                                           mime_obj,
                                           d,
                                           contextFactory=contextFactory)

        d.addCallback(lambda r: self.email_sent(id, int(self.parts)) )
        d.addErrback(self.email_error)

        reactor.connectTCP(self.smtp_server, self.smtp_port, senderFactory)

        d.addCallback(self.upload_success, *args, **kw)
        d.addErrback(self.upload_error, 1)

        return d

    def upload_success(self, result):
        print "upload was succesful!"

    def upload_error(self, result):
        print "upload error"

    def download_data(self, uid):
        """
        Downloads data from the email server returns a deferred that will return with the data
        """
        print "uid"

if __name__ == "__main__":
    log.startLogging(sys.stdout)
    d = connectToIMAPServer("imap.gmail.com:993", "email", "password")
    def f(s):
        print s

    d.addCallback(lambda r: f("These are fired before the auth and examine callbacks, why?"))
    d.addCallback(lambda r: f("These are fired before the auth and examine callbacks, why?"))
    reactor.run() 
```

# windows - 我正在尝试使用 Windows 批处理文件从标准输入（到日志文件）中为数据添加时间戳

> ID：14568372
> 
> 赞同：6
> 
> 时间：2013-01-28T18:10:52.147
> 
> 标签：windows, batch-file, pipe

我正在使用 wget 的 DOS 端口从 API 收集数据，以生成日志文件的数据（稍后将对其进行分析）。API 提供了我需要的所有信息，除了当前时间（它提供了数据流开始时的时间，但之后不再提供）。

API 最初通常提供 10 行数据，然后每 20-30 秒提供一行。

我正在尝试对该输出添加时间戳并将其复制到日志文件中 - 我不介意时间戳与输出的其余部分或之前的行位于同一行。

我首先从这个批处理文件开始：

addtimes.bat：

```
@echo off >nul
:start
set /p input="":

echo %time% 
echo %input%

goto:start 
```

（称为“wget..... | addtimes.bat > log.log”）

然而，这种丢弃的数据会出现 - 许多数据行的开头都丢失了。

我看过这里并意识到我应该使用 for 循环。

addtimes2.bat：

```
@echo off
cls
setlocal EnableDelayedExpansion
for /F "tokens=*" %%a in ('more') do ( 
echo !time! %%a )
) 
```

我尝试过启用延迟扩展和不启用延迟扩展。

我似乎无法使用不同的时间戳一次传递一行信息 - 一旦我关闭数据流，我所有的行都会获得相同的时间戳。

典型的输入数据形式如下：

```
[1,"219","265",14528,1359031137000,1359031137000]
[1,"6594","358",18188,1359031019000,1359031019000]
[1,"690","94",15920,1359031534000,1359031534000]
[1,"25164","102",2129,1359031457000,1359031457000]

[1,"3488","329",2109,1359030868000,1359030868000]

[1,"37247","6",11506,1359031223000,1359031223000] 
```

您可能会注意到数据中有 UTC 时间，但它们不是当前时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:10:54.237

我不相信您可以使用纯原生批处理获得您想要的结果。您所有时间都相同的原因是 FOR /F 循环在整个输入流被缓冲之前不会处理任何输入行（管道左侧的命令已完成）。FOR /F 命令一直等到所有输入都接收完毕，然后疯狂地转储每一行。如果输入流足够大，您会在时间上得到轻微的变化，但没有什么能接近于原始命令生成每一行的时间。

这是一个混合 JScript/批处理脚本，可以满足您的需求。它可以作为一个直接的 JScript 文件正常工作，但是您需要明确使用 CSCRIPT。混合方法使实用程序更方便。

将其命名为 addtimes.bat 并像以前一样使用它。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Batch portion ***********
@echo off
cscript //E:JScript //nologo "%~f0"
exit /b 0

************* JScript portion **********/
while (!WScript.StdIn.AtEndOfStream) {
  var ts = new Date()
  var ms = (ts.getTime() % 1000)
  WScript.Stdout.WriteLine(
    ts.getFullYear() + "-" +
    ((ts.getMonth()<9)?"0":"") + (ts.getMonth()+1) + "-" +
    ((ts.getDate()<10)?"0":"") + ts.getDate() + " " +
    ((ts.getHours()<10)?"0":"") + ts.getHours() + ":" +
    ((ts.getMinutes()<10)?"0":"") + ts.getMinutes() + ":" +
    ((ts.getSeconds()<10)?"0":"") + ts.getSeconds() + "." +
    ((ms<10)?"00":((ms<100)?"0":"")) + ms + " - " +
    WScript.StdIn.ReadLine()
  );
} 
```

**编辑**

wmz 有一个非常聪明***和危险***的解决方案。该解决方案可以简化 - 无需使用 Autorun。

***警告*** *- 正如 wmz 所说，如果输出中的任何行以可执行命令或程序名称开头，则以下解决方案可能会产生非常糟糕的后果！我不建议实际使用此解决方案，但我觉得它非常有趣。*

```
(echo @prompt $D $T -$S & YourCommandHere )|cmd 2>nul|findstr /rbc:"../../.... ..:..:..\... - " >log.log 
```

添加 FINDSTR 管道以去除 CMD 标头信息、初始 PROMPT 命令以及 CMD 在每个“命令”之后插入的不需要的空行。FINDSTR 正则表达式可能需要更改以匹配您选择的提示和区域设置的细节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T22:55:40.770

***请注意：这可能有很多副作用（或者可能根本不起作用，或者使您的系统不稳定等）并且未经测试。它比其他任何东西都更适合批量锻炼***

**编辑：**请参阅 debenham 的答案以了解使用此想法的精致方式。

1.  如果您愿意，请将提示设置为时间 ( `prompt $T`) 或日期时间 ( `prompt $D $T`)。您必须`Autorun`在注册表 ( `HKEY_CURRENT_USER\software\Microsoft\Command Processor`) 中的键中执行此操作，因此它是默认设置。如果没有 Autorun 键，则创建它（它包含打开 cmd 提示符时执行的命令）
2.  启动 cmd 提示符，然后将命令的输出通过管道传输到另一个`cmd.exe`，并将其输出重定向到文件：（
    `more | cmd 2>nul >timestamped.log`您将在我使用的地方使用您的命令`more`）。使用`more`, 输入：

> 这是一条带有
> 时间戳的消息 ^Z

在 timestamped.log 中生成以下行（在两行带有 cmd 处理器版本信息之后）：

> 23:19:57,17_这是一条消息
> 23:19:59,95_带有时间戳

这是有效的，因为 cmd 将尝试执行您的日志条目。这失败了（并且错误消息被抑制/发送到 nul），但同时与提示（时间/日期）一起回显它。

**如果您的日志消息没有被引用（*或者更一般地说，如果您不确定它们的格式，或者它们不是在您的直接控制下创建的），***您必须非常小心**- 如果您的行恰好以一个单词开头有效命令 - 它将被执行！**

# c# - 如何反序列化此对象 JSON？

> ID：14568373
> 
> 赞同：0
> 
> 时间：2013-01-28T18:10:56.090
> 
> 标签：c#, json, serialization, hammock

我需要像这样反序列化一个json：

```
{"success":true,"loggedin":false,"data":{"accessTime":1285167129}} 
```

我的对象是：

```
public class Heartbeat
{
    public bool Success { get; set; }
    public bool Loggedin { get; set; }

    public HeartbeatData Data { get; set; }
}

public class HeartbeatData
{
    public int AccessTime { get; set; }
} 
```

但是 HeartbeatData 不会序列化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:24:17.557

尝试使用[JSON.net](http://nuget.org/packages/newtonsoft.json)看看是否可行，然后我们看看是 Hammock 还是 C# 导致了问题。

# ios - 是否有任何公开文档说 Facebook 测试用户不使用 iOS 6 集成？

> ID：14568378
> 
> 赞同：3
> 
> 时间：2013-01-28T18:11:27.530
> 
> 标签：ios, facebook, integration

Facebook 测试用户不应该能够与真实的人交朋友，并且还有其他重大限制。

它们是通过将它们绑定到原始应用程序来创建的，尽管它们稍后可以与其他应用程序相关联。

这是我记得上次创建测试 facebook 用户时阅读的信息。

他们使用单点登录，但在升级到“Facebook SDK for iOS 3.x”以获得支持的 iOS 集成后，我发现这些测试用户不能使用 iOS 6 Facebook 集成，无论是在模拟器中还是在设备。

任何人都可以通过文档确认这一点吗？考虑到术语的数量，搜索起来有点困难，而且我已经搜索了很长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:23:08.370

在发布 Facebook 错误报告后，它被标记为与活跃的高优先级问题重复。

**iOS6 Facebook 集成不适用于测试用户**

[http://developers.facebook.com/bugs/452331201480283](http://developers.facebook.com/bugs/452331201480283)

**编辑（2013 年 8 月 17 日）**

我刚刚注意到这个 Facebook 错误在本月 12 日被标记为已修复。至少对我来说，快速测试确认它是固定的。

# php - 爆炸字符串会导致奇怪的数组

> ID：14568389
> 
> 赞同：0
> 
> 时间：2013-01-28T18:12:09.860
> 
> 标签：php, string, explode

我有一个看起来像这样的字符串，`"thing aaaa"`我`explode()`用来将字符串拆分为一个数组，其中包含所有用空格分隔的单词。我执行这样的事情`explode (" ", $string)`。

我不知道为什么，但结果是：`["thing","","","","aaaa"]`; 有谁知道为什么我在那里得到三个空数组？

**编辑：**这是我使用的功能：

```
public function query_databases() {

        $arguments_count = func_num_args();
        $status = [];
        $results = [];
        $split =[];

        if ($arguments_count > 0) {

            $arguments = func_get_args();

            $iterator = new RecursiveIteratorIterator(new RecursiveArrayIterator($arguments));

            foreach ($iterator as $key => $value) {
                array_push($results, trim($value));
            }
            unset($value);

            $filtered = $this->array_unique_values($results, "String");

            foreach ($filtered as $key => $string) {

                if (preg_match('/\s/',$string)) {
                    array_push($split, preg_split("/\s/", $string));
                } else {
                    array_push($split, $string);
                }

            }
            unset($string);

            echo "Terms : ".json_encode($split)."<br>";

            foreach ($filtered as $database) {

                echo "Terms : ".json_encode()."<br>";
                $_action = $this->get_database($database);
                echo "Action : ".json_encode($_action)."<br>";
            }
            unset($database);

        } else {
            return "[ Databases | Query Databases [ Missing Arguments ] ]";
        }

    } 
```

可能是其他东西弄乱了结果？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:17:09.863

如果您希望按空格创建数组，您可能需要考虑 preg_split：

```
preg_split("/\s+/","thing aaaa"); 
```

这给了你数组（“东西”，“aaaa”）；

[取自这里。](http://php.net/manual/en/function.explode.php#37467)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:20:19.493

试试这个：

```
$str = str_replace(" ", ",", $string);
explode(",",$str); 
```

这样，如果您输出 4 个逗号，您可以查看是否只是空格给您带来了问题，这是因为您有 4 个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:43:55.463

正如@Barmar 所说，我`trim()`只是删除了单词前后的所有空格，这就是为什么我在数组中的值比我应该拥有的更多的原因。

我发现这个小片段：`preg_replace( '/\s+/', ' ', $value )`; 替换我的`trim()`会解决它:)

# sql-server-2008 - 如何有条件地插入表格

> ID：14568393
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:12:25.130
> 
> 标签：sql-server-2008, select, insert

我有一个表 tbl1(col1, col2, col3, ..., coln)，col1 和 col2 一起是主键。我正在尝试使用以下查询将临时表 #t 中的记录插入到 tbl1

```
insert into tbl1(col1, col2, col3, ..., colm)
select #t.col1, #t.col2, #t.col3, ..., #t.colm
from #t where col2 <> #t.col2 
```

但是，我收到以下错误，无法绑定多部分标识符“tblDailyBalanceHistory.BalanceDate”。如何修复我的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:24:16.043

我认为您的问题在于您的 WHERE 标准。你不能说 col2 <> #t.col2 因为 col2 还没有被定义。

尝试这样的事情：

```
insert into tbl1(col1, col2, col3, ..., colm)
select #t.col1, #t.col2, #t.col3, ..., #t.colm
from #t 
   left join tbl1 on #t.col2 = tbl1.col2
where tbl1.col2 is null 
```

祝你好运。

# linux - ksh 将命令的结果存储到变量中

> ID：14568396
> 
> 赞同：4
> 
> 时间：2013-01-28T18:12:31.233
> 
> 标签：linux, command, ksh

我想将命令的结果存储到我的 shell 脚本中的变量中。我似乎无法让它工作。我想要目录中最近日期的文件。

```
PRODUCT= 'ls -t /some/dir/file* | head -1 | xargs -n1 basename' 
```

它行不通

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:20:32.477

你有两个选择，`$`或者 backsticks ```。

1)`x=$(ls -t /some/dir/file* | head -1 | xargs -n1 basename)`

或者

2)`x=`ls -t /some/dir/file* | head -1 | xargs -n1 basename``

```
echo $x 
```

**编辑：**删除（2）不必要的括号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T18:16:40.107

您遇到的问题是命令需要用反引号而不是单引号括起来。这称为“命令替换”。

Bash 允许您使用`$()`命令替换，但这并非在所有 shell 中都可用。我不知道它是否在 KSH 中可用；如果是，它可能并非在所有版本中都可用。

如果`$()`语法在您的 ksh 版本中可用，则绝对应该使用它；它更容易阅读（反引号太容易与单引号混淆）；倒钩也很难筑巢。

但是，这仅解决了您的命令的一个问题：`ls`返回目录和文件，因此如果在指定目录中修改的最新内容是子目录，那么您将看到它。

如果您只想查看文件，我建议使用以下某些版本（我使用的是支持默认变量的 Bash，您可能不得不使用 的语法`$1`）

```
lastfile () 
{ 
    find ${1:-.} -maxdepth 1 -type f -printf "%T+ %p\n" | sort -n | tail -1 | sed 's/[^[:space:]]\+ //'
} 
```

这在目录上运行 find ，并且只从该目录中提取文件。它像这样格式化所有文件：

```
2012-08-29+16:21:40.0000000000 ./.sqlite_history
2013-01-14+08:52:14.0000000000 ./.davmail.properties
2012-04-04+16:16:40.0000000000 ./.DS_Store
2010-04-21+15:49:00.0000000000 ./.joe_state
2008-09-05+17:15:28.0000000000 ./.hplip.conf
2012-01-31+13:12:28.0000000000 ./.oneclick 
```

对列表进行排序，取最后一行，并删除第一个空格之前的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:16:23.433

你想要`$()`（[首选](https://stackoverflow.com/questions/9405478/command-substitution-backticks-or-dollar-sign-paren-enclosed)）或反引号（``）（旧样式），而不是单引号：

```
PRODUCT=$(ls -t /some/dir/file* | head -1 | xargs -n1 basename) 
```

或者

```
PRODUCT=`ls -t /some/dir/file* | head -1 | xargs -n1 basename` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T18:22:18.677

您需要两个引号以确​​保保留名称，即使它包含空格，并且如果您以后想要多个文件，并且 "$(..)" 在后台运行命令

我相信您还需要 ls 的“-1”选项，否则每行可能有多个名称（您只保留 1 行，但可能是多个文件）

```
PRODUCT="$(ls -1t /some/dir/file* | head -1 | xargs -n1 basename)" 
```

请不要在“=”变量分配周围放置空格（正如我在此处的其他解决方案中看到的那样），因为它也不是很兼容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-02T20:56:38.677

我会做类似的事情：

您的版本已更正：

```
PRODUCT=$(ls -t /some/dir/file* | head -1 | xargs -n1 basename) 
```

或更简单：

```
PRODUCT=$(cd /some/dir && ls -1t file* | head -1) 
```

*   切换到目录
*   每行列出一个文件名并按时间/日期排序
*   抓住第一行

# shell - 第 15 个 Bash 脚本之后的下一个工作日

> ID：14568400
> 
> 赞同：-3
> 
> 时间：2013-01-28T18:12:39.197
> 
> 标签：shell

我需要本月 15 日之后的下一个工作日的 bash 脚本。它应该只在 15 日之后给我下一个工作日。我对 Bash 脚本完全陌生。非常感谢。 `d=1 while (($(date -d "$d days" +%u) >= 6)); do ((++d)); done date -d "$d days" +%m/%d/%Y`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:36:53.723

使用 cal 又快又脏：第一种情况是星期五，然后是星期六，然后是星期日。

```
( cal | grep -q "15 16$"  && echo 18  ) || ( cal | grep -q "15$"  && echo 17  ) || (  echo 16 ) 
```

# java - Jsoup - 获取名称中带有空格的类元素

> ID：14568401
> 
> 赞同：18
> 
> 时间：2013-01-28T18:12:52.573
> 
> 标签：java, jsoup

我试图通过标签“c2 l n”来获取这个类的值。

```
<td class="c2 l n"><span class"generic">0,63</span></td> 
```

在 Jsoup 我试过这个：

```
String value="c2 l n";
Elements Stock_Data_Change = doc.getElementsByClass(value); 
```

但它一直空着..它与其他类名（如“ju.l”）一起工作得很好，它似乎错过了空格。有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T07:57:56.933

正如戴夫牛顿在上面的评论中回答的那样，我们谈论的是元素，其中包含多个类。为了得到这个元素的值，这一行为我抓取了它。

```
Element Stock_Data_Change = doc.select("td.c2.l.n"); 
```

# javascript - 使用javascripts的availHeight和availWidth更改图像大小

> ID：14568403
> 
> 赞同：1
> 
> 时间：2013-01-28T18:13:06.817
> 
> 标签：javascript, jquery, image, attributes, resize

我是这个论坛的新手，实际上我刚刚登录。

我有一个只包含一个标签的索引文件。

这是我的代码

* * *

```
<!DOCTYPE HTML>
<html>
<head>

<link rel="stylesheet" href="css/style.css" type="text/css"/>

<script>

h=screen.availHeight;
w=screen.availWidth;

</script>
</head>
<body>
<div id="container" align="center">
    <img id="image" src="images/last.png" alt="starting"                               onmouseover="this.src='images/first.png';" 
    onmouseout="this.src='images/last.png';"  usemap="#map"/>  

    <map name="map">
        <area shape="rect" coords="13,250,455,450" alt="shops" href="">
        <area shape="rect" coords="675,310,1080,390" alt="eshop" href="/opencart/upload">
    </map>
</div> 
```

* * *

我想要做的是根据访问者的屏幕尺寸改变图像的尺寸。我知道availHeight 和availWidth 返回浏览器使用的屏幕的高度和宽度。我想将返回的值保存在变量 h 和 w 中，然后将 html 标记内的这些变量解析为 height=h 和 width=w

你能帮我建立我的功能并完成这项工作吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:20:39.383

您可以在 javascript 中指定宽度和高度。将您的脚本放在结束正文标记之前或放入[document.ready](http://api.jquery.com/ready/)。

```
h=screen.availHeight;
w=screen.availWidth;
$(document).ready(function(){
  $img = $('#image');
  $img.width(w);
   $img.height(h);
}); 
```

或者

```
h=screen.availHeight;
w=screen.availWidth;
$(document).ready(function(){
  img = document.getElementById('image');
  img.style.width = w;
  img.style.height = h;
}); 
```

# javascript - node.js mysql无法插入

> ID：14568404
> 
> 赞同：0
> 
> 时间：2013-01-28T18:13:09.403
> 
> 标签：javascript, mysql, node.js

我在搞乱 node.js，使用 Faker、underscore、mysql 和 randy 库向 Web 应用程序添加一些测试数据。

到目前为止一切顺利——但在我的一个循环中，mysql 调用每次都失败，但它也无法生成任何错误。我有点难过：

```
var sql = 'SELECT id FROM mytable WHERE 1';
client.query(sql, function(err, rows, fields){
    // loop through results
    _.each(rows, function (v, i){
        // get the insert id
        var id = v.id; 
        console.log (id); // prints valid ID            
        // generate other data
        var stuff_count = randy.randInt(0,12);
        _(stuff_count).times(function(n){
            var sql = 'INSERT INTO other_table (linked_id, item_id) VALUES ('+id+','+randy.randInt(1,50)+')';
            console.log(sql); // prints sql
            client.query(sql, function(err, rows, fields) {
              console.log(sql); // prints nothing
              if (err){
                console.log(sql); // prints nothing
                throw err; // prints nothing
              }
        });
    });
}); 
```

循环逻辑工作正常，它一直到 sql 应该执行`INSERT`反对的地方`other_table`- 但是跟踪 mysql 日志显示没有任何东西击中数据库，并且`client.query`块内的任何调试语句都没有打印任何东西，成功或失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:07:45.860

假设您只是在独立运行，您的代码可能在它有机会进行插入之前完成。

在 _(stuff_count).times(...) 之后放置一个 setTimeout(..., 10000)

通过使用 _().times()，您可以将所有插入排队，但不等待完成。您应该使用控制流库来确保等待所有插入完成。

# javascript - Jade lang - 如何手动添加新行？

> ID：14568409
> 
> 赞同：2
> 
> 时间：2013-01-28T18:13:28.843
> 
> 标签：javascript, html, node.js, pug, template-engine

我有这样的代码

```
ul.nav
    li.item
        a(href='#')
        ul
            li
                a(href='#') 
```

它转换为

```
<ul class="nav">
    <li class="item"><a href="#"></a>
        <ul>
            <li><a href="#"></a></li>
        </ul>
    </li>
</ul> 
```

预期结果：

```
<ul class="nav">
    <li class="item">
        <a href="#"></a>
        <ul>
            <li>
                <a href="#"></a>
            </li>
        </ul>
    </li>
</ul> 
```

如何获得正确的缩进？

我已经尝试`Whitespace Removal: > and <`了来自[http://scalate.fusesource.org/documentation/jade-syntax.html](http://scalate.fusesource.org/documentation/jade-syntax.html)的规则，但它们不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-16T17:30:16.540

可以使用此类命令手动添加之间的新行

```
= "\n" 
```

所以当你的代码看起来像这样时：

```
ul.nav
li.item
    a(href='#')
    ul
        li
            = "\n"
            a(href='#') 
```

产生以下输出：

```
<ul class="nav">
  <li class="item"><a href="#"></a>
    <ul>
      <li>
<a href="#"></a>
      </li>
    </ul>
  </li>
</ul> 
```

唯一的问题是这个命令会破坏制表缩进。

在项目问题[页面上找到](https://github.com/visionmedia/jade/issues/921)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:59:34.333

您可以使用[html](https://github.com/maxogden/commonjs-html-prettyprinter)模块来美化您的 html。将以下内容添加到您的代码中：

```
var html = require('html');
var fn = jade.compile('string of jade', options);  // standard jade example

console.log(html.prettyPrint(fn())) 
```

你的输出将是

```
<ul class="nav">
  <li class="item">
    <a href="#"></a>
    <ul>
        <li>
            <a href="#"></a>
        </li>
    </ul>
  </li>
</ul> 
```

确保您使用的是最新的[beautify-html.js](https://raw.github.com/einars/js-beautify/master/beautify-html.js)。

# breeze - 微风内存管理 - 模式/实践？

> ID：14568410
> 
> 赞同：3
> 
> 时间：2013-01-28T18:13:37.383
> 
> 标签：breeze

我有一个旧的 SL4/ria 应用程序，我希望用微风取代它。我有一个关于内存使用和缓存的问题。我的应用程序加载工作列表（一个典型的用户可以访问大约 1,000 个这些工作）。此外，还有很多查找实体类型。我想确保这些在客户端缓存得很好，但每个会话都会更新。当用户打开作业时，它会加载更多相关实体（从 200 到 800 个附加实体），这些实体构成作业的多个矩阵样式视图。用户可以查看作业列表，或导航到一次查看 1 个作业。

我觉得我应该关注内存管理，尤其是不知道浏览器如何处理这个问题。最初我觉得这应该都是 1 EntityManager 并且当用户离开工作时我会分离实体，但我认为这可能会在预期的生命周期内受益于多个经理。或者，每次用户导航到新的哈希“/#/”区域时，我应该创建一个新的数据服务和实体管理器，因为对 clear() 的评论似乎表明这会更快？如果我这样做了，我想我将使用 pub/sub 来通知其他视图模型对实体的更改？这似乎很复杂，并且破坏了轻风作为上下文的一些好处。

任何有关此的提示或想法将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T20:05:18.937

我想我理解这个问题。我想我会使用多经理方法：

1.  查找管理器 - 每个会话保存一次引用（查找）实体
2.  JobsView Manager - 支持 JobsView 的“只读”作业列表
3.  JobEditor Manager - 每个编辑会话一个。

查找管理器维护参考实体的规范副本。您可以通过对服务器的一次调用来填充它一次（请参阅文档了解如何）。这个查找管理器会将这些参考实体*微风导出到其他管理器，这些管理器在创建它们时**微风导入*它们。我假设，虽然数量众多且种类繁多，但引用实体的总内存占用量非常低……足够低，以至于您可以负担得起在多个管理器中拥有多个副本。如果不是这样，还有更复杂的解决方案。但暂时就这样吧。

JobsView Manager 具有显示所需的参考实体。如果您只显示作业的投影，则缓存中不会有作业。您可能有一个数组和键映射。让我们保持简单，假设它拥有所有的 Jobs，但没有它们的相关实体。

您永远不会使用此管理器保存更改！编辑或创建作业时，您的应用程序始终会使用自己的 VM 和 JobEditor Manager 启动“作业编辑器”视图。同样，您导入所需的参考实体，并且在编辑现有作业时，您也导入了作业。

无论如何我都会采用这种方法......不仅仅是因为内存问题。我喜欢将我的编辑会话隔离到沙箱中。轻松取消。为我提供了一种在浏览器存储中存储待处理更改的简洁方式，以便在应用程序/浏览器出现故障时用户不会丢失他/她的工作。打开同时编辑多个作业的大门......而不必担心相互依赖的实体与变化。这是一种经过验证的模式，我们在 SL 应用程序中一直使用它，并且应该也适用于 JS 应用程序。

当 Job 编辑成功时，您必须告诉本地客户端世界。有很多方法可以做到这一点。如果唯一需要知道的地方是 JobsView，您可以将反向通道硬编码到应用程序中。如果你想更聪明一点，你可以有一个中央单例服务，它专门引发关于工作节省的事件。JobsView 和每个新的 JobEditor 都与该服务进行通信。如果你想变得时髦，你可以使用一个进程内的“事件聚合器”（你的发布/订阅）来达到这个目的。无论如何，我可能会在这个应用程序中使用[Durandal](http://durandaljs.com/)，并且它在框中有一个事件聚合器。

老实说，在经理之间使用和导入/导出实体并不是那么复杂……咳咳……轻而易举。与每次返回时刷新作业列表相比，这是非常值得的（尽管您也需要一个“刷新按钮”，因为其他用户可能正在添加/更改这些作业）。您保留了 Breeze 的许多优点：查询、验证、更改跟踪、批量保存、实体导航（这些参考列表在 Breeze 中“免费”工作）。

作为改进，我不知道当我返回 JobsView 时会自动销毁 JobEditor 视图/viewmodel/manager。以我的经验，人们经常回到他们刚离开的同一个工作。我可能会保留一个视图，以便您可以快速来回走动。但现在我变得棘手了。

# mysql - MySQL 打不开

> ID：14568411
> 
> 赞同：1
> 
> 时间：2013-01-28T18:13:46.493
> 
> 标签：mysql, database, windows-xp, xampp

我试图在[这里](http://www.apachefriends.org/f/viewtopic.php?p=196692&sid=69a39020661c291f3519f3c1cb1ef295)和这里[阅读](http://www.apachefriends.org/f/viewtopic.php?p=195455&sid=e9156e114245e1f3f308481b83ab731d)其中的一些内容，但它仍然不起作用。

我还重新安装了 xampp 两次，然后一次又一次地重新启动，但无济于事。

这是mysql_error.log：

```
130128 23:52:08 [Note] Plugin 'FEDERATED' is disabled.
130128 23:52:08 [Warning] option 'innodb-buffer-pool-size': signed value 0 adjusted to 5242880
130128 23:52:08 [Warning] option 'innodb-additional-mem-pool-size': signed value 0 adjusted to 524288
130128 23:52:08 [Warning] option 'innodb-log-file-size': signed value 0 adjusted to 1048576
130128 23:52:08 [Warning] option 'innodb-log-buffer-size': signed value 0 adjusted to 262144
130128 23:52:08 [Warning] option 'innodb-lock-wait-timeout': unsigned value 0 adjusted to 1
130128 23:52:08 InnoDB: The InnoDB memory heap is disabled
130128 23:52:08 InnoDB: Mutexes and rw_locks use Windows interlocked functions
130128 23:52:08 InnoDB: Compressed tables use zlib 1.2.3
130128 23:52:08 InnoDB: Initializing buffer pool, size = 
runtime error R6002
- floating point support not loaded
130129  0:04:10 [Note] Plugin 'FEDERATED' is disabled.
130129  0:04:10 InnoDB: The InnoDB memory heap is disabled
130129  0:04:10 InnoDB: Mutexes and rw_locks use Windows interlocked functions
130129  0:04:10 InnoDB: Compressed tables use zlib 1.2.3
130129  0:04:10 InnoDB: Initializing buffer pool, size = 
runtime error R6002
- floating point support not loaded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:16:18.967

好像你的 MySQL 数据库崩溃了。最好的解决方案是重新启动您的机器并重新启动 XAMPP。

# python - django 方法在那里，但是当我尝试调用它时评估为 NoneType

> ID：14568415
> 
> 赞同：1
> 
> 时间：2013-01-28T18:14:03.520
> 
> 标签：python, django, methods, django-models

我在其中一个 Django 模型中有一个自定义方法，它执行一些常规的数据库数据获取和求和。就这个：

```
from django.utils.timezone import utc, now 
...

class Project(models.Model):
...
    def getTotalMonthlyBackers(self, monthdate=now()):
        from pledger.models import DonationHistory 

        return (DonationHistory.objects
                                 .filter(project=self)
                                 .filter(datetime_sent__gte=datetime(monthdate.year, monthdate.month, 1))
                                 .aggregate(Count('user', distinct=True))['user__count']) 
```

当我尝试通过调用该方法时

```
print project.getTotalMonthlyBackers() 
```

我收到错误：`'NoneType' object is not callable`

但是，如果我输出方法本身只是为了检查它是否不是错字：

```
print project.getTotalMonthlyBackers 
```

我得到：`<bound method Project.getTotalMonthlyBackers of <Project: Putty>>`

所以该方法在那里并且绑定到某个`Project`对象。Python中有一些非常明显的东西我无法调用这个方法，但我无法从手册中弄清楚。

追溯：

```
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/mnt/hgfs/Projects/BitFund/Sources/source/project/views/project_view_details.py" in view
  101\.     print project.getTotalMonthlyBackers()
File "/mnt/hgfs/Projects/BitFund/Sources/source/project/models.py" in getTotalMonthlyBackers
  76\.                                  .filter(datetime_sent__gte=datetime(monthdate.year, monthdate.month, 1))

Exception Type: TypeError at /putty_1
Exception Value: 'NoneType' object is not callable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:51:15.843

似乎你还没有导入`datetime`构造函数，如果你使用它，你会得到一个**幼稚**的日期时间，这会产生一个变暖，因为该结构不包含`tzinfo`对象，所以尝试为那个**日期**时间使用一个时区感知构造函数或使用`make_aware`.

查看有关该主题的这篇文档，我相信您会以最合适的方式解决它[时区和实用程序](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#naive-and-aware-datetime-objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:09:36.370

正如回溯所示，它不是被视为 的方法`None`，而是您在其中调用的函数之一。我猜你已经重新定义了该模块中的任何一个`datetime`或`Count`其他地方。

此外，这不是问题，但请注意，您不应该`now()`在函数定义中调用：这样做会修复进程启动时的默认值，而不是每次调用时都获取一个新值。你应该这样做：

```
def getTotalMonthlyBackers(self, monthdate=None):
    if monthdate is None:
        monthdate = now() 
```

# android - 传递数组的 ArrayList（例如 ArrayList ) 意图

> ID：14568417
> 
> 赞同：0
> 
> 时间：2013-01-28T18:14:07.900
> 
> 标签：android, android-intent

如何将数组的 ArrayList 传递给 Android 中的意图？我知道你可以通过一个`ArrayList<String>`，但是有可能通过一个`ArrayList<String[]>`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:20:45.660

这是可能的，但是您需要将其作为 a 传递，`Serializable`并且在提取额外内容时需要转换结果。由于`ArrayList`实现`Serializable`并且`String[]`本质上是可序列化的，因此代码很简单。要通过它：

```
ArrayList<String[]> list = . . .;
Intent i = . . .;

i.putExtra("strings", list); 
```

要检索它：

```
Intent i = . . .;
ArrayList<String[]> list = (ArrayList<String[]>) getSerializableExtra("strings"); 
```

您将不得不抑制（或忍受）未经检查的转换警告。

# php - 我可以在不使用 json 的情况下从 php 获取单个字段到 android 吗？

> ID：14568419
> 
> 赞同：0
> 
> 时间：2013-01-28T18:14:10.783
> 
> 标签：php, android, mysql

我正在尝试通过 php 从 mySql 获取单个字段并在我的 android 应用程序中使用它。如何在不使用 json 的情况下从 php 获取单个字段到 android？我试图将单选按钮的文本设置到我得到的字段中？这是我的php代码：

```
 <?php
   $con = mysql_connect("localhost","root","pass123");
   if (!$con)
     {
     die('Could not connect: ' . mysql_error());
     }

   mysql_select_db("voting", $con);

   $result = mysql_query("SELECT Name FROM ssc_president WHERE Party = '123'")
   or die(mysql_error());
   $row = mysql_fetch_array( $result );

   $pname = $row['Name'];
   //echo "Name: ".$row['Name'];

   mysql_close($con);
   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:15:56.450

您可以使用`XML`从服务器获取单个名称，而不是您必须对`radio button`in 的文本进行硬编码`android`。

要从服务器获取动态数据，您需要调用`webservice`which 在`XML`或中提供数据`JSON`。这取决于您使用的是哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:21:46.660

在 PHP 中，只需回显您想要的字段。确保这是您打印的全部内容。

```
<?php
...
echo $mydata;

?> 
```

在 Android 中，使用`HttpClient`

```
String result = "";
InputStream is=null;
try{
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("MyURLGoesHERE");      
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
    String line = "";
    while ((line = reader.readLine()) != null) {
        result += line;
    }
    is.close();
}catch(Exception ex){  
    Log.e("Error",ex.toString());
}

Log.d("DataFromPHP",result); 
```

# html - 打印在浏览器中显示的网页

> ID：14568420
> 
> 赞同：1
> 
> 时间：2013-01-28T18:14:21.910
> 
> 标签：html, css, printing

我目前有一个显示应用程序的网页。这样做的目的是让用户能够收到预先填写了他们的信息的应用程序版本，以便他们能够将其打印出来。目前该页面看起来很棒，并且几乎一对一地匹配应用程序。

不幸的是，在查看打印预览时，这是一个可怕的混乱；到处都有换行符，并且在查看网页时似乎没有任何东西排列起来。

我必须做些什么才能将 CSS 规则应用于页面的打印版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:22:48.880

WHELP，我发现当我向媒体添加“打印”时，它正确地应用了 CSS，现在正在按应有的方式显示。

所以这基本上解决了这个问题......

```
<link rel="stylesheet" type="text/css" href="/stylesheets/style.css" media="screen, print"> 
```

![危机：避免。](../Images/d75393dd5244623c5cdd2830f55ae672.png)

# linux - Linux：仅为当前用户安装的应用程序中的 Man 命令

> ID：14568423
> 
> 赞同：2
> 
> 时间：2013-01-28T18:14:29.287
> 
> 标签：linux, manpage

Linux 中的手动文件存储在`/usr/share/man`. 以前，我的应用程序只能由 root 用户安装，并将手册文件放在此目录中。现在，我想启用非 root 安装；为此，我所有的数据和配置文件都将安装在`~/<appname>/`. 但是，man 命令将无法再访问复制到 home 的手动文件。

这个问题的常见解决方法是什么？

我考虑过`"man"`在我的应用程序中创建一个`man -M /<man_path>/<appname>/`运行的命令（因为这对用户来说比自己运行命令更容易）。这是一个不错的选择吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:52:01.797

```
[spatel@ap4004 appname]$ export MANPATH=/home/spatel/appname/man

[spatel@ap4004 appname]$ manpath
/home/spatel/appname/man/en:/home/spatel/appname/man 
```

其他解决方法是命令`alias`

```
[spatel@ap4004 appname]$ alias man='man -M /home/spatel/appname/man'

[spatel@ap4004 appname]$ alias man
alias man='man -M /home/spatel/appname/man' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:41:20.793

`man`默认情况下（至少在 Fedora 14 及更高版本上）具有新行为，它在与`PATH`环境变量对应的路径中搜索，即`PATH=/xyz/bin`它搜索`/xyz/bin/man`，`/xyz/share/man`以及其他附近的地方。除非`MANPATH`设置。

你需要`unset MANPATH`在你的最后`.bash_profile`，一些启动脚本`/etc`可能会设置它来惹恼你。

> 如果您没有使用 -M 或 MANPATH 指定显式路径列表，man 会根据配置文件 /etc/man.config 的内容开发自己的路径列表。配置文件中的 MANPATH 语句标识要包含在搜索路径中的特定目录。
> 
> 此外，MANPATH_MAP 语句根据您的命令搜索路径（即您的 PATH 环境变量）添加到搜索路径。对于可能在命令搜索路径中的每个目录，MANPATH_MAP 语句指定一个目录，该目录应添加到手册页文件的搜索路径中。man 查看 PATH 变量并将相应的目录添加到手册页文件搜索路径中。因此，通过正确使用 MANPATH_MAP，当您发出命令 man xyz 时，您会获得一个手册页，说明您发出命令 xyz 时将运行的程序。
> 
> 此外，对于命令搜索路径中没有 MANPATH_MAP 语句的每个目录（我们将其称为“命令目录”），man 会自动查找“附近”的手册页目录，即作为子目录命令目录本身或命令目录的父目录中。
> 
> 您可以通过在 /etc/man.config 中包含 NOAUTOPATH 语句来禁用自动“附近”搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:48:09.067

您需要使用[manpath](http://linux.about.com/library/cmd/blcmdl1_manpath.htm)命令。

# debugging - 如何在 laravel 4 上显示错误？

> ID：14568426
> 
> 赞同：32
> 
> 时间：2013-01-28T18:14:34.580
> 
> 标签：debugging, laravel, error-reporting, laravel-4

我正在尝试在 Laravel 4 beta 上创建一个应用程序，但我无法调试它，因为它没有显示任何错误、`display_errors`开启、`error_reporting`is`E_ALL`和`debug => true`( `config/app.php`)。当我尝试对其执行错误时，`public/index.php`会显示解析错误，但是当我在路由器上执行此操作时，它只会显示一个空白页面（白屏死机）。我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-26T14:22:54.143

*@Matanya* - 您是否查看了服务器日志以查看错误 500 实际上是什么？它可以是任意数量的东西

*@Aladin* - Laravel 4 可以通过三种方式诊断白屏死机（WSOD）。

**选项 1：**转到您的 Laravel 日志（app/storage/logs）并查看错误是否包含在其中。

**选项 2：**转到您的 PHP 服务器日志，并查找导致 WSOD 的 PHP 错误

**选项 3：**良好的旧调试技能 - 在路由文件的开头添加 die('hello') 命令 - 然后继续将它越来越深入地移动到您的应用程序中，直到您不再看到“hello”消息。使用它，您将能够缩小导致 WSOD 的范围并解决问题。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-01-22T15:09:52.767

安装新的 laravel 实例后出现白屏问题。我在日志中找不到任何内容，因为（最终我发现）白屏的原因是应用程序/存储不可写。

为了在屏幕上显示错误消息，我将以下内容添加到 public/index.php

```
try {
    $app->run();
} catch(\Exception $e) {
    echo "<pre>";
    echo $e;
    echo "</pre>";
} 
```

之后就很容易解决问题了。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-10-23T14:24:37.847

转到 app/config/app.php

并设置'debug' => true，

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T09:47:07.653

遵循@The Shift Exchange 的好建议，我查看了 error_log 并确实设法解决了问题。这只是一个权限问题：

```
Tue Feb 26 11:22:20 2013] [error] [client 127.0.0.1] PHP Fatal error:  Uncaught exception 'UnexpectedValueException' with message 'The stream or file "/Users/matanya/Sites/indgo/app/start/../storage/logs/log-apache2handler-2013-02-26.txt" could not be opened: failed to open stream: Permission denied' in /Users/matanya/Sites/indgo/vendor/monolog/monolog/src/Monolog/Handler/StreamHandler.php:71\nStack trace:\n#0 /Users/matanya/Sites/indgo/vendor/monolog/monolog/src/Monolog/Handler/RotatingFileHandler.php(77): Monolog\\Handler\\StreamHandler->write(Array)\n#1 /Users/matanya/Sites/indgo/vendor/monolog/monolog/src/Monolog/Handler/AbstractProcessingHandler.php(37): Monolog\\Handler\\RotatingFileHandler->write(Array)\n#2 /Users/matanya/Sites/indgo/vendor/monolog/monolog/src/Monolog/Logger.php(217): Monolog\\Handler\\AbstractProcessingHandler->handle(Array)\n#3 /Users/matanya/Sites/indgo/vendor/monolog/monolog/src/Monolog/Logger.php(281): Monolog\\Logger->addRecord(400, Object(ErrorException), Array)\n#4 [internal function]: Monolog\\Logger->addError(Object(ErrorException))\n#5 /Users/matanya/Sites/in in /Users/matanya/Sites/indgo/vendor/monolog/monolog/src/Monolog/Handler/StreamHandler.php on line 71 
```

一旦我曾经`chmod`应用不太严格的权限，一切都恢复正常。

但是，我不确定它是否回答了 OP 的问题，因为他得到的是一个空白屏幕而不是服务器错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-31T13:39:08.060

里面的配置文件夹打开`app.php`

改变

```
'debug' => false, 
```

到

```
'debug' => true, 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-15T00:24:34.287

继@cw24 的回答之后 • 从 Laravel 开始`5.4`，您将改为在`public/index.php`

```
try {
    $response = $kernel->handle(
        $request = Illuminate\Http\Request::capture()
    );
} catch(\Exception $e) {
    echo "<pre>";
    echo $e;
    echo "</pre>";
} 
```

就我而言，我忘记了启动 MySQL。
顺便说一句，通常`mysql.server start`在终端

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-12T05:02:50.040

在 Laravel 根文件夹 chmod 存储目录为 777

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-23T09:52:42.207

这次可能不在 Laravel 4 上，但在 L5.2* 上我遇到了类似的问题：

`storage/logs`我只是将目录的所有权更改为`www-data`：

```
# chown -R www-data:www-data logs 
```

> PS：这是在 Ubuntu 15 和 apache 上。

我的`logs`目录现在看起来像：

```
drwxrwxr-x  2 www-data   www-data 4096 jaan  23 09:39 logs/ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-28T17:10:25.513

[https://github.com/loic-sharma/profiler](https://github.com/loic-sharma/profiler)这是替代 laravel3 调试栏的好例子。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-25T02:40:07.783

只需转到您那里的可用`app/storage/logs`日志。`error`转到今天日期时间的文件名，您将`error`在您的应用程序中找到最新的。

或者

打开`app/config/app.php`和更改设置

```
'debug' => false, 
```

到

```
'debug' => true, 
```

或者

转到`.env`文件到您的应用程序并更改配置

```
APP_LOG_LEVEL=debug 
```

# php - Laravel 3：with_input() 不保存输入

> ID：14568427
> 
> 赞同：0
> 
> 时间：2013-01-28T18:14:36.503
> 
> 标签：php, laravel, laravel-3

我有一个通过一些验证的 Laravel 表单。显然，如果验证失败，我希望用户被重定向到表单并警告他们的错误。此外，由于表单相当大，我不希望用户必须重新输入任何数据。这是表格（我已经剪掉了很大一部分以减小此消息的大小）

```
:@layout('templates.main')

@section('content')
    @if(Session::has('validation_errors'))
    <ul class="form_errors">
        @foreach($errors as $error)
            {{$error}}
        @endforeach
    </ul>
    @endif

    {{ Form::open('account/create', 'POST') }}
    <table>
        <tr>
            <td>{{ Form::label('dealer', 'Dealer') }}</td>
            <td>{{ Form::select('dealer', array('1' => 'Dealer #1', '2' => 'Dealer #2')) }}</td>
            <td>{{ Form::label('amount', 'Amount') }}</td>
            <td>{{ Form::text('amount', Input::old('amount')) }}</td><!--Here is where I'm testing for old input-->
        </tr>
        <tr>
            <td>{{ Form::label('date', 'Date') }}</td>
            <td>{{ Form::date('date', NULL, array('class' => 'date_picker')) }}</td>
            <td>{{ Form::label('installation', 'Installation #') }}</td>
            <td>{{ Form::input('text', 'installation') }}</td>
        </tr>
        <tr>
            <td colspan="4">{{ Form::textarea('notebox', NULL, array('id' => 'notebox')) }}</td>
        </tr>
        <tr>
            <td colspan="4">{{ Form::submit('Submit') }}&nbsp;{{ Form::reset('Reset') }}</td>
        </tr>
    </table>
    {{ Form::close() }}
@endsection 
```

提交表单后，这里是处理它的控制器：

```
public function post_create() {
        //Validate it in the model
        $validation = Account::validate(Input::all());
        if($validation->fails()){
            return Redirect::to('account/create')
                ->with_input()
                ->with('validation_errors', true)
                ->with('errors', $validation->errors->all('<li>:message</li>'));
        }
        else {
            return "passed";//for debugging purposes
        }
    } 
```

最后，这是 Account 模型：

```
class Account extends Eloquent { 
        public static function validate($input) {
            //Validation rules
            $rules = array(
                'firstname' => 'required',
                'lastname' => 'required',
                            //etc...
            );
            //Custom validation messages
            $messages = array(
                'firstname_required' => 'A first name is required.',
                'lastname_required' => 'A last name is required.',
                //etc...
            );
            //Pass it through the validator and spit it out
            return Validator::make($input, $rules, $messages);
        }
    } 
```

因此，当我通过故意使表单无效来进行测试时，我被重定向到帐户/创建表单，但是，没有显示验证错误，并且没有保存旧输入（我只附加`Input::old()`到金额文本框）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:36:43.707

事实证明，如果 from 的字符总数`Input::old()`超过 ~1400 个字符，事情就会变得有点麻烦。我通过将 from 更改为`'driver' => 'cookie'`to `'driver' => 'file'`in my解决了这个问题`application/config/session.php`，它开始按预期工作。

[https://github.com/laravel/laravel/issues/1475](https://github.com/laravel/laravel/issues/1475)

# selenium - 如何使用 Selenium WebDriver 在 javascript 表单上定位元素

> ID：14568435
> 
> 赞同：0
> 
> 时间：2013-01-28T18:15:03.113
> 
> 标签：selenium, selenium-webdriver

我有一个呈现登录表单的页面。使用 Firefox 的萤火虫，我确定了用户名 id = txtUsername，密码文本框是 txtPassword。在 Firefox 中一切都很好。但是移到 IE Explorer 浏览器时，出现错误并且无法找到元素。

在检查页面时，我发现表单正在由 JavaScript 函数呈现。下面是html：

```
form name="frmLogin" id="frmLogin" onsubmit="return $('#frmLogon').valid();" action="default.aspx" method="post" jQuery172043="1" novalidate="novalidate" 
```

如何使用 selenium webdriver 定位页面元素。

这是我写的代码。

```
 /* setup for IE. Remove if not needed  */
            File file = new File("C:/SeleniumJavaLibrary/selenium-2.28.0/IEDriverServer.exe");
            System.setProperty("webdriver.ie.driver", file.getAbsolutePath());

            DesiredCapabilities caps = DesiredCapabilities.internetExplorer();
            caps.setCapability("ignoreZoomSetting", true);
            WebDriver driver = new InternetExplorerDriver(caps);
            driver.manage().timeouts().implicitlyWait(28,TimeUnit.SECONDS );
            /*setup for IE*/

            driver.get("http://website.com");
            WebElement element = (WebElement) ((JavascriptExecutor)driver).executeScript("return $('#frmLogin').valid();");

            element.findElement(By.name("txtUsername")).sendKeys("user");
            element.findElement(By.name("txtPassword")).sendKeys("password"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:31:26.690

我会做以下事情：

```
WebDriverWait waiting = new WebDriverWait(driver, 15, 100);

WebElement element = waiting.until(ExpectedConditions.visibilityOfElementLocated(By.id("frmLogin"))); 
```

这将创建一个 WebDriverWait 对象，该对象最多等待 15 秒，每 100 毫秒检查一次预期条件是否有效。然后，此对象用于等待 frmLogin 元素在页面上可见，然后返回一个 WebElement，以后可以在测试中使用（如果需要）。

# vb.net - 如何将 TextBox 和 Slider 的值相互绑定？VB.net（Windows 商店）

> ID：14568437
> 
> 赞同：0
> 
> 时间：2013-01-28T18:15:13.823
> 
> 标签：vb.net, windows-store-apps, windows-store

我希望在滑动滑块时更改 TextBox 中的文本，反之亦然（当我在 TextBox 中键入时，滑块的值会更改）。这是 Slider 的 XAML 代码：

```
<Slider x:Name="PercentageSlider" HorizontalAlignment="Left" Height="46" Margin="333,319,0,0" VerticalAlignment="Top" Width="788" Foreground="#FF5D9FAD" Minimum="1" Value="{Binding Text, ElementName=PercentageValueTextBox}"/> 
```

这是文本框：

```
<TextBox x:Name="PercentageValueTextBox" Height="46" Margin="0,319,161,0" TextWrapping="Wrap"  VerticalAlignment="Top" HorizontalAlignment="Right" Width="69" FontSize="26" Foreground="White" Background="{x:Null}" Text="{Binding Value, ElementName=PercentageSlider}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:31:41.903

您`Xaml`对链接两个控件是正确的，导致问题的原因是`Minimum = 1`，这覆盖了`TextBox`影响`Slider`.

尝试将您的绑定表达式更改为：

**文本框 ：**

```
 Text="{Binding Value, ElementName=PercentageSlider, Mode=TwoWay}" 
```

**滑块：**

```
Value="{Binding Text, ElementName=PercentageValueTextBox, Mode=TwoWay}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:20:23.703

对于文本框：

```
textchanged event:
slider1.value=CInt(textbox1.text) 
```

对于滑块：

```
valuechanged event:
textbox1.text=slider1.value.tostring() 
```

这里的文本框是文本框1，滑块是slider1

# php - 用 php 执行 FIND 命令

> ID：14568438
> 
> 赞同：0
> 
> 时间：2013-01-28T18:15:16.900
> 
> 标签：php

我正在尝试使用 PHP 执行以下命令。

任何人都有更好的建议或想法为什么它不起作用？

查看错误日志并没有提供任何有用的信息......

命令 ：

```
$pp = shell_exec(find /direcotry/*.jpg -maxdepth 1 -type f -print0 | xargs -0 ls -l | gawk '{sum += $5; n++;} END {print \"Total Size: \" sum/1024/1024 \" MB : Avg Size: \" sum/n/1024 \" KB : Total Files: \" n ;}'; 
```

日志 ：

```
[Mon Jan 28 11:08:27 2013] [error] [client X.X.X.X] PHP Parse error:  syntax error, unexpected T_VAR in /var/www/html/report/functions/avgSize.php on line 15 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:16:55.397

您需要报价，但您忘记结束通话：

```
 $pp = shell_exec("find /direcotry/*.jpg -maxdepth 1 -type f -print0 | xargs -0 ls -l | gawk '{sum += $5; n++;} END {print \"Total Size: \" sum/1024/1024 \" MB : Avg Size: \" sum/n/1024 \" KB : Total Files: \" n ;}"); 
```

还要确保执行脚本的用户有权运行查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:17:11.927

将您的 find 命令放入一个文件并 chmod +x 。然后打电话

```
$pp = shell_exec("/PATH_TO_YOUR_FILE/YOUR_FILE"); 
```

# wpf - 获取 RibbonControlsLibrary.Aero2 的 FileNotFoundException

> ID：14568439
> 
> 赞同：2
> 
> 时间：2013-01-28T18:15:24.473
> 
> 标签：wpf, ribboncontrolslibrary

我最近在尝试运行使用 WPF 功能区的项目时开始收到此错误。它以前一直在这台机器上工作，但由于某种原因现在不是。[此处](http://www.microsoft.com/en-us/download/details.aspx?id=11877)的库已正确安装在这台机器上。

确切的异常消息：

> “无法加载文件或程序集 'RibbonControlsLibrary.Aero2, Version=4.0.0.11019, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。系统找不到指定的文件。”：“RibbonControlsLibrary.Aero2, Version=4.0 .0.11019，文化=中性，PublicKeyToken=31bf3856ad364e35"

当前系统/项目环境：.NET 4、VS 2010 Pro、Win8 Pro

修改 VS 2012 Express for Desktop 的项目和 .NET 4.5 功能区控件工作正常，虽然我们还不能切换到 VS 2012，所以需要为 VS 2010 修复这个问题。

该项目在 Win7 系统上仍然可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T18:16:48.097

我使用 WPF Extended Toolkit 遇到了同样的问题（所以我的错误显示为抱怨 Xceed.Wpf.Toolkit.Aero2），这似乎是 Visual Studio 中与设计器相关的错误，因为设计器问题是触发问题的原因我（顺便说一句，我正在使用VS2012，所以它仍然是一个问题）。

似乎解决方案的 .suo 文件已损坏，因为对我有用的“修复”是关闭 VS，删除 .suo 文件，然后重新启动。每次都有效，直到我遇到另一个设计器无法加载的设计器错误。然后我必须再做一次。

希望有帮助！

# java - 在 Java 中使用 Post 上传图片

> ID：14568442
> 
> 赞同：0
> 
> 时间：2013-01-28T18:15:29.373
> 
> 标签：java, post, curl

我正在尝试将图像上传到 java 中的 imagezilla.net。用 php 使用 curl 没问题..

```
$pvars   = array('file' => "@".$imagePath, 'apikey' => "apikey");
$timeout = 30;
$curl    = curl_init();
curl_setopt($curl, CURLOPT_URL, 'http://imagezilla.net/api.php');
curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $pvars);
$xml = curl_exec($curl);
curl_close ($curl);
$res = new SimpleXMLElement($xml); 
```

怎么可能在java中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:18:04.690

您可以使用[Apache HTTPComponents](http://hc.apache.org/)。它比 cURL 复杂一点，但是，它会完成这项工作（您基本上必须填写表格并发布）。

# python - 装饰器将函数标记为可调用

> ID：14568452
> 
> 赞同：3
> 
> 时间：2013-01-28T18:16:10.340
> 
> 标签：python, decorator

我正在创建一个功能标记系统，以启用或禁用基于标签的功能：

```
def do_nothing(*args, **kwargs): pass

class Selector(set):
    def tag(self, tag):
        def decorator(func):
            if tag in self:
                return func
            else:
                return do_nothing
        return decorator

selector = Selector(['a'])

@selector.tag('a')
def foo1():
    print "I am called"

@selector.tag('b')
def foo2():
    print "I am not called"

@selector.tag('a')
@selector.tag('b')
def foo3():
    print "I want to be called, but I won't be"

foo1() #Prints "I am called"
foo2() #Does nothing
foo3() #Does nothing, even though it is tagged with 'a' 
```

我的问题是关于最后一个函数 foo3。我明白*为什么*它没有被调用。我想知道是否有办法让它在选择器中存在*任何*标签时被调用。理想情况下，该解决方案使得标签只检查一次，而不是每次调用函数时。

附注：我这样做是为了根据`unittest`单元测试中的环境变量选择要运行的测试。我的实际实现使用`unittest.skip`.

编辑：添加了装饰器返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:18:29.477

问题是，如果你装饰它两次，一次返回函数，一次什么也不返回。

```
foo3() -> @selector.tag('a') -> foo3()
foo3() -> @selector.tag('b') -> do_nothing

foo3() -> @selector.tag('b') -> do_nothing
do_nothing -> @selector.tag('a') -> do_nothing 
```

这意味着，无论以何种顺序，您都将一无所获。您需要做的是在每个对象上保留一组标签，并立即检查整个设置。我们可以很好地做到这一点，而不会用函数属性污染命名空间：

```
class Selector(set):
    def tag(self, *tags):
        tags = set(tags)
        def decorator(func):
            if hasattr(func, "_tags"):
                func._tags.update(tags)
            else:
                func._tags = tags
            @functools.wraps(func)
            def wrapper(*args, **kwargs):
                return func(*args, **kwargs) if self & func._tags else None
            wrapper._tags = func._tags
            return wrapper
        return decorator 
```

这带来了一些好处 - 可以检查函数具有的所有标签，并且可以使用多个装饰器进行标记，或者在单个装饰器中提供多个标签。

```
@selector.tag('a')
@selector.tag('b')
def foo():
    ...

#Or, equivalently:
@selector.tag('a', 'b')
def foo():
    ... 
```

的使用[`functools.wraps()`](http://docs.python.org/3.3/library/functools.html#functools.wraps)还意味着该函数保持其原始“身份”（文档字符串、名称等）。

编辑：如果你想做一些包装消除：

```
 def decorator(func):
        if hasattr(func, "_tagged_function"):
            func = func._tagged_function
        if hasattr(func, "_tags"):
            func._tags.update(tags)
        else:
            func._tags = tags
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            return func(*args, **kwargs) if self & func._tags else None
        wrapper._tagged_function = func
        wrapper._tags = func._tags
        return wrapper 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:29:08.733

这对你有用吗：

```
class Selector(set):
    def tag(self, tag_list):
        def decorator(func):
            if set(tag_list) & self:
                return func
            else:
                return do_nothing
        return decorator

@selector.tag(['a','b'])
def foo3():
    print "I want to be called, but I won't be" 
```

# ios - 何时调用 [clLocationManager stopUpdatingLocation]

> ID：14568453
> 
> 赞同：2
> 
> 时间：2013-01-28T18:16:11.363
> 
> 标签：ios, cllocationmanager

为了节省我的应用程序的电量，我决定在应用程序处于活动状态时混合使用，并在应用程序处于后台时`startUpdatingLocation`进入模式。`startMonitoringSignificantLocationChanges`基本上，当应用程序进入后台时，我会执行以下操作：

```
-(void)applicationDidEnterBackground:(UIApplication *)application{
    [myLocationManager startMonitoringSignificantLocationChanges];
} 
```

当应用程序回到前台时，我会执行以下操作：

```
-(void)applicationDidBecomeActive:(UIApplication *)application{
    //Other irrelevant code
    [myLocationManager stopMonitoringSignificantLocationChanges];
    [myLocationManager startUpdatingLocation];
} 
```

无论如何，这对我来说似乎是合乎逻辑的。我的问题是，我应该在事件中调用该`stopUpdatingLocation`方法吗？`applicationDidEnterBackground`像这样：

```
-(void)applicationDidEnterBackground:(UIApplication *)application{
    [myLocationManager stopUpdatingLocation];
    [myLocationManager startMonitoringSignificantLocationChanges];
} 
```

我到底应该在哪里调用该`stopUpdatingLocation`方法？请告诉我是否有不止一个地方应该这样做。我假设任何错误事件都应该停止更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:04:34.807

我看不出你在做什么有什么问题。请注意，我有一个大量使用位置服务的商业应用程序，我正在重写它以提高它的性能并最​​大限度地减少电池使用量。

我发布的版本主要使用 sigLocationChanges（在后台和前台），但是当对 sigLocationChanges 给我的位置质量不满意时切换到使用 startUpdatingLocation，因为我的 UI 必须大致准确地显示用户位置。我在每次事件后立即调用 stopUpdatingLocation 以最大程度地减少电池消耗。在我的发货版本中，这似乎可以正常工作，但我的日志文件发现一小部分用户似乎不断地获得糟糕的位置，而且我正在比我喜欢的更多地旋转 GPS 硬件。

同样在隐私设置中，为您的应用显示的位置图标类型将取决于您上次使用完整 GPS 定位模式的时间。我的总是显示位置图标，表示对电池的影响很大，即使我每天只短暂使用 startUpdatingLocation 几次，这会使我的用户对我的应用程序如何影响他们的电池寿命感到偏执。

在我的新版本中，为了最大程度地减少使用 startUpdatingLocation 的电池消耗，我将它的使用减少到希望为零。当应用程序激活时，我现在直接从位置管理器 cLLocMgr.location 获取当前位置。通常这是一个准确的位置，我的 UI 可以立即正确绘制（或刷新）。当某些视图被激活时，我还会再次检查它，以确保用户在保持我的应用打开的同时是否在移动，显示器跟上。现在，我只在手机在应用程序中绝对需要一个好位置的特定情况下，如果手机的位置不好，我就会启动 GPS 硬件。在这种情况下，我将它的使用时间限制为 2 分钟（我假设 2 分钟的时间足以从 GPS 硬件中获得最佳位置），并等待至少 10 分钟才能再次使用它。

您的问题没有给我足够的信息来说明您需要多么准确以及您的位置显示有多动态。但除非您需要超精确度和动态显示，否则您应该考虑只使用当前位置而不启动 GPS 硬件以节省电池。

编辑：这是我用于 Jeraldo 的实际代码，稍微清理了一下。请注意，我接触它已经一年了，所以我对它有点生锈，希望我没有清理任何东西。

```
 // Called at start to ask user to authorize location data access.
- (void) requestIOSLocationMonitoring {
#if TARGET_IPHONE_SIMULATOR
    // If running in siumaltor turn on continuous updating (GPS mode)
    // This is for testing as significant change isn't useful in simulator
    // Set a movement threshold for new events. This is only used by continiuous mode, not sig change events
    // Keep it as low as possible,but not so low as to generate spurious movements.
    cLLocMgr.distanceFilter = 30;

    // Use continuous location events in simulator.
    // desired accuracy only works in continuious (high power) mode.
    cLLocMgr.desiredAccuracy = kCLLocationAccuracyBest;
    [cLLocMgr startUpdatingLocation];
#else
    // If not in simulator app's default is significant change monitoring
    [cLLocMgr startMonitoringSignificantLocationChanges];
#endif //TARGET_IPHONE_SIMULATOR
}

// Toggle back and forth between continius updates (GPS on) and 
// significant change monitoring
- (void)    setGPSMode: (bool) useGPSMode  {
    // Keep track of time since we last changed GPS mode
    NSTimeInterval secsInThisMode = [[NSDate date] timeIntervalSinceDate: lastModeChange];

    // inGPSMode is an object instance variable app uses to track mode it is in.
    if (inGPSMode != useGPSMode) {
        lastModeChange = [NSDate date];
        if (!useGPSMode) {
            // Tell app to operate as if continuous updating is off 
            inGPSMode = false;
#if TARGET_IPHONE_SIMULATOR
            // But keep using continuous location events in simulator for testing.
            cLLocMgr.distanceFilter = 30;
#else
            // Turn off continious updates for app on actual devices
            [cLLocMgr stopUpdatingLocation];
#endif
        } else if (secsInThisMode > cMinGPSModeBreak) {
            // Only turn on continuous updating again if it's been off long enough
            // Prevents GPS mode from running continiously and killing battery life
            inGPSMode = true;
            cLLocMgr.desiredAccuracy = kCLLocationAccuracyBest;
            cLLocMgr.distanceFilter = kCLDistanceFilterNone;
            [cLLocMgr startUpdatingLocation];
        }
    }
} 
```

# google-chrome - 启动时运行的 Chrome 应用程序？

> ID：14568454
> 
> 赞同：2
> 
> 时间：2013-01-28T18:16:13.697
> 
> 标签：google-chrome, desktop-application, startup

对我来说，设置 Chrome 扩展程序的最简单方法是什么，该扩展程序在我登录 Windows 帐户时启动，并且可以连接到 WebSocket 服务器以检查新消息，然后弹出桌面通知，点击消息网页？

我希望做一个扩展是直截了当的，以及让它与 WebSockets 通信，并发出桌面通知。

但是当我登录到计算机时让它自动启动呢？在 Windows 中执行此操作的好方法是什么？我对在登录时打开 chrome 浏览器不感兴趣，但我当然不介意在任务栏中看到 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-08T22:26:25.640

您可能会查看 chrome.runtime.onStartUp：[https](https://developer.chrome.com/apps/runtime#event-onStartup) ://developer.chrome.com/apps/runtime#event-onStartup ，它是“在安装了此扩展的配置文件首次启动时触发”。

此外，您可以使用 chrome.alarms 安排函数每分钟左右运行一次，在某处打开 WebSocket 等。

如果没有活动窗口，应用程序可能会尝试自行卸载，因此您可以在 chrome.runtime.onSuspend 中调用一些操作（例如在某处加载 XHR）以触发 onSuspendCanceled。

# ruby-on-rails - ruby 中的映射字段值

> ID：14568456
> 
> 赞同：0
> 
> 时间：2013-01-28T18:16:21.037
> 
> 标签：ruby-on-rails, ruby

我有这样的类数组：

```
@types = Type.where("TYP_MOD_ID = ?", params[:mod_id]) 
```

我有字段 TYP_KV_FUEL_DES_ID 这是数字....但是我如何通过 map 方法通过方法更改此值？我试过类似的东西：

```
def get_types_for_mod2
    @types = Type.where("TYP_MOD_ID = ?", params[:mod_id])
    @types.map { |e| e.TYP_KV_FUEL_DES_ID = get_via_designation(e.TYP_KV_FUEL_DES_ID) }
    respond_to do |format|
      format.json { render :json => @types}
    end
  end
def get_via_designation(id)
    designation = Designation.find_by_DES_ID(id)
    destext = DesText.find_by_TEX_ID(designation.DES_TEX_ID)
    destext.TEX_TEXT
  end 
```

那么如何更改 e.TYP_KV_FUEL_DES_ID 的值？

**upd1：** 我不需要提交任何东西！只是为了 json 我获取数据并更改以查看某些字段！没有分贝！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:33:21.407

```
@types = Type.where("TYP_MOD_ID = ?", params[:mod_id]).map do |type| 
  type.TYP_KV_FUEL_DES_ID = get_via_designation(type.TYP_KV_FUEL_DES_ID)
  type
end 
```

在这里，我们将映射查询的结果`Type.where("TYP_MOD_ID = ?", params[:mod_id])`并将其设置`TYP_KV_FUEL_DES_ID`为返回`get_via_designation`

更新：添加地图块将返回“类型”

# java - 为什么我的 JTextField 没有被填充

> ID：14568461
> 
> 赞同：0
> 
> 时间：2013-01-28T18:16:41.083
> 
> 标签：java, swing, jtextfield

我想知道为什么 JTextField 没有被填满，那把 System.out.println 测试都正确完成了吗？有人可以帮我澄清这个疑问吗？我的方法：

```
protected void ApresentaGrupos(List<GrupoBean> grupos) {  
String codigo = "";  
        String grupo = "";  
        for (GrupoBean g : grupos) {  
            codigo = g.getCodigo().toString().trim();  
            grupo = g.getGrupo();  

            System.out.println("" + g.getCodigo().toString().trim()); // TEST
            System.out.println("" + g.getGrupo().toUpperCase()); // TEST
        }  
        this.habilitaCampos();  
        txtCodigo.setText("TEST"); // nor that message is being shown  
        txtGrupo.setText(grupo);  
        System.out.println("teste" + codigo);  
        System.out.println("teste" + grupo);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:18:12.500

在您发布的代码中无法识别问题，因此我们只能猜测。也许您的 txtCodigo 和 txtGrupo JTextFields 与正在显示的不一样。这可能发生在多种情况下，通常是在滥用继承的情况下。这个类是否偶然地从你的另一个类继承？

这也没有意义：

```
 for (GrupoBean g : grupos) {  
        codigo = g.getCodigo().toString().trim();  
        grupo = g.getGrupo();  
    }  
    txtGrupo.setText(grupo); 
```

因为看起来只有 grupos 集合中的最后一个 GrupoBean 才有机会显示在您的 GUI 中。

根据 mKorbel：不过，为了获得更好的帮助，请考虑创建和发布[SSCCE](http://sscce.org)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:25:44.977

可能是在添加`txtCodigo`到之后`container`，您重建了`txtCodigo`并且现在将文本放入新构建的 中`JTextArea`。因此，您放入 txtCodigo 的值并未反映在`JTextArea`容器中实际添加的值中。例如考虑下面给出的代码：

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.JTextField;
public class  DoubleConstruction extends JFrame
{
    JTextField field = new JTextField(20);
    public DoubleConstruction()
    {
        super("JTextArea Demo");
    }
    public void prepareAndShowGUI()
    {
        getContentPane().add(field);
        field.setText("Java");
        field = new JTextField(20);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
    public void setText()
    {
        field.setText("J2EE");
    }
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                DoubleConstruction dc = new DoubleConstruction();
                dc.prepareAndShowGUI();
                dc.setText();
            }
        });
    }
} 
```

在`prepareAndShowGUI()`将字段添加到 后的方法中`ContentPane`，字段被重建。在`main`方法内，虽然我已将字段的内容更改为“J2EE”，但`JTextField`显示的`JFrame`仍然显示“Java”。这些是愚蠢的错误，但发生此类错误的机会并非空穴来风。

# ios - 如何实现一个按钮在另一个视图中切换

> ID：14568462
> 
> 赞同：0
> 
> 时间：2013-01-28T18:16:51.997
> 
> 标签：ios

我是使用 xcode 开发的新手，我正在关注苹果的教程：“第二个 ios 应用程序教程”。我在我的场景“添加瞄准视图控制器”中添加了一个按钮，我想将此视图切换到另一个（BirdsViewController），它有一个鸟的名字列表。在我的故事板中，我在按钮和 BirdsViewController 之间创建了一个 segue，并且还连接了按钮以在内部进行修饰，但是当我运行应用程序时，按钮没有出现。有人可以帮助我吗？谢谢。这是我的代码（我没有实现任何其他方法）：

AddSightingViewController.h

```
@class BirdSighting;

@interface AddSightingViewController : UITableViewController  

@property (weak, nonatomic) IBOutlet UITextField *birdNameInput;

@property (weak, nonatomic) IBOutlet UITextField *locationInput;

@property (strong, nonatomic) BirdSighting *birdSighting;

@property (strong, nonatomic)  UIButton *showBirds;

-(IBAction)displayBirds:(id)sender; 
```

添加SightingViewController.m

```
#import "AddSightingViewController.h"

#import "BirdSighting.h"

#import "BirdsViewController.h"

#import <UIKit/UIKit.h>

@class BirdSighting;

@interface AddSightingViewController ()

@end

@implementation AddSightingViewController

@synthesize showBirds;

-(BOOL)textFieldShouldReturn:(UITextField *)textField {

    if((textField == self.birdNameInput) || (textField == self.locationInput)) {

        [textField resignFirstResponder];   
    }
      return YES;    
}
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if([[segue identifier] isEqualToString:@"ReurnInput"]) {

        if ([self.birdNameInput.text length] || [self.locationInput.text length])

        {
            BirdSighting *sighting;

            NSDate *today = [NSDate date];

            sighting = [[BirdSighting alloc] initWithName:self.birdNameInput.text
                                             location:self.locationInput.text date:today];

            self.birdSighting = sighting;
        }    
    }   
}

 BirdsViewController *viewController;

-(IBAction)showBirds:(id)sender {

    viewController =
    [[BirdsViewController alloc]
     initWithNibName:@"BirdsViewController" bundle:nil];
    [[self navigationController] pushViewController:viewController animated:YES];   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:53:26.587

我没有看到任何分配和添加按钮作为视图控制器视图的子视图。

我认为在应用程序中就像其他文本字段一样，按钮也是 IBOutlet。将按钮声明为 IBOutlet 并将出口连接到界面构建器文件中的按钮。

@property (weak, nonatomic) IBOutlet UIButton *showBirds;

或者分配按钮并作为子视图添加到视图控制器的视图。

# paypal - 在 PayPay 表单上，是否可以对两个选择字段（下拉菜单）进行编码？

> ID：14568464
> 
> 赞同：0
> 
> 时间：2013-01-28T18:16:53.267
> 
> 标签：paypal, html.dropdownlistfor

我知道如何编码相关的选择字段，例如产品的颜色和尺寸，但不确定如何为 2 个不同的产品设置 2 个选择字段（下拉菜单）。我必须编写两个单独的表格吗？或者有没有办法将两者放在相同的形式中。在这里，我展示了后一个选项，但没有骰子。想法？

另外，试图弄清楚如何将空的第一个选项编码为“选择...”

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
   <input type="hidden" name="business" value="buy@mycompany.com"> 
   <input type="hidden" name="bn" value="MyCompany_BuyNow_Annual_US">
   <input type="hidden" name="cmd" value="_cart"> 
   <input type="hidden" name="add" value="1">
   <input type="hidden" name="item_name" value="Annual Subscription"> 
   <input type="hidden" name="return" value="http://www.mycompany.com""> 
   <input type="hidden" name="cancel_return" value="http://www.mycompany.com""> 
   <input type="hidden" name="currency_code" value="USD">

   <p>U.S. Subscription</p> 
   <select name="os0">
      <option value="">Select a Subscription</option>
      <option value="One year">One year: $26</option>
      <option value="Two years">Two years: $52</option>
   </select>
   <input type="hidden" name="on0" value="Length of Subscription">
   <input type="hidden" name="option_select0" value="Sorry, no selection">
   <input type="hidden" name="option_amount0" value="0">
   <input type="hidden" name="option_select1" value="One year">
   <input type="hidden" name="option_amount1" value="26.00">
   <input type="hidden" name="option_select2" value="Two years">
   <input type="hidden" name="option_amount2" value="52.00">
   <input type="hidden" name="option_index" value="0">
   <input type="submit" name="submit" class="button" value="Subscribe US">

   <p>U.S. Renewals</p> 
   <select name="os1">
      <option value="">Select a Renewal</option>
      <option value="One year">One year: $26</option>
      <option value="Two years">Two years: $52</option>
   </select>
   <input type="hidden" name="on1" value="Length of Subscription">
   <input type="hidden" name="option_select0" value="Sorry, no selection">
   <input type="hidden" name="option_amount0" value="0">
   <input type="hidden" name="option_select1" value="One year">
   <input type="hidden" name="option_amount1" value="18.00">
   <input type="hidden" name="option_select2" value="Two years">
   <input type="hidden" name="option_amount2" value="36.00">
   <input type="hidden" name="option_index" value="0">
   <input type="submit" name="submit" class="button" value="Renew US">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:34:47.587

有几种方法可以做到这一点，但考虑到最低限度的复杂性，我会将其编码为两种形式：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
   <input type="hidden" name="business" value="seller_1312096880_biz@test.com"> 
   <input type="hidden" name="bn" value="MyCompany_BuyNow_Annual_US">
   <input type="hidden" name="cmd" value="_cart"> 
   <input type="hidden" name="add" value="1">
   <input type="hidden" name="item_name" value="Annual Subscription"> 
   <input type="hidden" name="return" value="http://www.mycompany.com"> 
   <input type="hidden" name="cancel_return" value="http://www.mycompany.com"> 
   <input type="hidden" name="currency_code" value="USD">

   <p>U.S. Subscription</p> 
   <select name="os0">
      <option value="">Select a Subscription</option>
      <option value="One year">One year: $26</option>
      <option value="Two years">Two years: $52</option>
   </select>
   <input type="hidden" name="on0" value="Length of Subscription">
   <input type="hidden" name="option_select0" value="Sorry, no selection">
   <input type="hidden" name="option_amount0" value="0">
   <input type="hidden" name="option_select1" value="One year">
   <input type="hidden" name="option_amount1" value="26.00">
   <input type="hidden" name="option_select2" value="Two years">
   <input type="hidden" name="option_amount2" value="52.00">
   <input type="hidden" name="option_index" value="0">
   <input type="submit" name="submit" class="button" value="Subscribe US">
</form> 

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
   <input type="hidden" name="business" value="seller_1312096880_biz@test.com"> 
   <input type="hidden" name="bn" value="MyCompany_BuyNow_Annual_US">
   <input type="hidden" name="cmd" value="_cart"> 
   <input type="hidden" name="add" value="1">
   <input type="hidden" name="item_name" value="Annual Renewal"> 
   <input type="hidden" name="return" value="http://www.mycompany.com"> 
   <input type="hidden" name="cancel_return" value="http://www.mycompany.com"> 
   <input type="hidden" name="currency_code" value="USD">

   <p>U.S. Renewals</p> 
   <select name="os0">
      <option value="">Select a Renewal</option>
      <option value="One year">One year: $18</option>
      <option value="Two years">Two years: $36</option>
   </select>
   <input type="hidden" name="on0" value="Length of Subscription">
   <input type="hidden" name="option_select0" value="Sorry, no selection">
   <input type="hidden" name="option_amount0" value="0">
   <input type="hidden" name="option_select1" value="One year">
   <input type="hidden" name="option_amount1" value="18.00">
   <input type="hidden" name="option_select2" value="Two years">
   <input type="hidden" name="option_amount2" value="36.00">
   <input type="hidden" name="option_index" value="0">
   <input type="submit" name="submit" class="button" value="Renew US">
</form> 
```

# ios - 无法从另一个类 IOS 更改 BOOL 的值

> ID：14568469
> 
> 赞同：1
> 
> 时间：2013-01-28T18:17:09.663
> 
> 标签：ios, objective-c, boolean

我遇到一个简单的问题，我试图从另一个类更改一个类的布尔值，但它没有发生，它返回`NO`。

//在推送其他视图控制器之前

```
-(IBAction)editWOD
{
    self.editGirlController= [[AddGirlsView alloc] init];
    self.editGirlController.isEditModeON=YES;
    self.editGirlController.editgirls=girls;
    [self performSegueWithIdentifier:@"editModeGirls" sender:self];
} 
```

添加女孩视图 .h

```
@interface AddGirlsView : UIViewController
{
    BOOL isEditModeON;

}
@property BOOL isEditModeON; 
```

添加女孩视图 .m

```
@synthesize isEditModeON;
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (isEditModeON==NO) {
        NSLog(@"Edit Mode is OFF");
    }
    else{
        [self populateViewOnEdit];
    }

} 
```

代码有什么问题？

+++++++++添加答案+++++++++++++++++++

感谢乔尔，这是答案

```
-(IBAction)editWOD
{
    [self performSegueWithIdentifier:@"editModeGirls" sender:self];
}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"editModeGirls"])
    {
        AddGirlsView *editGirlController  = [segue destinationViewController];
        editGirlController.isEditModeON=YES;
        editGirlController.editgirls=girls;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:24:18.420

我认为问题在于您分配并初始化 AddGirlsView。当您执行 segue 时，它​​可能会重新实例化另一个 AddGirlsView。您应该在 prepareForSegue 中设置此变量。

```
if ([segue.identifier isEqualToString:@"editGirlsMode"]) {
    [segue.destinationViewController setIsEditModeOn:YES];
    [segue.destinationViewController setEditGirls:girls];
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-28T18:23:54.080

```
@property (nonatomic) BOOL isEditModeON; 
```

# forms - 您可以滚动表单的背景图像吗？

> ID：14568472
> 
> 赞同：1
> 
> 时间：2013-01-28T18:17:15.343
> 
> 标签：forms, scroll, background-image

谁能看看这个例子并告诉我为什么背景图像不滚动？我说的是“电子邮件”下方主字段中的蓝线。如果你用文本溢出它，你会得到一个垂直滚动条，但是当你滚动时，背景图像（蓝线）不会。摆弄背景附件没有帮助。

我在 div 中看到了有关此问题的问题（和答案），但在表单字段中没有。

[http://www.eyalmyrthe.nl/contactform.htm](http://www.eyalmyrthe.nl/contactform.htm)

非常感谢！

# python - Python：为什么即使在退出后也会调用except

> ID：14568476
> 
> 赞同：1
> 
> 时间：2013-01-28T18:17:40.230
> 
> 标签：python, python-2.7

请检查以下代码，

```
import sys
try:
    seq=eval(raw_input("Enter seq number: "))
    if seq <= 0 or seq >= 9999:
       print "Sequence number not in range [0001-9999]"
       sys.exit(1)
except:
      print "!!! Sequence number not in range [0001-9999]"
      sys.exit(1) 
```

我给了一个字符串来`eval raw_input`运行。

```
$> python test.py
Enter seq number: "12"

Sequence number not in range [0001-9999]
!!! Sequence number not in range [0001-9999] 
```

为什么接到电话后也不退出`exit`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T18:18:37.313

`sys.exit`只是引发一个异常（`SystemExit`），然后被捕获。作为演示：

```
import sys
import traceback

try:
    sys.exit(1)
except:
    print "This threw the following exception:"
    traceback.print_exc()
# This threw the following exception:
# Traceback (most recent call last):
#   File "test.py", line 5, in <module>
#     sys.exit(1)
# SystemExit: 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T18:19:21.893

`sys.exit`引发`SystemExit`由您的未命名异常处理程序捕获的异常

请注意，拥有一个通用的异常处理程序通常不是一个好主意，因为它在这里很明显。

为了避免`SystemExit`使用您的通用异常处理程序捕获，添加另一个异常处理程序来处理您的`SystemExit`

```
>>> try:
    seq=eval(raw_input("Enter seq number: "))
    if seq <= 0 or seq >= 9999:
       print "Sequence number not in range [0001-9999]"
       sys.exit(1)
except SystemExit:
    pass
except Exception:
      print "!!! Sequence number not in range [0001-9999]"
      sys.exit(1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:27:21.067

这是一个很好的例子，为什么你永远不应该使用裸的 except。无效数字是 ValueErrors，因此：

```
import sys
try:
    seq = int(raw_input("Enter seq number: "))
    if seq <= 0 or seq >= 9999:
       raise ValueError('sequence number not in range [0001-9999]')
except ValueError as e:
    print e
    sys.exit(1) 
```

输出：

```
C:\>test
Enter seq number: 10000
sequence number not in range [0001-9999]

C:\>test
Enter seq number: abc
invalid literal for int() with base 10: 'abc'

C:\>test
Enter seq number: 5 
```

Note`eval`也不受欢迎，因为它会执行用户输入的任何内容，例如`import shutil; shutil.rmtree('/')`.

# ruby-on-rails - UnInitialized Contant Twitter::Grape 使用葡萄示例代码时

> ID：14568477
> 
> 赞同：1
> 
> 时间：2013-01-28T18:17:41.597
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake

我正在尝试使用葡萄制作 Rest API。

为此，我在一个目录中创建了一个 config.ru 文件：

```
require 'rubygems' 
require 'rack'
require './grape_sample'
run Twitter::API 
```

有一个名为grape_sample.rb 的文件：

```
module Twitter
class API < Grape::API

version 'v1', :using => :header, :vendor => 'twitter'
format :json

helpers do
  def current_user
    @current_user ||= User.authorize!(env)
  end

  def authenticate!
    error!('401 Unauthorized', 401) unless current_user
  end
end

resource :statuses do

  desc "Return a public timeline."
  get :public_timeline do
    Status.limit(20)
  end

  desc "Return a personal timeline."
  get :home_timeline do
    authenticate!
    current_user.statuses.limit(20)
  end

  desc "Return a status."
  params do
    requires :id, :type => Integer, :desc => "Status id."
  end
  get ':id' do
    Status.find(params[:id])
  end

  desc "Create a status."
  params do
    requires :status, :type => String, :desc => "Your status."
  end
  post do
    authenticate!
    Status.create!({
      :user => current_user,
      :text => params[:status]
    })
  end

  desc "Update a status."
  params do
    requires :id, :type => String, :desc => "Status ID."
    requires :status, :type => String, :desc => "Your status."
  end
  put ':id' do
    authenticate!
    current_user.statuses.find(params[:id]).update({
      :user => current_user,
      :text => params[:status]
    })
  end

  desc "Delete a status."
  params do
    requires :id, :type => String, :desc => "Status ID."
  end
  delete ':id' do
    authenticate!
    current_user.statuses.find(params[:id]).destroy
  end

end
end
end 
```

当我运行命令`rackup config.ru`时，会发生此错误：

```
/home/ritesh/rails/grape_sample.rb:2:in `<module:Twitter>': uninitialized constant Twitter::Grape (NameError)
    from /home/ritesh/rails/grape_sample.rb:1:in `<top (required)>'
    from /home/ritesh/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/ritesh/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/ritesh/rails/config.ru:7:in `block in <main>'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/builder.rb:55:in `instance_eval'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/builder.rb:55:in `initialize'
    from /home/ritesh/rails/config.ru:in `new'
    from /home/ritesh/rails/config.ru:in `<main>'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/builder.rb:49:in `eval'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/builder.rb:49:in `new_from_string'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/builder.rb:40:in `parse_file'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/server.rb:277:in `build_app_and_options_from_config'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/server.rb:199:in `app'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/server.rb:314:in `wrapped_app'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/server.rb:250:in `start'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/lib/rack/server.rb:141:in `start'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.5.0/bin/rackup:4:in `<top (required)>'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/bin/rackup:19:in `load'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/bin/rackup:19:in `<main>'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>' 
```

这一次，我在 config.ru 中包含了 require 文件，但仍然看到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:35:41.913

您不需要实现 Grape 的 ruby​​gem。

添加行

`require 'grape'`

至`grape_sample.rb`

如果您仍然有问题，请确保您已安装葡萄 gem：

`gem install grape`

# c# - 通过 MVVM 绑定 MenuItem 的命令

> ID：14568482
> 
> 赞同：1
> 
> 时间：2013-01-28T18:18:15.997
> 
> 标签：c#, wpf, xaml, mvvm, menuitem

我有一个系统设置，其中使用 MVVM 架构动态填充 ContextMenu 层次结构。我的所有绑定都正常运行，除了命令。我的视图是一个指定 ItemContainerStyle 的 ContextMenu。

ContextMenu 的 ItemContainerStyle 设置为：

```
<ContextMenu.ItemContainerStyle>
    <Style TargetType="MenuItem">
        <Setter Property="Command" Value="{Binding Command, Mode=OneWay}"/>
        <Setter Property="IsCheckable" Value="{Binding IsCheckable}"/>
        <Setter Property="IsChecked" Value="{Binding IsChecked, Mode=TwoWay}"/>
        <Setter Property="Header" Value="{Binding Label}"/>
        <Setter Property="ItemsSource" Value="{Binding Children}"/>
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=IsVisible}" Value="False">
                <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</ContextMenu.ItemContainerStyle> 
```

到目前为止，还没有 ItemTemplate，因为似乎我已经能够在样式中完成所有所需的功能。

ViewModel 必须使用它包装的模型实例来构造，因此 ContextMenu 的 DataContext 似乎不能显式设置为 ViewModel（编译器抱怨它没有无参数构造函数。抱怨提到类型转换器可以也可以使用，尽管我不确定这实际上意味着什么（可以解决问题）。

我的 ViewModel 的相关部分如下，从以下两个可绑定的只读面向公众的成员开始：

```
public CommandBinding CommandBinding { get; private set; }
public RoutedCommand Command { get { return CommandBinding.Command as RoutedCommand; } } 
```

CommandBinding 及其命令在构造函数中实例化：

```
CommandBinding = new CommandBinding(new RoutedCommand(), CommandBinding_Executed, CommandBinding_CanExecute); 
```

该构造中提到的方法只是对模型的成员进行操作，并实现如下：

```
void CommandBinding_Executed(object sender, ExecutedRoutedEventArgs e)
{
    if (ContextItem.Command != null) ContextItem.Command(ContextItem);
}

void CommandBinding_CanExecute(object sender, CanExecuteRoutedEventArgs e)
{
    e.CanExecute = ContextItem.IsEnabled;
    if (ContextItem.ExecuteConditions != null) e.CanExecute = ContextItem.ExecuteConditions.GetInvocationList().Cast<ExecuteCondition>().All(s => s() == true);
} 
```

似乎当绑定到 Command 实际起作用时，所有项目都显示为灰色，好像 CanExecute 返回 false。但是，当我在 CanExecute 中设置断点时，执行永远不会在该点中断（尽管这可能是由于布局线程造成的？）。即使我明确地将 e.CanExecute 设置为 true 并注释掉 CommandBinding_CanExecute 中的其他行，这些项目仍然显示为灰色。在 XAML 中，我尝试使用和不使用 Path= 绑定到 Command 和 CommandBinding 成员，效果相同。当我将绑定模式设置为 OneWayToSource 时，调试器会适当地抱怨该属性是只读的并且无法操作（我希望 ViewModel 提供命令，所以这是有意的）。

我已阅读其他示例和相关问题的解决方案。对于那些遵循 MVVM 模式的人，我无法确定我的实现有何不同。

对于任何解决方案，我必须坚持我仍然可以要求以模型作为参数来构造 ViewModel，并且我希望视图保持所有 XAML，没有 C# 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:16:04.217

似乎 CommandBinding 是问题所在。我最终创建了自己的 ICommand 实现，它允许我在构造时指定 Execute 和 CanExecute 代表......效果很好。

这解决了问题并且实现很简单，但我仍然不清楚为什么我使用 CommandBindings 不起作用。

# windows-phone-7 - Windows Phone 7.1 - 通过 SmsComposeTask 共享 GPS 位置

> ID：14568484
> 
> 赞同：0
> 
> 时间：2013-01-28T18:18:20.090
> 
> 标签：windows-phone-7, geolocation, sms, bing-maps

我为 wp7 编写了一个简单的导航应用程序。现在我想通过短信集成位置共享。为此，我只需通过 SMS 发送双经度和双纬度值。对于这两个值，接收者必须手动将它们粘贴到 bing 地图或其他网络服务中才能获得我的位置。有没有更好的方法将这些值包装在所谓的“位置对象”中，如果他点击消息，接收者可以解释并在地图上显示他的位置？还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:31:09.177

您可以在 SMS 中填写 GPS 坐标，但现在可以作为接收者对其做出反应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:25:33.407

如果您将您的短信正文转换为带有坐标的 Google 地图或 Bing 地图的 URL，它可以工作。但是我猜你最好还是将它作为推文或电子邮件发送（即组合 URL）。

创建一个这样的 URI：http://maps.google.com/?q=[lat],[long]

例如： http://maps.google.com/?q= [-37.866963,144.980615](http://maps.google.com/?q=-37.866963,144.980615)

# windows - 跳过批处理脚本中的错误消息

> ID：14568489
> 
> 赞同：1
> 
> 时间：2013-01-28T18:18:33.117
> 
> 标签：windows, batch-file

我有一个非常简单的批处理脚本。

```
Start "" "C:\Game.exe" 
```

如果 Game.exe 不存在，则会显示没有 game.exe 的错误消息。我想跳过此类消息，我的意思是如果 game.exe 存在，它会运行它，如果不存在则什么都没有。

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:28:06.650

```
if exist "C:\Game.exe" Start "" "C:\Game.exe" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:26:32.413

例如像这样：

如果不存在 "C:\Game.exe" 转到 ERROR1

开始 "" "C:\Game.exe"

:错误1

# ajax - 使用 AJAX 连接 Facebook HTML5 点赞和评论元素

> ID：14568492
> 
> 赞同：6
> 
> 时间：2013-01-28T18:18:42.993
> 
> 标签：ajax, html, jquery, facebook-like, facebook-javascript-sdk

Facebook 指示我们将以下代码放在我们的页面上：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

而不是我将它包装在一个函数中：

```
function ReloadSocialSharing() {
    //facebook
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=myappid";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
} 
```

并在里面调用它：`$(function () { }`

现在我的点赞按钮和我通过 Facebook 面板发表的评论都显示出来并且工作正常。然后我进行 AJAX 调用并将新的 html 元素拉入我的页面。这些已经有适当的 Facebook 标记，类似于我原来的字段。我像这样进行ajax调用：

```
$('#search').ajaxSubmit(GetSearchAjaxFormOptions(!isDefault, element));

function GetSearchAjaxFormOptions(displayResetPreferencesButton, giveMeFocus) {
    return {
        target: '#search-results',
        data: GetSearchData(),
        success: function () { RunAfterSearchResultsAreReturned(giveMeFocus) },
        error: function (error) {
            alert("Oops. There was an error.")
        }
    };
}

RunAfterSearchResultsAreReturned() {
   ........
   ReloadSocialSharing();
} 
```

这一切都执行得很好，但是，通过 Ajax 调用添加的新社交共享元素没有连接并且不起作用。我错过了什么？

谢谢！

注意：我已经看到了使用 FB.XFBML.parse(); 的注释。但是，我试图避免 XFBML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T08:45:21.197

您的尝试不起作用的（主要）原因是因为这一行：

```
if (d.getElementById(id)) return; 
```

即代码检查 facebook 脚本（您使用包含的其余代码动态添加的）是否已经存在，如果存在，则不再包含它。我相信重复数据删除是有原因的，无论如何，我测试了重新运行代码（通过确保脚本被添加两次）没有成功。

我看到了您关于 XFBML 的注释，但是`FB.XFBML.parse()`即使您实际使用的标记是 HTML5，调用（不带任何参数）似乎也有效：

```
setTimeout(function() {
    $('<div class="fb-like" data-send="false" data-layout="standard"
        data-width="450" data-show-faces="false" data-colorscheme="light"
       data-action="like"></div>').appendTo('#test');
    FB.XFBML.parse();
}, 2000); 
```

[jsFiddle](http://jsfiddle.net/mgibsonbr/L2K6N/)的工作示例。

# android - 如何设置列表的选定位置

> ID：14568493
> 
> 赞同：1
> 
> 时间：2013-01-28T18:18:47.257
> 
> 标签：android

我有一个列表视图，其中包含近 1400 个元素的 android 应用程序将在应用程序启动时可用。我正在尝试实现一个过程，当用户选择项目时，在 1400 个项目的列表中说项目编号 1257。活动会发生应有的变化，但是当用户返回时，我希望重新显示该项目，而不必滚动浏览 1256 个项目来获取它当前我使用 smoothScrollToPosition 来获取该项目，但它所做的是滚动本身，它需要几个秒到那里。

我确实尝试了设置，但它对我没有用。

这是正常的过程还是有没有办法直接跳转到那里而不必观看应用程序本身滚动。

总的来说，它确实比我滚动它时更快，但是当我浏览那么多项目时，我希望有一个更好的解决方案。

任何想法这是我列出列表视图的代码

```
list1=(ListView)findViewById(R.id.list);
adapter=new LazyAdapterB(this, mStrings, list, desc, audiotrack, audiotracksize, appSKU, purchased);
list1.setAdapter(adapter);

list1.smoothScrollToPosition(1258);

list1.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> arg0,
    View arg1, int arg2, long arg3) {
    Intent myIntent;
    myIntent = new Intent(context, MainActivity.class);
    Bundle myBundle = new Bundle();
    myBundle.putString("image", mStrings[arg2]);
    myBundle.putString("title", list[arg2]);
    myBundle.putString("desc", desc[arg2]);
    myBundle.putString("purchased", purchased[arg2]);
    myBundle.putString("audiotrack", audiotrack[arg2]);
    myBundle.putString("audiotracksize", audiotracksize[arg2]);
    myBundle.putString("appSKU", appSKU[arg2]);
    myIntent.putExtras(myBundle);
    startActivity(myIntent);
    }
}); 
```

我在正确的地方做这件事吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:27:03.037

你应该使用[`setSelection(int position)`](http://developer.android.com/reference/android/widget/ListView.html#setSelection%28int%29)

例如

```
 list1.setSelection(1258); 
```

# php - 一次获取所有数据以备将来使用

> ID：14568496
> 
> 赞同：0
> 
> 时间：2013-01-28T18:19:05.843
> 
> 标签：php, mysql, mobile

嗯，这是一个如何设计一个比普通网站使用更少资源的网站的问题。移动端也进行了优化。

就是这样：我正要展示例如 5 个帖子（来自例如博客）的具体概述。然后，如果我点击例如第一篇文章，我会在新窗口中加载这篇文章。但是，与其再次连接到数据库并获取具有特定 ID 的特定帖子，我只需在我之前创建的 5 个帖子的数组中查找该帖子（在 PHP 中），当我获取网站时第一次。

它会保存要下载的数据吗？因为 PHP 也可以在服务器端工作，所以这就是我不确定的原因。

好的，我再解释一下：

方法一：

1.  用户连接到我的网站
2.  5 个帖子被显示并保存到一个数组中（连同它的所有数据）
3.  用户点击第一个帖子并期望获得有关此帖子的更多信息。
4.  我的程序在我的数组中查找帖子并显示它。

方法二：

1.  用户连接到我的网站
2.  5 个帖子被显示
3.  用户点击第一个帖子并期望获得有关此帖子的更多信息。
4.  我的程序再次连接到 MySQL 并从服务器获取帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:23:09.227

首先，这听起来像是过早优化的情况。在测量证明这是明智之举之前，我不会开始缓存数据库之外的任何内容。缓存将您的注意力从手头的核心任务上移开，并引入了复杂性。

如果您确实想将 DB 结果保存在内存中，仅使用在 PHP 处理的 HTTP 请求中分配的数组是不够的。处理完页面后，在该范围内分配的内存不再可用。

您当然可以将结果放在 SESSION 范围内。在 SESSION 中保存一些 DB 结果的好处是可以避免 DB 往返。缺点包括对解决方案进行编程的复杂性增加，在 Web 服务器中使用内存来存储可能永远不会被访问的数据，以及增加数据库中的初始负载以检索用户可能会或可能不会每次都请求的额外页面。

如果 DB 性能在测量后确实导致您错过了性能目标，您可以使用成熟的缓存系统（例如[memcached](http://memcached.org/)）将经常访问的数据保存在 Web 服务器（或专用缓存服务器）的内存中。

最后说明：你说

> PHP 也可以在服务器端工作

那不准确。*PHP仅*在服务器端工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:28:37.833

对我来说，这比第二次调用数据库效率低一点，这就是原因。

第一个查询应该只提取您想要的字段：标题、作者、日期。帖子的内容可能是一个繁重的查询，所以我会排除它（如果你愿意，你可以拉一个预告片）。

然后，如果用户想要帖子的详细信息，我将使用索引键列查询内容。

这样，您就不会为 5 个可能从未见过的帖子提取内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:31:12.210

如果您的 PHP 代码不断地重新连接到数据库，则说明您配置错误并且没有正确使用连接池。如果您已正确调整堆栈，则查询的执行时间最多应为几毫秒。*除非绝对*必要，否则不要缓存。

你在这里提倡的是回避一个严重的问题。如果您的数据库配置正确，数据库查询*应该毫不费力。*解决这个问题，你就不需要走缓存之路了。

将数据从一个请求保存到另一个请求是一种失败的设计，如果做得不*完美*，可能会导致令人尴尬的数据泄露情况，即一个用户看到的是针对另一个用户的内容。这就是为什么在所有其他途径都用尽之后，通常会采用缓存的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T18:22:56.713

您是否考虑过将帖子保存在 div 中，并且仅在用户单击某处时才使其可见？[在这里](https://stackoverflow.com/questions/6957443/how-to-display-div-after-click-the-button-in-javascript)如何做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T18:25:18.820

在代码和数据库之间放置某种缓存。

所以你的代码看起来像

```
if(isPostInCache()) {
    loadPostFromCache();
} else {
    loadPostFromDatabase();
} 
```

去找一些缓存系统，网络上到处都是。您可以使用 memcached 或您可以自己制作的静态缓存（即将帖子保存在服务器上的 txt 文件中）

# joomla - 从 joomla 新闻快讯中删除新闻项目

> ID：14568498
> 
> 赞同：0
> 
> 时间：2013-01-28T18:19:09.193
> 
> 标签：joomla

我正在使用 joomla 新闻快讯来在我的主页上显示 5 个最新项目。新闻快讯附在我的新闻和事件类别中。现在我需要其中一项新闻和事件项目不会显示在我的家庭 newsFlash 中。可以吗，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:01:01.673

对于 Joomla 1.5.26，模板覆盖可能是您最好的选择。请参阅此处了解如何完成： http: [//forum.joomla.org/viewtopic.php?t=145996](http://forum.joomla.org/viewtopic.php?t=145996)

在您的情况下，您将在以下位置创建一个新文件

```
/templates/your_template/html/mod_newsflash/_item.php 
```

您将以下代码放入该文件中。请务必将“99”替换为您文章的 id。您可以从文章管理器表中获得它。

```
<?php // no direct access
defined('_JEXEC') or die('Restricted access'); ?>

<?php 
$my_article_id = $item->id;

if ($my_article_id !== '99') :

    if ($params->get('item_title')) : ?>
        <table class="contentpaneopen<?php echo $params->get( 'moduleclass_sfx' ); ?>">
        <tr>
            <td class="contentheading<?php echo $params->get( 'moduleclass_sfx' ); ?>" width="100%">
            <?php if ($params->get('link_titles') && $item->linkOn != '') : ?>
                <a href="<?php echo $item->linkOn;?>" class="contentpagetitle<?php echo $params->get( 'moduleclass_sfx' ); ?>">
                    <?php echo $item->title;?></a>
            <?php else : ?>
                <?php echo $item->title; ?>
            <?php endif; ?>
            </td>
        </tr>
        </table>
    <?php endif; ?>

    <?php if (!$params->get('intro_only')) :
        echo $item->afterDisplayTitle;
    endif; ?>

    <?php echo $item->beforeDisplayContent; ?>

    <table class="contentpaneopen<?php echo $params->get( 'moduleclass_sfx' ); ?>">
        <tr>
            <td valign="top" ><?php echo $item->text; ?></td>
        </tr>
        <tr>
            <td valign="top" >

           <?php if (isset($item->linkOn) && $item->readmore && $params->get('readmore')) :
              echo '<a class="readmore" href="'.$item->linkOn.'">'.$item->linkText.'</a>';
            endif; ?>
            </td>
         </tr>
    </table>
<?php endif; ?> 
```

相关代码在第二个也是最后一个 PHP 标记中，我在其中插入了一个 IF 检查，用于查找您的文章 ID 并在匹配时跳过它。

# html - 如何在不实际包装的情况下将 div 包装在另一个 div 周围？

> ID：14568499
> 
> 赞同：0
> 
> 时间：2013-01-28T18:19:10.197
> 
> 标签：html, css

我希望我的页面在不调整大小的情况下看起来[像这样](http://libreuniversity.org/subject/Test_title)（免责声明：自己的页面），但是，我希望在调整大小（或移动）时，“简介”会落在“索引”下，看起来就像“历史”的样子，例如。

如果可能的话，我什至希望，在代码中，有索引 div，然后是第一个框（在本例中为“介绍”，但在缺少的情况下，“所需知识”的行为方式与现在的介绍相同） . 这将使后面的 PHP 代码更简单。此外，“介绍”应该自然地流过页面，如上面的链接所示，环绕索引并填充其下方页面的 100%。

[这是我到目前为止所拥有的](http://libreuniversity.org/test/ck)，但我无法让它表现得正确。如果不调整大小，它看起来不错，但是由于它的 % 和固定填充（总共水平 20 像素），“介绍”h2 会首先下降，而文本保持在原位，进入文本中间。我希望，如果 h2 掉下来，文本会以纯 HTML 和 CSS 形式出现。

这甚至可能吗？我正在尽力而为，但我无法让它按照我的意愿行事。这是'test/ck'的相关代码（当它工作时，我会把它放在一个单独的样式表中）：

```
<div style="width: 25%; float: left; min-width: 150px; margin-right: 2%;">
  <h2>
      Index
  </h2>
  <div id="index" style="width: 100%">
    <ul>
      <li><a href="#announcements">Announcements</a></li>
      <li><a href="#description">Description</a></li>
      <li><a href="#first">Subjects</a></li>
      <li><a href="#competency">Competency</a></li>
      <li><a href="#schedule">Schedule</a></li>
      <li><a href="#evaluation">Evaluation</a></li>
    </ul>
  </div>
</div>

<div id='box' style="">
  <h2 style="width: 70%; float: right;">
    <?php echo $_('Introduction'); ?>
  </h2>
  <p>
  Lorem ipsum dolor sit amet, consecte22tur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
  <br><br>
  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
  </p>
</div>

<span style="clear: left; display: block;"></span>

<br><br>

  <h2 id="announcements">Announcements</h2>
  <p>
  Lorem ipsum dolor sit amet, consecte22tur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
  <br><br>
  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
  </p>
  <br><br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:24:33.793

我认为您正在寻找 CSS 媒体查询

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/) [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

您可以像这样在 CSS 中实现页面宽度“中断”：

```
@media all and (max-width: 600px) {
  #index { width: 100% }
  body { background: red}
} 
```

如果页面宽度小于 600 像素，则将使用媒体查询大括号中的任何内容。

媒体查询将继续存在，对于那些使用悲伤的旧浏览器的人来说，它们会“优雅地”降级。

看看我在这里设置的例子：http: [//jsfiddle.net/AqbSY/4/](http://jsfiddle.net/AqbSY/4/)

调整浏览器的大小，看看它是如何工作的。

您不需要在 #box 元素上设置浮点数或大小。

# plasticscm - PlasticSCM - 使用控制台进行管理

> ID：14568507
> 
> 赞同：1
> 
> 时间：2013-01-28T18:19:40.103
> 
> 标签：plasticscm

在尝试确定哪些用户拥有许可证时，我运行命令提示符并执行“CM LI”，命令行等待并且永远不会返回。我什至如何开始调试这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:01:04.143

您可以尝试明确指定服务器位置：

cm licenseinfo --server=yourserver:8087

或者，您可以启用客户端和服务器日志以识别问题（为什么命令未完成）。

[http://www.plasticscm.com/infocenter/technical-articles/kb-enabling-logging-for-plastic-scm-part-i.aspx](http://www.plasticscm.com/infocenter/technical-articles/kb-enabling-logging-for-plastic-scm-part-i.aspx)

您也可以在 Plastic SCM 论坛寻求帮助：www.plasticscm.net

# c - 如何在 C 中创建一个全局二维数组

> ID：14568509
> 
> 赞同：0
> 
> 时间：2013-01-28T18:19:43.273
> 
> 标签：c, arrays, dynamic

全球.h：

```
extern char ** map_stage; 
```

global.c：**此处出现错误 C2099 - Initialization is not a constant**

```
char ** map_stage=create2DCharArray(map_height,map_length*map_length); 
```

函数 create2DCharArray：

```
char ** create2DCharArray(int m, int n)
{ 
int i;
char** array;  
array = (char**) malloc(n*sizeof(char*));  
for (i = 0; i < n; i++) 
   array[i] = (char*) malloc(m*sizeof(char));  
return array;
} 
```

我怎样才能让它工作？它说“错误C2099”......我需要一个全局动态二维数组！

感谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:22:19.807

`map_stage`是一个全局变量，所以它的初始化器应该是常量。您可以创建一个初始化函数来执行此操作。

```
/* global.c */

void init(void)
{
  map_stage = create2DCharArray(map_height, map_length * map_length);
} 
```

另外，请注意您`free`的不可访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:23:02.827

错误 C2099 的意思是“初始化程序不是常量”，这让我相信您已经`map_stage`在全局范围内（即，在任何函数之外）编写了该声明。那不是有效的 C++。

您可以将变量的定义放在那里，但您需要通过函数调用对其进行初始化，因为您的初始化程序不是编译时常量。

# opencv - 缺少文件错误 ndk-build

> ID：14568510
> 
> 赞同：2
> 
> 时间：2013-01-28T18:19:47.357
> 
> 标签：opencv, android-ndk

我一直在努力让它工作，但是当我尝试使用 Cygwin 构建我的项目时，ndk-build 总是给我一个错误。这是我得到的错误：

```
$ /cygdrive/c/work/android-ndk-r8d-windows/android-ndk-r8d/ndk-build
Android NDK: ERROR:jni/Android.mk:opencv_java: LOCAL_SRC_FILES points to a missing file
Android NDK: Check that ././../libs/armeabi/libopencv_java.so exists  or that its path is correct
/cygdrive/c/work/android-ndk-r8d-windows/android-ndk-r8d/build/core/prebuilt-library.mk:43: *** Android NDK: Aborting    .  Stop. 
```

我几乎尝试了所有方法，但错误并没有消失。我在本机代码中使用 OpenCV 库来检测图像中的人脸并将其返回给 java 代码。

有遇到过类似问题的朋友或者有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:40:29.867

在`LOCAL_SRC_FILES :=`指令的 Android.mk 文件中，文件名不匹配。

也就是说，其中声明的 .c 或 cpp 文件之一不存在于 jni 目录中或名称中有拼写错误。

# .htaccess - htaccess 从小重定向到大写

> ID：14568511
> 
> 赞同：0
> 
> 时间：2013-01-28T18:19:50.913
> 
> 标签：.htaccess

有人可以建议，在 joomla 中面临很多重复的 url 问题

A）新闻部分面临的问题

```
 Correct url- www.xyz.com/?page=11&&option=com_latestnews&view=list&Itemid=25
 Wrong url-   www.xyz.com/?page=11&&option=com_latestnews&view=list&itemid=25 
```

如果您在上面看到，在单词**Itemid**中，我在错误的 url 中很小，而在大写中，我在正确的 url 中

B) 面对新闻版块的第二期

```
 Correct url- www.xyz.com/index.php?option=com_latestnews&view=detail&n_id=365&Itemid=10
     Incorrect url-  www.xyz.com/index.php?option=com_latestnews&view=detail&n_id=365&Itemid=25 
```

如果您在上面看到，在单词**Itemid**中，正确的 url 是 10，但不正确的重复 url 是 25

如何通过 .htaccess 301 重定向创建的重复页面来纠正这个问题，任何建议都将是一个救星

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:26:21.650

对于**I** in的情况，`Itemid`您必须专门解决这个问题。然后对于所有重复的项目 ID，您必须明确指出。

案例问题：

```
RewriteCond %{QUERY_STRING} ^(.*)itemid=(.*)$
RewriteRule ^(.*)$ /$1?%1Itemid=%2 [L,R=301] 
```

对于每个来自项目 ID：

```
RewriteCond %{QUERY_STRING} ^(.*)&Itemid=25(&|$)(.*)$
RewriteRule ^(.*)$ /$1?%1&Itemid=10&%3 [L,R=301] 
```

在这里，ID **25**被重定向到**10**。您可以为其余的副本添加任何其他 ID。

# django - 使用backbone.js将外键传递给服务器

> ID：14568518
> 
> 赞同：2
> 
> 时间：2013-01-28T18:20:15.240
> 
> 标签：django, backbone.js, foreign-keys

我有一个使用 django 和tastepie 的服务器以及一个使用backbone.js 的基于Web 的客户端应用程序，我可以正常读取数据，但是当我尝试使用外键添加新模型然后同步时出现问题。

所以我认为最简单的方法是调用自动与服务器同步的 collection.create。如果我在没有外键的表上这样做，它工作正常。但是，当我有一个与服务器数据库有关系的模型时，我不知道我应该如何指定外键。

模型外键最初采用以下格式：`/api/v1/porttype/4/`

如果我尝试构建这样的字符串，我会收到 404 错误，如果我尝试只发送一个 int，我会收到 404 错误。

我不确定服务器期望什么。我不确定这是否是配置问题......我现在有点迷茫。到目前为止，我做了这样的事情：

```
collection.create([ { 'project': '/api/v1/porttype/4/', 'name': 'test' } ]); 
```

`project`在这种情况下将是外键。

编辑：我从服务器返回的堆栈跟踪：

```
{"error_message": "", "traceback": "Traceback (most recent call last)n\n  File \"/Library/Python/2.7/site-packages/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 192, in wrapper\n    response = callback(request, *args, **kwargs)\n\n  File \"/Library/Python/2.7/site-packages/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 397, in dispatch_list\n    return self.dispatch('list', request, **kwargs)\n\n  File \"/Library/Python/2.7/site-packages/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 427, in dispatch\n    response = method(request, **kwargs)\n\n  File \"/Library/Python/2.7/site-packages/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 1165, in post_list\n    updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))\n\n  File \"/Library/Python/2.7/site-packages/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 1774, in obj_create\n    bundle = self.full_hydrate(bundle)\n\n  File \"/Library/Python/2.7/site-packages/django_tastypie-0.9.11-py2.7.egg/tastypie/resources.py\", line 698, in full_hydrate\n    value = field_object.hydrate(bundle)\n\n  File \"/Library/Python/2.7/site-packages/django_tastypie-0.9.11-py2.7.egg/tastypie/fields.py\", line 636, in hydrate\n    value = super(ToOneField, self).hydrate(bundle)\n\n  File \"/Library/Python/2.7/site-packages/django_tastypie-0.9.11-py2.7.egg/tastypie/fields.py\", line 154, in hydrate\n    elif self.attribute and getattr(bundle.obj, self.attribute, None)n\n  File \"/Library/Python/2.7/site-packages/Django-1.3.2-py2.7.egg/django/db/models/fields/related.py\", line 301, in __get__\n    raise self.field.rel.to.DoesNotExist\n\nDoesNotExist\n"} 
```

似乎它无法识别它......从我搜索这个 django 错误的内容来看，似乎你在添加时没有发送非空字段，但不确定

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:51:56.420

为什么不在模型中设置外键，然后在 JSON 有效负载中发送？例如：

不要以这种方式传递引用：

```
collection.create([ { 'project': '/api/v1/porttype/4/', 'name': 'test'} ]); 
```

相反，您只需将服务器端的请求作为另一个参数处理。

在事情的主干方面，我会将上述内容更改为：

```
collection.create([ { 'project_id': 4, 'name': 'test'} ]); 
```

其中 project_id 是对项目表的 foreign_key 引用

然后，在您的控制器代码中，您需要让 ORM 处理其余部分。我把它作为练习留给读者:-)

# php - 魔术方法 php，__call __get 和 __set？

> ID：14568520
> 
> 赞同：4
> 
> 时间：2013-01-28T18:20:21.130
> 
> 标签：php, get, set, call, magic-methods

我的问题是，假设我们有一堂课：

```
class SomeClass{

    private $someProperty;

    public function __call($name,$arguments){
        echo "Hello World";
} 
```

现在当我说：

```
$object = new SomeClass();
$object->someMethod(); 
```

将调用我班级中的 __call 方法。

当我说

```
$object->getSomeProperty(); 
```

__call 会再次被调用吗？如果是这样，__get 和 __set 魔术方法是干什么用的？

当我说

```
$object->someProperty; 
```

那么 __get($someProperty) 会被调用吗？还是会是 __set($someProperty) ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T18:23:45.920

任何时候调用不可访问的方法`__call`都会被调用。

任何时候你尝试读取一个属性都会被调用，`__get`无论是`echo $obj->prop;``$var = $obj->prop;`

最后，每当您尝试写入属性时，`__set`都会调用魔术方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:24:04.903

> __call 会再次被调用吗？

是的。

> 如果是这样，__get 和 __set 魔术方法是干什么用的？

见下文：

> 当我说
> 
> ```
> $object->someProperty; 
> ```
> 
> 那么 __get($someProperty) 会被调用吗？还是会是 __set($someProperty) ？

`__get('someProperty')`因为这个表达式不是赋值。

# mysql - SLEEP，CAST，正则表达式查询解释

> ID：14568521
> 
> 赞同：1
> 
> 时间：2013-01-28T18:20:23.617
> 
> 标签：mysql

我有一个查询：

```
SELECT * FROM tb WHERE id=1 
AND 
sleep(CAST((SELECT 'a' REGEXP '^[n-z]') AS signed) * 15); 
```

我试图了解它是如何工作的。

1) SELECT * FROM tb WHERE id=1 # 很简单，不需要解释

2) `sleep(CAST((SELECT 'a' REGEXP '^[n-z]') AS signed) * 15);`# 这对我来说是个棘手的问题。

我相信事情是：sleep for (-> CAST((SELECT 'a' REGEXP '^[nz]') AS signed) 乘以 15。

我的担忧是：

*   CAST 是一个转换函数（例如从字符串到日期），但在这里它用于将字符串转换为带符号的数字..对吗？

*   REGEXP，我相信是这样使用的：`(SELECT 'a' REGEXP '^[n-z]')`返回 0（零），所以乘以 15 总是 0。但`(SELECT 'p' REGEXP '^[n-z]')`返回 1，所以在这种情况下 DBMS 会休眠 15 秒。

所以，现在最后一个问题是：

*   如果 tb 只有一条名为“bob”的记录，数据库会暂停 15 秒吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:33:27.637

> 如果 tb 只有一条名为“bob”的记录，数据库会暂停 15 秒吗？

不，使用**此**查询，数据库永远不会暂停，因为`CAST((SELECT 'a' REGEXP '^[n-z]') AS signed) * 15`始终返回 0，完全独立于您的记录：它不使用表中的任何列，'a' 是字符串文字。

但除此之外，您分析它是正确的。您显示的查询没有任何意义。

# android - 多次使用相同的服务

> ID：14568527
> 
> 赞同：0
> 
> 时间：2013-01-28T18:20:43.507
> 
> 标签：android, service

我即将完成我的应用程序，并注意到一个“错误”。因为如果用户按下启动服务的按钮，然后按下另一个同样启动服务但带有其他信息的按钮，服务将重新启动，第一次启动就消失了。他们不能意味着我应该编写 100 万个具有相同代码但名称不同的服务类吗？所以每个按钮启动每个服务，我希望不是至少。

那么，有没有办法在服务中重用相同的服务并拥有多个服务？我认为这是一个糟糕的解释，但我希望至少有人明白我的意思并想帮助我:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:48:45.847

解决方案，如聊天中所述：

[https://chat.stackoverflow.com/rooms/23522/discussion-between-alex-oliveira-and-guiceu](https://chat.stackoverflow.com/rooms/23522/discussion-between-alex-oliveira-and-guiceu)

问题是你`startService`每次都在打电话。解决办法是把调用改成`bindService`，这样Service就不会重启了。

服务将一直运行，直到没有更多的上下文绑定到它为止。如果你只绑定一个 Activity，当 Activity 消失时，Service 可以停止。如果您需要它在应用程序启动时连续运行，请尝试从应用程序上下文调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:41:01.347

不确定您所说的不同服务是什么意思，但如果您只是通过单击按钮传递不同的信息，则可以通过附加信息传递信息。在你有按钮的类上，你会在每次按钮点击时放置类似的东西。

```
 Intent i = new Intent(FirstActivity.this, SecondActivity.class);   
    String values = "something";
    i.putExtra("EXTRASNAME", values); 
```

然后接收以下类中的值

```
 Bundle extras = getIntent().getExtras();
    String values = extras.getString("EXTRASNAME"); 
```

如果不同的按钮是（YES OR NO）之类的值，则将值“YES”或值“NO”放在相同的附加字符串中，并且在下一个活动中接收值时，您可以执行一个简单的 if{} 语句来让活动根据额外价值做不同的事情。使用附加功能，您还可以执行 putBoolean/getBoolean 和 putInt/getInt。希望这可以帮助。

# python - Python 文件解析

> ID：14568528
> 
> 赞同：1
> 
> 时间：2013-01-28T18:20:44.357
> 
> 标签：python, csv, file-io, export-to-csv

为了设置上下文，我有一个包含 200-300 个文件的目录，每个文件的大小范围（行数）。我粘贴文件并将它们导出到 csv 文件。我想我上次运行它时 csv 文件有超过 340,000 行。最重要的是，前 8 个文件不断被写入，所以有时在解析时会丢失数据。

现在，每个文件都是这样设置的：

```
DateTime Message Action ActionDetails 
```

我有代码可以浏览所有文件，解析它们，然后输出到 csv 文件：

```
for infile in listing:
    _path2 = _path + infile
    f = open(_path2, 'r')
    labels = ['date', 'message', 'action', 'details']
    reader = csv.DictReader(f, labels, delimiter=' ', restkey='rest')

    for line in reader:
        if line.get('rest'):
            line['details'] += ' %s' % (' '.join(line['rest']))
        out_file.write(','.join([infile,line['date'], line['message'], line['action'], line['details']]) + '\n')

    f.close()
out_file.close() 
```

我想知道复制前 8 个文件的“最佳”方法是什么，这样我在解析时就不会丢失数据。最好我的意思是花费最少的时间，因为目前运行 python 脚本的总时间约为 35-45 秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:30:19.567

我有点无聊。试穿这个尺寸。我实际上没有机会检查它是否正确解析和写入，但除此之外，我相信它应该在给定一些信息的情况下运行。这个问题是使用排队的好机会。让我知道它跑得有多快！

```
from threading import Thread
import Queue
import os
import time
import sys

# declare some global items
# queue that an author thread can write line items to a csv
write_q = Queue.Queue()

# queue filled with files to parse 
read_q = Queue.Queue()

# queue filled with files that have size change during read. Can
# preload this queue to optimize however program should handle any
# file that changes during operation
moving_q = Queue.Queue()

# given csv labels
labels = ['date', 'message', 'action', 'details']

# global for writer thread so it knows when to close
files_to_parse = True

# parsing function for any number of threads
def file_parser():    
    # Each parser thread will run until the read_q is empty
    while True:
        moving = False
        # Test for a file from the read queue or moving queue 
        try:
            if not moving_q.empty():
                try:
                    f_path = moving_q.get(False)
                    moving = True
                # if the moving queue is empty after trying to read
                # might have been snatched by different thread. Ignore error
                except Queue.Empty:
                    pass
            else:
                # No items left in moving queue so grab non moving file
                f_path = read_q.get(False)
        # all files have been dealt with
        except Queue.Empty:
            print "Done Parsing"
            sys.exit()

        # Following will parse a file and test that the file is not being
        # modified during the read
        with open(f_path, 'r') as f:
            # csv reader setup
            reader = csv.DictReader(f, labels, delimiter=' ', restkey='rest')

            # initillized file size (when we started reading)
            pre = os.path.getsize(f_path)

            # store output items in a list so if file is updated during read
            # we can just ignore those items and read file later
            line_items = []

            # parse the file line by line
            for line in reader:
                # Check that file hasn't been updated
                post = os.path.getsize(f_path)
                if pre != post:
                    # if file has changed put the file back on the queue and clear the output lines
                    moving_q.put(f_path)
                    line_items = None
                    break
                # parse the line and add it to output list
                else:
                    if line.get('rest'):
                        line['details'] += ' %s' % (' '.join(line['rest']))
                        line_items.append(','.join([infile,line['date'], line['message'], line['action'], line['details']]) + '\n')

            # don't want to do reading and writing in same thread. Push
            # all line items onto the write thread for the author to deal with    
            if line_items and moving:
                write_q.put(line_items)
                moving_q.task_done()
            elif line_items and not moving:
                write_q.put(line_items)
                read_q.task_done()

# author thread that will write items to a file as other threads complete
# tasks. Should help speed up IO bound processing
def file_author(out_file):
    with open(out_file,'w') as f:
        # parse files until all the parser threads are running
        while files_to_parse or not read_q.empty():
            # only one writer thread so write as items are put into thread
            if not read_q.empty():
                line_items = write_q.get(False)
                for line_item in line_items:
                    f.write(line_item)
                write_q.task_done()
            # sleep in the downtime so we dont overload PC
            else:
                time.sleep(.1)
    print "Done writting"

if __name__ == "__main__":
    # list of file names as you had before
    listing = []
    outfile = "MyNewCSVfile.csv"

    # You can optimize parsing by adding known "moving files" directly
    # to the moving_queue, however program should handle either way
    for infile in listing:
        _path2 = _path + infile
        write_q.put(_path2)

    # make a writer thread
    t = Thread(target = file_author, args = (outfile,))
    t.daemon = True
    t.start()

    # make some parse threads
    for i in range(10):
        t = Thread(target = file_parser)
        t.daemon = True
        t.start()

    # wait for parser threads to finish work
    read_q.join()
    moving_q.join()

    # close author
    files_to_parse = False
    time.sleep(.1)
    print "Complete" 
```

# java - 使用带有 zk 的 javascript

> ID：14568532
> 
> 赞同：1
> 
> 时间：2013-01-28T18:20:57.307
> 
> 标签：java, javascript, html, zk

我正在尝试在 *.zul 中使用 javascript

我有这个脚本来创建一个对象列表（在这个例子中是整数，但它可能是另一种类型）

```
<zscript>
    <![CDATA[
        myList = new ArrayList();
        for(int i = 0;i < 10;i++)
            myList.add(i);

    ]]> 
</zscript> 
```

我想在这个脚本中获得“myList”，所以我可以用它做任何事情。

我尝试使用 getElementById 方法来获取它，但它没有用。

```
<script>
    var elmts=document.getElementById('myList');
        for(var i=0;i<elmts.length)
            alert(document.getElementById('id'+i).innerHTML);

</script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:21:57.407

ZSCRIPT 变量可通过 EL 表达式获得，因此您可以使用`$[myList]`表达式获取 myList，它是 Java 中的 List。

```
<zk>
  <zscript>
    <![CDATA[
    myList = new ArrayList();
    for(int i = 0;i < 2;i++)
        myList.add(i);

    ]]>
  </zscript>
  <script defer="true">
    var elmts = ${myList};
    for (var i =0,len=elmts.length; i != len; i++)
        alert(i);
  </script>
</zk> 
```

# android - 使用 Processing 读取 Android Logcat 消息

> ID：14568537
> 
> 赞同：0
> 
> 时间：2013-01-28T18:21:09.210
> 
> 标签：android, processing, android-logcat

[有没有人在使用Processing](http://processing.org)阅读 Android LogCat 消息时有运气？我一直在考虑在 Processing 中创建一个应用程序，该应用程序由 Android 应用程序上的按钮触发的 logcat 消息控制，但我需要找到一种读取和过滤消息的好方法。我还没有可发布的源代码，因为我不想浪费我的时间来构建一个无法工作的应用程序。另外，我不是在谈论用于从处理代码构建 .apk 文件的[Android 模式。](http://wiki.processing.org/w/Android#Android_Mode)

提前感谢您提供的任何建议，迈克尔

编辑：澄清一下，android 应用程序将有几个按钮，按下一个会产生一个 logcat 消息。（想想远程控制）。处理读取 logcat 消息并做出相应反应。我需要一些能产生类似的东西

```
 if ( myPort.available() > 0) {  
val = myPort.read(); 
```

但是对于安卓

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:20:10.900

可以捕获 Logcat 消息，然后您可以在 Java/Processing 中处理它们并基于此触发操作。即使没有 android 模式，您也应该能够通过 adb 捕获 logcat 消息。

虽然我不明白你为什么要对这个和那个使用非android处理模式的处理。

# android - 通过批处理文件将文件从我的 android 手机复制到我的 PC

> ID：14568539
> 
> 赞同：0
> 
> 时间：2013-01-28T18:21:15.067
> 
> 标签：android, batch-file, adb

我需要创建一个可以将日志文件复制到 PC 的批处理文件。我创建的批处理文件不起作用。当我手动运行所有命令时，它可以工作，但是在放入脚本时它会挂起。以下是各个命令：

```
adb shell
run-as com.program
cat /data/data/com.program/files/logfile.log > /sdcard/logfile.log
exit (leave shell)
adb pull /sdcard/logfile.log c:\logs\logfile.log 
```

这是我所拥有的不起作用的：

```
@echo off
cls
Echo Copying Log files to SD Card:
echo ------------------------------
echo.
@adb shell run-as com.xerox
cat /data/data/com.program/files/logfile.log > /sdcard/logfile.log
exit
adb pull /sdcard/logfile.log.0 c:\logs\logfile.log

pause 
```

它所做的只是在“”命令运行时进入 shell`@adb shell run-as com.program`并挂在那里，之后我什么也做不了。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:32:38.017

试试这个单行命令：

```
$adb shell run-as com.example.name cat /data/data/com.example.name/files/logfile.log > c:\logs\logfile.log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:26:55.627

当您`adb shell`第一次运行时，您不再处于桌面的控制台会话中。你现在在手机壳里。因此，您的计算机仍在等待`adb shell`命令完成，然后再尝试运行该`cat`命令。由于您的批处理文件将永远不会退出`adb shell`，因此它会挂起。

# knockout.js - Knockout JS 清除函数 ko.observable

> ID：14568541
> 
> 赞同：10
> 
> 时间：2013-01-28T18:21:34.333
> 
> 标签：knockout.js

我想删除/清除其绑定的字段。

```
self.Selected = ko.observable();

"Selected": {
    "ID": 5,
    "Name": "22",
    "Active": true,
    "Temp": "2013-01-28T18:14:48.340Z"
  } 
```

self.Selected.remove() ---> 错误：没有“删除”方法

self.Selected.removeAll(); --> 无法调用未定义的方法“removeAll”

self.Selected.cleanNode()--->错误：没有方法'cleanNode'

[http://jsfiddle.net/yvTFN/24/](http://jsfiddle.net/yvTFN/24/) ：所以你可以看到一个工作示例

编辑名称后，self.update = 函数将起作用，然后应清除属性 Selected，否则，如果再次单击更新（无值），该值将更新为空字符串。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T19:51:52.860

只需将值设置`Selected`为`null`：

```
self.Selected(null); 
```

**编辑：**您的 jsfiddle 使用`ko.removeNode`的不是您想要的。

有关工作版本，请参阅：http: [//jsfiddle.net/yvTFN/26/](http://jsfiddle.net/yvTFN/26/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:59:45.607

```
self.Selected.clearBindings = function __clearSelection__() {
    self.Selected = new ko.observable(self.Selected());
    self.Selected.clearBindings = __clearSelection__;
} 
```

这种方法可能会满足您的需求，具体取决于您真正需要什么......有一些警告

*   我不知道 KnockoutJS 的内部结构
*   在某些浏览器中可能会有内存泄漏（IE<9）
*   如果这是一个长时间运行的页面，并且多次调用此方法，您可能会得到意想不到的结果。

# ios - 如何以相反的方向对获取的请求结果进行排序？

> ID：14568542
> 
> 赞同：1
> 
> 时间：2013-01-28T18:21:34.750
> 
> 标签：ios, core-data

我有实体消息。每条消息都包含时间戳。我想一次只显示 20 条最后的消息，从最旧的到最新的。

要获得最后 20 个，我执行以下代码

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Message" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];
[fetchRequest setFetchBatchSize:20];
[fetchRequest setFetchLimit:20];
NSSortDescriptor *timeDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"time" ascending:NO] autorelease];
[fetchRequest setSortDescriptors:timeDescriptor];
NSFetchedResultsController *aFetchedResultsController = [[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"data" cacheName:nil] autorelease];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController; 
```

但在结果中我想显示升序：YES。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:51:27.283

难道你不能只取总数 # 并减去当前行以获得反向排序。所以 0 -> 20, 1 -> 19, ... 20 -> 0。假设您使用的是带有 1 部分的 tableView，代码看起来像（未经测试）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:0];
NSInteger reverseRow = [sectionInfo numberOfObjects] - indexPath.row - 1;
NSIndexPath *reverseIndexPath = [NSIndexPath indexPathForRow:reverseRow inSection:indexPath.section];    
id myObject = [self.fetchedResultsController objectAtIndexPath:reverseIndexPath];
} 
```

# python - 将 matplotlib 数据单位转换为标准化单位

> ID：14568545
> 
> 赞同：7
> 
> 时间：2013-01-28T18:21:37.733
> 
> 标签：python, matplotlib, plot

有谁知道如何将 matplotlib 数据单位转换为标准化单位？

我需要它的原因是我需要在另一个情节之上创建一个子情节。和默认语法：

```
plt.axes([0.1,0.1,0.3,0.3]) 
```

需要归一化坐标，但我想使用数据坐标：

例如这段代码：

```
 plt.plot([0,2],[2,4]);
  plt.axes([0.3,.3,0.4,.4]) 
```

产生这个：

![在此处输入图像描述](../Images/3f3c1bde5375d2fef3ea4f4ea3098406.png) 但我希望能够使用它的数据坐标来定义子图的位置，例如 [0.7,2.5,1.7,3.5]。我试图摆弄axes.transData、axes.get_transform()等，但没有成功找到合适的函数来完成这项工作

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T20:27:59.523

这是一种方法：

内`axes`印在`0.5, 2.5, 1.0, 0.3`（外`axes`坐标）

![内轴以 0.5、2.5、1.0、0.3 打印（外轴坐标）](../Images/b8cea935a15ba4b2ee06a6bfc52c27c2.png)

您基本上需要两种转换——一种从 src-coords 到 display，另一种从 display 到 dest-coord。从文档似乎没有直接的方法： http:
[//matplotlib.org/users/transforms_tutorial.html](http://matplotlib.org/users/transforms_tutorial.html)

```
bb_data = Bbox.from_bounds(0.5, 2.5, 1.0, 0.3)
disp_coords = ax.transData.transform(bb_data)
fig_coords = fig.transFigure.inverted().transform(disp_coords) 
```

`ax`并且`fig`都随身携带变压器 - 显示坐标！
如果你打电话`inverted`给他们，你会得到一个反方向的变压器。

以下是上述示例的完整代码：

```
import matplotlib.pyplot as plt
from matplotlib.transforms import Bbox

plt.plot([0,2], [2,4])
fig = plt.gcf()
ax = plt.gca()

bb_data = Bbox.from_bounds(0.5, 2.5, 1.0, 0.3)
disp_coords = ax.transData.transform(bb_data)
fig_coords = fig.transFigure.inverted().transform(disp_coords)

fig.add_axes(Bbox(fig_coords))

plt.show() 
```

# java - 不使用滚动条时，如何在 Mac 上检测 JScrollPane 的滚动？（触控板滚动）

> ID：14568547
> 
> 赞同：1
> 
> 时间：2013-01-28T18:21:39.830
> 
> 标签：java, macos, swing, jscrollpane, trackpad

简单的问题，可能是一个同样简单的答案 - 但我在文档中找不到它：

我当前的实现在 JScrollPane 的 ScrollBars 上使用 MouseListener 来检测用户滚动动作。但是，在 MacBook 上，用户也可以使用触控板（双指拖动）来修改 JViewport 的 View 的位置，而无需使用 ScrollBars。如何以编程方式检测到这一点？

更多：有几个（未回答的）问题询问检测触控板手势的方法。这似乎在“普通的旧 Java”中是不可能的。我正在寻找一种解决方案，它不关心导致滚动发生的特定用户操作，而是检测到 JViewport 在视图上的位置已经改变。当触控板手势发生时，JScrollPane 以某种方式被告知执行滚动操作，因此我希望避免检测它是如何发生的（在这种情况下这可能是不可能的），而是检测用户输入发生的结果。

继续搜索，刚刚找到这个：[Java trackpad 2-finger scroll listener](https://stackoverflow.com/questions/8256888/java-trackpad-2-finger-scroll-listener/8257163#8257163)，这表明一种方法可能是使用 MouseWheelListener。这仍然是检测用户输入而不是结果，但可能是我将探索的可行选项。

# android - Android：ListAdapter 示例重绘相同的内容

> ID：14568554
> 
> 赞同：2
> 
> 时间：2013-01-28T18:22:05.077
> 
> 标签：android, listadapter

我使用此示例中的 ListAdapter：

[http://code.google.com/p/au-optimizing-layouts-201/source/browse/au_optimizinglayouts/src/com/example/android/training/optimizinglayouts/OptimizedListAdapter.java?r=4](http://code.google.com/p/au-optimizing-layouts-201/source/browse/au_optimizinglayouts/src/com/example/android/training/optimizinglayouts/OptimizedListAdapter.java?r=4)

这个例子不是很好，因为列表中的元素会根据我滚动的速度被绘制多次。那是因为只重用了一个

```
private FakeImageLoader mFakeImageLoader; 
```

如果 FakeImageLoader.java getImage() 将加载真实图像。需要做什么才能让这个示例运行并保持性能？

```
public class OptimizedListAdapter extends BaseAdapter{

        ...
        private FakeImageLoader mFakeImageLoader;

public OptimizedListAdapter(Context cxt)
        {
                // Cache the LayoutInflate to avoid asking for a new one each time.
                mLayoutInflater = LayoutInflater.from(cxt);
                mFakeImageLoader = new FakeImageLoader(cxt);
                ...

 public View getView(final int position, View convertView, ViewGroup parent)
        {
        // A ViewHolder keeps references to children views to avoid unneccessary calls
        // to findViewById() on each row.
        ViewHolder holder;

                // When convertView is not null, we can reuse it directly, there is no need
        // to reinflate it. We only inflate a new View when the convertView supplied
        // by ListView is null.
                if(convertView==null)
                {
                        convertView = mLayoutInflater.inflate(R.layout.listitem, null);

                        // Creates a ViewHolder and store references to the two children views
            // we want to bind data to.
            holder = new ViewHolder();
            holder.icon = (ImageView) convertView.findViewById(R.id.listitem_image);
            holder.text = (TextView) convertView.findViewById(R.id.listitem_text);
            holder.timestamp = (TextView) convertView.findViewById(R.id.listitem_timestamp);
            convertView.setTag(holder);
                }else
                {
                        holder = (ViewHolder) convertView.getTag();
                }

                //holder.icon.setImageDrawable(drawable);
                holder.text.setText(new StringBuffer(ITEM_PRE_TEXT).append(position));
                holder.timestamp.setText(""+(System.currentTimeMillis()-START_TIMESTAMP));
        holder.position = position;

        //during a fast scroll this could start 100's of threads, need a thread pool processing them!
        //see previous ImageLoader.
                new AsyncTask<ViewHolder, Void, Bitmap>() {
                        private ViewHolder v;

                        @Override
                        protected Bitmap doInBackground(ViewHolder... params) {
                                v = params[0];
                                return mFakeImageLoader.getImage();
                        }

                        @Override
                        protected void onPostExecute(Bitmap result) {
                                super.onPostExecute(result);
                                if(v.position == position)
                                {
                                        v.icon.setImageBitmap(result);
                                }
                        }

                  }.execute(holder);
                  //holder.icon.setImageBitmap(mFakeImageLoader.getImage());

                return convertView;
        } 
```

谢谢塔塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:46:28.790

我在一个应用程序中使用了这个[通用图像加载器库](https://github.com/nostra13/Android-Universal-Image-Loader)通用图像加载器库来下载图像，它对我来说更有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:18:30.687

这就是我用于延迟加载的方法。请注意，此代码已修改（删除了您不需要查看 xD 的内容）并且没有经过测试，只是为了分享这个想法。

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public final class ResultsAdapter
        extends BaseAdapter
{

    // this is used for runnint on UI thread, as View.post did not always executed for me
    private Activity host;
    private ExecutorService service;

    public ResultsAdapter(Activity host)
    {
        this.host = host;
    }

    /**
     *  Set new data to this adapter. Or if your data will not change, you can do this in constructor
     */
    public void refresh(List<MyClass> data)
    {
        if (this.service != null) {
            this.service.shutdownNow();
        }

        this.data = data;

        this.service = Executors.newSingleThreadExecutor();
        this.notifyDataSetChanged();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        ...
        MyClass item = items.get(position);
        holder.image.setTag(Long.valueOf(item.getId()));
         try {
            this.service.submit(new Job(current.getImageURL(), h.logo, Long.valueOf(item.getId())));
        } catch (Throwable e) {
        }
        ...

    }

    private final class Job
            implements Runnable
    {

        private final ImageView logo;
        private final Long logoTag;
        private final String URL;

        private Job(String url; ImageView logo, Long logoTag)
        {
            this.URL = url;
            this.logo = logo;
            this.logoTag = logoTag;
        }

        @Override
        public void run()
        {
            Thread t = Thread.currentThread();
            t.setPriority(Thread.NORM_PRIORITY - 1); //not to load ui thread much
            ...
            //load my stuff
            ...
            // logo tag could change during scrolling. getView could be called for the same reused view, so we check if we are not currently setting old data.
            if (logo.getTag().equals(logoTag)) {
                host.runOnUiThread(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        logo.setImageBitmap(myStuff);
                    }
                }
            });
        }
    }
} 
```

但是我在快速滚动过程中仍然遇到一些数据变化。告诉我这是否使它不那么引人注目。

# r - R中的 coplot - 如何判断哪个情节是哪个情节

> ID：14568564
> 
> 赞同：9
> 
> 时间：2013-01-28T18:22:34.893
> 
> 标签：r, plot, loess

我`coplot`在 R 中使用来绘制一些条件图：

```
coplot(var1 ~ var2 | var3, data=dtb, number=5, overlap=.1, panel=function(x,y, col, pch) {idx = order(x); lines(x[idx], predict(loess(y ~ x))[idx], pch = pch, col = col)}) 
```

在这种情况下，如何判断哪个图对应于条件变量的哪个“桶” `var3`？

```
> dput(dtb)
structure(list(var1 = 1:50, var2 = c(50L, 49L, 48L, 47L, 46L, 
45L, 44L, 43L, 42L, 41L, 40L, 39L, 38L, 37L, 36L, 35L, 34L, 33L, 
32L, 31L, 30L, 29L, 28L, 27L, 26L, 25L, 24L, 23L, 22L, 21L, 20L, 
19L, 18L, 17L, 16L, 15L, 14L, 13L, 12L, 11L, 10L, 9L, 8L, 7L, 
6L, 5L, 4L, 3L, 2L, 1L), var3 = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 
8L, 9L, 10L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 
8L, 9L, 10L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L)), .Names = c("var1", 
"var2", "var3"), row.names = c(NA, -50L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T23:47:43.503

显然它是从左到右和从下到上的，这意味着如果你设置它会更容易阅读`rows=1`：

```
# determine how many levels in var3
num <- length(unique(dtb$var3))

# plot in one row using all levels of var3
coplot(var1 ~ var2 | var3, data=dtb, 
number=num, 
overlap=.1, 
col=rainbow(num), 
type="o",           # plot symbols and lines
cex=2,              # make symbols larger
pch=as.character(c(seq(from=1,to=(num-1)),"T")), # use chars as symbols
rows=1)                                          # as.character not required 
                                                 # due to "T" 
```

![在此处输入图像描述](../Images/a364a1e1039af9c1073c3a2b6e2cd336.png)

```
# plot in two rows
coplot(var1 ~ var2 | var3, data=dtb, 
number=num, 
overlap=.1, 
col=rainbow(num), 
type="o",           # plot symbols and lines
cex=2,              # make symbols larger
pch=as.character(c(seq(from=1,to=(num-1)),"T")), # use chars as symbols
rows=2)                                          # as.character not required 
                                                 # due to "T" 
```

![在此处输入图像描述](../Images/c449b945193990d2b1bde75bb00f57de.png)

# powershell - Powershell Azure 管理 cmdlet 的凭据

> ID：14568566
> 
> 赞同：1
> 
> 时间：2013-01-28T18:22:37.093
> 
> 标签：powershell, azure, azure-sql-database, azure-powershell

验证 powershell azure 管理 cmdlet 的选项有`New-AzureSqlDatabaseServer`哪些`New-AzureSqlDatabase`？

看起来`New-AzureSqlDatabaseServer`需要明确传递管理员的用户名和密码，而`New-AzureSqlDatabase`需要知道上下文（可以使用cmdlet 或通过传递纯文本密码`Get-Credential`手动创建类型的对象来创建上下文）`PSCredential`

想知道是否有其他方法可以在不传递/提示输入管理员用户名或密码的情况下对这些管理 cmdlet 进行身份验证？我正在寻找可以一次导入部署服务器的发布设置证书行中的内容。

**背景**- 我希望使用 powershell 自动创建 SQL azure 服务器和数据库，并尝试执行此操作而无需提示/传递管理员密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:23:03.833

因此，`New-AzureSqlDatabaseServer`请使用您的订阅凭据。您当前可以创建一个使用 a 的上下文`New-AzureSqlDatabase`，您可以通过为密码`PSCredential`实例化 a来创建该上下文 -命令行开关可以帮助您解决这个问题。`SecureString``ConvertTo-SecureString`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T18:09:58.213

我一直在寻找同样的东西，我发现了一个技巧来得到它......

```
$cred=Get-Credential
$userName=$cred.UserName
$password=$cred.GetNetworkCredential().Password
New-AzureSqlDatabaseServer -Version "12.0" -AdministratorLogin $userName -AdministratorLoginPassword $password -Location "West US" 
```

参考：[解密 PowerShell 安全字符串密码](http://blogs.technet.com/b/heyscriptingguy/archive/2013/03/26/decrypt-powershell-secure-string-password.aspx/%22Decrypt%20PowerShell%20Secure%20String%20Password%22)

# java - 为什么 Elastic Search java API 会忽略我们的查询限制？

> ID：14568569
> 
> 赞同：6
> 
> 时间：2013-01-28T18:22:49.503
> 
> 标签：java, elasticsearch

我正在使用这段代码：

```
client.prepareSearch("test").addSort("dateUpdated", SortOrder.DESC)
            .setSearchType(SearchType.DFS_QUERY_AND_FETCH)
            .setIndices("reach")
            .setTypes(types)
            .setQuery(QueryBuilders.queryString(queryString))
            .setFrom(0).setSize(2).setExplain(true)
            .execute()
            .actionGet() 
```

客户端是远程客户端。总共有 5 个结果，根据我上面的内容，我只希望返回两个结果。然而所有5个都回来了。如果我将大小设置为 0，则什么都不会返回（如预期的那样）我错过了什么？我觉得我对 from/size 的东西有误解。我的查询字符串只是“名称：*”。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-29T10:23:08.117

这是关于如何设置大小而不用担心分片数量的另一种解释。 [http://elasticsearch-users.115913.n3.nabble.com/About-setsize-Java-API-td3216996.html](http://elasticsearch-users.115913.n3.nabble.com/About-setsize-Java-API-td3216996.html)

“查询和获取”是最快的搜索类型，但存在获取每个分片指定大小的问题。使用“查询然后获取”将解决问题。当没有指定时，它也是默认的搜索类型。

有关搜索类型的更多信息： [http ://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-search-type.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-search-type.html)

# asp.net-mvc-3 - 在 ASP.Net MVC 中，控制器函数从哪里接收参数数据？

> ID：14568570
> 
> 赞同：1
> 
> 时间：2013-01-28T18:22:52.560
> 
> 标签：asp.net-mvc-3

我是 ASP.net、MVC、C# 的新手，我正在做一个需要我从数据库中删除一个人的项目。该表已专门设置以适应添加和删除用户，因为将有少数人使用此特定应用程序。

我无法理解 Controller Post 函数从何处获取其参数。

我的控制器包含：

```
public ActionResult DeleteUser()
{
    return View(new tblPermission());
}

[HttpPost]
public ActionResult DeleteUser(int? id)
{
    if(id == null)
    {
         return View(id);
    }

    Permission.DeleteUser((int)id);

    return RedirectToAction("AdminIndex");
} 
```

当我测试这个函数时，我总是遇到 id == null 条件，因为我没有传入 id。让我感到困惑的是，我如何让用户 ID 将其传递给这个函数调用？我是否需要获取这些信息并将其传递到我的视图层中？

这是我的视图层：

```
@model MAA_v2.Models.tblPermission

<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">  </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Remove</legend>

        <p>
            <input type="submit" value="Remove" name="Remove" class="button action-button "    />
            @Html.ActionLink("Back", "AdminIndex", "Maintenance", new { @class = "button action-button" })
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to Admin Maintenance", "AdminIndex")
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:25:13.687

例如，值是从 http 表单传递的

```
<input type="hidden" id="id" name="id" value="123"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:32:11.333

您可以为此使用 html 帮助程序。假设您的视图模型具有包含用户 ID 的属性，那么您可以这样做：

```
@using (Html.BeginForm()) {
        <p>
            @Html.HiddenFor(model => model.Id)
            <input type="submit" value="Remove" name="Remove" class="button action-button "    />
            @Html.ActionLink("Back", "AdminIndex", "Maintenance", new { @class = "button action-button" })
        </p>
} 
```

# backbone.js - Backbone Boilerplate - 动态路由 - 如何将 id 传递到视图中？

> ID：14568571
> 
> 赞同：1
> 
> 时间：2013-01-28T18:22:55.993
> 
> 标签：backbone.js, backbone-routing

我正在使用[Backbone Boilerplate](https://github.com/tbranyen/backbone-boilerplate)使用 Backbone.js ，我正在寻找一种将动态路由的 id 传递到视图中的方法。所以视图可以下载东西（通过xhr）取决于该id中的字符串。

静态路由通常如下所示：

```
router.on('route:some-route', function () {
  require(['views/some-view'], function (ViewPage) {
    var viewPage = Vm.create(appView, 'viewPage', ViewPage);
    viewPage.render();
  });
}); 
```

对于动态的，您只需要包含路由参数作为参数：

```
router.on('route:some-route', function (id) {
  ......
}); 
```

所以我需要一个解决方案，可以将路由参数传递到视图中。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:49:26.800

好的，我想通了。这很简单。您只需要传递 id 即可查看渲染。

```
viewPage.render(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:49:43.947

看看我的主干样板[https://github.com/hbarroso/backbone-boilerplate](https://github.com/hbarroso/backbone-boilerplate)

我认为这正是动态路由所需要的

# ruby-on-rails - 将 Rails cookie 设置为 1 天后过期

> ID：14568576
> 
> 赞同：6
> 
> 时间：2013-01-28T18:23:15.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, cookies, controllers

浏览此处的文档[http://api.rubyonrails.org/classes/ActionDispatch/Cookies.html](http://api.rubyonrails.org/classes/ActionDispatch/Cookies.html)，并按如下方式设置 Rails cookie：

`cookies[:votes_left] = { :value => 3, :expires => 24.hours.from_now }`

在我的浏览器（Chrome）中，它报告了正确的值，但`Invalid Date`在 Expires 列（网络> Cookies）下给了我。

我设置的日期不正确吗？我尝试了 Time 对象的变体，但始终得到相同的结果，即**具有无效 expire 的正确值 cookie**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:16:33.290

我自己对此进行了测试，我认为您的代码没有问题。正如@Nevir 所说，检查您的服务器时钟是否正确。唯一的问题是，如果它是错误的服务器时间并且它实际上是在今天的日期之前设置过期，它不会设置 cookie。

尝试添加`Rails.logger 24.hours.from_now`只是为了查看它的输出。

但是，是的，您正在正确设置 expires 参数。

# vba - 为excel构建一个返回字符串的函数

> ID：14568577
> 
> 赞同：0
> 
> 时间：2013-01-28T18:23:16.820
> 
> 标签：vba, excel

我正在练习构建在单元格中用作公式的函数，并且似乎遇到了障碍。只要在单元格中使用时不返回字符串，下面的代码就可以工作。此代码非常适用于整数，甚至在我编写子代码以使用该函数时也适用于字符串。我似乎无法弄清楚为什么当我在单元格的公式中使用它时它会返回

```
Function bIsBlank(x As String) As String

Dim y As String

If x = "" Then  'check to see if it is blank
    Exit Function
Else 
    y = Evaluate(x) 'solve the formula that is pulled in

    If y = "0" Then 'check to see if formula equals zero
        y = ""      'set to nothing if it is zero
    End If
End If

    'below is my attempt to fix it by adding quotes on either side of the string
    'this did not work
    y = Chr(34) & y & Chr(34)

'this seems to solve for a sub but not a formula in a cell for strings
bIsBlank = y

End Function 
```

* * *

问题是我不需要使用评估功能。我引入的公式已经解决了。所以说我有一个解决“A”的vlookup。在代码中 X = "A" 不是我最初预期的字符串 vlookup(a1,a5:b10,2,0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:28:44.270

`1.`始终使用`Option Explicit`

`2.` `String`是值类型，不能作为`Null`参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:12:09.380

这是你正在尝试的吗？

```
Option Explicit

Function bIsBlank(Optional x As String) As String
    Dim y As String

    bIsBlank = ""

    If x = "" Then Exit Function

    y = Application.Evaluate(x)

    If y = 0 Then bIsBlank = "" Else _
    bIsBlank = y
End Function 
```

**各种场景**

![在此处输入图像描述](../Images/f9f7a56d5979d60484db74105ae4f358.png)

![在此处输入图像描述](../Images/a9f7955db8cb7ea84593b37fd5e08ab6.png)

**注意**：一旦输入公式，然后更改单元格中的值`A1:A10`，`bIsBlank()`则不会自动计算。你必须使用`Application.Volatile`它。请参阅下面的示例

```
Option Explicit

Function bIsBlank(Optional x As String) As String
    Dim y As String

    Application.Volatile

    bIsBlank = ""

    If x = "" Then Exit Function

    y = Application.Evaluate(x)

    If y = 0 Then bIsBlank = "" Else _
    bIsBlank = y
End Function 
```

# jquery - 尝试在选择框容器中使用滚动条隐藏容器

> ID：14568579
> 
> 赞同：3
> 
> 时间：2013-01-28T18:23:29.753
> 
> 标签：jquery, css, internet-explorer, google-chrome, drop-down-menu

[这是我的例子。](http://www.tomryandesign.com/dev/selectbox/)

我正在使用选择框插件的略微修改版本。我所做的修改之一是添加一个限制选项容器高度的类，并在它超过最近的相对定位父级高度的 50% 时添加一个滚动条。但是现在当我尝试单击并拖动容器中的滚动条（特别是在 IE 和 Chrome 中）时，容器会消失，就好像我在它外部单击过一样。

有没有办法检测焦点何时在滚动条上？或者您可以推荐对插件的任何其他修改，以防止选项消失，直到选择一个或容器外确实有一个点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:33:08.737

当您在创建的 ul 之外单击时，您已将其设置为隐藏选择框。将其更改为单击时隐藏`.selectbox-wrapper`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:52:17.560

我最终通过将这些行添加到选择框插件来解决问题：

```
$container
.mousedown(function (e) {
    hasfocus = 1;
})
.mousemove(function (e) {
    hasfocus = 0;
})
.scroll(function (e) {
    $input.focus();
}); 
```

# c# - HtmlHelper DropDownListFor 错误，

> ID：14568586
> 
> 赞同：0
> 
> 时间：2013-01-28T18:23:55.633
> 
> 标签：c#, asp.net, asp.net-mvc, html-helper, html.dropdownlistfor

我正在尝试学习 MVC 4，并且有大约一年的 ASP.NET 开发经验和大约一年半的 C# 经验（都是我自己的时间，而不是与雇主一起）。现在我受雇了，我的工作场所要求我了解 MVC 4（虽然没有使用 Razor，但让事情变得更复杂......）。无论如何，我正在关注 Adam Freeman 的“Pro ASP.NET MVC 4”一书，在第 32 和 33 页上，它具有以下 RsvpForm.cshtml 视图代码：

```
<body>
<div>

    @Using (Html.BeginForm())

        <p>Your name: @Html.TextBoxFor(x => x.Name)</p>

        <p>Your email: @Html.TextBoxFor(x => x.Email)</p>

        <p>Your phone: @Html.TextBoxFor(x => x.Phone)</p>

        <p>Will you attend?
    @Html.DropDownListFor(x => x.WillAttend, new [] {

        new SelectedListItem() {Text = "Yes, I'll be there.", Value = bool.TrueString},

        new SelectedListItem() {Text = "No, I can't come.", Value = bool.FalseString},

        }, "Choose an option")

        </p>

        <input type="Submit" value="Submit RSVP" />

        }
</div> 
```

然而，无论我做什么，`SelectedListItem()`都会返回一个错误：

> “找不到类型或命名空间名称‘SelectedListItem’（您是否缺少 using 指令或程序集引用？）”

我已经检查并重新检查了所有内容。Controller 有一个`ViewResult` `RsvpForm()`返回 View 的最小值，Model 公开了四个公共方法（Name、Email、Phone、WillAttend），还有一个 using 指令用于`System.Web.Mvc`up top。

有人介意帮助我吗？我在 APress 网站上找不到勘误表列表 - 只有一个提交它的位置，所以我不太确定有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:25:49.927

是`SelectListItem`，不是`SelectedListItem`。:-)

# asp.net-mvc-3 - 使用 Ajax.BeginForm 的 MVC3 未将 ViewModel 发送到控制器

> ID：14568589
> 
> 赞同：0
> 
> 时间：2013-01-28T18:24:07.947
> 
> 标签：asp.net-mvc-3, jquery

我不太了解如何使用 Ajax.BeginForm 以及与我的控制器的交互。这是我的情况。我有一个包含项目列表的页面。当我单击项目旁边的编辑时，会打开一个 jquery 对话框，其中包含要编辑的字段的强类型部分视图。当我单击更新时，如果视图模型有效，我想保存我的更改，或者在必要时显示错误。我的问题是当我单击更新时。我无法将我的序列化数据作为视图模型发送到控制器。

**编辑：**好的，我发现了 1 个问题。我的表单标签没有正确形成，所以表单字段在表单之外。现在我对表单的序列化有疑问。我收到这条消息：无效的 JSON 原语：section_id。

这是我的序列化字符串：

section_id=74§ion_name_en=The+CF+Mission§ion_name_fr=La+mission+des+FC&norm_tab_name_en=介绍&norm_tab_name_fr=介绍§ion_tab_id=2&active=true&active=false&display_order=100&banner=banner.jpg&tab_title_en=介绍&tab_title_fr=介绍&content_text%3B%3B%%3E%2n %2Fdiv%3E%0D%0A%0D%0A%3Cdiv%3E%3Cstrong%3E+任务+的+加拿大+部队+是+到%3A%3C%2Fstrong%3E%3C%2Fdiv%3E%0D %0A%0D%0A%3Cul+style%3D%22list-style-type%3A+disc%22%3E%0D%0A%09%3Cli%3Eprotect+Canada%2C%3C%2Fli%3E%0D%0A %09%3Cli%3E防御+北+美洲+在+合作+与+美国%2C+和%3C%2Fli%3E%0D%0A%09%3Cli%3E贡献+到+国际+和平+和+安全。%3C%2Fli%3E%0D%0A%3C%2Ful%3E%0D%0A%0D%0A%3Cdiv%3E%3Cbr+%2F%3E%0D%0AOn+any+given+day%2C+about+8 %2C000+加拿大+部队+成员+-+一个+三分之一+我们的+可部署+部队+-+正在+准备+为%2C+参与+在+或+返回+从+一个+海外+任务。+在+首页%2C+加拿大+部队+可以+带来++最好的+可用+军事+资源+从+跨越+加拿大+到+承担+在+a+危机+或+威胁%2C+任何地方+它+发生% 2C+全国范围。%3Cbr+%2F%3E%0D%0A%3Cbr+%2F%3E%0D%0AThe+Canadian+Forces+now+has+an+agile%2C+high-readiness+Special+Operations+Forces +能够+的+操作+跨越++频谱+冲突+在+国内+和+国外%3B+它+是+包括+的+联合+任务+部队+2+（JTF-2）%2C +the+Special+Operations+Aviation+Squadron%2C+the+Joint+Nuclear%2C+Biological+and+Chemical+Defence+Company%2C+and+the+Canadian+Special+Operations+Regiment.%3C%2Fdiv% 3E%0D%0A&content_text_fr=%3Cdiv%3E%26nbsp%3B%3C%2Fdiv%3E%0D%0A%0D%0A%3Cdiv%3E%3Cstrong%3ELa+mission+des+Forces+canadiennes+est+de%3C%2Fstrong%3E %3C%2Fdiv%3E%0D%0A%0D%0A%3Cul%3E%0D%0A%09%3Cli%3Eprot%26eacute%3Bger+le+加拿大%2C%3C%2Fli%3E%0D%0A%09 %3Cli%3Ed%26eacute%3Bfendre+l%26%2339%3BAm%26eacute%3Brique+du+Nord+en+collaboration+avec+les+%26Eacute%3Btats-Unis+et%3C%2Fli%3E%0D%0A %09%3Cli%3Ede+favoriser+la+paix+et+la+s%26eacute%3Bcurit%26eacute%3B+dans+le+monde.%3C%2Fli%3E%0D%0A%3C%2Ful%3E% 0D%0A%0D%0A%3Cdiv%3E%3Cbr+%2F%3E%0D%0AChaque+jour%2C+environ+8+000+militaires+des+Forces+canadiennes+(FC)%2C+soit+%26agrave%3B +peu+pr%26egrave%3Bs+le+tiers+de+nos+forces+d%26eacute%3Bployables%2C+se+pr%26eacute%3Bparent+%26agrave%3B+une+mission+%26agrave%3B+l%26 %2339%3B%26eacute%3Btranger%2C+y+参与者+sur+place+ou+en+reviennent。+Au+pays%2C+les+Forces+canadiennes+peuvent+mettre+%26agrave%3B+profit+les+meilleures+ressources+militaires+de+partout+au+加拿大%2C+en+cas+de+crise+ou +de+menace%2C+n%26%2339%3Bimporte+o%26ugrave%3B+sur+l%26%2339%3Bensemble+du+territoire。%3Cbr+%2F%3E%0D%0A%3Cbr+%2F%3E%0D%0ALes+Forces+canadiennes+se+sont+dot%26eacute%3Bes+d%26%2339%3Bune+capacit%26eacute%3B+d %26%2339%3Bop%26eacute%3Brations+sp%26eacute%3Bciales+%26eacute%3Blargie+et+am%26eacute%3Blior%26eacute%3Be+能力+d%26%2339%3Bintervenir+rapidement+et+pouvant+mener +des+op%26eacute%3Brations+sur+tout+l%26%2339%3B%26eacute%3Bventail+des+conflits%2C+au+加拿大+comme+%26agrave%3B+l%26%2339%3B%26eacute %3Btranger+%3B+ces+forces+comprennent+la+Deuxi%26egrave%3Bme+Force+op%26eacute%3Brationnelle+interarm%26eacute%3Bes+(FOI-2)%2C+l%26%2339%3BEscadron+d% 26%2339%3Bop%26eacute%3Brations+sp%26eacute%3Bciales+(航空)%2C+la+Compagnie+interarm%26eacute%3Bes+de+d%26eacute%3Bfense+nucl%26eacute%3Baire%2C+biologique+et +chimique+et+le+R%26eacute%3Bgiment+d%26%2339%3Bop%26eacute%3Brations+sp%26eacute%3Bciales+du+加拿大.%3C%2Fdiv%3E%0D%0A%3C%2Fdiv%3E%0D%0A%3C%2Fdiv%3E%0D%0A

这是我的模型定义：

```
public class SectionContent
{
    private int _section_tab_id;
    private int _section_id;
    private string _section_name_en;
    private string _section_name_fr;
    private string _tab_title_en;
    private string _tab_title_fr;
    private int _display_order;
    private string _norm_tab_name_en;
    private string _norm_tab_name_fr;
    private string _banner;
    private bool _active;
    private int _content_id;
    private string _content_text_en;
    private string _content_text_fr;
[snip] 
```

}

这是我的部分视图：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<ForcesCMS.Models.SectionContent>" %> 
```

```
<%=Html.ValidationSummary(MyLabels.labels.please_correct_markedfields, new { @class = "validation" })%>

    <fieldset>
        <legend><%=Model.tab_title_en%></legend>
        <input type="hidden" id="section_id" name="section_id" value="<%= Model.section_id%>" />
        <input type="hidden" id="section_name_en" name="section_name_en" value="<%= Model.section_name_en%>" />
        <input type="hidden" id="section_name_fr" name="section_name_fr" value="<%= Model.section_name_fr%>" />
        <input type="hidden" id="norm_tab_name_en" name="norm_tab_name_en" value="<%= Model.norm_tab_name_en%>" />
        <input type="hidden" id="norm_tab_name_fr" name="norm_tab_name_fr" value="<%= Model.norm_tab_name_fr%>" />
        <input type="hidden" id="content_id" name="content_id" value="<%= Model.content_id%>" />
        <div class="formrowFull">
            <div class="formcol">
                <label for="section_tab_id" class="inline"><%=MyLabels.labels.id%></label>
                <%= Html.TextBoxFor(model => model.section_tab_id, new { @class = "smallBoxReadonly" })%>
            </div>
            <div class="formcol">
                <label for="active" class="inline"><%=MyLabels.labels.active%></label>
                <%=Html.CheckBoxFor(model => model.active)%>
            </div>
        </div>

        <div class="formrowFull">
            <div class="formcol">
                <label for="display_order" class="inline mandatory"><%=MyLabels.labels.display_order%></label>
                <%= Html.TextBoxFor(model => model.display_order, new { @class = "smallBox" })%>
                <%= Html.ValidationMessageFor(model => model.display_order)%>
            </div>
            <div class="formcol">
                <label for="banner" class="inline"><%=MyLabels.labels.banner%></label>
                <%= Html.TextBoxFor(model => model.banner, new { @class = "largeBox" })%>
            </div>
        </div>

        <div class="formrowFull">
            <div class="formcol">
                <label for="tab_title_en" class="mandatory"><%=MyLabels.labels.title_en%></label>
                <%= Html.TextBoxFor(model => model.tab_title_en, new { @class = "largeBox" })%>
                <%= Html.ValidationMessageFor(model => model.tab_title_en)%>
            </div>
            <div class="formcol">
                <label for="tab_title_fr" class="mandatory"><%=MyLabels.labels.title_fr%></label>
                <%= Html.TextBoxFor(model => model.tab_title_fr, new { @class = "largeBox" })%>
                <%= Html.ValidationMessageFor(model => model.tab_title_fr)%>
            </div>
        </div>

        <div class="formrowFull"> 
            <div class="formcol">
                <input type="hidden" name="content_id" id="content_id" value="<%=Model.content_id %>" />
                <%= Html.LabelFor(model => model.content_text_en)%>
                <%= Html.TextAreaFor(model => model.content_text_en, new { @class = "ckeditor_tpl" })%>
                <%= Html.ValidationMessageFor(model => model.content_text_en)%>
            </div>
            <div class="formcol">
                <%= Html.LabelFor(model => model.content_text_fr)%>
                <%= Html.TextAreaFor(model => model.content_text_fr, new { @class = "ckeditor_tpl" })%>
                <%= Html.ValidationMessageFor(model => model.content_text_fr)%>
            </div>
        </div>

    </fieldset><%}%> 
```

接下来我将发布我的控制器和脚本，这些是让我感到困惑的部分。

控制器：

```
[HttpGet]
    // Called when click on Edit link - data displayed in modal dialog
    public PartialViewResult AddEditRecord(int id)
    {
        ViewData["IsUpdate"] = true;
        SectionContent sc = ContentHandler.GetTabContent(id);
        return PartialView("ContentForm", sc);
    }

    [HttpPost]
    [ValidateInput(false)]
    // Called when clicking on Update in modal
    public PartialViewResult AddEditRecord(SectionContent sc, string cmd)
    {
        // Never valid because model (sc) is always null
        if (ModelState.IsValid)
        {

            try
            {
                //update
                int result = ContentHandler.UpdateSectionContent(sc);
                return PartialView("ContentForm");
            }
            catch { }

        }

        if (Request.IsAjaxRequest())
        {
            return PartialView("ContentForm", sc);
        }
        else
        {
            return PartialView("ContentForm");
        }
    } 
```

脚本：

```
$.ajaxSetup({ cache: false });

    function DoAjaxUpdate() {
        $.ajax({
            url: $("#frmEdit").attr("action"),
            type: 'POST',
            dataType: "json",
            contentType: 'application/json',
            data: $("#frmEdit").serialize(),
            success: function (result) {
                $('#dialog-edit').html(result);
            }
        });
    }

    $(".editDialog").live("click", function (e) {
        var url = $(this).attr('href');

        $("#dialog-edit").dialog({
            title: 'Edit Tab and Content',
            autoOpen: false,
            resizable: false,
            height: 800,
            width: 600,
            show: { effect: 'drop', direction: "up" },
            modal: true,
            draggable: true,
            open: function (event, ui) {
                $(this).load(url);
            },
            close: function (event, ui) {
                $(this).dialog('close');
            },
            buttons: {
                "Update": function () {
                    DoAjaxUpdate();
                },
                "Cancel": function () {
                    $(this).dialog('close');
                }
            }
        });

        $("#dialog-edit").dialog('open');

        return false;
    }); 
```

如何正确序列化表单，以便控制器将其识别为有效的 ViewModel。那么一旦解决了，我应该在我的控制器操作中做什么？json结果？返回部分视图？行动结果？

我一直在浏览大量的 SO 帖子以及在其他网站上，过去几天我尝试了很多东西，但没有运气。任何帮助表示赞赏。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:55:05.980

用表单标签更正错误后，我终于找到了正确的 jquery 代码来序列化我的表单并将其作为视图模型发送到控制器。

这是更正后的脚本：

```
function DoAjaxUpdate() {
        $.ajax({
            url: $("#frmEdit").attr("action"),
            type: "POST",
            data: $('#frmEdit :input').serialize(),
            success: function (result) {
                $('#dialog-edit').html(result);
                }
        });
    }

    $(".editDialog").live("click", function (e) {
        var url = $(this).attr('href');

        $("#dialog-edit").dialog({
            title: 'Edit Tab and Content',
            autoOpen: false,
            resizable: false,
            height: 800,
            width: 600,
            show: { effect: 'drop', direction: "up" },
            modal: true,
            draggable: true,
            open: function (event, ui) {
                $(this).load(url);
            },
            close: function (event, ui) {
                $(this).dialog('close');
            },
            buttons: {
                "Update": function () {
                    DoAjaxUpdate();
                },
                "Cancel": function () {
                    $(this).dialog('close');
                }
            }
        });

        $("#dialog-edit").dialog('open');

        return false;
    }); 
```

# spring - org.springframework...FirewalledResponse 无法转换为 org.springframework...SaveContextOnUpdateOrErrorResponseWrapper

> ID：14568590
> 
> 赞同：2
> 
> 时间：2013-01-28T18:24:08.197
> 
> 标签：spring, spring-mvc, spring-security, spring-social

我在 spring-social-security 中有一个网络应用程序。安全层基于记住我的 cookie。一切都很好，但是当我重新启动服务器时，我的 cookie 有一个奇怪的问题（也许）。这是错误堆栈跟踪

```
java.lang.ClassCastException: org.springframework.security.web.firewall.FirewalledResponse cannot be cast to org.springframework.security.web.context.SaveContextOnUpdateOrErrorResponseWrapper
    org.springframework.security.web.context.HttpSessionSecurityContextRepository.saveContext(HttpSessionSecurityContextRepository.java:99)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:65)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) 
```

如果我通过浏览器删除 cookie 并再次启动项目，一切运行良好。有什么建议吗？提前谢谢CP

# c# - GridView 绑定不起作用

> ID：14568591
> 
> 赞同：0
> 
> 时间：2013-01-28T18:24:10.040
> 
> 标签：c#, wpf, data-binding, gridview, mvvm

这是我的 MainWindow.cs：

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new MultipleProjectViewModel();
    } 
```

我的视图模型：

```
 public class MultipleProjectViewModel : ViewModelBase
{
    private ObservableCollection<Project> _projectCollection;
    public MultipleProjectViewModel()
    {
        ProjectCollection = new ObservableCollection<Project>();
        ProjectCollection.Add(new Project(){Name = "baba",Description = "lala"});
    }
    public ObservableCollection<Project> ProjectCollection
    {
        get { return this._projectCollection; }
        set
        {
            if(_projectCollection != value)
            {
                _projectCollection = value;
                RaisePropertyChanged(()=> ProjectCollection);
            }
        }
    }
} 
```

我的模型：

```
 public class Project
{
    public string Name { get; set; } // Project Name
    public string Description { get; set; } // Project Description
} 
```

我的观点：

```
 <ListView ItemsSource="ProjectCollection">
        <ListView.View>
            <GridView>

                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Path=Name}"/>
                <GridViewColumn Header="Description" DisplayMemberBinding="{Binding Path=Description}"/>
            </GridView>
        </ListView.View>
    </ListView> 
```

那么为什么绑定不起作用？当我编译它时，我只看到一个空白的 GridView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:26:04.530

```
 <ListView ItemsSource="{Binding ProjectCollection}"> 
```

# php - PHP strtotime 将 false 保存为 MySQL 负整数

> ID：14568592
> 
> 赞同：3
> 
> 时间：2013-01-28T18:24:13.983
> 
> 标签：php, mysql, int, strtotime

我正在进行迁移，日期为 '0000-00-00 00:00:00' 并通过 strtotime() 运行并返回为 false 在新表的列中保存为 -2147483648，这是一个 INT 数据类型。无论我将默认值设置为 0 还是 NULL，它仍然保存为那个负数。我想避免必须为每个日期字段编写异常代码（并且我没有更改数据类型的选项），所以在 PHP（使用一行）或 MySQL 中有一些简单的方法可以在这些上设置默认值“空”日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:34:01.273

没有代码，很难回答，但您可以考虑使用[三元运算符](http://davidwalsh.name/php-shorthand-if-else-ternary-operators)。

前任：

```
$variable_to_write_to_db = ($field == 0 || $field == NULL ? writeDefaultsToDB() : writeToDB($field)) 
```

或类似的东西。

三元运算符的工作方式如下（从上面的链接复制）：

```
/* most basic usage */
$var = 5;
$var_is_greater_than_two = ($var > 2 ? true : false); // returns true 
```

祝你好运，玩得开心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:28:13.887

时间`0000-00-00`超出了`strtotime`1901-12-13 到 2038-01-19 的范围。它正在返回损坏数据的下限。这对几乎所有基于 UNIX`time_t`的函数都很常见。

我的建议是在处理之前替换这些日期`NULL`。它们无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:34:40.937

您是否正在寻找列上的默认值并且只是不将日期传递给它（即，如果未提供值，只需将所有日期设置为某个值？）

如果是这样，如果您希望默认值为 0，这应该可以工作（我不确定您是否这样做，如果日期是无意义的，最好允许 null ？）：

```
ALTER TABLE YourTable MODIFY YourColumn Default '0'; 
```

然后确保在调用失败`strtotime`结果时没有将任何内容（或 null 应该可以）传递给数据库（注意`strtotime`不会返回 1901 年 12 月 13 日星期五 20:45:54 UTC 之前的日期的有效结果，因此您的 0000-00 -00 将正确地失败）。

# windows - Microsoft Shell.Application.BrowseForFolder 窗口上的“新建文件夹” - 不会重命名文件系统上的文件夹

> ID：14568596
> 
> 赞同：0
> 
> 时间：2013-01-28T18:24:21.240
> 
> 标签：windows, shell, vbscript, wsh

所以我有以下代码来包装 Shell.Application.BrowseForFolder() 方法。它改编自[http://blogs.technet.com/b/heyscriptingguy/archive/2005/06/17/how-can-i-show-users-a-dialog-box-that-only-lets-them-select -文件夹.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2005/06/17/how-can-i-show-users-a-dialog-box-that-only-lets-them-select-folders.aspx)：

```
Function BrowseFolder( myStartLocation, blnSimpleDialog, strPrompt )
    Const MY_COMPUTER   = &H11&
    Const WINDOW_HANDLE = 0 ' Must ALWAYS be 0

    Dim numOptions, objFolder, objFolderItem
    Dim objPath, objShell, strPath ', strPrompt

    ' Set the options for the dialog window
    'strPrompt = "Select a folder:"
    If blnSimpleDialog = True Then
        numOptions = 0      ' Simple dialog
    Else
        numOptions = &H10&  ' Additional text field to type folder path
    End If

    ' Create a Windows Shell object
    Set objShell = CreateObject( "Shell.Application" )

    ' If specified, convert "My Computer" to a valid
    ' path for the Windows Shell's BrowseFolder method
    If UCase( myStartLocation ) = "MY COMPUTER" Then
        Set objFolder = objShell.Namespace( MY_COMPUTER )
        Set objFolderItem = objFolder.Self
        strPath = objFolderItem.Path
    Else
        strPath = myStartLocation
    End If

    Set objFolder = objShell.BrowseForFolder( WINDOW_HANDLE, strPrompt, _
                                              numOptions, strPath )

    ' Quit if no folder was selected
    If objFolder Is Nothing Then
        BrowseFolder = ""
        Exit Function
    End If

    ' Retrieve the path of the selected folder
    Set objFolderItem = objFolder.Self
    objPath = objFolderItem.Path

    ' Return the path of the selected folder
    BrowseFolder = objPath
End Function 
```

这是调用它的代码：

```
Function GetSLOCDir()
   Dim FSO
   Dim slocDir
   Dim cwd

   Set FSO    = GetFSO()

   slocDir = ""
   While (slocDir="" OR NOT FSO.FolderExists(slocDir))
      cwd        = FSO.GetAbsolutePathName(".")
      slocDir    = BrowseFolder(cwd, True, "Select the SLOC Directory.")
      WScript.Echo "slocDir: " & slocDir

      If (slocDir="") Then
         WScript.Echo "Aborted."
         WScript.Quit
      End If

   WEnd
   GetSLOCDir = slocDir
End Function 
```

第一次循环时，会显示浏览对话框。如果我单击“新建文件夹”，它会创建一个新文件夹，允许我输入文件夹名称。但是当我按下回车键时，它会回到说“新文件夹”，但在文件系统上它会正确重命名它。但是，BrowseFolder() 函数返回“新文件夹”，这会导致循环迭代。新的浏览对话框显示正确的文件夹名称，然后我可以选择它。

然而，这似乎很笨拙。这是 BrowseForFolder 方法中的错误吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T08:48:58.200

首先对不起我的英语。您可以使用 cscript.exe 或 wscript.exe 的 64 位版本运行此脚本。32位版本有这个bug。

# c# - 除了显式接口实现之外还有什么？

> ID：14568599
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:24:38.883
> 
> 标签：c#

考虑这个例子：

```
 public class People : IEnumerable
 {
    private Person[] _people;
    public People(Person[] pArray)
    {
        _people = new Person[pArray.Length];

        for (int i = 0; i < pArray.Length; i++)
        {
            _people[i] = pArray[i];
        }
    }
// Explicit Interface implementation
    IEnumerator IEnumerable.GetEnumerator()
    {
       return (IEnumerator) GetEnumerator();
    }
// What is this? Its neither overloading nor over riding.. What else is it?
    public PeopleEnum GetEnumerator()
    {
        return new PeopleEnum(_people);
    }
 } 
```

我经历过这种例子..但无法弄清楚它实际上是什么？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:26:19.607

它只是在类上定义一个方法。并非每个类方法都必须是接口方法的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:28:41.340

这只是另一个类方法。

话虽如此，这在实施时并不是一件很常见的事情`IEnumerable`。在当前框架中，更好的方法是`IEnumerable<Person>`直接实现，并返回一个`IEnumerable<Person>`.

这将提供一个更简洁的 API，因为它的用法与预期的一样，并且可以与当前的框架方法一起使用（即：所有 LINQ 不使用`.Cast<T>`）。

# c++ - 来自 HBITMAP 的 QImage

> ID：14568600
> 
> 赞同：7
> 
> 时间：2013-01-28T18:24:41.800
> 
> 标签：c++, qt, qimage, qtgui, hbitmap

在我的纯 Windows 程序中，我使用了一个第三方库，它返回一个`HBITMAP`.

有没有办法`QImage`从其内容初始化 a ，即将其转换为 a `QImage`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-17T16:46:43.800

这是 Qt 4 (QtGui) 的方法：

```
QImage image(QPixmap::fromWinHBITMAP(hBitmap).toImage()); 
```

这是 Qt 5 (QtWinExtras) 的方法：

```
QPixmap pixmap = QtWin::fromHBITMAP(hBitmap);
QImage image = pixmap.toImage();

// or

QtWin::imageFromHBITMAP(hdc, hBitmap, width, height) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T18:33:27.803

好的，这似乎对我有用：

```
QImage image(QPixmap::fromWinHBITMAP(hBitmap).toImage()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T09:53:23.067

没有附加功能的 Qt5：放在您的代码之前

```
#include <QPixmap>
Q_GUI_EXPORT QPixmap qt_pixmapFromWinHBITMAP(HBITMAP bitmap, int hbitmapFormat=0); 
```

例如，在您的功能中

```
QPixmap pixmap = qt_pixmapFromWinHBITMAP(LoadBitmap(uiID)); 
```

干杯

# mysql - 在 Eclipse Juno 中成功创建 MySQL 数据库后，如何/在哪里保存我的数据库？

> ID：14568604
> 
> 赞同：0
> 
> 时间：2013-01-28T18:25:04.107
> 
> 标签：mysql, eclipse, eclipse-dtp

我在 Database Perspective 中，这是我第一次在 Eclipse 中使用任何类型的数据库，我想确保在退出时正确保存它。当我单击“另存为”时，它提示我选择一个文件夹，但没有任何内容显示“数据库项目”。

或者，我可以保存在我已经拥有的动态 Web 项目文件夹中吗，因为它是一个将使用该数据库的 JSP 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:44:33.733

其实，我明白了。一旦 MySQL 数据库构建完成，只要所有内容都提交（设置为 Auto Commit），它就会在我的 Tomcat 服务器上保留在那里。

换句话说，我可以关闭我的服务器，退出 Eclipse，再回来，所有的表在我离开时都在那里。

所以，总而言之......不需要做任何特别的事情来保留数据库。

# python - 使用python修改xml值文件

> ID：14568605
> 
> 赞同：4
> 
> 时间：2013-01-28T18:25:10.420
> 
> 标签：python, xml, parsing

我对python很陌生，我需要修改

```
<test name="test02"></xmpp> to <test name="test03"></xmpp> 

<temp-config>QA</temp-config> to <temp-config>Prod</temp-config> 
```

使用 python 的所有 5 次出现。不确定要使用什么库。对此的任何帮助都非常感谢。

```
<config>
<logging></logging>
<test-mode>false</test-mode>
<test name="test02"></xmpp>
<mail></mail>
<test-system>0</test-system>
<system id="0" name="suite1" type="regression">
    <temp-config>QA</temp-config>
    <rpm>0.5</rpm>
    <cycles>3</cycles>
</system>
<system id="1" name="suite2" type="regression">
    <temp-config>QA</temp-config>
    <rpm>0.5</rpm>
    <cycles>3</cycles>
</system>
<system id="2" name="suite3" type="regression">
    <temp-config>QA</temp-config>
    <rpm>0.5</rpm>
    <cycles>3</cycles>
</system>
<system id="3" name="suite4" type="regression">
    <temp-config>QA</temp-config>
    <rpm>0.5</rpm>
    <cycles>3</cycles>
</system>
<system id="4" name="suite5" type="regression">
    <temp-config>QA</temp-config>
    <rpm>0.5</rpm>
    <cycles>3</cycles>
</system>
</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:37:29.433

`ElementTree`是一个不错的选择——纯 Python 并包含在标准库中，因此它是最便携的选择。但是，我总是直奔`lxml`——它具有相同的 API，只是速度更快，而且可以做更多事情（因为它实际上是`libxml2`.

```
from lxml import etree
tree = etree.parse(path_to_my_xml)

for elem in tree.findall('.//test'):
    assert elem.attrib['name'] == 'test02'
    elem.attrib['name'] == 'test03'

for elem in tree.findall('.//temp-config'):
    assert elem.text == 'QA'
    elem.text = 'Prod'

with open(path_to_output_file, 'w') as file_handle:
    file_handle.write(etree.tostring(tree, pretty_print=True, encoding='utf8')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:38:32.220

使用[lxml](http://lxml.de/)。此示例使用`lxml.etree` 并且实际上会在您的示例 xml 上失​​败，因为其中包含一些未关闭的标签。如果您对要解析的真实数据有同样的问题，请使用`lxml.html,`它可以处理损坏的 xml（*将指令作为注释添加到代码中*）。

```
In [14]: import lxml.etree as et  # for broken xml add an import:
                                  # import lxml.html as lh

In [15]: doc = et.fromstring(xmlstr)  # for broken xml replace this line with:
                                      # doc = lh.fromstring(xmlstr)

                                      # if you read xml from a file:
                                      # doc = et.parse('file_path')

In [16]: for elem in doc.xpath('.//temp-config'):
    ...:     elem.text = 'Prod'
    ...:     

In [17]: print et.tostring(doc,pretty_print=True)
<config>
  <logging/>
  <test-mode>false</test-mode>
  <test name="test02">
    <mail/>
    <test-system>0</test-system>
    <system id="0" name="suite1" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
    <system id="1" name="suite2" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
    <system id="2" name="suite3" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
    <system id="3" name="suite4" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
    <system id="4" name="suite5" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
  </test>
</config> 
```

**注意：**正如其他人所指出的，您在标准库中有一些功能较弱的替代方案。对于像这样的简单任务，它们可能非常适合，但是，*如果您的 xml 文件损坏*，使用标准库工具解析它们等于浪费您的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:31:54.673

我建议使用 ElementTree：[http ://docs.python.org/2/library/xml.etree.elementtree.html](http://docs.python.org/2/library/xml.etree.elementtree.html)

例子：

```
for atype in e.findall('type')
 print(atype.get('foobar')) 
```

或查看此线程：[如何在 Python 中解析 XML？](https://stackoverflow.com/questions/1912434/easiest-way-to-parse-xml-in-python)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:16:49.037

要完成上述答案，请使用 lxml，以下是更改“名称”属性值的方法：

```
from lxml import etree
tree = etree.parse(path_to_my_xml)
for elem in tree.xpath('.//temp-config'):
    elem.text = 'Prod'
for elem in tree.xpath(".//test[@name='test02']"):
    elem.attrib['name'] = 'test03' 
```

# php - Mediawiki + 子域 + SSL 在访问安全站点时返回 404 错误

> ID：14568609
> 
> 赞同：1
> 
> 时间：2013-01-28T18:25:21.330
> 
> 标签：php, apache, mediawiki

使用 CPanel/Softaculous 在我的托管网站上安装 Mediawiki 似乎可以正常安装。虽然不确定安装程序检查了多少。

然后我设置一个子域，例如 wiki.mydomain.com 来接受那里的请求。

之后，我还在 Cpanel 中设置了 SSL 证书。该证书是自签名的，因为在我决定是否购买证书之前，我只是在测试 wiki 和所有内容。

然后，如果我尝试访问[http://wiki.mydomain.com](http://wiki.mydomain.com)。我得到了 MediaWiki 的登录页面，但如果我尝试访问[https://wiki.mydomain.com](https://wiki.mydomain.com)，我只得到一个空白的浏览器窗口。

现在，如果我转到[https://wiki.mydomain.com/index.php](https://wiki.mydomain.com/index.php)，我会收到 404 错误（我创建了一个带有 404 错误消息的简单 html 页面，然后修改了我的 .htaccess 以在 404 上显示它）。

查看日志时，它似乎试图在 /home/mydomain/public_html/index.php 下找到 index.php 文件，而不是 /home/mydomain/wiki/index.php。

非常困惑为什么这根本不起作用。我也可以发布一些配置和东西，但是这个帐户是一个新创建的 CPanel 帐户，所以除了安装 wiki 软件之外，在它上面做的事情并不多。

~~（编辑）这是使用 SharedSSL。没有它我无法让它工作。出于某种原因，即使在我确定该站点是使用 WHM 的 IP 地址上唯一的站点之后，它仍然将其显示为共享 IP。:P~~

使用以下信息修复了 SharedSSL：[Cpanel 论坛](http://forums.cpanel.net/f5/ssl-cert-500-internal-server-error-162653.html "ssl 证书 + 500 内部服务器错误")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:12:59.613

您必须通过 Softaculous 重新安装 MediaWiki。进入安装表单，您将获得“选择协议”选项，在此处选择 https:// 并在“选择域”下拉列表中选择您的子域[https://wiki.mydomain.com](https://wiki.mydomain.com)将“在目录中”字段留空并然后点击安装按钮。然后您应该能够访问[https://wiki.mydomain.com上的 MediaWiki 安装](https://wiki.mydomain.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:30:29.407

我认为这个问题的原因是由于 cPanel 如何与子域和 SSL 一起工作。据我所知，这似乎是 SSL 证书问题，因为当 CPanel 使用 /scripts/rebuildhttpdconf 命令重建 httpd.conf 时，它不会为子域创建 SSL 虚拟主机。此外，父域工作正常。

我最终将 wiki 放在 /home/mydomain/public_html/wiki 中，然后为[http://mydomain.com](http://mydomain.com)和[https://domain.com](https://domain.com)设置重定向以指向[https://mydomain.com/wiki](https://mydomain.com/wiki)。

目前，我能解决的问题就是删除子域。

# android - 加载android应用程序时如何删除白屏？

> ID：14568610
> 
> 赞同：12
> 
> 时间：2013-01-28T18:25:22.900
> 
> 标签：android, android-layout

我是安卓新手。我有一个加载 URL 的网络视图。问题是，在我打开应用程序后，在加载 Web 视图的 URL 后会出现 2-3 秒的白屏。

我认为这是应用程序启动的时间。如何移除白屏并显示当时的徽标？我听说过启动画面，但徽标出现 1 秒，然后白屏出现 2-3 秒，最后加载 Web 视图。

我究竟做错了什么？在加载 Web 视图时，是闪屏还是其他显示徽标的方式？

```
package com.exampe.dating;

import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.view.KeyEvent;
import android.view.Menu;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView mywebview = (WebView) findViewById(R.id.webview);
         mywebview.loadUrl("http://www.example.com/mobile/index.php");
         WebSettings webSettings = mywebview.getSettings();
         webSettings.setJavaScriptEnabled(true);
         mywebview.setWebViewClient(new WebViewClient());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        WebView mywebview = (WebView) findViewById(R.id.webview);
        if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
            mywebview.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

splashActivity.java

```
package com.exampe.dating;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;

public class SplashActivity extends Activity {

       private static String TAG = SplashActivity.class.getName();
       private static long SLEEP_TIME = 10;    // Sleep for some time

       @Override
       protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);

          this.requestWindowFeature(Window.FEATURE_NO_TITLE);    // Removes title bar
          this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);    // Removes notification bar

          setContentView(R.layout.splash);

          // Start timer and launch main activity
          IntentLauncher launcher = new IntentLauncher();
          launcher.start();
       }

       private class IntentLauncher extends Thread {
          @Override
          /**
           * Sleep for some time and than start new activity.
           */
          public void run() {
             try {
                // Sleeping
                Thread.sleep(SLEEP_TIME*1000);
             } catch (Exception e) {
                Log.e(TAG, e.getMessage());
             }

             // Start main activity
             Intent intent = new Intent(SplashActivity.this, MainActivity.class);
             SplashActivity.this.startActivity(intent);
             SplashActivity.this.finish();
          }
       }
    } 
```

机器人清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.exampe.dating"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET" /> 
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
         <activity
         android:name=".SplashActivity">
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
         </intent-filter>
      </activity>

        <activity
            android:name="com.exampe.dating.MainActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"  >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:54:01.387

像这样在清单中声明两个启动活动是非常奇怪的。您应该消除意图过滤器`SplashActivity`并`SplashActivity`从`onCreate`您的内部开始`MainActivity`：

**编辑**更新以用等待代替睡眠。当页面加载或超时发生时，启动屏幕将消失，以先到者为准。

```
public class MainActivity extends Activity {
    public static Object SPLASH_LOCK = new Object();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView mywebview = (WebView) findViewById(R.id.webview);
        mywebview.loadUrl("http://www.example.com/mobile/index.php");
        WebSettings webSettings = mywebview.getSettings();
        webSettings.setJavaScriptEnabled(true);
        mywebview.setWebViewClient(new WebViewClient());

        startActivity(new Intent(this, SplashActivity.class));
    }
    . . .
}

// in your WebViewClient:
public void onPageFinished (WebView view, String url) {
    synchronized (SPLASH_LOCK) {
        SPLASH_LOCK.notifyAll();
    }
} 
```

然后在`SplashActivity`，等待你想要的延迟，然后打电话`finish()`。您不需要重新开始`MainActivity`，因为它位于后面，完成后`SplashActivity`会出现`SplashActivity`。

```
public class SplashActivity extends Activity {

       private static String TAG = SplashActivity.class.getName();
       private static long MAX_SPLASH_TIME = 10000;

       @Override
       protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);

          . . .

          setContentView(R.layout.splash);

          new Thread() {
              @Override
              public void run() {
                  synchronized (MainActivity.SPLASH_LOCK) {
                      // wait for notify or time-out
                      try { MainActivity.SPLASH_LOCK.wait(MAX_SPLASH_TIME); }
                      catch (InterruptedException ignored) {}
                  }
                  finish();
              }
          }.start();
       }
       . . .
} 
```

请注意，您不需要该`IntentLauncher`课程。

PS你没有问这个，但是如果你把这个添加到`SplashActivity`清单中的标签中：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

那么你不需要`requestWindowFeature`在`onCreate`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:54:46.147

现在您正在显示一个启动画面，正在休眠，然后在启动 mainactivity 的同时关闭启动画面，该 mainactivity 开始加载页面。飞溅->睡眠->启动和关闭飞溅->加载页面

您应该在显示启动画面时开始加载页面，并在页面加载后移除启动画面。

您可以覆盖

```
public void onPageFinished (WebView view, String url) 
```

连接到您的**WebView**的**WebViewClient**并使该方法消除启动画面。将启动画面作为对话框而不是活动也可能更容易。

# windows-xp - 组/域控制和管理员权限问题

> ID：14568611
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:25:24.233
> 
> 标签：windows-xp, windows-server-2003, administrator, group-policy

服务器：Windows Server 2003 PC：Windows XP（笔记本电脑） 问题：即使以顶级管理员帐户或任何其他管理员帐户登录，相关 PC 也无法获得管理员权限。PC 需要管理员权限才能定期安装打印机以及各种其他硬件。我创建了一个具有完全管理员权限的自定义用户。

以前，这台 PC 只能通过无线方式使用，并且从来不是域的一部分，它始终只是它自己的工作组计算机，在我们的仓库中随身携带。它现在连接在 RJ-45 上并且将是固定的。

我花了至少几个小时试图弄清楚为什么这台电脑无法获得管理员权限，并且已经没有想法了。还有一位前海军系统管理员一直无法弄清楚（尽管他的知识已经过时）。任何关于看什么的建议将不胜感激。我个人是一名网站管理员，并且对服务器 03 的了解很少，因此希望避免使用任何高科技术语 :) - 我可以弄清楚需要做的任何事情 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:01:22.903

他们是本地计算机上管理员组的成员吗？

检查[此](http://www.grouppolicy.biz/2010/01/how-to-use-group-policy-preferences-to-secure-local-administrator-groups/)以获取有关安全性的说明，以及能够使人们成为域中机器的管理员

# google-app-engine - 如何过滤列表中特定元素的值？

> ID：14568612
> 
> 赞同：0
> 
> 时间：2013-01-28T18:25:28.663
> 
> 标签：google-app-engine, jdo, datanucleus

使用 GAE-Java-JDO，是否可以过滤列表中特定元素的值？

# 什么有效

通常，我会有以下内容：

```
@PersistenceCapable
class A {

  String field1;
  String field2;

  // id, getters and setters

} 
```

然后我会构建一个简单的查询：

```
Query q = pm.newQuery(A.class, "field1 == val");
q.declareParameters("String val");
List<A> list = new ArrayList<A>((List<A>) q.execute("foo")); 
```

# 我想要什么

以上工作正常。但我想要的是存储在列表中的所有字段：

```
@PersistenceCapable
class AA {

  ArrayList<String> fields;

  // id, getters and setters

} 
```

然后能够查询列表中的特定字段：

```
int index = 0;
Query q = pm.newQuery(A.class, "fields.get(index) == val");
q.declareParameters("int index, String val");
List<A> list = new ArrayList<A>((List<A>) q.execute(index, "foo")); 
```

但这会引发异常：

```
org.datanucleus.store.appengine.query.DatastoreQuery$UnsupportedDatastoreFeatureException:
Problem with query 
<SELECT FROM xxx.AA WHERE fields.get(index) == val PARAMETERS int index, String val,>:     
Unsupported method <get> while parsing expression: 
InvokeExpression{[PrimaryExpression{strings}].get(ParameterExpression{ui})} 
```

[我阅读GAE-JDO 文档的](https://developers.google.com/appengine/docs/java/datastore/jdo/queries)印象是这是不可能的：

> “属性值必须由应用程序提供；它不能引用或根据其他属性计算”

所以......有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:49:03.013

如果您只需要按索引+值进行过滤，那么我认为用它们的索引作为实际列表值的前缀应该可以工作。（如果您还需要按实际值过滤，那么您需要存储这两个列表。）

即，而不是相当于

`fields= ['foo', 'bar', 'baz]`带有查询过滤器`fields[1] == 'bar'`

你会有

`fields= ['0-foo', '1-bar', '2-baz']`带有查询过滤器`fields == '1-bar'`

（但在java中）

# python - Python 列表到字符串的转换

> ID：14568613
> 
> 赞同：5
> 
> 时间：2013-01-28T18:25:33.763
> 
> 标签：python, string, python-2.x, httplib2

这似乎是一个简单的任务，我不确定我是否已经完成了它，或者我是否正在追逐我的尾巴。

```
values = [value.replace('-','') for value in values] ## strips out hyphen (only 1)
            print values ## outputs ['0160840020']
            parcelID = str(values) ## convert to string
            print parcelID ##outputs ['0160840020']
            url = 'Detail.aspx?RE='+ parcelID ## outputs Detail.aspx?RE=['0160840020'] 
```

如您所见，我正在尝试将附加到 URL 末尾的数字附加，以便通过 POST 参数更改页面。我的问题是如何去除 [' 前缀和 '] 后缀？我已经尝试过 parcelID.strip("['") 没有运气。我这样做正确吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T18:27:49.617

`values`是一个列表（长度为 1），这就是它出现在括号中的原因。如果您只想获取 ID，请执行以下操作：

```
parcelID = values[0] 
```

代替

```
parcelID = str(values) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:40:32.173

假设您在执行此操作时实际上有一个值列表（而不仅仅是一项），这将解决您的问题（它也适用于您所显示的一项）

```
values = [value.replace('-','') for value in values] ## strips out hyphen (only 1)

# create a list of urls from the parcelIDs
urls = ['Detail.aspx?RE='+ str(parcelID) for parcelID in values]

# use each url one at a time
for url in urls:
    # do whatever you need to do with each URL 
```

# magento - group() 查询后订单网格中的 Massaction 中断（Magento 1.7）

> ID：14568614
> 
> 赞同：0
> 
> 时间：2013-01-28T18:25:35.223
> 
> 标签：magento, magento-1.7

这是以下问题的后续，现在部分回答：[Adding custom columns in order grid (Magento 1.7.0.0)](https://stackoverflow.com/questions/14515338/adding-custom-columns-in-order-grid-magento-1-7-0-0/14536886#14536886)，这就是问题所在：

当我使用查询时：

```
$collection->getSelect()->join('magento_sales_flat_order_address', 'main_table.entity_id = magento_sales_flat_order_address.parent_id',array('telephone', 'email')); 
```

除了`$collection->getSelect()->group('main_table.entity_id')`（指向在组中使用的正确 id）之外，函数`/app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php`使用的 id`_prepareMassAction()`是连接表中的 entity_id（在我的情况下，magento_sales_flat_order_address 作为 order_address），而不是 main_table 中的 entity_id应该。

我已经尝试`$this->setMassactionIdField('entity_id');`在`_prepareMassAction()`函数中更改此值以指向要使用的正确 id，但就好像我在括号中放置的任何内容都不起作用。当我将它更改为任何值（除了 null 或空）时，它一直指向 order_address 表中的“entity_id”，我什至检查它是否设置正确，如下所示：

```
echo getMassactionIdField(); 
```

输出是我在其中输入的 ID `setMassactionIdField()`（例如 parent_id），因此设置正确，但结果显然使用了 entity_id。所以要么这是一个错误，要么是我在这里做的不对。

# c# - mysql存储过程中的错误与c#

> ID：14568617
> 
> 赞同：0
> 
> 时间：2013-01-28T18:25:42.533
> 
> 标签：c#, mysql

我想在 mySql 中使用存储过程，它必须返回`identity_scope()`. 我试试这个但不工作：

* * *

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `InsertVideo`(  
  OUT out_scope_id        INT,
    IN  in_youtubeidvideo       VARCHAR(15),
    IN  in_title                  VARCHAR(200),
    IN  in_rating           DOUBLE,
    IN  in_viewcount        INT
)
BEGIN 

     INSERT INTO Video 
     (                
       YoutubeIdVideo,      
       Title,               
       Rating,              
       ViewCount,                     
       DataAdded,
       ConvertedFlag
     )

     VALUES 
     (
       in_youtubeidvideo,                
       in_title,             
       in_rating,        
       in_viewcount,
       CURDATE(),
       false
     );
END 
```

* * *

```
using (MySqlConnection conn = new MySqlConnection(ConfigurationManager.ConnectionStrings["AxWaveConnection"].ToString()))
            {
                try
                {
                    conn.Open();
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }

                MySqlCommand cmd = new MySqlCommand("InsertVideo", conn);
                cmd.CommandType = System.Data.CommandType.StoredProcedure;

                cmd.Parameters.Add("out_scope_id", scopeID);
                cmd.Parameters.Add(new MySqlParameter("in_youtubeidvideo", VideoId));
                cmd.Parameters.Add(new MySqlParameter("in_title", Title));
                cmd.Parameters.Add(new MySqlParameter("in_viewcount", ViewCount));
                cmd.Parameters.Add(new MySqlParameter("in_rating", Rating));

                cmd.Parameters["out_scope_id"].Direction = ParameterDirection.Output;

                try
                {
                    cmd.ExecuteNonQuery();

                    scopeID = Convert.ToInt32(cmd.Parameters["out_scope_id"].Value);
                }
                catch (Exception)
                {
                    scopeID = -1;        //Duplicate Record
                }

                conn.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:31:21.257

您忘记在 proc 中设置参数的值；存储过程中的最后一行应如下所示：

```
select out_scope_id = LAST_INSERT_ID(); 
```

顺便说一句：SCOPE_IDENTITY() 是一个 MS SQL Server 函数；不是 MySQL 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:32:15.950

```
SELECT @@IDENTITY AS 'Identity';
GO 
```

# c# - 剑道窗口加载 aspx 页面

> ID：14568618
> 
> 赞同：0
> 
> 时间：2013-01-28T18:25:45.407
> 
> 标签：c#, asp.net, asp.net-mvc, kendo-ui

请有人解释我如何在 Kendo UI 窗口中打开我的解决方案中的 ASPX 页面并获取我需要的任何值？

我想要的是用我自己的 ASPX 页面打开一个 Kendo 窗口，在 Kendo 窗口中选择一个模板后，它将一个 ID 传递到主视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:42:30.053

[此演示](http://demos.kendoui.com/web/window/ajax.html)展示了如何使用属性将远程页面加载到 Window 的内容中`content`：

```
window.kendoWindow({
    content: "myPage.aspx"
}); 
```

尽管默认情况下它只希望将 HTML 注入您的页面，因此结果不应包含`<html>` `<head>`和`<body>`标签。然而，此时标记只是插入到页面中，因此任何 JavaScript 都可以直接与“父级”通信，因为它们都是同一个页面。

* * *

您还可以指定`iframe`选项

```
window.kendoWindow({
    content: "myPage.aspx",
    iframe: true
}); 
```

这将使窗口内容`<iframe>`而不是将其注入页面。我认为您的内容可以像普通页面一样指定`<html>` `<head>`and`<body>`标记，但是现在您的 JavaScript 必须做一些不同的事情才能将值传递回父级。那是回到普通 JS 的领域，而不是剑道。如果我没记错的话，您可以通过以下方式调用 iframe 父级中的函数：

```
window.parent.myFunction("some value"); 
```

# weblogic - weblogic：在应用程序级别禁用默认基本身份验证

> ID：14568620
> 
> 赞同：4
> 
> 时间：2013-01-28T18:25:50.677
> 
> 标签：weblogic

我怎样才能做到这一点

强制有效基本身份验证凭据 - 错误 - 强制有效基本身份验证凭据

在我的应用程序的 weblogic.xml 中？我想禁用基本身份验证的默认 weblogic 行为。我不想在 config.xml 或 WLST 脚本中做。我们正在使用 weblogic 12c。

谢谢。

# ios6 - 为什么iOS6不能播放一些mp4视频文件？

> ID：14568623
> 
> 赞同：1
> 
> 时间：2013-01-28T18:26:10.020
> 
> 标签：ios6, html5-video, mp4

我有一个 mp4 视频可以在 iOS5 上正常播放，但不能在 iOS6 上播放。这是测试视频的直接链接：

[http://www.wordcafe.de/videos/test.mp4](http://www.wordcafe.de/videos/test.mp4)

网站上的所有其他视频都可以在 iOS6 上运行，只有这个特定的视频不能在 iOS6 上播放。我认为问题出在我的 HTML5 视频播放器上，但后来我发现即使是上面粘贴的视频的直接链接也不起作用。在我的 iPodTouch iOS6 上，我看到播放图标被一条对角线划掉了。有谁知道为什么以及如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:28:13.507

尝试将字段顺序设置为渐进式。[在 Apple 支持社区中找到](https://discussions.apple.com/thread/4367075?start=0&tstart=0)

# java - 关于在 Java 中实现我自己的 HashMap 的问题

> ID：14568631
> 
> 赞同：5
> 
> 时间：2013-01-28T18:26:40.910
> 
> 标签：java, hashmap

我正在执行一项任务，我必须实现自己的 HashMap。在赋值文本中，它被描述为一个列表数组，无论何时你想添加一个元素，它在数组中的最终位置由它的 hashCode 决定。在我的情况下，它是电子表格中的位置，所以我刚刚取了 columnNumber + rowNumber，然后将其转换为 String，然后转换为 int，作为 hashCode，然后我将它插入到数组中的那个位置。当然是以Node(key, value)的形式插入的，其中key是cell的位置，value是cell的值。

但是我必须说我不明白为什么我们需要一个列表数组，因为如果我们最终得到一个包含多个元素的列表，它不会大大增加查找时间吗？那么它不应该是一个节点数组吗？

我还在 Java 中找到了 HashMap 的这种实现：

```
public class HashEntry {
      private int key;
      private int value;

      HashEntry(int key, int value) {
            this.key = key;
            this.value = value;
      }     

      public int getKey() {
            return key;
      }

      public int getValue() {
            return value;
      }
}

public class HashMap {
  private final static int TABLE_SIZE = 128;

  HashEntry[] table;

  HashMap() {
        table = new HashEntry[TABLE_SIZE];
        for (int i = 0; i < TABLE_SIZE; i++)
              table[i] = null;
  }

  public int get(int key) {
        int hash = (key % TABLE_SIZE);
        while (table[hash] != null && table[hash].getKey() != key)
              hash = (hash + 1) % TABLE_SIZE;
        if (table[hash] == null)
              return -1;
        else
              return table[hash].getValue();
  }

  public void put(int key, int value) {
        int hash = (key % TABLE_SIZE);
        while (table[hash] != null && table[hash].getKey() != key)
              hash = (hash + 1) % TABLE_SIZE;
        table[hash] = new HashEntry(key, value);
  }
} 
```

那么 put 方法是否正确，首先查看 table[hash]，如果它不是空的，如果里面的东西没有得到 key，被输入到 put 方法中，那么它继续到 table[ （哈希 + 1）% TABLE_SIZE]。但如果它是同一个键，它只会覆盖该值。那这样理解正确吗？是不是因为 get 和 put 方法使用相同的方法来查找数组中的位置，给定相同的键，它们最终会在数组中的相同位置结束？

我知道这些问题可能有点基本，但我花了很多时间试图解决这个问题，为什么任何帮助都会非常感激！

*编辑*

所以现在我尝试通过一个 Node 类自己实现 HashMap，它只是用一个键和一个对应的值构造一个节点，它还有一个 getHashCode 方法，我只是将两个值连接在一起。

我还构建了一个 SinglyLinkedList（之前分配的一部分），我将其用作存储桶。

而我的哈希函数就是 hashCode % hashMap.length。

这是我自己的实现，你怎么看？

```
package spreadsheet; 

public class HashTableMap {

  private SinglyLinkedListMap[] hashArray;
  private int size;

  public HashTableMap() {
    hashArray = new SinglyLinkedListMap[64];
    size = 0;  
  }

  public void insert(final Position key, final Expression value) {

      Node node = new Node(key, value); 
      int hashNumber = node.getHashCode() % hashArray.length;       
      SinglyLinkedListMap bucket = new SinglyLinkedListMap();
      bucket.insert(key, value);
      if(hashArray[hashNumber] == null) {
        hashArray[hashNumber] = bucket;
        size++; 
      }
      if(hashArray[hashNumber] != null) {
        SinglyLinkedListMap bucket2 = hashArray[hashNumber];
        bucket2.insert(key, value);
        hashArray[hashNumber] = bucket2;
        size++; 
      }
      if (hashArray.length == size) {
          SinglyLinkedListMap[] newhashArray = new SinglyLinkedListMap[size * 2];
      for (int i = 0; i < size; i++) {
          newhashArray[i] = hashArray[i];
      }
      hashArray = newhashArray;
    }
  } 

  public Expression lookUp(final Position key) {
      Node node = new Node(key, null); 
      int hashNumber = node.getHashCode() % hashArray.length;
      SinglyLinkedListMap foundBucket = hashArray[hashNumber];
      return foundBucket.lookUp(key); 
  }
 } 
```

* * *

查找时间应该在 O(1) 左右，所以我想知道是不是这样？如果不是，我该如何改进它，在这方面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T18:30:08.180

您必须制定一些计划来处理哈希冲突，其中两个不同的键落在同一个桶中，即数组的相同元素。

最简单的解决方案之一是为每个存储桶保留一个条目列表。

如果你有一个好的散列算法，并确保桶的数量大于元素的数量，你最终应该得到大多数桶有零个或一个项目，所以列表搜索不应该花很长时间。如果列表变得太长，那么是时候用更多的桶重新散列以分散数据了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:30:51.320

这实际上取决于您的哈希码方法有多好。假设你试图让它变得尽可能糟糕：你让哈希码每次都返回 1。如果是这种情况，您将拥有一个列表数组，但该数组中只有 1 个元素包含任何数据。该元素只会增长到其中包含一个巨大的列表。

如果你这样做了，你就会得到一个非常低效的哈希图。但是，如果您的哈希码稍微好一点，它会将对象分配到许多不同的数组元素中，因此效率会更高。

最理想的情况（通常无法实现）是拥有一个哈希码方法，该方法无论您放入什么对象都返回一个唯一的数字。如果你能做到这一点，你将永远不需要列表数组。你可以只使用一个数组。但是由于您的哈希码不是“完美的”，因此两个不同的对象可能具有相同的哈希码。您需要能够通过将它们放在同一数组元素的列表中来处理这种情况。

但是，如果您的哈希码方法“非常好”并且很少发生冲突，那么列表中的元素很少会超过 1 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:42:40.867

```
class SpreadSheetPosition {
    int column;
    int row;

    @Override
    public int hashCode() {
        return column + row;
    }
}

class HashMap {
    private Liat[] buckets = new List[N];

    public void put(Object key, Object value) {
        int keyHashCode = key.hashCode();
        int bucketIndex = keyHashCode % N;
        ...
    }
} 
```

将拥有 N 个列表与只有一个列表/数组进行比较。为了在列表中搜索，必须遍历整个列表。通过使用列表数组，至少可以减少单个列表。甚至可能获得一个或零个元素的列表（null）。

如果`hashCode()`它尽可能独特，那么立即找到的机会就很高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T18:30:31.273

`Lists`它们通常被称为存储桶，是一种处理冲突的方式。当两个数据元素具有相同的哈希码 mod TABLE SIZE 时，它们会发生冲突，但两者都必须存储。

更糟糕的冲突是两个不同的数据点具有相同的`key`- 这在哈希表中是不允许的，一个会覆盖其他的。如果你只是将行添加到列，那么 (2,1) 和 (1,2) 的键都是 3，这意味着它们不能存储在同一个哈希表中。如果您在没有分隔符的情况下将字符串连接在一起，那么问题在于 (12,1) 与 (1, 21) --- 两者都有键“121” 使用分隔符（例如逗号）所有键都将是不同的。

如果哈希码是相同的 mod TABLE_SIZE，则不同的键可以放在同一个块中。这些列表是将两个值存储在同一个存储桶中的一种方法。

# c# - 无法加载文件或程序集：System.Data.OracleClient

> ID：14568637
> 
> 赞同：0
> 
> 时间：2013-01-28T18:27:06.663
> 
> 标签：c#, asp.net, visual-studio, system.data.oracleclient

我目前正在尝试通过 Visual Studio 2012 在 Chrome 中调试带有 ac# 代码的 Asp.net 2.0 项目，而不会收到错误。该解决方案最初是在 VS 2005 中创建的，并将其升级/导入到 VS 2012 中。但是，我是当我尝试运行解决方案时遇到此错误：

> 无法加载文件或程序集 'System.Data.OracleClient, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我在解决方案中添加了`System.Data.OracleClient`对每个项目的引用，但这并没有解决问题。此外，我检查了 GAC（全局程序集缓存）以获取对程序集 ( `System.Data.OracleClient`) 的引用；它存在。我还在 .Net 2.0 版的 web.config 文件中添加了对程序集 () 的引用 (C:\WINNT\Microsoft.NET\Framework\v2.0.50727\CONFIG\web.config)。

我注意到该项目似乎在解决方案的 bin 文件夹中查找 dll，因此我已将 dll 从 GAC 复制到 bin。以上步骤均未解决问题。调试解决方案时，我继续收到相同的错误消息。您可以提供的任何答案或建议将不胜感激。先感谢您。

这是错误的附加部分：

* *** === 预绑定状态信息 === LOG: User = CORP\addison.sims LOG: DisplayName = System.Data.OracleClient, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL (完全指定）日志：Appbase = file:///C:/Users/addison.sims/dev/CorpServices/Sites/CorpServices/trunk/webroot/CorpServices/ 日志：初始 PrivatePath = C:\Users\roger.smith\ dev\CorpServices\Sites\CorpServices\trunk\webroot\CorpServices\bin

# 调用程序集：（未知）。

LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：C:\Users\roger.smith\dev\CorpServices\Sites\CorpServices\trunk\webroot\CorpServices\web.config LOG：使用来自 C:\Windows\Microsoft.NET\Framework 的机器配置文件\v2.0.50727\config\machine.config。LOG：后策略参考：System.Data.OracleClient，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089，processorArchitecture=MSIL ERR：已经加载了具有不同处理器架构的程序集。*** *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T15:54:53.793

我遇到了同样的问题，结果发现 Visual Studio 的目标是错误的 .NET Framework。我使用[此处](http://msdn.microsoft.com/en-us/library/bb398791%28v=vs.90%29.aspx)的说明更改了它。我尝试添加的 OracleClient 是 V4，我的目标是 .NET Framework 2。我更改为 .NET 4，它现在可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:31:49.223

根据我的经验，这很可能是由于使用 .NET“客户端配置文件”而不是完整框架造成的。[请](https://stackoverflow.com/questions/8124425/why-isnt-system-data-oracleclient-available-in-net-4-0-client-profile)参阅另一个问题。尝试下载并安装完整的框架。

# c++ - 如何使用非平凡的构造函数初始化静态类成员？

> ID：14568639
> 
> 赞同：4
> 
> 时间：2013-01-28T18:27:11.847
> 
> 标签：c++, windows, class, visual-c++

这在 C# 中是微不足道的，但在 C++（本机、Win32、Visual C++）中我看不到解决方案。因此，我有具有非平凡构造函数的 MyClass1 类，并且在 MyClass2 中我希望拥有 MyClass1 类型的静态成员：

MyClass1.h：

```
class MyClass1 
{
   public MyClass1(type1 arg1, type2 arg2);
} 
```

MyClass2.h：

```
class MyClass2
{
public:
   static MyClass1 Field1;
} 
```

和 MyClass2.cpp：

```
MyClass1 MyClass2::Field1(arg1, arg2); 
```

我希望这样的代码将初始化 MyClass2::Field 并在此初始化期间调用 MyClass1 构造函数。但是，看起来编译器只为 Class1 分配内存，并且从不调用构造函数，就像我这样做：

```
MyClass1 MyClass2::Field1 = *(MyClass1 *)malloc(sizeof(MyClass1)); 
```

C++ 中是否有任何“官方”方式来使用非平凡的构造函数初始化静态类成员？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:12:09.420

您可能会遇到[静态初始化订单惨败](http://www.parashift.com/c++-faq/static-init-order.html)。类或命名空间范围的静态变量在`main()`执行之前被初始化，但初始化的顺序取决于链接时间因素。

为了解决这个问题，请使用[Construct on First Use Idiom](http://www.parashift.com/c++-faq/static-init-order-on-first-use.html)，它利用了函数作用域静态变量在函数第一次被调用时被初始化的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-21T17:45:40.277

我不希望 Vitaliy 会遇到这种例外情况。[静态初始化顺序 Fiasco](http://www.parashift.com/c++-faq/static-init-order.html)需要两个对象，其中一个对象的初始化调用另一个对象的*方法*。

这里我们在 MyClass2 中有一个静态初始化程序，它调用另一个类 (MyClass1) 的*构造函数*（不是方法）。当然，我们不需要在调用构造函数之前初始化对象。

总之，我不知道为什么 Vitaliy 会得到这个异常。我很想知道答案，但似乎*不是*由于静态初始化程序订单惨败。

# c# - 关闭后保留对话框中的值 - windows窗体c#

> ID：14568640
> 
> 赞同：2
> 
> 时间：2013-01-28T18:27:16.010
> 
> 标签：c#, windows, forms, dialog

我对 C# 和 Windows 窗体还比较陌生，所以请原谅我这个看似简单的问题。

我有一个 Windows 应用程序，它有一个对话框，打开时包含带有一些默认值的文本框。这些可以根据用户想要使用的内容进行更改。然后使用此对话框中的值以及主窗体上的内容来创建 XML 文件。我遇到的问题是，如果我再次打开对话框以更改同一会话中的任何值，则原始值在那里，而不是任何新值。

如何让它保留在该特定会话中更改的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:47:40.427

如果我正确理解了这个问题，听起来您需要使用背景变量和 TextChanged 事件（尽管我更喜欢 KeyDown 事件，而我的代码使用了它）。例如，让我们将您的文本框称为 TextBox1。然后，您可以创建一个名为 string Temp 的全局变量并像这样使用它：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    temp = textBox1.Text;
} 
```

关闭对话框后，您可以在其他地方使用该变量，在您的情况下，听起来您想将其发送到 XML。另一种选择是使用 keydown 事件来拥有一个临时 XML 文件，该文件保留您的文本的值。这显然在计算上更昂贵，但它并不是什么大不了的事，除非这将在处理器受限的环境中使用。我要提到的最后一件事是，如果您使用多线程并传递该临时值的值，您可能会遇到麻烦。研究在其他线程上使用变量，而不是开始寻求帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:49:06.960

如果您想在下次打开对话框时查看用户的值，您需要将这些值保存在某处，然后在下次显示对话框时重新加载它们（通常在 Form_Load 或 Form_Show 上）。当然，您需要在退出之前保存这些值（可能在 Form_Close 中？）。

将这些值保存在哪里取决于您。如果您希望它仅用于程序的运行，您可以将它们保存在表单类中的一些静态变量中。或者，如果您想在下次运行程序时重新加载这些设置，您可以将这些设置存储在配置文件、注册表、隔离存储等中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:47:59.093

如果要保留用户上次使用对话框时输入的值，则需要在某处保留对对话框的引用。

此外，如果您在 Load 事件的对话框中设置一些数据，它可能会删除用户先前输入的数据。在没有看到您的代码的情况下，我目前无法提供更多信息。

# c# - 从 C# 代码编译 Java 有哪些方法？

> ID：14568641
> 
> 赞同：8
> 
> 时间：2013-01-28T18:27:20.297
> 
> 标签：c#, javac

我正在用 C# 编写多语言 IDE。现在，它可以作为一个功能合理的编辑器。但是，我现在正在努力添加编译和运行 Java 代码的功能（我知道用 C# 编写它听起来很傻，但我更喜欢使用 C#，而且我需要 Java 支持学校课程）。

在此背景之后，问题来了：从 C# 编译 Java 代码的最佳方法是什么？现在，我正在使用该`System.Diagnostics.Process`课程。基本上，我调用编译器的方式与从命令行调用 javac 的方式相同。这是我当前实现的一个粗略示例：

```
ProcessStartInfo buildInfo = new ProcessStartInfo();
buildInfo.WorkingDirectory = Path.GetDirectoryName(sourcePath);
buildInfo.RedirectStandardOutput = true;
buildInfo.RedirectStandardError = true;
buildInfo.UseShellExecute = false;
Process buildProcess = Process.Start(buildInfo); 
```

我重定向标准输出和错误，因为稍后应用程序会捕获它们以确定编译是否成功。有一个更好的方法吗？感觉有点草率，我想知道我是否忽略了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:21:33.750

你还有其他选择。Java 提供了 JNI（Java Native Interface），它允许 Java 调用本机代码**和**适当的，让本机代码调用 Java（尽管以一种相当复杂的方式。）

根据您希望获得多少学习体验，您可以直接使用 JNI 或使用诸如 jni4net 之类的库。另一种互操作方法是使用 ikvm，它是在 clr 中运行的 jvm，但我认为它对您没有用，因为它不包含编译器。

您还可以研究替代编译器，例如 gcj 或 ejc。

没有尝试编写 IDE，我不知道这些方法实际上是否比直接使用命令行更好。我的直觉是，对于简单的集成，命令行更容易使用，但更复杂的场景，例如具有多个组件的大型项目的增量编译，可能需要更紧密的集成。

如果您计划在键入时提供内联调试和错误突出显示等功能，无论如何您都将需要更紧密的集成。

IDE 是极其复杂的程序，即使仅仅是编程编辑器也足够复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:02:15.057

快速谷歌搜索表明（毫不奇怪）没有用于编译 Java 的 .Net API。因此，最简单的方法可能是`javac`通过命令行使用，就像您目前正在做的那样。

您的命令行代码看起来与我见过的示例相似，所以我不认为有很大的改进空间。因此，对您的问题的简短回答：不，您很好（无论如何都可以从 C# 编译 Java）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T19:18:09.553

您可以使用[Java Invocation API](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html)在您的进程中托管 JVM，然后通过[编译器 API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)运行编译器。它可能比为编译而启动单独的编译器进程更快，并且肯定会带来良好的学习体验（您需要从 .NET 端使用 P/Invoke 等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:18:58.227

有一些免费和商业工具：http: [//community.versant.com/Blogs/db4o/tabid/197/entryid/94/Default.aspx](http://community.versant.com/Blogs/db4o/tabid/197/entryid/94/Default.aspx) [http://visualstudiogallery.msdn.microsoft.com/9789645d-9b31 -4033-bcb1-53dc5ff58e05](http://visualstudiogallery.msdn.microsoft.com/9789645d-9b31-4033-bcb1-53dc5ff58e05)

等等……

# c# - 排列例程中的错误

> ID：14568643
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:27:21.813
> 
> 标签：c#, winforms

我有一个名为 ColourString 的简单对象类。

我正在尝试建立一个递归排列例程来处理我班级的锯齿状数组。

```
 static ColourString[][] perm2(int a, ColourString[][] x)
    {
        ColourString[][] retval = new ColourString[0][];
        foreach (ColourString[] p in x[a])
        {
            foreach (ColourString[] p2 in perm2(a + 1, x))
            {
                // do some stuff here to compare the strings in the colourString[] objects
            }
         }
         return retval;
     } 
```

我的代码给了我以下错误：

> 错误 1 ​​无法将类型“Test.Form1.ColourString”转换为“Test.Form1.ColourString[]”。

请问我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:44:17.237

`x[a]` is a `ColourString[]`, so `p` in your `foreach` should be a `ColourString` not a `ColourString[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:49:45.887

其他评论已经确定了问题，但请允许我具体说明...

根据您的函数原型，x 是 ColourString[][] 类型
因此 x[a] 是 ColourString[] 类型
您的外部循环尝试迭代属于 ColourString[] 类型的可枚举类型的 ColourString[] 对象，这是不可能的. x[a] 的元素是 ColourString，而不是 ColourString[]。

# c++ - c ++ fstreams用utf-16名称打开文件

> ID：14568645
> 
> 赞同：0
> 
> 时间：2013-01-28T18:27:33.723
> 
> 标签：c++, windows, qt

起初我在 Linux 上构建了我的项目，它是围绕流构建的。

当我开始迁移到 Windows 时，我遇到了一些问题。
我有一个要以 UTF-16 编码打开的文件的名称。 ![在此处输入图像描述](../Images/5174c654f6b3cbfadbde26c799a347a0.png)

我尝试使用 fstream 来做到这一点：

```
QString source;  // content of  source  is shown on image
char *op= (char *) source.data();
fstream stream(op, std::ios::in | std::ios::binary); 
```

但无法打开文件。
当我检查它时，

```
 if(!stream.is_open())
   {}  // I always get that  it's not opened. But file indeed exists. 
```

我试着用 wstream 来做。但结果是一样的，因为 wstream 也只接受 char *。据我了解是这样，因为作为 char * 发送的 string 在第一个零之后被截断，并且只发送文件名的一个符号，因此永远找不到文件。我知道 Vissual Studio 中的 wfstream 可以接受 wchar_t * 行作为名称，但我选择的编译器是 MinGW，它没有 wstring 构造函数的签名。

有没有办法用 STL 流来做到这一点？

**添加**
该字符串不仅可以包含 Ascii 符号，还可以同时包含俄语、德语、中文符号。我不想将自己仅限于 ASCII 或本地编码。

**下一个补充**
数据也可以不同，不仅是ASCII，否则我根本不会用Unicode来打扰自己。例如

![在此处输入图像描述](../Images/81579d5fa76c276d06e2ce79e8a9d7cc.png)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:54:09.760

[Boost::Filesystem](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/index.htm)尤其是[fstream.hpp](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/reference.html#File-streams)标头可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:07:24.260

如果您使用的是 MSVC 并且它是 c++ 标准库的实现，那么这样的东西应该可以工作：

```
QString source;  // content of  source  is shown on image
wchar_t *op= source.data();
fstream stream(op, std::ios::in | std::ios::binary); 
```

这是因为 Microsoft c++ 实现有一个扩展，允许使用宽字符串打开 fstream。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:58:48.180

在将文件名传递给 fstream 之前，使用带 CP_ACP 的[WideCharToMultiByte](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)转换 UTF-16 字符串。

# javascript - 函数参数可以遮蔽全局变量吗

> ID：14568646
> 
> 赞同：2
> 
> 时间：2013-01-28T18:27:39.773
> 
> 标签：javascript, jquery, scope

我在 .js 文件中定义了一个全局变量。：

如果我的函数有一个与全局变量同名的参数，则该函数无法初始化全局变量：

```
var myvar;

function init(myvar){
    myvar= myvar;
} 
```

但是，如果我更改变量名称，使全局变量和参数具有不同的名称，则该函数可以初始化全局变量：

```
var myvar2;

function init(myvar){
    myvar2= myvar;
} 
```

（`myvar2`然后正确初始化）。

为什么会这样？javascript 不允许在不同范围内具有相同名称的两个变量，所以会发生变量阴影？

我认为 js 引擎能够以与 java 相同的方式区分方法范围和全局范围（尽管使用 this 关键字）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:29:44.113

那是对的; 全局变量被遮蔽。想想看。在本声明中：

```
myvar = myvar; 
```

如果没有阴影，哪个`myvar`是全局的，哪个是本地的？

# python - 在 Python 中创建 .zip？

> ID：14568647
> 
> 赞同：36
> 
> 时间：2013-01-28T18:27:40.413
> 
> 标签：python, zip, zipfile

我正在尝试在我的脚本中创建一个函数，它将给定源目录 ( `src`) 的内容压缩到一个 zip 文件 ( `dst`)。例如，`zip('/path/to/dir', '/path/to/file.zip')`， where`/path/to/dir`是一个目录，并且`/path/to/file.zip`还不存在。我**不想**压缩目录本身，这在我的情况下完全不同。我想压缩目录中的文件（和子目录）。这就是我正在尝试的：

```
def zip(src, dst):
    zf = zipfile.ZipFile("%s.zip" % (dst), "w")
    for dirname, subdirs, files in os.walk(src):
        zf.write(dirname)
        for filename in files:
            zf.write(os.path.join(dirname, filename))
    zf.close() 
```

这将创建一个本质上是`/`. 例如，如果我 zipped `/path/to/dir`，解压缩 zip 会创建一个目录，其中包含“path”，该目录中包含“to”等。

有没有人有一个不会导致这个问题的功能？

我不能强调这一点，它**需要**压缩目录中的文件，而不是目录本身。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-28T18:50:17.437

该[`zipfile.write()`](http://docs.python.org/2/library/zipfile#zipfile.ZipFile.write)方法采用一个可选`arcname`参数，该参数指定 zipfile 中的文件名。

`src`您可以使用它在开头剥离路径。在这里，我[`os.path.abspath()`](http://docs.python.org/2/library/os.path.html#os.path.abspath)用来确保两者`src`和返回的文件名`os.walk()`都有一个共同的前缀。

```
#!/usr/bin/env python2.7

import os
import zipfile

def zip(src, dst):
    zf = zipfile.ZipFile("%s.zip" % (dst), "w", zipfile.ZIP_DEFLATED)
    abs_src = os.path.abspath(src)
    for dirname, subdirs, files in os.walk(src):
        for filename in files:
            absname = os.path.abspath(os.path.join(dirname, filename))
            arcname = absname[len(abs_src) + 1:]
            print 'zipping %s as %s' % (os.path.join(dirname, filename),
                                        arcname)
            zf.write(absname, arcname)
    zf.close()

zip("src", "dst") 
```

使用这样的目录结构：

```
src
└── a
    ├── b
    │   └── bar
    └── foo 
```

脚本打印：

```
zipping src/a/foo as a/foo
zipping src/a/b/bar as a/b/bar 
```

生成的 zip 文件的内容是：

```
Archive:  dst.zip
  Length     Date   Time    Name
 --------    ----   ----    ----
        0  01-28-13 11:36   a/foo
        0  01-28-13 11:36   a/b/bar
 --------                   -------
        0                   2 files 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:38:37.400

据我所知，你很接近。您可以使用`dirname`and`basename`来确保您获取了正确的路径名：

```
>>> os.path.dirname("/path/to/dst")
'/path/to'
>>> os.path.basename("/path/to/dst")
'dst' 
```

然后使用`chdir`您可以确保您在父级中，因此路径是相对的。

```
def zip(src, dst):
    parent = os.path.dirname(dst)
    folder = os.path.basename(dst)

    os.chdir(parent):
    for dirname, subdirs, filenames in os.walk(folder):
        ... 
```

这将创建：

```
dst/a.txt
dst/b
dst/b/c.txt
...etc... 
```

如果不想包含名称“dst”，您可以这样做`os.chdir(dst)`然后`os.walk('.')`.

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:46:27.197

使用[`arcname`参数](http://docs.python.org/3/library/zipfile.html#zipfile.ZipFile.write)控制 zip 文件中的名称/路径。

例如，对于仅包含文件、不包含目录的 zip 文件：

```
zf.write(os.path.join(dirname, filename), arcname=filename) 
```

或者在 zip 文件中创建一个新目录：

```
zf.write(os.path.join(dirname, filename), arcname=os.path.join("my_zip_dir", filename)) 
```

# neo4j - 关于 HA 设置的 Neo4j 配置问题

> ID：14568649
> 
> 赞同：0
> 
> 时间：2013-01-28T18:27:44.550
> 
> 标签：neo4j, eucalyptus

我正在 Eucalyptus 上设置一个 3 节点 HA Neo4j 集群（类似于使用 AWS）。所有节点都正常运行（在默认的独立模式下，您可以在日志中看到），但是在 HA 模式下重新启动 neo4j 服务后，我在 /var/log/neo4j/neo4j.0.0 中收到以下错误。日志。下面包含错误，以及 HA Neo4j 集群中每个节点的配置：

[https://gist.github.com/4657797](https://gist.github.com/4657797)

关于为什么会发生此错误的任何想法？提前感谢您在尝试解决此问题时提供的任何帮助。

干杯，

小哈罗德斯宾塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:58:34.597

哈罗德，看来你还是配置了Zookeeper，启动失败。如果您关注[http://docs.neo4j.org/chunked/snapshot/ha-setup-tutorial.html](http://docs.neo4j.org/chunked/snapshot/ha-setup-tutorial.html)，您应该得到一个无 Zookeeper 的设置，结果类似于[https://gist.github.com/4663136](https://gist.github.com/4663136)

随时跟进更多细节，我什至对此进行了截屏，请参阅[https://vimeo.com/51906007](https://vimeo.com/51906007)

高温高压

/彼得

# android - 无法安装驱动程序以使 adb 在我所有的 android 设备上工作

> ID：14568650
> 
> 赞同：0
> 
> 时间：2013-01-28T18:27:47.390
> 
> 标签：android

我最近遇到了我的安卓设备的问题。我目前有一个nexus one、nexus 4 和一个mt65xx android 手机。

Adb 以前在我的 mt65xx 上运行良好。但是我在安装我的 nexus 4 adb 时遇到了错误，所以我卸载了所有的 android 驱动程序。之后，我不再能够为我上面列出的任何手机重新安装驱动程序。

我很确定我通过设备管理器做了正确的安装方式。

USB驱动程序的直接如下 C:\Users\user-Home\Desktop\adt-bundle-windows-x86\sdk\extras\google\usb_driver 。我为我的nexus one和nexus 4尝试了它，但是当我浏览到该位置并按下一步时，它给了我错误“windows找不到您设备的驱动程序软件”。

我还尝试通过单击“让我从设备列表中选择”来强制安装，然后我选择了有磁盘。它确实已成功安装但是当我运行 adb 设备时，它没有显示我的 android 设备......虽然它在我的另一台电脑上工作正常

这非常令人沮丧，我已经尝试解决这个问题大约 2-3 天。怎么可能解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:42:47.913

安装 Samsung Kies 或者您必须手动安装设备驱动程序：

```
Device Manaager -> yourDevice -> UpdateDriverSoftware -> Browse My Computer ... -> Let Me Pick From a List -> Samsung Android ADB InterFace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-05T14:01:40.837

手动安装您的设备驱动程序：设备管理器 -> yourDevice -> UpdateDriverSoftware -> 浏览我的电脑 ... -> 让我从列表中选择 -> 选择“显示所有设备” -> 单击下一步 -> 从磁盘安装 -> 单击浏览 -> 选择你的 %Android SDK 目录%\extras\google\usb_driver\android_winusb.inf

请遵循以下提示并忽略警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:44:20.503

操作说明 ：

1\. 重新安装usb驱动。

2\. 安装[此](http://forum.xda-developers.com/showthread.php?t=1992345)驱动程序。

3 在手机中启用“USB 调试”。

4\. 再试一次。

* * *

现在应该可以了。

再见，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-22T17:12:57.353

我遇到了和你类似的问题，最终我决定制作一个工具，它应该可以解决任何 Android 设备的问题，你只需要

1.  以USB调试模式将手机连接到PC并运行该工具。

它将检测安装特定于您手机的驱动程序

这是[回购的链接](https://github.com/fawazahmed0/Latest-adb-fastboot-installer-for-windows)

# asp.net-mvc - 首先使用 EF5 模型的 MV4 应用程序，没有 ViewModel 或存储库

> ID：14568657
> 
> 赞同：1
> 
> 时间：2013-01-28T18:28:11.183
> 
> 标签：asp.net-mvc, entity-framework, viewmodel, repository-pattern, ef-model-first

我正在构建一个 MVC4 应用程序，我首先使用了 EF5 模型，并保持它非常简单。这不会涉及一个庞大的应用程序，一次只会有 4 或 5 个人在上面，并且所有用户都将在能够访问应用程序的任何部分之前进行身份验证，这非常简单 - 调度员看到订单- 调度员完成订单排序的应用程序。

基本上我的问题是，如果我的应用程序的大小和范围如此之小，我是否需要担心存储库和 ViewModel。任何强类型化到域实体的视图都在使用该实体中的所有属性。我在我的控制器中使用 TryOrUpdateModel 并且已经阅读了一些内容说这可能会导致很多问题，但没有太多关于这些问题究竟是什么的信息。我不想为一个非常简单的应用程序使用极其复杂的模式。

希望我已经提供了足够的详细信息，如果有人想查看我的代码只是问，我真的在这里遇到了障碍，并且真的可以使用社区的一些建议。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:32:00.427

根据我的经验，对软件解决方案的需求往往会随着时间的推移而演变，远远超出最初的需求集。

现在通过遵循架构最佳实践，您将能够更好地适应解决方案在其整个生命周期内的更改。

Respository 模式和 ViewModel 都很强大，实现起来并不困难或耗时。我建议将它们用于小型项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:32:54.627

是的，您仍然想使用存储库和查看模型。这两种工具都允许您将代码放在一个地方而不是到处，这样可以节省您的时间。很有可能，它也会为您节省复制粘贴错误。

此外，拥有这些工具将使您将来更容易扩展系统，而不必倾注所有可读性差的代码。

分离您的关注点将导致整体代码更少，系统更高效，控制器/代码部分更小。视图模型和存储库实施起来并不严重。这不像您要实现控制器工厂或依赖注入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:39:21.927

### 视图模型：是的

将 EF 实体直接传递给视图时，我只看到坏点：

*   您需要手动添加白名单或黑名单，以防止[过度发布和批量分配](http://odetocode.com/blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx)
*   很容易不小心从视图中延迟加载额外数据，导致选择 N+1 问题
*   在我个人看来，模型应该与视图上显示的信息非常相似，并且在大多数情况下（基本的 CRUD 内容除外），视图包含来自多个实体的信息

### 存储库：否

实体框架 DbContext 已经是存储库和工作单元模式的实现。如果您希望一切都是可测试的，只需针对单独的数据库进行测试。如果你想让事情松散耦合，有一些方法可以用 EF 做到这一点，而无需使用存储库。老实说，我*真的*不明白自定义存储库的受欢迎程度。

# paypal - 使用 paypal api 发送发票？

> ID：14568658
> 
> 赞同：1
> 
> 时间：2013-01-28T18:28:12.650
> 
> 标签：paypal

我想让用户能够一键发送贝宝发票给他们的客户。angelleye 给了我他的 php CreateAndSendInvoice.php 文件，它应该可以做到这一点，但是我该如何开始使用它，我需要一个 api 密钥吗？

关键是每个用户都必须输入某种凭据来验证我的应用程序才能代表他们发送发票。

有谁知道如何做到这一点？（网站是[https://cworklog.com](https://cworklog.com)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:21:06.980

老实说，我建议暂时避免使用实际的发票 API。我一直在和我的一个客户一起使用它，现在它非常有问题。

如果您将自己的发票 ID 传递给 CreateInvoice 或 CreateAndSendInvoice，它有时只会通过 IPN 返回。PayPal 似乎无法告诉我这是为什么。

此外，如果您需要重新发送发票，这可能会很痛苦。SendInvoice 只能使用一次。如果您尝试使用它再次发送相同的发票，您将收到错误消息。此时您唯一的选择是使用首次创建发票时返回的 InvoiceURL。

这很好，只是当使用此 URL 时，它会强制登录到 PayPal 以查看发票，因此不能以这种方式使用访客结帐（使用信用卡而不是 PayPal 帐户付款）。

此外，GetTransactionDetails 也不会返回 PayPal 发票的发票 ID。我试图用它来解决 IPN 问题，但因这个想法而被关闭。

老实说，我建议您设置自己的发票系统。它真的不会比构建实际的发票 API 请求多得多。

您可以让您的用户设置他们的发票项目，并基本上在您自己的数据库中创建发票。然后生成带有指向服务器上 URL 的支付按钮的基本 HTML 电子邮件。此 URL 可以拉回所有订单详细信息，以在屏幕上向付款人显示发票。

您可以在其中构建 Express Checkout 以进行付款处理，并且我上面提到的所有问题都不会妨碍您。

您可以使用 Permissions API 允许用户授予您的应用代表他们进行调用的权限。用户还可以通过“请求 API 凭据”下的 PayPal 帐户配置文件手动执行此操作。他们不会创建自己的权限，而是选择授予 API 权限，然后输入您的 API 用户名以及他们想要批准的权限的复选框。

答案总结：

*   在沙箱上设置您的 API 调用，以便您有一个工作演示。
*   将您的申请提交给 x.com 以获得批准。这将为您提供一个实时应用程序 ID，以用于实时 PayPal 服务器。
*   让您的用户从他们的 PayPal 帐户中手动授予您的应用程序权限，或使用 Permissions API 通过 API 授予权限。
*   构建您的系统以相应地为您的客户使用通过 Permissions API 获得的令牌。

# r - 将多列粘贴在一起

> ID：14568662
> 
> 赞同：111
> 
> 时间：2013-01-28T18:28:15.633
> 
> 标签：r, paste, r-faq

我在数据框中有一堆列，我想将它们粘贴在一起（用“-”分隔），如下所示：

```
data <- data.frame('a' = 1:3, 
                   'b' = c('a','b','c'), 
                   'c' = c('d', 'e', 'f'), 
                   'd' = c('g', 'h', 'i'))
i.e.     
     a   b   c  d  
     1   a   d   g  
     2   b   e   h  
     3   c   f   i 
```

我想成为：

```
a x  
1 a-d-g  
2 b-e-h  
3 c-f-i 
```

我通常可以这样做：

```
within(data, x <- paste(b,c,d,sep='-')) 
```

然后删除旧列，但不幸的是我不知道具体列的名称，只是所有列的集体名称，例如我会知道`cols <- c('b','c','d')`

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-28T18:31:38.917

```
# your starting data..
data <- data.frame('a' = 1:3, 'b' = c('a','b','c'), 'c' = c('d', 'e', 'f'), 'd' = c('g', 'h', 'i')) 

# columns to paste together
cols <- c( 'b' , 'c' , 'd' )

# create a new column `x` with the three columns collapsed together
data$x <- apply( data[ , cols ] , 1 , paste , collapse = "-" )

# remove the unnecessary columns
data <- data[ , !( names( data ) %in% cols ) ] 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-01-28T19:29:40.777

作为[baptiste's answer](https://stackoverflow.com/a/14568822/892313)的变体，`data`按照您的定义定义，并且要放在一起的列定义在`cols`

```
cols <- c("b", "c", "d") 
```

您可以添加新列`data`并删除旧列

```
data$x <- do.call(paste, c(data[cols], sep="-"))
for (co in cols) data[co] <- NULL 
```

这使

```
> data
  a     x
1 1 a-d-g
2 2 b-e-h
3 3 c-f-i 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-10-07T19:40:49.843

使用`tidyr`包，这可以在 1 个函数调用中轻松处理。

```
data <- data.frame('a' = 1:3, 
                   'b' = c('a','b','c'), 
                   'c' = c('d', 'e', 'f'), 
                   'd' = c('g', 'h', 'i'))

tidyr::unite_(data, paste(colnames(data)[-1], collapse="_"), colnames(data)[-1])

  a b_c_d
1 1 a_d_g
2 2 b_e_h
3 3 c_f_i 
```

* * *

**编辑：**排除第一列，其他所有内容都被粘贴。

```
# tidyr_0.6.3

unite(data, newCol, -a) 
# or by column index unite(data, newCol, -1)

#   a newCol
# 1 1  a_d_g
# 2 2  b_e_h
# 3 3  c_f_i 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-01-28T18:37:40.257

我会构建一个新的data.frame：

```
d <- data.frame('a' = 1:3, 'b' = c('a','b','c'), 'c' = c('d', 'e', 'f'), 'd' = c('g', 'h', 'i')) 

cols <- c( 'b' , 'c' , 'd' )

data.frame(a = d[, 'a'], x = do.call(paste, c(d[ , cols], list(sep = '-')))) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-10-08T12:02:03.960

只是为了添加额外的解决方案，`Reduce`它可能比它慢`do.call`但比它更好，`apply`因为它会避免`matrix`转换。此外，`for`我们可以使用一个循环`setdiff`来删除不需要的列

```
cols <- c('b','c','d')
data$x <- Reduce(function(...) paste(..., sep = "-"), data[cols])
data[setdiff(names(data), cols)]
#   a     x
# 1 1 a-d-g
# 2 2 b-e-h
# 3 3 c-f-i 
```

* * *

或者，我们可以`data`使用`data.table`包进行更新（假设新数据）

```
library(data.table)
setDT(data)[, x := Reduce(function(...) paste(..., sep = "-"), .SD[, mget(cols)])]
data[, (cols) := NULL]
data
#    a     x
# 1: 1 a-d-g
# 2: 2 b-e-h
# 3: 3 c-f-i 
```

另一种选择是使用而`.SDcols`不是`mget`

```
setDT(data)[, x := Reduce(function(...) paste(..., sep = "-"), .SD), .SDcols = cols] 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-11-09T18:42:33.143

我在一个小样本上对 Anthony Damico、Brian Diggs 和 data_steve 的答案进行了基准测试，`tbl_df`得到了以下结果。

```
> data <- data.frame('a' = 1:3, 
+                    'b' = c('a','b','c'), 
+                    'c' = c('d', 'e', 'f'), 
+                    'd' = c('g', 'h', 'i'))
> data <- tbl_df(data)
> cols <- c("b", "c", "d")
> microbenchmark(
+     do.call(paste, c(data[cols], sep="-")),
+     apply( data[ , cols ] , 1 , paste , collapse = "-" ),
+     tidyr::unite_(data, "x", cols, sep="-")$x,
+     times=1000
+ )
Unit: microseconds
                                         expr     min      lq      mean  median       uq       max neval
do.call(paste, c(data[cols], sep = "-"))       65.248  78.380  93.90888  86.177  99.3090   436.220  1000
apply(data[, cols], 1, paste, collapse = "-") 223.239 263.044 313.11977 289.514 338.5520   743.583  1000
tidyr::unite_(data, "x", cols, sep = "-")$x   376.716 448.120 556.65424 501.877 606.9315 11537.846  1000 
```

然而，当我自己评估`tbl_df`大约 100 万行和 10 列时，结果却大不相同。

```
> microbenchmark(
+     do.call(paste, c(data[c("a", "b")], sep="-")),
+     apply( data[ , c("a", "b") ] , 1 , paste , collapse = "-" ),
+     tidyr::unite_(data, "c", c("a", "b"), sep="-")$c,
+     times=25
+ )
Unit: milliseconds
                                                       expr        min         lq      mean     median        uq       max neval
do.call(paste, c(data[c("a", "b")], sep="-"))                 930.7208   951.3048  1129.334   997.2744  1066.084  2169.147    25
apply( data[ , c("a", "b") ] , 1 , paste , collapse = "-" )  9368.2800 10948.0124 11678.393 11136.3756 11878.308 17587.617    25
tidyr::unite_(data, "c", c("a", "b"), sep="-")$c              968.5861  1008.4716  1095.886  1035.8348  1082.726  1759.349    25 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-01-05T16:29:36.977

在我看来，`sprintf`-function 也应该在这些答案中占有一席之地。您可以`sprintf`按如下方式使用：

```
do.call(sprintf, c(d[cols], '%s-%s-%s')) 
```

这使：

```
 [1] "a-d-g" "b-e-h" "c-f-i" 
```

并创建所需的数据框：

```
data.frame(a = d$a, x = do.call(sprintf, c(d[cols], '%s-%s-%s'))) 
```

给予：

```
 a     x
1 1 a-d-g
2 2 b-e-h
3 3 c-f-i 
```

尽管与 @BrianDiggs 的/组合`sprintf`相比没有明显优势，但当您还想填充所需字符串的某些部分或想指定位数时，它特别有用。看几个选项。`do.call``paste``?sprintf`

另一种变体是使用`pmap`from [purrr](/questions/tagged/purrr "显示标记为“purrr”的问题")：

```
pmap(d[2:4], paste, sep = '-') 
```

注意：此`pmap`解决方案仅在列不是因素时才有效。

* * *

更大数据集的基准测试：

```
# create a larger dataset
d2 <- d[sample(1:3,1e6,TRUE),]
# benchmark
library(microbenchmark)
microbenchmark(
  docp = do.call(paste, c(d2[cols], sep="-")),
  appl = apply( d2[, cols ] , 1 , paste , collapse = "-" ),
  tidr = tidyr::unite_(d2, "x", cols, sep="-")$x,
  docs = do.call(sprintf, c(d2[cols], '%s-%s-%s')),
  times=10) 
```

结果是：

```
Unit: milliseconds
 expr       min        lq      mean    median        uq       max neval cld
 docp  214.1786  226.2835  297.1487  241.6150  409.2495  493.5036    10 a  
 appl 3832.3252 4048.9320 4131.6906 4072.4235 4255.1347 4486.9787    10   c
 tidr  206.9326  216.8619  275.4556  252.1381  318.4249  407.9816    10 a  
 docs  413.9073  443.1550  490.6520  453.1635  530.1318  659.8400    10  b 
```

* * *

使用数据：

```
d <- data.frame(a = 1:3, b = c('a','b','c'), c = c('d','e','f'), d = c('g','h','i')) 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-06-23T17:25:57.847

这是一种非常规（但速度很快）的方法：使用`fwrite`from`data.table`将列“粘贴”在一起，然后`fread`将其读回。为方便起见，我将这些步骤编写为一个名为的函数`fpaste`：

```
fpaste <- function(dt, sep = ",") {
  x <- tempfile()
  fwrite(dt, file = x, sep = sep, col.names = FALSE)
  fread(x, sep = "\n", header = FALSE)
} 
```

这是一个例子：

```
d <- data.frame(a = 1:3, b = c('a','b','c'), c = c('d','e','f'), d = c('g','h','i')) 
cols = c("b", "c", "d")

fpaste(d[cols], "-")
#       V1
# 1: a-d-g
# 2: b-e-h
# 3: c-f-i 
```

它的表现如何？

```
d2 <- d[sample(1:3,1e6,TRUE),]

library(microbenchmark)
microbenchmark(
  docp = do.call(paste, c(d2[cols], sep="-")),
  tidr = tidyr::unite_(d2, "x", cols, sep="-")$x,
  docs = do.call(sprintf, c(d2[cols], '%s-%s-%s')),
  appl = apply( d2[, cols ] , 1 , paste , collapse = "-" ),
  fpaste = fpaste(d2[cols], "-")$V1,
  dt2 = as.data.table(d2)[, x := Reduce(function(...) paste(..., sep = "-"), .SD), .SDcols = cols][],
  times=10)
# Unit: milliseconds
#    expr        min         lq      mean     median         uq       max neval
#    docp  215.34536  217.22102  220.3603  221.44104  223.27224  225.0906    10
#    tidr  215.19907  215.81210  220.7131  220.09636  225.32717  229.6822    10
#    docs  281.16679  285.49786  289.4514  286.68738  290.17249  312.5484    10
#    appl 2816.61899 3106.19944 3259.3924 3266.45186 3401.80291 3804.7263    10
#  fpaste   88.57108   89.67795  101.1524   90.59217   91.76415  197.1555    10
#     dt2  301.95508  310.79082  384.8247  316.29807  383.94993  874.4472    10 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-15T15:32:16.337

我知道这是一个老问题，但我认为无论如何我都应该按照提问者的建议使用 paste() 函数提出简单的解决方案：

```
data_1<-data.frame(a=data$a,"x"=paste(data$b,data$c,data$d,sep="-")) 
data_1
  a     x
1 1 a-d-g
2 2 b-e-h
3 3 c-f-i 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-28T18:31:40.677

```
library(plyr)

ldply(apply(data, 1, function(x) data.frame(
                      x = paste(x[2:4],sep="",collapse="-"))))

#      x
#1 a-d-g
#2 b-e-h
#3 c-f-i

#  and with just the vector of names you have:

ldply(apply(data, 1, function(x) data.frame(
                      x = paste(x[c('b','c','d')],sep="",collapse="-"))))

# or equally:
mynames <-c('b','c','d')
ldply(apply(data, 1, function(x) data.frame(
                      x = paste(x[mynames],sep="",collapse="-")))) 
```

# python - 在 Python 中使用 Popen 调用管道命令

> ID：14568663
> 
> 赞同：0
> 
> 时间：2013-01-28T18:28:17.103
> 
> 标签：python, unix, subprocess

调用包含多个管道的命令`Popen`以便读取其输出的正确方法是什么？我试过了：

`Popen(shlex.split("mycmd arg1 | mysecondcmd - | thirdcmd -", stdout=PIPE)")`

但我不相信`shlex.split`就在这里。什么是正确的语法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:31:07.100

你有几个选择——你可以通过`shell=True`：

```
Popen('command1 | command2 | command3',shell=True) 
```

或者，您可以将其分解为一组`Popen`调用，将它们的标准输出连接到下一个 Popen 的标准输入，如[文档](http://docs.python.org/2/library/subprocess.html#replacing-shell-pipeline)中所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:46:35.327

Using the [sh module](http://pypi.python.org/pypi/sh), pipes become function composition:

```
import sh
output = sh.thirdcmd(sh.mysecondcmd(sh.mycmd("arg1"))) 
```

* * *

If you want to do it with subprocess without `shell = True`, there is an [example in the docs](http://docs.python.org/library/subprocess.html#replacing-shell-pipeline) which shows how to write shell pipelines using `subprocess.Popen`. Note that you are supposed to close the `proc.stdout`s so that `SIGPIPE`s can be received properly:

```
import subprocess
proc1 = subprocess.Popen(shlex.split('mycmd arg1'), stdout = subprocess.PIPE)
proc2 = subprocess.Popen(shlex.split('mysecondcmd'), stdin = proc1.PIPE,
                         stdout = subprocess.PIPE)
proc3 = subprocess.Popen(shlex.split('thirdcmd'), stdin = proc2.PIPE,
                         stdout = subprocess.PIPE)

# Allow proc1 to receive a SIGPIPE if proc2 exits.
proc1.stdout.close()
# Allow proc2 to receive a SIGPIPE if proc3 exits.
proc2.stdout.close()
out, err = proc3.communicate() 
```

This might look like a lot more work than using `shell = True`. The reason why you might want to avoid `shell = True` is because [it can be a security risk](http://docs.python.org/2/library/subprocess.html#frequently-used-arguments) (page down to the "Warning" box), especially if you are running a command supplied by a (potentially malicious) user.

# c# - 从 c# 应用程序调用 azure powershell cmdlet 失败

> ID：14568665
> 
> 赞同：3
> 
> 时间：2013-01-28T18:28:22.040
> 
> 标签：c#, powershell, azure, cmdlets

我试图自动化部署到天蓝色云的过程。执行此操作的我的 powershell 脚本在从 azure powershell 命令行执行时就像一个魅力。当我尝试从 c# 应用程序调用相同的脚本时，它失败了。

这是我的代码：

```
 internal  void RunPowerShellScript(string scriptPath, Dictionary<string, string> arguments)
    {
        RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
        Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
        runspace.Open();
        RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);
        Pipeline pipeline = runspace.CreatePipeline();
        //Here's how you add a new script with arguments            
        Command myCommand = new Command(scriptPath, true);
      foreach (var argument in arguments)
        {
            myCommand.Parameters.Add(new CommandParameter(argument.Key, argument.Value));
        }            
        pipeline.Commands.Add(myCommand);
        var results = pipeline.Invoke();
        foreach (var psObject in results)
        {
            _view.PrintOutput(psObject.ToString());
        }
    } 
```

我也关注了其他线程，比如这个：[Execute PowerShell Script from C# with Commandline Arguments](https://stackoverflow.com/questions/527513/execute-powershell-script-from-c-sharp-with-commandline-arguments) 和这个：[从 c# 将参数传递给 powershell](https://stackoverflow.com/questions/2594587/passing-parameters-to-powershell-from-c-sharp)

但似乎没有任何效果。我收到以下错误：

无法验证参数“PublishSettingsFile”的参数。参数为 null 或空。提供一个不为 null 或空的参数，然后再次尝试该命令。

剧本：

```
Param(  $serviceName = "",
    $storageAccountName = "",
    $packageLocation = "",
    $cloudConfigLocation = "",
    $environment = "",
    $deploymentLabel = "",
    $timeStampFormat = "g",
    $alwaysDeleteExistingDeployments = 1,
    $enableDeploymentUpgrade = 1,
    $selectedsubscription = "default",
    $subscriptionDataFile = ""
 )

 function Publish()
{
#Set-ExecutionPolicy RemoteSigned
Set-AzureSubscription -SubscriptionName "Windows Azure MSDN – Visual Studio Professional" -CurrentStorageAccount $storageAccountName
$deployment = Get-AzureDeployment -ServiceName $serviceName -Slot $slot -ErrorVariable a -ErrorAction silentlycontinue 
if ($a[0] -ne $null)
{
    Write-Output "$(Get-Date –f $timeStampFormat) - No deployment is detected. Creating a new deployment. "
}
#check for existing deployment and then either upgrade, delete + deploy, or cancel according to $alwaysDeleteExistingDeployments and $enableDeploymentUpgrade boolean variables
if ($deployment.Name -ne $null)
{
    switch ($alwaysDeleteExistingDeployments)
    {
        1 
        {
            switch ($enableDeploymentUpgrade)
            {
                1  #Update deployment inplace (usually faster, cheaper, won't destroy VIP)
                {
                    Write-Output "$(Get-Date –f $timeStampFormat) - Deployment exists in $servicename.  Upgrading deployment."
                    UpgradeDeployment
                }
                0  #Delete then create new deployment
                {
                    Write-Output "$(Get-Date –f $timeStampFormat) - Deployment exists in $servicename.  Deleting deployment."
                    DeleteDeployment
                    CreateNewDeployment

                }
            } # switch ($enableDeploymentUpgrade)
        }
        0
        {
            Write-Output "$(Get-Date –f $timeStampFormat) - ERROR: Deployment exists in $servicename.  Script execution cancelled."
            exit
        }
    } #switch ($alwaysDeleteExistingDeployments)
} else {
        CreateNewDeployment
}
SwapVip
}
 function DeleteDeployment()
{
write-progress -id 2 -activity "Deleting Deployment" -Status "In progress"
Write-Output "$(Get-Date –f $timeStampFormat) - Deleting Deployment: In progress"

#WARNING - always deletes with force
$removeDeployment = Remove-AzureDeployment -Slot $slot -ServiceName $serviceName -Force

write-progress -id 2 -activity "Deleting Deployment: Complete" -completed -Status $removeDeployment
Write-Output "$(Get-Date –f $timeStampFormat) - Deleting Deployment: Complete"
}

function StartInstances()
{
write-progress -id 4 -activity "Starting Instances" -status "In progress"
Write-Output "$(Get-Date –f $timeStampFormat) - Starting Instances: In progress"

$deployment = Get-AzureDeployment -ServiceName $serviceName -Slot $slot
$runstatus = $deployment.Status

if ($runstatus -ne 'Running') 
{
    $run = Set-AzureDeployment -Slot $slot -ServiceName $serviceName -Status Running
}
$deployment = Get-AzureDeployment -ServiceName $serviceName -Slot $slot
$oldStatusStr = @("") * $deployment.RoleInstanceList.Count

while (-not(AllInstancesRunning($deployment.RoleInstanceList)))
{
    $i = 1
    foreach ($roleInstance in $deployment.RoleInstanceList)
    {
        $instanceName = $roleInstance.InstanceName
        $instanceStatus = $roleInstance.InstanceStatus

        if ($oldStatusStr[$i - 1] -ne $roleInstance.InstanceStatus)
        {
            $oldStatusStr[$i - 1] = $roleInstance.InstanceStatus
            Write-Output "$(Get-Date –f $timeStampFormat) - Starting Instance '$instanceName': $instanceStatus"
        }

        write-progress -id (4 + $i) -activity "Starting Instance '$instanceName'" -status "$instanceStatus"
        $i = $i + 1
    }

    sleep -Seconds 1

    $deployment = Get-AzureDeployment -ServiceName $serviceName -Slot $slot
}

$i = 1
foreach ($roleInstance in $deployment.RoleInstanceList)
{
    $instanceName = $roleInstance.InstanceName
    $instanceStatus = $roleInstance.InstanceStatus

    if ($oldStatusStr[$i - 1] -ne $roleInstance.InstanceStatus)
    {
        $oldStatusStr[$i - 1] = $roleInstance.InstanceStatus
        Write-Output "$(Get-Date –f $timeStampFormat) - Starting Instance '$instanceName': $instanceStatus"
    }

    $i = $i + 1
}

$deployment = Get-AzureDeployment -ServiceName $serviceName -Slot $slot
$opstat = $deployment.Status 

write-progress -id 4 -activity "Starting Instances" -completed -status $opstat
Write-Output "$(Get-Date –f $timeStampFormat) - Starting Instances: $opstat"
}
function AllInstancesRunning($roleInstanceList)
{
foreach ($roleInstance in $roleInstanceList)
{
    if ($roleInstance.InstanceStatus -ne "ReadyRole")
    {
        return $false
    }
}

return $true
}
function SwapVip()
{
 Write-Output "$(Get-Date –f $timeStampFormat) - Swap production and staging for $servicename."
 Move-AzureDeployment -ServiceName $servicename
}
function CreateNewDeployment()
{
write-progress -id 3 -activity "Creating New Deployment" -Status "In progress"
Write-Output "$(Get-Date –f $timeStampFormat) - Creating New Deployment: In progress"

$opstat = New-AzureDeployment -Slot $slot -Package $packageLocation -Configuration  $cloudConfigLocation -label $deploymentLabel -ServiceName $serviceName

$completeDeployment = Get-AzureDeployment -ServiceName $serviceName -Slot $slot
$completeDeploymentID = $completeDeployment.deploymentid

write-progress -id 3 -activity "Creating New Deployment" -completed -Status "Complete"
Write-Output "$(Get-Date –f $timeStampFormat) - Creating New Deployment: Complete,    Deployment ID: $completeDeploymentID"

StartInstances
}

function UpgradeDeployment()
{
write-progress -id 3 -activity "Upgrading Deployment" -Status "In progress"
Write-Output "$(Get-Date –f $timeStampFormat) - Upgrading Deployment: In progress"

# perform Update-Deployment
$setdeployment = Set-AzureDeployment -Upgrade -Slot $slot -Package $packageLocation -Configuration $cloudConfigLocation -label $deploymentLabel -ServiceName $serviceName -Force

$completeDeployment = Get-AzureDeployment -ServiceName $serviceName -Slot $slot
$completeDeploymentID = $completeDeployment.deploymentid

write-progress -id 3 -activity "Upgrading Deployment" -completed -Status "Complete"
Write-Output "$(Get-Date –f $timeStampFormat) - Upgrading Deployment: Complete,       Deployment ID: $completeDeploymentID"
}
Import-Module Azure
$pubsettings = $subscriptionDataFile
Import-AzurePublishSettingsFile $pubsettings
Set-AzureSubscription -CurrentStorageAccount $storageAccountName -SubscriptionName      $selectedsubscription

#set remaining environment variables for Azure cmdlets
$subscription = Get-AzureSubscription $selectedsubscription
$subscriptionname = $subscription.subscriptionname
$subscriptionid = $subscription.subscriptionid
$slot = $environment

Write-Output "$(Get-Date –f $timeStampFormat) - Azure Cloud Service deploy script   started."
Write-Output "$(Get-Date –f $timeStampFormat) - Preparing deployment of     $deploymentLabel for $subscriptionname with Subscription ID $subscriptionid."

Publish

$deployment = Get-AzureDeployment -slot $slot -serviceName $servicename
$deploymentUrl = $deployment.Url

Write-Output "$(Get-Date –f $timeStampFormat) - Created Cloud Service with URL    $deploymentUrl."
Write-Output "$(Get-Date –f $timeStampFormat) - Azure Cloud Service deploy script  finished." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:51:28.010

我相信您传递 publishsettings 文件的方式会导致问题。传递 publishsettings 文件时，您必须添加引号，如果没有引号，您将遇到异常。

以下是基于您的代码的代码，我通过使用 (\") 传递带有引号的发布设置文件对其进行了测试，它工作正常：

```
private void button1_Click(object sender, EventArgs e)
{
  Dictionary<string, string> myDict= new Dictionary<string, string>();
  myDict.Add("-subscriptionDataFile", "\"C:\\InstallBox\\asc.publishsettings\"");
  RunPowerShellScript("C:\\InstallBox\\testcode.ps1", myDict);
}

internal void RunPowerShellScript(string scriptPath, Dictionary<string, string> arguments)
 {
   RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
   Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
   runspace.Open();
   RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);
   Pipeline pipeline = runspace.CreatePipeline();
   //Here's how you add a new script with arguments            
   Command myCommand = new Command(scriptPath);
   foreach (var argument in arguments)
   {
      myCommand.Parameters.Add(new CommandParameter(argument.Key, argument.Value));
   }
   pipeline.Commands.Add(myCommand);
   var results = pipeline.Invoke();
   foreach (var psObject in results)
    {
      .........
    }
   } 
```

我的 testcode.ps1 如下：

```
Param(  [string]$subscriptionDataFile)
Import-Module Azure
Import-AzurePublishSettingsFile subscriptionDataFile
Get-AzureSubscription 
```

为了确保我能看到您的问题，如果我将字典键值对更改为如下（不带引号），我会得到与您描述的完全相同的错误：

```
myDict.Add("-subscriptionDataFile", "C:\\InstallBox\\asc.publishsettings"); 
```

所以传递 PublishSettings 文件的正确方法如下：

```
myDict.Add("-subscriptionDataFile", "\"C:\\InstallBox\\asc.publishsettings\""); 
```

# openid - 代理服务器的 Flask-OpenID 问题

> ID：14568671
> 
> 赞同：2
> 
> 时间：2013-01-28T18:28:50.353
> 
> 标签：openid, flask

all - 我在尝试部署使用 Flask-OpenID 扩展的站点时遇到问题。在 localhost 上，我通过完整登录 -> 登录周期后移动没有问题 - 但在我的生产服务器上，它在 Flask 应用程序（与 Gunicorn 一起运行）前面运行 Nginx 代理，我在 openid 上遇到错误。我连接到的任何提供者的响应的领域和 openid.return_to 参数。

基本上，领域和 return_to 指向我的下游 Flask 应用程序而不是代理服务器。例如，对于`http://www.foo.com/login/`Flask-OpenID 机器的预期“下一个”url，将提供程序改为 target `http://127.0.0.1:8000/login/?next=/login/`，这是我的 Flask 应用程序运行的本地主机和端口。

有什么方法可以控制这种行为并让 Flask-OpenID 通过代理服务器正确重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:19:01.290

听起来您的代理服务器没有传递 HOST 标头，使用您可以`proxy_set_header Host $host;`在 location 指令中使用的 nginx。

您可能还想查看设置[X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)和 X-Forwarded-Proto 标头，以便您可以正确读取实际的客户端 IP 和协议。Werkzeug 提供了一个[修复程序来帮助解决这个问题，](http://werkzeug.pocoo.org/docs/contrib/fixers/#werkzeug.contrib.fixers.ProxyFix) [Flask 文档](http://flask.pocoo.org/docs/deploying/others/#proxy-setups)中有一个详细的示例，`request.remote_addr`应该是你所期望的。

这是一个更完整的 nginx 位置指令：

```
location / {
    proxy_pass  http://localhost:8000/;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
} 
```

# .htaccess - .htaccess mod_rewrite 无法删除页面名称

> ID：14568673
> 
> 赞同：1
> 
> 时间：2013-01-28T18:28:59.233
> 
> 标签：.htaccess

无法确定 .htaccess 的 mod 重写我想要将`[http://www.example.com/archive.php?title=about_me](http://www.example.com/archive.php?title=about_me)`动态 url 重写为的 url `[http://www.example.com/about_me](http://www.example.com/about_me)`。我正在使用 php，这是我当前的 .htaccess 代码，但是它只重写以`[http://www.example.com/archive/about_me](http://www.example.com/archive/about_me)`希望删除存档。

```
Options +FollowSymLinks -MultiViews
rewriteengine on

RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/archive\.php\?title=([^&\ ]+)
RewriteRule ^ /archive/%1? [L,R=301]
RewriteRule ^/?archive/(.*)$ /archive?title=$1 [L]

## Hide .php extension
## To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC] 
```

我确实用这段代码正确地重写了它

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/archive\.php\?title=([^&\ ]+)
RewriteRule ^ /%1? [L,R=301]
RewriteRule ^/(.*)$ /archive?title=$1 [L] 
```

但是它然后返回一个页面找不到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:44:49.707

如果您想要`/archive/`删除 ，则必须确保任何形式为 的 URI 都`/something` **必须绝对路由到`archive.php`**脚本。因为根本无法判断是否`/my_blog`实际上是请求`/my_blog`或是否需要将`archive.php`“my_blog”作为查询字符串中**标题的值发送到脚本。**`-f`您可以做的最好的事情是通过and`-d`条件检查它是否不是对现有资源的请求：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/archive\.php\?title=([^&\ ]+)
RewriteRule ^ /%1? [L,R=301]
# no /archive/ ^

# condition checks
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?(.*)$ /archive?title=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:29:48.510

这样的事情应该可以解决问题：

```
RewriteCond %{QUERY_STRING} ^title=(.*)
RewriteRule ^archive.php /%1?
RewriteRule ^(.*)$ /archive?title=$1 [L] 
```

编辑：添加了最后的 RewriteRule，如我对原始问题的评论中所述。根据评论，我相信您正在尝试做以下两件事：

1.  **将任何用户输入的“真实” URL重定向**到“友好” URL：`http://www.example.com/archive.php?title=about_me`到`http://www.example.com/about_me`问题中所述。

2.  **将“友好” URL重写**为“真实” URL：`http://www.example.com/about_me`to `http://www.example.com/archive.php?title=about_me`，如前所述并不清楚。

# mysql - where子句匹配同一张表中的2行得到结果

> ID：14568676
> 
> 赞同：0
> 
> 时间：2013-01-28T18:29:03.857
> 
> 标签：mysql, sql

我有一个搜索查询，我需要修改并适应我们拥有的自定义配置文件系统，该系统使用下表：

```
 profile_key | profile_value        | user_id
       1      |    test1             |  10
       2      |    test2             |  10
       3      |    ["test3","test4"] |  10 
```

我需要在 where 子句中添加与所有行匹配的内容（取决于用户在搜索表单中定义的内容）以获取 user_id，例如：

```
 select user_id from table where (profile_key = 1 && profile_value regexp 'test1') && (profile_key = 3 && profile_value regexp 'test4') 
```

如果它与所有定义的 profile_key 和正则表达式匹配，我需要获取所有 user_id。

知道我怎么能做到这一点吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:32:32.177

你说`profile_key`应该是`1`and `3`。这是不可能的。

您需要使用`OR`，而不是`AND`。

```
SELECT user_id 
FROM   table 
WHERE  ( profile_key = 1 && profile_value REGEXP 'test1' ) OR ( 
       profile_key = 3 && profile_value REGEXP 'test4' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:33:04.313

最简单的方法是使用`EXISTS`：

```
SELECT user_id
FROM users
WHERE EXISTS (SELECT 1 FROM profiles WHERE profile_key = 1 
    AND profile_value regexp 'test1' AND profiles.user_id = users.user_id)
AND EXISTS (SELECT 1 FROM profiles WHERE profile_key = 3 
    AND profile_value regexp 'test4' AND profiles.user_id = users.user_id) 
```

您也可以使用`INNER JOIN`, 为要匹配的每一行完成此操作：

```
SELECT user_id
FROM users
INNER JOIN profiles p1 ON users.user_id = p1.user_id
INNER JOIN profiles p2 ON users.user_id = p2.user_id
WHERE p1.profile_key = 1 AND p1.profile_value regexp 'test1'
AND p2.profile_key = 3 AND p2.profile_value regexp 'test4' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:38:31.507

使用'IN'怎么样，像这样

```
select user_id 
from table 
where (profile_key = 1 && 'test1' IN profile_value) 
    && (profile_key = 3 && 'test4' IN profile_value ) 
```

# objective-c - 以编程方式将 leftBarButtonItem 添加到应用程序

> ID：14568680
> 
> 赞同：0
> 
> 时间：2013-01-28T18:29:19.617
> 
> 标签：objective-c, uinavigationcontroller, uitableview, uibarbuttonitem, appdelegate

我正在尝试将 leftBarButtonItem 添加到我的 iPhone 应用程序中。我有导航控制器，里面有 TableViewController。我在我的 AppDelegate.m 文件中编码以下行。

```
self.viewCon = [[UITableViewController alloc]init];
    self.navCon = [[UINavigationController alloc]initWithRootViewController:self.viewCon];

  self.viewCon.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] 
initWithTitle:@"Second View"  style:UIBarButtonItemStyleBordered target:self action:@selector(push)]autorelease]; 
```

导航项目不会出现在屏幕上。桌子上。可能是什么问题？顺便说一句，没有 ARC 或故事板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T00:26:39.097

我假设您想要一个顶部带有 NavigationController 的 TableView，在这种情况下，您的根视图控制器将是您的导航控制器而不是您的 tableview。如果你在 IB 中正确构建了应用程序（因为我看不到你做了什么，所以在黑暗中刺伤），那么你不应该初始化你的导航控制器。如果是这种情况，那么它应该很简单

```
self.viewCon.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"Second View"  style:UIBarButtonItemStyleBordered target:self action:@selector(push)]autorelease]; 
```

我认为正在发生的事情是你正在用你的程序初始化覆盖你当前设置的 NavController，这导致一切都消失了。

如果所有这些都是这种情况，并且您可能已经尝试过，请发回错误和您的 IB 设置的屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:31:28.013

试试这个：

```
UIBarButtonItem *bbi = [[[UIBarButtonItem alloc] initWithTitle:@"Second View" style:UIBarButtonItemStyleBordered target:self action:@selector(push)]autorelease];
[self.navigationItem setLeftBarButtonItem:bbi]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T18:50:29.397

```
[self.navigationController setNavigationBarHidden:NO];
UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
[backButton setFrame:CGRectMake(0, 0, 49,32)];
        [ backButton setBackgroundImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
        [backButton addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];
        UIBarButtonItem *back = [[UIBarButtonItem alloc]initWithCustomView:backButton];
        self.navigationItem.leftBarButtonItem = back;
        [back release]; 
```

# regex - 扩展正则表达式 - 认为我的搜索可能过于严格但不确定

> ID：14568684
> 
> 赞同：1
> 
> 时间：2013-01-28T18:29:52.303
> 
> 标签：regex, linux, expression

我试图找出这个扩展表达式来使用以下参数在 txt 文件中搜索特定行：

*   包含七位数字的行，
*   前后用非数字字符包围，
*   第三位和第四位之间有一个或多个破折号或下划线。

这些应该匹配：

```
x555-1212x
x555__1212x
x555-_-1212x 
```

但这些不匹配：

```
x999555-1212x
x555-1212999x x999555-1212999x
555-121x
x55-1212
5551212 
```

这是我尝试过的，根据检查脚本，它给了我 7 行中的 5 行

```
egrep '[^0-9]+[[:digit:]]{3}[-_]+[[:digit:]]{4}[^0-9]+' foo.txt 
```

我不确定我在哪里出错了......我是否过于严格并消除了某些空白字符，如 Tab 或其他东西。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:30:40.597

由于您对具有您的模式的**行**感兴趣，您可以在匹配模式中使用开始`^`和结束正则表达式运算符。`$`

正则表达式：`^.*?(\D|^)(\d{3}[-_]+\d{4})(\D|$).*?$`
在这里解释演示：[http ://regex101.com/r/gQ0cE2](http://regex101.com/r/gQ0cE2)

# java - Spring MVC 3：MVC上下文中控制器上的AOP不起作用

> ID：14568685
> 
> 赞同：1
> 
> 时间：2013-01-28T18:29:59.240
> 
> 标签：java, spring, model-view-controller, controller, aop

我正在尝试建议（用于记录目的）在带有 Aspect 的 Spring Web App 中使用 @RequestMappging 注释的方法。这是我的方面类：

```
@Aspect
public class InboundSpringPerfLoggerAspect extends AbstractInboundPerfLoggerAspect {

@Around(value = "execution(* *(..)) && @annotation(requestMapping)" , argNames = "pjp, requestMapping")
public Object doPerfLoggingForOperation(final ProceedingJoinPoint pjp, final RequestMapping requestMapping) throws Throwable {
    return doPerfLogging(pjp, LOGGER_NAME);
} 
```

我的 XML servlet 配置（MVC 上下文）文件是这样的：

```
<aop:aspectj-autoproxy/>

<!-- Logging aspect for inbound rest calls -->
<bean id="inboundServicePerfLoggerAspect" class="common.logging.aspect.InboundSpringPerfLoggerAspect"/>

<context:annotation-config />

<context:component-scan base-package="web.configuration" />
<context:component-scan base-package="web.controller" />
<context:component-scan base-package="web..service" />

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

<bean name="xmlViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
    <property name="order" value="1" />
</bean>

</beans> 
```

然而，在调试模式下 Spring 的日志启动时显示相同的消息：

```
DEBUG [org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping] Rejected bean name 'inboundServicePerfLoggerAspect': no URL paths identified 
```

当然，控制器类也没有得到适当的建议。他们工作得很好，但没有发生 Spring 代理 AOP。

问题出在哪里？

谢谢

# jquery - Ajax/jQuery 链接未正确加载

> ID：14568687
> 
> 赞同：0
> 
> 时间：2013-01-28T18:30:06.383
> 
> 标签：jquery, html, css, ajax

我目前正在使用 jQuery/Ajax 页面加载脚本，将我的网页触发到 div 标签中（而不是每次都刷新页面）。

我刚刚开始注意到，正在加载的页面内的任何链接都不会在同一个 div 中显示它们的目的地？

主意：

主页上的链接 1 > 加载到主内容 div 标签 > 单击刚刚从链接 1 加载的内容上的另一个链接 > 加载到主 div 标签中。但是现在，它只是将其作为新页面打开。

链接的教导/调用方式是通过`<ul id="style"><li>link</li></ul>`标签。

非链接工作页面的编码如下：

```
<ul id="t-endnav">

            <li><a href="lukeberry.php">Luke Berry</a></li><br />
            <li><a href="click.php">Click Radio</a></li>

</ul> 
```

您可以在以下网址找到该网站：[http](http://colourednoise.co.uk/site/22/chrome.php) ://colourednoise.co.uk/site/22/chrome.php - 该页面位于“Portfolio”下，“Click Radio”和“Luke Berry”都应该加载他们的页面 -从“投资组合”中显示的当前内容的位置。

知道我哪里出错了吗？今天把我的头搞砸了。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:39:09.913

通过 AJAX 加载的所有内容都需要在回调函数中将方法应用于该新内容。例子：

```
$('#SomeDivWithLinks').load('whatever.php #DivToLoad',function(){
    $('a').on('click',function(e){
        e.preventDefault():
        alert('this totally superworks');
    });
}); 
```

如果不在回调函数中执行，您的 jQuery 代码将永远不会看到新内容可以被操作。

编辑：只要你的回调函数不需要参数，你就可以这样：

```
function doSomething() {
    alert('happy times!');
}

$('#SomeDivWithLinks').load('whatever.php #DivToLoad',doSomething); 
```

# jquery - jqPlot 在动态生成的 div 中

> ID：14568690
> 
> 赞同：1
> 
> 时间：2013-01-28T18:30:10.353
> 
> 标签：jquery, dynamic, jqplot

我在其中一个 jquery 函数中生成了一个 div，现在我想在里面制作一个 jqPlot 图表。它是这样声明的`var plot1 = jQuery.jqplot ('chart_div', [chart1]`......因为 chart_div 是稍后创建的，它不在 DOM 中。我不知道如何在这里使用类似`.live()`or的东西`.on()`。

# ruby-on-rails - 如何从模型实例中发现可访问的属性名称？

> ID：14568694
> 
> 赞同：1
> 
> 时间：2013-01-28T18:30:34.503
> 
> 标签：ruby-on-rails, rails-activerecord

[这个答案](https://stackoverflow.com/a/1291395/414825)说您可以`object.attribute_names`获取模型实例的属性名称列表。

但是有什么方法可以获取所有*可访问*属性名称的列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:41:40.157

您可以使用**[`accessible_attributes`](http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/ClassMethods/accessible_attributes)**.

您必须提供一个角色，因为不同的角色可以有不同的可访问属性。

如果要从模型实例中获取属性，可以使用以下代码：

```
@my_model.class.accessible_attributes(:admin) # Returns array of symbols 
```

# c# - Windows Phone 8：如何在示例照片中包含图像？

> ID：14568697
> 
> 赞同：1
> 
> 时间：2013-01-28T18:30:46.047
> 
> 标签：c#, windows-phone-8, windows-phone, jpeg2000

我正在`PhotoChooserTask`模拟器中测试基于 Windows Phone 8 的应用程序。我想测试一个特定的图像。是否可以在某个地方将您自己的图像添加到模拟器提供的示例照片中？

更具体地说，我想测试一个用于解码 JPEG 2000 图像的库，但我不清楚如何在 Windows Phone 上访问任意图像？`FileOpenPicker`可以编译，但是`NotSupportedException`在调用构造函数时会抛出 a 。这`PhotoChooserTask`是目前我最好的选择，但到目前为止，我还无法找到不属于示例照片的图像。据我所知，[MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402563%28v=vs.105%29.aspx)也没有提供足够好的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:39:03.723

在网上某处上传照片，在 WP8 IE10 中转到该 URL，点击并按住并单击“保存图片”。图片现在应该在 PhotoChooserTask 中可见的“已保存图片”文件夹中。

WP8 目前不支持 FileOpenPicker。它仅对从 C++ 代码中选择照片有用，因为 PhotoChooserTask 是托管 API，对 C++ 应用程序不可用。阅读更多关于这里@ [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj215901(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj215901(v=vs.105).aspx)

# java - 从意图中获取额外信息时出现空指针异常？

> ID：14568705
> 
> 赞同：0
> 
> 时间：2013-01-28T18:31:09.433
> 
> 标签：java, android, android-intent

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    int count = 0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button abButton = (Button) findViewById(R.id.button1);
        final TextView changelingtext = (TextView) findViewById(R.id.changeling);
         abButton.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                 Toast.makeText(getBaseContext(), "Buttons are working baby", Toast.LENGTH_LONG).show();
                 count++;
                String a = Integer.toString(count);
                 changelingtext.setText(a); 
                 gotonextpage(v);
             }
         });
    }
    public void gotonextpage(View view){
        Intent intent = new Intent(this, SecondpageActivity.class);
        startActivity(intent);
        intent.putExtra("count", count);
        //finish(); if you want to end this page

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

**头等舱在上面，二等舱在下面**

```
package com.example.collegematch;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class SecondpageActivity extends Activity {
    int values;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.secondpage);
        Intent intent = getIntent();
        values = intent.getExtras().getInt("count");
        Button exitButton = (Button) findViewById(R.id.exit);
        Button textbutton = (Button) findViewById(R.id.coolbutton);
        TextView texty = (TextView) findViewById(R.id.cooltext);
        textbutton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Toast.makeText(getBaseContext(), Integer.toString(values), Toast.LENGTH_LONG).show();
                System.out.println(values);
            }
        });
        exitButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Toast.makeText(getBaseContext(), "Seeya", Toast.LENGTH_LONG).show();

                finish();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.secondpage, menu);
        return true;
    }

} 
```

在 mainActivity 中，每次按下按钮 abButton 时，它都会将 count 变量增加 1。它还会创建一个新意图并通过 extra 将该变量发送到该意图。在第二个活动中，从意图中获取数据的“值”变量给了我一个空指针异常。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:33:15.123

```
 Intent intent = new Intent(this, SecondpageActivity.class);
 startActivity(intent);
 intent.putExtra("count", count); 
```

改成

```
 Intent intent = new Intent(this, SecondpageActivity.class);
 intent.putExtra("count", count);
 startActivity(intent); 
```

您已经开始第二个活动后设置额外的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:33:35.840

只需更改这两个代码行，

```
Intent intent = new Intent(this, SecondpageActivity.class);
intent.putExtra("count", count);
startActivity(intent); 
```

您的**SecondActivity** `Intent`在设置额外**计数**之前开始。

# networking - 使用多台服务器在现场管理会话状态？

> ID：14568707
> 
> 赞同：1
> 
> 时间：2013-01-28T18:31:12.583
> 
> 标签：networking, architecture, n-tier-architecture

我目前处于设计阶段，我们有几台服务器组成我们的系统，我需要找出存储会话信息的最佳方式，以便每个服务器都可以访问它。会话信息基本上是会话 id 和用户组名称列表的 guid。

主要的客户端应用程序是 Web 和移动应用程序。

我有以下配置：

所有用户都登录的主服务器，会话对象中填充了与用户对应的用户组信息。登录高峰期可能有多达 10,000 个用户。

包含存档内容的从属服务器，然后大多数用户将通过 UI 直接与从属服务器对话。从服务器需要主服务器上初始确定的会话信息。

一种选择是将每次登录的会话数据移动到从服务器并缓存在从服务器上，然后每个从服务器可以独立工作，并且不需要引用主服务器。

另一种选择是拥有包含会话信息的中央数据库，但由于我们的数据库位于每台服务器上（我们没有单独的机器充当数据库服务器），因此每个从属服务器都会有一个远程连接字符串返回到主服务器服务器数据库。毫无疑问，如果我必须从从服务器远程查询数据库，这会减慢速度。

然后，我遇到了需要清理会话的情况，但总的来说，我预计登录高峰期的数据不会超过 25 MB。

我们最多可以有 10 个从服务器。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:55:18.477

对于 IIS 7.0，这里有一篇技术网文章，其中概述了两种方法（会话服务器或使用 SQL 服务器）：

[http://technet.microsoft.com/en-us/library/cc754032(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc754032(v=ws.10).aspx)

我质疑是否需要运行 10 个 Web 服务器并在其上运行 10 个单独的数据库。当然，我对您正在编写的应用程序一无所知，并且很可能有充分的理由。

这是我的看法（我承认对您的应用程序了解有限）。

10,000 个可能的并发用户访问 1 个身份验证服务器，然后将他们重定向到 10 个服务器中的一个（或更多？）可能会导致瓶颈。如果大多数人使用其中一台服务器怎么办？如果很多人都尝试同时登录怎么办？

这是对不同架构的尝试：

```
 [LoadBalancer]
    -------------------------------------------------------------------------
    [WebServer]   [WebServer]   [WebServer]  -------------> [SessionServer]
                           [LoadBalancer]    
    -------------------------------------------------------------------------
    [AppServer]   [AppServer]   [AppServer]   [AppServer] -------^

    -------------------------------------------------------------------------
    [DBServer]
    [DBServer](backup) 
```

我写道，不知道这些是哪一类机器；它们可能不适合作为数据库服务器。

嗯，现在时间还早，我只喝第二杯咖啡。这可能会或可能不会有帮助，我希望它是。

# jquery - 测试页面是否加载了 JQuery load()

> ID：14568708
> 
> 赞同：0
> 
> 时间：2013-01-28T18:31:15.940
> 
> 标签：jquery, load, preventdefault

我一直在使用 JQuery 的`load();`功能来加载网站的部分内容。

我一直在阅读虽然这可能看起来不错，但使用会破坏对 SEO 的任何希望，因此建议在我正在使用`load()`的链接选择器中保留一个真正的链接，因此当 Google 去抓取该链接时，它会发现`ahref`内容。

然后，我一直使用 JQuery 的`preventDefault();`.

我的问题是，说我有类似的东西

```
$('#mylink').click(function(a) {
   a.preventDefault();
   $('myContainer').load('about.php');
}); 
```

该文件，`about.php`通常不会包含页眉或页脚，因为我已经将它放在某个容器中，但是，我可以有一个条件或测试`about.php`来查看它是否被调用使用`load();`？因此，如果有人说访问`www.mysite.com/about.php`它会加载其余内容，使其看起来像一个普通页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:34:28.490

当然，在您的 PHP 文件中，您可以检测页面是否使用 ajax 请求，如果不是，则包括页眉和页脚：

```
if (!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && 
     strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    //requested with ajax
}else{
    //not ajax, include more content
} 
```

您可以轻松地将其设为变量并使用它来触发 PHP 在正确的位置包含以包含更多内容等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:36:07.033

我一直这样做是为了让它与 pushState() 一起工作。将您尝试加载的内容放入子文件夹，如 pages/whatever.php，然后让普通页面包含您想要的所有内容（页眉、页脚等）并需要 pages/whatever.php。对于 jQuery .load()，只需拉入 pages/ 文件。

这有点乏味，但符合 SEO 并且更加模块化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:21:51.273

在我的网站上，我喜欢让它变得简单，所以我总是将页眉/页脚添加到页面中。当您使用 jQuery 时`.load()`，您可以告诉它解析出加载页面的某个部分。

```
$('myContainer').load('about.php #myContainer'); 
```

这告诉 jQuery 加载`about.php`，但只附加`#myContainer`到元素。

文档：[http ://api.jquery.com/load/#loading-page-fragments](http://api.jquery.com/load/#loading-page-fragments)

# mysql - 处理重复而不从数据库中删除它们

> ID：14568725
> 
> 赞同：1
> 
> 时间：2013-01-28T18:32:11.770
> 
> 标签：mysql, sql

**我想知道是否有一些常规的方法来处理数据库中的重复而不实际删除重复的行。或者我想要实现的特定名称，所以我可以检查一下。**

我为什么要保留重复项？因为我必须监视他们。我必须知道它们是重复的并且不可搜索，但与此同时，我必须保留它们，因为我从外部源更新行，如果我要删除它们，它们会回到一旦我从外部源更新数据库。

我有两个想法：

1.  有一个额外的布尔列“可搜索”，但我觉得这是一个部分解决方案，将来可能会变得不够

2.  有一个额外的列“duplicate_of”。它将保留行重复的列的 id。这将是同一张表的外键，这有点奇怪。不是吗？

我知道这不是一个特定的编程问题，但我认为一定有人处理过类似的情况（Facebook - 他们跟踪那些与其他人重复的页面），并且很高兴知道经过验证的解决方案。

**编辑**：这些是紧密重复的，主要由它们的位置（lat，lng）确定，所以 DISTINCT 可能不是这里的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:37:33.877

我会创建一个具有`DISTINCT`价值的视图。拥有一个可供搜索的附加列听起来很乏味。您的第二个想法实际上更可行，并且自引用表没有什么奇怪的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:40:30.987

解决方案取决于其他几个因素。特别是，数据库是否支持真正的删除和更新（除了设置重复信息）？

您有一系列解决方案。一种是定期将不同的值放在单独的表中。如果您有批量插入并且没有更新/删除，这很有效。

如果您有一个正在更新的数据库，那么您可能希望在记录中维护一个版本号。这使您可以跟踪它。据推测，如果它是重复的，那么它里面还有另一个重复的键。

第二种方法的问题是它可能导致重复的树状结构。其中 A-->B-->C 和 D--> 所以 A 和 D 是重复的，但这并不明显。如果你总是输入最早的值*并且*没有更新或删除，那么这个解决方案是合理的。

# java-me - Java ME/J2ME 中的 SHA-256 散列函数

> ID：14568728
> 
> 赞同：0
> 
> 时间：2013-01-28T18:32:24.840
> 
> 标签：java-me, hmac, sha256

我已经在诺基亚开发者论坛上发布了这个问题，所以请多多包涵。

我正在编写一个应用程序，它需要找到一个以唯一值作为键的 URL 的 SHA-256 哈希 - 即`hmac('sha256', '27/3', '9EWVFmHpHN6n2YKW9QtvUqX3xbsFQUBovlrFddqnF7fpcSDA2q')`. 在 Java ME/J2ME 中执行此操作的最佳方法是什么？

我找到了许多使用`Mac`该类的示例，但 Java ME/J2ME 不支持此功能。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:58:19.390

我设法让事情正常进行，解决方案如下：

```
Digest  digest = new SHA256Digest();
HMac hmac = new HMac(digest);
hmac.init(new KeyParameter(appKeyHere));
hmac.update(requestURI, 0, lenOfReqURI);
byte[]  resBuf = new byte[digest.getDigestSize()];
hmac.doFinal(resBuf, 0);
String  resStr = new String(Hex.encode(resBuf)); // Contains final usable value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:13:28.863

[BouncyCastle 最新的 J2ME 兼容版本（轻量级 API）](http://www.bouncycastle.org/latest_releases.html)包含一个 SHA256 实现——`org.bouncycastle.crypto.digests.SHA256Digest`它应该适合你。

# macos - 从 osx 10.6.8 机器将 rsync 作为 LaunchDaemon 运行以将数据备份到 Ubuntu 11.1 服务器的最佳方式

> ID：14568735
> 
> 赞同：0
> 
> 时间：2013-01-28T18:32:50.213
> 
> 标签：macos, ubuntu, rsync

我正在从 osx 10.6.8 工作站将 rsync 作为 LaunchDaemon 运行，以将数据备份到 Ubuntu 11.1 服务器。由于我将 plist 文件放在 /Library/LaunchDaemons 中，因此它以 root 身份运行。不幸的是，它失败了，因为该命令需要服务器的 root 密码。当我使用自己作为用户运行它时，rsync 使用我在两台机器之间为我的帐户设置的 ssh 密钥，但不幸的是，它无法在我的 osX 机器上构建完整的文件列表，因为我没有列出的权限其他用户的目录。

我可以看到几种可能性，但我都不知道该怎么做：

-1- 在 osx 上，我怎样才能给自己列出其他用户目录的权限，以便我可以在自己的用户名下运行守护程序？
或者
-2- 如果我以 root 身份运行 rsync 守护进程，我可以安全地在两台机器的 root 帐户之间设置 ssh 密钥吗？或者，我可以以相对安全的方式自动将密码提供给守护程序作业吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:20:02.450

I see two easy possibilities for using your key under the root account:

1.  Copy your ssh key into the root account's ssh directory (/var/root/.ssh).
2.  Specify your ssh key explicitly in the ssh command, something like this:

    ```
    <key>ProgramArguments</key>
    <array>
        <string>/usr/bin/rsync</string>
        <string>-i</string>
        <string>/Users/thomashollier/.ssh/id_rsa</string>
        <string>...etc...</string>
    <array> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:19:24.503

谢谢你的提示。我将我的密钥复制到服务器的正确位置以获取根 ssh 密钥。我能够在命令行上从我的 osX 机器 ssh 和 rsync 到服务器，但不能直接从我的 launchDaemon。命令行上的 rsync 命令需要 -e "ssh -i /path/to/my/key/id_dsa" 参数，除了给它一个 bash 命令之外，我还没有弄清楚如何在 plist 文件中包含这些引号如下：

```
<key>ProgramArguments</key>
<array>
    <string>/bin/bash</string>
    <string>-c</string>
    <string>/usr/bin/rsync -avz /Users/myusername/Documents -e "ssh -i /Users/myusername/.ssh/id_dsa" server:/media/Backup/backup/</string>
</array> 
```

# scala - 使用 Spring 创建存储库 bean 时出错

> ID：14568738
> 
> 赞同：0
> 
> 时间：2013-01-28T18:32:57.493
> 
> 标签：scala, neo4j, spring-data-neo4j

我设置了 Neo4j-Kernel 1.9M04 和 Spring-Data-Neo4j 2.1.0 RELEASE。

更准确地说，这里是我的依赖项（来自我的 SBT 文件）：

```
 "org.springframework" % "spring-aop" % "3.2.0.RELEASE",
    "org.springframework" % "spring-aspects" % "3.2.0.RELEASE",
    "org.springframework" % "spring-beans" % "3.2.0.RELEASE",
    "org.springframework.data" % "spring-data-commons-core" % "1.4.0.RELEASE",
    "org.springframework" % "spring-expression" % "3.2.0.RELEASE",
    "org.springframework" % "spring-jdbc" % "3.2.0.RELEASE",
    "org.springframework" % "spring-orm" % "3.2.0.RELEASE",
    "org.springframework" % "spring-test" % "3.2.0.RELEASE",
    "org.springframework" % "spring-tx" % "3.2.0.RELEASE",
    "org.springframework.data" % "spring-data-neo4j" % "2.1.0.RELEASE" excludeAll(
      ExclusionRule(organization = "com.sun.jdmk"),
      ExclusionRule(organization = "com.sun.jmx"),
      ExclusionRule(organization = "javax.jms")
      ),
    "org.neo4j" % "neo4j" % "1.9.M04",
    "org.neo4j" % "neo4j-kernel" % "1.9.M04" % "test" classifier "tests" classifier "",
    "asm" % "asm-all" % "3.1",
    "org.specs2" %% "specs2" % "1.13" % "test" withSources(),
    "org.springframework.data" % "spring-data-neo4j-rest" % "2.1.0.RELEASE" 
```

在运行时，尝试自动装配 neo4j 存储库，我有这个堆栈：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.data.neo4j.config.Neo4jConfiguration#0': Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/neo4j/kernel/impl/core/LockReleaser
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532) ~[spring-beans-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) ~[spring-beans-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) ~[spring-beans-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) ~[spring-beans-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) ~[spring-beans-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) ~[spring-beans-3.2.0.RELEASE.jar:3.2.0.RELEASE]
Caused by: java.lang.NoClassDefFoundError: org/neo4j/kernel/impl/core/LockReleaser
    at java.lang.Class.getDeclaredMethods0(Native Method) ~[na:1.7.0_07]
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442) ~[na:1.7.0_07]
    at java.lang.Class.getDeclaredMethods(Class.java:1808) ~[na:1.7.0_07]
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:384) ~[spring-orm-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:322) ~[spring-orm-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:844) ~[spring-beans-3.2.0.RELEASE.jar:3.2.0.RELEASE]
Caused by: java.lang.ClassNotFoundException: org.neo4j.kernel.impl.core.LockReleaser
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366) ~[na:1.7.0_07]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355) ~[na:1.7.0_07]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.7.0_07]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354) ~[na:1.7.0_07]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423) ~[na:1.7.0_07]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356) ~[na:1.7.0_07] 
```

我注意到这个类`org/neo4j/kernel/impl/core/LockReleaser`已经从 Neo4J 1.9M0X 中消失了。

似乎该错误来自`"org.springframework.data" % "spring-data-neo4j-rest" % "2.1.0.RELEASE"`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:39:18.067

看起来 spring-orm 是针对不同版本的 neo4j 构建的，而不是您在运行时尝试使用的版本（它们不兼容）。

可能的解决方案：

*   使用旧版本的 neo4j。
*   根据当前版本的 neo4j 自己构建 spring-orm。您可能必须自己迁移 spring-orm。

# android - 谷歌地图 v2 - 错误

> ID：14568741
> 
> 赞同：0
> 
> 时间：2013-01-28T18:33:08.310
> 
> 标签：android, google-maps-api-2

我刚刚按照本教程（[https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2](https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2)）展示了谷歌地图。但是，当我尝试在我的手机（ZTE V875）中初始化应用程序时，我收到了一个错误，或者最好说一个错误列表。有谁知道为什么？提前致谢。

在我的 MainActivity.class 我有以下代码：

```
package com.example.tutorialgooglemaps;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);  
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.tutorialgooglemaps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

        <permission
          android:name="com.example.tutorialgooglemaps.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>

        <uses-permission android:name="com.example.tutorialgooglemaps.permission.MAPS_RECEIVE"/>
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

        <uses-feature
            android:glEsVersion= "0x00020000"
            android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="MYKEY"/>

        <activity
            android:name="com.example.tutorialgooglemaps.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

错误输出

```
01-28 18:21:59.219: I/Process(22828): Sending signal. PID: 22828 SIG: 9
01-28 18:22:23.499: E/ActivityThread(22977): >>> handling: 110
01-28 18:22:23.509: D/ActivityThread(22977): <<< done: 110
01-28 18:22:23.509: E/ActivityThread(22977): >>> handling: 100
01-28 18:22:23.519: D/AndroidRuntime(22977): Shutting down VM
01-28 18:22:23.519: W/dalvikvm(22977): threadid=1: thread exiting with uncaught exception (group=0x2aac4560)
01-28 18:22:23.529: E/AndroidRuntime(22977): FATAL EXCEPTION: main
01-28 18:22:23.529: E/AndroidRuntime(22977): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tutorialgooglemaps/com.example.tutorialgooglemaps.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1745)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1761)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:947)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.os.Looper.loop(Looper.java:130)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.app.ActivityThread.main(ActivityThread.java:3822)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at java.lang.reflect.Method.invoke(Method.java:507)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at dalvik.system.NativeStart.main(Native Method)
01-28 18:22:23.529: E/AndroidRuntime(22977): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.app.Activity.setContentView(Activity.java:1657)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at com.example.tutorialgooglemaps.MainActivity.onCreate(MainActivity.java:11)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1709)
01-28 18:22:23.529: E/AndroidRuntime(22977):    ... 11 more
01-28 18:22:23.529: E/AndroidRuntime(22977): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.example.tutorialgooglemaps-2.apk]
01-28 18:22:23.529: E/AndroidRuntime(22977):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
01-28 18:22:23.529: E/AndroidRuntime(22977):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
01-28 18:22:23.529: E/AndroidRuntime(22977):    ... 20 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:40:38.280

我评论了一个类似的问题。也许我的回答也能解决你的问题！？

[谷歌地图 - 运行时异常 - 错误膨胀类片段](https://stackoverflow.com/questions/14386631/google-map-runtimeexception-error-inflating-class-fragment/14386980#14386980)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:57:16.340

如果有人遇到同样的问题，问题出在需要 LinearLayout 或 RelativeLayout 的 activity_main.xml。谢谢大家

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" />
</LinearLayout> 
```

# c++ - 调用覆盖函数库

> ID：14568742
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:33:10.120
> 
> 标签：c++, c

我想使用个人的“pthread_self”功能。我想重写“pthread_self()”，最后调用真正的“pthread_self”。在 C/C++ 中可能吗？

例子：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/syscall.h>
#include <sys/types.h>
#include <unistd.h>
#include <pthread.h>

pthread_t pthread_self(void)
{
  // Do something else.....
  // ...
  // And finally call to de real pthread_self():
  return ::pthread_self();  // This doesn't work
}

main()
{
    printf("\nThis is my main thread: %lu\n", pthread_self());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:45:56.557

The following is a bit hacky but should work in C. Put the following in a header which you would have to include *before* or instead of `<pthread.h>` (but never *after* pthread.h):

```
pthread_t _pthread_self(void);

#define pthread_self _pthread_self 
```

And in the corresponding .c file:

```
#include <pthread>
#include "wrapper.h"
#undef pthread_self    // undo the hack locally

pthread_t _pthread_self(void)
{
  // Do something else.....
  // ...
  // And finally call to the real pthread_self():
  return pthread_self();
} 
```

Now, when you write `pthread_self` in some *other* file than that .c file, it expands to your wrapper function. Within the .c file above, since this hack is not done, the call within the wrapper will call the library function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:46:46.850

[This](http://jayconrod.com/posts/23/tutorial-function-interposition-in-linux) should give you some ideas. If you control the linking of your executable, you don't need to use LD_PRELOAD.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:38:57.590

代码似乎是没有返回类型的 C89 `main`。所以我建议你删除函数中前面的`::`运算符并重新编译。`pthread_self()``pthread_self(void)`

也可以用其他名称称呼您`pthread_self()`，例如`pthread_self_2(void)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T18:43:19.617

是否允许`pthread_self()`使用虚拟变量（从未使用过）重载？

```
pthread_t pthread_self( bool )
{
    // Do something else.....
    // ...
    // And finally call to de real pthread_self():
    printf( "%s\n", __PRETTY_FUNCTION__ );
    return ::pthread_self();  // This doesn't work
}

int main()
{
    printf( "%s\n", __PRETTY_FUNCTION__ );
    pthread_self( false );
    printf( "%s\n", __PRETTY_FUNCTION__ );
} 
```

生产

```
$ g++ test.cpp -lpthread

$ ./a.out
int main()
pthread_t pthread_self(bool)
int main()

$ 
```

另外两种方法可能是：

*   编写一个函数`my_pthread_self()`，到处使用它，并让它调用真实的`pthread_self()`

*   有一个宏`PTHREAD_SELF`，它调用你的包装器，它在内部调用 real`pthread_self()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T11:31:08.407

感谢大家。主要基于这两个链接[Intercepting Arbitrary Functions on...](http://www.cs.umd.edu/Library/TRs/CS-TR-4585/CS-TR-4585.pdf)和[Tutorial: Function Interposition in Linux](http://jayconrod.com/posts/23/tutorial-function-interposition-in-linux) show by @Carl Norum 和 @Arkadyi，我向您展示了一个可能的解决方案：

我有两个源文件和一个 Makefile：

**mipthread_self.C**：

```
#include <stdio.h>
#include <pthread.h>

#if defined (__STDC__) || defined (__cplusplus) || defined (c__plusplus)

#if defined (__cplusplus) || defined (c__plusplus)
extern "C" {
#endif

pthread_t __real_pthread_self();

pthread_t __wrap_pthread_self(void)
{
   printf("This is mipthread_self %lu\n", __real_pthread_self());
   return __real_pthread_self();
}

#if defined (__cplusplus) || defined (c__plusplus)
}
#endif

#endif 
```

**测试.C**：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>

void* start_function(void* value)
{
    printf("Thread start function is running for: %u\n", (unsigned int)pthread_self());
    sleep(5);
    pthread_exit(value);
}

int main()
{
    int res;
    pthread_t thread1, thread2;
    void* threadReturnValue;

    res = pthread_create(&thread1, NULL, start_function, (void*)"thread-one");
    if (res != 0) {
        perror("Creation of thread failed");
        exit(EXIT_FAILURE);
    }
    printf("Thread1 created with id: %u\n", (unsigned int)thread1);

    res = pthread_create(&thread2, NULL, start_function, (void*)"thread-two");
    if (res != 0) {
        perror("Creation of thread failed");
        exit(EXIT_FAILURE);
    }
    printf("Thread2 created with id: %u\n", (unsigned int)thread2);

    res = pthread_join(thread1, &threadReturnValue);
    if (res != 0) {
        perror("Joining of thread failed");
        exit(EXIT_FAILURE);
    }
    printf("%s joined.\n", (char*)threadReturnValue);

    res = pthread_join(thread2, &threadReturnValue);
    if (res != 0) {
        perror("Joining of thread failed");
        exit(EXIT_FAILURE);
    }
    printf("%s joined.\n", (char*)threadReturnValue);

    return 0;
} 
```

和**Makefile**：

```
BIN=test

CFLAGS=-g -m32 -fPIC -Wall $(DEFINES)
TIPO=-m32

PWD=`pwd`
DIR_OBJ=$(PWD)
DIR_BIN=$(DIR_OBJ)

INCLUDES=
LD_LIBRARIES=-L$(DIR_OBJ) -lmipthread -Xlinker --wrap -Xlinker pthread_self -lpthread -lstdc++

$(BIN): libmipthread.a
        @echo ""
        @echo "Se va a generar el binario $@"
        @echo ""
        gcc $(CFLAGS) test.C -o $(DIR_BIN)/$@ $(LD_LIBRARIES)

libmipthread.a: mipthread_self.o
        ar crv $(DIR_OBJ)/$@ $(DIR_OBJ)/$<

mipthread_self.o: mipthread_self.C
        gcc $(CFLAGS) -c ${PWD}/$< -o $(DIR_OBJ)/$@ $(INCLUDES)

clean:
        rm $(DIR_OBJ)/*.o
        rm $(DIR_OBJ)/*.a
        rm $(DIR_OBJ)/test 
```

# php - 如果来自 url，则显示警报

> ID：14568745
> 
> 赞同：0
> 
> 时间：2013-01-28T18:33:25.720
> 
> 标签：php, javascript, alert

我有一个联系表格，位于：siteurl.com/help/contact 当他们点击发送按钮时，他们会被发送到一个页面：siteurl.com/ext/contact/contactpost.php - 这会将表格发送到电子邮件。

但是，在 mail() 函数之后，我使用标头直接将它们发送回 siteurl.com/help/contact，如果它们来自 siteurl.com/ext/contact/contactpost.php，我希望它在其中显示警报

我目前有这个（URL 会改变，所以使用 $_SERVER['SERVER_NAME']）：

```
$url = "http://". $_SERVER['SERVER_NAME'] . "/ext/contact/contactpost.php";
if( $_SERVER['HTTP_REFERER'] == $url ){

    // The user was referred by the correct page, so you're good to go
    alert('Thanks, your message was submitted!');

} 
```

回显 $url 给了我正确的 siteurl.com/ext/contact/contactpost.php 但没有警报！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:38:16.717

警报不是 PHP 函数，而是一个 javascript 函数（客户端不是服务器端）！

**修复代码：**

```
$url = "http://". $_SERVER['SERVER_NAME'] . "/ext/contact/contactpost.php";
if( $_SERVER['HTTP_REFERER'] == $url ){

    // The user was referred by the correct page, so you're good to go
    echo "<script language='javascript' type='text/javascript'>";
     echo "alert('Thanks, your message was submitted!');";
    echo "</script>";

} 
```

# java - 为什么框架不显示内容？

> ID：14568746
> 
> 赞同：0
> 
> 时间：2013-01-28T18:33:26.297
> 
> 标签：java, swing, user-interface

我正在用 windowbuilder pro 构建 Gui。测试向我展示了我应该得到的很好的 guil 图像，但是当我运行程序时，只出现了一个小方块。当我放大那个正方形时，它显示空窗口。

![来自测试的img](../Images/53ad7b966915225d0eb58cd31b6a15a9.png)

![运行后的img](../Images/9a5418957e9041130fd14bb8f5441541.png)

主要的

```
Nya gui = new Nya();
gui.Launch();
gui.action(); 
```

尼亚构造函数

```
public Nya() {
    setBounds(new Rectangle(0, 0, 1000, 1000));
    setAlwaysOnTop(true);
    setSize(new Dimension(900, 900));
    setPreferredSize(new Dimension(900, 900));
    setMinimumSize(new Dimension(600, 600));
    setMaximumSize(new Dimension(1000, 1000));
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 831, 631);
    contentPane = new JPanel();
    contentPane.setPreferredSize(new Dimension(1000, 1000));
    setContentPane(contentPane);
    contentPane.setLayout(new MigLayout("", "[222px][17px][110px][15px][25px][26px][116px][23px][215px]", "[373px][26px][25px][25px][20px][25px][15px][25px]"));

    JPanel panel_main = new JPanel();
    panel_main.setSize(new Dimension(350, 350));
    panel_main.setPreferredSize(new Dimension(350, 350));
    panel_main.setMinimumSize(new Dimension(350, 350));
    panel_main.setMaximumSize(new Dimension(350, 350));
    contentPane.add(panel_main, "cell 0 0 3 1,grow");
    panel_main.setLayout(new MigLayout("", "[349px]", "[50px][50px][242px]"));

    JPanel panel_2 = new JPanel();
    panel_main.add(panel_2, "cell 0 0,grow");
    panel_2.setLayout(null);

    Box horizontalBox_1 = Box.createHorizontalBox();
    horizontalBox_1.setBounds(0, 0, 349, 50);
    panel_2.add(horizontalBox_1);

    Box verticalBox_3 = Box.createVerticalBox();
    horizontalBox_1.add(verticalBox_3);

    btnMoveForward = new JButton("move forward");
    btnMoveForward.setPreferredSize(new Dimension(125, 25));
    verticalBox_3.add(btnMoveForward);
    btnMoveForward.setMinimumSize(new Dimension(125, 25));
    btnMoveForward.setMaximumSize(new Dimension(125, 25));

    btnMoveBackward = new JButton("move backward");
    btnMoveBackward.setPreferredSize(new Dimension(125, 25));
    verticalBox_3.add(btnMoveBackward);
    btnMoveBackward.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
        }
    });
    btnMoveBackward.setMinimumSize(new Dimension(125, 25));
    btnMoveBackward.setMaximumSize(new Dimension(125, 25));

    Component horizontalGlue_2 = Box.createHorizontalGlue();
    horizontalGlue_2.setPreferredSize(new Dimension(5, 0));
    horizontalGlue_2.setSize(new Dimension(5, 0));
    horizontalBox_1.add(horizontalGlue_2);

    mainMoption1 = new JTextField();
    mainMoption1.setMinimumSize(new Dimension(15, 22));
    mainMoption1.setMaximumSize(new Dimension(15, 22));
    mainMoption1.setPreferredSize(new Dimension(15, 22));
    horizontalBox_1.add(mainMoption1);
    mainMoption1.setColumns(10);

    Component horizontalGlue_3 = Box.createHorizontalGlue();
    horizontalGlue_3.setSize(new Dimension(5, 0));
    horizontalGlue_3.setPreferredSize(new Dimension(5, 0));
    horizontalBox_1.add(horizontalGlue_3);

    mainMoption2 = new JTextField();
    mainMoption2.setMaximumSize(new Dimension(15, 22));
    horizontalBox_1.add(mainMoption2);
    mainMoption2.setColumns(10);

    JPanel panel_1 = new JPanel();
    panel_main.add(panel_1, "cell 0 1,grow");
    panel_1.setLayout(null);

    Box horizontalBox_2 = Box.createHorizontalBox();
    horizontalBox_2.setBounds(0, 0, 349, 50);
    panel_1.add(horizontalBox_2);

    Box verticalBox_2 = Box.createVerticalBox();
    horizontalBox_2.add(verticalBox_2);

    btnMoveLeftside = new JButton("move leftside");
    btnMoveLeftside.setPreferredSize(new Dimension(125, 25));
    verticalBox_2.add(btnMoveLeftside);
    btnMoveLeftside.setMinimumSize(new Dimension(125, 25));
    btnMoveLeftside.setMaximumSize(new Dimension(125, 25));

    btnMoveRightside = new JButton("move rightside");
    btnMoveRightside.setPreferredSize(new Dimension(125, 25));
    verticalBox_2.add(btnMoveRightside);
    btnMoveRightside.setMinimumSize(new Dimension(125, 25));
    btnMoveRightside.setMaximumSize(new Dimension(125, 25));

    Component horizontalGlue = Box.createHorizontalGlue();
    horizontalGlue.setSize(new Dimension(5, 0));
    horizontalGlue.setPreferredSize(new Dimension(5, 5));
    horizontalGlue.setMinimumSize(new Dimension(5, 0));
    horizontalGlue.setMaximumSize(new Dimension(5, 0));
    horizontalBox_2.add(horizontalGlue);

    sidemotoroption1 = new JTextField();
    sidemotoroption1.setPreferredSize(new Dimension(15, 22));
    sidemotoroption1.setMinimumSize(new Dimension(15, 22));
    sidemotoroption1.setMaximumSize(new Dimension(15, 22));
    horizontalBox_2.add(sidemotoroption1);
    sidemotoroption1.setColumns(10);

    Component horizontalGlue_1 = Box.createHorizontalGlue();
    horizontalGlue_1.setSize(new Dimension(5, 0));
    horizontalGlue_1.setPreferredSize(new Dimension(5, 0));
    horizontalBox_2.add(horizontalGlue_1);

    sidemotoroption2 = new JTextField();
    sidemotoroption2.setMinimumSize(new Dimension(15, 22));
    sidemotoroption2.setMaximumSize(new Dimension(15, 22));
    horizontalBox_2.add(sidemotoroption2);
    sidemotoroption2.setColumns(10);

    JPanel panel = new JPanel();
    panel_main.add(panel, "cell 0 2,grow");
    panel.setLayout(null);

    btnTurnLeft = new JButton("turn left");
    btnTurnLeft.setBounds(0, 0, 125, 25);
    panel.add(btnTurnLeft);
    btnTurnLeft.setPreferredSize(new Dimension(125, 25));
    btnTurnLeft.setMinimumSize(new Dimension(125, 25));
    btnTurnLeft.setMaximumSize(new Dimension(125, 25));

    turnLangle = new JTextField();
    turnLangle.setBounds(170, 0, 106, 25);
    panel.add(turnLangle);
    turnLangle.setColumns(10);

    btnTurnRight = new JButton("turn right");
    btnTurnRight.setBounds(0, 38, 125, 25);
    panel.add(btnTurnRight);
    btnTurnRight.setPreferredSize(new Dimension(125, 25));
    btnTurnRight.setMinimumSize(new Dimension(125, 25));
    btnTurnRight.setMaximumSize(new Dimension(125, 25));

    btnExtraTurn = new JButton("extra turn");
    btnExtraTurn.setBounds(0, 76, 125, 25);
    panel.add(btnExtraTurn);
    btnExtraTurn.setPreferredSize(new Dimension(125, 25));
    btnExtraTurn.setMinimumSize(new Dimension(125, 25));
    btnExtraTurn.setMaximumSize(new Dimension(125, 25));

    turnRangle = new JTextField();
    turnRangle.setBounds(170, 39, 106, 25);
    panel.add(turnRangle);
    turnRangle.setColumns(10);

    turnEangle = new JTextField();
    turnEangle.setBounds(170, 77, 106, 25);
    panel.add(turnEangle);
    turnEangle.setColumns(10);

    btnMoveAngle1 = new JButton("move sideway1");
    btnMoveAngle1.setBounds(0, 114, 125, 25);
    panel.add(btnMoveAngle1);
    btnMoveAngle1.setPreferredSize(new Dimension(125, 25));
    btnMoveAngle1.setMinimumSize(new Dimension(125, 25));
    btnMoveAngle1.setMaximumSize(new Dimension(125, 25));

    btnMoveAngle2 = new JButton("move sideway2");
    btnMoveAngle2.setBounds(0, 152, 125, 25);
    panel.add(btnMoveAngle2);
    btnMoveAngle2.setPreferredSize(new Dimension(125, 25));
    btnMoveAngle2.setMinimumSize(new Dimension(125, 25));
    btnMoveAngle2.setMaximumSize(new Dimension(125, 25));

    movesideA1 = new JTextField();
    movesideA1.setBounds(170, 115, 106, 25);
    panel.add(movesideA1);
    movesideA1.setColumns(10);

    movesideA2 = new JTextField();
    movesideA2.setBounds(170, 153, 106, 25);
    panel.add(movesideA2);
    movesideA2.setColumns(10);

    btnKick = new JButton("kick");
    btnKick.setBounds(0, 198, 230, 44);
    panel.add(btnKick);
    btnKick.setMinimumSize(new Dimension(125, 25));
    btnKick.setMaximumSize(new Dimension(125, 25));
    btnKick.setPreferredSize(new Dimension(125, 25));

    btnStop = new JButton("Stop");
    btnStop.setBounds(242, 201, 95, 38);
    panel.add(btnStop);

    JLabel lblPlaceForVideo = new JLabel("Place for video");
    lblPlaceForVideo.setHorizontalTextPosition(SwingConstants.CENTER);
    lblPlaceForVideo.setHorizontalAlignment(SwingConstants.CENTER);
    contentPane.add(lblPlaceForVideo, "cell 4 0 5 1,grow");

    JPanel panel_wasd = new JPanel();
    contentPane.add(panel_wasd, "cell 0 1 1 7,grow");
    panel_wasd.setLayout(null);

    JButton btnF = new JButton("F");
    btnF.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
        }
        @Override
        public void keyReleased(KeyEvent e) {
        }
    });
    btnF.setBounds(61, 0, 45, 33);
    panel_wasd.add(btnF);
    btnF.setHorizontalTextPosition(SwingConstants.CENTER);

    JButton btnL = new JButton("L");
    btnL.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
        }
        @Override
        public void keyReleased(KeyEvent e) {
        }
    });
    btnL.setBounds(4, 50, 45, 33);
    panel_wasd.add(btnL);
    btnL.setHorizontalTextPosition(SwingConstants.CENTER);

    JButton btnB = new JButton("B");
    btnB.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
        }
        @Override
        public void keyReleased(KeyEvent e) {
        }
    });
    btnB.setBounds(61, 50, 45, 33);
    panel_wasd.add(btnB);
    btnB.setHorizontalTextPosition(SwingConstants.CENTER);

    JButton btnR = new JButton("R");
    btnR.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
        }
        @Override
        public void keyReleased(KeyEvent e) {
        }
    });
    btnR.setBounds(118, 50, 45, 33);
    panel_wasd.add(btnR);
    btnR.setHorizontalTextPosition(SwingConstants.CENTER);

    JButton btnTL = new JButton("<");
    btnTL.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent arg0) {
        }
        @Override
        public void keyReleased(KeyEvent e) {
        }
    });
    btnTL.setBounds(4, 0, 45, 33);
    panel_wasd.add(btnTL);
    btnTL.setHorizontalTextPosition(SwingConstants.CENTER);

    JButton btnTR = new JButton(">");
    btnTR.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
        }
        @Override
        public void keyReleased(KeyEvent e) {
        }
    });
    btnTR.setBounds(118, 0, 45, 33);
    panel_wasd.add(btnTR);
    btnTR.setHorizontalTextPosition(SwingConstants.CENTER);

    JButton btnNewButton = new JButton("KKKick!");
    btnNewButton.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
        }
    });
    btnNewButton.setBounds(4, 96, 159, 44);
    panel_wasd.add(btnNewButton);

    JButton btnU = new JButton("U");
    btnU.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
        }
        @Override
        public void keyReleased(KeyEvent e) {
        }
    });
    btnU.setBounds(175, 50, 45, 33);
    panel_wasd.add(btnU);
    btnU.setHorizontalTextPosition(SwingConstants.CENTER);

    JButton btnD = new JButton("D");
    btnD.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
        }
        @Override
        public void keyReleased(KeyEvent e) {
        }
    });
    btnD.setBounds(175, 96, 45, 33);
    panel_wasd.add(btnD);
    btnD.setHorizontalTextPosition(SwingConstants.CENTER);

    extratextField = new JTextField();
    contentPane.add(extratextField, "cell 6 1,growx,aligny center");
    extratextField.setColumns(10);

    extratextField_1 = new JTextField();
    contentPane.add(extratextField_1, "cell 6 3,grow");
    extratextField_1.setColumns(10);

    extratextField_2 = new JTextField();
    contentPane.add(extratextField_2, "cell 6 5,grow");
    extratextField_2.setColumns(10);

    extratextField_3 = new JTextField();
    contentPane.add(extratextField_3, "cell 6 7,grow");
    extratextField_3.setColumns(10);

    btnNewButton_1extra = new JButton("New button");
    contentPane.add(btnNewButton_1extra, "cell 8 1,alignx left,aligny bottom");

    btnNewButton_2extra = new JButton("New button");
    contentPane.add(btnNewButton_2extra, "cell 8 3,alignx left,aligny top");

    btnNewButton_3extra = new JButton("New button");
    contentPane.add(btnNewButton_3extra, "cell 8 5,alignx left,aligny top");

    btnNewButton_4extra = new JButton("New button");
    contentPane.add(btnNewButton_4extra, "cell 8 7,alignx left,aligny top");

    JButton btnQuit = new JButton("Quit!");
    contentPane.add(btnQuit, "cell 2 1 3 7,grow");
} 
```

发射

```
public void Launch() {
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public class ListenCloseWdw extends WindowAdapter {
        public void windowClosing(WindowEvent e) {
            int[] command = {5,0,0,0};
            try {
                comms.sendToRobot(command);
            } catch (IOException e1) {
                System.out.println("Could not send command");
                e1.printStackTrace();
            }
            System.out.println("Quit...");
            System.exit(0);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:25:23.807

如您的评论所述。看起来您缺少将主 Jpanel 添加到 JFrame。它应该像下面这样。我还建议考虑在对您的问题的评论中提到的建议，例如选择合适的布局管理器。

```
JPanel panel = new JPanel();
JFrame frame = new JFrame("Test");
frame.add(panel) 
```

# jquery - 根据 id 过滤 div

> ID：14568750
> 
> 赞同：3
> 
> 时间：2013-01-28T18:33:36.023
> 
> 标签：jquery, filter

我可以使用以下代码成功隐藏 id 中包含字符串的 div：

按钮：

```
<input type="button" id="mytest" value="filter"></input> 
```

js代码：

```
//hides divs with class=screen3 and with 99 in its id
$('#myteste').click (function () {
    $('div.screen3[id*="99"]').hide();
}); 
```

现在我需要做相反的事情，隐藏不包含其 id 但我不知道如何的字符串的 div。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:35:29.807

你可以这样做：

```
$('div.screen3').not('[id~="99"]').hide(); // tests the word (delimited by spaces) 
```

或者

```
$('div.screen3').not('[id*="99"]').hide(); // tests the string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:36:10.170

尝试使用 :not

```
$('#myteste').click (function () {
    $('div.screen3:not([id*="99"])').hide();
}); 
```

# ios - 创建新的 UIWindows，接管关键窗口——不好的做法？

> ID：14568753
> 
> 赞同：5
> 
> 时间：2013-01-28T18:33:45.003
> 
> 标签：ios, overlay, uiwindow, keywindow

我正在开发一个需要在其他所有内容之上显示叠加层的应用程序。它通过创建一个新的 UIWindow 并使用 makeKeyAndVisble 来“接管”屏幕来做到这一点。完成后，它会将控制权交还给原始 UIWindow。

这是一件坏事吗？感觉就像是在低级别控制应用程序，这通常很糟糕；另一方面，这样做非常简单，所以也许完全可以接受。

意见/经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:36:49.803

`UIWindow`以我的经验，在默认的基础上添加另一个是完全可以的。

我也不认为这就像在低级别控制应用程序一样。如果我认为 iOS SDK 与 MacOS SDK 密切相关，我倾向于认为在更高的抽象层次上完全支持多窗口：只是在 iOS 上它们不是那么必要或有用（一般来说，除了具体案例）。

在网上挖掘了一下，我发现了这个[关于 SO 的有趣讨论](https://stackoverflow.com/questions/8232398/advantages-problems-examples-of-adding-another-uiwindow-to-an-ios-app)。

希望能帮助到你。

# ios - 如何使用 MPMediaQuery 检索艺术家列表？

> ID：14568754
> 
> 赞同：5
> 
> 时间：2013-01-28T18:33:48.753
> 
> 标签：ios, cocoa-touch, mpmediaquery

您好，我正在尝试使用以下代码在 iOS 中使用 MPMediaQuery 检索艺术家。

In My ViewDidL`enter code here`负载

```
MPMediaQuery *query = [MPMediaQuery artistsQuery];
self.arrayOfArtist = [query collections]; 
```

在我的`cellForRowAtIndexPath`

```
 cell.textLabel.text = [NSString stringWithFormat:@"%@",[[self.arrayOfArtist objectAtIndex:indexPath.row] valueForProperty:MPMediaItemPropertyArtist]]; 
```

当我检查时`NSLog`，我的`arrayOfArtist`计数约为 330。

然而在我`UITableView`的，它只是 show `NULL`。

有什么我错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T19:04:21.540

你应该写：

```
cell.textLabel.text = [NSString stringWithFormat:@"%@",[[[self.arrayOfArtist objectAtIndex:indexPath.row] representativeItem] valueForProperty:MPMediaItemPropertyArtist]]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-03T05:26:34.880

您可以使用代码检索艺术家及其歌曲。

```
 /// Get all artists and their songs
///
func getAllArtists() {
    let query: MPMediaQuery = MPMediaQuery.artists()
    let allArtists = query.collections

    allArtistItems?.removeAll()

    guard allArtists != nil else {
        return
    }

    for collection in allArtists! {
        let item: MPMediaItem? = collection.representativeItem

        let artistName = item?.value(forKey: MPMediaItemPropertyArtist) as? String ?? "<Unknown>"
        let artistId = item!.value(forProperty: MPMediaItemPropertyArtistPersistentID) as! NSNumber

        let artist = Artist()
        artist.name = artistName
        artist.artistId = String(describing: artistId)
        print("Artist name: \(artistName)")

        // Get all songs of this Artist
        let mediaQuery = MPMediaQuery.songs()
        let predicate = MPMediaPropertyPredicate.init(value: artistId, forProperty: MPMediaItemPropertyArtistPersistentID)
        mediaQuery.addFilterPredicate(predicate)
        let song = mediaQuery.items

        if let allSongs = song {
            var index = 0

            for item in allSongs {
                let pathURL: URL? = item.value(forProperty: MPMediaItemPropertyAssetURL) as? URL
                if pathURL == nil {
                    print("@Warning!!! Track : \(item) is not playable.")
                } else {
                    let trackInfo = SongItem()
                    trackInfo.index = index
                    trackInfo.mediaItem = item

                    let title = item.value(forProperty: MPMediaItemPropertyTitle) as? String ?? "<Unknown>"
                    let artistName = item.value(forProperty: MPMediaItemPropertyArtist) as? String ?? "<Unknown>"
                    trackInfo.songName = title
                    trackInfo.artistName = artistName

                    trackInfo.isSelected = false
                    trackInfo.songURL = item.value(forProperty: MPMediaItemPropertyAssetURL) as? URL
                    artist.songs?.append(trackInfo)
                    index += 1
                }
            }

        }

        // Finally add the album object to albums array
        allArtistItems?.append(artist)

    }

    print("Total Artist count: \(allArtistItems?.count)")

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T19:04:17.210

您需要获取艺术家属性，然后将其保存在数组中。如果您尝试在标准数组上使用 valueForProperty 方法，则它无法正常工作。

# c# - 为 Tombstoning 保存字符串值

> ID：14568755
> 
> 赞同：0
> 
> 时间：2013-01-28T18:33:51.580
> 
> 标签：c#, windows-phone-7.1, tombstoning

我目前正在为 Windows Phone 7.1 开发应用程序，并且需要在用户退出应用程序时保存一些数据。

该应用程序非常简单：MainPage 是用户看到的第一件事，他们在其中选择了四个购物中心之一。下一页询问他们将车停在哪里并将其存储为字符串变量。最后一页加载该字符串变量并向用户显示相关信息，以及自启动应用程序以来一直在运行的计时器。

我要保存的是用户离开应用程序时的用户输入数据和计时器值，以便再次启动它时，它会自动显示包含用户信息的最后一页。

我一直在玩生成的 Application_Launching、Activated 等事件，但到目前为止还没有工作。任何帮助将不胜感激。

编辑：这是我到目前为止的一些代码（没有带我去任何地方）

```
 void LoadSettings()
    {
        IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;
        String mall;
        String level;
        String letter;
        String number;
        if (settings.TryGetValue<String>("mall", out mall))
        {
            _mall = mall;
        }
        if (settings.TryGetValue<String>("level", out level))
        {
            _level = level;
        }
        if (settings.TryGetValue<String>("mall", out letter))
        {
            _letter = letter;
        }
        if (settings.TryGetValue<String>("mall", out number))
        {
            _number = number;
        }
    }

    void SaveSettings()
    {
        IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;
        if (_mall != null)
        {
            settings["mall"] = (_mall as String);
            settings["level"] = (_level as String);
            settings["letter"] = (_letter as String);
            settings["number"] = (_number as String);
        }
    } 
```

那在我的 App.xaml.cs 类中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:05:59.503

您必须查看 app.cs 文件中的事件，但这也取决于您在应用程序被激活、停用、关闭和启动时想要什么。

```
 // Code to execute when the application is launching (eg, from Start)
    // This code will not execute when the application is reactivated
    private void Application_Launching(object sender, LaunchingEventArgs e)
    {
         LoadSettings();
    }

    // Code to execute when the application is activated (brought to foreground)
    // This code will not execute when the application is first launched
    private void Application_Activated(object sender, ActivatedEventArgs e)
    {
        if (e.IsApplicationInstancePreserved)
        {
            //The application was dormant and state was automatically preserved
        }
        else
        {
            LoadSettings();
        }
    }

    // Code to execute when the application is deactivated (sent to background)
    // This code will not execute when the application is closing
    private void Application_Deactivated(object sender, DeactivatedEventArgs e)
    {
         SaveSettings();
    }

    // Code to execute when the application is closing (eg, user hit Back)
    // This code will not execute when the application is deactivated
    private void Application_Closing(object sender, ClosingEventArgs e)
    {
        SaveSettings();
    } 
```

# javascript - 在斜杠之间使用 querySelector

> ID：14568759
> 
> 赞同：0
> 
> 时间：2013-01-28T18:34:00.973
> 
> 标签：javascript, css-selectors, selectors-api

这里有一个例子：

```
<h2>        
  <a href="/car/bmw/?load=0&value=5fs4dfsdf45"> </a>
</h2> 
```

我希望我`querySelector`只选择“宝马”。

我使用它（如下），但它只选择句子的结尾，而不是“/car/”和“?load”之间的值

```
document.querySelector('h2 > a[href$=]'); 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:37:31.150

尝试***=**代替：

```
document.querySelector('h2>a[href*=bmw]') 
```

# html - 最后一个跨度中的换行符但无法更改 HTML

> ID：14568762
> 
> 赞同：2
> 
> 时间：2013-01-28T18:34:20.157
> 
> 标签：html, css

想象一下下面的说明性 HTML：

```
<form>
<div class="line">
    <label class="lbt" for="name">Name:</label>
    <span class="obr">*</span>
    <input id="name" class="inp" type="text" />
    <span class="err">Missing!</span>
</div>
<div class="line">
    <label class="lbt" for="area">Area:</label>
    <input name="area" class="inp" type="text" />
    <span class="suf">m<span style="vertical-align: super;">2</span></span>
    <span class="err">Missing!</span>
</div>
</form> 
```

根据客户要求，带有强制指示符的标签和跨度必须在同一行，作为输入，其余跨度在下一行。强制指示符必须紧跟在标签文本之后，而另一个跨度则紧接在输入元素之后。

可悲的是，我无法更改 HTML 代码，否则我会将强制元素放在标签内并使用`display: block`样式（或将两者都包装在一个跨度中并执行相同操作）。

我尝试使用`.obr::after`创建换行符，但由于该元素并不总是存在并且我不能`::before`在输入元素中使用，所以我倾向于认为使用内容是不可行的，除非有一种方法可以有条件地放置它（`.lbt::after`或`.obr::after`如果存在）。这是一个解决这个问题的[jsfiddle](http://jsfiddle.net/JHDeC/)。

我也尝试了浮动和位置方法，但没有找到适合任何标签或输入大小的通用解决方案。我可能会考虑为此使用 jQuery，但我更喜欢仅使用 CSS 的更简单的方法。

已经快两天试图找到一个好的解决方案......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T18:42:37.170

`label`和`*` `<span>`右边并排。

`<input />`和另一个`<span>`并排在另一条线上。

```
 .line
    {
        border: 2px solid black;
        padding: 5px;
        overflow:hidden;
    }

    .line .obr
    {
        color: Red;
        font-weight: bold;
        float:left;
    }

    .lbt
    {
        float:left; 
     }
    .line .obr::after
    {
        content: '\A';
        white-space: pre;
    }
    .inp
    {
        float:left; clear:both;
        margin-top:5px;

    }
    .line span
    {
        float:left;
    } 
```

看看这个：http: [//jsfiddle.net/AliBassam/2LqCc/](http://jsfiddle.net/AliBassam/2LqCc/)

如果您希望`<span>`旁边的`<input />`值更低，请添加`margin-top:5px;`

# xamarin.ios - MonoTouch.Dialog 和限制行数

> ID：14568770
> 
> 赞同：1
> 
> 时间：2013-01-28T18:34:55.547
> 
> 标签：xamarin.ios, monotouch.dialog, xamarin

我有一个`MonoTouch.Dialog`包含`UIViewElements`一个`UIWebView`. 这是一个消息类型的应用程序，并且不断添加消息。我可以ealisy得到**超过1000`UIViewElements`**并且没有限制。显然内存将是一个问题。

**只保留最后 100 行的最佳方法是什么？**

我需要**先进先出**类型的设置。我可以手动删除`Elements`但不知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:53:30.167

据我所知，您必须手动执行此操作。我以[TweetStation](http://tirania.org/blog/archive/2010/Jul-10.html)为例。

虽然这不是您可以获得的最新应用程序（2010 年），但它确实涵盖了您需要了解的许多基础知识。

[如果您还不知道，这里](http://tirania.org/monomac/archive/2011/Jan-18.html)有更多关于构建自定义单元的信息。

管理元素列表的核心部分是覆盖继承类的`CreateSizingSource`- 方法`DialogViewController`并创建自己的`SizingSource`方法，如[TweetStation 的这一部分](https://github.com/migueldeicaza/TweetStation/blob/master/TweetStation/UI/Timeline.cs)所示。

我希望这会让你开始。

# google-maps - 移动应用程序中的默认谷歌地图大小百分比？

> ID：14568777
> 
> 赞同：0
> 
> 时间：2013-01-28T18:35:26.420
> 
> 标签：google-maps, cordova, mobile-application

我试图在 phonegap 移动应用程序的页面上放置地图。我希望 #content div 的默认大小为 height:45% 和 width:100%（HTML 片段如下所示）。有些人告诉我将 and 的高度设置为 100%。但是，地图仍然以零宽度和高度的大小加载（因此不可见）。使用像素似乎不是一个好主意，因为该应用程序针对不同尺寸的不同设备。我该如何解决这个问题？谢谢

```
 <div data-role="content" style="height:100%;">

    <div id="introvid" style="width:100%; height: 45%; ">
        ...
    </div>

    <div id="map_canvas"  style="width:100%; height:45%; min-height:45%;"> 
    </div>

</div> 
```

# jms - 客户端可以在确认之前接收队列的多条消息吗？

> ID：14568779
> 
> 赞同：2
> 
> 时间：2013-01-28T18:35:31.653
> 
> 标签：jms, activemq

我的程序接收消息的速度会很慢；我希望他们坚持排队，直到我收到所有这些并确认所有这些。在收到一堆消息之前，我不知道我是否有足够的消息。

我的问题：队列会阻塞，等待第一条消息的确认，然后再传递第二条消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:09:15.353

将确认模式设置为时，`Session.CLIENT_ACKNOWLEDGE`您可以获得所需的尽可能多的消息。消息将被锁定在服务器上，因此其他消费者无法同时检索它们。所以答案是否定的，队列不会阻塞（即使可能有特定于提供商的设置可以做到这一点，我不知道）。

但是，您只能一次全部确认。因此，当您收到 10 条消息并确认其中一条（不管是哪条）时，所有消息都将被确认。

检查您的参考[控制消息确认](http://docs.oracle.com/javaee/1.4/tutorial/doc/JMS6.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:06:44.900

好吧，我使用示例生产者/消费者代码对此进行了测试。消费者实际上有一些代码（如果您切换到 ClientAcknowledge）。它收到一堆消息（其中 10 条）并且只确认最后一条。

# java - GSON 反序列化泛型类型

> ID：14568781
> 
> 赞同：1
> 
> 时间：2013-01-28T18:35:37.357
> 
> 标签：java, generics, deserialization, gson

我有以下课程，基本上是来自网络服务的响应。

```
public class WSGenericMessage<T> implements Serializable {

private static final long serialVersionUID = 1L;
private Boolean ResponseCode;
private String ResponseMessage;
private Class<T> ResponseData;

public Boolean getResponseCode() {
    return ResponseCode;
}

public void setResponseCode(Boolean responseCode) {
    ResponseCode = responseCode;
}

public String getResponseMessage() {
    return ResponseMessage;
}

public void setResponseMessage(String responseMessage) {
    ResponseMessage = responseMessage;
}

public Class<T> getResponseData() {
    return ResponseData;
}

public void setResponseData(Class<T> responseData) {
    ResponseData = responseData;
}

} 
```

是否可以通过以下方式反序列化 json 字符串：

```
 Gson gson = new Gson();
  Type type = new TypeToken<WSGenericMessage<String>>(){}.getType();
  gson.fromJson(result, type); 
```

我正进入（状态：

```
 java.lang.UnsupportedOperationException: Attempted to deserialize a java.lang.Class. Forgot to register a type adapter? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:35:00.840

有类似**类型擦除**的东西，所以泛型类型被擦除并且在运行时不可用。

因此，您可以在没有通用分类器的情况下反序列化对象给定类，而不是“强制转换”为正确的类型。

但是您的问题不是泛型类型反序列化，而是包含`java.lang.Class`对象的类型。这不能被序列化和反序列化。

对于序列化和反序列化，您应该使用没有 Class 字段的对象，使用带有类名的 String 字段，或者将此字段标记为`transient`并在之后恢复它。

# php - 如何在 PHP pure 中的一个字段上使用两个过滤器

> ID：14568784
> 
> 赞同：1
> 
> 时间：2013-01-28T18:35:54.627
> 
> 标签：php

我想使用两个过滤器将它们应用到一个字段中，如下所示：

```
<?php

$var = "hi12"; 
function addFunction($int){
    return $int + 2;
}
$myOption = array(
    "options" => "addFunction"
);
echo filter_var($var, FILTER_SANITIZE_NUMBER_INT | FILTER_CALLBACK,$myOption);

?> 
```

我知道这`FILTER_SANITIZE_NUMBER_INT | FILTER_CALLBACK`是不允许的，但是有没有一些等效的方法可以做到这一点？

# c# - 在 ASP.NET MVC 中显示带有模板的项目列表

> ID：14568788
> 
> 赞同：1
> 
> 时间：2013-01-28T18:36:07.700
> 
> 标签：c#, razor, asp.net-mvc-4

我的控制器正在查询数据库。结果以`DataTable`. 我想`DataRow`在`DataTable`我的`view`. 在我的`controller`中，我有以下内容：

```
DataTable results = QueryDatabase();
ViewBag.Results = results; 
```

我`RAZOR`在我的`ASP.NET` `MVC` `view`. 但是，我不确定如何遍历行并呈现每条记录。执行此类任务的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:43:32.213

首先将viewbag设置为rows而不是table，所以`ViewBag.Results = results.Rows;`

然后遍历行使用：

```
@foreach(DataRow row in ViewBag.Results)
{
    <div>@row["column_name"].ToString()</div>    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:53:13.503

您可以使用[MvcContrib](http://mvccontrib.codeplex.com/)包中的 Grid 助手。然后你可以做类似的事情

```
@Html.Grid(ViewBag.Results.Rows).Columns(column => 
{
    column.For(r => r["column1"]);
    column.For(r => r["column2"]);
    ...
}) 
```

这将为您生成所有表格内容，您不想手动编码 HTML。

# javascript - 单击图像时使文本出现（向上滑动）在图像下方

> ID：14568799
> 
> 赞同：0
> 
> 时间：2013-01-28T18:36:54.583
> 
> 标签：javascript, jquery, accordion, jcarousel

当您单击图像时，我希望文本描述出现（向上滑动），并且当您在已经显示时单击它时再次隐藏（向下滑动）。

JAVASCRIPT

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script type="text/javascript">
      $(document).ready(function () {
        $("#image img").click(function () {
            $("#image span").slideToggle();
        });
    });
</script> 
```

CSS

```
#images {
    width: 275px;
    height: 200px;
}

#image div {
    display: block;
    width: 275px;
    height: 200px;
}

 #image img {
    display: block;
    width: 275px;
    height: 200px;
}

#image span {
    background: #000;
    color: #ccc;
    display: block;
    width: 265px;
    height: 40px;
    padding: 5px;
    display: none;
} 
```

HTML

```
<div id="images">
    <div id="image">
        <div>                
            <img src="images/test-image.png" width="224px" height="224px" />
            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>

        </div>
    </div>
</div> 
```

这些是我尝试创建的代码的上面的 HTML，当您单击站点 etchapps.com 上的任何图像时，可以演示此效果的示例，以及我们如何使用 JavaScript 或 jQuery 做到这一点的任何想法。或者我们可以使用任何其他插件来完成此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:03:59.340

这种效果的真正诀窍是使包含包装器位置：相对，然后在该位置内的包装器：绝对顶部/右侧/底部设置为 0。无论高度如何，这都会将其锚定到容器的底部可见时的标题。

然后你需要做的就是slideToggle 显示标题元素。在我的工作中，我们只是切换了一个类并使用 CSS 过渡来覆盖显示，但我已经调整了我们的方法以符合您的代码。

这是一个[代码笔示例](http://codepen.io/gavmck/pen/HkvLd)

HTML

```
<div id="images">
    <div id="image">
        <div>                
            <img src="http://placekitten.com/275/200" />
            <div id="caption">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            </div>
        </div>
    </div>
</div> 
```

CSS

```
#images {
    width: 275px;
    height: 200px;
}

#image {
  position: relative;
  width: 275px;
  height: 200px;
  overflow: hidden;
}

#image > div {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;

}

 #image img {
    display: block;
    width: 275px;
    height: 200px;
}

#caption {
    background: #000;
    color: #ccc;
    display: none;
    overflow: hidden;
}

#caption p {
  padding: 5px;
  margin: 0;
} 
```

JS

```
$(document).ready(function () {
    $("#image img").click(function () {
        $("#caption").slideToggle();
    });
}); 
```

我还建议从 div 切换到 figcaption 和 caption 元素以获得更多语义标记，并可能切换出类的 id。您可能需要更新 JS 以定位最近的标题，而不仅仅是任何标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:47:09.020

```
<div id="images">
        <div>
            <div id="thetext" style="display:none">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
            <img id="theimage" src="images/test-image.png" width="224px" height="224px" />

        </div>
</div>
</body>
    <script>

        $(document).ready(function () {
            $("#theimage").click(function () {
                $("#thetext").slideToggle();
            });
        });

    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:05:11.877

它解决了：

看看这个小提琴：http: [//jsfiddle.net/promatik/SFU4E/](http://jsfiddle.net/promatik/SFU4E/)

我改变了一点HTML：

```
<div id="images">
    <div id="image">
        <div class="image">         
            <img src="images/test-image.png" width="275px" height="200px" />
        </div>
        <div class="text">
            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
        </div>
    </div>
</div> 
```

还有 CSS：

```
#images, #image .image {
    width: 275px;
    height: 200px;
}
#image .text {
    display: none;
    background: #000;
}
#image span {
    color: #ccc;
    padding: 2px;
} 
```

# image - Magento - 在 phtml 文件中列出类别、子类别和图像

> ID：14568802
> 
> 赞同：0
> 
> 时间：2013-01-28T18:36:58.687
> 
> 标签：image, list, magento, url, categories

我正在尝试在我的每个 Magento 页面的标题中创建一个下拉菜单。我想列出所有类别、子类别以及每个类别的关联图像。通过从 Internet 上抓取和组合代码，我想出了一个几乎可行的解决方案，只有子类别的 URL 以未定义的形式返回，我不知道为什么。有任何想法吗？这是我的代码：

```
<?php
    $cats = Mage::getModel('catalog/category') -> load(2) -> getChildren();
    $catIds = explode(',', $cats);
    $categories = array();
    foreach ($catIds as $catId) {
        $category = Mage::getModel('catalog/category') -> load($catId);
        $categories[$category -> getName()] = array('name' => $category -> getName(), 'url' => $category -> getUrl(), 'img' => $category -> getImageUrl(), 'subcategories' => Mage::getModel('catalog/category') -> getCategories($catId));
    }
    ksort($categories, SORT_STRING);
?>
<ul>
    <?php foreach($categories as $name => $data): ?>
        <li><?php echo $data['name']; ?>
            <a href="<?php echo $data['url']; ?>" title="<?php echo $name; ?>">
                <img class="cat-image" src="<?php echo $data['img']; ?>" />
            </a>
            <ul>
            <?php
                foreach ($data['subcategories'] as $subcategory) {
                    echo "<a href='" . $subcategory -> getUrl() . "'><li>" . $subcategory -> getName() . "</li></a>";
                }
            ?>
            </ul>
        </li>
    <?php endforeach; ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:34:26.173

尝试改变

```
 'subcategories' => Mage::getModel('catalog/category') -> getCategories($catId) 
```

到

```
 'subcategories' => $category->getChildrenCategories() 
```

查看[如何在 Magento 中获取子类别？](https://stackoverflow.com/questions/7926121/how-to-get-sub-categories-in-magento)

# mysql - 如何创建 MySQL 创建函数？

> ID：14568805
> 
> 赞同：1
> 
> 时间：2013-01-28T18:37:08.243
> 
> 标签：mysql

我想创建一个像下面这样的简单函数来完成一项简单的任务：

```
DELIMITER $$
CREATE FUNCTION f(key TEXT, str TEXT) RETURNS INT
BEGIN
    IF LOCATE(key, str) > 0 THEN
        RETURN 1;
    ELSE
        RETURN 0;
    END IF;
END $$
DELIMITER ; 
```

但我得到一个错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'key T
EXT, str TEXT) RETURNS INT
BEGIN
    IF LOCATE(key, str) > 0 THEN
        R' at line 1 
```

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:41:04.857

该函数存在语法错误，因为`key`它是 MySql 中的保留字。解决方案：重命名参数或放入`key`反引号中，如下所示：

```
CREATE FUNCTION f(`key` TEXT, str TEXT) RETURNS INT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:40:44.407

key是mysql中的一个关键字，放在`之间或者使用不同的名字。

# database - Neo4j 的缺点

> ID：14568807
> 
> 赞同：3
> 
> 时间：2013-01-28T18:37:17.423
> 
> 标签：database, lucene, neo4j

因此，我正在整理一份关于 Neo4j 的报告，它与一般的关系数据库相比具有潜在优势。在我的研究中，我遇到了一些问题，这些问题可能不会使 Neo4j 目前成为公共服务器应用程序的最佳选择。即：

*   Neo4j 使用 Apache Lucene，它将所有数据都视为文本。这使得纯整数数据查询比它们需要的慢得多。

*   Neo4j 没有内置用户管理。所有安全都必须在应用程序级别完成。

我的问题是我的研究是否过时，这些问题是否有解决方案。我知道 Neo4j 和其他图形数据库的社区和支持正在快速增长。任何了解 Neo4j 当前状态的人都可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T20:48:13.010

回复您的第一个项目符号：

通过使用 ValueContext，您可以告诉 Lucene 对其进行数字索引，也可以通过数值或数值范围进行查询。参见例如[https://github.com/neo4j/neo4j/blob/master/community/lucene-index/src/test/java/org/neo4j/index/impl/lucene/TestLuceneIndex.java#L622](https://github.com/neo4j/neo4j/blob/master/community/lucene-index/src/test/java/org/neo4j/index/impl/lucene/TestLuceneIndex.java#L622)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-06T03:52:17.113

至于第二个项目符号，似乎 2.2 版（当前为 M3）引入了真正的用户管理。有关新功能的基本概述，请参阅[http://neo4j.com/blog/neo4j-2-2-milestone-1-release/](http://neo4j.com/blog/neo4j-2-2-milestone-1-release/)。请注意，这不是生产就绪版本。

# android - 带有 ActivityGroup 的 TabActivity

> ID：14568808
> 
> 赞同：0
> 
> 时间：2013-01-28T18:37:17.230
> 
> 标签：android, android-tabactivity

我能够在多次使用`TabActivity`时正常工作。但是，我注意到一个奇怪的行为。当单击一个选项卡中的多个屏幕，转到另一个选项卡并导航回用户已经在其中导航多个屏幕的原始选项卡时，返回到主而不是最后访问的一个。`Activity``ActivityGroup``ActivityGroup``Activity`

我在这里学习教程：

[http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)

是否有解决方法`ActivityGroup`来防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:53:12.740

我认为最好找一个关于 Fragments 的教程。

我知道这并不是您问题的真正答案，但我认为最好立即使用 Fragments。这是因为 Fragments 现在被推荐用于 Android 开发，并且应该尽可能多地使用旧技术。而你想做的事情，就是现在应该用 Fragments 完成的事情的完美例子。

您指向的教程是从 2010 年开始的，所以这意味着那里使用的技术将会相当陈旧（虽然我还没有读过，但我可以想象它会）。如果你想开发一些东西，最好立即使用最新的技术，在这种情况下：片段。

[片段](http://developer.android.com/guide/components/fragments.html)的一些信息

# html - 根据屏幕大小按比例缩小包含图像的 HTML 表格

> ID：14568809
> 
> 赞同：1
> 
> 时间：2013-01-28T18:37:19.810
> 
> 标签：html, css, responsive-design, html-table

考虑以下代码。我如何以响应方式实现表格，以便在大屏幕上，表格的高度和宽度等于图像（例如 600x600）的总和，而在移动设备等较小的屏幕上，表格会按比例缩小图像。例如，在屏幕宽度为 320 像素的 iPhone 上，我希望表格缩小到 320x320，同时保留图像纵横比。

```
<HTML>
<head></head>
<body>
    <div id="header"></div>
    <div id="table"
    <table style="height: 100%">
        <tr>
            <td>
                <img id="topleft" src="300x300.png">
            </td>
            <td>
                <img id="topright" src="300x300.png">
            </td>
        </tr>
        <tr>
            <td>
                <img id="bottomleft" src="300x300.png">
            </td>
            <td>
                <img id="bottomright" src="300x300.png">
            </td>
        </tr>
    </table>
</div>
<div id="footer"></div>
</body>
</html> 
```

这是一张显示上述代码如何在移动 Safari 浏览器中呈现的图像。

![在此处输入图像描述](../Images/0f18796504d50334557fa3ac9daa3051.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:39:41.927

如果每行有 2 张图像，您可以将表格宽度设置为 100%，并将 td 和 img 宽度设置为大约 49%（以保持边框）。此外，如果您的图像可能小于可能的屏幕尺寸，请使用类似`img {max-width: 49%;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:01:36.567

自适应表维度可能很棘手。我建议的第一件事是将 table 放在具有属性 as 的 div 内，`position: relative`然后以这种方式控制边距和大小。

```
<div id="myCont" style="">
    <table>
        <tr>
            <td> Hello! </td>
            <td> Aloha! </td>
        </tr>
        <tr>
            <td> Goodbye! </td>
            <td> Aloha! </td>
        </tr>
    </table>
</div> 
```

然后是一些CSS：

```
#myCont {
    position: relative; 
    width: 100%;
}
#myCont table {
    width: 100%;
}
#myCont table tr td {
    width: 50%;
    position: relative;
}
.imgCls {
    width: 100%;
} 
```

如果您随后将表格设置为`<table cellspacing="0" cellpadding="0">`，您将更容易获得准确的尺寸和“清晰的石板”。

`width`此外，如果您只设置属性，img 标签将始终尊重纵横比。

为此，我可能会推荐一个 jQuery 解决方案。

```
<img class="imgCls" src="/path/to/img.png" />

<script type="text/javascript">
$(document).ready(function(){
    var imgw = $('.imgCls').parent('td').css('width');
    $('.imgCls').css('width',imgw);
});
</script> 
```

只要具有`imgCls`该类的图像的宽度是（或希望是）均匀的，这样的东西就应该起作用，它将采用它找到`var imgw`的第一个的宽度。`.imgCls`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-28T18:41:14.353

我建议您尝试使用此 css 代码：

```
img{ width: 49%;  } 
```

[http://jsfiddle.net/xeSLA/](http://jsfiddle.net/xeSLA/)

# jsf-2 - SessionScoped 中的渲染页面

> ID：14568812
> 
> 赞同：1
> 
> 时间：2013-01-28T18:37:26.530
> 
> 标签：jsf-2

我在 JSF 中使用 @SessionScoped 时遇到问题。当使用一些查询字符串参数从 Home.jsf 遍历到 Dashboard.jsf 时，Dashboard.jsf 页面根据 QueryString 参数中的输入工作正常。

但是，当我再次返回（浏览器返回按钮）到 Home.jsf 并单击 Dashboard.jsf 的其他链接时，同样不会根据查询字符串更新页面。它向我显示我之前请求的同一页面。

当我调试代码时，我观察到，在第一次请求时，它将在 PageBean(Dashboard.jsf) 后面编码，但是，在另一个请求中，它不是。

我不想使用@RequestScoped 和@ViewScoped，因为我必须维护会话中的值。

任何人都可以建议我如何在每个请求上呈现 Dashboard.jsf 吗？

请建议。

# dns - Samba4加入现有的Windows域

> ID：14568813
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:37:27.933
> 
> 标签：dns, active-directory, bind, samba

早上好，我正在测试 samba4 作为域控制器，并尝试将其加入现有域。唯一的其他 DC 是 Server 2008 R2，域功能级别也是 2008 R2。我正在使用 Samba 4.0.0beta2（这就是 Ubuntu 12.10 存储库中的内容）。我遵循了许多指南和教程，但我似乎一辈子都无法让 DNS 复制正常工作。Shares/sysvol 复制工作正常，AD 用户复制正常，但 DNS 很难获得。

首先，官方文档似乎建议如果在加入期间未指定任何选项，samba 将使用它的内部 DNS 服务器。我正在尝试使用 BIND9.8；域加入期间的 --dns-backend 选项不再存在，所以我的一部分想知道 samba DNS 服务器和 BIND9 是否在互相争斗。有没有办法指定 samba 应该使用哪个 DNS 服务器？我尝试将“dns 后端”添加到 smb.conf 文件中，但 samba4 无法识别这一点。同样，文档很难找到。

下面是我的named.conf（压缩成一个文件）和smb.conf。写的一些台词是从网络上的各种文档中复制而来的

命名的.conf：

```
acl samba4 { 192.168.4.0/24; };
acl interfaces { 192.168.4.21; 127.0.0.1; };

options {
        listen-on { interfaces; };
        directory "/var/cache/bind";
        allow-query { any; };
        allow-recursion { any; };
        notify no;
        recursive-clients 1500;
        tcp-clients 200;
        minimal-responses yes;
        provide-ixfr yes;
        request-ixfr yes;
        dnssec-validation no;
        forwarders { 192.168.4.1; };
        auth-nxdomain no;    # conform to RFC1035
        listen-on-v6 { any; };
        tkey-gssapi-keytab "/var/lib/samba/private/dns.keytab";
        recursion yes;
};

logging {
        channel daemon_info {
                syslog daemon;
                severity debug;
                print-category yes;
                print-severity yes;
                print-time no;
                };
        category lame-servers { null; };
        category default { daemon_info; };
};

view "samba" {
        match-clients { samba4; };
        allow-update { localhost; samba4; };
        allow-query { localhost; samba4; };
        include "/var/lib/samba/private/named.conf";
}; 
```

smb.conf：

```
[global]
        server role = active directory domain controller
        workgroup = INTAAVEX
        realm = intaavex.com
        netbios name = LOLDC
        passdb backend = samba4
        server services = rpc, nbt, wrepl, ldap, cldap, kdc, drepl, winbind, ntp_signd, kcc, dnsupdate, smb
        dcerpc endpoint servers = epmapper, wkssvc, rpcecho, samr, netlogon, lsarpc, spoolss, drsuapi, dssetup, unixinfo, browser, eventlog6, backupkey, dnsserver, winreg, srvs$

[netlogon]
        path = /var/lib/samba/sysvol/intaavex.com/scripts
        read only = No

[sysvol]
        path = /var/lib/samba/sysvol
        read only = No

[Public]
        path = /shares/public 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:20:08.600

所以我用不同的方式解决了这个问题。我重新开始，自己用 dlopen 和 gssapi 编译了 BIND9.9.2，并自己编译了最新版本的 samba4（而不是使用 apt 存储库），它是 4.0.1 稳定版。

作为 DC 加入后，Samba 会复制其他域控制器上的所有内容。

将 ForestDnsZones 和 DomainDnsZones 从 Samba4 复制到 Server 2008 R2 不起作用。然而，它的工作方式相反。其他一切都被复制。看起来这和我可能会得到的一样好；即使是最新的稳定版 Samba (4.0.1) 仍然承认复制这些分区是不可靠的。

# c# - 如何使用 SignalR 进行类似数据的自动刷新

> ID：14568815
> 
> 赞同：0
> 
> 时间：2013-01-28T18:37:31.243
> 
> 标签：c#, asp.net, signalr

我一直在考虑使用`SignalR`一段时间，我认为我有一个很好的候选人。

我有一个允许系统用户离开的页面，`Comments`目前它用于`JQuery`定期刷新评论列表。我认为`SignalR`会很好地替换它，即如果有两个用户查看列表并且一个写了评论，我希望它立即出现在第二个中。

一切都很好，我有一种可以使用*的*模板。

*然而*

我的系统本身有时可以将自动通知添加到列表中 - 这些是由非基于 Web 的应用程序直接放入数据库中的。

如何`SignalR`从数据库中查看新信息并将其发送给用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:00:28.267

在[集线器](https://github.com/SignalR/SignalR/wiki/Hubs)中是应用程序中的静态部分`SignalR`。您可以在 Web 应用程序中启动[System.Threading.Timer](https://stackoverflow.com/questions/1416803/system-timers-timer-vs-system-threading-timer)以定期检查数据库是否有新通知，并将这些通知添加到.`hub`

这甚至可以通过使用[SqlCacheDependency](https://stackoverflow.com/questions/642848/performance-questions-for-sql-cache-dependency)来改进。

一个主观的旁注：*我同意这种类型的功能非常适合`SignalR`*.

# r - 格子箱线图格子

> ID：14568819
> 
> 赞同：2
> 
> 时间：2013-01-28T18:37:34.610
> 
> 标签：r, lattice

我正在尝试使用下表构建一些格子箱图

```
Table = structure(list(T1 = c(0.291087321369092, 0.273666903677489, 0.28310355958841, 
0.284740195855848, 0.295147975635073, 0.311420595965798, 0.291715874011621, 
0.283184027096442, 0.293903569836777, 0.287475601654195, 0.285616753677472, 
0.311174820952075, 0.287718140987709, 0.284171440123499, 0.306648997486453, 
0.296666677175582, 0.267712673230721, 0.268172747179194, 0.282515694671931, 
0.275166455045057, 0.290677888190142, 0.28925362685232, 0.308675947395171, 
0.280783034596667, 0.293825918534905, 0.321187687739256, 0.316655886927714, 
0.306212759138124, 0.298058984840916, 0.288205090461148, 0.31125783131106, 
0.281113913883764), T2 = c(0.254641064713426, 0.280025002552195, 
0.265431676967411, 0.260018566448208, 0.241113868252169, 0.224969659994714, 
0.256666545183005, 0.26899868567758, 0.254889821628355, 0.256369320142347, 
0.265651766783899, 0.223656902559304, 0.259521892511503, 0.257931132867981, 
0.215928878425669, 0.242755942003399, 0.315657914021147, 0.307310393081742,
0.275207754304725, 0.296106839381649, 0.255484283039166, 0.253043444440123, 
0.221582655924359, 0.264993533576062, 0.237539473920042, 0.173638172129653, 
0.207913054356728, 0.208239244766248, 0.231349331756598, 0.236781399925237, 
0.227976661572611, 0.256537362632766)), .Names = c("T1", "T2"
), class = "data.frame", row.names = c(NA, -32L)) 
```

我可以为其中一列创建箱线图

```
Var1<-structure(as.integer(c(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2)), .Label= c("no","yes"), class="factor")
Var2<-structure(as.integer(c(1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,2,2,2,2,1,1,1,1,2,2,2,2)), .Label=c("no","yes"),class="factor")
Var3<-structure(as.integer(c(1,1,1,1,2,2,2,2,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2)), .Label=c("normal","low"),class="factor")

T1<-Table[,c("T1")]
T2<-Table[,c("T2")]

library(lattice)
library(latticeExtra)
library(gridExtra)

table.df<-cbind(Var1,Var2,Var3,Table)

trellis<-useOuterStrips(bwplot(T1~Var1|Var2+Var3,groups=Var1,data=table.df,main="title",ylab=NULL)) 
```

但是我无法用两列创建图表。像这张图片（从[http://www.statmethods.net/](http://www.statmethods.net/)下载）：

![在此处输入图像描述](../Images/e5e60c065c34d07364f4b07a84d48f2e.png)

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:13:19.703

像这样（注意没有表示T2）：

```
bwplot(T1 ~ Var1 | Var2 + Var3, data=tab, main='title', ylab=NULL) 
```

![在此处输入图像描述](../Images/63ddf3ea06e6d2a78fa33bf508777f93.png)

或者可能是这样的：

```
tab <- reshape(table.df, direction='long', varying=c('T1','T2'), sep='')
bwplot(T ~ factor(paste0('T', time)) | Var2 + Var3, data=tab, groups=Var1, main='title', ylab=NULL) 
```

![在此处输入图像描述](../Images/c28a98d31b318441a7749ce160f9d7ae.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:55:22.533

您是否想将数据框中的两个数字列（T1 和 T2）相互绘制 - 这就是您想要的吗？

```
useOuterStrips(xyplot(T1 ~ T2 | Var2 + Var3, groups=Var1, data=table.df, 
               auto.key=T)) 
```

![在此处输入图像描述](../Images/a78210708cb9cede75f0bd6e0d5e2f50.png)

# css - 内容 CSS 下的水平链接下拉菜单

> ID：14568823
> 
> 赞同：0
> 
> 时间：2013-01-28T18:37:40.480
> 
> 标签：css, drop-down-menu, hyperlink, overlapping

我目前正在创建我的第一个 wordpress 主题，但在水平下拉菜单中遇到了问题。悬停时，下拉菜单显示在内容下方。

[http://pennyjarrdesigns.com/assets/problem1.jpg](http://pennyjarrdesigns.com/assets/problem1.jpg)（截图）

我尝试使用 z-index 并调整相对和绝对定位，但似乎没有任何效果。将绝对值添加到导航周围的主 div 会产生以下结果：

[http://pennyjarrdesigns.com/assets/problem2.jpg](http://pennyjarrdesigns.com/assets/problem2.jpg)（截图）

下拉列表现在可见，但它破坏了布局。

**这是html/php：**

```
<div class="container">
<div class="row">
    <div class="twelvecol last" id="nav">
        <?php wp_nav_menu( array( 'sort_column' => 'menu_order', 'menu_class' => 'nav', 'theme_location' => 'primary-menu' ) ); ?>

    </div>

</div> 
```

**CSS：**

```
#nav{background: #4b4261;
margin-bottom: 2%;
color: #f4e1c8;
 }

.nav{
width:100%;
background: #4b4261;
display:block;
float:left;
position:relative;
}

.nav ul{
list-style:none;
}

.nav li{
display:inline-block;
position:relative;
}
.nav a{
display:block;
text-decoration:none;
color:#f4e1c8;
padding:0 15px 10px 0;
font-size: 1.2em; 
font-weight:bold;
}

.nav ul ul{
display:none;
position: absolute;
left:0;
top: 100%;
float:left;
z-index:99999;
background: #c1c5cc;
}

.nav ul ul ul{
top: 30%;
left:100%;
background: #dfe1e8;
}

.nav ul ul a{
height:auto;
line-height:1em;
padding:10px;
width:130px;
}

.nav li:hover > a,.nav ul ul:hover > a{
color:#fff;

}

.nav ul li:hover > ul{
display:block;
 } 
```

网格CSS：

```
.container {
padding-left: 20px;
padding-right: 20px;
}

.row {
width: 100%;
max-width: 1140px;
min-width: 755px;
margin: 0 auto;
overflow: hidden;

}

.onecol, .twocol, .threecol, .fourcol, .fivecol, .sixcol, .sevencol, .eightcol, .ninecol, .tencol, .elevencol {
margin-right: 3.8%;
float: left;
min-height: 1px;
} 
```

我真的觉得我在这里忽略了一些简单的事情。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:49:36.403

您将溢出`.row`作为隐藏，这意味着任何超出该元素边界的内容都不会显示。

此外，虽然您将子 ul 元素设置为`position: absolute;`and `z-index: 9999;`，但它们的父元素设置为`position:relative;`没有设置在`content`元素上方的 z-index。因此，下拉 z-index 仅适用于其父“维度”（z-index 级别），而不适用于页面的其余部分。这可能会导致问题，但我没有测试它，只是从内存中工作。

# php - 我的两个表 sql 查询有什么问题？

> ID：14568826
> 
> 赞同：0
> 
> 时间：2013-01-28T18:38:02.660
> 
> 标签：php, mysql

我正在尝试在事件表中选择客户 ID，并且它与客户表中的客户 ID 相同，并且会话登录 ID 等于客户表中的登录 ID。

```
$result = mysql_query("SELECT event.customerid, customer.customerid,          
customer.loginid,customer.email". "FROM even, customer"."
WHERE event.customerid = customer.customerid  AND 
customer.loginid = ". $_SESSION['SESSLOGINID']); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:40:01.097

FROM 前缺少空格

```
$result = mysql_query("SELECT event.customerid, customer.customerid,          
customer.loginid,customer.email". " FROM even, customer"."
WHERE event.customerid = customer.customerid  AND 
customer.loginid = ". $_SESSION['SESSLOGINID']); 
```

编辑：请不要忽视 tadman 的评论

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T18:39:54.703

您在`customer.email`和之间缺少一个空格`FROM`。您还缺少一个`t`on `event`。

您的查询应为：

```
$result = mysql_query("SELECT event.customerid, customer.customerid,          
customer.loginid,customer.email". " FROM event, customer"."
WHERE event.customerid = customer.customerid  AND 
customer.loginid = ". $_SESSION['SESSLOGINID']); 
```

如果您查看收到的错误消息，您至少会接近问题。如果您随后仔细查看查询（复制并粘贴到变量并转储它），您应该会注意到问题。

* * *

附加说明：在您继续之前，如果您还没有阅读 SQL 注入，您应该阅读。此外，正如@tadman 指出的那样，`mysql_*`函数已被弃用，不应在新代码中使用。

# gcc - 为什么 gcc 不会编译未初始化的全局常量？

> ID：14568830
> 
> 赞同：3
> 
> 时间：2013-01-28T18:38:15.357
> 
> 标签：gcc, g++, global-variables

当我尝试使用 g++ 编译以下内容时：

```
const int zero;

int main()
{
  return 0;
} 
```

我收到一个关于`uninitialized const 'zero'`. 我认为全局变量默认初始化为 0 [1] ？为什么这里不是这种情况？
VS 编译得很好。

[1] 例如，参见[https://stackoverflow.com/a/10927293/331785](https://stackoverflow.com/a/10927293/331785)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:41:01.130

我的 gcc 稍微冗长一些：

```
$ g++ zeroconst.c
zeroconst.c:1:11: error: uninitialized const ‘zero’ [-fpermissive] 
```

我们看到该`-fpermissive`选项将允许编译。

有关C++ 标准的参考，请参阅有关[未初始化 const的这个问题（问题是 C++ 特定的）。](https://stackoverflow.com/questions/8092670/uninitialized-const)

[正如GCC wiki](http://gcc.gnu.org/wiki/VerboseDiagnostics#error:_uninitialized_const_.27d.27_.5B-fpermissive.5D.2C_note:_.27const_class_D.27_has_no_user-provided_default_constructor)所引用的：

> 根据 C++ 标准的要求（8.5 [decl.init]，C++03 中的第 9 段，C++0x 中的第 6 段），G++ 不允许默认初始化 const 限定类型的对象，除非该类型具有用户声明的默认构造函数。可以通过提供初始化程序来修复无法编译的代码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:52:56.593

G++ 要求您在定义期间初始化常量。

# javascript - Jquery Ajax 不会绑定 Href

> ID：14568832
> 
> 赞同：0
> 
> 时间：2013-01-28T18:38:20.443
> 
> 标签：javascript, jquery

我通过 jquery 调用 ajax 以加载 href。html 似乎可以正确加载。但是，加载的 html (href) 实际上不起作用。具体来说，我无法弄清楚为什么一旦链接通过 ajax 加载，当我单击它时它实际上并没有做任何事情。萤火虫没有错误，只是死链接。我的 .on() 方法不正确吗？

**主页.html**

```
<html>
<head></head>
<body>
<div id="connections">Placeholder Text</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
var uri='home-ajax.html'; //first find out if this is created yet   
var myVar=setInterval(function(){example_ajax_request()},8000); //to do that check for it ev. 8 sec.
function example_ajax_request() {
    $.ajax({
        type: 'GET',
        url: 'home-ajax.html', //checking
        dataType: 'html', //html is content inside home-ajax.html
            success: function() {               
                $('#connections').load('home-ajax.html'); //if home-ajax exists replace connections div with its content
                clearInterval(myVar); //stop the 8 sec. timer
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            }
    });

}

$('myLink').on('click', function(e) { //using .on to actively bind new href link from ajax()
    document.location.href="http://www.cnn.com";//when href with id='myLink' is clicked, go to www.cnn.com
});
</script>

</body>
</html> 
```

**主页-ajax.html**

```
<p><a href="#" id="myLink">CNN</a></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:41:13.830

该元素在页面加载时不存在，因此您不能直接将点击功能绑定到它。您必须将点击委托给静态元素。

```
$(document).on('click', '#myLink', function(e){
    e.preventDefault(); // stop default action
    document.location.href="http://www.cnn.com"; //do work
}); 
```

# oracle - Oracle：使列名动态化

> ID：14568833
> 
> 赞同：1
> 
> 时间：2013-01-28T18:38:20.257
> 
> 标签：oracle

我有一张表，月份如下所示：

```
product rev_jan unit_jan prod_jan rev_feb  rev_march u... 
```

我需要获取当月的数据。

目前我正在使用绑定变量。

```
select 
rev_&1,
prod_&1,
unit_&1
from 
table_name 
```

有没有更好的方法解决方案，因为在这种方法中我必须提示月份 3 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:20:14.857

OP 描述的是在 sqlplus“命令行”上为 sqlplus 脚本提供参数。如果文件包含以下内容：

```
select 
rev_&1,
prod_&1,
unit_&1
from 
table_name; 
```

然后 sqlplus 将从提示中获取第一个“命令行参数”，例如

```
SQL> @script.sql arg1 
```

并用文字值 arg1 替换 '&1' 而不提示三次（或者无论脚本中出现多少次子字符串 '&1'）。

如果您没有在“命令行”上提供参数，那么 sqlplus 将在每次出现在脚本中时提示输入“&1”的值（此处为 3 次）。

为避免 sqlplus 解释 '&' 字符，您可以使用 sqlplus 的“set define off”或在字符串中连接单个 '&' 字符文字：`'AT' || '&' || 'T'`。

或者，您可以在脚本中设置提示以提高可读性：

```
accept a_month prompt 'Please enter the desired month: '
select 
    rev_&a_month,
    prod_&a_month,
    unit_&a_month
    from 
    table_name; 
```

然后，从 sqlplus 提示符调用脚本，如下所示：

```
SQL> @script.sql
Please enter the desired month: jan 
```

（脚本在这里执行。）

有关 sqlplus 参考，请参阅[Oracle 手册](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#CACIIEDF)。

# php - 通过javascript获取价值

> ID：14568841
> 
> 赞同：-2
> 
> 时间：2013-01-28T18:38:40.007
> 
> 标签：php, javascript

我使用 php 打印我的表，其中第一列是 sr.no，但我想在其中存储exam_id 的值。我如何通过 javascript 获取这个 Exam_id 值

```
 foreach ($data as $key) {
            echo "<tr>";
            print'
<td class="contact" id="exam_id" name=' . $key['exam_id'] ." width="5%" value='.$key['date'].'>' . $i . '</td>
<td class="contact"  width="20%">' . $key['date'] . '/' . $key['month'] . '/' . $key['year'] . '</td>
<td class="contact"  width="30%">' . $key['Title'] . '</td>
<td class="contact"  width="20%">' . $key['Branch'] . '</td>
<td class="contact"  width="6%">' . $key['Sem'] . '</td>
<td class="contact" width="24%" ><a onclick="javascript:create_result();" href="#">Create Result</a></td>';

            $i++;
            echo "</tr>";
        } 
```

javacript 是

```
<script type="text/javascript">
    function create_result() {

 var exam_id = document.getElementById('exam_id').value

      $.ajax({type:'POST', url: 'result/create_result',data:exam_id, success: function(response) {
              $('#content').html(response);
   }});
    return false;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:04:30.843

首先，您需要清理您的 PHP 代码。语法有点偏离，很难阅读。

一旦您设法让 PHP 正确输出 HTML，您需要更改为您正在使用`get`的JavaScript`exam_id`值。

正如@MarcB 所说，您的 HTML 中有重复的 ID，因为您将多次运行 PHP 片段，因为它是一个 foreach 循环。这将导致您拥有许多带有 id 的单元格`exam_id`。

您需要能够引用特定单元格才能获得`exam_id`. 由于有问题的单元格的 id 不是唯一的，因此应将其转换为类。`<td class="contact exam_id" name... </td>`

然后，您需要找到一种方法来唯一标识每一行。这可以通过像这样将每行的exam_id附加到行（tr）声明中来完成，`"<tr id='exam-" . $key['exam_id'] . "' >";`（这将替换PHP的第2行）

现在，您必须找到一种方法来确定您希望将哪一行作为您的上下文，然后才能选择该值。

# java - 捕捉到扬声器的音频

> ID：14568842
> 
> 赞同：1
> 
> 时间：2013-01-28T18:38:41.020
> 
> 标签：java, macos, audio, javasound

我知道以前有人问过这个问题，但我还没有找到答案。我想在我的 Mac 上编写一个 Java 程序来捕获内置扬声器中的输出。这可能只使用Java吗？如果是这样，我该怎么做？

如果不能仅使用 Java，是否有一个库可以集成到我的代码中来捕获声音？我阅读了有关插孔音频的信息，但找不到有关如何将其集成到 Java 以及如何从扬声器捕获声音的示例。有没有人有关于如何使用杰克的教程或类似的东西？

# algorithm - 搜索手机通讯录

> ID：14568846
> 
> 赞同：0
> 
> 时间：2013-01-28T18:39:02.550
> 
> 标签：algorithm, trie

给定一部只有数字键盘的手机，我们需要以一种可以快速搜索的方式存储联系人。

用户将输入数字，我们必须显示地址簿中以与这些数字对应的字母开头的所有联系人。

我在一次采访中被问到这个问题，我建议创建一个 trie。对于地址簿中的每个名字，我建议在 trie 中添加相应的数字。

因此，如果通讯录中有以下联系人：

```
bob
boby
mat 
mav 
```

我会使用相应的数字创建尝试。在这种情况下，trie 将包含：

```
262     (At the 2nd node 2, keep a pointer to bob)
2629    (At the node 9, keep a pointer to boby)
628     (At the node 8, keep 2 pointers, one to each of mat & mav) 
```

有没有更好的方法？

更新：此 trie 用于此处描述的 T9 技术中[T9 类型字典背后的数据结构](https://stackoverflow.com/questions/2574016)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:29:35.350

我怀疑大多数名字在前几个字符中会有所不同（例如，在您的列表中包含“Theodore”、“Theodor”、“Theodora”将构成一个遥远的异常值）。

在此基础上，您可以使用比 trie 更简单的东西，即哈希表将前缀映射到匹配条目的列表（一旦前缀唯一地确定列表中的名称，您就不需要更进一步）。

例如，假设`{bob, bobby, matt, mads, zed}`您将拥有哈希表

```
"b" --> [bob, bobby]
"bo" --> [bob, bobby]
"bob" --> [bob, bobby]
"bobb" --> [bobby]
"m" --> [matt, mads]
"ma" --> [matt, mads]
"mat" --> [matt]
"mad" --> [mads]
"z" --> [zed] 
```

请注意，“非区分”前缀（例如，“b”、“bo”、“bob”）可以共享它们的值列表。

如果平均公共前缀是 k 个字符，那么您的开销是 k 个哈希表条目的一个因子。如果 k 很小，正如我所怀疑的那样，那么你最终会得到一个比 trie 更精简、更简单的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:54:05.667

您可以根据字母构建一棵树，但它需要是三个值，左，右，电话号码列表

所以用你的例子：

```
 root node

               b  (left node)                   m  (right node)
               o                                a
               b (number)             v                   t
               y (number) 
```

然后，您可以沿着节点向下走以显示自动完成建议，例如，如果需要`bob`，`boby`您可以显示两个名称。

**更新**

今天早上我想了一下，这篇论文可能会为如何解决这个问题提供一些新的想法，因为它使用三叉树对字符串进行排序。

[http://www.cs.tufts.edu/~nr/comp150fp/archive/bob-sedgewick/fast-strings.pdf](http://www.cs.tufts.edu/~nr/comp150fp/archive/bob-sedgewick/fast-strings.pdf)

但是，如果我的示例中的节点有 5 个值，那么您有：

1.  左节点
2.  右节点
3.  下节点
4.  当前信
5.  适用的电话号码列表

然后向左或向右搜索，直到在该位置找到正确的字母，然后向下，然后向左或向右，直到找到下一个。

这样，每个节点中的每个字母都没有 26 个指针，所以这棵树会很稀疏，但很可能是不平衡的。平衡它将是一个不同的问题。

# asp.net-mvc - 使用 Html.DropDownListFor 获取选定的值

> ID：14568848
> 
> 赞同：0
> 
> 时间：2013-01-28T18:39:05.250
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试使用 Html.DropDownListFor 来构建下拉列表并获取用户选择的值。我可以显示列表，但无法弄清楚如何让链接传递所选值。
我有以下模型：

```
public partial class ProductVariant
{
    public int ID { get; set; }
    public string Sku { get; set; }
} 
```

以下视图模型：

```
public class SkuToDiscountViewModel
{
    public int ID { get; set; }
    public string Sku { get; set; }
    public IEnumerable<ProductVariant> Products { get; set; }
} 
```

以下控制器操作：

```
public ViewResult Index()
    {
       SkuToDiscountViewModel sModel = new SkuToDiscountViewModel();
        List<ProductVariant> prodSkus = db.ProductVariants.ToList();
        sModel.Products = prodSkus;
        return View(sModel);
    } 
```

以下观点：

```
@model mySpace.ViewModel.SkuToDiscountViewModel
@{
    ViewBag.Title = "Index";
 }
 <h2>Index</h2>
 @using(Html.BeginForm())
    {
       Html.DropDownListFor(x=>x.ID,
       new SelectList(Model.Products,"ID", "Sku", Model.ID), " select ")
      <p>
          @Html.ActionLink("Edit", "Edit") 
      </p>
    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:44:20.560

You need to a submit button to your form:

```
@model mySpace.ViewModel.SkuToDiscountViewModel
@{
    ViewBag.Title = "Index";
}
<h2>Index</h2>
@using(Html.BeginForm())
{
    Html.DropDownListFor(x=>x.ID,
        new SelectList(Model.Products,"ID", "Sku", Model.ID), " select ")
    <p>
        <input type="submit" value="Save" />
    </p>
} 
```

Then you need to add an Action to your controller like this:

```
[HttpPost]
public ActionResult Index(SkuToDiscountViewModel postedModel)
{
    // postedModel.ID will contain the value selected in the drop down list
} 
```

# .net - Windows Phone 8 应用程序生命周期事件和异步/等待

> ID：14568851
> 
> 赞同：3
> 
> 时间：2013-01-28T18:39:13.713
> 
> 标签：.net, windows-phone-8, async-await, lifetime

当应用程序进入后台然后恢复时，等待的任务会发生什么？假设收到有关应用程序挂起的事件时未取消任务。从墓碑状态恢复和仅从背景恢复有什么区别吗？

如果没有直接答案，即这取决于提供异步 API 的服务的实现，那么在这种情况下要遵循的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:55:36.250

当应用程序进入后台时，应用程序的所有线程都被冻结。因此，一旦应用程序被激活，任务就会恢复。

例如，让我们运行这个代码片段：

```
 private async void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        Debug.WriteLine("I've started");
        await Task.Delay(TimeSpan.FromSeconds(5));
        Debug.WriteLine("I'm done");
    }

    private void Application_Launching(object sender, LaunchingEventArgs e)
    {
        Debug.WriteLine("Application_Launching");
    }

    private void Application_Activated(object sender, ActivatedEventArgs e)
    {
        Debug.WriteLine("Application_Activated");
    }

    private void Application_Deactivated(object sender, DeactivatedEventArgs e)
    {
        Debug.WriteLine("Application_Deactivated");
    } 
```

当我们运行此代码片段并在五秒结束前点击“开始”按钮时，我们可以看到以下输出：

> 应用程序_启动
> 
> 我已经开始了
> 
> 应用程序_停用
> 
> 应用程序_已激活
> 
> 我受够了

根据上述事件序列，您可以看到异步等待任务在停用和激活后完成。

就 async-await 的最佳实践而言：

1.  对于使用外部资源（例如 WebRequest）的任何操作，最好在其周围放置一个 try-catch 块，并进行一些有意义的错误处理。更多 @ [http://msdn.microsoft.com/en-us/library/dd997415.aspx](http://msdn.microsoft.com/en-us/library/dd997415.aspx)

2.  对于在应用程序停用后停止的长时间运行的任务，请使用 TaskCancellationToken 机制来取消这些任务。更多 @ [http://msdn.microsoft.com/en-us/library/dd997396.aspx](http://msdn.microsoft.com/en-us/library/dd997396.aspx)

# javascript - Javascript 中的循环动画和/或快速动画可能吗？

> ID：14568854
> 
> 赞同：0
> 
> 时间：2013-01-28T18:39:21.540
> 
> 标签：javascript, animation, background-image, settimeout, setinterval

我有这个代码：

```
var run_anim = "";
var anim_array = ["\animations\pic_1.gif",
                  "\animations\pic_2.gif",
                  "\animations\pic_3.gif",
                  "\animations\pic_4.gif"]

function changeBackgroundURL(elementId, backgroundURL){
    run_anim = "false";
    document.getElementById(elementId).style.background=backgroundURL;
}

function mouseover_anim(elementName){
    run_anim = "true";
    changeBackgroundURL(elementName,anim_array[0]);
    while(run_anim=="true"){
        setTimeout(function(){changeBackgroundURL(elementName,anim_array[1]) parameter = null},30);
        setTimeout(function(){changeBackgroundURL(elementName,anim_array[2]) parameter = null},40);
        setTimeout(function(){changeBackgroundURL(elementName,anim_array[3]) parameter = null},20); 
    }
} 
```

我正在运行这条线：

```
<area shape="rect" coords="0,0,95,91"
            onMouseOver="mouseover_anim('div_1')" 
            onMouseOut="changeBackground('div_1', 'pic_static.gif')"> 
```

当我运行它时，应用程序会占用大量 CPU，我需要关闭浏览器。看起来while循环（总是如此）阻塞了孔系统（但我没有看到任何图片变化）。在浏览器中调试时，我也看不到任何错误消息。我也尝试过预加载图片（代码未在上面发布），但它仍然无法正常工作。

该代码**仅**在我*禁用 while 循环*并*设置更长的超时*时才有效，如下所示：

```
function mouseover_anim(elementName){
    changeBackgroundURL(elementName,anim_array[0]);
    setTimeout(function(){changeBackgroundURL(elementName,anim_array[1]) parameter = null},300);
    setTimeout(function(){changeBackgroundURL(elementName,anim_array[2]) parameter = null},400);
    setTimeout(function(){changeBackgroundURL(elementName,anim_array[3]) parameter = null},200); 
} 
```

那么用Javascript创建循环动画和/或快速动画是不可能的吗？或者你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:49:19.653

@alfasin 如果@Marcus 希望它是一个快速动画，3 秒超时太多了，所以可能大约 100 毫秒？第二件事——使用真实，而不是“真实”——你能看出区别吗？:) 最后也是最重要的一点 - 使用 setInterval 每 n 毫秒调用一次你的函数，你不会遇到浏览器崩溃的问题（当然你需要记住 clearInterval，否则它会无休止地运行

由于我有空闲时间，这是几乎完整的代码：

```
var intervalId = setInterval(function() {
    // do your stuff here

    // write condition, that when satisfied clears this interval
    //clearInterval(intervalId);
}, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:37:35.410

这是它为我工作的方式（我更改了图像名称/路径并在 FF & chrome 上本地测试）：

```
<html>
<head>
 <style type="text/css">  
    div {  
        position: absolute;
        left:   200px;
        top:    200px;
        width:  800px;  
        height: 900px;  
        style: "background: url(\"1.jpg\")";
    }  
</style> 
<script type="text/javascript">
var anim_array = ["url(\"1.jpg\")",
                  "url(\"2.jpg\")",
                  "url(\"3.jpg\")",
                  "url(\"4.jpg\")"]

function changeBackgroundURL(backgroundURL){
    document.getElementById("1").style.backgroundImage = backgroundURL;
}

function mouseover_anim(){
    var bg = document.getElementById("1").style.backgroundImage;
    if(bg === anim_array[0] || bg === ""){
        bg = anim_array[1];
    }
    else if(bg === anim_array[1]){
        bg = anim_array[2];
    }
    else if(bg === anim_array[2]){
        bg = anim_array[3];
    }
    else if(bg === anim_array[3]){
        bg = anim_array[0];
    }
    changeBackgroundURL(bg);    
}

</script>
</head>
<body>
    <div id="1"></div>
    <img src ="1.jpg" width="145" height="126" alt="Planets" usemap="#planetmap">
    <map name="planetmap">
        <area shape="rect" id="1" coords="0,0,200,200" onMouseOver="setTimeout(mouseover_anim,3000);" >
    </map>
</body>
</html> 
```

# android - 自定义首选项类别不会显示文本标题

> ID：14568860
> 
> 赞同：0
> 
> 时间：2013-01-28T18:39:34.500
> 
> 标签：android, preferences, preferenceactivity

我试图让我的 Preference 类别标题与我的应用程序的主题保持一致，所以在搜索 SO 和我关注的一些博客之后..我发现最好（也是最简单）的方法就是创建一个自定义 Preference覆盖 onCreateView() 或 onBindView() 并以编程方式设置类别 TextView 的颜色及其背景的类别类。听起来很容易。

我唯一的两个警告是我使用的是 SherlockPreferenceActivity，因此我不能简单地将自定义主题应用到我的 Activity，因为我必须使用 Sherlock 主题或衍生主题。另外，我的另一件事（我认为这可能是原因）是我正在尝试将 TextView 的背景设置为 Shape Drawable，它是 xml 中带有笔划的渐变。偏好类别的背景变化得很好，但我根本看不到任何 TextView，这让我认为背景可能是在它的 textView 之上绘制的？我不确定

这是我的 CustomPreferenceCategory 类的代码。如您所见，我使用 onBindView() 和 onCreateView() 都进行了尝试。

```
public class CustomPreferenceCategory extends PreferenceCategory {

public CustomPreferenceCategory(Context context) {
    super(context);

}

public CustomPreferenceCategory(Context context, AttributeSet attrs) {
    super(context);

}

public CustomPreferenceCategory(Context context, AttributeSet attrs,
        int defStyle) {
    super(context);

}

 @Override
    protected void onBindView(View view) {
        super.onBindView(view);
        TextView titleView = (TextView) view.findViewById(android.R.id.title);
        titleView.setBackgroundResource(R.drawable.header_non_rounded);
        titleView.setTextColor(Color.WHITE);

    }

//@Override
/*protected View onCreateView(ViewGroup parent) {
    // And it's just a TextView!
    TextView categoryTitle = (TextView) super.onCreateView(parent);
    categoryTitle.setBackgroundResource(R.drawable.header_non_rounded);
    categoryTitle.setTextColor(Color.WHITE);

    return categoryTitle;
}*/ 
```

}

这是我通过我的preferences.xml 文件设置它的方式

```
<com.brightr.weathermate.views.CustomPreferenceCategory android:title="Weather"      >
    <CheckBoxPreference
        android:defaultValue="true"
        android:key="degreesC"
        android:summary="Display the weather degrees in Celsius units"
        android:title="Show Celsius" />
    <CheckBoxPreference
        android:defaultValue="true"
        android:key="degreesF"
        android:summary="Display the weather in Farenheit units"
        android:title="Show Farenheit" />

    <ListPreference
        android:entries="@array/textColors"
        android:entryValues="@array/textColor_values"
        android:summary="Change the color of the temerature text"
        android:title="Temperature Text Color" />
</com.brightr.weathermate.views.CustomPreferenceCategory> 
```

关于为什么只更改背景但 TextView 不可见的任何想法？此外，即使我使用 setBackgroundResource() 而不是 setBackgroundDrawable()，它仍然没有设置文本。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:13:29.590

知道了。愚蠢的我，我忘了在每个构造函数中传递另外两个参数。我想踢自己。

```
public CustomPreferenceCategory(Context context) {
super(context);

}

public CustomPreferenceCategory(Context context, AttributeSet attrs) {
super(context, attrs);

}

public CustomPreferenceCategory(Context context, AttributeSet attrs,
    int defStyle) {
super(context, attrs, defStyle);

} 
```

# tridion - 如何使用 TOM.NET 检查发布或呈现上下文？

> ID：14568861
> 
> 赞同：4
> 
> 时间：2013-01-28T18:39:39.443
> 
> 标签：tridion

SDL Tridion 的内容管理器模板 API (TOM.NET) 提供了检测发布或呈现上下文的方法。

## 用例

*   向特定环境提供调试信息（例如，仅在暂存时提供 TCM Uris）
*   在预览中显示不同的标记（例如显示指向已发布页面的链接）
*   在 Experience Manager 或 SiteEdit 中显示不同的可创作字段

我已经看过并尝试了一些示例，但是在与同事[Stan](https://stackoverflow.com/users/1326469/stanislav-kroshchenko)和[Eric](https://stackoverflow.com/users/1424804/eric-huiza)聊天之后，我想确保我关注 TOM.NET (6.1 / Tridion 2011)。

# 场景

1.  **发布到特定的发布目标**（通常是“Live”和“Staging”）
2.  内容管理器资源管理器**(CME) 预览**
3.  **Experience Manager (XPM) 的**会话预览渲染****
***   （添加）**模板生成器****

 **## 1\. 发布到目标（或从出版物）

**`Tridion.ContentManager.Publishing.PublishEngine.GetPublishInfo(IdentifiableObject item)`**

项目将是一个页面或组件。这将返回一个`PublishInfo`对象集合，其中包括**`PublicationTarget`**确认您要发布到的位置。

`Tridion.ContentManager.Templating.PublishingContext.PublicationTarget`也有`PublicationTarget`。

## 2.芝商所预览

PublicationTarget 是`null`，这是有道理的，因为您没有 Publication Target 。:-)

## 3\. 会议预览

使用`RenderMode`下面的枚举`Tridion.ContentManager.Publishing`，它具有：

*   '发布' (0)
*   'PreviewStatic' (1)
*   **'PreviewDynamic'** (2)

PublicationTarget 不会`null`用于 Session Preview，它并不是真正的*发布*。

## 4.（添加）模板生成器

**?**

***[Alexander Klock 还描述了一些相关示例](http://codedweapon.com/2012/03/tridion-publishengine/)，这些示例涵盖了除 CME Preview 之外的大部分内容。***

## 问题）

*   **我错过了任何场景吗？**发布到特定发布目标、定期预览和 XPM 会话预览？

*   我应该如何避免硬编码 PublicationTargets（例如检查字符串值而不是 TCM Uris 更好）？

*   更新：根据 Vikas 的回答将模板生成器添加到列表中，**我怎么知道我正在模板生成器中渲染？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:46:53.997

您对完整的发布/预览模型提出了很好的看法。这是我的想法..

```
Are we missing any scenarios? 
```

*我认为您涵盖了除模板构建器案例之外的所有内容，这类似于 CME 预览，我们将发布目标设为空，但可用于检查对调试目的非常重要的不同条件。*

```
How should I avoid hard-coding PublicationTargets 
```

*是的，我们不应该在任何代码中使用 tcm uri，因为您建议我们可以使用名称，甚至可以在该程序的相应配置文件中配置名称。*

在这里也可能不相关，除了暂存之外，为 Tridion UI 编辑设置单独的目标总是好的。两者都可以在具有两个部署者的同一服务器上进行配置。一种可能是 staging.yoursite.com，另一种可能是 tridionui.yoursite.com

谢谢..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T08:31:09.590

你真的需要一个关于这个问题的tl;博士......

这是我所知道的：

**模板生成器**

发布目标为 null，RenderMode 为 PreviewDynamic

**芝商所预览**

Publication Target ID 为 tcm:0-0-0（或`TcmUri.UriNull`），RenderMode 为 PreviewDynamic

**会话预览**

Publication Target ID 为真实目标 ID，RenderMode 为 PreviewDynamic

**发布**

Publication Target ID是真实的，RenderMode是Publish

**编辑**

这是我最近编写的一些示例代码，用于确定当前模式。

```
private CurrentMode GetCurrentMode()
{
    RenderMode renderMode = _engine.RenderMode;
    if (renderMode == RenderMode.Publish) return CurrentMode.Publish;

    if (renderMode == RenderMode.PreviewDynamic)
    {
        if (_engine.PublishingContext.PublicationTarget == null) return CurrentMode.TemplateBuilder;
        PublicationTarget target = _engine.PublishingContext.PublicationTarget;
        if (target.Id.Equals(TcmUri.UriNull)) return CurrentMode.CmePreview;
        return CurrentMode.SessionPreview;
    }
    return CurrentMode.Unknown;
}

private enum CurrentMode
{
    TemplateBuilder,
    CmePreview,
    SessionPreview,
    Publish,
    Unknown
} 
```**

# c - 如何从 MATLAB 将稀疏矩阵传递给共享库

> ID：14568863
> 
> 赞同：3
> 
> 时间：2013-01-28T18:39:46.377
> 
> 标签：c, matlab, sparse-matrix, mex

我想将一个稀疏矩阵从 MATLAB 传递给一个共享库，在那里做一些操作（用 C 语言编写），然后返回它。

我可以传递一个密集的矩阵并使用，非常容易。但是，我不知道如何将稀疏矩阵从 MATLAB 传递给共享库。我发现的都是关于 MEX 的。

如果提供一些有关 MATLAB 中的稀疏矩阵格式和 C 中的转换的信息，我们将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T08:37:24.857

MATLAB 在内部使用[压缩稀疏列](https://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_column_.28CSC_or_CCS.29)(CSC) 格式存储稀疏矩阵。了解格式后，您可以通过获取数组`pr`、`pi`、`ir`和`jc`（分别使用 MEX 函数[mxGetPr](http://www.mathworks.com/help/matlab/apiref/mxgetpr.html)、[mxGetPi](http://www.mathworks.com/help/matlab/apiref/mxgetpi.html)、[mxGetIr](http://www.mathworks.com/help/matlab/apiref/mxgetir.html)、[mxGetJc](http://www.mathworks.com/help/matlab/apiref/mxgetjc.html)）将稀疏矩阵传递给外部代码。

*   `pr`（如果矩阵是复数）是一个包含矩阵非零值的`pi`双精度长度数组。`nzmax`

*   `ir`指向一个整数数组，其长度也包含和`nzmax`中相应元素的行索引。`pr``pi`

*   `jc`指向长度为的整数数组`n+1`，其中`n`是稀疏矩阵中的列数。该`jc`数组包含列索引信息。如果`j`稀疏矩阵的第 - 列有任何非零元素，`jc[j]`是第 - 列中第一个非零元素的索引`ir`和`pr`（`pi`如果存在）`j`，并且`jc[j+1] - 1`是该列中最后一个非零元素的索引。对于`j`稀疏矩阵的第 - 列，`jc[j]`是前面所有列中非零元素的总数。`jc`数组的最后一个元素`jc[n]`, 等于`nnz`, 整个稀疏矩阵中非零元素的数量。

# apache - Apache 2.4.3 SSI 如果 expr 没有变量？

> ID：14568868
> 
> 赞同：6
> 
> 时间：2013-01-28T18:40:05.840
> 
> 标签：apache, ssi

我有很多文件差异很小。包含的文件包含这个，它试图区分较长路径的一部分：

```
<!--#if expr="${DOCUMENT_URI}=/internet/"-->Internet<!--#else-->Intranet<!--#endif--> 
```

在错误日志中我得到

> AH01337：无法解析 /opt/apache/htdocs/ssi/time.shtml 中的 expr“${DOCUMENT_URI}=/internet/”：“$”附近的解析错误

我发现这个主题有很多变体，比如没有大括号、引号内部的括号、评论结束前的空格或 =~，但没有任何帮助。mod_include 似乎没有调试设置，它会告诉我出了什么问题......

我发现的另一个变体是

```
<!--#if expr='"${DOCUMENT_URI}"=~/internet/'--> 
```

这没有错误。但它总是选择 else 分支，同样使用`REQUEST_URI`，就好像未设置变量一样。但我可以很好地呼应它们。我也试过`/.+internet.+/`以防它锚定这个。

由于这些是 CGI 变量，我也尝试加载 cgid_module - 也不好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-04T23:25:16.120

从版本 2.3.13 开始，mod_include 已切换到 #if 流控制元素中的条件表达式的新 ap_expr 语法。

添加`SSILegacyExprParser on`指令以切换到与 Apache HTTPD 版本 2.2.x 及更早版本兼容的旧语法。

[http://httpd.apache.org/docs/current/mod/mod_include.html#ssilegacyexprparser](http://httpd.apache.org/docs/current/mod/mod_include.html#ssilegacyexprparser)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-17T10:34:51.303

正如许多其他人指出的那样，您可以使用该`v("foo")`样式，但是 Apache 2.4 文档 ( [http://httpd.apache.org/docs/2.4/expr.html#examples](http://httpd.apache.org/docs/2.4/expr.html#examples) ) 中给出的示例给出了这种形式：

```
<!--#if expr="%{DOCUMENT_URI} =~ /internet/"-->Internet<!--#else-->Intranet<!--#endif--> 
```

*请注意变量上的 % 而不是 $，以及`=~`for 正则表达式匹配。*

我刚刚对此进行了测试，并且效果很好。

（或者`SSILegacyExprParser on`也提到了使用，以允许与 2.2.x 格式的向后兼容性。但我希望这种兼容性将在遥远的将来的某个时候被删除..）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-08T10:31:14.987

我得到了它的工作：

```
 <!--#if expr='v("foo") = "bar"' -->
 foo is bar
 <!--#endif --> 
```

请参阅[流控制元素](http://httpd.apache.org/docs/current/mod/mod_include.html#flowctrl)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-26T13:14:59.350

该变量解析为文本字符串，因此它需要用双引号引起来，并且您需要转义这些双引号......（警告这可能是不推荐使用的语法 - 我在旧的 Apache 1 上使用它并且从未更改过升级时）：

```
<!--# if expr="\"$DOCUMENT_URI\"=/internet/" --> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T13:04:31.723

较新的 Apache 版本使用 ap_expr。我只是想添加相关链接：[Apache docs](http://httpd.apache.org/docs/trunk/expr.html)。请注意，v 函数尚未记录。

# jquery - jquery jcarousel initcallback 传递具有新值的参数

> ID：14568876
> 
> 赞同：0
> 
> 时间：2013-01-28T18:40:38.430
> 
> 标签：jquery, callback, jcarousel

我正在尝试根据 AJAX 请求在 jcarousel 中加载新项目。我有一个不同音乐曲目的列表，在点击事件中我传递了曲目的 ID。

```
<ul id="itemTrack"> // Track items
 <li><a href="#" id="p1">Track 1</a></li>
 <li><a href="#" id="p2">Track 2</a></li>
 <li><a href="#" id="p3">Track 3</a></li>
<ul>

<ul id="trackList"></ul> // carousel

$("#itemTrack a").bind("click", getSelectedTrack); // Click event bind on the track list

var theModelCarousel = null; // global variable assigned to null

function getSelectedTrack(e){
  var el = $(e.currentTarget), 
  currTrack = el.attr("id"), // Track ID
  apiurl = "ServiceLibrary/player/GetTrackList/" + currTrack;   // URL to get data
  $('#trackList').html(''); // Clear carousel list
  if (theModelCarousel != null){theModelCarousel.reset();}
  $('#trackList').jcarousel({
    vertical : true,
    scroll : 5,
    initCallback: function(carousel, state){
      if (state == 'init') {
        theModelCarousel = carousel;                
      }                 
      getListRequest(carousel, apiurl);
        }
    });
}

function getListRequest(carousel, apiurl){
        $.ajax({
        type: "GET",
        url : apiurl,
        dataType : 'jsonp',
        timeout : 8000,
        success : function(data){
            if(data){               
               // Add/Create Items HTML
            }else{

            }
        },
        error : function(err){
//          alert(err);
        }        
    });
}; 
```

在上面的代码中，如果我单击列表项，它会将 id(p1) 发送到“apiurl”并获取数据，但是当我第一次单击另一个列表项时，它将发送相同的旧 id(p1) 到ajax 调用，当我第二次单击时，它将发送正确的 id(p2)。我可以理解它会因为 initcallback 而发生，但没有得到任何解决方案来将“apiurl”清除/重置为新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:27:35.510

您可以将 reloadCallback 用于其他即将到来的请求

```
initCallback: function(carousel, state){        
      if (state == 'init') {
        theModelCarousel = carousel;
        getListRequest(carousel, apiurl);
      }
},
reloadCallback: function(carousel){
      getListRequest(carousel, apiurl);
} 
```

# javascript - C 中的 ECMAScript-262 实现？

> ID：14568883
> 
> 赞同：5
> 
> 时间：2013-01-28T18:41:02.347
> 
> 标签：javascript, c, interpreter

> 可能重复：[微小的 javascript 实现？](https://stackoverflow.com/questions/5384762/tiny-javascript-implementation)

我已经四处寻找 Javascript 的 C 实现，但我找不到。对于将在没有 C++ 编译器的平台上运行的超便携应用程序，我需要它。

以下是我的要求：

*   ANSI C（如果可能，与 C89 兼容）
*   最小依赖
*   可嵌入（非独立）
*   开源（兼容 GPL v2）

我不在乎速度，但正确性是个问题。我希望它支持 ECMAScript-262 v5，但 v3 现在已经足够好了。

这样的事情存在吗？如果没有，是否有任何移植相对简单的实现？

[DMDScript](https://github.com/DigitalMars/DMDScript)是我发现的最简单的，所以我最终可能会移植它。显然没有[参考实现](https://stackoverflow.com/questions/1507848/does-a-real-ecmascript-implementation-exist-or-is-it-just-a-spec)，所以这可能是最好的方法。

笔记：

我还发现了[tiny-js](http://code.google.com/p/tiny-js/)，它本来就是小而简单的，但它似乎不符合标准。它似乎**正在积极开发......**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:57:41.877

Spidermonkey 1.8.0 RC1 和之前的版本是 C 语言。你可以使用它。

他们在 2013 年 2 月 11 日的 1.8.5 版本中的最新版本中引入了 C++

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:35:13.460

SpiderMonkey wiki 声称它是 C/C++，然而，从源代码包来看，它实际上似乎是纯 C。

官方下载链接为[http://ftp.mozilla.org/pub/mozilla.org/js/js-1.8.0-rc1.tar.gz](http://ftp.mozilla.org/pub/mozilla.org/js/js-1.8.0-rc1.tar.gz)

如果这不是纯 C，请尝试旧版本。他们的 FTP（[http://ftp.mozilla.org/pub/mozilla.org/js/](http://ftp.mozilla.org/pub/mozilla.org/js/)）目前托管 spidermonkey 1.8.5 到 1.4，以及 Rhino 1.7 到 1.4。

[Spidermonkey API 的文档](https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference)似乎也不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-19T06:49:16.717

你试过[http://www.duktape.org/](http://www.duktape.org/)吗？我一直在四处寻找同样的东西，而这个只是让我眨了眨眼。我会对其进行测试，看看它是如何进行的，但首先，看起来很有希望

# orchardcms - 在 Orchard DataMigration 中向 ContentType 添加字段

> ID：14568888
> 
> 赞同：11
> 
> 时间：2013-01-28T18:41:18.490
> 
> 标签：orchardcms

我在数据迁移中创建了一个 ContentType，它将多个 ContentPart 焊接在一起。

在 Orchard Site Content Admin 上，我可以向 ContentType（但不是 ContentPart）添加一个字段，并且在数据迁移中，似乎只能向 ContentPart（而不是 ContentType）添加一个字段。

我想在迁移中将该字段添加到 ContentType，以便我可以使用placement.info 控制它的放置。

也许这并不重要，还有另一种方法可以在迁移中添加一个字段，然后能够使用placement.info 控制它的放置位置以及使用模板的外观。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T21:38:12.647

您实际上不能将字段附加到内容类型。当您将其附加到管理 UI 中的内容类型时，Orchard 会在幕后使用一些魔法来隐藏这个事实——它会在该内容类型中创建一个与内容类型同名的内容部分，然后附加该新内容部分的字段。

您可以通过管理 UI 附加一个字段来验证这一点，然后转到导入/导出，并为您的内容类型导出元数据。

要通过迁移附加字段，请执行相同的操作。如果您没有作为附加字段的好地方的内容部分，我使用的约定是创建一个与内容类型同名的内容部分，错误后缀为“部分”。假设您的内容类型是“VideoGame”：

```
ContentDefinitionManager.AlterPartDefinition(
    "VideoGamePart"
    , b => b
        .Attachable()
        .WithField("ThumbnailImage", cfg => cfg.OfType("MediaPickerField").WithDisplayName("Video game box cover image"))
);
// Type: 
ContentDefinitionManager.AlterTypeDefinition(
    "VideoGame"
    , cfg =>
        cfg
            .WithPart("VideoGamePart")
            .WithPart("IdentityPart")
            .WithPart("TitlePart")
            .WithPart("CommonPart")
            .Creatable()
); 
```

所有字段都附加到部件，而不是类型，因此您自然可以使用这种迁移方法使用placement.info 和模板来控制放置，就像您通过 UI 定义字段一样。

# .net - Windows 2000 上的 WPF

> ID：14568891
> 
> 赞同：1
> 
> 时间：2013-01-28T18:41:21.093
> 
> 标签：.net, wpf, .net-4.0, windows-2000

是否有一些技巧可以让 WPF 应用程序在 Windows 2000 上运行（例如复制一些系统 dll？）。不应该有技术原因为什么它不可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:44:12.993

There is a strong technical reason why this won't work - Microsoft didn't support the required .NET frameworks.

.NET 4 (and 3.5) is [not supported on Windows 2000](http://msdn.microsoft.com/en-us/library/8z6watww%28v=vs.100%29.aspx). The latest .NET framework supported in .NET 2, which doesn't include WPF.

# pascal - 如何制作元素数量未知的一维数组？

> ID：14568894
> 
> 赞同：1
> 
> 时间：2013-01-28T18:41:27.453
> 
> 标签：pascal

我想知道，如何制作一个元素数量未知的一维数组。

例如：

```
Name: array[1..x] of Integer; 
```

其中 x 是用户稍后在程序中输入的整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:48:17.803

将您的数组声明为动态的，请参阅[文档](http://www.freepascal.org/docs-html/ref/refsu15.html#x39-450003.3.1)。您可以[`SetLength`](http://www.freepascal.org/docs-html/rtl/system/setlength.html)在运行时使用它来设置它的长度，并`Length`获取元素的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:45:52.143

你不能。如果要在变量之间建立动态链接，则需要使用[Lists](http://en.wikipedia.org/wiki/Linked_list)。这是一个如何制作[的示例。](http://www.daniweb.com/software-development/pascal-and-delphi/threads/105142/help-with-linked-list-in-turbo-pascal)

# asp.net-mvc - MVC 使用派生类创建

> ID：14568896
> 
> 赞同：3
> 
> 时间：2013-01-28T18:41:37.220
> 
> 标签：asp.net-mvc, class, model-view-controller, model, base

我是 MVC 的新手，所以如果有什么不合理的地方，我会提前道歉。

我有一个基类（比如说“Person”）和 2 个派生类（“Student”、“Professor”）。

我想为创建功能使用 1 个视图，部分视图包含学生或教授的创建表单。如果我添加一个参数，我可以检查它以确定要显示哪个局部视图。

但我的问题是：单击“创建”按钮时，如何确定正在创建哪个对象？

**编辑**（请忍受我，因为我刚刚创建了这些来说明问题）

人物类：

```
public class Person
{
    public string Gender { get; set; }
    public int ID { get; set; }
} 
```

学生班级：

```
public class Student : Person
{
    public string LastName { get; set; }
    public string FirstName { get; set; }
    public List<Course> Courses { get; set; }
} 
```

教授班：

```
public class Professor : Person
{
    public string LastName { get; set; }
    public string FirstName { get; set; }
    public double AnnualSalary { get; set; }
} 
```

那么我的 Create 控制器如下所示：

```
public ActionResult Create(int personType)    //1=student, 2=professor
{
    var x = new {
            Student = new Student(),
            Professor = new Professor()
        };
    ViewBag.PersonType = personType;
    return View(x);
} 
```

然后我的观点是这样的：

```
<div>
@if (ViewBag.PersonType == 1)
{
    @Html.Partial("CreateStudentPartialView", Model.Student)
}
else 
{
    @Html.Partial("CreateProfessorPartialView", Model.Professor)
} 
```

所以，问题是，当在任一局部视图中单击“创建”按钮时，相关的创建操作会是什么样子？

```
[HttpPost()]
public ActionResult Create(....)    //What would I put as parameter(s)?
{
    //no idea what to do here, since I don't know what object is being passed in
    return RedirectToAction("Index");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:19:09.973

你最好的选择是在你的控制器中有多个 POST 操作。

因此，在部分视图的表单中，指定要点击的操作

```
@using (Html.BeginForm("CreateStudent", "Create")) { 
```

和

```
@using (Html.BeginForm("CreateProfessor", "Create")) { 
```

然后您的控制器将如下所示：

```
[HttpPost]
public ActionResult CreateStudent(Student student)  
{
    //access the properties with the dot operator on the student object
    //process the data
    return RedirectToAction("Index");
} 
```

和

```
 [HttpPost]
 public ActionResult CreateProfessor(Professor professor)  
 {
     //access the properties with the dot operator on the professor object
     //process the data
     return RedirectToAction("Index");
 } 
```

# domain-driven-design - 为什么值对象不应该引用它们的所有者？

> ID：14568903
> 
> 赞同：2
> 
> 时间：2013-01-28T18:42:13.230
> 
> 标签：domain-driven-design

我读过，在大多数情况下，值对象不应该引用它们的所有者。

a）我将其解释为关联应该是单向的，只能从所有者到 VO 遍历？

b) 为什么 VO 不应该引用他们的所有者？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:44:41.300

[值对象](http://en.wikipedia.org/wiki/Value_object)引用其所有者是一种代码异味，因为这表明违反[了 SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)以及[过度紧密的耦合](http://en.wikipedia.org/wiki/Loose_coupling)。根据定义，值对象是除了保存值之外几乎不做任何事情的对象。因此它是不可变的并且没有大多数逻辑（业务逻辑、生命周期逻辑等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T09:54:05.297

> a）我将其解释为关联应该是单向的，只能从所有者到 VO 遍历？

是的。

> b) 为什么 VO 不应该引用他们的所有者？

*   因为不需要。值对象是简单的对象，VO 中的潜在行为通常只与它自己或它自己的类的另一个实例相关。

*   因为值对象可以包含在多个所有者类型中，可能包含在多个聚合中。

*   因为值对象相等是基于所有字段都相等，并且您不希望仅仅因为奇怪的 Owner 字段而将 John 的眼睛的绿色与 Laura 的眼睛的绿色视为任何不同。

*   Because bidirectional associations are discouraged (even in entities) anyway.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T18:45:53.377

我遵循这个原则是因为我希望我的 POJO 的设计独立于使用它们的客户端，并在代码级别将其与客户端分离。这样，它们就变得便携了。

# java - 验证 XML - 删除无效数据

> ID：14568906
> 
> 赞同：2
> 
> 时间：2013-01-28T18:42:34.680
> 
> 标签：java, xml

我想根据它的架构验证一个 xml 文件。验证完成后，我想删除所有无效数据并将这些无效数据保存到新文件中。我可以执行验证，只是坚持删除无效数据并将其保存到新文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:08:45.527

我收回我刚刚写的一切。... :) 看来，您可以在异常时使用 Current Element Node 属性获取所需的节点。

```
Element curElement = (Element)validator.getProperty("http://apache.org/xml/properties/dom/current-element-node"); 
```

因为 Schema 是通过 Xerces 定义的，所以我认为这会起作用。请参阅[http://xerces.apache.org/xerces2-j/properties.html#dom.current-element-node](http://xerces.apache.org/xerces2-j/properties.html#dom.current-element-node)。

How can [I get more information on an invalid DOM element through the Validator？](https://stackoverflow.com/questions/8077437/how-can-i-get-more-information-on-an-invalid-dom-element-through-the-validator).

# javascript - Javascript验证输入字段？

> ID：14568910
> 
> 赞同：1
> 
> 时间：2013-01-28T18:42:45.960
> 
> 标签：javascript, validation

我需要一个 Javascript 来验证输入字段，其中只允许数字和 1 个逗号，最多 8 个数字。

用javascript怎么做？

喜欢在输入字段 KeyUp 上使用它吗？

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:57:49.127

你应该使用现有的`mask`插件，比如这个优秀的插件：[http ://webdeveloperplus.com/jquery/how-to-mask-input-with-jquery/](http://webdeveloperplus.com/jquery/how-to-mask-input-with-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:56:48.913

```
var inputfield = document.getElementById("ID of input");
var commalocation;
var commas = 0;
var signs = 0;
var nums = 0;
var chars = inputfield.value;
chars = chars.split("");
for (var i = 0; i < chars.length; i++){
  if (chars[i] == ','){
    commas++;
    commalocation = i;
  }else if (chars[i] >= '0' && chars[i] <= '9'){
    nums++;
  }else{
    signs++;
  }
}
if (nums > 8 || commas > 1 || signs > 0 || commalocation == 0 || commalocation == chars.length - 1){
  inputfield.value = "";
}else{
  var inputvalue = inputfield.value;
} 
```

# objective-c - iOS 应用分发和部署目标

> ID：14568912
> 
> 赞同：0
> 
> 时间：2013-01-28T18:42:52.530
> 
> 标签：objective-c, xcode, app-store

我需要构建应用程序以通过应用程序商店进行分发。

应用程序经过测试并正在运行`iOS 5.0, 5.1 and 6.0`。

我是否需要为每个 iOS 版本构建不同的档案（更改`iOS Deployment Target`每个构建的设置）？

当我更改`iOS Deployment Target`设置时，编译输出有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:47:00.240

You just need to do one build with the lowest iOS version you want to support, and then you go through all the upload process.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:30:40.583

基本上，您使用的*SDK 版本*是它将运行的**最高 iOS 版本，而***Deployment Target*是**最低**的。

因此，将您的*部署目标*设置为 5.0，使用 iOS SDK 6.0 进行编译（不过，您没有任何其他选项），仅此而已。提交到应用商店。

我不知道更改*Deployment Target*时二进制文件是否存在一些差异，但在编译过程中肯定会有一些差异。例如，当您将其设置为 iOS 6 时，您可能会收到来自最新 API 更改的弃用警告。

# api - 指定类型时在 Youtube API 上获取播放列表结果：“视频”

> ID：14568913
> 
> 赞同：0
> 
> 时间：2013-01-28T18:42:56.843
> 
> 标签：api, youtube

在开发 Google Chrome 扩展程序时，我偶然发现了一个问题，我不确定是我做错了什么还是 Youtube Data API v3 错误。

所以问题是，即使我在“list”调用中指定 type:“video”，我也会得到播放列表结果。

为了确保我的代码没有问题，我去了： [https ://developers.google.com/youtube/v3/docs/search/list#try-it](https://developers.google.com/youtube/v3/docs/search/list#try-it)

我在字段中添加了以下内容：

```
part: snippet
channelId: UCy1Ms_5qBTawC-k7PVjHXKQ
maxResults: 50
q: Content Patch
type: video 
```

在我得到的结果上：

```
 "id": {
    "kind": "youtube#playlist", // < Playlist item :\
    "playlistId": "PLB9225A9DA3422059"
   },
   "kind": "youtube#searchResult",
   "etag": "\"oLweQuB9Vh7wAB9a0AIHg_K-wsM/dR9GDZWu_nfsoaj5bdrHQ3Ng_GA\"",
   "snippet": {
    "publishedAt": "2012-10-31T13:02:09.000Z",
    "channelId": "UCy1Ms_5qBTawC-k7PVjHXKQ",
    "title": "Content Patch",
    "description": "A daily gaming news show, which efficiently integrates opinionated commentary and also our viewers' feedback in a concise and to-the-point manner.", 
```

谁能指出我正确的方向？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:49:32.643

这很可能是 API 中的错误，因为它似乎不再发生。

# javascript - 变换：jquery .animate 函数中的 rotateX

> ID：14568920
> 
> 赞同：0
> 
> 时间：2013-01-28T18:43:48.900
> 
> 标签：javascript, jquery, css, flip

我正在尝试使用 CSS 执行翻转效果。我怎样才能得到 -

`transform: perspective(1200px) rotateX(0deg)`

从

`transform: perspective(1200px) rotateX(90deg)`

使用jQuery的`.animate()`功能？

我尝试过使用 jQuery 2D 转换插件，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:39:14.740

使用原生 CSS。像这样的东西：

```
.panel {
    transform: perspective(1200px) rotateX(0deg);
    transition: transform 0.5s linear;
    -webkit-transition: transform 0.5s linear;
}
.panel.flip {
    transform: perspective(1200px) rotateX(90deg);
} 
```

然后只需切换类。

# c# - 备份mysql数据库并将其转换为sqlite以在c#中使用它

> ID：14568922
> 
> 赞同：0
> 
> 时间：2013-01-28T18:43:56.380
> 
> 标签：c#, mysql, sqlite, mysqldump

我的项目经理要求我执行以下操作：

- 从服务器上的 mysql 数据库备份数据

- 将此数据转换为 sqlite

- 将其添加到从该 sqlite 新数据库读取的 Windows 窗体应用程序中

目标是保持部分数据库始终链接到这个 c# windows 应用程序

我已经阅读了有关使用 c# 从 mysql 备份数据的文章，我不希望有问题

[使用 mysqldump.exe 备份 1](https://stackoverflow.com/questions/7686256/how-to-backup-the-database-using-mysql-and-c-net)

[使用 mysqldump.exe 备份 2](https://stackoverflow.com/questions/12105898/mysql-backup-database-in-c-sharp)

[使用 mysqldump.exe 备份 3](https://stackoverflow.com/questions/13738361/mysql-database-backup-using-c-sharp)

如何将此 mysql 转储文件转换为 sqlite 并使用 sqlite 内存将数据加载到 c# 然后保存，以便应用程序每次运行时都使用此 sqlite 数据库。所有这些步骤都必须由 c# windows 应用程序本身使用按钮或类似的东西来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:55:14.513

IMO 最简单的方法，以及我们如何做到这一点：将表格导出为 CSV。在excel中打开它们。使用单元格的变量为 Excel 工作表中的第一行创建一个插入语句，将其附加为额外的列。单击并向下拖动以在每一行上重复该语句。

复制该生成的列，并将其带到您的 sqlite 数据库浏览器中，然后运行该巨大的语句。

该声明应如下所示：`="INSERT INTO newTable VALUES('" &A2&"','" &B2&"');"`

不要让它变得更难，那么它应该是：P

# flash - an issue with a joomla 2.5 menu

> ID：14568924
> 
> 赞同：-1
> 
> 时间：2013-01-28T18:44:08.297
> 
> 标签：flash, z-index, wmode

I have a problem with a menu on joomla 2.5, the sub menu appears under the flash content as the image below

![enter image description here](../Images/7214c0e5c6f0e6469cad8fb064df8415.png)

Any body can help?

I am using the below code to ember the swf inside the joomla site

```
<script type="text/javascript">

    // <![CDATA[        

    var so = new SWFObject("../../ammap/ammap.swf", "ammap", "100%", "100%", "8", "#f2f2f2");

so.addVariable("path", "../../ammap/");

    so.addVariable("data_file", escape("ammap_data.xml"));

so.addVariable("settings_file", escape("ammap_settings.xml"));      

    so.addVariable("preloader_color", "#999999");

    so.write("flashcontent");

    // ]]>

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:02:32.357

这是 Flash 内容（YouTube 等）常见的 z-index 问题。尝试添加

```
?wmode=transparent 
```

到您的源 URL 的末尾。

[Google Chrome、Flash 和 z-index 错误行为](https://stackoverflow.com/questions/4313364/google-chrome-flash-and-z-index-wrong-behaviour)

[http://forums.adobe.com/message/4123098](http://forums.adobe.com/message/4123098)

# android - 如何从 sharedpreferences 中检索微调器值？安卓

> ID：14568927
> 
> 赞同：1
> 
> 时间：2013-01-28T18:44:20.200
> 
> 标签：android, spinner, sharedpreferences

您好，我有一个配置文件布局文件，其中保存了用户输入的数据。此布局具有复选框、文本视图和微调器。然后它将在我的用户配置文件布局文件中查看，就像在 textviews 中一样。我将它们保存到共享首选项。我想做的是检索用户从微调器中选择/保存的字符串值，将其显示在文本视图中。我怎样才能做到这一点？

我想知道如何实现这一点：

```
 tvbloodtype.setText(prefs.getInt("bloodtype",0)); 
```

任何帮助都非常感谢。谢谢。

我收到错误：

ResourcesNotFoundException：字符串资源 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:52:33.630

拥有微调器对象后，您可以调用 yourSpinner.OnItemSelectedListener() 来获取被选中的对象。然后你可以将你的项目保存在你的 TextView

```
yourSpinner.OnItemSelectedListener(new OnItemSelectedListener {

 public void onItemSelected(AdapterView <? > parentview, View v, int position, long id) {
     curPos = position;
     String selected = parentView.getItemAtPosition(position).toString();
     tvbloodtype.setText(selected);
 } 
```

});

另请参考：[如何获得 Spinner 的选定值？](https://stackoverflow.com/questions/2652414/how-do-you-get-the-selected-value-of-a-spinner-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:52:54.613

您将需要使用`String.valueOf()`或`Integer.toString()`在 TextView 中显示 Integer 。例子 ：

```
 tvbloodtype.setText(String.valueOf(prefs.getInt("bloodtype",0))); 
```

**或者**

```
tvbloodtype.setText(Integer.toString(prefs.getInt("bloodtype",0))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:54:36.453

写偏好

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor editor = prefs.edit();
editor.putBoolean(key, value);  //key="YOUR_KEY_STRING" //value = your boolean value
editor.apply(); 
```

从首选项中读取

```
Boolean yourBoolean = prefs.getBoolean("YOUR_KEY_STRING",false); //false = value, if value wasn t set 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:03:45.597

每当您将值保存到 sharedPreferences 时。

```
SharedPreferences prefs= getSharedPreferences("prf", MODE_PRIVATE);
SharedPreferences.Editor edit = prefs.edit();
edit.putString("bloodtype", spinner.getSelectedItem().toString());
edit.commit(); 
```

当你在取回

```
tvbloodtype.setText(spinner.getString("bloodtype", "")); 
```

# sql - 连接缺少值的 SQL 视图

> ID：14568937
> 
> 赞同：1
> 
> 时间：2013-01-28T18:45:41.587
> 
> 标签：sql, sql-server, database, sql-server-2005, views

我在两个单独的服务器上有两个视图。

这些视图输出名称、月份、计数

一个人（Joe 用户）可能只有 7 月、8 月的一个视图，所以它会显示如下

```
Joe User July 19
Joe User August 28 
```

下一个视图他们可能有更多

```
Joe User May 20
Joe User June 98
Joe User July 18
Joy User August 24 
```

我试图让输出显示的是这个。

```
Joe User January 0 0
Joe User February 0 0
Joe User March 0 0
Joe User April 0 0
Joe User May 20 0
Joe User June 98 0 
Joe User July 18 19
Joe User August 24 28
Joe User September 0 0
Joe User October 0 0
Joe User November 0 0
Joe User December 0 0 
```

我的问题是，即使它们没有值，我如何填充月份？然后加入我所拥有的价值观。

更新：

通过下面的示例，我得到了非常相似的结果。这是我尝试在不将名称添加到 WHERE 的情况下运行它时得到的结果。

```
Joe User April 65 518
Joe User April 87 518
Joe User April 52 518
Joe User April 3  518 
```

每月重复 64 行的表值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:47:24.803

您需要使用日期表，然后是`JOIN`您的两个表。否则，您可以像这样在查询中创建一个：

```
SELECT m.month, CASE WHEN c.ccount IS NULL THEN 0 ELSE c.ccount END AS view2,
CASE WHEN b.ccount IS NULL THEN 0 ELSE b.ccount END AS view1
FROM
(SELECT 'January' AS month
  UNION ALL
  SELECT 'February'
  UNION ALL
  SELECT 'March'
  UNION ALL
  SELECT 'April'
  UNION ALL
  SELECT 'May'
  UNION ALL
  SELECT 'June'
  UNION ALL
  SELECT 'July'
  UNION ALL
  SELECT 'August'
  UNION ALL
  SELECT 'September'
  UNION ALL
  SELECT 'November'
  UNION ALL
  SELECT 'December') m
LEFT JOIN (SELECT name, month, ccount FROM view1 WHERE name = 'Joe') b ON b.month = m.month
LEFT JOIN (SELECT name, month, ccount FROM view2 WHERE name = 'Joe') c ON c.month = m.month 
```

**结果**

```
| 月 | 视图2 | 查看1 |
-----------------------------------------
| 一月 | 0 | 0 |
| 二月 | 0 | 0 |
| 三月 | 0 | 0 |
| 四月 | 0 | 0 |
| 五月 | 20 | 0 |
| 六月 | 98 | 0 |
| 七月 | 18 | 19 |
| 八月 | 24 | 28 |
| 九月 | 0 | 0 |
| 十一月 | 0 | 0 |
| 十二月 | 0 | 0 |
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:19:42.703

首先，您必须创建链接服务器或使用`OPENROWSET`. 试试这个`OPENROWSET`。

```
;WITH Months
AS
(
    SELECT 1 m, DATENAME(mm, '20000101') MN
    UNION ALL
    SELECT m+1, DATENAME(mm, DATEADD(m, m, '20000101')) MN
    FROM Months
    WHERE m < 12
)
SELECT
   COALESCE(V1.nmae, V2.name) Name, 
   M.MN [Month], 
   ISNULL(V1.count, 0) Count1, 
   ISNULL(V2.count, 0) Count12 
FROM Months M
    LEFT JOIN ViewOnCurrentServer V1
        ON M.MN = V1.[month]
    LEFT JOIN
         OPENROWSET('SQLNCLI', 'Server=YouServerName;Trusted_Connection=yes;',
                    'SELECT name, month, count
                     FROM DBName.SchemeName.ViewOnAnotherServer') V2
       ON M.MN = V2.[month]
WHERE COALESCE(V1.nmae, V2.name) = 'Joe User' 
```

或者如果您使用链接服务器，则使用：

```
;WITH Months
AS
(
    SELECT 1 m, DATENAME(mm, '20000101') MN
    UNION ALL
    SELECT m+1, DATENAME(mm, DATEADD(m, m, '20000101')) MN
    FROM Months
    WHERE m < 12
)
SELECT
   COALESCE(V1.nmae, V2.name) Name, 
   M.MN [Month], 
   ISNULL(V1.count, 0) Count1, 
   ISNULL(V2.count, 0) Count12 
FROM Months M
    LEFT JOIN ViewOnCurrentServer V1
        ON M.MN = V1.[month]
    LEFT JOIN
         ViewOnLinkedServer V2
       ON M.MN = V2.[month]
WHERE COALESCE(V1.nmae, V2.name) = 'Joe User' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:58:45.237

```
SELECT DATENAME(mm, DATEADD(mm, number, '20010101')), 
       ISNULL(v2.[count], 0), ISNULL(v1.[count], 0)
FROM master..spt_values v LEFT JOIN view1 v1 ON DATENAME(mm, DATEADD(mm, v.number, '20010101')) = v1.[month] AND v1.name = 'Joe User'
                          LEFT JOIN view2 v2 ON DATENAME(mm, DATEADD(mm, v.number, '20010101')) = v2.[month] AND v2.name = 'Joe User'
WHERE v.type = 'P' AND v.number < 12 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/33b94/1/0)上的演示[](http://sqlfiddle.com/#!3/33b94/1/0)

 **更新

```
SELECT *
FROM
(
 SELECT v1.name
 FROM view1 v1
 UNION
 SELECT v2.name
 FROM view2 v2
 ) u CROSS APPLY (
                  SELECT DATENAME(mm, DATEADD(mm, number, '20010101')) AS [month], 
                         ISNULL(v2.[count], 0) AS [count1], ISNULL(v1.[count], 0) AS [count2]                       
                  FROM master..spt_values v 
                    LEFT JOIN view1 v1 ON DATENAME(mm, DATEADD(mm, v.number, '20010101')) = v1.[month] AND v1.name = u.name
                    LEFT JOIN view2 v2 ON DATENAME(mm, DATEADD(mm, v.number, '20010101')) = v2.[month] AND v2.name = u.name
                  WHERE v.type = 'P' AND v.number < 12
                  ) o 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/33b94/2/0)上的新演示[](http://sqlfiddle.com/#!3/33b94/2/0)**

# mongodb - Count Like of Comment

> ID：14568942
> 
> 赞同：-6
> 
> 时间：2013-01-28T18:46:01.033
> 
> 标签：mongodb

```
collection Status:
    [
        {   
            _id: '1',
            StatusName: '....', 
            Comments: [
                        {
                            id_: '2',
                            CommentName: '.....',
                            Likes: ['user1', 'user2', 'user3']
                        },
                        {
                            id_: '3',
                            CommentName: '.....',
                            Likes: ['user2', 'user3']
                        }
                    ]
        },
        {   
            _id: '3',
            StatusName: '....', 
            Comments: [
                        {
                            id_: '4',
                            CommentName: '.....',
                            Likes: ['user1', 'user2', 'user3', 'user4']
                        },
                        {
                            id_: '5',
                            CommentName: '.....',
                            Likes: ['user1', 'user3']
                        }
                    ]
        }

    ]

```

I want count **Like** of Comment _id = '2' and Status _id: '1'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:19:15.460

一种方法是使用聚合框架：

```
db.status.aggregate(
[
  {$match : {_id : "1", }}, 
  {$unwind: "$Comments"}, 
  {$match: {"Comments.id_": "2"}},
  {$unwind: "$Comments.Likes"},
  {$group: {_id: {"statusId":"$_id","CommentId":"$Comments.id_"}, 
            "likes": {$sum:1}}
  }
] ) 
```

# apache - How can I "mask" the url using .htaccess in Apache

> ID：14568947
> 
> 赞同：1
> 
> 时间：2013-01-28T18:46:16.670
> 
> 标签：apache, .htaccess

I've been playing around with this for a while, but I'm still not sure if this is even possible.

I want a url to point to a different location on my webserver, but not change the url in the address bar.

Ex:

**tp.test.com would access test.com/tp/hi**

and subsequent urls:

**tp.test.com/foo would point to test.com/tp/hi/foo**

Ive been trying to achieve this using RewriteCond and RewriteRule and playing around with the flags for RewriteRule but haven't had any success at all.

**Edit:** This is what I had tried...

`RewriteRule ^tp.test.com/blog/$ http://tp.test.com/tp/hi/$1 [r=301,L]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:23:49.883

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/tp/hi%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/tp/hi%{REQUEST_URI} -d [OR]
RewriteCond %{DOCUMENT_ROOT}/tp/hi%{REQUEST_URI} -l
RewriteRule ^(.*)$ /tp/hi/$1 [L] 
```

* * *

编辑：

由于您必须明确说明您在 URI 中*实际*需要的内容，因此上述方法行不通。

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/blog/(.*)$
RewriteCond %{DOCUMENT_ROOT}/tp/hi/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/tp/hi/%1 -d [OR]
RewriteCond %{DOCUMENT_ROOT}/tp/hi/%1 -l
RewriteRule ^blog/(.*)$ /tp/hi/$1 [L] 
```

# solr - Solr error in entity query with double-quotes

> ID：14568952
> 
> 赞同：3
> 
> 时间：2013-01-28T18:46:32.133
> 
> 标签：solr, double-quotes

I have connected my oracle schema to solr. The tables and columns in my oracle schema were created with double-quotes(") and I am getting errors when using them below in the entity query portion of dataconfig.xml:

```
<entity name="itemsum" query="select * from Bug b where b."item" = 8 " > 
```

The error I am getting is:

```
Caused by: org.xml.sax.SAXParseException: Element type "entity" must be followed by either attribute specifications, ">" or "/>". 
```

I know it is because of the double-quote but I cannot recreate my table and columns. Any ideas would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:31:54.993

您是否尝试使用 '\' 转义引号？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:07:56.620

您可以使用单引号将 XML 中的属性值括起来：

```
<entity name="itemsum" query='select * from Bug b where b."item" = 8 ' > 
```

或者，您可以将引号字符转义为 "

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T00:11:15.037

尝试转义这些字符...您可以使用[此页面](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)查看如何转义 xml 中的字符 .. 这应该会有所帮助

# matlab - vertical integral projection to separate every teeth

> ID：14568957
> 
> 赞同：0
> 
> 时间：2013-01-28T18:46:43.530
> 
> 标签：matlab

I'm trying to separate every single teeth in radiograph image. First, at upper jaw, I want to separate every single teeth.

I have the image of upper jaw. And then I make it into binary(thresholding) image, and I make the plot of the image matrix(m n) which I make the mean of the colomns : this the plot coding :

```
[m1, n1]=size(maxila); %maxila is the name of upper jaw image
Po1=0:1:n1-1;
Vmean1=mean(maxila,1);
Figure
plot(Po1,vmean1); 
```

Okay, after that the plot show up, and I want to get the every mean point which mean go to zero(0) and plot it, and that will be the plot to separate the teeth.. Some help please... Sincerely

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:49:58.930

怎么样

```
sep = find( mean( maxila, 1 ) == 0 ); % gives you the column indices of seperations 
```

# mysql - SQL many to many query returns false

> ID：14568961
> 
> 赞同：2
> 
> 时间：2013-01-28T18:46:52.940
> 
> 标签：mysql, sql, relational-database

I am trying to figure out how to do many to many sql queries and have hit an issue.

My db structure is:

```
projects_users_roles: project_id, user_id, role_id
user_roles: id, name
projects: id, name, user_id 
```

So in my query I would like to select all projects for user_id=23 and what role name they have been assigned on that project in projects_users_roles

I thought I had it but its returning FALSE

```
$query = "
SELECT p.name AS project_name
, r.name AS role_name
FROM projects AS p
JOIN projects_users_roles AS a
   ON a.project_id = p.id
JOIN users_roles AS role
   ON role.id = a.role_id WHERE a.user_id = 23
";
$result = mysql_query($query);
var_dump($result); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:50:36.823

难道`r`是从来没有定义别名？您的代码示例显示`r.name`在`SELECT`而不是`role.name`.

```
$query = "
SELECT p.name AS project_name
, role.name AS role_name
FROM projects AS p
JOIN projects_users_roles AS a
   ON a.project_id = p.id
JOIN users_roles AS role
   ON role.id = a.role_id WHERE a.user_id = 23
";
$result = mysql_query($query);
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:51:28.447

您正在使用查询中不存在的别名，`r`：

```
SELECT  p.name AS project_name, 
        r.name AS role_name
FROM projects AS p
INNER JOIN projects_users_roles AS a
   ON a.project_id = p.id
INNER JOIN users_roles AS r
   ON r.id = a.role_id 
WHERE a.user_id = 23 
```

而且，也许`role`是 MySQL 上的保留字。

# regex - perl 正则表达式仅在文本前面查找模式

> ID：14568970
> 
> 赞同：3
> 
> 时间：2013-01-28T18:47:23.917
> 
> 标签：regex, perl

假设有这样的文本：

```
|-SAMPLE-D2
|---SAMPLE-D1
|---SAMPLE3 
```

我想计算|之后的“-”个数。我试图通过在 perl 中使用以下正则表达式来解析它

```
$count=()= /-/g; 
```

但这是有问题的，因为前两个在文本的其他地方以及前面都有“-”。我应该如何形成我的正则表达式或在 perl 中使用其他函数来获取“|”之后的“-”数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:51:26.453

正则表达式匹配开始后的破折号`|`：
`/^\|([\-]*)/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:04:08.707

要计算前面没有字母的破折号，请使用[否定的后视断言](http://search.cpan.org/perldoc?perlretut#Looking_ahead_and_looking_behind)。

```
$count = () = /(?<!\w)-/g 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:36:31.347

如果垂直线只出现在开头，您可以获得重复减号的字符串：

```
my ($match) = $txt =~ /^\|(-*)/; 
```

$match 周围的括号导致将正则表达式的捕获部分放入其中

然后使用

```
my $minus_count = length($match || ''); 
```

这

> || '')

少量

如果上面的正则表达式根本找不到匹配项，则初始化 $match，以停止对未初始化变量的长度抱怨（如果您有警告）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T19:00:59.770

不确定您是否可以直接计算正则表达式，但您可以提取捕获组并对其字符串长度进行简单的算术运算：

```
#!/usr/bin/perl
use warnings;
my $inFile = $ARGV[0];
open(FILEHANDLE, "<", $inFile) || die("Could not open file ".$inFile);
my @fileLines = <FILEHANDLE>;
my $lineNo = 0;
my $rslt;

foreach my $line(@fileLines) {
    chomp($line);
    $line =~ s/^\s+//;
    $line =~ s/\s+$//;
    $lineNo++;
    print "\n".$lineNo." = <".$line.">";
    if($line =~ m/^\|-+(.+)/) {
        my $text = $1;
        print "\n\ttext = <".$text.">";
        my $minCnt = length($line) - length($text) - 1;
        print "\n\tminus count = <".$minCnt.">";
    }
}
close(FILEHANDLE); 
```

# jquery - 当我使用 Openlayers 打开它时，如何让 Jquery Mobile 弹出窗口定位在标记上？

> ID：14568973
> 
> 赞同：0
> 
> 时间：2013-01-28T18:47:26.023
> 
> 标签：jquery, jquery-mobile, openlayers

下面是我的代码。我清理并修改了 addMarkers 函数，所以我知道它在这个示例中不起作用，只是想缩短它以显示我在做什么。

我很难弄清楚如何设置弹出窗口的位置。我认为 positionto: event.target 会起作用，但它没有返回目标中的任何内容。有任何想法吗？当您单击地图上的标记时，我希望它像大多数项目一样弹出。

```
 function addMarkers(json){
        for (var i=0;i<json.records.record.length;i++){

            // Make Point
            point = new OpenLayers.Geometry.Point(lonLat.lon, lonLat.lat);
            feature = new OpenLayers.Feature.Vector(point);
            layer.addFeatures(feature);
        }
        map.addLayer(layer[0]);
    }
}

var selectControl = new OpenLayers.Control.SelectFeature(
    [vectorlayer1, vectorlayer2],
    {
        clickout: true, toggle: false,
        multiple: false, hover: false
    }
);

vectorlayer1.events.on({
    "featureselected": popup,
    "featureunselected": function(e) {
        alert("unselected feature "+e.feature.id+" on vectorlayer 1");
    }
});

 function popup(event){
    $("#popup").popup('open', {
        positionTo: event.target
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:39:04.113

来自[Jquery mobile docs](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/options.html)：'positionTo' 参数必须是*字符串*（'origin' 或 'window'）或 JQuery 选择器。在这种情况下 $(event.target) 将起作用。

# python - Python中文件中的加扰行

> ID：14568975
> 
> 赞同：0
> 
> 时间：2013-01-28T18:47:30.973
> 
> 标签：python, string, scramble

我有一个包含大字符串的文件，我需要对它们中的每一个进行加扰。这是我的代码的一部分，它进行加扰。

```
 for line in filein:
        zzz = line.strip('\n').split()
        yyy = list(zzz)
        random.shuffle(yyy)
        zzzz = ''.join(yyy)
        fout.write(zzzz + '\n') 
```

我在网上找到了类似的东西，所以尝试在这里使用它。除了原始文件和应该包含乱码的文件......是相同的。

但是，如果我说复制其中一行，然后直接在 python 解释器中执行此操作...

```
>>>import random
>>>zzz = "..." ###(one of my large strings would go here, for sake of space didn't put it in)
>>>yyy = list(zzz)
>>>random.shuffle(yyy)
>>>zzzz = ''.join(yyy)
>>>zzzz 
```

打印出来的字符串是我原始字符串的加扰版本。我是否忘记做一些非常简单和愚蠢的事情？还是我错过了一些重要的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:49:04.193

`line.split`返回一个长度只有 1 个元素的列表（行本身），因为您的数据可能没有穿插其中的空格。然后你把它变成一个列表（除了做一个浅拷贝之外什么都不做），所以你最终会洗牌一个长度为 1 的列表——这会导致一个不那么随机的结果:-)。

解决方法是摆脱`split`：

```
for line in filein:
    zzz = line.rstrip('\n')
    yyy = list(zzz)
    random.shuffle(yyy)
    zzzz = ''.join(yyy)
    fout.write(zzzz + '\n') 
```

# windows-8 - 在 Windows 8 Metro 应用程序中异步加载图像

> ID：14568980
> 
> 赞同：0
> 
> 时间：2013-01-28T18:47:52.067
> 
> 标签：windows-8

我是 Windows 8 应用程序开发的新手。在我的应用程序中，我需要显示`GridView`带有图像和标题的图像。我从服务器获取的图像 URL 和标题作为 XML 数据。图像从给定的 URL 下载并存储在本地目录中。现在，当下载图像时，我想通知`GridView`并使用下载的图像更新特定的图像视图。我将标题和本地图像 URI 存储在`ObservableCollection`. 的数据源`GridView`绑定到 this `ObservableCollection`，因此一旦下载了 XML 数据，我就可以通过 ObservableCollection 更新标题。但是我不知道下载后如何更新图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:29:00.457

假设您的图像保存在本地数据文件夹 ( `ApplicationData.Current.LocalFolder`) - 您可以这样创建一个新的`BitmapImage`：

```
var imagePathInLocalDataFolder = ?
var imageUri = new Uri("ms-appdata:///local/" + imagePathInLocalDataFolder, UriKind.Absolute);
var bitmapImage = new BitmapImage(new Uri(imageUri)); 
```

然后，您可以将`bitmapImage`变量值分配给您绑定到的属性`Image.Source`- 并且您应该会看到您的图像。

# ruby-on-rails - Rails 返回 JSON 序列化属性 with_indifferent_access

> ID：14568983
> 
> 赞同：20
> 
> 时间：2013-01-28T18:48:08.927
> 
> 标签：ruby-on-rails, ruby

我以前有：

```
serialize :params, JSON 
```

但这会返回 JSON 并将哈希键符号转换为字符串。我想使用符号来引用散列，这在使用散列时最常见。我喂它符号，Rails 返回字符串。为了避免这种情况，我创建了自己的 getter/setter。setter 很简单（JSON 编码），getter 是：

```
 def params
    read_attribute(:params) || JSON.parse(read_attribute(:params).to_json).with_indifferent_access
  end 
```

我无法`params`直接引用，因为这会导致循环，所以我正在使用`read_attribute`，现在我的哈希键可以用符号或字符串引用。但是，这不会更新哈希：

```
model.params.merge!(test: 'test')
puts model.params # => returns default params without merge 
```

这让我认为哈希被副本引用。

我的问题是双重的。我可以扩展活动记录 JSON 序列化以返回无关的访问哈希（或不将符号转换为字符串），并且仍然可以像上面那样通过合并进行哈希工作吗？如果没有，我能做些什么来改进我的吸气剂，这样才能`model.params.merge!`奏效？

我希望有一些类似（有效）的东西：

```
 def params_merge!(hash)
    write_attribute(:params, read_attribute(:params).merge(hash))
  end

  # usage: model.params_merge!(test: 'test') 
```

更好的是，只需让 Rails 返回一个访问无关紧要的哈希，或者不将我的符号转换为字符串！感谢任何帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T19:12:14.467

use the built-in `serialize` method :

```
class Whatever < ActiveRecord::Base
 serialize :params, HashWithIndifferentAccess
end 
```

see [ActiveRecord::Base docs on serialization](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Saving+arrays%2C+hashes%2C+and+other+non-mappable+objects+in+text+columns) for more info.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-19T02:26:40.677

根据@fguillen 的要求，发表评论作为答案......警告：我通常不是Rubyist......所以这可能不是惯用的或有效的。从功能上讲，它让我得到了我想要的。似乎在 Rails 3.2 和 4.0 中工作......

在`application_helper.rb`：

```
module ApplicationHelper
  class JSONWithIndifferentAccess
    def self.load(str)
      obj = HashWithIndifferentAccess.new(JSON.load(str))
      #...or simply: obj = JSON.load(str, nil, symbolize_names:true)
      obj.freeze #i also want it set all or nothing, not piecemeal; ymmv
      obj
    end
    def self.dump(obj)
      JSON.dump(obj)
    end
  end
end 
```

在我的模型中，我有一个名为 的字段`rule_spec`，序列化为一个`text`字段：

```
serialize :rule_spec, ApplicationHelper::JSONWithIndifferentAccess 
```

最终，我意识到我只想要符号，而不是冷漠的访问，但通过调整加载方法，您可以获得任何一种行为。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-13T15:22:42.410

我最终使用了 bimsapi 解决方案的变体，您***不仅***可以使用简单的非嵌套 JSON ，还可以使用*任何*JSON。

一旦加载...

```
module JsonHelper

  class JsonWithIndifferentAccess
    def self.load(str)
      self.indifferent_access JSON.load(str)
    end

    def self.dump(obj)
      JSON.dump(obj)
    end

    private

      def self.indifferent_access(obj)
        if obj.is_a? Array
          obj.map!{|o| self.indifferent_access(o)}
        elsif obj.is_a? Hash
          obj.with_indifferent_access
        else
          obj
        end
      end
  end

end 
```

然后而不是打电话

```
JSON.load(http_response) 
```

你只要打电话

```
JsonHelper::JsonWithIndifferentAccess.load(http_response) 
```

做同样的事情，但所有嵌套的哈希都是无差别的访问。

应该很好地为您服务，但在将其作为所有解析的默认方法之前请考虑一下，因为大量 JSON 有效负载将在本机 JSON 解析器之上添加重要的 ruby​​ 操作，该解析器在 C 中进行了优化，并且更全面地为性能而设计。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-01T04:21:45.700

使用`HashWithIndifferentAccess`很好，但它仍然像哈希一样，它只能在数据库中序列化为 YAML。

我的偏好是使用 Postgres 9.3 及更高版本，在 Postgres 中使用 json 列类型。这意味着当读取表时，ActiveRecord 会直接从 Postgres 中获取一个 Hash。

```
create_table "gadgets" do |t|
  t.json "info"
end 
```

ActiveRecord`serialize`要求您为它提供一个类，该类既负责读取/写入数据*，*又负责对其进行序列化/反序列化。

因此，您可以通过继承`HashWithIndifferentAccess`或我的偏好来创建一个完成这项工作的对象`Hashie::Mash`。然后将序列化实现为`dump`和`load`类方法。

```
class HashieMashStoredAsJson < Hashie::Mash
  def self.dump(obj)
    ActiveSupport::JSON.encode(obj.to_h)
  end

  def self.load(raw_hash)
    new(raw_hash || {}) 
  end
end 
```

在您的模型中，您可以指定此类进行序列化。

```
class Gadget < ActiveRecord::Base
  serialize :info, HashieMashStoredAsJson

  # This allows the field to be set as a Hash or anything compatible with it.
  def info=(new_value)
    self[:info] = HashieMashStoredAsJson.new new_value
  end
end 
```

如果在 Postgres 中不使用 json 列类型，实现会略有变化

此处的完整代码和文档：[使用 JSON 列类型](https://gist.github.com/RobinDaugherty/5e7bc2a6e2369a29c77c)和[使用字符串列类型](https://gist.github.com/RobinDaugherty/bafe6716b984f8bcc87e)。

# wpf - 在运行时刷新组合框项目 wpf

> ID：14568984
> 
> 赞同：1
> 
> 时间：2013-01-28T18:48:12.213
> 
> 标签：wpf, combobox

我想要一个包含开放串行端口作为项目的组合框。但是当串口修改时它会自动更新。

我的方法是这样的：

1.  在 Xaml 中创建一个组合框，如下所示：

    ```
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="87,35,0,0" Name="comboBox1" VerticalAlignment="Top" Width="147" ContextMenuOpening="comboBox1_ContextMenuOpening" /> 
    ```

2.  创建一个循环槽端口并将它们添加到组合框的方法：

    ```
    public string[] portsManual;

    public void adaugaPorturi()
    {
        if (comboBox1.Items.Count > 0)
        {
            comboBox1.Items.RemoveAt(0);
        }
        comboBox1.Items.Add("Select port");
        comboBox1.SelectedItem = "Select port";
        portsManual = SerialPort.GetPortNames();
        foreach (string port in portsManual)
        {
            comboBox1.Items.Add(port);
        }
        comboBox1.Items.Refresh();
        Array.Clear(portsManual, 0, portsManual.Length);
    } 
    ```

3.  在 window.load 调用这个方法（这样它可以有一些东西 - 端口随即打开）并在 ContextMenuOpening 事件中调用它（每当我单击组合框来选择一个项目 - 一个端口，刷新）

注意：我在开始时清除了组合框项目（如果有的话），对于字符串数组也是如此，但它没有更新，这些项目仍然是该方法第一次运行时的项目！

我尝试过：ObservableCollection、字符串和数组都没有运气。我在这个网站上找到的最多信息。我在想，因为只有几个端口，我真的不需要集合或列表。我只是直接添加项目。

顺便说一句，管理员可以编辑这篇文章吗？我不确定文本格式是否良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:25:27.107

首先，您可能应该使用 MVVM 和数据绑定，而不是直接从视图的代码隐藏中查询串行端口。

其次，您似乎使用了错误的事件，如果您希望每次菜单打开时都刷新，您应该使用 DropDownOpened 事件

```
<ComboBox Height="23" HorizontalAlignment="Left" Margin="87,35,0,0" Name="comboBox1" VerticalAlignment="Top" Width="147" DropDownOpened="comboBox1_DropDownOpened" /> 
```

并在你的代码隐藏中尝试这个

```
public void InitPorts()
{
    RefreshPorts();
    comboBox1.SelectedItem = "Select port";
}
public void RefreshPorts()
{
    comboBox1.Items.Clear();
    comboBox1.Items.Add("Select port");
    foreach (var port in SerialPort.GetPortNames())
        comboBox1.Items.Add(port);
}
private void MainWindow_OnLoaded(object sender, RoutedEventArgs e)
{
    InitPorts();
}
private void ComboBox1_OnDropDownOpened(object sender, EventArgs e)
{
    RefreshPorts();
} 
```

# c - C 和 Windows Vista 中的 Dos.h + Pc.h

> ID：14568986
> 
> 赞同：0
> 
> 时间：2013-01-28T18:48:24.630
> 
> 标签：c, visual-studio, header-files, mesa, pelles-c

我目前正在寻找与 Mesa3D 一起使用 OpenGL 创建软件渲染图形应用程序。

我现在正在寻找一些关于如何使用它的教程，其中许多都是用 DOS 或旧版本的 Windows 编写的。当我运行 Vista 时，我似乎没有我需要的正确文件。

我正在使用的 Mesa3D 教程`outportb()`和其他一些我似乎无法正常工作的命令。环顾四周后，我发现您需要 2 个包含文件：

*   DOS.h
*   个人计算机

这些似乎在 Visual Studio 2010 (Express) 附带的 Window SDK 中找不到，甚至在我目前拥有的 2005 (Professional) 的旧版本中也找不到。

它们似乎可以在**DJGPP**编译器中找到，该编译器仅在 DOS 下工作，在 Vista 中不受支持，即使在兼容模式下也是如此。运行 DosBox 仍然无法使其正常工作。

我想知道 - 是否可能有新功能替换`outportb`或者我可以将这些 DJGPP 文件与我的 C/C++ 编译器与 VS 或 PellesC 一起使用（我发现它更适合纯 C 程序）？

此外，我在 VS 和 PellesC 中拥有的**conio.h**包含文件没有该`textmode()`功能，但 DJGPP 版本有。

如果有人可以帮助让 DJGPP 在 Vista 上工作或允许我使用 VS 或 PellesC 的 DJGPP 中的 dos、pc 和 conio.h 文件，那将是一个很大的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:21:49.547

`outportb`现代 Windows 环境中的程序无法使用类似功能的低级硬件访问权限。这些功能是为特别受信任的代码（操作系统内部和驱动程序）保留的。您需要通过更高级别的 API 或驱动程序才能访问相同的功能。

Mesa3D 网站[为 Windows 开发人员提供了自述文件，](http://www.mesa3d.org/README.WIN32)其中包含有关您需要安装和配置的信息。它还引用了一些官方演示代码，您可以将其用作项目的基础。Mesa3D[网站](http://www.mesa3d.org/)还有[一个充满演示程序的存储库，这些程序](http://cgit.freedesktop.org/mesa/demos)可能比您提到的过时教程提供更好的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:01:13.617

端口操作函数在 Win32 程序中根本不起作用。要么使用 Win32 API 进行 I/O（包括渲染），要么坚持使用 DOS 并在 DOS 或任何你能找到的 DOS 模拟器中运行你的程序。Vista 和更高版本的 Windows 不会直接运行大多数 DOS 程序，因为对 DOS 的支持要么被严重减少，要么被完全删除（例如在 64 位 Windows 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:50:33.497

不要在 vista 和更高版本上使用 16 位编译器。而是使用 DOSBOX 来运行您的程序。

# php - 可以实现empty()的对象处理

> ID：14568991
> 
> 赞同：5
> 
> 时间：2013-01-28T18:48:44.483
> 
> 标签：php, interface, is-empty

我知道我们可以实现 PHP 的可数接口来确定函数 count() 的工作方式以及使用像数组这样的对象的迭代器接口。

是否可以实现某种接口（或任何其他方式）来改变对象上 empty() 的行为？

本质上，这就是我希望能够做到的：

```
<?php
class test {
    function __empty() {
        if (count($this->data) > 0) {
            return false;
        }
        return true;
    }
} 
```

很高兴拥有！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:54:06.740

不，那里没有。迭代器行为和计数行为对对象没有意义；这就是为什么你可以覆盖它们。`empty()`应用于对象的默认行为**有**一个含义：*它是对象的实例还是 NULL？*; 这就是为什么你**不能**覆盖它。

您可以改为：

*   在被调用的对象内创建一个方法`isEmpty()`并在那里实现它
*   创建一个全局函数`emptyObj()`并在那里实现它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T18:54:10.103

不，PHP 没有它。[您可以在wiki.php.net](https://wiki.php.net/rfc)上请求此类功能。与此同时，您可以自己滚动。

```
interface Empty_Checkable{
   function isempty();
}

class test implements Empty_Checkable{
    function isempty() {
        if (count($this->data) > 0) {
            return false;
        }
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T19:48:57.450

直接在对象上是不可能的。

如果您需要这样做，我建议您实现`Countable`接口，然后调用而不是`empty($foo)`调用`count($foo) == 0`...

但是，对于属性，可以使用两种魔术方法的组合：`__isset`和`__get`. 例如：

```
class Foo {
    protected $bar = false;
    protected $baz = true;
    public function __get($key) {
        return $this->$key;
    }
    public function __isset($key) {
        return isset($this->$key);
    }
} 
```

这导致：

```
empty($foo->abc); // true, isset returns false
empty($foo->bar); // true, isset returns true, but get returns false value
empty($foo->baz); // false, isset returns true, and get returns a true value 
```

所以不，使用单个方法处理程序是不可能的，但是结合两种魔术方法，它可以正常工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-19T12:45:56.037

可以实现 Countable

```
class MyCollection extends stdClass implements Serializable, ArrayAccess, Countable, Iterator, JsonSerializable
{
    public function count() {
        return count($this->array);
    }
} 
```

并使用 !count() 而不是 empty() 之类的

```
if (!count($myList)) {
    echo "List is empty!";
} 
```

# javascript - 如何获取范围之外定义的变量？

> ID：14568992
> 
> 赞同：0
> 
> 时间：2013-01-28T18:48:44.567
> 
> 标签：javascript, html, ajax

有什么方法可以解决这个问题，以便我可以在 microAjax 函数的范围之外获取变量？

我希望 latlng 在 microAjax 之外采用 ipaddress 的值。

```
var latlng = microAjax("php/latlng.php", function(ipaddress) {
            console.log(ipaddress);
            return ipaddress;
        });

        console.log(latlng); 
```

我也尝试过这样的事情：

```
var lat;
var lng;
microAjax("php/latlng.php", function(ipaddress) {
            var arrayOfLocation = ipaddress.split(" ");
            lat = parseFloat(arrayOfLocation[0]);
            lng = parseFloat(arrayOfLocation[1]);
            console.log(ipaddress);
        });

        console.log(lat);
        console.log(lng); 
```

但在这两种情况下，函数外部的变量都是未定义的。如何从 microAjax 定义变量，但在其范围之外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:51:17.007

您的问题是异步调用，而不是范围。

在第二个示例中输出 lat 和 lng 后，ajax 就完成了。

在 jquery ajax 中，参数 async 修复了这个问题。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) （如果您使用的是 jquery）

# java - 使用java NodeList合并xml文件

> ID：14568995
> 
> 赞同：8
> 
> 时间：2013-01-28T18:49:00.793
> 
> 标签：java, xml, parsing, merge, nodelist

我正在尝试合并两个 xml 文件，如下所示，但我无法获得所需的输出，请帮助我，谢谢

Java代码：

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();   
domFactory.setIgnoringComments(true);  
DocumentBuilder builder = domFactory.newDocumentBuilder();   
Document doc = builder.parse(new File("file1.xml"));   
Document doc1 = builder.parse(new File("file2.xml"));   

NodeList nodes = doc.getElementsByTagName("staff");  

NodeList nodes1 = doc1.getElementsByTagName("staff");

for(int i=0;i<nodes1.getLength();i=i+1){  

Node n= (Node) doc.importNode(nodes1.item(i), true);  
nodes.item(i).getParentNode().appendChild(n);

}  

Transformer transformer = TransformerFactory.newInstance().newTransformer();  
transformer.setOutputProperty(OutputKeys.INDENT, "yes");  

StreamResult result = new StreamResult(new StringWriter());  
DOMSource source = new DOMSource(doc);  
transformer.transform(source, result);  
Writer output = null;
output = new BufferedWriter(new FileWriter("mergedxml.xml"));

String xmlOutput = result.getWriter().toString();  
output.write(xmlOutput);
output.close();
System.out.println("merge complete"); 
```

文件1.xml

```
 <company>
        <staff>
            <name>john</name>
            <phone>465456433</phone>
            <email>gmail1</email>
        </staff>
    </company> 
```

文件2.xml

```
 <company>
        <staff>
            <area>area1</area>
            <city>city1</city>
        </staff>
    </company> 
```

电流输出：

```
 <company>
        <staff>
            <name>john</name>
            <phone>465456433</phone>
            <email>gmail1</email>
        </staff>
        <staff>
            <area>area1</area>
            <city>city1</city>
        </staff>
    </company> 
```

预期输出：

```
 <company>
        <staff>
            <name>john</name>
            <phone>465456433</phone>
            <email>gmail1</email>
            <area>area1</area>
            <city>city1</city>
        </staff>
    </company> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T21:25:18.463

为了自己做。您应该执行以下操作：

```
public static void mergeXML(){

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = null;
    Document doc = null;
    Document doc2 = null;

    try {
            db = dbf.newDocumentBuilder();
            doc = db.parse(new File("D:\\Loic_Workspace\\Test2\\res\\test.xml"));
            doc2 = db.parse(new File("D:\\Loic_Workspace\\Test2\\res\\test2.xml"));
            NodeList ndListFirstFile = doc.getElementsByTagName("staff");

            Node nodeArea = doc.importNode(doc2.getElementsByTagName("area").item(0), true);
            Node nodeCity = doc.importNode(doc2.getElementsByTagName("city").item(0), true);
            ndListFirstFile.item(0).appendChild(nodeArea);
            ndListFirstFile.item(0).appendChild(nodeCity);

          TransformerFactory tFactory = TransformerFactory.newInstance();
          Transformer transformer = tFactory.newTransformer();
          transformer.setOutputProperty(OutputKeys.INDENT, "yes");  

          DOMSource source = new DOMSource(doc);
          StreamResult result = new StreamResult(new StringWriter());
          transformer.transform(source, result); 

          Writer output = new BufferedWriter(new FileWriter("D:\\Loic_Workspace\\Test2\\res\\testFinal.xml"));
          String xmlOutput = result.getWriter().toString();  
          output.write(xmlOutput);
          output.close();

    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (TransformerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

testFinal.xml 的最终输出：

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<company>
 <staff>
 <name>john</name>
 <phone>465456433</phone>
 <email>gmail1</email>
 <area>area1</area>
<city>city1</city>
</staff>
 </company> 
```

如你所愿;-)

希望能帮助到你，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T13:29:10.180

此解决方案适用于您需要在合并之前迭代和验证某些内容的文件。

文件 1.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <reactions>
        <reaction>
            <ID>07402</ID>
            <type>irreversible</type>
            <substrate>15666</substrate>
            <product>07756</product>
        </reaction>
        <reaction>
    <ID>03063</ID>
    <type>irreversible</type>
    <substrate>00916</substrate>
    <product>04712</product>
</reaction> 
```

文件2.xml：

```
 <?xml version="1.0" encoding="UTF-8"?><reactions>
    <reaction>
        <ID>00001</ID>
        <reactionName>polyphosphate polyphosphohydrolase</reactionName>
        <reactionDescription> Polyphosphate + n H2O &lt;=&gt; (n+1) Oligophosphate</reactionDescription>
    </reaction>
    <reaction>
        <ID>00002</ID>
        <reactionName>Reduced ferredoxin:dinitrogen oxidoreductase (ATP-hydrolysing)</reactionName>
        <reactionDescription> 16 ATP + 16 H2O + 8 Reduced ferredoxin &lt;=&gt; 8 e- + 16 Orthophosphate + 16 ADP + 8 Oxidized ferredoxin</reactionDescription>
    </reaction>    
    <reaction>
        <ID>03063</ID>
        <reactionName>cephalosporin-C:2-oxoglutarate aminotransferase</reactionName>
        <reactionDescription> Cephalosporin C + 2-Oxoglutarate &lt;=&gt; (7R)-7-(5-Carboxy-5-oxopentanoyl)aminocephalosporinate + D-Glutamate</reactionDescription>
    </reaction>
    <reaction>
        <ID>07402</ID>
        <reactionName>(7R)-7-(4-carboxybutanamido)cephalosporanate amidohydrolase</reactionName>
        <reactionDescription> (7R)-7-(4-Carboxybutanamido)cephalosporanate + H2O &lt;=&gt; 7-Aminocephalosporanic acid + Glutarate</reactionDescription>
    </reaction>  
</reactions> 
```

结果.xml

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<reactions>
    <reaction>
        <ID>07402</ID>
        <type>irreversible</type>
        <substrate>15666</substrate>
        <product>07756</product>
    <reactionName>(7R)-7-(4-carboxybutanamido)cephalosporanate amidohydrolase</reactionName>
<reactionDescription> (7R)-7-(4-Carboxybutanamido)cephalosporanate + H2O &lt;=&gt; 7-Aminocephalosporanic acid + Glutarate</reactionDescription>
</reaction>
    <reaction>
        <ID>03063</ID>
        <type>irreversible</type>
        <substrate>00916</substrate>
        <product>04712</product>
    <reactionName>cephalosporin-C:2-oxoglutarate aminotransferase</reactionName>
<reactionDescription> Cephalosporin C + 2-Oxoglutarate &lt;=&gt; (7R)-7-(5-Carboxy-5-oxopentanoyl)aminocephalosporinate + D-Glutamate</reactionDescription>
</reaction>
</reactions> 
```

执行此操作的 Java 程序：

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.StringWriter;
import java.io.Writer;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class MergeXML {

    public static void main(String[] args) {
        MergeXML m = new MergeXML();
        try {
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

            DocumentBuilder db;

            db = dbf.newDocumentBuilder();

            Document secondaryMetabolismXML = db
                    .parse(new File("/home/bioinfo/workspace/teste/src/file1.xml"));
            Document generalMetabolismXML = db
                    .parse(new File("/home/bioinfo/workspace/teste/src/file2.xml"));

            NodeList secondaryReactions = secondaryMetabolismXML.getElementsByTagName("reaction");
            NodeList generalReactions = generalMetabolismXML.getElementsByTagName("reaction");

            for (int s = 0; s < secondaryReactions.getLength(); s++) {
                Node secondaryReaction = secondaryReactions.item(s);
                for (int g = 0; g < generalReactions.getLength(); g++) {
                    Node generalReaction = generalReactions.item(g);
                    if (getChildrenByNodeName(secondaryReaction, "ID").getTextContent()
                            .equals(getChildrenByNodeName(generalReaction, "ID").getTextContent())) {
                        if (getChildrenByNodeName(generalReaction, "reactionName") != null) {
                            secondaryReaction.appendChild(secondaryMetabolismXML
                                    .importNode(getChildrenByNodeName(generalReaction, "reactionName"), true));
                        }
                        if (getChildrenByNodeName(generalReaction, "reactionAlternativeName") != null) {
                            secondaryReaction.appendChild(secondaryMetabolismXML.importNode(
                                    getChildrenByNodeName(generalReaction, "reactionAlternativeName"), true));
                        }
                        if (getChildrenByNodeName(generalReaction, "reactionDescription") != null) {
                            secondaryReaction.appendChild(secondaryMetabolismXML
                                    .importNode(getChildrenByNodeName(generalReaction, "reactionDescription"), true));
                        }
                    }
                }
            }
            TransformerFactory tFactory = TransformerFactory.newInstance();
            Transformer transformer = tFactory.newTransformer();
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");

            DOMSource source = new DOMSource(secondaryMetabolismXML);
            StreamResult result = new StreamResult(new StringWriter());
            transformer.transform(source, result);

            Writer output = new BufferedWriter(
                    new FileWriter("/home/bioinfo/workspace/teste/src/Result.xml"));
            String xmlOutput = result.getWriter().toString();
            output.write(xmlOutput);
            output.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    /**
     * Returns a node child when you have a match with a given node name
     * 
     * @param node
     * @param nodeName
     * @return
     */
    public static Node getChildrenByNodeName(Node node, String nodeName) {
        for (Node childNode = node.getFirstChild(); childNode != null;) {
            Node nextChild = childNode.getNextSibling();
            if (childNode.getNodeName().equalsIgnoreCase(nodeName)) {
                return childNode;
            }
            childNode = nextChild;
        }
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:36:33.187

问题是，您想将子元素附加到“staff”元素，但您实际上要做的是：

```
nodes.item(i).getParentNode().appendChild(n); 
```

这意味着您正在寻找列表的“员工”节点之一的父节点，并且该节点是“公司”。因此，您将一个新的“员工”节点（从 doc1 导入的节点）附加到 doc 的“公司”节点

现在，您要做的是遍历 doc1 的“staff”子节点，并将它们一一附加到 doc 的“staff”节点。因此，您需要将 nodes1 定义更改如下：

```
// Retrieving child nodes of first "staff" element of doc1
NodeList nodes1 = doc1.getElementsByTagName("staff").item(0).getChildNodes(); 
```

然后通过替换更改您附加的节点

```
nodes.item(i).getParentNode().appendChild(n); 
```

经过

```
nodes.item(0).appendChild(n); 
```

因此，现在您将 doc1 的所有“staff”子节点（/!\ 仅用于第一个“staff”元素）附加到 doc 的第一个“staff”元素

注意 1：不要使用迭代变量 (i) 来遍历列表 A 来选择另一个列表中的项目，除非您知道自己在做什么（例如，两个列表的长度相同）

注意 2：该解决方案会将 doc1 的第一个“staff”元素的节点附加到 doc 的第一个“staff”元素。您可能想在这里和那里添加一些迭代。